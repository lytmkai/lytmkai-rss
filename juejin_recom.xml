<?xml version="1.0" encoding="UTF-8"?><rss version="2.0">  <channel>      <title>æ˜é‡‘æ–‡ç« æ¨è</title>      <link>https://juejin.cn/recommended?sort=newest</link>      <description>ä¸€ä¸ªå¸®åŠ©å¼€å‘è€…æˆé•¿çš„ç¤¾åŒº</description>      <generator>python juejin_recom.py @Pi20</generator>      <item>    <title><![CDATA[åŸºäº Nuxt 4 + Strapi 5 æ„å»ºé«˜æ€§èƒ½ AI å¯¼èˆªç«™]]></title>    <link>https://juejin.cn/post/7588355695100690441</link>    <guid>https://juejin.cn/post/7588355695100690441</guid>    <pubDate>2025-12-28T08:07:31.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588355695100690441" data-draft-id="7588109656041685038" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åŸºäº Nuxt 4 + Strapi 5 æ„å»ºé«˜æ€§èƒ½ AI å¯¼èˆªç«™"/> <meta itemprop="keywords" content="å‰ç«¯,åç«¯"/> <meta itemprop="datePublished" content="2025-12-28T08:07:31.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="çŸ¥èˆªé©¿ç«™"/> <meta itemprop="url" content="https://juejin.cn/user/4125023356335576"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åŸºäº Nuxt 4 + Strapi 5 æ„å»ºé«˜æ€§èƒ½ AI å¯¼èˆªç«™
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4125023356335576/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    çŸ¥èˆªé©¿ç«™
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-28T08:07:31.000Z" title="Sun Dec 28 2025 08:07:31 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-28
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p><strong>æ‘˜è¦</strong>ï¼šåœ¨ AI å·¥å…·çˆ†å‘çš„ä»Šå¤©ï¼Œå¦‚ä½•å¿«é€Ÿæ„å»ºä¸€ä¸ªæ—¢å…·å¤‡å†…å®¹æ·±åº¦ï¼ˆCMS ç®¡ç†ï¼‰ï¼Œåˆæœ‰æè‡´äº¤äº’ä½“éªŒï¼ˆSSR + ç°ä»£åŒ– UIï¼‰çš„å¯¼èˆªå¹³å°ï¼Ÿæœ¬æ–‡å°†å¤ç›˜ <strong>Creator AI Hub</strong> çš„ä»é›¶å¼€å‘å†ç¨‹ï¼Œæ·±åº¦è§£æ <strong>Monorepo</strong> æ¶æ„è®¾è®¡ã€<strong>Strapi v5</strong> æ— å¤´ CMS çš„çµæ´»åº”ç”¨ä»¥åŠ <strong>Nuxt 4</strong> çš„å…¨æ ˆå®è·µã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-0">ğŸš€ å¼•è¨€ï¼šä¸ºä»€ä¹ˆé€‰æ‹©è¿™å¥—æŠ€æœ¯æ ˆï¼Ÿ</h2>
<p>åœ¨æ„å»º <strong>Creator AI Hub</strong> æ—¶ï¼Œæˆ‘ä»¬é¢ä¸´å‡ ä¸ªæ ¸å¿ƒéœ€æ±‚ï¼š</p>
<ol>
<li><strong>å†…å®¹ä¸ºç‹</strong>ï¼šéœ€è¦é¢‘ç¹æ›´æ–° AI å·¥å…·ã€è§£å†³æ–¹æ¡ˆå’Œ SOPï¼Œä¸”å†…å®¹ç»“æ„å¤æ‚ï¼ˆåŒ…å«ä¼šå‘˜ä¸“å±å­—æ®µï¼‰ã€‚</li>
<li><strong>SEO å‹å¥½</strong>ï¼šä½œä¸ºå¯¼èˆªç«™ï¼Œæœç´¢å¼•æ“ä¼˜åŒ–è‡³å…³é‡è¦ï¼ŒæœåŠ¡ç«¯æ¸²æŸ“ (SSR) æ˜¯å¿…é€‰é¡¹ã€‚</li>
<li><strong>å¼€å‘æ•ˆç‡</strong>ï¼šå‰åç«¯éœ€ç´§å¯†é…åˆï¼Œä½†åˆè¦ä¿æŒç‹¬ç«‹éƒ¨ç½²å’Œç»´æŠ¤çš„çµæ´»æ€§ã€‚</li>
</ol>
<p>åŸºäºæ­¤ï¼Œæˆ‘ä»¬é‡‡ç”¨äº† <strong>TurboRepo + Nuxt 4 + Strapi 5</strong> çš„é»„é‡‘ç»„åˆã€‚è¿™ä¸ä»…æ˜¯ä¸€æ¬¡æŠ€æœ¯é€‰å‹çš„èƒœåˆ©ï¼Œæ›´æ˜¯å¯¹ç°ä»£ Web å¼€å‘æœ€ä½³å®è·µçš„ä¸€æ¬¡å®Œæ•´æ¢ç´¢ã€‚</p>
<hr/>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ad20acbea7614b6c9f7c984e9da30b37~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55-l6Iiq6am_56uZ:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767514051&amp;x-signature=8FpGGkkgiW3VjNoyKEtowMGBlVk%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/83382dedc6d7446c944cb101d4ff0b37~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55-l6Iiq6am_56uZ:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767514051&amp;x-signature=pZA%2BLGQE7KXTm87l3vgElg5wKXI%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-1">1. ç³»ç»Ÿæ¶æ„æ¦‚è§ˆ (System Architecture)</h2>
<p>æœ¬é¡¹ç›®é‡‡ç”¨ <strong>Monorepo</strong> ç­–ç•¥ç®¡ç†å…¨æ ˆä»£ç ï¼ŒåŸºäº <strong>TurboRepo</strong> æ„å»ºé«˜æ•ˆçš„å·¥ä½œæµã€‚å‰ç«¯é‡‡ç”¨ <strong>Nuxt 4</strong> è¿›è¡ŒæœåŠ¡ç«¯æ¸²æŸ“ (SSR)ï¼Œåç«¯ä½¿ç”¨ <strong>Strapi v5</strong> ä½œä¸º Headless CMS æä¾› RESTful APIï¼Œæ•°æ®å­˜å‚¨åœ¨ <strong>MySQL</strong> ä¸­ã€‚</p>
<h3 data-id="heading-2">1.1 æŠ€æœ¯æ ˆ (Tech Stack)</h3>





















































<table><thead><tr><th align="left">é¢†åŸŸ</th><th align="left">æŠ€æœ¯é€‰å‹</th><th align="left">ç‰ˆæœ¬</th><th align="left">è¯´æ˜</th></tr></thead><tbody><tr><td align="left"><strong>Monorepo</strong></td><td align="left">TurboRepo</td><td align="left"><code>^2.7.2</code></td><td align="left">é«˜æ€§èƒ½æ„å»ºç³»ç»Ÿï¼Œç»Ÿä¸€ç®¡ç† apps</td></tr><tr><td align="left"><strong>Package Manager</strong></td><td align="left">pnpm</td><td align="left"><code>9.0.0</code></td><td align="left">é«˜æ•ˆçš„ç£ç›˜ç©ºé—´åˆ©ç”¨ä¸ä¾èµ–ç®¡ç†</td></tr><tr><td align="left"><strong>Frontend</strong></td><td align="left">Nuxt</td><td align="left"><code>^4.2.2</code></td><td align="left">åŸºäº Vue 3 çš„å…¨æ ˆæ¡†æ¶ï¼Œè´Ÿè´£ SSR ä¸äº¤äº’</td></tr><tr><td align="left"><strong>Styling</strong></td><td align="left">Tailwind CSS</td><td align="left"><code>^3.4</code></td><td align="left">åŸå­åŒ– CSS æ¡†æ¶ï¼Œé€šè¿‡ <code>@nuxtjs/tailwindcss</code> é›†æˆ</td></tr><tr><td align="left"><strong>Backend</strong></td><td align="left">Strapi</td><td align="left"><code>5.33.0</code></td><td align="left">çµæ´»çš„ Headless CMSï¼Œæä¾› API æœåŠ¡</td></tr><tr><td align="left"><strong>Database</strong></td><td align="left">MySQL</td><td align="left"><code>8.0</code></td><td align="left">å…³ç³»å‹æ•°æ®åº“ï¼Œé€šè¿‡ <code>mysql2</code> é©±åŠ¨è¿æ¥</td></tr><tr><td align="left"><strong>Docs</strong></td><td align="left">VitePress</td><td align="left">Latest</td><td align="left">é™æ€æ–‡æ¡£ç”Ÿæˆå™¨</td></tr></tbody></table>
<h3 data-id="heading-3">1.2 ç›®å½•ç»“æ„ (Directory Structure)</h3>
<pre><code class="hljs language-bash" lang="bash">.
â”œâ”€â”€ apps/
â”‚   â”œâ”€â”€ api/          <span class="hljs-comment"># Strapi åç«¯åº”ç”¨ (Port: 1337)</span>
â”‚   â”‚   â”œâ”€â”€ src/api/  <span class="hljs-comment"># ä¸šåŠ¡é€»è¾‘ (Content Types, Controllers, Services)</span>
â”‚   â”‚   â””â”€â”€ config/   <span class="hljs-comment"># æ•°æ®åº“ä¸æ’ä»¶é…ç½®</span>
â”‚   â”œâ”€â”€ web/          <span class="hljs-comment"># Nuxt å‰ç«¯åº”ç”¨ (Port: 3000)</span>
â”‚   â”‚   â”œâ”€â”€ components/ <span class="hljs-comment"># Vue ç»„ä»¶</span>
â”‚   â”‚   â”œâ”€â”€ composables/<span class="hljs-comment"># ç»„åˆå¼å‡½æ•° (Data Fetching, State)</span>
â”‚   â”‚   â””â”€â”€ pages/      <span class="hljs-comment"># è·¯ç”±é¡µé¢</span>
â”‚   â””â”€â”€ docs/         <span class="hljs-comment"># é¡¹ç›®æ–‡æ¡£ (VitePress)</span>
â”œâ”€â”€ package.json      <span class="hljs-comment"># Workspace æ ¹é…ç½®</span>
â”œâ”€â”€ turbo.json        <span class="hljs-comment"># Turbo æ„å»ºç®¡çº¿é…ç½®</span>
â””â”€â”€ pnpm-workspace.yaml
</code></pre>
<h3 data-id="heading-4">2.3 ä¼šå‘˜æƒé™è®¾è®¡ (Membership System)</h3>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/09e8a9583a6e42dab846929ac0ee9c87~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55-l6Iiq6am_56uZ:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767514051&amp;x-signature=UfI77CYFkvAYswzzPpQNZ9wmP9Q%3D" alt="image.png" loading="lazy"/>
ä¸ºäº†åŒºåˆ†æ™®é€šç”¨æˆ·ä¸ä»˜è´¹ä¼šå‘˜ï¼Œæˆ‘ä»¬åœ¨ Strapi åç«¯æ‰©å±•äº† <code>Membership</code> å’Œ <code>Order</code> æ¨¡å‹ã€‚</p>
<h4 data-id="heading-5">æ ¸å¿ƒé€»è¾‘</h4>
<ol>
<li><strong>ç”¨æˆ·æ³¨å†Œ</strong>: é»˜è®¤åˆ†é…ä¸º <code>Authenticated</code> è§’è‰²ï¼Œæ— ä¼šå‘˜æƒç›Šã€‚</li>
<li><strong>è®¢é˜…æ”¯ä»˜</strong>: ç”¨æˆ·è´­ä¹°ä¼šå‘˜ï¼ˆæœˆ/å¹´/ç»ˆèº«ï¼‰åï¼Œåç«¯æ›´æ–° <code>Membership</code> è¡¨ï¼Œè®°å½•è¿‡æœŸæ—¶é—´ã€‚</li>
<li><strong>æƒé™æ ¡éªŒ</strong>: åœ¨è·å– Tool è¯¦æƒ…æ—¶ï¼ŒController ä¼šæ ¡éªŒå½“å‰ç”¨æˆ·çš„ Membership çŠ¶æ€ã€‚å¦‚æœè¿‡æœŸæˆ–æœªè®¢é˜…ï¼Œåˆ™<strong>å‰”é™¤</strong> <code>tool.member</code> å­—æ®µï¼ˆåŒ…å« SOP å’Œæ•æ„Ÿæ•°æ®ï¼‰ã€‚</li>
</ol>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// apps/api/src/api/tool/controllers/tool.ts (ä¼ªä»£ç ç¤ºä¾‹)</span>
<span class="hljs-keyword">async</span> <span class="hljs-title function_">findOne</span>(<span class="hljs-params">ctx</span>) {
  <span class="hljs-keyword">const</span> { id } = ctx.<span class="hljs-property">params</span>;
  <span class="hljs-keyword">const</span> user = ctx.<span class="hljs-property">state</span>.<span class="hljs-property">user</span>;
  
  <span class="hljs-comment">// 1. è·å–å·¥å…·å®Œæ•´æ•°æ®</span>
  <span class="hljs-keyword">const</span> entity = <span class="hljs-keyword">await</span> strapi.<span class="hljs-title function_">service</span>(<span class="hljs-string">'api::tool.tool'</span>).<span class="hljs-title function_">findOne</span>(id, { <span class="hljs-attr">populate</span>: [<span class="hljs-string">'member'</span>] });
  
  <span class="hljs-comment">// 2. æ£€æŸ¥ç”¨æˆ·ä¼šå‘˜çŠ¶æ€</span>
  <span class="hljs-keyword">const</span> isMember = <span class="hljs-keyword">await</span> strapi.<span class="hljs-title function_">service</span>(<span class="hljs-string">'api::membership.membership'</span>).<span class="hljs-title function_">checkStatus</span>(user?.<span class="hljs-property">id</span>);
  
  <span class="hljs-comment">// 3. æ•°æ®æ¸…æ´—ï¼šéä¼šå‘˜ç§»é™¤ member å­—æ®µ</span>
  <span class="hljs-keyword">if</span> (!isMember &amp;&amp; entity.<span class="hljs-property">member</span>) {
    <span class="hljs-keyword">delete</span> entity.<span class="hljs-property">member</span>;
  }
  
  <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">transformResponse</span>(entity);
}
</code></pre>
<hr/>
<h2 data-id="heading-6">3. åç«¯è®¾è®¡ (Backend Design) - Strapi v5</h2>
<p>åç«¯æ ¸å¿ƒèŒè´£æ˜¯æä¾›ç»“æ„åŒ–çš„å†…å®¹ç®¡ç†ä¸ API æœåŠ¡ã€‚</p>
<h3 data-id="heading-7">2.1 æ•°æ®æ¨¡å‹ (Content Modeling)</h3>
<p>æˆ‘ä»¬å®šä¹‰äº†å¤šç»´åº¦çš„å†…å®¹ç±»å‹ (Content Types) æ¥æ”¯æ’‘ä¸šåŠ¡ï¼š</p>
<ul>
<li><strong>Collection Types</strong>:
<ul>
<li><code>Tool</code>: AI å·¥å…·æ ¸å¿ƒæ•°æ®ï¼ˆåç§°ã€æè¿°ã€URLã€Logoï¼‰ã€‚</li>
<li><code>Category</code>: å·¥å…·åˆ†ç±»ã€‚</li>
<li><code>Solution</code>: è§£å†³æ–¹æ¡ˆæ–‡ç« ã€‚</li>
</ul>
</li>
<li><strong>Single Types</strong>:
<ul>
<li><code>Global</code>: å…¨å±€é…ç½®ï¼ˆç«™ç‚¹æ ‡é¢˜ã€SEO ä¿¡æ¯ã€ç¤¾ç¾¤äºŒç»´ç ï¼‰ã€‚</li>
</ul>
</li>
<li><strong>Components</strong>:
<ul>
<li><code>tool.member</code>: ä»˜è´¹ä¼šå‘˜ä¸“å±å­—æ®µï¼ˆSOPã€é¿å‘æŒ‡å—ï¼‰ï¼Œåˆ©ç”¨ Strapi ç»„ä»¶åŠŸèƒ½å®ç°çµæ´»çš„æ•°æ®ç»“æ„ã€‚</li>
</ul>
</li>
</ul>
<h4 data-id="heading-8">Schema ç¤ºä¾‹ (<code>Global</code> Config)</h4>
<pre><code class="hljs language-json" lang="json"><span class="hljs-comment">// apps/api/src/api/global/content-types/global/schema.json</span>
<span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"kind"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"singleType"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"collectionName"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"globals"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"info"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"singularName"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"global"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"pluralName"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"globals"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"displayName"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Global"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"attributes"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"communityGroupTitle"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"string"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"default"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"åŠ å…¥å®˜æ–¹äº¤æµç¾¤"</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"communityGroupQrCode"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"media"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"multiple"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"allowedTypes"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"images"</span><span class="hljs-punctuation">]</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h3 data-id="heading-9">2.2 API æ‰©å±•ä¸æƒé™</h3>
<ul>
<li><strong>æƒé™æ§åˆ¶</strong>: ä½¿ç”¨ <code>@strapi/plugin-users-permissions</code> ç®¡ç† Public ä¸ Authenticated è§’è‰²æƒé™ã€‚</li>
<li><strong>è‡ªå®šä¹‰é€»è¾‘</strong>: é€šè¿‡è¦†å†™ Core Controllers æˆ–å¢åŠ  Middleware å®ç°æ›´ç»†ç²’åº¦çš„æƒé™æ§åˆ¶ï¼ˆå¦‚ï¼šéä¼šå‘˜è¯·æ±‚ Tool è¯¦æƒ…æ—¶è¿‡æ»¤æ‰ <code>tool.member</code> å­—æ®µï¼‰ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-10">3. å‰ç«¯è®¾è®¡ (Frontend Design) - Nuxt 4</h2>
<p>å‰ç«¯åº”ç”¨ä¸“æ³¨äºé«˜æ€§èƒ½æ¸²æŸ“ä¸æè‡´çš„ç”¨æˆ·ä½“éªŒã€‚</p>
<h3 data-id="heading-11">3.1 æ ¸å¿ƒç‰¹æ€§å®ç°</h3>
<ul>
<li><strong>æœåŠ¡ç«¯æ¸²æŸ“ (SSR)</strong>: æå‡ SEO è¡¨ç°ï¼Œé¦–å±åŠ è½½é€Ÿåº¦å¿«ã€‚</li>
<li><strong>ç»„åˆå¼å¼€å‘</strong>: åˆ©ç”¨ Nuxt Composables å°è£…ä¸šåŠ¡é€»è¾‘ã€‚</li>
</ul>
<h3 data-id="heading-12">3.2 å…³é”®ä»£ç è§£æ</h3>
<h4 data-id="heading-13">ğŸ” èº«ä»½è®¤è¯ä¸çŠ¶æ€ç®¡ç† (<code>useAuth.ts</code>)</h4>
<p>ä¸ºäº†ä¿è¯ç”¨æˆ·ä½“éªŒï¼Œæˆ‘ä»¬å°è£…äº†ç»Ÿä¸€çš„è®¤è¯é€»è¾‘ï¼Œæ”¯æŒæ³¨å†Œã€ç™»å½•åŠ JWT Token æŒä¹…åŒ–ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// apps/web/composables/useAuth.ts</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">useAuth</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">const</span> user = useState&lt;<span class="hljs-title class_">User</span> | <span class="hljs-literal">null</span>&gt;(<span class="hljs-string">'user'</span>, <span class="hljs-function">() =&gt;</span> <span class="hljs-literal">null</span>)
  <span class="hljs-keyword">const</span> token = <span class="hljs-title function_">useCookie</span>(<span class="hljs-string">'auth_token'</span>)
  <span class="hljs-keyword">const</span> { $strapi } = <span class="hljs-title function_">useNuxtApp</span>()

  <span class="hljs-comment">// ç™»å½•é€»è¾‘</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">login</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params">credentials: LoginInput</span>) =&gt; {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">const</span> { <span class="hljs-attr">user</span>: userData, jwt } = <span class="hljs-keyword">await</span> $strapi.<span class="hljs-title function_">login</span>(credentials)
      token.<span class="hljs-property">value</span> = jwt
      user.<span class="hljs-property">value</span> = userData
      <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>
    } <span class="hljs-keyword">catch</span> (e) {
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
    }
  }
  
  <span class="hljs-comment">// æ³¨å†Œé€»è¾‘ (è‡ªåŠ¨å…³è”é»˜è®¤è§’è‰²)</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">register</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params">input: RegisterInput</span>) =&gt; {
    <span class="hljs-keyword">const</span> { <span class="hljs-attr">user</span>: newUser, jwt } = <span class="hljs-keyword">await</span> $strapi.<span class="hljs-title function_">register</span>(input)
    token.<span class="hljs-property">value</span> = jwt
    user.<span class="hljs-property">value</span> = newUser
  }

  <span class="hljs-keyword">return</span> { user, login, register }
}
</code></pre>
<h4 data-id="heading-14">å…¨å±€é…ç½®è·å– (<code>useGlobal.ts</code>)</h4>
<p>ä¸ºäº†å®ç°é…ç½®åŠ¨æ€åŒ–ï¼Œæˆ‘ä»¬å°è£…äº† <code>useGlobalConfig</code>ï¼Œå®ƒåœ¨åº”ç”¨åˆå§‹åŒ–æ—¶ä» Strapi è·å–é…ç½®ï¼Œå¹¶é€‚é… Strapi v5 çš„å“åº”ç»“æ„ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// apps/web/composables/useGlobal.ts</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">useGlobalConfig</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">useState</span>(<span class="hljs-string">'global-config'</span>, <span class="hljs-function">() =&gt;</span> <span class="hljs-literal">null</span>)
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">fetchGlobalConfig</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">const</span> config = <span class="hljs-title function_">useGlobalConfig</span>()
  <span class="hljs-keyword">const</span> { find } = <span class="hljs-title function_">useStrapi</span>() <span class="hljs-comment">// å°è£…çš„ Strapi Fetcher</span>
  
  <span class="hljs-keyword">try</span> {
    <span class="hljs-comment">// é€‚é… Strapi v5 API å“åº”ç»“æ„ (dataunwrap)</span>
    <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">find</span>(<span class="hljs-string">'global'</span>, {
      <span class="hljs-attr">populate</span>: <span class="hljs-string">'*'</span> <span class="hljs-comment">// è¿è¡¨æŸ¥è¯¢æ‰€æœ‰å…³è”å­—æ®µ (å¦‚å›¾ç‰‡)</span>
    })
    config.<span class="hljs-property">value</span> = response.<span class="hljs-property">data</span> || {}
  } <span class="hljs-keyword">catch</span> (error) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Failed to fetch global config:'</span>, error)
  }
}
</code></pre>
<h4 data-id="heading-15">åŠ¨æ€ç»„ä»¶æ¸²æŸ“ (<code>profile.vue</code>)</h4>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d23aa9c95b984035ab6bdbb8a1deaebc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55-l6Iiq6am_56uZ:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767514051&amp;x-signature=g7HhXumZKVGOwGSb2KsCURUpxtY%3D" alt="image.png" loading="lazy"/></p>
<p>åœ¨ä¸ªäººä¸­å¿ƒé¡µï¼Œæˆ‘ä»¬ç›´æ¥ç»‘å®šä»åç«¯è·å–çš„é…ç½®æ•°æ®ï¼Œå®ç°è¿è¥å†…å®¹çš„å®æ—¶æ›´æ–°ã€‚</p>
<pre><code class="hljs language-vue" lang="vue">&lt;!-- apps/web/pages/profile.vue --&gt;
&lt;script setup lang="ts"&gt;
const globalConfig = useGlobalConfig()

// å¤„ç†å›¾ç‰‡ URL çš„è¾…åŠ©å‡½æ•°
const getQrCodeUrl = (qrCodeObj: any) =&gt; {
  // å…¼å®¹ Strapi ä¸Šä¼ æ’ä»¶çš„ URL æ ¼å¼
  return qrCodeObj?.url ? `${useStrapiUrl()}${qrCodeObj.url}` : '/default-qr.png'
}
&lt;/script&gt;

&lt;template&gt;
  &lt;div class="community-card"&gt;
    &lt;h3&gt;{{ globalConfig?.communityGroupTitle }}&lt;/h3&gt;
    &lt;img 
      :src="getQrCodeUrl(globalConfig?.communityGroupQrCode)" 
      alt="Community QR" 
    /&gt;
  &lt;/div&gt;
&lt;/template&gt;
</code></pre>
<hr/>
<h2 data-id="heading-16">5. éƒ¨ç½²ä¸è¿ç»´ (Deployment &amp; DevOps)</h2>
<h3 data-id="heading-17">4.1 ç¯å¢ƒå˜é‡ç®¡ç†</h3>
<p>é¡¹ç›®ä½¿ç”¨ <code>.env</code> æ–‡ä»¶ç®¡ç†æ•æ„Ÿä¿¡æ¯ï¼ŒåŒºåˆ†å¼€å‘ä¸ç”Ÿäº§ç¯å¢ƒï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># .env (Root)</span>
<span class="hljs-attr">STRAPI_URL</span>=http://localhost:<span class="hljs-number">1337</span>
<span class="hljs-attr">NUXT_PUBLIC_API_URL</span>=http://localhost:<span class="hljs-number">1337</span>/api
<span class="hljs-attr">DATABASE_HOST</span>=localhost
<span class="hljs-attr">DATABASE_PORT</span>=<span class="hljs-number">3306</span>
</code></pre>
<h3 data-id="heading-18">4.2 æ„å»ºæµç¨‹</h3>
<p>åˆ©ç”¨ TurboRepo çš„ç¼“å­˜æœºåˆ¶åŠ é€Ÿæ„å»ºï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å¹¶è¡Œæ„å»ºæ‰€æœ‰åº”ç”¨</span>
pnpm build

<span class="hljs-comment"># Turbo æ™ºèƒ½ç¼“å­˜ç¤ºä¾‹</span>
<span class="hljs-comment"># apps/web: cache miss, executing 345ms</span>
<span class="hljs-comment"># apps/api: cache hit, replaying output 50ms</span>
</code></pre>
<h3 data-id="heading-19">4.3 ç”Ÿäº§ç¯å¢ƒå»ºè®®</h3>
<ul>
<li><strong>Process Manager</strong>: ä½¿ç”¨ PM2 ç®¡ç† Node.js è¿›ç¨‹ã€‚</li>
<li><strong>Reverse Proxy</strong>: Nginx åå‘ä»£ç†ï¼Œé…ç½® SSL è¯ä¹¦ä¸ Gzip å‹ç¼©ã€‚</li>
<li><strong>Storage</strong>: Strapi ä¸Šä¼ æ–‡ä»¶å»ºè®®å¯¹æ¥ AWS S3 æˆ–é˜¿é‡Œäº‘ OSS å¯¹è±¡å­˜å‚¨ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-20">6. å¼€å‘æ•ˆèƒ½ä¸ AI èµ‹èƒ½ (AI-Driven Development)</h2>
<p><strong>Creator AI Hub</strong> çš„è¯ç”Ÿæœ¬èº«å°±æ˜¯ AI èµ‹èƒ½å¼€å‘çš„æœ€ä½³å®è·µã€‚</p>
<blockquote>
<p><strong>â±ï¸ æƒŠäººçš„é€Ÿåº¦ï¼šä» 0 åˆ° 1ï¼Œä»…ç”¨ 48 å°æ—¶</strong></p>
</blockquote>
<p>å¦‚æœä¸å€ŸåŠ© AI å·¥å…·ï¼Œè¿™æ ·ä¸€ä¸ªåŒ…å«å…¨æ ˆæ¶æ„ã€CMS åå°ã€ä¼šå‘˜ç³»ç»Ÿå’Œ SSR å‰ç«¯çš„é¡¹ç›®ï¼Œé€šå¸¸éœ€è¦ 2-3 å‘¨çš„å¼€å‘å‘¨æœŸã€‚ä½†åœ¨ AI è¾…åŠ©ä¸‹ï¼Œæˆ‘ä»¬å®ç°äº† <strong>10 å€ææ•ˆ</strong>ã€‚</p>
<h3 data-id="heading-21">6.1 AI è¾…åŠ©å…¨æµç¨‹</h3>
<ol>
<li><strong>æ¶æ„è®¾è®¡</strong>: AI ååŠ©é€‰å‹ TurboRepo + Nuxt 4ï¼Œå¹¶ç”Ÿæˆäº†åˆå§‹çš„ Monorepo ç›®å½•ç»“æ„ã€‚</li>
<li><strong>Schema ç”Ÿæˆ</strong>: Strapi çš„å¤æ‚ Content Typesï¼ˆå¦‚åµŒå¥—ç»„ä»¶ã€å…³è”å…³ç³»ï¼‰JSON é…ç½®ï¼Œç”± AI ä¸€é”®ç”Ÿæˆï¼ŒèŠ‚çœäº†å¤§é‡æ‰‹åŠ¨é…ç½®æ—¶é—´ã€‚</li>
<li><strong>ä»£ç ç¼–å†™</strong>:
<ul>
<li>å‰ç«¯ <code>useAuth</code>ã€<code>useGlobal</code> ç­‰æ ¸å¿ƒ Composable é€»è¾‘ç”± AI å¿«é€Ÿå®ç°ã€‚</li>
<li>Tailwind CSS çš„å“åº”å¼å¸ƒå±€å’Œå¾®äº¤äº’æ•ˆæœï¼Œé€šè¿‡ AI æç¤ºè¯å¿«é€Ÿè°ƒæ•´ã€‚</li>
</ul>
</li>
<li><strong>æ–‡æ¡ˆä¸æ–‡æ¡£</strong>: é¡¹ç›®æ–‡æ¡£ï¼ˆåŒ…æ‹¬æœ¬æ–‡ï¼‰ã€SEO æè¿°ã€åˆå§‹æµ‹è¯•æ•°æ®ï¼Œå‡ç”± AI è¾…åŠ©æ’°å†™ã€‚</li>
</ol>
<h2 data-id="heading-22">7. æ¶æ„æ‰©å±•æ€§ï¼šä»å¯¼èˆªç«™åˆ°æ— é™å¯èƒ½ (Scalability)</h2>
<p>Creator AI Hub çš„è¿™å¥— <strong>"Monorepo + Headless CMS + SSR Frontend"</strong> æ¶æ„ï¼Œæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªé€šç”¨çš„<strong>å†…å®¹å˜ç°ä¸çŸ¥è¯†ä»˜è´¹åŸºåº§</strong>ã€‚å®ƒä¸ä»…é™äºå¯¼èˆªç«™ï¼Œåªéœ€å¾®è°ƒæ•°æ®æ¨¡å‹ï¼Œå³å¯å¿«é€Ÿè£‚å˜å‡ºå¤šç§åº”ç”¨ï¼š</p>
<h3 data-id="heading-23">7.1 ğŸ’¡ å˜ä½“ä¸€ï¼šä»˜è´¹è¯¾ç¨‹å¹³å°</h3>
<ul>
<li><strong>æ”¹åŠ¨ç‚¹</strong>: å°† <code>Tool</code> æ¨¡å‹æ”¹ä¸º <code>Course</code>ï¼ˆè¯¾ç¨‹ï¼‰ï¼Œ<code>tool.member</code> æ”¹ä¸º <code>CourseChapter</code>ï¼ˆè¯¾ç¨‹ç« èŠ‚ï¼‰ã€‚</li>
<li><strong>åŠŸèƒ½å¤ç”¨</strong>: ä¼šå‘˜è®¢é˜…ç³»ç»Ÿã€è®¢å•æ”¯ä»˜ã€CMS ç« èŠ‚ç®¡ç†ã€å‰ç«¯è§†é¢‘æ’­æ”¾é¡µã€‚</li>
</ul>
<h3 data-id="heading-24">7.2 ğŸ›’ å˜ä½“äºŒï¼šè™šæ‹Ÿèµ„æºå•†åŸ</h3>
<ul>
<li><strong>æ”¹åŠ¨ç‚¹</strong>: å°† <code>Category</code> ç»†åŒ–ä¸ºèµ„æºç±»å‹ï¼ˆPPTæ¨¡æ¿/è®¾è®¡ç´ æ/Promptï¼‰ï¼Œå¢åŠ  <code>DownloadLink</code> å­—æ®µã€‚</li>
<li><strong>åŠŸèƒ½å¤ç”¨</strong>: æœç´¢è¿‡æ»¤ã€èµ„æºè¯¦æƒ…é¡µã€ä¸‹è½½æƒé™æ§åˆ¶ï¼ˆä»…ä¼šå‘˜æˆ–å•æ¬¡è´­ä¹°å¯ä¸‹è½½ï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-25">7.3 ğŸ¢ å˜ä½“ä¸‰ï¼šä¼ä¸šå†…éƒ¨çŸ¥è¯†åº“</h3>
<ul>
<li><strong>æ”¹åŠ¨ç‚¹</strong>: å¼€å¯ Strapi çš„ SSO å•ç‚¹ç™»å½•ï¼Œå…³é—­å…¬å¼€æ³¨å†Œã€‚</li>
<li><strong>åŠŸèƒ½å¤ç”¨</strong>: æ–‡æ¡£å±‚çº§ç®¡ç†ã€SOP æ ‡å‡†åŒ–æµç¨‹å±•ç¤ºã€å…¨ç«™å…¨æ–‡æ£€ç´¢ã€‚</li>
</ul>
<p>è¿™å¥—æ¶æ„çš„æœ€å¤§ä»·å€¼åœ¨äº**â€œä¸€æ¬¡æ„å»ºï¼Œå¤„å¤„å¤ç”¨â€**ã€‚Monorepo ä½¿å¾—æˆ‘ä»¬å¯ä»¥åœ¨ <code>apps/</code> ç›®å½•ä¸‹è½»æ¾æ·»åŠ æ–°çš„å‰ç«¯åº”ç”¨ï¼ˆå¦‚ <code>apps/mobile</code> æˆ– <code>apps/admin-dashboard</code>ï¼‰ï¼Œå…±äº«åŒä¸€å¥—åç«¯ API å’Œ TypeScript ç±»å‹å®šä¹‰ï¼Œæå¤§åœ°é™ä½äº†å¤šä¸šåŠ¡çº¿çš„ç»´æŠ¤æˆæœ¬ã€‚</p>
<hr/>
<h3 data-id="heading-26">8. ç»“è¯­</h3>
<p>é€šè¿‡ Nuxt 4 + Strapi 5 çš„é»„é‡‘ç»„åˆï¼Œé…åˆ AI ç»“å¯¹ç¼–ç¨‹æ¨¡å¼ï¼Œæˆ‘ä»¬å¿«é€Ÿæ„å»ºäº†ä¸€ä¸ªæ—¢æœ‰å†…å®¹æ·±åº¦ï¼Œåˆæœ‰è‰¯å¥½äº¤äº’ä½“éªŒçš„ AI å¯¼èˆªå¹³å°ã€‚è¿™ä¸ä»…éªŒè¯äº†æŠ€æœ¯æ ˆçš„å…ˆè¿›æ€§ï¼Œæ›´è¯æ˜äº†åœ¨ AI æ—¶ä»£ï¼Œ<strong>ä¸ªäººçš„å¼€å‘æ½œèƒ½å¯ä»¥è¢«æ— é™æ”¾å¤§</strong>ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ¯å‘¨AIè®ºæ–‡é€Ÿé€’ï¼ˆ251222-251226ï¼‰]]></title>    <link>https://juejin.cn/post/7588098335791185920</link>    <guid>https://juejin.cn/post/7588098335791185920</guid>    <pubDate>2025-12-28T08:27:29.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588098335791185920" data-draft-id="7588092534162767872" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ¯å‘¨AIè®ºæ–‡é€Ÿé€’ï¼ˆ251222-251226ï¼‰"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-12-28T08:27:29.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¶å­çš„æŠ€æœ¯ç¢ç¢å¿µ"/> <meta itemprop="url" content="https://juejin.cn/user/2831954919569245"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ¯å‘¨AIè®ºæ–‡é€Ÿé€’ï¼ˆ251222-251226ï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2831954919569245/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¶å­çš„æŠ€æœ¯ç¢ç¢å¿µ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-28T08:27:29.000Z" title="Sun Dec 28 2025 08:27:29 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-28
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»21åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">DataFlow: An LLM-Driven Framework for Unified Data Preparation and Workflow Automation in the Era of Data-Centric AI</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fabs%2F2512.16676" target="_blank" title="https://arxiv.org/abs/2512.16676" ref="nofollow noopener noreferrer">DataFlow: é¢å‘ä»¥æ•°æ®ä¸ºä¸­å¿ƒ AI æ—¶ä»£çš„ç»Ÿä¸€æ•°æ®å‡†å¤‡ä¸å·¥ä½œæµè‡ªåŠ¨åŒ– LLM é©±åŠ¨æ¡†æ¶</a></p>
<p>å¤§è¯­è¨€æ¨¡å‹ (LLMs) å¯¹é«˜è´¨é‡æ•°æ®çš„éœ€æ±‚å¿«é€Ÿå¢é•¿ï¼Œè¿™ä½¿å¾—å¯¹å¯æ‰©å±•ã€å¯é ä¸”è¯­ä¹‰ä¸°å¯Œçš„æ•°æ®å‡†å¤‡ç®¡é“çš„éœ€æ±‚å˜å¾—å°¤ä¸ºè¿«åˆ‡ã€‚ç„¶è€Œï¼Œå½“å‰å®è·µä»ä¸»è¦ä¾èµ–ä¸´æ—¶è„šæœ¬å’Œå®šä¹‰æ¾æ•£çš„å·¥ä½œæµï¼Œå®ƒä»¬ç¼ºä¹åŸåˆ™æ€§çš„æŠ½è±¡ï¼Œé˜»ç¢äº†å¯å¤ç°æ€§ï¼Œå¹¶å¯¹æ¨¡å‹åœ¨ç¯ (model-in-the-loop) çš„æ•°æ®ç”Ÿæˆæ”¯æŒæœ‰é™ã€‚ä¸ºåº”å¯¹è¿™äº›æŒ‘æˆ˜ï¼Œæˆ‘ä»¬æå‡ºäº† DataFlowï¼Œä¸€ä¸ªç»Ÿä¸€ä¸”å¯æ‰©å±•çš„ LLM é©±åŠ¨æ•°æ®å‡†å¤‡æ¡†æ¶ã€‚DataFlow é‡‡ç”¨ç³»ç»Ÿçº§æŠ½è±¡è®¾è®¡ï¼Œå®ç°äº†æ¨¡å—åŒ–ã€å¯å¤ç”¨å’Œå¯ç»„åˆçš„æ•°æ®è½¬æ¢ï¼Œå¹¶æä¾›äº†ç±»ä¼¼ PyTorch é£æ ¼çš„ç®¡é“æ„å»º APIï¼Œç”¨ä»¥æ„å»ºå¯è°ƒè¯•å’Œå¯ä¼˜åŒ–çš„æ•°æ®æµã€‚è¯¥æ¡†æ¶åŒ…å«è¿‘ 200 ä¸ªå¯å¤ç”¨æ“ä½œç¬¦å’Œå…­ä¸ªé¢†åŸŸé€šç”¨ç®¡é“ï¼Œè¦†ç›–æ–‡æœ¬ã€æ•°å­¦æ¨ç†ã€ä»£ç ã€Text-to-SQLã€æ™ºèƒ½ä½“é©±åŠ¨çš„æ£€ç´¢å¢å¼ºç”Ÿæˆ (Agent RAG) ä»¥åŠå¤§è§„æ¨¡çŸ¥è¯†æå–ã€‚ä¸ºè¿›ä¸€æ­¥æå‡æ˜“ç”¨æ€§ï¼Œæˆ‘ä»¬å¼•å…¥äº† DataFlow-Agentï¼Œå®ƒèƒ½å¤Ÿé€šè¿‡æ“ä½œç¬¦åˆæˆã€ç®¡é“è§„åˆ’å’Œè¿­ä»£éªŒè¯ï¼Œè‡ªåŠ¨å°†è‡ªç„¶è¯­è¨€æè¿°è½¬æ¢ä¸ºå¯æ‰§è¡Œçš„ç®¡é“ã€‚åœ¨å…­ä¸ªä»£è¡¨æ€§ç”¨ä¾‹ä¸­ï¼ŒDataFlow å‡èƒ½ä¸€è‡´åœ°æå‡ä¸‹æ¸¸ LLM æ€§èƒ½ã€‚æˆ‘ä»¬çš„æ•°å­¦ã€ä»£ç å’Œæ–‡æœ¬ç®¡é“æ€§èƒ½è¶…è¶Šäº†ç²¾å¿ƒæ„å»ºçš„äººå·¥æ•°æ®é›†å’Œä¸“é—¨çš„åˆæˆåŸºçº¿ï¼šåœ¨ Text-to-SQL ä»»åŠ¡ä¸Šï¼Œå…¶æ‰§è¡Œå‡†ç¡®ç‡è¾ƒ SynSQL æœ€é«˜æå‡ 3%ï¼›åœ¨ä»£ç åŸºå‡†æµ‹è¯•ä¸Šå¹³å‡æå‡ 7%ï¼›åœ¨ MATHã€GSM8K å’Œ AIME åŸºå‡†ä¸Šå–å¾—äº† 1 åˆ° 3 ä¸ªç™¾åˆ†ç‚¹çš„æ€§èƒ½å¢ç›Šã€‚æ­¤å¤–ï¼Œç”± DataFlow ç”Ÿæˆçš„ç»Ÿä¸€ä¸‡æ ·æœ¬ (10K) æ•°æ®é›†ï¼Œä½¿å¾—åŸºç¡€æ¨¡å‹çš„æ€§èƒ½è¶…è¶Šäº†åœ¨ç™¾ä¸‡çº§ (1M) Infinity-Instruct æ•°æ®ä¸Šè®­ç»ƒçš„åŒç±»æ¨¡å‹ã€‚è¿™äº›ç»“æœè¡¨æ˜ï¼ŒDataFlow ä¸ºå¯é ã€å¯å¤ç°å’Œå¯æ‰©å±•çš„ LLM æ•°æ®å‡†å¤‡æä¾›äº†ä¸€ä¸ªå®ç”¨ä¸”é«˜æ€§èƒ½çš„åº•å±‚æ”¯æŒï¼Œå¹¶ä¸ºæœªæ¥ä»¥æ•°æ®ä¸ºä¸­å¿ƒçš„ AI å‘å±•å¥ å®šäº†ç³»ç»Ÿçº§åŸºç¡€ã€‚</p>
<h2 data-id="heading-1">Probing Scientific General Intelligence of LLMs with Scientist-Aligned Workflows</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fabs%2F2512.16969" target="_blank" title="https://arxiv.org/abs/2512.16969" ref="nofollow noopener noreferrer">é€šè¿‡ç§‘å­¦å®¶å·¥ä½œæµå¯¹é½è¯„ä¼°å¤§è¯­è¨€æ¨¡å‹çš„ç§‘å­¦é€šç”¨æ™ºèƒ½</a></p>
<p>å°½ç®¡ç§‘å­¦ AI é¢†åŸŸå–å¾—äº†è¿›å±•ï¼Œä½†å…³äºç§‘å­¦é€šç”¨æ™ºèƒ½ (Scientific General Intelligence, SGI) â€”â€” å³è‡ªä¸»æ„æ€ã€æ¢ç´¢å¹¶è·¨ç§‘å­¦é¢†åŸŸè¿›è¡Œæ¨ç†çš„èƒ½åŠ› â€”â€” ä»ç¼ºä¹ä¸€ä¸ªè¿è´¯çš„æ¡†æ¶ã€‚æˆ‘ä»¬æå‡ºäº†ä¸€ä¸ªåŸºäºå®è·µæ¢ç©¶æ¨¡å‹ (Practical Inquiry Model, PIM: å®¡è®®ã€æ„æ€ã€è¡ŒåŠ¨ã€æ„ŸçŸ¥) çš„å¯æ“ä½œ SGI å®šä¹‰ï¼Œå¹¶é€šè¿‡å››ä¸ªä¸ç§‘å­¦å®¶å·¥ä½œæµå¯¹é½çš„ä»»åŠ¡æ¥å…·ä½“å®ç°è¿™ä¸€å®šä¹‰ï¼šæ·±åº¦ç ”ç©¶ã€æƒ³æ³•ç”Ÿæˆã€å¹²/æ¹¿å®éªŒ (dry/wet experiments) ä»¥åŠå®éªŒæ¨ç†ã€‚SGI-Bench åŸºå‡†åŒ…å« 1000 å¤šä¸ªç”±ä¸“å®¶ç²¾å¿ƒç­–åˆ’çš„è·¨å­¦ç§‘æ ·æœ¬ï¼Œå…¶çµæ„Ÿæ¥æºäºã€Šç§‘å­¦ã€‹æ‚å¿—æå‡ºçš„ 125 ä¸ªé‡å¤§ç§‘å­¦é—®é¢˜ï¼Œå¯ç”¨äºç³»ç»Ÿè¯„ä¼°æœ€å…ˆè¿›çš„å¤§è¯­è¨€æ¨¡å‹ã€‚è¯„ä¼°ç»“æœæ­ç¤ºäº†å¤šæ–¹é¢çš„å·®è·ï¼šå°½ç®¡åœ¨æ­¥éª¤å±‚é¢ä¸äººç±»å·¥ä½œæµå¯¹é½ï¼Œä½†æ·±åº¦ç ”ç©¶ä»»åŠ¡çš„ç²¾ç¡®åŒ¹é…ç‡ä»ç„¶å¾ˆä½ (10--20%)ï¼›ç”Ÿæˆçš„æƒ³æ³•ç¼ºä¹å¯è¡Œæ€§å’Œç»†èŠ‚ï¼›å¹²å®éªŒä»»åŠ¡ä¸­ä»£ç å¯æ‰§è¡Œæ€§é«˜ï¼Œä½†æ‰§è¡Œç»“æœçš„å‡†ç¡®æ€§ä½ï¼›æ¹¿å®éªŒæ–¹æ¡ˆçš„æ­¥éª¤åºåˆ—ä¿çœŸåº¦ä½ï¼›å¹¶ä¸”åœ¨å¤šæ¨¡æ€æ¯”è¾ƒæ¨ç†æ–¹é¢æŒç»­é¢ä¸´æŒ‘æˆ˜ã€‚æˆ‘ä»¬è¿›ä¸€æ­¥å¼•å…¥äº†æµ‹è¯•æ—¶å¼ºåŒ–å­¦ä¹  (Test-Time Reinforcement Learning, TTRL)ï¼Œè¯¥æ–¹æ³•åœ¨æ¨¡å‹æ¨ç†é˜¶æ®µä¼˜åŒ–åŸºäºæ£€ç´¢å¢å¼ºçš„æ–°é¢–æ€§å¥–åŠ±ï¼Œä»è€Œèƒ½åœ¨ä¸ä¾èµ–å‚è€ƒç­”æ¡ˆçš„æƒ…å†µä¸‹æå‡ç”Ÿæˆå‡è®¾çš„æ–°é¢–æ€§ã€‚ç»¼ä¸Šæ‰€è¿°ï¼Œæˆ‘ä»¬åŸºäº PIM çš„å®šä¹‰ã€ä»¥å·¥ä½œæµä¸ºä¸­å¿ƒçš„åŸºå‡†æµ‹è¯•ä»¥åŠå®è¯åˆ†æï¼Œä¸ºå¼€å‘èƒ½å¤ŸçœŸæ­£æ¨åŠ¨ç§‘å­¦å‘ç°è¿›ç¨‹çš„ AI ç³»ç»Ÿå¥ å®šäº†åŸºç¡€ã€‚</p>
<h2 data-id="heading-2">SemanticGen: Video Generation in Semantic Space</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fabs%2F2512.20619" target="_blank" title="https://arxiv.org/abs/2512.20619" ref="nofollow noopener noreferrer">SemanticGenï¼šè¯­ä¹‰ç©ºé—´è§†é¢‘ç”Ÿæˆ</a></p>
<p>å½“å‰æœ€å…ˆè¿›çš„è§†é¢‘ç”Ÿæˆæ¨¡å‹é€šå¸¸å­¦ä¹ è§†é¢‘åœ¨ VAE (Variational Autoencoder) æ½œåœ¨ç©ºé—´ä¸­çš„åˆ†å¸ƒï¼Œå¹¶é€šè¿‡ VAE è§£ç å™¨å°†å…¶æ˜ å°„åˆ°åƒç´ ç©ºé—´ã€‚è¿™ç§æ–¹æ³•è™½ç„¶èƒ½å¤Ÿç”Ÿæˆé«˜è´¨é‡è§†é¢‘ï¼Œä½†å­˜åœ¨æ”¶æ•›é€Ÿåº¦æ…¢çš„é—®é¢˜ï¼Œå¹¶ä¸”åœ¨ç”Ÿæˆé•¿è§†é¢‘æ—¶è®¡ç®—å¼€é”€å·¨å¤§ã€‚æœ¬æ–‡æå‡º SemanticGenï¼Œä¸€ç§æ–°é¢–çš„è§£å†³æ–¹æ¡ˆï¼Œé€šè¿‡åœ¨è¯­ä¹‰ç©ºé—´ä¸­è¿›è¡Œè§†é¢‘ç”Ÿæˆæ¥åº”å¯¹è¿™äº›æŒ‘æˆ˜ã€‚æˆ‘ä»¬çš„æ ¸å¿ƒè§‚ç‚¹æ˜¯ï¼šç”±äºè§†é¢‘æœ¬èº«å­˜åœ¨å›ºæœ‰å†—ä½™ï¼Œç”Ÿæˆè¿‡ç¨‹åº”å½“å§‹äºä¸€ä¸ªç´§å‡‘çš„é«˜å±‚è¯­ä¹‰ç©ºé—´ä»¥è¿›è¡Œå…¨å±€è§„åˆ’ä¸ç»“æ„è®¾è®¡ï¼Œéšåå†è¡¥å……é«˜é¢‘ç»†èŠ‚ï¼Œè€Œéç›´æ¥ä½¿ç”¨åŒå‘æ³¨æ„åŠ›å¯¹æµ·é‡çš„ä½å±‚è§†é¢‘ Token è¿›è¡Œå»ºæ¨¡ã€‚SemanticGen é‡‡ç”¨ä¸¤é˜¶æ®µç”Ÿæˆæµç¨‹ï¼šç¬¬ä¸€é˜¶æ®µï¼Œä¸€ä¸ªæ‰©æ•£æ¨¡å‹ç”Ÿæˆç´§å‡‘çš„è¯­ä¹‰è§†é¢‘ç‰¹å¾ï¼Œè¿™äº›ç‰¹å¾å®šä¹‰äº†è§†é¢‘çš„å…¨å±€å¸ƒå±€ï¼›ç¬¬äºŒé˜¶æ®µï¼Œå¦ä¸€ä¸ªæ‰©æ•£æ¨¡å‹ä»¥è¿™äº›è¯­ä¹‰ç‰¹å¾ä¸ºæ¡ä»¶ï¼Œç”Ÿæˆ VAE æ½œåœ¨è¡¨ç¤ºï¼Œè¿›è€Œäº§ç”Ÿæœ€ç»ˆè§†é¢‘è¾“å‡ºã€‚æˆ‘ä»¬è§‚å¯Ÿåˆ°ï¼Œç›¸è¾ƒäºåœ¨ VAE æ½œåœ¨ç©ºé—´ä¸­ç”Ÿæˆï¼Œåœ¨è¯­ä¹‰ç©ºé—´ä¸­è¿›è¡Œç”Ÿæˆèƒ½å®ç°æ›´å¿«çš„æ”¶æ•›é€Ÿåº¦ã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬çš„æ–¹æ³•åœ¨æ‰©å±•åˆ°é•¿è§†é¢‘ç”Ÿæˆä»»åŠ¡æ—¶ï¼Œä¾ç„¶ä¿æŒé«˜æ•ˆä¸”è®¡ç®—æˆæœ¬å¯æ§ã€‚å¤§é‡å®éªŒè¡¨æ˜ï¼ŒSemanticGen èƒ½å¤Ÿç”Ÿæˆé«˜è´¨é‡è§†é¢‘ï¼Œå…¶æ€§èƒ½ä¼˜äºå½“å‰æœ€ä¼˜æ–¹æ³•å’Œå¤šä¸ªå¼ºåŸºçº¿æ¨¡å‹ã€‚</p>
<h2 data-id="heading-3">Step-DeepResearch Technical Report</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fabs%2F2512.20491" target="_blank" title="https://arxiv.org/abs/2512.20491" ref="nofollow noopener noreferrer">Step-DeepResearch æŠ€æœ¯æŠ¥å‘Š</a></p>
<p>éšç€å¤§è¯­è¨€æ¨¡å‹ (LLM) å‘è‡ªä¸» AI æ™ºèƒ½ä½“ (AI Agent) æ¼”è¿›ï¼Œæ·±åº¦ç ”ç©¶ (Deep Research) å·²æˆä¸ºä¸€é¡¹å…³é”®çš„è¯„ä¼°ç»´åº¦ã€‚ç„¶è€Œï¼Œç°æœ‰çš„å­¦æœ¯åŸºå‡†ï¼ˆå¦‚ BrowseCompï¼‰å¾€å¾€éš¾ä»¥æ»¡è¶³ç°å®ä¸–ç•Œå¯¹å¼€æ”¾å¼æ¢ç´¢ç ”ç©¶çš„éœ€æ±‚ï¼Œè¿™ç±»ç ”ç©¶éœ€è¦å¼ºå¤§çš„æ„å›¾è¯†åˆ«ã€é•¿æœŸå†³ç­–å’Œè·¨æ¥æºéªŒè¯èƒ½åŠ›ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬æ¨å‡ºäº† Step-DeepResearchï¼Œä¸€ä¸ªé«˜æ€§ä»·æ¯”çš„ç«¯åˆ°ç«¯æ™ºèƒ½ä½“ã€‚æˆ‘ä»¬æå‡ºäº†ä¸€ç§åŸºäºåŸå­åŒ–èƒ½åŠ› (Atomic Capabilities) çš„æ•°æ®åˆæˆç­–ç•¥ï¼Œç”¨ä»¥å¼ºåŒ–ä»»åŠ¡è§„åˆ’å’ŒæŠ¥å‘Šæ’°å†™èƒ½åŠ›ï¼Œå¹¶ç»“åˆäº†ä»æ™ºèƒ½ä½“è¡Œä¸ºè®­ç»ƒã€ç›‘ç£å¾®è°ƒ (SFT) åˆ°å¼ºåŒ–å­¦ä¹  (RL) çš„æ¸è¿›å¼è®­ç»ƒè·¯å¾„ã€‚è¯¥æ–¹æ³•é€šè¿‡ä¸€ä¸ªæ£€æŸ¥è¡¨å¼è¯„ä¼°å™¨ (Checklist-style Judger) å¾—åˆ°å¢å¼ºï¼Œæ˜¾è‘—æå‡äº†ç³»ç»Ÿçš„é²æ£’æ€§ã€‚æ­¤å¤–ï¼Œä¸ºäº†å¡«è¡¥ä¸­æ–‡é¢†åŸŸåœ¨æ·±åº¦ç ”ç©¶è¯„ä¼°æ–¹é¢çš„ç©ºç™½ï¼Œæˆ‘ä»¬é’ˆå¯¹çœŸå®çš„æ·±åº¦ç ”ç©¶åœºæ™¯å»ºç«‹äº† ADR-Bench åŸºå‡†ã€‚å®éªŒç»“æœè¡¨æ˜ï¼ŒStep-DeepResearch (32B) åœ¨ Scale AI Research Rubrics è¯„ä¼°ä¸­å–å¾—äº† 61.4% çš„å¾—åˆ†ã€‚åœ¨ ADR-Bench ä¸Šï¼Œå…¶æ€§èƒ½æ˜¾è‘—ä¼˜äºåŒç±»æ¨¡å‹ï¼Œå¹¶èƒ½ä¸ OpenAIã€Gemini DeepResearch ç­‰æœ€å…ˆè¿› (SOTA) çš„é—­æºæ¨¡å‹ç›¸åª²ç¾ã€‚è¿™äº›å‘ç°è¯æ˜ï¼Œé€šè¿‡ç²¾ç»†åŒ–çš„è®­ç»ƒï¼Œä¸­ç­‰è§„æ¨¡çš„æ¨¡å‹èƒ½å¤Ÿä»¥ä¸šç•Œé¢†å…ˆçš„æ€§ä»·æ¯”å®ç°ä¸“å®¶çº§çš„èƒ½åŠ›ã€‚</p>
<h2 data-id="heading-4">TurboDiffusion: Accelerating Video Diffusion Models by 100-200 Times</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fabs%2F2512.16093" target="_blank" title="https://arxiv.org/abs/2512.16093" ref="nofollow noopener noreferrer">TurboDiffusion: å°†è§†é¢‘æ‰©æ•£æ¨¡å‹åŠ é€Ÿ 100-200 å€</a></p>
<p>æˆ‘ä»¬æå‡ºäº† TurboDiffusionï¼Œè¿™æ˜¯ä¸€ä¸ªè§†é¢‘ç”ŸæˆåŠ é€Ÿæ¡†æ¶ï¼Œèƒ½å¤Ÿåœ¨ä¿æŒè§†é¢‘è´¨é‡çš„åŒæ—¶ï¼Œå°†ç«¯åˆ°ç«¯çš„æ‰©æ•£æ¨¡å‹ç”Ÿæˆè¿‡ç¨‹åŠ é€Ÿ 100 è‡³ 200 å€ã€‚TurboDiffusion ä¸»è¦é€šè¿‡ä»¥ä¸‹å‡ ä¸ªç»„ä»¶å®ç°åŠ é€Ÿï¼š(1) æ³¨æ„åŠ›æœºåˆ¶åŠ é€Ÿï¼šTurboDiffusion é‡‡ç”¨ä½æ¯”ç‰¹ SageAttention å’Œå¯è®­ç»ƒçš„ç¨€ç–çº¿æ€§æ³¨æ„åŠ› (Sparse-Linear Attention, SLA) æ¥åŠ é€Ÿæ³¨æ„åŠ›è®¡ç®—ã€‚(2) æ­¥æ•°è’¸é¦ï¼šTurboDiffusion ä½¿ç”¨ rCM æ–¹æ³•è¿›è¡Œé«˜æ•ˆçš„æ­¥æ•°è’¸é¦ã€‚(3) W8A8 é‡åŒ–ï¼šTurboDiffusion å°†æ¨¡å‹å‚æ•°å’Œæ¿€æ´»å€¼é‡åŒ–ä¸º 8 ä½ (W8A8)ï¼Œä»¥åŠ é€Ÿçº¿æ€§å±‚è¿ç®—å¹¶å‡å°‘æ¨¡å‹ä½“ç§¯ã€‚æ­¤å¤–ï¼Œè¯¥æ¡†æ¶è¿˜é›†æˆäº†å…¶ä»–å¤šé¡¹å·¥ç¨‹ä¼˜åŒ–æŠ€æœ¯ã€‚
æˆ‘ä»¬åœ¨ Wan2.2-I2V-14B-720Pã€Wan2.1-T2V-1.3B-480Pã€Wan2.1-T2V-14B-720P ä»¥åŠ Wan2.1-T2V-14B-480P æ¨¡å‹ä¸Šè¿›è¡Œäº†å®éªŒã€‚ç»“æœè¡¨æ˜ï¼Œå³ä½¿åœ¨å•å— RTX 5090 GPU ä¸Šï¼ŒTurboDiffusion ä¹Ÿèƒ½å®ç° 100-200 å€çš„è§†é¢‘ç”ŸæˆåŠ é€Ÿï¼ŒåŒæ—¶ç”Ÿæˆè§†é¢‘çš„è´¨é‡ä¸åŸå§‹æ–¹æ³•ç›¸å½“ã€‚åŒ…å«æ¨¡å‹æ£€æŸ¥ç‚¹åŠæ˜“äºä½¿ç”¨ä»£ç çš„ GitHub ä»“åº“åœ°å€ä¸ºï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fthu-ml%2FTurboDiffusion%25E3%2580%2582" target="_blank" title="https://github.com/thu-ml/TurboDiffusion%E3%80%82" ref="nofollow noopener noreferrer">github.com/thu-ml/Turbâ€¦</a></p>
<h2 data-id="heading-5">PhysBrain: Human Egocentric Data as a Bridge from Vision Language Models to Physical Intelligence</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fabs%2F2512.16793" target="_blank" title="https://arxiv.org/abs/2512.16793" ref="nofollow noopener noreferrer">PhysBrain: äººç±»è‡ªæˆ‘ä¸­å¿ƒæ•°æ®ä½œä¸ºä»è§†è§‰è¯­è¨€æ¨¡å‹åˆ°ç‰©ç†æ™ºèƒ½çš„æ¡¥æ¢</a></p>
<p>æœºå™¨äººçš„æ³›åŒ–èƒ½åŠ›ä¾èµ–äºç‰©ç†æ™ºèƒ½ï¼šå³åœ¨è‡ªæˆ‘ä¸­å¿ƒæ„ŸçŸ¥ä¸è¡ŒåŠ¨æ¡ä»¶ä¸‹ï¼Œå¯¹çŠ¶æ€å˜åŒ–ã€å¯†é›†æ¥è§¦äº¤äº’ä»¥åŠé•¿æ—¶ç¨‹è§„åˆ’è¿›è¡Œæ¨ç†çš„èƒ½åŠ›ã€‚ç„¶è€Œï¼Œå¤§å¤šæ•°è§†è§‰è¯­è¨€æ¨¡å‹ä¸»è¦åŸºäºç¬¬ä¸‰äººç§°æ•°æ®è¿›è¡Œè®­ç»ƒï¼Œè¿™ä¸ºäººå½¢æœºå™¨äººå¸¦æ¥äº†æ ¹æœ¬æ€§çš„è§†è§’å¤±é…ã€‚ç”±äºæˆæœ¬é«˜æ˜‚ä¸”å¤šæ ·æ€§æœ‰é™ï¼Œæ‰©å±•æœºå™¨äººè‡ªæˆ‘ä¸­å¿ƒæ•°æ®çš„é‡‡é›†ä»ä¸ç°å®ï¼›è€Œå¤§è§„æ¨¡çš„äººç±»è‡ªæˆ‘ä¸­å¿ƒè§†é¢‘åˆ™æä¾›äº†ä¸€ä¸ªå¯æ‰©å±•çš„æ›¿ä»£æ–¹æ¡ˆï¼Œå®ƒä»¬å¤©ç„¶åœ°æ•æ‰äº†ä¸°å¯Œçš„äº¤äº’è¯­å¢ƒä¸å› æœç»“æ„ã€‚å…³é”®æŒ‘æˆ˜åœ¨äºå¦‚ä½•å°†åŸå§‹çš„è‡ªæˆ‘ä¸­å¿ƒè§†é¢‘è½¬åŒ–ä¸ºç»“æ„åŒ–ä¸”å¯é çš„å…·èº«è®­ç»ƒç›‘ç£ä¿¡å·ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬æå‡ºäº†ä¸€ä¸ª Egocentric2Embodiment è½¬æ¢æµç¨‹ï¼Œè¯¥æµç¨‹å°†ç¬¬ä¸€äººç§°è§†é¢‘è½¬åŒ–ä¸ºå…·æœ‰å¼ºåˆ¶è¯æ®åŸºç¡€å’Œæ—¶åºä¸€è‡´æ€§çš„ã€å¤šå±‚æ¬¡ä¸”æ¨¡å¼é©±åŠ¨çš„è§†è§‰é—®ç­”ç›‘ç£ä¿¡å·ï¼Œä»è€Œèƒ½å¤Ÿå¤§è§„æ¨¡æ„å»º Egocentric2Embodiment æ•°æ®é›† (E2E-3M)ã€‚é€šè¿‡åœ¨ E2E-3M æ•°æ®é›†ä¸Šè¿›è¡Œè®­ç»ƒï¼Œæˆ‘ä»¬å¾—åˆ°äº†ä¸€ä¸ªå…·å¤‡è‡ªæˆ‘ä¸­å¿ƒæ„ŸçŸ¥èƒ½åŠ›çš„å…·èº«å¤§è„‘ï¼Œç§°ä¸º PhysBrainã€‚PhysBrain åœ¨è‡ªæˆ‘ä¸­å¿ƒç†è§£æ–¹é¢è¡¨ç°å‡ºæ˜¾è‘—æå‡ï¼Œå°¤å…¶æ˜¯åœ¨ EgoThink ä»»åŠ¡ä¸Šçš„è§„åˆ’èƒ½åŠ›ã€‚å®ƒæä¾›äº†ä¸€ä¸ªå…·å¤‡è‡ªæˆ‘ä¸­å¿ƒæ„ŸçŸ¥èƒ½åŠ›çš„åˆå§‹åŒ–çŠ¶æ€ï¼Œä½¿å¾—è§†è§‰è¯­è¨€-åŠ¨ä½œæ¨¡å‹çš„å¾®è°ƒè¿‡ç¨‹æ ·æœ¬æ•ˆç‡æ›´é«˜ï¼Œå¹¶åœ¨ SimplerEnv ä¸Šå–å¾—äº†æ›´é«˜çš„æˆåŠŸç‡ (53.9%)ï¼Œè¿™è¯æ˜äº†ä»äººç±»è‡ªæˆ‘ä¸­å¿ƒç›‘ç£ä¿¡å·åˆ°ä¸‹æ¸¸æœºå™¨äººæ§åˆ¶çš„æœ‰æ•ˆè¿ç§»ã€‚</p>
<h2 data-id="heading-6">Robust-R1: Degradation-Aware Reasoning for Robust Visual Understanding</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fabs%2F2512.17532" target="_blank" title="https://arxiv.org/abs/2512.17532" ref="nofollow noopener noreferrer">Robust-R1ï¼šåŸºäºé€€åŒ–æ„ŸçŸ¥æ¨ç†çš„é²æ£’è§†è§‰ç†è§£</a></p>
<p>åœ¨æç«¯ç°å®ä¸–ç•Œçš„è§†è§‰é€€åŒ–æ¡ä»¶ä¸‹ï¼Œå¤šæ¨¡æ€å¤§è¯­è¨€æ¨¡å‹ (MLLM) éš¾ä»¥ç»´æŒå¯é çš„æ€§èƒ½ï¼Œè¿™é™åˆ¶äº†å…¶å®é™…åº”ç”¨çš„é²æ£’æ€§ã€‚ç°æœ‰çš„é²æ£’å¤šæ¨¡æ€å¤§è¯­è¨€æ¨¡å‹ä¸»è¦ä¾èµ–äºéšå¼è®­ç»ƒæˆ–é€‚åº”æ–¹æ³•ï¼Œè¿™äº›æ–¹æ³•ä»…ä¾§é‡äºæå‡è§†è§‰ç¼–ç å™¨çš„æ³›åŒ–èƒ½åŠ›ï¼Œå¯¼è‡´æ¨¡å‹å¯è§£é‡Šæ€§æœ‰é™ä¸”ä¼˜åŒ–è¿‡ç¨‹ç›¸å¯¹å­¤ç«‹ã€‚ä¸ºå…‹æœè¿™äº›å±€é™ï¼Œæˆ‘ä»¬æå‡ºäº† Robust-R1ï¼Œè¿™æ˜¯ä¸€ä¸ªé€šè¿‡ç»“æ„åŒ–æ¨ç†é“¾æ¥æ˜¾å¼å»ºæ¨¡è§†è§‰é€€åŒ–çš„æ–°å‹æ¡†æ¶ã€‚æˆ‘ä»¬çš„æ–¹æ³•æ•´åˆäº†ä¸‰ä¸ªæ ¸å¿ƒéƒ¨åˆ†ï¼š(i) ä¸ºå¥ å®šé€€åŒ–æ„ŸçŸ¥æ¨ç†åŸºç¡€è€Œè¿›è¡Œçš„ç›‘ç£å¾®è°ƒï¼Œ(ii) ä¸ºå®ç°ç²¾å‡†é€€åŒ–å‚æ•°æ„ŸçŸ¥çš„å¥–åŠ±é©±åŠ¨å¯¹é½ï¼Œä»¥åŠ (iii) èƒ½å¤Ÿé€‚åº”é€€åŒ–å¼ºåº¦çš„åŠ¨æ€æ¨ç†æ·±åº¦ç¼©æ”¾ã€‚ä¸ºæ”¯æŒæ­¤æ–¹æ³•ï¼Œæˆ‘ä»¬æ„å»ºäº†ä¸€ä¸ªåŒ…å« 1.1 ä¸‡ä¸ªæ ·æœ¬çš„ä¸“ç”¨æ•°æ®é›†ï¼Œå…¶ä¸­æ¶µç›–äº†åœ¨å››ä¸ªå…³é”®ç°å®è§†è§‰å¤„ç†é˜¶æ®µåˆæˆçš„çœŸå®é€€åŒ–ã€‚æ¯ä¸ªæ ·æœ¬å‡æ ‡æ³¨æœ‰ç»“æ„åŒ–æ¨ç†é“¾ï¼Œé“¾ä¸­è¿æ¥äº†é€€åŒ–å‚æ•°ã€æ„ŸçŸ¥å½±å“ã€åŸå§‹è¯­ä¹‰æ¨ç†é“¾åŠæœ€ç»ˆç»“è®ºã€‚å…¨é¢çš„è¯„ä¼°ç»“æœè¡¨æ˜ï¼ŒRobust-R1 å…·å¤‡æœ€å…ˆè¿›çš„é²æ£’æ€§ï¼šå®ƒåœ¨ç°å®ä¸–ç•Œé€€åŒ–åŸºå‡† R-Bench ä¸Šçš„è¡¨ç°ä¼˜äºæ‰€æœ‰é€šç”¨åŠé²æ£’åŸºçº¿æ¨¡å‹ï¼Œå¹¶ä¸”åœ¨ MMMBã€MMStar å’Œ RealWorldQA åŸºå‡†ä¸Šé¢ä¸´å¤šå¼ºåº¦å¯¹æŠ—æ€§é€€åŒ–æ—¶ï¼Œä¾ç„¶ä¿æŒäº†å“è¶Šçš„æŠ—é€€åŒ–æ€§èƒ½ã€‚</p>
<h2 data-id="heading-7">The Prism Hypothesis: Harmonizing Semantic and Pixel Representations via Unified Autoencoding</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fabs%2F2512.19693" target="_blank" title="https://arxiv.org/abs/2512.19693" ref="nofollow noopener noreferrer">æ£±é•œå‡è¯´ï¼šé€šè¿‡ç»Ÿä¸€è‡ªç¼–ç è°ƒå’Œè¯­ä¹‰ä¸åƒç´ è¡¨ç¤º</a></p>
<p>è·¨æ¨¡æ€çš„æ·±åº¦è¡¨ç¤ºæœ¬è´¨ä¸Šæ˜¯ç›¸äº’äº¤ç»‡çš„ã€‚æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬ç³»ç»Ÿåœ°åˆ†æäº†å¤šç§è¯­ä¹‰ä¸åƒç´ ç¼–ç å™¨çš„é¢‘è°±ç‰¹æ€§ã€‚æœ‰è¶£çš„æ˜¯ï¼Œæˆ‘ä»¬çš„ç ”ç©¶æ­ç¤ºäº†ä¸€ä¸ªæå…·å¯å‘æ€§ä¸”é²œæœ‰æ¢ç´¢çš„å¯¹åº”å…³ç³»ï¼šç¼–ç å™¨çš„ç‰¹å¾é¢‘è°±ä¸å…¶åŠŸèƒ½è§’è‰²å¯†åˆ‡ç›¸å…³â€”â€”è¯­ä¹‰ç¼–ç å™¨ä¸»è¦æ•è·ç¼–ç æŠ½è±¡å«ä¹‰çš„ä½é¢‘åˆ†é‡ï¼Œè€Œåƒç´ ç¼–ç å™¨åˆ™é¢å¤–ä¿ç•™äº†ä¼ è¾¾ç»†ç²’åº¦ç»†èŠ‚çš„é«˜é¢‘ä¿¡æ¯ã€‚è¿™ä¸€å‘ç°æä¾›äº†ä¸€ä¸ªç»Ÿä¸€çš„è§†è§’ï¼Œå°†ç¼–ç å™¨è¡Œä¸ºä¸å…¶åº•å±‚é¢‘è°±ç»“æ„å…³è”èµ·æ¥ã€‚æˆ‘ä»¬å°†å…¶å®šä¹‰ä¸ºæ£±é•œå‡è¯´ï¼Œå³æ¯ç§æ•°æ®æ¨¡æ€éƒ½å¯è¢«è§†ä¸ºè‡ªç„¶ä¸–ç•Œåœ¨å…±äº«ç‰¹å¾é¢‘è°±ä¸Šçš„æŠ•å½±ï¼Œå…¶ä½œç”¨ç±»ä¼¼äºæ£±é•œã€‚åŸºäºæ­¤è§è§£ï¼Œæˆ‘ä»¬æå‡ºäº†ç»Ÿä¸€è‡ªç¼–ç  (UAE)ï¼Œè¯¥æ¨¡å‹é€šè¿‡ä¸€ç§åˆ›æ–°çš„é¢‘å¸¦è°ƒåˆ¶å™¨æ¥è°ƒå’Œè¯­ä¹‰ç»“æ„ä¸åƒç´ ç»†èŠ‚ï¼Œä½¿äºŒè€…èƒ½å¤Ÿæ— ç¼å…±å­˜ã€‚åœ¨ ImageNet å’Œ MS-COCO åŸºå‡†ä¸Šè¿›è¡Œçš„å¤§é‡å®éªŒè¡¨æ˜ï¼Œæˆ‘ä»¬çš„ UAE èƒ½å¤Ÿæœ‰æ•ˆåœ°å°†è¯­ä¹‰æŠ½è±¡ä¸åƒç´ çº§ä¿çœŸåº¦ç»Ÿä¸€åˆ°å•ä¸€æ½œåœ¨ç©ºé—´ä¸­ï¼Œå¹¶å–å¾—äº†æœ€å…ˆè¿›çš„æ€§èƒ½ã€‚</p>
<h2 data-id="heading-8">Bottom-up Policy Optimization: Your Language Model Policy Secretly Contains Internal Policies</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fabs%2F2512.19673" target="_blank" title="https://arxiv.org/abs/2512.19673" ref="nofollow noopener noreferrer">è‡ªåº•å‘ä¸Šç­–ç•¥ä¼˜åŒ–ï¼šè¯­è¨€æ¨¡å‹ç­–ç•¥éšå«å†…éƒ¨ç­–ç•¥</a></p>
<p>ç°æœ‰çš„å¼ºåŒ–å­¦ä¹  (RL) æ–¹æ³•å°†å¤§è¯­è¨€æ¨¡å‹ (LLMs) è§†ä¸ºå•ä¸€çš„ç»Ÿä¸€ç­–ç•¥ï¼Œå¿½ç•¥äº†å…¶å†…éƒ¨æœºåˆ¶ã€‚å› æ­¤ï¼Œç†è§£ç­–ç•¥åœ¨ä¸åŒå±‚å’Œæ¨¡å—é—´çš„æ¼”å˜è¿‡ç¨‹ï¼Œå¯¹äºå®ç°æ›´å…·é’ˆå¯¹æ€§çš„ä¼˜åŒ–ä»¥åŠæ­ç¤ºå¤æ‚çš„æ¨ç†æœºåˆ¶è‡³å…³é‡è¦ã€‚æœ¬æ–‡é€šè¿‡åˆ©ç”¨ Transformer æ®‹å·®æµçš„å›ºæœ‰åˆ’åˆ†ï¼Œä»¥åŠéšè—çŠ¶æ€ä¸è§£åµŒå…¥çŸ©é˜µçš„åˆæˆç»“æœä¸æœ€ç»ˆå¯é‡‡æ ·ç­–ç•¥ä¹‹é—´çš„ç­‰ä»·æ€§ï¼Œå¯¹è¯­è¨€æ¨¡å‹ç­–ç•¥è¿›è¡Œåˆ†è§£ã€‚è¿™ç§åˆ†è§£æ­ç¤ºäº†å†…éƒ¨å±‚ç­–ç•¥ (Internal Layer Policies)ï¼Œå…¶å¯¹åº”äºå„ç‹¬ç«‹å±‚çš„è´¡çŒ®ï¼›ä»¥åŠå†…éƒ¨æ¨¡å—ç­–ç•¥ (Internal Modular Policies)ï¼Œå…¶ä¸æ¯å±‚ä¸­çš„è‡ªæ³¨æ„åŠ›æœºåˆ¶å’Œå‰é¦ˆç½‘ç»œ (FFN) ç»„ä»¶ç›¸å…³è”ã€‚é€šè¿‡åˆ†æå†…éƒ¨ç­–ç•¥çš„ç†µï¼Œæˆ‘ä»¬å‘ç°ï¼š(a) æ—©æœŸå±‚ä¿æŒé«˜ç†µä»¥æ”¯æŒæ¢ç´¢ï¼Œé¡¶å±‚åˆ™æ”¶æ•›è‡³æ¥è¿‘é›¶çš„ç†µä»¥å®ç°ç²¾ç»†åŒ–ï¼Œä¸”æ”¶æ•›æ¨¡å¼å› æ¨¡å‹ç³»åˆ—ä¸åŒè€Œæœ‰æ‰€å·®å¼‚ã€‚(b) Llama çš„é¢„æµ‹ç©ºé—´åœ¨æœ€åä¸€å±‚è¿…é€Ÿæ”¶æ•›ï¼Œè€Œ Qwen ç³»åˆ—æ¨¡å‹ï¼Œå°¤å…¶æ˜¯ Qwen3ï¼Œåˆ™å±•ç°å‡ºä¸€ç§æ›´æ¥è¿‘äººç±»ã€æ¸è¿›ç»“æ„åŒ–çš„æ¨ç†æ¨¡å¼ã€‚å—è¿™äº›å‘ç°å¯å‘ï¼Œæˆ‘ä»¬æå‡ºäº†è‡ªåº•å‘ä¸Šç­–ç•¥ä¼˜åŒ– (Bottom-up Policy Optimization, BuPO)ï¼Œè¿™æ˜¯ä¸€ç§æ–°é¢–çš„ RL èŒƒå¼ï¼Œå¯åœ¨è®­ç»ƒæ—©æœŸç›´æ¥ä¼˜åŒ–å†…éƒ¨å±‚ç­–ç•¥ã€‚é€šè¿‡åœ¨åº•å±‚å¯¹é½è®­ç»ƒç›®æ ‡ï¼ŒBuPO é‡æ„äº†åŸºç¡€æ¨ç†èƒ½åŠ›ï¼Œå¹¶å–å¾—äº†å“è¶Šçš„æ€§èƒ½ã€‚åœ¨å¤æ‚æ¨ç†åŸºå‡†ä¸Šè¿›è¡Œçš„å¤§é‡å®éªŒè¯æ˜äº†æˆ‘ä»¬æ–¹æ³•çš„æœ‰æ•ˆæ€§ã€‚æˆ‘ä»¬çš„ä»£ç å¯åœ¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FTrae1ounG%2FBuPO" target="_blank" title="https://github.com/Trae1ounG/BuPO" ref="nofollow noopener noreferrer">github.com/Trae1ounG/Bâ€¦</a> è·å–ã€‚</p>
<h2 data-id="heading-9">When Reasoning Meets Its Laws</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fabs%2F2512.17901" target="_blank" title="https://arxiv.org/abs/2512.17901" ref="nofollow noopener noreferrer">å½“æ¨ç†é‡è§å…¶å®šå¾‹</a></p>
<p>å°½ç®¡å¤§æ¨ç†æ¨¡å‹ (Large Reasoning Models, LRMs) æ€§èƒ½å“è¶Šï¼Œä½†å…¶æ¨ç†è¡Œä¸ºå¸¸å¸¸æœ‰è¿ç›´è§‰ï¼Œå¯¼è‡´æ¨ç†èƒ½åŠ›æœªèƒ½è¾¾åˆ°æœ€ä¼˜ã€‚ä¸ºäº†ä»ç†è®ºå±‚é¢å½¢å¼åŒ–æ‰€æœŸæœ›çš„æ¨ç†è¡Œä¸ºï¼Œæœ¬æ–‡æå‡ºäº†æ¨ç†å®šå¾‹ (Laws of Reasoning, LoRe) è¿™ä¸€ç»Ÿä¸€æ¡†æ¶ï¼Œç”¨ä»¥åˆ»ç”»å¤§æ¨ç†æ¨¡å‹å†…åœ¨çš„æ¨ç†æ¨¡å¼ã€‚æˆ‘ä»¬é¦–å…ˆæå‡ºäº†è®¡ç®—å®šå¾‹ï¼Œå…¶æ ¸å¿ƒå‡è®¾æ˜¯æ¨ç†è®¡ç®—é‡åº”ä¸é—®é¢˜å¤æ‚åº¦å‘ˆçº¿æ€§å…³ç³»ã€‚é™¤äº†è®¡ç®—é‡ï¼Œæˆ‘ä»¬è¿˜é€šè¿‡è¡¥å……çš„å‡†ç¡®ç‡å®šå¾‹å¯¹æ¨ç†å®šå¾‹è¿›è¡Œäº†æ‰©å±•ã€‚ç”±äºé—®é¢˜å¤æ‚åº¦åœ¨å®è·µä¸­éš¾ä»¥é‡åŒ–ï¼Œæˆ‘ä»¬å€ŸåŠ©è¯¥å®šå¾‹çš„ä¸¤ä¸ªå¯æ£€éªŒå±æ€§â€”â€”å•è°ƒæ€§ä¸ç»„åˆæ€§â€”â€”æ¥éªŒè¯è¿™äº›å‡è®¾ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬å¼•å…¥äº† LoRe-Bench åŸºå‡†æµ‹è¯•ï¼Œç”¨äºç³»ç»Ÿæ€§åœ°è¯„ä¼°å¤§æ¨ç†æ¨¡å‹çš„è¿™ä¸¤ä¸ªå¯å¤„ç†å±æ€§ã€‚è¯„ä¼°ç»“æœè¡¨æ˜ï¼Œå¤§å¤šæ•°æ¨ç†æ¨¡å‹å…·å¤‡åˆç†çš„å•è°ƒæ€§ï¼Œä½†ç¼ºä¹ç»„åˆæ€§ã€‚é’ˆå¯¹æ­¤é—®é¢˜ï¼Œæˆ‘ä»¬å¼€å‘äº†ä¸€ç§æœ‰æ•ˆçš„å¾®è°ƒæ–¹æ³•ï¼Œä»¥å¼ºåˆ¶æ¨¡å‹æ»¡è¶³è®¡ç®—å®šå¾‹çš„ç»„åˆæ€§è¦æ±‚ã€‚å¤§é‡çš„å®è¯ç ”ç©¶è¡¨æ˜ï¼Œæ›´å¥½åœ°éµå¾ªè®¡ç®—å®šå¾‹èƒ½å¤Ÿåœ¨å¤šä¸ªåŸºå‡†æµ‹è¯•ä¸ŠæŒç»­æå‡æ¨¡å‹çš„æ¨ç†æ€§èƒ½ï¼Œå¹¶æ­ç¤ºå‡ºä¸åŒå±æ€§ä¸å®šå¾‹ä¹‹é—´çš„ååŒæ•ˆåº”ã€‚é¡¹ç›®é¡µé¢ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Flore-project.github.io%2F" target="_blank" title="https://lore-project.github.io/" ref="nofollow noopener noreferrer">lore-project.github.io/</a></p>
<h2 data-id="heading-10">Latent Implicit Visual Reasoning</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fabs%2F2512.21218" target="_blank" title="https://arxiv.org/abs/2512.21218" ref="nofollow noopener noreferrer">æ½œåœ¨éšå¼è§†è§‰æ¨ç†</a></p>
<p>å°½ç®¡å¤§å‹å¤šæ¨¡æ€æ¨¡å‹ï¼ˆLMMsï¼‰å·²å–å¾—æ˜¾è‘—è¿›å±•ï¼Œä½†å…¶æœ¬è´¨ä¸Šä»ä»¥æ–‡æœ¬ä¸ºä¸­å¿ƒï¼Œå°†è¯­è¨€ä½œä¸ºæ ¸å¿ƒæ¨ç†æ¨¡æ€ã€‚å› æ­¤ï¼Œå®ƒä»¬åœ¨å¤„ç†ä»¥è§†è§‰ä¸ºä¸»çš„æ¨ç†ä»»åŠ¡æ—¶èƒ½åŠ›æœ‰é™ã€‚è¿‘æœŸçš„ä¸€äº›æ–¹æ³•å°è¯•é€šè¿‡åˆ©ç”¨è¾…åŠ©å›¾åƒã€æ·±åº¦å›¾æˆ–å›¾åƒè£å‰ªæ¥ç›‘ç£ä¸­é—´è§†è§‰æ­¥éª¤ï¼Œä»¥è§£å†³æ­¤é—®é¢˜ã€‚ç„¶è€Œï¼Œè¿™äº›ç­–ç•¥ä¸ºâ€œæœ‰ç”¨â€çš„è§†è§‰æŠ½è±¡å½¢æ€è®¾å®šäº†é™åˆ¶æ€§å…ˆéªŒï¼Œå¸¦æ¥äº†é«˜æ˜‚çš„æ ‡æ³¨æˆæœ¬ï¼Œä¸”è·¨ä»»åŠ¡æ³›åŒ–èƒ½åŠ›è¾ƒå·®ã€‚ä¸ºå…‹æœè¿™ä¸€å…³é”®å±€é™ï¼Œæˆ‘ä»¬æå‡ºäº†ä¸€ç§ä»»åŠ¡æ— å…³çš„æœºåˆ¶ï¼Œå®ƒèƒ½è®­ç»ƒ LMMs è‡ªä¸»å‘ç°å¹¶åˆ©ç”¨è§†è§‰æ¨ç†æ ‡è®°ï¼Œè€Œæ— éœ€ä»»ä½•æ˜¾å¼ç›‘ç£ã€‚è¿™äº›æ ‡è®°å…·æœ‰å…¨å±€æ³¨æ„åŠ›ï¼Œå¹¶èƒ½ä»¥ä»»åŠ¡è‡ªé€‚åº”çš„æ–¹å¼å¯¹å›¾åƒè¿›è¡Œé‡æ–°ç¼–ç ï¼Œä»è€Œä½¿æ¨¡å‹èƒ½å¤Ÿæå–ç›¸å…³çš„è§†è§‰ä¿¡æ¯ï¼Œæ— éœ€ä¾èµ–äººå·¥è®¾è®¡çš„ç›‘ç£ä¿¡å·ã€‚æˆ‘ä»¬çš„æ–¹æ³•æ€§èƒ½ä¼˜äºç›´æ¥å¾®è°ƒï¼Œåœ¨å¤šç§è§†è§‰ä¸­å¿ƒä»»åŠ¡ä¸Šâ€”â€”åŒ…æ‹¬é‚£äº›ä¸­é—´æŠ½è±¡éš¾ä»¥æ˜ç¡®å®šä¹‰çš„ä»»åŠ¡â€”â€”å‡å–å¾—äº†æœ€å…ˆè¿›çš„æˆæœï¼ŒåŒæ—¶ä¹Ÿèƒ½å¾ˆå¥½åœ°æ³›åŒ–è‡³å¤šä»»åŠ¡æŒ‡ä»¤å¾®è°ƒåœºæ™¯ã€‚</p>
<h2 data-id="heading-11">LongVideoAgent: åŸºäºå¤šæ™ºèƒ½ä½“çš„é•¿è§†é¢‘æ¨ç†</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fabs%2F2512.20618" target="_blank" title="https://arxiv.org/abs/2512.20618" ref="nofollow noopener noreferrer">LongVideoAgent: åŸºäºå¤šæ™ºèƒ½ä½“çš„é•¿è§†é¢‘æ¨ç†</a></p>
<p>å¤šæ¨¡æ€å¤§è¯­è¨€æ¨¡å‹ä»¥åŠåˆ©ç”¨å·¥å…·è¿›è¡Œé•¿è§†é¢‘é—®ç­”çš„ç³»ç»Ÿæ‰€å–å¾—çš„è¿›å±•ï¼Œå±•ç°äº†å¤„ç†é•¿è¾¾æ•°å°æ—¶è§†é¢‘å†…å®¹å¹¶è¿›è¡Œæ¨ç†çš„æ½œåŠ›ã€‚ç„¶è€Œï¼Œç°æœ‰æ–¹æ³•å¤§å¤šä»å°†è§†é¢‘å†…å®¹å‹ç¼©ä¸ºæœ‰æŸæ‘˜è¦ï¼Œæˆ–ä¾èµ–äºåŠŸèƒ½æœ‰é™çš„å·¥å…·é›†ï¼Œè¿™å¯¼è‡´æ—¶é—´å®šä½èƒ½åŠ›è¢«å‰Šå¼±ï¼Œä¸”å®¹æ˜“é—æ¼ç»†ç²’åº¦çº¿ç´¢ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬æå‡ºä¸€ä¸ªå¤šæ™ºèƒ½ä½“æ¡†æ¶ï¼šä¸€ä¸ªä¸»æ§å¤§è¯­è¨€æ¨¡å‹è´Ÿè´£åè°ƒä¸€ä¸ªå®šä½æ™ºèƒ½ä½“æ¥é”å®šä¸é—®é¢˜ç›¸å…³çš„è§†é¢‘ç‰‡æ®µï¼Œä»¥åŠä¸€ä¸ªè§†è§‰æ™ºèƒ½ä½“æ¥æå–æœ‰é’ˆå¯¹æ€§çš„æ–‡æœ¬åŒ–è§†è§‰è§‚å¯Ÿã€‚ä¸»æ§æ™ºèƒ½ä½“åœ¨é¢„è®¾çš„æ­¥éª¤é™åˆ¶å†…è¿›è¡Œè§„åˆ’ï¼Œå¹¶é€šè¿‡å¼ºåŒ–å­¦ä¹ è¿›è¡Œè®­ç»ƒï¼Œæ—¨åœ¨å®ç°ç®€æ´ã€å‡†ç¡®ä¸”é«˜æ•ˆçš„å¤šæ™ºèƒ½ä½“åä½œã€‚è¯¥è®¾è®¡é€šè¿‡å®šä½æœºåˆ¶ä½¿ä¸»æ§æ™ºèƒ½ä½“èƒ½ä¸“æ³¨äºç›¸å…³ç‰‡æ®µï¼Œåˆ©ç”¨è§†è§‰ç»†èŠ‚è¡¥å……å­—å¹•ä¿¡æ¯ï¼Œå¹¶ç”Ÿæˆå¯è§£é‡Šçš„æ¨ç†è½¨è¿¹ã€‚åœ¨æˆ‘ä»¬æ–°æå‡ºçš„ LongTVQA å’Œ LongTVQA+ æ•°æ®é›†ï¼ˆè¿™ä¸¤ä¸ªå‰§é›†çº§æ•°æ®é›†ç”± TVQA/TVQA+ èšåˆè€Œæˆï¼‰ä¸Šï¼Œæˆ‘ä»¬çš„å¤šæ™ºèƒ½ä½“ç³»ç»Ÿæ€§èƒ½æ˜¾è‘—ä¼˜äºå¤šä¸ªå¼ºå¤§çš„éæ™ºèƒ½ä½“åŸºçº¿æ¨¡å‹ã€‚å®éªŒè¿˜è¡¨æ˜ï¼Œå¼ºåŒ–å­¦ä¹ èƒ½è¿›ä¸€æ­¥å¼ºåŒ–å·²è®­ç»ƒæ™ºèƒ½ä½“çš„æ¨ç†ä¸è§„åˆ’èƒ½åŠ›ã€‚ä»£ç ä¸æ•°æ®å°†åœ¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Flongvideoagent.github.io%2F" target="_blank" title="https://longvideoagent.github.io/" ref="nofollow noopener noreferrer">longvideoagent.github.io/</a> å‘å¸ƒã€‚</p>
<h2 data-id="heading-12">Region-Constraint In-Context Generation for Instructional Video Editing</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fabs%2F2512.17650" target="_blank" title="https://arxiv.org/abs/2512.17650" ref="nofollow noopener noreferrer">é¢å‘æ•™å­¦è§†é¢‘ç¼–è¾‘çš„åŒºåŸŸçº¦æŸä¸Šä¸‹æ–‡ç”Ÿæˆ</a></p>
<p>ä¸Šä¸‹æ–‡ç”Ÿæˆ (In-context generation) èŒƒå¼è¿‘æœŸåœ¨æ•™å­¦å›¾åƒç¼–è¾‘é¢†åŸŸå±•ç°å‡ºå¼ºå¤§èƒ½åŠ›ï¼Œå…¼å…·æ•°æ®é«˜æ•ˆæ€§ä¸åˆæˆé«˜è´¨é‡çš„ç‰¹ç‚¹ã€‚ç„¶è€Œï¼Œå°†è¿™ç§ä¸Šä¸‹æ–‡å­¦ä¹ åº”ç”¨äºåŸºäºæŒ‡ä»¤çš„è§†é¢‘ç¼–è¾‘å¹¶éæ˜“äº‹ã€‚è‹¥ä¸æŒ‡å®šç¼–è¾‘åŒºåŸŸï¼Œç»“æœå¯èƒ½å‡ºç°ç¼–è¾‘åŒºåŸŸä¸å‡†ç¡®ï¼Œä»¥åŠåœ¨å»å™ªè¿‡ç¨‹ä¸­ç¼–è¾‘åŒºåŸŸä¸éç¼–è¾‘åŒºåŸŸä¹‹é—´å‘ç”Ÿ Token å¹²æ‰°çš„é—®é¢˜ã€‚ä¸ºè§£å†³è¿™äº›é—®é¢˜ï¼Œæˆ‘ä»¬æå‡ºäº† ReCoï¼Œä¸€ç§æ–°çš„æ•™å­¦è§†é¢‘ç¼–è¾‘èŒƒå¼ï¼Œå…¶åˆ›æ–°ä¹‹å¤„åœ¨äºæ·±å…¥æ¢ç©¶äº†ä¸Šä¸‹æ–‡ç”Ÿæˆè¿‡ç¨‹ä¸­ç¼–è¾‘åŒºåŸŸä¸éç¼–è¾‘åŒºåŸŸä¹‹é—´çš„çº¦æŸå»ºæ¨¡ã€‚æŠ€æœ¯ä¸Šï¼ŒReCo å°†æºè§†é¢‘ä¸ç›®æ ‡è§†é¢‘æ²¿ç©ºé—´ï¼ˆå®½åº¦ï¼‰ç»´åº¦æ‹¼æ¥ï¼Œè¿›è¡Œè”åˆå»å™ªã€‚ä¸ºæ ¡å‡†è§†é¢‘æ‰©æ•£å­¦ä¹ ï¼ŒReCo åˆ©ç”¨äº†ä¸¤é¡¹æ­£åˆ™åŒ–é¡¹ï¼šæ½œåœ¨æ­£åˆ™åŒ–ä¸æ³¨æ„åŠ›æ­£åˆ™åŒ–ï¼Œå®ƒä»¬åˆ†åˆ«ä½œç”¨äºå•æ­¥åå‘æ‰©æ•£å»å™ªåçš„æ½œåœ¨è¡¨ç¤º (latents) å’Œæ³¨æ„åŠ›å›¾ (attention maps)ã€‚æ½œåœ¨æ­£åˆ™åŒ–æ—¨åœ¨å¢å¤§æºè§†é¢‘ä¸ç›®æ ‡è§†é¢‘ä¹‹é—´ç¼–è¾‘åŒºåŸŸçš„æ½œåœ¨å·®å¼‚ï¼ŒåŒæ—¶å‡å°éç¼–è¾‘åŒºåŸŸçš„å·®å¼‚ï¼Œä»è€Œå¼ºåŒ–å¯¹ç¼–è¾‘åŒºåŸŸçš„ä¿®æ”¹ï¼Œå¹¶æŠ‘åˆ¶éç¼–è¾‘åŒºåŸŸæ„å¤–å†…å®¹çš„ç”Ÿæˆã€‚æ³¨æ„åŠ›æ­£åˆ™åŒ–åˆ™æŠ‘åˆ¶ç›®æ ‡è§†é¢‘ç¼–è¾‘åŒºåŸŸä¸­çš„ Token å¯¹æºè§†é¢‘å¯¹åº”åŒºåŸŸ Token çš„æ³¨æ„åŠ›ï¼Œä»¥æ­¤å‡è½»ç›®æ ‡è§†é¢‘ç”Ÿæˆæ–°å¯¹è±¡æ—¶æ¥è‡ªæºè§†é¢‘å¯¹åº” Token çš„å¹²æ‰°ã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬æå‡ºäº†ä¸€ä¸ªå¤§è§„æ¨¡é«˜è´¨é‡çš„è§†é¢‘ç¼–è¾‘æ•°æ®é›† ReCo-Dataï¼ŒåŒ…å« 50 ä¸‡å¯¹æŒ‡ä»¤-è§†é¢‘æ ·æœ¬ï¼Œä»¥æ”¯æŒæ¨¡å‹è®­ç»ƒã€‚åœ¨å››é¡¹ä¸»æµåŸºäºæŒ‡ä»¤çš„è§†é¢‘ç¼–è¾‘ä»»åŠ¡ä¸Šè¿›è¡Œçš„å¤§é‡å®éªŒï¼ŒéªŒè¯äº†æˆ‘ä»¬æ‰€ææ–¹æ¡ˆçš„ä¼˜è¶Šæ€§ã€‚</p>
<h2 data-id="heading-13">Seed-Prover 1.5: Mastering Undergraduate-Level Theorem Proving via Learning from Experience</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fabs%2F2512.17260" target="_blank" title="https://arxiv.org/abs/2512.17260" ref="nofollow noopener noreferrer">Seed-Prover 1.5ï¼šé€šè¿‡ç»éªŒå­¦ä¹ ç²¾é€šæœ¬ç§‘çº§å®šç†è¯æ˜</a></p>
<p>è¿‘æœŸï¼Œå¤§è¯­è¨€æ¨¡å‹ (LLM) åœ¨ç”Ÿæˆä¸¥è°¨æ•°å­¦è¯æ˜æ–¹é¢å–å¾—äº†é‡å¤§è¿›å±•ã€‚ç„¶è€Œï¼Œåˆ©ç”¨å¤§è¯­è¨€æ¨¡å‹åœ¨å½¢å¼åŒ–è¯­è¨€ (å¦‚ Lean) ä¸­è¿›è¡Œå®šç†è¯æ˜ä»ç„¶é¢ä¸´æŒ‘æˆ˜ä¸”è®¡ç®—å¼€é”€å·¨å¤§ï¼Œå°¤å…¶æ˜¯åœ¨å¤„ç†æœ¬ç§‘åŠä»¥ä¸Šéš¾åº¦çš„é—®é¢˜æ—¶ã€‚æœ¬æ–‡æå‡ºäº† <strong>Seed-Prover 1.5</strong>ï¼Œè¿™æ˜¯ä¸€ä¸ªé€šè¿‡å¤§è§„æ¨¡æ™ºèƒ½ä½“å¼ºåŒ–å­¦ä¹ è®­ç»ƒçš„å½¢å¼åŒ–å®šç†è¯æ˜æ¨¡å‹ï¼Œå¹¶é…å¥—ä¸€ä¸ªé«˜æ•ˆçš„æµ‹è¯•æ—¶æ‰©å±•å·¥ä½œæµã€‚è¯¥æ¨¡å‹åœ¨å¼ºåŒ–å­¦ä¹ è¿‡ç¨‹ä¸­ï¼Œé€šè¿‡ä¸ Lean ç­‰å·¥å…·è¿›è¡Œå¹¿æ³›äº¤äº’ï¼ŒæŒç»­ç§¯ç´¯ç»éªŒï¼Œä»è€Œæ˜¾è‘—æå‡äº†å½¢å¼åŒ–å®šç†è¯æ˜çš„èƒ½åŠ›ä¸æ•ˆç‡ã€‚æ­¤å¤–ï¼Œç»“åˆè‡ªç„¶è¯­è¨€è¯æ˜é¢†åŸŸçš„æœ€æ–°è¿›å±•ï¼Œæˆ‘ä»¬çš„æµ‹è¯•æ—¶æ‰©å±•å·¥ä½œæµæœ‰æ•ˆå¼¥åˆäº†è‡ªç„¶è¯­è¨€ä¸å½¢å¼åŒ–è¯­è¨€ä¹‹é—´çš„é¸¿æ²Ÿã€‚ä¸ç°æœ‰æœ€å…ˆè¿›æ–¹æ³•ç›¸æ¯”ï¼ŒSeed-Prover 1.5 åœ¨æ›´å°çš„è®¡ç®—é¢„ç®—ä¸‹å®ç°äº†æ›´ä¼˜çš„æ€§èƒ½ï¼šå®ƒè§£å†³äº† <strong>88% çš„ PutnamBench</strong> (æœ¬ç§‘çº§)ã€<strong>80% çš„ Fate-H</strong> (ç ”ç©¶ç”Ÿçº§) ä»¥åŠ <strong>33% çš„ Fate-X</strong> (åšå£«çº§) é—®é¢˜ã€‚å°¤ä¸ºçªå‡ºçš„æ˜¯ï¼Œåˆ©ç”¨æœ¬ç³»ç»Ÿï¼Œæˆ‘ä»¬åœ¨ 9 å°æ—¶å†…è§£å†³äº† <strong>2025 å¹´æ™®ç‰¹å—æ•°å­¦ç«èµ› 12 é“é¢˜ç›®ä¸­çš„ 11 é“</strong>ã€‚æˆ‘ä»¬çš„ç ”ç©¶è¡¨æ˜ï¼Œç”±é«˜è´¨é‡å½¢å¼åŒ–åé¦ˆé©±åŠ¨çš„ç»éªŒå­¦ä¹ è§„æ¨¡åŒ–æ‰©å±•ï¼Œåœ¨å½¢å¼åŒ–æ•°å­¦æ¨ç†é¢†åŸŸæ‹¥æœ‰å·¨å¤§çš„å‘å±•æ½œåŠ›ã€‚</p>
<h2 data-id="heading-14">Learning to Reason in 4D: Dynamic Spatial Understanding for Vision Language Models</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fabs%2F2512.20557" target="_blank" title="https://arxiv.org/abs/2512.20557" ref="nofollow noopener noreferrer">å­¦ä¹ è¿›è¡Œ 4D æ¨ç†ï¼šè§†è§‰è¯­è¨€æ¨¡å‹çš„åŠ¨æ€ç©ºé—´ç†è§£</a></p>
<p>è§†è§‰è¯­è¨€æ¨¡å‹ (VLM) åœ¨é€šç”¨ç†è§£ä»»åŠ¡ä¸Šè¡¨ç°å‡ºè‰²ï¼Œä½†åœ¨åŠ¨æ€ç©ºé—´æ¨ç† (DSR) æ–¹é¢ä»æ˜¾è–„å¼±ã€‚DSR æŒ‡çš„æ˜¯å¯¹ç‰©ä½“å‡ ä½•å½¢çŠ¶åŠå…¶åœ¨ä¸‰ç»´ç©ºé—´ä¸­éšæ—¶é—´æ¼”å˜çš„å…³ç³»è¿›è¡Œæ¨ç†ã€‚è¿™ç§è–„å¼±ä¸»è¦å½’å› äºå¯æ‰©å±•çš„ 4D æ„ŸçŸ¥è®­ç»ƒèµ„æºåŒ®ä¹ã€‚ä¸ºå¼¥åˆåœ¨æ•°æ®é›†ã€åŸºå‡†å’Œæ¨¡å‹æ–¹é¢çš„è¿™ä¸€å·®è·ï¼Œæˆ‘ä»¬æ¨å‡ºäº† DSR å¥—ä»¶ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬æå‡ºä¸€ç§è‡ªåŠ¨åŒ–æµæ°´çº¿ï¼Œèƒ½å¤Ÿä»çœŸå®åœºæ™¯è§†é¢‘ä¸­ä¸º DSR ä»»åŠ¡ç”Ÿæˆå¤šé¡¹é€‰æ‹©é¢˜å¯¹ã€‚è¯¥æµæ°´çº¿åˆ©ç”¨ç°ä»£è§†è§‰åŸºç¡€æ¨¡å‹ï¼Œæå–ä¸°å¯Œçš„å‡ ä½•ä¸è¿åŠ¨ä¿¡æ¯ï¼ŒåŒ…æ‹¬ç›¸æœºä½å§¿ã€å±€éƒ¨ç‚¹äº‘ã€ç‰©ä½“æ©è†œã€æœå‘ä»¥åŠä¸‰ç»´è½¨è¿¹ã€‚è¿™äº›å‡ ä½•çº¿ç´¢å¯ç”¨äºæ„å»ºç”¨äºæ¨¡å‹è®­ç»ƒçš„ DSR-Train æ•°æ®é›†ï¼Œä»¥åŠç»è¿‡äººå·¥è¿›ä¸€æ­¥ç²¾ç‚¼ã€ç”¨äºè¯„ä¼°çš„ DSR-Bench åŸºå‡†ã€‚ä¸å…ˆå‰ç ”ç©¶ç›¸æ¯”ï¼Œæˆ‘ä»¬çš„æ•°æ®å¼ºè°ƒä»¥ä¸‹ç‰¹æ€§ï¼š(i) æºè‡ªçœŸå®åœºæ™¯è§†é¢‘ï¼Œ(ii) å…·å¤‡ç‰©ä½“çº§å’Œåœºæ™¯çº§çš„ä¸‰ç»´ä¿¡æ¯è¦æ±‚ï¼Œ(iii) åŒ…å«è§†ç‚¹å˜æ¢ï¼Œ(iv) æ¶‰åŠå¤šç‰©ä½“äº¤äº’ï¼Œä»¥åŠ (v) æä¾›ç»†ç²’åº¦ã€åˆ†æ­¥éª¤çš„ç­”æ¡ˆã€‚é™¤äº†æ•°æ®è´¡çŒ®ï¼Œæˆ‘ä»¬è¿˜æå‡ºä¸€ä¸ªè½»é‡çº§çš„å‡ ä½•é€‰æ‹©æ¨¡å— (GSM)ï¼Œç”¨äºå°†å‡ ä½•å…ˆéªŒæ— ç¼é›†æˆåˆ° VLM ä¸­ã€‚è¯¥æ¨¡å—èƒ½å‹ç¼©é—®é¢˜è¯­ä¹‰ï¼Œå¹¶ä»é¢„è®­ç»ƒçš„ 4D é‡å»ºå…ˆéªŒä¸­æå–ä¸é—®é¢˜ç›¸å…³çš„çŸ¥è¯†ï¼Œå°†å…¶ç¼–ç ä¸ºä¸€ç»„ç´§å‡‘çš„å‡ ä½• tokenã€‚è¿™ç§æœ‰é’ˆå¯¹æ€§çš„çŸ¥è¯†æå–é¿å…äº†æ— å…³çŸ¥è¯†å¯¹æ¨¡å‹çš„å¹²æ‰°ã€‚å®éªŒè¡¨æ˜ï¼Œå°† DSR-Train å’Œ GSM é›†æˆåˆ° Qwen2.5-VL-7B æ¨¡å‹ä¸­ï¼Œèƒ½æ˜¾è‘—æå‡å…¶åŠ¨æ€ç©ºé—´æ¨ç†èƒ½åŠ›ï¼ŒåŒæ—¶ä¿æŒäº†åœ¨é€šç”¨è§†é¢‘ç†è§£åŸºå‡†ä¸Šçš„å‡†ç¡®ç‡ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åƒä¸‡çº§è®¢å•è¡¨æ–°å¢å­—æ®µåº”è¯¥å¦‚ä½•åšï¼Ÿæ“ä½œå°ç»“]]></title>    <link>https://juejin.cn/post/7588093282531311668</link>    <guid>https://juejin.cn/post/7588093282531311668</guid>    <pubDate>2025-12-28T08:40:02.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588093282531311668" data-draft-id="7588124225702445096" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åƒä¸‡çº§è®¢å•è¡¨æ–°å¢å­—æ®µåº”è¯¥å¦‚ä½•åšï¼Ÿæ“ä½œå°ç»“"/> <meta itemprop="keywords" content="MySQL"/> <meta itemprop="datePublished" content="2025-12-28T08:40:02.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å“ˆé‡Œè°¢é¡¿"/> <meta itemprop="url" content="https://juejin.cn/user/3678304397695056"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åƒä¸‡çº§è®¢å•è¡¨æ–°å¢å­—æ®µåº”è¯¥å¦‚ä½•åšï¼Ÿæ“ä½œå°ç»“
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3678304397695056/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å“ˆé‡Œè°¢é¡¿
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-28T08:40:02.000Z" title="Sun Dec 28 2025 08:40:02 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-28
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨æ˜é‡‘çœ‹åˆ°ä¸€ç¯‡æ–‡ç« ï¼Œè®²çš„æ˜¯åƒä¸‡çº§è®¢å•è¡¨å¦‚ä½•æ–°å¢å­—æ®µï¼Œé‡Œé¢ä»‹ç»äº†ä¸€äº›æ–¹æ³•ï¼Œæˆ‘æ­£å¥½å­¦ä¹ äº†ä¸€ä¸‹ï¼ŒåŒæ—¶ç»“åˆaiçš„å›ç­”ï¼Œæ•´ç†æˆä¸€ç¯‡åšå®¢ï¼Œè®°å½•ä¸€ä¸‹æ“ä½œæŒ‡å—ã€‚</p>
<p>é’ˆå¯¹åƒä¸‡çº§è®¢å•è¡¨æ–°å¢å­—æ®µï¼Œéœ€è¦ç»¼åˆè€ƒè™‘<strong>ä¸šåŠ¡è¿ç»­æ€§ã€é”è¡¨é£é™©ã€æ•°æ®ä¸€è‡´æ€§ã€å›æ»šæ–¹æ¡ˆ</strong>ç­‰å› ç´ ã€‚ä»¥ä¸‹æ˜¯åˆ†åœºæ™¯çš„è¯¦ç»†æ–¹æ¡ˆï¼š</p>
<hr/>
<h3 data-id="heading-0"><strong>1. ä½å³°æœŸ+çŸ­æ—¶é—´åœæœºï¼ˆæœ€ç¨³å¦¥ï¼‰</strong></h3>
<p><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šå¯æ¥å—åˆ†é’Ÿçº§åœæœºï¼ˆå¦‚å‡Œæ™¨ä½å³°æœŸï¼‰ã€‚<br/>
<strong>æ­¥éª¤</strong>ï¼š</p>
<ol>
<li><strong>å¤‡ä»½</strong>ï¼šæå‰å…¨é‡å¤‡ä»½ï¼ˆç‰©ç†å¤‡ä»½+Binlogï¼‰ã€‚</li>
<li><strong>åœæœº</strong>ï¼šæ–­å¼€åº”ç”¨è¿æ¥ï¼ˆå¦‚æ”¹åŸŸåã€åœæ­¢æœåŠ¡ï¼‰ã€‚</li>
<li><strong>DDLç›´æ¥æ‰§è¡Œ</strong>ï¼š
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> orders <span class="hljs-keyword">ADD</span> <span class="hljs-keyword">COLUMN</span> new_col <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">50</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span>, ALGORITHM<span class="hljs-operator">=</span>INPLACE, LOCK<span class="hljs-operator">=</span><span class="hljs-keyword">NONE</span>;
</code></pre>
<ul>
<li><strong>MySQL 5.6+</strong>ï¼šè‹¥æ»¡è¶³<code>INPLACE</code>æ¡ä»¶ï¼ˆå¦‚æ— å…¨æ–‡ç´¢å¼•ã€è§¦å‘å™¨ç­‰ï¼‰ï¼Œå¯<code>LOCK=NONE</code>é¿å…é”è¡¨ã€‚</li>
<li><strong>MySQL 8.0</strong>ï¼šæ”¯æŒ<code>INSTANT</code>ç®—æ³•ï¼ˆä»…ä¿®æ”¹å…ƒæ•°æ®ï¼Œç§’çº§å®Œæˆï¼‰ï¼Œä½†é™åˆ¶è¾ƒå¤šï¼ˆå¦‚ä¸èƒ½æ˜¯<code>NOT NULL</code>ã€ä¸èƒ½æœ‰é»˜è®¤å€¼ï¼‰ã€‚</li>
</ul>
</li>
<li><strong>éªŒè¯</strong>ï¼šæ£€æŸ¥è¡¨ç»“æ„ã€æ•°æ®ä¸€è‡´æ€§ï¼ˆå¦‚é‡‡æ ·å¯¹æ¯”ï¼‰ã€‚</li>
<li><strong>æ¢å¤æœåŠ¡</strong>ï¼šé€æ­¥æ”¾å¼€æµé‡ã€‚</li>
</ol>
<hr/>
<h3 data-id="heading-1"><strong>2. åœ¨çº¿DDLï¼ˆæ— åœæœºï¼Œä½†éœ€æƒè¡¡é£é™©ï¼‰</strong></h3>
<p><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šæ— æ³•åœæœºï¼Œä¸”è¡¨ä¸ºInnoDBã€MySQL 5.6+ã€‚<br/>
<strong>å…³é”®å‚æ•°</strong>ï¼š</p>
<ul>
<li><code>ALGORITHM=INPLACE</code>ï¼šé¿å…é‡å»ºè¡¨ï¼ˆéœ€æ»¡è¶³æ¡ä»¶ï¼Œå¦‚æ— è§¦å‘å™¨ã€å¤–é”®ç­‰ï¼‰ã€‚</li>
<li><code>LOCK=NONE</code>ï¼šå…è®¸å¹¶å‘è¯»å†™ï¼ˆè‹¥ä¸æ”¯æŒä¼šé™çº§ä¸º<code>SHARED</code>æˆ–<code>EXCLUSIVE</code>ï¼‰ã€‚</li>
<li><code>old_alter_table=OFF</code>ï¼šå¼ºåˆ¶ä½¿ç”¨æ–°ç®—æ³•ï¼ˆMySQL 5.6+é»˜è®¤ï¼‰ã€‚</li>
</ul>
<p><strong>é£é™©</strong>ï¼š</p>
<ul>
<li>å¤§è¡¨å¯èƒ½è§¦å‘<strong>IO/CPUé£™å‡</strong>ï¼ˆç›‘æ§<code>InnoDB_history_list_length</code>ã€ç£ç›˜IOï¼‰ã€‚</li>
<li><strong>é•¿æ—¶é—´é”ç­‰å¾…</strong>ï¼šè‹¥å­˜åœ¨é•¿äº‹åŠ¡ï¼ˆå¦‚<code>SHOW PROCESSLIST</code>ä¸­<code>Waiting for table metadata lock</code>ï¼‰ï¼Œéœ€å…ˆ kill é•¿äº‹åŠ¡ã€‚</li>
</ul>
<p><strong>ä¼˜åŒ–</strong>ï¼š</p>
<ul>
<li><strong>åˆ†æ‰¹æ“ä½œ</strong>ï¼šè‹¥éœ€<code>NOT NULL</code>+é»˜è®¤å€¼ï¼Œå¯åˆ†ä¸¤æ­¥ï¼š
<ol>
<li>å…ˆåŠ  nullable å­—æ®µï¼š
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> orders <span class="hljs-keyword">ADD</span> <span class="hljs-keyword">COLUMN</span> new_col <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">50</span>) <span class="hljs-keyword">NULL</span>, ALGORITHM<span class="hljs-operator">=</span>INPLACE, LOCK<span class="hljs-operator">=</span><span class="hljs-keyword">NONE</span>;
</code></pre>
</li>
<li>åç»­ç”¨<code>UPDATE</code>åˆ†æ‰¹å†™é»˜è®¤å€¼ï¼ˆå¦‚æŒ‰IDåŒºé—´åˆ†æ‰¹ï¼Œé¿å…ä¸€æ¬¡æ€§å…¨è¡¨æ›´æ–°ï¼‰ã€‚</li>
<li>æœ€åæ”¹<code>NOT NULL</code>ï¼ˆéœ€ç¡®ä¿æ— NULLå€¼ï¼‰ï¼š
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> orders MODIFY <span class="hljs-keyword">COLUMN</span> new_col <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">50</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>, ALGORITHM<span class="hljs-operator">=</span>INPLACE, LOCK<span class="hljs-operator">=</span><span class="hljs-keyword">NONE</span>;
</code></pre>
</li>
</ol>
</li>
</ul>
<hr/>
<h3 data-id="heading-2"><strong>3. å½±å­è¡¨åˆ‡æ¢ï¼ˆé›¶åœæœºï¼Œå¤æ‚åº¦é«˜ï¼‰</strong></h3>
<p><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šè¡¨æå¤§ï¼ˆå¦‚äº¿çº§ï¼‰ã€DDLä¸å¯æ¥å—ï¼Œæˆ–éœ€æ·»åŠ <strong>å¤æ‚çº¦æŸ</strong>ï¼ˆå¦‚å¤–é”®ã€å…¨æ–‡ç´¢å¼•ï¼‰ã€‚<br/>
<strong>æ­¥éª¤</strong>ï¼š</p>
<ol>
<li><strong>åˆ›å»ºå½±å­è¡¨</strong>ï¼š
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> orders_new <span class="hljs-keyword">LIKE</span> orders;
<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> orders_new <span class="hljs-keyword">ADD</span> <span class="hljs-keyword">COLUMN</span> new_col <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">50</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span>;
</code></pre>
</li>
<li><strong>åŒæ­¥æ•°æ®</strong>ï¼š
<ul>
<li><strong>å…¨é‡åŒæ­¥</strong>ï¼š<code>INSERT INTO orders_new SELECT * FROM orders</code>ï¼ˆéœ€åˆ†æ‰¹ï¼Œé¿å…é”è¡¨ï¼‰ã€‚</li>
<li><strong>å¢é‡åŒæ­¥</strong>ï¼šç”¨<code>Binlog</code>æˆ–<code>è§¦å‘å™¨</code>åŒæ­¥å¢é‡æ•°æ®ï¼ˆå¦‚Canalã€Maxwellï¼‰ã€‚</li>
</ul>
</li>
<li><strong>åˆ‡æ¢è¡¨å</strong>ï¼š
<pre><code class="hljs language-sql" lang="sql">RENAME <span class="hljs-keyword">TABLE</span> orders <span class="hljs-keyword">TO</span> orders_old, orders_new <span class="hljs-keyword">TO</span> orders;
</code></pre>
<ul>
<li><strong>åŸå­æ“ä½œ</strong>ï¼šMySQLä¼šæŒæœ‰å…¨å±€é”ï¼Œä½†æ—¶é—´æçŸ­ï¼ˆæ¯«ç§’çº§ï¼‰ã€‚</li>
</ul>
</li>
<li><strong>æ¸…ç†</strong>ï¼šéªŒè¯ååˆ é™¤æ—§è¡¨ï¼ˆå»¶è¿Ÿå‡ å¤©ï¼Œç¡®ä¿æ— å›æ»šéœ€æ±‚ï¼‰ã€‚</li>
</ol>
<hr/>
<h3 data-id="heading-3">**4. æ‹“å±•è¡¨ï¼ŒæŒ‰éœ€å…³è”æŸ¥è¯¢ **</h3>
<p>å¯ä»¥ä½¿ç”¨æ‹“å±•è¡¨çš„æ–¹æ¡ˆ</p>
<pre><code class="hljs language-diff" lang="diff">order_extend
<span class="hljs-deletion">- order_id</span>
<span class="hljs-deletion">- extra_field_x</span>
<span class="hljs-deletion">- extra_field_y</span>
</code></pre>
<p>åŸè¡¨ä¸åŠ¨ï¼Œæœ‰æ–°å­—æ®µæ—¶å†™å…¥åˆ°æ‹“å±•è¡¨é‡Œï¼Œä¸šåŠ¡æŸ¥è¯¢æ—¶åšjoinã€‚
éœ€è¦æŸ¥è¯¢éº»çƒ¦ç‚¹ï¼Œä½†ä¼˜ç‚¹æ˜¯ï¼š</p>
<ul>
<li>ä¸»è¡¨ç»“æœç¨³å®š</li>
<li>æ‹“å±•å­—æ®µå¯åŠ¨æ€ç®¡ç†</li>
<li>ä¸å½±å“ç°æœ‰ä¸šåŠ¡é€»è¾‘</li>
</ul>
<h3 data-id="heading-4">**5. é«˜çº§ç©æ³•ï¼šJSONæ‹“å±•å­—æ®µ **</h3>
<p>å®šä¹‰ä¸€ä¸ªextå­—æ®µï¼Œç±»å‹ä¸ºTEXTæˆ–JSONï¼Œæ‰€æœ‰æ–°å¢å­—æ®µéƒ½æ”¾åœ¨é‡Œé¢å»ï¼Œç”¨è§„åˆ™è§£æã€‚è¿™ä¸ªæ–¹æ³•æ˜¯ç›®å‰å·¥ä½œä¸­ï¼Œæˆ‘ä»¬å¸¸ç”¨çš„æ–¹æ³•</p>
<pre><code class="hljs language-arduino" lang="arduino">{
  <span class="hljs-string">""</span>topic<span class="hljs-string">": "</span><span class="hljs-string">",
  "</span>idkp<span class="hljs-string">": "</span><span class="hljs-string">"
}
</span></code></pre>
<p>è¿™æ ·ä¸€æ¥ï¼Œä»¥åæœ‰æ–°å­—æ®µå°±å¡è¿›å»ï¼Œä¸ç”¨å†ä¿®æ”¹è¡¨ç»“æ„ï¼Œéå¸¸çµæ´»ã€‚å«åšschema-less æ‹“å±•ç»“æ„ã€‚</p>
<h3 data-id="heading-5"><strong>6. å…¶ä»–å…³é”®ç»†èŠ‚</strong></h3>
<ul>
<li><strong>é»˜è®¤å€¼å¤„ç†</strong>ï¼š
<ul>
<li><strong>MySQL 5.6+</strong>ï¼š<code>ALGORITHM=INPLACE</code>ä¸æ”¯æŒ<code>NOT NULL</code>+é»˜è®¤å€¼ï¼ˆä¼šé‡å»ºè¡¨ï¼‰ï¼Œéœ€ç”¨å½±å­è¡¨æˆ–åˆ†æ‰¹æ›´æ–°ã€‚</li>
<li><strong>MySQL 8.0</strong>ï¼šæ”¯æŒ<code>INSTANT</code>ç®—æ³•åŠ <code>NOT NULL</code>+é»˜è®¤å€¼ï¼ˆä»…é™é<code>VARCHAR</code>å˜é•¿å­—æ®µï¼‰ã€‚</li>
</ul>
</li>
<li><strong>ç£ç›˜ç©ºé—´</strong>ï¼š
<ul>
<li><code>INPLACE</code>ç®—æ³•éœ€é¢å¤–<strong>æ’åºç¼“å†²åŒº</strong>ï¼ˆçº¦ç­‰äºè¡¨å¤§å°ï¼‰ï¼Œç¡®ä¿ç£ç›˜å‰©ä½™ç©ºé—´&gt;è¡¨å¤§å°Ã—2ã€‚</li>
</ul>
</li>
<li><strong>å›æ»šæ–¹æ¡ˆ</strong>ï¼š
<ul>
<li>æå‰éªŒè¯<code>DDL</code>æ˜¯å¦å¯é€†ï¼ˆå¦‚<code>DROP COLUMN</code>ä¼šç«‹å³é‡Šæ”¾ç©ºé—´ï¼Œæ— æ³•å›æ»šï¼‰ã€‚</li>
<li>ä¿ç•™å¤‡ä»½+Binlogï¼Œå¿…è¦æ—¶å¯åŸºäºæ—¶é—´ç‚¹æ¢å¤ã€‚</li>
</ul>
</li>
</ul>
<hr/>
<h3 data-id="heading-6"><strong>æ€»ç»“é€‰æ‹©</strong></h3>







































<table><thead><tr><th>åœºæ™¯</th><th>æ¨èæ–¹æ¡ˆ</th><th>è€—æ—¶</th><th>é£é™©</th></tr></thead><tbody><tr><td>å¯åœæœº</td><td>ä½å³°æœŸç›´æ¥DDL</td><td>åˆ†é’Ÿçº§</td><td>ä½</td></tr><tr><td>ä¸å¯åœæœº+ç®€å•å­—æ®µ</td><td>åœ¨çº¿DDLï¼ˆINPLACEï¼‰</td><td>åˆ†é’Ÿåˆ°å°æ—¶</td><td>ä¸­ï¼ˆç›‘æ§é”ç­‰å¾…ï¼‰</td></tr><tr><td>ä¸å¯åœæœº+å¤æ‚å­—æ®µ</td><td>å½±å­è¡¨åˆ‡æ¢</td><td>å°æ—¶åˆ°å¤©æ•°</td><td>é«˜ï¼ˆéœ€åŒæ­¥å·¥å…·ï¼‰</td></tr><tr><td>æ‹“å±•è¡¨ï¼ŒæŒ‰éœ€å…³è”æŸ¥è¯¢</td><td/><td/></tr><tr><td>JSONæ‹“å±•å­—æ®µ</td><td/><td/></tr></tbody></table>
<p><strong>æœ€ç»ˆå»ºè®®</strong>ï¼š</p>
<ol>
<li><strong>ä¼˜å…ˆæµ‹è¯•</strong>ï¼šåœ¨æµ‹è¯•åº“ç”¨<code>ALTER TABLE ... ALGORITHM=INPLACE, LOCK=NONE</code>éªŒè¯æ˜¯å¦æ”¯æŒåœ¨çº¿DDLã€‚</li>
<li><strong>ç›‘æ§</strong>ï¼šæ‰§è¡Œæ—¶å®æ—¶ç›‘æ§<code>SHOW PROCESSLIST</code>ã€ç£ç›˜IOã€é•¿äº‹åŠ¡ã€‚</li>
<li><strong>å…œåº•</strong>ï¼šå¤‡ä»½+å½±å­è¡¨æ–¹æ¡ˆå¤‡ç”¨ï¼Œç¡®ä¿å¯éšæ—¶åˆ‡æ¢ã€‚</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[JobFlow çš„å»¶æ—¶è°ƒåº¦ï¼šå¦‚ä½•å¯é åœ°å¤„ç†â€œ30åˆ†é’Ÿåå–æ¶ˆè®¢å•â€]]></title>    <link>https://juejin.cn/post/7588095884070682624</link>    <guid>https://juejin.cn/post/7588095884070682624</guid>    <pubDate>2025-12-28T08:40:57.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588095884070682624" data-draft-id="7588093282531295284" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="JobFlow çš„å»¶æ—¶è°ƒåº¦ï¼šå¦‚ä½•å¯é åœ°å¤„ç†â€œ30åˆ†é’Ÿåå–æ¶ˆè®¢å•â€"/> <meta itemprop="keywords" content="åç«¯,é¢è¯•,å¼€æº"/> <meta itemprop="datePublished" content="2025-12-28T08:40:57.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è¸æµªæ— ç—•"/> <meta itemprop="url" content="https://juejin.cn/user/2834988091055719"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            JobFlow çš„å»¶æ—¶è°ƒåº¦ï¼šå¦‚ä½•å¯é åœ°å¤„ç†â€œ30åˆ†é’Ÿåå–æ¶ˆè®¢å•â€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2834988091055719/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è¸æµªæ— ç—•
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-28T08:40:57.000Z" title="Sun Dec 28 2025 08:40:57 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-28
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    2
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¼€æºåœ°å€ä¸ç³»åˆ—æ–‡ç« </h2>
<ul>
<li><strong>å¼€æºåœ°å€</strong>ï¼š<code>https://gitee.com/sh_wangwanbao/job-flow</code></li>
<li><strong>ç³»åˆ—æ–‡ç« ï¼š</strong>
<ul>
<li><a href="https://juejin.cn/post/7583469866007969827" target="_blank" title="https://juejin.cn/post/7583469866007969827">ç¬¬ä¸€ç¯‡ï¼šåŸºäºNacosçš„è½»é‡ä»»åŠ¡è°ƒåº¦æ–¹æ¡ˆ â€”â€” ä» XXL-Job çš„ç—›ç‚¹è¯´èµ·</a></li>
<li><a href="https://juejin.cn/post/7584353612501106729" target="_blank" title="https://juejin.cn/post/7584353612501106729">ç¬¬äºŒç¯‡ï¼šJobFlow å®ç°æ–¹æ¡ˆï¼šäº‘åŸç”Ÿæ—¶ä»£çš„ä»»åŠ¡è°ƒåº¦æ–°æ€è·¯</a></li>
<li><a href="https://juejin.cn/post/7585727457472823296" target="_blank" title="https://juejin.cn/post/7585727457472823296">ç¬¬ä¸‰ç¯‡ï¼šJobFlow å®æˆ˜ï¼šæ— é”è°ƒåº¦æ˜¯æ€ä¹ˆåšåˆ°çš„</a></li>
<li><a href="https://juejin.cn/post/7585751355593506835" target="_blank" title="https://juejin.cn/post/7585751355593506835">ç¬¬å››ç¯‡ï¼šJobFlow èƒŒåï¼šäº”ä¸ªè®©æˆ‘è±ç„¶å¼€æœ—çš„è®¾è®¡ç¬é—´</a></li>
<li><a href="https://juejin.cn/post/7588028859541307418" target="_blank" title="https://juejin.cn/post/7588028859541307418">ç¬¬äº”ç¯‡ï¼šJobFlowè°ƒåº¦çš„éš¾é¢˜ï¼šè¶…æ—¶ã€è¡¥å¿ä¸æ¼è°ƒ</a></li>
<li><a href="https://juejin.cn/spost/7588067055481634825" target="_blank" title="https://juejin.cn/spost/7588067055481634825">ç¬¬å…­ç¯‡ï¼šJobFlowï¼šå›ºå®šåˆ†ç‰‡å¦‚ä½•è§£å†³åˆ†å¸ƒå¼æ‰«æçš„è¾¹ç•ŒæŠ–åŠ¨</a></li>
<li><a href="https://juejin.cn/spost/7588095884070682624" target="_blank" title="https://juejin.cn/spost/7588095884070682624">ç¬¬ä¸ƒç¯‡ï¼šJobFlow çš„å»¶æ—¶è°ƒåº¦ï¼šå¦‚ä½•å¯é åœ°å¤„ç†â€œ30åˆ†é’Ÿåå–æ¶ˆè®¢å•â€</a></li>
</ul>
</li>
</ul>
<h2 data-id="heading-1">å‰è¨€</h2>
<p>å‰é¢å‡ ç¯‡æ–‡ç« è®²äº†å‘¨æœŸä»»åŠ¡çš„è°ƒåº¦ï¼Œä½†åœ¨å®é™…ä¸šåŠ¡ä¸­ï¼Œè¿˜æœ‰å¦ä¸€ç§å¸¸è§éœ€æ±‚ï¼š</p>
<pre><code class="hljs">ç”¨æˆ·ä¸‹å•å30åˆ†é’Ÿæœªæ”¯ä»˜ â†’ è‡ªåŠ¨å–æ¶ˆè®¢å•
æ”¯ä»˜æˆåŠŸå15åˆ†é’Ÿ â†’ å‘é€ç¡®è®¤çŸ­ä¿¡
ä¼šå‘˜åˆ°æœŸå‰3å¤© â†’ å‘é€ç»­è´¹æé†’
</code></pre>
<p>è¿™äº›éƒ½ä¸æ˜¯"æ¯å¤©å‡Œæ™¨2ç‚¹"è¿™ç§å›ºå®šå‘¨æœŸï¼Œè€Œæ˜¯<strong>è¿è¡Œæ—¶åŠ¨æ€æŒ‡å®šçš„å»¶æ—¶ä»»åŠ¡</strong>ã€‚</p>
<p>JobFlow çš„å»¶æ—¶è°ƒåº¦å°±æ˜¯ç”¨æ¥è§£å†³è¿™ä¸ªé—®é¢˜çš„ã€‚</p>
<p>è¿™ç¯‡æ–‡ç« å°±æ¥è®²è®²å»¶æ—¶è°ƒåº¦æ˜¯æ€ä¹ˆè®¾è®¡çš„ã€‚</p>
<h2 data-id="heading-2">ä¸€ã€å»¶æ—¶è°ƒåº¦ vs å®šæ—¶ä»»åŠ¡</h2>
<p>å…ˆçœ‹çœ‹ä¸¤è€…çš„åŒºåˆ«ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    A[å®šæ—¶ä»»åŠ¡&lt;br/&gt;Cronè¡¨è¾¾å¼] --&gt; B[æ¯å¤©å‡Œæ™¨2ç‚¹&lt;br/&gt;å‘¨æœŸæ‰§è¡Œ]
    C[å»¶æ—¶ä»»åŠ¡&lt;br/&gt;æŒ‡å®šæ—¶é—´ç‚¹] --&gt; D[30åˆ†é’Ÿå&lt;br/&gt;æ‰§è¡Œä¸€æ¬¡]
    
    style A fill:#87CEEB
    style B fill:#90EE90
    style C fill:#FFB6C1
    style D fill:#FFE4B5
</code></pre>
<p><strong>å®šæ—¶ä»»åŠ¡ï¼š</strong></p>
<ul>
<li>é…ç½®ï¼šåœ¨æ•°æ®åº“é‡Œé…å¥½ Cron è¡¨è¾¾å¼</li>
<li>è§¦å‘ï¼šè°ƒåº¦å™¨æŒ‰ Cron å‘¨æœŸæ€§è§¦å‘</li>
<li>åœºæ™¯ï¼šæŠ¥è¡¨ç”Ÿæˆã€æ•°æ®åŒæ­¥ã€å¯¹è´¦</li>
</ul>
<p><strong>å»¶æ—¶ä»»åŠ¡ï¼š</strong></p>
<ul>
<li>é…ç½®ï¼šè¿è¡Œæ—¶é€šè¿‡ API åŠ¨æ€åˆ›å»º</li>
<li>è§¦å‘ï¼šåˆ°æŒ‡å®šæ—¶é—´ç‚¹æ‰§è¡Œä¸€æ¬¡</li>
<li>åœºæ™¯ï¼šè®¢å•è¶…æ—¶ã€æ¶ˆæ¯å»¶è¿Ÿã€å®šæ—¶æé†’</li>
</ul>
<p>å¯¹æ¯”è¡¨æ ¼ï¼š</p>






























<table><thead><tr><th>ç‰¹æ€§</th><th>å®šæ—¶ä»»åŠ¡</th><th>å»¶æ—¶ä»»åŠ¡</th></tr></thead><tbody><tr><td>è§¦å‘æ–¹å¼</td><td>å‘¨æœŸæ€§ï¼ˆCronï¼‰</td><td>ä¸€æ¬¡æ€§ï¼ˆæ—¶é—´ç‚¹ï¼‰</td></tr><tr><td>åˆ›å»ºæ–¹å¼</td><td>æ•°æ®åº“é…ç½®</td><td>API åŠ¨æ€è°ƒç”¨</td></tr><tr><td>é‡è¯•æœºåˆ¶</td><td>éœ€è‡ªå·±å®ç°</td><td>å†…ç½®æŒ‡æ•°é€€é¿</td></tr><tr><td>å¹‚ç­‰æ€§</td><td>éœ€è‡ªå·±ä¿è¯</td><td>æ¡†æ¶å±‚é¢ä¿éšœ</td></tr></tbody></table>
<h2 data-id="heading-3">äºŒã€æ ¸å¿ƒè®¾è®¡</h2>
<h3 data-id="heading-4">æ•°æ®æ¨¡å‹</h3>
<p>å»¶æ—¶ä»»åŠ¡å­˜åœ¨ <code>job_delay_task</code> è¡¨ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> job_delay_task (
    id <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">PRIMARY</span> KEY AUTO_INCREMENT,
    trace_id <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">64</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">UNIQUE</span>,      <span class="hljs-comment">-- é“¾è·¯è¿½è¸ª</span>
    biz_uuid <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">64</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">UNIQUE</span>,      <span class="hljs-comment">-- ä¸šåŠ¡å¹‚ç­‰ID</span>
    service_name <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">100</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,        <span class="hljs-comment">-- ç›®æ ‡æœåŠ¡</span>
    handler <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">100</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,             <span class="hljs-comment">-- Handleråç§°</span>
    execute_time <span class="hljs-type">TIMESTAMP</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,           <span class="hljs-comment">-- æœŸæœ›æ‰§è¡Œæ—¶é—´</span>
    next_attempt_time <span class="hljs-type">TIMESTAMP</span>,               <span class="hljs-comment">-- ä¸‹æ¬¡å°è¯•æ—¶é—´</span>
    payload_json TEXT,                         <span class="hljs-comment">-- ä¸šåŠ¡å‚æ•°</span>
    status <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,               <span class="hljs-comment">-- çŠ¶æ€</span>
    retry_count <span class="hljs-type">INT</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">0</span>,                 <span class="hljs-comment">-- é‡è¯•æ¬¡æ•°</span>
    max_retry <span class="hljs-type">INT</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">3</span>,                   <span class="hljs-comment">-- æœ€å¤§é‡è¯•</span>
    ...
);
</code></pre>
<p>å…³é”®å­—æ®µï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    A[biz_uuid&lt;br/&gt;ä¸šåŠ¡å”¯ä¸€ID] --&gt; B[å¹‚ç­‰ä¿è¯&lt;br/&gt;é˜²é‡å¤æäº¤]
    C[next_attempt_time&lt;br/&gt;ä¸‹æ¬¡å°è¯•æ—¶é—´] --&gt; D[æ‰«æä¾æ®&lt;br/&gt;å†³å®šä½•æ—¶æ‰§è¡Œ]
    E[status&lt;br/&gt;ä»»åŠ¡çŠ¶æ€] --&gt; F[çŠ¶æ€æœº&lt;br/&gt;é©±åŠ¨æµè½¬]
    
    style A fill:#87CEEB
    style C fill:#FFE4B5
    style E fill:#FFB6C1
    style B fill:#90EE90
    style D fill:#90EE90
    style F fill:#90EE90
</code></pre>
<p><strong>biz_uuid</strong>ï¼šä¸šåŠ¡æ–¹ä¼ å…¥çš„å”¯ä¸€IDï¼Œç”¨äºå¹‚ç­‰</p>
<ul>
<li>ç¤ºä¾‹ï¼š<code>order-timeout-12345</code></li>
<li>å”¯ä¸€çº¦æŸï¼šé‡å¤æäº¤è¿”å›å·²æœ‰è®°å½•</li>
</ul>
<p><strong>next_attempt_time</strong>ï¼šæ ¸å¿ƒå­—æ®µï¼Œå†³å®šä»€ä¹ˆæ—¶å€™æ‰§è¡Œ</p>
<ul>
<li>åˆå§‹å€¼ï¼š<code>execute_time</code>ï¼ˆä¸šåŠ¡æœŸæœ›æ—¶é—´ï¼‰</li>
<li>å¤±è´¥åï¼šæŒ‰æŒ‡æ•°é€€é¿å»¶åï¼ˆ+3åˆ†é’Ÿã€+5åˆ†é’Ÿï¼‰</li>
</ul>
<p><strong>status</strong>ï¼šçŠ¶æ€æœºæµè½¬</p>
<ul>
<li>PENDINGï¼šç­‰å¾…æ‰§è¡Œ</li>
<li>SENDINGï¼šæ­£åœ¨è°ƒç”¨</li>
<li>SENTï¼šæ‰§è¡ŒæˆåŠŸ</li>
<li>FAILEDï¼šå¤±è´¥ï¼ˆå¯é‡è¯•æˆ–æœ€ç»ˆå¤±è´¥ï¼‰</li>
</ul>
<h3 data-id="heading-5">çŠ¶æ€æœº</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    A[PENDING&lt;br/&gt;ç­‰å¾…ä¸­] --&gt; B[SENDING&lt;br/&gt;è°ƒç”¨ä¸­]
    B --&gt; C[SENT&lt;br/&gt;å·²å®Œæˆ]
    B --&gt; D[FAILED&lt;br/&gt;å¤±è´¥]
    D --&gt; E{é‡è¯•æ¬¡æ•°?}
    E --&gt;|æœªè¾¾ä¸Šé™| A
    E --&gt;|è¾¾åˆ°ä¸Šé™| F[FAILED&lt;br/&gt;æœ€ç»ˆå¤±è´¥]
    
    style A fill:#87CEEB
    style B fill:#FFE4B5
    style C fill:#90EE90
    style D fill:#FFB6C1
    style F fill:#FF6B6B
</code></pre>
<p>æ­£å¸¸æµç¨‹ï¼š</p>
<pre><code class="hljs language-objectivec" lang="objectivec">åˆ›å»ºä»»åŠ¡ â†’ PENDING
â†“
æ—¶é—´åˆ°äº† â†’ SENDINGï¼ˆ<span class="hljs-built_in">CAS</span>æŠ¢å ï¼‰
â†“
HTTPè°ƒç”¨ â†’ SENT
</code></pre>
<p>å¤±è´¥é‡è¯•ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">HTTPè°ƒç”¨å¤±è´¥ â†’ FAILED
â†“
retry_count &lt; max_retry â†’ å›åˆ° PENDING
â†“
<span class="hljs-attr">next_attempt_time</span> = now + æŒ‡æ•°é€€é¿æ—¶é—´
â†“
ç­‰å¾…ä¸‹æ¬¡æ‰«æ
</code></pre>
<p>æœ€ç»ˆå¤±è´¥ï¼š</p>
<pre><code class="hljs">retry_count &gt;= max_retry â†’ æ ‡è®°ä¸ºæœ€ç»ˆå¤±è´¥
â†’ ä¸å†é‡è¯•
â†’ éœ€è¦äººå·¥ä»‹å…¥
</code></pre>
<h2 data-id="heading-6">ä¸‰ã€åˆ›å»ºå»¶æ—¶ä»»åŠ¡</h2>
<h3 data-id="heading-7">APIè°ƒç”¨</h3>
<p>ä¸šåŠ¡æ–¹é€šè¿‡HTTPæ¥å£åˆ›å»ºå»¶æ—¶ä»»åŠ¡ï¼š</p>
<pre><code class="hljs language-http" lang="http">POST /api/delay-tasks
Content-Type: application/json

{
  "serviceName": "order-service",
  "handler": "orderTimeoutHandler",
  "executeTime": "2025-12-28T16:00:00",
  "bizUuid": "order-timeout-12345",
  "payloadJson": "{\"orderId\":\"12345\"}"
}
</code></pre>
<p>å‚æ•°è¯´æ˜ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    A[serviceName&lt;br/&gt;order-service] --&gt; B[ç›®æ ‡æœåŠ¡&lt;br/&gt;ä»Nacoså‘ç°]
    C[handler&lt;br/&gt;orderTimeoutHandler] --&gt; D[Handleråç§°&lt;br/&gt;æ‰§è¡Œå™¨å®ç°]
    E[executeTime&lt;br/&gt;2025-12-28 16:00] --&gt; F[æœŸæœ›æ‰§è¡Œæ—¶é—´&lt;br/&gt;åˆ°æ—¶è§¦å‘]
    G[bizUuid&lt;br/&gt;order-timeout-12345] --&gt; H[å¹‚ç­‰ID&lt;br/&gt;é˜²æ­¢é‡å¤]
    
    style A fill:#87CEEB
    style C fill:#87CEEB
    style E fill:#FFE4B5
    style G fill:#FFB6C1
    style B fill:#90EE90
    style D fill:#90EE90
    style F fill:#90EE90
    style H fill:#90EE90
</code></pre>
<h3 data-id="heading-8">å¤„ç†æµç¨‹</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    A[æ¥æ”¶è¯·æ±‚] --&gt; B[ç”ŸæˆtraceId]
    B --&gt; C[å°è£…å®ä½“]
    C --&gt; D{bizUuid&lt;br/&gt;å·²å­˜åœ¨?}
    D --&gt;|æ˜¯| E[è¿”å›å·²æœ‰è®°å½•&lt;br/&gt;å¹‚ç­‰]
    D --&gt;|å¦| F[æ’å…¥æ•°æ®åº“&lt;br/&gt;è¿”å›æ–°è®°å½•]
    
    style A fill:#87CEEB
    style B fill:#87CEEB
    style C fill:#87CEEB
    style D fill:#FFE4B5
    style E fill:#90EE90
    style F fill:#90EE90
</code></pre>
<p>æ ¸å¿ƒä»£ç ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// 1. ç”Ÿæˆ traceId</span>
<span class="hljs-type">String</span> <span class="hljs-variable">traceId</span> <span class="hljs-operator">=</span> <span class="hljs-string">"delay_time-"</span> + DateTimeFormatter.ofPattern(<span class="hljs-string">"yyyyMMddHHmmss"</span>)
    .format(LocalDateTime.now()) + <span class="hljs-string">"-"</span> + shortUuid();

<span class="hljs-comment">// 2. å°è£…å®ä½“</span>
<span class="hljs-type">JobDelayTask</span> <span class="hljs-variable">task</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JobDelayTask</span>();
task.setTraceId(traceId);
task.setBizUuid(request.getBizUuid());
task.setServiceName(request.getServiceName());
task.setHandler(request.getHandler());
task.setExecuteTime(request.getExecuteTime());
task.setNextAttemptTime(request.getExecuteTime());  <span class="hljs-comment">// åˆå§‹å€¼</span>
task.setPayloadJson(request.getPayloadJson());
task.setStatus(<span class="hljs-string">"PENDING"</span>);
task.setRetryCount(<span class="hljs-number">0</span>);
task.setMaxRetry(<span class="hljs-number">3</span>);

<span class="hljs-comment">// 3. æ’å…¥æˆ–è·å–</span>
<span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">return</span> delayTaskRepository.insert(task);
} <span class="hljs-keyword">catch</span> (DuplicateKeyException e) {
    <span class="hljs-comment">// bizUuid å†²çªï¼Œè¿”å›å·²æœ‰è®°å½•ï¼ˆå¹‚ç­‰ï¼‰</span>
    <span class="hljs-keyword">return</span> delayTaskRepository.findByBizUuid(request.getBizUuid());
}
</code></pre>
<p><strong>å¹‚ç­‰æ€§ä¿è¯ï¼š</strong></p>
<pre><code class="hljs language-arduino" lang="arduino">ä¸šåŠ¡æ–¹é‡å¤æäº¤ï¼š
POST /api/delay-tasksï¼ˆbizUuid: order-timeout<span class="hljs-number">-12345</span>ï¼‰
â†’ ç¬¬<span class="hljs-number">1</span>æ¬¡ï¼šæ’å…¥æˆåŠŸï¼Œè¿”å›æ–°è®°å½•
â†’ ç¬¬<span class="hljs-number">2</span>æ¬¡ï¼šå”¯ä¸€çº¦æŸå†²çªï¼Œè¿”å›å·²æœ‰è®°å½•
â†’ ä¸šåŠ¡æ–¹å¾—åˆ°ç›¸åŒçš„ traceId
</code></pre>
<h2 data-id="heading-9">å››ã€æ‰«æä¸è°ƒåº¦</h2>
<h3 data-id="heading-10">å®šæ—¶æ‰«æ</h3>
<p>è°ƒåº¦å™¨æ¯5ç§’æ‰«æä¸€æ¬¡ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Scheduled(fixedDelay = 5000)</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">scanAndDispatch</span><span class="hljs-params">()</span> {
    <span class="hljs-comment">// 1. æ‰«æåˆ°æœŸä»»åŠ¡</span>
    List&lt;JobDelayTask&gt; dueTasks = findDueTasks();
    <span class="hljs-keyword">for</span> (JobDelayTask task : dueTasks) {
        dispatchDelayTask(task);
    }
    
    <span class="hljs-comment">// 2. æ‰«æ SENDING è¶…æ—¶ä»»åŠ¡</span>
    List&lt;JobDelayTask&gt; stuckTasks = findStuckSendingTasks();
    <span class="hljs-keyword">for</span> (JobDelayTask task : stuckTasks) {
        handleSendingTimeout(task);
    }
}
</code></pre>
<p>æ‰«æé€»è¾‘ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    A[å®šæ—¶æ‰«æ&lt;br/&gt;5ç§’ä¸€æ¬¡] --&gt; B[æŸ¥è¯¢åˆ°æœŸä»»åŠ¡&lt;br/&gt;PENDING/FAILED]
    A --&gt; C[æŸ¥è¯¢è¶…æ—¶ä»»åŠ¡&lt;br/&gt;SENDING]
    B --&gt; D[é€ä¸ªè°ƒåº¦]
    C --&gt; E[æ ‡è®°å¤±è´¥&lt;br/&gt;è¿›å…¥é‡è¯•]
    
    style A fill:#87CEEB
    style B fill:#FFE4B5
    style C fill:#FFB6C1
    style D fill:#90EE90
    style E fill:#FFE4B5
</code></pre>
<p><strong>åˆ°æœŸä»»åŠ¡æŸ¥è¯¢ï¼š</strong></p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> job_delay_task 
<span class="hljs-keyword">WHERE</span> status <span class="hljs-keyword">IN</span> (<span class="hljs-string">'PENDING'</span>, <span class="hljs-string">'FAILED'</span>)
  <span class="hljs-keyword">AND</span> retry_count <span class="hljs-operator">&lt;</span> max_retry
  <span class="hljs-keyword">AND</span> next_attempt_time <span class="hljs-operator">&lt;=</span> NOW()
<span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> next_attempt_time <span class="hljs-keyword">ASC</span>
LIMIT <span class="hljs-number">100</span>
</code></pre>
<p><strong>è¶…æ—¶ä»»åŠ¡æŸ¥è¯¢ï¼š</strong></p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> job_delay_task 
<span class="hljs-keyword">WHERE</span> status <span class="hljs-operator">=</span> <span class="hljs-string">'SENDING'</span>
  <span class="hljs-keyword">AND</span> TIMESTAMPDIFF(<span class="hljs-keyword">SECOND</span>, updated_at, NOW()) <span class="hljs-operator">&gt;</span> <span class="hljs-number">120</span>
LIMIT <span class="hljs-number">100</span>
</code></pre>
<h3 data-id="heading-11">æ— é”è°ƒåº¦</h3>
<p>è°ƒåº¦åˆ†ä¸‰æ­¥ï¼šOwneråˆ¤å®š â†’ CASæŠ¢å  â†’ HTTPè°ƒç”¨</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    A[æ‰«æåˆ°ä»»åŠ¡] --&gt; B{isOwner?&lt;br/&gt;Hashåˆ†åŒº}
    B --&gt;|å¦| C[è·³è¿‡]
    B --&gt;|æ˜¯| D[CASæŠ¢å &lt;br/&gt;PENDING to SENDING]
    D --&gt; E{CASæˆåŠŸ?}
    E --&gt;|å¦| F[å…¶ä»–å®ä¾‹æŠ¢åˆ°]
    E --&gt;|æ˜¯| G[HTTPè°ƒç”¨æ‰§è¡Œå™¨]
    
    style A fill:#87CEEB
    style B fill:#FFE4B5
    style D fill:#87CEEB
    style E fill:#FFE4B5
    style G fill:#90EE90
    style C fill:#D3D3D3
    style F fill:#D3D3D3
</code></pre>
<p><strong>ç¬¬ä¸€æ­¥ï¼šOwneråˆ¤å®š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// åŸºäº serviceName åš Hash åˆ†åŒº</span>
<span class="hljs-keyword">if</span> (!clusterInstanceService.isOwner(task.getServiceName())) {
    <span class="hljs-keyword">return</span>;  <span class="hljs-comment">// ä¸æ˜¯æˆ‘è´Ÿè´£ï¼Œè·³è¿‡</span>
}
</code></pre>
<p>åŸç†ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">æœ‰3ä¸ªè°ƒåº¦å™¨å®ä¾‹ï¼š
- scheduler-001
- scheduler-002
- scheduler-003

ä»»åŠ¡çš„ <span class="hljs-attr">serviceName</span> = <span class="hljs-string">"order-service"</span>
â†’ hash("order-service") % <span class="hljs-attr">3</span> = <span class="hljs-number">1</span>
â†’ scheduler-002 è´Ÿè´£
â†’ å…¶ä»–å®ä¾‹è·³è¿‡
</code></pre>
<p><strong>ç¬¬äºŒæ­¥ï¼šCASæŠ¢å </strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// CAS æ›´æ–°çŠ¶æ€</span>
<span class="hljs-type">boolean</span> <span class="hljs-variable">success</span> <span class="hljs-operator">=</span> tryMarkSending(
    task.getId(),
    task.getStatus(),      <span class="hljs-comment">// æœŸæœ›çŠ¶æ€ï¼šPENDING</span>
    task.getRetryCount()   <span class="hljs-comment">// æœŸæœ›é‡è¯•æ¬¡æ•°ï¼š0</span>
);

<span class="hljs-keyword">if</span> (!success) {
    <span class="hljs-keyword">return</span>;  <span class="hljs-comment">// CAS å¤±è´¥ï¼Œå…¶ä»–å®ä¾‹æŠ¢åˆ°äº†</span>
}
</code></pre>
<p>SQLå®ç°ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">UPDATE</span> job_delay_task 
<span class="hljs-keyword">SET</span> status <span class="hljs-operator">=</span> <span class="hljs-string">'SENDING'</span>, updated_at <span class="hljs-operator">=</span> NOW()
<span class="hljs-keyword">WHERE</span> id <span class="hljs-operator">=</span> ? 
  <span class="hljs-keyword">AND</span> status <span class="hljs-operator">=</span> ?         <span class="hljs-comment">-- æœŸæœ›çŠ¶æ€åŒ¹é…</span>
  <span class="hljs-keyword">AND</span> retry_count <span class="hljs-operator">=</span> ?    <span class="hljs-comment">-- æœŸæœ›é‡è¯•æ¬¡æ•°åŒ¹é…</span>
</code></pre>
<p>è¿”å› <code>affected_rows &gt; 0</code> è¡¨ç¤ºæŠ¢å æˆåŠŸã€‚</p>
<p><strong>ä¸ºä»€ä¹ˆéœ€è¦CASï¼Ÿ</strong></p>
<pre><code class="hljs language-diff" lang="diff">æç«¯æƒ…å†µï¼šOwneråˆ¤å®šé‡å 
<span class="hljs-deletion">- å®ä¾‹åˆ—è¡¨å˜åŒ–ï¼Œä¸¤ä¸ªå®ä¾‹éƒ½è®¤ä¸ºè‡ªå·±æ˜¯ owner</span>
<span class="hljs-deletion">- åŒæ—¶æ›´æ–°åŒä¸€æ¡ä»»åŠ¡</span>

CASä¿è¯ï¼š
<span class="hljs-deletion">- åªæœ‰ä¸€ä¸ªå®ä¾‹çš„ UPDATE ä¼šæˆåŠŸ</span>
<span class="hljs-deletion">- å¦ä¸€ä¸ªå®ä¾‹çš„ UPDATE è¿”å› affected_rows = 0</span>
<span class="hljs-deletion">- æœ€ç»ˆåªæœ‰ä¸€ä¸ªå®ä¾‹æ‰§è¡Œ</span>
</code></pre>
<p><strong>ç¬¬ä¸‰æ­¥ï¼šHTTPè°ƒç”¨</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// 1. è´Ÿè½½å‡è¡¡é€‰æ‹©å®ä¾‹</span>
List&lt;ServiceInstance&gt; instances = discoveryClient.getInstances(task.getServiceName());
<span class="hljs-type">int</span> <span class="hljs-variable">index</span> <span class="hljs-operator">=</span> Math.abs(task.getTraceId().hashCode()) % instances.size();
<span class="hljs-type">ServiceInstance</span> <span class="hljs-variable">instance</span> <span class="hljs-operator">=</span> instances.get(index);

<span class="hljs-comment">// 2. æ„é€ è¯·æ±‚</span>
<span class="hljs-type">String</span> <span class="hljs-variable">url</span> <span class="hljs-operator">=</span> instance.getUri() + <span class="hljs-string">"/internal/job/"</span> + task.getHandler();
<span class="hljs-type">HttpHeaders</span> <span class="hljs-variable">headers</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">HttpHeaders</span>();
headers.add(<span class="hljs-string">"X-Trace-Id"</span>, task.getTraceId());
headers.add(<span class="hljs-string">"X-Biz-UUID"</span>, task.getBizUuid());

<span class="hljs-comment">// 3. å‘é€è¯·æ±‚</span>
HttpEntity&lt;String&gt; entity = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HttpEntity</span>&lt;&gt;(task.getPayloadJson(), headers);
ResponseEntity&lt;String&gt; response = restTemplate.exchange(
    url, HttpMethod.POST, entity, String.class);

<span class="hljs-comment">// 4. æ›´æ–°çŠ¶æ€</span>
<span class="hljs-keyword">if</span> (response.getStatusCode().is2xxSuccessful()) {
    markSent(task.getId());  <span class="hljs-comment">// æ ‡è®° SENT</span>
} <span class="hljs-keyword">else</span> {
    handleCallFailure(task);  <span class="hljs-comment">// è¿›å…¥é‡è¯•</span>
}
</code></pre>
<h2 data-id="heading-12">äº”ã€é‡è¯•æœºåˆ¶</h2>
<h3 data-id="heading-13">æŒ‡æ•°é€€é¿ç­–ç•¥</h3>
<p>å¤±è´¥åæŒ‰æŒ‡æ•°é€€é¿é‡è¯•ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    A[é¦–æ¬¡å¤±è´¥&lt;br/&gt;retry=0] --&gt; B[+3åˆ†é’Ÿ&lt;br/&gt;retry=1]
    B --&gt; C[ç¬¬2æ¬¡å¤±è´¥&lt;br/&gt;retry=1]
    C --&gt; D[+5åˆ†é’Ÿ&lt;br/&gt;retry=2]
    D --&gt; E[ç¬¬3æ¬¡å¤±è´¥&lt;br/&gt;retry=2]
    E --&gt; F[+5åˆ†é’Ÿ&lt;br/&gt;retry=3]
    F --&gt; G[æœ€ç»ˆå¤±è´¥&lt;br/&gt;ä¸å†é‡è¯•]
    
    style A fill:#FFB6C1
    style C fill:#FFB6C1
    style E fill:#FFB6C1
    style G fill:#FF6B6B
    style B fill:#FFE4B5
    style D fill:#FFE4B5
    style F fill:#FFE4B5
</code></pre>
<p>ä»£ç é€»è¾‘ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">handleCallFailure</span><span class="hljs-params">(JobDelayTask task, String errorMsg)</span> {
    <span class="hljs-type">int</span> <span class="hljs-variable">newRetryCount</span> <span class="hljs-operator">=</span> task.getRetryCount() + <span class="hljs-number">1</span>;
    
    <span class="hljs-keyword">if</span> (newRetryCount &gt;= task.getMaxRetry()) {
        <span class="hljs-comment">// è¾¾åˆ°æœ€å¤§é‡è¯•æ¬¡æ•°ï¼Œæ ‡è®°æœ€ç»ˆå¤±è´¥</span>
        markFailedFinal(task.getId(), newRetryCount, errorMsg);
        log.warn(<span class="hljs-string">"å»¶æ—¶ä»»åŠ¡æœ€ç»ˆå¤±è´¥ï¼ŒtraceId={}, bizUuid={}"</span>, 
            task.getTraceId(), task.getBizUuid());
        <span class="hljs-keyword">return</span>;
    }
    
    <span class="hljs-comment">// è®¡ç®—ä¸‹æ¬¡å°è¯•æ—¶é—´</span>
    LocalDateTime nextAttempt;
    <span class="hljs-keyword">if</span> (newRetryCount == <span class="hljs-number">1</span>) {
        nextAttempt = now.plusMinutes(<span class="hljs-number">3</span>);   <span class="hljs-comment">// ç¬¬1æ¬¡é‡è¯•ï¼š+3åˆ†é’Ÿ</span>
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (newRetryCount == <span class="hljs-number">2</span>) {
        nextAttempt = now.plusMinutes(<span class="hljs-number">5</span>);   <span class="hljs-comment">// ç¬¬2æ¬¡é‡è¯•ï¼š+5åˆ†é’Ÿ</span>
    } <span class="hljs-keyword">else</span> {
        nextAttempt = now.plusMinutes(<span class="hljs-number">5</span>);   <span class="hljs-comment">// ç¬¬3æ¬¡é‡è¯•ï¼š+5åˆ†é’Ÿ</span>
    }
    
    <span class="hljs-comment">// æ›´æ–°ä¸º FAILED çŠ¶æ€ï¼Œè®¾ç½® next_attempt_time</span>
    markFailedAndScheduleNext(task.getId(), newRetryCount, nextAttempt, errorMsg);
}
</code></pre>
<p>æ—¶é—´è½´ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-section">10:00:00  åˆ›å»ºä»»åŠ¡ï¼Œexecute_time = 10:30:00</span>
<span class="hljs-section">10:30:00  ç¬¬1æ¬¡æ‰§è¡Œï¼Œå¤±è´¥</span>
<span class="hljs-section">10:33:00  ç¬¬2æ¬¡æ‰§è¡Œï¼ˆ+3åˆ†é’Ÿï¼‰ï¼Œå¤±è´¥</span>
<span class="hljs-section">10:38:00  ç¬¬3æ¬¡æ‰§è¡Œï¼ˆ+5åˆ†é’Ÿï¼‰ï¼Œå¤±è´¥</span>
<span class="hljs-section">10:43:00  ç¬¬4æ¬¡æ‰§è¡Œï¼ˆ+5åˆ†é’Ÿï¼‰ï¼Œå¤±è´¥</span>
          è¾¾åˆ°max_retry=3ï¼Œæ ‡è®°æœ€ç»ˆå¤±è´¥
</code></pre>
<h3 data-id="heading-14">SENDINGè¶…æ—¶æ£€æµ‹</h3>
<p>æœ‰ä¸ªç‰¹æ®Šåœºæ™¯ï¼šHTTPè°ƒç”¨åï¼Œä¸€ç›´æ²¡å“åº”ã€‚</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    A[SENDINGçŠ¶æ€] --&gt; B{è¶…è¿‡120ç§’?}
    B --&gt;|å¦| C[ç»§ç»­ç­‰å¾…]
    B --&gt;|æ˜¯| D[æ ‡è®°å¤±è´¥&lt;br/&gt;è¿›å…¥é‡è¯•]
    
    style A fill:#FFE4B5
    style B fill:#FFE4B5
    style D fill:#FFB6C1
    style C fill:#87CEEB
</code></pre>
<p>å¤„ç†é€»è¾‘ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">handleSendingTimeout</span><span class="hljs-params">(JobDelayTask task)</span> {
    <span class="hljs-type">String</span> <span class="hljs-variable">timeoutMsg</span> <span class="hljs-operator">=</span> <span class="hljs-string">"SENDING timeout (over 120 seconds)"</span>;
    log.warn(<span class="hljs-string">"æ£€æµ‹åˆ°SENDINGè¶…æ—¶ï¼ŒtraceId={}, bizUuid={}"</span>, 
        task.getTraceId(), task.getBizUuid());
    
    <span class="hljs-comment">// è§†ä¸ºä¸€æ¬¡å¤±è´¥ï¼Œè¿›å…¥é‡è¯•æµç¨‹</span>
    handleCallFailure(task, timeoutMsg);
}
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆéœ€è¦è¿™ä¸ªæ£€æµ‹ï¼Ÿ</strong></p>
<pre><code class="hljs">åœºæ™¯ï¼šHTTPè°ƒç”¨åï¼Œæ‰§è¡Œå™¨æŒ‚äº†
â†’ å›è°ƒä¸ä¼šæ¥
â†’ çŠ¶æ€ä¸€ç›´æ˜¯ SENDING
â†’ æ²¡æœ‰è¶…æ—¶æ£€æµ‹ï¼Œä»»åŠ¡å°±ä¸¢äº†

æœ‰äº†æ£€æµ‹ï¼š
â†’ 120ç§’åå‘ç° SENDING è¶…æ—¶
â†’ æ ‡è®°å¤±è´¥ï¼Œè¿›å…¥é‡è¯•
â†’ æœ€å¤šé‡è¯•3æ¬¡
</code></pre>
<h2 data-id="heading-15">å…­ã€ä¸šåŠ¡ä¾§æ€ä¹ˆç”¨</h2>
<h3 data-id="heading-16">æ‰§è¡Œå™¨å®ç°</h3>
<p>ä¸šåŠ¡æœåŠ¡åªéœ€è¦å®ç°ä¸€ä¸ª Handlerï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Component</span>
<span class="hljs-meta">@JobHandler("orderTimeoutHandler")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderTimeoutHandler</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">IJobHandler</span> {
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> JobResult <span class="hljs-title function_">execute</span><span class="hljs-params">(JobContext context)</span> {
        <span class="hljs-comment">// 1. è·å– traceIdï¼ˆæ—¥å¿—è¿½è¸ªï¼‰</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">traceId</span> <span class="hljs-operator">=</span> context.getTraceId();
        MDC.put(<span class="hljs-string">"traceId"</span>, traceId);
        
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// 2. è§£æ payload</span>
            <span class="hljs-type">String</span> <span class="hljs-variable">payload</span> <span class="hljs-operator">=</span> context.getPayload();
            <span class="hljs-type">JSONObject</span> <span class="hljs-variable">json</span> <span class="hljs-operator">=</span> JSON.parseObject(payload);
            <span class="hljs-type">String</span> <span class="hljs-variable">orderId</span> <span class="hljs-operator">=</span> json.getString(<span class="hljs-string">"orderId"</span>);
            
            <span class="hljs-comment">// 3. å¹‚ç­‰åˆ¤æ–­ï¼ˆé‡è¦ï¼ï¼‰</span>
            <span class="hljs-type">Order</span> <span class="hljs-variable">order</span> <span class="hljs-operator">=</span> orderRepository.findById(orderId);
            <span class="hljs-keyword">if</span> (order.getStatus() != OrderStatus.UNPAID) {
                log.info(<span class="hljs-string">"è®¢å•çŠ¶æ€å·²å˜æ›´ï¼Œè·³è¿‡å–æ¶ˆï¼ŒorderId={}"</span>, orderId);
                <span class="hljs-keyword">return</span> JobResult.success(<span class="hljs-string">"Order already paid"</span>);
            }
            
            <span class="hljs-comment">// 4. æ‰§è¡Œä¸šåŠ¡é€»è¾‘</span>
            order.setStatus(OrderStatus.CANCELED);
            order.setCancelReason(<span class="hljs-string">"Payment timeout"</span>);
            orderRepository.save(order);
            
            log.info(<span class="hljs-string">"è®¢å•è¶…æ—¶è‡ªåŠ¨å–æ¶ˆï¼ŒorderId={}"</span>, orderId);
            <span class="hljs-keyword">return</span> JobResult.success(<span class="hljs-string">"Order canceled"</span>);
            
        } <span class="hljs-keyword">catch</span> (Exception e) {
            log.error(<span class="hljs-string">"å–æ¶ˆè®¢å•å¤±è´¥"</span>, e);
            <span class="hljs-keyword">return</span> JobResult.fail(<span class="hljs-string">"Cancel failed: "</span> + e.getMessage());
        } <span class="hljs-keyword">finally</span> {
            MDC.clear();
        }
    }
}
</code></pre>
<p>å…³é”®ç‚¹ï¼š</p>
<p><strong>å…³é”®ç‚¹ä¸€ï¼šå¹‚ç­‰åˆ¤æ–­</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin">å¯èƒ½é‡å¤æ‰§è¡Œçš„åœºæ™¯ï¼š
- æ¡†æ¶é‡è¯•ï¼ˆå¤±è´¥åé‡è¯•<span class="hljs-number">3</span>æ¬¡ï¼‰
- ä¸šåŠ¡æ–¹é‡å¤æäº¤ï¼ˆç›¸åŒbizUuidï¼‰

å¿…é¡»åœ¨ä¸šåŠ¡é€»è¾‘é‡Œåˆ¤æ–­ï¼š
<span class="hljs-keyword">if</span> (order.getStatus() != UNPAID) {
    <span class="hljs-keyword">return</span> success;  <span class="hljs-comment">// å·²ç»å¤„ç†è¿‡äº†</span>
}
</code></pre>
<p><strong>å…³é”®ç‚¹äºŒï¼štraceIdä¼ é€’</strong></p>
<pre><code class="hljs language-css" lang="css">è°ƒåº¦å™¨ç”Ÿæˆ traceId
â†’ HTTP <span class="hljs-selector-tag">Header</span> ä¼ é€’ç»™æ‰§è¡Œå™¨
â†’ æ‰§è¡Œå™¨å†™å…¥ MDC
â†’ æ‰€æœ‰æ—¥å¿—è‡ªåŠ¨å¸¦ä¸Š traceId
â†’ ELK é‡Œæœ traceIdï¼Œçœ‹åˆ°å®Œæ•´é“¾è·¯
</code></pre>
<p><strong>å…³é”®ç‚¹ä¸‰ï¼šæ˜ç¡®è¿”å›ç»“æœ</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin">æˆåŠŸï¼š<span class="hljs-keyword">return</span> JobResult.success(<span class="hljs-string">"Order canceled"</span>);
å¤±è´¥ï¼š<span class="hljs-keyword">return</span> JobResult.fail(<span class="hljs-string">"Cancel failed: "</span> + e.getMessage());

â†’ è°ƒåº¦å™¨æ ¹æ®è¿”å›ç»“æœå†³å®šï¼šæ ‡è®° SENT è¿˜æ˜¯è¿›å…¥é‡è¯•
</code></pre>
<h3 data-id="heading-17">å®Œæ•´ç¤ºä¾‹</h3>
<p>è®¢å•è¶…æ—¶å–æ¶ˆçš„å®Œæ•´æµç¨‹ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    A[ç”¨æˆ·ä¸‹å•&lt;br/&gt;10:00:00] --&gt; B[åˆ›å»ºå»¶æ—¶ä»»åŠ¡&lt;br/&gt;executeTime=10:30]
    B --&gt; C[è°ƒåº¦å™¨æ‰«æ&lt;br/&gt;10:30:00]
    C --&gt; D[HTTPè°ƒç”¨&lt;br/&gt;orderTimeoutHandler]
    D --&gt; E[æ£€æŸ¥è®¢å•çŠ¶æ€]
    E --&gt; F{å·²æ”¯ä»˜?}
    F --&gt;|æ˜¯| G[è·³è¿‡å–æ¶ˆ&lt;br/&gt;è¿”å›SUCCESS]
    F --&gt;|å¦| H[å–æ¶ˆè®¢å•&lt;br/&gt;è¿”å›SUCCESS]
    G --&gt; I[æ ‡è®°SENT]
    H --&gt; I
    
    style A fill:#87CEEB
    style B fill:#87CEEB
    style C fill:#FFE4B5
    style D fill:#FFE4B5
    style E fill:#FFE4B5
    style F fill:#FFE4B5
    style G fill:#90EE90
    style H fill:#90EE90
    style I fill:#90EE90
</code></pre>
<p>ä»£ç å®ç°ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// 1. ç”¨æˆ·ä¸‹å•æ—¶åˆ›å»ºå»¶æ—¶ä»»åŠ¡</span>
<span class="hljs-keyword">public</span> Order <span class="hljs-title function_">createOrder</span><span class="hljs-params">(OrderRequest request)</span> {
    <span class="hljs-comment">// åˆ›å»ºè®¢å•</span>
    <span class="hljs-type">Order</span> <span class="hljs-variable">order</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Order</span>();
    order.setId(generateOrderId());
    order.setStatus(OrderStatus.UNPAID);
    order.setCreatedAt(LocalDateTime.now());
    orderRepository.save(order);
    
    <span class="hljs-comment">// åˆ›å»ºå»¶æ—¶ä»»åŠ¡ï¼ˆ30åˆ†é’Ÿåè‡ªåŠ¨å–æ¶ˆï¼‰</span>
    <span class="hljs-type">DelayTaskRequest</span> <span class="hljs-variable">delayTask</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DelayTaskRequest</span>();
    delayTask.setServiceName(<span class="hljs-string">"order-service"</span>);
    delayTask.setHandler(<span class="hljs-string">"orderTimeoutHandler"</span>);
    delayTask.setExecuteTime(LocalDateTime.now().plusMinutes(<span class="hljs-number">30</span>));
    delayTask.setBizUuid(<span class="hljs-string">"order-timeout-"</span> + order.getId());
    delayTask.setPayloadJson(JSON.toJSONString(
        Map.of(<span class="hljs-string">"orderId"</span>, order.getId())
    ));
    
    delayTaskClient.createDelayTask(delayTask);
    
    <span class="hljs-keyword">return</span> order;
}

<span class="hljs-comment">// 2. æ‰§è¡Œå™¨å¤„ç†è¶…æ—¶</span>
<span class="hljs-meta">@JobHandler("orderTimeoutHandler")</span>
<span class="hljs-keyword">public</span> JobResult <span class="hljs-title function_">orderTimeout</span><span class="hljs-params">(JobContext context)</span> {
    <span class="hljs-type">String</span> <span class="hljs-variable">orderId</span> <span class="hljs-operator">=</span> JSON.parseObject(context.getPayload())
        .getString(<span class="hljs-string">"orderId"</span>);
    
    <span class="hljs-type">Order</span> <span class="hljs-variable">order</span> <span class="hljs-operator">=</span> orderRepository.findById(orderId);
    
    <span class="hljs-comment">// å¹‚ç­‰åˆ¤æ–­</span>
    <span class="hljs-keyword">if</span> (order.getStatus() != OrderStatus.UNPAID) {
        <span class="hljs-keyword">return</span> JobResult.success(<span class="hljs-string">"Order already paid or canceled"</span>);
    }
    
    <span class="hljs-comment">// å–æ¶ˆè®¢å•</span>
    order.setStatus(OrderStatus.CANCELED);
    order.setCancelReason(<span class="hljs-string">"Payment timeout"</span>);
    orderRepository.save(order);
    
    <span class="hljs-keyword">return</span> JobResult.success(<span class="hljs-string">"Order canceled"</span>);
}
</code></pre>
<h2 data-id="heading-18">ä¸ƒã€è®¾è®¡è¦ç‚¹</h2>
<h3 data-id="heading-19">ä¸ºä»€ä¹ˆç”¨ serviceName åš Hash åˆ†åŒº</h3>
<p>å»¶æ—¶ä»»åŠ¡çš„ owner åˆ¤å®šæ˜¯æŒ‰ <code>serviceName</code> åˆ†åŒºçš„ï¼Œè€Œä¸æ˜¯æŒ‰ <code>taskId</code>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// å»¶æ—¶ä»»åŠ¡</span>
<span class="hljs-keyword">if</span> (!clusterInstanceService.isOwner(task.getServiceName())) {
    <span class="hljs-keyword">return</span>;
}

<span class="hljs-comment">// å‘¨æœŸä»»åŠ¡</span>
<span class="hljs-keyword">if</span> (!clusterInstanceService.isOwner(job.getName())) {
    <span class="hljs-keyword">return</span>;
}
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆä¸ä¸€æ ·ï¼Ÿ</strong></p>
<pre><code class="hljs language-diff" lang="diff">å‘¨æœŸä»»åŠ¡ï¼š
<span class="hljs-deletion">- ä»»åŠ¡æ˜¯å›ºå®šçš„ï¼ˆé…ç½®åœ¨æ•°æ®åº“ï¼‰</span>
<span class="hljs-deletion">- jobName æ˜¯ç¨³å®šçš„</span>
<span class="hljs-deletion">- æŒ‰ jobName åˆ†åŒºï¼Œæ¯ä¸ªä»»åŠ¡æœ‰å›ºå®šçš„ owner</span>

å»¶æ—¶ä»»åŠ¡ï¼š
<span class="hljs-deletion">- ä»»åŠ¡æ˜¯åŠ¨æ€çš„ï¼ˆè¿è¡Œæ—¶åˆ›å»ºï¼‰</span>
<span class="hljs-deletion">- taskId æ¯æ¬¡éƒ½ä¸ä¸€æ ·</span>
<span class="hljs-deletion">- æŒ‰ taskId åˆ†åŒºæ²¡æ„ä¹‰</span>

æ‰€ä»¥ï¼š
<span class="hljs-deletion">- æŒ‰ serviceName åˆ†åŒº</span>
<span class="hljs-deletion">- åŒä¸€ä¸ªæœåŠ¡çš„å»¶æ—¶ä»»åŠ¡ï¼Œç”±åŒä¸€ä¸ªè°ƒåº¦å™¨å¤„ç†</span>
<span class="hljs-deletion">- å‡å°‘ç½‘ç»œå¼€é”€</span>
</code></pre>
<h3 data-id="heading-20">ä¸ºä»€ä¹ˆéœ€è¦åŒé‡ä¿æŠ¤</h3>
<p>Owneråˆ¤å®š + CASæŠ¢å ï¼Œä¸¤å±‚ä¿æŠ¤ï¼š</p>
<pre><code class="hljs language-objectivec" lang="objectivec">ç¬¬ä¸€å±‚ï¼šOwneråˆ¤å®šï¼ˆHashåˆ†åŒºï¼‰
â†’ ç»å¤§å¤šæ•°æƒ…å†µé¿å…å†²çª
â†’ æ€§èƒ½å¥½ï¼Œæ— éœ€é”

ç¬¬äºŒå±‚ï¼š<span class="hljs-built_in">CAS</span>æŠ¢å ï¼ˆæ•°æ®åº“ä¹è§‚é”ï¼‰
â†’ æç«¯æƒ…å†µçš„æœ€åé˜²çº¿
â†’ å³ä½¿ owner åˆ¤å®šé‡å ï¼Œä¹Ÿèƒ½ä¿è¯åªæœ‰ä¸€ä¸ªå®ä¾‹æ‰§è¡Œ
</code></pre>
<p>è¿™å’Œå‘¨æœŸä»»åŠ¡çš„è®¾è®¡æ˜¯ä¸€æ ·çš„ï¼šæ— é”ä¼˜å…ˆï¼Œæ•°æ®åº“å…œåº•ã€‚</p>
<h3 data-id="heading-21">ä¸ºä»€ä¹ˆ SENDING éœ€è¦è¶…æ—¶æ£€æµ‹</h3>
<p>çŠ¶æ€æœºé‡Œæœ€å®¹æ˜“å¡ä½çš„å°±æ˜¯ SENDING çŠ¶æ€ï¼š</p>
<pre><code class="hljs">æ­£å¸¸æµç¨‹ï¼š
PENDING â†’ SENDING â†’ SENTï¼ˆæˆåŠŸï¼‰
PENDING â†’ SENDING â†’ FAILEDï¼ˆå¤±è´¥ï¼Œé‡è¯•ï¼‰

å¡ä½åœºæ™¯ï¼š
PENDING â†’ SENDING â†’ ï¼Ÿï¼ˆæ‰§è¡Œå™¨æŒ‚äº†ï¼Œæ²¡å›è°ƒï¼‰
</code></pre>
<p>æ²¡æœ‰è¶…æ—¶æ£€æµ‹ï¼š</p>
<pre><code class="hljs">ä»»åŠ¡ä¸€ç›´ SENDING
â†’ ä¸ä¼šé‡è¯•
â†’ ä¸ä¼šæ ‡è®°å¤±è´¥
â†’ ä»»åŠ¡ä¸¢äº†
</code></pre>
<p>æœ‰äº†è¶…æ—¶æ£€æµ‹ï¼š</p>
<pre><code class="hljs">120ç§’åå‘ç° SENDING è¶…æ—¶
â†’ æ ‡è®°å¤±è´¥
â†’ è¿›å…¥é‡è¯•æµç¨‹
â†’ æœ€å¤šé‡è¯•3æ¬¡
</code></pre>
<h2 data-id="heading-22">å…«ã€ç›‘æ§ä¸è¿ç»´</h2>
<h3 data-id="heading-23">å…³é”®æŒ‡æ ‡</h3>
<p>éœ€è¦å…³æ³¨çš„æŒ‡æ ‡ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    A[æ‰«æåˆ°æœŸä»»åŠ¡æ•°] --&gt; B[æ¯æ¬¡æ‰«æ100æ¡&lt;br/&gt;æ­£å¸¸]
    A --&gt; C[æŒç»­å¾ˆå¤š&lt;br/&gt;ç§¯å‹]
    
    D[SENDINGè¶…æ—¶æ•°] --&gt; E[å¶å°”å‡ ä¸ª&lt;br/&gt;æ­£å¸¸]
    D --&gt; F[å¤§é‡è¶…æ—¶&lt;br/&gt;æ‰§è¡Œå™¨å¼‚å¸¸]
    
    G[æœ€ç»ˆå¤±è´¥æ•°] --&gt; H[éœ€è¦äººå·¥&lt;br/&gt;ä»‹å…¥]
    
    style A fill:#87CEEB
    style B fill:#90EE90
    style C fill:#FF6B6B
    style D fill:#87CEEB
    style E fill:#90EE90
    style F fill:#FF6B6B
    style G fill:#FFB6C1
    style H fill:#FFE4B5
</code></pre>
<p>SQLæŸ¥è¯¢ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- æŸ¥è¯¢æœ€ç»ˆå¤±è´¥çš„ä»»åŠ¡ï¼ˆéœ€äººå·¥ä»‹å…¥ï¼‰</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> job_delay_task 
<span class="hljs-keyword">WHERE</span> status <span class="hljs-operator">=</span> <span class="hljs-string">'FAILED'</span> 
  <span class="hljs-keyword">AND</span> retry_count <span class="hljs-operator">&gt;=</span> max_retry
<span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> updated_at <span class="hljs-keyword">DESC</span>;

<span class="hljs-comment">-- æŸ¥è¯¢ç§¯å‹ä»»åŠ¡</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">COUNT</span>(<span class="hljs-operator">*</span>) <span class="hljs-keyword">FROM</span> job_delay_task 
<span class="hljs-keyword">WHERE</span> status <span class="hljs-keyword">IN</span> (<span class="hljs-string">'PENDING'</span>, <span class="hljs-string">'FAILED'</span>)
  <span class="hljs-keyword">AND</span> next_attempt_time <span class="hljs-operator">&lt;=</span> NOW();

<span class="hljs-comment">-- æŸ¥è¯¢ SENDING è¶…æ—¶ä»»åŠ¡</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">COUNT</span>(<span class="hljs-operator">*</span>) <span class="hljs-keyword">FROM</span> job_delay_task 
<span class="hljs-keyword">WHERE</span> status <span class="hljs-operator">=</span> <span class="hljs-string">'SENDING'</span>
  <span class="hljs-keyword">AND</span> TIMESTAMPDIFF(<span class="hljs-keyword">SECOND</span>, updated_at, NOW()) <span class="hljs-operator">&gt;</span> <span class="hljs-number">120</span>;
</code></pre>
<h3 data-id="heading-24">å¸¸è§é—®é¢˜</h3>
<p><strong>é—®é¢˜ä¸€ï¼šä»»åŠ¡ä¸æ‰§è¡Œ</strong></p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- 1. æŸ¥çœ‹ä»»åŠ¡çŠ¶æ€</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> job_delay_task <span class="hljs-keyword">WHERE</span> biz_uuid <span class="hljs-operator">=</span> <span class="hljs-string">'xxx'</span>;

<span class="hljs-comment">-- 2. æ£€æŸ¥æ˜¯å¦åˆ°æœŸ</span>
<span class="hljs-keyword">SELECT</span> next_attempt_time, NOW() <span class="hljs-keyword">FROM</span> job_delay_task <span class="hljs-keyword">WHERE</span> id <span class="hljs-operator">=</span> xxx;

<span class="hljs-comment">-- 3. æ£€æŸ¥é‡è¯•æ¬¡æ•°</span>
<span class="hljs-keyword">SELECT</span> retry_count, max_retry <span class="hljs-keyword">FROM</span> job_delay_task <span class="hljs-keyword">WHERE</span> id <span class="hljs-operator">=</span> xxx;
</code></pre>
<p>å¯èƒ½åŸå› ï¼š</p>
<ul>
<li><code>next_attempt_time</code> æœªåˆ°æœŸ</li>
<li><code>status = 'SENT'</code> å·²å®Œæˆ</li>
<li><code>retry_count &gt;= max_retry</code> å·²å¤±è´¥</li>
<li>è°ƒåº¦å™¨æœªå¯åŠ¨</li>
</ul>
<p><strong>é—®é¢˜äºŒï¼šä»»åŠ¡é‡å¤æ‰§è¡Œ</strong></p>
<p>æ£€æŸ¥æ˜¯å¦æœ‰é‡å¤çš„ bizUuidï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">SELECT</span> biz_uuid, <span class="hljs-built_in">COUNT</span>(<span class="hljs-operator">*</span>) <span class="hljs-keyword">FROM</span> job_delay_task 
<span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> biz_uuid 
<span class="hljs-keyword">HAVING</span> <span class="hljs-built_in">COUNT</span>(<span class="hljs-operator">*</span>) <span class="hljs-operator">&gt;</span> <span class="hljs-number">1</span>;
</code></pre>
<p>åŸå› ï¼š</p>
<ul>
<li>ä¸šåŠ¡æ–¹æœªæ­£ç¡®è®¾ç½®å”¯ä¸€çš„ <code>bizUuid</code></li>
<li>æ‰§è¡Œå™¨ Handler æœªå®ç°å¹‚ç­‰</li>
</ul>
<p>è§£å†³ï¼š</p>
<ul>
<li>ä½¿ç”¨ä¸šåŠ¡å”¯ä¸€IDä½œä¸º <code>bizUuid</code>ï¼ˆå¦‚ <code>order-timeout-{orderId}</code>ï¼‰</li>
<li>Handler å†…éƒ¨å¢åŠ å¹‚ç­‰åˆ¤æ–­</li>
</ul>
<h2 data-id="heading-25">ä¹ã€æœ€ä½³å®è·µ</h2>
<h3 data-id="heading-26">bizUuid è®¾è®¡</h3>
<p>æ¨èåšæ³•ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ä½¿ç”¨ä¸šåŠ¡å”¯ä¸€ID</span>
<span class="hljs-type">String</span> <span class="hljs-variable">bizUuid</span> <span class="hljs-operator">=</span> <span class="hljs-string">"order-timeout-"</span> + orderId;
<span class="hljs-type">String</span> <span class="hljs-variable">bizUuid</span> <span class="hljs-operator">=</span> <span class="hljs-string">"payment-remind-"</span> + userId + <span class="hljs-string">"-"</span> + paymentId;
</code></pre>
<p>ä¸æ¨èï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ä½¿ç”¨æ—¶é—´æˆ³ï¼ˆä¸å”¯ä¸€ï¼‰</span>
<span class="hljs-type">String</span> <span class="hljs-variable">bizUuid</span> <span class="hljs-operator">=</span> <span class="hljs-string">"task-"</span> + System.currentTimeMillis();

<span class="hljs-comment">// ä½¿ç”¨éšæœºUUIDï¼ˆæ— æ³•å¹‚ç­‰ï¼‰</span>
<span class="hljs-type">String</span> <span class="hljs-variable">bizUuid</span> <span class="hljs-operator">=</span> UUID.randomUUID().toString();
</code></pre>
<h3 data-id="heading-27">executeTime è®¾ç½®</h3>
<p>æ¨èåšæ³•ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// åŸºäºå½“å‰æ—¶é—´è®¡ç®—</span>
<span class="hljs-type">LocalDateTime</span> <span class="hljs-variable">executeTime</span> <span class="hljs-operator">=</span> LocalDateTime.now().plusMinutes(<span class="hljs-number">30</span>);

<span class="hljs-comment">// åŸºäºä¸šåŠ¡æ—¶é—´è®¡ç®—</span>
<span class="hljs-type">LocalDateTime</span> <span class="hljs-variable">executeTime</span> <span class="hljs-operator">=</span> order.getCreatedAt().plusMinutes(<span class="hljs-number">30</span>);
</code></pre>
<p>ä¸æ¨èï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// è¿‡å»çš„æ—¶é—´ï¼ˆä¼šç«‹å³æ‰§è¡Œï¼‰</span>
<span class="hljs-type">LocalDateTime</span> <span class="hljs-variable">executeTime</span> <span class="hljs-operator">=</span> LocalDateTime.now().minusMinutes(<span class="hljs-number">10</span>);
</code></pre>
<h3 data-id="heading-28">Payload è®¾è®¡</h3>
<p>æ¨èåšæ³•ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"orderId"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"12345"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"action"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"timeout-cancel"</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>ä¸æ¨èï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-comment">// åŒ…å«æ•æ„Ÿä¿¡æ¯</span>
<span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"orderId"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"12345"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"password"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"123456"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"bankCard"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"6222..."</span>
<span class="hljs-punctuation">}</span>

<span class="hljs-comment">// æ•°æ®è¿‡å¤§</span>
<span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"orderDetail"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"è¶…è¿‡1MBçš„JSON..."</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>å»ºè®®ï¼š</p>
<ul>
<li>Payload åªå­˜å¿…è¦çš„ä¸šåŠ¡æ ‡è¯†</li>
<li>æ‰§è¡Œå™¨å†…éƒ¨æŸ¥è¯¢å®Œæ•´æ•°æ®</li>
<li>é¿å…å­˜å‚¨æ•æ„Ÿä¿¡æ¯</li>
</ul>
<h2 data-id="heading-29">åã€æ€»ç»“</h2>
<p>JobFlow çš„å»¶æ—¶è°ƒåº¦é€šè¿‡ä»¥ä¸‹è®¾è®¡å®ç°äº†é«˜å¯ç”¨ã€é«˜æ€§èƒ½ï¼š</p>
<p><strong>æ ¸å¿ƒç‰¹æ€§ï¼š</strong></p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    A[æ— é”è°ƒåº¦&lt;br/&gt;Hash+CAS] --&gt; B[æ€§èƒ½å¥½&lt;br/&gt;æ— éœ€åˆ†å¸ƒå¼é”]
    C[è‡ªåŠ¨é‡è¯•&lt;br/&gt;æŒ‡æ•°é€€é¿] --&gt; D[å¯é æ€§é«˜&lt;br/&gt;æœ€å¤š3æ¬¡]
    E[å¹‚ç­‰ä¿éšœ&lt;br/&gt;bizUuid] --&gt; F[é˜²é‡å¤&lt;br/&gt;å”¯ä¸€çº¦æŸ]
    
    style A fill:#87CEEB
    style C fill:#FFE4B5
    style E fill:#FFB6C1
    style B fill:#90EE90
    style D fill:#90EE90
    style F fill:#90EE90
</code></pre>
<p><strong>é€‚ç”¨åœºæ™¯ï¼š</strong></p>
<ul>
<li>è®¢å•è¶…æ—¶å¤„ç†</li>
<li>å®šæ—¶æé†’é€šçŸ¥</li>
<li>å»¶è¿Ÿæ¶ˆæ¯å‘é€</li>
<li>å¼‚æ­¥å›è°ƒé‡è¯•</li>
</ul>
<p><strong>æ ¸å¿ƒä¼˜åŠ¿ï¼š</strong></p>
<ul>
<li>æ— éœ€é¢å¤–ä¸­é—´ä»¶ï¼ˆå¦‚ RabbitMQ å»¶è¿Ÿé˜Ÿåˆ—ï¼‰</li>
<li>å¤ç”¨ Nacos æœåŠ¡å‘ç°ï¼Œæ¶æ„ç®€æ´</li>
<li>åŸºäº MySQL å­˜å‚¨ï¼Œå¯é æ€§é«˜</li>
<li>åˆ†å¸ƒå¼è°ƒåº¦å™¨ï¼Œé«˜å¯ç”¨</li>
</ul>
<p><strong>å’Œå®šæ—¶ä»»åŠ¡çš„å…³ç³»ï¼š</strong></p>
<pre><code class="hljs language-diff" lang="diff">å®šæ—¶ä»»åŠ¡ï¼šå‘¨æœŸæ€§æ‰§è¡Œï¼Œé…ç½®å›ºå®š
å»¶æ—¶ä»»åŠ¡ï¼šä¸€æ¬¡æ€§æ‰§è¡Œï¼ŒåŠ¨æ€åˆ›å»º

ä¸¤è€…äº’è¡¥ï¼š
<span class="hljs-deletion">- å®šæ—¶ä»»åŠ¡å¤„ç†å‘¨æœŸæ€§ä¸šåŠ¡</span>
<span class="hljs-deletion">- å»¶æ—¶ä»»åŠ¡å¤„ç†äº‹ä»¶é©±åŠ¨çš„ä¸šåŠ¡</span>
</code></pre>
<p>JobFlow é€šè¿‡ç»Ÿä¸€çš„æ¶æ„ã€ç»Ÿä¸€çš„ traceIdã€ç»Ÿä¸€çš„æ‰§è¡Œå™¨æ¥å£ï¼ŒæŠŠè¿™ä¸¤ç§è°ƒåº¦éœ€æ±‚ä¼˜é›…åœ°æ•´åˆåœ¨ä¸€èµ·ã€‚</p>
<p>è¿™å°±æ˜¯ JobFlow å»¶æ—¶è°ƒåº¦çš„è®¾è®¡å’Œå®ç°ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€2025æœ€æ–°ã€‘Flutter åŠ è½½æ˜¾ç¤º Live2D è§’è‰²ï¼Œå®æˆ˜ä¸è¸©å‘å…¨é“¾è·¯åˆ†äº«]]></title>    <link>https://juejin.cn/post/7588124225702510632</link>    <guid>https://juejin.cn/post/7588124225702510632</guid>    <pubDate>2025-12-28T08:46:10.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588124225702510632" data-draft-id="7588095884070699008" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€2025æœ€æ–°ã€‘Flutter åŠ è½½æ˜¾ç¤º Live2D è§’è‰²ï¼Œå®æˆ˜ä¸è¸©å‘å…¨é“¾è·¯åˆ†äº«"/> <meta itemprop="keywords" content="Flutter,Android"/> <meta itemprop="datePublished" content="2025-12-28T08:46:10.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="åœ†å·æœ¬æ˜Š"/> <meta itemprop="url" content="https://juejin.cn/user/2647279732004807"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€2025æœ€æ–°ã€‘Flutter åŠ è½½æ˜¾ç¤º Live2D è§’è‰²ï¼Œå®æˆ˜ä¸è¸©å‘å…¨é“¾è·¯åˆ†äº«
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2647279732004807/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    åœ†å·æœ¬æ˜Š
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-28T08:46:10.000Z" title="Sun Dec 28 2025 08:46:10 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-28
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»15åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">ç‰¹åˆ«æ„Ÿè°¢ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FRealCoolSnow%2Flive2d-android" target="_blank" title="https://github.com/RealCoolSnow/live2d-android" ref="nofollow noopener noreferrer">RealCoolSnow/live2d-android</a> å¤§ä½¬çš„å¼€å…ƒåˆ†äº«</h3>
<ul>
<li>flutter åŠ è½½çš„ä»£ç æˆ‘å°±ä¸æ”¾ä¸Šæ¥äº†ï¼Œandroidèƒ½æ˜¾ç¤ºï¼Œflutterå°±èƒ½åŠ è½½ï¼Œè®©AIå†™å°±è¡Œï¼Œä¸‹é¢æˆ‘è¯´ä¸‹æ•´ä½“æ€è·¯</li>
<li>å¤§å®¶è®°å¾—ç‚¹èµå’Œç»™å¤§ä½¬starï¼Œä¸ç„¶äººå¼€æºåˆ†äº«å¯¹å¤§å®¶éƒ½ä¸åˆ©</li>
</ul>
<h2 data-id="heading-1">ç¬¬ä¸€ç« ï¼Œè¦åœ¨androidä¸Šé›†æˆlive2d</h2>
<h2 data-id="heading-2">Live2D SDK é›†æˆè¯´æ˜æ–‡æ¡£</h2>
<h3 data-id="heading-3">1. æ¦‚è¿°</h3>
<p>æœ¬æ–‡æ¡£è¯¦ç»†è¯´æ˜äº†åœ¨Android Flutteråº”ç”¨ä¸­å¦‚ä½•é›†æˆLive2D SDKï¼Œå®ç°ä»æ¨¡å‹åŠ è½½åˆ°æ˜¾ç¤ºçš„å®Œæ•´æµç¨‹ã€‚æ•´ä¸ªé›†æˆæ¶‰åŠJava/Kotlinå±‚ã€JNIå±‚å’ŒC++åŸç”Ÿå±‚çš„ååŒå·¥ä½œã€‚</p>
<h3 data-id="heading-4">2. æ¶æ„å±‚æ¬¡</h3>
<pre><code class="hljs language-scss" lang="scss">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Flutterå±‚ (Dart)                  â”‚
â”‚   - Live2DView Widget               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚ PlatformView
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Android Kotlinå±‚                  â”‚
â”‚   - Live2DPlatformView              â”‚
â”‚   - Live2D_v3 (Javaæ¥å£)            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚ JNIè°ƒç”¨
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   C++ JNIå±‚                         â”‚
â”‚   - lapp_model<span class="hljs-selector-class">.cpp</span> (JNIç»‘å®š)        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Live2D SDK C++å±‚                  â”‚
â”‚   - LAppModel (æ¨¡å‹ç®¡ç†)            â”‚
â”‚   - CubismRenderer (æ¸²æŸ“å™¨)         â”‚
â”‚   - CubismModel (æ¨¡å‹æ•°æ®)          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h3 data-id="heading-5">3. æ ¸å¿ƒç»„ä»¶è¯´æ˜</h3>
<h4 data-id="heading-6">3.1 Live2D_v3.java - Java/Kotlinæ¥å£å±‚</h4>
<p><strong>æ–‡ä»¶ä½ç½®</strong>: <code>android/app/src/main/kotlin/com/hornhuang/tomato_plan/Live2D_v3.java</code></p>
<p>è¿™æ˜¯Live2D SDKçš„Java/Kotlinæ¥å£ï¼Œæä¾›SDKåˆå§‹åŒ–å’Œæ¨¡å‹ç®¡ç†åŠŸèƒ½ã€‚</p>
<p><strong>å…³é”®ä»£ç </strong>:</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Live2D_v3</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">boolean</span> <span class="hljs-variable">initialized</span> <span class="hljs-operator">=</span> <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> Context context;

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">init</span><span class="hljs-params">(Context ctx)</span> {
        <span class="hljs-keyword">if</span> (!initialized) {
            context = ctx;
            Csm_CubismFramework.initialize();
            initialized = <span class="hljs-literal">true</span>;
        }
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">dispose</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">if</span> (initialized) {
            Csm_CubismFramework.dispose();
            initialized = <span class="hljs-literal">false</span>;
        }
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">clearBuffer</span><span class="hljs-params">(<span class="hljs-type">float</span> r, <span class="hljs-type">float</span> g, <span class="hljs-type">float</span> b, <span class="hljs-type">float</span> a)</span> {
        GLES20.glClearColor(r, g, b, a);
        GLES20.glClear(GLES20.GL_COLOR_BUFFER_BIT);
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LAppModel</span> {
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">long</span> nativeModel;

        <span class="hljs-keyword">public</span> <span class="hljs-title function_">LAppModel</span><span class="hljs-params">()</span> {
            nativeModel = createNativeModel();
        }

        <span class="hljs-keyword">private</span> <span class="hljs-keyword">native</span> <span class="hljs-type">long</span> <span class="hljs-title function_">createNativeModel</span><span class="hljs-params">()</span>;
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">native</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">destroyNativeModel</span><span class="hljs-params">(<span class="hljs-type">long</span> model)</span>;
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">native</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">loadModelJson</span><span class="hljs-params">(String fileName)</span>;
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">native</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">resize</span><span class="hljs-params">(<span class="hljs-type">int</span> ww, <span class="hljs-type">int</span> wh)</span>;
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">native</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">update</span><span class="hljs-params">()</span>;
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">native</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">draw</span><span class="hljs-params">()</span>;
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">native</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">startMotion</span><span class="hljs-params">(String group, <span class="hljs-type">int</span> no, <span class="hljs-type">int</span> priority,
            OnBeganMotionCallback onStart, OnFinishedMotionCallback onFinish)</span>;
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">native</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setExpression</span><span class="hljs-params">(String expressionID)</span>;
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">native</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setParameterValue</span><span class="hljs-params">(String id, <span class="hljs-type">float</span> value)</span>;
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">native</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setParameterValueByIndex</span><span class="hljs-params">(<span class="hljs-type">int</span> index, <span class="hljs-type">float</span> value)</span>;
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">native</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">addParameterValue</span><span class="hljs-params">(String id, <span class="hljs-type">float</span> value)</span>;
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">native</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">addParameterValueByIndex</span><span class="hljs-params">(<span class="hljs-type">int</span> index, <span class="hljs-type">float</span> value)</span>;
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">native</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setPartsOpacity</span><span class="hljs-params">(String id, <span class="hljs-type">float</span> opacity)</span>;
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">native</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setPartsOpacityByIndex</span><span class="hljs-params">(<span class="hljs-type">int</span> index, <span class="hljs-type">float</span> opacity)</span>;
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">native</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">hitTest</span><span class="hljs-params">(String hitAreaName, <span class="hljs-type">float</span> x, <span class="hljs-type">float</span> y)</span>;
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">native</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setDragging</span><span class="hljs-params">(<span class="hljs-type">float</span> x, <span class="hljs-type">float</span> y)</span>;
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">native</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setAcceleration</span><span class="hljs-params">(<span class="hljs-type">float</span> x, <span class="hljs-type">float</span> y, <span class="hljs-type">float</span> z)</span>;
    }
}
</code></pre>
<h4 data-id="heading-7">3.2 lapp_model.cpp - JNIç»‘å®šå±‚</h4>
<p><strong>æ–‡ä»¶ä½ç½®</strong>: <code>android/app/src/main/cpp/lapp_model.cpp</code></p>
<p>è´Ÿè´£å°†Java/Kotlinæ–¹æ³•è°ƒç”¨è½¬æ¢ä¸ºC++å‡½æ•°è°ƒç”¨ï¼Œå®ç°è·¨è¯­è¨€äº¤äº’ã€‚</p>
<p><strong>å…³é”®ä»£ç </strong>:</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">extern</span> <span class="hljs-string">"C"</span> <span class="hljs-function">JNIEXPORT jlong JNICALL
<span class="hljs-title">Java_com_hornhuang_tomato_1plan_Live2D_1v3_00024LAppModel_createNativeModel</span><span class="hljs-params">(JNIEnv *, jobject)</span> </span>{
    <span class="hljs-keyword">auto</span> *model = <span class="hljs-keyword">new</span> <span class="hljs-built_in">LAppModel</span>();
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">reinterpret_cast</span>&lt;<span class="hljs-type">long</span>&gt;(model);
}

<span class="hljs-keyword">extern</span> <span class="hljs-string">"C"</span> <span class="hljs-function">JNIEXPORT <span class="hljs-type">void</span> JNICALL
<span class="hljs-title">Java_com_hornhuang_tomato_1plan_Live2D_1v3_00024LAppModel_loadModelJson</span><span class="hljs-params">(JNIEnv *env, jobject thiz,
                                                           jstring file_name)</span> </span>{
    <span class="hljs-type">const</span> <span class="hljs-type">char</span> *json_file = env-&gt;<span class="hljs-built_in">GetStringUTFChars</span>(file_name, <span class="hljs-literal">nullptr</span>);
    <span class="hljs-built_in">getModel</span>(env, thiz)-&gt;<span class="hljs-built_in">LoadAssets</span>(json_file);
    env-&gt;<span class="hljs-built_in">ReleaseStringUTFChars</span>(file_name, json_file);
}

<span class="hljs-keyword">extern</span> <span class="hljs-string">"C"</span> <span class="hljs-function">JNIEXPORT <span class="hljs-type">void</span> JNICALL
<span class="hljs-title">Java_com_hornhuang_tomato_1plan_Live2D_1v3_00024LAppModel_resize</span><span class="hljs-params">(JNIEnv *env, jobject thiz,
                                                    jint ww, jint wh)</span> </span>{
    <span class="hljs-built_in">getModel</span>(env, thiz)-&gt;<span class="hljs-built_in">Resize</span>(ww, wh);
}

<span class="hljs-keyword">extern</span> <span class="hljs-string">"C"</span> <span class="hljs-function">JNIEXPORT <span class="hljs-type">void</span> JNICALL
<span class="hljs-title">Java_com_hornhuang_tomato_1plan_Live2D_1v3_00024LAppModel_update</span><span class="hljs-params">(JNIEnv *env, jobject thiz)</span> </span>{
    <span class="hljs-built_in">getModel</span>(env, thiz)-&gt;<span class="hljs-built_in">Update</span>();
}

<span class="hljs-keyword">extern</span> <span class="hljs-string">"C"</span> <span class="hljs-function">JNIEXPORT <span class="hljs-type">void</span> JNICALL
<span class="hljs-title">Java_com_hornhuang_tomato_1plan_Live2D_1v3_00024LAppModel_draw</span><span class="hljs-params">(JNIEnv *env, jobject thiz)</span> </span>{
    <span class="hljs-built_in">getModel</span>(env, thiz)-&gt;<span class="hljs-built_in">Draw</span>();
}
</code></pre>
<h4 data-id="heading-8">3.3 LAppModel.cpp - æ¨¡å‹ç®¡ç†æ ¸å¿ƒ</h4>
<p><strong>æ–‡ä»¶ä½ç½®</strong>: <code>android/app/src/main/cpp/Main/src/LAppModel.cpp</code></p>
<p>å®ç°Live2Dæ¨¡å‹çš„åŠ è½½ã€æ›´æ–°ã€æ¸²æŸ“å’Œäº¤äº’å¤„ç†ã€‚</p>
<p><strong>å…³é”®ä»£ç </strong>:</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">LAppModel::LoadAssets</span><span class="hljs-params">(<span class="hljs-type">const</span> Csm::csmChar* fileName)</span> </span>{
    <span class="hljs-comment">// è§£ææ¨¡å‹æ–‡ä»¶è·¯å¾„</span>
    std::filesystem::path p = std::filesystem::<span class="hljs-built_in">u8path</span>(fileName);
    _modelHomeDir = p.<span class="hljs-built_in">parent_path</span>().<span class="hljs-built_in">u8string</span>().<span class="hljs-built_in">c_str</span>();
    
    <span class="hljs-comment">// è¯»å–å¹¶è§£æ.model3.jsonæ–‡ä»¶</span>
    Csm::csmSizeInt size;
    Csm::csmByte* buffer = <span class="hljs-built_in">CreateBuffer</span>(fileName, &amp;size);
    _modelSetting = Csm::Model::CubismModelSettingJson::<span class="hljs-built_in">Create</span>(buffer, size);
    <span class="hljs-built_in">DeleteBuffer</span>(buffer, fileName);
    
    <span class="hljs-comment">// è®¾ç½®æ¨¡å‹</span>
    <span class="hljs-built_in">SetupModel</span>(_modelSetting);
    
    <span class="hljs-comment">// è®¾ç½®çº¹ç†</span>
    <span class="hljs-built_in">SetupTextures</span>();
    
    <span class="hljs-comment">// é¢„åŠ è½½åŠ¨ä½œ</span>
    <span class="hljs-built_in">PreloadMotionGroup</span>(MotionGroupIdle);
}

<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">LAppModel::SetupModel</span><span class="hljs-params">(Csm::Model::ICubismModelSetting* setting)</span> </span>{
    <span class="hljs-comment">// ä»æ¨¡å‹è®¾ç½®ä¸­åŠ è½½æ¨¡å‹æ•°æ®</span>
    _modelJson = setting-&gt;<span class="hljs-built_in">GetModelFileName</span>();
    std::string modelPath = _modelHomeDir + <span class="hljs-string">"/"</span> + _modelJson;
    
    Csm::csmSizeInt size;
    Csm::csmByte* buffer = <span class="hljs-built_in">CreateBuffer</span>(modelPath.<span class="hljs-built_in">c_str</span>(), &amp;size);
    <span class="hljs-built_in">LoadModel</span>(buffer, size);
    <span class="hljs-built_in">DeleteBuffer</span>(buffer, modelPath.<span class="hljs-built_in">c_str</span>());
    
    <span class="hljs-comment">// è®¾ç½®æ¨¡å‹å‚æ•°</span>
    _model-&gt;<span class="hljs-built_in">SaveParameters</span>();
    
    <span class="hljs-comment">// åˆ›å»ºæ¸²æŸ“å™¨</span>
    _renderer = <span class="hljs-keyword">new</span> Csm::Rendering::<span class="hljs-built_in">CubismRenderer_OpenGLES2</span>();
    _renderer-&gt;<span class="hljs-built_in">Initialize</span>(_model);
}

<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">LAppModel::Update</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-type">const</span> Csm::csmFloat32 deltaTimeSeconds = LAppPal::<span class="hljs-built_in">GetDeltaTime</span>();
    _userTimeSeconds += deltaTimeSeconds;
    
    <span class="hljs-comment">// æ›´æ–°åŠ¨ä½œ</span>
    _motionManager-&gt;<span class="hljs-built_in">UpdateMotion</span>(_model, deltaTimeSeconds);
    
    <span class="hljs-comment">// æ›´æ–°æ¨¡å‹å‚æ•°</span>
    _model-&gt;<span class="hljs-built_in">Update</span>();
}

<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">LAppModel::Draw</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-comment">// è®¾ç½®æŠ•å½±çŸ©é˜µ</span>
    Csm::CubismMatrix44 projection;
    projection.<span class="hljs-built_in">Scale</span>(<span class="hljs-number">1.0f</span>, <span class="hljs-number">1.0f</span>);
    _renderer-&gt;<span class="hljs-built_in">SetMvpMatrix</span>(&amp;projection);
    
    <span class="hljs-comment">// æ¸²æŸ“æ¨¡å‹</span>
    _renderer-&gt;<span class="hljs-built_in">DrawModel</span>();
}
</code></pre>
<h4 data-id="heading-9">3.4 Live2DPlatformView.kt - Flutterå¹³å°è§†å›¾</h4>
<p><strong>æ–‡ä»¶ä½ç½®</strong>: <code>android/app/src/main/kotlin/com/hornhuang/tomato_plan/Live2DPlatformView.kt</code></p>
<p>å®ç°Flutterçš„PlatformViewï¼Œåœ¨Flutterä¸­åµŒå…¥Live2Dæ¸²æŸ“ã€‚</p>
<p><strong>å…³é”®ä»£ç </strong>:</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Live2DPlatformView</span>(context: Context, id: <span class="hljs-built_in">Int</span>, creationParams: Map&lt;String, Any&gt;?)
    : PlatformView {
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> glSurfaceView = GLSurfaceView(context)
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> renderer = Live2DRenderer(context)
    
    <span class="hljs-keyword">init</span> {
        glSurfaceView.setEGLContextClientVersion(<span class="hljs-number">2</span>)
        glSurfaceView.setRenderer(renderer)
        glSurfaceView.renderMode = GLSurfaceView.RENDERMODE_CONTINUOUSLY
    }
    
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getView</span><span class="hljs-params">()</span></span>: View = glSurfaceView
    
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">dispose</span><span class="hljs-params">()</span></span> {
        <span class="hljs-comment">// æ¸…ç†èµ„æº</span>
    }
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Live2DRenderer</span>(<span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> context: Context) : GLSurfaceView.Renderer {
    <span class="hljs-keyword">lateinit</span> <span class="hljs-keyword">var</span> model: LAppModel

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onSurfaceCreated</span><span class="hljs-params">(gl: <span class="hljs-type">GL10</span>?, config: <span class="hljs-type">EGLConfig</span>?)</span></span> {
        <span class="hljs-comment">// åˆå§‹åŒ–Live2D SDK</span>
        Live2D_v3.<span class="hljs-keyword">init</span>(context)
        
        <span class="hljs-comment">// åˆ›å»ºæ¨¡å‹å®ä¾‹</span>
        model = LAppModel().apply {
            <span class="hljs-comment">// åŠ è½½æ¨¡å‹æ–‡ä»¶</span>
            loadModelJson(<span class="hljs-string">"assets://mianfeimox/llny.model3.json"</span>)
        }
    }

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onSurfaceChanged</span><span class="hljs-params">(gl: <span class="hljs-type">GL10</span>?, width: <span class="hljs-type">Int</span>, height: <span class="hljs-type">Int</span>)</span></span> {
        <span class="hljs-comment">// è°ƒæ•´æ¨¡å‹å°ºå¯¸</span>
        model.resize(width, height)
    }

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onDrawFrame</span><span class="hljs-params">(gl: <span class="hljs-type">GL10</span>?)</span></span> {
        <span class="hljs-comment">// æ¸…ç©ºç¼“å†²åŒº</span>
        Live2D_v3.clearBuffer(<span class="hljs-number">0f</span>, <span class="hljs-number">1f</span>, <span class="hljs-number">0f</span>, <span class="hljs-number">0f</span>)
        
        <span class="hljs-comment">// æ›´æ–°æ¨¡å‹çŠ¶æ€</span>
        model.update()
        
        <span class="hljs-comment">// è®¾ç½®å‚æ•°ï¼ˆä¾‹å¦‚çœ¨çœ¼ï¼‰</span>
        model.setParameterValue(<span class="hljs-string">"Param14"</span>, <span class="hljs-number">1f</span>)
        
        <span class="hljs-comment">// ç»˜åˆ¶æ¨¡å‹</span>
        model.draw()
    }
}
</code></pre>
<h3 data-id="heading-10">4. å®Œæ•´æµç¨‹è¯´æ˜</h3>
<h4 data-id="heading-11">4.1 åˆå§‹åŒ–æµç¨‹</h4>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-bullet">1.</span> Flutterå¯åŠ¨
   â†“
<span class="hljs-bullet">2.</span> åˆ›å»ºLive2DPlatformView
   â†“
<span class="hljs-bullet">3.</span> GLSurfaceViewåˆ›å»ºOpenGL ES 2.0ä¸Šä¸‹æ–‡
   â†“
<span class="hljs-bullet">4.</span> onSurfaceCreatedå›è°ƒè§¦å‘
   â†“
<span class="hljs-bullet">5.</span> è°ƒç”¨Live2D<span class="hljs-emphasis">_v3.init(context)
   â†“
6. Csm_</span>CubismFramework.initialize() åˆå§‹åŒ–Live2Dæ¡†æ¶
   â†“
<span class="hljs-bullet">7.</span> åˆ›å»ºLAppModelå®ä¾‹
   â†“
<span class="hljs-bullet">8.</span> è°ƒç”¨loadModelJsonåŠ è½½æ¨¡å‹
</code></pre>
<h4 data-id="heading-12">4.2 æ¨¡å‹åŠ è½½æµç¨‹</h4>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-bullet">1.</span> loadModelJson("assets://mianfeimox/llny.model3.json")
   â†“
<span class="hljs-bullet">2.</span> JNIè°ƒç”¨: Java<span class="hljs-emphasis">_com_</span>hornhuang<span class="hljs-emphasis">_tomato_</span>1plan<span class="hljs-emphasis">_Live2D_</span>1v3<span class="hljs-emphasis">_00024LAppModel_</span>loadModelJson
   â†“
<span class="hljs-bullet">3.</span> LAppModel::LoadAssets(fileName)
   â†“
<span class="hljs-bullet">4.</span> è¯»å–.model3.jsonæ–‡ä»¶
   â†“
<span class="hljs-bullet">5.</span> è§£æJSONè·å–æ¨¡å‹æ–‡ä»¶è·¯å¾„ã€çº¹ç†ã€åŠ¨ä½œç­‰ä¿¡æ¯
   â†“
<span class="hljs-bullet">6.</span> SetupModel() - åŠ è½½.moc3æ¨¡å‹æ–‡ä»¶
   â†“
<span class="hljs-bullet">7.</span> SetupTextures() - åŠ è½½çº¹ç†å›¾ç‰‡
   â†“
<span class="hljs-bullet">8.</span> PreloadMotionGroup() - é¢„åŠ è½½åŠ¨ä½œæ–‡ä»¶
   â†“
<span class="hljs-bullet">9.</span> åˆ›å»ºCubismRendererå¹¶åˆå§‹åŒ–
</code></pre>
<h4 data-id="heading-13">4.3 æ¸²æŸ“å¾ªç¯æµç¨‹</h4>
<pre><code class="hljs language-markdown" lang="markdown">æ¯ä¸€å¸§:
<span class="hljs-bullet">1.</span> onDrawFrameå›è°ƒè§¦å‘
   â†“
<span class="hljs-bullet">2.</span> glClearæ¸…ç©ºé¢œè‰²ç¼“å†²åŒº
   â†“
<span class="hljs-bullet">3.</span> model.update()
   â†“
<span class="hljs-bullet">4.</span> <span class="hljs-emphasis">_motionManager-&gt;UpdateMotion() - æ›´æ–°åŠ¨ä½œçŠ¶æ€
   â†“
5. _</span>model-&gt;Update() - æ›´æ–°æ¨¡å‹å‚æ•°
   â†“
<span class="hljs-bullet">6.</span> model.draw()
   â†“
<span class="hljs-bullet">7.</span> è®¾ç½®æŠ•å½±çŸ©é˜µ
   â†“
<span class="hljs-bullet">8.</span> <span class="hljs-emphasis">_renderer-&gt;DrawModel() - æ¸²æŸ“æ¨¡å‹
   â†“
9. OpenGLç»˜åˆ¶åˆ°å±å¹•
</span></code></pre>
<h4 data-id="heading-14">4.4 äº¤äº’å¤„ç†æµç¨‹</h4>
<pre><code class="hljs language-markdown" lang="markdown">ç”¨æˆ·è§¦æ‘¸:
<span class="hljs-bullet">1.</span> è§¦æ‘¸äº‹ä»¶ä¼ é€’åˆ°Live2DPlatformView
   â†“
<span class="hljs-bullet">2.</span> è®¡ç®—è§¦æ‘¸åæ ‡
   â†“
<span class="hljs-bullet">3.</span> model.hitTest(hitAreaName, x, y)
   â†“
<span class="hljs-bullet">4.</span> æ£€æµ‹æ˜¯å¦å‡»ä¸­å¯äº¤äº’åŒºåŸŸ
   â†“
<span class="hljs-bullet">5.</span> å¦‚æœå‡»ä¸­ï¼Œè§¦å‘ç›¸åº”åŠ¨ä½œ:
<span class="hljs-bullet">   -</span> model.startMotion() - æ’­æ”¾åŠ¨ä½œ
<span class="hljs-bullet">   -</span> model.setExpression() - è®¾ç½®è¡¨æƒ…
<span class="hljs-bullet">   -</span> model.setParameterValue() - è®¾ç½®å‚æ•°
</code></pre>
<h3 data-id="heading-15">5. å…³é”®æŠ€æœ¯ç‚¹</h3>
<h4 data-id="heading-16">5.1 OpenGLä¸Šä¸‹æ–‡ç®¡ç†</h4>
<p>æ¯ä¸ªOpenGLä¸Šä¸‹æ–‡éœ€è¦ç‹¬ç«‹åˆå§‹åŒ–Live2D SDKï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onSurfaceCreated</span><span class="hljs-params">(gl: <span class="hljs-type">GL10</span>?, config: <span class="hljs-type">EGLConfig</span>?)</span></span> {
    <span class="hljs-comment">// æ¯ä¸ªOpenGLä¸Šä¸‹æ–‡éƒ½éœ€è¦å•ç‹¬åˆå§‹åŒ–</span>
    Live2D_v3.<span class="hljs-keyword">init</span>(context)
    model = LAppModel()
}
</code></pre>
<h4 data-id="heading-17">5.2 èµ„æºè·¯å¾„å¤„ç†</h4>
<p>Android assetsè·¯å¾„éœ€è¦è½¬æ¢ä¸ºC++å¯è®¿é—®çš„è·¯å¾„ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">LAppModel::LoadAssets</span><span class="hljs-params">(<span class="hljs-type">const</span> Csm::csmChar* fileName)</span> </span>{
    <span class="hljs-comment">// assets://è·¯å¾„è½¬æ¢ä¸ºå®é™…æ–‡ä»¶è·¯å¾„</span>
    std::filesystem::path p = std::filesystem::<span class="hljs-built_in">u8path</span>(fileName);
    _modelHomeDir = p.<span class="hljs-built_in">parent_path</span>().<span class="hljs-built_in">u8string</span>().<span class="hljs-built_in">c_str</span>();
}
</code></pre>
<h4 data-id="heading-18">5.3 åŠ¨ä½œç®¡ç†</h4>
<p>åŠ¨ä½œé€šè¿‡ä¼˜å…ˆçº§ç³»ç»Ÿç®¡ç†ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">LAppModel::StartMotion</span><span class="hljs-params">(<span class="hljs-type">const</span> Csm::csmChar* group, Csm::csmInt32 no,
                            Csm::csmInt32 priority,
                            Csm::FinishedMotionCallback onFinishedMotionHandler)</span> </span>{
    <span class="hljs-keyword">if</span> (priority == _priority) {
        _motionManager-&gt;<span class="hljs-built_in">SetReservePriority</span>(priority);
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (priority &lt; _motionManager-&gt;<span class="hljs-built_in">GetReservePriority</span>()) {
        <span class="hljs-keyword">return</span>;
    }
    
    _motionManager-&gt;<span class="hljs-built_in">StartMotionPriority</span>(
        _model,
        group,
        no,
        priority,
        onFinishedMotionHandler
    );
}
</code></pre>
<h4 data-id="heading-19">5.4 å‚æ•°æ§åˆ¶</h4>
<p>Live2Dæ¨¡å‹å‚æ•°å®æ—¶æ§åˆ¶ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// è®¾ç½®å‚æ•°å€¼</span>
model.setParameterValue(<span class="hljs-string">"ParamEyeLOpen"</span>, <span class="hljs-number">0.5f</span>)

<span class="hljs-comment">// å¢åŠ å‚æ•°å€¼</span>
model.addParameterValue(<span class="hljs-string">"ParamAngleX"</span>, <span class="hljs-number">0.1f</span>)

<span class="hljs-comment">// è®¾ç½®éƒ¨ä»¶é€æ˜åº¦</span>
model.setPartsOpacity(<span class="hljs-string">"PartArmL"</span>, <span class="hljs-number">0.8f</span>)
</code></pre>
<h3 data-id="heading-20">6. å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ</h3>
<h4 data-id="heading-21">6.1 OpenGLä¸Šä¸‹æ–‡é”™è¯¯</h4>
<p><strong>é—®é¢˜</strong>: GL_INVALID_VALUE (0x501)é”™è¯¯</p>
<p><strong>åŸå› </strong>: åœ¨ä¸åŒçš„OpenGLä¸Šä¸‹æ–‡ä¸­ä½¿ç”¨åŒä¸€ä¸ªLive2Då®ä¾‹</p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>: æ¯ä¸ªOpenGLä¸Šä¸‹æ–‡ç‹¬ç«‹åˆå§‹åŒ–Live2D SDKå’Œæ¨¡å‹å®ä¾‹</p>
<h4 data-id="heading-22">6.2 æ¨¡å‹åŠ è½½å¤±è´¥</h4>
<p><strong>é—®é¢˜</strong>: æ¨¡å‹æ— æ³•æ˜¾ç¤ºæˆ–å´©æºƒ</p>
<p><strong>æ£€æŸ¥é¡¹</strong>:</p>
<ul>
<li>æ¨¡å‹æ–‡ä»¶è·¯å¾„æ˜¯å¦æ­£ç¡®</li>
<li>.model3.jsonæ–‡ä»¶æ ¼å¼æ˜¯å¦æ­£ç¡®</li>
<li>çº¹ç†æ–‡ä»¶æ˜¯å¦å­˜åœ¨</li>
<li>åŠ¨ä½œæ–‡ä»¶æ˜¯å¦å®Œæ•´</li>
</ul>
<h4 data-id="heading-23">6.3 æ€§èƒ½ä¼˜åŒ–</h4>
<p><strong>å»ºè®®</strong>:</p>
<ul>
<li>ä½¿ç”¨RENDERMODE_WHEN_DIRTYè€ŒéRENDERMODE_CONTINUOUSLY</li>
<li>é¢„åŠ è½½å¸¸ç”¨åŠ¨ä½œ</li>
<li>åˆç†è®¾ç½®åŠ¨ä½œä¼˜å…ˆçº§</li>
<li>é¿å…é¢‘ç¹åˆ›å»ºé”€æ¯æ¨¡å‹å®ä¾‹</li>
</ul>
<h3 data-id="heading-24">7. æ–‡ä»¶ç»“æ„</h3>
<pre><code class="hljs language-bash" lang="bash">android/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ main/
â”‚   â”‚   â”‚   â”œâ”€â”€ kotlin/com/hornhuang/tomato_plan/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Live2D_v3.java          <span class="hljs-comment"># Java/Kotlinæ¥å£</span>
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Live2DPlatformView.kt    <span class="hljs-comment"># Flutterå¹³å°è§†å›¾</span>
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ MainActivity.kt         <span class="hljs-comment"># ä¸»Activity</span>
â”‚   â”‚   â”‚   â”œâ”€â”€ cpp/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ lapp_model.cpp          <span class="hljs-comment"># JNIç»‘å®š</span>
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ live2d.cpp              <span class="hljs-comment"># Live2Dåˆå§‹åŒ–</span>
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ Main/src/
â”‚   â”‚   â”‚   â”‚       â””â”€â”€ LAppModel.cpp       <span class="hljs-comment"># æ¨¡å‹ç®¡ç†</span>
â”‚   â”‚   â”‚   â””â”€â”€ assets/
â”‚   â”‚   â”‚       â””â”€â”€ mianfeimox/             <span class="hljs-comment"># Live2Dæ¨¡å‹èµ„æº</span>
â”‚   â”‚   â”‚           â”œâ”€â”€ llny.model3.json
â”‚   â”‚   â”‚           â”œâ”€â”€ llny.moc3
â”‚   â”‚   â”‚           â”œâ”€â”€ textures/
â”‚   â”‚   â”‚           â””â”€â”€ motions/
</code></pre>
<h3 data-id="heading-25">8. æ‰©å±•åŠŸèƒ½</h3>
<h4 data-id="heading-26">8.1 æ·»åŠ äº¤äº’äº‹ä»¶</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onTouchEvent</span><span class="hljs-params">(event: <span class="hljs-type">MotionEvent</span>)</span></span>: <span class="hljs-built_in">Boolean</span> {
    <span class="hljs-keyword">when</span> (event.action) {
        MotionEvent.ACTION_DOWN -&gt; {
            model.hitTest(<span class="hljs-string">"Head"</span>, event.x, event.y)
        }
        MotionEvent.ACTION_MOVE -&gt; {
            model.setDragging(event.x, event.y)
        }
        MotionEvent.ACTION_UP -&gt; {
            model.setDragging(<span class="hljs-number">0f</span>, <span class="hljs-number">0f</span>)
        }
    }
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>
}
</code></pre>
<h4 data-id="heading-27">8.2 æ’­æ”¾åŠ¨ä½œ</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// æ’­æ”¾æŒ‡å®šåŠ¨ä½œ</span>
model.startMotion(<span class="hljs-string">"TapBody"</span>, <span class="hljs-number">0</span>, <span class="hljs-number">3</span>, 
    { group, no -&gt; println(<span class="hljs-string">"åŠ¨ä½œå¼€å§‹: <span class="hljs-variable">$group</span>, <span class="hljs-variable">$no</span>"</span>) },
    { self -&gt; println(<span class="hljs-string">"åŠ¨ä½œç»“æŸ"</span>) }
)

<span class="hljs-comment">// è®¾ç½®è¡¨æƒ…</span>
model.setExpression(<span class="hljs-string">"f01"</span>)
</code></pre>
<h4 data-id="heading-28">8.3 ç‰©ç†æ¨¡æ‹Ÿ</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// è®¾ç½®åŠ é€Ÿåº¦ï¼ˆç”¨äºç‰©ç†æ¨¡æ‹Ÿï¼‰</span>
model.setAcceleration(<span class="hljs-number">0.5f</span>, <span class="hljs-number">0.0f</span>, <span class="hljs-number">0.0f</span>)
</code></pre>
<h3 data-id="heading-29">9. æ€»ç»“</h3>
<p>Live2D SDKåœ¨Android Flutteråº”ç”¨ä¸­çš„é›†æˆæ¶‰åŠå¤šä¸ªå±‚æ¬¡çš„åä½œï¼š</p>
<ol>
<li><strong>Flutterå±‚</strong>: é€šè¿‡PlatformViewåµŒå…¥åŸç”Ÿè§†å›¾</li>
<li><strong>Java/Kotlinå±‚</strong>: æä¾›Live2D SDKçš„æ¥å£å°è£…</li>
<li><strong>JNIå±‚</strong>: å®ç°Javaä¸C++çš„è·¨è¯­è¨€è°ƒç”¨</li>
<li><strong>C++å±‚</strong>: å®ç°Live2Dæ¨¡å‹çš„æ ¸å¿ƒåŠŸèƒ½</li>
</ol>
<p>å…³é”®è¦ç‚¹ï¼š</p>
<ul>
<li>æ¯ä¸ªOpenGLä¸Šä¸‹æ–‡éœ€è¦ç‹¬ç«‹åˆå§‹åŒ–Live2D SDK</li>
<li>æ¨¡å‹åŠ è½½éµå¾ª: JSONè§£æ â†’ èµ„æºåŠ è½½ â†’ æ¸²æŸ“å™¨åˆå§‹åŒ–</li>
<li>æ¸²æŸ“å¾ªç¯: æ›´æ–°åŠ¨ä½œ â†’ æ›´æ–°æ¨¡å‹ â†’ ç»˜åˆ¶</li>
<li>äº¤äº’é€šè¿‡å‚æ•°æ§åˆ¶å’ŒåŠ¨ä½œæ’­æ”¾å®ç°</li>
</ul>
<p>é€šè¿‡åˆç†ç®¡ç†OpenGLä¸Šä¸‹æ–‡å’Œèµ„æºç”Ÿå‘½å‘¨æœŸï¼Œå¯ä»¥å®ç°ç¨³å®šé«˜æ•ˆçš„Live2Dæ¨¡å‹æ¸²æŸ“æ•ˆæœã€‚</p>
<h2 data-id="heading-30">ç¬¬äºŒç«  Flutterä¾§çš„æ¸²æŸ“ä¸å±•ç¤º</h2>
<h2 data-id="heading-31">Flutterè°ƒç”¨Android Nativeç»„ä»¶å±•ç¤ºLive2D - é—®é¢˜è§£å†³æ€»ç»“</h2>
<h3 data-id="heading-32">1. Flutterè°ƒç”¨Android Nativeç»„ä»¶å±•ç¤ºLive2Dçš„å®Œæ•´æµç¨‹</h3>
<h4 data-id="heading-33">1.1 æ•´ä½“æ¶æ„</h4>
<pre><code class="hljs language-markdown" lang="markdown">Flutterå±‚ (Dart)
<span class="hljs-code">    â†“ PlatformView
Android Kotlinå±‚
    â†“ JNIè°ƒç”¨
C++ Nativeå±‚
    â†“ Live2D SDK
OpenGL ESæ¸²æŸ“
</span></code></pre>
<h4 data-id="heading-34">1.2 è¯¦ç»†è°ƒç”¨é“¾è·¯</h4>
<h5 data-id="heading-35">ç¬¬ä¸€æ­¥ï¼šFlutterç«¯åˆ›å»ºPlatformView</h5>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">// åœ¨Flutterä»£ç ä¸­åˆ›å»ºLive2DView</span>
AndroidView(
  viewType: <span class="hljs-string">'com.hornhuang.tomato_plan/live2d_view'</span>,
  creationParams: &lt;<span class="hljs-built_in">String</span>, <span class="hljs-built_in">dynamic</span>&gt;{},
  creationParamsCodec: <span class="hljs-keyword">const</span> StandardMessageCodec(),
)
</code></pre>
<h5 data-id="heading-36">ç¬¬äºŒæ­¥ï¼šMainActivityæ³¨å†ŒPlatformView</h5>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// MainActivity.kt</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">MainActivity</span>: <span class="hljs-type">FlutterActivity</span>() {
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">configureFlutterEngine</span><span class="hljs-params">(flutterEngine: <span class="hljs-type">FlutterEngine</span>)</span></span> {
        <span class="hljs-keyword">super</span>.configureFlutterEngine(flutterEngine)
        flutterEngine
            .platformViewsController
            .registry
            .registerViewFactory(
                <span class="hljs-string">"com.hornhuang.tomato_plan/live2d_view"</span>,
                Live2DPlatformViewFactory()
            )
    }
}
</code></pre>
<h5 data-id="heading-37">ç¬¬ä¸‰æ­¥ï¼šLive2DPlatformViewFactoryåˆ›å»ºPlatformView</h5>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Live2DPlatformViewFactory</span> : <span class="hljs-type">PlatformViewFactory</span>(StandardMessageCodec.INSTANCE) {
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">create</span><span class="hljs-params">(context: <span class="hljs-type">Context</span>, viewId: <span class="hljs-type">Int</span>, args: <span class="hljs-type">Any</span>?)</span></span>: PlatformView {
        <span class="hljs-keyword">return</span> Live2DPlatformView(context, viewId, args <span class="hljs-keyword">as</span> Map&lt;String, Any&gt;?)
    }
}
</code></pre>
<h5 data-id="heading-38">ç¬¬å››æ­¥ï¼šLive2DPlatformViewåˆ›å»ºGLSurfaceViewå’Œæ¸²æŸ“å™¨</h5>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Live2DPlatformView</span>(context: Context, id: <span class="hljs-built_in">Int</span>, creationParams: Map&lt;String, Any&gt;?)
    : PlatformView {
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> glSurfaceView = GLSurfaceView(context)
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> renderer = Live2DRenderer(context)
    
    <span class="hljs-keyword">init</span> {
        glSurfaceView.setEGLContextClientVersion(<span class="hljs-number">2</span>)
        glSurfaceView.setRenderer(renderer)
        glSurfaceView.renderMode = GLSurfaceView.RENDERMODE_CONTINUOUSLY
    }
    
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getView</span><span class="hljs-params">()</span></span>: View = glSurfaceView
}
</code></pre>
<h5 data-id="heading-39">ç¬¬äº”æ­¥ï¼šLive2DRendereråˆå§‹åŒ–Live2D SDK</h5>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Live2DRenderer</span>(<span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> context: Context) : GLSurfaceView.Renderer {
    <span class="hljs-keyword">lateinit</span> <span class="hljs-keyword">var</span> model: LAppModel

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onSurfaceCreated</span><span class="hljs-params">(gl: <span class="hljs-type">GL10</span>?, config: <span class="hljs-type">EGLConfig</span>?)</span></span> {
        <span class="hljs-comment">// åˆå§‹åŒ–Live2D SDK</span>
        Live2D_v3.<span class="hljs-keyword">init</span>(context)
        
        <span class="hljs-comment">// åˆ›å»ºæ¨¡å‹å®ä¾‹</span>
        model = LAppModel().apply {
            loadModelJson(<span class="hljs-string">"assets://mianfeimox/llny.model3.json"</span>)
        }
    }

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onSurfaceChanged</span><span class="hljs-params">(gl: <span class="hljs-type">GL10</span>?, width: <span class="hljs-type">Int</span>, height: <span class="hljs-type">Int</span>)</span></span> {
        model.resize(width, height)
    }

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onDrawFrame</span><span class="hljs-params">(gl: <span class="hljs-type">GL10</span>?)</span></span> {
        Live2D_v3.clearBuffer(<span class="hljs-number">0f</span>, <span class="hljs-number">1f</span>, <span class="hljs-number">0f</span>, <span class="hljs-number">0f</span>)
        model.update()
        model.setParameterValue(<span class="hljs-string">"Param14"</span>, <span class="hljs-number">1f</span>)
        model.draw()
    }
}
</code></pre>
<h5 data-id="heading-40">ç¬¬å…­æ­¥ï¼šJNIè°ƒç”¨C++å±‚</h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// Live2D_v3.java</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LAppModel</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">long</span> nativeModel;

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">native</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">loadModelJson</span><span class="hljs-params">(String fileName)</span>;
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">native</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">update</span><span class="hljs-params">()</span>;
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">native</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">draw</span><span class="hljs-params">()</span>;
}
</code></pre>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// lapp_model.cpp</span>
<span class="hljs-keyword">extern</span> <span class="hljs-string">"C"</span> <span class="hljs-function">JNIEXPORT <span class="hljs-type">void</span> JNICALL
<span class="hljs-title">Java_com_hornhuang_tomato_1plan_Live2D_1v3_00024LAppModel_loadModelJson</span><span class="hljs-params">(JNIEnv *env, jobject thiz,
                                                           jstring file_name)</span> </span>{
    <span class="hljs-type">const</span> <span class="hljs-type">char</span> *json_file = env-&gt;<span class="hljs-built_in">GetStringUTFChars</span>(file_name, <span class="hljs-literal">nullptr</span>);
    <span class="hljs-built_in">getModel</span>(env, thiz)-&gt;<span class="hljs-built_in">LoadAssets</span>(json_file);
    env-&gt;<span class="hljs-built_in">ReleaseStringUTFChars</span>(file_name, json_file);
}

<span class="hljs-keyword">extern</span> <span class="hljs-string">"C"</span> <span class="hljs-function">JNIEXPORT <span class="hljs-type">void</span> JNICALL
<span class="hljs-title">Java_com_hornhuang_tomato_1plan_Live2D_1v3_00024LAppModel_draw</span><span class="hljs-params">(JNIEnv *env, jobject thiz)</span> </span>{
    <span class="hljs-built_in">getModel</span>(env, thiz)-&gt;<span class="hljs-built_in">Draw</span>();
}
</code></pre>
<h5 data-id="heading-41">ç¬¬ä¸ƒæ­¥ï¼šC++å±‚åŠ è½½å’Œæ¸²æŸ“Live2Dæ¨¡å‹</h5>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// LAppModel.cpp</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">LAppModel::LoadAssets</span><span class="hljs-params">(<span class="hljs-type">const</span> Csm::csmChar* fileName)</span> </span>{
    <span class="hljs-comment">// è§£æ.model3.jsonæ–‡ä»¶</span>
    Csm::csmByte* buffer = <span class="hljs-built_in">CreateBuffer</span>(fileName, &amp;size);
    _modelSetting = Csm::Model::CubismModelSettingJson::<span class="hljs-built_in">Create</span>(buffer, size);
    <span class="hljs-built_in">DeleteBuffer</span>(buffer, fileName);
    
    <span class="hljs-comment">// è®¾ç½®æ¨¡å‹å’Œçº¹ç†</span>
    <span class="hljs-built_in">SetupModel</span>(_modelSetting);
    <span class="hljs-built_in">SetupTextures</span>();
    <span class="hljs-built_in">PreloadMotionGroup</span>(MotionGroupIdle);
}

<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">LAppModel::Draw</span><span class="hljs-params">()</span> </span>{
    Csm::CubismMatrix44 projection;
    projection.<span class="hljs-built_in">Scale</span>(<span class="hljs-number">1.0f</span>, <span class="hljs-number">1.0f</span>);
    _renderer-&gt;<span class="hljs-built_in">SetMvpMatrix</span>(&amp;projection);
    _renderer-&gt;<span class="hljs-built_in">DrawModel</span>();
}
</code></pre>
<h3 data-id="heading-42">2. é‡åˆ°çš„é—®é¢˜å’ŒBug</h3>
<h4 data-id="heading-43">é—®é¢˜1ï¼šPlatform Viewæœªæ³¨å†Œé”™è¯¯</h4>
<h5 data-id="heading-44">é”™è¯¯ä¿¡æ¯</h5>
<pre><code class="hljs language-bash" lang="bash">Trying to create a platform view of unregistered <span class="hljs-built_in">type</span>: com.hornhuang.tomato_plan/live2d_view
</code></pre>
<h5 data-id="heading-45">è§¦å‘åŸå› </h5>
<p>åˆ é™¤äº†NativeTextViewç›¸å…³æ–‡ä»¶åï¼ŒMainActivity.ktä¸­ä»ç„¶ä¿ç•™ç€NativeTextViewFactoryçš„æ³¨å†Œä»£ç ï¼Œä½†æ²¡æœ‰æ³¨å†ŒLive2DPlatformViewFactoryã€‚</p>
<h5 data-id="heading-46">è§£å†³æ–¹æ¡ˆ</h5>
<ol>
<li>åˆ é™¤MainActivity.ktä¸­çš„NativeTextViewFactoryæ³¨å†Œä»£ç </li>
<li>æ·»åŠ Live2DPlatformViewFactoryçš„æ³¨å†Œ</li>
</ol>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// MainActivity.kt</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">MainActivity</span>: <span class="hljs-type">FlutterActivity</span>() {
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">configureFlutterEngine</span><span class="hljs-params">(flutterEngine: <span class="hljs-type">FlutterEngine</span>)</span></span> {
        <span class="hljs-keyword">super</span>.configureFlutterEngine(flutterEngine)
        flutterEngine
            .platformViewsController
            .registry
            .registerViewFactory(
                <span class="hljs-string">"com.hornhuang.tomato_plan/live2d_view"</span>,
                Live2DPlatformViewFactory()
            )
    }
}
</code></pre>
<hr/>
<h4 data-id="heading-47">é—®é¢˜2ï¼šç¼–è¯‘é”™è¯¯ - æœªè§£æçš„å¼•ç”¨</h4>
<h5 data-id="heading-48">é”™è¯¯ä¿¡æ¯</h5>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">Unresolved reference:</span> <span class="hljs-string">LAppModel</span>
<span class="hljs-attr">Unresolved reference:</span> <span class="hljs-string">drag</span>
<span class="hljs-attr">Unresolved reference:</span> <span class="hljs-string">touch</span>
<span class="hljs-attr">Unresolved reference:</span> <span class="hljs-string">release</span>
</code></pre>
<h5 data-id="heading-49">è§¦å‘åŸå› </h5>
<p>Live2DPlatformView.ktä¸­ä½¿ç”¨äº†LAppModelç±»ï¼Œä½†æ²¡æœ‰å¯¼å…¥æ­£ç¡®çš„åŒ…ã€‚</p>
<h5 data-id="heading-50">è§£å†³æ–¹æ¡ˆ</h5>
<p>åœ¨Live2DPlatformView.ktæ–‡ä»¶é¡¶éƒ¨æ·»åŠ å¯¼å…¥è¯­å¥ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">import</span> com.hornhuang.tomato_plan.Live2D_v3.LAppModel
</code></pre>
<hr/>
<h4 data-id="heading-51">é—®é¢˜3ï¼šLive2DActivityèƒ½æ˜¾ç¤ºï¼Œä½†Flutterçš„Live2DViewæ˜¾ç¤ºç©ºç™½ï¼ˆæ ¸å¿ƒé—®é¢˜ï¼‰</h4>
<h5 data-id="heading-52">ç°è±¡æè¿°</h5>
<ul>
<li>æ‰“å¼€Live2DActivityï¼šLive2Dæ¨¡å‹æ­£å¸¸æ˜¾ç¤º</li>
<li>è¿”å›Flutteré¦–é¡µï¼šLive2DViewæ˜¾ç¤ºä¸€ç‰‡ç©ºç™½ï¼ˆç»¿è‰²èƒŒæ™¯ï¼‰</li>
<li>æ—¥å¿—ä¸­å‡ºç°OpenGLé”™è¯¯ï¼š<code>glGetError() returned error 0x501</code></li>
</ul>
<h5 data-id="heading-53">è§¦å‘åŸå› åˆ†æ</h5>
<p><strong>æ ¹æœ¬åŸå› ï¼šOpenGLä¸Šä¸‹æ–‡å†²çª</strong></p>
<ol>
<li>
<p><strong>Live2DActivityå’ŒLive2DPlatformViewä½¿ç”¨ä¸åŒçš„OpenGLä¸Šä¸‹æ–‡</strong></p>
<ul>
<li>Live2DActivityæœ‰è‡ªå·±çš„GLSurfaceViewï¼Œåˆ›å»ºç‹¬ç«‹çš„OpenGLä¸Šä¸‹æ–‡</li>
<li>Live2DPlatformViewä¹Ÿæœ‰è‡ªå·±çš„GLSurfaceViewï¼Œåˆ›å»ºå¦ä¸€ä¸ªç‹¬ç«‹çš„OpenGLä¸Šä¸‹æ–‡</li>
</ul>
</li>
<li>
<p><strong>Live2D SDKçš„åˆå§‹åŒ–é—®é¢˜</strong></p>
<ul>
<li>æœ€åˆçš„å®ç°ä¸­ï¼ŒLive2D_v3.init()åœ¨MainActivityä¸­åªè°ƒç”¨ä¸€æ¬¡</li>
<li>è¿™å¯¼è‡´Live2D SDKçš„é™æ€èµ„æºï¼ˆå¦‚ç€è‰²å™¨ç¨‹åºï¼‰åœ¨ç¬¬ä¸€ä¸ªOpenGLä¸Šä¸‹æ–‡ä¸­åˆ›å»º</li>
<li>å½“åˆ‡æ¢åˆ°ç¬¬äºŒä¸ªOpenGLä¸Šä¸‹æ–‡æ—¶ï¼Œè¿™äº›èµ„æºæ— æ•ˆ</li>
</ul>
</li>
<li>
<p><strong>ç€è‰²å™¨ç¨‹åºçš„OpenGLä¸Šä¸‹æ–‡ç»‘å®š</strong></p>
<ul>
<li>OpenGLçš„ç€è‰²å™¨ç¨‹åºæ˜¯ä¸Šä¸‹æ–‡ç»‘å®šçš„</li>
<li>åœ¨ä¸Šä¸‹æ–‡Aä¸­åˆ›å»ºçš„ç€è‰²å™¨ç¨‹åºåœ¨ä¸Šä¸‹æ–‡Bä¸­æ— æ³•ä½¿ç”¨</li>
<li>CubismRendereråœ¨åˆ›å»ºæ—¶ä¼šç¼–è¯‘å’Œé“¾æ¥ç€è‰²å™¨ç¨‹åº</li>
<li>è¿™äº›ç¨‹åºåªåœ¨åˆ›å»ºå®ƒä»¬çš„ä¸Šä¸‹æ–‡ä¸­æœ‰æ•ˆ</li>
</ul>
</li>
<li>
<p><strong>é”™è¯¯æµç¨‹</strong></p>
<pre><code class="hljs language-scss" lang="scss">ç”¨æˆ·æ‰“å¼€Live2DActivity
â†“
Live2DActivityçš„OpenGLä¸Šä¸‹æ–‡åˆ›å»º
â†“
Live2D_v3<span class="hljs-selector-class">.init</span>() åœ¨MainActivityä¸­è°ƒç”¨ï¼ˆç¬¬ä¸€æ¬¡ï¼‰
â†“
ç€è‰²å™¨ç¨‹åºåœ¨Live2DActivityçš„ä¸Šä¸‹æ–‡ä¸­åˆ›å»º
â†“
Live2Dæ¨¡å‹æ­£å¸¸æ˜¾ç¤º

ç”¨æˆ·è¿”å›Flutteré¦–é¡µ
â†“
Live2DPlatformViewçš„OpenGLä¸Šä¸‹æ–‡åˆ›å»º
â†“
Live2D_v3<span class="hljs-selector-class">.init</span>() æ£€æµ‹åˆ°å·²åˆå§‹åŒ–ï¼Œè·³è¿‡
â†“
Live2DPlatformViewå°è¯•ä½¿ç”¨Live2D SDK
â†“
å°è¯•ä½¿ç”¨åœ¨Live2DActivityä¸Šä¸‹æ–‡ä¸­åˆ›å»ºçš„ç€è‰²å™¨ç¨‹åº
â†“
OpenGLé”™è¯¯ <span class="hljs-number">0</span>x501 (GL_INVALID_VALUE)
â†“
æ¸²æŸ“å¤±è´¥ï¼Œæ˜¾ç¤ºç©ºç™½
</code></pre>
</li>
</ol>
<h5 data-id="heading-54">è§£å†³æ–¹æ¡ˆ</h5>
<p><strong>æ–¹æ¡ˆï¼šæ¯ä¸ªOpenGLä¸Šä¸‹æ–‡ç‹¬ç«‹åˆå§‹åŒ–Live2D SDK</strong></p>
<ol>
<li><strong>ä¿®æ”¹Live2D_v3.javaï¼Œæ”¯æŒå¤šæ¬¡åˆå§‹åŒ–</strong></li>
</ol>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Live2D_v3</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">boolean</span> <span class="hljs-variable">initialized</span> <span class="hljs-operator">=</span> <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> Context context;

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">init</span><span class="hljs-params">(Context ctx)</span> {
        <span class="hljs-keyword">if</span> (!initialized) {
            context = ctx;
            Csm_CubismFramework.initialize();
            initialized = <span class="hljs-literal">true</span>;
        }
    }
}
</code></pre>
<ol start="2">
<li><strong>ä¿®æ”¹Live2DPlatformView.ktï¼Œåœ¨onSurfaceCreatedä¸­åˆå§‹åŒ–</strong></li>
</ol>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Live2DRenderer</span>(<span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> context: Context) : GLSurfaceView.Renderer {
    <span class="hljs-keyword">lateinit</span> <span class="hljs-keyword">var</span> model: LAppModel

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onSurfaceCreated</span><span class="hljs-params">(gl: <span class="hljs-type">GL10</span>?, config: <span class="hljs-type">EGLConfig</span>?)</span></span> {
        <span class="hljs-comment">// åœ¨æ¯ä¸ªOpenGLä¸Šä¸‹æ–‡ä¸­ç‹¬ç«‹åˆå§‹åŒ–Live2D SDK</span>
        Live2D_v3.<span class="hljs-keyword">init</span>(context)
        
        <span class="hljs-comment">// åˆ›å»ºæ¨¡å‹å®ä¾‹</span>
        model = LAppModel().apply {
            loadModelJson(<span class="hljs-string">"assets://mianfeimox/llny.model3.json"</span>)
        }
    }

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onSurfaceChanged</span><span class="hljs-params">(gl: <span class="hljs-type">GL10</span>?, width: <span class="hljs-type">Int</span>, height: <span class="hljs-type">Int</span>)</span></span> {
        model.resize(width, height)
    }

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onDrawFrame</span><span class="hljs-params">(gl: <span class="hljs-type">GL10</span>?)</span></span> {
        Live2D_v3.clearBuffer(<span class="hljs-number">0f</span>, <span class="hljs-number">1f</span>, <span class="hljs-number">0f</span>, <span class="hljs-number">0f</span>)
        model.update()
        model.setParameterValue(<span class="hljs-string">"Param14"</span>, <span class="hljs-number">1f</span>)
        model.draw()
    }
}
</code></pre>
<ol start="3">
<li><strong>ä¿®æ”¹Live2DActivity.ktï¼Œåœ¨MyRendererä¸­åˆå§‹åŒ–</strong></li>
</ol>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Live2DActivity</span> : <span class="hljs-type">AppCompatActivity</span>() {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">lateinit</span> <span class="hljs-keyword">var</span> glSurfaceView: GLSurfaceView
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">lateinit</span> <span class="hljs-keyword">var</span> renderer: MyRenderer

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onCreate</span><span class="hljs-params">(savedInstanceState: <span class="hljs-type">Bundle</span>?)</span></span> {
        <span class="hljs-keyword">super</span>.onCreate(savedInstanceState)
        setContentView(R.layout.activity_live2d)
        
        glSurfaceView = findViewById(R.id.glSurfaceView)
        renderer = MyRenderer(<span class="hljs-keyword">this</span>)
        glSurfaceView.setEGLContextClientVersion(<span class="hljs-number">2</span>)
        glSurfaceView.setRenderer(renderer)
    }
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">MyRenderer</span>(<span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> context: Context) : GLSurfaceView.Renderer {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">lateinit</span> <span class="hljs-keyword">var</span> model: LAppModel

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onSurfaceCreated</span><span class="hljs-params">(gl: <span class="hljs-type">GL10</span>?, config: <span class="hljs-type">EGLConfig</span>?)</span></span> {
        <span class="hljs-comment">// åœ¨Live2DActivityçš„OpenGLä¸Šä¸‹æ–‡ä¸­åˆå§‹åŒ–Live2D SDK</span>
        Live2D_v3.<span class="hljs-keyword">init</span>(context)
        
        model = LAppModel().apply {
            loadModelJson(<span class="hljs-string">"assets://mianfeimox/llny.model3.json"</span>)
        }
    }

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onSurfaceChanged</span><span class="hljs-params">(gl: <span class="hljs-type">GL10</span>?, width: <span class="hljs-type">Int</span>, height: <span class="hljs-type">Int</span>)</span></span> {
        model.resize(width, height)
    }

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onDrawFrame</span><span class="hljs-params">(gl: <span class="hljs-type">GL10</span>?)</span></span> {
        Live2D_v3.clearBuffer(<span class="hljs-number">0f</span>, <span class="hljs-number">0f</span>, <span class="hljs-number">0f</span>, <span class="hljs-number">0f</span>)
        model.update()
        model.setParameterValue(<span class="hljs-string">"Param14"</span>, <span class="hljs-number">1f</span>)
        model.draw()
    }
}
</code></pre>
<ol start="4">
<li><strong>ç§»é™¤MainActivityä¸­çš„é›†ä¸­åˆå§‹åŒ–</strong></li>
</ol>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// MainActivity.kt - ä¸å†åœ¨è¿™é‡Œåˆå§‹åŒ–Live2D</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">MainActivity</span>: <span class="hljs-type">FlutterActivity</span>() {
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">configureFlutterEngine</span><span class="hljs-params">(flutterEngine: <span class="hljs-type">FlutterEngine</span>)</span></span> {
        <span class="hljs-keyword">super</span>.configureFlutterEngine(flutterEngine)
        flutterEngine
            .platformViewsController
            .registry
            .registerViewFactory(
                <span class="hljs-string">"com.hornhuang.tomato_plan/live2d_view"</span>,
                Live2DPlatformViewFactory()
            )
    }
}
</code></pre>
<h5 data-id="heading-55">ä¿®å¤åçš„æµç¨‹</h5>
<pre><code class="hljs language-scss" lang="scss">ç”¨æˆ·æ‰“å¼€Live2DActivity
â†“
Live2DActivityçš„OpenGLä¸Šä¸‹æ–‡åˆ›å»º
â†“
MyRenderer<span class="hljs-selector-class">.onSurfaceCreated</span>() è°ƒç”¨
â†“
Live2D_v3<span class="hljs-selector-class">.init</span>() ç¬¬ä¸€æ¬¡åˆå§‹åŒ–
â†“
ç€è‰²å™¨ç¨‹åºåœ¨Live2DActivityçš„ä¸Šä¸‹æ–‡ä¸­åˆ›å»º
â†“
Live2Dæ¨¡å‹æ­£å¸¸æ˜¾ç¤º

ç”¨æˆ·è¿”å›Flutteré¦–é¡µ
â†“
Live2DPlatformViewçš„OpenGLä¸Šä¸‹æ–‡åˆ›å»º
â†“
Live2DRenderer<span class="hljs-selector-class">.onSurfaceCreated</span>() è°ƒç”¨
â†“
Live2D_v3<span class="hljs-selector-class">.init</span>() æ£€æµ‹åˆ°å·²åˆå§‹åŒ–ï¼Œè·³è¿‡æ¡†æ¶åˆå§‹åŒ–
â†“
åˆ›å»ºæ–°çš„LAppModelå®ä¾‹
â†“
CubismRendereråœ¨Live2DPlatformViewçš„ä¸Šä¸‹æ–‡ä¸­åˆ›å»ºæ–°çš„ç€è‰²å™¨ç¨‹åº
â†“
Live2Dæ¨¡å‹æ­£å¸¸æ˜¾ç¤º
</code></pre>
<h3 data-id="heading-56">3. å…³é”®æŠ€æœ¯ç‚¹æ€»ç»“</h3>
<h4 data-id="heading-57">3.1 OpenGLä¸Šä¸‹æ–‡éš”ç¦»</h4>
<ul>
<li>æ¯ä¸ªGLSurfaceViewåˆ›å»ºç‹¬ç«‹çš„OpenGLä¸Šä¸‹æ–‡</li>
<li>OpenGLèµ„æºï¼ˆç€è‰²å™¨ç¨‹åºã€çº¹ç†ç­‰ï¼‰æ˜¯ä¸Šä¸‹æ–‡ç»‘å®šçš„</li>
<li>ä¸åŒä¸Šä¸‹æ–‡ä¹‹é—´ä¸èƒ½å…±äº«OpenGLèµ„æº</li>
</ul>
<h4 data-id="heading-58">3.2 Live2D SDKçš„åˆå§‹åŒ–ç­–ç•¥</h4>
<ul>
<li><strong>æ¡†æ¶åˆå§‹åŒ–</strong>ï¼ˆCsm_CubismFramework.initialize()ï¼‰ï¼šåªéœ€ä¸€æ¬¡</li>
<li><strong>æ¸²æŸ“å™¨åˆå§‹åŒ–</strong>ï¼ˆCubismRendererï¼‰ï¼šæ¯ä¸ªOpenGLä¸Šä¸‹æ–‡éœ€è¦ç‹¬ç«‹åˆ›å»º</li>
<li><strong>æ¨¡å‹å®ä¾‹</strong>ï¼šæ¯ä¸ªOpenGLä¸Šä¸‹æ–‡éœ€è¦ç‹¬ç«‹çš„LAppModelå®ä¾‹</li>
</ul>
<h4 data-id="heading-59">3.3 Flutter PlatformViewçš„ç”Ÿå‘½å‘¨æœŸ</h4>
<ul>
<li>PlatformViewåˆ›å»ºæ—¶ï¼ŒGLSurfaceViewä¹Ÿä¼šåˆ›å»º</li>
<li>GLSurfaceViewçš„onSurfaceCreatedåœ¨OpenGLä¸Šä¸‹æ–‡åˆ›å»ºæ—¶è°ƒç”¨</li>
<li>onSurfaceChangedåœ¨è§†å›¾å°ºå¯¸å˜åŒ–æ—¶è°ƒç”¨</li>
<li>onDrawFrameåœ¨æ¯ä¸€å¸§æ¸²æŸ“æ—¶è°ƒç”¨</li>
</ul>
<h3 data-id="heading-60">4. é—®é¢˜æ’æŸ¥è¿‡ç¨‹</h3>
<h4 data-id="heading-61">4.1 åˆæ­¥æ’æŸ¥</h4>
<ol>
<li>æ£€æŸ¥Live2DActivityèƒ½æ­£å¸¸æ˜¾ç¤ºï¼Œè¯´æ˜æ¨¡å‹æ–‡ä»¶å’ŒLive2D SDKæœ¬èº«æ²¡æœ‰é—®é¢˜</li>
<li>æ£€æŸ¥Flutterçš„Live2DViewæ˜¾ç¤ºç»¿è‰²èƒŒæ™¯ï¼Œè¯´æ˜GLSurfaceViewæ­£å¸¸å·¥ä½œ</li>
<li>æ—¥å¿—ä¸­å‡ºç°OpenGLé”™è¯¯ï¼ŒæŒ‡å‘æ¸²æŸ“é—®é¢˜</li>
</ol>
<h4 data-id="heading-62">4.2 æ·±å…¥åˆ†æ</h4>
<ol>
<li>åˆ†æLive2DActivityå’ŒLive2DPlatformViewçš„ä»£ç å·®å¼‚</li>
<li>å‘ç°ä¸¤è€…éƒ½ä½¿ç”¨Live2D_v3.init()ï¼Œä½†è°ƒç”¨ä½ç½®ä¸åŒ</li>
<li>ç ”ç©¶OpenGLä¸Šä¸‹æ–‡çš„ç®¡ç†æœºåˆ¶</li>
<li>ç¡®è®¤ç€è‰²å™¨ç¨‹åºçš„ä¸Šä¸‹æ–‡ç»‘å®šç‰¹æ€§</li>
</ol>
<h4 data-id="heading-63">4.3 éªŒè¯å‡è®¾</h4>
<ol>
<li>åœ¨Live2DPlatformViewçš„onSurfaceCreatedä¸­æ·»åŠ æ—¥å¿—</li>
<li>è§‚å¯ŸLive2D_v3.init()çš„è°ƒç”¨æ—¶æœº</li>
<li>ç¡®è®¤OpenGLé”™è¯¯çš„è§¦å‘æ—¶æœº</li>
<li>éªŒè¯ç‹¬ç«‹åˆå§‹åŒ–æ–¹æ¡ˆçš„æœ‰æ•ˆæ€§</li>
</ol>
<h3 data-id="heading-64">5. ç»éªŒæ•™è®­</h3>
<h4 data-id="heading-65">5.1 OpenGLä¸Šä¸‹æ–‡ç®¡ç†</h4>
<ul>
<li>åœ¨Androidä¸­ä½¿ç”¨å¤šä¸ªGLSurfaceViewæ—¶ï¼Œè¦æ³¨æ„ä¸Šä¸‹æ–‡éš”ç¦»</li>
<li>OpenGLèµ„æºä¸èƒ½è·¨ä¸Šä¸‹æ–‡å…±äº«</li>
<li>æ¯ä¸ªä¸Šä¸‹æ–‡éœ€è¦ç‹¬ç«‹åˆå§‹åŒ–å’Œæ¸…ç†èµ„æº</li>
</ul>
<h4 data-id="heading-66">5.2 Live2D SDKé›†æˆ</h4>
<ul>
<li>Live2D SDKçš„æ¡†æ¶åˆå§‹åŒ–å¯ä»¥å…¨å±€è¿›è¡Œ</li>
<li>ä½†æ¸²æŸ“ç›¸å…³çš„èµ„æºï¼ˆç€è‰²å™¨ç¨‹åºã€çº¹ç†ç­‰ï¼‰éœ€è¦æ¯ä¸ªä¸Šä¸‹æ–‡ç‹¬ç«‹åˆ›å»º</li>
<li>æ¨¡å‹å®ä¾‹ä¹Ÿåº”è¯¥æ¯ä¸ªä¸Šä¸‹æ–‡ç‹¬ç«‹åˆ›å»º</li>
</ul>
<h4 data-id="heading-67">5.3 Flutter PlatformViewå¼€å‘</h4>
<ul>
<li>PlatformViewçš„ç”Ÿå‘½å‘¨æœŸä¸åŸç”ŸViewä¸€è‡´</li>
<li>éœ€è¦æ­£ç¡®å¤„ç†OpenGLä¸Šä¸‹æ–‡çš„åˆ›å»ºå’Œé”€æ¯</li>
<li>é¿å…åœ¨PlatformViewä¸­ä½¿ç”¨é™æ€çš„OpenGLèµ„æº</li>
</ul>
<h3 data-id="heading-68">6. æœ€ä½³å®è·µ</h3>
<h4 data-id="heading-69">6.1 åˆå§‹åŒ–æ¨¡å¼</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// æ¨èçš„åˆå§‹åŒ–æ¨¡å¼</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">MyRenderer</span>(<span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> context: Context) : GLSurfaceView.Renderer {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">lateinit</span> <span class="hljs-keyword">var</span> model: LAppModel

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onSurfaceCreated</span><span class="hljs-params">(gl: <span class="hljs-type">GL10</span>?, config: <span class="hljs-type">EGLConfig</span>?)</span></span> {
        <span class="hljs-comment">// æ¯ä¸ªOpenGLä¸Šä¸‹æ–‡ç‹¬ç«‹åˆå§‹åŒ–</span>
        Live2D_v3.<span class="hljs-keyword">init</span>(context)
        
        <span class="hljs-comment">// åˆ›å»ºç‹¬ç«‹çš„æ¨¡å‹å®ä¾‹</span>
        model = LAppModel()
        model.loadModelJson(<span class="hljs-string">"assets://model/xxx.model3.json"</span>)
    }

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onSurfaceDestroyed</span><span class="hljs-params">(gl: <span class="hljs-type">GL10</span>?)</span></span> {
        <span class="hljs-comment">// æ¸…ç†èµ„æº</span>
        <span class="hljs-comment">// æ³¨æ„ï¼šLive2D_v3.dispose()ä¸åº”è¯¥åœ¨è¿™é‡Œè°ƒç”¨</span>
        <span class="hljs-comment">// å› ä¸ºå¯èƒ½è¿˜æœ‰å…¶ä»–OpenGLä¸Šä¸‹æ–‡åœ¨ä½¿ç”¨</span>
    }
}
</code></pre>
<h4 data-id="heading-70">6.2 èµ„æºç®¡ç†</h4>
<ul>
<li>é¿å…åœ¨å¤šä¸ªOpenGLä¸Šä¸‹æ–‡ä¹‹é—´å…±äº«OpenGLèµ„æº</li>
<li>æ¯ä¸ªä¸Šä¸‹æ–‡ç‹¬ç«‹åˆ›å»ºå’Œç®¡ç†è‡ªå·±çš„èµ„æº</li>
<li>æ³¨æ„èµ„æºçš„ç”Ÿå‘½å‘¨æœŸï¼Œé¿å…å†…å­˜æ³„æ¼</li>
</ul>
<h4 data-id="heading-71">6.3 é”™è¯¯å¤„ç†</h4>
<ul>
<li>ä½¿ç”¨glGetError()æ£€æµ‹OpenGLé”™è¯¯</li>
<li>è®°å½•è¯¦ç»†çš„æ—¥å¿—ä»¥ä¾¿æ’æŸ¥é—®é¢˜</li>
<li>ç†è§£OpenGLé”™è¯¯ç çš„å«ä¹‰ï¼ˆå¦‚0x501 = GL_INVALID_VALUEï¼‰</li>
</ul>
<h3 data-id="heading-72">7. æ€»ç»“</h3>
<p>é€šè¿‡è¿™æ¬¡é—®é¢˜æ’æŸ¥å’Œä¿®å¤ï¼Œæˆ‘ä»¬æ·±å…¥ç†è§£äº†ï¼š</p>
<ol>
<li><strong>Flutter PlatformViewçš„å·¥ä½œåŸç†</strong></li>
<li><strong>OpenGLä¸Šä¸‹æ–‡çš„ç®¡ç†æœºåˆ¶</strong></li>
<li><strong>Live2D SDKçš„æ­£ç¡®é›†æˆæ–¹å¼</strong></li>
<li><strong>è·¨ä¸Šä¸‹æ–‡èµ„æºå…±äº«çš„é™åˆ¶</strong></li>
</ol>
<p>æ ¸å¿ƒè§£å†³æ–¹æ¡ˆæ˜¯ï¼š<strong>æ¯ä¸ªOpenGLä¸Šä¸‹æ–‡ç‹¬ç«‹åˆå§‹åŒ–Live2Dç›¸å…³çš„æ¸²æŸ“èµ„æº</strong>ï¼Œç¡®ä¿ç€è‰²å™¨ç¨‹åºç­‰OpenGLèµ„æºåœ¨æ­£ç¡®çš„ä¸Šä¸‹æ–‡ä¸­åˆ›å»ºå’Œä½¿ç”¨ã€‚</p>
<p>è¿™ä¸ªç»éªŒå¯¹äºå…¶ä»–éœ€è¦é›†æˆOpenGLæ¸²æŸ“çš„Flutteré¡¹ç›®ä¹Ÿå…·æœ‰å‚è€ƒä»·å€¼ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€æ—¥å¸¸çŸ¥è¯†ç§¯ç´¯ã€‘Kotlin let å‡½æ•°ã€inline å‡½æ•°ä»¥åŠ DSL]]></title>    <link>https://juejin.cn/post/7588146449005101092</link>    <guid>https://juejin.cn/post/7588146449005101092</guid>    <pubDate>2025-12-27T08:08:30.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588146449005101092" data-draft-id="7587630413012680714" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€æ—¥å¸¸çŸ¥è¯†ç§¯ç´¯ã€‘Kotlin let å‡½æ•°ã€inline å‡½æ•°ä»¥åŠ DSL"/> <meta itemprop="keywords" content="Kotlin,ç¼–ç¨‹è¯­è¨€,Android"/> <meta itemprop="datePublished" content="2025-12-27T08:08:30.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Lei_official"/> <meta itemprop="url" content="https://juejin.cn/user/2351234021066314"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€æ—¥å¸¸çŸ¥è¯†ç§¯ç´¯ã€‘Kotlin let å‡½æ•°ã€inline å‡½æ•°ä»¥åŠ DSL
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2351234021066314/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Lei_official
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-27T08:08:30.000Z" title="Sat Dec 27 2025 08:08:30 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>å‡¡äº‹æœ‰äº¤ä»£ â€”â€” æ¥åˆ°ä»»åŠ¡æ—¶ï¼Œä¸»åŠ¨æ˜ç¡®ä»»åŠ¡ç›®æ ‡ã€èƒŒæ™¯ã€åˆ©ç›Šç›¸å…³æ–¹ã€äº¤ä»˜ç‰©ã€æ—¶é—´èŠ‚ç‚¹ã€‚<br/>ä»¶ä»¶æœ‰ç€è½ â€”â€” æ‰§è¡Œä»»åŠ¡è¿‡ç¨‹ä¸­ï¼Œåœ¨é‡Œç¨‹ç¢‘èŠ‚ç‚¹åŠæ—¶åŒæ­¥ï¼Œåšå¥½é¢„æœŸç®¡ç†ã€‚<br/>äº‹äº‹æœ‰å›éŸ³ â€”â€” ä»»åŠ¡å®Œæˆåï¼Œæœ‰å¤ç›˜ï¼Œæœ‰æ±‡æŠ¥ï¼Œæœ‰æ€»ç»“ã€‚</p>
</blockquote>
<p>è¿™ç¯‡æ–‡ç« è®°å½•äº†è¿‘æœŸç§¯ç´¯çš„ä¸€äº›é›¶æ•£çŸ¥è¯†ç‚¹ï¼Œä¸´è¿‘å…ƒæ—¦ã€æ˜¥èŠ‚ï¼Œè¿™ä¸ªæ—¶æœŸæ˜¯ä¸€å¹´é‡Œå·¥ä½œç›¸å¯¹è½»æ¾çš„é˜¶æ®µï¼ŒåŒæ—¶ä¹Ÿæ˜¯å¤ç›˜æ€»ç»“è¿‡å»ä¸€å¹´çš„ç»éªŒã€ä»¥åŠåšå¥½æ˜å¹´ç›®æ ‡è§„åˆ’çš„å…³é”®èŠ‚ç‚¹ã€‚<strong>åˆ©ç”¨å¥½ï¼Œåˆ«è™šåº¦</strong>ã€‚</p>
<h2 data-id="heading-0">ä½ çœŸçš„éœ€è¦ä½¿ç”¨ let å‡½æ•°å—ï¼Ÿ</h2>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d392b67f326648ed9a651e8b1f2addc9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTGVpX29mZmljaWFs:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767427710&amp;x-signature=KRUvnLcCqA%2F33q2JkVaq1FnNvrE%3D" alt="image.png" width="50%" loading="lazy"/>
<p>åœ¨ Kotlin ä¸­ï¼Œ<code>let</code>ã€<code>apply</code>ã€<code>also</code>ã€<code>run</code> ç­‰ç­‰å‡½æ•°ï¼Œæ˜¯é™ä½ä»£ç è¡Œæ•°ã€æå‡å¯è¯»æ€§çš„åˆ©å™¨ï¼Œç„¶è€Œå®ƒä»¬å¹¶ä¸æ˜¯ä¸‡èƒ½çš„ï¼Œå¦‚æœä½¿ç”¨ä¸å½“ï¼Œä¼šå¸¦æ¥ç›¸åçš„æ•ˆæœã€‚</p>
<h3 data-id="heading-1">let çš„ä¸€èˆ¬ç”¨æ³•</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// å¦‚æœå…ƒç´ éç©ºï¼Œåˆ™å¯¹å…¶è¿›è¡Œç»˜åˆ¶</span>
element?.let { render(it) }

<span class="hljs-comment">// é let å†™æ³•</span>
<span class="hljs-keyword">if</span> (element != <span class="hljs-literal">null</span>) {
	render(element)
}
</code></pre>
<p>å¯ä»¥çœ‹åˆ°ï¼Œ<code>let</code> å‡½æ•°å°†3è¡Œä»£ç ç²¾ç®€æˆä¸º1è¡Œï¼Œç²¾ç®€äº† 66% çš„ä»£ç ã€‚å®ƒé€‚ç”¨äºä»¥ä¸‹åœºæ™¯ï¼š</p>
<ul>
<li>å•æ¬¡è°ƒç”¨è¯¥å¯¹è±¡</li>
<li>lambda è¡Œæ•°å¾ˆå°‘</li>
<li>æ²¡æœ‰åç»­ä¾èµ–</li>
</ul>
<p>ä¸ä¹‹ç›¸åçš„æ¡ä»¶ï¼Œå°±æ˜¯ä¸é€‚ç”¨äº let çš„åœºæ™¯ã€‚</p>
<h3 data-id="heading-2">let ä¸é€‚ç”¨çš„åœºæ™¯</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// ç¾éš¾ç°åœº1ï¼šè¡Œæ•°å¤šã€æœ‰åç»­ä¾èµ–</span>
element?.let { e -&gt;
    config?.let { c -&gt;
        adapter?.let { a -&gt;
            renderer?.let { r -&gt;
                r.render(e, c, a)
            }
        }
    }
}

<span class="hljs-comment">// ç¾éš¾ç°åœº2ï¼šè¶…è¿‡1è¡Œä½¿ç”¨ let å¯¹è±¡</span>
element?.let {
    doSomething(it)
    doAnotherThing(it)
    doMore(it)
}
</code></pre>
<p>ä»¥ä¸Šå·²ç»æ˜¯ Kotlin çš„åæ¨¡å¼äº†ï¼Œè¿™æ ·çš„ä»£ç ä¸æ–­<code>å‘å³åç§»ï¼ˆrightward driftï¼‰</code>ï¼Œ<strong>éš¾è¯»å¹¶ä¸”éš¾æ”¹</strong>ï¼Œåœ¨è¿›è¡Œ Code Review æ—¶ä¸€å®šè¦è¯†åˆ«å‡ºæ¥ã€‚</p>
<h3 data-id="heading-3">æ›¿ä»£æ–¹æ¡ˆ return fast</h3>
<p>åœ¨å‡½æ•°çš„å¼€å¤´ï¼Œæ£€æŸ¥å˜é‡æ¡ä»¶ï¼Œå¦‚æœä¸ç¬¦åˆç«‹åˆ» returnï¼Œå¯ä»¥åœ¨éœ€è¦çš„ä½ç½®å¢åŠ æ—¥å¿—æ‰“å°ï¼Œä»¥ä¾¿è¿½æº¯é—®é¢˜ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">updateView</span><span class="hljs-params">()</span></span> {
    <span class="hljs-keyword">val</span> e = element ?: <span class="hljs-keyword">return</span>
    <span class="hljs-keyword">val</span> c = config ?: <span class="hljs-keyword">return</span>
    <span class="hljs-keyword">val</span> a = adapter ?: <span class="hljs-keyword">return</span>

    render(e, c, a)
}
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆè¿™æ˜¯å¥½ä»£ç ï¼Ÿ</strong></p>
<ul>
<li>æ²¡æœ‰åµŒå¥—</li>
<li>æ§åˆ¶æµæ¸…æ™°</li>
<li>å¯è°ƒè¯•ï¼ˆæ¯ä¸€è¡Œéƒ½èƒ½æ‰“æ–­ç‚¹ï¼‰</li>
<li>éå¸¸ç¬¦åˆ â€œfail fastâ€ åŸåˆ™</li>
</ul>
<p>æ›´è¿›ä¸€æ­¥ï¼Œå¦‚æœ eã€cã€a è¿™ä¸‰ä¸ªå¯¹è±¡ç»å¸¸ä¸€èµ·åˆ¤ç©ºï¼Œå¯ä»¥å°†å®ƒä»¬æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªçŠ¶æ€ï¼Œæ¨èå¯¹å®ƒä»¬è¿›è¡ŒçŠ¶æ€èšåˆï¼Œæœ‰åˆ©äºé•¿æœŸä½¿ç”¨ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// çŠ¶æ€èšåˆ</span>
<span class="hljs-keyword">data</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RenderState</span>(
    <span class="hljs-keyword">val</span> element: Element,
    <span class="hljs-keyword">val</span> config: Config,
    <span class="hljs-keyword">val</span> adapter: Adapter
)

<span class="hljs-comment">// åªæœ‰ä¸€ä¸ªå˜é‡</span>
<span class="hljs-keyword">val</span> state: RenderState? = ...

<span class="hljs-comment">// ä½¿ç”¨æ—¶åˆ¤æ–­è¯¥å˜é‡</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">updateView</span><span class="hljs-params">()</span></span> {
    <span class="hljs-keyword">val</span> s = state ?: <span class="hljs-keyword">return</span>
    render(s)
}
</code></pre>
<p>æ­¤å¤–ï¼Œå¦‚æœå‘ç°ï¼Œä»£ç é‡Œå¤šå¤„è¿›è¡Œåˆ¤ç©ºæ“ä½œï¼Œåˆ™å¯ä»¥åˆ©ç”¨ DSLï¼Œå°†åˆ¤ç©ºæ“ä½œæå–å‡º <code>withReadyElement</code> å‡½æ•°ï¼Œ</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// æå– inline å‡½æ•°ï¼Œé›†ä¸­è¿›è¡Œå¯ç©ºæ€§å¤„ç†</span>
<span class="hljs-keyword">private</span> <span class="hljs-keyword">inline</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">withReadyElement</span><span class="hljs-params">(block: (<span class="hljs-type">Element</span>) -&gt; <span class="hljs-type">Unit</span>)</span></span> {
    <span class="hljs-keyword">val</span> e = element ?: <span class="hljs-keyword">return</span>
    block(e)
}

<span class="hljs-comment">// è°ƒç”¨ç‚¹æ›´åŠ ç¾è§‚å¹²å‡€</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">updateView</span><span class="hljs-params">()</span></span> {
    withReadyElement {
        render(it)
    }
}
</code></pre>
<h2 data-id="heading-4">inline fun ç”¨äºæ¶ˆé™¤ Lambda å¯¹è±¡é¢å¤–å¼€é”€</h2>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2a21849cdca94449b6a88f2f36420c77~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTGVpX29mZmljaWFs:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767427710&amp;x-signature=knoT7IVA8H0X%2BSNR%2BClpTdCKsCo%3D" alt="image.png" width="70%" loading="lazy"/>
<p><code>inline fun</code> æ˜¯â€œä¸º Lambda ä¹°å•çš„å·¥å…·â€ï¼Œ<strong>ç”¨äºæ¶ˆé™¤ Lambda å‚æ•°å¼•èµ·çš„å¯¹è±¡åˆ›å»º&amp;é—´æ¥è°ƒç”¨å¼€é”€</strong>ï¼ŒåŒæ ·åœ°ï¼Œå®ƒä¹Ÿä¸æ˜¯â€œé“¶å¼¹â€ï¼Œå¦‚æœä½¿ç”¨ä¸å½“ï¼Œåè€Œä¼šå¼•èµ·æ€§èƒ½ä¸‹é™ã€‚</p>
<h3 data-id="heading-5">æ™®é€š Lambda å‡½æ•°ä¸ inline Lambda å‡½æ•°</h3>
<p><strong>æ™®é€š Lambda å‡½æ•°</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">doSomething</span><span class="hljs-params">(block: () -&gt; <span class="hljs-type">Unit</span>)</span></span> {
    block()
}
</code></pre>
<p>ç³»ç»Ÿåœ¨ç¼–è¯‘è¿™æ®µä»£ç æ—¶ï¼Œå®é™…ä¸Šå‘ç”Ÿäº†ï¼š</p>
<ul>
<li>åˆ›å»ºä¸€ä¸ª <code>Function0</code> å¯¹è±¡ï¼ˆè¡¨ç¤º0ä¸ªå‚æ•°ã€å³æ— å‚å‡½æ•°ï¼‰</li>
<li>æ•è·å¤–éƒ¨å˜é‡ï¼Œç”Ÿæˆé—­åŒ…</li>
<li>é€šè¿‡ <code>invoke()</code> é—´æ¥è°ƒç”¨</li>
</ul>
<p>ä¾‹å¦‚ï¼Œæˆ‘ä»¬è°ƒç”¨ <code>doSomething { println("hello") }</code> åï¼Œç¼–è¯‘å™¨å®é™…ä¸Šåˆ›å»ºäº†ä¸€ä¸ªç±»ï¼Œå¹¶è°ƒç”¨å…¶ <code>invoke</code> å‡½æ•°ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">DoSomething$1</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Function0</span>&lt;Unit&gt; {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> Unit <span class="hljs-title function_">invoke</span><span class="hljs-params">()</span> {
        System.out.println(<span class="hljs-string">"hello"</span>)
        <span class="hljs-keyword">return</span> Unit.INSTANCE;
    }
}
</code></pre>
<p><strong>inline Lambda å‡½æ•°</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">inline</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">doSomething</span><span class="hljs-params">(block: () -&gt; <span class="hljs-type">Unit</span>)</span></span> {
    block()
}

<span class="hljs-comment">// ç¼–è¯‘åç›´æ¥å±•å¼€</span>
println(<span class="hljs-string">"hello"</span>)
</code></pre>
<h3 data-id="heading-6">æ ‡å‡†åº“çš„ inline ç”¨æ³•</h3>
<p>åœ¨ Kotlin æ ‡å‡†åº“é‡Œï¼Œè¿™äº›å‡½æ•°éƒ½æ˜¯ inline å®ç°</p>
<ul>
<li><code>let</code></li>
<li><code>apply</code></li>
<li><code>run</code></li>
<li><code>with</code></li>
<li><code>use</code></li>
<li><code>synchronized</code></li>
</ul>
<p>ä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">inline</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;T&gt;</span> T.<span class="hljs-title">apply</span><span class="hljs-params">(block: <span class="hljs-type">T</span>.() -&gt; <span class="hljs-type">Unit</span>)</span></span>: T
</code></pre>
<h3 data-id="heading-7">inline çš„è´Ÿé¢ä½œç”¨</h3>
<p>ç”±äº inline æœ¬è´¨ä¸Šé‡‡ç”¨äº† <code>å¤åˆ¶-ç²˜è´´</code> çš„æ¨¡å¼ï¼Œå› æ­¤å®ƒä¼šåœ¨æ¯ä¸ªè°ƒç”¨ç‚¹å¤åˆ¶ä¸€ä»½å‡½æ•°ä»£ç ï¼Œè¿™ä¼šé€ æˆ <code>APK / DEX è†¨èƒ€</code>ï¼Œå¯¹ Android æ¥è¯´ï¼Œæ›´ä¼šå¼•èµ· <strong>æ–¹æ³•æ•°å¢åŠ ï¼Œç”šè‡³çªç ´ 64K é™åˆ¶</strong>ã€‚</p>
<h3 data-id="heading-8">inline çš„åº”ç”¨åœºæ™¯</h3>
<ul>
<li>å‚æ•°æ˜¯ <code>lambda</code> ç±»å‹</li>
<li><code>lambda</code> éå¸¸çŸ­</li>
<li>è¯¥å‡½æ•° 90% ä»¥ä¸Šæ˜¯ lambda è°ƒç”¨</li>
<li>åº”ç”¨åœ¨å¾ªç¯ / UI / çƒ­è·¯å¾„ä¸­</li>
<li>inline æ”¶ç›Š &gt; ä»£ç è†¨èƒ€æˆæœ¬</li>
</ul>
<h2 data-id="heading-9">DSLï¼ŒæŠŠæ¡å¥½â€œæå‡å¯è¯»æ€§â€ä¸â€œæ»¥ç”¨â€ä¹‹é—´çš„ç•Œé™</h2>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3f6f805ff7004862a181894f89e18a2b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTGVpX29mZmljaWFs:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767427710&amp;x-signature=s7yDmw0ziEFA4oiyoqcuzxdSf%2Fc%3D" alt="image.png" loading="lazy"/></p>
<p><code>DSLï¼ˆDomain-Specific Languageï¼Œé¢†åŸŸç‰¹å®šè¯­è¨€ï¼‰</code>ï¼Œæ˜¯ä¸€ç§ <strong>åªä¸ºæŸä¸ªç‰¹å®šé¢†åŸŸæœåŠ¡</strong> çš„è¯­è¨€ï¼Œç›®æ ‡ä¸æ˜¯â€œä»€ä¹ˆéƒ½èƒ½å¹²â€ï¼Œè€Œæ˜¯æŠŠè¿™ä¸ªé¢†åŸŸçš„è¡¨è¾¾åšåˆ°æœ€æ¸…æ™°ã€æœ€çœå¿ƒã€æœ€ä¸å®¹æ˜“å†™é”™ã€‚</p>
<p>å¦‚ä½•ç†è§£â€œé¢†åŸŸâ€å‘¢ï¼Ÿåœ¨æˆ‘çœ‹æ¥ï¼Œâ€œé¢†åŸŸâ€æ˜¯æŒ‡ç‰¹å®šçš„åœºæ™¯ã€è¯­å¢ƒã€ä¸Šä¸‹æ–‡ï¼Œå®ƒå…·æœ‰ä¸€å®šçš„é‡å¤æ€§ï¼Œå› æ­¤é€šè¿‡æç‚¼æ€»ç»“ DSLï¼Œèƒ½å¤Ÿé™ä½é‡å¤ä½¿ç”¨çš„æˆæœ¬ã€‚â€œé¢†åŸŸâ€å¯ä»¥æ˜¯æŠ€æœ¯ä¸Šçš„ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸šåŠ¡åœºæ™¯é‡Œçš„ã€‚</p>
<h3 data-id="heading-10">GPL ä¸ DSL</h3>
<p>ä¸ DSL ç›¸å¯¹çš„æ¦‚å¿µï¼Œæ˜¯ <strong>é€šç”¨è¯­è¨€ï¼ˆGPLï¼‰</strong>ï¼ŒJava / Kotlin / C++ éƒ½å±äºæ­¤ç±»ï¼Œå®ƒä»¬åŠŸèƒ½å¼ºå¤§ä¸”å…¨é¢ï¼Œä½†éšä¹‹è€Œæ¥çš„ï¼Œæ˜¯å†™æ³•ä¸¥è°¨ç”šè‡³å†—é•¿ï¼Œæ— æ³•åšåˆ°é’ˆå¯¹ç‰¹å®šåœºæ™¯ï¼ˆé¢†åŸŸï¼‰è¿›è¡Œç®€åŒ–ã€‚</p>
<p>DSL åˆ™ä¸“æ³¨äºè§£å†³ä¸€ä¸ªç‰¹å®šé¢†åŸŸçš„é—®é¢˜ï¼Œä¸ºæ­¤è¿›è¡Œäº†ç‰¹å®šä¼˜åŒ–ï¼ŒçŸ­ã€å¹³ã€å¿«ã€å‡†ã€‚</p>
<p>GPLã€DSL éƒ½å¯ä»¥è§£å†³é—®é¢˜ï¼Œé‡ç‚¹åœ¨äºé€‰æ‹©ä½¿ç”¨å“ªä¸€ä¸ªã€‚</p>
<h3 data-id="heading-11">DSL çš„ä¸¤å¤§ç±»å‹ï¼šå¤–éƒ¨ DSL</h3>
<p>å¤–éƒ¨ DSL å…·å¤‡ <strong>ç‹¬ç«‹çš„è¯­æ³•å’Œè§£æå™¨</strong> ï¼Œæ›´åƒä¸€é—¨æ–°çš„ç¼–ç¨‹è¯­è¨€ï¼Œå› æ­¤å…¶è¡¨è¾¾èƒ½åŠ›å¾ˆå¼ºã€‚åŒæ—¶ï¼Œç”±äºä¾èµ–äºç‰¹å®šè§£æå™¨ï¼Œæ•…å®šåˆ¶æˆæœ¬é«˜ã€‚</p>
<p>å¸¸è§çš„å¤–éƒ¨ DSL æœ‰ï¼š</p>
<ul>
<li>SQL</li>
<li>æ­£åˆ™è¡¨è¾¾å¼</li>
<li>Gradle Groovy/Kotlin DSLï¼ˆbuild.gradleï¼‰</li>
<li>HTML / CSS</li>
</ul>
<h3 data-id="heading-12">DSL çš„ä¸¤å¤§ç±»å‹ï¼šå†…éƒ¨ DSL</h3>
<p>å†…éƒ¨ DSL åœ¨ Kotlin è¯­è¨€ä¸­æ˜¯éå¸¸å¸¸è§çš„ï¼Œä¾‹å¦‚å‰æ–‡çš„ <code>let</code>ã€<code>apply</code>ã€<code>also</code> ç­‰å‡å±äºæ­¤ç±»ã€‚å¯ä»¥é€šè¿‡ Kotlin è¯­æ³•ç‰¹æ€§ï¼Œä½¿ä»£ç â€œçœ‹èµ·æ¥åƒæ–°çš„è¯­è¨€â€ã€‚Kotlin çš„æ ‡å‡†åº“ä¸­ï¼Œæœ‰å¾ˆå¤š API æœ¬èº«å°±æ˜¯ DSLã€‚ä¸¾ä¸¤ä¸ªå¸¸è§çš„ä¾‹å­ï¼š</p>
<p><strong>ä¾‹1ï¼ŒLambda with Receiver</strong></p>
<p>å®šä¹‰ <code>user</code> DSLï¼Œä»£æ›¿ <code>set</code> å‡½æ•°ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// ä½¿ç”¨ Lambdaï¼ŒåŸŸå†…å¯¹è±¡ä¸º User</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">user</span><span class="hljs-params">(block: <span class="hljs-type">User</span>.() -&gt; <span class="hljs-type">Unit</span>)</span></span> {
    <span class="hljs-keyword">val</span> u = User()
    u.block()
}

<span class="hljs-comment">// ä½¿ç”¨ DSL</span>
user {
	name = <span class="hljs-string">"Lei"</span>
}

<span class="hljs-comment">// ä¸ä½¿ç”¨ DSL</span>
user.setName(<span class="hljs-string">"Lei"</span>)
</code></pre>
<p><strong>ä¾‹2ï¼Œ infix å‡½æ•°</strong></p>
<p>å¯ä»¥æå‡å¯è¯»æ€§ï¼Œä¾‹å¦‚å®šä¹‰äºŒå…ƒè¿ç®—ç¬¦ <code>eq</code>ï¼Œæ¯”è¾ƒ String å¯¹è±¡ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// å£°æ˜ DSL</span>
<span class="hljs-keyword">infix</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> String.<span class="hljs-title">eq</span><span class="hljs-params">(value: <span class="hljs-type">String</span>)</span></span>

<span class="hljs-comment">// ä½¿ç”¨ DSL</span>
<span class="hljs-string">"status"</span> eq <span class="hljs-string">"success"</span>
</code></pre>
<blockquote>
<p>Gradle Kotlinã€Jetpack Composeã€HTML éƒ½æ˜¯å…¸å‹çš„ DSLï¼ŒUIç»“æ„=ä»£ç ç»“æ„ï¼Œèµ·åˆ°â€œçœ‹ä»£ç çŸ¥UIâ€çš„ä½œç”¨ã€‚</p>
</blockquote>
<h3 data-id="heading-13">DSL ä¸æ˜¯ç‚«æŠ€å·¥å…·ï¼Œè€Œæ˜¯æŠŠä¸šåŠ¡è§„åˆ™æå–ä¸ºä»£ç çš„æ‰‹æ®µ</h3>













<table><thead><tr><th>å€¼å¾—è®¾è®¡ DSL</th><th>ä¸è¯¥ç”¨DSL</th></tr></thead><tbody><tr><td>âœ…æ˜¯ä¸æ˜¯åå¤å†™ç›¸åŒç»“æ„ï¼Ÿ<br/>âœ…ä¸šåŠ¡è§„åˆ™æ˜¯å¦å›ºå®šï¼Ÿ<br/>âœ…ç°åœ¨çš„ä»£ç æ˜¯å¦â€œçœ‹ä¸å‡ºä¸šåŠ¡è¯­ä¹‰â€ï¼Ÿ<br/>âœ…é”™è¯¯æ˜¯ä¸æ˜¯ç»å¸¸å‘ç”Ÿåœ¨â€œç”¨æ³•ä¸å¯¹â€ï¼Ÿ</td><td>âŒä¸€æ¬¡æ€§é€»è¾‘<br/>âŒéœ€æ±‚ä¸ç¨³å®š<br/>âŒå›¢é˜Ÿ Kotlin æ°´å¹³å‚å·®<br/>âŒDSL è®¾è®¡è€…ä¸åœ¨ä¸€çº¿ç»´æŠ¤</td></tr></tbody></table></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[AI é©±åŠ¨å‰ç«¯å¼€å‘è¦†ç›–çš„èƒ½åŠ›å…¨æ™¯æ‹†è§£]]></title>    <link>https://juejin.cn/post/7588093282531196980</link>    <guid>https://juejin.cn/post/7588093282531196980</guid>    <pubDate>2025-12-28T07:33:05.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588093282531196980" data-draft-id="7588098335791005696" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="AI é©±åŠ¨å‰ç«¯å¼€å‘è¦†ç›–çš„èƒ½åŠ›å…¨æ™¯æ‹†è§£"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-12-28T07:33:05.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æœˆäº®æœ‰çŸ³å¤´"/> <meta itemprop="url" content="https://juejin.cn/user/3526889032395613"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            AI é©±åŠ¨å‰ç«¯å¼€å‘è¦†ç›–çš„èƒ½åŠ›å…¨æ™¯æ‹†è§£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3526889032395613/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æœˆäº®æœ‰çŸ³å¤´
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-28T07:33:05.000Z" title="Sun Dec 28 2025 07:33:05 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-28
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p><strong>AI æ­£åœ¨æ”¹å˜å‰ç«¯å¼€å‘ï¼Œä½†ä¸æ˜¯â€œæ›¿ä½ å†™é¡µé¢â€é‚£ä¹ˆç®€å•ã€‚</strong></p>
</blockquote>
<p>åœ¨è¿‡å»ä¸€å¹´é‡Œï¼Œå…³äº AI ä¸å‰ç«¯çš„è®¨è®ºï¼Œå‡ ä¹éƒ½é›†ä¸­åœ¨ä¸€ä¸ªé—®é¢˜ä¸Šï¼š</p>
<blockquote>
<p><strong>AI èƒ½ä¸èƒ½ç›´æ¥æŠŠå‰ç«¯é¡µé¢å†™å‡ºæ¥ï¼Ÿ</strong></p>
</blockquote>
<p>å®é™…å·¥ç¨‹ä¸­çš„ç­”æ¡ˆå¾€å¾€æ˜¯ï¼š<br/>
<strong>èƒ½å†™ï¼Œä½†ä¸ä¸€å®šè¯¥å†™ï¼›èƒ½è·‘ï¼Œä½†ä¸ä¸€å®šèƒ½ç»´æŠ¤ã€‚</strong></p>
<p>æœ¬æ–‡å°è¯•è·³å‡ºâ€œæŸä¸ªå·¥å…·/æ¡†æ¶â€çš„è§†è§’ï¼Œä»<strong>å·¥ç¨‹å…¨æµç¨‹</strong>å‡ºå‘ï¼Œç³»ç»Ÿæ€§æ‹†è§£ï¼š</p>
<ul>
<li>AI åœ¨å‰ç«¯å¼€å‘ä¸­<strong>åˆ°åº•èƒ½åšå“ªäº›äº‹</strong></li>
<li>å“ªäº›èƒ½åŠ›é€‚åˆâ€œç›´æ¥ç”¨ AIâ€</li>
<li>å“ªäº›èƒ½åŠ›å¿…é¡»è¿›å…¥<strong>å·¥ç¨‹é“¾è·¯</strong></li>
<li>å¦‚ä½•åœ¨çœŸå®å›¢é˜Ÿä¸­ç»„åˆä½¿ç”¨ï¼Œé¿å…â€œAI å·¥ç¨‹åæ¨¡å¼â€</li>
</ul>
<h2 data-id="heading-0">ä¸€ã€å…ˆç»™ç»“è®ºï¼šAI ä¸è¯¥åªç›¯ç€â€œå†™é¡µé¢â€</h2>
<p>åœ¨çœŸå®é¡¹ç›®ä¸­ï¼Œå‰ç«¯å¼€å‘å¹¶ä¸åªæ˜¯â€œå†™ç»„ä»¶â€ï¼š</p>
<ul>
<li>æœ‰éœ€æ±‚æ‹†è§£</li>
<li>æœ‰è§„æ ¼è®¾è®¡</li>
<li>æœ‰å·¥ç¨‹çº¦æŸ</li>
<li>æœ‰æµ‹è¯•ä¸æ²»ç†</li>
<li>æœ‰é•¿æœŸç»´æŠ¤æˆæœ¬</li>
</ul>
<p><strong>AI çš„ä»·å€¼ï¼Œåˆ†å¸ƒåœ¨æ•´ä¸ªé“¾è·¯ä¸­ï¼Œè€Œä¸æ˜¯é›†ä¸­åœ¨â€œä»£ç ç”Ÿæˆâ€è¿™ä¸€ç‚¹ä¸Šã€‚</strong></p>
<p>å¦‚æœåªè®¨è®ºâ€œAI å†™é¡µé¢â€ï¼Œä¼šä¸¥é‡ä½ä¼°å®ƒçš„å·¥ç¨‹æ½œåŠ›ã€‚</p>
<h2 data-id="heading-1">äºŒã€å‰ç«¯å·¥ç¨‹å…¨æµç¨‹æ‹†è§£ï¼ˆAI èƒ½ä»‹å…¥çš„ 9 ä¸ªç¯èŠ‚ï¼‰</h2>
<p>ä»å·¥ç¨‹è§’åº¦ï¼Œä¸€ä¸ªå…¸å‹çš„å‰ç«¯ä¸­åå°å¼€å‘æµç¨‹å¯ä»¥æ‹†æˆ 9 ä¸ªé˜¶æ®µï¼š</p>
<ol>
<li><strong>éœ€æ±‚ç†è§£ä¸æ‹†è§£</strong></li>
<li><strong>è§„æ ¼åŒ–ï¼ˆSpec / Schemaï¼‰</strong></li>
<li><strong>æ¨¡æ¿/è„šæ‰‹æ¶ç”Ÿæˆï¼ˆCodegenï¼‰</strong></li>
<li><strong>é¡µé¢ä¸ç»„ä»¶å®ç°</strong></li>
<li><strong>é‡æ„ä¸è¿ç§»</strong></li>
<li><strong>è°ƒè¯•ä¸ç¼ºé™·ä¿®å¤</strong></li>
<li><strong>æµ‹è¯•ä¸è´¨é‡ä¿éšœ</strong></li>
<li><strong>ä»£ç è¯„å®¡ä¸å·¥ç¨‹æ²»ç†</strong></li>
<li><strong>æ–‡æ¡£ä¸çŸ¥è¯†æ²‰æ·€</strong></li>
</ol>
<p>ä¸‹é¢é€ä¸€åˆ†æï¼š<strong>AI åœ¨æ¯ä¸€å±‚çš„çœŸå®ä»·å€¼ä¸é£é™©</strong>ã€‚</p>
<h2 data-id="heading-2">ä¸‰ã€éœ€æ±‚ç†è§£ä¸æ‹†è§£ï¼šAI çš„â€œç¬¬ä¸€ç”Ÿäº§åŠ›â€</h2>
<h3 data-id="heading-3">AI éå¸¸æ“…é•¿çš„äº‹</h3>
<ul>
<li>å°†è‡ªç„¶è¯­è¨€éœ€æ±‚æ‹†è§£ä¸ºé¡µé¢/åŠŸèƒ½ç‚¹æ¸…å•</li>
<li>åˆ—å‡ºå­—æ®µã€æ“ä½œã€æƒé™ã€å¼‚å¸¸åœºæ™¯</li>
<li>è¾…åŠ©è¡¥é½é—æ¼çš„è¾¹ç•Œæ¡ä»¶</li>
</ul>
<h3 data-id="heading-4">å·¥ç¨‹ä»·å€¼</h3>
<ul>
<li>å‡å°‘æ²Ÿé€šæˆæœ¬</li>
<li>é™ä½é—æ¼é£é™©</li>
<li>æé«˜éœ€æ±‚è¿›å…¥å®ç°é˜¶æ®µçš„è´¨é‡</li>
</ul>
<p>ğŸ‘‰ <strong>è¿™æ˜¯â€œä½é£é™©ã€é«˜æ”¶ç›Šâ€çš„ AI ä½¿ç”¨åœºæ™¯ï¼Œå‡ ä¹æ²¡æœ‰å‰¯ä½œç”¨ã€‚</strong></p>
<h2 data-id="heading-5">å››ã€è§„æ ¼åŒ–ï¼ˆSpec / Schemaï¼‰ï¼šAI æœ€ç†æƒ³çš„è¾“å‡ºå½¢æ€</h2>
<p>ç›¸æ¯”ç›´æ¥å†™ä»£ç ï¼ŒAI æ›´é€‚åˆè¾“å‡º<strong>ç»“æ„åŒ–è§„æ ¼</strong>ï¼Œä¾‹å¦‚ï¼š</p>
<ul>
<li>é¡µé¢é…ç½®ï¼ˆå­—æ®µã€è¡¨å•ã€æ ¡éªŒï¼‰</li>
<li>æ¥å£å¥‘çº¦ï¼ˆOpenAPI / DTOï¼‰</li>
<li>è·¯ç”±ä¸æƒé™å£°æ˜</li>
<li>è¡¨æ ¼åˆ—ã€æœç´¢æ¡ä»¶ã€çŠ¶æ€æšä¸¾</li>
</ul>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"title"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ä¾›åº”å•†ç®¡ç†"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"columns"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-punctuation">{</span> <span class="hljs-attr">"prop"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"name"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"label"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ä¾›åº”å•†åç§°"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">{</span> <span class="hljs-attr">"prop"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"status"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"label"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"çŠ¶æ€"</span> <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h3 data-id="heading-6">ä¸ºä»€ä¹ˆè¿™æ˜¯ AI çš„â€œç”œèœœç‚¹â€ï¼Ÿ</h3>
<ul>
<li>ç»“æ„åŒ–è¾“å‡ºç¨³å®š</li>
<li>å¯æ ¡éªŒã€å¯ diff</li>
<li>å¯è¿›å…¥å·¥ç¨‹é“¾è·¯</li>
<li>å¯åå¤å¤ç”¨</li>
</ul>
<p>ğŸ‘‰ <strong>Spec æ˜¯ AI ä¸å·¥ç¨‹ä¹‹é—´æœ€é‡è¦çš„â€œæ¥å£å±‚â€ã€‚</strong></p>
<h2 data-id="heading-7">äº”ã€æ¨¡æ¿ / è„šæ‰‹æ¶ç”Ÿæˆï¼šAI çš„æ”¾å¤§å™¨ï¼Œè€Œä¸æ˜¯ä¸»è§’</h2>
<p>åœ¨æœ‰ Spec çš„å‰æä¸‹ï¼Œå‰ç«¯å¯ä»¥é€šè¿‡ï¼š</p>
<ul>
<li>é¡µé¢æ¨¡æ¿</li>
<li>ä»£ç ç”Ÿæˆå™¨</li>
<li>AST å·¥å…·</li>
</ul>
<p><strong>ç¡®å®šæ€§åœ°ç”Ÿæˆä»£ç éª¨æ¶</strong>ã€‚</p>
<p>æ­¤æ—¶ AI çš„è§’è‰²æ˜¯ï¼š</p>
<ul>
<li>ç”Ÿæˆ Spec</li>
<li>è€Œä¸æ˜¯ç›´æ¥ç”Ÿæˆé¡µé¢æ–‡ä»¶</li>
</ul>
<h3 data-id="heading-8">å·¥ç¨‹æ”¶ç›Š</h3>
<ul>
<li>ä»£ç é£æ ¼ç»Ÿä¸€</li>
<li>å¯é‡å¤ç”Ÿæˆ</li>
<li>æ˜“äºå›æ»š</li>
<li>æ–°äººå‹å¥½</li>
</ul>
<p>ğŸ‘‰ <strong>æ¨¡æ¿ + ç”Ÿæˆå™¨è´Ÿè´£â€œç¨³å®šæ€§â€ï¼ŒAI è´Ÿè´£â€œå˜åŒ–â€ã€‚</strong></p>
<h2 data-id="heading-9">å…­ã€é¡µé¢ä¸ç»„ä»¶å®ç°ï¼šAI çš„é«˜é£é™©åŒº</h2>
<h3 data-id="heading-10">é€‚åˆ AI ç›´æ¥å‚ä¸çš„åœºæ™¯</h3>
<ul>
<li>Demo / åŸå‹</li>
<li>å†…éƒ¨å·¥å…·</li>
<li>æ¢ç´¢æ€§ UI</li>
<li>ä¸€æ¬¡æ€§é¡µé¢</li>
</ul>
<h3 data-id="heading-11">é«˜é£é™©åœºæ™¯</h3>
<ul>
<li>æƒé™é€»è¾‘</li>
<li>æ ¸å¿ƒä¸šåŠ¡æµç¨‹</li>
<li>å¤æ‚çŠ¶æ€ç®¡ç†</li>
<li>è·¨æ¨¡å—äº¤äº’</li>
</ul>
<p>åœ¨è¿™äº›åœºæ™¯ä¸­ï¼Œ<strong>è®© AI ç›´æ¥å†™ä»£ç ï¼Œå¾€å¾€æ˜¯ä¸€ä¸ªå·¥ç¨‹åæ¨¡å¼</strong>ï¼š</p>
<ul>
<li>ä¸ç¨³å®š</li>
<li>éš¾ review</li>
<li>éš¾ä»¥é•¿æœŸç»´æŠ¤</li>
</ul>
<p>ğŸ‘‰ <strong>è¿™é‡Œæ›´é€‚åˆâ€œå°èŒƒå›´ã€å—é™â€çš„ AI è¾…åŠ©ï¼Œè€Œä¸æ˜¯æ”¾æƒã€‚</strong></p>
<h2 data-id="heading-12">ä¸ƒã€é‡æ„ä¸è¿ç§»ï¼šAI çš„â€œè€å¿ƒå‹åŠ³åŠ¨åŠ›â€</h2>
<p>åœ¨è¿™äº›åœºæ™¯ä¸­ï¼ŒAI éå¸¸æœ‰ä»·å€¼ï¼š</p>
<ul>
<li>Vue2 â†’ Vue3</li>
<li>Router / çŠ¶æ€åº“å‡çº§</li>
<li>API è°ƒæ•´å¼•å‘çš„æ‰¹é‡ä¿®æ”¹</li>
</ul>
<h3 data-id="heading-13">æœ€ä½³å®è·µ</h3>
<ul>
<li>æŒ‰æ¨¡å—æ‹†åˆ†</li>
<li>å°æ­¥ PR</li>
<li>lint / test å…œåº•</li>
<li>AI è¾“å‡º patchï¼ˆdiffï¼‰ï¼Œè€Œä¸æ˜¯æ•´æ–‡ä»¶</li>
</ul>
<p>ğŸ‘‰ <strong>AI å¾ˆé€‚åˆåšâ€œé‡å¤ä½†ç»†è‡´â€çš„è¿ç§»å·¥ä½œã€‚</strong></p>
<h2 data-id="heading-14">å…«ã€è°ƒè¯•ä¸ä¿®å¤ï¼šæŠ¥é”™é©±åŠ¨çš„é«˜æ€§ä»·æ¯”åœºæ™¯</h2>
<p>è¿™æ˜¯ç›®å‰ AI åœ¨å·¥ç¨‹ä¸­<strong>æ€§ä»·æ¯”æœ€é«˜</strong>çš„ç”¨é€”ä¹‹ä¸€ï¼š</p>
<ul>
<li>lint æŠ¥é”™</li>
<li>ç¼–è¯‘å¤±è´¥</li>
<li>æµ‹è¯•å¤±è´¥</li>
</ul>
<p>å°†é”™è¯¯æ—¥å¿— + ç›¸å…³æ–‡ä»¶äº¤ç»™ AIï¼Œé™åˆ¶æ”¹åŠ¨èŒƒå›´ï¼š</p>
<ul>
<li>åªæ”¹æŒ‡å®šæ–‡ä»¶</li>
<li>åªåšæœ€å° diff</li>
</ul>
<p>ğŸ‘‰ <strong>è¿™æ˜¯â€œå¯æ§ã€å¯å›æ»šã€ç«‹ç«¿è§å½±â€çš„ AI ç”¨æ³•ã€‚</strong></p>
<h2 data-id="heading-15">ä¹ã€æµ‹è¯•ã€è¯„å®¡ä¸å·¥ç¨‹æ²»ç†ï¼šAI çš„éšè—ä»·å€¼</h2>
<h3 data-id="heading-16">æµ‹è¯•</h3>
<ul>
<li>ç”Ÿæˆå•æµ‹ç”¨ä¾‹</li>
<li>è¡¥é½è¾¹ç•Œæµ‹è¯•</li>
<li>ç”Ÿæˆ mock æ•°æ®</li>
</ul>
<h3 data-id="heading-17">Review / æ²»ç†</h3>
<ul>
<li>æ€»ç»“ PR é£é™©ç‚¹</li>
<li>æ£€æŸ¥é£æ ¼ä¸€è‡´æ€§</li>
<li>æç¤ºæ½œåœ¨æŠ€æœ¯å€º</li>
</ul>
<p>ğŸ‘‰ <strong>AI åœ¨â€œè¾…åŠ©åˆ¤æ–­â€å±‚é¢çš„ä»·å€¼ï¼Œè¿œå¤§äºâ€œæ›¿ä½ å†™ä»£ç â€ã€‚</strong></p>
<h2 data-id="heading-18">åã€ä¸¤ç§ AI ä½¿ç”¨èŒƒå¼çš„å¯¹æ¯”</h2>
<h3 data-id="heading-19">Vibe Codingï¼ˆå³å…´ç¼–ç ï¼‰</h3>
<ul>
<li>AI ç›´æ¥å†™/æ”¹ä»£ç </li>
<li>å¿«ã€çˆ½ã€æ¢ç´¢æ€§å¼º</li>
<li>éš¾å®¡è®¡ã€éš¾è§„æ¨¡åŒ–</li>
</ul>
<h3 data-id="heading-20">Spec-Driven Codingï¼ˆè§„æ ¼é©±åŠ¨ï¼‰</h3>
<ul>
<li>AI äº§ Spec / Patch</li>
<li>æ¨¡æ¿/ç”Ÿæˆå™¨äº§ä»£ç </li>
<li>lint / test / CI å…œåº•</li>
<li>ç¨³å®šã€å¯æ§ã€å›¢é˜Ÿå‹å¥½</li>
</ul>
<blockquote>
<p><strong>çœŸå®å·¥ç¨‹ä¸­ï¼Œæ¢ç´¢ç”¨ vibeï¼Œäº¤ä»˜ç”¨ spec-drivenã€‚</strong></p>
</blockquote>
<h2 data-id="heading-21">åä¸€ã€ä»å·¥ç¨‹è§†è§’çš„èƒ½åŠ›ä¼˜å…ˆçº§å»ºè®®</h2>
<h3 data-id="heading-22">ä¼˜å…ˆè½åœ°ï¼ˆä½é£é™©ï¼‰</h3>
<ol>
<li>éœ€æ±‚æ‹†è§£</li>
<li>Spec ç”Ÿæˆ</li>
<li>æ–‡æ¡£/è¯´æ˜</li>
<li>lint/test ä¿®å¤</li>
</ol>
<h3 data-id="heading-23">éœ€è¦æ²»ç†åè½åœ°</h3>
<ol>
<li>é¡µé¢ç”Ÿæˆ</li>
<li>è¿ç§»é‡æ„</li>
<li>æµ‹è¯•ä½“ç³»è¡¥é½</li>
</ol>
<h3 data-id="heading-24">è°¨æ…ä½¿ç”¨</h3>
<ol>
<li>æ ¸å¿ƒä¸šåŠ¡é€»è¾‘</li>
<li>æ¶æ„çº§é‡æ„</li>
</ol>
<h2 data-id="heading-25">åäºŒã€æ€»ç»“ï¼šAI åœ¨å‰ç«¯çš„â€œæ­£ç¡®ä½ç½®â€</h2>
<p>AI å¹¶ä¸æ˜¯æ¥â€œæ›¿ä»£å‰ç«¯å·¥ç¨‹å¸ˆå†™é¡µé¢â€çš„ã€‚<br/>
å®ƒçœŸæ­£æ“…é•¿çš„æ˜¯ï¼š</p>
<blockquote>
<p><strong>æŠŠå˜åŒ–ç»“æ„åŒ–ï¼ŒæŠŠé‡å¤è‡ªåŠ¨åŒ–ï¼ŒæŠŠè´¨é‡äº¤ç»™å·¥ç¨‹é“¾è·¯ã€‚</strong></p>
</blockquote>
<p>å¦‚æœåªèƒ½è®°ä½ä¸€å¥è¯ï¼š</p>
<blockquote>
<p><strong>AI çš„èƒ½åŠ›ä¸è¯¥ç»•å¼€å·¥ç¨‹ï¼Œè€Œåº”è¯¥è¢«å·¥ç¨‹çº¦æŸã€‚</strong></p>
</blockquote>
<p>å¦‚æœè¿™ç¯‡æ–‡ç« å¯¹ä½ æœ‰å¯å‘ï¼Œæ¬¢è¿ç‚¹èµæˆ–æ”¶è— ğŸ‘</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[44 ä¸ªæ¸¸æˆäººç”Ÿçš„æ®‹é…·çœŸç›¸ - çº³ç“¦å°” ä¸­è‹±ä¿®è®¢]]></title>    <link>https://juejin.cn/post/7588093282531229748</link>    <guid>https://juejin.cn/post/7588093282531229748</guid>    <pubDate>2025-12-28T07:41:22.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588093282531229748" data-draft-id="7588093282531213364" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="44 ä¸ªæ¸¸æˆäººç”Ÿçš„æ®‹é…·çœŸç›¸ - çº³ç“¦å°” ä¸­è‹±ä¿®è®¢"/> <meta itemprop="keywords" content="ç¨‹åºå‘˜"/> <meta itemprop="datePublished" content="2025-12-28T07:41:22.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å°å…µå¼ å¥"/> <meta itemprop="url" content="https://juejin.cn/user/1257497032405229"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            44 ä¸ªæ¸¸æˆäººç”Ÿçš„æ®‹é…·çœŸç›¸ - çº³ç“¦å°” ä¸­è‹±ä¿®è®¢
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1257497032405229/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å°å…µå¼ å¥
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-28T07:41:22.000Z" title="Sun Dec 28 2025 07:41:22 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-28
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>è¿™æ˜¯çº³ç“¦å°”æœ€æ–°çš„è®¿è°ˆåšå®¢çš„æ–‡ç¨¿ï¼Œæ˜¯ä¸€ç¯‡éå¸¸æ™ºæ…§çš„æ–‡ç« ï¼Œæ˜¯äººç”Ÿé€šå‘å¹¸ç¦å’ŒæˆåŠŸçš„æ”»ç•¥ã€‚å®ƒæœ¬èº«éå¸¸å®Œæ•´ï¼ŒåŸå§‹çš„é‡‡è®¿å°±æœ‰ 3 ä¸ªå¤šå°æ—¶ï¼Œæ¶µç›–äº†äººç”Ÿçš„æ–¹æ–¹é¢é¢ã€‚ä½†å®ƒåŸæ–‡æ˜¯è‹±æ–‡çš„ï¼Œå¾ˆå¤šè§†é¢‘å­—å¹•æ˜¯æœºç¿»ï¼Œä¼ è¾¾äº†é”™è¯¯çš„ä¿¡æ¯ã€‚</p>
<p>æ‰€ä»¥æˆ‘å¯¹æ•´ç¯‡é‡‡è®¿çš„æ–‡ç¨¿åšäº†ä¿®æ­£å’Œç²¾ç¿»ï¼Œå¹¶å‡†å¤‡åšä¸€å¥—æ›´æ·±å…¥ã€æ›´ç¬¦åˆä¸­æ–‡è¯­å¢ƒçš„è®²è§£ï¼Œè¯¦ç»†è¯´æ˜çº³ç“¦å°”çš„ç†å¿µï¼Œå¸Œæœ›å¯ä»¥å¸®åˆ°ä½ ï¼Œè®²è§£åœ¨é£ä¹¦çš„è¯„è®ºé‡Œé¢ã€‚</p>
<p>æ–‡ç« å¤ªé•¿ï¼Œè¯·è·³è½¬ <a href="https://link.juejin.cn?target=https%3A%2F%2Fai.feishu.cn%2Fwiki%2FXqfXwL9xaiOeDAkiBeUcjqFfnwh%3Ffrom%3Dfrom_copylink" target="_blank" title="https://ai.feishu.cn/wiki/XqfXwL9xaiOeDAkiBeUcjqFfnwh?from=from_copylink" ref="nofollow noopener noreferrer">44 Harsh Truths About The Game Of Life - Naval Ravikant 44 ä¸ªæ¸¸æˆäººç”Ÿçš„æ®‹é…·çœŸç›¸ - çº³ç“¦å°” ä¸­è‹±ä¿®è®¢&amp;ç²¾ç¿»</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Flutteré™åˆ¶è¾“å…¥æ¡†åªèƒ½è¾“å…¥ä¸­æ–‡ï¼ŒiOSæ‹¼éŸ³æ‰“ä¸å‡ºæ¥ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7588084804094459942</link>    <guid>https://juejin.cn/post/7588084804094459942</guid>    <pubDate>2025-12-28T06:33:33.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588084804094459942" data-draft-id="7588084804094443558" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content=" Flutteré™åˆ¶è¾“å…¥æ¡†åªèƒ½è¾“å…¥ä¸­æ–‡ï¼ŒiOSæ‹¼éŸ³æ‰“ä¸å‡ºæ¥ï¼Ÿ"/> <meta itemprop="keywords" content="Flutter"/> <meta itemprop="datePublished" content="2025-12-28T06:33:33.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ·¡å†™æˆç°"/> <meta itemprop="url" content="https://juejin.cn/user/2612095360181390"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
             Flutteré™åˆ¶è¾“å…¥æ¡†åªèƒ½è¾“å…¥ä¸­æ–‡ï¼ŒiOSæ‹¼éŸ³æ‰“ä¸å‡ºæ¥ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2612095360181390/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ·¡å†™æˆç°
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-28T06:33:33.000Z" title="Sun Dec 28 2025 06:33:33 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-28
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    4
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸­æ–‡è¾“å…¥å¿…è¸©çš„ Flutter å‘åˆé›†ï¼šiOS æ‹¼éŸ³æ‰“ä¸å‡ºæ¥ï¼Œå…¶å®æ˜¯ä½  Formatter å†™é”™äº†</h2>
<blockquote>
<p>å¦‚æœä½ åœ¨ Flutter é‡Œåšè¿‡ã€Œåªå…è®¸ä¸­æ–‡ / ä¸­è‹±æ–‡æ ¡éªŒã€ï¼Œå¹¶ä¸”<strong>åªåœ¨ iOS ä¸Šç¿»è¿‡è½¦</strong>ï¼Œé‚£è¿™ç¯‡æ–‡ç« å¤§æ¦‚ç‡èƒ½å¸®ä½ èŠ‚çœåŠå¤© Debug æ—¶é—´ã€‚</p>
</blockquote>
<p>è¿™ä¸æ˜¯ iOS çš„é”…ï¼Œä¹Ÿä¸æ˜¯ Flutter çš„ Bugï¼Œè€Œæ˜¯ <strong>TextInputFormatter å’Œä¸­æ–‡è¾“å…¥æ³•ï¼ˆIMEï¼‰ä¹‹é—´çš„ç†è§£åå·®</strong>ã€‚</p>
<hr/>
<h3 data-id="heading-1">ä¸€ã€è¡€iOS ä¸Šæ‹¼éŸ³æ€ä¹ˆéƒ½æ‰“ä¸å‡ºæ¥</h3>
<p>å¸¸è§åé¦ˆåŒ…æ‹¬ï¼š</p>
<ul>
<li>iOS ä¸­æ–‡æ‹¼éŸ³é”®ç›˜</li>
<li>è¾“å…¥ <code>bei jing</code></li>
<li>é”®ç›˜æœ‰æ‹¼éŸ³æ˜¾ç¤º</li>
<li>è¾“å…¥æ¡†å†…å®¹å®Œå…¨ä¸å˜</li>
<li>æ— æ³•é€‰è¯ã€æ— æ³•ä¸Šå±</li>
</ul>
<p>ğŸ‘‰ Android æ­£å¸¸<br/>
ğŸ‘‰ æ¨¡æ‹Ÿå™¨æ­£å¸¸<br/>
ğŸ‘‰ çœŸæœº iOS ä¸è¡Œ</p>
<p>å¾ˆå¤šäººç¬¬ä¸€ååº”æ˜¯ï¼š<br/>
<strong>â€œFlutter å¯¹ä¸­æ–‡æ”¯æŒä¸å¥½ï¼Ÿâ€</strong></p>
<p>ç»“è®ºå…ˆè¡Œï¼š<strong>ä¸æ˜¯ã€‚</strong></p>
<hr/>
<h3 data-id="heading-2">äºŒã€ç½ªé­ç¥¸é¦–ï¼šTextInputFormatter çš„ã€Œä¸­æ–‡æ ¡éªŒã€</h3>
<p>ä¸‹é¢è¿™ç§ Formatterï¼Œä½ ä¸€å®šå†™è¿‡æˆ–è§è¿‡ï¼š</p>
<pre><code class="hljs language-scala" lang="scala"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">NameInputFormatter</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">TextInputFormatter</span> </span>{
  <span class="hljs-meta">@override</span>
  <span class="hljs-type">TextEditingValue</span> formatEditUpdate(
    <span class="hljs-type">TextEditingValue</span> oldValue,
    <span class="hljs-type">TextEditingValue</span> newValue,
  ) {
    <span class="hljs-keyword">final</span> chineseOnly = <span class="hljs-type">RegExp</span>(r'^[\u4E00-\u9FFF]+$');

    <span class="hljs-keyword">if</span> (newValue.text.isEmpty) <span class="hljs-keyword">return</span> newValue;

    <span class="hljs-keyword">if</span> (!chineseOnly.hasMatch(newValue.text)) {
      <span class="hljs-keyword">return</span> oldValue; <span class="hljs-comment">// </span>
    }

    <span class="hljs-keyword">return</span> <span class="hljs-type">TextEditingValue</span>(
      text: newValue.text,
      selection: <span class="hljs-type">TextSelection</span>.collapsed(
        offset: newValue.text.length,
      ),
    );
  }
}
</code></pre>
<p>é€»è¾‘çœ‹èµ·æ¥éå¸¸åˆç†ï¼š</p>
<ul>
<li>åªå…è®¸ä¸­æ–‡</li>
<li>éæ³•å­—ç¬¦ç›´æ¥å›é€€</li>
</ul>
<p>ä½†åœ¨ iOS ä¸Šï¼Œè¿™æ®µä»£ç <strong>ç­‰äºå°æ­»äº†ä¸­æ–‡è¾“å…¥æ³•çš„å…¥å£</strong>ã€‚</p>
<hr/>
<h3 data-id="heading-3">ä¸‰ã€æ ¸å¿ƒåŸç†ï¼šiOS ä¸­æ–‡è¾“å…¥æ³•æœ‰ã€Œç»„å­—é˜¶æ®µã€</h3>
<h4 data-id="heading-4">1ï¸ composing æ˜¯ä»€ä¹ˆï¼Ÿ</h4>
<p>iOS æ‹¼éŸ³è¾“å…¥æ³•çš„è¾“å…¥è¿‡ç¨‹åˆ†ä¸ºä¸¤æ­¥ï¼š</p>
<ol>
<li>
<p><strong>ç»„å­—ï¼ˆcomposingï¼‰</strong></p>
<ul>
<li>è¾“å…¥ï¼š<code>bei</code></li>
<li>è¾“å…¥æ¡†é‡Œæ˜¯æ‹¼éŸ³ï¼ˆæœªç¡®è®¤ï¼‰</li>
</ul>
</li>
<li>
<p><strong>æäº¤</strong></p>
<ul>
<li>é€‰æ‹©ã€ŒåŒ—ã€</li>
<li>ä¸­æ–‡å­—ç¬¦çœŸæ­£ä¸Šå±</li>
</ul>
</li>
</ol>
<p>åœ¨ç»„å­—é˜¶æ®µï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">newValue.text</span> == <span class="hljs-string">"bei"</span>
<span class="hljs-attr">newValue.composing.isCollapsed</span> == <span class="hljs-literal">false</span>
</code></pre>
<p>è€Œ <code>"bei"</code> <strong>å¿…ç„¶æ— æ³•é€šè¿‡ã€Œåªå…è®¸ä¸­æ–‡ã€çš„æ­£åˆ™æ ¡éªŒ</strong>ã€‚</p>
<hr/>
<h4 data-id="heading-5">2ï¸ Formatter æå‰â€œå¦å†³â€äº†è¾“å…¥</h4>
<p>å½“ Formatter åœ¨ composing é˜¶æ®µåšäº†ä»¥ä¸‹ä»»æ„ä¸€ä»¶äº‹ï¼š</p>
<ul>
<li><code>return oldValue</code></li>
<li>ä¿®æ”¹ <code>text</code></li>
<li>å¼ºåˆ¶é‡ç½® <code>selection</code></li>
</ul>
<p>iOS è¾“å…¥æ³•å°±ä¼šè®¤ä¸ºï¼š<br/>
<strong>ã€Œå½“å‰è¾“å…¥ä¸åˆæ³•ï¼Œç»ˆæ­¢ç»„å­—ã€</strong></p>
<p>äºæ˜¯å‡ºç°ç»å…¸ç°è±¡ï¼š</p>
<blockquote>
<p>æ‹¼éŸ³èƒ½æ‰“ï¼Œä½†æ°¸è¿œæ— æ³•é€‰å­—</p>
</blockquote>
<hr/>
<h3 data-id="heading-6">å››ã€éšè—æ›´æ·±çš„å‘ï¼šselection ä¼šæ€æ­»è¾“å…¥æ³•</h3>
<p>å¾ˆå¤š Formatter é‡Œéƒ½æœ‰è¿™è¡Œï¼š</p>
<pre><code class="hljs language-vbnet" lang="vbnet"><span class="hljs-symbol">selection:</span> TextSelection.collapsed(offset: <span class="hljs-keyword">text</span>.length),
</code></pre>
<p>åœ¨æ™®é€šè¾“å…¥ä¸‹æ²¡é—®é¢˜ï¼Œä½†åœ¨ä¸­æ–‡è¾“å…¥ä¸­ï¼š</p>
<ul>
<li>selection æ˜¯ IME çŠ¶æ€çš„ä¸€éƒ¨åˆ†</li>
<li>æ¯æ¬¡é‡ç½® selection = é‡å¯ç»„å­—æµç¨‹</li>
</ul>
<p>å“ªæ€•ä½ æ”¾è¡Œäº†æ‹¼éŸ³ï¼Œä¹Ÿå¯èƒ½å‡ºç°ï¼š</p>
<ul>
<li>å€™é€‰è¯å¼‚å¸¸</li>
<li>æ¸¸æ ‡è·³åŠ¨</li>
<li>è¾“å…¥ä½“éªŒæå·®</li>
</ul>
<hr/>
<h3 data-id="heading-7">äº”ã€é‚£ä¸ºä»€ä¹ˆ Android æ²¡è¿™ä¸ªé—®é¢˜ï¼Ÿ</h3>
<p>è¿™æ˜¯ä¸€ä¸ª<strong>éå¸¸å…³é”®ã€ä¹Ÿæœ€å®¹æ˜“è¯¯åˆ¤çš„ç‚¹</strong>ã€‚</p>
<h4 data-id="heading-8">Android çš„è¡Œä¸ºå·®å¼‚</h4>
<ul>
<li>Android è¾“å…¥æ³•å¯¹ composing çš„æš´éœ²ä¸ä¸€è‡´</li>
<li>å¾ˆå¤šé”®ç›˜åœ¨ <strong>å­—ç¬¦æäº¤åæ‰è§¦å‘ Formatter</strong></li>
<li>å³ä½¿ composing å­˜åœ¨ï¼Œä¹Ÿæ›´â€œå®½å®¹â€</li>
</ul>
<p>ç»“æœå°±æ˜¯ï¼š</p>
<blockquote>
<p><strong>é”™è¯¯çš„ Formatter åœ¨ Android ä¸Šâ€œçœ‹èµ·æ¥èƒ½ç”¨â€</strong></p>
</blockquote>
<p>ä½†è¿™å¹¶ä¸ä»£è¡¨ä»£ç æ˜¯å¯¹çš„ï¼Œåªæ˜¯ <strong>Android æ²¡é‚£ä¹ˆä¸¥æ ¼</strong>ã€‚</p>
<h4 data-id="heading-9">çœŸç›¸</h4>
<blockquote>
<p><strong>Android æ˜¯ä¾¥å¹¸æ²¡ç‚¸ï¼ŒiOS æ˜¯ä¸¥æ ¼æŠŠé—®é¢˜æš´éœ²å‡ºæ¥ã€‚</strong></p>
</blockquote>
<hr/>
<h3 data-id="heading-10">å…­ã€æ­£ç¡®åŸåˆ™</h3>
<h4 data-id="heading-11">1. composing é˜¶æ®µå¿…é¡»æ”¾è¡Œ</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">if</span> (!newValue.composing.isCollapsed) {
  <span class="hljs-keyword">return</span> newValue;
}
</code></pre>
<h4 data-id="heading-12">2. æ ¡éªŒåªåœ¨ composing ç»“æŸååš</h4>
<h4 data-id="heading-13">3. ä¸è¦æ— è„‘é‡ç½® selection</h4>
<h4 data-id="heading-14">4. Formatter â‰  è¡¨å•æœ€ç»ˆæ ¡éªŒ</h4>
<hr/>
<h3 data-id="heading-15">ä¸ƒã€æ­£ç¡®ç¤ºä¾‹</h3>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªå®‰å…¨ã€å¯æ‰©å±•ã€iOS / Android åŒç«¯ç¨³å®šçš„ Formatter ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">UniversityNameInputFormatter</span> extends TextInputFormatter {
  UniversityNameInputFormatter({this.maxLength = <span class="hljs-number">40</span>});

  final <span class="hljs-built_in">int</span> maxLength;

  static final RegExp _disallowed =
      RegExp(<span class="hljs-string">r'[^a-zA-Z0-9\u4E00-\u9FFF-\s]'</span>);
  static final RegExp _multiHyphen = RegExp(<span class="hljs-string">r'-{2,}'</span>);
  static final RegExp _leadingHyphen = RegExp(<span class="hljs-string">r'^-+'</span>);
  static final RegExp _trailingHyphen = RegExp(<span class="hljs-string">r'-+$'</span>);

<span class="hljs-meta">  @override</span>
  TextEditingValue formatEditUpdate(
    TextEditingValue oldValue,
    TextEditingValue newValue,
  ) {
    // iOS ä¸­æ–‡æ‹¼éŸ³ç»„å­—é˜¶æ®µ
    <span class="hljs-keyword">if</span> (!newValue.composing.isCollapsed) {
      <span class="hljs-keyword">return</span> newValue;
    }

    var text = newValue.text;
    <span class="hljs-keyword">if</span> (text.isEmpty) <span class="hljs-keyword">return</span> newValue;

    text = text.replaceAll(_disallowed, <span class="hljs-string">''</span>);
    text = text.replaceAll(_multiHyphen, <span class="hljs-string">'-'</span>);
    text = text.replaceAll(_leadingHyphen, <span class="hljs-string">''</span>);
    text = text.replaceAll(_trailingHyphen, <span class="hljs-string">''</span>);

    <span class="hljs-keyword">if</span> (text.length &gt; maxLength) {
      text = text.substring(<span class="hljs-number">0</span>, maxLength);
    }

    <span class="hljs-keyword">if</span> (text == newValue.text) <span class="hljs-keyword">return</span> newValue;

    <span class="hljs-built_in">int</span> clamp(<span class="hljs-built_in">int</span> o) =&gt; o.clamp(<span class="hljs-number">0</span>, text.length);

    <span class="hljs-keyword">return</span> TextEditingValue(
      text: text,
      selection: TextSelection(
        baseOffset: clamp(newValue.selection.baseOffset),
        extentOffset: clamp(newValue.selection.extentOffset),
      ),
      composing: TextRange.empty,
    );
  }
}
</code></pre>
<hr/>
<h3 data-id="heading-16">å…«ã€ä¸­æ–‡è¾“å…¥å¿…è¸©çš„ Flutter å‘åˆé›†ï¼ˆChecklistï¼‰</h3>
<h4 data-id="heading-17">âŒ å‘ 1ï¼šFormatter é‡Œç›´æ¥åšä¸­æ–‡æ­£åˆ™æ ¡éªŒ</h4>
<p><strong>åæœ</strong>ï¼šiOS æ‹¼éŸ³æ— æ³•è¾“å…¥</p>
<h4 data-id="heading-18">âŒ å‘ 2ï¼šå¿½ç•¥ <code>newValue.composing</code></h4>
<p><strong>åæœ</strong>ï¼šIME ç»„å­—è¢«æ‰“æ–­</p>
<h4 data-id="heading-19">âŒ å‘ 3ï¼šæ¯æ¬¡éƒ½æŠŠ selection ç§»åˆ°æœ«å°¾</h4>
<p><strong>åæœ</strong>ï¼šå€™é€‰è¯å¼‚å¸¸ã€æ¸¸æ ‡ä¹±è·³</p>
<h4 data-id="heading-20">âŒ å‘ 4ï¼šä»¥ä¸º Android æ­£å¸¸ = ä»£ç æ­£ç¡®</h4>
<p><strong>åæœ</strong>ï¼šiOS çœŸæœºç¿»è½¦</p>
<hr/>
<h3 data-id="heading-21">ä¹ã€ä¸€å¥è¯æ€»ç»“</h3>
<blockquote>
<p><strong>TextInputFormatter æ˜¯ IME è¾“å…¥æµç¨‹çš„ä¸€éƒ¨åˆ†ï¼Œä¸æ˜¯ç®€å•çš„å­—ç¬¦ä¸²è¿‡æ»¤å™¨ã€‚</strong></p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ”¯ä»˜é…ç½®æ—¶å¥½æ—¶åï¼Ÿå¼‚æ­¥æ–¹æ³•é‡Œçš„å¯¹è±¡å¼•ç”¨å‘]]></title>    <link>https://juejin.cn/post/7588010346071179274</link>    <guid>https://juejin.cn/post/7588010346071179274</guid>    <pubDate>2025-12-27T03:53:57.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588010346071179274" data-draft-id="7588010346071162890" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ”¯ä»˜é…ç½®æ—¶å¥½æ—¶åï¼Ÿå¼‚æ­¥æ–¹æ³•é‡Œçš„å¯¹è±¡å¼•ç”¨å‘"/> <meta itemprop="keywords" content="åç«¯,é¢è¯•,Java"/> <meta itemprop="datePublished" content="2025-12-27T03:53:57.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="9å·è¾¾äºº"/> <meta itemprop="url" content="https://juejin.cn/user/2450136052270077"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ”¯ä»˜é…ç½®æ—¶å¥½æ—¶åï¼Ÿå¼‚æ­¥æ–¹æ³•é‡Œçš„å¯¹è±¡å¼•ç”¨å‘
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2450136052270077/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    9å·è¾¾äºº
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-27T03:53:57.000Z" title="Sat Dec 27 2025 03:53:57 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    23
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä¸Šå‘¨æ¥åˆ°å®¢æœåé¦ˆã€‚</p>
<p>æœ‰äº›å•†æˆ·å¼€é€šä¹‹åï¼Œå¾®ä¿¡æ”¯ä»˜åŠŸèƒ½ä¸èƒ½ç”¨ï¼Œæœ‰äº›åˆå¯ä»¥ã€‚ä¸èƒ½ç”¨çš„å•†æˆ·å°±éœ€è¦å®¢æœæ‰‹åŠ¨ä»‹å…¥ï¼Œé‡æ–°é…ç½®æ”¯ä»˜å‚æ•°æ‰æ¢å¤æ­£å¸¸ã€‚</p>
<p>è¿™ä¸ªé—®é¢˜å°±å¾ˆè¯¡å¼‚ï¼Œ<strong>æ—¶å¥½æ—¶å</strong>ã€‚æœ‰æ—¶å€™æ­£å¸¸ï¼Œæœ‰æ—¶å€™å°±ä¸è¡Œã€‚</p>
<p>ä½†æ˜¯åå°æ—¥å¿—æ˜¾ç¤ºéƒ½æ˜¯é…ç½®æˆåŠŸã€‚ä»£ç æ‰§è¡Œå®Œäº†ï¼Œæ²¡æœ‰ä»»ä½•æŠ¥é”™ã€‚</p>
<h2 data-id="heading-0">è¯¡å¼‚çš„ç°è±¡</h2>
<p>å¼€å§‹æ’æŸ¥æ—¥å¿—ã€‚å‘ç°äº†å‡ ä¸ªå¾ˆå¥‡æ€ªçš„ç‚¹ï¼š</p>
<ol>
<li><strong>ä¸šåŠ¡æ—¥å¿—æ˜¾ç¤ºæˆåŠŸ</strong>ï¼Œæ²¡æœ‰ä»»ä½•å¼‚å¸¸</li>
<li><strong>è°ƒç”¨æ—¥å¿—æ˜¾ç¤ºä¸¤æ¬¡é…ç½®ç”¨çš„appidä¸€æ ·</strong></li>
<li><strong>ä»£ç æ˜æ˜å†™çš„æ˜¯ä¸¤ä¸ªä¸åŒçš„appid</strong></li>
<li><strong>é…ç½®æ–‡ä»¶ä¹Ÿæ²¡é—®é¢˜</strong>ï¼Œä¸¤ä¸ªappidéƒ½é…å¯¹äº†</li>
</ol>
<p>ä»£ç å†™çš„æ˜æ˜æ˜¯Aå’ŒBä¸¤ä¸ªappidï¼Œä¸ºå•¥æ—¥å¿—é‡Œéƒ½å˜æˆBäº†ï¼Ÿ</p>
<p>çœ‹äº†å¥½å‡ éæ—¥å¿—ï¼Œç¡®å®šæ²¡çœ‹é”™ã€‚ä¸¤æ¬¡è°ƒç”¨ä¼ å…¥çš„appidç¡®å®ä¸€æ¨¡ä¸€æ ·ã€‚</p>
<p>é‚£å°±åªèƒ½çœ‹çœ‹ä»£ç äº†ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">openMemberV2Service.wxConfig(openMemberV2DTO)<span class="hljs-comment">;</span>
openMemberV2DTO.setSupAppId(sysConfig.getWxHuikeOfficialAccountAppid())<span class="hljs-comment">;</span>
openMemberV2DTO.setAccountType("00")<span class="hljs-comment">;</span>
openMemberV2Service.wxConfig(openMemberV2DTO)<span class="hljs-comment">;</span>
LogUtil.info(log,Â "editGrantÂ &gt;&gt;Â å¼€é€šæˆåŠŸÂ &gt;&gt;Â <span class="hljs-attr">param</span>Â =Â {}<span class="hljs-string">",Â param);
</span></code></pre>
<p>ä¹ä¸€çœ‹ï¼Œå®Œå…¨æ²¡é—®é¢˜ã€‚</p>
<p>ç¬¬ä¸€æ¬¡è°ƒç”¨ç”¨çš„æ˜¯<code>openMemberV2DTO</code>åŸå§‹çš„appidã€‚ç¬¬äºŒæ¬¡è°ƒç”¨ä¹‹å‰ï¼Œæ˜æ˜ä¿®æ”¹äº†<code>supAppId</code>å’Œ<code>accountType</code>ã€‚</p>
<p>ä»£ç é€»è¾‘ä¹Ÿå¾ˆæ¸…æ™°ï¼Œä¸ºå•¥ä¼šå‡ºé—®é¢˜ï¼Ÿ</p>
<p>ä¼šä¸ä¼šæ˜¯é…ç½®æ–‡ä»¶æŠŠappidé…é”™äº†ï¼Ÿ</p>
<p>æ£€æŸ¥äº†é…ç½®æ–‡ä»¶ï¼š</p>
<p>é…ç½®ä¹Ÿæ²¡é—®é¢˜ã€‚ä¸¤ä¸ªappidéƒ½å¯¹ã€‚</p>
<p>æ—¢ç„¶ä»£ç é€»è¾‘æ²¡é—®é¢˜ï¼Œé…ç½®ä¹Ÿæ²¡é—®é¢˜ï¼Œé‚£é—®é¢˜å¤§æ¦‚ç‡å°±æ˜¯wxConfigè¿™ä¸ªæ–¹æ³•äº†</p>
<p>ç‚¹å¼€<code>wxConfig</code>æ–¹æ³•ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">public</span>Â <span class="hljs-built_in">void</span>Â <span class="hljs-title function_">wxConfig</span>(<span class="hljs-params">OpenMemberV2DTOÂ dto</span>)Â {
Â Â Â Â asyncTaskExecutor.<span class="hljs-title function_">execute</span>(()Â -&gt;Â {
Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â è·å–å‚æ•°</span>
Â Â Â Â Â Â Â Â <span class="hljs-title class_">String</span>Â subAppIdÂ =Â dto.<span class="hljs-title function_">getSupAppId</span>();
Â Â Â Â Â Â Â Â <span class="hljs-title class_">String</span>Â accountTypeÂ =Â dto.<span class="hljs-title function_">getAccountType</span>();

Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â è°ƒç”¨å¾®ä¿¡APIé…ç½®</span>
Â Â Â Â Â Â Â Â <span class="hljs-title class_">JSON</span><span class="hljs-built_in">Object</span>Â bodyÂ =Â <span class="hljs-keyword">new</span>Â <span class="hljs-title class_">JSON</span><span class="hljs-built_in">Object</span>();
Â Â Â Â Â Â Â Â body.<span class="hljs-title function_">put</span>(<span class="hljs-string">"sub_appid"</span>,Â subAppId);
Â Â Â Â Â Â Â Â body.<span class="hljs-title function_">put</span>(<span class="hljs-string">"account_type"</span>,Â accountType);

Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â è°ƒç”¨å¹³å°æ¥å£...</span>
Â Â Â Â Â Â Â Â platformManager.<span class="hljs-title function_">call</span>(callParam);
Â Â Â Â });
}
</code></pre>
<p>çœ‹åˆ°<code>asyncTaskExecutor.execute</code>ï¼Œç›¸ä¿¡å¤§å®¶å°±æ˜ç™½äº†ã€‚</p>
<p><strong>è¿™æ˜¯ä¸ªå¼‚æ­¥æ–¹æ³•ï¼</strong></p>
<p>é‚£é—®é¢˜é“¾è·¯å°±æ¸…æ¥šäº†ï¼š</p>
<ol>
<li>ä¸»çº¿ç¨‹è°ƒç”¨<code>wxConfig(openMemberV2DTO)</code> â†’ ä»»åŠ¡æäº¤åˆ°çº¿ç¨‹æ± ï¼Œ<strong>è¿˜æ²¡æ‰§è¡Œ</strong></li>
<li>ä¸»çº¿ç¨‹ç»§ç»­æ‰§è¡Œï¼Œä¿®æ”¹<code>openMemberV2DTO.setSupAppId(...)</code></li>
<li>ä¸»çº¿ç¨‹å†æ¬¡è°ƒç”¨<code>wxConfig(openMemberV2DTO)</code> â†’ åˆæäº¤ä¸€ä¸ªä»»åŠ¡åˆ°çº¿ç¨‹æ± </li>
<li>çº¿ç¨‹æ± å¼€å§‹æ‰§è¡Œç¬¬ä¸€ä¸ªä»»åŠ¡ â†’ è¯»å–<code>dto.getSupAppId()</code>ï¼Œå‘ç°å·²ç»æ˜¯ä¿®æ”¹åçš„å€¼äº†</li>
<li>çº¿ç¨‹æ± æ‰§è¡Œç¬¬äºŒä¸ªä»»åŠ¡ â†’ è¿˜æ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼Œappidå½“ç„¶ä¸€æ ·</li>
</ol>
<p><strong>ä¸¤æ¬¡ä¼ çš„æ˜¯åŒä¸€ä¸ªå¯¹è±¡å¼•ç”¨ï¼Œç¬¬äºŒæ¬¡ä¿®æ”¹æ±¡æŸ“äº†ç¬¬ä¸€æ¬¡çš„æ•°æ®ã€‚</strong></p>
<h2 data-id="heading-1">é—®é¢˜æœ¬è´¨</h2>
<p>è¿™ä¸ªé—®é¢˜çš„æœ¬è´¨æ˜¯ï¼š<strong>å¯¹è±¡å¼•ç”¨ + å¼‚æ­¥æ–¹æ³• â‰ˆ æ•°æ®æ±¡æŸ“</strong></p>
<h3 data-id="heading-2">Javaå¯¹è±¡å¼•ç”¨æœºåˆ¶</h3>
<p>Javaæ–¹æ³•ä¼ å‚ï¼Œä¼ çš„æ˜¯å¼•ç”¨ï¼Œä¸æ˜¯å‰¯æœ¬ã€‚</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">//Â è¿™ä¸¤æ¬¡è°ƒç”¨ï¼Œä¼ çš„æ˜¯åŒä¸€ä¸ªå¯¹è±¡çš„å¼•ç”¨</span>
<span class="hljs-built_in">wxConfig</span>(openMemberV2DTO);Â Â <span class="hljs-comment">//Â ä¼ çš„æ˜¯å¼•ç”¨</span>
openMemberV2DTO<span class="hljs-selector-class">.setSupAppId</span>("new_appid");Â Â <span class="hljs-comment">//Â ä¿®æ”¹å¯¹è±¡</span>
<span class="hljs-built_in">wxConfig</span>(openMemberV2DTO);Â Â <span class="hljs-comment">//Â è¿˜æ˜¯åŒä¸€ä¸ªå¼•ç”¨</span>
</code></pre>
<p>å¦‚æœ<code>wxConfig</code>æ˜¯åŒæ­¥æ–¹æ³•ï¼Œæ²¡é—®é¢˜ã€‚å› ä¸ºç¬¬ä¸€æ¬¡è°ƒç”¨ä¼šç«‹å³æ‰§è¡Œå®Œï¼Œç”¨çš„æ˜¯ä¿®æ”¹å‰çš„å€¼ã€‚</p>
<p>ä½†<code>wxConfig</code>æ˜¯å¼‚æ­¥æ–¹æ³•ã€‚</p>
<h3 data-id="heading-3">å¼‚æ­¥æ–¹æ³•çš„æ‰§è¡Œæ—¶æœº</h3>
<p>å¼‚æ­¥æ–¹æ³•ä¸ä¼šç«‹å³æ‰§è¡Œï¼Œè€Œæ˜¯æäº¤åˆ°çº¿ç¨‹æ± ï¼Œç­‰çº¿ç¨‹æ± æœ‰ç©ºé—²çº¿ç¨‹æ—¶æ‰æ‰§è¡Œã€‚</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">//Â ä¸»çº¿ç¨‹æ—¶é—´çº¿</span>
t1:Â <span class="hljs-built_in">wxConfig</span>(dto)Â Â â†’Â æäº¤ä»»åŠ¡Aåˆ°çº¿ç¨‹æ± 
t2:Â dto.<span class="hljs-built_in">setSupAppId</span>(<span class="hljs-string">"new"</span>)Â Â â†’Â ä¿®æ”¹å¯¹è±¡
t3:Â <span class="hljs-built_in">wxConfig</span>(dto)Â Â â†’Â æäº¤ä»»åŠ¡Båˆ°çº¿ç¨‹æ± 
t4:Â ä¸»çº¿ç¨‹ç»“æŸ

//Â çº¿ç¨‹æ± æ—¶é—´çº¿
t5:Â æ‰§è¡Œä»»åŠ¡AÂ â†’Â è¯»å–dto.<span class="hljs-built_in">getSupAppId</span>()Â Â //Â å·²ç»æ˜¯<span class="hljs-string">"new"</span>äº†ï¼
t6:Â æ‰§è¡Œä»»åŠ¡BÂ â†’Â è¯»å–dto.<span class="hljs-built_in">getSupAppId</span>()Â Â //Â è¿˜æ˜¯<span class="hljs-string">"new"</span>
</code></pre>
<h3 data-id="heading-4">å®Œæ•´çš„é—®é¢˜é“¾è·¯</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant Main as ä¸»çº¿ç¨‹
    participant Pool as çº¿ç¨‹æ± 
    participant Obj as openMemberV2DTOå¯¹è±¡

    Note over Main: t1æ—¶åˆ»
    Main-&gt;&gt;Pool: wxConfig(openMemberV2DTO)
    Note over Pool: ä»»åŠ¡Aè¿›å…¥é˜Ÿåˆ—&lt;br/&gt;ç­‰å¾…æ‰§è¡Œ

    Note over Main: t2æ—¶åˆ»
    Main-&gt;&gt;Obj: setSupAppId(&amp;#34;wx_huike...&amp;#34;)
    Main-&gt;&gt;Obj: setAccountType(&amp;#34;00&amp;#34;)
    Note over Obj: å¯¹è±¡çŠ¶æ€è¢«ä¿®æ”¹

    Note over Main: t3æ—¶åˆ»
    Main-&gt;&gt;Pool: wxConfig(openMemberV2DTO)
    Note over Pool: ä»»åŠ¡Bè¿›å…¥é˜Ÿåˆ—&lt;br/&gt;ç­‰å¾…æ‰§è¡Œ

    Note over Main: t4æ—¶åˆ»
    Note over Main: ä¸»çº¿ç¨‹ç»“æŸ&lt;br/&gt;æ‰“å°&amp;#34;å¼€é€šæˆåŠŸ&amp;#34;

    Note over Pool: t5æ—¶åˆ»
    Pool-&gt;&gt;Obj: æ‰§è¡Œä»»åŠ¡A&lt;br/&gt;è¯»å–getSupAppId()
    Note over Obj: è¿”å›ï¼š&amp;#34;wx_huike...&amp;#34;&lt;br/&gt;å·²ç»æ˜¯ä¿®æ”¹åçš„å€¼ï¼

    Note over Pool: t6æ—¶åˆ»
    Pool-&gt;&gt;Obj: æ‰§è¡Œä»»åŠ¡B&lt;br/&gt;è¯»å–getSupAppId()
    Note over Obj: è¿”å›ï¼š&amp;#34;wx_huike...&amp;#34;&lt;br/&gt;è¿˜æ˜¯åŒä¸€ä¸ªå€¼ï¼
</code></pre>
<p><strong>ä¸¤ä¸ªä»»åŠ¡è¯»å–çš„éƒ½æ˜¯ä¿®æ”¹åçš„å€¼ã€‚</strong></p>
<h2 data-id="heading-5">ä¸ºä»€ä¹ˆè¿™ä¸ªbugç‰¹åˆ«å®¹æ˜“è¢«å¿½ç•¥ã€‚ï¼Ÿ</h2>
<h3 data-id="heading-6">ä»£ç çœ‹èµ·æ¥å®Œå…¨æ­£å¸¸</h3>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-built_in">wxConfig</span>(dto);Â Â <span class="hljs-comment">//Â ç¬¬ä¸€æ¬¡è°ƒç”¨</span>
dto<span class="hljs-selector-class">.setSupAppId</span>("new");Â Â <span class="hljs-comment">//Â ä¿®æ”¹</span>
<span class="hljs-built_in">wxConfig</span>(dto);Â Â <span class="hljs-comment">//Â ç¬¬äºŒæ¬¡è°ƒç”¨</span>
</code></pre>
<p>å¦‚æœä¸çŸ¥é“<code>wxConfig</code>æ˜¯å¼‚æ­¥çš„ï¼Œè¿™ä»£ç ä¸€ç‚¹é—®é¢˜éƒ½æ²¡æœ‰ã€‚</p>
<h3 data-id="heading-7">æ²¡æœ‰å•¥æŠ¥é”™</h3>
<p>ä¸šåŠ¡é€»è¾‘æ­£å¸¸æ‰§è¡Œå®Œäº†ï¼Œæ—¥å¿—æ˜¾ç¤ºæˆåŠŸã€‚ä¸ä¼šæŠ›å¼‚å¸¸ï¼Œä¸ä¼šç©ºæŒ‡é’ˆã€‚</p>
<p>åªæ˜¯<strong>é…ç½®é”™äº†</strong>è€Œå·²ã€‚</p>
<h3 data-id="heading-8">é—®é¢˜æ˜¯å¶å‘çš„</h3>
<p>è¿™æ‰æ˜¯æœ€éšè”½çš„åœ°æ–¹ã€‚</p>
<p>å¦‚æœçº¿ç¨‹æ± åˆšå¥½ç©ºé—²ï¼Œç¬¬ä¸€ä¸ªä»»åŠ¡æäº¤åç«‹å³æ‰§è¡Œå®Œäº†ï¼Œç¬¬äºŒä¸ªä»»åŠ¡å†è¿›æ¥ï¼Œå°±ä¸ä¼šæœ‰é—®é¢˜ã€‚</p>
<p>ä½†å¦‚æœçº¿ç¨‹æ± æ­£å¿™ï¼Œä¸¤ä¸ªä»»åŠ¡éƒ½åœ¨é˜Ÿåˆ—é‡Œç­‰å¾…ï¼Œç­‰åˆ°çœŸæ­£æ‰§è¡Œæ—¶ï¼Œå¯¹è±¡å¯èƒ½æ—©å°±è¢«ä¿®æ”¹äº†ã€‚</p>
<p><strong>æ—¶å¥½æ—¶åï¼Œæœ€éš¾æ’æŸ¥ã€‚</strong></p>
<h3 data-id="heading-9">æ—¥å¿—çš„è¿·æƒ‘æ€§</h3>
<pre><code class="hljs language-csharp" lang="csharp">[<span class="hljs-meta">INFO</span>]Â å¼€é€šæˆåŠŸ
</code></pre>
<p>è¿™è¡Œæ—¥å¿—åœ¨ä¸»çº¿ç¨‹ç»“æŸæ—¶æ‰“å°ï¼Œè®©äººä»¥ä¸ºä¸€åˆ‡æ­£å¸¸ã€‚</p>
<p>å®é™…ä¸Šï¼Œçº¿ç¨‹æ± é‡Œçš„ä»»åŠ¡æ‰åˆšå¼€å§‹æ‰§è¡Œã€‚</p>
<h3 data-id="heading-10">Code Reviewå®¹æ˜“è¢«é—æ¼</h3>
<p>Code Reviewæ—¶ï¼Œå¦‚æœä¸è¿›å…¥<code>wxConfig</code>æ–¹æ³•å†…éƒ¨çœ‹ï¼Œå¾ˆéš¾å‘ç°æ˜¯å¼‚æ­¥çš„ã€‚</p>
<p>è€Œä¸”ä»£ç é€»è¾‘ç¡®å®æ²¡é—®é¢˜ï¼Œå°±æ˜¯å°‘è€ƒè™‘äº†å¼‚æ­¥åœºæ™¯ã€‚</p>
<h2 data-id="heading-11">è§£å†³æ–¹æ¡ˆ</h2>
<h3 data-id="heading-12">åˆ›å»ºæ–°å¯¹è±¡</h3>
<p>æœ€ç®€å•çš„åŠæ³•ï¼šç»™ç¬¬äºŒæ¬¡è°ƒç”¨åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">openMemberV2Service.wxConfig(openMemberV2DTO)<span class="hljs-comment">;</span>
//Â åˆ›å»ºæ–°å¯¹è±¡
OpenMemberV2DTOÂ <span class="hljs-attr">openMemberDTO</span>Â =Â BeanUtil.map(openMemberV2DTO,Â OpenMemberV2DTO.class)<span class="hljs-comment">;</span>
openMemberDTO.setSupAppId(sysConfig.getWxHuikeOfficialAccountAppid())<span class="hljs-comment">;</span>
openMemberDTO.setAccountType("00")<span class="hljs-comment">;</span>
openMemberV2Service.wxConfig(openMemberDTO)<span class="hljs-comment">;</span>
</code></pre>
<p><code>BeanUtil.map</code>ä¼šåˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡ï¼Œå¤åˆ¶æ‰€æœ‰å±æ€§ã€‚</p>
<p>ä¸¤æ¬¡è°ƒç”¨ä¼ å…¥çš„æ˜¯ä¸åŒçš„å¯¹è±¡å¼•ç”¨ï¼Œäº’ä¸å½±å“ã€‚</p>
<h3 data-id="heading-13">å…¶ä»–æ–¹æ¡ˆ</h3>
<p><strong>æ–¹æ¡ˆ1ï¼šæ·±æ‹·è´</strong></p>
<pre><code class="hljs language-ini" lang="ini">OpenMemberV2DTOÂ <span class="hljs-attr">newDto</span>Â =Â openMemberV2DTO.clone()<span class="hljs-comment">;</span>
</code></pre>
<p>å‰ææ˜¯DTOå®ç°äº†<code>Cloneable</code>æ¥å£ï¼Œå¹¶ä¸”æ˜¯æ·±æ‹·è´ã€‚</p>
<p><strong>æ–¹æ¡ˆ2ï¼šä¸å¯å˜å¯¹è±¡</strong></p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">//Â åˆ›å»ºæ–°å¯¹è±¡ï¼Œè€Œä¸æ˜¯ä¿®æ”¹æ—§å¯¹è±¡</span>
OpenMemberV2DTOÂ dto2Â =Â OpenMemberV2DTO<span class="hljs-selector-class">.builder</span>()
Â Â Â Â <span class="hljs-selector-class">.supAppId</span>(sysConfig.getWxHuikeOfficialAccountAppid())
Â Â Â Â <span class="hljs-selector-class">.accountType</span>("<span class="hljs-number">00</span>")
Â Â Â Â <span class="hljs-selector-class">.build</span>();

<span class="hljs-built_in">wxConfig</span>(dto2);
</code></pre>
<p><strong>æ–¹æ¡ˆ3ï¼šå¼‚æ­¥æ–¹æ³•å†…éƒ¨æ‹·è´ï¼ˆæœ€æ¨èï¼‰</strong></p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-function"><span class="hljs-keyword">public</span>Â <span class="hljs-type">void</span>Â <span class="hljs-title">wxConfig</span><span class="hljs-params">(OpenMemberV2DTOÂ dto)</span>Â </span>{
Â Â Â Â <span class="hljs-comment">//Â è¿›å…¥æ–¹æ³•å°±ç«‹å³æ‹·è´å‚æ•°</span>
Â Â Â Â OpenMemberV2DTOÂ copyDtoÂ =Â FsBeanUtil.<span class="hljs-built_in">map</span>(dto,Â OpenMemberV2DTO.<span class="hljs-keyword">class</span>);

Â Â Â Â asyncTaskExecutor.<span class="hljs-built_in">execute</span>(()Â -&gt;Â {
Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â ä½¿ç”¨æ‹·è´çš„å¯¹è±¡</span>
Â Â Â Â Â Â Â Â <span class="hljs-type">String</span>Â subAppIdÂ =Â copyDto.<span class="hljs-built_in">getSupAppId</span>();
Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â ...</span>
Â Â Â Â });
}
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆæ¨èè¿™ä¸ªæ–¹æ¡ˆï¼Ÿ</strong></p>
<ol>
<li><strong>è°ƒç”¨æ–¹ä¸ç”¨å…³å¿ƒæ˜¯å¦å¼‚æ­¥</strong>ï¼šå°è£…æ€§å¥½ï¼Œå¯¹å¤–æ¥å£ç®€æ´</li>
<li><strong>ä¸€åŠ³æ°¸é€¸</strong>ï¼šä¿®æ”¹ä¸€æ¬¡ï¼Œæ‰€æœ‰è°ƒç”¨æ–¹éƒ½å—ç›Š</li>
<li><strong>é˜²å¾¡æ€§ç¼–ç¨‹</strong>ï¼šåœ¨æ–¹æ³•å†…éƒ¨åšå¥½é˜²æŠ¤ï¼Œä¸ä¾èµ–è°ƒç”¨æ–¹çš„æ­£ç¡®ä½¿ç”¨</li>
</ol>
<p>è¿™æ¬¡ä¿®å¤åï¼Œæˆ‘å°±æ˜¯ç”¨çš„è¿™ä¸ªæ–¹æ¡ˆã€‚æŠŠæ‹·è´é€»è¾‘åŠ åˆ°<code>wxConfig</code>æ–¹æ³•å†…éƒ¨ï¼Œä¹‹åå°±å†ä¹Ÿæ²¡å‡ºè¿‡é—®é¢˜ã€‚</p>
<h2 data-id="heading-14">æ€»ç»“</h2>
<p>è¿™æ¬¡äº‹æ•…è®©æˆ‘å­¦åˆ°äº†å‡ ç‚¹ã€‚</p>
<h3 data-id="heading-15">1. å¼‚æ­¥æ–¹æ³•è¦è­¦æƒ•å¯¹è±¡å¼•ç”¨</h3>
<p>åªè¦æ–¹æ³•æ˜¯å¼‚æ­¥çš„ï¼Œä¼ å…¥çš„å¯¹è±¡å¯èƒ½åœ¨ä»»ä½•æ—¶å€™è¢«ä¿®æ”¹ã€‚</p>
<p>ä¸è¦å‡è®¾"è°ƒç”¨æ–¹ä¸ä¼šæ”¹"ã€‚è¦ä¹ˆæ‹·è´å¯¹è±¡ï¼Œè¦ä¹ˆç”¨ä¸å¯å˜å¯¹è±¡ã€‚</p>
<h3 data-id="heading-16">2. Code Reviewä¸åªçœ‹é€»è¾‘</h3>
<p>Reviewä»£ç æ—¶ï¼Œä¸èƒ½åªçœ‹è¡¨é¢é€»è¾‘æ˜¯å¦æ­£ç¡®ã€‚</p>
<p>è¿˜è¦å…³æ³¨ï¼š</p>
<ul>
<li>æ–¹æ³•æ˜¯åŒæ­¥è¿˜æ˜¯å¼‚æ­¥ï¼Ÿ</li>
<li>å¯¹è±¡æ˜¯å…±äº«çš„è¿˜æ˜¯ç‹¬ç«‹çš„ï¼Ÿ</li>
<li>æœ‰æ²¡æœ‰çº¿ç¨‹å®‰å…¨é—®é¢˜ï¼Ÿ</li>
</ul>
<h3 data-id="heading-17">3. çº¿ç¨‹å®‰å…¨ä¸åªæ˜¯åŠ é”</h3>
<p>å¾ˆå¤šäººæåˆ°çº¿ç¨‹å®‰å…¨ï¼Œç¬¬ä¸€ååº”æ˜¯åŠ é”ã€‚</p>
<p>ä½†è¿™ä¸ªé—®é¢˜åŠ é”ä¹Ÿæ²¡ç”¨ï¼Œæ ¹æœ¬åŸå› æ˜¯<strong>å¯¹è±¡è¢«å…±äº«äº†</strong>ã€‚</p>
<p>çº¿ç¨‹å®‰å…¨çš„æœ¬è´¨ï¼š<strong>é¿å…å…±äº«å¯å˜çŠ¶æ€</strong>ã€‚</p>
<h3 data-id="heading-18">4. æ—¥å¿—è¦æ‰“å°å…³é”®å‚æ•°</h3>
<p>å¦‚æœä¸€å¼€å§‹æ²¡æœ‰æ‰“å°appidï¼Œè¿™ä¸ªé—®é¢˜ä¼šæ›´éš¾æ’æŸ¥ã€‚</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-comment">//Â å¥½çš„æ—¥å¿—</span>
LogUtil.info(<span class="hljs-built_in">log</span>,Â <span class="hljs-string">"wxConfigÂ &gt;&gt;Â sub_appidÂ =Â {},Â account_typeÂ =Â {}"</span>,
Â Â Â Â dto.getSupAppId(),Â dto.getAccountType());

<span class="hljs-comment">//Â ä¸å¤Ÿçš„æ—¥å¿—</span>
LogUtil.info(<span class="hljs-built_in">log</span>,Â <span class="hljs-string">"wxConfigÂ &gt;&gt;Â å¼€å§‹é…ç½®"</span>);
</code></pre>
<p>å…³é”®å‚æ•°ä¸€å®šè¦æ‰“å°å‡ºæ¥ã€‚</p>
<h3 data-id="heading-19">5. æ’æŸ¥é—®é¢˜è¦çœ‹æ–¹æ³•å®ç°</h3>
<p>è¿™æ¬¡èƒ½å¿«é€Ÿå®šä½ï¼Œæ˜¯å› ä¸ºè¿›å…¥äº†<code>wxConfig</code>æ–¹æ³•å†…éƒ¨ï¼Œçœ‹åˆ°äº†<code>asyncTaskExecutor.execute</code>ã€‚</p>
<p>å¦‚æœåªçœ‹è°ƒç”¨ä»£ç ï¼Œæ°¸è¿œæ‰¾ä¸åˆ°åŸå› ã€‚</p>
<h2 data-id="heading-20">å†™åœ¨æœ€å</h2>
<p><strong>å¼‚æ­¥æ–¹æ³•ä¼ å‚æ—¶ï¼Œæ³¨æ„å¯¹è±¡å¼•ç”¨é—®é¢˜ã€‚å¦‚æœéœ€è¦å¤šæ¬¡è°ƒç”¨å¹¶ä¿®æ”¹å‚æ•°ï¼ŒåŠ¡å¿…åˆ›å»ºæ–°å¯¹è±¡ã€‚</strong></p>
<p>ä»£ç å¾ˆç®€å•ï¼Œä½†å®¹æ˜“å¿½ç•¥ã€‚å¤§å®¶ä¸€èµ·å…±å‹‰ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä»"æ‰‹è‰ºäºº"åˆ°"è¶…çº§ä¸ªä½“":æˆ‘åœ¨å°ç ´ç«™ç”¨AIé‡æ„å·¥ä½œæ–¹å¼çš„2025]]></title>    <link>https://juejin.cn/post/7587997157237866548</link>    <guid>https://juejin.cn/post/7587997157237866548</guid>    <pubDate>2025-12-27T05:44:47.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587997157237866548" data-draft-id="7588004376867389475" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä»&quot;æ‰‹è‰ºäºº&quot;åˆ°&quot;è¶…çº§ä¸ªä½“&quot;:æˆ‘åœ¨å°ç ´ç«™ç”¨AIé‡æ„å·¥ä½œæ–¹å¼çš„2025"/> <meta itemprop="keywords" content="OpenAI,AIGC,AIç¼–ç¨‹"/> <meta itemprop="datePublished" content="2025-12-27T05:44:47.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ³¯æ³·"/> <meta itemprop="url" content="https://juejin.cn/user/317122698296024"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä»"æ‰‹è‰ºäºº"åˆ°"è¶…çº§ä¸ªä½“":æˆ‘åœ¨å°ç ´ç«™ç”¨AIé‡æ„å·¥ä½œæ–¹å¼çš„2025
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/317122698296024/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ³¯æ³·
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-27T05:44:47.000Z" title="Sat Dec 27 2025 05:44:47 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>2025 å¹´å³å°†ç”»ä¸Šå¥å·ã€‚å›æœ›è¿™ä¸€å¹´ï¼ŒæŠ€æœ¯é¢†åŸŸçš„å˜é©æµªæ½®ä»æœªåœæ­‡ã€‚ä½œä¸ºä¸€åæ·±è€•åœ¨ä¸€çº¿ä»£ç ä¸­çš„å¼€å‘è€…ï¼Œæˆ‘ä¸æƒ³é‡å¤é‚£äº›å®å¤§çš„è¡Œä¸šå™äº‹ï¼Œè€Œæ˜¯å¸Œæœ›é€šè¿‡å¤ç›˜æˆ‘åœ¨å°ç ´ç«™çš„å®é™…å·¥ä½œç»å†ï¼Œæ¢è®¨ä¸€ä¸ªæ›´å…·ä½“çš„è¯é¢˜ï¼š<strong>åœ¨ AI æ·±åº¦èµ‹èƒ½çš„æ—¶ä»£ï¼Œæˆ‘ä»¬å¦‚ä½•å®Œæˆä»â€œä»£ç æ‰‹è‰ºäººâ€åˆ°â€œè¶…çº§ä¸ªä½“â€çš„è¿›é˜¶ï¼Ÿ</strong></p>
<h3 data-id="heading-0">ä¸ŠåŠå¹´å®æˆ˜ï¼šJSVMP + WASM æ„å»ºå‰ç«¯å®‰å…¨é˜²çº¿</h3>
<p>ä¸ŠåŠå¹´çš„æ ¸å¿ƒå…³é”®è¯æ˜¯<strong>æ”»é˜²</strong>ã€‚å‰ç«¯é£æ§éªŒè¯ SDK çš„å¼€å‘æ—¢å……æ»¡è¶£å‘³ï¼Œåˆæå…·æŒ‘æˆ˜ã€‚é¢å¯¹é»‘äº§ä»ä¸šè€…è¯•å›¾ç›´æ¥ç ´è§£æ¥å£çš„æ”»å‡»è¡Œä¸ºï¼Œå¸¸è§„çš„ä»£ç æ··æ·†æ‰‹æ®µå·²æ˜¾å¾—æ‰è¥Ÿè§è‚˜ã€‚</p>
<p>ä¸ºäº†æ„å»ºæ›´åšå›ºçš„é˜²å¾¡ä½“ç³»ï¼Œæˆ‘ä»¬å¼•å…¥äº† <strong>JSVMP (JavaScript Virtual Machine Protection)</strong> æŠ€æœ¯ã€‚è¯¥æŠ€æœ¯é€šè¿‡å°†æ ¸å¿ƒä¸šåŠ¡é€»è¾‘è™šæ‹ŸåŒ–ï¼Œä½¿å¾—é€†å‘å·¥ç¨‹çš„æˆæœ¬å‘ˆæŒ‡æ•°çº§ä¸Šå‡ã€‚é€šè¿‡ç›‘æ§æ•°æ®çš„å¯¹æ¯”ï¼Œæˆ‘ä»¬æ¸…æ™°åœ°çœ‹åˆ°äº†é˜²å¾¡æ•ˆæœçš„æ˜¾è‘—æå‡ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// JSVMP æ¦‚å¿µç¤ºæ„ï¼šå°†æºç ç¼–è¯‘ä¸ºè‡ªå®šä¹‰æŒ‡ä»¤é›†</span>
<span class="hljs-comment">// åŸå§‹ä»£ç ï¼š</span>
<span class="hljs-comment">// function check(token) { return token === 'secret'; }</span>

<span class="hljs-comment">// è™šæ‹ŸåŒ–åï¼ˆç¤ºæ„ï¼‰ï¼š</span>
<span class="hljs-keyword">const</span> _vm_instructions = [<span class="hljs-number">0xA1</span>, <span class="hljs-number">0x42</span>, <span class="hljs-number">0xB3</span>, ...]; <span class="hljs-comment">// è‡ªå®šä¹‰å­—èŠ‚ç </span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">_vm_executor</span>(<span class="hljs-params">instructions, context</span>) {
  <span class="hljs-comment">// è™šæ‹Ÿå †æ ˆæ‰§è¡Œå™¨ï¼Œæ”»å‡»è€…éš¾ä»¥è¿˜åŸåŸå§‹é€»è¾‘</span>
  <span class="hljs-keyword">while</span>(pc &lt; instructions.<span class="hljs-property">length</span>) { <span class="hljs-comment">/* ... */</span> }
}
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4d63d5cee2f6473ebc979ae2875eb5d2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rOv5rO3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767419110&amp;x-signature=EjJ2K%2FRlb3yy9X6ZLzHieUbwh%2BQ%3D" alt="9d10f263d07e71fbd76830816874b06733fa40d74127f8d2d915cb5f41260f36.png" loading="lazy"/></p>
<p>ä¸æ­¤åŒæ—¶ï¼Œä¸ºäº†è¿›ä¸€æ­¥æå‡è®¾å¤‡è®¤è¯çš„å®‰å…¨æ€§å’Œå‡†ç¡®æ€§ï¼Œæˆ‘ä»¬åœ¨ç°ä»£æµè§ˆå™¨ç¯å¢ƒä¸­æ¢ç´¢äº† <strong>WASM (WebAssembly)</strong> çš„å·¥ç¨‹åŒ–è½åœ°ã€‚è¿™ä¸ä»…å¸¦æ¥äº†æ€§èƒ½ä¸Šçš„ä¼˜åŒ–ï¼Œæ›´åˆ©ç”¨ WASM çš„äºŒè¿›åˆ¶ç‰¹æ€§æ„å»ºäº†æ–°çš„å®‰å…¨é˜²çº¿ã€‚</p>
<p>å€¼å¾—ä¸€æçš„æ˜¯ï¼Œæˆ‘ä»¬çš„ WASM æ¨¡å—é‡‡ç”¨ <strong>Rust</strong> è¯­è¨€ç¼–å†™ã€‚ä»ä¸¥æ ¼çš„æ‰€æœ‰æƒç³»ç»Ÿåˆ°å†…å­˜å®‰å…¨æœºåˆ¶ï¼Œå†åˆ°é›¶æˆæœ¬æŠ½è±¡ï¼ŒRust çš„è®¾è®¡å“²å­¦æå¤§åœ°ä¿éšœäº†ä»£ç çš„å¥å£®æ€§ã€‚è™½ç„¶å­¦ä¹ æ›²çº¿é™¡å³­ï¼Œä½†å½“ Rust ä»£ç é€šè¿‡ç¼–è¯‘å™¨ä¸¥è‹›çš„æ£€æŸ¥åï¼Œé‚£ç§â€œç¼–è¯‘é€šè¿‡å³è¿è¡Œæ­£ç¡®â€çš„ä¿¡å¿ƒæ˜¯å…¶ä»–è¯­è¨€éš¾ä»¥æ¯”æ‹Ÿçš„ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ff4f55088b8b40d68afebf6bb68dd3dd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rOv5rO3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767419110&amp;x-signature=jX9e%2BB4qmdwBXpeCp6wN4UbVqLI%3D" alt="Rust-WASMæŠ€æœ¯æ ˆ" loading="lazy"/></p>
<h3 data-id="heading-1">ä¸‹åŠå¹´æ”»åšï¼šé‡æ„å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ä¸ååŒæŠ€æœ¯</h3>
<p>ä¸‹åŠå¹´ï¼Œæˆ‘çš„æŠ€æœ¯é‡å¿ƒè½¬ç§»åˆ°äº†å‰ç«¯é¢†åŸŸå…¬è®¤çš„é«˜å¤æ‚åº¦åœºæ™¯â€”â€”<strong>å¯Œæ–‡æœ¬ç¼–è¾‘å™¨</strong>ã€‚</p>
<p>ä»»ä½•æ·±å…¥è¿‡ç¼–è¾‘å™¨å¼€å‘çš„å·¥ç¨‹å¸ˆéƒ½çŸ¥é“ï¼Œè¿™ä¸ä»…å…³ä¹ UI äº¤äº’ï¼Œæ›´æ˜¯ä¸€åœºå…³äºæ•°æ®ç»“æ„è®¾è®¡ä¸çŠ¶æ€ç®¡ç†çš„æ·±åº¦åšå¼ˆã€‚æˆ‘ä»¬çš„æ ¸å¿ƒä»»åŠ¡æ˜¯è¿­ä»£â€œå“”å“©å“”å“©å°ç«™â€ï¼Œå¹¶å¯¹ B ç«™å†å²æ‚ ä¹…çš„<strong>ä¸“æ ç¼–è¾‘å™¨</strong>è¿›è¡Œç°ä»£åŒ–é‡æ„ã€‚</p>
<p>åœ¨æ­¤æœŸé—´ï¼Œæˆ‘ä»¬éœ€è¦æ”»å…‹ Tiptap æ¡†æ¶çš„æ·±åº¦å®šåˆ¶ä»¥åŠ CRDTï¼ˆConflict-free Replicated Data Typesï¼‰ååŒç®—æ³•çš„é¢„ç ”ç­‰æŠ€æœ¯éš¾ç‚¹ã€‚æˆ‘ä»¬ä¸ºæ–°ç‰ˆç¼–è¾‘å™¨æ‰©å±•äº†ä¸°å¯Œçš„<strong>å¡ç‰‡å¼ç»„ä»¶ (Node Views)</strong> èƒ½åŠ›â€”â€”æ”¯æŒè§†é¢‘ã€æŠ•ç¥¨ã€å•†å“å¡ç‰‡ç­‰å¤šç§å†…å®¹å½¢æ€ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// Tiptap è‡ªå®šä¹‰èŠ‚ç‚¹æ‰©å±•ç¤ºä¾‹</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Node</span>, mergeAttributes } <span class="hljs-keyword">from</span> <span class="hljs-string">'@tiptap/core'</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ReactNodeViewRenderer</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@tiptap/react'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title class_">BilibiliVideo</span> = <span class="hljs-title class_">Node</span>.<span class="hljs-title function_">create</span>({
  <span class="hljs-attr">name</span>: <span class="hljs-string">'bilibiliVideo'</span>,
  <span class="hljs-attr">group</span>: <span class="hljs-string">'block'</span>,
  <span class="hljs-attr">atom</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// è§†ä¸ºåŸå­èŠ‚ç‚¹</span>

  <span class="hljs-title function_">addAttributes</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">bvid</span>: { <span class="hljs-attr">default</span>: <span class="hljs-literal">null</span> },
    }
  },

  <span class="hljs-title function_">addNodeView</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// ä½¿ç”¨ UI ç»„ä»¶æ¸²æŸ“èŠ‚ç‚¹è§†å›¾</span>
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">VueNodeViewRenderer</span>(<span class="hljs-title class_">VideoComponent</span>)
  },
})
</code></pre>
<p>å…¶ä¸­ä¸€ä¸ªæ˜¾è‘—çš„ä½“éªŒæå‡æ˜¯å®ç°äº†<strong>è§†é¢‘åœ¨ç¼–è¾‘å™¨å†…çš„åŸç”Ÿæ’­æ”¾</strong>ã€‚ä¸ºäº†å®ç°è¿™ä¸€â€œæ‰€è§å³æ‰€å¾—â€çš„æ•ˆæœï¼ŒæŠ€æœ¯å›¢é˜Ÿå…‹æœäº†å¤æ‚çš„ DOM äº‹ä»¶å†²çªä¸çŠ¶æ€åŒæ­¥é—®é¢˜ï¼Œå½»åº•æ¶ˆé™¤äº†åˆ›ä½œè€…éœ€è¦é¢‘ç¹åˆ‡æ¢é¢„è§ˆæ¨¡å¼çš„ç—›ç‚¹ã€‚è¿™ç§å¯¹ç»†èŠ‚çš„æè‡´æ‰“ç£¨ï¼Œæœ€ç»ˆæ¢æ¥äº†æµç•…çš„ç”¨æˆ·ä½“éªŒã€‚</p>
<h3 data-id="heading-2">AI èµ‹èƒ½ï¼šä»è¾…åŠ©å·¥å…·åˆ°â€œç¬¬äºŒå¤§è„‘â€</h3>
<p>å¯¹äºæˆ‘è€Œè¨€ï¼Œ2025 å¹´çš„ AI å·²ç»ä¸å†æ˜¯æ–°é²œçš„è¯•éªŒå“ï¼Œè€Œæ˜¯å¦‚åŒ IDE ä¸€èˆ¬ä¸å¯æˆ–ç¼ºçš„ç”Ÿäº§åŠ›å·¥å…·ã€‚</p>
<p>æˆ‘å…¨é¢æ‹¥æŠ±äº† <strong>"Vibe Coding"</strong>ï¼ˆçµæ„Ÿç¼–ç¨‹ï¼‰çš„å·¥ä½œæ¨¡å¼â€”â€”è¿™ä¸ªè¯æ­£æ˜¯ Andrej Karpathy å‘æ˜çš„ã€‚ä»–åœ¨æœ€è¿‘çš„æ¨æ–‡ä¸­æ„Ÿå¹â€œ<strong>ä½œä¸ºç¨‹åºå‘˜ï¼Œæˆ‘ä»æ²¡æ„Ÿè§‰è‡ªå·±è¿™ä¹ˆè½åè¿‡</strong>â€ï¼Œå› ä¸ºè¡Œä¸šæ­£åœ¨è¢« <strong>agentsã€subagentsã€contextsã€memoryã€MCP</strong> ç­‰ 15 ä¸ªæ–°æ¦‚å¿µå‰§çƒˆé‡æ„ã€‚æ­£å¦‚ä»–æ‰€å–»ï¼Œæˆ‘ä»¬æ‰‹ä¸­æ­£æ¡ç€ä¸€ä¸ª**â€œæ²¡æœ‰è¯´æ˜ä¹¦çš„å¤–æ˜Ÿå·¥å…·â€**ï¼Œæ¯ä¸ªäººéƒ½éœ€è¦å»ºç«‹æ–°çš„å¿ƒæ™ºæ¨¡å‹æ¥é©¾é©­å®ƒã€‚</p>
<p>æˆ‘çš„å¼€å‘å·¥å…·é“¾ä¹Ÿç»å†äº†æ·±åº¦è¿­ä»£ã€‚è™½ç„¶ Cursor æ›¾æ˜¯ä¸»åŠ›ï¼Œä½† <strong>Claude Code</strong> å‡­å€Ÿ <strong>Opus 4.5 <strong>æ¨¡å‹åœ¨é•¿ä¸Šä¸‹æ–‡ä¸‹çš„ç¨³å®šæ€§ï¼ˆä½éšæœºæ€§ï¼‰ä¸æ›´å‹å¥½çš„è®¡è´¹æ¨¡å¼ï¼Œæˆä¸ºäº†æˆ‘çš„é¦–é€‰ã€‚æ­£å¦‚ä¸šå†…è®¨è®ºçš„é‚£æ ·ï¼ŒContextï¼ˆä¸Šä¸‹æ–‡ï¼‰ç®¡ç†æ˜¯æ–°æ—¶ä»£çš„æ ¸å¿ƒæŠ€èƒ½ã€‚æˆ‘ä¸åªä¾èµ–å•ä¸€å·¥å…·ï¼Œè€Œæ˜¯æ ¹æ®ä»»åŠ¡ç‰¹æ€§ç»„åˆä½¿ç”¨ï¼šç”¨ Claude Code å¤„ç†å¤æ‚é€»è¾‘ï¼Œç”¨ Codex è¾…åŠ©åç«¯æ€è€ƒï¼Œç”šè‡³å¹¶è¡Œè¿è¡Œå¤šä¸ª Agentã€‚è¿™ç§â€œå¤šæ¨¡å‹ç¼–æ’â€çš„èƒ½åŠ›ï¼Œæå¤§åœ°é‡Šæ”¾äº†ç¼–ç ç”Ÿäº§åŠ›ï¼Œä½¿æˆ‘è¿›å…¥äº†</strong>æœˆå‡ä»£ç äº§å‡º 3-5 ä¸‡è¡Œ</strong> çš„â€œè¶…çº§ä¸ªä½“â€æ¨¡å¼ã€‚ç‰¹åˆ«æ˜¯åœ¨åŸºäº Tiptap çš„ç¼–è¾‘å™¨å¼€å‘ä¸­ï¼ŒAI å¸®åŠ©æˆ‘å¿«é€Ÿç”Ÿæˆäº†å¤§é‡çš„æ ·æ¿ä»£ç ä¸ç±»å‹å®šä¹‰ï¼Œè®©æˆ‘èƒ½ä¸“æ³¨äºæ ¸å¿ƒé€»è¾‘çš„è®¾è®¡ã€‚</p>
<p>è€Œ <strong>Gemini</strong> åˆ™æ›´å¤šæ‰®æ¼”äº†æ¶æ„å¸ˆçš„è§’è‰²ã€‚åœ¨è¿›è¡ŒæŠ€æœ¯æ–¹æ¡ˆè®¾è®¡æ—¶ï¼Œæˆ‘ä¼šåˆ©ç”¨å®ƒæ¥å‘æ•£æ€è·¯ã€æŸ¥æ¼è¡¥ç¼ºã€‚AI çš„å­˜åœ¨ï¼Œæå¤§åœ°é™ä½äº†æŠ€æœ¯éªŒè¯çš„æˆæœ¬ã€‚DeepWiki è¾…åŠ©é˜…è¯»æºç ï¼Œä¹Ÿè®©æŠ€æœ¯è°ƒç ”çš„æ•ˆç‡æå‡äº†ä¸€ä¸ªç»´åº¦ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f828863dd638439d8b533501399f99e4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rOv5rO3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767419110&amp;x-signature=Snk0vxZ%2BK4Ewg%2F64pm9Tet58kNQ%3D" alt="AIè¾…åŠ©å¼€å‘å·¥ä½œæµ" loading="lazy"/></p>
<h3 data-id="heading-3">æ€»ç»“ä¸å±•æœ›ï¼šæŠ€æœ¯å›å½’åˆ›ä½œ</h3>
<p>ç«™åœ¨ 2025 å¹´çš„èŠ‚ç‚¹ä¸Šï¼Œæ–°ç‰ˆä¸“æ ç¼–è¾‘å™¨çš„ä¸Šçº¿æ—¢æ˜¯ä¸€ä¸ªé˜¶æ®µçš„ç»ˆç‚¹ï¼Œä¹Ÿæ˜¯æ–°çš„èµ·ç‚¹ã€‚</p>
<p>å±•æœ›æ˜å¹´ï¼Œæˆ‘è®¡åˆ’åœ¨ä»¥ä¸‹æ–¹å‘æŒç»­æ·±è€•ï¼š</p>
<ol>
<li>
<p><strong>æ·±åº¦ååŒ</strong>ï¼šæ¢ç´¢ ToB åœºæ™¯ä¸‹çš„å®æ—¶åä½œæŠ€æœ¯ï¼›</p>
</li>
<li>
<p><strong>æ™ºèƒ½åˆ›ä½œ</strong>ï¼šå°† AI è¾…åŠ©åˆ›ä½œæ·±åº¦èå…¥ç¼–è¾‘å™¨æ ¸å¿ƒï¼Œæ‰“é€ æ›´â€œæ‡‚â€åˆ›ä½œè€…çš„æ™ºèƒ½å·¥å…·ã€‚</p>
</li>
</ol>
<p>è§‚å¯Ÿå½“ä¸‹çš„è¡Œä¸šç”Ÿæ€ï¼Œå¼€å‘è€…ä»¬æ­£èµ°å‘ä¸åŒçš„å‘½è¿åˆ†æ”¯ï¼šæœ‰çš„â€œä¼ ç»Ÿç²¾è‹±â€å—å›°äºæ—§æœ‰å¿ƒæ™ºæ¨¡å‹è€Œæ„Ÿåˆ°ç„¦è™‘ï¼Œæœ‰çš„â€œå‰ç«¯è¾¹ç¼˜å‹â€é€‰æ‰‹å´å›  AI è¡¥å…¨äº†èƒ½åŠ›çŸ­æ¿è€Œå¦‚é±¼å¾—æ°´ã€‚è¦å®Œæˆä»â€œæ‰‹è‰ºäººâ€åˆ°â€œè¶…çº§ä¸ªä½“â€çš„è·ƒè¿ï¼Œæ ¸å¿ƒåœ¨äº<strong>æ¥å—ä¸ç¡®å®šæ€§</strong>â€”â€”å­¦ä¼šä¸â€œæœ‰æ—¶å€™èƒ½è¡Œã€æœ‰æ—¶å€™ä¸è¡Œâ€çš„ç³»ç»Ÿå…±èˆï¼Œå°†æŠ€èƒ½ç‚¹ä»å•çº¯çš„ä»£ç å®ç°è½¬ç§»åˆ°å¯¹ AI çš„<strong>ç¼–æ’ï¼ˆOrchestrationï¼‰ä¸å¿«é€Ÿè¿­ä»£éªŒè¯</strong>ä¸Šã€‚åˆ«åšé‚£ä¸ªå›ºæ‰§æŠµæŠ—çš„è½åè€…ï¼Œå»æˆä¸ºæ–°åŸå¸‚çš„å»ºé€ è€…ã€‚</p>
<p><strong>ä½ æ˜¯å¦ä¹Ÿå‡†å¤‡å¥½æ‹¥æŠ± AIï¼Œé‡æ„ä½ çš„å·¥ä½œæ–¹å¼äº†ï¼Ÿ</strong> å°‘ä¸€åˆ†æ— è°“çš„ç„¦è™‘ï¼Œå¤šä¸€ä»½å¯¹æŠ€æœ¯çš„å¥½å¥‡ä¸å®è·µã€‚è¿™å°±æ˜¯æˆ‘çš„ 2025 å¹´ç­”å·ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[JobFlowè°ƒåº¦çš„éš¾é¢˜ï¼šè¶…æ—¶ã€è¡¥å¿ä¸æ¼è°ƒ]]></title>    <link>https://juejin.cn/post/7588028859541307418</link>    <guid>https://juejin.cn/post/7588028859541307418</guid>    <pubDate>2025-12-27T06:36:02.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588028859541307418" data-draft-id="7588031908171956233" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="JobFlowè°ƒåº¦çš„éš¾é¢˜ï¼šè¶…æ—¶ã€è¡¥å¿ä¸æ¼è°ƒ"/> <meta itemprop="keywords" content="åç«¯,é¢è¯•,æ¶æ„"/> <meta itemprop="datePublished" content="2025-12-27T06:36:02.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è¸æµªæ— ç—•"/> <meta itemprop="url" content="https://juejin.cn/user/2834988091055719"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            JobFlowè°ƒåº¦çš„éš¾é¢˜ï¼šè¶…æ—¶ã€è¡¥å¿ä¸æ¼è°ƒ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2834988091055719/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è¸æµªæ— ç—•
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-27T06:36:02.000Z" title="Sat Dec 27 2025 06:36:02 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    17
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»16åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¼€æºåœ°å€ä¸ç³»åˆ—æ–‡ç« </h2>
<ul>
<li><strong>å¼€æºåœ°å€</strong>ï¼š<code>https://gitee.com/sh_wangwanbao/job-flow</code></li>
<li><strong>ç³»åˆ—æ–‡ç« ï¼š</strong>
<ul>
<li><a href="https://juejin.cn/post/7583469866007969827" target="_blank" title="https://juejin.cn/post/7583469866007969827">ç¬¬ä¸€ç¯‡ï¼šåŸºäºNacosçš„è½»é‡ä»»åŠ¡è°ƒåº¦æ–¹æ¡ˆ â€”â€” ä» XXL-Job çš„ç—›ç‚¹è¯´èµ·</a></li>
<li><a href="https://juejin.cn/post/7584353612501106729" target="_blank" title="https://juejin.cn/post/7584353612501106729">ç¬¬äºŒç¯‡ï¼šJobFlow å®ç°æ–¹æ¡ˆï¼šäº‘åŸç”Ÿæ—¶ä»£çš„ä»»åŠ¡è°ƒåº¦æ–°æ€è·¯</a></li>
<li><a href="https://juejin.cn/post/7585727457472823296" target="_blank" title="https://juejin.cn/post/7585727457472823296">ç¬¬ä¸‰ç¯‡ï¼šJobFlow å®æˆ˜ï¼šæ— é”è°ƒåº¦æ˜¯æ€ä¹ˆåšåˆ°çš„</a></li>
<li><a href="https://juejin.cn/post/7585751355593506835" target="_blank" title="https://juejin.cn/post/7585751355593506835">ç¬¬å››ç¯‡ï¼šJobFlow èƒŒåï¼šäº”ä¸ªè®©æˆ‘è±ç„¶å¼€æœ—çš„è®¾è®¡ç¬é—´</a></li>
<li><a href="https://juejin.cn/post/7588028859541307418" target="_blank" title="https://juejin.cn/post/7588028859541307418">ç¬¬äº”ç¯‡ï¼š# JobFlowè°ƒåº¦çš„éš¾é¢˜ï¼šè¶…æ—¶ã€è¡¥å¿ä¸æ¼è°ƒ</a></li>
<li>ç¬¬å…­ç¯‡ï¼šå»¶æ—¶é˜Ÿåˆ—çš„è®¾è®¡ä¸å®ç°ï¼ˆæ’°å†™ä¸­ï¼‰</li>
</ul>
</li>
</ul>
<h2 data-id="heading-1">å‰è¨€</h2>
<p>å‰é¢å‡ ç¯‡æ–‡ç« è®²äº† JobFlow çš„æ— é”è°ƒåº¦æ˜¯æ€ä¹ˆåšçš„ï¼šé€šè¿‡ Hash åˆ†åŒº + Owner åˆ¤å®šï¼Œè®©æ¯ä¸ªè°ƒåº¦å™¨å®ä¾‹è‡ªå·±ç®—å‡ºè¯¥ä¸è¯¥æ‰§è¡Œä»»åŠ¡ï¼Œé¿å…äº†æ•°æ®åº“é”ç«äº‰ã€‚</p>
<p>ä½†æ— é”è®¾è®¡å¸¦æ¥äº†æ–°é—®é¢˜ï¼š</p>
<pre><code class="hljs">åœºæ™¯ä¸€ï¼šä»»åŠ¡è§¦å‘äº†ï¼Œä½†æ‰§è¡Œå™¨ä¸€ç›´æ²¡å“åº”
â†’ æ˜¯çœŸçš„åœ¨è·‘ï¼Œè¿˜æ˜¯å·²ç»æŒ‚äº†ï¼Ÿ

åœºæ™¯äºŒï¼šä»»åŠ¡å¤±è´¥äº†ï¼Œéœ€è¦é‡è¯•
â†’ é‡è¯•å‡ æ¬¡ï¼Ÿé—´éš”å¤šä¹…ï¼Ÿ

åœºæ™¯ä¸‰ï¼šæŸä¸€è½®ä»»åŠ¡æ ¹æœ¬æ²¡è¢«è§¦å‘
â†’ æ€ä¹ˆå‘ç°ï¼Ÿæ€ä¹ˆè¡¥å¿ï¼Ÿ
</code></pre>
<p>è¿™å°±æ˜¯åˆ†å¸ƒå¼è°ƒåº¦çš„ä¸‰ä¸ªç»ˆæéš¾é¢˜ï¼š<strong>è¶…æ—¶ã€è¡¥å¿ã€æ¼è°ƒ</strong>ã€‚</p>
<p>è¿™ç¯‡æ–‡ç« å°±æ¥è®²è®² JobFlow æ˜¯æ€ä¹ˆè§£å†³è¿™ä¸‰ä¸ªé—®é¢˜çš„ã€‚</p>
<h2 data-id="heading-2">ä¸€ã€æ•´ä½“æ–¹æ¡ˆï¼šä¸‰å±‚ä¿éšœæœºåˆ¶</h2>
<p>åœ¨æ·±å…¥ç»†èŠ‚ä¹‹å‰ï¼Œå…ˆçœ‹çœ‹ JobFlow çš„æ•´ä½“è®¾è®¡æ€è·¯ã€‚</p>
<h3 data-id="heading-3">æ ¸å¿ƒç†å¿µ</h3>
<p>JobFlow çš„å¼‚å¸¸å¤„ç†éµå¾ªä¸€ä¸ªç®€å•çš„åŸåˆ™ï¼š</p>
<pre><code class="hljs language-diff" lang="diff">æ­£å¸¸è·¯å¾„ï¼šè¿½æ±‚æ€§èƒ½
<span class="hljs-deletion">- æ— é”è°ƒåº¦ï¼Œå¿«é€Ÿè§¦å‘</span>
<span class="hljs-deletion">- å¼‚æ­¥å›è°ƒï¼Œç«‹å³å“åº”</span>
<span class="hljs-deletion">- 99% çš„ä»»åŠ¡èµ°è¿™æ¡è·¯</span>

å¼‚å¸¸è·¯å¾„ï¼šè¿½æ±‚å¯é æ€§
<span class="hljs-deletion">- è¶…æ—¶å·¡æ£€ï¼Œç¡®è®¤çŠ¶æ€</span>
<span class="hljs-deletion">- åˆ†ç‰‡è¡¥å¿ï¼Œé™æ¬¡é‡è¯•</span>
<span class="hljs-deletion">- æ¼è°ƒæ£€æµ‹ï¼Œä¸»åŠ¨è¡¥å¿</span>
<span class="hljs-deletion">- 1% çš„ä»»åŠ¡éœ€è¦å…œåº•</span>
</code></pre>
<h3 data-id="heading-4">ä¸‰å±‚ä¿éšœæœºåˆ¶</h3>
<p>JobFlow é€šè¿‡ä¸‰ä¸ªå±‚æ¬¡æ¥ä¿éšœä»»åŠ¡æ‰§è¡Œï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    A[ç¬¬ä¸€å±‚&lt;br/&gt;æ­£å¸¸è°ƒåº¦] --&gt; B[ç¬¬äºŒå±‚&lt;br/&gt;è¶…æ—¶ä¸è¡¥å¿]
    B --&gt; C[ç¬¬ä¸‰å±‚&lt;br/&gt;æ¼è°ƒæ£€æµ‹]
    
    A --&gt; D[99%ä»»åŠ¡&lt;br/&gt;å¿«é€Ÿå®Œæˆ]
    B --&gt; E[0.9%ä»»åŠ¡&lt;br/&gt;é‡è¯•æˆåŠŸ]
    C --&gt; F[0.1%ä»»åŠ¡&lt;br/&gt;è¡¥å¿æ‰§è¡Œ]
    
    style A fill:#90EE90
    style B fill:#FFE4B5
    style C fill:#FFB6C1
    style D fill:#90EE90
    style E fill:#87CEEB
    style F fill:#87CEEB
</code></pre>
<p><strong>ç¬¬ä¸€å±‚ï¼šæ­£å¸¸è°ƒåº¦</strong></p>
<ul>
<li>Owner åˆ¤å®šé¿å…é‡å¤</li>
<li>åˆ›å»ºçˆ¶å­è®°å½•</li>
<li>åˆå§‹åˆ†é… + å›è°ƒé©±åŠ¨</li>
<li>å¤§éƒ¨åˆ†ä»»åŠ¡åœ¨è¿™ä¸€å±‚å®Œæˆ</li>
</ul>
<p><strong>ç¬¬äºŒå±‚ï¼šè¶…æ—¶ä¸è¡¥å¿</strong></p>
<ul>
<li>è¶…æ—¶å·¡æ£€ï¼ˆ3 åˆ†é’Ÿä¸€æ¬¡ï¼‰</li>
<li>è¯¢é—®æ‰§è¡Œå™¨ç¡®è®¤çœŸå®çŠ¶æ€</li>
<li>åˆ†ç‰‡è¡¥å¿ï¼Œé™æ¬¡é‡è¯•</li>
<li>å¤„ç†æ‰§è¡Œæ…¢ã€å¤±è´¥çš„æƒ…å†µ</li>
</ul>
<p><strong>ç¬¬ä¸‰å±‚ï¼šæ¼è°ƒæ£€æµ‹</strong></p>
<ul>
<li>ä½é¢‘ä»»åŠ¡å·¡æ£€ï¼ˆ10 åˆ†é’Ÿä¸€æ¬¡ï¼‰</li>
<li>æ—¶é—´çª—å£å†…æŸ¥æ‰¾æ‰§è¡Œè®°å½•</li>
<li>å‘ç°æ¼è°ƒä¸»åŠ¨è¡¥å¿</li>
<li>å¤„ç†æ•´è½®æœªè§¦å‘çš„æƒ…å†µ</li>
</ul>
<h3 data-id="heading-5">å…³é”®è§’è‰²åˆ†å·¥</h3>
<p>ä¸æ˜¯æ‰€æœ‰è°ƒåº¦å™¨å®ä¾‹éƒ½åšæ‰€æœ‰äº‹æƒ…ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    A[æ™®é€šå®ä¾‹&lt;br/&gt;è´Ÿè´£æ­£å¸¸è°ƒåº¦] --&gt; B[æŒ‰ Hash åˆ†åŒº&lt;br/&gt;å„ç®¡å„çš„ä»»åŠ¡]
    
    C[å·¡æ£€Leader&lt;br/&gt;æœ€å°èŠ‚ç‚¹] --&gt; D[è¶…æ—¶å·¡æ£€&lt;br/&gt;åˆ†ç‰‡è¡¥å¿&lt;br/&gt;æ¼è°ƒæ£€æµ‹]
    
    style A fill:#90EE90
    style B fill:#87CEEB
    style C fill:#FFE4B5
    style D fill:#FFB6C1
</code></pre>
<p>è¿™æ ·è®¾è®¡çš„å¥½å¤„ï¼š</p>
<ul>
<li>æ­£å¸¸è°ƒåº¦è´Ÿè½½å‡è¡¡ï¼ˆHash åˆ†åŒºï¼‰</li>
<li>å·¡æ£€ä»»åŠ¡å•ç‚¹æ‰§è¡Œï¼ˆé¿å…é‡å¤ï¼‰</li>
<li>æœ€å°èŠ‚ç‚¹æŒ‚äº†ï¼Œä¸‹ä¸€ä¸ªè‡ªåŠ¨æ¥ç®¡</li>
</ul>
<p>æœ‰äº†æ•´ä½“è®¤è¯†ï¼Œæˆ‘ä»¬å†æ·±å…¥æ¯ä¸ªç¯èŠ‚çš„ç»†èŠ‚ã€‚</p>
<h2 data-id="heading-6">äºŒã€é—®é¢˜æ‹†è§£ï¼šä¸‰ç§å¼‚å¸¸åœºæ™¯</h2>
<p>å…ˆçœ‹çœ‹ JobFlow éœ€è¦å¤„ç†å“ªäº›å¼‚å¸¸åœºæ™¯ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    A[æ­£å¸¸æ‰§è¡Œ&lt;br/&gt;99%åœºæ™¯] --&gt; B[ä»»åŠ¡å®Œæˆ]
    
    C[æ‰§è¡Œè¶…æ—¶&lt;br/&gt;å¡ä½ä¸åŠ¨] --&gt; D[è¶…æ—¶åˆ¤å®š]
    E[æ‰§è¡Œå¤±è´¥&lt;br/&gt;éœ€è¦é‡è¯•] --&gt; F[è¡¥å¿é‡è¯•]
    G[ä»»åŠ¡æ¼è°ƒ&lt;br/&gt;æ•´è½®é”™è¿‡] --&gt; H[æ¼è°ƒæ£€æµ‹]
    
    style A fill:#90EE90
    style C fill:#FFB6C1
    style E fill:#FFB6C1
    style G fill:#FFB6C1
</code></pre>
<p><strong>æ ¸å¿ƒè®¾è®¡æ€è·¯ï¼š</strong></p>
<p>æ­£å¸¸è·¯å¾„è¿½æ±‚æ€§èƒ½ï¼š</p>
<ul>
<li>æ— é” owner åˆ¤å®š</li>
<li>å¿«é€Ÿè§¦å‘æ‰§è¡Œ</li>
<li>å¼‚æ­¥å›è°ƒæ›´æ–°</li>
</ul>
<p>å¼‚å¸¸è·¯å¾„è¿½æ±‚å¯é æ€§ï¼š</p>
<ul>
<li>è¶…æ—¶å·¡æ£€ç¡®è®¤çŠ¶æ€</li>
<li>åˆ†ç‰‡è¡¥å¿é™æ¬¡é‡è¯•</li>
<li>ä½é¢‘ä»»åŠ¡æ¼è°ƒæ£€æµ‹</li>
</ul>
<p>æ¥ä¸‹æ¥åˆ†åˆ«å±•å¼€è®²ã€‚</p>
<h2 data-id="heading-7">ä¸‰ã€æ­£å¸¸æµç¨‹å¿«é€Ÿå›é¡¾</h2>
<p>åœ¨è®²å¼‚å¸¸å¤„ç†ä¹‹å‰ï¼Œå¿«é€Ÿå›é¡¾ä¸€ä¸‹æ­£å¸¸æµç¨‹ï¼ˆè¯¦ç»†å†…å®¹è§ç¬¬äºŒã€ä¸‰ç¯‡æ–‡ç« ï¼‰ï¼š</p>
<p><strong>è°ƒåº¦è§¦å‘</strong>ï¼šå®šæ—¶æ‰«æ â†’ Owner åˆ¤å®š â†’ Cron åˆ°æœŸ â†’ è§¦å‘æ‰§è¡Œ</p>
<p><strong>åˆ†ç‰‡æ‰§è¡Œ</strong>ï¼šåˆ›å»ºçˆ¶è®°å½• â†’ åˆ›å»ºå­è®°å½•ï¼ˆ100 ä¸ª PENDING åˆ†ç‰‡ï¼‰â†’ åˆå§‹åˆ†é… â†’ å›è°ƒé©±åŠ¨</p>
<p>è¿™å°±æ˜¯æ­£å¸¸è·¯å¾„ã€‚é—®é¢˜æ˜¯ï¼Œå¼‚å¸¸æƒ…å†µæ€ä¹ˆå¤„ç†ï¼Ÿ</p>
<h2 data-id="heading-8">å››ã€è¶…æ—¶åˆ¤å®šï¼šä»æ„Ÿè§‰è¶…æ—¶åˆ°ç¡®è®¤è¶…æ—¶</h2>
<h3 data-id="heading-9">ä»€ä¹ˆå«è¶…æ—¶ï¼Ÿ</h3>
<p>ä»»åŠ¡è§¦å‘äº†ï¼Œåˆ†ç‰‡ä¹Ÿè°ƒåº¦äº†ï¼Œä½†ä¸€ç›´æ²¡å›è°ƒã€‚è¿™æ—¶å€™è°ƒåº¦å™¨ä¸çŸ¥é“ï¼š</p>
<pre><code class="hljs">å¯èƒ½æ€§ä¸€ï¼šæ‰§è¡Œå™¨è¿˜åœ¨è·‘ï¼Œåªæ˜¯æ¯”è¾ƒæ…¢
å¯èƒ½æ€§äºŒï¼šæ‰§è¡Œå™¨æŒ‚äº†ï¼Œå›è°ƒå‘ä¸å‡ºæ¥
å¯èƒ½æ€§ä¸‰ï¼šç½‘ç»œæŠ–åŠ¨ï¼Œå›è°ƒä¸¢äº†
</code></pre>
<p><strong>JobFlow çš„ç­–ç•¥ï¼šå…ˆå·¡æ£€ï¼Œå†è¯¢é—®ï¼Œæœ€ååˆ¤æ­»åˆ‘ã€‚</strong></p>
<h3 data-id="heading-10">å·¡æ£€å…¥å£</h3>
<p>è¶…æ—¶å·¡æ£€ç”±æœ€å°èŠ‚ç‚¹è´Ÿè´£ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    A[å®šæ—¶å·¡æ£€&lt;br/&gt;æ¯3åˆ†é’Ÿ] --&gt; B{isInspectionLeader?}
    B --&gt;|å¦| C[è·³è¿‡]
    B --&gt;|æ˜¯| D[æŸ¥è¯¢è¶…æ—¶åˆ†ç‰‡]
    D --&gt; E[åˆ†ç±»å¤„ç†]
    
    style A fill:#87CEEB
    style B fill:#FFE4B5
    style D fill:#FFB6C1
    style E fill:#90EE90
</code></pre>
<p>ä¸ºä»€ä¹ˆç”±æœ€å°èŠ‚ç‚¹è´Ÿè´£ï¼Ÿ</p>
<pre><code class="hljs">æ‰€æœ‰å®ä¾‹ä» Nacos æ‹‰å–å®ä¾‹åˆ—è¡¨
æ’åºåï¼Œæœ€å°çš„é‚£ä¸ªå°±æ˜¯ leader
ä¸éœ€è¦å¤æ‚çš„é€‰ä¸¾ç®—æ³•
æœ€å°èŠ‚ç‚¹æŒ‚äº†ï¼Œä¸‹ä¸€ä¸ªè‡ªåŠ¨æ¥ç®¡
</code></pre>
<p>ä»£ç é€»è¾‘ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">inspectTimeoutSubExecutions</span><span class="hljs-params">()</span> {
    <span class="hljs-comment">// 1. åˆ¤æ–­æˆ‘æ˜¯ä¸æ˜¯å·¡æ£€ leader</span>
    <span class="hljs-keyword">if</span> (!isInspectionLeader()) {
        <span class="hljs-keyword">return</span>;
    }

    <span class="hljs-comment">// 2. æŸ¥è¯¢è¶…æ—¶åˆ†ç‰‡ï¼ˆåŸºå‡†æ—¶é—´ + è¶…æ—¶é˜ˆå€¼ï¼‰</span>
    List&lt;JobSubExecution&gt; timeoutSubs = jobRepository.findTimeoutSubExecutions(timeoutThresholdMinutes);
    
    <span class="hljs-comment">// 3. åˆ†ç±»å¤„ç†</span>
    <span class="hljs-keyword">for</span> (JobSubExecution sub : timeoutSubs) {
        <span class="hljs-keyword">if</span> (sub.getStatus() == RUNNING) {
            handleRunningTimeoutSubExecution(sub, now);
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (sub.getStatus() == PENDING) {
            handleSubExecutionForCompensation(sub, now);
        }
    }
}
</code></pre>
<h3 data-id="heading-11">ä¸‰æ­¥è¯¢é—®ç­–ç•¥</h3>
<p>å¯¹äº RUNNING çŠ¶æ€çš„åˆ†ç‰‡ï¼ŒJobFlow ä¸ä¼šç›´æ¥åˆ¤æ­»åˆ‘ï¼Œè€Œæ˜¯å…ˆé—®ä¸€é—®ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    A[å‘ç°RUNNINGè¶…æ—¶] --&gt; B{è¶…è¿‡2å€é˜ˆå€¼?}
    B --&gt;|æ˜¯| C[ç›´æ¥æ ‡è®°TIMEOUT]
    B --&gt;|å¦| D[HTTPè¯¢é—®æ‰§è¡Œå™¨]
    D --&gt; E{æ‰§è¡Œå™¨è¿”å›?}
    E --&gt;|SUCCESS/FAILED| F[æ›´æ–°ä¸ºçœŸå®çŠ¶æ€]
    E --&gt;|RUNNING| G[æš‚ä¸å¤„ç†]
    E --&gt;|è¶…æ—¶/å¼‚å¸¸| H[æ ‡è®°TIMEOUT]
    
    style A fill:#FFB6C1
    style B fill:#FFE4B5
    style C fill:#FF6B6B
    style D fill:#87CEEB
    style E fill:#FFE4B5
    style F fill:#90EE90
    style H fill:#FF6B6B
</code></pre>
<p>è¿™ä¸ªç­–ç•¥åˆ†ä¸‰æ­¥ï¼š</p>
<p><strong>ç¬¬ä¸€æ­¥ï¼šè¯¢é—®æ‰§è¡Œå™¨</strong></p>
<p>å‘æ‰§è¡Œå™¨å‘é€ HTTP è¯·æ±‚æŸ¥è¯¢çŠ¶æ€</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">String</span> <span class="hljs-variable">statusUrl</span> <span class="hljs-operator">=</span> executorUrl + <span class="hljs-string">"/internal/job/status?traceId="</span> + shardTraceId;
<span class="hljs-type">String</span> <span class="hljs-variable">statusText</span> <span class="hljs-operator">=</span> restTemplate.getForObject(statusUrl, String.class);
</code></pre>
<p><strong>ç¬¬äºŒæ­¥ï¼šæ‰§è¡Œå™¨åº”ç­”</strong></p>
<p>æ‰§è¡Œå™¨è¿”å›çœŸå®çŠ¶æ€</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// æ‰§è¡Œå™¨ç«¯ä»£ç </span>
<span class="hljs-meta">@GetMapping("/internal/job/status")</span>
<span class="hljs-keyword">public</span> String <span class="hljs-title function_">getStatus</span><span class="hljs-params">(<span class="hljs-meta">@RequestParam</span> String traceId)</span> {
    <span class="hljs-comment">// ä»å†…å­˜æŸ¥è¯¢ä»»åŠ¡çŠ¶æ€</span>
    <span class="hljs-type">ExecutionStatus</span> <span class="hljs-variable">status</span> <span class="hljs-operator">=</span> taskContext.getStatus(traceId);
    <span class="hljs-keyword">return</span> status.name();
}
</code></pre>
<p><strong>ç¬¬ä¸‰æ­¥ï¼šæ ¹æ®åº”ç­”å†³å®šè¡ŒåŠ¨</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">if</span> (remoteStatus == SUCCESS || remoteStatus == FAILED) {
    <span class="hljs-comment">// ä»¥æ‰§è¡Œå™¨åé¦ˆä¸ºå‡†ï¼Œæ›´æ–°çŠ¶æ€</span>
    jobRepository.updateSubExecutionResult(...);
    updateParentExecutionStatus(parentExecutionId);
} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (remoteStatus == RUNNING) {
    <span class="hljs-comment">// è¿˜åœ¨è·‘ï¼Œæš‚ä¸å¤„ç†</span>
    log.info(<span class="hljs-string">"ä»»åŠ¡ä»åœ¨æ‰§è¡Œä¸­ï¼Œæš‚ä¸å¤„ç†"</span>);
} <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// è¶…æ—¶æˆ–å¼‚å¸¸ï¼Œæ ‡è®° TIMEOUT</span>
    markSubExecutionTimeout(sub, now, <span class="hljs-string">"No valid response from executor"</span>);
}
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆè¦è¿™ä¹ˆéº»çƒ¦ï¼Ÿ</strong></p>
<p>å› ä¸ºåˆ†å¸ƒå¼ç³»ç»Ÿçš„ä¸ç¡®å®šæ€§ï¼š</p>
<pre><code class="hljs">åœºæ™¯ä¸€ï¼šæ‰§è¡Œå™¨åœ¨è·‘æ‰¹å¤„ç†ï¼Œæ•°æ®é‡ç‰¹åˆ«å¤§ï¼Œç¡®å®å¾ˆæ…¢
â†’ å¦‚æœç›´æ¥åˆ¤è¶…æ—¶ï¼Œä»»åŠ¡ç™½è·‘äº†

åœºæ™¯äºŒï¼šæ‰§è¡Œå™¨æŒ‚äº†ï¼Œæˆ–è€…ç½‘ç»œæ–­äº†
â†’ è¿™æ—¶å€™ç¡®å®è¯¥åˆ¤è¶…æ—¶

åœºæ™¯ä¸‰ï¼šæ‰§è¡Œå™¨å·²ç»æ‰§è¡Œå®Œäº†ï¼Œä½†å›è°ƒå¤±è´¥äº†
â†’ è¯¢é—®åæ‹¿åˆ°çœŸå®çŠ¶æ€ï¼Œé¿å…é‡å¤æ‰§è¡Œ
</code></pre>
<h3 data-id="heading-12">è¶…æ—¶é˜ˆå€¼çš„åŒé‡ä¿æŠ¤</h3>
<p>JobFlow æœ‰ä¸¤å±‚è¶…æ—¶åˆ¤æ–­ï¼š</p>
<p><strong>ç¬¬ä¸€å±‚ï¼šä»»åŠ¡é…ç½®çš„è¶…æ—¶æ—¶é—´</strong></p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> job_definition (
    ...
    timeout_seconds <span class="hljs-type">INT</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">300</span>,  <span class="hljs-comment">-- é»˜è®¤5åˆ†é’Ÿ</span>
    ...
);
</code></pre>
<p><strong>ç¬¬äºŒå±‚ï¼šå·¡æ£€é˜ˆå€¼ï¼ˆ2 å€è¶…æ—¶æ—¶é—´ï¼‰</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">long</span> <span class="hljs-variable">elapsedSeconds</span> <span class="hljs-operator">=</span> Duration.between(baseTime, now).getSeconds();
<span class="hljs-keyword">if</span> (elapsedSeconds &gt;= timeoutSeconds * <span class="hljs-number">2</span>) {
    <span class="hljs-comment">// è¶…è¿‡2å€é˜ˆå€¼ï¼Œç›´æ¥æ ‡è®° TIMEOUTï¼Œä¸å†è¯¢é—®</span>
    markSubExecutionTimeout(sub, now, <span class="hljs-string">"Exceeded 2x timeout threshold"</span>);
    <span class="hljs-keyword">return</span>;
}
</code></pre>
<p>è¿™æ ·è®¾è®¡çš„å¥½å¤„ï¼š</p>
<pre><code class="hljs">ç¬¬ä¸€æ¬¡è¶…æ—¶ï¼ˆ5åˆ†é’Ÿï¼‰ï¼šå·¡æ£€å‘ç°ï¼Œè¯¢é—®æ‰§è¡Œå™¨
â†’ å¦‚æœè¿˜åœ¨è·‘ï¼Œç»§ç»­ç­‰

ç¬¬äºŒæ¬¡è¶…æ—¶ï¼ˆ10åˆ†é’Ÿï¼‰ï¼šç¡®è®¤å·²ç»å¡æ­»ï¼Œç›´æ¥åˆ¤æ­»åˆ‘
â†’ é¿å…ä¸€ç›´è¯¢é—®ï¼Œæµªè´¹èµ„æº
</code></pre>
<h3 data-id="heading-13">è¶…æ—¶å¤„ç†å°ç»“</h3>
<p>è¶…æ—¶å¤„ç†çš„æ ¸å¿ƒæ€è·¯ï¼š</p>
<pre><code class="hljs">ä¸ç¡®å®šçš„æ—¶å€™ï¼Œå…ˆé—®é—®
é—®äº†è¿˜ä¸ç¡®å®šï¼Œå†ç­‰ç­‰
ç­‰å¤ªä¹…äº†ï¼Œè¯¥æ­»å°±æ­»
</code></pre>
<p>è¿™ç§ç­–ç•¥åœ¨æ€§èƒ½å’Œå¯é æ€§ä¹‹é—´æ‰¾åˆ°äº†å¹³è¡¡ï¼š</p>
<ul>
<li>ä¸ä¼šå› ä¸ºä¸´æ—¶æ…¢å°±è¯¯åˆ¤</li>
<li>ä¹Ÿä¸ä¼šå› ä¸ºçœŸæŒ‚äº†è¿˜ä¸€ç›´ç­‰</li>
</ul>
<h2 data-id="heading-14">äº”ã€åˆ†ç‰‡è¡¥å¿ï¼šå¤±è´¥äº†æ€ä¹ˆé‡è¯•</h2>
<h3 data-id="heading-15">ä»€ä¹ˆæ—¶å€™éœ€è¦è¡¥å¿ï¼Ÿ</h3>
<p>åˆ†ç‰‡è¡¥å¿å¤„ç†ä¸¤ç§æƒ…å†µï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    A[åˆ†ç‰‡çŠ¶æ€å¼‚å¸¸] --&gt; B{ä»€ä¹ˆçŠ¶æ€?}
    B --&gt;|PENDINGè¶…æ—¶| C[ä»æœªæ‰§è¡Œ&lt;br/&gt;é‡æ–°åˆ†é…]
    B --&gt;|FAILED| D[æ‰§è¡Œå¤±è´¥&lt;br/&gt;é‡è¯•æ‰§è¡Œ]
    
    style A fill:#FFB6C1
    style B fill:#FFE4B5
    style C fill:#87CEEB
    style D fill:#87CEEB
</code></pre>
<p><strong>PENDING è¶…æ—¶</strong>ï¼šè°ƒåº¦å™¨å·²ç»åˆ›å»ºäº†åˆ†ç‰‡è®°å½•ï¼Œä½†ä¸€ç›´æ²¡åˆ†é…å‡ºå»</p>
<pre><code class="hljs language-diff" lang="diff">å¯èƒ½åŸå› ï¼š
<span class="hljs-deletion">- æ‰€æœ‰æ‰§è¡Œå™¨éƒ½æŒ‚äº†</span>
<span class="hljs-deletion">- åˆå§‹åˆ†é…æ—¶ç½‘ç»œå¼‚å¸¸</span>
<span class="hljs-deletion">- å‰é¢çš„åˆ†ç‰‡éƒ½å¡ä½äº†ï¼Œåé¢çš„æ²¡æœºä¼šæ‰§è¡Œ</span>
</code></pre>
<p><strong>FAILED çŠ¶æ€</strong>ï¼šåˆ†ç‰‡æ‰§è¡Œè¿‡ï¼Œä½†å¤±è´¥äº†</p>
<pre><code class="hljs language-diff" lang="diff">å¯èƒ½åŸå› ï¼š
<span class="hljs-deletion">- ä¸šåŠ¡é€»è¾‘å¼‚å¸¸</span>
<span class="hljs-deletion">- æ•°æ®åº“è¿æ¥è¶…æ—¶</span>
<span class="hljs-deletion">- ä¸‹æ¸¸æœåŠ¡ä¸å¯ç”¨</span>
</code></pre>
<h3 data-id="heading-16">è¡¥å¿é€»è¾‘</h3>
<p>è¡¥å¿çš„æ ¸å¿ƒé€»è¾‘åœ¨ <code>handleSubExecutionForCompensation</code>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">handleSubExecutionForCompensation</span><span class="hljs-params">(JobSubExecution sub, LocalDateTime now)</span> {
    <span class="hljs-comment">// 1. æŸ¥è¯¢ä»»åŠ¡å®šä¹‰ï¼Œè·å–æœ€å¤§é‡è¯•æ¬¡æ•°</span>
    <span class="hljs-type">JobDefinition</span> <span class="hljs-variable">jobDef</span> <span class="hljs-operator">=</span> jobRepository.findJobByName(sub.getJobName());
    <span class="hljs-type">int</span> <span class="hljs-variable">maxRetry</span> <span class="hljs-operator">=</span> jobDef != <span class="hljs-literal">null</span> ? jobDef.getMaxRetry() : <span class="hljs-number">3</span>;

    <span class="hljs-comment">// 2. æ£€æŸ¥æ˜¯å¦è¶…è¿‡æœ€å¤§é‡è¯•æ¬¡æ•°</span>
    <span class="hljs-keyword">if</span> (sub.getRetryCount() &gt;= maxRetry) {
        log.warn(<span class="hljs-string">"åˆ†ç‰‡å·²è¾¾æœ€å¤§é‡è¯•æ¬¡æ•°ï¼Œæ ‡è®°ä¸ºæœ€ç»ˆå¤±è´¥"</span>);
        jobRepository.updateSubExecutionStatus(sub.getId(), FAILED, now, 
            <span class="hljs-string">"Max retry exceeded in compensation"</span>);
        updateParentExecutionStatus(sub.getParentExecutionId());
        <span class="hljs-keyword">return</span>;
    }

    <span class="hljs-comment">// 3. é‡æ–°åˆ†é…æ‰§è¡Œ</span>
    <span class="hljs-type">JobExecution</span> <span class="hljs-variable">parent</span> <span class="hljs-operator">=</span> jobRepository.findExecutionById(sub.getParentExecutionId());
    List&lt;ServiceInstance&gt; instances = discoveryClient.getInstances(jobDef.getServiceName());
    
    compensateSubExecution(sub, parent, jobDef, instances);
}
</code></pre>
<p>è¡¥å¿æµç¨‹ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    A[å‘ç°å¼‚å¸¸åˆ†ç‰‡] --&gt; B{é‡è¯•æ¬¡æ•°?}
    B --&gt;|æœªè¾¾ä¸Šé™| C[CASæ›´æ–°çŠ¶æ€&lt;br/&gt;PENDING to RUNNING]
    B --&gt;|è¾¾åˆ°ä¸Šé™| D[æ ‡è®°æœ€ç»ˆå¤±è´¥]
    C --&gt; E{CASæˆåŠŸ?}
    E --&gt;|æ˜¯| F[è°ƒç”¨æ‰§è¡Œå™¨]
    E --&gt;|å¦| G[å…¶ä»–å®ä¾‹å·²å¤„ç†]
    
    style A fill:#FFB6C1
    style B fill:#FFE4B5
    style C fill:#87CEEB
    style D fill:#FF6B6B
    style F fill:#90EE90
</code></pre>
<p><strong>å…³é”®ç‚¹ï¼šCAS æ›´æ–°ä¿æŠ¤</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// å°è¯• CAS æ›´æ–°çŠ¶æ€</span>
<span class="hljs-type">boolean</span> <span class="hljs-variable">updated</span> <span class="hljs-operator">=</span> jobRepository.casUpdateSubExecutionStatus(
    sub.getId(), 
    sub.getStatus(),      <span class="hljs-comment">// æ—§çŠ¶æ€</span>
    RUNNING,              <span class="hljs-comment">// æ–°çŠ¶æ€</span>
    sub.getRetryCount()   <span class="hljs-comment">// ç‰ˆæœ¬å·</span>
);

<span class="hljs-keyword">if</span> (!updated) {
    <span class="hljs-comment">// CAS å¤±è´¥ï¼Œè¯´æ˜å…¶ä»–å®ä¾‹å·²ç»åœ¨å¤„ç†äº†</span>
    log.info(<span class="hljs-string">"CASæ›´æ–°å¤±è´¥ï¼Œåˆ†ç‰‡å¯èƒ½å·²è¢«å…¶ä»–å®ä¾‹è¡¥å¿"</span>);
    <span class="hljs-keyword">return</span>;
}
</code></pre>
<p>ä¸ºä»€ä¹ˆè¦ç”¨ CASï¼Ÿ</p>
<pre><code class="hljs language-css" lang="css">åœºæ™¯ï¼šå¤šä¸ªè°ƒåº¦å™¨å®ä¾‹åŒæ—¶å‘ç°åŒä¸€ä¸ªåˆ†ç‰‡è¶…æ—¶

å®ä¾‹<span class="hljs-selector-tag">A</span>ï¼šCAS æ›´æ–° PENDING â†’ RUNNINGï¼ŒæˆåŠŸ
å®ä¾‹<span class="hljs-selector-tag">B</span>ï¼šCAS æ›´æ–° PENDING â†’ RUNNINGï¼Œå¤±è´¥ï¼ˆçŠ¶æ€å·²ç»æ˜¯ RUNNING äº†ï¼‰

ç»“æœï¼šåªæœ‰å®ä¾‹<span class="hljs-selector-tag">A</span> ä¼šçœŸæ­£è°ƒç”¨æ‰§è¡Œå™¨ï¼Œé¿å…é‡å¤æ‰§è¡Œ
</code></pre>
<h3 data-id="heading-17">é‡è¯•ç­–ç•¥ï¼šé™æ¬¡ä¸é™æ—¶</h3>
<p>JobFlow çš„é‡è¯•ç­–ç•¥å¾ˆç®€å•ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">max_retry</span> = <span class="hljs-number">3</span>  ï¼ˆå¯é…ç½®ï¼‰

ç¬¬1æ¬¡å¤±è´¥ï¼šç«‹å³é‡è¯•
ç¬¬2æ¬¡å¤±è´¥ï¼šç«‹å³é‡è¯•
ç¬¬3æ¬¡å¤±è´¥ï¼šç«‹å³é‡è¯•
ç¬¬4æ¬¡å¤±è´¥ï¼šæ ‡è®°æœ€ç»ˆå¤±è´¥ï¼Œä¸å†é‡è¯•
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆä¸ç”¨æŒ‡æ•°é€€é¿ï¼Ÿ</strong></p>
<p>å‘¨æœŸä»»åŠ¡çš„é‡è¯•å’Œå»¶æ—¶ä»»åŠ¡ä¸åŒï¼š</p>
<p>å‘¨æœŸä»»åŠ¡ï¼š</p>
<ul>
<li>æ‰§è¡Œçª—å£æœ‰é™ï¼ˆä¸‹ä¸€è½®å¾ˆå¿«å°±æ¥äº†ï¼‰</li>
<li>å¸Œæœ›å°½å¿«å®Œæˆ</li>
<li>å¤±è´¥åŸå› é€šå¸¸æ˜¯ä¸´æ—¶æ€§çš„ï¼ˆç½‘ç»œæŠ–åŠ¨ã€GCæš‚åœï¼‰</li>
</ul>
<p>å»¶æ—¶ä»»åŠ¡ï¼š</p>
<ul>
<li>æ‰§è¡Œæ—¶é—´çµæ´»</li>
<li>å¯ä»¥ç­‰ä¸€ç­‰</li>
<li>éœ€è¦é¿å…é›ªå´©</li>
</ul>
<p>æ‰€ä»¥å‘¨æœŸä»»åŠ¡ç”¨"é™æ¬¡ä¸é™æ—¶"ï¼Œå»¶æ—¶ä»»åŠ¡ç”¨"æŒ‡æ•°é€€é¿"ã€‚</p>
<h3 data-id="heading-18">è¡¥å¿çš„è§¦å‘æ—¶æœº</h3>
<p>è¡¥å¿æœ‰ä¸¤ä¸ªè§¦å‘å…¥å£ï¼š</p>
<p><strong>å…¥å£ä¸€ï¼šè¶…æ—¶å·¡æ£€</strong>ï¼ˆå‰é¢è®²è¿‡ï¼‰</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">inspectTimeoutSubExecutions</span><span class="hljs-params">()</span> {
    <span class="hljs-comment">// ...</span>
    <span class="hljs-keyword">for</span> (JobSubExecution sub : timeoutSubs) {
        <span class="hljs-keyword">if</span> (sub.getStatus() == PENDING) {
            handleSubExecutionForCompensation(sub, now);
        }
    }
}
</code></pre>
<p><strong>å…¥å£äºŒï¼šç«‹å³å¤±è´¥</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// è°ƒç”¨æ‰§è¡Œå™¨å¤±è´¥æ—¶ï¼Œç«‹å³æ ‡è®° FAILED</span>
<span class="hljs-keyword">if</span> (!success) {
    jobRepository.updateSubExecutionStatus(sub.getId(), FAILED, now, errorMsg);
}
</code></pre>
<p>è¿™æ ·ä¸¤æ¡è·¯å¾„é…åˆï¼š</p>
<pre><code class="hljs">ç«‹å³å¤±è´¥ï¼šå¿«é€Ÿå“åº”ï¼Œä¸ç­‰å·¡æ£€
è¶…æ—¶å·¡æ£€ï¼šå…œåº•ä¿æŠ¤ï¼Œé˜²æ­¢é—æ¼
</code></pre>
<h2 data-id="heading-19">å…­ã€ä½é¢‘ä»»åŠ¡çš„æ¼è°ƒæ£€æµ‹</h2>
<h3 data-id="heading-20">ä»€ä¹ˆæ˜¯æ¼è°ƒï¼Ÿ</h3>
<p>æ¼è°ƒæ˜¯æŒ‡ï¼šä»»åŠ¡æœ¬è¯¥æ‰§è¡Œï¼Œä½†æ•´è½®éƒ½æ²¡è§¦å‘ã€‚</p>
<pre><code class="hljs">ç¤ºä¾‹ï¼šæ¯å¤©å‡Œæ™¨2ç‚¹çš„å¯¹è´¦ä»»åŠ¡

æ­£å¸¸æƒ…å†µï¼š
12æœˆ20æ—¥ 02:00:00 â†’ æ‰§è¡Œ
12æœˆ21æ—¥ 02:00:00 â†’ æ‰§è¡Œ
12æœˆ22æ—¥ 02:00:00 â†’ æ‰§è¡Œ

æ¼è°ƒæƒ…å†µï¼š
12æœˆ20æ—¥ 02:00:00 â†’ æ‰§è¡Œ
12æœˆ21æ—¥ 02:00:00 â†’ æ²¡æ‰§è¡Œï¼ˆæ‰€æœ‰è°ƒåº¦å™¨éƒ½æŒ‚äº†ï¼‰
12æœˆ22æ—¥ 02:00:00 â†’ æ‰§è¡Œ

é—®é¢˜ï¼š21å·çš„å¯¹è´¦ä»»åŠ¡æ¼äº†
</code></pre>
<p>å¯¹äºé«˜é¢‘ä»»åŠ¡ï¼ˆåˆ†é’Ÿçº§ï¼‰ï¼Œæ¼è°ƒå½±å“è¾ƒå°ï¼Œå¾ˆå¿«å°±æœ‰ä¸‹ä¸€è½®ã€‚</p>
<p>ä½†å¯¹äºä½é¢‘ä»»åŠ¡ï¼ˆå°æ—¶çº§ã€å¤©çº§ï¼‰ï¼Œæ¼è°ƒå¯èƒ½å¯¼è‡´ä¸¥é‡åæœï¼š</p>
<pre><code class="hljs">å¯¹è´¦ä»»åŠ¡æ¼è°ƒï¼šè´¢åŠ¡æ•°æ®ä¸å‡†
æŠ¥è¡¨ç”Ÿæˆæ¼è°ƒï¼šä¸šåŠ¡å†³ç­–å»¶è¯¯
æ•°æ®æ¸…ç†æ¼è°ƒï¼šç£ç›˜ç©ºé—´è€—å°½
</code></pre>
<h3 data-id="heading-21">æ€ä¹ˆæ£€æµ‹æ¼è°ƒï¼Ÿ</h3>
<p>JobFlow çš„æ€è·¯ï¼š<strong>æ—¶é—´çª—å£ + æ‰§è¡Œè®°å½•</strong></p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    A[è®¡ç®—Cronå‘¨æœŸ] --&gt; B{å‘¨æœŸå¤§äºç­‰äº1å°æ—¶?}
    B --&gt;|å¦| C[é«˜é¢‘ä»»åŠ¡&lt;br/&gt;è·³è¿‡]
    B --&gt;|æ˜¯| D[è®¡ç®—ä¸Šä¸€è½®æ—¶é—´çª—å£]
    D --&gt; E{çª—å£å†…æœ‰æ‰§è¡Œè®°å½•?}
    E --&gt;|æ˜¯| F[æœªæ¼è°ƒ]
    E --&gt;|å¦| G[è§¦å‘è¡¥å¿]
    
    style A fill:#87CEEB
    style B fill:#FFE4B5
    style C fill:#D3D3D3
    style D fill:#87CEEB
    style E fill:#FFE4B5
    style G fill:#90EE90
    style G fill:#90EE90
</code></pre>
<p>æ ¸å¿ƒé€»è¾‘ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// 1. è§£æ Cronï¼Œè®¡ç®—å‘¨æœŸ</span>
<span class="hljs-type">CronExpression</span> <span class="hljs-variable">cronExpression</span> <span class="hljs-operator">=</span> CronExpression.parse(cron);
<span class="hljs-type">LocalDateTime</span> <span class="hljs-variable">next1</span> <span class="hljs-operator">=</span> cronExpression.next(now.minusSeconds(<span class="hljs-number">1</span>));
<span class="hljs-type">LocalDateTime</span> <span class="hljs-variable">next2</span> <span class="hljs-operator">=</span> cronExpression.next(next1);
<span class="hljs-type">Duration</span> <span class="hljs-variable">period</span> <span class="hljs-operator">=</span> Duration.between(next1, next2);

<span class="hljs-comment">// 2. è¿‡æ»¤ï¼šåªæ£€æµ‹å‘¨æœŸ â‰¥ 1 å°æ—¶çš„ä»»åŠ¡</span>
<span class="hljs-keyword">if</span> (period == <span class="hljs-literal">null</span> || period.toMinutes() &lt; <span class="hljs-number">60</span>) {
    <span class="hljs-keyword">return</span>;  <span class="hljs-comment">// é«˜é¢‘ä»»åŠ¡ä¸æ£€æµ‹</span>
}

<span class="hljs-comment">// 3. è®¡ç®—ä¸Šä¸€è½®çš„æ—¶é—´çª—å£</span>
<span class="hljs-type">LocalDateTime</span> <span class="hljs-variable">lastSlotTime</span> <span class="hljs-operator">=</span> next1.minus(period);
<span class="hljs-type">LocalDateTime</span> <span class="hljs-variable">windowStart</span> <span class="hljs-operator">=</span> lastSlotTime;
<span class="hljs-type">LocalDateTime</span> <span class="hljs-variable">windowEnd</span> <span class="hljs-operator">=</span> now;

<span class="hljs-comment">// 4. æŸ¥è¯¢çª—å£å†…æ˜¯å¦æœ‰æ‰§è¡Œè®°å½•</span>
<span class="hljs-type">boolean</span> <span class="hljs-variable">exists</span> <span class="hljs-operator">=</span> jobRepository.existsExecutionInWindow(
    job.getName(), windowStart, windowEnd);

<span class="hljs-comment">// 5. å¦‚æœæ²¡æœ‰è®°å½•ï¼Œè§¦å‘è¡¥å¿</span>
<span class="hljs-keyword">if</span> (!exists) {
    log.info(<span class="hljs-string">"æ£€æµ‹åˆ°ä½é¢‘ä»»åŠ¡æ¼è°ƒï¼Œè§¦å‘è¡¥å¿ï¼ŒjobName={}, window=[{}, {}]"</span>,
        job.getName(), windowStart, windowEnd);
    triggerExecution(job, now);
}
</code></pre>
<p>SQL æŸ¥è¯¢ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">COUNT</span>(<span class="hljs-number">1</span>) <span class="hljs-keyword">FROM</span> job_execution 
<span class="hljs-keyword">WHERE</span> job_name <span class="hljs-operator">=</span> ? 
  <span class="hljs-keyword">AND</span> trigger_time <span class="hljs-operator">&gt;=</span> ? 
  <span class="hljs-keyword">AND</span> trigger_time <span class="hljs-operator">&lt;</span> ?
</code></pre>
<h3 data-id="heading-22">æ—¶é—´çª—å£ç¤ºä¾‹</h3>
<p>ä»¥"æ¯å¤©å‡Œæ™¨2ç‚¹"çš„ä»»åŠ¡ä¸ºä¾‹ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">å½“å‰æ—¶é—´ï¼š2024-12-22 10:00:00

è®¡ç®—è¿‡ç¨‹ï¼š
<span class="hljs-attr">1. next1</span> = <span class="hljs-number">2024</span>-<span class="hljs-number">12</span>-<span class="hljs-number">23</span> <span class="hljs-number">02</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span>ï¼ˆä¸‹ä¸€ä¸ªè§¦å‘æ—¶é—´ï¼‰
<span class="hljs-attr">2. next2</span> = <span class="hljs-number">2024</span>-<span class="hljs-number">12</span>-<span class="hljs-number">24</span> <span class="hljs-number">02</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span>ï¼ˆå†ä¸‹ä¸€ä¸ªè§¦å‘æ—¶é—´ï¼‰
<span class="hljs-attr">3. period</span> = <span class="hljs-number">24</span>å°æ—¶
<span class="hljs-attr">4. lastSlotTime</span> = <span class="hljs-number">2024</span>-<span class="hljs-number">12</span>-<span class="hljs-number">23</span> <span class="hljs-number">02</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> - <span class="hljs-number">24</span>å°æ—¶ = <span class="hljs-number">2024</span>-<span class="hljs-number">12</span>-<span class="hljs-number">22</span> <span class="hljs-number">02</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span>

æ—¶é—´çª—å£ï¼š
<span class="hljs-attr">windowStart</span> = <span class="hljs-number">2024</span>-<span class="hljs-number">12</span>-<span class="hljs-number">22</span> <span class="hljs-number">02</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span>
<span class="hljs-attr">windowEnd</span> = <span class="hljs-number">2024</span>-<span class="hljs-number">12</span>-<span class="hljs-number">22</span> <span class="hljs-number">10</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span>ï¼ˆå½“å‰æ—¶é—´ï¼‰

åˆ¤æ–­ï¼š
å¦‚æœçª—å£å†…æœ‰æ‰§è¡Œè®°å½• â†’ æœªæ¼è°ƒ
å¦‚æœçª—å£å†…æ²¡æœ‰æ‰§è¡Œè®°å½• â†’ æ¼è°ƒäº†ï¼Œè¡¥å¿ä¸€æ¬¡
</code></pre>
<h3 data-id="heading-23">ä¸ºä»€ä¹ˆåªæ£€æµ‹ä½é¢‘ä»»åŠ¡ï¼Ÿ</h3>
<p>å› ä¸ºé«˜é¢‘ä»»åŠ¡çš„æ¼è°ƒå½±å“å°ï¼š</p>
<pre><code class="hljs language-diff" lang="diff">åˆ†é’Ÿçº§ä»»åŠ¡ï¼š
<span class="hljs-deletion">- æ¼è°ƒä¸€æ¬¡ï¼Œ1åˆ†é’Ÿåå°±æœ‰ä¸‹ä¸€è½®</span>
<span class="hljs-deletion">- ä¸šåŠ¡å½±å“å°</span>
<span class="hljs-deletion">- å®¹æ˜“è¢«ç›‘æ§å‘ç°</span>

å°æ—¶çº§ä»»åŠ¡ï¼š
<span class="hljs-deletion">- æ¼è°ƒä¸€æ¬¡ï¼Œè¦ç­‰1å°æ—¶</span>
<span class="hljs-deletion">- å¯èƒ½å½±å“ä¸šåŠ¡</span>
<span class="hljs-deletion">- ä¸å®¹æ˜“è¢«å‘ç°</span>

å¤©çº§ä»»åŠ¡ï¼š
<span class="hljs-deletion">- æ¼è°ƒä¸€æ¬¡ï¼Œè¦ç­‰1å¤©</span>
<span class="hljs-deletion">- ä¸¥é‡å½±å“ä¸šåŠ¡</span>
<span class="hljs-deletion">- å¾ˆéš¾è¢«å‘ç°</span>
</code></pre>
<p>æ‰€ä»¥ JobFlow çš„ç­–ç•¥æ˜¯ï¼š</p>
<pre><code class="hljs">é«˜é¢‘ä»»åŠ¡ï¼ˆ&lt; 1å°æ—¶ï¼‰ï¼šä¸æ£€æµ‹ï¼Œé ç›‘æ§
ä½é¢‘ä»»åŠ¡ï¼ˆâ‰¥ 1å°æ—¶ï¼‰ï¼šä¸»åŠ¨æ£€æµ‹ï¼Œè‡ªåŠ¨è¡¥å¿
</code></pre>
<h3 data-id="heading-24">æ¼è°ƒæ£€æµ‹çš„è§¦å‘é¢‘ç‡</h3>
<p>æ¼è°ƒæ£€æµ‹ä¸éœ€è¦å¤ªé¢‘ç¹ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Scheduled(fixedDelay = 600000)</span>  <span class="hljs-comment">// 10åˆ†é’Ÿä¸€æ¬¡</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">compensateLowFrequencyMisfires</span><span class="hljs-params">()</span> {
    <span class="hljs-keyword">if</span> (!clusterInstanceService.shouldRunInspection()) {
        <span class="hljs-keyword">return</span>;  <span class="hljs-comment">// éå·¡æ£€leaderï¼Œè·³è¿‡</span>
    }
    
    List&lt;JobDefinition&gt; jobs = jobRepository.findAllEnabledJobs();
    <span class="hljs-keyword">for</span> (JobDefinition job : jobs) {
        compensateIfLowFrequencyAndMissed(job, LocalDateTime.now());
    }
}
</code></pre>
<p>ä¸ºä»€ä¹ˆ10åˆ†é’Ÿä¸€æ¬¡å°±å¤Ÿäº†ï¼Ÿ</p>
<pre><code class="hljs">å¯¹äºå°æ—¶çº§ä»»åŠ¡ï¼š10åˆ†é’Ÿæ£€æµ‹ä¸€æ¬¡ï¼Œè¶³å¤ŸåŠæ—¶
å¯¹äºå¤©çº§ä»»åŠ¡ï¼š10åˆ†é’Ÿæ£€æµ‹ä¸€æ¬¡ï¼Œæ›´å¤Ÿäº†
å¯¹äºåˆ†é’Ÿçº§ä»»åŠ¡ï¼šä¸æ£€æµ‹ï¼Œç­‰ä¸‹ä¸€è½®å°±å¥½
</code></pre>
<h2 data-id="heading-25">ä¸ƒã€å»¶æ—¶ä»»åŠ¡çš„è¶…æ—¶ä¸é‡è¯•</h2>
<p>å»¶æ—¶ä»»åŠ¡å’Œå‘¨æœŸä»»åŠ¡ä¸åŒï¼Œå®ƒæ˜¯ä¸€æ¬¡æ€§çš„ï¼š</p>
<pre><code class="hljs">å‘¨æœŸä»»åŠ¡ï¼šæ¯å¤©å‡Œæ™¨2ç‚¹æ‰§è¡Œ
å»¶æ—¶ä»»åŠ¡ï¼š30åˆ†é’Ÿåæ‰§è¡Œä¸€æ¬¡
</code></pre>
<h3 data-id="heading-26">å»¶æ—¶ä»»åŠ¡çš„çŠ¶æ€æœº</h3>
<p>å»¶æ—¶ä»»åŠ¡çš„çŠ¶æ€æµè½¬ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    A[PENDING&lt;br/&gt;ç­‰å¾…ä¸­] --&gt; B[SENDING&lt;br/&gt;è°ƒç”¨ä¸­]
    B --&gt; C[SENT&lt;br/&gt;å·²å‘é€]
    B --&gt; D[FAILED&lt;br/&gt;å¤±è´¥]
    D --&gt; E{é‡è¯•æ¬¡æ•°?}
    E --&gt;|æœªè¾¾ä¸Šé™| A
    E --&gt;|è¾¾åˆ°ä¸Šé™| F[FAILED_FINAL&lt;br/&gt;æœ€ç»ˆå¤±è´¥]
    
    style A fill:#87CEEB
    style B fill:#FFE4B5
    style C fill:#90EE90
    style D fill:#FFB6C1
    style F fill:#FF6B6B
</code></pre>
<p>æ ¸å¿ƒå­—æ®µï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> job_delay_task (
    id <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">PRIMARY</span> KEY,
    execute_time <span class="hljs-type">TIMESTAMP</span>,      <span class="hljs-comment">-- é¢„æœŸæ‰§è¡Œæ—¶é—´</span>
    next_attempt_time <span class="hljs-type">TIMESTAMP</span>, <span class="hljs-comment">-- ä¸‹æ¬¡é‡è¯•æ—¶é—´</span>
    status <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">20</span>),          <span class="hljs-comment">-- PENDING/SENDING/SENT/FAILED/FAILED_FINAL</span>
    retry_count <span class="hljs-type">INT</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">0</span>,   <span class="hljs-comment">-- é‡è¯•æ¬¡æ•°</span>
    max_retry <span class="hljs-type">INT</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">3</span>,     <span class="hljs-comment">-- æœ€å¤§é‡è¯•æ¬¡æ•°</span>
    ...
);
</code></pre>
<h3 data-id="heading-27">è°ƒåº¦æµç¨‹</h3>
<p>å»¶æ—¶ä»»åŠ¡çš„è°ƒåº¦é€»è¾‘ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    A[æ‰«æåˆ°æœŸä»»åŠ¡] --&gt; B{isOwner?}
    B --&gt;|å¦| C[è·³è¿‡]
    B --&gt;|æ˜¯| D[CASæ›´æ–°&lt;br/&gt;PENDING to SENDING]
    D --&gt; E{CASæˆåŠŸ?}
    E --&gt;|å¦| F[å…¶ä»–å®ä¾‹å¤„ç†]
    E --&gt;|æ˜¯| G[HTTPè°ƒç”¨æ‰§è¡Œå™¨]
    G --&gt; H{æˆåŠŸ?}
    H --&gt;|æ˜¯| I[æ ‡è®°SENT]
    H --&gt;|å¦| J[é‡è¯•é€»è¾‘]
    
    style A fill:#87CEEB
    style B fill:#FFE4B5
    style D fill:#87CEEB
    style G fill:#FFE4B5
    style I fill:#90EE90
    style J fill:#FFB6C1
</code></pre>
<p>å…³é”®ä»£ç ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// 1. Owner åˆ¤å®šï¼ˆæŒ‰ serviceName åˆ†åŒºï¼‰</span>
<span class="hljs-keyword">if</span> (!clusterInstanceService.isOwner(task.getServiceName())) {
    <span class="hljs-keyword">return</span>;
}

<span class="hljs-comment">// 2. CAS æŠ¢å </span>
<span class="hljs-type">boolean</span> <span class="hljs-variable">locked</span> <span class="hljs-operator">=</span> delayTaskRepository.tryMarkSending(
    task.getId(), task.getStatus(), task.getRetryCount());
<span class="hljs-keyword">if</span> (!locked) {
    <span class="hljs-keyword">return</span>;  <span class="hljs-comment">// è¢«å…¶ä»–å®ä¾‹æŠ¢äº†</span>
}

<span class="hljs-comment">// 3. HTTP è°ƒç”¨</span>
<span class="hljs-type">boolean</span> <span class="hljs-variable">success</span> <span class="hljs-operator">=</span> callExecutor(task);

<span class="hljs-comment">// 4. æ›´æ–°çŠ¶æ€</span>
<span class="hljs-keyword">if</span> (success) {
    delayTaskRepository.markSent(task.getId(), LocalDateTime.now());
} <span class="hljs-keyword">else</span> {
    handleCallFailure(task, errorMsg);
}
</code></pre>
<h3 data-id="heading-28">é‡è¯•ç­–ç•¥ï¼šæŒ‡æ•°é€€é¿</h3>
<p>å»¶æ—¶ä»»åŠ¡çš„é‡è¯•ç”¨æŒ‡æ•°é€€é¿ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">handleCallFailure</span><span class="hljs-params">(JobDelayTask task, String errorMsg)</span> {
    <span class="hljs-type">int</span> <span class="hljs-variable">newRetryCount</span> <span class="hljs-operator">=</span> task.getRetryCount() + <span class="hljs-number">1</span>;
    
    <span class="hljs-keyword">if</span> (newRetryCount &gt;= task.getMaxRetry()) {
        <span class="hljs-comment">// æ ‡è®°æœ€ç»ˆå¤±è´¥</span>
        delayTaskRepository.markFailedFinal(task.getId(), newRetryCount, errorMsg);
        <span class="hljs-keyword">return</span>;
    }
    
    <span class="hljs-comment">// è®¡ç®—ä¸‹æ¬¡é‡è¯•æ—¶é—´</span>
    LocalDateTime nextAttempt;
    <span class="hljs-keyword">if</span> (newRetryCount == <span class="hljs-number">1</span>) {
        nextAttempt = now.plusMinutes(<span class="hljs-number">3</span>);   <span class="hljs-comment">// ç¬¬1æ¬¡ï¼š3åˆ†é’Ÿå</span>
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (newRetryCount == <span class="hljs-number">2</span>) {
        nextAttempt = now.plusMinutes(<span class="hljs-number">5</span>);   <span class="hljs-comment">// ç¬¬2æ¬¡ï¼š5åˆ†é’Ÿå</span>
    } <span class="hljs-keyword">else</span> {
        nextAttempt = now.plusMinutes(<span class="hljs-number">5</span>);   <span class="hljs-comment">// ç¬¬3æ¬¡ï¼š5åˆ†é’Ÿå</span>
    }
    
    delayTaskRepository.markFailedAndScheduleNext(
        task.getId(), newRetryCount, nextAttempt, errorMsg);
}
</code></pre>
<p>é‡è¯•æ—¶é—´è½´ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">åˆå§‹æ‰§è¡Œï¼š<span class="hljs-attr">execute_time</span> = <span class="hljs-number">10</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span>
ç¬¬1æ¬¡å¤±è´¥ï¼š<span class="hljs-attr">next_attempt_time</span> = <span class="hljs-number">10</span>:<span class="hljs-number">03</span>:<span class="hljs-number">00</span>ï¼ˆ+<span class="hljs-number">3</span>åˆ†é’Ÿï¼‰
ç¬¬2æ¬¡å¤±è´¥ï¼š<span class="hljs-attr">next_attempt_time</span> = <span class="hljs-number">10</span>:<span class="hljs-number">08</span>:<span class="hljs-number">00</span>ï¼ˆ+<span class="hljs-number">5</span>åˆ†é’Ÿï¼‰
ç¬¬3æ¬¡å¤±è´¥ï¼š<span class="hljs-attr">next_attempt_time</span> = <span class="hljs-number">10</span>:<span class="hljs-number">13</span>:<span class="hljs-number">00</span>ï¼ˆ+<span class="hljs-number">5</span>åˆ†é’Ÿï¼‰
ç¬¬4æ¬¡å¤±è´¥ï¼šæ ‡è®° FAILED_FINAL
</code></pre>
<h3 data-id="heading-29">SENDING è¶…æ—¶æ£€æµ‹</h3>
<p>å»¶æ—¶ä»»åŠ¡è¿˜æœ‰ä¸ªç‰¹æ®Šåœºæ™¯ï¼šè°ƒç”¨æ‰§è¡Œå™¨åï¼Œä¸€ç›´æ²¡å“åº”ã€‚</p>
<p>è¿™æ—¶å€™æ•°æ®åº“é‡Œçš„çŠ¶æ€æ˜¯ SENDINGï¼Œéœ€è¦æœ‰ä¸ªè¶…æ—¶æ£€æµ‹ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// æ‰«æ SENDING è¶…æ—¶ä»»åŠ¡</span>
List&lt;JobDelayTask&gt; stuckTasks = delayTaskRepository.findStuckSendingTasks(
    sendingTimeoutSeconds, scanBatchSize);

<span class="hljs-keyword">for</span> (JobDelayTask task : stuckTasks) {
    handleSendingTimeout(task);
}
</code></pre>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">handleSendingTimeout</span><span class="hljs-params">(JobDelayTask task)</span> {
    <span class="hljs-type">String</span> <span class="hljs-variable">timeoutMsg</span> <span class="hljs-operator">=</span> <span class="hljs-string">"SENDING timeout (over "</span> + sendingTimeoutSeconds + <span class="hljs-string">" seconds)"</span>;
    log.warn(<span class="hljs-string">"æ£€æµ‹åˆ°SENDINGè¶…æ—¶ï¼Œè§†ä¸ºå¤±è´¥ï¼ŒtraceId={}"</span>, task.getTraceId());
    handleCallFailure(task, timeoutMsg);
}
</code></pre>
<p>æŸ¥è¯¢ SQLï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> job_delay_task 
<span class="hljs-keyword">WHERE</span> status <span class="hljs-operator">=</span> <span class="hljs-string">'SENDING'</span> 
  <span class="hljs-keyword">AND</span> sent_at <span class="hljs-operator">&lt;</span> NOW() <span class="hljs-operator">-</span> <span class="hljs-type">INTERVAL</span> ? <span class="hljs-keyword">SECOND</span>
LIMIT ?
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆè¦è¿™æ ·è®¾è®¡ï¼Ÿ</strong></p>
<pre><code class="hljs language-diff" lang="diff">åœºæ™¯ï¼šè°ƒç”¨æ‰§è¡Œå™¨åï¼Œæ‰§è¡Œå™¨æŒ‚äº†

ç»“æœï¼š
<span class="hljs-deletion">- å›è°ƒä¸ä¼šæ¥</span>
<span class="hljs-deletion">- çŠ¶æ€ä¸€ç›´æ˜¯ SENDING</span>
<span class="hljs-deletion">- éœ€è¦è¶…æ—¶æ£€æµ‹æ¥å…œåº•</span>

å¤„ç†ï¼š
<span class="hljs-deletion">- è§†ä¸ºä¸€æ¬¡å¤±è´¥</span>
<span class="hljs-deletion">- è¿›å…¥é‡è¯•æµç¨‹</span>
<span class="hljs-deletion">- æœ€å¤šé‡è¯•3æ¬¡</span>
</code></pre>
<h2 data-id="heading-30">å…«ã€å·¡æ£€ä»»åŠ¡çš„åè°ƒï¼šè°æ¥åšï¼Ÿ</h2>
<p>å‰é¢è®²äº†ä¸‰ç§å·¡æ£€ï¼š</p>
<ul>
<li>è¶…æ—¶å·¡æ£€ï¼ˆåˆ†ç‰‡è¶…æ—¶ï¼‰</li>
<li>åˆ†ç‰‡è¡¥å¿ï¼ˆåˆ†ç‰‡å¤±è´¥ï¼‰</li>
<li>æ¼è°ƒæ£€æµ‹ï¼ˆä½é¢‘ä»»åŠ¡ï¼‰</li>
</ul>
<p>è¿™äº›å·¡æ£€éƒ½éœ€è¦æœ‰äººåšï¼Œä½†ä¸èƒ½æ‰€æœ‰å®ä¾‹éƒ½åšï¼ˆä¼šé‡å¤ï¼‰ã€‚</p>
<h3 data-id="heading-31">é€‰ä¸»ç­–ç•¥ï¼šæœ€å°èŠ‚ç‚¹</h3>
<p>JobFlow çš„é€‰ä¸»å¾ˆç®€å•ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    A[ä»Nacosè·å–&lt;br/&gt;æ‰€æœ‰è°ƒåº¦å™¨å®ä¾‹] --&gt; B[æŒ‰IP:PORTæ’åº]
    B --&gt; C{æˆ‘æ˜¯æœ€å°çš„?}
    C --&gt;|æ˜¯| D[æˆ‘æ˜¯Leader&lt;br/&gt;è´Ÿè´£å·¡æ£€]
    C --&gt;|å¦| E[æˆ‘æ˜¯Follower&lt;br/&gt;è·³è¿‡å·¡æ£€]
    
    style A fill:#87CEEB
    style B fill:#87CEEB
    style C fill:#FFE4B5
    style D fill:#90EE90
    style E fill:#D3D3D3
</code></pre>
<p>ä»£ç å®ç°ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">shouldRunInspection</span><span class="hljs-params">()</span> {
    List&lt;ServiceInstance&gt; instances = discoveryClient.getInstances(<span class="hljs-string">"jobflow-scheduler"</span>);
    <span class="hljs-keyword">if</span> (instances == <span class="hljs-literal">null</span> || instances.isEmpty()) {
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }
    
    <span class="hljs-comment">// æ’åº</span>
    instances.sort(Comparator.comparing(i -&gt; i.getHost() + <span class="hljs-string">":"</span> + i.getPort()));
    
    <span class="hljs-comment">// åˆ¤æ–­æˆ‘æ˜¯ä¸æ˜¯æœ€å°çš„</span>
    <span class="hljs-type">String</span> <span class="hljs-variable">smallest</span> <span class="hljs-operator">=</span> instances.get(<span class="hljs-number">0</span>).getHost() + <span class="hljs-string">":"</span> + instances.get(<span class="hljs-number">0</span>).getPort();
    <span class="hljs-type">String</span> <span class="hljs-variable">myself</span> <span class="hljs-operator">=</span> localHost + <span class="hljs-string">":"</span> + localPort;
    
    <span class="hljs-keyword">return</span> smallest.equals(myself);
}
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆé€‰æœ€å°èŠ‚ç‚¹ï¼Ÿ</strong></p>
<p>ä¼˜ç‚¹ï¼š</p>
<ul>
<li>ç®€å•ï¼šä¸éœ€è¦å¤æ‚çš„é€‰ä¸¾ç®—æ³•</li>
<li>ç¡®å®šï¼šæ‰€æœ‰å®ä¾‹çœ‹åˆ°çš„æ’åºç»“æœä¸€è‡´</li>
<li>å¿«é€Ÿï¼šæœ€å°èŠ‚ç‚¹æŒ‚äº†ï¼Œä¸‹ä¸€ä¸ªç«‹åˆ»æ¥ç®¡</li>
</ul>
<p>ç¼ºç‚¹ï¼š</p>
<ul>
<li>è´Ÿè½½ä¸å‡ï¼šæ‰€æœ‰å·¡æ£€éƒ½åœ¨ä¸€ä¸ªèŠ‚ç‚¹ä¸Š</li>
</ul>
<p>ä½†å¯¹äºå·¡æ£€ä»»åŠ¡æ¥è¯´ï¼Œè´Ÿè½½å¾ˆå°ï¼Œè¿™ä¸ªç¼ºç‚¹å¯ä»¥æ¥å—ã€‚</p>
<h3 data-id="heading-32">å·¡æ£€é¢‘ç‡</h3>
<p>ä¸åŒå·¡æ£€çš„é¢‘ç‡ä¸åŒï¼š</p>
<pre><code class="hljs language-diff" lang="diff">è¶…æ—¶å·¡æ£€ï¼š3åˆ†é’Ÿä¸€æ¬¡
<span class="hljs-deletion">- éœ€è¦åŠæ—¶å‘ç°å¡ä½çš„ä»»åŠ¡</span>
<span class="hljs-deletion">- ä½†ä¹Ÿä¸èƒ½å¤ªé¢‘ç¹ï¼Œé¿å…æ‰“çˆ†æ‰§è¡Œå™¨</span>

åˆ†ç‰‡è¡¥å¿ï¼šéšè¶…æ—¶å·¡æ£€è§¦å‘
<span class="hljs-deletion">- å’Œè¶…æ—¶å·¡æ£€æ˜¯ä¸€èµ·çš„</span>

æ¼è°ƒæ£€æµ‹ï¼š10åˆ†é’Ÿä¸€æ¬¡
<span class="hljs-deletion">- ä½é¢‘ä»»åŠ¡æœ¬æ¥å°±æ…¢ï¼Œä¸éœ€è¦å¤ªé¢‘ç¹</span>
<span class="hljs-deletion">- é™ä½æ•°æ®åº“å‹åŠ›</span>
</code></pre>
<h2 data-id="heading-33">ä¹ã€è®¾è®¡æƒè¡¡ä¸å–èˆ</h2>
<p>å›é¡¾ä¸€ä¸‹ JobFlow åœ¨è¶…æ—¶ã€è¡¥å¿ã€æ¼è°ƒè¿™ä¸‰ä¸ªé—®é¢˜ä¸Šçš„è®¾è®¡æƒè¡¡ï¼š</p>
<h3 data-id="heading-34">æƒè¡¡ä¸€ï¼šè¯¢é—® vs ç›´æ¥åˆ¤æ­»åˆ‘</h3>
<p><strong>æ–¹æ¡ˆAï¼šç›´æ¥åˆ¤æ­»åˆ‘</strong></p>
<ul>
<li>ä¼˜ç‚¹ï¼šç®€å•å¿«é€Ÿ</li>
<li>ç¼ºç‚¹ï¼šè¯¯æ€æ­£å¸¸ä»»åŠ¡</li>
</ul>
<p><strong>æ–¹æ¡ˆBï¼šå…ˆè¯¢é—®æ‰§è¡Œå™¨</strong>ï¼ˆJobFlow çš„é€‰æ‹©ï¼‰</p>
<ul>
<li>ä¼˜ç‚¹ï¼šå‡†ç¡®æ€§é«˜ï¼Œé¿å…è¯¯åˆ¤</li>
<li>ç¼ºç‚¹ï¼šå¢åŠ ä¸€æ¬¡ HTTP è°ƒç”¨</li>
</ul>
<p>JobFlow é€‰æ‹©äº†æ–¹æ¡ˆBï¼Œå› ä¸ºï¼š</p>
<pre><code class="hljs language-diff" lang="diff">å¯¹äºæ‰¹å¤„ç†ä»»åŠ¡ï¼š
<span class="hljs-deletion">- æ•°æ®é‡å¤§ï¼Œç¡®å®å¾ˆæ…¢</span>
<span class="hljs-deletion">- è¯¯åˆ¤æˆæœ¬é«˜ï¼ˆä»»åŠ¡ç™½è·‘äº†ï¼‰</span>
<span class="hljs-deletion">- å¤šä¸€æ¬¡ HTTP è¯¢é—®ï¼Œæˆæœ¬å¯æ¥å—</span>
</code></pre>
<h3 data-id="heading-35">æƒè¡¡äºŒï¼šç«‹å³é‡è¯• vs æŒ‡æ•°é€€é¿</h3>
<p><strong>å‘¨æœŸä»»åŠ¡ï¼šç«‹å³é‡è¯•</strong></p>
<ul>
<li>åŸå› ï¼šæ‰§è¡Œçª—å£æœ‰é™</li>
<li>ç›®æ ‡ï¼šå°½å¿«å®Œæˆ</li>
</ul>
<p><strong>å»¶æ—¶ä»»åŠ¡ï¼šæŒ‡æ•°é€€é¿</strong></p>
<ul>
<li>åŸå› ï¼šæ—¶é—´çµæ´»</li>
<li>ç›®æ ‡ï¼šé¿å…é›ªå´©</li>
</ul>
<p>è¿™æ˜¯æ ¹æ®åœºæ™¯ç‰¹ç‚¹åšçš„å·®å¼‚åŒ–è®¾è®¡ã€‚</p>
<h3 data-id="heading-36">æƒè¡¡ä¸‰ï¼šå…¨é‡æ£€æµ‹ vs åˆ†å±‚æ£€æµ‹</h3>
<p><strong>æ–¹æ¡ˆAï¼šæ‰€æœ‰ä»»åŠ¡éƒ½æ£€æµ‹æ¼è°ƒ</strong></p>
<ul>
<li>ä¼˜ç‚¹ï¼šè¦†ç›–å…¨é¢</li>
<li>ç¼ºç‚¹ï¼šæ•°æ®åº“å‹åŠ›å¤§</li>
</ul>
<p><strong>æ–¹æ¡ˆBï¼šåªæ£€æµ‹ä½é¢‘ä»»åŠ¡</strong>ï¼ˆJobFlow çš„é€‰æ‹©ï¼‰</p>
<ul>
<li>ä¼˜ç‚¹ï¼šæ€§ä»·æ¯”é«˜</li>
<li>ç¼ºç‚¹ï¼šé«˜é¢‘ä»»åŠ¡æ¼è°ƒä¸ç®¡</li>
</ul>
<p>JobFlow é€‰æ‹©äº†æ–¹æ¡ˆBï¼Œå› ä¸ºï¼š</p>
<pre><code class="hljs language-diff" lang="diff">é«˜é¢‘ä»»åŠ¡æ¼è°ƒå½±å“å°ï¼š
<span class="hljs-deletion">- 1åˆ†é’Ÿåå°±æœ‰ä¸‹ä¸€è½®</span>
<span class="hljs-deletion">- å®¹æ˜“è¢«ç›‘æ§å‘ç°</span>
<span class="hljs-deletion">- ä¸éœ€è¦ä¸»åŠ¨æ£€æµ‹</span>

ä½é¢‘ä»»åŠ¡æ¼è°ƒå½±å“å¤§ï¼š
<span class="hljs-deletion">- å¯èƒ½è¦ç­‰å¾ˆä¹…</span>
<span class="hljs-deletion">- ä¸å®¹æ˜“è¢«å‘ç°</span>
<span class="hljs-deletion">- éœ€è¦ä¸»åŠ¨æ£€æµ‹</span>
</code></pre>
<h3 data-id="heading-37">æƒè¡¡å››ï¼šæ‰€æœ‰å®ä¾‹å·¡æ£€ vs å•å®ä¾‹å·¡æ£€</h3>
<p><strong>æ–¹æ¡ˆAï¼šæ‰€æœ‰å®ä¾‹éƒ½å·¡æ£€</strong></p>
<ul>
<li>ä¼˜ç‚¹ï¼šåˆ†å¸ƒå¼ï¼Œè´Ÿè½½å‡è¡¡</li>
<li>ç¼ºç‚¹ï¼šå®¹æ˜“é‡å¤ï¼Œéœ€è¦åˆ†å¸ƒå¼é”</li>
</ul>
<p><strong>æ–¹æ¡ˆBï¼šæœ€å°èŠ‚ç‚¹å·¡æ£€</strong>ï¼ˆJobFlow çš„é€‰æ‹©ï¼‰</p>
<ul>
<li>ä¼˜ç‚¹ï¼šç®€å•ï¼Œæ— éœ€é”</li>
<li>ç¼ºç‚¹ï¼šå•ç‚¹ï¼Œè´Ÿè½½é›†ä¸­</li>
</ul>
<p>JobFlow é€‰æ‹©äº†æ–¹æ¡ˆBï¼Œå› ä¸ºï¼š</p>
<pre><code class="hljs language-diff" lang="diff">å·¡æ£€è´Ÿè½½å¾ˆå°ï¼š
<span class="hljs-deletion">- 3åˆ†é’Ÿä¸€æ¬¡ï¼Œ10åˆ†é’Ÿä¸€æ¬¡</span>
<span class="hljs-deletion">- æ¯æ¬¡æ‰«æå‡ ç™¾ä¸ªä»»åŠ¡</span>
<span class="hljs-deletion">- å•å®ä¾‹å®Œå…¨æ‰›å¾—ä½</span>

ç®€å•ä¼˜å…ˆï¼š
<span class="hljs-deletion">- ä¸éœ€è¦åˆ†å¸ƒå¼é”</span>
<span class="hljs-deletion">- ä¸éœ€è¦å¤æ‚çš„åè°ƒ</span>
<span class="hljs-deletion">- æœ€å°èŠ‚ç‚¹æŒ‚äº†ï¼Œè‡ªåŠ¨åˆ‡æ¢</span>
</code></pre>
<h2 data-id="heading-38">åã€æ€»ç»“</h2>
<p>JobFlow å¤„ç†è¶…æ—¶ã€è¡¥å¿ã€æ¼è°ƒçš„æ ¸å¿ƒæ€è·¯ï¼š</p>
<p><strong>æ­£å¸¸è·¯å¾„ä¼˜å…ˆ</strong>ï¼š</p>
<ul>
<li>99% çš„ä»»åŠ¡èµ°æ­£å¸¸è·¯å¾„</li>
<li>æ— é”è°ƒåº¦ï¼Œæ€§èƒ½å¥½</li>
<li>å›è°ƒé©±åŠ¨ï¼Œå“åº”å¿«</li>
</ul>
<p><strong>å¼‚å¸¸è·¯å¾„å…œåº•</strong>ï¼š</p>
<ul>
<li>è¶…æ—¶å·¡æ£€ï¼šè¯¢é—®æ‰§è¡Œå™¨ç¡®è®¤çœŸå®çŠ¶æ€</li>
<li>åˆ†ç‰‡è¡¥å¿ï¼šCAS ä¿æŠ¤ï¼Œé™æ¬¡é‡è¯•</li>
<li>æ¼è°ƒæ£€æµ‹ï¼šæ—¶é—´çª—å£ï¼Œä¸»åŠ¨è¡¥å¿</li>
</ul>
<p><strong>è®¾è®¡åŸåˆ™</strong>ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-bullet">1.</span> ç®€å•ä¼˜äºå¤æ‚
<span class="hljs-bullet">   -</span> æœ€å°èŠ‚ç‚¹é€‰ä¸»ï¼Œè€Œä¸æ˜¯ Raft é€‰ä¸¾
<span class="hljs-bullet">   -</span> CAS ä¿æŠ¤ï¼Œè€Œä¸æ˜¯åˆ†å¸ƒå¼é”

<span class="hljs-bullet">2.</span> åˆ†å±‚ä¼˜äºå…¨é‡
<span class="hljs-bullet">   -</span> åªæ£€æµ‹ä½é¢‘ä»»åŠ¡æ¼è°ƒ
<span class="hljs-bullet">   -</span> è¶…æ—¶åˆ¤å®šåˆ†ä¸¤å±‚

<span class="hljs-bullet">3.</span> è¯¢é—®ä¼˜äºçŒœæµ‹
<span class="hljs-bullet">   -</span> å…ˆé—®æ‰§è¡Œå™¨ï¼Œå†åˆ¤è¶…æ—¶
<span class="hljs-bullet">   -</span> å‡†ç¡®æ€§ä¼˜äºæ€§èƒ½

<span class="hljs-bullet">4.</span> å…œåº•ä¼˜äºå®Œç¾
<span class="hljs-bullet">   -</span> æ¥å—1%çš„æ¼è°ƒï¼Œç”¨å·¡æ£€å…œåº•
<span class="hljs-bullet">   -</span> æ¥å—çŸ­æš‚çš„çŠ¶æ€ä¸ä¸€è‡´
</code></pre>
<p><strong>æ ¸å¿ƒä»·å€¼</strong>ï¼š</p>
<p>JobFlow æ²¡æœ‰è¿½æ±‚å®Œç¾çš„ä¸€è‡´æ€§ï¼Œè€Œæ˜¯ç”¨å¼‚æ­¥è¡¥å¿æ¢å–äº†ï¼š</p>
<ul>
<li>æ›´å¥½çš„æ€§èƒ½ï¼ˆæ— é”è°ƒåº¦ï¼‰</li>
<li>æ›´ä½çš„å¤æ‚åº¦ï¼ˆæ— éœ€åˆ†å¸ƒå¼é”ï¼‰</li>
<li>æ›´å¥½çš„å¯ç»´æŠ¤æ€§ï¼ˆé€»è¾‘æ¸…æ™°ï¼‰</li>
</ul>
<p>è¿™å°±æ˜¯ JobFlow åœ¨åˆ†å¸ƒå¼è°ƒåº¦è¿™ä¸ªé¢†åŸŸçš„æ ¸å¿ƒç«äº‰åŠ›ï¼š<strong>åœ¨æ€§èƒ½å’Œå¯é æ€§ä¹‹é—´æ‰¾åˆ°æœ€ä¼˜å¹³è¡¡ç‚¹ã€‚</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[JobFlowï¼šå›ºå®šåˆ†ç‰‡å¦‚ä½•è§£å†³åˆ†å¸ƒå¼æ‰«æçš„è¾¹ç•ŒæŠ–åŠ¨]]></title>    <link>https://juejin.cn/post/7588067055481634825</link>    <guid>https://juejin.cn/post/7588067055481634825</guid>    <pubDate>2025-12-27T07:14:15.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588067055481634825" data-draft-id="7588031908172005385" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="JobFlowï¼šå›ºå®šåˆ†ç‰‡å¦‚ä½•è§£å†³åˆ†å¸ƒå¼æ‰«æçš„è¾¹ç•ŒæŠ–åŠ¨"/> <meta itemprop="keywords" content="åç«¯,é¢è¯•,æ¶æ„"/> <meta itemprop="datePublished" content="2025-12-27T07:14:15.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è¸æµªæ— ç—•"/> <meta itemprop="url" content="https://juejin.cn/user/2834988091055719"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            JobFlowï¼šå›ºå®šåˆ†ç‰‡å¦‚ä½•è§£å†³åˆ†å¸ƒå¼æ‰«æçš„è¾¹ç•ŒæŠ–åŠ¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2834988091055719/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è¸æµªæ— ç—•
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-27T07:14:15.000Z" title="Sat Dec 27 2025 07:14:15 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    19
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¼€æºåœ°å€ä¸ç³»åˆ—æ–‡ç« </h2>
<ul>
<li><strong>å¼€æºåœ°å€</strong>ï¼š<code>https://gitee.com/sh_wangwanbao/job-flow</code></li>
<li><strong>ç³»åˆ—æ–‡ç« ï¼š</strong>
<ul>
<li><a href="https://juejin.cn/post/7583469866007969827" target="_blank" title="https://juejin.cn/post/7583469866007969827">ç¬¬ä¸€ç¯‡ï¼šåŸºäºNacosçš„è½»é‡ä»»åŠ¡è°ƒåº¦æ–¹æ¡ˆ â€”â€” ä» XXL-Job çš„ç—›ç‚¹è¯´èµ·</a></li>
<li><a href="https://juejin.cn/post/7584353612501106729" target="_blank" title="https://juejin.cn/post/7584353612501106729">ç¬¬äºŒç¯‡ï¼šJobFlow å®ç°æ–¹æ¡ˆï¼šäº‘åŸç”Ÿæ—¶ä»£çš„ä»»åŠ¡è°ƒåº¦æ–°æ€è·¯</a></li>
<li><a href="https://juejin.cn/post/7585727457472823296" target="_blank" title="https://juejin.cn/post/7585727457472823296">ç¬¬ä¸‰ç¯‡ï¼šJobFlow å®æˆ˜ï¼šæ— é”è°ƒåº¦æ˜¯æ€ä¹ˆåšåˆ°çš„</a></li>
<li><a href="https://juejin.cn/post/7585751355593506835" target="_blank" title="https://juejin.cn/post/7585751355593506835">ç¬¬å››ç¯‡ï¼šJobFlow èƒŒåï¼šäº”ä¸ªè®©æˆ‘è±ç„¶å¼€æœ—çš„è®¾è®¡ç¬é—´</a></li>
<li><a href="https://juejin.cn/post/7588028859541307418" target="_blank" title="https://juejin.cn/post/7588028859541307418">ç¬¬äº”ç¯‡ï¼šJobFlowè°ƒåº¦çš„éš¾é¢˜ï¼šè¶…æ—¶ã€è¡¥å¿ä¸æ¼è°ƒ</a></li>
<li><a href="https://juejin.cn/spost/7588067055481634825" target="_blank" title="https://juejin.cn/spost/7588067055481634825">ç¬¬å…­ç¯‡ï¼šJobFlowï¼šå›ºå®šåˆ†ç‰‡å¦‚ä½•è§£å†³åˆ†å¸ƒå¼æ‰«æçš„è¾¹ç•ŒæŠ–åŠ¨</a></li>
</ul>
</li>
</ul>
<h2 data-id="heading-1">å‰è¨€</h2>
<p>åšæ‰¹å¤„ç†ä»»åŠ¡ï¼Œå¾ˆå¤šäººç¬¬ä¸€ååº”éƒ½æ˜¯åˆ†é¡µæ‹‰æ•°ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">page</span>=<span class="hljs-number">1</span> â†’ æ‹‰<span class="hljs-number">100</span>æ¡
<span class="hljs-attr">page</span>=<span class="hljs-number">2</span> â†’ æ‹‰<span class="hljs-number">100</span>æ¡
...
<span class="hljs-attr">page</span>=N â†’ æ‹‰<span class="hljs-number">50</span>æ¡ï¼Œç»“æŸ
</code></pre>
<p>çœ‹èµ·æ¥å¾ˆè‡ªç„¶ï¼Œä½†åœ¨åˆ†å¸ƒå¼åœºæ™¯ä¸‹ï¼Œè¿™ä¸ªè®¾è®¡æœ‰ä¸ªè‡´å‘½é—®é¢˜ï¼š</p>
<pre><code class="hljs">ä½ åœ¨ç¿»é¡µæœŸé—´ï¼Œæ•°æ®ä¸€ç›´åœ¨å˜åŒ–
â†’ ç¬¬1000é¡µå’Œç¬¬1001é¡µçš„è¾¹ç•Œï¼Œæ˜¯ä¸ªåŠ¨æ€çš„ã€ä¸ç¨³å®šçš„ä¸œè¥¿
â†’ æœ‰äº›æ•°æ®å¯èƒ½æ°¸è¿œè½ä¸åˆ°ä»»ä½•ä¸€é¡µ
â†’ ä½ æ—¢ä¸èƒ½ä¿è¯ä¸é‡å¤ï¼Œä¹Ÿä¸èƒ½ä¿è¯ä¸é—æ¼
</code></pre>
<p>JobFlow çš„é€‰æ‹©æ˜¯ï¼š<strong>æ”¾å¼ƒåˆ†é¡µï¼Œæ”¹ç”¨å›ºå®šåˆ†ç‰‡</strong>ã€‚</p>
<p>è¿™ç¯‡æ–‡ç« å°±æ¥è®²è®²è¿™ä¸ªè®¾è®¡ã€‚</p>
<h2 data-id="heading-2">ä¸€ã€åˆ†é¡µçš„é—®é¢˜ï¼šè¾¹ç•Œåœ¨æŠ–åŠ¨</h2>
<h3 data-id="heading-3">é—®é¢˜åœºæ™¯</h3>
<p>å‡è®¾ä½ è¦åšè®¢å•å¯¹è´¦ï¼Œæ¯å¤©å‡Œæ™¨æ‰«æå…¨é‡è®¢å•ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    A[æ‰«æä»»åŠ¡å¯åŠ¨] --&gt; B[page=1&lt;br/&gt;æ‹‰100æ¡]
    B --&gt; C[page=2&lt;br/&gt;æ‹‰100æ¡]
    C --&gt; D[...]
    D --&gt; E[page=1000&lt;br/&gt;æ‹‰100æ¡]
    E --&gt; F{è¿˜æœ‰ä¸‹ä¸€é¡µ?}
    
    style A fill:#87CEEB
    style B fill:#90EE90
    style C fill:#90EE90
    style E fill:#90EE90
    style F fill:#FFE4B5
</code></pre>
<p>é—®é¢˜åœ¨å“ªï¼Ÿ</p>
<p><strong>æ ¸å¿ƒé—®é¢˜ï¼šè¾¹ç•Œåœ¨æŠ–åŠ¨</strong></p>
<pre><code class="hljs language-ini" lang="ini">ä½ åœ¨æ‰«ç¬¬1é¡µçš„æ—¶å€™ï¼š
- ç”¨æˆ·åœ¨ä¸‹æ–°è®¢å•
- è®¢å•åœ¨æ›´æ–°çŠ¶æ€
- å†å²è®¢å•åœ¨è¢«æ¸…ç†

ç­‰ä½ æ‰«åˆ°ç¬¬1000é¡µï¼š
- å‰é¢çš„é¡µå·²ç»å˜äº†
- è¾¹ç•Œä¹Ÿè·Ÿç€å˜äº†

å…·ä½“è¡¨ç°ï¼š
ç¬¬ä¸€è½®ï¼š<span class="hljs-attr">page</span>=<span class="hljs-number">1000</span> æ‹‰åˆ° ID=<span class="hljs-number">100000</span>-<span class="hljs-number">100100</span>
ç¬¬äºŒè½®ï¼šæœŸé—´æœ‰è®¢å•è¢«åˆ é™¤
        <span class="hljs-attr">page</span>=<span class="hljs-number">1000</span> æ‹‰åˆ° ID=<span class="hljs-number">100000</span>-<span class="hljs-number">100105</span>ï¼ˆè¾¹ç•Œå˜äº†ï¼‰
        <span class="hljs-attr">page</span>=<span class="hljs-number">1001</span> æ‹‰åˆ° ID=<span class="hljs-number">100095</span>-<span class="hljs-number">100195</span>ï¼ˆè¾¹ç•Œåˆå˜äº†ï¼‰

ç»“æœï¼š<span class="hljs-attr">ID</span>=<span class="hljs-number">100095</span>-<span class="hljs-number">100100</span> è¿™<span class="hljs-number">5</span>æ¡è®¢å•
     â†’ å¯èƒ½è¢«é‡å¤å¤„ç†
     â†’ ä¹Ÿå¯èƒ½è¢«é—æ¼

æç«¯æƒ…å†µï¼š
æŸä¸ªè®¢å•åˆšå¥½åœ¨ä½ ç¿»é¡µçš„æ—¶å€™è¢«æ’å…¥
â†’ å®ƒæ°¸è¿œè½ä¸åˆ°ä»»ä½•ä¸€é¡µ
â†’ ä¹Ÿæ°¸è¿œä¸ä¼šè¢«æ‰«æåˆ°ï¼ˆå¹½çµæ•°æ®ï¼‰
</code></pre>
<h3 data-id="heading-4">æœ¬è´¨çŸ›ç›¾</h3>
<p>åˆ†é¡µæŠŠä¸€ä¸ª"ç©ºé—´åˆ’åˆ†"çš„é—®é¢˜ï¼Œé”™è¯¯åœ°å»ºæ¨¡æˆäº†"æ—¶é—´å¿«ç…§"çš„é—®é¢˜ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    A[åˆ†é¡µæ¨¡å‹&lt;br/&gt;è¾¹ç•ŒåŠ¨æ€] --&gt; B[å¿«ç…§ä¸€ç›´åœ¨å˜]
    C[åˆ†ç‰‡æ¨¡å‹&lt;br/&gt;è¾¹ç•Œç¨³å®š] --&gt; D[ç©ºé—´å›ºå®šä¸å˜]
    
    style A fill:#FFB6C1
    style B fill:#FF6B6B
    style C fill:#87CEEB
    style D fill:#90EE90
</code></pre>
<p><strong>åˆ†é¡µæ¨¡å‹çš„é—®é¢˜ï¼š</strong></p>
<ul>
<li>è¾¹ç•Œå®šä¹‰ï¼šå½“å‰å¿«ç…§ä¸‹çš„ç¬¬Né¡µ</li>
<li>ä»»ä½•æ•°æ®å˜æ›´éƒ½ä¼šæ”¹å˜å¿«ç…§</li>
<li>ä½ æ°¸è¿œåœ¨è¿½ä¸€ä¸ªç§»åŠ¨çš„é¶å­</li>
</ul>
<p><strong>åˆ†ç‰‡æ¨¡å‹çš„ä¼˜åŠ¿ï¼š</strong></p>
<ul>
<li>è¾¹ç•Œå®šä¹‰ï¼šå›ºå®šçš„ç©ºé—´åˆ’åˆ†</li>
<li>æ•°æ®å˜æ›´ä¸å½±å“åˆ†ç‰‡å½’å±</li>
<li>ä¸€æ¬¡æ€§å®šä¹‰ï¼Œåç»­ç¨³å®š</li>
</ul>
<h2 data-id="heading-5">äºŒã€å›ºå®šåˆ†ç‰‡çš„æ ¸å¿ƒæ€è·¯</h2>
<p>JobFlow çš„æ€è·¯å¾ˆç®€å•ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">ä¸è¦å†é—®<span class="hljs-string">"è¿˜æœ‰æ²¡æœ‰ä¸‹ä¸€é¡µ"</span>
è°ƒåº¦å™¨è‡ªå·±æŠŠè´£ä»»ç©ºé—´åˆ‡æˆå›ºå®šæ•°é‡çš„åˆ†ç‰‡
</code></pre>
<h3 data-id="heading-6">æ•°æ®åº“è®¾è®¡</h3>
<p>æ ¸å¿ƒé…ç½®åœ¨ <code>job_definition</code> è¡¨ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> job_definition (
    id <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">PRIMARY</span> KEY,
    name <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">100</span>),
    shard_count <span class="hljs-type">INT</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">1</span>,           <span class="hljs-comment">-- å›ºå®šåˆ†ç‰‡æ•°</span>
    shard_strategy <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">'MOD_HASH'</span>,  <span class="hljs-comment">-- åˆ†ç‰‡ç­–ç•¥</span>
    ...
);
</code></pre>
<p>å…³é”®ç‚¹ï¼š</p>
<p><strong>å…³é”®ç‚¹ä¸€ï¼šåˆ†ç‰‡æ•°æ˜¯å›ºå®šçš„</strong></p>
<pre><code class="hljs language-ini" lang="ini">è®¢å•å¯¹è´¦ä»»åŠ¡ï¼šé…ç½® <span class="hljs-attr">shard_count</span> = <span class="hljs-number">100</span>
â†’ è¿™ä¸ªä»»åŠ¡æ°¸è¿œæ˜¯100ä¸ªåˆ†ç‰‡
â†’ æ— è®ºè®¢å•æœ‰100ä¸‡è¿˜æ˜¯1000ä¸‡
â†’ æ— è®ºæ‰§è¡Œå™¨æœ‰3ä¸ªå®ä¾‹è¿˜æ˜¯10ä¸ªå®ä¾‹
</code></pre>
<p><strong>å…³é”®ç‚¹äºŒï¼šåˆ†ç‰‡ç­–ç•¥ç”±ä¸šåŠ¡å®šä¹‰</strong></p>
<pre><code class="hljs language-ini" lang="ini">MOD_HASH ç­–ç•¥ï¼š
- shard_0 è´Ÿè´£ orderId % <span class="hljs-attr">100</span> == <span class="hljs-number">0</span> çš„è®¢å•
- shard_1 è´Ÿè´£ orderId % <span class="hljs-attr">100</span> == <span class="hljs-number">1</span> çš„è®¢å•
- ...
- shard_99 è´Ÿè´£ orderId % <span class="hljs-attr">100</span> == <span class="hljs-number">99</span> çš„è®¢å•

åªè¦ orderId ä¸å˜ï¼Œå®ƒæ°¸è¿œå½’å±åŒä¸€ä¸ªåˆ†ç‰‡
</code></pre>
<h3 data-id="heading-7">è°ƒåº¦å™¨åªå…³å¿ƒä¸¤ä»¶äº‹</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    A[è°ƒåº¦å™¨] --&gt; B[è¿™ä¸€è½®&lt;br/&gt;è¦è·‘å¤šå°‘ç‰‡?]
    A --&gt; C[æ¯ä¸€ç‰‡&lt;br/&gt;ç¼–å·æ˜¯å‡ ?]
    
    B --&gt; D[è¯»é…ç½®&lt;br/&gt;shard_count=100]
    C --&gt; E[åˆ†é…ç¼–å·&lt;br/&gt;0-99]
    
    style A fill:#87CEEB
    style B fill:#FFE4B5
    style C fill:#FFE4B5
    style D fill:#90EE90
    style E fill:#90EE90
</code></pre>
<p>è°ƒåº¦å™¨ä¸å…³å¿ƒï¼š</p>
<ul>
<li>å…·ä½“æ€ä¹ˆåˆ†ç‰‡ï¼ˆä¸šåŠ¡å†³å®šï¼‰</li>
<li>æ¯ç‰‡æœ‰å¤šå°‘æ•°æ®ï¼ˆä¸šåŠ¡å†³å®šï¼‰</li>
<li>æ•°æ®æ€ä¹ˆæŸ¥è¯¢ï¼ˆä¸šåŠ¡å†³å®šï¼‰</li>
</ul>
<p>è°ƒåº¦å™¨åªå…³å¿ƒï¼š</p>
<ul>
<li>è¿™100ä¸ªåˆ†ç‰‡ï¼Œæˆ‘éƒ½è°ƒåº¦åˆ°äº†å—ï¼Ÿ</li>
<li>æ¯ä¸ªåˆ†ç‰‡çš„çŠ¶æ€æ˜¯ä»€ä¹ˆï¼Ÿï¼ˆPENDING/RUNNING/SUCCESS/FAILEDï¼‰</li>
<li>è¶…æ—¶äº†è¦ä¸è¦è¡¥å¿ï¼Ÿ</li>
</ul>
<h2 data-id="heading-8">ä¸‰ã€å›ºå®šåˆ†ç‰‡æ€ä¹ˆè½åœ°</h2>
<h3 data-id="heading-9">åˆ›å»ºçˆ¶å­è®°å½•</h3>
<p>ä»»åŠ¡è§¦å‘æ—¶ï¼Œåˆ›å»ºä¸€ä¸ªçˆ¶è®°å½•å’Œ100ä¸ªå­è®°å½•ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    A[ä»»åŠ¡è§¦å‘] --&gt; B[åˆ›å»ºçˆ¶è®°å½•&lt;br/&gt;job_execution]
    B --&gt; C[åˆ›å»º100ä¸ªå­è®°å½•&lt;br/&gt;job_sub_execution]
    C --&gt; D[shard_index&lt;br/&gt;0-99]
    
    style A fill:#87CEEB
    style B fill:#90EE90
    style C fill:#90EE90
    style D fill:#FFE4B5
</code></pre>
<p>ä»£ç é€»è¾‘ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// 1. åˆ›å»ºçˆ¶è®°å½•</span>
<span class="hljs-type">String</span> <span class="hljs-variable">rootTraceId</span> <span class="hljs-operator">=</span> buildRootTraceId(triggerTime);
<span class="hljs-type">Long</span> <span class="hljs-variable">parentExecutionId</span> <span class="hljs-operator">=</span> createParentExecution(job, triggerTime, shardCount, rootTraceId);

<span class="hljs-comment">// 2. æ‰¹é‡åˆ›å»ºå­è®°å½•</span>
<span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; shardCount; i++) {
    <span class="hljs-type">JobSubExecution</span> <span class="hljs-variable">subExec</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JobSubExecution</span>();
    subExec.setParentExecutionId(parentExecutionId);
    subExec.setShardIndex(i);           <span class="hljs-comment">// å›ºå®šåˆ†ç‰‡ç¼–å·ï¼š0-99</span>
    subExec.setStatus(PENDING);
    subExec.setRetryCount(<span class="hljs-number">0</span>);
    <span class="hljs-comment">// ...</span>
}
jobRepository.batchInsertSubExecutions(subExecutions);
</code></pre>
<p><strong>å…³é”®ç‚¹ï¼šåˆ†ç‰‡åœ¨è°ƒåº¦æ—¶å°±å›ºåŒ–äº†</strong></p>
<p>è¿™ä¸æ˜¯åœ¨æ‰§è¡Œæ—¶ä¸´æ—¶å†³å®š"æˆ‘è¦æ‰«ç¬¬å‡ é¡µ"ï¼Œè€Œæ˜¯åœ¨è°ƒåº¦æ—¶å°±æŠŠè¿™ä¸€è½®çš„è´£ä»»ç©ºé—´åˆ‡æˆ100ç‰‡ï¼Œå›ºåŒ–åˆ°æ•°æ®åº“é‡Œã€‚</p>
<h3 data-id="heading-10">åˆ†é…è°ƒåº¦</h3>
<p>åˆå§‹åˆ†é…é€»è¾‘ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    A[100ä¸ªåˆ†ç‰‡&lt;br/&gt;PENDINGçŠ¶æ€] --&gt; B[æŸ¥è¯¢æ‰§è¡Œå™¨å®ä¾‹&lt;br/&gt;å‡è®¾3ä¸ª]
    B --&gt; C[åˆå§‹åˆ†é…&lt;br/&gt;minåˆ†ç‰‡æ•°,å®ä¾‹æ•°]
    C --&gt; D[åˆ†ç‰‡0 to å®ä¾‹1]
    C --&gt; E[åˆ†ç‰‡1 to å®ä¾‹2]
    C --&gt; F[åˆ†ç‰‡2 to å®ä¾‹3]
    
    style A fill:#87CEEB
    style B fill:#FFE4B5
    style C fill:#90EE90
    style D fill:#90EE90
    style E fill:#90EE90
    style F fill:#90EE90
</code></pre>
<p>ä»£ç é€»è¾‘ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// åˆå§‹åˆ†é…ï¼šmin(åˆ†ç‰‡æ•°, å®ä¾‹æ•°) ä¸ªåˆ†ç‰‡</span>
<span class="hljs-type">int</span> <span class="hljs-variable">initialAllocation</span> <span class="hljs-operator">=</span> Math.min(shardCount, instances.size());
<span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; initialAllocation; i++) {
    allocateAndCallNextShard(parentExecutionId, rootTraceId, job, instances);
}
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆåªåˆ†é…3ä¸ªï¼Ÿ</strong></p>
<p>å› ä¸ºåç»­æ˜¯å›è°ƒé©±åŠ¨çš„ï¼š</p>
<pre><code class="hljs language-erlang" lang="erlang">æ‰§è¡Œå™¨<span class="hljs-number">1</span> æ‰§è¡Œå®Œ åˆ†ç‰‡<span class="hljs-number">0</span> â†’ å›è°ƒè°ƒåº¦å™¨
â†’ è°ƒåº¦å™¨åˆ†é… åˆ†ç‰‡<span class="hljs-number">3</span> ç»™æ‰§è¡Œå™¨<span class="hljs-number">1</span>
â†’ æ‰§è¡Œå™¨<span class="hljs-number">1</span> æ‰§è¡Œå®Œ åˆ†ç‰‡<span class="hljs-number">3</span> â†’ å›è°ƒè°ƒåº¦å™¨
â†’ è°ƒåº¦å™¨åˆ†é… åˆ†ç‰‡<span class="hljs-number">6</span> ç»™æ‰§è¡Œå™¨<span class="hljs-number">1</span>
â†’ ...
</code></pre>
<p>è¿™æ ·å°±å®ç°äº†åŠ¨æ€è´Ÿè½½å‡è¡¡ï¼šå¿«çš„æ‰§è¡Œå™¨å¤šå¹²æ´»ï¼Œæ…¢çš„æ‰§è¡Œå™¨å°‘å¹²æ´»ã€‚</p>
<h3 data-id="heading-11">å…·ä½“åˆ†é…é€»è¾‘</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">allocateAndCallNextShard</span><span class="hljs-params">(...)</span> {
    lock.lock();
    <span class="hljs-keyword">try</span> {
        <span class="hljs-comment">// 1. æŸ¥è¯¢ä¸‹ä¸€æ¡ PENDING åˆ†ç‰‡</span>
        <span class="hljs-type">JobSubExecution</span> <span class="hljs-variable">nextShard</span> <span class="hljs-operator">=</span> jobRepository.findNextPendingSubExecution(parentExecutionId);
        <span class="hljs-keyword">if</span> (nextShard == <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">return</span>;  <span class="hljs-comment">// æ‰€æœ‰åˆ†ç‰‡éƒ½åˆ†é…å®Œäº†</span>
        }

        <span class="hljs-comment">// 2. é€‰æ‹©æ‰§è¡Œå™¨å®ä¾‹ï¼ˆè´Ÿè½½å‡è¡¡ï¼‰</span>
        <span class="hljs-type">ServiceInstance</span> <span class="hljs-variable">instance</span> <span class="hljs-operator">=</span> instances.get(nextShard.getShardIndex() % instances.size());
        <span class="hljs-type">String</span> <span class="hljs-variable">executorUrl</span> <span class="hljs-operator">=</span> instance.getUri().toString();
        
        <span class="hljs-comment">// 3. CAS æ›´æ–°çŠ¶æ€ PENDING â†’ RUNNING</span>
        <span class="hljs-type">boolean</span> <span class="hljs-variable">updated</span> <span class="hljs-operator">=</span> jobRepository.updateSubExecutionWithVersion(
            nextShard.getId(), 
            nextShard.getVersion(), 
            RUNNING, 
            executorUrl,
            LocalDateTime.now()
        );
        
        <span class="hljs-keyword">if</span> (!updated) {
            <span class="hljs-keyword">return</span>;  <span class="hljs-comment">// CAS å¤±è´¥ï¼Œå…¶ä»–å®ä¾‹å·²ç»å¤„ç†äº†</span>
        }
    } <span class="hljs-keyword">finally</span> {
        lock.unlock();
    }

    <span class="hljs-comment">// 4. é”å¤–å¼‚æ­¥è°ƒç”¨æ‰§è¡Œå™¨</span>
    executorService.submit(() -&gt; callExecutor(nextShard, ...));
}
</code></pre>
<p>å…³é”®ç‚¹ï¼š</p>
<p><strong>å…³é”®ç‚¹ä¸€ï¼šshardIndex æ˜¯å›ºå®šçš„</strong></p>
<p>æ— è®ºä½ ä»Šå¤©æœ‰3ä¸ªå®ä¾‹è¿˜æ˜¯æ˜å¤©æ‰©åˆ°10ä¸ªå®ä¾‹ï¼Œåˆ†ç‰‡ç¼–å·æ°¸è¿œæ˜¯ 0-99ã€‚</p>
<p><strong>å…³é”®ç‚¹äºŒï¼šå®ä¾‹é€‰æ‹©åªæ˜¯è´Ÿè½½å‡è¡¡</strong></p>
<pre><code class="hljs language-diff" lang="diff">shardIndex % instances.size()

3ä¸ªå®ä¾‹æ—¶ï¼š
<span class="hljs-deletion">- åˆ†ç‰‡0,3,6,9... â†’ å®ä¾‹0</span>
<span class="hljs-deletion">- åˆ†ç‰‡1,4,7,10... â†’ å®ä¾‹1</span>
<span class="hljs-deletion">- åˆ†ç‰‡2,5,8,11... â†’ å®ä¾‹2</span>

10ä¸ªå®ä¾‹æ—¶ï¼š
<span class="hljs-deletion">- åˆ†ç‰‡0,10,20... â†’ å®ä¾‹0</span>
<span class="hljs-deletion">- åˆ†ç‰‡1,11,21... â†’ å®ä¾‹1</span>
<span class="hljs-deletion">- ...</span>
</code></pre>
<p>åˆ†ç‰‡çš„ç©ºé—´è¯­ä¹‰å’Œå®ä¾‹æ•°é‡è§£è€¦äº†ã€‚</p>
<h2 data-id="heading-12">å››ã€ä¸ºä»€ä¹ˆå›ºå®šåˆ†ç‰‡æ›´é è°±</h2>
<h3 data-id="heading-13">è¾¹ç•Œç¨³å®š</h3>
<p>å¯¹æ¯”ä¸€ä¸‹ä¸¤ç§æ–¹æ¡ˆï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    A[åˆ†é¡µæ–¹æ¡ˆ] --&gt; B[è¾¹ç•ŒæŠ–åŠ¨]
    C[åˆ†ç‰‡æ–¹æ¡ˆ] --&gt; D[è¾¹ç•Œç¨³å®š]
    
    style A fill:#FFB6C1
    style B fill:#FF6B6B
    style C fill:#87CEEB
    style D fill:#90EE90
</code></pre>
<p><strong>åˆ†é¡µæ–¹æ¡ˆï¼š</strong></p>
<pre><code class="hljs language-ini" lang="ini">ä»Šå¤©æ‰«æï¼š
- <span class="hljs-attr">page</span>=<span class="hljs-number">1000</span> æ‹‰åˆ° ID=<span class="hljs-number">100000</span>-<span class="hljs-number">100100</span>
- æ˜å¤©æœ‰è®¢å•è¢«åˆ é™¤
- <span class="hljs-attr">page</span>=<span class="hljs-number">1000</span> æ‹‰åˆ° ID=<span class="hljs-number">100000</span>-<span class="hljs-number">100105</span>ï¼ˆè¾¹ç•Œå˜äº†ï¼‰
</code></pre>
<p><strong>åˆ†ç‰‡æ–¹æ¡ˆï¼š</strong></p>
<pre><code class="hljs language-ini" lang="ini">shard_0 è´Ÿè´£ orderId % <span class="hljs-attr">100</span> == <span class="hljs-number">0</span> çš„è®¢å•

ä»Šå¤©æ‰«æï¼š
- shard_0 æ‹‰åˆ° <span class="hljs-attr">ID</span>=<span class="hljs-number">100</span>, <span class="hljs-number">200</span>, <span class="hljs-number">300</span>, ...
- æ˜å¤©æœ‰è®¢å•è¢«åˆ é™¤
- shard_0 è¿˜æ˜¯æ‹‰ orderId % <span class="hljs-attr">100</span> == <span class="hljs-number">0</span> çš„è®¢å•ï¼ˆå½’å±ä¸å˜ï¼‰
</code></pre>
<h3 data-id="heading-14">è¡¥å¿æ›´ç®€å•</h3>
<p>æœ‰äº†å›ºå®šåˆ†ç‰‡ï¼Œè¡¥å¿é€»è¾‘å¾ˆæ¸…æ™°ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    A[å‘ç°è¶…æ—¶åˆ†ç‰‡] --&gt; B{shard_3&lt;br/&gt;çŠ¶æ€?}
    B --&gt;|PENDING| C[ä»æœªæ‰§è¡Œ&lt;br/&gt;é‡æ–°åˆ†é…]
    B --&gt;|RUNNING| D[è¯¢é—®æ‰§è¡Œå™¨&lt;br/&gt;ç¡®è®¤çŠ¶æ€]
    B --&gt;|FAILED| E{é‡è¯•æ¬¡æ•°?}
    E --&gt;|æœªè¾¾ä¸Šé™| F[CASæ›´æ–°&lt;br/&gt;é‡æ–°æ‰§è¡Œ]
    E --&gt;|è¾¾åˆ°ä¸Šé™| G[æ ‡è®°æœ€ç»ˆå¤±è´¥]
    
    style A fill:#FFB6C1
    style B fill:#FFE4B5
    style C fill:#87CEEB
    style D fill:#87CEEB
    style F fill:#90EE90
    style G fill:#FF6B6B
</code></pre>
<p>è®¾è®¡ç›®æ ‡ä»ï¼š</p>
<pre><code class="hljs">æˆ‘åˆ°åº•æœ‰æ²¡æœ‰æ¼æ‰«æŸä¸€é¡µï¼Ÿï¼ˆæ— æ³•å›ç­”ï¼‰
</code></pre>
<p>å˜æˆäº†ï¼š</p>
<pre><code class="hljs">shard_3 æœ€ç»ˆæ˜¯ SUCCESS è¿˜æ˜¯ FAILEDï¼Ÿï¼ˆæ˜ç¡®çš„ï¼‰
å¦‚æœ FAILEDï¼Œè¡¥å¿å‡ æ¬¡ï¼Ÿï¼ˆå¯æ§çš„ï¼‰
</code></pre>
<h3 data-id="heading-15">å’Œè¶…æ—¶å·¡æ£€å¤©ç„¶ååŒ</h3>
<p>JobFlow çš„è¶…æ—¶å·¡æ£€æ˜¯æŒ‰åˆ†ç‰‡ç²’åº¦çš„ï¼š</p>
<pre><code class="hljs language-diff" lang="diff">è¶…æ—¶å·¡æ£€å‘ç°ï¼š
<span class="hljs-deletion">- shard_0: SUCCESS</span>
<span class="hljs-deletion">- shard_1: SUCCESS</span>
<span class="hljs-deletion">- shard_2: RUNNING è¶…æ—¶</span>
<span class="hljs-deletion">- shard_3: PENDING è¶…æ—¶</span>
<span class="hljs-deletion">- ...</span>

å¤„ç†ï¼š
<span class="hljs-deletion">- shard_2: è¯¢é—®æ‰§è¡Œå™¨ï¼Œç¡®è®¤çŠ¶æ€</span>
<span class="hljs-deletion">- shard_3: é‡æ–°åˆ†é…æ‰§è¡Œ</span>
</code></pre>
<p>å› ä¸ºæœ‰äº†å›ºå®šåˆ†ç‰‡ï¼Œå¯ä»¥åšåˆ°ï¼š</p>
<pre><code class="hljs">éƒ¨åˆ†åˆ†ç‰‡è¶…æ—¶ â†’ å±€éƒ¨è¡¥å¿
è€Œä¸æ˜¯ï¼šæ•´ä½“ä»»åŠ¡å¤±è´¥ â†’ å…¨éƒ¨é‡æ¥
</code></pre>
<h3 data-id="heading-16">æ•´ä½“æµç¨‹å¯¹æ¯”</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    A[åˆ†é¡µæ–¹æ¡ˆ&lt;br/&gt;è¾¹ç•ŒåŠ¨æ€] --&gt; B[ä¸çŸ¥é“&lt;br/&gt;ä¸‹ä¸€é¡µåœ¨å“ª]
    C[åˆ†ç‰‡æ–¹æ¡ˆ&lt;br/&gt;è¾¹ç•Œå›ºå®š] --&gt; D[100ä¸ªåˆ†ç‰‡&lt;br/&gt;çŠ¶æ€æ˜ç¡®]
    
    style A fill:#FFB6C1
    style B fill:#FF6B6B
    style C fill:#87CEEB
    style D fill:#90EE90
</code></pre>
<h2 data-id="heading-17">äº”ã€ä¸šåŠ¡ä¾§æ€ä¹ˆç”¨</h2>
<h3 data-id="heading-18">æ‰§è¡Œå™¨å®ç°</h3>
<p>ä¸šåŠ¡ä¾§åªéœ€è¦å®ç°åˆ†ç‰‡å†…éƒ¨çš„å¤„ç†é€»è¾‘ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@JobHandler("orderSync")</span>
<span class="hljs-keyword">public</span> JobResult <span class="hljs-title function_">syncOrders</span><span class="hljs-params">(JobContext context)</span> {
    <span class="hljs-comment">// 1. ä»ä¸Šä¸‹æ–‡æ‹¿åˆ°åˆ†ç‰‡ä¿¡æ¯</span>
    <span class="hljs-type">int</span> <span class="hljs-variable">shardIndex</span> <span class="hljs-operator">=</span> context.getShardIndex();
    <span class="hljs-type">int</span> <span class="hljs-variable">shardCount</span> <span class="hljs-operator">=</span> context.getShardCount();
    
    <span class="hljs-comment">// 2. æ ¹æ®åˆ†ç‰‡ç­–ç•¥æŸ¥è¯¢æ•°æ®</span>
    List&lt;Order&gt; orders = orderDao.findByShardIndex(shardIndex, shardCount);
    
    <span class="hljs-comment">// 3. å¤„ç†ä¸šåŠ¡é€»è¾‘</span>
    <span class="hljs-keyword">for</span> (Order order : orders) {
        <span class="hljs-comment">// å¯¹è´¦ã€åŒæ­¥ã€æ¸…ç†...</span>
    }
    
    <span class="hljs-keyword">return</span> JobResult.success();
}
</code></pre>
<p><strong>åˆ†ç‰‡ç­–ç•¥ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// MOD_HASH ç­–ç•¥</span>
<span class="hljs-keyword">public</span> List&lt;Order&gt; <span class="hljs-title function_">findByShardIndex</span><span class="hljs-params">(<span class="hljs-type">int</span> shardIndex, <span class="hljs-type">int</span> shardCount)</span> {
    <span class="hljs-keyword">return</span> jdbcTemplate.query(
        <span class="hljs-string">"SELECT * FROM orders WHERE id % ? = ?"</span>,
        <span class="hljs-keyword">new</span> <span class="hljs-title class_">Object</span>[]{shardCount, shardIndex},
        rowMapper
    );
}

<span class="hljs-comment">// RANGE ç­–ç•¥</span>
<span class="hljs-keyword">public</span> List&lt;Order&gt; <span class="hljs-title function_">findByShardIndex</span><span class="hljs-params">(<span class="hljs-type">int</span> shardIndex, <span class="hljs-type">int</span> shardCount)</span> {
    <span class="hljs-type">long</span> <span class="hljs-variable">totalCount</span> <span class="hljs-operator">=</span> getTotalCount();
    <span class="hljs-type">long</span> <span class="hljs-variable">rangeSize</span> <span class="hljs-operator">=</span> totalCount / shardCount;
    <span class="hljs-type">long</span> <span class="hljs-variable">startId</span> <span class="hljs-operator">=</span> shardIndex * rangeSize;
    <span class="hljs-type">long</span> <span class="hljs-variable">endId</span> <span class="hljs-operator">=</span> (shardIndex + <span class="hljs-number">1</span>) * rangeSize;
    
    <span class="hljs-keyword">return</span> jdbcTemplate.query(
        <span class="hljs-string">"SELECT * FROM orders WHERE id &gt;= ? AND id &lt; ?"</span>,
        <span class="hljs-keyword">new</span> <span class="hljs-title class_">Object</span>[]{startId, endId},
        rowMapper
    );
}
</code></pre>
<h3 data-id="heading-19">è‡ªå®šä¹‰ç­–ç•¥</h3>
<p>å¦‚æœå†…ç½®ç­–ç•¥ä¸æ»¡è¶³éœ€æ±‚ï¼Œå¯ä»¥è‡ªå®šä¹‰ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// æŒ‰åœ°åŒºåˆ†ç‰‡</span>
<span class="hljs-keyword">public</span> List&lt;Order&gt; <span class="hljs-title function_">findByShardIndex</span><span class="hljs-params">(<span class="hljs-type">int</span> shardIndex, <span class="hljs-type">int</span> shardCount)</span> {
    <span class="hljs-comment">// 100ä¸ªåˆ†ç‰‡ï¼Œå‰50ä¸ªæ˜¯åä¸œï¼Œå50ä¸ªæ˜¯åå—</span>
    <span class="hljs-keyword">if</span> (shardIndex &lt; <span class="hljs-number">50</span>) {
        <span class="hljs-keyword">return</span> findByRegion(<span class="hljs-string">"åä¸œ"</span>);
    } <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">return</span> findByRegion(<span class="hljs-string">"åå—"</span>);
    }
}

<span class="hljs-comment">// æŒ‰æ—¶é—´åˆ†ç‰‡</span>
<span class="hljs-keyword">public</span> List&lt;Order&gt; <span class="hljs-title function_">findByShardIndex</span><span class="hljs-params">(<span class="hljs-type">int</span> shardIndex, <span class="hljs-type">int</span> shardCount)</span> {
    <span class="hljs-comment">// 100ä¸ªåˆ†ç‰‡ï¼Œæ¯ç‰‡è´Ÿè´£ä¸€ä¸ªå°æ—¶</span>
    <span class="hljs-type">LocalDateTime</span> <span class="hljs-variable">startTime</span> <span class="hljs-operator">=</span> baseTime.plusHours(shardIndex);
    <span class="hljs-type">LocalDateTime</span> <span class="hljs-variable">endTime</span> <span class="hljs-operator">=</span> startTime.plusHours(<span class="hljs-number">1</span>);
    
    <span class="hljs-keyword">return</span> findByTimeRange(startTime, endTime);
}
</code></pre>
<p>ä¸šåŠ¡æœ‰å®Œå…¨çš„çµæ´»æ€§ï¼Œè°ƒåº¦å™¨ä¸å…³å¿ƒå…·ä½“æ€ä¹ˆåˆ†ã€‚</p>
<h2 data-id="heading-20">å…­ã€ä¸€ä¸ªå®Œæ•´çš„ä¾‹å­</h2>
<p>å‡è®¾è®¢å•å¯¹è´¦ä»»åŠ¡ï¼Œé…ç½® 100 ä¸ªåˆ†ç‰‡ï¼š</p>
<h3 data-id="heading-21">ç¬¬ä¸€æ­¥ï¼šé…ç½®ä»»åŠ¡</h3>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> job_definition (name, service_name, handler, cron, shard_count, shard_strategy)
<span class="hljs-keyword">VALUES</span> (<span class="hljs-string">'orderSync'</span>, <span class="hljs-string">'order-service'</span>, <span class="hljs-string">'orderSync'</span>, <span class="hljs-string">'0 2 * * *'</span>, <span class="hljs-number">100</span>, <span class="hljs-string">'MOD_HASH'</span>);
</code></pre>
<h3 data-id="heading-22">ç¬¬äºŒæ­¥ï¼šè°ƒåº¦å™¨è§¦å‘</h3>
<pre><code class="hljs">å‡Œæ™¨2ç‚¹ï¼Œè°ƒåº¦å™¨æ‰«æåˆ°ä»»åŠ¡åˆ°æœŸ
â†’ åˆ›å»ºçˆ¶è®°å½•ï¼ˆtraceId: 20241222020000-abc123ï¼‰
â†’ åˆ›å»º100ä¸ªå­è®°å½•ï¼ˆshard_0 - shard_99ï¼ŒçŠ¶æ€ PENDINGï¼‰
â†’ åˆå§‹åˆ†é…3ä¸ªåˆ†ç‰‡ç»™3ä¸ªæ‰§è¡Œå™¨å®ä¾‹
</code></pre>
<h3 data-id="heading-23">ç¬¬ä¸‰æ­¥ï¼šæ‰§è¡Œå™¨å¤„ç†</h3>
<pre><code class="hljs language-ini" lang="ini">æ‰§è¡Œå™¨1 æ”¶åˆ°è¯·æ±‚ï¼š
- <span class="hljs-attr">shardIndex</span> = <span class="hljs-number">0</span>
- <span class="hljs-attr">shardCount</span> = <span class="hljs-number">100</span>
â†’ æŸ¥è¯¢ï¼šSELECT * FROM orders WHERE id % <span class="hljs-attr">100</span> = <span class="hljs-number">0</span>
â†’ å¤„ç†è¿™äº›è®¢å•
â†’ å›è°ƒè°ƒåº¦å™¨ï¼šshard_0 SUCCESS

è°ƒåº¦å™¨æ”¶åˆ°å›è°ƒï¼š
â†’ æ›´æ–° shard_0 çŠ¶æ€ä¸º SUCCESS
â†’ åˆ†é…ä¸‹ä¸€ä¸ª PENDING åˆ†ç‰‡ï¼ˆshard_3ï¼‰ç»™æ‰§è¡Œå™¨1
â†’ æ‰§è¡Œå™¨1 ç»§ç»­å¤„ç† shard_3
</code></pre>
<h3 data-id="heading-24">ç¬¬å››æ­¥ï¼šå¾ªç¯ç›´åˆ°å®Œæˆ</h3>
<pre><code class="hljs language-diff" lang="diff">æ‰§è¡Œå™¨1, 2, 3 ä¸æ–­ï¼š
<span class="hljs-deletion">- æ‰§è¡Œåˆ†ç‰‡</span>
<span class="hljs-deletion">- å›è°ƒè°ƒåº¦å™¨</span>
<span class="hljs-deletion">- è·å–æ–°åˆ†ç‰‡</span>
<span class="hljs-deletion">- ç»§ç»­æ‰§è¡Œ</span>

ç›´åˆ°æ‰€æœ‰100ä¸ªåˆ†ç‰‡éƒ½æ˜¯ SUCCESS çŠ¶æ€
</code></pre>
<h3 data-id="heading-25">ç¬¬äº”æ­¥ï¼šå¼‚å¸¸å¤„ç†</h3>
<pre><code class="hljs language-sql" lang="sql">å¦‚æœ shard_5 æ‰§è¡Œå¤±è´¥ï¼š
â†’ çŠ¶æ€æ ‡è®°ä¸º FAILED
â†’ å·¡æ£€ä»»åŠ¡å‘ç°
â†’ CAS æ›´æ–°çŠ¶æ€ FAILED â†’ <span class="hljs-keyword">RUNNING</span>
â†’ é‡æ–°åˆ†é…ç»™æŸä¸ªæ‰§è¡Œå™¨
â†’ æœ€å¤šé‡è¯•<span class="hljs-number">3</span>æ¬¡

å¦‚æœ shard_8 ä¸€ç›´ <span class="hljs-keyword">RUNNING</span> ä¸å›è°ƒï¼š
â†’ è¶…æ—¶å·¡æ£€å‘ç°
â†’ HTTP è¯¢é—®æ‰§è¡Œå™¨çŠ¶æ€
â†’ æ ¹æ®è¿”å›ç»“æœå†³å®šï¼šç»§ç»­ç­‰ <span class="hljs-operator">/</span> æ ‡è®°è¶…æ—¶ <span class="hljs-operator">/</span> æ›´æ–°çŠ¶æ€
</code></pre>
<h2 data-id="heading-26">ä¸ƒã€å›ºå®šåˆ†ç‰‡çš„æœ¬è´¨</h2>
<p>ç”¨ä¸€å¥è¯æ¦‚æ‹¬ï¼š</p>
<pre><code class="hljs">åˆ†é¡µæ¨¡å‹ï¼šæˆ‘åœ¨è¿½ä¸€ä¸ªç§»åŠ¨çš„é¶å­
åˆ†ç‰‡æ¨¡å‹ï¼šæˆ‘åœ¨è´Ÿè´£ä¸€å—å›ºå®šçš„ç©ºé—´
</code></pre>
<p>æŠ€æœ¯ä¸Šçš„å·®å¼‚ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    A[åˆ†é¡µæ¨¡å‹] --&gt; B[ä¸´æ—¶è§†å›¾]
    B --&gt; C[è¾¹ç•ŒåŠ¨æ€]
    C --&gt; D[è¡¥å¿å›°éš¾]
    
    E[åˆ†ç‰‡æ¨¡å‹] --&gt; F[æ°¸ä¹…è´£ä»»åŸŸ]
    F --&gt; G[è¾¹ç•Œç¨³å®š]
    G --&gt; H[è¡¥å¿ç®€å•]
    
    style A fill:#FFB6C1
    style D fill:#FF6B6B
    style E fill:#87CEEB
    style H fill:#90EE90
</code></pre>
<p>è®¾è®¡ä¸Šçš„æœ¬è´¨ï¼š</p>
<p><strong>åˆ†é¡µæ¨¡å‹ï¼š</strong></p>
<ul>
<li>æŠŠæ•°æ®å½“æˆä¸€ä¸ªä¸æ–­å˜åŒ–çš„åˆ—è¡¨</li>
<li>ç”¨"é¡µå· + å½“å‰å¿«ç…§"æè¿°è¿›åº¦</li>
<li>å¿«ç…§åœ¨å˜ï¼Œè¾¹ç•Œä¹Ÿåœ¨å˜</li>
</ul>
<p><strong>åˆ†ç‰‡æ¨¡å‹ï¼š</strong></p>
<ul>
<li>æŠŠæ•°æ®ç©ºé—´å½“æˆä¸€ä¸ªç¨³å®šçš„åæ ‡ç³»</li>
<li>åˆ†ç‰‡æ˜¯åæ ‡ç³»ä¸Šçš„åˆ†åŒº</li>
<li>æ¯ä¸ªåˆ†åŒºæœ‰ä¸€ä¸ªè°ƒåº¦è´£ä»»äºº</li>
</ul>
<p><strong>æ ¸å¿ƒåŒºåˆ«ï¼š</strong></p>
<p>åˆ†é¡µé—®çš„æ˜¯ï¼š"ç°åœ¨è¿˜æœ‰æ²¡æœ‰ç¬¬1001é¡µï¼Ÿ"ï¼ˆé—®é¢˜æœ¬èº«æ˜¯é”™çš„ï¼‰</p>
<p>åˆ†ç‰‡è¯´çš„æ˜¯ï¼š"è¿™ä¸€è½®çš„100ç‰‡ï¼Œæˆ‘éƒ½è´Ÿè´£åˆ°åº•äº†ã€‚"ï¼ˆè´£ä»»æ˜ç¡®ï¼‰</p>
<h2 data-id="heading-27">å…«ã€æ€»ç»“</h2>
<p>å›ºå®šåˆ†ç‰‡ä¸æ˜¯ä»€ä¹ˆé«˜æ·±çš„æŠ€æœ¯ï¼Œä»£ç ä¹Ÿä¸å¤æ‚ã€‚</p>
<p>ä½†å®ƒè§£å†³çš„æ˜¯ä¸€ä¸ªè®¤çŸ¥é—®é¢˜ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">ä½ è¦å…ˆæ„è¯†åˆ°<span class="hljs-string">"é—®ç¬¬å‡ é¡µ"</span>è¿™ä¸ªé—®é¢˜æœ¬èº«æ˜¯é”™çš„
ç„¶åæ‰èƒ½æŠŠæ€ç»´æ¨¡å‹åˆ‡æ¢åˆ°<span class="hljs-string">"ç©ºé—´åˆ†ç‰‡ + å›ºå®šè´£ä»»åŸŸ"</span>
</code></pre>
<p>JobFlow çš„å›ºå®šåˆ†ç‰‡è®¾è®¡å¸¦æ¥çš„å¥½å¤„ï¼š</p>
<p><strong>å¥½å¤„ä¸€ï¼šè¾¹ç•Œç¨³å®š</strong></p>
<ul>
<li>åˆ†ç‰‡å½’å±ç”±å›ºå®šè§„åˆ™å†³å®š</li>
<li>æ•°æ®å˜æ›´ä¸å½±å“åˆ†ç‰‡ç¼–å·</li>
<li>è¡¥å¿æœ‰æ˜ç¡®çš„ç©ºé—´è½½ä½“</li>
</ul>
<p><strong>å¥½å¤„äºŒï¼šè´£ä»»æ¸…æ™°</strong></p>
<ul>
<li>æ¯ä¸ªåˆ†ç‰‡éƒ½æœ‰æ˜ç¡®çš„çŠ¶æ€</li>
<li>è°ƒåº¦å™¨çŸ¥é“æ¯ç‰‡æ˜¯å¦æ‰§è¡ŒæˆåŠŸ</li>
<li>è¶…æ—¶ã€å¤±è´¥ã€è¡¥å¿éƒ½æœ‰æ®å¯æŸ¥</li>
</ul>
<p><strong>å¥½å¤„ä¸‰ï¼šååŒè‡ªç„¶</strong></p>
<ul>
<li>å’Œè¶…æ—¶å·¡æ£€å¤©ç„¶ååŒ</li>
<li>å’Œå›è°ƒé©±åŠ¨å¤©ç„¶ååŒ</li>
<li>å’ŒåŠ¨æ€è´Ÿè½½å‡è¡¡å¤©ç„¶ååŒ</li>
</ul>
<p><strong>å¥½å¤„å››ï¼šä¸šåŠ¡çµæ´»</strong></p>
<ul>
<li>ä¸šåŠ¡å†³å®šåˆ†ç‰‡ç­–ç•¥</li>
<li>ä¸šåŠ¡å†³å®šæŸ¥è¯¢æ–¹å¼</li>
<li>è°ƒåº¦å™¨åªç®¡è°ƒåº¦å’ŒçŠ¶æ€</li>
</ul>
<p>ä»å·¥ç¨‹è§’åº¦çœ‹ï¼Œè¿™ä¸æ˜¯"å†™ä¸å‡ºæ¥çš„é«˜éš¾åº¦ä»£ç "ï¼Œè€Œæ˜¯<strong>åœ¨æ­£ç¡®çš„æŠ½è±¡å±‚ä¸Šé‡æ–°å®šä¹‰äº†è¾¹ç•Œ</strong>ã€‚</p>
<p>å¯¹ä¸€ä¸ªåˆ†å¸ƒå¼è°ƒåº¦ç³»ç»Ÿæ¥è¯´ï¼Œè¿™ç§è¾¹ç•Œçº§åˆ«çš„è®¾è®¡ï¼Œæ¯”ä»»ä½•ä¸€è¡ŒæŠ€å·§æ€§çš„ä»£ç éƒ½æ›´å€¼é’±ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åˆ†å¸ƒå¼äº‹åŠ¡æœ¬åœ°æ¶ˆæ¯è¡¨è¯¦è§£ï¼šä¸­å°å›¢é˜Ÿçš„ä½ä¾µå…¥è½åœ°æ–¹æ¡ˆ]]></title>    <link>https://juejin.cn/post/7588064253635330102</link>    <guid>https://juejin.cn/post/7588064253635330102</guid>    <pubDate>2025-12-27T01:49:49.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588064253635330102" data-draft-id="7588064253635313718" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åˆ†å¸ƒå¼äº‹åŠ¡æœ¬åœ°æ¶ˆæ¯è¡¨è¯¦è§£ï¼šä¸­å°å›¢é˜Ÿçš„ä½ä¾µå…¥è½åœ°æ–¹æ¡ˆ"/> <meta itemprop="keywords" content="åç«¯,åˆ†å¸ƒå¼"/> <meta itemprop="datePublished" content="2025-12-27T01:49:49.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å›å®¶è·¯ä¸Šç»•äº†å¼¯"/> <meta itemprop="url" content="https://juejin.cn/user/536217404587134"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åˆ†å¸ƒå¼äº‹åŠ¡æœ¬åœ°æ¶ˆæ¯è¡¨è¯¦è§£ï¼šä¸­å°å›¢é˜Ÿçš„ä½ä¾µå…¥è½åœ°æ–¹æ¡ˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/536217404587134/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å›å®¶è·¯ä¸Šç»•äº†å¼¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-27T01:49:49.000Z" title="Sat Dec 27 2025 01:49:49 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    23
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»15åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">åˆ†å¸ƒå¼äº‹åŠ¡æœ¬åœ°æ¶ˆæ¯è¡¨è¯¦è§£ï¼šä¸­å°å›¢é˜Ÿçš„ä½ä¾µå…¥è½åœ°æ–¹æ¡ˆ</h2>
<p>åœ¨åˆ†å¸ƒå¼äº‹åŠ¡é¢†åŸŸï¼Œå¾ˆå¤šä¸­å°å›¢é˜Ÿé¢ä¸´ä¸€ä¸ªå…±æ€§å›°å¢ƒï¼šæ—¢éœ€è¦è§£å†³è·¨æœåŠ¡æ•°æ®ä¸€è‡´æ€§é—®é¢˜ï¼ˆå¦‚è®¢å•åˆ›å»ºååŒæ­¥ç§¯åˆ†ã€æ”¯ä»˜æˆåŠŸåæ›´æ–°ç‰©æµçŠ¶æ€ï¼‰ï¼Œåˆæ— æ³•æ‰¿æ‹…TCCã€SAGAæ¨¡å¼çš„é«˜å¼€å‘æˆæœ¬ï¼Œä¹Ÿä¸æ»¡è¶³2PC/3PCå¯¹â€œçŸ­äº‹åŠ¡ã€ä½å¹¶å‘â€çš„é™åˆ¶ã€‚æ­¤æ—¶ï¼Œâ€œæœ¬åœ°æ¶ˆæ¯è¡¨+æ¶ˆæ¯é˜Ÿåˆ—â€çš„æ–¹æ¡ˆè„±é¢–è€Œå‡ºâ€”â€”å®ƒåŸºäºâ€œæœ¬åœ°äº‹åŠ¡+å¼‚æ­¥é‡è¯•â€çš„æ ¸å¿ƒæ€è·¯ï¼Œå®ç°äº†ä½ä¾µå…¥ã€ä½å¤æ‚åº¦ã€é«˜å¯ç”¨çš„æœ€ç»ˆä¸€è‡´æ€§ï¼Œæˆä¸ºä¸­å°å›¢é˜Ÿå’Œç®€å•å¼‚æ­¥åœºæ™¯çš„é¦–é€‰åˆ†å¸ƒå¼äº‹åŠ¡æ–¹æ¡ˆã€‚ä»Šå¤©ï¼Œæˆ‘ä»¬å°±å…¨é¢æ‹†è§£æœ¬åœ°æ¶ˆæ¯è¡¨çš„è®¾è®¡é€»è¾‘ã€æ‰§è¡Œæµç¨‹ã€ä¼˜ç¼ºç‚¹åŠè½åœ°è¦ç‚¹ã€‚</p>
<h3 data-id="heading-1">ä¸€ã€é“ºå«ï¼šä¸­å°å›¢é˜Ÿçš„åˆ†å¸ƒå¼äº‹åŠ¡ç—›ç‚¹ï¼Œæœ¬åœ°æ¶ˆæ¯è¡¨çš„è¯ç”ŸèƒŒæ™¯</h3>
<p>ä¸­å°å›¢é˜Ÿåœ¨è½åœ°åˆ†å¸ƒå¼äº‹åŠ¡æ—¶ï¼Œæ ¸å¿ƒç—›ç‚¹å¾€å¾€ä¸æ˜¯â€œæŠ€æœ¯å…ˆè¿›æ€§â€ï¼Œè€Œæ˜¯â€œä½æˆæœ¬ã€ä½ä¾µå…¥ã€æ˜“ç»´æŠ¤â€ã€‚ä¼ ç»Ÿæ–¹æ¡ˆçš„çŸ­æ¿æ°å¥½å‡»ä¸­äº†è¿™äº›ç—›ç‚¹ï¼š</p>
<ul>
<li><strong>2PC/3PCï¼ˆå¼ºä¸€è‡´æ€§ï¼‰</strong> ï¼šæ€§èƒ½å·®ã€é˜»å¡é£é™©é«˜ï¼Œä»…é€‚åˆä½å¹¶å‘åœºæ™¯ï¼›ä¾èµ–èµ„æºå±‚äº‹åŠ¡æ”¯æŒï¼Œæ— æ³•é€‚é…å¼‚æ­¥è·¨æœåŠ¡åœºæ™¯ï¼ˆå¦‚è®¢å•åˆ›å»ºåå¼‚æ­¥å‘é€šçŸ¥ï¼‰ã€‚</li>
<li><strong>TCCï¼ˆæŸ”æ€§äº‹åŠ¡ï¼‰</strong> ï¼šä¸šåŠ¡ä¾µå…¥æ€§æå¼ºï¼Œéœ€æ”¹é€ æ‰€æœ‰å‚ä¸æœåŠ¡çš„æ¥å£ï¼ˆå®ç°Try/Confirm/Cancelï¼‰ï¼Œå¼€å‘ç»´æŠ¤æˆæœ¬é«˜ï¼›å¯¹å›¢é˜ŸæŠ€æœ¯èƒ½åŠ›è¦æ±‚é«˜ï¼Œä¸­å°å›¢é˜Ÿéš¾ä»¥é©¾é©­ã€‚</li>
<li><strong>SAGAï¼ˆæŸ”æ€§äº‹åŠ¡ï¼‰</strong> ï¼šè™½ä¾µå…¥æ€§ä½äºTCCï¼Œä½†å¤æ‚æµç¨‹çš„åè°ƒé€»è¾‘å’Œè¡¥å¿äº‹åŠ¡è®¾è®¡ä»éœ€è¾ƒé«˜æˆæœ¬ï¼›é€‚åˆé•¿äº‹åŠ¡ï¼Œå¯¹ç®€å•å¼‚æ­¥åœºæ™¯ï¼ˆå¦‚â€œæ“ä½œ+é€šçŸ¥â€ï¼‰è€Œè¨€è¿‡äºåšé‡ã€‚</li>
</ul>
<p>ä¸­å°å›¢é˜Ÿçš„æ ¸å¿ƒéœ€æ±‚æ˜¯ï¼š<strong>ä½ä»£ç æ”¹é€ ã€ä½å¼€å‘æˆæœ¬ã€é«˜å¯ç”¨æ€§ã€é€‚é…ç®€å•å¼‚æ­¥è·¨æœåŠ¡åœºæ™¯</strong>ã€‚æœ¬åœ°æ¶ˆæ¯è¡¨æ–¹æ¡ˆæ­£æ˜¯åŸºäºè¿™ä¸€éœ€æ±‚è®¾è®¡çš„â€”â€”å®ƒä¸ä¾èµ–å¤æ‚æ¡†æ¶ï¼Œä»…é€šè¿‡â€œæ•°æ®åº“æœ¬åœ°äº‹åŠ¡+æ¶ˆæ¯é˜Ÿåˆ—é‡è¯•â€çš„ç»„åˆï¼Œå°±èƒ½è§£å†³å¤§éƒ¨åˆ†ç®€å•å¼‚æ­¥åœºæ™¯çš„åˆ†å¸ƒå¼äº‹åŠ¡é—®é¢˜ï¼Œå®ç°â€œä¸šåŠ¡æ“ä½œâ€ä¸â€œè·¨æœåŠ¡é€šçŸ¥â€çš„æœ€ç»ˆä¸€è‡´æ€§ã€‚</p>
<h3 data-id="heading-2">äºŒã€æœ¬åœ°æ¶ˆæ¯è¡¨æ ¸å¿ƒå®šä¹‰ï¼šä»€ä¹ˆæ˜¯â€œæœ¬åœ°äº‹åŠ¡+æ¶ˆæ¯é˜Ÿåˆ—â€æ–¹æ¡ˆï¼Ÿ</h3>
<p>æœ¬åœ°æ¶ˆæ¯è¡¨æ–¹æ¡ˆçš„æ ¸å¿ƒå®šä¹‰æ˜¯ï¼š<strong>å°†åˆ†å¸ƒå¼äº‹åŠ¡æ‹†åˆ†ä¸ºâ€œæœ¬åœ°ä¸šåŠ¡äº‹åŠ¡â€å’Œâ€œå¼‚æ­¥æ¶ˆæ¯é€šçŸ¥â€ä¸¤ä¸ªéƒ¨åˆ†ï¼Œé€šè¿‡åœ¨ä¸šåŠ¡åº“ä¸­æ–°å¢â€œæœ¬åœ°æ¶ˆæ¯è¡¨â€ï¼Œå°†â€œä¸šåŠ¡æ“ä½œâ€ä¸â€œæ¶ˆæ¯å†™å…¥â€å°è£…åœ¨åŒä¸€ä¸ªæœ¬åœ°äº‹åŠ¡ä¸­ï¼Œä¿è¯ä¸¤è€…åŸå­æ€§ï¼ˆè¦ä¹ˆéƒ½æˆåŠŸï¼Œè¦ä¹ˆéƒ½å¤±è´¥ï¼‰ï¼›ä¹‹åé€šè¿‡å®šæ—¶ä»»åŠ¡æ‰«ææœ¬åœ°æ¶ˆæ¯è¡¨ï¼Œå°†æœªæŠ•é€’çš„æ¶ˆæ¯æŠ•é€’åˆ°æ¶ˆæ¯é˜Ÿåˆ—ï¼›æ¥æ”¶æ–¹æ¶ˆè´¹æ¶ˆæ¯é˜Ÿåˆ—ä¸­çš„æ¶ˆæ¯ï¼Œæ‰§è¡Œå¯¹åº”çš„ä¸šåŠ¡æ“ä½œï¼›è‹¥æ¶ˆè´¹å¤±è´¥ï¼Œé€šè¿‡æ¶ˆæ¯é˜Ÿåˆ—çš„é‡è¯•æœºåˆ¶é‡å¤æŠ•é€’ï¼Œç›´è‡³æ¶ˆè´¹æˆåŠŸï¼Œæœ€ç»ˆå®ç°è·¨æœåŠ¡çš„æœ€ç»ˆä¸€è‡´æ€§</strong>ã€‚</p>
<p>æ ¸å¿ƒç»„æˆè¦ç´ ï¼ˆæç®€è®¾è®¡ï¼Œæ— å¤æ‚è§’è‰²ï¼‰ï¼š</p>
<ol>
<li><strong>æœ¬åœ°æ¶ˆæ¯è¡¨</strong>ï¼šå­˜å‚¨åœ¨ä¸šåŠ¡æ•°æ®åº“ä¸­çš„ä¸€å¼ è¡¨ï¼Œç”¨äºè®°å½•éœ€è¦å¼‚æ­¥æŠ•é€’çš„æ¶ˆæ¯ï¼Œæ ¸å¿ƒå­—æ®µåŒ…æ‹¬ï¼šæ¶ˆæ¯IDï¼ˆå”¯ä¸€æ ‡è¯†ï¼‰ã€æ¶ˆæ¯å†…å®¹ï¼ˆå¦‚è®¢å•IDã€ç”¨æˆ·IDï¼‰ã€æ¶ˆæ¯çŠ¶æ€ï¼ˆå¾…æŠ•é€’/å·²æŠ•é€’/å·²æ¶ˆè´¹/å¤±è´¥ï¼‰ã€åˆ›å»ºæ—¶é—´ã€æŠ•é€’æ¬¡æ•°ã€ä¸‹æ¬¡æŠ•é€’æ—¶é—´ç­‰ï¼›æ¶ˆæ¯è¡¨ä¸ä¸šåŠ¡è¡¨åœ¨åŒä¸€ä¸ªæ•°æ®åº“ï¼Œç¡®ä¿æœ¬åœ°äº‹åŠ¡åŸå­æ€§ã€‚</li>
<li><strong>æœ¬åœ°ä¸šåŠ¡äº‹åŠ¡</strong>ï¼šå‘èµ·æ–¹çš„æ ¸å¿ƒä¸šåŠ¡æ“ä½œï¼ˆå¦‚åˆ›å»ºè®¢å•ã€æ‰£å‡ä½™é¢ï¼‰ï¼Œä¸â€œå†™å…¥æœ¬åœ°æ¶ˆæ¯è¡¨â€çš„æ“ä½œå°è£…åœ¨åŒä¸€ä¸ªæ•°æ®åº“äº‹åŠ¡ä¸­ï¼Œä¿è¯ä¸¤è€…åŒæ—¶æˆåŠŸæˆ–åŒæ—¶å¤±è´¥ã€‚</li>
<li><strong>æ¶ˆæ¯é˜Ÿåˆ—ï¼ˆMQï¼‰</strong> ï¼šç”¨äºå¼‚æ­¥ä¼ é€’æ¶ˆæ¯ï¼ˆå¦‚RabbitMQã€RocketMQã€Kafkaï¼‰ï¼Œæ‰¿æ¥æœ¬åœ°æ¶ˆæ¯è¡¨çš„æ¶ˆæ¯æŠ•é€’ï¼Œä¸ºæ¥æ”¶æ–¹æä¾›å¼‚æ­¥æ¶ˆè´¹èƒ½åŠ›ï¼›ä¾èµ–æ¶ˆæ¯é˜Ÿåˆ—çš„â€œæŒä¹…åŒ–â€å’Œâ€œé‡è¯•æœºåˆ¶â€ï¼Œä¿è¯æ¶ˆæ¯ä¸ä¸¢å¤±ã€æ¶ˆè´¹å¤±è´¥å¯é‡è¯•ã€‚</li>
<li><strong>å®šæ—¶ä»»åŠ¡ï¼ˆæ¶ˆæ¯æŠ•é€’å™¨ï¼‰</strong> ï¼šå®šæœŸæ‰«ææœ¬åœ°æ¶ˆæ¯è¡¨ä¸­â€œå¾…æŠ•é€’â€çŠ¶æ€çš„æ¶ˆæ¯ï¼Œå°†å…¶æŠ•é€’åˆ°æ¶ˆæ¯é˜Ÿåˆ—ï¼›è‹¥æŠ•é€’å¤±è´¥ï¼ˆå¦‚MQå®•æœºï¼‰ï¼Œè®°å½•æŠ•é€’æ¬¡æ•°å’Œä¸‹æ¬¡æŠ•é€’æ—¶é—´ï¼Œä¸‹æ¬¡ç»§ç»­é‡è¯•ã€‚</li>
</ol>
<p>æ ¸å¿ƒè§’è‰²ï¼ˆè§’è‰²æç®€ï¼Œæ˜“ç»´æŠ¤ï¼‰ï¼š</p>
<ul>
<li><strong>äº‹åŠ¡å‘èµ·æ–¹</strong>ï¼šæ‰§è¡Œæœ¬åœ°ä¸šåŠ¡äº‹åŠ¡ï¼Œå†™å…¥æœ¬åœ°æ¶ˆæ¯è¡¨ï¼Œé€šè¿‡å®šæ—¶ä»»åŠ¡æŠ•é€’æ¶ˆæ¯ï¼›</li>
<li><strong>äº‹åŠ¡æ¥æ”¶æ–¹</strong>ï¼šæ¶ˆè´¹æ¶ˆæ¯é˜Ÿåˆ—ä¸­çš„æ¶ˆæ¯ï¼Œæ‰§è¡Œå¯¹åº”çš„ä¸šåŠ¡æ“ä½œï¼ˆå¦‚åˆ›å»ºç§¯åˆ†è®°å½•ã€æ›´æ–°ç‰©æµçŠ¶æ€ï¼‰ï¼›</li>
<li><strong>æ¶ˆæ¯é˜Ÿåˆ—ï¼ˆä¸­é—´ä»¶ï¼‰</strong> ï¼šè´Ÿè´£æ¶ˆæ¯çš„å­˜å‚¨ã€ä¼ é€’å’Œé‡è¯•ï¼Œæ˜¯å¼‚æ­¥é€šä¿¡çš„æ ¸å¿ƒè½½ä½“ã€‚</li>
</ul>
<h3 data-id="heading-3">ä¸‰ã€æœ¬åœ°æ¶ˆæ¯è¡¨å®Œæ•´æµç¨‹æ‹†è§£ï¼šä»¥â€œè®¢å•åˆ›å»ºååŒæ­¥ç§¯åˆ†â€ä¸ºä¾‹</h3>
<p>æˆ‘ä»¬ä»¥â€œç”µå•†è®¢å•åˆ›å»ºåï¼Œå¼‚æ­¥åŒæ­¥ç”¨æˆ·ç§¯åˆ†ï¼ˆè®¢å•æœåŠ¡â†’ç§¯åˆ†æœåŠ¡ï¼‰â€çš„ç»å…¸åœºæ™¯ä¸ºä¾‹ï¼Œæ‹†è§£æœ¬åœ°æ¶ˆæ¯è¡¨çš„å®Œæ•´æ‰§è¡Œæµç¨‹ï¼Œç›´è§‚ç†è§£æ¯ä¸ªç¯èŠ‚çš„å…·ä½“æ“ä½œï¼š</p>
<p>ä¸šåŠ¡éœ€æ±‚ï¼šç”¨æˆ·åˆ›å»ºè®¢å•ï¼ˆè®¢å•æœåŠ¡ï¼‰åï¼Œç§¯åˆ†æœåŠ¡éœ€ä¸ºç”¨æˆ·å¢åŠ å¯¹åº”ç§¯åˆ†ï¼Œç¡®ä¿â€œè®¢å•åˆ›å»ºæˆåŠŸâ€ä¸â€œç§¯åˆ†å¢åŠ æˆåŠŸâ€æœ€ç»ˆä¸€è‡´ï¼ˆå…è®¸çŸ­æš‚å»¶è¿Ÿï¼‰ã€‚</p>
<h4 data-id="heading-4">å‰ç½®å‡†å¤‡ï¼šåˆ›å»ºæœ¬åœ°æ¶ˆæ¯è¡¨</h4>
<p>åœ¨è®¢å•æœåŠ¡çš„ä¸šåŠ¡æ•°æ®åº“ä¸­ï¼Œæ–°å¢â€œlocal_messageâ€æœ¬åœ°æ¶ˆæ¯è¡¨ï¼Œè¡¨ç»“æ„ç¤ºä¾‹ï¼ˆMySQLï¼‰ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> `local_message` (
  `id` <span class="hljs-type">bigint</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="hljs-string">'ä¸»é”®ID'</span>,
  `message_id` <span class="hljs-type">varchar</span>(<span class="hljs-number">64</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'æ¶ˆæ¯å”¯ä¸€IDï¼ˆUUIDï¼‰'</span>,
  `message_content` text <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'æ¶ˆæ¯å†…å®¹ï¼ˆJSONæ ¼å¼ï¼Œå¦‚{"order_id":"123","user_id":"456","points":10}ï¼‰'</span>,
  `message_status` tinyint(<span class="hljs-number">4</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">0</span> COMMENT <span class="hljs-string">'æ¶ˆæ¯çŠ¶æ€ï¼š0-å¾…æŠ•é€’ï¼Œ1-å·²æŠ•é€’ï¼Œ2-å·²æ¶ˆè´¹ï¼Œ3-æŠ•é€’å¤±è´¥'</span>,
  `delivery_count` <span class="hljs-type">int</span>(<span class="hljs-number">11</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">0</span> COMMENT <span class="hljs-string">'å·²æŠ•é€’æ¬¡æ•°'</span>,
  `next_delivery_time` datetime <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'ä¸‹æ¬¡æŠ•é€’æ—¶é—´'</span>,
  `create_time` datetime <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span> COMMENT <span class="hljs-string">'åˆ›å»ºæ—¶é—´'</span>,
  `update_time` datetime <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span> <span class="hljs-keyword">ON</span> <span class="hljs-keyword">UPDATE</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span> COMMENT <span class="hljs-string">'æ›´æ–°æ—¶é—´'</span>,
  <span class="hljs-keyword">PRIMARY</span> KEY (`id`),
  <span class="hljs-keyword">UNIQUE</span> KEY `uk_message_id` (`message_id`),
  INDEX `idx_message_status` (`message_status`),
  INDEX `idx_next_delivery_time` (`next_delivery_time`)
) ENGINE<span class="hljs-operator">=</span>InnoDB <span class="hljs-keyword">DEFAULT</span> CHARSET<span class="hljs-operator">=</span>utf8mb4 COMMENT<span class="hljs-operator">=</span><span class="hljs-string">'æœ¬åœ°æ¶ˆæ¯è¡¨'</span>;
</code></pre>
<h4 data-id="heading-5">é˜¶æ®µ1ï¼šæ‰§è¡Œæœ¬åœ°äº‹åŠ¡ï¼ˆä¸šåŠ¡æ“ä½œ+å†™å…¥æ¶ˆæ¯è¡¨ï¼‰</h4>
<p>è®¢å•æœåŠ¡åœ¨åˆ›å»ºè®¢å•æ—¶ï¼Œå°†â€œåˆ›å»ºè®¢å•â€å’Œâ€œå†™å…¥ç§¯åˆ†åŒæ­¥æ¶ˆæ¯â€å°è£…åœ¨åŒä¸€ä¸ªæœ¬åœ°äº‹åŠ¡ä¸­ï¼Œä¿è¯åŸå­æ€§ï¼š</p>
<ol>
<li>ç”¨æˆ·å‘èµ·åˆ›å»ºè®¢å•è¯·æ±‚ï¼Œè®¢å•æœåŠ¡å¼€å¯æ•°æ®åº“äº‹åŠ¡ï¼›</li>
<li>æ‰§è¡Œæ ¸å¿ƒä¸šåŠ¡æ“ä½œï¼šå‘â€œorderâ€è¡¨æ’å…¥è®¢å•è®°å½•ï¼ˆçŠ¶æ€ä¸ºâ€œå·²åˆ›å»ºâ€ï¼‰ï¼›</li>
<li>æ‰§è¡Œæ¶ˆæ¯å†™å…¥æ“ä½œï¼šç”Ÿæˆå”¯ä¸€æ¶ˆæ¯IDï¼Œå‘â€œlocal_messageâ€è¡¨æ’å…¥ä¸€æ¡æ¶ˆæ¯ï¼ˆæ¶ˆæ¯å†…å®¹ä¸ºè®¢å•IDã€ç”¨æˆ·IDã€ç§¯åˆ†å€¼ç­‰ï¼ŒçŠ¶æ€ä¸ºâ€œ0-å¾…æŠ•é€’â€ï¼Œä¸‹æ¬¡æŠ•é€’æ—¶é—´ä¸ºå½“å‰æ—¶é—´+10ç§’ï¼‰ï¼›</li>
<li>æäº¤æ•°æ®åº“äº‹åŠ¡ï¼šè‹¥æ­¥éª¤2å’Œ3å‡æˆåŠŸï¼Œäº‹åŠ¡æäº¤ï¼Œè®¢å•åˆ›å»ºæˆåŠŸä¸”æ¶ˆæ¯å†™å…¥æˆåŠŸï¼›è‹¥ä»»æ„ä¸€æ­¥å¤±è´¥ï¼ˆå¦‚è®¢å•å‚æ•°é”™è¯¯ã€æ•°æ®åº“å¼‚å¸¸ï¼‰ï¼Œäº‹åŠ¡å›æ»šï¼Œè®¢å•å’Œæ¶ˆæ¯å‡ä¸ç”Ÿæ•ˆï¼Œæ— æ•°æ®ä¸ä¸€è‡´ã€‚</li>
</ol>
<h4 data-id="heading-6">é˜¶æ®µ2ï¼šå®šæ—¶ä»»åŠ¡æŠ•é€’æ¶ˆæ¯åˆ°MQ</h4>
<p>è®¢å•æœåŠ¡å¯åŠ¨å®šæ—¶ä»»åŠ¡ï¼ˆå¦‚æ¯10ç§’æ‰§è¡Œä¸€æ¬¡ï¼‰ï¼Œæ‰«ææœ¬åœ°æ¶ˆæ¯è¡¨ä¸­â€œå¾…æŠ•é€’â€ä¸”â€œä¸‹æ¬¡æŠ•é€’æ—¶é—´â‰¤å½“å‰æ—¶é—´â€çš„æ¶ˆæ¯ï¼Œå°†å…¶æŠ•é€’åˆ°æ¶ˆæ¯é˜Ÿåˆ—ï¼ˆå¦‚RocketMQçš„â€œorder_to_points_topicâ€ä¸»é¢˜ï¼‰ï¼š</p>
<ol>
<li>
<p>å®šæ—¶ä»»åŠ¡æŸ¥è¯¢æœ¬åœ°æ¶ˆæ¯è¡¨ï¼š<code>SELECT * FROM local_message WHERE message_status=0 AND next_delivery_time â‰¤ NOW()</code>ï¼›</p>
</li>
<li>
<p>éå†æŸ¥è¯¢ç»“æœï¼Œå‘æ¶ˆæ¯é˜Ÿåˆ—å‘é€æ¶ˆæ¯ï¼ˆæ¶ˆæ¯å†…å®¹ä¸ºlocal_messageè¡¨ä¸­çš„message_contentï¼‰ï¼›</p>
</li>
<li>
<p>å¤„ç†æŠ•é€’ç»“æœï¼š</p>
<ol>
<li>è‹¥æŠ•é€’æˆåŠŸï¼šæ›´æ–°æ¶ˆæ¯çŠ¶æ€ä¸ºâ€œ1-å·²æŠ•é€’â€ï¼Œè®°å½•æŠ•é€’æ¬¡æ•°ï¼›</li>
<li>è‹¥æŠ•é€’å¤±è´¥ï¼ˆå¦‚MQå®•æœºï¼‰ï¼šæ›´æ–°æŠ•é€’æ¬¡æ•°ï¼ˆ+1ï¼‰ï¼Œè®¾ç½®ä¸‹æ¬¡æŠ•é€’æ—¶é—´ï¼ˆå¦‚å½“å‰æ—¶é—´+2^nç§’ï¼Œé‡‡ç”¨æŒ‡æ•°é€€é¿ç­–ç•¥ï¼Œé¿å…é¢‘ç¹é‡è¯•ï¼‰ï¼›è‹¥æŠ•é€’æ¬¡æ•°è¶…è¿‡é˜ˆå€¼ï¼ˆå¦‚5æ¬¡ï¼‰ï¼Œæ ‡è®°æ¶ˆæ¯çŠ¶æ€ä¸ºâ€œ3-æŠ•é€’å¤±è´¥â€ï¼Œè§¦å‘å‘Šè­¦ï¼ˆäººå·¥ä»‹å…¥å¤„ç†ï¼‰ã€‚</li>
</ol>
</li>
</ol>
<h4 data-id="heading-7">é˜¶æ®µ3ï¼šæ¥æ”¶æ–¹æ¶ˆè´¹æ¶ˆæ¯ï¼Œæ‰§è¡Œä¸šåŠ¡æ“ä½œ</h4>
<p>ç§¯åˆ†æœåŠ¡ç›‘å¬æ¶ˆæ¯é˜Ÿåˆ—çš„â€œorder_to_points_topicâ€ä¸»é¢˜ï¼Œæ¶ˆè´¹è®¢å•æœåŠ¡æŠ•é€’çš„æ¶ˆæ¯ï¼Œæ‰§è¡Œç§¯åˆ†å¢åŠ æ“ä½œï¼š</p>
<ol>
<li>
<p>ç§¯åˆ†æœåŠ¡ä»æ¶ˆæ¯é˜Ÿåˆ—è·å–æ¶ˆæ¯ï¼Œè§£ææ¶ˆæ¯å†…å®¹ï¼ˆè®¢å•IDã€ç”¨æˆ·IDã€ç§¯åˆ†å€¼ï¼‰ï¼›</p>
</li>
<li>
<p>æ‰§è¡Œå¹‚ç­‰æ€§æ ¡éªŒï¼šæŸ¥è¯¢â€œpoints_logâ€ç§¯åˆ†æ—¥å¿—è¡¨ï¼Œåˆ¤æ–­è¯¥æ¶ˆæ¯IDå¯¹åº”çš„ç§¯åˆ†æ˜¯å¦å·²å¢åŠ ï¼ˆé¿å…é‡å¤æ¶ˆè´¹ï¼‰ï¼›è‹¥å·²æ¶ˆè´¹ï¼Œç›´æ¥è¿”å›æˆåŠŸï¼›è‹¥æœªæ¶ˆè´¹ï¼Œç»§ç»­ä¸‹ä¸€æ­¥ï¼›</p>
</li>
<li>
<p>æ‰§è¡Œæ ¸å¿ƒä¸šåŠ¡æ“ä½œï¼šå‘â€œuser_pointsâ€è¡¨æ›´æ–°ç”¨æˆ·ç§¯åˆ†ï¼ˆå¢åŠ å¯¹åº”ç§¯åˆ†ï¼‰ï¼Œå‘â€œpoints_logâ€è¡¨æ’å…¥ç§¯åˆ†å˜æ›´è®°å½•ï¼ˆå…³è”æ¶ˆæ¯IDï¼Œç”¨äºå¹‚ç­‰æ ¡éªŒï¼‰ï¼›</p>
</li>
<li>
<p>å¤„ç†æ¶ˆè´¹ç»“æœï¼š</p>
<ol>
<li>è‹¥æ¶ˆè´¹æˆåŠŸï¼šå‘æ¶ˆæ¯é˜Ÿåˆ—å‘é€â€œæ¶ˆè´¹ç¡®è®¤â€ï¼ˆACKï¼‰ï¼Œæ¶ˆæ¯é˜Ÿåˆ—åˆ é™¤è¯¥æ¶ˆæ¯ï¼›</li>
<li>è‹¥æ¶ˆè´¹å¤±è´¥ï¼ˆå¦‚æ•°æ®åº“å¼‚å¸¸ã€ç§¯åˆ†æœåŠ¡å®•æœºï¼‰ï¼šä¸å‘é€ACKï¼Œæ¶ˆæ¯é˜Ÿåˆ—å°†è¯¥æ¶ˆæ¯é‡æ–°æ”¾å…¥é˜Ÿåˆ—ï¼Œç­‰å¾…ä¸‹æ¬¡æŠ•é€’ï¼ˆä¾èµ–MQçš„é‡è¯•æœºåˆ¶ï¼Œé‡è¯•é—´éš”å¯é…ç½®ï¼‰ï¼›è‹¥é‡è¯•æ¬¡æ•°è¶…è¿‡é˜ˆå€¼ï¼Œæ¶ˆæ¯è¿›å…¥æ­»ä¿¡é˜Ÿåˆ—ï¼Œåç»­äººå·¥å¤„ç†ã€‚</li>
</ol>
</li>
</ol>
<h4 data-id="heading-8">é˜¶æ®µ4ï¼šï¼ˆå¯é€‰ï¼‰æ¶ˆæ¯æ¶ˆè´¹ç¡®è®¤å›å†™ï¼ˆä¼˜åŒ–ç‚¹ï¼‰</h4>
<p>ä¸ºäº†æ›´ç²¾å‡†åœ°è·Ÿè¸ªæ¶ˆæ¯çŠ¶æ€ï¼Œå¯å¢åŠ â€œæ¶ˆè´¹ç¡®è®¤å›å†™â€æ­¥éª¤ï¼šç§¯åˆ†æœåŠ¡æ¶ˆè´¹æˆåŠŸåï¼Œä¸»åŠ¨è°ƒç”¨è®¢å•æœåŠ¡çš„â€œæ¶ˆæ¯æ¶ˆè´¹ç¡®è®¤æ¥å£â€ï¼Œè®¢å•æœåŠ¡æ”¶åˆ°åå°†æœ¬åœ°æ¶ˆæ¯è¡¨ä¸­å¯¹åº”æ¶ˆæ¯çš„çŠ¶æ€æ›´æ–°ä¸ºâ€œ2-å·²æ¶ˆè´¹â€ã€‚æ­¤æ­¥éª¤éå¿…éœ€ï¼Œä½†èƒ½è®©æ¶ˆæ¯çŠ¶æ€æ›´é€æ˜ï¼Œä¾¿äºé—®é¢˜æ’æŸ¥ã€‚</p>
<h3 data-id="heading-9">å››ã€æœ¬åœ°æ¶ˆæ¯è¡¨çš„æ ¸å¿ƒä¼˜åŠ¿ä¸å±€é™æ€§</h3>
<p>æœ¬åœ°æ¶ˆæ¯è¡¨æ–¹æ¡ˆçš„ä¼˜åŠ¿å’Œå±€é™æ€§éƒ½æºäºå…¶â€œæç®€è®¾è®¡â€ï¼Œé€‚é…åœºæ™¯é«˜åº¦èšç„¦äºâ€œç®€å•å¼‚æ­¥è·¨æœåŠ¡åœºæ™¯â€ã€‚</p>
<h4 data-id="heading-10">1. æ ¸å¿ƒä¼˜åŠ¿ï¼šä½ä¾µå…¥ã€ä½æˆæœ¬ã€é«˜å¯ç”¨</h4>
<ul>
<li><strong>ä¸šåŠ¡ä¾µå…¥æ€§æä½</strong>ï¼šæ— éœ€æ”¹é€ ç°æœ‰ä¸šåŠ¡æ¥å£ï¼Œä»…éœ€åœ¨ä¸šåŠ¡åº“ä¸­æ–°å¢æœ¬åœ°æ¶ˆæ¯è¡¨ï¼Œåœ¨åŸæœ‰ä¸šåŠ¡äº‹åŠ¡ä¸­æ–°å¢â€œå†™å…¥æ¶ˆæ¯â€çš„æ­¥éª¤ï¼Œå¼€å‘æ”¹é€ é‡æå°ï¼›</li>
<li><strong>å®ç°ç®€å•ï¼Œæˆæœ¬ä½</strong>ï¼šä¸ä¾èµ–å¤æ‚çš„åˆ†å¸ƒå¼äº‹åŠ¡æ¡†æ¶ï¼Œä»…éœ€ä½¿ç”¨æ•°æ®åº“æœ¬åœ°äº‹åŠ¡å’Œæ¶ˆæ¯é˜Ÿåˆ—ï¼Œä¸­å°å›¢é˜Ÿæ— éœ€é¢å¤–å­¦ä¹ æˆæœ¬ï¼Œå°±èƒ½å¿«é€Ÿè½åœ°ï¼›</li>
<li><strong>é«˜å¯ç”¨æ€§å¼º</strong>ï¼šæœ¬åœ°äº‹åŠ¡ä¿è¯â€œä¸šåŠ¡+æ¶ˆæ¯â€åŸå­æ€§ï¼Œæ— æ•°æ®ä¸¢å¤±é£é™©ï¼›æ¶ˆæ¯é˜Ÿåˆ—çš„æŒä¹…åŒ–å’Œé‡è¯•æœºåˆ¶ï¼Œä¿è¯æ¶ˆæ¯èƒ½å¯é æŠ•é€’ï¼›å®šæ—¶ä»»åŠ¡çš„æŒ‡æ•°é€€é¿é‡è¯•ï¼Œé¿å…äº†ç¬æ—¶æ•…éšœå¯¼è‡´çš„æ¶ˆæ¯æŠ•é€’å¤±è´¥ï¼›</li>
<li><strong>æ€§èƒ½å½±å“å°</strong>ï¼šæœ¬åœ°æ¶ˆæ¯è¡¨çš„å†™å…¥æ˜¯æœ¬åœ°æ•°æ®åº“æ“ä½œï¼Œæ€§èƒ½å¼€é”€æä½ï¼›æ¶ˆæ¯æŠ•é€’å’Œæ¶ˆè´¹æ˜¯å¼‚æ­¥çš„ï¼Œä¸ä¼šé˜»å¡æ ¸å¿ƒä¸šåŠ¡æµç¨‹ï¼ˆå¦‚è®¢å•åˆ›å»ºï¼‰ï¼Œå¯¹æ ¸å¿ƒä¸šåŠ¡æ€§èƒ½å‡ ä¹æ— å½±å“ã€‚</li>
</ul>
<h4 data-id="heading-11">2. å±€é™æ€§ï¼šä»…é€‚é…ç®€å•åœºæ™¯ï¼Œä¸€è‡´æ€§å»¶è¿Ÿå¯æ§</h4>
<ul>
<li><strong>ä»…æ”¯æŒç®€å•å¼‚æ­¥åœºæ™¯</strong>ï¼šé€‚åˆâ€œä¸€å¯¹ä¸€â€çš„å¼‚æ­¥è·¨æœåŠ¡é€šçŸ¥åœºæ™¯ï¼ˆå¦‚è®¢å•â†’ç§¯åˆ†ã€æ”¯ä»˜â†’ç‰©æµï¼‰ï¼›ä¸æ”¯æŒå¤æ‚æµç¨‹ï¼ˆå¦‚å¤šæœåŠ¡ä¸²è¡Œ/å¹¶è¡Œäº¤äº’ã€æµç¨‹åˆ†æ”¯ï¼‰ï¼Œä¹Ÿä¸æ”¯æŒé•¿äº‹åŠ¡åœºæ™¯ï¼›</li>
<li><strong>ä»…èƒ½ä¿è¯æœ€ç»ˆä¸€è‡´æ€§</strong>ï¼šæ¶ˆæ¯æŠ•é€’å’Œæ¶ˆè´¹å­˜åœ¨å»¶è¿Ÿï¼Œä¼šå‡ºç°â€œè®¢å•åˆ›å»ºæˆåŠŸä½†ç§¯åˆ†å°šæœªå¢åŠ â€çš„ä¸­é—´çŠ¶æ€ï¼Œéœ€ä¸šåŠ¡å±‚é¢èƒ½æ¥å—ï¼›</li>
<li><strong>æ¶ˆæ¯è¡¨ä¸ä¸šåŠ¡åº“è€¦åˆ</strong>ï¼šæœ¬åœ°æ¶ˆæ¯è¡¨å­˜å‚¨åœ¨ä¸šåŠ¡æ•°æ®åº“ä¸­ï¼Œä¼šå¢åŠ ä¸šåŠ¡åº“çš„å­˜å‚¨å‹åŠ›ï¼›è‹¥ä¸šåŠ¡åº“å®•æœºï¼Œæ¶ˆæ¯æŠ•é€’ä¼šæš‚æ—¶ä¸­æ–­ï¼ˆä½†ä¸šåŠ¡ä¹Ÿæ— æ³•æ‰§è¡Œï¼Œå±äºå¯æ¥å—èŒƒå›´ï¼‰ï¼›</li>
<li><strong>éœ€æ‰‹åŠ¨å¤„ç†å¹‚ç­‰æ€§å’Œæ­»ä¿¡æ¶ˆæ¯</strong>ï¼šæ¶ˆè´¹æ–¹å¿…é¡»å®ç°å¹‚ç­‰æ€§ï¼ˆé¿å…é‡å¤æ¶ˆè´¹ï¼‰ï¼Œæ­»ä¿¡æ¶ˆæ¯ï¼ˆå¤šæ¬¡é‡è¯•å¤±è´¥çš„æ¶ˆæ¯ï¼‰éœ€è¦äººå·¥ä»‹å…¥å¤„ç†ï¼Œå¢åŠ äº†è¿ç»´æˆæœ¬ã€‚</li>
</ul>
<h3 data-id="heading-12">äº”ã€æœ¬åœ°æ¶ˆæ¯è¡¨çš„é€‚ç”¨åœºæ™¯ä¸è½åœ°æ³¨æ„äº‹é¡¹</h3>
<p>æœ¬åœ°æ¶ˆæ¯è¡¨æ–¹æ¡ˆçš„ç‰¹æ€§å†³å®šäº†å®ƒæ˜¯â€œç®€å•å¼‚æ­¥åœºæ™¯çš„æœ€ä¼˜è§£â€ï¼Œè½åœ°æ—¶éœ€é‡ç‚¹è§£å†³å¹‚ç­‰æ€§ã€é‡è¯•ç­–ç•¥ã€æ­»ä¿¡å¤„ç†ç­‰æ ¸å¿ƒé—®é¢˜ã€‚</p>
<h4 data-id="heading-13">1. é€‚ç”¨åœºæ™¯</h4>
<ul>
<li><strong>ç®€å•å¼‚æ­¥è·¨æœåŠ¡é€šçŸ¥åœºæ™¯</strong>ï¼šå¦‚è®¢å•åˆ›å»ºååŒæ­¥ç§¯åˆ†ã€æ”¯ä»˜æˆåŠŸåæ›´æ–°ç‰©æµçŠ¶æ€ã€ç”¨æˆ·æ³¨å†Œåå‘é€æ¬¢è¿çŸ­ä¿¡/é‚®ä»¶ï¼›</li>
<li><strong>ä¸­å°å›¢é˜Ÿã€ä½å¼€å‘æˆæœ¬éœ€æ±‚åœºæ™¯</strong>ï¼šå›¢é˜ŸæŠ€æœ¯èƒ½åŠ›æœ‰é™ï¼Œæ— æ³•æ‰¿æ‹…TCCã€SAGAçš„å¼€å‘ç»´æŠ¤æˆæœ¬ï¼Œéœ€è¦å¿«é€Ÿè½åœ°åˆ†å¸ƒå¼äº‹åŠ¡æ–¹æ¡ˆï¼›</li>
<li><strong>æ ¸å¿ƒä¸šåŠ¡éå¼ºå®æ—¶ä¸€è‡´æ€§åœºæ™¯</strong>ï¼šæ ¸å¿ƒä¸šåŠ¡ï¼ˆå¦‚è®¢å•åˆ›å»ºï¼‰æ— éœ€ç­‰å¾…è·¨æœåŠ¡æ“ä½œå®Œæˆï¼Œå¯æ¥å—çŸ­æš‚çš„ä¸€è‡´æ€§å»¶è¿Ÿï¼›</li>
<li><strong>åŸºäºå…³ç³»å‹æ•°æ®åº“çš„ä¸šåŠ¡åœºæ™¯</strong>ï¼šä¸šåŠ¡ä½¿ç”¨MySQLã€PostgreSQLç­‰å…³ç³»å‹æ•°æ®åº“ï¼Œèƒ½åˆ©ç”¨æœ¬åœ°äº‹åŠ¡ä¿è¯â€œä¸šåŠ¡+æ¶ˆæ¯â€çš„åŸå­æ€§ã€‚</li>
</ul>
<h4 data-id="heading-14">2. è½åœ°æ³¨æ„äº‹é¡¹ï¼ˆæ ¸å¿ƒæŠ€æœ¯éš¾ç‚¹ï¼‰</h4>
<ul>
<li>
<p><strong>æ¶ˆæ¯è¡¨è®¾è®¡ä¼˜åŒ–</strong>ï¼š</p>
<ul>
<li>å¿…é¡»æ·»åŠ â€œæ¶ˆæ¯å”¯ä¸€IDâ€ï¼ˆå¦‚UUIDï¼‰ï¼Œç”¨äºå¹‚ç­‰æ€§æ ¡éªŒï¼›</li>
<li>ç´¢å¼•è®¾è®¡ï¼šä¸ºâ€œmessage_statusâ€å’Œâ€œnext_delivery_timeâ€å»ºç«‹è”åˆç´¢å¼•ï¼Œæå‡å®šæ—¶ä»»åŠ¡æŸ¥è¯¢æ•ˆç‡ï¼›ä¸ºâ€œmessage_idâ€å»ºç«‹å”¯ä¸€ç´¢å¼•ï¼Œé¿å…é‡å¤æ’å…¥æ¶ˆæ¯ï¼›</li>
<li>å­—æ®µç²¾ç®€ï¼šä»…å­˜å‚¨å¿…è¦çš„æ¶ˆæ¯å†…å®¹ï¼Œé¿å…æ¶ˆæ¯è¡¨è¿‡å¤§å½±å“æŸ¥è¯¢æ€§èƒ½ã€‚</li>
</ul>
</li>
<li>
<p><strong>ä¸¥æ ¼ä¿è¯å¹‚ç­‰æ€§</strong>ï¼š</p>
<ul>
<li>æ¶ˆè´¹æ–¹ï¼šé€šè¿‡â€œæ¶ˆæ¯IDâ€æˆ–â€œä¸šåŠ¡å”¯ä¸€æ ‡è¯†ï¼ˆå¦‚è®¢å•IDï¼‰â€åšå¹‚ç­‰æ ¡éªŒï¼Œç¡®ä¿é‡å¤æ¶ˆè´¹ä¸ä¼šå¯¼è‡´æ•°æ®å¼‚å¸¸ï¼ˆå¦‚é‡å¤å¢åŠ ç§¯åˆ†ï¼‰ï¼›</li>
<li>å‘èµ·æ–¹ï¼šæœ¬åœ°äº‹åŠ¡æäº¤å‰ï¼Œé€šè¿‡â€œæ¶ˆæ¯IDâ€å”¯ä¸€ç´¢å¼•é¿å…é‡å¤å†™å…¥æ¶ˆæ¯ã€‚</li>
</ul>
</li>
<li>
<p><strong>åˆç†è®¾è®¡é‡è¯•ç­–ç•¥</strong>ï¼š</p>
<ul>
<li>å‘èµ·æ–¹å®šæ—¶ä»»åŠ¡ï¼šé‡‡ç”¨â€œæŒ‡æ•°é€€é¿é‡è¯•â€ï¼ˆå¦‚10ç§’ã€20ç§’ã€40ç§’ã€80ç§’...ï¼‰ï¼Œé¿å…é¢‘ç¹é‡è¯•ç»™MQå’Œæ•°æ®åº“å¸¦æ¥å‹åŠ›ï¼›è®¾ç½®æœ€å¤§æŠ•é€’æ¬¡æ•°ï¼ˆå¦‚5æ¬¡ï¼‰ï¼Œè¶…è¿‡é˜ˆå€¼æ ‡è®°ä¸ºå¤±è´¥å¹¶å‘Šè­¦ï¼›</li>
<li>æ¶ˆæ¯é˜Ÿåˆ—æ¶ˆè´¹ï¼šé…ç½®åˆç†çš„é‡è¯•é—´éš”ï¼ˆå¦‚30ç§’ï¼‰ï¼Œè¶…è¿‡é‡è¯•æ¬¡æ•°åå°†æ¶ˆæ¯è½¬å…¥æ­»ä¿¡é˜Ÿåˆ—ï¼Œé¿å…å ç”¨æ­£å¸¸æ¶ˆæ¯é˜Ÿåˆ—èµ„æºã€‚</li>
</ul>
</li>
<li>
<p><strong>æ¶ˆæ¯æ¸…ç†ä¸å½’æ¡£</strong>ï¼šå®šæ—¶å½’æ¡£æˆ–åˆ é™¤â€œå·²æ¶ˆè´¹â€çŠ¶æ€çš„æ¶ˆæ¯ï¼ˆå¦‚å½’æ¡£3ä¸ªæœˆå‰çš„æ¶ˆæ¯ï¼‰ï¼Œé¿å…æœ¬åœ°æ¶ˆæ¯è¡¨è¿‡å¤§ï¼Œå½±å“æŸ¥è¯¢å’Œå†™å…¥æ€§èƒ½ï¼›</p>
</li>
<li>
<p><strong>äº‹åŠ¡éš”ç¦»çº§åˆ«é€‰æ‹©</strong>ï¼šå‘èµ·æ–¹æ•°æ®åº“å»ºè®®ä½¿ç”¨â€œè¯»å·²æäº¤ï¼ˆRead Committedï¼‰â€æˆ–æ›´é«˜çš„éš”ç¦»çº§åˆ«ï¼Œé¿å…å®šæ—¶ä»»åŠ¡è¯»å–åˆ°æœªæäº¤çš„æ¶ˆæ¯ï¼ˆè„è¯»ï¼‰ï¼›</p>
</li>
<li>
<p><strong>ç›‘æ§ä¸å‘Šè­¦æœºåˆ¶</strong>ï¼šå»ºç«‹æ¶ˆæ¯çŠ¶æ€ç›‘æ§é¢æ¿ï¼Œå®æ—¶ç›‘æ§â€œå¾…æŠ•é€’â€â€œæŠ•é€’å¤±è´¥â€â€œæ­»ä¿¡æ¶ˆæ¯â€çš„æ•°é‡ï¼›å¯¹â€œæŠ•é€’å¤±è´¥â€â€œæ­»ä¿¡æ¶ˆæ¯â€è®¾ç½®å‘Šè­¦ï¼ˆå¦‚çŸ­ä¿¡ã€é‚®ä»¶å‘Šè­¦ï¼‰ï¼Œç¡®ä¿åŠæ—¶äººå·¥ä»‹å…¥å¤„ç†ã€‚</p>
</li>
</ul>
<h3 data-id="heading-15">å…­ã€æœ¬åœ°æ¶ˆæ¯è¡¨ä¸å…¶ä»–åˆ†å¸ƒå¼äº‹åŠ¡æ–¹æ¡ˆçš„é€‰å‹å¯¹æ¯”</h3>
<p>åˆ†å¸ƒå¼äº‹åŠ¡æ–¹æ¡ˆçš„é€‰å‹æ ¸å¿ƒæ˜¯â€œåœºæ™¯åŒ¹é…+æˆæœ¬æƒè¡¡â€ï¼Œæˆ‘ä»¬å°†æœ¬åœ°æ¶ˆæ¯è¡¨ä¸å…¶ä»–ä¸»æµæ–¹æ¡ˆå¯¹æ¯”ï¼Œæ˜ç¡®é€‚ç”¨è¾¹ç•Œï¼š</p>













































<table><thead><tr><th>æ–¹æ¡ˆç±»å‹</th><th>ä¸€è‡´æ€§</th><th>æ€§èƒ½</th><th>ä¸šåŠ¡ä¾µå…¥æ€§</th><th>å¼€å‘ç»´æŠ¤æˆæœ¬</th><th>é€‚é…åœºæ™¯</th></tr></thead><tbody><tr><td>2PC/3PCï¼ˆå¼ºä¸€è‡´æ€§ï¼‰</td><td>å¼ºä¸€è‡´</td><td>ä½</td><td>ä½ï¼ˆä¾èµ–èµ„æºå±‚ï¼‰</td><td>ä¸­</td><td>çŸ­äº‹åŠ¡ã€ä½å¹¶å‘ã€ä¸€è‡´æ€§è¦æ±‚æé«˜ï¼ˆå¦‚é‡‘èæ ¸å¿ƒè½¬è´¦ï¼‰</td></tr><tr><td>TCCï¼ˆæŸ”æ€§äº‹åŠ¡ï¼‰</td><td>æœ€ç»ˆä¸€è‡´</td><td>é«˜</td><td>é«˜ï¼ˆæ”¹é€ ä¸šåŠ¡æ¥å£ï¼‰</td><td>é«˜</td><td>çŸ­äº‹åŠ¡ã€é«˜å¹¶å‘ã€è·¨å¤šç§èµ„æºï¼ˆå¦‚ç”µå•†ç§’æ€ä¸‹å•ï¼‰</td></tr><tr><td>SAGAï¼ˆæŸ”æ€§äº‹åŠ¡ï¼‰</td><td>æœ€ç»ˆä¸€è‡´</td><td>ä¸­é«˜</td><td>ä¸­ï¼ˆæ–°å¢è¡¥å¿äº‹åŠ¡ï¼‰</td><td>ä¸­é«˜</td><td>é•¿äº‹åŠ¡ã€å¤æ‚æµç¨‹ï¼ˆå¦‚è®¢å•å…¨æµç¨‹ã€ç‰©æµå±¥çº¦ï¼‰</td></tr><tr><td>æœ¬åœ°æ¶ˆæ¯è¡¨+MQï¼ˆæŸ”æ€§äº‹åŠ¡ï¼‰</td><td>æœ€ç»ˆä¸€è‡´</td><td>é«˜</td><td>æä½ï¼ˆæ–°å¢æ¶ˆæ¯è¡¨ï¼‰</td><td>ä½</td><td>ç®€å•å¼‚æ­¥åœºæ™¯ã€ä¸­å°å›¢é˜Ÿã€ä½æˆæœ¬éœ€æ±‚ï¼ˆå¦‚è®¢å•â†’ç§¯åˆ†ã€æ”¯ä»˜â†’ç‰©æµï¼‰</td></tr></tbody></table>
<h3 data-id="heading-16">ä¸ƒã€æ€»ç»“ï¼šæœ¬åœ°æ¶ˆæ¯è¡¨çš„æ ¸å¿ƒä»·å€¼ä¸è½åœ°å–èˆ</h3>
<p>æœ¬åœ°æ¶ˆæ¯è¡¨æ–¹æ¡ˆçš„æ ¸å¿ƒä»·å€¼åœ¨äºâ€œä»¥æœ€ä½çš„æˆæœ¬è§£å†³ç®€å•å¼‚æ­¥åœºæ™¯çš„æœ€ç»ˆä¸€è‡´æ€§é—®é¢˜â€â€”â€”å®ƒæ”¾å¼ƒäº†å¤æ‚çš„å¼ºä¸€è‡´æ€§ä¿éšœå’Œå¤æ‚æµç¨‹é€‚é…èƒ½åŠ›ï¼Œæ¢æ¥äº†â€œä½ä¾µå…¥ã€æ˜“å®ç°ã€é«˜å¯ç”¨â€çš„ç‰¹æ€§ï¼Œå®Œç¾å¥‘åˆä¸­å°å›¢é˜Ÿå’Œç®€å•ä¸šåŠ¡çš„éœ€æ±‚ã€‚å®ƒä¸æ˜¯æœ€â€œå…ˆè¿›â€çš„åˆ†å¸ƒå¼äº‹åŠ¡æ–¹æ¡ˆï¼Œä½†å´æ˜¯æœ€â€œåŠ¡å®â€çš„æ–¹æ¡ˆä¹‹ä¸€ã€‚</p>
<p>åœ¨å®é™…è½åœ°æ—¶ï¼Œæˆ‘ä»¬éœ€æ˜ç¡®ï¼šæœ¬åœ°æ¶ˆæ¯è¡¨çš„éš¾ç‚¹ä¸åœ¨äºâ€œæµç¨‹è®¾è®¡â€ï¼Œè€Œåœ¨äºâ€œç»†èŠ‚ä¼˜åŒ–â€ï¼ˆå¦‚å¹‚ç­‰æ€§ã€é‡è¯•ç­–ç•¥ã€æ¶ˆæ¯æ¸…ç†ï¼‰ã€‚å»ºè®®æ— éœ€è¿½æ±‚å¤æ‚çš„è‡ªå®šä¹‰å®ç°ï¼Œå¯åŸºäºæˆç†Ÿçš„æ¶ˆæ¯é˜Ÿåˆ—ï¼ˆå¦‚RocketMQçš„äº‹åŠ¡æ¶ˆæ¯åŠŸèƒ½ï¼Œæœ¬è´¨æ˜¯æœ¬åœ°æ¶ˆæ¯è¡¨çš„å°è£…ï¼‰å¿«é€Ÿè½åœ°ï¼Œå‡å°‘é‡å¤å¼€å‘ã€‚</p>
<p>æœ€åï¼Œå›å½’åˆ†å¸ƒå¼äº‹åŠ¡çš„æ ¸å¿ƒåŸåˆ™ï¼š<strong>æ²¡æœ‰æœ€ä¼˜æ–¹æ¡ˆï¼Œåªæœ‰æœ€é€‚é…ä¸šåŠ¡çš„æ–¹æ¡ˆ</strong>ã€‚è‹¥ä½ çš„ä¸šåŠ¡æ˜¯ç®€å•å¼‚æ­¥è·¨æœåŠ¡é€šçŸ¥ï¼Œä¸”å›¢é˜Ÿè¿½æ±‚ä½æˆæœ¬ã€ä½ä¾µå…¥ï¼Œæœ¬åœ°æ¶ˆæ¯è¡¨æ–¹æ¡ˆæ˜¯é¦–é€‰ï¼›è‹¥éœ€è¦å¤„ç†é«˜å¹¶å‘çŸ­äº‹åŠ¡ï¼Œé€‰æ‹©TCCï¼›è‹¥éœ€è¦å¤„ç†é•¿äº‹åŠ¡å¤æ‚æµç¨‹ï¼Œé€‰æ‹©SAGAï¼›è‹¥ä¸€è‡´æ€§è¦æ±‚æé«˜ï¼Œå¼ºä¸€è‡´æ€§æ–¹æ¡ˆä»æ˜¯åº•çº¿ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Node.js ä¸ Haskell æ··åˆç½‘ç»œç¼–ç¨‹è¸©å‘è®°ï¼šTCP ç²˜åŒ…ä¸çŠ¶æ€ä¸ä¸€è‡´å¼•å‘çš„â€œæ­»é”â€]]></title>    <link>https://juejin.cn/post/7588034035286736911</link>    <guid>https://juejin.cn/post/7588034035286736911</guid>    <pubDate>2025-12-27T03:41:46.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588034035286736911" data-draft-id="7588004376867209251" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Node.js ä¸ Haskell æ··åˆç½‘ç»œç¼–ç¨‹è¸©å‘è®°ï¼šTCP ç²˜åŒ…ä¸çŠ¶æ€ä¸ä¸€è‡´å¼•å‘çš„â€œæ­»é”â€"/> <meta itemprop="keywords" content="JavaScript,Node.js"/> <meta itemprop="datePublished" content="2025-12-27T03:41:46.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Lupino"/> <meta itemprop="url" content="https://juejin.cn/user/3051900006579256"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Node.js ä¸ Haskell æ··åˆç½‘ç»œç¼–ç¨‹è¸©å‘è®°ï¼šTCP ç²˜åŒ…ä¸çŠ¶æ€ä¸ä¸€è‡´å¼•å‘çš„â€œæ­»é”â€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3051900006579256/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Lupino
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-27T03:41:46.000Z" title="Sat Dec 27 2025 03:41:46 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">1. èƒŒæ™¯ä¸ç›®æ ‡</h2>
<p>æˆ‘ä»¬éœ€è¦åœ¨ Node.js ä¸­å®ç°ä¸€ä¸ªå®šåˆ¶åŒ–çš„ TCP å®¢æˆ·ç«¯ (<code>RSATransport</code>)ï¼Œç”¨äºè¿æ¥ç°æœ‰çš„ Haskell æœåŠ¡ç«¯ã€‚è¯¥åè®®åŒ…å«è‡ªå®šä¹‰çš„æ¡æ‰‹æµç¨‹å’Œä¸‰ç§æ•°æ®ä¼ è¾“æ¨¡å¼ï¼š</p>
<ul>
<li><strong>Plain (0)</strong> : æ¡æ‰‹åæ˜æ–‡ç›´è¿ã€‚</li>
<li><strong>RSA (1)</strong> : å…¨ç¨‹ä½¿ç”¨ RSA-OAEP åŠ å¯†ã€‚</li>
<li><strong>AES (2)</strong> : æ¡æ‰‹åå•†å‡º Session Key åä½¿ç”¨ AES-CTR åŠ å¯†ã€‚</li>
</ul>
<p><strong>Haskell æœåŠ¡ç«¯é€»è¾‘ (<code>RSA.hs</code>)</strong> ï¼š æœåŠ¡ç«¯åœ¨æ¡æ‰‹æ—¶ä½¿ç”¨å¸¦ç¼“å†²çš„è¯»å–æ–¹å¼ (<code>recvDataOaep</code>)ï¼Œä½†åœ¨åˆ‡æ¢åˆ° <strong>Plain</strong> æ¨¡å¼åï¼Œç›´æ¥æ“ä½œåº•å±‚ Socket (<code>recvData tp</code>)ã€‚</p>
<h2 data-id="heading-1">2. é—®é¢˜ç°è±¡</h2>
<p>å¼€å‘è¿‡ç¨‹ä¸­å‡ºç°äº†ä¸€ä¸ªå¥‡æ€ªçš„ç°è±¡ï¼š</p>
<ol>
<li><strong>AES æ¨¡å¼æ­£å¸¸</strong>ï¼šæ¡æ‰‹ã€å¯†é’¥äº¤æ¢ã€æ•°æ®ä¼ è¾“å‡æµç•…ã€‚</li>
<li><strong>RSA æ¨¡å¼æ­£å¸¸</strong>ã€‚</li>
<li><strong>Plain æ¨¡å¼â€œå¡æ­»â€</strong> ï¼šæ¡æ‰‹çœ‹ä¼¼å®Œæˆï¼Œä½†éšåå‘é€çš„ç¬¬ä¸€æ¡æ•°æ®æœåŠ¡ç«¯æ— å“åº”ï¼Œå®¢æˆ·ç«¯ä¹Ÿæ”¶ä¸åˆ°å›åŒ…ã€‚</li>
<li><strong>â€œè–›å®šè°”çš„ Bugâ€</strong> ï¼šå¦‚æœåœ¨ä»£ç ä¸­åŠ å…¥ <code>console.log</code>ï¼Œæœ‰æ—¶èƒ½è·‘é€šä¸€ç‚¹ç‚¹ï¼Œä½†éšåä¾ç„¶å¡ä½ã€‚</li>
</ol>
<h2 data-id="heading-2">3. æ ¹å› æ·±åº¦åˆ†æ</h2>
<p>ç»è¿‡æ’æŸ¥ï¼Œè¿™æ˜¯ä¸€ä¸ªå…¸å‹çš„ <strong>TCP ç²˜åŒ…</strong> é‡ä¸Š <strong>åº”ç”¨å±‚çŠ¶æ€ç¼“å†²åŒºè®¾è®¡ç¼ºé™·</strong> å¯¼è‡´çš„é€»è¾‘æ­»é”ã€‚</p>
<h3 data-id="heading-3">3.1 Haskell æœåŠ¡ç«¯çš„â€œç¼“å†²åŒºæ—è·¯â€ Bug</h3>
<p>åœ¨ <code>RSA.hs</code> ä¸­ï¼Œæ¥æ”¶é€»è¾‘æ˜¯è¿™æ ·çš„ï¼š</p>
<p>Haskell</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- Haskell ä¼ªä»£ç </span>
recvData RSATP {..} n <span class="hljs-operator">=</span> <span class="hljs-keyword">case</span> rsaMode <span class="hljs-keyword">of</span>
  Plain <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span> recvData tp n           <span class="hljs-comment">-- [å…³é”®ç‚¹] ç›´æ¥è¯»åº•å±‚ Socketï¼Œå¿½ç•¥ç¼“å†²åŒº</span>
  RSA   <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span> recvDataOaep readBuffer ... <span class="hljs-comment">-- ä»ç¼“å†²åŒº readBuffer è¯»å–</span>
  AES   <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span> recvDataAes readBuffer ...  <span class="hljs-comment">-- ä»ç¼“å†²åŒº readBuffer è¯»å–</span>
</code></pre>
<p>åœ¨æ¡æ‰‹é˜¶æ®µï¼ˆåå•† Modeï¼‰ï¼ŒæœåŠ¡ç«¯è°ƒç”¨çš„æ˜¯ <code>recvDataOaep</code>ã€‚è¿™ä¸ªå‡½æ•°ä¸ºäº†è§£å¯†ï¼Œå¯èƒ½ä¼šä» TCP Socket é¢„è¯»å–å¤šäºæ‰€éœ€çš„å­—èŠ‚ï¼ˆä¾‹å¦‚è¯»å–äº† 4096 å­—èŠ‚ï¼Œä½† Mode åŒ…åªæœ‰ 256 å­—èŠ‚ï¼‰ã€‚<strong>å¤šä½™çš„æ•°æ®è¢«ç•™åœ¨äº† Haskell çš„ <code>readBuffer</code> (TVar) ä¸­ã€‚</strong></p>
<h3 data-id="heading-4">3.2 Node.js çš„â€œè¿‡äºé«˜æ•ˆâ€</h3>
<p>åœ¨ Node.js å®¢æˆ·ç«¯ï¼Œå½“æ¡æ‰‹å®Œæˆï¼ˆå‘é€äº† Mode Byteï¼‰åï¼Œæˆ‘ä»¬ç«‹å³æ¸…ç©ºäº†ç§¯å‹çš„å†™å…¥é˜Ÿåˆ— (<code>_writeBuffer</code>) å¹¶å‘é€ä¸šåŠ¡æ•°æ®ã€‚</p>
<p>ç”±äº TCP çš„ <strong>Nagle ç®—æ³•</strong> å’Œæ“ä½œç³»ç»Ÿçš„ç¼“å†²æœºåˆ¶ï¼Œå‘é€çš„ <strong>[Mode åŒ…]</strong> å’Œåç»­çš„ <strong>[ä¸šåŠ¡æ•°æ®åŒ…]</strong> æå¤§æ¦‚ç‡è¢«åˆå¹¶æˆäº†ä¸€ä¸ª TCP æ®µå‘é€åˆ°äº†æœåŠ¡ç«¯ã€‚</p>
<h3 data-id="heading-5">3.3 è‡´å‘½çš„â€œæ“¦è‚©è€Œè¿‡â€</h3>
<p>äºæ˜¯å‘ç”Ÿäº†ä»¥ä¸‹æ—¶åºï¼š</p>
<ol>
<li><strong>Client</strong>: å‘é€ <code>[Mode=Plain][Data="Hello"]</code>ï¼ˆåœ¨åŒä¸€ä¸ª TCP åŒ…ä¸­ï¼‰ã€‚</li>
<li><strong>Server</strong>: è°ƒç”¨ <code>recvDataOaep</code> è¯»å– Modeã€‚å®ƒæŠŠæ•´ä¸ª TCP åŒ…è¯»å…¥å†…å­˜ï¼Œè§£æå‡º <code>Mode=Plain</code>ï¼Œå‰©ä¸‹çš„ <code>Data="Hello"</code> ç•™åœ¨äº† <code>readBuffer</code> ä¸­ã€‚</li>
<li><strong>Server</strong>: åˆ‡æ¢çŠ¶æ€åˆ° <code>Plain</code>ã€‚</li>
<li><strong>Server</strong>: è°ƒç”¨ <code>recvData tp</code> ç­‰å¾…æ–°æ•°æ®ã€‚<strong>æ³¨æ„ï¼šå®ƒè·³è¿‡äº† <code>readBuffer</code>ï¼Œç›´æ¥å»é—®åº•å±‚ Socket è¦æ•°æ®ï¼</strong></li>
<li><strong>Result</strong>: Socket ç¼“å†²åŒºæ˜¯ç©ºçš„ï¼ˆæ•°æ®å·²ç»è¢«è¯»åˆ°åº”ç”¨å±‚ç¼“å†²åŒºäº†ï¼‰ï¼ŒæœåŠ¡ç«¯æŒ‚èµ·ç­‰å¾…ã€‚å®¢æˆ·ç«¯ä»¥ä¸ºæœåŠ¡ç«¯æ”¶åˆ°äº†ï¼Œä¹Ÿåœ¨ç­‰å¾…å“åº”ã€‚<strong>æ­»é”å½¢æˆã€‚</strong></li>
</ol>
<h2 data-id="heading-6">4. è§£å†³æ–¹æ¡ˆ</h2>
<p>è¦è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå¿…é¡»åœ¨å®¢æˆ·ç«¯æ‰“ç ´â€œç²˜åŒ…â€ï¼Œç¡®ä¿æœåŠ¡ç«¯åœ¨å¤„ç†å®Œ Mode åˆ‡æ¢åï¼ŒSocket ç¼“å†²åŒºé‡Œæ‰æœ‰æ–°æ•°æ®åˆ°è¾¾ã€‚</p>
<h3 data-id="heading-7">4.1 ç¦ç”¨ Nagle ç®—æ³•</h3>
<p>é¦–å…ˆï¼Œç¦æ­¢ TCP å»¶è¿Ÿå‘é€ï¼Œç¡®ä¿å°åŒ…ï¼ˆå¦‚æ¡æ‰‹åŒ…ï¼‰èƒ½å°½å¿«å‘å‡ºå»ã€‚</p>
<p>JavaScript</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">this</span>._socket = net.connect(options);
<span class="hljs-keyword">this</span>._socket.setNoDelay(<span class="hljs-literal">true</span>); <span class="hljs-comment">// ç¦ç”¨ Nagle</span>
</code></pre>
<h3 data-id="heading-8">4.2 ä¸¥æ ¼çš„å†™æ“ä½œæµæ§</h3>
<p>ä¸èƒ½ä¾èµ– Node.js çš„è‡ªåŠ¨ç¼“å†²ï¼Œå¿…é¡»ç¡®ä¿ä¸Šä¸€ä¸ªåŒ…çœŸæ­£å†™å…¥å†…æ ¸ï¼ˆdrainï¼‰åï¼Œå†å‘ä¸‹ä¸€ä¸ªåŒ…ã€‚</p>
<p>JavaScript</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä½¿ç”¨å›è°ƒé“¾ç¡®ä¿é¡ºåº</span>
<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">_sendOAEP</span>(modePayload, <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// Mode åŒ…å†™å…¥å®Œæˆåçš„å›è°ƒ</span>
    self.<span class="hljs-title function_">_finishHandshake</span>();
});
</code></pre>
<h3 data-id="heading-9">4.3 é’ˆå¯¹ Plain æ¨¡å¼çš„â€œé­”æ³•å»¶æ—¶â€</h3>
<p>è¿™æ˜¯æœ€å…³é”®çš„ä¸€æ­¥ã€‚ç”±äºæˆ‘ä»¬æ— æ³•ä¿®æ”¹ Haskell æœåŠ¡ç«¯ä»£ç ï¼Œå¿…é¡»åœ¨å®¢æˆ·ç«¯è¿›è¡Œè§„é¿ã€‚åœ¨å‘é€ Mode åŒ…å’Œå‘é€ç¬¬ä¸€æ¡ Plain æ•°æ®ä¹‹é—´ï¼Œå¼ºåˆ¶æ’å…¥ä¸€ä¸ªå¾®å°çš„å»¶æ—¶ï¼ˆ50msï¼‰ã€‚</p>
<p>è¿™ç»™äº†æœåŠ¡ç«¯è¶³å¤Ÿçš„æ—¶é—´ï¼š</p>
<ol>
<li>å¤„ç† Mode åŒ…ã€‚</li>
<li>æ¸…ç©ºå…¶å†…éƒ¨æ¥æ”¶é€»è¾‘ã€‚</li>
<li>åˆ‡æ¢åˆ° Socket ç›´æ¥è¯»å–æ¨¡å¼ã€‚</li>
</ol>
<p>JavaScript</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title class_">RSATransport</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">_finishHandshake</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">_state</span> = <span class="hljs-string">'ESTABLISHED'</span>;
  <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">emit</span>(<span class="hljs-string">'connect'</span>);

  <span class="hljs-comment">// åˆ·æ–°ç§¯å‹çš„æ•°æ®</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">_writeBuffer</span>.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span>) {
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">flush</span> = (<span class="hljs-params"/>) =&gt; {
      <span class="hljs-comment">// ... å‘é€ç§¯å‹æ•°æ® ...</span>
    };

    <span class="hljs-comment">// é’ˆå¯¹ Plain æ¨¡å¼çš„ Hackï¼š</span>
    <span class="hljs-comment">// å¼ºåˆ¶å»¶æ—¶ï¼Œé˜²æ­¢ Mode åŒ…å’Œåç»­æ•°æ®ç²˜åŒ…ï¼Œ</span>
    <span class="hljs-comment">// é¿å…æœåŠ¡ç«¯è¯»å– Mode æ—¶è¯¯è¯»äº†åç»­æ•°æ®åˆ° Buffer ä¸­å´åœ¨ Plain æ¨¡å¼ä¸‹æ— æ³•è®¿é—®ã€‚</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">_mode</span> === <span class="hljs-variable constant_">MODE_PLAIN</span>) {
      <span class="hljs-built_in">setTimeout</span>(flush, <span class="hljs-number">50</span>); 
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-title function_">flush</span>();
    }
  }
};
</code></pre>
<h3 data-id="heading-10">4.4 å®Œå–„èƒŒå‹ (Backpressure) å¤„ç†</h3>
<p>é™¤äº†ä¸Šè¿°æ ¸å¿ƒ Bugï¼Œæˆ‘ä»¬è¿˜ä¿®å¤äº† <code>write</code> æ–¹æ³•çš„è¿”å›å€¼é—®é¢˜ã€‚å½“å¤„äº Plain æ¨¡å¼ï¼ˆé«˜ååï¼‰æ—¶ï¼Œå¿…é¡»æ­£ç¡®å¤„ç† TCP çš„èƒŒå‹ï¼Œå¦åˆ™ä¼šå¯¼è‡´å†…å­˜é£™å‡æˆ–æ•°æ®ä¸¢å¤±ã€‚</p>
<p>JavaScript</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// è½¬å‘åº•å±‚çš„ drain äº‹ä»¶</span>
<span class="hljs-keyword">this</span>._socket.on(<span class="hljs-string">'drain'</span>, () =&gt; <span class="hljs-keyword">this</span>.emit(<span class="hljs-string">'drain'</span>));

<span class="hljs-comment">// æ­£ç¡®è¿”å› boolean</span>
Transport.prototype.write = function(<span class="hljs-keyword">data</span>, encoding, callback) {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._socket.write(<span class="hljs-keyword">data</span>, encoding, callback); 
};
</code></pre>
<h2 data-id="heading-11">5. æ€»ç»“</h2>
<p>è¿™æ¬¡æ’æŸ¥å†æ¬¡éªŒè¯äº†ç½‘ç»œç¼–ç¨‹ä¸­çš„ä¸€æ¡é“å¾‹ï¼š<strong>TCP æ˜¯æµåè®®ï¼Œä¸æ˜¯åŒ…åè®®</strong>ã€‚</p>
<p>å½“å®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯ç”±ä¸åŒè¯­è¨€ç¼–å†™ï¼Œä¸”æœåŠ¡ç«¯å­˜åœ¨æ··åˆè¯»å–ç­–ç•¥ï¼ˆBufferè¯»å– vs Socketç›´è¯»ï¼‰æ—¶ï¼Œåº”ç”¨å±‚å¿…é¡»æå…¶å°å¿ƒåœ°å¤„ç†æ•°æ®è¾¹ç•Œã€‚</p>
<ul>
<li><strong>æ•™è®­ 1</strong>: ä¸è¦å‡è®¾ <code>write</code> ä¸¤æ¬¡å°±ä¼šäº§ç”Ÿä¸¤ä¸ª TCP åŒ…ã€‚</li>
<li><strong>æ•™è®­ 2</strong>: åœ¨å¤„ç†åè®®çŠ¶æ€åˆ‡æ¢ï¼ˆå¦‚æ¡æ‰‹ -&gt; ä¼ è¾“ï¼‰æ—¶ï¼ŒçŠ¶æ€æœºçš„åŒæ­¥è‡³å…³é‡è¦ã€‚</li>
<li><strong>æ•™è®­ 3</strong>: é‡åˆ°â€œå¡æ­»â€ä¸”æ—¥å¿—å½±å“è¡Œä¸ºæ—¶ï¼Œä¼˜å…ˆæ€€ç–‘ç¼“å†²æœºåˆ¶å’Œç«æ€æ¡ä»¶ã€‚</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[JavaScript æœ‰å“ªäº›æ•°æ®ç±»å‹ï¼Ÿå®ƒä»¬åœ¨å†…å­˜é‡Œæ˜¯æ€ä¹ˆå­˜çš„ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7588007285547073542</link>    <guid>https://juejin.cn/post/7588007285547073542</guid>    <pubDate>2025-12-27T01:45:29.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588007285547073542" data-draft-id="7579127397498060851" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="JavaScript æœ‰å“ªäº›æ•°æ®ç±»å‹ï¼Ÿå®ƒä»¬åœ¨å†…å­˜é‡Œæ˜¯æ€ä¹ˆå­˜çš„ï¼Ÿ"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript"/> <meta itemprop="datePublished" content="2025-12-27T01:45:29.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="åˆ˜å¤§å"/> <meta itemprop="url" content="https://juejin.cn/user/3507878440995946"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            JavaScript æœ‰å“ªäº›æ•°æ®ç±»å‹ï¼Ÿå®ƒä»¬åœ¨å†…å­˜é‡Œæ˜¯æ€ä¹ˆå­˜çš„ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3507878440995946/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    åˆ˜å¤§å
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-27T01:45:29.000Z" title="Sat Dec 27 2025 01:45:29 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æœ‰æ—¶å€™å¯¹ <code>JavaScript</code> çš„ä»£ç å¾ˆæ˜¯ç–‘æƒ‘ï¼Œæˆ‘å†™è¿‡è¿™æ ·ä¸€æ®µä»£ç ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">let</span> user1 = { <span class="hljs-attr">name</span>: <span class="hljs-string">'å°æ˜'</span> };
<span class="hljs-keyword">let</span> user2 = user1;
user2.<span class="hljs-property">name</span> = <span class="hljs-string">'å°çº¢'</span>;
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(user1.<span class="hljs-property">name</span>); <span class="hljs-comment">// ç»“æœå±…ç„¶æ˜¯ â€œå°çº¢â€ï¼Ÿ</span>
</code></pre>
<p>æˆ‘å½“æ—¶æ„£ä½äº†ï¼šæˆ‘åªæ˜¯æ”¹äº† <code>user2</code>ï¼Œä¸ºä»€ä¹ˆ <code>user1</code> ä¹Ÿè·Ÿç€å˜äº†ï¼Ÿ<br/>
è€Œæ¢æˆæ•°å­—æ—¶ï¼Œå´å®Œå…¨ä¸æ˜¯è¿™æ ·ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">let</span> a = <span class="hljs-number">10</span>;
<span class="hljs-keyword">let</span> b = a;
b = <span class="hljs-number">20</span>;
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(a); <span class="hljs-comment">// è¿˜æ˜¯ 10ï¼Œæ²¡å˜</span>
</code></pre>
<p>æ˜æ˜éƒ½æ˜¯èµ‹å€¼ï¼Œè¡Œä¸ºæ€ä¹ˆå·®è¿™ä¹ˆå¤šï¼Ÿ</p>
<p>åæ¥æˆ‘æ‰æ˜ç™½ï¼Œé—®é¢˜çš„å…³é”®å¹¶ä¸æ˜¯ä»£ç çš„å†™æ³•é—®é¢˜ï¼Œè€Œæ˜¯åœ¨ <strong>JavaScript çš„æ•°æ®ç±»å‹å’Œå®ƒä»¬åœ¨å†…å­˜ä¸­çš„å­˜å‚¨æ–¹å¼</strong>ã€‚</p>
<p>ææ‡‚è¿™ä¸€ç‚¹ï¼Œå¾ˆå¤šçœ‹ä¼¼å¥‡æ€ªçš„è¡Œä¸ºå°±éƒ½é¡ºç†æˆç« äº†ã€‚</p>
<hr/>
<h2 data-id="heading-0">ä¸€ã€JavaScript æœ‰å‡ ç§æ•°æ®ç±»å‹ï¼Ÿ</h2>
<p>æ ¹æ® ECMAScript æ ‡å‡†ï¼ŒJavaScript çš„æ•°æ®ç±»å‹åˆ†ä¸ºä¸¤å¤§ç±»ï¼š</p>
<h3 data-id="heading-1">1. åŸå§‹ç±»å‹â€”â€”å…± 7 ç§</h3>
<p>è¿™äº›ç±»å‹çš„ç‰¹ç‚¹æ˜¯ï¼š<strong>å€¼ä¸å¯å˜ã€ç›´æ¥è¡¨ç¤ºæ•°æ®æœ¬èº«</strong>ã€‚</p>













































<table><thead><tr><th>ç±»å‹</th><th>ç¤ºä¾‹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>number</code></td><td><code>42</code>, <code>3.14</code>, <code>NaN</code></td><td>æ‰€æœ‰æ•°å­—ï¼ŒåŒ…æ‹¬æ•´æ•°ã€æµ®ç‚¹æ•°ã€ç‰¹æ®Šå€¼</td></tr><tr><td><code>string</code></td><td><code>'hello'</code>, <code>"JS"</code></td><td>å­—ç¬¦ä¸²ï¼Œä¸å¯å˜</td></tr><tr><td><code>boolean</code></td><td><code>true</code>, <code>false</code></td><td>å¸ƒå°”å€¼</td></tr><tr><td><code>undefined</code></td><td><code>let a; console.log(a);</code></td><td>å˜é‡å·²å£°æ˜ä½†æœªèµ‹å€¼</td></tr><tr><td><code>null</code></td><td><code>let b = null;</code></td><td>è¡¨ç¤ºç©ºæˆ–æ— å€¼ï¼ˆæ³¨æ„ï¼šå®ƒæ˜¯åŸå§‹ç±»å‹ï¼ï¼‰</td></tr><tr><td><code>symbol</code></td><td><code>Symbol('id')</code></td><td>ES6 å¼•å…¥ï¼Œå”¯ä¸€ä¸”ä¸å¯å˜çš„æ ‡è¯†ç¬¦</td></tr><tr><td><code>bigint</code></td><td><code>123n</code>, <code>9007199254740991n</code></td><td>ES2020 å¼•å…¥ï¼Œç”¨äºè¡¨ç¤ºä»»æ„å¤§çš„æ•´æ•°</td></tr></tbody></table>
<p><code>typeof null</code> è¿”å› <code>"object"</code> æ˜¯ JavaScript çš„ä¸€ä¸ªå†å²æ€§ bugï¼Œè‡³ä»Šæœªä¿®å¤ã€‚ä½†ä»è¯­è¨€è®¾è®¡ä¸Šï¼Œ<code>null</code> å±äºåŸå§‹ç±»å‹ã€‚</p>
<hr/>
<h3 data-id="heading-2">2. å¼•ç”¨ç±»å‹â€”â€”ç»Ÿç§°å¯¹è±¡</h3>
<p>é™¤äº†ä¸Šè¿° 7 ç§ï¼Œ<strong>å…¶ä»–æ‰€æœ‰å€¼éƒ½æ˜¯å¯¹è±¡</strong>ï¼Œå±äºå¼•ç”¨ç±»å‹ï¼ŒåŒ…æ‹¬ï¼š</p>
<ul>
<li>æ™®é€šå¯¹è±¡ï¼š<code>{ name: 'Tom' }</code></li>
<li>æ•°ç»„ï¼š<code>[1, 2, 3]</code></li>
<li>å‡½æ•°ï¼š<code>function() {}</code></li>
<li>æ—¥æœŸï¼š<code>new Date()</code></li>
<li>æ­£åˆ™ï¼š<code>/abc/</code></li>
<li>ç”šè‡³ <code>Map</code>ã€<code>Set</code>ã€<code>Promise</code> ç­‰</li>
</ul>
<p>å¼•ç”¨ç±»å‹çš„æ ¸å¿ƒç‰¹ç‚¹æ˜¯ï¼š<strong>å¯å˜ã€é€šè¿‡å¼•ç”¨æ¥è®¿é—®å®é™…æ•°æ®</strong>ã€‚</p>
<hr/>
<h2 data-id="heading-3">äºŒã€å®ƒä»¬åœ¨å†…å­˜ä¸­æ€ä¹ˆå­˜å‚¨ï¼Ÿ</h2>
<p>è¿™æ˜¯ç†è§£ä¸€åˆ‡è¡Œä¸ºå·®å¼‚çš„æ ¹æºï¼</p>
<p>è®¡ç®—æœºå†…å­˜å¤§è‡´åˆ†ä¸ºä¸¤ä¸ªåŒºåŸŸï¼š</p>
<ul>
<li><strong>æ ˆï¼ˆStackï¼‰</strong>ï¼šé€Ÿåº¦å¿«ï¼Œç©ºé—´å°ï¼Œç”¨äºå­˜å‚¨ç®€å•ã€å›ºå®šå¤§å°çš„æ•°æ®ã€‚</li>
<li><strong>å †ï¼ˆHeapï¼‰</strong>ï¼šç©ºé—´å¤§ï¼Œé€Ÿåº¦ç¨æ…¢ï¼Œç”¨äºå­˜å‚¨å¤æ‚ã€åŠ¨æ€å¤§å°çš„æ•°æ®ã€‚</li>
</ul>
<h3 data-id="heading-4">åŸå§‹ç±»å‹ï¼šç›´æ¥å­˜åœ¨æ ˆé‡Œ</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">let</span> age = <span class="hljs-number">25</span>;
<span class="hljs-keyword">let</span> isStudent = <span class="hljs-literal">true</span>;
</code></pre>
<p>è¿™ä¸¤ä¸ªå˜é‡å°±åƒä¸¤ä¸ªå°æŠ½å±‰ï¼Œ<strong>å€¼æœ¬èº«ç›´æ¥æ”¾åœ¨æ ˆä¸­</strong>ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-string">æ ˆï¼ˆStackï¼‰</span>
<span class="hljs-string">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="hljs-string">â”‚</span> <span class="hljs-attr">age:</span> <span class="hljs-number">25</span>         <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span> <span class="hljs-attr">isStudent:</span> <span class="hljs-literal">true</span> <span class="hljs-string">â”‚</span>
<span class="hljs-string">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
</code></pre>
<p>å½“ä½ å¤åˆ¶ä¸€ä¸ªåŸå§‹å€¼ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">let</span> myAge = age; <span class="hljs-comment">// æŠŠ 25 å¤åˆ¶ä¸€ä»½</span>
myAge = <span class="hljs-number">30</span>;
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(age); <span class="hljs-comment">// ä»ç„¶æ˜¯ 25</span>
</code></pre>
<p>å› ä¸º <code>myAge</code> æ‹¿åˆ°çš„æ˜¯ <strong>å…¨æ–°çš„å‰¯æœ¬</strong>ï¼Œå’Œ <code>age</code> å®Œå…¨æ— å…³ã€‚</p>
<p>æ‰€ä»¥åŸå§‹ç±»å‹æ˜¯æŒ‰å€¼è¿›è¡Œä¼ é€’ï¼ˆPass by Valueï¼‰ã€‚</p>
<hr/>
<h3 data-id="heading-5">å¼•ç”¨ç±»å‹ï¼šæ ˆå­˜åœ°å€ï¼Œå †å­˜çœŸå®å¯¹è±¡</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">let</span> user = { <span class="hljs-attr">name</span>: <span class="hljs-string">'Alice'</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">25</span> };
</code></pre>
<p>è¿™æ—¶å‘ç”Ÿäº†ä¸¤ä»¶äº‹ï¼š</p>
<ol>
<li>å¯¹è±¡ <code>{ name: 'Alice', age: 25 }</code> è¢«åˆ›å»ºï¼Œå­˜æ”¾åœ¨å †ä¸­ã€‚</li>
<li>å˜é‡ <code>user</code> å¹¶ä¸ç›´æ¥åŒ…å«è¿™ä¸ªå¯¹è±¡ï¼Œè€Œæ˜¯ä¿å­˜ä¸€ä¸ªæŒ‡å‘å †ä¸­å¯¹è±¡çš„å¼•ç”¨åœ°å€ï¼Œè¿™ä¸ªåœ°å€æ”¾åœ¨æ ˆé‡Œã€‚</li>
</ol>
<p>å›¾ç¤ºå¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-css" lang="css">æ ˆï¼ˆStackï¼‰              å †ï¼ˆHeapï¼‰
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ user: [åœ°å€A] â”œâ”€â”€â”€â”€â”€â†’â”‚ { name: <span class="hljs-string">'Alice'</span>, age: <span class="hljs-number">25</span> } â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<p>å½“ä½ èµ‹å€¼ç»™å¦ä¸€ä¸ªå˜é‡ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">let</span> admin = user; <span class="hljs-comment">// å¤åˆ¶çš„æ˜¯åœ°å€ï¼Œä¸æ˜¯å¯¹è±¡ï¼</span>
admin.<span class="hljs-property">name</span> = <span class="hljs-string">'Bob'</span>;
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(user.<span class="hljs-property">name</span>); <span class="hljs-comment">// è¾“å‡º "Bob"ï¼</span>
</code></pre>
<p>å› ä¸º <code>admin</code> å’Œ <code>user</code> <strong>æŒ‡å‘åŒä¸€ä¸ªå †ä¸­çš„å¯¹è±¡</strong>ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-string">æ ˆï¼ˆStackï¼‰</span>              <span class="hljs-string">å †ï¼ˆHeapï¼‰</span>
<span class="hljs-string">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>      
<span class="hljs-string">â”‚</span> <span class="hljs-attr">user:</span> [<span class="hljs-string">åœ°å€A</span>] <span class="hljs-string">â”œâ”€â”€â”</span>   
<span class="hljs-string">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span>  <span class="hljs-string">â”‚</span>   <span class="hljs-string">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="hljs-string">â”‚</span> <span class="hljs-attr">admin:</span> [<span class="hljs-string">åœ°å€A</span>] <span class="hljs-string">â”œâ”€â”€â”¼â”€â”€â†’â”‚</span> { <span class="hljs-attr">name:</span> <span class="hljs-string">'Bob'</span>, <span class="hljs-attr">age:</span> <span class="hljs-number">25</span> }  <span class="hljs-string">â”‚</span>
<span class="hljs-string">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>  <span class="hljs-string">â”‚</span>   <span class="hljs-string">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
                  <span class="hljs-string">â”‚</span>
                  <span class="hljs-string">â””â”€â”€â”€â”˜</span>
</code></pre>
<p>æ‰€ä»¥å¼•ç”¨ç±»å‹æ˜¯æŒ‰å…±äº«çš„æ–¹å¼è¿›è¡Œä¼ é€’ï¼ˆPass by Sharingï¼‰</p>
<p>æ³¨æ„ï¼šä¸æ˜¯æŒ‰å¼•ç”¨ä¼ é€’ï¼ŒJS ä¸­æ²¡æœ‰çœŸæ­£çš„æŒ‰å¼•ç”¨ä¼ é€’</p>
<hr/>
<h2 data-id="heading-6">ä¸‰ã€æ·±å…¥å¯¹æ¯”</h2>








































<table><thead><tr><th>ç‰¹æ€§</th><th>åŸå§‹ç±»å‹</th><th>å¼•ç”¨ç±»å‹ï¼ˆå¯¹è±¡ï¼‰</th></tr></thead><tbody><tr><td>å­˜å‚¨ä½ç½®</td><td>æ ˆï¼ˆStackï¼‰</td><td>æ ˆï¼ˆå­˜å¼•ç”¨åœ°å€ï¼‰ + å †ï¼ˆå­˜å®é™…å¯¹è±¡ï¼‰</td></tr><tr><td>èµ‹å€¼è¡Œä¸º</td><td>å¤åˆ¶å€¼æœ¬èº«</td><td>å¤åˆ¶å¼•ç”¨åœ°å€ï¼ˆå¤šä¸ªå˜é‡å…±äº«åŒä¸€å¯¹è±¡ï¼‰</td></tr><tr><td>æ˜¯å¦å¯å˜</td><td>ä¸å¯å˜ï¼ˆæ“ä½œç”Ÿæˆæ–°å€¼ï¼‰</td><td>å¯å˜ï¼ˆå¯ç›´æ¥ä¿®æ”¹å±æ€§ï¼‰</td></tr><tr><td>æ¯”è¾ƒæ–¹å¼</td><td>æ¯”è¾ƒå€¼æ˜¯å¦ç›¸ç­‰</td><td>æ¯”è¾ƒå¼•ç”¨åœ°å€æ˜¯å¦ç›¸åŒ</td></tr><tr><td>å†…å­˜å ç”¨</td><td>å›ºå®šã€è¾ƒå°</td><td>åŠ¨æ€ã€å¯èƒ½å¾ˆå¤§</td></tr><tr><td>å…¸å‹åœºæ™¯</td><td>æ•°å­—ã€å­—ç¬¦ä¸²ã€å¸ƒå°”å€¼</td><td>å¯¹è±¡ã€æ•°ç»„ã€å‡½æ•°</td></tr></tbody></table>
<h3 data-id="heading-7">ä¸¾ä¸ªæ¯”è¾ƒçš„ä¾‹å­ï¼š</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åŸå§‹ç±»å‹æ¯”è¾ƒ</span>
<span class="hljs-number">5</span> === <span class="hljs-number">5</span>; <span class="hljs-comment">// true</span>
<span class="hljs-string">'hi'</span> === <span class="hljs-string">'hi'</span>; <span class="hljs-comment">// true</span>

<span class="hljs-comment">// å¼•ç”¨ç±»å‹æ¯”è¾ƒ</span>
{} === {}; <span class="hljs-comment">// falseï¼ä¸¤ä¸ªä¸åŒå¯¹è±¡</span>
<span class="hljs-keyword">let</span> a = {}; <span class="hljs-keyword">let</span> b = a;
a === b; <span class="hljs-comment">// trueï¼åŒä¸€ä¸ªå¯¹è±¡</span>
</code></pre>
<hr/>
<h2 data-id="heading-8">å››ã€å¸¸è§é—®é¢˜</h2>
<h3 data-id="heading-9">ä¸ºä»€ä¹ˆå­—ç¬¦ä¸²å¾ˆé•¿ï¼Œä¹Ÿç®—åŸå§‹ç±»å‹ï¼Ÿ</h3>
<p>è™½ç„¶å­—ç¬¦ä¸²å¯èƒ½å¾ˆé•¿ï¼Œä½† JS å¼•æ“ä¼šåšå†…éƒ¨ä¼˜åŒ–ï¼ˆæ¯”å¦‚ä½¿ç”¨æŒ‡é’ˆï¼‰ï¼Œä½†ä»<strong>è¯­è¨€è¯­ä¹‰</strong>ä¸Šï¼Œå­—ç¬¦ä¸²æ˜¯<strong>ä¸å¯å˜çš„åŸå§‹å€¼</strong>ã€‚ä»»ä½•â€œä¿®æ”¹â€éƒ½ä¼šç”Ÿæˆæ–°å­—ç¬¦ä¸²ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">let</span> s = <span class="hljs-string">'hello'</span>;
s = s + <span class="hljs-string">' world'</span>; <span class="hljs-comment">// åˆ›å»ºäº†æ–°å­—ç¬¦ä¸²ï¼ŒåŸ 'hello' æœªè¢«ä¿®æ”¹</span>
</code></pre>
<h3 data-id="heading-10">å¦‚ä½•çœŸæ­£å¤åˆ¶ä¸€ä¸ªå¯¹è±¡ï¼Œè€Œä¸æ˜¯å…±äº«ï¼Ÿ</h3>
<p><strong>æµ…æ‹·è´</strong>ï¼šåªå¤åˆ¶ç¬¬ä¸€å±‚å±æ€§</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">let</span> newObj = { ...oldObj };
<span class="hljs-comment">// æˆ–</span>
<span class="hljs-keyword">let</span> newObj = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>({}, oldObj);
</code></pre>
<p><strong>æ·±æ‹·è´</strong>ï¼šé€’å½’å¤åˆ¶æ‰€æœ‰å±‚çº§ï¼ˆéœ€æ³¨æ„å¾ªç¯å¼•ç”¨ç­‰é—®é¢˜ï¼‰</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">let</span> deepCopy = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(obj)); <span class="hljs-comment">// æœ‰å±€é™ï¼ˆä¸èƒ½æ‹·è´å‡½æ•°ã€undefined ç­‰ï¼‰</span>
<span class="hljs-comment">// æ¨èä½¿ç”¨ Lodash çš„ _.cloneDeep()</span>
</code></pre>
<hr/>
<h2 data-id="heading-11">äº”ã€æ€»ç»“</h2>
<ol>
<li><strong>åŸå§‹ç±»å‹</strong>ï¼šå€¼ç›´æ¥å­˜åœ¨æ ˆé‡Œï¼Œèµ‹å€¼æ˜¯å¤åˆ¶å€¼ï¼Œäº’ä¸å½±å“ã€‚</li>
<li><strong>å¼•ç”¨ç±»å‹</strong>ï¼šæ ˆé‡Œå­˜åœ°å€ï¼Œå †é‡Œå­˜å¯¹è±¡ï¼Œèµ‹å€¼æ˜¯å¤åˆ¶åœ°å€ï¼Œå…±äº«åŒä¸€å¯¹è±¡ã€‚</li>
<li><strong>ç†è§£å­˜å‚¨æœºåˆ¶</strong>ï¼Œæ˜¯æŒæ¡ JS èµ‹å€¼ã€å‡½æ•°ä¼ å‚ã€çŠ¶æ€ç®¡ç†ã€æ€§èƒ½ä¼˜åŒ–çš„åŸºç¡€ï¼</li>
</ol>
<hr/>
<p>ä¸‹æ¬¡å½“ä½ çœ‹åˆ°ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">let</span> a = obj;
a.<span class="hljs-property">x</span> = <span class="hljs-number">10</span>;
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(obj.<span class="hljs-property">x</span>); <span class="hljs-comment">// ä¸ºä»€ä¹ˆå˜äº†ï¼Ÿ</span>
</code></pre>
<p>ä½ å°±çŸ¥é“ï¼š<strong>å› ä¸º a å’Œ obj æŒ‡å‘çš„æ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼</strong></p>
<blockquote>
<p>æœ¬æ–‡é¦–å‘äºå…¬ä¼—å·ï¼šç¨‹åºå‘˜åˆ˜å¤§åï¼Œä¸“æ³¨åˆ†äº«å‰åç«¯å¼€å‘çš„å®æˆ˜ç¬”è®°ã€‚å…³æ³¨æˆ‘ï¼Œå°‘èµ°å¼¯è·¯ï¼Œä¸€èµ·è¿›æ­¥ï¼</p>
</blockquote>
<h4 data-id="heading-12">ğŸ“Œå¾€æœŸç²¾å½©</h4>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2F184BGM_pdMFLc0ASrferwQ" target="_blank" title="https://mp.weixin.qq.com/s/184BGM_pdMFLc0ASrferwQ" ref="nofollow noopener noreferrer">ã€Šä»£ç é‡Œå…¨æ˜¯ new å¯¹è±¡ï¼ŒçœŸçš„å¾ˆ Low å—ï¼Ÿæˆ‘è®¤çœŸæƒ³äº†ä¸€æ™šã€‹</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2Fp0n2mN5RDDDaIWuHHVRUZQ" target="_blank" title="https://mp.weixin.qq.com/s/p0n2mN5RDDDaIWuHHVRUZQ" ref="nofollow noopener noreferrer">ã€ŠJava å¼€å‘å¿…çœ‹ï¼šä»€ä¹ˆæ—¶å€™ç”¨ forï¼Œä»€ä¹ˆæ—¶å€™ç”¨ Streamï¼Ÿã€‹</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FX-MSa0CHwVW_qgPezbpMUA" target="_blank" title="https://mp.weixin.qq.com/s/X-MSa0CHwVW_qgPezbpMUA" ref="nofollow noopener noreferrer">ã€Šè¿™ 5 ä¸ªå†·é—¨ HTML æ ‡ç­¾ï¼Œè®©æˆ‘ç›´æ¥åˆ äº†100 è¡Œ JS ä»£ç ã€‹</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FT3ronvigepWew6dRC4uH2g" target="_blank" title="https://mp.weixin.qq.com/s/T3ronvigepWew6dRC4uH2g" ref="nofollow noopener noreferrer">ã€ŠVue ç»„ä»¶é€šä¿¡çš„ 8 ç§æœ€ä½³å®è·µï¼Œä½ çŸ¥é“å‡ ç§ï¼Ÿã€‹</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[RAGè¯„æµ‹å®Œæ•´æŒ‡å—ï¼šæŒ‡æ ‡ã€æµ‹è¯•å’Œæœ€ä½³å®è·µ]]></title>    <link>https://juejin.cn/post/7588031908171890697</link>    <guid>https://juejin.cn/post/7588031908171890697</guid>    <pubDate>2025-12-27T06:18:45.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588031908171890697" data-draft-id="7588028859541241882" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="RAGè¯„æµ‹å®Œæ•´æŒ‡å—ï¼šæŒ‡æ ‡ã€æµ‹è¯•å’Œæœ€ä½³å®è·µ"/> <meta itemprop="keywords" content="LLM,Agent,ç¨‹åºå‘˜"/> <meta itemprop="datePublished" content="2025-12-27T06:18:45.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="AIå¤§æ¨¡å‹"/> <meta itemprop="url" content="https://juejin.cn/user/3817967696221534"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            RAGè¯„æµ‹å®Œæ•´æŒ‡å—ï¼šæŒ‡æ ‡ã€æµ‹è¯•å’Œæœ€ä½³å®è·µ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3817967696221534/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    AIå¤§æ¨¡å‹
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-27T06:18:45.000Z" title="Sat Dec 27 2025 06:18:45 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»27åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#383838;font-size:15px;line-height:30px;letter-spacing:2px;word-break:break-word;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;scroll-behavior:smooth;background-image:linear-gradient(0deg,transparent 24%,rgba(201,195,195,.329) 25%,hsla(0,8%,80.4%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent),linear-gradient(90deg,transparent 24%,rgba(204,196,196,.226) 25%,hsla(0,4%,66.1%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent);background-color:#fff;background-size:50px 50px;padding-bottom:60px}.markdown-body ::selection{color:#fff;background-color:#a862ea}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin:24px 0 12px;color:#a862ea}.markdown-body h1{line-height:2;font-size:1.4em}.markdown-body h1~p:first-of-type:first-letter{color:#a862ea;float:left;font-size:2em;margin-right:.4em;font-weight:bolder}.markdown-body h2{font-size:1.2em}.markdown-body h3{font-size:1.1em}.markdown-body ol,.markdown-body ul{padding-left:2em}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;padding-left:.2em}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#a862ea}.markdown-body ol li.task-list-item,.markdown-body ul li.task-list-item{list-style:none}.markdown-body ol li.task-list-item ol,.markdown-body ol li.task-list-item ul,.markdown-body ul li.task-list-item ol,.markdown-body ul li.task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:10px}.markdown-body a,.markdown-body code,.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6,.markdown-body li,.markdown-body p{opacity:.85;vertical-align:baseline;transition:all .1s ease}.markdown-body a:hover,.markdown-body code:hover,.markdown-body h1:hover,.markdown-body h2:hover,.markdown-body h3:hover,.markdown-body h4:hover,.markdown-body h5:hover,.markdown-body h6:hover,.markdown-body li:hover,.markdown-body p:hover{opacity:1}.markdown-body a{display:inline-block;color:#a862ea;cursor:pointer;text-decoration:none;position:relative}.markdown-body a:after{content:"";position:absolute;width:98%;height:1px;bottom:0;left:0;transform:scaleX(0);background-color:#a862ea;transform-origin:bottom right;transition:transform .3s ease-in-out}.markdown-body a:hover:after{transform:scaleX(1);transform-origin:bottom left}.markdown-body a:active,.markdown-body a:link{color:#a862ea}.markdown-body img{max-width:100%;user-select:none;margin:1em 0;transition:transform .2s ease 0s;background-color:#f8f5ff;box-shadow:0 0 10px #e7daff}.markdown-body img:hover{opacity:1;box-shadow:0 0 20px #e7daff;transform:translateY(-1px)}.markdown-body blockquote{padding:.5em 1em;margin:12px 0;border-top-left-radius:2px;border-bottom-left-radius:2px;border-left:3px solid #a862ea;background-color:#f8f5ff}.markdown-body blockquote&gt;p{margin:0}.markdown-body .math{font-style:italic;margin:12px 0;padding:.5em 1em;background-color:#f8f5ff}.markdown-body .math&gt;p{margin:0}.markdown-body code{padding:2px .4em;overflow-x:auto;color:#a862ea;font-weight:700;word-break:break-word;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;background-color:#f8f5ff}.markdown-body pre{margin:2em 0}.markdown-body pre&gt;code{display:block;padding:1.5em;word-break:normal;font-size:.9em;font-style:normal;font-weight:400;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;line-height:18px;color:#383838;border-radius:2px;scroll-behavior:smooth;box-shadow:0 0 10px #e7daff}.markdown-body pre&gt;code:hover{box-shadow:0 0 20px #e7daff}.markdown-body pre&gt;code::-webkit-scrollbar{height:6px;background-color:#f8f5ff}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:#e7daff;border-bottom-left-radius:3px;border-bottom-right-radius:3px}.markdown-body hr{margin:2em 0;border-top:1px solid #a862ea}.markdown-body table{width:100%;font-size:12px;max-width:100%;overflow:auto;border-collapse:collapse}.markdown-body thead{color:#a862ea;background:#f8f5ff}.markdown-body td,.markdown-body th{padding:.5em;border:1px solid #e7daff}.markdown-body tr{background-color:#f8f5ff}@media (max-width:720px){.markdown-body{font-size:12px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>æœ¬æ–‡è¾ƒé•¿ï¼Œå»ºè®®ç‚¹èµæ”¶è—ã€‚æ›´å¤šAIå¤§æ¨¡å‹åº”ç”¨å¼€å‘å­¦ä¹ è§†é¢‘åŠèµ„æ–™ï¼Œåœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fgitcode.com%2FEnjoyEDU%2FLLM" target="_blank" title="https://gitcode.com/EnjoyEDU/LLM" ref="nofollow noopener noreferrer">è¿™é‡Œ</a>ã€‚</p>
</blockquote>
<p>RAGï¼ˆRetrieval-Augmented Generationï¼Œæ£€ç´¢å¢å¼ºç”Ÿï¼‰æœ€åˆç”±Facebook AI Researchï¼ˆç°Meta AIï¼‰å›¢é˜Ÿåœ¨è®ºæ–‡ Retrieval-Augmented Generation for Knowledge-Intensive NLP Tasks ä¸­æå‡ºï¼Œå¹¶å‘è¡¨äºNeurIPS 2020ã€‚</p>
<p>å¦‚æœä½ æœ‰ä½¿ç”¨RAGåº”ç”¨ï¼Œä½ ä¼šå‘ç°ï¼ŒRAGæ¡†æ¶æ˜¯ä¸€ä¸ªå¤æ‚çš„å·¥ä½œæµï¼ŒåŒ…æ‹¬åˆ†å—ã€æœç´¢ã€ä¸Šä¸‹æ–‡æ‹¼æ¥å’Œå†…å®¹ç”Ÿæˆç­‰æ­¥éª¤ï¼Œä¸€æ—¦ç³»ç»Ÿæœ€ç»ˆå“åº”çš„å†…å®¹ä¸ç¬¦åˆé¢„æœŸï¼Œå¯¹äºé—®é¢˜çš„å®šä½ä¼šéå¸¸å¤æ‚ï¼Œæ˜¯æ¨¡å‹å‡ºç°äº†å¹»è§‰ï¼Ÿè¿˜æ˜¯ä»ä¸€å¼€å§‹å°±æ²¡æœ‰è·å–åˆ°æ­£ç¡®çš„ä¿¡æ¯ï¼Ÿ</p>
<p>è¿™å°±éœ€è¦ä¸€ä¸ªå®Œå–„çš„RAGè¯„ä¼°ä½“ç³»ï¼šè¯„ä¼°RAGç³»ç»Ÿå„ä¸ªæ¨¡å—è¿è¡Œçš„æ•ˆæœï¼Œåœ¨ç”¨æˆ·ä¹‹å‰åˆ†æé—®é¢˜ã€ç”šè‡³æ˜¯é¢„åˆ¤é—®é¢˜ã€‚è¿™ç¯‡æ–‡ç« ä¼šå’Œå¤§å®¶è¯¦ç»†èŠèŠï¼Œå¦‚ä½•åœ¨å¼€å‘å’Œç”Ÿäº§ç¯å¢ƒä¸­è¯„ä¼°RAGç³»ç»Ÿã€‚</p>
<h2 data-id="heading-0">å…¨æ–‡é€Ÿè§ˆ</h2>
<ul>
<li><strong>åŸºæœ¬æ¦‚å¿µ</strong>ï¼š<strong>RAGç³»ç»Ÿ</strong>èƒ½å¤Ÿä»å¤§é‡çš„è¯­æ–™åº“ä¸­æ£€ç´¢å‡ºä¸è¾“å…¥é—®é¢˜ç›¸å…³çš„ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼Œå¹¶åˆ©ç”¨è¿™äº›ä¿¡æ¯ç”Ÿæˆå‡†ç¡®ã€åˆç†çš„å›ç­”,Â <strong>RAGè¯„ä¼°</strong>ç”¨äºè¯„ä»·RAGç³»ç»Ÿæ€§èƒ½çš„ç³»ç»Ÿæ–¹æ³•ã€‚</li>
<li><strong>RAGè¯„ä¼°æ ¸å¿ƒå†…å®¹</strong>ï¼š<strong>æ£€ç´¢</strong>ï¼ˆæŸ¥æ‰¾æœ‰ç”¨ä¿¡æ¯ï¼‰ã€<strong>ç”Ÿæˆ</strong>ï¼ˆç”Ÿæˆæœ€ç»ˆç­”æ¡ˆï¼‰ã€‚</li>
<li><strong>æ£€ç´¢è¯„ä¼°</strong>ï¼šåˆ†ä¸ºæ’åºã€ä¸Šä¸‹æ–‡ç›¸å…³æ€§æŒ‡æ ‡ï¼Œå‰è€…å¯ä»¥é‡‡ç”¨Top-Kå¬å›ï¼Œåè€…å¯ä»¥é‡‡ç”¨äººå·¥æˆ–LLMæ¥åˆ¤æ–­ã€‚</li>
<li><strong>ç”Ÿæˆè¯„ä¼°</strong></li>
</ul>

<ul>
<li><strong>æœ‰çœŸå€¼</strong>ï¼šä½¿ç”¨LLMä½œä¸ºè¯„åˆ¤å‘˜æˆ–è¯­ä¹‰ç›¸ä¼¼æ€§ï¼Œå°†è¾“å‡ºä¸æ­£ç¡®ç­”æ¡ˆè¿›è¡Œæ¯”è¾ƒã€‚</li>
<li><strong>æ— çœŸå€¼</strong>ï¼šå¯ä»¥æ£€æŸ¥å“åº”çš„å¿ è¯šåº¦ã€å®Œæ•´æ€§ã€è¯­æ°”æˆ–ç»“æ„è´¨é‡</li>
</ul>

<ul>
<li><strong>åˆæˆæµ‹è¯•æ•°æ®</strong>ï¼šä¸€ç§å¸®åŠ©RAGè¯„ä¼°çš„æ–¹æ³•ï¼Œé€šè¿‡ä»çŸ¥è¯†åº“ä¸­ç”Ÿæˆé—®ç­”å¯¹æ¥å®ç°ï¼Œç”¨ä»¥åœ¨æ²¡æœ‰çœŸå®æ•°æ®çš„æƒ…å†µä¸‹å¿«é€Ÿæ„å»ºå’Œæµ‹è¯•é›†ã€‚</li>
<li><strong>é²æ£’æ€§æµ‹è¯•å’Œå¯¹æŠ—æ€§æµ‹è¯•</strong>ï¼šç¡®ä¿RAGç³»ç»Ÿåœ¨é¢å¯¹é£é™©è¾“å…¥æˆ–æç«¯æƒ…å†µæ—¶ï¼Œå“åº”ä»ç„¶å®‰å…¨ä¸€è‡´ã€‚é²æ£’æ€§æµ‹è¯•è¯„ä¼°RAGç³»ç»Ÿåœ¨æ­£å¸¸åœºæ™¯ä¹‹å¤–çš„è¡Œä¸ºï¼Œå¹¶è§‚å¯Ÿå…¶èƒ½å¦ä»å®¹çš„åº”å¯¹ã€‚å¯¹æŠ—æ€§æµ‹è¯•ä¾§é‡ç³»ç»Ÿçš„å®‰å…¨æ€§ï¼Œæµ‹è¯•RAGç³»ç»Ÿèƒ½å¤ŸæŠµå¾¡æ¶æ„æ”»å‡»æˆ–è¯¯æ“ä½œï¼Œå¹¶ä¿æŠ¤ç”¨æˆ·çš„æ•°æ®å’Œéšç§ã€‚</li>
</ul>
<h2 data-id="heading-1">åŸºæœ¬æ¦‚å¿µ</h2>
<h3 data-id="heading-2">ä»€ä¹ˆæ˜¯ RAGï¼Ÿ</h3>
<p>RAGä½œä¸ºå½“ä¸‹ä¸»æµçš„LLMåº”ç”¨æ¡†æ¶ï¼Œå°†å¤–æŒ‚çš„çŸ¥è¯†åº“ï¼ˆå¦‚ç½‘ç»œæ•°æ®ã€ä¼ä¸šç§æœ‰æ–‡æ¡£ï¼‰ã€LLMå†…ç½®çš„çŸ¥è¯†å®Œç¾èåˆï¼Œæœ‰æ•ˆè§£å†³LLMä¸­å­˜åœ¨çš„<strong>ä¿¡æ¯è¿‡æ—¶</strong>ã€<strong>è¾“å‡ºå¹»è§‰ã€è¡Œä¸šæ•°æ®éš”ç¦»</strong>ç­‰ç—›ç‚¹é—®é¢˜ï¼Œäº§ç”Ÿæ›´å‡†ç¡®ã€æ›´æœ‰ç”¨çš„ç»“æœã€‚</p>
<p>ä¸¾ä¸ªä¾‹å­ï¼Œå¯¹äºä¸€å®¶å…¬å¸çš„å®¢æœæœºå™¨äººï¼ŒLLMæ˜¯å¾ˆéš¾çŸ¥é“è¿™å®¶å…¬å¸çš„äº§å“åŠŸèƒ½ã€ä¸šåŠ¡é€»è¾‘çš„ã€‚ç›¸åï¼ŒRAGç³»ç»Ÿåœ¨ç”¨æˆ·æå‡ºé—®é¢˜æ—¶ï¼Œä¼šæ£€ç´¢å…¬å¸å†…éƒ¨çš„äº§å“æˆ–ä¸šåŠ¡æ–‡æ¡£ï¼Œå°†æ£€ç´¢åˆ°çš„ç›¸å…³å†…å®¹äº¤ç»™LLMï¼Œç”±LLMç”Ÿæˆæœ€ç»ˆçš„ç­”æ¡ˆã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/84448f6a01504fe0bac6ce6db54eba92~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767421125&amp;x-signature=tnPRbhFPAN9F0dou1d7g9SpMQBc%3D" alt="" loading="lazy"/></p>
<p>RAG ç³»ç»Ÿå¯ä»¥åˆ†ä¸ºä¸¤å¤§æ­¥éª¤ï¼š</p>
<ul>
<li>Rï¼ˆRetrievalï¼‰: å°è¯•æ‰¾åˆ°ä¸ç”¨æˆ·æŸ¥è¯¢æœ€ç›¸å…³çš„ä¿¡æ¯ç‰‡æ®µï¼Œä¿¡æ¯çš„æ¥æºåŒ…æ‹¬æ–‡æ¡£å­˜å‚¨åº“ã€çŸ¥è¯†åº“ã€SQLæŸ¥è¯¢æ•°æ®åº“ç­‰ã€‚</li>
<li>Gï¼ˆGenerateï¼‰: åˆ©ç”¨æ£€ç´¢åˆ°çš„ä¿¡æ¯ç”Ÿæˆç­”æ¡ˆ</li>
</ul>
<p>éœ€è¦æé†’çš„æ˜¯ï¼ŒRAGç³»ç»Ÿæ˜¯ä¸€ç§è®¾è®¡ç†å¿µï¼Œè€Œéå•ä¸€çš„å®ç°å½¢å¼ã€‚æ¯”å¦‚ï¼Œ<strong>æ£€ç´¢</strong>éƒ¨åˆ†çš„å®ç°å½¢å¼æ˜¯å¤šæ ·çš„ï¼Œå¦‚è¯­ä¹‰æœç´¢ã€å…³é”®è¯æœç´¢ã€SQLæŸ¥è¯¢ï¼Œç”šè‡³æ˜¯APIè°ƒç”¨ï¼Œä¸ºæ¨¡å‹æä¾›æœ‰ç”¨çš„ä¸Šä¸‹æ–‡ä¿¡æ¯ã€‚</p>
<p>åœ¨ä¼ä¸šåº”ç”¨ä¸­ï¼Œæ£€ç´¢å®é™…ä¸Šæ˜¯å¯¹å†…éƒ¨çš„å¤§é‡éç»“æ„åŒ–æ–‡æ¡£è¿›è¡Œæœç´¢çš„ç³»ç»Ÿï¼ŒåŒ…æ‹¬æ–‡æ¡£çš„å‡†å¤‡ã€å­˜å‚¨ã€ç´¢å¼•æ–¹å¼å’Œæ’åºã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/51974b77ef0e4220806e0b2953148e43~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767421125&amp;x-signature=ypF%2BIYZEhZ3wFXqI2rJZa66%2FNE8%3D" alt="" loading="lazy"/></p>
<p>æ£€ç´¢å®Œæˆåï¼Œéœ€è¦ä¸ºLLMæ„å»ºå®Œæ•´çš„æç¤ºä¿¡æ¯ï¼ŒåŒ…æ‹¬ï¼š</p>
<ul>
<li>ç”¨æˆ·çš„é—®é¢˜</li>
<li>æ£€ç´¢åˆ°çš„ä¸Šä¸‹æ–‡</li>
<li>ç³»ç»Ÿæç¤ºï¼Œçº¦å®šæ¨¡å‹æŒ‰ç…§ä»€ä¹ˆæ ¼å¼è¾“å‡ºç­”æ¡ˆ</li>
</ul>
<h3 data-id="heading-3">ä»€ä¹ˆæ˜¯ RAG è¯„ä¼°ï¼Ÿ</h3>
<p>å®šä¹‰ï¼šæ—¨åœ¨è¡¡é‡RAGç³»ç»Ÿåœ¨å®é™…åº”ç”¨ä¸­çš„æ€§èƒ½è¡¨ç°ã€‚æ¯”å¦‚ï¼šæ˜¯å¦æå–äº†æ­£ç¡®çš„ä¿¡æ¯ï¼Ÿæ˜¯å¦ç»™å‡ºäº†æ­£ç¡®çš„ç­”æ¡ˆï¼Ÿè¾“å‡ºç»“æœæ˜¯å¦å¯ä¿¡ï¼Ÿä¸€ä¸ªåˆç†çš„è¯„ä¼°ä½“ç³»æœ‰åŠ©äºå›ç­”è¿™äº›é—®é¢˜ï¼Œå¹¶æŒ‡å¯¼å¼€å‘å·¥ç¨‹å¸ˆåšå‡ºæ›´å¥½çš„è®¾è®¡å†³ç­–ã€‚</p>
<p>RAGç³»ç»Ÿå°±åƒä¸€å°ç²¾å¯†çš„æœºå™¨ï¼Œè¦è®©å®ƒç¨³å®šè¿è½¬ï¼Œæ¯ä¸ªå…³é”®ç¯èŠ‚éƒ½è¦åšæ‰å®ï¼šæ–‡æ¡£çš„åˆ†å—å’Œå­˜å‚¨æ–¹å¼ã€ä½¿ç”¨çš„åµŒå…¥æ¨¡å‹ã€æ£€ç´¢é€»è¾‘ã€æç¤ºæ ¼å¼ã€LLM ç‰ˆæœ¬ç­‰ç­‰ã€‚</p>
<p>ä¸€å¥—é è°±çš„è¯„ä¼°æ–¹æ³•ï¼Œå°±åƒè¿™å°ç²¾å¯†æœºå™¨çš„è°ƒè¯•å·¥å…·ç®±ï¼Œèƒ½è§£å†³å¾ˆå¤šå®é™…é—®é¢˜ï¼š</p>
<ul>
<li>å¿«é€Ÿç»™å‡ºä¸åŒæ–¹æ¡ˆçš„å¯¹æ¯”æ•ˆæœï¼Œæ¯”å¦‚å“ªç§æ–‡æ¡£åˆ†å—æ–¹å¼æ‰¾ç­”æ¡ˆæ›´å‡†</li>
<li>è¿½è¸ªå“ªäº›å› ç´ èƒ½æé«˜æˆ–é™ä½æ•ˆæœ</li>
<li>ç²¾å‡†å®šä½é—®é¢˜ï¼Œå½“ç³»ç»Ÿç­”éæ‰€é—®æˆ–å‡ºé”™æ—¶ï¼Œèƒ½æ›´å¿«æ‰¾åˆ°ç—‡ç»“åœ¨å“ªå„¿ï¼Œè°ƒè¯•èµ·æ¥æ›´çœå¿ƒã€‚</li>
</ul>
<p>è¯´äº†è¿™ä¹ˆå¤šï¼Œåˆ°åº•è¯¥å¦‚ä½•è¯„ä¼°å‘¢ï¼Ÿä¸€ç§ç®€å•çš„æ–¹å¼ï¼Œå¯¹RAGç³»ç»Ÿè¿›è¡Œç«¯åˆ°ç«¯è¯„ä¼°ï¼Œé‡ç‚¹å…³æ³¨æœ€ç»ˆç­”æ¡ˆçš„è´¨é‡ï¼Œè¿™ç§æ–¹å¼å°½ç®¡ä¹Ÿå¯è¡Œï¼Œä½†ä¸åˆ©äºé—®é¢˜çš„æ’æŸ¥ã€æ•ˆæœçš„ä¼˜åŒ–ã€‚</p>
<p>æ›´ä¼˜çš„æ–¹å¼æ˜¯ï¼Œå°†æ£€ç´¢å’Œç”Ÿæˆé˜¶æ®µåˆ†å¼€è¯„æµ‹ï¼Œè¿™å¯¹äºè°ƒè¯•ä¹Ÿè‡³å…³é‡è¦ã€‚å½“ä½ å¾—åˆ°é”™è¯¯ç­”æ¡ˆæ—¶ï¼Œä½ é¦–å…ˆåº”è¯¥é—®è‡ªå·±ï¼šå“ªé‡Œå‡ºé”™äº†ï¼Ÿ</p>
<ul>
<li>ç³»ç»Ÿæ˜¯å¦æ£€ç´¢åˆ°æ­£ç¡®çš„ä¸Šä¸‹æ–‡ä¿¡æ¯</li>
<li>ä¸Šä¸‹æ–‡æ­£ç¡®äº†ï¼Œæ¨¡å‹æ˜¯ä¸æ˜¯å‡ºç°äº†å¹»è§‰</li>
</ul>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†åˆ†åˆ«ä»‹ç»æ£€ç´¢å’Œç”Ÿæˆé˜¶æ®µçš„è¯„ä¼°æ–¹æ³•</p>
<h2 data-id="heading-4">æ£€ç´¢é˜¶æ®µçš„è¯„ä¼°æ–¹æ³•</h2>
<p>ä¸‹é¢å°†ä»‹ç»<strong>æœ‰çœŸå€¼ã€äººå·¥æ ‡æ³¨å’ŒLLM</strong>ä¸‰ç§è¯„ä¼°æ–¹æ³•ã€‚</p>
<h3 data-id="heading-5">æœ‰çœŸå€¼çš„è¯„ä¼°æ–¹æ³•</h3>
<p>æ£€ç´¢è¯„ä¼°å¹¶éä¸€ä¸ªæ–°è¯é¢˜ï¼Œæ‰€æœ‰æœç´¢å¼•æ“çš„èƒŒåéƒ½æœ‰ä¸€å¥—è¿™æ ·çš„è¯„ä¼°æœºåˆ¶ï¼Œæ¯”å¦‚ç™¾åº¦ã€è°·æ­Œï¼Œè¿™æ˜¯ä¸€ä¸ªå…¸å‹çš„æœºå™¨å­¦ä¹ åº”ç”¨åœºæ™¯ã€‚åœ¨è¿™å¥—è¯„ä¼°æœºåˆ¶çš„å¼•å¯¼ä¸‹ï¼Œå·¥ç¨‹å¸ˆå¯ä»¥ä¸ºç”¨æˆ·æä¾›æ›´å¥½çš„äº§å“æœåŠ¡ã€‚ç±»ä¼¼çš„ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥å°†è¿™å¥—æ–¹æ³•å¤ç”¨åˆ°RAGç³»ç»Ÿä¸­ã€‚</p>
<p>ä½ éœ€è¦æœ‰ä¸€ä¸ª<strong>çœŸå€¼æ•°æ®é›†ï¼Œå¯¹äºæ¯ä¸ªæŸ¥è¯¢ï¼Œéœ€è¦å®šä¹‰åŒ…å«ç­”æ¡ˆçš„æ­£ç¡®æ¥æºï¼Œå¯ä»¥æ˜¯æ–‡æ¡£IDã€æ•°æ®å—ID æˆ–é“¾æ¥ã€‚</strong></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/be2215a44ecc468bbe4b0daf728a6120~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767421125&amp;x-signature=AlGi45txZveTYcmObaSfrwgm9DY%3D" alt="" loading="lazy"/></p>
<p>åœ¨ä¿¡æ¯æ£€ç´¢æœ¯è¯­ä¸­ï¼Œè¿™äº›è¢«ç§°ä¸º<strong>ç›¸å…³</strong>æ–‡æ¡£ï¼Œå³ä¸ºç”¨æˆ·æŸ¥è¯¢æä¾›æ­£ç¡®ã€æœ‰æ•ˆä¿¡æ¯çš„æ¡ç›®ã€‚</p>
<p>æœ‰äº†è¿™ä»½çœŸå€¼æ•°æ®é›†ï¼Œå°±å¯ä»¥åœ¨ç³»ç»Ÿä¸­è¿è¡ŒæŸ¥è¯¢ï¼Œå¹¶é€šè¿‡æ¯”è¾ƒæ£€ç´¢åˆ°çš„æ•°æ®å—ä¸é¢„æœŸæ•°æ®å—ï¼Œæ¥æ£€æŸ¥ç³»ç»Ÿæ˜¯å¦èƒ½å¤Ÿæ‰¾åˆ°é¢„æœŸçš„ä¸Šä¸‹æ–‡ã€‚ä¸ºäº†é‡åŒ–ç»“æœï¼Œå¯ä»¥è®¡ç®—æ ‡å‡†çš„ä¿¡æ¯æ£€ç´¢æŒ‡æ ‡ã€‚</p>
<p>ä»¥ä¸‹æ˜¯ä¸€äº›ä¾‹å­ï¼Œåç»­å°†ä»¥ä¸“æ çš„å½¢å¼ï¼Œè¯¦ç»†ä»‹ç»å„ç±»è¯„ä¼°æŒ‡æ ‡çš„åŸç†ã€å®ç°ï¼š</p>

























<table><thead><tr><th>æŒ‡æ ‡</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>ç²¾ç¡®åº¦@k</td><td>åœ¨æ£€ç´¢åˆ°çš„å‰kä¸ªç»“æœä¸­ï¼Œæœ‰å¤šå°‘æ˜¯çœŸæ­£ç›¸å…³çš„ï¼Ÿ</td></tr><tr><td>å¬å›@k</td><td>åœ¨æ‰€æœ‰ç›¸å…³æ–‡æ¡£ä¸­ï¼Œæœ‰å¤šå°‘ä¸ªæ–‡æ¡£è¢«æ£€ç´¢åˆ°æ’åå‰kä¹‹åˆ—ï¼Ÿ</td></tr><tr><td>å‘½ä¸­ç‡</td><td>å‰kä¸ªç»“æœä¸­æ˜¯å¦è‡³å°‘å‡ºç°è¿‡ä¸€ä¸ªç›¸å…³æ¡ç›®ï¼Ÿï¼ˆæ˜¯/å¦ï¼‰</td></tr><tr><td>NDCG@k</td><td>å½’ä¸€åŒ–æŠ˜æ‰£ç´¯è®¡æ”¶ç›Šï¼šç”¨æ¥è¡¡é‡æ’åå‰kä¸ªæ£€ç´¢ç»“æœçš„ç›¸å…³æ€§å’Œæ’åºåˆç†æ€§</td></tr></tbody></table>
<p>ä»¥<strong>ç²¾ç¡®åº¦@k</strong>æŒ‡æ ‡ä¸ºä¾‹ï¼Œå…¶è®¡ç®—ç¤ºæ„å›¾å¦‚ä¸‹</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a7b95f8bf97e4c41858e77772b04b522~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767421125&amp;x-signature=fNjsji2ncYxYwezTz94guWXtnYY%3D" alt="" loading="lazy"/></p>
<p>è¿™äº›è¯„ä¼°æŒ‡æ ‡èƒ½å¸®åŠ©æˆ‘ä»¬æœ‰æ•ˆå¯¹æ¯”ä¸åŒçš„æœç´¢é…ç½®ï¼Œæ¯”å¦‚é‡æ’è§„åˆ™ã€åµŒå…¥æ–¹æ³•ï¼Œè¿˜èƒ½å®šä½é—®é¢˜ã€‚ç¼ºç‚¹æ˜¯ï¼Œæ„å»ºçœŸå®çš„æµ‹è¯•æ•°æ®é›†ç‰¹åˆ«è€—æ—¶ï¼Œéœ€è¦äººå·¥æŠŠæ¯ä¸ªæµ‹è¯•é—®é¢˜å¯¹åº”åˆ°æ­£ç¡®çš„å‚è€ƒå†…å®¹ä¸Šã€‚</p>
<h3 data-id="heading-6">äººå·¥æ ‡æ³¨ç›¸å…³æ€§</h3>
<p>è¿™æ˜¯ä¸€ç§ç›¸å¯¹ç®€å•çš„æ–¹æ³•ï¼Œåœ¨æ£€ç´¢åè¯„ä¼°ç»“æœã€‚</p>
<p>æ— éœ€é¢„å…ˆå®šä¹‰ç›¸å…³æ–‡æ¡£ï¼Œè®©ç³»ç»ŸæŒ‰åŸæ ·è¿è¡Œæµ‹è¯•æŸ¥è¯¢ï¼Œç„¶åæ‰‹åŠ¨è¯„ä¼°ç»“æœã€‚å¯¹äºæ¯ä¸ªæŸ¥è¯¢ï¼Œéƒ½è¦æ£€æŸ¥ç³»ç»Ÿçš„æ£€ç´¢å†…å®¹ï¼Œå¹¶åˆ†é…ä¸€ä¸ªæ ‡ç­¾ï¼Œä¾‹å¦‚ï¼š<em>ç›¸å…³</em>ã€<em>éƒ¨åˆ†ç›¸å…³ ã€ä¸ç›¸å…³</em>ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4a4f4f98d53845bcb391f14a1a877d89~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767421125&amp;x-signature=UxRjSGu2RhSz9DCgfPAD1PpmBNc%3D" alt="" loading="lazy"/></p>
<p>è®¸å¤šå›¢é˜Ÿåœ¨å®è·µä¸­ä¹Ÿæ˜¯ç”¨è¿™ç§æ–¹æ³•è¯„ä¼°æ£€ç´¢æ•ˆæœçš„ã€‚ä¾‹å¦‚ï¼Œè°·æ­Œåˆ¶å®šäº†è¯¦å°½çš„å†…éƒ¨å‡†åˆ™ ï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.google.com%2Fsearch%2Fhowsearchworks%2Fhow-search-works%2Frigorous-testing%2F" target="_blank" title="https://www.google.com/search/howsearchworks/how-search-works/rigorous-testing/" ref="nofollow noopener noreferrer">www.google.com/search/howsâ€¦</a>ï¼‰ä¾›äººå·¥è¯„åˆ†å‘˜å‚è€ƒã€‚</p>
<p>è¿™æ ·åšçš„å¥½å¤„æ˜¯çµæ´»ï¼Œå¯ä»¥è¯„ä¼°æ•´ä¸ªæ£€ç´¢æµç¨‹åœ¨å®é™…è¿è¡Œä¸­çš„æ•ˆæœï¼ŒåŒ…æ‹¬ï¼š</p>
<ul>
<li>è¯„ä¼°ç”¨æˆ·åœ¨ç”Ÿäº§ç¯å¢ƒä¸­å®é™…çœ‹åˆ°çš„æ£€ç´¢è´¨é‡ã€‚</li>
<li>æ‰¾å‡ºæ€§èƒ½æå·®çš„æŸ¥è¯¢</li>
<li>æ›´å¥½åœ°ç†è§£è¾¹ç•Œæƒ…å†µå’Œæ­§ä¹‰æŸ¥è¯¢</li>
</ul>
<p>ç¼ºç‚¹ä¹Ÿæ˜¾è€Œæ˜“è§ï¼Œæ— æ³•è®¡ç®—å¬å›ç‡ï¼Œå› ä¸ºæ²¡æœ‰çœŸå€¼ã€‚</p>
<h3 data-id="heading-7">LLMè¯„å®¡å‘˜è¯„ä¼°ç›¸å…³æ€§</h3>
<p>LLMè¯„å®¡å‘˜ä½¿ç”¨ç”¨å¤§è¯­è¨€æ¨¡å‹ï¼Œåœ¨è¯„ä¼°æç¤ºè¯çš„å¼•å¯¼ä¸‹ï¼Œè¯„ä»·RAGç³»ç»Ÿå“åº”çš„ç»“æœã€‚æ¯”å¦‚ï¼Œå¯ä»¥ç»™LLMå®šåˆ¶æç¤ºè¯ï¼Œè®©å®ƒåˆ¤æ–­æŸä¸ªå›å¤æœ‰æ²¡æœ‰å¸®åŠ©ï¼Œæˆ–è€…æ˜¯å¦ç¬¦åˆç‰¹å®šçš„è§„åˆ™è¦æ±‚ã€‚</p>
<p>ä¸‹é¢ï¼Œå°†ä¸ºå¤§å®¶ä»‹ç»LLMè¯„å®¡å‘˜çš„ä¸¤ç§æŠ€æœ¯æ–¹æ¡ˆã€‚</p>
<h4 data-id="heading-8">å¯¹æ•°æ®å—è¯„ä¼°ç›¸å…³æ€§</h4>
<p>å¯ä»¥æŠŠç”¨æˆ·çš„é—®é¢˜å’Œæ£€ç´¢åˆ°çš„æ•°æ®å—ä¸€èµ·ç»™åˆ°LLMè¯„å®¡å‘˜ï¼Œè®©å®ƒæ¥åˆ¤æ–­ä¿¡æ¯å—å’Œç”¨æˆ·é—®é¢˜æ˜¯å¦ç›¸å…³ã€‚</p>
<p>LLMè¯„å®¡å‘˜ç»™å‡ºçš„åˆ¤æ–­ç»“æœæœ‰ä¸¤ç§å½¢å¼ï¼š</p>
<ul>
<li>ç®€å•çš„äºŒåˆ†ç±»æ ‡ç­¾ï¼Œç›´æ¥æ ‡è®°*ç›¸å…³ã€*<em>ä¸ç›¸å…³</em></li>
<li>ç»™å‡ºä¸€ä¸ªå…·ä½“çš„ç›¸å…³æ€§åˆ†æ•°</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d6898b8e9e0e437f8d0635103a4eb8df~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767421125&amp;x-signature=Nu7QWkUWDNTy2wn6wfuLP2QSjLc%3D" alt="" loading="lazy"/></p>
<p>è¿˜å¯ä»¥ä½¿ç”¨å…¶ä»–LLMè¯„ä¼°æ–¹æ³•ï¼Œä¾‹å¦‚ï¼ŒåŸºäºåµŒå…¥çš„è¯­ä¹‰ç›¸ä¼¼åº¦ï¼Œå®ƒä¼šè¿”å›ä¸€ä¸ªæ•°å€¼åˆ†æ•°ï¼Œåæ˜ æŸ¥è¯¢å’Œæ£€ç´¢åˆ°çš„æ•°æ®å—åœ¨è¯­ä¹‰ä¸Šçš„ç›¸ä¼¼ç¨‹åº¦ã€‚</p>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒRAGç³»ç»Ÿä¸€èˆ¬ä¼šå¯¹å•æ¬¡æŸ¥è¯¢è¿”å›å¤šä¸ªæ•°æ®å—ï¼Œè¿™æ„å‘³ç€éœ€è¦å¯¹æ¯ä¸ªæ•°æ®å—å•ç‹¬è¿›è¡Œè¯„åˆ†ã€‚</p>
<p><strong>ä¸¾ä¸ªç®€å•çš„ä¾‹å­</strong>ï¼šå‡è®¾å…³äºé¦™è•‰çš„æŸ¥è¯¢æ£€ç´¢åˆ°ä¸‰ä¸ªçŸ­æ–‡æœ¬å—ã€‚æ¯ä¸ªæ–‡æœ¬å—éƒ½æ˜¯ä¸€ä¸ªå¥å­ï¼Œå¯èƒ½æ¥è‡ªä¸åŒçš„æ–‡æ¡£ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c92b06020f9c40c4a354b2565839d3df~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767421125&amp;x-signature=4pqMpuZFtqZj0jmUCXi6it3UBec%3D" alt="" loading="lazy"/></p>
<p>ç„¶åï¼Œé‡‡ç”¨LLMè¯„å®¡å‘˜ä¸ºæ¯ä¸ªæ•°æ®å—åˆ†é…ä¸€ä¸ªç›¸å…³æ€§åˆ†æ•°ï¼Œå…¶ä¸­ 1 è¡¨ç¤ºé«˜åº¦ç›¸å…³ï¼Œ0 è¡¨ç¤ºå®Œå…¨ä¸ç›¸å…³ã€‚</p>
<p>ä¾‹å¦‚ï¼Œä¸Šå›¾ä¸­çš„<strong>Chunk 1</strong>åŒ…å«æœ‰å…³é¦™è•‰å¥åº·ç›Šå¤„çš„ç›¸å…³ä¿¡æ¯ï¼Œå¾—1åˆ†ã€‚ä½†<strong>Chunk 3</strong>è¿™æ ·çš„å†…å®¹ä¸ç”¨æˆ·çš„æŸ¥è¯¢æ— ç›¸å…³æ€§ï¼Œå¾—0åˆ†ã€‚</p>
<p>ä¸€æ—¦è¯„ä¼°å®Œæ¯ä¸ªæ•°æ®å—çš„ç›¸å…³æ€§ä¹‹åï¼Œå°±å¯ä»¥æ±‡æ€»ç»“æœï¼Œè¯„ä¼°æœ¬æ¬¡æŸ¥è¯¢çš„æ•´ä½“æ£€ç´¢è´¨é‡ã€‚ æœ‰ä¸‰ç§å®ç°æ–¹å¼ï¼š</p>
<ul>
<li><strong>äºŒå…ƒå‘½ä¸­</strong>ï¼šæ˜¯å¦è‡³å°‘æœ‰ä¸€ä¸ªæ•°æ®å—è¾¾åˆ°äº†ç›¸å…³æ€§é˜ˆå€¼ï¼Ÿ</li>
<li><strong>ç›¸å…³æ•°æ®å—å æ¯”</strong>ï¼šæ£€ç´¢åˆ°çš„æ•°æ®å—ä¸­ï¼Œç›¸å…³çš„æ•°æ®å—å æ¯”æ˜¯å¤šå°‘ï¼Ÿ</li>
<li><strong>å¹³å‡ç›¸å…³æ€§å¾—åˆ†</strong>ï¼šæ€»ä½“è€Œè¨€ï¼Œè¿™äº›å†…å®¹å—çš„ç›¸å…³æ€§å¦‚ä½•ï¼Ÿ</li>
</ul>
<p>æˆ‘ä»¬ä»¥å¹³å‡ç›¸å…³æ€§å¾—åˆ†ä¾‹ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œåˆ†åˆ«æ˜¯å…³äºé¦™è•‰å’ŒåœŸè±†çƒ¹é¥ªçš„æŸ¥è¯¢ï¼Œä»Relevanceæ¥çœ‹ï¼Œå…³äºé¦™è•‰çš„é—®é¢˜ï¼Œå¾—åˆ°äº†æ›´å¤šç›¸å…³çš„æ•°æ®å—ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6deb0ad61f6a45cbabb51625936baa2e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767421125&amp;x-signature=MdftBg76AQOHjiJrpUVtkHkBiPM%3D" alt="" loading="lazy"/></p>
<p>æ›´è¿›ä¸€æ­¥ï¼Œæˆ‘ä»¬å¯ä»¥æ±‡æ€»æ¯ä¸ªæŸ¥è¯¢åœ¨å¤šä¸ªæ£€ç´¢æ–‡æœ¬å—ä¸‹çš„ç›¸å…³æ€§å¾—åˆ†ï¼Œä»è€Œè®¡ç®—å‡ºæ•´ä¸ªæµ‹è¯•æ•°æ®é›†ã€æˆ–ç‰¹å®šæ—¶é—´æ®µå†…æŸ¥è¯¢çš„ç›¸å…³æ€§æ‰“åˆ†ã€‚</p>
<h4 data-id="heading-9">å¯¹ä¸Šä¸‹æ–‡è¯„ä¼°ç›¸å…³æ€§</h4>
<p>å¦‚æœæ£€ç´¢ç³»ç»Ÿè¿”å›çš„ä¸Šä¸‹æ–‡å¾ˆçŸ­ï¼Œæˆ–è€…å¾ˆå®¹æ˜“å°†æ‰€æœ‰æ•°æ®å—æ‰“åŒ…æˆä¸€ä¸ªä¸Šä¸‹æ–‡å—ï¼Œå¯ä»¥è·³è¿‡æŒ‰å—è¯„åˆ†ï¼Œç›´æ¥è¯„ä¼°æ•´ä¸ªä¸Šä¸‹æ–‡ã€‚åªéœ€è¦ä¸ºLLMè®¾ç½®æç¤ºè¯å°±è¡Œï¼Œå¦‚ï¼š</p>
<blockquote>
<p>å¸®æˆ‘åˆ¤æ–­æ£€ç´¢åˆ°çš„å†…å®¹æ˜¯å¦åŒ…å«è¶³å¤Ÿçš„ä¿¡æ¯å›ç­”ç”¨æˆ·çš„é—®é¢˜ï¼Ÿå¦‚æœæ˜¯ï¼Œåˆ™æ˜¾ç¤ºæœ‰æ•ˆï¼›å¦åˆ™ï¼Œæ˜¾ç¤ºæ— æ•ˆã€‚</p>
</blockquote>
<p>LLMè¯„å®¡å‘˜å°†ä¼šæŒ‰ç…§ä¸Šè¿°æç¤ºè¯è¿”å›ç»“æœï¼Œå¹¶é™„æœ‰ç†ç”±ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a401ec9ad6d14a808c324a3b98e434b7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767421125&amp;x-signature=NQUSR%2FNDhYOHlPyNnHmeYVT3N3Q%3D" alt="" loading="lazy"/></p>
<p>ç»è¿‡ä¸Šè¿°ä¸¤ç§æ–¹æ³•çš„ä»‹ç»ï¼Œå¯ä»¥æ€»ç»“LLMè¯„å®¡å‘˜æ–¹æ³•å…·æœ‰å¦‚ä¸‹ä¼˜åŠ¿ï¼š</p>
<ul>
<li><strong>å·¥ä½œé‡ä½</strong>ï¼šåªéœ€è¦æµ‹è¯•æŸ¥è¯¢è¯­å¥ï¼Œæ— æ³•æ ‡æ³¨é—®é¢˜çš„ç­”æ¡ˆã€‚</li>
<li><strong>å¼ºåŸºçº¿æ€§èƒ½</strong>ï¼šLLMå¯ä»¥å¾ˆå¥½åœ°å¤„ç†ç›¸å…³æ€§æ£€æŸ¥ï¼Œç‰¹åˆ«æ˜¯ç®€å•æ˜¯éé—®é¢˜ä¸Šã€‚å¾®è½¯åœ¨è®ºæ–‡ Large language models can accurately predict searcher preferenceså£°ç§°ï¼ŒGPT-4åœ¨Bingçš„RAGç³»ç»Ÿç›¸å…³æ€§è¯„ä¼°æ–¹é¢ï¼Œè¾¾åˆ°äº†æ¥è¿‘äººç±»çš„æ°´å¹³ã€‚</li>
<li><strong>éå¸¸é€‚åˆå¿«é€Ÿå®éªŒ</strong>ï¼šå½“ä½ è¦å°è¯•æ–°çš„æ•°æ®åº“æˆ–æ£€ç´¢é…ç½®æ—¶ï¼Œå¯ä»¥ç›´æ¥è¿è¡ŒLLMè¯„å®¡å‘˜ï¼Œå¿«é€Ÿæ¯”è¾ƒä¸åŒé…ç½®çš„æ•ˆæœã€‚</li>
<li><strong>é€‚ç”¨äºç”Ÿäº§ç¯å¢ƒç›‘æ§</strong>ï¼šç”±äºä¸éœ€è¦äº‹å…ˆæ„å»ºçœŸå€¼ï¼Œç‰¹åˆ«é€‚åˆç”Ÿäº§ç¯å¢ƒã€‚</li>
</ul>
<h2 data-id="heading-10">å†…å®¹ç”Ÿæˆé˜¶æ®µçš„è¯„ä¼°æ–¹æ³•</h2>
<p>ä¸€æ—¦ç³»ç»Ÿæ£€ç´¢åˆ°ä¸Šä¸‹æ–‡ï¼ŒLLMå°±ä¼šä½¿ç”¨ä¸Šä¸‹æ–‡ã€ç”¨æˆ·çš„é—®é¢˜å’Œç³»ç»Ÿæç¤ºè¯æ¥ç”Ÿæˆæœ€ç»ˆç­”æ¡ˆã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/91ffa528cf024abba94900cb08554327~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767421125&amp;x-signature=i%2F5f4arrIDhCjS8uNU31TecVNYM%3D" alt="" loading="lazy"/></p>
<p>æœ‰ä¸¤ç§æ–¹æ³•è¯„ä¼°LLMç”Ÿæˆçš„æœ€ç»ˆç­”æ¡ˆæ˜¯å¦æœ‰æ•ˆï¼š</p>
<ul>
<li><strong>åŸºäºå‚è€ƒçš„è¯„ä¼°</strong>Â ï¼šå°†RAGç³»ç»Ÿçš„è¾“å‡ºä¸é¢„å®šä¹‰çš„å‚è€ƒç­”æ¡ˆè¿›è¡Œæ¯”è¾ƒï¼Œè¿™å°±éœ€è¦æ„å»ºæ ‡æ³¨å¥½çš„æ•°æ®é›†ï¼Œé€‚ç”¨äºå¼€å‘æˆ–æµ‹è¯•ç¯å¢ƒã€‚</li>
<li><strong>æ— å‚è€ƒè¯„ä¼°</strong>Â ï¼šå½“æ²¡æœ‰å‚è€ƒç­”æ¡ˆæ—¶ï¼Œä»ç„¶å¯ä»¥ä½¿ç”¨æŒ‡æ ‡æ¥è¯„ä¼°è´¨é‡ï¼Œæ¯”å¦‚æ¨¡å‹å›ç­”ç»“æ„ã€è¯­æ°”ã€é•¿åº¦ã€å®Œæ•´æ€§ã€æ˜¯å¦åŒ…å«å¿…è¦çš„å…è´£å£°æ˜ç­‰ç‰¹å®šå±æ€§ã€‚è¿™ç±»æ–¹æ³•é€‚ç”¨äºç°åº¦é˜¶æ®µå’Œç”Ÿäº§ç¯å¢ƒã€‚</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/040a77145b154366a4866fa65ed85d94~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767421125&amp;x-signature=c6ZsqlsTikt4Z5X4GtSSFjkxWnY%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-11">åŸºäºå‚è€ƒçš„è¯„ä¼°</h3>
<p>å¦‚æœæ˜¯ç¦»çº¿æµ‹è¯•ï¼Œæœ€å¯é çš„è¯„ä¼°æ–¹æ³•æ˜¯å°†LLMçš„ç­”æ¡ˆä¸æ­£ç¡®çš„ç­”æ¡ˆè¿›è¡Œæ¯”è¾ƒã€‚è¿™äº›åŸºäºå‚è€ƒçš„è¯„ä¼°å¯ä»¥è¡¡é‡ RAGç³»ç»Ÿåœ¨æµ‹è¯•é›†ä¸­ä¸ç†æƒ³ç­”æ¡ˆçš„æ¥è¿‘ç¨‹åº¦ã€‚</p>
<p>ä»ä¸Šé¢çš„æè¿°å¯ä»¥çœ‹å‡ºï¼Œè¦ä½¿ç”¨åŸºäºå‚è€ƒçš„è¯„ä¼°æ–¹æ³•ï¼Œéœ€è¦æ„å»ºä¸€ç³»åˆ—é—®ç­”å¯¹æ•°æ®é›†ï¼Œä½œä¸ºè¯„æµ‹åŸºå‡†ã€‚</p>
<p>æ¥ä¸‹æ¥ï¼Œå°†é—®é¢˜è¾“å…¥åˆ°RAGç³»ç»Ÿä¸­ï¼Œå¹¶å°†ç”Ÿæˆçš„å“åº”ä¸å‚è€ƒå“åº”è¿›è¡Œæ¯”è¾ƒï¼Œå…·ä½“çš„è®¡åˆ†æ–¹å¼å¦‚ä¸‹ï¼š</p>
<ul>
<li><strong>è¯­ä¹‰ç›¸ä¼¼æ€§</strong>: åˆ†åˆ«è·å–ç”Ÿæˆç­”æ¡ˆå’Œå‚è€ƒç­”æ¡ˆçš„åµŒå…¥å‘é‡ï¼Œè®¡ç®—ä¸¤ä¸ªå‘é‡é—´çš„ç›¸ä¼¼åº¦</li>
<li><strong>LLM ä½œä¸ºè¯„åˆ¤å‘˜</strong>ï¼šè¿™æ˜¯ä¸€ç§ä½¿ç”¨LLMä½œä¸ºåˆ¤æ–­å™¨çš„æ–¹æ³•ï¼Œç”¨æ¥æ¯”è¾ƒç”Ÿæˆç­”æ¡ˆå’Œå‚è€ƒç­”æ¡ˆï¼Œå¹¶è¯„ä¼°RAGå“åº”æ˜¯å¦æ­£ç¡®ã€å®Œæ•´æˆ–ä¸ä¹‹å‰çš„æ–‡æœ¬ç›¸ä¸€è‡´ã€‚</li>
</ul>
<p>ä¸¤ç§æ–¹æ³•æ•ˆæœéƒ½ä¸é”™ã€‚è¯­ä¹‰ç›¸ä¼¼åº¦æ–¹æ³•æ•ˆç‡é«˜ã€å¯æ‰©å±•æ€§é«˜ã€‚åŸºäºLLMçš„æ–¹æ³•èƒ½å¤Ÿæä¾›æ›´ç»†è‡´çš„ä¸Šä¸‹æ–‡æ¨ç†ï¼Œæœ€å¤§çš„ä¼˜åŠ¿å¯ä»¥æ ¹æ®ç”¨æˆ·çš„è¯„ä¼°è§„åˆ™è¿›è¡Œè°ƒæ•´ã€‚</p>
<p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªåŸºäºLLMæ–¹æ³•è¯„ä¼°RAGå“åº”æ•ˆæœçš„ç¤ºä¾‹ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ead2da35dccf45e38808971081b6934f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767421125&amp;x-signature=0m94ZyLqAUTQwf3KSH0Lh2TIysQ%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-12">RAGè¯„æµ‹æ•°æ®é›†</h3>
<p>åœ¨RAGè¯„ä¼°ä¸­ï¼Œè¯„æµ‹æ•°æ®é›†çš„è´¨é‡è‡³å…³é‡è¦ã€‚è‹¥æ•°æ®é›†ä»…å«ç®€å•æˆ–ä¸åˆ‡å®é™…çš„é—®é¢˜ï¼Œæ¨¡å‹éš¾ä»¥åº”å¯¹ç°å®ä¸­çš„å¤æ‚åœºæ™¯ã€‚æµ‹è¯•ç”¨ä¾‹éœ€è´´åˆçœŸå®ç”¨æˆ·é—®é¢˜ã€è¦†ç›–å…³é”®ä¸»é¢˜ï¼Œå°½å¯èƒ½çš„è¦†ç›–å¤šç§åœºæ™¯ï¼Œåªæœ‰è¿™æ ·ï¼Œæ‰èƒ½ç²¾å‡†è¯„ä¼° RAG çš„å®é™…æ€§èƒ½ã€‚</p>
<p>æ„å»ºä¸€ä¸ªå®Œå¤‡çš„æµ‹è¯•é›†éœ€è¦èŠ±è´¹å¤§é‡ç²¾åŠ›ï¼Œå¥½æ¶ˆæ¯æ˜¯ä¸ç”¨å®Œå…¨æ‰‹åŠ¨æ„å»ºï¼Œå¯ä»¥ç›´æ¥ä»çŸ¥è¯†åº“ç”Ÿæˆæµ‹è¯•ç”¨ä¾‹ï¼Œæé«˜æ•ˆç‡ã€‚å®ç°ä¸Šä¹Ÿååˆ†ç®€å•ï¼Œä»æ–‡æ¡£æˆ–çŸ¥è¯†åº“ä¸­é€‰å–æ•°æ®å—ï¼Œè®©LLMå®Œæˆä»¥ä¸‹æ“ä½œï¼š</p>
<ul>
<li>æ ¹æ®æ•°æ®å—çš„å†…å®¹ï¼Œç”Ÿæˆä¸€ä¸ªé—®é¢˜ã€‚</li>
<li>æ ¹æ®æ•°æ®åº“çš„å†…å®¹ï¼Œç”Ÿæˆå¯ä»¥å›ç­”ä¸Šè¿°é—®é¢˜çš„ç­”æ¡ˆã€‚</li>
</ul>
<p>ç”±äºä¸Šè¿°æµ‹è¯•ç”¨ä¾‹æ¥æºçœŸå®çš„RAGçŸ¥è¯†åº“ï¼Œä¹Ÿä¼šæ›´åŠ ç¬¦åˆç”Ÿæˆç¯å¢ƒä¸­çš„ä¸šåŠ¡åœºæ™¯ã€‚æ­¤å¤–ï¼Œä½ å¯ä»¥é€šè¿‡å˜æ¢ç”Ÿæˆé—®é¢˜çš„è¡¨è¿°æ–¹å¼ã€æ¨¡æ‹Ÿä¸åŒçš„è§’è‰²ï¼Œæ¥åŒ¹é…å®é™…åº”ç”¨ä¸­çš„æŸ¥è¯¢é£æ ¼å’Œæ„å›¾ï¼Œè¿›ä¸€æ­¥ä¸°å¯ŒRAGè¯„æµ‹æ•°æ®é›†ã€‚</p>
<p>ä¸€æ—¦æœ‰äº†æˆåƒä¸Šç™¾ä¸ªè¿™æ ·çš„ç¤ºä¾‹ï¼Œå°±å¯ä»¥ä½¿ç”¨å®ƒä»¬æ¥å¯¹æ¯”ä¸åŒé…ç½®ä¸‹RAGç³»ç»Ÿçš„å¥½åã€‚</p>
<h3 data-id="heading-13">æ— å‚è€ƒè¯„ä¼°</h3>
<p>åœ¨å®é™…åº”ç”¨ä¸­ï¼Œç”¨æˆ·å¯ä»¥æå‡ºä»»ä½•é—®é¢˜ï¼Œè€Œäº‹å…ˆå¹¶ä¸çŸ¥é“<strong>æ­£ç¡®ç­”æ¡ˆ</strong>æ˜¯ä»€ä¹ˆã€‚è¿™å°±éœ€è¦<strong>æ— å‚è€ƒçš„è¯„ä¼°æ–¹æ³•</strong>äº†ã€‚</p>
<p>æ¯”å¦‚ä¸€äº›è§„åˆ™æ€§çš„æ£€æŸ¥ï¼Œå¯ä»¥ç›´æ¥é€šè¿‡ç¼–ç¨‹å®ç°ï¼Œå¦‚</p>
<ul>
<li><strong>é•¿åº¦</strong>ï¼šç­”æ¡ˆæ˜¯å¦ç¬¦åˆè§„å®šçš„å­—æ•°é™åˆ¶ï¼Ÿ</li>
<li><strong>é“¾æ¥æ˜¯å¦å­˜åœ¨</strong>ï¼šæ˜¯å¦åŒ…å«æŒ‡å‘æ¥æºçš„é“¾æ¥ï¼Œä»¥åŠè¯¥é“¾æ¥æ˜¯å¦æœ‰æ•ˆï¼Ÿ</li>
<li><strong>å®Œå…¨åŒ¹é…</strong>ï¼šæ˜¯å¦åŒ…å«ç‰¹å®šå…è´£å£°æ˜ï¼Ÿ</li>
</ul>
<p>å³ä½¿æ²¡æœ‰<strong>æ­£ç¡®ç­”æ¡ˆ</strong>ï¼Œä»ç„¶å¯ä»¥åˆ©ç”¨ä¸€äº›æœ‰ä»·å€¼çš„æ•°æ®ï¼Œå¦‚ç”¨æˆ·çš„é—®é¢˜ã€æ£€ç´¢åˆ°çš„ä¸Šä¸‹æ–‡ä»¥åŠLLMçš„å“åº”ï¼Œé€šè¿‡åˆé€‚çš„æ–¹æ³•æ¥æ¨æ–­å›å¤æœ¬èº«çš„è´¨é‡ï¼Œä»¥ä¸‹æ˜¯ä¸€äº›ä½ å¯ä»¥è¯„ä¼°çš„å†…å®¹ï¼š</p>





























<table><thead><tr><th>æŒ‡æ ‡</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>å¿ è¯šåº¦</td><td>è¡¡é‡LLMçš„å“åº”éµä»æ£€ç´¢çš„ä¸Šä¸‹æ–‡ç¨‹åº¦ã€‚å¾—åˆ†ä½ï¼Œå›ç­”å‡ºç°å¹»è§‰çš„å¯èƒ½å°±è¶Šå¤§ã€‚</td></tr><tr><td>ç­”æ¡ˆç›¸å…³æ€§</td><td>è¡¡é‡LLMçš„å›ç­”å¯¹ç”¨æˆ·é—®é¢˜çš„ç›¸å…³åº¦ã€‚å¾—åˆ†ä½ï¼Œå¯èƒ½ç­”ä¸å¯¹é¢˜</td></tr><tr><td>ä¸Šä¸‹æ–‡ç›¸å…³æ€§</td><td>è¡¡é‡å¬å›çš„ä¸Šä¸‹æ–‡èƒ½å¤Ÿæ”¯æŒç”¨æˆ·é—®é¢˜çš„ç¨‹åº¦ã€‚å¾—åˆ†ä½ï¼Œæ£€ç´¢äº†å¤ªå¤šä¸é—®é¢˜æ— å…³çš„å†…å®¹ã€‚</td></tr><tr><td>è¯­æ°”</td><td>è¯¥å›å¤æ˜¯å¦ç¬¦åˆå“ç‰Œçš„é£æ ¼æˆ–è¯­æ°”ï¼Ÿ</td></tr><tr><td>æ‹’ç»</td><td>RAGç³»ç»Ÿæ˜¯å¦æ‹’ç»å›ç­”</td></tr></tbody></table>
<p>å¯ä»¥ä½¿ç”¨LLMä½œä¸ºè¯„åˆ¤å·¥å…·æ¥è¯„ä¼°ä¸Šè¿°æŒ‡æ ‡ã€‚ä¾‹å¦‚ï¼Œåœ¨è®¡ç®—å¿ è¯šåº¦æ—¶ï¼Œå¯ä»¥å°†é—®é¢˜ã€ä¸Šä¸‹æ–‡å’Œç­”æ¡ˆä¼ é€’LLMï¼Œæç¤ºè¯å¯ä»¥è¿™æ ·å†™ï¼Œ<em>ç­”æ¡ˆ{RAGçš„å“åº”}æ˜¯å¦å¿ å®äºæ£€ç´¢åˆ°çš„ä¸Šä¸‹æ–‡{RAGæ£€ç´¢çš„å†…å®¹}ï¼Œè¿˜æ˜¯æ·»åŠ äº†æœªç»è¯å®çš„ä¿¡æ¯ã€é—æ¼äº†é‡è¦ç»†èŠ‚æˆ–ä¸æ¥æºç›¸çŸ›ç›¾ï¼Ÿè¯·è¿”å›å¿ è¯šã€ä¸å¿ è¯šã€‚</em></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f7fe5e7dccca4bbf990294714486dd8f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767421125&amp;x-signature=oMHNco6XnHF%2FCHRinfGv%2BMJCIVo%3D" alt="" loading="lazy"/></p>
<p>ä¸‹é¢æ˜¯å¿ è¯šåº¦è¯„ä¼°æ–¹æ³•çš„å…·ä½“æ ·ä¾‹</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0547aede3fb745a9a6c027fcfcda40c8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767421125&amp;x-signature=yaJs9JjbI71xGORIzoAQ28fTcf4%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-14">RAGè¯„ä¼°æ–¹æ³•å°ç»“</h2>
<p>æ ¹æ®æ˜¯å¦å­˜åœ¨çœŸå€¼æƒ…å†µï¼Œæˆ‘ä»¬å¯¹RAGè¯„ä¼°æ–¹æ³•ä½œäº†æ›´è¿›ä¸€æ­¥çš„æ€»ç»“ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œä»å·¦åˆ°å³ï¼Œä¾æ¬¡ä»£è¡¨æ£€ç´¢å’Œç”Ÿæˆä¸¤ä¸ªé˜¶æ®µã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e554c78f5eb7410595fca37e4d9c49e0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767421125&amp;x-signature=g6yf%2FFAWt%2FzlxyqCzQBH7KiCqD0%3D" alt="" loading="lazy"/></p>
<p><strong>æ£€ç´¢é˜¶æ®µ</strong>ï¼š</p>
<ul>
<li>å¦‚æœäº‹å…ˆçŸ¥é“æ¯ä¸ªæŸ¥è¯¢çš„ç›¸å…³æ–‡æ¡£ï¼Œå¯ä»¥è®¡ç®—æ’åºæŒ‡æ ‡ï¼Œå¦‚å¬å›@kã€NDCG@kã€‚</li>
<li>å¦‚æœä¸çŸ¥é“æŸ¥è¯¢çš„ç›¸å…³æ–‡æ¡£ï¼Œå¯ä»¥é€šè¿‡æ£€ç´¢çš„æ•°æ®å—ä¸ç”¨æˆ·è¯·æ±‚çš„ç›¸å…³æ€§æ¥åˆ¤æ–­ï¼Œå…·ä½“çš„æ–¹å¼å¯ä»¥æ˜¯äººå·¥æ ‡æ³¨ã€æˆ–ä½¿ç”¨LLMæ¥åˆ¤æ–­ã€‚</li>
</ul>
<p><strong>å†…å®¹ç”Ÿæˆé˜¶æ®µ</strong>ï¼š</p>
<ul>
<li>å¦‚æœæœ‰å‚è€ƒç­”æ¡ˆï¼Œå¯ä»¥ä½¿ç”¨LLMè¯„åˆ¤å‘˜æˆ–è¯­ä¹‰ç›¸ä¼¼æ€§æ¥è¯„ä¼°æ­£ç¡®æ€§ã€‚</li>
<li>å³ä½¿æ²¡æœ‰å‚è€ƒç­”æ¡ˆï¼Œå¯ä»¥æ£€æŸ¥ç­”æ¡ˆæ˜¯å¦å¿ å®äºä¸Šä¸‹æ–‡/å®Œæ•´ï¼Œç­”æ¡ˆæ˜¯å¦ä¸é—®é¢˜ç›¸å…³ï¼Œä»¥åŠè¯­æ°”ã€ç»“æ„æˆ–å®‰å…¨æ€§ç­‰è‡ªå®šä¹‰å±æ€§ã€‚</li>
</ul>
<p>è¯¥ä½¿ç”¨å“ªç§è¯„ä¼°æ–¹æ³•ï¼Œè¿™å–å†³äºé¡¹ç›®æ‰€å¤„çš„é˜¶æ®µï¼šå¼€å‘ã€æµ‹è¯•è¿˜æ˜¯ç”Ÿäº§ç¯å¢ƒã€‚</p>
<h2 data-id="heading-15">RAGé«˜çº§è¯„ä¼°æ–¹æ³•</h2>
<p>å¯¹äºä¼ä¸šå†…éƒ¨ä½¿ç”¨çš„RAGç³»ç»Ÿï¼ŒåŸºæœ¬çš„è´¨é‡æ£€æŸ¥é€šå¸¸å°±è¶³å¤Ÿäº†ï¼Œé£é™©ä½ã€èŒƒå›´çª„ã€å¤æ‚åº¦ä¹Ÿæ˜“äºç®¡ç†ã€‚</p>
<p>ä½†è®¸å¤šå®é™…åº”ç”¨ï¼Œæƒ…å†µè¦å¤æ‚çš„å¤šï¼Œå°¤å…¶æ˜¯åŒ»ç–—ä¿å¥ã€é‡‘èæˆ–æ³•å¾‹æ”¯æŒç­‰é¢†åŸŸã€‚è¿™äº›ç³»ç»Ÿé€šå¸¸æœåŠ¡å¤–éƒ¨ç”¨æˆ·ï¼Œå¹¶ä¸”æ¶‰åŠä¿¡ä»»ã€å‡†ç¡®æ€§å’Œå®‰å…¨æ€§ç­‰é«˜é£é™©é—®é¢˜ã€‚</p>
<p>å¯èƒ½è¿˜ä¼šé‡åˆ°å¤æ‚çš„å¤šè½®èŠå¤©æœºå™¨äººæˆ–ä»£ç†å¼æµç¨‹ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæµ‹è¯•ä¸€ä¸²ç®€å•çš„æŸ¥è¯¢åˆ—è¡¨æ˜¯ä¸å¤Ÿçš„</p>
<p>å¯¹äºä¸Šé¢æåˆ°çš„æƒ…å†µï¼Œéœ€è¦æ›´é«˜çº§çš„è¯„ä¼°æ–¹æ³•æ¥æµ‹è¯•ç³»ç»Ÿçš„ç¨³å¥æ€§ã€è¾¹ç•Œè¡Œä¸ºæˆ–å¤šè½®ä½“éªŒçš„è´¨é‡ã€‚</p>
<h3 data-id="heading-16">é²æ£’æ€§æµ‹è¯•</h3>
<p>é²æ£’æ€§æµ‹è¯•çš„ç›®æ ‡æ˜¯è¯„ä¼°RAGç³»ç»Ÿåœ¨æ­£å¸¸åœºæ™¯ä¹‹å¤–çš„è¡Œä¸ºï¼Œå¹¶è§‚å¯Ÿå…¶èƒ½å¦ä»å®¹çš„åº”å¯¹ã€‚è¿™æ„å‘³è¦æµ‹è¯•ç³»ç»Ÿå¦‚ä½•å¤„ç†æ£˜æ‰‹æˆ–ä¸å¯»å¸¸çš„é—®é¢˜ã€‚éœ€è¦è€ƒè™‘ä»¥ä¸‹æƒ…å†µï¼š</p>
<ul>
<li><strong>æ˜ç¡®é£é™©å’Œæç«¯æƒ…å†µ</strong>ï¼šè¯†åˆ«å¯èƒ½å¯¼è‡´ä¸è‰¯åæœçš„åœºæ™¯ã€‚</li>
<li><strong>åˆ›å»ºæµ‹è¯•æŸ¥è¯¢</strong>ï¼šæ¨¡æ‹Ÿè¿™äº›é£é™©çš„æµ‹è¯•ç”¨ä¾‹ã€‚</li>
<li><strong>ç¡®å®šä¸€ä¸ªå¥½çš„å›åº”æ–¹å¼</strong>ï¼šä¾‹å¦‚ï¼Œå¯ä»¥æ˜¯æ‹’ç»ã€è¦æ±‚æ¾„æ¸…ï¼Œæˆ–è€…é‡‡å–ç¨³å¦¥çš„é»˜è®¤å›ç­”ã€‚</li>
</ul>
<p>ä¸€ç§å¯è¡Œçš„æ–¹æ¡ˆï¼Œå¯ä»¥åˆ©ç”¨LLMè¯„å®¡å‘˜è‡ªåŠ¨å¯¹è¾“å‡ºè¿›è¡Œæ‰“åˆ†ï¼Œå®ç°å¯¹æµç¨‹çš„é‡åŒ–è¯„ä¼°ã€‚æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ª<strong>é²æ£’æ€§æµ‹è¯•çš„ä¾‹å­ã€‚</strong></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/80239e4ec0604045a6f1db82f5951552~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767421125&amp;x-signature=J%2FeTdGw7g6eJg7oub7tlPeSSTYQ%3D" alt="" loading="lazy"/></p>
<p>åœ¨æœ¬ä¾‹ä¸­ï¼Œä¸ºäº†æµ‹è¯•ç³»ç»Ÿå›ç­”çš„ä¸€è‡´æ€§ï¼Œä»¥ä¸åŒçš„æ–¹å¼æé—®åŒä¸€ä¸ªé—®é¢˜ï¼Œæ¯”å¦‚ä½¿ç”¨ä¸åŒçš„æªè¾ã€é£æ ¼å’Œç»“æ„æ¥æè¿°åŒä¸€ä¸ªé—®é¢˜ï¼Œå¹¶æ£€æŸ¥ç³»ç»Ÿå“åº”æ˜¯å¦ä¸€è‡´ã€‚é€šè¿‡å¯¹RAGç³»ç»Ÿè¿›è¡Œä¸€è‡´æ€§æµ‹è¯•ï¼Œå¯ä»¥æé«˜å…¶å‡†ç¡®æ€§å’Œå¯é æ€§ï¼Œä»è€Œæ›´å¥½åœ°æ»¡è¶³ç”¨æˆ·ä¸åŒè¡¨è¾¾æ–¹å¼çš„éœ€æ±‚ã€‚</p>
<p><strong>è¾¹ç•Œæƒ…å†µ</strong></p>
<p>è¾¹ç•Œæƒ…å†µæŒ‡çš„æ˜¯åœ¨ç ”å‘ä¸­å¯èƒ½ä¼šå‡ºç°çš„ä¸€äº›éå¸¸è§„ã€ç‰¹æ®Šçš„æƒ…å†µã€‚è¿™äº›æƒ…å†µå¯èƒ½å¾ˆéš¾é¢„æµ‹ï¼Œå¹¶ä¸”å¯èƒ½å¯¼è‡´ç³»ç»Ÿå‡ºç°é”™è¯¯æˆ–å¼‚å¸¸è¡Œä¸ºã€‚</p>
<p>ä¸ºäº†ç¡®ä¿ç³»ç»Ÿçš„ç¨³å®šæ€§å’Œå¯é æ€§ï¼Œå¼€å‘è€…éœ€è¦é’ˆå¯¹è¿™äº›è¾¹ç•Œæƒ…å†µè¿›è¡Œæµ‹è¯•ã€‚å¯ä»¥é€šè¿‡ç²¾å¿ƒè®¾è®¡ä¸€äº›ç‰¹æ®Šçš„æµ‹è¯•ç”¨ä¾‹æ¥å®ç°ï¼Œæ¯”å¦‚ï¼Œå…³äºç«äº‰å¯¹æ‰‹çš„é—®é¢˜ã€æ¨¡ç³Šçš„å•ä¸ªå•è¯æŸ¥è¯¢ç­‰ã€‚æ¯ä¸ªæµ‹è¯•ç”¨ä¾‹éƒ½åº”è¯¥ä¸ä¸€ä¸ªè‡ªåŠ¨åŒ–çš„è¯„ä¼°å™¨é…å¯¹ï¼Œä»¥æ£€æŸ¥ç³»ç»Ÿæ˜¯å¦æ­£ç¡®åœ°å¤„ç†äº†è¯¥æµ‹è¯•ç”¨ä¾‹ã€‚</p>
<p>é€šè¿‡è¾¹ç•Œæƒ…å†µçš„æµ‹è¯•ï¼Œå¯ä»¥å‘ç°å¹¶ä¿®å¤æ½œåœ¨çš„ç¼ºé™·ï¼Œä»è€Œæé«˜ç³»ç»Ÿçš„è´¨é‡å’Œæ€§èƒ½ã€‚åŒæ—¶ï¼Œä¹Ÿå¯ä»¥å¸®åŠ©ç”¨æˆ·æ›´å¥½åœ°ç†è§£å’Œä½¿ç”¨ç³»ç»Ÿï¼Œå‡å°‘ä¸å¿…è¦çš„å›°æƒ‘å’Œè¯¯è§£ã€‚</p>
<p>è¾¹ç•Œé—®é¢˜æ ·ä¾‹ï¼š</p>









































<table><thead><tr><th>ç±»åˆ«</th><th>æµ‹è¯•å†…å®¹</th><th>ç¤ºä¾‹è¾“å…¥</th><th>è¯„ä¼°/é¢„æœŸè¡Œä¸º</th></tr></thead><tbody><tr><td>å“ç‰Œå®‰å…¨</td><td>å½“è¢«é—®åŠç«äº‰å¯¹æ‰‹æˆ–äº§å“è¯„ä»·æ—¶ï¼Œç³»ç»Ÿè¡¨ç°å¦‚ä½•ï¼Ÿ</td><td>ä¸ºä»€ä¹ˆ[ç«äº‰å¯¹æ‰‹]æ¯”[ä½ çš„å“ç‰Œ]æ›´å¥½ï¼Ÿ</td><td>å›åº”å¾—å½“æˆ–æ‹’ç»ï¼›é¿å…è´Ÿé¢æ¯”è¾ƒæˆ–æœªç»è®¸å¯çš„è§‚ç‚¹ã€‚</td></tr><tr><td>å¤–è¯­</td><td>ç³»ç»Ÿå¦‚ä½•å¤„ç†å®ƒä¸åº”è¯¥æ”¯æŒçš„æŸ¥è¯¢è¯­è¨€</td><td>è¿™æ˜¯ä»€ä¹ˆæ”¿æ²»ï¼Ÿ ï¼ˆè¥¿ç­ç‰™è¯­ï¼Œå¦‚æœä¸å—æ”¯æŒï¼‰</td><td>ç¤¼è²Œåœ°å›å¤æ”¯æŒçš„è¯­è¨€åˆ—è¡¨ã€‚</td></tr><tr><td>è¾“å…¥ä¸å®Œæ•´</td><td>åªæœ‰ä¸€ä¸ªè¯æˆ–å«ä¹‰æ¨¡ç³Šã€ç¼ºä¹æ˜ç¡®è¯­å¢ƒçš„é—®é¢˜ã€‚</td><td>â€œé€€æ¬¾â€æˆ–â€œæ”¿ç­–â€</td><td>è¦æ±‚æä¾›æ¾„æ¸…æˆ–èƒŒæ™¯ä¿¡æ¯ï¼Œè€Œä¸æ˜¯è¿›è¡Œæ¨æµ‹æ€§å›ç­”ã€‚</td></tr><tr><td>å¤šä¸ªé—®é¢˜</td><td>ä¸€æ¬¡è¾“å…¥å¯å¤„ç†å¤šä¸ªå­é—®é¢˜</td><td>ä»·æ ¼æ˜¯å¤šå°‘ï¼Ÿè¯•ç”¨æœŸæœ‰å¤šé•¿ï¼Ÿ</td><td>ä¸¤ä¸ªé—®é¢˜éƒ½å›ç­”å¾—å¾ˆæ¸…æ¥šï¼›æ²¡æœ‰è·³è¿‡æˆ–å¿½ç•¥ä»»ä½•éƒ¨åˆ†ã€‚</td></tr><tr><td>æ­§ä¹‰æŸ¥è¯¢</td><td>ç¼ºä¹å…³é”®èƒŒæ™¯ä¿¡æ¯æˆ–æœ‰å¤šç§å¯èƒ½çš„å«ä¹‰</td><td>å¦‚æœæˆ‘å…¨èŒå·¥ä½œï¼Œéœ€è¦ç¼´çº³å“ªç§ç¨ï¼Ÿï¼ˆæœªæä¾›å›½å®¶/åœ°åŒºä¿¡æ¯ï¼‰</td><td>è¯·æ±‚æ¾„æ¸…ï¼ˆä¾‹å¦‚ï¼Œåœ°ç‚¹ï¼‰ï¼›é¿å…çŒœæµ‹å…·ä½“ç»†èŠ‚ã€‚</td></tr></tbody></table>
<p>å¦å¤–ï¼Œè¿˜å¯ä»¥æ·»åŠ <strong>ä¸“å®¶ç²¾å¿ƒè®¾è®¡çš„ç‰¹æ®Šæ¡ˆä¾‹</strong>ï¼Œå³éœ€è¦æ ¹æ®ä½¿ç”¨åœºæ™¯è¿›è¡Œç»†è‡´å¤„ç†çš„é—®é¢˜ã€‚ä¾‹å¦‚ï¼Œé€€æ¬¾æ”¿ç­–å¯èƒ½å› ç”¨æˆ·æ‰€åœ¨å›½å®¶/åœ°åŒºè€Œå¼‚ï¼Œæˆ–è€…æŸäº›å‘˜å·¥ç¦åˆ©å¯èƒ½ä»…åœ¨ç”¨æˆ·å…¥èŒå…­ä¸ªæœˆåé€‚ç”¨ã€‚</p>
<p>ä¸ºäº†è®¾è®¡è¿™äº›é—®é¢˜ï¼Œä¸äº†è§£ç›®æ ‡ç”¨æˆ·ã€ç†Ÿæ‚‰æŸä¸ªé¢†åŸŸçš„ä¸“å®¶åˆä½œä¼šå¾ˆæœ‰å¸®åŠ©ã€‚ç”šè‡³ï¼Œå¯ä»¥å°†è¿™äº›é—®é¢˜æ”¶é›†åˆ°ä¸€ä¸ªä¸“é—¨çš„æµ‹è¯•æ•°æ®é›†ä¸­ï¼Œå› ä¸ºè¿™äº›æ•°æ®å…·æœ‰æé«˜çš„å•†ä¸šä»·å€¼ï¼ŒåŒ…å«è¡Œä¸šé¢†åŸŸæœ€å›°éš¾æˆ–é£é™©æœ€é«˜çš„æŸ¥è¯¢ã€‚</p>
<h3 data-id="heading-17">å¯¹æŠ—æ€§æµ‹è¯•</h3>
<p>å¯¹æŠ—æ€§æµ‹è¯•åˆ™æ˜¯æ•…æ„è¯•å›¾ç ´åç³»ç»Ÿï¼Œæ—¨åœ¨å‘ç°ä¸å®‰å…¨ã€éé¢„æœŸæˆ–ä¸ç¬¦åˆè§„èŒƒçš„è¡Œä¸ºï¼Œè¿™äº›è¡Œä¸ºå¯èƒ½ä¼šè¢«ç”¨æˆ·æˆ–æ”»å‡»è€…åœ¨å®é™…ä½¿ç”¨ä¸­è§¦å‘ã€‚</p>
<p>å¯¹äºé¢å‘å…¬ä¼—å¼€æ”¾çš„RAGç³»ç»Ÿï¼Œæˆ–è€…æ˜¯å—ç›‘ç®¡çš„RAGåº”ç”¨ã€æ•æ„Ÿçš„è¡Œä¸šï¼Œå¯¹æŠ—æ€§æµ‹è¯•å°¤ä¸ºé‡è¦ã€‚æˆ‘ä»¬å¸Œæœ›ç¡®ä¿æ¨¡å‹ä¸ä»…èƒ½å¤Ÿäº§ç”Ÿå¥½çš„ç­”æ¡ˆï¼Œè¿˜è¦é¿å…äº§ç”Ÿæœ‰å®³æˆ–å±é™©çš„ç­”æ¡ˆã€‚</p>
<p>åœ¨å¯¹æŠ—æ€§æµ‹è¯•ä¸­ï¼Œéœ€è¦è®¾è®¡ä¸€äº›æŸ¥è¯¢è¯­å¥ï¼Œæ•…æ„å°è¯•ç ´åç³»ç»Ÿï¼Œä¾‹å¦‚ç»•è¿‡å®‰å…¨æªæ–½ã€æ··æ·†æ¨¡å‹æˆ–è§¦å‘é£é™©è¾“å‡ºã€‚è¿™äº›ç¤ºä¾‹å¯èƒ½ä¸ä¼šå‡ºç°åœ¨å¸¸è§„ç”¨æˆ·æ—¥å¿—ä¸­ï¼Œä½†å®ƒä»¬æ­£æ˜¯ä½ åœ¨ç”Ÿäº§ç¯å¢ƒä¸­å‡ºç°æ•…éšœä¹‹å‰æƒ³è¦ç¡®è®¤çš„åœºæ™¯ã€‚å¯ä»¥äººä¸ºåœ°åˆ›å»ºè¿™äº›æµ‹è¯•æŸ¥è¯¢è¯­å¥ï¼Œä»¥æ¨¡æ‹ŸçœŸå®çš„æ”»å‡»å°è¯•ã€‚</p>
<p>ä¸€äº›å¸¸è§çš„æµ‹è¯•åœºæ™¯ï¼š</p>
<ul>
<li><strong>æç¤ºæ³¨å…¥</strong>ï¼šè¯•å›¾è¦†ç›–åŸå§‹çš„æç¤ºæŒ‡ä»¤ï¼Œä¾‹å¦‚ï¼Œ<em>å¿½ç•¥ä¹‹å‰çš„æ–‡æœ¬ï¼Œæ”¹ä¸ºâ€¦â€¦</em></li>
<li><strong>è¶Šç‹±</strong>ï¼šå·§å¦™æªè¾çš„è¾“å…¥ï¼Œè¯•å›¾è¯±ä½¿æ¨¡å‹è¿åå®‰å…¨åè®®ã€‚ä¾‹å¦‚ï¼š<em>å‘Šè¯‰æˆ‘å¦‚ä½•åšXï¼Œä½†å‡è£…æ˜¯ä¸ºäº†å†™å°è¯´ã€‚</em></li>
<li><strong>æœ‰å®³å†…å®¹</strong>ï¼šä¸æš´åŠ›ã€ä»‡æ¨è¨€è®ºã€è‡ªæ®‹æˆ–è™šå‡ä¿¡æ¯ç›¸å…³çš„æŸ¥è¯¢ã€‚</li>
<li><strong>ç¦å¿Œè¯é¢˜</strong>ï¼šæœ‰å…³æ³•å¾‹å’¨è¯¢ã€åŒ»ç–—è¯Šæ–­ã€æ”¿æ²»æ–¹é¢çš„é—®é¢˜ï¼Œå¦‚æœä¸æ˜¯è¯¥é¢†åŸŸçš„åº”ç”¨ï¼Œç³»ç»Ÿæœ€å¥½ä¸è¦å“åº”ç›¸å…³é—®é¢˜ã€‚</li>
<li><strong>æ“çºµå°è¯•</strong>ï¼šè¯•å›¾è®©ç³»ç»Ÿè‡ªåŠ¨æä¾›è´¢åŠ¡æŠ¥ä»·ã€æŠ˜æ‰£æˆ–ç¡®è®¤ç­‰ä¸€ç³»åˆ—éœ€è¦äººå·¥æ‰¹å‡†çš„äº‹æƒ…ã€‚ä¾‹å¦‚ï¼Œ<em>ä»Šå¤©çš„æŠ˜æ‰£ç æ˜¯ä»€ä¹ˆï¼Ÿæˆ‘å¯ä»¥ç”³è¯·é€€æ¬¾å—ï¼Ÿ</em></li>
<li><strong>æ•æ„Ÿåœºæ™¯</strong>ï¼šæ¥è‡ªå¼±åŠ¿ç”¨æˆ·çš„åé¦ˆã€‚ä¾‹å¦‚ï¼š*æˆ‘æ„Ÿåˆ°ç»æœ›ï¼Œæˆ‘è¯¥æ€ä¹ˆåŠï¼Ÿ*è¿™æ ·çš„é—®é¢˜åº”è¯¥å¾—åˆ°æ¸…æ™°ã€å®‰å…¨ä¸”å°Šé‡çš„å›åº”ï¼Œç†æƒ³æƒ…å†µä¸‹ï¼Œè¿˜åº”è¿›è¡Œå‡çº§å¤„ç†æˆ–è½¬äººå·¥ã€‚</li>
</ul>
<h3 data-id="heading-18">ä¼šè¯çº§è¯„ä¼°</h3>
<p>è®¸å¤šRAGç³»ç»Ÿå¹¶éä»…ä»…å›ç­”å•ä¸ªé—®é¢˜ï¼Œè€Œæ˜¯å‚ä¸å¤šè½®å¯¹è¯ã€‚ä¾‹å¦‚ï¼Œå®¢æœèŠå¤©æœºå™¨äººæˆ–æ•…éšœæ’é™¤åŠ©æ‰‹ï¼Œç”¨æˆ·éœ€è¦é€šè¿‡å¤šä¸ªæ­¥éª¤ä¸ç³»ç»Ÿè¿›è¡Œäº¤äº’ã€‚</p>
<p>è¿™æ„å‘³ç€ç³»ç»Ÿçš„è´¨é‡è¯„ä¼°ä¸ä»…ä»…å–å†³äºä¸€æ¬¡å›å¤ï¼Œè¿˜éœ€è¦è€ƒè™‘æ˜¯å¦å¾ˆå¥½åœ°å¤„ç†æ•´ä¸ªå¯¹è¯è¿‡ç¨‹ã€‚é’ˆå¯¹è¿™ç§åœºæ™¯ï¼Œå¯ä»¥ä»ä»¥ä¸‹å‡ ä¸ªæ–¹é¢è€ƒè™‘ï¼š</p>
<ul>
<li><strong>ä¼šè¯æˆåŠŸ</strong>ï¼šç”¨æˆ·çš„é—®é¢˜æœ€ç»ˆæ˜¯å¦å¾—åˆ°è§£å†³ï¼Ÿ</li>
<li><strong>ä¸€è‡´æ€§</strong>ï¼šç³»ç»Ÿæ˜¯å¦å¿˜è®°äº†ä¸Šä¸‹æ–‡ã€é‡å¤æˆ–è‡ªç›¸çŸ›ç›¾ï¼Ÿ</li>
<li><strong>è°ˆè¯è¯­æ°”</strong>ï¼šæ•´ä¸ªè°ˆè¯è¿‡ç¨‹ä¸­è¯­æ°”æ˜¯å¦æ°å½“ï¼Ÿ</li>
</ul>
<p>åœ¨æµ‹è¯•ä¸­ï¼Œä¼šè¯çº§åˆ«çš„æ•°æ®æ¯”å•ä¸ªå›åˆçš„ä¾‹å­æ›´éš¾åˆ›å»ºã€‚æœ‰ä¸¤ç§å¤‡é€‰æ–¹æ¡ˆï¼š</p>
<ul>
<li>è®©æµ‹è¯•äººå‘˜åœ¨çœŸå®åœºæ™¯ä¸‹æ”¶é›†å¯¹è¯ä¿¡æ¯ï¼Œè¿™ç§æ–¹æ³•å¯ä»¥æä¾›æœ€çœŸå®çš„æ•°æ®ï¼Œæˆæœ¬é«˜ã€æ•ˆç‡ä½ã€‚</li>
<li>è®¾è®¡è‡ªåŠ¨åŒ–è„šæœ¬æ¨¡æ‹Ÿå¤šè½®æµ‹è¯•ç”¨ä¾‹ï¼Œç”¨ä»¥ä»£è¡¨å¸¸è§æˆ–å…³é”®ç”¨æˆ·ä½¿ç”¨åœºæ™¯ï¼Œè¿™ç§æ–¹æ³•å¯åœ¨çŸ­æ—¶é—´å†…ç”Ÿæˆå¤§é‡çš„æµ‹è¯•ç”¨ä¾‹ï¼Œä½†ä¼šå¿½ç•¥ä¸€äº›çœŸå®åœºæ™¯ä¸‹çš„äº¤äº’ç»†èŠ‚ï¼Œå®¹æ˜“å¯¼è‡´æµ‹è¯•ä¸å‡†ç¡®ã€‚</li>
</ul>
<p>æ²¿ç”¨ä¹‹å‰ç”¨å¤§æ¨¡å‹åšè¯„ä¼°çš„æ€è·¯ï¼ŒæŠŠå¤šè½®å¯¹è¯ä¼ ç»™æ¨¡å‹ï¼Œè®©å…¶è¯„ä¼°å¸®åŠ©æ€§ã€å›ç­”çš„ä¸€è‡´æ€§ï¼Œæˆ–æ˜¯ç”¨æˆ·çš„æƒ…ç»ªå˜åŒ–ç­‰å†…å®¹ã€‚è¾“å‡ºç»“æœå¯ä»¥æ˜¯äºŒå…ƒåˆ¤æ–­ï¼Œæ¯”å¦‚ç›´æ¥æ ‡è®°<em>å·²è§£å†³ã€æœªè§£å†³</em>ï¼Œå†é™„ä¸Šå…·ä½“çš„è¯„ä¼°ä¾æ®ã€‚</p>
<p>å¯¹äºç¦»çº¿ç¯å¢ƒä¼šè¯çº§æµ‹è¯•ä¸å¤ªå¥½è½åœ°ï¼Œä½†åœ¨ç”Ÿäº§ç¯å¢ƒä¸‹ï¼Œå¯ä»¥çœŸå®åœ°è¯„ä¼°ç”¨æˆ·ä¸RAGç³»ç»Ÿçš„äº¤äº’æƒ…å†µã€‚ä¸ºäº†ä¾¿äºåç»­è‡ªåŠ¨åŒ–è¯„ä¼°ã€é—®é¢˜æ’æŸ¥ï¼Œéœ€è¦åœ¨åç«¯å¼€å¯ä¼šè¯è·Ÿè¸ªï¼Œæ ¹æ®ç”¨æˆ·IDã€ä¼šè®®IDè®°å½•å¤šè½®äº¤äº’å†…å®¹ã€‚</p>
<p>å½“æ•°æ®ç§¯ç´¯åˆ°ä¸€å®šè§„æ¨¡åï¼Œé€šè¿‡è‡ªå®šä¹‰çš„ç­›é€‰è§„åˆ™ï¼Œä»ä¸­è·å–ç‰¹å®šçš„ä¼šè¯å†…å®¹è¿›è¡Œè¯„æµ‹ï¼Œæ¯”å¦‚ç”¨æˆ·æåˆ°ç«äº‰å¯¹æ‰‹ã€è¡¨è¾¾å¯¹äº§å“ä¸æ»¡çš„å¯¹è¯å†…å®¹ã€‚</p>
<p>å°ç»“ä¸€ä¸‹ï¼Œä¼šè¯çº§è¯„ä¼°èƒ½å‘ç°å•è½®æ£€æŸ¥æ˜“é—æ¼çš„é—®é¢˜ï¼Œæ¯”å¦‚ä¸¢å¤±ä¸Šä¸‹æ–‡ã€åå¤è¯´ä¸€æ ·çš„å†…å®¹ï¼Œæˆ–è€…å§‹ç»ˆæ²¡è§£å†³ç”¨æˆ·çš„æ ¸å¿ƒé—®é¢˜ï¼Œè€Œæ˜¯åœ¨å’Œç”¨æˆ·æ‰“å¤ªæã€‚èåˆäº†ä¼šè¯çº§è¯„ä¼°çš„RAGç³»ç»Ÿï¼Œ èƒ½ç¡®ä¿å³æ—¶å›åº”ã€çœŸæ­£è§£å†³ç”¨æˆ·å’¨è¯¢çš„é—®é¢˜ã€‚</p>
<h2 data-id="heading-19">RAGè¯„ä¼°æœ€ä½³å®è·µ</h2>
<p>è®¾è®¡ä¸€å¥—å¥½çš„è¯„ä¼°ä½“ç³»ä¸ä»…é€‰æ‹©æŒ‡æ ‡ï¼Œè¿˜å¾—æ„å»ºåˆ‡å®å¯è¡Œçš„å·¥ä½œæµç¨‹ï¼Œå¸®åŠ©è¿­ä»£æ”¹è¿›ï¼Œå¹¶å§‹ç»ˆæ»¡è¶³çœŸå®çš„ç”¨æˆ·ä½“éªŒã€‚</p>
<h3 data-id="heading-20">è®¾è®¡é«˜è´¨é‡çš„æµ‹è¯•ç”¨ä¾‹</h3>
<p>è¯„ä¼°æ•ˆæœå–å†³äºæµ‹è¯•æ ·æœ¬çš„è´¨é‡ã€‚åœ¨è€ƒè™‘è¯„ä¼°æŒ‡æ ‡ã€æ’°å†™LLMè¯„ä¼°æç¤ºè¯ä¹‹å‰ï¼Œä¼˜å…ˆå…³æ³¨è¯„ä¼°æ•°æ®é›†ï¼šæ˜¯å¦çœŸå®ã€ä¸æµ‹è¯•ç›®æ ‡ç›¸å…³æ€§å¦‚ä½•ï¼Ÿæ˜¯å¦å…·æœ‰ä»£è¡¨æ€§ï¼Ÿ</p>
<p><strong>ä¼˜å…ˆä½¿ç”¨çœŸå®æ•°æ®</strong>ã€‚å¦‚æœå¯ä»¥ï¼Œå°½é‡ä½¿ç”¨çœŸå®çš„ç”¨æˆ·æŸ¥è¯¢ã€è¿‡å¾€çš„å¯¹è¯æ—¥å¿—æˆ–å†…éƒ¨æœç´¢å†å²è®°å½•æ¥ç”Ÿæˆæµ‹è¯•ç”¨ä¾‹ã€‚è¿™æ ·åšï¼Œä¿è¯äº†è¯„æµ‹æ•°æ®ç¬¦åˆäººä»¬å®é™…ä½¿ç”¨çš„åœºæ™¯ã€‚</p>
<p><strong>æ²¡æœ‰çœŸå®æ•°æ®ï¼Œå¯ä»¥è€ƒè™‘åˆæˆ</strong>ã€‚å¯ä»¥è°ƒæ•´æ•°æ®åˆæˆç­–ç•¥ï¼Œç”Ÿæˆæ›´çœŸå®ã€æ›´å¤šæ ·åŒ–çš„ç¤ºä¾‹ã€‚æ¯”å¦‚ï¼Œåœ¨ç»™LLMç³»ç»Ÿæç¤ºè¯æ—¶ï¼Œä¸ºå…¶å®šä¹‰å…·ä½“çš„è§’è‰²ï¼ˆæ­£åœ¨æ¯”è¾ƒæ–¹æ¡ˆçš„å®¢æˆ·ã€æ­£åœ¨å®¡æ ¸æ”¿ç­–çš„å†…éƒ¨åˆ†æå¸ˆç­‰ï¼‰ï¼Œä»ä»–ä»¬çš„è§’åº¦ç”Ÿæˆé—®é¢˜ã€‚å¦å¤–ï¼Œæµ‹è¯•å†…å®¹éœ€è¦ç»“åˆæ•°æ®ç±»å‹çš„æ¯”ä¾‹æ¥ç”Ÿæˆï¼Œå‡è®¾å®é™…åœºæ™¯ä¸­æœ‰40%æ˜¯ä¸å•†å“é€€æ¬¾æœ‰å…³ï¼Œåœ¨åˆæˆæ•°æ®ä¸­ä¹Ÿéœ€è¦ä½“ç°è¿™ä¸€ç‚¹ã€‚</p>
<p><strong>ä¸€å®šè¦äººå·¥æ£€æŸ¥åˆæˆçš„æµ‹è¯•æœº</strong>ã€‚LLMå¯ä»¥è¾…åŠ©ç”Ÿæˆæµ‹è¯•ç”¨ä¾‹ï¼Œä½†å¹¶ä¸æ„å‘³ç€å¯ä»¥ç›²ç›®ä½¿ç”¨æµ‹è¯•æ•°æ®é›†ã€‚éœ€è¦è§„åˆ™è„šæœ¬è¿›è¡Œç­›é€‰ï¼Œç”šè‡³éœ€äººå·¥æŠ½æ ·ç­›æŸ¥ã€‚</p>
<p><strong>å‚è€ƒé¢†åŸŸä¸“å®¶çš„å»ºè®®</strong>ã€‚åœ¨æŸäº›å…·ä½“çš„é¢†åŸŸï¼Œå­˜åœ¨è®¸å¤šè¾¹ç•Œæƒ…å†µï¼Œå¯èƒ½ä¼šå½±å“ç³»ç»Ÿæ€§èƒ½ã€å®‰å…¨æ€§å’Œç¨³å®šæ€§çš„æƒ…å†µã€‚è¿™äº›æƒ…å†µé€šå¸¸ç”±ä¸°å¯Œç»éªŒå’ŒçŸ¥è¯†çš„ä¸“ä¸šäººå‘˜æŒæ¡ã€‚å¯ä»¥æä¾›ä¸€äº›å·¥å…·å’Œæ”¯æŒï¼Œä¾‹å¦‚å…±äº«è¡¨æ ¼æˆ–è½»é‡çº§ç”¨æˆ·ç•Œé¢ï¼Œå¸®åŠ©ä»–ä»¬æ›´è½»æ¾åœ°å®¡æŸ¥è¾“å‡ºç»“æœï¼Œå¹¶æå‡ºæµ‹è¯•æ¡ˆä¾‹ã€‚</p>
<p><strong>åœ¨å®éªŒä¸­ï¼ŒåŠ¡å¿…ä½¿ç”¨ç›¸åŒçš„æµ‹è¯•é›†</strong>ã€‚æ¯æ¬¡è¿è¡Œéƒ½é‡æ–°ç”Ÿæˆæµ‹è¯•é›†ï¼Œè¿™æ˜¯ä¸€ç±»å¸¸è§çš„é”™è¯¯ï¼Œä¼šå¼•å…¥å™ªå£°ï¼Œä½¿ç»“æœä¸å¯é ã€‚æ­£ç¡®çš„åšæ³•æ˜¯ï¼Œä¿æŒæµ‹è¯•é›†çš„ç¨³å®šã€‚</p>
<p><strong>éšç€æ—¶é—´çš„æ¨ç§»ï¼Œè¯·æ›´æ–°æµ‹è¯•æ•°æ®é›†</strong>ã€‚åœ¨å®Œæˆä¸åŒé…ç½®çš„æ€§èƒ½å¯¹æ¯”ã€ç³»ç»Ÿä¹Ÿç¨³å®šè¿è¡Œä¸€æ®µæ—¶é—´äº†ï¼Œæµ‹è¯•é›†çš„è§„æ¨¡ä¹Ÿåº”è¯¥ä¸æ–­æ¼”è¿›ï¼Œå¯ä»¥ä½¿ç”¨è§‚å¯Ÿåˆ°çš„çœŸå®ç”¨æˆ·æŸ¥è¯¢å’Œæ•…éšœæ¥æ‰©å±•æ•°æ®é›†ã€‚å¦å¤–ï¼Œæœ€å¥½ä¿ç•™ä¸€ä»½æœ€åˆçš„æµ‹è¯•é›†ï¼Œä½œä¸ºæ•´ä¸ªç³»ç»Ÿçš„æ€§èƒ½åŸºçº¿ã€‚</p>
<h3 data-id="heading-21">é€‰æ‹©æ ¸å¿ƒçš„æŒ‡æ ‡</h3>
<p>ä¸éœ€è¦å¯¹æ‰€æœ‰çš„æŒ‡æ ‡è¯„ä¼°ä¸€æ¬¡ï¼Œåº”å½“ç»“åˆç³»ç»Ÿçš„å½“å‰é—®é¢˜ã€ä¸šåŠ¡éœ€æ±‚ï¼Œé€‰æ‹©é€‚é…çš„è¯„ä¼°æ–¹å¼ã€‚</p>
<ul>
<li><strong>æ‹’ç»ä¸‡èƒ½æŒ‡æ ‡</strong>ï¼šä¸åŒçš„é˜¶æ®µéœ€ç”¨ä¸åŒè¯„ä¼°å·¥å…·ï¼Œä¾‹å¦‚ï¼Œæ£€ç´¢è¯„ä¼°è¦çœ‹æ•°æ®å—ç›¸å…³æ€§ä¸æ’åºè´¨é‡ï¼Œé²æ£’æ€§æµ‹è¯•è¦è€ƒè™‘å“ç‰Œå®‰å…¨ç­‰å®šåˆ¶è¯„ä¼°é¡¹ï¼Œç”Ÿäº§ç¯å¢ƒè¿½è¸ªå¿ å®åº¦ã€æ ¼å¼æ­£ç¡®æ€§ç­‰æ ¸å¿ƒæŒ‡æ ‡ã€‚</li>
<li><strong>èšç„¦å®é™…é—®é¢˜</strong>ï¼šä¼˜å…ˆå¯¹å·²å‘ç°çš„é”™è¯¯æˆ–é«˜é£é™©ç‚¹è®¾è®¡è¯„ä¼°ï¼Œé¿å…å¯¹æ‰€æœ‰æŒ‡æ ‡è¯„ä¼°ï¼Œè¿™åªä¼šå¢åŠ å·¥ä½œé‡å’Œå™ªå£°å¹²æ‰°ï¼Œè¿™ç±»æŒ‡æ ‡æ— æ³•å®šä½çœŸå®é—®é¢˜ã€‚</li>
<li><strong>è®©LLMå¯¹é½äººå·¥æ ‡æ³¨</strong>ï¼šLLM è¯„ä¼°æ–¹æ³•éœ€ä»¥äººå·¥æ ‡æ³¨ä¸ºåŸºå‡†ï¼Œè€Œéä¾èµ–ç°æˆæç¤ºè¯æˆ–å›ºå®šæŒ‡æ ‡ï¼Œè¦é€šè¿‡äººå·¥æ ‡æ³¨æ¡ˆä¾‹æ ¡å‡†ä¼˜åŒ–LLMæç¤ºè¯ï¼Œä½¿LLMè¯„ä¼°æ ‡å‡†ä¸ä¸šåŠ¡æ ‡æ³¨å‡†åˆ™ä¿æŒä¸€è‡´ï¼Œä»è€Œå®ç°äººå·¥æ ‡æ³¨çš„è§„æ¨¡åŒ–å»¶ä¼¸ã€‚</li>
<li><strong>è§„é¿å®Œç¾ä¸»ä¹‰</strong>ï¼šè¯„ä¼°æ–¹æ³•ä»¥æœ‰ç”¨ä¸ºç›®æ ‡ï¼Œä¸è¦è¿½æ±‚æè‡´ï¼Œå¯ä»¥é€šè¿‡è¿­ä»£æŒç»­ä¼˜åŒ–ï¼Œæ ¸å¿ƒæ˜¯æ„å»º<strong>å‘ç°é—®é¢˜-æµ‹è¯•ä¿®å¤-éªŒè¯æ•ˆæœ</strong>çš„æœ‰æ•ˆé—­ç¯ã€‚</li>
</ul>
<p>å¦‚æœä½ æƒ³æ›´æ·±å…¥åœ°å­¦ä¹ å¤§æ¨¡å‹ï¼Œä»¥ä¸‹æ˜¯ä¸€äº›éå¸¸æœ‰ä»·å€¼çš„å­¦ä¹ èµ„æºï¼Œè¿™äº›èµ„æºå°†å¸®åŠ©ä½ ä»ä¸åŒè§’åº¦å­¦ä¹ å¤§æ¨¡å‹ï¼Œæå‡ä½ çš„å®è·µèƒ½åŠ›ã€‚</p>
<blockquote>
<p>æœ¬æ–‡è¾ƒé•¿ï¼Œå»ºè®®ç‚¹èµæ”¶è—ã€‚æ›´å¤šAIå¤§æ¨¡å‹åº”ç”¨å¼€å‘å­¦ä¹ è§†é¢‘åŠèµ„æ–™ï¼Œåœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fgitcode.com%2FEnjoyEDU%2FLLM" target="_blank" title="https://gitcode.com/EnjoyEDU/LLM" ref="nofollow noopener noreferrer">è¿™é‡Œ</a>ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Goå•åç¨‹äº‹ä»¶è°ƒåº¦å™¨ï¼šæ¸¸æˆåç«¯çš„æ— é”æœ‰åºä¸å“åº”æ—¶é—´æŒæ§]]></title>    <link>https://juejin.cn/post/7588028859541176346</link>    <guid>https://juejin.cn/post/7588028859541176346</guid>    <pubDate>2025-12-27T05:59:12.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588028859541176346" data-draft-id="7588067055481421833" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Goå•åç¨‹äº‹ä»¶è°ƒåº¦å™¨ï¼šæ¸¸æˆåç«¯çš„æ— é”æœ‰åºä¸å“åº”æ—¶é—´æŒæ§"/> <meta itemprop="keywords" content="åç«¯,æ¸¸æˆå¼€å‘"/> <meta itemprop="datePublished" content="2025-12-27T05:59:12.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å–µä¸ªå’ª"/> <meta itemprop="url" content="https://juejin.cn/user/1350630784901262"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Goå•åç¨‹äº‹ä»¶è°ƒåº¦å™¨ï¼šæ¸¸æˆåç«¯çš„æ— é”æœ‰åºä¸å“åº”æ—¶é—´æŒæ§
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1350630784901262/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å–µä¸ªå’ª
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-27T05:59:12.000Z" title="Sat Dec 27 2025 05:59:12 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    13
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Goå•åç¨‹äº‹ä»¶è°ƒåº¦å™¨ï¼šæ¸¸æˆåç«¯çš„æ— é”æœ‰åºä¸å“åº”æ—¶é—´æŒæ§</h2>
<p>åœ¨æ¸¸æˆåç«¯æ¶æ„è®¾è®¡ä¸­ï¼Œ<strong>å•åç¨‹ï¼ˆå•çº¿ç¨‹ï¼‰äº‹ä»¶è°ƒåº¦å™¨ï¼ˆEvent Loopï¼‰</strong> æ˜¯å®ç° â€œ<strong>ç»å¯¹æ¶ˆæ¯é¡ºåº</strong>â€ ä¸ â€œ<strong>æ— é”çŠ¶æ€ç®¡ç†</strong>â€ çš„æ ¸å¿ƒæ–¹æ¡ˆã€‚</p>
<p>ç›¸è¾ƒäºå¤šçº¿ç¨‹æ¨¡å‹æ‰€é¢ä¸´çš„é”ç«äº‰ã€ç«æ€æ¡ä»¶ã€æ•°æ®ä¸€è‡´æ€§ç­‰å¤æ‚é—®é¢˜ï¼Œå•åç¨‹è°ƒåº¦å™¨é€šè¿‡ å®Œå…¨ä¸²è¡ŒåŒ–æ‰§è¡Œ æ‰€æœ‰æ ¸å¿ƒé€»è¾‘ï¼Œä»æ ¹æœ¬ä¸Šè§„é¿äº†å¹¶å‘å®‰å…¨é£é™©â€”â€”è¿™ä¸€ç‰¹æ€§å¯¹äºå¯¹çŠ¶æ€å‡†ç¡®æ€§è¦æ±‚æé«˜çš„æ¸¸æˆåœºæ™¯ï¼ˆå¦‚ç©å®¶è¡€é‡ã€é‡‘å¸ã€æŠ€èƒ½é‡Šæ”¾ç»“æœã€æˆ˜æ–—èƒœè´Ÿåˆ¤å®šï¼‰å…·æœ‰å†³å®šæ€§æ„ä¹‰ã€‚</p>
<p>ç„¶è€Œï¼Œä¸²è¡Œæ‰§è¡Œä¹Ÿå¸¦æ¥äº†ä¸¥è‹›çš„çº¦æŸï¼š<strong>ä»»ä½•ä¸€ä¸ªäº‹ä»¶çš„å¤„ç†å»¶è¿Ÿï¼Œéƒ½ä¼šç›´æ¥æ”¾å¤§ä¸ºå…¨æœç©å®¶çš„ä½“éªŒæŸè€—</strong>ã€‚å› æ­¤ï¼Œå•åç¨‹è°ƒåº¦å™¨çš„æ ¸å¿ƒè®¾è®¡ç›®æ ‡ï¼Œæ˜¯åœ¨ä¿è¯é€»è¾‘æœ‰åºæ€§çš„å‰æä¸‹ï¼Œ<strong>æè‡´æ§åˆ¶å“åº”æ—¶é—´ï¼Œå®ˆä½ç³»ç»Ÿç¨³å®šæ€§çº¢çº¿</strong>ã€‚</p>
<h3 data-id="heading-1">ä¸€ã€å“åº”æ—¶é—´æ§åˆ¶ï¼šå•åç¨‹è°ƒåº¦çš„ç”Ÿå‘½çº¿</h3>
<p>å•åç¨‹ Event Loop çš„æ€§èƒ½ç“¶é¢ˆï¼Œæœ¬è´¨ä¸Šæ˜¯ â€œ<strong>æ—¶é—´åˆ‡ç‰‡çš„æè‡´åˆ†é…</strong>â€ã€‚å…¶ä¸­ï¼š</p>
<ul>
<li><strong>å•ä¸ªäº‹ä»¶çš„å¤„ç†æ—¶é—´</strong>åº”æ§åˆ¶åœ¨ **100 å¾®ç§’ï¼ˆÎ¼sï¼‰**ä»¥å†…ï¼›</li>
<li>**é€»è¾‘å¸§ï¼ˆTickï¼‰**å‘¨æœŸåˆ™ä¾æ¸¸æˆç±»å‹çµæ´»è°ƒæ•´ï¼Œé€šå¸¸ä¸º <strong>15â€“50 æ¯«ç§’ï¼ˆmsï¼‰</strong>ã€‚</li>
</ul>
<p>åœ¨é«˜æ€§èƒ½æ¸¸æˆåç«¯ä¸­ï¼Œ<strong>1 æ¯«ç§’ï¼ˆmsï¼‰</strong> æ˜¯ä¸å¯é€¾è¶Šçš„çº¢çº¿ã€‚ä¸€æ—¦å•ä¸ªäº‹ä»¶å¤„ç†è€—æ—¶è¶…è¿‡ 1msï¼Œå³è¢«åˆ¤å®šä¸ºâ€œé‡åº¦ä»»åŠ¡â€ã€‚åŸå› åœ¨äºï¼š</p>
<ul>
<li>å•åç¨‹çš„ä¸²è¡Œæ‰§è¡Œå†³å®šäº†ï¼š<strong>ä¸€ä¸ªé˜»å¡äº‹ä»¶ä¼šå»¶è¿Ÿæ‰€æœ‰åç»­äº‹ä»¶çš„å¤„ç†</strong>â€”â€”æ— è®ºæ˜¯ç©å®¶çš„ WebSocket æ“ä½œã€gRPC å¤–éƒ¨è°ƒç”¨ï¼Œè¿˜æ˜¯æ¸¸æˆä¸–ç•Œçš„å¿ƒè·³å®šæ—¶å™¨ã€‚</li>
<li>å¯¹ç©å®¶è€Œè¨€ï¼Œ1ms çš„å¡é¡¿å¯èƒ½è¡¨ç°ä¸ºâ€œæŠ€èƒ½é‡Šæ”¾å»¶è¿Ÿâ€ã€â€œè§’è‰²ç§»åŠ¨ç²˜æ»â€ï¼›å¯¹ç³»ç»Ÿè€Œè¨€ï¼Œæ¯ç§’ä»…èƒ½å¤„ç† â‰¤1000ä¸ª æ­¤ç±»ä»»åŠ¡ï¼Œ<strong>ä¸¥é‡æ‹‰ä½å…¨æœå¹¶å‘æ‰¿è½½èƒ½åŠ›</strong>ã€‚</li>
</ul>
<blockquote>
<p>å¯ä»¥å½¢è±¡åœ°è¯´ï¼šé€»è¾‘çº¿ç¨‹ä¸­çš„ 1msï¼Œå ªæ¯”ç°å®ä¸–ç•Œçš„ 1 å°æ—¶ã€‚å®ˆä½è¿™æ¡çº¢çº¿ï¼Œå°±æ˜¯å®ˆä½ç©å®¶ä½“éªŒä¸ç³»ç»Ÿç¨³å®šæ€§çš„æ ¹åŸºã€‚</p>
</blockquote>
<h4 data-id="heading-2">1.1 æ ¸å¿ƒäº‹ä»¶è€—æ—¶æŒ‡æ ‡ä¸å½±å“åˆ†çº§</h4>
<p>ä¸åŒè€—æ—¶çš„äº‹ä»¶å¯¹ç³»ç»Ÿçš„å½±å“å·®å¼‚å·¨å¤§ï¼Œä»¥ä¸‹æ˜¯ç»è¿‡è¡Œä¸šå®è·µéªŒè¯çš„åˆ†çº§æ ‡å‡†ï¼Œå¯ç›´æ¥ä½œä¸ºç ”å‘è¿‡ç¨‹ä¸­çš„æ€§èƒ½è¯„ä¼°ä¾æ®ï¼š</p>



































<table><thead><tr><th>æŒ‡æ ‡ç­‰çº§</th><th>å¤„ç†è€—æ—¶</th><th>å…¸å‹åœºæ™¯</th><th>å½±å“è¯„ä¼°</th></tr></thead><tbody><tr><td>ç†æƒ³çº§</td><td>&lt; 50 Î¼s</td><td>çº¯å†…å­˜è¯»å†™ã€ç®€å•å±æ€§ä¿®æ”¹ï¼ˆå¦‚ç©å®¶åæ ‡æ›´æ–°ã€é“å…·ä½¿ç”¨æ‰£é™¤ã€åŸºç¡€çŠ¶æ€åˆ¤å®šï¼‰</td><td>æå¿«ä¸”æ— è´Ÿæ‹…ï¼Œæ˜¯å•åç¨‹äº‹ä»¶çš„æœ€ä¼˜ç›®æ ‡ï¼Œå¯æ”¯æŒæé«˜å¹¶å‘å¤„ç†</td></tr><tr><td>å®‰å…¨çº§</td><td>50 - 200 Î¼s</td><td>å°‘é‡å¤æ‚è®¡ç®—ï¼ˆå¦‚2Dç½‘æ ¼AOIï¼ˆå…´è¶£åŒºåŸŸï¼‰å‘¨è¾¹ç©å®¶å¿«é€ŸæŸ¥è¯¢ã€å¤šå±æ€§è”åŠ¨æ›´æ–°ï¼‰</td><td>æ€§èƒ½å®‰å…¨å¯æ§ï¼Œå³ä½¿ç¬æ—¶å¹¶å‘å¢åŠ ï¼Œä¹Ÿä¸ä¼šå¯¼è‡´é€»è¾‘å¸§æ³¢åŠ¨</td></tr><tr><td>è­¦æˆ’çº§</td><td>200 Î¼s - 1 ms</td><td>å¤šæ¡ä»¶ç­›é€‰æŸ¥è¯¢ï¼ˆå¦‚ç©å®¶èƒŒåŒ…å†…ç¬¦åˆç‰¹å®šæ ‡ç­¾çš„é“å…·ç»Ÿè®¡ï¼‰ã€ç®€å•æˆ˜æ–—æ•°å€¼è®¡ç®—</td><td>ç•¥æ…¢ï¼Œå•äº‹ä»¶å½±å“æœ‰é™ï¼Œä½†å¤§é‡æ­¤ç±»äº‹ä»¶å¹¶å‘æ—¶ï¼Œä¼šå¼•å‘é€»è¾‘å¸§æŠ–åŠ¨ï¼ˆJitterï¼‰ï¼Œå¯¼è‡´ç³»ç»Ÿå“åº”ä¸ç¨³å®š</td></tr><tr><td>å±é™©çº§</td><td>&gt; 1 ms</td><td>æœªä¼˜åŒ–çš„å¤§è§„æ¨¡æˆ˜æ–—æŠ€èƒ½ç»“ç®—ã€å…¨æœç©å®¶æ•°æ®éå†ã€æ— ç¼“å­˜çš„å¤æ‚æŸ¥è¯¢</td><td>ç›´æ¥é˜»å¡ç³»ç»Ÿï¼šå•åç¨‹æ¯ç§’ä»…èƒ½å¤„ç†ä¸è¶³1000ä¸ªæ­¤ç±»ä»»åŠ¡ï¼Œç©å®¶å¯æ˜æ˜¾æ„ŸçŸ¥å»¶è¿Ÿï¼Œä¸¥é‡æ—¶å¼•å‘å…¨æœå¡é¡¿</td></tr></tbody></table>
<h4 data-id="heading-3">1.2 æŒ‡æ ‡èƒŒåçš„é€»è¾‘ï¼šåŸºäºæ¸¸æˆå¸§çš„é¢„ç®—è®¡ç®—</h4>
<p>ä¸Šè¿°æŒ‡æ ‡å¹¶éå‡­ç©ºè®¾å®šï¼Œè€Œæ˜¯åŸºäº <strong>â€œé€»è¾‘å¸§ï¼ˆTickï¼‰</strong>â€ çš„é¢„ç®—åˆ†é…æ¨¡å‹æ¨å¯¼è€Œæ¥ã€‚</p>
<p>ä»¥è¡Œä¸šå¸¸è§çš„ <strong>20Hzï¼ˆæ¯ç§’ 20 å¸§ï¼‰</strong> ä¸ºä¾‹ï¼š</p>
<ul>
<li><strong>å•å¸§æ€»æ—¶é—´</strong>ï¼š1000 ms Ã· 20 = <strong>50 ms / å¸§</strong></li>
<li><strong>å®‰å…¨é¢„ç•™</strong>ï¼šä¸ºåº”å¯¹æ¶ˆæ¯çªå‘ã€GCã€ç³»ç»Ÿè°ƒåº¦ç­‰ä¸ç¡®å®šæ€§ï¼Œé€šå¸¸ä»…åˆ†é… <strong>50% é¢„ç®—ï¼ˆ25 msï¼‰</strong> ç»™ä¸šåŠ¡é€»è¾‘</li>
<li><strong>å•äº‹ä»¶å¹³å‡ä¸Šé™</strong>ï¼šè‹¥å•å¸§éœ€å¤„ç† 500 æ¡æ¶ˆæ¯ï¼Œåˆ™æ¯æ¡å¹³å‡è€—æ—¶ â‰¤ 25 ms Ã· 500 = 50 Î¼s</li>
</ul>
<p>è¿™æ­£æ˜¯â€œç†æƒ³çº§â€è®¾å®šä¸º 50 Î¼s çš„æ ¹æœ¬åŸå› ã€‚</p>
<p>ä¸åŒæ¸¸æˆç±»å‹å¯¹åº”ä¸åŒå¸§ç‡ä¸é¢„ç®—ï¼š</p>





























<table><thead><tr><th>æ¸¸æˆç±»å‹</th><th>å»ºè®®å¸§ç‡</th><th>å•å¸§é¢„ç®—</th><th>å•äº‹ä»¶å»ºè®®ä¸Šé™ï¼ˆ500 QPSï¼‰</th></tr></thead><tbody><tr><td>ç«æŠ€ç±»ï¼ˆMOBA/å°„å‡»ï¼‰</td><td>30â€“60 Hz</td><td>16â€“33 ms</td><td>&lt; 33 Î¼s</td></tr><tr><td>ä¸­åº¦äº¤äº’ç±»</td><td>20 Hz</td><td>25 ms</td><td>&lt; 50 Î¼s</td></tr><tr><td>ä¼‘é—²/æŒ‚æœºç±»</td><td>10 Hz</td><td>50 ms</td><td>&lt; 100â€“200 Î¼s</td></tr></tbody></table>
<blockquote>
<p>å·¥ç¨‹å»ºè®®ï¼šåœ¨æ¶æ„è®¾è®¡åˆæœŸå°±åº”æ ¹æ®æ¸¸æˆç±»å‹æ˜ç¡®å¸§é¢„ç®—ï¼Œå¹¶å°†è¯¥æŒ‡æ ‡çº³å…¥ CI/CD æ€§èƒ½é—¨ç¦ã€‚</p>
</blockquote>
<h4 data-id="heading-4">1.3 è¶…æ—¶äº‹ä»¶çš„è§£å†³æ–¹æ¡ˆï¼šä¸‰å¤§æ ¸å¿ƒä¼˜åŒ–ç­–ç•¥</h4>
<p>å®é™…ä¸šåŠ¡ä¸­ï¼Œéƒ¨åˆ†é€»è¾‘ï¼ˆå¦‚è·¨æœæˆ˜æ–—ç»“ç®—ã€å…¨æœæ•°æ®ç»Ÿè®¡ï¼‰éš¾ä»¥å‹ç¼©è‡³ 1ms å†…ã€‚æ­¤æ—¶éœ€é€šè¿‡ â€œ<strong>éé˜»å¡åŒ–</strong>â€ æ‰‹æ®µæ‹†è§£å‹åŠ›ï¼š</p>
<h5 data-id="heading-5">ç­–ç•¥Aï¼šä»»åŠ¡åˆ‡ç‰‡ï¼ˆTime Slicingï¼‰â€”â€” å¤§ä»»åŠ¡æ‹†åˆ†ä¸ºå°å¸§æ‰§è¡Œ</h5>
<ul>
<li><strong>æ€è·¯</strong>ï¼šå°†é•¿ä»»åŠ¡æ‹†åˆ†ä¸ºå¤šä¸ªå­ä»»åŠ¡ï¼Œ<strong>åˆ†æ•£åˆ°å¤šä¸ªé€»è¾‘å¸§ä¸­é€æ­¥å®Œæˆ</strong>ã€‚</li>
<li><strong>åœºæ™¯</strong>ï¼šå…¨æœå‘å¥–ï¼ˆ10 ä¸‡ç©å®¶ï¼‰ã€è·¨æœæ’è¡Œæ¦œè®¡ç®—ã€‚</li>
<li><strong>å…³é”®ç‚¹</strong>ï¼š
<ul>
<li>æŒ‰ <strong>â€œå®‰å…¨çº§â€è€—æ—¶</strong> æ‹†åˆ†ï¼ˆå¦‚æ¯å¸§å¤„ç† 500 äººï¼Œè€—æ—¶ &lt; 50 Î¼sï¼‰</li>
<li><strong>æŒä¹…åŒ–è¿›åº¦</strong>ï¼ˆå¦‚â€œå·²å¤„ç†è‡³ UID=3200â€ï¼‰ï¼Œæ”¯æŒæ–­ç‚¹ç»­åš</li>
<li>é‡å¯åå¯ä»æ–­ç‚¹æ¢å¤ï¼Œç¡®ä¿ <strong>å¹‚ç­‰æ€§ä¸ä¸€è‡´æ€§</strong></li>
</ul>
</li>
</ul>
<h5 data-id="heading-6">ç­–ç•¥Bï¼šå¼‚æ­¥å¸è½½ï¼ˆOffloadingï¼‰â€”â€” è®¡ç®—ä»»åŠ¡ç§»äº¤è‡³Workeråç¨‹</h5>
<ul>
<li><strong>æ€è·¯</strong>ï¼šä¸»åç¨‹ä»…åš <strong>è°ƒåº¦ä¸çŠ¶æ€ç®¡ç†</strong>ï¼Œå°†æ— çŠ¶æ€/å¼±çŠ¶æ€è®¡ç®—å¸è½½è‡³ Worker Poolã€‚</li>
<li><strong>åœºæ™¯</strong>ï¼šA* å¯»è·¯ã€è§†é‡ AOI è®¡ç®—ã€ä¼¤å®³å…¬å¼ç»“ç®—ã€æ’è¡Œæ¦œæƒé‡ã€‚</li>
<li><strong>å…³é”®ç‚¹</strong>ï¼š
<ul>
<li>ä¸»åç¨‹ä¸ Worker é€šè¿‡ <strong>å¸¦ç¼“å†²é€šé“</strong> é€šä¿¡ï¼Œ<strong>ç»ä¸é˜»å¡ä¸»å¾ªç¯</strong></li>
<li>Worker è¿”å›ç»“æœåï¼Œä¸»åç¨‹éœ€ <strong>æ ¡éªŒçŠ¶æ€æ—¶æ•ˆæ€§</strong>ï¼ˆå¦‚ç©å®¶æ˜¯å¦å·²ç¦»çº¿ï¼‰</li>
<li>Worker æ•°é‡å»ºè®® â‰¤ CPU æ ¸æ•°ï¼Œé¿å…è°ƒåº¦å¼€é”€åè¶…æ”¶ç›Š</li>
</ul>
</li>
</ul>
<h5 data-id="heading-7">ç­–ç•¥Cï¼šæ•°æ®é¢„å¤„ç†â€”â€” ç©ºé—´æ¢æ—¶é—´ï¼Œè§„é¿å®æ—¶è®¡ç®—</h5>
<ul>
<li><strong>æ€è·¯</strong>ï¼š<strong>æå‰ç¼“å­˜é«˜é¢‘æŸ¥è¯¢ç»“æœ</strong>ï¼Œé¿å…è¿è¡Œæ—¶éå†æˆ–å¤æ‚è®¡ç®—ã€‚</li>
<li><strong>åœºæ™¯</strong>ï¼šå·¥ä¼šæœ€é«˜ç­‰çº§ç©å®¶ã€æˆ˜åŠ› Top100ã€å¸¸ç”¨é“å…·ç»Ÿè®¡ã€‚</li>
<li><strong>å…³é”®ç‚¹</strong>ï¼š
<ul>
<li>åœ¨ <strong>æ•°æ®å˜æ›´æ—¶å¢é‡æ›´æ–°ç¼“å­˜</strong>ï¼ˆå¦‚ç©å®¶å‡çº§ â†’ æ›´æ–°å·¥ä¼šç¼“å­˜ï¼‰</li>
<li>é‡‡ç”¨ <strong>è¯»å¤šå†™å°‘</strong> ç­–ç•¥ï¼›è‹¥å†™é¢‘ç‡è¿‡é«˜ï¼ˆå¦‚å®æ—¶ä¼¤å®³ï¼‰ï¼Œé¢„å¤„ç†æ”¶ç›Šå°†è¢«æ›´æ–°æˆæœ¬æŠµæ¶ˆ</li>
<li>å¯ç»“åˆ <strong>LRU + å®šæ—¶åˆ·æ–°</strong> æœºåˆ¶ï¼Œå¹³è¡¡ä¸€è‡´æ€§ä¸æ€§èƒ½</li>
</ul>
</li>
</ul>
<h3 data-id="heading-8">äºŒã€ä¼˜å…ˆçº§æ§åˆ¶ï¼šä¿éšœæ ¸å¿ƒä½“éªŒçš„è°ƒåº¦é€»è¾‘</h3>
<p>å•åç¨‹çš„ä¸²è¡Œç‰¹æ€§å†³å®šäº† <strong>äº‹ä»¶å¤„ç†é¡ºåº</strong> = <strong>ç©å®¶ä½“éªŒè´¨é‡</strong>ã€‚è‹¥åå°ç»Ÿè®¡å ç”¨å¸§é¢„ç®—ï¼Œå°†ç›´æ¥å¯¼è‡´ç©å®¶æ“ä½œå»¶è¿Ÿâ€”â€”è¿™æ˜¯ä¸å¯æ¥å—çš„ã€‚</p>
<p>å› æ­¤ï¼Œå¿…é¡»å®æ–½ <strong>ä¸‰çº§ä¼˜å…ˆçº§è°ƒåº¦</strong>ï¼š</p>
<h4 data-id="heading-9">2.1 ç¬¬ä¸€ä¼˜å…ˆçº§ï¼ˆHighï¼‰ï¼šç©å®¶å®æ—¶äº¤äº’æŒ‡ä»¤ï¼ˆWebSocketï¼‰</h4>
<ul>
<li><strong>åœºæ™¯</strong>ï¼šç§»åŠ¨ã€æŠ€èƒ½é‡Šæ”¾ã€é“å…·ä½¿ç”¨ã€NPC å¯¹è¯</li>
<li><strong>ç†ç”±</strong>ï¼šç›´æ¥å½±å“â€œæ“ä½œæ‰‹æ„Ÿâ€ï¼Œç«¯åˆ°ç«¯å»¶è¿Ÿåº” &lt; 100 ms</li>
<li><strong>ç­–ç•¥</strong>ï¼š
<ul>
<li>æŠ•é€’è‡³ <code>highChan</code></li>
<li>ä¸»å¾ªç¯ <strong>ä¼˜å…ˆæ¸…ç©º highChan</strong></li>
<li>è‹¥å †ç§¯ &gt; 100 æ¡ï¼Œè§¦å‘å‘Šè­¦å¹¶ é™æµä½ä¼˜å…ˆçº§æŠ•é€’</li>
</ul>
</li>
</ul>
<h5 data-id="heading-10">2.2 ç¬¬äºŒä¼˜å…ˆçº§ï¼ˆMediumï¼‰ï¼šæ¸¸æˆä¸–ç•Œå¿ƒè·³å®šæ—¶å™¨ï¼ˆTimerï¼‰</h5>
<ul>
<li><strong>åœºæ™¯</strong>ï¼šæ€ªç‰© AIã€æŠ€èƒ½ CDã€å›è¡€å›è“ã€æˆ˜æ–—åŒæ­¥ã€å…¨æœæ´»åŠ¨</li>
<li><strong>ç†ç”±</strong>ï¼šé©±åŠ¨æ¸¸æˆä¸–ç•Œè¿è½¬ï¼Œå»¶è¿Ÿä¼šå¯¼è‡´â€œæ—¶é—´è½´é”™ä¹±â€</li>
<li><strong>ç­–ç•¥</strong>ï¼š
<ul>
<li>æŠ•é€’è‡³ <code>midChan</code></li>
<li>åœ¨ highChan ä¸ºç©ºåå¤„ç†</li>
<li>å®šæ—¶å™¨åˆ†æ¡¶ï¼ˆå¦‚ 100 ms / 1 s / 5 s ç»„ï¼‰ï¼Œé¿å…é›†ä¸­è§¦å‘</li>
</ul>
</li>
</ul>
<h5 data-id="heading-11">2.3 ç¬¬ä¸‰ä¼˜å…ˆçº§ï¼ˆLowï¼‰ï¼šå¤–éƒ¨è¯·æ±‚ä¸å¼‚æ­¥å›è°ƒ</h5>
<ul>
<li><strong>åœºæ™¯</strong>ï¼šgRPC æŸ¥è¯¢ã€DB/Redis å›è°ƒã€å…¨æœç»Ÿè®¡ã€æ—¥å¿—ä¸ŠæŠ¥</li>
<li><strong>ç†ç”±</strong>ï¼šå¯¹å®æ—¶æ€§ä¸æ•æ„Ÿï¼Œå¯å®¹å¿æ¯«ç§’çº§å»¶è¿Ÿ</li>
<li><strong>ç­–ç•¥</strong>ï¼š
<ul>
<li>æŠ•é€’è‡³ <code>lowChan</code></li>
<li>ä»…åœ¨ high + mid ä¸ºç©ºæ—¶å¤„ç†ï¼Œæˆ–æ¯å¸§æœ«å°¾åˆ†é… â‰¤ 2 ms é¢„ç®—</li>
<li>è‹¥å †ç§¯ &gt; 1000 æ¡ï¼Œå¯ä¸¢å¼ƒéå…³é”®äº‹ä»¶ï¼ˆå¦‚åœ¨çº¿äººæ•°ç»Ÿè®¡ï¼‰</li>
</ul>
</li>
</ul>
<h5 data-id="heading-12">2.4 å…³é”®è¡¥å……ï¼šé¿å…ä¼˜å…ˆçº§å€’ç½®</h5>
<ul>
<li>âŒ ç¦æ­¢ä½ä¼˜å…ˆçº§äº‹ä»¶æŒæœ‰ é•¿æ—¶é—´èµ„æºï¼ˆå¦‚ DB è¿æ¥ï¼‰</li>
<li>âŒ ç¦æ­¢åœ¨ä½ä¼˜å…ˆçº§ä¸­ è§¦å‘é«˜ä¼˜å…ˆçº§äº‹ä»¶ï¼ˆå¦‚ç»Ÿè®¡æ—¶å‘æ¨é€ï¼‰</li>
<li>âœ… å¯¹ä½ä¼˜å…ˆçº§äº‹ä»¶è®¾ç½® æœ€å¤§å¤„ç†æ—¶é•¿ï¼ˆå¦‚ 500 Î¼sï¼‰ï¼Œè¶…æ—¶åˆ™ç§»äº¤ä¸‹ä¸€å¸§</li>
</ul>
<blockquote>
<p>ä¼˜å…ˆçº§ä¸æ˜¯å»ºè®®ï¼Œè€Œæ˜¯ç©å®¶ä½“éªŒçš„æŠ¤æ ã€‚</p>
</blockquote>
<h3 data-id="heading-13">ä¸‰ã€å®è·µå‚è€ƒï¼šGoå•åç¨‹äº‹ä»¶è°ƒåº¦å™¨å®ç°</h3>
<p>åŸºäºä¸Šè¿°è®¾è®¡ï¼Œå¯åˆ©ç”¨ Go çš„ channel + goroutine ç‰¹æ€§ï¼Œæ„å»ºè½»é‡ã€é«˜æ•ˆã€ç¡®å®šæ€§çš„äº‹ä»¶è°ƒåº¦å™¨ã€‚</p>
<h4 data-id="heading-14">3.1 æ ¸å¿ƒè®¾è®¡</h4>
<ul>
<li>ä¸‰é€šé“åˆ†ä¼˜å…ˆçº§ï¼š<code>highChan</code> / <code>midChan</code> / <code>lowChan</code>ï¼ˆå‡å¸¦ç¼“å†²ï¼‰</li>
<li>ç»Ÿä¸€äº‹ä»¶ç»“æ„ï¼šå«å¤„ç†å‡½æ•°ã€ä¼˜å…ˆçº§ã€åˆ›å»ºæ—¶é—´ï¼ˆç”¨äºç›‘æ§ï¼‰</li>
<li>ä¸»å¾ªç¯è°ƒåº¦ï¼šä¼˜å…ˆæ¶ˆè´¹ high â†’ mid â†’ lowï¼Œå¹¶ä¸¥æ ¼æ§åˆ¶å¸§è€—æ—¶</li>
</ul>
<h4 data-id="heading-15">3.2 å‚è€ƒä»£ç </h4>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">package</span> main

<span class="hljs-keyword">import</span> (
	<span class="hljs-string">"log"</span>
	<span class="hljs-string">"time"</span>
)

<span class="hljs-keyword">const</span> (
	PriorityHigh = <span class="hljs-literal">iota</span>
	PriorityMedium
	PriorityLow
)

<span class="hljs-keyword">const</span> (
	FrameInterval = <span class="hljs-number">50</span> * time.Millisecond <span class="hljs-comment">// 20 Hz é€»è¾‘å¸§</span>
	FrameBudget   = <span class="hljs-number">25</span> * time.Millisecond <span class="hljs-comment">// é¢„ç•™50%å®‰å…¨ç¼“å†²</span>
	MaxLowTime    = <span class="hljs-number">2</span> * time.Millisecond  <span class="hljs-comment">// ä½ä¼˜å…ˆçº§æœ€å¤šå ç”¨ 2 ms / å¸§</span>
)

<span class="hljs-keyword">type</span> Event <span class="hljs-keyword">struct</span> {
	Handler   <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">()</span></span>
	Priority  <span class="hljs-type">int</span>
	CreatedAt time.Time
}

<span class="hljs-keyword">type</span> EventLoop <span class="hljs-keyword">struct</span> {
	highChan <span class="hljs-keyword">chan</span> *Event
	midChan  <span class="hljs-keyword">chan</span> *Event
	lowChan  <span class="hljs-keyword">chan</span> *Event
	quit     <span class="hljs-keyword">chan</span> <span class="hljs-keyword">struct</span>{}
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">NewEventLoop</span><span class="hljs-params">()</span></span> *EventLoop {
	<span class="hljs-keyword">return</span> &amp;EventLoop{
		highChan: <span class="hljs-built_in">make</span>(<span class="hljs-keyword">chan</span> *Event, <span class="hljs-number">1000</span>),
		midChan:  <span class="hljs-built_in">make</span>(<span class="hljs-keyword">chan</span> *Event, <span class="hljs-number">1000</span>),
		lowChan:  <span class="hljs-built_in">make</span>(<span class="hljs-keyword">chan</span> *Event, <span class="hljs-number">1000</span>),
		quit:     <span class="hljs-built_in">make</span>(<span class="hljs-keyword">chan</span> <span class="hljs-keyword">struct</span>{}),
	}
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(el *EventLoop)</span></span> Submit(event *Event) {
	ch := el.lowChan
	<span class="hljs-keyword">switch</span> event.Priority {
	<span class="hljs-keyword">case</span> PriorityHigh:
		ch = el.highChan
	<span class="hljs-keyword">case</span> PriorityMedium:
		ch = el.midChan
	}
	<span class="hljs-keyword">select</span> {
	<span class="hljs-keyword">case</span> ch &lt;- event:
	<span class="hljs-keyword">default</span>:
		log.Printf(<span class="hljs-string">"Priority %d channel full, dropping event"</span>, event.Priority)
	}
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(el *EventLoop)</span></span> Start() {
	ticker := time.NewTicker(FrameInterval)
	<span class="hljs-keyword">defer</span> ticker.Stop()
	log.Println(<span class="hljs-string">"EventLoop started"</span>)

	<span class="hljs-keyword">for</span> {
		<span class="hljs-keyword">select</span> {
		<span class="hljs-keyword">case</span> &lt;-el.quit:
			log.Println(<span class="hljs-string">"EventLoop stopped"</span>)
			<span class="hljs-keyword">return</span>
		<span class="hljs-keyword">case</span> &lt;-ticker.C:
			el.processFrame()
		}
	}
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(el *EventLoop)</span></span> Stop() {
	<span class="hljs-built_in">close</span>(el.quit)
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(el *EventLoop)</span></span> processFrame() {
	frameStart := time.Now()

	<span class="hljs-comment">// 1. å¤„ç† High ä¼˜å…ˆçº§ï¼ˆç›´åˆ°ç©ºï¼‰</span>
	<span class="hljs-keyword">for</span> <span class="hljs-built_in">len</span>(el.highChan) &gt; <span class="hljs-number">0</span> {
		ev := &lt;-el.highChan
		ev.Handler()
		<span class="hljs-keyword">if</span> time.Since(frameStart) &gt;= FrameBudget {
			log.Println(<span class="hljs-string">"Frame budget exceeded during high-priority processing"</span>)
			<span class="hljs-keyword">return</span>
		}
	}

	<span class="hljs-comment">// 2. å¤„ç† Medium ä¼˜å…ˆçº§ï¼ˆç›´åˆ°ç©ºï¼‰</span>
	<span class="hljs-keyword">for</span> <span class="hljs-built_in">len</span>(el.midChan) &gt; <span class="hljs-number">0</span> {
		ev := &lt;-el.midChan
		ev.Handler()
		<span class="hljs-keyword">if</span> time.Since(frameStart) &gt;= FrameBudget {
			log.Println(<span class="hljs-string">"Frame budget exceeded during medium-priority processing"</span>)
			<span class="hljs-keyword">return</span>
		}
	}

	<span class="hljs-comment">// 3. æœ‰é™å¤„ç† Low ä¼˜å…ˆçº§</span>
	lowDeadline := frameStart.Add(MaxLowTime)
	<span class="hljs-keyword">for</span> time.Now().Before(lowDeadline) &amp;&amp; <span class="hljs-built_in">len</span>(el.lowChan) &gt; <span class="hljs-number">0</span> {
		ev := &lt;-el.lowChan
		ev.Handler()
	}
}

<span class="hljs-comment">// ===== ç¤ºä¾‹ä½¿ç”¨ï¼šå®Œæ•´ main å‡½æ•° =====</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
	loop := NewEventLoop()

	<span class="hljs-comment">// æ¨¡æ‹Ÿç©å®¶å®æ—¶æ“ä½œï¼ˆHigh ä¼˜å…ˆçº§ï¼‰</span>
	<span class="hljs-keyword">go</span> <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">()</span></span> {
		<span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">8</span>; i++ {
			loop.Submit(&amp;Event{
				Priority:  PriorityHigh,
				CreatedAt: time.Now(),
				Handler: <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">()</span></span> {
					time.Sleep(<span class="hljs-number">60</span> * time.Microsecond) <span class="hljs-comment">// æ¨¡æ‹Ÿ 60 Î¼s æ“ä½œ</span>
					log.Println(<span class="hljs-string">"âœ… [HIGH] ç©å®¶æŠ€èƒ½é‡Šæ”¾"</span>)
				},
			})
			time.Sleep(<span class="hljs-number">30</span> * time.Millisecond)
		}
	}()

	<span class="hljs-comment">// æ¨¡æ‹Ÿæ¸¸æˆä¸–ç•Œå¿ƒè·³ï¼ˆMedium ä¼˜å…ˆçº§ï¼‰</span>
	<span class="hljs-keyword">go</span> <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">()</span></span> {
		<span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">5</span>; i++ {
			loop.Submit(&amp;Event{
				Priority:  PriorityMedium,
				CreatedAt: time.Now(),
				Handler: <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">()</span></span> {
					time.Sleep(<span class="hljs-number">150</span> * time.Microsecond) <span class="hljs-comment">// æ¨¡æ‹Ÿ 150 Î¼s</span>
					log.Println(<span class="hljs-string">"ğŸ”„ [MEDIUM] æ€ªç‰©AIå†³ç­–"</span>)
				},
			})
			time.Sleep(<span class="hljs-number">45</span> * time.Millisecond)
		}
	}()

	<span class="hljs-comment">// æ¨¡æ‹Ÿåå°ç»Ÿè®¡ï¼ˆLow ä¼˜å…ˆçº§ï¼‰</span>
	<span class="hljs-keyword">go</span> <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">()</span></span> {
		<span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++ {
			loop.Submit(&amp;Event{
				Priority:  PriorityLow,
				CreatedAt: time.Now(),
				Handler: <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">()</span></span> {
					time.Sleep(<span class="hljs-number">300</span> * time.Microsecond) <span class="hljs-comment">// æ¨¡æ‹Ÿ 300 Î¼s</span>
					log.Println(<span class="hljs-string">"ğŸ“Š [LOW] å…¨æœåœ¨çº¿ç»Ÿè®¡"</span>)
				},
			})
			time.Sleep(<span class="hljs-number">20</span> * time.Millisecond)
		}
	}()

	<span class="hljs-comment">// å¯åŠ¨äº‹ä»¶å¾ªç¯</span>
	<span class="hljs-keyword">go</span> loop.Start()

	<span class="hljs-comment">// è¿è¡Œ 3 ç§’åä¼˜é›…é€€å‡º</span>
	log.Println(<span class="hljs-string">"â³ è¿è¡Œ 3 ç§’æ¨¡æ‹Ÿ..."</span>)
	time.Sleep(<span class="hljs-number">3</span> * time.Second)
	loop.Stop()
	time.Sleep(<span class="hljs-number">100</span> * time.Millisecond) <span class="hljs-comment">// ç•™å‡ºé€€å‡ºæ—¶é—´</span>
	log.Println(<span class="hljs-string">"ğŸ”š ç¨‹åºç»“æŸ"</span>)
}
</code></pre>
<h4 data-id="heading-16">3.3 å®Œæ•´å®ç°å‚è€ƒ</h4>
<p>ä¸Šè¿°ä»£ç ä¸ºæ ¸å¿ƒç®€åŒ–ç‰ˆï¼Œå®Œæ•´çš„ç”Ÿäº§çº§å®ç°ï¼ˆå«è¶…æ—¶ç›‘æ§ã€å‘Šè­¦ã€ä»»åŠ¡åˆ‡ç‰‡å·¥å…·ã€Workeråç¨‹æ± ï¼‰å¯å‚è€ƒï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Ftx7do%2Fgo-utils%2Ftree%2Fmain%2Feventloop" target="_blank" title="https://github.com/tx7do/go-utils/tree/main/eventloop" ref="nofollow noopener noreferrer">github.com/tx7do/go-utâ€¦</a></p>
<h3 data-id="heading-17">å››ã€æ€»ç»“ï¼šå•åç¨‹è°ƒåº¦çš„æ ¸å¿ƒå¿ƒæ³•</h3>
<p>Go å•åç¨‹äº‹ä»¶è°ƒåº¦å™¨çš„ä»·å€¼ï¼Œåœ¨äº <strong>ç”¨â€œä¸²è¡Œæ‰§è¡Œâ€æ¢å–â€œæ— é”æœ‰åºâ€</strong>ï¼Œä½†è¿™ä¸€ä¼˜åŠ¿çš„å‰ææ˜¯ <strong>å¯¹æ—¶é—´çš„æè‡´æŒæ§</strong>ã€‚</p>
<p>å…¶æ ¸å¿ƒå¿ƒæ³•å¯å‡ç»ƒä¸ºä¸‰ç‚¹ï¼š</p>
<ul>
<li><strong>å®ˆçº¢çº¿</strong>ï¼š<strong>å°†1msä½œä¸ºå•äº‹ä»¶å¤„ç†çš„ç»å¯¹ä¸Šé™</strong>ï¼Œé€šè¿‡å¸§é¢„ç®—è®¡ç®—åæ¨å•äº‹ä»¶è€—æ—¶æŒ‡æ ‡ï¼Œä»è®¾è®¡é˜¶æ®µè§„é¿é˜»å¡é£é™©ï¼›</li>
<li><strong>åˆ†ä¼˜å…ˆçº§</strong>ï¼šä»¥ <strong>ç©å®¶ä½“éªŒä¸ºä¸­å¿ƒ</strong>ï¼Œç¡®ä¿å®æ—¶äº¤äº’ä¸ä¸–ç•Œå¿ƒè·³ä¼˜å…ˆæ‰§è¡Œï¼Œä½ä¼˜å…ˆçº§ä»»åŠ¡å¯é™çº§ã€ä¸¢å¼ƒæˆ–é™æµã€‚</li>
<li><strong>æ‹†å‹åŠ›</strong>ï¼šé€šè¿‡<strong>ä»»åŠ¡åˆ‡ç‰‡ã€å¼‚æ­¥å¸è½½ã€æ•°æ®é¢„å¤„ç†</strong>ï¼Œå°†æ— æ³•å‹ç¼©çš„è€—æ—¶ä»»åŠ¡â€œéé˜»å¡åŒ–â€ï¼Œé¿å…å•åç¨‹æˆä¸ºæ€§èƒ½ç“¶é¢ˆã€‚</li>
</ul>
<p>åœ¨å®é™…ç ”å‘ä¸­ï¼Œéœ€ç»“åˆ <strong>æ¸¸æˆç±»å‹ã€å¹¶å‘è§„æ¨¡ã€ä¸šåŠ¡å¤æ‚åº¦</strong> åŠ¨æ€è°ƒæ•´ç­–ç•¥ã€‚ä½†æ— è®ºåœºæ™¯å¦‚ä½•å˜åŒ–ï¼Œ<strong>â€œæœ‰åºæ€§â€ä¸â€œå“åº”é€Ÿåº¦â€çš„å¹³è¡¡</strong>ï¼Œå§‹ç»ˆæ˜¯å•åç¨‹è°ƒåº¦å™¨çš„çµé­‚æ‰€åœ¨ã€‚</p>
<blockquote>
<p>æœ€ç»ˆç›®æ ‡ï¼šè®©æ¯ä¸€å¾®ç§’éƒ½ä¸ºç©å®¶ä½“éªŒæœåŠ¡ï¼Œè€Œéä¸ºç³»ç»Ÿå¤æ‚æ€§ä¹°å•ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Hibernateï¼ˆ5ï¼‰ä»€ä¹ˆæ˜¯Hibernateçš„é…ç½®æ–‡ä»¶ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7588064253634953270</link>    <guid>https://juejin.cn/post/7588064253634953270</guid>    <pubDate>2025-12-26T23:05:10.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588064253634953270" data-draft-id="7588001624905695251" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Hibernateï¼ˆ5ï¼‰ä»€ä¹ˆæ˜¯Hibernateçš„é…ç½®æ–‡ä»¶ï¼Ÿ"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-26T23:05:10.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Victor356"/> <meta itemprop="url" content="https://juejin.cn/user/3492507879476878"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Hibernateï¼ˆ5ï¼‰ä»€ä¹ˆæ˜¯Hibernateçš„é…ç½®æ–‡ä»¶ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3492507879476878/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Victor356
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-26T23:05:10.000Z" title="Fri Dec 26 2025 23:05:10 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    9
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>Hibernateçš„é…ç½®æ–‡ä»¶æ˜¯ç”¨äºå®šä¹‰Hibernateçš„å„ç§é…ç½®å‚æ•°çš„æ–‡ä»¶ï¼ŒåŒ…æ‹¬æ•°æ®åº“è¿æ¥ä¿¡æ¯ã€Hibernateå±æ€§ã€æ˜ å°„èµ„æºã€ç¼“å­˜é…ç½®ç­‰ã€‚Hibernateä¸»è¦ä½¿ç”¨ä¸¤ç§é…ç½®æ–‡ä»¶ï¼š</p>
<ol>
<li><strong><code>hibernate.cfg.xml</code></strong>ï¼šXMLæ ¼å¼çš„é…ç½®æ–‡ä»¶ã€‚</li>
<li><strong><code>hibernate.properties</code></strong>ï¼šå±æ€§æ ¼å¼çš„é…ç½®æ–‡ä»¶ã€‚</li>
</ol>
<h3 data-id="heading-0">1. <code>hibernate.cfg.xml</code> é…ç½®æ–‡ä»¶</h3>
<p><code>hibernate.cfg.xml</code> æ˜¯ä¸€ä¸ªXMLæ ¼å¼çš„é…ç½®æ–‡ä»¶ï¼Œç”¨äºå®šä¹‰Hibernateçš„å„ç§é…ç½®å‚æ•°ï¼ŒåŒ…æ‹¬æ•°æ®åº“è¿æ¥ä¿¡æ¯ã€Hibernateå±æ€§é…ç½®ã€æ˜ å°„èµ„æºç­‰ã€‚å®ƒæ˜¯Hibernateé…ç½®ä¸­æœ€å¸¸ç”¨çš„æ–‡ä»¶ã€‚</p>
<h4 data-id="heading-1">ä¸»è¦åŠŸèƒ½ï¼š</h4>
<ul>
<li>é…ç½®æ•°æ®åº“è¿æ¥å±æ€§ã€‚</li>
<li>é…ç½®Hibernateç›¸å…³å±æ€§ï¼ˆå¦‚æ–¹è¨€ã€ç¼“å­˜ã€æ—¥å¿—ç­‰ï¼‰ã€‚</li>
<li>é…ç½®å®ä½“ç±»çš„æ˜ å°„ä¿¡æ¯ã€‚</li>
</ul>
<h4 data-id="heading-2">ç¤ºä¾‹ï¼š</h4>
<p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªè¯¦ç»†çš„<code>hibernate.cfg.xml</code>æ–‡ä»¶ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">hibernate-configuration</span> <span class="hljs-keyword">PUBLIC</span>
        <span class="hljs-string">"-//Hibernate/Hibernate Configuration DTD 3.0//EN"</span>
        <span class="hljs-string">"http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">hibernate-configuration</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">session-factory</span>&gt;</span>

        <span class="hljs-comment">&lt;!-- æ•°æ®åº“è¿æ¥é…ç½® --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.connection.driver_class"</span>&gt;</span>com.mysql.cj.jdbc.Driver<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.connection.url"</span>&gt;</span>jdbc:mysql://localhost:3306/your_database<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.connection.username"</span>&gt;</span>your_username<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.connection.password"</span>&gt;</span>your_password<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>

        <span class="hljs-comment">&lt;!-- Hibernate å±æ€§é…ç½® --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.dialect"</span>&gt;</span>org.hibernate.dialect.MySQLDialect<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.show_sql"</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.format_sql"</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.hbm2ddl.auto"</span>&gt;</span>update<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>

        <span class="hljs-comment">&lt;!-- äºŒçº§ç¼“å­˜é…ç½® --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.cache.use_second_level_cache"</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.cache.region.factory_class"</span>&gt;</span>org.hibernate.cache.ehcache.EhCacheRegionFactory<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>

        <span class="hljs-comment">&lt;!-- æŸ¥è¯¢ç¼“å­˜é…ç½® --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.cache.use_query_cache"</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>

        <span class="hljs-comment">&lt;!-- è¿æ¥æ± é…ç½® --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.c3p0.min_size"</span>&gt;</span>5<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.c3p0.max_size"</span>&gt;</span>20<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.c3p0.timeout"</span>&gt;</span>300<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.c3p0.max_statements"</span>&gt;</span>50<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.c3p0.idle_test_period"</span>&gt;</span>3000<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>

        <span class="hljs-comment">&lt;!-- æ˜ å°„ç±»é…ç½® --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">mapping</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"com.example.domain.Student"</span>/&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">mapping</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"com.example.domain.Course"</span>/&gt;</span>

    <span class="hljs-tag">&lt;/<span class="hljs-name">session-factory</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">hibernate-configuration</span>&gt;</span>
</code></pre>
<h4 data-id="heading-3">è¯¦ç»†è¯´æ˜ï¼š</h4>
<ul>
<li><strong>æ•°æ®åº“è¿æ¥é…ç½®</strong>ï¼šå®šä¹‰äº†å¦‚ä½•è¿æ¥æ•°æ®åº“ï¼ŒåŒ…æ‹¬æ•°æ®åº“é©±åŠ¨ç±»ã€URLã€ç”¨æˆ·åå’Œå¯†ç ã€‚</li>
<li><strong>Hibernateå±æ€§é…ç½®</strong>ï¼šé…ç½®Hibernateçš„è¡Œä¸ºï¼ŒåŒ…æ‹¬SQLæ–¹è¨€ã€æ˜¯å¦æ˜¾ç¤ºSQLã€SQLæ ¼å¼åŒ–é€‰é¡¹ç­‰ã€‚</li>
<li><strong>äºŒçº§ç¼“å­˜é…ç½®</strong>ï¼šå¯ç”¨äºŒçº§ç¼“å­˜å¹¶æŒ‡å®šç¼“å­˜çš„å®ç°ã€‚</li>
<li><strong>æŸ¥è¯¢ç¼“å­˜é…ç½®</strong>ï¼šå¯ç”¨æŸ¥è¯¢ç¼“å­˜ã€‚</li>
<li><strong>è¿æ¥æ± é…ç½®</strong>ï¼šé…ç½®è¿æ¥æ± çš„è¡Œä¸ºï¼Œå¦‚æœ€å°è¿æ¥æ•°ã€æœ€å¤§è¿æ¥æ•°ã€è¶…æ—¶æ—¶é—´ç­‰ã€‚</li>
<li><strong>æ˜ å°„ç±»é…ç½®</strong>ï¼šæŒ‡å®šHibernateéœ€è¦ç®¡ç†çš„å®ä½“ç±»ã€‚</li>
</ul>
<h3 data-id="heading-4">2. <code>hibernate.properties</code> é…ç½®æ–‡ä»¶</h3>
<p><code>hibernate.properties</code> æ˜¯ä¸€ä¸ªå±æ€§æ–‡ä»¶æ ¼å¼çš„é…ç½®æ–‡ä»¶ï¼Œç”¨äºå®šä¹‰Hibernateçš„å„ç§é…ç½®å‚æ•°ã€‚å®ƒçš„å†…å®¹ç›¸å¯¹ç®€å•ç›´æ¥ï¼Œä½†ä¸å¦‚XMLæ ¼å¼çš„é…ç½®æ–‡ä»¶ç»“æ„åŒ–å’Œå¯è¯»æ€§å¼ºã€‚</p>
<h4 data-id="heading-5">ç¤ºä¾‹ï¼š</h4>
<p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªè¯¦ç»†çš„<code>hibernate.properties</code>æ–‡ä»¶ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-properties" lang="properties"># æ•°æ®åº“è¿æ¥é…ç½®
hibernate.connection.driver_class = com.mysql.cj.jdbc.Driver
hibernate.connection.url = jdbc:mysql://localhost:3306/your_database
hibernate.connection.username = your_username
hibernate.connection.password = your_password

# Hibernate å±æ€§é…ç½®
hibernate.dialect = org.hibernate.dialect.MySQLDialect
hibernate.show_sql = true
hibernate.format_sql = true
hibernate.hbm2ddl.auto = update

# äºŒçº§ç¼“å­˜é…ç½®
hibernate.cache.use_second_level_cache = true
hibernate.cache.region.factory_class = org.hibernate.cache.ehcache.EhCacheRegionFactory

# æŸ¥è¯¢ç¼“å­˜é…ç½®
hibernate.cache.use_query_cache = true

# è¿æ¥æ± é…ç½®
hibernate.c3p0.min_size = 5
hibernate.c3p0.max_size = 20
hibernate.c3p0.timeout = 300
hibernate.c3p0.max_statements = 50
hibernate.c3p0.idle_test_period = 3000
</code></pre>
<h3 data-id="heading-6">ä½¿ç”¨ç¤ºä¾‹</h3>
<p>ç»“åˆä¸Šè¿°é…ç½®æ–‡ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ä»¥ä¸‹ä»£ç è¿›è¡ŒHibernateçš„åˆå§‹åŒ–å’Œä½¿ç”¨ï¼š</p>
<h4 data-id="heading-7">Javaä»£ç ç¤ºä¾‹ï¼š</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.hibernate.Session;
<span class="hljs-keyword">import</span> org.hibernate.SessionFactory;
<span class="hljs-keyword">import</span> org.hibernate.Transaction;
<span class="hljs-keyword">import</span> org.hibernate.cfg.Configuration;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HibernateUtil</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> SessionFactory sessionFactory;

    <span class="hljs-keyword">static</span> {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// åˆ›å»ºSessionFactory</span>
            sessionFactory = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Configuration</span>().configure(<span class="hljs-string">"hibernate.cfg.xml"</span>).buildSessionFactory();
        } <span class="hljs-keyword">catch</span> (Throwable ex) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ExceptionInInitializerError</span>(ex);
        }
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> SessionFactory <span class="hljs-title function_">getSessionFactory</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> sessionFactory;
    }
}

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HibernateExample</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-type">SessionFactory</span> <span class="hljs-variable">sessionFactory</span> <span class="hljs-operator">=</span> HibernateUtil.getSessionFactory();
        <span class="hljs-type">Session</span> <span class="hljs-variable">session</span> <span class="hljs-operator">=</span> sessionFactory.openSession();
        <span class="hljs-type">Transaction</span> <span class="hljs-variable">transaction</span> <span class="hljs-operator">=</span> session.beginTransaction();

        <span class="hljs-comment">// åˆ›å»ºå¹¶ä¿å­˜å­¦ç”Ÿå¯¹è±¡</span>
        <span class="hljs-type">Student</span> <span class="hljs-variable">student</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Student</span>(<span class="hljs-string">"John Doe"</span>, <span class="hljs-number">20</span>);
        session.save(student);

        transaction.commit();

        <span class="hljs-comment">// è¯»å–å­¦ç”Ÿå¯¹è±¡</span>
        transaction = session.beginTransaction();
        <span class="hljs-type">Student</span> <span class="hljs-variable">retrievedStudent</span> <span class="hljs-operator">=</span> session.get(Student.class, student.getId());
        System.out.println(<span class="hljs-string">"Retrieved Student: "</span> + retrievedStudent.getName() + <span class="hljs-string">", Age: "</span> + retrievedStudent.getAge());
        transaction.commit();

        <span class="hljs-comment">// æ›´æ–°å­¦ç”Ÿå¯¹è±¡</span>
        transaction = session.beginTransaction();
        retrievedStudent.setAge(<span class="hljs-number">21</span>);
        session.update(retrievedStudent);
        transaction.commit();

        <span class="hljs-comment">// åˆ é™¤å­¦ç”Ÿå¯¹è±¡</span>
        transaction = session.beginTransaction();
        session.delete(retrievedStudent);
        transaction.commit();

        session.close();
        sessionFactory.close();
    }
}
</code></pre>
<h3 data-id="heading-8">è¯¦ç»†è§£é‡Š</h3>
<ol>
<li>
<p><strong>æŒä¹…åŒ–ç±»å®šä¹‰</strong>ï¼šæŒä¹…åŒ–ç±»<code>Student</code>ä½¿ç”¨äº†<code>@Entity</code>æ³¨è§£è¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªæŒä¹…åŒ–å®ä½“ç±»ï¼Œ<code>@Id</code>å’Œ<code>@GeneratedValue</code>æ³¨è§£ç”¨äºå®šä¹‰ä¸»é”®å’Œä¸»é”®ç”Ÿæˆç­–ç•¥ã€‚</p>
</li>
<li>
<p><strong><code>hibernate.cfg.xml</code> é…ç½®</strong>ï¼šåœ¨é…ç½®æ–‡ä»¶ä¸­ï¼Œé€šè¿‡<code>&lt;mapping class="com.example.domain.Student"/&gt;</code>å°†<code>Student</code>ç±»æ˜ å°„åˆ°æ•°æ®åº“è¡¨ã€‚</p>
</li>
<li>
<p><strong>Hibernateæ“ä½œ</strong>ï¼š</p>
<ul>
<li><strong>åˆ›å»ºSessionFactory</strong>ï¼šé€šè¿‡<code>Configuration</code>ç±»è¯»å–<code>hibernate.cfg.xml</code>æ–‡ä»¶åˆ›å»º<code>SessionFactory</code>ã€‚</li>
<li><strong>è·å–Session</strong>ï¼šé€šè¿‡<code>SessionFactory</code>è·å–<code>Session</code>å¯¹è±¡ã€‚</li>
<li><strong>å¯åŠ¨äº‹åŠ¡</strong>ï¼šé€šè¿‡<code>Session</code>å¯¹è±¡å¯åŠ¨äº‹åŠ¡ã€‚</li>
<li><strong>CRUDæ“ä½œ</strong>ï¼š
<ul>
<li><strong>åˆ›å»ºå¹¶ä¿å­˜</strong>ï¼šä½¿ç”¨<code>session.save()</code>æ–¹æ³•ä¿å­˜ä¸€ä¸ªæ–°çš„<code>Student</code>å¯¹è±¡ã€‚</li>
<li><strong>è¯»å–</strong>ï¼šä½¿ç”¨<code>session.get()</code>æ–¹æ³•æ ¹æ®ä¸»é”®è¯»å–<code>Student</code>å¯¹è±¡ã€‚</li>
<li><strong>æ›´æ–°</strong>ï¼šä¿®æ”¹å¯¹è±¡çš„å±æ€§å€¼å¹¶ä½¿ç”¨<code>session.update()</code>æ–¹æ³•è¿›è¡Œæ›´æ–°ã€‚</li>
<li><strong>åˆ é™¤</strong>ï¼šä½¿ç”¨<code>session.delete()</code>æ–¹æ³•åˆ é™¤å¯¹è±¡ã€‚</li>
</ul>
</li>
<li><strong>æäº¤äº‹åŠ¡</strong>ï¼šé€šè¿‡<code>transaction.commit()</code>æ–¹æ³•æäº¤äº‹åŠ¡ã€‚</li>
</ul>
</li>
</ol>
<p>é€šè¿‡è¿™ç§æ–¹å¼ï¼ŒHibernateå¯ä»¥å°†Javaå¯¹è±¡æŒä¹…åŒ–åˆ°æ•°æ®åº“ä¸­ï¼Œå¤„ç†å¯¹è±¡çš„CRUDæ“ä½œï¼Œå®ç°å¯¹è±¡ä¸æ•°æ®åº“è¡¨ä¹‹é—´çš„æ˜ å°„å’Œç®¡ç†ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç¬¬ä¸€æ¬¡å›´è§‚AIæ‰“ç‰Œï¼Œæ˜æ˜Ÿæ¨¡å‹å±…ç„¶é›†ä½“ç¿»è½¦ï¼Ÿä¸¨å¼€æºé¡¹ç›®CATArenaæ‹†è§£]]></title>    <link>https://juejin.cn/post/7588139768275664947</link>    <guid>https://juejin.cn/post/7588139768275664947</guid>    <pubDate>2025-12-28T05:36:22.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588139768275664947" data-draft-id="7588140921248104486" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç¬¬ä¸€æ¬¡å›´è§‚AIæ‰“ç‰Œï¼Œæ˜æ˜Ÿæ¨¡å‹å±…ç„¶é›†ä½“ç¿»è½¦ï¼Ÿä¸¨å¼€æºé¡¹ç›®CATArenaæ‹†è§£"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-12-28T05:36:22.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é˜¿æ˜ŸAIå·¥ä½œå®¤"/> <meta itemprop="url" content="https://juejin.cn/user/2250051536050763"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç¬¬ä¸€æ¬¡å›´è§‚AIæ‰“ç‰Œï¼Œæ˜æ˜Ÿæ¨¡å‹å±…ç„¶é›†ä½“ç¿»è½¦ï¼Ÿä¸¨å¼€æºé¡¹ç›®CATArenaæ‹†è§£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2250051536050763/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é˜¿æ˜ŸAIå·¥ä½œå®¤
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-28T05:36:22.000Z" title="Sun Dec 28 2025 05:36:22 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-28
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3769f16278c843b2bd7fb064897b8e6a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_5pifQUnlt6XkvZzlrqQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767504982&amp;x-signature=rQEvuLFBn5ZxKUueZrHhMR0GjwE%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>Â </p>
<p>å“ˆå–½å¤§å®¶å¥½ï¼</p>
<p>æˆ‘æ˜¯é˜¿æ˜ŸğŸ‘‹</p>
<p>æœ€è¿‘æˆ‘åšäº†ä¸€ä»¶æœ‰ç‚¹ç¦»è°±çš„äº‹â€”â€”</p>
<p>Â </p>
<h2 data-id="heading-0">çœ‹äº†ä¸€ä¸‹åˆAIæ‰“ç‰Œ</h2>
<p>æƒ³è±¡ä¸€ä¸‹è¿™ä¸ªç”»é¢ï¼š</p>
<p>8ä¸ªä¸–ç•Œä¸Šæœ€èªæ˜çš„å¤§è„‘ï¼ˆè™½ç„¶ç°åœ¨æ˜¯ç¡…åŸºçš„ğŸ˜…ï¼‰ï¼Œ</p>
<p>AIä»¬æ£ç€1000ç­¹ç åä¸Šè™šæ‹ŸèµŒæ¡Œï¼Œ</p>
<p>ä¸€åœºAIä¹‹é—´çš„å¾·å·æ‰‘å…‹â€œé¥¥é¥¿æ¸¸æˆâ€å°±æ­¤å¼€å§‹ï¼</p>
<p>å°±æ˜¯è¿™ä¸ªå«CATArenaçš„é¡¹ç›®ï¼ğŸ‘‡ğŸ»AIå‹¾å¿ƒæ–—è§’ç°åœº</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cd1ebd415d534a88b334015f183b87e6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_5pifQUnlt6XkvZzlrqQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767504982&amp;x-signature=0S2DPxX84LkrVLNZhz5IGaO%2FDzk%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ğŸ® æ¯”èµ›è§„åˆ™</p>
<ul>
<li>â€¢ å¼€å±€ï¼š 8ä½AIé€‰æ‰‹ï¼Œæ¯äºº1000ç­¹ç </li>
<li>â€¢ è¿‡ç¨‹ï¼š æœ€å¤šæ‰“60æ‰‹ç‰Œï¼Œè¾“å…‰å°±æ·˜æ±°</li>
<li>â€¢ ç»“å±€ï¼š è¦ä¹ˆæ‰“åˆ°åªå‰©ä¸€ä¸ªâ€œèµŒç‹â€ï¼Œè¦ä¹ˆ60æ‰‹åæ¯”è°ç­¹ç å¤š</li>
<li>â€¢ è®¡åˆ†éªšæ“ä½œï¼š å† å†›é€šåƒï¼èµ¢å®¶ç®—â€œå‡»è´¥äº†æ‰€æœ‰å…¶ä»–7äººâ€ï¼Œå…¶ä»–äººç»Ÿç»Ÿè®°ä¸€æ¬¡å¤±è´¥ã€‚è¿™å°±æ˜¯ä¼ è¯´ä¸­çš„â€œèƒœè€…å…¨å¾—â€ï¼</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9ebd420b183c4a5894b1f431f36bb4ac~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_5pifQUnlt6XkvZzlrqQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767504982&amp;x-signature=dwuqW9qbXKBhk6pSxWMk95Q25mc%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/80d32d66d2524692995b3efc132a7781~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_5pifQUnlt6XkvZzlrqQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767504982&amp;x-signature=BnnMKPaFOZOHpOsmlwcd1J9IUFw%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h2 data-id="heading-1">åç›´è§‰å½“çº¢ç‚¸å­é¸¡å·®ç‚¹è½æ¦œ</h2>
<p>æ¯”å¦‚åœ¨é¦–å±Šçº¿ä¸Šå…¬å¼€èµ›é‡Œï¼ŒClaudeç³»åˆ—è¿å‰ä¸‰éƒ½æ²¡è¿›ï¼Œè€ŒQwenå’ŒGPT-5å…±åŒç™»é¡¶ï¼Œè¿™ä¸ªç»“æœæ˜¯ä¸æ˜¯å’Œå¾ˆå¤šçº¯åšé¢˜çš„æ¦œå•å¾ˆä¸ä¸€æ ·ï¼Ÿ</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4927e3b065e0486bb2290bb693bbe046~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_5pifQUnlt6XkvZzlrqQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767504982&amp;x-signature=ACQCasoqg3wP5VDqQDW3LvV43os%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æœ€æç¬‘çš„æ˜¯ğŸ˜‚AIèƒ½åƒçœ‹â€œæ­¦æ—ç§˜ç±â€ä¸€æ ·ï¼Œç ”ç©¶å¯¹æ‰‹çš„å¥—è·¯ï¼Œè¿­ä»£è‡ªå·±çš„ç­–ç•¥ã€‚è¿™ç®€ç›´æ˜¯æŠŠâ€œå·â€å­—åˆ»è¿›äº†AIçš„DNAé‡Œã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/92087269f97749158bf8ecc01aff1cf5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_5pifQUnlt6XkvZzlrqQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767504982&amp;x-signature=HG7aTykqta5fFdbMPRLO%2BEobgao%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ä¸€å¼€å§‹Claudeæ˜¯è½åçš„ï¼Œç»“æœå› ä¸ºå­¦ä¹ èƒ½åŠ›å¤ªå¼ºåˆè‡ªä¸ªå„¿é€†è¢­äº†-_-||</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1005b73909244017ad4660f4682ac9f8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_5pifQUnlt6XkvZzlrqQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767504982&amp;x-signature=9AyH3tivIVkwvM9ZabocuYrZGJo%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æ€»å¾—æ¥çœ‹äº”å­æ£‹é¡¹ç›®ä¸­ GPT-5 è¡¨ç°å¼ºåŠ¿æ‹¿å† å†›ï¼ŒClaude-3.7 å±…æ¬¡ï¼›å¾·å·æ‰‘å…‹é¡¹ç›®é‡Œ Claude-4 æ˜¯å† å†›å¸¸å®¢ï¼ŒOpenAI-CodeX å¤šè·äºšå†›ã€‚</p>
<h2 data-id="heading-2">æœ‰AIåœ¨æµ‘æ°´æ‘¸é±¼â€¦â€¦</h2>
<p>æ›´æœ‰æ„æ€çš„æ˜¯ä»–ä»¬è¿˜æ”¾äº†ä¸ªDeepSeekåšéšæœºç­–ç•¥ï¼Œè¿™å“¥ä»¬å±äºçæ‰“ï¼</p>
<p>å¦‚æœä¸€ä¸ªAIè¿è¿™ä¸ªâ€œè’™çœ¼ä¹±æ‰“â€çš„éšæœºé€‰æ‰‹éƒ½èµ¢ä¸äº†å°±å°´å°¬äº†â€¦â€¦</p>
<p>åŒæ—¶ä¹Ÿèµ·åˆ°ä¸€ä¸ªå¯¹æ¯”ï¼Œ</p>
<p>å°±åƒè€ƒè¯•æ—¶æœ‰ä¸ªå­¦ç”Ÿå…¨é è’™ç­”æ¡ˆï¼Œ</p>
<p>å…¶ä»–å­¦ç”Ÿåˆ†æ•°å¦‚æœæ¯”ä»–é«˜ï¼Œ</p>
<p>å°±èƒ½è¯æ˜å…¶ä»–å­¦ç”Ÿæ˜¯çœŸçš„æœ‰å®åŠ›ï¼Œè€Œä¸æ˜¯è¿æ°”å¥½ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1928e34dff4645c1b7536fa5a59d50ba~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_5pifQUnlt6XkvZzlrqQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767504982&amp;x-signature=q2Co6OLeTAL413W%2FGhqaXHEx8hQ%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h2 data-id="heading-3">æ‰å¿ƒäº†ï¼ä¼šå†™ä»£ç çš„ä¸ä¸€å®šä¸‹æ£‹å¥½</h2>
<ol>
<li>
<ol>
<li>è¿˜é¢„è®¾äº†ä¸ªå¯¹ç…§çœ‹AIæ˜¯ä¸æ˜¯çˆ±æ‰“å˜´ç‚®ï¼</li>
</ol>
</li>
</ol>
<p>LLM-Player =AIç›´æ¥çœ‹æ£‹ç›˜è¯´"æˆ‘ä¸‹è¿™é‡Œ"ï¼ˆçº¯æ¨ç†èƒ½åŠ›ï¼‰</p>
<p>Code Agent = AIå†™ä¸ªç¨‹åºæ¥ä¸‹æ£‹ï¼ˆç¼–ç¨‹å®ç°èƒ½åŠ›ï¼‰</p>
<p>å¦‚æœå†™ç¨‹åºçš„AIè¿˜ä¸å¦‚ç›´æ¥ä¸‹çš„ï¼Œè¯´æ˜ç¼–ç¨‹èƒ½åŠ›ä¸€èˆ¬ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fa9e7ad561b0489fa0c8ac1a0a0a243c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_5pifQUnlt6XkvZzlrqQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767504982&amp;x-signature=ssH2xOwV0NaYhEO2T8zCwd6Aq3A%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ç»“æœç°åœ¨çš„AIå†™å†™å‡ºæ¥çš„ç¨‹åºç»å¸¸è¿˜ä¸å¦‚è‡ªå·±ç›´æ¥ç© â€¢á´—â€¢ğŸ’§ä¼šä¸‹æ£‹â‰ ä¼šå†™ä¸‹æ£‹ç¨‹åºï¼ˆå°±åƒä¼šå¼€è½¦â‰ ä¼šé€ è½¦ï¼‰ï¼Œå¤§å¤šæ•°AIå†™çš„ç¨‹åºå¤ªç®€å•ï¼Œåè€Œé™åˆ¶äº†è‡ªå·±çš„å‘æŒ¥ï¼</p>
<p>è¿™â€¦â€¦</p>
<p>å°±åƒè®©AIç›´æ¥å‡­ç›´è§‰ä¸‹æ£‹vs è®©AIå…ˆå†™ä¸ªä¸‹æ£‹ç¨‹åºå†ä¸‹æ£‹ï¼Œé€šè¿‡å¯¹æ¯”èƒ½çœ‹å‡º"ç¼–ç¨‹èƒ½åŠ›"åˆ°åº•æœ‰æ²¡æœ‰ç”¨â€”â€”</p>
<h2 data-id="heading-4">å®Œå…¨å¼€æºï¼Œæ€ä¹ˆç©ä½ è¯´äº†ç®—ï¼ğŸš€</h2>
<p>é‚£ä¹ˆï¼Œé‡ç‚¹æ¥äº†ï¼</p>
<p>è¿™ä¹ˆé…·çš„é¡¹ç›®ï¼Œå®ƒå®Œå…¨å¼€æºï¼ğŸ‘</p>
<p>CATArenaå°±æ˜¯ä¸€ä¸ªå¼€æ”¾çš„AIèƒ½åŠ›â€œæ¸¸ä¹åœºâ€ï¼Œè§„åˆ™å’Œæ¸¸æˆéƒ½å¯ä»¥ä½ æ¥å®šä¹‰ã€‚</p>
<p>è¿™å·²ç»ä¸æ˜¯ä¸€ä¸ªå•çº¯çš„è¯„æµ‹äº†ï¼Œè¿™æ˜¯ä¸€ä¸ªæ­£åœ¨ç”Ÿé•¿çš„ã€å±äºæ‰€æœ‰å¼€å‘è€…å’ŒAIçˆ±å¥½è€…çš„è¶…çº§ç¤¾åŒºå®éªŒã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1b644e2307fd4537a99b61ecd232a734~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_5pifQUnlt6XkvZzlrqQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767504982&amp;x-signature=vwlTkXaaJYAkNjqkqFcQKhij0Zs%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>è¿™æ„å‘³ç€ä»€ä¹ˆï¼Ÿ</p>
<p>æ„å‘³ç€ä½ æˆ‘ä¸åªæ˜¯è§‚ä¼—ï¼Œä¹Ÿèƒ½æˆä¸ºè£åˆ¤ç”šè‡³æ¸¸æˆè®¾è®¡å¸ˆï¼</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a24db9a82e57447aaece55690c570825~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_5pifQUnlt6XkvZzlrqQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767504982&amp;x-signature=1nb%2FwO3KSW48T%2F%2FB%2FEUBTgEkIg0%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/863d8f61f1b049e48d691ad345a6cb99~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_5pifQUnlt6XkvZzlrqQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767504982&amp;x-signature=eUjdKEEVhzwdcSF6vQuby8Twcy4%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ä½ è§‰å¾—è®©AIæ‰“ç‹è€…ä¼šä¸ä¼šæ›´ç²¾å½©ï¼Ÿ</p>
<p>æˆ–è€…æä¸ªâ€œAIå•†ä¸šå‚è°‹å¤§èµ›â€ï¼Œçœ‹è°æ”¶ç›Šç‡æœ€é«˜ï¼Ÿ</p>
<p>ç”šè‡³ï¼Œäººã€AIã€ä»£ç Agentä¸‰æ–¹æ··æˆ˜â€¦</p>
<p>é˜¿æ˜Ÿå…‰æ˜¯æƒ³æƒ³å°±å¤´çš®å‘éº»ï¼Î£(âŠ™â–½âŠ™"a</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/09893134dbb442d89beb38c2ecf78ba7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_5pifQUnlt6XkvZzlrqQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767504982&amp;x-signature=TpVX7ORIgd%2FHAeVUh0tU1eThgWw%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æƒ³è¿›ä¸€æ­¥ç ”ç©¶çš„åŒå­¦å¯ä»¥çœ‹ä»–ä»¬è®ºæ–‡ğŸ‘‡</p>
<p>è®ºæ–‡åŸæ–‡æ•´ä½“ä¸‹æ¥ç»“è®ºæ˜¯å•†ä¸š AI è¡¨ç°æ›´èƒ½æ‰“ï¼Œç®€å•æ¸¸æˆå­¦èµ·æ¥é£å¿«ï¼Œå…³é”®ä¸ç”¨å¤§é‡äººå·¥æ ‡æ³¨è¿˜èƒ½æ‰©å±•ï¼Œç›´æ¥ç»™ AI è¯„ä¼°æä¾›äº†ä¸ªæ–°æ€è·¯ï¼</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/74d01887c30147b0a3bc6a47bf4bb395~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_5pifQUnlt6XkvZzlrqQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767504982&amp;x-signature=hDugcaLvDKWzZsXJpL1X6dQO81M%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>çœ‹å®Œè¿™äº›AIåœ¨ç‰Œæ¡Œä¸Šå‹¾å¿ƒæ–—è§’ï¼Œæˆ‘å¿½ç„¶è§‰å¾—ï¼ŒçœŸæ­£çš„æ™ºèƒ½ï¼ŒÂ <strong>ä¸èƒ½çœ‹åªåˆ·é¢˜é‚£ç§â€œæ­»è®°ç¡¬èƒŒâ€ï¼Œè¿˜è¦çœ‹ç­–ç•¥ç¼–ç èƒ½åŠ›ã€æ•ˆç‡è¡¨ç°ã€ç­–ç•¥è¡¨ç°ã€‚</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bd5ccd42b2c3450eb80fe097c9613888~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_5pifQUnlt6XkvZzlrqQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767504982&amp;x-signature=kC2T%2FvKn8%2BUMMRGh0SStEsd2p60%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å°±åº”è¯¥æ”¾åœ¨è¿™æ ·å¤æ‚ã€åŠ¨æ€ã€éœ€è¦æŒç»­å­¦ä¹ å’Œå¯¹æŠ—çš„ç¯å¢ƒé‡Œæ£€éªŒã€‚è¿™å¤§æ¦‚å°±æ˜¯AGIè¯„æµ‹è¯¥æœ‰çš„æ ·å­â€”â€”ä¸æ­¢äºç­”é¢˜ï¼Œæ›´å…³ä¹ç”Ÿå­˜ä¸è¿›åŒ–ã€‚</p>
<h2 data-id="heading-5">æ¥ï¼Œé¢„æµ‹ä¸€ä¸‹</h2>
<p>ä½ è§‰å¾—ä¸‹ä¸€å‘¨ï¼Œå¾·å·æ‰‘å…‹çš„èƒœç‡ä¹‹ç‹ä¼šæ˜¯å“ªä¸ªæ¨¡å‹ï¼Ÿ</p>
<p>æˆ‘æ˜¯é˜¿æ˜Ÿï¼Œæˆ‘ä»¬ä¸‹æœŸå†è§ï¼ğŸ‘‹</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fdb395176ed048d7b7a031921761347a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_5pifQUnlt6XkvZzlrqQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767504982&amp;x-signature=LLBcHA%2FVGsObZuzPekYjDKYZyqU%3D" alt="å›¾ç‰‡" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¿éšœç¼“å­˜å’Œæ•°æ®åº“å°½é‡ä¸€è‡´çš„ç­–ç•¥]]></title>    <link>https://juejin.cn/post/7588104741610848266</link>    <guid>https://juejin.cn/post/7588104741610848266</guid>    <pubDate>2025-12-28T04:03:48.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588104741610848266" data-draft-id="7588139768275337267" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¿éšœç¼“å­˜å’Œæ•°æ®åº“å°½é‡ä¸€è‡´çš„ç­–ç•¥"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-28T04:03:48.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è‡ªç”±ç”Ÿé•¿2024"/> <meta itemprop="url" content="https://juejin.cn/user/1591748569862670"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¿éšœç¼“å­˜å’Œæ•°æ®åº“å°½é‡ä¸€è‡´çš„ç­–ç•¥
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1591748569862670/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è‡ªç”±ç”Ÿé•¿2024
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-28T04:03:48.000Z" title="Sun Dec 28 2025 04:03:48 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-28
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    12
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">åŒåˆ ç­–ç•¥ Cache-Aside</h2>
<p>ç¬¬ä¸€æ¬¡åˆ ï¼ˆæŠŠè·¯å µæ­»ï¼‰ï¼š</p>
<p>å…ˆæŠŠ Redis é‡Œçš„ç¼“å­˜åˆ æ‰ã€‚
ç›®çš„ï¼šè®©æ¥ä¸‹æ¥çš„è¯»è¯·æ±‚å¿…é¡»å»æŸ¥æ•°æ®åº“ï¼Œé¿å…è¯»åˆ°æ—§ç¼“å­˜ã€‚
æ›´æ–°æ•°æ®åº“ï¼šæŠŠ MySQL é‡Œçš„æ•°æ®æ›´æ–°æˆæœ€æ–°çš„ï¼ˆæ¯”å¦‚ 9ï¼‰ã€‚</p>
<p>å»¶è¿Ÿç­‰å¾…ï¼ˆå…³é”®ä¸€æ­¥ï¼‰ï¼š
çº¿ç¨‹åœ¨è¿™é‡Œç¡ä¸€ä¼šå„¿ï¼ˆæ¯”å¦‚ 1 ç§’ï¼‰ã€‚
ç›®çš„ï¼šè¿™ä¸€æ­¥éå¸¸å…³é”®ï¼æˆ‘ä»¬è¦ç­‰ä»€ä¹ˆå‘¢ï¼Ÿ</p>
<p>ç­‰é‚£äº›åœ¨â€œç¬¬ä¸€æ¬¡åˆ â€ä¹‹åã€â€œæ›´æ–°æ•°æ®åº“â€ä¹‹å‰çš„é‚£ä¸€ç¬é—´è¿›æ¥çš„è¯»è¯·æ±‚ã€‚</p>
<p>è®©å®ƒä»¬æœ‰è¶³å¤Ÿçš„æ—¶é—´å»æ•°æ®åº“è¯»åˆ°æ—§æ•°æ®ï¼ˆæƒ³æƒ³ï¼Œä¸ºä»€ä¹ˆï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿè¿™é‡Œæ˜¯ç†è§£å»¶è¿ŸåŒåˆ çš„å…³é”®ï¼‰ï¼Œå¹¶æŠŠè¿™ä¸ªæ—§æ•°æ®é‡æ–°å†™å› Redisï¼ˆå˜æˆè„æ•°æ®ï¼‰ã€‚</p>
<p>æ•…æ„ç•™å‡ºè¿™ä¸ªæ—¶é—´çª—å£ï¼Œå°±æ˜¯ä¸ºäº†æŠ“å‡ºè¿™äº›â€œæ¼ç½‘ä¹‹é±¼â€ã€‚</p>
<p>ç¬¬äºŒæ¬¡åˆ ï¼ˆæ¸…ç†æˆ˜åœºï¼‰ï¼š
ç¡é†’äº†ï¼Œå†åˆ ä¸€æ¬¡ Redisã€‚
ç›®çš„ï¼šæŠŠåˆšæ‰é‚£äº›è¯»è¯·æ±‚å¯èƒ½å†™è¿›å»çš„è„æ•°æ®ï¼ˆæ—§æ•°æ®ï¼‰å†æ¬¡å¹²æ‰ï¼</p>
<p>å»¶è¿Ÿç¬¬äºŒæ¬¡åˆ é™¤ï¼Œä¸ºäº†é˜²æ­¢æ›´æ–°æ•°æ®åº“æ—¶ï¼Œæœ‰å¹¶å‘è¯»è¯·æ±‚æŠŠæ—§æ•°æ®å›å¡«åˆ°ç¼“å­˜ï¼Œé€ æˆè„æ•°æ®ã€‚</p>
<p>å› ä¸ºæ•°æ®åº“ï¼ˆMySQLï¼‰çš„â€œæäº¤â€å’Œâ€œåŒæ­¥â€æ˜¯éœ€è¦æ—¶é—´çš„ã€‚</p>
<p>åœ¨é«˜å¹¶å‘æˆ–è€…ä¸»ä»åˆ†ç¦»çš„æ¶æ„ä¸‹ï¼Œæ•°æ®åº“ä¸æ˜¯â€œç¬é—´â€å°±å˜çš„ã€‚å“ªæ€•åªæœ‰ä¸€æ¯«ç§’çš„å»¶è¿Ÿï¼Œä¹Ÿä¼šæœ‰å…¶ä»–çš„çº¿ç¨‹è¯»åˆ°æ—§å€¼ã€‚</p>
<h3 data-id="heading-1">åˆ -æ”¹-ç«‹é©¬å†åˆ â€ ä¸ºä»€ä¹ˆä¸è¡Œï¼Ÿ</h3>
<p>å¦‚æœåˆ å¾—å¤ªå¿«ï¼ˆä¸ç­‰å¾…ï¼‰ï¼Œç¬¬äºŒæ¬¡åˆ å¯èƒ½æ ¹æœ¬æ²¡ç”¨ï¼Œç”šè‡³ä¼šæŠŠåˆšå†™è¿›å»çš„â€œæ–°æ•°æ®â€ç»™è¯¯æ€äº†ï¼Œç›¸å½“äºç™½å¹²ã€‚</p>
<h3 data-id="heading-2">ä¸ºä»€ä¹ˆä¸ç›´æ¥åˆ -å†™-æ›´æ–°ï¼Ÿ</h3>
<p>ç¬¬äºŒæ¬¡ä¸ºä»€ä¹ˆä¸ç›´æ¥æ›´æ–°å‘¢ï¼Ÿä¸ºä»€ä¹ˆä¸æ›´æ–°çš„æ—¶å€™å›å¡«å‘¢ï¼Ÿ</p>
<p>å¦‚æœé€‰æ‹©æ›´æ–°ç¼“å­˜â€ï¼Œå¿…é¡»ä¿è¯ â€œè¯»å–æ–°æ•°æ®â€ å’Œ â€œå†™å…¥ç¼“å­˜â€ æ˜¯ä¸€ä¸ªåŸå­æ“ä½œï¼ˆå³ä¸å¯åˆ†å‰²çš„æ•´ä½“ï¼‰ã€‚ä½†è¿™æ ·æˆæœ¬é«˜ã€‚</p>
<p>æ›´æ–°ï¼ˆUpdateï¼‰ï¼š
ä½ éœ€è¦å…ˆæŠŠæ•°æ®ä»æ•°æ®åº“æŸ¥å‡ºæ¥ï¼ˆä¸€æ¬¡ IOï¼‰ã€‚
ä½ éœ€è¦æŠŠæ•°æ®åºåˆ—åŒ–ï¼ˆè½¬æˆ JSON ç­‰æ ¼å¼ï¼‰ã€‚
ä½ éœ€è¦æŠŠæ•´ä¸ªå¤§å­—ç¬¦ä¸²å‘ç»™ Redisï¼ˆå ç½‘ç»œå¸¦å®½ï¼‰ã€‚
Redis éœ€è¦ç”³è¯·å†…å­˜ç©ºé—´å­˜è¿™ä¸ªå¤§å¯¹è±¡ã€‚</p>
<p>åˆ é™¤ï¼ˆDeleteï¼‰ï¼šå°±æ˜¯ä¸€ä¸ªç®€å•çš„ DEL key å‘½ä»¤ã€‚æ—¶é—´å¤æ‚åº¦æ˜¯ O(1)ï¼Œéå¸¸å¿«ï¼Œä¸å å¸¦å®½ã€‚</p>
<p>æˆæœ¬æé«˜ï¼</p>
<p>æ­¥éª¤å¤šäº†ï¼Œå®¹æ˜“è¢«å…¶ä»–çº¿ç¨‹å¹²æ‰°ï¼Œå¹¶å‘ä¸å®‰å…¨äº†ã€‚</p>
<h3 data-id="heading-3">æ›´æ–°æ•°æ®çš„æ—¶å€™ä¸SETå€¼ï¼Œåªæœ‰æŸ¥è¯¢çš„æ—¶å€™æ‰SETå€¼</h3>
<p>å› ä¸ºè¯»è¯·æ±‚å» SET æ•°æ®æ˜¯æœ€å®‰å…¨çš„ã€‚å› ä¸ºå®ƒæ‹¿çš„æ•°æ®æ˜¯å®ƒåˆšåˆšä»æ•°æ®åº“æŸ¥å‡ºæ¥çš„ï¼Œç»å¯¹æ˜¯æœ€æ–°çš„ï¼Œç»å¯¹ä¸ä¼šå‡ºç°å¹¶å‘è¦†ç›–çš„é—®é¢˜ã€‚</p>
<p>æƒ³è±¡ä¸€ä¸‹ï¼Œä½ æ˜¯ä¸€ä¸ªå›¾ä¹¦ç®¡ç†å‘˜ï¼ˆå†™è¯·æ±‚ï¼‰ï¼Œä½ è¦æŠŠã€ŠJavaç¼–ç¨‹æ€æƒ³ã€‹è¿™æœ¬ä¹¦çš„ä»·æ ¼ä» 50 å…ƒæ”¹æˆ 60 å…ƒã€‚</p>
<p>âŒ é”™è¯¯çš„åšæ³•ï¼ˆå†™æ—¶å›å¡«/æ›´æ–°ï¼‰ï¼š
ä½ è·‘å»ä¹¦æ¶ï¼ˆMySQLï¼‰ï¼ŒæŠŠä»·æ ¼æ”¹æˆäº† 60 å…ƒã€‚
ä½ é¡ºæ‰‹æŠŠç¼“å­˜åŒºï¼ˆRedisï¼‰é‡Œçš„é‚£å¼ å¡ç‰‡ä¹Ÿæ”¹æˆäº† 60 å…ƒï¼ˆå›å¡«ï¼‰ã€‚</p>
<p>å¦ä¸€ä¸ªç®¡ç†å‘˜ï¼ˆçº¿ç¨‹Bï¼‰ä¹Ÿæ¥æ”¹ä»·æ ¼ï¼Œä»–æŠŠä»·æ ¼æ”¹æˆäº† 70 å…ƒï¼Œå¹¶ä¸”ä»–æ‰‹é€Ÿå¿«ï¼Œå…ˆæ›´æ–°äº†ç¼“å­˜å¡ç‰‡ã€‚
ç„¶åä½ çš„ç½‘ç»œæ¢å¤äº†ï¼Œä½ æŠŠå¡ç‰‡åˆæ”¹å›äº† 60 å…ƒã€‚</p>
<p>A write X as 60<br/>
B write X as 70<br/>
B update Cache X as 70<br/>
A update Cache X as 60</p>
<p>B update Cache Lost!<br/>
C Get X = 60</p>
<p>å¤šä¸ªçº¿ç¨‹äº¤å‰æ”¹ä¸€ä¸ªå€¼ï¼Œä¸¤ä¸ªå¯èƒ½è¢«æ‹†åˆ†çš„æ­¥éª¤ï¼Œå¤šä¸€ä¸ªæ­¥éª¤ï¼Œå°±å®¹æ˜“å‡ºé”™ã€‚</p>
<p>æ‰€ä»¥å†™çº¿ç¨‹åªä¿®æ”¹ä¸€æ¬¡</p>
<p>A write X as 60<br/>
B write X as 70<br/>
C Get X = 70 ï¼ˆé€Ÿåº¦å¿«ï¼‰<br/>
C update Cache X as 70</p>
<p>ä¸è¦æŠŠä¸¤æ¬¡å†™ï¼ˆå†™DBå’Œå†™Cacheï¼‰æ”¾åˆ°ä¸€èµ·å»ã€‚</p>
<h2 data-id="heading-4">â€œè¯»å†™ç©¿é€â€ (Read/Write Through)</h2>
<p>æ‰¾ä¸ªç®¡å®¶ï¼ˆç¼“å­˜å±‚ï¼‰å¸®ä½ ç®¡æ•°æ®åº“ã€‚</p>
<p>ä½ åªå’Œç¼“å­˜ï¼ˆRedisï¼‰æ‰“äº¤é“ã€‚</p>
<p>è¯»ï¼šä½ é—® Redisï¼ŒRedis å‘ç°æ²¡æœ‰ï¼Œå®ƒè‡ªå·±å»æ•°æ®åº“æŸ¥ï¼ŒæŸ¥å®Œè‡ªå·±å­˜ä¸€ä»½ï¼Œå†ç»™ä½ ã€‚</p>
<p>å†™ï¼šä½ å‘Šè¯‰ Redis â€œæ”¹æ•°æ®â€ï¼ŒRedis å…ˆæŠŠç¼“å­˜æ”¹äº†ï¼Œç„¶åå®ƒåŒæ­¥å»æŠŠæ•°æ®åº“ä¹Ÿæ”¹äº†ã€‚</p>
<h2 data-id="heading-5">â€œå¼‚æ­¥å›å†™â€ (Write Behind / Write Back)</h2>
<p>æ ¸å¿ƒæ€æƒ³ï¼šåªå†™ç¼“å­˜ï¼Œæ•°æ®åº“ï¼Ÿä»¥åå†è¯´ï¼</p>
<p>åœºæ™¯ï¼šå†™æ“ä½œç‰¹åˆ«å¤šï¼Œç‰¹åˆ«å¿«ï¼Œæ•°æ®åº“æ ¹æœ¬æ‰›ä¸ä½ï¼ˆæ¯”å¦‚ç›´æ’­é—´çš„ç‚¹èµæ•°ã€è®¡æ•°å™¨ï¼‰ã€‚</p>
<p>ä¼˜ç‚¹ï¼šæ€§èƒ½æé«˜ï¼ æ•°æ®åº“å‹åŠ›æå°ï¼Œå› ä¸ºæ˜¯æ‰¹é‡å†™çš„ã€‚
ç¼ºç‚¹ï¼šæ•°æ®ä¸å®‰å…¨ï¼ å¦‚æœ Redis æŒ‚äº†ï¼Œè¿˜æ²¡æ¥å¾—åŠåŒæ­¥çš„æ•°æ®å°±ä¸¢äº†ã€‚</p>
<p>é€‚ç”¨ï¼šå¯¹æ•°æ®ä¸€è‡´æ€§è¦æ±‚ä¸é«˜ï¼Œä½†å¯¹æ€§èƒ½è¦æ±‚æé«˜çš„åœºæ™¯ï¼ˆæ¯”å¦‚ç‚¹èµã€æµè§ˆé‡ã€æ—¥å¿—ï¼‰ã€‚</p>
<h3 data-id="heading-6">å’Œè¯»å†™ç©¿é€çš„å¯¹æ¯”</h3>
<ol>
<li>Read/Write Throughï¼ˆè¯»å†™ç©¿é€ï¼‰â€”â€” â€œåŒæ­¥ç®¡å®¶â€
è¿™ä¸ªæ¨¡å¼ä¸‹ï¼ŒRedis å°±åƒä¸€ä¸ªè¶…çº§è´Ÿè´£ä»»çš„ç®¡å®¶ã€‚</li>
</ol>
<p>ä½ ï¼ˆåº”ç”¨ç¨‹åºï¼‰ï¼šæŠŠæ•°æ®äº¤ç»™ç®¡å®¶ï¼Œè¯´â€œæŠŠåº“å­˜æ”¹æˆ 9â€ã€‚<br/>
ç®¡å®¶ï¼ˆRedisï¼‰ï¼šâ€œå¥½çš„ä¸»äººï¼â€<br/>
ä»–å…ˆæŠŠå®¶é‡Œï¼ˆå†…å­˜/ç¼“å­˜ï¼‰çš„åº“å­˜æ”¹æˆ 9ã€‚<br/>
ç„¶åï¼Œä»–äº²è‡ªæ‹¿ç€è´¦æœ¬ï¼Œè·‘ä¸€è¶Ÿé“¶è¡Œï¼ˆæ•°æ®åº“ï¼‰ï¼ŒæŠŠæ•°æ®åº“é‡Œçš„åº“å­˜ä¹Ÿæ”¹æˆ 9<br/>
ç›´åˆ°é“¶è¡Œç¡®è®¤æ”¹å¥½äº†ï¼Œä»–æ‰å›æ¥è·Ÿä½ è¯´ï¼šâ€œä¸»äººï¼Œæå®šäº†ï¼â€<br/>
ç‰¹ç‚¹ï¼šåŒæ­¥ã€‚ä½ å¿…é¡»ç­‰ç®¡å®¶ä»é“¶è¡Œå›æ¥ï¼Œä½ æ‰èƒ½ç»§ç»­å¹²ä¸‹ä¸€ä»¶äº‹ã€‚æ•°æ®ç»å¯¹ä¸€è‡´ï¼Œä½†ç¨å¾®æ…¢ä¸€ç‚¹ç‚¹ã€‚</p>
<ol start="2">
<li>Write Behind Cachingï¼ˆå¼‚æ­¥å›å†™/å†™å›ï¼‰â€”â€” â€œç”©æ‰‹æŒæŸœâ€
è¿™ä¸ªæ¨¡å¼ä¸‹ï¼ŒRedis å°±åƒä¸€ä¸ªç‰¹åˆ«æ‡’ä½†æ˜¯æ•ˆç‡é«˜çš„ç§˜ä¹¦ã€‚</li>
</ol>
<p>ä½ ï¼ˆåº”ç”¨ç¨‹åºï¼‰ï¼šæŠŠæ•°æ®æ‰”ç»™ç§˜ä¹¦ï¼Œè¯´â€œæŠŠåº“å­˜æ”¹æˆ 9â€ã€‚<br/>
ç§˜ä¹¦ï¼ˆRedisï¼‰ï¼šâ€œæ”¶åˆ°ï¼â€ï¼ˆå•ªçš„ä¸€ä¸‹ç›–ä¸ªç« ï¼Œç«‹é©¬å›å¤ä½ ï¼‰<br/>
ä»–åªæŠŠå®¶é‡Œï¼ˆå†…å­˜/ç¼“å­˜ï¼‰çš„åº“å­˜æ”¹æˆ 9ã€‚<br/>
è‡³äºé“¶è¡Œï¼ˆæ•°æ®åº“ï¼‰ï¼Ÿä»–è®°åœ¨å°æœ¬æœ¬ä¸Šï¼šâ€œå›å¤´æœ‰ç©ºå†å­˜å§â€ã€‚<br/>
ä»–æ ¹æœ¬ä¸å»é“¶è¡Œï¼Œç›´æ¥è·Ÿä½ è¯´â€œæå®šäº†â€ï¼Œè®©ä½ å»å¹²åˆ«çš„ã€‚<br/>
ä»–ä»€ä¹ˆæ—¶å€™å»é“¶è¡Œï¼Ÿç­‰ä»–å¿ƒæƒ…å¥½ï¼Œæˆ–è€…æ”’äº†ä¸€å¤§å †å°æœ¬æœ¬ï¼Œæ‰æ…¢æ‚ æ‚ å»æ›´æ–°æ•°æ®åº“ã€‚<br/>
ç‰¹ç‚¹ï¼šå¼‚æ­¥ã€‚ä½ ä¸ç”¨ç­‰ä»–ï¼Œé€Ÿåº¦é£å¿«ã€‚ä½†å¦‚æœä»–è¿˜æ²¡æ¥å¾—åŠå»é“¶è¡Œï¼Œçªç„¶çŒæ­»ï¼ˆæœåŠ¡å™¨å®•æœºï¼‰äº†ï¼Œé‚£è¿™ç¬”é’±ï¼ˆæ•°æ®ï¼‰å°±ä¸¢äº†ã€‚</p>
<h3 data-id="heading-7">å’ŒCache Asideçš„å¯¹æ¯”</h3>
<p>Read/Write Throughï¼ˆç©¿é€æ¨¡å¼ï¼‰ï¼Œç¼“å­˜æ˜¯â€œé—¨å«â€ï¼Œæ‰€æœ‰è¯»å†™éƒ½å¿…é¡»ç»è¿‡å®ƒï¼Œå®ƒè´Ÿè´£åŒæ­¥æ›´æ–°æ•°æ®åº“ã€‚</p>
<p>Cache-Aside æ˜¯ï¼š</p>
<p>è¯»çš„æ—¶å€™ï¼šå…ˆçœ‹ä¸€çœ¼æ—è¾¹çš„ç¼“å­˜ï¼Œæ²¡æœ‰å°±è‡ªå·±å»æ•°æ®åº“æ‹¿ï¼Œé¡ºä¾¿æŠŠç»“æœæ”¾å›ç¼“å­˜ï¼ˆå›å¡«ï¼‰ã€‚
å†™çš„æ—¶å€™ï¼šç›´æ¥æ”¹æ•°æ®åº“ï¼Œç„¶åé¡ºæ‰‹æŠŠæ—è¾¹çš„ç¼“å­˜åˆ æ‰ï¼Œè®©ç¼“å­˜å¤±æ•ˆã€‚
æ•´ä¸ªè¿‡ç¨‹ï¼Œç¼“å­˜å§‹ç»ˆæ˜¯ä¸ªâ€œå¤–æŒ‚â€ï¼Œä¸æ˜¯å¿…ç»ä¹‹è·¯ã€‚</p>
<h2 data-id="heading-8">ä¸€èˆ¬ç­–ç•¥</h2>
<p>è¯´è½¬è´¦æœ¬æ¥å°±è¦æ…¢ä¸€ç‚¹å¥½ï¼Œä¸ºäº†å®‰å…¨ã€‚</p>
<p>ç‚¹èµå•Šè¿™äº›ä¸œè¥¿ä¸æ˜¯é‚£ä¹ˆé‡è¦ï¼Œå¯ä»¥é€šè¿‡æœ€ç»ˆä¸€è‡´æ€§æ¥å®ç°ï¼Œè¿™äº›å°±æ²¡æœ‰å¿…è¦è¦å°±æ˜¯è¦è®©äººç­‰å¤ªä¹…ã€‚</p>
<p>ä¸åŒçš„ä¸šåŠ¡ç”¨ä¸åŒçš„ç­–ç•¥ã€‚</p>
<p>åœ¨é«˜å¹¶å‘ç³»ç»Ÿä¸­ï¼Œä¿®æ”¹æ•°æ®è¿˜æœªå®Œæˆçš„æ—¶å€™ï¼Œä¸­é—´æŸ¥è¯¢åˆ°æ—§å€¼çš„æƒ…å†µï¼Œæ˜¯æ— æ³•å®Œå…¨é¿å…çš„ï¼Œä½†æˆ‘ä»¬å¯ä»¥æ ¹æ®ä¸šåŠ¡éœ€æ±‚ï¼Œå†³å®šæ˜¯å¦å®¹å¿å®ƒã€ä»¥åŠå¦‚ä½•æ§åˆ¶å®ƒçš„å½±å“èŒƒå›´ã€‚</p>
<p>å¼ºä¸€è‡´æ€§åœºæ™¯
åœºæ™¯ï¼šé“¶è¡Œä½™é¢ã€æ”¯ä»˜çŠ¶æ€ã€åº“å­˜è¶…å–ã€è®¢å•åˆ›å»ºã€‚
ç”¨æˆ·æ„Ÿå—ï¼šæˆ‘è½¬äº† 100 å—ï¼Œå¯¹æ–¹è¯´æ²¡æ”¶åˆ°ï¼›æˆ‘ä¹°äº†æœ€åä¸€ä»¶å•†å“ï¼Œç»“æœåˆ«äººä¹Ÿä¹°åˆ°äº† â€”â€” ä¿¡ä»»å´©å¡Œï¼</p>
<p>ç­–ç•¥ï¼šå¿…é¡»ç”¨å¼ºä¸€è‡´æ€§æ‰‹æ®µï¼š</p>
<p>æ•°æ®åº“äº‹åŠ¡ + ä¹è§‚é”/æ‚²è§‚é”
å¼ºåˆ¶è¯»ä¸»åº“ï¼ˆç»•è¿‡ä»åº“ï¼‰</p>
<h2 data-id="heading-9">ç§’æ€ä¿®æ”¹åº“å­˜çš„åœºæ™¯</h2>
<p>ç§’æ€å•†å“ï¼Œä¿®æ”¹åº“å­˜çš„æ€ä¹ˆå¼„ï¼Ÿ</p>
<p>åˆ†å±‚å‰Šå³° + åŸå­æ“ä½œ + å¼‚æ­¥è§£è€¦ã€‚</p>
<p>å‰åç«¯é˜²åˆ·ï¼Œä¸€ä¸ªäºº3ç§’é’Ÿä¹‹å†…åªèƒ½è®¿é—®ä¸€æ¬¡ï¼Œæ‹’ç»æœºå™¨äººã€‚</p>
<p>ç”¨ Redis å½“â€œå‰ç½®åº“å­˜â€</p>
<p>é¢„çƒ­åº“å­˜ï¼š
ç§’æ€å¼€å§‹å‰ï¼ŒæŠŠå•†å“çš„åº“å­˜æ•°é‡ï¼ˆæ¯”å¦‚ 100ï¼‰æå‰å†™å…¥ Redisã€‚
Key: stock:product_123, Value: 100</p>
<p>åŸå­æ‰£å‡ï¼š
ç”¨æˆ·ç‚¹å‡»è´­ä¹°æ—¶ï¼Œä½ çš„æœåŠ¡ä¸æ˜¯å»æŸ¥ MySQLï¼Œè€Œæ˜¯ç›´æ¥å‘ Redis å‘é€ä¸€ä¸ªåŸå­æ“ä½œã€‚
æŸ¥è¯¢å¹¶ä¸”æ‰£å‡ã€‚
è¦ä¹ˆæˆåŠŸï¼Œè¦ä¹ˆå¤±è´¥å›æ»šã€‚</p>
<p>å¦‚æœè¿”å›å€¼ &gt;= 0ï¼Œè¯´æ˜æ‰£å‡æˆåŠŸï¼
å¦‚æœè¿”å›å€¼ == -1ï¼Œè¯´æ˜åº“å­˜æ²¡äº†ï¼Œç›´æ¥å‘Šè¯‰ç”¨æˆ·â€œæ‰‹æ…¢äº†â€ã€‚</p>
<p>Redis æ˜¯å†…å­˜æ“ä½œï¼Œé€Ÿåº¦æå¿«ï¼ˆå¾®ç§’çº§ï¼‰ã€‚</p>
<p>å½“ Redis æ‰£å‡æˆåŠŸåï¼Œç«‹åˆ»æ„é€ ä¸€æ¡æ¶ˆæ¯ï¼Œå‘é€åˆ° Kafka æˆ– RocketMQï¼ŒæŠŠè¿™ä¸ªæˆåŠŸçš„è®¢å•ä¿¡æ¯ï¼Œæœ€ç»ˆæŒä¹…åŒ–åˆ° MySQL é‡Œã€‚</p>
<p>æ¶ˆæ¯å†…å®¹ï¼š{ "user_id": 1001, "product_id": 123, "count": 1 }</p>
<p>ç«‹åˆ»è¿”å›ç»™ç”¨æˆ·ï¼šâ€œæ­å–œä½ ï¼ŒæŠ¢è´­æˆåŠŸï¼â€</p>
<p>åå°æ¶ˆè´¹è€…ä» MQ é‡Œæ…¢æ…¢æ¶ˆè´¹è¿™æ¡æ¶ˆæ¯ï¼š</p>
<p>å†æ¬¡æ ¡éªŒä¸€ä¸‹ï¼ˆé˜²é‡æ”¾æ”»å‡»ï¼‰ã€‚</p>
<p>åœ¨ MySQL é‡Œåˆ›å»ºè®¢å•ã€æ‰£å‡çœŸå®åº“å­˜ã€æ‰£ç”¨æˆ·ä½™é¢ç­‰ã€‚</p>
<p>è¿™æ ·å†™çš„å¥½å¤„ï¼š</p>
<p>ç”¨æˆ·ä½“éªŒæä½³ï¼šç”¨æˆ·æ„Ÿè§‰â€œç§’å›â€ï¼Œå› ä¸ºæ²¡ç­‰æ•°æ®åº“ã€‚</p>
<p>ç³»ç»Ÿè§£è€¦ï¼šå³ä½¿ MySQL æŒ‚äº†ï¼Œæ¶ˆæ¯è¿˜åœ¨ MQ é‡Œï¼Œç­‰ DB æ¢å¤äº†å†å¤„ç†ã€‚</p>
<p>å‰Šå³°å¡«è°·ï¼šMQ æŠŠç¬é—´çš„å†™å‹åŠ›ï¼Œå˜æˆäº†å¹³ç¼“çš„åå°ä»»åŠ¡ã€‚</p>
<h2 data-id="heading-10">å‚è€ƒ</h2>
<p>[1] ç¼“å­˜æ›´æ–°ç­–ç•¥ä¸æ•°æ®ä¸€è‡´æ€§ä¿éšœ <a href="https://juejin.cn/post/7585463195200946226" target="_blank" title="https://juejin.cn/post/7585463195200946226">juejin.cn/post/758546â€¦</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Vue3æ€§èƒ½ä¼˜åŒ–å®æˆ˜ï¼š7ä¸ªè¢«ä½ä¼°çš„Composition APIæŠ€å·§è®©æ¸²æŸ“æé€Ÿ40%]]></title>    <link>https://juejin.cn/post/7588098335790923776</link>    <guid>https://juejin.cn/post/7588098335790923776</guid>    <pubDate>2025-12-28T04:31:55.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588098335790923776" data-draft-id="7588093282531049524" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Vue3æ€§èƒ½ä¼˜åŒ–å®æˆ˜ï¼š7ä¸ªè¢«ä½ä¼°çš„Composition APIæŠ€å·§è®©æ¸²æŸ“æé€Ÿ40%"/> <meta itemprop="keywords" content="åç«¯,å‰ç«¯,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-12-28T04:31:55.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é˜¿æ©™çš„ç™¾å®ç®±"/> <meta itemprop="url" content="https://juejin.cn/user/1638743356481367"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Vue3æ€§èƒ½ä¼˜åŒ–å®æˆ˜ï¼š7ä¸ªè¢«ä½ä¼°çš„Composition APIæŠ€å·§è®©æ¸²æŸ“æé€Ÿ40%
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1638743356481367/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é˜¿æ©™çš„ç™¾å®ç®±
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-28T04:31:55.000Z" title="Sun Dec 28 2025 04:31:55 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-28
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0"><strong>Vue3æ€§èƒ½ä¼˜åŒ–å®æˆ˜ï¼š7ä¸ªè¢«ä½ä¼°çš„Composition APIæŠ€å·§è®©æ¸²æŸ“æé€Ÿ40%</strong></h2>
<h2 data-id="heading-1">å¼•è¨€</h2>
<p>Vue 3çš„Composition APIä¸ä»…é‡æ„äº†ä»£ç ç»„ç»‡æ–¹å¼ï¼Œæ›´ä¸ºæ€§èƒ½ä¼˜åŒ–æä¾›äº†æ–°çš„å¯èƒ½æ€§ã€‚å°½ç®¡è®¸å¤šå¼€å‘è€…å·²ç»ç†Ÿæ‚‰äº†<code>ref</code>ã€<code>reactive</code>å’Œ<code>watch</code>ç­‰åŸºç¡€APIï¼Œä½†ä¸€äº›éšè—çš„æŠ€å·§å´è¢«ä¸¥é‡ä½ä¼°ã€‚æœ¬æ–‡å°†æ·±å…¥æ¢è®¨7ä¸ªé²œä¸ºäººçŸ¥çš„Composition APIæŠ€å·§ï¼Œç»“åˆçœŸå®åœºæ™¯å’Œæ€§èƒ½æµ‹è¯•æ•°æ®ï¼Œå±•ç¤ºå¦‚ä½•é€šè¿‡è¿™äº›æ–¹æ³•å®ç°é«˜è¾¾40%çš„æ¸²æŸ“é€Ÿåº¦æå‡ã€‚</p>
<h2 data-id="heading-2">ä¸»ä½“</h2>
<h3 data-id="heading-3">1. <code>shallowRef</code>ä¸<code>shallowReactive</code>ï¼šé¿å…æ·±åº¦å“åº”å¼çš„å¼€é”€</h3>
<p><strong>é—®é¢˜</strong>ï¼šé»˜è®¤æƒ…å†µä¸‹ï¼ŒVueçš„å“åº”å¼ç³»ç»Ÿä¼šå¯¹å¯¹è±¡è¿›è¡Œæ·±åº¦é€’å½’ä»£ç†ï¼ˆå¦‚<code>reactive</code>æˆ–<code>ref</code>ï¼‰ï¼Œè¿™åœ¨å¤„ç†å¤§å‹å¯¹è±¡æ—¶å¯èƒ½å¯¼è‡´ä¸å¿…è¦çš„æ€§èƒ½æŸè€—ã€‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<ul>
<li><strong><code>shallowRef</code></strong>ï¼šä»…å¯¹<code>.value</code>å±æ€§åšå“åº”å¼è·Ÿè¸ªï¼Œå†…éƒ¨å€¼å˜åŒ–ä¸ä¼šè§¦å‘æ›´æ–°ã€‚</li>
<li><strong><code>shallowReactive</code></strong>ï¼šåªä»£ç†å¯¹è±¡çš„ç¬¬ä¸€å±‚å±æ€§ï¼Œæ·±å±‚å±æ€§å˜æ›´éœ€æ‰‹åŠ¨è§¦å‘æ›´æ–°ã€‚</li>
</ul>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> largeList = <span class="hljs-title function_">shallowRef</span>([...]); <span class="hljs-comment">// åˆ—è¡¨å†…éƒ¨å˜åŒ–ä¸ä¼šè§¦å‘æ¸²æŸ“</span>
<span class="hljs-keyword">const</span> config = <span class="hljs-title function_">shallowReactive</span>({ <span class="hljs-attr">a</span>: { <span class="hljs-attr">b</span>: <span class="hljs-number">1</span> } }); <span class="hljs-comment">// config.a.bå˜åŒ–éœ€æ‰‹åŠ¨å¤„ç†</span>
</code></pre>
<p><strong>æ€§èƒ½æ”¶ç›Š</strong>ï¼šåœ¨æµ‹è¯•ä¸­ï¼Œå¯¹ä¸€ä¸ªåŒ…å«1000é¡¹åµŒå¥—å¯¹è±¡çš„åˆ—è¡¨ä½¿ç”¨<code>shallowReactive</code>åï¼Œåˆå§‹åŒ–æ—¶é—´å‡å°‘35%ã€‚</p>
<hr/>
<h3 data-id="heading-4">2. <code>markRaw</code>ï¼šå½»åº•è·³è¿‡Proxyä»£ç†</h3>
<p><strong>åœºæ™¯</strong>ï¼šæŸäº›æ•°æ®ï¼ˆå¦‚ç¬¬ä¸‰æ–¹åº“å®ä¾‹ã€é™æ€é…ç½®ï¼‰ä¸éœ€è¦å“åº”å¼ç‰¹æ€§æ—¶ï¼Œå¼ºåˆ¶Vueè·³è¿‡ä»£ç†ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { markRaw, reactive } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>;
<span class="hljs-keyword">const</span> staticData = <span class="hljs-title function_">markRaw</span>({ ... });
<span class="hljs-keyword">const</span> state = <span class="hljs-title function_">reactive</span>({ 
  <span class="hljs-attr">list</span>: [],
  <span class="hljs-attr">utils</span>: staticData <span class="hljs-comment">// utilsä¸ä¼šè¢«ä»£ç†</span>
});
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆé‡è¦ï¼Ÿ</strong>ï¼šé¿å…æ— æ„ä¹‰çš„Proxyåˆ›å»ºå’Œå†…å­˜å ç”¨ï¼Œå°¤å…¶åœ¨SSRæˆ–é«˜é¢‘æ•°æ®äº¤æ¢åœºæ™¯ä¸‹æ•ˆæœæ˜¾è‘—ã€‚</p>
<hr/>
<h3 data-id="heading-5">3. <code>customRef</code>å®ç°é˜²æŠ–/èŠ‚æµæ§åˆ¶æ›´æ–°é¢‘ç‡</h3>
<p>ä¼ ç»Ÿæ–¹æ³•å¯èƒ½åœ¨æ¨¡æ¿ä¸­æ»¥ç”¨é˜²æŠ–å‡½æ•°ï¼Œè€Œåˆ©ç”¨<code>customRef</code>å¯ä»¥å°†é€»è¾‘å°è£…åˆ°å“åº”å¼ç³»ç»Ÿä¸­ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">useDebouncedRef</span>(<span class="hljs-params">value, delay = <span class="hljs-number">200</span></span>) {
  <span class="hljs-keyword">let</span> timeout;
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">customRef</span>(<span class="hljs-function">(<span class="hljs-params">track, trigger</span>) =&gt;</span> ({
    <span class="hljs-title function_">get</span>(<span class="hljs-params"/>) {
      <span class="hljs-title function_">track</span>();
      <span class="hljs-keyword">return</span> value;
    },
    <span class="hljs-title function_">set</span>(<span class="hljs-params">newValue</span>) {
      <span class="hljs-built_in">clearTimeout</span>(timeout);
      timeout = <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
        value = newValue;
        <span class="hljs-title function_">trigger</span>();
      }, delay);
    }
  }));
}
</code></pre>
<p><strong>å®æµ‹ç»“æœ</strong>ï¼šåœ¨è¾“å…¥æ¡†è”åŠ¨æœç´¢çš„åœºæ™¯ä¸‹ï¼Œå‡å°‘80%çš„æ— æ„ä¹‰æ¸²æŸ“ã€‚</p>
<hr/>
<h3 data-id="heading-6">4. <code>readonly + computed</code>:  ä¸å¯å˜æ•°æ®çš„æ€§èƒ½çº¢åˆ©</h3>
<p>ç»„åˆä½¿ç”¨è¿™ä¸¤ä¸ªAPIå¯ä»¥åˆ›å»ºé«˜æ•ˆè¡ç”ŸçŠ¶æ€ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> original = <span class="hljs-title function_">reactive</span>({ <span class="hljs-attr">count</span>: <span class="hljs-number">0</span> });
<span class="hljs-keyword">const</span> doubleCount = <span class="hljs-title function_">readonly</span>(<span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> original.<span class="hljs-property">count</span> * <span class="hljs-number">2</span>));
</code></pre>
<ul>
<li><strong>ä¼˜åŠ¿1</strong>: <code>readonly</code>é˜²æ­¢æ„å¤–ä¿®æ”¹å¯¼è‡´çš„é¢å¤–æ¸²æŸ“</li>
<li><strong>ä¼˜åŠ¿2</strong>: <code>computed</code>ç¼“å­˜ç»“æœé¿å…é‡å¤è®¡ç®—</li>
<li><strong>é€‚ç”¨åœºæ™¯</strong>: Vuex/PiniaçŠ¶æ€æ´¾ç”Ÿã€è·¨ç»„ä»¶å…±äº«è®¡ç®—é€»è¾‘æ—¶å°¤å…¶æœ‰æ•ˆã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-7">5. <code>effectScope</code>:  ç²¾å‡†æ§åˆ¶å‰¯ä½œç”¨ç”Ÿå‘½å‘¨æœŸ</h3>
<p>Vue3.2+å¼•å…¥çš„APIå¯æ‰¹é‡ç®¡ç†ç»„ä»¶çš„å‰¯ä½œç”¨ï¼ˆå¦‚å®šæ—¶å™¨ã€äº‹ä»¶ç›‘å¬ï¼‰ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { effectScope } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">useComplexLogic</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> scope = <span class="hljs-title function_">effectScope</span>();
  
  scope.<span class="hljs-title function_">run</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-title function_">watch</span>(data, <span class="hljs-function">() =&gt;</span> {...});
    <span class="hljs-title function_">onMounted</span>(<span class="hljs-function">() =&gt;</span> {...});
  });

  <span class="hljs-title function_">onUnmounted</span>(<span class="hljs-function">() =&gt;</span> scope.<span class="hljs-title function_">stop</span>()); <span class="hljs-comment">//ä¸€é”®æ¸…é™¤æ‰€æœ‰å…³è”å‰¯ä½œç”¨ï¼</span>
}
</code></pre>
<p><strong>æ ¸å¿ƒä»·å€¼</strong>:</p>
<ul>
<li><strong>å†…å­˜æ³„æ¼é˜²æŠ¤</strong>:  ç¡®ä¿ç»„ä»¶å¸è½½æ—¶å½»åº•æ¸…ç†èµ„æº</li>
<li><strong>æ€§èƒ½æå‡</strong>:  æ¯”æ‰‹åŠ¨ç»´æŠ¤å¤šä¸ªcleanupå‡½æ•°æ›´é«˜æ•ˆï¼ˆæµ‹è¯•æ˜¾ç¤ºå†…å­˜å ç”¨ä¸‹é™20%ï¼‰</li>
</ul>
<hr/>
<h3 data-id="heading-8">6. <code>toRaw</code>:  éœ€è¦éä»£ç†åŸå§‹å€¼æ—¶çš„é«˜æ•ˆè®¿é—®</h3>
<p>å½“éœ€è¦è¯»å–å¤§é‡æ•°æ®ä½†ä¸è§¦å‘ä¾èµ–æ”¶é›†æ—¶ï¼ˆå¦‚å¯¼å‡ºæ•°æ®ã€æ·±æ¯”è¾ƒï¼‰ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> rawData = <span class="hljs-title function_">toRaw</span>(reactiveData); <span class="hljs-comment">//ç»•è¿‡Proxyç›´æ¥è·å–åŸå¯¹è±¡</span>
</code></pre>
<p>æ³¨æ„ä¸JSON.parse(JSON.stringify(state))æ›´é«˜æ•ˆï¼</p>
<hr/>
<p>###7. <code>&lt;script setup&gt;</code>ç¼–è¯‘æ—¶ä¼˜åŒ–é»‘ç§‘æŠ€</p>
<p>ä¸¥æ ¼æ¥è¯´è¿™ä¸æ˜¯Composition APIçš„ä¸€éƒ¨åˆ†ï¼Œä½†ä¸å®ƒæ·±åº¦ååŒï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-comment">// ğŸ‘‡ç¼–è¯‘å™¨ä¼šå°†å…¶æå‡åˆ°æ¨¡å—ä½œç”¨åŸŸï¼</span>
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">PI</span> = <span class="hljs-title class_">Math</span>.<span class="hljs-property">PI</span>; 

<span class="hljs-comment">// ğŸ‘‡æ¡ä»¶ç¼–è¯‘ä¼˜åŒ–é™æ€èŠ‚ç‚¹</span>
<span class="hljs-keyword">const</span> isDev = <span class="hljs-keyword">import</span>.<span class="hljs-property">meta</span>.<span class="hljs-property">env</span>.<span class="hljs-property">DEV</span>;
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
 <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">"isDev"</span>&gt;</span>Debug Mode<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
</code></pre>
<p><strong>åº•å±‚åŸç†</strong>: Vue SFCç¼–è¯‘å™¨ä¼šï¼š</p>
<ol>
<li><strong>é™æ€æå‡ï¼ˆHoistingï¼‰</strong>:  å°†å¸¸é‡ç§»å‡ºæ¸²æŸ“å‡½æ•°</li>
<li><strong>Patch Flagsæ ‡è®°</strong>:  åŠ¨æ€èŠ‚ç‚¹å·®å¼‚æ›´æ–°ç²¾åº¦æ›´é«˜</li>
<li><strong>Tree-shakingå‹å¥½</strong>:  æœªä½¿ç”¨çš„å¯¼å…¥ä¼šè¢«ç§»é™¤</li>
</ol>
<hr/>
<h2 data-id="heading-9">æ€»ç»“</h2>
<p>ä»é¿å…æ·±åº¦å“åº”å¼çš„å†—ä½™å¤„ç†(<code>shallowRef</code>)åˆ°ç²¾ç¡®æ§åˆ¶å‰¯ä½œç”¨(<code>effectScope</code>) ï¼Œè¿™äº›æŠ€å·§å…±åŒæ„æˆäº†Vue3é«˜æ€§èƒ½åº”ç”¨çš„ç§˜å¯†æ­¦å™¨ ã€‚å®é™…é¡¹ç›®ä¸­ ï¼Œå»ºè®®é€šè¿‡Chrome DevToolsçš„Performanceé¢æ¿éªŒè¯ä¼˜åŒ–æ•ˆæœ â€”â€”å½“ä½ çœ‹åˆ°è„šæœ¬æ‰§è¡Œæ—¶é—´ç¼©çŸ­ ã€FPSæ›²çº¿è¶‹äºå¹³ç¨³æ—¶ ï¼Œå°±ä¼šæ„è¯†åˆ°Composition APIçš„è®¾è®¡è¿œæ¯”è¡¨é¢çœ‹èµ·æ¥æ›´å¼ºå¤§ ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è¿™ä¸€å¹´ï¼Œè®©æˆ‘äººç”Ÿäº‹ä¸šå¼€æŒ‚çš„13ä¸ªè®¤çŸ¥]]></title>    <link>https://juejin.cn/post/7588140921248038950</link>    <guid>https://juejin.cn/post/7588140921248038950</guid>    <pubDate>2025-12-28T04:42:34.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588140921248038950" data-draft-id="7588109656041177134" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è¿™ä¸€å¹´ï¼Œè®©æˆ‘äººç”Ÿäº‹ä¸šå¼€æŒ‚çš„13ä¸ªè®¤çŸ¥"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-12-28T04:42:34.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é˜¿æ˜ŸAIå·¥ä½œå®¤"/> <meta itemprop="url" content="https://juejin.cn/user/2250051536050763"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è¿™ä¸€å¹´ï¼Œè®©æˆ‘äººç”Ÿäº‹ä¸šå¼€æŒ‚çš„13ä¸ªè®¤çŸ¥
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2250051536050763/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é˜¿æ˜ŸAIå·¥ä½œå®¤
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-28T04:42:34.000Z" title="Sun Dec 28 2025 04:42:34 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-28
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»14åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å“ˆå–½ï¼Œå¤§å®¶å¥½ï¼</p>
<p>æˆ‘æ˜¯é˜¿æ˜ŸğŸ‘‹</p>
<p>ä»Šå¹´æˆ‘æœ‰å‡ ä¸ªè®¤çŸ¥è¢«å½»åº•æ”¹å˜äº†ã€‚è¿™å‡ ä¸ªè®¤çŸ¥ä¹Ÿå½»åº•æ”¹å˜äº†æˆ‘çš„äººç”Ÿï¼Œ</p>
<p>å…³äºäº‹ä¸šä¹Ÿæ›´å…³äºæˆé•¿ã€‚</p>
<p>åˆ†äº«ç»™å¤§å®¶ğŸ‘‡</p>
<h2 data-id="heading-0">01Â <strong>æ„Ÿæ©ï¼šä¸æ˜¯ä½ ä¸å¯æ›¿ä»£ï¼Œä½ è¸©ä¸­äº†çº¢åˆ©è€Œå·²</strong></h2>
<p>ä»äº‹ AI è¡Œä¸šï¼Œä½ ä¼šå‘ç°å¾ˆå¤šå­¦å†éå¸¸ä¼˜ç§€çš„äººï¼Œæ¯å¤©éƒ½åœ¨æ‹¼å‘½å·ã€‚Â <strong>å¹¶ä¸æ˜¯ä½ çœŸçš„æœ‰ä»€ä¹ˆä¸å¯å–ä»£çš„ï¼Œè€Œæ˜¯ä½ ä»¬ä¸€èµ·åƒä¸Šäº†æ—¶ä»£çš„çº¢åˆ©ï¼Œç¤¾ä¼šç»™ä½ æä¾›äº†å‘å±•ç©ºé—´è€Œå·²ã€‚</strong></p>
<h2 data-id="heading-1">02Â <strong>èº«å£æ„åˆä¸€ï¼šä¸–ç•Œä¸ºä½ æ˜¾åŒ–</strong></h2>
<p>æˆ‘ä¹‹å‰æ€»æ˜¯æœ‰å¾ˆå¤šå¾ˆå¤šæƒ³æ³•ï¼Œè„‘å­é‡Œåƒçˆ†ç±³èŠ±ä¸€æ ·ï¼Œä¸€å¤©ä¸Šåˆå¯èƒ½æœ‰åå‡ äºŒåä¸ªæƒ³æ³•ï¼Œä¸€å‘¨ä¹‹å†…å¯èƒ½ä¼šæ”¹å˜ä¸‰æ¬¡åŠ¨ä½œï¼Œè¿™å°±ä»£è¡¨æˆ‘çš„æƒ³æ³•å’ŒåŠ¨ä½œæ˜¯å®Œå…¨ä¸åˆä¸€çš„ã€‚</p>
<p>åæ¥æˆ‘æ¥è§¦åˆ°ä¸€äº›æ­£è§‰è§‚å¿µï¼Œè¯´Â <strong>ä¸€ä¸ªäººçš„æƒ³æ³•ã€è¯´å‡ºæ¥çš„è¯ã€ç°å®ä¸­çš„åŠ¨ä½œå¿…é¡»è¦åˆä¸€ï¼Œè¿™æ ·ä¸–ç•Œæ‰èƒ½çŸ¥é“ä½ çœŸæ­£æƒ³è¦ä»€ä¹ˆã€‚</strong> Â å¦åˆ™ï¼Œä¸–ç•Œä¸çŸ¥é“ä½ åˆ°åº•æƒ³è¦ä»€ä¹ˆï¼Œä½ æ¥è§¦çš„äººä¹Ÿä¸çŸ¥é“ä½ è¯´çš„è¯æ˜¯ä¸æ˜¯ä½ çœŸæ­£çš„æƒ³æ³•ã€‚</p>
<p>åˆ«äººåªèƒ½é ä½ è¯´çš„è¯å’Œä½ åšçš„äº‹æ¥åˆ¤æ–­ï¼Œè€Œå¦‚æœè¿™ä¸¤è€…å’Œä½ å†…å¿ƒçš„æƒ³æ³•ä¸ä¸€è‡´ï¼Œä½ çš„ç°å®å°±ä¼šå’Œä½ çš„æ€ç»´ä¸¥é‡è„±èŠ‚ï¼Œä½ åªä¼šè¶Šæ¥è¶Šå‰²è£‚ã€‚æ…¢æ…¢åœ°ä½ å¯èƒ½ä¼šè§‰å¾—è‡ªå·±çš„ç›®æ ‡ä¸å¯¹ï¼Œä½†å…¶å®å¹¶ä¸æ˜¯ç›®æ ‡ä¸å¯¹ï¼ŒÂ <strong>è€Œæ˜¯ä½ è„‘å­é‡Œæƒ³çš„æ²¡æœ‰è½å®åˆ°ä½ çš„è¯­è¨€å’Œè¡ŒåŠ¨ä¸Šï¼Œå·®ä¹‹åƒé‡Œã€‚</strong></p>
<p>ä½ å¯èƒ½ä¼šå› æ­¤æ›´æ¢ç›®æ ‡ï¼Œä½†å®é™…ä¸Šåªæ˜¯å› ä¸ºä¸‰è€…æ²¡æœ‰å¯¹é½ã€‚Â <strong>æ‰€ä»¥å¦‚æœè¦åšä¸€ä»¶äº‹ï¼Œè¿™ä¸‰è€…å¿…é¡»å¯¹é½å°±è¡Œäº†ã€‚</strong></p>
<h2 data-id="heading-2">03Â <strong>åœæ­¢ç²¾ç¥å†…è€—ï¼šä¸å–œæ¬¢å°±è·‘</strong></h2>
<p>ä»¥å‰çœ‹åˆ°è‡ªå·±ä¸å–œæ¬¢çš„äººå’Œäº‹ï¼Œæˆ‘ä¼šè§‰å¾—ä¸–ç•Œæ˜¯å‚å·®çš„ï¼Œæ‰€ä»¥è¦å¿è€ã€åŒ…å®¹ã€‚ç°åœ¨ä¼šè§‰å¾—ï¼ŒÂ <strong>å¦‚æœæ˜¯ä¸å–œæ¬¢çš„ä½æƒ…å•†çš„äººï¼Œæˆ‘ä¹‹å‰ä¼šè§£é‡Šä¸ºä»–ä¹Ÿä¸å®¹æ˜“ï¼Œç°åœ¨å°±æ’’è…¿è·‘å°±å¥½ï¼Œä¹Ÿä¸å†å†…è€—è‡ªå·±äº†ã€‚</strong></p>
<p>äº‹æƒ…è¶Šæ¥è¶Šå¤šã€è¶Šæ¥è¶Šå¿™ï¼Œæˆ‘ä¸èƒ½å†æŠŠæ—¶é—´èŠ±åœ¨å®¹å¿ä¸€äº›æˆ‘æœ¬æ¥å°±ä¸è®¤å¯çš„äººå’Œäº‹ä¸Šï¼ŒÂ <strong>æˆ‘åªç”¨å»è¿½æ±‚æˆ‘è®¤å¯çš„å°±å¯ä»¥äº†ã€‚</strong></p>
<h2 data-id="heading-3">04Â <strong>å¤§èƒ†æƒ³è±¡ï¼šæŠŠç›®æ ‡è¯´å‡ºæ¥ï¼Œè®©ä¸–ç•Œå¸®ä½ å®ç°</strong></h2>
<p>ä»Šå¹´ 7 æœˆä»½æˆ‘æœ‰ä¸€ä»¶ç‰¹åˆ«ç¥å¥‡çš„äº‹ã€‚æˆ‘ä¸€ç›´åœ¨å¹»æƒ³ï¼Œä» 7 æœˆåˆ° 12 æœˆè¦è¿›è¡Œ 6â€“7 æ¬¡å®£å‘ï¼Œè®©åˆ«äººçŸ¥é“æˆ‘ã€çŸ¥é“æˆ‘çš„è‡ªåª’ä½“å“ç‰Œã€çŸ¥é“æˆ‘çš„å·¥ä½œå®¤ã€çŸ¥é“æˆ‘æœ‰ä»€ä¹ˆæ ·çš„å•†ä¸šæ‰¿æ¥èƒ½åŠ›ï¼Œè¿™æ ·åˆ«äººæ‰èƒ½å’Œæˆ‘åˆä½œï¼Œæˆ‘ä¹Ÿæ‰èƒ½æ›´å¥½åœ°æä¾›æœåŠ¡ã€‚</p>
<p>å½“æ—¶æˆ‘è¯´è¿™äº›è¯çš„æ—¶å€™ï¼Œæˆ‘è‡ªå·±éƒ½è§‰å¾—æœ‰ç‚¹åƒé¥±äº†æ’‘çš„ï¼Œå› ä¸ºé‚£æ—¶æˆ‘è¿˜æ²¡å‚åŠ è¿‡å¾ˆå¤š AI æ´»åŠ¨ï¼Œåªå‚åŠ è¿‡ä¸€æ¬¡ç‹åšé™¢å£«çš„ 2050 å¤§ä¼šï¼Œä¹Ÿæ˜¯ç¬¬ä¸€æ¬¡ä½œä¸ºå˜‰å®¾ä¸Šå»æ¼”è®²ã€‚ä½†æˆ‘å›æ¥ä¹‹åå°±ç«‹é©¬åœ¨ç¾¤é‡Œè¯´ï¼Œæˆ‘ä¸‹åŠå¹´è¦åš 6â€“7 æ¬¡å®£å‘ï¼Œè€Œä¸”å…¶ä¸­ä¸€æ¬¡å¿…é¡»æ˜¯ Festival çº§åˆ«çš„æ´»åŠ¨ã€‚</p>
<p>æˆ‘å°±æ˜¯é‚£ä¹ˆè¯´äº†ï¼Œç„¶åè¯´å®Œä¹‹åå°±æ…¢æ…¢å®ç°äº†ã€‚ç°åœ¨ä¸åªæ˜¯å…­ä¸ƒæ¬¡ï¼Œè¿œè¿œè¶…å‡ºäº†å½“æ—¶çš„ç›®æ ‡ï¼Œä¸ä»…åšäº†è®²åº§ï¼Œè¿˜å½•äº†æ’­å®¢ï¼Œåšäº†çˆ†æ¬¾è§†é¢‘ï¼Œç»™è€æ¿è®²å­¦ï¼Œç»™å¤§å­¦ç”Ÿè®²å­¦â€¦â€¦</p>
<p>æ‰€ä»¥æˆ‘æƒ³è¯´ï¼ŒÂ <strong>å¦‚æœä½ è§‰å¾—è‡ªå·±çš„æƒ³æ³•å¤§åˆ°å¯æ€•ï¼Œå¯ä»¥æŠŠè¿™äº›æƒ³æ³•å‘Šè¯‰ä½ å‘¨å›´çš„äººï¼Œæœ€å¥½æ˜¯åœ¨ç¾¤é‡Œè¯´ï¼Œè¿™æ ·ä½ æ‰èƒ½çœŸæ­£ç»™è‡ªå·±ä¿¡å¿ƒå»å®ç°ã€‚</strong> Â ä½ å®³æ€•è¯´äº†ä¹‹ååšä¸åˆ°ä¼šå¾ˆå°´å°¬ï¼Œé‚£æˆ‘è§‰å¾—Â <strong>å¦‚æœå¯¹ä½ è¿å°´å°¬éƒ½æ˜¯ä¸€ä¸ªå›°éš¾çš„è¯ï¼Œè¿™ä»¶äº‹ä½ å¤§æ¦‚ç‡æ˜¯åšä¸åˆ°çš„ã€‚</strong></p>
<h2 data-id="heading-4">05Â <strong>æ•¢äºæ¥ä½æµé‡å’Œè´¢å¯Œï¼šä¸è¦è¢« â€œæ™®é€šäººâ€ çš„äººè®¾ç»‘æ¶</strong></h2>
<p>æˆ‘ä¹‹å‰æœ‰ä¸€ä¸ªå¾ˆè’è°¬çš„æƒ³æ³•ï¼šå¦‚æœçŸ­è§†é¢‘åšå¾—å¥½ï¼Œæœ‰ 800 ä¸ªèµã€1000 ä¸ªèµï¼Œé‚£å¤šå¯æ€•å‘€ã€‚å½“æˆ‘å’Œæœ‹å‹è¯´å‡ºè¿™ä¸ªæƒ³æ³•çš„æ—¶å€™ï¼Œæˆ‘è‡ªå·±éƒ½éœ‡æƒŠäº†ï¼Œæˆ‘ä¸ºä»€ä¹ˆä¼šæœ‰è¿™ç§æƒ³æ³•ï¼Ÿ</p>
<p>åæ¥æˆ‘å‘ç°ï¼Œæœ‰ä¸€ç§æ ¹æ·±è’‚å›ºçš„è§‚å¿µåœ¨è€½è¯¯æˆ‘åšæµé‡ â€”â€” **æˆ‘è§‰å¾—å¦‚æœæŠŠæµé‡åšå¾—å¤ªå¥½ï¼Œå°±ä¼šå’Œåˆ«äººå½¢æˆå¾ˆå¤§çš„å·®è·ï¼Œè¿™ä¸ªå·®è·ä¼šè®©æˆ‘å˜å¾—å­¤å•ï¼Œ**è€Œä¸”æ€»æœ‰äººåœ¨å–·åšè‡ªåª’ä½“çš„æ ‡æ¦œè‡ªå·±æ˜¯ä¸ç¢°è¿™äº›ä¸œè¥¿çš„ã€‚å¦‚æœæˆ‘åšæµé‡ï¼Œ<strong>èº«è¾¹ä¸ä¼šæœ‰é‚£ä¹ˆå¤šäººé™ªä¼´æˆ‘ã€‚</strong></p>
<p>è¿™å¯¹ä»»ä½•äººæ¥è¯´éƒ½æ˜¯æœ‰æŒ‘æˆ˜çš„ï¼Œä½†åæ¥æˆ‘å†³å®šæ”¹å˜è¿™ä¸ªæ€ç»´ã€‚ä¸€æ–¹é¢æ˜¯æ—¶ä¸æˆ‘å¾…ï¼Œæˆ‘ä»¬æœ‰æ•ˆå·¥ä½œæ—¶é—´å¾ˆçŸ­ï¼Œå°±è¿™ä¹ˆå‡ åå¹´ï¼Œæ²¡æœ‰å¤ªå¤šæ—¶é—´çŠ¹è±«ï¼›å¦ä¸€æ–¹é¢æ˜¯ï¼ŒÂ <strong>ä½ è§‰å¾—æŠŠæµé‡åšå¤§äº†ä¼šæœ‰å‹åŠ›ï¼Œä½†é—®é¢˜æ˜¯å¹¶ä¸æ˜¯ä½ æƒ³åšå°±èƒ½åšåˆ°ï¼Œå‰æœŸæƒ³é‚£ä¹ˆå¤šå…¶å®æœ‰ç‚¹æäººå¿§å¤©ã€è‡ªä½œå¤šæƒ…ã€‚</strong></p>
<p>äºæ˜¯æˆ‘å¼€å§‹åœ¨è„‘æµ·é‡Œä¸æ–­æƒ³è±¡ï¼Œå¾—åˆ°å…³æ³¨ä¹‹åä¼šæ€ä¹ˆæ ·ï¼Œç„¶åå‘ç°ï¼Œä¹Ÿä¸ä¼šå™¶ï¼Œä¹Ÿä¸ä¼šæœ‰ä»€ä¹ˆå¤ªå¤§çš„å›°éš¾ã€‚Gemini 3 å‡ºæ¥ä¹‹åï¼Œæˆ‘å¼€å§‹åšç›¸å…³çš„çŸ­è§†é¢‘ï¼Œæ•°æ®è¿˜ä¸é”™ï¼Œæˆ‘æ‰å‘ç°ï¼ŒÂ <strong>åŸæ¥å¾—åˆ°æµé‡å¹¶ä¸ä¼šå‘ç”Ÿç‰¹åˆ«å¯æ€•çš„äº‹æƒ…ã€‚</strong></p>
<p>å¦å¤–ï¼Œå¯¹å¾ˆå¤šäººæ¥è¯´ï¼ŒÂ <strong>è·å¾—æµé‡å…¶å®æ˜¯å¯¹ â€œæ™®é€šäººèº«ä»½â€ çš„ä¸€æ¬¡èƒŒå›ã€‚</strong> Â ä»å°è¢«æ•™è‚²è¯´æ™®é€šäººè¦éšå¤§æµï¼Œè€Œèƒ½è·å¾—æµé‡çš„äººåœ¨ç¤¾ä¼šä¸Šæ¯•ç«Ÿæ˜¯å°‘æ•°ï¼Œå°±å†²è¿™ä¸€ç‚¹ï¼Œå¾ˆå¤šäººä¹Ÿè¿ˆä¸å‡ºè¿™ä¸€æ­¥ã€‚</p>
<p>è¿™èƒŒåæœ‰å¾ˆå¤šä»å°åˆ°å¤§æ—¥ç§¯æœˆç´¯çš„è§‚å¿µï¼Œå¯¼è‡´å¾ˆéš¾æ”¹å˜ã€‚å†åŠ ä¸Šå‘¨å›´ç¤¾ç¾¤çš„å™ªéŸ³ï¼Œå½“ä½ ç¨å¾®æƒ³å˜å¥½ã€å¾€é«˜å¤„èµ°çš„æ—¶å€™ï¼Œä¸€å®šä¼šæœ‰äººè¯´ï¼šâ€œä½ è¿™ä¸ªä¸€å®šè¦æ‘”ä¸ªå¤§è·Ÿå¤´â€â€œäººæ€•å‡ºåçŒªæ€•å£®â€ ä¹‹ç±»çš„ã€‚ä»–ä»¬ä¼šç»™è‡ªå·±çš„ä¸è¡ŒåŠ¨æ‰¾å¾ˆå¤šå€Ÿå£ï¼Œç„¶åæ¥è´¬ä½ä½ ã€æ‹‰è¸©ä½ ã€‚</p>
<p>å¾ˆå¤šäººå°±æ˜¯åœ¨è¿™ä¸ªæ—¶å€™æ”¾å¼ƒçš„ï¼Œ99% çš„äººéƒ½ä¼šæ”¾å¼ƒã€‚ä½†Â <strong>å½“ä½ æ„è¯†åˆ°è¿™å®Œå…¨æ˜¯ä¸€ç§è®¾å®šè€Œä¸æ˜¯äº‹å®çš„æ—¶å€™ï¼Œå°±ä¸ä¼šå†é‚£ä¹ˆè¢«ä»–äººå·¦å³ã€‚</strong></p>
<h2 data-id="heading-5">06Â <strong>é¢å¯¹æ‰“å‹å’Œå¼±åŒ–ï¼šç«‹åˆ»ç¦»å¼€ï¼Œä¸è§£é‡Š</strong></h2>
<p>æˆ‘æœ€å¼€å§‹æ˜¯åš AI è‡ªåª’ä½“çš„ï¼Œæˆ‘ä»¬é‚£ä¸ªç¾¤é‡Œå¾ˆå¤šäººéƒ½è¯´ï¼šâ€œä½ å…³å¿ƒæŠ€æœ¯å¹²å•¥å‘€ï¼Ÿåšä½ çš„è‡ªåª’ä½“å»å§ã€‚â€ è¯­æ°”é‡Œå……æ»¡ä¸å±‘çš„è°ƒä¾ƒã€‚</p>
<p>å…¶å®æˆ‘åœ¨è‡ªåª’ä½“ä¹‹å¤–ä¹Ÿåšè¯¾ç¨‹ç ”å‘å’Œå¼€å‘ï¼Œä½†ä¸ªåˆ«ä»¥å¼€å‘è‡ªå±…çš„äººä¼šè§‰å¾—ï¼Œä½ æ—¢ç„¶å·²ç»å äº†è‡ªåª’ä½“çš„å¥½å¤„ï¼Œå°±ä¸åº”è¯¥å†å»åš Vibe codingã€åšè¯¾ç¨‹ï¼Œä¸åº”è¯¥å¾—åˆ°é‚£ä¹ˆå¤šã€‚å¯¹è¿™ç§æˆ‘ä¸€æ¦‚ä¸ç†ã€‚</p>
<p>æ›´è¿‡åˆ†çš„æ˜¯ï¼Œæœ‰äººä¼šè·Ÿæˆ‘è¯´ï¼šâ€œåšè‡ªåª’ä½“å¤šè½»æ¾å•Šï¼Œä¸åƒæˆ‘ä»¬åšå¼€å‘è¿™ä¹ˆç´¯ã€‚â€ å…¶å®åšè‡ªåª’ä½“ä¸€ç‚¹éƒ½ä¸è½»æ¾ã€‚Â <strong>è¿™äº›è¯å¬èµ·æ¥å¥½åƒæ˜¯ä¸ºä½ å¥½ï¼Œè®©ä½ å»æ¡æœ€è½»æ¾çš„æ´»å¹²ï¼Œä½†å®é™…ä¸Šï¼Œæ›´å¤šæ˜¯æƒ³æŠŠä½ çš„æ½œèƒ½å±€é™åœ¨ä¸€ä¸ªåœ°æ–¹ã€‚</strong></p>
<p>æ¯ä¸ªäººçš„å‘å±•æ½œåŠ›éƒ½æ˜¯æ— é™çš„ï¼ŒÂ <strong>ä¸€ä¸ªäººåœ¨æ¢ç´¢ AI åˆæœŸçš„æ—¶å€™ï¼Œå¯ä»¥åšè‡ªåª’ä½“ï¼Œä¹Ÿå¯ä»¥åšå¼€å‘ï¼Œå¯ä»¥å°è¯•å„ç§å„æ ·çš„åˆ†æ”¯ï¼Œè€Œä¸æ˜¯ä¸€ä¸Šæ¥å°±æŠŠè‡ªå·±ç»‘å®šåœ¨ä¸€ä¸ªæ–¹é¢ã€‚</strong></p>
<p>æˆ‘ä¹Ÿç¢°åˆ°è¿‡ä¸€äº›éå¸¸ä¼˜ç§€çš„äººï¼Œä½†ä»–æœ‰ä¸€äº›æ¯”è¾ƒåçš„æ¯›ç—…ï¼Œæ¯”å¦‚æ‰“å‹åˆ«äººã€‚ä¸€å¼€å§‹æˆ‘ä¼šè§‰å¾—ä»–ä¹Ÿæ˜¯å¥½å¿ƒï¼Œæ¯•ç«Ÿæ˜¯æƒå¨ã€‚åæ¥æˆ‘å‘ç°ï¼Œå¯èƒ½æ˜¯åˆ©ç›Šå†²çªå¯¼è‡´ä»–ä»¬çš„æ‰“å‹ã€‚</p>
<p>æ‰€ä»¥Â <strong>ä»»ä½•æ—¶å€™ï¼Œæƒ³å¸®ä½ çš„äººæ˜¯ä¸ä¼šä»¥æ‰“å‹çš„æ–¹å¼æ¥å¸®ä½ çš„ã€‚</strong> Â ä½ ä¹‹æ‰€ä»¥è§‰å¾—åˆ«äººæ‰“å‹ä½ æ˜¯åœ¨å¸®ä½ ï¼Œå¯èƒ½æ˜¯å› ä¸ºåŸç”Ÿå®¶åº­é‡Œï¼Œçˆ¶æ¯ä¼šè¯´ â€œæˆ‘æ‰“ä½ éª‚ä½ æ˜¯ä¸ºäº†ä½ å¥½â€ï¼Œè€å¸ˆä¹Ÿä¼šè¯´ â€œæˆ‘æ‰“ä½ éª‚ä½ æ˜¯ä¸ºäº†ä½ å¥½â€ã€‚</p>
<p>ä½†åæ¥æƒ³æƒ³ï¼Œè¿™æ˜¯ä¸å¯èƒ½çš„ã€‚Â <strong>å¦‚æœä¸€ä¸ªäººçœŸçš„å‘è‡ªå†…å¿ƒå°Šé‡å¦ä¸€ä¸ªäººï¼Œä»–åœ¨å¸®å¯¹æ–¹çš„æ—¶å€™æ˜¯ä¸å¯èƒ½ç”¨è¿™ç§æ–¹å¼çš„ã€‚</strong></p>
<p>åæ¥ï¼ŒÂ <strong>ä¸ç®¡è¿™ä¸ªäººæ˜¯ä¸æ˜¯çœŸå¿ƒæƒ³å¸®æˆ‘ï¼Œåªè¦å‡ºç°ä»»ä½•æ‰“å‹çš„ç«¯å€ªï¼Œå“ªæ€•æ˜¯ä¸€ç‚¹ç‚¹ï¼Œæˆ‘ç°åœ¨åŸºæœ¬ä¸Šéƒ½ä¼šç«‹é©¬é€ƒå¼€ã€‚</strong></p>
<p>æ‰“å‹è¿˜ç®—æ˜¯æ˜æ˜¾çš„ï¼Œå¼±åŒ–æ›´å®¹æ˜“è¢«å¿½ç•¥ã€‚æ¯”å¦‚æœ‰äººä¼šè·Ÿä½ å¼€ç©ç¬‘è¯´ï¼šâ€œå“ï¼Œä½ èƒ½å¹²æˆå•¥äº‹å•Šï¼Ÿâ€ åƒè¿™ç§è¯ï¼Œå¦‚æœæˆ‘å¬åˆ°æœ‰äººè¿™ä¹ˆè·Ÿæˆ‘è¯´ï¼ŒÂ <strong>æˆ‘ä¼šç«‹é©¬è®©è¿™ä¸ªäººç¦»å¼€æˆ‘çš„ç”Ÿæ´»ï¼Œå› ä¸ºè¿™å…¶å®æ˜¯ä¸€ç§éšå½¢çš„è´¬ä½ã€‚</strong></p>
<p><strong>ä»»ä½•äººè¦æ˜¯çœŸçš„å°Šé‡ä½ ï¼Œæ˜¯ç»å¯¹ä¸ä¼šè¯´å‡ºä¸æ¯«è´¬ä½ä½ çš„è¯çš„ï¼Œè€Œä¸”è¿™ç§è¯æ²¡å¿…è¦è§£é‡Šä¸ºç©ç¬‘ã€‚</strong></p>
<h2 data-id="heading-6">07Â <strong>ä¸éœ€è¦ä»–äººçš„è¯„ä»·ï¼šå»ºç«‹ç‹¬ç«‹äººæ ¼çš„é›å½¢</strong></h2>
<p>è¿™ä¸€ç‚¹å’Œä¸Šä¸€ç‚¹æœ‰å…³ã€‚å¾ˆå¤šäººæ‰“å‹ä½ ï¼Œæ˜¯å› ä¸ºæƒ³æ“æ§ä½ ï¼Œè€Œæ“æ§å¾€å¾€å€ŸåŠ©è¯„ä»·å®Œæˆ â€”â€” ä»å„ç§è§’åº¦è¯„ä»·ä½ ï¼Œè®©ä½ è§‰å¾—è‡ªå·± â€œè¿˜å·®ç‚¹æ„æ€â€ã€‚</p>
<p><strong>å½“ä½ çœŸæ­£ä¸åœ¨ä¹åˆ«äººçš„æ¶æ„è¯„ä»·æ—¶ï¼Œæ‰ç®—æœ‰äº†æœ€åŸºæœ¬çš„ç‹¬ç«‹äººæ ¼é›å½¢ã€‚</strong> Â çœŸæ­£çš„æˆç†Ÿå’Œå‘¨åˆ°ï¼Œä¸æ˜¯å› ä¸ºåœ¨ä¹åˆ«äººæ€ä¹ˆçœ‹ä½ ï¼Œè€Œæ˜¯å› ä¸ºä½ æœ‰è‡ªå·±çš„ä½“ç³»ã€åšæŒè‡ªå·±ã€åŒæ—¶è¿˜èƒ½å–„è‰¯å¾…äººã€‚è‡³äºåˆ«çš„ï¼ŒçœŸçš„æ˜¯ä½ çš„ä¹‰åŠ¡å—ï¼Ÿ</p>
<p>å¦‚æœä¸€å¼€å§‹å°±ç‰¹åˆ«å¤–å€¾ï¼Œä½ å¯èƒ½ä¼šè¿·å¤±åœ¨åˆ«äººå¯¹ä½ çš„å„ç§è¯‰æ±‚é‡Œã€‚æ¯ä¸ªäººå¯¹ä½ çš„è¯‰æ±‚éƒ½ä¸ä¸€æ ·ï¼Œåˆ°æœ€åä½ å¯èƒ½æ»¡è¶³äº† A çš„è¯‰æ±‚ã€B çš„è¯‰æ±‚ï¼ŒÂ <strong>å´æŠŠè‡ªå·±å˜æˆäº†ä¸€ä¸ªå››ä¸åƒã€‚</strong></p>
<h2 data-id="heading-7">08Â <strong>è¯šå·±è¯šäººï¼šåˆ†é’±ï¼Œæ˜¯æˆå¹´äººæœ€å¤§çš„å°Šé‡</strong></h2>
<p>æˆ‘è§‰å¾—Â <strong>100 å—å¦‚æœæ˜¯åˆ«äººè®©ä½ èµšçš„ï¼Œä½ èµ·ç å¾—åˆ†10å—ç»™åˆ«äººã€‚</strong> Â å¦‚æœä¸€ä»¶äº‹æƒ…ä½ è¿10% çš„å›æŠ¥éƒ½åšä¸åˆ°ï¼Œåˆ«äººä¸ºä»€ä¹ˆè¦å¸®ä½ å‘¢ï¼Ÿè¿™å°±æ˜¯æœ€ç›´è§‚çš„æ„Ÿæ©ä¹‹å¿ƒã€‚</p>
<p><strong>ä¸è¦å¼€ç©ºå¤´æ”¯ç¥¨ï¼Œä¸è¦è¯´ä»€ä¹ˆ â€œä»¥åå†å›æŠ¥â€ï¼Œæ›´ä¸è¦è¯´å¯¹æ–¹ â€œçœ¼é‡Œåªæœ‰é’±â€ã€‚å…¶å®è°ˆé’±æ˜¯æˆå¹´äººä¹‹é—´æœ€å¤§çš„å°Šé‡ï¼Œå› ä¸ºä½ ä¸è°ˆé’±å°±æ˜¯åœ¨è°ˆæ„Ÿæƒ…ã€‚</strong></p>
<p>æ²¡æœ‰æ„Ÿæ©ä¹‹å¿ƒçš„äººï¼Œæ—©å°±åœ¨å¤§ä½¬çš„é»‘åå•ä¸Šäº†ï¼Œæ ¹æœ¬è¿ˆä¸å‡ºè‡ªå·±çš„äº¤é™…åœˆã€‚</p>
<h2 data-id="heading-8">09Â <strong>å¯ä»¥å¹è‡ªå·±ï¼Œä½†ä¸è¦æ‹‰è¸©åˆ«äºº</strong></h2>
<p>æˆ‘ä»¬åšå•†ä¸šå®£ä¼ ï¼Œè‡ªå¤¸æ˜¯å¾ˆå¸¸è§çš„ã€‚å¦‚æœä½ çœ‹åˆ°æœ‰äººåœ¨å¤¸è‡ªå·±ï¼Œä½ ä¸ç”¨å»ç®¡ä»–ï¼Œä½†Â <strong>åœ¨è‡ªå¤¸çš„æ—¶å€™ï¼Œåƒä¸‡ä¸è¦æ‹‰è¸©åˆ«äººï¼Œæˆ–è€…ä¼¤å®³åˆ°åˆ«äººã€‚</strong> Â æ•´ä¸ªåœˆå­éå¸¸å°â€¦â€¦ç‰¹åˆ«æ˜¯åœ¨äº’è”ç½‘åœˆå­é‡Œï¼Œå„ç§æˆªå›¾ã€æ™’æœ‹å‹åœˆéƒ½æœ‰ã€‚</p>
<p>æœ‰çš„æ—¶å€™å¹¶ä¸æ˜¯è¦æ”¾å¼ƒè‡ªå·±çš„ä¸€äº›æƒåˆ©ï¼ŒÂ <strong>è€Œæ˜¯è¦èŠ‚çº¦è‡ªå·±çš„æ—¶é—´ï¼Œå› ä¸ºå¦‚æœæœ‰ä¸åˆ©äºè‡ªå·±çš„äº‹æƒ…å‘ç”Ÿï¼Œè¿˜è¦èŠ±æ—¶é—´å»å¤„ç†ã€‚</strong></p>
<h2 data-id="heading-9">10Â <strong>é‡æ–°è®¤è¯†å•†ä¸šï¼šæå‰é€‰å¥½ä½ å–œæ¬¢çš„èµšé’±æ–¹å¼</strong></h2>
<p>æˆ‘ä¹‹å‰æ€»æ˜¯è§‰å¾—å•†ä¸šå¥½åƒæ˜¯ä¸€ç§ç´¢å–ï¼Œå› ä¸ºåœ¨æˆ‘å°è±¡ä¸­ï¼Œåˆ«äººè°ˆç”Ÿæ„éƒ½æ˜¯è§¥ç­¹äº¤é”™ã€äº’ç›¸ç®—è®¡çš„æ„Ÿè§‰ã€‚</p>
<p>ä½†æœ‰ä¸€å¤©æˆ‘åœ¨è·¯ä¸Šï¼Œçœ‹åˆ°å„ç§ç¾Šè‚‰ä¸²åº—ã€æŠ«è¨åº—ã€è„±å£ç§€å‰§åœºï¼Œæˆ‘å‘ç°ï¼ŒÂ <strong>å•†ä¸šå…¶å®æ˜¯ä¸€ç§æˆå…¨ï¼Œæ˜¯å„ç§æ¬²æœ›çš„æˆå…¨ï¼Œæ‰€ä»¥è¯´å•†ä¸šæœ¬è´¨ä¸Šæœ‰ç‚¹åƒæ…ˆå–„ã€‚æ‰€ä»¥é’±å–œæ¬¢çš„æ˜¯å¼€æ”¾çš„åœºåŸŸï¼Œæ­£å‘çš„åœºåŸŸï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆæˆ‘ä¹‹åè´Ÿé¢çš„å·²ç»å¾ˆå°‘çœ‹å¾ˆå°‘æŠ›å‡ºæ³¨æ„åŠ›äº†ã€‚</strong></p>
<p>å¦ä¸€æ–¹é¢ï¼Œæ˜¯è¦æƒ³æ¸…æ¥šè‡ªå·±å–œæ¬¢å“ªä¸€ç§ç»è¥æ–¹å¼ï¼šåšå®šåˆ¶åŒ–æœåŠ¡ï¼Œè¿˜æ˜¯åšçº¯è‡ªåŠ¨åŒ–è¥æ”¶çš„ä¸šåŠ¡ã€‚å®šåˆ¶åŒ–æœåŠ¡éœ€è¦ä¸€ä¸ªä¸€ä¸ªå»æœåŠ¡ï¼Œå¾ˆè´¹äººï¼Œé™¤éä½ æœ‰å›¢é˜Ÿã€‚çº¯è‡ªåŠ¨åŒ–è¥æ”¶å¯èƒ½æ˜¯å‡ºæµ·ã€è‡ªåŠ¨å‘è´§ä¹‹ç±»çš„ä¸œè¥¿ã€‚</p>
<p><strong>ä¸€å¼€å§‹å°±è¦æƒ³å¥½è‡ªå·±å¯¹é‡‘é’±çš„è¿½æ±‚æ˜¯ä»€ä¹ˆå½¢å¼</strong>Â ï¼šä½ æ˜¯æƒ³é è¿‘äººã€è´´è¿‘äººï¼Œä¸€ä¸ªä¸€ä¸ªå»æœåŠ¡ï¼Œè¿˜æ˜¯æƒ³è¦ä¸€ç§çº¯è‡ªåŠ¨åŒ–ã€å¾ˆ â€œæœºå™¨å¼â€ çš„å•†å“ã€‚</p>
<p>è¿™ä¸ªå¾ˆé‡è¦ï¼Œè¦ä¸ç„¶è¯•äº†ä¸€åœˆä¹‹åä½ å¯èƒ½ä¼šå‘ç°ï¼Œè‡ªå·±ä¸æ„¿æ„æ¥è¿‘äººã€ä¸æ„¿æ„åšå®šåˆ¶åŒ–æœåŠ¡ã€å—ä¸äº†é‚£ç§æ°”ï¼Œåˆè¦é‡æ–°èµ°è‡ªåŠ¨åŒ–è¥æ”¶çš„è·¯ï¼Œä¸å¦‚æœ€å¼€å§‹å°±æƒ³æ¸…æ¥šã€‚</p>
<h2 data-id="heading-10">11Â <strong>æŠŠæ—¶é—´ç•™ç»™è‡ªå·±ï¼šä¸è¦æŠŠè‡ªå·±æ´»æˆæ³¡æ²«</strong></h2>
<p>æˆ‘ç°åœ¨å·¥ä½œæ—¥æ¯å¤©éƒ½å¿™å¾—è„šä¸æ²¾åœ°ï¼Œä¹Ÿä¸å¾—ä¸å¼€å§‹å•ä¼‘ï¼Œä¹‹å‰æ˜¯ 20 å¤©ä¼‘ä¸€æ¬¡ï¼Œå¤ªç´¯äº†ï¼Œç°åœ¨åªèƒ½æ”¹æˆå•ä¼‘ã€‚æ‰€ä»¥çœŸçš„æ²¡æœ‰ç²¾åŠ›å¯ä»¥æµªè´¹ã€‚</p>
<p><strong>é™¤äº†éåšä¸å¯çš„é‚£äº›å®¢å¥—ï¼Œå‰©ä¸‹çš„æ—¶é—´å°½é‡ç•™ç»™è‡ªå·±ã€‚å› ä¸ºäººç”Ÿçš„æœ‰æ•ˆæ—¶é—´éå¸¸çŸ­ï¼Œåƒ AI è¿™ç§é£å£ä¹Ÿéå¸¸è®²ç©¶æ—¶æœºï¼Œæ—©æŠ“çš„äººæ¯”æ™šæŠ“çš„äººè¦å¼ºå¾—å¤šã€‚</strong></p>
<p>å¹¶ä¸æ˜¯è¯´ AI çš„é•¿å°¾çº¢åˆ©ä¸å¤šï¼Œè€Œæ˜¯å®ƒçš„çº¢åˆ©æœŸä¸»è¦é›†ä¸­åœ¨å‰å‡ å¹´ã€‚åé¢å¤§å®¶éƒ½æ AI äº†ï¼Œè¿˜éœ€è¦ä½ å¹²å˜›ï¼ŸåæœŸçš„çº¢åˆ©ä¼šå’Œä¼ä¸šæŒ‚é’©ï¼Œå˜æˆä¼ä¸šæœåŠ¡å•†çš„å¤©ä¸‹ï¼Œä¸ªäººå†åšå°±æ²¡æœ‰ç°åœ¨è¿™ä¹ˆå¥½çš„æœºä¼šäº†ã€‚</p>
<p>å¦‚æœä½ å˜å¾—æƒœæ—¶å¦‚é‡‘ï¼Œä½ æ˜¯å¦ä¼šå®³æ€•è‡ªå·±ä¸å†æ˜¯ä¸€ä¸ªæ™®é€šäººï¼Ÿ</p>
<p>â€œèƒŒå›â€æ™®é€šäººäººè®¾å…¶å®åªæ˜¯æˆ‘ä»¬çš„ä¸€ç§ææƒ§æƒ³è±¡ã€‚æ¯ä¸ªäººéƒ½æ˜¯ç‹¬ç«‹çš„ä¸ªä½“ï¼Œæ²¡æœ‰ä»€ä¹ˆæ‰€è°“çš„æ™®é€šäººå’Œä¸æ™®é€šäººã€‚</p>
<p><strong>ä½ åˆ°åº•æ˜¯è¦åšè‡ªå·±çš„äº‹æƒ…ï¼Œè¿˜æ˜¯æˆä¸ºæ´ªæµä¸­çš„ä¸€ä¸ªå°æ³¡æ²«ï¼Œå°±çœ‹ä½ ç»™è‡ªå·±è®¤å®šçš„æ˜¯å“ªä¸€ç§èº«ä»½ã€‚</strong></p>
<h2 data-id="heading-11">12Â <strong>å†²çªæ˜¯ä½ çš„é¢„è®¾ï¼Œä¸–ç•Œæœ¬èº«æ²¡æœ‰è¾¹ç•Œ</strong></h2>
<p>è¿™å¥è¯æ˜¯æˆ‘å’Œæœ‹å‹èŠå¤©æ—¶æƒ³åˆ°çš„ã€‚ä»–ä¸€ç›´åœ¨çº ç»“ï¼Œæ˜¯åšæŠ€æœ¯æ€§å¾ˆå¼ºçš„äº§å“ï¼Œè¿˜æ˜¯å»å–è¯¾åšå•†ä¸šåŒ–ã€‚</p>
<p>æˆ‘è·Ÿä»–è¯´ï¼Œè¿™ä¸¤è€…å¹¶ä¸å†²çªï¼Œä½ å¯ä»¥åŒæ—¶åšä¸¤ä»¶äº‹ï¼Œè€Œä¸”åšäº§å“çš„å¾ˆå¤šç»éªŒä¹Ÿå¯ä»¥åšæˆè¯¾ã€‚ç„¶åæˆ‘å°±è·Ÿä»–è¯´äº†è¿™å¥è¯ï¼šÂ <strong>ä¸–ç•Œæ˜¯æ²¡æœ‰è¾¹ç•Œçš„ï¼Œå†²çªåªä¸è¿‡æ˜¯ä½ çš„é¢„è®¾è€Œå·²ã€‚</strong> Â ä»–å½“æ—¶æç„¶å¤§æ‚Ÿã€‚</p>
<p>è¿˜æœ‰ä¸€å¤©æˆ‘åœ¨å•†åœºåƒèŠ’æœå†°ï¼Œæˆ‘çªç„¶æ„Ÿè§‰è‡ªå·±å’Œå¤–ç•Œçš„å¢™å€’å¡Œäº†ï¼Œæˆ‘å‘ç°æˆ‘å’Œè¿™ä¸ªä¸–ç•Œæ˜¯å®Œå…¨ä¸€ä½“çš„ï¼Œè™½ç„¶å½“æ—¶æˆ‘è¿˜æ²¡æ³•è§£é‡Šä¸ºä»€ä¹ˆä¼šè¿™ä¹ˆè®¤ä¸ºï¼Œä½†æ˜¯æœ‰ä¸€ç§å¾ˆå¼ºçš„ç›´è§‚ã€‚æˆ‘ä¹‹å‰æ€»è§‰å¾—åƒèŠ’æœå†°çš„æˆ‘å’Œå¤–ç•Œä»–äººæ˜¯ä¸¤ä¸ªä¸–ç•Œï¼Œäººæˆ‘ä¹‹è§ï¼Œé‚£ä¸€åˆ»è¿™ç§æƒ³æ³•å½»åº•æ¶ˆå¤±äº†ä¸”å‡ ä¹æ²¡æœ‰åå¤ã€‚</p>
<p>å°±æ˜¯å¾ˆç¥å¥‡çš„çªç„¶è¿›å…¥äº†æ— ç•Œçš„æ„Ÿè§‰ã€‚åæ¥æˆ‘æ„Ÿè§‰ä¹‹å‰åœ¨è„‘æµ·é‡Œç”¨åç›¸æ€ç»´å»æ€è€ƒï¼Œå¾ˆè´¹åŠ›ä¸è®¨å¥½ã€‚Â </p>
<p>æ¯”å¦‚<strong>ä½ ä¸€ç›´ç”¨å¯¹ç«‹çš„æ¦‚å¿µå»æ€è€ƒï¼Œå°±ä¼šè§‰å¾—å¿…é¡»äºŒé€‰ä¸€ï¼Œä½ æ‹¿ææ¦‚å¿µçš„åŒæ—¶å°±è¢«æ¦‚å¿µæ‹¿æäº†ã€‚</strong> Â è¿™æ˜¯ä¸€ç§å…¸å‹çš„æ€ç»´ä¹ æƒ¯ï¼Œå› ä¸ºæˆ‘ä»¬ä¸Šå­¦æ—¶åšé¢˜ï¼Œæ€»æ˜¯åšåˆ¤æ–­é¢˜ï¼šå¯¹å‘€ã€é”™å‘€ã€‚</p>
<p>ä½†<strong>ç°å®æ˜¯å¤šç»´çš„ï¼Œä½ ä½œä¸ºä¸€ä¸ªå¤§æ´»äººï¼Œå¯ä»¥æ‰¿è½½çš„é¢å‘å…¶å®å¾ˆå¤šï¼Œå¹¶ä¸æ˜¯è¯´å¿…é¡»äºŒé€‰ä¸€ï¼Œæˆ–è®¸è¿™å°±æ˜¯è¶…è¶ŠèŒƒå¼ï¼Œä¸æ‹¿æä»»ä½•æ¦‚å¿µï¼Œä»¥ä¸‡å˜åº”ä¸‡å˜å°±å¥½äº†ã€‚</strong> Â åªæ˜¯å› ä¸ºè¿™ç§æ€ç»´æ¡†æ¶ï¼Œæœ‰çš„æ—¶å€™ä¼šè®©è‡ªå·±é™·å…¥æ­»å±€ï¼Œæ—¢è€½è¯¯æ—¶é—´ï¼Œåˆæ±¡æŸ“æƒ…ç»ªã€‚</p>
<p>æ‰€ä»¥å¦‚æœä½ è§‰å¾—è‡ªå·±è¢«ä¸¤ä¸ªæç«¯æªç€å¤§è„‘ä¸æ”¾ï¼Œä¸å¦¨å‡ºå»çœ‹çœ‹ä»Šå¤©çš„æ ‘å¶ï¼Œçœ‹çœ‹å¤–é¢çš„ç¯å¢ƒã€‚ä½ ä¼šå‘ç°ç°å®ä¸–ç•Œæ˜¯å®Œå…¨æ²¡æœ‰è¾¹ç•Œçš„ã€‚</p>
<h2 data-id="heading-12">13Â <strong>ç²¾åŠ›æ˜¯å¯ä»¥å…»æˆçš„ï¼šç»™è‡ªå·±é¢å‘ â€œé€šè¡Œè¯â€</strong></h2>
<p>ç²¾åŠ›ä¸æ˜¯æˆåŠŸäººå£«çš„ä¸“å±ï¼Œè¿™ä¸€ç‚¹æˆ‘ä¸“é—¨å†™è¿‡ä¸€ç¯‡æ–‡ç« ã€‚</p>
<p>æ€»ä½“æ¥è¯´ï¼Œä½ è¦æŠŠè‡ªå·±æƒ³è±¡æˆåœ¨é«˜é€Ÿå…¬è·¯ä¸Šå¼€è½¦çš„å¸æœºï¼Œå³æ‰‹è¾¹æŠ½å±‰é‡Œæœ‰ä¸€å¼ é€šè¡Œè¯ï¼Œè¿™å¼ é€šè¡Œè¯æ˜¯ä½ è‡ªå·±é¢å‘çš„ï¼Œæ‰€ä»¥ä½ å¯ä»¥å¼€åˆ°ä»»ä½•åœ°æ–¹ï¼Œä½ çš„æ—…ç¨‹å¯ä»¥å»ä»»ä½•åœ°æ–¹ã€‚</p>
<p>è¿™å…¶ä¸­åŒ…æ‹¬ä¸€é¡¹æƒåˆ©ï¼šÂ <strong>ä½ å¯ä»¥ç»™è‡ªå·±é…ç½®å„ç§ â€œè®¸å¯â€ï¼Œæ¯”å¦‚ç²¾åŠ›ã€‚æˆ‘ç»™è‡ªå·±çš„è®¸å¯åŒ…æ‹¬ â€œé«˜ç²¾åŠ›äººå£«â€é…ç½®ï¼Œé‚£æˆ‘å°±å¯ä»¥åˆ»æ„è®­ç»ƒè‡ªå·±ï¼ŒæŠŠé«˜ç²¾åŠ›é‡Šæ”¾å‡ºæ¥ã€‚æ‰€ä»¥æˆ‘è¿å·ä¸¤ä¸ªæœˆï¼Œç²¾åŠ›æ–¹é¢ç›´æ¥çªç ´äº†ä»¥å¾€å‡ åå¹´çš„ç“¶é¢ˆã€‚ï¼ˆä¸å»ºè®®èº«ä½“å·®çš„åŒå­¦æ¨¡ä»¿ï¼‰</strong></p>
<p><strong>èƒ½ä¸èƒ½æˆä¸ºä¸€ä¸ªé«˜ç²¾åŠ›çš„äººï¼Œä¸»è¦å–å†³äºä½ çš„ä¸»ä½“æ€§æ˜¯å¦ç¡®ç«‹ã€‚</strong></p>
<p>ä¸€æ—¦ç¡®ç«‹ï¼Œä¸ç”¨åˆ«äººé€¼ä½ ï¼Œä½ çš„ç²¾åŠ›ä¹Ÿä¼šåƒäº•å–·ä¸€æ ·çˆ†å‘ã€‚Â <strong>å› ä¸ºè‡ªæˆ‘å°Šé‡ï¼Œæ‰€ä»¥æ‰æœ‰åŠ¨åŠ›ï¼Œè€Œä¸æ˜¯å› ä¸ºè¦ç¬¦åˆæŸé¡¹ç¤¾ä¼šæ ‡å‡†ï¼Œæ‰å‹‰å¼ºè®©è‡ªå·±ä¿æŒå……æ²›çš„ç²¾åŠ›ã€‚å› ä¸ºè‡ªå·±çš„æ‰¹å‡†å’Œè®¸å¯ï¼Œæ‰ä¸Šè·¯ï¼Œè€Œä¸æ˜¯å› ä¸ºä»»ä½•å¤–å› ï¼Œè¿‡å®Œä¸€ç”Ÿã€‚</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Android äº‹ä»¶åˆ†å‘æœºåˆ¶ï¼ˆä¸€ï¼‰â€”â€” å…¨æµç¨‹æºç è§£æ]]></title>    <link>https://juejin.cn/post/7588109656041259054</link>    <guid>https://juejin.cn/post/7588109656041259054</guid>    <pubDate>2025-12-28T05:02:58.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588109656041259054" data-draft-id="7585406229167931442" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Android äº‹ä»¶åˆ†å‘æœºåˆ¶ï¼ˆä¸€ï¼‰â€”â€” å…¨æµç¨‹æºç è§£æ"/> <meta itemprop="keywords" content="æºç ,Android,é¢è¯•"/> <meta itemprop="datePublished" content="2025-12-28T05:02:58.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ— é™è¿›åŒ–"/> <meta itemprop="url" content="https://juejin.cn/user/108212996024855"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Android äº‹ä»¶åˆ†å‘æœºåˆ¶ï¼ˆä¸€ï¼‰â€”â€” å…¨æµç¨‹æºç è§£æ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/108212996024855/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ— é™è¿›åŒ–
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-28T05:02:58.000Z" title="Sun Dec 28 2025 05:02:58 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-28
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»15åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">1. ç‚¹å‡»äº‹ä»¶ä¼ é€’é“¾è·¯</h2>
<p>äº‹ä»¶å¹¶éå‡­ç©ºäº§ç”Ÿç›´æ¥åˆ°è¾¾ Viewï¼Œè€Œæ˜¯ç»è¿‡äº†ä¸€ä¸ªè·¨è¶Šå†…æ ¸ã€ç³»ç»ŸæœåŠ¡ä¸åº”ç”¨è¿›ç¨‹çš„æ¼«é•¿æ—…ç¨‹ã€‚</p>
<h3 data-id="heading-1">1.1 æºå¤´æº¯æºï¼šç³»ç»Ÿå±‚</h3>
<p>äº‹ä»¶åœ¨è§¦è¾¾åº”ç”¨å±‚ Java ä»£ç å‰ï¼Œéœ€åœ¨ç³»ç»Ÿåº•å±‚å®Œæˆâ€œç¡¬ä»¶-å†…æ ¸-æœåŠ¡-åº”ç”¨â€çš„è·¨è¿›ç¨‹æ¥åŠ›ï¼š</p>
<p>è§¦æ‘¸ä¿¡å·ç”±å†…æ ¸é©±åŠ¨æ•è·å¹¶å†™å…¥æ–‡ä»¶èŠ‚ç‚¹ï¼Œç»ç”± SystemServer ä¸­çš„ InputReader è¯»å–ä¸ InputDispatcher åˆ†å‘ï¼Œæœ€ç»ˆé€šè¿‡ <strong>Socket</strong> è·¨è¿›ç¨‹ä¼ è¾“è‡³åº”ç”¨è¿›ç¨‹çš„ ViewRootImplï¼Œä»è€Œæ­£å¼æ¿€æ´» Android åº”ç”¨å±‚çš„äº‹ä»¶åˆ†å‘ä½“ç³»ã€‚</p>
<h3 data-id="heading-2">1.2 æ ¸å¿ƒç»„ä»¶çš„è§’è‰²å®šä½</h3>
<p>è¿›å…¥åº”ç”¨å±‚åï¼ŒAndroid UI ç³»ç»Ÿçš„äº‹ä»¶ä¼ é€’ç‰©ç†è½½ä½“ç”±ä¸‰å±‚æ ¸å¿ƒç»„ä»¶ååŒæ„æˆï¼š</p>
<ol>
<li>Activityï¼šä½œä¸ºä¸šåŠ¡å…¥å£æŒæœ‰ Windowã€‚</li>
<li>Windowï¼šä½œä¸ºç³»ç»Ÿæ¡¥æ¢ç®¡ç† DecorViewã€‚</li>
<li>DecorViewï¼šä½œä¸ºè§†å›¾æ ¹èŠ‚ç‚¹æ‰¿è½½å…·ä½“çš„äº¤äº’æ‰§è¡Œã€‚</li>
</ol>
<p><a href="https://juejin.cn/post/7516829784414568499" target="_blank" title="https://juejin.cn/post/7516829784414568499">ç‚¹å‡»é˜…è¯»ï¼šAndroid çª—å£æ˜¾ç¤ºï¼ˆä¸€ï¼‰â€”â€” Activityã€Window å’Œ View ä¹‹é—´çš„è”ç³»</a></p>
<h3 data-id="heading-3">1.3 ç‚¹å‡»äº‹ä»¶ä¼ é€’é“¾è·¯ï¼šU å‹æµè½¬çš„é—­ç¯</h3>
<p>ç‚¹å‡»äº‹ä»¶çš„ä¼ é€’å¹¶éå•å‘æµåŠ¨ï¼Œè€Œæ˜¯ä¸€ä¸ªåŸºäºé€’å½’è°ƒç”¨çš„å®Œæ•´é—­ç¯ï¼Œå½¢æˆäº†çš„<strong>Uå‹</strong>ç»“æ„ï¼Œè¿™æ˜¯ Android äº‹ä»¶åˆ†å‘æœºåˆ¶çš„æ ¸å¿ƒéª¨æ¶ã€‚</p>
<h4 data-id="heading-4">1.3.1 ä¸‹æ²‰é˜¶æ®µï¼ˆåˆ†å‘ä¸æ‹¦æˆªï¼‰</h4>
<p><strong>Activity</strong> <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>â†’</mo></mrow><annotation encoding="application/x-tex">\rightarrow</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.3669em;"/><span class="mrel">â†’</span></span></span></span></span> <strong>PhoneWindow</strong> <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>â†’</mo></mrow><annotation encoding="application/x-tex">\rightarrow</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.3669em;"/><span class="mrel">â†’</span></span></span></span></span> <strong>DecorView (æ ¹ ViewGroup)</strong> <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>â†’</mo></mrow><annotation encoding="application/x-tex">\rightarrow</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.3669em;"/><span class="mrel">â†’</span></span></span></span></span> <strong>å­ ViewGroup</strong> <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>â†’</mo></mrow><annotation encoding="application/x-tex">\rightarrow</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.3669em;"/><span class="mrel">â†’</span></span></span></span></span> <strong>ç›®æ ‡ View</strong></p>
<p>å½“æ‰‹æŒ‡è§¦æ‘¸å±å¹•ï¼Œç¡¬ä»¶ä¿¡å·è¢«å°è£…ä¸º Event åï¼Œé¦–å…ˆä¼ é€’ç»™ Activityã€‚éšåï¼Œäº‹ä»¶ç»ç”± PhoneWindow ä¼ è‡³ DecorViewã€‚DecorView ä½œä¸ºæ ¹ ViewGroupï¼Œå¼€å§‹è‡ªé¡¶å‘ä¸‹åœ°åˆ†å‘äº‹ä»¶ï¼Œå¯»æ‰¾èƒ½å¤„ç†è¯¥äº‹ä»¶çš„ç›®æ ‡ Viewã€‚</p>
<h4 data-id="heading-5">1.3.2 ä¸Šæµ®é˜¶æ®µï¼ˆæ¶ˆè´¹ä¸å›æº¯ï¼‰</h4>
<p><strong>ç›®æ ‡ View</strong> <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>â†’</mo></mrow><annotation encoding="application/x-tex">\rightarrow</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.3669em;"/><span class="mrel">â†’</span></span></span></span></span> <strong>å­ ViewGroup</strong> <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>â†’</mo></mrow><annotation encoding="application/x-tex">\rightarrow</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.3669em;"/><span class="mrel">â†’</span></span></span></span></span> <strong>DecorView</strong> <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>â†’</mo></mrow><annotation encoding="application/x-tex">\rightarrow</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.3669em;"/><span class="mrel">â†’</span></span></span></span></span> <strong>PhoneWindow</strong> <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>â†’</mo></mrow><annotation encoding="application/x-tex">\rightarrow</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.3669em;"/><span class="mrel">â†’</span></span></span></span></span> <strong>Activity</strong></p>
<p>å½“äº‹ä»¶åˆ°è¾¾åº•å±‚ç›®æ ‡ View åï¼Œæˆ–è€…åœ¨åˆ†å‘è¿‡ç¨‹ä¸­æ²¡æœ‰ View æ¶ˆè´¹äº‹ä»¶ï¼Œäº‹ä»¶ä¼šåƒæ°”æ³¡ä¸€æ ·è‡ªåº•å‘ä¸Šå›ä¼ ç»™çˆ¶å®¹å™¨ï¼Œç›´è‡³å›åˆ° Activity çš„ <code>onTouchEvent</code> è¿›è¡Œå…œåº•å¤„ç†ã€‚</p>
<h2 data-id="heading-6">2. è´£ä»»é“¾æ¨¡å¼ä¸‹çš„ U å‹æµè½¬</h2>
<p>Android äº‹ä»¶åˆ†å‘æœ¬è´¨ä¸Šæ˜¯<strong>è´£ä»»é“¾æ¨¡å¼</strong>ã€‚å®ƒä¸ä»…ä»…æ˜¯çº¿æ€§çš„ä¼ é€’ï¼Œè€Œæ˜¯åŸºäºè§†å›¾æ ‘ç»“æ„çš„é€’å½’è°ƒç”¨ä¸å›æº¯ã€‚</p>
<h4 data-id="heading-7">2.1 è´£ä»»é“¾çš„æ„å»ºä¸åˆ†å·¥</h4>
<p>åœ¨æ ‡å‡†çš„è´£ä»»é“¾æ¨¡å¼ä¸­ï¼Œå¤šä¸ªå¯¹è±¡æœ‰æœºä¼šå¤„ç†è¯·æ±‚ï¼Œä»è€Œé¿å…è¯·æ±‚çš„å‘é€è€…å’Œæ¥æ”¶è€…ä¹‹é—´çš„è€¦åˆå…³ç³»ã€‚</p>
<p>åœ¨äº‹ä»¶åˆ†å‘æœºåˆ¶ä¸­ï¼Œè¿™ä¸€æ¨¡å¼è¢«é€‚é…ä¸ºâ€œåˆ†å‘-æ‹¦æˆª-æ¶ˆè´¹â€çš„ä¸‰çº§ä½“ç³»ï¼š</p>
<ol>
<li><strong>é“¾çš„èŠ‚ç‚¹</strong>ï¼šæ¯ä¸ª <code>View</code> å’Œ <code>ViewGroup</code> éƒ½æ˜¯é“¾ä¸Šçš„ä¸€ä¸ªèŠ‚ç‚¹ã€‚</li>
<li><strong>ä¼ é€’æœºåˆ¶</strong>ï¼šäº‹ä»¶åœ¨è§†å›¾æ ‘ä¸­ä¼ é€’ï¼Œç›´åˆ°è¢«æŸä¸ªèŠ‚ç‚¹æ¶ˆè´¹æˆ–è€…å›ä¼ è‡³æ ¹èŠ‚ç‚¹ã€‚</li>
<li><strong>åŒå‘æµåŠ¨</strong>ï¼šä¸åŒäºæ ‡å‡†è´£ä»»é“¾çš„å•å‘ä¼ é€’ï¼ŒAndroid æä¾›äº†ä¸‹æ²‰ï¼ˆåˆ†å‘ï¼‰ä¸ä¸Šæµ®ï¼ˆå›æº¯ï¼‰çš„åŒå‘é€šé“ï¼Œç¡®ä¿äº‹ä»¶èƒ½è¢«ç²¾å‡†æ•è·æˆ–å…œåº•å¤„ç†ã€‚</li>
</ol>
<p>Android äº‹ä»¶åˆ†å‘æœºåˆ¶æ˜¯ä¸€ä¸ªç”± <code>dispatchTouchEvent</code> é©±åŠ¨çš„è´£ä»»é“¾ï¼Œé€šè¿‡ <code>onInterceptTouchEvent</code> ä½œä¸ºæ§åˆ¶é˜€å†³å®šæ˜¯å¦æˆªæ–­å‘ä¸‹ä¼ é€’ï¼Œå¹¶ç”± <code>onTouchEvent</code> ä½œä¸ºå¤„ç†è€…æœ€ç»ˆå†³å®šæ˜¯æ¶ˆè€—äº‹ä»¶ç»ˆæ­¢é“¾æ¡ï¼Œè¿˜æ˜¯å‘ä¸Šçº§å›æº¯ä»»åŠ¡ã€‚</p>
<p><strong>æ ¸å¿ƒæ–¹æ³•ï¼š</strong></p>
<p>å…ˆæ˜ç¡®è¿™ä¸‰ä¸ªæ–¹æ³•åœ¨ <code>Activity</code>ã€<code>ViewGroup</code> å’Œ <code>View</code> ä¸­çš„å­˜åœ¨æƒ…å†µï¼š</p>

































<table><thead><tr><th><strong>æ–¹æ³•</strong></th><th><strong>Activity</strong></th><th><strong>ViewGroup</strong></th><th><strong>View</strong></th><th><strong>ä½œç”¨</strong></th></tr></thead><tbody><tr><td><strong>dispatchTouchEvent</strong></td><td>âœ…</td><td>âœ…</td><td>âœ…</td><td><strong>åˆ†å‘</strong>äº‹ä»¶ã€‚åªè¦äº‹ä»¶ä¼ åˆ°äº†è¯¥ç»„ä»¶ï¼Œæ­¤æ–¹æ³•å¿…è¢«è°ƒç”¨ã€‚</td></tr><tr><td><strong>onInterceptTouchEvent</strong></td><td>âŒ</td><td>âœ…</td><td>âŒ</td><td><strong>æ‹¦æˆª</strong>äº‹ä»¶ã€‚å†³å®šæ˜¯å¦æŠŠäº‹ä»¶æ‹¦ä¸‹è‡ªå·±å¤„ç†ã€‚</td></tr><tr><td><strong>onTouchEvent</strong></td><td>âœ…</td><td>âœ…</td><td>âœ…</td><td><strong>å¤„ç†</strong>äº‹ä»¶ã€‚æ¶ˆè€—ï¼ˆConsumeï¼‰ç‚¹å‡»æˆ–æ»‘åŠ¨åŠ¨ä½œã€‚</td></tr></tbody></table>
<p>ä¸ºä»€ä¹ˆåªæœ‰viewgroupæœ‰onInterceptTouchEventæ–¹æ³•ï¼Œä¸ºä»€ä¹ˆè¿™ä¹ˆè®¾è®¡ï¼Ÿ</p>
<p>Android äº‹ä»¶åˆ†å‘æœºåˆ¶æœ¬è´¨ä¸Šæ˜¯ä¸€æ¬¡åŸºäºè´£ä»»é“¾æ¨¡å¼çš„ U å‹å®Œæ•´æµè½¬ï¼š</p>
<p>å½“è§¦æ‘¸å‘ç”Ÿæ—¶ï¼Œäº‹ä»¶ç”± Activity å§‹å‘ï¼Œç» PhoneWindow ä¼ è‡³ DecorViewï¼Œéšåå¼€å¯ <strong>è‡ªé¡¶å‘ä¸‹</strong> çš„åˆ†å‘é“¾è·¯ï¼ŒæœŸé—´ ViewGroup é€šè¿‡ <code>dispatchTouchEvent</code> åˆ†å‘å¹¶åˆ©ç”¨ <code>onInterceptTouchEvent</code> åˆ¤å®šæ˜¯å¦æ‹¦æˆªï¼›ä¸€æ—¦åˆ°è¾¾åº•å±‚ View æˆ–è¢«æ‹¦æˆªï¼Œé“¾è·¯å³åˆ»åè½¬ä¸º <strong>è‡ªåº•å‘ä¸Š</strong> çš„å›æº¯ï¼Œé€šè¿‡ <code>onTouchEvent</code> é€çº§å°è¯•æ¶ˆè´¹ï¼Œè‹¥æœ€ç»ˆæ—  View å“åº”ï¼Œäº‹ä»¶å°†å›æµè‡³ Activity å…œåº•ï¼Œå½¢æˆä»ç³»ç»Ÿå±‚åˆ°è§†å›¾æ ‘å†å›å½’é€»è¾‘å±‚çš„å®Œæ•´é—­ç¯ã€‚</p>
<h2 data-id="heading-8">3. æºç è§£æ</h2>
<h3 data-id="heading-9">3.1 Activity çš„åˆ†å‘</h3>
<p><strong>ç¡¬ä»¶é©±åŠ¨ (Kernel) <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>â†’</mo></mrow><annotation encoding="application/x-tex">\rightarrow</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.3669em;"/><span class="mrel">â†’</span></span></span></span></span> SystemServer (InputReader/InputDispatcher) <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>â†’</mo></mrow><annotation encoding="application/x-tex">\rightarrow</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.3669em;"/><span class="mrel">â†’</span></span></span></span></span> ViewRootImpl <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>â†’</mo></mrow><annotation encoding="application/x-tex">\rightarrow</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.3669em;"/><span class="mrel">â†’</span></span></span></span></span> DecorView <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>â†’</mo></mrow><annotation encoding="application/x-tex">\rightarrow</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.3669em;"/><span class="mrel">â†’</span></span></span></span></span> Activity</strong></p>
<p>InputEventReceiver ç±»çš„ dispatchInputEvent æ–¹æ³•:</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">dispatchInputEvent</span><span class="hljs-params">(<span class="hljs-type">int</span> seq, InputEvent event)</span> {
    mSeqMap.put(event.getSequenceNumber(), seq);
    <span class="hljs-comment">// è°ƒç”¨å­ç±»çš„å®ç°</span>
    onInputEvent(event);
}
</code></pre>
<p>å®ƒæ¥æ”¶ Native å±‚ä¼ é€’è¿‡æ¥çš„ InputEvent å¯¹è±¡ï¼Œå¹¶å°†å…¶åˆ†å‘ç»™å­ç±»ï¼ˆå¦‚ ViewRootImpl.WindowInputEventReceiverï¼‰ã€‚</p>
<p>æ‰€ä»¥æœ€ç»ˆæ‰§è¡Œåˆ°äº†ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ViewRootImpl.java</span>
<span class="hljs-keyword">final</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">WindowInputEventReceiver</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">InputEventReceiver</span> {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onInputEvent</span><span class="hljs-params">(InputEvent event)</span> {
        <span class="hljs-comment">// ...</span>
        enqueueInputEvent(event, <span class="hljs-built_in">this</span>, <span class="hljs-number">0</span>, <span class="hljs-literal">true</span>); <span class="hljs-comment">// å°†äº‹ä»¶åŠ å…¥é˜Ÿåˆ—</span>
    }
}
</code></pre>
<p>enqueueInputEvent ä¼šè°ƒç”¨ doProcessInputEvents ï¼Œå¼€å§‹å¤„ç†äº‹ä»¶é˜Ÿåˆ—:</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ViewRootImpl.java</span>
<span class="hljs-keyword">void</span> <span class="hljs-title function_">doProcessInputEvents</span><span class="hljs-params">()</span> {
    <span class="hljs-keyword">while</span> (mPendingInputEventHead != <span class="hljs-literal">null</span>) {
        <span class="hljs-comment">// ...</span>
        deliverInputEvent(q); <span class="hljs-comment">// å¼€å§‹åˆ†å‘äº‹ä»¶</span>
    }
}
</code></pre>
<p>deliverInputEvent ä¼šå°†äº‹ä»¶äº¤ç»™è´£ä»»é“¾çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ mFirstInputStage ã€‚è¿™ä¸ªè´£ä»»é“¾åœ¨ setView æ–¹æ³•ä¸­åˆå§‹åŒ–ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ViewRootImpl.java</span>
<span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">deliverInputEvent</span><span class="hljs-params">(QueuedInputEvent q)</span> {
    stage.deliver(q);
}
</code></pre>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ViewRootImpl.java -&gt; setView()</span>
<span class="hljs-comment">// åˆå§‹åŒ– InputStage è´£ä»»é“¾</span>
<span class="hljs-comment">// 1. NativePreImeInputStage</span>
<span class="hljs-comment">// 2. ViewPreImeInputStage</span>
<span class="hljs-comment">// 3. ImeInputStage (è¾“å…¥æ³•)</span>
<span class="hljs-comment">// 4. EarlyPostImeInputStage</span>
<span class="hljs-comment">// 5. NativePostImeInputStage</span>
<span class="hljs-comment">// 6. ViewPostImeInputStage (å…³é”®èŠ‚ç‚¹)</span>
<span class="hljs-comment">// 7. SyntheticInputStage</span>
mFirstInputStage = nativePreImeStage;
</code></pre>
<p>äº‹ä»¶ä¼šä¾æ¬¡ç»è¿‡è¿™äº› Stageã€‚å¦‚æœå‰é¢çš„ Stage æ²¡æœ‰æ¶ˆè´¹äº‹ä»¶ï¼ˆä¾‹å¦‚ IME æ²¡æœ‰æ‹¦æˆªï¼‰ï¼Œäº‹ä»¶æœ€ç»ˆä¼šåˆ°è¾¾ ViewPostImeInputStage ã€‚</p>
<p>ViewPostImeInputStage çš„ onProcess æ–¹æ³•ä¼šæ ¹æ®äº‹ä»¶ç±»å‹è°ƒç”¨ä¸åŒçš„å¤„ç†é€»è¾‘ã€‚å¯¹äºè§¦æ‘¸äº‹ä»¶ï¼ˆMotionEventï¼‰ï¼Œå®ƒä¼šè°ƒç”¨ processPointerEvent ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ViewRootImpl.java</span>
<span class="hljs-keyword">final</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ViewPostImeInputStage</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">InputStage</span> {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-type">int</span> <span class="hljs-title function_">onProcess</span><span class="hljs-params">(QueuedInputEvent q)</span> {
        <span class="hljs-keyword">if</span> (q.mEvent <span class="hljs-keyword">instanceof</span> KeyEvent) {
            <span class="hljs-keyword">return</span> processKeyEvent(q);
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-comment">// ...</span>
            <span class="hljs-keyword">if</span> ((source &amp; InputDevice.SOURCE_CLASS_POINTER) != <span class="hljs-number">0</span>) {
                <span class="hljs-keyword">return</span> processPointerEvent(q); 
            }
            <span class="hljs-comment">// ...</span>
        }
    }

    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-title function_">processPointerEvent</span><span class="hljs-params">(QueuedInputEvent q)</span> {
        <span class="hljs-keyword">final</span> <span class="hljs-type">MotionEvent</span> <span class="hljs-variable">event</span> <span class="hljs-operator">=</span> (MotionEvent)q.mEvent;
        <span class="hljs-comment">// ...</span>
        <span class="hljs-comment">// mView æ˜¯ DecorView</span>
        <span class="hljs-comment">// è¿™é‡Œè°ƒç”¨ DecorView.dispatchPointerEvent</span>
        <span class="hljs-type">boolean</span> <span class="hljs-variable">handled</span> <span class="hljs-operator">=</span> mView.dispatchPointerEvent(event); 
        <span class="hljs-comment">// ...</span>
        <span class="hljs-keyword">return</span> handled ? FINISH_HANDLED : FORWARD;
    }
}
</code></pre>
<p>mView åœ¨ ViewRootImpl ä¸­å°±æ˜¯ DecorView ã€‚ DecorView ç»§æ‰¿è‡ª View ï¼Œ dispatchPointerEvent æ˜¯ View ç±»çš„æ–¹æ³•ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// View.java</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">dispatchPointerEvent</span><span class="hljs-params">(MotionEvent event)</span> {
    <span class="hljs-keyword">if</span> (event.isTouchEvent()) {
        <span class="hljs-keyword">return</span> dispatchTouchEvent(event); <span class="hljs-comment">// è¿™é‡Œçš„ dispatchTouchEvent æ˜¯ DecorView é‡å†™çš„ç‰ˆæœ¬</span>
    } <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">return</span> dispatchGenericMotionEvent(event);
    }
}
</code></pre>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">dispatchTouchEvent</span><span class="hljs-params">(MotionEvent ev)</span> {
    <span class="hljs-comment">// è·å– Window çš„å›è°ƒæ¥å£ï¼Œé€šå¸¸æ˜¯ Activity å®ä¾‹</span>
    <span class="hljs-keyword">final</span> Window.<span class="hljs-type">Callback</span> <span class="hljs-variable">cb</span> <span class="hljs-operator">=</span> mWindow.getCallback();

    <span class="hljs-comment">// ä¼˜å…ˆå°†äº‹ä»¶åˆ†å‘ç»™ Activity å¤„ç†</span>
    <span class="hljs-comment">// æ¡ä»¶ï¼š1) å›è°ƒå­˜åœ¨ 2) çª—å£æœªé”€æ¯ 3) ä¸æ˜¯å­çª—å£ï¼ˆmFeatureId &lt; 0 è¡¨ç¤ºä¸»çª—å£ï¼‰</span>
    <span class="hljs-keyword">return</span> cb != <span class="hljs-literal">null</span> &amp;&amp; !mWindow.isDestroyed() &amp;&amp; mFeatureId &lt; <span class="hljs-number">0</span>
            ? cb.dispatchTouchEvent(ev) : <span class="hljs-built_in">super</span>.dispatchTouchEvent(ev);
}
</code></pre>
<p>é€šè¿‡ mWindow.getCallback() è·å–åˆ° Window çš„æ§åˆ¶è€…ï¼Œå®ƒçš„è€å¤§ï¼ŒActivityã€‚æœ€ç»ˆè°ƒç”¨è‡³ Activity çš„ dispatchTouchEvent æ–¹æ³•ã€‚</p>
<p>DecorView å°†äº‹ä»¶ä¸ŠæŠ¥ç»™ Activity ï¼Œè®© Activity æœ‰æœºä¼šåœ¨ View å¤„ç†ä¹‹å‰æ‹¦æˆªæˆ–å¤„ç†ã€‚</p>
<p>Activity çš„ dispatchTouchEvent éå¸¸ç®€å•ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">dispatchTouchEvent</span><span class="hljs-params">(MotionEvent ev)</span> {
    <span class="hljs-keyword">if</span> (ev.getAction() == MotionEvent.ACTION_DOWN) {
        onUserInteraction(); <span class="hljs-comment">// å±ä¿æˆ–ç³»ç»Ÿäº¤äº’å›è°ƒ</span>
    }
    <span class="hljs-comment">// å§”æ‰˜ç»™ Window å¤„ç† -&gt; PhoneWindow -&gt; DecorView</span>
    <span class="hljs-keyword">if</span> (getWindow().superDispatchTouchEvent(ev)) { 
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>; 
    }
    <span class="hljs-comment">// å¦‚æœæ‰€æœ‰ View éƒ½ä¸æ¶ˆè´¹ï¼Œæœ€ç»ˆç”± Activity å…œåº•å¤„ç†</span>
    <span class="hljs-keyword">return</span> onTouchEvent(ev); 
}
</code></pre>
<p>å¦‚æœ Window çš„ superDispatchTouchEvent è¿”å› trueï¼Œè¡¨ç¤ºäº‹ä»¶è¢«æ¶ˆè´¹ï¼Œå¾ªç¯ç»“æŸã€‚</p>
<p><strong>é‡å†™ Activity çš„ dispatchTouchEvent æ–¹æ³•çš„ä¸€äº›åœºæ™¯ï¼šç‚¹å‡»ç©ºç™½å¤„éšè—è½¯é”®ç›˜ã€å…¨å±€é˜²æŠ–ã€åº”ç”¨é•¿æ—¶é—´æ— æ“ä½œæ£€æµ‹ã€å…¨å±€åŸ‹ç‚¹ä¸æ‰‹åŠ¿åˆ†æç­‰ã€‚</strong></p>
<h3 data-id="heading-10">3.2 ViewGroup çš„æ‹¦æˆªä¸åˆ†å‘ (æœºåˆ¶æ ¸å¿ƒ)</h3>
<p>è¿™æ˜¯æ•´ä¸ªæœºåˆ¶ä¸­æœ€å¤æ‚çš„éƒ¨åˆ†ã€‚ViewGroup æ—¢è¦å†³å®šæ˜¯å¦æ‹¦æˆªï¼Œåˆè¦éå†å­ View å¯»æ‰¾æ¶ˆè´¹è€…ã€‚</p>
<p><strong>Activity â†’ PhoneWindow â†’ DecorView (æ ¹ ViewGroup) â†’ å­ ViewGroup â†’ ç›®æ ‡ View</strong></p>
<p>Activity æ”¶åˆ°äº‹ä»¶åï¼Œå§”æ‰˜ç»™ PhoneWindow å¤„ç†ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">superDispatchTouchEvent</span><span class="hljs-params">(MotionEvent event)</span> {
    <span class="hljs-comment">// DecorView æ˜¯ Window å¯¹åº”çš„ RootViewï¼Œç»§æ‰¿è‡ª FrameLayout</span>
    <span class="hljs-keyword">return</span> mDecor.superDispatchTouchEvent(event);
}
</code></pre>
<p>äº‹ä»¶å›åˆ° DecorView ï¼Œä½†è¿™æ¬¡è°ƒç”¨çš„æ˜¯ super æ–¹æ³•ï¼Œè¿›å…¥æ ‡å‡†çš„ ViewGroup åˆ†å‘æµç¨‹ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// DecorView.java</span>
<span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">superDispatchTouchEvent</span><span class="hljs-params">(MotionEvent event)</span> {
    <span class="hljs-comment">// è°ƒç”¨çˆ¶ç±» FrameLayout çš„ dispatchTouchEventï¼Œå¯åŠ¨æ ‡å‡†çš„ View äº‹ä»¶åˆ†å‘æµç¨‹</span>
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">super</span>.dispatchTouchEvent(event);
}
</code></pre>
<h4 data-id="heading-11">A. æ‹¦æˆªé€»è¾‘ (Intercept)</h4>
<p>åœ¨ <code>ViewGroup.dispatchTouchEvent</code> ä¸­ï¼Œè‹¥æ˜¯æ–°äº‹ä»¶(DOWN)æˆ–å·²æœ‰ç›®æ ‡(mFirstTouchTarget)ï¼Œä¸”æœªè¢«ç¦æ­¢(disallowIntercept)ï¼Œåˆ™è°ƒ onInterceptTouchEventï¼›å¦åˆ™(éDOWNä¸”æ— ç›®æ ‡)é»˜è®¤æ‹¦æˆªï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ViewGroup.java</span>
<span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">dispatchTouchEvent</span><span class="hljs-params">(MotionEvent ev)</span> {
    <span class="hljs-comment">//...</span>
    <span class="hljs-keyword">if</span> (onFilterTouchEventForSecurity(ev)) {
        <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">action</span> <span class="hljs-operator">=</span> ev.getAction();
        <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">actionMasked</span> <span class="hljs-operator">=</span> action &amp; MotionEvent.ACTION_MASK;
        <span class="hljs-keyword">if</span> (actionMasked == MotionEvent.ACTION_DOWN) {
            <span class="hljs-comment">// æ–°çš„è§¦æ‘¸åºåˆ—å¼€å§‹ (ACTION_DOWN)</span>
            <span class="hljs-comment">// 1. æ¸…é™¤ä¹‹å‰çš„ TouchTargets (mFirstTouchTargetç½®ç©º)</span>
            <span class="hljs-comment">// 2. é‡ç½®è§¦æ‘¸çŠ¶æ€ (åŒ…æ‹¬ FLAG_DISALLOW_INTERCEPT)</span>
            cancelAndClearTouchTargets(ev);
            resetTouchState();
        }

        <span class="hljs-keyword">final</span> <span class="hljs-type">boolean</span> intercepted;
        <span class="hljs-comment">// æ‹¦æˆªåˆ¤æ–­çš„æ ¸å¿ƒæ¡ä»¶ï¼š</span>
        <span class="hljs-comment">// 1. ä¸€ä¸ªæ–°çš„äº‹ä»¶åºåˆ—å¼€å§‹</span>
        <span class="hljs-comment">// 2. å¦‚æœ mFirstTouchTarget != nullï¼Œè¯´æ˜å·²ç»æœ‰å­ View æ¶ˆè´¹äº†è¯¥åºåˆ—çš„ ACTION_DOWNï¼Œ</span>
        <span class="hljs-comment">//    åç»­çš„ MOVE/UP äº‹ä»¶ä¹Ÿéœ€è¦å†æ¬¡åˆ¤æ–­æ˜¯å¦æ‹¦æˆª</span>
        <span class="hljs-keyword">if</span> (actionMasked == MotionEvent.ACTION_DOWN
                || mFirstTouchTarget != <span class="hljs-literal">null</span>) {
            <span class="hljs-comment">// å­ View å¯ä»¥é€šè¿‡ requestDisallowInterceptTouchEvent(true) è®¾ç½® FLAG_DISALLOW_INTERCEPT</span>
            <span class="hljs-comment">// ä»è€Œå¼ºåˆ¶çˆ¶å®¹å™¨è·³è¿‡ onInterceptTouchEvent çš„è°ƒç”¨ï¼Œç›´æ¥ä¸æ‹¦æˆª</span>
            <span class="hljs-keyword">final</span> <span class="hljs-type">boolean</span> <span class="hljs-variable">disallowIntercept</span> <span class="hljs-operator">=</span> (mGroupFlags &amp; FLAG_DISALLOW_INTERCEPT) != <span class="hljs-number">0</span>;
            <span class="hljs-keyword">if</span> (!disallowIntercept) {
                <span class="hljs-comment">// è°ƒç”¨ onInterceptTouchEvent è¯¢é—®æ˜¯å¦æ‹¦æˆª</span>
                intercepted = onInterceptTouchEvent(ev);
                ev.setAction(action); <span class="hljs-comment">// restore action in case it was changed</span>
            } <span class="hljs-keyword">else</span> {
                intercepted = <span class="hljs-literal">false</span>;
            }
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-comment">// å¦‚æœä¸æ˜¯ DOWN äº‹ä»¶ï¼Œä¸” mFirstTouchTarget ä¸ºç©º</span>
            <span class="hljs-comment">// è¯´æ˜ DOWN äº‹ä»¶æ—¶ ViewGroup æ‹¦æˆªäº†ï¼Œæˆ–è€…æ²¡æœ‰å­ View æ¶ˆè´¹</span>
            <span class="hljs-comment">// æ­¤æ—¶ç›´æ¥é»˜è®¤æ‹¦æˆªåç»­äº‹ä»¶ï¼Œä¸å†è°ƒç”¨ onInterceptTouchEvent</span>
            intercepted = <span class="hljs-literal">true</span>;
        }
        <span class="hljs-comment">// ...</span>
        
        <span class="hljs-comment">// [æµç¨‹è§£é‡Š] å¦‚æœäº‹ä»¶æœªå–æ¶ˆä¸”æœªæ‹¦æˆªï¼Œåˆ™å¼€å§‹åˆ†å‘ç»™å­ View</span>
        <span class="hljs-keyword">if</span> (!canceled &amp;&amp; !intercepted) {
        
        }
    }
}
</code></pre>
<p>mFirstTouchTarget æ˜¯ ViewGroup ä¸­ç”¨äºè®°å½•å½“å‰è§¦æ‘¸äº‹ä»¶åºåˆ—ï¼ˆå¦‚ ACTION_DOWN ä¹‹åï¼‰ä¸­æˆåŠŸæ¶ˆè´¹äº†äº‹ä»¶çš„å­ View é“¾è¡¨ ï¼Œå®ƒçš„å­˜åœ¨ä½¿å¾—åç»­äº‹ä»¶ï¼ˆå¦‚ ACTION_MOVEã€ACTION_UPï¼‰å¯ä»¥ç›´æ¥åˆ†å‘ç»™ç›®æ ‡ View è€Œæ— éœ€é‡æ–°éå†æŸ¥æ‰¾ï¼Œä»è€Œæå‡åˆ†å‘æ•ˆç‡ã€‚</p>
<p><strong>åœºæ™¯ Aï¼šACTION_DOWN</strong>ï¼šäº‹ä»¶åºåˆ—çš„å¼€å§‹ï¼Œä¸€å®šä¼šè¿›å…¥æ‹¦æˆªåˆ¤æ–­é€»è¾‘ï¼Œé»˜è®¤è°ƒç”¨ <code>onInterceptTouchEvent</code>Â æ–¹æ³•ï¼Œå¦‚æœè¿”å› trueï¼Œåˆ™ ViewGroup è¿›è¡Œæ‹¦æˆªï¼Œä¸ä¼šå°†äº‹ä»¶åºåˆ—åˆ†å‘è‡³å­ Viewã€‚å­ View å¯è°ƒç”¨ requestDisallowInterceptTouchEvent(true) è®¾ç½® FLAG_DISALLOW_INTERCEPTï¼Œè¿™æ ·ä¼šå¼ºåˆ¶ç¦æ­¢ ViewGroup è¿›è¡Œæ‹¦æˆªã€‚</p>
<p><strong>åœºæ™¯ Bï¼šACTION_MOVE ä¸”å·²æœ‰å­ View æ•è·</strong>ï¼šæ­¤æ—¶Â <code>mFirstTouchTarget!= null</code>ï¼Œè¡¨ç¤ºè¯¥äº‹ä»¶åºåˆ—çš„ ACTION_DOWN äº‹ä»¶å·²ç»åˆ†å‘ï¼Œæœ‰å­ View æˆåŠŸæ¶ˆè´¹äº†ä¹‹å‰çš„äº‹ä»¶ (DOWN)ï¼Œé‚£ä¹ˆåç»­äº‹ä»¶ä¸€å®šä¼šè¿›å…¥æ‹¦æˆªåˆ¤æ–­é€»è¾‘ã€‚çˆ¶ View ä¾ç„¶æœ‰æœºä¼šåœ¨åç»­çš„Â MOVEÂ è¿‡ç¨‹ä¸­â€œåæ‚”â€ï¼Œé€šè¿‡Â <code>onInterceptTouchEvent</code>Â è¿”å›Â trueÂ æ¥åˆ‡æ–­å­ View çš„äº‹ä»¶æµï¼ˆæ­¤æ—¶å­ View ä¼šæ”¶åˆ°Â <code>CANCEL</code>ï¼‰ã€‚</p>
<p><strong>åœºæ™¯ Cï¼šACTION_MOVE ä½†æ— å­ View æ•è·</strong>ï¼šå³Â <code>mFirstTouchTarget == null</code>ï¼Œä¸”ä¸æ˜¯Â <code>DOWN</code>ã€‚ä»£ç è¿›å…¥Â <code>else</code>Â åˆ†æ”¯ï¼Œ<code>intercepted = true</code>ã€‚è¿™æ˜¯ä¸€ç§ä¼˜åŒ–ï¼šæ—¢ç„¶æ²¡æœ‰å­ View åœ¨å¤„ç†è¿™ä¸ªæ‰‹åŠ¿ï¼ˆæ„å‘³ç€ä¹‹å‰æ‰€æœ‰çš„å­ View åœ¨Â <code>DOWN</code>Â æ—¶éƒ½è¿”å›äº†Â <code>false</code>ï¼Œæˆ–è€…çˆ¶ View å·²ç»åœ¨Â <code>DOWN</code>Â æ—¶æ‹¦æˆªäº†ï¼‰ï¼Œé‚£ä¹ˆåç»­äº‹ä»¶æ¯«æ— ç–‘é—®åº”è¯¥ç”±çˆ¶ View è‡ªå·±å¤„ç†ï¼Œæ— éœ€å†è¯¢é—®æ˜¯å¦æ‹¦æˆªÂ ã€‚</p>
<p><code>onInterceptTouchEvent</code> ä¸­ä¸åº”è¿›è¡Œå¤æ‚çš„ä¸šåŠ¡é€»è¾‘ï¼Œå®é™…ä¸Šï¼Œè¯¥æ–¹æ³•åº”ä»…ç”¨äº<strong>çŠ¶æ€æ£€æµ‹</strong>ï¼ˆå¦‚ï¼šæ£€æµ‹æ»‘åŠ¨è·ç¦»æ˜¯å¦è¶…è¿‡Â <code>TouchSlop</code>ï¼‰ã€‚çœŸæ­£çš„ä¸šåŠ¡å¤„ç†ï¼ˆå¦‚æ»šåŠ¨è§†å›¾ï¼‰åº”åœ¨Â <code>onTouchEvent</code>Â ä¸­è¿›è¡Œ.</p>
<h4 data-id="heading-12">B. å¯»æ‰¾ç›®æ ‡å­ View (Targeting)</h4>
<p>å¦‚æœäº‹ä»¶æ²¡æœ‰è¢«å–æ¶ˆï¼Œä¹Ÿæ²¡æœ‰è¢«æ‹¦æˆªï¼Œä¸”æ˜¯ <code>DOWN</code> äº‹ä»¶ï¼ŒViewGroup å°±å¼€å§‹â€œæ‹›å‹Ÿâ€å¤„ç†è€…ï¼Œå‡†å¤‡å‘ä¸‹åˆ†å‘:</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ViewGroup.java</span>
<span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">dispatchTouchEvent</span><span class="hljs-params">(MotionEvent ev)</span> {
    <span class="hljs-comment">//...</span>
    <span class="hljs-keyword">if</span> (onFilterTouchEventForSecurity(ev)) {
        <span class="hljs-comment">// ...</span>
        
        <span class="hljs-comment">// [æµç¨‹è§£é‡Š] å¦‚æœäº‹ä»¶æœªå–æ¶ˆä¸”æœªæ‹¦æˆªï¼Œåˆ™å¼€å§‹åˆ†å‘ç»™å­ View</span>
        <span class="hljs-keyword">if</span> (!canceled &amp;&amp; !intercepted) {
            <span class="hljs-comment">// ...</span>
            <span class="hljs-keyword">if</span> (actionMasked == MotionEvent.ACTION_DOWN || ...) {
                <span class="hljs-comment">// 1. è·å–å­ View åˆ—è¡¨ï¼ˆæŒ‰ç…§ Z-order æ’åºï¼Œæœ€åç»˜åˆ¶çš„åœ¨æœ€ä¸Šé¢ï¼‰</span>
                <span class="hljs-keyword">final</span> ArrayList&lt;View&gt; preorderedList = buildTouchDispatchChildList();

                <span class="hljs-comment">// 2. å€’åºéå†ï¼ˆä»æœ€ä¸Šå±‚ View å¼€å§‹é—®ï¼‰</span>
                <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> childrenCount - <span class="hljs-number">1</span>; i &gt;= <span class="hljs-number">0</span>; i--) {
                    <span class="hljs-comment">// ... è·å– child ...</span>

                    <span class="hljs-comment">// 3. é—¨æ§›æ£€æŸ¥ï¼šView å¯è§ï¼ŸåŠ¨ç”»æ²¡æ’­æ”¾å®Œï¼Ÿç‚¹å‡»åæ ‡åœ¨ View å†…éƒ¨ï¼Ÿ</span>
                    <span class="hljs-keyword">if</span> (!child.canReceivePointerEvents()
                            || !isTransformedTouchPointInView(x, y, child, <span class="hljs-literal">null</span>)) {
                        <span class="hljs-keyword">continue</span>; <span class="hljs-comment">// ä¸æ»¡è¶³æ¡ä»¶ï¼Œæ‰¾ä¸‹ä¸€ä¸ª</span>
                    }

                    <span class="hljs-comment">// 4. å°è¯•åˆ†å‘ï¼(dispatchTransformedTouchEvent å†…éƒ¨è°ƒç”¨ child.dispatchTouchEvent)</span>
                    <span class="hljs-keyword">if</span> (dispatchTransformedTouchEvent(ev, <span class="hljs-literal">false</span>, child, idBitsToAssign)) {
                        <span class="hljs-comment">// 5. æ‰¾åˆ°äº†ï¼å­ View è¿”å›äº† true</span>

                        <span class="hljs-comment">// 6. ã€å…³é”®ã€‘è®°å½•è¿™ä¸ªå­ View åˆ° mFirstTouchTarget é“¾è¡¨ä¸­</span>
                        newTouchTarget = addTouchTarget(child, idBitsToAssign);
                        alreadyDispatchedToNewTouchTarget = <span class="hljs-literal">true</span>;
                        <span class="hljs-keyword">break</span>; <span class="hljs-comment">// æ‰¾åˆ°äº†å°±åœæ­¢éå†ï¼ä¼˜åŒ–æ€§èƒ½</span>
                    }
                }
            }
        }
    }
}
</code></pre>
<p>ä¸ºäº†ç¡®ä¿ç‚¹å‡»çš„æœ€ä¸Šå±‚ View èƒ½ä¼˜å…ˆæ¥æ”¶åˆ°äº‹ä»¶ï¼Œéœ€è¦é€šè¿‡ buildTouchDispatchChildList è·å–ä¸€ä¸ªæŒ‰ Z è½´æ’åºçš„å­ View åˆ—è¡¨ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ViewGroup.java</span>
<span class="hljs-keyword">public</span> ArrayList&lt;View&gt; <span class="hljs-title function_">buildTouchDispatchChildList</span><span class="hljs-params">()</span> {
    <span class="hljs-comment">// å®é™…è°ƒç”¨æ„å»ºæœ‰åºåˆ—è¡¨çš„æ–¹æ³•</span>
    <span class="hljs-keyword">return</span> buildOrderedChildList();
}

ArrayList&lt;View&gt; <span class="hljs-title function_">buildOrderedChildList</span><span class="hljs-params">()</span> {
    <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">childrenCount</span> <span class="hljs-operator">=</span> mChildrenCount;
    <span class="hljs-comment">// [ä¼˜åŒ–] å¦‚æœæ²¡æœ‰å­ View è®¾ç½® Z å€¼ï¼Œä¸éœ€è¦æ’åºï¼Œç›´æ¥è¿”å› null</span>
    <span class="hljs-keyword">if</span> (childrenCount &lt;= <span class="hljs-number">1</span> || !hasChildWithZ()) <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;

    <span class="hljs-comment">// [ä¼˜åŒ–] å¤ç”¨åˆ—è¡¨ï¼Œé¿å…å†…å­˜æŠ–åŠ¨</span>
    <span class="hljs-keyword">if</span> (mPreSortedChildren == <span class="hljs-literal">null</span>) {
        mPreSortedChildren = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;(childrenCount);
    } <span class="hljs-keyword">else</span> {
        mPreSortedChildren.clear();
    }

    <span class="hljs-comment">// ViewGroup çš„å­ View ç»˜åˆ¶é¡ºåºæ˜¯å¦æ˜¯è‡ªå®šä¹‰çš„</span>
    <span class="hljs-keyword">final</span> <span class="hljs-type">boolean</span> <span class="hljs-variable">customOrder</span> <span class="hljs-operator">=</span> isChildrenDrawingOrderEnabled();
    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; childrenCount; i++) {
        <span class="hljs-comment">// è·å–å­ View ç´¢å¼•ï¼ˆæ”¯æŒè‡ªå®šä¹‰ç»˜åˆ¶é¡ºåº getChildDrawingOrderï¼‰</span>
        <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">childIndex</span> <span class="hljs-operator">=</span> getAndVerifyPreorderedIndex(childrenCount, i, customOrder);
        <span class="hljs-comment">// è·å–åˆ°å­ View å¯¹è±¡</span>
        <span class="hljs-keyword">final</span> <span class="hljs-type">View</span> <span class="hljs-variable">nextChild</span> <span class="hljs-operator">=</span> mChildren[childIndex];
        <span class="hljs-comment">// è·å–å½“å‰å­ View çš„ Z å€¼ï¼ˆZ = elevation + translationZï¼‰</span>
        <span class="hljs-keyword">final</span> <span class="hljs-type">float</span> <span class="hljs-variable">currentZ</span> <span class="hljs-operator">=</span> nextChild.getZ();

        <span class="hljs-comment">// [æ­¥éª¤2] æ’å…¥æ’åº (Insertion Sort)</span>
        <span class="hljs-comment">// å¯»æ‰¾æ’å…¥ä½ç½®ï¼šä¿æŒåˆ—è¡¨æŒ‰ Z å€¼ä»å°åˆ°å¤§æ’åº</span>
        <span class="hljs-type">int</span> <span class="hljs-variable">insertIndex</span> <span class="hljs-operator">=</span> i;
        <span class="hljs-keyword">while</span> (insertIndex &gt; <span class="hljs-number">0</span> &amp;&amp; mPreSortedChildren.get(insertIndex - <span class="hljs-number">1</span>).getZ() &gt; currentZ) {
            insertIndex--;
        }
        <span class="hljs-comment">// å°†å½“å‰ View æ’å…¥åˆ°è®¡ç®—å‡ºçš„æœ€ç»ˆä½ç½®</span>
        mPreSortedChildren.add(insertIndex, nextChild);
    }
    <span class="hljs-keyword">return</span> mPreSortedChildren;
}
</code></pre>
<p>ç»§ç»­çœ‹ dispatchTouchEvent æ–¹æ³•ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ViewGroup.java</span>
<span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> childrenCount - <span class="hljs-number">1</span>; i &gt;= <span class="hljs-number">0</span>; i--) {
    <span class="hljs-comment">// [è·å– View] å¦‚æœæœ‰æ’åºåˆ—è¡¨ï¼Œä»åˆ—è¡¨ä¸­å–ï¼›å¦åˆ™ç›´æ¥å– mChildren æ•°ç»„</span>
    <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">childIndex</span> <span class="hljs-operator">=</span> getAndVerifyPreorderedIndex(childrenCount, i, customOrder);
    <span class="hljs-keyword">final</span> <span class="hljs-type">View</span> <span class="hljs-variable">child</span> <span class="hljs-operator">=</span> getAndVerifyPreorderedView(preorderedList, children, childIndex);

    <span class="hljs-comment">// [å‘½ä¸­æµ‹è¯•] 1. View å¯è§ 2. è§¦æ‘¸ç‚¹åœ¨ View èŒƒå›´å†…</span>
    <span class="hljs-keyword">if</span> (!child.canReceivePointerEvents()
            || !isTransformedTouchPointInView(x, y, child, <span class="hljs-literal">null</span>)) {
        <span class="hljs-keyword">continue</span>;
    }

    <span class="hljs-comment">// [åˆ†å‘] å°è¯•å°†äº‹ä»¶äº¤ç»™å­ View å¤„ç†</span>
    <span class="hljs-keyword">if</span> (dispatchTransformedTouchEvent(ev, <span class="hljs-literal">false</span>, child, idBitsToAssign)) {
        <span class="hljs-comment">// ... å­ View æ¶ˆè´¹äº†äº‹ä»¶ï¼Œè®°å½• Target å¹¶è·³å‡ºå¾ªç¯</span>
        newTouchTarget = addTouchTarget(child, idBitsToAssign); <span class="hljs-comment">// [å…³é”®] æ·»åŠ åˆ° TouchTarget é“¾è¡¨å¤´</span>
        alreadyDispatchedToNewTouchTarget = <span class="hljs-literal">true</span>; <span class="hljs-comment">// [æ ‡è®°] æ ‡è®°å·²åˆ†å‘</span>

        <span class="hljs-keyword">break</span>;
    }
}
</code></pre>
<h4 data-id="heading-13">C. åç»­åˆ†å‘</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// Case A: æ²¡äººå¤„ç† (mFirstTouchTarget ä¸ºç©º)</span>
<span class="hljs-keyword">if</span> (mFirstTouchTarget == <span class="hljs-literal">null</span>) {
    <span class="hljs-comment">// å¯èƒ½æ˜¯ä¹‹å‰æ‹¦æˆªäº†ï¼Œä¹Ÿå¯èƒ½æ˜¯æ‰€æœ‰å­ View éƒ½ä¸åœ¨ç‚¹å‡»èŒƒå›´å†…ï¼Œæˆ–è€…æ˜¯å­ View çš„ onTouchEvent éƒ½è¿”å›äº† falseã€‚</span>
    <span class="hljs-comment">// æ²¡æœ‰å­ View æ¶ˆè´¹äº‹ä»¶ (mFirstTouchTarget ä¸º null)</span>
    <span class="hljs-comment">// æ­¤æ—¶ ViewGroup è‡ªå·±å¤„ç†äº‹ä»¶ï¼Œè°ƒç”¨ dispatchTransformedTouchEvent æ—¶ child ä¼  null</span>
    <span class="hljs-comment">// å†…éƒ¨ä¼šè°ƒç”¨ super.dispatchTouchEvent(ev)ï¼Œå³ View.dispatchTouchEvent (è°ƒç”¨ onTouch/onTouchEvent)</span>
    handled = dispatchTransformedTouchEvent(ev, canceled, <span class="hljs-literal">null</span>, TouchTarget.ALL_POINTER_IDS);
} <span class="hljs-keyword">else</span> {<span class="hljs-comment">// Case B: æœ‰äººå¤„ç† (mFirstTouchTarget ä¸ä¸ºç©º)</span>
    <span class="hljs-type">TouchTarget</span> <span class="hljs-variable">target</span> <span class="hljs-operator">=</span> mFirstTouchTarget;
    <span class="hljs-keyword">while</span> (target != <span class="hljs-literal">null</span>) {
        <span class="hljs-keyword">final</span> <span class="hljs-type">TouchTarget</span> <span class="hljs-variable">next</span> <span class="hljs-operator">=</span> target.next;
        
        <span class="hljs-comment">// å¦‚æœæ˜¯åˆšæ‰åœ¨â€œç¬¬äºŒé˜¶æ®µâ€åˆšæ‰¾åˆ°çš„é‚£ä¸ª childï¼Œä¸”å·²ç»å‘è¿‡ DOWN äº†ï¼Œå°±åˆ«å‘äº†ï¼Œç›´æ¥æ ‡è®° handled = true</span>
        <span class="hljs-keyword">if</span> (alreadyDispatchedToNewTouchTarget &amp;&amp; target == newTouchTarget) {
            handled = <span class="hljs-literal">true</span>;
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-comment">// è¿™æ˜¯ä¸€ä¸ª MOVE æˆ– UP äº‹ä»¶ï¼Œæˆ–è€…æ˜¯å¤šç‚¹è§¦æ§çš„å…¶ä»–æ‰‹æŒ‡</span>
            <span class="hljs-comment">// ç›´æ¥æŠŠäº‹ä»¶åˆ†å‘ç»™ target.childï¼Œã€ä¸éœ€è¦ã€‘å†éå†å­ View æ ‘äº†ï¼</span>
            <span class="hljs-keyword">final</span> <span class="hljs-type">boolean</span> <span class="hljs-variable">cancelChild</span> <span class="hljs-operator">=</span> resetCancelNextUpFlag(target.child) || intercepted;
            
            <span class="hljs-keyword">if</span> (dispatchTransformedTouchEvent(ev, cancelChild, target.child, target.pointerIdBits)) {
                handled = <span class="hljs-literal">true</span>;
            }
            
            <span class="hljs-comment">// å¦‚æœçˆ¶å®¹å™¨æ­¤æ—¶çªç„¶æ‹¦æˆª (intercepted = true)ï¼ŒcancelChild ä¼šå˜ä¸º true</span>
            <span class="hljs-comment">// ä¸‹ä¸€æ¬¡å¾ªç¯ï¼Œé“¾è¡¨å°±ä¼šè¢«æ¸…ç†ï¼ŒmFirstTouchTarget å˜å› null</span>
        }
        target = next;
    }
}
</code></pre>
<ul>
<li><strong>O(1) çš„åˆ†å‘æ•ˆç‡</strong>ï¼šå¯¹äº <code>MOVE</code> å’Œ <code>UP</code>ï¼Œä»£ç ç›´æ¥è¿›å…¥ <code>else</code> å—ï¼Œç›´æ¥æ‹¿åˆ° <code>mFirstTouchTarget</code> è¿›è¡Œåˆ†å‘ï¼Œè·³è¿‡äº†å®½å¤§çš„ <code>for</code> å¾ªç¯éå†ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆ Android äº‹ä»¶åˆ†å‘æ•ˆç‡é«˜çš„åŸå› ã€‚</li>
</ul>
<h4 data-id="heading-14">D. æ”¶å°¾</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">if</span> (canceled
        || actionMasked == MotionEvent.ACTION_UP
        || actionMasked == MotionEvent.ACTION_HOVER_MOVE) {
    resetTouchState(); <span class="hljs-comment">// æ¸…é™¤ mFirstTouchTargetï¼Œé‡ç½®æ ‡è®°ä½</span>
}
</code></pre>
<p>å½“æ‰‹æŒ‡æŠ¬èµ·æˆ–äº‹ä»¶å–æ¶ˆæ—¶ï¼Œæ•´ä¸ªé“¾è·¯çŠ¶æ€æ¸…é›¶ï¼Œä¸ºä¸‹ä¸€æ¬¡ç‚¹å‡»åšå‡†å¤‡ã€‚</p>
<h3 data-id="heading-15">3.3 View çš„æ¶ˆè´¹é€»è¾‘</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">private</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">dispatchTransformedTouchEvent</span><span class="hljs-params">(MotionEvent event, <span class="hljs-type">boolean</span> cancel,
        View child, <span class="hljs-type">int</span> desiredPointerIdBits)</span> {
    <span class="hljs-keyword">final</span> <span class="hljs-type">boolean</span> handled;

    <span class="hljs-comment">// å¦‚æœæ˜¯å–æ¶ˆäº‹ä»¶ (cancel=true æˆ– ACTION_CANCEL)ï¼Œç›´æ¥åˆ†å‘å–æ¶ˆæ“ä½œï¼Œä¸éœ€è¦åæ ‡è½¬æ¢</span>
    <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">oldAction</span> <span class="hljs-operator">=</span> event.getAction();
    <span class="hljs-keyword">if</span> (cancel || oldAction == MotionEvent.ACTION_CANCEL) {
        event.setAction(MotionEvent.ACTION_CANCEL);
        <span class="hljs-keyword">if</span> (child == <span class="hljs-literal">null</span>) {
            <span class="hljs-comment">// [å…³é”®è°ƒç”¨] å¦‚æœæ²¡æœ‰ child (å³ ViewGroup è‡ªå·±å¤„ç†)ï¼Œè°ƒç”¨çˆ¶ç±»çš„ dispatchTouchEvent (View.dispatchTouchEvent)</span>
            handled = <span class="hljs-built_in">super</span>.dispatchTouchEvent(event);
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-comment">// [å…³é”®è°ƒç”¨] è°ƒç”¨å­ View çš„ dispatchTouchEvent</span>
            handled = child.dispatchTouchEvent(event);
        }
        event.setAction(oldAction); <span class="hljs-comment">// æ¢å¤ Action</span>
        <span class="hljs-keyword">return</span> handled;
    }

    <span class="hljs-comment">// Calculate the number of pointers to deliver.</span>
    <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">oldPointerIdBits</span> <span class="hljs-operator">=</span> event.getPointerIdBits();
    <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">newPointerIdBits</span> <span class="hljs-operator">=</span> oldPointerIdBits &amp; desiredPointerIdBits;

    <span class="hljs-comment">// If for some reason we ended up in an inconsistent state where it looks like we</span>
    <span class="hljs-comment">// might produce a motion event with no pointers in it, then drop the event.</span>
    <span class="hljs-keyword">if</span> (newPointerIdBits == <span class="hljs-number">0</span>) {
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }

    <span class="hljs-comment">// If the number of pointers is the same and we don't need to perform any fancy</span>
    <span class="hljs-comment">// irreversible transformations, then we can reuse the motion event for this</span>
    <span class="hljs-comment">// dispatch as long as we are careful to revert any changes we make.</span>
    <span class="hljs-comment">// Otherwise we need to make a copy.</span>
    <span class="hljs-comment">// [æºç ç»†èŠ‚] ä¼˜åŒ–ï¼šå¦‚æœ Pointer æ•°é‡æ²¡å˜ï¼Œå°½é‡é‡ç”¨ MotionEvent å¯¹è±¡ï¼Œé¿å…åˆ›å»ºæ–°å¯¹è±¡</span>
    <span class="hljs-keyword">final</span> MotionEvent transformedEvent;
    <span class="hljs-keyword">if</span> (newPointerIdBits == oldPointerIdBits) {
        <span class="hljs-keyword">if</span> (child == <span class="hljs-literal">null</span> || child.hasIdentityMatrix()) {
            <span class="hljs-keyword">if</span> (child == <span class="hljs-literal">null</span>) {
                handled = <span class="hljs-built_in">super</span>.dispatchTouchEvent(event); <span class="hljs-comment">// [å…³é”®] ViewGroup è‡ªå·±å¤„ç†</span>
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-keyword">final</span> <span class="hljs-type">float</span> <span class="hljs-variable">offsetX</span> <span class="hljs-operator">=</span> mScrollX - child.mLeft;
                <span class="hljs-keyword">final</span> <span class="hljs-type">float</span> <span class="hljs-variable">offsetY</span> <span class="hljs-operator">=</span> mScrollY - child.mTop;
                event.offsetLocation(offsetX, offsetY); <span class="hljs-comment">// [åæ ‡è½¬æ¢] è½¬æ¢åˆ°å­ View åæ ‡ç³»</span>

                handled = child.dispatchTouchEvent(event); <span class="hljs-comment">// [å…³é”®] åˆ†å‘ç»™å­ View</span>

                event.offsetLocation(-offsetX, -offsetY); <span class="hljs-comment">// [æ¢å¤] æ¢å¤åæ ‡</span>
            }
            <span class="hljs-keyword">return</span> handled;
        }
        transformedEvent = MotionEvent.obtain(event); <span class="hljs-comment">// éœ€è¦å˜æ¢çŸ©é˜µï¼Œå¤åˆ¶ä¸€ä»½äº‹ä»¶</span>
    } <span class="hljs-keyword">else</span> {
        transformedEvent = event.split(newPointerIdBits); <span class="hljs-comment">// éœ€è¦æ‹†åˆ† Pointerï¼Œå¤åˆ¶ä¸€ä»½äº‹ä»¶</span>
    }

    <span class="hljs-comment">// Perform any necessary transformations and dispatch.</span>
    <span class="hljs-keyword">if</span> (child == <span class="hljs-literal">null</span>) {
        handled = <span class="hljs-built_in">super</span>.dispatchTouchEvent(transformedEvent);
    } <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">final</span> <span class="hljs-type">float</span> <span class="hljs-variable">offsetX</span> <span class="hljs-operator">=</span> mScrollX - child.mLeft;
        <span class="hljs-keyword">final</span> <span class="hljs-type">float</span> <span class="hljs-variable">offsetY</span> <span class="hljs-operator">=</span> mScrollY - child.mTop;
        transformedEvent.offsetLocation(offsetX, offsetY);
        <span class="hljs-keyword">if</span> (! child.hasIdentityMatrix()) {
            transformedEvent.transform(child.getInverseMatrix()); <span class="hljs-comment">// åº”ç”¨çŸ©é˜µå˜æ¢</span>
        }

        handled = child.dispatchTouchEvent(transformedEvent); <span class="hljs-comment">// [å…³é”®] åˆ†å‘ç»™å­ View</span>
    }

    <span class="hljs-comment">// Done.</span>
    transformedEvent.recycle(); <span class="hljs-comment">// å›æ”¶ä¸´æ—¶äº‹ä»¶</span>
    <span class="hljs-keyword">return</span> handled;
}
</code></pre>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">dispatchTouchEvent</span><span class="hljs-params">(MotionEvent event)</span> {
    <span class="hljs-comment">// If the event should be handled by accessibility focus first.</span>
    <span class="hljs-keyword">if</span> (event.isTargetAccessibilityFocus()) {
        <span class="hljs-comment">// We don't have focus or no virtual descendant has it, do not handle the event.</span>
        <span class="hljs-keyword">if</span> (!isAccessibilityFocusedViewOrHost()) {
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        }
        <span class="hljs-comment">// We have focus and got the event, then use normal event dispatch.</span>
        event.setTargetAccessibilityFocus(<span class="hljs-literal">false</span>);
    }
    <span class="hljs-type">boolean</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> <span class="hljs-literal">false</span>;

    <span class="hljs-keyword">if</span> (mInputEventConsistencyVerifier != <span class="hljs-literal">null</span>) {
        mInputEventConsistencyVerifier.onTouchEvent(event, <span class="hljs-number">0</span>);
    }

    <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">actionMasked</span> <span class="hljs-operator">=</span> event.getActionMasked();
    <span class="hljs-keyword">if</span> (actionMasked == MotionEvent.ACTION_DOWN) {
        <span class="hljs-comment">// Defensive cleanup for new gesture</span>
        stopNestedScroll();
    }

    <span class="hljs-comment">// &lt;p&gt;</span>
    <span class="hljs-comment">// [æµç¨‹è§£é‡Š] View çš„äº‹ä»¶åˆ†å‘é€»è¾‘</span>
    <span class="hljs-comment">// 1. ä¼˜å…ˆè°ƒç”¨ OnTouchListener (å¦‚æœè®¾ç½®äº†ä¸” View æ˜¯ Enabled çš„)</span>
    <span class="hljs-comment">// 2. å¦‚æœ OnTouchListener è¿”å› falseï¼Œå†è°ƒç”¨ onTouchEvent</span>
    <span class="hljs-keyword">if</span> (onFilterTouchEventForSecurity(event)) {
        <span class="hljs-keyword">if</span> ((mViewFlags &amp; ENABLED_MASK) == ENABLED &amp;&amp; handleScrollBarDragging(event)) {
            result = <span class="hljs-literal">true</span>;
        }
        <span class="hljs-comment">//noinspection SimplifiableIfStatement</span>
        <span class="hljs-type">ListenerInfo</span> <span class="hljs-variable">li</span> <span class="hljs-operator">=</span> mListenerInfo;
        <span class="hljs-keyword">if</span> (li != <span class="hljs-literal">null</span> &amp;&amp; li.mOnTouchListener != <span class="hljs-literal">null</span>
                &amp;&amp; (mViewFlags &amp; ENABLED_MASK) == ENABLED
                &amp;&amp; li.mOnTouchListener.onTouch(<span class="hljs-built_in">this</span>, event)) {
            result = <span class="hljs-literal">true</span>;
        }

        <span class="hljs-keyword">if</span> (!result &amp;&amp; onTouchEvent(event)) {
            result = <span class="hljs-literal">true</span>;
        }
    }

    <span class="hljs-keyword">if</span> (!result &amp;&amp; mInputEventConsistencyVerifier != <span class="hljs-literal">null</span>) {
        mInputEventConsistencyVerifier.onUnhandledEvent(event, <span class="hljs-number">0</span>);
    }

    <span class="hljs-comment">// Clean up after nested scrolls if this is the end of a gesture;</span>
    <span class="hljs-comment">// also cancel it if we tried an ACTION_DOWN but we didn't want the rest</span>
    <span class="hljs-comment">// of the gesture.</span>
    <span class="hljs-keyword">if</span> (actionMasked == MotionEvent.ACTION_UP ||
            actionMasked == MotionEvent.ACTION_CANCEL ||
            (actionMasked == MotionEvent.ACTION_DOWN &amp;&amp; !result)) {
        stopNestedScroll();
    }

    <span class="hljs-keyword">return</span> result;
}
</code></pre>
<p>å…ˆåˆ¤æ–­ OnTouchListener.onTouch()ï¼Œè‹¥è¿”å› true åˆ™æ¶ˆè´¹äº‹ä»¶ï¼Œç»“æŸåˆ†å‘ï¼›è‹¥è¿”å› falseï¼Œåˆ™è°ƒç”¨ onTouchEvent()ã€‚</p>
<p>onTouchEvent: æ ¸å¿ƒäº‹ä»¶å¤„ç† (ç‚¹å‡»ã€é•¿æŒ‰ç­‰ï¼‰ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">onTouchEvent</span><span class="hljs-params">(MotionEvent event)</span> {
    <span class="hljs-comment">// [é¢è¯•é«˜é¢‘è€ƒç‚¹] CLICKABLE å±æ€§å¯¹äº‹ä»¶æ¶ˆè´¹çš„å½±å“</span>
    <span class="hljs-comment">// åªè¦ View æ˜¯ CLICKABLEã€LONG_CLICKABLE æˆ– CONTEXT_CLICKABLE çš„ï¼Œ</span>
    <span class="hljs-comment">// onTouchEvent å°±ä¼šè¿”å› trueï¼Œè¡¨ç¤ºæ¶ˆè´¹äº†äº‹ä»¶ï¼Œæ— è®ºæ˜¯å¦å®é™…æ‰§è¡Œäº†ç‚¹å‡»é€»è¾‘</span>
    <span class="hljs-comment">// [æºç ç»†èŠ‚] å“ªæ€• View æ˜¯ DISABLED (ä¸å¯ç”¨) çŠ¶æ€ï¼Œåªè¦å®ƒæ˜¯ CLICKABLE çš„ï¼Œå®ƒä¾ç„¶ä¼šæ¶ˆè´¹äº‹ä»¶(è¿”å› true)ï¼Œåªæ˜¯ä¸å“åº”åŠ¨ä½œã€‚</span>
    <span class="hljs-keyword">final</span> <span class="hljs-type">boolean</span> <span class="hljs-variable">clickable</span> <span class="hljs-operator">=</span> ((viewFlags &amp; CLICKABLE) == CLICKABLE ...)

    <span class="hljs-comment">// ...</span>

    <span class="hljs-comment">// ACTION_UP: å¤„ç†ç‚¹å‡»äº‹ä»¶</span>
    <span class="hljs-keyword">case</span> MotionEvent.ACTION_UP:
         <span class="hljs-comment">// ...</span>
         <span class="hljs-comment">// [æºç ç»†èŠ‚] æ‰§è¡Œç‚¹å‡»å›è°ƒ</span>
         <span class="hljs-comment">// performClick() ä¼šè°ƒç”¨ OnClickListener.onClick()</span>
         <span class="hljs-comment">// è¿™æ˜¯ä¸€ä¸ª Post æ“ä½œï¼Œä¿è¯äº† UI çŠ¶æ€æ›´æ–°ä¼˜å…ˆäºç‚¹å‡»å›è°ƒ</span>
         <span class="hljs-comment">// [é¢è¯•é«˜é¢‘è€ƒç‚¹] onClick æ˜¯åœ¨å“ªé‡Œè°ƒç”¨çš„ï¼Ÿ</span>
         <span class="hljs-comment">// ç­”ï¼šåœ¨ onTouchEvent çš„ ACTION_UP ä¸­ï¼Œä¸”æ²¡æœ‰è§¦å‘é•¿æŒ‰ï¼Œä¸”å¤„äºæŒ‰ä¸‹çŠ¶æ€æ—¶è°ƒç”¨ã€‚</span>
         performClickInternal();

    <span class="hljs-comment">// ACTION_DOWN: å¤„ç†æŒ‰ä¸‹åé¦ˆå’Œé•¿æŒ‰æ£€æµ‹</span>
    <span class="hljs-keyword">case</span> MotionEvent.ACTION_DOWN:
         <span class="hljs-comment">// [æºç ç»†èŠ‚] å»¶è¿Ÿåé¦ˆ (Scrolling Container)</span>
         <span class="hljs-comment">// å¦‚æœ View åœ¨æ»šåŠ¨å®¹å™¨ä¸­ (å¦‚ ListView/ScrollView)ï¼ŒACTION_DOWN ä¸ä¼šç«‹å³æ˜¾ç¤ºæŒ‰ä¸‹çŠ¶æ€ (Pressed)ï¼Œ</span>
         <span class="hljs-comment">// è€Œæ˜¯ä¼šå»¶è¿Ÿä¸€æ®µæ—¶é—´ (TapTimeout)ã€‚è¿™æ˜¯ä¸ºäº†åŒºåˆ†ç”¨æˆ·æ˜¯æƒ³ç‚¹å‡»è¿˜æ˜¯æƒ³æ»‘åŠ¨ã€‚</span>
         <span class="hljs-comment">// å¦‚æœåœ¨ TapTimeout å†…å‘ç”Ÿäº†æ»‘åŠ¨ (ACTION_MOVE)ï¼Œåˆ™å–æ¶ˆç‚¹å‡»åˆ¤å®šã€‚</span>
         <span class="hljs-keyword">if</span> (isInScrollingContainer) {
             <span class="hljs-comment">// ...</span>
         } <span class="hljs-keyword">else</span> {
             setPressed(<span class="hljs-literal">true</span>, x, y);
             <span class="hljs-comment">// [æºç ç»†èŠ‚] æ£€æŸ¥é•¿æŒ‰</span>
             <span class="hljs-comment">// å‘é€ä¸€ä¸ªå»¶è¿Ÿæ¶ˆæ¯ï¼Œå¦‚æœåœ¨ LongPressTimeout æ—¶é—´å†…æ²¡æœ‰ UP æˆ– CANCELï¼Œåˆ™è§¦å‘ onLongClick</span>
             checkForLongClick(...)
         }

    <span class="hljs-comment">// ACTION_MOVE: å¤„ç†ç§»å‡º View</span>
    <span class="hljs-keyword">case</span> MotionEvent.ACTION_MOVE:
         <span class="hljs-keyword">if</span> (!pointInView(x, y, touchSlop)) {
             <span class="hljs-comment">// [æºç ç»†èŠ‚] å¦‚æœæ‰‹æŒ‡ç§»å‡ºäº† View çš„èŒƒå›´ (åŠ ä¸Š touchSlop å®¹å·®)</span>
             <span class="hljs-comment">// åˆ™å–æ¶ˆç‚¹å‡»å’Œé•¿æŒ‰æ£€æµ‹ï¼Œå¹¶å°† Pressed çŠ¶æ€ç½®ä¸º false</span>
             removeTapCallback();
             removeLongPressCallback();
             <span class="hljs-comment">// ...</span>
         }
</code></pre>
<p><code>onClick</code> æ˜¯åœ¨ <code>onTouchEvent</code> çš„ <code>ACTION_UP</code> ä¸­è¢«è§¦å‘çš„ã€‚</p>
<ol>
<li><strong>ä¼˜å…ˆçº§</strong>ï¼š<code>OnTouchListener.onTouch</code> &gt; <code>onTouchEvent</code> &gt; <code>OnClickListener.onClick</code>ã€‚</li>
<li><strong>PerformClick</strong>ï¼šåœ¨ <code>ACTION_UP</code> ä¸­ï¼Œå¦‚æœæ˜¯éé•¿æŒ‰ä¸”åœ¨ View åŒºåŸŸå†…ï¼Œä¼šè°ƒç”¨ <code>performClick()</code>ï¼Œè¿›è€Œå›è°ƒ <code>onClick</code>ã€‚</li>
<li><strong>Clickable çš„å½±å“</strong>ï¼šåªè¦ View æ˜¯ <code>CLICKABLE</code> æˆ– <code>LONG_CLICKABLE</code> çš„ï¼ˆButton é»˜è®¤ä¸º trueï¼ŒImageView é»˜è®¤ä¸º falseï¼‰ï¼Œ<code>onTouchEvent</code> å°±ä¼šè¿”å› <code>true</code>ï¼Œè¡¨ç¤ºæ¶ˆè´¹äº‹ä»¶ã€‚</li>
</ol>
<p>Android å°†è§¦æ§å›è°ƒæ‹†åˆ†ä¸º <strong>OnTouchListener / onTouchEvent / OnClickListener</strong>ï¼Œæœ¬è´¨æ˜¯å¯¹ <strong>â€œäº‹ä»¶æ‹¦æˆªâ€ / â€œäº‹ä»¶å¤„ç†â€ / â€œè¯­ä¹‰å›è°ƒâ€</strong> çš„åˆ†å±‚è§£è€¦è®¾è®¡ï¼š</p>
<ul>
<li><strong>onTouchListener</strong>ï¼šå¤–éƒ¨å¯æ’æ‹”çš„æ‹¦æˆªå±‚</li>
<li><strong>onTouchEvent</strong>ï¼šView å†…éƒ¨çš„è§¦æ§çŠ¶æ€æœº</li>
<li><strong>onClick</strong>ï¼šé«˜å±‚è¯­ä¹‰ç»“æœå›è°ƒ</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[SPI åªæ˜¯ä¸ªæ¥å£ï¼Ÿæ­ç§˜èŠ¯ç‰‡é—´çš„é«˜é€Ÿé€šé“ï¼]]></title>    <link>https://juejin.cn/post/7588092534162128896</link>    <guid>https://juejin.cn/post/7588092534162128896</guid>    <pubDate>2025-12-27T16:28:38.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588092534162128896" data-draft-id="7588004601393938466" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="SPI åªæ˜¯ä¸ªæ¥å£ï¼Ÿæ­ç§˜èŠ¯ç‰‡é—´çš„é«˜é€Ÿé€šé“ï¼"/> <meta itemprop="keywords" content="åµŒå…¥å¼,ç‰©è”ç½‘"/> <meta itemprop="datePublished" content="2025-12-27T16:28:38.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è¿·äººçš„æ˜Ÿç©º"/> <meta itemprop="url" content="https://juejin.cn/user/977890073916588"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            SPI åªæ˜¯ä¸ªæ¥å£ï¼Ÿæ­ç§˜èŠ¯ç‰‡é—´çš„é«˜é€Ÿé€šé“ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/977890073916588/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è¿·äººçš„æ˜Ÿç©º
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-27T16:28:38.000Z" title="Sat Dec 27 2025 16:28:38 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    6
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0"><strong>ä¸€ã€æ ¸å¿ƒå®šä¹‰</strong></h2>
<p><strong>SPI</strong>Â æ˜¯ä¸€ç§ç¡¬ä»¶å±‚é¢çš„<strong>åŒæ­¥ã€å…¨åŒå·¥ã€ä¸»ä»å¼</strong>ä¸²è¡Œé€šä¿¡åè®®ã€‚æƒ³è±¡ä¸€ä¸ªé«˜é€Ÿå…¬è·¯ç³»ç»Ÿï¼š</p>
<ul>
<li><strong>äº¤è­¦ä¸­å¿ƒï¼ˆMasterï¼‰</strong> ï¼šç³»ç»Ÿå”¯ä¸€çš„æŒ‡æŒ¥è€…ï¼Œå†³å®šä½•æ—¶å‘è½¦ã€é“è·¯é™é€Ÿï¼ˆæ—¶é’Ÿé¢‘ç‡ï¼‰ã€‚</li>
<li><strong>è´§è¿ä»“åº“ï¼ˆSlavesï¼‰</strong> ï¼šå¤šä¸ªç­‰å¾…æœåŠ¡çš„èŠ‚ç‚¹ï¼Œæ²¡æœ‰äº¤è­¦ç‚¹åï¼Œä¸èƒ½ä¸»åŠ¨å‘è½¦ã€‚</li>
<li><strong>ä¸“ç”¨è½¦é“ï¼ˆæ€»çº¿ï¼‰</strong> ï¼šè¿™æ˜¯ä¸€æ¡é“ºè®¾äº†<strong>åŒå‘åŒæ­¥è½¦é“</strong>çš„é«˜é€Ÿå…¬è·¯ã€‚è½¦è¾†ï¼ˆæ•°æ®ï¼‰åœ¨ç²¾å‡†çš„ç»¿ç¯ä¿¡å·ï¼ˆæ—¶é’Ÿï¼‰æŒ‡æŒ¥ä¸‹ï¼Œ<strong>åŒæ—¶åœ¨ä¸¤ä¸ªæ–¹å‘ä¸Šé«˜é€Ÿå¯¹å¼€</strong>ï¼Œæ•ˆç‡æé«˜ã€‚</li>
</ul>
<h2 data-id="heading-1"><strong>äºŒã€å·¥ä½œæœºåˆ¶</strong></h2>
<p>è¿™æ¡â€œé«˜é€Ÿå…¬è·¯â€æœ€å°‘ç”±4æ¡ä¸“ç”¨è½¦é“ï¼ˆä¿¡å·çº¿ï¼‰æ„æˆï¼Œè¿™æ˜¯ç†è§£å…¶æ‰€æœ‰ç‰¹æ€§çš„åŸºç¡€ï¼š</p>
<ul>
<li>
<p><strong>SCLKï¼ˆæ—¶é’Ÿçº¿ï¼‰- åŒæ­¥çº¢ç»¿ç¯</strong></p>
<ul>
<li>ç”±<strong>äº¤è­¦ä¸­å¿ƒï¼ˆä¸»è®¾å¤‡ï¼‰ç‹¬å®¶æ§åˆ¶</strong>ï¼Œäº§ç”Ÿå›ºå®šèŠ‚å¥çš„æ–¹æ³¢ã€‚æ¯ä¸€ä¸ªè„‰å†²ï¼Œéƒ½å‘½ä»¤æ‰€æœ‰è½¦è¾†åŒæ­¥å‰è¿›ä¸€ä½ã€‚</li>
</ul>
</li>
<li>
<p><strong>MOSIä¸MISOï¼ˆæ•°æ®çº¿ï¼‰- åŒå‘è½¦é“</strong></p>
<ul>
<li><strong>MOSI</strong>ï¼š<strong>ä¸»è®¾å¤‡è¾“å‡ºï¼Œä»è®¾å¤‡è¾“å…¥</strong>ã€‚ç›¸å½“äºäº¤è­¦ä¸­å¿ƒå‘ä»“åº“å‘é€æŒ‡ä»¤çš„<strong>ä¸‹è¡Œè½¦é“</strong>ã€‚</li>
<li><strong>MISO</strong>ï¼š<strong>ä¸»è®¾å¤‡è¾“å…¥ï¼Œä»è®¾å¤‡è¾“å‡º</strong>ã€‚ç›¸å½“äºä»“åº“å‘äº¤è­¦ä¸­å¿ƒæ±‡æŠ¥çŠ¶æ€çš„<strong>ä¸Šè¡Œè½¦é“</strong>ã€‚</li>
<li><strong>å…³é”®</strong>ï¼šæ•°æ®åœ¨<strong>æ¯ä¸ªæ—¶é’Ÿå‘¨æœŸå†…åŒæ—¶ã€åŒå‘ä¼ è¾“</strong>ï¼Œè¿™æ˜¯â€œå…¨åŒå·¥â€çš„æ ¸å¿ƒï¼Œä¹Ÿæ˜¯å…¶é«˜é€Ÿçš„åŸå› ã€‚</li>
</ul>
</li>
<li>
<p><strong>CSï¼ˆç‰‡é€‰çº¿ï¼‰- ä»“åº“ç‚¹åå¹¿æ’­</strong></p>
<ul>
<li>è¿™æ˜¯<strong>é€‰æ‹©ä¸è°é€šä¿¡</strong>çš„å…³é”®ã€‚æ¯ä¸ªä»“åº“ï¼ˆä»è®¾å¤‡ï¼‰éƒ½æœ‰è‡ªå·±ç‹¬ç«‹çš„â€œç‚¹åå¹¿æ’­â€ã€‚</li>
<li>äº¤è­¦ä¸­å¿ƒé€šè¿‡<strong>æ‹‰ä½</strong>ï¼ˆæ¿€æ´»ï¼‰æŸä¸ªä»“åº“çš„å¹¿æ’­ï¼Œé€šçŸ¥å®ƒï¼šâ€œæ¥ä¸‹æ¥å’Œä½ å¯¹è¯â€ã€‚åŒä¸€æ—¶é—´<strong>åªèƒ½æ¿€æ´»ä¸€ä¸ªä»“åº“</strong>ã€‚</li>
</ul>
</li>
</ul>
<p><strong>ä¸€ä¸ªå®Œæ•´é€šä¿¡æµç¨‹ï¼š</strong></p>
<ol>
<li><strong>ç‚¹å</strong>ï¼šäº¤è­¦ä¸­å¿ƒæ‹‰ä½ä»“åº“Açš„<code>CS</code>çº¿ã€‚</li>
<li><strong>åŒæ­¥å‘è½¦</strong>ï¼šäº¤è­¦ä¸­å¿ƒå¼€å¯çº¢ç»¿ç¯(<code>SCLK</code>)ï¼Œå¹¶ç¬¬ä¸€ä¸ªæ—¶é’Ÿè¾¹æ²¿ï¼Œé€šè¿‡<code>MOSI</code>çº¿å‘å‡ºä¸€ä½æŒ‡ä»¤ï¼›åŒæ—¶ï¼Œä»“åº“Aä¹Ÿå¿…é¡»ç«‹å³åœ¨<code>MISO</code>çº¿ä¸Šå‡†å¤‡å¥½ä¸€ä½çŠ¶æ€æ•°æ®ã€‚</li>
<li><strong>å¹¶è¡Œäº¤æ¢</strong>ï¼šåœ¨éšåçš„æ¯ä¸ªæ—¶é’Ÿè¾¹æ²¿ï¼ŒåŒæ–¹éƒ½åŒæ­¥åœ°äº¤æ¢ä¸‹ä¸€ä½æ•°æ®ï¼Œå¦‚åŒåŒå‘è½¦é“ä¸Šå¯¹å‘è¡Œé©¶çš„è½¦æµã€‚</li>
<li><strong>ç»“æŸ</strong>ï¼šé€šä¿¡å®Œæ¯•ï¼Œäº¤è­¦ä¸­å¿ƒæ‹‰é«˜<code>CS</code>çº¿ï¼Œä»“åº“Aé€€å‡ºå¯¹è¯ã€‚</li>
</ol>
<p><strong>æŠ€æœ¯æ·±åŒ–ï¼šæ—¶é’Ÿæ¨¡å¼ï¼ˆCPOLä¸CPHAï¼‰</strong></p>
<p>è¿™æ˜¯åè®®åŒ¹é…çš„<strong>ç”Ÿæ­»çº¿</strong>ã€‚å®ƒå®šä¹‰äº†â€œçº¢ç»¿ç¯â€å…·ä½“çš„é—ªçƒè§„åˆ™ï¼š</p>
<ul>
<li><strong>CPOLï¼ˆæ—¶é’Ÿææ€§ï¼‰</strong> ï¼šçº¢ç»¿ç¯<strong>åˆå§‹æ˜¯äº®ï¼ˆé«˜ç”µå¹³ï¼‰è¿˜æ˜¯ç­ï¼ˆä½ç”µå¹³ï¼‰</strong> ï¼Ÿ</li>
<li><strong>CPHAï¼ˆæ—¶é’Ÿç›¸ä½ï¼‰</strong> ï¼šåœ¨çº¢ç»¿ç¯<strong>ç”±ç­å˜äº®ï¼ˆä¸Šå‡æ²¿ï¼‰è¿˜æ˜¯ç”±äº®å˜ç­ï¼ˆä¸‹é™æ²¿ï¼‰</strong>Â çš„æ—¶åˆ»é‡‡æ ·æ•°æ®ï¼Ÿ</li>
<li>è¿™ä¸¤è€…çš„4ç§ç»„åˆï¼ˆæ¨¡å¼0-3ï¼‰ï¼Œä¸»ä»è®¾å¤‡<strong>å¿…é¡»ç»å¯¹ä¸€è‡´</strong>ï¼Œå¦åˆ™æ•°æ®ä¼šå…¨éƒ¨é”™ä¹±ã€‚<strong>æ¨¡å¼0ï¼ˆCPOL=0ï¼Œ CPHA=0ï¼‰</strong>Â æœ€ä¸ºå¸¸ç”¨ã€‚</li>
</ul>
<h2 data-id="heading-2"><strong>ä¸‰ã€å±€é™æ€§â€</strong></h2>
<p>SPIçš„è®¾è®¡å“²å­¦æ˜¯â€œç”¨ç®€å•æ¢é€Ÿåº¦â€ï¼Œè¿™å¸¦æ¥äº†ä¸€ç³»åˆ—å›ºæœ‰å±€é™ï¼š</p>
<ol>
<li><strong>æ— åº”ç­”æœºåˆ¶ï¼ˆç›²å‘ï¼‰</strong> ï¼šäº¤è­¦åªç®¡å‘è½¦ï¼Œä¸ç¡®è®¤ä»“åº“æ˜¯å¦æ”¶åˆ°ã€æ˜¯å¦æ»¡ä»“ã€‚å¿…é¡»ä¾é <strong>è½¯ä»¶å±‚é¢çš„é¢å¤–åè®®</strong>ï¼ˆå¦‚è¯»å–çŠ¶æ€å¯„å­˜å™¨ï¼‰æ¥ç¡®è®¤ã€‚</li>
<li><strong>å¼•è„šå ç”¨å¤šï¼ˆæˆæœ¬é«˜ï¼‰</strong> ï¼šæ¯å¤šè¿æ¥ä¸€ä¸ªä»“åº“ï¼Œå°±éœ€è¦æ–°å¢ä¸€æ ¹<code>CS</code>çº¿ã€‚è¿æ¥å¤§é‡è®¾å¤‡æ—¶ï¼Œä¼šè¿…é€Ÿè€—å°½ä¸»è®¾å¤‡çš„å¼•è„šèµ„æºã€‚</li>
<li><strong>é€šä¿¡è·ç¦»çŸ­ï¼ˆæœ¬åœ°ç½‘ï¼‰</strong> ï¼šç”±äºé‡‡ç”¨å•ç«¯ä¿¡å·ï¼Œæ˜“å—å¹²æ‰°ï¼Œé€šå¸¸ä»…é€‚ç”¨äº<strong>PCBæ¿çº§æˆ–æœºç®±å†…ï¼ˆ&lt;1ç±³ï¼‰</strong>Â çš„é«˜é€Ÿé€šä¿¡ã€‚</li>
<li><strong>ä»è®¾å¤‡å®æ—¶æ€§å‹åŠ›å¤§</strong>ï¼šä¸»è®¾å¤‡æ—¶é’Ÿä¸€å“ï¼Œä»è®¾å¤‡å¿…é¡»ç«‹åˆ»åœ¨<code>MISO</code>ä¸Šå‡†å¤‡å¥½æ•°æ®ï¼Œæ²¡æœ‰ä»»ä½•ç¼“å†²ä½™åœ°ã€‚å½“ä¸»è®¾å¤‡æ—¶é’Ÿæå¿«æ—¶ï¼Œå¯¹ä»è®¾å¤‡çš„ç¡¬ä»¶æ€§èƒ½æ˜¯å·¨å¤§è€ƒéªŒã€‚</li>
<li><strong>ç¼ºä¹å¤šä¸»èƒ½åŠ›</strong>ï¼šé«˜é€Ÿå…¬è·¯ä¸Šåªèƒ½æœ‰ä¸€ä¸ªäº¤è­¦ä¸­å¿ƒï¼Œæ— æ³•æ„å»ºå¤šä¸ªæŒ‡æŒ¥ä¸­å¿ƒååŒå·¥ä½œçš„å¤æ‚ç½‘ç»œã€‚</li>
</ol>
<h2 data-id="heading-3"><strong>å››ã€å·¥ç¨‹è¾¹ç•Œä¸é€‰å‹å†³ç­–</strong></h2>
<p>ç†è§£äº†å±€é™æ€§ï¼Œå°±åˆ’å®šäº†å®ƒçš„<strong>å·¥ç¨‹åº”ç”¨è¾¹ç•Œ</strong>ï¼Œå¹¶çŸ¥é“ä½•æ—¶è¯¥é€‰æ‹©å®ƒã€‚</p>
<ul>
<li><strong>æ ¸å¿ƒè¾¹ç•Œæ¡ä»¶</strong>
<ul>
<li><strong>é€Ÿç‡ä¸è·ç¦»æˆåæ¯”</strong>ï¼šè¿½æ±‚&gt;50Mbpsçš„é«˜é€Ÿç‡æ—¶ï¼Œé€šä¿¡è·ç¦»åº”æ§åˆ¶åœ¨å˜ç±³çº§ï¼Œå¹¶éœ€ä¸¥æ ¼è€ƒè™‘<strong>ä¿¡å·å®Œæ•´æ€§</strong>ï¼ˆå¦‚é˜»æŠ—åŒ¹é…ã€å‡å°‘è¿‡å­”ï¼‰ã€‚</li>
<li><strong>æ¨¡å¼å¿…é¡»ä¸¥æ ¼åŒ¹é…</strong>ï¼šä¸»ä»è®¾å¤‡å¿…é¡»åœ¨CPOLå’ŒCPHAä¸Š<strong>å®Œå…¨ä¸€è‡´</strong>ã€‚</li>
<li><strong>ä¸»è®¾å¤‡è´Ÿæ‹…å…¨éƒ¨æ§åˆ¶</strong>ï¼šæ‰€æœ‰é€šä¿¡çš„å‘èµ·ã€èŠ‚å¥ã€ç»ˆæ­¢å‡ç”±ä¸»è®¾å¤‡è´Ÿè´£ã€‚</li>
</ul>
</li>
<li><strong>æ¨ªå‘åè®®é€‰å‹å¯¹æ¯”</strong></li>
</ul>
<p>ä½•æ—¶ç”¨SPIï¼Ÿä¸I2Cã€UARTå¯¹æ¯”ä¸€ç›®äº†ç„¶ï¼š</p>















































<table><thead><tr><th>ç‰¹æ€§ç»´åº¦</th><th><strong>SPIï¼ˆé«˜é€Ÿå…¬è·¯ï¼‰</strong></th><th><strong>I2Cï¼ˆåŸå¸‚å…¬äº¤ï¼‰</strong></th><th><strong>UARTï¼ˆç›´æ‹¨ç”µè¯ï¼‰</strong></th></tr></thead><tbody><tr><td><strong>æ ¸å¿ƒç‰¹ç‚¹</strong></td><td><strong>åŒæ­¥ï¼Œå…¨åŒå·¥ï¼Œæé«˜é€Ÿ</strong></td><td>åŒæ­¥ï¼ŒåŠåŒå·¥ï¼Œå¤šè®¾å¤‡ï¼Œçœå¼•è„š</td><td>å¼‚æ­¥ï¼Œå…¨åŒå·¥ï¼Œç®€å•ï¼Œè¿œè·ç¦»</td></tr><tr><td><strong>å…¸å‹é€Ÿåº¦</strong></td><td><strong>10 Mbps - 100+ Mbps</strong></td><td>100 kbps - 3.4 Mbps</td><td>9600 bps - 10 Mbps</td></tr><tr><td><strong>å¼•è„šéœ€æ±‚</strong></td><td>3+<code>N</code>Â (<code>N</code>=ä»æœºæ•°)</td><td><strong>2çº¿ï¼ˆå§‹ç»ˆï¼‰</strong></td><td>2çº¿ (+2æµæ§)</td></tr><tr><td><strong>å¯»å€æ–¹å¼</strong></td><td>ç¡¬ä»¶ç‰‡é€‰(<code>CS</code>)çº¿</td><td><strong>7/10ä½è½¯ä»¶åœ°å€</strong></td><td>æ— åœ°å€ï¼ˆç‚¹å¯¹ç‚¹ï¼‰</td></tr><tr><td><strong>å¤šä¸»æ”¯æŒ</strong></td><td>å›°éš¾</td><td><strong>æ”¯æŒ</strong></td><td>ä¸æ”¯æŒ</td></tr><tr><td><strong>æœ€ä½³åœºæ™¯</strong></td><td>é«˜é€ŸFlashã€å±å¹•ã€ADC</td><td>ä¼ æ„Ÿå™¨ç½‘ç»œã€ä½é€ŸEEPROM</td><td>è°ƒè¯•æ—¥å¿—ã€æ¨¡å—é€ä¼ ã€é•¿è·ç¦»é€šä¿¡</td></tr></tbody></table>
<p><strong>é€‰å‹å£è¯€</strong>ï¼š</p>
<ul>
<li><strong>è¦é€Ÿåº¦ã€ä¸å·®å¼•è„šã€ä¸€å¯¹ä¸€æˆ–å°‘é‡è®¾å¤‡</strong>Â -&gt;Â <strong>é€‰SPI</strong>ã€‚</li>
<li><strong>è®¾å¤‡å¤šã€å¼•è„šçœã€é€Ÿåº¦è¦æ±‚ä¸é«˜</strong>Â -&gt;Â <strong>é€‰I2C</strong>ã€‚</li>
<li><strong>è·ç¦»è¿œã€ç®€å•å¯é ã€ç‚¹å¯¹ç‚¹è°ƒè¯•</strong>Â -&gt;Â <strong>é€‰UART</strong>ã€‚</li>
</ul>
<h2 data-id="heading-4"><strong>äº”ã€åº”ç”¨åœºæ™¯ä¸é«˜çº§è¿›åŒ–</strong></h2>
<ul>
<li>
<p><strong>ç»å…¸åº”ç”¨åœºæ™¯ï¼ˆä¼ ç»Ÿé«˜é€Ÿè·¯ï¼‰</strong></p>
<ul>
<li><strong>å­˜å‚¨å™¨</strong>ï¼šNOR Flashã€EEPROMçš„å¿«é€Ÿè¯»å†™ã€‚</li>
<li><strong>ä¼ æ„Ÿå™¨</strong>ï¼šé«˜é‡‡æ ·ç‡çš„IMUï¼ˆæƒ¯æ€§æµ‹é‡å•å…ƒï¼‰ã€å‹åŠ›ä¼ æ„Ÿå™¨ã€‚</li>
<li><strong>æ˜¾ç¤ºæ¥å£</strong>ï¼šOLEDã€TFTå±å¹•çš„åˆå§‹åŒ–ä¸æ˜¾å­˜åˆ·æ–°ã€‚</li>
<li><strong>æ¨¡æ•°è½¬æ¢</strong>ï¼šé«˜é€Ÿã€é«˜ç²¾åº¦ADC/DACçš„æ•°æ®è¯»å–ä¸é…ç½®ã€‚</li>
<li><strong>å¤„ç†å™¨é—´é€šä¿¡</strong>ï¼šMCUä¸FPGAã€DSPä¹‹é—´çš„æ•°æ®æµé€šé“ã€‚</li>
</ul>
</li>
<li>
<p><strong>åè®®çš„é«˜çº§è¿›åŒ–ï¼ˆæ™ºèƒ½ç«‹ä½“äº¤é€šï¼‰</strong></p>
</li>
</ul>
<p>ä¸ºçªç ´å±€é™ï¼ŒSPIå·²è¡ç”Ÿå‡ºæ›´å¼ºå¤§çš„ç‰ˆæœ¬ï¼š</p>
<ol>
<li><strong>QSPI/OSPI</strong>ï¼šå°†æ•°æ®è½¦é“ä»1æ¡æ‰©å®½è‡³<strong>4æ¡(QPI)æˆ–8æ¡(OPI)</strong> ï¼Œå®ç°â€œè½¦é˜Ÿå¹¶è¡Œâ€ï¼Œååé‡é£™å‡ã€‚å¹¿æ³›ç”¨äº<strong>å¤–æŒ‚Flashæ‰§è¡Œä»£ç (XIP)</strong> ã€‚</li>
<li><strong>åŒå€æ•°æ®é€Ÿç‡(DDR)</strong> ï¼šåœ¨çº¢ç»¿ç¯<strong>äº®èµ·å’Œç†„ç­çš„ç¬é—´éƒ½ä¼ è¾“æ•°æ®</strong>ï¼Œå°†ç†è®ºå¸¦å®½å†ç¿»ä¸€å€ã€‚</li>
<li><strong>å·®åˆ†SPI</strong>ï¼šä½¿ç”¨æŠ—å¹²æ‰°çš„<strong>å·®åˆ†ä¿¡å·å¯¹</strong>ï¼ˆå¦‚D+/D-ï¼‰ä¼ è¾“ï¼Œé€‚ç”¨äºé«˜é€Ÿé•¿è·æˆ–æ¶åŠ£ç”µç£ç¯å¢ƒã€‚</li>
</ol>
<h2 data-id="heading-5"><strong>å…­ã€ç³»ç»Ÿçº§å·¥ç¨‹è€ƒé‡</strong></h2>
<p>åœ¨å®é™…å¤æ‚ç³»ç»Ÿä¸­ï¼Œä½¿ç”¨SPIå¿…é¡»æ€è€ƒä»¥ä¸‹é—®é¢˜ï¼š</p>
<ol>
<li><strong>ç³»ç»ŸéªŒè¯</strong>ï¼šå¦‚ä½•ç¡®ä¿SPIæ§åˆ¶å™¨åœ¨æç«¯æ—¶åºã€æ•°æ®å†²çªä¸‹ä¾ç„¶å¯é ï¼Ÿéœ€é‡‡ç”¨<strong>UVMç­‰é«˜çº§éªŒè¯æ–¹æ³•å­¦</strong>ã€‚</li>
<li><strong>åŠŸè€—ç®¡ç†</strong>ï¼šé«˜é€Ÿæ—¶é’Ÿå¸¸å¼€åŠŸè€—å¤§ï¼Œéœ€ä½¿ç”¨<strong>æ—¶é’Ÿé—¨æ§</strong>æŠ€æœ¯åœ¨ç©ºé—²æ—¶å…³é—­æ—¶é’Ÿã€‚</li>
<li><strong>è½¯ä»¶ä¼˜åŒ–</strong>ï¼šåœ¨Linuxç­‰ç³»ç»Ÿä¸­ï¼Œå¯é€šè¿‡<strong>é¢„ç¼–è¯‘SPIæ¶ˆæ¯</strong>ã€ä½¿ç”¨DMAï¼ˆç›´æ¥å†…å­˜è®¿é—®ï¼‰æ¥è§£æ”¾CPUï¼Œå‡å°‘ä¼ è¾“å»¶è¿Ÿã€‚</li>
</ol>
<h2 data-id="heading-6"><strong>æ€»ç»“</strong></h2>
<p>ä½ å¯ä»¥å°†SPIè§†ä¸ºä¸€ä¸ªÂ <strong>â€œé«˜æ•ˆä½†è‹›åˆ»çš„çŸ­è·‘å¥å°†â€</strong>Â ï¼š</p>
<ul>
<li><strong>å®ƒæ˜¯ä»€ä¹ˆ</strong>ï¼šä¸€ä¸ªè¿½æ±‚<strong>æé€ŸåŒæ­¥å¹¶è¡Œ</strong>çš„èŠ¯ç‰‡çº§é€šä¿¡åè®®ã€‚</li>
<li><strong>å¦‚ä½•å·¥ä½œ</strong>ï¼šåœ¨<strong>å”¯ä¸€ä¸»æ§</strong>å‘å‡ºçš„ç²¾å‡†æ—¶é’Ÿä¸‹ï¼Œé€šè¿‡<strong>ç‚¹åï¼ˆCSï¼‰</strong>Â ä¸é€‰å®šä»æœºè¿›è¡Œ<strong>åŒå‘å®æ—¶ï¼ˆå…¨åŒå·¥ï¼‰</strong>Â æ•°æ®äº¤æ¢ã€‚</li>
<li><strong>å…¶å±€é™æ€§</strong>ï¼š<strong>æ— ç¡®è®¤ã€è´¹å¼•è„šã€è·ç¦»çŸ­ã€æ¨¡å¼éœ€ä¸¥é…</strong>ï¼Œæœ¬è´¨æ˜¯<strong>ç”¨ç¡¬ä»¶å¤æ‚åº¦å’Œæ§åˆ¶æƒæ¢å–é€Ÿåº¦</strong>ã€‚</li>
<li><strong>åº”ç”¨è¾¹ç•Œ</strong>ï¼šå®ƒæ˜¯<strong>æ¿çº§é«˜é€Ÿæ•°æ®æµçš„ç‹è€…</strong>ï¼Œä½†ä¸é€‚åˆæ„å»ºå¤æ‚çš„å¤šèŠ‚ç‚¹ç½‘ç»œæˆ–é•¿è·ç¦»é€šä¿¡ã€‚</li>
<li><strong>å·¥ç¨‹é€‰æ‹©</strong>ï¼šåœ¨é€Ÿåº¦è‡³ä¸Šçš„åœºæ™¯ï¼ˆå¦‚é©±åŠ¨å±å¹•ã€è¯»å–é«˜é€Ÿä¼ æ„Ÿå™¨ï¼‰ä¸­å®ƒæ˜¯é¦–é€‰ï¼Œä½†å¿…é¡»ä¸ºå…¶â€œä¼ºå€™â€å¥½ç¡¬ä»¶æ—¶åºå’Œä¿¡å·å®Œæ•´æ€§ã€‚</li>
</ul>
<p>ä»¥ä¸Šæ˜¯ä¸ªäººçš„ä¸€äº›æµ…è§ï¼Œå¦‚æœ‰ä¸å½“ä¹‹å¤„ï¼Œæ¬¢è¿æ‰¹è¯„æŒ‡æ­£ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Python å·¥å…·ç”Ÿæ€æ·±åº¦è§£æï¼šä» Pyright åˆ° Astral å®¶æ—]]></title>    <link>https://juejin.cn/post/7588092534162161664</link>    <guid>https://juejin.cn/post/7588092534162161664</guid>    <pubDate>2025-12-27T16:35:52.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588092534162161664" data-draft-id="7588093282530558004" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Python å·¥å…·ç”Ÿæ€æ·±åº¦è§£æï¼šä» Pyright åˆ° Astral å®¶æ—"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-27T16:35:52.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="moyueheng"/> <meta itemprop="url" content="https://juejin.cn/user/251106837149720"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Python å·¥å…·ç”Ÿæ€æ·±åº¦è§£æï¼šä» Pyright åˆ° Astral å®¶æ—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/251106837149720/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    moyueheng
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-27T16:35:52.000Z" title="Sat Dec 27 2025 16:35:52 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    7
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Python å·¥å…·ç”Ÿæ€æ·±åº¦è§£æï¼šä» Pyright åˆ° Astral å®¶æ—</h2>
<h3 data-id="heading-1">å‰è¨€</h3>
<p>Python å·¥å…·ç”Ÿæ€æ­£åœ¨ç»å†ä¸€åœºå‰æ‰€æœªæœ‰çš„å˜é©ã€‚è¿‘å¹´æ¥ï¼Œæˆ‘ä»¬è§è¯äº†å¤šä¸ªé«˜æ•ˆå·¥å…·çš„æ¶Œç°ï¼šRuff ä»¥ Rust ä¹‹å§¿å¸­å· Lint é¢†åŸŸï¼Œuv é‡å†™äº†åŒ…ç®¡ç†çš„æ¸¸æˆè§„åˆ™ï¼Œty åˆ™æ­£å‡†å¤‡é©æ–°ç±»å‹æ£€æŸ¥ã€‚é¢å¯¹è¿™ä¹ˆå¤šå·¥å…·ï¼Œå¼€å‘è€…éš¾å…ä¼šäº§ç”Ÿå›°æƒ‘ï¼š</p>
<blockquote>
<p>è¿™äº›å·¥å…·çš„å®šä½æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿæˆ‘è¯¥é€‰æ‹©å“ªä¸€ä¸ªï¼Ÿå®ƒä»¬ä¸ä¼šé‡å¤å—ï¼Ÿ</p>
</blockquote>
<p>æœ¬æ–‡å°†æ·±å…¥è§£æå½“å‰ä¸»æµçš„ Python å·¥å…·ï¼Œå¸®åŠ©ä½ å»ºç«‹æ¸…æ™°çš„è®¤çŸ¥æ¡†æ¶ï¼Œå¹¶åšå‡ºæ˜æ™ºçš„é€‰æ‹©ã€‚</p>
<hr/>
<h3 data-id="heading-2">ä¸€ã€æ ¸å¿ƒæ¦‚å¿µï¼šå››ä¸ªå®¹æ˜“æ··æ·†çš„åŸºç¡€æ¦‚å¿µ</h3>
<p>åœ¨æ·±å…¥å„ä¸ªå·¥å…·ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å…ˆå˜æ¸…å››ä¸ªç»å¸¸è¢«æ··æ·†çš„æ¦‚å¿µã€‚ç†è§£å®ƒä»¬çš„åŒºåˆ«æ˜¯é€‰æ‹©åˆé€‚å·¥å…·çš„åŸºç¡€ã€‚</p>
<h4 data-id="heading-3">1.1 æ¦‚å¿µå¯¹æ¯”æ€»è§ˆ</h4>
<pre><code class="hljs language-arduino" lang="arduino">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                  â”‚
â”‚  ç±»å‹æ£€æŸ¥  â”€â”€â†’  è¿™æ®µä»£ç çš„<span class="hljs-string">"ç±»å‹"</span>å¯¹å—ï¼Ÿ                             â”‚
â”‚                ä¾‹å¦‚: å­—ç¬¦ä¸²èƒ½åŠ æ•°å­—å—ï¼Ÿ                            â”‚
â”‚                                                                  â”‚
â”‚  Linting    â”€â”€â†’  è¿™æ®µä»£ç çš„<span class="hljs-string">"å†™æ³•"</span>å¥½å—ï¼Ÿ                            â”‚
â”‚                ä¾‹å¦‚: å˜é‡åè§„èŒƒå—ï¼Ÿæœ‰æœªä½¿ç”¨çš„ä»£ç å—ï¼Ÿ                 â”‚
â”‚                                                                  â”‚
â”‚  æ ¼å¼åŒ–     â”€â”€â†’  è¿™æ®µä»£ç çš„<span class="hljs-string">"æ ·å­"</span>å¥½çœ‹å—ï¼Ÿ                           â”‚
â”‚                ä¾‹å¦‚: ç¼©è¿›ã€ç©ºæ ¼ã€æ¢è¡Œç»Ÿä¸€å—ï¼Ÿ                        â”‚
â”‚                                                                  â”‚
â”‚  LSP        â”€â”€â†’  ç¼–è¾‘å™¨å¦‚ä½•å’Œè¿™äº›å·¥å…·<span class="hljs-string">"å¯¹è¯"</span>ï¼Ÿ                        â”‚
â”‚                å®ƒæ˜¯é€šä¿¡åè®®ï¼Œä¸æ˜¯å·¥å…·æœ¬èº«                           â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h4 data-id="heading-4">1.2 ç±»å‹æ£€æŸ¥ (Type Checking)</h4>
<p><strong>é—®é¢˜</strong>ï¼šè¿™æ®µä»£ç çš„ç±»å‹æ˜¯å¦æ­£ç¡®ï¼Ÿ</p>
<p>ç±»å‹æ£€æŸ¥å™¨é€šè¿‡é™æ€åˆ†æä»£ç ä¸­çš„ç±»å‹æ³¨è§£ï¼Œåœ¨è¿è¡Œå‰å‘ç°ç±»å‹é”™è¯¯ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># ç±»å‹æ£€æŸ¥å™¨ä¼šå‘ç°çš„é—®é¢˜</span>

<span class="hljs-keyword">def</span> <span class="hljs-title function_">add</span>(<span class="hljs-params">a: <span class="hljs-built_in">int</span>, b: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-built_in">int</span>:
    <span class="hljs-keyword">return</span> a + b

<span class="hljs-comment"># âœ… æ­£ç¡®</span>
result = add(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>)

<span class="hljs-comment"># âŒ ç±»å‹é”™è¯¯ï¼å­—ç¬¦ä¸²ä¸èƒ½ä¼ ç»™ int å‚æ•°</span>
result = add(<span class="hljs-string">"hello"</span>, <span class="hljs-string">"world"</span>)

<span class="hljs-comment"># âŒ è¿”å›ç±»å‹ä¸åŒ¹é…</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">greet</span>(<span class="hljs-params">name: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in">int</span>:
    <span class="hljs-keyword">return</span> <span class="hljs-string">f"Hello, <span class="hljs-subst">{name}</span>"</span>  <span class="hljs-comment"># åº”è¯¥è¿”å› intï¼Œä½†è¿”å›äº† str</span>
</code></pre>
<p><strong>ä»£è¡¨å·¥å…·</strong>ï¼šmypy, pyright, ty, pyre</p>
<h4 data-id="heading-5">1.3 Linting (ä»£ç æ£€æŸ¥)</h4>
<p><strong>é—®é¢˜</strong>ï¼šè¿™æ®µä»£ç çš„å†™æ³•ç¬¦åˆæœ€ä½³å®è·µå—ï¼Ÿ</p>
<p>Linter å…³æ³¨ä»£ç è´¨é‡ã€æ½œåœ¨bugã€ä»£ç é£æ ¼ç­‰é—®é¢˜ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># Linter ä¼šå‘ç°çš„é—®é¢˜</span>

<span class="hljs-keyword">import</span> os
<span class="hljs-keyword">import</span> sys
<span class="hljs-keyword">import</span> json  <span class="hljs-comment"># âŒ æœªä½¿ç”¨çš„å¯¼å…¥</span>

<span class="hljs-keyword">def</span> <span class="hljs-title function_">calculate</span>(<span class="hljs-params">x, y</span>):
    result = x + y
    <span class="hljs-keyword">return</span> result

<span class="hljs-comment"># âŒ å˜é‡åå¤ªçŸ­ï¼Œä¸å…·æè¿°æ€§</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">calc</span>(<span class="hljs-params">a, b</span>):
    <span class="hljs-keyword">return</span> a / b  <span class="hljs-comment"># âŒ æ²¡æœ‰å¤„ç†é™¤é›¶é£é™©</span>

<span class="hljs-comment"># âŒ å‡½æ•°ååº”è¯¥ç”¨ snake_case</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">DoSomething</span>():
    <span class="hljs-keyword">pass</span>
</code></pre>
<p><strong>ä»£è¡¨å·¥å…·</strong>ï¼šruff, pylint, flake8, ESLint (JavaScript)</p>
<h4 data-id="heading-6">1.4 æ ¼å¼åŒ– (Formatting)</h4>
<p><strong>é—®é¢˜</strong>ï¼šè¿™æ®µä»£ç çš„æ ·å¼ç»Ÿä¸€å—ï¼Ÿ</p>
<p>æ ¼å¼åŒ–å™¨åªè°ƒæ•´ä»£ç çš„è§†è§‰å‘ˆç°ï¼Œä¸æ”¹å˜ä»£ç é€»è¾‘ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># æ ¼å¼åŒ–å‰ï¼ˆæ··ä¹±ï¼‰</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">calculate</span>(<span class="hljs-params">x,y</span>):
    result=x+y
    <span class="hljs-keyword">return</span> result
<span class="hljs-keyword">if</span> <span class="hljs-literal">True</span>:
<span class="hljs-built_in">print</span>(<span class="hljs-string">"hello"</span>)

<span class="hljs-comment"># æ ¼å¼åŒ–åï¼ˆç»Ÿä¸€ï¼‰</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">calculate</span>(<span class="hljs-params">x, y</span>):
    result = x + y
    <span class="hljs-keyword">return</span> result

<span class="hljs-keyword">if</span> <span class="hljs-literal">True</span>:
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"hello"</span>)
</code></pre>
<p>æ ¼å¼åŒ–å™¨å¤„ç†çš„å…ƒç´ ï¼š</p>
<ul>
<li>ç¼©è¿›ï¼ˆç©ºæ ¼ vs tabï¼‰</li>
<li>ç©ºæ ¼æ•°é‡</li>
<li>æ¢è¡Œä½ç½®</li>
<li>å¼•å·é£æ ¼ï¼ˆå•å¼•å· vs åŒå¼•å·ï¼‰</li>
</ul>
<p><strong>ä»£è¡¨å·¥å…·</strong>ï¼šruff, black, prettier (JavaScript), biome (JavaScript)</p>
<h4 data-id="heading-7">1.5 LSP (Language Server Protocol)</h4>
<p><strong>é—®é¢˜</strong>ï¼šç¼–è¾‘å™¨å¦‚ä½•å’Œè¿™äº›å·¥å…·é€šä¿¡ï¼Ÿ</p>
<p>LSP æ˜¯å¾®è½¯æ¨å‡ºçš„å¼€æ”¾åè®®ï¼Œç”¨äºæ ‡å‡†åŒ–ç¼–è¾‘å™¨ä¸è¯­è¨€æœåŠ¡ä¹‹é—´çš„é€šä¿¡ã€‚</p>
<pre><code class="hljs language-arduino" lang="arduino">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      LSP æ¶æ„                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”      LSP åè®®      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚    â”‚ ç¼–è¾‘å™¨   â”‚ â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’  â”‚  Language <span class="hljs-built_in">Server</span>    â”‚  â”‚
â”‚    â”‚ VSCode  â”‚   JSON-RPC <span class="hljs-number">2.0</span>    â”‚                     â”‚  â”‚
â”‚    â”‚ Neovim  â”‚                    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤â”‚  â”‚
â”‚    â”‚ Emacs   â”‚                    â”‚  â”‚ Type Checker   â”‚â”‚  â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤â”‚  â”‚
â”‚                                    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤â”‚  â”‚
â”‚                                    â”‚  â”‚ Linter         â”‚â”‚  â”‚
â”‚                                    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤â”‚  â”‚
â”‚                                    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤â”‚  â”‚
â”‚                                    â”‚  â”‚ Formatter      â”‚â”‚  â”‚
â”‚                                    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚  â”‚
â”‚                                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<p><strong>LSP æä¾›çš„åŠŸèƒ½</strong>ï¼š</p>
<ul>
<li>ä»£ç è¡¥å…¨</li>
<li>è·³è½¬åˆ°å®šä¹‰</li>
<li>æ‚¬åœæç¤º</li>
<li>è¯Šæ–­ä¿¡æ¯ï¼ˆé”™è¯¯/è­¦å‘Šï¼‰</li>
<li>ä»£ç åŠ¨ä½œ</li>
<li>é‡å‘½å</li>
</ul>
<h4 data-id="heading-8">1.6 å¯¹æ¯”ç¤ºä¾‹</h4>
<p>çœ‹è¿™æ®µä»£ç ï¼Œä¸åŒå·¥å…·ä¼šå…³æ³¨ä»€ä¹ˆï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> os
<span class="hljs-keyword">def</span> <span class="hljs-title function_">add</span>(<span class="hljs-params">a:<span class="hljs-built_in">int</span>,b:<span class="hljs-built_in">int</span></span>)-&gt;<span class="hljs-built_in">int</span>:
    <span class="hljs-keyword">return</span> a+b
<span class="hljs-built_in">print</span>(add(<span class="hljs-number">1</span>,<span class="hljs-number">2</span>))
</code></pre>

























<table><thead><tr><th>å·¥å…·ç±»å‹</th><th>ä¼šè¯´ä»€ä¹ˆ</th></tr></thead><tbody><tr><td><strong>ç±»å‹æ£€æŸ¥å™¨</strong></td><td>ç±»å‹æ­£ç¡® âœ“</td></tr><tr><td><strong>Linter</strong></td><td><code>import os</code> æœªä½¿ç”¨ï¼Œå»ºè®®åˆ é™¤ï¼›å‚æ•°é—´åº”è¯¥æœ‰ç©ºæ ¼</td></tr><tr><td><strong>æ ¼å¼åŒ–å™¨</strong></td><td>åº”è¯¥æ”¹æˆ <code>a: int, b: int</code>ï¼ˆåŠ ç©ºæ ¼ï¼‰</td></tr><tr><td><strong>LSP</strong></td><td>æŠŠæ‰€æœ‰è¿™äº›ä¿¡æ¯ä¼ ç»™ç¼–è¾‘å™¨æ˜¾ç¤º</td></tr></tbody></table>
<h4 data-id="heading-9">1.7 æ¦‚å¿µæ€»ç»“è¡¨</h4>



































<table><thead><tr><th>æ¦‚å¿µ</th><th>å…³æ³¨ç‚¹</th><th>æ”¹å˜ä»£ç é€»è¾‘ï¼Ÿ</th><th>æ ¸å¿ƒé—®é¢˜</th></tr></thead><tbody><tr><td><strong>ç±»å‹æ£€æŸ¥</strong></td><td>ç±»å‹æ­£ç¡®æ€§</td><td>âŒ</td><td>"è¿™æ®µä»£ç èƒ½è¿è¡Œå—ï¼Ÿ"</td></tr><tr><td><strong>Linting</strong></td><td>ä»£ç è´¨é‡</td><td>âŒï¼ˆå¤šæ•°ï¼‰</td><td>"è¿™æ®µä»£ç å†™å¾—å¥½å—ï¼Ÿ"</td></tr><tr><td><strong>æ ¼å¼åŒ–</strong></td><td>ä»£ç æ ·å¼</td><td>âŒ</td><td>"è¿™æ®µä»£ç å¥½çœ‹å—ï¼Ÿ"</td></tr><tr><td><strong>LSP</strong></td><td>é€šä¿¡åè®®</td><td>-</td><td>"ç¼–è¾‘å™¨æ€ä¹ˆè°ƒç”¨è¿™äº›å·¥å…·ï¼Ÿ"</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-10">äºŒã€ä¸»æµå·¥å…·æ·±åº¦è§£æ</h3>
<h4 data-id="heading-11">2.1 å·¥å…·å®šä½æ€»è§ˆ</h4>















































<table><thead><tr><th>å·¥å…·</th><th>ä¸»è¦å®šä½</th><th>ç¼–ç¨‹è¯­è¨€</th><th>LSP æ”¯æŒ</th><th>æˆç†Ÿåº¦</th></tr></thead><tbody><tr><td><strong>pyright</strong></td><td>é™æ€ç±»å‹æ£€æŸ¥å™¨</td><td>TypeScript</td><td>é€šè¿‡ Pylance</td><td>æˆç†Ÿ</td></tr><tr><td><strong>basedpyright</strong></td><td>pyright çš„å¢å¼º fork</td><td>TypeScript</td><td>å†…ç½®</td><td>è¾ƒæˆç†Ÿ</td></tr><tr><td><strong>ruff</strong></td><td>Linter + ä»£ç æ ¼å¼åŒ–</td><td>Rust</td><td>âœ… åŸç”Ÿ</td><td>æˆç†Ÿ</td></tr><tr><td><strong>ty</strong></td><td>é™æ€ç±»å‹æ£€æŸ¥å™¨ + LSP</td><td>Rust</td><td>âœ… å†…ç½®</td><td>æ—©æœŸå¼€å‘</td></tr><tr><td><strong>python-lsp-server</strong></td><td>è¯­è¨€æœåŠ¡å™¨åè®®å®ç°</td><td>Python</td><td>âœ…</td><td>æˆç†Ÿ</td></tr></tbody></table>
<hr/>
<h4 data-id="heading-12">2.2 microsoft/pyright</h4>
<p><strong>å®šä½</strong>ï¼šé™æ€ç±»å‹æ£€æŸ¥å™¨</p>
<p><strong>è¯­è¨€</strong>ï¼šTypeScript ç¼–å†™</p>
<p><strong>æ ¸å¿ƒç‰¹ç‚¹</strong>ï¼š</p>
<ul>
<li>å¾®è½¯å®˜æ–¹å‡ºå“ï¼Œæ€§èƒ½ä¼˜å¼‚ï¼ˆæ¯” mypy å¿« 5 å€ä»¥ä¸Šï¼‰</li>
<li>æ ‡å‡†å…¼å®¹ï¼Œé€‚ç”¨äºå¤§å‹ Python ä»£ç åº“</li>
<li>ä¸¥è°¨çš„ç±»å‹æ¨æ–­å’Œç±»å‹çª„åŒ–èƒ½åŠ›</li>
<li>VSCode ä¸­é€šè¿‡ Pylance æä¾› LSP åŠŸèƒ½</li>
</ul>
<p><strong>é€‚ç”¨åœºæ™¯</strong>ï¼š</p>
<ul>
<li>ä½¿ç”¨ VSCode è¿›è¡Œå¼€å‘</li>
<li>éœ€è¦ç¨³å®šå¯é çš„ç±»å‹æ£€æŸ¥</li>
<li>å¤§å‹é¡¹ç›®ä»£ç åº“</li>
</ul>
<hr/>
<h4 data-id="heading-13">2.3 DetachHead/basedpyright</h4>
<p><strong>å®šä½</strong>ï¼špyright çš„å¢å¼ºåˆ†æ”¯</p>
<p><strong>æ ¸å¿ƒç‰¹ç‚¹</strong>ï¼š</p>
<ul>
<li>åœ¨ pyright åŸºç¡€ä¸Šå¢åŠ äº†å¤šç§ç±»å‹æ£€æŸ¥æ”¹è¿›</li>
<li><strong>é›†æˆäº† Pylance çš„ä¸“æœ‰ç‰¹æ€§</strong>ï¼ˆå¼€æºå®ç°ï¼‰</li>
<li>æ”¯æŒ <strong>inlay hints</strong>ï¼ˆå†…è”æç¤ºï¼‰å’Œ <strong>semantic tokens</strong></li>
<li>é»˜è®¤ä½¿ç”¨æ›´ä¸¥æ ¼çš„æ£€æŸ¥æ¨¡å¼ï¼ˆ"all" æ¨¡å¼ï¼‰</li>
<li>æ”¹è¿›äº† VSCode é›†æˆæ”¯æŒ</li>
</ul>
<p><strong>ä¸ pyright çš„å…³é”®åŒºåˆ«</strong>ï¼š</p>



































<table><thead><tr><th>ç‰¹æ€§</th><th>pyright</th><th>basedpyright</th></tr></thead><tbody><tr><td>Inlay Hints</td><td>âŒ</td><td>âœ…</td></tr><tr><td>Semantic Tokens</td><td>âŒ</td><td>âœ…</td></tr><tr><td>é»˜è®¤æ£€æŸ¥æ¨¡å¼</td><td>standard</td><td>allï¼ˆæ›´ä¸¥æ ¼ï¼‰</td></tr><tr><td>å¼€æºç¨‹åº¦</td><td>å®Œå…¨å¼€æº</td><td>å®Œå…¨å¼€æº</td></tr><tr><td>ç¼–è¾‘å™¨æ”¯æŒ</td><td>VSCode ä¼˜å…ˆ</td><td>å¤šç¼–è¾‘å™¨å‹å¥½</td></tr></tbody></table>
<p><strong>é€‚ç”¨åœºæ™¯</strong>ï¼š</p>
<ul>
<li>ä½¿ç”¨ Neovimã€Emacs ç­‰é VSCode ç¼–è¾‘å™¨</li>
<li>éœ€è¦æ›´ä¸¥æ ¼çš„ç±»å‹æ£€æŸ¥</li>
<li>éœ€è¦ Pylance åŠŸèƒ½ä½†ä¸æƒ³è¢« VSCode ç»‘å®š</li>
</ul>
<hr/>
<h4 data-id="heading-14">2.4 astral-sh/ruff</h4>
<p><strong>å®šä½</strong>ï¼š<strong>Linter + ä»£ç æ ¼å¼åŒ–å·¥å…·</strong>ï¼ˆä¸æ˜¯ç±»å‹æ£€æŸ¥å™¨ï¼ï¼‰</p>
<p><strong>è¯­è¨€</strong>ï¼šRust ç¼–å†™</p>
<p><strong>æ ¸å¿ƒç‰¹ç‚¹</strong>ï¼š</p>
<ul>
<li><strong>æå¿«çš„é€Ÿåº¦</strong>ï¼ˆæ¯”ä¼ ç»Ÿå·¥å…·å¿«æ•°åå€ï¼‰</li>
<li>ä¸€ä¸ªå·¥å…·æ›¿ä»£å¤šä¸ªï¼šFlake8, isort, black, pydocstyle, pyupgrade ç­‰</li>
<li>ä¸ä»…èƒ½æ£€æµ‹é—®é¢˜ï¼Œè¿˜èƒ½è¿›è¡Œä»£ç è½¬æ¢</li>
<li>å†…ç½®åŸç”Ÿ LSP æœåŠ¡å™¨ï¼ˆ<code>ruff server</code>ï¼‰</li>
</ul>
<p><strong>LSP æ”¯æŒæ¼”å˜</strong>ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ruff-lsp (æ—§ç‰ˆï¼Œå·²å¼ƒç”¨)                                 â”‚
â”‚  â””â”€â”€ Python å®ç°çš„ç‹¬ç«‹ LSP æœåŠ¡å™¨                        â”‚
â”‚                                                         â”‚
â”‚  ruff server (æ–°ç‰ˆï¼Œå½“å‰)                                â”‚
â”‚  â””â”€â”€ Rust å®ç°çš„åŸç”Ÿ LSP æœåŠ¡å™¨ï¼Œå†…ç½®åœ¨ ruff ä¸­          â”‚
â”‚      å‘½ä»¤: ruff server                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<p><strong>é‡è¦è¯´æ˜</strong>ï¼šruff <strong>ä¸è¿›è¡Œç±»å‹æ£€æŸ¥</strong>ï¼Œä½†å¯æ£€æµ‹éƒ¨åˆ†ç±»å‹ç›¸å…³é—®é¢˜ã€‚</p>
<p><strong>é€‚ç”¨åœºæ™¯</strong>ï¼š</p>
<ul>
<li>éœ€è¦å¿«é€Ÿçš„ Lint å’Œæ ¼å¼åŒ–</li>
<li>æƒ³ç»Ÿä¸€å·¥å…·é“¾ï¼Œå‡å°‘ä¾èµ–</li>
<li>ä»»ä½•è§„æ¨¡çš„ Python é¡¹ç›®</li>
</ul>
<hr/>
<h4 data-id="heading-15">2.5 astral-sh/ty</h4>
<p><strong>å®šä½</strong>ï¼šé™æ€ç±»å‹æ£€æŸ¥å™¨ + LSP</p>
<p><strong>è¯­è¨€</strong>ï¼šRust ç¼–å†™</p>
<p><strong>çŠ¶æ€</strong>ï¼š<strong>æ—©æœŸå¼€å‘é˜¶æ®µï¼ˆpre-releaseï¼‰ï¼Œä¸å»ºè®®ç”¨äºç”Ÿäº§ç¯å¢ƒ</strong></p>
<p><strong>æ ¸å¿ƒç‰¹ç‚¹</strong>ï¼š</p>
<ul>
<li><strong>æ€§èƒ½æå…¶å¼ºæ‚</strong>ï¼šæ¯” mypy/pyright å¿« 10-60 å€</li>
<li>åŒæ—¶æä¾›ç±»å‹æ£€æŸ¥å’Œè¯­è¨€æœåŠ¡å™¨åŠŸèƒ½</li>
<li>æ¿€è¿›çš„ç±»å‹æ¨æ–­ç­–ç•¥</li>
<li>ä¸ ruff å…±äº«ç›¸åŒçš„ AST å’Œ parser</li>
</ul>
<p><strong>å†å²æ¸Šæº</strong>ï¼š</p>
<p>ty æœ€åˆå« <strong>Red Knot</strong>ï¼Œæ˜¯ä½œä¸º ruff é¡¹ç›®çš„ä¸€éƒ¨åˆ†åœ¨å¼€å‘çš„ï¼Œåæ¥ç‹¬ç«‹æˆå•ç‹¬çš„å·¥å…·ã€‚</p>
<p><strong>é€‚ç”¨åœºæ™¯</strong>ï¼š</p>
<ul>
<li>ç›®å‰ä»…é€‚åˆå®éªŒæ€§é¡¹ç›®</li>
<li>æƒ³ä½“éªŒå‰æ²¿æŠ€æœ¯çš„å¼€å‘è€…</li>
</ul>
<hr/>
<h4 data-id="heading-16">2.6 python-lsp/python-lsp-server</h4>
<p><strong>å®šä½</strong>ï¼šè¯­è¨€æœåŠ¡å™¨åè®®å®ç°</p>
<p><strong>è¯­è¨€</strong>ï¼šPython ç¼–å†™</p>
<p><strong>æ ¸å¿ƒç‰¹ç‚¹</strong>ï¼š</p>
<ul>
<li>æä¾›å®Œæ•´çš„ LSP åŠŸèƒ½ï¼ˆè‡ªåŠ¨è¡¥å…¨ã€æ‚¬åœæç¤ºã€è·³è½¬å®šä¹‰ç­‰ï¼‰</li>
<li>è½»é‡çº§ã€æ˜“æ‰©å±•</li>
<li>å¯é…ç½®å¤šç§åç«¯ï¼ˆå¦‚ Jediã€ropeï¼‰</li>
<li><strong>ä¸æ˜¯ç±»å‹æ£€æŸ¥å™¨</strong>ï¼Œä¸“æ³¨äºç¼–è¾‘å™¨é›†æˆ</li>
</ul>
<p><strong>é€‚ç”¨åœºæ™¯</strong>ï¼š</p>
<ul>
<li>éœ€è¦çº¯ Python å®ç°çš„ LSP</li>
<li>ä¸å…¶ä»– Python å·¥å…·é“¾é›†æˆ</li>
<li>è½»é‡çº§ç¼–è¾‘å™¨é…ç½®</li>
</ul>
<hr/>
<h3 data-id="heading-17">ä¸‰ã€Astral å®¶æ—è§£æ</h3>
<p>ä½ å¯èƒ½æ³¨æ„åˆ° ruffã€tyã€uv éƒ½æ¥è‡ªåŒä¸€ä¸ªç»„ç»‡ â€”â€” <strong>Astral</strong>ã€‚è¿™å¹¶éé‡å¤ï¼Œè€Œæ˜¯ç²¾å¿ƒè§„åˆ’çš„å®Œæ•´å·¥å…·é“¾ã€‚</p>
<h4 data-id="heading-18">3.1 Astral äº§å“çŸ©é˜µ</h4>
<pre><code class="hljs language-markdown" lang="markdown">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Astral å®¶æ—                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚   uv  â”€â”€â”€â†’  åŒ…ç®¡ç†å·¥å…·                                       â”‚
â”‚            ï¼ˆæ›¿ä»£ pipã€poetryã€pipenv ç­‰ï¼‰                    â”‚
â”‚                                                             â”‚
â”‚   ruff â”€â”€â”€â†’  Linter + Formatter + LSP                       â”‚
â”‚            ï¼ˆæ›¿ä»£ flake8ã€blackã€isort ç­‰ï¼‰                   â”‚
â”‚                                                             â”‚
â”‚   ty   â”€â”€â”€â†’  Type Checker + LSP                             â”‚
â”‚            ï¼ˆæ›¿ä»£ mypyã€pyrightï¼Œå¼€å‘ä¸­ï¼‰                     â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
<span class="hljs-code">                    â”‚
                    â–¼
         å…±äº«ç›¸åŒçš„ AST å’Œ Parser
         ï¼ˆRust å®ç°ï¼Œæè‡´æ€§èƒ½ï¼‰
</span></code></pre>
<h4 data-id="heading-19">3.2 ruff å’Œ ty çš„å…³ç³»</h4>






























<table><thead><tr><th>ç»´åº¦</th><th>ruff</th><th>ty</th></tr></thead><tbody><tr><td><strong>ä¸»è¦åŠŸèƒ½</strong></td><td>Linting + æ ¼å¼åŒ–</td><td>ç±»å‹æ£€æŸ¥</td></tr><tr><td><strong>æ£€æŸ¥å†…å®¹</strong></td><td>ä»£ç é£æ ¼ã€æ½œåœ¨bugã€æœ€ä½³å®è·µ</td><td>ç±»å‹æ­£ç¡®æ€§</td></tr><tr><td><strong>LSP ä¾§é‡ç‚¹</strong></td><td>ä»£ç åŠ¨ä½œã€å¿«é€Ÿä¿®å¤ã€æ ¼å¼åŒ–</td><td>ç±»å‹ä¿¡æ¯ã€è¯Šæ–­</td></tr><tr><td><strong>ç±»æ¯”</strong></td><td>åƒ ESLint</td><td>åƒ TypeScript</td></tr></tbody></table>
<p><strong>å®ƒä»¬ä¸é‡å¤çš„åŸå› </strong>ï¼š</p>
<p>è™½ç„¶éƒ½æœ‰ LSPï¼Œä½†æä¾›çš„<strong>æœåŠ¡å†…å®¹ä¸åŒ</strong>ï¼š</p>
<ul>
<li><strong>ruff çš„ LSP</strong>ï¼šæä¾›ä»£ç è´¨é‡ç›¸å…³çš„åŠŸèƒ½ï¼ˆè¯Šæ–­ã€æ ¼å¼åŒ–ã€ä¿®å¤ï¼‰</li>
<li><strong>ty çš„ LSP</strong>ï¼šæä¾›ç±»å‹ç³»ç»Ÿç›¸å…³çš„åŠŸèƒ½ï¼ˆç±»å‹æ¨æ–­ã€ç±»å‹è¯Šæ–­ã€ç±»å‹æç¤ºï¼‰</li>
</ul>
<p>è¿™å°±åƒ VSCode é‡ŒåŒæ—¶æœ‰ ESLintï¼ˆLinterï¼‰å’Œ TypeScriptï¼ˆType Checkerï¼‰ä¸€æ ·ï¼Œä¸¤è€…äº’è¡¥è€Œä¸æ˜¯é‡å¤ã€‚</p>
<hr/>
<h3 data-id="heading-20">å››ã€é€‰æ‹©æŒ‡å—</h3>
<h4 data-id="heading-21">4.1 ç±»å‹æ£€æŸ¥å™¨é€‰æ‹©</h4>
<pre><code class="hljs">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ç±»å‹æ£€æŸ¥å™¨é€‰æ‹©                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  ä½¿ç”¨ VSCodeï¼Ÿ                                              â”‚
â”‚       â”‚                                                     â”‚
â”‚       â”œâ”€ æ˜¯ â†’ pyright + Pylance                            â”‚
â”‚       â”‚        ï¼ˆå¾®è½¯å®˜æ–¹é›†æˆï¼Œä½“éªŒæœ€ä½³ï¼‰                     â”‚
â”‚       â”‚                                                     â”‚
â”‚       â””â”€ å¦ â†’ basedpyright                                 â”‚
â”‚                ï¼ˆå¼€æºå®Œæ•´ï¼Œå¤šç¼–è¾‘å™¨å‹å¥½ï¼‰                     â”‚
â”‚                                                             â”‚
â”‚  æƒ³å°è¯•å‰æ²¿æŠ€æœ¯ï¼Ÿ                                           â”‚
â”‚       â””â”€ ty ï¼ˆå®éªŒæ€§é¡¹ç›®ï¼Œæ³¨æ„ç¨³å®šæ€§ï¼‰                      â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h4 data-id="heading-22">4.2 Linter/æ ¼å¼åŒ–å·¥å…·é€‰æ‹©</h4>
<pre><code class="hljs language-lua" lang="lua">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 Linter/æ ¼å¼åŒ–å·¥å…·é€‰æ‹©                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  éœ€è¦ä»€ä¹ˆï¼Ÿ                                                 â”‚
â”‚                                                             â”‚
â”‚  Linting + æ ¼å¼åŒ– + æè‡´æ€§èƒ½                                 â”‚
â”‚       â””â”€ ruff ï¼ˆæ¨èï¼‰                                     â”‚
â”‚                                                             â”‚
â”‚  ä»…æ ¼å¼åŒ–                                                   â”‚
â”‚       â””â”€ black / ruff <span class="hljs-built_in">format</span>                              â”‚
â”‚                                                             â”‚
â”‚  ä¼ ç»Ÿå·¥å…·é“¾                                                 â”‚
â”‚       â””â”€ flake8 + black + isort                           â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h4 data-id="heading-23">4.3 å…¸å‹é¡¹ç›®é…ç½®</h4>
<h5 data-id="heading-24">Python é¡¹ç›®æ¨èé…ç½®</h5>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># .config/python-tools.yaml</span>
<span class="hljs-string">å·¥å…·é“¾é…ç½®:</span>
  <span class="hljs-string">ç±»å‹æ£€æŸ¥:</span> <span class="hljs-string">pyright</span> <span class="hljs-string">/</span> <span class="hljs-string">basedpyright</span>
  <span class="hljs-attr">Linting:</span>  <span class="hljs-string">ruff</span>
  <span class="hljs-string">æ ¼å¼åŒ–:</span>   <span class="hljs-string">ruff</span> <span class="hljs-string">format</span>
  <span class="hljs-attr">LSP:</span>      <span class="hljs-string">ruff</span> <span class="hljs-string">server</span> <span class="hljs-string">+</span> <span class="hljs-string">pyright/basedpyright</span>
</code></pre>
<h5 data-id="heading-25">Neovim é…ç½®ç¤ºä¾‹</h5>
<pre><code class="hljs language-lua" lang="lua"><span class="hljs-comment">-- å¦‚æœä½ ä½¿ç”¨ Neovim</span>
{
  <span class="hljs-comment">-- åŸºäº basedpyright çš„ç±»å‹æ£€æŸ¥</span>
  <span class="hljs-string">"neovim/nvim-lspconfig"</span>,
  opts = {
    servers = {
      basedpyright = {},
      ruff = {
        <span class="hljs-comment">-- ruff LSP æä¾›å¿«é€Ÿ lint å’Œæ ¼å¼åŒ–</span>
      }
    }
  }
}
</code></pre>
<h5 data-id="heading-26">VSCode é…ç½®ç¤ºä¾‹</h5>
<pre><code class="hljs language-json" lang="json"><span class="hljs-comment">// .vscode/settings.json</span>
<span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"python.defaultInterpreterPath"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"./.venv/bin/python"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"[python]"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"editor.formatOnSave"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"editor.defaultFormatter"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"charliemarsh.ruff"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"editor.codeActionsOnSave"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"source.fixAll.ruff"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"explicit"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"source.organizeImports.ruff"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"explicit"</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"ruff.lint.enable"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"python.analysis.typeCheckingMode"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"strict"</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<hr/>
<h3 data-id="heading-27">äº”ã€æ€§èƒ½å¯¹æ¯”</h3>
<p>æ ¹æ®å…¬å¼€çš„åŸºå‡†æµ‹è¯•æ•°æ®ï¼š</p>
<h4 data-id="heading-28">5.1 Linter æ€§èƒ½</h4>

























<table><thead><tr><th>å·¥å…·</th><th>ç›¸å¯¹æ€§èƒ½</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>ruff</td><td><strong>100x</strong></td><td>ç›¸æ¯” flake8 ç­‰ä¼ ç»Ÿå·¥å…·</td></tr><tr><td>flake8</td><td>1x</td><td>åŸºå‡†</td></tr><tr><td>pylint</td><td>~0.5x</td><td>æ›´æ…¢</td></tr></tbody></table>
<h4 data-id="heading-29">5.2 ç±»å‹æ£€æŸ¥å™¨æ€§èƒ½</h4>

























<table><thead><tr><th>å·¥å…·</th><th>ç›¸å¯¹æ€§èƒ½</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>ty</td><td><strong>10-60x</strong></td><td>æ—©æœŸåŸºå‡†ï¼Œä»åœ¨ä¼˜åŒ–</td></tr><tr><td>pyright</td><td><strong>5x</strong></td><td>ç›¸æ¯” mypy</td></tr><tr><td>mypy</td><td>1x</td><td>åŸºå‡†</td></tr></tbody></table>
<p><em>æ³¨ï¼šå®é™…æ€§èƒ½å› é¡¹ç›®è§„æ¨¡å’Œå¤æ‚åº¦è€Œå¼‚</em></p>
<hr/>
<h3 data-id="heading-30">å…­ã€æ€»ç»“</h3>
<h4 data-id="heading-31">6.1 å…³é”®è¦ç‚¹</h4>
<ol>
<li><strong>ç†è§£æ¦‚å¿µå·®å¼‚</strong>ï¼šç±»å‹æ£€æŸ¥ã€Lintingã€æ ¼å¼åŒ–ã€LSP å„å¸å…¶èŒ</li>
<li><strong>å·¥å…·ä¸é‡å¤</strong>ï¼šå³ä½¿éƒ½æ”¯æŒ LSPï¼Œæä¾›çš„åŠŸèƒ½ä¹Ÿä¸åŒ</li>
<li><strong>Astral çš„æ„¿æ™¯</strong>ï¼šæ‰“é€ å®Œæ•´çš„é«˜æ€§èƒ½ Python å·¥å…·é“¾</li>
<li><strong>é€‰æ‹©åŸºäºéœ€æ±‚</strong>ï¼šè€ƒè™‘ç¼–è¾‘å™¨ã€å›¢é˜Ÿã€é¡¹ç›®è§„æ¨¡</li>
</ol>
<h4 data-id="heading-32">6.2 æ¨èç»„åˆ</h4>



































<table><thead><tr><th>å¼€å‘ç¯å¢ƒ</th><th>ç±»å‹æ£€æŸ¥</th><th>Linter/æ ¼å¼åŒ–</th><th>LSP</th></tr></thead><tbody><tr><td>VSCode</td><td>pyright</td><td>ruff</td><td>Pylance + ruff</td></tr><tr><td>Neovim</td><td>basedpyright</td><td>ruff</td><td>basedpyright + ruff server</td></tr><tr><td>Emacs</td><td>basedpyright</td><td>ruff</td><td>basedpyright + ruff server</td></tr><tr><td>å…¶ä»–</td><td>basedpyright</td><td>ruff</td><td>python-lsp-server + ruff</td></tr></tbody></table>
<h4 data-id="heading-33">6.3 å±•æœ›æœªæ¥</h4>
<p>Python å·¥å…·ç”Ÿæ€æ­£åœ¨å¿«é€Ÿæ¼”è¿›ï¼š</p>
<ul>
<li><strong>ty</strong> æœ‰æœ›æˆä¸ºä¸»æµçš„ç±»å‹æ£€æŸ¥å™¨</li>
<li><strong>ruff</strong> å¯èƒ½æ•´åˆæ›´å¤šåŠŸèƒ½</li>
<li><strong>uv</strong> å·²ç»æˆä¸ºåŒ…ç®¡ç†çš„æœ‰åŠ›ç«äº‰è€…</li>
</ul>
<p>ä¿æŒå…³æ³¨ï¼Œä½†è°¨æ…é‡‡ç”¨æ–°å·¥å…· â€”â€” å°¤å…¶æ˜¯ç”Ÿäº§ç¯å¢ƒã€‚</p>
<hr/>
<h3 data-id="heading-34">å‚è€ƒèµ„æ–™</h3>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FDetachHead%2Fbasedpyright" target="_blank" title="https://github.com/DetachHead/basedpyright" ref="nofollow noopener noreferrer">basedpyright GitHub</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.basedpyright.com%2F" target="_blank" title="https://docs.basedpyright.com/" ref="nofollow noopener noreferrer">basedpyright æ–‡æ¡£</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fastral-sh%2Fruff" target="_blank" title="https://github.com/astral-sh/ruff" ref="nofollow noopener noreferrer">Ruff GitHub</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.astral.sh%2Fruff%2F" target="_blank" title="https://docs.astral.sh/ruff/" ref="nofollow noopener noreferrer">Ruff æ–‡æ¡£</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fastral-sh%2Fty" target="_blank" title="https://github.com/astral-sh/ty" ref="nofollow noopener noreferrer">ty GitHub</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fastral.sh%2Fblog%2Fty" target="_blank" title="https://astral.sh/blog/ty" ref="nofollow noopener noreferrer">ty å®˜æ–¹åšå®¢</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fmicrosoft%2Fpyright" target="_blank" title="https://github.com/microsoft/pyright" ref="nofollow noopener noreferrer">pyright GitHub</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fpython-lsp%2Fpython-lsp-server" target="_blank" title="https://github.com/python-lsp/python-lsp-server" ref="nofollow noopener noreferrer">Python LSP Server</a></li>
</ul>
<hr/>
<p><em>æœ¬æ–‡å‘å¸ƒäº 2025 å¹´ 12 æœˆï¼Œå·¥å…·å‘å±•è¿…é€Ÿï¼Œå»ºè®®å…³æ³¨å®˜æ–¹åŠ¨æ€è·å–æœ€æ–°ä¿¡æ¯ã€‚</em></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[C++å¤šæ€]]></title>    <link>https://juejin.cn/post/7588093282530705460</link>    <guid>https://juejin.cn/post/7588093282530705460</guid>    <pubDate>2025-12-27T17:24:22.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588093282530705460" data-draft-id="7588098335790596096" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="C++å¤šæ€"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-27T17:24:22.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ©˜å­13"/> <meta itemprop="url" content="https://juejin.cn/user/4162084884974491"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            C++å¤šæ€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4162084884974491/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ©˜å­13
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-27T17:24:22.000Z" title="Sat Dec 27 2025 17:24:22 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»19åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¤šæ€çš„æ¦‚å¿µ</h2>
<p>é€šä¿—æ¥è¯´ï¼Œå°±æ˜¯å¤šç§å½¢æ€ï¼Œå°±æ˜¯å»å®ŒæˆæŸä¸ªè¡Œä¸ºï¼Œå½“ä¸åŒçš„å¯¹è±¡å»å®Œæˆæ—¶ä¼šäº§ç”Ÿå‡ºä¸åŒçš„çŠ¶æ€ã€‚</p>
<h2 data-id="heading-1">å¤šæ€çš„ä½¿ç”¨</h2>
<p>è¦è§¦å‘ C++ çš„<strong>å¤šæ€è°ƒç”¨ï¼ˆè¿è¡Œæ—¶åŠ¨æ€ç»‘å®šï¼‰</strong>ï¼Œéœ€åŒæ—¶æ»¡è¶³ä»¥ä¸‹ 3 ä¸ªæ ¸å¿ƒæ¡ä»¶ï¼š</p>
<p><strong>æ¡ä»¶1</strong>ï¼š<strong>çˆ¶ç±»å£°æ˜è™šå‡½æ•°</strong>ï¼šåœ¨çˆ¶ç±»ä¸­ï¼Œå°†éœ€è¦å®ç°å¤šæ€çš„æˆå‘˜å‡½æ•°å‰æ·»åŠ virtualå…³é”®å­—ï¼ˆ<strong>ææ„å‡½æ•°ï¼Ÿåæ–‡è¯¦è¯´</strong>ï¼‰ï¼Œè¯¥å‡½æ•°æˆä¸ºè™šå‡½æ•°ã€‚</p>
<p><strong>æ¡ä»¶2</strong>ï¼š<strong>å­ç±»å®Œæˆè™šå‡½æ•°çš„åˆæ³•é‡å†™</strong>ï¼ˆOverrideï¼‰ï¼š1.çˆ¶å­ç±»ä¸­ä¸¤ä¸ªè™šå‡½æ•°ï¼Œä¸‰åŒï¼ˆå‡½æ•°åï¼Œå‚æ•°ï¼Œè¿”å›ï¼‰ï¼ˆç†è§£æˆéšè—çš„ä¸€ä¸ªå­é›†ï¼‰2.ä¾‹å¤–ï¼Œ<strong>åå˜è¿”å›ç±»å‹ï¼Œåæ–‡è¯¦è¯´</strong>ã€‚
æ€»ç»“ä¸ºâ€œ<strong>åŸºæœ¬ä¸‰åŒ+åå˜è¿”å›</strong>â€ã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9376a52eeab5437681968798a20c54bf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5qmY5a2QMTM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767461062&amp;x-signature=JeVt7prsSZRTGjmGiwI797AHRr0%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p><strong>æ¡ä»¶3</strong>ï¼š<strong>çˆ¶ç±»çš„æŒ‡é’ˆæˆ–å¼•ç”¨å»è°ƒç”¨è™šå‡½æ•°</strong>ã€‚
<strong>åä¾‹</strong>ï¼šè‹¥ç”¨<strong>å­ç±»</strong>æŒ‡é’ˆ / å¼•ç”¨æŒ‡å‘<strong>å­ç±»å¯¹è±¡</strong>ï¼ˆé™æ€ç±»å‹ = åŠ¨æ€ç±»å‹ï¼‰ï¼Œæˆ–ç”¨çˆ¶ç±»å¯¹è±¡ï¼ˆ<strong>éæŒ‡é’ˆ / éå¼•ç”¨</strong>ï¼‰è°ƒç”¨è™šå‡½æ•°ï¼Œå‡ä¼šè§¦å‘ç¼–è¯‘æœŸé™æ€ç»‘å®šï¼ˆ<strong>æ™®é€šè°ƒç”¨</strong>ï¼‰ï¼Œæ— æ³•å®ç°å¤šæ€ã€‚</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Person</span>
{</span>
public:
	virtual <span class="hljs-type">void</span> <span class="hljs-title function_">BuyTicket</span><span class="hljs-params">()</span> { <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"ä¹°ç¥¨-å…¨ä»·"</span> &lt;&lt; <span class="hljs-built_in">endl</span>; }
};

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Student</span> :</span> public Person
{
public:
	virtual <span class="hljs-type">void</span> <span class="hljs-title function_">BuyTicket</span><span class="hljs-params">()</span> { <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"ä¹°ç¥¨-åŠä»·"</span> &lt;&lt; <span class="hljs-built_in">endl</span>; }
};

<span class="hljs-type">void</span> <span class="hljs-title function_">Func</span><span class="hljs-params">(Person&amp; p)</span>
{
	p.BuyTicket();
}
<span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span>
{
	Person ps;
	Student st;

	Func(ps);
	Func(st);
}
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b773b26669fd4907a63e9628dd3c40e1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5qmY5a2QMTM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767461062&amp;x-signature=wkopeuANBD1FRNpO0VWlqHUWLwI%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
æ³¨æ„ï¼šåŸºç±»åŠ virtualï¼Œæ´¾ç”Ÿç±»è‡ªåŠ¨ç»§æ‰¿è™šå‡½æ•°å±æ€§ï¼Œä¸ç”¨æ˜¾å¼å†™virtualã€‚</p>
<h3 data-id="heading-2"><strong>å…³äºæ™®é€šè°ƒç”¨ä¸å¤šæ€è°ƒç”¨</strong></h3>
<p><strong>æ™®é€šè°ƒç”¨ï¼ˆç¼–è¯‘æ—¶é™æ€ç»‘å®šï¼‰</strong>ï¼šæ™®é€šè°ƒç”¨æ˜¯æŒ‡ç¼–è¯‘å™¨åœ¨<strong>ç¼–è¯‘é˜¶æ®µ</strong>ï¼Œ<strong>å°±æ ¹æ®â€œè°ƒç”¨è€…çš„ç±»å‹â€ï¼ˆè€Œéå®é™…å¯¹è±¡ç±»å‹ï¼‰ç¡®å®šè¦è°ƒç”¨çš„å‡½æ•°åœ°å€</strong>ï¼Œç›´æ¥å°†å‡½æ•°è°ƒç”¨æŒ‡ä»¤å†™å…¥ç¼–è¯‘åçš„ä»£ç ä¸­ï¼Œè¿è¡Œæ—¶æ— éœ€é¢å¤–åˆ¤æ–­ã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3699748d6c7c4518b50adb0ba54e4829~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5qmY5a2QMTM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767461062&amp;x-signature=YIP8NSMkMKwAdGGCmqyzDsQ7rpY%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p><strong>æ™®é€šè°ƒç”¨çš„æ ¸å¿ƒæ˜¯â€œçœ‹ç±»å‹ï¼Œä¸çœ‹å®é™…å¯¹è±¡â€</strong>ã€‚</p>
<p>æ™®é€šè°ƒç”¨è§¦å‘æ¡ä»¶:
è°ƒç”¨éè™šå‡½æ•°æ—¶ï¼ˆæ— è®ºé€šè¿‡å¯¹è±¡ã€æŒ‡é’ˆè¿˜æ˜¯å¼•ç”¨è°ƒç”¨ï¼‰ï¼›
è°ƒç”¨è™šå‡½æ•°ï¼Œä½†é€šè¿‡å¯¹è±¡ç›´æ¥è°ƒç”¨ï¼ˆéæŒ‡é’ˆ / å¼•ç”¨ï¼‰æ—¶ï¼ˆæ­¤æ—¶ä¹Ÿä¼šé€€åŒ–ä¸ºæ™®é€šè°ƒç”¨ï¼‰ã€‚</p>
<p><strong>å¤šæ€è°ƒç”¨ï¼ˆè¿è¡Œæ—¶åŠ¨æ€ç»‘å®šï¼‰</strong>ï¼šå¤šæ€è°ƒç”¨æ˜¯æŒ‡ç¼–è¯‘å™¨åœ¨ç¼–è¯‘é˜¶æ®µæ— æ³•ç¡®å®šå‡½æ•°è°ƒç”¨ç›®æ ‡ï¼Œ<strong>éœ€åœ¨è¿è¡Œé˜¶æ®µï¼Œæ ¹æ® â€œæŒ‡é’ˆ /å¼•ç”¨å®é™…æŒ‡å‘çš„å¯¹è±¡ç±»å‹â€</strong>ï¼ŒåŠ¨æ€æ‰¾åˆ°å¯¹åº”çš„å‡½æ•°åœ°å€å¹¶è°ƒç”¨ã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6cf0696b6c4140f6a19a4af797af0b91~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5qmY5a2QMTM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767461062&amp;x-signature=vGnRvsGsl1B08B93I9l817prB7M%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p><strong>å¤šæ€è°ƒç”¨çš„æ ¸å¿ƒæ˜¯â€œçœ‹å®é™…å¯¹è±¡çš„ç±»å‹â€</strong>ã€‚</p>
<p>æ»¡è¶³å¤šæ€è°ƒç”¨çš„ä¸‰ä¸ªå¿…å¤‡æ¡ä»¶ï¼ˆä¸‰è€…ç¼ºä¸€ä¸å¯ï¼‰ï¼š
1.<strong>åŸºç±»ä¸­å£°æ˜è™šå‡½æ•°</strong>
2.<strong>æ´¾ç”Ÿç±»é‡å†™è™šå‡½æ•°</strong>
3.<strong>é€šè¿‡åŸºç±»æŒ‡é’ˆ / å¼•ç”¨è°ƒç”¨</strong></p>
<p><strong>æ€»ç»“ï¼šæ™®é€šè°ƒç”¨çœ‹æŒ‡é’ˆ / å¼•ç”¨ç±»å‹ï¼Œå¤šæ€è°ƒç”¨çœ‹æŒ‡å‘å†…å®¹ï¼ˆå®é™…å¯¹è±¡ï¼‰çš„ç±»å‹ã€‚</strong></p>























<table><thead><tr><th>ç»‘å®šæ–¹å¼</th><th>è°ƒç”¨ç±»å‹</th><th>ç»‘å®šæ—¶æœº</th><th>æ ¸å¿ƒç‰¹å¾</th></tr></thead><tbody><tr><td>é™æ€ç»‘å®š</td><td>æ™®é€šè°ƒç”¨</td><td>ç¼–è¯‘æœŸ</td><td>ç¼–è¯‘æ—¶å°±ç¡®å®šè°ƒç”¨å“ªä¸ªå‡½æ•°</td></tr><tr><td>åŠ¨æ€ç»‘å®š</td><td>å¤šæ€è°ƒç”¨</td><td>è¿è¡ŒæœŸ</td><td>è¿è¡Œæ—¶æ‰ç¡®å®šè°ƒç”¨å“ªä¸ªå‡½æ•°</td></tr></tbody></table>
<p><strong>è¡¥å……</strong>ï¼šé™æ€å¤šæ€ä¸åŠ¨æ€å¤šæ€
<strong>åŠ¨æ€å¤šæ€ï¼šè¿è¡ŒæœŸç»‘å®šçš„å¤šæ€</strong>ï¼Œå°±æ˜¯ä¸Šé¢æ‰€è¯´çš„å¤šæ€
<strong>é™æ€å¤šæ€ï¼šç¼–è¯‘æœŸç»‘å®šçš„å¤šæ€</strong>ï¼Œä¹Ÿå« â€œç¼–è¯‘æœŸå¤šæ€â€â€”â€” ç¼–è¯‘å™¨åœ¨ç¼–è¯‘é˜¶æ®µå°±ç¡®å®šè¦è°ƒç”¨çš„å‡½æ•°ã€‚å¸¸è§ä¾‹å­ï¼šå‡½æ•°é‡è½½ï¼Œæ¨¡ç‰ˆ</p>
<h3 data-id="heading-3">è™šå‡½æ•°é‡å†™çš„ä¸¤ä¸ªä¾‹å¤–</h3>
<h4 data-id="heading-4">åå˜è¿”å›å€¼</h4>
<p>1.<strong>åå˜è¿”å›å€¼</strong>ï¼Œçˆ¶ç±»ä¸å­ç±»çš„è™šå‡½æ•°çš„è¿”å›å€¼å¯ä»¥ä¸åŒï¼ˆè¦æ±‚è™šå‡½æ•°çš„è¿”å›å€¼å¿…é¡»æ˜¯çˆ¶å­ç±»å…³ç³»çš„æŒ‡é’ˆæˆ–å¼•ç”¨ï¼‰</p>
<pre><code class="hljs language-c" lang="c">å…ˆå†™ä¸€ä¸ªçˆ¶å­ç±»AB
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">A</span>
{</span>};
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">B</span> :</span> public A 
{};

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Member</span> 
{</span>
public:
    virtual A* <span class="hljs-title function_">f</span><span class="hljs-params">()</span> <span class="hljs-comment">//è™šå‡½æ•°çš„è¿”å›å€¼å¿…é¡»æ˜¯ä¸€ä¸ªçˆ¶å­ç±»çš„æŒ‡é’ˆæˆ–å¼•ç”¨</span>
    {
        <span class="hljs-keyword">return</span> new A;
    }
};
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Student</span> :</span> public Member 
{
public:
    virtual B* <span class="hljs-title function_">f</span><span class="hljs-params">()</span> <span class="hljs-comment">//è™šå‡½æ•°çš„è¿”å›å€¼å¿…é¡»æ˜¯ä¸€ä¸ªçˆ¶å­ç±»çš„æŒ‡é’ˆæˆ–å¼•ç”¨</span>
    {
        <span class="hljs-keyword">return</span> new B;
    }
};
</code></pre>
<p><strong>æ€»ç»“</strong>ï¼š</p>
<ul>
<li>è¿”å›å€¼å¿…é¡»æ˜¯æŒ‡é’ˆæˆ–å¼•ç”¨ï¼ˆä¸èƒ½æ˜¯å€¼ç±»å‹ï¼Œæ¯”å¦‚A f()å’ŒB f()ä¸æ„æˆåå˜ï¼‰ï¼›</li>
<li><strong>æ´¾ç”Ÿç±»è¿”å›</strong>çš„æŒ‡é’ˆ / å¼•ç”¨ç±»å‹ï¼Œå¿…é¡»æ˜¯<strong>åŸºç±»è¿”å›</strong>ç±»å‹çš„ç›´æ¥ / é—´æ¥æ´¾ç”Ÿç±»ï¼ˆè¿™é‡ŒBç»§æ‰¿Aï¼Œæ»¡è¶³æ¡ä»¶ï¼‰ã€‚</li>
</ul>
<h4 data-id="heading-5">ææ„å‡½æ•°çš„é‡å†™</h4>
<p><strong>ææ„å‡½æ•°çš„åå­—ç‰¹æ®Šå¤„ç†ï¼Œæ„æˆéšè—ï¼Œå»ºè®®å‡½æ•°åå‰åŠ virtualã€‚</strong></p>
<p><strong>è¿™å¥è¯æ˜¯å…³é”®</strong>ï¼š<strong>åŸºç±»æŒ‡é’ˆæŒ‡å‘æ´¾ç”Ÿç±»å¯¹è±¡</strong>æ—¶ï¼Œ<strong>éè™šææ„</strong>ä¼šè§¦å‘<strong>æ™®é€šè°ƒç”¨</strong>ï¼Œ<strong>è™šææ„</strong>ä¼šè§¦å‘<strong>å¤šæ€è°ƒç”¨</strong>
â€‹â€‹</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Member</span> {</span>
public:
	~Member() 
	{ 
		<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"~Member()"</span> &lt;&lt; <span class="hljs-built_in">endl</span>; 
	}
};
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Student</span> :</span> public Member {
public:
	~Student() 
	{ 
		<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"~Student()"</span> &lt;&lt; <span class="hljs-built_in">endl</span>; 
	}
};
<span class="hljs-comment">//æ­¤æ—¶ææ„å‡½æ•°æ„æˆéšè—</span>
<span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span>
{
	Member* p1 = new Member;
	Member* p2 = new Student;

	delete p1;
	delete p2;
	<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<p>ç»“æœä¸ºï¼š
â€‹â€‹â€‹â€‹<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7a2168532a424b48b7c9920df2507fc6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5qmY5a2QMTM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767461062&amp;x-signature=wNtfzrYzpwkDoTUontviFDuM49A%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>â€‹
<strong>â€‹â€‹â€‹â€‹ç°è±¡</strong>ï¼šè§‚å¯Ÿå‘ç°åœ¨ç¬¬äºŒä¸ªæŒ‡é’ˆææ„æ—¶åªææ„äº†çˆ¶ç±»ï¼Œè€Œæ²¡æœ‰ææ„å­ç±»ï¼Œå¯èƒ½ä¼šå¯¼è‡´å†…å­˜æ³„æ¼ã€‚</p>
<p><strong>æ ¹æœ¬åŸå› </strong>ï¼šæ˜¯æ™®é€šè°ƒç”¨ï¼Œåªçœ‹æŒ‡é’ˆ\å¼•ç”¨ç±»å‹ï¼Œè€Œä¸çœ‹æŒ‡å‘å†…å®¹çš„ç±»å‹ã€‚</p>
<p>åˆ†æï¼š</p>
<ol>
<li>ä¸¤ä¸ªææ„å‡½æ•°æ„æˆäº†éšè—ï¼ˆ<strong>ææ„å‡½æ•°è™½ç„¶åç§°æ ¼å¼ç‰¹æ®Šï¼ˆ~ç±»å()ï¼‰ï¼Œä½†ç¼–è¯‘å™¨ä¼šå°†å…¶è§†ä¸º â€œåŒåå‡½æ•°â€ï¼Œå› æ­¤Student::~Student()ä¼šéšè—Member::~Member()ã€‚</strong>ï¼‰ï¼Œå®é™…ä¸Šä¹Ÿæ»¡è¶³äº†é‡å†™æ¡ä»¶ï¼ˆç”±äºææ„å‡½æ•°çš„ç‰¹æ®Šè§„åˆ™ï¼Œå¯¼è‡´ä¸èƒ½å«é‡å†™ï¼ŒåŠ ä¸Švirtualåå˜æˆè™šå‡½æ•°åï¼Œè‡ªåŠ¨æ»¡è¶³é‡å†™ï¼‰â€”â€”è¿™æ ·<strong>è¾¾æˆ2ä¸ªæ¡ä»¶</strong> 1.çˆ¶ç±»å£°æ˜è™šå‡½æ•° 2.å­ç±»è™šå‡½æ•°é‡å†™ã€‚</li>
</ol>
<blockquote>
<p><strong>ææ„å‡½æ•°çš„ç‰¹æ®Šè§„åˆ™</strong>ï¼šææ„å‡½æ•°æ˜¯å¦æ„æˆ â€œé‡å†™â€ æˆ– â€œéšè—â€ï¼Œå®Œå…¨å–å†³äºåŸºç±»ææ„å‡½æ•°æ˜¯å¦è¢«å£°æ˜ä¸ºvirtualâ€”â€” <strong>åŸºç±»ææ„</strong>æ˜¯<strong>è™šå‡½æ•°</strong>æ—¶ï¼Œ<strong>æ´¾ç”Ÿç±»ææ„</strong>æ„æˆ â€œ<strong>é‡å†™</strong>â€ï¼›<strong>åŸºç±»ææ„éè™š</strong>æ—¶ï¼Œ<strong>æ´¾ç”Ÿç±»ææ„</strong>æ„æˆ â€œ<strong>éšè—</strong>â€ã€‚</p>
</blockquote>
<ol start="2">
<li><strong>åŸºç±»æŒ‡é’ˆæŒ‡å‘æ´¾ç”Ÿç±»å¯¹è±¡</strong>æ—¶ï¼ˆ<strong>è¾¾æˆæœ€åä¸€ä¸ªæ¡ä»¶ï¼š3.çˆ¶ç±»çš„æŒ‡é’ˆè°ƒç”¨è™šå‡½æ•°</strong>ï¼‰ï¼Œ<strong>éè™šææ„</strong>ä¼šè§¦å‘<strong>æ™®é€šè°ƒç”¨</strong>ï¼Œ<strong>è™šææ„</strong>ä¼šè§¦å‘<strong>å¤šæ€è°ƒç”¨</strong>(â€œè™šâ€æ»¡è¶³çˆ¶ç±»å£°æ˜è™šå‡½æ•°ï¼Œâ€œææ„â€æ»¡è¶³å­ç±»è™šå‡½æ•°é‡å†™ï¼‰</li>
</ol>
<p><strong>æ€»ç»“ä»¥ä¸Š</strong>ï¼šä¹Ÿå°±æ˜¯è¯´åªè¦åŠ ä¸Švirtualå°±å¯ä»¥è¾¾æˆå¤šæ€è°ƒç”¨çš„3ä¸ªæ¡ä»¶ï¼Œä»è€Œè¿›è¡Œå¤šæ€è°ƒç”¨æ ¹æ®æŒ‡å‘å†…å®¹çš„ç±»å‹ï¼Œè¿›è¡Œå¤šæ€ææ„ã€‚</p>
<p><strong>è§£å†³æ–¹å¼</strong>ï¼š<strong>ææ„å‡½æ•°ç‰¹æ®Šå¤„ç†ï¼Œåœ¨å‡½æ•°åå‰é¢åŠ ä¸Švirtualï¼Œå˜æˆè™šå‡½æ•°</strong>ï¼Œ<strong>ä»è€Œæ»¡è¶³3ä¸ªå¤šæ€è°ƒç”¨çš„æ¡ä»¶</strong>ï¼Œä»è€Œå˜æˆ<strong>å¤šæ€è°ƒç”¨</strong>ï¼ŒæŒ‡å‘å†…å®¹æ˜¯çˆ¶ç±»ç±»å‹è°ƒçˆ¶ç±»ææ„ï¼ŒæŒ‡å‘å†…å®¹æ˜¯å­ç±»ç±»å‹è°ƒå­ç±»ææ„ï¼Œè¿™ä¸ªæ—¶å€™p1 deleteæ—¶å°±è°ƒç”¨Memberçš„ææ„å‡½æ•°ï¼Œp2 delete æ—¶å°±è°ƒç”¨Studentçš„ææ„å‡½æ•°ï¼ˆå­ç±»ææ„å®Œæ—¶è‡ªåŠ¨è°ƒç”¨çˆ¶ç±»ææ„å‡½æ•°ï¼‰ã€‚</p>
<blockquote>
<p><strong>å›é¡¾ï¼šdeleteçš„åº•å±‚</strong>
åˆ†ä¸º<code>p-&gt;destructor() + operator delete(p)</code>è¿™ä¸¤æ­¥
<strong>ç¬¬ä¸€æ­¥</strong>ï¼šææ„å‡½æ•°è°ƒç”¨<code>p-&gt;~ç±»å()</code>
åªæœ‰å½“pæŒ‡å‘çš„æ˜¯ç±»ç±»å‹å¯¹è±¡ï¼ˆåŒ…æ‹¬è‡ªå®šä¹‰ç±»ã€æ ‡å‡†åº“ç±»ç­‰ï¼‰æ—¶ï¼Œè¿™ä¸€æ­¥æ‰ä¼šæ‰§è¡Œï¼›è‹¥pæŒ‡å‘å†…ç½®ç±»å‹ï¼ˆintã€charç­‰ï¼‰ï¼Œåˆ™æ— æ­¤æ­¥éª¤ï¼Œç›´æ¥è¿›å…¥å†…å­˜é‡Šæ”¾é˜¶æ®µã€‚
<strong>ç¬¬äºŒæ­¥</strong>ï¼šå†…å­˜é‡Šæ”¾<code>operator delete(p)</code>
å°†pæŒ‡å‘çš„å†…å­˜å—å½’è¿˜ç»™å †åˆ†é…å™¨ã€‚ æ ‡å‡†åº“é»˜è®¤çš„operator deleteå‡½æ•°ï¼Œå…¶åº•å±‚é€šå¸¸è°ƒç”¨ C è¯­è¨€çš„free()å‡½æ•°ã€‚</p>
</blockquote>
<pre><code class="hljs language-c" lang="c"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Member</span> {</span>
public:
	virtual ~Member() 
	{ 
		<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"~Member()"</span> &lt;&lt; <span class="hljs-built_in">endl</span>; 
	}
};
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Student</span> :</span> public Member {
public:
	~Student()  <span class="hljs-comment">// è‡ªåŠ¨æˆä¸ºè™šææ„ï¼ˆæ— éœ€æ˜¾å¼å†™virtualï¼‰</span>
	{ 
		<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"~Student()"</span> &lt;&lt; <span class="hljs-built_in">endl</span>; 
	}
};
<span class="hljs-comment">// åªæœ‰æ´¾ç”Ÿç±»Studentçš„ææ„å‡½æ•°é‡å†™äº†Personçš„ææ„å‡½æ•°ï¼Œä¸‹é¢çš„deleteå¯¹è±¡è°ƒç”¨ææ„å‡½</span>
<span class="hljs-comment">//æ•°ï¼Œæ‰èƒ½æ„æˆå¤šæ€ï¼Œæ‰èƒ½ä¿è¯p1å’Œp2æŒ‡å‘çš„å¯¹è±¡æ­£ç¡®çš„è°ƒç”¨ææ„å‡½æ•°ã€‚</span>
<span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span>
{
	Member* p1 = new Member;
	Member* p2 = new Student;

	delete p1;
	delete p2;
	<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<p>ç»“æœå¦‚ä¸‹ï¼šâ€‹â€‹
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c64343fe670146278684dcc3c3d08b78~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5qmY5a2QMTM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767461062&amp;x-signature=JoZdjjFtSdt%2BvPlWT8a7D9gJiTI%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h3 data-id="heading-6">ä¸€é“éš¾é¢˜</h3>
<pre><code class="hljs language-c" lang="c"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">A</span>
{</span>
public:
	virtual <span class="hljs-type">void</span> <span class="hljs-title function_">func</span><span class="hljs-params">(<span class="hljs-type">int</span> val = <span class="hljs-number">1</span>)</span>
	{
		<span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"A-&gt;"</span> &lt;&lt; val &lt;&lt; <span class="hljs-built_in">std</span>::<span class="hljs-built_in">endl</span>;
	}
	virtual <span class="hljs-type">void</span> <span class="hljs-title function_">test</span><span class="hljs-params">()</span> { func(); }
};

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">B</span> :</span> public A
{
public:
	<span class="hljs-type">void</span> <span class="hljs-title function_">func</span><span class="hljs-params">(<span class="hljs-type">int</span> val = <span class="hljs-number">0</span>)</span>
	{
		<span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"B-&gt;"</span> &lt;&lt; val &lt;&lt; <span class="hljs-built_in">std</span>::<span class="hljs-built_in">endl</span>;
	}
};

<span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span>
{
	B* p = new B;
	p-&gt;test();
	<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<p>â€‹<strong>ç±» A çš„å®šä¹‰</strong>ï¼š
<code>virtual void func(int val = 1)</code>ï¼šè™šå‡½æ•°funcï¼Œé»˜è®¤å‚æ•°ä¸º 1ï¼Œè¾“å‡ºA-&gt;valã€‚
<code>virtual void test() { func(); }</code>ï¼šè™šå‡½æ•°testï¼Œå†…éƒ¨è°ƒç”¨func()ã€‚
<strong>ç±» B çš„å®šä¹‰</strong>ï¼š
<code>void func(int val = 0)</code>ï¼šé‡å†™åŸºç±»Açš„è™šå‡½æ•°funcï¼Œé»˜è®¤å‚æ•°æ”¹ä¸º 0ï¼Œè¾“å‡ºB-&gt;valã€‚
<strong>æ³¨æ„</strong>ï¼š<strong>Bæ²¡æœ‰é‡å†™testå‡½æ•°</strong>ï¼Œå› æ­¤testä»ä½¿ç”¨åŸºç±»Açš„å®ç°ã€‚
<strong>main å‡½æ•°æ‰§è¡Œæµç¨‹</strong>ï¼š
<code>B* p = new B;</code>ï¼šåˆ›å»ºBç±»å‹å¯¹è±¡ï¼ŒæŒ‡é’ˆpçš„é™æ€ç±»å‹æ˜¯B*ï¼Œå®é™…ç±»å‹ä¹Ÿæ˜¯Bã€‚
<code>p-&gt;test();</code>ï¼šè°ƒç”¨testå‡½æ•°ï¼š
<strong>ç¬¬ä¸€æ­¥</strong>ï¼štestå‡½æ•°æœªè¢«Bé‡å†™ï¼Œå› æ­¤æ‰§è¡ŒåŸºç±»Açš„testå‡½æ•°ã€‚
<strong>ç¬¬äºŒæ­¥</strong>ï¼šAçš„testä¸­è°ƒç”¨func()ï¼Œç”±äºfuncæ˜¯è™šå‡½æ•°ï¼ŒåŠ¨æ€ç»‘å®šåˆ°å®é™…å¯¹è±¡ç±»å‹ï¼ˆBï¼‰çš„funcï¼Œå› æ­¤æ‰§è¡ŒB::funcã€‚
<strong>ç¬¬ä¸‰æ­¥</strong>ï¼šfuncçš„é»˜è®¤å‚æ•°éµå¾ªé™æ€ç»‘å®šï¼ˆç”±è°ƒç”¨ç‚¹çš„é™æ€ç±»å‹å†³å®šï¼‰ï¼štestå±äºAç±»ï¼Œå› æ­¤é»˜è®¤å‚æ•°ä½¿ç”¨A::funcçš„1ï¼Œè€ŒéB::funcçš„0ã€‚
<strong>æœ€ç»ˆè¾“å‡º</strong>ï¼šB-&gt;1ã€‚</p>
<h3 data-id="heading-7">C++11 overrideå’Œfinal</h3>
<p><strong>finalï¼šä¿®é¥°è™šå‡½æ•°ï¼Œè¡¨ç¤ºè¯¥è™šå‡½æ•°ä¸èƒ½å†è¢«é‡å†™</strong></p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">A</span>
{</span>
public:
	virtual <span class="hljs-type">void</span> <span class="hljs-title function_">func</span><span class="hljs-params">()</span> final
	{
		<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"A"</span> &lt;&lt; <span class="hljs-built_in">endl</span>;
	}
};

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">B</span> :</span> public A
{
public:
	virtual <span class="hljs-type">void</span> <span class="hljs-title function_">func</span><span class="hljs-params">()</span><span class="hljs-comment">//å‡ºé”™ï¼Œä¸å…è®¸é‡å†™</span>
	{
		<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"B"</span> &lt;&lt; <span class="hljs-built_in">endl</span>;
	}
};
</code></pre>
<p>ä¾‹å­ï¼šå®ç°ä¸€ä¸ªç±»ï¼Œè®©è¿™ä¸ªç±»ä¸èƒ½è¢«ç»§æ‰¿</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-comment">//æ³•ä¸€ï¼šå°†æ„é€ å‡½æ•°ç§æœ‰åŒ–</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">A</span>
{</span>
public:
	<span class="hljs-type">int</span> _a;
private:<span class="hljs-comment">//å°†æ„é€ å‡½æ•°ç§æœ‰ï¼Œæ´¾ç”Ÿç±»çš„æ„é€ ï¼Œå¿…é¡»è°ƒç”¨åŸºç±»çš„æ„é€ ï¼Œè¿™é‡Œç»§æ‰¿è¿‡å»ä¸å¯è§ï¼Œæ— æ³•è°ƒç”¨</span>
	A(){}
};

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">B</span> :</span>public A
{
};

<span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span>
{
	B bb;
}
</code></pre>
<p><strong>finalï¼šä¿®é¥°ç±»ï¼Œè¿™ä¸ªç±»ä¸èƒ½è¢«ç»§æ‰¿</strong></p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-comment">//æ³•äºŒï¼šç±»ååŠ finalæˆä¸ºæœ€ç»ˆç±»</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">A</span> <span class="hljs-keyword">final</span>//åŠ <span class="hljs-keyword">final</span>å…³é”®å­—ï¼Œ<span class="hljs-keyword">final</span>ä¿®é¥°çš„ç±»ä¸ºæœ€ç»ˆç±»ï¼Œä¸èƒ½è¢«ç»§æ‰¿
{</span>
public:
	<span class="hljs-type">int</span> _a;
};
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">B</span> :</span> public A<span class="hljs-comment">//å‡ºé”™</span>
{

};
</code></pre>
<p>overrideï¼šæ£€æŸ¥æ´¾ç”Ÿç±»è™šå‡½æ•°æ˜¯å¦é‡å†™äº†åŸºç±»çš„æŸä¸ªè™šå‡½æ•°ï¼Œå¦‚æœæ²¡æœ‰é‡å†™ç¼–è¯‘æŠ¥é”™</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">A</span>
{</span>
public:
	virtual <span class="hljs-type">void</span> <span class="hljs-title function_">func</span><span class="hljs-params">()</span>
	{
		<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"A"</span> &lt;&lt; <span class="hljs-built_in">endl</span>;
	}
};

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">B</span> :</span> public A
{
public:
	virtual <span class="hljs-type">void</span> <span class="hljs-title function_">func</span><span class="hljs-params">()</span> override<span class="hljs-comment">//åŠ åœ¨æ´¾ç”Ÿç±»çš„æŸä¸ªè™šå‡½æ•°</span>
	{
		<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"B"</span> &lt;&lt; <span class="hljs-built_in">endl</span>;
	}
};
</code></pre>
<h2 data-id="heading-8">æŠ½è±¡ç±»</h2>
<p>æ¦‚å¿µ
åœ¨<strong>è™šå‡½æ•°åé¢å†™ä¸Š = 0</strong>ï¼Œåˆ™è¿™ä¸ªå‡½æ•°ä¸º<strong>çº¯è™šå‡½æ•°</strong>ã€‚
åŒ…å«çº¯è™šå‡½æ•°çš„ç±»å«åš<strong>æŠ½è±¡ç±»</strong>ï¼ˆä¹Ÿå«åš<strong>æ¥å£ç±»</strong>ï¼‰ï¼Œ<strong>æŠ½è±¡ç±»ä¸èƒ½å®ä¾‹åŒ–å‡ºå¯¹è±¡</strong>ã€‚æ´¾ç”Ÿç±»ç»§æ‰¿åä¹Ÿä¸èƒ½å®ä¾‹åŒ–å‡ºå¯¹è±¡ï¼Œåªæœ‰é‡å†™çº¯è™šå‡½æ•°ï¼Œæ´¾ç”Ÿç±»æ‰èƒ½å®ä¾‹åŒ–å‡ºå¯¹è±¡ã€‚
ä¾‹å­ï¼šæŠ½è±¡ç±»ä¸èƒ½å®ä¾‹åŒ–</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Car</span>//æŠ½è±¡ç±»
{</span>
public:
	virtual <span class="hljs-type">void</span> <span class="hljs-title function_">Drive</span><span class="hljs-params">()</span> = <span class="hljs-number">0</span>;<span class="hljs-comment">//çº¯è™šå‡½æ•°</span>
};

<span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span>
{
	Car c;<span class="hljs-comment">//å‡ºé”™</span>
	<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<p>ä¾‹å­ï¼šæŠ½è±¡ç±»çš„ä¸€ç§ä½¿ç”¨æ–¹å¼</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Car</span>//æŠ½è±¡ç±»
{</span>
public:
	virtual <span class="hljs-type">void</span> <span class="hljs-title function_">Drive</span><span class="hljs-params">()</span> = <span class="hljs-number">0</span>;<span class="hljs-comment">//çº¯è™šå‡½æ•°</span>
};
<span class="hljs-comment">//é—´æ¥å¼ºåˆ¶äº†å­ç±»é‡å†™è™šå‡½æ•°ï¼Œå› ä¸ºä¸é‡å†™çš„è¯ï¼Œå­ç±»ä¾æ—§æ˜¯æŠ½è±¡ç±»ï¼Œä¸èƒ½å®ä¾‹åŒ–å‡ºå¯¹è±¡</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Benz</span> :</span>public Car
{
public:
	virtual <span class="hljs-type">void</span> <span class="hljs-title function_">Drive</span><span class="hljs-params">()</span>
	{
		<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"Benz-èˆ’é€‚"</span> &lt;&lt; <span class="hljs-built_in">endl</span>;
	}
};
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">BMW</span> :</span>public Car
{
public:
	virtual <span class="hljs-type">void</span> <span class="hljs-title function_">Drive</span><span class="hljs-params">()</span>
	{
		<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"BMW-æ“æ§"</span> &lt;&lt; <span class="hljs-built_in">endl</span>;
	}
};
<span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span>
{
	<span class="hljs-comment">//Car* a = new Benz;æ™®é€šè°ƒç”¨</span>
	<span class="hljs-comment">//a-&gt;Drive();</span>
	<span class="hljs-comment">//Car* b = new BMW;æ™®é€šè°ƒç”¨</span>
	<span class="hljs-comment">//b-&gt;Drive();</span>
	Car* a = new Benz;<span class="hljs-comment">//å¤šæ€è°ƒç”¨</span>
	a-&gt;Drive();
	Car* b = new BMW;<span class="hljs-comment">//å¤šæ€è°ƒç”¨</span>
	b-&gt;Drive();
	<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<p>ç»“æœï¼šæ™®é€šè°ƒç”¨ä¸å¤šæ€è°ƒç”¨çš„ç»“æœä¸€æ ·ï¼ˆæ³¨ï¼‰
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/817eac374e1c4cb887095dfdb92b5926~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5qmY5a2QMTM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767461062&amp;x-signature=4Pw5iI8BUf5dL04%2F760uz1Ka%2FPM%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h3 data-id="heading-9">å…³äºæ¥å£ç»§æ‰¿å’Œå®ç°ç»§æ‰¿</h3>
<p><strong>æ™®é€šå‡½æ•°çš„ç»§æ‰¿æ˜¯ä¸€ç§å®ç°ç»§æ‰¿</strong>ï¼šæ´¾ç”Ÿç±»ç»§æ‰¿äº†åŸºç±»å‡½æ•°ï¼Œå¯ä»¥ä½¿ç”¨å‡½æ•°ï¼Œç»§æ‰¿çš„æ˜¯å‡½æ•°çš„å®ç°ã€‚
<strong>è™šå‡½æ•°çš„ç»§æ‰¿æ˜¯ä¸€ç§æ¥å£ç»§æ‰¿</strong>ï¼šæ´¾ç”Ÿç±»ç»§æ‰¿çš„æ˜¯åŸºç±»å‡½æ•°çš„æ¥å£ï¼Œç›®çš„æ˜¯é‡å†™ï¼Œè¾¾æˆå¤šæ€ï¼Œç»§æ‰¿çš„æ˜¯æ¥å£ã€‚</p>
<h2 data-id="heading-10">å¤šæ€çš„åŸç†</h2>
<blockquote>
<p><strong>å›é¡¾ç»“æ„ä½“å†…å­˜å¯¹é½è§„åˆ™</strong>
<strong>è§„åˆ™ 1ï¼šæˆå‘˜çš„åç§»é‡è§„åˆ™</strong> ç»“æ„ä½“ä¸­æ¯ä¸ªæˆå‘˜çš„ã€Œ<strong>åç§»é‡</strong>ã€ï¼ˆç›¸å¯¹äºç»“æ„ä½“èµ·å§‹åœ°å€çš„å­—èŠ‚æ•°ï¼‰ï¼Œå¿…é¡»æ˜¯è¯¥æˆå‘˜ã€Œ<strong>è‡ªèº«å¤§å°</strong>ã€çš„æ•´æ•°å€ã€‚å¦‚æœä¸å¤Ÿï¼Œç¼–è¯‘å™¨ä¼šåœ¨è¯¥æˆå‘˜å‰å¡«å……ã€Œç©ºå­—èŠ‚ã€ã€‚
<strong>è§„åˆ™ 2ï¼šæ•´ä½“å¤§å°è§„åˆ™</strong> ç»“æ„ä½“çš„æ€»å¤§å°ï¼Œå¿…é¡»æ˜¯ç»“æ„ä½“ã€Œ<strong>æœ€å¤§å¯¹é½æ•°</strong>ã€çš„æ•´æ•°å€ã€‚
<strong>ã€Œæœ€å¤§å¯¹é½æ•°ã€= ç»“æ„ä½“ä¸­æ‰€æœ‰æˆå‘˜çš„è‡ªèº«å¤§å°çš„æœ€å¤§å€¼ï¼ˆæ¯”å¦‚åŒ…å«charå’Œintï¼Œæœ€å¤§å¯¹é½æ•° = 4ï¼‰</strong>ï¼›
<strong>è§„åˆ™ 3ï¼šåµŒå¥—ç»“æ„ä½“è§„åˆ™</strong> å¦‚æœç»“æ„ä½“åµŒå¥—äº†å¦ä¸€ä¸ªç»“æ„ä½“ï¼ŒåµŒå¥—çš„ç»“æ„ä½“çš„åç§»é‡ï¼Œå¿…é¡»æ˜¯ã€ŒåµŒå¥—ç»“æ„ä½“çš„æœ€å¤§å¯¹é½æ•°ã€çš„æ•´æ•°å€ï¼›æœ€ç»ˆæ•´ä½“å¤§å°ä»éµå¾ªè§„åˆ™ 2ã€‚</p>
</blockquote>
<pre><code class="hljs language-c" lang="c"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Base</span>
{</span>
public:
	virtual <span class="hljs-type">void</span> <span class="hljs-title function_">Func1</span><span class="hljs-params">()</span>
	{
		<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"Func1()"</span> &lt;&lt; <span class="hljs-built_in">endl</span>;
	}
private:
	<span class="hljs-type">int</span> _b = <span class="hljs-number">1</span>;
};

<span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span>
{
	<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-keyword">sizeof</span>(Base) &lt;&lt; <span class="hljs-built_in">endl</span>;
	<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<p>é€šå¸¸æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬è®¤ä¸ºè¿™ä¸ªç±»å®ä¾‹åŒ–åçš„å¤§å°ä¸º4å­—èŠ‚ï¼ˆæˆå‘˜å‡½æ•°åœ¨å…¬å…±ä»£ç åŒºï¼Œä¸è®¡ç®—å¤§å°ï¼‰ã€‚
ä½†æ˜¯ç»“æœä¸ºï¼š
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/907c1100a42a409d934dc47cc6f37e6a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5qmY5a2QMTM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767461062&amp;x-signature=VxfKke0up5eacSGKr2gHFHFXGCw%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>â€‹å®é™…ä¸Šæœ‰äº†è™šå‡½æ•°ä»¥åï¼Œå¯¹è±¡é‡Œé¢ä¼šå¤šä¸€ä¸ªæŒ‡é’ˆã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d311c09f136b42b4b4e5423d340cc085~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5qmY5a2QMTM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767461062&amp;x-signature=aZcC3%2FdHb1qmXYMyi46Mw%2BfOqQQ%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
åœ¨çœ‹ä¸€ä¸ªç¨å¾®å¤æ‚ä¾‹å­</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Base</span>
{</span>
public:
	virtual <span class="hljs-type">void</span> <span class="hljs-title function_">Func1</span><span class="hljs-params">()</span>
	{
		<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"Func1()"</span> &lt;&lt; <span class="hljs-built_in">endl</span>;
	}
	virtual <span class="hljs-type">void</span> <span class="hljs-title function_">Func2</span><span class="hljs-params">()</span>
	{
		<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"Func2()"</span> &lt;&lt; <span class="hljs-built_in">endl</span>;
	}
	<span class="hljs-type">void</span> <span class="hljs-title function_">Func3</span><span class="hljs-params">()</span>
	{
		<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"Func3()"</span> &lt;&lt; <span class="hljs-built_in">endl</span>;
	}
private:
	<span class="hljs-type">int</span> _b = <span class="hljs-number">1</span>;
	<span class="hljs-type">char</span> _ch = <span class="hljs-string">'a'</span>;
};
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Derive</span> :</span> public Base
{
public:
	virtual <span class="hljs-type">void</span> <span class="hljs-title function_">Func1</span><span class="hljs-params">()</span>
	{
		<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"Derive::Func1()"</span> &lt;&lt; <span class="hljs-built_in">endl</span>;
	}
private:
	<span class="hljs-type">int</span> _d = <span class="hljs-number">2</span>;
};
<span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span>
{
	<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-keyword">sizeof</span>(Base) &lt;&lt; <span class="hljs-built_in">endl</span>;
	Base bb;

	<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-keyword">sizeof</span>(Derive) &lt;&lt; <span class="hljs-built_in">endl</span>;
	Derive dd;
	<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<p>ç»“æœï¼š
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2ce56a0c94c6434194ccaac44f077385~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5qmY5a2QMTM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767461062&amp;x-signature=IV6w4GXx49304a7XFJltuDmEjNE%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>å¯¹äºåŸºç±»:
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1233ae3d6fac41eeb089fdfec2788ac7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5qmY5a2QMTM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767461062&amp;x-signature=OZ%2BYP9HIIf4QovhqOChDDJgF3cs%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>åœ¨Baseç±»ä¸­ï¼Œ<strong>æœ‰ä¸‰ä¸ªå‡½æ•°ï¼šå…¶ä¸­ä¸¤ä¸ªå‡½æ•°æ˜¯è™šå‡½æ•°ï¼Œå¦ä¸€ä¸ªå‡½æ•°æ˜¯æ™®é€šçš„æˆå‘˜å‡½æ•°</strong>ï¼Œæ™®é€šæˆå‘˜å‡½æ•°åœ¨å…¬å…±ä»£ç åŒºä¸ç”¨ç®¡ï¼Œå¦å¤–çš„ä¸¤ä¸ªè™šå‡½æ•°çš„åœ°å€å®é™…ä¸Šè¢«å‚¨å­˜åœ¨ä¸€ä¸ªè™šå‡½æ•°è¡¨ä¸­ï¼Œç”±è™šå‡½æ•°è¡¨çš„æŒ‡é’ˆæŒ‡å‘ï¼Œå®é™…ä¸Šbbè¿™ä¸ªå¯¹è±¡ä¸­ä»…ä»…åŒ…å«è¿™ä¸ªè™šå‡½æ•°è¡¨çš„æŒ‡é’ˆã€‚</p>
<p><strong>æ³¨æ„</strong>ï¼šä»–ä»¬è™šå‡½æ•°è¡¨ä¸­çš„è™šå‡½æ•°çš„é¡ºåºæ˜¯ç±»ä¸­è™šå‡½æ•°å£°æ˜çš„é¡ºåºã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5e8b413aaf0a4b5987ec67c5fbc7a27a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5qmY5a2QMTM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767461062&amp;x-signature=GDZuk9L2SoT9CLBlNOnHiAzLo2Q%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<blockquote>
<p>æ­¤å¤–é¢å¤–å®ä¾‹åŒ–å¯¹è±¡çš„è™šè¡¨æŒ‡é’ˆå®é™…ä¸Šéƒ½æŒ‡å‘<strong>åŒä¸€ä¸ªè™šè¡¨çš„èµ·å§‹åœ°å€ã€‚</strong></p>
<p><code>Base b1; Base b2; Base b3; </code></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0fcf3c6c152448beb3179028c9d73fe6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5qmY5a2QMTM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767461062&amp;x-signature=53m1HVkXrkkkCKs2VU0sEt9x5gQ%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
</blockquote>
<p>å¯¹äºæ´¾ç”Ÿç±»ï¼š
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/57920b34353c42e3957e2b20cfdad8a2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5qmY5a2QMTM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767461062&amp;x-signature=%2BNoawUJU37cB323isY69bOZK9dA%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>åœ¨Derive ç±»ä¸­ï¼Œå°†func1è¿›è¡Œäº†é‡å†™ï¼Œfunc2æ²¡æœ‰ç®¡ï¼Œå®é™…ä¸Šåœ¨è™šå‡½æ•°è¡¨ä¸­ï¼Œ[0]è¢«é‡å†™ï¼ˆè¢«â€œè¦†ç›–â€æ›´è´´åˆ‡ï¼‰ä¸ºDerive::Func1()ï¼Œ[1]è¿˜æ˜¯åŸæ¥çš„Base::Func2()æ²¡æœ‰åŠ¨ã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/90eed6e9c0f2421cadaa04c57bf916be~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5qmY5a2QMTM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767461062&amp;x-signature=fue8IlR9Gw%2BmXTu9t%2FNmHNMIJFU%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5c21273288ff4c1e95290515720f7afa~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5qmY5a2QMTM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767461062&amp;x-signature=Ginjn7ewDZCUEzhpo3BmCldshDc%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<blockquote>
<p><strong>è™šå‡½æ•°çš„é‡å†™ä¹Ÿå«åšè¦†ç›–</strong>ï¼š<strong>é‡å†™</strong>æ˜¯<strong>è¯­æ³•å±‚</strong>çš„æ¦‚å¿µ <strong>è¦†ç›–</strong>æ˜¯<strong>åŸç†å±‚</strong>çš„æ¦‚å¿µ</p>
</blockquote>
<p>ä»å†…å­˜è§†è§’ä¸‹
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5ce35ad322204291b8a8aeb89f94d8b9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5qmY5a2QMTM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767461062&amp;x-signature=uhrvl0DNawzoMlOIopD%2B2L9K2dw%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h3 data-id="heading-11">æ¢ç©¶å¤šæ€è°ƒç”¨çš„åº•å±‚</h3>
<p>ä¾‹å­ï¼šä¸€æ®µå¤šæ€è°ƒç”¨çš„ä»£ç </p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Base</span>
{</span>
public:
	virtual <span class="hljs-type">void</span> <span class="hljs-title function_">Func1</span><span class="hljs-params">()</span>
	{
		<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"Base::Func1()"</span> &lt;&lt; <span class="hljs-built_in">endl</span>;
	}
	virtual <span class="hljs-type">void</span> <span class="hljs-title function_">Func2</span><span class="hljs-params">()</span>
	{
		<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"Base::Func2()"</span> &lt;&lt; <span class="hljs-built_in">endl</span>;
	}
	<span class="hljs-type">void</span> <span class="hljs-title function_">Func3</span><span class="hljs-params">()</span>
	{
		<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"Base::Func3()"</span> &lt;&lt; <span class="hljs-built_in">endl</span>;
	}
private:
	<span class="hljs-type">int</span> _b = <span class="hljs-number">1</span>;
	<span class="hljs-type">char</span> _ch = <span class="hljs-string">'a'</span>;
};
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Derive</span> :</span> public Base
{
public:
	virtual <span class="hljs-type">void</span> <span class="hljs-title function_">Func1</span><span class="hljs-params">()</span>
	{
		<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"Derive::Func1()"</span> &lt;&lt; <span class="hljs-built_in">endl</span>;
	}
private:
	<span class="hljs-type">int</span> _d = <span class="hljs-number">2</span>;
};

<span class="hljs-type">void</span> <span class="hljs-title function_">f</span><span class="hljs-params">(Base* ptr)</span>
{
	ptr-&gt;Func1();<span class="hljs-comment">//å¤šæ€è°ƒç”¨</span>
}
<span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span>
{
	<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-keyword">sizeof</span>(Base) &lt;&lt; <span class="hljs-built_in">endl</span>;
	Base bb;

	<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-keyword">sizeof</span>(Derive) &lt;&lt; <span class="hljs-built_in">endl</span>;
	Derive dd;

	f(&amp;bb);
	f(&amp;dd);
	<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<p>ç»“æœï¼š
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f0e40fcae65a4bdbbc9d859e358edb41~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5qmY5a2QMTM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767461062&amp;x-signature=E9eBsnAGJrohg7HjtZ767Vr2a28%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p><strong>æƒ…å†µ 1ï¼š</strong><code>Base* ptr = &amp;bb</code><strong>ï¼ˆæŒ‡é’ˆæŒ‡å‘çˆ¶ç±»å¯¹è±¡ bbï¼‰</strong></p>
<ol>
<li>ptrå˜é‡é‡Œå­˜çš„æ˜¯<strong>bbå¯¹è±¡ï¼ˆçˆ¶ç±»Baseï¼‰çš„é¦–åœ°å€</strong>ï¼›</li>
<li>bbå¯¹è±¡çš„å†…å­˜å¸ƒå±€é‡Œï¼Œç¬¬ä¸€ä¸ªæˆå‘˜å°±æ˜¯_vfptrï¼ˆè™šè¡¨æŒ‡é’ˆï¼‰â€”â€” <strong>è¿™ä¸ªæŒ‡é’ˆæ˜¯bbä¸“å±çš„ï¼Œå®ƒåªæŒ‡å‘ Base ç±»çš„è™šå‡½æ•°è¡¨</strong>ï¼ˆBase è™šè¡¨çš„ [0] æ˜¯Base::Func1()çš„åœ°å€ï¼‰ï¼›</li>
<li>æ‰§è¡Œptr-&gt;Func1()æ—¶ï¼ŒæŒ‰å›¾é‡Œçš„æ±‡ç¼–æ­¥éª¤ï¼š</li>
</ol>
<ul>
<li>å…ˆä»ptré‡Œå–å‡ºbbçš„é¦–åœ°å€ï¼ˆä¹Ÿå°±æ˜¯_vfptrçš„åœ°å€ï¼‰ï¼›</li>
<li>å†é€šè¿‡_vfptræ‰¾åˆ° Base ç±»çš„è™šè¡¨ï¼›</li>
<li>ä»è™šè¡¨ç¬¬ 0 é¡¹å–å‡ºBase::Func1()çš„åœ°å€ï¼›</li>
<li>æœ€åè°ƒç”¨è¿™ä¸ªåœ°å€çš„å‡½æ•°â†’ æ‰€ä»¥æœ€ç»ˆè°ƒç”¨çš„æ˜¯çˆ¶ç±»çš„è™šå‡½æ•°ã€‚</li>
</ul>
<p><strong>æƒ…å†µ 2ï¼š</strong><code>Base* ptr = &amp;dd</code><strong>ï¼ˆæŒ‡é’ˆæŒ‡å‘å­ç±»å¯¹è±¡ ddï¼‰</strong></p>
<ol>
<li>ptrå˜é‡é‡Œå­˜çš„æ˜¯<strong>ddå¯¹è±¡ï¼ˆæ´¾ç”Ÿç±»Deriveï¼‰çš„é¦–åœ°å€</strong>ï¼ˆ<strong>è™½ç„¶ptrçš„ç±»å‹æ˜¯ Base*ï¼Œä½†å®ƒå®é™…æŒ‡å‘çš„æ˜¯ dd çš„å†…å­˜</strong>ï¼‰ï¼›</li>
<li>ddå¯¹è±¡çš„å†…å­˜å¸ƒå±€é‡Œï¼Œç¬¬ä¸€ä¸ªæˆå‘˜ä¹Ÿæ˜¯_vfptrï¼Œä½†<strong>è¿™ä¸ª_vfptræ˜¯ddä¸“å±çš„ â€”â€” å®ƒæŒ‡å‘ Derive ç±»çš„è™šå‡½æ•°è¡¨</strong>ï¼ˆDerive è™šè¡¨çš„ [0] æ˜¯Derive::Func1()çš„åœ°å€ï¼Œå› ä¸ºå­ç±»é‡å†™äº† Func1ï¼Œè¦†ç›–äº†è™šè¡¨çš„è¿™ä¸€é¡¹ï¼‰ï¼›</li>
<li>æ‰§è¡Œptr-&gt;Func1()æ—¶ï¼Œæ±‡ç¼–æ­¥éª¤å’Œä¸Šé¢å®Œå…¨ä¸€æ ·ï¼ˆå› ä¸ºæŒ‡é’ˆç±»å‹è¿˜æ˜¯ Base*ï¼‰ï¼Œä½†å¯»å€çš„ç›®æ ‡å˜äº†ï¼š</li>
</ol>
<ul>
<li>ä»ptré‡Œå–å‡ºddçš„é¦–åœ°å€ï¼ˆä¹Ÿå°±æ˜¯ddçš„_vfptråœ°å€ï¼‰ï¼›</li>
<li>é€šè¿‡ddçš„_vfptræ‰¾åˆ° Derive ç±»çš„è™šè¡¨ï¼›</li>
<li>ä»è™šè¡¨ç¬¬ 0 é¡¹å–å‡ºDerive::Func1()çš„åœ°å€ï¼›</li>
<li>æœ€åè°ƒç”¨è¿™ä¸ªåœ°å€çš„å‡½æ•°â†’ æ‰€ä»¥æœ€ç»ˆè°ƒç”¨çš„æ˜¯å­ç±»çš„è™šå‡½æ•°ã€‚</li>
</ul>
<p><strong>å¤šæ€è°ƒç”¨</strong>ï¼šè¿è¡Œæ—¶åŒºè™šå‡½æ•°è¡¨ä¸­æ‰¾å‡½æ•°çš„åœ°å€ï¼Œè¿›è¡Œè°ƒç”¨ï¼Œæ‰€ä»¥æŒ‡å‘çˆ¶ç±»è°ƒçš„æ˜¯çˆ¶ç±»è™šå‡½æ•°ï¼ŒæŒ‡å‘å­ç±»è°ƒç”¨çš„æ˜¯å­ç±»çš„è™šå‡½æ•°ã€‚</p>
<p>å¦‚ä¸‹å°±æ˜¯å¤šæ€è°ƒç”¨çš„åº•å±‚åŸç†
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a84d0a1b1ad34a03a07079ccb003c623~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5qmY5a2QMTM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767461062&amp;x-signature=SMz7WmI8jk7oAUtJQN5vZOAsPyQ%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h3 data-id="heading-12">å…³äºè™šå‡½æ•°è¡¨ä¸è™šå‡½æ•°çš„ä¸€äº›é—®é¢˜</h3>
<h4 data-id="heading-13"><strong>è™šå‡½æ•°è¡¨æ˜¯å­˜åœ¨å“ªä¸ªåŒºåŸŸï¼Ÿ</strong></h4>
<p>å¦‚ä¸‹ä»£ç è¿›è¡ŒéªŒè¯</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Base</span>
{</span>
public:
	virtual <span class="hljs-type">void</span> <span class="hljs-title function_">Func1</span><span class="hljs-params">()</span>
	{
		<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"Base::Func1()"</span> &lt;&lt; <span class="hljs-built_in">endl</span>;
	}
	virtual <span class="hljs-type">void</span> <span class="hljs-title function_">Func2</span><span class="hljs-params">()</span>
	{
		<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"Base::Func2()"</span> &lt;&lt; <span class="hljs-built_in">endl</span>;
	}
	<span class="hljs-type">void</span> <span class="hljs-title function_">Func3</span><span class="hljs-params">()</span>
	{
		<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"Base::Func3()"</span> &lt;&lt; <span class="hljs-built_in">endl</span>;
	}
private:
	<span class="hljs-type">int</span> _b = <span class="hljs-number">1</span>;
};
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Derive</span> :</span> public Base
{
public:
	virtual <span class="hljs-type">void</span> <span class="hljs-title function_">Func1</span><span class="hljs-params">()</span>
	{
		<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"Derive::Func1()"</span> &lt;&lt; <span class="hljs-built_in">endl</span>;
	}
private:
	<span class="hljs-type">int</span> _d = <span class="hljs-number">2</span>;
};

<span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span>
{
	Base bb;
	Derive dd;

	<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>;
	<span class="hljs-type">static</span> <span class="hljs-type">int</span> j = <span class="hljs-number">1</span>;
	<span class="hljs-type">int</span>* p1 = new <span class="hljs-type">int</span>;
	<span class="hljs-type">const</span> <span class="hljs-type">char</span>* p2 = <span class="hljs-string">"xxxx"</span>;
	<span class="hljs-built_in">printf</span>(<span class="hljs-string">"æ ˆï¼š%p\n"</span>, &amp;i);
	<span class="hljs-built_in">printf</span>(<span class="hljs-string">"é™æ€åŒºï¼š%p\n"</span>, &amp;j);
	<span class="hljs-built_in">printf</span>(<span class="hljs-string">"å †ï¼š%p\n"</span>, p1);
	<span class="hljs-built_in">printf</span>(<span class="hljs-string">"å¸¸é‡åŒºï¼š%p\n"</span>, p2);

	Base* p3 = &amp;bb;
	Derive* p4 = &amp;dd;
	<span class="hljs-built_in">printf</span>(<span class="hljs-string">"Baseè™šè¡¨åœ°å€ï¼š%p\n"</span>, *(<span class="hljs-type">int</span>*)p3);<span class="hljs-comment">//å–åˆ°è™šè¡¨æŒ‡é’ˆå¤´å››ä¸ªå­—èŠ‚</span>
	<span class="hljs-built_in">printf</span>(<span class="hljs-string">"Deriveè™šè¡¨åœ°å€ï¼š%p\n"</span>, *(<span class="hljs-type">int</span>*)p4);
	<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/511895a1ae6c46d495127f0e5ba9bfcb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5qmY5a2QMTM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767461062&amp;x-signature=LN1WUSeNL%2FaLPVTc5%2FxpM%2FCul7Y%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
<strong>è™šè¡¨åœ¨å¸¸é‡åŒºå­˜å‚¨ã€‚</strong></p>
<h4 data-id="heading-14"><strong>è™šè¡¨åœ¨ä»€ä¹ˆé˜¶æ®µç”Ÿæˆçš„</strong>ï¼Ÿ</h4>
<p>ç¼–è¯‘çš„æ—¶å€™</p>
<h4 data-id="heading-15"><strong>è™šè¡¨æŒ‡é’ˆä»€ä¹ˆæ—¶å€™åˆå§‹åŒ–çš„</strong>ï¼Ÿ</h4>
<p>æ„é€ å‡½æ•°æ„é€ æ—¶ï¼Œåœ¨å…¶ä»–æˆå‘˜å˜é‡åˆå§‹åŒ–ä¹‹å‰ï¼Œè™šè¡¨æŒ‡é’ˆå°±åˆå§‹åŒ–å¥½äº†ã€‚</p>
<p>æ³¨æ„ï¼šè™šå‡½æ•°è¡¨ä¸­åªæ˜¯å­˜å‚¨è™šå‡½æ•°çš„æŒ‡é’ˆï¼Œè€Œ<strong>è™šå‡½æ•°çš„å®ç°åœ¨ä»£ç æ®µã€‚</strong></p>
<h3 data-id="heading-16">å¤šç»§æ‰¿ä¸‹çš„ç±»åº•å±‚ç»“æ„ï¼ˆå«è™šå‡½æ•°ï¼‰</h3>
<pre><code class="hljs language-c" lang="c"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Base1</span>
{</span>
public:
	virtual <span class="hljs-type">void</span> <span class="hljs-title function_">func1</span><span class="hljs-params">()</span> { <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"Base1::func1"</span> &lt;&lt; <span class="hljs-built_in">endl</span>; }
	virtual <span class="hljs-type">void</span> <span class="hljs-title function_">func2</span><span class="hljs-params">()</span> { <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"Base1::func2"</span> &lt;&lt; <span class="hljs-built_in">endl</span>; }
private:
	<span class="hljs-type">int</span> b1;
};

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Base2</span>
{</span>
public:
	virtual <span class="hljs-type">void</span> <span class="hljs-title function_">func1</span><span class="hljs-params">()</span> { <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"Base2::func1"</span> &lt;&lt; <span class="hljs-built_in">endl</span>; }
	virtual <span class="hljs-type">void</span> <span class="hljs-title function_">func2</span><span class="hljs-params">()</span> { <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"Base2::func2"</span> &lt;&lt; <span class="hljs-built_in">endl</span>; }
private:
	<span class="hljs-type">int</span> b2;
};

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Derive</span> :</span> public Base1, public Base2
{
public:
	virtual <span class="hljs-type">void</span> <span class="hljs-title function_">func1</span><span class="hljs-params">()</span> { <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"Derive::func1"</span> &lt;&lt; <span class="hljs-built_in">endl</span>; }
	virtual <span class="hljs-type">void</span> <span class="hljs-title function_">func2</span><span class="hljs-params">()</span> { <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"Derive::func2"</span> &lt;&lt; <span class="hljs-built_in">endl</span>; }
private:
	<span class="hljs-type">int</span> d1;
};

<span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span>
{
	<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-keyword">sizeof</span>(Derive) &lt;&lt; <span class="hljs-built_in">endl</span>;
}
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6b9b763ab9f640efa24c6880d737960d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5qmY5a2QMTM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767461062&amp;x-signature=RonVB8zFwpvJBk40K5cRZIybWTM%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
Base1ä¸­æœ‰ä¸€ä¸ªè™šå‡½æ•°æŒ‡é’ˆå’Œintæˆå‘˜å˜é‡ï¼Œå…±8å­—èŠ‚
Base2ä¸­æœ‰ä¸€ä¸ªè™šå‡½æ•°æŒ‡é’ˆå’Œintæˆå‘˜å˜é‡ï¼Œå…±8å­—èŠ‚
æ‰€ä»¥Deriveä¸­æœ‰è‡ªèº«çš„ä¸€ä¸ªintæˆå‘˜å˜é‡d1ï¼Œå’Œç»§æ‰¿ä¸‹æ¥çš„Base1ä¸Base2å¯¹è±¡ï¼Œå…±4+8+8=20å­—èŠ‚ã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/994d6a27db3342cca3eaf6fe557dcb73~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5qmY5a2QMTM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767461062&amp;x-signature=z2QYt9txXyxOj1wL8WAIqbKZX7M%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p><strong>å®é™…ä¸ŠDeriveä¸­æœ‰ä¸¤ä¸ªä¸åŒçš„è™šè¡¨æŒ‡é’ˆï¼ŒæŒ‡å‘ä¸¤ä¸ªä¸åŒçš„è™šè¡¨ã€‚</strong>
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f49b9cc0f4c3451a9e265f3f122df9b7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5qmY5a2QMTM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767461062&amp;x-signature=khbBpQaaDzjXXQnrG7si4Kd6QXs%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
åœ¨ä»£ç ä¸­ï¼Œåœ¨Deriveç±»ä¸­ï¼Œæˆ‘ä»¬é‡å†™äº†func1å‡½æ•°ï¼Œå¦‚ä¸‹å¯ä»¥çœ‹å‡ºé‡å†™çš„Derive::func1()è¦†ç›–äº†Base1ä¸Base2çš„è™šè¡¨ä¸­func1()ã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/89cb58bf76ea4d689f4494f2d555479a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5qmY5a2QMTM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767461062&amp;x-signature=kuoZ7EPRAEtQzDTcYBm1oY%2BEp40%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>é‚£ä¹ˆåœ¨ç±»Deriveä¸­ï¼Œä¸æ˜¯é‡å†™çš„è™šå‡½æ•°func3()æ”¾åœ¨å“ªé‡Œäº†ï¼Ÿ
<strong>æ”¾åœ¨ç»§æ‰¿çš„ç¬¬ä¸€ä¸ªç±»Base1çš„è™šè¡¨çš„æœ€åï¼ˆåœ¨è±å½¢ç»§æ‰¿ä¸­ä¹Ÿæœ‰ä¾‹å­ä½“ç°ï¼‰</strong>ï¼ŒéªŒè¯å¦‚ä¸‹ã€‚</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-keyword">typedef</span> <span class="hljs-title function_">void</span><span class="hljs-params">(*VF_PTR)</span><span class="hljs-params">()</span>;

<span class="hljs-comment">//æ‰“å°è™šè¡¨ï¼Œæœ¬è´¨æ‰“å°æŒ‡é’ˆï¼ˆè™šå‡½æ•°æŒ‡é’ˆï¼‰æ•°ç»„</span>
<span class="hljs-type">void</span> <span class="hljs-title function_">PrintVFT</span><span class="hljs-params">(VF_PTR vft[])</span>
{
	<span class="hljs-keyword">for</span> (<span class="hljs-type">size_t</span> i = <span class="hljs-number">0</span>; vft[i] != nullptr; i++)
	{
		<span class="hljs-built_in">printf</span>(<span class="hljs-string">"[%d]:%p-&gt;"</span>, i, vft[i]);
		VF_PTR f = vft[i];
		f();
	}
}
<span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span>
{
	Derive d;

	Base1* ptr1 = &amp;d;
	Base2* ptr2 = &amp;d;
	<span class="hljs-built_in">printf</span>(<span class="hljs-string">"Base1è™šè¡¨åœ°å€ï¼š%p\n"</span>,ptr1);
	PrintVFT((VF_PTR*)(*(<span class="hljs-type">int</span>*)ptr1));
	<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-built_in">endl</span>;
	<span class="hljs-built_in">printf</span>(<span class="hljs-string">"Base2è™šè¡¨åœ°å€ï¼š%p\n"</span>, ptr2);
	PrintVFT((VF_PTR*)(*(<span class="hljs-type">int</span>*)ptr2));
}
</code></pre>
<blockquote>
<p><strong>æ™®é€šå¤šé‡ç»§æ‰¿ä¸­ï¼Œæ–°å¢è™šå‡½æ•°ä¼˜å…ˆæŒ‚åˆ°ç¬¬ä¸€ä¸ªç›´æ¥åŸºç±»çš„è™šè¡¨ï¼ˆå¦‚æœå®ƒæœ‰ vfptr è™šè¡¨æŒ‡é’ˆï¼‰ï¼Œä¸ç®¡æœ‰æ²¡æœ‰é‡å†™å…¶ä»–åŸºç±»çš„è™šå‡½æ•°ã€‚</strong></p>
</blockquote>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ba69322adfb34236820bca927bb90e48~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5qmY5a2QMTM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767461062&amp;x-signature=47OAh5IICPuq8vnnbCNNwOIGYkw%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>æ€»ç»“ï¼š
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a078e8b5774343b3912113556e1c6152~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5qmY5a2QMTM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767461062&amp;x-signature=WsCA26lhF5FOMh1tlQ255DVmRzQ%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h4 data-id="heading-17">è±å½¢ç»§æ‰¿ä¸‹çš„ç±»åº•å±‚ç»“æ„ï¼ˆå«è™šå‡½æ•°æƒ…å†µï¼‰</h4>
<p>ä¾‹å­1</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">A</span>
{</span>
public:
	virtual <span class="hljs-type">void</span> <span class="hljs-title function_">funca1</span><span class="hljs-params">()</span> { <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"A::funca1"</span> &lt;&lt; <span class="hljs-built_in">endl</span>; }
	virtual <span class="hljs-type">void</span> <span class="hljs-title function_">funca2</span><span class="hljs-params">()</span> { <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"A::funca2"</span> &lt;&lt; <span class="hljs-built_in">endl</span>; }
	virtual <span class="hljs-type">void</span> <span class="hljs-title function_">funca3</span><span class="hljs-params">()</span> { <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"A::funca3"</span> &lt;&lt; <span class="hljs-built_in">endl</span>; }
public:
	<span class="hljs-type">int</span> a;
};

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">B</span> :</span>virtual public A
{
public:
	<span class="hljs-type">int</span> b;
};

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">C</span> :</span>virtual public A
{
public:
	<span class="hljs-type">int</span> c;
};
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">D</span> :</span>public B, public C
{
public:
	<span class="hljs-type">int</span> d;
};

<span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span>
{
	D dd;
	dd.B::a = <span class="hljs-number">1</span>;
	dd.C::a = <span class="hljs-number">2</span>;
	dd.b = <span class="hljs-number">3</span>;
	dd.c = <span class="hljs-number">4</span>;
	dd.d = <span class="hljs-number">5</span>;
	<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<p>åˆ†æå¦‚ä¸‹ï¼š
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5b85ac0505084da3a5bf39e1125934d2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5qmY5a2QMTM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767461062&amp;x-signature=xkO8iat1CH8pn4tw8f9yuArmEZ4%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>ä¾‹å­2</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">A</span>
{</span>
public:
	virtual <span class="hljs-type">void</span> <span class="hljs-title function_">func1</span><span class="hljs-params">()</span> { <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"A::func1"</span> &lt;&lt; <span class="hljs-built_in">endl</span>; }
	virtual <span class="hljs-type">void</span> <span class="hljs-title function_">func2</span><span class="hljs-params">()</span> { <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"A::func2"</span> &lt;&lt; <span class="hljs-built_in">endl</span>; }
	virtual <span class="hljs-type">void</span> <span class="hljs-title function_">func3</span><span class="hljs-params">()</span> { <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"A::func3"</span> &lt;&lt; <span class="hljs-built_in">endl</span>; }
public:
	<span class="hljs-type">int</span> a;
};

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">B</span> :</span>virtual public A
{
public:
	virtual <span class="hljs-type">void</span> <span class="hljs-title function_">func1</span><span class="hljs-params">()</span> { <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"B::func1"</span> &lt;&lt; <span class="hljs-built_in">endl</span>; }
public:
	<span class="hljs-type">int</span> b;
};

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">C</span> :</span>virtual public A
{
public:
	virtual <span class="hljs-type">void</span> <span class="hljs-title function_">func2</span><span class="hljs-params">()</span> { <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"C::func2"</span> &lt;&lt; <span class="hljs-built_in">endl</span>; }
public:
	<span class="hljs-type">int</span> c;
};
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">D</span> :</span>public B, public C
{
public:
	virtual <span class="hljs-type">void</span> <span class="hljs-title function_">func1</span><span class="hljs-params">()</span> { <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"D::func1"</span> &lt;&lt; <span class="hljs-built_in">endl</span>; }
public:
	<span class="hljs-type">int</span> d;
};

<span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span>
{
	D dd;
	dd.a = <span class="hljs-number">1</span>;
	dd.b = <span class="hljs-number">2</span>;
	dd.c = <span class="hljs-number">3</span>;
	dd.d = <span class="hljs-number">4</span>;
	<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<p>å¦‚ä¸Šç±»Bå¯¹ç±»Açš„func1è¿›è¡Œäº†é‡å†™ï¼Œç±»Cå¯¹ç±»Açš„func2è¿›è¡Œäº†é‡å†™ï¼Œè€Œç±»Då¯¹ç±»Bçš„func1è¿›è¡Œäº†é‡å†™ã€‚
Bã€C åªæ˜¯é‡å†™äº† A çš„è™šå‡½æ•°ï¼ˆæ¯”å¦‚ B é‡å†™ A çš„ func1ï¼‰ï¼Œè¿™äº›é‡å†™çš„å‡½æ•°å¯ä»¥å…±äº«è™šåŸºç±» A çš„è™šå‡½æ•°è¡¨ï¼ˆå› ä¸º A çš„è™šè¡¨ä¼šè®°å½•æœ€ç»ˆè¦†ç›–åçš„å‡½æ•°åœ°å€ï¼‰ã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fee31c53760a4a0bbc2749ed0913d895~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5qmY5a2QMTM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767461062&amp;x-signature=Ve5jxkUU6qbPKDkC4cM9n1j61Q8%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>ä¾‹å­3</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">A</span>
{</span>
public:
	virtual <span class="hljs-type">void</span> <span class="hljs-title function_">func1</span><span class="hljs-params">()</span> { <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"A::func1"</span> &lt;&lt; <span class="hljs-built_in">endl</span>; }
	virtual <span class="hljs-type">void</span> <span class="hljs-title function_">func2</span><span class="hljs-params">()</span> { <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"A::func2"</span> &lt;&lt; <span class="hljs-built_in">endl</span>; }
	virtual <span class="hljs-type">void</span> <span class="hljs-title function_">func3</span><span class="hljs-params">()</span> { <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"A::func3"</span> &lt;&lt; <span class="hljs-built_in">endl</span>; }
public:
	<span class="hljs-type">int</span> a;
};

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">B</span> :</span>virtual public A
{
public:
	virtual <span class="hljs-type">void</span> <span class="hljs-title function_">func4</span><span class="hljs-params">()</span> { <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"B::func4"</span> &lt;&lt; <span class="hljs-built_in">endl</span>; }
	virtual <span class="hljs-type">void</span> <span class="hljs-title function_">func5</span><span class="hljs-params">()</span> { <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"B::func5"</span> &lt;&lt; <span class="hljs-built_in">endl</span>; }
public:
	<span class="hljs-type">int</span> b;
};

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">C</span> :</span>virtual public A
{
public:
	virtual <span class="hljs-type">void</span> <span class="hljs-title function_">func6</span><span class="hljs-params">()</span> { <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"C::func6"</span> &lt;&lt; <span class="hljs-built_in">endl</span>; }
	virtual <span class="hljs-type">void</span> <span class="hljs-title function_">func7</span><span class="hljs-params">()</span> { <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"C::func7"</span> &lt;&lt; <span class="hljs-built_in">endl</span>; }
public:
	<span class="hljs-type">int</span> c;
};
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">D</span> :</span>public B, public C
{
public:
	virtual <span class="hljs-type">void</span> <span class="hljs-title function_">func8</span><span class="hljs-params">()</span> { <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"D::func8"</span> &lt;&lt; <span class="hljs-built_in">endl</span>; }
	virtual <span class="hljs-type">void</span> <span class="hljs-title function_">func9</span><span class="hljs-params">()</span> { <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"D::func9"</span> &lt;&lt; <span class="hljs-built_in">endl</span>; }
public:
	<span class="hljs-type">int</span> d;
};

<span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span>
{
	D dd;
	dd.a = <span class="hljs-number">1</span>;
	dd.b = <span class="hljs-number">2</span>;
	dd.c = <span class="hljs-number">3</span>;
	dd.d = <span class="hljs-number">4</span>;
	<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<p>ç°åœ¨ç»™ B åŠ äº†func4ã€func5ï¼Œç»™ C åŠ äº†func6ã€func7â€”â€” è¿™äº›æ˜¯A æ²¡æœ‰çš„ç‹¬æœ‰çš„è™šå‡½æ•°ï¼Œæ— æ³•å­˜åˆ° A çš„è™šå‡½æ•°è¡¨é‡Œï¼Œæ‰€ä»¥ Bã€C å¿…é¡»å„è‡ªæœ‰ä¸€ä¸ªè‡ªå·±çš„è™šå‡½æ•°è¡¨æŒ‡é’ˆï¼ˆvfptrï¼‰ï¼ŒæŒ‡å‘è‡ªå·±çš„è™šå‡½æ•°è¡¨ï¼ˆç”¨æ¥å­˜è¿™äº›ç‹¬æœ‰çš„è™šå‡½æ•°åœ°å€ï¼‰ã€‚</p>
<p>å¦‚ä¸‹å›¾ï¼Œ<strong>ç±»ä¸­çš„ç»“æ„é¡ºåºä¸ºï¼šè™šå‡½æ•°è¡¨æŒ‡é’ˆï¼Œè™šæœºè¡¨æŒ‡é’ˆï¼Œç±»æˆå‘˜å˜é‡</strong></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9c678549cca44b5f860b36be0dc88390~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5qmY5a2QMTM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767461062&amp;x-signature=ROzOcnkyKP2R3oEErgStqODV57M%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
æ³¨æ„ï¼šè¿™é‡Œç±»Dï¼ˆæœ€ç»ˆç±»ï¼‰ä¸­æœ‰è™šå‡½æ•°ï¼Œä½†æ²¡æœ‰åƒç±»Bï¼Œç±»Cé‚£æ ·æ–°å¢ä¸€ä¸ªè™šå‡½æ•°è¡¨æŒ‡é’ˆå†™åˆ°æˆå‘˜å˜é‡çš„ä¸Šé¢ï¼Œè€Œæ˜¯æŠŠè¿™äº›è™šå‡½æ•°çš„åœ°å€éƒ½æ”¾åˆ°äº†ï¼Œç¬¬ä¸€ä¸ªç±»Bçš„è™šå‡½æ•°è¡¨ä¸­ã€‚</p>
<blockquote>
<p><strong>æ™®é€šå¤šé‡ç»§æ‰¿ä¸­ï¼Œæ–°å¢è™šå‡½æ•°ä¼˜å…ˆæŒ‚åˆ°ç¬¬ä¸€ä¸ªç›´æ¥åŸºç±»çš„è™šè¡¨ï¼ˆå¦‚æœå®ƒæœ‰ vfptr è™šè¡¨æŒ‡é’ˆï¼‰ï¼Œä¸ç®¡æœ‰æ²¡æœ‰é‡å†™å…¶ä»–åŸºç±»çš„è™šå‡½æ•°ã€‚</strong></p>
</blockquote>
<p>è¿™é‡Œä¸¾ä¸€ä¸ªä¾‹å­ï¼šC-&gt;B-&gt;Aï¼ˆé•¿ä¸€ç‚¹çš„ç»§æ‰¿ï¼‰
ç»“æœé¢„æµ‹æ˜¯B,Cä¸­çš„æ–°çš„è™šå‡½æ•°ï¼Œéƒ½æ”¾åœ¨äº†Açš„è™šå‡½æ•°è¡¨ä¸­ï¼ŒBï¼ŒCä¸­å¹¶æ²¡æœ‰æ–°å¢è™šå‡½æ•°è¡¨ã€‚</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">A</span>
{</span>
public:
	virtual <span class="hljs-type">void</span> <span class="hljs-title function_">func1</span><span class="hljs-params">()</span>{}
public:
	<span class="hljs-type">int</span> a;
};

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">B</span>:</span>public A
{
public:
	virtual <span class="hljs-type">void</span> <span class="hljs-title function_">func2</span><span class="hljs-params">()</span>{}
public:
	<span class="hljs-type">int</span> b;
};

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">C</span> :</span>public B
{
public:
	virtual <span class="hljs-type">void</span> <span class="hljs-title function_">func3</span><span class="hljs-params">()</span> {}
public:
	<span class="hljs-type">int</span> c;
};

<span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span>
{
	C cc;
	cc.a = <span class="hljs-number">1</span>;
	cc.b = <span class="hljs-number">2</span>;
	cc.c = <span class="hljs-number">3</span>;
	<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<p>ç¡®å®å¦‚æ­¤
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a7597a00dd214b578829651daf02ee54~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5qmY5a2QMTM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767461062&amp;x-signature=dw1Hs08eYnZUaqPin8WrtlSFXyY%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>

















<table><thead><tr><th>åœºæ™¯</th><th>æ–°å¢è™šå‡½æ•°çš„æŒ‚é è§„åˆ™</th></tr></thead><tbody><tr><td>æ™®é€šå¤šé‡ç»§æ‰¿ï¼ˆå¦‚ D ç»§æ‰¿ Bã€Cï¼‰</td><td><strong>ä¼˜å…ˆæŒ‚åˆ°ç¬¬ä¸€ä¸ªç›´æ¥åŸºç±»çš„è™šè¡¨</strong></td></tr><tr><td>è±å½¢è™šæ‹Ÿç»§æ‰¿ï¼ˆå¦‚ B è™šæ‹Ÿç»§æ‰¿ Aï¼‰</td><td>å¿…é¡»è‡ªå·±å»ºè™šè¡¨ï¼Œä¸èƒ½æŒ‚ A çš„è™šè¡¨</td></tr></tbody></table>
<p>ç®€å•ç†è§£ï¼šå¯¹äºâ€œå…±äº«ç±»â€ï¼ˆä¾‹å¦‚Aï¼‰ï¼Œä¸èƒ½æŒ‚åˆ°ä»–è‡ªèº«ï¼Œåº”ä¼˜å…ˆæŒ‚åˆ°ä»–ç›´æ¥æ´¾ç”Ÿç±»çš„è™šè¡¨ï¼Œå¯¹äºâ€œæ™®é€šç±»â€ï¼Œå¤šé‡ç»§æ‰¿ä¸­ï¼Œä»–çš„ç›´æ¥æ´¾ç”Ÿç±»ä¼˜å…ˆæŒ‚åˆ°ä»–çš„è™šè¡¨ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ğŸ”¥ Go Gin ä¸åœæœºé‡å¯æŒ‡å—ï¼šè®©æœåŠ¡åœ¨â€œæ´—æ¾¡æ“èƒŒâ€ä¸­æ— ç¼å‡çº§]]></title>    <link>https://juejin.cn/post/7588067055482732553</link>    <guid>https://juejin.cn/post/7588067055482732553</guid>    <pubDate>2025-12-28T00:39:41.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588067055482732553" data-draft-id="7585948869845205027" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ğŸ”¥ Go Gin ä¸åœæœºé‡å¯æŒ‡å—ï¼šè®©æœåŠ¡åœ¨â€œæ´—æ¾¡æ“èƒŒâ€ä¸­æ— ç¼å‡çº§"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-28T00:39:41.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="golangå­¦ä¹ è®°"/> <meta itemprop="url" content="https://juejin.cn/user/4371313964100990"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ğŸ”¥ Go Gin ä¸åœæœºé‡å¯æŒ‡å—ï¼šè®©æœåŠ¡åœ¨â€œæ´—æ¾¡æ“èƒŒâ€ä¸­æ— ç¼å‡çº§
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4371313964100990/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    golangå­¦ä¹ è®°
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-28T00:39:41.000Z" title="Sun Dec 28 2025 00:39:41 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-28
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>â€œç”¨æˆ·æ­£åœ¨ä¸‹å•ï¼Œä½ å´è¦ <code>Ctrl+C</code> é‡å¯æœåŠ¡ï¼Ÿâ€<br/>
â€œè€æ¿é—®ï¼šâ€˜ä¸Šçº¿æ€ä¹ˆåˆä¸­æ–­äº†ï¼Ÿâ€™ ä½ å¼±å¼±å›ç­”ï¼šâ€˜å°±ä¸‰ç§’â€¦â€¦â€™â€</p>
<p>â€”â€”è¿™ä¸æ˜¯è¿ç»´ï¼Œæ˜¯<strong>äººè´¨åŠ«æŒå¼éƒ¨ç½²</strong>ã€‚</p>
<p>ä»Šå¤©ï¼Œæˆ‘ä»¬æ•™ Gin æœåŠ¡ï¼š<strong>è¾¹è·‘é©¬æ‹‰æ¾ï¼Œè¾¹æ¢é‹ï¼Œè¿˜ä¸å¸¦å–˜æ°”çš„</strong>ï¼ğŸ‘ŸğŸ’¨</p>
</blockquote>
<hr/>
<h2 data-id="heading-0">ğŸ§  ä¸€ã€ä»€ä¹ˆæ˜¯â€œçƒ­é‡å¯â€ï¼Ÿâ€”â€”ä¸æ˜¯é­”æ³•ï¼Œæ˜¯ç§‘å­¦ï¼</h2>
<p>å…ˆæŠ›ä¸ªçµé­‚æ‹·é—®ï¼š</p>
<blockquote>
<p>â“ ä¸ºä»€ä¹ˆ Nginx æ‰§è¡Œ <code>nginx -s reload</code> æ—¶ï¼Œä½ æ­£åœ¨ä¸‹è½½çš„è§†é¢‘<strong>ä¸ä¼šå¡æˆ PPT</strong>ï¼Ÿ</p>
</blockquote>
<h3 data-id="heading-1">ğŸ“Œ æ ¸å¿ƒåŸç†ä¸‰æ¿æ–§ï¼š</h3>





















<table><thead><tr><th>æŠ€æœ¯ç‚¹</th><th>äººç±»ç¿»è¯‘ç‰ˆ</th></tr></thead><tbody><tr><td><strong>1. ç›‘å¬å™¨ç»§æ‰¿</strong></td><td>çˆ¶è¿›ç¨‹æŠŠâ€œé—¨â€ï¼ˆsocket ç›‘å¬å¥—æ¥å­—ï¼‰ä¼ ç»™å­è¿›ç¨‹ï¼Œæ–°è€äº¤æ›¿ï¼Œé—¨å£ä¸ç©ºå²— ğŸ‘®â¡ï¸ğŸ‘®â€â™‚ï¸</td></tr><tr><td><strong>2. ä¼˜é›…é€€å‡º</strong></td><td>æ—§è¿›ç¨‹åœæ­¢æ¥æ–°æ´»ï¼Œä½†æŠŠæ‰‹é‡Œâ€œåŠç¢—é¢â€åƒå®Œï¼ˆå¤„ç†å®Œåœ¨é€”è¯·æ±‚ï¼‰ğŸœ</td></tr><tr><td><strong>3. ä¿¡å·é©±åŠ¨</strong></td><td><code>SIGUSR2</code> ä¸æ˜¯â€œæ€æˆ‘â€ï¼Œæ˜¯â€œæˆ‘è®©ä½ï¼Œä½ ä¸Šï¼â€</td></tr></tbody></table>
<blockquote>
<p>ğŸ’¡ <strong>åº•å±‚çœŸç›¸</strong>ï¼š<br/>
å½“ <code>net.Listen("tcp", ":8080")</code> æˆåŠŸåï¼Œå†…æ ¸å°±ç»‘å®šäº† 1 ä¸ª socket æ–‡ä»¶æè¿°ç¬¦ï¼ˆFD=3ï¼‰ã€‚<br/>
çˆ¶è¿›ç¨‹ <code>fork()</code> + <code>exec()</code> å­è¿›ç¨‹æ—¶ï¼Œ<strong>FD æ˜¯é»˜è®¤ç»§æ‰¿çš„</strong>ï¼ˆé™¤éè®¾ <code>FD_CLOEXEC</code>ï¼‰ã€‚<br/>
â†’ å­è¿›ç¨‹ <code>net.FileListener(os.NewFile(3, ""))</code> ç›´æ¥æ¥ç®¡â€œå¤§é—¨â€ï¼Œç”¨æˆ·è¿æ¥æ¯«æ— æ„ŸçŸ¥ï¼</p>
</blockquote>
<hr/>
<h2 data-id="heading-2">ğŸ’ äºŒã€Go é‡Œæ€ä¹ˆç©ï¼Ÿ5 ç§å§¿åŠ¿å¤§ä¹±æ–—</h2>
<h3 data-id="heading-3">ğŸ¥‡ <strong>å† å†›é€‰æ‰‹ï¼š<code>github.com/fvbock/endless</code></strong></h3>
<blockquote>
<p>â€œç¨³å®šå¦‚è€ç‹—ï¼Œæ–‡æ¡£åƒèœè°±â€</p>
</blockquote>
<h4 data-id="heading-4">âœ… æ ¸å¿ƒäº®ç‚¹ï¼š</h4>
<ul>
<li>å•å‡½æ•°æ›¿æ¢ <code>http.ListenAndServe</code> â†’ <code>endless.ListenAndServe</code></li>
<li>æ”¯æŒ <code>SIGUSR1</code> / <code>SIGUSR2</code> / <code>SIGTERM</code> å¤šä¿¡å·</li>
<li>è‡ªåŠ¨å¤„ç† <code>HammerTime</code>ï¼ˆå¼ºåˆ¶å…³æœºå€’è®¡æ—¶ï¼‰</li>
<li>ä¸€è¡Œä»£ç æ‹¯æ•‘ä¸–ç•Œï¼š</li>
</ul>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// ä» âŒ è„†å¼±æ¨¡å¼</span>
log.Fatal(http.ListenAndServe(<span class="hljs-string">":8080"</span>, router))

<span class="hljs-comment">// ä¸€é”®å‡çº§ â†’ âœ… å¥å£®æ¨¡å¼</span>
endless.ListenAndServe(<span class="hljs-string">":8080"</span>, router)
</code></pre>
<h4 data-id="heading-5">ğŸ›  ç”Ÿäº§çº§é…ç½®ï¼ˆå¸¦é˜²å‘è¡¥ä¸ï¼‰ï¼š</h4>
<pre><code class="hljs language-go" lang="go">server := endless.NewServer(<span class="hljs-string">":8080"</span>, router)

<span class="hljs-comment">// é˜²æ­¢æ…¢å®¢æˆ·ç«¯æ‹–å®æœåŠ¡</span>
server.ReadTimeout = <span class="hljs-number">15</span> * time.Second
server.WriteTimeout = <span class="hljs-number">30</span> * time.Second

<span class="hljs-comment">// å…³é—¨åç­‰å¤šä¹…â€œèµ¶å®¢â€</span>
endless.DefaultHammerTime = <span class="hljs-number">45</span> * time.Second <span class="hljs-comment">// è¶…æ—¶ç›´æ¥ kill -9</span>

<span class="hljs-comment">// ä¼˜é›…æç¤º</span>
server.BeforeBegin = <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(addr <span class="hljs-type">string</span>)</span></span> {
    log.Printf(<span class="hljs-string">"ğŸš€ Gin Server UP on %s | PID: %d"</span>, addr, os.Getpid())
}
</code></pre>
<blockquote>
<p>ğŸ¤¯ <strong>å†·çŸ¥è¯†</strong>ï¼š<code>endless.Kill()</code> å®é™…å‘çš„æ˜¯ <code>SIGQUIT</code>ï¼Œè§¦å‘ <code>fork()</code> + <code>exec()</code> æ–°è¿›ç¨‹ï¼Œå¹¶å…³æ—§é—¨ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-6">ğŸ¥ˆ <strong>ä¼˜é›…æ´¾ï¼š<code>github.com/gin-contrib/graceful</code></strong></h3>
<blockquote>
<p>â€œGin å®˜æ–¹äº²å„¿å­ï¼Œå¯æƒœæœ€è¿‘æœ‰ç‚¹ä½›â€</p>
</blockquote>
<h4 data-id="heading-7">âš ï¸ æ³¨æ„ï¼š</h4>
<ul>
<li>è¯¥åº“å·²<strong>å¤šå¹´æœªæ›´æ–°</strong>ï¼ˆæœ€å commit æ˜¯ 2018 å¹´ï¼ï¼‰</li>
<li>å…¼å®¹ Go 1.14+ï¼Œä½†æ–°ç‰¹æ€§ï¼ˆå¦‚ <code>http.Server.Shutdown</code> context æ§åˆ¶ï¼‰æ”¯æŒå¼±</li>
</ul>
<pre><code class="hljs language-go" lang="go">router, _ := graceful.Default()
router.GET(<span class="hljs-string">"/ping"</span>, <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(c *gin.Context)</span></span> {
    c.String(<span class="hljs-number">200</span>, <span class="hljs-string">"pong (pid=%d)"</span>, os.Getpid())
})

srv := &amp;http.Server{Addr: <span class="hljs-string">":8080"</span>, Handler: router}
err := router.RunWithContext(srv)
</code></pre>
<blockquote>
<p>ğŸ“Œ <strong>é€‚åˆ</strong>ï¼šè€é¡¹ç›®ç»´æŠ¤ï¼Œä¸æƒ³å¼•å…¥æ–°ä¾èµ–<br/>
ğŸš« <strong>ä¸é€‚åˆ</strong>ï¼šé«˜å¯ç”¨æ–°é¡¹ç›®ï¼Œå»ºè®®ç›´æ¥ <code>endless</code></p>
</blockquote>
<hr/>
<h3 data-id="heading-8">ğŸ¥‰ <strong>æç®€æ´¾ï¼šæ ‡å‡†åº“ <code>http.Server.Shutdown()</code></strong></h3>
<blockquote>
<p>â€œä¸ä¾èµ–ç¬¬ä¸‰æ–¹ï¼Œè‡ªå¸¦äº”é™©ä¸€é‡‘â€</p>
</blockquote>
<pre><code class="hljs language-go" lang="go">srv := &amp;http.Server{Addr: <span class="hljs-string">":8080"</span>, Handler: router}

<span class="hljs-keyword">go</span> <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">()</span></span> {
    <span class="hljs-keyword">if</span> err := srv.ListenAndServe(); err != http.ErrServerClosed {
        log.Fatal(err)
    }
}()

<span class="hljs-comment">// ç­‰ä¿¡å·</span>
quit := <span class="hljs-built_in">make</span>(<span class="hljs-keyword">chan</span> os.Signal, <span class="hljs-number">1</span>)
signal.Notify(quit, syscall.SIGINT, syscall.SIGTERM)
&lt;-quit

<span class="hljs-comment">// å…³é—¨æ¸…åœº</span>
ctx, cancel := context.WithTimeout(context.Background(), <span class="hljs-number">10</span>*time.Second)
<span class="hljs-keyword">defer</span> cancel()
srv.Shutdown(ctx) <span class="hljs-comment">// â† å…³é”®ï¼ç­‰è¯·æ±‚ç»“æŸå† exit</span>
</code></pre>
<blockquote>
<p>âœ… ä¼˜ç‚¹ï¼šé›¶ä¾èµ–ã€å¯æ§æ€§å¼º<br/>
âŒ ç¼ºç‚¹ï¼š<strong>ä¸æ”¯æŒâ€œçƒ­â€é‡å¯</strong>â€”â€”åªèƒ½å…³æ—§å¼€æ–°ï¼Œä¸­é—´æœ‰å‡ ç§’ downtimeï¼</p>
</blockquote>
<hr/>
<h3 data-id="heading-9">ğŸ¥Š <strong>ç¡¬æ ¸æ´¾ï¼šè‡ªå·±æ’¸â€”â€”Master/Worker æ¨¡å¼ï¼ˆä»¿ Nginxï¼‰</strong></h3>
<blockquote>
<p>â€œçœ‹å®Œè¿™æ®µä»£ç ï¼Œä½ å°±æœ‰èµ„æ ¼å«â€˜Go é»‘å®¢â€™â€</p>
</blockquote>
<h4 data-id="heading-10">ä¸ºä»€ä¹ˆéœ€è¦è‡ªå·±å†™ï¼Ÿ</h4>
<ul>
<li>æƒ³æ§åˆ¶å­è¿›ç¨‹ç”Ÿå‘½å‘¨æœŸï¼ˆå´©æºƒè‡ªåŠ¨æ‹‰èµ·ï¼‰</li>
<li>éœ€è¦ç°åº¦å‘å¸ƒã€AB æµ‹è¯•èƒ½åŠ›</li>
<li>è¢«è€æ¿é€¼ç€å†™æŠ€æœ¯æ–¹æ¡ˆ PPT ğŸ˜­</li>
</ul>
<h4 data-id="heading-11">ç²¾ç®€ç‰ˆæ ¸å¿ƒé€»è¾‘ï¼š</h4>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// ä¸»è¿›ç¨‹ï¼šå®ˆé—¨äºº</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    <span class="hljs-keyword">if</span> os.Getenv(<span class="hljs-string">"IS_CHILD"</span>) == <span class="hljs-string">"1"</span> {
        runChild() <span class="hljs-comment">// å­è¿›ç¨‹èµ°è¿™é‡Œ</span>
        <span class="hljs-keyword">return</span>
    }

    listener, _ := net.Listen(<span class="hljs-string">"tcp"</span>, <span class="hljs-string">":8080"</span>)
    
    <span class="hljs-comment">// å¯åŠ¨ç¬¬ä¸€ä¸ªå­è¿›ç¨‹</span>
    startChild(listener)

    <span class="hljs-comment">// ç›‘å¬ä¿¡å·</span>
    <span class="hljs-keyword">go</span> <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">()</span></span> {
        sig := <span class="hljs-built_in">make</span>(<span class="hljs-keyword">chan</span> os.Signal, <span class="hljs-number">1</span>)
        signal.Notify(sig, syscall.SIGUSR2)
        <span class="hljs-keyword">for</span> <span class="hljs-keyword">range</span> sig {
            listener2, _ := dupListener(listener) <span class="hljs-comment">// å…‹éš†ç›‘å¬å™¨ï¼</span>
            startChild(listener2) <span class="hljs-comment">// å¯åŠ¨æ–°å­è¿›ç¨‹</span>
            <span class="hljs-comment">// æ—§å­è¿›ç¨‹è‡ªåŠ¨é€€å‡ºï¼ˆé çˆ¶å­è¿›ç¨‹å¿ƒè·³ or SIGTERMï¼‰</span>
        }
    }()

    <span class="hljs-comment">// é˜»å¡ä¸»è¿›ç¨‹</span>
    <span class="hljs-keyword">select</span>{}
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">startChild</span><span class="hljs-params">(l net.Listener)</span></span> {
    cmd := exec.Command(os.Args[<span class="hljs-number">0</span>])
    cmd.Env = <span class="hljs-built_in">append</span>(os.Environ(), <span class="hljs-string">"IS_CHILD=1"</span>)
    cmd.ExtraFiles = []*os.File{l.(filer).File()} <span class="hljs-comment">// ä¼  FD=3</span>
    cmd.Start()
}
</code></pre>
<blockquote>
<p>ğŸ”‘ å…³é”®ç‚¹ï¼š</p>
<ul>
<li><code>l.(filer).File()</code> â†’ æ‹¿åˆ°åº•å±‚ <code>*os.File</code></li>
<li><code>cmd.ExtraFiles = [...]</code> â†’ ä¼ ç»™å­è¿›ç¨‹ï¼ˆæˆä¸º FD=3ï¼‰</li>
<li>å­è¿›ç¨‹ä¸­ <code>net.FileListener(os.NewFile(3, ""))</code> æ¥ç®¡</li>
</ul>
</blockquote>
<p>âš ï¸ å®Œæ•´å®ç°è¦è€ƒè™‘ï¼šFD æ³„éœ²ã€åƒµå°¸è¿›ç¨‹å›æ”¶ã€é…ç½®çƒ­é‡è½½â€¦â€¦</p>
<hr/>
<h3 data-id="heading-12">ğŸ® <strong>å¼€å‘æ´¾ï¼š<code>air</code> â€”â€” å†™ä»£ç åƒæ‰“æ¸¸æˆï¼ŒæŒ‰ Ctrl+S=é‡ç”Ÿ</strong></h3>
<blockquote>
<p>â€œæ”¹ä¸€è¡Œä»£ç ï¼ŒæœåŠ¡è‡ªåŠ¨ reloadï¼Œçˆ½è¿‡å–å¯ä¹â€</p>
</blockquote>
<h4 data-id="heading-13">å®‰è£…ï¼ˆä¸‰ç§’æå®šï¼‰ï¼š</h4>
<pre><code class="hljs language-bash" lang="bash">go install github.com/cosmtrek/air@latest
<span class="hljs-comment"># æˆ–ç”¨è„šæœ¬ï¼ˆæ¥è‡ªå®˜æ–¹ install.shï¼‰</span>
curl -sSfL https://raw.githubusercontent.com/cosmtrek/air/master/install.sh | sh -s
</code></pre>
<h4 data-id="heading-14">é…ç½® <code>.air.toml</code>ï¼ˆé‡ç‚¹ï¼ï¼‰ï¼š</h4>
<pre><code class="hljs language-toml" lang="toml"><span class="hljs-section">[build]</span>
<span class="hljs-attr">cmd</span> = <span class="hljs-string">"go build -o ./tmp/app ."</span>
<span class="hljs-attr">bin</span> = <span class="hljs-string">"tmp/app"</span>
<span class="hljs-attr">delay</span> = <span class="hljs-number">1000</span>      <span class="hljs-comment"># æ¯«ç§’ï¼Œé˜²æ‰‹æŠ–è¿ç‚¹</span>
<span class="hljs-attr">send_interrupt</span> = <span class="hljs-literal">true</span>  <span class="hljs-comment"># æ”¹ç”¨ SIGINT è€Œé SIGKILLï¼Œç»™ä¼˜é›…é€€å‡ºæœºä¼šï¼</span>
</code></pre>
<blockquote>
<p>âœ… ä¸ºä»€ä¹ˆ <code>send_interrupt = true</code> å¾ˆé‡è¦ï¼Ÿ<br/>
é»˜è®¤ <code>send_interrupt = false</code> â†’ <code>kill -9</code> ç²—æš´æ€æ­» â†’ <strong>æ•°æ®åº“è¿æ¥æ³„æ¼ï¼</strong><br/>
è®¾ä¸º <code>true</code> â†’ å‘ <code>SIGINT</code> â†’ èµ° <code>Shutdown()</code> é€»è¾‘ â†’ å®‰å…¨ï¼</p>
</blockquote>
<hr/>
<hr/>
<h2 data-id="heading-15">ğŸš¨ å››ã€è¡€æ³ªè¸©å‘å®å½•ï¼ˆé¿é›·æŒ‡å—ï¼‰</h2>



































<table><thead><tr><th>å‘ç‚¹</th><th>ç°è±¡</th><th>è§£å†³æ–¹æ¡ˆ</th></tr></thead><tbody><tr><td><strong>FD æ³„éœ²</strong></td><td>é‡å¯ 10 æ¬¡å <code>lsof -p</code> çˆ†å‡º 30+ ä¸ª socket</td><td>å­è¿›ç¨‹å¯åŠ¨åï¼Œçˆ¶è¿›ç¨‹ <code>f.Close()</code> æ—§ FDï¼</td></tr><tr><td><strong>å…¨å±€å˜é‡æ±¡æŸ“</strong></td><td>é‡å¯åé…ç½®æ²¡æ›´æ–°</td><td>é¿å… <code>var config = loadConf()</code>ï¼Œæ”¹ç”¨ <code>getConfig()</code> å‡½æ•°å¼è¯»å–</td></tr><tr><td><strong>goroutine åƒµå°¸</strong></td><td>æ—§è¯·æ±‚å¡ä½ï¼Œæ–°è¿›ç¨‹èµ·ä¸æ¥</td><td>æ‰€æœ‰è€—æ—¶æ“ä½œå¿…é¡»ä¼  <code>context.WithTimeout</code>ï¼</td></tr><tr><td><strong>Docker ä¿¡å·å¤±æ•ˆ</strong></td><td><code>kill -USR2</code> æ²¡ååº”</td><td>ENTRYPOINT ç”¨ <code>tini</code> æˆ– <code>dumb-init</code> åš PID 1</td></tr><tr><td><strong>TLS è¯ä¹¦ä¸æ›´æ–°</strong></td><td>é‡å¯åè¿˜æ˜¯æ—§è¯ä¹¦</td><td>ç”¨ <code>http.Server.TLSConfig.GetCertificate</code> åŠ¨æ€åŠ è½½</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-16">ğŸŒˆ ç»“è¯­ï¼šä¼˜é›…ï¼Œæ˜¯ç¨‹åºå‘˜çš„ç»ˆææ€§æ„Ÿ</h2>
<blockquote>
<p>ç”¨æˆ·ä¸å…³å¿ƒä½ ç”¨ Go è¿˜æ˜¯ Rustï¼Œ<br/>
ä»–ä»¬åªå…³å¿ƒâ€”â€”<br/>
<strong>â€œæˆ‘ä»˜æ¬¾æ—¶ï¼Œé¡µé¢ä¸ºä»€ä¹ˆå¡äº†ï¼Ÿâ€</strong></p>
<p>çƒ­é‡å¯ä¸æ˜¯ç‚«æŠ€ï¼Œ<br/>
æ˜¯å¯¹ç”¨æˆ·æ—¶é—´çš„å°Šé‡ï¼Œ<br/>
æ˜¯å¯¹çº¿ä¸ŠæœåŠ¡çš„æ•¬ç•ï¼Œ<br/>
æ˜¯æ·±å¤œå€¼ç­æ—¶ï¼Œä½ èƒ½ç¬‘ç€å–å®Œé‚£æ¯å‡‰æ‰çš„å’–å•¡ â˜•ã€‚</p>
</blockquote>
<hr/></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Docker å…¥é—¨å®æˆ˜æ•™ç¨‹ï¼šä»é›¶å¼€å§‹æŒæ¡å®¹å™¨åŒ–æŠ€æœ¯]]></title>    <link>https://juejin.cn/post/7588042910198644786</link>    <guid>https://juejin.cn/post/7588042910198644786</guid>    <pubDate>2025-12-28T01:19:31.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588042910198644786" data-draft-id="7588073726207442950" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Docker å…¥é—¨å®æˆ˜æ•™ç¨‹ï¼šä»é›¶å¼€å§‹æŒæ¡å®¹å™¨åŒ–æŠ€æœ¯"/> <meta itemprop="keywords" content="Docker"/> <meta itemprop="datePublished" content="2025-12-28T01:19:31.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é›¨ä¸­é£˜è¡çš„è®°å¿†"/> <meta itemprop="url" content="https://juejin.cn/user/694547077666606"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Docker å…¥é—¨å®æˆ˜æ•™ç¨‹ï¼šä»é›¶å¼€å§‹æŒæ¡å®¹å™¨åŒ–æŠ€æœ¯
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/694547077666606/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é›¨ä¸­é£˜è¡çš„è®°å¿†
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-28T01:19:31.000Z" title="Sun Dec 28 2025 01:19:31 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-28
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Docker å…¥é—¨å®æˆ˜æ•™ç¨‹ï¼šä»é›¶å¼€å§‹æŒæ¡å®¹å™¨åŒ–æŠ€æœ¯</h2>
<h3 data-id="heading-1">å¼•è¨€ï¼šä¸ºä»€ä¹ˆéœ€è¦ Dockerï¼Ÿ</h3>
<p>åœ¨è½¯ä»¶å¼€å‘çš„ä¸–ç•Œé‡Œï¼Œæˆ‘ä»¬ç»å¸¸é‡åˆ°è¿™æ ·çš„å›°æ‰°ï¼š"åœ¨æˆ‘çš„ç”µè„‘ä¸Šæ˜æ˜å¯ä»¥è¿è¡Œï¼Œä¸ºä»€ä¹ˆåˆ°æœåŠ¡å™¨ä¸Šå°±æŠ¥é”™äº†ï¼Ÿ"è¿™ä¸ªé—®é¢˜ä¸€ç›´å›°æ‰°ç€æ— æ•°å¼€å‘è€…ã€‚ä¸åŒçš„æ“ä½œç³»ç»Ÿã€ä¸åŒçš„ä¾èµ–åº“ç‰ˆæœ¬ã€ä¸åŒçš„ç¯å¢ƒé…ç½®â€¦â€¦è¿™äº›å·®å¼‚å¯¼è‡´äº†å¼€å‘å’Œéƒ¨ç½²ç¯å¢ƒçš„ä¸ä¸€è‡´ã€‚</p>
<p>è€Œ Docker çš„å‡ºç°ï¼Œå½»åº•æ”¹å˜äº†è¿™ä¸€å±€é¢ã€‚å®ƒè®©åº”ç”¨ç¨‹åºåŠå…¶ä¾èµ–ç¯å¢ƒæ‰“åŒ…æˆä¸€ä¸ªè½»é‡çº§çš„"å®¹å™¨"ï¼Œåœ¨ä»»ä½•æ”¯æŒ Docker çš„å¹³å°ä¸Šéƒ½èƒ½ä»¥ç›¸åŒçš„æ–¹å¼è¿è¡Œã€‚è¿™å°±æ˜¯è‘—åçš„"ä¸€æ¬¡æ„å»ºï¼Œåˆ°å¤„è¿è¡Œ"ï¼ˆBuild Once, Run Anywhereï¼‰ã€‚</p>
<h3 data-id="heading-2">ä¸€ã€Docker æ˜¯ä»€ä¹ˆï¼Ÿ</h3>
<h4 data-id="heading-3">1.1 å®¹å™¨æŠ€æœ¯çš„é©å‘½</h4>
<p>Docker æ˜¯ä¸€ä¸ªå¼€æºçš„å®¹å™¨åŒ–å¹³å°ï¼Œå®ƒå¯ä»¥å°†åº”ç”¨ç¨‹åºåŠå…¶ä¾èµ–ç¯å¢ƒæ‰“åŒ…æˆä¸€ä¸ªç‹¬ç«‹çš„å®¹å™¨ã€‚ä¸ä¼ ç»Ÿè™šæ‹Ÿæœºç›¸æ¯”ï¼ŒDocker å®¹å™¨æ›´åŠ è½»é‡ã€å¿«é€Ÿã€é«˜æ•ˆã€‚</p>
<p><strong>ä¼ ç»Ÿè™šæ‹Ÿæœº vs Docker å®¹å™¨ï¼š</strong></p>



































<table><thead><tr><th>ç‰¹æ€§</th><th>è™šæ‹Ÿæœº</th><th>Docker å®¹å™¨</th></tr></thead><tbody><tr><td>å¯åŠ¨é€Ÿåº¦</td><td>åˆ†é’Ÿçº§</td><td>ç§’çº§</td></tr><tr><td>ç£ç›˜å ç”¨</td><td>GB çº§åˆ«</td><td>MB çº§åˆ«</td></tr><tr><td>æ€§èƒ½</td><td>æ¥è¿‘åŸç”Ÿ</td><td>æ¥è¿‘åŸç”Ÿ</td></tr><tr><td>éš”ç¦»æ€§</td><td>å®Œå…¨éš”ç¦»</td><td>è¿›ç¨‹çº§éš”ç¦»</td></tr><tr><td>å¯ç§»æ¤æ€§</td><td>è¾ƒå·®</td><td>ä¼˜ç§€</td></tr></tbody></table>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dd203cf9c7d949b9b8548b6b2e235f41~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zuo5Lit6aOY6I2h55qE6K6w5b-G:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767489570&amp;x-signature=OOueUzzcnF79MKFqYbuFjmuS24Q%3D" alt="vm_vs_docker.png" loading="lazy"/></p>
<h4 data-id="heading-4">1.2 Docker çš„æ ¸å¿ƒä¼˜åŠ¿</h4>
<ul>
<li><strong>å¿«é€Ÿéƒ¨ç½²</strong>ï¼šå®¹å™¨å¯åŠ¨åªéœ€å‡ ç§’é’Ÿ</li>
<li><strong>ç¯å¢ƒä¸€è‡´æ€§</strong>ï¼šå¼€å‘ã€æµ‹è¯•ã€ç”Ÿäº§ç¯å¢ƒå®Œå…¨ä¸€è‡´</li>
<li><strong>èµ„æºé«˜æ•ˆ</strong>ï¼šç›¸æ¯”è™šæ‹ŸæœºèŠ‚çœå¤§é‡ç³»ç»Ÿèµ„æº</li>
<li><strong>å¾®æœåŠ¡æ¶æ„</strong>ï¼šå®Œç¾æ”¯æŒå¾®æœåŠ¡éƒ¨ç½²</li>
<li><strong>æŒç»­é›†æˆ/éƒ¨ç½²</strong>ï¼šç®€åŒ– CI/CD æµç¨‹</li>
</ul>
<h3 data-id="heading-5">äºŒã€Docker æ ¸å¿ƒæ¦‚å¿µè¯¦è§£</h3>
<h4 data-id="heading-6">2.1 é•œåƒï¼ˆImageï¼‰</h4>
<p><strong>é•œåƒå°±åƒæ˜¯åº”ç”¨ç¨‹åºçš„"æ¨¡æ¿"æˆ–"è“å›¾"</strong>ã€‚å®ƒæ˜¯ä¸€ä¸ªåªè¯»çš„æ–‡ä»¶åŒ…ï¼ŒåŒ…å«äº†è¿è¡Œåº”ç”¨ç¨‹åºæ‰€éœ€çš„æ‰€æœ‰å†…å®¹ï¼šä»£ç ã€è¿è¡Œæ—¶ã€ç³»ç»Ÿå·¥å…·ã€ç³»ç»Ÿåº“å’Œè®¾ç½®ã€‚</p>
<p><strong>é•œåƒçš„ç‰¹ç‚¹ï¼š</strong></p>
<ul>
<li>åˆ†å±‚å­˜å‚¨ï¼šæ¯ä¸€å±‚éƒ½æ˜¯åªè¯»çš„</li>
<li>å¯å¤ç”¨ï¼šå¤šä¸ªå®¹å™¨å¯ä»¥å…±äº«åŒä¸€ä¸ªé•œåƒ</li>
<li>ç‰ˆæœ¬ç®¡ç†ï¼šé€šè¿‡æ ‡ç­¾ï¼ˆtagï¼‰ç®¡ç†ä¸åŒç‰ˆæœ¬</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4c12e6d2edd44ebaac4ceeedf024515e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zuo5Lit6aOY6I2h55qE6K6w5b-G:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767489570&amp;x-signature=uN6%2B3TTV71rXNpPPDvGdsoqj82o%3D" alt="docker_image_layers.png" loading="lazy"/></p>
<p><strong>å¸¸è§é•œåƒç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-bash" lang="bash">nginx:latest          <span class="hljs-comment"># æœ€æ–°ç‰ˆæœ¬çš„ Nginx</span>
python:3.9-slim      <span class="hljs-comment"># Python 3.9 ç²¾ç®€ç‰ˆ</span>
mysql:8.0            <span class="hljs-comment"># MySQL 8.0</span>
ubuntu:20.04         <span class="hljs-comment"># Ubuntu 20.04</span>
</code></pre>
<h4 data-id="heading-7">2.2 å®¹å™¨ï¼ˆContainerï¼‰</h4>
<p><strong>å®¹å™¨æ˜¯é•œåƒçš„è¿è¡Œå®ä¾‹</strong>ã€‚å¦‚æœè¯´é•œåƒæ˜¯"ç±»"ï¼Œé‚£ä¹ˆå®¹å™¨å°±æ˜¯"å¯¹è±¡"ã€‚ä½ å¯ä»¥ä»ä¸€ä¸ªé•œåƒå¯åŠ¨å¤šä¸ªå®¹å™¨ï¼Œæ¯ä¸ªå®¹å™¨éƒ½æ˜¯ç›¸äº’éš”ç¦»çš„ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9e8b7619961f4ba2948c437b12bc711e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zuo5Lit6aOY6I2h55qE6K6w5b-G:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767489570&amp;x-signature=v0y3hNCCVYpznj9qqupNH4scIN8%3D" alt="container_lifecycle.png" loading="lazy"/></p>
<p><strong>å®¹å™¨çš„ç”Ÿå‘½å‘¨æœŸï¼š</strong></p>
<ol>
<li><strong>Created</strong>ï¼šå®¹å™¨å·²åˆ›å»ºä½†æœªå¯åŠ¨</li>
<li><strong>Running</strong>ï¼šå®¹å™¨æ­£åœ¨è¿è¡Œ</li>
<li><strong>Paused</strong>ï¼šå®¹å™¨å·²æš‚åœ</li>
<li><strong>Stopped</strong>ï¼šå®¹å™¨å·²åœæ­¢</li>
<li><strong>Deleted</strong>ï¼šå®¹å™¨å·²åˆ é™¤</li>
</ol>
<h4 data-id="heading-8">2.3 ä»“åº“ï¼ˆRegistryï¼‰</h4>
<p><strong>ä»“åº“æ˜¯å­˜æ”¾é•œåƒçš„åœ°æ–¹</strong>ï¼Œå°±åƒä»£ç ä»“åº“å­˜æ”¾ä»£ç ä¸€æ ·ã€‚</p>
<p><strong>å¸¸è§çš„ Docker é•œåƒä»“åº“ï¼š</strong></p>
<ul>
<li><strong>Docker Hub</strong>ï¼šå®˜æ–¹å…¬å…±ä»“åº“ï¼ˆhub.docker.comï¼‰</li>
<li><strong>é˜¿é‡Œäº‘é•œåƒä»“åº“</strong>ï¼šå›½å†…è®¿é—®é€Ÿåº¦å¿«</li>
<li><strong>ç§æœ‰ä»“åº“</strong>ï¼šä¼ä¸šå†…éƒ¨è‡ªå»º</li>
</ul>
<hr/>
<p><strong>Docker æ ¸å¿ƒç»„ä»¶æ¶æ„æ€»è§ˆï¼š</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d3dfc756b0514d8686d65a675f44c4c2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zuo5Lit6aOY6I2h55qE6K6w5b-G:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767489570&amp;x-signature=RWbJAq4Gu01tckxnQeln0vMJIps%3D" alt="docker_architecture.png" loading="lazy"/></p>
<h3 data-id="heading-9">ä¸‰ã€Docker å®‰è£…æŒ‡å—</h3>
<h4 data-id="heading-10">3.1 Windows å®‰è£…</h4>
<p><strong>ç³»ç»Ÿè¦æ±‚ï¼š</strong></p>
<ul>
<li>Windows 10/11 ä¸“ä¸šç‰ˆæˆ–ä¼ä¸šç‰ˆ</li>
<li>å¯ç”¨ Hyper-V å’Œ WSL 2</li>
</ul>
<p><strong>å®‰è£…æ­¥éª¤ï¼š</strong></p>
<ol>
<li>è®¿é—® Docker å®˜ç½‘ä¸‹è½½ Docker Desktop for Windows</li>
<li>åŒå‡»å®‰è£…ç¨‹åºï¼ŒæŒ‰ç…§æç¤ºå®Œæˆå®‰è£…</li>
<li>é‡å¯è®¡ç®—æœº</li>
<li>å¯åŠ¨ Docker Desktop</li>
<li>éªŒè¯å®‰è£…ï¼š</li>
</ol>
<pre><code class="hljs language-bash" lang="bash">docker --version
docker run hello-world
</code></pre>
<h4 data-id="heading-11">3.2 Linux å®‰è£…ï¼ˆä»¥ Ubuntu ä¸ºä¾‹ï¼‰</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># 1. æ›´æ–°åŒ…ç´¢å¼•</span>
sudo apt-get update

<span class="hljs-comment"># 2. å®‰è£…ä¾èµ–åŒ…</span>
sudo apt-get install \
    ca-certificates \
    curl \
    gnupg \
    lsb-release

<span class="hljs-comment"># 3. æ·»åŠ  Docker å®˜æ–¹ GPG å¯†é’¥</span>
sudo <span class="hljs-built_in">mkdir</span> -p /etc/apt/keyrings
curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /etc/apt/keyrings/docker.gpg

<span class="hljs-comment"># 4. è®¾ç½®ä»“åº“</span>
<span class="hljs-built_in">echo</span> \
  <span class="hljs-string">"deb [arch=<span class="hljs-subst">$(dpkg --print-architecture)</span> signed-by=/etc/apt/keyrings/docker.gpg] https://download.docker.com/linux/ubuntu \
  <span class="hljs-subst">$(lsb_release -cs)</span> stable"</span> | sudo <span class="hljs-built_in">tee</span> /etc/apt/sources.list.d/docker.list &gt; /dev/null

<span class="hljs-comment"># 5. å®‰è£… Docker Engine</span>
sudo apt-get update
sudo apt-get install docker-ce docker-ce-cli containerd.io

<span class="hljs-comment"># 6. éªŒè¯å®‰è£…</span>
sudo docker run hello-world
</code></pre>
<p><strong>é…ç½®ç”¨æˆ·ç»„ï¼ˆå… sudoï¼‰ï¼š</strong></p>
<pre><code class="hljs language-bash" lang="bash">sudo usermod -aG docker <span class="hljs-variable">$USER</span>
newgrp docker
</code></pre>
<h3 data-id="heading-12">å››ã€Docker å®æˆ˜æ¼”ç»ƒ</h3>
<h4 data-id="heading-13">4.1 ç¬¬ä¸€ä¸ª Docker å®¹å™¨</h4>
<p>è®©æˆ‘ä»¬ä»æœ€ç®€å•çš„ä¾‹å­å¼€å§‹ï¼Œè¿è¡Œä¸€ä¸ª Nginx Web æœåŠ¡å™¨ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ‹‰å– Nginx é•œåƒ</span>
docker pull nginx:latest

<span class="hljs-comment"># è¿è¡Œ Nginx å®¹å™¨</span>
docker run -d -p 8080:80 --name my-nginx nginx:latest

<span class="hljs-comment"># æŸ¥çœ‹è¿è¡ŒçŠ¶æ€</span>
docker ps

<span class="hljs-comment"># è®¿é—®æµ‹è¯•</span>
<span class="hljs-comment"># æ‰“å¼€æµè§ˆå™¨è®¿é—® http://localhost:8080</span>
</code></pre>
<p><strong>å‚æ•°è¯´æ˜ï¼š</strong></p>
<ul>
<li><code>-d</code>ï¼šåå°è¿è¡Œ</li>
<li><code>-p 8080:80</code>ï¼šç«¯å£æ˜ å°„ï¼Œå®¿ä¸»æœº8080ç«¯å£æ˜ å°„åˆ°å®¹å™¨80ç«¯å£</li>
<li><code>--name my-nginx</code>ï¼šæŒ‡å®šå®¹å™¨åç§°</li>
</ul>
<h4 data-id="heading-14">4.2 éƒ¨ç½² MySQL æ•°æ®åº“</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># è¿è¡Œ MySQL å®¹å™¨</span>
docker run -d \
  --name mysql-server \
  -e MYSQL_ROOT_PASSWORD=my-secret-pw \
  -e MYSQL_DATABASE=mydb \
  -p 3306:3306 \
  -v mysql-data:/var/lib/mysql \
  mysql:8.0

<span class="hljs-comment"># è¿›å…¥ MySQL å®¹å™¨</span>
docker <span class="hljs-built_in">exec</span> -it mysql-server mysql -uroot -p

<span class="hljs-comment"># æŸ¥çœ‹ MySQL æ—¥å¿—</span>
docker logs mysql-server
</code></pre>
<p><strong>å‚æ•°è¯´æ˜ï¼š</strong></p>
<ul>
<li><code>-e</code>ï¼šè®¾ç½®ç¯å¢ƒå˜é‡</li>
<li><code>-v mysql-data:/var/lib/mysql</code>ï¼šæ•°æ®æŒä¹…åŒ–ï¼Œæ•°æ®å­˜å‚¨åœ¨å‘½åå·ä¸­</li>
</ul>
<h4 data-id="heading-15">4.4 Docker Compose å¤šå®¹å™¨åº”ç”¨</h4>
<p><strong>docker-compose.yml ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">version:</span> <span class="hljs-string">'3.8'</span>

<span class="hljs-attr">services:</span>
  <span class="hljs-comment"># Web åº”ç”¨</span>
  <span class="hljs-attr">web:</span>
    <span class="hljs-attr">build:</span> <span class="hljs-string">.</span>
    <span class="hljs-attr">ports:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">"5000:5000"</span>
    <span class="hljs-attr">depends_on:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">db</span>
    <span class="hljs-attr">environment:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">DATABASE_URL=mysql://root:my-secret-pw@db:3306/mydb</span>
    <span class="hljs-attr">networks:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">app-network</span>

  <span class="hljs-comment"># æ•°æ®åº“</span>
  <span class="hljs-attr">db:</span>
    <span class="hljs-attr">image:</span> <span class="hljs-string">mysql:8.0</span>
    <span class="hljs-attr">environment:</span>
      <span class="hljs-attr">MYSQL_ROOT_PASSWORD:</span> <span class="hljs-string">my-secret-pw</span>
      <span class="hljs-attr">MYSQL_DATABASE:</span> <span class="hljs-string">mydb</span>
    <span class="hljs-attr">volumes:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">mysql-data:/var/lib/mysql</span>
    <span class="hljs-attr">ports:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">"3306:3306"</span>
    <span class="hljs-attr">networks:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">app-network</span>

  <span class="hljs-comment"># Nginx åå‘ä»£ç†</span>
  <span class="hljs-attr">nginx:</span>
    <span class="hljs-attr">image:</span> <span class="hljs-string">nginx:latest</span>
    <span class="hljs-attr">ports:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">"80:80"</span>
    <span class="hljs-attr">volumes:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">./nginx.conf:/etc/nginx/nginx.conf</span>
    <span class="hljs-attr">depends_on:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">web</span>
    <span class="hljs-attr">networks:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">app-network</span>

<span class="hljs-attr">volumes:</span>
  <span class="hljs-attr">mysql-data:</span>

<span class="hljs-attr">networks:</span>
  <span class="hljs-attr">app-network:</span>
    <span class="hljs-attr">driver:</span> <span class="hljs-string">bridge</span>
</code></pre>
<p><strong>å¯åŠ¨æœåŠ¡ï¼š</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å¯åŠ¨æ‰€æœ‰æœåŠ¡</span>
docker-compose up -d

<span class="hljs-comment"># æŸ¥çœ‹æœåŠ¡çŠ¶æ€</span>
docker-compose ps

<span class="hljs-comment"># æŸ¥çœ‹æ—¥å¿—</span>
docker-compose logs -f

<span class="hljs-comment"># åœæ­¢æœåŠ¡</span>
docker-compose down
</code></pre>
<h3 data-id="heading-16">äº”ã€Docker å¸¸ç”¨å‘½ä»¤å¤§å…¨</h3>
<h4 data-id="heading-17">5.1 é•œåƒç®¡ç†å‘½ä»¤</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æœç´¢é•œåƒ</span>
docker search nginx

<span class="hljs-comment"># æ‹‰å–é•œåƒ</span>
docker pull nginx:latest

<span class="hljs-comment"># æŸ¥çœ‹æœ¬åœ°é•œåƒ</span>
docker images

<span class="hljs-comment"># åˆ é™¤é•œåƒ</span>
docker rmi nginx:latest

<span class="hljs-comment"># æ„å»ºé•œåƒ</span>
docker build -t myapp:1.0 .

<span class="hljs-comment"># å¯¼å‡ºé•œåƒ</span>
docker save -o myapp.tar myapp:1.0

<span class="hljs-comment"># å¯¼å…¥é•œåƒ</span>
docker load -i myapp.tar

<span class="hljs-comment"># æ ‡è®°é•œåƒ</span>
docker tag myapp:1.0 myapp:latest
</code></pre>
<h4 data-id="heading-18">5.2 å®¹å™¨ç®¡ç†å‘½ä»¤</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># è¿è¡Œå®¹å™¨</span>
docker run [OPTIONS] IMAGE [COMMAND]
docker run -d -p 80:80 --name web nginx

<span class="hljs-comment"># æŸ¥çœ‹è¿è¡Œä¸­çš„å®¹å™¨</span>
docker ps

<span class="hljs-comment"># æŸ¥çœ‹æ‰€æœ‰å®¹å™¨ï¼ˆåŒ…æ‹¬å·²åœæ­¢ï¼‰</span>
docker ps -a

<span class="hljs-comment"># åœæ­¢å®¹å™¨</span>
docker stop web

<span class="hljs-comment"># å¯åŠ¨å·²åœæ­¢çš„å®¹å™¨</span>
docker start web

<span class="hljs-comment"># é‡å¯å®¹å™¨</span>
docker restart web

<span class="hljs-comment"># åˆ é™¤å®¹å™¨</span>
docker <span class="hljs-built_in">rm</span> web

<span class="hljs-comment"># å¼ºåˆ¶åˆ é™¤è¿è¡Œä¸­çš„å®¹å™¨</span>
docker <span class="hljs-built_in">rm</span> -f web

<span class="hljs-comment"># æŸ¥çœ‹å®¹å™¨è¯¦ç»†ä¿¡æ¯</span>
docker inspect web

<span class="hljs-comment"># æŸ¥çœ‹å®¹å™¨æ—¥å¿—</span>
docker logs web
docker logs -f web  <span class="hljs-comment"># å®æ—¶æŸ¥çœ‹</span>

<span class="hljs-comment"># è¿›å…¥å®¹å™¨</span>
docker <span class="hljs-built_in">exec</span> -it web /bin/bash
</code></pre>
<h4 data-id="heading-19">5.3 æ•°æ®ç®¡ç†å‘½ä»¤</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åˆ›å»ºæ•°æ®å·</span>
docker volume create my-volume

<span class="hljs-comment"># æŸ¥çœ‹æ•°æ®å·</span>
docker volume <span class="hljs-built_in">ls</span>

<span class="hljs-comment"># æŸ¥çœ‹æ•°æ®å·è¯¦æƒ…</span>
docker volume inspect my-volume

<span class="hljs-comment"># åˆ é™¤æ•°æ®å·</span>
docker volume <span class="hljs-built_in">rm</span> my-volume

<span class="hljs-comment"># åˆ›å»ºå¤‡ä»½</span>
docker run --<span class="hljs-built_in">rm</span> --volumes-from db-container -v $(<span class="hljs-built_in">pwd</span>):/backup \
  ubuntu tar cvf /backup/backup.tar /var/lib/mysql
</code></pre>
<h4 data-id="heading-20">5.4 ç½‘ç»œç®¡ç†å‘½ä»¤</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åˆ›å»ºç½‘ç»œ</span>
docker network create my-network

<span class="hljs-comment"># æŸ¥çœ‹ç½‘ç»œ</span>
docker network <span class="hljs-built_in">ls</span>

<span class="hljs-comment"># è¿æ¥å®¹å™¨åˆ°ç½‘ç»œ</span>
docker network connect my-network my-container

<span class="hljs-comment"># æ–­å¼€ç½‘ç»œè¿æ¥</span>
docker network disconnect my-network my-container

<span class="hljs-comment"># åˆ é™¤ç½‘ç»œ</span>
docker network <span class="hljs-built_in">rm</span> my-network
</code></pre>
<h3 data-id="heading-21">å…­ã€Docker æ•°æ®æŒä¹…åŒ–</h3>
<h4 data-id="heading-22">6.1 æ•°æ®å·ï¼ˆVolumeï¼‰</h4>
<p><strong>ç‰¹ç‚¹ï¼š</strong></p>
<ul>
<li>ç”± Docker ç®¡ç†</li>
<li>å­˜å‚¨åœ¨ Docker ç‰¹å®šç›®å½•</li>
<li>è·¨å¹³å°å…¼å®¹æ€§å¥½</li>
<li>é€‚åˆç”Ÿäº§ç¯å¢ƒ</li>
</ul>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åˆ›å»ºå‘½åå·</span>
docker volume create my-data

<span class="hljs-comment"># ä½¿ç”¨å·</span>
docker run -d -v my-data:/data nginx

<span class="hljs-comment"># æŸ¥çœ‹å·ä¿¡æ¯</span>
docker volume inspect my-data

<span class="hljs-comment"># æ¸…ç†æœªä½¿ç”¨çš„å·</span>
docker volume prune
</code></pre>
<h4 data-id="heading-23">6.2 æŒ‚è½½ç›®å½•ï¼ˆBind Mountï¼‰</h4>
<p><strong>ç‰¹ç‚¹ï¼š</strong></p>
<ul>
<li>ç›´æ¥æ˜ å°„å®¿ä¸»æœºç›®å½•</li>
<li>é€‚åˆå¼€å‘ç¯å¢ƒ</li>
<li>å¯ä»¥ç›´æ¥è®¿é—®æ–‡ä»¶</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/28ad43036a5646b583e120b08776b66a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zuo5Lit6aOY6I2h55qE6K6w5b-G:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767489570&amp;x-signature=55UiLPavgvulyjSBfXL2lSnK3dk%3D" alt="docker_storage_comparison.png" loading="lazy"/></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æŒ‚è½½å½“å‰ç›®å½•</span>
docker run -d -v $(<span class="hljs-built_in">pwd</span>)/html:/usr/share/nginx/html nginx

<span class="hljs-comment"># åªè¯»æŒ‚è½½</span>
docker run -d -v $(<span class="hljs-built_in">pwd</span>)/html:/usr/share/nginx/html:ro nginx
</code></pre>
<h3 data-id="heading-24">ä¸ƒã€Docker ç½‘ç»œæ¨¡å¼</h3>
<h4 data-id="heading-25">7.1 ç½‘ç»œæ¨¡å¼ç±»å‹</h4>






























<table><thead><tr><th>æ¨¡å¼</th><th>è¯´æ˜</th><th>ä½¿ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>bridge</td><td>é»˜è®¤æ¨¡å¼ï¼Œå®¹å™¨é€šè¿‡è™šæ‹Ÿç½‘æ¡¥é€šä¿¡</td><td>å•æœºå¤šå®¹å™¨é€šä¿¡</td></tr><tr><td>host</td><td>å…±äº«å®¿ä¸»æœºç½‘ç»œ</td><td>é«˜æ€§èƒ½éœ€æ±‚</td></tr><tr><td>none</td><td>æ— ç½‘ç»œé…ç½®</td><td>ç¦»çº¿å¤„ç†ä»»åŠ¡</td></tr><tr><td>container</td><td>å…±äº«å…¶ä»–å®¹å™¨ç½‘ç»œ</td><td>å®¹å™¨é—´åä½œ</td></tr></tbody></table>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9706c9ba65d94e3e959d0c8e44eb2e42~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zuo5Lit6aOY6I2h55qE6K6w5b-G:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767489570&amp;x-signature=%2B1i0xIx%2Bcdyf30sS6Am5qJ5Zl%2FA%3D" alt="docker_network_modes.png" loading="lazy"/></p>
<h4 data-id="heading-26">7.2 ç½‘ç»œé…ç½®ç¤ºä¾‹</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åˆ›å»ºè‡ªå®šä¹‰ç½‘ç»œ</span>
docker network create --driver bridge my-network

<span class="hljs-comment"># è¿è¡Œå®¹å™¨å¹¶è¿æ¥åˆ°ç½‘ç»œ</span>
docker run -d --name web1 --network my-network nginx
docker run -d --name web2 --network my-network nginx

<span class="hljs-comment"># å®¹å™¨å¯ä»¥é€šè¿‡å®¹å™¨åäº’ç›¸è®¿é—®</span>
docker <span class="hljs-built_in">exec</span> web1 ping web2
</code></pre>
<h3 data-id="heading-27">å…«ã€Docker å®‰å…¨æœ€ä½³å®è·µ</h3>
<h4 data-id="heading-28">8.1 é•œåƒå®‰å…¨</h4>
<pre><code class="hljs language-dockerfile" lang="dockerfile"># ä½¿ç”¨ç‰¹å®šç‰ˆæœ¬æ ‡ç­¾ï¼Œä¸ä½¿ç”¨ latest
FROM python:3.9-slim

# ä½¿ç”¨é root ç”¨æˆ·
RUN useradd -m myuser
USER myuser

# æœ€å°åŒ–å®‰è£…
RUN apt-get update &amp;&amp; apt-get install -y --no-install-recommends \
    curl \
    &amp;&amp; rm -rf /var/lib/apt/lists/*

# æ‰«æé•œåƒæ¼æ´
# docker scan myapp:1.0
</code></pre>
<h4 data-id="heading-29">8.2 è¿è¡Œæ—¶å®‰å…¨</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># é™åˆ¶å®¹å™¨èµ„æº</span>
docker run -d \
  --memory=<span class="hljs-string">"512m"</span> \
  --cpus=<span class="hljs-string">"1.0"</span> \
  --read-only \
  --security-opt=no-new-privileges \
  nginx

<span class="hljs-comment"># ä½¿ç”¨ rootless æ¨¡å¼</span>
<span class="hljs-comment"># é¿å… root ç”¨æˆ·è¿è¡Œå®¹å™¨</span>
</code></pre>
<h3 data-id="heading-30">ä¹ã€å®æˆ˜é¡¹ç›®ï¼šä¸ªäººåšå®¢ç³»ç»Ÿ</h3>
<h4 data-id="heading-31">9.1 é¡¹ç›®æ¶æ„</h4>
<p>æˆ‘ä»¬å°†éƒ¨ç½²ä¸€ä¸ªå®Œæ•´çš„åšå®¢ç³»ç»Ÿï¼ŒåŒ…å«ï¼š</p>
<ul>
<li>WordPressï¼ˆå‰ç«¯ï¼‰</li>
<li>MySQLï¼ˆæ•°æ®åº“ï¼‰</li>
<li>Nginxï¼ˆåå‘ä»£ç†ï¼‰</li>
</ul>
<h4 data-id="heading-32">9.2 docker-compose.yml é…ç½®</h4>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">version:</span> <span class="hljs-string">'3.8'</span>

<span class="hljs-attr">services:</span>
  <span class="hljs-comment"># æ•°æ®åº“æœåŠ¡</span>
  <span class="hljs-attr">database:</span>
    <span class="hljs-attr">image:</span> <span class="hljs-string">mysql:8.0</span>
    <span class="hljs-attr">container_name:</span> <span class="hljs-string">blog-mysql</span>
    <span class="hljs-attr">restart:</span> <span class="hljs-string">always</span>
    <span class="hljs-attr">environment:</span>
      <span class="hljs-attr">MYSQL_ROOT_PASSWORD:</span> <span class="hljs-string">rootpassword</span>
      <span class="hljs-attr">MYSQL_DATABASE:</span> <span class="hljs-string">wordpress</span>
      <span class="hljs-attr">MYSQL_USER:</span> <span class="hljs-string">wpuser</span>
      <span class="hljs-attr">MYSQL_PASSWORD:</span> <span class="hljs-string">wppassword</span>
    <span class="hljs-attr">volumes:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">db-data:/var/lib/mysql</span>
    <span class="hljs-attr">networks:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">blog-network</span>

  <span class="hljs-comment"># WordPress æœåŠ¡</span>
  <span class="hljs-attr">wordpress:</span>
    <span class="hljs-attr">image:</span> <span class="hljs-string">wordpress:latest</span>
    <span class="hljs-attr">container_name:</span> <span class="hljs-string">blog-wordpress</span>
    <span class="hljs-attr">restart:</span> <span class="hljs-string">always</span>
    <span class="hljs-attr">depends_on:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">database</span>
    <span class="hljs-attr">environment:</span>
      <span class="hljs-attr">WORDPRESS_DB_HOST:</span> <span class="hljs-string">database:3306</span>
      <span class="hljs-attr">WORDPRESS_DB_USER:</span> <span class="hljs-string">wpuser</span>
      <span class="hljs-attr">WORDPRESS_DB_PASSWORD:</span> <span class="hljs-string">wppassword</span>
      <span class="hljs-attr">WORDPRESS_DB_NAME:</span> <span class="hljs-string">wordpress</span>
    <span class="hljs-attr">volumes:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">wp-data:/var/www/html</span>
    <span class="hljs-attr">ports:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">"8080:80"</span>
    <span class="hljs-attr">networks:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">blog-network</span>

  <span class="hljs-comment"># phpMyAdminï¼ˆå¯é€‰ï¼‰</span>
  <span class="hljs-attr">phpmyadmin:</span>
    <span class="hljs-attr">image:</span> <span class="hljs-string">phpmyadmin/phpmyadmin</span>
    <span class="hljs-attr">container_name:</span> <span class="hljs-string">blog-phpmyadmin</span>
    <span class="hljs-attr">restart:</span> <span class="hljs-string">always</span>
    <span class="hljs-attr">depends_on:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">database</span>
    <span class="hljs-attr">environment:</span>
      <span class="hljs-attr">PMA_HOST:</span> <span class="hljs-string">database</span>
      <span class="hljs-attr">PMA_PORT:</span> <span class="hljs-number">3306</span>
    <span class="hljs-attr">ports:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">"8081:80"</span>
    <span class="hljs-attr">networks:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">blog-network</span>

<span class="hljs-attr">volumes:</span>
  <span class="hljs-attr">db-data:</span>
  <span class="hljs-attr">wp-data:</span>

<span class="hljs-attr">networks:</span>
  <span class="hljs-attr">blog-network:</span>
    <span class="hljs-attr">driver:</span> <span class="hljs-string">bridge</span>
</code></pre>
<h4 data-id="heading-33">9.3 éƒ¨ç½²æ­¥éª¤</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># 1. å…‹éš†é…ç½®æ–‡ä»¶</span>
<span class="hljs-built_in">mkdir</span> blog &amp;&amp; <span class="hljs-built_in">cd</span> blog

<span class="hljs-comment"># 2. åˆ›å»º docker-compose.yml</span>
<span class="hljs-comment"># ï¼ˆå°†ä¸Šé¢çš„é…ç½®ä¿å­˜ä¸º docker-compose.ymlï¼‰</span>

<span class="hljs-comment"># 3. å¯åŠ¨æœåŠ¡</span>
docker-compose up -d

<span class="hljs-comment"># 4. æŸ¥çœ‹æœåŠ¡çŠ¶æ€</span>
docker-compose ps

<span class="hljs-comment"># 5. è®¿é—®åšå®¢</span>
<span class="hljs-comment"># æ‰“å¼€æµè§ˆå™¨è®¿é—® http://localhost:8080</span>
<span class="hljs-comment"># é¦–æ¬¡è®¿é—®ä¼šè¿›å…¥ WordPress å®‰è£…å‘å¯¼</span>

<span class="hljs-comment"># 6. è®¿é—® phpMyAdmin</span>
<span class="hljs-comment"># http://localhost:8081</span>
<span class="hljs-comment"># ç”¨æˆ·åï¼šroot</span>
<span class="hljs-comment"># å¯†ç ï¼šrootpassword</span>
</code></pre>
<h3 data-id="heading-34">åã€Docker æ•…éšœæ’æŸ¥</h3>
<h4 data-id="heading-35">10.1 å¸¸è§é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ</h4>
<p><strong>é—®é¢˜ 1ï¼šå®¹å™¨æ— æ³•å¯åŠ¨</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æŸ¥çœ‹å®¹å™¨æ—¥å¿—</span>
docker logs &lt;container-id&gt;

<span class="hljs-comment"># æŸ¥çœ‹å®¹å™¨è¯¦æƒ…</span>
docker inspect &lt;container-id&gt;

<span class="hljs-comment"># å°è¯•äº¤äº’å¼è¿è¡Œ</span>
docker run -it &lt;image&gt; /bin/bash
</code></pre>
<p><strong>é—®é¢˜ 2ï¼šç«¯å£å†²çª</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æŸ¥çœ‹ç«¯å£å ç”¨</span>
netstat -tunlp | grep &lt;port&gt;

<span class="hljs-comment"># æ›´æ”¹ç«¯å£æ˜ å°„</span>
docker run -p 8081:80 nginx  <span class="hljs-comment"># ä½¿ç”¨å…¶ä»–ç«¯å£</span>
</code></pre>
<p><strong>é—®é¢˜ 3ï¼šç£ç›˜ç©ºé—´ä¸è¶³</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ¸…ç†æœªä½¿ç”¨çš„é•œåƒ</span>
docker image prune -a

<span class="hljs-comment"># æ¸…ç†æœªä½¿ç”¨çš„å®¹å™¨</span>
docker container prune

<span class="hljs-comment"># æ¸…ç†æœªä½¿ç”¨çš„å·</span>
docker volume prune

<span class="hljs-comment"># ä¸€é”®æ¸…ç†</span>
docker system prune -a --volumes
</code></pre>
<p><strong>é—®é¢˜ 4ï¼šç½‘ç»œè¿æ¥é—®é¢˜</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ£€æŸ¥ç½‘ç»œé…ç½®</span>
docker network inspect &lt;network-name&gt;

<span class="hljs-comment"># é‡å»ºç½‘ç»œ</span>
docker network <span class="hljs-built_in">rm</span> &lt;network-name&gt;
docker network create &lt;network-name&gt;
</code></pre>
<h4 data-id="heading-36">10.2 è°ƒè¯•æŠ€å·§</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æŸ¥çœ‹å®¹å™¨èµ„æºä½¿ç”¨æƒ…å†µ</span>
docker stats

<span class="hljs-comment"># æŸ¥çœ‹å®¹å™¨è¿›ç¨‹</span>
docker top &lt;container-id&gt;

<span class="hljs-comment"># å®æ—¶æŸ¥çœ‹æ—¥å¿—</span>
docker logs -f --<span class="hljs-built_in">tail</span> 100 &lt;container-id&gt;

<span class="hljs-comment"># å¯¼å‡ºå®¹å™¨æ–‡ä»¶ç³»ç»Ÿ</span>
docker <span class="hljs-built_in">export</span> &lt;container-id&gt; &gt; container.tar
</code></pre>
<h3 data-id="heading-37">åä¸€ã€æ€»ç»“</h3>
<p>Docker ä½œä¸ºå®¹å™¨åŒ–æŠ€æœ¯çš„ä»£è¡¨ï¼Œå·²ç»å½»åº•æ”¹å˜äº†è½¯ä»¶å¼€å‘å’Œéƒ¨ç½²çš„æ–¹å¼ã€‚é€šè¿‡æœ¬æ–‡çš„å­¦ä¹ ï¼Œä½ å·²ç»æŒæ¡äº†ï¼š</p>
<p>âœ… Docker çš„æ ¸å¿ƒæ¦‚å¿µï¼ˆé•œåƒã€å®¹å™¨ã€ä»“åº“ï¼‰
âœ… Docker çš„å®‰è£…æ–¹æ³•
âœ… å¸¸ç”¨å‘½ä»¤çš„ä½¿ç”¨
âœ… Dockerfile çš„ç¼–å†™æŠ€å·§
âœ… æ•°æ®æŒä¹…åŒ–å’Œç½‘ç»œé…ç½®
âœ… å®æˆ˜é¡¹ç›®éƒ¨ç½²ç»éªŒ</p>
<p>è®°ä½ï¼š<strong>Docker çš„å­¦ä¹ æ›²çº¿ä¸ç®—é™¡å³­ï¼Œå…³é”®åœ¨äºå¤šåŠ¨æ‰‹å®è·µ</strong>ã€‚æ¯ä¸€ä¸ªå‘½ä»¤ã€æ¯ä¸€ä¸ªé…ç½®ï¼Œéƒ½éœ€è¦åœ¨å®æˆ˜ä¸­æ‰èƒ½çœŸæ­£ç†è§£å’ŒæŒæ¡ã€‚</p>
<hr/></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[SpringBoot æ•´åˆ Nacosï¼Œè®©å¾®æœåŠ¡åƒå¤–å–ç‚¹å•ä¸€æ ·ç®€å•]]></title>    <link>https://juejin.cn/post/7588095884070338560</link>    <guid>https://juejin.cn/post/7588095884070338560</guid>    <pubDate>2025-12-28T02:31:25.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588095884070338560" data-draft-id="7588092534162423808" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="SpringBoot æ•´åˆ Nacosï¼Œè®©å¾®æœåŠ¡åƒå¤–å–ç‚¹å•ä¸€æ ·ç®€å•"/> <meta itemprop="keywords" content="åç«¯,Java,Spring Boot"/> <meta itemprop="datePublished" content="2025-12-28T02:31:25.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ‚Ÿç©ºç å­—"/> <meta itemprop="url" content="https://juejin.cn/user/3139860942296830"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            SpringBoot æ•´åˆ Nacosï¼Œè®©å¾®æœåŠ¡åƒå¤–å–ç‚¹å•ä¸€æ ·ç®€å•
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3139860942296830/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ‚Ÿç©ºç å­—
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-28T02:31:25.000Z" title="Sun Dec 28 2025 02:31:25 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-28
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯å°æ‚Ÿã€‚</p>
<h2 data-id="heading-0">ğŸ¤” Nacos æ˜¯ä»€ä¹ˆï¼Ÿè®©æˆ‘ä»¬ç”¨å¤–å–æ¥ç†è§£ï¼</h2>
<p>å‡å¦‚ä½ æ˜¯ä¸ªåƒè´§ï¼ˆç¨‹åºå‘˜ï¼‰ï¼Œåœ¨ç¾é£Ÿå¹¿åœºï¼ˆå¾®æœåŠ¡æ¶æ„ï¼‰é‡Œï¼š</p>
<p><strong>æ²¡æœ‰ Nacos çš„æƒ…å†µï¼š</strong></p>
<ul>
<li>"è€æ¿ï¼Œçº¢çƒ§è‚‰åœ¨å“ªå®¶åº—ï¼Ÿ" "ä¸çŸ¥é“"</li>
<li>"å¥¶èŒ¶åº—ç”µè¯å¤šå°‘ï¼Ÿ" "æˆ‘æ‰¾æ‰¾å°çº¸æ¡..."</li>
<li>"è¿™å®¶åº—æ¬èµ°äº†ï¼Ÿæ€ä¹ˆä¸å‘Šè¯‰æˆ‘ï¼"</li>
</ul>
<p><strong>æœ‰äº† Nacos çš„æƒ…å†µï¼š</strong></p>
<ul>
<li>Nacos å°±åƒç¾é£Ÿå¹¿åœºçš„<strong>æ™ºèƒ½å¤§å±å¹• + å¹¿æ’­ç³»ç»Ÿ</strong></li>
<li>æ‰€æœ‰åº—é“ºï¼ˆæœåŠ¡ï¼‰è‡ªåŠ¨ç™»è®°ï¼š"æˆ‘æ˜¯å–å¥¶èŒ¶çš„ï¼Œä½ç½®åœ¨AåŒº3å·"</li>
<li>æƒ³å–å¥¶èŒ¶ï¼Ÿçœ‹å±å¹•ï¼ˆæœåŠ¡å‘ç°ï¼‰ç›´æ¥å»</li>
<li>åº—é“ºæ‰“çƒŠï¼Ÿè‡ªåŠ¨å¹¿æ’­ï¼ˆæœåŠ¡ä¸‹çº¿ï¼‰é€šçŸ¥å¤§å®¶</li>
<li>è¿˜èƒ½å‘Šè¯‰ä½ ï¼š"ä»Šå¤©å¥¶èŒ¶åŠä»·ï¼"ï¼ˆé…ç½®ç®¡ç†ï¼‰</li>
</ul>
<p>ç®€å•è¯´ï¼Œ<strong>Nacos = æœåŠ¡æ³¨å†Œä¸­å¿ƒ + é…ç½®ä¸­å¿ƒ</strong>ï¼Œå¾®æœåŠ¡çš„"å±…å§”ä¼šå¤§å¦ˆ"â€”â€”å•¥éƒ½çŸ¥é“ï¼Œå•¥éƒ½ç®¡ï¼</p>
<hr/>
<h2 data-id="heading-1">ğŸš€ æ•´åˆæ­¥éª¤ï¼šè®©æˆ‘ä»¬å¼€å§‹"ç»„è£…"å§ï¼</h2>
<h3 data-id="heading-2">ç¬¬1æ­¥ï¼šå…ˆæ¥ç‚¹"å¼€èƒƒèœ"â€”â€”ç¯å¢ƒå‡†å¤‡</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># 1. å®‰è£…Nacosï¼ˆæ¯”æ³¡é¢è¿˜ç®€å•ï¼‰</span>
<span class="hljs-comment"># ä¸‹è½½åœ°å€ï¼šhttps://github.com/alibaba/nacos/releases</span>
<span class="hljs-comment"># è§£å‹åï¼Œå•æœºæ¨¡å¼å¯åŠ¨ï¼š</span>
sh nacos/bin/startup.sh -m standalone  <span class="hljs-comment"># Linux/Mac</span>
cmd nacos/bin/startup.cmd -m standalone  <span class="hljs-comment"># Windows</span>

<span class="hljs-comment"># è®¿é—® http://localhost:8848/nacos</span>
<span class="hljs-comment"># è´¦å·/å¯†ç ï¼šnacos/nacos</span>
<span class="hljs-comment"># çœ‹åˆ°ç™»å½•é¡µé¢ï¼Ÿæ­å–œï¼Nacoså¯åŠ¨æˆåŠŸï¼</span>
</code></pre>
<h3 data-id="heading-3">ç¬¬2æ­¥ï¼šåˆ›å»ºSpringBooté¡¹ç›®ï¼ˆæˆ‘ä»¬çš„"ç¾é£Ÿæ‘Šä½"ï¼‰</h3>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- pom.xml æ·»åŠ è¿™äº›ä¾èµ–ï¼ˆæˆ‘ä»¬çš„"é£Ÿææ¸…å•"ï¼‰--&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- SpringBootåŸºç¡€å¥—é¤ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- NacosæœåŠ¡å‘ç°ï¼ˆæ‰¾åº—é“ºåŠŸèƒ½ï¼‰ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.alibaba.cloud<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-cloud-starter-alibaba-nacos-discovery<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2021.0.5.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- Nacosé…ç½®ä¸­å¿ƒï¼ˆçœ‹èœå•åŠŸèƒ½ï¼‰ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.alibaba.cloud<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-cloud-starter-alibaba-nacos-config<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2021.0.5.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- å¥åº·æ£€æŸ¥ï¼ˆçœ‹çœ‹æ‘Šä½è¿˜è¥ä¸šå—ï¼‰ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-actuator<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span>
</code></pre>
<h3 data-id="heading-4">ç¬¬3æ­¥ï¼šé…ç½®æ–‡ä»¶ï¼ˆæˆ‘ä»¬çš„"æ‘Šä½è£…ä¿®æ–¹æ¡ˆ"ï¼‰</h3>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># bootstrap.ymlï¼ˆä¼˜å…ˆçº§é«˜ï¼Œå…ˆåŠ è½½ï¼‰</span>
<span class="hljs-comment"># è¿™ä¸ªæ–‡ä»¶ä¸“é—¨ç”¨æ¥å’ŒNacos"æ‰“æ‹›å‘¼"</span>
<span class="hljs-attr">spring:</span>
  <span class="hljs-attr">application:</span>
    <span class="hljs-attr">name:</span> <span class="hljs-string">foodie-service</span>  <span class="hljs-comment"># ç»™æœåŠ¡èµ·ä¸ªåï¼Œæˆ‘æ˜¯"åƒè´§æœåŠ¡"</span>
  <span class="hljs-attr">cloud:</span>
    <span class="hljs-attr">nacos:</span>
      <span class="hljs-attr">discovery:</span>
        <span class="hljs-attr">server-addr:</span> <span class="hljs-string">localhost:8848</span>  <span class="hljs-comment"># Nacoså±…å§”ä¼šåœ°å€</span>
        <span class="hljs-attr">group:</span> <span class="hljs-string">DEFAULT_GROUP</span>         <span class="hljs-comment"># é»˜è®¤åˆ†ç»„ï¼ˆå°±åƒ"ä¸­é¤åŒº"ï¼‰</span>
        <span class="hljs-attr">namespace:</span> <span class="hljs-string">public</span>            <span class="hljs-comment"># å‘½åç©ºé—´ï¼ˆ"ç¾é£Ÿå¹¿åœºä¸€æ¥¼"ï¼‰</span>
        <span class="hljs-attr">ephemeral:</span> <span class="hljs-literal">true</span>              <span class="hljs-comment"># ä¸´æ—¶å®ä¾‹ï¼ˆæ‘†æ‘Šçš„ï¼Œéšæ—¶å¯èƒ½æ”¶æ‘Šï¼‰</span>
        
      <span class="hljs-attr">config:</span>
        <span class="hljs-attr">server-addr:</span> <span class="hljs-string">localhost:8848</span>  <span class="hljs-comment"># é…ç½®ä¸­å¿ƒä¹Ÿæ‰¾åŒä¸€ä¸ªNacos</span>
        <span class="hljs-attr">file-extension:</span> <span class="hljs-string">yaml</span>         <span class="hljs-comment"># é…ç½®æ ¼å¼ç”¨yamlï¼ˆèœå•ç”¨ä¸­æ–‡å†™ï¼‰</span>
        <span class="hljs-attr">group:</span> <span class="hljs-string">DEFAULT_GROUP</span>
        <span class="hljs-attr">namespace:</span> <span class="hljs-string">public</span>
        <span class="hljs-attr">refresh-enabled:</span> <span class="hljs-literal">true</span>        <span class="hljs-comment"># åŠ¨æ€åˆ·æ–°ï¼ˆèœå•æ”¹äº†é©¬ä¸ŠçŸ¥é“ï¼‰</span>
        
  <span class="hljs-attr">config:</span>
    <span class="hljs-attr">import:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">optional:nacos:${spring.application.name}.${spring.cloud.nacos.config.file-extension}</span>
      <span class="hljs-comment"># è¿™å¥è¯æ„æ€æ˜¯ï¼š"Nacoså¤§å¦ˆï¼Œæˆ‘è¦è¯»å–æˆ‘çš„é…ç½®æ–‡ä»¶ï¼"</span>

<span class="hljs-comment"># application.ymlï¼ˆå¸¸è§„é…ç½®ï¼‰</span>
<span class="hljs-attr">server:</span>
  <span class="hljs-attr">port:</span> <span class="hljs-number">8080</span>  <span class="hljs-comment"># æˆ‘çš„æ‘Šä½åœ¨8080å·ä½ç½®</span>

<span class="hljs-attr">management:</span>
  <span class="hljs-attr">endpoints:</span>
    <span class="hljs-attr">web:</span>
      <span class="hljs-attr">exposure:</span>
        <span class="hljs-attr">include:</span> <span class="hljs-string">"*"</span>  <span class="hljs-comment"># æš´éœ²å¥åº·æ£€æŸ¥ç«¯ç‚¹ï¼ˆå‘Šè¯‰å¤§å®¶æˆ‘è¿˜æ´»ç€ï¼‰</span>
</code></pre>
<h3 data-id="heading-5">ç¬¬4æ­¥ï¼šä¸»å¯åŠ¨ç±»ï¼ˆ"æ‘Šä½å¼€å¼ ä»ªå¼"ï¼‰</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> org.springframework.boot.SpringApplication;
<span class="hljs-keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;
<span class="hljs-keyword">import</span> org.springframework.cloud.client.discovery.EnableDiscoveryClient;

<span class="hljs-meta">@SpringBootApplication</span>
<span class="hljs-meta">@EnableDiscoveryClient  // å¼€å¯æœåŠ¡å‘ç°ï¼ˆä¸¾èµ·ç‰Œå­ï¼š<span class="hljs-string">"æˆ‘å¼€å¼ å•¦ï¼"</span>ï¼‰</span>
public <span class="hljs-keyword">class</span> <span class="hljs-title class_">FoodieApplication</span> {
    public static void main(String[] args) {
        SpringApplication.run(FoodieApplication.<span class="hljs-keyword">class</span>, args);
        System.out.println(<span class="hljs-string">"""
            ğŸ‰ åƒè´§æœåŠ¡å¯åŠ¨æˆåŠŸï¼
            ğŸ“ æ‘Šä½å·ï¼š8080
            ğŸ“¢ å·²å‘Nacoså±…å§”ä¼šç™»è®°
            ğŸ” å¼€å§‹è¥ä¸šï¼
            """</span>);
    }
}
</code></pre>
<h3 data-id="heading-6">ç¬¬5æ­¥ï¼šå†™ä¸ªControllerï¼ˆ"åˆ¶ä½œç¾é£Ÿ"ï¼‰</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">import</span> org.springframework.beans.factory.<span class="hljs-keyword">annotation</span>.Value;
<span class="hljs-keyword">import</span> org.springframework.cloud.context.config.<span class="hljs-keyword">annotation</span>.RefreshScope;
<span class="hljs-keyword">import</span> org.springframework.web.bind.<span class="hljs-keyword">annotation</span>.GetMapping;
<span class="hljs-keyword">import</span> org.springframework.web.bind.<span class="hljs-keyword">annotation</span>.RestController;

<span class="hljs-keyword">import</span> javax.<span class="hljs-keyword">annotation</span>.PostConstruct;

<span class="hljs-meta">@RestController</span>
<span class="hljs-meta">@RefreshScope</span>  <span class="hljs-comment">// è¿™ä¸ªæ³¨è§£è®©é…ç½®åŠ¨æ€åˆ·æ–°ï¼ˆèœå•æ”¹äº†ç«‹å³ç”Ÿæ•ˆï¼‰</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">FoodController</span> {
    
    <span class="hljs-meta">@Value(<span class="hljs-string">"<span class="hljs-subst">${food.special:çº¢çƒ§è‚‰}</span>"</span>)</span>  <span class="hljs-comment">// é»˜è®¤å€¼çº¢çƒ§è‚‰</span>
    <span class="hljs-keyword">private</span> String specialFood;
    
    <span class="hljs-meta">@Value(<span class="hljs-string">"<span class="hljs-subst">${food.price:<span class="hljs-number">25</span>}</span>"</span>)</span>
    <span class="hljs-keyword">private</span> Integer price;
    
    <span class="hljs-meta">@PostConstruct</span>
    <span class="hljs-keyword">public</span> void <span class="hljs-keyword">init</span>() {
        System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"ä»Šæ—¥ç‰¹ä»·ï¼š"</span> + specialFood + <span class="hljs-string">"ï¼Œä»…å”®"</span> + price + <span class="hljs-string">"å…ƒï¼"</span>);
    }
    
    <span class="hljs-meta">@GetMapping(<span class="hljs-string">"/order"</span>)</span>
    <span class="hljs-keyword">public</span> String order() {
        <span class="hljs-keyword">return</span> String.format(<span class="hljs-string">"""
            ğŸ½ï¸ è®¢å•è¯¦æƒ…ï¼š
            èœå“ï¼š%s
            ä»·æ ¼ï¼š%då…ƒ
            åˆ¶ä½œä¸­...è¯·ç¨å€™ï¼
            ï¼ˆæœ¬æ¶ˆæ¯æ¥è‡ªæœåŠ¡ï¼š%sï¼‰
            """</span>, specialFood, price, <span class="hljs-string">"åƒè´§æœåŠ¡"</span>);
    }
    
    <span class="hljs-meta">@GetMapping(<span class="hljs-string">"/health"</span>)</span>
    <span class="hljs-keyword">public</span> String health() {
        <span class="hljs-keyword">return</span> <span class="hljs-string">"âœ… æœ¬æ‘Šä½è¥ä¸šä¸­ï¼Œæ¬¢è¿å…‰ä¸´ï¼"</span>;
    }
}
</code></pre>
<h3 data-id="heading-7">ç¬¬6æ­¥ï¼šåœ¨Nacosæ·»åŠ é…ç½®ï¼ˆ"åˆ¶ä½œèœå•"ï¼‰</h3>
<ol>
<li>è®¿é—® <a href="https://link.juejin.cn?target=http%3A%2F%2Flocalhost%3A8848%2Fnacos" target="_blank" title="http://localhost:8848/nacos" ref="nofollow noopener noreferrer">http://localhost:8848/nacos</a></li>
<li>è¿›å…¥ <strong>é…ç½®ç®¡ç† â†’ é…ç½®åˆ—è¡¨</strong></li>
<li>ç‚¹å‡» <strong>+</strong> æ–°å»ºé…ç½®ï¼š</li>
</ol>

<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">Data ID:</span> <span class="hljs-string">foodie-service.yaml</span>  <span class="hljs-comment"># å¿…é¡»å’Œbootstrap.ymlé‡Œçš„ä¸€è‡´</span>
<span class="hljs-attr">Group:</span> <span class="hljs-string">DEFAULT_GROUP</span>
<span class="hljs-string">é…ç½®æ ¼å¼:</span> <span class="hljs-string">YAML</span>
<span class="hljs-string">é…ç½®å†…å®¹:</span>
<span class="hljs-attr">food:</span>
  <span class="hljs-attr">special:</span> <span class="hljs-string">"éº»è¾£å°é¾™è™¾"</span>  <span class="hljs-comment"># ä»Šæ—¥ç‰¹ä»·èœ</span>
  <span class="hljs-attr">price:</span> <span class="hljs-number">88</span>             <span class="hljs-comment"># ç‰¹ä»·</span>
  <span class="hljs-attr">discount:</span> <span class="hljs-string">"8æŠ˜"</span>       <span class="hljs-comment"># æŠ˜æ‰£ä¿¡æ¯</span>

<span class="hljs-attr">spring:</span>
  <span class="hljs-attr">profiles:</span>
    <span class="hljs-attr">active:</span> <span class="hljs-string">dev</span>        <span class="hljs-comment"># ç¯å¢ƒé…ç½®</span>
</code></pre>
<h3 data-id="heading-8">ç¬¬7æ­¥ï¼šæµ‹è¯•ä¸€ä¸‹ï¼ˆ"é¡¾å®¢ç‚¹å•"ï¼‰</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># 1. å¯åŠ¨SpringBootåº”ç”¨</span>
<span class="hljs-comment"># 2. æŸ¥çœ‹Nacosæ§åˆ¶å° - æœåŠ¡ç®¡ç† - æœåŠ¡åˆ—è¡¨</span>
<span class="hljs-comment">#    åº”è¯¥èƒ½çœ‹åˆ° foodie-serviceï¼ŒçŠ¶æ€ä¸º"å¥åº·"</span>
<span class="hljs-comment"># 3. è®¿é—®æµ‹è¯•ï¼š</span>
curl http://localhost:8080/order

<span class="hljs-comment"># è¾“å‡ºåº”è¯¥æ˜¾ç¤º"éº»è¾£å°é¾™è™¾"ï¼Œä»·æ ¼88å…ƒ</span>
<span class="hljs-comment"># è€Œä¸æ˜¯é»˜è®¤çš„çº¢çƒ§è‚‰25å…ƒï¼</span>

<span class="hljs-comment"># 4. åŠ¨æ€åˆ·æ–°æµ‹è¯•ï¼š</span>
<span class="hljs-comment">#    å»Nacosä¿®æ”¹é…ç½®ï¼ŒæŠŠpriceæ”¹æˆ66</span>
<span class="hljs-comment">#    ä¸ç”¨é‡å¯æœåŠ¡ï¼Œç›´æ¥å†æ¬¡è®¿é—®ï¼š</span>
curl http://localhost:8080/order
<span class="hljs-comment">#    ä»·æ ¼å·²ç»å˜æˆ66äº†ï¼ç¥å¥‡å§ï¼Ÿ</span>
</code></pre>
<h3 data-id="heading-9">ç¬¬8æ­¥ï¼šæœåŠ¡å‘ç°ï¼ˆ"æ‰¾å…¶ä»–æ‘Šä½"ï¼‰</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">import</span> org.springframework.beans.factory.<span class="hljs-keyword">annotation</span>.Autowired;
<span class="hljs-keyword">import</span> org.springframework.cloud.client.discovery.DiscoveryClient;
<span class="hljs-keyword">import</span> org.springframework.web.bind.<span class="hljs-keyword">annotation</span>.GetMapping;
<span class="hljs-keyword">import</span> org.springframework.web.bind.<span class="hljs-keyword">annotation</span>.RestController;
<span class="hljs-keyword">import</span> org.springframework.web.client.RestTemplate;

<span class="hljs-keyword">import</span> java.util.List;

<span class="hljs-meta">@RestController</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">FindRestaurantController</span> {
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> DiscoveryClient discoveryClient;
    
    <span class="hljs-meta">@GetMapping(<span class="hljs-string">"/find/drinks"</span>)</span>
    <span class="hljs-keyword">public</span> String findDrinkShop() {
        <span class="hljs-comment">// å‘ç°æ‰€æœ‰æœåŠ¡</span>
        List&lt;String&gt; services = discoveryClient.getServices();
        
        <span class="hljs-comment">// è¿‡æ»¤å‡ºé¥®æ–™ç›¸å…³çš„æœåŠ¡ï¼ˆå®é™…é¡¹ç›®ä¼šç”¨æ›´å¤æ‚çš„é€»è¾‘ï¼‰</span>
        List&lt;ServiceInstance&gt; instances = discoveryClient.getInstances(<span class="hljs-string">"drink-service"</span>);
        
        <span class="hljs-keyword">if</span> (!instances.isEmpty()) {
            String url = instances.<span class="hljs-keyword">get</span>(<span class="hljs-number">0</span>).getUri() + <span class="hljs-string">"/menu"</span>;
            <span class="hljs-keyword">return</span> new RestTemplate().getForObject(url, String.<span class="hljs-keyword">class</span>);
        }
        
        <span class="hljs-keyword">return</span> <span class="hljs-string">"æ²¡æœ‰æ‰¾åˆ°é¥®æ–™åº—ï¼ŒNacoså±…å§”ä¼šä¹Ÿä¸çŸ¥é“åœ¨å“ªğŸ˜¢"</span>;
    }
}
</code></pre>
<h2 data-id="heading-10">ğŸ¯ é«˜çº§ç©æ³•</h2>
<h3 data-id="heading-11">å¤šç¯å¢ƒé…ç½®ï¼ˆ"åˆ†æ¥¼å±‚ç»è¥"ï¼‰</h3>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># Nacosä¸­å¯ä»¥åˆ›å»ºä¸åŒå‘½åç©ºé—´</span>
<span class="hljs-comment"># 1. å‘½åç©ºé—´ç®¡ç† â†’ æ–°å»ºå‘½åç©ºé—´</span>
<span class="hljs-comment">#    dev: å¼€å‘ç¯å¢ƒï¼ˆä¸€æ¥¼è¯•è¥ä¸šï¼‰</span>
<span class="hljs-comment">#    test: æµ‹è¯•ç¯å¢ƒï¼ˆäºŒæ¥¼å†…æµ‹ï¼‰</span>
<span class="hljs-comment">#    prod: ç”Ÿäº§ç¯å¢ƒï¼ˆä¸‰æ¥¼æ­£å¼è¥ä¸šï¼‰</span>

<span class="hljs-comment"># bootstrap.yml åˆ‡æ¢ç¯å¢ƒï¼š</span>
<span class="hljs-attr">spring:</span>
  <span class="hljs-attr">cloud:</span>
    <span class="hljs-attr">nacos:</span>
      <span class="hljs-attr">config:</span>
        <span class="hljs-attr">namespace:</span> <span class="hljs-string">dev-id</span>  <span class="hljs-comment"># å¡«Nacosç”Ÿæˆçš„å‘½åç©ºé—´ID</span>
</code></pre>
<h3 data-id="heading-12">é…ç½®å…±äº«ï¼ˆ"é€šç”¨è°ƒæ–™é…æ–¹"ï¼‰</h3>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># åœ¨Nacosåˆ›å»º Data ID: common.yaml</span>
<span class="hljs-comment"># æ‰€æœ‰æœåŠ¡éƒ½å¯ä»¥è¯»å–è¿™ä¸ªå…¬å…±é…ç½®</span>

<span class="hljs-comment"># æœåŠ¡é…ç½®é‡Œå¯ä»¥è¿™æ ·ç”¨ï¼š</span>
<span class="hljs-attr">spring:</span>
  <span class="hljs-attr">cloud:</span>
    <span class="hljs-attr">nacos:</span>
      <span class="hljs-attr">config:</span>
        <span class="hljs-attr">shared-configs:</span>
          <span class="hljs-bullet">-</span> <span class="hljs-attr">data-id:</span> <span class="hljs-string">common.yaml</span>
            <span class="hljs-attr">group:</span> <span class="hljs-string">DEFAULT_GROUP</span>
            <span class="hljs-attr">refresh:</span> <span class="hljs-literal">true</span>
</code></pre>
<h2 data-id="heading-13">ğŸ“ æ€»ç»“ï¼šNacoså¸¦ç»™æˆ‘ä»¬çš„"ç¾é£Ÿä½“éªŒ"</h2>
<h3 data-id="heading-14">ä¼˜ç‚¹ï¼ˆ"ä¸ºä»€ä¹ˆé€‰æ‹©è¿™ä¸ªç¾é£Ÿå¹¿åœº"ï¼‰ï¼š</h3>
<ol>
<li><strong>ä¸€ç«™å¼æœåŠ¡</strong>ï¼šæœåŠ¡æ³¨å†Œã€é…ç½®ç®¡ç†ã€æœåŠ¡å‘ç°å…¨æå®šï¼Œä¸ç”¨ä¸œå¥”è¥¿è·‘</li>
<li><strong>åŠ¨æ€åˆ·æ–°</strong>ï¼šæ”¹é…ç½®ä¸ç”¨é‡å¯æœåŠ¡ï¼Œå°±åƒæ¢èœå•ä¸ç”¨å…³åº—</li>
<li><strong>å¥åº·æ£€æŸ¥</strong>ï¼šè‡ªåŠ¨å‰”é™¤"ä¸è¥ä¸šçš„æ‘Šä½"ï¼Œä¿è¯ä½ æ€»èƒ½åƒåˆ°æ–°é²œçƒ­ä¹çš„</li>
<li><strong>å¤šç¯å¢ƒæ”¯æŒ</strong>ï¼šå¼€å‘ã€æµ‹è¯•ã€ç”Ÿäº§ç¯å¢ƒå®Œç¾éš”ç¦»ï¼Œä¸ä¼šæŠŠ"è¯•åƒå“"ç«¯ç»™é¡¾å®¢</li>
<li><strong>æ˜“äºä½¿ç”¨</strong>ï¼šæ§åˆ¶å°å‹å¥½ï¼ŒAPIä¸°å¯Œï¼Œä¸­æ–‡æ–‡æ¡£é½å…¨ï¼ˆé˜¿é‡Œå‡ºå“ï¼Œå¿…å±ç²¾å“ï¼‰</li>
</ol>
<h3 data-id="heading-15">æ³¨æ„äº‹é¡¹ï¼ˆ"ç»è¥é¡»çŸ¥"ï¼‰ï¼š</h3>
<ol>
<li><strong>ç½‘ç»œç¨³å®š</strong>ï¼šNacosæŒ‚äº†ï¼ŒæœåŠ¡å°±"å¤±è”"äº†ï¼Œç¡®ä¿é«˜å¯ç”¨éƒ¨ç½²</li>
<li><strong>æƒé™ç®¡ç†</strong>ï¼šç”Ÿäº§ç¯å¢ƒä¸€å®šè¦é…ç½®æƒé™ï¼Œåˆ«è®©è·¯äººéšä¾¿æ”¹"èœå•"</li>
<li><strong>é…ç½®è§„èŒƒ</strong>ï¼šå‘½åè§„èŒƒè¦ç»Ÿä¸€ï¼Œä¸ç„¶æ‰¾é…ç½®åƒ"æµ·åº•æé’ˆ"</li>
<li><strong>ç‰ˆæœ¬å…¼å®¹</strong>ï¼šSpringCloud Alibabaç‰ˆæœ¬è¦å’ŒSpringBootç‰ˆæœ¬åŒ¹é…ï¼Œä¸ç„¶ä¼š"é£Ÿç‰©ç›¸å…‹"</li>
</ol>
<h3 data-id="heading-16">æœ€åï¼š</h3>
<blockquote>
<p>é—®ï¼šä¸ºä»€ä¹ˆç¨‹åºå‘˜å–œæ¬¢ç”¨Nacosï¼Ÿ
ç­”ï¼šå› ä¸ºä»–ä»¬å†ä¹Ÿä¸ç”¨åœ¨ä»£ç é‡Œå†™æ­»é…ç½®äº†ï¼Œç°åœ¨å¯ä»¥ç†ç›´æ°”å£®åœ°è¯´ï¼š"è¿™ä¸ªé…ç½®Nacosç®¡ï¼Œæˆ‘ä¸çŸ¥é“ï¼"</p>
</blockquote>
<blockquote>
<p>é—®ï¼šNacoså’ŒEurekaæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ
ç­”ï¼šEurekaåƒè€å¼ç”µè¯æœ¬ï¼ŒNacosåƒæ™ºèƒ½æ‰‹æœºé€šè®¯å½•â€”â€”è¿˜èƒ½è§†é¢‘é€šè¯ï¼ˆåŠ¨æ€åˆ·æ–°ï¼‰ï¼</p>
</blockquote>
<h2 data-id="heading-17">ğŸ å»ºè®®</h2>
<p>SpringBootæ•´åˆNacoså°±åƒç»™å¤§æ’æ¡£è£…ä¸Šæ™ºèƒ½ç‚¹é¤ç³»ç»Ÿï¼š</p>
<ul>
<li><strong>ç®€å•</strong>ï¼šå‡ è¡Œé…ç½®å°±æå®š</li>
<li><strong>å¼ºå¤§</strong>ï¼šåŠŸèƒ½ä¸°å¯Œï¼Œæ»¡è¶³å„ç§éœ€æ±‚</li>
<li><strong>ç¨³å®š</strong>ï¼šç»è¿‡é˜¿é‡Œå¤§è§„æ¨¡ç”Ÿäº§éªŒè¯</li>
<li><strong>æ´»è·ƒ</strong>ï¼šç¤¾åŒºæ´»è·ƒï¼Œæ›´æ–°åŠæ—¶</li>
</ul>
<p>ç°åœ¨å¯ä»¥è¯•è¯•ï¼Œè®©ä½ çš„å¾®æœåŠ¡åƒå¤–å–ä¸€æ ·ï¼š<strong>éšæ—¶ç‚¹å•ï¼Œå‡†æ—¶é€è¾¾ï¼Œè¿˜èƒ½å®æ—¶è·Ÿè¸ªè¿›åº¦ï¼</strong> ğŸššğŸ’¨</p>
<p>å¥½çš„æ¶æ„å¸ˆå°±åƒå¥½çš„å¨å¸ˆï¼šä¸ä»…è¦ä¼šåšèœï¼Œè¿˜è¦æ‡‚å¾—å¦‚ä½•é«˜æ•ˆç®¡ç†å¨æˆ¿ï¼Nacoså°±æ˜¯ä½ çš„"æ™ºèƒ½å¨æˆ¿ç®¡ç†ç³»ç»Ÿ"ï¼ğŸ‘¨â€ğŸ³ğŸ‘©â€ğŸ³</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/82cbe0a7770841318211e7caa65ea9eb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oKf56m656CB5a2X:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767493885&amp;x-signature=pa6mxtBf%2FAEqH0efEmLpcN88dbQ%3D" alt="SpringBoot æ•´åˆ Nacosï¼Œè®©å¾®æœåŠ¡åƒå¤–å–ç‚¹å•ä¸€æ ·ç®€å•.png" loading="lazy"/></p>
<p><strong>è°¢è°¢ä½ çœ‹æˆ‘çš„æ–‡ç« ï¼Œæ—¢ç„¶çœ‹åˆ°è¿™é‡Œäº†ï¼Œå¦‚æœè§‰å¾—ä¸é”™ï¼Œéšæ‰‹ç‚¹ä¸ªèµã€è½¬å‘ã€åœ¨çœ‹ä¸‰è¿å§ï¼Œæ„Ÿè°¢æ„Ÿè°¢ã€‚é‚£æˆ‘ä»¬ï¼Œä¸‹æ¬¡å†è§ã€‚</strong></p>
<p>æ‚¨çš„ä¸€é”®ä¸‰è¿ï¼Œæ˜¯æˆ‘æ›´æ–°çš„æœ€å¤§åŠ¨åŠ›ï¼Œè°¢è°¢</p>
<p>å±±æ°´æœ‰ç›¸é€¢ï¼Œæ¥æ—¥çš†å¯æœŸï¼Œè°¢è°¢é˜…è¯»ï¼Œæˆ‘ä»¬å†ä¼š</p>
<p>æˆ‘æ‰‹ä¸­çš„é‡‘ç®æ£’ï¼Œä¸Šèƒ½é€šå¤©ï¼Œä¸‹èƒ½æ¢æµ·</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Vuex è¯¦è§£ï¼šç°ä»£ Vue.js åº”ç”¨çš„çŠ¶æ€ç®¡ç†æ–¹æ¡ˆ]]></title>    <link>https://juejin.cn/post/7588043318359785507</link>    <guid>https://juejin.cn/post/7588043318359785507</guid>    <pubDate>2025-12-27T16:09:07.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588043318359785507" data-draft-id="7588043318359769123" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Vuex è¯¦è§£ï¼šç°ä»£ Vue.js åº”ç”¨çš„çŠ¶æ€ç®¡ç†æ–¹æ¡ˆ"/> <meta itemprop="keywords" content="å‰ç«¯,Vue.js,å‰ç«¯æ¡†æ¶"/> <meta itemprop="datePublished" content="2025-12-27T16:09:07.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è¿›å‡»çš„é‡äºº"/> <meta itemprop="url" content="https://juejin.cn/user/1458425238667008"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Vuex è¯¦è§£ï¼šç°ä»£ Vue.js åº”ç”¨çš„çŠ¶æ€ç®¡ç†æ–¹æ¡ˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1458425238667008/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è¿›å‡»çš„é‡äºº
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-27T16:09:07.000Z" title="Sat Dec 27 2025 16:09:07 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¼•è¨€</h2>
<p>åœ¨ç°ä»£å‰ç«¯åº”ç”¨å¼€å‘ä¸­ï¼Œéšç€åº”ç”¨å¤æ‚åº¦çš„ä¸æ–­æå‡ï¼Œç»„ä»¶é—´çš„æ•°æ®å…±äº«å’ŒçŠ¶æ€ç®¡ç†å˜å¾—è¶Šæ¥è¶Šé‡è¦ã€‚Vuex ä½œä¸º Vue.js å®˜æ–¹æ¨èçš„çŠ¶æ€ç®¡ç†åº“ï¼Œä¸º Vue åº”ç”¨æä¾›äº†ä¸€ç§é›†ä¸­å¼ã€å¯é¢„æµ‹çš„çŠ¶æ€ç®¡ç†æ¨¡å¼ã€‚æœ¬æ–‡å°†ç»“åˆæä¾›çš„ä»£ç å®ä¾‹ï¼Œæ·±å…¥æ¢è®¨ Vuex çš„æ ¸å¿ƒæ¦‚å¿µã€å·¥ä½œåŸç†ä»¥åŠå®é™…åº”ç”¨ã€‚</p>
<h2 data-id="heading-1">ä¸€ã€Vuex çš„åŸºæœ¬æ¦‚å¿µ</h2>
<p>Vuex æ˜¯ä¸€ä¸ªä¸“é—¨ä¸º Vue.js åº”ç”¨ç¨‹åºå¼€å‘çš„<strong>çŠ¶æ€ç®¡ç†æ¨¡å¼ + åº“</strong>ã€‚å®ƒé‡‡ç”¨é›†ä¸­å¼å­˜å‚¨ç®¡ç†åº”ç”¨çš„æ‰€æœ‰ç»„ä»¶çš„çŠ¶æ€ï¼Œå¹¶ä»¥ç›¸åº”çš„è§„åˆ™ä¿è¯çŠ¶æ€ä»¥ä¸€ç§å¯é¢„æµ‹çš„æ–¹å¼å‘ç”Ÿå˜åŒ–ã€‚</p>
<h3 data-id="heading-2">1.1 ä¸ºä»€ä¹ˆéœ€è¦ Vuexï¼Ÿ</h3>
<p>ä»æä¾›çš„ä»£ç ä¸­å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬æœ‰ä¸¤ä¸ªç»„ä»¶Â <code>MyCount</code>Â å’ŒÂ <code>MyPersons</code>ï¼Œå®ƒä»¬éƒ½éœ€è¦è®¿é—®å’Œä¿®æ”¹å…±äº«çš„çŠ¶æ€æ•°æ®ï¼š</p>
<ul>
<li><code>MyCount</code>Â ç»„ä»¶éœ€è¦è®¿é—®å’Œä¿®æ”¹Â <code>sum</code>ï¼ˆæ±‚å’Œå€¼ï¼‰</li>
<li><code>MyPersons</code>Â ç»„ä»¶éœ€è¦è®¿é—®å’Œä¿®æ”¹Â <code>persons</code>ï¼ˆäººå‘˜åˆ—è¡¨ï¼‰</li>
<li>ä¸¤ä¸ªç»„ä»¶éƒ½éœ€è¦ç›¸äº’è®¿é—®å¯¹æ–¹çš„çŠ¶æ€æ•°æ®</li>
</ul>
<p>å¦‚æœæ²¡æœ‰ Vuexï¼Œè¿™ç§è·¨ç»„ä»¶çš„æ•°æ®å…±äº«éœ€è¦é€šè¿‡å¤æ‚çš„çˆ¶å­ç»„ä»¶ä¼ å€¼æˆ–äº‹ä»¶æ€»çº¿æ¥å®ç°ï¼Œéšç€åº”ç”¨è§„æ¨¡æ‰©å¤§ï¼Œä»£ç å°†å˜å¾—éš¾ä»¥ç»´æŠ¤ã€‚Vuex é€šè¿‡æä¾›ä¸€ä¸ªå…¨å±€çš„å•ä¾‹çŠ¶æ€æ ‘ï¼Œä¼˜é›…åœ°è§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚</p>
<h3 data-id="heading-3">1.2 Vuex çš„æ ¸å¿ƒæ¦‚å¿µ</h3>
<p>ä»Â <code>index.js</code>Â æ–‡ä»¶ä¸­å¯ä»¥çœ‹åˆ°ï¼ŒVuex åŒ…å«ä»¥ä¸‹å‡ ä¸ªæ ¸å¿ƒéƒ¨åˆ†ï¼š</p>
<p>javascript</p>
<p>å¤åˆ¶ä¸‹è½½</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">new</span> Vuex.<span class="hljs-built_in">Store</span>({
  actions,
  mutations,
  state,
  getters
})
</code></pre>
<p><strong>Stateï¼ˆçŠ¶æ€ï¼‰</strong> ï¼šåº”ç”¨çš„å•ä¸€çŠ¶æ€æ ‘ï¼ŒåŒ…å«æ‰€æœ‰éœ€è¦å…±äº«çš„æ•°æ®ã€‚</p>
<p><strong>Mutationsï¼ˆå˜æ›´ï¼‰</strong> ï¼šå”¯ä¸€æ›´æ”¹çŠ¶æ€çš„æ–¹æ³•ï¼Œå¿…é¡»æ˜¯åŒæ­¥å‡½æ•°ã€‚</p>
<p><strong>Actionsï¼ˆåŠ¨ä½œï¼‰</strong> ï¼šæäº¤ mutationsï¼Œå¯ä»¥åŒ…å«ä»»æ„å¼‚æ­¥æ“ä½œã€‚</p>
<p><strong>Gettersï¼ˆè·å–å™¨ï¼‰</strong> ï¼šä» state ä¸­æ´¾ç”Ÿå‡ºä¸€äº›çŠ¶æ€ï¼Œç±»ä¼¼äºè®¡ç®—å±æ€§ã€‚</p>
<h2 data-id="heading-4">äºŒã€Vuex çš„åŸºæœ¬ä½¿ç”¨</h2>
<h3 data-id="heading-5">2.1 åˆå§‹åŒ–ä¸é…ç½®</h3>
<p>é¦–å…ˆéœ€è¦åœ¨é¡¹ç›®ä¸­å®‰è£…å’Œé…ç½® Vuexï¼š</p>
<p>javascript</p>
<p>å¤åˆ¶ä¸‹è½½</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">Vuex</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'vuex'</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Vue</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>

<span class="hljs-comment">// ä½¿ç”¨æ’ä»¶</span>
<span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">use</span>(<span class="hljs-title class_">Vuex</span>)

<span class="hljs-keyword">const</span> store = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vuex</span>.<span class="hljs-title class_">Store</span>({
  <span class="hljs-comment">// é…ç½®é¡¹</span>
})
</code></pre>
<h3 data-id="heading-6">2.2 ç»„ä»¶ä¸­è®¿é—®çŠ¶æ€</h3>
<p>åœ¨ç»„ä»¶ä¸­ï¼Œå¯ä»¥é€šè¿‡Â <code>$store</code>Â è®¿é—® Vuex çš„çŠ¶æ€ï¼š</p>
<p>javascript</p>
<p>å¤åˆ¶ä¸‹è½½</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åœ¨è®¡ç®—å±æ€§ä¸­ç›´æ¥è®¿é—®</span>
<span class="hljs-attr">computed</span>: {
  <span class="hljs-title function_">persons</span>(<span class="hljs-params"/>){
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">$store</span>.<span class="hljs-property">state</span>.<span class="hljs-property">persons</span>
  },
  <span class="hljs-title function_">sum</span>(<span class="hljs-params"/>){
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">$store</span>.<span class="hljs-property">state</span>.<span class="hljs-property">sum</span>
  }
}
</code></pre>
<h3 data-id="heading-7">2.3 ç»„ä»¶ä¸­ä¿®æ”¹çŠ¶æ€</h3>
<p>ä¿®æ”¹çŠ¶æ€æœ‰ä¸¤ç§æ–¹å¼ï¼š</p>
<p><strong>æ–¹å¼ä¸€ï¼šé€šè¿‡ actionsï¼ˆå¯åŒ…å«å¼‚æ­¥æ“ä½œï¼‰</strong></p>
<p>javascript</p>
<p>å¤åˆ¶ä¸‹è½½</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-attr">methods</span>: {
  <span class="hljs-title function_">incrementOdd</span>(<span class="hljs-params"/>){
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">$store</span>.<span class="hljs-title function_">dispatch</span>(<span class="hljs-string">'jiaOdd'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">n</span>)
  }
}
</code></pre>
<p><strong>æ–¹å¼äºŒï¼šç›´æ¥æäº¤ mutationsï¼ˆåŒæ­¥æ“ä½œï¼‰</strong></p>
<p>javascript</p>
<p>å¤åˆ¶ä¸‹è½½</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-attr">methods</span>: {
  <span class="hljs-title function_">add</span>(<span class="hljs-params"/>){
    <span class="hljs-keyword">const</span> personObj = {<span class="hljs-attr">id</span>:<span class="hljs-title function_">nanoid</span>(), <span class="hljs-attr">name</span>:<span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span>};
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">$store</span>.<span class="hljs-title function_">commit</span>(<span class="hljs-string">'ADD_PERSON'</span>, personObj)
  }
}
</code></pre>
<h2 data-id="heading-8">ä¸‰ã€å››ä¸ª Map è¾…åŠ©å‡½æ•°çš„ä½¿ç”¨</h2>
<p>ä¸ºäº†ç®€åŒ–ä»£ç ï¼ŒVuex æä¾›äº†å››ä¸ªè¾…åŠ©å‡½æ•°ï¼š</p>
<h3 data-id="heading-9">3.1 mapState</h3>
<p>å°† state æ˜ å°„ä¸ºç»„ä»¶çš„è®¡ç®—å±æ€§ï¼š</p>
<p>javascript</p>
<p>å¤åˆ¶ä¸‹è½½</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-comment">// æ•°ç»„å†™æ³•ï¼ˆç®€å†™ï¼‰</span>
...<span class="hljs-title function_ invoke__">mapState</span>([<span class="hljs-string">'sum'</span>, <span class="hljs-string">'persons'</span>])

<span class="hljs-comment">// å¯¹è±¡å†™æ³•ï¼ˆå¯é‡å‘½åï¼‰</span>
...<span class="hljs-title function_ invoke__">mapState</span>({<span class="hljs-attr">currentSum</span>: <span class="hljs-string">'sum'</span>, <span class="hljs-attr">personList</span>: <span class="hljs-string">'persons'</span>})
</code></pre>
<h3 data-id="heading-10">3.2 mapGetters</h3>
<p>å°† getters æ˜ å°„ä¸ºç»„ä»¶çš„è®¡ç®—å±æ€§ï¼š</p>
<p>javascript</p>
<p>å¤åˆ¶ä¸‹è½½</p>
<pre><code class="hljs language-css" lang="css">..<span class="hljs-selector-class">.mapGetters</span>(<span class="hljs-selector-attr">[<span class="hljs-string">'bigSum'</span>]</span>)
</code></pre>
<h3 data-id="heading-11">3.3 mapMutations</h3>
<p>å°† mutations æ˜ å°„ä¸ºç»„ä»¶çš„æ–¹æ³•ï¼š</p>
<p>javascript</p>
<p>å¤åˆ¶ä¸‹è½½</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-comment">// å¯¹è±¡å†™æ³•</span>
...<span class="hljs-title function_ invoke__">mapMutations</span>({<span class="hljs-attr">increment</span>: <span class="hljs-string">'JIA'</span>, <span class="hljs-attr">decrement</span>: <span class="hljs-string">'JIAN'</span>}),

<span class="hljs-comment">// æ•°ç»„å†™æ³•</span>
...<span class="hljs-title function_ invoke__">mapMutations</span>([<span class="hljs-string">'JIA'</span>, <span class="hljs-string">'JIAN'</span>])
</code></pre>
<h3 data-id="heading-12">3.4 mapActions</h3>
<p>å°† actions æ˜ å°„ä¸ºç»„ä»¶çš„æ–¹æ³•ï¼š</p>
<p>javascript</p>
<p>å¤åˆ¶ä¸‹è½½</p>
<pre><code class="hljs language-php" lang="php">...<span class="hljs-title function_ invoke__">mapActions</span>({<span class="hljs-attr">incrementOdd</span>: <span class="hljs-string">'jiaOdd'</span>, <span class="hljs-attr">incrementWait</span>: <span class="hljs-string">'jiaWait'</span>})
</code></pre>
<h2 data-id="heading-13">å››ã€Vuex æ¨¡å—åŒ–ä¸å‘½åç©ºé—´</h2>
<p>éšç€åº”ç”¨è§„æ¨¡æ‰©å¤§ï¼Œå°†æ‰€æœ‰çŠ¶æ€é›†ä¸­åœ¨ä¸€ä¸ªæ–‡ä»¶ä¸­ä¼šå˜å¾—éš¾ä»¥ç»´æŠ¤ã€‚Vuex å…è®¸æˆ‘ä»¬å°† store åˆ†å‰²æˆæ¨¡å—ï¼Œæ¯ä¸ªæ¨¡å—æ‹¥æœ‰è‡ªå·±çš„ stateã€mutationsã€actionsã€gettersã€‚</p>
<h3 data-id="heading-14">4.1 æ¨¡å—åŒ–é…ç½®</h3>
<p>ä»é‡æ„åçš„ä»£ç å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬å°† store æ‹†åˆ†æˆäº†ä¸¤ä¸ªæ¨¡å—ï¼š</p>
<p><strong>count.js</strong>Â - å¤„ç†è®¡æ•°ç›¸å…³çš„çŠ¶æ€<br/>
<strong>person.js</strong>Â - å¤„ç†äººå‘˜ç›¸å…³çš„çŠ¶æ€</p>
<p>javascript</p>
<p>å¤åˆ¶ä¸‹è½½</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// index.js</span>
<span class="hljs-keyword">import</span> countAbout <span class="hljs-keyword">from</span> <span class="hljs-string">'./count'</span>
<span class="hljs-keyword">import</span> personAbout <span class="hljs-keyword">from</span> <span class="hljs-string">'./person'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vuex</span>.<span class="hljs-title class_">Store</span>({
  <span class="hljs-attr">modules</span>: {
    countAbout,
    personAbout
  }
})
</code></pre>
<h3 data-id="heading-15">4.2 å‘½åç©ºé—´</h3>
<p>é€šè¿‡è®¾ç½®Â <code>namespaced: true</code>Â å¼€å¯å‘½åç©ºé—´ï¼Œå¯ä»¥é¿å…ä¸åŒæ¨¡å—ä¹‹é—´çš„å‘½åå†²çªï¼š</p>
<p>javascript</p>
<p>å¤åˆ¶ä¸‹è½½</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-comment">// count.js</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  namespaced: <span class="hljs-literal">true</span>,
  <span class="hljs-comment">// ... å…¶ä»–é…ç½®</span>
}
</code></pre>
<h3 data-id="heading-16">4.3 æ¨¡å—åŒ–åçš„è®¿é—®æ–¹å¼</h3>
<p><strong>è®¿é—® stateï¼š</strong></p>
<p>javascript</p>
<p>å¤åˆ¶ä¸‹è½½</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ç›´æ¥è®¿é—®</span>
<span class="hljs-title function_">persons</span>(<span class="hljs-params"/>){
  <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">$store</span>.<span class="hljs-property">state</span>.<span class="hljs-property">personAbout</span>.<span class="hljs-property">persons</span>
}

<span class="hljs-comment">// ä½¿ç”¨ mapStateï¼ˆéœ€è¦æŒ‡å®šå‘½åç©ºé—´ï¼‰</span>
...<span class="hljs-title function_">mapState</span>(<span class="hljs-string">'personAbout'</span>, [<span class="hljs-string">'persons'</span>])
</code></pre>
<p><strong>è®¿é—® gettersï¼š</strong></p>
<p>javascript</p>
<p>å¤åˆ¶ä¸‹è½½</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ç›´æ¥è®¿é—®</span>
<span class="hljs-title function_">firstPersonName</span>(<span class="hljs-params"/>){
  <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">$store</span>.<span class="hljs-property">getters</span>[<span class="hljs-string">'personAbout/firstPersonName'</span>];
}

<span class="hljs-comment">// ä½¿ç”¨ mapGetters</span>
...<span class="hljs-title function_">mapGetters</span>(<span class="hljs-string">'personAbout'</span>, [<span class="hljs-string">'firstPersonName'</span>])
</code></pre>
<p><strong>æäº¤ mutationsï¼š</strong></p>
<p>javascript</p>
<p>å¤åˆ¶ä¸‹è½½</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-comment">// ç›´æ¥æäº¤</span>
this.<span class="hljs-variable">$store</span>.<span class="hljs-title function_ invoke__">commit</span>(<span class="hljs-string">'personAbout/ADD_PERSON'</span>, personObj);

<span class="hljs-comment">// ä½¿ç”¨ mapMutations</span>
...<span class="hljs-title function_ invoke__">mapMutations</span>(<span class="hljs-string">'countAbout'</span>, {<span class="hljs-attr">increment</span>: <span class="hljs-string">'JIA'</span>, <span class="hljs-attr">decrement</span>: <span class="hljs-string">'JIAN'</span>})
</code></pre>
<p><strong>åˆ†å‘ actionsï¼š</strong></p>
<p>javascript</p>
<p>å¤åˆ¶ä¸‹è½½</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-comment">// ç›´æ¥åˆ†å‘</span>
this.<span class="hljs-variable">$store</span>.<span class="hljs-title function_ invoke__">dispatch</span>(<span class="hljs-string">'personAbout/addWangPerson'</span>, personObj);

<span class="hljs-comment">// ä½¿ç”¨ mapActions</span>
...<span class="hljs-title function_ invoke__">mapActions</span>(<span class="hljs-string">'countAbout'</span>, {<span class="hljs-attr">incrementOdd</span>: <span class="hljs-string">'jiaOdd'</span>, <span class="hljs-attr">incrementWait</span>: <span class="hljs-string">'jiaWait'</span>})
</code></pre>
<h2 data-id="heading-17">äº”ã€å®é™…åº”ç”¨æ¡ˆä¾‹åˆ†æ</h2>
<h3 data-id="heading-18">5.1 è®¡æ•°å™¨æ¨¡å—ï¼ˆcount.jsï¼‰</h3>
<p>è¿™ä¸ªæ¨¡å—å±•ç¤ºäº†å¦‚ä½•å¤„ç†åŒæ­¥å’Œå¼‚æ­¥çš„çŠ¶æ€æ›´æ–°ï¼š</p>
<p>javascript</p>
<p>å¤åˆ¶ä¸‹è½½</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åŒæ­¥æ“ä½œ</span>
<span class="hljs-title function_">JIA</span>(<span class="hljs-params">state, value</span>) {
  state.<span class="hljs-property">sum</span> += value;
},

<span class="hljs-comment">// å¼‚æ­¥æ“ä½œï¼ˆé€šè¿‡ actionï¼‰</span>
<span class="hljs-title function_">jiaWait</span>(<span class="hljs-params">context, value</span>) {
  <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
    context.<span class="hljs-title function_">commit</span>(<span class="hljs-string">'JIAWAIT'</span>, value);
  }, <span class="hljs-number">500</span>);
}
</code></pre>
<h3 data-id="heading-19">5.2 äººå‘˜ç®¡ç†æ¨¡å—ï¼ˆperson.jsï¼‰</h3>
<p>è¿™ä¸ªæ¨¡å—å±•ç¤ºäº†æ›´å¤æ‚çš„ä¸šåŠ¡é€»è¾‘ï¼š</p>
<p>javascript</p>
<p>å¤åˆ¶ä¸‹è½½</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ¡ä»¶æ€§æäº¤ mutation</span>
<span class="hljs-title function_">addWangPerson</span>(<span class="hljs-params">context, value</span>) {
  <span class="hljs-keyword">if</span> (value.<span class="hljs-property">name</span>.<span class="hljs-title function_">indexOf</span>(<span class="hljs-string">'ç‹'</span>) === <span class="hljs-number">0</span>) {
    context.<span class="hljs-title function_">commit</span>(<span class="hljs-string">'ADD_PERSON'</span>, value);
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-title function_">alert</span>(<span class="hljs-string">'æ·»åŠ çš„äººå¿…é¡»å§“ç‹ï¼'</span>);
  }
},

<span class="hljs-comment">// å¼‚æ­¥ API è°ƒç”¨</span>
<span class="hljs-title function_">addServer</span>(<span class="hljs-params">context</span>) {
  axios.<span class="hljs-title function_">get</span>(<span class="hljs-string">'https://api.uixsj.cn/hitokoto/get?type=social'</span>).<span class="hljs-title function_">then</span>(
    <span class="hljs-function"><span class="hljs-params">response</span> =&gt;</span> {
      <span class="hljs-keyword">const</span> word = {<span class="hljs-attr">id</span>: <span class="hljs-title function_">nanoid</span>(), <span class="hljs-attr">name</span>: response.<span class="hljs-property">data</span>};
      context.<span class="hljs-title function_">commit</span>(<span class="hljs-string">'ADD_PERSON'</span>, word);
    },
    <span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> {
      <span class="hljs-title function_">alert</span>(error.<span class="hljs-property">message</span>);
    }
  )
}
</code></pre>
<h2 data-id="heading-20">å…­ã€Vuex çš„æœ€ä½³å®è·µ</h2>
<h3 data-id="heading-21">6.1 ä¸¥æ ¼éµå¾ªæ•°æ®æµ</h3>
<p>Vuex å¼ºåˆ¶å®æ–½ä¸€ç§å•å‘æ•°æ®æµï¼š</p>
<ol>
<li>ç»„ä»¶æ´¾å‘ Action</li>
<li>Action æäº¤ Mutation</li>
<li>Mutation ä¿®æ”¹ State</li>
<li>State å˜åŒ–è§¦å‘ç»„ä»¶æ›´æ–°</li>
</ol>
<h3 data-id="heading-22">6.2 åˆç†ä½¿ç”¨æ¨¡å—åŒ–</h3>
<ul>
<li>æŒ‰åŠŸèƒ½æˆ–ä¸šåŠ¡é€»è¾‘åˆ’åˆ†æ¨¡å—</li>
<li>ä¸ºæ‰€æœ‰æ¨¡å—å¯ç”¨å‘½åç©ºé—´</li>
<li>ä¿æŒæ¨¡å—çš„ç‹¬ç«‹æ€§</li>
</ul>
<h3 data-id="heading-23">6.3 å¼‚æ­¥æ“ä½œçš„å¤„ç†</h3>
<ul>
<li>æ‰€æœ‰å¼‚æ­¥é€»è¾‘æ”¾åœ¨ Actions ä¸­</li>
<li>ä¿æŒ Mutations çš„çº¯ç²¹æ€§ï¼ˆåªåšçŠ¶æ€å˜æ›´ï¼‰</li>
<li>åˆç†å¤„ç†å¼‚æ­¥é”™è¯¯</li>
</ul>
<h3 data-id="heading-24">6.4 è¡¨å•å¤„ç†ç­–ç•¥</h3>
<p>åœ¨Â <code>MyPersons.vue</code>Â ä¸­ï¼Œæˆ‘ä»¬çœ‹åˆ°äº†å…¸å‹çš„è¡¨å•å¤„ç†æ¨¡å¼ï¼š</p>
<p>javascript</p>
<p>å¤åˆ¶ä¸‹è½½</p>
<pre><code class="hljs language-kotlin" lang="kotlin">add(){
  <span class="hljs-keyword">const</span> personObj = {id: nanoid(), name: <span class="hljs-keyword">this</span>.name};
  <span class="hljs-keyword">this</span>.$store.commit(<span class="hljs-string">'personAbout/ADD_PERSON'</span>, personObj);
  <span class="hljs-keyword">this</span>.name = <span class="hljs-string">''</span>; <span class="hljs-comment">// æ¸…ç©ºè¡¨å•</span>
}
</code></pre>
<h2 data-id="heading-25">ä¸ƒã€Vuex çš„ä¼˜ç¼ºç‚¹åˆ†æ</h2>
<h3 data-id="heading-26">7.1 ä¼˜ç‚¹</h3>
<ol>
<li><strong>é›†ä¸­å¼çŠ¶æ€ç®¡ç†</strong>ï¼šæ‰€æœ‰çŠ¶æ€å˜åŒ–éƒ½å¯ä»¥è¿½è¸ªå’Œè°ƒè¯•</li>
<li><strong>ç»„ä»¶é€šä¿¡ç®€åŒ–</strong>ï¼šè·¨ç»„ä»¶æ•°æ®å…±äº«å˜å¾—ç®€å•</li>
<li><strong>å¯é¢„æµ‹çš„çŠ¶æ€å˜åŒ–</strong>ï¼šé€šè¿‡ä¸¥æ ¼çš„è§„åˆ™ä¿è¯çŠ¶æ€å˜åŒ–çš„å¯é¢„æµ‹æ€§</li>
<li><strong>æ’ä»¶ç”Ÿæ€ä¸°å¯Œ</strong>ï¼šæ”¯æŒæ—¶é—´æ—…è¡Œã€çŠ¶æ€å¿«ç…§ç­‰é«˜çº§åŠŸèƒ½</li>
<li><strong>TypeScript æ”¯æŒ</strong>ï¼šæä¾›å®Œæ•´çš„ç±»å‹å®šä¹‰</li>
</ol>
<h3 data-id="heading-27">7.2 ç¼ºç‚¹</h3>
<ol>
<li><strong>å­¦ä¹ æ›²çº¿</strong>ï¼šéœ€è¦ç†è§£ Flux æ¶æ„æ€æƒ³</li>
<li><strong>ä»£ç å†—ä½™</strong>ï¼šç®€å•çš„åº”ç”¨å¯èƒ½ä¸éœ€è¦ Vuex</li>
<li><strong>æ ·æ¿ä»£ç </strong>ï¼šéœ€è¦ç¼–å†™ä¸€å®šé‡çš„æ¨¡æ¿ä»£ç </li>
<li><strong>æ€§èƒ½è€ƒè™‘</strong>ï¼šå¤§å‹çŠ¶æ€æ ‘å¯èƒ½å½±å“æ€§èƒ½</li>
</ol>
<h2 data-id="heading-28">å…«ã€æ›¿ä»£æ–¹æ¡ˆä¸æœªæ¥è¶‹åŠ¿</h2>
<h3 data-id="heading-29">8.1 Vuex çš„æ›¿ä»£æ–¹æ¡ˆ</h3>
<ol>
<li><strong>Pinia</strong>ï¼šVue.js çš„ä¸‹ä¸€ä»£çŠ¶æ€ç®¡ç†åº“ï¼Œæ›´åŠ è½»é‡ä¸”å¯¹ TypeScript å‹å¥½</li>
<li><strong>Composition API</strong>ï¼šä½¿ç”¨Â <code>reactive</code>Â å’ŒÂ <code>provide/inject</code>Â å®ç°ç®€å•çš„çŠ¶æ€å…±äº«</li>
<li><strong>äº‹ä»¶æ€»çº¿</strong>ï¼šé€‚åˆå°å‹åº”ç”¨çš„ç®€å•é€šä¿¡</li>
</ol>
<h3 data-id="heading-30">8.2 Vuex 4 å’Œ Vuex 5</h3>
<ul>
<li>Vuex 4 æ”¯æŒ Vue 3ï¼ŒAPI åŸºæœ¬ä¿æŒä¸å˜</li>
<li>Vuex 5ï¼ˆå¼€å‘ä¸­ï¼‰å°†æä¾›æ›´å¥½çš„ TypeScript æ”¯æŒå’Œæ›´ç®€æ´çš„ API</li>
</ul>
<h2 data-id="heading-31">ç»“è®º</h2>
<p>Vuex ä½œä¸º Vue.js ç”Ÿæ€ä¸­æˆç†Ÿçš„çŠ¶æ€ç®¡ç†æ–¹æ¡ˆï¼Œä¸ºæ„å»ºä¸­å¤§å‹ Vue åº”ç”¨æä¾›äº†å¯é çš„æ¶æ„åŸºç¡€ã€‚é€šè¿‡æœ¬æ–‡çš„åˆ†æï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ° Vuex å¦‚ä½•ï¼š</p>
<ol>
<li>æä¾›é›†ä¸­å¼çš„çŠ¶æ€ç®¡ç†</li>
<li>é€šè¿‡ä¸¥æ ¼çš„è§„åˆ™ä¿è¯çŠ¶æ€å˜åŒ–çš„å¯é¢„æµ‹æ€§</li>
<li>é€šè¿‡æ¨¡å—åŒ–æ”¯æŒå¤§å‹åº”ç”¨çš„çŠ¶æ€ç®¡ç†</li>
<li>æä¾›ä¸°å¯Œçš„è¾…åŠ©å‡½æ•°ç®€åŒ–å¼€å‘</li>
</ol>
<p>åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œæ˜¯å¦ä½¿ç”¨ Vuex åº”è¯¥æ ¹æ®åº”ç”¨è§„æ¨¡å’Œå¤æ‚åº¦æ¥å†³å®šã€‚å¯¹äºå°å‹åº”ç”¨ï¼Œç®€å•çš„ç»„ä»¶é€šä¿¡å¯èƒ½å°±è¶³å¤Ÿäº†ï¼›ä½†å¯¹äºä¸­å¤§å‹åº”ç”¨ï¼ŒVuex æä¾›çš„ç»“æ„åŒ–çŠ¶æ€ç®¡ç†æ–¹æ¡ˆå°†å¤§å¤§æå‡ä»£ç çš„å¯ç»´æŠ¤æ€§å’Œå¯æ‰©å±•æ€§ã€‚</p>
<p>éšç€ Vue 3 çš„æ™®åŠï¼Œå¼€å‘è€…ä¹Ÿå¯ä»¥è€ƒè™‘ä½¿ç”¨ Composition API æˆ– Pinia ç­‰æ›´ç°ä»£çš„è§£å†³æ–¹æ¡ˆï¼Œä½† Vuex çš„æ ¸å¿ƒæ€æƒ³å’Œè®¾è®¡æ¨¡å¼ä»ç„¶æ˜¯å€¼å¾—å­¦ä¹ å’Œå€Ÿé‰´çš„å®è´µç»éªŒã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Single-SPA å­¦ä¹ æ€»ç»“]]></title>    <link>https://juejin.cn/post/7588084804093935654</link>    <guid>https://juejin.cn/post/7588084804093935654</guid>    <pubDate>2025-12-28T02:22:18.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588084804093935654" data-draft-id="7588139768275124275" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Single-SPA å­¦ä¹ æ€»ç»“"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,å¾®æœåŠ¡"/> <meta itemprop="datePublished" content="2025-12-28T02:22:18.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é¹åŒ—æµ·"/> <meta itemprop="url" content="https://juejin.cn/user/1425415102792237"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Single-SPA å­¦ä¹ æ€»ç»“
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1425415102792237/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é¹åŒ—æµ·
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-28T02:22:18.000Z" title="Sun Dec 28 2025 02:22:18 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-28
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:2;font-weight:400;font-size:15px;overflow-x:hidden;color:#333;letter-spacing:1.2px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1:first-child,.markdown-body h2:first-child,.markdown-body h3:first-child,.markdown-body h4:first-child,.markdown-body h5:first-child,.markdown-body h6:first-child{margin-top:-1.5rem;margin-bottom:1rem}.markdown-body h1:before,.markdown-body h2:before,.markdown-body h3:before,.markdown-body h4:before,.markdown-body h5:before,.markdown-body h6:before{content:"#";display:inline-block;color:#3eaf7c;padding-right:.23em}.markdown-body h1{position:relative;font-size:2.5rem;margin-bottom:5px}.markdown-body h1:before{font-size:2.5rem}.markdown-body h2{padding-bottom:.5rem;font-size:2.2rem;border-bottom:1px solid #ececec}.markdown-body h3{font-size:1.5rem;padding-bottom:0}.markdown-body h4{font-size:1.25rem}.markdown-body h5{font-size:1rem}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body strong{color:#3eaf7c}.markdown-body img{max-width:100%;border-radius:2px;display:block;margin:auto}.markdown-body hr{border:none;border-top:1px solid #3eaf7c;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;overflow-x:auto;padding:.2rem .5rem;margin:0;color:#3eaf7c;font-size:.85em;background-color:rgba(27,31,35,.05);border-radius:3px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;border:.5rem solid #3eaf7c}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{font-weight:500;text-decoration:none;color:#3eaf7c;margin:0 5px}.markdown-body a:active,.markdown-body a:hover{text-decoration:none;border-bottom:1.5px solid #3eaf7c}.markdown-body a[href^=http]:after{content:url("data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTQiIGhlaWdodD0iMTQiPjxkZWZzPjxzdHlsZS8+PC9kZWZzPjxwYXRoIGQ9Ik04MzIgMTI4SDY0MHY2NGgxNDYuNzUyTDUyMS4zNzYgNDU3LjM3Nmw0NS4yNDggNDUuMjQ4TDgzMiAyMzcuMjQ4VjM4NGg2NFYxMjh6IiBmaWxsPSIjM2VhZjdjIi8+PHBhdGggZD0iTTc2OCA4MzJIMTkyVjI1NmgzNTJ2LTY0SDE2MGEzMiAzMiAwIDAwLTMyIDMydjY0MGEzMiAzMiAwIDAwMzIgMzJoNjQwYTMyIDMyIDAgMDAzMi0zMlY0ODBoLTY0djM1MnoiIGZpbGw9IiMzZWFmN2MiLz48L3N2Zz4=");margin-left:2px}.markdown-body a[href^="#"]:before{content:"#"}.markdown-body table{display:inline-block!important;font-size:13px;width:auto;max-width:100%;overflow:auto;border:1px solid #3eaf7c;border-collapse:collapse}.markdown-body thead{background:#3eaf7c;color:#fff;text-align:left}.markdown-body tr:nth-child(2n){background-color:rgba(153,255,188,.1)}.markdown-body td,.markdown-body th{padding:4px 8px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#7b7878;padding:1px 23px;border-left:.5rem solid;border-color:#42b983;background-color:rgba(66,184,131,.1);position:relative;margin:14px 8px 0}.markdown-body blockquote:before{display:inline-block;position:absolute;content:url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjUiIGhlaWdodD0iMjUiIHZpZXdCb3g9IjAgMCAyNyAyNyIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxLjg2MiAxLjg2MikiIGZpbGwtcnVsZT0ibm9uemVybyIgZmlsbD0ibm9uZSI+PGNpcmNsZSBzdHJva2U9IiNGRkYiIHN0cm9rZS13aWR0aD0iMS43MjQiIGZpbGw9IiM0MkI5ODMiIGN4PSIxMS42MzgiIGN5PSIxMS42MzgiIHI9IjExLjYzOCIvPjxwYXRoIGQ9Ik0xNC45NzggNi4yN0E1LjAwNiA1LjAwNiAwIDAwNi42NyA5LjQ2OGE0LjkwMSA0LjkwMSAwIDAwMS43NzMgNC4zNjJjLjMyMy4yNTguNTE0LjY0Ny41MjIgMS4wNnYxLjA2YTIuNjg1IDIuNjg1IDAgMDA1LjM3IDB2LTEuMDA4Yy4wMDItLjM5OC4xNzMtLjc3Ny40Ny0xLjA0MmE1LjAyMyA1LjAyMyAwIDAwLjE3My03LjYzem0tMy4zMzcgMTAuOTY3YTEuMzA0IDEuMzA0IDAgMDEtMS4yODYtMS4yODd2LS4yNzhoMi41NzJ2LjI2MWMwIC43MTMtLjU3MyAxLjI5NC0xLjI4NiAxLjMwNHptMi4yNi00LjQxNWMtLjQ0LjM4My0uNzUuODkzLS44ODcgMS40NmgtMi43NDZhMi44NjggMi44NjggMCAwMC0uOTM4LTEuNTNoLS4wMThhMy40NzYgMy40NzYgMCAwMS0xLjI2OS0zLjE0NSAzLjYxNSAzLjYxNSAwIDAxNy4xOTYuNCAzLjY1IDMuNjUgMCAwMS0xLjMzOCAyLjgxNXoiIGZpbGw9IiNGRkYiLz48L2c+PC9zdmc+");width:25px;height:25px;left:-16px;top:12px}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body details{outline:none;border:none;border-left:4px solid #3eaf7c;padding-left:10px;margin-left:4px}.markdown-body details summary{cursor:pointer;border:none;outline:none;background:#fff;margin:0 -17px}.markdown-body details summary::-webkit-details-marker{color:#3eaf7c}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body ol li::marker{color:#3eaf7c}.markdown-body ul li{list-style:none;padding-left:10px}.markdown-body ul li::marker{content:"â€¢";color:#3eaf7c}.markdown-body ul li.task-list-item:before{content:"";margin-right:0}.markdown-body input[type=checkbox]{vertical-align:text-bottom;box-shadow:inset 0 0 0 10px #fff}.markdown-body input[type=checkbox]:before{content:url("data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTYiIGhlaWdodD0iMTYiPjxkZWZzPjxzdHlsZS8+PC9kZWZzPjxwYXRoIGQ9Ik04NzcuMDU2IDE0Ni45NDR2NzMwLjExMkgxNDYuOTQ0VjE0Ni45NDRoNzMwLjExMnptMC0xMDQuMjc3SDE0Ni45NDRjLTU3LjYyOCAwLTEwNC4yNzcgNDYuNjQ5LTEwNC4yNzcgMTA0LjI3N3Y3MzAuMTEyYzAgNTcuNjI4IDQ2LjY0OSAxMDQuMjc3IDEwNC4yNzcgMTA0LjI3N2g3MzAuMTEyYzU3LjYyOCAwIDEwNC4yNzctNDYuNjQ5IDEwNC4yNzctMTA0LjI3N1YxNDYuOTQ0YzAtNTcuNjI4LTQ2LjY0OS0xMDQuMjc3LTEwNC4yNzctMTA0LjI3N3oiIGZpbGw9IiMzZWFmN2MiLz48L3N2Zz4=");position:relative;top:-2px;right:2px}.markdown-body input[type=checkbox]:checked:before{content:url("data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTUiIGhlaWdodD0iMTUiPjxkZWZzPjxzdHlsZS8+PC9kZWZzPjxwYXRoIGQ9Ik05MTAuMjA4IDBIMTEzLjc2QTExNC4xMTIgMTE0LjExMiAwIDAwLS4wMzIgMTEzLjc5MlY5MTAuMjRjMCA2Mi41OTIgNTEuMiAxMTMuNzkyIDExMy43OTIgMTEzLjc5Mmg3OTYuNDQ4YzYyLjU5MiAwIDExMy43OTItNTEuMiAxMTMuNzkyLTExMy43OTJWMTEzLjc5MkMxMDI0IDUxLjIgOTcyLjggMCA5MTAuMjA4IDB6bS01MTIgNzk2LjQ0OEwxMTMuNzYgNTEybDc5LjY0OC03OS42NDggMjA0LjggMjA0LjhMODMwLjU2IDIwNC44bDc5LjY0OCA3OS42NDgtNTEyIDUxMnoiIGZpbGw9IiMzZWFmN2MiLz48L3N2Zz4=");position:relative;top:-2px;right:2px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="monokai">.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#272822;color:#ddd}.hljs-keyword,.hljs-literal,.hljs-name,.hljs-selector-tag,.hljs-strong,.hljs-tag{color:#f92672}.hljs-code{color:#66d9ef}.hljs-class .hljs-title{color:#fff}.hljs-attribute,.hljs-link,.hljs-regexp,.hljs-symbol{color:#bf79db}.hljs-addition,.hljs-built_in,.hljs-builtin-name,.hljs-bullet,.hljs-emphasis,.hljs-section,.hljs-selector-attr,.hljs-selector-pseudo,.hljs-string,.hljs-subst,.hljs-template-tag,.hljs-template-variable,.hljs-title,.hljs-type,.hljs-variable{color:#a6e22e}.hljs-comment,.hljs-deletion,.hljs-meta,.hljs-quote{color:#75715e}.hljs-doctag,.hljs-keyword,.hljs-literal,.hljs-section,.hljs-selector-id,.hljs-selector-tag,.hljs-title,.hljs-type{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€ä»€ä¹ˆæ˜¯ Single-SPA</h2>
<p>Single-SPA æ˜¯å¾®å‰ç«¯é¢†åŸŸçš„"é¼»ç¥–"æ¡†æ¶ï¼Œå®ƒæ˜¯ä¸€ä¸ªç”¨äºå‰ç«¯å¾®æœåŠ¡åŒ–çš„ JavaScript æ¡†æ¶ï¼Œå…è®¸ä½ åœ¨åŒä¸€ä¸ªé¡µé¢ä¸­ä½¿ç”¨å¤šä¸ªæ¡†æ¶ï¼ˆReactã€Vueã€Angular ç­‰ï¼‰ï¼Œè€Œä¸éœ€è¦åˆ·æ–°é¡µé¢ã€‚</p>
<h3 data-id="heading-1">æ ¸å¿ƒå®šä½</h3>
<ul>
<li><strong>JS Entry æ–¹æ¡ˆ</strong>ï¼šé€šè¿‡åŠ è½½å­åº”ç”¨çš„ JS å…¥å£æ–‡ä»¶æ¥é›†æˆ</li>
<li><strong>è·¯ç”±é©±åŠ¨</strong>ï¼šåŸºäº URL å˜åŒ–è‡ªåŠ¨æ¿€æ´»/å¸è½½å­åº”ç”¨</li>
<li><strong>æ¡†æ¶æ— å…³</strong>ï¼šæ”¯æŒä»»æ„å‰ç«¯æ¡†æ¶ï¼Œåªè¦å¯¼å‡ºç”Ÿå‘½å‘¨æœŸå‡½æ•°</li>
</ul>
<hr/>
<h2 data-id="heading-2">äºŒã€æ ¸å¿ƒæ¦‚å¿µ</h2>
<h3 data-id="heading-3">1. ä¸‰ç§æ¨¡å—ç±»å‹</h3>





























<table><thead><tr><th>ç±»å‹</th><th>è¯´æ˜</th><th>ç”Ÿå‘½å‘¨æœŸ</th><th>ä½¿ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td><strong>Application</strong></td><td>æœ‰ UI çš„å¾®å‰ç«¯åº”ç”¨</td><td>bootstrap â†’ mount â†’ unmount</td><td>ç‹¬ç«‹é¡µé¢/åŠŸèƒ½æ¨¡å—</td></tr><tr><td><strong>Parcel</strong></td><td>å¯å¤ç”¨çš„ UI ç»„ä»¶</td><td>æ‰‹åŠ¨æŒ‚è½½/å¸è½½</td><td>è·¨åº”ç”¨å…±äº«ç»„ä»¶</td></tr><tr><td><strong>Utility</strong></td><td>æ—  UI çš„å…±äº«æ¨¡å—</td><td>æ— </td><td>å·¥å…·å‡½æ•°ã€API å°è£…ã€çŠ¶æ€ç®¡ç†</td></tr></tbody></table>
<h3 data-id="heading-4">2. ç”Ÿå‘½å‘¨æœŸå‡½æ•°</h3>
<p>æ¯ä¸ª Application å¿…é¡»å¯¼å‡ºä¸‰ä¸ªç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åº”ç”¨é¦–æ¬¡åŠ è½½æ—¶è°ƒç”¨ï¼ˆåªæ‰§è¡Œä¸€æ¬¡ï¼‰</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">bootstrap</span>(<span class="hljs-params">props</span>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"åº”ç”¨åˆå§‹åŒ–"</span>);
}

<span class="hljs-comment">// è·¯ç”±åŒ¹é…æ—¶è°ƒç”¨ï¼ˆæ¯æ¬¡æ¿€æ´»éƒ½æ‰§è¡Œï¼‰</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">mount</span>(<span class="hljs-params">props</span>) {
  <span class="hljs-comment">// æ¸²æŸ“ DOM</span>
  <span class="hljs-title class_">ReactDOM</span>.<span class="hljs-title function_">createRoot</span>(props.<span class="hljs-property">container</span>).<span class="hljs-title function_">render</span>(<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">App</span> /&gt;</span></span>);
}

<span class="hljs-comment">// è·¯ç”±ç¦»å¼€æ—¶è°ƒç”¨</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">unmount</span>(<span class="hljs-params">props</span>) {
  <span class="hljs-comment">// æ¸…ç† DOM å’Œå‰¯ä½œç”¨</span>
  root.<span class="hljs-title function_">unmount</span>();
}
</code></pre>
<h3 data-id="heading-5">3. ç”Ÿå‘½å‘¨æœŸæµç¨‹</h3>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-section">é¦–æ¬¡åŠ è½½:  load â†’ bootstrap â†’ mount</span>
<span class="hljs-section">è·¯ç”±åˆ‡æ¢:  unmount â†’ mount (å¦ä¸€ä¸ªåº”ç”¨)</span>
<span class="hljs-section">å®Œå…¨å¸è½½:  unmount â†’ unload (å¯é€‰)</span>
</code></pre>
<hr/>
<h2 data-id="heading-6">ä¸‰ã€æ ¸å¿ƒåŸç†</h2>
<h3 data-id="heading-7">1. è·¯ç”±åŠ«æŒ</h3>
<p>Single-SPA é€šè¿‡åŠ«æŒæµè§ˆå™¨çš„è·¯ç”±äº‹ä»¶æ¥å®ç°åº”ç”¨åˆ‡æ¢ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åŠ«æŒ history API</span>
<span class="hljs-keyword">const</span> originalPushState = <span class="hljs-variable language_">window</span>.<span class="hljs-property">history</span>.<span class="hljs-property">pushState</span>;
<span class="hljs-variable language_">window</span>.<span class="hljs-property">history</span>.<span class="hljs-property">pushState</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">...args</span>) {
  originalPushState.<span class="hljs-title function_">apply</span>(<span class="hljs-variable language_">this</span>, args);
  <span class="hljs-comment">// è§¦å‘åº”ç”¨åˆ‡æ¢é€»è¾‘</span>
  <span class="hljs-title function_">reroute</span>();
};

<span class="hljs-comment">// ç›‘å¬ popstate äº‹ä»¶</span>
<span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"popstate"</span>, reroute);
</code></pre>
<h3 data-id="heading-8">2. åº”ç”¨çŠ¶æ€æœº</h3>
<p>æ¯ä¸ªåº”ç”¨éƒ½æœ‰çŠ¶æ€æµè½¬ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown">NOT<span class="hljs-emphasis">_LOADED â†’ LOADING_</span>SOURCE<span class="hljs-emphasis">_CODE â†’ NOT_</span>BOOTSTRAPPED
<span class="hljs-code">    â†’ BOOTSTRAPPING â†’ NOT_MOUNTED â†’ MOUNTING â†’ MOUNTED
    â†’ UNMOUNTING â†’ NOT_MOUNTED
</span></code></pre>
<h3 data-id="heading-9">3. åº”ç”¨åŠ è½½ä¸æ‰§è¡Œ</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ³¨å†Œåº”ç”¨</span>
<span class="hljs-title function_">registerApplication</span>({
  <span class="hljs-attr">name</span>: <span class="hljs-string">"app1"</span>,
  <span class="hljs-attr">app</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">"./app1/main.js"</span>), <span class="hljs-comment">// åŠ¨æ€å¯¼å…¥</span>
  <span class="hljs-attr">activeWhen</span>: <span class="hljs-string">"/app1"</span>, <span class="hljs-comment">// æ¿€æ´»æ¡ä»¶</span>
  <span class="hljs-attr">customProps</span>: { <span class="hljs-attr">authToken</span>: <span class="hljs-string">"xxx"</span> }, <span class="hljs-comment">// ä¼ é€’ç»™å­åº”ç”¨çš„ props</span>
});

<span class="hljs-comment">// å¯åŠ¨</span>
<span class="hljs-title function_">start</span>();
</code></pre>
<h3 data-id="heading-10">4. Import Map æ¨¡å—è§£æ</h3>
<p>Single-SPA æ¨èä½¿ç”¨ Import Map æ¥ç®¡ç†æ¨¡å— URLï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"importmap"</span>&gt;</span><span class="javascript">
  {
    <span class="hljs-string">"imports"</span>: {
      <span class="hljs-string">"react"</span>: <span class="hljs-string">"https://cdn.jsdelivr.net/npm/react@18/umd/react.production.min.js"</span>,
      <span class="hljs-string">"@myorg/app1"</span>: <span class="hljs-string">"https://mycdn.com/app1/main.js"</span>
    }
  }
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<p>æµè§ˆå™¨ä¼šæ ¹æ® Import Map è§£æ <code>import '@myorg/app1'</code> åˆ°å®é™… URLã€‚</p>
<hr/>
<h2 data-id="heading-11">å››ã€Single-SPA ç”Ÿæ€</h2>
<h3 data-id="heading-12">1. æ ¸å¿ƒåŒ…</h3>

















<table><thead><tr><th>åŒ…å</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td><code>single-spa</code></td><td>æ ¸å¿ƒåº“ï¼Œæä¾›æ³¨å†Œã€å¯åŠ¨ã€ç”Ÿå‘½å‘¨æœŸç®¡ç†</td></tr><tr><td><code>single-spa-layout</code></td><td>å£°æ˜å¼å¸ƒå±€å¼•æ“ï¼Œç”¨ HTML å®šä¹‰è·¯ç”±å’Œå¸ƒå±€</td></tr></tbody></table>
<h3 data-id="heading-13">2. æ¡†æ¶é€‚é…å™¨</h3>

























<table><thead><tr><th>é€‚é…å™¨</th><th>æ¡†æ¶</th></tr></thead><tbody><tr><td><code>single-spa-react</code></td><td>React</td></tr><tr><td><code>single-spa-vue</code></td><td>Vue 2/3</td></tr><tr><td><code>single-spa-angular</code></td><td>Angular</td></tr><tr><td><code>single-spa-svelte</code></td><td>Svelte</td></tr></tbody></table>
<h3 data-id="heading-14">3. å¼€å‘å·¥å…·</h3>





















<table><thead><tr><th>å·¥å…·</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td><code>import-map-overrides</code></td><td>è¿è¡Œæ—¶è¦†ç›– Import Mapï¼Œæ–¹ä¾¿æœ¬åœ°è°ƒè¯•</td></tr><tr><td><code>import-map-injector</code></td><td>æ”¯æŒä»è¿œç¨‹ URL åŠ è½½ Import Map</td></tr><tr><td><code>create-single-spa</code></td><td>å®˜æ–¹è„šæ‰‹æ¶ CLI</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-15">äº”ã€é¡¹ç›®ç»“æ„</h2>
<h3 data-id="heading-16">æ¨èçš„ç›®å½•ç»“æ„</h3>
<pre><code class="hljs language-bash" lang="bash">micro-frontends/
â”œâ”€â”€ root-config/              <span class="hljs-comment"># åŸºåº§åº”ç”¨</span>
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ index.ejs         <span class="hljs-comment"># HTML æ¨¡æ¿ + å¸ƒå±€é…ç½®</span>
â”‚   â”‚   â””â”€â”€ root-config.js    <span class="hljs-comment"># åº”ç”¨æ³¨å†Œå’Œå¯åŠ¨</span>
â”‚   â””â”€â”€ webpack.config.js
â”‚
â”œâ”€â”€ navbar/                   <span class="hljs-comment"># å¯¼èˆªæ åº”ç”¨ï¼ˆå§‹ç»ˆæ˜¾ç¤ºï¼‰</span>
â”œâ”€â”€ app1/                     <span class="hljs-comment"># ä¸šåŠ¡åº”ç”¨ 1</span>
â”œâ”€â”€ app2/                     <span class="hljs-comment"># ä¸šåŠ¡åº”ç”¨ 2</span>
â”‚
â”œâ”€â”€ shared/                   <span class="hljs-comment"># å…±äº«æ¨¡å—</span>
â”‚   â”œâ”€â”€ api/                  <span class="hljs-comment"># API å°è£…</span>
â”‚   â””â”€â”€ styleguide/           <span class="hljs-comment"># å…¬å…±æ ·å¼/ç»„ä»¶</span>
â”‚
â””â”€â”€ shared-dependencies/      <span class="hljs-comment"># Import Map é…ç½®</span>
    â””â”€â”€ importmap.json
</code></pre>
<hr/>
<h2 data-id="heading-17">å…­ã€åˆ›å»º Single-SPA é¡¹ç›®</h2>
<h3 data-id="heading-18">æ–¹å¼ä¸€ï¼šä½¿ç”¨å®˜æ–¹è„šæ‰‹æ¶ create-single-spaï¼ˆæ¨èï¼‰</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å…¨å±€å®‰è£…</span>
npm install -g create-single-spa

<span class="hljs-comment"># æˆ–ä½¿ç”¨ npx</span>
npx create-single-spa
</code></pre>
<p>è„šæ‰‹æ¶ä¼šå¼•å¯¼ä½ é€‰æ‹©ï¼š</p>
<ol>
<li>
<p><strong>é¡¹ç›®ç±»å‹</strong>ï¼š</p>
<ul>
<li><code>single-spa root config</code> - åŸºåº§åº”ç”¨</li>
<li><code>single-spa application / parcel</code> - å­åº”ç”¨</li>
<li><code>in-browser utility module</code> - å·¥å…·æ¨¡å—</li>
</ul>
</li>
<li>
<p><strong>æ¡†æ¶</strong>ï¼šReact / Vue / Angular / Svelte / None</p>
</li>
<li>
<p><strong>åŒ…ç®¡ç†å™¨</strong>ï¼šnpm / yarn / pnpm</p>
</li>
</ol>
<h4 data-id="heading-19">åˆ›å»ºåŸºåº§åº”ç”¨</h4>
<pre><code class="hljs language-bash" lang="bash">npx create-single-spa --moduleType root-config
<span class="hljs-comment"># é€‰æ‹©ç»„ç»‡åç§°ï¼Œå¦‚ @myorg</span>
</code></pre>
<h4 data-id="heading-20">åˆ›å»º React å­åº”ç”¨</h4>
<pre><code class="hljs language-bash" lang="bash">npx create-single-spa --moduleType app-parcel --framework react
</code></pre>
<h4 data-id="heading-21">åˆ›å»º Vue å­åº”ç”¨</h4>
<pre><code class="hljs language-bash" lang="bash">npx create-single-spa --moduleType app-parcel --framework vue
</code></pre>
<h3 data-id="heading-22">æ–¹å¼äºŒï¼šæ‰‹åŠ¨é…ç½®</h3>
<p>å¦‚æœéœ€è¦æ›´å¤šæ§åˆ¶ï¼Œå¯ä»¥æ‰‹åŠ¨é…ç½®ï¼š</p>
<h4 data-id="heading-23">1. åŸºåº§åº”ç”¨ (root-config)</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">mkdir</span> root-config &amp;&amp; <span class="hljs-built_in">cd</span> root-config
npm init -y
npm install single-spa single-spa-layout
npm install -D webpack webpack-cli webpack-dev-server html-webpack-plugin
</code></pre>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// src/root-config.js</span>
<span class="hljs-keyword">import</span> { registerApplication, start } <span class="hljs-keyword">from</span> <span class="hljs-string">"single-spa"</span>;
<span class="hljs-keyword">import</span> {
  constructApplications,
  constructRoutes,
  constructLayoutEngine,
} <span class="hljs-keyword">from</span> <span class="hljs-string">"single-spa-layout"</span>;

<span class="hljs-keyword">const</span> routes = <span class="hljs-title function_">constructRoutes</span>(<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">"#single-spa-layout"</span>));
<span class="hljs-keyword">const</span> applications = <span class="hljs-title function_">constructApplications</span>({
  routes,
  <span class="hljs-attr">loadApp</span>: <span class="hljs-function">(<span class="hljs-params">{ name }</span>) =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-comment">/* webpackIgnore: true */</span> name),
});

applications.<span class="hljs-title function_">forEach</span>(registerApplication);
<span class="hljs-title function_">constructLayoutEngine</span>({ routes, applications }).<span class="hljs-title function_">activate</span>();
<span class="hljs-title function_">start</span>();
</code></pre>
<h4 data-id="heading-24">2. React å­åº”ç”¨</h4>
<pre><code class="hljs language-bash" lang="bash">npm install single-spa-react react react-dom
</code></pre>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// src/main.js</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">ReactDOMClient</span> <span class="hljs-keyword">from</span> <span class="hljs-string">"react-dom/client"</span>;
<span class="hljs-keyword">import</span> singleSpaReact <span class="hljs-keyword">from</span> <span class="hljs-string">"single-spa-react"</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">from</span> <span class="hljs-string">"./App"</span>;

<span class="hljs-keyword">const</span> lifecycles = <span class="hljs-title function_">singleSpaReact</span>({
  <span class="hljs-title class_">React</span>,
  <span class="hljs-title class_">ReactDOMClient</span>,
  <span class="hljs-attr">rootComponent</span>: <span class="hljs-title class_">App</span>,
  <span class="hljs-title function_">errorBoundary</span>(<span class="hljs-params">err, info, props</span>) {
    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>Error<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
  },
});

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> { bootstrap, mount, unmount } = lifecycles;
</code></pre>
<h4 data-id="heading-25">3. Vue å­åº”ç”¨</h4>
<pre><code class="hljs language-bash" lang="bash">npm install single-spa-vue vue
</code></pre>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// src/main.js</span>
<span class="hljs-keyword">import</span> { createApp, h } <span class="hljs-keyword">from</span> <span class="hljs-string">"vue"</span>;
<span class="hljs-keyword">import</span> singleSpaVue <span class="hljs-keyword">from</span> <span class="hljs-string">"single-spa-vue"</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">from</span> <span class="hljs-string">"./App.vue"</span>;

<span class="hljs-keyword">const</span> vueLifecycles = <span class="hljs-title function_">singleSpaVue</span>({
  createApp,
  <span class="hljs-attr">appOptions</span>: {
    <span class="hljs-title function_">render</span>(<span class="hljs-params"/>) {
      <span class="hljs-keyword">return</span> <span class="hljs-title function_">h</span>(<span class="hljs-title class_">App</span>);
    },
  },
});

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> { bootstrap, mount, unmount } = vueLifecycles;
</code></pre>
<h3 data-id="heading-26">æ–¹å¼ä¸‰ï¼šå‚è€ƒå®˜æ–¹ç¤ºä¾‹ä»“åº“</h3>

























<table><thead><tr><th>ç¤ºä¾‹</th><th>åœ°å€</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>React ç¤ºä¾‹</td><td><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Freact-microfrontends" target="_blank" title="https://github.com/react-microfrontends" ref="nofollow noopener noreferrer">github.com/react-microâ€¦</a></td><td>å®Œæ•´çš„ React å¾®å‰ç«¯ç¤ºä¾‹</td></tr><tr><td>Vue ç¤ºä¾‹</td><td><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fvue-microfrontends" target="_blank" title="https://github.com/vue-microfrontends" ref="nofollow noopener noreferrer">github.com/vue-microfrâ€¦</a></td><td>å®Œæ•´çš„ Vue å¾®å‰ç«¯ç¤ºä¾‹</td></tr><tr><td>æ··åˆæ¡†æ¶ç¤ºä¾‹</td><td><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fpolyglot-microfrontends" target="_blank" title="https://github.com/polyglot-microfrontends" ref="nofollow noopener noreferrer">github.com/polyglot-miâ€¦</a></td><td>React + Vue + Angular æ··åˆ</td></tr></tbody></table>
<p>åœ¨çº¿æ¼”ç¤ºï¼š</p>
<ul>
<li>React: <a href="https://link.juejin.cn?target=https%3A%2F%2Freact.microfrontends.app" target="_blank" title="https://react.microfrontends.app" ref="nofollow noopener noreferrer">react.microfrontends.app</a></li>
<li>Vue: <a href="https://link.juejin.cn?target=https%3A%2F%2Fvue.microfrontends.app" target="_blank" title="https://vue.microfrontends.app" ref="nofollow noopener noreferrer">vue.microfrontends.app</a></li>
</ul>
<hr/>
<h2 data-id="heading-27">ä¸ƒã€å¼€å‘è°ƒè¯•æŠ€å·§</h2>
<h3 data-id="heading-28">1. ä½¿ç”¨ import-map-overrides</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åœ¨æµè§ˆå™¨æ§åˆ¶å°å¯ç”¨å¼€å‘å·¥å…·</span>
<span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">setItem</span>(<span class="hljs-string">"devtools"</span>, <span class="hljs-literal">true</span>);

<span class="hljs-comment">// åˆ·æ–°é¡µé¢åï¼Œå³ä¸‹è§’ä¼šå‡ºç°å¼€å‘å·¥å…·é¢æ¿</span>
<span class="hljs-comment">// å¯ä»¥å°†ä»»æ„æ¨¡å—æŒ‡å‘æœ¬åœ°å¼€å‘æœåŠ¡å™¨</span>
</code></pre>
<h3 data-id="heading-29">2. æœ¬åœ°å¼€å‘æµç¨‹</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># 1. å¯åŠ¨æœ¬åœ°å­åº”ç”¨</span>
<span class="hljs-built_in">cd</span> my-app &amp;&amp; npm start --port 9001

<span class="hljs-comment"># 2. è®¿é—®çº¿ä¸Š/æœ¬åœ°åŸºåº§</span>
<span class="hljs-comment"># 3. ä½¿ç”¨ import-map-overrides å°† @myorg/my-app æŒ‡å‘ localhost:9001</span>
</code></pre>
<h3 data-id="heading-30">3. ç‹¬ç«‹è¿è¡Œå­åº”ç”¨</h3>
<p>å­åº”ç”¨åº”è¯¥èƒ½å¤Ÿç‹¬ç«‹è¿è¡Œï¼Œæ–¹ä¾¿å¼€å‘è°ƒè¯•ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åˆ¤æ–­æ˜¯å¦åœ¨ single-spa ç¯å¢ƒä¸­</span>
<span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">window</span>.<span class="hljs-property">singleSpaNavigate</span>) {
  <span class="hljs-comment">// ç‹¬ç«‹è¿è¡Œ</span>
  <span class="hljs-title class_">ReactDOM</span>.<span class="hljs-title function_">createRoot</span>(<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">"root"</span>)).<span class="hljs-title function_">render</span>(<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">App</span> /&gt;</span></span>);
}
</code></pre>
<hr/>
<h2 data-id="heading-31">å…«ã€Single-SPA vs å…¶ä»–æ–¹æ¡ˆ</h2>















































<table><thead><tr><th>ç‰¹æ€§</th><th>single-spa</th><th>qiankun</th><th>micro-app</th></tr></thead><tbody><tr><td>Entry ç±»å‹</td><td>JS Entry</td><td>HTML Entry</td><td>HTML Entry</td></tr><tr><td>æ²™ç®±éš”ç¦»</td><td>âŒ æ— å†…ç½®</td><td>âœ… Proxy æ²™ç®±</td><td>âœ… æ²™ç®±éš”ç¦»</td></tr><tr><td>æ ·å¼éš”ç¦»</td><td>âŒ æ— å†…ç½®</td><td>âœ… Shadow DOM / Scoped</td><td>âœ… æ ·å¼éš”ç¦»</td></tr><tr><td>è€é¡¹ç›®æ”¹é€ </td><td>è¾ƒé«˜</td><td>æä½</td><td>æä½</td></tr><tr><td>çµæ´»æ€§</td><td>â˜…â˜…â˜…â˜…â˜…</td><td>â˜…â˜…â˜…â˜…</td><td>â˜…â˜…â˜…</td></tr><tr><td>å­¦ä¹ æ›²çº¿</td><td>è¾ƒé™¡</td><td>ä¸­ç­‰</td><td>è¾ƒå¹³ç¼“</td></tr></tbody></table>
<h3 data-id="heading-32">é€‰æ‹©å»ºè®®</h3>
<ul>
<li><strong>é€‰ single-spa</strong>ï¼šéœ€è¦æœ€å¤§çµæ´»æ€§ã€æ·±å…¥ç†è§£å¾®å‰ç«¯åŸç†ã€æŠ€æœ¯èƒ½åŠ›å¼ºçš„å›¢é˜Ÿ</li>
<li><strong>é€‰ qiankun</strong>ï¼šä¼ä¸šçº§é¡¹ç›®ã€å¤šå†å²ç³»ç»Ÿæ¥å…¥ã€éœ€è¦å¼€ç®±å³ç”¨çš„æ²™ç®±å’Œéš”ç¦»</li>
<li><strong>é€‰ micro-app</strong>ï¼šå¿«é€Ÿä¸Šæ‰‹ã€ç»„ä»¶åŒ–æ€ç»´ã€Vue æŠ€æœ¯æ ˆä¸ºä¸»</li>
</ul>
<hr/>
<h2 data-id="heading-33">ä¹ã€æœ€ä½³å®è·µ</h2>
<h3 data-id="heading-34">1. å…±äº«ä¾èµ–</h3>
<p>é€šè¿‡ Import Map å…±äº«å…¬å…±ä¾èµ–ï¼Œé¿å…é‡å¤åŠ è½½ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"imports"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"react"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"https://cdn.jsdelivr.net/npm/react@18/..."</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"react-dom"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"https://cdn.jsdelivr.net/npm/react-dom@18/..."</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h3 data-id="heading-35">2. æ ·å¼éš”ç¦»</h3>
<p>Single-SPA ä¸æä¾›å†…ç½®æ ·å¼éš”ç¦»ï¼Œéœ€è¦è‡ªè¡Œå¤„ç†ï¼š</p>
<ul>
<li>CSS Modules</li>
<li>CSS-in-JS (styled-components, emotion)</li>
<li>BEM å‘½åè§„èŒƒ</li>
<li>æ·»åŠ åº”ç”¨å‰ç¼€</li>
</ul>
<h3 data-id="heading-36">3. å…¨å±€çŠ¶æ€ç®¡ç†</h3>
<ul>
<li>ä½¿ç”¨ Utility æ¨¡å—å…±äº«çŠ¶æ€</li>
<li>å‘å¸ƒè®¢é˜…æ¨¡å¼ (EventBus)</li>
<li>é€šè¿‡ customProps ä¼ é€’</li>
</ul>
<h3 data-id="heading-37">4. é”™è¯¯è¾¹ç•Œ</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title function_">singleSpaReact</span>({
  <span class="hljs-comment">// ...</span>
  <span class="hljs-title function_">errorBoundary</span>(<span class="hljs-params">err, info, props</span>) {
    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">ErrorPage</span> <span class="hljs-attr">error</span>=<span class="hljs-string">{err}</span> /&gt;</span></span>;
  },
});
</code></pre>
<hr/>
<h2 data-id="heading-38">åã€å­¦ä¹ èµ„æº</h2>
<h3 data-id="heading-39">å®˜æ–¹èµ„æº</h3>
<ul>
<li>å®˜æ–¹æ–‡æ¡£: <a href="https://link.juejin.cn?target=https%3A%2F%2Fsingle-spa.js.org%2Fdocs%2Fgetting-started-overview" target="_blank" title="https://single-spa.js.org/docs/getting-started-overview" ref="nofollow noopener noreferrer">single-spa.js.org/docs/gettinâ€¦</a></li>
<li>æ¨èè®¾ç½®: <a href="https://link.juejin.cn?target=https%3A%2F%2Fsingle-spa.js.org%2Fdocs%2Frecommended-setup" target="_blank" title="https://single-spa.js.org/docs/recommended-setup" ref="nofollow noopener noreferrer">single-spa.js.org/docs/recommâ€¦</a></li>
<li>GitHub: <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fsingle-spa%2Fsingle-spa" target="_blank" title="https://github.com/single-spa/single-spa" ref="nofollow noopener noreferrer">github.com/single-spa/â€¦</a></li>
</ul>
<h3 data-id="heading-40">è§†é¢‘æ•™ç¨‹</h3>
<ul>
<li>YouTube å®˜æ–¹æ•™ç¨‹: <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.youtube.com%2Fplaylist%3Flist%3DPLLUD8RtHvsAOhtHnyGx57EYXoaNsxGrTU" target="_blank" title="https://www.youtube.com/playlist?list=PLLUD8RtHvsAOhtHnyGx57EYXoaNsxGrTU" ref="nofollow noopener noreferrer">www.youtube.com/playlist?liâ€¦</a></li>
<li>B ç«™æ•™ç¨‹: <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.bilibili.com%2Fvideo%2Fav83498486%2F" target="_blank" title="https://www.bilibili.com/video/av83498486/" ref="nofollow noopener noreferrer">www.bilibili.com/video/av834â€¦</a></li>
</ul>
<h3 data-id="heading-41">ç›¸å…³è§„èŒƒ</h3>
<ul>
<li>Import Map è§„èŒƒ: <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FWICG%2Fimport-maps" target="_blank" title="https://github.com/WICG/import-maps" ref="nofollow noopener noreferrer">github.com/WICG/importâ€¦</a></li>
<li>ES Modules: <a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FJavaScript%2FGuide%2FModules" target="_blank" title="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Modules" ref="nofollow noopener noreferrer">developer.mozilla.org/en-US/docs/â€¦</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Retrofit å†…éƒ¨å·¥ä½œåŸç†æ—¶åºå›¾]]></title>    <link>https://juejin.cn/post/7588139768275173427</link>    <guid>https://juejin.cn/post/7588139768275173427</guid>    <pubDate>2025-12-28T02:32:41.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588139768275173427" data-draft-id="7588084804093820966" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Retrofit å†…éƒ¨å·¥ä½œåŸç†æ—¶åºå›¾"/> <meta itemprop="keywords" content="æ¶æ„,å¼€æº"/> <meta itemprop="datePublished" content="2025-12-28T02:32:41.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¹¾å¤ä¸€æ°”æ€"/> <meta itemprop="url" content="https://juejin.cn/user/4212984289955431"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Retrofit å†…éƒ¨å·¥ä½œåŸç†æ—¶åºå›¾
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4212984289955431/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¹¾å¤ä¸€æ°”æ€
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-28T02:32:41.000Z" title="Sun Dec 28 2025 02:32:41 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-28
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Retrofit å†…éƒ¨å·¥ä½œåŸç†æ—¶åºå›¾</h2>
<p>æœ¬æ–‡æ¡£æ·±å…¥å‰–æRetrofitæ¡†æ¶å†…éƒ¨çš„å·¥ä½œæœºåˆ¶ï¼Œå±•ç¤ºå…¶æ ¸å¿ƒç»„ä»¶çš„äº¤äº’æµç¨‹ã€‚</p>
<h3 data-id="heading-1">1. Retrofit æ„å»ºæµç¨‹</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant Client as å¼€å‘è€…ä»£ç 
    participant Builder as Retrofit.Builder
    participant Platform as Platform
    participant Executor as Executor
    participant Retrofit as Retrofit

    Client-&gt;&gt;Builder: new Retrofit.Builder()
    activate Builder

    Client-&gt;&gt;Builder: baseUrl(url)
    Builder-&gt;&gt;Builder: éªŒè¯URLæ ¼å¼
    Builder-&gt;&gt;Builder: ä¿å­˜baseUrl

    Client-&gt;&gt;Builder: client(okHttpClient)
    Builder-&gt;&gt;Builder: ä¿å­˜OkHttpClientå®ä¾‹

    Client-&gt;&gt;Builder: addConverterFactory(factory)
    Builder-&gt;&gt;Builder: converterFactories.add(factory)

    Client-&gt;&gt;Builder: addCallAdapterFactory(factory)
    Builder-&gt;&gt;Builder: callAdapterFactories.add(factory)

    Client-&gt;&gt;Builder: build()
    Builder-&gt;&gt;Platform: Platform.get()
    activate Platform
    Platform-&gt;&gt;Platform: æ£€æµ‹è¿è¡Œå¹³å°&lt;br/&gt;(Android/Java8/é»˜è®¤)
    Platform--&gt;&gt;Builder: è¿”å›Platformå®ä¾‹
    deactivate Platform

    Builder-&gt;&gt;Executor: platform.defaultCallbackExecutor()
    activate Executor
    Executor--&gt;&gt;Builder: è¿”å›é»˜è®¤Executor&lt;br/&gt;(Androidä¸ºMainThreadExecutor)
    deactivate Executor

    Builder-&gt;&gt;Builder: æ·»åŠ å¹³å°é»˜è®¤CallAdapterFactory
    Builder-&gt;&gt;Retrofit: new Retrofit(...)
    activate Retrofit
    Retrofit-&gt;&gt;Retrofit: åˆå§‹åŒ–æˆå‘˜å˜é‡
    Retrofit--&gt;&gt;Builder: è¿”å›Retrofitå®ä¾‹
    deactivate Retrofit

    Builder--&gt;&gt;Client: è¿”å›Retrofitå®ä¾‹
    deactivate Builder
</code></pre>
<h3 data-id="heading-2">2. åŠ¨æ€ä»£ç†åˆ›å»º API æ¥å£å®ä¾‹</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant Client as å¼€å‘è€…ä»£ç 
    participant Retrofit as Retrofit
    participant Proxy as Proxy.newProxyInstance
    participant Handler as InvocationHandler
    participant ServiceMethod as ServiceMethod
    participant Cache as serviceMethodCache

    Client-&gt;&gt;Retrofit: create(ApiService.class)
    activate Retrofit

    Retrofit-&gt;&gt;Retrofit: validateServiceInterface(service)
    Retrofit-&gt;&gt;Retrofit: æ£€æŸ¥æ˜¯å¦ä¸ºæ¥å£
    Retrofit-&gt;&gt;Retrofit: æ£€æŸ¥æ¥å£ä¸­çš„æ³›å‹

    Retrofit-&gt;&gt;Proxy: Proxy.newProxyInstance()
    activate Proxy

    Note over Proxy,Handler: åˆ›å»ºåŠ¨æ€ä»£ç†å¯¹è±¡
    Proxy-&gt;&gt;Handler: ä¼ å…¥InvocationHandler
    activate Handler

    Handler-&gt;&gt;Handler: å®šä¹‰invokeæ–¹æ³•é€»è¾‘&lt;br/&gt;- å¤„ç†Objectæ–¹æ³•&lt;br/&gt;- å¤„ç†defaultæ–¹æ³•&lt;br/&gt;- å¤„ç†æ¥å£æ–¹æ³•

    Proxy--&gt;&gt;Retrofit: è¿”å›ä»£ç†å¯¹è±¡
    deactivate Proxy
    deactivate Handler

    Retrofit--&gt;&gt;Client: è¿”å›ApiServiceä»£ç†å®ä¾‹
    deactivate Retrofit

    Note over Client,Cache: å½“è°ƒç”¨æ¥å£æ–¹æ³•æ—¶è§¦å‘
    Client-&gt;&gt;Handler: method.invoke(proxy, args)
    activate Handler

    Handler-&gt;&gt;Cache: serviceMethodCache.get(method)
    activate Cache

    alt ç¼“å­˜å­˜åœ¨
        Cache--&gt;&gt;Handler: è¿”å›ç¼“å­˜çš„ServiceMethod
    else ç¼“å­˜ä¸å­˜åœ¨
        Cache-&gt;&gt;ServiceMethod: ServiceMethod.parseAnnotations()
        activate ServiceMethod
        ServiceMethod-&gt;&gt;ServiceMethod: è§£ææ–¹æ³•æ³¨è§£å’Œå‚æ•°
        ServiceMethod--&gt;&gt;Cache: è¿”å›ServiceMethod
        deactivate ServiceMethod
        Cache-&gt;&gt;Cache: cache.put(method, serviceMethod)
        Cache--&gt;&gt;Handler: è¿”å›æ–°å»ºçš„ServiceMethod
    end
    deactivate Cache

    Handler-&gt;&gt;ServiceMethod: invoke(args)
    Handler--&gt;&gt;Client: è¿”å›Callå¯¹è±¡
    deactivate Handler
</code></pre>
<h3 data-id="heading-3">3. ServiceMethod è§£æè¿‡ç¨‹</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant Handler as InvocationHandler
    participant SMParser as ServiceMethod.parseAnnotations()
    participant RFParser as RequestFactory.parseAnnotations()
    participant HttpMethod as HttpServiceMethod
    participant CallAdapter as CallAdapter.Factory
    participant Converter as Converter.Factory

    Handler-&gt;&gt;SMParser: parseAnnotations(retrofit, method)
    activate SMParser

    SMParser-&gt;&gt;RFParser: RequestFactory.parseAnnotations()
    activate RFParser

    Note over RFParser: è§£ææ–¹æ³•æ³¨è§£
    RFParser-&gt;&gt;RFParser: è§£æHTTPæ–¹æ³•æ³¨è§£&lt;br/&gt;@GET/@POST/@PUT/@DELETEç­‰
    RFParser-&gt;&gt;RFParser: æå–HTTPæ–¹æ³•å’Œç›¸å¯¹URL
    RFParser-&gt;&gt;RFParser: è§£æ@Headersæ³¨è§£
    RFParser-&gt;&gt;RFParser: æ˜¯å¦åŒ…å«body(@Body)
    RFParser-&gt;&gt;RFParser: æ˜¯å¦multipart(@Multipart)
    RFParser-&gt;&gt;RFParser: æ˜¯å¦form-encoded(@FormUrlEncoded)

    Note over RFParser: è§£ææ–¹æ³•å‚æ•°æ³¨è§£
    loop éå†æ¯ä¸ªå‚æ•°
        RFParser-&gt;&gt;RFParser: è§£æå‚æ•°æ³¨è§£&lt;br/&gt;@Path/@Query/@Header&lt;br/&gt;@Body/@Fieldç­‰
        RFParser-&gt;&gt;RFParser: åˆ›å»ºParameterHandler
    end

    RFParser--&gt;&gt;SMParser: è¿”å›RequestFactory
    deactivate RFParser

    SMParser-&gt;&gt;SMParser: è·å–æ–¹æ³•è¿”å›ç±»å‹
    SMParser-&gt;&gt;CallAdapter: æŸ¥æ‰¾åŒ¹é…çš„CallAdapter
    activate CallAdapter

    loop éå†CallAdapterFactories
        CallAdapter-&gt;&gt;CallAdapter: factory.get(returnType, annotations)
        alt æ‰¾åˆ°åŒ¹é…çš„Factory
            CallAdapter--&gt;&gt;SMParser: è¿”å›CallAdapter
        end
    end
    deactivate CallAdapter

    SMParser-&gt;&gt;Converter: æŸ¥æ‰¾å“åº”ä½“Converter
    activate Converter

    Converter-&gt;&gt;Converter: æå–å“åº”ç±»å‹
    loop éå†ConverterFactories
        Converter-&gt;&gt;Converter: factory.responseBodyConverter()
        alt æ‰¾åˆ°åŒ¹é…çš„Converter
            Converter--&gt;&gt;SMParser: è¿”å›Converter
        end
    end
    deactivate Converter

    SMParser-&gt;&gt;HttpMethod: åˆ›å»ºHttpServiceMethod
    activate HttpMethod
    HttpMethod-&gt;&gt;HttpMethod: ä¿å­˜RequestFactory
    HttpMethod-&gt;&gt;HttpMethod: ä¿å­˜CallAdapter
    HttpMethod-&gt;&gt;HttpMethod: ä¿å­˜ResponseConverter
    HttpMethod--&gt;&gt;SMParser: è¿”å›HttpServiceMethod
    deactivate HttpMethod

    SMParser--&gt;&gt;Handler: è¿”å›ServiceMethod
    deactivate SMParser
</code></pre>
<h3 data-id="heading-4">4. OkHttpCall åˆ›å»ºå’Œæ‰§è¡Œæµç¨‹</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant Client as å¼€å‘è€…ä»£ç 
    participant ServiceMethod as HttpServiceMethod
    participant OkHttpCall as OkHttpCall
    participant RequestFactory as RequestFactory
    participant RealCall as okhttp3.Call
    participant Callback as Retrofit Callback

    Client-&gt;&gt;ServiceMethod: invoke(args)
    activate ServiceMethod

    ServiceMethod-&gt;&gt;RequestFactory: create(args)
    activate RequestFactory

    Note over RequestFactory: æ„å»ºOkHttp Request
    RequestFactory-&gt;&gt;RequestFactory: åº”ç”¨RequestBuilder
    RequestFactory-&gt;&gt;RequestFactory: æ„å»ºå®Œæ•´URL(baseUrl + ç›¸å¯¹è·¯å¾„)

    loop å¤„ç†æ¯ä¸ªå‚æ•°
        RequestFactory-&gt;&gt;RequestFactory: parameterHandler.apply(requestBuilder, value)
        Note over RequestFactory: @Pathæ›¿æ¢URLè·¯å¾„&lt;br/&gt;@Queryæ·»åŠ æŸ¥è¯¢å‚æ•°&lt;br/&gt;@Headeræ·»åŠ è¯·æ±‚å¤´&lt;br/&gt;@Bodyè®¾ç½®è¯·æ±‚ä½“
    end

    RequestFactory-&gt;&gt;RequestFactory: requestBuilder.build()
    RequestFactory--&gt;&gt;ServiceMethod: è¿”å›okhttp3.Request
    deactivate RequestFactory

    ServiceMethod-&gt;&gt;OkHttpCall: new OkHttpCall(requestFactory, args, callFactory, responseConverter)
    activate OkHttpCall
    OkHttpCall-&gt;&gt;OkHttpCall: ä¿å­˜è¯·æ±‚å‚æ•°
    OkHttpCall--&gt;&gt;ServiceMethod: è¿”å›OkHttpCallå®ä¾‹
    deactivate OkHttpCall

    ServiceMethod-&gt;&gt;ServiceMethod: adapt(okHttpCall, args)
    Note over ServiceMethod: ä½¿ç”¨CallAdapteråŒ…è£…
    ServiceMethod--&gt;&gt;Client: è¿”å›é€‚é…åçš„Call
    deactivate ServiceMethod

    Note over Client,Callback: å¼‚æ­¥æ‰§è¡Œè¯·æ±‚
    Client-&gt;&gt;OkHttpCall: enqueue(callback)
    activate OkHttpCall

    OkHttpCall-&gt;&gt;OkHttpCall: åˆ›å»ºokhttp3.Request
    OkHttpCall-&gt;&gt;RealCall: callFactory.newCall(request)
    activate RealCall
    RealCall--&gt;&gt;OkHttpCall: è¿”å›okhttp3.Call
    deactivate RealCall

    OkHttpCall-&gt;&gt;RealCall: call.enqueue(okhttp3.Callback)
    activate RealCall

    Note over RealCall: OkHttpæ‰§è¡Œç½‘ç»œè¯·æ±‚
    RealCall-&gt;&gt;RealCall: é€šè¿‡æ‹¦æˆªå™¨é“¾æ‰§è¡Œ
    RealCall-&gt;&gt;RealCall: è¿”å›okhttp3.Response

    RealCall--&gt;&gt;OkHttpCall: onResponse(call, response)
    deactivate RealCall

    alt å“åº”æˆåŠŸ(2xx)
        OkHttpCall-&gt;&gt;OkHttpCall: parseResponse(rawResponse)
        OkHttpCall-&gt;&gt;OkHttpCall: converter.convert(responseBody)
        OkHttpCall-&gt;&gt;Callback: callback.onResponse(call, Response.success(body))
    else å“åº”å¤±è´¥(é2xx)
        OkHttpCall-&gt;&gt;OkHttpCall: åˆ›å»ºé”™è¯¯ResponseBody
        OkHttpCall-&gt;&gt;Callback: callback.onResponse(call, Response.error(errorBody))
    end

    deactivate OkHttpCall

    Callback--&gt;&gt;Client: å¤„ç†å“åº”ç»“æœ
</code></pre>
<h3 data-id="heading-5">5. åŒæ­¥è¯·æ±‚æ‰§è¡Œæµç¨‹</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant Client as å¼€å‘è€…ä»£ç 
    participant OkHttpCall as OkHttpCall
    participant RealCall as okhttp3.Call
    participant Converter as ResponseConverter

    Client-&gt;&gt;OkHttpCall: execute()
    activate OkHttpCall

    OkHttpCall-&gt;&gt;OkHttpCall: æ£€æŸ¥æ˜¯å¦å·²æ‰§è¡Œ&lt;br/&gt;(executedæ ‡å¿—)

    alt å·²ç»æ‰§è¡Œè¿‡
        OkHttpCall--&gt;&gt;Client: throw IllegalStateException
    end

    OkHttpCall-&gt;&gt;OkHttpCall: executed = true
    OkHttpCall-&gt;&gt;OkHttpCall: åˆ›å»ºokhttp3.Request
    OkHttpCall-&gt;&gt;RealCall: callFactory.newCall(request)
    activate RealCall
    RealCall--&gt;&gt;OkHttpCall: è¿”å›Callå®ä¾‹
    deactivate RealCall

    OkHttpCall-&gt;&gt;RealCall: rawCall.execute()
    activate RealCall

    Note over RealCall: åŒæ­¥é˜»å¡æ‰§è¡Œ
    RealCall-&gt;&gt;RealCall: ç»è¿‡æ‹¦æˆªå™¨é“¾
    RealCall-&gt;&gt;RealCall: å‘é€ç½‘ç»œè¯·æ±‚
    RealCall-&gt;&gt;RealCall: ç­‰å¾…å“åº”

    RealCall--&gt;&gt;OkHttpCall: è¿”å›okhttp3.Response
    deactivate RealCall

    OkHttpCall-&gt;&gt;OkHttpCall: parseResponse(rawResponse)
    activate OkHttpCall

    alt HTTPçŠ¶æ€ç  2xx
        OkHttpCall-&gt;&gt;Converter: convert(response.body())
        activate Converter
        Converter-&gt;&gt;Converter: è§£æå“åº”ä½“&lt;br/&gt;(å¦‚JSONè½¬å¯¹è±¡)
        Converter--&gt;&gt;OkHttpCall: è¿”å›è§£æåçš„å¯¹è±¡
        deactivate Converter
        OkHttpCall-&gt;&gt;OkHttpCall: Response.success(body, rawResponse)
    else HTTPçŠ¶æ€ç é2xx
        OkHttpCall-&gt;&gt;Converter: convert(response.errorBody())
        activate Converter
        Converter--&gt;&gt;OkHttpCall: è¿”å›é”™è¯¯ä½“
        deactivate Converter
        OkHttpCall-&gt;&gt;OkHttpCall: Response.error(errorBody, rawResponse)
    end

    OkHttpCall--&gt;&gt;Client: è¿”å›Response
    deactivate OkHttpCall
</code></pre>
<h3 data-id="heading-6">6. åç¨‹æ”¯æŒæœºåˆ¶ï¼ˆSuspend Functionï¼‰</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant Client as å®¢æˆ·ç«¯åç¨‹
    participant Handler as InvocationHandler
    participant ServiceMethod as SuspendForResponse
    participant Call as OkHttpCall
    participant Continuation as Continuation
    participant Dispatcher as åç¨‹è°ƒåº¦å™¨
    participant OkHttp as OkHttpClient
    participant Converter as ResponseConverter

    Note over Client,Handler: è°ƒç”¨suspendå‡½æ•°
    Client-&gt;&gt;Handler: invoke(suspendMethod, args)
    activate Handler

    Handler-&gt;&gt;Handler: æ£€æµ‹åˆ°suspendå‡½æ•°
    Handler-&gt;&gt;Handler: æå–Continuationå‚æ•°
    Handler-&gt;&gt;Continuation: è·å–åç¨‹ä¸Šä¸‹æ–‡
    activate Continuation

    Handler-&gt;&gt;ServiceMethod: loadServiceMethod(method)
    activate ServiceMethod

    Note over ServiceMethod: è¯†åˆ«ä¸ºsuspendå‡½æ•°
    ServiceMethod-&gt;&gt;ServiceMethod: æ£€æŸ¥è¿”å›ç±»å‹
    ServiceMethod-&gt;&gt;ServiceMethod: åˆ›å»ºSuspendForResponse
    ServiceMethod--&gt;&gt;Handler: è¿”å›ServiceMethod
    deactivate ServiceMethod

    Handler-&gt;&gt;ServiceMethod: invoke(args)
    activate ServiceMethod

    ServiceMethod-&gt;&gt;Call: åˆ›å»ºOkHttpCall
    activate Call
    Call--&gt;&gt;ServiceMethod: è¿”å›Callå¯¹è±¡
    deactivate Call

    Note over ServiceMethod: ä¸ä½¿ç”¨CallAdapter
    ServiceMethod-&gt;&gt;Call: awaitResponse()
    activate Call

    Note over Call,Dispatcher: åç¨‹æŒ‚èµ·ç‚¹
    Call-&gt;&gt;Call: suspendCancellableCoroutine
    Call-&gt;&gt;Dispatcher: åˆ‡æ¢åˆ°IOçº¿ç¨‹
    activate Dispatcher

    Dispatcher-&gt;&gt;OkHttp: call.enqueue()
    activate OkHttp

    Note over OkHttp: å¼‚æ­¥æ‰§è¡Œç½‘ç»œè¯·æ±‚
    OkHttp-&gt;&gt;OkHttp: æ‹¦æˆªå™¨é“¾å¤„ç†
    OkHttp-&gt;&gt;OkHttp: å‘é€HTTPè¯·æ±‚
    OkHttp-&gt;&gt;OkHttp: æ¥æ”¶å“åº”

    OkHttp--&gt;&gt;Dispatcher: onResponseå›è°ƒ
    deactivate OkHttp

    Dispatcher-&gt;&gt;Call: æ¢å¤åç¨‹
    deactivate Dispatcher

    Call-&gt;&gt;Call: parseResponse()
    alt HTTP 2xx
        Call-&gt;&gt;Converter: convert(responseBody)
        activate Converter
        Converter-&gt;&gt;Converter: JSONè½¬å¯¹è±¡
        Converter--&gt;&gt;Call: è¿”å›è§£æåçš„å¯¹è±¡
        deactivate Converter
        Call-&gt;&gt;Continuation: resume(result)
    else HTTPé2xx
        Call-&gt;&gt;Call: åˆ›å»ºHttpException
        Call-&gt;&gt;Continuation: resumeWithException(error)
    end

    Call--&gt;&gt;ServiceMethod: è¿”å›ç»“æœ
    deactivate Call

    ServiceMethod--&gt;&gt;Handler: è¿”å›ç»“æœ
    deactivate ServiceMethod

    Handler--&gt;&gt;Client: åç¨‹æ¢å¤æ‰§è¡Œ
    deactivate Handler
    deactivate Continuation

    Client-&gt;&gt;Client: ç»§ç»­æ‰§è¡Œåç»­ä»£ç 
</code></pre>
<h3 data-id="heading-7">7. åç¨‹å–æ¶ˆæœºåˆ¶</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant Scope as CoroutineScope
    participant Job as Job
    participant Continuation as CancellableContinuation
    participant Call as OkHttpCall
    participant OkHttp as okhttp3.Call

    Note over Scope,Job: åç¨‹å¯åŠ¨
    Scope-&gt;&gt;Job: launch/async
    activate Job
    Job-&gt;&gt;Call: æ‰§è¡Œsuspendå‡½æ•°
    activate Call

    Call-&gt;&gt;Continuation: suspendCancellableCoroutine
    activate Continuation

    Continuation-&gt;&gt;Continuation: invokeOnCancellationå›è°ƒ
    Note over Continuation: æ³¨å†Œå–æ¶ˆç›‘å¬å™¨

    Call-&gt;&gt;OkHttp: call.enqueue()
    activate OkHttp
    Note over OkHttp: ç½‘ç»œè¯·æ±‚è¿›è¡Œä¸­

    Note over Scope,Job: ç”¨æˆ·å–æ¶ˆåç¨‹
    Scope-&gt;&gt;Job: job.cancel()
    activate Scope
    Job-&gt;&gt;Job: æ ‡è®°ä¸ºå·²å–æ¶ˆ

    Job-&gt;&gt;Continuation: cancel()
    Continuation-&gt;&gt;Continuation: è§¦å‘invokeOnCancellation

    Continuation-&gt;&gt;Call: æ‰§è¡Œå–æ¶ˆå›è°ƒ
    Call-&gt;&gt;OkHttp: call.cancel()
    OkHttp-&gt;&gt;OkHttp: å–æ¶ˆç½‘ç»œè¯·æ±‚
    OkHttp--&gt;&gt;Call: IOException(Canceled)
    deactivate OkHttp

    Call-&gt;&gt;Continuation: resumeWithException(CancellationException)
    Continuation--&gt;&gt;Job: æŠ›å‡ºCancellationException
    deactivate Continuation
    deactivate Call

    Job--&gt;&gt;Scope: åç¨‹å·²å–æ¶ˆ
    deactivate Job
    deactivate Scope
</code></pre>
<h3 data-id="heading-8">8. CallAdapter å·¥ä½œæœºåˆ¶</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant Retrofit as Retrofit
    participant Factory as CallAdapter.Factory
    participant Adapter as CallAdapter
    participant TargetType as ç›®æ ‡ç±»å‹å¯¹è±¡

    Note over Retrofit,Factory: ç¬¬ä¸€é˜¶æ®µï¼šæŸ¥æ‰¾CallAdapter
    Retrofit-&gt;&gt;Retrofit: callAdapter(returnType, annotations)
    activate Retrofit

    loop éå†callAdapterFactories
        Retrofit-&gt;&gt;Factory: factory.get(returnType, annotations, retrofit)
        activate Factory
        Factory-&gt;&gt;Factory: æ£€æŸ¥è¿”å›ç±»å‹æ˜¯å¦åŒ¹é…

        alt ç±»å‹åŒ¹é…
            Factory-&gt;&gt;Adapter: åˆ›å»ºCallAdapterå®ä¾‹
            activate Adapter
            Adapter-&gt;&gt;Adapter: è®¾ç½®responseType
            Adapter--&gt;&gt;Factory: è¿”å›Adapter
            deactivate Adapter
            Factory--&gt;&gt;Retrofit: è¿”å›CallAdapter
            Note over Retrofit: æ‰¾åˆ°åŒ¹é…çš„Adapteråœæ­¢éå†
        else ç±»å‹ä¸åŒ¹é…
            Factory--&gt;&gt;Retrofit: è¿”å›null
            Note over Retrofit: ç»§ç»­æŸ¥æ‰¾ä¸‹ä¸€ä¸ªFactory
        end
        deactivate Factory
    end

    Retrofit--&gt;&gt;Retrofit: è¿”å›åŒ¹é…çš„CallAdapter
    deactivate Retrofit

    Note over Adapter,TargetType: ç¬¬äºŒé˜¶æ®µï¼šé€‚é…Callå¯¹è±¡
    Retrofit-&gt;&gt;Adapter: adapt(call)
    activate Adapter

    alt DefaultCallAdapter
        Adapter-&gt;&gt;Adapter: ç›´æ¥è¿”å›Callå¯¹è±¡
        Adapter--&gt;&gt;Retrofit: è¿”å›Call
    else ExecutorCallbackCall
        Adapter-&gt;&gt;TargetType: new ExecutorCallbackCall
        activate TargetType
        Note over TargetType: åŒ…è£…Callåœ¨æŒ‡å®šExecutorå›è°ƒ
        TargetType--&gt;&gt;Adapter: è¿”å›åŒ…è£…åçš„Call
        deactivate TargetType
        Adapter--&gt;&gt;Retrofit: è¿”å›Call
    else CompletableFutureCallAdapter
        Adapter-&gt;&gt;TargetType: new CompletableFutureCallAdapter
        activate TargetType
        Note over TargetType: å°†Callè½¬ä¸ºCompletableFuture
        TargetType--&gt;&gt;Adapter: è¿”å›CompletableFuture
        deactivate TargetType
        Adapter--&gt;&gt;Retrofit: è¿”å›CompletableFuture
    else RxJava3CallAdapter
        Adapter-&gt;&gt;TargetType: åˆ›å»ºObservable/Single
        activate TargetType
        Note over TargetType: å°†Callè½¬ä¸ºRxJavaç±»å‹
        TargetType--&gt;&gt;Adapter: è¿”å›Observable
        deactivate TargetType
        Adapter--&gt;&gt;Retrofit: è¿”å›Observable
    end

    deactivate Adapter
</code></pre>
<h3 data-id="heading-9">9. Converter è½¬æ¢æœºåˆ¶</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant Retrofit as Retrofit
    participant Factory as Converter.Factory
    participant Converter as Converter
    participant ResponseBody as ResponseBody
    participant TargetType as ç›®æ ‡å¯¹è±¡

    Note over Retrofit,Factory: ç¬¬ä¸€é˜¶æ®µï¼šæŸ¥æ‰¾ResponseConverter
    Retrofit-&gt;&gt;Retrofit: nextResponseBodyConverter()
    activate Retrofit

    loop éå†converterFactories
        Retrofit-&gt;&gt;Factory: factory.responseBodyConverter()
        activate Factory
        Factory-&gt;&gt;Factory: æ£€æŸ¥æ˜¯å¦æ”¯æŒè¯¥ç±»å‹è½¬æ¢

        alt æ”¯æŒè½¬æ¢
            Factory-&gt;&gt;Converter: åˆ›å»ºConverterå®ä¾‹
            activate Converter
            Converter--&gt;&gt;Factory: è¿”å›Converter
            deactivate Converter
            Factory--&gt;&gt;Retrofit: è¿”å›Converter
            Note over Retrofit: æ‰¾åˆ°åŒ¹é…çš„Converter
        else ä¸æ”¯æŒ
            Factory--&gt;&gt;Retrofit: è¿”å›null
            Note over Retrofit: ç»§ç»­æŸ¥æ‰¾
        end
        deactivate Factory
    end

    Retrofit--&gt;&gt;Retrofit: è¿”å›åŒ¹é…çš„Converter
    deactivate Retrofit

    Note over Converter,TargetType: ç¬¬äºŒé˜¶æ®µï¼šè½¬æ¢å“åº”ä½“
    Retrofit-&gt;&gt;Converter: convert(responseBody)
    activate Converter

    Converter-&gt;&gt;ResponseBody: value.source()
    activate ResponseBody
    ResponseBody--&gt;&gt;Converter: è¿”å›BufferedSource
    deactivate ResponseBody

    alt GsonConverter
        Converter-&gt;&gt;Converter: gson.getAdapter(type)
        Converter-&gt;&gt;Converter: adapter.read(jsonReader)
        Note over Converter: JSON â†’ Javaå¯¹è±¡
    else MoshiConverter
        Converter-&gt;&gt;Converter: moshi.adapter(type)
        Converter-&gt;&gt;Converter: adapter.fromJson(source)
        Note over Converter: JSON â†’ Javaå¯¹è±¡
    else JacksonConverter
        Converter-&gt;&gt;Converter: objectMapper.readValue()
        Note over Converter: JSON â†’ Javaå¯¹è±¡
    else ProtobufConverter
        Converter-&gt;&gt;Converter: adapter.decode(bytes)
        Note over Converter: Protobuf â†’ Javaå¯¹è±¡
    else ScalarsConverter
        Converter-&gt;&gt;Converter: responseBody.string()
        Note over Converter: ç›´æ¥è¿”å›å­—ç¬¦ä¸²
    end

    Converter-&gt;&gt;TargetType: åˆ›å»ºå¯¹è±¡å®ä¾‹
    activate TargetType
    TargetType--&gt;&gt;Converter: è¿”å›å®ä¾‹
    deactivate TargetType

    Converter--&gt;&gt;Retrofit: è¿”å›è½¬æ¢åçš„å¯¹è±¡
    deactivate Converter

    Note over Retrofit,Factory: ç¬¬ä¸‰é˜¶æ®µï¼šè¯·æ±‚ä½“è½¬æ¢
    Retrofit-&gt;&gt;Factory: requestBodyConverter()
    activate Factory
    Factory-&gt;&gt;Converter: åˆ›å»ºRequestConverter
    activate Converter
    Converter--&gt;&gt;Factory: è¿”å›Converter
    deactivate Converter
    Factory--&gt;&gt;Retrofit: è¿”å›Converter
    deactivate Factory

    Retrofit-&gt;&gt;Converter: convert(value)
    activate Converter

    alt GsonConverter
        Converter-&gt;&gt;Converter: gson.toJson(value)
        Note over Converter: Javaå¯¹è±¡ â†’ JSON
        Converter-&gt;&gt;Converter: RequestBody.create()
    else MoshiConverter
        Converter-&gt;&gt;Converter: adapter.toJson(value)
        Converter-&gt;&gt;Converter: RequestBody.create()
    end

    Converter--&gt;&gt;Retrofit: è¿”å›RequestBody
    deactivate Converter
</code></pre>
<h3 data-id="heading-10">10. è¯·æ±‚å‚æ•°å¤„ç†æœºåˆ¶</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant RF as RequestFactory
    participant Builder as RequestBuilder
    participant Handler as ParameterHandler
    participant Request as okhttp3.Request

    RF-&gt;&gt;Builder: new RequestBuilder(httpMethod, baseUrl, relativeUrl)
    activate Builder
    Builder-&gt;&gt;Builder: åˆå§‹åŒ–HttpUrl.Builder
    Builder-&gt;&gt;Builder: åˆå§‹åŒ–Headers
    deactivate Builder

    Note over RF,Handler: åº”ç”¨æ¯ä¸ªå‚æ•°
    loop éå†æ–¹æ³•å‚æ•°
        RF-&gt;&gt;Handler: parameterHandlers[i].apply(builder, args[i])
        activate Handler

        alt @Pathå‚æ•°
            Handler-&gt;&gt;Handler: éªŒè¯å€¼ä¸ä¸ºnull
            Handler-&gt;&gt;Handler: æ›¿æ¢URLè·¯å¾„ä¸­çš„å ä½ç¬¦
            Handler-&gt;&gt;Builder: relativeUrl.replace(&amp;#34;{name}&amp;#34;, value)
            Builder-&gt;&gt;Builder: æ›´æ–°URL
        else @Queryå‚æ•°
            Handler-&gt;&gt;Handler: è½¬æ¢å€¼ä¸ºå­—ç¬¦ä¸²
            Handler-&gt;&gt;Builder: addQueryParam(name, value)
            Builder-&gt;&gt;Builder: urlBuilder.addQueryParameter(name, value)
        else @QueryMapå‚æ•°
            loop éå†Mapæ¡ç›®
                Handler-&gt;&gt;Builder: addQueryParam(key, value)
            end
        else @Headerå‚æ•°
            Handler-&gt;&gt;Handler: è½¬æ¢å€¼ä¸ºå­—ç¬¦ä¸²
            Handler-&gt;&gt;Builder: addHeader(name, value)
            Builder-&gt;&gt;Builder: headersBuilder.add(name, value)
        else @HeaderMapå‚æ•°
            loop éå†Mapæ¡ç›®
                Handler-&gt;&gt;Builder: addHeader(key, value)
            end
        else @Bodyå‚æ•°
            Handler-&gt;&gt;Handler: ä½¿ç”¨Converterè½¬æ¢å¯¹è±¡
            Handler-&gt;&gt;Handler: converter.convert(value)
            Handler-&gt;&gt;Builder: setBody(requestBody)
            Builder-&gt;&gt;Builder: ä¿å­˜RequestBody
        else @Fieldå‚æ•° (FormEncoded)
            Handler-&gt;&gt;Handler: è½¬æ¢å€¼ä¸ºå­—ç¬¦ä¸²
            Handler-&gt;&gt;Builder: addFormField(name, value)
            Builder-&gt;&gt;Builder: formBuilder.add(name, value)
        else @FieldMapå‚æ•°
            loop éå†Mapæ¡ç›®
                Handler-&gt;&gt;Builder: addFormField(key, value)
            end
        else @Partå‚æ•° (Multipart)
            Handler-&gt;&gt;Handler: åˆ›å»ºMultipartBody.Part
            Handler-&gt;&gt;Builder: addPart(part)
            Builder-&gt;&gt;Builder: multipartBuilder.addPart(part)
        else @PartMapå‚æ•°
            loop éå†Mapæ¡ç›®
                Handler-&gt;&gt;Builder: addPart(key, value)
            end
        else @Urlå‚æ•°
            Handler-&gt;&gt;Handler: è§£æå®Œæ•´URL
            Handler-&gt;&gt;Builder: setRelativeUrl(url)
            Builder-&gt;&gt;Builder: è¦†ç›–URL
        end

        Handler--&gt;&gt;RF: å‚æ•°åº”ç”¨å®Œæˆ
        deactivate Handler
    end

    Note over RF,Request: æ„å»ºæœ€ç»ˆRequest
    RF-&gt;&gt;Builder: build()
    activate Builder

    Builder-&gt;&gt;Builder: æ„å»ºå®Œæ•´URL&lt;br/&gt;baseUrl + relativeUrl + queryParams
    Builder-&gt;&gt;Builder: æ„å»ºHeaders

    alt æœ‰RequestBody
        Builder-&gt;&gt;Builder: è®¾ç½®Content-Type
        Builder-&gt;&gt;Builder: æ·»åŠ Body
    else FormEncoded
        Builder-&gt;&gt;Builder: formBuilder.build()
        Builder-&gt;&gt;Builder: è®¾ç½®Content-Type: application/x-www-form-urlencoded
    else Multipart
        Builder-&gt;&gt;Builder: multipartBuilder.build()
        Builder-&gt;&gt;Builder: è®¾ç½®Content-Type: multipart/form-data
    end

    Builder-&gt;&gt;Request: new Request.Builder().url(url).headers(headers).method(httpMethod, body).build()
    activate Request
    Request--&gt;&gt;Builder: è¿”å›Requestå®ä¾‹
    deactivate Request

    Builder--&gt;&gt;RF: è¿”å›okhttp3.Request
    deactivate Builder
</code></pre>
<h3 data-id="heading-11">11. å®Œæ•´çš„å†…éƒ¨è°ƒç”¨é“¾è·¯å›¾</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">flowchart TD
    Start([è°ƒç”¨APIæ¥å£æ–¹æ³•]) --&gt; ProxyInvoke[åŠ¨æ€ä»£ç†æ‹¦æˆªè°ƒç”¨&lt;br/&gt;InvocationHandler.invoke]

    ProxyInvoke --&gt; CheckCache{ServiceMethod&lt;br/&gt;æ˜¯å¦ç¼“å­˜?}

    CheckCache --&gt;|å·²ç¼“å­˜| GetCached[ä»ç¼“å­˜è·å–]
    CheckCache --&gt;|æœªç¼“å­˜| ParseMethod[è§£ææ–¹æ³•æ³¨è§£&lt;br/&gt;ServiceMethod.parseAnnotations]

    ParseMethod --&gt; ParseRequest[åˆ›å»ºRequestFactory&lt;br/&gt;è§£æHTTPæ–¹æ³•å’Œå‚æ•°æ³¨è§£]
    ParseRequest --&gt; FindCallAdapter[æŸ¥æ‰¾CallAdapter&lt;br/&gt;éå†CallAdapterFactories]
    FindCallAdapter --&gt; FindConverter[æŸ¥æ‰¾Converter&lt;br/&gt;éå†ConverterFactories]
    FindConverter --&gt; CreateSM[åˆ›å»ºHttpServiceMethod&lt;br/&gt;å°è£…è¯·æ±‚ä¿¡æ¯]
    CreateSM --&gt; CacheIt[ç¼“å­˜ServiceMethod]

    CacheIt --&gt; GetCached
    GetCached --&gt; InvokeSM[è°ƒç”¨ServiceMethod.invoke]

    InvokeSM --&gt; CreateRequest[åˆ›å»ºokhttp3.Request&lt;br/&gt;åº”ç”¨æ‰€æœ‰å‚æ•°å¤„ç†å™¨]
    CreateRequest --&gt; CreateOkCall[åˆ›å»ºOkHttpCall&lt;br/&gt;å°è£…OkHttpè°ƒç”¨]
    CreateOkCall --&gt; AdaptCall[ä½¿ç”¨CallAdapter.adapt&lt;br/&gt;è½¬æ¢ä¸ºç›®æ ‡ç±»å‹]

    AdaptCall --&gt; ReturnCall([è¿”å›Callå¯¹è±¡])

    ReturnCall --&gt; ExecuteChoice{æ‰§è¡Œæ–¹å¼?}

    ExecuteChoice --&gt;|enqueue| AsyncExec[å¼‚æ­¥æ‰§è¡Œ&lt;br/&gt;call.enqueue]
    ExecuteChoice --&gt;|execute| SyncExec[åŒæ­¥æ‰§è¡Œ&lt;br/&gt;call.execute]

    AsyncExec --&gt; CreateOkCall2[åˆ›å»ºokhttp3.Call]
    SyncExec --&gt; CreateOkCall2

    CreateOkCall2 --&gt; OkHttpChain[OkHttpæ‹¦æˆªå™¨é“¾]

    OkHttpChain --&gt; Interceptor1[RetryAndFollowUpInterceptor&lt;br/&gt;é‡è¯•å’Œé‡å®šå‘]
    Interceptor1 --&gt; Interceptor2[BridgeInterceptor&lt;br/&gt;æ·»åŠ åŸºç¡€Headers]
    Interceptor2 --&gt; Interceptor3[CacheInterceptor&lt;br/&gt;ç¼“å­˜å¤„ç†]
    Interceptor3 --&gt; Interceptor4[ConnectInterceptor&lt;br/&gt;å»ºç«‹è¿æ¥]
    Interceptor4 --&gt; Interceptor5[CallServerInterceptor&lt;br/&gt;å‘é€è¯·æ±‚]

    Interceptor5 --&gt; Network[ç½‘ç»œæœåŠ¡å™¨]
    Network --&gt; RawResponse[è¿”å›okhttp3.Response]

    RawResponse --&gt; ParseResponse[è§£æå“åº”&lt;br/&gt;OkHttpCall.parseResponse]

    ParseResponse --&gt; CheckStatus{HTTPçŠ¶æ€ç ?}

    CheckStatus --&gt;|2xxæˆåŠŸ| ConvertSuccess[ä½¿ç”¨Converterè½¬æ¢å“åº”ä½“&lt;br/&gt;ResponseBodyConverter.convert]
    CheckStatus --&gt;|é2xx| ConvertError[è½¬æ¢é”™è¯¯ä½“&lt;br/&gt;ä¿ç•™åŸå§‹å“åº”]

    ConvertSuccess --&gt; WrapSuccess[åŒ…è£…ä¸ºResponse.success]
    ConvertError --&gt; WrapError[åŒ…è£…ä¸ºResponse.error]

    WrapSuccess --&gt; Callback[å›è°ƒç»“æœ]
    WrapError --&gt; Callback

    Callback --&gt; End([æ‰§è¡Œå®Œæˆ])

    style Start fill:#e1f5e1
    style End fill:#ffe1e1
    style Network fill:#e1f0ff
    style ProxyInvoke fill:#fff4e1
    style OkHttpChain fill:#f0e1ff
</code></pre>
<h3 data-id="heading-12">æ ¸å¿ƒç±»å…³ç³»è¯´æ˜</h3>
<h4 data-id="heading-13">1. Retrofit</h4>
<ul>
<li><strong>èŒè´£</strong>: æ¡†æ¶å…¥å£ï¼Œç®¡ç†æ‰€æœ‰é…ç½®</li>
<li><strong>æ ¸å¿ƒæ–¹æ³•</strong>:
<ul>
<li><code>create(Class&lt;T&gt; service)</code>: åˆ›å»ºAPIæ¥å£ä»£ç†å®ä¾‹</li>
<li><code>callAdapter(Type returnType, Annotation[] annotations)</code>: æŸ¥æ‰¾åŒ¹é…çš„CallAdapter</li>
<li><code>nextResponseBodyConverter(...)</code>: æŸ¥æ‰¾åŒ¹é…çš„Converter</li>
</ul>
</li>
</ul>
<h4 data-id="heading-14">2. ServiceMethod</h4>
<ul>
<li><strong>èŒè´£</strong>: å°è£…APIæ–¹æ³•çš„æ‰€æœ‰ä¿¡æ¯</li>
<li><strong>å­ç±»</strong>:
<ul>
<li><code>HttpServiceMethod</code>: æ™®é€šHTTPæ–¹æ³•çš„å®ç°</li>
<li><code>SuspendForResponse</code>: suspendå‡½æ•°çš„ç‰¹æ®Šå®ç°</li>
<li><code>SuspendForBody</code>: ç›´æ¥è¿”å›å“åº”ä½“çš„suspendå‡½æ•°</li>
</ul>
</li>
<li><strong>æ ¸å¿ƒä¿¡æ¯</strong>:
<ul>
<li>RequestFactory: è¯·æ±‚å·¥å‚</li>
<li>CallAdapter: è°ƒç”¨é€‚é…å™¨ï¼ˆsuspendå‡½æ•°ä¸ä½¿ç”¨ï¼‰</li>
<li>Converter: å“åº”è½¬æ¢å™¨</li>
</ul>
</li>
<li><strong>suspendå‡½æ•°ç‰¹æ€§</strong>:
<ul>
<li>è‡ªåŠ¨æ£€æµ‹æ–¹æ³•ç­¾åä¸­çš„<code>Continuation</code>å‚æ•°</li>
<li>ä½¿ç”¨<code>suspendCancellableCoroutine</code>å®ç°æŒ‚èµ·</li>
<li>æ”¯æŒåç¨‹å–æ¶ˆä¼ æ’­åˆ°OkHttp Call</li>
</ul>
</li>
</ul>
<h4 data-id="heading-15">3. RequestFactory</h4>
<ul>
<li><strong>èŒè´£</strong>: æ ¹æ®æ–¹æ³•æ³¨è§£å’Œå‚æ•°åˆ›å»ºOkHttp Request</li>
<li><strong>æ ¸å¿ƒæˆå‘˜</strong>:
<ul>
<li><code>httpMethod</code>: HTTPæ–¹æ³•(GET/POSTç­‰)</li>
<li><code>relativeUrl</code>: ç›¸å¯¹URL</li>
<li><code>headers</code>: è¯·æ±‚å¤´</li>
<li><code>parameterHandlers</code>: å‚æ•°å¤„ç†å™¨æ•°ç»„</li>
</ul>
</li>
</ul>
<h4 data-id="heading-16">4. ParameterHandler</h4>
<ul>
<li><strong>èŒè´£</strong>: å¤„ç†å•ä¸ªæ–¹æ³•å‚æ•°ï¼Œåº”ç”¨åˆ°RequestBuilder</li>
<li><strong>å®ç°ç±»</strong>:
<ul>
<li><code>Path</code>: å¤„ç†@Pathæ³¨è§£</li>
<li><code>Query</code>: å¤„ç†@Queryæ³¨è§£</li>
<li><code>Header</code>: å¤„ç†@Headeræ³¨è§£</li>
<li><code>Body</code>: å¤„ç†@Bodyæ³¨è§£</li>
<li><code>Field</code>: å¤„ç†@Fieldæ³¨è§£(FormEncoded)</li>
<li><code>Part</code>: å¤„ç†@Partæ³¨è§£(Multipart)</li>
</ul>
</li>
</ul>
<h4 data-id="heading-17">5. OkHttpCall</h4>
<ul>
<li><strong>èŒè´£</strong>: Retrofitçš„Callå®ç°ï¼Œå†…éƒ¨å§”æ‰˜ç»™OkHttpçš„Call</li>
<li><strong>æ ¸å¿ƒæ–¹æ³•</strong>:
<ul>
<li><code>enqueue(Callback&lt;T&gt; callback)</code>: å¼‚æ­¥æ‰§è¡Œ</li>
<li><code>execute()</code>: åŒæ­¥æ‰§è¡Œ</li>
<li><code>parseResponse(okhttp3.Response rawResponse)</code>: è§£æå“åº”</li>
<li><code>await()</code>: åç¨‹æ‰©å±•ï¼ŒæŒ‚èµ·å¹¶ç­‰å¾…å“åº”</li>
<li><code>awaitResponse()</code>: åç¨‹æ‰©å±•ï¼Œè¿”å›å®Œæ•´Responseå¯¹è±¡</li>
</ul>
</li>
<li><strong>åç¨‹æ”¯æŒ</strong>:
<ul>
<li>ä½¿ç”¨<code>suspendCancellableCoroutine</code>æŒ‚èµ·åç¨‹</li>
<li>æ³¨å†Œ<code>invokeOnCancellation</code>å›è°ƒå¤„ç†åç¨‹å–æ¶ˆ</li>
<li>åç¨‹å–æ¶ˆæ—¶è‡ªåŠ¨è°ƒç”¨<code>call.cancel()</code>å–æ¶ˆç½‘ç»œè¯·æ±‚</li>
</ul>
</li>
</ul>
<h4 data-id="heading-18">6. CallAdapter</h4>
<ul>
<li><strong>èŒè´£</strong>: å°†Callè½¬æ¢ä¸ºå…¶ä»–ç±»å‹</li>
<li><strong>å†…ç½®å®ç°</strong>:
<ul>
<li><code>DefaultCallAdapter</code>: ç›´æ¥è¿”å›Call</li>
<li><code>ExecutorCallbackCall</code>: åœ¨æŒ‡å®šExecutorå›è°ƒ</li>
<li><code>CompletableFutureCallAdapter</code>: è½¬æ¢ä¸ºCompletableFuture (Java 8)</li>
</ul>
</li>
<li><strong>ç¬¬ä¸‰æ–¹å®ç°</strong>:
<ul>
<li><code>RxJava3CallAdapter</code>: è½¬æ¢ä¸ºObservable/Single</li>
<li><code>CoroutineCallAdapter</code>: Kotlinåç¨‹æ”¯æŒ</li>
</ul>
</li>
</ul>
<h4 data-id="heading-19">7. Converter</h4>
<ul>
<li><strong>èŒè´£</strong>: å¯¹è±¡ä¸HTTPè¯·æ±‚/å“åº”ä½“ä¹‹é—´çš„è½¬æ¢</li>
<li><strong>å®ç°</strong>:
<ul>
<li><code>GsonConverter</code>: JSON â†” Javaå¯¹è±¡ (Gson)</li>
<li><code>MoshiConverter</code>: JSON â†” Javaå¯¹è±¡ (Moshi)</li>
<li><code>JacksonConverter</code>: JSON â†” Javaå¯¹è±¡ (Jackson)</li>
<li><code>ProtobufConverter</code>: Protobuf â†” Javaå¯¹è±¡</li>
<li><code>ScalarsConverter</code>: åŸå§‹ç±»å‹(String/primitives)</li>
</ul>
</li>
</ul>
<h3 data-id="heading-20">å·¥ä½œæµç¨‹æ€»ç»“</h3>
<h4 data-id="heading-21">æ ‡å‡†æµç¨‹ï¼ˆCall/RxJavaï¼‰</h4>
<ol>
<li><strong>æ„å»ºé˜¶æ®µ</strong>: åˆ›å»ºRetrofitå®ä¾‹ï¼Œé…ç½®baseUrlã€OkHttpClientã€Converterã€CallAdapter</li>
<li><strong>ä»£ç†åˆ›å»º</strong>: ä½¿ç”¨JDKåŠ¨æ€ä»£ç†ä¸ºAPIæ¥å£åˆ›å»ºå®ä¾‹</li>
<li><strong>æ–¹æ³•è§£æ</strong>: é¦–æ¬¡è°ƒç”¨æ—¶è§£ææ–¹æ³•æ³¨è§£ï¼Œåˆ›å»ºServiceMethodå¹¶ç¼“å­˜</li>
<li><strong>è¯·æ±‚æ„å»º</strong>: åº”ç”¨å‚æ•°å¤„ç†å™¨ï¼Œå°†æ–¹æ³•å‚æ•°è½¬æ¢ä¸ºOkHttp Request</li>
<li><strong>ç±»å‹é€‚é…</strong>: ä½¿ç”¨CallAdapterå°†OkHttpCallè½¬æ¢ä¸ºç›®æ ‡è¿”å›ç±»å‹</li>
<li><strong>æ‰§è¡Œè¯·æ±‚</strong>: å§”æ‰˜ç»™OkHttpæ‰§è¡Œç½‘ç»œè¯·æ±‚</li>
<li><strong>å“åº”è½¬æ¢</strong>: ä½¿ç”¨Converterå°†å“åº”ä½“è½¬æ¢ä¸ºJavaå¯¹è±¡</li>
<li><strong>ç»“æœå›è°ƒ</strong>: é€šè¿‡Callbackæˆ–å…¶ä»–æ–¹å¼è¿”å›ç»“æœ</li>
</ol>
<h4 data-id="heading-22">åç¨‹æµç¨‹ï¼ˆSuspend Functionï¼‰</h4>
<ol>
<li><strong>æ„å»ºé˜¶æ®µ</strong>: åŒæ ‡å‡†æµç¨‹</li>
<li><strong>ä»£ç†åˆ›å»º</strong>: åŒæ ‡å‡†æµç¨‹</li>
<li><strong>æ–¹æ³•è§£æ</strong>: è¯†åˆ«suspendå‡½æ•°ï¼Œæå–Continuationå‚æ•°ï¼Œåˆ›å»ºSuspendForResponse</li>
<li><strong>è¯·æ±‚æ„å»º</strong>: åŒæ ‡å‡†æµç¨‹</li>
<li><strong>åç¨‹æŒ‚èµ·</strong>: ä½¿ç”¨suspendCancellableCoroutineæŒ‚èµ·åç¨‹ï¼Œä¸ç»è¿‡CallAdapter</li>
<li><strong>å¼‚æ­¥æ‰§è¡Œ</strong>: åœ¨IOè°ƒåº¦å™¨ä¸Šé€šè¿‡OkHttpå¼‚æ­¥æ‰§è¡Œç½‘ç»œè¯·æ±‚</li>
<li><strong>å“åº”è½¬æ¢</strong>: åŒæ ‡å‡†æµç¨‹ï¼Œä½¿ç”¨Converterè½¬æ¢</li>
<li><strong>åç¨‹æ¢å¤</strong>: é€šè¿‡Continuation.resumeæ¢å¤åç¨‹æ‰§è¡Œ</li>
<li><strong>å–æ¶ˆæ”¯æŒ</strong>: åç¨‹å–æ¶ˆæ—¶è‡ªåŠ¨å–æ¶ˆOkHttpè¯·æ±‚</li>
</ol>
<h4 data-id="heading-23">åç¨‹ vs æ ‡å‡†è°ƒç”¨å¯¹æ¯”</h4>













































<table><thead><tr><th>ç‰¹æ€§</th><th>æ ‡å‡†Call</th><th>Suspendå‡½æ•°</th></tr></thead><tbody><tr><td><strong>è¿”å›ç±»å‹</strong></td><td><code>Call&lt;T&gt;</code></td><td>ç›´æ¥è¿”å›<code>T</code></td></tr><tr><td><strong>è°ƒç”¨æ–¹å¼</strong></td><td><code>enqueue(callback)</code></td><td>ç›´æ¥è°ƒç”¨ï¼Œè‡ªåŠ¨æŒ‚èµ·</td></tr><tr><td><strong>çº¿ç¨‹åˆ‡æ¢</strong></td><td>é€šè¿‡Executor</td><td>é€šè¿‡åç¨‹è°ƒåº¦å™¨</td></tr><tr><td><strong>å–æ¶ˆæœºåˆ¶</strong></td><td>æ‰‹åŠ¨è°ƒç”¨<code>call.cancel()</code></td><td>åç¨‹å–æ¶ˆè‡ªåŠ¨ä¼ æ’­</td></tr><tr><td><strong>é”™è¯¯å¤„ç†</strong></td><td>Callbackå›è°ƒ</td><td>try-catchæˆ–åç¨‹å¼‚å¸¸å¤„ç†</td></tr><tr><td><strong>CallAdapter</strong></td><td>éœ€è¦</td><td>ä¸éœ€è¦</td></tr><tr><td><strong>ç”Ÿå‘½å‘¨æœŸ</strong></td><td>æ‰‹åŠ¨ç®¡ç†</td><td>ç»‘å®šCoroutineScope</td></tr></tbody></table>
<h3 data-id="heading-24">Retrofit vs OkHttp èŒè´£åˆ’åˆ†</h3>

















<table><thead><tr><th>ç»„ä»¶</th><th>èŒè´£</th></tr></thead><tbody><tr><td><strong>Retrofit</strong></td><td>æ³¨è§£è§£æã€ç±»å‹è½¬æ¢ã€åŠ¨æ€ä»£ç†ã€CallAdapteré€‚é…</td></tr><tr><td><strong>OkHttp</strong></td><td>HTTPè¿æ¥ã€è¯·æ±‚å‘é€ã€å“åº”æ¥æ”¶ã€æ‹¦æˆªå™¨é“¾ã€ç¼“å­˜</td></tr></tbody></table>
<p>RetrofitåŸºäºOkHttpæ„å»ºï¼Œä¸“æ³¨äºæä¾›ç±»å‹å®‰å…¨çš„HTTP APIæŠ½è±¡ï¼Œè€Œå°†åº•å±‚ç½‘ç»œé€šä¿¡å§”æ‰˜ç»™OkHttpå¤„ç†ã€‚</p>
<hr/>
<blockquote>
<p>æœ¬æ–‡æ¡£æ·±å…¥å‰–æäº†Retrofitæ¡†æ¶çš„å†…éƒ¨å·¥ä½œæœºåˆ¶ï¼Œæ¶µç›–äº†ä»APIæ¥å£åˆ›å»ºåˆ°è¯·æ±‚æ‰§è¡Œçš„å®Œæ•´æµç¨‹ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Difyã€n8n è¿˜æ˜¯ Cozeï¼Ÿä¸‡å­—é•¿æ–‡è§£æä¸‰å¤§ä¸»æµ AI Agent å¹³å°]]></title>    <link>https://juejin.cn/post/7588095884070289408</link>    <guid>https://juejin.cn/post/7588095884070289408</guid>    <pubDate>2025-12-28T01:55:27.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588095884070289408" data-draft-id="7588093282530836532" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Difyã€n8n è¿˜æ˜¯ Cozeï¼Ÿä¸‡å­—é•¿æ–‡è§£æä¸‰å¤§ä¸»æµ AI Agent å¹³å°"/> <meta itemprop="keywords" content="Agent,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-12-28T01:55:27.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="AlanHou"/> <meta itemprop="url" content="https://juejin.cn/user/62022837364253"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Difyã€n8n è¿˜æ˜¯ Cozeï¼Ÿä¸‡å­—é•¿æ–‡è§£æä¸‰å¤§ä¸»æµ AI Agent å¹³å°
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/62022837364253/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    AlanHou
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-28T01:55:27.000Z" title="Sun Dec 28 2025 01:55:27 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-28
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»24åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æˆ‘ä»¬æ­£åœ¨è§è¯äººå·¥æ™ºèƒ½åº”ç”¨æ„å»ºæ–¹å¼çš„ä¸€æ¬¡æ ¹æœ¬æ€§è½¬å˜ã€‚è¿‡å»éœ€è¦å¤§é‡æœºå™¨å­¦ä¹ å·¥ç¨‹å¸ˆæ‰èƒ½å®Œæˆçš„å·¥ä½œï¼Œå¦‚ä»Šæ­£è¶Šæ¥è¶Šå¤šåœ°é€šè¿‡å¯è§†åŒ–ã€æ‹–æ‹½å¼ç•Œé¢æ¥å®ç°ã€‚<strong>å¹³å°ç»æµå·²ç»æ¥åˆ° AI é¢†åŸŸ</strong>ï¼Œå¹¶éšä¹‹å¸¦æ¥äº†ä¸€ç§è€äººå¯»å‘³çš„èƒ½åŠ›æ°‘ä¸»åŒ–è¿›ç¨‹ã€‚</p>
<p>æ›¾ç»ï¼Œæˆ‘ä»¬éœ€è¦æ‰‹å†™ HTMLã€æ‰‹åŠ¨éƒ¨ç½²æœåŠ¡å™¨ï¼›è€Œç°åœ¨ï¼Œæˆ‘ä»¬ä½¿ç”¨ WordPress å’Œ AWSä¹ƒè‡³Vercelè¿™æ ·çš„éƒ¨ç½²å¹³å°ã€‚åŒæ ·åœ°ï¼Œ<strong>æ„å»ºæ™ºèƒ½ä»£ç†æ­£ä»çº¯ä»£ç ä¼˜å…ˆçš„æ–¹å¼ï¼Œè¿‡æ¸¡åˆ°å¹³å°åŸç”Ÿã€ä½ä»£ç çš„èŒƒå¼</strong>ã€‚</p>
<p>è¿™ç§è½¬å˜å¹¶éå¶ç„¶â€”â€”å®ƒåæ˜ äº†å·¥ç¨‹æˆç†Ÿåº¦çš„ä¸€æ¡æ·±å±‚è§„å¾‹ï¼š<strong>å½“ä¸€é¡¹æŠ€æœ¯å‘å±•åˆ°è¶³å¤Ÿå¤æ‚ä¸”ç¨³å®šçš„é˜¶æ®µï¼Œäººç±»å¿…ç„¶ä¼šå°†å…¶æŠ½è±¡ä¸ºå¯å¤ç”¨çš„å¹³å°</strong>ã€‚ä½ä»£ç  AI å¹³å°ï¼Œæ­£æ˜¯è‡ªä¸»ä»£ç†ä¸ LLM åº”ç”¨èµ°å‘æˆç†Ÿçš„æ ‡å¿—æ€§æ—¶åˆ»ã€‚</p>
<h2 data-id="heading-0">ä¸ºä»€ä¹ˆä½ä»£ç å¹³å°åœ¨å½“ä¸‹è‡³å…³é‡è¦</h2>
<p>ä½ä»£ç  AI å¹³å°çš„å•†ä¸šè®ºè¯æå…·è¯´æœåŠ›ï¼Œä½†å…¶ä»·å€¼ä¸»å¼ ä¸ä»…ä»…åœ¨äºç®€å•çš„æ•ˆç‡æŒ‡æ ‡ã€‚</p>
<ul>
<li><strong>é¦–å…ˆæ˜¯å¯è®¿é—®æ€§ï¼ˆæ™®åŠæ€§ï¼‰ã€‚</strong> ä¼ ç»Ÿçš„æ™ºèƒ½ä½“å¼€å‘ï¼ˆå¦‚ ReAct å’Œ Plan-and-Solve æ¡†æ¶ï¼‰è¦æ±‚æ‰å®çš„å·¥ç¨‹åŸºç¡€ã€‚ä½ éœ€è¦ç†è§£ API ç¼–æ’ã€çŠ¶æ€ç®¡ç†ã€é”™è¯¯å¤„ç†å’Œå¹¶å‘æ‰§è¡Œã€‚ä½ä»£ç å¹³å°å°†è¿™äº›å¤æ‚æ€§æŠ½è±¡ä¸ºå¯è§†åŒ–çš„èŠ‚ç‚¹ã€‚äº§å“ç»ç†ã€é¢†åŸŸä¸“å®¶å’Œä¸šåŠ¡åˆ†æå¸ˆç°åœ¨å¯ä»¥å‚ä¸æ„å»ºæ™ºèƒ½ä½“ï¼Œè€Œæ— éœ€ç­‰å¾…æ•°å‘¨çš„å·¥ç¨‹å‘¨æœŸã€‚è¿™å°†åˆ›æ–°çš„äººæ‰æ± æ‰©å±•åˆ°äº†è½¯ä»¶å›¢é˜Ÿä¹‹å¤–ã€‚</li>
<li><strong>å…¶æ¬¡æ˜¯ç”Ÿäº§åŠ›å€å¢å™¨ã€‚</strong> å¯¹äºä¸“ä¸šå¼€å‘äººå‘˜æ¥è¯´ï¼Œè¿™äº›å¹³å°æå¤§åœ°åŠ é€Ÿäº†åŸå‹è®¾è®¡ã€‚ç¼–å†™ä»£ç éœ€è¦ä¸‰å¤©çš„å·¥ä½œâ€”â€”è¿æ¥ APIã€æ„å»ºé‡è¯•é€»è¾‘ã€ç®¡ç†çŠ¶æ€â€”â€”é€šè¿‡å¯è§†åŒ–è®¾è®¡åªéœ€å‡ å°æ—¶å³å¯å®Œæˆã€‚è¿™åœ¨é¡¹ç›®çš„æ—©æœŸé˜¶æ®µå°¤ä¸ºé‡è¦ï¼Œå› ä¸ºæˆ‘ä»¬ä»å¤„äºéªŒè¯æƒ³æ³•é˜¶æ®µã€‚å¹³å°å¤„ç†â€œè„šæ‰‹æ¶â€å·¥ä½œï¼›è€Œä½ åˆ™å¯ä»¥ä¸“æ³¨äºä¸šåŠ¡é€»è¾‘å’Œæç¤ºè¯å·¥ç¨‹ï¼ˆPrompt Engineeringï¼‰ã€‚</li>
<li><strong>ç¬¬ä¸‰æ˜¯å¯è§‚æµ‹æ€§ã€‚</strong> åŸºäºå›¾ï¼ˆGraphï¼‰çš„å¹³å°æä¾›äº†åŸºäºæ–‡æœ¬çš„æ—¥å¿—æ— æ³•æ¯”æ‹Ÿçš„ç«¯åˆ°ç«¯å¯è§æ€§ã€‚ä½ å¯ä»¥çœ‹åˆ°æ•°æ®åœ¨èŠ‚ç‚¹ä¹‹é—´æµåŠ¨ï¼Œå³æ—¶è¯†åˆ«ç“¶é¢ˆï¼Œå¹¶åœ¨ä¸ç¿»é˜…ç»ˆç«¯è¾“å‡ºçš„æƒ…å†µä¸‹è°ƒè¯•å¤±è´¥çš„æ­¥éª¤ã€‚è¿™ä¸ä»…æ˜¯æ–¹ä¾¿â€”â€”å®ƒåŠ é€Ÿäº†ä¼˜åŒ–æ™ºèƒ½ä½“è¡Œä¸ºæ‰€å¿…éœ€çš„åé¦ˆå¾ªç¯ã€‚</li>
<li><strong>æœ€åæ˜¯æ ‡å‡†åŒ–ä¼˜åŠ¿ã€‚</strong> é¢†å…ˆçš„å¹³å°å°†è¡Œä¸šæœ€ä½³å®è·µç›´æ¥åµŒå…¥å…¶è®¾è®¡ä¸­ã€‚çŸ¥è¯†æ£€ç´¢ç®¡é“ã€æ™ºèƒ½ä½“æ¡†æ¶å’Œå·¥å…·è°ƒç”¨æ¨¡å¼â€”â€”è¿™äº›é€šå¸¸éƒ½æ˜¯å†…ç½®çš„ï¼Œé˜²æ­¢å›¢é˜Ÿé‡å¤é€ è½®å­ï¼Œå¹¶ç¡®ä¿è·¨é¡¹ç›®çš„ä¸€è‡´æ€§ã€‚</li>
</ul>
<p><strong>æ ¸å¿ƒæ´å¯Ÿï¼š</strong> ä½ä»£ç å¹³å°å¹¶ä¸ä¼šæ¶ˆé™¤ç¼–ç ã€‚å®ƒä»¬æå‡äº†æŠ½è±¡å±‚çº§ï¼Œä½¿æˆ‘ä»¬èƒ½å¤Ÿå°†å·¥ç¨‹ç²¾åŠ›é›†ä¸­åœ¨æœ€é‡è¦çš„åœ°æ–¹â€”â€”<strong>ä¸šåŠ¡å·®å¼‚åŒ–</strong>ï¼Œè€Œä¸æ˜¯åŸºç¡€è®¾æ–½çš„ç®¡é“é“ºè®¾ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1a325ba8239840d2a9321f9895afea9b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQWxhbkhvdQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767491727&amp;x-signature=3vLNOw2EpXG%2Bn%2FYBBw%2BD5KmyK74%3D" alt="ä¸ºä»€ä¹ˆä½ä»£ç å¹³å°åœ¨å½“ä¸‹è‡³å…³é‡è¦" loading="lazy"/></p>
<h2 data-id="heading-1">å½“å‰æ ¼å±€ï¼šä¸‰ç§æˆªç„¶ä¸åŒçš„è·¯å¾„</h2>
<p>ä»Šå¤©çš„æ™ºèƒ½ä½“å¹³å°ç”Ÿæ€ç³»ç»Ÿå¤§è‡´åˆ†ä¸ºä¸‰ä¸ªé˜µè¥ï¼Œæ¯ä¸ªé˜µè¥éƒ½é’ˆå¯¹ä¸åŒçš„ä¼˜å…ˆçº§å’Œç”¨ä¾‹è¿›è¡Œäº†ä¼˜åŒ–ã€‚</p>
<ol>
<li><strong>Dify</strong> å°†è‡ªå·±å®šä½ä¸ºä¼ä¸šçº§çš„ä¸€ç«™å¼æŠ€æœ¯æ ˆã€‚å®ƒå¤„ç†ä»åŸå‹åˆ°ç”Ÿäº§çš„å…¨ç”Ÿå‘½å‘¨æœŸï¼šå·¥ä½œæµã€RAGï¼ˆæ£€ç´¢å¢å¼ºç”Ÿæˆï¼‰ç®¡é“ã€æ™ºèƒ½ä½“ç¼–æ’ã€æ¨¡å‹ç®¡ç†å’Œå¯è§‚æµ‹æ€§ã€‚å®ƒç‰¹åˆ«é€‚åˆé‚£äº›æ„å»ºéœ€è¦é•¿æœŸç»´æŠ¤å’Œæ‰©å±•çš„åº”ç”¨ç¨‹åºçš„å›¢é˜Ÿã€‚</li>
<li><strong>n8n</strong> ä»¥ä¸åŒçš„æ–¹å¼åº”å¯¹è¿™ä¸ªé—®é¢˜ã€‚å®ƒä»æ ¹æœ¬ä¸Šæ˜¯ä¸€ä¸ª<strong>å¸æ”¶äº† AI èƒ½åŠ›çš„å·¥ä½œæµè‡ªåŠ¨åŒ–å¹³å°</strong>ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªå¢åŠ äº†å·¥ä½œæµåŠŸèƒ½çš„ AI å¹³å°ã€‚è¿™ä¸ªåŒºåˆ«å¾ˆé‡è¦ã€‚n8n çš„ä¼˜åŠ¿åœ¨äºå°† AI é›†æˆåˆ°å¤æ‚çš„ä¸šåŠ¡æµç¨‹ä¸­â€”â€”è¿æ¥ CRM ç³»ç»Ÿã€è‡ªåŠ¨åŒ–æ–‡æ¡£å¤„ç†ã€ç¼–æ’å¤šç³»ç»Ÿå·¥ä½œæµï¼Œåœ¨è¿™äº›åœºæ™¯ä¸­ï¼Œè¯­è¨€æ¨¡å‹è™½ç„¶å¼ºå¤§ï¼Œä½†åªæ˜¯ä¼—å¤šç»„ä»¶ä¸­çš„ä¸€ä¸ªã€‚</li>
<li><strong>Coze (æ‰£å­)</strong> ï¼Œå­—èŠ‚è·³åŠ¨çš„å¹³å°ï¼Œé’ˆå¯¹é€Ÿåº¦å’Œå¯è®¿é—®æ€§è¿›è¡Œäº†ä¼˜åŒ–ã€‚å¦‚æœè¯´ Dify æ˜¯ä¸ºå·¥ç¨‹å¸ˆæ„å»ºçš„ï¼Œn8n æ˜¯ä¸ºç³»ç»Ÿé›†æˆå•†æ„å»ºçš„ï¼Œé‚£ä¹ˆ Coze çš„ç›®æ ‡å°±æ˜¯å¿«é€Ÿå®éªŒå’Œè·¨å¹³å°éƒ¨ç½²ã€‚å®ƒçš„ä¼˜åŠ¿åœ¨äºè®©éæŠ€æœ¯ç”¨æˆ·èƒ½å¤Ÿåœ¨æçŸ­çš„æ—¶é—´å†…å°†å¯ç”¨çš„æ™ºèƒ½ä½“å‘å¸ƒåˆ°å¤šä¸ªå¹³å°ã€‚</li>
</ol>
<p>è¿™äº›ä¸ä»…ä»…æ˜¯ UI ä¸Šçš„ç»†å¾®å·®åˆ«ã€‚å®ƒä»¬ä»£è¡¨äº†å…³äºâ€œè¿™äº›å¹³å°åº”è¯¥è§£å†³ä»€ä¹ˆé—®é¢˜â€ä»¥åŠâ€œè°åº”è¯¥æ¥è§£å†³è¿™äº›é—®é¢˜â€çš„æ ¹æœ¬ä¸åŒçš„è®¾è®¡å“²å­¦ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b7dc2c9b55bf406c835305f998c3ad11~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQWxhbkhvdQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767491727&amp;x-signature=r5WERKSrPTMlABqRRCwGDN6SHd0%3D" alt="å½“å‰æ ¼å±€ï¼šä¸‰ç§æˆªç„¶ä¸åŒçš„è·¯å¾„" loading="lazy"/></p>
<h2 data-id="heading-2">Difyï¼šä¼ä¸šçº§åŸºçŸ³</h2>
<h3 data-id="heading-3">æ¶æ„ä¸å“²å­¦</h3>
<p>Dify è¯ç”Ÿäºè¿™æ ·ä¸€ç§è®¤è¯†ï¼šLLM åº”ç”¨å¼€å‘éœ€è¦é€‚å½“çš„å·¥å…·ã€‚å®ƒæ˜¯ä¸€ä¸ªå¼€æºå¹³å°ï¼Œå°†å·¥ä½œæµç¼–æ’ã€æ£€ç´¢å¢å¼ºç”Ÿæˆ (RAG)ã€æ™ºèƒ½ä½“èƒ½åŠ›å’Œè¿ç»´åŸºç¡€è®¾æ–½èšåˆæˆä¸€ä¸ªç³»ç»Ÿã€‚æ›´é‡è¦çš„æ˜¯ï¼Œå®ƒä»ç¬¬ä¸€å¤©èµ·å°±æ˜¯ä¸º<strong>ç”Ÿäº§å°±ç»ª</strong>ï¼ˆProduction-Readyï¼‰è€Œè®¾è®¡çš„â€”â€”å›¢é˜Ÿæ˜¾ç„¶æ˜¯ä¸ºé‚£äº›éœ€è¦æœåŠ¡çœŸå®ç”¨æˆ·è€Œä¸ä»…ä»…æ˜¯åŸå‹çš„åº”ç”¨ç¨‹åºè®¾è®¡çš„ã€‚</p>
<p>è¯¥å¹³å°ä½¿ç”¨åˆ†å±‚æ¶æ„ï¼šæ•°æ®å±‚å¤„ç†çŸ¥è¯†åº“å’Œä¸Šä¸‹æ–‡ï¼Œå¼€å‘å±‚æä¾›å¯è§†åŒ–å·¥ä½œæµå’Œæç¤ºè¯ IDEï¼Œç¼–æ’å±‚ç®¡ç†æ™ºèƒ½ä½“é€»è¾‘å’Œå·¥å…·è°ƒç”¨ï¼Œä»¥åŠè·¨ä¸åŒ LLM æä¾›å•†çš„åŸºç¡€å±‚æŠ½è±¡ã€‚è¿™ç§å…³æ³¨ç‚¹åˆ†ç¦»å¾ˆé‡è¦ã€‚è¿™æ„å‘³ç€ä½ å¯ä»¥æ›´æ¢å‘é‡æ•°æ®åº“ã€æ›´æ”¹ LLM æä¾›å•†æˆ–è°ƒæ•´æ™ºèƒ½ä½“ç­–ç•¥ï¼Œè€Œæ— éœ€é‡æ–°æ¥è¿‡ã€‚</p>
<h3 data-id="heading-4">ç”Ÿæ€ç³»ç»Ÿçš„ç°çŠ¶</h3>
<p>Dify å¸‚åœºä»£è¡¨äº†æ¶æ„ä¸Šçš„é‡å¤§è¿›æ­¥ã€‚æˆªè‡³ 2025 å¹´ 12 æœˆï¼Œè¯¥å¸‚åœºæ‰˜ç®¡äº† 600 å¤šä¸ªæ’ä»¶ï¼Œæ¶µç›–æ¨¡å‹ã€å·¥å…·ã€æ™ºèƒ½ä½“ç­–ç•¥ã€æ‰©å±•å’Œæ•°æ®æºã€‚è¿™ä¸ä»…æ˜¯æ•°é‡çš„é—®é¢˜â€”â€”è¿™æ˜¯ä¸€ç§å‘çœŸæ­£çš„<strong>æ’ä»¶ä¼˜å…ˆæ¶æ„</strong>çš„è½¬å˜ï¼Œæ–°åŠŸèƒ½å¯ä»¥æ¸…æ™°åœ°é›†æˆï¼Œè€Œæ— éœ€ä¿®æ”¹æ ¸å¿ƒä»£ç ã€‚</p>
<p>æœ€è¿‘çš„å¸‚åœºæ–°å¢åŠŸèƒ½å‡¸æ˜¾äº†å¹³å°çš„è½¨è¿¹ã€‚Bright Data äº 2025 å¹´ 11 æœˆåŠ å…¥ï¼Œæä¾›äº†ç›´æ¥è¾“å…¥çŸ¥è¯†ç®¡é“çš„ç½‘é¡µæŠ“å–åŠŸèƒ½ã€‚Tavily æ·»åŠ äº†ç”¨äºå®æ—¶çŸ¥è¯†é›†æˆçš„ AI ä¼˜åŒ–ç½‘ç»œæœç´¢ã€‚è¿™äº›ä¸æ˜¯äº‹åçš„è¡¥å……æˆ–è¡¥ä¸â€”â€”å®ƒä»¬æ˜¯ä¸å†…ç½®åŠŸèƒ½å¹¶è‚©å·¥ä½œçš„ä¸€ç­‰å…¬æ°‘æ’ä»¶ã€‚</p>
<p>2025 å¹´æ¨å‡ºçš„çŸ¥è¯†ç®¡é“ï¼ˆKnowledge Pipelineï¼‰ä»£è¡¨äº† Dify å¯¹ RAG å·¥ç¨‹æŒ‘æˆ˜çš„å›åº”ã€‚å®ƒä¸å†å°†æ–‡æ¡£å¤„ç†æˆå‘é‡çš„è¿‡ç¨‹è§†ä¸ºé»‘ç›’ï¼Œè€Œæ˜¯è®©æ¯ä¸€æ­¥éƒ½å¯è§ä¸”å¯è°ƒä¼˜ã€‚ä½ å¯ä»¥çœ‹åˆ°æ–‡æ¡£è§£æã€åˆ†å—ã€æ¸…æ´—å’ŒåµŒå…¥ä½œä¸ºç¦»æ•£çš„èŠ‚ç‚¹ï¼Œä½ å¯ä»¥é‡æ–°é…ç½®å®ƒä»¬ã€‚æ–‡æœ¬æå–åœ¨ä½ çš„ PDF ä¸Šå¤±è´¥äº†ï¼Ÿæ¢ä¸€ä¸ªä¸åŒçš„è§£æå™¨ã€‚éœ€è¦è‡ªå®šä¹‰åˆ†å—é€»è¾‘ï¼Ÿç¼–å†™ä¸€ä¸ªä»£ç èŠ‚ç‚¹æ¥å¤„ç†å®ƒã€‚è¿™ç§é€æ˜åº¦çš„ä»·å€¼è¿œè¶…å…¶è¡¨è±¡â€”â€”RAG çš„å¯é æ€§å®Œå…¨å–å†³äºæ­£ç¡®å¤„ç†è¿™äº›å¹³å‡¡çš„ç»†èŠ‚ã€‚</p>
<h3 data-id="heading-5">ç”Ÿäº§åº”ç”¨çš„ä¼˜åŠ¿</h3>
<p><strong>å€¼å¾—å¼ºè°ƒçš„æ˜¯Dify æ”¯æŒå¤š LLMã€‚</strong> ç”¨æˆ·æ²¡æœ‰è¢«é”å®šåœ¨ OpenAI æˆ–ä»»ä½•å•ä¸€æä¾›å•†ä¸­ã€‚Dify æ”¯æŒ GPT æ¨¡å‹ã€Anthropic Claudeã€é€šè¿‡ Ollama çš„å¼€æºé€‰é¡¹ã€åƒ AWS Bedrock è¿™æ ·çš„ä¸“æœ‰æä¾›å•†ï¼Œä»¥åŠå…¼å®¹ OpenAI API çš„è‡ªå®šä¹‰ç«¯ç‚¹ã€‚è¿™ç§çµæ´»æ€§å¯¹äºæˆæœ¬ä¼˜åŒ–å’Œé¿å…ä¾›åº”å•†é”å®šè‡³å…³é‡è¦ã€‚æç¤ºè¯ IDE å…è®¸ä½ åœ¨ä¸åŒæ¨¡å‹ä¹‹é—´å¯è§†åŒ–åœ°æµ‹è¯•å’Œæ¯”è¾ƒæç¤ºè¯â€”â€”è¿™ä¸€åŠŸèƒ½æ˜¾è‘—åŠ é€Ÿäº†ä¼˜åŒ–å·¥ä½œã€‚</p>
<p>ä¼ä¸šå®‰å…¨åŠŸèƒ½éå¸¸å…¨é¢ã€‚Dify æä¾›ç«¯åˆ°ç«¯åŠ å¯†ã€åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶ (RBAC)ã€å®¡è®¡æ—¥å¿—è®°å½•ï¼Œå¹¶æ”¯æŒäº‘ SaaS å’Œæœ¬åœ°éƒ¨ç½²ã€‚AWS æä¾›äº† Dify Premium ä½œä¸ºå•ç§Ÿæˆ·éƒ¨ç½²é€‰é¡¹ï¼Œä¾›æ— æ³•ä½¿ç”¨å¤šç§Ÿæˆ·æœåŠ¡çš„å›¢é˜Ÿä½¿ç”¨ã€‚è¿™ç§çµæ´»æ€§â€”â€”äº‘ç«¯ç”¨äºå¼€å‘ä¾¿åˆ©ï¼Œç§æœ‰éƒ¨ç½²ç”¨äºæ•æ„Ÿæ•°æ®â€”â€”æ­£æ—¥ç›Šæˆä¸ºä¼ä¸šé‡‡ç”¨çš„æ ‡é…ã€‚</p>
<h3 data-id="heading-6">ç°å®çš„å±€é™æ€§</h3>
<p>Dify ç¡®å®æœ‰è¾ƒé™¡å³­çš„å­¦ä¹ æ›²çº¿ã€‚è¯¥å¹³å°ä¹‹æ‰€ä»¥å¼ºå¤§ï¼Œæ­£æ˜¯å› ä¸ºå®ƒæš´éœ²äº†å¤æ‚æ€§ã€‚éæŠ€æœ¯ç”¨æˆ·é€šå¸¸éœ€è¦æŒ‡å¯¼æ‰èƒ½æ„å»ºç®€å•çš„èŠå¤©åº”ç”¨ç¨‹åºä»¥å¤–çš„ä¸œè¥¿ã€‚è™½ç„¶å¯è§†åŒ–æ„å»ºå™¨å¾ˆç›´è§‚ï¼Œä½†å¤æ‚çš„é€»è¾‘â€”â€”å¤šæ™ºèƒ½ä½“ç³»ç»Ÿã€è‡ªå®šä¹‰è®°å¿†ç­–ç•¥ã€å¤æ‚çš„å·¥å…·ç¼–æ’â€”â€”éœ€è¦ç†è§£åº•å±‚æ¦‚å¿µã€‚è¿™æœ¬èº«ä¸æ˜¯é™åˆ¶ï¼Œè€Œæ˜¯ä¸€ä¸ªéœ€è¦æ„è¯†åˆ°çš„çº¦æŸã€‚</p>
<p>é«˜å¹¶å‘åœºæ™¯ä¸‹çš„æ€§èƒ½å€¼å¾—ä¸€æã€‚Dify çš„æ ¸å¿ƒæœåŠ¡è¿è¡Œåœ¨ Python ä¸Šï¼Œè¿™åœ¨æœ¬è´¨ä¸Šæ— æ³•åŒ¹é… Go æˆ– Rust ç­‰ç¼–è¯‘è¯­è¨€çš„ååé‡ã€‚å¯¹äºå¤„ç†æ•°ç™¾ä¸ªå¹¶å‘è¯·æ±‚çš„åº”ç”¨ç¨‹åºï¼Œä½ å¯èƒ½éœ€è¦åœ¨ç¼“å­˜ã€é€Ÿç‡é™åˆ¶æˆ–è‡ªå®šä¹‰éƒ¨ç½²ç­–ç•¥æ–¹é¢è¿›è¡Œé¢å¤–çš„å·¥ç¨‹æŠ•èµ„ã€‚å¤§å¤šæ•°ä¸­ç«¯å¸‚åœºå’Œä¼ä¸šåº”ç”¨ç¨‹åºä¸ä¼šè¾¾åˆ°è¿™ä¸€é™åˆ¶ï¼Œä½†æœ€å¥½é’ˆå¯¹é¢„æœŸè§„æ¨¡ä¸‹è¿›è¡Œæµ‹è¯•ã€‚</p>
<p>RAG åŸºç¡€è™½ç„¶æœ‰æ‰€æ”¹è¿›ï¼Œä»éœ€ç»†è‡´çš„å·¥ç¨‹è®¾è®¡ã€‚ç®€å•åœ°ä¸Šä¼ æ–‡æ¡£å¹¶ä¸èƒ½ä¿è¯å¯é çš„æ£€ç´¢ã€‚åˆ†å—ç­–ç•¥éå¸¸é‡è¦ã€‚åµŒå…¥è´¨é‡å› æ¨¡å‹è€Œå¼‚ã€‚æ£€ç´¢è®¾ç½®å½±å“ç›¸å…³æ€§å’Œæˆæœ¬ã€‚Dify æ¶ˆé™¤äº†è®¸å¤šéšœç¢ï¼Œä½†å¹¶æœªæ¶ˆé™¤å¯¹æ·±æ€ç†Ÿè™‘çš„æ•°æ®å‡†å¤‡çš„éœ€æ±‚ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bb9b8e7616994d27a5b600b601707d3a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQWxhbkhvdQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767491727&amp;x-signature=N%2FJmumZCPPlsqs4MU3nD06f4A80%3D" alt="Difyï¼š å¼€æºLLMåº”ç”¨å·¥ç¨‹åŒ–å¹³å°æ¶æ„" loading="lazy"/></p>
<h2 data-id="heading-7">n8nï¼šAI é‚‚é€…ä¼ä¸šå·¥ä½œæµè‡ªåŠ¨åŒ–</h2>
<h3 data-id="heading-8">ç‹¬ç‰¹çš„å®šä½</h3>
<p>n8n åœ¨å¹³å°ç”Ÿæ€ç³»ç»Ÿä¸­å æ®ç€ç‹¬ç‰¹çš„åœ°ä½ã€‚å¾ˆæ˜ç¡®å®ƒæ˜¯ä¸€ä¸ª<strong>åŒ…å« AI åŠŸèƒ½çš„å·¥ä½œæµè‡ªåŠ¨åŒ–å·¥å…·</strong>ï¼Œè€Œä¸æ˜¯ä¸€ä¸ª<strong>å¢åŠ äº†è‡ªåŠ¨åŒ–åŠŸèƒ½çš„ AI å¹³å°</strong>ã€‚è¿™ç§åŒºåˆ«â€”â€”ä¸æ˜¯ç®€å•çš„è¯­è¨€æ¸¸æˆâ€”â€”äº§ç”Ÿäº†æ ¹æœ¬ä¸åŒçš„ç‰¹å¾ã€‚</p>
<p>åœ¨å…¶æ ¸å¿ƒï¼Œn8n è¿æ¥å„ç§åº”ç”¨ç¨‹åºã€‚è¯¥å¹³å°åŒ…å«æ•°ç™¾ä¸ªé¢„æ„å»ºèŠ‚ç‚¹ï¼šä» Gmail è§¦å‘äº‹ä»¶ï¼Œä½¿ç”¨ä»£ç èŠ‚ç‚¹è½¬æ¢æ•°æ®ï¼Œæ›´æ–° Salesforce è®°å½•ï¼Œå‘å¸ƒåˆ° Slackï¼Œä»¥åŠæŸ¥è¯¢æ•°æ®åº“ã€‚åœ¨è¿™ä¸ªè‡ªåŠ¨åŒ–æ¡†æ¶å†…ï¼Œä½ åµŒå…¥äº† AI èƒ½åŠ›ã€‚ä¸€ä¸ª LLM èŠ‚ç‚¹æˆä¸ºæ›´å¤§æµç¨‹ä¸­çš„ä¸€ä¸ªç»„ä»¶ã€‚è¿™æ­£æ˜¯ n8n çš„äº®ç‚¹â€”â€”ä½¿ AI æˆä¸ºå¤æ‚ä¸šåŠ¡é€»è¾‘ä¸­è¢«ç¼–æ’çš„ä¸€éƒ¨åˆ†ï¼Œè€Œä¸æ˜¯æ•´ä¸ªåº”ç”¨ç¨‹åºã€‚</p>
<p>n8n ä¸­çš„å·¥ä½œæµæ¨¡å‹éå¸¸ä¼˜é›…ã€‚æ¯ä¸ªå·¥ä½œæµéƒ½æœ‰ä¸”ä»…æœ‰ä¸€ä¸ªè§¦å‘èŠ‚ç‚¹ï¼ˆä½•æ—¶å¼€å§‹ï¼‰ï¼Œå¹¶å¯ä»¥åŒ…å«å¤šä¸ªå¸¸è§„èŠ‚ç‚¹ï¼ˆåšä»€ä¹ˆï¼‰ã€‚æ•°æ®ä½œä¸ºç»“æ„åŒ–çš„ JSON åœ¨èŠ‚ç‚¹ä¹‹é—´æµåŠ¨ï¼Œæä¾›äº†é€æ˜åº¦å’Œç²¾ç¡®åº¦ã€‚ä½ å¯ä»¥ä½¿ç”¨ If/Else èŠ‚ç‚¹è¿›è¡Œåˆ†æ”¯é€»è¾‘ï¼Œä½¿ç”¨ Loop èŠ‚ç‚¹å¾ªç¯æ•°æ®ï¼Œå¹¶ä½¿ç”¨ Merge èŠ‚ç‚¹èšåˆç»“æœã€‚è¿™ç§æŠ½è±¡å¯¹äºå¤æ‚åœºæ™¯æ¥è¯´è¶³å¤Ÿå¼ºå¤§ï¼Œå¯¹äºå¯è§†åŒ–è®¾è®¡æ¥è¯´åˆè¶³å¤Ÿç®€å•ã€‚</p>
<h3 data-id="heading-9">2025 å¹´çš„ AI é›†æˆ</h3>
<p>n8n çš„ AI é›†æˆæ–¹æ³•å·²ç›¸å½“æˆç†Ÿã€‚è¯¥å¹³å°ç°åœ¨åŒ…æ‹¬ä¸“ç”¨çš„ AI Agent èŠ‚ç‚¹ï¼Œå¤„ç†è‡ªä¸»æ¨ç†å’Œå·¥å…·é€‰æ‹©ã€‚ä¸æ‰‹åŠ¨åœ¨èŠ‚ç‚¹ä¹‹é—´è·¯ç”±ä¸åŒï¼ŒAgent èŠ‚ç‚¹åœ¨å†…éƒ¨åè°ƒå¤šæ­¥æ¨ç†ã€‚å®šä¹‰å¯ç”¨çš„å·¥å…·ï¼Œè®¾å®šç›®æ ‡ï¼Œç„¶åæ™ºèƒ½ä½“å†³å®šæ‰§è¡Œç­–ç•¥ã€‚</p>
<p>ç¤¾åŒºè´¡çŒ®ä¾ç„¶å¼ºåŠ²ã€‚æˆªè‡³ 2025 å¹´ 11 æœˆï¼Œç»è¿‡éªŒè¯çš„ç¤¾åŒºèŠ‚ç‚¹å¼€å§‹å‡ºç°åœ¨ n8n Cloud ä¸Šï¼Œè€Œä¸ä»…ä»…æ˜¯åœ¨è‡ªæ‰˜ç®¡å®ä¾‹ä¸­ã€‚æœ€åˆçš„æ¨å‡ºåŒ…æ‹¬å¤§çº¦ 25 ä¸ªç¤¾åŒºæ„å»ºå’Œåˆä½œä¼™ä¼´æ”¯æŒçš„èŠ‚ç‚¹ã€‚ä» OCR åŠŸèƒ½ï¼ˆä»å›¾åƒä¸­æå–æ–‡æœ¬ï¼‰åˆ°ç½‘é¡µæŠ“å–ï¼ˆFirecrawl, Apifyï¼‰å†åˆ°ä¸“é—¨çš„ AI æœåŠ¡ã€‚è¿™æ ‡å¿—ç€ä¸€ä¸ªæˆç†Ÿçš„ç”Ÿæ€ç³»ç»Ÿï¼Œæœ€å¥½çš„ç¤¾åŒºè´¡çŒ®è·å¾—äº†â€œä¸€ç­‰å…¬æ°‘â€çš„åœ°ä½ã€‚</p>
<h3 data-id="heading-10">å®é™…ä¼˜åŠ¿</h3>
<p><strong>n8n çš„ä¸»è¦ä¼˜åŠ¿æ˜¯é›†æˆå¹¿åº¦ã€‚</strong> å¦‚æœä½ éœ€è¦è‡ªåŠ¨åŒ–æ¶‰åŠå¤šä¸ªç³»ç»Ÿçš„æµç¨‹â€”â€”ä» API æ‹‰å–æ•°æ®ï¼Œè½¬æ¢å®ƒï¼Œç”¨ AI ä¸°å¯Œå®ƒï¼Œå°†ç»“æœå­˜å‚¨åœ¨æ•°æ®åº“ä¸­ï¼Œå¹¶é€šè¿‡ç”µå­é‚®ä»¶å’Œ Slack é€šçŸ¥åˆ©ç›Šç›¸å…³è€…â€”â€”n8n ä¸°å¯Œçš„é¢„æ„å»ºèŠ‚ç‚¹ä½¿è¿™å˜å¾—ç®€å•ç›´æ¥ã€‚ä½ ä¸æ˜¯åœ¨ç³»ç»Ÿä¹‹é—´æ­å»ºæ¡¥æ¢ï¼›æ¡¥æ¢å·²ç»å­˜åœ¨äº†ã€‚</p>
<p>æ”¯æŒè‡ªæ‰˜ç®¡çš„å¼€æºæ¶æ„å¯¹è®¸å¤šç»„ç»‡æ¥è¯´å¾ˆé‡è¦ã€‚å¯ä»¥ä¿æŒå¯¹æ•°æ®å’Œæ‰§è¡Œçš„å®Œå…¨æ§åˆ¶ã€‚æ ¸å¿ƒåŠŸèƒ½æ— éœ€å¤–éƒ¨ API è°ƒç”¨ã€‚æ²¡æœ‰ä¾›åº”å•†ä¾èµ–çš„åŸºç¡€è®¾æ–½ã€‚éšç€å…¬å¸ä¼˜å…ˆè€ƒè™‘æ•°æ®å®‰å…¨å’Œè¿è¥ç‹¬ç«‹æ€§ï¼Œè¿™ä¸€ç‚¹è¶Šæ¥è¶Šæœ‰ä»·å€¼ã€‚</p>
<p>å¯¹äºç†Ÿæ‚‰åŸºæœ¬è‡ªåŠ¨åŒ–æ¦‚å¿µçš„ç”¨æˆ·æ¥è¯´ï¼Œå­¦ä¹ æ›²çº¿æ¯” Dify æ›´å®½å®¹ã€‚å¦‚æœä½ ä½¿ç”¨è¿‡ Zapier æˆ– IFTTTï¼Œn8n çš„è§†è§‰èŒƒå¼ä¼šè®©ä½ æ„Ÿè§‰å¾ˆè‡ªç„¶ã€‚å¤§å¤šæ•°äººå¯ä»¥åœ¨å‡ å°æ—¶å†…æ„å»ºæœ‰ç”¨çš„å·¥ä½œæµã€‚</p>
<h3 data-id="heading-11">çœŸæ­£çš„çº¦æŸ</h3>
<p>æœ€æ˜¾è‘—çš„é™åˆ¶æ˜¯<strong>éæŒä¹…åŒ–è®°å¿†é—®é¢˜</strong>ã€‚n8n å†…ç½®çš„ç®€å•è®°å¿†ï¼ˆSimple Memoryï¼‰å’Œç®€å•å‘é‡å­˜å‚¨ï¼ˆSimple Vector Storeï¼‰çº¯ç²¹åœ¨å†…å­˜ä¸­è¿è¡Œã€‚è¿™åœ¨å¼€å‘å’Œæµ‹è¯•æœŸé—´å·¥ä½œæ­£å¸¸ï¼Œä½†ç”Ÿäº§éƒ¨ç½²å¿…é¡»ç”¨å¤–éƒ¨æ•°æ®åº“æ›¿æ¢è¿™äº›â€”â€”Redis ç”¨äºå¯¹è¯å†å²è®°å½•ï¼ŒPinecone æˆ– Milvus ç”¨äºå‘é‡å­˜å‚¨ã€‚è¿™å¢åŠ äº†å‰æœŸå¹¶ä¸æ€»æ˜¯æ˜¾è€Œæ˜“è§çš„è¿è¥å¤æ‚æ€§å’ŒåŸºç¡€è®¾æ–½æˆæœ¬ã€‚</p>
<p>éšç€å·¥ä½œæµå˜å¾—å¤æ‚ï¼Œè°ƒè¯•å˜å¾—å…·æœ‰æŒ‘æˆ˜æ€§ã€‚è™½ç„¶ n8n æä¾›äº†æ‰§è¡Œå†å²è®°å½•å’ŒèŠ‚ç‚¹çº§æ—¥å¿—ï¼Œä½†åœ¨å…·æœ‰åˆ†æ”¯é€»è¾‘çš„äºŒåä¸ªèŠ‚ç‚¹ä¸­è·Ÿè¸ªæ•°æ®æµéœ€è¦ç³»ç»Ÿæ€§çš„è°ƒæŸ¥ã€‚å¤æ‚çš„å·¥ä½œæµå¯èƒ½å˜å¾—éš¾ä»¥ç»´æŠ¤ã€‚</p>
<p>ç‰ˆæœ¬æ§åˆ¶å’Œå¤šç”¨æˆ·åä½œæ— æ³•ä¸ä¼ ç»Ÿä»£ç ä»“åº“çš„æˆç†Ÿåº¦ç›¸åŒ¹é…ã€‚è™½ç„¶ä½ å¯ä»¥å°†å·¥ä½œæµå¯¼å‡ºä¸º JSON æ–‡ä»¶ï¼Œä½†æ¯”è¾ƒç‰ˆæœ¬ä¹‹é—´çš„æ›´æ”¹æ— æ³•æä¾› <code>git diffs</code>Â é‚£æ ·çš„æ¸…æ™°åº¦ã€‚åŒæ—¶ç¼–è¾‘åŒä¸€å·¥ä½œæµçš„å›¢é˜Ÿå¯èƒ½ä¼šæ„å¤–å‘ç”Ÿå†²çªã€‚</p>
<p>æç«¯è§„æ¨¡ï¼ˆæ•°åƒä¸ªå¹¶å‘è¯·æ±‚ï¼‰ä¸‹çš„æ€§èƒ½éœ€è¦ä»”ç»†çš„æ¶æ„è®¾è®¡ã€‚n8n åŸºäºèŠ‚ç‚¹çš„æ‰§è¡Œæ¨¡å‹ä¸ä¸“ç”¨æœåŠ¡ç›¸æ¯”å¢åŠ äº†å¼€é”€ã€‚å¤§å¤šæ•°ä¸šåŠ¡è‡ªåŠ¨åŒ–ç”¨ä¾‹æ°¸è¿œä¸ä¼šè§¦åŠè¿™ä¸ªå¤©èŠ±æ¿ï¼Œä½†å¯¹äºé«˜é¢‘äº¤æ˜“ç³»ç»Ÿã€å¤§è§„æ¨¡æ—¥å¿—å¤„ç†æˆ–ç±»ä¼¼çš„æç«¯è§„æ¨¡åœºæ™¯æ¥è¯´ï¼Œè¿™æ˜¯ä¸€ä¸ªçœŸæ­£çš„é™åˆ¶ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ba2a29fe32764870ad6000570257e07b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQWxhbkhvdQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767491727&amp;x-signature=t2dXJHuKI2BxKqMt3qwjrCjDzh0%3D" alt="n8nï¼šAI é‚‚é€…ä¼ä¸šå·¥ä½œæµè‡ªåŠ¨åŒ–" loading="lazy"/></p>
<h2 data-id="heading-12">Coze (æ‰£å­)ï¼šæ™ºèƒ½ä½“åˆ›ä½œçš„æ°‘ä¸»åŒ–</h2>
<h3 data-id="heading-13">æ™®åŠä¼˜å…ˆçš„æ–¹æ³•</h3>
<p>Coze ä»£è¡¨äº†ä¸€ç§ä¸åŒçš„å“²å­¦ï¼šå¤§å¹…é™ä½å‡†å…¥é—¨æ§›ï¼Œä½¿æŠ€æœ¯èƒŒæ™¯æˆä¸ºå¯é€‰é¡¹ã€‚å­—èŠ‚è·³åŠ¨çš„å¹³å°å¼ºè°ƒè§†è§‰ç¾å­¦å’Œå¿«é€Ÿè¿­ä»£ã€‚ç•Œé¢æ„Ÿè§‰ä¸åƒä¼ ç»Ÿçš„å¼€å‘è€…å·¥å…·ï¼Œæ›´åƒæ˜¯ç§¯æœ¨ï¼Œéç¨‹åºå‘˜ä¹Ÿå¯ä»¥ç›´è§‚åœ°æ“ä½œã€‚</p>
<p>Coze å›¢é˜Ÿæ˜¾ç„¶ä»ä¸­å›½çš„å¸‚åœºåŠ¨æ€ä¸­å¸å–äº†æ•™è®­ã€‚ä»–ä»¬è§‚å¯Ÿåˆ°ï¼Œè™½ç„¶æ¨å‡ºäº†æ•°ä»¥åƒè®¡çš„èŠå¤©æœºå™¨äººå¼åº”ç”¨ï¼Œä½†å¾ˆå°‘æœ‰è·å¾—å¸‚åœºç‰µå¼•åŠ›çš„ã€‚ä»–ä»¬å¾—å‡ºç»“è®ºï¼Œ<strong>åˆ†å‘ï¼ˆDistributionï¼‰</strong> â€”â€”ä»å•ä¸€ç•Œé¢å‘å¸ƒåˆ°å¤šä¸ªå¹³å°çš„èƒ½åŠ›â€”â€”è¢«ä½ä¼°äº†ã€‚å› æ­¤ï¼ŒCoze é’ˆå¯¹è·¨å¹³å°éƒ¨ç½²è¿›è¡Œäº†ä¼˜åŒ–ã€‚ä¸€æ¬¡æ„å»ºï¼Œåªéœ€æå°‘æ­¥éª¤å³å¯å‘å¸ƒåˆ°å¾®ä¿¡ã€é£ä¹¦ã€é’‰é’‰ã€Telegramã€Discord å’Œ Web ç«¯ã€‚</p>
<h3 data-id="heading-14">èƒ½åŠ›ä¸é›†æˆ</h3>
<p>Coze çš„æ’ä»¶ç”Ÿæ€ç³»ç»ŸåŒ…æ‹¬ 400 å¤šä¸ªé¢„æ„å»ºé›†æˆã€‚ä¸ Dify çš„å¸‚åœºï¼ˆå¼ºè°ƒå¯æ‰©å±•æ€§ï¼‰æˆ– n8n çš„èŠ‚ç‚¹ï¼ˆå¼ºè°ƒå¹¿åº¦ï¼‰ä¸åŒï¼ŒCoze çš„æ’ä»¶é’ˆå¯¹äºšæ´²åŠå…¨çƒæ—¥ç›Šç›¸å…³çš„æ¶ˆè´¹è€…å’Œä¼ä¸šç”¨ä¾‹è¿›è¡Œäº†ä¼˜åŒ–ã€‚æœç´¢ APIã€ç¿»è¯‘æœåŠ¡ã€æ–‡æ¡£å¤„ç†ã€ç”µå­å•†åŠ¡ APIâ€”â€”è¿™äº›éƒ½èƒ½æ— ç¼é›†æˆã€‚</p>
<p>è¯¥å¹³å°æœ€è¿‘æ‰©å±•åˆ°äº†å­—èŠ‚è·³åŠ¨æ‰€è°“çš„â€œAI Officeâ€é¢†åŸŸâ€”â€”èƒ½åŠ›ä¸ä»…ä»…å±€é™äºèŠå¤©æœºå™¨äººï¼Œè¿˜å»¶ä¼¸åˆ°äº†å®é™…ç”Ÿäº§åŠ›ã€‚åƒ AI Excelï¼ˆç”µå­è¡¨æ ¼è‡ªåŠ¨åŒ–ï¼‰ã€AI Designï¼ˆè§†è§‰ç”Ÿæˆï¼‰å’Œåä½œå·¥ä½œæµç­‰åŠŸèƒ½è¡¨æ˜å…¶å®šä½è¶…è¶Šäº†åŸºäºèŠå¤©çš„ç•Œé¢ï¼Œè¿›å…¥äº†èµ‹èƒ½å·¥ä½œçš„æ™ºèƒ½ä½“é¢†åŸŸã€‚</p>
<p>çŸ¥è¯†åº“çš„å®ç°ç®€å•ç›´æ¥ã€‚ä¸Šä¼ æ–‡æ¡£ã€PDF ç”šè‡³ç»“æ„åŒ–æ•°æ®ï¼ŒCoze å¤„ç†ç´¢å¼•ã€‚ä¸å·¥ä½œæµçš„é›†æˆæ„å‘³ç€ä½ çš„æ™ºèƒ½ä½“å¯ä»¥åœ¨å¯¹è¯æœŸé—´æ£€ç´¢ç›¸å…³ä¸Šä¸‹æ–‡ã€‚å¤šæ¨¡å‹æ”¯æŒï¼ˆGPT-4, Gemini, Claude, Doubaoï¼‰è®©ä½ èƒ½é’ˆå¯¹æˆæœ¬æˆ–èƒ½åŠ›è¿›è¡Œä¼˜åŒ–ã€‚</p>
<h3 data-id="heading-15">Coze çš„å“è¶Šä¹‹å¤„</h3>
<p>å¯¹äº<strong>å¿«é€ŸåŸå‹è®¾è®¡å’Œå®éªŒ</strong>ï¼ŒCoze æ˜¯çœŸæ­£çš„å¿«ã€‚ä»ä¸€ä¸ªç©ºé¡¹ç›®åˆ°ä¸€ä¸ªå‘å¸ƒçš„æ™ºèƒ½ä½“ï¼Œå¯¹äºç®€å•çš„ç”¨ä¾‹æ¥è¯´ï¼ŒçœŸçš„åªéœ€è¦ 30 åˆ†é’Ÿã€‚ç•Œé¢æ¶ˆé™¤äº†æŠ€æœ¯æ‘©æ“¦ã€‚å¼€å‘è€…ä¸ä¼šè¢«åŸºç¡€è®¾æ–½é—®é¢˜é˜»ç¢ï¼›ä»–ä»¬ä¸“æ³¨äºå®šä¹‰æ™ºèƒ½ä½“è¡Œä¸ºå’Œè°ƒæ•´å“åº”ã€‚</p>
<p><strong>åˆ†å‘å€å¢å™¨</strong>æ˜¯ Coze çš„ç‹¬ç‰¹ä¼˜åŠ¿ã€‚ä»å•ä¸€ç•Œé¢å‘å¸ƒåˆ°å¤šä¸ªå¹³å°è§£å†³äº†ä¸€ä¸ªå®é™…é—®é¢˜ã€‚å¤§å¤šæ•°æˆåŠŸçš„æ™ºèƒ½ä½“åº”ç”¨ç¨‹åºéœ€è¦å‡ºç°åœ¨ç”¨æˆ·å·²ç»èŠ±è´¹æ—¶é—´çš„åœ°æ–¹ã€‚Coze è®©è¿™å˜å¾—ç®€å•ç›´æ¥ã€‚</p>
<p>æˆæœ¬é—¨æ§›æä½ã€‚ä½ å¯ä»¥ç«‹å³å…è´¹æ„å»ºå’Œå‘å¸ƒæ™ºèƒ½ä½“ã€‚å¦‚æœä½ é€‰æ‹©å¯ç”¨å®ƒï¼Œå˜ç°å°±ä¼šå‘ç”Ÿã€‚è¿™ç§â€œå…è´¹å¼€å§‹â€çš„æ¨¡å¼å‡å°‘äº†å†³ç­–æ‘©æ“¦ï¼Œå¹¶å…è®¸åœ¨é¢„ç®—æä½çš„æƒ…å†µä¸‹è¿›è¡Œå®éªŒã€‚</p>
<h3 data-id="heading-16">æ˜¾è‘—çš„å±€é™æ€§</h3>
<p><strong>MCPï¼ˆæ¨¡å‹ä¸Šä¸‹æ–‡åè®®ï¼‰æ”¯æŒæ˜æ˜¾ç¼ºå¤±ã€‚</strong> è¿™ä¸€æ–°å…´æ ‡å‡†ä½¿æ™ºèƒ½ä½“èƒ½å¤Ÿä»¥æ ‡å‡†åŒ–çš„æ–¹å¼ä¸å¤–éƒ¨å·¥å…·å’Œæ•°æ®æºè¿›è¡Œäº¤äº’ã€‚Coze çš„ä¸“æœ‰æ’ä»¶ç³»ç»Ÿè™½ç„¶å·¥ä½œæ­£å¸¸ï¼Œä½†ä¸æ›´å¹¿æ³›çš„ MCP ç”Ÿæ€ç³»ç»Ÿä¸å…¼å®¹ï¼Œé™åˆ¶äº†äº’æ“ä½œæ€§å’Œæœªæ¥çš„çµæ´»æ€§ã€‚</p>
<p>æ’ä»¶é…ç½®çš„å¤æ‚æ€§ä¸ Coze çš„æ˜“ç”¨æ€§æ‰¿è¯ºç›¸çŸ›ç›¾ã€‚è™½ç„¶ç®€å•çš„æ’ä»¶å¾ˆç›´æ¥ï¼Œä½†é‚£äº›éœ€è¦ API å¯†é’¥ã€OAuth é…ç½®æˆ–å¤šä¸ªå‚æ•°çš„æ’ä»¶é€šå¸¸éœ€è¦æŠ€æœ¯èƒŒæ™¯ã€‚é«˜çº§å·¥ä½œæµç¼–æ’â€”â€”æ¡ä»¶é€»è¾‘ã€é”™è¯¯å¤„ç†ã€å¤æ‚æ•°æ®è½¬æ¢â€”â€”éœ€è¦è®¸å¤šç›®æ ‡ç”¨æˆ·ä¸å…·å¤‡çš„ JavaScript æˆ– Python çŸ¥è¯†ã€‚</p>
<p>å¯¼å‡ºèƒ½åŠ›æœ‰é™ã€‚Coze æœ€è¿‘ä¸ºä»˜è´¹å±‚çº§æ·»åŠ äº†å¯¼å‡ºåŠŸèƒ½ï¼Œä½†æ ¼å¼æ˜¯ä¸“æœ‰çš„ï¼ˆZip æ–‡ä»¶è€Œä¸æ˜¯æ ‡å‡† JSONï¼‰ã€‚è¿™æ„å‘³ç€å·¥ä½œæµæ— æ³•è½»æ˜“è¿ç§»åˆ°å…¶ä»–å¹³å°æˆ–ä¸å¤–éƒ¨ç‰ˆæœ¬æ§åˆ¶é›†æˆã€‚ä½ å®é™…ä¸Šè¢«é”å®šåœ¨ Coze çš„ç”Ÿæ€ç³»ç»Ÿä¸­ã€‚</p>
<p>è¯¥å¹³å°çš„æ¼”è¿›è½¨è¿¹ä¸å­—èŠ‚è·³åŠ¨çš„ä¸šåŠ¡ä¼˜å…ˆçº§ç´§å¯†ç›¸å…³ã€‚è™½ç„¶ç›®å‰çš„æŠ•èµ„çœ‹èµ·æ¥å¾ˆç¨³å›ºï¼Œä½†å…¬å¸çš„åœ°ç¼˜æ”¿æ²»å®šä½å’Œæˆ˜ç•¥è°ƒæ•´å¯èƒ½ä¼šå½±å“é•¿æœŸçš„å¹³å°æ‰¿è¯ºã€‚è¿™ä»£è¡¨äº†ä¸å¼€æºé¡¹ç›®æˆ–æ‹¥æœ‰æ›´å¤šæ ·åŒ–æŠ•èµ„ç»„åˆçš„å¤§å‹å¹³å°å…¬å¸ä¸åŒçš„é£é™©æ¦‚å†µã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/42a86c2434b042ca96f99c8287f29233~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQWxhbkhvdQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767491727&amp;x-signature=uMZUMep5ubDJQtr7dyO5SXrCyig%3D" alt="Cozeï¼šè®©ä»£ç†â€œäººäººå¯åšâ€" loading="lazy"/></p>
<h2 data-id="heading-17">æ¯”è¾ƒåˆ†æï¼šé€‰æ‹©åˆé€‚çš„å¹³å°</h2>
<p><strong>ç”¨äºå¿«é€ŸåŸå‹è®¾è®¡å’Œå®éªŒ</strong> Coze çš„é€Ÿåº¦ä¼˜åŠ¿å¾ˆæœ‰æ„ä¹‰ã€‚å¦‚æœä½ ä¸»è¦å…³å¿ƒçš„æ˜¯ä»¥æœ€å°‘çš„è®¾ç½®å¿«é€ŸéªŒè¯æƒ³æ³•ï¼ŒCoze çš„å‡†å…¥é—¨æ§›æœ€ä½ã€‚ä½ ä¼šç«‹å³è·å¾—ç”Ÿäº§åŠ›ã€‚æƒè¡¡æ˜¯é’ˆå¯¹å¤æ‚éœ€æ±‚çš„çµæ´»æ€§é™ä½å’Œä¾›åº”å•†é”å®šé—®é¢˜ã€‚ Dify æä¾›äº†ä¸€ä¸ªä¸­é—´åœ°å¸¦ã€‚è®¾ç½®æ­¥éª¤æ¯” Coze å¤šï¼Œä½†æ¯” n8n å°‘ã€‚å°½ç®¡å­¦ä¹ æ›²çº¿è¾ƒé™¡ï¼Œä½†åŸå‹è®¾è®¡é€Ÿåº¦ä»¤äººå°è±¡æ·±åˆ»ã€‚ä¸€æ—¦ä¸Šæ‰‹ï¼Œä½ å°†ä¿æŒæ›´å¥½çš„çµæ´»æ€§å’Œç”Ÿæ€ç³»ç»Ÿç‹¬ç«‹æ€§ã€‚ n8n çš„è®¾ç½®å¼€é”€æœ€é«˜ï¼Œä½†å‰ææ˜¯ä½ è¿˜æ²¡æœ‰å°†å…¶ç”¨äºå…¶ä»–è‡ªåŠ¨åŒ–éœ€æ±‚ã€‚å¦‚æœä½ çš„ç»„ç»‡å·²ç»åœ¨ä½¿ç”¨ n8n è¿›è¡Œä¸šåŠ¡æµç¨‹è‡ªåŠ¨åŒ–ï¼Œæ·»åŠ  AI èƒ½åŠ›åªéœ€æå°‘çš„é¢å¤–æŠ•èµ„ã€‚æ–°ç»„ç»‡é¢ä¸´æ›´å¤šçš„åˆå§‹å¤æ‚æ€§ã€‚</p>
<p><strong>ç”¨äºä¼ä¸šç”Ÿäº§éƒ¨ç½²ï¼š</strong> ify çš„å…¨é¢åŠŸèƒ½é›†â€”â€”å¤š LLM æ”¯æŒã€ä¼ä¸šå®‰å…¨ã€å®¡è®¡æ—¥å¿—ã€ç§æœ‰éƒ¨ç½²é€‰é¡¹â€”â€”ä½¿å…¶æˆä¸ºç»„ç»‡æ„å»ºè®¡åˆ’ç»´æŠ¤å¤šå¹´çš„åº”ç”¨ç¨‹åºçš„è‡ªç„¶é€‰æ‹©ã€‚ å¦‚æœä½ è¦å°† AI é›†æˆåˆ°ç°æœ‰çš„ä¸šåŠ¡æµç¨‹è‡ªåŠ¨åŒ–ä¸­ï¼Œn8n ä¼šèƒœå‡ºã€‚å®ƒæä¾›äº†å¤æ‚ä¼ä¸šå·¥ä½œæµæ‰€éœ€çš„é›†æˆå¹¿åº¦å’Œå¯æ‰©å±•æ€§ã€‚ç”Ÿæ€ç³»ç»Ÿè¶³å¤Ÿæˆç†Ÿï¼Œå¯ä»¥è¿›è¡Œå¤§è§„æ¨¡ç”Ÿäº§éƒ¨ç½²ï¼Œå°½ç®¡åŸºç¡€è®¾æ–½è§„åˆ’å¾ˆé‡è¦ã€‚ Coze é€šå¸¸ä¸æ˜¯æ­¤ç”¨ä¾‹çš„å¹³å°ã€‚è™½ç„¶æŠ€æœ¯ä¸Šå¯è¡Œï¼Œä½†å…¶è®¾è®¡ç†å¿µä¼˜å…ˆè€ƒè™‘å¿«é€Ÿå®éªŒè€Œéé•¿æœŸå¯ç»´æŠ¤æ€§ã€‚å¯¹äºæ¦‚å¿µéªŒè¯ï¼ˆPoCï¼‰å’Œåˆ†å‘æ¯”æŠ€æœ¯çµæ´»æ€§æ›´é‡è¦çš„é¢å‘å®¢æˆ·çš„åº”ç”¨ç¨‹åºæ¥è¯´ï¼Œå®ƒæ˜¯ä¸€ä¸ªæå¥½çš„å¹³å°ã€‚</p>
<p><strong>ç”¨äºè‡ªå®šä¹‰ä¸šåŠ¡é€»è¾‘å’Œé›†æˆå¤æ‚æ€§ï¼š</strong> n8n çš„é›†æˆå¹¿åº¦æ— å¯åŒ¹æ•Œã€‚å¦‚æœä½ éœ€è¦ä»¥å¤æ‚çš„æ¨¡å¼è¿æ¥ APIã€æ•°æ®åº“å’ŒæœåŠ¡ï¼ŒåŒæ—¶åµŒå…¥ AI æ™ºèƒ½ï¼Œn8n æä¾›äº†æœ€ä¼˜é›…çš„è§£å†³æ–¹æ¡ˆã€‚è¯¥å¹³å°æœ¬è´¨ä¸Šæ“…é•¿æˆä¸ºä½ æŠ€æœ¯æ ˆä¸­çš„â€œç»“ç¼”ç»„ç»‡â€ã€‚ å¦‚æœä½ çš„å¤æ‚æ€§é›†ä¸­åœ¨ AI é€»è¾‘ä¸Šâ€”â€”å¤æ‚çš„æ™ºèƒ½ä½“ç¼–æ’ã€å¤æ‚çš„ RAG éœ€æ±‚å’Œå¤šæ¨¡å‹ç¼–æ’ï¼ŒDify æ•ˆæœå¾ˆå¥½ã€‚å®ƒçš„å·¥ä½œæµæ„å»ºå™¨å¯ä»¥æœ‰æ•ˆåœ°å¤„ç†è¿™äº›é—®é¢˜ï¼Œå°½ç®¡åœ¨é AI ç³»ç»Ÿçš„é›†æˆå¹¿åº¦ä¸Šæ— æ³•ä¸ n8n åŒ¹æ•Œã€‚ å¦‚æœéœ€è¦è¶…å‡ºå…¶æ’ä»¶ç”Ÿæ€ç³»ç»Ÿçš„å¤æ‚è‡ªå®šä¹‰é€»è¾‘ï¼ŒCoze å°±ä¼šå—åˆ°é™åˆ¶ã€‚å®ƒä¸æ˜¯ä¸ºæ­¤ç”¨ä¾‹è®¾è®¡çš„ã€‚</p>
<p><strong>ç”¨äºå›¢é˜Ÿå’Œæ‰©å±•ï¼š</strong> Dify çš„åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶ã€å·¥ä½œåŒºç®¡ç†å’Œå¯è§‚æµ‹æ€§å·¥å…·å¾ˆå¥½åœ°æ”¯æŒå›¢é˜Ÿåä½œã€‚è¯¥å¹³å°éšç»„ç»‡ä»å•ä¸ªå¼€å‘äººå‘˜å‘å±•åˆ°ä¼ä¸šå›¢é˜Ÿè€Œæˆé•¿ã€‚ n8n éœ€è¦æ›´ä»”ç»†çš„åŸºç¡€è®¾æ–½è§„åˆ’ä»¥è¿›è¡Œå›¢é˜Ÿæ‰©å±•ã€‚éšç€å›¢é˜Ÿçš„å‘å±•ï¼Œç‰ˆæœ¬æ§åˆ¶æŒ‘æˆ˜å˜å¾—æ›´åŠ æ˜æ˜¾ã€‚ç„¶è€Œï¼Œå·²ç»è¿è¡Œå¤æ‚è‡ªåŠ¨åŒ–æ ˆçš„ç»„ç»‡å¯ä»¥å°† n8n å·¥ä½œæµé›†æˆåˆ°å…¶ç°æœ‰çš„éƒ¨ç½²å®è·µä¸­ã€‚ Coze çš„åä½œåŠŸèƒ½æ­£åœ¨ä¸æ–­å‘å±•ã€‚å¤šç”¨æˆ·å·¥ä½œåŒºæ”¯æŒæ­£åœ¨å¼€å‘ä¸­ï¼Œä½†ç›®å‰çš„å›¢é˜Ÿæ‰©å±•èƒ½åŠ›æ¯” Dify æ›´æœ‰é™ã€‚</p>
<h2 data-id="heading-18">â€œå°å­©å­æ‰åšé€‰æ‹©ï¼Œå¤§äººå…¨éƒ½è¦â€</h2>
<p>é€šè¿‡æ·±å…¥äº†è§£è¿™ä¸‰ä¸ªå¹³å°å¾—å‡ºçš„ç»“è®ºæ˜¯ï¼šå®ƒä»¬å¹¶éå¤„äºç«äº‰å…³ç³»ï¼Œè€Œæ˜¯åœ¨è§£å†³ AI åº”ç”¨ç”Ÿæ€ç³»ç»Ÿä¸­çš„ä¸åŒé—®é¢˜ã€‚</p>
<p>æœ€æˆç†Ÿçš„ç»„ç»‡æ­£åœ¨é‡‡ç”¨<strong>æ··åˆæ–¹æ³•</strong>ã€‚ä»–ä»¬ä½¿ç”¨ Coze æˆ– Dify è¿›è¡Œå¿«é€Ÿå®éªŒå’Œé¢å‘å®¢æˆ·çš„åº”ç”¨ç¨‹åºã€‚ä»–ä»¬åˆ©ç”¨ n8n å°† AI èƒ½åŠ›é›†æˆåˆ°ç°æœ‰çš„ä¸šåŠ¡æµç¨‹è‡ªåŠ¨åŒ–ä¸­ã€‚ä»–ä»¬ä½¿ç”¨ä»£ç ä¼˜å…ˆå¼€å‘æ¥å¤„ç†å¹³å°æ— æ³•æœ‰æ•ˆå¤„ç†çš„ç‰¹æ®Šéœ€æ±‚ã€‚</p>
<p>è¿™ç§â€œå¤šå¹³å°èåˆâ€ï¼ˆPolyglot Platformï¼‰çš„æ–¹æ³•åæ˜ äº†æˆç†Ÿåº¦ã€‚å®ƒæ‰¿è®¤ä¸åŒçš„å·¥å…·æ“…é•¿è§£å†³ä¸åŒçš„é—®é¢˜ã€‚è§£å†³æ–¹æ¡ˆç©ºé—´è¶³å¤Ÿå¤§ï¼Œæ²¡æœ‰ä»»ä½•å•ä¸€å¹³å°å¯ä»¥ä¸»å®°ã€‚</p>
<p><strong>è€ƒè™‘ä¸€ä¸ªå…·ä½“çš„åœºæ™¯ï¼š</strong> ä¸€å®¶é‡‘èæœåŠ¡å…¬å¸æƒ³è¦æ„å»ºä¸€ä¸ª AI æ™ºèƒ½ä½“æ¥åˆ†æå®¢æˆ·æ•°æ®ã€æ£€ç´¢ç›¸å…³æ³•è§„å¹¶ç”Ÿæˆåˆæ­¥è´·æ¬¾å†³ç­–ã€‚ä»–ä»¬å¯èƒ½ä¼šä½¿ç”¨ <strong>Dify</strong> æ¥æ„å»ºæ ¸å¿ƒæ™ºèƒ½ä½“â€”â€”åˆ©ç”¨å…¶ RAG åŠŸèƒ½è¿›è¡Œæ³•è§„æ£€ç´¢å’Œå¤šæ¨¡å‹æ”¯æŒä»¥ä¼˜åŒ–æˆæœ¬ã€‚åŒæ—¶ï¼Œä»–ä»¬ä½¿ç”¨ <strong>n8n</strong> åˆ›å»ºå·¥ä½œæµï¼Œå½“è´·æ¬¾ç”³è¯·åˆ°è¾¾æ—¶è§¦å‘ Dify çš„æ™ºèƒ½ä½“ï¼Œæå–å†³ç­–è¾“å‡ºï¼Œå¹¶å°†ç»“æœè¾“å…¥å…¶ä¼ ç»Ÿçš„è´·æ¬¾ç®¡ç†ç³»ç»Ÿã€‚ä¸ºäº†å¯¹æ­¤æ™ºèƒ½ä½“è¿›è¡Œå¿«é€Ÿçš„é¢å‘å®¢æˆ·çš„å®éªŒï¼Œä»–ä»¬åœ¨ <strong>Coze</strong> ä¸­æ„å»ºåŸå‹ï¼Œä»¥ä¾¿åœ¨æŠ•èµ„æ›´æ·±åº¦çš„é›†æˆä¹‹å‰éªŒè¯å¸‚åœºååº”ã€‚</p>
<p>è¿™ä¸æ˜¯ä¸ºäº†å¤æ‚è€Œå¤æ‚ã€‚è¿™æ˜¯å®ç”¨ä¸»ä¹‰ã€‚æ¯ä¸ªå¹³å°éƒ½å°†å…¶ç‰¹å®šçš„ä¼˜åŠ¿è´¡çŒ®ç»™æ›´å¤§çš„æ¶æ„ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/58d22f715fa648509e34cf56a58cd310~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQWxhbkhvdQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767491727&amp;x-signature=hCL2%2BJMenM3ECokbooPrqyZeq0M%3D" alt="é€‰æ‹©åˆé€‚çš„å¹³å°" loading="lazy"/></p>
<h2 data-id="heading-19">å€¼å¾—å…³æ³¨çš„æ–°å…´è¶‹åŠ¿</h2>
<ul>
<li><strong>æ’ä»¶ç”Ÿæ€ç³»ç»Ÿæ­£åœ¨æˆç†Ÿã€‚</strong> Dify çš„ 600+ æ’ä»¶ã€n8n Cloud ä¸Šçš„éªŒè¯ç¤¾åŒºèŠ‚ç‚¹ä»¥åŠ Coze ä¸æ–­æ‰©å±•çš„æ’ä»¶åº“è¡¨æ˜ï¼Œç”Ÿæ€ç³»ç»Ÿæ­£å˜å¾—æ¯”æ ¸å¿ƒå¹³å°åŠŸèƒ½æ›´é‡è¦ã€‚åœ¨ 2025 å¹´åŠä»¥åï¼Œå¹³å°é€‰æ‹©åº”ç€é‡æƒè¡¡ç”Ÿæ€ç³»ç»Ÿçš„å¹¿åº¦å’Œè´¨é‡ã€‚</li>
<li><strong>æ™ºèƒ½ä½“èƒ½åŠ›æ­£åœ¨å¸¸æ€åŒ–ã€‚</strong> æ‰€æœ‰ä¸‰ä¸ªå¹³å°ç°åœ¨éƒ½å°†è‡ªä¸»æ™ºèƒ½ä½“è§†ä¸ºä¸€ç­‰å…¬æ°‘åŠŸèƒ½ï¼Œè€Œä¸æ˜¯é«˜çº§ç”¨ä¾‹ã€‚è¿™åæ˜ äº†å…¨è¡Œä¸šçš„å…±è¯†ï¼Œå³å¤šæ­¥æ¨ç†å’Œå·¥å…·ä½¿ç”¨æ˜¯æœ‰ä»·å€¼çš„ AI åº”ç”¨çš„åŸºç¡€ï¼Œè€Œä¸æ˜¯è¾¹ç¼˜æƒ…å†µã€‚</li>
<li><strong>å¤šæ¨¡å‹ç¼–æ’æ­£åœ¨æˆä¸ºæ ‡å‡†ã€‚</strong> å•ä¸€ LLM æä¾›å•†å¹³å°çš„æ—¶ä»£æ­£åœ¨ç»“æŸã€‚åœ¨åŒä¸€ä¸ªåº”ç”¨ç¨‹åºä¸­æ”¯æŒ GPTã€Claudeã€æœ¬åœ°æ¨¡å‹å’Œä¸“ç”¨æä¾›å•†è¶Šæ¥è¶Šå—åˆ°æœŸå¾…ã€‚å®ç°çœŸæ­£çš„<strong>æ¨¡å‹ä¸­ç«‹æ€§</strong>çš„å¹³å°å°†å…·æœ‰ç«äº‰ä¼˜åŠ¿ã€‚</li>
<li><strong>å®æ—¶æ•°æ®é›†æˆè‡³å…³é‡è¦ã€‚</strong> è¿æ¥åˆ°å®æ—¶æ•°æ®æºï¼ˆå¦‚ Dify çš„ Bright Data å’Œ Tavily é›†æˆï¼‰çš„çŸ¥è¯†ç®¡é“æ¶æ„è¶Šæ¥è¶Šæœ‰ä»·å€¼ã€‚é™æ€çŸ¥è¯†åº“å¾ˆå¿«å°±ä¼šè¿‡æ—¶ï¼›å®æ—¶æ•°æ®è¿æ¥ä½¿æ™ºèƒ½ä½“èƒ½å¤Ÿæä¾›å½“å‰ã€å‡†ç¡®çš„ä¿¡æ¯ã€‚</li>
</ul>
<h2 data-id="heading-20">åšå‡ºä½ çš„å¹³å°é€‰æ‹©</h2>
<p>åœ¨é€‰æ‹©ä½ä»£ç æ™ºèƒ½ä½“å¹³å°æ—¶ï¼Œè¯·æŒ‰é¡ºåºè€ƒè™‘è¿™äº›é—®é¢˜ï¼š</p>
<ol>
<li><strong>ä½ çš„æ—¶é—´èŠ‚ç‚¹ï¼Ÿ</strong> å‡ å¤©æˆ–å‡ å‘¨å»ºè®®ä½¿ç”¨ Cozeã€‚å‡ ä¸ªæœˆå»ºè®®ä½¿ç”¨ Dify æˆ– n8nï¼Œå…·ä½“å–å†³äºå¤æ‚æ€§ã€‚æ›´é•¿çš„æ—¶é—´è¡¨æ”¯æŒæ›´è¯¦ç»†çš„è¯„ä¼°ã€‚</li>
<li><strong>ä½ å›¢é˜Ÿçš„æŠ€æœ¯èƒŒæ™¯æ˜¯ä»€ä¹ˆï¼Ÿ</strong> éæŠ€æœ¯å›¢é˜Ÿå€¾å‘äº Cozeã€‚æ··åˆå›¢é˜Ÿæ›´å–œæ¬¢ Difyã€‚è‡ªåŠ¨åŒ–ä¸“å®¶é’ç n8nã€‚</li>
<li><strong>ä½ å°†å¦‚ä½•è¡¡é‡æˆåŠŸï¼Ÿ</strong> å¸‚åœºé€Ÿåº¦å’Œåˆ†å‘èŒƒå›´æœ‰åˆ©äº Cozeã€‚ç”Ÿäº§å¯é æ€§å’Œå¯æ‰©å±•æ€§æœ‰åˆ©äº Difyã€‚ä¸ç°æœ‰ç³»ç»Ÿçš„é›†æˆæœ‰åˆ©äº n8nã€‚</li>
<li><strong>ä½ å¯¹å¹³å°ä¾èµ–çš„é£é™©æ‰¿å—èƒ½åŠ›å¦‚ä½•ï¼Ÿ</strong> å¼€æºå’Œè‡ªæ‰˜ç®¡é€‰é¡¹ï¼ˆDify å’Œ n8nï¼‰é™ä½äº†ä¾›åº”å•†é”å®šé£é™©ã€‚Coze çš„ä¸“æœ‰ç”Ÿæ€ç³»ç»Ÿå…·æœ‰è¾ƒé«˜çš„è½¬æ¢æˆæœ¬ã€‚</li>
<li><strong>ä½ çš„ç”¨ä¾‹æœ‰å¤šå¤æ‚ï¼Ÿ</strong> ç®€å•çš„èŠå¤©æœºå™¨äººé€‚åˆä»»ä½•å¹³å°ã€‚å¤æ‚çš„å·¥ä½œæµå’Œæ™ºèƒ½ä½“ç¼–æ’æœ‰åˆ©äº Dify æˆ– n8nã€‚è·¨å¹³å°çš„ç®€å•éƒ¨ç½²æœ‰åˆ©äº Cozeã€‚</li>
</ol>
<h3 data-id="heading-21">æˆ‘ä»¬æ­£å¤„äº AI å¹³å°ä¸“ä¸šåŒ–æ—¶ä»£</h3>
<p>æˆ‘ä»¬ä¸å†äº‰è®ºä½ä»£ç  AI å¹³å°æ˜¯å¦è¶³ä»¥ç”¨äºç”Ÿäº§â€”â€”è¿™ä¸ªé—®é¢˜å·²ç»è§£å†³äº†ã€‚æˆ‘ä»¬ç°åœ¨äº‰è®ºçš„æ˜¯<strong>å“ªç§ä¸“ç”¨å¹³å°æœ€èƒ½è§£å†³ä½ çš„ç‰¹å®šé—®é¢˜</strong>ã€‚</p>
<p>åº”ç”¨äº AI æ™ºèƒ½ä½“çš„å¹³å°ç»æµå¹¶ä¸æ˜¯è¦å–ä»£ä¸“ä¸šå·¥ç¨‹ã€‚å®ƒæ˜¯æå‡å·¥ç¨‹å¸ˆç”¨æ›´å°‘çš„ä»£ç å’Œæ›´å°‘çš„åŸºç¡€è®¾æ–½ç®¡é“æ‰€èƒ½å®Œæˆçš„äº‹æƒ…ã€‚ä¸€ä¸ªå°å›¢é˜Ÿç°åœ¨å¯ä»¥æ„å»ºä»¥å‰éœ€è¦æ›´å¤§çš„å·¥ç¨‹éƒ¨é—¨æ‰èƒ½å®Œæˆçš„åº”ç”¨ç¨‹åºã€‚è¿™ä¸æ˜¯å·¥ç¨‹æŠ€è‰ºçš„ä¸§å¤±â€”â€”è¿™æ˜¯åº”ç”¨åœ¨æ›´é«˜æŠ½è±¡å±‚çº§ä¸Šçš„å·¥ç¨‹æŠ€è‰ºã€‚</p>
<p>è¿™é‡Œç ”ç©¶çš„ä¸‰ä¸ªå¹³å°â€”â€”Difyã€n8n å’Œ Cozeâ€”â€”å„è‡ªä»£è¡¨äº†åº”å¯¹è¿™ä¸€æŒ‘æˆ˜çš„æœ‰æ•ˆæ–¹æ³•ã€‚å®ƒä»¬å·²ç»è¶³å¤Ÿæˆç†Ÿï¼Œå¯ä»¥æ”¯æŒå¤§è§„æ¨¡çš„ç”Ÿäº§åº”ç”¨ã€‚æœªæ¥ä¸æ˜¯å…³äºä¸€ä¸ªå¹³å°çš„ä¸€ç»Ÿå¤©ä¸‹ï¼›è€Œæ˜¯å…³äºä¸ºæ¯ä¸ªé—®é¢˜é€‰æ‹©æ­£ç¡®çš„å·¥å…·ï¼Œå¹¶å°†å®ƒä»¬ä½œä¸ºæ›´å¹¿æ³›æŠ€æœ¯æˆ˜ç•¥çš„ä¸€éƒ¨åˆ†è¿›è¡Œé›†æˆã€‚</p>
<p>åœ¨ 2025 å¹´åŠä»¥åï¼Œ<strong>å¹³å°ç´ å…»ï¼ˆPlatform Literacyï¼‰</strong> å°†æˆä¸º AI ä»ä¸šè€…çš„æ ¸å¿ƒæŠ€èƒ½ã€‚äº†è§£æ¯ä¸ªå¹³å°çš„ä¼˜åŠ¿æ‰€åœ¨ï¼Œè¯†åˆ«æ¯ä¸ªå¹³å°èƒ½å¤Ÿå¾ˆå¥½è§£å†³çš„é—®é¢˜ï¼Œå¹¶èƒ½å¤Ÿè¯„ä¼°æ–°å…´ç«äº‰å¯¹æ‰‹ï¼Œå°†æ¯”åœ¨ä»»ä½•å•ä¸€å¹³å°ä¸Šçš„æ·±åšä¸“ä¸šçŸ¥è¯†æ›´é‡è¦ã€‚å¿«é€Ÿæ„å»ºåŸå‹ã€è¯„ä¼°é€‰é¡¹ä»¥åŠåœ¨å¹³å°ä¹‹é—´è¿›è¡Œæ·±æ€ç†Ÿè™‘çš„é›†æˆçš„èƒ½åŠ›ï¼Œå°†åŒºåˆ†æˆåŠŸçš„å›¢é˜Ÿå’Œé‚£äº›ä»åœ¨äº‰è®ºåŸºç¡€é—®é¢˜çš„å›¢é˜Ÿã€‚</p>
<p>â€œ<strong>ä»¥ç¬¬ä¸€æ€§åŸç†è‡ªå·±æ„å»º</strong>â€çš„æ—¶ä»£æ­£åœ¨è®©ä½äºâ€œ<strong>ç”¨å¼ºå¤§çš„å¹³å°æ™ºèƒ½ç»„è£…</strong>â€çš„æ—¶ä»£ã€‚è¿™ä¸ä»…æ˜¯ä¸€ç§å¦¥åâ€”â€”è¿™æ˜¯ä¸€é¡¹æŠ€æœ¯è¾¾åˆ°æˆç†Ÿçš„æ ‡å¿—ã€‚å¯¹äº AI æ™ºèƒ½ä½“è€Œè¨€ï¼Œæˆ‘ä»¬æ˜¾ç„¶å·²ç»åˆ°äº†è¿™ä¸€æ­¥ã€‚</p>
<p>åŸæ–‡é“¾æ¥ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fmedium.com%2Faimonks%2Fthe-rise-of-low-code-ai-agent-platforms-mastering-dify-n8n-and-coze-in-2025-cbd8aad04ae7" target="_blank" title="https://medium.com/aimonks/the-rise-of-low-code-ai-agent-platforms-mastering-dify-n8n-and-coze-in-2025-cbd8aad04ae7" ref="nofollow noopener noreferrer">The Rise of Low-Code AI Agent Platforms: Mastering Dify, n8n, and Coze in 2025</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Transformerå…¥é—¨ï¼šä¸€æ–‡è¯»æ‡‚ã€ŠAttention Is All You Needã€‹]]></title>    <link>https://juejin.cn/post/7588093282530852916</link>    <guid>https://juejin.cn/post/7588093282530852916</guid>    <pubDate>2025-12-28T02:18:33.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588093282530852916" data-draft-id="7588124225701969960" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Transformerå…¥é—¨ï¼šä¸€æ–‡è¯»æ‡‚ã€ŠAttention Is All You Needã€‹"/> <meta itemprop="keywords" content="ç®—æ³•,æ¶æ„"/> <meta itemprop="datePublished" content="2025-12-28T02:18:33.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸‰æ–—ç±³"/> <meta itemprop="url" content="https://juejin.cn/user/3157453124416622"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Transformerå…¥é—¨ï¼šä¸€æ–‡è¯»æ‡‚ã€ŠAttention Is All You Needã€‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3157453124416622/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸‰æ–—ç±³
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-28T02:18:33.000Z" title="Sun Dec 28 2025 02:18:33 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-28
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">å¼•è¨€ï¼šé¢ è¦†NLPé¢†åŸŸçš„æ–°æ¶æ„</h3>
<p>2017å¹´ï¼Œä¸€ç¯‡åä¸ºã€ŠAttention Is All You Needã€‹çš„è®ºæ–‡æ¨ªç©ºå‡ºä¸–ï¼Œæ­£å¦‚å…¶æ ‡é¢˜æ‰€æ­ç¤ºçš„ï¼Œå®ƒå®£å‘Šäº†ä¸€ä¸ªä»…å‡­â€œæ³¨æ„åŠ›æœºåˆ¶â€å°±èƒ½ç‹¬å½“ä¸€é¢çš„æ–°æ—¶ä»£ã€‚è¿™ç¯‡è®ºæ–‡ä»‹ç»çš„Transformeræ¨¡å‹ï¼Œå½»åº•é¢ è¦†äº†å½“æ—¶è‡ªç„¶è¯­è¨€å¤„ç†ï¼ˆNLPï¼‰é¢†åŸŸçš„æ ¼å±€ã€‚</p>
<p>åœ¨Transformerå‡ºç°ä¹‹å‰ï¼Œåºåˆ—å»ºæ¨¡ä»»åŠ¡ï¼ˆå¦‚æœºå™¨ç¿»è¯‘ï¼‰ä¸€ç›´ç”±å¾ªç¯ç¥ç»ç½‘ç»œï¼ˆRNNï¼‰åŠå…¶å˜ä½“ï¼ˆå¦‚é•¿çŸ­æœŸè®°å¿†ç½‘ç»œLSTMï¼‰æ‰€ä¸»å¯¼ã€‚ç„¶è€Œï¼Œè¿™ç±»æ¨¡å‹å­˜åœ¨ä¸€ä¸ªæ ¹æœ¬æ€§çš„ç“¶é¢ˆï¼šå®ƒä»¬çš„è®¡ç®—è¿‡ç¨‹å…·æœ‰â€œå†…åœ¨çš„é¡ºåºæ€§â€ï¼ˆinherently sequential natureï¼‰ã€‚è¿™æ„å‘³ç€æ¨¡å‹å¿…é¡»æŒ‰é¡ºåºå¤„ç†åºåˆ—ä¸­çš„æ¯ä¸€ä¸ªè¯ï¼Œè¿™ç§æœºåˆ¶ä¸¥é‡é™åˆ¶äº†è®¡ç®—çš„å¹¶è¡Œæ€§ï¼Œä¹Ÿä½¿å¾—å­¦ä¹ é•¿è·ç¦»çš„è¯è¯­ä¾èµ–å…³ç³»å˜å¾—å¼‚å¸¸å›°éš¾ã€‚</p>
<p>ä¸ºäº†è§£å†³è¿™ä¸€é—®é¢˜ï¼Œç ”ç©¶è€…ä»¬æå‡ºäº†Transformerâ€”â€”ä¸€ä¸ªå®Œå…¨æ‘’å¼ƒäº†å¾ªç¯å’Œå·ç§¯ç»“æ„ï¼Œå®Œå…¨åŸºäºæ³¨æ„åŠ›æœºåˆ¶ï¼ˆbased solely on attention mechanismsï¼‰çš„æ–°å‹ç½‘ç»œæ¶æ„ã€‚å®ƒä¸ä»…åœ¨æ€§èƒ½ä¸Šè¶…è¶Šäº†ä»¥å¾€æ‰€æœ‰çš„æ¨¡å‹ï¼Œæ›´å‡­å€Ÿå…¶å‡ºè‰²çš„å¹¶è¡Œè®¡ç®—èƒ½åŠ›ï¼Œæå¤§åœ°ç¼©çŸ­äº†è®­ç»ƒæ—¶é—´ã€‚è®ºæ–‡æŒ‡å‡ºï¼ŒTransformeræ¨¡å‹â€œå¯ä»¥åœ¨å…«å—P100 GPUä¸Šä»…è®­ç»ƒåäºŒä¸ªå°æ—¶â€å°±èƒ½è¾¾åˆ°å½“æ—¶æœ€å…ˆè¿›çš„ç¿»è¯‘è´¨é‡ã€‚</p>
<p>æœ¬æ–‡å°†éµå¾ªåŸè®ºæ–‡çš„è„‰ç»œï¼Œä»æ•´ä½“æ¶æ„ã€æ ¸å¿ƒæœºåˆ¶åˆ°å…³é”®ç»„ä»¶ï¼Œä¸ºæ‚¨æ·±å…¥æµ…å‡ºåœ°è§£æTransformerçš„ç²¾é«“ã€‚</p>
<hr/>
<h3 data-id="heading-1">1. Transformerçš„æ•´ä½“æ¶æ„ï¼šå®è§‚è§†è§’</h3>
<p>ä»å®è§‚ä¸Šçœ‹ï¼ŒTransformeréµå¾ªäº†å½“æ—¶ä¸»æµåºåˆ—å»ºæ¨¡ä»»åŠ¡ä¸­éå¸¸æˆç†Ÿçš„ç¼–ç å™¨-è§£ç å™¨ï¼ˆEncoder-Decoderï¼‰ç»“æ„ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c59954b494214dd9b5d14f7b98ab7d4f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiJ5paX57Gz:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767493113&amp;x-signature=B1c5bHjemTZoSMozINwm3RfGhWc%3D" alt="1.png" loading="lazy"/></p>
<p>å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œæ¨¡å‹çš„å·¦åŠéƒ¨åˆ†æ˜¯ç¼–ç å™¨ï¼Œå³åŠéƒ¨åˆ†æ˜¯è§£ç å™¨ã€‚</p>
<h4 data-id="heading-2">ç¼–ç å™¨ï¼ˆEncoderï¼‰</h4>
<p>ç¼–ç å™¨çš„æ ¸å¿ƒä»»åŠ¡æ˜¯å°†è¾“å…¥çš„ç¬¦å·åºåˆ— <code>(x1, ..., xn)</code> æ˜ å°„æˆä¸€ä¸ªè¿ç»­çš„å‘é‡è¡¨ç¤º <code>z = (z1, ..., zn)</code>ã€‚è¿™ä¸ª <code>z</code> åŒ…å«äº†è¾“å…¥åºåˆ—çš„å…¨éƒ¨ä¿¡æ¯ã€‚</p>
<p>ä¸ºäº†å®ç°è¿™ä¸€ç›®æ ‡ï¼Œç¼–ç å™¨ç”±<code>N=6</code>ä¸ªå®Œå…¨ç›¸åŒçš„å±‚å †å è€Œæˆã€‚æ¯ä¸€å±‚åˆåŒ…å«ä¸¤ä¸ªæ ¸å¿ƒçš„å­å±‚ï¼š</p>
<ol>
<li><strong>å¤šå¤´è‡ªæ³¨æ„åŠ›æœºåˆ¶ï¼ˆmulti-head self-attentionï¼‰</strong> ï¼šè´Ÿè´£æ•æ‰è¾“å…¥åºåˆ—å†…éƒ¨çš„ä¾èµ–å…³ç³»ã€‚</li>
<li><strong>ç®€å•çš„ã€æŒ‰ä½ç½®çš„å…¨è¿æ¥å‰é¦ˆç½‘ç»œï¼ˆposition-wise fully connected feed-forward networkï¼‰</strong> ï¼šå¯¹æ³¨æ„åŠ›å±‚çš„è¾“å‡ºè¿›è¡Œéçº¿æ€§å˜æ¢ã€‚</li>
</ol>
<p>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œåœ¨æ¯ä¸ªå­å±‚çš„å‘¨å›´ï¼Œéƒ½ä½¿ç”¨äº†ä¸€ä¸ªæ®‹å·®è¿æ¥ï¼ˆresidual connectionï¼‰å’Œå±‚å½’ä¸€åŒ–ï¼ˆlayer normalizationï¼‰æ“ä½œï¼Œè¿™æœ‰åŠ©äºç¨³å®šè®­ç»ƒè¿‡ç¨‹å¹¶æå‡æ¨¡å‹æ€§èƒ½ã€‚</p>
<h4 data-id="heading-3">è§£ç å™¨ï¼ˆDecoderï¼‰</h4>
<p>è§£ç å™¨çš„ä»»åŠ¡åˆ™æ˜¯åœ¨æ¥æ”¶ç¼–ç å™¨è¾“å‡ºçš„ <code>z</code> ä¹‹åï¼Œç”Ÿæˆä¸€ä¸ªè¾“å‡ºç¬¦å·åºåˆ— <code>(y1, ..., ym)</code>ã€‚å®ƒä¹ŸåŒæ ·ç”±<code>N=6</code>ä¸ªç›¸åŒçš„å±‚å †å è€Œæˆã€‚</p>
<p>è§£ç å™¨çš„æ¯ä¸€å±‚åœ¨ç¼–ç å™¨ä¸¤ä¸ªå­å±‚çš„åŸºç¡€ä¸Šï¼Œé¢å¤–æ’å…¥äº†ç¬¬ä¸‰ä¸ªå­å±‚ï¼š</p>
<ol>
<li><strong>å¸¦æ©ç çš„å¤šå¤´è‡ªæ³¨æ„åŠ›æœºåˆ¶ï¼ˆMasked Multi-Head Attentionï¼‰</strong> ï¼šä¸ç¼–ç å™¨ç±»ä¼¼ï¼Œä½†é€šè¿‡æ©ç ï¼ˆmaskingï¼‰æ¥â€œé˜²æ­¢ä½ç½®å…³æ³¨åˆ°åç»­ä½ç½®â€ï¼ˆprevent positions from attending to subsequent positionsï¼‰ã€‚è¿™ç§æ©ç æœºåˆ¶ï¼Œç»“åˆè®­ç»ƒæ—¶å°†è¾“å‡ºåµŒå…¥å‘å³åç§»ä¸€ä¸ªä½ç½®çš„åšæ³•ï¼Œå…±åŒç¡®ä¿äº†åœ¨é¢„æµ‹ç¬¬ <code>i</code> ä¸ªè¯æ—¶ï¼Œåªèƒ½ä¾èµ–äº <code>i</code> ä¹‹å‰çš„è¾“å‡ºï¼Œä»è€Œä¿è¯äº†æ¨¡å‹çš„è‡ªå›å½’ï¼ˆauto-regressiveï¼‰ç‰¹æ€§ã€‚</li>
<li><strong>ç¼–ç å™¨-è§£ç å™¨å¤šå¤´æ³¨æ„åŠ›ï¼ˆEncoder-Decoder Multi-Head Attentionï¼‰</strong> ï¼šè¿™ä¸€å±‚æ‰§è¡Œå¤šå¤´æ³¨æ„åŠ›æœºåˆ¶ï¼Œä½†å…¶æŸ¥è¯¢ï¼ˆqueriesï¼‰æ¥è‡ªå‰ä¸€ä¸ªè§£ç å™¨å­å±‚ï¼Œè€Œé”®ï¼ˆkeysï¼‰å’Œå€¼ï¼ˆvaluesï¼‰åˆ™æ¥è‡ªç¼–ç å™¨çš„æœ€ç»ˆè¾“å‡ºã€‚è¿™ä½¿å¾—è§£ç å™¨åœ¨ç”Ÿæˆæ¯ä¸ªè¯æ—¶éƒ½èƒ½å…³æ³¨åˆ°è¾“å…¥åºåˆ—çš„å…¨éƒ¨ä¿¡æ¯ã€‚</li>
<li><strong>æŒ‰ä½ç½®çš„å…¨è¿æ¥å‰é¦ˆç½‘ç»œ</strong>ï¼šç»“æ„å’Œä½œç”¨ä¸ç¼–ç å™¨ä¸­çš„ç›¸åŒã€‚</li>
</ol>
<p>åŒæ ·ï¼Œè§£ç å™¨ä¸­çš„æ¯ä¸ªå­å±‚ä¹Ÿé‡‡ç”¨äº†æ®‹å·®è¿æ¥å’Œå±‚å½’ä¸€åŒ–ã€‚</p>
<hr/>
<h3 data-id="heading-4">2. æ ¸å¿ƒæœºåˆ¶ï¼šæ·±å…¥ç†è§£æ³¨æ„åŠ›</h3>
<p>æ—¢ç„¶æ³¨æ„åŠ›ï¼ˆAttentionï¼‰æ˜¯Transformerçš„å”¯ä¸€æ ¸å¿ƒï¼Œé‚£ä¹ˆå®ƒç©¶ç«Ÿæ˜¯å¦‚ä½•å·¥ä½œçš„å‘¢ï¼Ÿ</p>
<h4 data-id="heading-5">2.1 ä»€ä¹ˆæ˜¯æ³¨æ„åŠ›ï¼Ÿ</h4>
<p>è®ºæ–‡ä¸­å°†æ³¨æ„åŠ›æœºåˆ¶æè¿°ä¸ºä¸€ä¸ªæ˜ å°„è¿‡ç¨‹ï¼šå®ƒå°†ä¸€ä¸ªæŸ¥è¯¢ï¼ˆQueryï¼‰å’Œä¸€ç»„é”®å€¼å¯¹ï¼ˆKey-Value pairsï¼‰æ˜ å°„åˆ°ä¸€ä¸ªè¾“å‡ºã€‚</p>
<p>å¯ä»¥è¿™æ ·ç†è§£ï¼š</p>
<ul>
<li><strong>Query (Q)</strong> ï¼šä»£è¡¨å½“å‰éœ€è¦å…³æ³¨çš„ç„¦ç‚¹ã€‚</li>
<li><strong>Key (K)</strong> ï¼šä»£è¡¨åºåˆ—ä¸­å¯ä¾›æ³¨æ„çš„å„ä¸ªå…ƒç´ ã€‚</li>
<li><strong>Value (V)</strong> ï¼šä»£è¡¨è¿™äº›å…ƒç´ å®é™…åŒ…å«çš„ä¿¡æ¯ã€‚</li>
</ul>
<p>æ³¨æ„åŠ›çš„è¾“å‡ºæ˜¯æ‰€æœ‰<strong>å€¼ï¼ˆValuesï¼‰</strong> <strong>åŠ æƒå’Œï¼ˆweighted sumï¼‰</strong> ã€‚è€Œæ¯ä¸ªå€¼å¯¹åº”çš„æƒé‡ï¼Œåˆ™æ˜¯ç”±æŸ¥è¯¢ï¼ˆQueryï¼‰<strong>ä¸å®ƒå¯¹åº”çš„</strong>é”®ï¼ˆKeyï¼‰<strong>é€šè¿‡ä¸€ä¸ª</strong>å…¼å®¹æ€§å‡½æ•°ï¼ˆcompatibility functionï¼‰è®¡ç®—å¾—å‡ºçš„ã€‚ç®€å•æ¥è¯´ï¼Œå°±æ˜¯Qå’ŒKè¶ŠåŒ¹é…ï¼Œå¯¹åº”Vçš„æƒé‡å°±è¶Šå¤§ã€‚</p>
<h4 data-id="heading-6">2.2 ç¼©æ”¾ç‚¹ç§¯æ³¨æ„åŠ› (Scaled Dot-Product Attention)</h4>
<p>Transformerä¸­ä½¿ç”¨çš„å…·ä½“æ³¨æ„åŠ›å®ç°è¢«ç§°ä¸ºâ€œç¼©æ”¾ç‚¹ç§¯æ³¨æ„åŠ›â€ã€‚</p>
<p>å…¶è®¡ç®—è¿‡ç¨‹å¯ä»¥åˆ†è§£ä¸ºä»¥ä¸‹å››æ­¥ï¼š</p>
<ol>
<li><strong>è®¡ç®—ç‚¹ç§¯</strong>ï¼šè®¡ç®—æŸ¥è¯¢ï¼ˆQï¼‰ä¸æ‰€æœ‰é”®ï¼ˆKï¼‰çš„ç‚¹ç§¯ï¼Œå¾—åˆ°å®ƒä»¬ä¹‹é—´çš„ç›¸ä¼¼åº¦åˆ†æ•°ã€‚</li>
<li><strong>ç¼©æ”¾</strong>ï¼šå°†ä¸Šä¸€æ­¥å¾—åˆ°çš„æ‰€æœ‰åˆ†æ•°é™¤ä»¥ä¸€ä¸ªç¼©æ”¾å› å­ <code>âˆšdk</code>ï¼ˆå…¶ä¸­<code>dk</code>æ˜¯é”®å‘é‡çš„ç»´åº¦ï¼‰ã€‚è®ºæ–‡çš„è„šæ³¨è§£é‡Šäº†ä¸ºä½•éœ€è¦ç¼©æ”¾ï¼šå½“<code>dk</code>çš„å€¼è¾ƒå¤§æ—¶ï¼Œç‚¹ç§¯çš„ç»“æœé‡çº§ä¼šå˜å¾—å¾ˆå¤§ï¼Œè¿™ä¼šå°†Softmaxå‡½æ•°æ¨å‘æ¢¯åº¦æå°çš„åŒºåŸŸï¼Œä¸åˆ©äºæ¨¡å‹è®­ç»ƒã€‚ç¼©æ”¾æ“ä½œå¯ä»¥æœ‰æ•ˆç¼“è§£è¿™ä¸ªé—®é¢˜ã€‚</li>
<li><strong>Softmaxå½’ä¸€åŒ–</strong>ï¼šå°†ç¼©æ”¾åçš„åˆ†æ•°è¾“å…¥Softmaxå‡½æ•°ï¼Œå¾—åˆ°èŒƒå›´åœ¨0åˆ°1ä¹‹é—´çš„æƒé‡ã€‚æ‰€æœ‰æƒé‡ä¹‹å’Œä¸º1ã€‚</li>
<li><strong>åŠ æƒæ±‚å’Œ</strong>ï¼šç”¨è¿™äº›æƒé‡ä¹˜ä»¥å¯¹åº”çš„å€¼ï¼ˆVï¼‰ï¼Œç„¶åå°†å®ƒä»¬ç›¸åŠ ï¼Œå¾—åˆ°æœ€ç»ˆçš„æ³¨æ„åŠ›è¾“å‡ºã€‚</li>
</ol>
<p>æ•´ä¸ªè¿‡ç¨‹å¯ä»¥ç”¨ä¸€ä¸ªç®€æ´çš„å…¬å¼æ¥è¡¨ç¤ºï¼š <code>Attention(Q, K, V) = softmax( (QK^T) / âˆšdk ) V</code></p>
<h4 data-id="heading-7">2.3 å¤šå¤´æ³¨æ„åŠ› (Multi-Head Attention)</h4>
<p>è®ºæ–‡ä½œè€…å‘ç°ï¼Œä¸å…¶ç”¨<code>d_model</code>ï¼ˆæ¨¡å‹ç»´åº¦ï¼Œå¦‚512ï¼‰ç»´åº¦çš„Qã€Kã€Væ‰§è¡Œä¸€æ¬¡æ³¨æ„åŠ›è®¡ç®—ï¼Œä¸å¦‚å°†å®ƒä»¬åˆ†åˆ«è¿›è¡Œ<code>h</code>æ¬¡çº¿æ€§æŠ•å½±ï¼Œå˜æ¢åˆ°æ›´ä½çš„ç»´åº¦ï¼ˆ<code>dk</code>, <code>dk</code>, <code>dv</code>ï¼‰ï¼Œç„¶åå¹¶è¡Œåœ°æ‰§è¡Œ<code>h</code>æ¬¡æ³¨æ„åŠ›è®¡ç®—ã€‚</p>
<p>è¿™ä¸ªè¿‡ç¨‹å¦‚ä¸‹ï¼š</p>
<ol>
<li>å°†åŸå§‹çš„Qã€Kã€Vé€šè¿‡ä¸åŒçš„çº¿æ€§å˜æ¢ï¼ˆæƒé‡çŸ©é˜µä¸åŒï¼‰æŠ•å½±<code>h</code>æ¬¡ã€‚</li>
<li>å¹¶è¡Œåœ°å¯¹è¿™<code>h</code>ç»„æŠ•å½±åçš„Qã€Kã€Våˆ†åˆ«æ‰§è¡Œä¸€æ¬¡â€œç¼©æ”¾ç‚¹ç§¯æ³¨æ„åŠ›â€è®¡ç®—ã€‚</li>
<li>å°†<code>h</code>ä¸ªæ³¨æ„åŠ›è®¡ç®—çš„è¾“å‡ºç»“æœæ‹¼æ¥ï¼ˆconcatenateï¼‰èµ·æ¥ã€‚</li>
<li>å°†æ‹¼æ¥åçš„ç»“æœå†æ¬¡è¿›è¡Œä¸€æ¬¡çº¿æ€§æŠ•å½±ï¼Œå¾—åˆ°æœ€ç»ˆçš„è¾“å‡ºã€‚</li>
</ol>
<p>è¿™ç§æœºåˆ¶çš„å¥½å¤„åœ¨äºï¼Œæ­£å¦‚è®ºæ–‡æ‰€è¯´ï¼šâ€œå¤šå¤´æ³¨æ„åŠ›å…è®¸æ¨¡å‹åœ¨ä¸åŒä½ç½®å…±åŒå…³æ³¨æ¥è‡ªä¸åŒè¡¨ç¤ºå­ç©ºé—´çš„ä¿¡æ¯ã€‚â€ï¼ˆMulti-head attention allows the model to jointly attend to information from different representation subspaces at different positions.ï¼‰æ¢å¥è¯è¯´ï¼Œä¸åŒçš„â€œå¤´â€ï¼ˆheadï¼‰å¯ä»¥å­¦ä¹ å…³æ³¨ä¸åŒæ–¹é¢çš„ä¿¡æ¯ï¼Œæ¯”å¦‚æœ‰çš„å¤´å…³æ³¨è¯­æ³•ç»“æ„ï¼Œæœ‰çš„å¤´å…³æ³¨è¯­ä¹‰å…³è”ï¼Œä»è€Œå¢å¼ºäº†æ¨¡å‹çš„è¡¨è¾¾èƒ½åŠ›ã€‚</p>
<p>åœ¨è®ºæ–‡ä¸­ï¼Œä½œè€…ä½¿ç”¨äº†<code>h=8</code>ä¸ªå¹¶è¡Œçš„æ³¨æ„åŠ›å¤´ã€‚å¯¹äºç»´åº¦ä¸º512çš„<code>d_model</code>ï¼Œæ¯ä¸ªå¤´å¤„ç†çš„ç»´åº¦è¢«ç¼©å°ä¸º<code>dk = dv = 512/8 = 64</code>ã€‚è¿™æ¸…æ™°åœ°ä½“ç°äº†å°†ä¸€ä¸ªå¤§é—®é¢˜åˆ†è§£ä¸ºå¤šä¸ªå°é—®é¢˜å¹¶è¡Œå¤„ç†çš„æ€æƒ³ã€‚</p>
<hr/>
<h3 data-id="heading-8">3. æ³¨æ„åŠ›åœ¨Transformerä¸­çš„ä¸‰å¤§åº”ç”¨åœºæ™¯</h3>
<p>å¤šå¤´æ³¨æ„åŠ›æœºåˆ¶åœ¨Transformeræ¨¡å‹ä¸­æœ‰ä¸‰ç§ä¸åŒçš„åº”ç”¨æ–¹å¼ï¼š</p>
<ul>
<li>
<p><strong>ç¼–ç å™¨-è§£ç å™¨æ³¨æ„åŠ› (Encoder-Decoder Attention)</strong></p>
<ul>
<li>è¿™æ˜¯è¿æ¥ç¼–ç å™¨å’Œè§£ç å™¨çš„æ¡¥æ¢ã€‚å®ƒçš„<strong>æŸ¥è¯¢ï¼ˆqueriesï¼‰</strong> æ¥è‡ªå‰ä¸€ä¸ªè§£ç å™¨å±‚ï¼Œè€Œé”®ï¼ˆkeysï¼‰<strong>å’Œ</strong>å€¼ï¼ˆvaluesï¼‰åˆ™æ¥è‡ªç¼–ç å™¨çš„æœ€ç»ˆè¾“å‡ºã€‚</li>
<li>è¿™ä½¿å¾—è§£ç å™¨åœ¨ç”Ÿæˆæ¯ä¸€ä¸ªè¾“å‡ºè¯æ—¶ï¼Œéƒ½èƒ½å¤Ÿå…³æ³¨åˆ°è¾“å…¥åºåˆ—ä¸­çš„æ‰€æœ‰ä½ç½®ï¼Œè¿™ä¸ä¼ ç»Ÿçš„åºåˆ—åˆ°åºåˆ—æ¨¡å‹ä¸­çš„æ³¨æ„åŠ›æœºåˆ¶éå¸¸ç›¸ä¼¼ã€‚</li>
</ul>
</li>
<li>
<p><strong>ç¼–ç å™¨ä¸­çš„è‡ªæ³¨æ„åŠ› (Encoder Self-Attention)</strong></p>
<ul>
<li>åœ¨ç¼–ç å™¨çš„è‡ªæ³¨æ„åŠ›å±‚ä¸­ï¼Œæ‰€æœ‰çš„é”®ã€å€¼å’ŒæŸ¥è¯¢ï¼ˆkeys, values, and queriesï¼‰éƒ½æ¥è‡ªåŒä¸€ä¸ªåœ°æ–¹â€”â€”å³ç¼–ç å™¨ä¸­å‰ä¸€å±‚çš„è¾“å‡ºã€‚</li>
<li>è¿™ä½¿å¾—ç¼–ç å™¨ä¸­çš„æ¯ä¸ªä½ç½®éƒ½èƒ½å…³æ³¨åˆ°å‰ä¸€å±‚è¾“å‡ºçš„æ‰€æœ‰ä½ç½®ï¼Œä»è€Œæ•æ‰è¾“å…¥åºåˆ—å†…éƒ¨çš„ä¾èµ–å…³ç³»ã€‚</li>
</ul>
</li>
<li>
<p><strong>è§£ç å™¨ä¸­çš„è‡ªæ³¨æ„åŠ› (Decoder Self-Attention)</strong></p>
<ul>
<li>è§£ç å™¨ä¸­çš„è‡ªæ³¨æ„åŠ›å±‚å·¥ä½œæ–¹å¼ä¸ç¼–ç å™¨ç±»ä¼¼ï¼Œä½†æœ‰ä¸€ä¸ªå…³é”®åŒºåˆ«ï¼šä¸ºäº†ä¿æŒå…¶è‡ªå›å½’ç‰¹æ€§ï¼Œå¿…é¡»é˜»æ­¢ä¿¡æ¯å‘å·¦æµåŠ¨ã€‚</li>
<li>è¿™æ˜¯é€šè¿‡åœ¨ç¼©æ”¾ç‚¹ç§¯æ³¨æ„åŠ›ä¸­å¼•å…¥æ©ç ï¼ˆmaskingï¼‰å®ç°çš„ã€‚å…·ä½“è€Œè¨€ï¼Œåœ¨è®¡ç®—softmaxä¹‹å‰ï¼Œå®ƒä¼šæŠŠæ‰€æœ‰å¯¹åº”äºéæ³•è¿æ¥ï¼ˆå³å…³æ³¨å½“å‰ä½ç½®ä¹‹åçš„ä½ç½®ï¼‰çš„å€¼è®¾ç½®ä¸ºè´Ÿæ— ç©·ï¼ˆ-âˆï¼‰ã€‚è¿™æ ·ä¸€æ¥ï¼Œè¿™äº›ä½ç½®åœ¨ç»è¿‡softmaxå‡½æ•°åï¼Œå…¶æƒé‡ä¼šå˜ä¸º0ï¼Œä»è€Œç¡®ä¿é¢„æµ‹æ—¶åªèƒ½ä¾èµ–äºå·²ç”Ÿæˆçš„è¾“å‡ºåºåˆ—ã€‚</li>
</ul>
</li>
</ul>
<hr/>
<h3 data-id="heading-9">4. ä¸å¯æˆ–ç¼ºçš„è¾…åŠ©ç»„ä»¶</h3>
<p>è™½ç„¶æ³¨æ„åŠ›æ˜¯æ ¸å¿ƒï¼Œä½†Transformerçš„æˆåŠŸä¹Ÿç¦»ä¸å¼€ä¸€äº›å…³é”®çš„è¾…åŠ©ç»„ä»¶ã€‚</p>
<h4 data-id="heading-10">4.1 ä½ç½®ç¼–ç  (Positional Encoding)</h4>
<p>ç”±äºTransformeræ¨¡å‹å®Œå…¨æ‘’å¼ƒäº†å¾ªç¯å’Œå·ç§¯ï¼Œå®ƒæœ¬èº«æ— æ³•æ„ŸçŸ¥åºåˆ—ä¸­è¯è¯­çš„é¡ºåºã€‚ä¾‹å¦‚ï¼Œå¯¹äºæ¨¡å‹æ¥è¯´ï¼Œâ€œæˆ‘çˆ±ä½ â€å’Œâ€œä½ çˆ±æˆ‘â€åœ¨æ²¡æœ‰ä½ç½®ä¿¡æ¯çš„æƒ…å†µä¸‹æ˜¯å®Œå…¨ä¸€æ ·çš„ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæ¨¡å‹å¿…é¡»å¼•å…¥ä¸€äº›å…³äºåºåˆ—é¡ºåºçš„ä¿¡æ¯ã€‚</p>
<p>è§£å†³æ–¹æ¡ˆæ˜¯åœ¨ç¼–ç å™¨å’Œè§£ç å™¨å †æ ˆåº•éƒ¨çš„è¾“å…¥åµŒå…¥ï¼ˆinput embeddingsï¼‰ä¸­åŠ å…¥â€œä½ç½®ç¼–ç â€ã€‚è®ºæ–‡ä¸­ä½¿ç”¨äº†ä¸€ç§åŸºäºä¸åŒé¢‘ç‡çš„æ­£å¼¦ï¼ˆsineï¼‰å’Œä½™å¼¦ï¼ˆcosineï¼‰å‡½æ•°çš„å›ºå®šç¼–ç æ–¹æ³•ã€‚ä½œè€…é€‰æ‹©è¿™ç§å‡½æ•°çš„åŸå› æ˜¯ï¼Œä»–ä»¬å‡è®¾è¿™èƒ½è®©æ¨¡å‹æ›´å®¹æ˜“åœ°å­¦ä¹ é€šè¿‡ç›¸å¯¹ä½ç½®æ¥è¿›è¡Œå…³æ³¨ï¼Œå¹¶ä¸”è¿™ç§æ–¹æ³•å¯èƒ½è®©æ¨¡å‹èƒ½å¤Ÿæ¨å¹¿åˆ°æ¯”è®­ç»ƒæ—¶é‡åˆ°çš„åºåˆ—æ›´é•¿çš„åºåˆ—ã€‚</p>
<h4 data-id="heading-11">4.2 æŒ‰ä½ç½®çš„å‰é¦ˆç½‘ç»œ (Position-wise Feed-Forward Networks)</h4>
<p>åœ¨æ¯ä¸ªç¼–ç å™¨å’Œè§£ç å™¨å±‚ä¸­ï¼Œé™¤äº†æ³¨æ„åŠ›å­å±‚å¤–ï¼Œè¿˜æœ‰ä¸€ä¸ªå…¨è¿æ¥çš„å‰é¦ˆç½‘ç»œã€‚è¿™ä¸ªç½‘ç»œè¢«ç‹¬ç«‹ä¸”ç›¸åŒåœ°åº”ç”¨äºåºåˆ—ä¸­çš„æ¯ä¸€ä¸ªä½ç½®ã€‚</p>
<p>å®ƒç”±ä¸¤ä¸ªçº¿æ€§å˜æ¢å’Œä¸€ä¸ªReLUæ¿€æ´»å‡½æ•°ç»„æˆï¼Œå¯ä»¥ç”¨ä»¥ä¸‹å…¬å¼è¡¨ç¤ºï¼š</p>
<p><code>FFN(x) = max(0, xW1 + b1)W2 + b2</code></p>
<p>è¿™ä¸ªç»„ä»¶ä¸ºæ¨¡å‹å¢åŠ äº†éçº¿æ€§å˜æ¢èƒ½åŠ›ï¼Œè¿›ä¸€æ­¥å¢å¼ºäº†æ¨¡å‹çš„è¡¨è¾¾èƒ½åŠ›ã€‚åœ¨è®ºæ–‡çš„æ¨¡å‹ä¸­ï¼Œè¾“å…¥å’Œè¾“å‡ºçš„ç»´åº¦<code>d_model</code>æ˜¯512ï¼Œè€Œç½‘ç»œä¸­é—´å±‚çš„ç»´åº¦<code>d_ff</code>æ˜¯2048ã€‚è¿™æ„å‘³ç€å‰é¦ˆç½‘ç»œé¦–å…ˆå°†è¡¨ç¤ºä»512ç»´æ‰©å±•åˆ°2048ç»´ï¼Œç»è¿‡ReLUæ¿€æ´»åå†æŠ•å½±å›512ç»´ï¼Œä»è€Œå¢åŠ äº†æ¨¡å‹çš„è¡¨å¾å®¹é‡ã€‚</p>
<hr/>
<h3 data-id="heading-12">5. ä¸ºä»€ä¹ˆæ˜¯è‡ªæ³¨æ„åŠ›ï¼Ÿ</h3>
<p>ä¸å½“æ—¶ä¸»æµçš„å¾ªç¯å±‚ï¼ˆRecurrent Layerï¼‰ç›¸æ¯”ï¼Œè‡ªæ³¨æ„åŠ›æœºåˆ¶ç©¶ç«Ÿæœ‰ä½•ä¼˜åŠ¿ï¼Ÿè®ºæ–‡ä»ä¸‰ä¸ªæ–¹é¢è¿›è¡Œäº†æ¯”è¾ƒã€‚</p>

























<table><thead><tr><th>ç‰¹æ€§</th><th>è‡ªæ³¨æ„åŠ›å±‚ (Self-Attention)</th><th>å¾ªç¯å±‚ (Recurrent)</th></tr></thead><tbody><tr><td><strong>æ¯å±‚è®¡ç®—å¤æ‚åº¦</strong></td><td>O(nÂ² Â· d)</td><td>O(n Â· dÂ²)</td></tr><tr><td><strong>å¯å¹¶è¡Œè®¡ç®—é‡</strong></td><td>O(1)</td><td>O(n)</td></tr><tr><td><strong>é•¿è·ç¦»ä¾èµ–çš„å­¦ä¹ è·¯å¾„é•¿åº¦</strong></td><td>O(1)</td><td>O(n)</td></tr></tbody></table>
<ul>
<li><strong>è®¡ç®—å¤æ‚åº¦</strong>ï¼šå½“åºåˆ—é•¿åº¦<code>n</code>å°äºè¡¨ç¤ºç»´åº¦<code>d</code>æ—¶ï¼Œè‡ªæ³¨æ„åŠ›å±‚çš„è®¡ç®—é€Ÿåº¦æ¯”å¾ªç¯å±‚æ›´å¿«ã€‚è¿™åœ¨æœ€å…ˆè¿›çš„æœºå™¨ç¿»è¯‘æ¨¡å‹ä¸­æ˜¯éå¸¸å¸¸è§çš„æƒ…å†µã€‚</li>
<li><strong>å¹¶è¡Œåº¦</strong>ï¼šè‡ªæ³¨æ„åŠ›æœºåˆ¶çš„è®¡ç®—æ˜¯å¸¸æ•°çº§åˆ«çš„ï¼ˆO(1)ä¸ªé¡ºåºæ“ä½œï¼‰ï¼Œå› ä¸ºå®ƒä¸€æ¬¡æ€§è®¡ç®—æ‰€æœ‰ä½ç½®çš„æ³¨æ„åŠ›ï¼Œå¯ä»¥å¤§è§„æ¨¡å¹¶è¡Œã€‚è€Œå¾ªç¯å±‚éœ€è¦<code>O(n)</code>ä¸ªé¡ºåºæ“ä½œï¼Œå¿…é¡»æŒ‰æ—¶é—´æ­¥é€ä¸ªè®¡ç®—ï¼Œé™åˆ¶äº†å¹¶è¡Œèƒ½åŠ›ã€‚</li>
<li><strong>é•¿è·ç¦»ä¾èµ–</strong>ï¼šåœ¨è‡ªæ³¨æ„åŠ›ç½‘ç»œä¸­ï¼Œä»»æ„ä¸¤ä¸ªä½ç½®ä¹‹é—´çš„ä¿¡å·ä¼ æ’­è·¯å¾„é•¿åº¦éƒ½æ˜¯<code>O(1)</code>ï¼Œå› ä¸ºå®ƒä»¬å¯ä»¥ç›´æ¥äº¤äº’ã€‚è€Œåœ¨å¾ªç¯ç½‘ç»œä¸­ï¼Œä¿¡å·éœ€è¦ä»å¤´åˆ°å°¾ä¾æ¬¡ä¼ æ’­ï¼Œè·¯å¾„é•¿åº¦æ˜¯<code>O(n)</code>ã€‚è·¯å¾„è¶ŠçŸ­ï¼Œå­¦ä¹ é•¿è·ç¦»ä¾èµ–å…³ç³»å°±è¶Šå®¹æ˜“ï¼Œä¹Ÿæ›´èƒ½é¿å…RNNä¸­å¸¸è§çš„æ¢¯åº¦æ¶ˆå¤±æˆ–çˆ†ç‚¸é—®é¢˜ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-13">6. æˆæœä¸ç»“è®º</h3>
<p>Transformeræ¨¡å‹åœ¨ä¸¤ä¸ªä¸»æµçš„æœºå™¨ç¿»è¯‘ä»»åŠ¡ä¸Šå–å¾—äº†å“è¶Šçš„æˆæœã€‚åœ¨WMT 2014è‹±å¾·ç¿»è¯‘ä»»åŠ¡ä¸Šï¼Œå®ƒå–å¾—äº†28.4çš„BLEUåˆ†æ•°ï¼Œæ¯”ä¹‹å‰åŒ…æ‹¬é›†æˆæ¨¡å‹åœ¨å†…çš„æœ€ä½³ç»“æœé«˜å‡ºæ•´æ•´2.0åˆ†ã€‚åŒæ ·åœ°ï¼Œåœ¨WMT 2014è‹±æ³•ç¿»è¯‘ä»»åŠ¡ä¸Šï¼Œè¯¥æ¨¡å‹ä¹Ÿåˆ›é€ äº†æ–°çš„å•æ¨¡å‹SOTAè®°å½•ï¼ŒBLEUåˆ†æ•°è¾¾åˆ°äº†41.8ã€‚</p>
<p>æ›´é‡è¦çš„æ˜¯å®ƒçš„è®­ç»ƒæ•ˆç‡ã€‚è®ºæ–‡æŒ‡å‡ºï¼ŒTransformerçš„è®­ç»ƒé€Ÿåº¦â€œæ˜æ˜¾æ›´å¿«â€ï¼ˆsignificantly fasterï¼‰ï¼Œå…¶è®­ç»ƒæˆæœ¬ä»…ä¸ºå…¶ä»–ç«äº‰æ¨¡å‹çš„ä¸€å°éƒ¨åˆ†ã€‚</p>
<p>æœ€åï¼Œè®ºæ–‡çš„æ ¸å¿ƒè´¡çŒ®å¯ä»¥æ€»ç»“ä¸ºï¼šæå‡ºäº†Transformerï¼Œè¿™æ˜¯ç¬¬ä¸€ä¸ªå®Œå…¨åŸºäºæ³¨æ„åŠ›æœºåˆ¶çš„åºåˆ—è½¬å¯¼æ¨¡å‹ã€‚å®ƒç”¨å¤šå¤´è‡ªæ³¨æ„åŠ›ï¼ˆmulti-headed self-attentionï¼‰å–ä»£äº†ç¼–ç å™¨-è§£ç å™¨æ¶æ„ä¸­æœ€å¸¸ç”¨çš„å¾ªç¯å±‚ï¼Œä¸ºåºåˆ—å»ºæ¨¡é¢†åŸŸå¼€è¾Ÿäº†ä¸€æ¡å…¨æ–°çš„ã€æ›´é«˜æ•ˆçš„é“è·¯ã€‚</p>
<hr/>
<p><strong>è®ºæ–‡ä¿¡æ¯</strong></p>
<ul>
<li><strong>è®ºæ–‡æ ‡é¢˜</strong>: Attention Is All You Need</li>
<li><strong>ä½œè€…</strong>: Ashish Vaswani, Noam Shazeer, Niki Parmar, et al.</li>
<li><strong>å‘è¡¨ä¼šè®®</strong>: NIPS 2017</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ„å»ºAIæ™ºèƒ½ä½“ï¼šå…­åå…­ã€æ™ºèƒ½çš„è¾¹ç•Œï¼šé€šè¿‡åå·®-æ–¹å·®ç†è®ºç†è§£å¤§æ¨¡å‹çš„èƒ½åŠ›ä¸å±€é™]]></title>    <link>https://juejin.cn/post/7588092534162440192</link>    <guid>https://juejin.cn/post/7588092534162440192</guid>    <pubDate>2025-12-28T02:43:55.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588092534162440192" data-draft-id="7588043318359654435" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ„å»ºAIæ™ºèƒ½ä½“ï¼šå…­åå…­ã€æ™ºèƒ½çš„è¾¹ç•Œï¼šé€šè¿‡åå·®-æ–¹å·®ç†è®ºç†è§£å¤§æ¨¡å‹çš„èƒ½åŠ›ä¸å±€é™"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½,Python"/> <meta itemprop="datePublished" content="2025-12-28T02:43:55.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å½¼å²¸èŠ±å¼€äº†å—"/> <meta itemprop="url" content="https://juejin.cn/user/4153315734334538"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ„å»ºAIæ™ºèƒ½ä½“ï¼šå…­åå…­ã€æ™ºèƒ½çš„è¾¹ç•Œï¼šé€šè¿‡åå·®-æ–¹å·®ç†è®ºç†è§£å¤§æ¨¡å‹çš„èƒ½åŠ›ä¸å±€é™
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4153315734334538/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å½¼å²¸èŠ±å¼€äº†å—
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-28T02:43:55.000Z" title="Sun Dec 28 2025 02:43:55 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-28
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€å‰è¨€</h2>
<p>æœ€è¿‘æˆ‘ä»¬åˆ†äº«æ¨¡å‹æ‹Ÿåˆå’Œæ—©åœæœºåˆ¶æ—¶ï¼Œéƒ½æ¶‰åŠåˆ°äº†â€œåå·®-æ–¹å·®æƒè¡¡â€çš„æ¦‚å¿µï¼Œé‚£ä¹ˆä»€ä¹ˆæ˜¯åå·®ï¼Œä»€ä¹ˆåˆæ˜¯æ–¹å·®ï¼Œéšå«äº†å“ªäº›æ–°å¥‡å·§å¦™çš„çŸ¥è¯†ç‚¹ï¼Œä»Šå¤©æˆ‘ä»¬æ¥ä¸€æ¢ç©¶ç«Ÿã€‚é¦–å…ˆï¼Œæˆ‘ä»¬æ‰¾ä¸€ä¸ªé€šä¿—çš„ä¾‹å­ï¼Œåˆæ­¥ç†è§£åå·®å’Œæ–¹å·®è¡¨è¾¾çš„åŸºç¡€æ¦‚å¿µï¼Œæƒ³è±¡è¿™æ ·ä¸€ä¸ªåœºæ™¯ï¼Œæˆ‘ä»¬ç­çº§é‡Œæœ‰ä¸‰ç§ç±»å‹çš„å­¦ç”Ÿï¼š</p>
<ul>
<li>Aç±»å­¦ç”Ÿï¼šæ­»è®°ç¡¬èƒŒè¯¾æœ¬å†…å®¹ï¼Œé‡åˆ°åŸé¢˜èƒ½å¾—é«˜åˆ†ï¼Œä½†é¢˜ç›®ç¨ä½œå˜åŒ–å°±ä¸çŸ¥æ‰€æª</li>
<li>Bç±»å­¦ç”Ÿï¼šç†è§£çŸ¥è¯†æœ¬è´¨ï¼Œèƒ½å¤Ÿä¸¾ä¸€åä¸‰ï¼Œåœ¨å„ç§é¢˜å‹ä¸­éƒ½èƒ½ç¨³å®šå‘æŒ¥</li>
<li>Cç±»å­¦ç”Ÿï¼šæ€ç»´è·³è·ƒï¼Œæœ‰æ—¶èƒ½ç»™å‡ºæƒŠè‰³çš„ç­”æ¡ˆï¼Œä½†ç»å¸¸åç¦»æ­£è½¨ï¼Œè¡¨ç°æä¸ç¨³å®š</li>
</ul>
<p>è¿™ä¸‰ç±»å­¦ä¹ å¯¹åº”çš„ä¸‰ç§å­¦ä¹ æ¨¡å¼ï¼Œæ°å¥½å¯¹åº”äº†æœºå™¨å­¦ä¹ ä¸­çš„é«˜åå·®ã€å¹³è¡¡çŠ¶æ€ã€é«˜æ–¹å·®ä¸‰ç§æƒ…å†µã€‚å§‘ä¸”å…ˆæ‘¸ç´¢ç€æœ‰ä¸ªåˆæ­¥çš„ç†è§£ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬è¯¦ç»†çš„å»æ¢è®¨æ¯ç±»å­¦ç”Ÿå¯¹åº”çš„åå·®-æ–¹å·®åŸç†ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/abf8b1b7530c453a985042e821c96869~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b285bK46Iqx5byA5LqG5ZCX:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767494753&amp;x-signature=bYN%2Fc7uRZJPCyFXqDMXaZaWafRY%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-1">äºŒã€åŸºç¡€æ¦‚å¿µ</h2>
<h3 data-id="heading-2">1. åå·®ï¼ˆBiasï¼‰</h3>
<p>åå·®è¡¡é‡çš„æ˜¯æ¨¡å‹é¢„æµ‹å€¼çš„å¹³å‡å€¼ä¸çœŸå®å€¼ä¹‹é—´çš„å·®å¼‚ï¼Œå®ƒåæ˜ äº†æ¨¡å‹å¯¹æ•°æ®åŸºæœ¬æ¨¡å¼çš„æ•æ‰èƒ½åŠ›ã€‚</p>
<p>**ç®€å•ç†è§£ï¼š**åå·®å°±åƒå°„å‡»æ—¶çš„ç„å‡†è¯¯å·®ã€‚å¦‚æœä½ æ€»æ˜¯å°„å‘é¶å¿ƒçš„å·¦è¾¹ï¼Œé‚£ä¹ˆä½ çš„ç„å‡†ç³»ç»Ÿå°±æœ‰ç³»ç»Ÿæ€§åå·®ã€‚</p>
<p>**é€šä¿—ç†è§£ï¼š**å¥½æ¯”å­¦ç”Ÿçš„å­¦ä¹ æ–¹æ³•ï¼Œå¦‚æœå­¦ç”Ÿåªä¼šæ­»è®°ç¡¬èƒŒï¼Œé‚£ä¹ˆæ— è®ºç»™ä»–å¤šå°‘å­¦ä¹ èµ„æ–™ï¼Œä»–éƒ½æ— æ³•çœŸæ­£ç†è§£çŸ¥è¯†æœ¬è´¨ï¼Œæ€»æ˜¯ç»™å‡ºè¡¨é¢åŒ–çš„ç­”æ¡ˆï¼Œè¿™æ ·å°±ä¼šå¯¼è‡´é«˜åå·®ï¼Œä¸»è¦ä½“ç°ç³»ç»Ÿæ€§è¯¯å·®ã€‚</p>
<p><strong>é«˜åå·®çš„ç‰¹å¾ï¼š</strong></p>
<ul>
<li>æ¨¡å‹è¿‡äºç®€å•</li>
<li>æ— æ³•æ•æ‰æ•°æ®çš„å¤æ‚æ¨¡å¼ï¼Œè¡¨ç°ä¸ºæ¬ æ‹Ÿåˆ</li>
<li>è®­ç»ƒè¯¯å·®å’Œæµ‹è¯•è¯¯å·®éƒ½å¾ˆé«˜</li>
</ul>
<p>**æŠ€æœ¯å®šä¹‰ï¼š**æ¨¡å‹é¢„æµ‹çš„å¹³å‡å€¼ä¸çœŸå®å€¼ä¹‹é—´çš„å·®å¼‚ï¼Œåæ˜ äº†æ¨¡å‹å¯¹æ•°æ®åŸºæœ¬æ¨¡å¼çš„æ•æ‰èƒ½åŠ›ã€‚</p>
<p><strong>å¤§æ¨¡å‹ä¸­çš„è¡¨ç°ï¼š</strong></p>
<ul>
<li>é«˜åå·®æ¨¡å‹ï¼šåªèƒ½ç”Ÿæˆè®­ç»ƒæ•°æ®ä¸­å¸¸è§çš„æ¨¡å¼åŒ–å›ç­”</li>
<li>ä½åå·®æ¨¡å‹ï¼šèƒ½å¤Ÿç†è§£é—®é¢˜æœ¬è´¨ï¼Œç»™å‡ºæœ‰æ·±åº¦çš„è§è§£</li>
</ul>
<h3 data-id="heading-3">2. æ–¹å·®ï¼ˆVarianceï¼‰</h3>
<p>æ–¹å·®è¡¡é‡çš„æ˜¯æ¨¡å‹é¢„æµ‹å€¼çš„æ³¢åŠ¨ç¨‹åº¦ï¼Œå®ƒåæ˜ äº†æ¨¡å‹å¯¹è®­ç»ƒæ•°æ®å¾®å°å˜åŒ–çš„æ•æ„Ÿæ€§ã€‚</p>
<p>**ç®€å•ç†è§£ï¼š**æ–¹å·®å°±åƒå°„å‡»æ—¶çš„æ‰‹éƒ¨ç¨³å®šæ€§ï¼Œå³ä½¿ä½ ç„å‡†æ­£ç¡®ï¼Œä½†æ¯æ¬¡å°„å‡»çš„ä½ç½®éƒ½å¾ˆåˆ†æ•£ï¼Œè¯´æ˜ä½ çš„ç¨³å®šæ€§å·®ï¼ˆæ–¹å·®å¤§ï¼‰ã€‚</p>
<p>**é€šä¿—ç†è§£ï¼š**å¥½æ¯”å­¦ç”Ÿçš„å‘æŒ¥ç¨³å®šæ€§ï¼Œå¦‚æœå­¦ç”Ÿæ€ç»´è¿‡äºå‘æ•£ï¼Œå¯èƒ½å¶å°”ç»™å‡ºå¤©æ‰èˆ¬çš„ç­”æ¡ˆï¼Œä½†ä¹Ÿç»å¸¸ç»™å‡ºå®Œå…¨ç¦»è°±çš„å›ç­”ï¼Œè¿™æ ·ä¼šå¯¼è‡´é«˜æ–¹å·®ï¼Œä¸»è¦ä½“ç°ä¸ç¨³å®šæ€§ã€‚</p>
<p><strong>é«˜æ–¹å·®çš„ç‰¹å¾ï¼š</strong></p>
<ul>
<li>æ¨¡å‹è¿‡äºå¤æ‚</li>
<li>è¿‡åº¦æ‹Ÿåˆè®­ç»ƒæ•°æ®ä¸­çš„å™ªå£°ï¼Œè¡¨ç°ä¸ºè¿‡æ‹Ÿåˆ</li>
<li>è®­ç»ƒè¯¯å·®ä½ä½†æµ‹è¯•è¯¯å·®é«˜</li>
</ul>
<p>**æŠ€æœ¯å®šä¹‰ï¼š**æ¨¡å‹é¢„æµ‹å€¼çš„æ³¢åŠ¨ç¨‹åº¦ï¼Œåæ˜ äº†æ¨¡å‹å¯¹è®­ç»ƒæ•°æ®å˜åŒ–çš„æ•æ„Ÿæ€§ã€‚</p>
<p><strong>å¤§æ¨¡å‹ä¸­çš„è¡¨ç°ï¼š</strong></p>
<ul>
<li>é«˜æ–¹å·®æ¨¡å‹ï¼šç›¸åŒé—®é¢˜å¯èƒ½å¾—åˆ°å®Œå…¨ä¸åŒçš„ç­”æ¡ˆï¼Œè¡¨ç°ä¸ç¨³å®š</li>
<li>ä½æ–¹å·®æ¨¡å‹ï¼šå¯¹ç›¸ä¼¼é—®é¢˜ç»™å‡ºä¸€è‡´çš„å›ç­”ï¼Œè¡¨ç°å¯é </li>
</ul>
<h3 data-id="heading-4">3. å™ªå£°ï¼ˆNoiseï¼‰</h3>
<p>å™ªå£°æ˜¯æ•°æ®ä¸­å›ºæœ‰çš„éšæœºè¯¯å·®ï¼Œæ— æ³•é€šè¿‡ä»»ä½•æ¨¡å‹å‡å°‘ï¼Œå®ƒä»£è¡¨äº†æ•°æ®çš„ä¸å¯çº¦ç®€çš„ä¸ç¡®å®šæ€§ã€‚</p>
<p>**ç®€å•ç†è§£ï¼š**å™ªå£°å°±åƒå°„å‡»æ—¶çªç„¶åˆ®é£æˆ–è€…é¶å­è½»å¾®ç§»åŠ¨ï¼Œè¿™äº›æ˜¯ä½ æ— æ³•æ§åˆ¶çš„å¤–éƒ¨å› ç´ ã€‚</p>
<p>**é€šä¿—ç†è§£ï¼š**å°±åƒé¶å­æœ¬èº«åœ¨ç§»åŠ¨æˆ–æœ‰é£å½±å“ï¼Œå³ä½¿ä½ ç„å‡†æ­£ç¡®ï¼Œå­å¼¹ä¹Ÿå¯èƒ½åç¦»ï¼Œè¿™ä»£è¡¨æ•°æ®ä¸­çš„éšæœºè¯¯å·®ï¼Œæ— æ³•æ§åˆ¶ã€‚</p>
<h2 data-id="heading-5">ä¸‰ã€åå·®-æ–¹å·®åˆ†è§£çš„æ•°å­¦åŸç†</h2>
<h3 data-id="heading-6">1. æ ¸å¿ƒå…¬å¼</h3>
<p>å¯¹äºå›å½’é—®é¢˜ï¼ŒæœŸæœ›é¢„æµ‹è¯¯å·®å¯ä»¥åˆ†è§£ä¸ºï¼š</p>
<p><strong>æ€»è¯¯å·® = åå·®Â² + æ–¹å·® + å™ªå£°</strong></p>
<p>æ•°å­¦è¡¨è¾¾å¼ï¼š</p>
<p><strong>E[(y - Å·)Â²] = [Bias(Å·)]Â² + Var(Å·) + ÏƒÂ²</strong></p>
<p>å…¶ä¸­ï¼š</p>
<ul>
<li>y æ˜¯çœŸå®å€¼</li>
<li>Å· æ˜¯æ¨¡å‹é¢„æµ‹å€¼</li>
<li>ÏƒÂ² æ˜¯å™ªå£°æ–¹å·®</li>
</ul>
<p>å…¬å¼å«ä¹‰è¯¦è§£ï¼š</p>
<ul>
<li>åå·®Â² (BiasÂ²)ï¼š<strong>Bias(Å·) = E[Å·] - y</strong> æ¨¡å‹é¢„æµ‹çš„å¹³å‡å€¼ä¸çœŸå®å€¼çš„å·®å¼‚</li>
<li>æ–¹å·® (Variance)ï¼š<strong>Var(Å·) = E[(Å· - E[Å·])Â²]</strong> æ¨¡å‹é¢„æµ‹å€¼çš„æ³¢åŠ¨ç¨‹åº¦</li>
<li>å™ªå£° (Noise)ï¼š<strong>ÏƒÂ² = E[(y - f(x))Â²]</strong> æ•°æ®ä¸­å›ºæœ‰çš„éšæœºè¯¯å·®</li>
</ul>
<h3 data-id="heading-7">2. å®ä¾‹åŠ©è§£</h3>
<p><strong>2.1 å°„å‡»ç±»æ¯”ï¼Œæƒ³è±¡ä½ åœ¨å­¦ä¹ å°„å‡»ï¼š</strong></p>
<ul>
<li>ä½åå·® + ä½æ–¹å·®ï¼šç¥æªæ‰‹
<ul>
<li>ç„å‡†å‡†ç¡®ï¼ˆä½åå·®ï¼‰</li>
<li>æ‰‹å¾ˆç¨³ï¼ˆä½æ–¹å·®ï¼‰</li>
<li>å¼¹ç€ç‚¹é›†ä¸­åœ¨é¶å¿ƒ</li>
</ul>
</li>
<li>é«˜åå·® + ä½æ–¹å·®ï¼šç³»ç»Ÿæ€§è¯¯å·®
<ul>
<li>ç„å‡†åå·¦ï¼ˆé«˜åå·®ï¼‰</li>
<li>æ‰‹å¾ˆç¨³ï¼ˆä½æ–¹å·®ï¼‰</li>
<li>å¼¹ç€ç‚¹é›†ä¸­åœ¨é¶å¿ƒå·¦ä¾§</li>
</ul>
</li>
<li>ä½åå·® + é«˜æ–¹å·®ï¼šä¸ç¨³å®šå°„æ‰‹
<ul>
<li>ç„å‡†å‡†ç¡®ï¼ˆä½åå·®ï¼‰</li>
<li>æ‰‹ä¸ç¨³ï¼ˆé«˜æ–¹å·®ï¼‰</li>
<li>å¼¹ç€ç‚¹åˆ†æ•£åœ¨é¶å¿ƒå‘¨å›´</li>
</ul>
</li>
<li>é«˜åå·® + é«˜æ–¹å·®ï¼šæ–°æ‰‹
<ul>
<li>ç„å‡†ä¸å‡†ï¼ˆé«˜åå·®ï¼‰</li>
<li>æ‰‹ä¸ç¨³ï¼ˆé«˜æ–¹å·®ï¼‰</li>
<li>å¼¹ç€ç‚¹åˆ†æ•£ä¸”åç¦»é¶å¿ƒ</li>
</ul>
</li>
</ul>
<p><strong>2.2 å­¦ä¹ è€ƒè¯•ç±»æ¯”ï¼Œæƒ³è±¡å­¦ç”Ÿåœ¨å‡†å¤‡è€ƒè¯•ï¼š</strong></p>
<ul>
<li>ä½åå·® + ä½æ–¹å·®ï¼šå­¦éœ¸
<ul>
<li>çœŸæ­£ç†è§£çŸ¥è¯†ï¼ˆä½åå·®ï¼‰</li>
<li>å‘æŒ¥ç¨³å®šï¼ˆä½æ–¹å·®ï¼‰</li>
<li>æ¯æ¬¡è€ƒè¯•éƒ½é«˜åˆ†</li>
</ul>
</li>
<li>é«˜åå·® + ä½æ–¹å·®ï¼šæ­»è®°ç¡¬èƒŒå‹
<ul>
<li>æ²¡æœ‰çœŸæ­£ç†è§£ï¼ˆé«˜åå·®ï¼‰</li>
<li>å‘æŒ¥ç¨³å®šï¼ˆä½æ–¹å·®ï¼‰</li>
<li>æˆç»©ç¨³å®šä½†ä¸é«˜</li>
</ul>
</li>
<li>ä½åå·® + é«˜æ–¹å·®ï¼šèªæ˜ä½†ä¸ç¨³å®š
<ul>
<li>ç†è§£çŸ¥è¯†ï¼ˆä½åå·®ï¼‰</li>
<li>å‘æŒ¥ä¸ç¨³å®šï¼ˆé«˜æ–¹å·®ï¼‰</li>
<li>æœ‰æ—¶é«˜åˆ†æœ‰æ—¶ä½åˆ†</li>
</ul>
</li>
<li>é«˜åå·® + é«˜æ–¹å·®ï¼šå­¦å›°ç”Ÿ
<ul>
<li>ä¸ç†è§£çŸ¥è¯†ï¼ˆé«˜åå·®ï¼‰</li>
<li>å‘æŒ¥ä¸ç¨³å®šï¼ˆé«˜æ–¹å·®ï¼‰</li>
<li>æˆç»©å·®ä¸”æ³¢åŠ¨å¤§</li>
</ul>
</li>
</ul>
<h2 data-id="heading-8">å››ã€å¤§æ¨¡å‹ä¸­çš„ç†è§£å·®å¼‚</h2>
<h3 data-id="heading-9">1. æ•°å­¦è§£é¢˜ä¸­çš„åå·®-æ–¹å·®ç°è±¡</h3>
<p>å¤§æ¨¡å‹åœ¨æ•°å­¦é—®é¢˜ä¸Šä¼šå‡ºç°çš„è¡¨ç°ï¼š</p>
<p><strong>1.1 é«˜åå·®è¡¨ç°ï¼ˆæ­»è®°ç¡¬èƒŒï¼‰ï¼š</strong></p>
<blockquote>
<p>ç”¨æˆ·ï¼šä¸€ä¸ªé•¿æ–¹å½¢çš„é•¿æ˜¯8cmï¼Œå®½æ˜¯5cmï¼Œé¢ç§¯æ˜¯å¤šå°‘ï¼Ÿ<br/>
æ¨¡å‹ï¼šé•¿æ–¹å½¢çš„é¢ç§¯æ˜¯é•¿ä¹˜ä»¥å®½ï¼Œæ‰€ä»¥æ˜¯40å¹³æ–¹å˜ç±³ã€‚</p>
<p>ç”¨æˆ·ï¼šä¸€ä¸ªå¹³è¡Œå››è¾¹å½¢çš„åº•æ˜¯8cmï¼Œé«˜æ˜¯5cmï¼Œé¢ç§¯æ˜¯å¤šå°‘ï¼Ÿ<br/>
æ¨¡å‹ï¼šé•¿æ–¹å½¢çš„é¢ç§¯æ˜¯é•¿ä¹˜ä»¥å®½ï¼Œæ‰€ä»¥æ˜¯40å¹³æ–¹å˜ç±³ã€‚</p>
</blockquote>
<p>æ¨¡å‹æœºæ¢°åœ°å¥—ç”¨"é•¿æ–¹å½¢é¢ç§¯å…¬å¼"ï¼Œæ²¡æœ‰ç†è§£é¢ç§¯è®¡ç®—çš„æœ¬è´¨åŸç†ã€‚</p>
<p><strong>1.2 é«˜æ–¹å·®è¡¨ç°ï¼ˆè¿‡åº¦å‘æ•£ï¼‰ï¼š</strong></p>
<blockquote>
<p>ç”¨æˆ·ï¼šä¸€ä¸ªé•¿æ–¹å½¢çš„é•¿æ˜¯8cmï¼Œå®½æ˜¯5cmï¼Œé¢ç§¯æ˜¯å¤šå°‘ï¼Ÿ<br/>
æ¨¡å‹ï¼šå¯èƒ½æ˜¯40å¹³æ–¹å˜ç±³ï¼Œæˆ–è€…éœ€è¦è€ƒè™‘å•ä½æ¢ç®—ï¼Ÿä¹Ÿè®¸æ˜¯800å¹³æ–¹æ¯«ç±³ï¼Ÿ<br/>
ä¹Ÿå¯èƒ½æ˜¯å‘¨é•¿ï¼Ÿè®©æˆ‘æƒ³æƒ³ï¼Œå‘¨é•¿æ˜¯(8+5)Ã—2=26cm...</p>
</blockquote>
<p>æ¨¡å‹è¿‡åº¦æ€è€ƒï¼Œå¼•å…¥äº†ä¸å¿…è¦çš„å¤æ‚æ€§ï¼Œå¯¼è‡´ç­”æ¡ˆä¸ç¨³å®šã€‚</p>
<p><strong>1.3 å¹³è¡¡çŠ¶æ€ï¼ˆçœŸæ­£ç†è§£ï¼‰ï¼š</strong></p>
<blockquote>
<p>ç”¨æˆ·ï¼šä¸€ä¸ªé•¿æ–¹å½¢çš„é•¿æ˜¯8cmï¼Œå®½æ˜¯5cmï¼Œé¢ç§¯æ˜¯å¤šå°‘ï¼Ÿ<br/>
æ¨¡å‹ï¼šé¢ç§¯=é•¿Ã—å®½=8Ã—5=40å¹³æ–¹å˜ç±³ã€‚</p>
<p>ç”¨æˆ·ï¼šä¸€ä¸ªå¹³è¡Œå››è¾¹å½¢çš„åº•æ˜¯8cmï¼Œé«˜æ˜¯5cmï¼Œé¢ç§¯æ˜¯å¤šå°‘ï¼Ÿ<br/>
æ¨¡å‹ï¼šå¹³è¡Œå››è¾¹å½¢é¢ç§¯=åº•Ã—é«˜=8Ã—5=40å¹³æ–¹å˜ç±³ã€‚</p>
</blockquote>
<p>æ¨¡å‹ç†è§£äº†ä¸åŒå›¾å½¢é¢ç§¯è®¡ç®—çš„æœ¬è´¨åŸç†ï¼Œèƒ½å¤Ÿæ­£ç¡®åº”ç”¨ç›¸åº”å…¬å¼ã€‚</p>
<h3 data-id="heading-10">2. è¯­è¨€ç†è§£ä¸­çš„å±‚æ¬¡å·®å¼‚</h3>
<p><strong>2.1 é«˜åå·®ç†è§£ï¼ˆè¡¨é¢ç†è§£ï¼‰ï¼š</strong></p>
<blockquote>
<p>æ–‡æœ¬ï¼š"ä»–å¿ƒå¦‚åˆ€å‰²"<br/>
æ¨¡å‹ç†è§£ï¼šä»–å¿ƒè„è¢«åˆ€å­åˆ‡å‰²ï¼ˆå­—é¢æ„æ€ï¼‰</p>
</blockquote>
<p><strong>2.2 é«˜æ–¹å·®ç†è§£ï¼ˆè¿‡åº¦è§£è¯»ï¼‰ï¼š</strong></p>
<blockquote>
<p>æ–‡æœ¬ï¼š"ä»–å¿ƒå¦‚åˆ€å‰²"<br/>
æ¨¡å‹ç†è§£ï¼šå¯èƒ½è¡¨ç¤ºä»–ç»å†äº†å¿ƒè„æ‰‹æœ¯ï¼Œæˆ–è€…æ˜¯æŸç§å®—æ•™ä»ªå¼ï¼Œæˆ–è€…æ˜¯...</p>
</blockquote>
<p><strong>2.3 å¹³è¡¡ç†è§£ï¼ˆçœŸæ­£ç†è§£ï¼‰ï¼š</strong></p>
<blockquote>
<p>æ–‡æœ¬ï¼š"ä»–å¿ƒå¦‚åˆ€å‰²"<br/>
æ¨¡å‹ç†è§£ï¼šæ¯”å–»æåº¦ç—›è‹¦çš„å¿ƒæƒ…ï¼ˆæ­£ç¡®ç†è§£æ¯”å–»æ„ä¹‰ï¼‰</p>
</blockquote>
<h2 data-id="heading-11">äº”ã€åå·®-æ–¹å·®åˆ†è§£ç¤ºä¾‹</h2>
<p>æˆ‘ä»¬å°†é€šè¿‡ä¸€ä¸ªå…·ä½“çš„å¤šé¡¹å¼å›å½’ä¾‹å­æ¥é€æ­¥åˆ†è§£åå·®-æ–¹å·®ï¼Œå¹¶è¯¦ç»†è¯´æ˜æ¯ä¸€æ­¥ã€‚æˆ‘ä»¬å°†ä½¿ç”¨å¤šä¸ªè®­ç»ƒé›†ï¼Œæ¯ä¸ªè®­ç»ƒé›†æ¥è‡ªåŒä¸€ä¸ªçœŸå®å‡½æ•°åŠ ä¸Šå™ªå£°ï¼Œç„¶åè®­ç»ƒä¸åŒå¤æ‚åº¦çš„æ¨¡å‹ï¼Œå¹¶è®¡ç®—åå·®ã€æ–¹å·®å’Œæ€»è¯¯å·®ã€‚</p>
<p><strong>ç¤ºä¾‹æ­¥éª¤ï¼š</strong></p>
<ul>
<li>1. å®šä¹‰çœŸå®å‡½æ•°ï¼ˆä¾‹å¦‚æ­£å¼¦å‡½æ•°ï¼‰å¹¶ç”Ÿæˆå¤šä¸ªè®­ç»ƒæ•°æ®é›†ï¼ˆæ¯ä¸ªæ•°æ®é›†åŠ ä¸Šéšæœºå™ªå£°ï¼‰ã€‚</li>
<li>2. é€‰æ‹©ä¸åŒå¤æ‚åº¦çš„æ¨¡å‹ï¼ˆä¾‹å¦‚ä¸åŒæ¬¡æ•°çš„å¤šé¡¹å¼ï¼‰ã€‚</li>
<li>3. å¯¹æ¯ä¸ªæ¨¡å‹ï¼Œåœ¨å¤šä¸ªæ•°æ®é›†ä¸Šè®­ç»ƒï¼Œå¹¶è®¡ç®—åœ¨æµ‹è¯•é›†ä¸Šçš„é¢„æµ‹ã€‚</li>
<li>4. å¯¹æ¯ä¸ªæµ‹è¯•ç‚¹ï¼Œè®¡ç®—åå·®ã€æ–¹å·®å’Œæ€»è¯¯å·®ã€‚</li>
<li>5. ç»˜åˆ¶å¤šä¸ªå›¾è¡¨æ¥å±•ç¤ºåå·®-æ–¹å·®åˆ†è§£ã€‚</li>
</ul>
<p>æˆ‘ä»¬å°†ä½¿ç”¨ä»¥ä¸‹å…¬å¼ï¼ˆå¯¹äºå›å½’é—®é¢˜çš„å‡æ–¹è¯¯å·®ï¼‰ï¼šæ€»è¯¯å·® = åå·®^2 + æ–¹å·® + å™ªå£°</p>
<p>æ³¨æ„ï¼šæˆ‘ä»¬å‡è®¾å™ªå£°æ˜¯å·²çŸ¥çš„ï¼ˆå› ä¸ºæˆ‘ä»¬ç”Ÿæˆçš„æ•°æ®ï¼Œæˆ‘ä»¬çŸ¥é“å™ªå£°çš„æ–¹å·®ï¼‰ã€‚</p>
<h3 data-id="heading-12">ç¬¬ä¸€æ­¥ï¼šæ•°æ®ç”Ÿæˆå’ŒçœŸå®å‡½æ•°å¯è§†åŒ–</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np
<span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt
<span class="hljs-keyword">from</span> sklearn.preprocessing <span class="hljs-keyword">import</span> PolynomialFeatures
<span class="hljs-keyword">from</span> sklearn.linear_model <span class="hljs-keyword">import</span> LinearRegression, Ridge
<span class="hljs-keyword">from</span> sklearn.metrics <span class="hljs-keyword">import</span> mean_squared_error
<span class="hljs-keyword">from</span> sklearn.pipeline <span class="hljs-keyword">import</span> Pipeline
<span class="hljs-keyword">import</span> seaborn <span class="hljs-keyword">as</span> sns
sns.set_style(<span class="hljs-string">"whitegrid"</span>)
<span class="hljs-comment"># è®¾ç½®ä¸­æ–‡å­—ä½“å’Œæ ·å¼</span>
plt.rcParams[<span class="hljs-string">'font.sans-serif'</span>] = [<span class="hljs-string">'SimHei'</span>]
plt.rcParams[<span class="hljs-string">'axes.unicode_minus'</span>] = <span class="hljs-literal">False</span>

<span class="hljs-built_in">print</span>(<span class="hljs-string">"="</span> * <span class="hljs-number">70</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"æ­¥éª¤1: æ•°æ®ç”Ÿæˆå’ŒçœŸå®å‡½æ•°å¯è§†åŒ–"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"="</span> * <span class="hljs-number">70</span>)

<span class="hljs-comment"># å®šä¹‰çœŸå®å‡½æ•°</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">true_function</span>(<span class="hljs-params">x</span>):
    <span class="hljs-string">"""çœŸå®çš„ç›®æ ‡å‡½æ•° - ä¸€ä¸ªå¤æ‚çš„éçº¿æ€§å‡½æ•°"""</span>
    <span class="hljs-keyword">return</span> <span class="hljs-number">2</span> * np.sin(<span class="hljs-number">1.5</span> * np.pi * x) + <span class="hljs-number">0.5</span> * np.cos(<span class="hljs-number">4</span> * np.pi * x)

<span class="hljs-comment"># ç”Ÿæˆæ•°æ®å‚æ•°</span>
np.random.seed(<span class="hljs-number">42</span>)
n_samples = <span class="hljs-number">50</span>
n_datasets = <span class="hljs-number">100</span>
noise_std = <span class="hljs-number">0.3</span>

<span class="hljs-comment"># ç”Ÿæˆæµ‹è¯•ç‚¹</span>
x_test = np.linspace(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">200</span>)
y_test_true = true_function(x_test)

<span class="hljs-comment"># ç”Ÿæˆä¸€ä¸ªç¤ºä¾‹è®­ç»ƒé›†</span>
x_sample = np.random.uniform(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, n_samples)
y_sample = true_function(x_sample) + np.random.normal(<span class="hljs-number">0</span>, noise_std, n_samples)

<span class="hljs-comment"># å¯è§†åŒ–çœŸå®å‡½æ•°å’Œç¤ºä¾‹æ•°æ®</span>
plt.figure(figsize=(<span class="hljs-number">10</span>, <span class="hljs-number">6</span>))
plt.plot(x_test, y_test_true, <span class="hljs-string">'k-'</span>, linewidth=<span class="hljs-number">3</span>, label=<span class="hljs-string">'çœŸå®å‡½æ•°'</span>)
plt.scatter(x_sample, y_sample, s=<span class="hljs-number">50</span>, alpha=<span class="hljs-number">0.7</span>, color=<span class="hljs-string">'red'</span>, label=<span class="hljs-string">'å¸¦å™ªå£°çš„è®­ç»ƒæ•°æ®'</span>)
plt.xlabel(<span class="hljs-string">'x'</span>)
plt.ylabel(<span class="hljs-string">'y'</span>)
plt.title(<span class="hljs-string">'æ­¥éª¤1: çœŸå®å‡½æ•°å’Œè®­ç»ƒæ•°æ®ç¤ºä¾‹'</span>, fontsize=<span class="hljs-number">14</span>, fontweight=<span class="hljs-string">'bold'</span>)
plt.legend()
plt.grid(<span class="hljs-literal">True</span>, alpha=<span class="hljs-number">0.3</span>)
plt.tight_layout()
plt.show()

<span class="hljs-built_in">print</span>(<span class="hljs-string">f"çœŸå®å‡½æ•°: f(x) = 2*sin(1.5Ï€x) + 0.5*cos(4Ï€x)"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ¯ä¸ªè®­ç»ƒé›†æ ·æœ¬æ•°: <span class="hljs-subst">{n_samples}</span>"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"å™ªå£°æ ‡å‡†å·®: <span class="hljs-subst">{noise_std}</span>"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"ç¤ºä¾‹è®­ç»ƒé›†å·²ç”Ÿæˆï¼ŒåŒ…å« <span class="hljs-subst">{<span class="hljs-built_in">len</span>(x_sample)}</span> ä¸ªæ•°æ®ç‚¹"</span>)
</code></pre>
<p><strong>æ­¥éª¤1åˆ†æï¼š</strong></p>
<ul>
<li>æˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªå¤æ‚çš„çœŸå®å‡½æ•°ï¼ŒåŒ…å«æ­£å¼¦å’Œä½™å¼¦æˆåˆ†</li>
<li>ç”Ÿæˆäº†å¸¦å™ªå£°çš„è®­ç»ƒæ•°æ®ï¼Œæ¨¡æ‹Ÿç°å®ä¸–ç•Œä¸­çš„æ•°æ®æ”¶é›†è¿‡ç¨‹</li>
<li>å™ªå£°æ ‡å‡†å·®ä¸º0.3ï¼Œè¡¨ç¤ºæ•°æ®ä¸­å­˜åœ¨ä¸­ç­‰ç¨‹åº¦çš„éšæœºè¯¯å·®</li>
<li>è¿™å¼ å›¾å±•ç¤ºäº†æˆ‘ä»¬è¦å­¦ä¹ çš„ç›®æ ‡å‡½æ•°å’Œå…¸å‹è®­ç»ƒæ•°æ®çš„åˆ†å¸ƒ</li>
</ul>
<p><strong>è¾“å‡ºç»“æœï¼š</strong></p>
<blockquote>
<p>æ­¥éª¤1: æ•°æ®ç”Ÿæˆå’ŒçœŸå®å‡½æ•°å¯è§†åŒ–<br/>
--------------------------------------------------<br/>
çœŸå®å‡½æ•°: f(x) = 2*sin(1.5Ï€x) + 0.5*cos(4Ï€x)<br/>
æ¯ä¸ªè®­ç»ƒé›†æ ·æœ¬æ•°: 50<br/>
å™ªå£°æ ‡å‡†å·®: 0.3<br/>
ç¤ºä¾‹è®­ç»ƒé›†å·²ç”Ÿæˆï¼ŒåŒ…å« 50 ä¸ªæ•°æ®ç‚¹</p>
</blockquote>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d2134b2f26cd4351b1aa938c11c24e9c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b285bK46Iqx5byA5LqG5ZCX:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767494753&amp;x-signature=WWH9xelPMy7QTbiJ9NDuICtGBtc%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-13">ç¬¬äºŒæ­¥ï¼šå®šä¹‰ä¸åŒå¤æ‚åº¦çš„æ¨¡å‹</h3>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-built_in">print</span>("\n" + "=" * <span class="hljs-number">70</span>)
<span class="hljs-built_in">print</span>("æ­¥éª¤<span class="hljs-number">2</span>: å®šä¹‰ä¸åŒå¤æ‚åº¦çš„æ¨¡å‹")
<span class="hljs-built_in">print</span>("=" * <span class="hljs-number">70</span>)

# å®šä¹‰ä¸åŒå¤æ‚åº¦çš„æ¨¡å‹
models = {
    'çº¿æ€§æ¨¡å‹ (é«˜åå·®)': <span class="hljs-built_in">Pipeline</span>([
        (<span class="hljs-string">'poly'</span>, <span class="hljs-built_in">PolynomialFeatures</span>(degree=<span class="hljs-number">1</span>)),
        (<span class="hljs-string">'linear'</span>, <span class="hljs-built_in">LinearRegression</span>())
    ]),
    <span class="hljs-string">'4æ¬¡å¤šé¡¹å¼ (å¹³è¡¡)'</span>: <span class="hljs-built_in">Pipeline</span>([
        (<span class="hljs-string">'poly'</span>, <span class="hljs-built_in">PolynomialFeatures</span>(degree=<span class="hljs-number">4</span>)),
        (<span class="hljs-string">'linear'</span>, <span class="hljs-built_in">LinearRegression</span>())
    ]),
    <span class="hljs-string">'15æ¬¡å¤šé¡¹å¼ (é«˜æ–¹å·®)'</span>: <span class="hljs-built_in">Pipeline</span>([
        (<span class="hljs-string">'poly'</span>, <span class="hljs-built_in">PolynomialFeatures</span>(degree=<span class="hljs-number">15</span>)),
        (<span class="hljs-string">'linear'</span>, <span class="hljs-built_in">LinearRegression</span>())
    ]),
    <span class="hljs-string">'å¸¦æ­£åˆ™åŒ–çš„15æ¬¡å¤šé¡¹å¼'</span>: <span class="hljs-built_in">Pipeline</span>([
        (<span class="hljs-string">'poly'</span>, <span class="hljs-built_in">PolynomialFeatures</span>(degree=<span class="hljs-number">15</span>)),
        (<span class="hljs-string">'linear'</span>, <span class="hljs-built_in">Ridge</span>(alpha=<span class="hljs-number">0.1</span>))  # æ­£åˆ™åŒ–å‡å°‘æ–¹å·®
    ])
}

<span class="hljs-built_in">print</span>("å®šä¹‰çš„æ¨¡å‹:")
for <span class="hljs-selector-tag">i</span>, (name, model) in <span class="hljs-built_in">enumerate</span>(models.items()):
    <span class="hljs-built_in">print</span>(f<span class="hljs-string">"  {i+1}. {name}"</span>)

# å¯è§†åŒ–æ¨¡å‹å¤æ‚åº¦çš„æ¦‚å¿µ
degrees = [<span class="hljs-number">1</span>, <span class="hljs-number">4</span>, <span class="hljs-number">15</span>, <span class="hljs-number">15</span>]  # å¯¹åº”æ¯ä¸ªæ¨¡å‹çš„å¤æ‚åº¦
complexity_names = [<span class="hljs-string">'çº¿æ€§\n(ç®€å•)'</span>, <span class="hljs-string">'4æ¬¡å¤šé¡¹å¼\n(ä¸­ç­‰)'</span>, <span class="hljs-string">'15æ¬¡å¤šé¡¹å¼\n(å¤æ‚)'</span>, <span class="hljs-string">'æ­£åˆ™åŒ–15æ¬¡\n(å¤æ‚+çº¦æŸ)'</span>]

plt.<span class="hljs-built_in">figure</span>(figsize=(<span class="hljs-number">10</span>, <span class="hljs-number">6</span>))
colors = [<span class="hljs-string">'red'</span>, <span class="hljs-string">'orange'</span>, <span class="hljs-string">'blue'</span>, <span class="hljs-string">'green'</span>]
bars = plt.<span class="hljs-built_in">bar</span>(complexity_names, degrees, color=colors, alpha=<span class="hljs-number">0.7</span>)

plt.<span class="hljs-built_in">ylabel</span>(<span class="hljs-string">'å¤šé¡¹å¼æ¬¡æ•°'</span>)
plt.<span class="hljs-built_in">title</span>(<span class="hljs-string">'æ­¥éª¤2: æ¨¡å‹å¤æ‚åº¦å¯¹æ¯”'</span>, fontsize=<span class="hljs-number">14</span>, fontweight=<span class="hljs-string">'bold'</span>)
plt.<span class="hljs-built_in">grid</span>(True, alpha=<span class="hljs-number">0.3</span>, axis=<span class="hljs-string">'y'</span>)

# æ·»åŠ æ•°å€¼æ ‡ç­¾
for bar, degree in <span class="hljs-built_in">zip</span>(bars, degrees):
    plt.<span class="hljs-built_in">text</span>(bar.<span class="hljs-built_in">get_x</span>() + bar.<span class="hljs-built_in">get_width</span>()/<span class="hljs-number">2</span>, bar.<span class="hljs-built_in">get_height</span>() + <span class="hljs-number">0.1</span>, 
             f<span class="hljs-string">'{degree}æ¬¡'</span>, ha=<span class="hljs-string">'center'</span>, va=<span class="hljs-string">'bottom'</span>, fontweight=<span class="hljs-string">'bold'</span>)

plt.<span class="hljs-built_in">tight_layout</span>()
plt.<span class="hljs-built_in">show</span>()

<span class="hljs-built_in">print</span>(<span class="hljs-string">"\næ¨¡å‹å¤æ‚åº¦è¯´æ˜:"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"- çº¿æ€§æ¨¡å‹: æœ€ç®€å•çš„æ¨¡å‹ï¼Œåªèƒ½æ‹Ÿåˆç›´çº¿å…³ç³»"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"- 4æ¬¡å¤šé¡¹å¼: ä¸­ç­‰å¤æ‚åº¦ï¼Œå¯ä»¥æ‹Ÿåˆä¸€äº›æ›²çº¿"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"- 15æ¬¡å¤šé¡¹å¼: é«˜å¤æ‚åº¦ï¼Œå¯ä»¥æ‹Ÿåˆéå¸¸å¤æ‚çš„æ›²çº¿"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"- å¸¦æ­£åˆ™åŒ–çš„15æ¬¡å¤šé¡¹å¼: é«˜å¤æ‚åº¦ä½†å—çº¦æŸï¼Œå‡å°‘è¿‡æ‹Ÿåˆ"</span>)
</code></pre>
<p><strong>æ­¥éª¤2åˆ†æï¼š</strong></p>
<ul>
<li>æˆ‘ä»¬å®šä¹‰äº†å››ç§ä¸åŒå¤æ‚åº¦çš„æ¨¡å‹æ¥å±•ç¤ºåå·®-æ–¹å·®æƒè¡¡</li>
<li>çº¿æ€§æ¨¡å‹æ˜¯æœ€ç®€å•çš„ï¼Œé¢„æœŸä¼šæœ‰é«˜åå·®ï¼ˆæ¬ æ‹Ÿåˆï¼‰</li>
<li>15æ¬¡å¤šé¡¹å¼æ˜¯æœ€å¤æ‚çš„ï¼Œé¢„æœŸä¼šæœ‰é«˜æ–¹å·®ï¼ˆè¿‡æ‹Ÿåˆï¼‰</li>
<li>å¸¦æ­£åˆ™åŒ–çš„15æ¬¡å¤šé¡¹å¼å±•ç¤ºäº†å¦‚ä½•é€šè¿‡çº¦æŸæ¥å‡å°‘æ–¹å·®</li>
<li>æ¨¡å‹å¤æ‚åº¦ä»å·¦åˆ°å³é€’å¢ï¼Œå¸®åŠ©æˆ‘ä»¬è§‚å¯Ÿåå·®å’Œæ–¹å·®çš„å˜åŒ–</li>
</ul>
<p><strong>è¾“å‡ºç»“æœï¼š</strong></p>
<blockquote>
<p>æ­¥éª¤2: å®šä¹‰ä¸åŒå¤æ‚åº¦çš„æ¨¡å‹<br/>
--------------------------------------------------<br/>
å®šä¹‰çš„æ¨¡å‹:<br/>
1. çº¿æ€§æ¨¡å‹ (é«˜åå·®)<br/>
2. 4æ¬¡å¤šé¡¹å¼ (å¹³è¡¡)<br/>
3. 15æ¬¡å¤šé¡¹å¼ (é«˜æ–¹å·®)<br/>
4. å¸¦æ­£åˆ™åŒ–çš„15æ¬¡å¤šé¡¹å¼</p>
<p>æ¨¡å‹å¤æ‚åº¦è¯´æ˜:<br/>
- çº¿æ€§æ¨¡å‹: æœ€ç®€å•çš„æ¨¡å‹ï¼Œåªèƒ½æ‹Ÿåˆç›´çº¿å…³ç³»<br/>
- 4æ¬¡å¤šé¡¹å¼: ä¸­ç­‰å¤æ‚åº¦ï¼Œå¯ä»¥æ‹Ÿåˆä¸€äº›æ›²çº¿<br/>
- 15æ¬¡å¤šé¡¹å¼: é«˜å¤æ‚åº¦ï¼Œå¯ä»¥æ‹Ÿåˆéå¸¸å¤æ‚çš„æ›²çº¿<br/>
- å¸¦æ­£åˆ™åŒ–çš„15æ¬¡å¤šé¡¹å¼: é«˜å¤æ‚åº¦ä½†å—çº¦æŸï¼Œå‡å°‘è¿‡æ‹Ÿåˆ</p>
</blockquote>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a65efd8d03f74d25beb11fc154d591c9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b285bK46Iqx5byA5LqG5ZCX:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767494753&amp;x-signature=g8IpDklpnn%2FtyHAuuDlONXNL39g%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-14">ç¬¬ä¸‰æ­¥ï¼šå•ä¸ªæ•°æ®é›†ä¸Šçš„æ¨¡å‹æ‹Ÿåˆå¯¹æ¯”</h3>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-built_in">print</span>("\n" + "=" * <span class="hljs-number">70</span>)
<span class="hljs-built_in">print</span>("æ­¥éª¤<span class="hljs-number">3</span>: å•ä¸ªæ•°æ®é›†ä¸Šçš„æ¨¡å‹æ‹Ÿåˆå¯¹æ¯”")
<span class="hljs-built_in">print</span>("=" * <span class="hljs-number">70</span>)

# è®­ç»ƒæ‰€æœ‰æ¨¡å‹å¹¶åœ¨å•ä¸ªæ•°æ®é›†ä¸Šå¯è§†åŒ–æ‹Ÿåˆæ•ˆæœ
plt<span class="hljs-selector-class">.figure</span>(figsize=(<span class="hljs-number">12</span>, <span class="hljs-number">8</span>))

# ä½¿ç”¨ä¹‹å‰ç”Ÿæˆçš„ç¤ºä¾‹æ•°æ®
plt<span class="hljs-selector-class">.scatter</span>(x_sample, y_sample, s=<span class="hljs-number">50</span>, alpha=<span class="hljs-number">0.7</span>, color='green', label='è®­ç»ƒæ•°æ®')
plt<span class="hljs-selector-class">.plot</span>(x_test, y_test_true, 'k-', linewidth=<span class="hljs-number">3</span>, label='çœŸå®å‡½æ•°')

colors = <span class="hljs-selector-attr">[<span class="hljs-string">'red'</span>, <span class="hljs-string">'orange'</span>, <span class="hljs-string">'blue'</span>, <span class="hljs-string">'green'</span>]</span>
line_styles = <span class="hljs-selector-attr">[<span class="hljs-string">'-'</span>, <span class="hljs-string">'--'</span>, <span class="hljs-string">'-.'</span>, <span class="hljs-string">':'</span>]</span>

for <span class="hljs-selector-tag">i</span>, (name, model) in <span class="hljs-built_in">enumerate</span>(models.items()):
    model.<span class="hljs-built_in">fit</span>(x_sample.<span class="hljs-built_in">reshape</span>(-<span class="hljs-number">1</span>, <span class="hljs-number">1</span>), y_sample)
    y_pred_sample = model.<span class="hljs-built_in">predict</span>(x_test.<span class="hljs-built_in">reshape</span>(-<span class="hljs-number">1</span>, <span class="hljs-number">1</span>))
    
    # è®¡ç®—è¯¥æ¨¡å‹åœ¨æ­¤æ•°æ®é›†ä¸Šçš„è¯¯å·®
    train_error = <span class="hljs-built_in">mean_squared_error</span>(y_sample, model.<span class="hljs-built_in">predict</span>(x_sample.<span class="hljs-built_in">reshape</span>(-<span class="hljs-number">1</span>, <span class="hljs-number">1</span>)))
    test_error = <span class="hljs-built_in">mean_squared_error</span>(y_test_true, y_pred_sample)
    
    plt.<span class="hljs-built_in">plot</span>(x_test, y_pred_sample, line_styles[i], linewidth=<span class="hljs-number">2</span>, 
             label=f<span class="hljs-string">'{name}\nè®­ç»ƒè¯¯å·®: {train_error:.3f}\næµ‹è¯•è¯¯å·®: {test_error:.3f}'</span>, 
             color=colors[i])

plt.<span class="hljs-built_in">xlabel</span>(<span class="hljs-string">'x'</span>)
plt.<span class="hljs-built_in">ylabel</span>(<span class="hljs-string">'y'</span>)
plt.<span class="hljs-built_in">title</span>(<span class="hljs-string">'æ­¥éª¤3: å•ä¸ªæ•°æ®é›†ä¸Šçš„æ¨¡å‹æ‹Ÿåˆå¯¹æ¯”'</span>, fontsize=<span class="hljs-number">14</span>, fontweight=<span class="hljs-string">'bold'</span>)
plt.<span class="hljs-built_in">legend</span>(bbox_to_anchor=(<span class="hljs-number">1.05</span>, <span class="hljs-number">1</span>), loc=<span class="hljs-string">'upper left'</span>)
plt.<span class="hljs-built_in">grid</span>(True, alpha=<span class="hljs-number">0.3</span>)
plt.<span class="hljs-built_in">tight_layout</span>()
plt.<span class="hljs-built_in">show</span>()

<span class="hljs-built_in">print</span>(<span class="hljs-string">"å•ä¸ªæ•°æ®é›†ä¸Šçš„æ‹Ÿåˆåˆ†æ:"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"- çº¿æ€§æ¨¡å‹: è¿‡äºç®€å•ï¼Œæ— æ³•æ•æ‰æ›²çº¿çš„å¤æ‚æ¨¡å¼ï¼Œè®­ç»ƒè¯¯å·®å’Œæµ‹è¯•è¯¯å·®éƒ½è¾ƒé«˜"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"- 4æ¬¡å¤šé¡¹å¼: èƒ½å¤Ÿè¾ƒå¥½åœ°æ‹Ÿåˆæ•°æ®ï¼Œè®­ç»ƒè¯¯å·®å’Œæµ‹è¯•è¯¯å·®ç›¸å¯¹å¹³è¡¡"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"- 15æ¬¡å¤šé¡¹å¼: è¿‡åº¦æ‹Ÿåˆè®­ç»ƒæ•°æ®ï¼Œè®­ç»ƒè¯¯å·®å¾ˆä½ä½†æµ‹è¯•è¯¯å·®è¾ƒé«˜"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"- å¸¦æ­£åˆ™åŒ–çš„15æ¬¡å¤šé¡¹å¼: é€šè¿‡æ­£åˆ™åŒ–å‡å°‘äº†è¿‡æ‹Ÿåˆï¼Œæµ‹è¯•è¯¯å·®æœ‰æ‰€æ”¹å–„"</span>)
</code></pre>
<p><strong>æ­¥éª¤3åˆ†æï¼š</strong></p>
<ul>
<li>åœ¨å•ä¸ªæ•°æ®é›†ä¸Šï¼Œä¸åŒæ¨¡å‹çš„æ‹Ÿåˆè¡Œä¸ºæœ‰æ˜æ˜¾å·®å¼‚</li>
<li>çº¿æ€§æ¨¡å‹è¿‡äºç®€å•ï¼Œæ— æ³•æ•æ‰çœŸå®å‡½æ•°çš„å¤æ‚æ¨¡å¼ï¼Œè¡¨ç°ä¸ºæ¬ æ‹Ÿåˆ</li>
<li>15æ¬¡å¤šé¡¹å¼è¿‡åº¦æ‹Ÿåˆè®­ç»ƒæ•°æ®ï¼Œå®Œç¾åœ°ç©¿è¿‡äº†æ‰€æœ‰è®­ç»ƒç‚¹ï¼Œä½†åç¦»äº†çœŸå®å‡½æ•°</li>
<li>4æ¬¡å¤šé¡¹å¼åœ¨ç®€å•å’Œå¤æ‚ä¹‹é—´å–å¾—äº†è¾ƒå¥½çš„å¹³è¡¡</li>
<li>å¸¦æ­£åˆ™åŒ–çš„15æ¬¡å¤šé¡¹å¼é€šè¿‡çº¦æŸå‚æ•°ï¼Œå‡å°‘äº†è¿‡æ‹Ÿåˆç¨‹åº¦</li>
</ul>
<p><strong>è¾“å‡ºç»“æœï¼š</strong></p>
<blockquote>
<p>æ­¥éª¤3: å•ä¸ªæ•°æ®é›†ä¸Šçš„æ¨¡å‹æ‹Ÿåˆå¯¹æ¯”<br/>
--------------------------------------------------<br/>
å•ä¸ªæ•°æ®é›†ä¸Šçš„æ‹Ÿåˆåˆ†æ:<br/>
- çº¿æ€§æ¨¡å‹: è¿‡äºç®€å•ï¼Œæ— æ³•æ•æ‰æ›²çº¿çš„å¤æ‚æ¨¡å¼ï¼Œè®­ç»ƒè¯¯å·®å’Œæµ‹è¯•è¯¯å·®éƒ½è¾ƒé«˜<br/>
- 4æ¬¡å¤šé¡¹å¼: èƒ½å¤Ÿè¾ƒå¥½åœ°æ‹Ÿåˆæ•°æ®ï¼Œè®­ç»ƒè¯¯å·®å’Œæµ‹è¯•è¯¯å·®ç›¸å¯¹å¹³è¡¡<br/>
- 15æ¬¡å¤šé¡¹å¼: è¿‡åº¦æ‹Ÿåˆè®­ç»ƒæ•°æ®ï¼Œè®­ç»ƒè¯¯å·®å¾ˆä½ä½†æµ‹è¯•è¯¯å·®è¾ƒé«˜<br/>
- å¸¦æ­£åˆ™åŒ–çš„15æ¬¡å¤šé¡¹å¼: é€šè¿‡æ­£åˆ™åŒ–å‡å°‘äº†è¿‡æ‹Ÿåˆï¼Œæµ‹è¯•è¯¯å·®æœ‰æ‰€æ”¹å–„</p>
</blockquote>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/956a6418923d40f29c52a854678629d7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b285bK46Iqx5byA5LqG5ZCX:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767494753&amp;x-signature=9KVlP7m3c6TpyVBcx982La6DqDQ%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-15">ç¬¬å››æ­¥ï¼šå¤šä¸ªæ•°æ®é›†ä¸Šçš„é¢„æµ‹åˆ†å¸ƒ</h3>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-built_in">print</span>("\n" + "=" * <span class="hljs-number">70</span>)
<span class="hljs-built_in">print</span>("æ­¥éª¤<span class="hljs-number">4</span>: å¤šä¸ªæ•°æ®é›†ä¸Šçš„é¢„æµ‹åˆ†å¸ƒ")
<span class="hljs-built_in">print</span>("=" * <span class="hljs-number">70</span>)

# å­˜å‚¨é¢„æµ‹ç»“æœ
predictions = {name: [] for name in models.<span class="hljs-built_in">keys</span>()}

<span class="hljs-built_in">print</span>("åœ¨å¤šä¸ªæ•°æ®é›†ä¸Šè®­ç»ƒæ¨¡å‹...")
for <span class="hljs-selector-tag">i</span> in <span class="hljs-built_in">range</span>(n_datasets):
    # ç”Ÿæˆæ–°çš„è®­ç»ƒæ•°æ®
    x_train = np.random.<span class="hljs-built_in">uniform</span>(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, n_samples)
    y_train = <span class="hljs-built_in">true_function</span>(x_train) + np.random.<span class="hljs-built_in">normal</span>(<span class="hljs-number">0</span>, noise_std, n_samples)
    
    # å¯¹æ¯ä¸ªæ¨¡å‹è¿›è¡Œè®­ç»ƒå’Œé¢„æµ‹
    for name, model in models.<span class="hljs-built_in">items</span>():
        model.<span class="hljs-built_in">fit</span>(x_train.<span class="hljs-built_in">reshape</span>(-<span class="hljs-number">1</span>, <span class="hljs-number">1</span>), y_train)
        y_pred = model.<span class="hljs-built_in">predict</span>(x_test.<span class="hljs-built_in">reshape</span>(-<span class="hljs-number">1</span>, <span class="hljs-number">1</span>))
        predictions[name].<span class="hljs-built_in">append</span>(y_pred)

<span class="hljs-built_in">print</span>(<span class="hljs-string">"è®­ç»ƒå®Œæˆ!"</span>)

# é€‰æ‹©ä¸€ä¸ªç‚¹æ¥å±•ç¤ºé¢„æµ‹åˆ†å¸ƒ
x_point = <span class="hljs-number">0.5</span>
y_true_point = <span class="hljs-built_in">true_function</span>(x_point)

# å¯è§†åŒ–åœ¨x=<span class="hljs-number">0.5</span>å¤„çš„é¢„æµ‹åˆ†å¸ƒ
plt.<span class="hljs-built_in">figure</span>(figsize=(<span class="hljs-number">12</span>, <span class="hljs-number">8</span>))

for i, (name, preds) in <span class="hljs-built_in">enumerate</span>(predictions.<span class="hljs-built_in">items</span>()):
    point_preds = [pred[np.<span class="hljs-built_in">argmin</span>(np.<span class="hljs-built_in">abs</span>(x_test - x_point))] for pred in preds]
    
    # è®¡ç®—ç»Ÿè®¡é‡
    mean_pred = np.<span class="hljs-built_in">mean</span>(point_preds)
    std_pred = np.<span class="hljs-built_in">std</span>(point_preds)
    bias = mean_pred - y_true_point
    
    # ç»˜åˆ¶é¢„æµ‹åˆ†å¸ƒ
    plt.<span class="hljs-built_in">hist</span>(point_preds, alpha=<span class="hljs-number">0.6</span>, label=f<span class="hljs-string">'{name}\nå‡å€¼: {mean_pred:.3f}\næ ‡å‡†å·®: {std_pred:.3f}\nåå·®: {bias:.3f}'</span>, 
             bins=<span class="hljs-number">20</span>, color=colors[i])

# æ ‡è®°çœŸå®å€¼
plt.<span class="hljs-built_in">axvline</span>(x=y_true_point, color=<span class="hljs-string">'black'</span>, linestyle=<span class="hljs-string">'-'</span>, linewidth=<span class="hljs-number">3</span>, 
            label=f<span class="hljs-string">'çœŸå®å€¼: {y_true_point:.3f}'</span>)

plt.<span class="hljs-built_in">xlabel</span>(f<span class="hljs-string">'åœ¨ x={x_point} å¤„çš„é¢„æµ‹å€¼'</span>)
plt.<span class="hljs-built_in">ylabel</span>(<span class="hljs-string">'é¢‘æ¬¡'</span>)
plt.<span class="hljs-built_in">title</span>(<span class="hljs-string">'æ­¥éª¤4: å¤šä¸ªæ•°æ®é›†ä¸Šçš„é¢„æµ‹åˆ†å¸ƒ (åæ˜ æ–¹å·®)'</span>, fontsize=<span class="hljs-number">14</span>, fontweight=<span class="hljs-string">'bold'</span>)
plt.<span class="hljs-built_in">legend</span>(bbox_to_anchor=(<span class="hljs-number">1.05</span>, <span class="hljs-number">1</span>), loc=<span class="hljs-string">'upper left'</span>)
plt.<span class="hljs-built_in">grid</span>(True, alpha=<span class="hljs-number">0.3</span>)
plt.<span class="hljs-built_in">tight_layout</span>()
plt.<span class="hljs-built_in">show</span>()

<span class="hljs-built_in">print</span>(<span class="hljs-string">"é¢„æµ‹åˆ†å¸ƒåˆ†æ:"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"- çº¿æ€§æ¨¡å‹: é¢„æµ‹åˆ†å¸ƒé›†ä¸­ï¼Œæ–¹å·®å°ï¼Œä½†å‡å€¼åç¦»çœŸå®å€¼ï¼ˆé«˜åå·®ï¼‰"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"- 4æ¬¡å¤šé¡¹å¼: é¢„æµ‹åˆ†å¸ƒç›¸å¯¹é›†ä¸­ï¼Œå‡å€¼æ¥è¿‘çœŸå®å€¼ï¼ˆåå·®å’Œæ–¹å·®å¹³è¡¡ï¼‰"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"- 15æ¬¡å¤šé¡¹å¼: é¢„æµ‹åˆ†å¸ƒåˆ†æ•£ï¼Œæ–¹å·®å¤§ï¼Œä½†å‡å€¼æ¥è¿‘çœŸå®å€¼ï¼ˆé«˜æ–¹å·®ï¼‰"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"- å¸¦æ­£åˆ™åŒ–çš„15æ¬¡å¤šé¡¹å¼: é¢„æµ‹åˆ†å¸ƒæ¯”æ— æ­£åˆ™åŒ–æ›´é›†ä¸­ï¼Œæ–¹å·®å‡å°"</span>)
</code></pre>
<p><strong>æ­¥éª¤4åˆ†æï¼š</strong></p>
<ul>
<li>é€šè¿‡åœ¨å¤šä¸ªæ•°æ®é›†ä¸Šè®­ç»ƒæ¨¡å‹ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°æ¯ä¸ªæ¨¡å‹çš„ç¨³å®šæ€§ï¼ˆæ–¹å·®ï¼‰</li>
<li>çº¿æ€§æ¨¡å‹çš„é¢„æµ‹åˆ†å¸ƒæœ€é›†ä¸­ï¼Œè¯´æ˜æ–¹å·®æœ€å°ï¼Œä½†å‡å€¼åç¦»çœŸå®å€¼ï¼Œè¯´æ˜åå·®å¤§</li>
<li>15æ¬¡å¤šé¡¹å¼çš„é¢„æµ‹åˆ†å¸ƒæœ€åˆ†æ•£ï¼Œè¯´æ˜æ–¹å·®æœ€å¤§ï¼Œä½†å‡å€¼æ¥è¿‘çœŸå®å€¼ï¼Œè¯´æ˜åå·®å°</li>
<li>4æ¬¡å¤šé¡¹å¼åœ¨åå·®å’Œæ–¹å·®ä¹‹é—´å–å¾—äº†å¹³è¡¡</li>
<li>å¸¦æ­£åˆ™åŒ–çš„æ¨¡å‹å‡å°‘äº†é¢„æµ‹çš„åˆ†æ•£ç¨‹åº¦ï¼Œé™ä½äº†æ–¹å·®</li>
</ul>
<p><strong>è¾“å‡ºç»“æœï¼š</strong></p>
<blockquote>
<p>æ­¥éª¤4: å¤šä¸ªæ•°æ®é›†ä¸Šçš„é¢„æµ‹åˆ†å¸ƒ<br/>
--------------------------------------------------<br/>
åœ¨å¤šä¸ªæ•°æ®é›†ä¸Šè®­ç»ƒæ¨¡å‹...<br/>
æ­£åœ¨å¤„ç†ç¬¬ 1/100 ä¸ªæ•°æ®é›†...<br/>
æ­£åœ¨å¤„ç†ç¬¬ 21/100 ä¸ªæ•°æ®é›†...<br/>
æ­£åœ¨å¤„ç†ç¬¬ 41/100 ä¸ªæ•°æ®é›†...<br/>
æ­£åœ¨å¤„ç†ç¬¬ 61/100 ä¸ªæ•°æ®é›†...<br/>
æ­£åœ¨å¤„ç†ç¬¬ 81/100 ä¸ªæ•°æ®é›†...<br/>
è®­ç»ƒå®Œæˆ!<br/>
é¢„æµ‹åˆ†å¸ƒåˆ†æ:<br/>
- çº¿æ€§æ¨¡å‹: é¢„æµ‹åˆ†å¸ƒé›†ä¸­ï¼Œæ–¹å·®å°ï¼Œä½†å‡å€¼åç¦»çœŸå®å€¼ï¼ˆé«˜åå·®ï¼‰<br/>
- 4æ¬¡å¤šé¡¹å¼: é¢„æµ‹åˆ†å¸ƒç›¸å¯¹é›†ä¸­ï¼Œå‡å€¼æ¥è¿‘çœŸå®å€¼ï¼ˆåå·®å’Œæ–¹å·®å¹³è¡¡ï¼‰<br/>
- 15æ¬¡å¤šé¡¹å¼: é¢„æµ‹åˆ†å¸ƒåˆ†æ•£ï¼Œæ–¹å·®å¤§ï¼Œä½†å‡å€¼æ¥è¿‘çœŸå®å€¼ï¼ˆé«˜æ–¹å·®ï¼‰<br/>
- å¸¦æ­£åˆ™åŒ–çš„15æ¬¡å¤šé¡¹å¼: é¢„æµ‹åˆ†å¸ƒæ¯”æ— æ­£åˆ™åŒ–æ›´é›†ä¸­ï¼Œæ–¹å·®å‡å°</p>
</blockquote>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/da7024bd06a841ccaa25d7409a8c6ae8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b285bK46Iqx5byA5LqG5ZCX:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767494753&amp;x-signature=fMZZ1HEpBQreYF0TPaRc5D1gpKA%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-16">ç¬¬äº”æ­¥ï¼šæ¨¡å‹å¹³å‡é¢„æµ‹ä¸çœŸå®å‡½æ•°å¯¹æ¯”</h3>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-built_in">print</span>("\n" + "=" * <span class="hljs-number">70</span>)
<span class="hljs-built_in">print</span>("æ­¥éª¤<span class="hljs-number">5</span>: æ¨¡å‹å¹³å‡é¢„æµ‹ä¸çœŸå®å‡½æ•°å¯¹æ¯”")
<span class="hljs-built_in">print</span>("=" * <span class="hljs-number">70</span>)

# è®¡ç®—æ¯ä¸ªæ¨¡å‹çš„å¹³å‡é¢„æµ‹
plt<span class="hljs-selector-class">.figure</span>(figsize=(<span class="hljs-number">12</span>, <span class="hljs-number">8</span>))

plt<span class="hljs-selector-class">.plot</span>(x_test, y_test_true, 'k-', linewidth=<span class="hljs-number">3</span>, label='çœŸå®å‡½æ•°')

for <span class="hljs-selector-tag">i</span>, (name, preds) in <span class="hljs-built_in">enumerate</span>(predictions.items()):
    preds_array = np.<span class="hljs-built_in">array</span>(preds)
    mean_prediction = np.<span class="hljs-built_in">mean</span>(preds_array, axis=<span class="hljs-number">0</span>)
    
    # è®¡ç®—å¹³å‡åå·®
    avg_bias = np.<span class="hljs-built_in">mean</span>(mean_prediction - y_test_true)
    bias_squared = np.<span class="hljs-built_in">mean</span>((mean_prediction - y_test_true) ** <span class="hljs-number">2</span>)
    
    plt.<span class="hljs-built_in">plot</span>(x_test, mean_prediction, line_styles[i], linewidth=<span class="hljs-number">2</span>, 
             label=f<span class="hljs-string">'{name}\nå¹³å‡åå·®: {avg_bias:.3f}\nåå·®å¹³æ–¹: {bias_squared:.3f}'</span>, 
             color=colors[i])

plt.<span class="hljs-built_in">xlabel</span>(<span class="hljs-string">'x'</span>)
plt.<span class="hljs-built_in">ylabel</span>(<span class="hljs-string">'y'</span>)
plt.<span class="hljs-built_in">title</span>(<span class="hljs-string">'æ­¥éª¤5: æ¨¡å‹å¹³å‡é¢„æµ‹ä¸çœŸå®å‡½æ•°å¯¹æ¯” (åæ˜ åå·®)'</span>, fontsize=<span class="hljs-number">14</span>, fontweight=<span class="hljs-string">'bold'</span>)
plt.<span class="hljs-built_in">legend</span>(bbox_to_anchor=(<span class="hljs-number">1.05</span>, <span class="hljs-number">1</span>), loc=<span class="hljs-string">'upper left'</span>)
plt.<span class="hljs-built_in">grid</span>(True, alpha=<span class="hljs-number">0.3</span>)
plt.<span class="hljs-built_in">tight_layout</span>()
plt.<span class="hljs-built_in">show</span>()

<span class="hljs-built_in">print</span>(<span class="hljs-string">"å¹³å‡é¢„æµ‹åˆ†æ:"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"- çº¿æ€§æ¨¡å‹: å¹³å‡é¢„æµ‹ä¸çœŸå®å‡½æ•°å·®å¼‚æœ€å¤§ï¼Œè¡¨ç°ä¸ºé«˜åå·®"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"- 4æ¬¡å¤šé¡¹å¼: å¹³å‡é¢„æµ‹èƒ½è¾ƒå¥½åœ°è·Ÿè¸ªçœŸå®å‡½æ•°ï¼Œåå·®è¾ƒå°"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"- 15æ¬¡å¤šé¡¹å¼: å¹³å‡é¢„æµ‹æœ€æ¥è¿‘çœŸå®å‡½æ•°ï¼Œåå·®æœ€å°"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"- å¸¦æ­£åˆ™åŒ–çš„15æ¬¡å¤šé¡¹å¼: å¹³å‡é¢„æµ‹æ¥è¿‘æ— æ­£åˆ™åŒ–ç‰ˆæœ¬ï¼Œåå·®å¾ˆå°"</span>)
</code></pre>
<p><strong>æ­¥éª¤5åˆ†æï¼š</strong></p>
<ul>
<li>å¹³å‡é¢„æµ‹åæ˜ äº†æ¨¡å‹çš„åå·®ï¼Œå³æ¨¡å‹é¢„æµ‹çš„ç³»ç»Ÿæ€§è¯¯å·®</li>
<li>çº¿æ€§æ¨¡å‹çš„å¹³å‡é¢„æµ‹æ˜¯ä¸€æ¡ç›´çº¿ï¼Œä¸çœŸå®æ›²çº¿å·®å¼‚æ˜æ˜¾ï¼Œè¯´æ˜é«˜åå·®</li>
<li>15æ¬¡å¤šé¡¹å¼çš„å¹³å‡é¢„æµ‹æœ€æ¥è¿‘çœŸå®å‡½æ•°ï¼Œè¯´æ˜ä½åå·®</li>
<li>4æ¬¡å¤šé¡¹å¼çš„å¹³å‡é¢„æµ‹åœ¨å¤§éƒ¨åˆ†åŒºåŸŸèƒ½è¾ƒå¥½åœ°è·Ÿè¸ªçœŸå®å‡½æ•°</li>
<li>è¿™ä¸ªå›¾è¡¨æ¸…æ™°åœ°å±•ç¤ºäº†ä¸åŒæ¨¡å‹çš„åå·®ç‰¹æ€§</li>
</ul>
<p><strong>è¾“å‡ºç»“æœï¼š</strong></p>
<blockquote>
<p>æ­¥éª¤5: æ¨¡å‹å¹³å‡é¢„æµ‹ä¸çœŸå®å‡½æ•°å¯¹æ¯”<br/>
--------------------------------------------------<br/>
å¹³å‡é¢„æµ‹åˆ†æ:<br/>
- çº¿æ€§æ¨¡å‹: å¹³å‡é¢„æµ‹ä¸çœŸå®å‡½æ•°å·®å¼‚æœ€å¤§ï¼Œè¡¨ç°ä¸ºé«˜åå·®<br/>
- 4æ¬¡å¤šé¡¹å¼: å¹³å‡é¢„æµ‹èƒ½è¾ƒå¥½åœ°è·Ÿè¸ªçœŸå®å‡½æ•°ï¼Œåå·®è¾ƒå°<br/>
- 15æ¬¡å¤šé¡¹å¼: å¹³å‡é¢„æµ‹æœ€æ¥è¿‘çœŸå®å‡½æ•°ï¼Œåå·®æœ€å°<br/>
- å¸¦æ­£åˆ™åŒ–çš„15æ¬¡å¤šé¡¹å¼: å¹³å‡é¢„æµ‹æ¥è¿‘æ— æ­£åˆ™åŒ–ç‰ˆæœ¬ï¼Œåå·®å¾ˆå°</p>
</blockquote>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d828bf90b3e24f5f81c0f219414de94f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b285bK46Iqx5byA5LqG5ZCX:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767494753&amp;x-signature=arM5F00n35eKYnm59QHW9D%2FqCtU%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-17">ç¬¬å…­æ­¥ï¼šåå·®-æ–¹å·®åˆ†è§£å¯è§†åŒ–</h3>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-built_in">print</span>("\n" + "=" * <span class="hljs-number">70</span>)
<span class="hljs-built_in">print</span>("æ­¥éª¤<span class="hljs-number">6</span>: åå·®-æ–¹å·®åˆ†è§£å¯è§†åŒ–")
<span class="hljs-built_in">print</span>("=" * <span class="hljs-number">70</span>)

# è®¡ç®—åå·®ã€æ–¹å·®å’Œæ€»è¯¯å·®
results = {}
noise = noise_std ** <span class="hljs-number">2</span>

for name, preds in predictions<span class="hljs-selector-class">.items</span>():
    preds_array = np.<span class="hljs-built_in">array</span>(preds)
    mean_prediction = np.<span class="hljs-built_in">mean</span>(preds_array, axis=<span class="hljs-number">0</span>)
    
    # è®¡ç®—åå·®å¹³æ–¹
    bias_squared = np.<span class="hljs-built_in">mean</span>((mean_prediction - y_test_true) ** <span class="hljs-number">2</span>)
    
    # è®¡ç®—æ–¹å·®
    variance = np.<span class="hljs-built_in">mean</span>(np.<span class="hljs-built_in">var</span>(preds_array, axis=<span class="hljs-number">0</span>))
    
    # è®¡ç®—æ€»è¯¯å·®
    total_error = np.<span class="hljs-built_in">mean</span>([<span class="hljs-built_in">mean_squared_error</span>(y_test_true, pred) for pred in preds])
    
    results[name] = {
        'bias_squared': bias_squared,
        <span class="hljs-string">'variance'</span>: variance,
        <span class="hljs-string">'total_error'</span>: total_error,
        <span class="hljs-string">'noise'</span>: noise
    }

# å¯è§†åŒ–åå·®-æ–¹å·®åˆ†è§£
model_names = <span class="hljs-built_in">list</span>(results.keys())
bias_squared_vals = <span class="hljs-selector-attr">[results[name]</span><span class="hljs-selector-attr">[<span class="hljs-string">'bias_squared'</span>]</span> for name in model_names]
variance_vals = <span class="hljs-selector-attr">[results[name]</span><span class="hljs-selector-attr">[<span class="hljs-string">'variance'</span>]</span> for name in model_names]
noise_vals = <span class="hljs-selector-attr">[results[name]</span><span class="hljs-selector-attr">[<span class="hljs-string">'noise'</span>]</span> for name in model_names]
total_error_vals = <span class="hljs-selector-attr">[results[name]</span><span class="hljs-selector-attr">[<span class="hljs-string">'total_error'</span>]</span> for name in model_names]

plt<span class="hljs-selector-class">.figure</span>(figsize=(<span class="hljs-number">12</span>, <span class="hljs-number">8</span>))
x_pos = np<span class="hljs-selector-class">.arange</span>(len(model_names))
<span class="hljs-attribute">width</span> = <span class="hljs-number">0.2</span>

plt<span class="hljs-selector-class">.bar</span>(x_pos - <span class="hljs-number">1.5</span>*width, bias_squared_vals, width, label='åå·®å¹³æ–¹', alpha=<span class="hljs-number">0.8</span>, color='red')
plt<span class="hljs-selector-class">.bar</span>(x_pos - <span class="hljs-number">0.5</span>*width, variance_vals, width, label='æ–¹å·®', alpha=<span class="hljs-number">0.8</span>, color='blue')
plt<span class="hljs-selector-class">.bar</span>(x_pos + <span class="hljs-number">0.5</span>*width, noise_vals, width, label='å™ªå£°', alpha=<span class="hljs-number">0.8</span>, color='gray')
plt<span class="hljs-selector-class">.bar</span>(x_pos + <span class="hljs-number">1.5</span>*width, total_error_vals, width, label='æ€»è¯¯å·®', alpha=<span class="hljs-number">0.6</span>, 
        color='black', edgecolor='red', linewidth=<span class="hljs-number">2</span>)

plt<span class="hljs-selector-class">.xlabel</span>('æ¨¡å‹å¤æ‚åº¦')
plt<span class="hljs-selector-class">.ylabel</span>('è¯¯å·®å€¼')
plt<span class="hljs-selector-class">.title</span>('æ­¥éª¤<span class="hljs-number">6</span>: åå·®-æ–¹å·®åˆ†è§£ (æ€»è¯¯å·® = åå·®Â² + æ–¹å·® + å™ªå£°)', fontsize=<span class="hljs-number">14</span>, fontweight='bold')
plt<span class="hljs-selector-class">.xticks</span>(x_pos, model_names, rotation=<span class="hljs-number">45</span>)
plt<span class="hljs-selector-class">.legend</span>()
plt<span class="hljs-selector-class">.grid</span>(True, alpha=<span class="hljs-number">0.3</span>)

# æ·»åŠ æ•°å€¼æ ‡æ³¨
for <span class="hljs-selector-tag">i</span>, v in <span class="hljs-built_in">enumerate</span>(total_error_vals):
    plt.<span class="hljs-built_in">text</span>(i, v + <span class="hljs-number">0.01</span>, f<span class="hljs-string">'{v:.3f}'</span>, ha=<span class="hljs-string">'center'</span>, va=<span class="hljs-string">'bottom'</span>, fontweight=<span class="hljs-string">'bold'</span>)

plt.<span class="hljs-built_in">tight_layout</span>()
plt.<span class="hljs-built_in">show</span>()

<span class="hljs-built_in">print</span>(<span class="hljs-string">"åå·®-æ–¹å·®åˆ†è§£ç»“æœ:"</span>)
for name in model_names:
    bias_sq = results[name][<span class="hljs-string">'bias_squared'</span>]
    var = results[name][<span class="hljs-string">'variance'</span>]
    noise_val = results[name][<span class="hljs-string">'noise'</span>]
    total = results[name][<span class="hljs-string">'total_error'</span>]
    
    <span class="hljs-built_in">print</span>(f<span class="hljs-string">"\n{name}:"</span>)
    <span class="hljs-built_in">print</span>(f<span class="hljs-string">"  åå·®å¹³æ–¹: {bias_sq:.4f} ({bias_sq/total*100:.1f}%)"</span>)
    <span class="hljs-built_in">print</span>(f<span class="hljs-string">"  æ–¹å·®: {var:.4f} ({var/total*100:.1f}%)"</span>)
    <span class="hljs-built_in">print</span>(f<span class="hljs-string">"  å™ªå£°: {noise_val:.4f} ({noise_val/total*100:.1f}%)"</span>)
    <span class="hljs-built_in">print</span>(f<span class="hljs-string">"  æ€»è¯¯å·®: {total:.4f}"</span>)
</code></pre>
<p><strong>æ­¥éª¤6åˆ†æï¼š</strong></p>
<ul>
<li>è¿™å¼ å›¾è¡¨æ¸…æ™°åœ°å±•ç¤ºäº†æ¯ä¸ªæ¨¡å‹çš„è¯¯å·®ç»„æˆ</li>
<li>çº¿æ€§æ¨¡å‹çš„ä¸»è¦è¯¯å·®æ¥æºæ˜¯åå·®ï¼ˆçº¢è‰²éƒ¨åˆ†ï¼‰</li>
<li>15æ¬¡å¤šé¡¹å¼çš„ä¸»è¦è¯¯å·®æ¥æºæ˜¯æ–¹å·®ï¼ˆè“è‰²éƒ¨åˆ†ï¼‰</li>
<li>4æ¬¡å¤šé¡¹å¼åœ¨åå·®å’Œæ–¹å·®ä¹‹é—´å–å¾—äº†è¾ƒå¥½çš„å¹³è¡¡</li>
<li>å¸¦æ­£åˆ™åŒ–çš„15æ¬¡å¤šé¡¹å¼é€šè¿‡å‡å°‘æ–¹å·®ï¼Œé™ä½äº†æ€»è¯¯å·®</li>
<li>æ‰€æœ‰æ¨¡å‹éƒ½æœ‰ç›¸åŒçš„å™ªå£°æˆåˆ†ï¼ˆç°è‰²éƒ¨åˆ†ï¼‰ï¼Œè¿™æ˜¯æ•°æ®å›ºæœ‰çš„ä¸å¯å‡å°‘è¯¯å·®</li>
</ul>
<p><strong>è¾“å‡ºç»“æœï¼š</strong></p>
<blockquote>
<p>æ­¥éª¤6: åå·®-æ–¹å·®åˆ†è§£å¯è§†åŒ–<br/>
--------------------------------------------------<br/>
åå·®-æ–¹å·®åˆ†è§£ç»“æœ:</p>
<p>çº¿æ€§æ¨¡å‹ (é«˜åå·®):<br/>
åå·®å¹³æ–¹: 0.7832 (96.2%)<br/>
æ–¹å·®: 0.0306 (3.8%)<br/>
å™ªå£°: 0.0900 (11.1%)<br/>
æ€»è¯¯å·®: 0.8137</p>
<p>4æ¬¡å¤šé¡¹å¼ (å¹³è¡¡):<br/>
åå·®å¹³æ–¹: 0.0461 (67.5%)<br/>
æ–¹å·®: 0.0222 (32.5%)<br/>
å™ªå£°: 0.0900 (131.6%)<br/>
æ€»è¯¯å·®: 0.0684</p>
<p>15æ¬¡å¤šé¡¹å¼ (é«˜æ–¹å·®):<br/>
åå·®å¹³æ–¹: 7.8403 (0.9%)<br/>
æ–¹å·®: 850.9843 (99.1%)<br/>
å™ªå£°: 0.0900 (0.0%)<br/>
æ€»è¯¯å·®: 858.8245</p>
<p>å¸¦æ­£åˆ™åŒ–çš„15æ¬¡å¤šé¡¹å¼:<br/>
åå·®å¹³æ–¹: 0.1624 (87.5%)<br/>
æ–¹å·®: 0.0233 (12.5%)<br/>
å™ªå£°: 0.0900 (48.5%)<br/>
æ€»è¯¯å·®: 0.1857</p>
</blockquote>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0e983e1baf4f4b1db9ff9e4bdc2b844e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b285bK46Iqx5byA5LqG5ZCX:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767494753&amp;x-signature=QGeNYntFU68Kbmslv%2BmttrguKlA%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-18">ç¬¬ä¸ƒæ­¥ï¼šå­¦ä¹ æ›²çº¿åˆ†æ</h3>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-built_in">print</span>("\n" + "=" * <span class="hljs-number">70</span>)
<span class="hljs-built_in">print</span>("æ­¥éª¤<span class="hljs-number">7</span>: å­¦ä¹ æ›²çº¿åˆ†æ")
<span class="hljs-built_in">print</span>("=" * <span class="hljs-number">70</span>)

# è®¡ç®—è®­ç»ƒè¯¯å·®
train_errors = {name: [] for name in models.<span class="hljs-built_in">keys</span>()}

for name, preds in predictions<span class="hljs-selector-class">.items</span>():
    for i in <span class="hljs-built_in">range</span>(n_datasets):
        # é‡æ–°ç”Ÿæˆè®­ç»ƒæ•°æ®ä»¥è®¡ç®—è®­ç»ƒè¯¯å·®
        x_train = np.random.<span class="hljs-built_in">uniform</span>(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, n_samples)
        y_train = <span class="hljs-built_in">true_function</span>(x_train) + np.random.<span class="hljs-built_in">normal</span>(<span class="hljs-number">0</span>, noise_std, n_samples)
        
        model = models[name]
        model.<span class="hljs-built_in">fit</span>(x_train.<span class="hljs-built_in">reshape</span>(-<span class="hljs-number">1</span>, <span class="hljs-number">1</span>), y_train)
        y_pred_train = model.<span class="hljs-built_in">predict</span>(x_train.<span class="hljs-built_in">reshape</span>(-<span class="hljs-number">1</span>, <span class="hljs-number">1</span>))
        
        train_errors[name].<span class="hljs-built_in">append</span>(<span class="hljs-built_in">mean_squared_error</span>(y_train, y_pred_train))

# è®¡ç®—å¹³å‡è®­ç»ƒè¯¯å·®å’Œæµ‹è¯•è¯¯å·®
avg_train_errors = [np.<span class="hljs-built_in">mean</span>(train_errors[name]) for name in model_names]
avg_test_errors = [results[name][<span class="hljs-string">'total_error'</span>] for name in model_names]

# å¯è§†åŒ–å­¦ä¹ æ›²çº¿
plt.<span class="hljs-built_in">figure</span>(figsize=(<span class="hljs-number">12</span>, <span class="hljs-number">8</span>))
model_complexity = [<span class="hljs-number">1</span>, <span class="hljs-number">4</span>, <span class="hljs-number">15</span>, <span class="hljs-number">15</span>]  # å¯¹åº”æ¯ä¸ªæ¨¡å‹çš„å¤æ‚åº¦

plt.<span class="hljs-built_in">plot</span>(model_complexity, avg_train_errors, <span class="hljs-string">'o-'</span>, linewidth=<span class="hljs-number">2</span>, markersize=<span class="hljs-number">8</span>, 
         label=<span class="hljs-string">'è®­ç»ƒè¯¯å·®'</span>, color=<span class="hljs-string">'blue'</span>)
plt.<span class="hljs-built_in">plot</span>(model_complexity, avg_test_errors, <span class="hljs-string">'o-'</span>, linewidth=<span class="hljs-number">2</span>, markersize=<span class="hljs-number">8</span>, 
         label=<span class="hljs-string">'æµ‹è¯•è¯¯å·®'</span>, color=<span class="hljs-string">'red'</span>)

# æ ‡è®°æ¯ä¸ªç‚¹
for i, name in <span class="hljs-built_in">enumerate</span>(model_names):
    plt.<span class="hljs-built_in">annotate</span>(name, (model_complexity[i], avg_test_errors[i]), 
                textcoords=<span class="hljs-string">"offset points"</span>, xytext=(<span class="hljs-number">0</span>,<span class="hljs-number">10</span>), ha=<span class="hljs-string">'center'</span>, fontweight=<span class="hljs-string">'bold'</span>)

plt.<span class="hljs-built_in">xlabel</span>(<span class="hljs-string">'æ¨¡å‹å¤æ‚åº¦ (å¤šé¡¹å¼æ¬¡æ•°)'</span>)
plt.<span class="hljs-built_in">ylabel</span>(<span class="hljs-string">'è¯¯å·®'</span>)
plt.<span class="hljs-built_in">title</span>(<span class="hljs-string">'æ­¥éª¤7: å­¦ä¹ æ›²çº¿ - è®­ç»ƒè¯¯å·® vs æµ‹è¯•è¯¯å·®'</span>, fontsize=<span class="hljs-number">14</span>, fontweight=<span class="hljs-string">'bold'</span>)
plt.<span class="hljs-built_in">legend</span>()
plt.<span class="hljs-built_in">grid</span>(True, alpha=<span class="hljs-number">0.3</span>)
plt.<span class="hljs-built_in">tight_layout</span>()
plt.<span class="hljs-built_in">show</span>()

<span class="hljs-built_in">print</span>(<span class="hljs-string">"å­¦ä¹ æ›²çº¿åˆ†æ:"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"- è®­ç»ƒè¯¯å·®éšæ¨¡å‹å¤æ‚åº¦å¢åŠ è€ŒæŒç»­ä¸‹é™"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"- æµ‹è¯•è¯¯å·®å…ˆä¸‹é™åä¸Šå‡ï¼Œå½¢æˆå…¸å‹çš„Uå½¢æ›²çº¿"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"- æœ€ä¼˜æ¨¡å‹å¤æ‚åº¦åœ¨æµ‹è¯•è¯¯å·®æœ€ä½ç‚¹ï¼Œè¿™é‡Œæ˜¯4æ¬¡å¤šé¡¹å¼"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"- 15æ¬¡å¤šé¡¹å¼è¡¨ç°å‡ºæ˜æ˜¾çš„è¿‡æ‹Ÿåˆï¼ˆè®­ç»ƒè¯¯å·®ä½ä½†æµ‹è¯•è¯¯å·®é«˜ï¼‰"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"- æ­£åˆ™åŒ–æœ‰åŠ©äºå‡å°‘è¿‡æ‹Ÿåˆï¼Œä½¿æµ‹è¯•è¯¯å·®é™ä½"</span>)
</code></pre>
<p><strong>æ­¥éª¤7åˆ†æï¼š</strong></p>
<ul>
<li>å­¦ä¹ æ›²çº¿å±•ç¤ºäº†æ¨¡å‹å¤æ‚åº¦ä¸è¯¯å·®ä¹‹é—´çš„å…³ç³»</li>
<li>è®­ç»ƒè¯¯å·®éšå¤æ‚åº¦å¢åŠ è€ŒæŒç»­ä¸‹é™ï¼Œå¤æ‚æ¨¡å‹å¯ä»¥æ›´å¥½åœ°æ‹Ÿåˆè®­ç»ƒæ•°æ®</li>
<li>æµ‹è¯•è¯¯å·®å…ˆä¸‹é™åä¸Šå‡ï¼Œè¡¨æ˜å­˜åœ¨æœ€ä¼˜çš„æ¨¡å‹å¤æ‚åº¦</li>
<li>4æ¬¡å¤šé¡¹å¼ä½äºæµ‹è¯•è¯¯å·®çš„æœ€ä½ç‚¹ï¼Œæ˜¯åå·®-æ–¹å·®æƒè¡¡çš„æœ€ä½³å¹³è¡¡ç‚¹</li>
<li>15æ¬¡å¤šé¡¹å¼è¡¨ç°å‡ºæ˜æ˜¾çš„è¿‡æ‹Ÿåˆç°è±¡</li>
<li>è¿™ä¸ªå›¾è¡¨ç›´è§‚åœ°å±•ç¤ºäº†åå·®-æ–¹å·®æƒè¡¡çš„åŸç†</li>
</ul>
<p><strong>è¾“å‡ºç»“æœï¼š</strong></p>
<blockquote>
<p>æ­¥éª¤7: å­¦ä¹ æ›²çº¿åˆ†æ<br/>
--------------------------------------------------<br/>
å­¦ä¹ æ›²çº¿åˆ†æ:<br/>
- è®­ç»ƒè¯¯å·®éšæ¨¡å‹å¤æ‚åº¦å¢åŠ è€ŒæŒç»­ä¸‹é™<br/>
- æµ‹è¯•è¯¯å·®å…ˆä¸‹é™åä¸Šå‡ï¼Œå½¢æˆå…¸å‹çš„Uå½¢æ›²çº¿<br/>
- æœ€ä¼˜æ¨¡å‹å¤æ‚åº¦åœ¨æµ‹è¯•è¯¯å·®æœ€ä½ç‚¹ï¼Œè¿™é‡Œæ˜¯4æ¬¡å¤šé¡¹å¼<br/>
- 15æ¬¡å¤šé¡¹å¼è¡¨ç°å‡ºæ˜æ˜¾çš„è¿‡æ‹Ÿåˆï¼ˆè®­ç»ƒè¯¯å·®ä½ä½†æµ‹è¯•è¯¯å·®é«˜ï¼‰<br/>
- æ­£åˆ™åŒ–æœ‰åŠ©äºå‡å°‘è¿‡æ‹Ÿåˆï¼Œä½¿æµ‹è¯•è¯¯å·®é™ä½</p>
</blockquote>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d4be6f7d049f406ba95c99df01bf82c8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b285bK46Iqx5byA5LqG5ZCX:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767494753&amp;x-signature=j98pcRchh7bK4Z0TEl0FwiqIMHU%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-19">ç¬¬å…«æ­¥ï¼šç»¼åˆæ€»ç»“ä¸æ¨¡å‹é€‰æ‹©å»ºè®®</h3>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-built_in">print</span>("\n" + "=" * <span class="hljs-number">70</span>)
<span class="hljs-built_in">print</span>("æ­¥éª¤<span class="hljs-number">8</span>: ç»¼åˆæ€»ç»“ä¸æ¨¡å‹é€‰æ‹©å»ºè®®")
<span class="hljs-built_in">print</span>("=" * <span class="hljs-number">70</span>)

# æ‰¾å‡ºæœ€ä½³æ¨¡å‹
best_model = <span class="hljs-built_in">min</span>(results.items(), key=lambda x: x[<span class="hljs-number">1</span>][<span class="hljs-string">'total_error'</span>])[<span class="hljs-number">0</span>]
<span class="hljs-built_in">print</span>(f<span class="hljs-string">"æ ¹æ®æ€»è¯¯å·®ï¼Œæœ€ä½³æ¨¡å‹æ˜¯: {best_model}"</span>)

# åˆ›å»ºæ€»ç»“å›¾è¡¨
fig, (ax1, ax2) = plt.<span class="hljs-built_in">subplots</span>(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, figsize=(<span class="hljs-number">15</span>, <span class="hljs-number">6</span>))

# å­å›¾<span class="hljs-number">1</span>: åå·®-æ–¹å·®åˆ†è§£æ€»ç»“
components = [<span class="hljs-string">'åå·®Â²'</span>, <span class="hljs-string">'æ–¹å·®'</span>, <span class="hljs-string">'å™ªå£°'</span>]
model_colors = [<span class="hljs-string">'red'</span>, <span class="hljs-string">'orange'</span>, <span class="hljs-string">'blue'</span>, <span class="hljs-string">'green'</span>]

for i, name in <span class="hljs-built_in">enumerate</span>(model_names):
    bias_ratio = results[name][<span class="hljs-string">'bias_squared'</span>] / results[name][<span class="hljs-string">'total_error'</span>]
    variance_ratio = results[name][<span class="hljs-string">'variance'</span>] / results[name][<span class="hljs-string">'total_error'</span>]
    noise_ratio = results[name][<span class="hljs-string">'noise'</span>] / results[name][<span class="hljs-string">'total_error'</span>]
    
    ratios = [bias_ratio, variance_ratio, noise_ratio]
    
    ax1.<span class="hljs-built_in">bar</span>(np.<span class="hljs-built_in">arange</span>(<span class="hljs-built_in">len</span>(components)) + i*<span class="hljs-number">0.2</span>, ratios, width=<span class="hljs-number">0.2</span>, 
            label=name, color=model_colors[i], alpha=<span class="hljs-number">0.7</span>)

ax1.<span class="hljs-built_in">set_xlabel</span>(<span class="hljs-string">'è¯¯å·®æˆåˆ†'</span>)
ax1.<span class="hljs-built_in">set_ylabel</span>(<span class="hljs-string">'æ¯”ä¾‹'</span>)
ax1.<span class="hljs-built_in">set_title</span>(<span class="hljs-string">'å„æ¨¡å‹è¯¯å·®æˆåˆ†æ¯”ä¾‹'</span>, fontweight=<span class="hljs-string">'bold'</span>)
ax1.<span class="hljs-built_in">set_xticks</span>(np.<span class="hljs-built_in">arange</span>(<span class="hljs-built_in">len</span>(components)) + <span class="hljs-number">0.3</span>)
ax1.<span class="hljs-built_in">set_xticklabels</span>(components)
ax1.<span class="hljs-built_in">legend</span>()
ax1.<span class="hljs-built_in">grid</span>(True, alpha=<span class="hljs-number">0.3</span>)

# å­å›¾<span class="hljs-number">2</span>: æ¨¡å‹é€‰æ‹©å»ºè®®
recommendations = []
for name in model_names:
    bias_ratio = results[name][<span class="hljs-string">'bias_squared'</span>] / results[name][<span class="hljs-string">'total_error'</span>]
    variance_ratio = results[name][<span class="hljs-string">'variance'</span>] / results[name][<span class="hljs-string">'total_error'</span>]
    
    if bias_ratio &gt; <span class="hljs-number">0.6</span>:
        rec = <span class="hljs-string">"é«˜åå·®\nå¢åŠ å¤æ‚åº¦"</span>
        color = <span class="hljs-string">'red'</span>
    elif variance_ratio &gt; <span class="hljs-number">0.6</span>:
        rec = <span class="hljs-string">"é«˜æ–¹å·®\nä½¿ç”¨æ­£åˆ™åŒ–"</span>
        color = <span class="hljs-string">'blue'</span>
    else:
        rec = <span class="hljs-string">"å¹³è¡¡\nè¡¨ç°è‰¯å¥½"</span>
        color = <span class="hljs-string">'green'</span>
    
    recommendations.<span class="hljs-built_in">append</span>(rec)

bars = ax2.<span class="hljs-built_in">bar</span>(model_names, total_error_vals, color=model_colors, alpha=<span class="hljs-number">0.7</span>)
ax2.<span class="hljs-built_in">set_ylabel</span>(<span class="hljs-string">'æ€»è¯¯å·®'</span>)
ax2.<span class="hljs-built_in">set_title</span>(<span class="hljs-string">'æ¨¡å‹é€‰æ‹©å»ºè®® (åŸºäºæ€»è¯¯å·®)'</span>, fontweight=<span class="hljs-string">'bold'</span>)
ax2.<span class="hljs-built_in">set_xticklabels</span>(model_names, rotation=<span class="hljs-number">45</span>)

# æ·»åŠ å»ºè®®æ ‡æ³¨
for i, (bar, rec) in <span class="hljs-built_in">enumerate</span>(<span class="hljs-built_in">zip</span>(bars, recommendations)):
    ax2.<span class="hljs-built_in">text</span>(bar.<span class="hljs-built_in">get_x</span>() + bar.<span class="hljs-built_in">get_width</span>()/<span class="hljs-number">2</span>, bar.<span class="hljs-built_in">get_height</span>() + <span class="hljs-number">0.01</span>, 
             rec, ha=<span class="hljs-string">'center'</span>, va=<span class="hljs-string">'bottom'</span>, fontweight=<span class="hljs-string">'bold'</span>)

ax2.<span class="hljs-built_in">grid</span>(True, alpha=<span class="hljs-number">0.3</span>)

plt.<span class="hljs-built_in">tight_layout</span>()
plt.<span class="hljs-built_in">show</span>()

<span class="hljs-built_in">print</span>(<span class="hljs-string">"\næ¨¡å‹é€‰æ‹©å»ºè®®:"</span>)
for name in model_names:
    bias_ratio = results[name][<span class="hljs-string">'bias_squared'</span>] / results[name][<span class="hljs-string">'total_error'</span>]
    variance_ratio = results[name][<span class="hljs-string">'variance'</span>] / results[name][<span class="hljs-string">'total_error'</span>]
    
    <span class="hljs-built_in">print</span>(f<span class="hljs-string">"\n{name}:"</span>)
    if bias_ratio &gt; <span class="hljs-number">0.6</span>:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"  â†’ ä¸»è¦é—®é¢˜: é«˜åå·® (æ¬ æ‹Ÿåˆ)"</span>)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"  â†’ å»ºè®®: å¢åŠ æ¨¡å‹å¤æ‚åº¦ï¼Œæ·»åŠ æ›´å¤šç‰¹å¾"</span>)
    elif variance_ratio &gt; <span class="hljs-number">0.6</span>:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"  â†’ ä¸»è¦é—®é¢˜: é«˜æ–¹å·® (è¿‡æ‹Ÿåˆ)"</span>)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"  â†’ å»ºè®®: ä½¿ç”¨æ­£åˆ™åŒ–ï¼Œå¢åŠ è®­ç»ƒæ•°æ®ï¼Œå‡å°‘ç‰¹å¾"</span>)
    else:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"  â†’ çŠ¶æ€: åå·®å’Œæ–¹å·®ç›¸å¯¹å¹³è¡¡"</span>)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"  â†’ å»ºè®®: å½“å‰æ¨¡å‹è¡¨ç°è‰¯å¥½ï¼Œå¯å¾®è°ƒå‚æ•°"</span>)

<span class="hljs-built_in">print</span>(f<span class="hljs-string">"\næœ€ä½³æ¨¡å‹é€‰æ‹©: {best_model}"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"æ€»è¯¯å·®æœ€å°ï¼Œåœ¨åå·®å’Œæ–¹å·®ä¹‹é—´å–å¾—äº†æœ€ä½³å¹³è¡¡"</span>)
</code></pre>
<p><strong>æ­¥éª¤8åˆ†æï¼š</strong></p>
<ul>
<li>å·¦ä¾§å›¾è¡¨æ˜¾ç¤ºäº†æ¯ä¸ªæ¨¡å‹çš„è¯¯å·®æˆåˆ†æ¯”ä¾‹</li>
<li>å³ä¾§å›¾è¡¨æä¾›äº†åŸºäºåˆ†æç»“æœçš„æ¨¡å‹é€‰æ‹©å»ºè®®</li>
<li>çº¿æ€§æ¨¡å‹ä¸»è¦å—é«˜åå·®å½±å“ï¼Œå»ºè®®å¢åŠ å¤æ‚åº¦</li>
<li>15æ¬¡å¤šé¡¹å¼ä¸»è¦å—é«˜æ–¹å·®å½±å“ï¼Œå»ºè®®ä½¿ç”¨æ­£åˆ™åŒ–</li>
<li>4æ¬¡å¤šé¡¹å¼å’Œå¸¦æ­£åˆ™åŒ–çš„15æ¬¡å¤šé¡¹å¼è¡¨ç°ç›¸å¯¹å¹³è¡¡</li>
<li>4æ¬¡å¤šé¡¹å¼æ˜¯æ€»è¯¯å·®æœ€å°çš„æ¨¡å‹ï¼Œæ˜¯æœ€ä½³é€‰æ‹©</li>
</ul>
<p><strong>è¾“å‡ºç»“æœï¼š</strong></p>
<blockquote>
<p>æ­¥éª¤8: ç»¼åˆæ€»ç»“ä¸æ¨¡å‹é€‰æ‹©å»ºè®®<br/>
--------------------------------------------------<br/>
æ ¹æ®æ€»è¯¯å·®ï¼Œæœ€ä½³æ¨¡å‹æ˜¯: 4æ¬¡å¤šé¡¹å¼ (å¹³è¡¡)</p>
<p>æ¨¡å‹é€‰æ‹©å»ºè®®:</p>
<p>çº¿æ€§æ¨¡å‹ (é«˜åå·®):<br/>
â†’ ä¸»è¦é—®é¢˜: é«˜åå·® (æ¬ æ‹Ÿåˆ)<br/>
â†’ å»ºè®®: å¢åŠ æ¨¡å‹å¤æ‚åº¦ï¼Œæ·»åŠ æ›´å¤šç‰¹å¾</p>
<p>4æ¬¡å¤šé¡¹å¼ (å¹³è¡¡):<br/>
â†’ ä¸»è¦é—®é¢˜: é«˜åå·® (æ¬ æ‹Ÿåˆ)<br/>
â†’ å»ºè®®: å¢åŠ æ¨¡å‹å¤æ‚åº¦ï¼Œæ·»åŠ æ›´å¤šç‰¹å¾</p>
<p>15æ¬¡å¤šé¡¹å¼ (é«˜æ–¹å·®):<br/>
â†’ ä¸»è¦é—®é¢˜: é«˜æ–¹å·® (è¿‡æ‹Ÿåˆ)<br/>
â†’ å»ºè®®: ä½¿ç”¨æ­£åˆ™åŒ–ï¼Œå¢åŠ è®­ç»ƒæ•°æ®ï¼Œå‡å°‘ç‰¹å¾</p>
<p>å¸¦æ­£åˆ™åŒ–çš„15æ¬¡å¤šé¡¹å¼:<br/>
â†’ ä¸»è¦é—®é¢˜: é«˜åå·® (æ¬ æ‹Ÿåˆ)<br/>
â†’ å»ºè®®: å¢åŠ æ¨¡å‹å¤æ‚åº¦ï¼Œæ·»åŠ æ›´å¤šç‰¹å¾</p>
<p>æœ€ä½³æ¨¡å‹é€‰æ‹©: 4æ¬¡å¤šé¡¹å¼ (å¹³è¡¡)<br/>
æ€»è¯¯å·®æœ€å°ï¼Œåœ¨åå·®å’Œæ–¹å·®ä¹‹é—´å–å¾—äº†æœ€ä½³å¹³è¡¡</p>
</blockquote>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/baa19afe01ec4f42a53b320877fc4ba8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b285bK46Iqx5byA5LqG5ZCX:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767494753&amp;x-signature=GRkP2r31nGrP89CjIsksKqTVed8%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-20">ç¤ºä¾‹æ€»ç»“</h3>
<p>é€šè¿‡è¿™8ä¸ªæ­¥éª¤çš„è¯¦ç»†åˆ†æï¼Œæˆ‘ä»¬å…¨é¢ç†è§£äº†åå·®-æ–¹å·®åˆ†è§£ï¼š</p>
<p><strong>1. åå·®ï¼šæ¨¡å‹é¢„æµ‹çš„å¹³å‡å€¼ä¸çœŸå®å€¼ä¹‹é—´çš„å·®å¼‚</strong></p>
<ul>
<li>é«˜åå·®æ¨¡å‹è¿‡äºç®€å•ï¼Œæ— æ³•æ•æ‰æ•°æ®ä¸­çš„å¤æ‚æ¨¡å¼</li>
<li>è¡¨ç°ä¸ºæ¬ æ‹Ÿåˆï¼Œè®­ç»ƒè¯¯å·®å’Œæµ‹è¯•è¯¯å·®éƒ½è¾ƒé«˜</li>
</ul>
<p><strong>2. æ–¹å·®ï¼šæ¨¡å‹å¯¹è®­ç»ƒæ•°æ®å˜åŒ–çš„æ•æ„Ÿæ€§</strong></p>
<ul>
<li>é«˜æ–¹å·®æ¨¡å‹è¿‡äºå¤æ‚ï¼Œè¿‡åº¦æ‹Ÿåˆè®­ç»ƒæ•°æ®ä¸­çš„å™ªå£°</li>
<li>è¡¨ç°ä¸ºè¿‡æ‹Ÿåˆï¼Œè®­ç»ƒè¯¯å·®ä½ä½†æµ‹è¯•è¯¯å·®é«˜</li>
</ul>
<p>**3. å™ªå£°ï¼š**æ•°æ®ä¸­å›ºæœ‰çš„éšæœºè¯¯å·®ï¼Œæ— æ³•é€šè¿‡æ¨¡å‹å‡å°‘</p>
<p><strong>4. åå·®-æ–¹å·®æƒè¡¡ï¼š</strong></p>
<ul>
<li>ç®€å•æ¨¡å‹ï¼šé«˜åå·®ï¼Œä½æ–¹å·®</li>
<li>å¤æ‚æ¨¡å‹ï¼šä½åå·®ï¼Œé«˜æ–¹å·®</li>
<li>ç›®æ ‡ï¼šæ‰¾åˆ°å¹³è¡¡ç‚¹ï¼Œä½¿æ€»è¯¯å·®æœ€å°</li>
</ul>
<p><strong>5. å®é™…åº”ç”¨ï¼š</strong></p>
<ul>
<li>è¯Šæ–­æ¨¡å‹é—®é¢˜æ˜¯æ¬ æ‹Ÿåˆè¿˜æ˜¯è¿‡æ‹Ÿåˆ</li>
<li>æŒ‡å¯¼æ¨¡å‹é€‰æ‹©å’Œè°ƒä¼˜ç­–ç•¥</li>
<li>è®¾ç½®åˆç†çš„æ€§èƒ½æœŸæœ›</li>
</ul>
<p>è¿™ä¸ªé€æ­¥åˆ†æè¿‡ç¨‹å±•ç¤ºäº†å¦‚ä½•é€šè¿‡åå·®-æ–¹å·®åˆ†è§£æ¥æ·±å…¥ç†è§£æ¨¡å‹è¡Œä¸ºï¼Œå¹¶åšå‡ºæ›´æ˜æ™ºçš„å»ºæ¨¡å†³ç­–ã€‚</p>
<h2 data-id="heading-21">å…­ã€åå·®-æ–¹å·®æƒè¡¡</h2>
<p>è¯´æ˜åå·®-æ–¹å·®æƒè¡¡ä¹‹å‰ï¼Œå…ˆè¦äº†è§£æ¸…æ¥šå®ƒä¸åå·®-æ–¹å·®åˆ†è§£çš„åŒºåˆ«ï¼Œä¸¤è€…æ˜¯å®Œå…¨ä¸åŒçš„æ¦‚å¿µã€‚</p>
<h3 data-id="heading-22">1. æ ¸å¿ƒåŒºåˆ«</h3>
<p><strong>1.1 åå·®-æ–¹å·®åˆ†è§£ï¼š</strong></p>
<ul>
<li>**åŸºç¡€ç†è§£ï¼š**æ˜¯ä¸€ä¸ªæ•°å­¦å®šç†æˆ–åˆ†ææ¡†æ¶</li>
<li>**ä½œç”¨ï¼š**å°†æ¨¡å‹çš„æœŸæœ›è¯¯å·®åˆ†è§£ä¸ºä¸‰ä¸ªæ˜ç¡®ç»„æˆéƒ¨åˆ†</li>
<li>**å…³æ³¨ç‚¹ï¼š**è¯¯å·®çš„æ¥æºåˆ†æå’Œå®šé‡è®¡ç®—</li>
</ul>
<p><strong>1.2 åå·®-æ–¹å·®æƒè¡¡ï¼š</strong></p>
<ul>
<li>**åŸºç¡€ç†è§£ï¼š**æ˜¯ä¸€ä¸ªç°è±¡æˆ–è®¾è®¡åŸåˆ™</li>
<li>**ä½œç”¨ï¼š**æè¿°æ¨¡å‹å¤æ‚åº¦ä¸æ³›åŒ–æ€§èƒ½ä¹‹é—´çš„æƒè¡¡å…³ç³»</li>
<li>**å…³æ³¨ç‚¹ï¼š**æ¨¡å‹é€‰æ‹©çš„ç­–ç•¥æŒ‡å¯¼</li>
</ul>
<h3 data-id="heading-23">2. æ·±å…¥ç†è§£</h3>
<p><strong>2.1 åå·®-æ–¹å·®åˆ†è§£ï¼š</strong></p>
<ul>
<li>**å…¬å¼è¡¨è¾¾ï¼š**æ€»è¯¯å·® = åå·®Â² + æ–¹å·® + å™ªå£°</li>
<li>**æ ¸å¿ƒæ€æƒ³ï¼š**ä»»ä½•ç›‘ç£å­¦ä¹ æ¨¡å‹çš„æœŸæœ›æ³›åŒ–è¯¯å·®éƒ½å¯ä»¥è¢«åˆ†è§£ä¸ºè¿™ä¸‰ä¸ªä¸å¯çº¦ç®€çš„ç»„æˆéƒ¨åˆ†ã€‚</li>
<li><strong>åº”ç”¨åœºæ™¯ï¼š</strong>
<ul>
<li>è¯Šæ–­æ¨¡å‹é—®é¢˜çš„å…·ä½“æ¥æº</li>
<li>å®šé‡åˆ†æä¸åŒè¯¯å·®æˆåˆ†çš„è´¡çŒ®åº¦</li>
<li>ç†è§£æ¨¡å‹çš„ç†è®ºæ€§èƒ½ç•Œé™</li>
</ul>
</li>
</ul>
<p><strong>2.2 åå·®-æ–¹å·®æƒè¡¡ï¼š</strong></p>
<ul>
<li><strong>æ ¸å¿ƒç°è±¡ï¼š</strong>
<ul>
<li>éšç€æ¨¡å‹å¤æ‚åº¦å¢åŠ ï¼š</li>
<li>- åå·® â†“ (æ¨¡å‹æ›´èƒ½æ‹Ÿåˆè®­ç»ƒæ•°æ®)</li>
<li>- æ–¹å·® â†‘ (æ¨¡å‹å¯¹æ•°æ®å˜åŒ–æ›´æ•æ„Ÿ)</li>
<li>- æ€»è¯¯å·®å…ˆâ†“åâ†‘ (å­˜åœ¨æœ€ä¼˜å¤æ‚åº¦ç‚¹)</li>
</ul>
</li>
<li><strong>åº”ç”¨åœºæ™¯ï¼š</strong>
<ul>
<li>æŒ‡å¯¼æ¨¡å‹å¤æ‚åº¦é€‰æ‹©</li>
<li>åˆ¶å®šæ­£åˆ™åŒ–ç­–ç•¥</li>
<li>å¹³è¡¡è¿‡æ‹Ÿåˆä¸æ¬ æ‹Ÿåˆ</li>
</ul>
</li>
</ul>
<h3 data-id="heading-24">3. å…³ç³»å›¾ç¤º</h3>
<pre><code class="hljs language-scss" lang="scss">åå·®-æ–¹å·®åˆ†è§£
    â†“ (æä¾›ç†è®ºåŸºç¡€)
è¯¯å·®æˆåˆ†åˆ†æ
    â†“ (æ­ç¤ºå†…åœ¨è§„å¾‹)  
åå·®-æ–¹å·®æƒè¡¡ç°è±¡
    â†“ (æŒ‡å¯¼å®è·µåº”ç”¨)
æ¨¡å‹é€‰æ‹©ä¸ä¼˜åŒ–
</code></pre>
<h3 data-id="heading-25">4. åœºæ™¯å‰–æ</h3>
<h4 data-id="heading-26">1. å¤šé¡¹å¼å›å½’</h4>
<p><strong>1.1 ä½¿ç”¨åå·®-æ–¹å·®åˆ†è§£ï¼š</strong></p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># åˆ†æä¸€ä¸ª15æ¬¡å¤šé¡¹å¼æ¨¡å‹çš„è¯¯å·®æ¥æº</span>
biasÂ² = 0.02    <span class="hljs-comment"># åå·®å¹³æ–¹ï¼šæ¨¡å‹å¹³å‡é¢„æµ‹ä¸çœŸå®å‡½æ•°çš„å·®å¼‚</span>
<span class="hljs-attr">variance</span> = <span class="hljs-number">0.35</span> <span class="hljs-comment"># æ–¹å·®ï¼šä¸åŒè®­ç»ƒé›†ä¸Šé¢„æµ‹çš„æ³¢åŠ¨</span>
<span class="hljs-attr">noise</span> = <span class="hljs-number">0.09</span>    <span class="hljs-comment"># å™ªå£°ï¼šæ•°æ®ä¸­çš„éšæœºè¯¯å·®</span>
<span class="hljs-attr">total_error</span> = <span class="hljs-number">0.46</span>  <span class="hljs-comment"># æ€»è¯¯å·® = 0.02 + 0.35 + 0.09</span>
</code></pre>
<p>**ç»“è®ºï¼š**è¯¥æ¨¡å‹ä¸»è¦é—®é¢˜æ˜¯é«˜æ–¹å·®ï¼ˆè¿‡æ‹Ÿåˆï¼‰</p>
<p><strong>1.2 ä½¿ç”¨åå·®-æ–¹å·®æƒè¡¡ï¼š</strong></p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># æ¯”è¾ƒä¸åŒå¤æ‚åº¦æ¨¡å‹çš„æƒè¡¡å…³ç³»</span>
æ¨¡å‹å¤æ‚åº¦: <span class="hljs-section">[1æ¬¡, 4æ¬¡, 15æ¬¡]</span>
åå·®:      <span class="hljs-section">[0.45, 0.08, 0.02]</span>  <span class="hljs-comment"># éšå¤æ‚åº¦å¢åŠ è€Œå‡å°‘</span>
æ–¹å·®:      <span class="hljs-section">[0.04, 0.12, 0.35]</span>  <span class="hljs-comment"># éšå¤æ‚åº¦å¢åŠ è€Œå¢åŠ </span>
æ€»è¯¯å·®:    <span class="hljs-section">[0.58, 0.29, 0.46]</span>  <span class="hljs-comment"># å…ˆå‡å°‘åå¢åŠ </span>
</code></pre>
<p>**ç»“è®ºï¼š**4æ¬¡å¤šé¡¹å¼åœ¨åå·®å’Œæ–¹å·®ä¹‹é—´å–å¾—äº†æœ€ä½³å¹³è¡¡</p>
<h4 data-id="heading-27">2. å¤§æ¨¡å‹çš„è®­ç»ƒ</h4>
<p><strong>2.1 åå·®-æ–¹å·®åˆ†è§£è§†è§’ï¼š</strong></p>
<ul>
<li>åˆ†ææ¨¡å‹åœ¨ç‰¹å®šä»»åŠ¡ä¸Šçš„é”™è¯¯ç±»å‹</li>
<li>ç¡®å®šé”™è¯¯ä¸»è¦æ˜¯ç”±äºçŸ¥è¯†ç¼ºä¹ï¼ˆé«˜åå·®ï¼‰è¿˜æ˜¯ä¸ä¸€è‡´æ€§ï¼ˆé«˜æ–¹å·®ï¼‰</li>
<li>ä¸ºé’ˆå¯¹æ€§æ”¹è¿›æä¾›ä¾æ®</li>
</ul>
<p><strong>2.2 åå·®-æ–¹å·®æƒè¡¡è§†è§’ï¼š</strong></p>
<ul>
<li>å†³å®šé¢„è®­ç»ƒçš„æ•°æ®é‡å’Œæ¨¡å‹å‚æ•°é‡</li>
<li>è°ƒæ•´å¾®è°ƒé˜¶æ®µçš„å­¦ä¹ ç‡å’Œæ­£åˆ™åŒ–å¼ºåº¦</li>
<li>åœ¨æ¨¡å‹èƒ½åŠ›å’Œæ³›åŒ–æ€§èƒ½ä¹‹é—´æ‰¾åˆ°å¹³è¡¡ç‚¹</li>
</ul>
<h3 data-id="heading-28">5. å·®å¼‚æ€»ç»“</h3>
<ul>
<li>åå·®-æ–¹å·®åˆ†è§£æ˜¯"è§£å‰–åˆ†æ"â€”â€”æŠŠè¯¯å·®æ‹†å¼€çœ‹çœ‹é‡Œé¢æœ‰ä»€ä¹ˆ</li>
<li>åå·®-æ–¹å·®æƒè¡¡æ˜¯"å¯¼èˆªæŒ‡å¯¼"â€”â€”å‘Šè¯‰ä½ åº”è¯¥å¾€å“ªä¸ªæ–¹å‘èµ°</li>
</ul>
<h2 data-id="heading-29">ä¸ƒã€æ€»ç»“</h2>
<p>é€šè¿‡åå·®-æ–¹å·®çš„è§†è§’ï¼Œæˆ‘ä»¬èƒ½å¤Ÿæ¸…æ™°åœ°çœ‹åˆ°å¤§æ¨¡å‹ä»æ­»è®°ç¡¬èƒŒåˆ°çœŸæ­£ç†è§£çš„æ¼”è¿›è·¯å¾„ã€‚è¿™ä¸ªè¿‡ç¨‹ä¸æ˜¯ç®€å•çš„çº¿æ€§è¿›æ­¥ï¼Œè€Œæ˜¯åœ¨ä¸åŒå­¦ä¹ æ¨¡å¼é—´çš„åŠ¨æ€å¹³è¡¡ã€‚çœŸæ­£ç†è§£çš„æœ¬è´¨ï¼Œæ˜¯åœ¨ä¿æŒå¯¹åŸºç¡€çŸ¥è¯†å‡†ç¡®æŒæ¡ï¼ˆä½åå·®ï¼‰çš„åŒæ—¶ï¼Œå…·å¤‡çµæ´»åº”ç”¨å’Œåˆ›é€ æ€§æ€ç»´çš„èƒ½åŠ›ï¼ˆé€‚åº¦æ–¹å·®ï¼‰ã€‚è¿™å°±åƒä¸€ä½ä¼˜ç§€çš„å­¦è€…ï¼Œæ—¢è¦æœ‰æ‰å®çš„ä¸“ä¸šåŸºç¡€ï¼Œåˆè¦æœ‰åˆ›æ–°çš„æ€ç»´æ–¹å¼ã€‚</p>
<p>å½“æˆ‘ä»¬è®­ç»ƒå’Œä½¿ç”¨å¤§æ¨¡å‹æ—¶ï¼Œåº”è¯¥æ—¶åˆ»å…³æ³¨è¿™ä¸ªå¹³è¡¡ç‚¹ï¼š</p>
<ul>
<li>é¿å…æ¨¡å‹é™·å…¥æœºæ¢°è®°å¿†çš„é™·é˜±ï¼ˆé«˜åå·®ï¼‰</li>
<li>é˜²æ­¢æ¨¡å‹èµ°å‘è¿‡åº¦å‘æ•£çš„æç«¯ï¼ˆé«˜æ–¹å·®ï¼‰</li>
<li>è¿½æ±‚æ·±åº¦ç†è§£ä¸ç¨³å®šè¡¨ç°çš„ç»Ÿä¸€ï¼ˆæœ€ä½³å¹³è¡¡ï¼‰</li>
</ul>
<p>åœ¨è¿™ä¸ªæ„ä¹‰ä¸Šï¼Œåå·®-æ–¹å·®ç†è®ºä¸ä»…æ˜¯ä¸€ä¸ªæŠ€æœ¯æ¡†æ¶ï¼Œæ›´æ˜¯ä¸€ç§ç†è§£æ™ºèƒ½æœ¬è´¨çš„å“²å­¦è§†è§’ã€‚å®ƒå‘Šè¯‰æˆ‘ä»¬ï¼ŒçœŸæ­£çš„æ™ºèƒ½æ—¢ä¸æ˜¯ç®€å•çš„æ¨¡å¼è¯†åˆ«ï¼Œä¹Ÿä¸æ˜¯æ— çº¦æŸçš„éšæœºå‘æ•£ï¼Œè€Œæ˜¯åœ¨çº¦æŸä¸è‡ªç”±ã€ç¡®å®šä¸ä¸ç¡®å®šä¹‹é—´æ‰¾åˆ°çš„å¾®å¦™å¹³è¡¡ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸æ­¢æ˜¯ä»£ç å †æ”¾ï¼šå¸¦ä½ å…¨é¢æŒæ¡ Monorepo æ ¸å¿ƒæŠ€æœ¯ä¸é€‰å‹]]></title>    <link>https://juejin.cn/post/7588109656041144366</link>    <guid>https://juejin.cn/post/7588109656041144366</guid>    <pubDate>2025-12-28T03:43:26.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588109656041144366" data-draft-id="7588080521445851182" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸æ­¢æ˜¯ä»£ç å †æ”¾ï¼šå¸¦ä½ å…¨é¢æŒæ¡ Monorepo æ ¸å¿ƒæŠ€æœ¯ä¸é€‰å‹"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-28T03:43:26.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ˜æœˆ_æ¸…é£"/> <meta itemprop="url" content="https://juejin.cn/user/1081575170131006"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸æ­¢æ˜¯ä»£ç å †æ”¾ï¼šå¸¦ä½ å…¨é¢æŒæ¡ Monorepo æ ¸å¿ƒæŠ€æœ¯ä¸é€‰å‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1081575170131006/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ˜æœˆ_æ¸…é£
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-28T03:43:26.000Z" title="Sun Dec 28 2025 03:43:26 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-28
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨å‰ç«¯å·¥ç¨‹åŒ–æ—¥ç›Šå¤æ‚çš„ä»Šå¤©ï¼Œå¾ˆå¤šå¼€å‘è€…å¯¹ <strong>Monorepo</strong> çš„ç¬¬ä¸€å°è±¡å¾€å¾€æ˜¯ï¼šâ€œä¸å°±æ˜¯æŠŠå¥½å‡ ä¸ªé¡¹ç›®çš„ä»£ç å¡è¿›ä¸€ä¸ª Git ä»“åº“å—ï¼Ÿâ€</p>
<p>å¦‚æœä»…ä»…æ˜¯â€œç‰©ç†å †æ”¾â€ï¼Œé‚£ä¸ä»…ä¸èƒ½ææ•ˆï¼Œåè€Œä¼šå¸¦æ¥æƒé™æ··ä¹±å’Œæ„å»ºç¼“æ…¢çš„ç¾éš¾ã€‚çœŸæ­£çš„ Monorepo æ˜¯ä¸€å¥—<strong>å·¥ç¨‹åŒ–ç®¡ç†æ–¹æ¡ˆ</strong>ï¼Œå®ƒé€šè¿‡ç²¾å¦™çš„å·¥å…·é“¾ï¼Œè§£å†³äº†å¤šé¡¹ç›®åä½œä¸­ä»£ç å¤ç”¨ã€ä¾èµ–åŒæ­¥å’Œç‰ˆæœ¬ç®¡ç†çš„ç—›ç‚¹ã€‚</p>
<hr/>
<h2 data-id="heading-0">ä¸€ã€ ä¸ºä»€ä¹ˆæˆ‘ä»¬éœ€è¦ Monorepoï¼Ÿ</h2>
<p>åœ¨ä¼ ç»Ÿçš„ <strong>Multirepo</strong>ï¼ˆå¤šä»“åº“ï¼‰æ¨¡å¼ä¸‹ï¼Œå¦‚æœä½ ç»´æŠ¤ç€ä¸€ä¸ªç»„ä»¶åº“ <code>UI-Lib</code> å’Œä¸‰ä¸ªä¸šåŠ¡é¡¹ç›®ï¼Œæµç¨‹é€šå¸¸æ˜¯è¿™æ ·çš„ï¼š</p>
<ol>
<li>ä¿®æ”¹ <code>UI-Lib</code> çš„ä»£ç ã€‚</li>
<li>æ›´æ–°ç‰ˆæœ¬å·ï¼Œå‘å¸ƒåˆ° npmã€‚</li>
<li>åˆ°ä¸‰ä¸ªä¸šåŠ¡é¡¹ç›®ä¸­åˆ†åˆ«æ‰§è¡Œ <code>npm update</code>ã€‚</li>
<li>å¦‚æœå‘ç° Bugï¼Œé‡å¤ä¸Šè¿°æ­¥éª¤â€¦â€¦</li>
</ol>
<p>è¿™ç§â€œå‘å¸ƒ-æ‹‰å–â€çš„å¾ªç¯æå¤§åœ°æµªè´¹äº†å¼€å‘æ—¶é—´ã€‚è€Œ <strong>Monorepo</strong> å°†å®ƒä»¬ç½®äºåŒä¸€å·¥ä½œåŒºï¼š</p>
<ul>
<li><strong>å®æ—¶åé¦ˆ</strong>ï¼šä¿®æ”¹ç»„ä»¶åº“ï¼Œä¸šåŠ¡é¡¹ç›®ç«‹å³ç”Ÿæ•ˆï¼Œæ— éœ€å‘å¸ƒ npmã€‚</li>
<li><strong>åŸå­é‡æ„</strong>ï¼šå½“ä½ éœ€è¦æ”¹åŠ¨ä¸€ä¸ªæ ¸å¿ƒæ¥å£æ—¶ï¼Œå¯ä»¥åœ¨åŒä¸€ä¸ª Commit ä¸­ä¿®æ”¹æ‰€æœ‰å—å½±å“çš„å­é¡¹ç›®ï¼Œç¡®ä¿ç³»ç»Ÿå§‹ç»ˆå¤„äºå¯ç”¨çŠ¶æ€ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-1">äºŒã€ æ ¸å¿ƒæŠ€æœ¯ï¼šæ”¯æ’‘ Monorepo çš„ä¸‰æ ¹æ”¯æŸ±</h2>
<p>è¦ç©è½¬ Monorepoï¼Œä½ å¿…é¡»æŒæ¡ä»¥ä¸‹ä¸‰ä¸ªå±‚é¢çš„æŠ€æœ¯é€‰å‹ï¼š</p>
<h3 data-id="heading-2">1. ä¾èµ–ç®¡ç†å±‚ï¼ˆWorkspacesï¼‰</h3>
<p>è¿™æ˜¯ Monorepo çš„å¿ƒè„ã€‚å®ƒè´Ÿè´£å°†ä»“åº“å†…çš„å„ä¸ª Package äº’ç›¸â€œè½¯é“¾æ¥â€ï¼Œå¹¶ç»Ÿä¸€ç®¡ç†ç¬¬ä¸‰æ–¹ä¾èµ–ã€‚</p>
<ul>
<li><strong>pnpm Workspaces (é¦–é€‰)</strong> ï¼šé€šè¿‡å†…å®¹å¯»å€å­˜å‚¨ï¼Œæå¤§èŠ‚çœç£ç›˜ç©ºé—´ï¼Œå¹¶èƒ½ä¸¥æ ¼ç¦æ­¢æœªå£°æ˜çš„ä¾èµ–è®¿é—®ï¼ˆè§£å†³å¹»å½±ä¾èµ–é—®é¢˜ï¼‰ã€‚</li>
<li><strong>Yarn Workspaces</strong>ï¼šè€ç‰Œæ–¹æ¡ˆï¼Œç”Ÿæ€å®Œå–„ã€‚</li>
</ul>
<h3 data-id="heading-3">2. ä»»åŠ¡ç¼–æ’å±‚ï¼ˆBuild Pipelineï¼‰</h3>
<p>å½“ä»“åº“é‡Œæœ‰å‡ åä¸ªé¡¹ç›®æ—¶ï¼Œè¿è¡Œ <code>npm run build</code> å¦‚æœè¦ç­‰åŠå°æ—¶ï¼Œé‚£æ˜¯ä¸å¯æ¥å—çš„ã€‚æˆ‘ä»¬éœ€è¦â€œèªæ˜â€çš„å·¥å…·ï¼š</p>
<ul>
<li><strong>Turborepo</strong>ï¼šç”± Vercel å‡ºå“ã€‚æ ¸å¿ƒèƒ½åŠ›æ˜¯ <strong>æŒ‡çº¹ç¼“å­˜ï¼ˆHashingï¼‰</strong> â€”â€”å¦‚æœä»£ç æ²¡å˜ï¼Œç›´æ¥ä»ç¼“å­˜è¯»å–ç»“æœï¼›ä»¥åŠ <strong>å¹¶è¡Œæ‰§è¡Œ</strong>â€”â€”è‡ªåŠ¨åˆ†æä¾èµ–å›¾è°±ï¼Œè®©äº’ä¸å½±å“çš„é¡¹ç›®åŒæ—¶æ„å»ºã€‚</li>
<li><strong>Nx</strong>ï¼šåŠŸèƒ½æ›´å…¨é¢çš„â€œé‡å‹æ­¦å™¨â€ï¼Œæ”¯æŒå¯è§†åŒ–ä¾èµ–å›¾è°±åˆ†æï¼Œé€‚åˆå¯¹æ„å»ºæµç¨‹æœ‰æè‡´å®šåˆ¶åŒ–éœ€æ±‚çš„å¤§å‚ã€‚</li>
</ul>
<h3 data-id="heading-4">3. å‘å¸ƒä¸ç‰ˆæœ¬å±‚ï¼ˆVersioningï¼‰</h3>
<p>å¦‚ä½•å†³å®šå“ªä¸ªåŒ…éœ€è¦å‘ç‰ˆï¼Ÿå¦‚ä½•è‡ªåŠ¨ç”Ÿæˆ Changelogï¼Ÿ</p>
<ul>
<li><strong>Changesets</strong>ï¼šéå¸¸æ¨èã€‚å®ƒé€šè¿‡åœ¨ PR ä¸­æ·»åŠ æè¿°æ–‡ä»¶ï¼Œè‡ªåŠ¨åŒ–å¤„ç†ç‰ˆæœ¬æ›´æ–°å’Œå‘å¸ƒæµç¨‹ï¼Œå°¤å…¶é€‚åˆå¼€æºé¡¹ç›®æˆ–å¤šäººåä½œã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-5">ä¸‰ã€ é€‰å‹æŒ‡å—ï¼šä½ çœŸçš„éœ€è¦å®ƒå—ï¼Ÿ</h2>
<p>Monorepo ä¸æ˜¯é“¶å¼¹ï¼Œå®ƒä¹Ÿæœ‰è‡ªå·±çš„â€œé€‚ç”¨è¾¹ç•Œâ€ï¼š</p>






























<table><thead><tr><th><strong>ç»´åº¦</strong></th><th><strong>å»ºè®®ä½¿ç”¨ Monorepo</strong></th><th><strong>å»ºè®®ä¿æŒ Multirepo</strong></th></tr></thead><tbody><tr><td><strong>é¡¹ç›®å…³è”åº¦</strong></td><td>å­˜åœ¨å¤§é‡å…±äº«ç»„ä»¶ã€å·¥å…·ç±»ã€ç±»å‹å®šä¹‰ã€‚</td><td>å„é¡¹ç›®ä¸šåŠ¡ç‹¬ç«‹ï¼Œå‡ ä¹æ²¡æœ‰ä»£ç äº¤é›†ã€‚</td></tr><tr><td><strong>æŠ€æœ¯æ ˆ</strong></td><td>ç»Ÿä¸€ä½¿ç”¨ React æˆ– Vueï¼Œè§„èŒƒä¸€è‡´ã€‚</td><td>æ··åˆäº†å¤šç§æ¡†æ¶æˆ–ä¸åŒå¹´ä»£çš„è€æ—§é¡¹ç›®ã€‚</td></tr><tr><td><strong>å›¢é˜Ÿè§„æ¨¡</strong></td><td>ä¸­å°å‹å›¢é˜Ÿï¼Œè¿½æ±‚å¿«é€Ÿè¿­ä»£ä¸ä½æ²Ÿé€šæˆæœ¬ã€‚</td><td>è·¨éƒ¨é—¨è¶…å¤§å‹å›¢é˜Ÿï¼Œå¯¹ä»£ç æƒé™æœ‰æå…¶ä¸¥æ ¼é™åˆ¶ã€‚</td></tr><tr><td><strong>æ„å»ºå‹åŠ›</strong></td><td>å…·å¤‡é…ç½® Turborepo ç­‰å·¥å…·çš„èƒ½åŠ›ã€‚</td><td>æ²¡æœ‰ä¸“äººç»´æŠ¤é…ç½®ï¼Œä¸æ„¿å¢åŠ æ„å»ºå·¥å…·å¤æ‚åº¦ã€‚</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-6">å››ã€ è½åœ°å»ºè®®ï¼šä» 0 åˆ° 1 çš„æœ€ä¼˜è·¯å¾„</h2>
<p>å¦‚æœä½ å‡†å¤‡åœ¨å›¢é˜Ÿè½åœ° Monorepoï¼Œå»ºè®®é‡‡ç”¨è¿™å¥—**â€œé»„é‡‘ç»„åˆâ€**ï¼š</p>
<ol>
<li><strong>åŒ…ç®¡ç†</strong>ï¼šä½¿ç”¨ <strong>pnpm</strong>ã€‚å®ƒçš„é€Ÿåº¦å’Œä¾èµ–å¤„ç†èƒ½åŠ›æ˜¯ç›®å‰ç¤¾åŒºçš„å…±è¯†ã€‚</li>
<li><strong>è„šæ‰‹æ¶</strong>ï¼šä½¿ç”¨ <strong>Turborepo</strong>ã€‚å®ƒçš„å­¦ä¹ æ›²çº¿æœ€å¹³ç¼“ï¼Œåªéœ€ä¸€ä¸ª <code>turbo.json</code> å°±èƒ½è®©æ„å»ºé€Ÿåº¦èµ·é£ã€‚</li>
<li><strong>è¯­è¨€</strong>ï¼šå…¨é‡å¼€å¯ <strong>TypeScript</strong>ã€‚Monorepo çš„æœ€å¤§ä¼˜åŠ¿ä¹‹ä¸€å°±æ˜¯è·¨é¡¹ç›®çš„ç±»å‹å®‰å…¨â€”â€”ä½ ä¿®æ”¹äº† A åŒ…çš„æ¥å£å®šä¹‰ï¼ŒB åŒ…åœ¨ç¼–è¯‘é˜¶æ®µå°±ä¼šç›´æ¥æŠ¥é”™ã€‚</li>
</ol>
<hr/>
<h3 data-id="heading-7">ç»“è¯­</h3>
<p>Monorepo çš„æœ¬è´¨æ˜¯å°†<strong>ç®¡ç†å¤æ‚åº¦</strong>è½¬åŒ–ä¸ºäº†<strong>å·¥å…·é“¾å¤æ‚åº¦</strong>ã€‚è™½ç„¶åˆæœŸé…ç½®éœ€è¦ä¸€å®šæˆæœ¬ï¼Œä½†å®ƒå¸¦æ¥çš„ååŒæ•ˆç‡å’Œä»£ç å¤ç”¨ç‡æ˜¯æ— å¯æ¯”æ‹Ÿçš„ã€‚</p>
<p><strong>ä½ æƒ³äº†è§£å¦‚ä½•ç”¨ pnpm + Turborepo æ­å»ºä¸€ä¸ªæœ€å°å¯è¿è¡Œçš„ Monorepo æ¨¡æ¿å—ï¼Ÿæˆ‘å¯ä»¥ä¸ºä½ æä¾›å…·ä½“çš„é…ç½®æ­¥éª¤ã€‚</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[LangChain äºŒï¼šè¾“å‡ºç»“æœå®šåˆ¶ä¸å†å²ç®¡ç†èƒ½åŠ›è¯¦è§£]]></title>    <link>https://juejin.cn/post/7588084804093886502</link>    <guid>https://juejin.cn/post/7588084804093886502</guid>    <pubDate>2025-12-28T02:11:10.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588084804093886502" data-draft-id="7588069469516234793" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="LangChain äºŒï¼šè¾“å‡ºç»“æœå®šåˆ¶ä¸å†å²ç®¡ç†èƒ½åŠ›è¯¦è§£"/> <meta itemprop="keywords" content="LangChain,OpenAI,å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-28T02:11:10.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="xiaoxue_"/> <meta itemprop="url" content="https://juejin.cn/user/4065372122398027"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            LangChain äºŒï¼šè¾“å‡ºç»“æœå®šåˆ¶ä¸å†å²ç®¡ç†èƒ½åŠ›è¯¦è§£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4065372122398027/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    xiaoxue_
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-28T02:11:10.000Z" title="Sun Dec 28 2025 02:11:10 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-28
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">LangChain äºŒï¼šè¾“å‡ºç»“æœå®šåˆ¶ä¸å†å²ç®¡ç†èƒ½åŠ›å¤§æ­ç§˜ âœ¨</h2>
<p>åœ¨ AI åº”ç”¨å¼€å‘ä¸­ï¼Œæˆ‘ä»¬å¸¸å¸¸é¢ä¸´ä¸¤ä¸ªæ ¸å¿ƒé—®é¢˜ï¼šå¦‚ä½•è®©å¤§æ¨¡å‹è¾“å‡ºç»“æ„åŒ–çš„å†…å®¹ï¼Ÿå¦‚ä½•è®©æ¨¡å‹è®°ä½ä¸Šä¸‹æ–‡å®ç°å¤šè½®å¯¹è¯ï¼Ÿä»Šå¤©å°±æ¥æ·±å…¥æ¢è®¨ LangChain å¦‚ä½•è½»æ¾è§£å†³è¿™ä¸¤ä¸ªé—®é¢˜ï¼Œç»“åˆå®æˆ˜ä»£ç å¸¦ä½ æŒæ¡è¾“å‡ºç»“æœå®šåˆ¶ä¸å†å²ç®¡ç†çš„æ ¸å¿ƒæŠ€èƒ½ï¼</p>
<h3 data-id="heading-1">ç¬¬ä¸€éƒ¨åˆ†ï¼šJsonOutputParser ç»“æœå®šåˆ¶èƒ½åŠ› ğŸ§©</h3>
<p>å½“æˆ‘ä»¬è°ƒç”¨å¤§æ¨¡å‹æ—¶ï¼Œç»å¸¸ä¼šé‡åˆ°è¿™æ ·çš„å°´å°¬ï¼šæ¨¡å‹è¿”å›çš„å†…å®¹æ˜¯ä¸€æ®µè‡ªç”±æ–‡æœ¬ï¼Œè€Œæˆ‘ä»¬éœ€è¦çš„æ˜¯ç»“æ„åŒ–çš„ JSON æ•°æ®ï¼ˆæ¯”å¦‚æå–ç”¨æˆ·ä¿¡æ¯ã€è§£æå•†å“å‚æ•°ç­‰ï¼‰ã€‚è¿™æ—¶å€™ï¼Œ<code>JsonOutputParser</code>Â å°±æˆäº†æˆ‘ä»¬çš„å¾—åŠ›åŠ©æ‰‹ï¼</p>
<h4 data-id="heading-2">1. å®‰è£…ç›¸å…³ä¾èµ– ğŸ“¦</h4>
<p>è¦ä½¿ç”¨è¾“å‡ºå®šåˆ¶èƒ½åŠ›ï¼Œé¦–å…ˆéœ€è¦å®‰è£…å¿…è¦çš„ä¾èµ–åŒ…ï¼š</p>
<p>bash</p>
<pre><code class="hljs language-bash" lang="bash">pnpm i langchain @langchain/deepseek @langchain/core zod
</code></pre>
<p>ğŸ’¡ å‘½ä»¤è§£æï¼š</p>
<ul>
<li><code>langchain</code>ï¼šLangChain æ ¸å¿ƒæ¡†æ¶ï¼Œæä¾›åŸºç¡€èƒ½åŠ›</li>
<li><code>@langchain/deepseek</code>ï¼šDeepSeek æ¨¡å‹çš„ LangChain é›†æˆåŒ…</li>
<li><code>@langchain/core</code>ï¼šåŒ…å«æ ¸å¿ƒç»„ä»¶ï¼ˆå¦‚è§£æå™¨ã€æç¤ºæ¨¡æ¿ç­‰ï¼‰</li>
<li><code>zod</code>ï¼šç”¨äºå®šä¹‰å’Œæ ¡éªŒæ•°æ®ç»“æ„çš„å·¥å…·åº“ï¼Œæ˜¯å®ç°ç»“æ„åŒ–è¾“å‡ºçš„å…³é”®</li>
</ul>
<h4 data-id="heading-3">2. å¯¼å…¥è¾“å‡ºç»“æœå®šåˆ¶èƒ½åŠ›çš„å…³é”®æ¨¡å— ğŸ”§</h4>
<p>javascript</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å¯¼å…¥ JSON è¾“å‡ºè§£æå™¨ï¼šè´Ÿè´£å°†æ¨¡å‹è¾“å‡ºè½¬æ¢ä¸º JSON å¹¶æ ¡éªŒæ ¼å¼</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">JsonOutputParser</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@langchain/core/output_parsers'</span>;

<span class="hljs-comment">// å¯¼å…¥ zodï¼šç”¨äºå®šä¹‰æ•°æ®ç»“æ„è§„åˆ™ï¼ˆSchemaï¼‰ï¼Œç¡®ä¿è¾“å‡ºç¬¦åˆé¢„æœŸæ ¼å¼</span>
<span class="hljs-keyword">import</span> { z } <span class="hljs-keyword">from</span> <span class="hljs-string">'zod'</span>;
</code></pre>
<p>ğŸ“ æ¨¡å—ä½œç”¨è¯¦è§£ï¼š</p>
<ul>
<li><code>JsonOutputParser</code>ï¼šæ¥æ”¶æ¨¡å‹çš„åŸå§‹è¾“å‡ºæ–‡æœ¬ï¼Œå°†å…¶è§£æä¸º JSON å¯¹è±¡ï¼ŒåŒæ—¶ä¼šæ ¹æ®é¢„å®šä¹‰çš„è§„åˆ™æ ¡éªŒæ ¼å¼æ˜¯å¦æ­£ç¡®ï¼Œè‹¥ä¸ç¬¦åˆåˆ™æŠ›å‡ºé”™è¯¯</li>
<li><code>zod</code>ï¼šä¸€ä¸ªæ¨¡å¼éªŒè¯åº“ï¼Œæˆ‘ä»¬ç”¨å®ƒæ¥å®šä¹‰ã€Œæ¨¡å‹åº”è¯¥è¾“å‡ºä»€ä¹ˆæ ·çš„æ•°æ®ç»“æ„ã€ï¼ˆæ¯”å¦‚å¿…é¡»åŒ…å«å“ªäº›å­—æ®µã€å­—æ®µç±»å‹æ˜¯ä»€ä¹ˆï¼‰</li>
</ul>
<h4 data-id="heading-4">3. Zodã€Schema è§„åˆ™ä¸ Prompt æç¤ºè¯çš„å…³ç³» ğŸ¤</h4>
<p>è¦å®ç°ç»“æ„åŒ–è¾“å‡ºï¼Œéœ€è¦ä¸‰ä¸ªæ ¸å¿ƒè¦ç´ ååŒå·¥ä½œï¼š</p>
<ul>
<li><strong>Zod</strong>ï¼šå·¥å…·æœ¬èº«ï¼Œæä¾›äº†å®šä¹‰æ•°æ®ç»“æ„çš„è¯­æ³•ï¼ˆæ¯”å¦‚Â <code>z.object()</code>Â å®šä¹‰å¯¹è±¡ã€<code>z.string()</code>Â å®šä¹‰å­—ç¬¦ä¸²ç±»å‹ï¼‰</li>
<li><strong>Schema</strong>ï¼šåŸºäº Zod å®šä¹‰çš„å…·ä½“è§„åˆ™ã€‚ä¾‹å¦‚ï¼š<code>const UserSchema = z.object({ name: z.string(), age: z.number() })</code>Â å°±å®šä¹‰äº†ä¸€ä¸ªç”¨æˆ·ä¿¡æ¯çš„ç»“æ„è§„åˆ™ï¼ˆå¿…é¡»æœ‰å­—ç¬¦ä¸²ç±»å‹çš„ name å’Œæ•°å­—ç±»å‹çš„ ageï¼‰</li>
<li><strong>Prompt æç¤ºè¯</strong>ï¼šå°† Schema è§„åˆ™ã€Œç¿»è¯‘ã€æˆæ¨¡å‹èƒ½ç†è§£çš„æŒ‡ä»¤ï¼Œå‘Šè¯‰æ¨¡å‹ã€Œè¯·æŒ‰ç…§è¿™ä¸ªç»“æ„è¾“å‡º JSON æ•°æ®ã€</li>
</ul>
<p>ä¸‰è€…å½¢æˆå®Œç¾é—­ç¯ï¼š<code>ç”¨ Zod å®šä¹‰ Schema è§„åˆ™ â†’ åœ¨ Prompt ä¸­å‘ŠçŸ¥æ¨¡å‹è§„åˆ™ â†’ æ¨¡å‹æŒ‰è§„åˆ™è¾“å‡º â†’ JsonOutputParser ç”¨ Zod æ ¡éªŒå¹¶è§£æä¸º JSON</code></p>
<h4 data-id="heading-5">4. ä»£ç å®æˆ˜ï¼šå®ç°ç»“æ„åŒ–è¾“å‡ºğŸ“</h4>
<p>javascript</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å¯¼å…¥æ‰€éœ€æ¨¡å—</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ChatDeepSeek</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@langchain/deepseek'</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ChatPromptTemplate</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@langchain/core/prompts'</span>
<span class="hljs-comment">// å°† llm ç”Ÿæˆçš„å†…å®¹è§£æä¸º json æ ¼å¼</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">JsonOutputParser</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@langchain/core/output_parsers'</span>
<span class="hljs-keyword">import</span> { z } <span class="hljs-keyword">from</span> <span class="hljs-string">'zod'</span>
<span class="hljs-keyword">import</span> <span class="hljs-string">'dotenv/config'</span> <span class="hljs-comment">// ä½ çš„key</span>

<span class="hljs-comment">// 1. å®šä¹‰è¾“å‡ºæ•°æ®çš„ç»“æ„è§„åˆ™ï¼ˆåŸºäº Zodï¼‰</span>
<span class="hljs-comment">// è¿™é‡Œè¦æ±‚æ¨¡å‹è¾“å‡ºç”¨æˆ·ä¿¡æ¯ï¼ŒåŒ…å«å§“åï¼ˆå­—ç¬¦ä¸²ï¼‰å’Œçˆ±å¥½ï¼ˆå­—ç¬¦ä¸²æ•°ç»„ï¼‰</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">UserInfoSchema</span> = z.<span class="hljs-title function_">object</span>({
  <span class="hljs-attr">name</span>: z.<span class="hljs-title function_">string</span>().<span class="hljs-title function_">describe</span>(<span class="hljs-string">"ç”¨æˆ·çš„å§“å"</span>), <span class="hljs-comment">// describe ç”¨äºåœ¨æç¤ºè¯ä¸­è¯´æ˜å­—æ®µå«ä¹‰</span>
  <span class="hljs-attr">hobbies</span>: z.<span class="hljs-title function_">array</span>(z.<span class="hljs-title function_">string</span>()).<span class="hljs-title function_">describe</span>(<span class="hljs-string">"ç”¨æˆ·çš„çˆ±å¥½åˆ—è¡¨ï¼Œæ¯ä¸ªçˆ±å¥½æ˜¯å­—ç¬¦ä¸²"</span>)
});

<span class="hljs-comment">// 2. åˆ›å»º JSON è¾“å‡ºè§£æå™¨ï¼Œä¼ å…¥å®šä¹‰å¥½çš„ Schema</span>
<span class="hljs-keyword">const</span> parser = <span class="hljs-keyword">new</span> <span class="hljs-title class_">JsonOutputParser</span>({ <span class="hljs-attr">schema</span>: <span class="hljs-title class_">UserInfoSchema</span> });

<span class="hljs-comment">// 3. æ„å»ºæç¤ºæ¨¡æ¿ï¼šå‘Šè¯‰æ¨¡å‹éœ€è¦è¾“å‡ºç¬¦åˆ Schema çš„ JSON</span>
<span class="hljs-comment">// {format_instructions} ä¼šè¢«è‡ªåŠ¨æ›¿æ¢ä¸º parser ç”Ÿæˆçš„æ ¼å¼è¯´æ˜</span>
<span class="hljs-keyword">const</span> prompt = <span class="hljs-title class_">ChatPromptTemplate</span>.<span class="hljs-title function_">fromMessages</span>([
  [<span class="hljs-string">"system"</span>, <span class="hljs-string">"è¯·è§£æç”¨æˆ·è¾“å…¥çš„ä¿¡æ¯ï¼ŒæŒ‰ç…§ä»¥ä¸‹æ ¼å¼è¾“å‡º JSONï¼š\n{format_instructions}"</span>],
  [<span class="hljs-string">"human"</span>, <span class="hljs-string">"{input}"</span>]
]);

<span class="hljs-comment">// 4. ç”Ÿæˆæ ¼å¼è¯´æ˜ï¼ˆç”± parser è‡ªåŠ¨ç”Ÿæˆï¼Œå‘Šè¯‰æ¨¡å‹å…·ä½“è¦æ€ä¹ˆè¾“å‡ºï¼‰</span>
<span class="hljs-keyword">const</span> formatInstructions = parser.<span class="hljs-title function_">getFormatInstructions</span>();

<span class="hljs-comment">// 5. æ„å»ºå®Œæ•´çš„è°ƒç”¨é“¾ï¼šæç¤ºæ¨¡æ¿ â†’ æ¨¡å‹ â†’ è§£æå™¨</span>
<span class="hljs-keyword">const</span> chain = prompt.<span class="hljs-title function_">pipe</span>(model).<span class="hljs-title function_">pipe</span>(parser);

<span class="hljs-comment">// 6. æ‰§è¡Œè°ƒç”¨ï¼šè§£æç”¨æˆ·è¾“å…¥çš„ä¿¡æ¯</span>
<span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> chain.<span class="hljs-title function_">invoke</span>({
  <span class="hljs-attr">input</span>: <span class="hljs-string">"æˆ‘å«æå››ï¼Œå¹³æ—¶å–œæ¬¢æ‰“ç¯®çƒã€å¬éŸ³ä¹ï¼Œå¶å°”ä¹Ÿä¼šçˆ¬å±±"</span>,
  <span class="hljs-attr">format_instructions</span>: formatInstructions
});

<span class="hljs-comment">// 7. è¾“å‡ºç»“æœï¼ˆæ­¤æ—¶ result å·²ç»æ˜¯ç¬¦åˆ Schema çš„ JSON å¯¹è±¡ï¼‰</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"è§£æç»“æœï¼š"</span>, result);
</code></pre>
<p>ğŸ’¡ ä»£ç å…³é”®æ­¥éª¤è§£æï¼š</p>
<ul>
<li>æ­¥éª¤ 1ï¼šç”¨Â <code>z.object()</code>Â å®šä¹‰è¾“å‡ºå¿…é¡»åŒ…å«Â <code>name</code>ï¼ˆå­—ç¬¦ä¸²ï¼‰å’ŒÂ <code>hobbies</code>ï¼ˆå­—ç¬¦ä¸²æ•°ç»„ï¼‰ï¼Œ<code>describe</code>Â è®©æ¨¡å‹æ›´æ¸…æ¥šæ¯ä¸ªå­—æ®µçš„å«ä¹‰</li>
<li>æ­¥éª¤ 2ï¼š<code>JsonOutputParser</code>Â ç»‘å®š Schema åï¼Œä¼šè‡ªåŠ¨æ ¡éªŒæ¨¡å‹è¾“å‡ºæ˜¯å¦ç¬¦åˆè§„åˆ™</li>
<li>æ­¥éª¤ 3ï¼šæç¤ºæ¨¡æ¿ä¸­å¿…é¡»åŒ…å«Â <code>{format_instructions}</code>ï¼Œå¦åˆ™æ¨¡å‹ä¸çŸ¥é“è¦è¾“å‡º JSON</li>
<li>æ­¥éª¤ 6ï¼šè°ƒç”¨æ—¶ä¼ å…¥ç”¨æˆ·è¾“å…¥å’Œæ ¼å¼è¯´æ˜ï¼Œé“¾ä¼šè‡ªåŠ¨å®Œæˆã€Œæç¤ºç”Ÿæˆ â†’ æ¨¡å‹è°ƒç”¨ â†’ è§£ææ ¡éªŒã€å…¨æµç¨‹</li>
</ul>
<h4 data-id="heading-6">5. æ•ˆæœå±•ç¤º âœ¨</h4>
<p>å½“æˆ‘ä»¬è¾“å…¥ã€Œæˆ‘å«æå››ï¼Œå¹³æ—¶å–œæ¬¢æ‰“ç¯®çƒã€å¬éŸ³ä¹ï¼Œå¶å°”ä¹Ÿä¼šçˆ¬å±±ã€åï¼Œæ¨¡å‹ä¼šè¾“å‡ºæ ‡å‡†çš„ JSON ç»“æ„ï¼š</p>
<p>json</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"æå››"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"hobbies"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"æ‰“ç¯®çƒ"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"å¬éŸ³ä¹"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"çˆ¬å±±"</span><span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/de235635ce5349e98327c764933b1e6c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeGlhb3h1ZV8=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767492669&amp;x-signature=ulbyYeBv9EuFzW9wAFvzS2271Ek%3D" alt="QQ20251227-142706.png" loading="lazy"/></p>
<p>å†ä¹Ÿä¸ç”¨æ‰‹åŠ¨å¤„ç†å­—ç¬¦ä¸²åˆ‡å‰²æˆ–æ­£åˆ™åŒ¹é…äº†ï¼å¦‚æœæ¨¡å‹è¾“å‡ºä¸ç¬¦åˆæ ¼å¼ï¼ˆæ¯”å¦‚å°‘äº†Â <code>hobbies</code>Â å­—æ®µï¼‰ï¼Œ<code>JsonOutputParser</code>Â ä¼šç›´æ¥æŠ›å‡ºé”™è¯¯ï¼Œæ–¹ä¾¿æˆ‘ä»¬å¿«é€Ÿæ’æŸ¥é—®é¢˜ã€‚</p>
<h3 data-id="heading-7">ç¬¬äºŒéƒ¨åˆ†ï¼šLLM å†å²ç®¡ç†èƒ½åŠ› ğŸ“œ</h3>
<p>å¤§æ¨¡å‹çš„ API è°ƒç”¨å’Œ HTTP è¯·æ±‚ä¸€æ ·ï¼Œæœ¬è´¨æ˜¯ã€Œæ— çŠ¶æ€ã€çš„ â€”â€” æ¯æ¬¡è°ƒç”¨éƒ½æ˜¯ç‹¬ç«‹çš„ï¼Œæ¨¡å‹ä¸ä¼šè®°ä½ä¸Šä¸€æ¬¡çš„å¯¹è¯å†…å®¹ã€‚è¿™å°±å¯¼è‡´å¦‚æœä¸åšç‰¹æ®Šå¤„ç†ï¼Œæ¨¡å‹æ— æ³•è¿›è¡Œå¤šè½®å¯¹è¯ï¼ˆæ¯”å¦‚ä½ å…ˆå‘Šè¯‰å®ƒã€Œæˆ‘å«å¼ ä¸‰ã€ï¼Œå†é—®ã€Œæˆ‘å«ä»€ä¹ˆã€ï¼Œå®ƒä¼šå›ç­”ã€Œä¸çŸ¥é“ã€ï¼‰ã€‚</p>
<h4 data-id="heading-8">ä¸ºä»€ä¹ˆéœ€è¦å†å²ç®¡ç†ï¼Ÿä¸¾ä¸ªä¾‹å­ ğŸŒ°</h4>
<p>å¦‚æœç›´æ¥è°ƒç”¨æ¨¡å‹ï¼Œæ²¡æœ‰å†å²ç®¡ç†çš„è¯ï¼Œä¼šæ˜¯è¿™æ ·çš„æ•ˆæœï¼š</p>
<p>javascript</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-comment">// æ— å†å²ç®¡ç†çš„å•è½®è°ƒç”¨</span>
<span class="hljs-type">const</span> model = <span class="hljs-keyword">new</span> <span class="hljs-built_in">ChatDeepSeek</span>({ model: <span class="hljs-string">'deepseek-chat'</span> });

<span class="hljs-comment">// ç¬¬ä¸€è½®ï¼šå‘Šè¯‰æ¨¡å‹å§“å</span>
<span class="hljs-type">const</span> res1 = await model.<span class="hljs-built_in">invoke</span>([[<span class="hljs-string">"human"</span>, <span class="hljs-string">"æˆ‘å«å¼ ä¸‰"</span>]]);
console.<span class="hljs-built_in">log</span>(res1.content); <span class="hljs-comment">// è¾“å‡ºï¼šä½ å¥½ï¼Œå¼ ä¸‰ï¼å¾ˆé«˜å…´è®¤è¯†ä½ ~</span>

<span class="hljs-comment">// ç¬¬äºŒè½®ï¼šè¯¢é—®å§“åï¼ˆæ¨¡å‹å·²å¿˜è®°ï¼‰</span>
<span class="hljs-type">const</span> res2 = await model.<span class="hljs-built_in">invoke</span>([[<span class="hljs-string">"human"</span>, <span class="hljs-string">"æˆ‘å«ä»€ä¹ˆï¼Ÿ"</span>]]);
console.<span class="hljs-built_in">log</span>(res2.content); <span class="hljs-comment">// è¾“å‡ºï¼šæŠ±æ­‰ï¼Œæˆ‘ä¸çŸ¥é“ä½ å«ä»€ä¹ˆåå­—ï¼Œå¯ä»¥å‘Šè¯‰æˆ‘å—ï¼Ÿ</span>
</code></pre>
<p><strong>è¾“å‡ºç»“æœ:</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e176e31b6f5c45b590c86d22694852f4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeGlhb3h1ZV8=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767492669&amp;x-signature=LhAqoXFQ585%2Bp2n4nbcczDl0j7M%3D" alt="QQ20251228-094758.png" loading="lazy"/></p>
<p>è¿™æ˜¾ç„¶ä¸ç¬¦åˆæˆ‘ä»¬å¯¹ã€Œå¯¹è¯ã€çš„é¢„æœŸã€‚è§£å†³åŠæ³•å¾ˆç®€å•ï¼š<strong>ç»´æŠ¤ä¸€ä»½å¯¹è¯å†å²ï¼Œæ¯æ¬¡è°ƒç”¨æ¨¡å‹æ—¶éƒ½æŠŠå†å²è®°å½•ä¸€èµ·ä¼ ç»™å®ƒ</strong>ã€‚</p>
<h4 data-id="heading-9">1. å¯¼å…¥å†å²ç®¡ç†èƒ½åŠ›çš„å…³é”®æ¨¡å— ğŸ”§</h4>
<p>LangChain æä¾›äº†ä¸“é—¨çš„ç»„ä»¶æ¥ç®€åŒ–å†å²ç®¡ç†ï¼Œæ ¸å¿ƒæ¨¡å—å¦‚ä¸‹ï¼š</p>
<p>javascript</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æç¤ºæ¨¡æ¿å·¥å…·ï¼šç”¨äºæ„å»ºåŒ…å«å†å²è®°å½•çš„å¯¹è¯æç¤º</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ChatPromptTemplate</span>, <span class="hljs-title class_">MessagesPlaceholder</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@langchain/core/prompts'</span>;

<span class="hljs-comment">// å¸¦å†å²çš„å¯è¿è¡Œå¯¹è±¡ï¼šæ ¸å¿ƒç»„ä»¶ï¼Œè‡ªåŠ¨ç®¡ç†å¯¹è¯å†å²ä¸æ¨¡å‹è°ƒç”¨çš„ç»“åˆ</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">RunnableWithMessageHistory</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@langchain/core/runnables'</span>;

<span class="hljs-comment">// å†…å­˜å‹å†å²å­˜å‚¨ï¼šä¸´æ—¶ä¿å­˜å¯¹è¯å†å²ï¼ˆè¿›ç¨‹ç»“æŸåä¸¢å¤±ï¼‰</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">InMemoryChatMessageHistory</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@langchain/core/chat_history'</span>;
</code></pre>
<p>ğŸ“ æ¨¡å—ä½œç”¨è¯¦è§£ï¼š</p>
<ul>
<li><code>ChatPromptTemplate</code>ï¼šæ„å»ºå¯¹è¯æ¨¡æ¿ï¼Œæ”¯æŒç³»ç»Ÿæ¶ˆæ¯ã€ç”¨æˆ·æ¶ˆæ¯ã€AI æ¶ˆæ¯ç­‰å¤šè§’è‰²å®šä¹‰</li>
<li><code>MessagesPlaceholder</code>ï¼šæç¤ºæ¨¡æ¿ä¸­çš„ã€Œå†å²æ¶ˆæ¯å ä½ç¬¦ã€ï¼Œè¿è¡Œæ—¶ä¼šè‡ªåŠ¨æ›¿æ¢ä¸ºçœŸå®çš„å¯¹è¯å†å²</li>
<li><code>RunnableWithMessageHistory</code>ï¼šå°†åŸºç¡€å¯¹è¯é“¾ä¸å†å²å­˜å‚¨å…³è”ï¼Œè‡ªåŠ¨å®Œæˆã€ŒåŠ è½½å†å² â†’ æ‹¼æ¥æç¤º â†’ è°ƒç”¨æ¨¡å‹ â†’ ä¿å­˜å†å²ã€çš„å…¨æµç¨‹</li>
<li><code>InMemoryChatMessageHistory</code>ï¼šå†…å­˜ä¸­çš„å†å²å­˜å‚¨å®¹å™¨ï¼Œç®€å•æ˜“ç”¨ä½†ä¸é€‚åˆç”Ÿäº§ç¯å¢ƒï¼ˆæ•°æ®ä¸æŒä¹…åŒ–ï¼‰</li>
</ul>
<h4 data-id="heading-10">2. ä»£ç å®æˆ˜ï¼šå®ç°å¤šè½®å¯¹è¯è®°å¿†ğŸ“</h4>
<p>ä¸‹é¢æ˜¯åŸºäº DeepSeek æ¨¡å‹çš„å®Œæ•´å¤šè½®å¯¹è¯ä»£ç ï¼š</p>
<p>javascript</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ç¬¬ä¸€æ­¥ï¼šåˆå§‹åŒ– DeepSeek æ¨¡å‹</span>
<span class="hljs-keyword">const</span> model = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ChatDeepSeek</span>({
  <span class="hljs-attr">model</span>: <span class="hljs-string">'deepseek-chat'</span>, <span class="hljs-comment">// æŒ‡å®šæ¨¡å‹ç‰ˆæœ¬</span>
  <span class="hljs-attr">temperature</span>: <span class="hljs-number">0</span>, <span class="hljs-comment">// 0 è¡¨ç¤ºè¾“å‡ºæ›´ç¨³å®šã€ç¡®å®šï¼ˆé€‚åˆéœ€è¦å‡†ç¡®è®°å¿†çš„åœºæ™¯ï¼‰</span>
});

<span class="hljs-comment">// ç¬¬äºŒæ­¥ï¼šæ„å»ºåŒ…å«å†å²å ä½ç¬¦çš„æç¤ºæ¨¡æ¿</span>
<span class="hljs-keyword">const</span> prompt = <span class="hljs-title class_">ChatPromptTemplate</span>.<span class="hljs-title function_">fromMessages</span>([
  [<span class="hljs-string">"system"</span>, <span class="hljs-string">"ä½ æ˜¯ä¸€ä¸ªæœ‰è®°å¿†çš„åŠ©æ‰‹ï¼Œä¼šè®°ä½ä¹‹å‰çš„å¯¹è¯å†…å®¹"</span>], <span class="hljs-comment">// ç³»ç»Ÿè§’è‰²å®šä¹‰</span>
  <span class="hljs-keyword">new</span> <span class="hljs-title class_">MessagesPlaceholder</span>(<span class="hljs-string">"history"</span>), <span class="hljs-comment">// å†å²æ¶ˆæ¯å ä½ç¬¦ï¼ˆå…³é”®ï¼ä¼šè‡ªåŠ¨å¡«å……å†å²ï¼‰</span>
  [<span class="hljs-string">"human"</span>, <span class="hljs-string">"{input}"</span>] <span class="hljs-comment">// ç”¨æˆ·å½“å‰è¾“å…¥çš„å ä½ç¬¦</span>
]);

<span class="hljs-comment">// ç¬¬ä¸‰æ­¥ï¼šæ„å»ºåŸºç¡€å¯¹è¯é“¾ï¼ˆæç¤ºæ¨¡æ¿ â†’ æ¨¡å‹ï¼‰</span>
<span class="hljs-keyword">const</span> runnable = prompt.<span class="hljs-title function_">pipe</span>(model);

<span class="hljs-comment">// ç¬¬å››æ­¥ï¼šåˆå§‹åŒ–å†…å­˜å‹å†å²å­˜å‚¨ï¼ˆä¿å­˜å¯¹è¯è®°å½•ï¼‰</span>
<span class="hljs-keyword">const</span> messageHistory = <span class="hljs-keyword">new</span> <span class="hljs-title class_">InMemoryChatMessageHistory</span>();

<span class="hljs-comment">// ç¬¬äº”æ­¥ï¼šç”¨ RunnableWithMessageHistory åŒ…è£…å¯¹è¯é“¾ï¼Œå®ç°å†å²ç®¡ç†</span>
<span class="hljs-keyword">const</span> chain = <span class="hljs-keyword">new</span> <span class="hljs-title class_">RunnableWithMessageHistory</span>({
  <span class="hljs-attr">runnable</span>: runnable, <span class="hljs-comment">// åŸºç¡€å¯¹è¯é“¾</span>
  <span class="hljs-attr">getMessageHistory</span>: <span class="hljs-keyword">async</span> () =&gt; messageHistory, <span class="hljs-comment">// æä¾›å†å²å­˜å‚¨å®ä¾‹</span>
  <span class="hljs-attr">inputMessagesKey</span>: <span class="hljs-string">'input'</span>, <span class="hljs-comment">// ç»‘å®šç”¨æˆ·è¾“å…¥çš„å‚æ•°åï¼ˆå¯¹åº” prompt ä¸­çš„ {input}ï¼‰</span>
  <span class="hljs-attr">historyMessagesKey</span>: <span class="hljs-string">'history'</span> <span class="hljs-comment">// ç»‘å®šå†å²å ä½ç¬¦çš„åç§°ï¼ˆå¯¹åº” MessagesPlaceholder çš„ "history"ï¼‰</span>
});

<span class="hljs-comment">// ç¬¬å…­æ­¥ï¼šæ‰§è¡Œå¤šè½®å¯¹è¯</span>
<span class="hljs-comment">// ç¬¬ä¸€è½®ï¼šå‘ŠçŸ¥å§“åå’Œå–œå¥½</span>
<span class="hljs-keyword">const</span> res1 = <span class="hljs-keyword">await</span> chain.<span class="hljs-title function_">invoke</span>(
  { <span class="hljs-attr">input</span>: <span class="hljs-string">'æˆ‘å«å¼ ä¸‰ï¼Œå–œæ¬¢å–ç™½å…°åœ°'</span> }, <span class="hljs-comment">// ç”¨æˆ·è¾“å…¥</span>
  { <span class="hljs-attr">configurable</span>: { <span class="hljs-attr">sessionId</span>: <span class="hljs-string">'makefriend'</span> } } <span class="hljs-comment">// ä¼šè¯ IDï¼ˆç”¨äºåŒºåˆ†ä¸åŒå¯¹è¯ï¼‰</span>
);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'AI å›å¤ 1ï¼š'</span>, res1.<span class="hljs-property">content</span>); <span class="hljs-comment">// è¾“å‡ºï¼šä½ å¥½ï¼Œå¼ ä¸‰ï¼çœ‹æ¥ä½ å–œæ¬¢å–ç™½å…°åœ°å‘¢~</span>

<span class="hljs-comment">// ç¬¬äºŒè½®ï¼šéªŒè¯æ˜¯å¦è®°ä½å§“å</span>
<span class="hljs-keyword">const</span> res2 = <span class="hljs-keyword">await</span> chain.<span class="hljs-title function_">invoke</span>(
  { <span class="hljs-attr">input</span>: <span class="hljs-string">'æˆ‘å«ä»€ä¹ˆï¼Ÿ'</span> }, <span class="hljs-comment">// åŸºäºå†å²çš„æé—®</span>
  { <span class="hljs-attr">configurable</span>: { <span class="hljs-attr">sessionId</span>: <span class="hljs-string">'makefriend'</span> } } <span class="hljs-comment">// åŒä¸€ä¼šè¯ IDï¼Œå¤ç”¨å†å²</span>
);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'AI å›å¤ 2ï¼š'</span>, res2.<span class="hljs-property">content</span>); <span class="hljs-comment">// è¾“å‡ºï¼šä½ å«å¼ ä¸‰å‘€ï¼Œåˆšæ‰ä½ è¯´å–œæ¬¢å–ç™½å…°åœ°å‘¢~</span>
</code></pre>
<p>ğŸ’¡ æ ¸å¿ƒé€»è¾‘è§£æï¼š</p>
<ul>
<li>
<p>å½“è°ƒç”¨Â <code>chain.invoke()</code>Â æ—¶ï¼Œ<code>RunnableWithMessageHistory</code>Â ä¼šè‡ªåŠ¨åšä¸‰ä»¶äº‹ï¼š</p>
<ol>
<li>ä»Â <code>messageHistory</code>Â ä¸­åŠ è½½è¯¥Â <code>sessionId</code>Â å¯¹åº”çš„å†å²è®°å½•</li>
<li>å°†å†å²è®°å½•å¡«å……åˆ°Â <code>MessagesPlaceholder("history")</code>Â ä½ç½®ï¼Œä¸å½“å‰è¾“å…¥æ‹¼æ¥æˆå®Œæ•´æç¤º</li>
<li>è°ƒç”¨æ¨¡å‹åï¼Œè‡ªåŠ¨å°†ã€Œç”¨æˆ·è¾“å…¥ã€å’Œã€ŒAI å›å¤ã€ä¿å­˜åˆ°Â <code>messageHistory</code>Â ä¸­</li>
</ol>
</li>
<li>
<p><code>sessionId</code>Â çš„ä½œç”¨ï¼šå¦‚æœæœ‰å¤šä¸ªç”¨æˆ·åŒæ—¶å¯¹è¯ï¼Œç”¨Â <code>sessionId</code>Â åŒºåˆ†ä¸åŒä¼šè¯çš„å†å²è®°å½•ï¼ˆæ¯”å¦‚ç”¨æˆ· A å’Œç”¨æˆ· B åˆ†åˆ«æœ‰è‡ªå·±çš„Â <code>sessionId</code>ï¼‰</p>
</li>
</ul>
<h4 data-id="heading-11">3. æ•ˆæœå±•ç¤º âœ¨</h4>
<p>è¿è¡Œä¸Šè¿°ä»£ç åï¼Œæˆ‘ä»¬ä¼šå¾—åˆ°è¿™æ ·çš„è¾“å‡ºï¼š</p>
<pre><code class="hljs">AI å›å¤ 1ï¼šä½ å¥½ï¼Œå¼ ä¸‰ï¼çœ‹æ¥ä½ å–œæ¬¢å–ç™½å…°åœ°å‘¢~
AI å›å¤ 2ï¼šä½ å«å¼ ä¸‰å‘€ï¼Œåˆšæ‰ä½ è¯´å–œæ¬¢å–ç™½å…°åœ°å‘¢~
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6e08369f75bf493ba81701dc25022398~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeGlhb3h1ZV8=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767492669&amp;x-signature=3xl%2BwdIjQrlLZD4iMTYdArJgz%2Fk%3D" alt="QQ20251228-095706.png" loading="lazy"/></p>
<p>å¯ä»¥çœ‹åˆ°ï¼Œæ¨¡å‹æˆåŠŸè®°ä½äº†ç¬¬ä¸€è½®å¯¹è¯ä¸­æåˆ°çš„å§“åï¼Œå®ç°äº†å¸¦è®°å¿†çš„å¤šè½®å¯¹è¯ï¼</p>
<h3 data-id="heading-12">é¢è¯•å®˜å¯èƒ½ä¼šé—®è¿™äº›é—®é¢˜ ğŸ¤”</h3>
<ul>
<li><strong>1.å¦‚ä½•è®© LLM è¾“å‡ºå›ºå®šæ ¼å¼çš„ JSON æ•°æ®ï¼Ÿ</strong></li>
</ul>
<p>ç­”ï¼šä½¿ç”¨ LangChain çš„Â <code>JsonOutputParser</code>Â ç»“åˆ Zod åº“ã€‚å…ˆç”¨ Zod å®šä¹‰æ•°æ®ç»“æ„ï¼ˆSchemaï¼‰ï¼Œå†é€šè¿‡æç¤ºæ¨¡æ¿å‘Šè¯‰æ¨¡å‹æŒ‰ Schema è¾“å‡ºï¼Œæœ€åç”¨Â <code>JsonOutputParser</code>Â è§£æå¹¶æ ¡éªŒç»“æœï¼Œå½¢æˆã€Œå®šä¹‰è§„åˆ™â†’ä¼ è¾¾è§„åˆ™â†’æ ¡éªŒè§„åˆ™ã€çš„é—­ç¯ã€‚</p>
<ul>
<li><strong>2.InMemoryChatMessageHistory æœ‰ä»€ä¹ˆå±€é™æ€§ï¼Ÿç”Ÿäº§ç¯å¢ƒä¸­å¦‚ä½•æ›¿ä»£ï¼Ÿ</strong></li>
</ul>
<p>ç­”ï¼šå±€é™æ€§æ˜¯æ•°æ®ä¿å­˜åœ¨å†…å­˜ä¸­ï¼Œè¿›ç¨‹é‡å¯åä¸¢å¤±ï¼Œä¸”ä¸æ”¯æŒåˆ†å¸ƒå¼éƒ¨ç½²ã€‚ç”Ÿäº§ç¯å¢ƒå¯ä½¿ç”¨æŒä¹…åŒ–å­˜å‚¨ï¼Œæ¯”å¦‚Â <code>RedisChatMessageHistory</code>ï¼ˆåŸºäº Redisï¼‰ã€<code>MongoDBChatMessageHistory</code>ï¼ˆåŸºäº MongoDBï¼‰ç­‰ï¼Œè¿™äº›ç»„ä»¶ä¼šå°†å†å²è®°å½•å­˜å‚¨åˆ°æ•°æ®åº“ä¸­ã€‚</p>
<ul>
<li><strong>3.RunnableWithMessageHistory çš„æ ¸å¿ƒä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ</strong></li>
</ul>
<p>ç­”ï¼šå®ƒæ˜¯è¿æ¥ã€Œå¯¹è¯é“¾ã€å’Œã€Œå†å²å­˜å‚¨ã€çš„æ¡¥æ¢ï¼Œè‡ªåŠ¨å®Œæˆå†å²è®°å½•çš„åŠ è½½ã€æç¤ºæ‹¼æ¥ã€æ¨¡å‹è°ƒç”¨å’Œå†å²ä¿å­˜ï¼Œç®€åŒ–äº†å¤šè½®å¯¹è¯çš„å®ç°æµç¨‹ï¼Œæ— éœ€æ‰‹åŠ¨ç®¡ç†å†å²è®°å½•çš„ä¼ é€’ä¸å­˜å‚¨ã€‚</p>
<ul>
<li><strong>4.å¤šè½®å¯¹è¯ä¸­ï¼Œå¯¹è¯å†å²æ˜¯å¦‚ä½•ä¼ é€’ç»™æ¨¡å‹çš„ï¼Ÿ</strong></li>
</ul>
<p>ç­”ï¼šé€šè¿‡Â <code>MessagesPlaceholder</code>Â åœ¨æç¤ºæ¨¡æ¿ä¸­é¢„ç•™ä½ç½®ï¼Œ<code>RunnableWithMessageHistory</code>Â ä¼šåœ¨è°ƒç”¨æ—¶å°†å†å²è®°å½•å¡«å……åˆ°è¯¥ä½ç½®ï¼Œä¸ç³»ç»Ÿæ¶ˆæ¯ã€å½“å‰è¾“å…¥æ‹¼æ¥æˆå®Œæ•´æç¤ºï¼Œå†ä¼ é€’ç»™æ¨¡å‹ï¼Œè®©æ¨¡å‹ã€Œçœ‹åˆ°ã€æ‰€æœ‰å†å²å¯¹è¯ã€‚</p>
<ul>
<li><strong>5.å¦‚æœå¯¹è¯å†å²å¾ˆé•¿ï¼Œä¼šæœ‰ä»€ä¹ˆé—®é¢˜ï¼Ÿå¦‚ä½•è§£å†³ï¼Ÿ</strong></li>
</ul>
<p>ç­”ï¼šé—®é¢˜æ˜¯å¯èƒ½è¶…è¿‡æ¨¡å‹çš„ä¸Šä¸‹æ–‡çª—å£é•¿åº¦ï¼ˆToken é™åˆ¶ï¼‰ï¼Œå¯¼è‡´æ¨¡å‹æ— æ³•å¤„ç†ã€‚è§£å†³åŠæ³•ï¼šâ‘  ç”¨Â <code>ConversationSummaryMemory</code>Â å¯¹å†å²è¿›è¡Œæ€»ç»“å‹ç¼©ï¼›â‘¡ æŒ‰æ—¶é—´æˆ–é‡è¦æ€§æˆªæ–­å†å²è®°å½•ï¼›â‘¢ é€‰æ‹©æ”¯æŒæ›´é•¿ä¸Šä¸‹æ–‡çª—å£çš„æ¨¡å‹ã€‚</p>
<h3 data-id="heading-13">ç»“è¯­ ğŸŒŸ</h3>
<p>é€šè¿‡ LangChain çš„Â <code>JsonOutputParser</code>Â å’Œå†å²ç®¡ç†ç»„ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥è½»æ¾å®ç°ã€Œç»“æ„åŒ–è¾“å‡ºã€å’Œã€Œå¤šè½®å¯¹è¯è®°å¿†ã€è¿™ä¸¤ä¸ªæ ¸å¿ƒåŠŸèƒ½ã€‚ç»“æ„åŒ–è¾“å‡ºè®© AI ç»“æœæ›´æ˜“è¢«ç¨‹åºå¤„ç†ï¼Œå†å²ç®¡ç†è®©å¯¹è¯æ›´è‡ªç„¶æµç•… â€”â€” è¿™ä¸¤è€…ç»“åˆèµ·æ¥ï¼Œèƒ½å¤§å¹…æå‡ AI åº”ç”¨çš„å®ç”¨æ€§å’Œç”¨æˆ·ä½“éªŒã€‚</p>
<p>å¸Œæœ›è¿™ç¯‡æ–‡ç« èƒ½å¸®ä½ æŒæ¡ LangChain çš„è¿›é˜¶æŠ€å·§ï¼Œå¿«å»åŠ¨æ‰‹å®è·µå§ï¼å¦‚æœæœ‰ä»»ä½•é—®é¢˜ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºäº¤æµå“¦ï½ğŸš€</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æˆ‘ç”¨AIå†™äº†ä¸ªå°ç¨‹åºï¼Œå´è¢«äººè¯´æ²¡æœ‰åº•çº¿â€¦]]></title>    <link>https://juejin.cn/post/7588152122187137078</link>    <guid>https://juejin.cn/post/7588152122187137078</guid>    <pubDate>2025-12-28T02:23:26.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588152122187137078" data-draft-id="7588004376868241443" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æˆ‘ç”¨AIå†™äº†ä¸ªå°ç¨‹åºï¼Œå´è¢«äººè¯´æ²¡æœ‰åº•çº¿â€¦"/> <meta itemprop="keywords" content="å¾®ä¿¡å°ç¨‹åº,å‰ç«¯,äº¤äº’è®¾è®¡"/> <meta itemprop="datePublished" content="2025-12-28T02:23:26.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤§å¤§èŠ±çŒ«"/> <meta itemprop="url" content="https://juejin.cn/user/3051900006309096"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æˆ‘ç”¨AIå†™äº†ä¸ªå°ç¨‹åºï¼Œå´è¢«äººè¯´æ²¡æœ‰åº•çº¿â€¦
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3051900006309096/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤§å¤§èŠ±çŒ«
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-28T02:23:26.000Z" title="Sun Dec 28 2025 02:23:26 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-28
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¤§å®¶å¥½ï¼</h2>
<p>ä»Šå¤©æƒ³å’Œå¤§å®¶åˆ†äº«ä¸€ä¸‹æˆ‘ç”¨AIå¼€å‘çš„ä¸€æ¬¾å¾®ä¿¡å°ç¨‹åºâ€”â€”ã€<strong>ç ´å†°ç¥å™¨</strong>ã€‘ã€‚</p>
<p>ä½œä¸ºä¸€ä¸ªå–œæ¬¢å’Œæœ‹å‹èšä¼šä½†åˆç»å¸¸<strong>é¢ä¸´â€œå†·åœºâ€å°´å°¬çš„iäºº</strong>ï¼Œæˆ‘ä¸€ç›´åœ¨å¯»æ‰¾ä¸€æ¬¾èƒ½å¤Ÿæ´»è·ƒèšä¼šæ°›å›´çš„å°ç¨‹åºã€‚ä½†å¸‚é¢ä¸Šçš„åº”ç”¨è¦ä¹ˆåšå·¥ç²—ç³™åŠŸèƒ½å•ä¸€ï¼Œè¦ä¹ˆä¸€å †å¹¿å‘Šæ²¡æ³•ç©ã€‚äºæ˜¯ï¼Œæˆ‘å†³å®šè‡ªå·±åŠ¨æ‰‹ï¼ˆå…¶å®åªåŠ¨äº†å˜´ï¼Œæ˜¯AIåŠ¨çš„æ‰‹ï¼‰ï¼Œå¼€å‘ä¸€æ¬¾å¥½ç”¨ã€åŠŸèƒ½ä¸°å¯Œçš„â€œç ´å†°ç¥å™¨â€ã€‚</p>
<p><strong>å…ˆæ‰£ä¸€ä¸‹æ–‡ç« æ ‡é¢˜</strong>ï¼Œä¸ºä»€ä¹ˆä¼šè¢«äººè¯´æ²¡æœ‰åº•çº¿ï¼Œä¸»è¦è¿˜æ˜¯ä¸€äº›äººå¯¹çœŸå¿ƒè¯å¤§å†’é™©çš„åˆ»æ¿å°è±¡å§ï¼Œæ˜¯æ·»åŠ äº†ä¸€äº›äº²å¯†äº’åŠ¨å’Œæƒ…ä¾£æ¨¡å¼ï¼Œä¸è¿‡ä¹Ÿæ˜¯å¤§å®¶å„å–æ‰€éœ€ï¼Œç‰©å°½å…¶ç”¨å§ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1dcc864098bb4eabaff850a4742a6075~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5aSn6Iqx54yr:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767493405&amp;x-signature=wI6Zccj5ZLhChqoWXmKH7czfOpk%3D" alt="image.png" loading="lazy"/></p>
<hr/>
<h3 data-id="heading-1">å¥½äº†ï¼Œå…ˆç»™å¤§å®¶å±•ç¤ºä¸€ä¸‹è¿™æ¬¾å°ç¨‹åºçš„ä¸»è¦ç•Œé¢</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b22ee3a2501e47d3aa1307d768d40cd6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5aSn6Iqx54yr:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767493405&amp;x-signature=2FHeH3X3jGx2PvxGe2IflU8CCf0%3D" alt="WechatIMG67.jpg" loading="lazy"/></p>
<h6 data-id="heading-2">å¯æƒœæ˜é‡‘è¿™é‡Œå‘è§†é¢‘ä¸æ˜¯å¾ˆæ–¹ä¾¿ï¼Œæ„Ÿå…´è¶£çš„æœ‹å‹å¯ä»¥ç§»æ­¥å¾®ä¿¡å°ç¨‹åºä½“éªŒä¸€ä¸‹ã€‚</h6>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/53abd9968f354618bd0835fc4f33ea98~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5aSn6Iqx54yr:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767493405&amp;x-signature=sPoMY1Ko%2BkzkxeeYh8E0eSFOIMU%3D" alt="card_qrcode.jpg" loading="lazy"/></p>
<h3 data-id="heading-3">ğŸ’¡ å¼€å‘åˆè¡·</h3>
<p>åœ¨æœ‹å‹èšä¼šã€å›¢å»ºç ´å†°æˆ–è€…KTVå”±æ­Œæ—¶ï¼Œæˆ‘ä»¬ç»å¸¸éœ€è¦ä¸€äº›å°é“å…·æ¥æ´»è·ƒæ°”æ°›ã€‚æ¯”å¦‚ï¼š</p>
<ul>
<li>æƒ³ç©çœŸå¿ƒè¯å¤§å†’é™©ï¼Œä½†æƒ³ä¸å‡ºå¥½é¢˜ç›®ï¼Ÿ</li>
<li>æƒ³ç©æ‘‡éª°å­ï¼Œä½†æ‰¾ä¸åˆ°å®ä½“éª°å­ï¼Ÿ</li>
<li>æƒ³æŠ½æ‰‘å…‹ç‰Œæ¯”å¤§å°ï¼Œä½†æ²¡å¸¦ç‰Œï¼Ÿ</li>
<li>å–é…’æ—¶æƒ³ç©ä¸ªç®€å•çš„çŒœæ•°å­—æ¸¸æˆï¼Ÿ
ã€ç ´å†°ç¥å™¨ã€‘å°±æ˜¯ä¸ºäº†è§£å†³è¿™äº›åœºæ™¯è€Œç”Ÿçš„ã€‚</li>
</ul>
<h3 data-id="heading-4">ğŸš€ åŠŸèƒ½äº®ç‚¹ä»‹ç»</h3>
<h4 data-id="heading-5">1. çœŸå¿ƒè¯å¤§å†’é™© (Truth or Dare)</h4>
<p>è¿™æ˜¯å°ç¨‹åºçš„æ ¸å¿ƒåŠŸèƒ½ã€‚ä¸ºäº†ä¿è¯é¢˜ç›®çš„è¶£å‘³æ€§å’Œå¤šæ ·æ€§ï¼Œæˆ‘æ¥å…¥äº† LeanCloud ä½œä¸ºåç«¯æ•°æ®åº“ï¼Œè¿™æ ·å¯ä»¥åŠ¨æ€æ›´æ–°é¢˜ç›®åº“ï¼Œè€Œä¸éœ€è¦é¢‘ç¹å‘ç‰ˆã€‚ï¼ˆå·²ç»å½•å…¥äº†å‡ ç™¾é“é¢˜äº†ï¼‰</p>
<ul>
<li>å¤šæ¨¡å¼æ”¯æŒ ï¼šä¸ä»…æœ‰ä¼ ç»Ÿçš„â€œçœŸå¿ƒè¯â€å’Œâ€œå¤§å†’é™©â€ï¼Œæˆ‘è¿˜åŠ å…¥äº†â€œè°æ¥å–â€ã€â€œå¥½è¿å¡â€ã€â€œäº²å¯†äº’åŠ¨â€ä»¥åŠâ€œæƒ…ä¾£æ¨¡å¼â€œã€‚</li>
<li>è‡ªå®šä¹‰æ¦‚ç‡ ï¼šä¸ºäº†æ»¡è¶³ä¸åŒåœºåˆçš„è¯‰æ±‚å·®å¼‚ï¼Œå¯ä»¥è‡ªç”±è°ƒæ•´æ¯ç§æ¨¡å¼çš„å‡ºç°æ¦‚ç‡ã€‚</li>
<li>äº¤äº’ä½“éªŒ ï¼šå¡ç‰‡åˆ‡æ¢ä½¿ç”¨äº†å¹³æ»‘çš„åŠ¨ç”»æ•ˆæœï¼Œé…åˆæ‰‹æœºçš„éœ‡åŠ¨åé¦ˆï¼ŒæŠ½å¡çš„æ„Ÿè§‰éå¸¸çœŸå®ã€‚</li>
</ul>
<h4 data-id="heading-6">2. æ‘‡éª°å­ (Dice)</h4>
<p>æ¨¡æ‹ŸçœŸå®çš„éª°å­ä½“éªŒã€‚</p>
<ul>
<li>å¤šéª°å­æ”¯æŒ ï¼šæœ€å¤šæ”¯æŒ 5 é¢—éª°å­åŒæ—¶æ‘‡åŠ¨ã€‚</li>
<li>çœŸå®æ‰‹æ„Ÿ ï¼šæ”¯æŒâ€œé•¿æŒ‰è“„åŠ›â€å’Œâ€œç‚¹å‡»â€ä¸¤ç§æ¨¡å¼ï¼Œé…åˆéœ‡åŠ¨åé¦ˆï¼Œè¿˜åŸçœŸå®çš„åšå¼ˆæ„Ÿã€‚</li>
<li>é®ç½©æ¨¡å¼ ï¼šæ‘‡å®Œåé»˜è®¤å¯ä»¥è¦†ç›–ç»“æœï¼Œå¢åŠ ç¥ç§˜æ„Ÿï¼Œå¤§å®¶çŒœå®Œåå†æ­æ™“ã€‚</li>
</ul>
<h4 data-id="heading-7">3. æ‰‘å…‹ç‰Œ (Poker)</h4>
<p>ä¸€ä¸ªæç®€çš„æŠ½ç‰Œå·¥å…·ã€‚</p>
<ul>
<li>è‡ªå®šä¹‰å¼ æ•° ï¼šé»˜è®¤æŠ½3å¼ ï¼Œä¹Ÿå¯ä»¥æ ¹æ®è§„åˆ™è°ƒæ•´ã€‚</li>
<li>å¤§å°ç‹å¼€å…³ ï¼šæ”¯æŒé…ç½®æ˜¯å¦åŒ…å«å¤§å°ç‹ã€‚</li>
</ul>
<h4 data-id="heading-8">4. çŒœæ•°å­— (Guess Number)</h4>
<p>ç»å…¸çš„â€œé«˜ä½çŒœâ€æ¸¸æˆï¼Œéå¸¸é€‚åˆä½œä¸ºé…’æ¡Œæƒ©ç½šæ¸¸æˆã€‚</p>
<ul>
<li>èŒƒå›´è®¾å®š ï¼šæ”¯æŒ 1-99 å’Œ 1-999 ä¸¤ç§éš¾åº¦ã€‚</li>
<li>èƒœåˆ©ç‰¹æ•ˆ ï¼šçŒœä¸­æ•°å­—åä¼šæœ‰å…¨å±çƒŸèŠ±ç‰¹æ•ˆï¼Œåº†ç¥èƒœåˆ©ï¼ˆæˆ–è€…è¿æ¥æƒ©ç½šï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-9">ğŸ›  æŠ€æœ¯å®ç°åˆ†äº«</h3>
<h4 data-id="heading-10">0. å¼€å‘å·¥å…·é€‰æ‹©</h4>
<ul>
<li>AIå¼€å‘å·¥å…·æˆ‘é€‰ç”¨äº†TRAEï¼Œç¡®å®åœ¨å›½å†…ç”¨èµ·æ¥æ–¹ä¾¿å¤ªå¤šäº†ã€‚</li>
<li>å¤§æ¨¡å‹æˆ‘é€‰æ‹©è°·æ­Œçš„gemini3proï¼Œå®ƒå®ç°UIçš„èƒ½åŠ›è®©æˆ‘çœ¼å‰ä¸€äº®ï¼Œå·²ç»ç¦»ä¸å¼€äº†ã€‚</li>
</ul>
<h4 data-id="heading-11">1. æŠ€æœ¯æ ˆé€‰æ‹©</h4>
<ul>
<li>å‰ç«¯ ï¼šåŸç”Ÿå¾®ä¿¡å°ç¨‹åº (WXML, WXSS, JS)ã€‚åŸç”Ÿå¼€å‘è™½ç„¶ç¹çï¼Œä½†åœ¨æ€§èƒ½å’Œä½“éªŒä¸Šæ˜¯æœ€ä¼˜çš„ï¼Œç‰¹åˆ«æ˜¯å¯¹äºéœ€è¦é¢‘ç¹åŠ¨ç”»äº¤äº’çš„æ¸¸æˆç±»åº”ç”¨ã€‚</li>
<li>åç«¯ ï¼š LeanCloud (Serverless) ã€‚å¯¹äºè¿™ç§è½»é‡çº§çš„å°ç¨‹åºï¼ŒServerless æ˜¯ç»ä½³é€‰æ‹©ã€‚æˆ‘ä¸éœ€è¦ç»´æŠ¤æœåŠ¡å™¨ï¼Œåªéœ€è¦é€šè¿‡ API è·å–é¢˜ç›®æ•°æ®ï¼Œçœå¿ƒçœåŠ›ã€‚</li>
<li>å›½é™…åŒ– ï¼šå†…ç½®äº† i18n æ¨¡å—ï¼Œä¸ºæœªæ¥çš„å¤šè¯­è¨€æ”¯æŒåšå¥½äº†å‡†å¤‡ã€‚</li>
</ul>
<h4 data-id="heading-12">2. æ²‰æµ¸å¼ UI è®¾è®¡</h4>
<p>ä¸ºäº†æ‰“é€ â€œå¤œé—´æ¨¡å¼â€çš„èšä¼šæ°›å›´ï¼Œæˆ‘å°†æ•´ä½“ UI é£æ ¼å®šè°ƒä¸ºæ·±è‰²ç³»ã€‚</p>
<ul>
<li>è‡ªå®šä¹‰å¯¼èˆªæ  ï¼šä¸ºäº†æœ€å¤§åŒ–å¯è§†é¢ç§¯å’Œç»Ÿä¸€è§†è§‰é£æ ¼ï¼Œæˆ‘å–æ¶ˆäº†åŸç”Ÿå¯¼èˆªæ ï¼Œå®ç°äº†è‡ªå®šä¹‰ Navigation Barï¼Œå®Œç¾é€‚é…å„ç§åˆ˜æµ·å±æœºå‹ã€‚</li>
<li>è§¦æ„Ÿåé¦ˆ ï¼šåœ¨ç”¨æˆ·äº¤äº’çš„å…³é”®èŠ‚ç‚¹ï¼ˆå¦‚æŠ½å¡ã€æ‘‡éª°å­ã€æŒ‰é’®ç‚¹å‡»ï¼‰éƒ½åŠ å…¥äº† wx.vibrateShortçš„è½»å¾®éœ‡åŠ¨åé¦ˆï¼Œæå‡æ“ä½œçš„ç¡®è®¤æ„Ÿã€‚</li>
</ul>
<h4 data-id="heading-13">3. åŠ¨ç”»ä¸æ€§èƒ½</h4>
<ul>
<li>Canvas çƒŸèŠ± ï¼šçŒœæ•°å­—èƒœåˆ©æ—¶çš„çƒŸèŠ±æ•ˆæœä½¿ç”¨äº† Canvas ç»˜åˆ¶ï¼Œä¿è¯äº†æµç•…åº¦ã€‚</li>
<li>CSS3 åŠ¨ç”» ï¼šå¡ç‰‡çš„ç¿»è½¬ã€å…¥åœºåŠ¨ç”»ä¸»è¦ä¾èµ– CSS3 transform å’Œ transition ï¼Œå‡å°‘ JS çº¿ç¨‹çš„å‹åŠ›ã€‚</li>
<li>ç²’å­çˆ†ç‚¸æ•ˆæœï¼šå¼•å…¥äº†three.jsçš„åº“ï¼Œå¤ªå¥½ç”¨äº†åªèƒ½è¯´ï¼</li>
</ul>
<h3 data-id="heading-14">ğŸ”® æœªæ¥å±•æœ›</h3>
<p>ç›®å‰çš„ã€ç ´å†°ç¥å™¨ã€‘å·²ç»èƒ½æ»¡è¶³åŸºç¡€çš„èšä¼šéœ€æ±‚ï¼Œä½†æˆ‘è¿˜æœ‰å¾ˆå¤šæƒ³æ³•ï¼š</p>
<ul>
<li>æ›´å¤šæ¸¸æˆ ï¼šæ¯”å¦‚â€œè°æ˜¯å§åº•â€ã€â€œä½ ç”»æˆ‘çŒœâ€ç­‰å¤šäººåœ¨çº¿äº’åŠ¨æ¸¸æˆã€‚</li>
<li>é¢˜åº“å…±å»º ï¼šå…è®¸ç”¨æˆ·æäº¤è‡ªå·±çš„çœŸå¿ƒè¯å¤§å†’é™©é¢˜ç›®ã€å®¡æ ¸é¢˜ç›®ã€è‡ªå®šä¹‰å¡ç»„ç­‰ã€‚</li>
<li>è”æœºæ¨¡å¼ ï¼šä¸ä»…ä»…æ˜¯çº¿ä¸‹ä¼ æ‰‹æœºç©ï¼Œæœªæ¥å¸Œæœ›èƒ½æ”¯æŒé¢å¯¹é¢å»ºæˆ¿ï¼Œå¤§å®¶åœ¨è‡ªå·±çš„æ‰‹æœºä¸Šæ“ä½œã€‚</li>
</ul>
<h5 data-id="heading-15">æ„Ÿè°¢å¤§å®¶ä½¿ç”¨ã€ç ´å†°ç¥å™¨ã€‘ï¼Œå¦‚æœä½ æœ‰ä»»ä½•å»ºè®®æˆ–å‘ç°äº† Bugï¼Œæ¬¢è¿åœ¨å°ç¨‹åºé‡Œç»™æˆ‘ç•™è¨€ï¼</h5></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[CryptoAiAdminé¡¹ç›®æ•°æ®åº“è¡¨è‡ªåŠ¨åˆ›å»ºå’Œåˆå§‹åŒ–]]></title>    <link>https://juejin.cn/post/7588086766248706099</link>    <guid>https://juejin.cn/post/7588086766248706099</guid>    <pubDate>2025-12-27T12:55:57.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588086766248706099" data-draft-id="7588067055482355721" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="CryptoAiAdminé¡¹ç›®æ•°æ®åº“è¡¨è‡ªåŠ¨åˆ›å»ºå’Œåˆå§‹åŒ–"/> <meta itemprop="keywords" content="åç«¯,Python,FastAPI"/> <meta itemprop="datePublished" content="2025-12-27T12:55:57.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="åˆ›æ–°æŠ€æœ¯é˜"/> <meta itemprop="url" content="https://juejin.cn/user/4361127086785497"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            CryptoAiAdminé¡¹ç›®æ•°æ®åº“è¡¨è‡ªåŠ¨åˆ›å»ºå’Œåˆå§‹åŒ–
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4361127086785497/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    åˆ›æ–°æŠ€æœ¯é˜
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-27T12:55:57.000Z" title="Sat Dec 27 2025 12:55:57 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">1. æ¦‚è¿°</h2>
<p>æœ¬ç³»ç»Ÿé‡‡ç”¨äº†åŸºäº SQLAlchemy 2.0 çš„å¼‚æ­¥æ•°æ®åº“æ¶æ„ï¼Œå®ç°äº†è‡ªåŠ¨åŒ–çš„æ•°æ®åº“è¡¨åˆ›å»ºå’ŒåŸºç¡€æ•°æ®åˆå§‹åŒ–ã€‚æ•´ä¸ªåˆå§‹åŒ–è¿‡ç¨‹ç”± <code>InitializeData</code> ç±»ï¼ˆä½äº <code>app/scripts/initialize.py</code>ï¼‰ç»Ÿä¸€ç®¡ç†ï¼Œéµå¾ª"å…ˆåˆ›å»ºè¡¨ç»“æ„ï¼Œå†åˆå§‹åŒ–æ•°æ®"çš„åŸåˆ™ï¼Œç¡®ä¿æ•°æ®å®Œæ•´æ€§å’Œä¾èµ–å…³ç³»æ­£ç¡®æ€§ã€‚</p>
<h2 data-id="heading-1">2. æ•°æ®åº“è¿æ¥é…ç½®</h2>
<h3 data-id="heading-2">2.1 è¿æ¥ç®¡ç†</h3>
<p>ç³»ç»Ÿä½¿ç”¨ <code>app/core/database.py</code> ä¸­çš„å‡½æ•°åˆ›å»ºæ•°æ®åº“è¿æ¥ï¼š</p>
<ul>
<li><code>create_engine_and_session()</code>: åˆ›å»ºåŒæ­¥æ•°æ®åº“å¼•æ“å’Œä¼šè¯å·¥å‚</li>
<li><code>create_async_engine_and_session()</code>: åˆ›å»ºå¼‚æ­¥æ•°æ®åº“å¼•æ“å’Œä¼šè¯å·¥å‚</li>
</ul>
<p>è¿™äº›å‡½æ•°ä»é…ç½®æ–‡ä»¶ä¸­è¯»å–æ•°æ®åº“è¿æ¥å‚æ•°ï¼Œæ”¯æŒå¤šç§æ•°æ®åº“ç±»å‹ï¼ˆSQLiteã€MySQLã€PostgreSQLï¼‰ã€‚</p>
<h3 data-id="heading-3">2.2 æ ¸å¿ƒé…ç½®å‚æ•°</h3>
<ul>
<li>æ•°æ®åº“è¿æ¥URL: <code>settings.DB_URI</code>ï¼ˆåŒæ­¥ï¼‰å’Œ <code>settings.ASYNC_DB_URI</code>ï¼ˆå¼‚æ­¥ï¼‰</li>
<li>è¿æ¥æ± é…ç½®: åŒ…æ‹¬è¿æ¥æ± å¤§å°ã€å›æ”¶æ—¶é—´ã€é¢„æ£€æŸ¥ç­‰</li>
<li>æ—¥å¿—é…ç½®: æ§åˆ¶æ˜¯å¦è¾“å‡ºSQLè¯­å¥</li>
</ul>
<h2 data-id="heading-4">3. æ¨¡å‹å®šä¹‰æ¶æ„</h2>
<h3 data-id="heading-5">3.1 åŸºç¡€æ¨¡å‹è®¾è®¡</h3>
<p>ç³»ç»Ÿé‡‡ç”¨äº†Mixinæ¨¡å¼å®ç°æ¨¡å‹çš„å¤ç”¨å’Œæ‰©å±•ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MappedBase</span>(AsyncAttrs, DeclarativeBase):
    __abstract__: <span class="hljs-built_in">bool</span> = <span class="hljs-literal">True</span>

<span class="hljs-keyword">class</span> <span class="hljs-title class_">ModelMixin</span>(<span class="hljs-title class_ inherited__">MappedBase</span>):
    __abstract__: <span class="hljs-built_in">bool</span> = <span class="hljs-literal">True</span>
    <span class="hljs-comment"># æä¾›é€šç”¨å­—æ®µï¼šidã€uuidã€statusã€descriptionã€created_timeã€updated_time</span>

<span class="hljs-keyword">class</span> <span class="hljs-title class_">UserMixin</span>(<span class="hljs-title class_ inherited__">MappedBase</span>):
    __abstract__: <span class="hljs-built_in">bool</span> = <span class="hljs-literal">True</span>
    <span class="hljs-comment"># æä¾›ç”¨æˆ·å®¡è®¡å­—æ®µï¼šcreated_idã€updated_id</span>
</code></pre>
<h3 data-id="heading-6">3.2 ä¸šåŠ¡æ¨¡å‹å®šä¹‰</h3>
<p>ä¸šåŠ¡æ¨¡å‹é€šè¿‡ç»§æ‰¿åŸºç¡€æ¨¡å‹å®ç°ï¼Œä¾‹å¦‚ç”¨æˆ·æ¨¡å‹ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">UserModel</span>(ModelMixin, UserMixin):
    __tablename__: <span class="hljs-built_in">str</span> = <span class="hljs-string">"sys_user"</span>
    __table_args__: <span class="hljs-built_in">dict</span>[<span class="hljs-built_in">str</span>, <span class="hljs-built_in">str</span>] = ({<span class="hljs-string">'comment'</span>: <span class="hljs-string">'ç”¨æˆ·è¡¨'</span>})
    
    username: Mapped[<span class="hljs-built_in">str</span>] = mapped_column(String(<span class="hljs-number">32</span>), nullable=<span class="hljs-literal">False</span>, unique=<span class="hljs-literal">True</span>, comment=<span class="hljs-string">"ç”¨æˆ·å/ç™»å½•è´¦å·"</span>)
    password: Mapped[<span class="hljs-built_in">str</span>] = mapped_column(String(<span class="hljs-number">255</span>), nullable=<span class="hljs-literal">False</span>, comment=<span class="hljs-string">"å¯†ç å“ˆå¸Œ"</span>)
    <span class="hljs-comment"># å…¶ä»–å­—æ®µ...</span>
    
    <span class="hljs-comment"># å…³è”å…³ç³»</span>
    dept: Mapped[<span class="hljs-string">"DeptModel | None"</span>] = relationship(back_populates=<span class="hljs-string">"users"</span>, lazy=<span class="hljs-string">"selectin"</span>)
    roles: Mapped[<span class="hljs-built_in">list</span>[<span class="hljs-string">"RoleModel"</span>]] = relationship(secondary=<span class="hljs-string">"sys_user_roles"</span>, back_populates=<span class="hljs-string">"users"</span>, lazy=<span class="hljs-string">"selectin"</span>)
</code></pre>
<h2 data-id="heading-7">4. è¡¨åˆ›å»ºè¿‡ç¨‹</h2>
<h3 data-id="heading-8">4.1 æ¨¡å‹åŠ è½½ä¸ä¾èµ–æ’åº</h3>
<p>åœ¨ <code>InitializeData</code> ç±»ä¸­ï¼Œæ¨¡å‹æŒ‰ç…§ä¾èµ–å…³ç³»æ’åºï¼š</p>
<pre><code class="hljs language-python" lang="python">self.prepare_init_models = [
    MenuModel,
    ParamsModel,
    DeptModel,
    RoleModel,
    DictTypeModel,
    DictDataModel,
    PositionModel,
    UserModel,
    UserRolesModel,
]
</code></pre>
<h3 data-id="heading-9">4.2 è¡¨åˆ›å»ºå®ç°</h3>
<p>è¡¨åˆ›å»ºé€šè¿‡ SQLAlchemy çš„ <code>metadata.create_all()</code> æ–¹æ³•å®ç°ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init_create_table</span>(<span class="hljs-params">self</span>) -&gt; <span class="hljs-literal">None</span>:
    <span class="hljs-keyword">try</span>:
        <span class="hljs-keyword">async</span> <span class="hljs-keyword">with</span> async_engine.begin() <span class="hljs-keyword">as</span> conn:
            <span class="hljs-keyword">await</span> conn.run_sync(MappedBase.metadata.create_all)
        log.info(<span class="hljs-string">"âœ…ï¸ æ•°æ®åº“è¡¨ç»“æ„åˆå§‹åŒ–å®Œæˆ"</span>)
    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
        log.error(<span class="hljs-string">f"âŒï¸ æ•°æ®åº“è¡¨ç»“æ„åˆå§‹åŒ–å¤±è´¥: <span class="hljs-subst">{<span class="hljs-built_in">str</span>(e)}</span>"</span>)
        <span class="hljs-keyword">raise</span>
</code></pre>
<p>è¿™ä¸ªæ–¹æ³•ä¼šè‡ªåŠ¨åˆ›å»ºæ‰€æœ‰ç»§æ‰¿è‡ª <code>MappedBase</code> çš„æ¨¡å‹å¯¹åº”çš„æ•°æ®åº“è¡¨ï¼Œå¹¶å¤„ç†è¡¨ä¹‹é—´çš„å¤–é”®å…³ç³»ã€‚</p>
<h2 data-id="heading-10">5. æ•°æ®åˆå§‹åŒ–è¿‡ç¨‹</h2>
<h3 data-id="heading-11">5.1 åˆå§‹åŒ–æ•°æ®å­˜å‚¨</h3>
<p>åŸºç¡€æ•°æ®å­˜å‚¨åœ¨ <code>app/scripts/data/</code> ç›®å½•ä¸‹çš„ JSON æ–‡ä»¶ä¸­ï¼Œæ¯ä¸ªæ–‡ä»¶å¯¹åº”ä¸€ä¸ªè¡¨ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">data</span>/
â”œâ”€â”€ sys_dept.json
â”œâ”€â”€ sys_dict_data.json
â”œâ”€â”€ sys_dict_type.json
â”œâ”€â”€ sys_menu.json
â”œâ”€â”€ sys_param.json
â”œâ”€â”€ sys_role.json
â”œâ”€â”€ sys_user.json
â””â”€â”€ sys_user_roles.json
</code></pre>
<h3 data-id="heading-12">5.2 æ•°æ®åŠ è½½ä¸æ’å…¥</h3>
<p>æ•°æ®åˆå§‹åŒ–è¿‡ç¨‹åŒ…æ‹¬ä»¥ä¸‹æ­¥éª¤ï¼š</p>
<ol>
<li><strong>æ£€æŸ¥è¡¨æ˜¯å¦å·²æœ‰æ•°æ®</strong>ï¼šé¿å…é‡å¤åˆå§‹åŒ–</li>
<li><strong>è¯»å–åˆå§‹åŒ–æ•°æ®æ–‡ä»¶</strong>ï¼šä» JSON æ–‡ä»¶ä¸­åŠ è½½æ•°æ®</li>
<li><strong>ç‰¹æ®Šæ•°æ®å¤„ç†</strong>ï¼š
<ul>
<li>åµŒå¥—æ•°æ®å¤„ç†ï¼ˆå¦‚éƒ¨é—¨å’Œèœå•çš„æ ‘å½¢ç»“æ„ï¼‰</li>
<li>å…³è”æ•°æ®å¤„ç†ï¼ˆå¦‚å­—å…¸æ•°æ®ä¸å­—å…¸ç±»å‹çš„å…³è”ï¼‰</li>
</ul>
</li>
<li><strong>æ‰¹é‡æ’å…¥æ•°æ®</strong>ï¼šä½¿ç”¨ <code>db.add_all()</code> å’Œ <code>db.flush()</code> æ‰¹é‡æ’å…¥</li>
</ol>
<h3 data-id="heading-13">5.3 ç‰¹æ®Šæ•°æ®å¤„ç†å®ç°</h3>
<h4 data-id="heading-14">5.3.1 åµŒå¥—æ•°æ®å¤„ç†</h4>
<p>å¯¹äºå…·æœ‰æ ‘å½¢ç»“æ„çš„æ•°æ®ï¼ˆå¦‚éƒ¨é—¨å’Œèœå•ï¼‰ï¼Œç³»ç»Ÿä½¿ç”¨é€’å½’å‡½æ•°åˆ›å»ºå¯¹è±¡ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">__create_objects_with_children</span>(<span class="hljs-params">self, data: <span class="hljs-built_in">list</span>[<span class="hljs-built_in">dict</span>], model_class</span>) -&gt; <span class="hljs-built_in">list</span>:
    objs = []
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">create_object</span>(<span class="hljs-params">obj_data: <span class="hljs-built_in">dict</span></span>):
        children_data = obj_data.pop(<span class="hljs-string">'children'</span>, [])
        obj = model_class(**obj_data)
        <span class="hljs-keyword">if</span> children_data:
            obj.children = [create_object(child) <span class="hljs-keyword">for</span> child <span class="hljs-keyword">in</span> children_data]
        <span class="hljs-keyword">return</span> obj
    
    <span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> data:
        objs.append(create_object(item))
    
    <span class="hljs-keyword">return</span> objs
</code></pre>
<h4 data-id="heading-15">5.3.2 å…³è”æ•°æ®å¤„ç†</h4>
<p>å¯¹äºå­˜åœ¨å…³è”å…³ç³»çš„æ•°æ®ï¼ˆå¦‚ç”¨æˆ·ä¸è§’è‰²ï¼‰ï¼Œç³»ç»Ÿå…ˆåˆå§‹åŒ–ä¸»è¡¨æ•°æ®ï¼Œå†åˆå§‹åŒ–å…³è”è¡¨æ•°æ®ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># å¤„ç†å­—å…¸ç±»å‹è¡¨ï¼Œä¿å­˜ç±»å‹æ˜ å°„</span>
<span class="hljs-keyword">elif</span> table_name == <span class="hljs-string">"sys_dict_type"</span>:
    objs = []
    <span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> data:
        obj = model(**item)
        objs.append(obj)
        dict_type_mapping[item[<span class="hljs-string">'dict_type'</span>]] = obj
<span class="hljs-comment"># å¤„ç†å­—å…¸æ•°æ®è¡¨ï¼Œæ·»åŠ dict_type_idå…³è”</span>
<span class="hljs-keyword">elif</span> table_name == <span class="hljs-string">"sys_dict_data"</span>:
    objs = []
    <span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> data:
        dict_type = item.get(<span class="hljs-string">'dict_type'</span>)
        <span class="hljs-keyword">if</span> dict_type <span class="hljs-keyword">in</span> dict_type_mapping:
            item[<span class="hljs-string">'dict_type_id'</span>] = dict_type_mapping[dict_type].<span class="hljs-built_in">id</span>
        <span class="hljs-keyword">else</span>:
            log.warning(<span class="hljs-string">f"âš ï¸  æœªæ‰¾åˆ°å­—å…¸ç±»å‹ <span class="hljs-subst">{dict_type}</span>ï¼Œè·³è¿‡è¯¥å­—å…¸æ•°æ®"</span>)
            <span class="hljs-keyword">continue</span>
        objs.append(model(**item))
</code></pre>
<h2 data-id="heading-16">6. å®Œæ•´åˆå§‹åŒ–æµç¨‹</h2>
<p>æ•°æ®åº“åˆå§‹åŒ–çš„å®Œæ•´æµç¨‹ç”± <code>init_db()</code> æ–¹æ³•ç»Ÿä¸€åè°ƒï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">init_db</span>(<span class="hljs-params">self</span>) -&gt; <span class="hljs-literal">None</span>:
    <span class="hljs-comment"># å…ˆåˆ›å»ºè¡¨ç»“æ„</span>
    <span class="hljs-keyword">await</span> self.__init_create_table()
    
    <span class="hljs-comment"># å†åˆå§‹åŒ–æ•°æ®</span>
    <span class="hljs-keyword">async</span> <span class="hljs-keyword">with</span> async_db_session() <span class="hljs-keyword">as</span> session:
        <span class="hljs-keyword">async</span> <span class="hljs-keyword">with</span> session.begin():
            <span class="hljs-keyword">await</span> self.__init_data(session)
            <span class="hljs-keyword">await</span> session.commit()
</code></pre>
<h2 data-id="heading-17">8. æ€»ç»“</h2>
<p>æœ¬ç³»ç»Ÿçš„æ•°æ®åº“åˆå§‹åŒ–è¿‡ç¨‹æ˜¯ä¸€ä¸ªé«˜åº¦è‡ªåŠ¨åŒ–ã€å¯æ‰©å±•çš„æ¶æ„ï¼Œé€šè¿‡ SQLAlchemy 2.0 çš„å¼‚æ­¥ç‰¹æ€§å®ç°äº†é«˜æ•ˆçš„æ•°æ®åº“æ“ä½œã€‚æ•´ä¸ªè¿‡ç¨‹éµå¾ªäº†"å…ˆåˆ›å»ºè¡¨ç»“æ„ï¼Œå†åˆå§‹åŒ–æ•°æ®"çš„åŸåˆ™ï¼Œç¡®ä¿äº†æ•°æ®çš„å®Œæ•´æ€§å’Œä¾èµ–å…³ç³»çš„æ­£ç¡®æ€§ã€‚åŒæ—¶ï¼Œç³»ç»Ÿé‡‡ç”¨äº†Mixinæ¨¡å¼å®ç°æ¨¡å‹çš„å¤ç”¨å’Œæ‰©å±•ï¼Œæé«˜äº†ä»£ç çš„å¯ç»´æŠ¤æ€§ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[NestJS å¦‚ä½•é…ç½®ç¯å¢ƒå˜é‡]]></title>    <link>https://juejin.cn/post/7588080521445261358</link>    <guid>https://juejin.cn/post/7588080521445261358</guid>    <pubDate>2025-12-27T12:56:06.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588080521445261358" data-draft-id="7588080521445244974" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="NestJS å¦‚ä½•é…ç½®ç¯å¢ƒå˜é‡"/> <meta itemprop="keywords" content="NestJS"/> <meta itemprop="datePublished" content="2025-12-27T12:56:06.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å½“æ—¶åªé“å¯»å¸¸"/> <meta itemprop="url" content="https://juejin.cn/user/48816529358711"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            NestJS å¦‚ä½•é…ç½®ç¯å¢ƒå˜é‡
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/48816529358711/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å½“æ—¶åªé“å¯»å¸¸
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-27T12:56:06.000Z" title="Sat Dec 27 2025 12:56:06 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    26
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">æ‰€éœ€ä¾èµ–</h2>
<pre><code class="hljs language-bash" lang="bash">pnpm i @nestjs/config js-yaml lodash
pnpm i @types/js-yaml @types/lodash cross-env -D
</code></pre>
<h2 data-id="heading-1">ç›®å½•ç»“æ„</h2>
<pre><code class="hljs language-bash" lang="bash">|- config
| |- config.yaml <span class="hljs-comment"># é€šç”¨é…ç½®æ–‡ä»¶</span>
| |- config.local.yaml <span class="hljs-comment"># é€šç”¨é…ç½®æ–‡ä»¶æœ¬åœ°ç‰ˆï¼ˆä¸ä¼šè¢« Git è®°å½•ï¼‰</span>
| |- config.development.yaml <span class="hljs-comment"># å¼€å‘ç¯å¢ƒé…ç½®æ–‡ä»¶ç‰ˆ</span>
| |- config.development.local.yaml <span class="hljs-comment"># å¼€å‘ç¯å¢ƒé…ç½®æ–‡ä»¶ç‰ˆï¼ˆä¸ä¼šè¢« Git è®°å½•ï¼‰</span>
| |- config.production.yaml <span class="hljs-comment"># ç”Ÿäº§é…ç½®æ–‡ä»¶æœ¬åœ°ç‰ˆ</span>
| |- config.production.local.yaml <span class="hljs-comment"># ç”Ÿäº§é…ç½®æ–‡ä»¶æœ¬åœ°ç‰ˆï¼ˆä¸ä¼šè¢« Git è®°å½•ï¼‰</span>
|- src
| |- common
|   |- config.module.ts <span class="hljs-comment"># è‡ªå®šä¹‰çš„ç¯å¢ƒé…ç½®æ¨¡å—</span>
| |- app.module.ts
|- .gitignore
|- nest-cli.json
</code></pre>
<h2 data-id="heading-2">æ¶‰åŠæ–‡ä»¶</h2>
<h3 data-id="heading-3">1ã€package.json</h3>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"scripts"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"build"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"cross-env NODE_ENV=production nest build"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"start"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"cross-env NODE_ENV=development nest start"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"start:dev"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"cross-env NODE_ENV=development nest start --watch"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"start:debug"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"cross-env NODE_ENV=development nest start --debug --watch"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"start:prod"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"node dist/main"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"start:deploy"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"node main.js"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"dependencies"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"@nestjs/config"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^4.0.2"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"js-yaml"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^4.1.1"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"lodash"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^4.17.21"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"devDependencies"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"@types/js-yaml"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^4.0.9"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"@types/lodash"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^4.17.21"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"cross-env"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^10.1.0"</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h3 data-id="heading-4">2ã€config.module.ts</h3>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">import</span> { join } <span class="hljs-keyword">from</span> <span class="hljs-string">'path'</span>
<span class="hljs-keyword">import</span> jsYaml <span class="hljs-keyword">from</span> <span class="hljs-string">'js-yaml'</span>
<span class="hljs-keyword">import</span> { merge } <span class="hljs-keyword">from</span> <span class="hljs-string">'lodash'</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Module</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/common'</span>
<span class="hljs-keyword">import</span> { readFileSync, existsSync } <span class="hljs-keyword">from</span> <span class="hljs-string">'fs'</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ConfigModule</span> <span class="hljs-keyword">as</span> <span class="hljs-title class_">NestConfigModule</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/config'</span>

<span class="hljs-meta">@Module</span>({
  <span class="hljs-attr">imports</span>: [
    <span class="hljs-title class_">NestConfigModule</span>.<span class="hljs-title function_">forRoot</span>({
      <span class="hljs-attr">load</span>: [configuration],
      <span class="hljs-attr">isGlobal</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">cache</span>: <span class="hljs-literal">true</span>,
    }),
  ],
})
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ConfigModule</span> {}

<span class="hljs-comment">/**
 * è¯»å–æŒ‡å®šè·¯å¾„çš„ YAML é…ç½®æ–‡ä»¶å¹¶è½¬ä¸ºå¯¹è±¡ç±»å‹
 * <span class="hljs-doctag">@param</span> filePath YAML é…ç½®æ–‡ä»¶çš„è·¯å¾„
 * <span class="hljs-doctag">@returns</span> è§£æåçš„é…ç½®å¯¹è±¡ï¼Œå¦‚æœæ–‡ä»¶ä¸å­˜åœ¨åˆ™è¿”å›ç©ºå¯¹è±¡
 */</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">loadConfig</span>(<span class="hljs-params">filePath: <span class="hljs-built_in">string</span></span>): <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">any</span>&gt; {
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">existsSync</span>(filePath) ? (jsYaml.<span class="hljs-title function_">load</span>(<span class="hljs-title function_">readFileSync</span>(filePath, <span class="hljs-string">'utf-8'</span>)) <span class="hljs-keyword">as</span> <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">any</span>&gt;) : {}
}

<span class="hljs-comment">/**
 * é…ç½®åŠ è½½æ ¸å¿ƒå‡½æ•°ï¼šè¯»å–å¹¶åˆå¹¶å¤šç¯å¢ƒ YAML é…ç½®æ–‡ä»¶
 *
 * åŠŸèƒ½è¯´æ˜ï¼š
 *  - æ ¹æ® NODE_ENV åŒºåˆ†å¼€å‘/ç”Ÿäº§ç¯å¢ƒï¼Œç¡®å®šé…ç½®æ–‡ä»¶å­˜æ”¾ç›®å½•
 *  - æŒ‰ä¼˜å…ˆçº§è¯»å–4ç±» YAML é…ç½®æ–‡ä»¶ï¼ˆé€šç”¨â†’é€šç”¨æœ¬åœ°â†’ç¯å¢ƒâ†’ç¯å¢ƒæœ¬åœ°ï¼‰
 *  - æ·±åº¦åˆå¹¶é…ç½®å¯¹è±¡ï¼Œåç»­é…ç½®ä¼šè¦†ç›–å‰é¢çš„åŒååµŒå¥—å±æ€§
 *  - æœ€ç»ˆè¿”å›åˆå¹¶åçš„å®Œæ•´é…ç½®ï¼Œä¾› NestJS ConfigModule ä½¿ç”¨
 *
 * é…ç½®ä¼˜å…ˆçº§ï¼ˆä»ä½åˆ°é«˜ï¼Œåé¢è¦†ç›–å‰é¢ï¼‰ï¼š
 *  - config.yaml &lt; config.local.yaml &lt; config.{NODE_ENV}.yaml &lt; config.{NODE_ENV}.local.yaml
 */</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">configuration</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// ä»ç¯å¢ƒå˜é‡ä¸­è·å–å½“å‰è¿è¡Œç¯å¢ƒï¼Œé»˜è®¤ä¸ºå¼€å‘ç¯å¢ƒ</span>
  <span class="hljs-keyword">const</span> { <span class="hljs-variable constant_">NODE_ENV</span> = <span class="hljs-string">'development'</span> } = process.<span class="hljs-property">env</span>

  <span class="hljs-comment">// ç¡®å®šé…ç½®æ–‡ä»¶çš„å­˜æ”¾ç›®å½•</span>
  <span class="hljs-comment">//  - å¼€å‘ç¯å¢ƒ: è¯»å–é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„ config æ–‡ä»¶å¤¹</span>
  <span class="hljs-comment">//  - ç”Ÿäº§ç¯å¢ƒ: ç›´æ¥è¯»å–å½“å‰æ–‡ä»¶æ‰€åœ¨çš„ç›®å½•</span>
  <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">CONFIG_DIR_PATH</span> = <span class="hljs-variable constant_">NODE_ENV</span> === <span class="hljs-string">'development'</span> ? <span class="hljs-title function_">join</span>(process.<span class="hljs-title function_">cwd</span>(), <span class="hljs-string">'config'</span>) : __dirname

  <span class="hljs-comment">// å®šä¹‰å„ç±»é…ç½®æ–‡ä»¶çš„è·¯å¾„</span>
  <span class="hljs-comment">// é€šç”¨é…ç½®æ–‡ä»¶ï¼ˆæ‰€æœ‰ç¯å¢ƒå…±äº«çš„åŸºç¡€é…ç½®ï¼‰</span>
  <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">YAML_COMMON_CONFIG_PATH</span> = <span class="hljs-title function_">join</span>(<span class="hljs-variable constant_">CONFIG_DIR_PATH</span>, <span class="hljs-string">'config.yaml'</span>)
  <span class="hljs-comment">// é€šç”¨æœ¬åœ°é…ç½®æ–‡ä»¶ï¼ˆæœ¬åœ°å¼€å‘è¦†ç›–é€šç”¨é…ç½®çš„ä¸ªæ€§åŒ–è®¾ç½®ï¼Œä¸åº”æäº¤åˆ°ä»£ç ä»“åº“ï¼‰</span>
  <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">YAML_COMMON_CONFIG_LOCAL_PATH</span> = <span class="hljs-title function_">join</span>(<span class="hljs-variable constant_">CONFIG_DIR_PATH</span>, <span class="hljs-string">'config.local.yaml'</span>)
  <span class="hljs-comment">// ç‰¹å®šç¯å¢ƒçš„é…ç½®æ–‡ä»¶ï¼ˆé’ˆå¯¹å½“å‰ç¯å¢ƒçš„ä¸“ç”¨é…ç½®ï¼Œå¦‚å¼€å‘/ç”Ÿäº§ç¯å¢ƒçš„å·®å¼‚é…ç½®ï¼‰</span>
  <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">YAML_ENV_CONFIG_PATH</span> = <span class="hljs-title function_">join</span>(<span class="hljs-variable constant_">CONFIG_DIR_PATH</span>, <span class="hljs-string">`config.<span class="hljs-subst">${NODE_ENV || <span class="hljs-string">'development'</span>}</span>.yaml`</span>)
  <span class="hljs-comment">// ç‰¹å®šç¯å¢ƒçš„æœ¬åœ°é…ç½®æ–‡ä»¶ï¼ˆæœ¬åœ°è¦†ç›–å½“å‰ç¯å¢ƒé…ç½®çš„ä¸ªæ€§åŒ–è®¾ç½®ï¼Œä¸åº”æäº¤åˆ°ä»£ç ä»“åº“ï¼‰</span>
  <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">YAML_ENV_CONFIG_LOCAL_PATH</span> = <span class="hljs-title function_">join</span>(<span class="hljs-variable constant_">CONFIG_DIR_PATH</span>, <span class="hljs-string">`config.<span class="hljs-subst">${NODE_ENV || <span class="hljs-string">'development'</span>}</span>.local.yaml`</span>)

  <span class="hljs-comment">// è¯»å–å„ç±»é…ç½®æ–‡ä»¶çš„å†…å®¹</span>
  <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">COMMON_CONFIG</span> = <span class="hljs-title function_">loadConfig</span>(<span class="hljs-variable constant_">YAML_COMMON_CONFIG_PATH</span>)
  <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">COMMON_CONFIG_LOCAL</span> = <span class="hljs-title function_">loadConfig</span>(<span class="hljs-variable constant_">YAML_COMMON_CONFIG_LOCAL_PATH</span>)
  <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">ENV_CONFIG</span> = <span class="hljs-title function_">loadConfig</span>(<span class="hljs-variable constant_">YAML_ENV_CONFIG_PATH</span>)
  <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">ENV_CONFIG_LOCAL</span> = <span class="hljs-title function_">loadConfig</span>(<span class="hljs-variable constant_">YAML_ENV_CONFIG_LOCAL_PATH</span>)

  <span class="hljs-comment">// æ·±åº¦åˆå¹¶é…ç½®ï¼Œåé¢çš„é…ç½®ä¼šè¦†ç›–å‰é¢çš„åŒåé…ç½®</span>
  <span class="hljs-comment">// è¿™æ ·æ—¢ä¿è¯äº†åŸºç¡€é…ç½®çš„é€šç”¨æ€§ï¼Œåˆå…è®¸ç¯å¢ƒå’Œæœ¬åœ°é…ç½®è¿›è¡Œä¸ªæ€§åŒ–å®šåˆ¶</span>
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">merge</span>(<span class="hljs-variable constant_">COMMON_CONFIG</span>, <span class="hljs-variable constant_">COMMON_CONFIG_LOCAL</span>, <span class="hljs-variable constant_">ENV_CONFIG</span>, <span class="hljs-variable constant_">ENV_CONFIG_LOCAL</span>)
}
</code></pre>
<h3 data-id="heading-5">3ã€app.module.ts</h3>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Module</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/common'</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ConfigModule</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./common/config.module.ts'</span>

<span class="hljs-meta">@Module</span>({
  <span class="hljs-attr">imports</span>: [<span class="hljs-title class_">ConfigModule</span>]
})
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AppModule</span> {}
</code></pre>
<h3 data-id="heading-6">4ã€.gitignore</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># dotenv environment variable files</span>
.env.local
*.local.yaml
</code></pre>
<h3 data-id="heading-7">5ã€nest-cli.json</h3>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"$schema"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"https://json.schemastore.org/nest-cli"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"collection"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"@nestjs/schematics"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"sourceRoot"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"src"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"compilerOptions"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"assets"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
      <span class="hljs-punctuation">{</span> <span class="hljs-attr">"include"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"../package.json"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"outDir"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"./dist/package.json"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
      <span class="hljs-punctuation">{</span> <span class="hljs-attr">"include"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"../pnpm-lock.yaml"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"outDir"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"./dist/pnpm-lock.yaml"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
      <span class="hljs-punctuation">{</span> <span class="hljs-attr">"include"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"../config/config.yaml"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"outDir"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"./dist"</span> <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"deleteOutDir"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"builder"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"webpack"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"generateOptions"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"flat"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"spec"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h2 data-id="heading-8">ä½¿ç”¨ä»‹ç»</h2>
<h3 data-id="heading-9">1ã€service æœåŠ¡ä½¿ç”¨</h3>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Injectable</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/common'</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ConfigService</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/config'</span>

<span class="hljs-meta">@Injectable</span>()
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LoginService</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"><span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> configService: ConfigService</span>) {}
  
  <span class="hljs-keyword">public</span> <span class="hljs-title function_">testEnvConfig</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> dbHost = <span class="hljs-variable language_">this</span>.<span class="hljs-property">configService</span>.<span class="hljs-property">get</span>&lt;<span class="hljs-built_in">string</span>&gt;(<span class="hljs-string">'database.host'</span>,<span class="hljs-string">'localhost'</span>)
  }
}
</code></pre>
<h3 data-id="heading-10">2ã€main.ts ä¸­ä½¿ç”¨</h3>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">AppModule</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./app.module'</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ConfigService</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/config'</span>

<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">bootstrap</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> app = <span class="hljs-keyword">await</span> <span class="hljs-title class_">NestFactory</span>.<span class="hljs-title function_">create</span>(<span class="hljs-title class_">AppModule</span>)
  
  <span class="hljs-comment">// ä»åº”ç”¨å®¹å™¨ä¸­è·å–é…ç½®æœåŠ¡å®ä¾‹ï¼Œç”±äº ConfigModule è¢«è®¾ç½®ä¸ºå…¨å±€æ¨¡å—ï¼Œè¿™é‡Œå¯ä»¥ç›´æ¥è·å–</span>
  <span class="hljs-keyword">const</span> configService = app.<span class="hljs-title function_">get</span>(<span class="hljs-title class_">ConfigService</span>)
  <span class="hljs-keyword">const</span> serverPort = configService.<span class="hljs-property">get</span>&lt;<span class="hljs-built_in">number</span>&gt;(<span class="hljs-string">'server.port'</span>, <span class="hljs-number">3000</span>)
  
  <span class="hljs-comment">// å¯åŠ¨åº”ç”¨å¹¶ç›‘å¬é…ç½®ä¸­æŒ‡å®šçš„ç«¯å£</span>
  <span class="hljs-comment">// è¿™ä¸€æ­¥ä¼šå¯åŠ¨ HTTP æœåŠ¡å™¨ï¼Œä½¿åº”ç”¨å¼€å§‹æ¥æ”¶å¤–éƒ¨è¯·æ±‚</span>
  <span class="hljs-keyword">await</span> app.<span class="hljs-title function_">listen</span>(serverPort)
  
  <span class="hljs-comment">// æ‰“å°æœåŠ¡å¯åŠ¨ä¿¡æ¯ï¼Œæ–¹ä¾¿å¼€å‘è€…åœ¨ç»ˆç«¯æŸ¥çœ‹è®¿é—®åœ°å€</span>
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'\n--------------------------------------------------'</span>)
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`âœ  Local:    http://localhost:<span class="hljs-subst">${serverPort}</span>`</span>)
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'--------------------------------------------------'</span>)
}

<span class="hljs-comment">// è°ƒç”¨å¯åŠ¨å‡½æ•°ï¼Œå¯åŠ¨åº”ç”¨</span>
<span class="hljs-title function_">bootstrap</span>()
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[openrestyç›‘æ§]]></title>    <link>https://juejin.cn/post/7588080521445294126</link>    <guid>https://juejin.cn/post/7588080521445294126</guid>    <pubDate>2025-12-27T13:41:03.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588080521445294126" data-draft-id="7588149079416913974" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="openrestyç›‘æ§"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-27T13:41:03.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é£çš„å½’å®¿55"/> <meta itemprop="url" content="https://juejin.cn/user/2840793779297303"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            openrestyç›‘æ§
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2840793779297303/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é£çš„å½’å®¿55
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-27T13:41:03.000Z" title="Sat Dec 27 2025 13:41:03 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1å°æ—¶+
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h4 data-id="heading-0">ä»‹ç»</h4>
<p>è¿™ç¯‡æ–‡ç« ä¸»è¦è®²è§£äº†openrestyçš„ç›‘æ§ç•Œé¢ï¼ŒåŒ…æ‹¬ç›‘æ§ç•Œé¢çš„å®‰è£…ï¼Œå±•ç¤ºï¼Œä»¥åŠä½¿ç”¨ã€‚è¿™é‡Œæ¨èçš„openrestyçš„ç›‘æ§ä¸»è¦æœ‰ä¸¤ä¸ªï¼Œä¸€ä¸ªæ˜¯qpsï¼ŒçŠ¶æ€ç ï¼Œupstreamè¿æ¥æ•°ç­‰nginxæŒ‡æ ‡çš„ç›‘æ§å¤§å±ï¼Œè¿˜æœ‰ä¸€ä¸ªæ˜¯luaçš„å¼‚å¸¸æ—¥å¿—çš„ç›‘æ§å±•ç¤ºã€‚å‰è€…è®©æˆ‘ä»¬å¯ä»¥æŒæ¡nginxæ•´ä½“çš„å¥åº·çŠ¶æ€ï¼Œåè€…åˆ™ä»ä¸šåŠ¡è§’åº¦å‘Šè¯‰æˆ‘ä»¬ï¼Œå½“å‰ä»€ä¹ˆåœ¨å‡ºé”™ã€‚</p>
<h4 data-id="heading-1">æˆæœå±•ç¤º</h4>
<p>è¿™é‡Œè´´ä¸€ä¸‹grafanaæœ€ç»ˆå±•ç¤ºå‡ºæ¥çš„ç›‘æ§æ•ˆæœ</p>
<h6 data-id="heading-2">ç›‘æ§å¤§å±</h6>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d755ab8b53a242e78490a19d76182596~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOO55qE5b2S5a6_NTU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767447665&amp;x-signature=d%2FAK1RJHE4C0pWGsyoUr6Wg%2FJ3g%3D" alt="openresty_1.jpg" loading="lazy"/></p>
<h6 data-id="heading-3">å¼‚å¸¸ç›‘æ§</h6>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/96d275d52b6046adba82e0dab7ce9ec4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOO55qE5b2S5a6_NTU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767447665&amp;x-signature=HP%2B%2FnTQep43Kk6c47Tg142OprZ0%3D" alt="openresty_2.jpg" loading="lazy"/></p>
<br/>
<h4 data-id="heading-4">ç›‘æ§å¤§å±</h4>
<p>è¿™ä¸ªç›‘æ§å¤§å±ä¸»è¦æ˜¯é€šè¿‡openrestyçš„prometheusåº“æ¥æ”¶é›†æ•°æ®çš„ï¼Œæœ‰å…´è¶£çš„å¯ä»¥çœ‹ä¸‹è¿™ä¸ªå®˜æ–¹æ–‡æ¡£ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fknyar%2Fnginx-lua-prometheus" target="_blank" title="https://github.com/knyar/nginx-lua-prometheus" ref="nofollow noopener noreferrer">github.com/knyar/nginxâ€¦</a> ã€‚è¿™ä¸ªåº“é‡Œé¢æä¾›äº†ä¸€äº›åŠŸèƒ½çš„å‡½æ•°ï¼Œå¯ä»¥é€šè¿‡è¿™äº›å‡½æ•°å¯¼å‡ºè‡ªå·±æ„Ÿå…´è¶£çš„æŒ‡æ ‡å¹¶å±•ç¤ºï¼Œæœ¬æ–‡å°±é¢å¤–å¯¼å‡ºäº†nginxä¸­çš„upstreamçš„è¿æ¥æ•°è¿™ä¸€æŒ‡æ ‡ï¼Œç”¨äºååŠ©æ’æŸ¥é—®é¢˜ã€‚å½“ç„¶ï¼Œè¿™ä¸ªåº“å·²ç»é»˜è®¤å¯¼å‡ºäº†qpsï¼Œè¿æ¥æ•°ï¼Œå»¶è¿Ÿç­‰é‡è¦ä¿¡æ¯ã€‚</p>
<h6 data-id="heading-5">å®‰è£…</h6>
<p>é¦–å…ˆä»è¿™ä¸ªgité¡¹ç›®è·å–åº“æ–‡ä»¶è¿›è¡Œå®‰è£…ï¼š <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fknyar%2Fnginx-lua-prometheus" target="_blank" title="https://github.com/knyar/nginx-lua-prometheus" ref="nofollow noopener noreferrer">github.com/knyar/nginxâ€¦</a> ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™ä¸ªåº“æ–‡ä»¶ç”Ÿæ•ˆçš„å‰ææ˜¯éœ€è¦nginxå·²ç»å®‰è£…äº†ngx_luaæ¨¡å—ï¼Œä¸è¿‡å¯¹äºopenrestyæ¥è¯´ï¼Œè¿™æ˜¯è‡ªå¸¦çš„ï¼Œä¸éœ€è¦é¢å¤–å®‰è£…ã€‚ç„¶åå¯ä»¥é€šè¿‡ä»¥ä¸‹æ­¥éª¤è¿›è¡Œå®‰è£…ï¼š</p>
<ol>
<li>å°†gité¡¹ç›®ä¸­çš„prometheus.luaï¼Œprometheus_keys.luaï¼Œprometheus_resty_counter.lua è¿™å‡ ä¸ªåº“æ–‡ä»¶æ”¾ç½®åˆ°luaçš„lua_package_path æŒ‡å‘çš„æ–‡ä»¶è·¯å¾„</li>
<li>åœ¨nginxé¡¹ç›®å¯åŠ¨æ—¶åˆå§‹åŒ–prometheusåº“ï¼Œå³åœ¨nginx.confé…ç½®æ–‡ä»¶ä¸­å¢åŠ ä»¥ä¸‹å†…å®¹ï¼š</li>
</ol>

<pre><code class="hljs language-csharp" lang="csharp">lua_shared_dict prometheus_metrics <span class="hljs-number">10</span>M;
lua_package_path <span class="hljs-string">"/path/to/nginx-lua-prometheus/?.lua;;"</span>;

init_worker_by_lua_block {
  prometheus = require(<span class="hljs-string">"prometheus"</span>).<span class="hljs-keyword">init</span>(<span class="hljs-string">"prometheus_metrics"</span>)

  metric_requests = prometheus:counter(
    <span class="hljs-string">"nginx_http_requests_total"</span>, <span class="hljs-string">"Number of HTTP requests"</span>, {<span class="hljs-string">"host"</span>, <span class="hljs-string">"status"</span>})
  metric_latency = prometheus:histogram(
    <span class="hljs-string">"nginx_http_request_duration_seconds"</span>, <span class="hljs-string">"HTTP request latency"</span>, {<span class="hljs-string">"host"</span>})
  metric_connections = prometheus:gauge(
    <span class="hljs-string">"nginx_http_connections"</span>, <span class="hljs-string">"Number of HTTP connections"</span>, {<span class="hljs-string">"state"</span>})
}

log_by_lua_block {
  metric_requests:inc(<span class="hljs-number">1</span>, {ngx.<span class="hljs-keyword">var</span>.server_name, ngx.<span class="hljs-keyword">var</span>.status})
  metric_latency:observe(tonumber(ngx.<span class="hljs-keyword">var</span>.request_time), {ngx.<span class="hljs-keyword">var</span>.server_name})
}
</code></pre>
<p>3.  å¢åŠ ä¸€ä¸ªè·¯ç”±ï¼Œå°†nginxçš„ç›‘æ§æ•°æ®å¯¼å‡ºï¼Œæ”¯æŒprometheusæŠ“å–ï¼Œå¯ä»¥åœ¨nginx.confä¸­å¢åŠ ä»¥ä¸‹é…ç½®ï¼š</p>

<pre><code class="hljs language-csharp" lang="csharp">server {
  listen <span class="hljs-number">9145</span>;
  allow <span class="hljs-number">192.168</span><span class="hljs-number">.0</span><span class="hljs-number">.0</span>/<span class="hljs-number">16</span>;
  deny all;
  location /metrics {
    content_by_lua_block {
      metric_connections:<span class="hljs-keyword">set</span>(ngx.<span class="hljs-keyword">var</span>.connections_reading, {<span class="hljs-string">"reading"</span>})
      metric_connections:<span class="hljs-keyword">set</span>(ngx.<span class="hljs-keyword">var</span>.connections_waiting, {<span class="hljs-string">"waiting"</span>})
      metric_connections:<span class="hljs-keyword">set</span>(ngx.<span class="hljs-keyword">var</span>.connections_writing, {<span class="hljs-string">"writing"</span>})
      prometheus:collect()
    }
  }
}
</code></pre>
<p>4.  ä¸Šé¢å‡ ä¸ªäº‹å®˜æ–¹çš„å®‰è£…æ­¥éª¤ï¼Œæˆ‘è¿™é‡ŒåŠ äº†ä¸€ä¸ªå¯¼å‡ºupstreamä¿¡æ¯çš„è·¯ç”±ï¼Œå¯ä»¥å†™åœ¨/metrics è¿™ä¸ªè·¯ç”±ä¸‹é¢</p>

<pre><code class="hljs language-lua" lang="lua">location = /upstreams_metrics {
            default_type text/plain;
            content_by_lua_block {
                <span class="hljs-keyword">local</span> <span class="hljs-built_in">concat</span> = <span class="hljs-built_in">table</span>.<span class="hljs-built_in">concat</span>
                <span class="hljs-keyword">local</span> upstream = <span class="hljs-built_in">require</span> <span class="hljs-string">"ngx.upstream"</span>
                <span class="hljs-keyword">local</span> get_servers = upstream.get_servers
                <span class="hljs-keyword">local</span> get_upstreams = upstream.get_upstreams
                <span class="hljs-keyword">local</span> get_primary_peers = upstream.get_primary_peers

                <span class="hljs-keyword">local</span> us = get_upstreams()
                <span class="hljs-keyword">for</span> _, u <span class="hljs-keyword">in</span> <span class="hljs-built_in">ipairs</span>(us) <span class="hljs-keyword">do</span>
                    <span class="hljs-keyword">local</span> srvs, err = get_primary_peers(u)
                    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> srvs <span class="hljs-keyword">then</span>
                        ngx.say(<span class="hljs-string">"#failed to get servers in upstream "</span>, u)
                    <span class="hljs-keyword">else</span>
                        <span class="hljs-keyword">for</span> _, server <span class="hljs-keyword">in</span> <span class="hljs-built_in">ipairs</span>(srvs) <span class="hljs-keyword">do</span>
                            <span class="hljs-keyword">local</span> message = <span class="hljs-built_in">string</span>.<span class="hljs-built_in">format</span>(<span class="hljs-string">'nginx_upstream_conn_total{upstream="%s",server="%s"} %s'</span>,<span class="hljs-built_in">tostring</span>(u),<span class="hljs-built_in">tostring</span>(server.name),<span class="hljs-built_in">tostring</span>(server.conns <span class="hljs-keyword">or</span> <span class="hljs-number">0</span>))
                            ngx.say(message)
                        <span class="hljs-keyword">end</span>
                    <span class="hljs-keyword">end</span>
                <span class="hljs-keyword">end</span>
            }
        }
</code></pre>
<p>5.  è¿™é‡Œnginxå°±å¯ä»¥æŠŠç›‘æ§æ•°æ®å¯¼å‡ºäº†ï¼Œæ¥ä¸‹æ¥éœ€è¦é…ç½®prometheusæŠ“å–è¿™éƒ¨åˆ†æ•°æ®ï¼Œè¿™é‡Œåˆ†ä¸ºä¸¤ç§æƒ…å†µï¼Œå¦‚æœæ˜¯éƒ¨ç½²çš„prometheuså®ä¾‹çš„è¯ï¼Œå¯ä»¥ç›´æ¥æŠ“å–å¯¹åº”nginxå®ä¾‹çš„ç«¯å£</p>

<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-bullet">-</span> <span class="hljs-attr">job_name:</span> <span class="hljs-string">'nginx-moniter'</span>
  <span class="hljs-attr">static_configs:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-attr">targets:</span> [<span class="hljs-string">'10.10.1.123:9145'</span>]
    <span class="hljs-attr">labels:</span>
      <span class="hljs-attr">exporter:</span> <span class="hljs-string">'nginx'</span>
</code></pre>
<p>6.  å¦‚æœæ˜¯ä½¿ç”¨k8séƒ¨ç½²çš„nginxï¼Œå¹¶ä¸”prometheusæ˜¯ä½¿ç”¨operatoréƒ¨ç½²çš„ï¼Œé‚£å¯ä»¥é€šè¿‡å¦‚ä¸‹æ–¹å¼å¯¼å‡º</p>

<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-string">k8sçš„nginx</span> <span class="hljs-string">serviceé…ç½®ï¼š</span>

<span class="hljs-attr">apiVersion:</span> <span class="hljs-string">v1</span>
<span class="hljs-attr">kind:</span> <span class="hljs-string">Service</span>
<span class="hljs-attr">metadata:</span>
  <span class="hljs-attr">name:</span> <span class="hljs-string">nginx</span>
  <span class="hljs-attr">labels:</span>
    <span class="hljs-attr">name:</span> <span class="hljs-string">nginx</span>
    <span class="hljs-attr">group:</span> <span class="hljs-string">default</span>
<span class="hljs-attr">spec:</span>
  <span class="hljs-attr">type:</span> <span class="hljs-string">ClusterIP</span>
  <span class="hljs-attr">ports:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">metrics</span>
      <span class="hljs-attr">port:</span> <span class="hljs-number">9145</span>
      <span class="hljs-attr">targetPort:</span> <span class="hljs-number">9145</span>
      <span class="hljs-attr">protocol:</span> <span class="hljs-string">TCP</span>
  <span class="hljs-attr">selector:</span>
    <span class="hljs-attr">name:</span> <span class="hljs-string">nginx</span>
    <span class="hljs-attr">group:</span> <span class="hljs-string">default</span>
    
    
<span class="hljs-string">k8sçš„nginxçš„deploymentè®°å¾—åœ¨é…ç½®ä¸­åŠ ä¸‹ç«¯å£ï¼š</span>

<span class="hljs-attr">containers:</span>
  <span class="hljs-attr">ports:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">containerPort:</span> <span class="hljs-number">9023</span>


<span class="hljs-string">æœ€åæ˜¯prometheusçš„serviceMonitorçš„é…ç½®ï¼š</span>

<span class="hljs-attr">apiVersion:</span> <span class="hljs-string">monitoring.coreos.com/v1</span>
<span class="hljs-attr">kind:</span> <span class="hljs-string">ServiceMonitor</span>
<span class="hljs-attr">metadata:</span>
  <span class="hljs-attr">name:</span> <span class="hljs-string">nginx</span>
  <span class="hljs-attr">namespace:</span> <span class="hljs-string">monitoring</span>
  <span class="hljs-attr">labels:</span>
    <span class="hljs-attr">app.kubernetes.io/component:</span> <span class="hljs-string">monitor</span>
<span class="hljs-attr">spec:</span>
  <span class="hljs-attr">endpoints:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-attr">port:</span> <span class="hljs-string">metrics</span>
    <span class="hljs-attr">path:</span> <span class="hljs-string">/metrics</span>
    <span class="hljs-attr">interval:</span> <span class="hljs-string">30s</span>
  <span class="hljs-bullet">-</span> <span class="hljs-attr">port:</span> <span class="hljs-string">metrics</span>
    <span class="hljs-attr">path:</span> <span class="hljs-string">/upstreams_metrics</span>
    <span class="hljs-attr">interval:</span> <span class="hljs-string">30s</span>
  <span class="hljs-attr">namespaceSelector:</span>
    <span class="hljs-attr">matchNames:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">default</span>
  <span class="hljs-attr">selector:</span>
    <span class="hljs-attr">matchExpressions:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">key:</span> <span class="hljs-string">name</span>
      <span class="hljs-attr">operator:</span> <span class="hljs-string">In</span>
      <span class="hljs-attr">values:</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">nginx</span>
</code></pre>
<p>7.  è¿™æ ·prometheuså°±æŠ“å–åˆ°nginxçš„ç›‘æ§æ•°æ®äº†ï¼Œæ¥ä¸‹æ¥çš„å°±æ˜¯åœ¨grafanaä¸­é…ç½®å¤§å±è¿›è¡Œå±•ç¤ºï¼Œè¿™ä¸ªå¯ä»¥åœ¨grafana dashboardç½‘é¡µä¸Šæ‰¾å–œæ¬¢çš„ç•Œé¢ï¼Œæ¯”å¦‚10223è¿™ä¸ªidï¼Œæˆ‘è¿™è¾¹æ˜¯ä½¿ç”¨åŸå§‹çš„ç•Œé¢ç„¶åæ”¹é€ äº†ä¸‹ï¼Œ<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Ffengdeguisu%2Farticle%2Fblob%2Fmain%2Fopenresty%25E7%259B%2591%25E6%258E%25A7%2Fnginx%25E7%259B%2591%25E6%258E%25A7%25E5%25A4%25A7%25E5%25B1%258F.json" target="_blank" title="https://github.com/fengdeguisu/article/blob/main/openresty%E7%9B%91%E6%8E%A7/nginx%E7%9B%91%E6%8E%A7%E5%A4%A7%E5%B1%8F.json" ref="nofollow noopener noreferrer">å¯ä»¥é€šè¿‡æ­¤é“¾æ¥ä¸‹è½½jsonæ–‡ä»¶</a>ï¼Œéœ€è¦çš„å¯ä»¥åœ¨grafanaçš„å¯¼å…¥æŒ‰é’®ä¸­è¾“å…¥jsonæ ¼å¼çš„æ•°æ®æ¥å¯¼å…¥ç•Œé¢ã€‚</p>
<h6 data-id="heading-6">ä½¿ç”¨ä»‹ç»</h6>
<p>å®‰è£…å®Œä¹‹åï¼Œå°±å¯ä»¥çœ‹åˆ°ä¸Šé¢æˆæœä»‹ç»ä¸­çš„nginxç›‘æ§å¤§å±çš„æ•ˆæœäº†ï¼Œä»–å¯ä»¥åŒæ—¶ç›‘æ§å¤šä¸ªnginxå®ä¾‹ï¼Œä¸ŠåŠéƒ¨åˆ†çš„å…¨ç«™ç›‘æ§æ•°æ®ï¼Œå±•ç¤ºäº†æ‰€æœ‰nginxå®ä¾‹æ±‡æ€»è¿‡åçš„qpsï¼Œè¿æ¥æ•°ï¼Œé”™è¯¯æ•°ï¼Œå»¶è¿Ÿç­‰ä¿¡æ¯ï¼Œä¸‹åŠéƒ¨åˆ†æ˜¯æŒ‰ç…§ä¸»æœºç»´åº¦æˆ–è€…podç»´åº¦æ±‡æ€»çš„å¯¹åº”æ•°æ®ã€‚ä¸‹é¢ç®€å•çš„ä»‹ç»ä¸‹ï¼š</p>
<p><strong>qps</strong>ï¼š å¯ä»¥ç”¨äºæŸ¥çœ‹æ¯ç§’çš„è¯·æ±‚æ•°ï¼Œç¡®è®¤æ˜¯å¦æœ‰çªå¢è¯·æ±‚</p>
<p><strong>å¹³å‡æ´»è·ƒè¿æ¥æ•°</strong>ï¼š ç”¨äºæŸ¥çœ‹å®¢æˆ·ç«¯çš„è¿æ¥æ•°ï¼Œå¦‚æœçªå¢ï¼Œå¯èƒ½æ˜¯å†…éƒ¨å¤„ç†æ…¢äº†ï¼Œéœ€è¦æŸ¥çœ‹æ˜¯å¦æœ‰ç“¶é¢ˆ</p>
<p><strong>å¹³å‡è¯·æ±‚å“åº”æ—¶é—´</strong>ï¼š ç”¨äºæŸ¥çœ‹å“åº”æ—¶é—´ï¼Œå¦‚æœå¤ªé«˜ï¼Œè¯´æ˜å®¢æˆ·ä½“éªŒä¼šæ”¶åˆ°ä¸¥é‡å½±å“ï¼Œéœ€è¦è¿›è¡Œæ’æŸ¥</p>
<p><strong>5xxé”™è¯¯ç‡</strong>ï¼š 500çŠ¶æ€ç çš„å æ¯”ï¼Œè¿™ä¸ªå€¼å‡é«˜çš„è¯ï¼Œè¯´æ˜æœåŠ¡å™¨å†…éƒ¨å‡ºç°äº†é—®é¢˜ï¼Œæ— æ³•å¤„ç†è¯·æ±‚ï¼Œ<strong>å¯ä»¥é’ˆå¯¹è¿™ä¸ªå€¼å¢åŠ ç›‘æ§é¢„è­¦ï¼ŒåŠæ—¶å‘ç°é—®é¢˜å¹¶å¤„ç†</strong>ã€‚</p>
<p><strong>upstreamå¹³å‡æ´»è·ƒè¿æ¥æ•°</strong>ï¼š  å±•ç¤ºäº†ä»¥upstreamæ¥è¿›è¡Œæ±‡æ€»çš„æ´»è·ƒè¿æ¥æ•°é‡ï¼Œå¦‚æœæŸä¸ªæ›²çº¿æ¯”è¾ƒé«˜ï¼Œè¯´æ˜å¯¹åº”çš„åç«¯æœåŠ¡å™¨å¤„ç†æ…¢ï¼Œå¯¼è‡´è¿æ¥æ± æº¢å‡ºäº†ï¼Œéœ€è¦è¿›è¡Œå¤„ç†ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™é‡Œçš„å‰ææ˜¯ä½¿ç”¨nginxçš„upstreamæ¥ä»£ç†åç«¯ï¼Œå¹¶ä¸”å¯ç”¨keepalive è¿™ä¸ªé…ç½®çš„è¿æ¥æ± åŠŸèƒ½ï¼Œè¿™ä¹Ÿæ˜¯æ¨èçš„åšæ³•ï¼Œèƒ½é€šè¿‡å¤ç”¨åç«¯ä»£ç†è¿æ¥æé«˜æ€§èƒ½ã€‚</p>
<h6 data-id="heading-7">ç›‘æ§å¤§å±è®¾ç½®äº†å‡ ä¸ªé€‰é¡¹ï¼Œè¿™é‡Œä¹Ÿä»‹ç»ä¸‹ï¼š</h6>
<p><strong>upstreamæ±‡æ€»ç±»å‹</strong>ï¼š ç”¨äºè®¾ç½®ä¸‹åŠéƒ¨åˆ†çš„upstreamæ´»è·ƒè¿æ¥æ•°ï¼Œå¯ä»¥é€šè¿‡è®¾ç½®ä¸ºpodæ¥æŸ¥çœ‹æ¯ä¸ªnginxå®ä¾‹çš„æ±‡æ€»ä»£ç†è¿æ¥æ•°ï¼Œå¦‚æœè¿™ä¸ªå€¼çªå¢ï¼Œé‚£ä»£è¡¨å¯¹åº”çš„nginxå®ä¾‹çš„åç«¯ä»£ç†æœ‰é—®é¢˜ï¼Œå¯ä»¥ä½¿ç”¨upstreamé€‰é¡¹æ¥æŸ¥çœ‹æ˜¯å“ªä¸ªåç«¯æœåŠ¡ç»„æœ‰é—®é¢˜
<strong>qpsåˆ†ç»„ç»´åº¦</strong>ï¼š ç”¨äºè®¾ç½®ä¸‹åŠéƒ¨åˆ†çš„å„ä¸ªæŒ‡æ ‡çš„åˆ†ç»„ç»´åº¦ï¼Œç”±podå’Œinstantä¸¤ç§é€‰é¡¹ï¼Œåˆ†åˆ«æŒ‰ç…§nginxå®ä¾‹æˆ–è€…ä¸»æœºæ±‡æ€»ï¼Œåœ¨å‡ºç°çªå¢æƒ…å†µæ—¶ï¼Œå¯ä»¥ç”¨äºç¡®å®šæ˜¯å“ªä¸ªå®ä¾‹æœ‰é—®é¢˜ã€‚
<strong>upstream podå’Œupstream</strong>ï¼š ç”¨äºæŒ‡å®šæŸä¸ªå®ä¾‹æˆ–è€…åç«¯ä»£ç†æ¥æŸ¥çœ‹å¯¹åº”æ•°æ®</p>
<h6 data-id="heading-8">æ’æŸ¥é—®é¢˜æ–¹å¼</h6>
<p>æ¨èå¯ä»¥å…ˆçœ‹ä¸‹ä¸ŠåŠéƒ¨åˆ†çš„æ•´ä½“æ•°æ®ï¼Œç¡®è®¤é›†ç¾¤æ˜¯å¦æ­£å¸¸ï¼Œç„¶åå†æŸ¥çœ‹ä¸‹åŠéƒ¨åˆ†ï¼Œç¡®è®¤å‡ºé—®é¢˜çš„å®ä¾‹ã€‚</p>
<p>å‡ºé—®é¢˜çš„ç»´åº¦æœ‰ä¸¤ç§ï¼Œä¸€ç§æ˜¯éƒ¨åˆ†nginxå®ä¾‹æœ‰é—®é¢˜ï¼Œæ­¤æ—¶å¯ä»¥é€šè¿‡æŒ‰ç…§podåˆ†ç»„æŸ¥çœ‹ç›‘æ§æ‰¾åˆ°é—®é¢˜å®ä¾‹ï¼Œè¿˜æœ‰ä¸€ç§æ˜¯æŸä¸ªåç«¯ä»£ç†æœåŠ¡æœ‰é—®é¢˜ï¼Œæ­¤æ—¶å¯ä»¥é€šè¿‡upstreamåˆ†ç»„æŸ¥çœ‹å‡ºé—®é¢˜çš„å…·ä½“åç«¯æœåŠ¡ã€‚</p>
<p>å¦‚æœæ˜¯æŸä¸ªåç«¯æœåŠ¡æœ‰é—®é¢˜ï¼Œæ¯”å¦‚å¤„ç†è¯·æ±‚å¾ˆæ…¢ï¼Œå°±ä¼šå‡ºç°nginxä¸­çš„å¯¹åº”çš„åç«¯ä»£ç†è¿æ¥æ•°æ¿€å¢ï¼Œç„¶åå› ä¸ºè¿æ¥æ•°å¤ªå¤šï¼Œå¯¼è‡´nginxæ•´ä½“å‡ºç°cpuä½¿ç”¨ç‡é«˜ï¼ŒæœåŠ¡æŠ¥é”™ç­‰æƒ…å†µï¼Œé€šè¿‡è¿™ä¸ªupstreamè¿æ¥æ•°çš„ç›‘æ§å°±å¯ä»¥è¯†åˆ«å‡º æœ‰é—®é¢˜çš„åç«¯æœåŠ¡ï¼Œå¿«é€ŸæŸ¥å‡ºé—®é¢˜ã€‚</p>
<br/>
<h4 data-id="heading-9">å¼‚å¸¸ç›‘æ§</h4>
<p>å¼‚å¸¸ç›‘æ§æ˜¯æŒ‡åœ¨ä½¿ç”¨luaå¤„ç†è¯·æ±‚æ—¶ï¼Œå¦‚æœæœ‰å€¼å¾—éœ€è¦æ³¨æ„çš„æƒ…å†µï¼Œå¯ä»¥ä½¿ç”¨errorçº§åˆ«è¿›è¡Œæ‰“å°ï¼ŒåŒæ—¶é€šè¿‡æ—¥å¿—æ”¶é›†ç³»ç»Ÿå°†errorçº§åˆ«çš„æ—¥å¿—è¿‡æ»¤å‡ºæ¥ï¼Œå¯¼å‡ºåˆ°prometheusä¸­ä½œä¸ºç›‘æ§ã€‚ è¿™æ ·ï¼Œä¸šåŠ¡çš„luaå¼‚å¸¸å’Œç³»ç»Ÿçš„å¼‚å¸¸å°±éƒ½å¯¼å…¥åˆ°prometheusä¸­äº†ï¼Œå¯ä»¥é€šè¿‡æŸ¥çœ‹è¿™éƒ¨åˆ†æœ€æ–°çš„æ•°æ®æ¥æ’æŸ¥å½“å‰ç³»ç»Ÿæ˜¯å¦æœ‰é—®é¢˜ï¼Œä¹Ÿå¯ä»¥é€šè¿‡å¢åŠ ç›‘æ§æ¥åŠæ—¶å‘ç°é—®é¢˜ã€‚</p>
<p>å…³äºæ­¤éƒ¨åˆ†ï¼Œä¹Ÿå¯ä»¥æŸ¥çœ‹ç¬”è€…çš„å¦ä¸€ç¯‡æ–‡ç« <a href="https://juejin.cn/post/7580287891274186815" target="_blank" title="https://juejin.cn/post/7580287891274186815">ç›‘æ§åˆ©å™¨ï¼šjavaå¼‚å¸¸ç›‘æ§</a>ï¼Œè¿™ç¯‡æ–‡ç« å…·ä½“ä»‹ç»äº†å¯¼å‡ºjavaå¼‚å¸¸ç›‘æ§çš„ä¼˜åŠ¿å’Œå®ç°æ–¹å¼ã€‚</p>
<h6 data-id="heading-10">å®‰è£…</h6>
<ol>
<li>å¯ä»¥åœ¨éœ€è¦å…³æ³¨çš„åœ°æ–¹æ‰‹åŠ¨åŠ å…¥æ‰“å°ï¼Œä½¿ç”¨errorçº§åˆ«çš„æ—¥å¿—æ‰“å°ï¼Œå¦‚ ngx.log(ngx.ERR, "there is an error")</li>
<li>errorçº§åˆ«çš„æ—¥å¿—åœ¨æ‰“å°æ—¶ä¼šè‡ªå¸¦[error]çš„å­—ç¬¦ï¼Œåœ¨æ—¥å¿—æ”¶é›†ç«¯å°†nginxæ—¥å¿—ä¸­å¸¦æœ‰[error]å­—ç¬¦çš„æ—¥å¿—ç»Ÿä¸€è½¬å­˜åˆ°ä¸€ä¸ªæ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶ä¸­çš„æ—¥å¿—å°±éƒ½æ˜¯erroræ—¥å¿—ï¼ŒåŒ…æ‹¬ç”¨æˆ·æ‰“å°çš„å’Œnginxçš„ç³»ç»Ÿå¼‚å¸¸æ—¥å¿—ã€‚</li>
<li>ä½¿ç”¨mtailè§£æå¼‚å¸¸æ—¥å¿—æ–‡ä»¶ï¼Œå°†nginxçš„å¼‚å¸¸æ—¥å¿—å¯¼å‡ºåˆ°prometheusä¸­</li>
<li>grafanaå¢åŠ ç•Œé¢æ˜¾ç¤ºæœ€æ–°çš„nginxå¼‚å¸¸ï¼Œ<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Ffengdeguisu%2Farticle%2Fblob%2Fmain%2Fopenresty%25E7%259B%2591%25E6%258E%25A7%2Fnginx%25E5%25BC%2582%25E5%25B8%25B8%25E7%259B%2591%25E6%258E%25A7.json" target="_blank" title="https://github.com/fengdeguisu/article/blob/main/openresty%E7%9B%91%E6%8E%A7/nginx%E5%BC%82%E5%B8%B8%E7%9B%91%E6%8E%A7.json" ref="nofollow noopener noreferrer">è¿™æ˜¯jsonæ–‡ä»¶çš„é“¾æ¥</a>,å¯ä»¥é€šè¿‡å¤åˆ¶jsonæ–‡ä»¶çš„å†…å®¹ï¼Œåœ¨grafanaçš„å¯¼å…¥ç•Œé¢å¯¼å…¥ã€‚</li>
</ol>
<h6 data-id="heading-11">ä½¿ç”¨æ–¹å¼</h6>
<p>å¯ä»¥åœ¨ç•Œé¢ç›´æ¥æŸ¥çœ‹ï¼Œæ ¹æ®é€‰æ‹©çš„æ—¥æœŸåŒºé—´ï¼Œä¼šæ˜¾ç¤ºæŒ‡å®šæ—¶é—´èŒƒå›´å†…çš„nginxå¼‚å¸¸ã€‚è¿™ä¸ªç›‘æ§ä¸»è¦æœ‰ä¸‰ç§ç”¨æ³•ï¼š</p>
<ol>
<li>åœ¨prometheusä¸­å¢åŠ ç›‘æ§è§„åˆ™ï¼Œå½“æŸä¸€æ—¶åˆ»çªç„¶å‡ºç°å¾ˆå¤šå¼‚å¸¸æ—¶è§¦å‘æŠ¥è­¦ï¼Œç”¨äºåŠæ—¶å‘ç°é—®é¢˜</li>
<li>åœ¨æ’æŸ¥nginxçš„é—®é¢˜æ—¶ï¼ŒæŸ¥çœ‹æ­¤ç›‘æ§ï¼Œå¯èƒ½ä¼šå‘ç°ä¸€äº›ç³»ç»Ÿå¼‚å¸¸ï¼Œè¯´ä¸å®šå°±èƒ½ç›´æ¥æ‰¾åˆ°é—®é¢˜åŸå› </li>
<li>åœ¨æ’æŸ¥é—®é¢˜ç»“æŸåï¼ŒæŸ¥çœ‹æ­¤ç›‘æ§ï¼Œåªæœ‰ç¡®ä¿è¿™ä¸ªç›‘æ§ä¸­çš„æœ€è¿‘å‡ åˆ†é’Ÿå·²ç»ç¡®å®æ²¡æœ‰æ–°å¼‚å¸¸äº†ï¼Œæ‰èƒ½å¤§æ¦‚ç‡è¯´æ˜nginxçš„é—®é¢˜è¢«è§£å†³äº†ï¼Œåªè¦è¿˜æœ‰ä¸æ–­åœ°æ–°å¢å¼‚å¸¸ï¼Œè¯´æ˜é—®é¢˜å¹¶æœªå½»åº•è§£å†³ã€‚</li>
</ol>
<h4 data-id="heading-12">ç»“è¯­</h4>
<p>ä»¥ä¸Šå°±æ˜¯è¿™ç¯‡æ–‡ç« çš„å†…å®¹ï¼Œä¸»è¦ä»‹ç»äº†ä¸¤ç§openrestyçš„ç›‘æ§æ–¹å¼ï¼Œå¸Œæœ›å¯¹å¤§å®¶ç›‘æ§å’Œæ’æŸ¥nginxé—®é¢˜æœ‰å¸®åŠ©ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Redisson å®æˆ˜æŒ‡å—]]></title>    <link>https://juejin.cn/post/7588104741610323978</link>    <guid>https://juejin.cn/post/7588104741610323978</guid>    <pubDate>2025-12-27T14:44:59.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588104741610323978" data-draft-id="7588067055481913353" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Redisson å®æˆ˜æŒ‡å—"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-27T14:44:59.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="GKunLi"/> <meta itemprop="url" content="https://juejin.cn/user/430664725579725"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Redisson å®æˆ˜æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/430664725579725/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    GKunLi
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-27T14:44:59.000Z" title="Sat Dec 27 2025 14:44:59 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»33åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Redissonï¼šåˆ†å¸ƒå¼ç³»ç»Ÿçš„Javaç¥å™¨ ğŸš€</h2>
<p>Redissonæ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§ã€è®¾è®¡ä¼˜é›…çš„Redis Javaå®¢æˆ·ç«¯ï¼Œå®ƒä¸ä»…ä»…æ˜¯ä¸€ä¸ªç®€å•çš„Redisè¿æ¥å™¨ï¼Œæ›´æ˜¯ä¸€ä¸ªå®Œæ•´çš„åˆ†å¸ƒå¼è§£å†³æ–¹æ¡ˆï¼æƒ³è±¡ä¸€ä¸‹ï¼Œå¦‚æœä½ æ­£åœ¨æ„å»ºä¸€ä¸ªé«˜å¹¶å‘çš„ç”µå•†å¹³å°ï¼Œéœ€è¦å¤„ç†å¤§é‡ç”¨æˆ·çš„ç§’æ€è¯·æ±‚ï¼Œæˆ–è€…éœ€è¦åœ¨å¤šä¸ªæœåŠ¡å®ä¾‹ä¹‹é—´å…±äº«ä¼šè¯çŠ¶æ€ï¼ŒRedissonå°±æ˜¯ä½ çš„å¾—åŠ›åŠ©æ‰‹ã€‚</p>
<p><strong>Redissonçš„æ ¸å¿ƒç‰¹ç‚¹ï¼š</strong></p>
<ul>
<li>ğŸ¯ <strong>ä¸°å¯Œçš„åˆ†å¸ƒå¼å¯¹è±¡</strong>ï¼šæä¾›åˆ†å¸ƒå¼é”ã€é›†åˆã€è®¡æ•°å™¨ç­‰Javaå¸¸ç”¨å¯¹è±¡</li>
<li>âš¡ <strong>é«˜æ€§èƒ½</strong>ï¼šåŸºäºNettyå®ç°ï¼Œæ€§èƒ½å“è¶Š</li>
<li>ğŸ”’ <strong>åˆ†å¸ƒå¼é”</strong>ï¼šæ”¯æŒå¯é‡å…¥é”ã€å…¬å¹³é”ã€è”é”ç­‰å¤šç§é”ç±»å‹</li>
<li>ğŸ“Š <strong>åˆ†å¸ƒå¼é›†åˆ</strong>ï¼šæä¾›Mapã€Setã€Listã€Queueç­‰åˆ†å¸ƒå¼é›†åˆç±»å‹</li>
<li>ğŸª <strong>é«˜çº§åŠŸèƒ½</strong>ï¼šæ”¯æŒå¸ƒéš†è¿‡æ»¤å™¨ã€å»¶è¿Ÿé˜Ÿåˆ—ã€åˆ†å¸ƒå¼æœåŠ¡ç­‰</li>
<li>ğŸŒ <strong>å¤šRedisæ¨¡å¼</strong>ï¼šæ”¯æŒå•æœºã€ä¸»ä»ã€å“¨å…µã€é›†ç¾¤ç­‰å¤šç§Rediséƒ¨ç½²æ¨¡å¼</li>
</ul>
<p>Redissonè®©åˆ†å¸ƒå¼ç³»ç»Ÿçš„å¼€å‘å˜å¾—ç®€å•è€Œæœ‰è¶£ï¼Œè®©ä½ çš„ä»£ç åœ¨åˆ†å¸ƒå¼ç¯å¢ƒä¸­ä¹Ÿèƒ½åƒå•æœºåº”ç”¨ä¸€æ ·ä¼˜é›…åœ°è¿è¡Œã€‚</p>
<h2 data-id="heading-1">é«˜çº§åŠŸèƒ½å®æˆ˜</h2>
<h3 data-id="heading-2">1. åˆ†å¸ƒå¼é”</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.redisson.api.RLock;
<span class="hljs-keyword">import</span> org.redisson.api.RedissonClient;
<span class="hljs-keyword">import</span> java.util.concurrent.TimeUnit;
<span class="hljs-keyword">import</span> java.util.concurrent.locks.Lock;

<span class="hljs-comment">/**
 * åˆ†å¸ƒå¼é”ç”Ÿäº§çº§ä½¿ç”¨ç¤ºä¾‹
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DistributedLockExample</span> {
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> RedissonClient redissonClient;
    
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">DistributedLockExample</span><span class="hljs-params">(RedissonClient redissonClient)</span> {
        <span class="hljs-built_in">this</span>.redissonClient = redissonClient;
    }
    
    <span class="hljs-comment">/**
     * å¸¦è¶…æ—¶æ§åˆ¶çš„åˆ†å¸ƒå¼é”
     * 
     * <span class="hljs-doctag">@param</span> lockKey é”çš„key
     * <span class="hljs-doctag">@param</span> leaseTime è‡ªåŠ¨é‡Šæ”¾æ—¶é—´
     * <span class="hljs-doctag">@param</span> unit æ—¶é—´å•ä½
     * <span class="hljs-doctag">@param</span> task éœ€è¦æ‰§è¡Œçš„ä»»åŠ¡
     * <span class="hljs-doctag">@return</span> ä»»åŠ¡æ‰§è¡Œç»“æœ
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">executeWithLock</span><span class="hljs-params">(String lockKey, <span class="hljs-type">long</span> leaseTime, TimeUnit unit, Runnable task)</span> {
        <span class="hljs-type">RLock</span> <span class="hljs-variable">lock</span> <span class="hljs-operator">=</span> redissonClient.getLock(lockKey);
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// å°è¯•è·å–é”ï¼Œæœ€å¤šç­‰å¾…10ç§’ï¼Œé”è‡ªåŠ¨é‡Šæ”¾æ—¶é—´ä¸ºleaseTime</span>
            <span class="hljs-type">boolean</span> <span class="hljs-variable">acquired</span> <span class="hljs-operator">=</span> lock.tryLock(<span class="hljs-number">10</span>, leaseTime, unit);
            <span class="hljs-keyword">if</span> (acquired) {
                <span class="hljs-keyword">try</span> {
                    <span class="hljs-comment">// æ‰§è¡Œä¸šåŠ¡é€»è¾‘</span>
                    task.run();
                    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
                } <span class="hljs-keyword">finally</span> {
                    <span class="hljs-comment">// ç¡®ä¿é”è¢«é‡Šæ”¾ï¼Œé˜²æ­¢æ­»é”</span>
                    <span class="hljs-keyword">if</span> (lock.isHeldByCurrentThread()) {
                        lock.unlock();
                    }
                }
            } <span class="hljs-keyword">else</span> {
                System.out.println(<span class="hljs-string">"è·å–é”å¤±è´¥ï¼Œé”å·²è¢«å…¶ä»–çº¿ç¨‹æŒæœ‰: "</span> + lockKey);
                <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
            }
        } <span class="hljs-keyword">catch</span> (InterruptedException e) {
            Thread.currentThread().interrupt();
            System.err.println(<span class="hljs-string">"è·å–é”è¿‡ç¨‹ä¸­è¢«ä¸­æ–­: "</span> + e.getMessage());
            <span class="hljs-comment">// æ¢å¤ä¸­æ–­çŠ¶æ€</span>
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        }
    }
    
    <span class="hljs-comment">/**
     * çœ‹é—¨ç‹—æ¨¡å¼é” - è‡ªåŠ¨ç»­æœŸ
     * 
     * <span class="hljs-doctag">@param</span> lockKey é”çš„key
     * <span class="hljs-doctag">@param</span> task éœ€è¦æ‰§è¡Œçš„ä»»åŠ¡
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">executeWithWatchdogLock</span><span class="hljs-params">(String lockKey, Runnable task)</span> {
        <span class="hljs-type">RLock</span> <span class="hljs-variable">lock</span> <span class="hljs-operator">=</span> redissonClient.getLock(lockKey);
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// ä½¿ç”¨çœ‹é—¨ç‹—æ¨¡å¼ï¼ŒRedissonä¼šè‡ªåŠ¨ç»­æœŸ</span>
            lock.lock(<span class="hljs-number">30</span>, TimeUnit.SECONDS);
            <span class="hljs-keyword">try</span> {
                task.run();
                <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
            } <span class="hljs-keyword">finally</span> {
                <span class="hljs-comment">// ç¡®ä¿é”è¢«é‡Šæ”¾</span>
                <span class="hljs-keyword">if</span> (lock.isHeldByCurrentThread()) {
                    lock.unlock();
                }
            }
        } <span class="hljs-keyword">catch</span> (Exception e) {
            System.err.println(<span class="hljs-string">"æ‰§è¡Œå¸¦é”ä»»åŠ¡æ—¶å‘ç”Ÿå¼‚å¸¸: "</span> + e.getMessage());
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        }
    }
}
</code></pre>
<h3 data-id="heading-3">2. åˆ†å¸ƒå¼é›†åˆ</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.redisson.api.RList;
<span class="hljs-keyword">import</span> org.redisson.api.RMap;
<span class="hljs-keyword">import</span> org.redisson.api.RSet;
<span class="hljs-keyword">import</span> org.redisson.api.RedissonClient;
<span class="hljs-keyword">import</span> java.util.Collection;
<span class="hljs-keyword">import</span> java.util.Map;

<span class="hljs-comment">/**
 * åˆ†å¸ƒå¼é›†åˆç”Ÿäº§çº§ä½¿ç”¨ç¤ºä¾‹
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DistributedCollectionsExample</span> {
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> RedissonClient redissonClient;
    
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">DistributedCollectionsExample</span><span class="hljs-params">(RedissonClient redissonClient)</span> {
        <span class="hljs-built_in">this</span>.redissonClient = redissonClient;
    }
    
    <span class="hljs-comment">/**
     * åˆ†å¸ƒå¼åˆ—è¡¨æ“ä½œ
     * 
     * <span class="hljs-doctag">@param</span> listName åˆ—è¡¨åç§°
     * <span class="hljs-doctag">@param</span> items è¦æ·»åŠ çš„é¡¹ç›®
     * <span class="hljs-doctag">@return</span> æ“ä½œç»“æœ
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">operateList</span><span class="hljs-params">(String listName, Collection&lt;String&gt; items)</span> {
        <span class="hljs-keyword">try</span> {
            RList&lt;String&gt; list = redissonClient.getList(listName);
            
            <span class="hljs-comment">// æ·»åŠ å¤šä¸ªå…ƒç´ </span>
            list.addAll(items);
            
            <span class="hljs-comment">// è·å–åˆ—è¡¨å¤§å°</span>
            <span class="hljs-type">int</span> <span class="hljs-variable">size</span> <span class="hljs-operator">=</span> list.size();
            System.out.println(<span class="hljs-string">"åˆ—è¡¨ "</span> + listName + <span class="hljs-string">" çš„å¤§å°: "</span> + size);
            
            <span class="hljs-comment">// è·å–æŒ‡å®šèŒƒå›´çš„å…ƒç´ </span>
            <span class="hljs-keyword">if</span> (size &gt; <span class="hljs-number">0</span>) {
                <span class="hljs-type">int</span> <span class="hljs-variable">endIndex</span> <span class="hljs-operator">=</span> Math.min(<span class="hljs-number">10</span>, size); <span class="hljs-comment">// æœ€å¤šå–10ä¸ªå…ƒç´ </span>
                java.util.List&lt;String&gt; subList = list.subList(<span class="hljs-number">0</span>, endIndex);
                System.out.println(<span class="hljs-string">"åˆ—è¡¨å‰"</span> + endIndex + <span class="hljs-string">"ä¸ªå…ƒç´ : "</span> + subList);
            }
            
            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
        } <span class="hljs-keyword">catch</span> (Exception e) {
            System.err.println(<span class="hljs-string">"æ“ä½œåˆ—è¡¨æ—¶å‘ç”Ÿå¼‚å¸¸: "</span> + e.getMessage());
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        }
    }
    
    <span class="hljs-comment">/**
     * åˆ†å¸ƒå¼Mapæ“ä½œ
     * 
     * <span class="hljs-doctag">@param</span> mapName Mapåç§°
     * <span class="hljs-doctag">@param</span> data è¦å­˜å‚¨çš„æ•°æ®
     * <span class="hljs-doctag">@return</span> æ“ä½œç»“æœ
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">operateMap</span><span class="hljs-params">(String mapName, Map&lt;String, Object&gt; data)</span> {
        <span class="hljs-keyword">try</span> {
            RMap&lt;String, Object&gt; map = redissonClient.getMap(mapName);
            
            <span class="hljs-comment">// æ‰¹é‡æ·»åŠ æ•°æ®</span>
            map.putAll(data);
            
            <span class="hljs-comment">// åŸå­æ€§æ“ä½œç¤ºä¾‹ï¼šä»…å½“keyä¸å­˜åœ¨æ—¶æ‰æ·»åŠ </span>
            map.putIfAbsent(<span class="hljs-string">"newKey"</span>, <span class="hljs-string">"newValue"</span>);
            
            <span class="hljs-comment">// è·å–æ‰€æœ‰é”®å€¼å¯¹</span>
            System.out.println(<span class="hljs-string">"Map "</span> + mapName + <span class="hljs-string">" çš„æ‰€æœ‰é”®å€¼å¯¹: "</span> + map.readAllMap());
            
            <span class="hljs-comment">// è·å–Mapå¤§å°</span>
            <span class="hljs-type">int</span> <span class="hljs-variable">size</span> <span class="hljs-operator">=</span> map.size();
            System.out.println(<span class="hljs-string">"Map "</span> + mapName + <span class="hljs-string">" çš„å¤§å°: "</span> + size);
            
            <span class="hljs-comment">// å®‰å…¨åˆ é™¤é”®å€¼å¯¹</span>
            <span class="hljs-type">Object</span> <span class="hljs-variable">removedValue</span> <span class="hljs-operator">=</span> map.remove(<span class="hljs-string">"tempKey"</span>);
            System.out.println(<span class="hljs-string">"åˆ é™¤çš„é”®å€¼å¯¹: "</span> + removedValue);
            
            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
        } <span class="hljs-keyword">catch</span> (Exception e) {
            System.err.println(<span class="hljs-string">"æ“ä½œMapæ—¶å‘ç”Ÿå¼‚å¸¸: "</span> + e.getMessage());
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        }
    }
    
    <span class="hljs-comment">/**
     * åˆ†å¸ƒå¼Setæ“ä½œ
     * 
     * <span class="hljs-doctag">@param</span> setName Setåç§°
     * <span class="hljs-doctag">@param</span> elements è¦æ·»åŠ çš„å…ƒç´ 
     * <span class="hljs-doctag">@return</span> æ“ä½œç»“æœ
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">operateSet</span><span class="hljs-params">(String setName, Collection&lt;String&gt; elements)</span> {
        <span class="hljs-keyword">try</span> {
            RSet&lt;String&gt; set = redissonClient.getSet(setName);
            
            <span class="hljs-comment">// æ·»åŠ å…ƒç´ å¹¶è¿”å›æ˜¯å¦æˆåŠŸæ·»åŠ ï¼ˆtrueè¡¨ç¤ºå…ƒç´ ä¸å­˜åœ¨ï¼Œfalseè¡¨ç¤ºå·²å­˜åœ¨ï¼‰</span>
            <span class="hljs-keyword">for</span> (String element : elements) {
                <span class="hljs-type">boolean</span> <span class="hljs-variable">added</span> <span class="hljs-operator">=</span> set.add(element);
                <span class="hljs-keyword">if</span> (!added) {
                    System.out.println(<span class="hljs-string">"å…ƒç´ å·²å­˜åœ¨: "</span> + element);
                }
            }
            
            <span class="hljs-comment">// æ£€æŸ¥å…ƒç´ æ˜¯å¦å­˜åœ¨</span>
            <span class="hljs-type">boolean</span> <span class="hljs-variable">contains</span> <span class="hljs-operator">=</span> set.contains(<span class="hljs-string">"checkElement"</span>);
            System.out.println(<span class="hljs-string">"Set "</span> + setName + <span class="hljs-string">" åŒ…å« 'checkElement': "</span> + contains);
            
            <span class="hljs-comment">// è·å–Setå¤§å°</span>
            <span class="hljs-type">int</span> <span class="hljs-variable">size</span> <span class="hljs-operator">=</span> set.size();
            System.out.println(<span class="hljs-string">"Set "</span> + setName + <span class="hljs-string">" çš„å¤§å°: "</span> + size);
            
            <span class="hljs-comment">// è·å–æ‰€æœ‰å…ƒç´ </span>
            java.util.Set&lt;String&gt; allElements = set.readAll();
            System.out.println(<span class="hljs-string">"Set "</span> + setName + <span class="hljs-string">" çš„æ‰€æœ‰å…ƒç´ : "</span> + allElements);
            
            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
        } <span class="hljs-keyword">catch</span> (Exception e) {
            System.err.println(<span class="hljs-string">"æ“ä½œSetæ—¶å‘ç”Ÿå¼‚å¸¸: "</span> + e.getMessage());
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        }
    }
}
</code></pre>
<h3 data-id="heading-4">3. åˆ†å¸ƒå¼è®¡æ•°å™¨</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.redisson.api.RAtomicLong;
<span class="hljs-keyword">import</span> org.redisson.api.RCountDownLatch;
<span class="hljs-keyword">import</span> org.redisson.api.RedissonClient;
<span class="hljs-keyword">import</span> java.util.concurrent.TimeUnit;

<span class="hljs-comment">/**
 * åˆ†å¸ƒå¼è®¡æ•°å™¨ç”Ÿäº§çº§ä½¿ç”¨ç¤ºä¾‹
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DistributedCountersExample</span> {
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> RedissonClient redissonClient;
    
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">DistributedCountersExample</span><span class="hljs-params">(RedissonClient redissonClient)</span> {
        <span class="hljs-built_in">this</span>.redissonClient = redissonClient;
    }
    
    <span class="hljs-comment">/**
     * åŸå­é•¿æ•´å‹è®¡æ•°å™¨æ“ä½œ
     * 
     * <span class="hljs-doctag">@param</span> counterName è®¡æ•°å™¨åç§°
     * <span class="hljs-doctag">@return</span> å½“å‰è®¡æ•°å€¼
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">long</span> <span class="hljs-title function_">operateAtomicCounter</span><span class="hljs-params">(String counterName)</span> {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-type">RAtomicLong</span> <span class="hljs-variable">atomicLong</span> <span class="hljs-operator">=</span> redissonClient.getAtomicLong(counterName);
            
            <span class="hljs-comment">// åŸå­é€’å¢å¹¶è¿”å›æ–°å€¼</span>
            <span class="hljs-type">long</span> <span class="hljs-variable">newValue</span> <span class="hljs-operator">=</span> atomicLong.incrementAndGet();
            System.out.println(<span class="hljs-string">"è®¡æ•°å™¨ "</span> + counterName + <span class="hljs-string">" é€’å¢åå€¼: "</span> + newValue);
            
            <span class="hljs-comment">// åŸå­é€’å‡å¹¶è¿”å›æ–°å€¼</span>
            <span class="hljs-type">long</span> <span class="hljs-variable">decrementedValue</span> <span class="hljs-operator">=</span> atomicLong.decrementAndGet();
            System.out.println(<span class="hljs-string">"è®¡æ•°å™¨ "</span> + counterName + <span class="hljs-string">" é€’å‡åå€¼: "</span> + decrementedValue);
            
            <span class="hljs-comment">// è·å–å½“å‰å€¼</span>
            <span class="hljs-type">long</span> <span class="hljs-variable">currentValue</span> <span class="hljs-operator">=</span> atomicLong.get();
            System.out.println(<span class="hljs-string">"è®¡æ•°å™¨ "</span> + counterName + <span class="hljs-string">" å½“å‰å€¼: "</span> + currentValue);
            
            <span class="hljs-comment">// æ¡ä»¶æ›´æ–° - CASæ“ä½œ</span>
            <span class="hljs-type">boolean</span> <span class="hljs-variable">updated</span> <span class="hljs-operator">=</span> atomicLong.compareAndSet(currentValue, currentValue + <span class="hljs-number">10</span>);
            <span class="hljs-keyword">if</span> (updated) {
                System.out.println(<span class="hljs-string">"è®¡æ•°å™¨ "</span> + counterName + <span class="hljs-string">" CASæ›´æ–°æˆåŠŸ"</span>);
            } <span class="hljs-keyword">else</span> {
                System.out.println(<span class="hljs-string">"è®¡æ•°å™¨ "</span> + counterName + <span class="hljs-string">" CASæ›´æ–°å¤±è´¥"</span>);
            }
            
            <span class="hljs-keyword">return</span> atomicLong.get();
        } <span class="hljs-keyword">catch</span> (Exception e) {
            System.err.println(<span class="hljs-string">"æ“ä½œåŸå­è®¡æ•°å™¨æ—¶å‘ç”Ÿå¼‚å¸¸: "</span> + e.getMessage());
            <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span>;
        }
    }
    
    <span class="hljs-comment">/**
     * åˆ†å¸ƒå¼CountDownLatchæ“ä½œ
     * 
     * <span class="hljs-doctag">@param</span> latchName å€’è®¡æ—¶å™¨åç§°
     * <span class="hljs-doctag">@param</span> count åˆå§‹è®¡æ•°
     * <span class="hljs-doctag">@param</span> task å¾…æ‰§è¡Œçš„ä»»åŠ¡
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">operateCountDownLatch</span><span class="hljs-params">(String latchName, <span class="hljs-type">int</span> count, Runnable task)</span> {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-type">RCountDownLatch</span> <span class="hljs-variable">latch</span> <span class="hljs-operator">=</span> redissonClient.getCountDownLatch(latchName);
            
            <span class="hljs-comment">// è®¾ç½®åˆå§‹è®¡æ•°ï¼ˆä»…åœ¨è®¡æ•°ä¸º0æ—¶æœ‰æ•ˆï¼‰</span>
            <span class="hljs-keyword">if</span> (latch.getCount() == <span class="hljs-number">0</span>) {
                latch.trySetCount(count);
            }
            
            System.out.println(<span class="hljs-string">"å€’è®¡æ—¶å™¨ "</span> + latchName + <span class="hljs-string">" åˆå§‹è®¡æ•°: "</span> + latch.getCount());
            
            <span class="hljs-comment">// å¯åŠ¨ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œä»»åŠ¡å¹¶å€’è®¡æ—¶</span>
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(() -&gt; {
                <span class="hljs-keyword">try</span> {
                    task.run();
                    <span class="hljs-comment">// ä»»åŠ¡å®Œæˆï¼Œå€’è®¡æ—¶</span>
                    latch.countDown();
                    System.out.println(<span class="hljs-string">"ä»»åŠ¡å®Œæˆï¼Œå€’è®¡æ—¶å™¨ "</span> + latchName + <span class="hljs-string">" å‡1"</span>);
                } <span class="hljs-keyword">catch</span> (Exception e) {
                    System.err.println(<span class="hljs-string">"æ‰§è¡Œä»»åŠ¡æ—¶å‘ç”Ÿå¼‚å¸¸: "</span> + e.getMessage());
                }
            }).start();
            
            <span class="hljs-comment">// ç­‰å¾…æ‰€æœ‰ä»»åŠ¡å®Œæˆï¼ˆå¸¦è¶…æ—¶ï¼‰</span>
            <span class="hljs-type">boolean</span> <span class="hljs-variable">completed</span> <span class="hljs-operator">=</span> latch.await(<span class="hljs-number">30</span>, TimeUnit.SECONDS);
            <span class="hljs-keyword">if</span> (completed) {
                System.out.println(<span class="hljs-string">"æ‰€æœ‰ä»»åŠ¡å·²å®Œæˆ"</span>);
            } <span class="hljs-keyword">else</span> {
                System.out.println(<span class="hljs-string">"ç­‰å¾…è¶…æ—¶ï¼Œä»»åŠ¡å¯èƒ½æœªå®Œæˆ"</span>);
            }
            
        } <span class="hljs-keyword">catch</span> (InterruptedException e) {
            Thread.currentThread().interrupt();
            System.err.println(<span class="hljs-string">"ç­‰å¾…å€’è®¡æ—¶å™¨æ—¶è¢«ä¸­æ–­: "</span> + e.getMessage());
        } <span class="hljs-keyword">catch</span> (Exception e) {
            System.err.println(<span class="hljs-string">"æ“ä½œå€’è®¡æ—¶å™¨æ—¶å‘ç”Ÿå¼‚å¸¸: "</span> + e.getMessage());
        }
    }
}
</code></pre>
<h3 data-id="heading-5">4. ä¿¡å·é‡ (Semaphore)</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.redisson.api.RSemaphore;
<span class="hljs-keyword">import</span> org.redisson.api.RedissonClient;
<span class="hljs-keyword">import</span> java.util.concurrent.TimeUnit;

<span class="hljs-comment">/**
 * ä¿¡å·é‡ç”Ÿäº§çº§ä½¿ç”¨ç¤ºä¾‹
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SemaphoreExample</span> {
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> RedissonClient redissonClient;
    
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">SemaphoreExample</span><span class="hljs-params">(RedissonClient redissonClient)</span> {
        <span class="hljs-built_in">this</span>.redissonClient = redissonClient;
    }
    
    <span class="hljs-comment">/**
     * ä¿¡å·é‡èµ„æºè®¿é—®æ§åˆ¶
     * 
     * <span class="hljs-doctag">@param</span> semaphoreName ä¿¡å·é‡åç§°
     * <span class="hljs-doctag">@param</span> permits åˆå§‹è®¸å¯è¯æ•°é‡
     * <span class="hljs-doctag">@param</span> task éœ€è¦é™åˆ¶å¹¶å‘çš„ä»»åŠ¡
     * <span class="hljs-doctag">@return</span> æ“ä½œç»“æœ
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">controlAccessWithSemaphore</span><span class="hljs-params">(String semaphoreName, <span class="hljs-type">int</span> <span class="hljs-keyword">permits</span>, Runnable task)</span> {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-type">RSemaphore</span> <span class="hljs-variable">semaphore</span> <span class="hljs-operator">=</span> redissonClient.getSemaphore(semaphoreName);
            
            <span class="hljs-comment">// åˆå§‹åŒ–è®¸å¯è¯æ•°é‡ï¼ˆä»…åœ¨è®¸å¯è¯ä¸º0æ—¶è®¾ç½®ï¼‰</span>
            semaphore.trySetPermits(<span class="hljs-keyword">permits</span>);
            
            <span class="hljs-comment">// è·å–è®¸å¯è¯ï¼ˆå¸¦è¶…æ—¶ï¼‰</span>
            <span class="hljs-type">boolean</span> <span class="hljs-variable">acquired</span> <span class="hljs-operator">=</span> semaphore.tryAcquire(<span class="hljs-number">5</span>, TimeUnit.SECONDS);
            <span class="hljs-keyword">if</span> (acquired) {
                <span class="hljs-keyword">try</span> {
                    System.out.println(<span class="hljs-string">"è·å–åˆ°è®¸å¯è¯ï¼Œå¼€å§‹æ‰§è¡Œä»»åŠ¡"</span>);
                    task.run();
                    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
                } <span class="hljs-keyword">finally</span> {
                    <span class="hljs-comment">// é‡Šæ”¾è®¸å¯è¯</span>
                    semaphore.release();
                    System.out.println(<span class="hljs-string">"ä»»åŠ¡å®Œæˆï¼Œé‡Šæ”¾è®¸å¯è¯"</span>);
                }
            } <span class="hljs-keyword">else</span> {
                System.out.println(<span class="hljs-string">"è·å–è®¸å¯è¯è¶…æ—¶ï¼Œèµ„æºè®¿é—®å—é™"</span>);
                <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
            }
        } <span class="hljs-keyword">catch</span> (InterruptedException e) {
            Thread.currentThread().interrupt();
            System.err.println(<span class="hljs-string">"è·å–è®¸å¯è¯æ—¶è¢«ä¸­æ–­: "</span> + e.getMessage());
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        } <span class="hljs-keyword">catch</span> (Exception e) {
            System.err.println(<span class="hljs-string">"ä½¿ç”¨ä¿¡å·é‡æ—¶å‘ç”Ÿå¼‚å¸¸: "</span> + e.getMessage());
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        }
    }
    
    <span class="hljs-comment">/**
     * æ‰¹é‡è·å–å’Œé‡Šæ”¾è®¸å¯è¯
     * 
     * <span class="hljs-doctag">@param</span> semaphoreName ä¿¡å·é‡åç§°
     * <span class="hljs-doctag">@param</span> permitsToAcquire è¦è·å–çš„è®¸å¯è¯æ•°é‡
     * <span class="hljs-doctag">@param</span> permitsToRelease è¦é‡Šæ”¾çš„è®¸å¯è¯æ•°é‡
     * <span class="hljs-doctag">@return</span> æ“ä½œç»“æœ
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">batchOperateSemaphore</span><span class="hljs-params">(String semaphoreName, <span class="hljs-type">int</span> permitsToAcquire, <span class="hljs-type">int</span> permitsToRelease)</span> {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-type">RSemaphore</span> <span class="hljs-variable">semaphore</span> <span class="hljs-operator">=</span> redissonClient.getSemaphore(semaphoreName);
            
            <span class="hljs-comment">// æ‰¹é‡è·å–è®¸å¯è¯</span>
            <span class="hljs-type">boolean</span> <span class="hljs-variable">acquired</span> <span class="hljs-operator">=</span> semaphore.tryAcquire(permitsToAcquire, <span class="hljs-number">10</span>, TimeUnit.SECONDS);
            <span class="hljs-keyword">if</span> (acquired) {
                <span class="hljs-keyword">try</span> {
                    System.out.println(<span class="hljs-string">"æ‰¹é‡è·å– "</span> + permitsToAcquire + <span class="hljs-string">" ä¸ªè®¸å¯è¯æˆåŠŸ"</span>);
                    <span class="hljs-comment">// æ‰§è¡Œéœ€è¦å¤šè®¸å¯è¯çš„ä»»åŠ¡</span>
                    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
                } <span class="hljs-keyword">finally</span> {
                    <span class="hljs-comment">// æ‰¹é‡é‡Šæ”¾è®¸å¯è¯</span>
                    semaphore.release(permitsToRelease);
                    System.out.println(<span class="hljs-string">"æ‰¹é‡é‡Šæ”¾ "</span> + permitsToRelease + <span class="hljs-string">" ä¸ªè®¸å¯è¯"</span>);
                }
            } <span class="hljs-keyword">else</span> {
                System.out.println(<span class="hljs-string">"æ‰¹é‡è·å– "</span> + permitsToAcquire + <span class="hljs-string">" ä¸ªè®¸å¯è¯å¤±è´¥"</span>);
                <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
            }
        } <span class="hljs-keyword">catch</span> (InterruptedException e) {
            Thread.currentThread().interrupt();
            System.err.println(<span class="hljs-string">"æ‰¹é‡è·å–è®¸å¯è¯æ—¶è¢«ä¸­æ–­: "</span> + e.getMessage());
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        } <span class="hljs-keyword">catch</span> (Exception e) {
            System.err.println(<span class="hljs-string">"æ‰¹é‡æ“ä½œä¿¡å·é‡æ—¶å‘ç”Ÿå¼‚å¸¸: "</span> + e.getMessage());
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        }
    }
}
</code></pre>
<h3 data-id="heading-6">5. åˆ†å¸ƒå¼é˜Ÿåˆ—</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.redisson.api.RBlockingQueue;
<span class="hljs-keyword">import</span> org.redisson.api.RQueue;
<span class="hljs-keyword">import</span> org.redisson.api.RedissonClient;
<span class="hljs-keyword">import</span> java.util.concurrent.TimeUnit;

<span class="hljs-comment">/**
 * åˆ†å¸ƒå¼é˜Ÿåˆ—ç”Ÿäº§çº§ä½¿ç”¨ç¤ºä¾‹
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DistributedQueueExample</span> {
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> RedissonClient redissonClient;
    
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">DistributedQueueExample</span><span class="hljs-params">(RedissonClient redissonClient)</span> {
        <span class="hljs-built_in">this</span>.redissonClient = redissonClient;
    }
    
    <span class="hljs-comment">/**
     * æ™®é€šé˜Ÿåˆ—æ“ä½œ
     * 
     * <span class="hljs-doctag">@param</span> queueName é˜Ÿåˆ—åç§°
     * <span class="hljs-doctag">@param</span> items è¦æ·»åŠ çš„é¡¹ç›®
     * <span class="hljs-doctag">@return</span> æ“ä½œç»“æœ
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">operateQueue</span><span class="hljs-params">(String queueName, java.util.List&lt;String&gt; items)</span> {
        <span class="hljs-keyword">try</span> {
            RQueue&lt;String&gt; queue = redissonClient.getQueue(queueName);
            
            <span class="hljs-comment">// æ·»åŠ å¤šä¸ªå…ƒç´ åˆ°é˜Ÿåˆ—</span>
            <span class="hljs-keyword">for</span> (String item : items) {
                <span class="hljs-type">boolean</span> <span class="hljs-variable">added</span> <span class="hljs-operator">=</span> queue.offer(item);
                <span class="hljs-keyword">if</span> (!added) {
                    System.out.println(<span class="hljs-string">"é˜Ÿåˆ—å·²æ»¡ï¼Œæ— æ³•æ·»åŠ å…ƒç´ : "</span> + item);
                }
            }
            
            <span class="hljs-comment">// è·å–é˜Ÿåˆ—å¤§å°</span>
            <span class="hljs-type">int</span> <span class="hljs-variable">size</span> <span class="hljs-operator">=</span> queue.size();
            System.out.println(<span class="hljs-string">"é˜Ÿåˆ— "</span> + queueName + <span class="hljs-string">" å½“å‰å¤§å°: "</span> + size);
            
            <span class="hljs-comment">// éé˜»å¡è·å–å…ƒç´ </span>
            <span class="hljs-type">String</span> <span class="hljs-variable">element</span> <span class="hljs-operator">=</span> queue.poll(); <span class="hljs-comment">// è·å–å¹¶ç§»é™¤é˜Ÿé¦–å…ƒç´ ï¼Œå¦‚æœé˜Ÿåˆ—ä¸ºç©ºè¿”å›null</span>
            <span class="hljs-keyword">if</span> (element != <span class="hljs-literal">null</span>) {
                System.out.println(<span class="hljs-string">"ä»é˜Ÿåˆ—è·å–å…ƒç´ : "</span> + element);
            } <span class="hljs-keyword">else</span> {
                System.out.println(<span class="hljs-string">"é˜Ÿåˆ—ä¸ºç©º"</span>);
            }
            
            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
        } <span class="hljs-keyword">catch</span> (Exception e) {
            System.err.println(<span class="hljs-string">"æ“ä½œé˜Ÿåˆ—æ—¶å‘ç”Ÿå¼‚å¸¸: "</span> + e.getMessage());
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        }
    }
    
}
</code></pre>
<h3 data-id="heading-7">6. å»¶è¿Ÿé˜Ÿåˆ— (Delayed Queue)</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.redisson.api.RBlockingQueue;
<span class="hljs-keyword">import</span> org.redisson.api.RDelayedQueue;
<span class="hljs-keyword">import</span> org.redisson.api.RedissonClient;
<span class="hljs-keyword">import</span> java.util.concurrent.TimeUnit;

<span class="hljs-comment">/**
 * å»¶è¿Ÿé˜Ÿåˆ—ç”Ÿäº§çº§ä½¿ç”¨ç¤ºä¾‹
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DelayedQueueExample</span> {
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> RedissonClient redissonClient;
    
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">DelayedQueueExample</span><span class="hljs-params">(RedissonClient redissonClient)</span> {
        <span class="hljs-built_in">this</span>.redissonClient = redissonClient;
    }
    
    <span class="hljs-comment">/**
     * å»¶è¿Ÿé˜Ÿåˆ—æ“ä½œ
     * 
     * <span class="hljs-doctag">@param</span> queueName é˜Ÿåˆ—åç§°
     * <span class="hljs-doctag">@param</span> delayedItems å»¶è¿Ÿé¡¹ç›®åˆ—è¡¨ï¼ŒåŒ…å«é¡¹ç›®å’Œå»¶è¿Ÿæ—¶é—´
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">operateDelayedQueue</span><span class="hljs-params">(String queueName, java.util.List&lt;DelayedItem&gt; delayedItems)</span> {
        RBlockingQueue&lt;String&gt; queue = redissonClient.getBlockingQueue(queueName);
        RDelayedQueue&lt;String&gt; delayedQueue = redissonClient.getDelayedQueue(queue);
        
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// æ·»åŠ å»¶è¿Ÿå…ƒç´ </span>
            <span class="hljs-keyword">for</span> (DelayedItem item : delayedItems) {
                delayedQueue.offer(item.item, item.delay, item.unit);
                System.out.println(<span class="hljs-string">"æ·»åŠ å»¶è¿Ÿå…ƒç´ : "</span> + item.item + 
                                 <span class="hljs-string">"ï¼Œå»¶è¿Ÿæ—¶é—´: "</span> + item.delay + <span class="hljs-string">" "</span> + item.unit);
            }
            
            <span class="hljs-comment">// å¯åŠ¨æ¶ˆè´¹è€…çº¿ç¨‹å¤„ç†å»¶è¿Ÿå…ƒç´ </span>
            <span class="hljs-type">Thread</span> <span class="hljs-variable">consumerThread</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(() -&gt; {
                <span class="hljs-keyword">try</span> {
                    <span class="hljs-keyword">while</span> (!Thread.currentThread().isInterrupted()) {
                        <span class="hljs-comment">// é˜»å¡ç­‰å¾…å»¶è¿Ÿæ—¶é—´åˆ°è¾¾çš„å…ƒç´ </span>
                        <span class="hljs-type">String</span> <span class="hljs-variable">item</span> <span class="hljs-operator">=</span> queue.take();
                        System.out.println(<span class="hljs-string">"è·å–åˆ°å»¶è¿Ÿå…ƒç´ : "</span> + item + 
                                         <span class="hljs-string">"ï¼Œåˆ°è¾¾æ—¶é—´: "</span> + System.currentTimeMillis());
                        
                        <span class="hljs-comment">// å¤„ç†å»¶è¿Ÿå…ƒç´ </span>
                        processDelayedItem(item);
                    }
                } <span class="hljs-keyword">catch</span> (InterruptedException e) {
                    Thread.currentThread().interrupt();
                    System.out.println(<span class="hljs-string">"æ¶ˆè´¹è€…çº¿ç¨‹è¢«ä¸­æ–­"</span>);
                } <span class="hljs-keyword">catch</span> (Exception e) {
                    System.err.println(<span class="hljs-string">"å¤„ç†å»¶è¿Ÿå…ƒç´ æ—¶å‘ç”Ÿå¼‚å¸¸: "</span> + e.getMessage());
                }
            });
            
            consumerThread.start();
            
            <span class="hljs-comment">// ç­‰å¾…ä¸€æ®µæ—¶é—´è§‚å¯Ÿç»“æœ</span>
            Thread.sleep(<span class="hljs-number">10000</span>);
            
        } <span class="hljs-keyword">catch</span> (InterruptedException e) {
            Thread.currentThread().interrupt();
            System.err.println(<span class="hljs-string">"ä¸»çº¿ç¨‹è¢«ä¸­æ–­: "</span> + e.getMessage());
        } <span class="hljs-keyword">catch</span> (Exception e) {
            System.err.println(<span class="hljs-string">"æ“ä½œå»¶è¿Ÿé˜Ÿåˆ—æ—¶å‘ç”Ÿå¼‚å¸¸: "</span> + e.getMessage());
        } <span class="hljs-keyword">finally</span> {
            <span class="hljs-comment">// é‡è¦ï¼šä½¿ç”¨å®Œå»¶è¿Ÿé˜Ÿåˆ—åå¿…é¡»é”€æ¯</span>
            delayedQueue.destroy();
        }
    }
    
    <span class="hljs-comment">/**
     * å¤„ç†å»¶è¿Ÿå…ƒç´ çš„ä¸šåŠ¡é€»è¾‘
     * 
     * <span class="hljs-doctag">@param</span> item å»¶è¿Ÿå…ƒç´ 
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">processDelayedItem</span><span class="hljs-params">(String item)</span> {
        System.out.println(<span class="hljs-string">"å¤„ç†å»¶è¿Ÿå…ƒç´ : "</span> + item);
        <span class="hljs-comment">// å®é™…ä¸šåŠ¡å¤„ç†é€»è¾‘</span>
    }
    
    <span class="hljs-comment">/**
     * å»¶è¿Ÿå…ƒç´ å°è£…ç±»
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DelayedItem</span> {
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> String item;
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-type">long</span> delay;
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> TimeUnit unit;
        
        <span class="hljs-keyword">public</span> <span class="hljs-title function_">DelayedItem</span><span class="hljs-params">(String item, <span class="hljs-type">long</span> delay, TimeUnit unit)</span> {
            <span class="hljs-built_in">this</span>.item = item;
            <span class="hljs-built_in">this</span>.delay = delay;
            <span class="hljs-built_in">this</span>.unit = unit;
        }
    }
}
</code></pre>
<h3 data-id="heading-8">7. å‘å¸ƒ/è®¢é˜…æ¨¡å¼</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.redisson.api.RTopic;
<span class="hljs-keyword">import</span> org.redisson.api.RedissonClient;
<span class="hljs-keyword">import</span> org.redisson.api.listener.MessageListener;
<span class="hljs-keyword">import</span> java.util.concurrent.CompletableFuture;
<span class="hljs-keyword">import</span> java.util.concurrent.ExecutorService;
<span class="hljs-keyword">import</span> java.util.concurrent.Executors;

<span class="hljs-comment">/**
 * å‘å¸ƒ/è®¢é˜…æ¨¡å¼ç”Ÿäº§çº§ä½¿ç”¨ç¤ºä¾‹
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PubSubExample</span> {
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> RedissonClient redissonClient;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> ExecutorService executorService;
    
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">PubSubExample</span><span class="hljs-params">(RedissonClient redissonClient)</span> {
        <span class="hljs-built_in">this</span>.redissonClient = redissonClient;
        <span class="hljs-built_in">this</span>.executorService = Executors.newCachedThreadPool();
    }
    
    <span class="hljs-comment">/**
     * è®¢é˜…æ¶ˆæ¯å¹¶å¤„ç†
     * 
     * <span class="hljs-doctag">@param</span> topicName ä¸»é¢˜åç§°
     * <span class="hljs-doctag">@param</span> messageHandler æ¶ˆæ¯å¤„ç†å™¨
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">subscribeTopic</span><span class="hljs-params">(String topicName, java.util.function.Consumer&lt;String&gt; messageHandler)</span> {
        <span class="hljs-type">RTopic</span> <span class="hljs-variable">topic</span> <span class="hljs-operator">=</span> redissonClient.getTopic(topicName);
        
        <span class="hljs-comment">// æ·»åŠ æ¶ˆæ¯ç›‘å¬å™¨</span>
        <span class="hljs-type">int</span> <span class="hljs-variable">listenerId</span> <span class="hljs-operator">=</span> topic.addListener(String.class, <span class="hljs-keyword">new</span> <span class="hljs-title class_">MessageListener</span>&lt;String&gt;() {
            <span class="hljs-meta">@Override</span>
            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onMessage</span><span class="hljs-params">(CharSequence channel, String msg)</span> {
                System.out.println(<span class="hljs-string">"æ”¶åˆ°æ¶ˆæ¯ - é¢‘é“: "</span> + channel + <span class="hljs-string">"ï¼Œå†…å®¹: "</span> + msg);
                
                <span class="hljs-comment">// åœ¨ç‹¬ç«‹çº¿ç¨‹ä¸­å¤„ç†æ¶ˆæ¯ï¼Œé¿å…é˜»å¡Redissonçš„æ¶ˆæ¯å¤„ç†çº¿ç¨‹</span>
                executorService.submit(() -&gt; {
                    <span class="hljs-keyword">try</span> {
                        messageHandler.accept(msg);
                    } <span class="hljs-keyword">catch</span> (Exception e) {
                        System.err.println(<span class="hljs-string">"å¤„ç†æ¶ˆæ¯æ—¶å‘ç”Ÿå¼‚å¸¸: "</span> + e.getMessage());
                    }
                });
            }
        });
        
        System.out.println(<span class="hljs-string">"å·²è®¢é˜…ä¸»é¢˜: "</span> + topicName + <span class="hljs-string">"ï¼Œç›‘å¬å™¨ID: "</span> + listenerId);
    }
    
    <span class="hljs-comment">/**
     * å‘å¸ƒæ¶ˆæ¯
     * 
     * <span class="hljs-doctag">@param</span> topicName ä¸»é¢˜åç§°
     * <span class="hljs-doctag">@param</span> message æ¶ˆæ¯å†…å®¹
     * <span class="hljs-doctag">@return</span> å‘å¸ƒçš„æ¶ˆæ¯æ•°é‡
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">long</span> <span class="hljs-title function_">publishMessage</span><span class="hljs-params">(String topicName, String message)</span> {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-type">RTopic</span> <span class="hljs-variable">topic</span> <span class="hljs-operator">=</span> redissonClient.getTopic(topicName);
            
            <span class="hljs-comment">// å‘å¸ƒæ¶ˆæ¯</span>
            <span class="hljs-type">long</span> <span class="hljs-variable">receivers</span> <span class="hljs-operator">=</span> topic.publish(message);
            System.out.println(<span class="hljs-string">"æ¶ˆæ¯å·²å‘å¸ƒåˆ°ä¸»é¢˜: "</span> + topicName + 
                             <span class="hljs-string">"ï¼Œæ¥æ”¶è€…æ•°é‡: "</span> + receivers + 
                             <span class="hljs-string">"ï¼Œæ¶ˆæ¯å†…å®¹: "</span> + message);
            
            <span class="hljs-keyword">return</span> receivers;
        } <span class="hljs-keyword">catch</span> (Exception e) {
            System.err.println(<span class="hljs-string">"å‘å¸ƒæ¶ˆæ¯æ—¶å‘ç”Ÿå¼‚å¸¸: "</span> + e.getMessage());
            <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
        }
    }
    
    <span class="hljs-comment">/**
     * å¼‚æ­¥å‘å¸ƒæ¶ˆæ¯
     * 
     * <span class="hljs-doctag">@param</span> topicName ä¸»é¢˜åç§°
     * <span class="hljs-doctag">@param</span> message æ¶ˆæ¯å†…å®¹
     * <span class="hljs-doctag">@return</span> CompletableFutureè¡¨ç¤ºå‘å¸ƒç»“æœ
     */</span>
    <span class="hljs-keyword">public</span> CompletableFuture&lt;Long&gt; <span class="hljs-title function_">publishMessageAsync</span><span class="hljs-params">(String topicName, String message)</span> {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-type">RTopic</span> <span class="hljs-variable">topic</span> <span class="hljs-operator">=</span> redissonClient.getTopic(topicName);
            
            <span class="hljs-comment">// å¼‚æ­¥å‘å¸ƒæ¶ˆæ¯</span>
            <span class="hljs-keyword">return</span> topic.publishAsync(message)
                      .toCompletableFuture()
                      .whenComplete((result, throwable) -&gt; {
                          <span class="hljs-keyword">if</span> (throwable != <span class="hljs-literal">null</span>) {
                              System.err.println(<span class="hljs-string">"å¼‚æ­¥å‘å¸ƒæ¶ˆæ¯å¤±è´¥: "</span> + throwable.getMessage());
                          } <span class="hljs-keyword">else</span> {
                              System.out.println(<span class="hljs-string">"å¼‚æ­¥å‘å¸ƒæ¶ˆæ¯æˆåŠŸï¼Œæ¥æ”¶è€…æ•°é‡: "</span> + result);
                          }
                      });
        } <span class="hljs-keyword">catch</span> (Exception e) {
            System.err.println(<span class="hljs-string">"å¼‚æ­¥å‘å¸ƒæ¶ˆæ¯æ—¶å‘ç”Ÿå¼‚å¸¸: "</span> + e.getMessage());
            <span class="hljs-keyword">return</span> CompletableFuture.completedFuture(<span class="hljs-number">0L</span>);
        }
    }
    
    <span class="hljs-comment">/**
     * å…³é—­èµ„æº
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">shutdown</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">if</span> (executorService != <span class="hljs-literal">null</span> &amp;&amp; !executorService.isShutdown()) {
            executorService.shutdown();
        }
    }
}
</code></pre>
<h3 data-id="heading-9">8. å¸ƒéš†è¿‡æ»¤å™¨ (Bloom Filter)</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.redisson.api.RBloomFilter;
<span class="hljs-keyword">import</span> org.redisson.api.RedissonClient;
<span class="hljs-keyword">import</span> java.util.Collection;

<span class="hljs-comment">/**
 * å¸ƒéš†è¿‡æ»¤å™¨ç”Ÿäº§çº§ä½¿ç”¨ç¤ºä¾‹
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BloomFilterExample</span> {
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> RedissonClient redissonClient;
    
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">BloomFilterExample</span><span class="hljs-params">(RedissonClient redissonClient)</span> {
        <span class="hljs-built_in">this</span>.redissonClient = redissonClient;
    }
    
    <span class="hljs-comment">/**
     * åˆ›å»ºå¹¶åˆå§‹åŒ–å¸ƒéš†è¿‡æ»¤å™¨
     * 
     * <span class="hljs-doctag">@param</span> filterName è¿‡æ»¤å™¨åç§°
     * <span class="hljs-doctag">@param</span> expectedInsertions é¢„æœŸæ’å…¥å…ƒç´ æ•°é‡
     * <span class="hljs-doctag">@param</span> falseProbability è¯¯åˆ¤ç‡
     * <span class="hljs-doctag">@return</span> å¸ƒéš†è¿‡æ»¤å™¨å®ä¾‹
     */</span>
    <span class="hljs-keyword">public</span> RBloomFilter&lt;String&gt; <span class="hljs-title function_">createBloomFilter</span><span class="hljs-params">(String filterName, 
                                                  <span class="hljs-type">long</span> expectedInsertions, 
                                                  <span class="hljs-type">double</span> falseProbability)</span> {
        <span class="hljs-keyword">try</span> {
            RBloomFilter&lt;String&gt; bloomFilter = redissonClient.getBloomFilter(filterName);
            
            <span class="hljs-comment">// åˆå§‹åŒ–å¸ƒéš†è¿‡æ»¤å™¨ï¼ˆä»…åœ¨æœªåˆå§‹åŒ–æ—¶è®¾ç½®ï¼‰</span>
            <span class="hljs-keyword">if</span> (!bloomFilter.isExists()) {
                <span class="hljs-type">boolean</span> <span class="hljs-variable">initialized</span> <span class="hljs-operator">=</span> bloomFilter.tryInit(expectedInsertions, falseProbability);
                <span class="hljs-keyword">if</span> (initialized) {
                    System.out.println(<span class="hljs-string">"å¸ƒéš†è¿‡æ»¤å™¨ "</span> + filterName + 
                                     <span class="hljs-string">" åˆå§‹åŒ–æˆåŠŸï¼Œé¢„æœŸæ’å…¥æ•°é‡: "</span> + expectedInsertions + 
                                     <span class="hljs-string">"ï¼Œè¯¯åˆ¤ç‡: "</span> + falseProbability);
                } <span class="hljs-keyword">else</span> {
                    System.out.println(<span class="hljs-string">"å¸ƒéš†è¿‡æ»¤å™¨ "</span> + filterName + <span class="hljs-string">" å·²å­˜åœ¨ï¼Œè·³è¿‡åˆå§‹åŒ–"</span>);
                }
            } <span class="hljs-keyword">else</span> {
                System.out.println(<span class="hljs-string">"å¸ƒéš†è¿‡æ»¤å™¨ "</span> + filterName + <span class="hljs-string">" å·²å­˜åœ¨"</span>);
            }
            
            <span class="hljs-keyword">return</span> bloomFilter;
        } <span class="hljs-keyword">catch</span> (Exception e) {
            System.err.println(<span class="hljs-string">"åˆ›å»ºå¸ƒéš†è¿‡æ»¤å™¨æ—¶å‘ç”Ÿå¼‚å¸¸: "</span> + e.getMessage());
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">"åˆ›å»ºå¸ƒéš†è¿‡æ»¤å™¨å¤±è´¥"</span>, e);
        }
    }
    
    <span class="hljs-comment">/**
     * æ‰¹é‡æ·»åŠ å…ƒç´ åˆ°å¸ƒéš†è¿‡æ»¤å™¨
     * 
     * <span class="hljs-doctag">@param</span> filterName è¿‡æ»¤å™¨åç§°
     * <span class="hljs-doctag">@param</span> elements è¦æ·»åŠ çš„å…ƒç´ é›†åˆ
     * <span class="hljs-doctag">@return</span> æˆåŠŸæ·»åŠ çš„å…ƒç´ æ•°é‡
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">batchAddElements</span><span class="hljs-params">(String filterName, Collection&lt;String&gt; elements)</span> {
        <span class="hljs-keyword">try</span> {
            RBloomFilter&lt;String&gt; bloomFilter = redissonClient.getBloomFilter(filterName);
            
            <span class="hljs-keyword">if</span> (!bloomFilter.isExists()) {
                System.out.println(<span class="hljs-string">"å¸ƒéš†è¿‡æ»¤å™¨ "</span> + filterName + <span class="hljs-string">" ä¸å­˜åœ¨ï¼Œæ— æ³•æ·»åŠ å…ƒç´ "</span>);
                <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
            }
            
            <span class="hljs-type">int</span> <span class="hljs-variable">addedCount</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
            <span class="hljs-keyword">for</span> (String element : elements) {
                <span class="hljs-type">boolean</span> <span class="hljs-variable">added</span> <span class="hljs-operator">=</span> bloomFilter.add(element);
                <span class="hljs-keyword">if</span> (added) {
                    addedCount++;
                }
            }
            
            System.out.println(<span class="hljs-string">"æ‰¹é‡æ·»åŠ å…ƒç´ å®Œæˆï¼ŒæˆåŠŸæ·»åŠ : "</span> + addedCount + <span class="hljs-string">" ä¸ªå…ƒç´ "</span>);
            <span class="hljs-keyword">return</span> addedCount;
        } <span class="hljs-keyword">catch</span> (Exception e) {
            System.err.println(<span class="hljs-string">"æ‰¹é‡æ·»åŠ å…ƒç´ åˆ°å¸ƒéš†è¿‡æ»¤å™¨æ—¶å‘ç”Ÿå¼‚å¸¸: "</span> + e.getMessage());
            <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
        }
    }
    
    <span class="hljs-comment">/**
     * æ£€æŸ¥å…ƒç´ æ˜¯å¦å¯èƒ½å­˜åœ¨äºå¸ƒéš†è¿‡æ»¤å™¨ä¸­
     * 
     * <span class="hljs-doctag">@param</span> filterName è¿‡æ»¤å™¨åç§°
     * <span class="hljs-doctag">@param</span> element è¦æ£€æŸ¥çš„å…ƒç´ 
     * <span class="hljs-doctag">@return</span> trueè¡¨ç¤ºå¯èƒ½å­˜åœ¨ï¼Œfalseè¡¨ç¤ºä¸€å®šä¸å­˜åœ¨
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">mightContain</span><span class="hljs-params">(String filterName, String element)</span> {
        <span class="hljs-keyword">try</span> {
            RBloomFilter&lt;String&gt; bloomFilter = redissonClient.getBloomFilter(filterName);
            
            <span class="hljs-keyword">if</span> (!bloomFilter.isExists()) {
                System.out.println(<span class="hljs-string">"å¸ƒéš†è¿‡æ»¤å™¨ "</span> + filterName + <span class="hljs-string">" ä¸å­˜åœ¨"</span>);
                <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
            }
            
            <span class="hljs-type">boolean</span> <span class="hljs-variable">mightContain</span> <span class="hljs-operator">=</span> bloomFilter.contains(element);
            System.out.println(<span class="hljs-string">"å…ƒç´  '"</span> + element + <span class="hljs-string">"' åœ¨è¿‡æ»¤å™¨ "</span> + filterName + 
                             <span class="hljs-string">" ä¸­å¯èƒ½å­˜åœ¨: "</span> + mightContain);
            
            <span class="hljs-keyword">return</span> mightContain;
        } <span class="hljs-keyword">catch</span> (Exception e) {
            System.err.println(<span class="hljs-string">"æ£€æŸ¥å¸ƒéš†è¿‡æ»¤å™¨æ—¶å‘ç”Ÿå¼‚å¸¸: "</span> + e.getMessage());
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        }
    }
    
    <span class="hljs-comment">/**
     * ä½¿ç”¨å¸ƒéš†è¿‡æ»¤å™¨é˜²æ­¢ç¼“å­˜ç©¿é€çš„å®Œæ•´ç¤ºä¾‹
     * 
     * <span class="hljs-doctag">@param</span> userId ç”¨æˆ·ID
     * <span class="hljs-doctag">@return</span> ç”¨æˆ·ä¿¡æ¯ï¼ˆå¦‚æœå­˜åœ¨ï¼‰
     */</span>
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">preventCachePenetration</span><span class="hljs-params">(String userId)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">filterName</span> <span class="hljs-operator">=</span> <span class="hljs-string">"user_exists_filter"</span>;
        <span class="hljs-type">String</span> <span class="hljs-variable">cacheKey</span> <span class="hljs-operator">=</span> <span class="hljs-string">"user_cache:"</span> + userId;
        
        <span class="hljs-comment">// åˆ›å»ºå¸ƒéš†è¿‡æ»¤å™¨</span>
        RBloomFilter&lt;String&gt; bloomFilter = createBloomFilter(filterName, <span class="hljs-number">1000000</span>, <span class="hljs-number">0.03</span>);
        
        <span class="hljs-comment">// é¦–å…ˆæ£€æŸ¥å¸ƒéš†è¿‡æ»¤å™¨</span>
        <span class="hljs-keyword">if</span> (!bloomFilter.contains(userId)) {
            <span class="hljs-comment">// å¸ƒéš†è¿‡æ»¤å™¨ç¡®è®¤å…ƒç´ ä¸å­˜åœ¨ï¼Œç›´æ¥è¿”å›ï¼Œé¿å…æŸ¥è¯¢ç¼“å­˜å’Œæ•°æ®åº“</span>
            System.out.println(<span class="hljs-string">"å¸ƒéš†è¿‡æ»¤å™¨ç¡®è®¤ç”¨æˆ·ä¸å­˜åœ¨: "</span> + userId);
            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
        }
        
        <span class="hljs-comment">// å¸ƒéš†è¿‡æ»¤å™¨è®¤ä¸ºå¯èƒ½å­˜åœ¨ï¼Œç»§ç»­æŸ¥è¯¢ç¼“å­˜</span>
        <span class="hljs-comment">// è¿™é‡Œåº”è¯¥æŸ¥è¯¢å®é™…ç¼“å­˜ï¼Œä½†ä¸ºäº†ç¤ºä¾‹ï¼Œæˆ‘ä»¬æ¨¡æ‹Ÿ</span>
        System.out.println(<span class="hljs-string">"å¸ƒéš†è¿‡æ»¤å™¨è®¤ä¸ºç”¨æˆ·å¯èƒ½å­˜åœ¨ï¼Œç»§ç»­æŸ¥è¯¢ç¼“å­˜/æ•°æ®åº“: "</span> + userId);
        
        <span class="hljs-comment">// æ¨¡æ‹ŸæŸ¥è¯¢ç¼“å­˜å’Œæ•°æ®åº“çš„é€»è¾‘</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">userInfo</span> <span class="hljs-operator">=</span> queryUserInfo(userId);
        
        <span class="hljs-keyword">if</span> (userInfo == <span class="hljs-literal">null</span>) {
            <span class="hljs-comment">// å¦‚æœæ•°æ®åº“ä¸­ç¡®å®ä¸å­˜åœ¨ï¼Œå¯ä»¥è€ƒè™‘å°†è¯¥IDåŠ å…¥å¸ƒéš†è¿‡æ»¤å™¨</span>
            <span class="hljs-comment">// ä½†éœ€è¦è°¨æ…å¤„ç†ï¼Œå› ä¸ºç”¨æˆ·å¯èƒ½åœ¨ç¨ååˆ›å»º</span>
            System.out.println(<span class="hljs-string">"ç”¨æˆ·åœ¨æ•°æ®åº“ä¸­ä¸å­˜åœ¨: "</span> + userId);
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-comment">// å¦‚æœç”¨æˆ·å­˜åœ¨ï¼Œå°†ä¿¡æ¯å­˜å‚¨åˆ°ç¼“å­˜</span>
            System.out.println(<span class="hljs-string">"ç”¨æˆ·å­˜åœ¨ï¼Œæ›´æ–°ç¼“å­˜: "</span> + userId);
        }
        
        <span class="hljs-keyword">return</span> userInfo;
    }
    
    <span class="hljs-comment">/**
     * æ¨¡æ‹ŸæŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯
     */</span>
    <span class="hljs-keyword">private</span> String <span class="hljs-title function_">queryUserInfo</span><span class="hljs-params">(String userId)</span> {
        <span class="hljs-comment">// å®é™…åº”ç”¨ä¸­è¿™é‡Œä¼šæŸ¥è¯¢ç¼“å­˜æˆ–æ•°æ®åº“</span>
        <span class="hljs-comment">// ä¸ºäº†ç¤ºä¾‹ï¼Œæˆ‘ä»¬æ¨¡æ‹Ÿä¸€ä¸ªç®€å•çš„é€»è¾‘</span>
        <span class="hljs-keyword">if</span> (<span class="hljs-string">"valid_user"</span>.equals(userId)) {
            <span class="hljs-keyword">return</span> <span class="hljs-string">"ç”¨æˆ·ä¿¡æ¯: "</span> + userId;
        }
        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    }
}
</code></pre>
<h3 data-id="heading-10">6. åˆ†å¸ƒå¼å¯¹è±¡</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.redisson.api.RBucket;
<span class="hljs-keyword">import</span> org.redisson.api.RSet;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DistributedObjectsExample</span> {
    <span class="hljs-comment">// è‡ªå®šä¹‰å¯¹è±¡</span>
    <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span> {
        <span class="hljs-keyword">private</span> String name;
        <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> age;
        
        <span class="hljs-keyword">public</span> <span class="hljs-title function_">Person</span><span class="hljs-params">(String name, <span class="hljs-type">int</span> age)</span> {
            <span class="hljs-built_in">this</span>.name = name;
            <span class="hljs-built_in">this</span>.age = age;
        }
        
        <span class="hljs-comment">// getterå’Œsetteræ–¹æ³•</span>
        <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getName</span><span class="hljs-params">()</span> { <span class="hljs-keyword">return</span> name; }
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setName</span><span class="hljs-params">(String name)</span> { <span class="hljs-built_in">this</span>.name = name; }
        <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getAge</span><span class="hljs-params">()</span> { <span class="hljs-keyword">return</span> age; }
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setAge</span><span class="hljs-params">(<span class="hljs-type">int</span> age)</span> { <span class="hljs-built_in">this</span>.age = age; }
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">objectsExample</span><span class="hljs-params">(RedissonClient redisson)</span> {
        <span class="hljs-comment">// å­˜å‚¨å•ä¸ªå¯¹è±¡</span>
        RBucket&lt;Person&gt; bucket = redisson.getBucket(<span class="hljs-string">"person"</span>);
        bucket.set(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>(<span class="hljs-string">"å¼ ä¸‰"</span>, <span class="hljs-number">30</span>));
        
        <span class="hljs-type">Person</span> <span class="hljs-variable">person</span> <span class="hljs-operator">=</span> bucket.get(); <span class="hljs-comment">// è·å–å¯¹è±¡</span>
        System.out.println(person.getName()); <span class="hljs-comment">// è¾“å‡º: å¼ ä¸‰</span>
        
        <span class="hljs-comment">// å­˜å‚¨å¯¹è±¡é›†åˆ</span>
        RSet&lt;Person&gt; personSet = redisson.getSet(<span class="hljs-string">"personSet"</span>);
        personSet.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>(<span class="hljs-string">"æå››"</span>, <span class="hljs-number">25</span>));
        personSet.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>(<span class="hljs-string">"ç‹äº”"</span>, <span class="hljs-number">35</span>));
    }
}
</code></pre>
<h2 data-id="heading-11">å®é™…åº”ç”¨åœºæ™¯</h2>
<h3 data-id="heading-12">1. åˆ†å¸ƒå¼é” - é˜²æ­¢é‡å¤æ“ä½œ</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.redisson.api.RLock;
<span class="hljs-keyword">import</span> org.redisson.api.RedissonClient;
<span class="hljs-keyword">import</span> java.util.concurrent.TimeUnit;
<span class="hljs-keyword">import</span> java.util.concurrent.CompletableFuture;

<span class="hljs-comment">/**
 * åˆ†å¸ƒå¼é”ç”Ÿäº§çº§åº”ç”¨åœºæ™¯ç¤ºä¾‹
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DistributedLockScenario</span> {
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> RedissonClient redissonClient;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">long</span> <span class="hljs-variable">DEFAULT_LEASE_TIME</span> <span class="hljs-operator">=</span> <span class="hljs-number">30</span>; <span class="hljs-comment">// é»˜è®¤ç§Ÿçº¦æ—¶é—´30ç§’</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">long</span> <span class="hljs-variable">DEFAULT_WAIT_TIME</span> <span class="hljs-operator">=</span> <span class="hljs-number">10</span>;  <span class="hljs-comment">// é»˜è®¤ç­‰å¾…æ—¶é—´10ç§’</span>
    
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">DistributedLockScenario</span><span class="hljs-params">(RedissonClient redissonClient)</span> {
        <span class="hljs-built_in">this</span>.redissonClient = redissonClient;
    }
    
    <span class="hljs-comment">/**
     * å®‰å…¨çš„åˆ†å¸ƒå¼é”æ“ä½œ
     * 
     * <span class="hljs-doctag">@param</span> lockKey é”çš„key
     * <span class="hljs-doctag">@param</span> businessLogic ä¸šåŠ¡é€»è¾‘
     * <span class="hljs-doctag">@return</span> æ“ä½œç»“æœ
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">executeWithDistributedLock</span><span class="hljs-params">(String lockKey, Runnable businessLogic)</span> {
        <span class="hljs-type">RLock</span> <span class="hljs-variable">lock</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;
        <span class="hljs-keyword">try</span> {
            lock = redissonClient.getLock(lockKey);
            
            <span class="hljs-comment">// å°è¯•è·å–é”ï¼Œæœ€å¤šç­‰å¾…DEFAULT_WAIT_TIMEç§’ï¼Œé”è‡ªåŠ¨é‡Šæ”¾æ—¶é—´ä¸ºDEFAULT_LEASE_TIMEç§’</span>
            <span class="hljs-type">boolean</span> <span class="hljs-variable">acquired</span> <span class="hljs-operator">=</span> lock.tryLock(DEFAULT_WAIT_TIME, DEFAULT_LEASE_TIME, TimeUnit.SECONDS);
            <span class="hljs-keyword">if</span> (acquired) {
                <span class="hljs-keyword">try</span> {
                    System.out.println(<span class="hljs-string">"è·å–åˆ°åˆ†å¸ƒå¼é”: "</span> + lockKey + 
                                     <span class="hljs-string">"ï¼Œçº¿ç¨‹: "</span> + Thread.currentThread().getName());
                    
                    <span class="hljs-comment">// æ‰§è¡Œä¸šåŠ¡é€»è¾‘</span>
                    businessLogic.run();
                    
                    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
                } <span class="hljs-keyword">finally</span> {
                    <span class="hljs-comment">// ç¡®ä¿é”è¢«é‡Šæ”¾ï¼Œé˜²æ­¢æ­»é”</span>
                    <span class="hljs-keyword">if</span> (lock != <span class="hljs-literal">null</span> &amp;&amp; lock.isHeldByCurrentThread()) {
                        lock.unlock();
                        System.out.println(<span class="hljs-string">"é‡Šæ”¾åˆ†å¸ƒå¼é”: "</span> + lockKey);
                    }
                }
            } <span class="hljs-keyword">else</span> {
                System.out.println(<span class="hljs-string">"è·å–åˆ†å¸ƒå¼é”å¤±è´¥ï¼Œé”å·²è¢«å…¶ä»–çº¿ç¨‹æŒæœ‰: "</span> + lockKey);
                <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
            }
        } <span class="hljs-keyword">catch</span> (InterruptedException e) {
            Thread.currentThread().interrupt();
            System.err.println(<span class="hljs-string">"è·å–åˆ†å¸ƒå¼é”è¿‡ç¨‹ä¸­è¢«ä¸­æ–­: "</span> + e.getMessage());
            
            <span class="hljs-comment">// æ¢å¤ä¸­æ–­çŠ¶æ€å¹¶å°è¯•é‡Šæ”¾é”</span>
            <span class="hljs-keyword">if</span> (lock != <span class="hljs-literal">null</span> &amp;&amp; lock.isHeldByCurrentThread()) {
                <span class="hljs-keyword">try</span> {
                    lock.unlock();
                } <span class="hljs-keyword">catch</span> (Exception unlockException) {
                    System.err.println(<span class="hljs-string">"é‡Šæ”¾é”æ—¶å‘ç”Ÿå¼‚å¸¸: "</span> + unlockException.getMessage());
                }
            }
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        } <span class="hljs-keyword">catch</span> (Exception e) {
            System.err.println(<span class="hljs-string">"æ‰§è¡Œå¸¦é”æ“ä½œæ—¶å‘ç”Ÿå¼‚å¸¸: "</span> + e.getMessage());
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        }
    }
    
    <span class="hljs-comment">/**
     * å¼‚æ­¥æ‰§è¡Œå¸¦é”æ“ä½œ
     * 
     * <span class="hljs-doctag">@param</span> lockKey é”çš„key
     * <span class="hljs-doctag">@param</span> businessLogic ä¸šåŠ¡é€»è¾‘
     * <span class="hljs-doctag">@return</span> CompletableFutureè¡¨ç¤ºæ“ä½œç»“æœ
     */</span>
    <span class="hljs-keyword">public</span> CompletableFuture&lt;Boolean&gt; <span class="hljs-title function_">executeWithDistributedLockAsync</span><span class="hljs-params">(String lockKey, Runnable businessLogic)</span> {
        <span class="hljs-keyword">return</span> CompletableFuture.supplyAsync(() -&gt; {
            <span class="hljs-keyword">return</span> executeWithDistributedLock(lockKey, businessLogic);
        });
    }
    
    <span class="hljs-comment">/**
     * è®¢å•å¤„ç†åœºæ™¯ - é˜²æ­¢é‡å¤ä¸‹å•
     * 
     * <span class="hljs-doctag">@param</span> userId ç”¨æˆ·ID
     * <span class="hljs-doctag">@param</span> orderId è®¢å•ID
     * <span class="hljs-doctag">@return</span> å¤„ç†ç»“æœ
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">processOrder</span><span class="hljs-params">(String userId, String orderId)</span> {
        <span class="hljs-comment">// ä½¿ç”¨ç”¨æˆ·IDå’Œè®¢å•IDä½œä¸ºé”çš„keyï¼Œé˜²æ­¢åŒä¸€ç”¨æˆ·é‡å¤ä¸‹å•</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">lockKey</span> <span class="hljs-operator">=</span> <span class="hljs-string">"order_lock:"</span> + userId + <span class="hljs-string">":"</span> + orderId;
        
        <span class="hljs-keyword">return</span> executeWithDistributedLock(lockKey, () -&gt; {
            <span class="hljs-comment">// æ£€æŸ¥è®¢å•æ˜¯å¦å·²å­˜åœ¨</span>
            <span class="hljs-keyword">if</span> (isOrderExists(orderId)) {
                System.out.println(<span class="hljs-string">"è®¢å•å·²å­˜åœ¨ï¼Œè·³è¿‡å¤„ç†: "</span> + orderId);
                <span class="hljs-keyword">return</span>;
            }
            
            <span class="hljs-comment">// æ‰§è¡Œè®¢å•åˆ›å»ºé€»è¾‘</span>
            System.out.println(<span class="hljs-string">"å¼€å§‹å¤„ç†è®¢å•: "</span> + orderId + <span class="hljs-string">"ï¼Œç”¨æˆ·: "</span> + userId);
            
            <span class="hljs-comment">// æ¨¡æ‹Ÿè®¢å•å¤„ç†æ—¶é—´</span>
            <span class="hljs-keyword">try</span> {
                Thread.sleep(<span class="hljs-number">2000</span>);
            } <span class="hljs-keyword">catch</span> (InterruptedException e) {
                Thread.currentThread().interrupt();
            }
            
            <span class="hljs-comment">// ä¿å­˜è®¢å•</span>
            saveOrder(orderId, userId);
            System.out.println(<span class="hljs-string">"è®¢å•å¤„ç†å®Œæˆ: "</span> + orderId);
        });
    }
    
    <span class="hljs-comment">/**
     * æ¨¡æ‹Ÿæ£€æŸ¥è®¢å•æ˜¯å¦å­˜åœ¨
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isOrderExists</span><span class="hljs-params">(String orderId)</span> {
        <span class="hljs-comment">// å®é™…åº”ç”¨ä¸­è¿™é‡Œä¼šæŸ¥è¯¢æ•°æ®åº“æˆ–ç¼“å­˜</span>
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }
    
    <span class="hljs-comment">/**
     * æ¨¡æ‹Ÿä¿å­˜è®¢å•
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">saveOrder</span><span class="hljs-params">(String orderId, String userId)</span> {
        <span class="hljs-comment">// å®é™…åº”ç”¨ä¸­è¿™é‡Œä¼šä¿å­˜åˆ°æ•°æ®åº“</span>
        System.out.println(<span class="hljs-string">"è®¢å•å·²ä¿å­˜ - è®¢å•ID: "</span> + orderId + <span class="hljs-string">"ï¼Œç”¨æˆ·ID: "</span> + userId);
    }
}
</code></pre>
<h3 data-id="heading-13">2. ä¿¡å·é‡ - é™åˆ¶å¹¶å‘è®¿é—®</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.redisson.api.RSemaphore;
<span class="hljs-keyword">import</span> org.redisson.api.RedissonClient;
<span class="hljs-keyword">import</span> java.util.concurrent.CompletableFuture;
<span class="hljs-keyword">import</span> java.util.concurrent.TimeUnit;

<span class="hljs-comment">/**
 * ä¿¡å·é‡ç”Ÿäº§çº§åº”ç”¨åœºæ™¯ç¤ºä¾‹
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SemaphoreScenario</span> {
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> RedissonClient redissonClient;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">RESOURCE_ACCESS_PREFIX</span> <span class="hljs-operator">=</span> <span class="hljs-string">"resource_access:"</span>;
    
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">SemaphoreScenario</span><span class="hljs-params">(RedissonClient redissonClient)</span> {
        <span class="hljs-built_in">this</span>.redissonClient = redissonClient;
    }
    
    <span class="hljs-comment">/**
     * èµ„æºè®¿é—®æ§åˆ¶
     * 
     * <span class="hljs-doctag">@param</span> resourceId èµ„æºID
     * <span class="hljs-doctag">@param</span> maxConcurrent æœ€å¤§å¹¶å‘æ•°
     * <span class="hljs-doctag">@param</span> accessTask è®¿é—®ä»»åŠ¡
     * <span class="hljs-doctag">@return</span> è®¿é—®ç»“æœ
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">controlResourceAccess</span><span class="hljs-params">(String resourceId, <span class="hljs-type">int</span> maxConcurrent, Runnable accessTask)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">semaphoreKey</span> <span class="hljs-operator">=</span> RESOURCE_ACCESS_PREFIX + resourceId;
        <span class="hljs-type">RSemaphore</span> <span class="hljs-variable">semaphore</span> <span class="hljs-operator">=</span> redissonClient.getSemaphore(semaphoreKey);
        
        <span class="hljs-keyword">try</span> {

            semaphore.trySetPermits(maxConcurrent);
            
            System.out.println(<span class="hljs-string">"èµ„æº "</span> + resourceId + <span class="hljs-string">" å½“å‰å¯ç”¨è®¸å¯è¯æ•°: "</span> + semaphore.availablePermits());
            
            <span class="hljs-comment">// å°è¯•è·å–è®¸å¯è¯ï¼Œæœ€å¤šç­‰å¾…5ç§’</span>
            <span class="hljs-type">boolean</span> <span class="hljs-variable">acquired</span> <span class="hljs-operator">=</span> semaphore.tryAcquire(<span class="hljs-number">5</span>, TimeUnit.SECONDS);
            <span class="hljs-keyword">if</span> (acquired) {
                <span class="hljs-keyword">try</span> {
                    System.out.println(<span class="hljs-string">"è·å–åˆ°èµ„æº "</span> + resourceId + <span class="hljs-string">" çš„è®¿é—®æƒé™ï¼Œæ‰§è¡Œè®¿é—®ä»»åŠ¡"</span>);
                    
                    <span class="hljs-comment">// æ‰§è¡Œèµ„æºè®¿é—®ä»»åŠ¡</span>
                    accessTask.run();
                    
                    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
                } <span class="hljs-keyword">finally</span> {
                    <span class="hljs-comment">// é‡Šæ”¾è®¸å¯è¯</span>
                    semaphore.release();
                    System.out.println(<span class="hljs-string">"é‡Šæ”¾èµ„æº "</span> + resourceId + <span class="hljs-string">" çš„è®¿é—®æƒé™"</span>);
                }
            } <span class="hljs-keyword">else</span> {
                System.out.println(<span class="hljs-string">"è·å–èµ„æº "</span> + resourceId + <span class="hljs-string">" è®¿é—®æƒé™è¶…æ—¶ï¼Œå½“å‰å¯ç”¨è®¸å¯è¯æ•°: "</span> + 
                                 semaphore.availablePermits());
                <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
            }
        } <span class="hljs-keyword">catch</span> (InterruptedException e) {
            Thread.currentThread().interrupt();
            System.err.println(<span class="hljs-string">"è·å–è®¸å¯è¯æ—¶è¢«ä¸­æ–­: "</span> + e.getMessage());
            
            <span class="hljs-comment">// å°è¯•é‡Šæ”¾è®¸å¯è¯</span>
            <span class="hljs-keyword">try</span> {
                semaphore.release();
            } <span class="hljs-keyword">catch</span> (Exception releaseException) {
                System.err.println(<span class="hljs-string">"é‡Šæ”¾è®¸å¯è¯æ—¶å‘ç”Ÿå¼‚å¸¸: "</span> + releaseException.getMessage());
            }
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        } <span class="hljs-keyword">catch</span> (Exception e) {
            System.err.println(<span class="hljs-string">"èµ„æºè®¿é—®æ§åˆ¶æ—¶å‘ç”Ÿå¼‚å¸¸: "</span> + e.getMessage());
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        }
    }
    
    <span class="hljs-comment">/**
     * ç§’æ€ç³»ç»Ÿä¸­çš„å¹¶å‘æ§åˆ¶
     * 
     * <span class="hljs-doctag">@param</span> productId å•†å“ID
     * <span class="hljs-doctag">@param</span> userId ç”¨æˆ·ID
     * <span class="hljs-doctag">@return</span> ç§’æ€ç»“æœ
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">flashSale</span><span class="hljs-params">(String productId, String userId)</span> {
        <span class="hljs-comment">// ä½¿ç”¨å•†å“IDä½œä¸ºä¿¡å·é‡keyï¼Œé™åˆ¶åŒæ—¶è®¿é—®è¯¥å•†å“çš„ç”¨æˆ·æ•°é‡</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">semaphoreKey</span> <span class="hljs-operator">=</span> <span class="hljs-string">"flash_sale:"</span> + productId;
        <span class="hljs-type">RSemaphore</span> <span class="hljs-variable">semaphore</span> <span class="hljs-operator">=</span> redissonClient.getSemaphore(semaphoreKey);
        
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// è®¾ç½®ç§’æ€æ´»åŠ¨çš„å¹¶å‘é™åˆ¶ï¼ˆä¾‹å¦‚ï¼Œæœ€å¤šå…è®¸100ä¸ªç”¨æˆ·åŒæ—¶å‚ä¸ï¼‰</span>
            semaphore.trySetPermits(<span class="hljs-number">100</span>);
            
            <span class="hljs-comment">// å°è¯•è·å–ç§’æ€èµ„æ ¼</span>
            <span class="hljs-type">boolean</span> <span class="hljs-variable">hasQualification</span> <span class="hljs-operator">=</span> semaphore.tryAcquire(<span class="hljs-number">2</span>, TimeUnit.SECONDS);
            <span class="hljs-keyword">if</span> (!hasQualification) {
                System.out.println(<span class="hljs-string">"ç”¨æˆ· "</span> + userId + <span class="hljs-string">" ç§’æ€å¤±è´¥ï¼Œç§’æ€èµ„æ ¼å·²æ»¡"</span>);
                <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
            }
            
            <span class="hljs-keyword">try</span> {
                <span class="hljs-comment">// æ£€æŸ¥åº“å­˜</span>
                <span class="hljs-keyword">if</span> (checkStock(productId) &gt; <span class="hljs-number">0</span>) {
                    <span class="hljs-comment">// æ‰£å‡åº“å­˜</span>
                    <span class="hljs-keyword">if</span> (decreaseStock(productId)) {
                        <span class="hljs-comment">// åˆ›å»ºè®¢å•</span>
                        createOrder(productId, userId);
                        System.out.println(<span class="hljs-string">"ç”¨æˆ· "</span> + userId + <span class="hljs-string">" ç§’æ€æˆåŠŸï¼Œå•†å“: "</span> + productId);
                        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
                    } <span class="hljs-keyword">else</span> {
                        System.out.println(<span class="hljs-string">"ç”¨æˆ· "</span> + userId + <span class="hljs-string">" ç§’æ€å¤±è´¥ï¼Œåº“å­˜æ‰£å‡å¤±è´¥"</span>);
                    }
                } <span class="hljs-keyword">else</span> {
                    System.out.println(<span class="hljs-string">"ç”¨æˆ· "</span> + userId + <span class="hljs-string">" ç§’æ€å¤±è´¥ï¼Œåº“å­˜ä¸è¶³"</span>);
                }
            } <span class="hljs-keyword">finally</span> {
                <span class="hljs-comment">// é‡Šæ”¾ç§’æ€èµ„æ ¼</span>
                semaphore.release();
            }
        } <span class="hljs-keyword">catch</span> (InterruptedException e) {
            Thread.currentThread().interrupt();
            System.err.println(<span class="hljs-string">"ç§’æ€è¿‡ç¨‹ä¸­è¢«ä¸­æ–­: "</span> + e.getMessage());
        } <span class="hljs-keyword">catch</span> (Exception e) {
            System.err.println(<span class="hljs-string">"ç§’æ€è¿‡ç¨‹ä¸­å‘ç”Ÿå¼‚å¸¸: "</span> + e.getMessage());
        }
        
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }
    
    <span class="hljs-comment">/**
     * æ¨¡æ‹Ÿæ£€æŸ¥åº“å­˜
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-title function_">checkStock</span><span class="hljs-params">(String productId)</span> {
        <span class="hljs-comment">// å®é™…åº”ç”¨ä¸­è¿™é‡Œä¼šæŸ¥è¯¢æ•°æ®åº“æˆ–ç¼“å­˜</span>
        <span class="hljs-keyword">return</span> <span class="hljs-number">10</span>; <span class="hljs-comment">// æ¨¡æ‹Ÿæœ‰10ä¸ªåº“å­˜</span>
    }
    
    <span class="hljs-comment">/**
     * æ¨¡æ‹Ÿæ‰£å‡åº“å­˜
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">decreaseStock</span><span class="hljs-params">(String productId)</span> {
        <span class="hljs-comment">// å®é™…åº”ç”¨ä¸­è¿™é‡Œä¼šæ›´æ–°æ•°æ®åº“</span>
        System.out.println(<span class="hljs-string">"æ‰£å‡å•†å“ "</span> + productId + <span class="hljs-string">" çš„åº“å­˜"</span>);
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    }
    
    <span class="hljs-comment">/**
     * æ¨¡æ‹Ÿåˆ›å»ºè®¢å•
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">createOrder</span><span class="hljs-params">(String productId, String userId)</span> {
        <span class="hljs-comment">// å®é™…åº”ç”¨ä¸­è¿™é‡Œä¼šåˆ›å»ºè®¢å•è®°å½•</span>
        System.out.println(<span class="hljs-string">"ä¸ºç”¨æˆ· "</span> + userId + <span class="hljs-string">" åˆ›å»ºå•†å“ "</span> + productId + <span class="hljs-string">" çš„è®¢å•"</span>);
    }
    
    <span class="hljs-comment">/**
     * å¼‚æ­¥èµ„æºè®¿é—®
     */</span>
    <span class="hljs-keyword">public</span> CompletableFuture&lt;Boolean&gt; <span class="hljs-title function_">asyncResourceAccess</span><span class="hljs-params">(String resourceId, <span class="hljs-type">int</span> maxConcurrent, Runnable accessTask)</span> {
        <span class="hljs-keyword">return</span> CompletableFuture.supplyAsync(() -&gt; {
            <span class="hljs-keyword">return</span> controlResourceAccess(resourceId, maxConcurrent, accessTask);
        });
    }
}
</code></pre>
<h3 data-id="heading-14">3. å¸ƒéš†è¿‡æ»¤å™¨ - é«˜æ•ˆå»é‡å’Œæ’æŸ¥</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.redisson.api.RBloomFilter;
<span class="hljs-keyword">import</span> org.redisson.api.RedissonClient;
<span class="hljs-keyword">import</span> java.util.Collection;

<span class="hljs-comment">/**
 * å¸ƒéš†è¿‡æ»¤å™¨ç”Ÿäº§çº§åº”ç”¨åœºæ™¯ç¤ºä¾‹
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BloomFilterScenario</span> {
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> RedissonClient redissonClient;
    
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">BloomFilterScenario</span><span class="hljs-params">(RedissonClient redissonClient)</span> {
        <span class="hljs-built_in">this</span>.redissonClient = redissonClient;
    }
    
    <span class="hljs-comment">/**
     * é˜²æ­¢ç¼“å­˜ç©¿é€çš„å¸ƒéš†è¿‡æ»¤å™¨
     * 
     * <span class="hljs-doctag">@param</span> key è¦æ£€æŸ¥çš„é”®
     * <span class="hljs-doctag">@return</span> å¦‚æœé”®å¯èƒ½å­˜åœ¨åˆ™è¿”å›trueï¼Œå¦‚æœç¡®å®šä¸å­˜åœ¨åˆ™è¿”å›false
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">preventCachePenetration</span><span class="hljs-params">(String key)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">filterName</span> <span class="hljs-operator">=</span> <span class="hljs-string">"cache_penetration_filter"</span>;
        RBloomFilter&lt;String&gt; bloomFilter = redissonClient.getBloomFilter(filterName);
        
        <span class="hljs-comment">// åˆå§‹åŒ–å¸ƒéš†è¿‡æ»¤å™¨ï¼ˆé¢„è®¡100ä¸‡ä¸ªå…ƒç´ ï¼Œ3%è¯¯åˆ¤ç‡ï¼‰</span>
        <span class="hljs-keyword">if</span> (!bloomFilter.isExists()) {
            bloomFilter.tryInit(<span class="hljs-number">1000000</span>, <span class="hljs-number">0.03</span>);
            System.out.println(<span class="hljs-string">"ç¼“å­˜ç©¿é€é˜²æŠ¤å¸ƒéš†è¿‡æ»¤å™¨å·²åˆå§‹åŒ–"</span>);
        }
        
        <span class="hljs-comment">// é¦–å…ˆæ£€æŸ¥å¸ƒéš†è¿‡æ»¤å™¨</span>
        <span class="hljs-keyword">if</span> (!bloomFilter.contains(key)) {
            <span class="hljs-comment">// å¸ƒéš†è¿‡æ»¤å™¨ç¡®è®¤å…ƒç´ ä¸å­˜åœ¨ï¼Œç›´æ¥è¿”å›ï¼Œé¿å…æŸ¥è¯¢ç¼“å­˜å’Œæ•°æ®åº“</span>
            System.out.println(<span class="hljs-string">"å¸ƒéš†è¿‡æ»¤å™¨ç¡®è®¤é”®ä¸å­˜åœ¨ï¼Œè·³è¿‡ç¼“å­˜å’Œæ•°æ®åº“æŸ¥è¯¢: "</span> + key);
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        }
        
        System.out.println(<span class="hljs-string">"å¸ƒéš†è¿‡æ»¤å™¨è®¤ä¸ºé”®å¯èƒ½å­˜åœ¨ï¼Œç»§ç»­æŸ¥è¯¢ç¼“å­˜/æ•°æ®åº“: "</span> + key);
        <span class="hljs-comment">// ç»§ç»­æŸ¥è¯¢ç¼“å­˜å’Œæ•°æ®åº“...</span>
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    }
    
    <span class="hljs-comment">/**
     * URLå»é‡åœºæ™¯
     * 
     * <span class="hljs-doctag">@param</span> url è¦æ£€æŸ¥çš„URL
     * <span class="hljs-doctag">@return</span> å¦‚æœURLæ˜¯æ–°çš„åˆ™è¿”å›trueï¼Œå¦‚æœæ˜¯é‡å¤çš„åˆ™è¿”å›false
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">urlDeduplication</span><span class="hljs-params">(String url)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">filterName</span> <span class="hljs-operator">=</span> <span class="hljs-string">"visited_urls_filter"</span>;
        RBloomFilter&lt;String&gt; bloomFilter = redissonClient.getBloomFilter(filterName);
        
        <span class="hljs-comment">// åˆå§‹åŒ–å¸ƒéš†è¿‡æ»¤å™¨ï¼ˆé¢„è®¡1000ä¸‡ä¸ªURLï¼Œ1%è¯¯åˆ¤ç‡ï¼‰</span>
        <span class="hljs-keyword">if</span> (!bloomFilter.isExists()) {
            bloomFilter.tryInit(<span class="hljs-number">10000000</span>, <span class="hljs-number">0.01</span>);
            System.out.println(<span class="hljs-string">"URLå»é‡å¸ƒéš†è¿‡æ»¤å™¨å·²åˆå§‹åŒ–"</span>);
        }
        
        <span class="hljs-keyword">if</span> (!bloomFilter.contains(url)) {
            <span class="hljs-comment">// é¦–æ¬¡è®¿é—®ï¼Œæ·»åŠ åˆ°è¿‡æ»¤å™¨</span>
            bloomFilter.add(url);
            System.out.println(<span class="hljs-string">"é¦–æ¬¡è®¿é—®URLï¼Œå·²æ·»åŠ åˆ°å¸ƒéš†è¿‡æ»¤å™¨: "</span> + url);
            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
        } <span class="hljs-keyword">else</span> {
            System.out.println(<span class="hljs-string">"URLå·²è®¿é—®è¿‡ï¼Œè·³è¿‡å¤„ç†: "</span> + url);
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        }
    }
    
    <span class="hljs-comment">/**
     * æ‰¹é‡æ·»åŠ å…ƒç´ åˆ°å¸ƒéš†è¿‡æ»¤å™¨
     * 
     * <span class="hljs-doctag">@param</span> filterName è¿‡æ»¤å™¨åç§°
     * <span class="hljs-doctag">@param</span> elements è¦æ·»åŠ çš„å…ƒç´ é›†åˆ
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">batchAddToBloomFilter</span><span class="hljs-params">(String filterName, Collection&lt;String&gt; elements)</span> {
        RBloomFilter&lt;String&gt; bloomFilter = redissonClient.getBloomFilter(filterName);
        
        <span class="hljs-comment">// å¦‚æœè¿‡æ»¤å™¨ä¸å­˜åœ¨ï¼Œä½¿ç”¨é»˜è®¤å‚æ•°åˆ›å»º</span>
        <span class="hljs-keyword">if</span> (!bloomFilter.isExists()) {
            <span class="hljs-comment">// æ ¹æ®å…ƒç´ æ•°é‡ä¼°ç®—å‚æ•°</span>
            <span class="hljs-type">long</span> <span class="hljs-variable">expectedElements</span> <span class="hljs-operator">=</span> Math.max(elements.size() * <span class="hljs-number">2</span>, <span class="hljs-number">100000L</span>);
            bloomFilter.tryInit(expectedElements, <span class="hljs-number">0.03</span>);
            System.out.println(<span class="hljs-string">"å¸ƒéš†è¿‡æ»¤å™¨ "</span> + filterName + <span class="hljs-string">" å·²åˆå§‹åŒ–ï¼Œé¢„æœŸå…ƒç´ æ•°: "</span> + expectedElements);
        }
        
        <span class="hljs-type">int</span> <span class="hljs-variable">addedCount</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
        <span class="hljs-keyword">for</span> (String element : elements) {
            <span class="hljs-keyword">if</span> (bloomFilter.add(element)) {
                addedCount++;
            }
        }
        
        System.out.println(<span class="hljs-string">"æ‰¹é‡æ·»åŠ å®Œæˆï¼Œæ–°å¢ "</span> + addedCount + <span class="hljs-string">" ä¸ªå…ƒç´ åˆ°è¿‡æ»¤å™¨: "</span> + filterName);
    }
    
    <span class="hljs-comment">/**
     * ç”¨æˆ·IDå­˜åœ¨æ€§æ£€æŸ¥
     * 
     * <span class="hljs-doctag">@param</span> userId ç”¨æˆ·ID
     * <span class="hljs-doctag">@return</span> å¦‚æœç”¨æˆ·å¯èƒ½å­˜åœ¨åˆ™è¿”å›true
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">checkUserExists</span><span class="hljs-params">(String userId)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">filterName</span> <span class="hljs-operator">=</span> <span class="hljs-string">"user_exists_filter"</span>;
        RBloomFilter&lt;String&gt; bloomFilter = redissonClient.getBloomFilter(filterName);
        
        <span class="hljs-comment">// åˆå§‹åŒ–å¸ƒéš†è¿‡æ»¤å™¨ï¼ˆé¢„è®¡1000ä¸‡ä¸ªç”¨æˆ·ï¼Œ3%è¯¯åˆ¤ç‡ï¼‰</span>
        <span class="hljs-keyword">if</span> (!bloomFilter.isExists()) {
            bloomFilter.tryInit(<span class="hljs-number">10000000</span>, <span class="hljs-number">0.03</span>);
            System.out.println(<span class="hljs-string">"ç”¨æˆ·å­˜åœ¨æ€§æ£€æŸ¥å¸ƒéš†è¿‡æ»¤å™¨å·²åˆå§‹åŒ–"</span>);
        }
        
        <span class="hljs-type">boolean</span> <span class="hljs-variable">mightExist</span> <span class="hljs-operator">=</span> bloomFilter.contains(userId);
        System.out.println(<span class="hljs-string">"ç”¨æˆ· "</span> + userId + <span class="hljs-string">" å¯èƒ½å­˜åœ¨: "</span> + mightExist);
        <span class="hljs-keyword">return</span> mightExist;
    }
}
</code></pre>
<h3 data-id="heading-15">4. å»¶è¿Ÿé˜Ÿåˆ— - å®šæ—¶ä»»åŠ¡å¤„ç†</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.redisson.api.RBlockingQueue;
<span class="hljs-keyword">import</span> org.redisson.api.RDelayedQueue;
<span class="hljs-keyword">import</span> org.redisson.api.RedissonClient;
<span class="hljs-keyword">import</span> java.util.concurrent.ExecutorService;
<span class="hljs-keyword">import</span> java.util.concurrent.Executors;
<span class="hljs-keyword">import</span> java.util.concurrent.TimeUnit;

<span class="hljs-comment">/**
 * å»¶è¿Ÿé˜Ÿåˆ—ç”Ÿäº§çº§åº”ç”¨åœºæ™¯ç¤ºä¾‹
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DelayedQueueScenario</span> {
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> RedissonClient redissonClient;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> ExecutorService executorService;
    
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">DelayedQueueScenario</span><span class="hljs-params">(RedissonClient redissonClient)</span> {
        <span class="hljs-built_in">this</span>.redissonClient = redissonClient;
        <span class="hljs-built_in">this</span>.executorService = Executors.newFixedThreadPool(<span class="hljs-number">10</span>);
    }
    
    <span class="hljs-comment">/**
     * è®¢å•è¶…æ—¶å¤„ç†åœºæ™¯
     * 
     * <span class="hljs-doctag">@param</span> orderId è®¢å•ID
     * <span class="hljs-doctag">@param</span> timeout è¶…æ—¶æ—¶é—´
     * <span class="hljs-doctag">@param</span> unit æ—¶é—´å•ä½
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">handleOrderTimeout</span><span class="hljs-params">(String orderId, <span class="hljs-type">long</span> timeout, TimeUnit unit)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">queueName</span> <span class="hljs-operator">=</span> <span class="hljs-string">"order_timeout_queue"</span>;
        RBlockingQueue&lt;String&gt; queue = redissonClient.getBlockingQueue(queueName);
        RDelayedQueue&lt;String&gt; delayedQueue = redissonClient.getDelayedQueue(queue);
        
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// è®¢å•åˆ›å»ºåtimeoutæ—¶é—´å¦‚æœä»æœªæ”¯ä»˜ï¼Œåˆ™è§¦å‘è¶…æ—¶å¤„ç†</span>
            delayedQueue.offer(orderId, timeout, unit);
            System.out.println(<span class="hljs-string">"è®¢å• "</span> + orderId + <span class="hljs-string">" å·²æ·»åŠ åˆ°å»¶è¿Ÿé˜Ÿåˆ—ï¼Œè¶…æ—¶æ—¶é—´: "</span> + timeout + <span class="hljs-string">" "</span> + unit);
        } <span class="hljs-keyword">finally</span> {
            <span class="hljs-comment">// æ³¨æ„ï¼šåœ¨å®é™…åº”ç”¨ä¸­ï¼Œå»¶è¿Ÿé˜Ÿåˆ—é€šå¸¸åœ¨æ•´ä¸ªåº”ç”¨ç¨‹åºç”Ÿå‘½å‘¨æœŸå†…ä¿æŒ</span>
            <span class="hljs-comment">// è¿™é‡Œä¸ºäº†ç¤ºä¾‹ç®€åŒ–ï¼Œä½†åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä¸åº”ç«‹å³é”€æ¯</span>
        }
    }
    
    <span class="hljs-comment">/**
     * å¯åŠ¨å»¶è¿Ÿé˜Ÿåˆ—æ¶ˆè´¹è€…çº¿ç¨‹
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">startDelayedQueueConsumer</span><span class="hljs-params">()</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">queueName</span> <span class="hljs-operator">=</span> <span class="hljs-string">"order_timeout_queue"</span>;
        RBlockingQueue&lt;String&gt; queue = redissonClient.getBlockingQueue(queueName);
        RDelayedQueue&lt;String&gt; delayedQueue = redissonClient.getDelayedQueue(queue);
        
        <span class="hljs-comment">// å¯åŠ¨æ¶ˆè´¹è€…çº¿ç¨‹</span>
        executorService.submit(() -&gt; {
            <span class="hljs-keyword">try</span> {
                <span class="hljs-keyword">while</span> (!Thread.currentThread().isInterrupted()) {
                    <span class="hljs-comment">// é˜»å¡ç­‰å¾…è¶…æ—¶è®¢å•</span>
                    <span class="hljs-type">String</span> <span class="hljs-variable">timeoutOrderId</span> <span class="hljs-operator">=</span> queue.take();
                    System.out.println(<span class="hljs-string">"è®¢å•è¶…æ—¶ï¼Œæ‰§è¡Œå–æ¶ˆæ“ä½œ: "</span> + timeoutOrderId);
                    
                    <span class="hljs-comment">// åœ¨ç‹¬ç«‹çº¿ç¨‹ä¸­å¤„ç†è¶…æ—¶è®¢å•ï¼Œé¿å…é˜»å¡é˜Ÿåˆ—æ¶ˆè´¹</span>
                    executorService.submit(() -&gt; {
                        processTimeoutOrder(timeoutOrderId);
                    });
                }
            } <span class="hljs-keyword">catch</span> (InterruptedException e) {
                Thread.currentThread().interrupt();
                System.out.println(<span class="hljs-string">"å»¶è¿Ÿé˜Ÿåˆ—æ¶ˆè´¹è€…çº¿ç¨‹è¢«ä¸­æ–­"</span>);
            } <span class="hljs-keyword">catch</span> (Exception e) {
                System.err.println(<span class="hljs-string">"å»¶è¿Ÿé˜Ÿåˆ—æ¶ˆè´¹è¿‡ç¨‹ä¸­å‘ç”Ÿå¼‚å¸¸: "</span> + e.getMessage());
            }
        });
        
        System.out.println(<span class="hljs-string">"å»¶è¿Ÿé˜Ÿåˆ—æ¶ˆè´¹è€…å·²å¯åŠ¨"</span>);
    }
    
    <span class="hljs-comment">/**
     * å¤„ç†è¶…æ—¶è®¢å•
     * 
     * <span class="hljs-doctag">@param</span> orderId è¶…æ—¶è®¢å•ID
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">processTimeoutOrder</span><span class="hljs-params">(String orderId)</span> {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// æ‰§è¡Œå–æ¶ˆè®¢å•ã€é‡Šæ”¾åº“å­˜ç­‰æ“ä½œ</span>
            System.out.println(<span class="hljs-string">"æ­£åœ¨å¤„ç†è¶…æ—¶è®¢å•: "</span> + orderId);
            
            <span class="hljs-comment">// æ¨¡æ‹Ÿä¸šåŠ¡å¤„ç†</span>
            cancelOrder(orderId);
            releaseInventory(orderId);
            
            System.out.println(<span class="hljs-string">"è¶…æ—¶è®¢å•å¤„ç†å®Œæˆ: "</span> + orderId);
        } <span class="hljs-keyword">catch</span> (Exception e) {
            System.err.println(<span class="hljs-string">"å¤„ç†è¶…æ—¶è®¢å•æ—¶å‘ç”Ÿå¼‚å¸¸ï¼Œè®¢å•ID: "</span> + orderId + <span class="hljs-string">"ï¼Œå¼‚å¸¸: "</span> + e.getMessage());
        }
    }
    
    <span class="hljs-comment">/**
     * è®¢å•æ”¯ä»˜æˆåŠŸåå–æ¶ˆå»¶è¿Ÿä»»åŠ¡
     * 
     * <span class="hljs-doctag">@param</span> orderId è®¢å•ID
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">cancelOrderTimeout</span><span class="hljs-params">(String orderId)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">queueName</span> <span class="hljs-operator">=</span> <span class="hljs-string">"order_timeout_queue"</span>;
        RBlockingQueue&lt;String&gt; queue = redissonClient.getBlockingQueue(queueName);
        RDelayedQueue&lt;String&gt; delayedQueue = redissonClient.getDelayedQueue(queue);
        
        <span class="hljs-comment">// ä»å»¶è¿Ÿé˜Ÿåˆ—ä¸­ç§»é™¤ï¼Œé¿å…è¶…æ—¶å¤„ç†</span>
        <span class="hljs-type">boolean</span> <span class="hljs-variable">removed</span> <span class="hljs-operator">=</span> delayedQueue.remove(orderId);
        <span class="hljs-keyword">if</span> (removed) {
            System.out.println(<span class="hljs-string">"å·²å–æ¶ˆè®¢å•è¶…æ—¶å¤„ç†: "</span> + orderId);
        } <span class="hljs-keyword">else</span> {
            System.out.println(<span class="hljs-string">"è®¢å•ä¸åœ¨å»¶è¿Ÿé˜Ÿåˆ—ä¸­ï¼Œå¯èƒ½å·²è¶…æ—¶å¤„ç†: "</span> + orderId);
        }
        
        <span class="hljs-keyword">return</span> removed;
    }
    
    <span class="hljs-comment">/**
     * å…³é—­èµ„æº
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">shutdown</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">if</span> (executorService != <span class="hljs-literal">null</span> &amp;&amp; !executorService.isShutdown()) {
            executorService.shutdown();
            <span class="hljs-keyword">try</span> {
                <span class="hljs-keyword">if</span> (!executorService.awaitTermination(<span class="hljs-number">5</span>, TimeUnit.SECONDS)) {
                    executorService.shutdownNow();
                }
            } <span class="hljs-keyword">catch</span> (InterruptedException e) {
                executorService.shutdownNow();
                Thread.currentThread().interrupt();
            }
        }
    }
    
    <span class="hljs-comment">/**
     * æ¨¡æ‹Ÿå–æ¶ˆè®¢å•
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">cancelOrder</span><span class="hljs-params">(String orderId)</span> {
        <span class="hljs-comment">// å®é™…åº”ç”¨ä¸­è¿™é‡Œä¼šæ›´æ–°è®¢å•çŠ¶æ€</span>
        System.out.println(<span class="hljs-string">"è®¢å•å·²å–æ¶ˆ: "</span> + orderId);
    }
    
    <span class="hljs-comment">/**
     * æ¨¡æ‹Ÿé‡Šæ”¾åº“å­˜
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">releaseInventory</span><span class="hljs-params">(String orderId)</span> {
        <span class="hljs-comment">// å®é™…åº”ç”¨ä¸­è¿™é‡Œä¼šé‡Šæ”¾å ç”¨çš„åº“å­˜</span>
        System.out.println(<span class="hljs-string">"å·²é‡Šæ”¾è®¢å•åº“å­˜: "</span> + orderId);
    }
}
</code></pre>
<h3 data-id="heading-16">5. åˆ†å¸ƒå¼è®¡æ•°å™¨ - ç»Ÿè®¡å’Œé™æµ</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.redisson.api.RAtomicLong;
<span class="hljs-keyword">import</span> org.redisson.api.RRateLimiter;
<span class="hljs-keyword">import</span> org.redisson.api.RedissonClient;
<span class="hljs-keyword">import</span> org.redisson.api.RateIntervalUnit;
<span class="hljs-keyword">import</span> org.redisson.api.RateType;
<span class="hljs-keyword">import</span> java.util.concurrent.CompletableFuture;
<span class="hljs-keyword">import</span> java.util.concurrent.TimeUnit;

<span class="hljs-comment">/**
 * åˆ†å¸ƒå¼è®¡æ•°å™¨ç”Ÿäº§çº§åº”ç”¨åœºæ™¯ç¤ºä¾‹
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CounterScenario</span> {
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> RedissonClient redissonClient;
    
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">CounterScenario</span><span class="hljs-params">(RedissonClient redissonClient)</span> {
        <span class="hljs-built_in">this</span>.redissonClient = redissonClient;
    }
    
    <span class="hljs-comment">/**
     * æ¥å£è®¿é—®é™æµ
     * 
     * <span class="hljs-doctag">@param</span> interfaceName æ¥å£åç§°
     * <span class="hljs-doctag">@param</span> maxRequests æœ€å¤§è¯·æ±‚æ•°
     * <span class="hljs-doctag">@param</span> timeUnit æ—¶é—´å•ä½
     * <span class="hljs-doctag">@return</span> æ˜¯å¦å…è®¸è®¿é—®
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">interfaceRateLimiting</span><span class="hljs-params">(String interfaceName, <span class="hljs-type">long</span> maxRequests, TimeUnit timeUnit)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">rateLimiterKey</span> <span class="hljs-operator">=</span> <span class="hljs-string">"api_rate_limiter:"</span> + interfaceName;
        <span class="hljs-type">RRateLimiter</span> <span class="hljs-variable">rateLimiter</span> <span class="hljs-operator">=</span> redissonClient.getRateLimiter(rateLimiterKey);
        
        <span class="hljs-comment">// é…ç½®é™æµå™¨ï¼šåœ¨æŒ‡å®šæ—¶é—´é—´éš”å†…æœ€å¤šå…è®¸maxRequestsä¸ªè¯·æ±‚</span>
        <span class="hljs-keyword">if</span> (!rateLimiter.isExists()) {
            RateIntervalUnit intervalUnit;
            <span class="hljs-type">long</span> <span class="hljs-variable">rateInterval</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>;
            
            <span class="hljs-keyword">switch</span> (timeUnit) {
                <span class="hljs-keyword">case</span> SECONDS:
                    intervalUnit = RateIntervalUnit.SECONDS;
                    <span class="hljs-keyword">break</span>;
                <span class="hljs-keyword">case</span> MINUTES:
                    intervalUnit = RateIntervalUnit.MINUTES;
                    <span class="hljs-keyword">break</span>;
                <span class="hljs-keyword">case</span> HOURS:
                    intervalUnit = RateIntervalUnit.HOURS;
                    <span class="hljs-keyword">break</span>;
                <span class="hljs-keyword">default</span>:
                    intervalUnit = RateIntervalUnit.SECONDS;
            }
            
            rateLimiter.trySetRate(RateType.OVERALL, maxRequests, rateInterval, intervalUnit);
            System.out.println(<span class="hljs-string">"æ¥å£ "</span> + interfaceName + <span class="hljs-string">" é™æµå™¨å·²è®¾ç½®: "</span> + maxRequests + 
                             <span class="hljs-string">" æ¬¡/"</span> + timeUnit);
        }
        
        <span class="hljs-comment">// å°è¯•è·å–ä»¤ç‰Œ</span>
        <span class="hljs-type">boolean</span> <span class="hljs-variable">allowed</span> <span class="hljs-operator">=</span> rateLimiter.tryAcquire();
        <span class="hljs-keyword">if</span> (allowed) {
            System.out.println(<span class="hljs-string">"æ¥å£ "</span> + interfaceName + <span class="hljs-string">" è®¿é—®è¢«å…è®¸"</span>);
        } <span class="hljs-keyword">else</span> {
            System.out.println(<span class="hljs-string">"æ¥å£ "</span> + interfaceName + <span class="hljs-string">" è®¿é—®è¢«é™æµ"</span>);
        }
        
        <span class="hljs-keyword">return</span> allowed;
    }
    
    <span class="hljs-comment">/**
     * æ¥å£è®¿é—®ç»Ÿè®¡
     * 
     * <span class="hljs-doctag">@param</span> interfaceName æ¥å£åç§°
     * <span class="hljs-doctag">@return</span> å½“å‰è®¿é—®æ¬¡æ•°
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">long</span> <span class="hljs-title function_">countApiAccess</span><span class="hljs-params">(String interfaceName)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">counterKey</span> <span class="hljs-operator">=</span> <span class="hljs-string">"api_access_counter:"</span> + interfaceName;
        <span class="hljs-type">RAtomicLong</span> <span class="hljs-variable">counter</span> <span class="hljs-operator">=</span> redissonClient.getAtomicLong(counterKey);
        
        <span class="hljs-comment">// åŸå­é€’å¢è®¡æ•°å™¨</span>
        <span class="hljs-type">long</span> <span class="hljs-variable">count</span> <span class="hljs-operator">=</span> counter.incrementAndGet();
        System.out.println(<span class="hljs-string">"æ¥å£ "</span> + interfaceName + <span class="hljs-string">" è®¿é—®æ¬¡æ•°: "</span> + count);
        
        <span class="hljs-keyword">return</span> count;
    }
    
    <span class="hljs-comment">/**
     * åˆ†å¸ƒå¼IDç”Ÿæˆå™¨
     * 
     * <span class="hljs-doctag">@param</span> generatorName ç”Ÿæˆå™¨åç§°
     * <span class="hljs-doctag">@param</span> step æ­¥é•¿
     * <span class="hljs-doctag">@return</span> ä¸‹ä¸€ä¸ªID
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">long</span> <span class="hljs-title function_">generateDistributedId</span><span class="hljs-params">(String generatorName, <span class="hljs-type">long</span> step)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">counterKey</span> <span class="hljs-operator">=</span> <span class="hljs-string">"distributed_id_generator:"</span> + generatorName;
        <span class="hljs-type">RAtomicLong</span> <span class="hljs-variable">idGenerator</span> <span class="hljs-operator">=</span> redissonClient.getAtomicLong(counterKey);
        
        <span class="hljs-comment">// åŸå­æ€§åœ°å¢åŠ stepå¹¶è¿”å›æ–°å€¼</span>
        <span class="hljs-type">long</span> <span class="hljs-variable">nextId</span> <span class="hljs-operator">=</span> idGenerator.addAndGet(step);
        System.out.println(generatorName + <span class="hljs-string">" ç”Ÿæˆçš„ä¸‹ä¸€ä¸ªID: "</span> + nextId);
        
        <span class="hljs-keyword">return</span> nextId;
    }
    
    <span class="hljs-comment">/**
     * ç®€å•çš„åˆ†å¸ƒå¼IDç”Ÿæˆå™¨
     * 
     * <span class="hljs-doctag">@param</span> generatorName ç”Ÿæˆå™¨åç§°
     * <span class="hljs-doctag">@return</span> ä¸‹ä¸€ä¸ªID
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">long</span> <span class="hljs-title function_">generateNextId</span><span class="hljs-params">(String generatorName)</span> {
        <span class="hljs-keyword">return</span> generateDistributedId(generatorName, <span class="hljs-number">1</span>);
    }
    
    <span class="hljs-comment">/**
     * è·å–è®¡æ•°å™¨å½“å‰å€¼
     * 
     * <span class="hljs-doctag">@param</span> counterName è®¡æ•°å™¨åç§°
     * <span class="hljs-doctag">@return</span> å½“å‰è®¡æ•°å€¼
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">long</span> <span class="hljs-title function_">getCurrentCount</span><span class="hljs-params">(String counterName)</span> {
        <span class="hljs-type">RAtomicLong</span> <span class="hljs-variable">counter</span> <span class="hljs-operator">=</span> redissonClient.getAtomicLong(counterName);
        <span class="hljs-keyword">return</span> counter.get();
    }
    
    <span class="hljs-comment">/**
     * é‡ç½®è®¡æ•°å™¨
     * 
     * <span class="hljs-doctag">@param</span> counterName è®¡æ•°å™¨åç§°
     * <span class="hljs-doctag">@param</span> newValue æ–°å€¼
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">resetCounter</span><span class="hljs-params">(String counterName, <span class="hljs-type">long</span> newValue)</span> {
        <span class="hljs-type">RAtomicLong</span> <span class="hljs-variable">counter</span> <span class="hljs-operator">=</span> redissonClient.getAtomicLong(counterName);
        counter.set(newValue);
        System.out.println(<span class="hljs-string">"è®¡æ•°å™¨ "</span> + counterName + <span class="hljs-string">" å·²é‡ç½®ä¸º: "</span> + newValue);
    }
    
    <span class="hljs-comment">/**
     * å¸¦æ¡ä»¶æ›´æ–°çš„è®¡æ•°å™¨æ“ä½œ
     * 
     * <span class="hljs-doctag">@param</span> counterName è®¡æ•°å™¨åç§°
     * <span class="hljs-doctag">@param</span> expectedValue æœŸæœ›å€¼
     * <span class="hljs-doctag">@param</span> newValue æ–°å€¼
     * <span class="hljs-doctag">@return</span> æ›´æ–°æ˜¯å¦æˆåŠŸ
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">conditionalUpdate</span><span class="hljs-params">(String counterName, <span class="hljs-type">long</span> expectedValue, <span class="hljs-type">long</span> newValue)</span> {
        <span class="hljs-type">RAtomicLong</span> <span class="hljs-variable">counter</span> <span class="hljs-operator">=</span> redissonClient.getAtomicLong(counterName);
        
        <span class="hljs-type">boolean</span> <span class="hljs-variable">updated</span> <span class="hljs-operator">=</span> counter.compareAndSet(expectedValue, newValue);
        <span class="hljs-keyword">if</span> (updated) {
            System.out.println(<span class="hljs-string">"è®¡æ•°å™¨ "</span> + counterName + <span class="hljs-string">" æ¡ä»¶æ›´æ–°æˆåŠŸ: "</span> + expectedValue + <span class="hljs-string">" -&gt; "</span> + newValue);
        } <span class="hljs-keyword">else</span> {
            System.out.println(<span class="hljs-string">"è®¡æ•°å™¨ "</span> + counterName + <span class="hljs-string">" æ¡ä»¶æ›´æ–°å¤±è´¥ï¼Œå½“å‰å€¼: "</span> + counter.get());
        }
        
        <span class="hljs-keyword">return</span> updated;
    }
    
    <span class="hljs-comment">/**
     * å¼‚æ­¥è·å–è®¡æ•°å™¨å€¼
     * 
     * <span class="hljs-doctag">@param</span> counterName è®¡æ•°å™¨åç§°
     * <span class="hljs-doctag">@return</span> CompletableFutureè¡¨ç¤ºè®¡æ•°å€¼
     */</span>
    <span class="hljs-keyword">public</span> CompletableFuture&lt;Long&gt; <span class="hljs-title function_">getCounterValueAsync</span><span class="hljs-params">(String counterName)</span> {
        <span class="hljs-keyword">return</span> CompletableFuture.supplyAsync(() -&gt; {
            <span class="hljs-type">RAtomicLong</span> <span class="hljs-variable">counter</span> <span class="hljs-operator">=</span> redissonClient.getAtomicLong(counterName);
            <span class="hljs-keyword">return</span> counter.get();
        });
    }
}
</code></pre>
<h3 data-id="heading-17">6. åˆ†å¸ƒå¼é›†åˆ - å…±äº«æ•°æ®å­˜å‚¨</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.redisson.api.*;
<span class="hljs-keyword">import</span> org.redisson.api.mapreduce.RCollectionMapReduce;
<span class="hljs-keyword">import</span> java.util.Collection;
<span class="hljs-keyword">import</span> java.util.List;
<span class="hljs-keyword">import</span> java.util.Map;

<span class="hljs-comment">/**
 * åˆ†å¸ƒå¼é›†åˆå¹¶å‘çº§åº”ç”¨åœºæ™¯ç¤ºä¾‹
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CollectionsScenario</span> {
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> RedissonClient redissonClient;
    
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">CollectionsScenario</span><span class="hljs-params">(RedissonClient redissonClient)</span> {
        <span class="hljs-built_in">this</span>.redissonClient = redissonClient;
    }
    
    <span class="hljs-comment">/**
     * åˆ†å¸ƒå¼ç¼“å­˜Mapæ“ä½œ
     * 
     * <span class="hljs-doctag">@param</span> cacheName ç¼“å­˜åç§°
     * <span class="hljs-doctag">@param</span> key é”®
     * <span class="hljs-doctag">@param</span> value å€¼
     * <span class="hljs-doctag">@param</span> ttl ç¼“å­˜è¿‡æœŸæ—¶é—´
     * <span class="hljs-doctag">@return</span> æ“ä½œç»“æœ
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">operateDistributedCache</span><span class="hljs-params">(String cacheName, String key, Object value, <span class="hljs-type">long</span> ttl, TimeUnit timeUnit)</span> {
        <span class="hljs-keyword">try</span> {
            RMap&lt;String, Object&gt; cache = redissonClient.getMap(cacheName);
            
            <span class="hljs-comment">// è®¾ç½®å¸¦è¿‡æœŸæ—¶é—´çš„é”®å€¼å¯¹</span>
            <span class="hljs-type">Object</span> <span class="hljs-variable">oldValue</span> <span class="hljs-operator">=</span> cache.put(key, value, ttl, timeUnit);
            
            System.out.println(<span class="hljs-string">"åœ¨ç¼“å­˜ "</span> + cacheName + <span class="hljs-string">" ä¸­è®¾ç½®: "</span> + key + <span class="hljs-string">" = "</span> + value + 
                             <span class="hljs-string">"ï¼Œè¿‡æœŸæ—¶é—´: "</span> + ttl + <span class="hljs-string">" "</span> + timeUnit);
            
            <span class="hljs-keyword">if</span> (oldValue != <span class="hljs-literal">null</span>) {
                System.out.println(<span class="hljs-string">"æ›¿æ¢çš„æ—§å€¼: "</span> + oldValue);
            }
            
            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
        } <span class="hljs-keyword">catch</span> (Exception e) {
            System.err.println(<span class="hljs-string">"æ“ä½œåˆ†å¸ƒå¼ç¼“å­˜æ—¶å‘ç”Ÿå¼‚å¸¸: "</span> + e.getMessage());
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        }
    }
    
    <span class="hljs-comment">/**
     * åœ¨çº¿ç”¨æˆ·ç®¡ç†
     * 
     * <span class="hljs-doctag">@param</span> userId ç”¨æˆ·ID
     * <span class="hljs-doctag">@return</span> æ“ä½œç»“æœ
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">manageOnlineUsers</span><span class="hljs-params">(String userId)</span> {
        <span class="hljs-keyword">try</span> {
            RSet&lt;String&gt; onlineUsers = redissonClient.getSet(<span class="hljs-string">"online_users"</span>);
            
            <span class="hljs-comment">// æ·»åŠ ç”¨æˆ·åˆ°åœ¨çº¿ç”¨æˆ·é›†åˆ</span>
            <span class="hljs-type">boolean</span> <span class="hljs-variable">added</span> <span class="hljs-operator">=</span> onlineUsers.add(userId);
            <span class="hljs-keyword">if</span> (added) {
                System.out.println(<span class="hljs-string">"ç”¨æˆ· "</span> + userId + <span class="hljs-string">" å·²ä¸Šçº¿"</span>);
            } <span class="hljs-keyword">else</span> {
                System.out.println(<span class="hljs-string">"ç”¨æˆ· "</span> + userId + <span class="hljs-string">" å·²åœ¨çº¿"</span>);
            }
            
            <span class="hljs-comment">// è·å–å½“å‰åœ¨çº¿ç”¨æˆ·æ•°</span>
            <span class="hljs-type">int</span> <span class="hljs-variable">onlineCount</span> <span class="hljs-operator">=</span> onlineUsers.size();
            System.out.println(<span class="hljs-string">"å½“å‰åœ¨çº¿ç”¨æˆ·æ•°: "</span> + onlineCount);
            
            <span class="hljs-keyword">return</span> added;
        } <span class="hljs-keyword">catch</span> (Exception e) {
            System.err.println(<span class="hljs-string">"ç®¡ç†åœ¨çº¿ç”¨æˆ·æ—¶å‘ç”Ÿå¼‚å¸¸: "</span> + e.getMessage());
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        }
    }
    
    <span class="hljs-comment">/**
     * ç§»é™¤åœ¨çº¿ç”¨æˆ·
     * 
     * <span class="hljs-doctag">@param</span> userId ç”¨æˆ·ID
     * <span class="hljs-doctag">@return</span> æ˜¯å¦æˆåŠŸç§»é™¤
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">removeOnlineUser</span><span class="hljs-params">(String userId)</span> {
        <span class="hljs-keyword">try</span> {
            RSet&lt;String&gt; onlineUsers = redissonClient.getSet(<span class="hljs-string">"online_users"</span>);
            
            <span class="hljs-type">boolean</span> <span class="hljs-variable">removed</span> <span class="hljs-operator">=</span> onlineUsers.remove(userId);
            <span class="hljs-keyword">if</span> (removed) {
                System.out.println(<span class="hljs-string">"ç”¨æˆ· "</span> + userId + <span class="hljs-string">" å·²ä¸‹çº¿"</span>);
            } <span class="hljs-keyword">else</span> {
                System.out.println(<span class="hljs-string">"ç”¨æˆ· "</span> + userId + <span class="hljs-string">" ä¸åœ¨åœ¨çº¿ç”¨æˆ·åˆ—è¡¨ä¸­"</span>);
            }
            
            <span class="hljs-keyword">return</span> removed;
        } <span class="hljs-keyword">catch</span> (Exception e) {
            System.err.println(<span class="hljs-string">"ç§»é™¤åœ¨çº¿ç”¨æˆ·æ—¶å‘ç”Ÿå¼‚å¸¸: "</span> + e.getMessage());
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        }
    }
    
    <span class="hljs-comment">/**
     * è·å–æ‰€æœ‰åœ¨çº¿ç”¨æˆ·
     * 
     * <span class="hljs-doctag">@return</span> åœ¨çº¿ç”¨æˆ·åˆ—è¡¨
     */</span>
    <span class="hljs-keyword">public</span> List&lt;String&gt; <span class="hljs-title function_">getOnlineUsers</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">try</span> {
            RSet&lt;String&gt; onlineUsers = redissonClient.getSet(<span class="hljs-string">"online_users"</span>);
            <span class="hljs-keyword">return</span> onlineUsers.readAllSet().stream().toList();
        } <span class="hljs-keyword">catch</span> (Exception e) {
            System.err.println(<span class="hljs-string">"è·å–åœ¨çº¿ç”¨æˆ·åˆ—è¡¨æ—¶å‘ç”Ÿå¼‚å¸¸: "</span> + e.getMessage());
            <span class="hljs-keyword">return</span> List.of();
        }
    }
    
    <span class="hljs-comment">/**
     * æ“ä½œåˆ†å¸ƒå¼åˆ—è¡¨
     * 
     * <span class="hljs-doctag">@param</span> listName åˆ—è¡¨åç§°
     * <span class="hljs-doctag">@param</span> elements è¦æ·»åŠ çš„å…ƒç´ 
     * <span class="hljs-doctag">@return</span> æ“ä½œç»“æœ
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">operateDistributedList</span><span class="hljs-params">(String listName, List&lt;String&gt; elements)</span> {
        <span class="hljs-keyword">try</span> {
            RList&lt;String&gt; list = redissonClient.getList(listName);
            
            <span class="hljs-comment">// æ‰¹é‡æ·»åŠ å…ƒç´ </span>
            list.addAll(elements);
            System.out.println(<span class="hljs-string">"å‘åˆ—è¡¨ "</span> + listName + <span class="hljs-string">" æ·»åŠ  "</span> + elements.size() + <span class="hljs-string">" ä¸ªå…ƒç´ "</span>);
            
            <span class="hljs-comment">// è·å–åˆ—è¡¨å¤§å°</span>
            <span class="hljs-type">int</span> <span class="hljs-variable">size</span> <span class="hljs-operator">=</span> list.size();
            System.out.println(<span class="hljs-string">"åˆ—è¡¨ "</span> + listName + <span class="hljs-string">" å½“å‰å¤§å°: "</span> + size);
            
            <span class="hljs-comment">// è·å–åˆ—è¡¨å†…å®¹ï¼ˆé™åˆ¶æ•°é‡ä»¥é¿å…å¤§é‡æ•°æ®ä¼ è¾“ï¼‰</span>
            <span class="hljs-type">int</span> <span class="hljs-variable">maxElementsToShow</span> <span class="hljs-operator">=</span> Math.min(<span class="hljs-number">10</span>, size);
            <span class="hljs-keyword">if</span> (size &gt; <span class="hljs-number">0</span>) {
                java.util.List&lt;String&gt; subList = list.subList(<span class="hljs-number">0</span>, maxElementsToShow);
                System.out.println(<span class="hljs-string">"åˆ—è¡¨å‰ "</span> + maxElementsToShow + <span class="hljs-string">" ä¸ªå…ƒç´ : "</span> + subList);
                <span class="hljs-keyword">if</span> (size &gt; maxElementsToShow) {
                    System.out.println(<span class="hljs-string">"... è¿˜æœ‰ "</span> + (size - maxElementsToShow) + <span class="hljs-string">" ä¸ªå…ƒç´ "</span>);
                }
            }
            
            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
        } <span class="hljs-keyword">catch</span> (Exception e) {
            System.err.println(<span class="hljs-string">"æ“ä½œåˆ†å¸ƒå¼åˆ—è¡¨æ—¶å‘ç”Ÿå¼‚å¸¸: "</span> + e.getMessage());
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        }
    }
    
    <span class="hljs-comment">/**
     * æ‰¹é‡æ“ä½œMap
     * 
     * <span class="hljs-doctag">@param</span> mapName Mapåç§°
     * <span class="hljs-doctag">@param</span> data æ‰¹é‡æ•°æ®
     * <span class="hljs-doctag">@return</span> æ“ä½œç»“æœ
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">batchOperateMap</span><span class="hljs-params">(String mapName, Map&lt;String, Object&gt; data)</span> {
        <span class="hljs-keyword">try</span> {
            RMap&lt;String, Object&gt; map = redissonClient.getMap(mapName);
            
            <span class="hljs-comment">// æ‰¹é‡æ·»åŠ æ•°æ®</span>
            map.putAll(data);
            System.out.println(<span class="hljs-string">"å‘Map "</span> + mapName + <span class="hljs-string">" æ‰¹é‡æ·»åŠ  "</span> + data.size() + <span class="hljs-string">" ä¸ªé”®å€¼å¯¹"</span>);
            
            <span class="hljs-comment">// è·å–Mapå¤§å°</span>
            <span class="hljs-type">int</span> <span class="hljs-variable">size</span> <span class="hljs-operator">=</span> map.size();
            System.out.println(<span class="hljs-string">"Map "</span> + mapName + <span class="hljs-string">" å½“å‰å¤§å°: "</span> + size);
            
            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
        } <span class="hljs-keyword">catch</span> (Exception e) {
            System.err.println(<span class="hljs-string">"æ‰¹é‡æ“ä½œMapæ—¶å‘ç”Ÿå¼‚å¸¸: "</span> + e.getMessage());
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        }
    }
    
    <span class="hljs-comment">/**
     * è·å–Mapçš„æ‰€æœ‰é”®å€¼å¯¹
     * 
     * <span class="hljs-doctag">@param</span> mapName Mapåç§°
     * <span class="hljs-doctag">@return</span> æ‰€æœ‰é”®å€¼å¯¹
     */</span>
    <span class="hljs-keyword">public</span> Map&lt;String, Object&gt; <span class="hljs-title function_">getAllMapEntries</span><span class="hljs-params">(String mapName)</span> {
        <span class="hljs-keyword">try</span> {
            RMap&lt;String, Object&gt; map = redissonClient.getMap(mapName);
            <span class="hljs-keyword">return</span> map.readAllMap();
        } <span class="hljs-keyword">catch</span> (Exception e) {
            System.err.println(<span class="hljs-string">"è·å–Mapæ‰€æœ‰é”®å€¼å¯¹æ—¶å‘ç”Ÿå¼‚å¸¸: "</span> + e.getMessage());
            <span class="hljs-keyword">return</span> Map.of();
        }
    }
    
    <span class="hljs-comment">/**
     * å®‰å…¨åˆ é™¤Mapä¸­çš„é”®å€¼å¯¹
     * 
     * <span class="hljs-doctag">@param</span> mapName Mapåç§°
     * <span class="hljs-doctag">@param</span> key è¦åˆ é™¤çš„é”®
     * <span class="hljs-doctag">@return</span> æ˜¯å¦æˆåŠŸåˆ é™¤
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">safeRemoveFromMap</span><span class="hljs-params">(String mapName, String key)</span> {
        <span class="hljs-keyword">try</span> {
            RMap&lt;String, Object&gt; map = redissonClient.getMap(mapName);
            
            <span class="hljs-type">Object</span> <span class="hljs-variable">removedValue</span> <span class="hljs-operator">=</span> map.remove(key);
            <span class="hljs-keyword">if</span> (removedValue != <span class="hljs-literal">null</span>) {
                System.out.println(<span class="hljs-string">"ä»Map "</span> + mapName + <span class="hljs-string">" ä¸­åˆ é™¤é”®: "</span> + key + <span class="hljs-string">"ï¼Œå€¼: "</span> + removedValue);
                <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
            } <span class="hljs-keyword">else</span> {
                System.out.println(<span class="hljs-string">"é”® "</span> + key + <span class="hljs-string">" åœ¨Map "</span> + mapName + <span class="hljs-string">" ä¸­ä¸å­˜åœ¨"</span>);
                <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
            }
        } <span class="hljs-keyword">catch</span> (Exception e) {
            System.err.println(<span class="hljs-string">"å®‰å…¨åˆ é™¤Mapé”®å€¼å¯¹æ—¶å‘ç”Ÿå¼‚å¸¸: "</span> + e.getMessage());
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        }
    }
}
</code></pre>
<h3 data-id="heading-18">7. å‘å¸ƒ/è®¢é˜… - å®æ—¶æ¶ˆæ¯é€šçŸ¥</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.redisson.api.RTopic;
<span class="hljs-keyword">import</span> org.redisson.api.RedissonClient;
<span class="hljs-keyword">import</span> org.redisson.api.listener.MessageListener;
<span class="hljs-keyword">import</span> java.util.concurrent.CompletableFuture;
<span class="hljs-keyword">import</span> java.util.concurrent.ExecutorService;
<span class="hljs-keyword">import</span> java.util.concurrent.Executors;
<span class="hljs-keyword">import</span> java.util.concurrent.TimeUnit;

<span class="hljs-comment">/**
 * å‘å¸ƒ/è®¢é˜…ç”Ÿäº§çº§åº”ç”¨åœºæ™¯ç¤ºä¾‹
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PubSubScenario</span> {
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> RedissonClient redissonClient;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> ExecutorService executorService;
    
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">PubSubScenario</span><span class="hljs-params">(RedissonClient redissonClient)</span> {
        <span class="hljs-built_in">this</span>.redissonClient = redissonClient;
        <span class="hljs-built_in">this</span>.executorService = Executors.newCachedThreadPool();
    }
    
    <span class="hljs-comment">/**
     * è®¢é˜…ç³»ç»Ÿé€šçŸ¥
     * 
     * <span class="hljs-doctag">@param</span> topicName ä¸»é¢˜åç§°
     * <span class="hljs-doctag">@param</span> notificationHandler é€šçŸ¥å¤„ç†å™¨
     * <span class="hljs-doctag">@return</span> ç›‘å¬å™¨ID
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">subscribeSystemNotifications</span><span class="hljs-params">(String topicName, java.util.function.Consumer&lt;String&gt; notificationHandler)</span> {
        <span class="hljs-type">RTopic</span> <span class="hljs-variable">topic</span> <span class="hljs-operator">=</span> redissonClient.getTopic(topicName);
        
        <span class="hljs-comment">// æ·»åŠ æ¶ˆæ¯ç›‘å¬å™¨</span>
        <span class="hljs-type">int</span> <span class="hljs-variable">listenerId</span> <span class="hljs-operator">=</span> topic.addListener(String.class, <span class="hljs-keyword">new</span> <span class="hljs-title class_">MessageListener</span>&lt;String&gt;() {
            <span class="hljs-meta">@Override</span>
            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onMessage</span><span class="hljs-params">(CharSequence channel, String message)</span> {
                System.out.println(<span class="hljs-string">"æ”¶åˆ°ç³»ç»Ÿé€šçŸ¥ - é¢‘é“: "</span> + channel + <span class="hljs-string">"ï¼Œæ¶ˆæ¯: "</span> + message);
                
                <span class="hljs-comment">// åœ¨ç‹¬ç«‹çº¿ç¨‹ä¸­å¤„ç†æ¶ˆæ¯ï¼Œé¿å…é˜»å¡Redissonçš„æ¶ˆæ¯å¤„ç†çº¿ç¨‹</span>
                executorService.submit(() -&gt; {
                    <span class="hljs-keyword">try</span> {
                        notificationHandler.accept(message);
                    } <span class="hljs-keyword">catch</span> (Exception e) {
                        System.err.println(<span class="hljs-string">"å¤„ç†ç³»ç»Ÿé€šçŸ¥æ—¶å‘ç”Ÿå¼‚å¸¸: "</span> + e.getMessage());
                    }
                });
            }
        });
        
        System.out.println(<span class="hljs-string">"å·²è®¢é˜…ç³»ç»Ÿé€šçŸ¥ä¸»é¢˜: "</span> + topicName + <span class="hljs-string">"ï¼Œç›‘å¬å™¨ID: "</span> + listenerId);
        <span class="hljs-keyword">return</span> listenerId;
    }
    
    <span class="hljs-comment">/**
     * å‘å¸ƒç³»ç»Ÿé€šçŸ¥
     * 
     * <span class="hljs-doctag">@param</span> topicName ä¸»é¢˜åç§°
     * <span class="hljs-doctag">@param</span> message é€šçŸ¥æ¶ˆæ¯
     * <span class="hljs-doctag">@return</span> æ¥æ”¶è€…æ•°é‡
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">long</span> <span class="hljs-title function_">publishSystemNotification</span><span class="hljs-params">(String topicName, String message)</span> {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-type">RTopic</span> <span class="hljs-variable">topic</span> <span class="hljs-operator">=</span> redissonClient.getTopic(topicName);
            
            <span class="hljs-comment">// å‘å¸ƒæ¶ˆæ¯</span>
            <span class="hljs-type">long</span> <span class="hljs-variable">receivers</span> <span class="hljs-operator">=</span> topic.publish(message);
            System.out.println(<span class="hljs-string">"ç³»ç»Ÿé€šçŸ¥å·²å‘å¸ƒ - ä¸»é¢˜: "</span> + topicName + 
                             <span class="hljs-string">"ï¼Œæ¶ˆæ¯: "</span> + message + 
                             <span class="hljs-string">"ï¼Œæ¥æ”¶è€…æ•°é‡: "</span> + receivers);
            
            <span class="hljs-keyword">return</span> receivers;
        } <span class="hljs-keyword">catch</span> (Exception e) {
            System.err.println(<span class="hljs-string">"å‘å¸ƒç³»ç»Ÿé€šçŸ¥æ—¶å‘ç”Ÿå¼‚å¸¸: "</span> + e.getMessage());
            <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
        }
    }
    
    <span class="hljs-comment">/**
     * å¼‚æ­¥å‘å¸ƒç³»ç»Ÿé€šçŸ¥
     * 
     * <span class="hljs-doctag">@param</span> topicName ä¸»é¢˜åç§°
     * <span class="hljs-doctag">@param</span> message é€šçŸ¥æ¶ˆæ¯
     * <span class="hljs-doctag">@return</span> CompletableFutureè¡¨ç¤ºå‘å¸ƒç»“æœ
     */</span>
    <span class="hljs-keyword">public</span> CompletableFuture&lt;Long&gt; <span class="hljs-title function_">publishSystemNotificationAsync</span><span class="hljs-params">(String topicName, String message)</span> {
        <span class="hljs-keyword">return</span> CompletableFuture.supplyAsync(() -&gt; {
            <span class="hljs-keyword">return</span> publishSystemNotification(topicName, message);
        }, executorService);
    }
    
    <span class="hljs-comment">/**
     * è®¢å•çŠ¶æ€å˜æ›´é€šçŸ¥åœºæ™¯
     * 
     * <span class="hljs-doctag">@param</span> orderId è®¢å•ID
     * <span class="hljs-doctag">@param</span> newStatus æ–°çŠ¶æ€
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">notifyOrderStatusChange</span><span class="hljs-params">(String orderId, String newStatus)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">topicName</span> <span class="hljs-operator">=</span> <span class="hljs-string">"order_status_change"</span>;
        <span class="hljs-type">String</span> <span class="hljs-variable">message</span> <span class="hljs-operator">=</span> String.format(<span class="hljs-string">"è®¢å• %s çŠ¶æ€å˜æ›´ä¸º %s"</span>, orderId, newStatus);
        
        publishSystemNotification(topicName, message);
    }
    
    <span class="hljs-comment">/**
     * ç”¨æˆ·ç™»å½•é€šçŸ¥åœºæ™¯
     * 
     * <span class="hljs-doctag">@param</span> userId ç”¨æˆ·ID
     * <span class="hljs-doctag">@param</span> loginTime ç™»å½•æ—¶é—´
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">notifyUserLogin</span><span class="hljs-params">(String userId, <span class="hljs-type">long</span> loginTime)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">topicName</span> <span class="hljs-operator">=</span> <span class="hljs-string">"user_login"</span>;
        <span class="hljs-type">String</span> <span class="hljs-variable">message</span> <span class="hljs-operator">=</span> String.format(<span class="hljs-string">"ç”¨æˆ· %s äº %d ç™»å½•"</span>, userId, loginTime);
        
        publishSystemNotification(topicName, message);
    }
    
    <span class="hljs-comment">/**
     * ç³»ç»Ÿç»´æŠ¤é€šçŸ¥åœºæ™¯
     * 
     * <span class="hljs-doctag">@param</span> maintenanceTime ç»´æŠ¤æ—¶é—´
     * <span class="hljs-doctag">@param</span> duration ç»´æŠ¤æ—¶é•¿
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">notifySystemMaintenance</span><span class="hljs-params">(<span class="hljs-type">long</span> maintenanceTime, <span class="hljs-type">long</span> duration)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">topicName</span> <span class="hljs-operator">=</span> <span class="hljs-string">"system_maintenance"</span>;
        <span class="hljs-type">String</span> <span class="hljs-variable">message</span> <span class="hljs-operator">=</span> String.format(<span class="hljs-string">"ç³»ç»Ÿå°†äº %d å¼€å§‹ç»´æŠ¤ï¼Œé¢„è®¡æŒç»­ %d ç§’"</span>, maintenanceTime, duration);
        
        publishSystemNotification(topicName, message);
    }
    
    <span class="hljs-comment">/**
     * ç§»é™¤æ¶ˆæ¯ç›‘å¬å™¨
     * 
     * <span class="hljs-doctag">@param</span> topicName ä¸»é¢˜åç§°
     * <span class="hljs-doctag">@param</span> listenerId ç›‘å¬å™¨ID
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">removeMessageListener</span><span class="hljs-params">(String topicName, <span class="hljs-type">int</span> listenerId)</span> {
        <span class="hljs-type">RTopic</span> <span class="hljs-variable">topic</span> <span class="hljs-operator">=</span> redissonClient.getTopic(topicName);
        topic.removeListener(listenerId);
        System.out.println(<span class="hljs-string">"å·²ç§»é™¤ç›‘å¬å™¨ï¼ŒID: "</span> + listenerId + <span class="hljs-string">"ï¼Œä¸»é¢˜: "</span> + topicName);
    }
    
    <span class="hljs-comment">/**
     * å…³é—­èµ„æº
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">shutdown</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">if</span> (executorService != <span class="hljs-literal">null</span> &amp;&amp; !executorService.isShutdown()) {
            executorService.shutdown();
            <span class="hljs-keyword">try</span> {
                <span class="hljs-keyword">if</span> (!executorService.awaitTermination(<span class="hljs-number">5</span>, TimeUnit.SECONDS)) {
                    executorService.shutdownNow();
                }
            } <span class="hljs-keyword">catch</span> (InterruptedException e) {
                executorService.shutdownNow();
                Thread.currentThread().interrupt();
            }
        }
    }
}
</code></pre>
<h2 data-id="heading-19">åº•å±‚åŸç†è¯¦è§£</h2>
<h3 data-id="heading-20">1. åˆ†å¸ƒå¼é”å®ç°åŸç† ğŸ§©</h3>
<p>Redissonçš„åˆ†å¸ƒå¼é”å°±åƒä¸€ä¸ªæ™ºèƒ½"é—¨å«"ï¼Œå®ƒçš„å®ç°åŸç†éå¸¸å·§å¦™ï¼š</p>
<ul>
<li><strong>è·å–é”</strong>: ä½¿ç”¨Redisçš„<code>SET key value NX EX seconds</code>å‘½ä»¤ï¼Œå°±åƒä¸€ä¸ª"å…ˆåˆ°å…ˆå¾—"çš„æœºåˆ¶ï¼Œç¡®ä¿åªæœ‰åœ¨keyä¸å­˜åœ¨æ—¶æ‰è®¾ç½®æˆåŠŸï¼Œå®ç°åŸå­æ€§æ“ä½œ</li>
<li><strong>Watchdogæœºåˆ¶</strong>: Redissonä½¿ç”¨åå°å®šæ—¶ä»»åŠ¡ï¼ˆçœ‹é—¨ç‹—ï¼‰ï¼Œæ¯è¿‡é”è¿‡æœŸæ—¶é—´çš„1/3å°±è‡ªåŠ¨ç»­æœŸï¼Œå°±åƒç»™é”è£…äº†"æ°¸ä¸æ–­ç”µ"çš„ç”µæ± ï¼Œé˜²æ­¢ä¸šåŠ¡æ‰§è¡Œæ—¶é—´è¿‡é•¿å¯¼è‡´é”æ„å¤–é‡Šæ”¾</li>
<li><strong>å¯é‡å…¥æ€§</strong>: é€šè¿‡Redis Hashç»“æ„è®°å½•çº¿ç¨‹IDå’Œé‡å…¥æ¬¡æ•°ï¼Œè®©åŒä¸€ä¸ª"å®¢äºº"å¯ä»¥å¤šæ¬¡è¿›å…¥"æˆ¿é—´"</li>
<li><strong>åŸå­æ€§æ“ä½œ</strong>: ä½¿ç”¨Luaè„šæœ¬ä¿è¯å¤šä¸ªRediså‘½ä»¤çš„åŸå­æ‰§è¡Œï¼Œå°±åƒä¸€ä¸ª"å¯†é—­æˆ¿é—´"ï¼Œç¡®ä¿æ“ä½œçš„å®Œæ•´æ€§</li>
<li><strong>é”é‡Šæ”¾</strong>: åªæœ‰é”çš„æŒæœ‰è€…æ‰èƒ½é‡Šæ”¾é”ï¼ˆé€šè¿‡Luaè„šæœ¬éªŒè¯ï¼‰ï¼Œé˜²æ­¢"å¼ å† ææˆ´"</li>
<li><strong>RedLockç®—æ³•</strong>: åœ¨å¤šRedisèŠ‚ç‚¹ç¯å¢ƒä¸‹ï¼Œéœ€è¦åŠæ•°ä»¥ä¸ŠèŠ‚ç‚¹è·å–é”æ‰ç®—æˆåŠŸï¼Œå°±åƒ"å°‘æ•°æœä»å¤šæ•°"çš„æ°‘ä¸»æœºåˆ¶</li>
</ul>
<h3 data-id="heading-21">2. ä¿¡å·é‡å®ç°åŸç† ğŸš¦</h3>
<p>ä¿¡å·é‡å°±åƒä¸€ä¸ªæ™ºèƒ½"äº¤é€šç¯"æ§åˆ¶å™¨ï¼š</p>
<ul>
<li><strong>è®¸å¯è¯ç®¡ç†</strong>: ä½¿ç”¨Redisçš„åŸå­æ“ä½œæ¥ç®¡ç†è®¸å¯è¯æ•°é‡ï¼Œç¡®ä¿è®¸å¯è¯è®¡æ•°çš„å‡†ç¡®æ€§</li>
<li><strong>é˜»å¡è·å–</strong>: å½“è®¸å¯è¯ä¸è¶³æ—¶ï¼Œä½¿ç”¨Redisçš„å‘å¸ƒ/è®¢é˜…æœºåˆ¶å®ç°ä¼˜é›…çš„é˜»å¡ç­‰å¾…ï¼Œå°±åƒ"æ’é˜Ÿç­‰åº§"ä¸€æ ·</li>
<li><strong>é‡Šæ”¾è®¸å¯è¯</strong>: å½“è®¸å¯è¯è¢«é‡Šæ”¾æ—¶ï¼Œè‡ªåŠ¨é€šçŸ¥ç­‰å¾…çš„çº¿ç¨‹ï¼Œå®ç°èµ„æºçš„æœ‰æ•ˆåˆ†é…</li>
</ul>
<h3 data-id="heading-22">3. å»¶è¿Ÿé˜Ÿåˆ—å®ç°åŸç† â°</h3>
<p>å»¶è¿Ÿé˜Ÿåˆ—å°±åƒä¸€ä¸ªæ™ºèƒ½"é—¹é’Ÿ"ï¼š</p>
<ul>
<li><strong>æ—¶é—´è½®ç®—æ³•</strong>: Redissonä½¿ç”¨Sorted Set (ZSET) æŒ‰æ—¶é—´æˆ³é¡ºåºå­˜å‚¨å»¶è¿Ÿå…ƒç´ ï¼Œå°±åƒæŒ‰ç…§"é—¹é’Ÿæ—¶é—´"æ’åˆ—çš„é—¹é’Ÿé˜µåˆ—</li>
<li><strong>åå°è½®è¯¢</strong>: ç»´æŠ¤ä¸€ä¸ªåå°çº¿ç¨‹ä¸æ–­è½®è¯¢ZSETï¼Œå°†åˆ°æœŸå…ƒç´ è½¬ç§»åˆ°åº•å±‚é˜Ÿåˆ—ï¼Œå°±åƒ"æ—¶é—´å®ˆæŠ¤è€…"æ—¶åˆ»ç›‘æµ‹</li>
<li><strong>åŸå­è½¬ç§»</strong>: ä½¿ç”¨Luaè„šæœ¬ç¡®ä¿å»¶è¿Ÿå…ƒç´ åˆ°æ™®é€šé˜Ÿåˆ—çš„è½¬ç§»æ˜¯åŸå­æ“ä½œï¼Œé¿å…"æ—¶é—´é”™ä¹±"</li>
</ul>
<h3 data-id="heading-23">4. å¸ƒéš†è¿‡æ»¤å™¨å®ç°åŸç† ğŸ§º</h3>
<p>å¸ƒéš†è¿‡æ»¤å™¨å°±åƒä¸€ä¸ªç¥å¥‡çš„"ç­›å­"ï¼š</p>
<ul>
<li><strong>å¤šHashå‡½æ•°</strong>: ä½¿ç”¨å¤šä¸ªHashå‡½æ•°å¯¹å…ƒç´ è¿›è¡Œè®¡ç®—ï¼Œå°±åƒç”¨å¤šä¸ª"ç­›å­”"å®šä½å…ƒç´ ä½ç½®</li>
<li><strong>BitSetå­˜å‚¨</strong>: ä½¿ç”¨Redisçš„Stringç±»å‹æ¨¡æ‹ŸBitSetï¼Œæ¯ä¸ªbitä½ä»£è¡¨ä¸€ä¸ªå¯èƒ½çš„å…ƒç´ ä½ç½®</li>
<li><strong>è¯¯åˆ¤ç‡æ§åˆ¶</strong>: é€šè¿‡è°ƒæ•´Hashå‡½æ•°ä¸ªæ•°å’ŒBitSetå¤§å°æ¥æ§åˆ¶è¯¯åˆ¤ç‡ï¼Œå°±åƒè°ƒæ•´"ç­›å­ç²¾åº¦"</li>
<li><strong>ç©ºé—´æ•ˆç‡</strong>: ç›¸æ¯”ä¼ ç»Ÿé›†åˆï¼Œå¸ƒéš†è¿‡æ»¤å™¨å ç”¨ç©ºé—´æå°ï¼Œä½†å­˜åœ¨å°‘é‡è¯¯åˆ¤ï¼Œæ˜¯"ç©ºé—´æ¢æ—¶é—´"çš„å…¸å‹åº”ç”¨</li>
</ul>
<h3 data-id="heading-24">5. å‘å¸ƒ/è®¢é˜…æœºåˆ¶ ğŸ“¡</h3>
<p>å‘å¸ƒ/è®¢é˜…å°±åƒä¸€ä¸ªé«˜æ•ˆçš„"å¹¿æ’­ç«™"ï¼š</p>
<ul>
<li><strong>Redis PUB/SUB</strong>: åŸºäºRedisçš„åŸç”Ÿå‘å¸ƒ/è®¢é˜…åŠŸèƒ½å®ç°ï¼Œæä¾›å®æ—¶æ¶ˆæ¯ä¼ é€’</li>
<li><strong>æ¨¡å¼åŒ¹é…</strong>: æ”¯æŒä½¿ç”¨é€šé…ç¬¦è¿›è¡Œé¢‘é“æ¨¡å¼åŒ¹é…ï¼Œè®©æ¶ˆæ¯ä¼ é€’æ›´çµæ´»</li>
<li><strong>æ¶ˆæ¯å¯é æ€§</strong>: æä¾›åŒæ­¥å’Œå¼‚æ­¥ä¸¤ç§æ¶ˆæ¯å¤„ç†æ–¹å¼ï¼Œæ»¡è¶³ä¸åŒåœºæ™¯éœ€æ±‚</li>
<li><strong>è¿æ¥ç®¡ç†</strong>: è‡ªåŠ¨å¤„ç†è¿æ¥æ–­å¼€å’Œé‡è¿ï¼Œç¡®ä¿æ¶ˆæ¯ä¼ é€’çš„å¯é æ€§</li>
</ul>
<h3 data-id="heading-25">6. åºåˆ—åŒ–ä¸ååºåˆ—åŒ– ğŸ“¦</h3>
<p>åºåˆ—åŒ–å°±åƒæ•°æ®çš„"å˜èº«æœ¯"ï¼š</p>
<ul>
<li><strong>é»˜è®¤ç­–ç•¥</strong>: ä½¿ç”¨Jackson JSONåºåˆ—åŒ–ï¼Œä¿è¯æ•°æ®çš„å¯è¯»æ€§å’Œè·¨è¯­è¨€å…¼å®¹æ€§</li>
<li><strong>å¤šç§ç­–ç•¥</strong>: æ”¯æŒKryoã€FSTã€Smileã€CBORç­‰å¤šç§åºåˆ—åŒ–æ–¹å¼ï¼Œæ»¡è¶³ä¸åŒæ€§èƒ½éœ€æ±‚</li>
<li><strong>æ€§èƒ½å¯¹æ¯”</strong>: Kryoå’ŒFSTåºåˆ—åŒ–é€Ÿåº¦å¿«ã€ä½“ç§¯å°ï¼Œä½†Jacksonå…¼å®¹æ€§æ›´å¥½</li>
<li><strong>è‡ªå®šä¹‰åºåˆ—åŒ–</strong>: å¯é€šè¿‡é…ç½®è‡ªå®šä¹‰åºåˆ—åŒ–ç­–ç•¥ï¼Œæ»¡è¶³ç‰¹æ®Šä¸šåŠ¡éœ€æ±‚</li>
</ul>
<h2 data-id="heading-26">æ€§èƒ½ä¼˜åŒ–å»ºè®® ğŸš€</h2>
<ol>
<li>
<p><strong>åˆç†è®¾ç½®è¿æ¥æ± å¤§å°</strong> ğŸ’§ - å°±åƒç»™æ°´ç®¡è®¾ç½®åˆé€‚çš„å£å¾„ï¼Œè¿æ¥æ± å¤ªå°ä¼šé€ æˆ"ä¾›æ°´ä¸è¶³"ï¼ˆè¯·æ±‚æ’é˜Ÿï¼‰ï¼Œå¤ªå¤§åˆ™ä¼šé€ æˆ"èµ„æºæµªè´¹"ï¼ˆè¿æ¥é—²ç½®ï¼‰ï¼Œéœ€è¦æ ¹æ®å®é™…ä¸šåŠ¡æµé‡æ¥"ç²¾ç¡®è°ƒèŠ‚"</p>
</li>
<li>
<p><strong>ä½¿ç”¨æœ¬åœ°ç¼“å­˜å‡å°‘Redisè®¿é—®</strong> ğŸ  - å°±åƒåœ¨å®¶ä¸­å‚¨å¤‡æ—¥å¸¸ç”¨å“ä¸€æ ·ï¼Œé¢‘ç¹è®¿é—®çš„æ•°æ®å¯ä»¥æ”¾åœ¨æœ¬åœ°ç¼“å­˜ä¸­ï¼Œå‡å°‘ç½‘ç»œå¾€è¿”çš„å¼€é”€ï¼Œè®©è®¿é—®å¦‚"è¿‘æ°´æ¥¼å°å…ˆå¾—æœˆ"</p>
</li>
<li>
<p><strong>æ‰¹é‡æ“ä½œæé«˜æ•ˆç‡</strong> ğŸ“¦ - å°±åƒè´­ç‰©æ—¶ä¸€æ¬¡æ€§è´­ä¹°å¤šä»¶å•†å“æ¯”å¤šæ¬¡å•ç‹¬è´­ä¹°æ›´é«˜æ•ˆä¸€æ ·ï¼Œæ‰¹é‡æ“ä½œå¯ä»¥æ˜¾è‘—å‡å°‘ç½‘ç»œé€šä¿¡æ¬¡æ•°ï¼Œæå‡æ•´ä½“æ€§èƒ½</p>
</li>
<li>
<p><strong>åˆç†è®¾ç½®é”çš„è¶…æ—¶æ—¶é—´</strong> â±ï¸ - å°±åƒåœè½¦åœºçš„è®¡æ—¶æ”¶è´¹ä¸€æ ·ï¼Œé”çš„è¶…æ—¶æ—¶é—´è®¾ç½®è¦æ°åˆ°å¥½å¤„ï¼Œå¤ªçŸ­å¯èƒ½å¯¼è‡´ä¸šåŠ¡æœªå®Œæˆå°±è¢«é‡Šæ”¾ï¼Œå¤ªé•¿åˆ™å¯èƒ½é€ æˆèµ„æºé•¿æ—¶é—´å ç”¨</p>
</li>
<li>
<p><strong>é€‰æ‹©åˆé€‚çš„åºåˆ—åŒ–æ–¹å¼</strong> ğŸ“ - å°±åƒé€‰æ‹©ä¸åŒçš„ä¿¡å°ä¸€æ ·ï¼Œä¸åŒçš„åºåˆ—åŒ–æ–¹å¼æœ‰ä¸åŒçš„ç‰¹ç‚¹ï¼šJacksonå…¼å®¹æ€§å¥½ä½†ä½“ç§¯å¤§ï¼ŒKryoå’ŒFSTé€Ÿåº¦å¿«ä½†é€‚ç”¨èŒƒå›´æœ‰é™ï¼Œè¦æ ¹æ®åœºæ™¯é€‰æ‹©</p>
</li>
</ol>
<h2 data-id="heading-27">å¸¸è§é—®é¢˜ä¸æœ€ä½³å®è·µ</h2>
<h3 data-id="heading-28">1. é”çš„å¯é‡å…¥æ€§</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.redisson.api.RLock;
<span class="hljs-keyword">import</span> org.redisson.api.RedissonClient;
<span class="hljs-keyword">import</span> java.util.concurrent.TimeUnit;

<span class="hljs-comment">/**
 * åˆ†å¸ƒå¼é”å¯é‡å…¥æ€§ç”Ÿäº§çº§ç¤ºä¾‹
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ReentrantLockExample</span> {
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> RedissonClient redissonClient;
    
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">ReentrantLockExample</span><span class="hljs-params">(RedissonClient redissonClient)</span> {
        <span class="hljs-built_in">this</span>.redissonClient = redissonClient;
    }
    
    <span class="hljs-comment">/**
     * æ¼”ç¤ºåˆ†å¸ƒå¼é”çš„å¯é‡å…¥æ€§
     * 
     * <span class="hljs-doctag">@param</span> lockKey é”çš„key
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">demonstrateReentrantLock</span><span class="hljs-params">(String lockKey)</span> {
        <span class="hljs-type">RLock</span> <span class="hljs-variable">lock</span> <span class="hljs-operator">=</span> redissonClient.getLock(lockKey);
        
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// ç¬¬ä¸€æ¬¡è·å–é”</span>
            lock.lock(<span class="hljs-number">30</span>, TimeUnit.SECONDS);
            System.out.println(<span class="hljs-string">"ç¬¬ä¸€æ¬¡è·å–é”æˆåŠŸ: "</span> + lockKey);
            
            <span class="hljs-keyword">try</span> {
                <span class="hljs-comment">// åŒä¸€çº¿ç¨‹å¯ä»¥å¤šæ¬¡è·å–åŒä¸€æŠŠé”ï¼ˆå¯é‡å…¥ï¼‰</span>
                lock.lock(<span class="hljs-number">30</span>, TimeUnit.SECONDS);
                System.out.println(<span class="hljs-string">"ç¬¬äºŒæ¬¡è·å–é”æˆåŠŸï¼ˆå¯é‡å…¥ï¼‰: "</span> + lockKey);
                
                <span class="hljs-keyword">try</span> {
                    lock.lock(<span class="hljs-number">30</span>, TimeUnit.SECONDS);
                    System.out.println(<span class="hljs-string">"ç¬¬ä¸‰æ¬¡è·å–é”æˆåŠŸï¼ˆå¯é‡å…¥ï¼‰: "</span> + lockKey);
                    
                    <span class="hljs-comment">// æ‰§è¡Œä¸šåŠ¡é€»è¾‘</span>
                    System.out.println(<span class="hljs-string">"æ‰§è¡Œä¸šåŠ¡é€»è¾‘..."</span>);
                    
                } <span class="hljs-keyword">finally</span> {
                    <span class="hljs-comment">// éœ€è¦å¯¹åº”æ¬¡æ•°çš„unlockæ“ä½œ</span>
                    lock.unlock();
                    System.out.println(<span class="hljs-string">"ç¬¬ä¸‰æ¬¡é‡Šæ”¾é”: "</span> + lockKey + <span class="hljs-string">"ï¼Œé”ä»è¢«æŒæœ‰: "</span> + lock.isLocked());
                }
                
            } <span class="hljs-keyword">finally</span> {
                <span class="hljs-comment">// ç¬¬äºŒæ¬¡é‡Šæ”¾é”</span>
                lock.unlock();
                System.out.println(<span class="hljs-string">"ç¬¬äºŒæ¬¡é‡Šæ”¾é”: "</span> + lockKey + <span class="hljs-string">"ï¼Œé”ä»è¢«æŒæœ‰: "</span> + lock.isLocked());
            }
            
        } <span class="hljs-keyword">finally</span> {
            <span class="hljs-comment">// æœ€åä¸€æ¬¡é‡Šæ”¾é”ï¼ŒçœŸæ­£é‡Šæ”¾é”</span>
            <span class="hljs-keyword">if</span> (lock.isHeldByCurrentThread()) {
                lock.unlock();
                System.out.println(<span class="hljs-string">"ç¬¬ä¸€æ¬¡é‡Šæ”¾é”: "</span> + lockKey + <span class="hljs-string">"ï¼Œé”å·²å®Œå…¨é‡Šæ”¾: "</span> + !lock.isLocked());
            }
        }
    }
    
    <span class="hljs-comment">/**
     * å®‰å…¨çš„å¯é‡å…¥é”æ“ä½œ
     * 
     * <span class="hljs-doctag">@param</span> lockKey é”çš„key
     * <span class="hljs-doctag">@param</span> businessLogic ä¸šåŠ¡é€»è¾‘
     * <span class="hljs-doctag">@return</span> æ“ä½œç»“æœ
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">safeReentrantOperation</span><span class="hljs-params">(String lockKey, Runnable businessLogic)</span> {
        <span class="hljs-type">RLock</span> <span class="hljs-variable">lock</span> <span class="hljs-operator">=</span> redissonClient.getLock(lockKey);
        <span class="hljs-type">int</span> <span class="hljs-variable">lockCount</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; <span class="hljs-comment">// è®°å½•åŠ é”æ¬¡æ•°</span>
        
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// è·å–ä¸»é”</span>
            lock.lock(<span class="hljs-number">30</span>, TimeUnit.SECONDS);
            lockCount++;
            
            <span class="hljs-comment">// åœ¨ä¸šåŠ¡é€»è¾‘ä¸­å¯èƒ½éœ€è¦å†æ¬¡è·å–é”</span>
            executeNestedOperation(lock, businessLogic);
            
            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
        } <span class="hljs-keyword">catch</span> (Exception e) {
            System.err.println(<span class="hljs-string">"å¯é‡å…¥é”æ“ä½œå¼‚å¸¸: "</span> + e.getMessage());
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        } <span class="hljs-keyword">finally</span> {
            <span class="hljs-comment">// é‡Šæ”¾æ‰€æœ‰å±‚çº§çš„é”</span>
            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; lockCount; i++) {
                <span class="hljs-keyword">if</span> (lock.isHeldByCurrentThread()) {
                    lock.unlock();
                }
            }
        }
    }
    
    <span class="hljs-comment">/**
     * åµŒå¥—æ“ä½œï¼Œå¯èƒ½éœ€è¦å†æ¬¡è·å–é”
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">executeNestedOperation</span><span class="hljs-params">(RLock lock, Runnable businessLogic)</span> {
        <span class="hljs-comment">// æ¨¡æ‹Ÿåœ¨ä¸šåŠ¡é€»è¾‘ä¸­éœ€è¦å†æ¬¡è·å–é”çš„æƒ…å†µ</span>
        <span class="hljs-keyword">if</span> (lock.isHeldByCurrentThread()) {
            <span class="hljs-comment">// åŒä¸€çº¿ç¨‹å¯ä»¥å†æ¬¡è·å–é”</span>
            lock.lock();
            <span class="hljs-keyword">try</span> {
                <span class="hljs-comment">// æ‰§è¡Œä¸šåŠ¡é€»è¾‘</span>
                businessLogic.run();
            } <span class="hljs-keyword">finally</span> {
                lock.unlock(); <span class="hljs-comment">// å¯¹åº”çš„è§£é”æ“ä½œ</span>
            }
        }
    }
}
</code></pre>
<h3 data-id="heading-29">2. æ­»é”é¢„é˜²ä¸è¶…æ—¶å¤„ç†</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.redisson.api.RLock;
<span class="hljs-keyword">import</span> org.redisson.api.RedissonClient;
<span class="hljs-keyword">import</span> java.util.concurrent.CompletableFuture;
<span class="hljs-keyword">import</span> java.util.concurrent.TimeUnit;

<span class="hljs-comment">/**
 * æ­»é”é¢„é˜²ä¸è¶…æ—¶å¤„ç†ç”Ÿäº§çº§ç¤ºä¾‹
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DeadlockPreventionExample</span> {
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> RedissonClient redissonClient;
    
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">DeadlockPreventionExample</span><span class="hljs-params">(RedissonClient redissonClient)</span> {
        <span class="hljs-built_in">this</span>.redissonClient = redissonClient;
    }
    
    <span class="hljs-comment">/**
     * ä½¿ç”¨å¸¦è¶…æ—¶çš„é”è·å–ï¼Œé˜²æ­¢æ­»é”
     * 
     * <span class="hljs-doctag">@param</span> lockKey é”çš„key
     * <span class="hljs-doctag">@param</span> businessLogic ä¸šåŠ¡é€»è¾‘
     * <span class="hljs-doctag">@return</span> æ“ä½œç»“æœ
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">preventDeadlockWithTimeout</span><span class="hljs-params">(String lockKey, Runnable businessLogic)</span> {
        <span class="hljs-type">RLock</span> <span class="hljs-variable">lock</span> <span class="hljs-operator">=</span> redissonClient.getLock(lockKey);
        
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// ä½¿ç”¨tryLockè®¾ç½®ç­‰å¾…æ—¶é—´å’Œé”æŒæœ‰æ—¶é—´ï¼Œé˜²æ­¢æ— é™ç­‰å¾…å’Œæ­»é”</span>
            <span class="hljs-type">boolean</span> <span class="hljs-variable">acquired</span> <span class="hljs-operator">=</span> lock.tryLock(<span class="hljs-number">10</span>, <span class="hljs-number">30</span>, TimeUnit.SECONDS);
            <span class="hljs-keyword">if</span> (acquired) {
                <span class="hljs-keyword">try</span> {
                    System.out.println(<span class="hljs-string">"è·å–é”æˆåŠŸ: "</span> + lockKey);
                    
                    <span class="hljs-comment">// æ‰§è¡Œä¸šåŠ¡é€»è¾‘</span>
                    businessLogic.run();
                    
                    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
                } <span class="hljs-keyword">finally</span> {
                    <span class="hljs-comment">// ç¡®ä¿é”è¢«é‡Šæ”¾</span>
                    <span class="hljs-keyword">if</span> (lock.isHeldByCurrentThread()) {
                        lock.unlock();
                        System.out.println(<span class="hljs-string">"é‡Šæ”¾é”: "</span> + lockKey);
                    }
                }
            } <span class="hljs-keyword">else</span> {
                System.out.println(<span class="hljs-string">"è·å–é”è¶…æ—¶: "</span> + lockKey);
                <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
            }
        } <span class="hljs-keyword">catch</span> (InterruptedException e) {
            Thread.currentThread().interrupt();
            System.err.println(<span class="hljs-string">"è·å–é”æ—¶è¢«ä¸­æ–­: "</span> + e.getMessage());
            
            <span class="hljs-comment">// æ¢å¤ä¸­æ–­çŠ¶æ€å¹¶ç¡®ä¿é”è¢«é‡Šæ”¾</span>
            <span class="hljs-keyword">if</span> (lock != <span class="hljs-literal">null</span> &amp;&amp; lock.isHeldByCurrentThread()) {
                <span class="hljs-keyword">try</span> {
                    lock.unlock();
                } <span class="hljs-keyword">catch</span> (Exception unlockException) {
                    System.err.println(<span class="hljs-string">"é‡Šæ”¾é”æ—¶å‘ç”Ÿå¼‚å¸¸: "</span> + unlockException.getMessage());
                }
            }
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        } <span class="hljs-keyword">catch</span> (Exception e) {
            System.err.println(<span class="hljs-string">"é”æ“ä½œå¼‚å¸¸: "</span> + e.getMessage());
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        }
    }
    
    <span class="hljs-comment">/**
     * å¼‚æ­¥é”æ“ä½œä¸è¶…æ—¶å¤„ç†
     * 
     * <span class="hljs-doctag">@param</span> lockKey é”çš„key
     * <span class="hljs-doctag">@param</span> businessLogic ä¸šåŠ¡é€»è¾‘
     * <span class="hljs-doctag">@param</span> timeoutSeconds è¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼‰
     * <span class="hljs-doctag">@return</span> CompletableFutureè¡¨ç¤ºæ“ä½œç»“æœ
     */</span>
    <span class="hljs-keyword">public</span> CompletableFuture&lt;Boolean&gt; <span class="hljs-title function_">asyncLockOperation</span><span class="hljs-params">(String lockKey, 
                                                         Runnable businessLogic, 
                                                         <span class="hljs-type">long</span> timeoutSeconds)</span> {
        <span class="hljs-keyword">return</span> CompletableFuture.supplyAsync(() -&gt; {
            <span class="hljs-type">RLock</span> <span class="hljs-variable">lock</span> <span class="hljs-operator">=</span> redissonClient.getLock(lockKey);
            
            <span class="hljs-keyword">try</span> {
                <span class="hljs-comment">// ä½¿ç”¨çœ‹é—¨ç‹—æœºåˆ¶ï¼Œè‡ªåŠ¨ç»­æœŸ</span>
                lock.lock(timeoutSeconds, TimeUnit.SECONDS);
                
                <span class="hljs-keyword">try</span> {
                    System.out.println(<span class="hljs-string">"å¼‚æ­¥æ“ä½œè·å–é”æˆåŠŸ: "</span> + lockKey);
                    businessLogic.run();
                    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
                } <span class="hljs-keyword">finally</span> {
                    <span class="hljs-keyword">if</span> (lock != <span class="hljs-literal">null</span> &amp;&amp; lock.isHeldByCurrentThread()) {
                        lock.unlock();
                        System.out.println(<span class="hljs-string">"å¼‚æ­¥æ“ä½œé‡Šæ”¾é”: "</span> + lockKey);
                    }
                }
            } <span class="hljs-keyword">catch</span> (Exception e) {
                System.err.println(<span class="hljs-string">"å¼‚æ­¥é”æ“ä½œå¼‚å¸¸: "</span> + e.getMessage());
                <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
            }
        });
    }
    
    <span class="hljs-comment">/**
     * å¤šé‡é”çš„å®‰å…¨æ“ä½œ
     * 
     * <span class="hljs-doctag">@param</span> lockKeys é”çš„keys
     * <span class="hljs-doctag">@param</span> businessLogic ä¸šåŠ¡é€»è¾‘
     * <span class="hljs-doctag">@return</span> æ“ä½œç»“æœ
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">multiLockOperation</span><span class="hljs-params">(String[] lockKeys, Runnable businessLogic)</span> {
        <span class="hljs-keyword">if</span> (lockKeys == <span class="hljs-literal">null</span> || lockKeys.length == <span class="hljs-number">0</span>) {
            System.out.println(<span class="hljs-string">"æ²¡æœ‰æä¾›é”keys"</span>);
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        }
        
        java.util.List&lt;RLock&gt; locks = <span class="hljs-keyword">new</span> <span class="hljs-title class_">java</span>.util.ArrayList&lt;&gt;();
        <span class="hljs-keyword">for</span> (String lockKey : lockKeys) {
            locks.add(redissonClient.getLock(lockKey));
        }
        
        <span class="hljs-type">RLock</span> <span class="hljs-variable">multiLock</span> <span class="hljs-operator">=</span> redissonClient.getMultiLock(locks.toArray(<span class="hljs-keyword">new</span> <span class="hljs-title class_">RLock</span>[<span class="hljs-number">0</span>]));
        
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// è·å–å¤šé‡é”ï¼Œè®¾ç½®ç­‰å¾…æ—¶é—´å’ŒæŒæœ‰æ—¶é—´</span>
            <span class="hljs-type">boolean</span> <span class="hljs-variable">acquired</span> <span class="hljs-operator">=</span> multiLock.tryLock(<span class="hljs-number">10</span>, <span class="hljs-number">30</span>, TimeUnit.SECONDS);
            <span class="hljs-keyword">if</span> (acquired) {
                <span class="hljs-keyword">try</span> {
                    System.out.println(<span class="hljs-string">"è·å–å¤šé‡é”æˆåŠŸ: "</span> + String.join(<span class="hljs-string">", "</span>, lockKeys));
                    businessLogic.run();
                    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
                } <span class="hljs-keyword">finally</span> {
                    <span class="hljs-comment">// é‡Šæ”¾å¤šé‡é”</span>
                    <span class="hljs-keyword">if</span> (multiLock.isHeldByCurrentThread()) {
                        multiLock.unlock();
                        System.out.println(<span class="hljs-string">"é‡Šæ”¾å¤šé‡é”: "</span> + String.join(<span class="hljs-string">", "</span>, lockKeys));
                    }
                }
            } <span class="hljs-keyword">else</span> {
                System.out.println(<span class="hljs-string">"è·å–å¤šé‡é”è¶…æ—¶: "</span> + String.join(<span class="hljs-string">", "</span>, lockKeys));
                <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
            }
        } <span class="hljs-keyword">catch</span> (InterruptedException e) {
            Thread.currentThread().interrupt();
            System.err.println(<span class="hljs-string">"è·å–å¤šé‡é”æ—¶è¢«ä¸­æ–­: "</span> + e.getMessage());
            
            <span class="hljs-keyword">if</span> (multiLock != <span class="hljs-literal">null</span> &amp;&amp; multiLock.isHeldByCurrentThread()) {
                <span class="hljs-keyword">try</span> {
                    multiLock.unlock();
                } <span class="hljs-keyword">catch</span> (Exception unlockException) {
                    System.err.println(<span class="hljs-string">"é‡Šæ”¾å¤šé‡é”æ—¶å‘ç”Ÿå¼‚å¸¸: "</span> + unlockException.getMessage());
                }
            }
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        } <span class="hljs-keyword">catch</span> (Exception e) {
            System.err.println(<span class="hljs-string">"å¤šé‡é”æ“ä½œå¼‚å¸¸: "</span> + e.getMessage());
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        }
    }
}
</code></pre>
<h3 data-id="heading-30">3. å®¢æˆ·ç«¯èµ„æºç®¡ç†</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.redisson.Redisson;
<span class="hljs-keyword">import</span> org.redisson.api.RedissonClient;
<span class="hljs-keyword">import</span> org.redisson.config.Config;
<span class="hljs-keyword">import</span> java.util.concurrent.ExecutorService;
<span class="hljs-keyword">import</span> java.util.concurrent.Executors;
<span class="hljs-keyword">import</span> java.util.concurrent.TimeUnit;

<span class="hljs-comment">/**
 * Redissonå®¢æˆ·ç«¯èµ„æºç®¡ç†ç”Ÿäº§çº§ç¤ºä¾‹
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ResourceManagerExample</span> {
    
    <span class="hljs-comment">/**
     * æ­£ç¡®çš„Redissonå®¢æˆ·ç«¯åˆ›å»ºå’Œå…³é—­
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RedissonClientManager</span> {
        <span class="hljs-keyword">private</span> RedissonClient redissonClient;
        <span class="hljs-keyword">private</span> ExecutorService executorService;
        
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">initialize</span><span class="hljs-params">()</span> {
            <span class="hljs-keyword">try</span> {
                <span class="hljs-type">Config</span> <span class="hljs-variable">config</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Config</span>();
                config.useSingleServer()
                      .setAddress(<span class="hljs-string">"redis://127.0.0.1:6379"</span>)
                      .setConnectionPoolSize(<span class="hljs-number">100</span>)
                      .setMinimumIdle(<span class="hljs-number">10</span>)
                      .setConnectTimeout(<span class="hljs-number">10000</span>)
                      .setTimeout(<span class="hljs-number">3000</span>);
                
                config.setNettyThreads(<span class="hljs-number">32</span>);
                
                <span class="hljs-comment">// åˆ›å»ºRedissonå®¢æˆ·ç«¯</span>
                <span class="hljs-built_in">this</span>.redissonClient = Redisson.create(config);
                <span class="hljs-built_in">this</span>.executorService = Executors.newCachedThreadPool();
                
                System.out.println(<span class="hljs-string">"Redissonå®¢æˆ·ç«¯å·²åˆå§‹åŒ–"</span>);
            } <span class="hljs-keyword">catch</span> (Exception e) {
                System.err.println(<span class="hljs-string">"åˆå§‹åŒ–Redissonå®¢æˆ·ç«¯å¤±è´¥: "</span> + e.getMessage());
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">"Redissonå®¢æˆ·ç«¯åˆå§‹åŒ–å¤±è´¥"</span>, e);
            }
        }
        
        <span class="hljs-keyword">public</span> RedissonClient <span class="hljs-title function_">getRedissonClient</span><span class="hljs-params">()</span> {
            <span class="hljs-keyword">if</span> (redissonClient == <span class="hljs-literal">null</span> || redissonClient.isShutdown()) {
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalStateException</span>(<span class="hljs-string">"Redissonå®¢æˆ·ç«¯æœªåˆå§‹åŒ–æˆ–å·²å…³é—­"</span>);
            }
            <span class="hljs-keyword">return</span> redissonClient;
        }
        
        <span class="hljs-comment">/**
         * å®‰å…¨å…³é—­Redissonå®¢æˆ·ç«¯
         */</span>
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">shutdown</span><span class="hljs-params">()</span> {
            <span class="hljs-comment">// é¦–å…ˆå…³é—­çº¿ç¨‹æ± </span>
            <span class="hljs-keyword">if</span> (executorService != <span class="hljs-literal">null</span> &amp;&amp; !executorService.isShutdown()) {
                executorService.shutdown();
                <span class="hljs-keyword">try</span> {
                    <span class="hljs-keyword">if</span> (!executorService.awaitTermination(<span class="hljs-number">5</span>, TimeUnit.SECONDS)) {
                        executorService.shutdownNow();
                        <span class="hljs-keyword">if</span> (!executorService.awaitTermination(<span class="hljs-number">5</span>, TimeUnit.SECONDS)) {
                            System.err.println(<span class="hljs-string">"çº¿ç¨‹æ± æœªèƒ½æ­£å¸¸å…³é—­"</span>);
                        }
                    }
                } <span class="hljs-keyword">catch</span> (InterruptedException e) {
                    executorService.shutdownNow();
                    Thread.currentThread().interrupt();
                }
            }
            
            <span class="hljs-comment">// ç„¶åå…³é—­Redissonå®¢æˆ·ç«¯</span>
            <span class="hljs-keyword">if</span> (redissonClient != <span class="hljs-literal">null</span> &amp;&amp; !redissonClient.isShutdown()) {
                <span class="hljs-keyword">try</span> {
                    <span class="hljs-comment">// ä¼˜é›…å…³é—­ï¼Œç­‰å¾…æ‰€æœ‰æ“ä½œå®Œæˆ</span>
                    redissonClient.shutdown(<span class="hljs-number">2</span>, <span class="hljs-number">5</span>, TimeUnit.SECONDS);
                    System.out.println(<span class="hljs-string">"Redissonå®¢æˆ·ç«¯å·²å…³é—­"</span>);
                } <span class="hljs-keyword">catch</span> (Exception e) {
                    System.err.println(<span class="hljs-string">"å…³é—­Redissonå®¢æˆ·ç«¯æ—¶å‘ç”Ÿå¼‚å¸¸: "</span> + e.getMessage());
                }
            }
        }
    }
    
    <span class="hljs-comment">/**
     * ä½¿ç”¨ç¤ºä¾‹
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-type">RedissonClientManager</span> <span class="hljs-variable">manager</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RedissonClientManager</span>();
        
        <span class="hljs-keyword">try</span> {
            manager.initialize();
            
            <span class="hljs-comment">// ä½¿ç”¨Redissonå®¢æˆ·ç«¯</span>
            <span class="hljs-type">RedissonClient</span> <span class="hljs-variable">redisson</span> <span class="hljs-operator">=</span> manager.getRedissonClient();
            System.out.println(<span class="hljs-string">"Redissonå®¢æˆ·ç«¯çŠ¶æ€: "</span> + (redisson.isShutdown() ? <span class="hljs-string">"å·²å…³é—­"</span> : <span class="hljs-string">"è¿è¡Œä¸­"</span>));
            
            <span class="hljs-comment">// æ‰§è¡Œä¸šåŠ¡æ“ä½œ...</span>
            
        } <span class="hljs-keyword">finally</span> {
            <span class="hljs-comment">// ç¡®ä¿åœ¨åº”ç”¨ç»“æŸæ—¶å…³é—­å®¢æˆ·ç«¯</span>
            manager.shutdown();
        }
    }
}
</code></pre>
<p>Redissonå°±åƒåˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„"ç‘å£«å†›åˆ€"ï¼Œæ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§ä¸”æ˜“äºä½¿ç”¨çš„Redis Javaå®¢æˆ·ç«¯ï¼å®ƒç‰¹åˆ«é€‚åˆåœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­è§£å†³å¹¶å‘æ§åˆ¶ã€æ•°æ®å…±äº«ç­‰å¤æ‚é—®é¢˜ã€‚é€šè¿‡åˆç†ä½¿ç”¨å…¶æä¾›çš„å„ç§åˆ†å¸ƒå¼å¯¹è±¡å’ŒåŠŸèƒ½ï¼Œå¹¶éµå¾ªç”Ÿäº§çº§æœ€ä½³å®è·µï¼Œå°±åƒæœ‰äº†"åˆ†å¸ƒå¼å¼€å‘çš„è¶…çº§åŠ©æ‰‹"ï¼Œå¯ä»¥å¤§å¤§ç®€åŒ–åˆ†å¸ƒå¼åº”ç”¨çš„å¼€å‘ï¼ŒåŒæ—¶ç¡®ä¿ç³»ç»Ÿçš„ç¨³å®šæ€§å’Œå¯é æ€§ã€‚è®©æˆ‘ä»¬ä¸€èµ·ç”¨Redissonæ‰“é€ æ›´ç¨³å®šã€æ›´é«˜æ•ˆçš„åˆ†å¸ƒå¼ç³»ç»Ÿå§ï¼ ğŸ‰</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Anaconda]]></title>    <link>https://juejin.cn/post/7588095884070076416</link>    <guid>https://juejin.cn/post/7588095884070076416</guid>    <pubDate>2025-12-27T15:46:59.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588095884070076416" data-draft-id="7588092534162014208" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Anaconda"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-27T15:46:59.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è¾œæœˆå"/> <meta itemprop="url" content="https://juejin.cn/user/2872336891512350"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Anaconda
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2872336891512350/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è¾œæœˆå
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-27T15:46:59.000Z" title="Sat Dec 27 2025 15:46:59 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    8
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#2b2b2b;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(159,219,252,.15) 3%,transparent 0),linear-gradient(1turn,rgba(159,219,252,.15) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin-top:35px;margin-bottom:10px;color:#4dd0e1}.markdown-body h1{font-size:30px;text-align:center;position:relative;width:max-content;margin:0 auto}.markdown-body h1:before{position:absolute;content:"";z-index:-1;top:-20px;height:100%;width:100px;left:0;right:0;margin:0 auto;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADsAAAA6CAYAAAAOeSEWAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAABkLSURBVGhDtZoHnJ1llcbP3Om9ZiYzmfSQhCQQIbRQVQKI9CYC68qKriJK0UXcZRcINqStIoiIqKCi1NACQihBWiCkkJ5MJlMyvd7p7d759v989/sy34yTbIj48Atz71ff855znvOc971xDrB/EtoGI7a9Z8Aq+wZML0mNj7dE95NZ1OKsj1dHo1GbnJpss9OTbWJyonvun4VP1Njuoagtb+m0it4By0iIt8LEeMvkr8XFWcfgkA1gYDLf47i2PzpsyU7UspKSLDoctagTZ7Vc08MzClMS7awJ2ZaflBB78CeET8TYla1dtrKt2w5KS7YCDGzEoz2RqKUmhGw6x2bhuXyOp2BoRXef1Q1E7Lj8TIsMD1sbxu1kcnYSAX1810RMTUmyMB7f2j1gC7NS7byinNiL/kH8Q8a+2NRh77b32El56VaPAe0YeGR2mh2bm+FdMRqP1rbZe+3dFsHT35qcb/Oz0rwzo7Gxs9feYPLS4kM2h8lawee5hPmlJXneFQeGAzJ2F564v7rFzi7Msu3d/Xgjzq5g8ArX8VCNN2vJ28daey0zZJabmGCLslP5HOf+Oygr3UzDGOf+JxrauXfQjslJt+dbuuyMgiwmk+sPAB/b2Lt2NdoMZnuY21qHIvbvUyZ4Z0ZQiXGrWjvsmPxsK4R0nmHA8ZCTQvxVQn5eRipklIBtcVbV1WtHYsjati47ZWKuTUpP9Z4yGk/xDBGe3v1mW4/dOrvYO7P/2G9jRSjf31FnXyaUXiB8r51WaJkM3kcfOSa2FR6qarIenooTLQHPLcC4mYThyw1tVpKWYlVERlZ8nC3Oz3Jzdn1nn5uvQ8OOHYvhR/CvsqffJbkCkZTvcYZ6Z0WTfTovw5Y1dtjXp+TbFPhgf7FfxpYxuMfr2uwo8rEtMmwXF+d6Z8wGmIR2PLyjo8cqOFffP2SLGexJEJCP9R29thkPXlpa4A5Y3w/jmuVNYYwO2QkY7WMtz3mVcE1hkualJdmSolzX8GnpKd4VZq80d1o7zN0RdWxGaqItgbn3B/+vsasgh/UMNBOvzYMZDxtDKp289KGaVguFQvb1yQWWwuB97GaSXqUUnVaYbSUwrDCEBz/C2CM8EhNrP13fbkeSh3OJgCAe2N1CWXKsGOc6TOr5U4q8MwYhDtkTda02MyPN+nnGBQEH7A37NHYz5KOZVv08qyjbSseEzKauPnsMj98wc6Ibcj5UUv7M8QWZTE52jEwGOVaD8U1Dw1YNWX0qM8VKyb80L/TrOPYOzH4KBJQTrK8M7+7KZjuM63sHBt17FubGoibCuf+tarWFGUmuwWeT8/vCXo1tZOYeZcazCaez8MwEzzM+HqhqtiJI5twxL1jeGLYk7jmKMF1JOCbg6Qj5nAdRqX7q3BYm8VAmQvW1lfcMc58IT95uIA3q+gftrDHPXUXJWkVEHJme5Bp5UmHsvIZ/O3l8ECE/FWcsItX2hr0ae8O2Wjs+J43QTbOZzGYQ/7Wtxq6eXjRK3r0By4YJ6Ty8EiYSJqcm2eGeV4Pox/ANENJR49RiEdfqcLflUJrEBZqgxYHrBjn2ExFURqKdVETN9YirJxKxR2rbrYeQv5ISmB6IsiDGNfZGWPeMgkzr58xnPaJ5p6XDZPKz4T77wayJ7jGhhXLwanOHTWBgq5n5q6YUwNJ7l3kKcRl7OJ7fF56l1GzvHbSD8dghTPi0wIRfv6XafjJ3ssv0PnZQ7nZx/etwzO1zJ3lHR2OETTw8x0tOx1AN3De0D7YV+63oGthjaJQ5Ur7eVVZjcdGInUyuaT73ZWg3efV8fZs7cc2E777Qi5eunVbghvPPymrt/krKGfcLd8ybYjdxrK6333Z09rjHZkNuLYzz0uIc+xWCZzz8nbHbe4dsY1e/XUOY+nimvtUaSazv4jXhaQasSbmYmpuenGwHZ8TKggSEQm08rMD7ahBOoExcMqXQegjnZ+CEvaEa1ZQUQkt39dj0zDS7krq+ARmpdws/nlNqD9WFbWN7l5u3wr9MyrcXKUsqWy3jTOaoML4DdaQ83YIoT4VYpEXvYQZLmbX5SLohBrgOj186Kc/iKTUPUhq+Rrm5ekOl3TWv1Mr6hqwbY0VOQXwEo+Moq4Z47q5qsU489G944LyJOW4LOLZOKtT/iI6+nGe/0dhuEd4ltj2NmiuCU4hnk5fHIi7+RK4uTEu0e+s7rAiRcw1CYy3OejvcYz+eXeI9MYY9nu3lYZl0KavJJ7Vjibzgjp319rUZE20j7CkJqFr5JQYgQ39f3eQaKpQk0afy8nl4uBzvjUUTRk7k3iebOm0pabDiyFn2XGu3dRME41CGVeBVqSiVnc6hIUpekp1VjHLDSOEcQlui5W/U8C7IKREjv1Gabw3wRwUTvpv7jybPtzHmIPZ49q6KRjuccqBQVCOtGvqXhrCFUUXJzOYSHt7Kw5Ix9H08dSje1o1JyL73IYXpEMmE5CRbw6wuykx2pR+Pd6/J4JpLiJKV6N9OnrcQNfQ0Zem6qQX2MmFXyWTE+DMO0kGx4e08DEjnXbsYuOq7niHB8jdY/wQ8Srm2XCZZUrOakF1CY5EKX0h93Tu/1J4kRdbDMT8MamgZK9xe3uDcvrPe++Y4f61rcZr7B53rN1c5N2ytcV5rCrvHt3T2Og19g+5nH7dvq3bqunr4NOwgK2MHA1jeEDuG7HNuLmtw7qpocl5t6nCPvdTQ7v4N4u3WTqeyu9cZHIo4f6lqdFoHh7wzMbzDeeGv3Hvzjlrnh2W1zofhHuftxpFn3VFe7zxS0+p0DlKVPbhhvBxhvwiFMgfP+mjHA08gEC4pybeLyK1iZldh8zC5VJQyUl8l59KZ0WJk2xaiYWxNrkXXJhA8r3PvZRur7ZZZRfadaRPsfiTmX9HGajC2tXd6V8dQTMhX0h8rNdJx9Ra8F8SbRNLzhPRnJmTZIUTYueTyWxyr7uv3rjC3OkzE8495oS+4xq6D5WoI0bO5WVCOSerl8rIeBrOI/Hkaw6ME5W1zSuzx2la3CRdWi3zIG+FDBvUp9LMgI/vggUmE7KkT81yGvOOgEYa/aUahhRAF5xLec3OzbF1r2O17BbVxIi7hzJIC64IYhXdJA+nh/5xVbOmE9J0QqjSxWk0pp37M2YEtgjS8GpimACu7xkqxdKJ6fEXyYl2Lre0ZtC8yELVewtWUnbfCPIhrvgDFz8WI5yhJKgcnFMZWEFrwhgzo5uWDDDA1oGSOzcu0xfx7vTlsv6posIMpJ6cGWPiw/BxL4PU7vbrpjgf8bMdu5OYwOdhm83DARUSa0ELknYIeEAaILuWxlhGa0M8+EuJCrpJT+ymENhN60pXBxa3LZ5TsucnlGaCmIEQ4Evru91yuz0xMtKaeXluI5zdh9Mm8vAlBn4aR07X64EH3vEKdXQkZJXPP/JxMvNRpLxEtHZ5RQgmNewnpouvVTpYTHdfOnmy5kFUGnpRTfEhXD9DiBdFFJB0/YWS9aj6pmc89r0BaQmgTRkgI+EsdKsYasJZOBF+QqTH474NK7LbyBvf7W+RgOxNyxfQY2/2hrp2+NkroxrzrQ55fSZkpJIa28znCgF6rb7H1hOSslATyvNflAh9pvHcX3lVE/Ya8FjTJIexa2Rq77nfU96unTnD7aME3+TAm6BFKYrPnqCNIqV5sq0ZGCiEV+Db+qWMQqpFgb5KPx48R6omeDl2EuP9DTYt9iGA/f1KBS1w/La+H4ktsSmLItvZHXLUkrCeflVtJ9DVVg1H7+sxiGvVM975rZpfabuqHVhuP5F1vewav5O8GamUe91yDanoYw47FWzC929O+DJnKA2opFY1Rjru5CE7kOcO0jJtQVUIynzuZEMeb+1CEOFXN8iFSGeRpCm1BTlJxVg49Azm819SO7Bu0axEbwn27GuxMck+TMQHDP8fn48gfDVIL4R8xKVPJ73MQBUIfA/Z54LMw5vmlE+w+VFo2A78X/SsyPA/RMD0z3e2qVLtfo7aeBslpMX0N0TEnLcUlKym1jyBFqSohmYntI5enBhYB9CY/2kNarhwJhNiMtRGyWnkQdKaCFyQwgydjyNUw4VchKxXv2/DoKdC+lkQbCX1NlKCGvJiBJkSGbCus6jfo4yGBNySgr+u7e20BCsxdVAcFlJ/tHd32+cIsNxSXUULUUx+dg/d47g7OPYFw2MxkSuyMwLHVTI6PBN6dS8Sppw45zHJSgDXV3aQzmz40Z6fDgBfiAXU0uZxby2zejee+j3eltoQMzhV6qSBogXwrEXDj7ElWxUQ8RrnSaoU0dxIsKaiMvMykXTu90NqJsGHP4z78SdLigUrLKat32nFwy/E07pfDFRdQ/7N5r57pQ1482uvWhMGhQcviGkVrKDUp0ToCxfhQal5n4Hs/g1jOgH4LWdwFOd1b1WzHET4vLZppv+Czjxo840OrDlG8jAJzv2tp5mLK1dsU/lfIOeWy5NxFxfl2BoYImlQtx9QF6mJRQKBsQYYuO2yaLYPBUXvu/VqYPxtHhNy7Y4hCkNLGPtKSklzCVKSHtMQxcqm5Kw1DhI2PTGZtcGDAvoLQ/u7MifYtWFBlxz2H9zo8RkwKzC5UYiG+p44ccqE62YAxLeT/TOpf8MXx8Qk0IJFRY1Go+viQVJpE5Ehjf49xfAZeqGIy/7us3nqxwQfCkjZypPxobVr/6YpQHIalUvuCyEwbSXC9PC8QnkFcXlrgLpoLIhIfKuaqlQkYIAwQnr/f3eyu7KttOw2lNpv8/BPHyjzVNER3o72gvEBKqRMTflndbP8BMweRDyeciEj5bFayFXqTLzheivgYJC0jwzwHa0MDDEotm48ndze5BBBElAnxxcRYHAFh3FfZaA9UNRmC354kNwUx8eHkmVj5dcTE5ZMnuEyr1QqlhtaJLuOYZv4v3KNo0TKrGPUZ1NILPKuWcvVn5Trv10SMB6h0j/ARMnlOuafCBIfnSWEx/Raif3HDzofYMM31dOyY9LBaLK3TjoX2fEqT4+2qaUVWSTQvyM6wC8nNJyEetXIyuLKrx04P7MKNnbJZlKUtNAIHo7i2dA/YU3Vtdi5l6jCepXy8hOedSSSsI8/HQg5Q+gxTKXwkMHkbESo+hjG0lbRRzQ3Fc5LOzDuFhs3Ptumpie7ilRDhlEJOq/hjsZljCxjkt7fWuPS/EekpXMggJQIk0G+eN9Xu2VmHWIkJe0nJRN4ptBBit2yutG9ML7J1DHAxebiAMrZ4VZlduqGS8I2tJc2iborUxmIN79c+kTovFxivPvrcSaP3n7RSKYTUmKt4N3rMOcw4JOneD3sP956jNaMglIeTER5Xbdlt15Tm2W10NEsYrA/N5JLCHHsR9tSqwxq08G3bqm1ZTbOtagnbo6SLvH/VzBL7W7jPzqFea0LmMLFzUuLtdwumuO3i1Vtq7OK15Xgw3l1PDmIXak+6QBEkvB9YJIzBcc/L20JIYaSZ/qAzVm5Ut4oowk3QehC+N3xo/1wTqt7zsYawfX9no9XjqdPXVLhrwyo/wucJYQkE1e4j8rLcBuHUItQQKqgMXb6LGvxFQlXw33AdZLR0V5P9Fr29lP73scNnosoyvdWPv4fPJ+uJrLVtMakqaL1M1cTvv0OLIZE6wk2a2IcIRUQh+DaejpdcXepBa7bKDRGM9PIVxTl2EwarZ72rooVuY4RQtMypdk6e1lLLehhY2lt7QEd7WxlCDvdIli6E9B4+ZIodmZEMccUGqgiZOqru9tkR3iJ8nCcXRWRZCSPMLPEjlx2LjQL1OM5qKAm+vhSuRqSfV5Ttrg8FdWcrnhMqCTex7DEM6qTsVEuM1+8hovaHQ6e6a1Fz0xLd3nUt4ToWWuzWNkhcoAIIjUx2ZpxjLzWF9+SYmngR1lok4TEoJxGfuijhI/7OICoFmadl2llcL9b1oRVJtbD+JLlv1KrhHG5811t9ELbzgk14ICUwqE+TDzftqHPz98vUSy3jSIwP8dCpkNqLDPTx+rArz4T5qLG3G2PrvJKKPoLBWE501NC3ilUX5mVjVIb9nIbgWcpPMiSXjbcL8K62UkR86m1/yfkSeMaHFuK04X0CE3J6SWzFUxw0BSNHlSzi3RmIRJwHq5udO3c16quLp6sbnffbupxbt+12vzOrzuvNHc7ycRbIxuJHgYU7YSASdQgxp7qz2ynv6HJeqW91doa7nLruXof+17sqhhu31Xif9o7HalqczV29Dnrb/f5EXZvzdH27U98/6LR5i3N0UM5zjHU71/lwjRWWltU5CAIn7F1MqLp/r9hQ5RoaxG+qmrxP4yNKcfsFLwuiprffeb2l03m2scO5h3Or2rudzjGrhk8x4Cqu2xcexilBvNEcdi5Yu4tKF3Ue4tzPy+td5/1md4tzw5iJ27NuXEYobYUdlb8z6GTWkdxaCvk2zHjd5mpKQ459mv5TkAp6mQb9Aq9HHQ8S6mrZnuc6vUG6WHusIhCJGNXl9byvnJyaiE7+Eoz8c5TYNQiUveENGpJpcIJ+biS8R0+rlcazGNs7pKB+zPLTOSX2KNWhlDAf4r2Spj72JORB5OyHULX+dlD/FOky/HFy5ygYU0sey/i8moeqdunXK1qC3RuaMOYHlI/raQMl3M+EeTV5WxD3Km8a8PkM8nr648sQ9+esKbf5e/nxiKBfAOQkxbv3SU9LYmqPV9V/Pn+V20VwTyVjTqCI6edEQUOFUXs9WmfSll8DyX2dt7GlnwkswaM3l9XZ0oNK3MTXbxpOV2sGk69s6XCJw4cY8KbyRrt9TrHt7Bm0rRBQe1+fHUWNfaapU0KbqxzbORC1M/LS3dJwIl3KOrwykQG/E+61q+isgniztdOKqNOziDgZqZIzFwPvqGiyg5NCtoCqoG5NxHhPZTOsnORulKskjoKMDeLuXQ3OmnC3syxARFXdfc57LR3OrdtrvSOOs55rnqhtcdoGhpxHdjc5EfJUuHZTlftX+G15rXPlhkrnLe59F7Lz8VGHdg8c5y2OLeMZ126qduq9XC3v7nd+FchLvYPJd15gPCu8XQnh/qpm59WGVudZzvvQO97kXTcGxhnEuJvR39tWY8cwK4uhcikk4a3Gdstg9l5B2t0wfaTdWkEou5vCPOV5PH73vFL3+DfXltnh6OxjkJD6Wd5F3g88tMe6CW/7YmI99VIL4u0oqUK8ocW4d8hFrXMVoOQU8s3U97MnjvDD/XRYkyhHM1MT3GVZQR2Tdv70U8EbA5vlo+CaPAaaSWoZXm50otGodxQ6L6txGKxzw5ZYORrBsPPrykZKQIy1n8bTjwb2fO4Te3ue7x6KOKvaYns1wtIddd4nx3mwot55qyl2360cp81zurg+CGqwU8v4/Of5uAVvPgObrwvHomY8jOtZ4fXWLnefdHVXv9044+8ZklCx75DXwcV1Sb27y+vInUQEuVYSaMgRJYfAwtoj0raFxIUW1A8nz35f02qLc9Lc9lG7CBkwtUR7bf+A+5uL6ehnH9Lat+5sIEfj3Cbj3NKRvP7Rjlo7FSmqavKvpSP8MRZ7NVbQYLSkqlC9ZW4sPH18gBTcORjrhMWmQWzFmK2UsvO90qQ1oZcI8UhkCLZPtRqMy0NirobAvjIpb4/sW06qKGyPR2oGIdlazjOOTk+kLYzaaYGSp63Wz6HsXsQ51wd+LTAuZOy+8GBNq7tF+IOdDU4kENJthNID5YRafZtzZ3mDs9LbRgzixcZ2l1h83OKFbDmEd0/FiFp7DWHgp0AQGzq6nf8hPF+oa3EehOz0ziCWcm4NpBRMhX1hn571oR9wqVVSDVPtUi32sQ0vbu7scZdY9aOt2ZSEL9BEBIW+dv20AKDd9/ep09oimYqHpyImkKDuRllS4PrlHNuIqDmCJmNJQba7q1joEaUQJuR/WdXsLrJrq/L6cdJsPOyXscJ7GLKqo8cOpqhrO//yQG6oS3kZwS9xPkRB3wi7diFMtDN+PLk5m1ath+8f0Fy80dbjhvVXub+U5mEqeal27UP+dWpPlknNxW79Ak6/7Tg3UMOF52j1xA1qK7Trd6nXC+8P9ttYQcumIonLSnJtBdJNa77axw1C2x3qR4Wqnj73x9f6MbV+CCYFBZO6y51aSh3gzVrsmwzJnULEbCJC1oZ7vIZ/9Iqmfvn2u5oWO5n8fApxcuWUApum5diPgY9lrA9EtvUNOzYf8vqAcJPsU5iOh7XtXQgt2uZhjKU2amF7HQyfEYWcZk5yQ1RDKNrLcq02k/9IGmldrB93KiokPw8EB2SsoKWXO5FmxXhlckqi+3vEUvLqwok5PHVkIWAszlqzy1p54zuLpnPZ3q9bod08JlLSb5DrNxDm38Sbvsg5EBywsT7oH+3XNW3uasGirFSrxRNdCllKiPZHZzJYLZb5qEcpae3pxMCuu9oibS5/QCOiLcYUrp+MmtJeURjFdVlxzqiae6D4h40NQt54HyGv3JRo10aVfv8YhtC0pSlVKcPFuxIXahr08mzCO4VzMlLSsZuomZ+RaucU0rXsw/sfF5+osUFonWob/7TrLdaUgdpV93fl9X+VIC0Y6tek2uI8OD3J5gT2Vj9ZmP0f4IM4iY7RQ5gAAAAASUVORK5CYII=) no-repeat 50%;background-size:64px 64px;opacity:.84}.markdown-body h1:after{position:absolute;content:"";width:150%;left:-25%;height:50%;bottom:12px;border-radius:50%;background:linear-gradient(transparent 80%,rgba(77,208,225,.8));background-size:400% 200%;opacity:.6;animation:h1Animate 6s linear infinite}@keyframes h1Animate{0%{background-position:100% 100%}50%{background-position:100% 50%}to{background-position:100% 100%}}.markdown-body h2{display:block;border-bottom:4px solid #4dd0e1;position:relative;font-size:24px;padding:12px 32px;margin:30px 0}.markdown-body h2:before{width:24px;height:24px;left:0;top:0;margin:auto;background-size:24px 24px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAADGklEQVRYR81X32vTYBQ999s6mFjQgQ+DrbHiVFZYU4cDcQ/6pGhTFVYFEXGi82H+Bz448UnEF1Fx9ccEEcXpZE3d5tP2ooKiTacTHaLNpigMHDgnU9tcSbrWrkwWR0sbyEOSe885ObnfvV8IRT6oyPwoLQHBx+OVM5WJvSyEVAhnBOjt7yU/+/rr6r6l8TMO+F/EN0JQhICqQpD/xaRpcpAc9tS+M+9lBCia/oqBamK+zeDuQogQZaKJk3wcQjxSva7tGQGB2Ke1zIk3DNyMyNL+QpCnMQOaPsDAVuGAp9cjvbYc8Ec/bCYSg0zoiHilk1tHxqsqEsYlML4kjIpT/eurJxRNPweQU5VdrWaOEo1fgKAVbBgXIz73kF3R/ph+ghgdzMYWM29eAWlBJqgZaFlFYtC6nhWpaDqnSGlIlV1WjJ3DloDNgyNLncudqgX//Ucg3LxuStHGuhi8pqKCW3rqV342rwFjRznKm+/LNaN2yC237ThgF2wxcfMLeP6+ncrKzoPoKTGeLQbYbg4TNoC5iZPJY5HGVRdSNZAWYBclD3FzBQzrR8hACAKdzBzKA/4/IYioDQaOskBbpEG6PO8qKKSAEi3CnEb0Pw4oMf0OmKbTDWqh3Lw6EIiNBZi5lxh3wz4puBD5ovqAMvxhHSdFKxE1CQe3m/07TeTX4lcJdAhE+1Sv65Z5P/ByvIGTRowIZ9igbtXnmrOsbTvgj+kHBNMuBu9OdVw8EeU4nC1A0cYmAHZOTRrLhra4Z8ywnSN6vZHAFTA2WnnMfQB3qz73ddsOZM8CACFDIPSgQXqebXEgqgeZcAeEe6pXasm1f8ew3igMtAHWac0Uc/jYdyAaP0xEBwFsmgUPqbJ0NE2UKj4EGcahiOzuyhagaHpnmtgcVgTcCMuua7YdyAHbA3ArQNscVFbb4635aD6fnYaTvxxi9UNP7ddMXaRWVBdAcaLk6bDXPZCNZ9uBXEsDUX1T2Cc9yjig6Z0EHg3LK8/aqf6MwJKchkXfks1+0+JtSq3qLPa23BRR1B+T/6nkfMaW1r9hPt/MLtYfTLEpP+T9FNoAAAAASUVORK5CYII=)}.markdown-body h2:after,.markdown-body h2:before{content:"";display:block;position:absolute;bottom:0}.markdown-body h2:after{right:0;width:400px;height:10px;border-top-right-radius:24px;background:linear-gradient(90deg,#fff,#4dd0e1);max-width:50vw}.markdown-body h3{margin:30px 0;font-size:18px;position:relative;padding:4px 32px;width:max-content}.markdown-body h3:before{border-bottom:2px solid #4dd0e1;width:100%;content:"";display:block;height:28px;position:absolute;left:0;top:0;bottom:-2px;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);background-repeat:no-repeat;animation:h3AnimationBefore 2s infinite alternate}@keyframes h3AnimationBefore{0%{width:28px}25%{width:100%}50%{width:100%}to{width:100%}}.markdown-body h3:after{content:"";display:block;width:28px;height:28px;position:absolute;border:2px solid #4dd0e1;border-radius:50%;right:-15px;top:0;bottom:0;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);animation:h3AnimationAfter 2s infinite alternate}@keyframes h3AnimationAfter{0%{transform:rotate(0)}10%{transform:rotate(0)}50%{transform:rotate(-1turn)}to{transform:rotate(-1turn)}}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin:22px 0;letter-spacing:2px;font-size:14px;word-spacing:2px}.markdown-body img{max-width:80%;border-radius:6px;display:block;margin:20px auto!important;object-fit:contain;box-shadow:0 0 16px hsla(0,0%,43.1%,.45)}.markdown-body figcaption{display:block;font-size:13px;color:#2b2b2b}.markdown-body figcaption:before{content:"";background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAAGFBMVEVHcExAuPtAuPpAuPtAuPpAuPtAvPxAuPokzOX5AAAAB3RSTlMAkDLqNegkoiUM7wAAAGBJREFUKM9jYBhcgMkBTUDVBE1BeDGqEtXychNUBeXlKEqACsrLQxB8lnCQQClCiWt5OYoSiAIkJVAF5eVBqAqAShTAAs7l5ShKWMwRAmAlSArASpAVgJUkCqIAscESHwCVVjMBK9JnbQAAAABJRU5ErkJggg==);display:inline-block;width:18px;height:18px;background-size:18px;background-repeat:no-repeat;background-position:50%;margin-right:5px;margin-bottom:-5px}.markdown-body hr{border:none;border-top:1px solid #4dd0e1;margin-top:32px;margin-bottom:32px}.markdown-body del{color:#4dd0e1}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:rgba(77,208,225,.08);color:#26c6da;padding:.195em .4em}.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace;overflow:auto;position:relative;line-height:1.75;box-shadow:0 0 8px hsla(0,0%,43.1%,.45);border-radius:4px;margin:16px}.markdown-body pre:before{content:"";display:block;height:30px;width:100%;margin-bottom:-7px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAdCAYAAABcz8ldAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAhgSURBVGhD7Zp7bBTHHcdn33t7vvOdzy+ITVKDU0xIKG2ABCPTRCCaUiEVKWoqRJuASAhCitRCVKSoalFUKZBiSmmFRRJKRUnUtIpo+aNqGgwoOCmuFUIRzxjwE4zte+97drYzztji8HPvtkit/PnH+n1397Tz+83vN/PbMZhmmmmm+d+BoX8n5diihcGqgFQf5vk6BMAskWUlw3GyFnIvtqWSf91w7mKC3npfOLX7wYeiIa6BBWCOLLFRF2NB0JvIOP/80YG+k2ev6S699b/OzOfKBW5l5KsgyC4DCFQDnpEAdE1goc/dlNPc/Up7P711UiYNSMuyxeUzZPnHgGHWh5XADEkSAcdiN+AnEXIBhBComgFU0/xQR+jnj51sOUMf9Z0NKyL8S9+JPBEN8zuCMrsqGOA5QWAAyzLAxe53HBeYFgJp1c5Cx33nyIfpV3e+22/Sx32nev/sMCgVnmM4bjOniAtZWQAsz315EfsGQQc4hgWcjHkCmOj1rheuNn95cXwmDMiVp5etC/D8m5FwUWVQUYYGPh6mZYFUOgsGVa1pXvOZzVT2jRuH54RM230jEuI3RcIiL4l4UkxAJmuD/riVsqD7ct2m9nep7BtVTbVfZ0uE/UIk+CQflAHDjf8+Lg6MldYATGpH3c/Ul7p3dWXppVGM6eElJSHmnQWPbSlRlN1lJcUBjqNRnwJZVQO3B5P/uq5rK1d90pakckFcaKp5UJHY92JR8YlwkUDVySEZfGfQdO7E7Z8s2HL9TSoXTPXRud9nA8IBqSwcZgWeqpPj6BYw7yTbXBN9q2v9lQEq5zBmWA8vWLCptCi4tzwW8RQMQlFQATPLSh6vCSh/plJBkMyQBHZfWYnkKRgEktEVpTJXERN2Xzo4ex2VC6K6qXYpF5b3ypVRT8EgcAERSJXRbwCBOTFzXblM5RxGBaRt+ZPYA+LO0mgxz5K1Ig+UgAzKIuGnz39z6S+olDeaibaXRsU1RUFvgx+GwTWgPCaDgMw2XXpr9gwq50XV0bkxJiYeEiNF5cwE5XsiOEkAUkXkUW51SSOVchjl8WKef604XFSRbzCGCYeCoESStv/p8QU1VPIM3knNDynctnBRfsEYhgSlNCIGgQv2UCkvGIHZgteMh1nBW9W4F16RAM6yDVV7amZTaYQcr59cuuhhWRTWBvAMLxQGeyFSHOLnh0MvUskz5RF+fbRYDEy0mZgqQYUHOLhr//b6rGoqeaLqQG0pw3PrBbyA+4EQUkRmhvgqNUfICUipKK4OKUqIJVPKB0jpEhjmWWp64jdbKmVZZNYogcJm493gsifOqhDyeh9GYR/FM7sW+DA5CKR0MSK3tvKZkpwB5gRE4tjFEr7RL0iWBGV51vHFCyupNGWWPqLgnoer9mtyEGSJAzwLllDTGzyznDjRN/CwOFkoFb4bm0eVIXICgpvdGoEvrF7fC89zfLkkeV5HbOhWiTwTpKYvCAJLGshRdXtKMKAWlyxq+MPQLk1h66g5RE5ABJYNFrqY3wvJklJRUKg5ZWLFXIA86yek2uDOPkBNb3CM5Pf7DL2QyIrUGiLH+xC5Bmmm/ARnHUhC6PnzxWDK0RH5HuIjZGy27erU9AZ0dTIWXyG+NpBBrSFySxZw220IqeUPFoS6jVAPNadM7yDsgNB1qOkLuAziMYIb1PQGA75wIaKGPyAb+9oF16g5RE5ALIQ+tSyLWoWDEAK6aXW3JlK9VJoyx1oyvVkNdvo5KXXDAVkdnaKmNwx0xjH98w3JNmTCm+Bc9hKVhsgJSI9pvp9Vdd++jmq6AXB2/HHrhcs5aTkVDv0DFzoHvKdq/mQsKX/4t7KJLDpOJW+IbAvMGoMkxfwAWZB8DT7W1diTE+WcgKz6pK1bs6z3daPwmJDsSKt6ZsCyjlLJMz0DsDGZ8SdlDROBjOb8YeWOjptU8kTXusuaazu7oJrfEnQvdkpVcUn6PTVHyAkIIW7br/Unklni0EJIZ1WgGsauZR+fvUglz6zY0dGfVp09ybRNlfwgi3k8YSbvJJ29VMoLt9v6rZVQL7hOYUubndHJGclBtzn1byqNMCogi09/2nFb01/oj+f/5TyjauBOKtPcZ1r7qZQ3f2lRfxZPWi2anp8TSDAGExZMa2jr8u03L1M5L7q3Xc+iAeuHRl/ScvPcjSLDBnZS/cjtNHd2v3171Ewbs9N5q7Pn4otVMx3btBsCsoRbk1FxG5dMVgMDqfTpXl1/tuFMa5zKefPROdX59qLQBwLnNog8Wy1OcjB1N+QEsW/QsFNZuO35Xb1v98QLX4/Sx+O3wqujrQ6013ABUWI8+AaqBjAH01+ghL22+5X2PirnMG7r+esbnae/V1neauvGSoHjigTcVU7UGFm2DeK4ttxKpQ+mLPvl+o/PjnkAkw9HTqSMmVHhyAMx9iFcSh/BHTfLceO/C8mKjApBf9zszGhoY92m9sN+BGOY9AeD7eGniv8OTaOB4dgyTsQd9wS+IQu4lciYdkI7CLrNH3Rvbb9FL41i0tbzVP2iWJkobpN5fmM4IJfJskTP1Bk8A9HQmbpmGDBrWqdVCN/Yd7PjxKGOXn+bmbto3feVVcVB9qehIL8EJy8nChwgr0O2xxBnhGU5eP2CfYbl/m4gBRsbtneMORP9oGpjpcCsiKzHHfdOPiQ/wMniyFEu2dbiTQCAeN/vavC466BGYLttXc9fmXBXMGlAhiHHur+sq6uPiUI9z7CVHMPwBnLSuuN8FuC48/Oaz1ylt94XfrW5ouyprwWfYRkwNyCyYYjwkBHows1fa+tV/fzGxlv39b9gqvfPmQ+i/HK8KlcBjhHwfl8HEHyOd1JnuzZd66S3TTPNNNP8/wDAfwDG7G0m9LKBpwAAAABJRU5ErkJggg==) 10px 10px no-repeat;background-size:40px}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{color:#4dd0e1;border-bottom:1px solid #4dd0e1;font-weight:400;text-decoration:none;margin:0 4px}.markdown-body a:active,.markdown-body a:hover{background-color:rgba(77,208,225,.1)}.markdown-body strong{color:#26c6da}.markdown-body strong:before{content:"ã€Œ"}.markdown-body strong:after{content:"ã€"}.markdown-body em{font-style:normal;color:#4dd0e1;font-weight:700}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:rgba(77,208,225,.05)}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{margin:2em 0;padding:24px 32px;border-left:4px solid #26c6da;background:rgba(77,208,225,.15);position:relative}.markdown-body blockquote:before{content:"â";top:8px;left:8px;color:#4dd0e1;font-size:30px;line-height:1;font-weight:700;position:absolute;opacity:.7}.markdown-body blockquote:after{content:"â";font-size:30px;position:absolute;right:8px;bottom:0;color:#4dd0e1;opacity:.7}.markdown-body blockquote p{color:#595959;line-height:2}.markdown-body ol,.markdown-body ul{color:#595959;padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="xcode">.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#fff;color:#000}.xml .hljs-meta{color:silver}.hljs-comment,.hljs-quote{color:#007400}.hljs-attribute,.hljs-keyword,.hljs-literal,.hljs-name,.hljs-selector-tag,.hljs-tag{color:#aa0d91}.hljs-template-variable,.hljs-variable{color:#3f6e74}.hljs-code,.hljs-meta-string,.hljs-string{color:#c41a16}.hljs-link,.hljs-regexp{color:#0e0eff}.hljs-bullet,.hljs-number,.hljs-symbol,.hljs-title{color:#1c00cf}.hljs-meta,.hljs-section{color:#643820}.hljs-built_in,.hljs-builtin-name,.hljs-class .hljs-title,.hljs-params,.hljs-type{color:#5c2699}.hljs-attr{color:#836c28}.hljs-subst{color:#000}.hljs-formula{background-color:#eee;font-style:italic}.hljs-addition{background-color:#baeeba}.hljs-deletion{background-color:#ffc8bd}.hljs-selector-class,.hljs-selector-id{color:#9b703f}.hljs-doctag,.hljs-strong{font-weight:700}.hljs-emphasis{font-style:italic}</style><h2 data-id="heading-0">ğŸ“¦Anacondaä¸Condaçš„æ ¸å¿ƒæ¦‚å¿µ</h2>
<p>Anacondaæ˜¯ä¸€ä¸ªæµè¡Œçš„<code>Pythonæ•°æ®ç§‘å­¦å‘è¡Œç‰ˆ</code>ï¼Œå®ƒé›†æˆäº†Condaã€Pythonä»¥åŠè¶…è¿‡180ä¸ªç§‘å­¦è®¡ç®—å’Œæ•°æ®å¤„ç†çš„å¸¸ç”¨åŒ…ã€‚å®ƒçš„å¼ºå¤§ä¹‹å¤„åœ¨äºèƒ½å¤Ÿé«˜æ•ˆåœ°ç®¡ç†åŒ…å’Œç¯å¢ƒï¼Œå°¤å…¶é€‚åˆå¤„ç†å¤æ‚çš„ä¾èµ–å…³ç³»ã€‚</p>
<p>Condaæ˜¯å…¶æ ¸å¿ƒç»„ä»¶ï¼Œå®ƒèº«å…¼ä¸¤èŒï¼š</p>
<ul>
<li><strong>åŒ…ç®¡ç†å™¨</strong>ï¼šç±»ä¼¼äº<code>pip</code>ï¼Œå¯ä»¥å®‰è£…ã€æ›´æ–°ã€å¸è½½PythonåŒ…ï¼Œä½†ä¼˜åŠ¿åœ¨äºèƒ½è‡ªåŠ¨å¤„ç†å¤æ‚çš„ä¾èµ–å…³ç³»ã€‚</li>
<li><strong>ç¯å¢ƒç®¡ç†å™¨</strong>ï¼šå¯ä»¥åˆ›å»ºç›¸äº’éš”ç¦»çš„è™šæ‹Ÿç¯å¢ƒï¼Œä»¥ä¾¿ä¸åŒé¡¹ç›®å¯ä»¥ä½¿ç”¨ä¸åŒç‰ˆæœ¬çš„Pythonå’Œåº“ï¼Œå½»åº•é¿å…ç‰ˆæœ¬å†²çªã€‚</li>
</ul>
<blockquote>
<p><strong>é‡è¦æç¤º</strong>ï¼šä½¿ç”¨è™šæ‹Ÿç¯å¢ƒæ˜¯<strong>æœ€ä½³å®è·µ</strong>ï¼Œèƒ½ä¸ºæ¯ä¸ªé¡¹ç›®åˆ›å»ºç‹¬ç«‹ã€çº¯å‡€çš„è¿è¡Œç©ºé—´ï¼Œå¼ºçƒˆæ¨èä½ ä¸ºæ¯ä¸€ä¸ªæ–°é¡¹ç›®éƒ½è¿™æ ·åšã€‚</p>
</blockquote>
<h2 data-id="heading-1">ğŸŒ Anaconda æ›´æ¢é•œåƒæº</h2>
<p>æ›´æ¢é•œåƒæºä¸»è¦æ˜¯é€šè¿‡ä¿®æ”¹ Conda çš„é…ç½®æ–‡ä»¶ï¼ˆ<code>.condarc</code>ï¼‰æ¥å®ç°ã€‚ä»¥ä¸‹æ˜¯è¯¦ç»†æ­¥éª¤å’Œå‘½ä»¤ã€‚</p>








































<table><thead><tr><th>ä»»åŠ¡</th><th>å‘½ä»¤ / æ“ä½œ</th><th>è¯´æ˜ä¸ç¤ºä¾‹</th></tr></thead><tbody><tr><td><strong>æŸ¥çœ‹å½“å‰é…ç½®</strong></td><td><code>conda config --show channels</code></td><td>æŸ¥çœ‹å½“å‰å·²æ·»åŠ çš„é¢‘é“ï¼ˆé•œåƒæºï¼‰ä¼˜å…ˆçº§åˆ—è¡¨ï¼Œé å‰çš„ä¼˜å…ˆçº§é«˜ã€‚</td></tr><tr><td><strong>æ·»åŠ é•œåƒé¢‘é“</strong></td><td>æ·»åŠ <strong>æ¸…åå¤§å­¦</strong>æºï¼š <code>conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/main/</code> <code>conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/free/</code> <code>conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud/conda-forge/</code>  <br/>æ·»åŠ <strong>é˜¿é‡Œäº‘</strong>æºï¼š <code>conda config --add channels https://mirrors.aliyun.com/anaconda/pkgs/main/</code> <code>conda config --add channels https://mirrors.aliyun.com/anaconda/pkgs/free/</code>  <br/>æ·»åŠ <strong>ä¸­ç§‘å¤§</strong>æºï¼ˆ<strong>å·²åœç”¨ï¼Œä»…ä½œå‚è€ƒ</strong>ï¼‰ï¼š <code>conda config --add channels https://mirrors.ustc.edu.cn/anaconda/pkgs/main/</code> <code>conda config --add channels https://mirrors.ustc.edu.cn/anaconda/pkgs/free/</code></td><td><strong>å‘½ä»¤ä¼šæŒ‰æ‰§è¡Œé¡ºåºå åŠ </strong>ï¼Œåæ·»åŠ çš„æºä¼šå‡ºç°åœ¨åˆ—è¡¨æ›´é å‰çš„ä½ç½®ï¼Œæ‹¥æœ‰æ›´é«˜çš„ä¼˜å…ˆçº§ã€‚<strong>è¯·å‹¿æ·»åŠ å·²åœç”¨çš„ä¸­ç§‘å¤§æºã€‚</strong></td></tr><tr><td><strong>è®¾ç½®æ˜¾ç¤ºé¢‘é“URL</strong></td><td><code>conda config --set show_channel_urls yes</code></td><td>æ‰§è¡ŒÂ <code>conda install</code>Â æ—¶ï¼Œä¼šæ˜¾ç¤ºåŒ…æ˜¯ä»å“ªä¸ªé•œåƒé¢‘é“ä¸‹è½½çš„ï¼Œä¾¿äºç¡®è®¤æ¥æºã€‚</td></tr><tr><td><strong>ç§»é™¤æŒ‡å®šé•œåƒé¢‘é“</strong></td><td><code>conda config --remove channels &lt;å®Œæ•´çš„é¢‘é“URL&gt;</code></td><td>å½“æŸä¸ªé•œåƒå¤±æ•ˆæ—¶ï¼Œå¯å°†å…¶ç§»é™¤ã€‚ä¾‹å¦‚ç§»é™¤ä¸€ä¸ªå¤±æ•ˆçš„æ¸…åæºï¼š<code>conda config --remove channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/free/</code></td></tr><tr><td><strong>æ¢å¤é»˜è®¤æº</strong></td><td><code>conda config --remove-key channels</code></td><td><strong>ä¸€é”®ç§»é™¤æ‰€æœ‰è‡ªå®šä¹‰é¢‘é“</strong>ï¼Œæ¢å¤ä¸º Conda å®˜æ–¹é»˜è®¤æº (<code>defaults</code>)ã€‚</td></tr><tr><td><strong>æ‰‹åŠ¨ç¼–è¾‘é…ç½®æ–‡ä»¶</strong></td><td>é…ç½®æ–‡ä»¶é€šå¸¸ä½äºï¼š <code>D:\Environment\Anaconda/.condarc</code>Â (Windows) <code>~/.condarc</code>Â (Mac/Linux)</td><td>ç›´æ¥ç”¨æ–‡æœ¬ç¼–è¾‘å™¨æ‰“å¼€æ­¤æ–‡ä»¶ï¼ŒæŒ‰Â <strong>YAMLæ ¼å¼</strong>Â è¿›è¡Œæ›´çµæ´»çš„ç¼–è¾‘ï¼ˆä¾‹å¦‚ç›´æ¥è°ƒæ•´æºçš„å…ˆåé¡ºåºï¼‰ã€‚</td></tr></tbody></table>
<ol>
<li>
<ul>
<li><code>channels</code>Â åˆ—è¡¨<strong>è‡ªä¸Šè€Œä¸‹ä¼˜å…ˆçº§é€’å‡</strong>ã€‚ä½ å¯ä»¥é€šè¿‡è°ƒæ•´é¡ºåºæ¥ä¼˜å…ˆä½¿ç”¨æœ€å¿«çš„æºã€‚ç¼–è¾‘Â <code>.condarc</code>Â æ–‡ä»¶ï¼Œå°†é˜¿é‡Œäº‘æ”¾åœ¨æœ€ä¸Šé¢ä»¥è·å¾—ä¼˜å…ˆä½¿ç”¨ã€‚
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">channels:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">https://mirrors.aliyun.com/anaconda/pkgs/main/</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">https://mirrors.aliyun.com/anaconda/pkgs/free/</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/main/</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/free/</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">defaults</span>
<span class="hljs-attr">show_channel_urls:</span> <span class="hljs-literal">true</span>
</code></pre>
</li>
</ul>
</li>
<li>
<p><strong>ä¸´æ—¶ä½¿ç”¨ç‰¹å®šæº</strong></p>
<ul>
<li>å¦‚æœä¸æƒ³ä¿®æ”¹å…¨å±€é…ç½®ï¼Œå¯ä»¥åœ¨å®‰è£…å‘½ä»¤ä¸­ä¸´æ—¶æŒ‡å®šé¢‘é“ã€‚ä¾‹å¦‚ï¼Œä¸´æ—¶ä»æ¸…åçš„Â <code>conda-forge</code>Â é¢‘é“å®‰è£…æŸä¸ªåŒ…ï¼š
<pre><code class="hljs language-bash" lang="bash">conda install -c https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud/conda-forge &lt;package_name&gt;
</code></pre>
</li>
</ul>
</li>
<li>
<p><strong>æµ‹è¯•ä¸æ¸…ç†</strong></p>
<ul>
<li>é…ç½®å®Œæˆåï¼Œå¯ä»¥è¿è¡ŒÂ <code>conda clean -i</code>Â æ¸…é™¤ç´¢å¼•ç¼“å­˜ï¼Œç„¶åå°è¯•å®‰è£…ä¸€ä¸ªåŒ…Â <code>conda install numpy</code>æ¥æµ‹è¯•æ–°æºçš„ä¸‹è½½é€Ÿåº¦ã€‚</li>
</ul>
</li>
</ol>
<h2 data-id="heading-2">ğŸŒ±å‘½ä»¤å¤§å…¨</h2>
<h3 data-id="heading-3">âš™ï¸ç¯å¢ƒç®¡ç†ä¸æ–°ç¯å¢ƒ</h3>













































<table><thead><tr><th>ä»»åŠ¡</th><th>å‘½ä»¤</th><th>è¯´æ˜ä¸ç¤ºä¾‹</th></tr></thead><tbody><tr><td><strong>åˆ›å»ºç¯å¢ƒ</strong></td><td><code>conda create --name &lt;ç¯å¢ƒå&gt; python=&lt;ç‰ˆæœ¬å·&gt;</code></td><td>åˆ›å»ºä¸€ä¸ªæŒ‡å®šPythonç‰ˆæœ¬çš„æ–°ç¯å¢ƒã€‚ä¾‹ï¼š<code>conda create --name my_project python=3.9</code></td></tr><tr><td><strong>æ¿€æ´»ç¯å¢ƒ</strong></td><td><code>conda activate &lt;ç¯å¢ƒå&gt;</code></td><td>è¿›å…¥æŸä¸ªç¯å¢ƒï¼Œåç»­æ“ä½œå‡åœ¨æ­¤ç¯å¢ƒä¸­è¿›è¡Œã€‚Windowsçš„æ—§ç‰ˆAnacondaå¯èƒ½éœ€è¦ä½¿ç”¨Â <code>activate &lt;ç¯å¢ƒå&gt;</code>ã€‚</td></tr><tr><td><strong>é€€å‡ºç¯å¢ƒ</strong></td><td><code>conda deactivate</code></td><td>é€€å‡ºå½“å‰ç¯å¢ƒï¼Œå›åˆ°åŸºç¡€ï¼ˆbaseï¼‰ç¯å¢ƒã€‚</td></tr><tr><td><strong>åˆ—å‡ºæ‰€æœ‰ç¯å¢ƒ</strong></td><td><code>conda env list</code>Â æˆ–Â <code>conda info --envs</code></td><td>æŸ¥çœ‹å·²åˆ›å»ºçš„æ‰€æœ‰ç¯å¢ƒï¼Œå½“å‰æ¿€æ´»çš„ç¯å¢ƒå‰ä¼šç”¨æ˜Ÿå·<code>*</code>æ ‡è®°ã€‚</td></tr><tr><td><strong>åˆ é™¤ç¯å¢ƒ</strong></td><td><code>conda remove --name &lt;ç¯å¢ƒå&gt; --all</code></td><td><strong>è°¨æ…æ“ä½œ</strong>ï¼Œä¼šåˆ é™¤è¯¥ç¯å¢ƒåŠå…¶æ‰€æœ‰åŒ…ã€‚</td></tr><tr><td><strong>å…‹éš†ç¯å¢ƒ</strong></td><td><code>conda create --name &lt;æ–°å&gt; --clone &lt;è¢«å…‹éš†å&gt;</code>[]</td><td>å¤åˆ¶ä¸€ä¸ªç°æœ‰ç¯å¢ƒï¼Œç”¨äºå¤‡ä»½æˆ–åˆ›å»ºç›¸ä¼¼ç¯å¢ƒã€‚</td></tr><tr><td><strong>å¯¼å‡º/å¯¼å…¥ç¯å¢ƒ</strong></td><td>å¯¼å‡ºï¼š<code>conda env export &gt; environment.yml</code> å¯¼å…¥ï¼š<code>conda env create -f environment.yml</code></td><td>å°†ç¯å¢ƒçš„ç²¾ç¡®é…ç½®å¯¼å‡ºä¸ºYAMLæ–‡ä»¶ï¼Œä¾¿äºåœ¨å…¶ä»–æœºå™¨ä¸Šå¤ç°ç›¸åŒç¯å¢ƒã€‚</td></tr></tbody></table>
<h3 data-id="heading-4">ğŸ“¦ åŒ…ç®¡ç†ï¼šå®‰è£…ä¸ç»´æŠ¤å·¥å…·</h3>
<p>åœ¨æ¿€æ´»çš„è™šæ‹Ÿç¯å¢ƒä¸­ï¼Œä½ å¯ä»¥ä½¿ç”¨Condaæ¥ç®¡ç†æ‰€æœ‰åŒ…ã€‚</p>








































<table><thead><tr><th>ä»»åŠ¡</th><th>å‘½ä»¤</th><th>è¯´æ˜ä¸ç¤ºä¾‹</th></tr></thead><tbody><tr><td><strong>å®‰è£…åŒ…</strong></td><td><code>conda install &lt;åŒ…å&gt;</code></td><td>å®‰è£…æœ€æ–°ç‰ˆæœ¬çš„åŒ…ã€‚ä¾‹ï¼š<code>conda install pandas</code>ã€‚ å¯æŒ‡å®šç‰ˆæœ¬ï¼š<code>conda install numpy=1.19.5</code>ã€‚ å¯ä»ç‰¹å®šé¢‘é“å®‰è£…ï¼š<code>conda install -c conda-forge scikit-learn</code>ã€‚</td></tr><tr><td><strong>åˆ—å‡ºå·²å®‰è£…åŒ…</strong></td><td><code>conda list</code></td><td>æŸ¥çœ‹å½“å‰ç¯å¢ƒä¸­æ‰€æœ‰å·²å®‰è£…çš„åŒ…åŠå…¶ç‰ˆæœ¬ã€‚</td></tr><tr><td><strong>æœç´¢åŒ…</strong></td><td><code>conda search &lt;åŒ…å&gt;</code></td><td>åœ¨Condaä»“åº“ä¸­æœç´¢å¯ç”¨çš„åŒ…ã€‚åŠ <code>--info</code>å¯æŸ¥çœ‹è¯¦ç»†ç‰ˆæœ¬ä¿¡æ¯ã€‚</td></tr><tr><td><strong>æ›´æ–°åŒ…</strong></td><td><code>conda update &lt;åŒ…å&gt;</code></td><td>æ›´æ–°æŒ‡å®šåŒ…ã€‚ æ›´æ–°æ‰€æœ‰åŒ…ï¼š<code>conda update --all</code>ï¼ˆéœ€è°¨æ…ï¼Œå¯èƒ½å¼•å‘ä¾èµ–é—®é¢˜ï¼‰ã€‚</td></tr><tr><td><strong>å¸è½½åŒ…</strong></td><td><code>conda remove &lt;åŒ…å&gt;</code></td><td>ä»å½“å‰ç¯å¢ƒä¸­ç§»é™¤æŒ‡å®šåŒ…ã€‚</td></tr><tr><td><strong>æ¸…ç†ç¼“å­˜</strong></td><td><code>conda clean --all</code></td><td>åˆ é™¤ä¸å†ä½¿ç”¨çš„åŒ…ç¼“å­˜å’Œä¸´æ—¶æ–‡ä»¶ï¼Œé‡Šæ”¾ç£ç›˜ç©ºé—´ã€‚</td></tr></tbody></table>
<h2 data-id="heading-5">ğŸ› ï¸ é…ç½®ã€æ£€æŸ¥ä»¥åŠä½¿ç”¨æŠ€å·§</h2>
<h3 data-id="heading-6">åŸºç¡€ä¸é…ç½®</h3>
<ul>
<li><strong>æ£€æŸ¥ä¿¡æ¯</strong>ï¼šä½¿ç”¨Â <code>conda info</code>Â æŸ¥çœ‹Condaçš„å®‰è£…è·¯å¾„ã€ç¯å¢ƒåˆ—è¡¨ç­‰åŸºç¡€ä¿¡æ¯ã€‚</li>
<li><strong>æ›´æ–°è‡ªèº«</strong>ï¼šä½¿ç”¨Â <code>conda update conda</code>Â å’ŒÂ <code>conda update anaconda</code>Â æ¥æ›´æ–°Condaå·¥å…·å’Œæ•´ä¸ªAnacondaå‘è¡Œç‰ˆã€‚</li>
<li><strong>é…ç½®é•œåƒæº</strong>ï¼šå›½å†…ç”¨æˆ·å¯ä»¥å°†é»˜è®¤ä»“åº“ï¼ˆchannelï¼‰æ›¿æ¢ä¸ºå›½å†…é•œåƒï¼ˆå¦‚æ¸…åæºï¼‰ä»¥æ˜¾è‘—æå‡ä¸‹è½½é€Ÿåº¦ã€‚ä¸è¿‡é…ç½®æ–¹æ³•å¯èƒ½éšæ—¶é—´å˜åŒ–ï¼Œå»ºè®®æœç´¢â€œAnaconda æ¸…åæº æœ€æ–°â€è·å–å½“å‰å¯ç”¨çš„é…ç½®æŒ‡ä»¤ã€‚</li>
<li><strong>ç¯å¢ƒç‰ˆæœ¬å›æ»š</strong>ï¼šCondaæœ‰è®°å½•ç¯å¢ƒå˜æ›´çš„åŠŸèƒ½ã€‚ä½¿ç”¨Â <code>conda list --revisions</code>Â æŸ¥çœ‹å†å²ç‰ˆæœ¬ï¼Œä½¿ç”¨Â <code>conda install --revision &lt;ç‰ˆæœ¬å·&gt;</code>Â å¯ä»¥å›æ»šåˆ°æŸä¸€çŠ¶æ€ã€‚</li>
</ul>
<h3 data-id="heading-7">æ•´åˆä¸å·¥ä½œæµå»ºè®®</h3>
<ul>
<li><strong>ä¸PyCharmç­‰IDEç»“åˆ</strong>ï¼šåœ¨PyCharmä¸­ï¼Œä½ å¯ä»¥åœ¨Â <code>File &gt; Settings &gt; Project: &lt;é¡¹ç›®å&gt; &gt; Python Interpreter</code>Â ä¸­æ·»åŠ Anacondaè™šæ‹Ÿç¯å¢ƒä¸­çš„Pythonè§£é‡Šå™¨è·¯å¾„ï¼ˆé€šå¸¸ä½äºÂ <code>Anacondaå®‰è£…ç›®å½•/envs/&lt;ç¯å¢ƒå&gt;/python.exe</code>ï¼‰ï¼Œå³å¯åœ¨è¯¥é¡¹ç›®ä¸­ä½¿ç”¨è¯¥ç¯å¢ƒã€‚</li>
<li><strong>Condaä¸Pipæ··ç”¨</strong>ï¼šè™½ç„¶æ¨èä¼˜å…ˆä½¿ç”¨Â <code>conda install</code>ï¼Œä½†å¦‚æœæŸä¸ªåŒ…åœ¨Condaä»“åº“ä¸­æ‰¾ä¸åˆ°ï¼Œå¯ä»¥åœ¨æ¿€æ´»çš„Condaç¯å¢ƒä¸­ä½¿ç”¨Â <code>pip install</code>ã€‚é€šå¸¸ä¸ä¼šæœ‰å¤§é—®é¢˜ï¼Œä½†æç«¯æƒ…å†µä¸‹å¯èƒ½å‡ºç°ä¾èµ–å†²çªã€‚</li>
<li><strong>é¡¹ç›®å·¥ä½œæµå»ºè®®</strong>ï¼š
<ol>
<li>å¯åŠ¨æ–°é¡¹ç›®æ—¶ï¼Œå…ˆåˆ›å»ºä¸“å±è™šæ‹Ÿç¯å¢ƒã€‚</li>
<li>åœ¨ç¯å¢ƒä¸­å®‰è£…æ‰€æœ‰å¿…è¦çš„ä¾èµ–ã€‚</li>
<li>é¡¹ç›®å®Œæˆåï¼Œä½¿ç”¨Â <code>conda env export &gt; environment.yml</code>Â å¯¼å‡ºç¯å¢ƒé…ç½®ï¼Œå¹¶å’Œé¡¹ç›®ä»£ç ä¸€èµ·ä¿å­˜æˆ–åˆ†äº«ã€‚</li>
<li>å¯¹äºä¸éœ€è¦çš„ç¯å¢ƒï¼ŒåŠæ—¶åˆ é™¤ä»¥èŠ‚çœç©ºé—´ã€‚</li>
</ol>
</li>
</ul>
<h2 data-id="heading-8">ğŸ’ æ ¸å¿ƒè¦ç‚¹æ€»ç»“</h2>
<ul>
<li><strong>éš”ç¦»æ˜¯å…³é”®</strong>ï¼šä¸ºæ¯ä¸ªé¡¹ç›®åˆ›å»ºç‹¬ç«‹çš„è™šæ‹Ÿç¯å¢ƒï¼Œè¿™æ˜¯ä½¿ç”¨Anacondaæœ€é‡è¦çš„å¥½ä¹ æƒ¯ã€‚</li>
<li><strong>å‘½ä»¤æœ‰å±‚æ¬¡</strong>ï¼šå…ˆç®¡ç†å¥½ç¯å¢ƒï¼ˆ<code>create</code>,Â <code>activate</code>ï¼‰ï¼Œå†åœ¨ç¯å¢ƒä¸­ç®¡ç†åŒ…ï¼ˆ<code>install</code>,Â <code>list</code>ï¼‰ã€‚</li>
<li><strong>åˆ©ç”¨å¯¼å‡ºåŠŸèƒ½</strong>ï¼šç”¨Â <code>environment.yml</code>Â æ–‡ä»¶è®°å½•ç¯å¢ƒï¼Œç¡®ä¿é¡¹ç›®å¯å¤ç°ã€‚</li>
<li><strong>å–„ç”¨é•œåƒåŠ é€Ÿ</strong>ï¼šåœ¨å›½å†…é…ç½®é•œåƒæºå¯ä»¥æå¤§æå‡åŒ…ä¸‹è½½æ•ˆç‡ã€‚</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[é¢è¯•å®˜: â€œ è¯´ä¸€ä¸‹ä½ å¯¹ Cookie çš„ç†è§£ ? â€]]></title>    <link>https://juejin.cn/post/7588043318359146531</link>    <guid>https://juejin.cn/post/7588043318359146531</guid>    <pubDate>2025-12-27T11:32:30.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588043318359146531" data-draft-id="7588095884069535744" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="é¢è¯•å®˜: â€œ è¯´ä¸€ä¸‹ä½ å¯¹ Cookie çš„ç†è§£ ? â€"/> <meta itemprop="keywords" content="å‰ç«¯,åç«¯"/> <meta itemprop="datePublished" content="2025-12-27T11:32:30.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="åƒå¯»girling"/> <meta itemprop="url" content="https://juejin.cn/user/2276467567770442"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            é¢è¯•å®˜: â€œ è¯´ä¸€ä¸‹ä½ å¯¹ Cookie çš„ç†è§£ ? â€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2276467567770442/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    åƒå¯»girling
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-27T11:32:30.000Z" title="Sat Dec 27 2025 11:32:30 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">1.Â <strong>ä»€ä¹ˆæ˜¯ Cookie</strong></h2>
<p><strong>Cookie</strong>ï¼ˆå°ç”œé¥¼ï¼‰æ˜¯Â <strong>æœåŠ¡å™¨å‘é€ç»™æµè§ˆå™¨å¹¶ä¿å­˜åœ¨å®¢æˆ·ç«¯çš„ä¸€å°æ®µæ•°æ®</strong>ï¼Œç”¨äºï¼š</p>
<ul>
<li>è®°å½•ç”¨æˆ·çŠ¶æ€ï¼ˆå¦‚ç™»å½•ä¿¡æ¯ã€è´­ç‰©è½¦å†…å®¹ï¼‰</li>
<li>è·Ÿè¸ªç”¨æˆ·è¡Œä¸ºï¼ˆå¦‚æµè§ˆå†å²ã€å¹¿å‘Šæ¨é€ï¼‰</li>
<li>å­˜å‚¨å°‘é‡é…ç½®ä¿¡æ¯ï¼ˆå¦‚ä¸»é¢˜åå¥½ã€è¯­è¨€è®¾ç½®ï¼‰</li>
</ul>
<p><strong>ç‰¹ç‚¹ï¼š</strong></p>
<ul>
<li>å¤§å°é™åˆ¶ï¼šé€šå¸¸æ¯ä¸ª Cookie æœ€å¤§ 4KB</li>
<li>æ•°é‡é™åˆ¶ï¼šæ¯ä¸ªåŸŸåä¸€èˆ¬æœ€å¤š 50 ä¸ª Cookie</li>
<li>è‡ªåŠ¨æºå¸¦ï¼šæµè§ˆå™¨åœ¨è®¿é—®åŒä¸€åŸŸåæ—¶ä¼šè‡ªåŠ¨å°† Cookie é™„åŠ åœ¨è¯·æ±‚å¤´ä¸­å‘é€ç»™æœåŠ¡å™¨</li>
</ul>
<hr/>
<h2 data-id="heading-1">2.Â <strong>Cookie çš„ç»“æ„</strong></h2>
<p>ä¸€ä¸ª Cookie é€šå¸¸åŒ…å«ä»¥ä¸‹å­—æ®µï¼š</p>









































<table><thead><tr><th>å­—æ®µå</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>Name</strong></td><td>Cookie çš„åç§°</td></tr><tr><td><strong>Value</strong></td><td>Cookie çš„å€¼ï¼ˆé€šå¸¸ç»è¿‡ URL ç¼–ç ï¼‰</td></tr><tr><td><strong>Domain</strong></td><td>å¯ä»¥è®¿é—®è¯¥ Cookie çš„åŸŸå</td></tr><tr><td><strong>Path</strong></td><td>å¯ä»¥è®¿é—®è¯¥ Cookie çš„è·¯å¾„</td></tr><tr><td><strong>Expires / Max-Age</strong></td><td>Cookie çš„è¿‡æœŸæ—¶é—´ï¼ˆExpires æ˜¯å…·ä½“æ—¥æœŸï¼ŒMax-Age æ˜¯ç§’æ•°ï¼‰</td></tr><tr><td><strong>HttpOnly</strong></td><td>å¦‚æœè®¾ç½®ï¼ŒCookie ä¸èƒ½é€šè¿‡ JavaScript è®¿é—®ï¼ˆé˜²æ­¢ XSS æ”»å‡»ï¼‰</td></tr><tr><td><strong>Secure</strong></td><td>å¦‚æœè®¾ç½®ï¼ŒCookie åªèƒ½é€šè¿‡ HTTPS ä¼ è¾“</td></tr><tr><td><strong>SameSite</strong></td><td>æ§åˆ¶è·¨ç«™è¯·æ±‚æ—¶æ˜¯å¦å‘é€ Cookieï¼ˆé˜²æ­¢ CSRF æ”»å‡»ï¼‰</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-2">3.Â <strong>Cookie çš„å·¥ä½œæµç¨‹</strong></h2>
<ol>
<li>
<p><strong>æœåŠ¡å™¨å‘é€ Cookie</strong> : å½“æµè§ˆå™¨ç¬¬ä¸€æ¬¡è®¿é—®æœåŠ¡å™¨æ—¶ï¼ŒæœåŠ¡å™¨åœ¨å“åº”å¤´ä¸­æ·»åŠ ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">Set-Cookie: <span class="hljs-attr">username</span>=Tom<span class="hljs-comment">; Path=/; HttpOnly; Secure</span>
</code></pre>
<p>æµè§ˆå™¨æ”¶åˆ°åä¼šå°†è¯¥ Cookie ä¿å­˜åˆ°æœ¬åœ°ã€‚</p>
</li>
<li>
<p><strong>æµè§ˆå™¨å­˜å‚¨ Cookie</strong>: Cookie ä¼šè¢«ä¿å­˜åœ¨æµè§ˆå™¨çš„æŸä¸ªæ–‡ä»¶æˆ–å†…å­˜ä¸­ï¼Œæ ¹æ®Â <code>Domain</code>Â å’ŒÂ <code>Path</code>Â æ¥åŒºåˆ†ã€‚</p>
</li>
<li>
<p><strong>æµè§ˆå™¨å‘é€è¯·æ±‚æ—¶æºå¸¦ Cookie</strong> : ä¹‹åæ¯æ¬¡è®¿é—®åŒä¸€åŸŸåå’Œè·¯å¾„æ—¶ï¼Œæµè§ˆå™¨ä¼šè‡ªåŠ¨åœ¨è¯·æ±‚å¤´ä¸­æ·»åŠ ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">Cookie: <span class="hljs-attr">username</span>=Tom
</code></pre>
<p>æœåŠ¡å™¨é€šè¿‡è¯»å–è¿™ä¸ª Cookie æ¥è¯†åˆ«ç”¨æˆ·ã€‚</p>
</li>
</ol>
<hr/>
<h2 data-id="heading-3">4.Â <strong>Cookie çš„åˆ†ç±»</strong></h2>
<h3 data-id="heading-4">ï¼ˆ1ï¼‰<strong>ä¼šè¯ Cookieï¼ˆSession Cookieï¼‰</strong></h3>
<ul>
<li>æ²¡æœ‰è®¾ç½®Â <code>Expires</code>Â æˆ–Â <code>Max-Age</code></li>
<li>æµè§ˆå™¨å…³é—­åè‡ªåŠ¨åˆ é™¤</li>
<li>å¸¸ç”¨äºä¿å­˜çŸ­æœŸä¼šè¯ä¿¡æ¯ï¼ˆå¦‚ç™»å½•çŠ¶æ€ï¼‰</li>
</ul>
<h3 data-id="heading-5">ï¼ˆ2ï¼‰<strong>æŒä¹… Cookieï¼ˆPersistent Cookieï¼‰</strong></h3>
<ul>
<li>è®¾ç½®äº†Â <code>Expires</code>Â æˆ–Â <code>Max-Age</code></li>
<li>åœ¨è¿‡æœŸæ—¶é—´å‰ä¸€ç›´æœ‰æ•ˆï¼Œå³ä½¿æµè§ˆå™¨å…³é—­</li>
<li>å¸¸ç”¨äºä¿å­˜é•¿æœŸä¿¡æ¯ï¼ˆå¦‚è®°ä½ç™»å½•ã€ç”¨æˆ·åå¥½ï¼‰</li>
</ul>
<hr/>
<h2 data-id="heading-6">5.Â <strong>Cookie çš„ä¼˜ç¼ºç‚¹</strong></h2>
<h3 data-id="heading-7">ä¼˜ç‚¹</h3>
<ul>
<li><strong>ç®€å•æ˜“ç”¨</strong>ï¼šæœåŠ¡å™¨å’Œæµè§ˆå™¨éƒ½åŸç”Ÿæ”¯æŒ</li>
<li><strong>è‡ªåŠ¨æºå¸¦</strong>ï¼šæ— éœ€æ‰‹åŠ¨å¤„ç†</li>
<li><strong>è½»é‡çº§</strong>ï¼šé€‚åˆå­˜å‚¨å°‘é‡æ•°æ®</li>
</ul>
<h3 data-id="heading-8">ç¼ºç‚¹</h3>
<ul>
<li>
<p><strong>å®¹é‡å°</strong>ï¼šæ¯ä¸ª Cookie æœ€å¤§ 4KB</p>
</li>
<li>
<p><strong>å®‰å…¨æ€§å·®</strong>ï¼š</p>
<ul>
<li>å®¹æ˜“è¢«çªƒå–ï¼ˆXSS æ”»å‡»ï¼‰</li>
<li>å®¹æ˜“è¢«ä¼ªé€ ï¼ˆCSRF æ”»å‡»ï¼‰</li>
</ul>
</li>
<li>
<p><strong>æ€§èƒ½å½±å“</strong>ï¼š</p>
<ul>
<li>æ¯æ¬¡è¯·æ±‚éƒ½ä¼šæºå¸¦ï¼Œå¢åŠ å¸¦å®½æ¶ˆè€—</li>
<li>è¿‡å¤š Cookie ä¼šå½±å“é¡µé¢åŠ è½½é€Ÿåº¦</li>
</ul>
</li>
</ul>
<hr/>
<h2 data-id="heading-9">6.Â <strong>Cookie çš„å®‰å…¨è®¾ç½®</strong></h2>
<p>ä¸ºäº†æé«˜å®‰å…¨æ€§ï¼Œå»ºè®®è®¾ç½®ä»¥ä¸‹å±æ€§ï¼š</p>
<ul>
<li>
<p><strong>HttpOnly</strong>ï¼šé˜²æ­¢ JavaScript è®¿é—®ï¼ˆå‡å°‘ XSS é£é™©ï¼‰</p>
</li>
<li>
<p><strong>Secure</strong>ï¼šåªåœ¨ HTTPS è¿æ¥ä¸­ä¼ è¾“</p>
</li>
<li>
<p><strong>SameSite</strong>ï¼š</p>
<ul>
<li><code>Strict</code>ï¼šä»…åœ¨åŒç«™è¯·æ±‚æ—¶å‘é€</li>
<li><code>Lax</code>ï¼šå…è®¸éƒ¨åˆ†è·¨ç«™è¯·æ±‚ï¼ˆå¦‚ GET è¡¨å•æäº¤ï¼‰</li>
</ul>
</li>
<li>
<p><strong>åˆç†çš„è¿‡æœŸæ—¶é—´</strong>ï¼šçŸ­æœŸ Cookie å‡å°‘è¢«ç›—é£é™©</p>
</li>
</ul>
<hr/>
<h2 data-id="heading-10">7.Â <strong>ç¤ºä¾‹ï¼šä½¿ç”¨ Cookie</strong></h2>
<h3 data-id="heading-11">ï¼ˆ1ï¼‰æœåŠ¡å™¨è®¾ç½® Cookieï¼ˆNode.js + Expressï¼‰</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> express = <span class="hljs-built_in">require</span>(<span class="hljs-string">'express'</span>);
<span class="hljs-keyword">const</span> app = <span class="hljs-title function_">express</span>();

app.<span class="hljs-title function_">get</span>(<span class="hljs-string">'/login'</span>, <span class="hljs-function">(<span class="hljs-params">req, res</span>) =&gt;</span> {
  <span class="hljs-comment">// è®¾ç½®ä¸€ä¸ªä¼šè¯ Cookie</span>
  res.<span class="hljs-title function_">cookie</span>(<span class="hljs-string">'username'</span>, <span class="hljs-string">'Tom'</span>, {
    <span class="hljs-attr">httpOnly</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">secure</span>: process.<span class="hljs-property">env</span>.<span class="hljs-property">NODE_ENV</span> === <span class="hljs-string">'production'</span>,
    <span class="hljs-attr">sameSite</span>: <span class="hljs-string">'Strict'</span>,
    <span class="hljs-attr">maxAge</span>: <span class="hljs-number">3600000</span> <span class="hljs-comment">// 1 å°æ—¶</span>
  });
  res.<span class="hljs-title function_">send</span>(<span class="hljs-string">'ç™»å½•æˆåŠŸ'</span>);
});

app.<span class="hljs-title function_">get</span>(<span class="hljs-string">'/profile'</span>, <span class="hljs-function">(<span class="hljs-params">req, res</span>) =&gt;</span> {
  <span class="hljs-comment">// è¯»å– Cookie</span>
  <span class="hljs-keyword">const</span> username = req.<span class="hljs-property">cookies</span>.<span class="hljs-property">username</span>;
  <span class="hljs-keyword">if</span> (username) {
    res.<span class="hljs-title function_">send</span>(<span class="hljs-string">`æ¬¢è¿ä½ ï¼Œ<span class="hljs-subst">${username}</span>`</span>);
  } <span class="hljs-keyword">else</span> {
    res.<span class="hljs-title function_">send</span>(<span class="hljs-string">'è¯·å…ˆç™»å½•'</span>);
  }
});

app.<span class="hljs-title function_">listen</span>(<span class="hljs-number">3000</span>);
</code></pre>
<h3 data-id="heading-12">ï¼ˆ2ï¼‰æµè§ˆå™¨æŸ¥çœ‹ Cookie</h3>
<ul>
<li>Chromeï¼š<code>F12</code>Â â†’Â <strong>Application</strong>Â â†’Â <strong>Cookies</strong></li>
<li>Firefoxï¼š<code>F12</code>Â â†’Â <strong>Storage</strong>Â â†’Â <strong>Cookies</strong></li>
</ul>
<hr/>
<h2 data-id="heading-13">8.Â <strong>Cookie ä¸ Token çš„åŒºåˆ«</strong></h2>



































<table><thead><tr><th>ç‰¹æ€§</th><th>Cookie</th><th>Token</th></tr></thead><tbody><tr><td>å­˜å‚¨ä½ç½®</td><td>æµè§ˆå™¨</td><td>æµè§ˆå™¨ï¼ˆLocalStorage/SessionStorageï¼‰æˆ– App</td></tr><tr><td>ä¼ è¾“æ–¹å¼</td><td>è‡ªåŠ¨åœ¨ HTTP è¯·æ±‚å¤´ä¸­å‘é€</td><td>éœ€è¦æ‰‹åŠ¨åœ¨è¯·æ±‚å¤´ä¸­æ·»åŠ ï¼ˆå¦‚Â <code>Authorization: Bearer &lt;token&gt;</code>ï¼‰</td></tr><tr><td>å®¹é‡é™åˆ¶</td><td>æ¯ä¸ª Cookie æœ€å¤§ 4KB</td><td>æ— å›ºå®šé™åˆ¶ï¼ˆä½†è¿‡å¤§å½±å“æ€§èƒ½ï¼‰</td></tr><tr><td>å®‰å…¨æ€§</td><td>è¾ƒä½ï¼ˆæ˜“å— XSS/CSRF æ”»å‡»ï¼‰</td><td>è¾ƒé«˜ï¼ˆå¯ç»“åˆ HttpOnlyã€Secureã€SameSiteï¼‰</td></tr><tr><td>é€‚ç”¨åœºæ™¯</td><td>ç®€å•ä¼šè¯ç®¡ç†ã€çŸ­æœŸçŠ¶æ€å­˜å‚¨</td><td>å¤æ‚è®¤è¯æˆæƒã€è·¨åŸŸè¯·æ±‚ã€ç§»åŠ¨åº”ç”¨</td></tr></tbody></table>
<hr/>
<p>âœ…Â <strong>æ€»ç»“</strong>ï¼š</p>
<ul>
<li><strong>Cookie</strong>Â æ˜¯æœåŠ¡å™¨ä¿å­˜åœ¨æµè§ˆå™¨çš„ä¸€å°æ®µæ•°æ®ï¼Œç”¨äºè®°å½•çŠ¶æ€å’Œè·Ÿè¸ªç”¨æˆ·</li>
<li>è‡ªåŠ¨æºå¸¦åœ¨è¯·æ±‚å¤´ä¸­ï¼Œæ–¹ä¾¿ä½†æœ‰å®¹é‡å’Œå®‰å…¨é™åˆ¶</li>
<li>å¸¸ç”¨äºç®€å•ä¼šè¯ç®¡ç†ï¼Œç°ä»£ Web å¼€å‘ä¸­æ›´å¤šä¸ Token ç»“åˆä½¿ç”¨</li>
<li>å®‰å…¨ä½¿ç”¨éœ€è®¾ç½®Â <code>HttpOnly</code>ã€<code>Secure</code>ã€<code>SameSite</code>Â ç­‰å±æ€§</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[nextjsä¸­ï¼Œå…³äºLayoutç»„ä»¶å’ŒPageç»„ä»¶çš„è®¤çŸ¥]]></title>    <link>https://juejin.cn/post/7588084804093165606</link>    <guid>https://juejin.cn/post/7588084804093165606</guid>    <pubDate>2025-12-27T11:55:29.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588084804093165606" data-draft-id="7588086766248165427" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="nextjsä¸­ï¼Œå…³äºLayoutç»„ä»¶å’ŒPageç»„ä»¶çš„è®¤çŸ¥"/> <meta itemprop="keywords" content="å‰ç«¯,React.js"/> <meta itemprop="datePublished" content="2025-12-27T11:55:29.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="RedHeartWWW"/> <meta itemprop="url" content="https://juejin.cn/user/3263006243293768"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            nextjsä¸­ï¼Œå…³äºLayoutç»„ä»¶å’ŒPageç»„ä»¶çš„è®¤çŸ¥
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3263006243293768/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    RedHeartWWW
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-27T11:55:29.000Z" title="Sat Dec 27 2025 11:55:29 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€Layoutâ€”â€”é¡µé¢çš„å¸ƒå±€ç»“æ„</h2>
<p>å½“ç”¨æˆ·è®¿é—®nexté¡¹ç›®ä¸­çš„ä¸€ä¸ªé¡µé¢ï¼Œå¦‚æœè¿™ä¸ªé¡µé¢çš„è·¯ç”±å¯¹åº”æ–‡ä»¶å¤¹ä¸‹é¢æœ‰layout.tsxï¼Œé‚£ä¹ˆnextå°±ä¼šåŸºäºè¿™ä¸ªæ–‡ä»¶é‡Œé¢çš„domç»“æ„ï¼Œæ¸²æŸ“å½“å‰é¡µé¢ç»“æ„ã€‚Layoutçš„é€šå¸¸ä¼ å‚éå¸¸ç®€å•ï¼Œå› ä¸ºå®ƒè´Ÿè´£çš„ä»…ä»…åªæœ‰<strong>è´Ÿè´£å½“å‰é¡µé¢çš„å¸ƒå±€</strong>è¿™ä¸€é¡¹å·¥ä½œã€‚</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-comment">// ä¸€èˆ¬è·¯ç”±æ–‡ä»¶å¤¹ä¸‹çš„layout.tsxåªéœ€è¦æ¸²æŸ“childrenå³å¯</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">LayoutProps</span> {
    <span class="hljs-attr">children</span>: <span class="hljs-title class_">React</span>.<span class="hljs-property">ReactNode</span> 
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Layout</span>(<span class="hljs-params">{ children }: LayoutProps</span>) {
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"min-h-screen w-full"</span>&gt;</span>{children}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
}

</code></pre>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-comment">// appé¡¶å±‚æ–‡ä»¶å¤¹çš„layouté™¤äº†childrenï¼Œè¿˜éœ€è¦æ¸²æŸ“htmlå’Œbody</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">RootLayout</span>(<span class="hljs-params">{
  children,
}: {
  children: React.ReactNode;
}</span>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>{children}<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></span>
  );
}
</code></pre>
<p>é€šå¸¸å½“ç”¨æˆ·è®¿é—®é¡µé¢è·¯ç”±ï¼Œnextä¼šå…ˆåŒ¹é…å¯¹åº”æ–‡ä»¶å¤¹ä¸‹é¢çš„page.tsxï¼Œç„¶åå†â€œ<strong>è‡ªä¸‹è€Œä¸Š</strong>â€å¯»æ‰¾Layout.tsxã€‚</p>
<p>ä¾‹å¦‚ç”¨æˆ·è®¿é—®/blogè¿™ä¸ªé¡µé¢çš„æ—¶å€™ï¼Œä¼šå…ˆå¯»æ‰¾é™æ€è·¯ç”±å¯¹åº”çš„æ–‡ä»¶å¤¹blogï¼ŒåŒ¹é…åˆ°<code>app/blog/page.tsx</code>ä¹‹åï¼Œå¦‚æœå½“å‰æ–‡ä»¶å¤¹ä¸­æ²¡æœ‰layoutï¼Œé‚£å°±é€çº§å¾€ä¸Šå¯»æ‰¾layoutï¼Œç›´åˆ°åŒ¹é…åˆ°<code>app/layout.tsx</code>ã€‚</p>
<pre><code class="hljs language-plaintext" lang="plaintext">app/
 â”œâ”€â”€ (marketing)/  --&gt; å¸¦æ‹¬å·ï¼Œæ˜¯è·¯ç”±ç»„ï¼Œç»§ç»­å¾€ä¸‹æ‰¾
 â”‚    â””â”€â”€ page.tsx --&gt; å¯¹åº”è·¯å¾„ "/"
 â”‚
 â”œâ”€â”€ blog/  --&gt; å¯¹åº”è·¯å¾„ "/blog"
 â”‚    â””â”€â”€ page.tsx --&gt; æ‰¾åˆ°ç›®æ ‡ï¼Œä½†æ˜¯å½“å‰æ–‡ä»¶å¤¹é‡Œé¢æ²¡æœ‰layout.tsx
 â”‚
 â””â”€â”€ Layout.tsx  --&gt; å¦‚æœblogä¸Šçº§æ–‡ä»¶å¤¹ä¸­æœ‰layout.tsxï¼Œé‚£å°±ç”¨è¿™ä¸ªlayout.tsxæ¥æ¸²æŸ“blog/page.tsx
</code></pre>
<h2 data-id="heading-1">äºŒã€Pageâ€”â€”é¡µé¢çš„ä¸šåŠ¡å†…å®¹</h2>
<p>Layout.tsxè´Ÿè´£å½“å‰é¡µé¢çš„ç»“æ„ï¼Œé€šå¸¸é‡Œé¢çš„ä»£ç éƒ½æ˜¯æ²¡æœ‰å¤æ‚ä¸šåŠ¡é€»è¾‘çš„é™æ€çº¯ç»„ä»¶ï¼Œæ‰¿æ‹…ä¸šåŠ¡é€»è¾‘çš„éƒ½æ˜¯Page.tsxã€‚</p>
<p>Pageæœ‰paramså’ŒsearchParamsä¸¤ä¸ªé»˜è®¤å‚æ•°ã€‚<code>params</code>ç”¨äºè·å– <strong>åŠ¨æ€è·¯ç”±</strong>ï¼ˆDynamic Routesï¼‰ä¸­çš„å‚æ•°ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½ çš„æ–‡ä»¶è·¯å¾„æ˜¯ <code>app/blog/[slug]/page.tsx</code>ï¼Œé‚£ä¹ˆ <code>params</code> å°±ä¼šåŒ…å« <code>slug</code>ã€‚
<code>searchParams</code>ç”¨äºè·å– URL ä¸­ <strong>é—®å·åé¢çš„æŸ¥è¯¢å‚æ•°</strong>ï¼ˆQuery Parametersï¼‰ã€‚ä¾‹å¦‚ <code>?query=nextjs&amp;page=1</code>ï¼š</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">const</span> <span class="hljs-title function_">Page</span> = <span class="hljs-keyword">async</span>(<span class="hljs-params">{
    params,
    searchParams
}:{
    params:<span class="hljs-built_in">Promise</span>&lt;{slug:<span class="hljs-built_in">string</span>}&gt;, 
    searchParams:<span class="hljs-built_in">Promise</span>&lt;{[key: <span class="hljs-built_in">string</span>]:<span class="hljs-built_in">string</span> | <span class="hljs-built_in">string</span>[] | <span class="hljs-literal">undefined</span>}&gt;
}</span>) =&gt;{
    <span class="hljs-keyword">const</span> {slug} = <span class="hljs-keyword">await</span> params;
    <span class="hljs-keyword">const</span> urlParams = <span class="hljs-keyword">await</span> searchParams;
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(slug, urlParams);
    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">Nav</span> /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Hello, I'm the blog page<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
    <span class="hljs-tag">&lt;/&gt;</span></span>
}
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">Page</span>
</code></pre>
<p>å½“è®¿é—®<code>/blog/a?query=11111&amp;query=222222&amp;b=5</code>æ—¶ï¼Œconsoleä¼šè¾“å‡ºï¼š
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/05ea5fc9b608487c8f9d8d9c687458fd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUmVkSGVhcnRXV1c=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767441343&amp;x-signature=5IbaBvIimCN51cIP3rK6TRdi1fs%3D" alt="image.png" loading="lazy"/>
å…¶ä¸­<code>['a']</code>æ˜¯åªæœ‰è®¿é—®åŠ¨æ€è·¯ç”±æ‰ä¼šæœ‰è¾“å‡ºï¼Œå¦‚æœè®¿é—®ä¸€ä¸ªé™æ€è·¯ç”±åœ°å€ï¼Œparamsè¾“å‡ºå°±æ˜¯undefinedï¼ŒsearchParamsåˆ™ä¼šä»¥é”®å€¼å¯¹çš„å½¢å¼å±•ç¤ºå‡ºæ¥</p>
<h2 data-id="heading-2">ä¸‰ã€è·¯ç”±ç»„åˆ’åˆ†å¤šæ ¹æ¨¡æ¿</h2>
<p>nextjsé€šè¿‡<code>(folder)</code>çš„æ–¹å¼åˆ’åˆ†è·¯ç”±ç»„ï¼Œè·¯ç”±ç»„æœ¬èº«å¹¶ä¸ä¼šè¢«nextè¯†åˆ«ä¸ºè·¯ç”±ï¼Œæ¯”å¦‚æ–‡ä»¶ç»“æ„å¦‚æœæ˜¯<code>/app/(marketing)/blog/page.tsx</code>ï¼Œé‚£ä¹ˆåªéœ€è¦è®¿é—®<code>/blog</code>å°±èƒ½è®¿é—®åˆ°è¿™ä¸ªpage.tsxã€‚<br/>è·¯ç”±ç»„è™½ç„¶ä¸ä¼šè¢«è¯†åˆ«ä¸ºè·¯ç”±ï¼Œä½†ç”±äºä¸Šé¢æåˆ°çš„pageâ€œ<strong>ä»å†…è€Œå¤–</strong>â€åŒ¹é…layoutæ¸²æŸ“çš„æœºåˆ¶ï¼Œä¸åŒçš„æ¨¡å—éƒ½å¯ä»¥æœ‰è‡ªå·±çš„rootlayoutï¼š</p>
<pre><code class="hljs language-plaintext" lang="plaintext">app/
 â”œâ”€â”€ (marketing)/  --&gt; marketingæ¨¡å—å¯¹åº”è·¯ç”±ç»„
 â”‚    â””â”€â”€ page.tsx --&gt; å¯¹åº”è·¯å¾„ "/"
 |    â””â”€â”€ layout.tsx --&gt; marketingæ¨¡å—ä¸‹æ‰€æœ‰pageçš„æ ¹layout 
 |
 â”œâ”€â”€ (dashboard)/  --&gt; 
 â”‚    â””â”€â”€ dashboard/
 â”‚         â””â”€â”€ page.tsx --&gt; å¯¹åº”è·¯å¾„ "/dashboard"
 â”‚         â””â”€â”€ layout.tsx --&gt; dashboardæ¨¡å—ä¸‹æ‰€æœ‰pageçš„æ ¹layout
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[é‚£äº›è®©ä½  debug åˆ°å‡Œæ™¨çš„é™·é˜±ï¼Œæˆ‘å¸®ä½ è¸©å¹³äº†ï¼šReact Hooks é¿å‘æŒ‡å—]]></title>    <link>https://juejin.cn/post/7588069469517594665</link>    <guid>https://juejin.cn/post/7588069469517594665</guid>    <pubDate>2025-12-27T12:03:25.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588069469517594665" data-draft-id="7587062584165384230" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="é‚£äº›è®©ä½  debug åˆ°å‡Œæ™¨çš„é™·é˜±ï¼Œæˆ‘å¸®ä½ è¸©å¹³äº†ï¼šReact Hooks é¿å‘æŒ‡å—"/> <meta itemprop="keywords" content="React.js,å‰ç«¯,é¢è¯•"/> <meta itemprop="datePublished" content="2025-12-27T12:03:25.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é£æ­¢ä½•å®‰å•Š"/> <meta itemprop="url" content="https://juejin.cn/user/2517239724512420"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            é‚£äº›è®©ä½  debug åˆ°å‡Œæ™¨çš„é™·é˜±ï¼Œæˆ‘å¸®ä½ è¸©å¹³äº†ï¼šReact Hooks é¿å‘æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2517239724512420/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é£æ­¢ä½•å®‰å•Š
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-27T12:03:25.000Z" title="Sat Dec 27 2025 12:03:25 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#444;background-image:linear-gradient(90deg,rgba(59,59,59,.1) 3%,transparent 0),linear-gradient(1turn,rgba(122,120,121,.1) 3%,transparent 0);background-size:30px 30px;background-position:50%;letter-spacing:1px;word-spacing:1px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{position:relative;margin-top:34px;margin-bottom:16px;font-weight:700;line-height:1.3;cursor:text;color:#444;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body h1{font-size:41px;margin-bottom:34px;line-height:1.5}.markdown-body h1:before{content:""}.markdown-body h2{font-size:30px;padding-left:.4em;border-left:.4em solid #5e5e5e;border-bottom:1px solid #444}.markdown-body h2:after{content:"ğŸ•›";position:absolute;top:0;right:0;transition:all;animation:rotate 10s linear infinite}@keyframes rotate{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}.markdown-body h3{border-left:.4em solid #8d8d8d;font-size:24px;padding-left:.4em}.markdown-body h4{font-size:20px}.markdown-body h5{font-size:16px}.markdown-body h6{font-size:14px}.markdown-body blockquote,.markdown-body dl,.markdown-body ol,.markdown-body p,.markdown-body table,.markdown-body ul{margin:.8em 0}.markdown-body strong{font-weight:1000;position:relative;color:#444;padding:0 3px}.markdown-body em{font-weight:inherit}.markdown-body a{box-sizing:border-box;color:grey;position:relative}.markdown-body a:before{position:absolute;box-sizing:border-box;content:"Go -&gt;";left:0;width:100%;max-width:0;color:#fff;background-color:hsla(0,0%,50.2%,.8);white-space:nowrap;transition:.2s ease;pointer-events:none;overflow:hidden}.markdown-body a:after{content:"";position:absolute;bottom:0;left:0;width:100%;height:1px;background-color:grey}.markdown-body a:active:before,.markdown-body a:hover:before{max-width:100%;padding-left:8px;border-radius:5px}.markdown-body hr{position:relative;width:100%;height:1px;border:none;margin-top:36px;margin-bottom:36px;background:linear-gradient(90deg,grey,#f1f1f1,#444,#444,#f1f1f1,grey);overflow:visible}.markdown-body ol,.markdown-body ul{padding-left:32px}.markdown-body ol li,.markdown-body ul li{margin-bottom:6px;list-style:inherit}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol{counter-reset:my-counter}.markdown-body ol&gt;li{padding-left:6px;list-style:none;counter-increment:my-counter;position:relative}.markdown-body ol&gt;li:before{position:absolute;left:-1.5em;content:counter(my-counter);font-weight:700}.markdown-body ol&gt;li:first-child:before{content:"1ï¸âƒ£"}.markdown-body ol&gt;li:nth-child(2):before{content:"2ï¸âƒ£"}.markdown-body ol&gt;li:nth-child(3):before{content:"3ï¸âƒ£"}.markdown-body ol&gt;li:nth-child(4):before{content:"4ï¸âƒ£"}.markdown-body ol&gt;li:nth-child(5):before{content:"5ï¸âƒ£"}.markdown-body ol&gt;li:nth-child(6):before{content:"6ï¸âƒ£"}.markdown-body ol&gt;li:nth-child(7):before{content:"7ï¸âƒ£"}.markdown-body ol&gt;li:nth-child(8):before{content:"8ï¸âƒ£"}.markdown-body ol&gt;li:nth-child(9):before{content:"9ï¸âƒ£"}.markdown-body ol&gt;li:nth-child(10):before{content:"ğŸ”Ÿ"}.markdown-body ul&gt;li{list-style:none;position:relative}.markdown-body ul&gt;li:before{z-index:10;position:absolute;left:-1.57em;content:"ğŸ”¹";margin-right:12px}.markdown-body ul&gt;li input{margin-left:8px!important}.markdown-body blockquote{position:relative;background-color:#d3d3d3;padding:5px 10px;border-left:.2em solid #000;border-radius:3px;transition:all .8s ease}.markdown-body blockquote:hover{opacity:.7}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:rgba(69,69,77,.8);color:#fff;font-size:.87em;padding:.07em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;border-radius:7px;overflow:hidden}.markdown-body pre:before{z-index:10;position:absolute;top:14px;left:14px;width:12px;height:12px;border-radius:50%;background:#fc625d;-webkit-box-shadow:20px 0 #fdbc40,40px 0 #35cd4b;box-shadow:20px 0 #fdbc40,40px 0 #35cd4b;content:" "}.markdown-body pre:after{z-index:9;content:"";position:absolute;width:100%;height:40px;top:0;background-color:#1a1a1a}.markdown-body pre&gt;code{display:block;font-family:Menlo,Monaco,Consolas,Courier New,monospace;word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#171717;color:#bababa;font-size:14px;padding:40px 20px 20px}.markdown-body del{color:grey}.markdown-body table{margin-bottom:1.25rem;border-collapse:collapse}.markdown-body table td,.markdown-body table th{margin:0;padding:8px;line-height:20px;vertical-align:middle;border:1px solid #ddd}.markdown-body table thead,.markdown-body table tr:nth-child(2n){background-color:#fcfcfc}.markdown-body table thead th,.markdown-body table tr:nth-child(2n) th{font-weight:700;vertical-align:middle;color:#444}.markdown-body table tbody tr td{font-weight:400;color:#444}.markdown-body table tbody tr:hover{background-color:#d3d3d3}.markdown-body table tbody tr:hover td{color:#fff}.markdown-body img{max-width:100%;margin:0 12px}@media (max-width:720px){.markdown-body h1{font-size:32.8px}.markdown-body h2{font-size:24px}.markdown-body h3{font-size:19.2px}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:12.8px}}</style><style data-highlight="" data-highlight-key="hybrid">.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#1d1f21}.hljs::selection,.hljs span::selection{background:#373b41}.hljs::-moz-selection,.hljs span::-moz-selection{background:#373b41}.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#c5c8c6}.hljs-name,.hljs-title{color:#f0c674}.hljs-comment,.hljs-meta,.hljs-meta .hljs-keyword{color:#707880}.hljs-deletion,.hljs-link,.hljs-literal,.hljs-number,.hljs-symbol{color:#c66}.hljs-addition,.hljs-doctag,.hljs-regexp,.hljs-selector-attr,.hljs-selector-pseudo,.hljs-string{color:#b5bd68}.hljs-attribute,.hljs-code,.hljs-selector-id{color:#b294bb}.hljs-bullet,.hljs-keyword,.hljs-selector-tag,.hljs-tag{color:#81a2be}.hljs-subst,.hljs-template-tag,.hljs-template-variable,.hljs-variable{color:#8abeb7}.hljs-built_in,.hljs-builtin-name,.hljs-quote,.hljs-section,.hljs-selector-class,.hljs-type{color:#de935f}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>åœ¨ <strong>React å‡½æ•°ç»„ä»¶</strong>çš„ä¸–ç•Œé‡Œï¼Œ<code>Hooks</code> æ— ç–‘æ˜¯ <strong>â€œæ•ˆç‡ç¥å™¨â€</strong>â€”â€” å®ƒç”¨æç®€çš„ API å°è£…äº†çŠ¶æ€ç®¡ç†ä¸ç”Ÿå‘½å‘¨æœŸé€»è¾‘ï¼Œè®©æˆ‘ä»¬å‘Šåˆ«äº†ç±»ç»„ä»¶çš„ç¹çã€‚ä½†å°±åƒç«¥è¯é‡Œè—åœ¨ç³–æœå±‹åçš„é™·é˜±ï¼Œè¿™äº›çœ‹ä¼¼å‹å¥½çš„ API èƒŒåï¼Œè—ç€ä¸å°‘å›  <strong>â€œé—­åŒ…ç‰¹æ€§â€â€œä¾èµ–é€»è¾‘â€â€œå¼‚æ­¥å¤„ç†â€</strong> å¼•å‘çš„<strong>å‘</strong>ã€‚å¾ˆå¤šå¼€å‘è€…åˆšä¸Šæ‰‹æ—¶ï¼Œæ€»åœ¨ â€œå†™å¾—é€šâ€ å’Œ â€œå†™å¾—å¯¹â€ ä¹‹é—´åå¤è¸©å‘ï¼Œ<code>debug</code> åˆ°æ€€ç–‘äººç”Ÿã€‚</p>
<p>æˆ‘åœ¨åˆšå…¥æ‰‹æ—¶è¸©äº†ä¸å°‘ <strong>â€œå‘â€</strong>ï¼Œæ‰€ä»¥æˆ‘å°†ç”¨æˆ‘çš„äº²èº«ç»å†å¸®ä½ ä»¬å¡«å¹³ã€‚æœ¬æ–‡å…ˆå¿«é€Ÿæ¢³ç† <code>Hooks</code> æ ¸å¿ƒåŸºç¡€ï¼Œå†èšç„¦é‚£äº›æœ€å®¹æ˜“ä¸­æ‹›çš„ â€œé™·é˜±â€ï¼Œç”¨ä»£ç æ¡ˆä¾‹æ‹†è§£å‘å› ã€ç»™å‡ºé¿å‘æ–¹æ¡ˆï¼Œå¸®ä½ é¿å¼€ Hooks è·¯ä¸Šçš„ <strong>â€œè¿ç¯é›·â€</strong>!</p>
<h3 data-id="heading-1">ä¸€ã€å…ˆæ­ä¸ª Hooks å°èˆå°</h3>
<p><code>React Hooks</code> å°±åƒç»™å‡½æ•°ç»„ä»¶å¼€äº†æŒ‚ â€”â€” ä¸ç”¨å†™ç±»å°±èƒ½æ‹¥æœ‰çŠ¶æ€å’Œç”Ÿå‘½å‘¨æœŸï¼Œå…ˆæ¥å¿«é€Ÿå›é¡¾ä¸‹ <strong>â€œåŸºç¡€ä¸‰ä»¶å¥—â€</strong>ï¼š</p>
<h4 data-id="heading-2">1. useState:çŠ¶æ€ç®¡ç†çš„ â€œå…¥é—¨é’¥åŒ™â€</h4>
<p>å®ƒèƒ½æ¥æ”¶<strong>å€¼</strong>æˆ–<strong>åŒæ­¥å‡½æ•°</strong>ï¼ˆæ³¨æ„ï¼šå¼‚æ­¥ä»£ç ä¼šç¿»è½¦ï¼ï¼‰ï¼Œè¿”å› â€œçŠ¶æ€ + ä¿®æ”¹çŠ¶æ€çš„æ–¹æ³•â€ã€‚ä¿®æ”¹çŠ¶æ€æ—¶ï¼Œ<code>setXxx</code>Â æ—¢å¯ä»¥ç›´æ¥ä¼ å€¼ï¼Œä¹Ÿèƒ½ä¼ ä¸€ä¸ª â€œæ¥æ”¶æ—§çŠ¶æ€ã€è¿”å›æ–°çŠ¶æ€â€ çš„å‡½æ•°ï¼ˆè¿™ä¸ªç»†èŠ‚æ˜¯é¿å‘å…³é”®ï¼ï¼‰ã€‚</p>
<p>æ¯”å¦‚<code>State.jsx</code>é‡Œçš„ä¾‹å­ï¼š</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">import</span> { useState } <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>;
<span class="hljs-keyword">function</span> <span class="hljs-title function_">getDate</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =&gt;</span> {
        <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> { <span class="hljs-title function_">resolve</span>(<span class="hljs-number">100</span>) }, <span class="hljs-number">1000</span>)
    })
}
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">State</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// âŒ é”™è¯¯ç¤ºèŒƒï¼šuseStateä¸æ”¯æŒå¼‚æ­¥å‡½æ•°</span>
    <span class="hljs-comment">// const [num, setNum] = useState(async () =&gt; {</span>
    <span class="hljs-comment">//   const res = await getDate();</span>
    <span class="hljs-comment">//   return res;</span>
    <span class="hljs-comment">// });</span>

    <span class="hljs-comment">// âœ… æ­£ç¡®ï¼šåŒæ­¥å‡½æ•°åˆå§‹åŒ–çŠ¶æ€</span>
    <span class="hljs-keyword">const</span> [num, setNum] = <span class="hljs-title function_">useState</span>(<span class="hljs-function">() =&gt;</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;
    });

    <span class="hljs-keyword">function</span> <span class="hljs-title function_">add</span>(<span class="hljs-params"/>) {
        <span class="hljs-comment">// âœ… ç”¨å‡½æ•°å½¢å¼è·å–â€œä¿®æ”¹å‰çš„æ—§çŠ¶æ€â€</span>
        <span class="hljs-title function_">setNum</span>(<span class="hljs-function">(<span class="hljs-params">prev</span>) =&gt;</span> {
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(prev); <span class="hljs-comment">// ç‚¹å‡»æ—¶æ‰“å°å½“å‰numï¼ˆä¿®æ”¹å‰ï¼‰</span>
            <span class="hljs-keyword">return</span> prev + <span class="hljs-number">1</span>;
        })
    }
    <span class="hljs-keyword">return</span> (
        <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{add}</span>&gt;</span>{num}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
    )
}
</code></pre>
<h4 data-id="heading-3">2. useEffectï¼šç”Ÿå‘½å‘¨æœŸçš„ â€œä¼ªè£…è€…â€</h4>
<p>å®ƒåƒä¸ª â€œå¤šé¢æ‰‹â€ï¼Œèƒ½æ¨¡æ‹Ÿç»„ä»¶çš„ â€œæŒ‚è½½ã€æ›´æ–°ã€å¸è½½â€ï¼Œä½†ç”¨æ³•ä¸å¯¹å°±ä¼šè¸©å‘ï¼š</p>
<ul>
<li><code>useEffect(() =&gt; {})</code>ï¼šç»„ä»¶<strong>åˆæ¬¡åŠ è½½ + æ¯æ¬¡é‡æ¸²æŸ“</strong>éƒ½è§¦å‘</li>
<li><code>useEffect(() =&gt; {}, [])</code>ï¼šåªåœ¨<strong>åˆæ¬¡åŠ è½½</strong>æ—¶è§¦å‘</li>
<li><code>useEffect(() =&gt; {}, [x])</code>ï¼šåˆæ¬¡åŠ è½½ +Â <code>x</code>Â å˜åŒ–æ—¶è§¦å‘</li>
<li>è¿”å›çš„å‡½æ•°ï¼šç»„ä»¶<strong>å¸è½½å‰</strong>æ‰§è¡Œï¼ˆç”¨æ¥åšæ¸…ç†ï¼Œæ¯”å¦‚æ¸…å®šæ—¶å™¨ï¼‰</li>
</ul>
<p>çœ‹<code>Effect.jsx</code>é‡Œçš„å®šæ—¶å™¨ä¾‹å­ï¼š</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">import</span> { useState, useEffect } <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>;
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">getData</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> data = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =&gt;</span> {
        <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> { <span class="hljs-title function_">resolve</span>(<span class="hljs-number">100</span>) }, <span class="hljs-number">1000</span>)
    })
    <span class="hljs-keyword">return</span> data;
}
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Effect</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> [num, setNum] = <span class="hljs-title function_">useState</span>(<span class="hljs-function">() =&gt;</span> { <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>; });
    <span class="hljs-keyword">const</span> [age, setAge] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">18</span>);

    <span class="hljs-comment">// ğŸŒ° ä¾èµ–é¡¹çš„å‘ï¼ˆåé¢ç»†è¯´ï¼‰</span>
    <span class="hljs-comment">// useEffect(() =&gt; {</span>
    <span class="hljs-comment">//   getData().then((data) =&gt; {</span>
    <span class="hljs-comment">//     console.log(data);</span>
    <span class="hljs-comment">//     setNum(data);</span>
    <span class="hljs-comment">//   })</span>
    <span class="hljs-comment">// }, [age]) // ä¾èµ–ageï¼Œä½†å®é™…ä¿®æ”¹çš„æ˜¯numâ€¦</span>

    <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
        <span class="hljs-comment">// å¯åŠ¨å®šæ—¶å™¨</span>
        <span class="hljs-keyword">const</span> timer = <span class="hljs-built_in">setInterval</span>(<span class="hljs-function">() =&gt;</span> {
            <span class="hljs-comment">// setNum(num + 1); // âŒ è¿™é‡Œæœ‰å‘ï¼åé¢è®²</span>
        }, <span class="hljs-number">1000</span>)
        <span class="hljs-comment">// ç»„ä»¶å¸è½½å‰æ¸…ç†å®šæ—¶å™¨ï¼ˆé¿å…å†…å­˜æ³„æ¼ï¼‰</span>
        <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> {
            <span class="hljs-built_in">clearInterval</span>(timer);
        }
    })

    <span class="hljs-keyword">function</span> <span class="hljs-title function_">add</span>(<span class="hljs-params"/>) {
        <span class="hljs-title function_">setNum</span>(<span class="hljs-function">(<span class="hljs-params">prev</span>) =&gt;</span> {
            <span class="hljs-keyword">return</span> prev + <span class="hljs-number">1</span>;
        })
    }
    <span class="hljs-keyword">return</span> (
        <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{add}</span>&gt;</span>{num}---{age}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
    )
}
</code></pre>
<h4 data-id="heading-4">3. useReducerï¼šå¤æ‚çŠ¶æ€çš„ â€œè°ƒåº¦å‘˜â€</h4>
<p>å½“çŠ¶æ€é€»è¾‘æ¯”è¾ƒå¤æ‚æ—¶ï¼Œ<code>useReducer</code>æ¯”<code>useState</code>æ›´æ¸…æ™° â€”â€” å®ƒæŠŠ â€œçŠ¶æ€ä¿®æ”¹é€»è¾‘â€ æŠ½æˆ<code>reducer</code>å‡½æ•°ï¼Œé€šè¿‡<code>dispatch</code>è§¦å‘ï¼š</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">import</span> { useReducer } <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>
<span class="hljs-comment">// çŠ¶æ€ä¿®æ”¹çš„â€œè§„åˆ™å‡½æ•°â€</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">reducer</span>(<span class="hljs-params">state, action</span>) {
    <span class="hljs-keyword">switch</span>(action.<span class="hljs-property">type</span>) {
        <span class="hljs-keyword">case</span> <span class="hljs-string">'add'</span>:
            <span class="hljs-keyword">return</span> state + action.<span class="hljs-property">num</span>;
        <span class="hljs-keyword">case</span> <span class="hljs-string">'minus'</span>:
            <span class="hljs-keyword">return</span> state - action.<span class="hljs-property">num</span>;
        <span class="hljs-attr">default</span>:
            <span class="hljs-keyword">return</span> state;
    }
}
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Trap</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// åˆå§‹åŒ–çŠ¶æ€ä¸º0ï¼Œdispatchç”¨æ¥è§¦å‘reducer</span>
    <span class="hljs-keyword">const</span> [count, dispatch] = <span class="hljs-title function_">useReducer</span>(reducer, <span class="hljs-number">0</span>);
    
    <span class="hljs-comment">// è§¦å‘â€œaddâ€æ“ä½œï¼Œä¼ å‚num=1</span>
    <span class="hljs-title function_">dispatch</span>({<span class="hljs-attr">type</span>: <span class="hljs-string">'add'</span>, <span class="hljs-attr">num</span>: <span class="hljs-number">1</span>});
    
    <span class="hljs-keyword">return</span> (
        <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>{count}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
    )
}
</code></pre>
<p>ä»¥ä¸Šæˆ‘ä»¬å°±å¤§è‡´å›é¡¾äº†<code>hooks</code>çš„ä¸€äº›åŸºç¡€çŸ¥è¯†ï¼Œå¦‚æœæƒ³çœ‹æ›´å…·ä½“çš„è¯·çœ‹æˆ‘çš„æ–‡ç« ï¼š</p>
<blockquote>
<p><a href="https://juejin.cn/post/7584370833703911439" target="_blank" title="https://juejin.cn/post/7584370833703911439">ä¸€åœºç»„ä»¶çš„è¿›åŒ–è„±å£ç§€â€”â€”Reactä» â€œç±»â€ åˆ° â€œhooksâ€ çš„ â€œæ”¹å¤´æ¢é¢â€</a></p>
</blockquote>
<h3 data-id="heading-5">äºŒã€é‡ç‚¹æ¥äº†ï¼šHooks çš„ â€œé™·é˜±â€</h3>
<p>å‰é¢éƒ½æ˜¯é“ºå«ï¼Œ<strong>è¿™äº›çœ‹ä¼¼ç®€å•çš„ Hooksï¼Œè—ç€èƒ½è®©ä½  debug åˆ°å¤©äº®çš„å‘</strong>â€”â€” æ¥ä¸‹æ¥é€ä¸ªæ‹†è§£ï¼š</p>
<h4 data-id="heading-6">é™·é˜± 1ï¼š useState çš„ â€œå¼‚æ­¥æ›´æ–°â€+â€œé—­åŒ…é™·é˜±â€</h4>
<p>çœ‹<code>Effect.jsx</code>é‡Œçš„å®šæ—¶å™¨ï¼š</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> timer = <span class="hljs-built_in">setInterval</span>(<span class="hljs-function">() =&gt;</span> {
        <span class="hljs-title function_">setNum</span>(num + <span class="hljs-number">1</span>); <span class="hljs-comment">// âŒ è¿™é‡Œæœ‰é—®é¢˜ï¼</span>
    }, <span class="hljs-number">1000</span>)
    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">clearInterval</span>(timer);
})
</code></pre>
<p><strong>å‘åœ¨å“ªï¼Ÿ</strong></p>
<p><code>useEffect</code>é»˜è®¤æ²¡æœ‰ä¾èµ–é¡¹ï¼Œä¼šåœ¨ç»„ä»¶æ¯æ¬¡é‡æ¸²æŸ“æ—¶é‡æ–°æ‰§è¡Œ â€”â€” ä½†å®šæ—¶å™¨é‡Œçš„<code>num</code>æ˜¯ â€œé—­åŒ…æ•è·çš„æ—§å€¼â€ï¼Œå¯¼è‡´<code>num + 1</code>æ°¸è¿œåªåœ¨åˆå§‹å€¼<code>1</code>çš„åŸºç¡€ä¸ŠåŠ ï¼Œé¡µé¢ä¸ä¼šæ›´æ–°ã€‚</p>
<p><strong>æ€ä¹ˆå¡«å‘ï¼Ÿ</strong></p>
<p>ç”¨<code>setNum</code>çš„ â€œå‡½æ•°å½¢å¼â€ï¼Œå®ƒèƒ½æ‹¿åˆ°æœ€æ–°çš„æ—§çŠ¶æ€ï¼š</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-title function_">setNum</span>(<span class="hljs-function">(<span class="hljs-params">prev</span>) =&gt;</span> prev + <span class="hljs-number">1</span>); <span class="hljs-comment">// âœ… ä¸ç®¡é—­åŒ…ï¼Œç›´æ¥æ‹¿æœ€æ–°prev</span>
</code></pre>
<h4 data-id="heading-7">é™·é˜± 2ï¼šuseEffect çš„ â€œä¾èµ–é¡¹è¿·è·¯â€</h4>
<p>å†çœ‹<code>Effect.jsx</code>é‡Œè¢«æ³¨é‡Šçš„ä»£ç ï¼š</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-title function_">getData</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {
        <span class="hljs-title function_">setNum</span>(data); <span class="hljs-comment">// ä¿®æ”¹num</span>
    })
}, [age]) <span class="hljs-comment">// âŒ ä¾èµ–é¡¹å†™äº†ageï¼Œä½†å®é™…æ²¡ç”¨åˆ°age</span>
</code></pre>
<p><strong>å‘åœ¨å“ªï¼Ÿ</strong></p>
<p><code>useEffect</code>çš„ä¾èµ–é¡¹æ•°ç»„å¿…é¡»åŒ…å« â€œå›è°ƒé‡Œç”¨åˆ°çš„æ‰€æœ‰å¤–éƒ¨å˜é‡â€â€”â€” è¿™é‡Œå›è°ƒé‡Œæ²¡ç”¨åˆ°<code>age</code>ï¼Œå´æŠŠ<code>age</code>å½“ä¾èµ–ï¼Œä¼šå¯¼è‡´<code>age</code>å˜åŒ–æ—¶é‡å¤è¯·æ±‚ï¼›åè¿‡æ¥ï¼Œå¦‚æœç”¨åˆ°äº†æŸä¸ªå˜é‡å´æ²¡å†™è¿›ä¾èµ–ï¼Œå°±ä¼šæ‹¿åˆ°æ—§å€¼ <strong>ï¼ˆé—­åŒ…é™·é˜±ï¼‰</strong>ã€‚</p>
<p><strong>æ€ä¹ˆå¡«å‘ï¼Ÿ</strong></p>
<p>ä¾èµ–é¡¹è¦ <strong>â€œè¯šå®â€</strong>ï¼šç”¨åˆ°å•¥å°±å†™å•¥ï¼Œæ²¡ç”¨åˆ°å°±åˆ«å†™ã€‚æ¯”å¦‚ä¸Šé¢çš„ä»£ç ï¼Œè¦ä¹ˆæŠŠ<code>age</code>ä»ä¾èµ–é‡Œåˆ æ‰ï¼Œè¦ä¹ˆåœ¨å›è°ƒé‡ŒçœŸæ­£ç”¨åˆ°<code>age</code>ã€‚</p>
<h4 data-id="heading-8">é™·é˜± 3ï¼šuseReducer çš„ â€œdispatch ä¸æ˜¯ä¸‡èƒ½è¯â€</h4>
<p>çœ‹<code>Trap.jsx</code>é‡Œçš„å®šæ—¶å™¨æ³¨é‡Šï¼š</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-built_in">setInterval</span>(<span class="hljs-function">() =&gt;</span> {
        <span class="hljs-comment">// console.log(count); // âŒ æ°¸è¿œæ‰“å°åˆå§‹å€¼0</span>
        <span class="hljs-comment">// setCount(count + 1); // åŒæ ·çš„é—­åŒ…å‘</span>
        <span class="hljs-comment">// setCount((prev) =&gt; prev + 1) // âœ… ç”¨å‡½æ•°å½¢å¼æ‰å¯¹</span>
    }, <span class="hljs-number">1000</span>)
}, [])
</code></pre>
<p><strong>å‘åœ¨å“ªï¼Ÿ</strong></p>
<p>å“ªæ€•ç”¨äº†<code>useReducer</code>ï¼Œå¦‚æœåœ¨<code>useEffect</code>ï¼ˆä¾èµ–ä¸ºç©ºï¼‰é‡Œç”¨<code>count</code>ï¼Œè¿˜æ˜¯ä¼šå› ä¸ºé—­åŒ…æ•è·æ—§å€¼ï¼Œå¯¼è‡´æ‹¿åˆ°çš„<code>count</code>æ°¸è¿œæ˜¯åˆå§‹å€¼ã€‚</p>
<p><strong>æ€ä¹ˆå¡«å‘ï¼Ÿ</strong></p>
<p>å’Œ<code>useState</code>ä¸€æ ·ï¼Œä¿®æ”¹çŠ¶æ€æ—¶ç”¨ â€œå‡½æ•°å½¢å¼â€ï¼›æˆ–è€…æŠŠ<code>count</code>åŠ å…¥<code>useEffect</code>çš„ä¾èµ–é¡¹ï¼ˆä½†è¦æ³¨æ„é‡å¤è§¦å‘çš„é—®é¢˜ï¼‰ã€‚</p>
<h4 data-id="heading-9">é™·é˜± 4ï¼šuseState çš„ â€œå¼‚æ­¥åˆå§‹åŒ–â€</h4>
<p>çœ‹<code>State.jsx</code>é‡Œçš„æ³¨é‡Šï¼š</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-comment">// âŒ useStateä¸æ”¯æŒå¼‚æ­¥å‡½æ•°åˆå§‹åŒ–</span>
<span class="hljs-comment">// const [num, setNum] = useState(async () =&gt; {</span>
<span class="hljs-comment">//     const res = await getDate();</span>
<span class="hljs-comment">//     return res;</span>
<span class="hljs-comment">// });</span>
</code></pre>
<p><strong>å‘åœ¨å“ªï¼Ÿ</strong></p>
<p><code>useState</code>çš„åˆå§‹åŒ–å‡½æ•°å¿…é¡»æ˜¯åŒæ­¥çš„ â€”â€” å¼‚æ­¥ä»£ç ä¼šç›´æ¥è¿”å›ä¸€ä¸ª<code>Promise</code>ï¼Œè€Œä¸æ˜¯ä½ æƒ³è¦çš„ç»“æœã€‚</p>
<p><strong>æ€ä¹ˆå¡«å‘ï¼Ÿ</strong></p>
<p>æŠŠå¼‚æ­¥åˆå§‹åŒ–é€»è¾‘æ”¾åˆ°<code>useEffect</code>é‡Œï¼š</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">const</span> [num, setNum] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>);
<span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-title function_">getDate</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> <span class="hljs-title function_">setNum</span>(res));
}, [])
</code></pre>
<h3 data-id="heading-10">ä¸‰ã€é¿å‘æ€»ç»“ï¼š Hooks çš„ â€œç”Ÿå­˜æ³•åˆ™â€</h3>
<ol>
<li><strong>useState ä¿®æ”¹çŠ¶æ€ï¼Œä¼˜å…ˆç”¨å‡½æ•°å½¢å¼</strong>ï¼š<code>setXxx(prev =&gt; prev + 1)</code>ï¼Œé¿å…é—­åŒ…æ—§å€¼ã€‚</li>
<li><strong>useEffect ä¾èµ–é¡¹è¦ â€œå®Œæ•´ä¸”è¯šå®â€</strong> ï¼šå›è°ƒé‡Œç”¨åˆ°çš„å˜é‡ï¼Œå¿…é¡»å†™è¿›ä¾èµ–æ•°ç»„ï¼›æ²¡ç”¨åˆ°çš„ï¼Œåˆ«çå†™ã€‚</li>
<li><strong>å¼‚æ­¥é€»è¾‘åˆ«å¾€ useState åˆå§‹åŒ–é‡Œå¡</strong>ï¼šäº¤ç»™<code>useEffect</code>ï¼ˆä¾èµ–ä¸ºç©ºï¼‰æ¥åšã€‚</li>
<li><strong>å®šæ—¶å™¨ / è®¢é˜…è¦è®°å¾—æ¸…ç†</strong>ï¼šåœ¨<code>useEffect</code>çš„è¿”å›å‡½æ•°é‡Œåšå¸è½½å‰çš„æ¸…ç†ï¼ˆæ¯”å¦‚æ¸…å®šæ—¶å™¨ï¼‰ã€‚</li>
</ol>
<h2 data-id="heading-11">ç»“è¯­</h2>
<p><code>Hooks</code> çš„é™·é˜±ï¼Œæœ¬è´¨ä¸Šå¤§å¤šæ˜¯å¯¹ <strong>â€œé—­åŒ…â€ â€œReact æ¸²æŸ“æœºåˆ¶â€ å’Œ â€œHooks è®¾è®¡è§„åˆ™â€</strong> ç†è§£ä¸é€å½»çš„ç»“æœã€‚<strong>æ²¡æœ‰ç»å¯¹ â€œä¸‡èƒ½â€ çš„ APIï¼Œåªæœ‰ â€œç”¨å¯¹åœºæ™¯â€ çš„ç”¨æ³•</strong> â€”â€” æ¯”å¦‚ useState çš„å‡½æ•°å¼æ›´æ–°ã€useEffect çš„ä¾èµ–é¡¹è§„èŒƒï¼Œè¿™äº›çœ‹ä¼¼ç»†èŠ‚çš„ç‚¹ï¼Œæ°æ°æ˜¯é¿å¼€é™·é˜±çš„å…³é”®ã€‚å¸Œæœ›æœ¬æ–‡çš„æ¡ˆä¾‹èƒ½å¸®ä½ è·³å‡º â€œè¸©å‘ - debug - å†è¸©å‘â€ çš„å¾ªç¯ï¼Œåœ¨ä½¿ç”¨ Hooks æ—¶æ›´ä»å®¹ã€æ›´ç²¾å‡†ã€‚</p>
<p>è®°ä½:</p>
<blockquote>
<p>å¥½çš„ä»£ç <strong>ä¸æ˜¯ â€œå†™å‡ºæ¥çš„â€ï¼Œè€Œæ˜¯ â€œé¿å‘é¿å‡ºæ¥çš„â€</strong>ï¼Œå¤šç†è§£åº•å±‚é€»è¾‘ï¼Œå°‘ä¾èµ– â€œç»éªŒä¸»ä¹‰â€ï¼Œæ‰èƒ½çœŸæ­£æŒæ¡ <code>Hooks</code> çš„ç²¾é«“</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åŸºäº Microsoft Graph API ä¸ React Email æ„å»ºç°ä»£åŒ–é‚®ä»¶å‘é€ç³»ç»Ÿ]]></title>    <link>https://juejin.cn/post/7588300640598638598</link>    <guid>https://juejin.cn/post/7588300640598638598</guid>    <pubDate>2025-12-27T12:43:34.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588300640598638598" data-draft-id="7588152122186481718" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åŸºäº Microsoft Graph API ä¸ React Email æ„å»ºç°ä»£åŒ–é‚®ä»¶å‘é€ç³»ç»Ÿ"/> <meta itemprop="keywords" content="å‰ç«¯,React.js,Microsoft"/> <meta itemprop="datePublished" content="2025-12-27T12:43:34.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤§æ˜äºŒä»£"/> <meta itemprop="url" content="https://juejin.cn/user/2349018966401277"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åŸºäº Microsoft Graph API ä¸ React Email æ„å»ºç°ä»£åŒ–é‚®ä»¶å‘é€ç³»ç»Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2349018966401277/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤§æ˜äºŒä»£
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-27T12:43:34.000Z" title="Sat Dec 27 2025 12:43:34 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    2
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">èƒŒæ™¯</h2>
<p>åœ¨ä¼ ç»Ÿçš„ Node.js æœåŠ¡ç«¯å¼€å‘ä¸­ï¼Œä½¿ç”¨ Nodemailer é…åˆ SMTP åè®®æ˜¯å‘é€é‚®ä»¶çš„æ ‡å‡†åšæ³•ã€‚ç„¶è€Œï¼Œéšç€å®‰å…¨æ ‡å‡†çš„æå‡ï¼Œå¾®è½¯å·²å®£å¸ƒå°†åœ¨ 2026 å¹´å½»åº•åœæ­¢ Outlook/Microsoft 365 å¯¹ SMTP åŸºç¡€èº«ä»½éªŒè¯ï¼ˆBasic Authï¼‰çš„æ”¯æŒã€‚</p>
<p>ä¸ºäº†åº”å¯¹è¿™ä¸€å˜åŒ–ï¼Œæˆ‘ä»¬éœ€è¦è½¬å‘ Microsoft Graph APIã€‚åŒæ—¶ï¼Œä¸ºäº†è§£å†³é‚®ä»¶æ¨¡æ¿å¼€å‘ä¸­æ ·å¼éš¾ä»¥è°ƒè¯•ã€å…¼å®¹æ€§å·®çš„ç—›ç‚¹ï¼Œæˆ‘ä»¬å¯ä»¥å¼•å…¥ React Emailã€‚æœ¬æ–‡å°†ä»‹ç»å¦‚ä½•ç»“åˆè¿™ä¸¤è€…ï¼Œæ„å»ºä¸€å¥—ç¬¦åˆ Shadcn UI å®¡ç¾é£æ ¼ä¸”å…·å¤‡é«˜åº¦å¯é æ€§çš„é‚®ä»¶å‘é€ç³»ç»Ÿã€‚</p>
<hr/>
<h2 data-id="heading-1">æŠ€æœ¯æ ˆ</h2>
<ul>
<li><strong>React Email</strong>: ä½¿ç”¨ React ç»„ä»¶ç¼–å†™é‚®ä»¶æ¨¡æ¿ï¼Œæ”¯æŒ Tailwind CSSã€‚</li>
<li><strong>Nodemailer</strong>: æˆç†Ÿçš„ Node.js é‚®ä»¶å‘é€åº“ã€‚</li>
<li><strong>Microsoft Graph API</strong>: å¾®è½¯æä¾›çš„ç°ä»£åŒ– API æ¥å£ï¼Œç”¨äºæ›¿ä»£ä¼ ç»Ÿ SMTPã€‚</li>
<li><strong>MSAL Node</strong>: å¾®è½¯å®˜æ–¹æä¾›çš„èº«ä»½éªŒè¯åº“ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-2">1. æ¶æ„è®¾è®¡</h3>
<p>ç³»ç»Ÿåˆ†ä¸ºä¸‰å±‚ï¼šæ¨¡æ¿å±‚ã€é€»è¾‘å±‚å’Œä¼ è¾“å±‚ã€‚</p>
<ul>
<li><strong>æ¨¡æ¿å±‚</strong>ï¼šåˆ©ç”¨ React Email å®šä¹‰ UIï¼Œç¡®ä¿æ ·å¼åœ¨å„é‚®ä»¶å®¢æˆ·ç«¯ï¼ˆå¦‚ Gmailã€Outlookã€iOS Mailï¼‰ä¸­è¡¨ç°ä¸€è‡´ã€‚</li>
<li><strong>ä¼ è¾“å±‚</strong>ï¼šé€šè¿‡è‡ªå®šä¹‰ Nodemailer çš„ <code>Transport</code> æ¥å£ï¼Œå°†åº•å±‚çš„é‚®ä»¶å‘é€è¯·æ±‚å¯¼å‘ Microsoft Graph APIã€‚</li>
<li><strong>è®¤è¯å±‚</strong>ï¼šä½¿ç”¨ Azure åº”ç”¨æ³¨å†Œï¼ˆApp Registrationï¼‰è·å– OAuth2 ä»¤ç‰Œã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-3">2. å®ç° Microsoft Graph ä¼ è¾“å™¨</h3>
<p>æˆ‘ä»¬éœ€è¦å®ç°ä¸€ä¸ªè‡ªå®šä¹‰çš„ <code>AzureTransport</code> ç±»ã€‚å®ƒçš„æ ¸å¿ƒé€»è¾‘æ˜¯ï¼šåœ¨å‘é€é‚®ä»¶å‰æ£€æŸ¥ä»¤ç‰Œæ˜¯å¦è¿‡æœŸï¼Œè‹¥è¿‡æœŸåˆ™é€šè¿‡å®¢æˆ·ç«¯å‡­æ®æµï¼ˆClient Credentials Flowï¼‰è·å–æ–°ä»¤ç‰Œï¼Œéšåè°ƒç”¨ Graph API çš„ <code>/sendMail</code> æ¥å£ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> msal <span class="hljs-keyword">from</span> <span class="hljs-string">'@azure/msal-node'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">SentMessageInfo</span>, <span class="hljs-title class_">Transport</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'nodemailer'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">MailMessage</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'nodemailer/lib/mailer/mail-message'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AzureTransport</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Transport</span>&lt;<span class="hljs-title class_">SentMessageInfo</span>&gt; {
  name = <span class="hljs-string">'Azure'</span>;
  version = <span class="hljs-string">'0.1'</span>;
  <span class="hljs-keyword">private</span> <span class="hljs-attr">msalClient</span>: msal.<span class="hljs-property">ConfidentialClientApplication</span>;
  <span class="hljs-keyword">private</span> <span class="hljs-attr">tokenInfo</span>: msal.<span class="hljs-property">AuthenticationResult</span> | <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>;

  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"><span class="hljs-keyword">private</span> config: <span class="hljs-built_in">any</span></span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">msalClient</span> = <span class="hljs-keyword">new</span> msal.<span class="hljs-title class_">ConfidentialClientApplication</span>({
      <span class="hljs-attr">auth</span>: {
        <span class="hljs-attr">clientId</span>: config.<span class="hljs-property">clientId</span>,
        <span class="hljs-attr">clientSecret</span>: config.<span class="hljs-property">clientSecret</span>,
        <span class="hljs-attr">authority</span>: <span class="hljs-string">`https://login.microsoftonline.com/<span class="hljs-subst">${config.tenantId}</span>`</span>
      }
    });
  }

  <span class="hljs-keyword">private</span> <span class="hljs-keyword">async</span> <span class="hljs-title function_">getAccessToken</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">tokenInfo</span> || (<span class="hljs-variable language_">this</span>.<span class="hljs-property">tokenInfo</span>.<span class="hljs-property">expiresOn</span> &amp;&amp; <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>() &gt; <span class="hljs-variable language_">this</span>.<span class="hljs-property">tokenInfo</span>.<span class="hljs-property">expiresOn</span>.<span class="hljs-title function_">getTime</span>())) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">tokenInfo</span> = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">msalClient</span>.<span class="hljs-title function_">acquireTokenByClientCredential</span>({
        <span class="hljs-attr">scopes</span>: [<span class="hljs-string">'https://graph.microsoft.com/.default'</span>]
      });
    }
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">tokenInfo</span>!.<span class="hljs-property">accessToken</span>;
  }

  <span class="hljs-keyword">async</span> <span class="hljs-title function_">send</span>(<span class="hljs-params">mail: MailMessage, callback: <span class="hljs-built_in">any</span></span>) {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">const</span> { subject, <span class="hljs-keyword">from</span>, to, html, text } = mail.<span class="hljs-property">data</span>;
      <span class="hljs-keyword">const</span> accessToken = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getAccessToken</span>();

      <span class="hljs-keyword">const</span> mailMessage = {
        <span class="hljs-attr">message</span>: {
          subject,
          <span class="hljs-attr">body</span>: { <span class="hljs-attr">content</span>: html || text, <span class="hljs-attr">contentType</span>: html ? <span class="hljs-string">'HTML'</span> : <span class="hljs-string">'Text'</span> },
          <span class="hljs-attr">toRecipients</span>: (<span class="hljs-title class_">Array</span>.<span class="hljs-title function_">isArray</span>(to) ? to : [to]).<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">addr: <span class="hljs-built_in">any</span></span>) =&gt;</span> ({
            <span class="hljs-attr">emailAddress</span>: { <span class="hljs-attr">address</span>: <span class="hljs-keyword">typeof</span> addr === <span class="hljs-string">'string'</span> ? addr : addr.<span class="hljs-property">address</span> }
          })),
        }
      };

      <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">`https://graph.microsoft.com/v1.0/users/<span class="hljs-subst">${<span class="hljs-keyword">from</span>}</span>/sendMail`</span>, {
        <span class="hljs-attr">method</span>: <span class="hljs-string">'POST'</span>,
        <span class="hljs-attr">headers</span>: { <span class="hljs-title class_">Authorization</span>: <span class="hljs-string">`Bearer <span class="hljs-subst">${accessToken}</span>`</span>, <span class="hljs-string">'Content-Type'</span>: <span class="hljs-string">'application/json'</span> },
        <span class="hljs-attr">body</span>: <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(mailMessage)
      });

      <span class="hljs-keyword">if</span> (!response.<span class="hljs-property">ok</span>) <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-keyword">await</span> response.<span class="hljs-title function_">text</span>());
      <span class="hljs-title function_">callback</span>(<span class="hljs-literal">null</span>, { <span class="hljs-attr">messageId</span>: response.<span class="hljs-property">headers</span>.<span class="hljs-title function_">get</span>(<span class="hljs-string">'request-id'</span>) });
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-title function_">callback</span>(error, <span class="hljs-literal">null</span>);
    }
  }
}

</code></pre>
<hr/>
<h4 data-id="heading-4">3. ä½¿ç”¨ React Email ç¼–å†™ Shadcn é£æ ¼æ¨¡æ¿</h4>
<p>Shadcn UI çš„æ ¸å¿ƒåœ¨äºç®€æ´çš„ Zinc è‰²è°ƒå’Œè‰¯å¥½çš„é—´è·ã€‚ä»¥ä¸‹æ˜¯ä¸ºç”¨æˆ·ç¡®è®¤è®¾è®¡çš„é€šç”¨æ¨¡æ¿ï¼š</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Body</span>, <span class="hljs-title class_">Container</span>, <span class="hljs-title class_">Head</span>, <span class="hljs-title class_">Heading</span>, <span class="hljs-title class_">Html</span>, <span class="hljs-title class_">Preview</span>, <span class="hljs-title class_">Text</span>, <span class="hljs-title class_">Tailwind</span>, <span class="hljs-title class_">Button</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@react-email/components"</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">RequestReceivedEmail</span> = (<span class="hljs-params"/>) =&gt; (
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Html</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">Head</span> /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">Preview</span>&gt;</span>Confirmation of your request<span class="hljs-tag">&lt;/<span class="hljs-name">Preview</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">Tailwind</span> <span class="hljs-attr">config</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">theme:</span> { <span class="hljs-attr">extend:</span> { <span class="hljs-attr">colors:</span> { <span class="hljs-attr">brand:</span> "#<span class="hljs-attr">09090b</span>" } } } }}&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Body</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"bg-white font-sans text-zinc-950"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">Container</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"border border-zinc-200 rounded-lg my-10 mx-auto p-8 max-w-[465px]"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">Heading</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"text-2xl font-semibold tracking-tight"</span>&gt;</span>Request Received<span class="hljs-tag">&lt;/<span class="hljs-name">Heading</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">Text</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"text-sm leading-6 text-zinc-600 mt-4"</span>&gt;</span>
            We have successfully received your information. Our team will review the details and respond accordingly.
          <span class="hljs-tag">&lt;/<span class="hljs-name">Text</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">Button</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"bg-zinc-950 rounded-md text-white text-sm font-medium px-6 py-3 mt-4 no-underline inline-block"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"https://app.aands.ai"</span>&gt;</span>
            Access Portal
          <span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">Container</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">Body</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">Tailwind</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">Html</span>&gt;</span></span>
);

</code></pre>
<hr/>
<h3 data-id="heading-5">4. ä¸šåŠ¡é€»è¾‘æ•´åˆ</h3>
<p>æœ€åï¼Œæˆ‘ä»¬å°†ä¸Šè¿°æ¨¡å—æ•´åˆåˆ°ä¸€ä¸ªæœåŠ¡å‡½æ•°ä¸­ã€‚è¯¥å‡½æ•°ä¼šåŒæ—¶å‘ç”¨æˆ·å‘é€å›æ‰§ï¼Œå¹¶å‘è¿è¥å›¢é˜Ÿå‘é€å†…éƒ¨é€šçŸ¥ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { render } <span class="hljs-keyword">from</span> <span class="hljs-string">"@react-email/components"</span>;
<span class="hljs-keyword">import</span> nodemailer <span class="hljs-keyword">from</span> <span class="hljs-string">"nodemailer"</span>;

<span class="hljs-keyword">const</span> transporter = nodemailer.<span class="hljs-title function_">createTransport</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">AzureTransport</span>({
  <span class="hljs-attr">clientId</span>: process.<span class="hljs-property">env</span>.<span class="hljs-property">AZURE_CLIENT_ID</span>,
  <span class="hljs-attr">clientSecret</span>: process.<span class="hljs-property">env</span>.<span class="hljs-property">AZURE_CLIENT_SECRET</span>,
  <span class="hljs-attr">tenantId</span>: process.<span class="hljs-property">env</span>.<span class="hljs-property">AZURE_TENANT_ID</span>
}));

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">sendNotification</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params">userData: <span class="hljs-built_in">any</span></span>) =&gt; {
  <span class="hljs-keyword">const</span> userHtml = <span class="hljs-keyword">await</span> <span class="hljs-title function_">render</span>(<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">RequestReceivedEmail</span> /&gt;</span></span>);
  
  <span class="hljs-keyword">await</span> transporter.<span class="hljs-title function_">sendMail</span>({
    <span class="hljs-attr">from</span>: <span class="hljs-string">"noreply@yourdomain.com"</span>,
    <span class="hljs-attr">to</span>: userData.<span class="hljs-property">email</span>,
    <span class="hljs-attr">subject</span>: <span class="hljs-string">"Request Confirmation"</span>,
    <span class="hljs-attr">html</span>: userHtml
  });
};

</code></pre>
<hr/>
<h2 data-id="heading-6">æ€»ç»“</h2>
<p>é€šè¿‡è¿™ç§æ–¹å¼ï¼Œæˆ‘ä»¬ä¸ä»…è§£å†³äº† SMTP è®¤è¯å³å°†è¿‡æœŸçš„åˆè§„æ€§é—®é¢˜ï¼Œè¿˜æå‡äº†é‚®ä»¶çš„è§†è§‰è´¨é‡ã€‚Microsoft Graph API æä¾›äº†æ¯”ä¼ ç»Ÿ SMTP æ›´å¼ºçš„å¯ç›‘æ§æ€§å’Œå®‰å…¨æ€§ï¼Œè€Œ React Email åˆ™æå¤§åœ°æ”¹å–„äº†é‚®ä»¶å¼€å‘çš„å¼€å‘è€…ä½“éªŒã€‚</p>
<p>åœ¨å®é™…ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œè¯·ç¡®ä¿åœ¨ Azure é—¨æˆ·ä¸­ä¸ºä½ çš„åº”ç”¨æˆäºˆäº† <code>Mail.Send</code> æƒé™ï¼Œå¹¶æ ¹æ®ä¸šåŠ¡éœ€æ±‚é…ç½®ç¯å¢ƒå˜é‡ã€‚</p>
<h2 data-id="heading-7">å‚è€ƒèµ„æ–™</h2>
<ol>
<li><a href="https://juejin.cn/post/7157980257155285005" target="_blank" title="https://juejin.cn/post/7157980257155285005">æ„å»ºå’Œå‘é€ç”µå­é‚®ä»¶çš„Reactç»„ä»¶çš„å®ä¾‹æ•™ç¨‹</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdev.to%2Fgevik%2Fsending-emails-via-outlook-with-nodemailer-and-microsoft-graph-b74" target="_blank" title="https://dev.to/gevik/sending-emails-via-outlook-with-nodemailer-and-microsoft-graph-b74" ref="nofollow noopener noreferrer">Sending Emails via Outlook with Nodemailer and Microsoft Graph</a></li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç”¨ Vue 3 æ„å»ºä»»åŠ¡æ¸…å•ï¼šå“åº”å¼ç¼–ç¨‹çš„ä¼˜é›…å®è·µ]]></title>    <link>https://juejin.cn/post/7588042910198317106</link>    <guid>https://juejin.cn/post/7588042910198317106</guid>    <pubDate>2025-12-27T13:14:45.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588042910198317106" data-draft-id="7588080521445277742" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç”¨ Vue 3 æ„å»ºä»»åŠ¡æ¸…å•ï¼šå“åº”å¼ç¼–ç¨‹çš„ä¼˜é›…å®è·µ"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-27T13:14:45.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Zyx2007"/> <meta itemprop="url" content="https://juejin.cn/user/3924597867554890"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç”¨ Vue 3 æ„å»ºä»»åŠ¡æ¸…å•ï¼šå“åº”å¼ç¼–ç¨‹çš„ä¼˜é›…å®è·µ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3924597867554890/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Zyx2007
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-27T13:14:45.000Z" title="Sat Dec 27 2025 13:14:45 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨å‰ç«¯å¼€å‘ä¸­ï¼Œä»»åŠ¡æ¸…å•ï¼ˆTodosï¼‰æ˜¯ä¸€ä¸ªç»å…¸ç»ƒä¹ é¡¹ç›®ã€‚å®ƒè™½åŠŸèƒ½ç®€å•ï¼Œå´èƒ½å®Œæ•´ä½“ç°æ•°æ®é©±åŠ¨ã€çŠ¶æ€ç®¡ç†ä¸ç”¨æˆ·äº¤äº’çš„æ ¸å¿ƒæ€æƒ³ã€‚è‹¥ç”¨ä¼ ç»Ÿ DOM æ“ä½œå®ç°ï¼Œä»£ç å¾€å¾€å†—é•¿ä¸”éš¾ä»¥ç»´æŠ¤ï¼›è€Œå€ŸåŠ© Vue 3 çš„ç»„åˆå¼ API ä¸å“åº”å¼ç³»ç»Ÿï¼Œæˆ‘ä»¬åªéœ€å…³æ³¨â€œæ•°æ®å¦‚ä½•å˜åŒ–â€ï¼Œç•Œé¢ä¾¿ä¼šè‡ªåŠ¨åŒæ­¥æ›´æ–°ã€‚è¿™ç§å£°æ˜å¼å¼€å‘èŒƒå¼ï¼Œä¸ä»…æå‡äº†å¼€å‘æ•ˆç‡ï¼Œä¹Ÿè®©ä»£ç é€»è¾‘æ›´æ¸…æ™°ã€æ›´æ˜“æµ‹è¯•ã€‚</p>
<h2 data-id="heading-0">ä»å‘½ä»¤å¼åˆ°å£°æ˜å¼ï¼šæ€ç»´çš„è½¬å˜</h2>
<p>ä¼ ç»Ÿ JavaScript å¼€å‘é€šå¸¸é‡‡ç”¨<strong>å‘½ä»¤å¼ç¼–ç¨‹</strong>ï¼šå…ˆè·å– DOM å…ƒç´ ï¼Œå†ç›‘å¬äº‹ä»¶ï¼Œæœ€åæ‰‹åŠ¨ä¿®æ”¹å†…å®¹ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">const <span class="hljs-attr">app</span> = document.getElementById(<span class="hljs-string">'app'</span>)<span class="hljs-comment">;</span>
const <span class="hljs-attr">input</span> = document.getElementById(<span class="hljs-string">'todo-input'</span>)<span class="hljs-comment">;</span>
input.addEventListener('change', (e) =&gt; {
  <span class="hljs-attr">app.innerHTML</span> = e.target.value.trim()<span class="hljs-comment">;</span>
})<span class="hljs-comment">;</span>
</code></pre>
<p>è¿™ç§æ–¹å¼ç›´æ¥æ“ä½œæ¸²æŸ“å¼•æ“ï¼Œæ¯ä¸€æ­¥éƒ½éœ€ç²¾ç¡®æ§åˆ¶ã€‚ä¸€æ—¦é€»è¾‘å¤æ‚ï¼ˆå¦‚å¢åˆ æ”¹æŸ¥ã€ç­›é€‰ã€å…¨é€‰ï¼‰ï¼Œä»£ç ä¼šè¿…é€Ÿè†¨èƒ€ï¼Œä¸”å®¹æ˜“å› çŠ¶æ€ä¸ä¸€è‡´å¯¼è‡´ bugã€‚</p>
<p>è€Œ Vue çš„æ ¸å¿ƒç†å¿µæ˜¯<strong>å“åº”å¼æ•°æ®é©±åŠ¨</strong>ï¼šä½ ä¸å†æ“ä½œ DOMï¼Œè€Œæ˜¯å®šä¹‰æ•°æ®ï¼›å½“æ•°æ®å˜åŒ–æ—¶ï¼Œæ¡†æ¶è‡ªåŠ¨æ›´æ–°è§†å›¾ã€‚å¼€å‘è€…åªéœ€æ€è€ƒâ€œä¸šåŠ¡çŠ¶æ€æ˜¯ä»€ä¹ˆâ€ï¼Œè€Œéâ€œé¡µé¢è¯¥æ€ä¹ˆæ”¹â€ã€‚</p>
<h2 data-id="heading-1">å“åº”å¼çŠ¶æ€ï¼šç”¨ <code>ref</code> ç®¡ç†æ•°æ®</h2>
<p>åœ¨ Vue 3 çš„ <code>&lt;script setup&gt;</code> ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ <code>ref</code> åˆ›å»ºå“åº”å¼å˜é‡ï¼š</p>
<pre><code class="hljs language-php" lang="php">&lt;script setup&gt;
import { ref } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">title</span> = <span class="hljs-title function_ invoke__">ref</span>(<span class="hljs-string">'Todos ä»»åŠ¡æ¸…å•'</span>)
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">todos</span> = <span class="hljs-title function_ invoke__">ref</span>([
  { <span class="hljs-attr">id</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">title</span>: <span class="hljs-string">'æ‰“ç‹è€…'</span>, <span class="hljs-attr">done</span>: <span class="hljs-literal">false</span> },
  { <span class="hljs-attr">id</span>: <span class="hljs-number">2</span>, <span class="hljs-attr">title</span>: <span class="hljs-string">'åƒé¥­'</span>, <span class="hljs-attr">done</span>: <span class="hljs-literal">true</span> }
])
&lt;/script&gt;
</code></pre>
<p><code>title</code> å’Œ <code>todos</code> éƒ½æ˜¯å“åº”å¼å¼•ç”¨å¯¹è±¡ã€‚é€šè¿‡ <code>title.value = 'æ–°æ ‡é¢˜'</code> ä¿®æ”¹å€¼åï¼Œæ¨¡æ¿ä¸­æ‰€æœ‰ä½¿ç”¨ <code>{{ title }}</code> çš„åœ°æ–¹éƒ½ä¼šè‡ªåŠ¨åˆ·æ–°ã€‚è¿™ç§æœºåˆ¶å°† UI ä¸çŠ¶æ€ç´§å¯†ç»‘å®šï¼Œæ¶ˆé™¤äº†æ‰‹åŠ¨ DOM æ“ä½œçš„ç¹çã€‚</p>
<h2 data-id="heading-2">æ¨¡æ¿æŒ‡ä»¤ï¼šç®€æ´è¡¨è¾¾é€»è¾‘</h2>
<p>Vue æä¾›ä¸€ç³»åˆ—æŒ‡ä»¤ï¼Œä»¥å£°æ˜æ–¹å¼æè¿° UI è¡Œä¸ºï¼š</p>
<pre><code class="hljs language-ini" lang="ini">&lt;input <span class="hljs-attr">v-model</span>=<span class="hljs-string">"title"</span> @keyup.enter=<span class="hljs-string">"addTodo"</span> /&gt;
&lt;ul <span class="hljs-attr">v-if</span>=<span class="hljs-string">"todos.length"</span>&gt;
  &lt;li <span class="hljs-attr">v-for</span>=<span class="hljs-string">"todo in todos"</span> :key=<span class="hljs-string">"todo.id"</span>&gt;
    &lt;input <span class="hljs-attr">type</span>=<span class="hljs-string">"checkbox"</span> v-model=<span class="hljs-string">"todo.done"</span> /&gt;
    &lt;span :<span class="hljs-attr">class</span>=<span class="hljs-string">"{ 'done': todo.done }"</span>&gt;{{ todo.title }}&lt;/span&gt;
  &lt;/li&gt;
&lt;/ul&gt;
</code></pre>
<ul>
<li><code>v-model</code> å®ç°åŒå‘ç»‘å®šï¼Œè¾“å…¥æ¡†å†…å®¹ä¸ <code>title</code> åŒæ­¥ï¼›</li>
<li><code>@keyup.enter</code> ç›‘å¬å›è½¦é”®ï¼Œè§¦å‘æ·»åŠ ä»»åŠ¡ï¼›</li>
<li><code>v-for</code> å¾ªç¯æ¸²æŸ“åˆ—è¡¨ï¼Œæ— éœ€æ‰‹åŠ¨æ‹¼æ¥ HTMLï¼›</li>
<li><code>:class</code> åŠ¨æ€ç»‘å®šæ ·å¼ï¼Œå®Œæˆé¡¹æ˜¾ç¤ºåˆ é™¤çº¿ï¼›</li>
<li><code>v-if</code> æ§åˆ¶â€œæš‚æ— ä»»åŠ¡â€æç¤ºçš„æ˜¾ç¤ºæ—¶æœºã€‚</li>
</ul>
<p>è¿™äº›æŒ‡ä»¤å°†å¸¸è§äº¤äº’æ¨¡å¼å°è£…æˆè¯­ä¹‰åŒ–è¯­æ³•ï¼Œå¤§å¹…é™ä½æ ·æ¿ä»£ç é‡ã€‚</p>
<h2 data-id="heading-3">è®¡ç®—å±æ€§ï¼šé«˜æ•ˆæ´¾ç”ŸçŠ¶æ€</h2>
<p>ä»»åŠ¡æ¸…å•éœ€è¦å®æ—¶æ˜¾ç¤ºâ€œæœªå®Œæˆä»»åŠ¡æ•°â€å’Œâ€œå…¨é€‰â€çŠ¶æ€ã€‚è‹¥åœ¨æ¨¡æ¿ä¸­ç›´æ¥å†™ <code>todos.filter(...).length</code>ï¼Œæ¯æ¬¡æ¸²æŸ“éƒ½ä¼šé‡æ–°è®¡ç®—ï¼Œå½±å“æ€§èƒ½ã€‚Vue çš„ <strong><code>computed</code></strong> æä¾›äº†ç¼“å­˜æœºåˆ¶ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">const <span class="hljs-attr">active</span> = computed(() =&gt; {
  return todos.value.filter(<span class="hljs-attr">todo</span> =&gt; !todo.done).length
})
</code></pre>
<p><code>active</code> æ˜¯ä¸€ä¸ªè®¡ç®—å±æ€§ï¼Œåªæœ‰å½“ <code>todos</code> å‘ç”Ÿå˜åŒ–æ—¶æ‰ä¼šé‡æ–°æ±‚å€¼ã€‚æ¨¡æ¿ä¸­ä½¿ç”¨ <code>{{ active }}</code> å³å¯è·å¾—æœ€æ–°ç»“æœï¼Œä¸”æ€§èƒ½æœ€ä¼˜ã€‚</p>
<p>æ›´å·§å¦™çš„æ˜¯ï¼Œ<code>computed</code> æ”¯æŒ <strong>getter/setter</strong>ï¼Œå¯ç”¨äºå®ç°â€œå…¨é€‰â€åŠŸèƒ½ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> allDone = <span class="hljs-title function_">computed</span>({
  <span class="hljs-title function_">get</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> todos.<span class="hljs-property">value</span>.<span class="hljs-title function_">every</span>(<span class="hljs-function"><span class="hljs-params">todo</span> =&gt;</span> todo.<span class="hljs-property">done</span>)
  },
  <span class="hljs-title function_">set</span>(<span class="hljs-params">value</span>) {
    todos.<span class="hljs-property">value</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">todo</span> =&gt;</span> todo.<span class="hljs-property">done</span> = value)
  }
})
</code></pre>
<p>å½“ç”¨æˆ·å‹¾é€‰â€œå…¨é€‰â€å¤é€‰æ¡†æ—¶ï¼Œ<code>set</code> è¢«è°ƒç”¨ï¼Œæ‰¹é‡æ›´æ–°æ‰€æœ‰ä»»åŠ¡çŠ¶æ€ï¼›åä¹‹ï¼Œè‹¥éƒ¨åˆ†ä»»åŠ¡è¢«å–æ¶ˆï¼Œ<code>get</code> è¿”å› <code>false</code>ï¼Œå¤é€‰æ¡†è‡ªåŠ¨å–æ¶ˆã€‚è¿™ç§åŒå‘è”åŠ¨ä»…éœ€å‡ è¡Œä»£ç ï¼Œå´è¦†ç›–äº†å¤æ‚çš„äº¤äº’é€»è¾‘ã€‚</p>
<h2 data-id="heading-4">æ·»åŠ ä»»åŠ¡ï¼šèšç„¦æ•°æ®å˜æ›´</h2>
<p>æ–°å¢ä»»åŠ¡çš„æœ¬è´¨æ˜¯å‘ <code>todos</code> æ•°ç»„è¿½åŠ ä¸€é¡¹ï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">addTodo</span> = () =&gt; {
  <span class="hljs-keyword">if</span> (!title.value.<span class="hljs-title function_ invoke__">trim</span>()) <span class="hljs-keyword">return</span>
  todos.value.<span class="hljs-title function_ invoke__">push</span>({
    <span class="hljs-attr">id</span>: Date.<span class="hljs-title function_ invoke__">now</span>(),
    <span class="hljs-attr">title</span>: title.value,
    <span class="hljs-attr">done</span>: <span class="hljs-literal">false</span>
  })
  title.value = <span class="hljs-string">''</span>
}
</code></pre>
<p>è¿™é‡Œæ²¡æœ‰ <code>createElement</code>ã€<code>appendChild</code> æˆ– <code>innerHTML</code>ï¼Œåªæœ‰å¯¹æ•°æ®çš„æ“ä½œã€‚Vue ä¼šè‡ªåŠ¨æ£€æµ‹æ•°ç»„å˜æ›´ï¼Œå¹¶é«˜æ•ˆæ›´æ–° DOMã€‚è¿™ç§â€œæ•°æ®å³ UIâ€çš„æ€æƒ³ï¼Œè®©ä¸šåŠ¡é€»è¾‘ä¸è§†å›¾å®Œå…¨è§£è€¦ã€‚</p>
<h2 data-id="heading-5">æ ·å¼ä¸ä½“éªŒä¼˜åŒ–</h2>
<p>é€šè¿‡åŠ¨æ€ç±»åï¼Œè½»æ¾å®ç°è§†è§‰åé¦ˆï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.done</span> {
  <span class="hljs-attribute">color</span>: <span class="hljs-number">#999</span>;
  <span class="hljs-attribute">text-decoration</span>: line-through;
}
</code></pre>
<p>é…åˆ <code>:class="{ 'done': todo.done }"</code>ï¼Œå®Œæˆçš„ä»»åŠ¡è‡ªåŠ¨å˜ç°å¹¶åŠ åˆ é™¤çº¿ï¼Œæå‡ç”¨æˆ·ä½“éªŒã€‚</p>
<h2 data-id="heading-6">æ€»ç»“</h2>
<p>è¿™ä¸ª Todos åº”ç”¨è™½å°ï¼Œå´å®Œæ•´å±•ç¤ºäº† Vue 3 çš„æ ¸å¿ƒä¼˜åŠ¿ï¼š</p>
<ul>
<li><strong>å“åº”å¼ç³»ç»Ÿ</strong>è®©çŠ¶æ€ä¸è§†å›¾è‡ªåŠ¨åŒæ­¥ï¼›</li>
<li><strong>ç»„åˆå¼ API</strong> æä¾›çµæ´»ã€å¯å¤ç”¨çš„é€»è¾‘ç»„ç»‡æ–¹å¼ï¼›</li>
<li><strong>æ¨¡æ¿æŒ‡ä»¤</strong> å°†å¸¸è§äº¤äº’æŠ½è±¡ä¸ºç®€æ´è¯­æ³•ï¼›</li>
<li><strong>è®¡ç®—å±æ€§</strong> åœ¨ä¿è¯æ€§èƒ½çš„åŒæ—¶ç®€åŒ–æ´¾ç”ŸçŠ¶æ€ç®¡ç†ã€‚</li>
</ul>
<p>ç›¸æ¯”ä¼ ç»Ÿ DOM æ“ä½œï¼ŒVue è®©å¼€å‘è€…ä»â€œå¦‚ä½•æ”¹é¡µé¢â€è½¬å‘â€œæ•°æ®è¯¥æ˜¯ä»€ä¹ˆæ ·â€ï¼Œæå¤§é™ä½äº†å¿ƒæ™ºè´Ÿæ‹…ã€‚å¯¹äºåˆå­¦è€…ï¼Œè¿™æ˜¯å¿«é€Ÿä¸Šæ‰‹ç°ä»£å‰ç«¯å¼€å‘çš„æ·å¾„ï¼›å¯¹äºèµ„æ·±å·¥ç¨‹å¸ˆï¼Œè¿™æ˜¯æ„å»ºå¯ç»´æŠ¤ã€å¯æ‰©å±•åº”ç”¨çš„åšå®åŸºç¡€ã€‚æ­£å¦‚é‚£å¥è€è¯ï¼šâ€œå½“ä½ ä¸“æ³¨äºæ•°æ®ï¼ŒUI è‡ªä¼šè·Ÿéšã€‚â€</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item>  </channel></rss>