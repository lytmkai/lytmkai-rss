<?xml version="1.0" encoding="UTF-8"?><rss version="2.0">  <channel>      <title>æ˜é‡‘æ–‡ç« æ¨è</title>      <link>https://juejin.cn/recommended?sort=newest</link>      <description>ä¸€ä¸ªå¸®åŠ©å¼€å‘è€…æˆé•¿çš„ç¤¾åŒº</description>      <generator>python juejin_recom.py @Pi20</generator>      <item>    <title><![CDATA[ä»"æ‰‹è‰ºäºº"åˆ°"è¶…çº§ä¸ªä½“":æˆ‘åœ¨å°ç ´ç«™ç”¨AIé‡æ„å·¥ä½œæ–¹å¼çš„2025]]></title>    <link>https://juejin.cn/post/7587997157237866548</link>    <guid>https://juejin.cn/post/7587997157237866548</guid>    <pubDate>2025-12-27T05:44:47.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587997157237866548" data-draft-id="7588004376867389475" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä»&quot;æ‰‹è‰ºäºº&quot;åˆ°&quot;è¶…çº§ä¸ªä½“&quot;:æˆ‘åœ¨å°ç ´ç«™ç”¨AIé‡æ„å·¥ä½œæ–¹å¼çš„2025"/> <meta itemprop="keywords" content="OpenAI,AIGC,AIç¼–ç¨‹"/> <meta itemprop="datePublished" content="2025-12-27T05:44:47.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ³¯æ³·"/> <meta itemprop="url" content="https://juejin.cn/user/317122698296024"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä»"æ‰‹è‰ºäºº"åˆ°"è¶…çº§ä¸ªä½“":æˆ‘åœ¨å°ç ´ç«™ç”¨AIé‡æ„å·¥ä½œæ–¹å¼çš„2025
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/317122698296024/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ³¯æ³·
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-27T05:44:47.000Z" title="Sat Dec 27 2025 05:44:47 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>2025 å¹´å³å°†ç”»ä¸Šå¥å·ã€‚å›æœ›è¿™ä¸€å¹´ï¼ŒæŠ€æœ¯é¢†åŸŸçš„å˜é©æµªæ½®ä»æœªåœæ­‡ã€‚ä½œä¸ºä¸€åæ·±è€•åœ¨ä¸€çº¿ä»£ç ä¸­çš„å¼€å‘è€…ï¼Œæˆ‘ä¸æƒ³é‡å¤é‚£äº›å®å¤§çš„è¡Œä¸šå™äº‹ï¼Œè€Œæ˜¯å¸Œæœ›é€šè¿‡å¤ç›˜æˆ‘åœ¨å°ç ´ç«™çš„å®é™…å·¥ä½œç»å†ï¼Œæ¢è®¨ä¸€ä¸ªæ›´å…·ä½“çš„è¯é¢˜ï¼š<strong>åœ¨ AI æ·±åº¦èµ‹èƒ½çš„æ—¶ä»£ï¼Œæˆ‘ä»¬å¦‚ä½•å®Œæˆä»â€œä»£ç æ‰‹è‰ºäººâ€åˆ°â€œè¶…çº§ä¸ªä½“â€çš„è¿›é˜¶ï¼Ÿ</strong></p>
<h3 data-id="heading-0">ä¸ŠåŠå¹´å®æˆ˜ï¼šJSVMP + WASM æ„å»ºå‰ç«¯å®‰å…¨é˜²çº¿</h3>
<p>ä¸ŠåŠå¹´çš„æ ¸å¿ƒå…³é”®è¯æ˜¯<strong>æ”»é˜²</strong>ã€‚å‰ç«¯é£æ§éªŒè¯ SDK çš„å¼€å‘æ—¢å……æ»¡è¶£å‘³ï¼Œåˆæå…·æŒ‘æˆ˜ã€‚é¢å¯¹é»‘äº§ä»ä¸šè€…è¯•å›¾ç›´æ¥ç ´è§£æ¥å£çš„æ”»å‡»è¡Œä¸ºï¼Œå¸¸è§„çš„ä»£ç æ··æ·†æ‰‹æ®µå·²æ˜¾å¾—æ‰è¥Ÿè§è‚˜ã€‚</p>
<p>ä¸ºäº†æ„å»ºæ›´åšå›ºçš„é˜²å¾¡ä½“ç³»ï¼Œæˆ‘ä»¬å¼•å…¥äº† <strong>JSVMP (JavaScript Virtual Machine Protection)</strong> æŠ€æœ¯ã€‚è¯¥æŠ€æœ¯é€šè¿‡å°†æ ¸å¿ƒä¸šåŠ¡é€»è¾‘è™šæ‹ŸåŒ–ï¼Œä½¿å¾—é€†å‘å·¥ç¨‹çš„æˆæœ¬å‘ˆæŒ‡æ•°çº§ä¸Šå‡ã€‚é€šè¿‡ç›‘æ§æ•°æ®çš„å¯¹æ¯”ï¼Œæˆ‘ä»¬æ¸…æ™°åœ°çœ‹åˆ°äº†é˜²å¾¡æ•ˆæœçš„æ˜¾è‘—æå‡ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// JSVMP æ¦‚å¿µç¤ºæ„ï¼šå°†æºç ç¼–è¯‘ä¸ºè‡ªå®šä¹‰æŒ‡ä»¤é›†</span>
<span class="hljs-comment">// åŸå§‹ä»£ç ï¼š</span>
<span class="hljs-comment">// function check(token) { return token === 'secret'; }</span>

<span class="hljs-comment">// è™šæ‹ŸåŒ–åï¼ˆç¤ºæ„ï¼‰ï¼š</span>
<span class="hljs-keyword">const</span> _vm_instructions = [<span class="hljs-number">0xA1</span>, <span class="hljs-number">0x42</span>, <span class="hljs-number">0xB3</span>, ...]; <span class="hljs-comment">// è‡ªå®šä¹‰å­—èŠ‚ç </span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">_vm_executor</span>(<span class="hljs-params">instructions, context</span>) {
  <span class="hljs-comment">// è™šæ‹Ÿå †æ ˆæ‰§è¡Œå™¨ï¼Œæ”»å‡»è€…éš¾ä»¥è¿˜åŸåŸå§‹é€»è¾‘</span>
  <span class="hljs-keyword">while</span>(pc &lt; instructions.<span class="hljs-property">length</span>) { <span class="hljs-comment">/* ... */</span> }
}
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4d63d5cee2f6473ebc979ae2875eb5d2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rOv5rO3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767419110&amp;x-signature=EjJ2K%2FRlb3yy9X6ZLzHieUbwh%2BQ%3D" alt="9d10f263d07e71fbd76830816874b06733fa40d74127f8d2d915cb5f41260f36.png" loading="lazy"/></p>
<p>ä¸æ­¤åŒæ—¶ï¼Œä¸ºäº†è¿›ä¸€æ­¥æå‡è®¾å¤‡è®¤è¯çš„å®‰å…¨æ€§å’Œå‡†ç¡®æ€§ï¼Œæˆ‘ä»¬åœ¨ç°ä»£æµè§ˆå™¨ç¯å¢ƒä¸­æ¢ç´¢äº† <strong>WASM (WebAssembly)</strong> çš„å·¥ç¨‹åŒ–è½åœ°ã€‚è¿™ä¸ä»…å¸¦æ¥äº†æ€§èƒ½ä¸Šçš„ä¼˜åŒ–ï¼Œæ›´åˆ©ç”¨ WASM çš„äºŒè¿›åˆ¶ç‰¹æ€§æ„å»ºäº†æ–°çš„å®‰å…¨é˜²çº¿ã€‚</p>
<p>å€¼å¾—ä¸€æçš„æ˜¯ï¼Œæˆ‘ä»¬çš„ WASM æ¨¡å—é‡‡ç”¨ <strong>Rust</strong> è¯­è¨€ç¼–å†™ã€‚ä»ä¸¥æ ¼çš„æ‰€æœ‰æƒç³»ç»Ÿåˆ°å†…å­˜å®‰å…¨æœºåˆ¶ï¼Œå†åˆ°é›¶æˆæœ¬æŠ½è±¡ï¼ŒRust çš„è®¾è®¡å“²å­¦æå¤§åœ°ä¿éšœäº†ä»£ç çš„å¥å£®æ€§ã€‚è™½ç„¶å­¦ä¹ æ›²çº¿é™¡å³­ï¼Œä½†å½“ Rust ä»£ç é€šè¿‡ç¼–è¯‘å™¨ä¸¥è‹›çš„æ£€æŸ¥åï¼Œé‚£ç§â€œç¼–è¯‘é€šè¿‡å³è¿è¡Œæ­£ç¡®â€çš„ä¿¡å¿ƒæ˜¯å…¶ä»–è¯­è¨€éš¾ä»¥æ¯”æ‹Ÿçš„ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ff4f55088b8b40d68afebf6bb68dd3dd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rOv5rO3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767419110&amp;x-signature=jX9e%2BB4qmdwBXpeCp6wN4UbVqLI%3D" alt="Rust-WASMæŠ€æœ¯æ ˆ" loading="lazy"/></p>
<h3 data-id="heading-1">ä¸‹åŠå¹´æ”»åšï¼šé‡æ„å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ä¸ååŒæŠ€æœ¯</h3>
<p>ä¸‹åŠå¹´ï¼Œæˆ‘çš„æŠ€æœ¯é‡å¿ƒè½¬ç§»åˆ°äº†å‰ç«¯é¢†åŸŸå…¬è®¤çš„é«˜å¤æ‚åº¦åœºæ™¯â€”â€”<strong>å¯Œæ–‡æœ¬ç¼–è¾‘å™¨</strong>ã€‚</p>
<p>ä»»ä½•æ·±å…¥è¿‡ç¼–è¾‘å™¨å¼€å‘çš„å·¥ç¨‹å¸ˆéƒ½çŸ¥é“ï¼Œè¿™ä¸ä»…å…³ä¹ UI äº¤äº’ï¼Œæ›´æ˜¯ä¸€åœºå…³äºæ•°æ®ç»“æ„è®¾è®¡ä¸çŠ¶æ€ç®¡ç†çš„æ·±åº¦åšå¼ˆã€‚æˆ‘ä»¬çš„æ ¸å¿ƒä»»åŠ¡æ˜¯è¿­ä»£â€œå“”å“©å“”å“©å°ç«™â€ï¼Œå¹¶å¯¹ B ç«™å†å²æ‚ ä¹…çš„<strong>ä¸“æ ç¼–è¾‘å™¨</strong>è¿›è¡Œç°ä»£åŒ–é‡æ„ã€‚</p>
<p>åœ¨æ­¤æœŸé—´ï¼Œæˆ‘ä»¬éœ€è¦æ”»å…‹ Tiptap æ¡†æ¶çš„æ·±åº¦å®šåˆ¶ä»¥åŠ CRDTï¼ˆConflict-free Replicated Data Typesï¼‰ååŒç®—æ³•çš„é¢„ç ”ç­‰æŠ€æœ¯éš¾ç‚¹ã€‚æˆ‘ä»¬ä¸ºæ–°ç‰ˆç¼–è¾‘å™¨æ‰©å±•äº†ä¸°å¯Œçš„<strong>å¡ç‰‡å¼ç»„ä»¶ (Node Views)</strong> èƒ½åŠ›â€”â€”æ”¯æŒè§†é¢‘ã€æŠ•ç¥¨ã€å•†å“å¡ç‰‡ç­‰å¤šç§å†…å®¹å½¢æ€ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// Tiptap è‡ªå®šä¹‰èŠ‚ç‚¹æ‰©å±•ç¤ºä¾‹</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Node</span>, mergeAttributes } <span class="hljs-keyword">from</span> <span class="hljs-string">'@tiptap/core'</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ReactNodeViewRenderer</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@tiptap/react'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title class_">BilibiliVideo</span> = <span class="hljs-title class_">Node</span>.<span class="hljs-title function_">create</span>({
  <span class="hljs-attr">name</span>: <span class="hljs-string">'bilibiliVideo'</span>,
  <span class="hljs-attr">group</span>: <span class="hljs-string">'block'</span>,
  <span class="hljs-attr">atom</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// è§†ä¸ºåŸå­èŠ‚ç‚¹</span>

  <span class="hljs-title function_">addAttributes</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">bvid</span>: { <span class="hljs-attr">default</span>: <span class="hljs-literal">null</span> },
    }
  },

  <span class="hljs-title function_">addNodeView</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// ä½¿ç”¨ UI ç»„ä»¶æ¸²æŸ“èŠ‚ç‚¹è§†å›¾</span>
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">VueNodeViewRenderer</span>(<span class="hljs-title class_">VideoComponent</span>)
  },
})
</code></pre>
<p>å…¶ä¸­ä¸€ä¸ªæ˜¾è‘—çš„ä½“éªŒæå‡æ˜¯å®ç°äº†<strong>è§†é¢‘åœ¨ç¼–è¾‘å™¨å†…çš„åŸç”Ÿæ’­æ”¾</strong>ã€‚ä¸ºäº†å®ç°è¿™ä¸€â€œæ‰€è§å³æ‰€å¾—â€çš„æ•ˆæœï¼ŒæŠ€æœ¯å›¢é˜Ÿå…‹æœäº†å¤æ‚çš„ DOM äº‹ä»¶å†²çªä¸çŠ¶æ€åŒæ­¥é—®é¢˜ï¼Œå½»åº•æ¶ˆé™¤äº†åˆ›ä½œè€…éœ€è¦é¢‘ç¹åˆ‡æ¢é¢„è§ˆæ¨¡å¼çš„ç—›ç‚¹ã€‚è¿™ç§å¯¹ç»†èŠ‚çš„æè‡´æ‰“ç£¨ï¼Œæœ€ç»ˆæ¢æ¥äº†æµç•…çš„ç”¨æˆ·ä½“éªŒã€‚</p>
<h3 data-id="heading-2">AI èµ‹èƒ½ï¼šä»è¾…åŠ©å·¥å…·åˆ°â€œç¬¬äºŒå¤§è„‘â€</h3>
<p>å¯¹äºæˆ‘è€Œè¨€ï¼Œ2025 å¹´çš„ AI å·²ç»ä¸å†æ˜¯æ–°é²œçš„è¯•éªŒå“ï¼Œè€Œæ˜¯å¦‚åŒ IDE ä¸€èˆ¬ä¸å¯æˆ–ç¼ºçš„ç”Ÿäº§åŠ›å·¥å…·ã€‚</p>
<p>æˆ‘å…¨é¢æ‹¥æŠ±äº† <strong>"Vibe Coding"</strong>ï¼ˆçµæ„Ÿç¼–ç¨‹ï¼‰çš„å·¥ä½œæ¨¡å¼â€”â€”è¿™ä¸ªè¯æ­£æ˜¯ Andrej Karpathy å‘æ˜çš„ã€‚ä»–åœ¨æœ€è¿‘çš„æ¨æ–‡ä¸­æ„Ÿå¹â€œ<strong>ä½œä¸ºç¨‹åºå‘˜ï¼Œæˆ‘ä»æ²¡æ„Ÿè§‰è‡ªå·±è¿™ä¹ˆè½åè¿‡</strong>â€ï¼Œå› ä¸ºè¡Œä¸šæ­£åœ¨è¢« <strong>agentsã€subagentsã€contextsã€memoryã€MCP</strong> ç­‰ 15 ä¸ªæ–°æ¦‚å¿µå‰§çƒˆé‡æ„ã€‚æ­£å¦‚ä»–æ‰€å–»ï¼Œæˆ‘ä»¬æ‰‹ä¸­æ­£æ¡ç€ä¸€ä¸ª**â€œæ²¡æœ‰è¯´æ˜ä¹¦çš„å¤–æ˜Ÿå·¥å…·â€**ï¼Œæ¯ä¸ªäººéƒ½éœ€è¦å»ºç«‹æ–°çš„å¿ƒæ™ºæ¨¡å‹æ¥é©¾é©­å®ƒã€‚</p>
<p>æˆ‘çš„å¼€å‘å·¥å…·é“¾ä¹Ÿç»å†äº†æ·±åº¦è¿­ä»£ã€‚è™½ç„¶ Cursor æ›¾æ˜¯ä¸»åŠ›ï¼Œä½† <strong>Claude Code</strong> å‡­å€Ÿ <strong>Opus 4.5 <strong>æ¨¡å‹åœ¨é•¿ä¸Šä¸‹æ–‡ä¸‹çš„ç¨³å®šæ€§ï¼ˆä½éšæœºæ€§ï¼‰ä¸æ›´å‹å¥½çš„è®¡è´¹æ¨¡å¼ï¼Œæˆä¸ºäº†æˆ‘çš„é¦–é€‰ã€‚æ­£å¦‚ä¸šå†…è®¨è®ºçš„é‚£æ ·ï¼ŒContextï¼ˆä¸Šä¸‹æ–‡ï¼‰ç®¡ç†æ˜¯æ–°æ—¶ä»£çš„æ ¸å¿ƒæŠ€èƒ½ã€‚æˆ‘ä¸åªä¾èµ–å•ä¸€å·¥å…·ï¼Œè€Œæ˜¯æ ¹æ®ä»»åŠ¡ç‰¹æ€§ç»„åˆä½¿ç”¨ï¼šç”¨ Claude Code å¤„ç†å¤æ‚é€»è¾‘ï¼Œç”¨ Codex è¾…åŠ©åç«¯æ€è€ƒï¼Œç”šè‡³å¹¶è¡Œè¿è¡Œå¤šä¸ª Agentã€‚è¿™ç§â€œå¤šæ¨¡å‹ç¼–æ’â€çš„èƒ½åŠ›ï¼Œæå¤§åœ°é‡Šæ”¾äº†ç¼–ç ç”Ÿäº§åŠ›ï¼Œä½¿æˆ‘è¿›å…¥äº†</strong>æœˆå‡ä»£ç äº§å‡º 3-5 ä¸‡è¡Œ</strong> çš„â€œè¶…çº§ä¸ªä½“â€æ¨¡å¼ã€‚ç‰¹åˆ«æ˜¯åœ¨åŸºäº Tiptap çš„ç¼–è¾‘å™¨å¼€å‘ä¸­ï¼ŒAI å¸®åŠ©æˆ‘å¿«é€Ÿç”Ÿæˆäº†å¤§é‡çš„æ ·æ¿ä»£ç ä¸ç±»å‹å®šä¹‰ï¼Œè®©æˆ‘èƒ½ä¸“æ³¨äºæ ¸å¿ƒé€»è¾‘çš„è®¾è®¡ã€‚</p>
<p>è€Œ <strong>Gemini</strong> åˆ™æ›´å¤šæ‰®æ¼”äº†æ¶æ„å¸ˆçš„è§’è‰²ã€‚åœ¨è¿›è¡ŒæŠ€æœ¯æ–¹æ¡ˆè®¾è®¡æ—¶ï¼Œæˆ‘ä¼šåˆ©ç”¨å®ƒæ¥å‘æ•£æ€è·¯ã€æŸ¥æ¼è¡¥ç¼ºã€‚AI çš„å­˜åœ¨ï¼Œæå¤§åœ°é™ä½äº†æŠ€æœ¯éªŒè¯çš„æˆæœ¬ã€‚DeepWiki è¾…åŠ©é˜…è¯»æºç ï¼Œä¹Ÿè®©æŠ€æœ¯è°ƒç ”çš„æ•ˆç‡æå‡äº†ä¸€ä¸ªç»´åº¦ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f828863dd638439d8b533501399f99e4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rOv5rO3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767419110&amp;x-signature=Snk0vxZ%2BK4Ewg%2F64pm9Tet58kNQ%3D" alt="AIè¾…åŠ©å¼€å‘å·¥ä½œæµ" loading="lazy"/></p>
<h3 data-id="heading-3">æ€»ç»“ä¸å±•æœ›ï¼šæŠ€æœ¯å›å½’åˆ›ä½œ</h3>
<p>ç«™åœ¨ 2025 å¹´çš„èŠ‚ç‚¹ä¸Šï¼Œæ–°ç‰ˆä¸“æ ç¼–è¾‘å™¨çš„ä¸Šçº¿æ—¢æ˜¯ä¸€ä¸ªé˜¶æ®µçš„ç»ˆç‚¹ï¼Œä¹Ÿæ˜¯æ–°çš„èµ·ç‚¹ã€‚</p>
<p>å±•æœ›æ˜å¹´ï¼Œæˆ‘è®¡åˆ’åœ¨ä»¥ä¸‹æ–¹å‘æŒç»­æ·±è€•ï¼š</p>
<ol>
<li>
<p><strong>æ·±åº¦ååŒ</strong>ï¼šæ¢ç´¢ ToB åœºæ™¯ä¸‹çš„å®æ—¶åä½œæŠ€æœ¯ï¼›</p>
</li>
<li>
<p><strong>æ™ºèƒ½åˆ›ä½œ</strong>ï¼šå°† AI è¾…åŠ©åˆ›ä½œæ·±åº¦èå…¥ç¼–è¾‘å™¨æ ¸å¿ƒï¼Œæ‰“é€ æ›´â€œæ‡‚â€åˆ›ä½œè€…çš„æ™ºèƒ½å·¥å…·ã€‚</p>
</li>
</ol>
<p>è§‚å¯Ÿå½“ä¸‹çš„è¡Œä¸šç”Ÿæ€ï¼Œå¼€å‘è€…ä»¬æ­£èµ°å‘ä¸åŒçš„å‘½è¿åˆ†æ”¯ï¼šæœ‰çš„â€œä¼ ç»Ÿç²¾è‹±â€å—å›°äºæ—§æœ‰å¿ƒæ™ºæ¨¡å‹è€Œæ„Ÿåˆ°ç„¦è™‘ï¼Œæœ‰çš„â€œå‰ç«¯è¾¹ç¼˜å‹â€é€‰æ‰‹å´å›  AI è¡¥å…¨äº†èƒ½åŠ›çŸ­æ¿è€Œå¦‚é±¼å¾—æ°´ã€‚è¦å®Œæˆä»â€œæ‰‹è‰ºäººâ€åˆ°â€œè¶…çº§ä¸ªä½“â€çš„è·ƒè¿ï¼Œæ ¸å¿ƒåœ¨äº<strong>æ¥å—ä¸ç¡®å®šæ€§</strong>â€”â€”å­¦ä¼šä¸â€œæœ‰æ—¶å€™èƒ½è¡Œã€æœ‰æ—¶å€™ä¸è¡Œâ€çš„ç³»ç»Ÿå…±èˆï¼Œå°†æŠ€èƒ½ç‚¹ä»å•çº¯çš„ä»£ç å®ç°è½¬ç§»åˆ°å¯¹ AI çš„<strong>ç¼–æ’ï¼ˆOrchestrationï¼‰ä¸å¿«é€Ÿè¿­ä»£éªŒè¯</strong>ä¸Šã€‚åˆ«åšé‚£ä¸ªå›ºæ‰§æŠµæŠ—çš„è½åè€…ï¼Œå»æˆä¸ºæ–°åŸå¸‚çš„å»ºé€ è€…ã€‚</p>
<p><strong>ä½ æ˜¯å¦ä¹Ÿå‡†å¤‡å¥½æ‹¥æŠ± AIï¼Œé‡æ„ä½ çš„å·¥ä½œæ–¹å¼äº†ï¼Ÿ</strong> å°‘ä¸€åˆ†æ— è°“çš„ç„¦è™‘ï¼Œå¤šä¸€ä»½å¯¹æŠ€æœ¯çš„å¥½å¥‡ä¸å®è·µã€‚è¿™å°±æ˜¯æˆ‘çš„ 2025 å¹´ç­”å·ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Goå•åç¨‹äº‹ä»¶è°ƒåº¦å™¨ï¼šæ¸¸æˆåç«¯çš„æ— é”æœ‰åºä¸å“åº”æ—¶é—´æŒæ§]]></title>    <link>https://juejin.cn/post/7588028859541176346</link>    <guid>https://juejin.cn/post/7588028859541176346</guid>    <pubDate>2025-12-27T05:59:12.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588028859541176346" data-draft-id="7588067055481421833" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Goå•åç¨‹äº‹ä»¶è°ƒåº¦å™¨ï¼šæ¸¸æˆåç«¯çš„æ— é”æœ‰åºä¸å“åº”æ—¶é—´æŒæ§"/> <meta itemprop="keywords" content="åç«¯,æ¸¸æˆå¼€å‘"/> <meta itemprop="datePublished" content="2025-12-27T05:59:12.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å–µä¸ªå’ª"/> <meta itemprop="url" content="https://juejin.cn/user/1350630784901262"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Goå•åç¨‹äº‹ä»¶è°ƒåº¦å™¨ï¼šæ¸¸æˆåç«¯çš„æ— é”æœ‰åºä¸å“åº”æ—¶é—´æŒæ§
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1350630784901262/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å–µä¸ªå’ª
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-27T05:59:12.000Z" title="Sat Dec 27 2025 05:59:12 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Goå•åç¨‹äº‹ä»¶è°ƒåº¦å™¨ï¼šæ¸¸æˆåç«¯çš„æ— é”æœ‰åºä¸å“åº”æ—¶é—´æŒæ§</h2>
<p>åœ¨æ¸¸æˆåç«¯æ¶æ„è®¾è®¡ä¸­ï¼Œ<strong>å•åç¨‹ï¼ˆå•çº¿ç¨‹ï¼‰äº‹ä»¶è°ƒåº¦å™¨ï¼ˆEvent Loopï¼‰</strong> æ˜¯å®ç° â€œ<strong>ç»å¯¹æ¶ˆæ¯é¡ºåº</strong>â€ ä¸ â€œ<strong>æ— é”çŠ¶æ€ç®¡ç†</strong>â€ çš„æ ¸å¿ƒæ–¹æ¡ˆã€‚</p>
<p>ç›¸è¾ƒäºå¤šçº¿ç¨‹æ¨¡å‹æ‰€é¢ä¸´çš„é”ç«äº‰ã€ç«æ€æ¡ä»¶ã€æ•°æ®ä¸€è‡´æ€§ç­‰å¤æ‚é—®é¢˜ï¼Œå•åç¨‹è°ƒåº¦å™¨é€šè¿‡ å®Œå…¨ä¸²è¡ŒåŒ–æ‰§è¡Œ æ‰€æœ‰æ ¸å¿ƒé€»è¾‘ï¼Œä»æ ¹æœ¬ä¸Šè§„é¿äº†å¹¶å‘å®‰å…¨é£é™©â€”â€”è¿™ä¸€ç‰¹æ€§å¯¹äºå¯¹çŠ¶æ€å‡†ç¡®æ€§è¦æ±‚æé«˜çš„æ¸¸æˆåœºæ™¯ï¼ˆå¦‚ç©å®¶è¡€é‡ã€é‡‘å¸ã€æŠ€èƒ½é‡Šæ”¾ç»“æœã€æˆ˜æ–—èƒœè´Ÿåˆ¤å®šï¼‰å…·æœ‰å†³å®šæ€§æ„ä¹‰ã€‚</p>
<p>ç„¶è€Œï¼Œä¸²è¡Œæ‰§è¡Œä¹Ÿå¸¦æ¥äº†ä¸¥è‹›çš„çº¦æŸï¼š<strong>ä»»ä½•ä¸€ä¸ªäº‹ä»¶çš„å¤„ç†å»¶è¿Ÿï¼Œéƒ½ä¼šç›´æ¥æ”¾å¤§ä¸ºå…¨æœç©å®¶çš„ä½“éªŒæŸè€—</strong>ã€‚å› æ­¤ï¼Œå•åç¨‹è°ƒåº¦å™¨çš„æ ¸å¿ƒè®¾è®¡ç›®æ ‡ï¼Œæ˜¯åœ¨ä¿è¯é€»è¾‘æœ‰åºæ€§çš„å‰æä¸‹ï¼Œ<strong>æè‡´æ§åˆ¶å“åº”æ—¶é—´ï¼Œå®ˆä½ç³»ç»Ÿç¨³å®šæ€§çº¢çº¿</strong>ã€‚</p>
<h3 data-id="heading-1">ä¸€ã€å“åº”æ—¶é—´æ§åˆ¶ï¼šå•åç¨‹è°ƒåº¦çš„ç”Ÿå‘½çº¿</h3>
<p>å•åç¨‹ Event Loop çš„æ€§èƒ½ç“¶é¢ˆï¼Œæœ¬è´¨ä¸Šæ˜¯ â€œ<strong>æ—¶é—´åˆ‡ç‰‡çš„æè‡´åˆ†é…</strong>â€ã€‚å…¶ä¸­ï¼š</p>
<ul>
<li><strong>å•ä¸ªäº‹ä»¶çš„å¤„ç†æ—¶é—´</strong>åº”æ§åˆ¶åœ¨ **100 å¾®ç§’ï¼ˆÎ¼sï¼‰**ä»¥å†…ï¼›</li>
<li>**é€»è¾‘å¸§ï¼ˆTickï¼‰**å‘¨æœŸåˆ™ä¾æ¸¸æˆç±»å‹çµæ´»è°ƒæ•´ï¼Œé€šå¸¸ä¸º <strong>15â€“50 æ¯«ç§’ï¼ˆmsï¼‰</strong>ã€‚</li>
</ul>
<p>åœ¨é«˜æ€§èƒ½æ¸¸æˆåç«¯ä¸­ï¼Œ<strong>1 æ¯«ç§’ï¼ˆmsï¼‰</strong> æ˜¯ä¸å¯é€¾è¶Šçš„çº¢çº¿ã€‚ä¸€æ—¦å•ä¸ªäº‹ä»¶å¤„ç†è€—æ—¶è¶…è¿‡ 1msï¼Œå³è¢«åˆ¤å®šä¸ºâ€œé‡åº¦ä»»åŠ¡â€ã€‚åŸå› åœ¨äºï¼š</p>
<ul>
<li>å•åç¨‹çš„ä¸²è¡Œæ‰§è¡Œå†³å®šäº†ï¼š<strong>ä¸€ä¸ªé˜»å¡äº‹ä»¶ä¼šå»¶è¿Ÿæ‰€æœ‰åç»­äº‹ä»¶çš„å¤„ç†</strong>â€”â€”æ— è®ºæ˜¯ç©å®¶çš„ WebSocket æ“ä½œã€gRPC å¤–éƒ¨è°ƒç”¨ï¼Œè¿˜æ˜¯æ¸¸æˆä¸–ç•Œçš„å¿ƒè·³å®šæ—¶å™¨ã€‚</li>
<li>å¯¹ç©å®¶è€Œè¨€ï¼Œ1ms çš„å¡é¡¿å¯èƒ½è¡¨ç°ä¸ºâ€œæŠ€èƒ½é‡Šæ”¾å»¶è¿Ÿâ€ã€â€œè§’è‰²ç§»åŠ¨ç²˜æ»â€ï¼›å¯¹ç³»ç»Ÿè€Œè¨€ï¼Œæ¯ç§’ä»…èƒ½å¤„ç† â‰¤1000ä¸ª æ­¤ç±»ä»»åŠ¡ï¼Œ<strong>ä¸¥é‡æ‹‰ä½å…¨æœå¹¶å‘æ‰¿è½½èƒ½åŠ›</strong>ã€‚</li>
</ul>
<blockquote>
<p>å¯ä»¥å½¢è±¡åœ°è¯´ï¼šé€»è¾‘çº¿ç¨‹ä¸­çš„ 1msï¼Œå ªæ¯”ç°å®ä¸–ç•Œçš„ 1 å°æ—¶ã€‚å®ˆä½è¿™æ¡çº¢çº¿ï¼Œå°±æ˜¯å®ˆä½ç©å®¶ä½“éªŒä¸ç³»ç»Ÿç¨³å®šæ€§çš„æ ¹åŸºã€‚</p>
</blockquote>
<h4 data-id="heading-2">1.1 æ ¸å¿ƒäº‹ä»¶è€—æ—¶æŒ‡æ ‡ä¸å½±å“åˆ†çº§</h4>
<p>ä¸åŒè€—æ—¶çš„äº‹ä»¶å¯¹ç³»ç»Ÿçš„å½±å“å·®å¼‚å·¨å¤§ï¼Œä»¥ä¸‹æ˜¯ç»è¿‡è¡Œä¸šå®è·µéªŒè¯çš„åˆ†çº§æ ‡å‡†ï¼Œå¯ç›´æ¥ä½œä¸ºç ”å‘è¿‡ç¨‹ä¸­çš„æ€§èƒ½è¯„ä¼°ä¾æ®ï¼š</p>



































<table><thead><tr><th>æŒ‡æ ‡ç­‰çº§</th><th>å¤„ç†è€—æ—¶</th><th>å…¸å‹åœºæ™¯</th><th>å½±å“è¯„ä¼°</th></tr></thead><tbody><tr><td>ç†æƒ³çº§</td><td>&lt; 50 Î¼s</td><td>çº¯å†…å­˜è¯»å†™ã€ç®€å•å±æ€§ä¿®æ”¹ï¼ˆå¦‚ç©å®¶åæ ‡æ›´æ–°ã€é“å…·ä½¿ç”¨æ‰£é™¤ã€åŸºç¡€çŠ¶æ€åˆ¤å®šï¼‰</td><td>æå¿«ä¸”æ— è´Ÿæ‹…ï¼Œæ˜¯å•åç¨‹äº‹ä»¶çš„æœ€ä¼˜ç›®æ ‡ï¼Œå¯æ”¯æŒæé«˜å¹¶å‘å¤„ç†</td></tr><tr><td>å®‰å…¨çº§</td><td>50 - 200 Î¼s</td><td>å°‘é‡å¤æ‚è®¡ç®—ï¼ˆå¦‚2Dç½‘æ ¼AOIï¼ˆå…´è¶£åŒºåŸŸï¼‰å‘¨è¾¹ç©å®¶å¿«é€ŸæŸ¥è¯¢ã€å¤šå±æ€§è”åŠ¨æ›´æ–°ï¼‰</td><td>æ€§èƒ½å®‰å…¨å¯æ§ï¼Œå³ä½¿ç¬æ—¶å¹¶å‘å¢åŠ ï¼Œä¹Ÿä¸ä¼šå¯¼è‡´é€»è¾‘å¸§æ³¢åŠ¨</td></tr><tr><td>è­¦æˆ’çº§</td><td>200 Î¼s - 1 ms</td><td>å¤šæ¡ä»¶ç­›é€‰æŸ¥è¯¢ï¼ˆå¦‚ç©å®¶èƒŒåŒ…å†…ç¬¦åˆç‰¹å®šæ ‡ç­¾çš„é“å…·ç»Ÿè®¡ï¼‰ã€ç®€å•æˆ˜æ–—æ•°å€¼è®¡ç®—</td><td>ç•¥æ…¢ï¼Œå•äº‹ä»¶å½±å“æœ‰é™ï¼Œä½†å¤§é‡æ­¤ç±»äº‹ä»¶å¹¶å‘æ—¶ï¼Œä¼šå¼•å‘é€»è¾‘å¸§æŠ–åŠ¨ï¼ˆJitterï¼‰ï¼Œå¯¼è‡´ç³»ç»Ÿå“åº”ä¸ç¨³å®š</td></tr><tr><td>å±é™©çº§</td><td>&gt; 1 ms</td><td>æœªä¼˜åŒ–çš„å¤§è§„æ¨¡æˆ˜æ–—æŠ€èƒ½ç»“ç®—ã€å…¨æœç©å®¶æ•°æ®éå†ã€æ— ç¼“å­˜çš„å¤æ‚æŸ¥è¯¢</td><td>ç›´æ¥é˜»å¡ç³»ç»Ÿï¼šå•åç¨‹æ¯ç§’ä»…èƒ½å¤„ç†ä¸è¶³1000ä¸ªæ­¤ç±»ä»»åŠ¡ï¼Œç©å®¶å¯æ˜æ˜¾æ„ŸçŸ¥å»¶è¿Ÿï¼Œä¸¥é‡æ—¶å¼•å‘å…¨æœå¡é¡¿</td></tr></tbody></table>
<h4 data-id="heading-3">1.2 æŒ‡æ ‡èƒŒåçš„é€»è¾‘ï¼šåŸºäºæ¸¸æˆå¸§çš„é¢„ç®—è®¡ç®—</h4>
<p>ä¸Šè¿°æŒ‡æ ‡å¹¶éå‡­ç©ºè®¾å®šï¼Œè€Œæ˜¯åŸºäº <strong>â€œé€»è¾‘å¸§ï¼ˆTickï¼‰</strong>â€ çš„é¢„ç®—åˆ†é…æ¨¡å‹æ¨å¯¼è€Œæ¥ã€‚</p>
<p>ä»¥è¡Œä¸šå¸¸è§çš„ <strong>20Hzï¼ˆæ¯ç§’ 20 å¸§ï¼‰</strong> ä¸ºä¾‹ï¼š</p>
<ul>
<li><strong>å•å¸§æ€»æ—¶é—´</strong>ï¼š1000 ms Ã· 20 = <strong>50 ms / å¸§</strong></li>
<li><strong>å®‰å…¨é¢„ç•™</strong>ï¼šä¸ºåº”å¯¹æ¶ˆæ¯çªå‘ã€GCã€ç³»ç»Ÿè°ƒåº¦ç­‰ä¸ç¡®å®šæ€§ï¼Œé€šå¸¸ä»…åˆ†é… <strong>50% é¢„ç®—ï¼ˆ25 msï¼‰</strong> ç»™ä¸šåŠ¡é€»è¾‘</li>
<li><strong>å•äº‹ä»¶å¹³å‡ä¸Šé™</strong>ï¼šè‹¥å•å¸§éœ€å¤„ç† 500 æ¡æ¶ˆæ¯ï¼Œåˆ™æ¯æ¡å¹³å‡è€—æ—¶ â‰¤ 25 ms Ã· 500 = 50 Î¼s</li>
</ul>
<p>è¿™æ­£æ˜¯â€œç†æƒ³çº§â€è®¾å®šä¸º 50 Î¼s çš„æ ¹æœ¬åŸå› ã€‚</p>
<p>ä¸åŒæ¸¸æˆç±»å‹å¯¹åº”ä¸åŒå¸§ç‡ä¸é¢„ç®—ï¼š</p>





























<table><thead><tr><th>æ¸¸æˆç±»å‹</th><th>å»ºè®®å¸§ç‡</th><th>å•å¸§é¢„ç®—</th><th>å•äº‹ä»¶å»ºè®®ä¸Šé™ï¼ˆ500 QPSï¼‰</th></tr></thead><tbody><tr><td>ç«æŠ€ç±»ï¼ˆMOBA/å°„å‡»ï¼‰</td><td>30â€“60 Hz</td><td>16â€“33 ms</td><td>&lt; 33 Î¼s</td></tr><tr><td>ä¸­åº¦äº¤äº’ç±»</td><td>20 Hz</td><td>25 ms</td><td>&lt; 50 Î¼s</td></tr><tr><td>ä¼‘é—²/æŒ‚æœºç±»</td><td>10 Hz</td><td>50 ms</td><td>&lt; 100â€“200 Î¼s</td></tr></tbody></table>
<blockquote>
<p>å·¥ç¨‹å»ºè®®ï¼šåœ¨æ¶æ„è®¾è®¡åˆæœŸå°±åº”æ ¹æ®æ¸¸æˆç±»å‹æ˜ç¡®å¸§é¢„ç®—ï¼Œå¹¶å°†è¯¥æŒ‡æ ‡çº³å…¥ CI/CD æ€§èƒ½é—¨ç¦ã€‚</p>
</blockquote>
<h4 data-id="heading-4">1.3 è¶…æ—¶äº‹ä»¶çš„è§£å†³æ–¹æ¡ˆï¼šä¸‰å¤§æ ¸å¿ƒä¼˜åŒ–ç­–ç•¥</h4>
<p>å®é™…ä¸šåŠ¡ä¸­ï¼Œéƒ¨åˆ†é€»è¾‘ï¼ˆå¦‚è·¨æœæˆ˜æ–—ç»“ç®—ã€å…¨æœæ•°æ®ç»Ÿè®¡ï¼‰éš¾ä»¥å‹ç¼©è‡³ 1ms å†…ã€‚æ­¤æ—¶éœ€é€šè¿‡ â€œ<strong>éé˜»å¡åŒ–</strong>â€ æ‰‹æ®µæ‹†è§£å‹åŠ›ï¼š</p>
<h5 data-id="heading-5">ç­–ç•¥Aï¼šä»»åŠ¡åˆ‡ç‰‡ï¼ˆTime Slicingï¼‰â€”â€” å¤§ä»»åŠ¡æ‹†åˆ†ä¸ºå°å¸§æ‰§è¡Œ</h5>
<ul>
<li><strong>æ€è·¯</strong>ï¼šå°†é•¿ä»»åŠ¡æ‹†åˆ†ä¸ºå¤šä¸ªå­ä»»åŠ¡ï¼Œ<strong>åˆ†æ•£åˆ°å¤šä¸ªé€»è¾‘å¸§ä¸­é€æ­¥å®Œæˆ</strong>ã€‚</li>
<li><strong>åœºæ™¯</strong>ï¼šå…¨æœå‘å¥–ï¼ˆ10 ä¸‡ç©å®¶ï¼‰ã€è·¨æœæ’è¡Œæ¦œè®¡ç®—ã€‚</li>
<li><strong>å…³é”®ç‚¹</strong>ï¼š
<ul>
<li>æŒ‰ <strong>â€œå®‰å…¨çº§â€è€—æ—¶</strong> æ‹†åˆ†ï¼ˆå¦‚æ¯å¸§å¤„ç† 500 äººï¼Œè€—æ—¶ &lt; 50 Î¼sï¼‰</li>
<li><strong>æŒä¹…åŒ–è¿›åº¦</strong>ï¼ˆå¦‚â€œå·²å¤„ç†è‡³ UID=3200â€ï¼‰ï¼Œæ”¯æŒæ–­ç‚¹ç»­åš</li>
<li>é‡å¯åå¯ä»æ–­ç‚¹æ¢å¤ï¼Œç¡®ä¿ <strong>å¹‚ç­‰æ€§ä¸ä¸€è‡´æ€§</strong></li>
</ul>
</li>
</ul>
<h5 data-id="heading-6">ç­–ç•¥Bï¼šå¼‚æ­¥å¸è½½ï¼ˆOffloadingï¼‰â€”â€” è®¡ç®—ä»»åŠ¡ç§»äº¤è‡³Workeråç¨‹</h5>
<ul>
<li><strong>æ€è·¯</strong>ï¼šä¸»åç¨‹ä»…åš <strong>è°ƒåº¦ä¸çŠ¶æ€ç®¡ç†</strong>ï¼Œå°†æ— çŠ¶æ€/å¼±çŠ¶æ€è®¡ç®—å¸è½½è‡³ Worker Poolã€‚</li>
<li><strong>åœºæ™¯</strong>ï¼šA* å¯»è·¯ã€è§†é‡ AOI è®¡ç®—ã€ä¼¤å®³å…¬å¼ç»“ç®—ã€æ’è¡Œæ¦œæƒé‡ã€‚</li>
<li><strong>å…³é”®ç‚¹</strong>ï¼š
<ul>
<li>ä¸»åç¨‹ä¸ Worker é€šè¿‡ <strong>å¸¦ç¼“å†²é€šé“</strong> é€šä¿¡ï¼Œ<strong>ç»ä¸é˜»å¡ä¸»å¾ªç¯</strong></li>
<li>Worker è¿”å›ç»“æœåï¼Œä¸»åç¨‹éœ€ <strong>æ ¡éªŒçŠ¶æ€æ—¶æ•ˆæ€§</strong>ï¼ˆå¦‚ç©å®¶æ˜¯å¦å·²ç¦»çº¿ï¼‰</li>
<li>Worker æ•°é‡å»ºè®® â‰¤ CPU æ ¸æ•°ï¼Œé¿å…è°ƒåº¦å¼€é”€åè¶…æ”¶ç›Š</li>
</ul>
</li>
</ul>
<h5 data-id="heading-7">ç­–ç•¥Cï¼šæ•°æ®é¢„å¤„ç†â€”â€” ç©ºé—´æ¢æ—¶é—´ï¼Œè§„é¿å®æ—¶è®¡ç®—</h5>
<ul>
<li><strong>æ€è·¯</strong>ï¼š<strong>æå‰ç¼“å­˜é«˜é¢‘æŸ¥è¯¢ç»“æœ</strong>ï¼Œé¿å…è¿è¡Œæ—¶éå†æˆ–å¤æ‚è®¡ç®—ã€‚</li>
<li><strong>åœºæ™¯</strong>ï¼šå·¥ä¼šæœ€é«˜ç­‰çº§ç©å®¶ã€æˆ˜åŠ› Top100ã€å¸¸ç”¨é“å…·ç»Ÿè®¡ã€‚</li>
<li><strong>å…³é”®ç‚¹</strong>ï¼š
<ul>
<li>åœ¨ <strong>æ•°æ®å˜æ›´æ—¶å¢é‡æ›´æ–°ç¼“å­˜</strong>ï¼ˆå¦‚ç©å®¶å‡çº§ â†’ æ›´æ–°å·¥ä¼šç¼“å­˜ï¼‰</li>
<li>é‡‡ç”¨ <strong>è¯»å¤šå†™å°‘</strong> ç­–ç•¥ï¼›è‹¥å†™é¢‘ç‡è¿‡é«˜ï¼ˆå¦‚å®æ—¶ä¼¤å®³ï¼‰ï¼Œé¢„å¤„ç†æ”¶ç›Šå°†è¢«æ›´æ–°æˆæœ¬æŠµæ¶ˆ</li>
<li>å¯ç»“åˆ <strong>LRU + å®šæ—¶åˆ·æ–°</strong> æœºåˆ¶ï¼Œå¹³è¡¡ä¸€è‡´æ€§ä¸æ€§èƒ½</li>
</ul>
</li>
</ul>
<h3 data-id="heading-8">äºŒã€ä¼˜å…ˆçº§æ§åˆ¶ï¼šä¿éšœæ ¸å¿ƒä½“éªŒçš„è°ƒåº¦é€»è¾‘</h3>
<p>å•åç¨‹çš„ä¸²è¡Œç‰¹æ€§å†³å®šäº† <strong>äº‹ä»¶å¤„ç†é¡ºåº</strong> = <strong>ç©å®¶ä½“éªŒè´¨é‡</strong>ã€‚è‹¥åå°ç»Ÿè®¡å ç”¨å¸§é¢„ç®—ï¼Œå°†ç›´æ¥å¯¼è‡´ç©å®¶æ“ä½œå»¶è¿Ÿâ€”â€”è¿™æ˜¯ä¸å¯æ¥å—çš„ã€‚</p>
<p>å› æ­¤ï¼Œå¿…é¡»å®æ–½ <strong>ä¸‰çº§ä¼˜å…ˆçº§è°ƒåº¦</strong>ï¼š</p>
<h4 data-id="heading-9">2.1 ç¬¬ä¸€ä¼˜å…ˆçº§ï¼ˆHighï¼‰ï¼šç©å®¶å®æ—¶äº¤äº’æŒ‡ä»¤ï¼ˆWebSocketï¼‰</h4>
<ul>
<li><strong>åœºæ™¯</strong>ï¼šç§»åŠ¨ã€æŠ€èƒ½é‡Šæ”¾ã€é“å…·ä½¿ç”¨ã€NPC å¯¹è¯</li>
<li><strong>ç†ç”±</strong>ï¼šç›´æ¥å½±å“â€œæ“ä½œæ‰‹æ„Ÿâ€ï¼Œç«¯åˆ°ç«¯å»¶è¿Ÿåº” &lt; 100 ms</li>
<li><strong>ç­–ç•¥</strong>ï¼š
<ul>
<li>æŠ•é€’è‡³ <code>highChan</code></li>
<li>ä¸»å¾ªç¯ <strong>ä¼˜å…ˆæ¸…ç©º highChan</strong></li>
<li>è‹¥å †ç§¯ &gt; 100 æ¡ï¼Œè§¦å‘å‘Šè­¦å¹¶ é™æµä½ä¼˜å…ˆçº§æŠ•é€’</li>
</ul>
</li>
</ul>
<h5 data-id="heading-10">2.2 ç¬¬äºŒä¼˜å…ˆçº§ï¼ˆMediumï¼‰ï¼šæ¸¸æˆä¸–ç•Œå¿ƒè·³å®šæ—¶å™¨ï¼ˆTimerï¼‰</h5>
<ul>
<li><strong>åœºæ™¯</strong>ï¼šæ€ªç‰© AIã€æŠ€èƒ½ CDã€å›è¡€å›è“ã€æˆ˜æ–—åŒæ­¥ã€å…¨æœæ´»åŠ¨</li>
<li><strong>ç†ç”±</strong>ï¼šé©±åŠ¨æ¸¸æˆä¸–ç•Œè¿è½¬ï¼Œå»¶è¿Ÿä¼šå¯¼è‡´â€œæ—¶é—´è½´é”™ä¹±â€</li>
<li><strong>ç­–ç•¥</strong>ï¼š
<ul>
<li>æŠ•é€’è‡³ <code>midChan</code></li>
<li>åœ¨ highChan ä¸ºç©ºåå¤„ç†</li>
<li>å®šæ—¶å™¨åˆ†æ¡¶ï¼ˆå¦‚ 100 ms / 1 s / 5 s ç»„ï¼‰ï¼Œé¿å…é›†ä¸­è§¦å‘</li>
</ul>
</li>
</ul>
<h5 data-id="heading-11">2.3 ç¬¬ä¸‰ä¼˜å…ˆçº§ï¼ˆLowï¼‰ï¼šå¤–éƒ¨è¯·æ±‚ä¸å¼‚æ­¥å›è°ƒ</h5>
<ul>
<li><strong>åœºæ™¯</strong>ï¼šgRPC æŸ¥è¯¢ã€DB/Redis å›è°ƒã€å…¨æœç»Ÿè®¡ã€æ—¥å¿—ä¸ŠæŠ¥</li>
<li><strong>ç†ç”±</strong>ï¼šå¯¹å®æ—¶æ€§ä¸æ•æ„Ÿï¼Œå¯å®¹å¿æ¯«ç§’çº§å»¶è¿Ÿ</li>
<li><strong>ç­–ç•¥</strong>ï¼š
<ul>
<li>æŠ•é€’è‡³ <code>lowChan</code></li>
<li>ä»…åœ¨ high + mid ä¸ºç©ºæ—¶å¤„ç†ï¼Œæˆ–æ¯å¸§æœ«å°¾åˆ†é… â‰¤ 2 ms é¢„ç®—</li>
<li>è‹¥å †ç§¯ &gt; 1000 æ¡ï¼Œå¯ä¸¢å¼ƒéå…³é”®äº‹ä»¶ï¼ˆå¦‚åœ¨çº¿äººæ•°ç»Ÿè®¡ï¼‰</li>
</ul>
</li>
</ul>
<h5 data-id="heading-12">2.4 å…³é”®è¡¥å……ï¼šé¿å…ä¼˜å…ˆçº§å€’ç½®</h5>
<ul>
<li>âŒ ç¦æ­¢ä½ä¼˜å…ˆçº§äº‹ä»¶æŒæœ‰ é•¿æ—¶é—´èµ„æºï¼ˆå¦‚ DB è¿æ¥ï¼‰</li>
<li>âŒ ç¦æ­¢åœ¨ä½ä¼˜å…ˆçº§ä¸­ è§¦å‘é«˜ä¼˜å…ˆçº§äº‹ä»¶ï¼ˆå¦‚ç»Ÿè®¡æ—¶å‘æ¨é€ï¼‰</li>
<li>âœ… å¯¹ä½ä¼˜å…ˆçº§äº‹ä»¶è®¾ç½® æœ€å¤§å¤„ç†æ—¶é•¿ï¼ˆå¦‚ 500 Î¼sï¼‰ï¼Œè¶…æ—¶åˆ™ç§»äº¤ä¸‹ä¸€å¸§</li>
</ul>
<blockquote>
<p>ä¼˜å…ˆçº§ä¸æ˜¯å»ºè®®ï¼Œè€Œæ˜¯ç©å®¶ä½“éªŒçš„æŠ¤æ ã€‚</p>
</blockquote>
<h3 data-id="heading-13">ä¸‰ã€å®è·µå‚è€ƒï¼šGoå•åç¨‹äº‹ä»¶è°ƒåº¦å™¨å®ç°</h3>
<p>åŸºäºä¸Šè¿°è®¾è®¡ï¼Œå¯åˆ©ç”¨ Go çš„ channel + goroutine ç‰¹æ€§ï¼Œæ„å»ºè½»é‡ã€é«˜æ•ˆã€ç¡®å®šæ€§çš„äº‹ä»¶è°ƒåº¦å™¨ã€‚</p>
<h4 data-id="heading-14">3.1 æ ¸å¿ƒè®¾è®¡</h4>
<ul>
<li>ä¸‰é€šé“åˆ†ä¼˜å…ˆçº§ï¼š<code>highChan</code> / <code>midChan</code> / <code>lowChan</code>ï¼ˆå‡å¸¦ç¼“å†²ï¼‰</li>
<li>ç»Ÿä¸€äº‹ä»¶ç»“æ„ï¼šå«å¤„ç†å‡½æ•°ã€ä¼˜å…ˆçº§ã€åˆ›å»ºæ—¶é—´ï¼ˆç”¨äºç›‘æ§ï¼‰</li>
<li>ä¸»å¾ªç¯è°ƒåº¦ï¼šä¼˜å…ˆæ¶ˆè´¹ high â†’ mid â†’ lowï¼Œå¹¶ä¸¥æ ¼æ§åˆ¶å¸§è€—æ—¶</li>
</ul>
<h4 data-id="heading-15">3.2 å‚è€ƒä»£ç </h4>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">package</span> main

<span class="hljs-keyword">import</span> (
	<span class="hljs-string">"log"</span>
	<span class="hljs-string">"time"</span>
)

<span class="hljs-keyword">const</span> (
	PriorityHigh = <span class="hljs-literal">iota</span>
	PriorityMedium
	PriorityLow
)

<span class="hljs-keyword">const</span> (
	FrameInterval = <span class="hljs-number">50</span> * time.Millisecond <span class="hljs-comment">// 20 Hz é€»è¾‘å¸§</span>
	FrameBudget   = <span class="hljs-number">25</span> * time.Millisecond <span class="hljs-comment">// é¢„ç•™50%å®‰å…¨ç¼“å†²</span>
	MaxLowTime    = <span class="hljs-number">2</span> * time.Millisecond  <span class="hljs-comment">// ä½ä¼˜å…ˆçº§æœ€å¤šå ç”¨ 2 ms / å¸§</span>
)

<span class="hljs-keyword">type</span> Event <span class="hljs-keyword">struct</span> {
	Handler   <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">()</span></span>
	Priority  <span class="hljs-type">int</span>
	CreatedAt time.Time
}

<span class="hljs-keyword">type</span> EventLoop <span class="hljs-keyword">struct</span> {
	highChan <span class="hljs-keyword">chan</span> *Event
	midChan  <span class="hljs-keyword">chan</span> *Event
	lowChan  <span class="hljs-keyword">chan</span> *Event
	quit     <span class="hljs-keyword">chan</span> <span class="hljs-keyword">struct</span>{}
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">NewEventLoop</span><span class="hljs-params">()</span></span> *EventLoop {
	<span class="hljs-keyword">return</span> &amp;EventLoop{
		highChan: <span class="hljs-built_in">make</span>(<span class="hljs-keyword">chan</span> *Event, <span class="hljs-number">1000</span>),
		midChan:  <span class="hljs-built_in">make</span>(<span class="hljs-keyword">chan</span> *Event, <span class="hljs-number">1000</span>),
		lowChan:  <span class="hljs-built_in">make</span>(<span class="hljs-keyword">chan</span> *Event, <span class="hljs-number">1000</span>),
		quit:     <span class="hljs-built_in">make</span>(<span class="hljs-keyword">chan</span> <span class="hljs-keyword">struct</span>{}),
	}
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(el *EventLoop)</span></span> Submit(event *Event) {
	ch := el.lowChan
	<span class="hljs-keyword">switch</span> event.Priority {
	<span class="hljs-keyword">case</span> PriorityHigh:
		ch = el.highChan
	<span class="hljs-keyword">case</span> PriorityMedium:
		ch = el.midChan
	}
	<span class="hljs-keyword">select</span> {
	<span class="hljs-keyword">case</span> ch &lt;- event:
	<span class="hljs-keyword">default</span>:
		log.Printf(<span class="hljs-string">"Priority %d channel full, dropping event"</span>, event.Priority)
	}
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(el *EventLoop)</span></span> Start() {
	ticker := time.NewTicker(FrameInterval)
	<span class="hljs-keyword">defer</span> ticker.Stop()
	log.Println(<span class="hljs-string">"EventLoop started"</span>)

	<span class="hljs-keyword">for</span> {
		<span class="hljs-keyword">select</span> {
		<span class="hljs-keyword">case</span> &lt;-el.quit:
			log.Println(<span class="hljs-string">"EventLoop stopped"</span>)
			<span class="hljs-keyword">return</span>
		<span class="hljs-keyword">case</span> &lt;-ticker.C:
			el.processFrame()
		}
	}
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(el *EventLoop)</span></span> Stop() {
	<span class="hljs-built_in">close</span>(el.quit)
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(el *EventLoop)</span></span> processFrame() {
	frameStart := time.Now()

	<span class="hljs-comment">// 1. å¤„ç† High ä¼˜å…ˆçº§ï¼ˆç›´åˆ°ç©ºï¼‰</span>
	<span class="hljs-keyword">for</span> <span class="hljs-built_in">len</span>(el.highChan) &gt; <span class="hljs-number">0</span> {
		ev := &lt;-el.highChan
		ev.Handler()
		<span class="hljs-keyword">if</span> time.Since(frameStart) &gt;= FrameBudget {
			log.Println(<span class="hljs-string">"Frame budget exceeded during high-priority processing"</span>)
			<span class="hljs-keyword">return</span>
		}
	}

	<span class="hljs-comment">// 2. å¤„ç† Medium ä¼˜å…ˆçº§ï¼ˆç›´åˆ°ç©ºï¼‰</span>
	<span class="hljs-keyword">for</span> <span class="hljs-built_in">len</span>(el.midChan) &gt; <span class="hljs-number">0</span> {
		ev := &lt;-el.midChan
		ev.Handler()
		<span class="hljs-keyword">if</span> time.Since(frameStart) &gt;= FrameBudget {
			log.Println(<span class="hljs-string">"Frame budget exceeded during medium-priority processing"</span>)
			<span class="hljs-keyword">return</span>
		}
	}

	<span class="hljs-comment">// 3. æœ‰é™å¤„ç† Low ä¼˜å…ˆçº§</span>
	lowDeadline := frameStart.Add(MaxLowTime)
	<span class="hljs-keyword">for</span> time.Now().Before(lowDeadline) &amp;&amp; <span class="hljs-built_in">len</span>(el.lowChan) &gt; <span class="hljs-number">0</span> {
		ev := &lt;-el.lowChan
		ev.Handler()
	}
}

<span class="hljs-comment">// ===== ç¤ºä¾‹ä½¿ç”¨ï¼šå®Œæ•´ main å‡½æ•° =====</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
	loop := NewEventLoop()

	<span class="hljs-comment">// æ¨¡æ‹Ÿç©å®¶å®æ—¶æ“ä½œï¼ˆHigh ä¼˜å…ˆçº§ï¼‰</span>
	<span class="hljs-keyword">go</span> <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">()</span></span> {
		<span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">8</span>; i++ {
			loop.Submit(&amp;Event{
				Priority:  PriorityHigh,
				CreatedAt: time.Now(),
				Handler: <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">()</span></span> {
					time.Sleep(<span class="hljs-number">60</span> * time.Microsecond) <span class="hljs-comment">// æ¨¡æ‹Ÿ 60 Î¼s æ“ä½œ</span>
					log.Println(<span class="hljs-string">"âœ… [HIGH] ç©å®¶æŠ€èƒ½é‡Šæ”¾"</span>)
				},
			})
			time.Sleep(<span class="hljs-number">30</span> * time.Millisecond)
		}
	}()

	<span class="hljs-comment">// æ¨¡æ‹Ÿæ¸¸æˆä¸–ç•Œå¿ƒè·³ï¼ˆMedium ä¼˜å…ˆçº§ï¼‰</span>
	<span class="hljs-keyword">go</span> <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">()</span></span> {
		<span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">5</span>; i++ {
			loop.Submit(&amp;Event{
				Priority:  PriorityMedium,
				CreatedAt: time.Now(),
				Handler: <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">()</span></span> {
					time.Sleep(<span class="hljs-number">150</span> * time.Microsecond) <span class="hljs-comment">// æ¨¡æ‹Ÿ 150 Î¼s</span>
					log.Println(<span class="hljs-string">"ğŸ”„ [MEDIUM] æ€ªç‰©AIå†³ç­–"</span>)
				},
			})
			time.Sleep(<span class="hljs-number">45</span> * time.Millisecond)
		}
	}()

	<span class="hljs-comment">// æ¨¡æ‹Ÿåå°ç»Ÿè®¡ï¼ˆLow ä¼˜å…ˆçº§ï¼‰</span>
	<span class="hljs-keyword">go</span> <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">()</span></span> {
		<span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++ {
			loop.Submit(&amp;Event{
				Priority:  PriorityLow,
				CreatedAt: time.Now(),
				Handler: <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">()</span></span> {
					time.Sleep(<span class="hljs-number">300</span> * time.Microsecond) <span class="hljs-comment">// æ¨¡æ‹Ÿ 300 Î¼s</span>
					log.Println(<span class="hljs-string">"ğŸ“Š [LOW] å…¨æœåœ¨çº¿ç»Ÿè®¡"</span>)
				},
			})
			time.Sleep(<span class="hljs-number">20</span> * time.Millisecond)
		}
	}()

	<span class="hljs-comment">// å¯åŠ¨äº‹ä»¶å¾ªç¯</span>
	<span class="hljs-keyword">go</span> loop.Start()

	<span class="hljs-comment">// è¿è¡Œ 3 ç§’åä¼˜é›…é€€å‡º</span>
	log.Println(<span class="hljs-string">"â³ è¿è¡Œ 3 ç§’æ¨¡æ‹Ÿ..."</span>)
	time.Sleep(<span class="hljs-number">3</span> * time.Second)
	loop.Stop()
	time.Sleep(<span class="hljs-number">100</span> * time.Millisecond) <span class="hljs-comment">// ç•™å‡ºé€€å‡ºæ—¶é—´</span>
	log.Println(<span class="hljs-string">"ğŸ”š ç¨‹åºç»“æŸ"</span>)
}
</code></pre>
<h4 data-id="heading-16">3.3 å®Œæ•´å®ç°å‚è€ƒ</h4>
<p>ä¸Šè¿°ä»£ç ä¸ºæ ¸å¿ƒç®€åŒ–ç‰ˆï¼Œå®Œæ•´çš„ç”Ÿäº§çº§å®ç°ï¼ˆå«è¶…æ—¶ç›‘æ§ã€å‘Šè­¦ã€ä»»åŠ¡åˆ‡ç‰‡å·¥å…·ã€Workeråç¨‹æ± ï¼‰å¯å‚è€ƒï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Ftx7do%2Fgo-utils%2Ftree%2Fmain%2Feventloop" target="_blank" title="https://github.com/tx7do/go-utils/tree/main/eventloop" ref="nofollow noopener noreferrer">github.com/tx7do/go-utâ€¦</a></p>
<h3 data-id="heading-17">å››ã€æ€»ç»“ï¼šå•åç¨‹è°ƒåº¦çš„æ ¸å¿ƒå¿ƒæ³•</h3>
<p>Go å•åç¨‹äº‹ä»¶è°ƒåº¦å™¨çš„ä»·å€¼ï¼Œåœ¨äº <strong>ç”¨â€œä¸²è¡Œæ‰§è¡Œâ€æ¢å–â€œæ— é”æœ‰åºâ€</strong>ï¼Œä½†è¿™ä¸€ä¼˜åŠ¿çš„å‰ææ˜¯ <strong>å¯¹æ—¶é—´çš„æè‡´æŒæ§</strong>ã€‚</p>
<p>å…¶æ ¸å¿ƒå¿ƒæ³•å¯å‡ç»ƒä¸ºä¸‰ç‚¹ï¼š</p>
<ul>
<li><strong>å®ˆçº¢çº¿</strong>ï¼š<strong>å°†1msä½œä¸ºå•äº‹ä»¶å¤„ç†çš„ç»å¯¹ä¸Šé™</strong>ï¼Œé€šè¿‡å¸§é¢„ç®—è®¡ç®—åæ¨å•äº‹ä»¶è€—æ—¶æŒ‡æ ‡ï¼Œä»è®¾è®¡é˜¶æ®µè§„é¿é˜»å¡é£é™©ï¼›</li>
<li><strong>åˆ†ä¼˜å…ˆçº§</strong>ï¼šä»¥ <strong>ç©å®¶ä½“éªŒä¸ºä¸­å¿ƒ</strong>ï¼Œç¡®ä¿å®æ—¶äº¤äº’ä¸ä¸–ç•Œå¿ƒè·³ä¼˜å…ˆæ‰§è¡Œï¼Œä½ä¼˜å…ˆçº§ä»»åŠ¡å¯é™çº§ã€ä¸¢å¼ƒæˆ–é™æµã€‚</li>
<li><strong>æ‹†å‹åŠ›</strong>ï¼šé€šè¿‡<strong>ä»»åŠ¡åˆ‡ç‰‡ã€å¼‚æ­¥å¸è½½ã€æ•°æ®é¢„å¤„ç†</strong>ï¼Œå°†æ— æ³•å‹ç¼©çš„è€—æ—¶ä»»åŠ¡â€œéé˜»å¡åŒ–â€ï¼Œé¿å…å•åç¨‹æˆä¸ºæ€§èƒ½ç“¶é¢ˆã€‚</li>
</ul>
<p>åœ¨å®é™…ç ”å‘ä¸­ï¼Œéœ€ç»“åˆ <strong>æ¸¸æˆç±»å‹ã€å¹¶å‘è§„æ¨¡ã€ä¸šåŠ¡å¤æ‚åº¦</strong> åŠ¨æ€è°ƒæ•´ç­–ç•¥ã€‚ä½†æ— è®ºåœºæ™¯å¦‚ä½•å˜åŒ–ï¼Œ<strong>â€œæœ‰åºæ€§â€ä¸â€œå“åº”é€Ÿåº¦â€çš„å¹³è¡¡</strong>ï¼Œå§‹ç»ˆæ˜¯å•åç¨‹è°ƒåº¦å™¨çš„çµé­‚æ‰€åœ¨ã€‚</p>
<blockquote>
<p>æœ€ç»ˆç›®æ ‡ï¼šè®©æ¯ä¸€å¾®ç§’éƒ½ä¸ºç©å®¶ä½“éªŒæœåŠ¡ï¼Œè€Œéä¸ºç³»ç»Ÿå¤æ‚æ€§ä¹°å•ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ğŸ“¦ Uni ECharts æ˜¯å¦‚ä½•ä½¿ç”¨å®šåˆ¶ echarts çš„ï¼Ÿä¸€ç¯‡æ–‡ç« è½»æ¾æŒæ¡ï¼]]></title>    <link>https://juejin.cn/post/7585839411122323502</link>    <guid>https://juejin.cn/post/7585839411122323502</guid>    <pubDate>2025-12-21T23:51:59.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7585839411122323502" data-draft-id="7585222924565151784" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ğŸ“¦ Uni ECharts æ˜¯å¦‚ä½•ä½¿ç”¨å®šåˆ¶ echarts çš„ï¼Ÿä¸€ç¯‡æ–‡ç« è½»æ¾æŒæ¡ï¼"/> <meta itemprop="keywords" content="ECharts,uni-app,Vue.js"/> <meta itemprop="datePublished" content="2025-12-21T23:51:59.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="xiaohe0601"/> <meta itemprop="url" content="https://juejin.cn/user/3183831378302871"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ğŸ“¦ Uni ECharts æ˜¯å¦‚ä½•ä½¿ç”¨å®šåˆ¶ echarts çš„ï¼Ÿä¸€ç¯‡æ–‡ç« è½»æ¾æŒæ¡ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3183831378302871/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    xiaohe0601
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-21T23:51:59.000Z" title="Sun Dec 21 2025 23:51:59 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-21
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    79
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body cache result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252b3a}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px;color:#5e7ce0}.markdown-body h1{font-size:24px;margin-bottom:5px;margin-top:80px;position:relative;text-align:center}.markdown-body h2{font-size:20px;padding-bottom:12px;border-bottom:1px solid #dfe1e6}.markdown-body h3{font-size:18px;padding-bottom:0}.markdown-body h4{font-size:16px;margin-top:30px}.markdown-body h5{font-size:14px;margin-top:20px}.markdown-body h6{font-size:14px;margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #dfe1e6;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#ffeeed;color:#c73636;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#252b3a;background:#f8f8f8}.markdown-body a{position:relative;text-decoration:none;color:#5e7ce0;padding-right:18px;padding-bottom:4px}.markdown-body a[href^=http]:after{position:absolute;display:inline-block;width:16px;height:16px;margin-left:2px;margin-top:6px;content:"";background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAIRlWElmTU0AKgAAAAgABQESAAMAAAABAAEAAAEaAAUAAAABAAAASgEbAAUAAAABAAAAUgEoAAMAAAABAAIAAIdpAAQAAAABAAAAWgAAAAAAAABIAAAAAQAAAEgAAAABAAOgAQADAAAAAQABAACgAgAEAAAAAQAAACCgAwAEAAAAAQAAACAAAAAAX7wP8AAAAAlwSFlzAAALEwAACxMBAJqcGAAAAVlpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IlhNUCBDb3JlIDYuMC4wIj4KICAgPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICAgICAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIKICAgICAgICAgICAgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iPgogICAgICAgICA8dGlmZjpPcmllbnRhdGlvbj4xPC90aWZmOk9yaWVudGF0aW9uPgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KGV7hBwAABWVJREFUWAnlVktsVFUY/s85997pC9BOTKxRWnEKsXWlxjWJj0RWJjrFAAXjAlewYWOkgauACVu7a2IiNUEyExM3yoZE3Wmi7qgPJthJBDE6JUNpO3Mf5/j95/bOTOcBlBgXejJ37rn/Of/7O/9/iP7vQ/zTAcjnC4ry+a5ii1OkiYTpuvjvEc0Gp51uivP+ZW+QBuSW4QjW5rptAa1Ey0uOGKOxwPetVyafN6p/52/PkNBbjdAhGaGEpMRjLZTryB8+9MUSYSGNRIcBvm8kBAY9tHYlHz78nTs392xIkwv9FA3Oe33bdoX1ZZKOS0bH0CXI6RugYLW6BwIu5gskkQ4sEG0wYF25PjBzbZfSYY6kDLUmWMt7FR7Lw3xYUkaTdjxHfTPnPwav0iEGYADVa9XIRIEyxrAA0jIQxgFL22gYwF7A8/DAzNVdksJvJaTEUZ2kYnZWziN5s1ADPHneEIXByotYuMSrf9JEbbsuv7VcvbaKML8plXtQR0EdIYDqWEmtOgAomZFH8EjWSnek2ulmtljljttHbmaIHCCCHzd9MjwfsmscBeZH9Jyd10nMvz92UQrtCBKvMF06mQy0SiEdRMEGg8mN0YjAlgoDDkPrMI5qJKSkKKydpbB2CZjJkhIBvOBw2CGQgii85bpx//dMqFRKam5uvH7w+K97oe+Cl0HO68uIBH0qyEzpOMwIbZIcFq0I+9cwoElizCjk2KFI1y7Nnx614W1db58fOXIlMzs7Xn/jeDmvBV2Q0mXjGf554O/m4LZHp2N8r61WPMvLZWLdiC4GMAk5BjeeB5lhv39l6+BIbu3m760hXMDKBD08XBKzR8fr04nygnIypOOAJUx/fHrsi0Mnys+vVK+V4VUohaiyPCo2Q9DFALvF/ikw8WS4QvVZALS5ksw47/7R8ejgTPk1UFqU6/3zp8bOM7B/kdu/fkguPGU5JibW+F0sTjWOUw8DklRrg4BiLGeBqbaRLxjlT4no0InFV402RcftJz41cH/f/JnHP3kZaaF6VX/liwist9vYG5+NU9Cg3MNkt/+lU5wS8fTxq3mc7ILjDlAE4CJpe89BOWPiIjBhi9O6PI4G1jsc6RGB3lZwmS76k8H0zOKTkFboG8jS2krFKCX2fvTeaPHIBwAkMHHgncURnL3nuCSnxSopdIzN5th0BIonJ0Lf9yUA9iMkzdRWl3BixOusfDcwQVcS4UKIFwYfGPnM8wY/DyP9NFMXaTE5BU39tGkDgGZz+fJJG0oYcSaOafLcqdECY4LzfSObSzyUOgxqtyisr8SSNOOAkubWoh3TTaeA2YtFEXPnm5x81/j+6MI6JqyS25WSNU6hbCMKHG84marJbdR+vwakRhQLRuQpbzHRLjmpmijI+OmWCtq+LzWtnX5v30gHSsqmWne74DtiACi2+Wz0iXbuLt9D2cDyoPEkWOiyp5XUIwLMi/wJY1FbH5B9ONtdC1KrsD/Q0MCQAS0wccILORDW25amAeOtooAj/KQxfzF17uwTSQ1v3dJ7jnLINwdZYRDa4tPU0sHVXFo/vxFF5BqFqxRfOmgPCk4ft2NgKTCy2Y47JIEg+MIhjYsLy5I25qUYTQlCjMRHsr/UwdYwIK33UO1J5fFNB9XNO6akcywJofVmXQDP2wfrSPcI2xG5BSs3I+IosHr4EtvO1TDAu16xHQq5+ykMblfRXLbhEoFIdDTBdhldvzl+3CMg60ZktI2vNzLW6IIp0waLklot9L63yzuUp8dJd7bglPFe3hIXstBEP58/s6Ocyr4rH2+866ZNbriTzA0RSOWCwakMl1QJgculxPt8Z7O5GLdtW6bvU8R/nO1vb+hMExVAVtEAAAAASUVORK5CYII=");background-size:100%}.markdown-body a:active,.markdown-body a:hover{border-bottom:2px solid #5e7ce0}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #5e7ce0;border-spacing:0}.markdown-body thead{color:#fff;text-align:left}.markdown-body thead tr{background:#5e7ce0}.markdown-body thead th{border-bottom:1px solid #dfe1e6}.markdown-body tr{background-color:#fff}.markdown-body tr:nth-child(2n){background-color:#f2f5fc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#252b3a;padding:1px 23px;margin:22px 0;border-left:4px solid #5e7ce0;background-color:#f2f5fc}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{padding-left:10px;margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#5e7ce0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body ul li::marker{content:"â€¢";color:#5e7ce0}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}.markdown-body input[type=checkbox]:before{display:inline-block;width:16px;height:16px;content:"";background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEIAAABCCAYAAADjVADoAAAK2GlDQ1BJQ0MgUHJvZmlsZQAASImVlwdUU9kWhs+96Y0WiHRC70gngJTQQxGkg6iEJJBQYkgIKmJnUMGxoCKCZcSKKFhGQMaCWLANAopdJ8igoD4HC6Ki5t3AI8zMW++99fZaJ+dbO/vss/e55671XwAoYWyRKBdWAyBPWCCODQ2gJ6ek0nHPAQRgQAI2wIHNkYiYMTGRALHJ+a/28S4Sjdhte0Wuf///v5oGlyfhAAClIZzBlXDyEG5DxkuOSFwAAOoI4jddUCBScBfCmmKkQIR/V3DWBH9ScMY4o8njMfGxgQjTAcCT2WxxFgBkO8RPL+RkIXnIih4chVyBEOFihH05fDYX4TMI2+XlzVfwIMJWSLwIAApyOoCR8aecWX/Jn6HMz2ZnKXmir3HDBwkkolz2ov/zaP635eVKJ/ewQAaZLw6LVeyHnN/9nPkRShZmzIyeZAF3oiYF86VhCZPMkQSmTjKXHRShXJs7M3KSMwUhLGWeAlb8JPMkwXGTLJ4fq9wrUxzInGS2eHxfIsIyaU6C0s/nsZT5i/jxSZNcKEicOcmSnLiIqZhApV8sjVXWzxOGBkztG6LsPU/yp34FLOXaAn58mLJ39lT9PCFzKqckWVkblxcUPBWToIwXFQQo9xLlxijjebmhSr+kME65tgC5nFNrY5RnmM0Oj5lkIABRgA04dNVJAqCAt7BA0UjgfNEisSCLX0BnIm8bj84Schzs6M6Ozs4AKN7dievwnjb+TkK061O+NYjHr10ul5+e8oUi9/i4KfJYbk35LCsAUNUD4Op+jlRcOOFDK34wyNNTBZpABxgCU2AF7IEzcAfewB8Eg3AQDeJBCpiL1MoHeUAMFoBisAKUgnKwEWwF1WA32AsOgaPgBGgGZ8AFcAXcAF2gFzwCMjAAXoFh8BGMQRCEgygQFdKBjCBzyBZyhhiQLxQMRUKxUAqUDmVBQkgKFUOroHKoAqqG9kB10HHoNHQBugZ1Qw+gPmgIegd9gVEwGdaEDWALeDrMgJlwBBwPz4Gz4Hy4CC6B18NVcC18BG6CL8A34F5YBr+CR1AARULRUMYoexQDFYiKRqWiMlFi1FJUGaoSVYtqQLWiOlC3UTLUa9RnNBZNRdPR9mhvdBg6Ac1B56OXotehq9GH0E3oS+jb6D70MPo7hoLRx9hivDAsTDImC7MAU4qpxBzAnMJcxvRiBjAfsVgsDWuJ9cCGYVOw2djF2HXYndhGbBu2G9uPHcHhcDo4W5wPLhrHxhXgSnHbcUdw53E9uAHcJzwJb4R3xofgU/FC/Ep8Jf4w/hy+B/8CP0ZQI5gTvAjRBC5hEWEDYR+hlXCLMEAYI6oTLYk+xHhiNnEFsYrYQLxMfEx8TyKRTEiepFkkAWk5qYp0jHSV1Ef6TNYg25ADyWlkKXk9+SC5jfyA/J5CoVhQ/CmplALKekod5SLlKeWTClXFQYWlwlVZplKj0qTSo/JGlaBqrspUnatapFqpelL1luprNYKahVqgGlttqVqN2mm1e2oj6lR1J/Vo9Tz1deqH1a+pD2rgNCw0gjW4GiUaezUuavRTUVRTaiCVQ11F3Ue9TB3QxGpaarI0szXLNY9qdmoOa2louWolai3UqtE6qyWjoWgWNBYtl7aBdoJ2l/ZlmsE05jTetLXTGqb1TBvV1tP21+Zpl2k3avdqf9Gh6wTr5Ohs0mnWeaKL1rXRnaW7QHeX7mXd13qaet56HL0yvRN6D/VhfRv9WP3F+nv1b+qPGBgahBqIDLYbXDR4bUgz9DfMNtxieM5wyIhq5GskMNpidN7oJV2LzqTn0qvol+jDxvrGYcZS4z3GncZjJpYmCSYrTRpNnpgSTRmmmaZbTNtNh82MzKLMis3qzR6aE8wZ5nzzbeYd5qMWlhZJFqstmi0GLbUtWZZFlvWWj60oVn5W+Va1VnessdYM6xzrndZdNrCNmw3fpsbmli1s624rsN1p222HsfO0E9rV2t2zJ9sz7Qvt6+37HGgOkQ4rHZod3kw3m546fdP0junfHd0ccx33OT5y0nAKd1rp1Or0ztnGmeNc43zHheIS4rLMpcXlrautK891l+t9N6pblNtqt3a3b+4e7mL3BvchDzOPdI8dHvcYmowYxjrGVU+MZ4DnMs8znp+93L0KvE54/eFt753jfdh7cIblDN6MfTP6fUx82D57fGS+dN903598ZX7Gfmy/Wr9n/qb+XP8D/i+Y1sxs5hHmmwDHAHHAqYDRQK/AJYFtQaig0KCyoM5gjeCE4OrgpyEmIVkh9SHDoW6hi0PbwjBhEWGbwu6xDFgcVh1rONwjfEn4pQhyRFxEdcSzSJtIcWRrFBwVHrU56vFM85nCmc3RIJoVvTn6SYxlTH7ML7Ows2Jm1cx6HusUWxzbEUeNmxd3OO5jfED8hvhHCVYJ0oT2RNXEtMS6xNGkoKSKJFny9OQlyTdSdFMEKS2puNTE1AOpI7ODZ2+dPZDmllaadneO5ZyFc67N1Z2bO/fsPNV57Hkn0zHpSemH07+yo9m17JEMVsaOjGFOIGcb5xXXn7uFO8Tz4VXwXmT6ZFZkDmb5ZG3OGuL78Sv5rwWBgmrB2+yw7N3ZoznROQdz5LlJuY15+Lz0vNNCDWGO8NJ8w/kL53eLbEWlIlm+V/7W/GFxhPiABJLMkbQUaCIi6abUSvqDtK/Qt7Cm8NOCxAUnF6ovFC68uchm0dpFL4pCivYvRi/mLG4vNi5eUdy3hLlkz1JoacbS9mWmy0qWDSwPXX5oBXFFzopfVzqurFj5YVXSqtYSg5LlJf0/hP5QX6pSKi69t9p79e416DWCNZ1rXdZuX/u9jFt2vdyxvLL86zrOuus/Ov1Y9aN8feb6zg3uG3ZtxG4Ubry7yW/ToQr1iqKK/s1Rm5u20LeUbfmwdd7Wa5Wulbu3EbdJt8mqIqtatptt37j9azW/urcmoKZxh/6OtTtGd3J39uzy39Ww22B3+e4vPwl+ur8ndE9TrUVt5V7s3sK9z/cl7uvYz9hfd0D3QPmBbweFB2WHYg9dqvOoqzusf3hDPVwvrR86knak62jQ0ZYG+4Y9jbTG8mPgmPTYy+Ppx++eiDjRfpJxsuFn8593nKKeKmuCmhY1DTfzm2UtKS3dp8NPt7d6t576xeGXg2eMz9Sc1Tq74RzxXMk5+fmi8yNtorbXF7Iu9LfPa390MfninUuzLnVejrh89UrIlYsdzI7zV32unrnmde30dcb15hvuN5puut089avbr6c63Tubbnncauny7GrtntF9rsev58LtoNtX7rDu3Oid2dt9N+Hu/Xtp92T3ufcHH+Q+ePuw8OHYo+WPMY/Lnqg9qXyq/7T2N+vfGmXusrN9QX03n8U9e9TP6X/1u+T3rwMlzynPK18YvagbdB48MxQy1PVy9suBV6JXY69L/6H+jx1vrN78/If/HzeHk4cH3orfyt+te6/z/uAH1w/tIzEjTz/mfRwbLfuk8+nQZ8bnji9JX16MLfiK+1r1zfpb6/eI74/leXK5iC1mj0sBFDLgzEwA3h1EtHEKAFRElxNnT2jrcYMmvgfGCfwnntDf4+YOQAMyKWQR0x+Akwo5i8wqyKyQRPH+AHZxUY5/mSTTxXkiFxlRlphPcvl7AwBwrQB8E8vlYzvl8m/7kGIfANCWP6HpFYZFtHyD3vJRg6LbPe3g7zah9//U499noKjAFfx9/ieoZhkWVvYkwwAAAGxlWElmTU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAIdpAAQAAAABAAAATgAAAAAAAACQAAAAAQAAAJAAAAABAAKgAgAEAAAAAQAAAEKgAwAEAAAAAQAAAEIAAAAAgodoEQAAAAlwSFlzAAAWJQAAFiUBSVIk8AAAAhRJREFUeAHtnLEuBFEUhs9cu7JCskEhIrZAgYZGoREPwBuIygOoPITKA6jEG/AAolFoaFCgICIKZBNiY8Pyz5rNOWe9wNz5T7N3Z2eT/b/7zZlpziat3xKWBDJoEyh5EDd3DTk5r8vV7Yc8vzbl6zvfwvSERIYHyzI90SeLc1WZrFV85PR9oi+N/YMnOT6t/3tiLAeXFqqytjrSFacDYmfvQS6u37tOiPHA7FS/bK6PmWhpj4AJRYGA9MiKzLpK6An+cqiNVmRleUhArrec6PNzt/5sttLgh0cvcvfY6Px+ZNY9I6Ax6gKErY1xmZ8ZyD0E5MJGIgsyIZsunT3g7qALJuTdAp0nWyMTsunS2QNukbpwOcRaPpvOHvxzQow2ZBvrs+nsfLL8o0QQBJFdMO1XGkEjaIQlQCMsD/YIGkEjLAEaYXmwR9AIGmEJ0AjLgz2CRtAIS4BGWB7sETSCRlgCNMLyYI+gETTCEqARlgd7BI2gEZYAjbA82CNoBI2wBGiE5cEeQSNohCVAIywP9ggaQSMsARphebBH0AgaYQnQCMsjYC5SF2agYi2fTWcPGA7VFfO0n8+mswdMyOrCNJwnpz/P6xqZkE2Xzh4w8qcLI4Hbu/dydvkWBRAAQBZk0uOOyKyzp5PARRiF1puNtR+NTh+oMCvtJ+D8F2N6j6x+PrwzG46gRTDDm5BtsAGBg0X924Qfj7i23p7HNgQAAAAASUVORK5CYII=");background-size:100%;position:relative;right:2px;top:-5px}.markdown-body input[type=checkbox]:checked:before{background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEIAAABCCAYAAADjVADoAAAK2GlDQ1BJQ0MgUHJvZmlsZQAASImVlwdUU9kWhs+96Y0WiHRC70gngJTQQxGkg6iEJJBQYkgIKmJnUMGxoCKCZcSKKFhGQMaCWLANAopdJ8igoD4HC6Ki5t3AI8zMW++99fZaJ+dbO/vss/e55671XwAoYWyRKBdWAyBPWCCODQ2gJ6ek0nHPAQRgQAI2wIHNkYiYMTGRALHJ+a/28S4Sjdhte0Wuf///v5oGlyfhAAClIZzBlXDyEG5DxkuOSFwAAOoI4jddUCBScBfCmmKkQIR/V3DWBH9ScMY4o8njMfGxgQjTAcCT2WxxFgBkO8RPL+RkIXnIih4chVyBEOFihH05fDYX4TMI2+XlzVfwIMJWSLwIAApyOoCR8aecWX/Jn6HMz2ZnKXmir3HDBwkkolz2ov/zaP635eVKJ/ewQAaZLw6LVeyHnN/9nPkRShZmzIyeZAF3oiYF86VhCZPMkQSmTjKXHRShXJs7M3KSMwUhLGWeAlb8JPMkwXGTLJ4fq9wrUxzInGS2eHxfIsIyaU6C0s/nsZT5i/jxSZNcKEicOcmSnLiIqZhApV8sjVXWzxOGBkztG6LsPU/yp34FLOXaAn58mLJ39lT9PCFzKqckWVkblxcUPBWToIwXFQQo9xLlxijjebmhSr+kME65tgC5nFNrY5RnmM0Oj5lkIABRgA04dNVJAqCAt7BA0UjgfNEisSCLX0BnIm8bj84Schzs6M6Ozs4AKN7dievwnjb+TkK061O+NYjHr10ul5+e8oUi9/i4KfJYbk35LCsAUNUD4Op+jlRcOOFDK34wyNNTBZpABxgCU2AF7IEzcAfewB8Eg3AQDeJBCpiL1MoHeUAMFoBisAKUgnKwEWwF1WA32AsOgaPgBGgGZ8AFcAXcAF2gFzwCMjAAXoFh8BGMQRCEgygQFdKBjCBzyBZyhhiQLxQMRUKxUAqUDmVBQkgKFUOroHKoAqqG9kB10HHoNHQBugZ1Qw+gPmgIegd9gVEwGdaEDWALeDrMgJlwBBwPz4Gz4Hy4CC6B18NVcC18BG6CL8A34F5YBr+CR1AARULRUMYoexQDFYiKRqWiMlFi1FJUGaoSVYtqQLWiOlC3UTLUa9RnNBZNRdPR9mhvdBg6Ac1B56OXotehq9GH0E3oS+jb6D70MPo7hoLRx9hivDAsTDImC7MAU4qpxBzAnMJcxvRiBjAfsVgsDWuJ9cCGYVOw2djF2HXYndhGbBu2G9uPHcHhcDo4W5wPLhrHxhXgSnHbcUdw53E9uAHcJzwJb4R3xofgU/FC/Ep8Jf4w/hy+B/8CP0ZQI5gTvAjRBC5hEWEDYR+hlXCLMEAYI6oTLYk+xHhiNnEFsYrYQLxMfEx8TyKRTEiepFkkAWk5qYp0jHSV1Ef6TNYg25ADyWlkKXk9+SC5jfyA/J5CoVhQ/CmplALKekod5SLlKeWTClXFQYWlwlVZplKj0qTSo/JGlaBqrspUnatapFqpelL1luprNYKahVqgGlttqVqN2mm1e2oj6lR1J/Vo9Tz1deqH1a+pD2rgNCw0gjW4GiUaezUuavRTUVRTaiCVQ11F3Ue9TB3QxGpaarI0szXLNY9qdmoOa2louWolai3UqtE6qyWjoWgWNBYtl7aBdoJ2l/ZlmsE05jTetLXTGqb1TBvV1tP21+Zpl2k3avdqf9Gh6wTr5Ohs0mnWeaKL1rXRnaW7QHeX7mXd13qaet56HL0yvRN6D/VhfRv9WP3F+nv1b+qPGBgahBqIDLYbXDR4bUgz9DfMNtxieM5wyIhq5GskMNpidN7oJV2LzqTn0qvol+jDxvrGYcZS4z3GncZjJpYmCSYrTRpNnpgSTRmmmaZbTNtNh82MzKLMis3qzR6aE8wZ5nzzbeYd5qMWlhZJFqstmi0GLbUtWZZFlvWWj60oVn5W+Va1VnessdYM6xzrndZdNrCNmw3fpsbmli1s624rsN1p222HsfO0E9rV2t2zJ9sz7Qvt6+37HGgOkQ4rHZod3kw3m546fdP0junfHd0ccx33OT5y0nAKd1rp1Or0ztnGmeNc43zHheIS4rLMpcXlrautK891l+t9N6pblNtqt3a3b+4e7mL3BvchDzOPdI8dHvcYmowYxjrGVU+MZ4DnMs8znp+93L0KvE54/eFt753jfdh7cIblDN6MfTP6fUx82D57fGS+dN903598ZX7Gfmy/Wr9n/qb+XP8D/i+Y1sxs5hHmmwDHAHHAqYDRQK/AJYFtQaig0KCyoM5gjeCE4OrgpyEmIVkh9SHDoW6hi0PbwjBhEWGbwu6xDFgcVh1rONwjfEn4pQhyRFxEdcSzSJtIcWRrFBwVHrU56vFM85nCmc3RIJoVvTn6SYxlTH7ML7Ows2Jm1cx6HusUWxzbEUeNmxd3OO5jfED8hvhHCVYJ0oT2RNXEtMS6xNGkoKSKJFny9OQlyTdSdFMEKS2puNTE1AOpI7ODZ2+dPZDmllaadneO5ZyFc67N1Z2bO/fsPNV57Hkn0zHpSemH07+yo9m17JEMVsaOjGFOIGcb5xXXn7uFO8Tz4VXwXmT6ZFZkDmb5ZG3OGuL78Sv5rwWBgmrB2+yw7N3ZoznROQdz5LlJuY15+Lz0vNNCDWGO8NJ8w/kL53eLbEWlIlm+V/7W/GFxhPiABJLMkbQUaCIi6abUSvqDtK/Qt7Cm8NOCxAUnF6ovFC68uchm0dpFL4pCivYvRi/mLG4vNi5eUdy3hLlkz1JoacbS9mWmy0qWDSwPXX5oBXFFzopfVzqurFj5YVXSqtYSg5LlJf0/hP5QX6pSKi69t9p79e416DWCNZ1rXdZuX/u9jFt2vdyxvLL86zrOuus/Ov1Y9aN8feb6zg3uG3ZtxG4Ubry7yW/ToQr1iqKK/s1Rm5u20LeUbfmwdd7Wa5Wulbu3EbdJt8mqIqtatptt37j9azW/urcmoKZxh/6OtTtGd3J39uzy39Ww22B3+e4vPwl+ur8ndE9TrUVt5V7s3sK9z/cl7uvYz9hfd0D3QPmBbweFB2WHYg9dqvOoqzusf3hDPVwvrR86knak62jQ0ZYG+4Y9jbTG8mPgmPTYy+Ppx++eiDjRfpJxsuFn8593nKKeKmuCmhY1DTfzm2UtKS3dp8NPt7d6t576xeGXg2eMz9Sc1Tq74RzxXMk5+fmi8yNtorbXF7Iu9LfPa390MfninUuzLnVejrh89UrIlYsdzI7zV32unrnmde30dcb15hvuN5puut089avbr6c63Tubbnncauny7GrtntF9rsev58LtoNtX7rDu3Oid2dt9N+Hu/Xtp92T3ufcHH+Q+ePuw8OHYo+WPMY/Lnqg9qXyq/7T2N+vfGmXusrN9QX03n8U9e9TP6X/1u+T3rwMlzynPK18YvagbdB48MxQy1PVy9suBV6JXY69L/6H+jx1vrN78/If/HzeHk4cH3orfyt+te6/z/uAH1w/tIzEjTz/mfRwbLfuk8+nQZ8bnji9JX16MLfiK+1r1zfpb6/eI74/leXK5iC1mj0sBFDLgzEwA3h1EtHEKAFRElxNnT2jrcYMmvgfGCfwnntDf4+YOQAMyKWQR0x+Akwo5i8wqyKyQRPH+AHZxUY5/mSTTxXkiFxlRlphPcvl7AwBwrQB8E8vlYzvl8m/7kGIfANCWP6HpFYZFtHyD3vJRg6LbPe3g7zah9//U499noKjAFfx9/ieoZhkWVvYkwwAAAGxlWElmTU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAIdpAAQAAAABAAAATgAAAAAAAACQAAAAAQAAAJAAAAABAAKgAgAEAAAAAQAAAEKgAwAEAAAAAQAAAEIAAAAAgodoEQAAAAlwSFlzAAAWJQAAFiUBSVIk8AAABMtJREFUeAHtXM2KFDEQzrQKruIu4mEXRFlUVLz4A4K7B99AcO8io0/gwQfxDVzFuwu+gQf34EG8iOAPKAh6EFlBFMSf/qa2uqszlVR6ZtYxM5PDJNVVSer78nU6KrHzpyxuVlwx44AY2O0T8eb9D7f5fMu9fPvdff7y0/36nbdgdhUdd+jgHnf62JxbObvgjh/d60Pu2R35ajx49Mk9frqlBk7Kw8sXF9y1K4t9cCoi7tz/4F68/tYXMIkPzpzY725dP9yA1tsjoIRpIQHogRWYZSmwJ4Reh06nI2Nd7rYEA8zAzqXAxhgq/pc1d9vHKbEX+Dr4JbzypJDc/YxXYi/wifRLeOXpU5q7n/FK7EXsnBBeeRoqd7/EHj1ZhleeiMjdz8pArRKR+0pb+UsCuK0SkftKW/kzeFmrRHCAxWzufsaJOkqExWzufpOI8EpP1jnCJCK80pN1jjCJ4ICwMigidz/jRD3bI7bZUInIfaWt/KUSuK0SEd4jqFvufgYva5UIDrCYzd3POFFHifhfV/7k8lwPw7D5mUSEV3r854ju2pK7ffOIWzk/X+Go803Lr+ooGqoiwkyP9xzRXVt0q9sE3CgJYTLqfNPyE/irpkoEe2um6ck4bSiBSeD8JBl41jY/Hgd1lIiaaeoyLlsjgUGAjEH3DB4DtUpEW2Z3Mj5GAgA8efbVvXpX/200nln5IMYvKhHDrvylcwdc9+pSNdeg46WQsP7wo2s7fpWYaPT926fw9ZiVk4BpywYJkGuvlJs4EuWS0p/HTyHh3kbzH2najM85cR0lgpPiYMtukFB26m1u5Ua+vkFkWP3Zn0KCJDg1Px6f42Wtvhrhdyz8ncanrFKCmGH1wrwDMCrh/uxPIUFTAvdHbeVPsc1fVRE+c7Ud/k6fWt7XHFlYqcqQ5wTRvWpiY4wrIZwfDUL+akDRUBXB/jCzFCH9SHCzTDRUmsro7z+cEvrHwxOZn2ZTL/pVFcEBtRLoiWXfxQ5ehvoHHx4vpIwUEuJKSMvPz5/zQq0qwmIy5m+rjBQSwnsCQYnlgwjfT72av6oifOba2qnKcOXeGVIP0rT3BALTNr8mBWSpRHAgmJSTtLGhDHwj+A9GPCbX2DNiBSRoShg0H8zl5y/njxIhJ0WntralDJmIbO+UEvz85Zwt9wj7HIDB5Ttp7RkyGbRDSqC49vOjX50P9aexmr+qInzmajvtO13H02SpyrCVMNj8dT7/4BwByDXzRIC0LWXEldA/njVfip9GpV9VERxQM0lPhrVDyrCVMJr5/fwZJ+qWewR1lSuNJ21sXxnjVgIhck5VhM/cqG1WBpIAMX4Z9Xz+eP58sFUiOBArLQcZpQ0CNCXt1HzA5OfPOFGrrwYHyKTwbNJsxolaJUJbKeo0mu/4uMeXBHBbJSK88qP5jo97fAYva5UIDgivHEXk7mecqKNEhFeOhsjdbxKR+0pb+UsCuK0qIveVtvJn8LJWieAAi9nc/YwTdZQIi9nc/SYR4ZWenSO2yZvgcwTuRYZKWBnUI3e/xF7gcmio5L4HWPlL7AVuyPol95W28me8EnuBa8J+sZjM3c94JfYCd6VxTXjaCjDLe+K9cwTuSuOa8LQUYPXvh1d3w0HC7JK8kMK0/rcJfwHkVMYgi4xhOgAAAABJRU5ErkJggg==");background-size:100%}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="atom-one-dark">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#abb2bf;background:#282c34}.hljs-comment,.hljs-quote{color:#5c6370;font-style:italic}.hljs-doctag,.hljs-formula,.hljs-keyword{color:#c678dd}.hljs-deletion,.hljs-name,.hljs-section,.hljs-selector-tag,.hljs-subst{color:#e06c75}.hljs-literal{color:#56b6c2}.hljs-addition,.hljs-attribute,.hljs-meta-string,.hljs-regexp,.hljs-string{color:#98c379}.hljs-built_in,.hljs-class .hljs-title{color:#e6c07b}.hljs-attr,.hljs-number,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-pseudo,.hljs-template-variable,.hljs-type,.hljs-variable{color:#d19a66}.hljs-bullet,.hljs-link,.hljs-meta,.hljs-selector-id,.hljs-symbol,.hljs-title{color:#61aeee}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.hljs-link{text-decoration:underline}</style><p>Uni ECharts æ˜¯é€‚ç”¨äº uni-app çš„ Apache ECharts ç»„ä»¶ï¼Œæ— éœ€ç¹ççš„æ­¥éª¤å³å¯è½»æ¾åœ¨ uni-app å¹³å°ä¸Šä½¿ç”¨ echartsã€‚</p>
<p>å®˜ç½‘ &amp; æ–‡æ¡£ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Funi-echarts.xiaohe.ink" target="_blank" title="https://uni-echarts.xiaohe.ink" ref="nofollow noopener noreferrer">uni-echarts.xiaohe.ink</a></p>
<p>Githubï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fxiaohe0601%2Funi-echarts" target="_blank" title="https://github.com/xiaohe0601/uni-echarts" ref="nofollow noopener noreferrer">github.com/xiaohe0601/â€¦</a></p>
<h2 data-id="heading-0">ğŸ¤“ å‰è¨€</h2>
<p>æœ‹å‹ä»¬å¥½å•Šï¼Œæˆ‘æ˜¯ Uni ECharts æŒé—¨äººå°ä½•ã€‚</p>
<p>åˆšæ‰æœ‰ä¸ªæœ‹å‹é—®æˆ‘ï¼šâ€œä½•è€å¸ˆï¼Œå‘ç”Ÿç”šä¹ˆäº‹äº†ï¼Ÿâ€ æˆ‘è¯´æ€ä¹ˆå›äº‹ï¼Ÿç»™æˆ‘å‘äº†ä¸¤å¼ æˆªå›¾ã€‚</p>
<p>æˆ‘ä¸€çœ‹ï¼å™¢ï¼ŒåŸæ¥æ˜¯æ˜¨å¤©ï¼Œæœ‰ä¸¤ä¸ªå°ç¨‹åºï¼Œé¡µé¢å¾ˆå¤šï¼Œä¸€ä¸ª 400 å¤šé¡µï¼Œä¸€ä¸ª 500 å¤šé¡µã€‚</p>
<p>å¡”ä»¬è¯´ï¼Œå“â€¦æœ‰ä¸€ä¸ªè¯´æ˜¯ä¸»åŒ…å®åœ¨æ˜¯æ”¾ä¸ä¸‹ echarts äº†ï¼Œä½•è€å¸ˆä½ èƒ½ä¸èƒ½æ•™æ•™æˆ‘ä¼˜åŒ–åŠŸæ³•ï¼Ÿå¸®åŠ©æˆ‘æ”¹å–„ä¸€ä¸‹æˆ‘çš„å°ç¨‹åºä½“ç§¯ã€‚</p>
<p>æˆ‘è¯´å¯ä»¥ï¼Œæˆ‘è¯´ä½ ç›´æ¥ npm å®‰è£… echarts æŒ‰éœ€å¼•ç”¨ï¼Œä¸å¥½ç”¨ï¼Œä»–ä¸æœæ°”ã€‚</p>
<p>æˆ‘è¯´å°æœ‹å‹ï¼Œä½ ä¸€ä¸ªç»„ä»¶åŒæ—¶å…¼å®¹æ‰€æœ‰ç«¯ï¼Œä¸éœ€è¦æ¡ä»¶ç¼–è¯‘ï¼Œä»–è¯´ä½ è¿™ä¹Ÿæ²¡ç”¨ã€‚</p>
<p>æˆ‘è¯´æˆ‘è¿™ä¸ªæœ‰ç”¨ï¼Œè¿™æ˜¯æŠ¹å¹³å·®å¼‚ï¼Œä¼ ç»Ÿå¼€å‘æ˜¯è®²ä¸€æ¬¡ç¼–è¯‘ã€å¤šç«¯è¦†ç›–ï¼ŒäºŒç™¾å¤šè¡Œä»£ç çš„æ¡ä»¶ç¼–è¯‘éƒ½æŠµä¸è¿‡æˆ‘è¿™ä¸ªå°ç»„ä»¶ã€‚</p>
<p>ä»–è¯´è¦å’Œæˆ‘è¯•è¯•ï¼Œæˆ‘è¯´å¯ä»¥ã€‚æˆ‘ä¸€è¯´ï¼Œä»–å•ªä¸€ä¸‹å°±æŠŠæ¡ä»¶ç¼–è¯‘ç»™å†™å‡ºæ¥äº†ï¼Œå¾ˆå¿«å•Šï¼Œç„¶åä¸Šæ¥å°±æ˜¯ä¸€ä¸ª requireï¼Œå­ï¼ä¸€ä¸ª ifdefï¼Œå­ï¼ä¸€ä¸ª ifndefï¼</p>
<p>æˆ‘å…¨éƒ¨é˜²å‡ºå»äº†ï¼Œé˜²å‡ºå»ä»¥åè‡ªç„¶æ˜¯ä¼ ç»Ÿå¼€å‘å®œç‚¹åˆ°ä¸ºæ­¢ï¼ŒUni ECharts è—åœ¨ Github æ²¡ç»™ä»–çœ‹ã€‚æˆ‘ç¬‘ä¸€ä¸‹ï¼Œå‡†å¤‡ä¸Šç­ï¼Œå› ä¸ºè¿™æ—¶é—´æŒ‰ä¼ ç»Ÿå¼€å‘çš„ç‚¹åˆ°ä¸ºæ­¢ä»–å·²ç»è¾“äº†ï¼Œå¦‚æœ Uni ECharts å‘åŠ›ï¼Œä¸€ä¸‹å°±æŠŠä»–æ¡ä»¶ç¼–è¯‘æ•´ç ´é˜²äº†ï¼Œæ”¾åœ¨ Github æ²¡ç»™ä»–çœ‹ã€‚</p>
<p>ä»–ä¹Ÿæ‰¿è®¤ï¼Œè¯´æ¡ä»¶ç¼–è¯‘å†™èµ·æ¥ç¹çã€‚å•Šï¼Œæˆ‘æ”¶æ‰‹çš„æ—¶é—´ä¸èŠäº†ï¼Œä»–çªç„¶è¢­å‡»è¯´ npm è£…çš„ echarts ä¸èƒ½æ”¾åˆ°åˆ†åŒ…ï¼Œå•Šï¼Œæˆ‘å¤§æ„äº†å•Šï¼Œæ²¡æœ‰è€ƒè™‘åˆ°ã€‚</p>
<p>å“ï¼Œä»–çš„æ¡ä»¶ç¼–è¯‘ç»™æˆ‘è„¸æ‰“äº†ä¸€ä¸‹ï¼Œä½†æ˜¯æ²¡å…³ç³»å•Šï¼ä»–ä¹Ÿè¯´äº†ï¼Œä»–æˆªå›¾ä¹Ÿè¯´äº†ï¼Œä¸¤åˆ†å¤šé’Ÿä»¥åï¼Œå½“æ—¶æµçœ¼æ³ªäº†ï¼Œæ‚ç€çœ¼æˆ‘å°±è¯´åœâ€¦åœï¼Œç„¶åä¸¤åˆ†å¤šé’Ÿä»¥åå°±å¥½äº†ã€‚</p>
<p>æˆ‘è¯´å°ä¼™å­ä½ ä¸è®²æ­¦å¾·ï¼Œä½ ä¸æ‡‚ï¼Œä»–å¿™è¯´ä½•è€å¸ˆå¯¹ä¸â€¦å¯¹ä¸èµ·ï¼Œæˆ‘ä¸æ‡‚è§„çŸ©ã€‚å•Šï¼Œä»–è¯´ä»–æ˜¯ä¹±æ‰“çš„ï¼Œä»–å¯ä¸æ˜¯ä¹±æ‰“å•Šï¼Œifdefã€ifndef è®­ç»ƒæœ‰ç´ ï¼Œåæ¥ä»–è¯´ä»–ç»ƒè¿‡ <strong>ä¸¤å¹´åŠ</strong> å¼€æºï¼Œçœ‹æ¥æ˜¯æœ‰å¤‡è€Œæ¥ã€‚</p>
<p>è¿™ä¸¤ä¸ªå¹´è½»äººï¼Œä¸è®²æ­¦å¾·ã€‚æ¥ï¼Œéª—ï¼æ¥ï¼Œå·è¢­ï¼æˆ‘ 22 å²çš„è€åŒå¿—ã€‚è¿™å¥½å—ï¼Ÿè¿™ä¸å¥½ã€‚æˆ‘è¯´å°æœ‹å‹ä½ ä¸æ‡‚ï¼Œå¼€å‘è¦ä»¥å’Œä¸ºè´µï¼Œä¸æ˜¯å¥½å‹‡æ–—ç‹ ï¼Œè¦è®²æ­¦å¾·ã€‚</p>
<p>æˆ‘åŠï¼è¿™ä½å¹´è½»äººï¼Œè€—å­å°¾æ±ï¼Œå¥½å¥½åæ€ã€‚å¹´è½»äººè¦è„šè¸å®åœ°ï¼Œä¸è¦æ€¥åŠŸè¿‘åˆ©ï¼Œä»¥åä¸è¦å†çŠ¯è¿™æ ·çš„èªæ˜ï¼Œå°èªæ˜å•Šï¼æ›´ä¸è¦æçªé‡Œæ–—ï¼è°¢è°¢æœ‹å‹ä»¬ï¼</p>
<blockquote>
<p>çµæ„Ÿæ¥æº <a href="https://juejin.cn/user/3919115686512942" target="_blank" title="https://juejin.cn/user/3919115686512942">@å¾·è±å„æ–¯</a></p>
</blockquote>
<h2 data-id="heading-1">ğŸª„ å®šåˆ¶ ECharts</h2>
<blockquote>
<p>ğŸ‘‰ å‰å¾€ Uni ECharts å®˜ç½‘ <a href="https://link.juejin.cn?target=https%3A%2F%2Funi-echarts.xiaohe.ink%2Fguide%2Fecharts%23%25E5%25AE%259A%25E5%2588%25B6-echarts" target="_blank" title="https://uni-echarts.xiaohe.ink/guide/echarts#%E5%AE%9A%E5%88%B6-echarts" ref="nofollow noopener noreferrer">å®šåˆ¶ ECharts</a> æŸ¥çœ‹å®Œæ•´å†…å®¹</p>
</blockquote>
<p>é€šå¸¸æƒ…å†µï¼Œä½¿ç”¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Funi-echarts.xiaohe.ink%2Fguide%2Fecharts%23%25E6%258C%2589%25E9%259C%2580%25E5%25AF%25BC%25E5%2585%25A5" target="_blank" title="https://uni-echarts.xiaohe.ink/guide/echarts#%E6%8C%89%E9%9C%80%E5%AF%BC%E5%85%A5" ref="nofollow noopener noreferrer">æŒ‰éœ€å¯¼å…¥</a> å°±èƒ½æœ‰æ•ˆå‡å°æ‰“åŒ…ä½“ç§¯ï¼Œä½†æ˜¯åœ¨æŸäº›åœºæ™¯å¦‚æœéœ€è¦ä½¿ç”¨å®šåˆ¶çš„ EChartsï¼Œåœ¨ Uni ECharts ä¸­å¯ä»¥é…åˆ <a href="https://link.juejin.cn?target=https%3A%2F%2Funi-echarts.xiaohe.ink%2Fapis%2Ffunction%23provideecharts" target="_blank" title="https://uni-echarts.xiaohe.ink/apis/function#provideecharts" ref="nofollow noopener noreferrer">provideEcharts</a> å®ç°ï¼Œå…·ä½“å‚è€ƒä»¥ä¸‹æ­¥éª¤ï¼š</p>
<ol>
<li>
<p>ä½¿ç”¨ ECharts å®˜ç½‘çš„ <a href="https://link.juejin.cn?target=https%3A%2F%2Fecharts.apache.org%2Fzh%2Fbuilder.html" target="_blank" title="https://echarts.apache.org/zh/builder.html" ref="nofollow noopener noreferrer">åœ¨çº¿å®šåˆ¶</a> åŠŸèƒ½æ ¹æ®éœ€æ±‚é€‰æ‹©éœ€è¦ä½¿ç”¨çš„æ¨¡å—æ„å»ºå¹¶ä¸‹è½½ <code>echarts.min.js</code> åˆ°æœ¬åœ°ï¼›</p>
</li>
<li>
<p>ç”±äº Vite é»˜è®¤ä»…æ”¯æŒ ESM æ¨¡å—ï¼Œä½†æ˜¯ ECharts å®˜ç½‘çš„åœ¨çº¿å®šåˆ¶åŠŸèƒ½å¹¶ä¸æ”¯æŒä¸‹è½½ ESM æ ¼å¼çš„äº§ç‰©ï¼Œæ‰€ä»¥ Uni ECharts æä¾›äº†ä¸€ä¸ª CLI å·¥å…·å¯ä»¥è½»æ¾å°†å…¶è½¬æ¢ä¸º ESM æ ¼å¼ï¼Œä½¿ç”¨ç¤ºä¾‹å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-shell" lang="shell"><span class="hljs-meta prompt_"># </span><span class="bash">pnpm</span>
pnpm dlx @uni-echarts/c2e@latest
<span class="hljs-meta prompt_">
# </span><span class="bash">npm</span>
npx @uni-echarts/c2e@latest
</code></pre>
<pre><code class="hljs language-shell" lang="shell">â”Œ  Uni ECharts Transform CLI
â”‚
â—  Transform input echarts.min.js to ESM
â”‚
â—‡  Input file
â”‚  ./echarts.min.js
â”‚
â—‡  Output file
â”‚  ./echarts.esm.js
â”‚
â—‡  Transform completed!
â”‚
â””  Output: /path/to/echarts.esm.js
</code></pre>
<p>å—é™äº <code>echarts.min.js</code> çš„å†…å®¹ï¼Œç›®å‰è½¬æ¢åçš„ ESM äº§ç‰©ä¸æ”¯æŒ Tree-Shakingï¼Œæ— æ³•å‰”é™¤æœªä½¿ç”¨çš„ä»£ç ï¼Œå¹¶ä¸”éœ€è¦ä½¿ç”¨é»˜è®¤å¯¼å…¥ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> echarts <span class="hljs-keyword">from</span> <span class="hljs-string">"/path/to/echarts.esm.js"</span>;
</code></pre>
</li>
<li>
<p>å°†è½¬æ¢åçš„ <code>echarts.esm.js</code> æ”¾å…¥é¡¹ç›®ä¸­ï¼Œæ³¨æ„<strong>ä¸è¦</strong>æ”¾åˆ° <code>static</code> ç›®å½•ï¼ˆå› ä¸ºå°ç¨‹åºä»…æ”¯æŒ ES5ï¼Œæ— æ³•è¯†åˆ« <code>export</code> è¯­æ³•ï¼‰ã€‚</p>
</li>
<li>
<p>è°ƒç”¨ <code>provideEcharts</code> å°† <code>echarts</code> æä¾›ç»™ç»„ä»¶ï¼Œæ ¹æ® Uni ECharts çš„å¼•å…¥æ–¹å¼å‚è€ƒä¸‹è¿°æŒ‡å¼•ï¼š</p>
<ul>
<li>
<p>NPM æ–¹å¼</p>
<p>è‡ª <code>2.0.0</code> å¼€å§‹ï¼Œnpm æ–¹å¼å¯ä»¥é€šè¿‡ä¿®æ”¹ Vite æ’ä»¶é…ç½®è½»æ¾ä½¿ç”¨ï¼</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// vite.config.js[ts]</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">UniEcharts</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"uni-echarts/vite"</span>;
<span class="hljs-keyword">import</span> { defineConfig } <span class="hljs-keyword">from</span> <span class="hljs-string">"vite"</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineConfig</span>({
  <span class="hljs-comment">// ...</span>
  <span class="hljs-attr">plugins</span>: [
    <span class="hljs-title class_">UniEcharts</span>({
      <span class="hljs-attr">echarts</span>: {
        <span class="hljs-comment">// ä¼ å®é™…çš„ echarts æ–‡ä»¶è·¯å¾„ï¼Œä¾‹å¦‚ï¼š"@/plugins/echarts.esm.js"</span>
        <span class="hljs-attr">provide</span>: <span class="hljs-string">"/path/to/echarts.esm.js"</span>,
        <span class="hljs-attr">importType</span>: <span class="hljs-string">"default"</span>
      }
    })
  ]
});
</code></pre>
<p>å½“ç„¶ï¼Œä¹Ÿå¯ä»¥æ‰‹åŠ¨è°ƒç”¨ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> { provideEcharts } <span class="hljs-keyword">from</span> <span class="hljs-string">"uni-echarts/shared"</span>;
<span class="hljs-keyword">import</span> echarts <span class="hljs-keyword">from</span> <span class="hljs-string">"/path/to/echarts.esm.js"</span>;

<span class="hljs-title function_">provideEcharts</span>(echarts);
</code></pre>
</li>
<li>
<p>Uni Modules æ–¹å¼</p>
<p>ä½¿ç”¨ uni-modules æ–¹å¼éœ€è¦æ‰‹åŠ¨è°ƒç”¨ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> { provideEcharts } <span class="hljs-keyword">from</span> <span class="hljs-string">"@/uni_modules/xiaohe-echarts"</span>;
<span class="hljs-keyword">import</span> echarts <span class="hljs-keyword">from</span> <span class="hljs-string">"/path/to/echarts.esm.js"</span>;

<span class="hljs-title function_">provideEcharts</span>(echarts);
</code></pre>
</li>
</ul>
</li>
</ol>
<blockquote>
<p>å› ä¸ºç›®å‰è½¬æ¢åçš„ ESM äº§ç‰©ä¸æ”¯æŒ Tree-Shakingï¼Œæ‰€ä»¥ä½¿ç”¨å®šåˆ¶ echarts æ—¶ä¸å†éœ€è¦è°ƒç”¨ <code>echarts.use</code> æŒ‰éœ€æ³¨å†Œç»„ä»¶ã€‚</p>
</blockquote>
<h2 data-id="heading-2">ğŸ’» ä½¿ç”¨ç»„ä»¶</h2>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">uni-echarts</span> <span class="hljs-attr">custom-class</span>=<span class="hljs-string">"chart"</span> <span class="hljs-attr">:option</span>=<span class="hljs-string">"option"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">uni-echarts</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
</code></pre>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> { ref } <span class="hljs-keyword">from</span> <span class="hljs-string">"vue"</span>;
<span class="hljs-keyword">import</span> echarts <span class="hljs-keyword">from</span> <span class="hljs-string">"/path/to/echarts.esm.js"</span>;

<span class="hljs-keyword">const</span> option = <span class="hljs-title function_">ref</span>({
  <span class="hljs-attr">legend</span>: {
    <span class="hljs-attr">top</span>: <span class="hljs-number">10</span>,
    <span class="hljs-attr">left</span>: <span class="hljs-string">"center"</span>
  },
  <span class="hljs-attr">tooltip</span>: {
    <span class="hljs-attr">trigger</span>: <span class="hljs-string">"item"</span>,
    <span class="hljs-attr">textStyle</span>: {
      <span class="hljs-comment">// #ifdef MP-WEIXIN</span>
      <span class="hljs-comment">// ä¸´æ—¶è§£å†³å¾®ä¿¡å°ç¨‹åº tooltip æ–‡å­—é˜´å½±é—®é¢˜</span>
      <span class="hljs-attr">textShadowBlur</span>: <span class="hljs-number">1</span>
      <span class="hljs-comment">// #endif</span>
    }
  },
  <span class="hljs-attr">series</span>: [
    {
      <span class="hljs-attr">type</span>: <span class="hljs-string">"pie"</span>,
      <span class="hljs-attr">radius</span>: [<span class="hljs-string">"30%"</span>, <span class="hljs-string">"52%"</span>],
      <span class="hljs-attr">label</span>: {
        <span class="hljs-attr">show</span>: <span class="hljs-literal">false</span>,
        <span class="hljs-attr">position</span>: <span class="hljs-string">"center"</span>
      },
      <span class="hljs-attr">itemStyle</span>: {
        <span class="hljs-attr">borderWidth</span>: <span class="hljs-number">2</span>,
        <span class="hljs-attr">borderColor</span>: <span class="hljs-string">"#ffffff"</span>,
        <span class="hljs-attr">borderRadius</span>: <span class="hljs-number">10</span>
      },
      <span class="hljs-attr">emphasis</span>: {
        <span class="hljs-attr">label</span>: {
          <span class="hljs-attr">show</span>: <span class="hljs-literal">true</span>,
          <span class="hljs-attr">fontSize</span>: <span class="hljs-number">20</span>
        }
      }
    }
  ],
  <span class="hljs-attr">dataset</span>: {
    <span class="hljs-attr">dimensions</span>: [<span class="hljs-string">"æ¥æº"</span>, <span class="hljs-string">"æ•°é‡"</span>],
    <span class="hljs-attr">source</span>: [
      [<span class="hljs-string">"Search Engine"</span>, <span class="hljs-number">1048</span>],
      [<span class="hljs-string">"Direct"</span>, <span class="hljs-number">735</span>],
      [<span class="hljs-string">"Email"</span>, <span class="hljs-number">580</span>],
      [<span class="hljs-string">"Union Ads"</span>, <span class="hljs-number">484</span>],
      [<span class="hljs-string">"Video Ads"</span>, <span class="hljs-number">300</span>]
    ]
  }
});
</code></pre>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.chart</span> {
  <span class="hljs-attribute">height</span>: <span class="hljs-number">300px</span>;
}
</code></pre>
<blockquote>
<p>ğŸ’¡ å‰å¾€ Uni ECharts å®˜ç½‘ <a href="https://link.juejin.cn?target=https%3A%2F%2Funi-echarts.xiaohe.ink%2Fguide%2Fgetting-started" target="_blank" title="https://uni-echarts.xiaohe.ink/guide/getting-started" ref="nofollow noopener noreferrer">å¿«é€Ÿå¼€å§‹</a> æŸ¥çœ‹å®Œæ•´å†…å®¹</p>
</blockquote>
<h2 data-id="heading-3">â¤ï¸ æ”¯æŒ &amp; é¼“åŠ±</h2>
<p>å¦‚æœ Uni ECharts å¯¹ä½ æœ‰å¸®åŠ©ï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹æ¸ é“å¯¹æˆ‘ä»¬è¡¨ç¤ºé¼“åŠ±ï¼š</p>
<ul>
<li>Starï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fxiaohe0601%2Funi-echarts" target="_blank" title="https://github.com/xiaohe0601/uni-echarts" ref="nofollow noopener noreferrer">Github</a>ã€<a href="https://link.juejin.cn?target=https%3A%2F%2Fgitee.com%2Fxiaohe0601%2Funi-echarts" target="_blank" title="https://gitee.com/xiaohe0601/uni-echarts" ref="nofollow noopener noreferrer">Gitee</a></li>
<li>æ”¶è—ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fext.dcloud.net.cn%2Fplugin%3Fid%3D22035" target="_blank" title="https://ext.dcloud.net.cn/plugin?id=22035" ref="nofollow noopener noreferrer">æ’ä»¶å¸‚åœº</a></li>
<li>èµåŠ©ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Funi-echarts.xiaohe.ink%2Fsponsor%23%25E8%25B5%259E%25E5%258A%25A9" target="_blank" title="https://uni-echarts.xiaohe.ink/sponsor#%E8%B5%9E%E5%8A%A9" ref="nofollow noopener noreferrer">è‡ªæ„¿èµåŠ©</a></li>
</ul>
<p>æ— è®º â­ï¸ è¿˜æ˜¯ ğŸ’° æ”¯æŒï¼Œæˆ‘ä»¬é“­è®°äºå¿ƒï¼Œè¿™å°†æ˜¯æˆ‘ä»¬ç»§ç»­å‰è¿›çš„åŠ¨åŠ›ï¼Œæ„Ÿè°¢æ‚¨çš„æ”¯æŒï¼</p>
<h2 data-id="heading-4">ğŸµ å†™åœ¨æœ€å</h2>
<p>æˆ‘æ˜¯ xiaohe0601ï¼Œçƒ­çˆ±ä»£ç ï¼Œç›®å‰ä¸“æ³¨äº Web å‰ç«¯é¢†åŸŸã€‚</p>
<p>æ¬¢è¿å…³æ³¨æˆ‘çš„å¾®ä¿¡å…¬ä¼—å·ã€Œå°ä½•ä¸ä¼šå†™ä»£ç ã€ï¼Œæˆ‘ä¼šä¸å®šæœŸåˆ†äº«ä¸€äº›å¼€å‘å¿ƒå¾—ã€æœ€ä½³å®è·µä»¥åŠæŠ€æœ¯æ¢ç´¢ç­‰å†…å®¹ï¼Œå¸Œæœ›èƒ½å¤Ÿå¸®åˆ°ä½ ï¼</p>
<h2 data-id="heading-5">ğŸ“š æ¨èé˜…è¯»</h2>
<ul>
<li><a href="https://juejin.cn/post/7569413676157222927" target="_blank" title="https://juejin.cn/post/7569413676157222927">Uni ECharts 2.1 å‘å¸ƒï¼šæ­£å¼æ”¯æŒé¸¿è’™ï¼Œé›¶æˆæœ¬è¿ç§»ã€å…¨å¹³å°å…¼å®¹ã€è·¨ç«¯å¼€å‘é›¶è´Ÿæ‹…ï¼</a></li>
<li><a href="https://juejin.cn/post/7565367982547124224" target="_blank" title="https://juejin.cn/post/7565367982547124224">æ‹¥æŠ± create-uniï¼Œä¸€è¡Œå‘½ä»¤è½»æ¾é›†æˆ Uni EChartsï¼</a></li>
<li><a href="https://juejin.cn/post/7561434147878600744" target="_blank" title="https://juejin.cn/post/7561434147878600744">Uni ECharts 2.0 æ­£å¼å‘å¸ƒï¼šåŸæ¥åœ¨ uni-app ä¸­ä½¿ç”¨ ECharts å¯ä»¥å¦‚æ­¤ç®€å•ï¼</a></li>
<li><a href="https://juejin.cn/post/7531676192397033472" target="_blank" title="https://juejin.cn/post/7531676192397033472">Uni EChartsï¼šä¹Ÿè®¸æ˜¯ uni-app ä¸­ä½¿ç”¨ ECharts æœ€ä¼˜é›…çš„è§£å†³æ–¹æ¡ˆ</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[2025 Â· æˆ‘ä¸ AI / Vibe Coding çš„ä¸€å¹´]]></title>    <link>https://juejin.cn/post/7588149079400841259</link>    <guid>https://juejin.cn/post/7588149079400841259</guid>    <pubDate>2025-12-27T03:16:36.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588149079400841259" data-draft-id="7588064253635526710" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="2025 Â· æˆ‘ä¸ AI / Vibe Coding çš„ä¸€å¹´"/> <meta itemprop="keywords" content="åç«¯,å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-27T03:16:36.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="CoolerWu"/> <meta itemprop="url" content="https://juejin.cn/user/2400989125543272"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            2025 Â· æˆ‘ä¸ AI / Vibe Coding çš„ä¸€å¹´
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2400989125543272/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    CoolerWu
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-27T03:16:36.000Z" title="Sat Dec 27 2025 03:16:36 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    7
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>è¿™ä¸æ˜¯ä¸€ç¯‡â€œAI å¸®æˆ‘ææ•ˆâ€çš„å¹´åº¦æ€»ç»“ã€‚<br/>
ç›¸åï¼Œè¿™æ˜¯æˆ‘åœ¨ 2025 å¹´é‡Œï¼Œ<strong>ä¸æ–­ç»™ AI ä½¿ç”¨æ–¹å¼åšé£æ§å»ºæ¨¡</strong>ä¹‹åï¼Œç•™ä¸‹çš„ä¸€ä»½å·¥ç¨‹åŒ–å¤ç›˜ã€‚</p>
</blockquote>
<p>å¦‚æœä¸€å®šè¦ç»™è¿™ä¸€å¹´ä¸€ä¸ªå…³é”®è¯ï¼Œé‚£ä¸æ˜¯ã€Œæ•ˆç‡ã€ï¼Œè€Œæ˜¯â€”â€”<strong>ä¸è½»ä¿¡</strong>ã€‚</p>
<hr/>
<h2 data-id="heading-0">ä¸€ã€ä¸ºä»€ä¹ˆæˆ‘é€‰æ‹©å†™â€œé£æ§â€ï¼Œè€Œä¸æ˜¯â€œæˆé•¿â€</h2>
<p>å›çœ‹æˆ‘è¿™ä¸€å¹´å’Œ AI çš„å¤§é‡äº¤æµè®°å½•ï¼Œä¼šå‘ç°ä¸€ä¸ªå¾ˆåç›´è§‰çš„ç°è±¡ï¼š<br/>
æˆ‘å¾ˆå°‘çœŸæ­£è¿½æ±‚â€œæ»¡æ„ç­”æ¡ˆâ€ã€‚</p>
<p>æˆ‘åå¤è¿½é—®çš„æ˜¯ï¼š</p>
<ul>
<li>è¿™ä¸ªç»“è®ºçš„éšå«å‰ææ˜¯ä»€ä¹ˆï¼Ÿ</li>
<li>æ¢ä¸€ä¸ªå¸‚åœºçŠ¶æ€ï¼Œå®ƒè¿˜æˆç«‹å—ï¼Ÿ</li>
<li>èƒ½ä¸èƒ½å†™è¿›ä»£ç ï¼Ÿå†™ä¸è¿›å»çš„éƒ¨åˆ†ç®—ä»€ä¹ˆï¼Ÿ</li>
<li>è¿™æ˜¯ä¸æ˜¯ä¸€ç§â€œè§£é‡Šé¡ºæ»‘ï¼Œä½†ä¸å¯æ‰§è¡Œâ€çš„å‡ç†è§£ï¼Ÿ</li>
</ul>
<p>è¿™ç±»é—®é¢˜ï¼Œæœ¬è´¨ä¸Šä¸æ˜¯å­¦ä¹ é—®é¢˜ï¼Œè€Œæ˜¯<strong>é£é™©è¯†åˆ«é—®é¢˜</strong>ã€‚</p>
<p>åœ¨å·¥ç¨‹ä¸–ç•Œé‡Œï¼Œä¸€ä¸ªç³»ç»Ÿæœ€å±é™©çš„çŠ¶æ€ä¸æ˜¯â€œæ˜æ˜¾é”™è¯¯â€ï¼Œè€Œæ˜¯ï¼š</p>
<blockquote>
<p><strong>çœ‹èµ·æ¥ä¸€åˆ‡æ­£å¸¸ï¼Œä½†é£é™©ä»æœªè¢«æ˜¾å¼å»ºæ¨¡ã€‚</strong></p>
</blockquote>
<p>æ‰€ä»¥ï¼Œä¸å…¶è¯´ 2025 å¹´æˆ‘åœ¨â€œç”¨ AI / Vibe Codingâ€ï¼Œ<br/>
ä¸å¦‚è¯´æˆ‘åœ¨å­¦ä¹ ä¸€ä»¶æ›´é‡è¦çš„äº‹ï¼š<br/>
<strong>å¦‚ä½•åœ¨ AI å‚ä¸å†³ç­–çš„å‰æä¸‹ï¼Œä»ç„¶å¯¹ç»“æœè´Ÿè´£ã€‚</strong></p>
<hr/>
<h2 data-id="heading-1">äºŒã€æˆ‘å¯¹ AI çš„è§’è‰²è®¤çŸ¥å˜åŒ–ï¼šä» Copilot åˆ° Fuzzer</h2>
<p>å¹´åˆï¼Œæˆ‘å¯¹ AI çš„å®šä½æ›´åƒæ˜¯ Copilotï¼š</p>
<ul>
<li>è§£é‡Šæ¦‚å¿µ</li>
<li>è¡¥é½æ€è·¯</li>
<li>å¿«é€Ÿç”Ÿæˆæ–¹æ¡ˆ</li>
<li>å¸®æˆ‘æŠŠæ¨¡ç³Šæƒ³æ³•â€œå†™å®Œæ•´â€</li>
</ul>
<p>ä½†éšç€ä½¿ç”¨é¢‘ç‡ä¸Šå‡ï¼Œæˆ‘é€æ¸æ„è¯†åˆ°ä¸€ä»¶äº‹ï¼š</p>
<blockquote>
<p>AI çš„ä»·å€¼ï¼Œä¸åœ¨äºâ€œç»™æˆ‘ç­”æ¡ˆâ€ï¼Œ<br/>
è€Œåœ¨äº<strong>å®ƒä¼šæŠŠæˆ‘æ²¡æƒ³æ¸…æ¥šçš„åœ°æ–¹æ— é™æ”¾å¤§</strong>ã€‚</p>
</blockquote>
<p>äºæ˜¯æˆ‘å¯¹ AI çš„ä½¿ç”¨æ–¹å¼å¼€å§‹å‘ç”Ÿè¿ç§»ï¼š</p>
<ul>
<li>ä¸å†é—®â€œè¿™ä¸ªå¯¹ä¸å¯¹â€</li>
<li>è€Œæ˜¯é—®â€œå®ƒåœ¨å“ªäº›æ¡ä»¶ä¸‹å¿…ç„¶å¤±è´¥â€</li>
<li>ä¸è®©å®ƒè£å†³ï¼Œè€Œæ˜¯è®©å®ƒåˆ¶é€ å‹åŠ›</li>
</ul>
<p>åœ¨å·¥ç¨‹è¯­å¢ƒé‡Œï¼Œè¿™ç§è§’è‰²æ›´åƒ <strong>Fuzzer</strong>ï¼š<br/>
ä¸æ˜¯ç”¨æ¥è¯æ˜ç³»ç»Ÿæ­£ç¡®ï¼Œè€Œæ˜¯ç”¨æ¥<strong>å°½å¯èƒ½å¿«åœ°æ‰¾å‡ºæ¼æ´</strong>ã€‚</p>
<hr/>
<h2 data-id="heading-2">ä¸‰ã€ç¬¬ä¸€ç±»é«˜é¢‘é£é™©ï¼šæŠŠâ€œç”Ÿæˆèƒ½åŠ›â€è¯¯åˆ¤ä¸ºâ€œç†è§£èƒ½åŠ›â€</h2>
<p>è¿™æ˜¯æˆ‘åœ¨ 2025 å¹´æœ€æ—©ã€ä¹Ÿæœ€é¢‘ç¹è¸©åˆ°çš„å‘ã€‚</p>
<p>AI éå¸¸æ“…é•¿åšä¸€ä»¶äº‹ï¼š<br/>
<strong>æŠŠå¤æ‚æ¦‚å¿µè§£é‡Šå¾—è¶³å¤Ÿé¡ºï¼Œè®©ä½ ä»¥ä¸ºè‡ªå·±å·²ç»æŒæ¡ã€‚</strong></p>
<p>ä½†ä½œä¸ºç¨‹åºå‘˜ï¼Œæˆ‘è¶Šæ¥è¶Šè­¦æƒ•è¿™ç§â€œé¡ºâ€ã€‚</p>
<h3 data-id="heading-3">æˆ‘ç»™è‡ªå·±è®¾å®šçš„ä¸€æ¡ç¡¬æ€§é£æ§è§„åˆ™æ˜¯ï¼š</h3>
<blockquote>
<p><strong>ä»»ä½•æ— æ³•è½åœ°ä¸ºâ€œå¯æ‰§è¡Œçº¦æŸâ€çš„ç†è§£ï¼Œéƒ½ä¸ç®—çœŸçš„ç†è§£ã€‚</strong></p>
</blockquote>
<p>å…·ä½“è¡¨ç°ä¸ºï¼š</p>
<ul>
<li>èƒ½ä¸èƒ½å†™æˆ if / elseï¼Ÿ</li>
<li>èƒ½ä¸èƒ½æ˜ç¡®é˜ˆå€¼æ¥æºï¼Ÿ</li>
<li>èƒ½ä¸èƒ½å®šä¹‰å¤±æ•ˆæ¡ä»¶ï¼Ÿ</li>
<li>èƒ½ä¸èƒ½å†™è¿› validatorï¼Œè€Œä¸æ˜¯åœç•™åœ¨æè¿°å±‚ï¼Ÿ</li>
</ul>
<p>å¦‚æœç­”æ¡ˆæ˜¯å¦å®šçš„ï¼Œé‚£è¿™ä¸ªâ€œç†è§£â€åœ¨æˆ‘è¿™å„¿åªèƒ½ç®—<strong>é£é™©èµ„äº§</strong>ã€‚</p>
<p>å› ä¸ºå®ƒçœ‹ä¼¼å­˜åœ¨ï¼Œä½†æ— æ³•è¢«éªŒè¯ã€å›æ”¾ã€çº¦æŸã€‚</p>
<hr/>
<h2 data-id="heading-4">å››ã€Vibe Coding çš„çœŸå®å‰¯ä½œç”¨ï¼šå¯åŠ¨æˆæœ¬ä¸‹é™ï¼Œä½†ç»§ç»­æˆæœ¬è¢«æ©ç›–</h2>
<p>Vibe Coding åœ¨ 2025 å¹´ç»™æˆ‘å¸¦æ¥çš„æœ€å¤§å˜åŒ–ï¼Œç¡®å®æ˜¯<strong>å¯åŠ¨å˜å¾—æå…¶å®¹æ˜“</strong>ã€‚</p>
<p>ç­–ç•¥ã€æ¶æ„ã€æµç¨‹ã€Agent è®¾æƒ³ï¼Œ<br/>
å¾ˆå¤šä¸œè¥¿å‡ ä¹å¯ä»¥â€œè¾¹æƒ³è¾¹è·‘â€ã€‚</p>
<p>ä½†å¾ˆå¿«æˆ‘å‘ç°äº†ä¸€ä¸ªå·¥ç¨‹ä¸Šéå¸¸ç†Ÿæ‚‰çš„é—®é¢˜ï¼š</p>
<blockquote>
<p><strong>åˆ›å»ºæ–°æ¨¡å—å¾ˆå®¹æ˜“ï¼Œç»´æŠ¤å’Œæ”¶æ•›æ‰æ˜¯çœŸæ­£çš„æˆæœ¬ã€‚</strong></p>
</blockquote>
<p>Vibe Coding æå¤§åœ°é™ä½äº†â€œåˆ›å»ºâ€çš„å¿ƒç†é—¨æ§›ï¼Œ<br/>
ä½†å¦‚æœæ²¡æœ‰åŒæ­¥å¼•å…¥â€œç»§ç»­ / æ·˜æ±°â€æœºåˆ¶ï¼Œç³»ç»Ÿåªä¼šè¶Šæ¥è¶Šå¤æ‚ã€‚</p>
<h3 data-id="heading-5">æˆ‘åæ¥ç»™è‡ªå·±è¡¥ä¸Šçš„ä¸€å±‚ Gate æ˜¯ï¼š</h3>
<ul>
<li><strong>å¯æµ‹æ€§</strong>ï¼šæ˜¯å¦æœ‰æŒ‡æ ‡ï¼Ÿï¼ˆæ”¶ç›Šã€å›æ’¤ã€å‘½ä¸­ç‡ã€å»¶è¿Ÿï¼‰</li>
<li><strong>å¯è§‚æµ‹æ€§</strong>ï¼šæ˜¯å¦èƒ½è®°å½• decision traceï¼Ÿ</li>
<li><strong>å¯å›æ»šæ€§</strong>ï¼šæ˜¯å¦æœ‰ fallback / kill switchï¼Ÿ</li>
<li><strong>å¯è§£é‡Šæ€§</strong>ï¼šè§£é‡Šæ˜¯å¦æ˜¯â€œæ¡ä»¶ â†’ è¡Œä¸ºâ€ï¼Œè€Œä¸æ˜¯è‡ªç„¶è¯­è¨€ï¼Ÿ</li>
</ul>
<p>è¿‡ä¸äº† Gate çš„åŸå‹ï¼Œä¸å†ç»§ç»­æ¨è¿›ã€‚</p>
<hr/>
<h2 data-id="heading-6">äº”ã€æˆ‘æœ€è­¦æƒ•çš„ä¸€ç±»ä¿¡å·ï¼šAI è¾“å‡ºçš„â€œç¡®å®šæ„Ÿâ€</h2>
<p>AI çš„è¾“å‡ºæœ‰ä¸€ä¸ªå¤©ç„¶å±æ€§ï¼š<br/>
<strong>ç»“æ„å®Œæ•´ã€è¯­æ°”è‡ªä¿¡ã€é€»è¾‘é—­ç¯</strong>ã€‚</p>
<p>è¿™åœ¨å·¥ç¨‹ä¸–ç•Œé‡Œï¼Œæœ¬èº«å°±æ˜¯ä¸€ç§å±é™©ä¿¡å·ã€‚</p>
<p>å› ä¸ºå®ƒä¼šå¯¼è‡´ä¸€ä¸ªéå¸¸å…¸å‹çš„å¤±è´¥æ¨¡å¼ï¼š</p>
<blockquote>
<p>å¤§å®¶éƒ½è§‰å¾—â€œçœ‹èµ·æ¥æ²¡é—®é¢˜â€ï¼Œ<br/>
æ‰€ä»¥çœŸæ­£çš„é£é™©æ²¡æœ‰è¢«ä»»ä½•äººè®¤çœŸå®¡è§†ã€‚</p>
</blockquote>
<p>å°¤å…¶æ˜¯åœ¨é‡åŒ–å’Œç­–ç•¥åœºæ™¯ä¸­ï¼Œè¿™ç§â€œç¡®å®šæ„Ÿâ€æ˜¯è‡´å‘½çš„ã€‚<br/>
ä¸æ˜¯å› ä¸ºå®ƒä¸€å®šé”™ï¼Œè€Œæ˜¯å› ä¸ºå®ƒ<strong>æ©ç›–äº†ä¸ç¡®å®šæ€§</strong>ã€‚</p>
<p>æ‰€ä»¥æˆ‘åœ¨è¿™ä¸€å¹´é‡Œï¼Œåˆ»æ„æ”¹å˜äº†æé—®æ–¹å¼ï¼š</p>
<ul>
<li>ä¸å†é—®â€œè¿™ä¸ªç­–ç•¥å¥½ä¸å¥½â€</li>
<li>è€Œæ˜¯é—®â€œå®ƒåœ¨ä»€ä¹ˆå¸‚åœºçŠ¶æ€ä¸‹ä¼šå¤±æ•ˆâ€</li>
<li>ä¸å†å…³å¿ƒå¹³å‡è¡¨ç°</li>
<li>è€Œæ˜¯å…³å¿ƒå°¾éƒ¨é£é™©å’Œç»“æ„æ€§åå·®</li>
</ul>
<hr/>
<h2 data-id="heading-7">å…­ã€åœ¨é‡åŒ–ç³»ç»Ÿé‡Œï¼Œæˆ‘ç»™ AI è®¾å®šçš„æ˜ç¡®è¾¹ç•Œ</h2>
<p>è¿™ä¸€å¹´æˆ‘åå¤å°è¯•ã€ä¹Ÿåå¤é€€å›çš„ä¸€ä¸ªè¾¹ç•Œæ˜¯ï¼š</p>
<blockquote>
<p><strong>AI å¯ä»¥å‚ä¸å»ºè®®ï¼Œä½†ä¸èƒ½æ‹¥æœ‰æ‰§è¡Œæƒã€‚</strong></p>
</blockquote>
<p>åœ¨ç³»ç»Ÿå±‚é¢ï¼Œæˆ‘æ›´å€¾å‘äºè¿™æ ·æ‹†åˆ†ï¼š</p>
<ul>
<li><strong>Signal å±‚</strong>ï¼šLLM ç»™å‡ºæ–¹å‘ã€ç†ç”±ã€å€™é€‰å‚æ•°</li>
<li><strong>Policy å±‚</strong>ï¼šè§„åˆ™ã€é˜ˆå€¼ã€ä»“ä½ã€å†·å´æ—¶é—´ï¼ˆç¡®å®šæ€§ï¼‰</li>
<li><strong>Execution å±‚</strong>ï¼šä¸‹å•ã€é£æ§ã€é™é€Ÿã€å®¹é”™</li>
</ul>
<p>LLM åªèƒ½å­˜åœ¨äºç¬¬ä¸€å±‚ã€‚<br/>
ç¬¬äºŒå±‚å¿…é¡»å¯æµ‹è¯•ã€å¯å›æ”¾ã€‚<br/>
ç¬¬ä¸‰å±‚å¿…é¡»æåº¦ä¿å®ˆã€‚</p>
<p>ç¨‹åºå‘˜çš„ç›´è§‰å¾ˆç®€å•ï¼š<br/>
<strong>LLM è¾“å‡ºæœ¬è´¨ä¸Šæ˜¯ä¸å¯ä¿¡è¾“å…¥ã€‚</strong><br/>
ä¸åš sanitizerï¼Œå°±ç­‰äºæŠŠç”¨æˆ·è¾“å…¥ç›´æ¥æ‹¼ SQL ä¸Šçº¿ã€‚</p>
<hr/>
<h2 data-id="heading-8">ä¸ƒã€æ­¢æŸä¸è°ƒåº¦çš„è®¨è®ºï¼Œæœ¬è´¨ä¸Šéƒ½æ˜¯é£æ§é—®é¢˜</h2>
<p>æ— è®ºæ˜¯â€œæ—¶é—´è¡°å‡ vs æµ®ç›ˆç™¾åˆ†æ¯”â€çš„æ­¢æŸè®¨è®ºï¼Œ<br/>
è¿˜æ˜¯â€œ15m è°ƒåº¦ vs 1h è°ƒåº¦â€çš„äº‰è®ºï¼Œ<br/>
åœ¨æˆ‘è¿™å„¿éƒ½ä¸æ˜¯å‚æ•°é€‰æ‹©é—®é¢˜ï¼Œè€Œæ˜¯<strong>å› æœæ˜¯å¦æˆç«‹çš„é—®é¢˜</strong>ã€‚</p>
<ul>
<li>æ—¶é—´æœ¬èº«ä¸æ˜¯å¸‚åœºçŠ¶æ€æŒ‡æ ‡</li>
<li>å»¶è¿Ÿå¦‚æœå¤§äºä¿¡å·å‘¨æœŸï¼Œå†³ç­–å°±æ˜¯æ»åçš„</li>
<li>è§„åˆ™å¦‚æœèƒ½è¢«â€œé’»ç©ºå­â€ï¼Œé•¿æœŸä¸€å®šä¼šæ¼‚ç§»</li>
</ul>
<p>æˆ‘æ›´æ„¿æ„æ¥å—ä¸€ä¸ª<strong>çœ‹èµ·æ¥ä¸ä¼˜é›…ã€ä½†å‰ææ¸…æ™°</strong>çš„æ–¹æ¡ˆï¼Œ<br/>
è€Œä¸æ˜¯ä¸€ä¸ªè§£é‡Šæ¼‚äº®ã€ä½†é€»è¾‘è„†å¼±çš„æ–¹æ¡ˆã€‚</p>
<hr/>
<h2 data-id="heading-9">å…«ã€å…³äºâ€œè‡ªè¿›åŒ–â€ï¼šæˆ‘é€‰æ‹©å·¥ç¨‹ç°å®ï¼Œè€Œä¸æ˜¯å¹»æƒ³é—­ç¯</h2>
<p>æˆ‘å¹¶ä¸å¦è®¤â€œè‡ªè¿›åŒ–â€è¿™ä¸ªæ–¹å‘çš„å¸å¼•åŠ›ã€‚<br/>
ç›¸åï¼Œæˆ‘åœ¨è¿™ä¸€å¹´é‡Œéå¸¸è®¤çœŸåœ°æ‹†è§£è¿‡å®ƒï¼š</p>
<ul>
<li>å¥–åŠ±ä¿¡å·æ˜¯å¦å¯å­¦ä¹ ï¼Ÿ</li>
<li>æ ·æœ¬æ˜¯å¦è¶³å¤Ÿï¼Ÿ</li>
<li>å½’å› æ˜¯å¦é”™é…ï¼Ÿ</li>
<li>æˆæœ¬æ˜¯å¦å¯æ§ï¼Ÿ</li>
<li>å›çœ‹åå·®å¦‚ä½•é¿å…ï¼Ÿ</li>
</ul>
<p>æœ€åæˆ‘ä¿ç•™ä¸‹æ¥çš„ç‰ˆæœ¬ï¼Œæ›´åƒæ˜¯ï¼š</p>
<ul>
<li>LLM ä¸å‚ä¸æ¯ tick å†³ç­–</li>
<li>å¿«ç…§ + embedding ç”¨äºç›¸ä¼¼è¡Œæƒ…æ£€ç´¢</li>
<li>LLM åœ¨å…³é”®èŠ‚ç‚¹ç»™â€œç­–ç•¥è°ƒæ•´å»ºè®®â€</li>
<li>æ‰§è¡Œå±‚å§‹ç»ˆç”±è§„åˆ™å…œåº•</li>
</ul>
<p>è¿™ä¸æ˜¯æ”¾å¼ƒè¿›åŒ–ï¼Œè€Œæ˜¯<strong>æŠŠè¿›åŒ–çº¦æŸåœ¨å·¥ç¨‹å¯æ§èŒƒå›´å†…</strong>ã€‚</p>
<hr/>
<h2 data-id="heading-10">ä¹ã€è¿™ä¸€å¹´çš„æœ€ç»ˆç»“è®ºï¼šAI æ²¡è®©æˆ‘æ›´èªæ˜ï¼Œä½†è®©æˆ‘æ›´éš¾è‡ªæ¬º</h2>
<p>å¦‚æœä¸€å®šè¦æ€»ç»“ 2025 å¹´ AI / Vibe Coding å¯¹æˆ‘çš„å½±å“ï¼Œé‚£ä¼šæ˜¯ï¼š</p>
<blockquote>
<p><strong>AI æ²¡æœ‰æ›¿æˆ‘æ€è€ƒï¼Œä½†å®ƒè®©æˆ‘æ›´éš¾åœ¨é€»è¾‘ä¸Šæ•·è¡è‡ªå·±ã€‚</strong></p>
</blockquote>
<p>åœ¨ä¸€ä¸ªç­”æ¡ˆæåº¦å»‰ä»·ã€ç”Ÿæˆå‡ ä¹æ— æˆæœ¬çš„æ—¶ä»£ï¼Œ<br/>
çœŸæ­£ç¨€ç¼ºçš„èƒ½åŠ›åè€Œæ˜¯ï¼š</p>
<ul>
<li>æ„¿æ„åœä¸‹æ¥</li>
<li>èƒ½æ¥å—ä¸ç¡®å®š</li>
<li>å¯¹è‡ªå·±çš„å†³ç­–è´Ÿè´£</li>
</ul>
<p>é£æ§ï¼Œä»æ¥ä¸æ˜¯é™åˆ¶åˆ›é€ åŠ›ã€‚<br/>
å®ƒåªæ˜¯æé†’æˆ‘ï¼š<br/>
<strong>æ¯ä¸€ä¸ªâ€œçœ‹èµ·æ¥åˆç†â€çš„ç»“è®ºï¼Œéƒ½åº”è¯¥è¢«å½“æˆæ½œåœ¨é£é™©å¯¹å¾…ã€‚</strong></p>
<hr/>
<h2 data-id="heading-11">é™„ï¼šæˆ‘ç»™è‡ªå·±å›ºåŒ–çš„ä¸€ä»½ AI ä½¿ç”¨é£æ§æ¸…å•</h2>
<h3 data-id="heading-12">è¾“å…¥é£æ§</h3>
<ul class="contains-task-list">
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> LLM è¾“å‡ºæ˜¯å¦æœ‰ schemaï¼Ÿ</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> æ˜¯å¦åšäº†æ ¡éªŒä¸å…œåº•ï¼Ÿ</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> æ˜¯å¦è®°å½• decision traceï¼Ÿ</li>
</ul>
<h3 data-id="heading-13">ç­–ç•¥é£æ§</h3>
<ul class="contains-task-list">
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> æ˜¯å¦æ˜ç¡®éšå«å‰æï¼Ÿ</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> æ˜¯å¦åˆ—å‡ºå¤±æ•ˆåœºæ™¯ï¼Ÿ</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> æ˜¯å¦å¯å›æ”¾ï¼Ÿ</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> æ˜¯å¦æœ‰æœ€å¤§é£é™©æš´éœ²é™åˆ¶ï¼Ÿ</li>
</ul>
<h3 data-id="heading-14">å·¥ç¨‹é£æ§</h3>
<ul class="contains-task-list">
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> å»¶è¿Ÿæ˜¯å¦åŒ¹é…è°ƒåº¦å‘¨æœŸï¼Ÿ</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> æˆæœ¬æ˜¯å¦å¯æ§ï¼Ÿ</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> æ˜¯å¦å¯è§‚æµ‹ï¼Ÿ</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> æ˜¯å¦å¯ç¦ç”¨ï¼Ÿ</li>
</ul>
<hr/>
<blockquote>
<p>çœŸæ­£éœ€è¦è¢«é£æ§çš„ï¼Œä»æ¥ä¸æ˜¯ AIã€‚<br/>
è€Œæ˜¯æˆ‘ä»¬åœ¨â€œç­”æ¡ˆå”¾æ‰‹å¯å¾—â€æ—¶ï¼Œ<br/>
æ˜¯å¦è¿˜æ„¿æ„ä¸ºåˆ¤æ–­æ‰¿æ‹…è´£ä»»ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Echartså¸¸ç”¨é…ç½®]]></title>    <link>https://juejin.cn/post/7588010346071130122</link>    <guid>https://juejin.cn/post/7588010346071130122</guid>    <pubDate>2025-12-27T03:25:07.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588010346071130122" data-draft-id="7369423779309944871" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Echartså¸¸ç”¨é…ç½®"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-27T03:25:07.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å°ç™½x"/> <meta itemprop="url" content="https://juejin.cn/user/404211847925095"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Echartså¸¸ç”¨é…ç½®
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/404211847925095/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å°ç™½x
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-27T03:25:07.000Z" title="Sat Dec 27 2025 03:25:07 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h5 data-id="heading-0">titleè®¾ç½®å­—ä½“</h5>
<p>textStyle</p>
<pre><code class="hljs language-css" lang="css">option = {
  title: {
    text: <span class="hljs-string">"Main Title"</span>,
    subtext: <span class="hljs-string">"Sub Title"</span>,
    left: <span class="hljs-string">"center"</span>,
    top: <span class="hljs-string">"center"</span>,
    textStyle: {
      fontSize: <span class="hljs-number">30</span>,
      fontWeight:<span class="hljs-string">'bolder'</span>
    },
    subtextStyle: {
      fontSize: <span class="hljs-number">20</span>
    }
  }
}
</code></pre>
<h5 data-id="heading-1">æ§åˆ¶å›¾è¡¨è¾¹è·</h5>
<p>grid: {
top: '20%'ï¼Œbotton:'20%',left:'10%',right:'10%'
},</p>
<h5 data-id="heading-2">Xè½´åæ ‡ç³»æ ‡ç­¾ï¼Œæ—‹è½¬è§’åº¦</h5>
<pre><code class="hljs language-css" lang="css">       xAxis: [
          {
            type: <span class="hljs-string">'category'</span>,
            data: data,
            axisPointer: {
              type: <span class="hljs-string">'shadow'</span>
            },
            axisLabel: { // åæ ‡è½´åˆ»åº¦æ ‡ç­¾çš„ç›¸å…³è®¾ç½®ã€‚
              rotate: <span class="hljs-string">'20'</span> // xè½´æ•°æ®æ ‡ç­¾æ—‹è½¬è§’åº¦
            }
          }
        ],
</code></pre>
<h5 data-id="heading-3">é™åˆ¶æŸ±çŠ¶å›¾æœ€å¤§å®½åº¦</h5>
<pre><code class="hljs language-kotlin" lang="kotlin">    series: [
          {
            name: <span class="hljs-string">'æ•°é‡'</span>,
            type: <span class="hljs-string">'bar'</span>,
            barMaxWidth: <span class="hljs-number">50</span>, <span class="hljs-comment">// æœ€å¤§å®½åº¦</span>
            <span class="hljs-keyword">data</span>: <span class="hljs-keyword">data</span>
          }]
</code></pre>
<h5 data-id="heading-4">æŸ±çŠ¶å›¾æ¸å˜è‰²</h5>
<pre><code class="hljs language-less" lang="less"><span class="hljs-selector-tag">series</span>é‡Œé¢
    <span class="hljs-selector-tag">itemStyle</span>: {
              <span class="hljs-attribute">color</span>: new echarts.graphic.<span class="hljs-built_in">LinearGradient</span>(
                <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-comment">// æ¸å˜æ–¹å‘ä»å·¦ä¸Šè§’åˆ°å³ä¸‹è§’</span>
                [
                  { <span class="hljs-attribute">offset</span>: <span class="hljs-number">0</span>, <span class="hljs-attribute">color</span>: <span class="hljs-string">'rgb(128,100,162)'</span> }, <span class="hljs-comment">// 0% å¤„çš„é¢œè‰²</span>
                  { <span class="hljs-attribute">offset</span>: <span class="hljs-number">1</span>, <span class="hljs-attribute">color</span>: <span class="hljs-string">'#fff'</span> } <span class="hljs-comment">// 100% å¤„çš„é¢œè‰²</span>
                ]
              )
            },
</code></pre>
<h5 data-id="heading-5">æŸ±çŠ¶å›¾æ–‡å­—æ˜¾ç¤º</h5>
<p>ç›´æ¥åœ¨å–æ¶ˆæŸ±å­ä¸Šæ–¹æ˜¾ç¤ºå…·ä½“æ•°æ®ä¿¡æ¯ï¼Œä»¥åŠè‡ªå®šä¹‰ä¿¡æ¯ï¼Œæ¯”å¦‚100%ï¼Œæ•°å­—åé¢åŠ ä¸€ä¸ªç™¾åˆ†å·
1ï¼‰showï¼Œæ˜¾ç¤ºèŠ‚ç‚¹ä¸Šçš„æ–‡æœ¬ä¿¡æ¯
2ï¼‰positionï¼Œæ–‡æœ¬ä½ç½®ï¼Œå¯ä»¥æ ¹æ®éœ€è¦è°ƒæ•´ä¸º â€˜topâ€™, â€˜bottomâ€™, â€˜insideâ€™, â€˜insideTopâ€™, ç­‰
topï¼Œè¡¨ç¤ºåœ¨èŠ‚ç‚¹ä¸Šæ–¹</p>
<pre><code class="hljs language-kotlin" lang="kotlin">series: [
    {
      <span class="hljs-keyword">data</span>: [<span class="hljs-number">150</span>, <span class="hljs-number">230</span>, <span class="hljs-number">224</span>, <span class="hljs-number">218</span>, <span class="hljs-number">135</span>, <span class="hljs-number">147</span>, <span class="hljs-number">260</span>],
      type: <span class="hljs-string">'bar'</span>,
      label:{
        show:<span class="hljs-literal">true</span>,
        position:<span class="hljs-string">'top'</span>,
        formatter:function(<span class="hljs-keyword">data</span>){
          <span class="hljs-keyword">return</span> <span class="hljs-keyword">data</span>.value+<span class="hljs-string">'ä»¶'</span>
        }
      }
    }
  ]
</code></pre>
<h5 data-id="heading-6">æŠ˜çº¿å›¾å˜å¹³æ»‘</h5>
<p>serieså±æ€§ä¸­ä½¿ç”¨smooth: trueè¯­å¥è®©æŠ˜çº¿å›¾å˜æˆå¹³æ»‘æŠ˜çº¿å›¾</p>
<h4 data-id="heading-7">echartæŸ±çŠ¶å›¾æœ€å°é—´éš”</h4>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">var</span> option = {
    <span class="hljs-comment">// ... å…¶ä»–é…ç½®é¡¹</span>
    yAxis: {
        <span class="hljs-keyword">type</span>: <span class="hljs-string">'value'</span>,
        <span class="hljs-comment">// è®¾ç½®Yè½´çš„æœ€å°é—´éš”</span>
        minInterval: <span class="hljs-number">1</span> <span class="hljs-comment">// ç¤ºä¾‹å€¼ï¼Œæ ¹æ®å®é™…éœ€æ±‚è¿›è¡Œè°ƒæ•´</span>
    },
    <span class="hljs-comment">// ... å…¶ä»–é…ç½®é¡¹</span>
};
</code></pre>
<h3 data-id="heading-8">ç«‹ä½“æŸ±çŠ¶å›¾</h3>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-string">var</span> <span class="hljs-string">xData2</span> <span class="hljs-string">=</span> [<span class="hljs-string">'å®¹åŸè°·åº„'</span>]
<span class="hljs-string">var</span> <span class="hljs-string">data1</span> <span class="hljs-string">=</span> [<span class="hljs-number">50</span>]
<span class="hljs-string">option</span> <span class="hljs-string">=</span> {
    <span class="hljs-attr">backgroundColor:</span> <span class="hljs-string">'rgba(0,0,0,0)'</span>,
    <span class="hljs-attr">grid:</span> {
        <span class="hljs-attr">left:</span> <span class="hljs-number">0</span>,
        <span class="hljs-attr">bottom:</span> <span class="hljs-number">15</span>,
        <span class="hljs-attr">top:</span> <span class="hljs-number">15</span>,
        <span class="hljs-attr">right:</span> <span class="hljs-number">80</span>
    },
    <span class="hljs-attr">xAxis:</span> {
        <span class="hljs-attr">data:</span> <span class="hljs-string">xData2</span>,
        <span class="hljs-attr">axisTick:</span> {
            <span class="hljs-attr">show:</span> <span class="hljs-literal">false</span>
        },
        <span class="hljs-attr">axisLine:</span> {
            <span class="hljs-attr">show:</span> <span class="hljs-literal">false</span>
        },
        <span class="hljs-attr">axisLabel:</span> {
            <span class="hljs-attr">show:</span> <span class="hljs-literal">false</span>
        }
    },
    <span class="hljs-attr">yAxis:</span> {
        <span class="hljs-attr">splitLine:</span> {
            <span class="hljs-attr">show:</span> <span class="hljs-literal">false</span>
        },
        <span class="hljs-attr">axisTick:</span> {
            <span class="hljs-attr">show:</span> <span class="hljs-literal">false</span>
        },
        <span class="hljs-attr">axisLine:</span> {
            <span class="hljs-attr">show:</span> <span class="hljs-literal">false</span>
        },
        <span class="hljs-attr">axisLabel:</span> {
            <span class="hljs-string">//</span> <span class="hljs-attr">textStyle:</span> {
            <span class="hljs-string">//</span>     <span class="hljs-attr">color:</span> <span class="hljs-string">'#fff'</span>,
            <span class="hljs-string">//</span>     <span class="hljs-attr">fontSize:</span> <span class="hljs-number">20</span>,
            <span class="hljs-string">//</span> },
            <span class="hljs-string">//</span> <span class="hljs-string">ä¸æ˜¾ç¤ºYè½´æ•°å€¼</span>
            <span class="hljs-attr">formatter:</span> <span class="hljs-string">function</span> <span class="hljs-string">()</span> {
                <span class="hljs-string">return</span> <span class="hljs-string">''</span>
            }
        }
    },
    <span class="hljs-attr">series:</span> [
        <span class="hljs-string">//</span> <span class="hljs-string">æ•°æ®ä½ä¸‹çš„åœ†ç‰‡</span>
        {
            <span class="hljs-attr">name:</span> <span class="hljs-string">''</span>,
            <span class="hljs-attr">type:</span> <span class="hljs-string">'pictorialBar'</span>,
            <span class="hljs-attr">symbolSize:</span> [<span class="hljs-number">41</span>, <span class="hljs-number">15</span>],
            <span class="hljs-attr">symbolOffset:</span> [<span class="hljs-number">0</span>, <span class="hljs-number">8</span>],
            <span class="hljs-attr">z:</span> <span class="hljs-number">12</span>,
            <span class="hljs-attr">symbol:</span> <span class="hljs-string">'circle'</span>, <span class="hljs-string">//</span> <span class="hljs-string">ä¿®æ”¹ä¸ºåœ†å½¢</span>
            <span class="hljs-attr">itemStyle:</span> {
                <span class="hljs-attr">opacity:</span> <span class="hljs-number">1</span>,
                <span class="hljs-attr">color:</span> <span class="hljs-string">function</span> <span class="hljs-string">(params)</span> {
                    <span class="hljs-string">return</span> <span class="hljs-string">new</span> <span class="hljs-string">echarts.graphic.LinearGradient(</span>
                        <span class="hljs-number">1</span>,
                        <span class="hljs-string">//</span> <span class="hljs-string">æ·±è‰²#2BA9ED</span> <span class="hljs-string">æµ…è‰²</span> <span class="hljs-comment">#34EDF2</span>
                        <span class="hljs-number">0</span>,
                        <span class="hljs-number">0</span>,
                        <span class="hljs-number">0</span>,
                        [
                            {
                                <span class="hljs-attr">offset:</span> <span class="hljs-number">0</span>,
                                <span class="hljs-attr">color:</span> <span class="hljs-string">'#E1DC53'</span> <span class="hljs-string">//</span> <span class="hljs-number">0</span><span class="hljs-string">%</span> <span class="hljs-string">å¤„çš„é¢œè‰²</span>
                            },
                            {
                                <span class="hljs-attr">offset:</span> <span class="hljs-number">1</span>,
                                <span class="hljs-attr">color:</span> <span class="hljs-string">'#E1DC53'</span> <span class="hljs-string">//</span> <span class="hljs-number">100</span><span class="hljs-string">%</span> <span class="hljs-string">å¤„çš„é¢œè‰²</span>
                            }
                        ],
                        <span class="hljs-literal">false</span>
                    <span class="hljs-string">)</span>
                }
                <span class="hljs-string">//</span> <span class="hljs-attr">color:</span> <span class="hljs-string">'transparent'</span>
            },
            <span class="hljs-attr">data:</span> [<span class="hljs-number">1</span>]
        },
        <span class="hljs-string">//</span> <span class="hljs-string">æ•°æ®çš„æŸ±çŠ¶å›¾</span>
        {
            <span class="hljs-attr">name:</span> <span class="hljs-string">''</span>,
            <span class="hljs-attr">type:</span> <span class="hljs-string">'bar'</span>,
            <span class="hljs-attr">barWidth:</span> <span class="hljs-number">41</span>,
            <span class="hljs-attr">itemStyle:</span> {
                <span class="hljs-string">//</span> <span class="hljs-string">lengedæ–‡æœ¬</span>
                <span class="hljs-attr">opacity:</span> <span class="hljs-number">1</span>, <span class="hljs-string">//</span> <span class="hljs-string">è¿™ä¸ªæ˜¯</span> <span class="hljs-string">é€æ˜åº¦</span>
                <span class="hljs-attr">color:</span> <span class="hljs-string">function</span> <span class="hljs-string">(params)</span> {
                    <span class="hljs-string">return</span> <span class="hljs-string">new</span> <span class="hljs-string">echarts.graphic.LinearGradient(</span>
                        <span class="hljs-number">0</span>,
                        <span class="hljs-number">1</span>,
                        <span class="hljs-number">0</span>,
                        <span class="hljs-number">0</span>,
                        [
                            {
                                <span class="hljs-attr">offset:</span> <span class="hljs-number">0</span>,
                                <span class="hljs-attr">color:</span> <span class="hljs-string">'#E1DC53'</span> <span class="hljs-string">//</span> <span class="hljs-number">0</span><span class="hljs-string">%</span> <span class="hljs-string">å¤„çš„é¢œè‰²</span>
                            },
                            {
                                <span class="hljs-attr">offset:</span> <span class="hljs-number">1</span>,
                                <span class="hljs-attr">color:</span> <span class="hljs-string">'#E8AE62'</span> <span class="hljs-string">//</span> <span class="hljs-number">100</span><span class="hljs-string">%</span> <span class="hljs-string">å¤„çš„é¢œè‰²</span>
                            }
                        ],
                        <span class="hljs-literal">false</span>
                    <span class="hljs-string">)</span>
                }
            },

            <span class="hljs-attr">data:</span> <span class="hljs-string">data1</span>
        },
        <span class="hljs-string">//</span> <span class="hljs-string">æ›¿ä»£æŸ±çŠ¶å›¾</span> <span class="hljs-string">é»˜è®¤ä¸æ˜¾ç¤ºé¢œè‰²ï¼Œæ˜¯æœ€ä¸‹æ–¹æŸ±å›¾ï¼ˆé‚®ä»¶è¥é”€ï¼‰çš„valueå€¼</span> <span class="hljs-bullet">-</span> <span class="hljs-number">20</span>
        {
            <span class="hljs-attr">type:</span> <span class="hljs-string">'bar'</span>,
            <span class="hljs-attr">symbol:</span> <span class="hljs-string">'circle'</span>, <span class="hljs-string">//</span> <span class="hljs-string">ä¿®æ”¹ä¸ºåœ†å½¢</span>
            <span class="hljs-attr">barWidth:</span> <span class="hljs-number">43</span>,
            <span class="hljs-attr">itemStyle:</span> {
                <span class="hljs-attr">color:</span> <span class="hljs-string">'transparent'</span>
            },
            <span class="hljs-attr">data:</span> <span class="hljs-string">data1</span>
        },
        <span class="hljs-string">//</span> <span class="hljs-string">æ•°æ®é¡¶éƒ¨çš„æ ·å¼</span>
        {
            <span class="hljs-attr">name:</span> <span class="hljs-string">''</span>,
            <span class="hljs-attr">type:</span> <span class="hljs-string">'pictorialBar'</span>,
            <span class="hljs-attr">symbol:</span> <span class="hljs-string">'circle'</span>, <span class="hljs-string">//</span> <span class="hljs-string">ä¿®æ”¹ä¸ºåœ†å½¢</span>
            <span class="hljs-attr">symbolSize:</span> [<span class="hljs-number">41</span>, <span class="hljs-number">15</span>],
            <span class="hljs-attr">symbolOffset:</span> [<span class="hljs-number">0</span>, <span class="hljs-number">-8</span>],
            <span class="hljs-attr">z:</span> <span class="hljs-number">12</span>,
            <span class="hljs-attr">itemStyle:</span> {
                <span class="hljs-attr">normal:</span> {
                    <span class="hljs-attr">opacity:</span> <span class="hljs-number">1</span>,
                    <span class="hljs-attr">color:</span> <span class="hljs-string">function</span> <span class="hljs-string">(params)</span> {
                        <span class="hljs-string">return</span> <span class="hljs-string">new</span> <span class="hljs-string">echarts.graphic.LinearGradient(</span>
                            <span class="hljs-number">0</span>,
                            <span class="hljs-number">0</span>,
                            <span class="hljs-number">1</span>,
                            <span class="hljs-number">0</span>,
                            [
                                {
                                    <span class="hljs-attr">offset:</span> <span class="hljs-number">0</span>,
                                    <span class="hljs-attr">color:</span> <span class="hljs-string">'#E1DC53'</span> <span class="hljs-string">//</span> <span class="hljs-number">0</span><span class="hljs-string">%</span> <span class="hljs-string">å¤„çš„é¢œè‰²</span>
                                },
                                {
                                    <span class="hljs-attr">offset:</span> <span class="hljs-number">1</span>,
                                    <span class="hljs-attr">color:</span> <span class="hljs-string">'#E8AE62'</span> <span class="hljs-string">//</span> <span class="hljs-number">100</span><span class="hljs-string">%</span> <span class="hljs-string">å¤„çš„é¢œè‰²</span>
                                }
                            ],
                            <span class="hljs-literal">false</span>
                        <span class="hljs-string">)</span>
                    },
                    <span class="hljs-attr">label:</span> {
                        <span class="hljs-attr">show:</span> <span class="hljs-literal">true</span>, <span class="hljs-string">//</span> <span class="hljs-string">å¼€å¯æ˜¾ç¤º</span>
                        <span class="hljs-attr">position:</span> <span class="hljs-string">'top'</span>, <span class="hljs-string">//</span> <span class="hljs-string">åœ¨ä¸Šæ–¹æ˜¾ç¤º</span>
                        <span class="hljs-attr">textStyle:</span> {
                            <span class="hljs-string">//</span> <span class="hljs-string">æ•°å€¼æ ·å¼</span>
                            <span class="hljs-attr">color:</span> <span class="hljs-string">'#FFFFFF'</span>,
                            <span class="hljs-attr">fontSize:</span> <span class="hljs-number">20</span>,
                            <span class="hljs-attr">top:</span> <span class="hljs-number">50</span>
                        },
                        <span class="hljs-attr">formatter:</span> <span class="hljs-string">function</span> <span class="hljs-string">(param)</span> {
                            <span class="hljs-string">return</span> <span class="hljs-string">param.data</span> <span class="hljs-string">+</span> <span class="hljs-string">'%'</span>
                        }
                    }
                }
            },
            <span class="hljs-attr">symbolPosition:</span> <span class="hljs-string">'end'</span>,
            <span class="hljs-attr">data:</span> <span class="hljs-string">data1</span>
        },

        <span class="hljs-string">//</span> <span class="hljs-string">é˜´å½±çš„é¡¶éƒ¨</span>
        {
            <span class="hljs-attr">name:</span> <span class="hljs-string">''</span>, <span class="hljs-string">//</span> <span class="hljs-string">å¤´éƒ¨</span>
            <span class="hljs-attr">type:</span> <span class="hljs-string">'pictorialBar'</span>,
            <span class="hljs-attr">symbol:</span> <span class="hljs-string">'circle'</span>, <span class="hljs-string">//</span> <span class="hljs-string">ä¿®æ”¹ä¸ºåœ†å½¢</span>
            <span class="hljs-attr">symbolSize:</span> [<span class="hljs-number">41</span>, <span class="hljs-number">15</span>],
            <span class="hljs-attr">symbolOffset:</span> [<span class="hljs-number">0</span>, <span class="hljs-number">-8</span>],
            <span class="hljs-attr">z:</span> <span class="hljs-number">17</span>,
            <span class="hljs-attr">symbolPosition:</span> <span class="hljs-string">'end'</span>,
            <span class="hljs-attr">itemStyle:</span> {
                <span class="hljs-attr">color:</span> <span class="hljs-string">'rgba(24,78,134,0.3)'</span>,
                <span class="hljs-attr">opacity:</span> <span class="hljs-number">0.3</span>,
                <span class="hljs-attr">borderWidth:</span> <span class="hljs-number">1</span>,
                <span class="hljs-attr">borderColor:</span> <span class="hljs-string">'#526558'</span>
            },
            <span class="hljs-attr">data:</span> [<span class="hljs-number">100</span>]
        },
        <span class="hljs-string">//</span> <span class="hljs-string">åé¢çš„èƒŒæ™¯</span>
        {
            <span class="hljs-attr">name:</span> <span class="hljs-string">'2019'</span>,
            <span class="hljs-attr">type:</span> <span class="hljs-string">'bar'</span>,
            <span class="hljs-attr">barWidth:</span> <span class="hljs-number">41</span>,
            <span class="hljs-attr">barGap:</span> <span class="hljs-string">'-100%'</span>,
            <span class="hljs-attr">z:</span> <span class="hljs-number">0</span>,
            <span class="hljs-attr">itemStyle:</span> {
                <span class="hljs-attr">color:</span> <span class="hljs-string">'rgba(24,78,134,0.1)'</span>
            },
            <span class="hljs-attr">data:</span> [<span class="hljs-number">100</span>]
        }
    ]
}
</code></pre>
<h5 data-id="heading-9">Echartsç»™æŸ±çŠ¶å›¾ä¸Šé¢å¢åŠ å°æ¨ªæ </h5>
<pre><code class="hljs language-css" lang="css"> option = {
      title: {
        text: <span class="hljs-string">'ä¸–ç•Œäººå£ç»Ÿè®¡'</span>,
        left: <span class="hljs-string">'center'</span>,
        textStyle: {
          fontSize: <span class="hljs-number">24</span>,
          fontWeight: <span class="hljs-string">'bold'</span>,
          color: <span class="hljs-string">'#333'</span>
        }
      },

      xAxis: {
        type: <span class="hljs-string">'value'</span>,
        boundaryGap: [<span class="hljs-number">0</span>, <span class="hljs-number">0.01</span>],
        name: <span class="hljs-string">'äººå£ (ä¸‡)'</span>,
        nameLocation: <span class="hljs-string">'middle'</span>,
        nameGap: <span class="hljs-number">30</span>,
        axisLabel: {
          formatter: <span class="hljs-built_in">function</span>(value) {
            if (value &gt;= <span class="hljs-number">10000</span>) {
              return (value / <span class="hljs-number">10000</span>) + 'äº¿';
            }
            return value;
          }
        }
      },
      yAxis: {
        type: <span class="hljs-string">'category'</span>,
        data: [<span class="hljs-string">'å·´è¥¿'</span>,  <span class="hljs-string">'ä¸­å›½'</span>, <span class="hljs-string">'ä¸–ç•Œ'</span>],
        axisLabel: {
          <span class="hljs-attribute">color</span>: <span class="hljs-string">'#666'</span>,
          fontSize: <span class="hljs-number">14</span>
        }
      },
      series: [
        {
          name: <span class="hljs-string">'2011'</span>,
          type: <span class="hljs-string">'bar'</span>,
          data: [<span class="hljs-number">10</span>,<span class="hljs-number">20</span>],
          itemStyle: {
            borderRadius: [<span class="hljs-number">0</span>, <span class="hljs-number">4</span>, <span class="hljs-number">4</span>, <span class="hljs-number">0</span>],
            color: <span class="hljs-string">'#36A2EB'</span>
          },
          <span class="hljs-selector-tag">label</span>: {
            show: true,
            position: <span class="hljs-string">'right'</span>,
            formatter: <span class="hljs-built_in">function</span>(params) {
              return params<span class="hljs-selector-class">.value</span><span class="hljs-selector-class">.toLocaleString</span>();
            }
          },
          markPoint: {
             symbol: <span class="hljs-string">'rect'</span>,
             symbolSize: [<span class="hljs-number">4</span>, <span class="hljs-number">20</span>],
            data: [
              {
                // æ ‡è®°å·´è¥¿ (<span class="hljs-number">2011</span>)
                name: <span class="hljs-string">''</span>,
                coord: [<span class="hljs-number">10</span>, <span class="hljs-string">'å·´è¥¿'</span>],
                itemStyle: { <span class="hljs-attribute">color</span>: <span class="hljs-string">'#FF6384'</span> }
              },
              {
                // æ ‡è®°ä¸­å›½ (<span class="hljs-number">2011</span>)
                name: <span class="hljs-string">''</span>,
                coord: [<span class="hljs-number">20</span>, <span class="hljs-string">'ä¸­å›½'</span>],
                itemStyle: { <span class="hljs-attribute">color</span>: <span class="hljs-string">'#FF6384'</span> }
              }
            ]
          }
        }
      ]
    };


</code></pre>
<pre><code class="hljs">javascript

</code></pre>
<p>markPoint: {
symbol: 'rect',  // æ ‡è®°ç‚¹å½¢çŠ¶ä¸ºçŸ©å½¢
symbolSize: [4, 20],  // æ ‡è®°ç‚¹å¤§å°
data: [
{ name: '', coord: [2, 36], value: 36 }  // å…³é”®é…ç½®
]
}</p>
<pre><code class="hljs language-markdown" lang="markdown">
  


å‡è®¾è¿™æ˜¯ä¸€ä¸ª<span class="hljs-strong">**æŠ˜çº¿å›¾æˆ–æŸ±çŠ¶å›¾**</span>ï¼ˆç›´è§’åæ ‡ç³»ï¼‰ï¼š

  


<span class="hljs-bullet">-</span>   <span class="hljs-strong">**`coord: [2, 36]`**</span> Â çš„å«ä¹‰ï¼š

<span class="hljs-bullet">    -</span>   <span class="hljs-strong">**`2`**</span>ï¼šåœ¨ X è½´ä¸Šï¼Œå¯¹åº”<span class="hljs-strong">**ç¬¬ 3 ä¸ªç±»ç›®**</span>ï¼ˆç´¢å¼•ä» 0 å¼€å§‹ï¼Œä¾‹å¦‚Â <span class="hljs-code">`['ä¸€æœˆ', 'äºŒæœˆ', 'ä¸‰æœˆ', ...]`</span>Â ä¸­çš„Â <span class="hljs-code">`'ä¸‰æœˆ'`</span>ï¼‰ã€‚
<span class="hljs-bullet">    -</span>   <span class="hljs-strong">**`36`**</span>ï¼šåœ¨ Y è½´ä¸Šçš„æ•°å€¼ä½ç½®ï¼ˆä¾‹å¦‚ Y è½´èŒƒå›´æ˜¯ 0~100ï¼Œæ ‡è®°ç‚¹ä½äº Y=36 çš„é«˜åº¦ï¼‰ã€‚

<span class="hljs-bullet">-</span>   <span class="hljs-strong">**æ•ˆæœ**</span>ï¼šåœ¨ X è½´ç¬¬ 3 ä¸ªç±»ç›®ï¼ˆ<span class="hljs-code">`'ä¸‰æœˆ'`</span>ï¼‰ä¸ Y è½´æ•°å€¼ 36 çš„äº¤å‰ç‚¹å¤„ï¼Œç»˜åˆ¶ä¸€ä¸ª 4Ã—20 å¤§å°çš„çŸ©å½¢æ ‡è®°
</code></pre>
<h6 data-id="heading-10">æŸ±çŠ¶å›¾æ–‡å­—å¤ªå¤šä¸æ˜¾ç¤º</h6>
<p><strong>ä¼˜åŒ– X è½´æ ‡ç­¾æ˜¾ç¤º</strong></p>
<p>è‹¥æ ‡ç­¾æ–‡å­—è¿‡é•¿æˆ–è¿‡å¤šï¼Œå³ä½¿è°ƒæ•´æŸ±å­é—´è·ä»å¯èƒ½æ˜¾ç¤ºä¸å…¨ï¼Œéœ€è¿›ä¸€æ­¥é…ç½®Â <code>axisLabel</code>ã€‚</p>
<p><strong>1. å¼ºåˆ¶æ˜¾ç¤ºæ‰€æœ‰æ ‡ç­¾ï¼ˆé¿å…çœç•¥ï¼‰</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-attr">xAxis</span>: {
  <span class="hljs-attr">axisLabel</span>: {
    <span class="hljs-attr">interval</span>: <span class="hljs-number">0</span>, <span class="hljs-comment">// å¼ºåˆ¶æ˜¾ç¤ºæ‰€æœ‰æ ‡ç­¾ï¼ˆé»˜è®¤è‡ªåŠ¨éšè—éƒ¨åˆ†æ ‡ç­¾ï¼‰</span>
    <span class="hljs-comment">// æˆ–ä½¿ç”¨ formatter æ¢è¡Œï¼ˆé€‚ç”¨äºé•¿æ ‡ç­¾ï¼‰</span>
    <span class="hljs-attr">formatter</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">value</span>) {
      <span class="hljs-keyword">return</span> value.<span class="hljs-title function_">split</span>(<span class="hljs-string">''</span>).<span class="hljs-title function_">join</span>(<span class="hljs-string">'\n'</span>); <span class="hljs-comment">// æŒ‰å­—ç¬¦æ¢è¡Œï¼ˆç¤ºä¾‹ï¼‰</span>
      <span class="hljs-comment">// æˆ–æ ¹æ®å­—æ•°æ¢è¡Œï¼šreturn value.substr(0, 4) + '\n' + value.substr(4);</span>
    }
  }
}
</code></pre>
<p><strong>2. æ—‹è½¬æ ‡ç­¾æ–‡å­—</strong></p>
<p>é€šè¿‡Â <code>rotate</code>Â è°ƒæ•´æ–‡å­—è§’åº¦ï¼Œé¿å…é‡å ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">xAxis:</span> {
  <span class="hljs-attr">axisLabel:</span> {
    <span class="hljs-attr">rotate:</span> <span class="hljs-number">45</span>, <span class="hljs-string">//</span> <span class="hljs-string">æ—‹è½¬è§’åº¦ï¼ˆå»ºè®®</span> <span class="hljs-number">30</span><span class="hljs-string">Â°~60Â°ï¼Œé¿å…å‚ç›´æ˜¾ç¤ºï¼‰</span>
    <span class="hljs-attr">margin:</span> <span class="hljs-number">10</span> <span class="hljs-string">//</span> <span class="hljs-string">æ ‡ç­¾ä¸è½´çš„é—´è·ï¼Œé˜²æ­¢è¢«æŸ±å­é®æŒ¡</span>
  }
}
</code></pre>
<p><strong>3. è‡ªé€‚åº”éšè—éƒ¨åˆ†æ ‡ç­¾</strong></p>
<p>è‹¥å¿…é¡»æ˜¾ç¤ºéƒ¨åˆ†æ ‡ç­¾ï¼Œå¯é€šè¿‡Â <code>interval</code>Â æ§åˆ¶æ˜¾ç¤ºé—´éš”ï¼ˆå¦‚æ¯éš” N ä¸ªæ˜¾ç¤º 1 ä¸ªï¼‰ï¼š</p>
<pre><code class="hljs language-css" lang="css">xAxis: {
  axisLabel: {
    interval: <span class="hljs-number">1</span> // <span class="hljs-number">0</span>=å…¨éƒ¨æ˜¾ç¤ºï¼Œ<span class="hljs-number">1</span>=éš” <span class="hljs-number">1</span> ä¸ªæ˜¾ç¤º <span class="hljs-number">1</span> ä¸ªï¼Œ<span class="hljs-number">2</span>=éš” <span class="hljs-number">2</span> ä¸ªæ˜¾ç¤º <span class="hljs-number">1</span> ä¸ªï¼Œä¾æ­¤ç±»æ¨
  }
}
</code></pre>
<h5 data-id="heading-11">å–æ¶ˆYè½´åˆ†å‰²çº¿</h5>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">yAxis:</span> {
          <span class="hljs-attr">type:</span> <span class="hljs-string">'value'</span>,
          <span class="hljs-attr">splitLine:</span> {
            <span class="hljs-attr">show:</span> <span class="hljs-literal">false</span>
          }
        }<span class="hljs-string">,</span>
</code></pre>
<h5 data-id="heading-12">yè½´ä¸Šæ–¹æ ‡é¢˜</h5>
<pre><code class="hljs language-less" lang="less"><span class="hljs-selector-tag">option</span> = {
  yAxis: {
    name: 'æ•°é‡\nï¼ˆä¸ªï¼‰',  // åç§°å’Œå•ä½åˆ†è¡Œ
    nameLocation: 'end',
    nameGap: 5,
    nameTextStyle: {
      <span class="hljs-attribute">color</span>: <span class="hljs-string">'#333'</span>,       <span class="hljs-comment">// æ·±è‰²æ–‡æœ¬</span>
      <span class="hljs-attribute">align</span>: <span class="hljs-string">'left'</span>,       <span class="hljs-comment">// å·¦å¯¹é½</span>
      <span class="hljs-attribute">lineHeight</span>: <span class="hljs-number">16</span>,      <span class="hljs-comment">// è¡Œé«˜æ§åˆ¶é—´è·</span>
      <span class="hljs-attribute">padding</span>: [<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, -<span class="hljs-number">8</span>]  <span class="hljs-comment">// å¾€å·¦åç§»æ›´å¤š</span>
    },
    <span class="hljs-comment">// å…¶ä»–é…ç½®...</span>
  },
  <span class="hljs-comment">// å…¶ä»–é…ç½®...</span>
};
</code></pre>
<h6 data-id="heading-13">è®¾ç½®æŸ±çŠ¶å›¾é—´éš”ï¼ˆè±¡å½¢å›¾ï¼‰</h6>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/617161a40383446da0142929ae8e7fea~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP55m9eA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767410707&amp;x-signature=m%2BSDa0l8D9IZe4JftmIfX4zEvuw%3D" alt="image.png" loading="lazy"/></p>
<h5 data-id="heading-14">echartåˆ†ç»„æŸ±çŠ¶å›¾æ²¡æ•°ç»„ä¸å±•ç¤º</h5>
<pre><code class="hljs language-ini" lang="ini">  // åŸå§‹æ•°æ®æºï¼ˆæ¨¡æ‹Ÿæœ‰ç¼ºå¤±æ•°æ®çš„åœºæ™¯ï¼‰
      let <span class="hljs-attr">tufang</span> = [<span class="hljs-number">100</span>, <span class="hljs-number">200</span>, <span class="hljs-number">150</span>, <span class="hljs-number">80</span>, <span class="hljs-number">70</span>, <span class="hljs-number">110</span>, <span class="hljs-number">10</span>]<span class="hljs-comment">;</span>
      let <span class="hljs-attr">qiaoliang</span> = [<span class="hljs-number">100</span>, <span class="hljs-number">80</span>, <span class="hljs-number">90</span>, <span class="hljs-number">0</span>, <span class="hljs-number">60</span>, <span class="hljs-number">0</span>, <span class="hljs-number">150</span>]<span class="hljs-comment">;</span>
      let <span class="hljs-attr">suidao</span> = [<span class="hljs-number">0</span>, <span class="hljs-number">90</span>, <span class="hljs-number">150</span>, <span class="hljs-number">80</span>, <span class="hljs-number">70</span>, <span class="hljs-number">0</span>, <span class="hljs-number">10</span>]<span class="hljs-comment">;</span>
      let <span class="hljs-attr">lumian</span> = [<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">10</span>, <span class="hljs-number">80</span>, <span class="hljs-number">70</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>]<span class="hljs-comment">;</span>
      let <span class="hljs-attr">jidian</span> = [<span class="hljs-number">90</span>, <span class="hljs-number">190</span>, <span class="hljs-number">150</span>, <span class="hljs-number">0</span>, <span class="hljs-number">70</span>, <span class="hljs-number">0</span>, <span class="hljs-number">10</span>]<span class="hljs-comment">;</span>
      const <span class="hljs-attr">option</span> = {
        tooltip: {},
        title: {
          show: true,
          text: 'ä¸ç¬¦åˆå¸¸ç†çš„æŸ±çŠ¶å›¾è¡¨å®ç°',
          textStyle: {
            fontSize: 14,
            lineHeight: 18,
            width: 10
          }
        },
        xAxis: <span class="hljs-section">[
          {
            type: 'category',
            axisLabel: {
              align: 'center',
              hideOverlap: true
            },
            data: this.specificKeys
          }
        ]</span>,
        yAxis: <span class="hljs-section">[
          {
            type: 'value'
          }
        ]</span>,
        series: <span class="hljs-section">[
          {
            type: 'custom',
            renderItem: function (params, api) {
              return getRect(params, api);
            },
            data: tufang
          },
          {
            type: 'custom',
            renderItem: function (params, api) {
              return getRect(params, api);
            },
            data: qiaoliang
          },
          {
            type: 'custom',
            renderItem: function (params, api) {
              return getRect(params, api);
            },
            data: suidao
          },
          {
            type: 'custom',
            renderItem: function (params, api) {
              return getRect(params, api);
            },
            data: lumian
          },
          {
            type: 'custom',
            renderItem: function (params, api) {
              return getRect(params, api);
            },
            data: jidian
          }
        ]</span>
      }

      function getRect (params, api) {
        let <span class="hljs-attr">dataSeries</span> = [
          tufang,
          qiaoliang,
          suidao,
          lumian,
          jidian
        ]<span class="hljs-comment">; // ç¡®ä¿è¿™é‡Œæœ‰5ä¸ªæ•°æ®ç³»åˆ—</span>
        const { seriesIndex } = params<span class="hljs-comment">;</span>
        let <span class="hljs-attr">categoryIndex</span> = api.value(<span class="hljs-number">0</span>)<span class="hljs-comment">; // xè½´åºåˆ—</span>
        let <span class="hljs-attr">vald</span> = api.value(<span class="hljs-number">1</span>)<span class="hljs-comment">; // æ•°æ®å€¼</span>
        // å¦‚æœæ•°æ®ä¸º0ï¼Œåˆ™ä¸æ¸²æŸ“æŸ±å­
        if (<span class="hljs-attr">vald</span> === <span class="hljs-number">0</span>) {
          return<span class="hljs-comment">;</span>
        }
        let <span class="hljs-attr">start</span> = api.coord([categoryIndex, vald])<span class="hljs-comment">;</span>
        let <span class="hljs-attr">height</span> = api.size([<span class="hljs-number">0</span>, vald])<span class="hljs-comment">;</span>
        // æŸ±å­å®½åº¦å’Œé—´è·
        let <span class="hljs-attr">barWidth</span> = <span class="hljs-number">30</span><span class="hljs-comment">; // å•ä¸ªæŸ±å­çš„å›ºå®šå®½åº¦</span>
        let <span class="hljs-attr">barGap</span> = <span class="hljs-number">3</span><span class="hljs-comment">; // æŸ±å­ä¹‹é—´çš„é—´è·</span>
        // è®¡ç®—å½“å‰ç³»åˆ—çš„åç§»é‡
        let <span class="hljs-attr">xOffset</span> = dataSeries.slice(<span class="hljs-number">0</span>, seriesIndex).reduce((sum, currentSeries, index) =&gt; {
          return sum + (currentSeries<span class="hljs-section">[categoryIndex]</span> !== undefined &amp;&amp; currentSeries<span class="hljs-section">[categoryIndex]</span> !== 0 ? barWidth + barGap : 0)<span class="hljs-comment">;</span>
        }, 0)<span class="hljs-comment">;</span>
        // è®¡ç®—å½“å‰ç³»åˆ—çš„xä½ç½®
        let <span class="hljs-attr">x</span> = start[<span class="hljs-number">0</span>] - barWidth / <span class="hljs-number">2</span> + x<span class="hljs-literal">Off</span>set - <span class="hljs-number">10</span><span class="hljs-comment">; // æŸ±å­çš„ä¸­å¿ƒä½ç½® å†å‡20æ˜¯å› ä¸ºè®©å…¶èµ·ç‚¹é ä¸­é—´å·¦è¾¹ç‚¹</span>
        return {
          type: 'rect',
          shape: {
            x: x, // å½“å‰æŸ±å­çš„xä½ç½®
            y: start<span class="hljs-section">[1]</span>,
            width: barWidth,
            height: height<span class="hljs-section">[1]</span>
          },
          style: api.style()
        }<span class="hljs-comment">;</span>
      }
      option &amp;&amp; this<span class="hljs-section">[myChart]</span>.setOption(option, true)
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[csså’Œå›¾ç‰‡ä¸»é¢˜è‰²â€œæå–â€]]></title>    <link>https://juejin.cn/post/7588067055481176073</link>    <guid>https://juejin.cn/post/7588067055481176073</guid>    <pubDate>2025-12-27T03:33:01.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588067055481176073" data-draft-id="7584297353419554816" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="csså’Œå›¾ç‰‡ä¸»é¢˜è‰²â€œæå–â€"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-27T03:33:01.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="hello_Code"/> <meta itemprop="url" content="https://juejin.cn/user/3423198551742986"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            csså’Œå›¾ç‰‡ä¸»é¢˜è‰²â€œæå–â€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3423198551742986/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    hello_Code
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-27T03:33:01.000Z" title="Sat Dec 27 2025 03:33:01 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>è¿™ä¸ªæƒ³æ³•æ˜¯æ¥æºäºã€Œæ€§èƒ½ä¼˜åŒ–ã€ä¸­çš„éª¨æ¶å±ï¼š
åœ¨å›¾ç‰‡å±…å¤šçš„ç«™ç‚¹ä¸­ï¼Œè¿™å°†æ˜¯éå¸¸niceçš„ä½“éªŒ â€”â€” å›¾ç‰‡åŠ è½½é€šå¸¸æ˜¯æ¯”è¾ƒè®©äººéš¾å—çš„ï¼Œå¥½çš„éª¨æ¶ä¸­ä¸€èˆ¬å ä½å›¾å°±æ˜¯ä½åƒç´ çš„å›¾ç‰‡ï¼Œå³å¤§ä½“é…è‰²å’Œå˜åŒ–æ˜¯å’Œå®é™…å†…å®¹ä¸€è‡´çš„ã€‚
æœ‰æ—¶å€™æ¯”å¦‚å›¾ç‰‡ä¸å›ºå®šçš„ï¼Œé‚£å¯ä»¥ä½¿ç”¨ç®—æ³•è·å–å›¾ç‰‡çš„ä¸»ä½“é¢œè‰²ï¼ˆè‡³å°‘å¾—æ˜¯åŒè‰²ç³»çš„å§ï¼‰ï¼Œä½¿ç”¨çº¯è‰²å—å ä½ã€‚</p>
<p>å†è¿›ä¸€æ­¥æƒ³åˆ°ï¼Œåœ¨ä¸€äº›â€œè½»æ¾â€çš„åœºæ™¯ä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥è®©èƒŒæ™¯è‰²/é¡µé¢ä¸»é¢˜è‰²è·Ÿéšè½®æ’­å›¾æ”¹å˜ã€‚è‡³äºæ•ˆæœå˜›......ä½ ä»¬å¯ä»¥æƒ³ä¸€ä¸‹ç½‘æ˜“äº‘éŸ³ä¹æ»‘åŠ¨åˆ‡æ­Œæ—¶çš„èƒŒæ™¯æ•ˆæœã€‚</p>
<p>å› ä¸ºæ˜¯ä¸å›ºå®šå›¾ç‰‡ï¼Œæ‰€ä»¥æˆ‘æƒ³åˆ°äº†å››ç§æ–¹æ³•ï¼š</p>
<ul>
<li>tensorflow.js å›¾åƒè‰²å½©åˆ†æ</li>
<li>canvaså¯¹å›¾ç‰‡ä¸»åŸºè°ƒè¿›è¡Œåˆ†æï¼Œå–å¤§æ¦‚å€¼</li>
<li>cssé«˜æ–¯æ¨¡ç³Š</li>
<li>ä¸Šä¼ å›¾ç‰‡æ—¶åç«¯å¯¹å›¾ç‰‡åˆ†æå¤„ç†ï¼Œè¿”å›æ—¶ç›´æ¥è¿”å›ä¸€å¼ ä½åƒç´ å›¾ç‰‡</li>
</ul>
<p>ç¬¬ä¸€ç§æ–¹å¼ç›®å‰è¿˜åœ¨æˆ‘çš„å®è·µä¸­ï¼Œä»¥åä¼šå•ç‹¬å‡ºä¸€ç¯‡æ–‡ç« ï¼›æœ€åä¸€ç§æ–¹å¼ä¸ªäººä¸å¤ªå»ºè®®é¦–é€‰ï¼šé¦–å…ˆåç«¯å¤„ç†ä¹Ÿéœ€è¦æ—¶é—´ï¼Œå¦ä¸€æ–¹é¢æ¯•ç«Ÿä¹Ÿæ˜¯ä»¥å›¾ç‰‡è¿›è¡Œä¼ è¾“çš„...yee~ï¼ˆè€Œä¸”åç«¯å¯èƒ½ä¹Ÿä¸å¤ªå»ºè®®ä½ é¦–é€‰ğŸ¤£ï¼‰</p>
<blockquote>
<p>æƒ³çœ‹å®é™…æ•ˆæœçš„æ¨èè‡ªå·±åŠ¨æ‰‹è¯•ä¸‹ï¼Œå› ä¸ºæˆ‘å‘ç°æœ¬æ–‡ä¸­ç”¨QQæˆªå±æˆªå–çš„å›¾ç‰‡æ€ä¹ˆéƒ½è¿™ä¹ˆæš—å•Šï¼Œå®é™…å±•ç¤ºçš„è¿˜æ˜¯æŒºæ¼‚äº®çš„ã€‚</p>
</blockquote>
<p>ç¬¬ä¸‰ç§æ–¹å¼çœ‹èµ·æ¥æ˜¯çº¯csså®ç°çš„ï¼Œæ€ä¹ˆè·å–å‘¢ï¼Ÿè¿™å°±è¦è¯´åˆ°cssä¸­çš„<code>filter: blur();</code> ç®€å•æ¥è¯´ï¼Œåˆ©ç”¨æ¨¡ç³Šæ»¤é•œåŠè¿›ä¸€æ­¥æ‹‰ä¼¸ï¼Œå¯ä»¥è¿‘ä¼¼åœ°æ‹¿åˆ°ä¸€å¼ å›¾ç‰‡çš„ä¸»é¢˜è‰²ï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-tag">div</span> {
	<span class="hljs-attribute">background</span>: <span class="hljs-built_in">url</span>(<span class="hljs-string">å›¾ç‰‡åœ°å€</span>);
	<span class="hljs-attribute">background-size</span>: cover;
	<span class="hljs-attribute">filter</span>: <span class="hljs-built_in">blur</span>(<span class="hljs-number">50px</span>);
}
</code></pre>
<p>ä½ çœ‹ï¼Œé€šè¿‡æ¯”è¾ƒå¤§çš„ä¸€ä¸ªæ¨¡ç³Šæ»¤é•œï¼Œå°†å›¾ç‰‡é«˜æ–¯æ¨¡ç³Š<code>50px</code>ï¼Œæ¨¡ç³Šåçš„å›¾ç‰‡æ˜¯ä¸æ˜¯æœ‰ç‚¹å†…å‘³äº†ï¼Œ
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d4d41533314a4281a4e3be5d4a58a7ee~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgaGVsbG9fQ29kZQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767411181&amp;x-signature=9tcl0Xgq36va%2BEdBzcFbUrRvgmc%3D" alt="ruawaba" loading="lazy"/></p>
<p>ä¸è¿‡è¿˜ä¸è¡Œï¼Œå­˜åœ¨ä¸€äº›æ¨¡ç³Šè¾¹ç¼˜ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨<code>overflow</code>è¿›è¡Œå‰ªè£ã€‚</p>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬éœ€è¦å»æ‰æ¨¡ç³Šçš„è¾¹è§’ï¼Œä»¥åŠé€šè¿‡<code>transform: scale()</code>æ”¾å¤§æ•ˆæœï¼Œå°†é¢œè‰²è¿›ä¸€æ­¥èšç„¦ï¼š
è¿™é‡Œå°±å¾ˆæ¨èä½¿ç”¨ä¼ªå…ƒç´ è¿›è¡Œæ“ä½œäº†</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-tag">div</span> {
	<span class="hljs-attribute">position</span>: relative;
	<span class="hljs-attribute">width</span>: xx;
	<span class="hljs-attribute">height</span>: xx;
	<span class="hljs-attribute">overflow</span>: hidden;
}
<span class="hljs-selector-tag">div</span><span class="hljs-selector-pseudo">::before</span> {
	<span class="hljs-attribute">content</span>: <span class="hljs-string">""</span>;
	<span class="hljs-attribute">position</span>: absolute;
	<span class="hljs-attribute">top</span>: <span class="hljs-number">0</span>;
	<span class="hljs-attribute">left</span>: <span class="hljs-number">0</span>;
	<span class="hljs-attribute">right</span>: <span class="hljs-number">0</span>;
	<span class="hljs-attribute">bottom</span>: <span class="hljs-number">0</span>;
	<span class="hljs-attribute">background</span>: <span class="hljs-built_in">url</span>(<span class="hljs-string">å›¾ç‰‡åœ°å€</span>);
	<span class="hljs-attribute">background-size</span>: cover;
	<span class="hljs-attribute">filter</span>: <span class="hljs-built_in">blur</span>(<span class="hljs-number">50px</span>);
	<span class="hljs-attribute">transform</span>: <span class="hljs-built_in">scale</span>(<span class="hljs-number">2</span>); //è‡ªè¡Œæ›´æ”¹
	<span class="hljs-attribute">transform-origin</span>: center center;
}
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e2b1a3bb0b154d1f8d76be8095417647~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgaGVsbG9fQ29kZQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767411181&amp;x-signature=vQDb5MIAosRrwntXQoe9hqyBr4E%3D" alt="ruawaba2" loading="lazy"/></p>
<p>è¿™æ ·å°±æ‹¿åˆ°å›¾ç‰‡çš„ä¸»è‰²è°ƒäº†ã€‚å½“ç„¶æ˜¯è¦è¿›è¡Œå…¶ä»–å¤„ç†çš„ã€‚</p>
<p>å†æ¥è¯´è¯´ç¬¬äºŒç§æ–¹æ³• â€”â€” canvasã€‚å…¶å®ä¹Ÿä¸å»ºè®®ï¼Œå› ä¸ºæœ¬èº«å°±æ˜¯JSæ“ä½œï¼Œè€Œåœ¨å›¾ç‰‡åˆä¸å›ºå®šåˆæœ‰äº›å¤šçš„æƒ…å†µä¸‹å•çº¿ç¨‹çš„jså¤„ç†è¿™ç§â€œä¸€çº§äº‹ä»¶â€é€ æˆçš„æ€§èƒ½å’Œä½“éªŒæ„Ÿçš„æŸå¤±æ˜¯ä¸å¯æƒ³è±¡çš„ã€‚ä½†æœ¬æ–‡ç¬”è€…è¿˜æ˜¯è¦åˆ†äº«ä¸€ä¸‹ï¼Œå› ä¸ºè¿™æ˜¯æˆ‘å½“åˆç ”ç©¶çš„ç¬¬ä¸€ä¸ªè¢«åº”ç”¨çš„æˆæœï¼ˆæœ‰æƒ…æ€€äº†å˜¿å˜¿ï¼‰</p>
<p>é¦–å…ˆï¼Œcanvasä¸­çš„<code>getImageData()</code>æ–¹æ³•å¯ä»¥è·å–å›¾ç‰‡çš„åƒç´ é›†åˆï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">getImagePixel</span>(<span class="hljs-params">canvas, img</span>) {
	<span class="hljs-keyword">const</span> context = canvas.<span class="hljs-title function_">getContext</span>(<span class="hljs-string">"2d"</span>);
	context.<span class="hljs-title function_">drawImage</span>(img, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>);
	<span class="hljs-keyword">return</span> context.<span class="hljs-title function_">getImageData</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, canvas.<span class="hljs-property">width</span>, canvas.<span class="hljs-property">height</span>).<span class="hljs-property">data</span>;
}
</code></pre>
<blockquote>
<p>è¿™é‡Œå¯¹ä½¿ç”¨canvasä¸ç†Ÿæ‚‰çš„åŒå­¦æä¸ªé†’ï¼šimgæ˜¯å¼‚æ­¥åŠ è½½çš„ï¼Œæ‰€æœ‰å¯¹å›¾ç‰‡çš„æ“ä½œéƒ½è¦æ”¾åœ¨ img çš„ onload ä¸­è¿›è¡Œ â€”â€” ä½ å¯ä»¥è€ƒè™‘ç”¨ promise åšè¿™ä»¶äº‹ã€‚</p>
</blockquote>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d3b83bad613a44c9a6aa81307ea969d6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgaGVsbG9fQ29kZQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767411181&amp;x-signature=gqzPlfJytUiHUYp2pgwktNU3OEA%3D" alt="rgba" loading="lazy"/></p>
<p>è°ƒç”¨è¿™ä¸ªå‡½æ•°ä¼šæ‹¿åˆ°ä¸€ä¸ªæ•°ç»„ â€”â€” å®ƒæ˜¯rgbaå€¼ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¤„ç†æ—¶å››ä¸ªæ•°æ®ä¸ºâ€œä¸€ç»„â€ï¼Œæ›´é€šä¿—åœ°è¯´ï¼Œforå¾ªç¯ä¸­<code>i+=4</code>ï¼æ¥å¤„ç†ä¸€ä¸‹æ•°æ®ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">getCountArr</span>(<span class="hljs-params">pData</span>) {
	<span class="hljs-keyword">let</span> colorList = [], rgba = [], rgbaStr = <span class="hljs-string">''</span>;
	<span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> i=<span class="hljs-number">0</span>; i&lt;pData.<span class="hljs-property">length</span>; i+=<span class="hljs-number">4</span>) {
		rgba[<span class="hljs-number">0</span>] = pData[i];
		rgba[<span class="hljs-number">1</span>] = pData[i+<span class="hljs-number">1</span>];
		rgba[<span class="hljs-number">2</span>] = pData[i+<span class="hljs-number">2</span>];
		rgba[<span class="hljs-number">3</span>] = pData[i+<span class="hljs-number">3</span>];
		<span class="hljs-keyword">if</span>(rgba.<span class="hljs-title function_">indexOf</span>(<span class="hljs-literal">undefined</span>)!==-<span class="hljs-number">1</span> || pData[i+<span class="hljs-number">3</span>] === <span class="hljs-number">0</span>) {
			<span class="hljs-keyword">continue</span>;
		}
		rgbaStr = rgba.<span class="hljs-title function_">join</span>(<span class="hljs-string">','</span>);
		<span class="hljs-keyword">if</span>(rgbaStr <span class="hljs-keyword">in</span> colorList) {
			++colorList[rgbaStr];
		}<span class="hljs-keyword">else</span> {
			colorList[rgbaStr] = <span class="hljs-number">1</span>;
		}
	}
	<span class="hljs-keyword">return</span> colorList;
}
</code></pre>
<p>è¿™ä¸ªæ—¶å€™ï¼Œå¾—åˆ°çš„å°±æ˜¯æ¯ç»„æ•°æ®ï¼ˆè‰²å€¼ï¼‰å‡ºç°çš„æ¬¡æ•°äº†ã€‚
ç„¶åæ”¹å†™åˆšåˆšçš„getImagePixelå‡½æ•°ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">return</span> <span class="hljs-title function_">getCountArr</span>(pixelData);
</code></pre>
<p>è‡³æ­¤ï¼Œæˆ‘ä»¬å°†å…¶æ’åºå¹¶å–å‡ºç¬¬ä¸€ä¸ªå€¼/æˆ–è€…å–å‡ºæŸäº›æ ‡å¿—é¡¹çš„å¹³å‡å€¼ï¼ŒåŸºæœ¬ä¸Šå°±å¯ä»¥å°†å…¶ä½œä¸º background å€¼äº†ï¼</p>
<hr/>
<p>å³°å›è·¯è½¬!</p>
<p>ä½ éš¾é“çœŸè§‰å¾—canvasçš„è¿™ç§æ–¹æ³•åªæ˜¯é¸¡è‚‹ï¼Ÿé‚£è¯•æƒ³è¿™æ ·ä¸€ç§åœºæ™¯ï¼šåœ¨å¼±ç½‘æƒ…å†µä¸‹ï¼Œå›¾ç‰‡å¿…å®šè´¼æ…¢æ‰èƒ½åŠ è½½å‡ºæ¥ã€‚è¿™æ—¶å€™æˆ‘ä»¬é€šè¿‡jsæ‹¿åˆ°å›¾ç‰‡çš„ä¸»è‰²è°ƒå¹¶å¡«å……åˆ°å›¾ç‰‡çš„ä½ç½®ä¸­ã€‚è¿™æ˜¯ä¸æ˜¯ä¸€ä¸ªâ€œæ¨¡ç³Šæ¸å˜åŠ è½½â€çš„ç»ä½³åœºæ™¯ï¼
è€Œä¸”ï¼Œç¬”è€…æ›¾ç»é‡åˆ°è¿™æ ·ä¸€ä¸ªåœºæ™¯ï¼šå¾€å›¾ç‰‡ä¸Šæ·»åŠ æ–‡å­—ã€‚è¿™æ—¶å€™ä½ å°±éœ€è¦æ³¨æ„ä¸€ä¸ªé—®é¢˜ï¼Œå›¾ç‰‡ä¸»è‰²è°ƒã€‚ç”¨canvasåˆ†æå›¾ç‰‡çš„ä¸»è¦é¢œè‰²æˆ–å¹³å‡è‰²å¯ä»¥åœ¨æ·±è‰²è°ƒæ—¶æ·»åŠ ç™½è‰²æ–‡å­—åœ¨æµ…è‰²è°ƒæ—¶æ·»åŠ é»‘è‰²æ–‡å­—ï¼</p>
<blockquote>
<p>ç¬”è€…å‰æ®µæ—¶é—´å¼„äº†ä¸€ä¸ªå¾®ä¿¡å…¬ä¼—å·ï¼šå‰ç«¯Codeæ–°è°ˆã€‚é‡Œé¢æš‚æ—¶æœ‰webrtcã€å‰ç«¯é¢è¯•å’Œç”¨æˆ·ä½“éªŒç³»åˆ—æ–‡ç« ï¼Œæ¬¢è¿å…³æ³¨ï¼å¸Œæœ›èƒ½å¤Ÿå¸®åˆ°å¤§å®¶ï¼Œä¹Ÿå¸Œæœ›èƒ½äº’ç›¸äº¤æµï¼å…±åŒè¿›æ­¥</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Vue3ä¸iframeé€šä¿¡æ–¹æ¡ˆè¯¦è§£ï¼šæœ¬åœ°ä¸è·¨åŸŸåœºæ™¯]]></title>    <link>https://juejin.cn/post/7588031908171579401</link>    <guid>https://juejin.cn/post/7588031908171579401</guid>    <pubDate>2025-12-27T03:42:55.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588031908171579401" data-draft-id="7587779957674557491" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Vue3ä¸iframeé€šä¿¡æ–¹æ¡ˆè¯¦è§£ï¼šæœ¬åœ°ä¸è·¨åŸŸåœºæ™¯"/> <meta itemprop="keywords" content="å‰ç«¯,Vue.js"/> <meta itemprop="datePublished" content="2025-12-27T03:42:55.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å°æ¨æ¢…å›"/> <meta itemprop="url" content="https://juejin.cn/user/1086792572082391"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Vue3ä¸iframeé€šä¿¡æ–¹æ¡ˆè¯¦è§£ï¼šæœ¬åœ°ä¸è·¨åŸŸåœºæ™¯
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1086792572082391/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å°æ¨æ¢…å›
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-27T03:42:55.000Z" title="Sat Dec 27 2025 03:42:55 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><code>ps:æœ¬é¡¹ç›®ä½¿ç”¨çš„vue3æŠ€æœ¯æ ˆ</code></p>
<h2 data-id="heading-0">Vue3ä¸iframeé€šä¿¡æ–¹æ¡ˆè¯¦è§£ï¼šæœ¬åœ°ä¸è·¨åŸŸåœºæ™¯</h2>
<p>æœ¬æ–‡è¯¦ç»†ä»‹ç»äº†åœ¨Vue3é¡¹ç›®ä¸­ï¼Œä¸å†…åµŒiframeï¼ˆåŒ…æ‹¬æœ¬åœ°HTMLæ–‡ä»¶å’ŒæœåŠ¡ç«¯è·¨åŸŸHTMLï¼‰è¿›è¡ŒåŒå‘é€šä¿¡çš„å®Œæ•´è§£å†³æ–¹æ¡ˆã€‚æ ¸å¿ƒé€šä¿¡æ–¹å¼ä¸º<code>postMessage</code> APIï¼Œå¹¶é’ˆå¯¹ä¸åŒåœºæ™¯æä¾›äº†å®‰å…¨å¯é çš„ä»£ç ç¤ºä¾‹ã€‚</p>
<h3 data-id="heading-1">1. iframeåŠ è½½æœ¬åœ°HTMLæ–‡ä»¶</h3>
<h4 data-id="heading-2">1.1 Vueç«¯é€šä¿¡ä»£ç </h4>
<pre><code class="hljs language-js" lang="js">&lt;template&gt;
...
    &lt;iframe
        ref=<span class="hljs-string">"iframe"</span>
        name=<span class="hljs-string">"iframe-html"</span>
        src=<span class="hljs-string">"./index.html"</span>
        width=<span class="hljs-string">"100%"</span>
        height=<span class="hljs-string">"100%"</span>
        frameborder=<span class="hljs-string">"0"</span>
    &gt;&lt;/iframe&gt;
...
&lt;/template
</code></pre>
<p>å¦‚ä½•åœ¨vueç«¯è·Ÿiframeç«¯åŠ è½½çš„.htmlæ–‡ä»¶è¿›è¡Œé€šè®¯å‘¢,çœ‹ä¸‹é¢çš„ä»£ç </p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// vueç«¯</span>
...
<span class="hljs-keyword">const</span> <span class="hljs-title function_">sendMsg2iframe</span> = (<span class="hljs-params">msg</span>) =&gt; {
    <span class="hljs-variable language_">window</span>[<span class="hljs-string">"iframe-html"</span>].<span class="hljs-title function_">sendMsg2iframe</span>(msg);
}
...
<span class="hljs-comment">// index.html</span>
...
<span class="hljs-variable language_">window</span>.<span class="hljs-property">sendMsg2iframe</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">msg</span>) {
    <span class="hljs-comment">// æ¥æ”¶åˆ°vueç«¯å‘æ¥çš„æ¶ˆæ¯</span>
}
...
</code></pre>
<h4 data-id="heading-3">1.2 iframeç«¯ï¼ˆindex.htmlï¼‰é€šä¿¡ä»£ç </h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// index.html</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">sendMessageToVue</span>(<span class="hljs-params">messageData</span>) {
    <span class="hljs-comment">// å‘é€æ¶ˆæ¯åˆ°çˆ¶çª—å£</span>
    <span class="hljs-variable language_">window</span>.<span class="hljs-property">parent</span>.<span class="hljs-title function_">postMessage</span>(messageData, <span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span>.<span class="hljs-property">origin</span>);
}

<span class="hljs-comment">// vueç«¯</span>
<span class="hljs-comment">// ç»„ä»¶æŒ‚è½½æ—¶å¼€å§‹ç›‘å¬æ¶ˆæ¯</span>
<span class="hljs-title function_">onMounted</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'message'</span>, handleReceiveMessage);
});

<span class="hljs-comment">// ç»„ä»¶å¸è½½æ—¶ç§»é™¤ç›‘å¬ï¼Œé˜²æ­¢å†…å­˜æ³„æ¼</span>
<span class="hljs-title function_">onUnmounted</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">'message'</span>, handleReceiveMessage);
});

<span class="hljs-comment">// æ¥æ”¶æ¥è‡ªiframeæ¶ˆæ¯çš„å¤„ç†å‡½æ•°</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">handleReceiveMessage</span> = (<span class="hljs-params">event</span>) =&gt; {
  <span class="hljs-comment">// é‡è¦ï¼šåœ¨å®é™…åº”ç”¨ä¸­ï¼Œåº”éªŒè¯event.originä»¥ç¡®ä¿å®‰å…¨</span>
  <span class="hljs-comment">// if (event.origin !== 'æœŸæœ›çš„æº') return;</span>
  
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Vueç»„ä»¶æ”¶åˆ°æ¥è‡ªiframeçš„æ¶ˆæ¯:'</span>, event.<span class="hljs-property">data</span>);
  <span class="hljs-comment">// åœ¨è¿™é‡Œå¤„ç†æ¥æ”¶åˆ°çš„æ•°æ®</span>
};
</code></pre>
<h3 data-id="heading-4">2. iframeåŠ è½½æœåŠ¡å™¨HTMLï¼ˆè·¨åŸŸåœºæ™¯ï¼‰</h3>
<p>å…¶å®è¿˜æ˜¯é€šè¿‡windowçš„postMessageè¿›è¡Œé€šè®¯,åªä¸è¿‡æ˜¯æ¶‰åŠåˆ°äº†è·¨åŸŸé—®é¢˜,ä¸‹é¢æ˜¯å…·ä½“çš„ä»£ç ,å…³é”®åœ¨äºpostMessageçš„ç¬¬äºŒä¸ªå‚æ•°ä¸Š</p>
<h4 data-id="heading-5">2.1 htmlç«¯é€šä¿¡ä»£ç </h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// .html</span>
...
<span class="hljs-comment">// è·å–urlå¹¶è§£æå‡ºçˆ¶çª—å£çš„origin</span>
<span class="hljs-keyword">const</span> urlParams = <span class="hljs-keyword">new</span> <span class="hljs-title class_">URLSearchParams</span>(<span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span>.<span class="hljs-property">search</span>);
<span class="hljs-keyword">const</span> parentOrigin = urlParams.<span class="hljs-title function_">get</span>(<span class="hljs-string">'parentOrigin'</span>) || <span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span>.<span class="hljs-property">origin</span>;
<span class="hljs-comment">// ç›‘å¬æ¥è‡ªçˆ¶çª—å£çš„æ¶ˆæ¯</span>
<span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'message'</span>, <span class="hljs-keyword">function</span> (<span class="hljs-params">event</span>) {
    <span class="hljs-keyword">if</span> (event.<span class="hljs-property">origin</span> === parentOrigin) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ”¶åˆ°æ¥è‡ªçˆ¶çª—å£çš„æ¶ˆæ¯:'</span>, event.<span class="hljs-property">data</span>);
        <span class="hljs-keyword">if</span>(event.<span class="hljs-property">data</span>.<span class="hljs-property">type</span> === <span class="hljs-string">'sendJSON2Unity'</span>){
            <span class="hljs-variable language_">window</span>.<span class="hljs-title class_">SendJSON2Unity</span>(event.<span class="hljs-property">data</span>.<span class="hljs-property">data</span>);
        }
    }
});
<span class="hljs-keyword">function</span> <span class="hljs-title function_">sendMessageToVue</span>(<span class="hljs-params">messageData</span>) {
    <span class="hljs-comment">// å‘é€æ¶ˆæ¯åˆ°çˆ¶çª—å£</span>
    <span class="hljs-variable language_">window</span>.<span class="hljs-property">parent</span>.<span class="hljs-title function_">postMessage</span>(messageData, parentOrigin);
}
...
</code></pre>
<h4 data-id="heading-6">2.2 Vueç«¯é€šä¿¡ä»£ç </h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// .vue</span>
...
&lt;iframe
    ref=<span class="hljs-string">"iframeRef"</span>
    name=<span class="hljs-string">"unity-home"</span>
    :src=<span class="hljs-string">"violationDocumentURL"</span>
    width=<span class="hljs-string">"100%"</span>
    height=<span class="hljs-string">"100%"</span>
    frameborder=<span class="hljs-string">"0"</span>
    @load=<span class="hljs-string">"onIframeLoad"</span>&gt;
&lt;/iframe&gt;
...
<span class="hljs-comment">// è¿™é‡ŒæŠŠè‡ªå·±çš„originé€šè¿‡URLå‚æ•°ä¼ ç»™iframe</span>
<span class="hljs-keyword">const</span> violationDocumentURL = <span class="hljs-keyword">import</span>.<span class="hljs-property">meta</span>.<span class="hljs-property">env</span>.<span class="hljs-property">VITE_U3D_SERVICE</span> + <span class="hljs-string">"å…·ä½“è·¯å¾„"</span> + <span class="hljs-string">"?parentOrigin="</span> + <span class="hljs-built_in">encodeURIComponent</span>(<span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span>.<span class="hljs-property">origin</span>);

<span class="hljs-keyword">const</span> iframeRef = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">null</span>);
<span class="hljs-keyword">const</span> iframeOrigin = <span class="hljs-title function_">ref</span>(<span class="hljs-keyword">import</span>.<span class="hljs-property">meta</span>.<span class="hljs-property">env</span>.<span class="hljs-property">VITE_U3D_SERVICE</span>.<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/\/$/</span>, <span class="hljs-string">""</span>));  <span class="hljs-comment">// iframeåŠ è½½çš„èµ„æºçš„origin</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">sendToUnity</span> = (<span class="hljs-params">data</span>) =&gt; {
    iframeRef.<span class="hljs-property">value</span>.<span class="hljs-property">contentWindow</span>.<span class="hljs-title function_">postMessage</span>(
        data,
        iframeOrigin.<span class="hljs-property">value</span>
    );
};

<span class="hljs-comment">// ç»„ä»¶æŒ‚è½½æ—¶å¼€å§‹ç›‘å¬æ¶ˆæ¯</span>
<span class="hljs-title function_">onMounted</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'message'</span>, handleReceiveMessage);
});

<span class="hljs-comment">// ç»„ä»¶å¸è½½æ—¶ç§»é™¤ç›‘å¬ï¼Œé˜²æ­¢å†…å­˜æ³„æ¼</span>
<span class="hljs-title function_">onUnmounted</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">'message'</span>, handleReceiveMessage);
});
<span class="hljs-comment">// æ¥æ”¶æ¥è‡ªiframeçš„æ¶ˆæ¯</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">handleMessageFromIframe</span> = (<span class="hljs-params">event</span>) =&gt; {
    <span class="hljs-comment">// ç¡®ä¿æ¶ˆæ¯æ¥è‡ªå¯ä¿¡çš„æ¥æº</span>
    <span class="hljs-keyword">if</span> (event.<span class="hljs-property">origin</span> === iframeOrigin.<span class="hljs-property">value</span>) {
        <span class="hljs-keyword">if</span> (event.<span class="hljs-property">data</span>) {
            <span class="hljs-comment">// do something</span>
        }
    }
};
</code></pre>
<p>okåŸºæœ¬å°±æ˜¯è¿™æ ·çš„</p>
<h3 data-id="heading-7">3 æœåŠ¡å™¨HTMLç«¯ï¼ˆUnity WebGLç¤ºä¾‹ï¼‰</h3>
<p>å› ä¸ºæˆ‘ä»¬æ˜¯åŠ è½½çš„unityçš„webglåŒ…,æ‰€ä»¥æœ€åé™„èµ ä¸€ä¸‹æ‰“å‡ºçš„webglåŒ…çš„index.htmlçš„ä»£ç (ps:æ˜¯ä¸å‹ç¼©ç‰ˆçš„)</p>
<pre><code class="hljs language-js" lang="js">&lt;!<span class="hljs-variable constant_">DOCTYPE</span> html&gt;
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en-us"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"width: 100%; height: 100%"</span>&gt;</span>
	<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
		<span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"utf-8"</span> /&gt;</span>
		<span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">"Content-Type"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"text/html; charset=utf-8"</span> /&gt;</span>
		<span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Unity WebGL Player | NanDingGDS<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
	<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
	<span class="hljs-tag">&lt;<span class="hljs-name">body</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"unity3d-body"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"text-align: center; padding: 0; border: 0; margin: 0; width: 100%; height: 100%; overflow: hidden"</span>&gt;</span>
		<span class="hljs-tag">&lt;<span class="hljs-name">canvas</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"unity-canvas"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"background: #231f20"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">canvas</span>&gt;</span>
		<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
			<span class="hljs-comment">/** unityçš„webåŒ…åŠ è½½é€»è¾‘å¼€å§‹ */</span>
			<span class="hljs-keyword">const</span> canvas = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">"unity-canvas"</span>);
			<span class="hljs-keyword">const</span> body = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">"unity3d-body"</span>);
			<span class="hljs-keyword">const</span> { clientHeight, clientWidth } = body;

			<span class="hljs-keyword">if</span> (<span class="hljs-regexp">/iPhone|iPad|iPod|Android/i</span>.<span class="hljs-title function_">test</span>(navigator.<span class="hljs-property">userAgent</span>)) {
				<span class="hljs-keyword">var</span> meta = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">"meta"</span>);
				meta.<span class="hljs-property">name</span> = <span class="hljs-string">"viewport"</span>;
				meta.<span class="hljs-property">content</span> = <span class="hljs-string">"width=device-width, height=device-height, initial-scale=1.0, user-scalable=no, shrink-to-fit=yes"</span>;
				<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementsByTagName</span>(<span class="hljs-string">"head"</span>)[<span class="hljs-number">0</span>].<span class="hljs-title function_">appendChild</span>(meta);
				container.<span class="hljs-property">className</span> = <span class="hljs-string">"unity-mobile"</span>;
				canvas.<span class="hljs-property">className</span> = <span class="hljs-string">"unity-mobile"</span>;
			} <span class="hljs-keyword">else</span> {
				canvas.<span class="hljs-property">width</span> = clientWidth;
				canvas.<span class="hljs-property">height</span> = clientHeight;
			}

			<span class="hljs-keyword">const</span> baseUrl = <span class="hljs-string">"Build/webgl"</span>;
			<span class="hljs-keyword">var</span> loaderUrl = baseUrl + <span class="hljs-string">".loader.js"</span>;
			<span class="hljs-keyword">var</span> myGameInstance = <span class="hljs-literal">null</span>;
			<span class="hljs-keyword">var</span> script = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">"script"</span>);
			script.<span class="hljs-property">src</span> = loaderUrl;
			<span class="hljs-keyword">var</span> config = {
				<span class="hljs-attr">dataUrl</span>: baseUrl + <span class="hljs-string">".data"</span>,
				<span class="hljs-attr">frameworkUrl</span>: baseUrl + <span class="hljs-string">".framework.js"</span>,
				<span class="hljs-attr">codeUrl</span>: baseUrl + <span class="hljs-string">".wasm"</span>,
				<span class="hljs-attr">streamingAssetsUrl</span>: <span class="hljs-string">"StreamingAssets"</span>,
				<span class="hljs-attr">companyName</span>: <span class="hljs-string">"DefaultCompany"</span>,
				<span class="hljs-attr">productName</span>: <span class="hljs-string">"FanWeiZhang"</span>,
				<span class="hljs-attr">productVersion</span>: <span class="hljs-string">"0.1.0"</span>,
			};
			script.<span class="hljs-property">onload</span> = <span class="hljs-function">() =&gt;</span> {
				<span class="hljs-title function_">createUnityInstance</span>(canvas, config, <span class="hljs-function">(<span class="hljs-params">progress</span>) =&gt;</span> {}).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">unityInstance</span>) =&gt;</span> {
					myGameInstance = unityInstance;
					<span class="hljs-title function_">sendMessageToVue</span>({
						<span class="hljs-attr">type</span>: <span class="hljs-string">"unityLoaded"</span>,
						<span class="hljs-attr">message</span>: <span class="hljs-string">"Unity3DåŠ è½½å®Œæˆ"</span>,
					});
				});
			};
			<span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">appendChild</span>(script);
			<span class="hljs-comment">/** unityçš„webåŒ…åŠ è½½é€»è¾‘ç»“æŸ */</span>

			<span class="hljs-comment">// è·å–urlå¹¶è§£æå‡ºçˆ¶çª—å£çš„origin</span>
			<span class="hljs-keyword">const</span> urlParams = <span class="hljs-keyword">new</span> <span class="hljs-title class_">URLSearchParams</span>(<span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span>.<span class="hljs-property">search</span>);
			<span class="hljs-keyword">const</span> parentOrigin = urlParams.<span class="hljs-title function_">get</span>(<span class="hljs-string">"parentOrigin"</span>) || <span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span>.<span class="hljs-property">origin</span>;
			<span class="hljs-comment">// ç›‘å¬æ¥è‡ªçˆ¶çª—å£çš„æ¶ˆæ¯</span>
			<span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"message"</span>, <span class="hljs-keyword">function</span> (<span class="hljs-params">event</span>) {
				<span class="hljs-keyword">if</span> (event.<span class="hljs-property">origin</span> === parentOrigin) {
					<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"æ”¶åˆ°æ¥è‡ªçˆ¶çª—å£çš„æ¶ˆæ¯:"</span>, event.<span class="hljs-property">data</span>);
					<span class="hljs-keyword">if</span> (event.<span class="hljs-property">data</span>.<span class="hljs-property">type</span> === <span class="hljs-string">"sendJSON2Unity"</span>) {
						<span class="hljs-variable language_">window</span>.<span class="hljs-title class_">SendJSON2Unity</span>(event.<span class="hljs-property">data</span>.<span class="hljs-property">data</span>);
					}
				}
			});
			<span class="hljs-keyword">function</span> <span class="hljs-title function_">sendMessageToVue</span>(<span class="hljs-params">messageData</span>) {
				<span class="hljs-comment">// å‘é€æ¶ˆæ¯åˆ°çˆ¶çª—å£</span>
				<span class="hljs-variable language_">window</span>.<span class="hljs-property">parent</span>.<span class="hljs-title function_">postMessage</span>(messageData, parentOrigin);
			}

			<span class="hljs-variable language_">window</span>.<span class="hljs-property">SendJSON2Unity</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">str</span>) {
				<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"å‘é€åˆ°Unityçš„JSONå­—ç¬¦ä¸²:"</span>, str);
				myGameInstance.<span class="hljs-title class_">SendMessage</span>(<span class="hljs-string">"WebController"</span>, <span class="hljs-string">"receiveJSONByWeb"</span>, str);
			};

			<span class="hljs-variable language_">window</span>.<span class="hljs-property">QuiteUnity</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params"/>) {
				<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"é€€å‡ºUnity3D"</span>);
				<span class="hljs-title function_">sendMessageToVue</span>({
					<span class="hljs-attr">type</span>: <span class="hljs-string">"quitUnity"</span>,
					<span class="hljs-attr">message</span>: <span class="hljs-string">"é€€å‡ºUnity3D"</span>,
				});
			};
			<span class="hljs-comment">// window.js2Unity = function (str) {</span>
			<span class="hljs-comment">// 	// ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯unityä¸­ç‰©ä½“çš„åç§°,ç¬¬äºŒæ˜¯è¦è°ƒç”¨çš„æ–¹æ³•åç§°,ç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯unityä¸­æ¥æ”¶åˆ°çš„å‚æ•°</span>
			<span class="hljs-comment">// 	// myGameInstance.SendMessage('Main Camera', 'TestRotation', '')</span>
			<span class="hljs-comment">//     console.log(str);</span>
			<span class="hljs-comment">// }</span>
		</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
	<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></span>


</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[[ç®—æ³•]æ—¶é—´åºåˆ—(ä»‹ç»)]]></title>    <link>https://juejin.cn/post/7588007285547450374</link>    <guid>https://juejin.cn/post/7588007285547450374</guid>    <pubDate>2025-12-27T03:29:20.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588007285547450374" data-draft-id="7588069469516218409" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="[ç®—æ³•]æ—¶é—´åºåˆ—(ä»‹ç»)"/> <meta itemprop="keywords" content="ç®—æ³•"/> <meta itemprop="datePublished" content="2025-12-27T03:29:20.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="import_random"/> <meta itemprop="url" content="https://juejin.cn/user/2013961033882312"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            [ç®—æ³•]æ—¶é—´åºåˆ—(ä»‹ç»)
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2013961033882312/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    import_random
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-27T03:29:20.000Z" title="Sat Dec 27 2025 03:29:20 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    6
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">1/ä»€ä¹ˆæ˜¯æ—¶é—´åºåˆ—æ•°æ®ï¼Ÿ</h2>
<p><strong>æ—¶é—´åºåˆ—æ•°æ®</strong> æ˜¯æŒ‰ç…§<strong>å›ºå®šæ—¶é—´é—´éš”æˆ–è¿ç»­æ—¶é—´ç‚¹</strong>ï¼ŒæŒ‰æ—¶é—´é¡ºåºæ’åˆ—çš„ä¸€ç³»åˆ—<code>è§‚æµ‹å€¼</code>æˆ–<code>æ•°æ®ç‚¹</code>ã€‚å…¶æ ¸å¿ƒç‰¹å¾æ˜¯ <strong>â€œæ—¶é—´é¡ºåºâ€</strong> æœ¬èº«å°±æºå¸¦äº†è‡³å…³é‡è¦çš„ä¿¡æ¯ï¼Œæ•°æ®ç‚¹ä¹‹é—´ä¸æ˜¯ç‹¬ç«‹åŒåˆ†å¸ƒçš„ï¼Œè€Œæ˜¯å­˜åœ¨<strong>ç›¸å…³æ€§ã€è¶‹åŠ¿æ€§æˆ–å‘¨æœŸæ€§</strong>ã€‚</p>
<p>ç®€å•æ¥è¯´ï¼Œå¦‚æœä½ æ‰“ä¹±æ•°æ®ç‚¹çš„é¡ºåºï¼Œé‚£ä¹ˆ, å…¶æ„ä¹‰å°±ä¼šå®Œå…¨ä¸§å¤±æˆ–ä¸¥é‡å—æŸï¼Œé‚£ä¹ˆè¿™å¾ˆå¯èƒ½å°±æ˜¯æ—¶é—´åºåˆ—æ•°æ®ã€‚</p>
<h3 data-id="heading-1">æ ¸å¿ƒç‰¹å¾ï¼š</h3>
<ol>
<li><strong>æ—¶é—´ä¾èµ–æ€§ï¼ˆè‡ªç›¸å…³æ€§ï¼‰</strong>ï¼š<code>å½“å‰</code>çš„æ•°æ®ç‚¹ä¸<code>è¿‡å»</code>çš„æ•°æ®ç‚¹ç›¸å…³ï¼ˆä¾‹å¦‚ï¼Œä»Šå¤©çš„æ¸©åº¦ä¸æ˜¨å¤©ã€å‰å¤©çš„æ¸©åº¦æœ‰å…³ï¼‰ã€‚</li>
<li><strong>è¶‹åŠ¿</strong>ï¼šæ•°æ®åœ¨é•¿æ—¶é—´å†…å‘ˆç°çš„ä¸Šå‡æˆ–ä¸‹é™çš„æ–¹å‘ï¼ˆä¾‹å¦‚ï¼Œå…¬å¸é”€å”®é¢çš„é•¿æœŸå¢é•¿ï¼‰ã€‚</li>
<li><strong>å­£èŠ‚æ€§</strong>ï¼šæ•°æ®åœ¨å›ºå®šå‘¨æœŸå†…é‡å¤å‡ºç°çš„è§„å¾‹æ¨¡å¼ï¼ˆä¾‹å¦‚ï¼Œæ¯æ—¥çš„äº¤é€šé«˜å³°ã€æ¯å¹´çš„å†°æ·‡æ·‹é”€é‡é«˜å³°ï¼‰ã€‚</li>
<li><strong>ï¼ˆå¯èƒ½çš„ï¼‰å‘¨æœŸæ€§</strong>ï¼šéå›ºå®šé¢‘ç‡çš„æ³¢åŠ¨æ¨¡å¼ï¼ˆä¾‹å¦‚ï¼Œç”±ç»æµå‘¨æœŸå¼•èµ·çš„æ³¢åŠ¨ï¼‰ã€‚</li>
</ol>
<h2 data-id="heading-2">2/æ—¶é—´åºåˆ—æ•°æ®é•¿ä»€ä¹ˆæ ·ï¼Ÿ</h2>
<p>åœ¨æ•°æ®ç»“æ„ä¸Šï¼Œå®ƒé€šå¸¸è¡¨ç°ä¸ºä¸€ä¸ªå¸¦æœ‰<strong>æ—¶é—´æˆ³</strong>çš„äºŒç»´è¡¨æ ¼æˆ–ä¸€ä¸ªæœ‰åºçš„åˆ—è¡¨/æ•°ç»„ã€‚</p>
<h3 data-id="heading-3">å…¸å‹ç»“æ„ï¼š</h3>



































<table><thead><tr><th align="left">æ—¶é—´æˆ³</th><th align="left">è§‚æµ‹å€¼ 1</th><th align="left">è§‚æµ‹å€¼ 2</th><th align="left">...</th></tr></thead><tbody><tr><td align="left">tâ‚</td><td align="left">xâ‚</td><td align="left">yâ‚</td><td align="left">...</td></tr><tr><td align="left">tâ‚‚</td><td align="left">xâ‚‚</td><td align="left">yâ‚‚</td><td align="left">...</td></tr><tr><td align="left">tâ‚ƒ</td><td align="left">xâ‚ƒ</td><td align="left">yâ‚ƒ</td><td align="left">...</td></tr><tr><td align="left">...</td><td align="left">...</td><td align="left">...</td><td align="left">...</td></tr></tbody></table>
<ul>
<li><strong>æœ€å·¦è¾¹ä¸€åˆ—ï¼ˆæˆ–ç´¢å¼•ï¼‰</strong> æ˜¯<strong>æ—¶é—´ç´¢å¼•</strong>ï¼Œè¿™æ˜¯æ—¶é—´åºåˆ—æ•°æ®çš„â€œçµé­‚â€ã€‚å®ƒå¯ä»¥æ˜¯ï¼š
<ul>
<li>ç­‰é—´éš”çš„ï¼š<code>2024-01-01 00:00</code>, <code>2024-01-01 01:00</code>, <code>2024-01-01 02:00</code>...</li>
<li>ä¸ç­‰é—´éš”çš„ï¼šäº‹ä»¶å‘ç”Ÿçš„æ—¶é—´æˆ³ï¼Œå¦‚ç”¨æˆ·ç‚¹å‡»è®°å½•ã€‚</li>
</ul>
</li>
<li><strong>æ¯ä¸€è¡Œ</strong>ä»£è¡¨åœ¨æŸä¸ªç‰¹å®šæ—¶é—´ç‚¹çš„â€œå¿«ç…§â€ã€‚</li>
<li><strong>æ¯ä¸€åˆ—</strong>ä»£è¡¨ä¸€ä¸ªéšæ—¶é—´å˜åŒ–çš„<strong>ç‰¹å¾</strong>æˆ–<strong>å˜é‡</strong>ã€‚å¯ä»¥æ˜¯å•å˜é‡ï¼ˆåªæœ‰ä¸€åˆ—è§‚æµ‹å€¼ï¼‰ï¼Œä¹Ÿå¯ä»¥æ˜¯å¤šå˜é‡ï¼ˆæœ‰å¤šåˆ—è§‚æµ‹å€¼ï¼‰ã€‚</li>
</ul>
<h2 data-id="heading-4">3/å‡ ä¸ªå…·ä½“çš„ä¾‹å­</h2>
<h3 data-id="heading-5">1. ç»å…¸å•å˜é‡æ—¶é—´åºåˆ—ï¼šæŸåŸå¸‚æ¯æ—¥æ°”æ¸©</h3>
<ul>
<li><strong>ç›®æ ‡</strong>ï¼šé¢„æµ‹æœªæ¥æ°”æ¸©ã€‚</li>
<li><strong>æ•°æ®ç¤ºä¾‹</strong>ï¼š

































<table><thead><tr><th align="left">æ—¥æœŸ</th><th align="left">å¹³å‡æ¸©åº¦(Â°C)</th></tr></thead><tbody><tr><td align="left">2024-01-01</td><td align="left">5.2</td></tr><tr><td align="left">2024-01-02</td><td align="left">4.8</td></tr><tr><td align="left">2024-01-03</td><td align="left">6.1</td></tr><tr><td align="left">2024-01-04</td><td align="left">7.3</td></tr><tr><td align="left">...</td><td align="left">...</td></tr><tr><td align="left">2024-12-31</td><td align="left">3.5</td></tr></tbody></table>
</li>
<li><strong>ç‰¹ç‚¹</strong>ï¼šåªæœ‰ä¸€ä¸ªæ•°å­—åºåˆ—éšæ—¶é—´å˜åŒ–ï¼Œæœ‰æ˜æ˜¾çš„å­£èŠ‚æ€§å’Œè¶‹åŠ¿ã€‚</li>
</ul>
<h3 data-id="heading-6">2. é‡‘èå¤šå˜é‡æ—¶é—´åºåˆ—ï¼šè‚¡ç¥¨åˆ†é’Ÿçº§æ•°æ®</h3>
<ul>
<li><strong>ç›®æ ‡</strong>ï¼šé¢„æµ‹è‚¡ä»·èµ°åŠ¿æˆ–è¿›è¡Œäº¤æ˜“ç­–ç•¥åˆ†æã€‚</li>
<li><strong>æ•°æ®ç¤ºä¾‹</strong>ï¼š













































<table><thead><tr><th align="left">æ—¶é—´æˆ³</th><th align="left">å¼€ç›˜ä»·</th><th align="left">æœ€é«˜ä»·</th><th align="left">æœ€ä½ä»·</th><th align="left">æ”¶ç›˜ä»·</th><th align="left">æˆäº¤é‡</th></tr></thead><tbody><tr><td align="left">2024-05-10 09:30</td><td align="left">150.00</td><td align="left">150.50</td><td align="left">149.80</td><td align="left">150.20</td><td align="left">100000</td></tr><tr><td align="left">2024-05-10 09:31</td><td align="left">150.22</td><td align="left">150.40</td><td align="left">150.05</td><td align="left">150.35</td><td align="left">45000</td></tr><tr><td align="left">2024-05-10 09:32</td><td align="left">150.36</td><td align="left">150.60</td><td align="left">150.30</td><td align="left">150.50</td><td align="left">52000</td></tr><tr><td align="left">...</td><td align="left">...</td><td align="left">...</td><td align="left">...</td><td align="left">...</td><td align="left">...</td></tr></tbody></table>
</li>
<li><strong>ç‰¹ç‚¹</strong>ï¼šå¤šä¸ªç›¸å…³è”çš„ç‰¹å¾ï¼ˆä»·æ ¼ã€æˆäº¤é‡ï¼‰åŒæ—¶éšæ—¶é—´å˜åŒ–ï¼Œé«˜é¢‘ä¸”æ³¢åŠ¨å‰§çƒˆã€‚</li>
</ul>
<h3 data-id="heading-7">3. ç‰©è”ç½‘ä¼ æ„Ÿå™¨æ•°æ®ï¼šæ™ºèƒ½å·¥å‚è®¾å¤‡ç›‘æ§</h3>
<ul>
<li><strong>ç›®æ ‡</strong>ï¼šè®¾å¤‡æ•…éšœé¢„è­¦æˆ–é¢„æµ‹æ€§ç»´æŠ¤ã€‚</li>
<li><strong>æ•°æ®ç¤ºä¾‹</strong>ï¼š













































<table><thead><tr><th align="left">æ—¶é—´æˆ³</th><th align="left">è®¾å¤‡ID</th><th align="left">æŒ¯åŠ¨å¹…åº¦</th><th align="left">æ¸©åº¦(Â°C)</th><th align="left">ç”µæµ(A)</th><th align="left">å‹åŠ›(MPa)</th></tr></thead><tbody><tr><td align="left">2024-05-10 10:00:00</td><td align="left">Motor_A</td><td align="left">2.1</td><td align="left">65</td><td align="left">10.5</td><td align="left">0.85</td></tr><tr><td align="left">2024-05-10 10:00:01</td><td align="left">Motor_A</td><td align="left">2.2</td><td align="left">65.1</td><td align="left">10.6</td><td align="left">0.86</td></tr><tr><td align="left">2024-05-10 10:00:02</td><td align="left">Motor_A</td><td align="left">5.8</td><td align="left">70.3</td><td align="left">15.2</td><td align="left">0.92</td></tr><tr><td align="left">...</td><td align="left">...</td><td align="left">...</td><td align="left">...</td><td align="left">...</td><td align="left">...</td></tr></tbody></table>
</li>
<li><strong>ç‰¹ç‚¹</strong>ï¼šé€šå¸¸ç”±å¤šä¸ªä¼ æ„Ÿå™¨äº§ç”Ÿï¼Œé¢‘ç‡é«˜ï¼Œæ˜¯å¼‚å¸¸æ£€æµ‹å’Œæ¨¡å¼è¯†åˆ«çš„é‡è¦æ•°æ®æºã€‚</li>
</ul>
<h3 data-id="heading-8">4. ä¸šåŠ¡ä¸ç½‘ç»œæ•°æ®ï¼šç½‘ç«™æ¯å°æ—¶è®¿é—®é‡</h3>
<ul>
<li><strong>ç›®æ ‡</strong>ï¼šèµ„æºè§„åˆ’ã€å¹¿å‘ŠæŠ•æ”¾ã€‚</li>
<li><strong>æ•°æ®ç¤ºä¾‹</strong>ï¼š









































<table><thead><tr><th align="left">æ—¥æœŸ-å°æ—¶</th><th align="left">ç‹¬ç«‹è®¿å®¢æ•°</th><th align="left">é¡µé¢æµè§ˆé‡</th><th align="left">æœåŠ¡å™¨è´Ÿè½½</th></tr></thead><tbody><tr><td align="left">2024-05-09 20:00</td><td align="left">10432</td><td align="left">89210</td><td align="left">0.65</td></tr><tr><td align="left">2024-05-09 21:00</td><td align="left">12054</td><td align="left">100345</td><td align="left">0.72</td></tr><tr><td align="left">2024-05-09 22:00</td><td align="left">15321</td><td align="left">134567</td><td align="left">0.85</td></tr><tr><td align="left">2024-05-10 09:00</td><td align="left">8567</td><td align="left">65432</td><td align="left">0.45</td></tr><tr><td align="left">...</td><td align="left">...</td><td align="left">...</td><td align="left">...</td></tr></tbody></table>
</li>
<li><strong>ç‰¹ç‚¹</strong>ï¼šå…·æœ‰å¼ºçƒˆçš„å‘¨æœŸæ€§ï¼ˆæ—¥å‘¨æœŸï¼šç™½å¤©é«˜å¤œé—´ä½ï¼›å‘¨å‘¨æœŸï¼šå·¥ä½œæ—¥é«˜å‘¨æœ«ä½ï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-9">5. å…¶ä»–é¢†åŸŸçš„ä¾‹å­ï¼š</h3>
<ul>
<li><strong>éŸ³é¢‘ä¿¡å·</strong>ï¼šæŒ¯å¹…éšæ—¶é—´å˜åŒ–çš„åºåˆ—ï¼ˆæ—¶é—´é—´éš”éå¸¸çŸ­ä¸”å›ºå®šï¼‰ã€‚</li>
<li><strong>å¿ƒç”µå›¾ï¼ˆECGï¼‰</strong>ï¼šå¿ƒè„ç”µæ´»åŠ¨éšæ—¶é—´å˜åŒ–çš„è®°å½•ï¼Œç”¨äºæ£€æµ‹å¼‚å¸¸å¿ƒè·³ã€‚</li>
<li><strong>è¯­è¨€æ–‡æœ¬</strong>ï¼šå¯ä»¥å°†ä¸€ä¸ªå¥å­çœ‹ä½œå•è¯åœ¨â€œæ—¶é—´æ­¥â€ä¸Šçš„åºåˆ—ï¼ˆè¿™é‡Œçš„â€œæ—¶é—´â€æ˜¯é¡ºåºä½ç½®ï¼‰ã€‚</li>
</ul>
<h2 data-id="heading-10">5. åœ¨æœºå™¨å­¦ä¹ /æ·±åº¦å­¦ä¹ ä¸­çš„åº”ç”¨</h2>
<p>å¤„ç†æ—¶é—´åºåˆ—æ•°æ®çš„æ¨¡å‹éœ€è¦èƒ½å¤Ÿæ•æ‰å…¶<strong>æ—¶é—´ä¾èµ–æ€§</strong>ï¼š</p>
<ul>
<li><strong>ä¼ ç»Ÿæœºå™¨å­¦ä¹ æ–¹æ³•</strong>ï¼šéœ€è¦æ‰‹åŠ¨æ„é€ ç‰¹å¾ï¼Œå¦‚æ»åç‰¹å¾ï¼ˆå‰1å°æ—¶çš„å€¼ã€å‰1å¤©çš„å€¼ï¼‰ã€æ»‘åŠ¨çª—å£ç»Ÿè®¡é‡ï¼ˆè¿‡å»7å¤©çš„å‡å€¼ã€æ–¹å·®ï¼‰ã€å­£èŠ‚æŒ‡æ ‡ç­‰ï¼Œç„¶åä½¿ç”¨å›å½’ã€éšæœºæ£®æ—ç­‰æ¨¡å‹ã€‚</li>
<li><strong>æ·±åº¦å­¦ä¹ æ–¹æ³•</strong>ï¼šèƒ½è‡ªåŠ¨å­¦ä¹ æ—¶é—´æ¨¡å¼ï¼Œæ˜¯å½“å‰çš„ä¸»æµï¼š
<ul>
<li><strong>å¾ªç¯ç¥ç»ç½‘ç»œï¼ˆRNNï¼‰åŠå…¶å˜ä½“ï¼ˆLSTM, GRUï¼‰</strong>ï¼šä¸“ä¸ºåºåˆ—æ•°æ®è®¾è®¡ï¼Œå…·æœ‰â€œè®°å¿†â€åŠŸèƒ½ã€‚</li>
<li><strong>æ—¶é—´å·ç§¯ç½‘ç»œï¼ˆTCNï¼‰</strong>ï¼šä½¿ç”¨å› æœå·ç§¯æ¥æ•è·é•¿æœŸä¾èµ–ã€‚</li>
<li><strong>Transformeræ¨¡å‹</strong>ï¼šé€šè¿‡è‡ªæ³¨æ„åŠ›æœºåˆ¶ï¼Œèƒ½å¹¶è¡Œå¤„ç†å¹¶æ•è·é•¿è·ç¦»ä¾èµ–ï¼Œç°åœ¨ä¹Ÿè¢«å¹¿æ³›åº”ç”¨äºæ—¶é—´åºåˆ—é¢„æµ‹ï¼ˆå¦‚Informerã€Autoformerç­‰æ¨¡å‹ï¼‰ã€‚</li>
</ul>
</li>
</ul>
<h2 data-id="heading-11">6. æ€»ç»“</h2>
<p><strong>æ—¶é—´åºåˆ—æ•°æ®</strong>å°±æ˜¯<strong>å¸¦æœ‰æ—¶é—´æˆ³ã€ä¸”é¡ºåºè‡³å…³é‡è¦çš„æ•°æ®</strong>ã€‚å®ƒå¹¿æ³›å­˜åœ¨äºæˆ‘ä»¬ç”Ÿæ´»çš„æ–¹æ–¹é¢é¢ï¼Œä»ç»æµé‡‘èåˆ°å·¥ä¸šåˆ¶é€ ï¼Œä»æ—¥å¸¸å¤©æ°”åˆ°äººä½“å¥åº·ã€‚</p>
<p>è¯†åˆ«å’Œç†è§£ä½ çš„æ•°æ®æ˜¯å¦å…·æœ‰æ—¶é—´åºåˆ—ç‰¹æ€§ï¼Œæ˜¯é€‰æ‹©æ­£ç¡®åˆ†ææ–¹æ³•å’Œæœºå™¨å­¦ä¹ æ¨¡å‹çš„ç¬¬ä¸€æ­¥ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[From Nand to Tetris é‡Œçš„ Project 3]]></title>    <link>https://juejin.cn/post/7588034035286671375</link>    <guid>https://juejin.cn/post/7588034035286671375</guid>    <pubDate>2025-12-27T03:28:35.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588034035286671375" data-draft-id="7587997157237735476" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="From Nand to Tetris é‡Œçš„ Project 3"/> <meta itemprop="keywords" content="è®¾è®¡"/> <meta itemprop="datePublished" content="2025-12-27T03:28:35.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é‡‘éŠ€éŠ…éµ"/> <meta itemprop="url" content="https://juejin.cn/user/747323638159757"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            From Nand to Tetris é‡Œçš„ Project 3
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/747323638159757/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é‡‘éŠ€éŠ…éµ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-27T03:28:35.000Z" title="Sat Dec 27 2025 03:28:35 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body .octicon{display:inline-block;fill:currentColor;vertical-align:text-bottom}.markdown-body .anchor{float:left;line-height:1;margin-left:-20px;padding-right:4px}.markdown-body .anchor:focus{outline:none}.markdown-body h1 .octicon-link,.markdown-body h2 .octicon-link,.markdown-body h3 .octicon-link,.markdown-body h4 .octicon-link,.markdown-body h5 .octicon-link,.markdown-body h6 .octicon-link{color:#1b1f23;vertical-align:middle;visibility:hidden}.markdown-body h1:hover .anchor,.markdown-body h2:hover .anchor,.markdown-body h3:hover .anchor,.markdown-body h4:hover .anchor,.markdown-body h5:hover .anchor,.markdown-body h6:hover .anchor{text-decoration:none}.markdown-body h1:hover .anchor .octicon-link,.markdown-body h2:hover .anchor .octicon-link,.markdown-body h3:hover .anchor .octicon-link,.markdown-body h4:hover .anchor .octicon-link,.markdown-body h5:hover .anchor .octicon-link,.markdown-body h6:hover .anchor .octicon-link{visibility:visible}.markdown-body h1:hover .anchor .octicon-link:before,.markdown-body h2:hover .anchor .octicon-link:before,.markdown-body h3:hover .anchor .octicon-link:before,.markdown-body h4:hover .anchor .octicon-link:before,.markdown-body h5:hover .anchor .octicon-link:before,.markdown-body h6:hover .anchor .octicon-link:before{width:16px;height:16px;content:" ";display:inline-block;background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' aria-hidden='true'%3E%3Cpath fill-rule='evenodd' d='M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z'/%3E%3C/svg%3E")}.markdown-body{-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;color:#24292e;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji;font-size:16px;line-height:1.5;word-wrap:break-word}.markdown-body details{display:block}.markdown-body summary{display:list-item}.markdown-body a{background-color:initial}.markdown-body a:active,.markdown-body a:hover{outline-width:0}.markdown-body strong{font-weight:inherit;font-weight:bolder}.markdown-body h1{margin:.67em 0}.markdown-body img{border-style:none}.markdown-body code,.markdown-body kbd,.markdown-body pre{font-family:monospace,monospace;font-size:1em}.markdown-body hr{box-sizing:initial;overflow:visible}.markdown-body input{font:inherit;margin:0;overflow:visible}.markdown-body [type=checkbox]{box-sizing:border-box;padding:0}.markdown-body *{box-sizing:border-box}.markdown-body input{font-family:inherit;font-size:inherit;line-height:inherit}.markdown-body a{color:#0366d6;text-decoration:none}.markdown-body a:hover{text-decoration:underline}.markdown-body strong{font-weight:600}.markdown-body hr{height:0;margin:15px 0;overflow:hidden;background:transparent;border-bottom:1px solid #dfe2e5}.markdown-body hr:after,.markdown-body hr:before{display:table;content:""}.markdown-body hr:after{clear:both}.markdown-body table{border-spacing:0;border-collapse:collapse}.markdown-body td,.markdown-body th{padding:0}.markdown-body details summary{cursor:pointer}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin-top:0;margin-bottom:0}.markdown-body h1{font-size:32px}.markdown-body h1,.markdown-body h2{font-weight:600}.markdown-body h2{font-size:24px}.markdown-body h3{font-size:20px}.markdown-body h3,.markdown-body h4{font-weight:600}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:14px}.markdown-body h5,.markdown-body h6{font-weight:600}.markdown-body h6{font-size:12px}.markdown-body p{margin-top:0;margin-bottom:10px}.markdown-body blockquote{margin:0}.markdown-body ol,.markdown-body ul{padding-left:0;margin-top:0;margin-bottom:0}.markdown-body ol ol,.markdown-body ul ol{list-style-type:lower-roman}.markdown-body ol ol ol,.markdown-body ol ul ol,.markdown-body ul ol ol,.markdown-body ul ul ol{list-style-type:lower-alpha}.markdown-body dd{margin-left:0}.markdown-body code,.markdown-body pre{font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:12px}.markdown-body pre{margin-top:0;margin-bottom:0}.markdown-body input::-webkit-inner-spin-button,.markdown-body input::-webkit-outer-spin-button{margin:0;-webkit-appearance:none;appearance:none}.markdown-body :checked+.radio-label{position:relative;z-index:1;border-color:#0366d6}.markdown-body .border{border:1px solid #e1e4e8!important}.markdown-body .border-0{border:0!important}.markdown-body .border-bottom{border-bottom:1px solid #e1e4e8!important}.markdown-body .rounded-1{border-radius:3px!important}.markdown-body .bg-white{background-color:#fff!important}.markdown-body .bg-gray-light{background-color:#fafbfc!important}.markdown-body .text-gray-light{color:#6a737d!important}.markdown-body .pl-3,.markdown-body .px-3{padding-left:16px!important}.markdown-body .px-3{padding-right:16px!important}.markdown-body .f6{font-size:12px!important}.markdown-body .lh-condensed{line-height:1.25!important}.markdown-body .text-bold{font-weight:600!important}.markdown-body .pl-c{color:#6a737d}.markdown-body .pl-c1,.markdown-body .pl-s .pl-v{color:#005cc5}.markdown-body .pl-e,.markdown-body .pl-en{color:#6f42c1}.markdown-body .pl-s .pl-s1,.markdown-body .pl-smi{color:#24292e}.markdown-body .pl-ent{color:#22863a}.markdown-body .pl-k{color:#d73a49}.markdown-body .pl-pds,.markdown-body .pl-s,.markdown-body .pl-s .pl-pse .pl-s1,.markdown-body .pl-sr,.markdown-body .pl-sr .pl-cce,.markdown-body .pl-sr .pl-sra,.markdown-body .pl-sr .pl-sre{color:#032f62}.markdown-body .pl-smw,.markdown-body .pl-v{color:#e36209}.markdown-body .pl-bu{color:#b31d28}.markdown-body .pl-ii{color:#fafbfc;background-color:#b31d28}.markdown-body .pl-c2{color:#fafbfc;background-color:#d73a49}.markdown-body .pl-c2:before{content:"^M"}.markdown-body .pl-sr .pl-cce{font-weight:700;color:#22863a}.markdown-body .pl-ml{color:#735c0f}.markdown-body .pl-mh,.markdown-body .pl-mh .pl-en,.markdown-body .pl-ms{font-weight:700;color:#005cc5}.markdown-body .pl-mi{font-style:italic;color:#24292e}.markdown-body .pl-mb{font-weight:700;color:#24292e}.markdown-body .pl-md{color:#b31d28;background-color:#ffeef0}.markdown-body .pl-mi1{color:#22863a;background-color:#f0fff4}.markdown-body .pl-mc{color:#e36209;background-color:#ffebda}.markdown-body .pl-mi2{color:#f6f8fa;background-color:#005cc5}.markdown-body .pl-mdr{font-weight:700;color:#6f42c1}.markdown-body .pl-ba{color:#586069}.markdown-body .pl-sg{color:#959da5}.markdown-body .pl-corl{text-decoration:underline;color:#032f62}.markdown-body .mb-0{margin-bottom:0!important}.markdown-body .my-2{margin-bottom:8px!important;margin-top:8px!important}.markdown-body .pl-0{padding-left:0!important}.markdown-body .py-0{padding-top:0!important;padding-bottom:0!important}.markdown-body .pl-1{padding-left:4px!important}.markdown-body .pl-2{padding-left:8px!important}.markdown-body .py-2{padding-top:8px!important;padding-bottom:8px!important}.markdown-body .pl-3{padding-left:16px!important}.markdown-body .pl-4{padding-left:24px!important}.markdown-body .pl-5{padding-left:32px!important}.markdown-body .pl-6{padding-left:40px!important}.markdown-body .pl-7{padding-left:48px!important}.markdown-body .pl-8{padding-left:64px!important}.markdown-body .pl-9{padding-left:80px!important}.markdown-body .pl-10{padding-left:96px!important}.markdown-body .pl-11{padding-left:112px!important}.markdown-body .pl-12{padding-left:128px!important}.markdown-body hr{border-bottom-color:#eee}.markdown-body kbd{display:inline-block;padding:3px 5px;font:11px SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;line-height:10px;color:#444d56;vertical-align:middle;background-color:#fafbfc;border:1px solid #d1d5da;border-radius:3px;box-shadow:inset 0 -1px 0 #d1d5da}.markdown-body:after,.markdown-body:before{display:table;content:""}.markdown-body:after{clear:both}.markdown-body&gt;:first-child{margin-top:0!important}.markdown-body&gt;:last-child{margin-bottom:0!important}.markdown-body a:not([href]){color:inherit;text-decoration:none}.markdown-body blockquote,.markdown-body details,.markdown-body dl,.markdown-body ol,.markdown-body p,.markdown-body pre,.markdown-body table,.markdown-body ul{margin-top:0;margin-bottom:16px}.markdown-body hr{height:.25em;padding:0;margin:24px 0;background-color:#e1e4e8;border:0}.markdown-body blockquote{padding:0 1em;color:#6a737d;border-left:.25em solid #dfe2e5}.markdown-body blockquote&gt;:first-child{margin-top:0}.markdown-body blockquote&gt;:last-child{margin-bottom:0}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin-top:24px;margin-bottom:16px;font-weight:600;line-height:1.25}.markdown-body h1{font-size:2em}.markdown-body h1,.markdown-body h2{padding-bottom:.3em;border-bottom:1px solid #eaecef}.markdown-body h2{font-size:1.5em}.markdown-body h3{font-size:1.25em}.markdown-body h4{font-size:1em}.markdown-body h5{font-size:.875em}.markdown-body h6{font-size:.85em;color:#6a737d}.markdown-body ol,.markdown-body ul{padding-left:2em}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:0;margin-bottom:0}.markdown-body li{word-wrap:break-all}.markdown-body li&gt;p{margin-top:16px}.markdown-body li+li{margin-top:.25em}.markdown-body dl{padding:0}.markdown-body dl dt{padding:0;margin-top:16px;font-size:1em;font-style:italic;font-weight:600}.markdown-body dl dd{padding:0 16px;margin-bottom:16px}.markdown-body table{display:block;width:100%;overflow:auto}.markdown-body table th{font-weight:600}.markdown-body table td,.markdown-body table th{padding:6px 13px;border:1px solid #dfe2e5}.markdown-body table tr{background-color:#fff;border-top:1px solid #c6cbd1}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}.markdown-body img{max-width:100%;box-sizing:initial;background-color:#fff}.markdown-body img[align=right]{padding-left:20px}.markdown-body img[align=left]{padding-right:20px}.markdown-body code{padding:.2em .4em;margin:0;font-size:85%;background-color:rgba(27,31,35,.05);border-radius:3px}.markdown-body pre{word-wrap:normal}.markdown-body pre&gt;code{padding:0;margin:0;font-size:100%;word-break:normal;white-space:pre;background:transparent;border:0}.markdown-body .highlight{margin-bottom:16px}.markdown-body .highlight pre{margin-bottom:0;word-break:normal}.markdown-body .highlight pre,.markdown-body pre{padding:16px;overflow:auto;font-size:85%;line-height:1.45;background-color:#f6f8fa;border-radius:3px}.markdown-body pre code{display:inline;max-width:auto;padding:0;margin:0;overflow:visible;line-height:inherit;word-wrap:normal;background-color:initial;border:0}.markdown-body .commit-tease-sha{display:inline-block;font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:90%;color:#444d56}.markdown-body .full-commit .btn-outline:not(:disabled):hover{color:#005cc5;border-color:#005cc5}.markdown-body .blob-wrapper{overflow-x:auto;overflow-y:hidden}.markdown-body .blob-wrapper-embedded{max-height:240px;overflow-y:auto}.markdown-body .blob-num{width:1%;min-width:50px;padding-right:10px;padding-left:10px;font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:12px;line-height:20px;color:rgba(27,31,35,.3);text-align:right;white-space:nowrap;vertical-align:top;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.markdown-body .blob-num:hover{color:rgba(27,31,35,.6)}.markdown-body .blob-num:before{content:attr(data-line-number)}.markdown-body .blob-code{position:relative;padding-right:10px;padding-left:10px;line-height:20px;vertical-align:top}.markdown-body .blob-code-inner{overflow:visible;font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:12px;color:#24292e;word-wrap:normal;white-space:pre}.markdown-body .pl-token.active,.markdown-body .pl-token:hover{cursor:pointer;background:#ffea7f}.markdown-body .tab-size[data-tab-size="1"]{-moz-tab-size:1;tab-size:1}.markdown-body .tab-size[data-tab-size="2"]{-moz-tab-size:2;tab-size:2}.markdown-body .tab-size[data-tab-size="3"]{-moz-tab-size:3;tab-size:3}.markdown-body .tab-size[data-tab-size="4"]{-moz-tab-size:4;tab-size:4}.markdown-body .tab-size[data-tab-size="5"]{-moz-tab-size:5;tab-size:5}.markdown-body .tab-size[data-tab-size="6"]{-moz-tab-size:6;tab-size:6}.markdown-body .tab-size[data-tab-size="7"]{-moz-tab-size:7;tab-size:7}.markdown-body .tab-size[data-tab-size="8"]{-moz-tab-size:8;tab-size:8}.markdown-body .tab-size[data-tab-size="9"]{-moz-tab-size:9;tab-size:9}.markdown-body .tab-size[data-tab-size="10"]{-moz-tab-size:10;tab-size:10}.markdown-body .tab-size[data-tab-size="11"]{-moz-tab-size:11;tab-size:11}.markdown-body .tab-size[data-tab-size="12"]{-moz-tab-size:12;tab-size:12}.markdown-body .task-list-item{list-style-type:none}.markdown-body .task-list-item+.task-list-item{margin-top:3px}.markdown-body .task-list-item input{margin:0 .2em .25em -1.6em;vertical-align:middle}</style><style data-highlight="" data-highlight-key="an-old-hope">.hljs-comment,.hljs-quote{color:#b6b18b}.hljs-deletion,.hljs-name,.hljs-regexp,.hljs-selector-class,.hljs-selector-id,.hljs-tag,.hljs-template-variable,.hljs-variable{color:#eb3c54}.hljs-built_in,.hljs-builtin-name,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-type{color:#e7ce56}.hljs-attribute{color:#ee7c2b}.hljs-addition,.hljs-bullet,.hljs-string,.hljs-symbol{color:#4fb4d7}.hljs-section,.hljs-title{color:#78bb65}.hljs-keyword,.hljs-selector-tag{color:#b45ea4}.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#1c1d21;color:#c0c5ce}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">èƒŒæ™¯</h2>
<p>è®©æˆ‘ä»¬æŒ‰ç…§Â <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.nand2tetris.org%2Fcourse" target="_blank" title="https://www.nand2tetris.org/course" ref="nofollow noopener noreferrer">From Nand to Tetris</a>Â é‡ŒÂ <code>Project 3</code>Â çš„è¦æ±‚ï¼Œæ¥å®Œæˆä¸‹åˆ—çš„è®¾è®¡ã€‚</p>
<ol>
<li>å®ç° <code>Bit</code></li>
<li>å®ç° <code>Register</code></li>
<li>å®ç° <code>RAM8</code></li>
<li>å®ç° <code>RAM64</code> (todo)</li>
<li>å®ç° <code>RAM512</code> (todo)</li>
<li>å®ç° <code>RAM4K</code> (todo)</li>
<li>å®ç° <code>RAM16K</code> (todo)</li>
<li>å®ç° <code>PC</code> (<code>Program Counter</code>, ç¨‹åºè®¡æ•°å™¨) (todo)</li>
</ol>
<h2 data-id="heading-1">æ­£æ–‡</h2>
<h3 data-id="heading-2">1. å®ç° <code>Bit</code></h3>
<p>å‰å¾€Â <a href="https://link.juejin.cn?target=https%3A%2F%2Fnand2tetris.github.io%2Fweb-ide%2Fchip%2F" target="_blank" title="https://nand2tetris.github.io/web-ide/chip/" ref="nofollow noopener noreferrer">Nand to Tetris Online IDE</a>ï¼Œé€‰æ‹©Â <code>Project 3</code>Â é‡Œçš„Â <code>Bit</code>ï¼Œæ•ˆæœå¦‚ä¸‹å›¾æ‰€ç¤º â¬‡ï¸</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4360e942fb4245b380b2ea54b267197b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YeR6YqA6YqF6ZC1:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767411260&amp;x-signature=xgG75AOqaD7VroysoPt01Bu2Qc0%3D" alt="image.png" loading="lazy"/></p>
<p>æˆ‘ä»¬çš„ç›®æ ‡æ˜¯ç”¨ <code>DFF</code>(<code>Data Flip Flop</code>, æ•°æ®è§¦å‘å™¨)Â ä»¥åŠ <code>Project 1</code>/<code>Project 2</code> é‡Œå·²ç»å®ç°çš„å„ç§Â <code>chip</code>Â å®ç°ä¸€ä¸ªÂ <code>Bit</code>(å³ï¼Œä¸€ä½å¯„å­˜å™¨)ã€‚</p>
<p>æ³¨é‡Šä¸­çš„ç›¸å…³æè¿°å¦‚ä¸‹ â¬‡ï¸</p>
<pre><code class="hljs language-text" lang="text">/**
 * 1-bit register:
 * If load is asserted, the register's value is set to in;
 * Otherwise, the register maintains its current value:
 * if (load(t)) out(t+1) = in(t), else out(t+1) = out(t)
 */
</code></pre>
<ul>
<li>è¾“å…¥æ˜¯
<ul>
<li><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi><mi>n</mi></mrow><annotation encoding="application/x-tex">in</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6595em;"/><span class="mord mathnormal">in</span></span></span></span></span></li>
<li><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>l</mi><mi>o</mi><mi>a</mi><mi>d</mi></mrow><annotation encoding="application/x-tex">load</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"/><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">o</span><span class="mord mathnormal">a</span><span class="mord mathnormal">d</span></span></span></span></span></li>
</ul>
</li>
<li>è¾“å‡ºæ˜¯
<ul>
<li><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>o</mi><mi>u</mi><mi>t</mi></mrow><annotation encoding="application/x-tex">out</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6151em;"/><span class="mord mathnormal">o</span><span class="mord mathnormal">u</span><span class="mord mathnormal">t</span></span></span></span></span></li>
</ul>
</li>
</ul>
<p>ä¹¦ä¸­æœ‰ä¸€äº›å…³äºä¸€ä½ <code>Bit</code>å¯„å­˜å™¨è®¾è®¡çš„æè¿° â¬‡ï¸</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7c42844bf42f418683e21f007c192cab~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YeR6YqA6YqF6ZC1:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767411260&amp;x-signature=7kPfLu%2BBxZoZa8JlJLEWVvWYDsw%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0e90012fcc114716ae0884d2f6109fa0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YeR6YqA6YqF6ZC1:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767411260&amp;x-signature=0SUHp1HOxCDNwLVt1Ab%2FSialVvI%3D" alt="å¾®ä¿¡åœ–ç‰‡_2025-12-27_102957_841.jpg" loading="lazy"/></p>
<p>ç»“åˆä¹¦ä¸­çš„æè¿°ï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·æ¥å®ç°</p>
<pre><code class="hljs language-hdl" lang="hdl">CHIP Bit {
    IN in, load;
    OUT out;

    PARTS:
    Mux(a= previousOut, b= in, sel= load, out= nextOut);
    DFF(in= nextOut, out=out, out= previousOut);
}
</code></pre>
<p>è¿™æ ·çš„ä»£ç å¯ä»¥é€šè¿‡ä»¿çœŸæµ‹è¯•ï¼Œæ•ˆæœå¦‚ä¸‹å›¾æ‰€ç¤º â¬‡ï¸</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2006e1d8b16f45e0b8739757b23b221c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YeR6YqA6YqF6ZC1:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767411260&amp;x-signature=RgmjB4csUXiTtkqrctfwD2Vf2kk%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-3">2. å®ç° <code>Register</code></h3>
<p>å‰å¾€Â <a href="https://link.juejin.cn?target=https%3A%2F%2Fnand2tetris.github.io%2Fweb-ide%2Fchip%2F" target="_blank" title="https://nand2tetris.github.io/web-ide/chip/" ref="nofollow noopener noreferrer">Nand to Tetris Online IDE</a>ï¼Œé€‰æ‹©Â <code>Project 3</code>Â é‡Œçš„Â <code>Register</code>ï¼Œæ•ˆæœå¦‚ä¸‹å›¾æ‰€ç¤º â¬‡ï¸</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c5b3ff3debca40569679e3e068e6de49~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YeR6YqA6YqF6ZC1:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767411260&amp;x-signature=wJ2kBdsCYgbe7Wa2OmOf5oK%2BH%2F8%3D" alt="image.png" loading="lazy"/></p>
<p>æˆ‘ä»¬çš„ç›®æ ‡æ˜¯ç”¨ <code>Bit</code>(ä¸€ä½å¯„å­˜å™¨)Â ä»¥åŠ <code>Project 1</code>/<code>Project 2</code> é‡Œå·²ç»å®ç°çš„å„ç§Â <code>chip</code>Â å®ç°ä¸€ä¸ªÂ <code>Register</code>(å³ï¼Œ<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>16</mn></mrow><annotation encoding="application/x-tex">16</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">16</span></span></span></span></span> ä½å¯„å­˜å™¨)ã€‚</p>
<p>æ³¨é‡Šä¸­çš„ç›¸å…³æè¿°å¦‚ä¸‹ â¬‡ï¸</p>
<pre><code class="hljs language-text" lang="text">/**
 * 16-bit register:
 * If load is asserted, the register's value is set to in;
 * Otherwise, the register maintains its current value:
 * if (load(t)) out(t+1) = int(t), else out(t+1) = out(t)
 */
</code></pre>
<ul>
<li>è¾“å…¥æ˜¯
<ul>
<li><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi><mi>n</mi><mo stretchy="false">[</mo><mn>16</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">in[16]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal">in</span><span class="mopen">[</span><span class="mord">16</span><span class="mclose">]</span></span></span></span></span></li>
<li><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>l</mi><mi>o</mi><mi>a</mi><mi>d</mi></mrow><annotation encoding="application/x-tex">load</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"/><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">o</span><span class="mord mathnormal">a</span><span class="mord mathnormal">d</span></span></span></span></span></li>
</ul>
</li>
<li>è¾“å‡ºæ˜¯
<ul>
<li><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>o</mi><mi>u</mi><mi>t</mi><mo stretchy="false">[</mo><mn>16</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">out[16]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal">o</span><span class="mord mathnormal">u</span><span class="mord mathnormal">t</span><span class="mopen">[</span><span class="mord">16</span><span class="mclose">]</span></span></span></span></span></li>
</ul>
</li>
</ul>
<p>æˆ‘ä»¬åœ¨ä¸Šä¸€æ­¥é‡Œå·²ç»å®ç°äº† <code>Bit</code>(ä¸€ä½å¯„å­˜å™¨)ï¼Œæ—¢ç„¶ <code>Register</code> æ˜¯ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>16</mn></mrow><annotation encoding="application/x-tex">16</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">16</span></span></span></span></span> ä½å¯„å­˜å™¨ï¼Œé‚£ä¹ˆå¯ä»¥æŠŠ <code>Register</code> å½“ä½œ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>16</mn></mrow><annotation encoding="application/x-tex">16</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">16</span></span></span></span></span> ä¸ªä¸€ä½å¯„å­˜å™¨çš„ç»„åˆã€‚</p>
<p>ä»£ç çš„å¤§æ„å¦‚ä¸‹ â¬‡ï¸</p>
<pre><code class="hljs language-hdl" lang="hdl">CHIP Register {
    IN in[16], load;
    OUT out[16];

    PARTS:
    Bit(in= in[0], load= load, out= out[0]);
    Bit(in= in[1], load= load, out= out[1]);
    ...
    Bit(in= in[15], load= load, out= out[15]);
}
</code></pre>
<p>ç”±äºè¿™é‡Œæœ‰å¾ˆå¤šè¡Œç±»ä¼¼çš„ä»£ç ï¼Œè‡ªå·±å¤åˆ¶ç²˜è´´åŠ ä¿®æ”¹æ„Ÿè§‰æœ‰ç‚¹æµªè´¹æ—¶é—´ï¼Œä¸å¦‚ç”¨ <code>java</code> ä»£ç æ¥ç”Ÿæˆå®ƒå§ã€‚
è¯·å°†ä»¥ä¸‹ä»£ç ä¿å­˜ä¸º <code>RegisterHdlCodeGenerator.java</code>ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> java.util.StringJoiner;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RegisterHdlCodeGenerator</span> {

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">template</span> <span class="hljs-operator">=</span> <span class="hljs-string">"""
                CHIP Register {
                    IN in[16], load;
                    OUT out[16];
                
                    PARTS:
                %s
                }
                """</span>;

        <span class="hljs-type">StringJoiner</span> <span class="hljs-variable">joiner</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringJoiner</span>(System.lineSeparator());
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">16</span>; i++) {
            <span class="hljs-type">String</span> <span class="hljs-variable">line</span> <span class="hljs-operator">=</span> String.format(<span class="hljs-string">"    Bit(in= in[%s], load= load, out= out[%s]);"</span>, i, i);
            joiner.add(line);
        }
        System.out.printf(template, joiner);
    }
}
</code></pre>
<p>ä½¿ç”¨å¦‚ä¸‹çš„å‘½ä»¤å¯ä»¥ç¼–è¯‘ <code>RegisterHdlCodeGenerator.java</code> å¹¶è¿è¡Œå…¶ä¸­çš„ <code>main</code> æ–¹æ³•ã€‚</p>
<pre><code class="hljs language-bash" lang="bash">javac RegisterHdlCodeGenerator.java
java RegisterHdlCodeGenerator
</code></pre>
<p>è¿è¡Œç»“æœå¦‚ä¸‹</p>
<pre><code class="hljs language-text" lang="text">CHIP Register {
    IN in[16], load;
    OUT out[16];

    PARTS:
    Bit(in= in[0], load= load, out= out[0]);
    Bit(in= in[1], load= load, out= out[1]);
    Bit(in= in[2], load= load, out= out[2]);
    Bit(in= in[3], load= load, out= out[3]);
    Bit(in= in[4], load= load, out= out[4]);
    Bit(in= in[5], load= load, out= out[5]);
    Bit(in= in[6], load= load, out= out[6]);
    Bit(in= in[7], load= load, out= out[7]);
    Bit(in= in[8], load= load, out= out[8]);
    Bit(in= in[9], load= load, out= out[9]);
    Bit(in= in[10], load= load, out= out[10]);
    Bit(in= in[11], load= load, out= out[11]);
    Bit(in= in[12], load= load, out= out[12]);
    Bit(in= in[13], load= load, out= out[13]);
    Bit(in= in[14], load= load, out= out[14]);
    Bit(in= in[15], load= load, out= out[15]);
}
</code></pre>
<p>è¿™æ ·çš„ä»£ç å¯ä»¥é€šè¿‡ä»¿çœŸæµ‹è¯•ï¼Œæ•ˆæœå¦‚ä¸‹å›¾æ‰€ç¤º â¬‡ï¸</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9c27aa43e87945ba9eaa44f61b2480a7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YeR6YqA6YqF6ZC1:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767411260&amp;x-signature=rYaxtDSXbX6iBNqFwHVaSyASiGo%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-4">3. å®ç° <code>RAM8</code></h3>
<p>å‰å¾€Â <a href="https://link.juejin.cn?target=https%3A%2F%2Fnand2tetris.github.io%2Fweb-ide%2Fchip%2F" target="_blank" title="https://nand2tetris.github.io/web-ide/chip/" ref="nofollow noopener noreferrer">Nand to Tetris Online IDE</a>ï¼Œé€‰æ‹©Â <code>Project 3</code>Â é‡Œçš„Â <code>RAM8</code>ï¼Œæ•ˆæœå¦‚ä¸‹å›¾æ‰€ç¤º â¬‡ï¸</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ecdec32d0407434a946467c310f9e5e3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YeR6YqA6YqF6ZC1:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767411260&amp;x-signature=8Wnf6QkWlrIgx5Uk31fy1%2B84C8Q%3D" alt="image.png" loading="lazy"/></p>
<p>æˆ‘ä»¬çš„ç›®æ ‡æ˜¯ç”¨ <code>Register</code>(<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>8</mn></mrow><annotation encoding="application/x-tex">8</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">8</span></span></span></span></span> ä½å¯„å­˜å™¨)Â ä»¥åŠ <code>Project 1</code>/<code>Project 2</code> é‡Œå·²ç»å®ç°çš„å„ç§Â <code>chip</code>Â å®ç°ä¸€ä¸ªÂ <code>RAM8</code>(å³ï¼Œ<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>8</mn></mrow><annotation encoding="application/x-tex">8</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">8</span></span></span></span></span> ä¸ª <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>16</mn></mrow><annotation encoding="application/x-tex">16</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">16</span></span></span></span></span> ä½å¯„å­˜å™¨çš„å­˜å‚¨å™¨)ã€‚</p>
<p>æ³¨é‡Šä¸­çš„ç›¸å…³æè¿°å¦‚ä¸‹ â¬‡ï¸</p>
<pre><code class="hljs language-text" lang="text">/**
 * Memory of eight 16-bit registers.
 * If load is asserted, the value of the register selected by
 * address is set to in; Otherwise, the value does not change.
 * The value of the selected register is emitted by out.
 */
</code></pre>
<ul>
<li>è¾“å…¥æ˜¯
<ul>
<li><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi><mi>n</mi><mo stretchy="false">[</mo><mn>16</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">in[16]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal">in</span><span class="mopen">[</span><span class="mord">16</span><span class="mclose">]</span></span></span></span></span></li>
<li><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>l</mi><mi>o</mi><mi>a</mi><mi>d</mi></mrow><annotation encoding="application/x-tex">load</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"/><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">o</span><span class="mord mathnormal">a</span><span class="mord mathnormal">d</span></span></span></span></span></li>
<li><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mi>d</mi><mi>d</mi><mi>r</mi><mi>e</mi><mi>s</mi><mi>s</mi><mo stretchy="false">[</mo><mn>3</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">address[3]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal">a</span><span class="mord mathnormal">dd</span><span class="mord mathnormal">ress</span><span class="mopen">[</span><span class="mord">3</span><span class="mclose">]</span></span></span></span></span></li>
</ul>
</li>
<li>è¾“å‡ºæ˜¯
<ul>
<li><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>o</mi><mi>u</mi><mi>t</mi><mo stretchy="false">[</mo><mn>16</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">out[16]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal">o</span><span class="mord mathnormal">u</span><span class="mord mathnormal">t</span><span class="mopen">[</span><span class="mord">16</span><span class="mclose">]</span></span></span></span></span></li>
</ul>
</li>
</ul>
<p>æˆ‘ä»¬åœ¨ä¸Šä¸€æ­¥é‡Œå·²ç»å®ç°äº† <code>Register</code>(<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>16</mn></mrow><annotation encoding="application/x-tex">16</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">16</span></span></span></span></span> ä½å¯„å­˜å™¨)ã€‚ç°åœ¨éœ€è¦é€‰æ‹©å°† <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi><mi>n</mi><mo stretchy="false">[</mo><mn>16</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">in[16]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal">in</span><span class="mopen">[</span><span class="mord">16</span><span class="mclose">]</span></span></span></span></span> è¾“å…¥ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>8</mn></mrow><annotation encoding="application/x-tex">8</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">8</span></span></span></span></span> ä¸ª <code>Register</code> ä¸­çš„å“ªä¸€ä¸ªï¼Œå¯ä»¥ä½¿ç”¨ <code>Project 1</code> é‡Œçš„ <code>DMux8Way</code>ï¼Œå¯¹ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>o</mi><mi>u</mi><mi>t</mi><mo stretchy="false">[</mo><mn>16</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">out[16]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal">o</span><span class="mord mathnormal">u</span><span class="mord mathnormal">t</span><span class="mopen">[</span><span class="mord">16</span><span class="mclose">]</span></span></span></span></span> è€Œè¨€ï¼Œæˆ‘ä»¬å¯ä»¥å€ŸåŠ© <code>Project 1</code> é‡Œçš„ <code>Mux8Way16</code> ä» <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>8</mn></mrow><annotation encoding="application/x-tex">8</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">8</span></span></span></span></span> ä¸ª <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi><mi>e</mi><mi>g</mi><mi>i</mi><mi>s</mi><mi>t</mi><mi>e</mi><mi>r</mi></mrow><annotation encoding="application/x-tex">Register</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"/><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mord mathnormal">e</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mord mathnormal">i</span><span class="mord mathnormal">s</span><span class="mord mathnormal">t</span><span class="mord mathnormal" style="margin-right:0.02778em;">er</span></span></span></span></span> çš„è¾“å‡ºä¸­è¿›è¡Œé€‰æ‹©ã€‚</p>
<p>ä»£ç çš„å¤§æ„å¦‚ä¸‹ â¬‡ï¸</p>
<pre><code class="hljs language-hdl" lang="hdl">CHIP RAM8 {
    IN in[16], load, address[3];
    OUT out[16];

    PARTS:
    DMux8Way(in= load, sel= address,
    a= a, b= b, c= c, d= d, e= e, f= f, g= g, h= h);

    Register(in= in, load= a, out= out0);
    Register(in= in, load= b, out= out1);
    ...
    Register(in= in, load= h, out= out7);

    Mux8Way16(a= out0, b= out1, c= out2, d= out3,
    e= out4, f= out5, g= out6, h= out7,
    sel= address, out= out);
}
</code></pre>
<p>ç”±äºè¿™é‡Œæœ‰å¾ˆå¤šè¡Œç±»ä¼¼çš„ä»£ç ï¼Œè‡ªå·±å¤åˆ¶ç²˜è´´åŠ ä¿®æ”¹æ„Ÿè§‰æœ‰ç‚¹æµªè´¹æ—¶é—´ï¼Œä¸å¦‚ç”¨ <code>java</code> ä»£ç æ¥ç”Ÿæˆå®ƒå§ã€‚
è¯·å°†ä»¥ä¸‹ä»£ç ä¿å­˜ä¸º <code>RAM8HdlCodeGenerator.java</code>ã€‚</p>
<pre><code class="hljs language-bash" lang="bash">javac RAM8HdlCodeGenerator.java
java RAM8HdlCodeGenerator
</code></pre>
<p>è¿è¡Œç»“æœå¦‚ä¸‹</p>
<pre><code class="hljs language-hdl" lang="hdl">CHIP RAM8 {
    IN in[16], load, address[3];
    OUT out[16];

    PARTS:
    DMux8Way(in= load, sel= address,
    a= a, b= b, c= c, d= d, e= e, f= f, g= g, h= h);

    Register(in= in, load= a, out= out0);
    Register(in= in, load= b, out= out1);
    Register(in= in, load= c, out= out2);
    Register(in= in, load= d, out= out3);
    Register(in= in, load= e, out= out4);
    Register(in= in, load= f, out= out5);
    Register(in= in, load= g, out= out6);
    Register(in= in, load= h, out= out7);

    Mux8Way16(a= out0, b= out1, c= out2, d= out3,
    e= out4, f= out5, g= out6, h= out7,
    sel= address, out= out);
}
</code></pre>
<p>è¿™æ ·çš„ä»£ç å¯ä»¥é€šè¿‡ä»¿çœŸæµ‹è¯•ï¼Œæ•ˆæœå¦‚ä¸‹å›¾æ‰€ç¤º â¬‡ï¸</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9a9798a375ac4b2a9bc358ffe2817cb5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YeR6YqA6YqF6ZC1:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767411260&amp;x-signature=fJ7hLlM4I4NcL11kbOucR5qNlYM%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-5">4. å®ç° <code>RAM64</code></h3>
<p>å‰å¾€Â <a href="https://link.juejin.cn?target=https%3A%2F%2Fnand2tetris.github.io%2Fweb-ide%2Fchip%2F" target="_blank" title="https://nand2tetris.github.io/web-ide/chip/" ref="nofollow noopener noreferrer">Nand to Tetris Online IDE</a>ï¼Œé€‰æ‹©Â <code>Project 3</code>Â é‡Œçš„Â <code>RAM64</code>ï¼Œæ•ˆæœå¦‚ä¸‹å›¾æ‰€ç¤º â¬‡ï¸</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7b0c5811dcf54ff4acaf53113eff91b2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YeR6YqA6YqF6ZC1:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767411260&amp;x-signature=KjmQMcz1Uh99H2YgTxke7ZlyL%2Bw%3D" alt="image.png" loading="lazy"/></p>
<p>æˆ‘ä»¬çš„ç›®æ ‡æ˜¯ç”¨ <code>RAM8</code>(å³ï¼Œ<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>8</mn></mrow><annotation encoding="application/x-tex">8</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">8</span></span></span></span></span> ä¸ª <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>16</mn></mrow><annotation encoding="application/x-tex">16</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">16</span></span></span></span></span> ä½å¯„å­˜å™¨çš„å­˜å‚¨å™¨)Â ä»¥åŠ <code>Project 1</code>/<code>Project 2</code> é‡Œå·²ç»å®ç°çš„å„ç§Â <code>chip</code>Â å®ç°ä¸€ä¸ªÂ <code>RAM64</code>(å³ï¼Œ<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>64</mn></mrow><annotation encoding="application/x-tex">64</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">64</span></span></span></span></span> ä¸ª <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>16</mn></mrow><annotation encoding="application/x-tex">16</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">16</span></span></span></span></span> ä½å¯„å­˜å™¨çš„å­˜å‚¨å™¨)ã€‚</p>
<p>æ³¨é‡Šä¸­çš„ç›¸å…³æè¿°å¦‚ä¸‹ â¬‡ï¸</p>
<pre><code class="hljs language-text" lang="text">/**
 * Memory of sixty four 16-bit registers.
 * If load is asserted, the value of the register selected by
 * address is set to in; Otherwise, the value does not change.
 * The value of the selected register is emitted by out.
 */
</code></pre>
<ul>
<li>è¾“å…¥æ˜¯
<ul>
<li><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi><mi>n</mi><mo stretchy="false">[</mo><mn>16</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">in[16]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal">in</span><span class="mopen">[</span><span class="mord">16</span><span class="mclose">]</span></span></span></span></span></li>
<li><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>l</mi><mi>o</mi><mi>a</mi><mi>d</mi></mrow><annotation encoding="application/x-tex">load</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"/><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">o</span><span class="mord mathnormal">a</span><span class="mord mathnormal">d</span></span></span></span></span></li>
<li><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mi>d</mi><mi>d</mi><mi>r</mi><mi>e</mi><mi>s</mi><mi>s</mi><mo stretchy="false">[</mo><mn>6</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">address[6]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal">a</span><span class="mord mathnormal">dd</span><span class="mord mathnormal">ress</span><span class="mopen">[</span><span class="mord">6</span><span class="mclose">]</span></span></span></span></span></li>
</ul>
</li>
<li>è¾“å‡ºæ˜¯
<ul>
<li><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>o</mi><mi>u</mi><mi>t</mi><mo stretchy="false">[</mo><mn>16</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">out[16]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal">o</span><span class="mord mathnormal">u</span><span class="mord mathnormal">t</span><span class="mopen">[</span><span class="mord">16</span><span class="mclose">]</span></span></span></span></span></li>
</ul>
</li>
</ul>
<p>æˆ‘ä»¬åœ¨ä¸Šä¸€æ­¥é‡Œå·²ç»å®ç°äº† <code>RAM8</code>ï¼Œå¯ä»¥ç”¨ç±»ä¼¼çš„æ€è·¯æ¥å®ç° <code>RAM64</code>ã€‚</p>
<h2 data-id="heading-6">å‚è€ƒèµ„æ–™</h2></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Redisé«˜é¢‘è¸©å‘å®å½•ï¼š5ä¸ªä¸æŠ¥é”™ä½†ä¼šå¯¼è‡´æ€§èƒ½è…°æ–©çš„'éšç§˜'é…ç½®é¡¹]]></title>    <link>https://juejin.cn/post/7587776610437120015</link>    <guid>https://juejin.cn/post/7587776610437120015</guid>    <pubDate>2025-12-27T04:16:46.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587776610437120015" data-draft-id="7588004376867242019" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Redisé«˜é¢‘è¸©å‘å®å½•ï¼š5ä¸ªä¸æŠ¥é”™ä½†ä¼šå¯¼è‡´æ€§èƒ½è…°æ–©çš„'éšç§˜'é…ç½®é¡¹"/> <meta itemprop="keywords" content="åç«¯,å‰ç«¯,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-12-27T04:16:46.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é˜¿æ©™çš„ç™¾å®ç®±"/> <meta itemprop="url" content="https://juejin.cn/user/1638743356481367"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Redisé«˜é¢‘è¸©å‘å®å½•ï¼š5ä¸ªä¸æŠ¥é”™ä½†ä¼šå¯¼è‡´æ€§èƒ½è…°æ–©çš„'éšç§˜'é…ç½®é¡¹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1638743356481367/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é˜¿æ©™çš„ç™¾å®ç®±
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-27T04:16:46.000Z" title="Sat Dec 27 2025 04:16:46 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0"><strong>Redisé«˜é¢‘è¸©å‘å®å½•ï¼š5ä¸ªä¸æŠ¥é”™ä½†ä¼šå¯¼è‡´æ€§èƒ½è…°æ–©çš„'éšç§˜'é…ç½®é¡¹</strong></h2>
<h3 data-id="heading-1">å¼•è¨€</h3>
<p>Redisä½œä¸ºé«˜æ€§èƒ½çš„å†…å­˜æ•°æ®åº“ï¼Œå‡­å€Ÿå…¶äºšæ¯«ç§’çº§å“åº”é€Ÿåº¦å’Œä¸°å¯Œçš„æ•°æ®ç»“æ„ï¼Œå·²æˆä¸ºç°ä»£åˆ†å¸ƒå¼ç³»ç»Ÿçš„æ ¸å¿ƒç»„ä»¶ã€‚ç„¶è€Œï¼Œæ­£æ˜¯ç”±äºå…¶"å¼€ç®±å³ç”¨"çš„ç®€ä¾¿æ€§ï¼Œè®¸å¤šå¼€å‘è€…å¾€å¾€å¿½è§†äº†æ·±å±‚æ¬¡çš„é…ç½®è°ƒä¼˜ã€‚æœ¬æ–‡æ­ç¤ºçš„5ä¸ªé…ç½®é¡¹ä¸ä¼šè§¦å‘ä»»ä½•é”™è¯¯æ—¥å¿—ï¼Œå´å¯èƒ½åœ¨ä¸ç»æ„é—´å°†Redisçš„æ€§èƒ½è…°æ–©â€”â€”ä»ååé‡éª¤é™åˆ°å»¶è¿Ÿé£™å‡ã€‚è¿™äº›"éšç§˜æ€æ‰‹"çš„èƒŒåï¼Œæ˜¯å†…å­˜ç®¡ç†ã€ç½‘ç»œåè®®å’ŒæŒä¹…åŒ–æœºåˆ¶çš„æ·±åº¦è€¦åˆã€‚</p>
<hr/>
<h3 data-id="heading-2">1. <code>hz</code>ï¼šå®šæ—¶ä»»åŠ¡é¢‘ç‡çš„ç”œèœœä¸é™·é˜±</h3>
<p><strong>é—®é¢˜æœ¬è´¨</strong>ï¼š<br/>
<code>hz</code>å‚æ•°ï¼ˆé»˜è®¤10ï¼‰æ§åˆ¶Redisåå°ä»»åŠ¡çš„æ‰§è¡Œé¢‘ç‡ï¼ŒåŒ…æ‹¬è¿‡æœŸé”®æ¸…ç†ã€rehashæ“ä½œç­‰ã€‚çœ‹ä¼¼æ— å®³çš„æ•°å€¼è°ƒæ•´å®åˆ™æš—è—ç„æœºï¼š</p>
<ul>
<li><strong>æ€§èƒ½æ‚¬å´–</strong>ï¼šå½“<code>hz &gt; 100</code>æ—¶ï¼ŒCPUåˆ©ç”¨ç‡å‘ˆæŒ‡æ•°çº§å¢é•¿ï¼ˆå®æµ‹ä»10â†’100ä¼šä½¿CPUå ç”¨ç‡æå‡3å€ï¼‰</li>
<li><strong>è¿‡æœŸé”®å †ç§¯</strong>ï¼š<code>hz=1</code>å¯èƒ½å¯¼è‡´å¤§é‡å·²è¿‡æœŸé”®æœªè¢«åŠæ—¶æ¸…ç†ï¼Œå†…å­˜å ç”¨è™šé«˜</li>
</ul>
<p><strong>é»„é‡‘æ³•åˆ™</strong>ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-bullet">-</span> ç”Ÿäº§ç¯å¢ƒå»ºè®®å€¼ï¼š5~50ï¼ˆæ ¹æ®æœåŠ¡å™¨æ ¸å¿ƒæ•°è°ƒæ•´ï¼‰
<span class="hljs-bullet">-</span> ç›‘æ§æŒ‡æ ‡ï¼šè§‚å¯Ÿ<span class="hljs-code">`evicted_keys`</span>å’Œ<span class="hljs-code">`expired_keys`</span>çš„å¢é•¿è¶‹åŠ¿
</code></pre>
<hr/>
<h3 data-id="heading-3">2. <code>tcp-backlog</code>ï¼šè¿æ¥é£æš´çš„ç¬¬ä¸€é“é˜²çº¿</h3>
<p><strong>éšè—å±æœº</strong>ï¼š<br/>
é»˜è®¤å€¼511åœ¨é«˜å¹¶å‘åœºæ™¯ä¸‹ä¼šæˆä¸ºç“¶é¢ˆã€‚å½“å®¢æˆ·ç«¯è¿æ¥æ¿€å¢æ—¶ï¼š</p>
<pre><code class="hljs language-math" lang="math">å®é™…å¯ç”¨backlog = min(tcp-backlog, /proc/sys/net/core/somaxconn)
</code></pre>
<p>æœªå¤„ç†çš„è¿æ¥ä¼šç›´æ¥ä¸¢å¼ƒï¼ˆæ— é”™è¯¯æ—¥å¿—ï¼ï¼‰ï¼Œè¡¨ç°ä¸ºå®¢æˆ·ç«¯å¶å‘è¿æ¥è¶…æ—¶ã€‚</p>
<p><strong>è°ƒä¼˜ç­–ç•¥</strong>ï¼š</p>
<ol>
<li>åŒæ—¶è°ƒæ•´ç³»ç»Ÿçº§å‚æ•°ï¼š
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">echo</span> 2048 &gt; /proc/sys/net/core/somaxconn
</code></pre>
</li>
<li>Redisé…ç½®åŒæ­¥æ›´æ–°ï¼š
<pre><code class="hljs language-redis.conf" lang="redis.conf">tcp-backlog 2048
</code></pre>
</li>
</ol>
<hr/>
<h3 data-id="heading-4">3. <code>repl-disable-tcp-nodelay</code>ï¼šå¤åˆ¶å»¶è¿Ÿçš„å…ƒå‡¶</h3>
<p><strong>ç½‘ç»œåè®®å±‚çš„åšå¼ˆ</strong>ï¼š<br/>
ä¸»ä»å¤åˆ¶æ—¶å¯ç”¨è¯¥é€‰é¡¹ï¼ˆé»˜è®¤å…³é—­ï¼‰ä¼šå¯¼è‡´ï¼š</p>
<ul>
<li>Nagleç®—æ³•å †ç§¯å°åŒ…</li>
<li>åŒæ­¥å»¶è¿Ÿå¢åŠ 30%~300%ï¼ˆå®æµ‹RTT&gt;100msæ—¶å½±å“æ˜¾è‘—ï¼‰</li>
</ul>
<p><strong>å†³ç­–æ ‘</strong>ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TD
    A[è·¨æœºæˆ¿åŒæ­¥?] --&gt;|æ˜¯| B[å¼€å¯ repl-disable-tcp-nodelay]
    A --&gt;|å¦| C[ä¿æŒå…³é—­çŠ¶æ€]
</code></pre>
<hr/>
<h3 data-id="heading-5">4. <code>hash-max-ziplist-entries/value</code>ï¼šå†…å­˜ä¸CPUçš„é›¶å’Œæ¸¸æˆ</h3>
<p>æ•°æ®ç»“æ„ç¼–ç çš„ä¸´ç•Œç‚¹æ§åˆ¶ç€å†…å­˜æ•ˆç‡ä¸è®¡ç®—å¼€é”€çš„å¹³è¡¡ï¼š</p>




















<table><thead><tr><th>æ•°æ®ç±»å‹</th><th>é»˜è®¤é˜ˆå€¼</th><th>è¶…å‡ºåç¼–ç è½¬æ¢</th></tr></thead><tbody><tr><td>Hash</td><td>entries:512, value:64å­—èŠ‚</td><td>ziplist â†’ hashtable</td></tr><tr><td>Set</td><td>entries:512</td><td>intset â†’ hashtable</td></tr></tbody></table>
<p><strong>å‹æµ‹æ•°æ®æ­ç¤ºçš„çœŸç›¸</strong>ï¼š</p>
<ul>
<li>Value=60å­—èŠ‚æ—¶ï¼Œå†…å­˜èŠ‚çœ40%</li>
<li>Value=65å­—èŠ‚æ—¶ï¼ŒQPSä¸‹é™22%</li>
</ul>
<p>æœ€ä½³å®è·µï¼š</p>
<pre><code class="hljs language-redis.conf" lang="redis.conf"># æ ¹æ®å®é™…valueå°ºå¯¸åŠ¨æ€è°ƒæ•´
hash-max-ziplist-value 128 
</code></pre>
<hr/>
<h3 data-id="heading-6">5. <code>client-output-buffer-limit</code>ï¼šå¤åˆ¶ä¸­æ–­çš„æ— å½¢ä¹‹æ‰‹</h3>
<p>Pub/Subå’Œä¸»ä»å¤åˆ¶çš„ç¼“å†²åŒºé™åˆ¶å¸¸è¢«ä½ä¼°ï¼š</p>
<pre><code class="hljs language-redis.conf" lang="redis.conf"># Defaultå€¼é£é™©åœºæ™¯:
client-output-buffer-limit replica 256mb 64mb 60

# Slaveå…¨é‡åŒæ­¥20GBæ•°æ®æ—¶:
1. Bufferç¬æ—¶çªç ´256MBç¡¬é™åˆ¶
2. Masterå¼ºåˆ¶æ–­å¼€è¿æ¥ï¼ˆä»…åœ¨slow logè®°å½•ï¼‰
</code></pre>
<p>é‡‘èçº§é…ç½®å»ºè®®ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown">replica:
 hard limit â‰¥ max(rdb<span class="hljs-emphasis">_file_</span>size)<span class="hljs-emphasis">*1.5 
 soft limit â‰¥ network_speed *</span> sync<span class="hljs-emphasis">_time 
</span></code></pre>
<hr/>
<h3 data-id="heading-7">Linuxå±‚ååŒä¼˜åŒ–å¤‡å¿˜å½•</h3>
<p>å³ä½¿Redisé…ç½®å®Œç¾ï¼ŒOSå±‚é¢çš„è¯¯é…ä»ä¼šæŠµæ¶ˆä¼˜åŒ–æ•ˆæœï¼š</p>
<ol>
<li><strong>é€æ˜å¤§é¡µç¦ç”¨</strong>ï¼š
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">echo</span> never &gt; /sys/kernel/mm/transparent_hugepage/enabled
</code></pre>
</li>
<li><strong>NUMAæ¶æ„ç»‘å®š</strong>ï¼š
<pre><code class="hljs language-bash" lang="bash">numactl --interleave=all redis-server ...
</code></pre>
</li>
<li><strong>SWAPinesså½’é›¶</strong>ï¼š
<pre><code class="hljs language-bash" lang="bash">vm.swappiness = 0 
</code></pre>
</li>
</ol>
<hr/>
<h3 data-id="heading-8">Conclusion: Redisè°ƒä¼˜çš„ä¸‰é‡å¢ƒç•Œ</h3>
<ol>
<li><strong>åŸºç¡€å±‚</strong>: memory_limit/timeoutç­‰æ˜¾å¼å‚æ•°</li>
<li><strong>è¿›é˜¶å±‚</strong>: hz/tcp-backlogç­‰éšæ€§äº¤äº’å‚æ•°</li>
<li><strong>ä¸“å®¶å±‚</strong>: OSå†…æ ¸å‚æ•°ä¸ç¡¬ä»¶æ‹“æ‰‘é€‚é…</li>
</ol>
<p>çœŸæ­£çš„æ€§èƒ½ä¼˜åŒ–ä¸åœ¨äºè¿½æ±‚æŸä¸ªå‚æ•°çš„æè‡´è°ƒæ ¡ï¼Œè€Œåœ¨äºç†è§£å„å±‚çº§ç»„ä»¶çš„ç›¸äº’ä½œç”¨å…³ç³»ã€‚å»ºè®®é€šè¿‡<code>redis-cli --latency-history -i 1</code>æŒç»­ç›‘æµ‹å¾®è§‚å»¶è¿Ÿå˜åŒ–ï¼Œç»“åˆç«ç„°å›¾å®šä½éšå½¢ç“¶é¢ˆã€‚è®°ä½ï¼šæ²¡æœ‰æ”¾ä¹‹å››æµ·è€Œçš†å‡†çš„æœ€ä¼˜é…ç½®ï¼Œåªæœ‰ä¸ä¸šåŠ¡ç‰¹å¾å®Œç¾å¥‘åˆçš„å‚æ•°ç»„åˆã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[AI å››æ ¼ç¬‘è¯çˆ†ç«ï¼Œæˆ‘åšäº†ä»€ä¹ˆ?]]></title>    <link>https://juejin.cn/post/7588004601392529442</link>    <guid>https://juejin.cn/post/7588004601392529442</guid>    <pubDate>2025-12-27T04:15:38.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588004601392529442" data-draft-id="7587776610437103631" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="AI å››æ ¼ç¬‘è¯çˆ†ç«ï¼Œæˆ‘åšäº†ä»€ä¹ˆ?"/> <meta itemprop="keywords" content="AIGC,å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-27T04:15:38.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¼ é£æ·ç‰¹çƒˆ"/> <meta itemprop="url" content="https://juejin.cn/user/149189281194766"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            AI å››æ ¼ç¬‘è¯çˆ†ç«ï¼Œæˆ‘åšäº†ä»€ä¹ˆ?
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/149189281194766/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¼ é£æ·ç‰¹çƒˆ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-27T04:15:38.000Z" title="Sat Dec 27 2025 04:15:38 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:14px;overflow-x:hidden;color:var(--cyanosis-base-color);transition:color .35s;--cyanosis-base-color:#353535;--cyanosis-title-color:#005bb7;--cyanosis-strong-color:#2196f3;--cyanosis-em-color:#4fc3f7;--cyanosis-del-color:#ccc;--cyanosis-link-color:#3da8f5;--cyanosis-linkh-color:#007fff;--cyanosis-border-color:#bedcff;--cyanosis-border-color-2:#ececec;--cyanosis-bg-color:#fff;--cyanosis-blockquote-color:#8c8c8c;--cyanosis-blockquote-bg-color:#f0fdff;--cyanosis-code-color:#c2185b;--cyanosis-code-bg-color:#fff4f4;--cyanosis-code-pre-color:#f8f8f8;--cyanosis-table-border-color:#c3e0fd;--cyanosis-table-th-color:#dff0ff;--cyanosis-table-tht-color:#005bb7;--cyanosis-table-tr-nc-color:#f7fbff;--cyanosis-table-trh-color:#e0edf7;--cyanosis-slct-title-color:#005bb7;--cyanosis-slct-titlebg-color:rgba(175,207,247,0.25);--cyanosis-slct-text-color:#c80000;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#e8ebec;--cyanosis-slct-codebg-color:#ffeaeb;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body.__dark{--cyanosis-base-color:#cacaca;--cyanosis-title-color:#ddd;--cyanosis-strong-color:#fe9900;--cyanosis-em-color:#ffd28e;--cyanosis-del-color:#ccc;--cyanosis-link-color:#ffb648;--cyanosis-linkh-color:#fe9900;--cyanosis-border-color:#ffe3ba;--cyanosis-border-color-2:#ffcb7b;--cyanosis-bg-color:#2f2f2f;--cyanosis-blockquote-color:#c7c7c7;--cyanosis-blockquote-bg-color:rgba(255,199,116,0.1);--cyanosis-code-color:#000;--cyanosis-code-bg-color:#ffcb7b;--cyanosis-code-pre-color:rgba(255,227,185,0.5);--cyanosis-table-border-color:#fe9900;--cyanosis-table-th-color:#ffb648;--cyanosis-table-tht-color:#000;--cyanosis-table-tr-nc-color:#6d5736;--cyanosis-table-trh-color:#947443;--cyanosis-slct-title-color:#000;--cyanosis-slct-titlebg-color:#fe9900;--cyanosis-slct-text-color:#00c888;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#000;--cyanosis-slct-codebg-color:#ffcb7b;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body h1{padding-bottom:4px;font-size:30px}.markdown-body h1,.markdown-body h2{margin-top:36px;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);transition:color .35s}.markdown-body h2{position:relative;padding-left:10px;padding-right:10px;padding-bottom:10px;font-size:24px;border-bottom:1px solid var(--cyanosis-border-color-2)}.markdown-body h2:before{content:"ã€Œ";position:absolute;top:-6px;left:-14px}.markdown-body h2:after{content:"ã€";position:relative;top:6px;right:auto}.markdown-body h3{position:relative;padding-bottom:0;margin-top:30px;margin-bottom:10px;font-size:20px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h3:before{content:"Â»";padding-right:6px;color:var(--cyanosis-strong-color)}.markdown-body h4{margin-top:24px;font-size:16px}.markdown-body h4,.markdown-body h5{padding-bottom:0;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h5{margin-top:18px;font-size:14px}.markdown-body h6{padding-bottom:0;margin-top:12px;margin-bottom:10px;font-size:12px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body p{line-height:inherit;margin-top:16px;margin-bottom:16px}.markdown-body img{max-width:100%}.markdown-body hr{position:relative;width:98%;height:1px;margin-top:32px;margin-bottom:32px;background-image:linear-gradient(90deg,var(--cyanosis-link-color),rgba(255,0,0,.3),hsla(0,0%,100%,.1),rgba(255,0,0,.3),var(--cyanosis-link-color));border-width:0;overflow:visible}.markdown-body hr:after{content:"";position:absolute;margin:auto;left:0;right:0;bottom:0;top:0;display:inline-block;width:60px;height:20px;background-color:var(--cyanosis-bg-color);background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAgCAYAAABgrToAAAADoklEQVRYR82XTYgcRRTHf2933Q1RjAa9eFO8JHoJ8RQVBQ2iBwXBET0YEUTXNVmNQtTpmeqaWV0XNRq/o4KoECSCEPSg4CF+BYUkIIiCoCJCPIhC/Ihh2Z0nVV27VnZnenumW9i6ddV7//frV69fVQurfMgq56NawFTPAU6QyomqXrw6wIZeyhCPebA5buNR+akKyGoAjd6BshthnYdSjqNcRVuOlIUsD2j0SuA94IwuMHdh5ZUykOUBXfSGbmKI54EtAeYIHSZoy5dl4JxvNYBOKdW1KE8BQ8AkVk6WhasWsAiN0TX9gveXQaPP+Aytpc4u+bMI06JNohsYYYYOR2lJWtS3OKDRfcAtQfgDoI6Vo4UCGb0OmAEuDvZvYmVbEd/igC3dzDz7gQu8sPA9kJDK27mBmjqBeLjTg90PDFOjWawFFQd06kZHEfaj3LAIpTRpSXsZ5E06zEYP9sDimnAApYaV2SLZG/wjMeqAkijwW4xQJ5Gf/ZzRC8OW3hiBTGGlURRswW55Bh/Ssxljrwew8l1PQaM14GngvGDzBUKdDsMeTtgU5o8B92PFlUf3YXUrHa7Fys6lBqcCGnX15YQ2A18FyPd7Crd1A3M8C1wdbH4DD3hWeP6IEXbQkG97ajR1HPFnuPP5jFFq1OWX7hl8WM9l1AO648uNfwLk7tytMeogty+xeQ4rO3r6bdcx1nuwOGsHmaXGtPzae4uzGnLH1kQkvpdZGrHjssBZJrL+pqS05KWc8tgITAPXRzYvYOXe/C2OV43eDcRBDtIhoS2f9wzc0Cv8Wls+zoFzUC5zF0U241h5uZtPfptp6OUM8wbK+cH5GEpCS17P3fJei0Z3+npTxryJ8CPzbKMtn/ZyWbkPGl0PuFPkmkjkcb4h4R2ZLwRq1H0ALmvjkf2HwK1Y+T1PY2XABe/sHJ6MxN5lnoSpnC/UGbsTaI5phK2R7x6s3Ffk5YoDOrWm3onwJHBmEP86bPmBrsGaenNoIdnxCH+gPEhLXi0Cl1VBvyPVLSh7gEuC62yAfOIUqabWEaaiucMIk6RyqJ+Q/QM69V26jjW86Gvov/EaoyT8zRCn+Xq7PVrbx0nuYUaO9wM3WAbjCE1NEUw09Um4UV+2OKfYfu5/S19gsAzGKqm6LE5FrShbdS0ku465DjDwKA/oQht19ejqbaEVuRbiLhuHByYLjtUAZpDutzP7cYdHsPJXWbjyNVgFwQoa1WXwf4Jd9YD/Ap80+yE7+u9aAAAAAElFTkSuQmCC);background-repeat:no-repeat;background-size:auto 100%;background-position-x:center;transition:background-color .5s}.markdown-body code{padding:.065em .4em;font-size:.87em;color:var(--cyanosis-code-color);word-break:break-word;overflow-x:auto;background-color:var(--cyanosis-code-bg-color);border-radius:2px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{display:block;padding:16px 12px;margin:0;font-size:12px;color:#333;word-break:normal;overflow-x:auto;background:var(--cyanosis-code-pre-color)}.markdown-body pre&gt;code::-webkit-scrollbar{width:4px;height:4px}.markdown-body pre&gt;code::-webkit-scrollbar-track{background-color:var(--cyanosis-border-color)}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:var(--cyanosis-strong-color);border-radius:10px}.markdown-body a{position:relative;text-decoration:none;color:var(--cyanosis-link-color);border-bottom:1px solid var(--cyanosis-border-color)}.markdown-body a:hover{border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body a:active,.markdown-body a:hover{color:var(--cyanosis-linkh-color)}.markdown-body a:after{position:absolute;content:"";top:100%;left:0;width:100%;opacity:0;border-bottom:1px solid var(--cyanosis-border-color);transition:top .3s,opacity .3s;transform:translateZ(0)}.markdown-body a:hover:after{top:0;opacity:1;border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid var(--cyanosis-table-border-color);border-spacing:0;border-collapse:collapse}.markdown-body table thead{color:#000;text-align:left;font-size:14px;background:#f6f6f6}.markdown-body table tr:nth-child(2n){background-color:var(--cyanosis-table-tr-nc-color)}.markdown-body table tr:hover{background-color:var(--cyanosis-table-trh-color)}.markdown-body table td,.markdown-body table th{padding:12px 8px;line-height:24px;border:1px solid var(--cyanosis-table-border-color)}.markdown-body table th{color:var(--cyanosis-table-tht-color);background-color:var(--cyanosis-table-th-color)}.markdown-body table td{min-width:120px}.markdown-body blockquote{color:var(--cyanosis-blockquote-color);border-left:4px solid var(--cyanosis-strong-color);background-color:var(--cyanosis-blockquote-bg-color);padding:1px 20px;margin:22px 0;transition:color .35s}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body b,.markdown-body blockquote&gt;b,.markdown-body blockquote&gt;strong,.markdown-body strong{color:var(--cyanosis-strong-color)}.markdown-body em,.markdown-body i{color:var(--cyanosis-em-color)}.markdown-body del{color:var(--cyanosis-del-color)}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:4px}.markdown-body ol li{padding-left:6px}.markdown-body details&gt;summary{outline:none;color:var(--cyanosis-title-color);font-size:20px;font-weight:bolder;border-bottom:1px solid var(--cyanosis-border-color);cursor:pointer}.markdown-body details&gt;p{padding:10px 20px;margin:10px 0 0;color:#666;background-color:var(--cyanosis-blockquote-bg-color);border:2px dashed var(--cyanosis-strong-color)}.markdown-body h1::selection,.markdown-body h2::selection,.markdown-body h3::selection,.markdown-body h4::selection,.markdown-body h5::selection,.markdown-body h6::selection{color:var(--cyanosis-slct-title-color);background-color:var(--cyanosis-slct-titlebg-color)}.markdown-body ol li::selection,.markdown-body p::selection,.markdown-body ul li::selection{color:var(--cyanosis-slct-text-color);background-color:var(--cyanosis-slct-bg-color)}.markdown-body a::selection,.markdown-body b::selection,.markdown-body em::selection,.markdown-body i::selection,.markdown-body strong::selection{background-color:var(--cyanosis-slct-elbg-color)}.markdown-body del::selection{color:var(--cyanosis-slct-del-color);background-color:var(--cyanosis-slct-elbg-color)}.markdown-body table thead th::selection{background-color:transparent}.markdown-body table tbody td::selection{background-color:var(--cyanosis-slct-bg-color)}.markdown-body code::selection{background-color:var(--cyanosis-slct-codebg-color)}.markdown-body pre&gt;code::selection{background-color:var(--cyanosis-slct-prebg-color)}.markdown-body .contains-task-list{padding-left:14px;list-style:none}.markdown-body .contains-task-list input[type=checkbox]{position:relative}.markdown-body .contains-task-list input[type=checkbox]:before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;width:inherit;height:inherit;background:#f0f8ff;border:1px solid #add6ff;border-radius:2px;box-sizing:border-box;z-index:1}.markdown-body .contains-task-list input[type=checkbox]:checked:after{content:"âœ“";position:absolute;top:-12px;left:0;right:0;bottom:0;width:0;height:0;color:#f55;font-size:20px;font-weight:700;z-index:2}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="atom-one-dark">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#abb2bf;background:#282c34}.hljs-comment,.hljs-quote{color:#5c6370;font-style:italic}.hljs-doctag,.hljs-formula,.hljs-keyword{color:#c678dd}.hljs-deletion,.hljs-name,.hljs-section,.hljs-selector-tag,.hljs-subst{color:#e06c75}.hljs-literal{color:#56b6c2}.hljs-addition,.hljs-attribute,.hljs-meta-string,.hljs-regexp,.hljs-string{color:#98c379}.hljs-built_in,.hljs-class .hljs-title{color:#e6c07b}.hljs-attr,.hljs-number,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-pseudo,.hljs-template-variable,.hljs-type,.hljs-variable{color:#d19a66}.hljs-bullet,.hljs-link,.hljs-meta,.hljs-selector-id,.hljs-symbol,.hljs-title{color:#61aeee}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.hljs-link{text-decoration:underline}</style><h4 data-id="heading-0">0. å‰è¨€</h4>
<p>åœ¨ 2025å¹´çš„å°¾å·´ä¸Šï¼Œå‘ç”Ÿäº†ä¸€ä»¶éå¸¸æœ‰è¶£çš„äº‹ï¼Œæˆ‘åœ¨å¾®ä¿¡å…¬ä¼—å·ä¸Šçš„ <code>AI å››æ ¼æ¼«ç”»</code> æ„å¤–çˆ†ç«ã€‚ä¹‹å‰å…¬ä¼—å·ä¸Šå‘çš„æŠ€æœ¯æ–‡ç« ï¼ŒåŸºæœ¬ä¸Šé˜…è¯»é‡ä¸è¿‡ 300ï¼Œæ¯å¤©å¹¿å‘Šæ”¶ç›Šä¹Ÿå°±å‡ æ¯›é’±ã€‚ç›®å‰æœ€ç«çš„ç¾æœèï¼Œæµè§ˆé‡å·²ç»è¾¾åˆ°æƒŠäººçš„ <strong>5W</strong>ã€‚è¿™æ ·è®©æˆ‘ä¸ç¦æ„Ÿå¹:</p>
<blockquote>
<p>åå¹´æŠ€æœ¯æ— äººé—®ï¼Œä¸€æ›²æ¼«ç¬‘å¹¿äººé—»ã€‚</p>
</blockquote>
<p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3b1c44a5bf7243779841d17bfabc4824~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=586&amp;h=299&amp;s=55292&amp;e=png&amp;b=fdfdfd" alt="" loading="lazy"/></p>
<hr/>
<p>ç«çˆ†ä¹‹åï¼Œå¸¦æ¥çš„æœ€ç›´æ¥ä»·å€¼å°±æ˜¯è¿æ¥äº†æ³¼å¤©å¯Œè´µã€‚ä»æœªæƒ³è¿‡æœ‰ä¸€å¤©ï¼Œæˆ‘çš„æ—¥å¹¿å‘Šæ”¶ç›Šèƒ½è¾¾åˆ° 250+ ï¼Œç›®å‰å·²ç»è¿ç»­ä¸‰å¤©é«˜ä½ã€‚é™¤äº†é‡‘é’±ï¼Œè‡ªå·±çš„ä½œå“å—åˆ°æ¬¢è¿ï¼Œä»¥åŠå¤§å®¶åœ¨è¯„è®ºåŒºçš„åæ§½ã€è®¨è®ºï¼Œä¹Ÿä¸ºæˆ‘å¸¦æ¥äº†å¾ˆå¤§çš„æƒ…ç»ªä»·å€¼ã€‚</p>













<table><thead><tr><th>-</th><th>-</th></tr></thead><tbody><tr><td><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b915619f897b416e95a417900cef5108~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=1179&amp;h=2556&amp;s=680744&amp;e=png&amp;b=f1f7f7" alt="" loading="lazy"/></td><td><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/0d24cf6d8bff47b7bd5094625ed5dca8~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=1179&amp;h=2556&amp;s=220732&amp;e=png&amp;b=fdfdfd" alt="" loading="lazy"/></td></tr></tbody></table>
<hr/>
<h4 data-id="heading-1">1. ç¼˜èµ·</h4>
<p>å…ˆç®€å•ä»‹ç»ä¸€ä¸‹ï¼šæˆ‘æ˜¯ä¸€ä¸ªç±ç±æ— åçš„ç¼–ç¨‹æŠ€æœ¯å°åšä¸»ï¼Œå…¨ç½‘ç»Ÿä¸€åå· <code>å¼ é£æ·ç‰¹çƒˆ</code> ã€‚ <a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FyAQXh0UbMMU5cI5nmSJYWw" target="_blank" title="https://mp.weixin.qq.com/s/yAQXh0UbMMU5cI5nmSJYWw" ref="nofollow noopener noreferrer">ç¼–ç¨‹ä¹‹ç‹</a> æ˜¯æˆ‘ç»´æŠ¤çš„å…¬ä¼—å·ï¼Œä¸€ç›´æ˜¯è¾“å‡ºç¼–ç¨‹æŠ€æœ¯çš„æ–‡ç« ï¼Œä¸»è¦ä»¥ Flutter æŠ€æœ¯ä¸ºä¸»ã€‚<br/>
ä½†æŠ€æœ¯æ–‡ç« æ›´æ–°çš„ä¸æ˜¯éå¸¸é¢‘ç¹ï¼Œè€Œå…¬ä¼—å·æ¯å¤©æœ‰ä¸€ç¯‡å‘æ–‡çš„æœºä¼šã€‚æœ¬ç€ <code>ä¸æƒ³æµªè´¹</code> çš„ä¼˜è‰¯ä¼ ç»Ÿï¼Œåœ¨ AI é‡å¡‘ä¸€åˆ‡çš„æµªæ½®ä¸­ï¼Œæˆ‘æƒ³ç”¨ AI ç”»äº›å››æ ¼æ¼«ç”»çš„ç¬‘è¯è¯•è¯•ã€‚äºæ˜¯å¼€å¯äº† <strong>æ…§å¿ƒä¸€ç¬‘</strong> ä¸“æ ï¼Œ <a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FHtpVgVF7HZlqrVS37-R82w" target="_blank" title="https://mp.weixin.qq.com/s/HtpVgVF7HZlqrVS37-R82w" ref="nofollow noopener noreferrer">ã€Šå°ç«æŸ´çš„å€’éœ‰æ—¥å¸¸ã€‹</a> å°±æ˜¯ç¬¬ä¸€ç¯‡ï¼Œç°åœ¨è¿˜æ²¡ç«ã€‚å¤§å®¶ä¹Ÿå¯ä»¥ç‚¹å¼€çœ‹çœ‹ï¼Œå†…å®¹éå¸¸ç²¾ç®€ï¼Œå°±æ˜¯ä¸€å¹…å›¾+æç¤ºè¯ã€‚</p>
<p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e2fb9e88c522489db9ec8bcb2f6163fd~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=576&amp;h=299&amp;s=47926&amp;e=png&amp;b=fdfafa" alt="" loading="lazy"/></p>
<p>è¿™ä¸ªç³»åˆ—æ•´ä½“æ˜¯è¯™è°å¹½é»˜çš„ï¼Œä¸‹é¢æ˜¯ç¬¬ä¸€ç¯‡çš„å†…å®¹ï¼š</p>
<p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3034eb513f304e2ca0e8199ce5afff6e~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=1024&amp;h=559&amp;s=524412&amp;e=png&amp;b=fae8ca" alt="" loading="lazy"/></p>
<p>ä¸€å¼€å§‹æˆ‘æ˜¯ç”¨è‡ªç„¶è¯­è¨€çš„æç¤ºè¯ï¼Œæ„Ÿè§‰æ•ˆæœå¹¶ä¸æ˜¯å¤ªå¥½ï¼Œå››æ ¼æ¼«ç”»æœ‰ç€è¿ç»­çš„ä¿¡æ¯å’Œä¸€è‡´æ€§çš„äººç‰©ã€åœºæ™¯ç­‰ã€‚ç”±äºç¼–ç¨‹å‡ºèº«ï¼Œåœ¨ <strong>ç»“æ„ä¸€è‡´æ€§</strong> æ–¹é¢æœ‰ç€å¤©ç„¶çš„æ•é”å—…è§‰ã€‚äºæ˜¯åŸºäº yaml æ–‡ä»¶æ¥å®šä¹‰ç»Ÿä¸€çš„åœºæ™¯ã€è§’è‰²ã€æ ·å¼ã€è‰²è°ƒç­‰ä¿¡æ¯ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">comic_info:</span>
  <span class="hljs-attr">type:</span> <span class="hljs-string">"å››æ ¼æ¼«ç”»"</span>
  <span class="hljs-attr">style:</span> <span class="hljs-string">"æ‰‹ç»˜ç®€ç¬”ç”»ã€æŸ”è½¯çº¿æ¡ã€è½»æ¾å†·å¹½é»˜ã€ç»Ÿä¸€è§’è‰²"</span>
  <span class="hljs-attr">color_scheme:</span> <span class="hljs-string">"æš–é»„ä¸»è‰²è°ƒï¼Œçº¢æ©™è‰²ç‚¹ç¼€ï¼ŒæŸ”å’Œæ˜æš—å±‚æ¬¡"</span>
  <span class="hljs-attr">character:</span>
    <span class="hljs-attr">name:</span> <span class="hljs-string">"å°ç«æŸ´"</span>
    <span class="hljs-attr">appearance:</span> <span class="hljs-string">"ç»†é•¿åœ†æŸ±èº«ä½“ã€çº¢è‰²ç«æŸ´å¤´ã€ä¸¤æ ¹çŸ­ç«–çœ‰æ¯›ã€åœ†ç‚¹çœ¼ç›ã€å‘†èŒå¯çˆ±"</span>
    <span class="hljs-attr">personality:</span> <span class="hljs-string">"è¿·ç³Šã€å¤©çœŸã€ç•¥å€’éœ‰"</span>
  <span class="hljs-attr">background_style:</span> <span class="hljs-string">"ç™½è‰²ç®€çº¦èƒŒæ™¯ï¼Œæ­é…å°‘é‡æ‰‹ç»˜è¡—æ™¯æˆ–ç‰©ä»¶å¢å¼ºç”Ÿæ´»æ„Ÿ"</span>
</code></pre>
<p>é¢æ¿åˆ—è¡¨æ”¾åœ¨ <code>panels</code> èŠ‚ç‚¹ä¸‹ï¼Œæ¯ä¸ªå®«æ ¼ç”± <code>panel[x]</code> å›ºå®šåœºæ™¯å†…å®¹ã€‚åŒ…æ‹¬æè¿°ã€åœºæ™¯ã€åŠ¨ä½œã€è¡¨æƒ…ã€ç»†èŠ‚ã€æ–‡æœ¬ç­‰ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">panels:</span>
  <span class="hljs-attr">panel1:</span>
    <span class="hljs-attr">description:</span> <span class="hljs-string">"ç¬¬ä¸€æ ¼ï¼šæ—¥å¸¸é“ºå«"</span>
    <span class="hljs-attr">scene:</span> <span class="hljs-string">"æ¸©æš–çš„æ‰‹ç»˜è¡—é“ï¼šåœ°é¢ä¸ºæ·¡é»„è‰²çº¹ç†ï¼Œç®€å•çš„è·¯ç¯ã€å‡ æ ªå°è‰ã€è¿œå¤„ä¸€åº§å°æˆ¿å­ï¼Œç©ºæ°”é‡Œé£˜ç€å¹¾é¢—å°äº®ç‚¹"</span>
    <span class="hljs-attr">action:</span> <span class="hljs-string">"å°ç«æŸ´åŒæ‰‹èƒŒåœ¨èº«åï¼Œè¸©ç€è½»å¿«çš„å°æ­¥å­å‰è¿›"</span>
    <span class="hljs-attr">expression:</span> <span class="hljs-string">"è½»æ¾å¾®ç¬‘ï¼Œçœ¼ç›å¾®å¼¯"</span>
    <span class="hljs-attr">details:</span> <span class="hljs-string">"è·¯ç¯ç”¨ç»†çº¿å‹¾å‹’ï¼Œå°è‰ä¸‰ä¸¤ç¨€ç–ç‚¹ç¼€ï¼Œå¤©ç©ºåŠ å‡ æœµæŸ”è½¯çš„ç™½äº‘"</span>
    <span class="hljs-attr">text:</span> <span class="hljs-string">"ä»Šå¤©å¤©æ°”çœŸå¥½å‘€ï½"</span>
</code></pre>
<p>å®šä¹‰å®Œç»“æ„ï¼Œä¸€ä¸ª yaml æ–‡ä»¶å°±å¯¹åº”äº†ä¸€ä¸ªå››æ ¼æ•…äº‹ï¼ŒæŠŠè¿™ä¸ªå†…å®¹ä¸¢ç»™ AI ç”Ÿå›¾çš„å·¥å…·ï¼Œå°±èƒ½å¾—åˆ°å¯¹åº”çš„å›¾ç‰‡ã€‚</p>
<p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/91ae4dded9a14567a1c438a1825e562c~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=915&amp;h=380&amp;s=154672&amp;e=png&amp;b=f2f0ef" alt="" loading="lazy"/></p>
<hr/>
<h4 data-id="heading-2">2. å…³äº AI ç”Ÿå›¾å·¥å…·ä¸è´¨é‡</h4>
<p>æˆ‘çš„ç†å¿µæ˜¯: æ–‡æœ¬æ˜¯ä¸€ç§åºåˆ—çš„çº¦å®šï¼š</p>
<blockquote>
<p>å®ƒå¯ä»¥è§†ä¸ºä¸€ä¸ªå››æ ¼æ¼«ç”»çš„ <strong>åŸºå› </strong>ï¼Œè€Œ AI å·¥å…·ä¼šå°†åŸºå›  <code>å®ä¾‹åŒ–</code> ä¸ºä¸ªä½“ã€‚</p>
</blockquote>
<p>æ‰€ä»¥ï¼Œç”Ÿæˆå›¾çš„å¥½åå–å†³äºä¸¤ä¸ªå› ç´ ï¼š<code>åŸºå› åºåˆ—</code> å’Œ <code>æˆé•¿ç¯å¢ƒ</code>ã€‚ä¹Ÿå°±æ˜¯æç¤ºè¯å¥½ä¸å¥½ï¼Œä»¥åŠ AI å·¥å…·å‰ä¸å‰å®³ã€‚ AI ç”Ÿå›¾çš„å·¥å…·æœ‰å¾ˆå¤šï¼Œå•ç›®å‰å¤§å¤šæ•°ï¼Œå¯¹äºæ ‡å‡†çš„å››æ ¼æ¼«ç”»éƒ½æ— æ³•å‡†ç¡®è¾“å‡ºï¼Œä¸‹é¢åˆ—ä¸¾å‡ ä¸ª:</p>
<ul>
<li><strong>å³æ¢¦ AI</strong></li>
</ul>
<p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/24c632cf9ce741178152d97096667b3c~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=1032&amp;h=264&amp;s=407121&amp;e=png&amp;b=f3ce85" alt="" loading="lazy"/></p>
<ul>
<li><strong>è±†åŒ…</strong></li>
</ul>
<p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b3d692710bcc4d7f9c929d2f46d960cf~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=1238&amp;h=337&amp;s=493504&amp;e=png&amp;b=faf5f2" alt="" loading="lazy"/></p>
<ul>
<li><strong>Nano Banana</strong></li>
</ul>
<p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/91553066f86742428df4d6b3cdd7be29~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=1024&amp;h=559&amp;s=760444&amp;e=png&amp;b=f8efdb" alt="" loading="lazy"/></p>
<p>ç›®å‰æ¥çœ‹ï¼Œå›½äº§çš„ AI ä»æœ‰å¾ˆå¤§çš„è¿›æ­¥ç©ºé—´ï¼ŒNano Banana èƒ½ç¬¦åˆæˆ‘å¯¹å›¾ç‰‡äº§å“çš„é¢„æœŸã€‚ä½†æ˜¯ AI æ­£åœ¨è“¬å‹ƒå‘å±•ä¸­ï¼Œ AI ç”Ÿå›¾ä¹Ÿæ˜¯æœ€è¿‘ä¸€ä¸¤å¹´æ‰é€æ¸å¯ç”¨çš„ï¼Œæˆ‘å¯¹ä»–ä»¬çš„æœªæ¥æŒæœ‰ä¹è§‚çš„æ€åº¦ï¼ŒåŒ…æ‹¬æˆ‘ä»¬å›½äº§çš„å¤§æ¨¡å‹ã€‚æ‰€ä»¥å¦‚æœ <code>æˆé•¿ç¯å¢ƒ</code> å°†ä¼šè¶Šæ¥è¶Šå¥½ï¼Œé‚£ä¹ˆ <code>åŸºå› åºåˆ—</code> æœ¬èº«å°†ä¼šæˆä¸ºéå¸¸é‡è¦çš„å› ç´ ã€‚<br/>
ç›®å‰æˆ‘åªæ˜¯ç®€å•è®¾è®¡äº†ä¸€ä¸‹ <code>yaml</code>ï¼ŒæŒ‰ç…§ç‰ˆæœ¬æ§åˆ¶ï¼Œç§°ä¸º <code>v0.0.1</code> å§ï¼Œåç»­éšç€åˆ›ä½œéœ€æ±‚çš„å‡çº§ï¼Œæˆ‘ä¹Ÿä¼šé€æ­¥è¿­ä»£æ•´ä½“ç»“æ„ï¼Œè®¾è®¡æ›´åˆç†çš„ DNA ç»“æ„ ğŸ˜</p>
<hr/>
<h4 data-id="heading-3">3. é€‰å®šæ–¹å‘? Flow Heart</h4>
<blockquote>
<p>æœ‰äººé—®æˆ‘ï¼Œä½ æ˜¯æ€ä¹ˆæƒ³åˆ°è¿™äº›ç¨€å¥‡å¤æ€ªçš„æ–¹å‘çš„ï¼Œè€Œä¸”ä½ æ˜¯æ€ä¹ˆåšæŒä¸‹æ¥çš„ã€‚</p>
</blockquote>
<p>å¯¹äºä¸€ä¸ªåˆ›ä½œè€…æ¥è¯´ï¼Œæ‹“å®½è‡ªå·±çš„è¾¹ç•Œæ˜¯ä¸€ä¸ªå¾ˆå¿…è¦çš„äº‹ã€‚ç‰¹åˆ«æ˜¯å¯¹ä¸€ä¸ªç¼–ç¨‹åˆ›ä½œè€…ï¼Œå¹¿æ³›æ¶‰çŒæ˜¯å®¶å¸¸ä¾¿é¥­ã€‚ä½¿ç”¨ä¸€åˆ‡æ‰‹æ®µï¼Œè§£å†³è‡ªå·±é‡åˆ°çš„é—®é¢˜ï¼›æ²¡æœ‰é—®é¢˜æ—¶å°±å»å‘å±•è‡ªå·±ï¼Œåœ¨æ–°çš„é¢†åŸŸä¸­å¯»æ‰¾é—®é¢˜ã€‚è‡³äºåšæŒå˜›ï¼Œéµå¾ªå†…å¿ƒçš„æŒ‡å¼•ï¼Œåšè‡ªå·±å–œæ¬¢çš„äº‹ï¼Œæ˜¯ä¸éœ€è¦åšæŒçš„ï¼Œå°±åƒä½ æ¯å¤©éƒ½è¦å–æ°´ä¸€æ ·è‡ªç„¶ã€‚</p>
<p>å¯èƒ½æœ‰äººä¼šé—®ï¼Œå¦‚æœ AI çš„ç¬‘è¯æ¼«ç”»æ²¡æœ‰ç«ï¼Œä½ è¿˜ä¼šåšæŒä¸‹å»å—ï¼Ÿåˆšåšå‰ä¸¤ä¸ªæ¼«ç”»æ–‡ç« æ—¶ï¼Œè¿˜æ²¡æœ‰ç«ï¼Œä¸€å¤©æ”¶å…¥ 1 å—é’±ï¼Œæˆ‘å·²ç»è§‰å¾—å¾ˆç¾æ»‹æ»‹äº†ã€‚æŠ•å…¥çš„äº§å‡ºç¬¦åˆæˆ‘çš„é¢„æœŸï¼Œæ¯•ç«Ÿåªéœ€è¦å‡†å¤‡ä¸ªç¬‘è¯é›å½¢ï¼Œå…¶ä»–éƒ½äº¤ç»™ AI å†™å°±è¡Œäº†ã€‚æˆ‘è¿˜å’Œå¥³æœ‹å‹ç‚«è€€ï¼š</p>













<table><thead><tr><th>-</th><th>-</th></tr></thead><tbody><tr><td><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/5dd9d09b880c4c308b22fb00102e5d8e~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=1179&amp;h=2556&amp;s=567607&amp;e=png&amp;b=efefef" alt="" loading="lazy"/></td><td><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/cd13ed472dad4cc29bf19406222c89e4~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=1179&amp;h=2556&amp;s=689970&amp;e=png&amp;b=fdfdfd" alt="" loading="lazy"/></td></tr></tbody></table>
<p>æœ€åè¿˜æ˜¯æƒ³å¼ºè°ƒä¸€ç‚¹ï¼šå¦‚æœä¸€ä»¶äº‹ï¼Œå¯¹ç¤¾ä¼šã€å¯¹ä»–äººæ²¡æœ‰å±å®³ï¼Œè‡ªå·±åšç€è§‰å¾—å¼€å¿ƒï¼Œèµ·æ¥æ²¡æœ‰è´Ÿæ‹…å’Œå‹åŠ›ï¼Œå°±ä¼šå¤§èƒ†å»åšã€‚åä¹‹ï¼Œå¯ä»¥åœ¨å…¶ä»–æ–¹é¢ç»§ç»­å»¶ä¼¸ï¼Œæ‰¾åˆ°è‡ªå·±å–œæ¬¢çš„é‚£ä¸ªé¢†åŸŸã€‚AI å·¥å…·çš„åŠ æŒï¼Œè®©ä¸ªä½“æ‹¥æœ‰äº†å‰æ‰€æœªæœ‰çš„èƒ½åŠ›ï¼Œä¸ªäººçš„è¾¹ç•Œå¯ä»¥æåº¦æ‹“å®½ã€‚</p>
<hr/>
<h4 data-id="heading-4">4. ä¸ºä»€ä¹ˆä¼šç«ï¼Ÿ</h4>
<p>ç¬¬ä¸€æ¬¡æ„Ÿè§‰ä¼šç«ï¼Œæ˜¯å› ä¸º<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FXe85NV6MyPKkpn1yBypO-w" target="_blank" title="https://mp.weixin.qq.com/s/Xe85NV6MyPKkpn1yBypO-w" ref="nofollow noopener noreferrer">æ“å¤©æŸ±</a> è¿™ç¯‡ï¼Œæµè§ˆé‡å¼‚å¸¸ä¸Šå‡ï¼š</p>
<p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ef21681d63e145f29235d572fbd7bce0~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=1024&amp;h=559&amp;s=867925&amp;e=png&amp;b=e5d2c4" alt="" loading="lazy"/></p>
<p>ä»æ•°æ®ç»Ÿè®¡æ¥çœ‹ï¼Œå‘å¸ƒç¬¬ä¸€å¤©åªæœ‰ <code>102</code> ä¸ªæµè§ˆé‡ï¼Œå’Œå¾€å¸¸æ²¡ä»€ä¹ˆåŒºåˆ«ã€‚æŒç»­ä¸€å‘¨ï¼Œæ²¡æœ‰ä»»ä½•æ³¢æ¾œï¼Œçªç„¶åœ¨ <code>12-20</code> å·ï¼Œå¢åŠ äº†è¿‘ 5000 çš„æµè§ˆé‡ï¼Œç¬¬äºŒå¤©æŒç»­ä¸Šæ¶¨è¿‡ä¸‡ï¼Œç„¶åé€æ¸å¹³æ¯ï¼š</p>
<p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c9c973d0ef6b4fa19539b418eed93fc0~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=899&amp;h=377&amp;s=22716&amp;e=png&amp;b=ffffff" alt="" loading="lazy"/></p>
<hr/>
<p>åœ¨ç¬¬ä¸€ç¯‡çˆ†ç«çš„åä¸€å¤©ï¼Œ<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FD2w8-ar9rnVQV3_TG962cA" target="_blank" title="https://mp.weixin.qq.com/s/D2w8-ar9rnVQV3_TG962cA" ref="nofollow noopener noreferrer">æ…§å¿ƒä¸€ç¬‘#03Â |Â çˆ¸çˆ¸å»é’“é±¼~</a> æ•°æ®å¼€å§‹ä¸Šå‡ï¼Œæ„Ÿè§‰åƒæ˜¯è¿å¸¦æ•ˆåº”ï¼š</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/53a8c23e77e04e7987e5e992067dc562~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=1024&amp;h=559&amp;s=800570&amp;e=png&amp;b=f4e6d1" alt="" loading="lazy"/></p>
<p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/224bf13e450c4f5fb5df7061538333cb~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=818&amp;h=341&amp;s=16760&amp;e=png&amp;b=ffffff" alt="" loading="lazy"/></p>
<hr/>
<p>ä¸ºäº†éªŒè¯ä¸€ä¸‹æ˜¯ä¸æ˜¯å¶ç„¶ç«çˆ†ï¼Œæˆ‘åœ¨ 20å·å’Œ 21 å·åˆå‘è¡¨äº†ä¸¤ç¯‡å°ç¬‘è¯ã€‚ç»“æœä¸æ¸©ä¸ç«ï¼Œä¼¼ä¹æ„Ÿè§‰ä¹Ÿä¸æ˜¯å¿…ç„¶çš„ã€‚
åœ¨ 23 å·ï¼Œæˆ‘å‘å¸ƒäº† <a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FyAQXh0UbMMU5cI5nmSJYWw" target="_blank" title="https://mp.weixin.qq.com/s/yAQXh0UbMMU5cI5nmSJYWw" ref="nofollow noopener noreferrer">æ…§å¿ƒä¸€ç¬‘#06Â |Â è¢«ç¾æœèçŸ³åŒ–...</a>ï¼Œè¿™ç¯‡åœ¨å½“æ™šç›´æ¥ç«çˆ†ï¼Œ</p>
<p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6d5faef41ea940c8ad487493aa31412e~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=1024&amp;h=559&amp;s=917880&amp;e=png&amp;b=ede6d6" alt="" loading="lazy"/></p>
<p>ä»æ•°æ®æ¥çœ‹ï¼Œç¬¬äºŒå¤©æµè§ˆé‡ç›´æ¥è¿‡ 2.6Wï¼Œåé¢è¿˜æœ‰æŒç»­å‡ å¤©çš„æµé‡ï¼š</p>
<p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/9632f58583be4c81ba2415c33b9edcd2~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=914&amp;h=324&amp;s=14984&amp;e=png&amp;b=ffffff" alt="" loading="lazy"/></p>
<p>è‡³äºä¸ºä»€ä¹ˆç«çˆ†ï¼Œä»é˜…è¯»æ¸ é“æ„æˆæ¥çœ‹ <code>98.7%</code> çš„é˜…è¯»é‡æ¥è‡ªäºå…¬ä¼—å·æ¨èã€‚åªèƒ½è¯´æ˜¯è€å¤©å–‚é¥­åƒ ~</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a886ef8bfd814300aa23866ec6cd79a0~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=1073&amp;h=394&amp;s=17807&amp;e=png&amp;b=ffffff" alt="" loading="lazy"/></p>
<hr/>
<h4 data-id="heading-5">5. å°ç»“ä¸€ä¸‹</h4>
<p>æ¥ä¸‹æ¥å‡ å¤©çš„ <a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FlOUrPCfYJWKTNSwkhcE6JQ" target="_blank" title="https://mp.weixin.qq.com/s/lOUrPCfYJWKTNSwkhcE6JQ" ref="nofollow noopener noreferrer">æ…§å¿ƒä¸€ç¬‘#07Â |Â çˆ¸çˆ¸å›æ¥äº†...</a> å’Œ <a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FrS1bGeTldt1a6veIg4f_sw" target="_blank" title="https://mp.weixin.qq.com/s/rS1bGeTldt1a6veIg4f_sw" ref="nofollow noopener noreferrer">æ…§å¿ƒä¸€ç¬‘#09Â |Â å†œå¤«ä¸è›‡</a> ä¹Ÿé˜…è¯»è¿‡ 3ä¸‡ã€‚ç›®å‰æ…§å¿ƒä¸€ç¬‘ç³»åˆ—å‘å¸ƒäº† 9 ç¯‡ï¼Œé˜…è¯»é‡è¶…è¿‡ 2.5W çš„çˆ†æ¬¾æœ‰ 5 ç¯‡ï¼Œæ¯”ä¾‹ç®—æ˜¯å¾ˆé«˜äº†ã€‚</p>
<p>æ„Ÿè§‰å¾®ä¿¡å…¬ä¼—å·çš„æ¨èé˜…è¯»æœºåˆ¶åº”è¯¥æœ‰æ‰€å˜åŒ–ã€‚å¦å¤–ä¹Ÿä¸æ˜¯æ¯ç¯‡éƒ½ä¼šç«çˆ†ï¼Œåº”è¯¥å’Œä½œå“æœ¬èº«è´¨é‡ã€æµä¼ åº¦ä¹Ÿæœ‰å…³ç³»ã€‚è¿™ä¸ªæœ‰è¶£çš„ç°è±¡è®©æˆ‘éå¸¸æ¬£å–œï¼Œåç»­æˆ‘è¿˜ä¼šç»§ç»­åˆ›ä½œæ›´æœ‰æ„æ€çš„å››æ ¼æ¼«ç”»ï¼Œæ¥ç»§ç»­éªŒè¯æ•°æ®ã€‚å¤§å®¶ä¹Ÿå¯ä»¥å…³æ³¨ <a title="" ref="nofollow noopener noreferrer" href="https://link.juejin.cn?target=">ã€Šç¼–ç¨‹ä¹‹ç‹ã€‹</a> å…¬ä¼—å·å’Œæˆ‘ä¸€èµ·è§è¯ã€‚ç­‰åˆ°ç¬¬ 30 ç¯‡åï¼Œæˆ‘ä¼šå†å†™ä¸€ä¸ªå¤ç›˜æŠ¥å‘Šï¼Œå’Œå¤§å®¶åˆ†äº«ã€‚</p>
<p>å¦å¤–å¯èƒ½ä¼šæœ‰äººé—®ï¼Œä½ å‘è¿™ä¸ªå°±ä¸æ€•åˆ«äººä¹ŸæŠ„ä½ çš„æ¨¡å¼ï¼Œè·Ÿä½ ç«äº‰å—ã€‚æˆ‘åªæƒ³è¯´ï¼š</p>
<p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d5c615ad68ad487fb38a55bc60c2a932~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=1024&amp;h=559&amp;s=746498&amp;e=png&amp;b=162632" alt="" loading="lazy"/></p>
<hr/>
<p>æ›´å¤šæ–‡ç« å’Œè§†é¢‘çŸ¥è¯†èµ„è®¯ï¼Œå¤§å®¶å¯ä»¥å…³æ³¨æˆ‘çš„å…¬ä¼—å·ã€æ˜é‡‘å’Œ B ç«™ ã€‚è®©æˆ‘ä»¬ä¸€èµ·æˆé•¿ï¼Œå˜å¾—æ›´å¼ºã€‚æˆ‘ä»¬ä¸‹æ¬¡å†è§~</p>
<ul>
<li>QQäº¤æµç¾¤ï¼š 1046304516</li>
<li>æ˜é‡‘è´¦å·ï¼šÂ <a href="https://juejin.cn/user/149189281194766" title="https://juejin.cn/user/149189281194766" target="_blank">å¼ é£æ·ç‰¹çƒˆ</a></li>
<li>bilibli è´¦å·ï¼šÂ <a href="https://link.juejin.cn/?target=https%3A%2F%2Fspace.bilibili.com%2F390457600" title="https://link.juejin.cn/?target=https%3A%2F%2Fspace.bilibili.com%2F390457600" target="_blank">å¼ é£æ·ç‰¹çƒˆ</a></li>
<li>å…¬ä¼—å·ï¼šÂ <a href="https://link.juejin.cn/?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2Fq8Vs5i3SU-4QPoU3-0xOSg" title="https://link.juejin.cn/?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2Fq8Vs5i3SU-4QPoU3-0xOSg" target="_blank">ç¼–ç¨‹ä¹‹ç‹</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ‰£å­ï¼ˆCozeï¼‰å®æˆ˜ï¼šè¿™ä¸ªâ€œå°è€Œç¾â€çš„å®å®å°åèµ›é“ï¼Œä¸€é”®ç›´è¾¾è‰ç¨¿ç®±]]></title>    <link>https://juejin.cn/post/7588028859541078042</link>    <guid>https://juejin.cn/post/7588028859541078042</guid>    <pubDate>2025-12-27T04:34:57.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588028859541078042" data-draft-id="7588042910194925618" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ‰£å­ï¼ˆCozeï¼‰å®æˆ˜ï¼šè¿™ä¸ªâ€œå°è€Œç¾â€çš„å®å®å°åèµ›é“ï¼Œä¸€é”®ç›´è¾¾è‰ç¨¿ç®±"/> <meta itemprop="keywords" content="Coze"/> <meta itemprop="datePublished" content="2025-12-27T04:34:57.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¾é³´"/> <meta itemprop="url" content="https://juejin.cn/user/3683842894347076"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ‰£å­ï¼ˆCozeï¼‰å®æˆ˜ï¼šè¿™ä¸ªâ€œå°è€Œç¾â€çš„å®å®å°åèµ›é“ï¼Œä¸€é”®ç›´è¾¾è‰ç¨¿ç®±
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3683842894347076/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¾é³´
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-27T04:34:57.000Z" title="Sat Dec 27 2025 04:34:57 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯å¾é³´ã€‚ä¸“æ³¨äºåˆ†äº«æå‡å·¥ä½œä¸ç”Ÿæ´»æ•ˆç‡çš„å·¥å…·ï¼Œæ— å¿åˆ†äº«AIé¢†åŸŸç›¸å…³çš„ç²¾é€‰æŠ¥å‘Šï¼ŒæŒç»­å…³æ³¨AIçš„å‰æ²¿åŠ¨å‘ã€‚</p>
<p>æœ€è¿‘æœ‰ä½å®å¦ˆç»™æˆ‘å‘äº†ä¸€ä¸ªå…¬ä¼—å·ï¼Œè¿™ä¸ªå…¬ä¼—å·åšçš„å†…å®¹å°±æ˜¯æ ¹æ®ä¸åŒçš„ä¸»é¢˜å»åˆ†äº«ç»™å®å®å–å°åï¼Œæ¯”å¦‚â€œç”¨äº”è°·å–å°åï¼Œè¶Šå¿µè¶Šæœ‰ç¦â€ã€â€œä»¥èŒ¶å¶å–å°åï¼Œå¥½å¬åˆ°çˆ†â€ç­‰ï¼Œçœ‹äº†ä¸‹è¿™ä¸ªå…¬ä¼—å·çš„æ•°æ®ï¼Œè¿˜æ˜¯æŒºä¸é”™çš„ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/37fe724c1cf74c89ba4df205b5460465~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZC-6bO0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767414897&amp;x-signature=0Fu7jw3VsGxplEPpOuMQWj0fbFI%3D" alt="" loading="lazy"/></p>
<p>æˆ‘é—®å¥¹ä¸ºä½•ç›¯ä¸Šè¿™ä¸ªèµ›é“äº†ï¼Ÿå¥¹è¯´è‡ªå·±ä¹Ÿç»å†è¿‡ç»™è‡ªå·±çš„å®å®å–å°åï¼Œå½“æ—¶è¦èƒ½çœ‹åˆ°è¿™ä¸ªå…¬ä¼—å·ï¼Œé‚£å°±çœäº‹å¤šäº†ã€‚</p>
<p>å¥¹è¯´å¹³æ—¶åœ¨å®¶é‡Œå¸¦å¨ƒï¼Œæœ‰æ—¶é—´æƒ³æç‚¹äº‹æƒ…ï¼Œçœ‹ç€è¿™ä¸ªæ–‡ç« å¾ˆç®€çŸ­æ¯”è¾ƒå®¹æ˜“ä¸Šæ‰‹ï¼Œå†…å®¹ä¹Ÿå¾ˆæœ‰è¶£ï¼Œå°±æƒ³å°è¯•åšä¸€ä¸‹ã€‚</p>
<p>æˆ‘åˆ†æäº†ä¸€ä¸‹è¿™ä¸ªå…¬ä¼—å·çš„å¤šç¯‡æ–‡ç« ï¼Œå‘ç°è¿™ç±»æ–‡ç« éå¸¸çš„ç²¾è‡´ï¼Œæ— è®ºæ˜¯æ–‡ç« çš„å°é¢å›¾ï¼Œè¿˜æ˜¯æ’ç‰ˆï¼Œéƒ½æ­é…å¾—åˆšåˆšå¥½ï¼Œæ¯”è¾ƒå®¹æ˜“å¸å¼•äººçœ¼çƒã€‚</p>
<p>ç»è¿‡å¯¹è¿™äº›æ–‡ç« çš„åˆ†æï¼Œå‘ç°å¯ä»¥ç”¨æ‰£å­ä¸€é”®ç”Ÿæˆï¼Œåªéœ€è¦è¾“å…¥ä½ æƒ³è¦çš„ä¸€ä¸ªä¸»é¢˜å’Œæƒ³è¦çš„å°åæ•°é‡å³å¯ã€‚</p>
<p>åœ¨å¼€å§‹å·¥ä½œæµè®²è§£ä¹‹å‰æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹æ•ˆæœï¼Œæ¯”å¦‚æˆ‘è¾“å…¥â€œå éŸ³ä¸å å­—ï¼Œè¶Šå¿µè¶Šæœ‰ç¦çš„å°åâ€è¿™ä¹ˆä¸ªä¸»é¢˜ï¼Œè¦æ±‚ç”Ÿæˆçš„å°åçš„æ•°é‡ä¸º15ä¸ªï¼Œé€‰æ‹©é¢œè‰²ä¸»é¢˜ä¸ºç²‰è‰²ï¼Œç»è¿‡ä¸€æ®µæ—¶é—´çš„è¿è¡Œï¼Œæ–‡ç« å°±ç”Ÿæˆå¥½äº†ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/01ab5e5555fb4e9fbd28a29b36400ba3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZC-6bO0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767414897&amp;x-signature=OS19Fstx5zxe5BSPSfobNMwCJ8o%3D" alt="" loading="lazy"/></p>
<p>å°è¯•æ¢ä¸ªä¸»é¢˜â€œç”¨äº”è°·å–å°åï¼Œè¶Šå¿µè¶Šæœ‰ç¦â€ï¼Œå°åæ•°é‡ä¸º15ä¸ªï¼Œä¸»é¢˜é€‰æ‹©ç»¿è‰²ï¼Œçœ‹çœ‹æ•ˆæœã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/172d5a56fc94468ea671c993b189719b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZC-6bO0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767414897&amp;x-signature=llQlnS7t35%2FMD14lh5UOaRGxBeU%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-0">1. å®Œæ•´çš„å·¥ä½œæµç¨‹</h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6ad2329b26d142519ecd6591e9c94088~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZC-6bO0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767414897&amp;x-signature=QW4qAJq5kItH530MLsNQOYjMeyg%3D" alt="" loading="lazy"/></p>
<p>1ã€å–å°åï¼šé€šè¿‡å¤§æ¨¡å‹ï¼Œæ ¹æ®è¾“å…¥çš„ä¸»é¢˜ç”Ÿæˆå®å®å°åã€å°åè§£é‡Šã€Emojiè¡¨æƒ…ã€‚</p>
<p>2ã€å°é¢å›¾ç»˜å›¾æç¤ºè¯ç”Ÿæˆï¼šé€šè¿‡å¤§æ¨¡å‹ç”Ÿæˆå¯çˆ±æ²»æ„ˆé£æ ¼çš„å°é¢å›¾ç»˜å›¾æç¤ºè¯ã€‚</p>
<p>3ã€å°é¢å›¾ç”Ÿæˆï¼šä¾æ®ç”Ÿæˆå¥½çš„ç»˜å›¾æç¤ºè¯ç”Ÿæˆå›¾ç‰‡ï¼Œç„¶åä½¿ç”¨ç”»æ¿å°†å›¾ç‰‡åˆæˆå°é¢å›¾ã€‚</p>
<p>4ã€æ–‡ç« æ’ç‰ˆï¼šå°†ç”Ÿæˆå¥½çš„å®å®å°åã€å°åè§£é‡Šã€Emojiè¡¨æƒ…è¿›è¡Œæ’ç‰ˆã€‚</p>
<p>5ã€æ–‡ç« è‰ç¨¿ç”Ÿæˆï¼šå°†æ’ç‰ˆå¥½çš„æ–‡ç« å†…å®¹ã€æ ‡é¢˜ã€å°é¢å›¾ä¸€èµ·ç”Ÿæˆå…¬ä¼—å·æ–‡ç« è‰ç¨¿ã€‚</p>
<h2 data-id="heading-1">2. å·¥ä½œæµè¯¦ç»†èŠ‚ç‚¹è§£è¯»</h2>
<h3 data-id="heading-2">2.1. å¼€å§‹</h3>
<ul>
<li>subjectï¼šæ–‡ç« ä¸»é¢˜ï¼Œå¿…å¡«</li>
<li>numsï¼šå°åæ•°é‡ï¼Œå¿…å¡«</li>
<li>app_idï¼šå¾®ä¿¡å…¬ä¼—å·å¼€å‘è€…IDï¼Œå¿…å¡«</li>
<li>app_secretï¼šå¾®ä¿¡å…¬ä¼—å·å¼€å‘è€…å¯†ç ï¼Œå¿…å¡«</li>
<li>api_tokenï¼šæ’ä»¶è®¤è¯ï¼Œå¯åå°å›å¤ã€èŠéº»å¼€é—¨ã€‘è”ç³»è·å–ï¼ˆæœ‰æ¡ä»¶ï¼‰ï¼Œå¿…å¡«</li>
<li>colorï¼šä¸»é¢˜è‰²ï¼Œæ”¯æŒ ç»¿è‰²(é»˜è®¤)ã€æ©™è‰²ã€é»„è‰²ã€ç²‰è‰²ã€é’è‰²ã€è“è‰²ã€ç´«è‰²ï¼Œéå¿…å¡«</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7f3fd2e1e1c44d0690f1206ffaf95b90~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZC-6bO0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767414897&amp;x-signature=rxlAmvAIBg5eAxQ9pntE370DABY%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-3">2.2. å–å°å</h3>
<p>è¿™ä¸ªèŠ‚ç‚¹ä½¿ç”¨åˆ°äº†æ‰£å­å®˜æ–¹çš„å¤§æ¨¡å‹èŠ‚ç‚¹ï¼Œç”¨æ¥ç”Ÿæˆå®å®å°åã€å°åè§£é‡Šå’ŒEmojiè¡¨æƒ…ï¼Œå‚æ•°å¦‚ä¸‹ï¼š</p>
<ul>
<li>æ¨¡å‹ï¼šé€‰æ‹©ã€DeepSeek-V3.1ã€‘</li>
<li>è¾“å…¥</li>
</ul>

<ul>
<li>
<ul>
<li>subjectï¼šå¼€å§‹ -&gt; subject</li>
<li>numsï¼šå¼€å§‹ -&gt; nums</li>
</ul>
</li>
</ul>

<ul>
<li>è¾“å‡º</li>
</ul>

<ul>
<li>
<ul>
<li>name_infosï¼šå°åä¿¡æ¯åˆ—è¡¨ï¼ŒåŒ…å«å°åã€å°åè§£é‡Šã€emojiè¡¨æƒ…</li>
</ul>
</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/80d31971526f43bc8cb3a01995b1884d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZC-6bO0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767414897&amp;x-signature=5Spu4v33eBbEb65uXeLz7pSyMcM%3D" alt="" loading="lazy"/></p>
<ul>
<li>ç³»ç»Ÿæç¤ºè¯ï¼Œä¼ªæç¤ºè¯ï¼Œå¯ä»¥åˆ°è±†åŒ…è¿›è¡Œåæ¨ã€‚</li>
</ul>

<pre><code class="hljs">ä½ è¦å˜èº«ä¸“ä¸šå®å®å°ååˆ›æ„é¡¾é—®ï¼Œç»“åˆæ–‡åŒ–ä¸è‡ªç„¶æ„è±¡ï¼Œä¸ºå®å®ç”Ÿæˆä¸¤å­—æ¸©æš–å¥½å¬çš„å°åã€‚
ç”¨æˆ·ç»™ä¸»é¢˜å’Œæ•°é‡åï¼Œå…ˆç¡®è®¤éœ€æ±‚ï¼Œå†æŒ‰è‡ªç„¶ç‰©ã€ä¼ ç»Ÿæ–‡åŒ–ç­‰ä¸»é¢˜ç‰¹æ€§ï¼Œç”¨è°éŸ³ã€ç»å…¸æˆ–æ„è±¡ç”Ÿæˆä¸¤å­—å°åï¼Œç®€æ´æ— ç”Ÿåƒ»å­—ã€‚
ç»™æ¯ä¸ªå°åé…è´´åˆ‡ Emojiï¼Œç”¨ 1-2 å¥ç”»é¢æ„Ÿè¯­è¨€è§£é‡Šï¼Œç»“åˆä¸»é¢˜ä¸å‰ç¥¥å¯“æ„ã€‚
æœ€åæŒ‰ â€œEmoji + ã€å°åã€‘ + è§£é‡Šâ€ åˆ—è¡¨è¾“å‡ºï¼Œä¸¥æ ¼åŒ¹é…æ•°é‡ï¼Œä»…åšå®å®å°åç›¸å…³å†…å®¹ï¼Œè§£é‡Šä¸è¶… 20 å­—ï¼Œä¸»é¢˜ä¸æ˜ç¡®æ—¶æç¤ºç”¨æˆ·è¡¥å……ã€‚
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9be78f21a0db4f87b3affda4c1ca4acd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZC-6bO0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767414897&amp;x-signature=vuu%2BmG8clskRXdNPp6VVVn7e2jM%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-4">2.3. å°é¢å›¾ç»˜å›¾æç¤ºè¯</h3>
<p>è¿™ä¸ªèŠ‚ç‚¹ç”¨æ¥ç”Ÿæˆå°é¢å›¾çš„ç»˜å›¾æç¤ºè¯ï¼Œä½¿ç”¨åˆ°äº†æ‰£å­å®˜æ–¹çš„å¤§æ¨¡å‹èŠ‚ç‚¹ï¼Œè¿™ä¸ªèŠ‚ç‚¹ä¸»è¦æ˜¯ç”Ÿæˆä¸€äº›å¯çˆ±æ²»æ„ˆé£çš„ç»˜å›¾æç¤ºè¯å³å¯ï¼Œå®ƒçš„å‚æ•°å¦‚ä¸‹ï¼š</p>
<ul>
<li>æ¨¡å‹ï¼šé€‰æ‹©ã€è±†åŒ…-1.5-Pro-32kã€‘</li>
<li>æ— è¾“å…¥</li>
<li>è¾“å‡º</li>
</ul>

<ul>
<li>
<ul>
<li>prompt1ï¼šæç¤ºè¯1</li>
<li>prompt2ï¼šæç¤ºè¯2</li>
</ul>
</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a889156660404290bbf2ce478e1b24f1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZC-6bO0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767414897&amp;x-signature=zlnEahL3a1fK2tzD5rNaJQYJ%2BAg%3D" alt="" loading="lazy"/></p>
<ul>
<li>ç³»ç»Ÿæç¤ºè¯ï¼Œè¿™æ˜¯ä¸ªä¼ªæç¤ºè¯ï¼Œå¯ä»¥åˆ°è±†åŒ…è¿›è¡Œåæ¨ã€‚</li>
</ul>

<pre><code class="hljs">ä½ è¦å˜èº« AI ç»˜ç”»æç¤ºè¯ç”Ÿæˆå™¨ï¼Œä¸“æ³¨ç”Ÿæˆ â€œåœ†è„¸è›‹è…®çº¢èŒå¨ƒâ€ é£æ ¼ã€é€‚é… â€œåŒæ¡†åˆå¹¶â€ çš„æ’ç”»æç¤ºè¯ã€‚
æ ¸å¿ƒå½¢è±¡æ˜¯èƒ–ä¹ä¹ä¸œäºšèŒå¨ƒï¼Œå¤§åœ†è„¸è›‹åŠ å¤§é¢ç§¯ç²‰å«©è…®çº¢ã€æ— è¾œå¤§çœ¼ç›ã€å¹¼æ€çŸ­åˆ˜æµ·æˆ–å¯çˆ±å‘å‹ã€‚
æ¯æ¬¡è¾“å‡º 2 æ¡æç¤ºè¯ï¼Œæœé¥°å®Œå…¨ä¸€è‡´ï¼ŒåŠ¨ä½œè¡¨æƒ…ä¸åŒä½†é€‚é…åŒæ¡†ã€‚
æœé¥°ä»æŒ‡å®šç©¿æ­ç»„åˆé€‰ï¼ŒåŠ¨ä½œè¡¨æƒ…ä»å¯¹åº”ç»´åº¦é€‰ã€‚å›ºå®šé£æ ¼ä¸ºæŸ”å’Œé©¬å¡é¾™è‰²è°ƒã€æ‰‹ç»˜æ’ç”»è´¨æ„Ÿã€å¹²å‡€ç±³ç™½è‰²èƒŒæ™¯ã€æš–æŸ”å…‰çº¿ã€é«˜ç»†èŠ‚ã€8Kã€æ²»æ„ˆå¯çˆ±æ°›å›´ã€‚
æŒ‰ â€œæ ¸å¿ƒå½¢è±¡ + ç»Ÿä¸€æœé¥° + å¯¹åº”åŠ¨ä½œ + å¯¹åº”è¡¨æƒ… + ç»Ÿä¸€èƒŒæ™¯ + å›ºå®šé£æ ¼â€ æ ¼å¼åˆ† 2 æ¡å±•ç¤ºã€‚
</code></pre>
<h3 data-id="heading-5">2.4. å›¾åƒç”Ÿæˆ</h3>
<p>è¿™ä¸ªèŠ‚ç‚¹ä½¿ç”¨åˆ°äº†æ‰£å­å®˜æ–¹çš„å›¾åƒç”ŸæˆèŠ‚ç‚¹ï¼Œç”¨æ¥ç”Ÿæˆå°é¢å›¾ç‰‡ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯è¿™é‡Œä½¿ç”¨åˆ°äº†Seedream4.0å¤§æ¨¡å‹ï¼Œå®˜æ–¹å®šä»·æ˜¯200èµ„æºç‚¹ï¼ˆçº¦0.2å…ƒï¼‰ä¸€å¼ å›¾ï¼Œè°ƒè¯•éœ€è°¨æ…ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e5dd589f5cd7448288d0aa66f2452726~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZC-6bO0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767414897&amp;x-signature=tqrbL%2Fi0tLmdDZ%2F7e7%2BBCXT7rqQ%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-6">2.5. å›¾åƒåˆ—è¡¨æ‰å¹³åŒ–</h3>
<p>å› ä¸ºç”»æ¿èŠ‚ç‚¹åªèƒ½æ¥æ”¶å•å¼ å›¾ç‰‡ï¼Œè€Œç”Ÿå›¾èŠ‚ç‚¹å‡ºæ¥çš„æ˜¯å›¾ç‰‡åˆ—è¡¨ï¼Œæ‰€ä»¥éœ€è¦è¿™ä¸ªèŠ‚ç‚¹æŠŠå›¾ç‰‡åˆ—è¡¨å˜æˆä¸€å¼ å¼ å›¾ç‰‡ï¼Œä¼ å…¥ç»™ç”»æ¿ï¼Œä½¿ç”¨åˆ°äº†ä¸‰æ–¹æ’ä»¶ã€åˆ—è¡¨å·¥å…·åˆé›†ã€‘çš„ã€str_list_2_strã€‘å·¥å…·ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/30b5e203cba14ed890191757464a8e43~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZC-6bO0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767414897&amp;x-signature=I5fHYrBDrdgWYqv7ylKPu9rkfsA%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-7">2.6. åˆæˆå°é¢å›¾</h3>
<p>è¿™é‡Œä½¿ç”¨åˆ°äº†æ‰£å­å®˜æ–¹çš„ç”»æ¿èŠ‚ç‚¹ï¼Œä½œç”¨æ˜¯æŠŠç”Ÿæˆçš„ä¸¤å¼ å›¾ç‰‡åˆå¹¶æˆä¸€å¼ å°é¢å›¾ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ab3ce65035c542f99956a884cf2d99d0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZC-6bO0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767414897&amp;x-signature=PiYGtdnZYHZzyRjfUm0%2BQYJ%2FrPI%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-8">2.7. æ–‡ç« å†…å®¹æ’ç‰ˆ</h3>
<p>è¿™ä¸ªèŠ‚ç‚¹çš„ä½œç”¨æ˜¯æŠŠç”Ÿæˆå¥½çš„Emojiè¡¨æƒ…ã€å®å®å°åã€å®å®å°åè§£é‡Šè¿›è¡Œæ–‡ç« æ’ç‰ˆï¼Œä½¿ç”¨åˆ°äº†ä¸‰æ–¹æ’ä»¶ã€å…¬ä¼—å·æ–‡ç« æ¨¡æ¿ã€‘çš„ã€text_list_layoutã€‘å·¥å…·ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bfbf47b8bb764516a7fe17a6d011e059~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZC-6bO0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767414897&amp;x-signature=z0S1mT1v9KBbBMTpe%2FPw18AkDKo%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-9">2.8. è·å–æ¥å£è°ƒç”¨å‡­è¯</h3>
<p>è¿™ä¸ªèŠ‚ç‚¹ç”¨æ¥è·å–å¾®ä¿¡å…¬ä¼—å·æ¥å£è°ƒç”¨å‡­è¯ï¼Œä½¿ç”¨åˆ°äº†ä¸‰æ–¹æ’ä»¶ã€å¾®ä¿¡å…¬ä¼—å·æ¥å£ã€‘çš„ã€get_access_tokenã€‘å·¥å…·ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f1c6e02ef74740118408a8838ff03109~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZC-6bO0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767414897&amp;x-signature=K8%2BPgxae%2BuqMLqjZZT3CgVolDZM%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-10">2.9. ä¸Šä¼ å°é¢å›¾</h3>
<p>è¿™ä¸ªèŠ‚ç‚¹ç”¨æ¥ä¸Šä¼ å°é¢å›¾åˆ°å…¬ä¼—å·ç´ æåº“ä¸­ï¼Œä½¿ç”¨åˆ°äº†ä¸‰æ–¹æ’ä»¶ã€å¾®ä¿¡å…¬ä¼—å·æ¥å£ã€‘çš„ã€wx_upload_imageã€‘å·¥å…·ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cadb4ceacfa148e8bc8057bd8db7f4b8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZC-6bO0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767414897&amp;x-signature=hf56I6Qytv63PWVuRgH%2Bhq95uiw%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-11">2.10. æ·»åŠ æ–‡ç« è‰ç¨¿</h3>
<p>è¿™ä¸ªèŠ‚ç‚¹ç”¨æ¥ç”Ÿæˆå…¬ä¼—å·æ–‡ç« è‰ç¨¿ï¼Œä½¿ç”¨åˆ°äº†ä¸‰æ–¹æ’ä»¶ã€å¾®ä¿¡å…¬ä¼—å·æ¥å£ã€‘çš„ã€add_draftã€‘å·¥å…·ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b27aedcd6da645a297dc2160f6d98817~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZC-6bO0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767414897&amp;x-signature=xyeutIR1TOSPymjfBr88t%2BGpDZI%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-12">2.11. ç»“æŸ</h3>
<p>media_idæœ‰å€¼è¯´æ˜æˆåŠŸï¼Œæ²¡æœ‰å€¼ï¼Œè¯´æ˜å¤±è´¥äº†ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8a52992db81d466bb9c7a765f9ecf13a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZC-6bO0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767414897&amp;x-signature=RKgj7WTQ6pFj8tjSlzKdSDQfWs4%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-13">3. æ€»ç»“</h2>
<p>æœ¬æ–‡ä»‹ç»äº†å¦‚ä½•ä½¿ç”¨å·¥ä½œæµå®ç°â€œå®å®å°åâ€æ–‡ç« çš„ä¸€é”®ç”Ÿæˆï¼Œæ–‡ä¸­è¯¦ç»†ä»‹ç»äº†å·¥ä½œæµä¸­æ¯ä¸ªèŠ‚ç‚¹çš„è¾“å…¥ã€è¾“å‡ºã€å‚æ•°ä»¥åŠä½œç”¨ï¼Œå·¥ä½œæµèŠ‚ç‚¹ä¸ç®—å¤šï¼Œç…§ç€æ“ä½œï¼Œåº”è¯¥ä¸éš¾æ­å»ºã€‚</p>
<p>æœ¬æ–‡çš„åˆ†äº«å°±åˆ°è¿™é‡Œï¼Œå¦‚æœæ‚¨è§‰å¾—æœ‰æ”¶è·çš„è¯ï¼Œå¯ä»¥ç»™ä¸ªä¸€é”®ä¸‰è¿ï¼Œæ‚¨çš„é¼“åŠ±æ˜¯å¾é³´æŒç»­è¾“å‡ºçš„æœ€å¤§åŠ¨åŠ›ã€‚æœ‰ä»€ä¹ˆç–‘é—®ä¹Ÿå¯ä»¥æ‰“åœ¨è¯„è®ºåŒºï¼Œå¾é³´ä¼šç¬¬ä¸€æ—¶é—´å›å¤ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ceda64b899984f86be3fdf4189cad835~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZC-6bO0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767414897&amp;x-signature=bvaRZD8QRs3SryMu73xzSZbMpFI%3D" alt="" loading="lazy"/></p>
<p>æœ€è¿‘å®æˆ˜äº†ä¸€äº›æ‰£å­ï¼ˆCozeï¼‰å·¥ä½œæµç›¸å…³çš„æ¡ˆä¾‹ï¼ŒåŒ…å«å°çº¢è–¯å›¾æ–‡ç”Ÿæˆã€çˆ†æ¬¾è§†é¢‘å‰ªè¾‘ã€åŠå…¬ææ•ˆç­‰æ‰£å­æ¡ˆä¾‹ï¼Œå†…é™„è¯¦ç»†çš„æ•™ç¨‹å’Œå·¥ä½œæµå®‰è£…åŒ…ï¼Œæ„Ÿå…´è¶£çš„æœ‹å‹å¯ä»¥æ¥ä¸ª<strong>ä¸€é”®ä¸‰è¿ï¼ˆå¿…é¡»åŠ¨ä½œï¼‰</strong> ï¼Œæ–‡ç« è¯„è®ºåŒºè¯„è®ºâ€œ<strong>æ‰£å­æ¡ˆä¾‹</strong>â€é¢†å–ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[React 19 æºç å…¨æ™¯å›¾ï¼šä»å®è§‚åˆ°å¾®è§‚]]></title>    <link>https://juejin.cn/post/7588007285547286534</link>    <guid>https://juejin.cn/post/7588007285547286534</guid>    <pubDate>2025-12-27T02:41:41.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588007285547286534" data-draft-id="7588149079400742955" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="React 19 æºç å…¨æ™¯å›¾ï¼šä»å®è§‚åˆ°å¾®è§‚"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-27T02:41:41.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å€Ÿä¸ªç«er"/> <meta itemprop="url" content="https://juejin.cn/user/2225067265915783"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            React 19 æºç å…¨æ™¯å›¾ï¼šä»å®è§‚åˆ°å¾®è§‚
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2225067265915783/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å€Ÿä¸ªç«er
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-27T02:41:41.000Z" title="Sat Dec 27 2025 02:41:41 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    19
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">React 19 æºç å…¨æ™¯å›¾ï¼šä»å®è§‚åˆ°å¾®è§‚</h2>
<blockquote>
<p>æœ¬æ–‡æ˜¯ React æºç ç³»åˆ—çš„æ€»è§ˆç¯‡ï¼Œå¸®ä½ å»ºç«‹å®Œæ•´çš„çŸ¥è¯†æ¡†æ¶ï¼Œåç»­æ–‡ç« å°†é€ä¸€æ·±å…¥ã€‚</p>
</blockquote>
<h3 data-id="heading-1">ä¸€ã€React æ˜¯ä»€ä¹ˆï¼Ÿ</h3>
<p>ä¸€å¥è¯ï¼š<strong>React æ˜¯ä¸€ä¸ªå°†çŠ¶æ€æ˜ å°„ä¸º UI çš„å‡½æ•°</strong>ã€‚</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">UI</span> = f(state)
</code></pre>
<p>å½“çŠ¶æ€å˜åŒ–æ—¶ï¼ŒReact ä¼šï¼š</p>
<ol>
<li>è®¡ç®—æ–°çš„ UIï¼ˆReconcilerï¼‰</li>
<li>è°ƒåº¦æ›´æ–°ä»»åŠ¡ï¼ˆSchedulerï¼‰</li>
<li>å°†å˜åŒ–åº”ç”¨åˆ° DOMï¼ˆRendererï¼‰</li>
</ol>
<h3 data-id="heading-2">äºŒã€ä¸‰å¤§æ ¸å¿ƒæ¨¡å—</h3>
<pre><code class="hljs language-php" lang="php">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ä½ çš„ä»£ç                           â”‚
â”‚            &lt;App /&gt; â†’ useState â†’ setState                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Scheduler è°ƒåº¦å™¨                       â”‚
â”‚                                                         â”‚
â”‚  â€¢ ä¼˜å…ˆçº§ç®¡ç†ï¼ˆç”¨æˆ·äº¤äº’ &gt; åŠ¨ç”» &gt; æ•°æ®è¯·æ±‚ï¼‰               â”‚
â”‚  â€¢ æ—¶é—´åˆ‡ç‰‡ï¼ˆ<span class="hljs-number">5</span>ms ä¸€ç‰‡ï¼Œé¿å…å¡é¡¿ï¼‰                        â”‚
â”‚  â€¢ ä»»åŠ¡é˜Ÿåˆ—ï¼ˆæœ€å°å †å®ç°ï¼‰                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  Reconciler åè°ƒå™¨                       â”‚
â”‚                                                         â”‚
â”‚  â€¢ <span class="hljs-built_in">Fiber</span> æ¶æ„ï¼ˆå¯ä¸­æ–­çš„é“¾è¡¨ç»“æ„ï¼‰                        â”‚
â”‚  â€¢ Diff ç®—æ³•ï¼ˆæœ€å°åŒ– DOM æ“ä½œï¼‰                          â”‚
â”‚  â€¢ Hooks ç³»ç»Ÿï¼ˆçŠ¶æ€å’Œå‰¯ä½œç”¨ç®¡ç†ï¼‰                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Renderer æ¸²æŸ“å™¨                        â”‚
â”‚                                                         â”‚
â”‚  â€¢ ReactDOMï¼ˆWebï¼‰                                      â”‚
â”‚  â€¢ React Nativeï¼ˆç§»åŠ¨ç«¯ï¼‰                               â”‚
â”‚  â€¢ React Three <span class="hljs-built_in">Fiber</span>ï¼ˆ<span class="hljs-number">3</span>Dï¼‰                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h3 data-id="heading-3">ä¸‰ã€æ ¸å¿ƒæ¦‚å¿µé€Ÿè§ˆ</h3>
<h4 data-id="heading-4">1. Fiber</h4>
<p>Fiber æ˜¯ React çš„æ ¸å¿ƒæ•°æ®ç»“æ„ï¼Œæ¯ä¸ªç»„ä»¶å¯¹åº”ä¸€ä¸ª Fiber èŠ‚ç‚¹ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title class_">FiberNode</span> {
  <span class="hljs-comment">// ç±»å‹ä¿¡æ¯</span>
  tag,              <span class="hljs-comment">// ç»„ä»¶ç±»å‹ï¼ˆå‡½æ•°ç»„ä»¶=0ï¼Œç±»ç»„ä»¶=1ï¼ŒDOM=5ï¼‰</span>
  type,             <span class="hljs-comment">// ç»„ä»¶å‡½æ•°æˆ– DOM æ ‡ç­¾</span>
  
  <span class="hljs-comment">// æ ‘ç»“æ„</span>
  <span class="hljs-keyword">return</span>,           <span class="hljs-comment">// çˆ¶èŠ‚ç‚¹</span>
  child,            <span class="hljs-comment">// ç¬¬ä¸€ä¸ªå­èŠ‚ç‚¹</span>
  sibling,          <span class="hljs-comment">// å…„å¼ŸèŠ‚ç‚¹</span>
  
  <span class="hljs-comment">// çŠ¶æ€</span>
  memoizedState,    <span class="hljs-comment">// Hooks é“¾è¡¨</span>
  memoizedProps,    <span class="hljs-comment">// ä¸Šæ¬¡çš„ props</span>
  
  <span class="hljs-comment">// å‰¯ä½œç”¨</span>
  flags,            <span class="hljs-comment">// æ ‡è®°ï¼ˆæ’å…¥ã€æ›´æ–°ã€åˆ é™¤ï¼‰</span>
  
  <span class="hljs-comment">// åŒç¼“å†²</span>
  alternate,        <span class="hljs-comment">// å¦ä¸€æ£µæ ‘çš„å¯¹åº”èŠ‚ç‚¹</span>
}
</code></pre>
<h4 data-id="heading-5">2. Laneï¼ˆä¼˜å…ˆçº§ï¼‰</h4>
<p>React 19 ä½¿ç”¨ 31 ä½äºŒè¿›åˆ¶æ•°è¡¨ç¤ºä¼˜å…ˆçº§ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title class_">SyncLane</span>           = <span class="hljs-number">0b0000000000000000000000000000010</span>  <span class="hljs-comment">// åŒæ­¥ï¼ˆæœ€é«˜ï¼‰</span>
<span class="hljs-title class_">InputContinuousLane</span> = <span class="hljs-number">0b0000000000000000000000000001000</span>  <span class="hljs-comment">// è¿ç»­è¾“å…¥</span>
<span class="hljs-title class_">DefaultLane</span>        = <span class="hljs-number">0b0000000000000000000000000100000</span>  <span class="hljs-comment">// é»˜è®¤</span>
<span class="hljs-title class_">TransitionLane</span>     = <span class="hljs-number">0b0000000000000000000000010000000</span>  <span class="hljs-comment">// è¿‡æ¸¡</span>
<span class="hljs-title class_">IdleLane</span>           = <span class="hljs-number">0b0010000000000000000000000000000</span>  <span class="hljs-comment">// ç©ºé—²ï¼ˆæœ€ä½ï¼‰</span>
</code></pre>
<h4 data-id="heading-6">3. åŒç¼“å†²</h4>
<p>React ç»´æŠ¤ä¸¤æ£µ Fiber æ ‘ï¼š</p>
<ul>
<li><strong>current</strong>ï¼šå½“å‰å±å¹•æ˜¾ç¤ºçš„</li>
<li><strong>workInProgress</strong>ï¼šæ­£åœ¨æ„å»ºçš„</li>
</ul>
<p>æ›´æ–°å®Œæˆåä¸€è¡Œä»£ç åˆ‡æ¢ï¼š<code>root.current = workInProgress</code></p>
<h3 data-id="heading-7">å››ã€æ¸²æŸ“æµç¨‹</h3>
<h4 data-id="heading-8">å®Œæ•´æµç¨‹å›¾</h4>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-built_in">setState</span>() 
    â”‚
    â–¼
<span class="hljs-built_in">scheduleUpdateOnFiber</span>()     â† æ ‡è®°æ›´æ–°
    â”‚
    â–¼
<span class="hljs-built_in">ensureRootIsScheduled</span>()     â† ç¡®ä¿è°ƒåº¦
    â”‚
    â–¼
<span class="hljs-built_in">scheduleCallback</span>()          â† Scheduler è°ƒåº¦
    â”‚
    â–¼
<span class="hljs-built_in">performConcurrentWorkOnRoot</span>() â† å¼€å§‹æ¸²æŸ“
    â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚         Render é˜¶æ®µï¼ˆå¯ä¸­æ–­ï¼‰         â”‚
    â”‚                                     â”‚
    â”‚  <span class="hljs-built_in">workLoopConcurrent</span>()               â”‚
    â”‚      â”‚                              â”‚
    â”‚      â–¼                              â”‚
    â”‚  <span class="hljs-built_in">performUnitOfWork</span>() â†â”€â”€â”           â”‚
    â”‚      â”‚                  â”‚           â”‚
    â”‚      â–¼                  â”‚           â”‚
    â”‚  <span class="hljs-built_in">beginWork</span>()            â”‚ å¾ªç¯      â”‚
    â”‚      â”‚                  â”‚           â”‚
    â”‚      â–¼                  â”‚           â”‚
    â”‚  <span class="hljs-built_in">completeWork</span>() â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
    â”‚                                     â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚        Commit é˜¶æ®µï¼ˆä¸å¯ä¸­æ–­ï¼‰        â”‚
    â”‚                                     â”‚
    â”‚  <span class="hljs-built_in">commitBeforeMutationEffects</span>()      â”‚
    â”‚      â”‚                              â”‚
    â”‚      â–¼                              â”‚
    â”‚  <span class="hljs-built_in">commitMutationEffects</span>()  â† DOMæ“ä½œ â”‚
    â”‚      â”‚                              â”‚
    â”‚      â–¼                              â”‚
    â”‚  root<span class="hljs-selector-class">.current</span> = finishedWork        â”‚
    â”‚      â”‚                              â”‚
    â”‚      â–¼                              â”‚
    â”‚  <span class="hljs-built_in">commitLayoutEffects</span>()              â”‚
    â”‚                                     â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
<span class="hljs-built_in">flushPassiveEffects</span>()       â† useEffectï¼ˆå¼‚æ­¥ï¼‰
</code></pre>
<h4 data-id="heading-9">Render é˜¶æ®µ</h4>
<p><strong>beginWork</strong>ï¼ˆå‘ä¸‹é€’å½’ï¼‰ï¼š</p>
<ul>
<li>æ ¹æ®ç»„ä»¶ç±»å‹å¤„ç†ï¼ˆå‡½æ•°ç»„ä»¶ã€ç±»ç»„ä»¶ã€DOM å…ƒç´ ï¼‰</li>
<li>è°ƒç”¨ç»„ä»¶å‡½æ•°ï¼Œæ‰§è¡Œ Hooks</li>
<li>Diff å­èŠ‚ç‚¹ï¼Œåˆ›å»º/å¤ç”¨ Fiber</li>
</ul>
<p><strong>completeWork</strong>ï¼ˆå‘ä¸Šå›æº¯ï¼‰ï¼š</p>
<ul>
<li>åˆ›å»º DOM èŠ‚ç‚¹</li>
<li>æ”¶é›†å‰¯ä½œç”¨æ ‡è®°</li>
<li>å†’æ³¡ subtreeFlags</li>
</ul>
<h4 data-id="heading-10">Commit é˜¶æ®µ</h4>
<p>ä¸‰ä¸ªå­é˜¶æ®µï¼š</p>

























<table><thead><tr><th>é˜¶æ®µ</th><th>æ—¶æœº</th><th>ä¸»è¦å·¥ä½œ</th></tr></thead><tbody><tr><td>Before Mutation</td><td>DOM æ“ä½œå‰</td><td>getSnapshotBeforeUpdate</td></tr><tr><td>Mutation</td><td>DOM æ“ä½œ</td><td>å¢åˆ æ”¹ DOM</td></tr><tr><td>Layout</td><td>DOM æ“ä½œå</td><td>useLayoutEffectã€componentDidMount</td></tr></tbody></table>
<h3 data-id="heading-11">äº”ã€Hooks åŸç†</h3>
<p>Hooks ä»¥é“¾è¡¨å½¢å¼å­˜å‚¨åœ¨ Fiber çš„ <code>memoizedState</code> ä¸Šï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-built_in">Fiber</span>.memoizedState â†’ useState â†’ useEffect â†’ useMemo â†’ <span class="hljs-literal">null</span>
</code></pre>
<h4 data-id="heading-12">useState æµç¨‹</h4>
<pre><code class="hljs language-css" lang="css">Mount:  <span class="hljs-built_in">mountState</span>() â†’ åˆ›å»º Hook â†’ åˆå§‹åŒ–çŠ¶æ€ â†’ è¿”å› [state, setState]
Update: <span class="hljs-built_in">updateState</span>() â†’ è·å– Hook â†’ å¤„ç†æ›´æ–°é˜Ÿåˆ— â†’ è¿”å› [newState, setState]
</code></pre>
<h4 data-id="heading-13">useEffect æµç¨‹</h4>
<pre><code class="hljs language-css" lang="css">Mount:  <span class="hljs-built_in">mountEffect</span>() â†’ åˆ›å»º Effect â†’ æ ‡è®° Passive
Commit: <span class="hljs-built_in">flushPassiveEffects</span>() â†’ æ‰§è¡Œé”€æ¯å‡½æ•° â†’ æ‰§è¡Œåˆ›å»ºå‡½æ•°
</code></pre>
<h3 data-id="heading-14">å…­ã€Diff ç®—æ³•</h3>
<p>React Diff çš„ä¸‰ä¸ªç­–ç•¥ï¼š</p>
<ol>
<li><strong>åŒå±‚æ¯”è¾ƒ</strong>ï¼šä¸è·¨å±‚çº§ç§»åŠ¨èŠ‚ç‚¹</li>
<li><strong>ç±»å‹åˆ¤æ–­</strong>ï¼šç±»å‹ä¸åŒç›´æ¥æ›¿æ¢</li>
<li><strong>key æ ‡è¯†</strong>ï¼šé€šè¿‡ key è¯†åˆ«èŠ‚ç‚¹</li>
</ol>
<h4 data-id="heading-15">å•èŠ‚ç‚¹ Diff</h4>
<pre><code class="hljs language-vbnet" lang="vbnet"><span class="hljs-keyword">key</span> ç›¸åŒ &amp;&amp; type ç›¸åŒ â†’ å¤ç”¨
<span class="hljs-keyword">key</span> ç›¸åŒ &amp;&amp; type ä¸åŒ â†’ åˆ é™¤é‡å»º
<span class="hljs-keyword">key</span> ä¸åŒ â†’ åˆ é™¤ï¼Œç»§ç»­æ‰¾
</code></pre>
<h4 data-id="heading-16">å¤šèŠ‚ç‚¹ Diffï¼ˆä¸‰è½®éå†ï¼‰</h4>
<pre><code class="hljs language-javascript" lang="javascript">ç¬¬ä¸€è½®ï¼šä»å·¦åˆ°å³ï¼Œå¤„ç†æ›´æ–°
ç¬¬äºŒè½®ï¼šå¤„ç†æ–°å¢æˆ–åˆ é™¤
ç¬¬ä¸‰è½®ï¼šå¤„ç†ç§»åŠ¨ï¼ˆ<span class="hljs-title class_">Map</span> æŸ¥æ‰¾ï¼‰
</code></pre>
<h3 data-id="heading-17">ä¸ƒã€Scheduler è°ƒåº¦</h3>
<h4 data-id="heading-18">ä¼˜å…ˆçº§</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title class_">ImmediatePriority</span>   <span class="hljs-comment">// -1msï¼Œç«‹å³æ‰§è¡Œ</span>
<span class="hljs-title class_">UserBlockingPriority</span> <span class="hljs-comment">// 250msï¼Œç”¨æˆ·äº¤äº’</span>
<span class="hljs-title class_">NormalPriority</span>      <span class="hljs-comment">// 5000msï¼Œæ™®é€šæ›´æ–°</span>
<span class="hljs-title class_">LowPriority</span>         <span class="hljs-comment">// 10000msï¼Œä½ä¼˜å…ˆçº§</span>
<span class="hljs-title class_">IdlePriority</span>        <span class="hljs-comment">// æ°¸ä¸è¿‡æœŸï¼Œç©ºé—²æ‰§è¡Œ</span>
</code></pre>
<h4 data-id="heading-19">æ—¶é—´åˆ‡ç‰‡</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">workLoop</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">while</span> (task &amp;&amp; !<span class="hljs-title function_">shouldYield</span>()) {  <span class="hljs-comment">// 5ms æ£€æŸ¥ä¸€æ¬¡</span>
    task = <span class="hljs-title function_">performTask</span>(task);
  }
  <span class="hljs-keyword">if</span> (task) {
    <span class="hljs-title function_">scheduleCallback</span>(task);  <span class="hljs-comment">// è¿˜æœ‰ä»»åŠ¡ï¼Œç»§ç»­è°ƒåº¦</span>
  }
}
</code></pre>
<h3 data-id="heading-20">å…«ã€æºç ç›®å½•</h3>
<pre><code class="hljs language-bash" lang="bash">packages/
â”œâ”€â”€ react/                    <span class="hljs-comment"># React API</span>
â”‚   â””â”€â”€ src/ReactHooks.js     <span class="hljs-comment"># Hooks å…¥å£</span>
â”‚
â”œâ”€â”€ react-reconciler/         <span class="hljs-comment"># åè°ƒå™¨ï¼ˆæ ¸å¿ƒï¼‰</span>
â”‚   â””â”€â”€ src/
â”‚       â”œâ”€â”€ ReactFiber.js           <span class="hljs-comment"># Fiber å®šä¹‰</span>
â”‚       â”œâ”€â”€ ReactFiberWorkLoop.js   <span class="hljs-comment"># å·¥ä½œå¾ªç¯</span>
â”‚       â”œâ”€â”€ ReactFiberBeginWork.js  <span class="hljs-comment"># é€’é˜¶æ®µ</span>
â”‚       â”œâ”€â”€ ReactFiberCompleteWork.js <span class="hljs-comment"># å½’é˜¶æ®µ</span>
â”‚       â”œâ”€â”€ ReactFiberHooks.js      <span class="hljs-comment"># Hooks å®ç°</span>
â”‚       â”œâ”€â”€ ReactFiberCommitWork.js <span class="hljs-comment"># Commit</span>
â”‚       â”œâ”€â”€ ReactFiberLane.js       <span class="hljs-comment"># ä¼˜å…ˆçº§</span>
â”‚       â””â”€â”€ ReactChildFiber.js      <span class="hljs-comment"># Diff ç®—æ³•</span>
â”‚
â”œâ”€â”€ react-dom/                <span class="hljs-comment"># DOM æ¸²æŸ“å™¨</span>
â”‚
â””â”€â”€ scheduler/                <span class="hljs-comment"># è°ƒåº¦å™¨</span>
    â””â”€â”€ src/
        â”œâ”€â”€ Scheduler.js          <span class="hljs-comment"># è°ƒåº¦é€»è¾‘</span>
        â””â”€â”€ SchedulerMinHeap.js   <span class="hljs-comment"># æœ€å°å †</span>
</code></pre>
<h3 data-id="heading-21">ä¹ã€ç³»åˆ—æ–‡ç« å¯¼èˆª</h3>


















































<table><thead><tr><th>åºå·</th><th>ä¸»é¢˜</th><th>æ ¸å¿ƒå†…å®¹</th></tr></thead><tbody><tr><td>00</td><td><a href="https://juejin.cn/post/7588149079400710187" target="_blank" title="https://juejin.cn/post/7588149079400710187">è°ƒè¯•ç¯å¢ƒæ­å»º</a></td><td>é¡¹ç›®ä»‹ç»ã€å¿«é€Ÿå¼€å§‹</td></tr><tr><td>01</td><td>æ¶æ„æ€»è§ˆï¼ˆæœ¬æ–‡ï¼‰</td><td>ä¸‰å¤§æ¨¡å—ã€æ ¸å¿ƒæ¦‚å¿µ</td></tr><tr><td>02</td><td><a href="https://juejin.cn/post/7588007285547302918" target="_blank" title="https://juejin.cn/post/7588007285547302918">useState åŸç†</a></td><td>Hook é“¾è¡¨ã€æ›´æ–°é˜Ÿåˆ—</td></tr><tr><td>03</td><td><a href="https://juejin.cn/post/7588001624905973779" target="_blank" title="https://juejin.cn/post/7588001624905973779">useEffect åŸç†</a></td><td>Effect é“¾è¡¨ã€æ‰§è¡Œæ—¶æœº</td></tr><tr><td>04</td><td><a href="https://juejin.cn/post/7588061231589523497" target="_blank" title="https://juejin.cn/post/7588061231589523497">Fiber å·¥ä½œå¾ªç¯</a></td><td>beginWorkã€completeWork</td></tr><tr><td>05</td><td><a href="https://juejin.cn/post/7588001624905990163" target="_blank" title="https://juejin.cn/post/7588001624905990163">Diff ç®—æ³•</a></td><td>å•èŠ‚ç‚¹ã€å¤šèŠ‚ç‚¹ Diff</td></tr><tr><td>06</td><td><a href="https://juejin.cn/post/7588064253635477558" target="_blank" title="https://juejin.cn/post/7588064253635477558">Scheduler è°ƒåº¦å™¨</a></td><td>ä¼˜å…ˆçº§ã€æ—¶é—´åˆ‡ç‰‡</td></tr><tr><td>07</td><td><a href="https://juejin.cn/post/7588061231589556265" target="_blank" title="https://juejin.cn/post/7588061231589556265">Commit é˜¶æ®µ</a></td><td>ä¸‰ä¸ªå­é˜¶æ®µã€DOM æ“ä½œ</td></tr></tbody></table>
<h3 data-id="heading-22">åã€å­¦ä¹ å»ºè®®</h3>
<ol>
<li><strong>å…ˆè·‘èµ·æ¥</strong>ï¼šclone react-debugï¼Œæ‰“æ–­ç‚¹è°ƒè¯•</li>
<li><strong>ä» useState å¼€å§‹</strong>ï¼šæœ€ç®€å•ä¹Ÿæœ€æ ¸å¿ƒ</li>
<li><strong>ç”»æµç¨‹å›¾</strong>ï¼šè¾¹çœ‹è¾¹ç”»ï¼ŒåŠ æ·±ç†è§£</li>
<li><strong>å†™æµ‹è¯•ç»„ä»¶</strong>ï¼šéªŒè¯ä½ çš„ç†è§£</li>
</ol>
<hr/>
<blockquote>
<p>ğŸ“¦ é…å¥—æºç ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2F220529%2Freact-debug" target="_blank" title="https://github.com/220529/react-debug" ref="nofollow noopener noreferrer">github.com/220529/reacâ€¦</a></p>
<p>ä¸Šä¸€ç¯‡ï¼š<a href="https://juejin.cn/post/7588149079400710187" target="_blank" title="https://juejin.cn/post/7588149079400710187">React æºç è°ƒè¯•ç¯å¢ƒæ­å»º</a></p>
<p>ä¸‹ä¸€ç¯‡ï¼š<a href="https://juejin.cn/post/7588007285547302918" target="_blank" title="https://juejin.cn/post/7588007285547302918">useState çš„å®ç°åŸç†</a></p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[React 19 æºç æ­ç§˜ï¼ˆäºŒï¼‰ï¼šuseState çš„å®ç°åŸç†]]></title>    <link>https://juejin.cn/post/7588007285547302918</link>    <guid>https://juejin.cn/post/7588007285547302918</guid>    <pubDate>2025-12-27T02:42:47.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588007285547302918" data-draft-id="7588149079400759339" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="React 19 æºç æ­ç§˜ï¼ˆäºŒï¼‰ï¼šuseState çš„å®ç°åŸç†"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-27T02:42:47.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å€Ÿä¸ªç«er"/> <meta itemprop="url" content="https://juejin.cn/user/2225067265915783"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            React 19 æºç æ­ç§˜ï¼ˆäºŒï¼‰ï¼šuseState çš„å®ç°åŸç†
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2225067265915783/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å€Ÿä¸ªç«er
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-27T02:42:47.000Z" title="Sat Dec 27 2025 02:42:47 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    20
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">React 19 æºç æ­ç§˜ï¼ˆäºŒï¼‰ï¼šuseState çš„å®ç°åŸç†</h2>
<blockquote>
<p>æœ¬æ–‡æ·±å…¥ React æºç ï¼Œå¸¦ä½ å½»åº•ææ‡‚ useState ä»è°ƒç”¨åˆ°æ›´æ–°çš„å®Œæ•´æµç¨‹ã€‚</p>
</blockquote>
<h3 data-id="heading-1">å‰è¨€</h3>
<p><code>useState</code> å¯èƒ½æ˜¯ä½ ç”¨å¾—æœ€å¤šçš„ Hookï¼Œä½†ä½ çŸ¥é“å®ƒèƒŒåæ˜¯æ€ä¹ˆå·¥ä½œçš„å—ï¼Ÿ</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> [count, setCount] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>);
<span class="hljs-title function_">setCount</span>(count + <span class="hljs-number">1</span>);  <span class="hljs-comment">// è¿™è¡Œä»£ç èƒŒåå‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ</span>
</code></pre>
<p>æœ¬æ–‡å°†ä»æºç è§’åº¦ï¼Œå®Œæ•´è§£æ useState çš„å®ç°åŸç†ã€‚</p>
<h3 data-id="heading-2">ä¸€ã€Hook çš„æ•°æ®ç»“æ„</h3>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦äº†è§£ Hook åœ¨ React å†…éƒ¨æ˜¯å¦‚ä½•å­˜å‚¨çš„ã€‚</p>
<h4 data-id="heading-3">Hook èŠ‚ç‚¹</h4>
<p>æ¯ä¸ª Hook è°ƒç”¨éƒ½ä¼šåˆ›å»ºä¸€ä¸ª Hook å¯¹è±¡ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">type <span class="hljs-title class_">Hook</span> = {
  <span class="hljs-attr">memoizedState</span>: any,    <span class="hljs-comment">// å­˜å‚¨çš„çŠ¶æ€å€¼</span>
  <span class="hljs-attr">baseState</span>: any,        <span class="hljs-comment">// åŸºç¡€çŠ¶æ€ï¼ˆç”¨äºæ›´æ–°è®¡ç®—ï¼‰</span>
  <span class="hljs-attr">baseQueue</span>: <span class="hljs-title class_">Update</span> | <span class="hljs-literal">null</span>,  <span class="hljs-comment">// åŸºç¡€æ›´æ–°é˜Ÿåˆ—</span>
  <span class="hljs-attr">queue</span>: <span class="hljs-title class_">UpdateQueue</span> | <span class="hljs-literal">null</span>, <span class="hljs-comment">// æ›´æ–°é˜Ÿåˆ—</span>
  <span class="hljs-attr">next</span>: <span class="hljs-title class_">Hook</span> | <span class="hljs-literal">null</span>,     <span class="hljs-comment">// æŒ‡å‘ä¸‹ä¸€ä¸ª Hook</span>
};
</code></pre>
<h4 data-id="heading-4">Hook é“¾è¡¨</h4>
<p>å¤šä¸ª Hook ä»¥é“¾è¡¨å½¢å¼å­˜å‚¨åœ¨ Fiber èŠ‚ç‚¹çš„ <code>memoizedState</code> ä¸Šï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-built_in">Fiber</span>.memoizedState
        â”‚
        â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Hook1 â”‚ â”€â”€â–º â”‚ Hook2 â”‚ â”€â”€â–º â”‚ Hook3 â”‚ â”€â”€â–º <span class="hljs-literal">null</span>
    â”‚useStateâ”‚     â”‚useEffectâ”‚    â”‚useMemoâ”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<p>è¿™å°±æ˜¯ä¸ºä»€ä¹ˆ <strong>Hook ä¸èƒ½åœ¨æ¡ä»¶è¯­å¥ä¸­è°ƒç”¨</strong>â€”â€”React ä¾èµ–è°ƒç”¨é¡ºåºæ¥åŒ¹é… Hookã€‚</p>
<h3 data-id="heading-5">äºŒã€é¦–æ¬¡æ¸²æŸ“ï¼šmountState</h3>
<p>å½“ç»„ä»¶é¦–æ¬¡æ¸²æŸ“æ—¶ï¼ŒuseState ä¼šè°ƒç”¨ <code>mountState</code>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æºç ä½ç½®ï¼šreact-reconciler/src/ReactFiberHooks.js</span>

<span class="hljs-keyword">function</span> <span class="hljs-title function_">mountState</span>(<span class="hljs-params">initialState</span>) {
  <span class="hljs-comment">// 1. åˆ›å»º Hook èŠ‚ç‚¹ï¼ŒåŠ å…¥é“¾è¡¨</span>
  <span class="hljs-keyword">const</span> hook = <span class="hljs-title function_">mountWorkInProgressHook</span>();
  
  <span class="hljs-comment">// 2. å¤„ç†åˆå§‹å€¼ï¼ˆæ”¯æŒå‡½æ•°å¼åˆå§‹åŒ–ï¼‰</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> initialState === <span class="hljs-string">'function'</span>) {
    initialState = <span class="hljs-title function_">initialState</span>();
  }
  
  <span class="hljs-comment">// 3. ä¿å­˜åˆå§‹çŠ¶æ€</span>
  hook.<span class="hljs-property">memoizedState</span> = hook.<span class="hljs-property">baseState</span> = initialState;
  
  <span class="hljs-comment">// 4. åˆ›å»ºæ›´æ–°é˜Ÿåˆ—</span>
  <span class="hljs-keyword">const</span> queue = {
    <span class="hljs-attr">pending</span>: <span class="hljs-literal">null</span>,           <span class="hljs-comment">// å¾…å¤„ç†çš„æ›´æ–°</span>
    <span class="hljs-attr">lanes</span>: <span class="hljs-title class_">NoLanes</span>,
    <span class="hljs-attr">dispatch</span>: <span class="hljs-literal">null</span>,          <span class="hljs-comment">// setState å‡½æ•°</span>
    <span class="hljs-attr">lastRenderedReducer</span>: basicStateReducer,
    <span class="hljs-attr">lastRenderedState</span>: initialState,
  };
  hook.<span class="hljs-property">queue</span> = queue;
  
  <span class="hljs-comment">// 5. ç»‘å®š dispatch å‡½æ•°ï¼ˆå°±æ˜¯ setStateï¼‰</span>
  <span class="hljs-keyword">const</span> dispatch = dispatchSetState.<span class="hljs-title function_">bind</span>(<span class="hljs-literal">null</span>, currentlyRenderingFiber, queue);
  queue.<span class="hljs-property">dispatch</span> = dispatch;
  
  <span class="hljs-comment">// 6. è¿”å› [state, setState]</span>
  <span class="hljs-keyword">return</span> [hook.<span class="hljs-property">memoizedState</span>, dispatch];
}
</code></pre>
<h4 data-id="heading-6">mountWorkInProgressHook</h4>
<p>è¿™ä¸ªå‡½æ•°è´Ÿè´£åˆ›å»º Hook èŠ‚ç‚¹å¹¶ç»´æŠ¤é“¾è¡¨ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">mountWorkInProgressHook</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> hook = {
    <span class="hljs-attr">memoizedState</span>: <span class="hljs-literal">null</span>,
    <span class="hljs-attr">baseState</span>: <span class="hljs-literal">null</span>,
    <span class="hljs-attr">baseQueue</span>: <span class="hljs-literal">null</span>,
    <span class="hljs-attr">queue</span>: <span class="hljs-literal">null</span>,
    <span class="hljs-attr">next</span>: <span class="hljs-literal">null</span>,
  };

  <span class="hljs-keyword">if</span> (workInProgressHook === <span class="hljs-literal">null</span>) {
    <span class="hljs-comment">// ç¬¬ä¸€ä¸ª Hookï¼ŒæŒ‚è½½åˆ° Fiber</span>
    currentlyRenderingFiber.<span class="hljs-property">memoizedState</span> = workInProgressHook = hook;
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// è¿½åŠ åˆ°é“¾è¡¨æœ«å°¾</span>
    workInProgressHook = workInProgressHook.<span class="hljs-property">next</span> = hook;
  }
  
  <span class="hljs-keyword">return</span> workInProgressHook;
}
</code></pre>
<h3 data-id="heading-7">ä¸‰ã€è§¦å‘æ›´æ–°ï¼šdispatchSetState</h3>
<p>å½“ä½ è°ƒç”¨ <code>setCount(1)</code> æ—¶ï¼Œå®é™…æ‰§è¡Œçš„æ˜¯ <code>dispatchSetState</code>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">dispatchSetState</span>(<span class="hljs-params">fiber, queue, action</span>) {
  <span class="hljs-comment">// 1. è·å–æ›´æ–°ä¼˜å…ˆçº§</span>
  <span class="hljs-keyword">const</span> lane = <span class="hljs-title function_">requestUpdateLane</span>(fiber);
  
  <span class="hljs-comment">// 2. åˆ›å»ºæ›´æ–°å¯¹è±¡</span>
  <span class="hljs-keyword">const</span> update = {
    lane,
    action,              <span class="hljs-comment">// æ–°å€¼æˆ–æ›´æ–°å‡½æ•°</span>
    <span class="hljs-attr">hasEagerState</span>: <span class="hljs-literal">false</span>,
    <span class="hljs-attr">eagerState</span>: <span class="hljs-literal">null</span>,
    <span class="hljs-attr">next</span>: <span class="hljs-literal">null</span>,
  };
  
  <span class="hljs-comment">// 3. æ€§èƒ½ä¼˜åŒ–ï¼šEager Stateï¼ˆæå‰è®¡ç®—ï¼‰</span>
  <span class="hljs-keyword">if</span> (fiber.<span class="hljs-property">lanes</span> === <span class="hljs-title class_">NoLanes</span>) {
    <span class="hljs-keyword">const</span> currentState = queue.<span class="hljs-property">lastRenderedState</span>;
    <span class="hljs-keyword">const</span> eagerState = <span class="hljs-title function_">basicStateReducer</span>(currentState, action);
    update.<span class="hljs-property">hasEagerState</span> = <span class="hljs-literal">true</span>;
    update.<span class="hljs-property">eagerState</span> = eagerState;
    
    <span class="hljs-comment">// å¦‚æœæ–°æ—§çŠ¶æ€ç›¸åŒï¼Œè·³è¿‡æ›´æ–°ï¼</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">is</span>(eagerState, currentState)) {
      <span class="hljs-keyword">return</span>;  <span class="hljs-comment">// Bailout!</span>
    }
  }
  
  <span class="hljs-comment">// 4. å°†æ›´æ–°åŠ å…¥é˜Ÿåˆ—</span>
  <span class="hljs-title function_">enqueueConcurrentHookUpdate</span>(fiber, queue, update, lane);
  
  <span class="hljs-comment">// 5. è°ƒåº¦æ›´æ–°</span>
  <span class="hljs-title function_">scheduleUpdateOnFiber</span>(root, fiber, lane);
}
</code></pre>
<h4 data-id="heading-8">Eager State ä¼˜åŒ–</h4>
<p>è¿™æ˜¯ä¸€ä¸ªé‡è¦çš„æ€§èƒ½ä¼˜åŒ–ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> [count, setCount] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>);

<span class="hljs-comment">// ç‚¹å‡»æŒ‰é’®</span>
<span class="hljs-title function_">setCount</span>(<span class="hljs-number">0</span>);  <span class="hljs-comment">// çŠ¶æ€æ²¡å˜ï¼ŒReact ä¼šè·³è¿‡è¿™æ¬¡æ›´æ–°ï¼</span>
</code></pre>
<p>React ä¼šåœ¨è°ƒåº¦ä¹‹å‰å°±è®¡ç®—æ–°çŠ¶æ€ï¼Œå¦‚æœå’Œæ—§çŠ¶æ€ç›¸åŒï¼ˆé€šè¿‡ <code>Object.is</code> æ¯”è¾ƒï¼‰ï¼Œç›´æ¥è·³è¿‡æ•´ä¸ªæ›´æ–°æµç¨‹ã€‚</p>
<h3 data-id="heading-9">å››ã€æ›´æ–°æ¸²æŸ“ï¼šupdateState</h3>
<p>å½“ç»„ä»¶é‡æ–°æ¸²æŸ“æ—¶ï¼ŒuseState ä¼šè°ƒç”¨ <code>updateState</code>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">updateState</span>(<span class="hljs-params">initialState</span>) {
  <span class="hljs-comment">// useState æœ¬è´¨ä¸Šæ˜¯é¢„è®¾äº† reducer çš„ useReducer</span>
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">updateReducer</span>(basicStateReducer, initialState);
}

<span class="hljs-comment">// åŸºç¡€ reducerï¼šæ”¯æŒå€¼æˆ–å‡½æ•°</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">basicStateReducer</span>(<span class="hljs-params">state, action</span>) {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">typeof</span> action === <span class="hljs-string">'function'</span> ? <span class="hljs-title function_">action</span>(state) : action;
}
</code></pre>
<h4 data-id="heading-10">updateReducer</h4>
<p>è¿™æ˜¯å¤„ç†æ›´æ–°çš„æ ¸å¿ƒé€»è¾‘ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">updateReducer</span>(<span class="hljs-params">reducer, initialArg</span>) {
  <span class="hljs-comment">// 1. è·å–å½“å‰ Hook</span>
  <span class="hljs-keyword">const</span> hook = <span class="hljs-title function_">updateWorkInProgressHook</span>();
  <span class="hljs-keyword">const</span> queue = hook.<span class="hljs-property">queue</span>;
  
  <span class="hljs-comment">// 2. è·å–å¾…å¤„ç†çš„æ›´æ–°</span>
  <span class="hljs-keyword">const</span> pending = queue.<span class="hljs-property">pending</span>;
  
  <span class="hljs-comment">// 3. è®¡ç®—æ–°çŠ¶æ€</span>
  <span class="hljs-keyword">let</span> newState = hook.<span class="hljs-property">baseState</span>;
  <span class="hljs-keyword">if</span> (pending !== <span class="hljs-literal">null</span>) {
    <span class="hljs-keyword">let</span> update = pending.<span class="hljs-property">first</span>;
    <span class="hljs-keyword">do</span> {
      <span class="hljs-keyword">const</span> action = update.<span class="hljs-property">action</span>;
      newState = <span class="hljs-title function_">reducer</span>(newState, action);
      update = update.<span class="hljs-property">next</span>;
    } <span class="hljs-keyword">while</span> (update !== <span class="hljs-literal">null</span>);
  }
  
  <span class="hljs-comment">// 4. ä¿å­˜æ–°çŠ¶æ€</span>
  hook.<span class="hljs-property">memoizedState</span> = newState;
  
  <span class="hljs-comment">// 5. è¿”å›æ–°çŠ¶æ€å’Œ dispatch</span>
  <span class="hljs-keyword">return</span> [hook.<span class="hljs-property">memoizedState</span>, queue.<span class="hljs-property">dispatch</span>];
}
</code></pre>
<h4 data-id="heading-11">updateWorkInProgressHook</h4>
<p>æ›´æ–°æ—¶ï¼Œéœ€è¦ä» current æ ‘å¤åˆ¶ Hookï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">updateWorkInProgressHook</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// ä» current Fiber è·å–å¯¹åº”çš„ Hook</span>
  <span class="hljs-keyword">let</span> nextCurrentHook;
  <span class="hljs-keyword">if</span> (currentHook === <span class="hljs-literal">null</span>) {
    <span class="hljs-keyword">const</span> current = currentlyRenderingFiber.<span class="hljs-property">alternate</span>;
    nextCurrentHook = current.<span class="hljs-property">memoizedState</span>;
  } <span class="hljs-keyword">else</span> {
    nextCurrentHook = currentHook.<span class="hljs-property">next</span>;
  }
  
  currentHook = nextCurrentHook;
  
  <span class="hljs-comment">// å¤åˆ¶ Hook åˆ° workInProgress</span>
  <span class="hljs-keyword">const</span> newHook = {
    <span class="hljs-attr">memoizedState</span>: currentHook.<span class="hljs-property">memoizedState</span>,
    <span class="hljs-attr">baseState</span>: currentHook.<span class="hljs-property">baseState</span>,
    <span class="hljs-attr">baseQueue</span>: currentHook.<span class="hljs-property">baseQueue</span>,
    <span class="hljs-attr">queue</span>: currentHook.<span class="hljs-property">queue</span>,
    <span class="hljs-attr">next</span>: <span class="hljs-literal">null</span>,
  };
  
  <span class="hljs-comment">// åŠ å…¥é“¾è¡¨...</span>
  <span class="hljs-keyword">return</span> newHook;
}
</code></pre>
<h3 data-id="heading-12">äº”ã€å®Œæ•´æµç¨‹å›¾</h3>
<pre><code class="hljs language-scss" lang="scss">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    é¦–æ¬¡æ¸²æŸ“ (Mount)                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  <span class="hljs-built_in">useState</span>(<span class="hljs-number">0</span>)                                            â”‚
â”‚      â”‚                                                  â”‚
â”‚      â–¼                                                  â”‚
â”‚  <span class="hljs-built_in">mountState</span>(<span class="hljs-number">0</span>)                                          â”‚
â”‚      â”‚                                                  â”‚
â”‚      â”œâ”€â”€â–º åˆ›å»º Hook èŠ‚ç‚¹                                â”‚
â”‚      â”œâ”€â”€â–º åˆå§‹åŒ– memoizedState = <span class="hljs-number">0</span>                      â”‚
â”‚      â”œâ”€â”€â–º åˆ›å»º UpdateQueue                              â”‚
â”‚      â”œâ”€â”€â–º ç»‘å®š dispatch = dispatchSetState              â”‚
â”‚      â”‚                                                  â”‚
â”‚      â–¼                                                  â”‚
â”‚  è¿”å› <span class="hljs-selector-attr">[0, setCount]</span>                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    è§¦å‘æ›´æ–°                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  <span class="hljs-built_in">setCount</span>(<span class="hljs-number">1</span>)                                            â”‚
â”‚      â”‚                                                  â”‚
â”‚      â–¼                                                  â”‚
â”‚  <span class="hljs-built_in">dispatchSetState</span>(fiber, queue, <span class="hljs-number">1</span>)                      â”‚
â”‚      â”‚                                                  â”‚
â”‚      â”œâ”€â”€â–º è·å–ä¼˜å…ˆçº§ lane                               â”‚
â”‚      â”œâ”€â”€â–º åˆ›å»º Update å¯¹è±¡                              â”‚
â”‚      â”œâ”€â”€â–º Eager State: è®¡ç®—æ–°çŠ¶æ€                       â”‚
â”‚      â”œâ”€â”€â–º æ¯”è¾ƒæ–°æ—§çŠ¶æ€ï¼Œç›¸åŒåˆ™ Bailout                   â”‚
â”‚      â”œâ”€â”€â–º å…¥é˜Ÿæ›´æ–°                                      â”‚
â”‚      â”‚                                                  â”‚
â”‚      â–¼                                                  â”‚
â”‚  <span class="hljs-built_in">scheduleUpdateOnFiber</span>() â”€â”€â–º è°ƒåº¦é‡æ–°æ¸²æŸ“               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    é‡æ–°æ¸²æŸ“ (Update)                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  <span class="hljs-built_in">useState</span>(<span class="hljs-number">0</span>)  // åˆå§‹å€¼è¢«å¿½ç•¥                           â”‚
â”‚      â”‚                                                  â”‚
â”‚      â–¼                                                  â”‚
â”‚  <span class="hljs-built_in">updateState</span>(<span class="hljs-number">0</span>)                                         â”‚
â”‚      â”‚                                                  â”‚
â”‚      â–¼                                                  â”‚
â”‚  <span class="hljs-built_in">updateReducer</span>(basicStateReducer, <span class="hljs-number">0</span>)                    â”‚
â”‚      â”‚                                                  â”‚
â”‚      â”œâ”€â”€â–º è·å–å¯¹åº”çš„ Hook                               â”‚
â”‚      â”œâ”€â”€â–º å¤„ç† UpdateQueue ä¸­çš„æ›´æ–°                     â”‚
â”‚      â”œâ”€â”€â–º è®¡ç®—æ–°çŠ¶æ€ = <span class="hljs-number">1</span>                                â”‚
â”‚      â”‚                                                  â”‚
â”‚      â–¼                                                  â”‚
â”‚  è¿”å› [<span class="hljs-number">1</span>, setCount]                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h3 data-id="heading-13">å…­ã€Dispatcher åˆ‡æ¢</h3>
<p>React å¦‚ä½•åŒºåˆ† mount å’Œ updateï¼Ÿç­”æ¡ˆæ˜¯ <strong>Dispatcher åˆ‡æ¢</strong>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// renderWithHooks ä¸­</span>
<span class="hljs-title class_">ReactSharedInternals</span>.<span class="hljs-property">H</span> = 
  current === <span class="hljs-literal">null</span> || current.<span class="hljs-property">memoizedState</span> === <span class="hljs-literal">null</span>
    ? <span class="hljs-title class_">HooksDispatcherOnMount</span>   <span class="hljs-comment">// é¦–æ¬¡æ¸²æŸ“</span>
    : <span class="hljs-title class_">HooksDispatcherOnUpdate</span>; <span class="hljs-comment">// æ›´æ–°æ¸²æŸ“</span>

<span class="hljs-comment">// ä¸¤ä¸ª Dispatcher çš„ useState æŒ‡å‘ä¸åŒå‡½æ•°</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">HooksDispatcherOnMount</span> = {
  <span class="hljs-attr">useState</span>: mountState,
  <span class="hljs-attr">useEffect</span>: mountEffect,
  <span class="hljs-comment">// ...</span>
};

<span class="hljs-keyword">const</span> <span class="hljs-title class_">HooksDispatcherOnUpdate</span> = {
  <span class="hljs-attr">useState</span>: updateState,
  <span class="hljs-attr">useEffect</span>: updateEffect,
  <span class="hljs-comment">// ...</span>
};
</code></pre>
<p>æ¸²æŸ“å®Œæˆåï¼Œåˆ‡æ¢åˆ° ContextOnlyDispatcherï¼Œç¦æ­¢åœ¨ç»„ä»¶å¤–è°ƒç”¨ Hookï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ¸²æŸ“å®Œæˆå</span>
<span class="hljs-title class_">ReactSharedInternals</span>.<span class="hljs-property">H</span> = <span class="hljs-title class_">ContextOnlyDispatcher</span>;

<span class="hljs-keyword">const</span> <span class="hljs-title class_">ContextOnlyDispatcher</span> = {
  <span class="hljs-attr">useState</span>: throwInvalidHookError,  <span class="hljs-comment">// æŠ›å‡ºé”™è¯¯</span>
  <span class="hljs-comment">// ...</span>
};
</code></pre>
<h3 data-id="heading-14">ä¸ƒã€ä¸ºä»€ä¹ˆ Hook ä¸èƒ½æ¡ä»¶è°ƒç”¨ï¼Ÿ</h3>
<p>ç°åœ¨ä½ åº”è¯¥æ˜ç™½äº†ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// âŒ é”™è¯¯</span>
<span class="hljs-keyword">if</span> (condition) {
  <span class="hljs-keyword">const</span> [a, setA] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>);  <span class="hljs-comment">// Hook 1</span>
}
<span class="hljs-keyword">const</span> [b, setB] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>);    <span class="hljs-comment">// Hook 2 æˆ– Hook 1ï¼Ÿ</span>

<span class="hljs-comment">// âœ… æ­£ç¡®</span>
<span class="hljs-keyword">const</span> [a, setA] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>);    <span class="hljs-comment">// å§‹ç»ˆæ˜¯ Hook 1</span>
<span class="hljs-keyword">const</span> [b, setB] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>);    <span class="hljs-comment">// å§‹ç»ˆæ˜¯ Hook 2</span>
</code></pre>
<p>React é€šè¿‡éå†é“¾è¡¨æ¥åŒ¹é… Hookï¼Œå¦‚æœé¡ºåºå˜äº†ï¼ŒçŠ¶æ€å°±ä¹±äº†ã€‚</p>
<h3 data-id="heading-15">å…«ã€è°ƒè¯•æŠ€å·§</h3>
<p>æƒ³è¦äº²è‡ªéªŒè¯ï¼Ÿåœ¨è¿™äº›ä½ç½®æ‰“æ–­ç‚¹ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// é¦–æ¬¡æ¸²æŸ“</span>
mountState          <span class="hljs-comment">// react-reconciler/src/ReactFiberHooks.js</span>

<span class="hljs-comment">// è§¦å‘æ›´æ–°</span>
dispatchSetState    <span class="hljs-comment">// react-reconciler/src/ReactFiberHooks.js</span>

<span class="hljs-comment">// é‡æ–°æ¸²æŸ“</span>
updateReducer       <span class="hljs-comment">// react-reconciler/src/ReactFiberHooks.js</span>
</code></pre>
<p>ç”¨ Counter ç»„ä»¶æµ‹è¯•ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">Counter</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">const</span> [count, setCount] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>);  <span class="hljs-comment">// æ–­ç‚¹è¿™é‡Œ</span>
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> setCount(count + 1)}&gt;{count}<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span>;
};
</code></pre>
<h3 data-id="heading-16">å°ç»“</h3>
<p>æœ¬æ–‡æ·±å…¥åˆ†æäº† useState çš„å®ç°åŸç†ï¼š</p>
<ol>
<li><strong>æ•°æ®ç»“æ„</strong>ï¼šHook ä»¥é“¾è¡¨å½¢å¼å­˜å‚¨åœ¨ Fiber.memoizedState</li>
<li><strong>é¦–æ¬¡æ¸²æŸ“</strong>ï¼šmountState åˆ›å»º Hook å’Œ UpdateQueue</li>
<li><strong>è§¦å‘æ›´æ–°</strong>ï¼šdispatchSetState åˆ›å»º Updateï¼Œè°ƒåº¦æ¸²æŸ“</li>
<li><strong>Eager State</strong>ï¼šæå‰è®¡ç®—ï¼Œç›¸åŒçŠ¶æ€è·³è¿‡æ›´æ–°</li>
<li><strong>é‡æ–°æ¸²æŸ“</strong>ï¼šupdateReducer å¤„ç†æ›´æ–°é˜Ÿåˆ—ï¼Œè®¡ç®—æ–°çŠ¶æ€</li>
<li><strong>Dispatcher</strong>ï¼šé€šè¿‡åˆ‡æ¢å®ç° mount/update çš„åŒºåˆ†</li>
</ol>
<p>ä¸‹ä¸€ç¯‡æˆ‘ä»¬å°†åˆ†æ <strong>useEffect çš„å®ç°åŸç†</strong>ï¼Œçœ‹çœ‹å‰¯ä½œç”¨æ˜¯å¦‚ä½•è¢«è°ƒåº¦å’Œæ‰§è¡Œçš„ã€‚</p>
<hr/>
<blockquote>
<p>ğŸ“¦ é…å¥—æºç ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2F220529%2Freact-debug" target="_blank" title="https://github.com/220529/react-debug" ref="nofollow noopener noreferrer">github.com/220529/reacâ€¦</a></p>
<p>ä¸Šä¸€ç¯‡ï¼š<a href="https://juejin.cn/post/7588007285547286534" target="_blank" title="https://juejin.cn/post/7588007285547286534">React 19 æºç å…¨æ™¯å›¾</a></p>
<p>ä¸‹ä¸€ç¯‡ï¼š<a href="https://juejin.cn/post/7588001624905973779" target="_blank" title="https://juejin.cn/post/7588001624905973779">useEffect çš„å®ç°åŸç†</a></p>
<p>å¦‚æœè§‰å¾—æœ‰å¸®åŠ©ï¼Œæ¬¢è¿ç‚¹èµæ”¶è— ğŸ‘</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç ´é˜²äº†ï¼é˜¿æ˜Ÿä¸€å¹´ç”¨AIæ’¸äº†50ä¸ªé¡¹ç›®ï¼Œè¿™10æ¡é¿å‘ç»éªŒä½ å¿…é¡»çŸ¥é“]]></title>    <link>https://juejin.cn/post/7588031908170973193</link>    <guid>https://juejin.cn/post/7588031908170973193</guid>    <pubDate>2025-12-26T16:18:32.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588031908170973193" data-draft-id="7588086766235795494" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç ´é˜²äº†ï¼é˜¿æ˜Ÿä¸€å¹´ç”¨AIæ’¸äº†50ä¸ªé¡¹ç›®ï¼Œè¿™10æ¡é¿å‘ç»éªŒä½ å¿…é¡»çŸ¥é“"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½,å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-26T16:18:32.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é˜¿æ˜ŸAIå·¥ä½œå®¤"/> <meta itemprop="url" content="https://juejin.cn/user/2250051536050763"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç ´é˜²äº†ï¼é˜¿æ˜Ÿä¸€å¹´ç”¨AIæ’¸äº†50ä¸ªé¡¹ç›®ï¼Œè¿™10æ¡é¿å‘ç»éªŒä½ å¿…é¡»çŸ¥é“
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2250051536050763/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é˜¿æ˜ŸAIå·¥ä½œå®¤
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-26T16:18:32.000Z" title="Fri Dec 26 2025 16:18:32 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/509b6a53b2c14622a7f411953f571293~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_5pifQUnlt6XkvZzlrqQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767370712&amp;x-signature=zQYLeU1DJz%2BqZuqyleR2EWCqEhk%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å“ˆå–½ï¼Œå¤§å®¶å¥½ï¼</p>
<p>é˜¿æ˜ŸğŸ‘‹</p>
<p>å±å®æ²¡æƒ³åˆ°ç°åœ¨IDEéƒ½å·å¾—å‡ºå¹´ç»ˆæŠ¥å‘Šäº†ï¼šæˆ‘åœ¨TRAEçš„å¹´ç»ˆæŠ¥å‘Šé‡Œå±…ç„¶æ˜¯ä¸ªå¼€æœè´¡çŒ®è€…</p>
<p>æ˜¯å•Šï¼Œ æ–­æ–­ç»­ç»­vibecodingäº†50ä¸ªé¡¹ç›®</p>
<p>ä¹Ÿæœ‰å‡ ä¸ªä½“ä¼šåˆ†äº«ç»™å¤§å®¶â€”â€”</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1756b4f4f81f48cfb07f7e35e9f2ca56~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_5pifQUnlt6XkvZzlrqQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767370712&amp;x-signature=VHFsY2cSNN4mRQ3oHrXU%2BR1kUTE%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h2 data-id="heading-0">1ã€ä¸€ä¸ªå¥½çš„å‰æœŸpromptèƒœè¿‡åæœŸæŠ˜è…¾100é</h2>
<p>å¼ºæç¤ºè¯æ§åˆ¶æ˜¯é˜¿æ˜Ÿåœ¨è¸©äº†å¾ˆå¤šå‘ä¹‹åæ‰æ„è¯†åˆ°çš„</p>
<p>æ–°æ‰‹éƒ½æ˜¯èœœæ±è‡ªä¿¡è§‰å¾—éšä¾¿ä¸€å¥è¯èƒ½codingä¸ªå·®ä¸å¤šçš„</p>
<p>ç»“æœè¶Šè¯´è¶Šå¤šè¿˜ä¸å¦‚ç¬¬ä¸€æ¬¡è§„å®šå¥½</p>
<p>æ‰€ä»¥å³ä½¿æ˜¯å¾ˆç®€å•çš„é¡¹ç›®æˆ‘æ—¢ä¼šç”¨ã€ŒEARSè¯­æ³•ã€å»æŠŠæ™®é€šæç¤ºè¯æ‰©å±•æˆå·¥ç¨‹çº§æç¤ºè¯</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6e71e1d1bb8b4c8b9e7ea2c776bbbe50~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_5pifQUnlt6XkvZzlrqQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767370712&amp;x-signature=%2FNF5yDFMhehBeljoDY8SA%2FqVCIE%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æˆ‘çš„åŸéœ€æ±‚å¤§æ¦‚è¿™ä¹ˆé•¿</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/540fbf38fe3b4055bcbdc04a98307523~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_5pifQUnlt6XkvZzlrqQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767370712&amp;x-signature=5mSR0r6rRtLMMbVmiSLOGTJnc6s%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>é€šè¿‡ã€ŒEARSè¯­æ³•ã€ä¹Ÿå°±è¯¦ç»†äº†10å€å§ğŸ‘‡â€¢á´—â€¢ğŸ’§</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bb71c0c1081f4d4286b563606250e97a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_5pifQUnlt6XkvZzlrqQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767370712&amp;x-signature=K2Ql%2BB0R4za0D7xIjCB42Hnwdcs%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æ¯•ç«Ÿï¼Œå‡ åƒå­—çš„æç¤ºè¯å’Œ100å­—çš„ç®€å•äº¤ä»£å·®åˆ«è¿˜æ˜¯å¾ˆå¤§çš„</p>
<p>ä¹Ÿä¼šç”¨ä¸€äº›è‡ªåŠ¨åŒ–æç¤ºè¯å¢å¼º</p>
<p>æ¥å¸®æˆ‘åœ¨å¿™çš„æ—¶å€™ä¹Ÿèƒ½å…¼é¡¾æœ€åŸºæœ¬æç¤ºè¯ä¸“ä¸šåº¦</p>
<p>æ¯”å¦‚è¿™ä¸ªè‡ªåŠ¨å¢å¼ºåŠŸèƒ½</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0c9c295800a4438a8df01b8aa559e3ac~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_5pifQUnlt6XkvZzlrqQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767370712&amp;x-signature=BzNoQnvzGe6SIHLIGhwc%2BXTb%2BCU%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h2 data-id="heading-1">2ã€ä¸ä¸€å®šéè¦ç”¨å›½å¤–CLI</h2>
<p>å‰ä¸¤å¤©ï¼Œé˜¿æ˜Ÿæƒ³åšä¸€ä¸ªå¡å¯†ç³»ç»Ÿã€‚ æœ¬èƒ½åœ°æ‰“å¼€äº†å›½å¤–çš„CLIï¼ˆä¸€ç§å‘½ä»¤è¡Œç¼–ç¨‹å½¢å¼ï¼‰</p>
<p>ä½†æ˜¯ç”¨å›½å†…IDEæ¥åšå´æ„å¤–çš„é¡ºåˆ©</p>
<p>ç®€å•çš„é¡¹ç›®çš„è¯ï¼Œæ•´ä¸ªé¡¹ç›®ä¸‹æ¥å‡ ä¹æ²¡æœ‰å›æ»šçš„æ—¶å€™ï¼Œ</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/047263370a49453ead1498ed5b6266f7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_5pifQUnlt6XkvZzlrqQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767370712&amp;x-signature=KAknz4%2BzV2BOZzEQ3RrYVXYx%2BYU%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å¾ˆå°‘ï¼Œä½†ä¸èƒ½è¯´æ˜¯å®Œå…¨æ²¡æœ‰å›æ»šï¼Œé‚£ä¹Ÿå¤ªå¤¸å¼ äº†ã€‚</p>
<p>ä½†æ˜¯å¯¹æˆ‘è¿™ç§åŠè·¯æ‰å¼€å§‹æ¥è§¦AIç¼–ç¨‹çš„äººæ¥è¯´ç®—å‹å¥½çš„ï¼Œ</p>
<p>æ¯”2023å¹´é‚£ä¼šå„¿çš„IDEæ›´æ˜¯è®©æˆ‘ä»¬å°‘åšäº†å¾ˆå¤šæ— ç”¨å·¥ã€‚</p>
<p><strong>è™½ç„¶ç°åœ¨æŸäº›CLIåŠŸèƒ½ç¡®å®å‘¼å£°å¾ˆé«˜ï¼Œä½†æ˜¯å¯¹å°ç™½æ¥è¯´ä¸Šæ‰‹éš¾åº¦å…¶å®æŒºå¤§çš„</strong>ï¼Œçœ‹åˆ°å‘½ä»¤è¡Œå¤´æ™•äº†è¿˜æ€ä¹ˆç»§ç»­ã€‚æ‰€ä»¥å¦‚æœä½ å®Œå…¨æ²¡æœ‰ç”¨AIç¼–ç¨‹è¿‡ï¼Œæˆ‘è¿˜æ˜¯å»ºè®®ä»æ™ºèƒ½IDEåšèµ·ã€‚</p>
<h2 data-id="heading-2">3ã€å·¥ä½œæµç›´æ¥åšæˆæ™ºèƒ½ä½“</h2>
<p>æ¯æ¬¡åšé¡¹ç›®ï¼Œ</p>
<p>é˜¿æ˜Ÿéƒ½ä¼šåšä¸€ä¸ªguidebookæŠŠæ•´ä¸ªé¡¹ç›®çš„è¸©å‘è¿‡ç¨‹è®°å½•ä¸‹æ¥ï¼Œå¥½äºŒæ¬¡å¤ç”¨åˆ°è‡ªåª’ä½“ä¸Šï¼Œ<strong>å¦‚æœæ²¡æœ‰è¿™äº›å®æ“è®°å½•ï¼Œå†™çš„ç¼–ç¨‹æ–‡ç« å°±ä¼šè™šæ— å¾ˆå¤šï¼Œä¸ºäº†ä¸€é±¼å¤šåƒä¹Ÿè¦è®°å½•ä¸€ä¸‹ã€‚</strong></p>
<p>è¿™ä¸ªæ—¶å€™å°±ä¼šç”¨åˆ°æ™ºèƒ½ä½“åŠŸèƒ½ï¼Œè®©ä»–æ‰®æ¼”guidebookåŠ©æ‰‹ï¼Œç»™ä»–äººè®¾å°±è¡Œäº†ã€‚è¿™ä¸ªè¿‡ç¨‹å…¶å®æ¯”åœ¨ä¸€äº›cliå·¥å…·é‡Œå»é…ç½®ä¸€ä¸ªagentè¦æ–¹ä¾¿ç‚¹ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a428f856b3504b829734de8b2e800802~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_5pifQUnlt6XkvZzlrqQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767370712&amp;x-signature=5i9J07qPYCMlWiZxdTWoe9%2BrfbE%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6817a064a4de4741919e2cd2273a00a7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_5pifQUnlt6XkvZzlrqQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767370712&amp;x-signature=1GeofwTzorPZl9K5BQc4JUlWjqE%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><strong>é˜¿æ˜Ÿä¹‹å‰ä¹Ÿæ˜¯åœ¨clié‡Œé…agentï¼Œä½†æ˜¯å¼•ç”¨èµ·æ¥å¤ªéº»çƒ¦äº†</strong>ï¼Œä¸€ä¸ªæ˜¯å¯è§†åŒ–ä¿¡æ¯æœ‰é™çš„æƒ…å†µä¸‹å¤ªè€ƒéªŒè®°æ€§ï¼Œä¸€ä¸ªæ˜¯å®¹æ˜“æ‰“å‡»æ–°æ‰‹ç§¯ææ€§ï¼Œæ‰€ä»¥æ›´å€¾å‘äºç›´æ¥åœ¨IDEé‡Œç”¨æ™ºèƒ½ä½“æå®šã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/637ee2b8c0a943e58fe912d29730730d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_5pifQUnlt6XkvZzlrqQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767370712&amp;x-signature=ofRimE6M68nhg18OvJjS9YAkWTs%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>è€Œä¸”æˆ‘è•å–œæ¬¢çš„æ˜¯<strong>å®ƒå¯ä»¥ç›´æ¥ç›´æ¥è®©æœ‹å‹å¤ç”¨ï¼Œå®ƒç›¸å½“äºæ˜¯æŠŠæç¤ºè¯çš„åŠŸèƒ½ç›´æ¥æ’ä»¶åŒ–äº†ï¼Œè®©å’±ä»¬ä¸»æ‰“ä¸€ä¸ªæ´»å„¿ä¸å¹²ä¸¤é</strong>ã€‚ä¹Ÿä¸ç”¨ç›¸äº’å‘æç¤ºè¯ç²˜æ¥ç²˜å»äº†ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d7bf882f59b54ade8544306bf7be08d3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_5pifQUnlt6XkvZzlrqQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767370712&amp;x-signature=1pWPHI5Rvov2TqIUxS5s8mTycJ8%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h2 data-id="heading-3">4ã€å‰ç«¯é¡¹ç›®ï¼Œç›´æ¥é€‰æ‹©å…ƒç´ </h2>
<p>é˜¿æ˜Ÿè§‰å¾—å‡¡æ˜¯æ¶‰åŠåˆ°å‰ç«¯è§†è§‰çš„ç²¾ç»†åŒ–æ§åˆ¶</p>
<p>promptçš„æ•ˆç‡å…¶å®æ¯”è§†è§‰ç‚¹å‡»è¦ä½å¾ˆå¤š</p>
<p>æ‰€ä»¥æˆ‘è‡ªå·±ç»å¸¸ç”¨çš„è¿˜æœ‰å…ƒç´ é€‰æ‹©ï¼Œä¸ç”¨æˆ‘ä¸€ç›´å˜šå•µå˜šåˆ°åº•æ”¹å“ªé‡Œäº†ï¼Œæ•ˆç‡é«˜äº†å¾ˆå¤š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ff94331a0fc743509c3be51e35393800~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_5pifQUnlt6XkvZzlrqQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767370712&amp;x-signature=P5HWpDpj2Xgwt7RhB1IxUhStws8%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>figmaçš„å‰ç«¯æˆ‘éƒ½ç›´æ¥ç”¨mcpäº†ï¼Œä¸ªäººæ„Ÿè§‰æ˜¯æ‰“é€šè®¾è®¡ä¸å¼€å‘çš„å…³é”®ä¸€æ­¥ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1cfd06042db94e92bc23e5b1d937d107~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_5pifQUnlt6XkvZzlrqQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767370712&amp;x-signature=2rW7Jzo8Mi5Krlgn5YbWwZ8M0oM%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h2 data-id="heading-4">5ã€å¼•ç”¨ä¸Šä¸‹æ–‡</h2>
<p>ç¼–ç¨‹çš„æ—¶å€™ä¸è¦ç›´æ¥å»æé—®ï¼Œæœ€å¥½é€‰ä¸­ä½ è¦æ”¹çš„ä¸Šä¸‹æ–‡å†æé—®ï¼Œ</p>
<p>è€Œä¸”ç°åœ¨IDEå¯ä»¥å¼•ç”¨çš„ä¸Šä¸‹æ–‡å¾ˆå¤šï¼Œç»ˆç«¯é‡Œçš„æŠ¥é”™ä¹Ÿèƒ½ç›´æ¥åŠ è¿›å»ï¼Œæ–‡ä»¶ã€æ–‡ä»¶å¤¹ã€å·¥ä½œåŒºã€æ–‡æ¡£é›†å’Œç½‘é¡µå…¶å®éƒ½å¯ä»¥ä½œä¸ºæ•´ä¸ªé¡¹ç›®çš„ä¸Šä¸‹æ–‡æ·»åŠ è¿›å»ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/aefc165221994d4db3e966cf4161791c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_5pifQUnlt6XkvZzlrqQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767370712&amp;x-signature=8TLnymHEho2vl4oANPNls4ZtoKs%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h2 data-id="heading-5">6ã€æ•°æ®åº“å¯ä»¥ç›´æ¥è¿supabase mcp</h2>
<p>ä¹‹å‰é˜¿æ˜Ÿåªæ˜¯åšç‚¹ä¸å¸¦æ•°æ®åº“çš„å‰ç«¯é¡¹ç›®</p>
<p>ä½†æ˜¯åšç€åšç€å¿…ç„¶ä¼šç”¨åˆ°æ•°æ®åº“å•Šï¼Œç‰¹åˆ«æ˜¯ä¸€äº›è¦åšå‡ºæµ·çš„åŒå­¦</p>
<p>é˜¿æ˜Ÿä»¥å‰æ¿€æ´»æ•°æ®åº“æ˜¯ç›´æ¥è®©AIå»æ¥API</p>
<pre><code class="hljs language-arduino" lang="arduino">
<span class="hljs-keyword">import</span>Â { createClient }Â fromÂ <span class="hljs-string">'@supabase/supabase-js'</span>

<span class="hljs-type">const</span>Â supabaseUrl =Â <span class="hljs-string">'https://okqxrigpjgoncvoflenz.supabase.co'</span>
<span class="hljs-type">const</span>Â supabaseKey = process.env.SUPABASE_KEY
<span class="hljs-type">const</span>Â supabase =Â <span class="hljs-built_in">createClient</span>(supabaseUrl, supabaseKey)
</code></pre>
<p>åæ¥å‘ç°mcpå¯ä»¥è‡ªå·±æå®šâ€¢á´—â€¢ğŸ’§é™¤äº†åˆšå¼€å§‹é…ç½®å¯èƒ½æœ‰ç‚¹æ‡µæ²¡å•¥å¤§é—®é¢˜</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2d5f9bd683d74d3181bdd878b7b0e96c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_5pifQUnlt6XkvZzlrqQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767370712&amp;x-signature=dsmiyrxncaezCc8rh5Ammb5ut%2BI%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>MCP = AIç”¨ç»Ÿä¸€çš„å·¥å…·è°ƒç”¨æ–¹å¼è®¿é—®æ•°æ®åº“</p>
<p>çœ‹æ–‡æ¡£ =AIæ¯æ¬¡éƒ½è¦ç†è§£APIæ ¼å¼ã€æ„é€ è¯·æ±‚ï¼Œå°ç™½å®¹æ˜“å‡ºé”™ï¼Œç‰¹åˆ«æˆ‘ä»¬é¢‘ç¹ä¿®æ”¹çš„æ—¶å€™</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/343fc5836a8547a9b9071b75a46a8bc3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_5pifQUnlt6XkvZzlrqQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767370712&amp;x-signature=e2v7YizBO%2FMFoIDZwsjMmv37EFM%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æ‰€ä»¥ï¼Œç®€å•çš„éœ€æ±‚ç›´æ¥é…å°±è¡Œäº†ï¼ŒÂ <strong>æˆ‘ä¸€èˆ¬ç›´æ¥æ·»åŠ mcpï¼Œ Connect Supabaseã€‚</strong></p>
<h2 data-id="heading-6">7ã€æ´»ç”¨tab</h2>
<p>æˆ‘ä¸ªäººæ˜¯ç”¨tabæ¯”è¾ƒå°‘çš„ï¼Œæ˜¯ä¸ªæ‡’äººã€‚è¢«å¹´ç»ˆæ€»ç»“æ‹†ç©¿äº†ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4a05018654f240b593cb30cd3dc578af~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_5pifQUnlt6XkvZzlrqQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767370712&amp;x-signature=xY3R6HtAyvz9licMdjwEYztJB5g%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>TRAEé‡Œçš„è¿™ä¸ªtabåŠŸèƒ½ä¸»è¦æ˜¯åšä»£ç è¡¥å…¨ã€å¤šè¡Œä¿®æ”¹çš„</p>
<p>æŒ‰ä¸‹ Tab é”®ï¼Œè·³è½¬è‡³ä¿®æ”¹ç‚¹æ‰€åœ¨ä½ç½®ã€‚</p>
<p>Ctrl / Command + â†’ ç»„åˆé”®é€å­—æ¥å—ä¸€ä¸ªå»ºè®®çš„ä¿®æ”¹ã€‚</p>
<p>Escape é”®æ‹’ç»å°±å¥½ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6c4e08734d664093a21b800cda5cb3a9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_5pifQUnlt6XkvZzlrqQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767370712&amp;x-signature=3Wrqy92J%2BUX4Qh3UoBA0JQgiV9c%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bbadf3eec77d43aa8cf50978110e4583~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_5pifQUnlt6XkvZzlrqQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767370712&amp;x-signature=%2BdH1%2Fu6GJtSchPK%2BP07ks4nd3IY%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ç°åœ¨ç»å¸¸ç”¨tabåŠŸèƒ½çš„éƒ½æ˜¯å¤§ç¥äº†ğŸ˜‚</p>
<p>è¦çœŸå­¦ä»£ç çœŸç¼–ç¨‹è¿˜æ˜¯å¾—çœ‹çš„æ›´ç»†ä¸€ç‚¹ã€‚</p>
<h2 data-id="heading-7">8ã€ç‰ˆæœ¬æ§åˆ¶</h2>
<p>å’±ä»¬å†™ä»£ç çš„æ—¶å€™éƒ½è¦æäº¤å¾ˆå¤šgitç‰ˆæœ¬ï¼Œ</p>
<p>ä½†æ˜¯æ”¹ä¸€ç‰ˆè¾“å…¥ä¸€æ¬¡æäº¤å‘½ä»¤å°±å¤ªéº»çƒ¦äº†ã€‚</p>
<p>å¯ä»¥ç”¨ä¸€äº›æ’ä»¶ï¼ŒæŠŠgit Hubç½‘é¡µåŠŸèƒ½é›†æˆåˆ°ä½ çš„æœ¬åœ°ç¼–è¾‘å™¨é‡Œã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/19050f6813414580bd8f5cba26d7a686~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_5pifQUnlt6XkvZzlrqQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767370712&amp;x-signature=wmesMj4PojvCunnJG1xPbUfch8E%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ç›´æ¥å°±èƒ½æ¨é€ä»£ç äº†ï¼ŒTRAEæœ‰ä¸ªä¼˜ç‚¹ï¼Œé™¤äº†gitè¿˜èƒ½æ›´ç›´è§‚åœ°ç›´æ¥åœ¨å•ä¸ªå¥å­æ—è¾¹å›é€€</p>
<p>è‡³å°‘èƒ½ç»™æˆ‘å‚¨å­˜10ä¸ªç‰ˆæœ¬ä»¥é˜²ä¸‡ä¸€</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fdae4ec3b08e44259e1a5aa0b21b4218~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_5pifQUnlt6XkvZzlrqQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767370712&amp;x-signature=W%2BweCeUQbVsD5lYbkeE6wtnqDe0%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h2 data-id="heading-8">9ã€ç®¡å¥½ä½ å’ŒAIçš„èŠå¤©è®°å½•</h2>
<p>æˆ‘è‡ªå·±åˆšæ¥è§¦ä¸€äº›cliå·¥å…·çš„æ—¶å€™ï¼Œ</p>
<p>å®Œå…¨æ‰¾ä¸åˆ°å“ªé‡Œå»çœ‹èŠå¤©è®°å½•å†å»çœ‹ç½‘ä¸Šå„ç§æ’ä»¶æ¥åšèŠå¤©è®°å½•ä¿å­˜çš„ï¼Œ</p>
<p>å¯¹å°ç™½æ¥è¯´å…‰æ˜¯è®¾ç½®è¿™äº›ä¸œè¥¿éƒ½æ™•äº†</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7397cd92a01442e5a73035da51e2e707~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_5pifQUnlt6XkvZzlrqQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767370712&amp;x-signature=Lw4YuX63Kamw6gPkle25mqBD%2FGU%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>åæ¥æ‰å¼€å§‹ç”¨mcpç®¡èŠå¤©è®°å½•ï¼Œ</p>
<p>è¿™ç§mcpä¸€èˆ¬å¯ä»¥è‡ªåŠ¨è®°å½•å¯¹è¯å†å²ï¼Œæ™ºèƒ½ç®¡ç†ä¸Šä¸‹æ–‡ï¼Œå¹¶è·Ÿè¸ªä»»åŠ¡ã€‚ä¸å¦¨æ¢ç´¢ä¸€ä¸‹ã€‚</p>
<h2 data-id="heading-9">10ã€soloä¸æ˜¯éç”¨ä¸å¯</h2>
<p>æ•´ä¸ªè¿‡ç¨‹æˆ‘è‡ªå·±ç”¨çš„æ˜¯IDEï¼Œ</p>
<p>å› ä¸º solo æ¨¡å¼çš„è¯ï¼Œå¯¹æˆ‘æ¥è¯´è¿˜æ˜¯æœ‰ç‚¹å¤ªé‡é©¬è„±ç¼°äº†ã€‚</p>
<p>æ‰€ä»¥æˆ‘å»ºè®®åŠè·¯çš„å°ç™½ï¼Œ</p>
<p>å¦‚æœæƒ³åš vibe coding çš„è¯ï¼Œ</p>
<p>å¤§å®¶å¯ä»¥æ ¹æ®è‡ªå·±çš„ä¹ æƒ¯é€‰æ‹©</p>
<p>æ— è®ºæ˜¯ideæ¨¡å¼è¿˜æ˜¯soloæ¨¡å¼</p>
<p>æœ€å¥½æ˜¯ä¸€è¾¹çœ‹ä¸€è¾¹å­¦ï¼Œ æŠŠæ¯ä¸€æ¬¡ç¼–ç¨‹æ–°å­¦åˆ°çš„çŸ¥è¯†ç‚¹</p>
<p>æ²‰æ·€åˆ°ç›¸å…³çš„æ–‡æ¡£é‡Œï¼Œä¸‹æ¬¡å‡ºå‘ä½ å°±æ˜¯æœ€æ£’çš„å•¦ï½</p>
<p>Â </p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ee137d933e394e7dab95badf526a44d1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_5pifQUnlt6XkvZzlrqQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767370712&amp;x-signature=puMYQS4nCKztVZEzloB9gG4QVLk%3D" alt="å›¾ç‰‡" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[èµ‹äºˆå¤§æ¨¡å‹â€œè®°å¿†â€ï¼šæ·±åº¦è§£æ LangChain ä¸­ LLM çš„ä¸Šä¸‹æ–‡è®°å¿†å®ç°]]></title>    <link>https://juejin.cn/post/7587997893988335643</link>    <guid>https://juejin.cn/post/7587997893988335643</guid>    <pubDate>2025-12-27T02:57:54.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587997893988335643" data-draft-id="7587630413012156426" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="èµ‹äºˆå¤§æ¨¡å‹â€œè®°å¿†â€ï¼šæ·±åº¦è§£æ LangChain ä¸­ LLM çš„ä¸Šä¸‹æ–‡è®°å¿†å®ç°"/> <meta itemprop="keywords" content="LangChain,JavaScript,LLM"/> <meta itemprop="datePublished" content="2025-12-27T02:57:54.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="AAAé˜¿giao"/> <meta itemprop="url" content="https://juejin.cn/user/473218785740627"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            èµ‹äºˆå¤§æ¨¡å‹â€œè®°å¿†â€ï¼šæ·±åº¦è§£æ LangChain ä¸­ LLM çš„ä¸Šä¸‹æ–‡è®°å¿†å®ç°
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/473218785740627/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    AAAé˜¿giao
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-27T02:57:54.000Z" title="Sat Dec 27 2025 02:57:54 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Â å¼•è¨€</h2>
<blockquote>
<p><strong>â€œæˆ‘å« Agiaoï¼Œå–œæ¬¢å–ç™½å…°åœ°ã€‚â€</strong><br/>
â€”â€” ä½ è¯´å®Œè¿™å¥è¯ï¼Œè½¬èº«ç¦»å¼€ã€‚<br/>
å†å›æ¥é—®ï¼šâ€œæˆ‘å«ä»€ä¹ˆåå­—ï¼Ÿâ€<br/>
å¦‚æœ AI å›ç­”â€œæˆ‘ä¸çŸ¥é“â€ï¼Œé‚£å®ƒåªæ˜¯ä¸ªæ— çŠ¶æ€çš„ APIï¼›<br/>
å¦‚æœå®ƒå›ç­”â€œAgiaoâ€ï¼Œé‚£å®ƒå°±æ‹¥æœ‰äº†<strong>è®°å¿†</strong>ã€‚</p>
</blockquote>
<p>åœ¨äººå·¥æ™ºèƒ½çš„ä¸–ç•Œé‡Œï¼Œâ€œè®°å¿†â€ä¸æ˜¯ä¸ç”Ÿä¿±æ¥çš„å¤©èµ‹ï¼Œè€Œæ˜¯ä¸€ç§ç²¾å¿ƒè®¾è®¡çš„å·¥ç¨‹èƒ½åŠ›ã€‚å¤§å‹è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰æœ¬èº«æ˜¯<strong>æ— çŠ¶æ€</strong>çš„â€”â€”æ¯ä¸€æ¬¡è°ƒç”¨éƒ½åƒä¸€åœºå…¨æ–°çš„å¯¹è¯ï¼Œæ¨¡å‹å¯¹è¿‡å»ä¸€æ— æ‰€çŸ¥ã€‚ç„¶è€Œï¼Œç°å®ä¸­çš„æ™ºèƒ½äº¤äº’å¿…é¡»å…·å¤‡ä¸Šä¸‹æ–‡è¿è´¯æ€§ã€‚å¦‚ä½•è®© LLM â€œè®°ä½ä½ â€ï¼Ÿè¿™æ­£æ˜¯æˆ‘ä»¬ä»Šå¤©è¦æ·±å…¥å‰–æçš„æ ¸å¿ƒé—®é¢˜ã€‚</p>
<p>æœ¬æ–‡å°†é€è¡Œã€é€æ¨¡å—ã€é€ API åœ°è§£æÂ <code>1.js</code> æ–‡ä»¶ï¼Œæ­ç¤º LangChain å¦‚ä½•é€šè¿‡ <strong>å¯¹è¯å†å²ç®¡ç†æœºåˆ¶</strong> èµ‹äºˆ LLM çœŸæ­£çš„è®°å¿†èƒ½åŠ›ã€‚æˆ‘ä»¬å°†ä¸ä»…è§£é‡Šâ€œæ€ä¹ˆåšâ€ï¼Œæ›´è¦é˜æ˜â€œä¸ºä»€ä¹ˆè¿™ä¹ˆåšâ€ï¼Œå¹¶å¯¹æ¯”æ— è®°å¿†ç‰ˆæœ¬ï¼ˆ<code>index.js</code>ï¼‰çš„å±€é™ï¼Œæœ€ç»ˆæ„å»ºä¸€ä¸ªå®Œæ•´ã€ç”ŸåŠ¨ã€æŠ€æœ¯æ‰å®çš„è®¤çŸ¥å›¾æ™¯ã€‚</p>
<hr/>
<h2 data-id="heading-1">èƒŒæ™¯ï¼šä¸ºä»€ä¹ˆ LLM é»˜è®¤æ²¡æœ‰è®°å¿†ï¼Ÿ</h2>
<p>é¦–å…ˆï¼Œè®©æˆ‘ä»¬å›åˆ°åŸºç¡€ã€‚</p>
<blockquote>
<p><strong>LLM API è°ƒç”¨å’Œ http è¯·æ±‚ä¸€æ ·ï¼Œéƒ½æ˜¯æ— çŠ¶æ€çš„</strong></p>
</blockquote>
<p>è¿™æ„å‘³ç€æ¯æ¬¡ä½ å‘æ¨¡å‹å‘é€ä¸€æ¡æ¶ˆæ¯ï¼ˆä¾‹å¦‚ <code>"æˆ‘å«Agiao"</code>ï¼‰ï¼Œæ¨¡å‹ä»…åŸºäºè¿™æ¡æ¶ˆæ¯ç”Ÿæˆå›å¤ï¼Œä¸ä¼šè‡ªåŠ¨ä¿ç•™ä»»ä½•ä¸Šä¸‹æ–‡ã€‚å¦‚æœä½ ç´§æ¥ç€å†å‘ä¸€æ¡ <code>"æˆ‘å«ä»€ä¹ˆåå­—ï¼Ÿ"</code>ï¼Œæ¨¡å‹æ ¹æœ¬ä¸çŸ¥é“å‰ä¸€æ¡æ¶ˆæ¯çš„å­˜åœ¨ã€‚</p>
<p>æˆ‘ä»¬æ¥çœ‹ <code>index.js</code> çš„å®ç°ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> {<span class="hljs-title class_">ChatDeepSeek</span>} <span class="hljs-keyword">from</span> <span class="hljs-string">'@langchain/deepseek'</span>
<span class="hljs-keyword">import</span> <span class="hljs-string">'dotenv/config'</span>

<span class="hljs-keyword">const</span> model = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ChatDeepSeek</span>({ <span class="hljs-attr">model</span>: <span class="hljs-string">'deepseek-chat'</span>, <span class="hljs-attr">temperature</span>: <span class="hljs-number">0</span>});

<span class="hljs-comment">// http api è¯·æ±‚</span>
<span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> model.<span class="hljs-title function_">invoke</span>(<span class="hljs-string">'æˆ‘å«Agiaoï¼Œå–œæ¬¢å–ç™½å…°åœ°'</span>)
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(res.<span class="hljs-property">content</span>);

<span class="hljs-keyword">const</span> res2 = <span class="hljs-keyword">await</span> model.<span class="hljs-title function_">invoke</span>(<span class="hljs-string">'æˆ‘å«ä»€ä¹ˆåå­—'</span>)
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(res2.<span class="hljs-property">content</span>);
</code></pre>
<p>è¿™æ®µä»£ç åšäº†ä¸¤ä»¶äº‹ï¼š</p>
<ol>
<li>ç¬¬ä¸€æ¬¡è°ƒç”¨ <code>model.invoke(...)</code>ï¼Œå‘Šè¯‰æ¨¡å‹ä½ çš„åå­—å’Œå–œå¥½ã€‚</li>
<li>ç¬¬äºŒæ¬¡ç‹¬ç«‹è°ƒç”¨ <code>model.invoke(...)</code>ï¼Œè¯¢é—®è‡ªå·±çš„åå­—ã€‚</li>
</ol>
<p>ç”±äºä¸¤æ¬¡è°ƒç”¨ä¹‹é—´<strong>æ²¡æœ‰ä»»ä½•ä¿¡æ¯ä¼ é€’</strong>ï¼Œç¬¬äºŒæ¬¡è¯·æ±‚å¯¹æ¨¡å‹è€Œè¨€å®Œå…¨æ˜¯å­¤ç«‹çš„ã€‚å› æ­¤ï¼Œæ¨¡å‹æå¤§æ¦‚ç‡ä¼šå›ç­”ç±»ä¼¼ï¼šâ€œæŠ±æ­‰ï¼Œæˆ‘ä¸çŸ¥é“æ‚¨å«ä»€ä¹ˆåå­—ã€‚â€â€”â€”è¿™ä¸æ˜¯æ¨¡å‹ç¬¨ï¼Œè€Œæ˜¯æ¶æ„ä½¿ç„¶ã€‚</p>
<blockquote>
<p>ğŸ’¡ <strong>å…³é”®æ´å¯Ÿ</strong>ï¼šè¦å®ç°è®°å¿†ï¼Œæˆ‘ä»¬å¿…é¡»<strong>ä¸»åŠ¨ç»´æŠ¤å¯¹è¯å†å²ï¼Œå¹¶åœ¨æ¯æ¬¡è¯·æ±‚æ—¶å°†å…¶ä½œä¸ºä¸Šä¸‹æ–‡ä¼ å…¥æ¨¡å‹</strong>ã€‚</p>
</blockquote>
<p>ä½†å¦‚ä½•é«˜æ•ˆã€ç»“æ„åŒ–ã€å¯æ‰©å±•åœ°åšåˆ°è¿™ä¸€ç‚¹ï¼Ÿè¿™å°±æ˜¯ LangChain çš„ç”¨æ­¦ä¹‹åœ°ã€‚</p>
<hr/>
<h2 data-id="heading-2">æ¶æ„é¢„è§ˆï¼šLangChain çš„è®°å¿†æŠ½è±¡</h2>
<p>LangChain æä¾›äº†ä¸€å¥—å®Œæ•´çš„â€œè®°å¿†â€ï¼ˆMemoryï¼‰æ¨¡å—ï¼Œå…¶æ ¸å¿ƒæ€æƒ³æ˜¯ï¼š</p>
<blockquote>
<p><strong>å°†å¯¹è¯å†å²è§†ä¸ºä¸€ç§å¯æ’æ‹”çš„ä¸Šä¸‹æ–‡æºï¼Œåœ¨æ¯æ¬¡è°ƒç”¨ LLM å‰åŠ¨æ€æ³¨å…¥åˆ° Prompt ä¸­ã€‚</strong></p>
</blockquote>
<p>åœ¨ <code>1.js</code> ä¸­ï¼Œè¿™ä¸€æ€æƒ³é€šè¿‡ä»¥ä¸‹ç»„ä»¶ååŒå®ç°ï¼š</p>
<ul>
<li><code>InMemoryChatMessageHistory</code>ï¼šå­˜å‚¨å¯¹è¯å†å²ã€‚</li>
<li><code>ChatPromptTemplate</code>ï¼šå®šä¹‰åŒ…å«å†å²å ä½ç¬¦çš„æç¤ºæ¨¡æ¿ã€‚</li>
<li><code>RunnableWithMessageHistory</code>ï¼šè‡ªåŠ¨ç®¡ç†å†å²åŠ è½½ä¸ä¿å­˜çš„åŒ…è£…å™¨ã€‚</li>
<li><code>ChatDeepSeek</code>ï¼šåº•å±‚ LLM æ¨¡å‹ã€‚</li>
</ul>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†é€è¡Œæ‹†è§£ <code>1.js</code>ï¼Œæ·±å…¥æ¯ä¸€ä¸ª API çš„è®¾è®¡å“²å­¦ä¸å®ç°ç»†èŠ‚ã€‚</p>
<hr/>
<h2 data-id="heading-3">é€è¡Œæ·±åº¦è§£æ <code>1.js</code></h2>
<h3 data-id="heading-4">ç¬¬ä¸€éƒ¨åˆ†ï¼šæ¨¡å—å¯¼å…¥ï¼ˆImport Statementsï¼‰</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">ChatDeepSeek</span>} <span class="hljs-keyword">from</span> <span class="hljs-string">'@langchain/deepseek'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ChatPromptTemplate</span>} <span class="hljs-keyword">from</span> <span class="hljs-string">'@langchain/core/prompts'</span>;
<span class="hljs-comment">// å¸¦ä¸Šå†å²è®°å½•çš„å¯è¿è¡Œå¯¹è±¡</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">RunnableWithMessageHistory</span>} <span class="hljs-keyword">from</span> <span class="hljs-string">'@langchain/core/runnables'</span>;
<span class="hljs-comment">// å­˜æ”¾åœ¨å†…å­˜ä¸­</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">InMemoryChatMessageHistory</span>} <span class="hljs-keyword">from</span> <span class="hljs-string">'@langchain/core/chat_history'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">'dotenv/config'</span>;
</code></pre>
<h4 data-id="heading-5">âœ… <code>ChatDeepSeek</code></h4>
<ul>
<li>
<p>æ¥æºï¼š<code>@langchain/deepseek</code></p>
</li>
<li>
<p>ä½œç”¨ï¼šå°è£… DeepSeek æä¾›çš„èŠå¤©æ¨¡å‹ APIï¼Œä½¿å…¶ç¬¦åˆ LangChain çš„ <code>BaseChatModel</code> æ¥å£ã€‚</p>
</li>
<li>
<p>ç‰¹æ€§ï¼š</p>
<ul>
<li>æ”¯æŒ <code>invoke()</code>ã€<code>stream()</code> ç­‰æ ‡å‡†æ–¹æ³•ã€‚</li>
<li>è‡ªåŠ¨å¤„ç†æ¶ˆæ¯æ ¼å¼ï¼ˆå¦‚ <code>HumanMessage</code>, <code>AIMessage</code>ï¼‰ã€‚</li>
<li>å¯é…ç½® <code>model</code>ã€<code>temperature</code>ã€<code>maxTokens</code> ç­‰å‚æ•°ã€‚</li>
</ul>
</li>
</ul>
<h4 data-id="heading-6">âœ… <code>ChatPromptTemplate</code></h4>
<ul>
<li>
<p>æ¥æºï¼š<code>@langchain/core/prompts</code></p>
</li>
<li>
<p>ä½œç”¨ï¼šæ„å»ºç»“æ„åŒ–çš„èŠå¤©æç¤ºï¼ˆpromptï¼‰ï¼Œæ”¯æŒç³»ç»Ÿæ¶ˆæ¯ã€ç”¨æˆ·æ¶ˆæ¯ã€AI æ¶ˆæ¯åŠå ä½ç¬¦ã€‚</p>
</li>
<li>
<p>å…³é”®èƒ½åŠ›ï¼š</p>
<ul>
<li>ä½¿ç”¨ <code>fromMessages()</code> é™æ€æ–¹æ³•ä»æ¶ˆæ¯æ•°ç»„åˆ›å»ºæ¨¡æ¿ã€‚</li>
<li>æ”¯æŒå˜é‡æ’å€¼ï¼ˆå¦‚ <code>{input}</code>, <code>{history}</code>ï¼‰ã€‚</li>
<li>è¾“å‡ºä¸º <code>Runnable</code>ï¼Œå¯ä¸å…¶ä»–ç»„ä»¶é“¾å¼ç»„åˆï¼ˆ<code>.pipe()</code>ï¼‰ã€‚</li>
</ul>
</li>
</ul>
<h4 data-id="heading-7">âœ… <code>RunnableWithMessageHistory</code></h4>
<ul>
<li>
<p>æ¥æºï¼š<code>@langchain/core/runnables</code></p>
</li>
<li>
<p><strong>è¿™æ˜¯å®ç°è®°å¿†çš„æ ¸å¿ƒæŠ½è±¡ï¼</strong></p>
</li>
<li>
<p>ä½œç”¨ï¼šåŒ…è£…ä¸€ä¸ªæ™®é€šçš„ <code>Runnable</code>ï¼ˆå¦‚ LLM è°ƒç”¨é“¾ï¼‰ï¼Œä½¿å…¶å…·å¤‡è‡ªåŠ¨åŠ è½½å’Œä¿å­˜å¯¹è¯å†å²çš„èƒ½åŠ›ã€‚</p>
</li>
<li>
<p>å·¥ä½œåŸç†ï¼š</p>
<ul>
<li>åœ¨æ¯æ¬¡ <code>.invoke()</code> æ—¶ï¼Œå…ˆä» <code>getMessageHistory</code> è·å–å½“å‰ä¼šè¯çš„å†å²ã€‚</li>
<li>å°†å†å²æ³¨å…¥åˆ°è¾“å…¥ä¸­ï¼ˆé€šè¿‡ <code>historyMessagesKey</code> æŒ‡å®šçš„å­—æ®µï¼‰ã€‚</li>
<li>è°ƒç”¨å†…éƒ¨ <code>runnable</code>ã€‚</li>
<li>å°†ç”¨æˆ·è¾“å…¥å’Œæ¨¡å‹è¾“å‡º<strong>è‡ªåŠ¨è¿½åŠ </strong>åˆ°å†å²è®°å½•ä¸­ã€‚</li>
</ul>
</li>
</ul>
<blockquote>
<p>âš ï¸ æ³¨æ„ï¼š<code>RunnableWithMessageHistory</code> å¹¶ä¸å…³å¿ƒå†å²å¦‚ä½•å­˜å‚¨ï¼ˆå†…å­˜ã€æ•°æ®åº“ã€Redisï¼‰ï¼Œå®ƒåªä¾èµ– <code>getMessageHistory</code> å‡½æ•°è¿”å›ä¸€ä¸ªå®ç°äº† <code>BaseChatMessageHistory</code> æ¥å£çš„å¯¹è±¡ã€‚</p>
</blockquote>
<h4 data-id="heading-8">âœ… <code>InMemoryChatMessageHistory</code></h4>
<ul>
<li>
<p>æ¥æºï¼š<code>@langchain/core/chat_history</code></p>
</li>
<li>
<p>ä½œç”¨ï¼šæœ€ç®€å•çš„å¯¹è¯å†å²å­˜å‚¨å®ç°ï¼Œå°†æ‰€æœ‰æ¶ˆæ¯ä¿å­˜åœ¨ JavaScript å†…å­˜æ•°ç»„ä¸­ã€‚</p>
</li>
<li>
<p>æ¥å£æ–¹æ³•ï¼š</p>
<ul>
<li><code>getMessages()</code>ï¼šè¿”å›å½“å‰æ‰€æœ‰æ¶ˆæ¯ã€‚</li>
<li><code>addMessage(message)</code>ï¼šæ·»åŠ ä¸€æ¡æ–°æ¶ˆæ¯ã€‚</li>
<li><code>clear()</code>ï¼šæ¸…ç©ºå†å²ã€‚</li>
</ul>
</li>
<li>
<p>é€‚ç”¨åœºæ™¯ï¼šå•ä¼šè¯æ¼”ç¤ºã€æµ‹è¯•ã€‚<strong>ä¸é€‚åˆç”Ÿäº§ç¯å¢ƒå¤šç”¨æˆ·åœºæ™¯</strong>ï¼ˆå› ä¸ºæ‰€æœ‰ä¼šè¯å…±äº«åŒä¸€å®ä¾‹ï¼Œä¸”è¿›ç¨‹é‡å¯åä¸¢å¤±ï¼‰ã€‚</p>
</li>
</ul>
<h4 data-id="heading-9">âœ… <code>dotenv/config</code></h4>
<ul>
<li>åŠ è½½ <code>.env</code> æ–‡ä»¶ä¸­çš„ç¯å¢ƒå˜é‡ï¼ˆå¦‚ <code>DEEPSEEK_API_KEY</code>ï¼‰ï¼Œç¡®ä¿æ¨¡å‹è®¤è¯ä¿¡æ¯å®‰å…¨ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-10">ç¬¬äºŒéƒ¨åˆ†ï¼šæ¨¡å‹åˆå§‹åŒ–</h3>
<pre><code class="hljs language-ini" lang="ini">const <span class="hljs-attr">model</span> = new ChatDeepSeek({ model: <span class="hljs-string">'deepseek-chat'</span>, temperature: <span class="hljs-number">0</span>})<span class="hljs-comment">;</span>
</code></pre>
<ul>
<li><code>model: 'deepseek-chat'</code>ï¼šæŒ‡å®šä½¿ç”¨ DeepSeek çš„èŠå¤©ä¸“ç”¨æ¨¡å‹ã€‚</li>
<li><code>temperature: 0</code>ï¼šå…³é—­éšæœºæ€§ï¼Œç¡®ä¿ç›¸åŒè¾“å…¥æ€»æ˜¯äº§ç”Ÿç›¸åŒè¾“å‡ºâ€”â€”è¿™å¯¹éœ€è¦ç²¾ç¡®è®°å¿†çš„åœºæ™¯è‡³å…³é‡è¦ï¼ˆé¿å…å› éšæœºæ€§å¯¼è‡´â€œå¿˜è®°â€ï¼‰ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-11">ç¬¬ä¸‰éƒ¨åˆ†ï¼šæ„å»ºå¸¦è®°å¿†çš„ Prompt æ¨¡æ¿</h3>
<pre><code class="hljs language-css" lang="css">const prompt = ChatPromptTemplate<span class="hljs-selector-class">.fromMessages</span>(<span class="hljs-selector-attr">[  [<span class="hljs-string">'system'</span>, <span class="hljs-string">"ä½ æ˜¯ä¸€ä¸ªæœ‰è®°å¿†çš„åŠ©æ‰‹"</span>]</span>,
  <span class="hljs-selector-attr">[<span class="hljs-string">'placeholder'</span>, <span class="hljs-string">"{history}"</span>]</span>,
  <span class="hljs-selector-attr">[<span class="hljs-string">'human'</span>, <span class="hljs-string">"{input}"</span>]</span>
])
</code></pre>
<p>è¿™æ˜¯æ•´ä¸ªè®°å¿†æœºåˆ¶çš„<strong>æç¤ºå·¥ç¨‹æ ¸å¿ƒ</strong>ã€‚</p>
<h4 data-id="heading-12">æ¶ˆæ¯ç»“æ„è§£æï¼š</h4>
<ol>
<li>
<p><code>['system', "ä½ æ˜¯ä¸€ä¸ªæœ‰è®°å¿†çš„åŠ©æ‰‹"]</code></p>
<ul>
<li>ç³»ç»Ÿæ¶ˆæ¯ï¼Œç”¨äºè®¾å®š AI çš„è§’è‰²å’Œè¡Œä¸ºå‡†åˆ™ã€‚</li>
<li>å‘Šè¯‰æ¨¡å‹ï¼šâ€œä½ æœ‰èƒ½åŠ›è®°ä½ä¹‹å‰çš„å¯¹è¯ï¼Œè¯·åˆ©ç”¨è¿™äº›ä¿¡æ¯ã€‚â€</li>
</ul>
</li>
<li>
<p><code>['placeholder', "{history}"]</code></p>
<ul>
<li>
<p><strong>å…³é”®ï¼</strong> è¿™ä¸æ˜¯ä¸€ä¸ªæ™®é€šå­—ç¬¦ä¸²ï¼Œè€Œæ˜¯ä¸€ä¸ª<strong>å ä½ç¬¦æŒ‡ä»¤</strong>ã€‚</p>
</li>
<li>
<p>LangChain åœ¨æ¸²æŸ“æ­¤æ¨¡æ¿æ—¶ï¼Œä¼šæŸ¥æ‰¾è¾“å…¥å¯¹è±¡ä¸­çš„ <code>history</code> å­—æ®µã€‚</p>
</li>
<li>
<p>å¦‚æœ <code>history</code> æ˜¯ä¸€ä¸ªæ¶ˆæ¯æ•°ç»„ï¼ˆå¦‚ <code>[HumanMessage, AIMessage, ...]</code>ï¼‰ï¼Œå®ƒä¼š<strong>è‡ªåŠ¨å±•å¼€ä¸ºå¤šæ¡ç‹¬ç«‹æ¶ˆæ¯</strong>ï¼Œæ’å…¥åˆ°æ­¤å¤„ã€‚</p>
</li>
<li>
<p>ä¾‹å¦‚ï¼Œè‹¥å†å²ä¸ºï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">[
  <span class="hljs-keyword">new</span> <span class="hljs-built_in">HumanMessage</span>(<span class="hljs-string">"æˆ‘å«Agiao"</span>),
  <span class="hljs-keyword">new</span> <span class="hljs-built_in">AIMessage</span>(<span class="hljs-string">"å¥½çš„ï¼ŒAgiaoï¼"</span>)
]
</code></pre>
<p>åˆ™æœ€ç»ˆ prompt å˜ä¸ºï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-attr">[  SystemMessage(<span class="hljs-string">"ä½ æ˜¯ä¸€ä¸ªæœ‰è®°å¿†çš„åŠ©æ‰‹"</span>),  HumanMessage(<span class="hljs-string">"æˆ‘å«Agiao"</span>),  AIMessage(<span class="hljs-string">"å¥½çš„ï¼ŒAgiaoï¼"</span>),  HumanMessage(<span class="hljs-string">"{input}"</span>)]</span>
</code></pre>
</li>
</ul>
</li>
<li>
<p><code>['human', "{input}"]</code></p>
<ul>
<li>å½“å‰ç”¨æˆ·è¾“å…¥ï¼Œé€šè¿‡å˜é‡ <code>input</code> æ³¨å…¥ã€‚</li>
</ul>
</li>
</ol>
<blockquote>
<p>ğŸ’¡ <strong>ä¸ºä»€ä¹ˆç”¨ <code>placeholder</code> è€Œä¸æ˜¯ç›´æ¥å†™ <code>{history}</code> å­—ç¬¦ä¸²ï¼Ÿ</strong><br/>
å› ä¸º <code>{history}</code> å®é™…ä¸Šæ˜¯ä¸€ä¸ª<strong>æ¶ˆæ¯åˆ—è¡¨</strong>ï¼Œè€Œéçº¯æ–‡æœ¬ã€‚<code>placeholder</code> å‘Šè¯‰ LangChainï¼šâ€œè¿™é‡Œè¦æ’å…¥ä¸€ä¸ªæ¶ˆæ¯åºåˆ—ï¼Œè€Œä¸æ˜¯æ‹¼æ¥å­—ç¬¦ä¸²â€ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-13">ç¬¬å››éƒ¨åˆ†ï¼šæ„å»ºå¯è¿è¡Œé“¾ï¼ˆRunnable Chainï¼‰</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> runnable = prompt
  .<span class="hljs-title function_">pipe</span>(<span class="hljs-function">(<span class="hljs-params">input</span>) =&gt;</span> {
    <span class="hljs-comment">// debug èŠ‚ç‚¹</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"&gt;&gt;&gt; æœ€ç»ˆä¼ ç»™æ¨¡å‹çš„ä¿¡æ¯(Prompt å†…å­˜)"</span>);
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(input)
    <span class="hljs-keyword">return</span> input;
  })
  .<span class="hljs-title function_">pipe</span>(model);
</code></pre>
<p>LangChain çš„æ ¸å¿ƒæ€æƒ³æ˜¯â€œä¸€åˆ‡çš†å¯è¿è¡Œï¼ˆRunnableï¼‰â€ã€‚è¿™é‡Œæˆ‘ä»¬æ„å»ºäº†ä¸€ä¸ªå¤„ç†æµæ°´çº¿ï¼š</p>
<ol>
<li><strong><code>prompt</code></strong>ï¼šé¦–å…ˆåº”ç”¨æç¤ºæ¨¡æ¿ï¼Œå°† <code>{input}</code> å’Œ <code>{history}</code> æ›¿æ¢ä¸ºå®é™…å†…å®¹ï¼Œç”Ÿæˆå®Œæ•´çš„æ¶ˆæ¯åˆ—è¡¨ã€‚</li>
<li><strong>è°ƒè¯•ä¸­é—´ä»¶</strong>ï¼šæ‰“å°æœ€ç»ˆä¼ ç»™æ¨¡å‹çš„æ¶ˆæ¯ç»“æ„ã€‚è¿™å¯¹äºç†è§£è®°å¿†å¦‚ä½•å·¥ä½œè‡³å…³é‡è¦ã€‚</li>
<li><strong><code>model</code></strong>ï¼šå°†æ„é€ å¥½çš„æ¶ˆæ¯åˆ—è¡¨å‘é€ç»™ DeepSeek æ¨¡å‹ã€‚</li>
</ol>
<blockquote>
<p>ğŸ“Œ æ³¨æ„ï¼šæ­¤æ—¶çš„ <code>runnable</code> <strong>ä»ç„¶ä¸å…·å¤‡è®°å¿†èƒ½åŠ›</strong>ï¼å®ƒåªæ˜¯ä¸€ä¸ªâ€œçŸ¥é“å¦‚ä½•ç»„ç»‡æ¶ˆæ¯â€çš„å‡½æ•°ã€‚çœŸæ­£çš„è®°å¿†ç”±å¤–å±‚çš„ <code>RunnableWithMessageHistory</code> æ³¨å…¥ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-14">ç¬¬äº”éƒ¨åˆ†ï¼šåˆ›å»ºå¯¹è¯å†å²å­˜å‚¨</h3>
<pre><code class="hljs language-ini" lang="ini">const <span class="hljs-attr">messageHistory</span> = new InMemoryChatMessageHistory()<span class="hljs-comment">;</span>
</code></pre>
<ul>
<li>åˆ›å»ºä¸€ä¸ªç©ºçš„å†…å­˜å†å²å®¹å™¨ã€‚</li>
<li>æ‰€æœ‰åç»­å¯¹è¯ï¼ˆç”¨æˆ·è¾“å…¥ + AI å›å¤ï¼‰éƒ½å°†è¢«è‡ªåŠ¨è¿½åŠ åˆ°è¿™é‡Œã€‚</li>
<li>ç”±äºæ˜¯å…¨å±€å˜é‡ï¼Œ<strong>æ‰€æœ‰ä½¿ç”¨è¯¥ <code>messageHistory</code> çš„ä¼šè¯å°†å…±äº«åŒä¸€å†å²</strong>ï¼ˆåœ¨å¤šç”¨æˆ·åœºæ™¯ä¸­éœ€æŒ‰ session ID åˆ†ç¦»ï¼‰ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-15">ç¬¬å…­éƒ¨åˆ†ï¼šæ³¨å…¥è®°å¿†èƒ½åŠ› â€”â€” <code>RunnableWithMessageHistory</code></h3>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-keyword">const</span> chain = <span class="hljs-keyword">new</span> RunnableWithMessageHistory({
  runnable,
  getMessageHistory: <span class="hljs-keyword">async</span> () =&gt; messageHistory,
  inputMessagesKey: <span class="hljs-string">'input'</span>,
  historyMessagesKey: <span class="hljs-string">'history'</span>,
});
</code></pre>
<p>è¿™æ˜¯æ•´æ®µä»£ç çš„<strong>çµé­‚æ‰€åœ¨</strong>ã€‚è®©æˆ‘ä»¬é€ä¸ªå‚æ•°è¯¦è§£ï¼š</p>
<h4 data-id="heading-16">ğŸ”¸ <code>runnable</code></h4>
<ul>
<li>è¦åŒ…è£…çš„åŸå§‹å¯è¿è¡Œå¯¹è±¡ï¼ˆå³å‰é¢æ„å»ºçš„ <code>prompt â†’ debug â†’ model</code> é“¾ï¼‰ã€‚</li>
<li><code>RunnableWithMessageHistory</code> ä¼šåœ¨è°ƒç”¨å®ƒä¹‹å‰æ³¨å…¥å†å²ï¼Œåœ¨ä¹‹åä¿å­˜æ–°æ¶ˆæ¯ã€‚</li>
</ul>
<h4 data-id="heading-17">ğŸ”¸ <code>getMessageHistory: async () =&gt; messageHistory</code></h4>
<ul>
<li>
<p>ä¸€ä¸ªå¼‚æ­¥å‡½æ•°ï¼Œè¿”å›å½“å‰ä¼šè¯å¯¹åº”çš„ <code>BaseChatMessageHistory</code> å®ä¾‹ã€‚</p>
</li>
<li>
<p>åœ¨æœ¬ä¾‹ä¸­ï¼Œæˆ‘ä»¬ç›´æ¥è¿”å›å…¨å±€çš„ <code>messageHistory</code>ã€‚</p>
</li>
<li>
<p><strong>åœ¨çœŸå®åº”ç”¨ä¸­ï¼Œè¿™é‡Œé€šå¸¸ä¼šæ ¹æ® <code>sessionId</code> ä»æ•°æ®åº“æˆ–ç¼“å­˜ä¸­åŠ è½½å¯¹åº”çš„å†å²</strong>ã€‚ä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-vbnet" lang="vbnet"><span class="hljs-symbol">getMessageHistory:</span> <span class="hljs-keyword">async</span> (sessionId) =&gt; {
  <span class="hljs-keyword">return</span> <span class="hljs-built_in">new</span> RedisChatMessageHistory(sessionId, redisClient);
}
</code></pre>
</li>
</ul>
<h4 data-id="heading-18">ğŸ”¸ <code>inputMessagesKey: 'input'</code></h4>
<ul>
<li>æŒ‡å®šç”¨æˆ·å½“å‰è¾“å…¥åœ¨è°ƒç”¨å‚æ•°ä¸­çš„å­—æ®µåã€‚</li>
<li>å¯¹åº”åç»­çš„ <code>chain.invoke({ input: '...' })</code>ã€‚</li>
<li>LangChain ä¼šä»æ­¤å­—æ®µè¯»å–ç”¨æˆ·æ¶ˆæ¯ï¼Œå¹¶åœ¨è°ƒç”¨å®Œæˆåå°†å…¶å­˜å…¥å†å²ã€‚</li>
</ul>
<h4 data-id="heading-19">ğŸ”¸ <code>historyMessagesKey: 'hitory'</code></h4>
<ul>
<li>æŒ‡å®šå†å²æ¶ˆæ¯åœ¨è¾“å…¥å¯¹è±¡ä¸­çš„å­—æ®µåã€‚</li>
<li>LangChain ä¼šä» <code>getMessageHistory()</code> è·å–å†å²æ¶ˆæ¯ï¼Œå¹¶ä»¥ <code>{ history: [msg1, msg2, ...] }</code> çš„å½¢å¼æ³¨å…¥åˆ° <code>runnable</code> çš„è¾“å…¥ä¸­ã€‚</li>
<li>è¿™ä¸ªå­—æ®µåå¿…é¡»ä¸ <code>ChatPromptTemplate</code> ä¸­çš„å ä½ç¬¦ <code>{history}</code> ä¸€è‡´ï¼</li>
</ul>
<blockquote>
<p>âœ… <strong>å·¥ä½œæµç¨‹æ€»ç»“</strong>ï¼š</p>
<ol>
<li>ç”¨æˆ·è°ƒç”¨ <code>chain.invoke({ input: "..." }, { configurable: { sessionId: "..." } })</code></li>
<li><code>RunnableWithMessageHistory</code> è°ƒç”¨ <code>getMessageHistory(sessionId)</code> è·å–å†å²ã€‚</li>
<li>æ„é€ è¾“å…¥å¯¹è±¡ï¼š<code>{ input: "...", history: [prev messages] }</code></li>
<li>è°ƒç”¨å†…éƒ¨ <code>runnable(input)</code></li>
<li>è·å–æ¨¡å‹å›å¤ã€‚</li>
<li>å°† <code>HumanMessage(input)</code> å’Œ <code>AIMessage(response)</code> <strong>è‡ªåŠ¨è¿½åŠ </strong>åˆ°å†å²ä¸­ã€‚</li>
</ol>
</blockquote>
<hr/>
<h3 data-id="heading-20">ç¬¬ä¸ƒéƒ¨åˆ†ï¼šæ‰§è¡Œå¤šè½®å¯¹è¯</h3>
<pre><code class="hljs language-css" lang="css">const res1 = await chain<span class="hljs-selector-class">.invoke</span>(
  { <span class="hljs-selector-tag">input</span>: <span class="hljs-string">'æˆ‘å«Agiaoï¼Œå–œæ¬¢å–ç™½å…°åœ°'</span> },
  { configurable: { sessionId: <span class="hljs-string">'makefriend'</span> } }
)
console<span class="hljs-selector-class">.log</span>(res1<span class="hljs-selector-class">.content</span>);

const res2 = await chain<span class="hljs-selector-class">.invoke</span>(
  { <span class="hljs-selector-tag">input</span>: <span class="hljs-string">'æˆ‘å«ä»€ä¹ˆåå­—'</span> },
  { configurable: { sessionId: <span class="hljs-string">'makefriend'</span> } }
)
console<span class="hljs-selector-class">.log</span>(res2<span class="hljs-selector-class">.content</span>);
</code></pre>
<h4 data-id="heading-21">ğŸ”¹ ç¬¬ä¸€æ¬¡è°ƒç”¨</h4>
<ul>
<li>
<p>è¾“å…¥ï¼š<code>{ input: 'æˆ‘å«Agiaoï¼Œå–œæ¬¢å–ç™½å…°åœ°' }</code></p>
</li>
<li>
<p>æ­¤æ—¶ <code>messageHistory</code> ä¸ºç©ºï¼Œæ‰€ä»¥ <code>{history}</code> å ä½ç¬¦è¢«æ›¿æ¢ä¸ºç©ºæ•°ç»„ã€‚</p>
</li>
<li>
<p>æœ€ç»ˆ promptï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-attr">[  SystemMessage(<span class="hljs-string">"ä½ æ˜¯ä¸€ä¸ªæœ‰è®°å¿†çš„åŠ©æ‰‹"</span>),  HumanMessage(<span class="hljs-string">"æˆ‘å«Agiaoï¼Œå–œæ¬¢å–ç™½å…°åœ°"</span>)]</span>
</code></pre>
</li>
<li>
<p>æ¨¡å‹å›å¤åï¼Œ<code>messageHistory</code> è‡ªåŠ¨æ›´æ–°ä¸ºï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-attr">[  HumanMessage(<span class="hljs-string">"æˆ‘å«Agiaoï¼Œå–œæ¬¢å–ç™½å…°åœ°"</span>),  AIMessage(<span class="hljs-string">"å¥½çš„ï¼ŒAgiaoï¼ç™½å…°åœ°æ˜¯ç§å¾ˆæ£’çš„é€‰æ‹©ã€‚"</span>)]</span>
</code></pre>
</li>
</ul>
<h4 data-id="heading-22">ğŸ”¹ ç¬¬äºŒæ¬¡è°ƒç”¨</h4>
<ul>
<li>
<p>è¾“å…¥ï¼š<code>{ input: 'æˆ‘å«ä»€ä¹ˆåå­—' }</code></p>
</li>
<li>
<p><code>messageHistory</code> å·²åŒ…å«ä¸¤æ¡æ¶ˆæ¯ã€‚</p>
</li>
<li>
<p>æœ€ç»ˆ promptï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-attr">[  SystemMessage(<span class="hljs-string">"ä½ æ˜¯ä¸€ä¸ªæœ‰è®°å¿†çš„åŠ©æ‰‹"</span>),  HumanMessage(<span class="hljs-string">"æˆ‘å«Agiaoï¼Œå–œæ¬¢å–ç™½å…°åœ°"</span>),  AIMessage(<span class="hljs-string">"å¥½çš„ï¼ŒAgiaoï¼ç™½å…°åœ°æ˜¯ç§å¾ˆæ£’çš„é€‰æ‹©ã€‚"</span>),  HumanMessage(<span class="hljs-string">"æˆ‘å«ä»€ä¹ˆåå­—"</span>)]</span>
</code></pre>
</li>
<li>
<p>æ¨¡å‹çœ‹åˆ°å®Œæ•´ä¸Šä¸‹æ–‡ï¼Œè‡ªç„¶èƒ½å›ç­”ï¼šâ€œä½ å« Agiaoã€‚â€</p>
</li>
</ul>
<blockquote>
<p>ğŸ¯ <strong>å…³é”®ä¼˜åŠ¿</strong>ï¼šå¼€å‘è€…æ— éœ€æ‰‹åŠ¨ç®¡ç†å†å²æ‹¼æ¥ã€æ¶ˆæ¯æ ¼å¼è½¬æ¢ã€å­˜å‚¨é€»è¾‘â€”â€”å…¨éƒ¨ç”± LangChain è‡ªåŠ¨å¤„ç†ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-23">è°ƒè¯•è¾“å‡ºï¼šè§è¯è®°å¿†çš„ä¼ é€’</h2>
<p>ä¸­é—´çš„è°ƒè¯•èŠ‚ç‚¹ä¼šæ‰“å°ï¼š</p>
<p><strong>ç¬¬ä¸€æ¬¡è°ƒç”¨åï¼š</strong></p>
<pre><code class="hljs language-css" lang="css">&gt;&gt;&gt; æœ€ç»ˆä¼ ç»™æ¨¡å‹çš„ä¿¡æ¯(Prompt å†…å­˜)
{
  messages: [
    SystemMessage { <span class="hljs-attribute">content</span>: <span class="hljs-string">"ä½ æ˜¯ä¸€ä¸ªæœ‰è®°å¿†çš„åŠ©æ‰‹"</span> },
    HumanMessage { <span class="hljs-attribute">content</span>: <span class="hljs-string">"æˆ‘å«Agiaoï¼Œå–œæ¬¢å–ç™½å…°åœ°"</span> }
  ]
}
</code></pre>
<p><strong>ç¬¬äºŒæ¬¡è°ƒç”¨åï¼š</strong></p>
<pre><code class="hljs language-css" lang="css">&gt;&gt;&gt; æœ€ç»ˆä¼ ç»™æ¨¡å‹çš„ä¿¡æ¯(Prompt å†…å­˜)
{
  messages: [
    SystemMessage { <span class="hljs-attribute">content</span>: <span class="hljs-string">"ä½ æ˜¯ä¸€ä¸ªæœ‰è®°å¿†çš„åŠ©æ‰‹"</span> },
    HumanMessage { <span class="hljs-attribute">content</span>: <span class="hljs-string">"æˆ‘å«Agiaoï¼Œå–œæ¬¢å–ç™½å…°åœ°"</span> },
    AIMessage { <span class="hljs-attribute">content</span>: <span class="hljs-string">"å¥½çš„ï¼ŒAgiaoï¼ç™½å…°åœ°æ˜¯ç§å¾ˆæ£’çš„é€‰æ‹©ã€‚"</span> },
    HumanMessage { <span class="hljs-attribute">content</span>: <span class="hljs-string">"æˆ‘å«ä»€ä¹ˆåå­—"</span> }
  ]
}
</code></pre>
<p>è¿™æ¸…æ™°å±•ç¤ºäº†<strong>å†å²å¦‚ä½•è¢«é€æ­¥ç´¯ç§¯å¹¶æ³¨å…¥ä¸Šä¸‹æ–‡</strong>ã€‚</p>
<hr/>
<h2 data-id="heading-24">å¯¹æ¯”ï¼šæœ‰è®°å¿† vs æ— è®°å¿†</h2>








































<table><thead><tr><th>ç‰¹æ€§</th><th><code>index.js</code>ï¼ˆæ— è®°å¿†ï¼‰</th><th><code>1.js</code>ï¼ˆæœ‰è®°å¿†ï¼‰</th></tr></thead><tbody><tr><td>çŠ¶æ€ç®¡ç†</td><td>æ— </td><td>è‡ªåŠ¨ç»´æŠ¤å¯¹è¯å†å²</td></tr><tr><td>ä¸Šä¸‹æ–‡ä¼ é€’</td><td>æ‰‹åŠ¨æ‹¼æ¥ï¼ˆæœªå®ç°ï¼‰</td><td>è‡ªåŠ¨æ³¨å…¥ <code>{history}</code></td></tr><tr><td>å¤šè½®è¿è´¯æ€§</td><td>âŒ ä¸æ”¯æŒ</td><td>âœ… å®Œç¾æ”¯æŒ</td></tr><tr><td>Token æ•ˆç‡</td><td>æ¯æ¬¡ç‹¬ç«‹ï¼Œæ— å†—ä½™</td><td>å†å²éšå¯¹è¯å¢é•¿ï¼Œéœ€æ³¨æ„é•¿åº¦</td></tr><tr><td>æ‰©å±•æ€§</td><td>éš¾ä»¥æ‰©å±•</td><td>æ˜“æ›¿æ¢å­˜å‚¨åç«¯ï¼ˆRedis/DBï¼‰</td></tr><tr><td>ä»£ç å¤æ‚åº¦</td><td>ç®€å•ä½†åŠŸèƒ½æœ‰é™</td><td>ç¨å¤æ‚ä½†åŠŸèƒ½å¼ºå¤§</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-25">æ½œåœ¨æŒ‘æˆ˜ä¸ä¼˜åŒ–æ–¹å‘</h2>
<p>è™½ç„¶ <code>1.js</code> å±•ç¤ºäº†è®°å¿†çš„åŸºæœ¬å®ç°ï¼Œä½†åœ¨ç”Ÿäº§ç¯å¢ƒä¸­è¿˜éœ€è€ƒè™‘ï¼š</p>
<h3 data-id="heading-26">1. <strong>Token é•¿åº¦é™åˆ¶</strong></h3>
<ul>
<li>
<p>å¯¹è¯å†å²ä¸æ–­å¢é•¿ï¼Œå¯èƒ½è¶…å‡ºæ¨¡å‹ä¸Šä¸‹æ–‡çª—å£ï¼ˆå¦‚ 32768 tokensï¼‰ã€‚</p>
</li>
<li>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<ul>
<li>ä½¿ç”¨ <code>WindowChatMessageHistory</code> ä»…ä¿ç•™æœ€è¿‘ N æ¡æ¶ˆæ¯ã€‚</li>
<li>å®ç°æ‘˜è¦æœºåˆ¶ï¼šå®šæœŸå°†å†å²å‹ç¼©ä¸ºæ‘˜è¦ï¼Œå¹¶ä½œä¸ºç³»ç»Ÿæ¶ˆæ¯æ³¨å…¥ã€‚</li>
</ul>
</li>
</ul>
<h3 data-id="heading-27">2. <strong>å¤šç”¨æˆ·ä¼šè¯éš”ç¦»</strong></h3>
<ul>
<li>
<p>å½“å‰ <code>messageHistory</code> æ˜¯å…¨å±€å•ä¾‹ï¼Œæ‰€æœ‰ç”¨æˆ·å…±äº«ã€‚</p>
</li>
<li>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<ul>
<li>åœ¨ <code>getMessageHistory</code> ä¸­æ ¹æ® <code>sessionId</code> è¿”å›ä¸åŒå†å²å®ä¾‹ã€‚</li>
<li>ä½¿ç”¨ <code>RedisChatMessageHistory</code> æˆ–æ•°æ®åº“æŒ‰ session å­˜å‚¨ã€‚</li>
</ul>
</li>
</ul>
<h3 data-id="heading-28">3. <strong>æŒä¹…åŒ–</strong></h3>
<ul>
<li>å†…å­˜å­˜å‚¨åœ¨æœåŠ¡é‡å¯åä¸¢å¤±ã€‚</li>
<li><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼šé›†æˆæŒä¹…åŒ–å­˜å‚¨ï¼ˆå¦‚ PostgreSQLã€MongoDBï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-29">4. <strong>é•¿æœŸè®°å¿†ï¼ˆLong-term Memoryï¼‰</strong></h3>
<ul>
<li>å¯¹è¯å†å²å±äºçŸ­æœŸè®°å¿†ã€‚</li>
<li><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼šç»“åˆå‘é‡æ•°æ®åº“ï¼ˆå¦‚ Pineconeï¼‰å®ç°åŸºäºæ£€ç´¢çš„é•¿æœŸè®°å¿†ï¼ˆRAG + Memoryï¼‰ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-30">ç»“è¯­ï¼šè®°å¿†ï¼Œæ˜¯æ™ºèƒ½çš„åŸºçŸ³</h2>
<p>é€šè¿‡ <code>1.js</code>ï¼Œæˆ‘ä»¬ä¸ä»…å­¦ä¼šäº†å¦‚ä½•ç”¨ LangChain å®ç° LLM çš„è®°å¿†ï¼Œæ›´ç†è§£äº†å…¶èƒŒåçš„è®¾è®¡å“²å­¦ï¼š<strong>å°†çŠ¶æ€ç®¡ç†ä¸æ ¸å¿ƒé€»è¾‘è§£è€¦ï¼Œé€šè¿‡ç»„åˆå¼ API æ„å»ºå¯æ‰©å±•çš„æ™ºèƒ½åº”ç”¨</strong>ã€‚</p>
<blockquote>
<p>è®°å¿†ä¸æ˜¯é­”æ³•ï¼Œè€Œæ˜¯ä¸€ç³»åˆ—ç²¾å¿ƒè®¾è®¡çš„æ•°æ®æµï¼š<br/>
ç”¨æˆ·è¾“å…¥ â†’ åŠ è½½å†å² â†’ æ³¨å…¥ä¸Šä¸‹æ–‡ â†’ è°ƒç”¨æ¨¡å‹ â†’ ä¿å­˜æ–°çŠ¶æ€ã€‚</p>
</blockquote>
<p>å½“ä½ ä¸‹æ¬¡å¯¹ AI è¯´â€œè¿˜è®°å¾—æˆ‘å—ï¼Ÿâ€ï¼Œå¸Œæœ›å®ƒèƒ½å¾®ç¬‘ç€å›ç­”ï¼šâ€œå½“ç„¶ï¼ŒAgiaoã€‚ä½ ä¸Šæ¬¡è¯´å–œæ¬¢ç™½å…°åœ°ï¼Œè¦ä¸è¦å†æ¥ä¸€æ¯ï¼Ÿâ€</p>
<p>ğŸ¥‚ <strong>Cheers to intelligent conversations with memory!</strong></p>
<hr/>
<blockquote>
<p><strong>é™„ï¼šå®Œæ•´ä»£ç é“¾æ¥ï¼š</strong> <a href="https://link.juejin.cn?target=https%3A%2F%2Fgitee.com%2FgiaoZou%2Flesson_zp%2Ftree%2Fmaster%2Fai%2Flangchain%2Fmemory%2Fdemo" title="https://gitee.com/giaoZou/lesson_zp/tree/master/ai/langchain/memory/demo" target="_blank" ref="nofollow noopener noreferrer">lesson_zp/ai/langchain/memory/demo: AI + å…¨æ ˆå­¦ä¹ ä»“åº“</a></p>
<p>åœ¨è¯¥é¡¹ç›®æ ¹ç›®å½•ä¸­éœ€æ·»åŠ Â  .envÂ  æ–‡ä»¶ï¼Œæ–‡ä»¶ä¸­æ·»åŠ DeepSeekå¤§æ¨¡å‹çš„API_KEY</p>
<p>ä¾‹å¦‚ï¼š</p>
<p>DEEPSEEK_API_KEY=sk-XXXXXXXXXXXXXXXXXXXXXXXXXXXXX</p>
<p>API_KEYè·å–åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fplatform.deepseek.com%2Fusage" title="https://platform.deepseek.com/usage" target="_blank" ref="nofollow noopener noreferrer">DeepSeek å¼€æ”¾å¹³å°</a></p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[TailwindCSSï¼šä»â€œæ ·å¼æ°‘å·¥â€åˆ°â€œUIä¹é«˜å¤§å¸ˆâ€çš„é€†è¢­]]></title>    <link>https://juejin.cn/post/7588061231589326889</link>    <guid>https://juejin.cn/post/7588061231589326889</guid>    <pubDate>2025-12-27T01:49:28.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588061231589326889" data-draft-id="7587995707166310419" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="TailwindCSSï¼šä»â€œæ ·å¼æ°‘å·¥â€åˆ°â€œUIä¹é«˜å¤§å¸ˆâ€çš„é€†è¢­"/> <meta itemprop="keywords" content="å‰ç«¯,é¢è¯•,ç¼–ç¨‹è¯­è¨€"/> <meta itemprop="datePublished" content="2025-12-27T01:49:28.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="xiaoxue_"/> <meta itemprop="url" content="https://juejin.cn/user/4065372122398027"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            TailwindCSSï¼šä»â€œæ ·å¼æ°‘å·¥â€åˆ°â€œUIä¹é«˜å¤§å¸ˆâ€çš„é€†è¢­
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4065372122398027/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    xiaoxue_
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-27T01:49:28.000Z" title="Sat Dec 27 2025 01:49:28 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ç©è½¬ TailwindCSSï¼šä» "æ ·å¼æ··ä¹±" åˆ° "ä¸æ»‘å¼€å‘" çš„é€†è¢­ä¹‹è·¯ ğŸš€</h2>
<p>å“ˆå–½ï¼Œå‰ç«¯åœˆçš„å°ä¼™ä¼´ä»¬ï½ ä»Šå¤©å’±ä»¬æ¥èŠèŠä¸€ä¸ªè®©æ ·å¼å¼€å‘æ•ˆç‡é£™å‡çš„ç¥å™¨ â€”â€”TailwindCSSã€‚æå‰è¯´ä¸€å¥ï¼Œæœ¬æ–‡ä¼šç»“åˆ React æ¥è®²ï¼Œè¦æ˜¯ä½ è¿˜æ²¡å­¦ä¹ è¿‡ React ï¼Œç¿»ç¿»æˆ‘å‰é¢çš„æ–‡ç« è¡¥è¡¥è¯¾å“¦ï¼Œä¿è¯ä¸€çœ‹å°±ä¼šï¼</p>
<h3 data-id="heading-1">ä¸€ã€ä¼ ç»Ÿ CSSï¼šé‚£äº›å¹´æˆ‘ä»¬è¸©è¿‡çš„ "æ ·å¼å‘" ğŸ•³ï¸</h3>
<p>å…ˆæ¥çœ‹æ®µ "è€ƒå¤çº§"CSS ä»£ç ï¼Œçœ¼ç†Ÿä¸ï¼ŸğŸ‘‡</p>
<p>html</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
  <span class="hljs-selector-class">.primary-btn</span> {
    <span class="hljs-attribute">padding</span>:<span class="hljs-number">8px</span> <span class="hljs-number">16px</span>;
    <span class="hljs-attribute">background-color</span>: blue;
    <span class="hljs-attribute">color</span>:white;
    <span class="hljs-attribute">border-radius</span>:<span class="hljs-number">6px</span>;
  }
  <span class="hljs-selector-class">.default-btn</span> {
    <span class="hljs-attribute">padding</span>:<span class="hljs-number">8px</span> <span class="hljs-number">16px</span>;
    <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#ccc</span>;
    <span class="hljs-attribute">color</span>:<span class="hljs-number">#000</span>;
    <span class="hljs-attribute">border-radius</span>:<span class="hljs-number">6px</span>;
  }
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"primary-btn"</span>&gt;</span>æäº¤<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"default-btn"</span>&gt;</span>é»˜è®¤<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
</code></pre>
<p>ç›¯ç€è¿™æ®µä»£ç  3 ç§’é’Ÿï¼Œæ˜¯ä¸æ˜¯å‘ç°äº†ä»€ä¹ˆï¼Ÿpadding å’Œ border-radius è¿™ä¿©å…„å¼Ÿåœ¨ä¸¤ä¸ªç±»é‡Œé‡å¤å‡ºç°äº†ï¼å°±åƒä½ ç‚¹å¥¶èŒ¶æ—¶ï¼Œæ¯æ¬¡éƒ½è¦é‡å¤è¯´ "å°‘å†°ã€ä¸‰åˆ†ç³–"ï¼Œå¤šè´¹åŠ²å•ŠğŸ˜¤ã€‚ä¼ ç»Ÿ CSS çš„é—®é¢˜å°±åœ¨äºï¼šä¸€ä¸ªç±»åæ‰¿åŒ…äº†æ‰€æœ‰æ ·å¼ï¼Œä¸šåŠ¡å±æ€§å’Œæ ·å¼è§„åˆ™æ··åœ¨ä¸€èµ·ï¼Œæƒ³å¤ç”¨ï¼Ÿéš¾ï¼æ”¹ä¸€å¤„æ ·å¼ï¼Ÿå¯èƒ½è¦æ”¹ N ä¸ªç±»åï¼Œç®€ç›´æ˜¯å‰ç«¯å¼€å‘çš„ "è„±å‘å…ƒå‡¶" ä¹‹ä¸€ã€‚</p>
<h3 data-id="heading-2">äºŒã€å°è£…åŸºç±» + ç»„åˆå˜ä½“ï¼šç»™ CSS æ¥ä¸ª "ä»£ç ç˜¦èº«" ğŸœ</h3>
<p>é‚£æ€ä¹ˆæ‹¯æ•‘è¿™äº›é‡å¤çš„ä»£ç å‘¢ï¼Ÿç­”æ¡ˆå°±æ˜¯ï¼šç»™ CSS åš "å°è£…æ‰‹æœ¯"ï¼å’±ä»¬å¯ä»¥æŠŠé‡å¤çš„æ ·å¼æŠ½æˆåŸºç±»ï¼Œå†ç”¨å˜ä½“ç±»æ¥å®ç°ä¸åŒæ•ˆæœï¼Œå°±åƒæ­ç§¯æœ¨ä¸€æ ·çµæ´»ï½</p>
<p>è¿˜æ˜¯æ‹¿æŒ‰é’®ä¸¾ä¾‹ï¼Œçœ‹è¿™æ®µä¼˜åŒ–åçš„ä»£ç ï¼š</p>
<p>html</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
  <span class="hljs-selector-class">.btn</span> { <span class="hljs-comment">/* åŸºç±»ï¼šæå–å…¬å…±æ ·å¼ */</span>
    <span class="hljs-attribute">padding</span>:<span class="hljs-number">8px</span> <span class="hljs-number">16px</span>;
    <span class="hljs-attribute">border-radius</span>:<span class="hljs-number">6px</span>;
    <span class="hljs-attribute">cursor</span>:pointer;
  }
  <span class="hljs-selector-class">.btn-primary</span> { <span class="hljs-comment">/* å˜ä½“ï¼šä¸ªæ€§åŒ–æ ·å¼ */</span>
    <span class="hljs-attribute">background</span>: blue;
    <span class="hljs-attribute">color</span>:white;
  }
  <span class="hljs-selector-class">.btn-default</span> { <span class="hljs-comment">/* å˜ä½“ï¼šä¸ªæ€§åŒ–æ ·å¼ */</span>
    <span class="hljs-attribute">background</span>: <span class="hljs-number">#ccc</span>;
    <span class="hljs-attribute">color</span>:<span class="hljs-number">#000</span>;
  }
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-primary"</span>&gt;</span>æäº¤<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>é»˜è®¤<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
</code></pre>
<p><strong>ä»£ç æ•ˆæœï¼ˆä¸ä¸Šæ–‡ä¼ ç»Ÿcss ä¸¾ä¾‹ä»£ç å®ç°çš„æ•ˆæœä¸€æ ·ï¼‰ï¼š</strong></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/10fc5f3cf92a40e1af63963b9b46de41~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeGlhb3h1ZV8=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767404986&amp;x-signature=XcF3GQzruS3TpzJJyBO9AMJ5D%2Bw%3D" alt="QQ20251226-235034.png" loading="lazy"/></p>
<p>ç§è§æ²¡ï¼Ÿ.btn å°±åƒä¸ª "æ ·å¼åœ°åŸº"ï¼Œä¸ç®¡æ˜¯ primary è¿˜æ˜¯ default æŒ‰é’®ï¼Œéƒ½èƒ½å…±ç”¨å®ƒçš„ padding å’Œåœ†è§’ã€‚è¿™ç§ "åŸºç±» + å˜ä½“" çš„æ€è·¯ï¼Œå…¶å®å°±æ˜¯é¢å‘å¯¹è±¡ CSS çš„ç²¾é«“ï½ ä½†è¿™è¿˜ä¸å¤Ÿæè‡´ï¼å¦‚æœæˆ‘æƒ³è¦ "margin-left: 2px"ã€"font-size: 14px" è¿™ç§æ›´ç»†ç²’åº¦çš„æ ·å¼å¤ç”¨ï¼Œè¯¥æ€ä¹ˆåŠï¼Ÿè¿™æ—¶ï¼ŒTailwindCSS å°±è¯¥ç™»åœºäº†ï¼</p>
<h3 data-id="heading-3">ä¸‰ã€åŸå­ CSS TailwindCSSï¼šæ ·å¼ç•Œçš„ "ä¹é«˜ç§¯æœ¨" ğŸ§©</h3>
<h4 data-id="heading-4">1.ä»€ä¹ˆæ˜¯ TailwindCSSï¼Ÿ</h4>
<p>ç®€å•è¯´ï¼ŒTailwindCSS æ˜¯ä¸€ä¸ª "åŸå­ CSS æ¡†æ¶"ã€‚å•¥å«åŸå­ CSSï¼Ÿå°±æ˜¯æŠŠ CSS è§„åˆ™æ‹†æˆæ— æ•°ä¸ªæœ€å°å•ä½çš„ "åŸå­ç±»"ï¼Œæ¯”å¦‚ "padding: 4px" å¯¹åº” p-1ï¼Œ"background: blue" å¯¹åº” bg-blue-600ã€‚è¿™äº›åŸå­ç±»å°±åƒä¹é«˜ç§¯æœ¨ï¼Œéšä¾¿æ‹¼å°±èƒ½æ­å‡ºå„ç§æ ·å¼ï½</p>
<h4 data-id="heading-5">2.è§£å†³äº†å•¥é—®é¢˜ï¼Ÿä¼˜ç‚¹å¤šåˆ°æ•°ä¸æ¸…ï¼</h4>
<ul>
<li>ä¸ç”¨å†æƒ³ç±»åäº†ï¼å†ä¹Ÿä¸ä¼šä¸º "è¿™ä¸ª div å« container è¿˜æ˜¯ wrapper" æŠ“å¤´å‘ğŸ¤¯</li>
<li>ä¸ç”¨åˆ‡æ¢æ–‡ä»¶å†™ CSSï¼ç›´æ¥åœ¨ HTML/JSX é‡Œå†™æ ·å¼ï¼Œæ•ˆç‡æ‹‰æ»¡</li>
<li>æ ·å¼å¤ç”¨ç‡ MAXï¼ä¸€å¥—åŸå­ç±»èµ°å¤©ä¸‹ï¼Œå†ä¹Ÿä¸ç”¨å¤åˆ¶ç²˜è´´é‡å¤æ ·å¼</li>
<li>å“åº”å¼è®¾è®¡è¶…ç®€å•ï¼è‡ªå¸¦å„ç§å±å¹•å°ºå¯¸çš„å‰ç¼€ï¼Œé€‚é…ç§»åŠ¨ç«¯ so easy</li>
</ul>
<h4 data-id="heading-6">3.å’Œ LLM æ˜¯ "æœ€ä½³æ‹æ¡£"ï¼Ÿ</h4>
<p>TailwindCSS é€šè¿‡é¢„å®šä¹‰çš„åŸå­åŒ–ç±»åè®©å¼€å‘è€…æ— éœ€æ‰‹å†™åŸç”Ÿ CSSï¼Œä½†æ‹¼æ¥å¤§é‡ç±»åä»æœ‰æˆæœ¬ï¼›AI åˆ™èƒ½ä» â€œè‡ªç„¶è¯­è¨€æè¿°â†’ä»£ç ç”Ÿæˆâ†’ä¼˜åŒ–è°ƒè¯•â€ å…¨æµç¨‹æå‡ Tailwind å¼€å‘æ•ˆç‡ï¼ŒäºŒè€…ç»“åˆçš„æ ¸å¿ƒåº”ç”¨å¦‚ä¸‹ï¼š</p>
<h5 data-id="heading-7">ï¼ˆ1ï¼‰é€šç”¨ AI åŠ©æ‰‹ï¼ˆChatGPT/Gemini/ æ–‡å¿ƒä¸€è¨€ï¼‰</h5>
<p>è¿™æ˜¯æœ€æ˜“è·å–çš„å·¥å…·ï¼Œåªéœ€ç”¨è‡ªç„¶è¯­è¨€æè¿°ç•Œé¢éœ€æ±‚ï¼Œå°±èƒ½ç›´æ¥ç”Ÿæˆå¯è¿è¡Œçš„ Tailwind ä»£ç ã€‚<strong>ç¤ºä¾‹æç¤ºè¯</strong>ï¼š</p>
<blockquote>
<p>å¸®æˆ‘ç”¨ TailwindCSS v3 å†™ä¸€ä¸ªç§»åŠ¨ç«¯é€‚é…çš„å•†å“å¡ç‰‡ï¼Œå®½åº¦ 100%ï¼ˆæœ€å¤§ 300pxï¼‰ï¼Œåœ†è§’ 12pxï¼ŒåŒ…å«å•†å“å›¾ç‰‡ï¼ˆ16:9 æ¯”ä¾‹ï¼‰ã€æ ‡é¢˜ï¼ˆæœ€å¤š 2 è¡Œï¼‰ã€ä»·æ ¼ï¼ˆçº¢è‰²åŠ ç²—ï¼‰å’ŒåŠ å…¥è´­ç‰©è½¦æŒ‰é’®ï¼Œè½»å¾®é˜´å½±ã€‚</p>
</blockquote>
<p><strong>AI ç”Ÿæˆçš„å¯ç›´æ¥è¿è¡Œçš„ä»£ç </strong>ï¼š</p>
<p>html</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"zh-CN"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>å•†å“å¡ç‰‡<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- å¼•å…¥TailwindCSS CDN --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://cdn.tailwindcss.com"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"bg-gray-50 p-4"</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- å•†å“å¡ç‰‡ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"w-full max-w-[300px] bg-white rounded-3xl shadow-sm overflow-hidden"</span>&gt;</span>
        <span class="hljs-comment">&lt;!-- å•†å“å›¾ç‰‡ --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"aspect-[16/9] bg-gray-200 overflow-hidden"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://picsum.photos/300/169"</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">"å•†å“å›¾ç‰‡"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"w-full h-full object-cover hover:scale-105 transition-transform duration-300"</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-comment">&lt;!-- å•†å“ä¿¡æ¯ --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"p-4"</span>&gt;</span>
            <span class="hljs-comment">&lt;!-- å•†å“æ ‡é¢˜ï¼ˆæœ€å¤š2è¡Œï¼‰ --&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">h3</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"text-gray-800 font-medium mb-2 line-clamp-2"</span>&gt;</span>æ–°æ¬¾å¤å­£çº¯æ£‰Tæ¤ å®½æ¾é€æ°”ç™¾æ­ä¼‘é—²ä¸Šè¡£<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
            <span class="hljs-comment">&lt;!-- å•†å“ä»·æ ¼ --&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"text-red-600 font-bold text-xl mb-3"</span>&gt;</span>Â¥99.9<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
            <span class="hljs-comment">&lt;!-- åŠ å…¥è´­ç‰©è½¦æŒ‰é’® --&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"w-full bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700 transition-colors"</span>&gt;</span>
                åŠ å…¥è´­ç‰©è½¦
            <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<p><strong>å®ç°çš„æ•ˆæœï¼š</strong></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0df5f2d220a04cc1b41ee17b5dc2a824~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeGlhb3h1ZV8=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767404986&amp;x-signature=59mJJWJz7%2BZn9wZnHv8Xi2W%2FTJs%3D" alt="QQ20251227-092130.png" loading="lazy"/></p>
<h5 data-id="heading-8">ï¼ˆ2ï¼‰ä¸“é—¨çš„ Tailwind AI å·¥å…·</h5>
<ul>
<li><strong>Tailwind AIï¼ˆå®˜æ–¹ï¼‰</strong> ï¼šé›†æˆåœ¨ Tailwind Playï¼ˆåœ¨çº¿ç¼–è¾‘å™¨ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fplay.tailwindcss.com%2F" target="_blank" title="https://play.tailwindcss.com/" ref="nofollow noopener noreferrer">play.tailwindcss.com/</a>ï¼‰ä¸­ï¼Œå¯å®æ—¶ç”Ÿæˆã€ä¼˜åŒ–æ ·å¼ï¼Œè¿˜èƒ½è§£é‡Šç±»åå«ä¹‰ï¼›</li>
<li><strong>Cursor ç¼–è¾‘å™¨</strong>ï¼šå†…ç½® AI åŠ©æ‰‹ï¼Œæ”¯æŒå°†åŸç”Ÿ CSS ä¸€é”®è½¬æ¢ä¸º Tailwindï¼Œæˆ–ä¿®å¤ Tailwind æ ·å¼å†²çªï¼›</li>
<li><strong>Figma to Tailwind AI</strong>ï¼šFigma æ’ä»¶ï¼Œå¯å°†è®¾è®¡ç¨¿ç›´æ¥è½¬æ¢ä¸º Tailwind ä»£ç ï¼ŒAI è‡ªåŠ¨åŒ¹é…æœ€è´´åˆçš„ç±»åã€‚</li>
</ul>
<h4 data-id="heading-9">4.TailwindCSS é…ç½®ï¼šä¸‰æ­¥æå®šï¼</h4>
<p>åœ¨ React+Vite é¡¹ç›®é‡Œç”¨ Tailwindï¼Ÿè·Ÿç€åšå°±è¡Œï¼š</p>
<ol>
<li>å®‰è£…ä¾èµ–ï¼ˆç»ˆç«¯æ‰§è¡Œï¼‰ï¼š</li>
</ol>
<p>bash</p>
<pre><code class="hljs language-bash" lang="bash">npm install tailwindcss @tailwindcss/vite
</code></pre>
<p>2.  é…ç½® vite.config.jsï¼ˆå¼•å…¥æ’ä»¶ï¼‰ï¼š</p>
<p>javascript</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ¥è‡ªvite.config.js</span>
<span class="hljs-keyword">import</span> { defineConfig } <span class="hljs-keyword">from</span> <span class="hljs-string">'vite'</span> 
<span class="hljs-keyword">import</span> react <span class="hljs-keyword">from</span> <span class="hljs-string">'@vitejs/plugin-react'</span>
<span class="hljs-keyword">import</span> tailwindcss <span class="hljs-keyword">from</span> <span class="hljs-string">'@tailwindcss/vite'</span> <span class="hljs-comment">// å¼•å…¥Tailwindæ’ä»¶</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineConfig</span>({
  <span class="hljs-attr">plugins</span>: [<span class="hljs-title function_">react</span>(), <span class="hljs-title function_">tailwindcss</span>()], <span class="hljs-comment">// æ³¨å†Œæ’ä»¶</span>
})
</code></pre>
<p>3.  é…ç½® index.cssï¼ˆå¯¼å…¥æ ·å¼ï¼‰ï¼š</p>

<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">/* æ¥è‡ªindex.css */</span>
<span class="hljs-keyword">@import</span> <span class="hljs-string">"tailwindcss"</span>; <span class="hljs-comment">/* ä¸€å¥è¯å¼•å…¥æ‰€æœ‰TailwindåŸå­ç±» */</span>
</code></pre>
<p>æå®šï¼ğŸš€</p>
<h3 data-id="heading-10">å››ã€TailwindCSSä¸ React ç»„ä»¶ç»“åˆï¼šå¤©ä½œä¹‹åˆï¼ğŸ’</h3>
<h4 data-id="heading-11">ç›´æ¥åœ¨ className é‡Œ "å †ç§¯æœ¨"</h4>
<p>React ç»„ä»¶é‡Œç”¨ Tailwindï¼Œç®€ç›´æ˜¯è¡Œäº‘æµæ°´ï½ ç›´æ¥åœ¨ className é‡Œå†™åŸå­ç±»å°±è¡Œï¼Œçœ‹ä¾‹å­ï¼š</p>
<p>jsx</p>
<pre><code class="hljs language-ini" lang="ini">&lt;button <span class="hljs-attr">className</span>=<span class="hljs-string">"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700"</span>&gt;
  æäº¤
&lt;/button&gt;
</code></pre>
<p>è§£é‡Šä¸‹è¿™äº› "ç§¯æœ¨"ï¼š</p>
<ul>
<li>px-4ï¼šæ°´å¹³å†…è¾¹è· 4 å•ä½ï¼ˆ1 å•ä½ = 4pxï¼‰</li>
<li>py-2ï¼šå‚ç›´å†…è¾¹è· 2 å•ä½</li>
<li>bg-blue-600ï¼šèƒŒæ™¯è‰²ä¸ºè“è‰²ï¼ˆ600 æ˜¯æ·±æµ…åº¦ï¼‰</li>
<li>text-whiteï¼šæ–‡å­—ç™½è‰²</li>
<li>rounded-mdï¼šä¸­ç­‰åœ†è§’</li>
<li>hover:bg-blue-700ï¼šé¼ æ ‡æ‚¬åœæ—¶èƒŒæ™¯è‰²æ·±ä¸€ç‚¹ï¼ˆä¼ªç±»ç›´æ¥å†™ï¼Œå¤ªæ–¹ä¾¿äº†ï¼ï¼‰</li>
</ul>
<h3 data-id="heading-12">äº”ã€TailwindCSS å®æˆ˜ï¼šä»ä»£ç åˆ°ç•Œé¢çš„é­”æ³• âœ¨</h3>
<h4 data-id="heading-13">1. åŸå­ç±»ç»„åˆå®ç°å¡ç‰‡ UI</h4>
<p>æ¥çœ‹ä¸ª ArticleCard ç»„ä»¶ï¼Œç”¨ Tailwind æ­ä¸ªå¡ç‰‡è¶…ç®€å•ï¼š</p>
<p>jsx</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// App2.jsxçš„å¡ç‰‡ç»„ä»¶</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">ArticleCard</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"p-4 bg-white rounded-xl shadow hover:shadow-lg transition"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h2</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"text-lg font-bold"</span>&gt;</span>Tailwindcss<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"text-gray-500 mt-2"</span>&gt;</span>
        ç”¨utility class å¿«é€Ÿæ„å»ºUI
      <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  )
}
</code></pre>
<p>é€ä¸ªæ‹†è§£ "é­”æ³•å’’è¯­"ï¼š</p>
<ul>
<li>p-4ï¼šå†…è¾¹è· 4 å•ä½ï¼Œè®©å†…å®¹ä¸è´´è¾¹</li>
<li>bg-whiteï¼šç™½è‰²èƒŒæ™¯ï¼Œåƒå¼ å¡ç‰‡çº¸</li>
<li>rounded-xlï¼šè¶…å¤§åœ†è§’ï¼Œé¢œå€¼ up</li>
<li>shadowï¼šåŠ ä¸ªé˜´å½±ï¼Œæœ‰ç«‹ä½“æ„Ÿ</li>
<li>hover:shadow-lgï¼š hover æ—¶é˜´å½±å˜å¤§ï¼Œäº¤äº’æ„Ÿæ‹‰æ»¡</li>
<li>transitionï¼šè¿‡æ¸¡åŠ¨ç”»ï¼Œè®© hover æ•ˆæœæ›´ä¸æ»‘</li>
<li>text-lgï¼šæ–‡å­—å¤§å°ä¸º large</li>
<li>font-boldï¼šå­—ä½“åŠ ç²—</li>
<li>text-gray-500ï¼šæ–‡å­—ç°è‰²ï¼ˆ500 æ˜¯ä¸­æ€§ç°ï¼‰</li>
<li>mt-2ï¼šä¸Šè¾¹è· 2 å•ä½ï¼Œå’Œæ ‡é¢˜éš”å¼€ç‚¹</li>
</ul>
<p>æ•ˆæœå°±æ˜¯ä¸€ä¸ªç®€çº¦åˆå¥½çœ‹çš„å¡ç‰‡ï¼Œhover æ—¶è¿˜æœ‰å¾®å¦™çš„é˜´å½±å˜åŒ–ï¼Œæ˜¯ä¸æ˜¯æ¯”å†™ä¸€å † CSS å¿«å¤šäº†ï¼Ÿ<strong>æ¥çœ‹çœ‹æ•ˆæœå§ï¼š</strong></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/53e3df6217574ddabab8a410d6d636ca~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeGlhb3h1ZV8=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767404986&amp;x-signature=PheHjY02ke6fgOv8b4jSQUkRTb0%3D" alt="QQ20251227-92849.gif" loading="lazy"/></p>
<h4 data-id="heading-14">2. å“åº”å¼å¸ƒå±€ + ä¼ªç±»ï¼šé€‚é…å„ç§è®¾å¤‡ ğŸ“±ğŸ’»</h4>
<p>Tailwind çš„å“åº”å¼è®¾è®¡å ªç§°ä¸€ç»ï¼Œè‡ªå¸¦æ–­ç‚¹å‰ç¼€ï¼ˆsm:ã€md:ã€lg: ç­‰ï¼‰ï¼Œè½»æ¾å®ç° "ç§»åŠ¨ç«¯ - æ¡Œé¢ç«¯" é€‚é…ã€‚</p>
<p>jsx</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// App.jsxçš„å“åº”å¼å¸ƒå±€</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"flex flex-col md:flex-row gap-4"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">main</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"bg-blue-100 p-4 md:w-2/3"</span>&gt;</span>ä¸»å†…å®¹<span class="hljs-tag">&lt;/<span class="hljs-name">main</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">aside</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"bg-green-100 p-4 md:w-1/3"</span>&gt;</span>ä¾§è¾¹æ <span class="hljs-tag">&lt;/<span class="hljs-name">aside</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  )
}
</code></pre>
<p>è¯¦è§£å“åº”å¼é­”æ³•ï¼š</p>
<ul>
<li>flexï¼šå¼€å¯å¼¹æ€§å¸ƒå±€</li>
<li>flex-colï¼šé»˜è®¤å‚ç›´æ’åˆ—ï¼ˆç§»åŠ¨ç«¯å‹å¥½ï¼‰</li>
<li>md:flex-rowï¼šå½“å±å¹•å®½åº¦â‰¥768pxï¼ˆmd æ–­ç‚¹ï¼‰æ—¶ï¼Œæ”¹ä¸ºæ°´å¹³æ’åˆ—ï¼ˆæ¡Œé¢ç«¯å‹å¥½ï¼‰</li>
<li>gap-4ï¼šå­å…ƒç´ ä¹‹é—´çš„é—´è·ä¸º 4 å•ä½</li>
<li>md:w-2/3ï¼šæ¡Œé¢ç«¯æ—¶ä¸»å†…å®¹å  2/3 å®½åº¦</li>
<li>md:w-1/3ï¼šæ¡Œé¢ç«¯æ—¶ä¾§è¾¹æ å  1/3 å®½åº¦</li>
</ul>
<p>åœ¨æ‰‹æœºä¸Šçœ‹æ˜¯ä¸Šä¸‹æ’åˆ—ï¼Œåœ¨ç”µè„‘ä¸Šçœ‹æ˜¯å·¦å³æ’åˆ—ï¼Œå®Œå…¨ä¸ç”¨å†™åª’ä½“æŸ¥è¯¢ï¼ŒTailwind å¸®ä½ æå®šä¸€åˆ‡ï¼</p>
<p><strong>PCç«¯ï¼š</strong></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c220a8ff96074890a3d89cf09f69d15b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeGlhb3h1ZV8=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767404986&amp;x-signature=2dNaImU7waECDF3%2F5etTMHOqe04%3D" alt="QQ20251227-093221.png" loading="lazy"/>
<strong>ç§»åŠ¨ç«¯ï¼š</strong></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/145b2b9ba5ef495dbe09135842df2d1d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeGlhb3h1ZV8=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767404986&amp;x-signature=ExgGeiY731daIhLbDwU2yEildE4%3D" alt="QQ20251227-093236.png" loading="lazy"/></p>
<h3 data-id="heading-15">å…­ã€é¢è¯•å®˜ä¼šé—®ï¼šè¿™äº›è€ƒç‚¹è¦è®°ç‰¢ï¼ğŸ“</h3>
<ol>
<li>ä»€ä¹ˆæ˜¯åŸå­ CSSï¼ŸTailwindCSS çš„æ ¸å¿ƒæ€æƒ³æ˜¯ä»€ä¹ˆï¼Ÿï¼ˆç­”ï¼šå°†æ ·å¼æ‹†åˆ†ä¸ºæœ€å°å•ä½çš„åŸå­ç±»ï¼Œé€šè¿‡ç»„åˆå®ç°å¤æ‚æ ·å¼ï¼‰</li>
<li>Tailwind ç›¸æ¯”ä¼ ç»Ÿ CSS æœ‰ä»€ä¹ˆä¼˜åŠ¿ï¼Ÿï¼ˆç­”ï¼šå‡å°‘é‡å¤ä»£ç ã€ä¸ç”¨æƒ³ç±»åã€å“åº”å¼æ–¹ä¾¿ã€å¼€å‘æ•ˆç‡é«˜ï¼‰</li>
<li>å¦‚ä½•åœ¨ Tailwind ä¸­å®ç°å“åº”å¼å¸ƒå±€é€‚é…ï¼Ÿï¼ˆç­”ï¼šä½¿ç”¨æ–­ç‚¹å‰ç¼€ï¼Œå¦‚ md:ã€lg:ï¼Œé…åˆåŸå­ç±»ï¼‰</li>
</ol>
<h3 data-id="heading-16">ä¸ƒã€ç»“è¯­ï¼šä»æ­¤çˆ±ä¸Šå†™æ ·å¼ï¼ğŸ’–</h3>
<p>ä»¥å‰å†™æ ·å¼ï¼Œæ€»åœ¨ "æƒ³ç±»å - å†™ CSS - è°ƒæ ·å¼" çš„å¾ªç¯é‡ŒæŒ£æ‰ï¼›ç”¨äº† TailwindCSSåï¼Œå°±åƒå¼€äº† "æ ·å¼åŠ é€Ÿå™¨"â€”â€” ä¸ç”¨åˆ‡æ¢æ–‡ä»¶ï¼Œä¸ç”¨è®°å¤æ‚è§„åˆ™ï¼Œå¯¹ç€è®¾è®¡ç¨¿æ‹¼åŸå­ç±»å°±è¡Œï¼Œç”šè‡³ AI éƒ½èƒ½å¸®ä½ å†™å¤§åŠï¼ğŸ‘‹</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Pythonæœºå™¨å­¦ä¹ ä¸‰å¤§ç»å…¸ç®—æ³•ï¼šKNNã€SVMã€æœ´ç´ è´å¶æ–¯]]></title>    <link>https://juejin.cn/post/7587965800273657882</link>    <guid>https://juejin.cn/post/7587965800273657882</guid>    <pubDate>2025-12-27T02:24:33.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587965800273657882" data-draft-id="7587965800273641498" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Pythonæœºå™¨å­¦ä¹ ä¸‰å¤§ç»å…¸ç®—æ³•ï¼šKNNã€SVMã€æœ´ç´ è´å¶æ–¯"/> <meta itemprop="keywords" content="Python"/> <meta itemprop="datePublished" content="2025-12-27T02:24:33.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="AIèƒ½åŠ›æ¢ç´¢"/> <meta itemprop="url" content="https://juejin.cn/user/1549641121016795"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Pythonæœºå™¨å­¦ä¹ ä¸‰å¤§ç»å…¸ç®—æ³•ï¼šKNNã€SVMã€æœ´ç´ è´å¶æ–¯
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1549641121016795/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    AIèƒ½åŠ›æ¢ç´¢
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-27T02:24:33.000Z" title="Sat Dec 27 2025 02:24:33 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    6
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æœºå™¨å­¦ä¹ å…¥é—¨çš„æ ¸å¿ƒæ˜¯æŒæ¡ç»å…¸ç®—æ³•çš„åŸç†ä¸å®æˆ˜ï¼ŒKè¿‘é‚»ï¼ˆKNNï¼‰ã€æ”¯æŒå‘é‡æœºï¼ˆSVMï¼‰ã€æœ´ç´ è´å¶æ–¯ä½œä¸ºåˆ†ç±»ä»»åŠ¡çš„ä¸‰å¤§åŸºç¡€ç®—æ³•ï¼Œè¦†ç›–äº†â€œåŸºäºè·ç¦»â€â€œåŸºäºè¶…å¹³é¢â€â€œåŸºäºæ¦‚ç‡â€ä¸‰ç§æ ¸å¿ƒæ€è·¯ï¼Œæ˜¯å…¥é—¨æœºå™¨å­¦ä¹ çš„å¿…å­¦å†…å®¹ã€‚</p>
<h2 data-id="heading-0">ä¸€ã€æ ¸å¿ƒå‰ç½®çŸ¥è¯†ä¸ç¯å¢ƒå‡†å¤‡</h2>
<h3 data-id="heading-1">1. ç®—æ³•æ ¸å¿ƒå®šä½ï¼ˆå¿«é€Ÿé€‰å¯¹ç®—æ³•ï¼‰</h3>

































<table><thead><tr><th>ç®—æ³•</th><th>æ ¸å¿ƒæ€æƒ³</th><th>ä¼˜åŠ¿</th><th>åŠ£åŠ¿</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>KNNï¼ˆKè¿‘é‚»ï¼‰</td><td>è¿‘æœ±è€…èµ¤ï¼šæŒ‰æœ€è¿‘é‚»æ ·æœ¬åˆ†ç±»</td><td>åŸç†ç®€å•ã€æ— éœ€è®­ç»ƒã€é€‚åˆå¤šåˆ†ç±»</td><td>é«˜ç»´æ•°æ®æ…¢ã€å¯¹å¼‚å¸¸å€¼æ•æ„Ÿ</td><td>å°æ ·æœ¬åˆ†ç±»ã€æ¨èç³»ç»Ÿã€æ•°æ®è¡¥å…¨</td></tr><tr><td>SVMï¼ˆæ”¯æŒå‘é‡æœºï¼‰</td><td>æ‰¾æœ€ä¼˜è¶…å¹³é¢åˆ†éš”æ ·æœ¬</td><td>é«˜ç»´æ•°æ®è¡¨ç°å¥½ã€æ³›åŒ–èƒ½åŠ›å¼º</td><td>å¤§æ ·æœ¬è®­ç»ƒæ…¢ã€å‚æ•°è°ƒä¼˜å¤æ‚</td><td>æ–‡æœ¬åˆ†ç±»ã€å›¾åƒè¯†åˆ«ã€ç‰¹å¾ç»´åº¦é«˜çš„åœºæ™¯</td></tr><tr><td>æœ´ç´ è´å¶æ–¯</td><td>åŸºäºæ¦‚ç‡å…¬å¼ï¼ˆè´å¶æ–¯ï¼‰åˆ†ç±»</td><td>è®­ç»ƒé€Ÿåº¦æå¿«ã€é€‚åˆæ–‡æœ¬æ•°æ®</td><td>å‡è®¾ç‰¹å¾ç‹¬ç«‹ï¼ˆå®é™…éš¾æ»¡è¶³ï¼‰</td><td>åƒåœ¾é‚®ä»¶è¿‡æ»¤ã€æ–‡æœ¬åˆ†ç±»ã€æƒ…æ„Ÿåˆ†æ</td></tr></tbody></table>
<h3 data-id="heading-2">2. ç¯å¢ƒå®‰è£…ï¼ˆScikit-learnæ ¸å¿ƒåº“ï¼‰</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å®‰è£…æ ¸å¿ƒåº“ï¼ˆPython 3.8~3.10ç‰ˆæœ¬æœ€ä½³ï¼‰</span>
pip install scikit-learn numpy pandas matplotlib
</code></pre>
<ul>
<li>Scikit-learnï¼šå°è£…ä¸‰å¤§ç®—æ³•çš„æ ¸å¿ƒAPIï¼Œè°ƒç”¨ç»Ÿä¸€ï¼›</li>
<li>NumPyï¼šå¤„ç†æ•°å€¼è®¡ç®—ï¼Œæ”¯æ’‘ç®—æ³•åº•å±‚ï¼›</li>
<li>Matplotlibï¼šå¯è§†åŒ–æ•°æ®åˆ†å¸ƒå’Œåˆ†ç±»æ•ˆæœã€‚</li>
</ul>
<h3 data-id="heading-3">3. éªŒè¯å®‰è£…</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> sklearn
<span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np
<span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt
<span class="hljs-built_in">print</span>(<span class="hljs-string">"Scikit-learnç‰ˆæœ¬ï¼š"</span>, sklearn.__version__)  <span class="hljs-comment"># è¾“å‡ºâ‰¥1.0.0å³å¯</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"ç¯å¢ƒå‡†å¤‡å®Œæˆï¼"</span>)
</code></pre>
<h2 data-id="heading-4">äºŒã€Kè¿‘é‚»ï¼ˆKNNï¼‰ç®—æ³•ï¼šæœ€ç®€å•çš„â€œé‚»å±…æŠ•ç¥¨â€åˆ†ç±»</h2>
<h3 data-id="heading-5">1. ç®—æ³•åŸç†ï¼ˆé€šä¿—ç†è§£ï¼‰</h3>
<p>KNNçš„æ ¸å¿ƒé€»è¾‘ï¼šâ€œç‰©ä»¥ç±»èšï¼Œäººä»¥ç¾¤åˆ†â€â€”â€”ç»™ä¸€ä¸ªæ–°æ ·æœ¬ï¼Œæ‰¾å®ƒæœ€è¿‘çš„Kä¸ªæ ·æœ¬ï¼ˆé‚»å±…ï¼‰ï¼Œè¿™Kä¸ªé‚»å±…ä¸­å æ¯”æœ€å¤šçš„ç±»åˆ«ï¼Œå°±æ˜¯æ–°æ ·æœ¬çš„ç±»åˆ«ã€‚</p>
<ul>
<li>Kå€¼æ˜¯æ ¸å¿ƒå‚æ•°ï¼šKå¤ªå°æ˜“è¿‡æ‹Ÿåˆï¼ˆå—å¼‚å¸¸å€¼å½±å“ï¼‰ï¼ŒKå¤ªå¤§æ˜“æ¬ æ‹Ÿåˆï¼ˆåˆ†ç±»æ¨¡ç³Šï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-6">2. å®æˆ˜ï¼šé¸¢å°¾èŠ±å“ç§åˆ†ç±»ï¼ˆKNNå®ç°ï¼‰</h3>
<p>ä»¥ç»å…¸çš„é¸¢å°¾èŠ±æ•°æ®é›†ä¸ºä¾‹ï¼Œå®ç°KNNåˆ†ç±»ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># æ­¥éª¤1ï¼šåŠ è½½æ•°æ®é›†å¹¶åˆ’åˆ†è®­ç»ƒé›†/æµ‹è¯•é›†</span>
<span class="hljs-keyword">from</span> sklearn.datasets <span class="hljs-keyword">import</span> load_iris
<span class="hljs-keyword">from</span> sklearn.model_selection <span class="hljs-keyword">import</span> train_test_split

<span class="hljs-comment"># åŠ è½½æ•°æ®ï¼ˆç‰¹å¾ï¼šèŠ±è¼/èŠ±ç“£çš„é•¿å®½ï¼Œæ ‡ç­¾ï¼š3ç±»é¸¢å°¾èŠ±ï¼‰</span>
iris = load_iris()
X = iris.data  <span class="hljs-comment"># ç‰¹å¾çŸ©é˜µ</span>
y = iris.target  <span class="hljs-comment"># æ ‡ç­¾å‘é‡</span>

<span class="hljs-comment"># åˆ’åˆ†æ•°æ®é›†ï¼šè®­ç»ƒé›†70%ï¼Œæµ‹è¯•é›†30%</span>
X_train, X_test, y_train, y_test = train_test_split(
    X, y, test_size=<span class="hljs-number">0.3</span>, random_state=<span class="hljs-number">42</span>  <span class="hljs-comment"># random_stateä¿è¯ç»“æœå¯å¤ç°</span>
)

<span class="hljs-comment"># æ­¥éª¤2ï¼šæ•°æ®æ ‡å‡†åŒ–ï¼ˆKNNåŸºäºè·ç¦»ï¼Œå¿…é¡»æ ‡å‡†åŒ–ï¼‰</span>
<span class="hljs-keyword">from</span> sklearn.preprocessing <span class="hljs-keyword">import</span> StandardScaler
scaler = StandardScaler()
X_train_scaled = scaler.fit_transform(X_train)
X_test_scaled = scaler.transform(X_test)

<span class="hljs-comment"># æ­¥éª¤3ï¼šåˆå§‹åŒ–å¹¶è®­ç»ƒKNNæ¨¡å‹</span>
<span class="hljs-keyword">from</span> sklearn.neighbors <span class="hljs-keyword">import</span> KNeighborsClassifier

<span class="hljs-comment"># åˆå§‹åŒ–æ¨¡å‹ï¼šK=5ï¼ˆå¸¸ç”¨é»˜è®¤å€¼ï¼‰</span>
knn_model = KNeighborsClassifier(n_neighbors=<span class="hljs-number">5</span>)
<span class="hljs-comment"># KNNæ— éœ€â€œè®­ç»ƒâ€ï¼Œä»…å­˜å‚¨è®­ç»ƒé›†æ•°æ®ï¼ˆé¢„æµ‹æ—¶è®¡ç®—è·ç¦»ï¼‰</span>
knn_model.fit(X_train_scaled, y_train)

<span class="hljs-comment"># æ­¥éª¤4ï¼šæ¨¡å‹é¢„æµ‹ä¸è¯„ä¼°</span>
<span class="hljs-keyword">from</span> sklearn.metrics <span class="hljs-keyword">import</span> accuracy_score, classification_report

<span class="hljs-comment"># é¢„æµ‹æµ‹è¯•é›†</span>
y_pred = knn_model.predict(X_test_scaled)
<span class="hljs-comment"># è®¡ç®—å‡†ç¡®ç‡</span>
accuracy = accuracy_score(y_test, y_pred)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"KNNæ¨¡å‹å‡†ç¡®ç‡ï¼š"</span>, accuracy)  <span class="hljs-comment"># é¸¢å°¾èŠ±æ•°æ®é›†ä¸Šâ‰ˆ0.98</span>
<span class="hljs-comment"># è¯¦ç»†åˆ†ç±»æŠ¥å‘Šï¼ˆç²¾ç¡®ç‡ã€å¬å›ç‡ã€F1å€¼ï¼‰</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"\nåˆ†ç±»æŠ¥å‘Šï¼š"</span>)
<span class="hljs-built_in">print</span>(classification_report(y_test, y_pred))

<span class="hljs-comment"># æ­¥éª¤5ï¼šKå€¼è°ƒä¼˜ï¼ˆæ‰¾åˆ°æœ€ä¼˜Kï¼‰</span>
<span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt
plt.rcParams[<span class="hljs-string">"font.sans-serif"</span>] = [<span class="hljs-string">"SimHei"</span>]  <span class="hljs-comment"># ä¸­æ–‡æ˜¾ç¤º</span>

<span class="hljs-comment"># æµ‹è¯•K=1åˆ°20çš„å‡†ç¡®ç‡</span>
k_range = <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, <span class="hljs-number">21</span>)
accuracy_list = []
<span class="hljs-keyword">for</span> k <span class="hljs-keyword">in</span> k_range:
    knn = KNeighborsClassifier(n_neighbors=k)
    knn.fit(X_train_scaled, y_train)
    accuracy_list.append(accuracy_score(y_test, knn.predict(X_test_scaled)))

<span class="hljs-comment"># å¯è§†åŒ–Kå€¼ä¸å‡†ç¡®ç‡å…³ç³»</span>
plt.figure(figsize=(<span class="hljs-number">10</span>, <span class="hljs-number">6</span>))
plt.plot(k_range, accuracy_list, marker=<span class="hljs-string">'o'</span>, color=<span class="hljs-string">'blue'</span>)
plt.xlabel(<span class="hljs-string">'Kå€¼ï¼ˆé‚»å±…æ•°é‡ï¼‰'</span>)
plt.ylabel(<span class="hljs-string">'å‡†ç¡®ç‡'</span>)
plt.title(<span class="hljs-string">'KNNç®—æ³•Kå€¼è°ƒä¼˜'</span>)
plt.grid(linestyle=<span class="hljs-string">'--'</span>, alpha=<span class="hljs-number">0.7</span>)
plt.savefig(<span class="hljs-string">'knn_k_tuning.png'</span>)
plt.close()
</code></pre>
<h3 data-id="heading-7">3. KNNå…³é”®æŠ€å·§</h3>
<ul>
<li><strong>æ ‡å‡†åŒ–å¿…åš</strong>ï¼šç‰¹å¾å•ä½ä¸åŒï¼ˆå¦‚èŠ±è¼é•¿åº¦cmï¼ŒèŠ±ç“£å®½åº¦mmï¼‰ä¼šå¯¼è‡´è·ç¦»è®¡ç®—åå·®ï¼Œå¿…é¡»ç”¨<code>StandardScaler</code>æ ‡å‡†åŒ–ï¼›</li>
<li><strong>Kå€¼é€‰æ‹©</strong>ï¼šé€šè¿‡éå†æµ‹è¯•ï¼ˆå¦‚K=1~20ï¼‰æ‰¾åˆ°å‡†ç¡®ç‡æœ€é«˜çš„Kï¼Œæˆ–ç”¨â€œè‚˜éƒ¨æ³•åˆ™â€ï¼ˆå‡†ç¡®ç‡æå‡æ”¾ç¼“çš„ç‚¹ï¼‰ï¼›</li>
<li><strong>è·ç¦»åº¦é‡</strong>ï¼šé»˜è®¤ç”¨æ¬§æ°è·ç¦»ï¼Œé«˜ç»´æ•°æ®å¯å°è¯•æ›¼å“ˆé¡¿è·ç¦»ï¼ˆ<code>metric='manhattan'</code>ï¼‰ã€‚</li>
</ul>
<h2 data-id="heading-8">ä¸‰ã€æ”¯æŒå‘é‡æœºï¼ˆSVMï¼‰ï¼šæ‰¾â€œæœ€ä¼˜åˆ†éš”çº¿â€çš„åˆ†ç±»å™¨</h2>
<h3 data-id="heading-9">1. ç®—æ³•åŸç†ï¼ˆé€šä¿—ç†è§£ï¼‰</h3>
<p>SVMçš„æ ¸å¿ƒæ˜¯åœ¨ç‰¹å¾ç©ºé—´ä¸­æ‰¾ä¸€æ¡â€œæœ€ä¼˜è¶…å¹³é¢â€ï¼Œå°†ä¸åŒç±»åˆ«çš„æ ·æœ¬åˆ†éš”å¼€ï¼Œä¸”è¶…å¹³é¢åˆ°ä¸¤è¾¹æ ·æœ¬çš„â€œé—´éš”â€æœ€å¤§â€”â€”é—´éš”è¶Šå¤§ï¼Œæ¨¡å‹æ³›åŒ–èƒ½åŠ›è¶Šå¼ºã€‚</p>
<ul>
<li>çº¿æ€§å¯åˆ†ï¼šç›´æ¥æ‰¾çº¿æ€§è¶…å¹³é¢ï¼›</li>
<li>çº¿æ€§ä¸å¯åˆ†ï¼šé€šè¿‡â€œæ ¸å‡½æ•°â€å°†æ•°æ®æ˜ å°„åˆ°é«˜ç»´ç©ºé—´ï¼Œå®ç°çº¿æ€§åˆ†éš”ï¼ˆå¸¸ç”¨æ ¸å‡½æ•°ï¼šé«˜æ–¯æ ¸<code>rbf</code>ã€çº¿æ€§æ ¸<code>linear</code>ï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-10">2. å®æˆ˜ï¼šæ‰‹å†™æ•°å­—åˆ†ç±»ï¼ˆSVMå®ç°ï¼‰</h3>
<p>ä»¥æ‰‹å†™æ•°å­—æ•°æ®é›†ä¸ºä¾‹ï¼Œå®ç°SVMåˆ†ç±»ï¼ˆé€‚åˆé«˜ç»´ç‰¹å¾åœºæ™¯ï¼‰ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># æ­¥éª¤1ï¼šåŠ è½½æ‰‹å†™æ•°å­—æ•°æ®é›†</span>
<span class="hljs-keyword">from</span> sklearn.datasets <span class="hljs-keyword">import</span> load_digits
<span class="hljs-keyword">from</span> sklearn.model_selection <span class="hljs-keyword">import</span> train_test_split

<span class="hljs-comment"># åŠ è½½æ•°æ®ï¼ˆ8x8åƒç´ çš„æ‰‹å†™æ•°å­—ï¼Œå…±10ç±»ï¼‰</span>
digits = load_digits()
X = digits.data  <span class="hljs-comment"># ç‰¹å¾ï¼š64ç»´ï¼ˆ8*8ï¼‰</span>
y = digits.target  <span class="hljs-comment"># æ ‡ç­¾ï¼š0-9</span>

<span class="hljs-comment"># åˆ’åˆ†æ•°æ®é›†</span>
X_train, X_test, y_train, y_test = train_test_split(
    X, y, test_size=<span class="hljs-number">0.3</span>, random_state=<span class="hljs-number">42</span>
)

<span class="hljs-comment"># æ­¥éª¤2ï¼šæ•°æ®æ ‡å‡†åŒ–</span>
<span class="hljs-keyword">from</span> sklearn.preprocessing <span class="hljs-keyword">import</span> StandardScaler
scaler = StandardScaler()
X_train_scaled = scaler.fit_transform(X_train)
X_test_scaled = scaler.transform(X_test)

<span class="hljs-comment"># æ­¥éª¤3ï¼šåˆå§‹åŒ–å¹¶è®­ç»ƒSVMæ¨¡å‹</span>
<span class="hljs-keyword">from</span> sklearn.svm <span class="hljs-keyword">import</span> SVC

<span class="hljs-comment"># åˆå§‹åŒ–æ¨¡å‹ï¼šæ ¸å‡½æ•°rbfï¼ˆå¤„ç†éçº¿æ€§æ•°æ®ï¼‰ï¼ŒC=1.0ï¼ˆæ­£åˆ™åŒ–ç³»æ•°ï¼‰</span>
svm_model = SVC(kernel=<span class="hljs-string">'rbf'</span>, C=<span class="hljs-number">1.0</span>, gamma=<span class="hljs-string">'scale'</span>, random_state=<span class="hljs-number">42</span>)
<span class="hljs-comment"># è®­ç»ƒæ¨¡å‹ï¼ˆSVMè®­ç»ƒè€—æ—¶æ¯”KNNé•¿ï¼Œå°¤å…¶å¤§æ ·æœ¬ï¼‰</span>
svm_model.fit(X_train_scaled, y_train)

<span class="hljs-comment"># æ­¥éª¤4ï¼šæ¨¡å‹è¯„ä¼°</span>
<span class="hljs-keyword">from</span> sklearn.metrics <span class="hljs-keyword">import</span> accuracy_score, confusion_matrix

y_pred = svm_model.predict(X_test_scaled)
accuracy = accuracy_score(y_test, y_pred)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"SVMæ¨¡å‹å‡†ç¡®ç‡ï¼š"</span>, accuracy)  <span class="hljs-comment"># æ‰‹å†™æ•°å­—æ•°æ®é›†ä¸Šâ‰ˆ0.98</span>

<span class="hljs-comment"># æ··æ·†çŸ©é˜µï¼ˆæŸ¥çœ‹æ•°å­—åˆ†ç±»é”™è¯¯æƒ…å†µï¼‰</span>
cm = confusion_matrix(y_test, y_pred)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"\næ··æ·†çŸ©é˜µï¼š"</span>)
<span class="hljs-built_in">print</span>(cm)

<span class="hljs-comment"># æ­¥éª¤5ï¼šSVMå‚æ•°è°ƒä¼˜ï¼ˆç½‘æ ¼æœç´¢æ‰¾æœ€ä¼˜Cå’Œgammaï¼‰</span>
<span class="hljs-keyword">from</span> sklearn.model_selection <span class="hljs-keyword">import</span> GridSearchCV

<span class="hljs-comment"># å®šä¹‰å‚æ•°ç½‘æ ¼</span>
param_grid = {
    <span class="hljs-string">'C'</span>: [<span class="hljs-number">0.1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">10</span>],  <span class="hljs-comment"># æ­£åˆ™åŒ–ç³»æ•°ï¼šè¶Šå¤§å®¹é”™ç‡è¶Šä½</span>
    <span class="hljs-string">'gamma'</span>: [<span class="hljs-string">'scale'</span>, <span class="hljs-string">'auto'</span>, <span class="hljs-number">0.001</span>, <span class="hljs-number">0.01</span>],  <span class="hljs-comment"># æ ¸å‡½æ•°ç³»æ•°</span>
    <span class="hljs-string">'kernel'</span>: [<span class="hljs-string">'rbf'</span>, <span class="hljs-string">'linear'</span>]
}

<span class="hljs-comment"># ç½‘æ ¼æœç´¢ï¼ˆ5æŠ˜äº¤å‰éªŒè¯ï¼‰</span>
grid_search = GridSearchCV(SVC(random_state=<span class="hljs-number">42</span>), param_grid, cv=<span class="hljs-number">5</span>, scoring=<span class="hljs-string">'accuracy'</span>)
grid_search.fit(X_train_scaled, y_train)

<span class="hljs-comment"># è¾“å‡ºæœ€ä¼˜å‚æ•°</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"\nSVMæœ€ä¼˜å‚æ•°ï¼š"</span>, grid_search.best_params_)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"äº¤å‰éªŒè¯æœ€ä¼˜å‡†ç¡®ç‡ï¼š"</span>, grid_search.best_score_)

<span class="hljs-comment"># ç”¨æœ€ä¼˜æ¨¡å‹é¢„æµ‹</span>
best_svm = grid_search.best_estimator_
<span class="hljs-built_in">print</span>(<span class="hljs-string">"æœ€ä¼˜æ¨¡å‹æµ‹è¯•é›†å‡†ç¡®ç‡ï¼š"</span>, accuracy_score(y_test, best_svm.predict(X_test_scaled)))
</code></pre>
<h3 data-id="heading-11">3. SVMå…³é”®æŠ€å·§</h3>
<ul>
<li><strong>æ ¸å‡½æ•°é€‰æ‹©</strong>ï¼šçº¿æ€§æ•°æ®ç”¨<code>linear</code>ï¼ˆé€Ÿåº¦å¿«ï¼‰ï¼Œéçº¿æ€§æ•°æ®ç”¨<code>rbf</code>ï¼ˆæ•ˆæœå¥½ï¼‰ï¼›</li>
<li><strong>å‚æ•°è°ƒä¼˜</strong>ï¼šCï¼ˆæ­£åˆ™åŒ–ï¼‰è¶Šå¤§ï¼Œæ¨¡å‹è¶Šâ€œç¡¬â€ï¼ˆæ˜“è¿‡æ‹Ÿåˆï¼‰ï¼›gammaè¶Šå¤§ï¼Œæ ¸å‡½æ•°å½±å“èŒƒå›´è¶Šå°ï¼ˆæ˜“è¿‡æ‹Ÿåˆï¼‰ï¼›</li>
<li><strong>æ ·æœ¬é‡é™åˆ¶</strong>ï¼šSVMé€‚åˆä¸­å°æ ·æœ¬ï¼ˆä¸‡çº§ä»¥å†…ï¼‰ï¼Œå¤§æ ·æœ¬å»ºè®®ç”¨<code>SGDClassifier</code>ï¼ˆéšæœºæ¢¯åº¦ä¸‹é™ç‰ˆSVMï¼‰ã€‚</li>
</ul>
<h2 data-id="heading-12">å››ã€æœ´ç´ è´å¶æ–¯ï¼šåŸºäºæ¦‚ç‡çš„â€œæ–‡æœ¬åˆ†ç±»ç¥å™¨â€</h2>
<h3 data-id="heading-13">1. ç®—æ³•åŸç†ï¼ˆé€šä¿—ç†è§£ï¼‰</h3>
<p>æœ´ç´ è´å¶æ–¯åŸºäºâ€œè´å¶æ–¯å…¬å¼â€ï¼Œæ ¸å¿ƒå‡è®¾æ˜¯â€œç‰¹å¾ä¹‹é—´ç›¸äº’ç‹¬ç«‹â€ï¼ˆæœ´ç´ æ€§ï¼‰ï¼Œé€šè¿‡è®¡ç®—æ ·æœ¬å±äºæ¯ä¸ªç±»åˆ«çš„æ¦‚ç‡ï¼Œé€‰æ‹©æ¦‚ç‡æœ€å¤§çš„ç±»åˆ«ä½œä¸ºé¢„æµ‹ç»“æœã€‚</p>
<ul>
<li>æ–‡æœ¬åˆ†ç±»ä¸­ï¼Œç‰¹å¾æ˜¯â€œå•è¯å‡ºç°æ¬¡æ•°â€ï¼Œé€šè¿‡è¯é¢‘è®¡ç®—æ¦‚ç‡ï¼Œé€Ÿåº¦æå¿«ã€‚</li>
</ul>
<h3 data-id="heading-14">2. å®æˆ˜ï¼šåƒåœ¾é‚®ä»¶åˆ†ç±»ï¼ˆæœ´ç´ è´å¶æ–¯å®ç°ï¼‰</h3>
<p>ä»¥ç»å…¸çš„20NewsGroupsæ–‡æœ¬æ•°æ®é›†ä¸ºä¾‹ï¼Œå®ç°æœ´ç´ è´å¶æ–¯æ–‡æœ¬åˆ†ç±»ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># æ­¥éª¤1ï¼šåŠ è½½æ–‡æœ¬æ•°æ®é›†å¹¶é¢„å¤„ç†</span>
<span class="hljs-keyword">from</span> sklearn.datasets <span class="hljs-keyword">import</span> fetch_20newsgroups
<span class="hljs-keyword">from</span> sklearn.feature_extraction.text <span class="hljs-keyword">import</span> TfidfVectorizer

<span class="hljs-comment"># åŠ è½½æ•°æ®é›†ï¼ˆä»…é€‰4ä¸ªç±»åˆ«ï¼Œç®€åŒ–ä»»åŠ¡ï¼‰</span>
categories = [<span class="hljs-string">'alt.atheism'</span>, <span class="hljs-string">'soc.religion.christian'</span>, <span class="hljs-string">'comp.graphics'</span>, <span class="hljs-string">'sci.med'</span>]
<span class="hljs-comment"># åŠ è½½è®­ç»ƒé›†å’Œæµ‹è¯•é›†</span>
train_data = fetch_20newsgroups(subset=<span class="hljs-string">'train'</span>, categories=categories, shuffle=<span class="hljs-literal">True</span>, random_state=<span class="hljs-number">42</span>)
test_data = fetch_20newsgroups(subset=<span class="hljs-string">'test'</span>, categories=categories, shuffle=<span class="hljs-literal">True</span>, random_state=<span class="hljs-number">42</span>)

<span class="hljs-comment"># æ–‡æœ¬ç‰¹å¾æå–ï¼šTF-IDFï¼ˆå°†æ–‡æœ¬è½¬ä¸ºæ•°å€¼ç‰¹å¾ï¼‰</span>
tfidf = TfidfVectorizer(stop_words=<span class="hljs-string">'english'</span>)  <span class="hljs-comment"># å»é™¤è‹±æ–‡åœç”¨è¯ï¼ˆthe/a/anç­‰ï¼‰</span>
X_train = tfidf.fit_transform(train_data.data)
X_test = tfidf.transform(test_data.data)
y_train = train_data.target
y_test = test_data.target

<span class="hljs-comment"># æ­¥éª¤2ï¼šåˆå§‹åŒ–å¹¶è®­ç»ƒæœ´ç´ è´å¶æ–¯æ¨¡å‹</span>
<span class="hljs-keyword">from</span> sklearn.naive_bayes <span class="hljs-keyword">import</span> MultinomialNB

<span class="hljs-comment"># å¤šé¡¹å¼æœ´ç´ è´å¶æ–¯ï¼ˆé€‚åˆæ–‡æœ¬åˆ†ç±»ï¼Œå¤„ç†ç¦»æ•£ç‰¹å¾ï¼‰</span>
nb_model = MultinomialNB(alpha=<span class="hljs-number">1.0</span>)  <span class="hljs-comment"># alphaï¼šå¹³æ»‘ç³»æ•°ï¼Œé¿å…æ¦‚ç‡ä¸º0</span>
nb_model.fit(X_train, y_train)

<span class="hljs-comment"># æ­¥éª¤3ï¼šæ¨¡å‹è¯„ä¼°</span>
<span class="hljs-keyword">from</span> sklearn.metrics <span class="hljs-keyword">import</span> accuracy_score, classification_report

y_pred = nb_model.predict(X_test)
accuracy = accuracy_score(y_test, y_pred)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"æœ´ç´ è´å¶æ–¯æ¨¡å‹å‡†ç¡®ç‡ï¼š"</span>, accuracy)  <span class="hljs-comment"># æ–‡æœ¬æ•°æ®é›†ä¸Šâ‰ˆ0.84</span>

<span class="hljs-comment"># è¯¦ç»†åˆ†ç±»æŠ¥å‘Š</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"\nåˆ†ç±»æŠ¥å‘Šï¼š"</span>)
<span class="hljs-built_in">print</span>(classification_report(y_test, y_pred, target_names=train_data.target_names))

<span class="hljs-comment"># æ­¥éª¤4ï¼šå®æˆ˜é¢„æµ‹æ–°æ–‡æœ¬</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">predict_text</span>(<span class="hljs-params">text</span>):
    <span class="hljs-comment"># æ–‡æœ¬è½¬ä¸ºTF-IDFç‰¹å¾</span>
    text_tfidf = tfidf.transform([text])
    <span class="hljs-comment"># é¢„æµ‹ç±»åˆ«</span>
    pred = nb_model.predict(text_tfidf)[<span class="hljs-number">0</span>]
    <span class="hljs-comment"># è¿”å›ç±»åˆ«åç§°</span>
    <span class="hljs-keyword">return</span> train_data.target_names[pred]

<span class="hljs-comment"># æµ‹è¯•é¢„æµ‹</span>
test_text1 = <span class="hljs-string">"GPU performance for 3D rendering"</span>  <span class="hljs-comment"># è®¡ç®—æœºå›¾å½¢å­¦</span>
test_text2 = <span class="hljs-string">"Medical treatment for diabetes"</span>  <span class="hljs-comment"># åŒ»å­¦</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"\næ–‡æœ¬1åˆ†ç±»ç»“æœï¼š"</span>, predict_text(test_text1))
<span class="hljs-built_in">print</span>(<span class="hljs-string">"æ–‡æœ¬2åˆ†ç±»ç»“æœï¼š"</span>, predict_text(test_text2))
</code></pre>
<h3 data-id="heading-15">3. æœ´ç´ è´å¶æ–¯å…³é”®æŠ€å·§</h3>
<ul>
<li><strong>ç‰¹å¾æå–</strong>ï¼šæ–‡æœ¬åˆ†ç±»å¿…é¡»ç”¨TF-IDF/è¯è¢‹æ¨¡å‹å°†æ–‡æœ¬è½¬ä¸ºæ•°å€¼ç‰¹å¾ï¼›</li>
<li><strong>å¹³æ»‘ç³»æ•°alpha</strong>ï¼šalphaè¶Šå¤§ï¼Œå¹³æ»‘è¶Šå¼ºï¼ˆé¿å…å› æŸä¸ªå•è¯æœªå‡ºç°å¯¼è‡´æ¦‚ç‡ä¸º0ï¼‰ï¼›</li>
<li><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šä¼˜å…ˆç”¨äºæ–‡æœ¬/åºåˆ—æ•°æ®ï¼Œä¸é€‚åˆç‰¹å¾é«˜åº¦ç›¸å…³çš„åœºæ™¯ï¼ˆè¿èƒŒâ€œæœ´ç´ â€å‡è®¾ï¼‰ã€‚</li>
</ul>
<h2 data-id="heading-16">äº”ã€ä¸‰å¤§ç®—æ³•å¯¹æ¯”ä¸é€‰å‹æŒ‡å—</h2>















































<table><thead><tr><th>ç»´åº¦</th><th>KNN</th><th>SVM</th><th>æœ´ç´ è´å¶æ–¯</th></tr></thead><tbody><tr><td>è®­ç»ƒé€Ÿåº¦</td><td>æ— è®­ç»ƒï¼ˆæå¿«ï¼‰</td><td>ä¸­-æ…¢ï¼ˆå°¤å…¶å¤§æ ·æœ¬ï¼‰</td><td>æå¿«ï¼ˆæ¦‚ç‡è®¡ç®—ï¼‰</td></tr><tr><td>é¢„æµ‹é€Ÿåº¦</td><td>æ…¢ï¼ˆè®¡ç®—è·ç¦»ï¼‰</td><td>å¿«</td><td>æå¿«</td></tr><tr><td>é«˜ç»´æ•°æ®</td><td>æ•ˆæœå·®ï¼ˆç»´åº¦ç¾éš¾ï¼‰</td><td>æ•ˆæœå¥½</td><td>æ•ˆæœå¥½ï¼ˆæ–‡æœ¬é«˜ç»´ï¼‰</td></tr><tr><td>è¶…å‚æ•°è°ƒä¼˜</td><td>ä»…Kå€¼</td><td>Cã€gammaã€æ ¸å‡½æ•°</td><td>ä»…alpha</td></tr><tr><td>è¿‡æ‹Ÿåˆé£é™©</td><td>Kå°æ˜“è¿‡æ‹Ÿåˆ</td><td>Cå¤§æ˜“è¿‡æ‹Ÿåˆ</td><td>ä½ï¼ˆæ¨¡å‹ç®€å•ï¼‰</td></tr><tr><td>æ ¸å¿ƒé€‚ç”¨åœºæ™¯</td><td>å°æ ·æœ¬åˆ†ç±»</td><td>é«˜ç»´/éçº¿æ€§åˆ†ç±»</td><td>æ–‡æœ¬/æ¦‚ç‡ç±»åˆ†ç±»</td></tr></tbody></table>
<h3 data-id="heading-17">é€‰å‹åŸåˆ™ï¼š</h3>
<ol>
<li>å°æ ·æœ¬ã€ç‰¹å¾ç»´åº¦ä½ â†’ é€‰KNNï¼›</li>
<li>é«˜ç»´æ•°æ®ï¼ˆæ–‡æœ¬/å›¾åƒï¼‰ã€éçº¿æ€§ â†’ é€‰SVMï¼›</li>
<li>æ–‡æœ¬åˆ†ç±»ã€è¿½æ±‚é€Ÿåº¦ã€æ ·æœ¬é‡å¤§ â†’ é€‰æœ´ç´ è´å¶æ–¯ã€‚</li>
</ol>
<h2 data-id="heading-18">å…­ã€å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ³•</h2>
<ol>
<li><strong>KNNå‡†ç¡®ç‡ä½</strong>ï¼š
<ul>
<li>åŸå› ï¼šæœªæ ‡å‡†åŒ–ã€Kå€¼ä¸åˆé€‚ã€ç‰¹å¾ç»´åº¦å¤ªé«˜ï¼›</li>
<li>è§£å†³ï¼šæ ‡å‡†åŒ–æ•°æ®ã€è°ƒä¼˜Kå€¼ã€é™ç»´ï¼ˆPCAï¼‰ã€‚</li>
</ul>
</li>
<li><strong>SVMè®­ç»ƒæ…¢</strong>ï¼š
<ul>
<li>åŸå› ï¼šæ ·æœ¬é‡å¤§ã€ç”¨rbfæ ¸å‡½æ•°ï¼›</li>
<li>è§£å†³ï¼šç”¨çº¿æ€§æ ¸ã€é™ç»´ã€é‡‡æ ·å‡å°‘æ ·æœ¬é‡ã€‚</li>
</ul>
</li>
<li><strong>æœ´ç´ è´å¶æ–¯æ–‡æœ¬åˆ†ç±»æ•ˆæœå·®</strong>ï¼š
<ul>
<li>åŸå› ï¼šæœªå»é™¤åœç”¨è¯ã€TF-IDFå‚æ•°ä¸åˆé€‚ï¼›</li>
<li>è§£å†³ï¼šå»é™¤åœç”¨è¯ã€è°ƒæ•´TF-IDFçš„<code>max_features</code>ï¼ˆé™åˆ¶ç‰¹å¾æ•°ï¼‰ã€‚</li>
</ul>
</li>
<li><strong>æ¨¡å‹è¿‡æ‹Ÿåˆ</strong>ï¼š
<ul>
<li>KNNï¼šå¢å¤§Kå€¼ï¼›</li>
<li>SVMï¼šå‡å°Cå€¼ã€å¢å¤§gammaï¼›</li>
<li>æœ´ç´ è´å¶æ–¯ï¼šå¢å¤§alphaå€¼ã€‚</li>
</ul>
</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ¯æ—¥ä¸€ä¸ªC++çŸ¥è¯†ç‚¹|è±å½¢ç»§æ‰¿]]></title>    <link>https://juejin.cn/post/7588004376866947107</link>    <guid>https://juejin.cn/post/7588004376866947107</guid>    <pubDate>2025-12-26T16:50:49.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588004376866947107" data-draft-id="7587997157237555252" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ¯æ—¥ä¸€ä¸ªC++çŸ¥è¯†ç‚¹|è±å½¢ç»§æ‰¿"/> <meta itemprop="keywords" content="ç¼–ç¨‹è¯­è¨€,C++,ç¨‹åºå‘˜"/> <meta itemprop="datePublished" content="2025-12-26T16:50:49.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å›¾å½¢å­¦çˆ±å¥½è€…_Wu"/> <meta itemprop="url" content="https://juejin.cn/user/1060359067408631"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ¯æ—¥ä¸€ä¸ªC++çŸ¥è¯†ç‚¹|è±å½¢ç»§æ‰¿
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1060359067408631/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å›¾å½¢å­¦çˆ±å¥½è€…_Wu
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-26T16:50:49.000Z" title="Fri Dec 26 2025 16:50:49 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ç»§æ‰¿æ˜¯C++é¢å‘å¯¹è±¡çš„æ ¸å¿ƒç‰¹æ€§ä¹‹ä¸€ï¼Œè¯´æ˜ç±»ä¸ç±»ä¹‹é—´çš„ç‰¹æ€§æ˜¯å¯ä»¥ç»§æ‰¿çš„ï¼Œè¿™å¤§å¤§æé«˜äº†ä»£ç çš„å¤ç”¨æ€§ï¼Œä¼˜åŒ–äº†ç¨‹åºç»“æ„ã€‚ä½†æ˜¯æ»¥ç”¨ç»§æ‰¿ä¹Ÿä¼šå¯¼è‡´è±å½¢ç»§æ‰¿çš„å¤šç»§æ‰¿é—®é¢˜ã€‚</p>
<h2 data-id="heading-0">è±å½¢ç»§æ‰¿</h2>
<p>ä»€ä¹ˆæ˜¯è±å½¢ç»§æ‰¿å‘¢ï¼ŸæŒ‡ä¸€ä¸ªæ´¾ç”Ÿç±»åŒæ—¶ç»§æ‰¿ä¸¤ä¸ªç›´æ¥åŸºç±»ï¼Œè¿™ä¸¤ä¸ªç›´æ¥åŸºç±»åˆç»§æ‰¿è‡ªåŒä¸€ä¸ªé—´æ¥åŸºç±»ï¼Œæœ€ç»ˆå½¢æˆ â€œè±å½¢â€ çš„ç»§æ‰¿ç»“æ„ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8495bcc3b8a2453fa1c24d6181d88ce3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Zu-5b2i5a2m54ix5aW96ICFX1d1:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767372649&amp;x-signature=2RZRhhbGEHlnwVHmoAjADU3qLLs%3D" alt="" loading="lazy"/></p>
<p>ä¸‹é¢ç”¨ä»£ç å±•ç¤ºè±å½¢ç»§æ‰¿çš„ç»“æ„ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// é¡¶å±‚åŸºç±»</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">A</span> {
<span class="hljs-keyword">public</span>:
    <span class="hljs-type">int</span> a;
    <span class="hljs-built_in">A</span>(<span class="hljs-type">int</span> val) : <span class="hljs-built_in">a</span>(val) {}
};

<span class="hljs-comment">// ä¸­é—´åŸºç±» Bï¼Œç»§æ‰¿ A</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">B</span> : <span class="hljs-keyword">public</span> A {
<span class="hljs-keyword">public</span>:
    <span class="hljs-built_in">B</span>(<span class="hljs-type">int</span> val) : <span class="hljs-built_in">A</span>(val) {}
};

<span class="hljs-comment">// ä¸­é—´åŸºç±» Cï¼Œç»§æ‰¿ A</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">C</span> : <span class="hljs-keyword">public</span> A {
<span class="hljs-keyword">public</span>:
    <span class="hljs-built_in">C</span>(<span class="hljs-type">int</span> val) : <span class="hljs-built_in">A</span>(val) {}
};

<span class="hljs-comment">// æœ€ç»ˆæ´¾ç”Ÿç±» Dï¼ŒåŒæ—¶ç»§æ‰¿ B å’Œ C</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">D</span> : <span class="hljs-keyword">public</span> B, <span class="hljs-keyword">public</span> C {
<span class="hljs-keyword">public</span>:
    <span class="hljs-comment">// é—®é¢˜1ï¼šåˆå§‹åŒ– A æ—¶ï¼ŒB å’Œ C éƒ½ä¼šåˆ†åˆ«åˆå§‹åŒ– Aï¼Œå¯¼è‡´ A è¢«åˆå§‹åŒ–ä¸¤æ¬¡</span>
    <span class="hljs-built_in">D</span>(<span class="hljs-type">int</span> val1, <span class="hljs-type">int</span> val2) : <span class="hljs-built_in">B</span>(val1), <span class="hljs-built_in">C</span>(val2) {}
};

<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-function">D <span class="hljs-title">d</span><span class="hljs-params">(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>)</span></span>;
    <span class="hljs-comment">// é—®é¢˜2ï¼šè®¿é—® a æ—¶ï¼Œç¼–è¯‘å™¨æ— æ³•ç¡®å®šæ˜¯ B::A::a è¿˜æ˜¯ C::A::aï¼Œç›´æ¥æŠ¥é”™</span>
    <span class="hljs-comment">// cout &lt;&lt; d.a &lt;&lt; endl; </span>
    <span class="hljs-comment">// å¿…é¡»æ˜¾å¼æŒ‡å®šï¼Œä½†è¿™è¿èƒŒäº†â€œå•ä¸€ç»§æ‰¿â€çš„é€»è¾‘ï¼Œä¸”æ•°æ®å†—ä½™ï¼ˆd ä¸­æœ‰ä¸¤ä¸ª aï¼‰</span>
    cout &lt;&lt; d.B::a &lt;&lt; endl; <span class="hljs-comment">// è¾“å‡º 1</span>
    cout &lt;&lt; d.C::a &lt;&lt; endl; <span class="hljs-comment">// è¾“å‡º 2</span>
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<p>ä¸Šè¿°é—®é¢˜ä¸­ï¼ŒAä¸ºé¡¶çº§åŸºç±»ï¼ŒBå’ŒCç»§æ‰¿Aï¼Œåˆå§‹åŒ– A æ—¶ï¼ŒB å’Œ C éƒ½ä¼šåˆ†åˆ«åˆå§‹åŒ– Aï¼Œå¯¼è‡´ A è¢«åˆå§‹åŒ–ä¸¤æ¬¡ï¼›è®¿é—® a æ—¶ï¼Œç¼–è¯‘å™¨æ— æ³•ç¡®å®šæ˜¯ B::A::a è¿˜æ˜¯ C::A::aï¼Œç›´æ¥æŠ¥é”™</p>
<p>æ³¨:â€œB::A::aâ€çš„å«ä¹‰æ˜¯æœ‰ä¸¤å±‚ï¼š</p>
<blockquote>
<ol>
<li>
<p>"A::a"è¡¨ç¤º â€œç±»Â <code>A</code>Â ä¸­çš„æˆå‘˜å˜é‡Â <code>a</code>â€</p>
</li>
<li>
<p>"B::"<code>B</code>Â æ˜¯Â <code>A</code>Â çš„æ´¾ç”Ÿç±»</p>
</li>
</ol>
</blockquote>
<h2 data-id="heading-1">æ ¸å¿ƒé—®é¢˜</h2>
<p>è±å½¢ç»§æ‰¿çš„æ ¸å¿ƒé—®é¢˜æ˜¯<strong>é—´æ¥åŸºç±»çš„æˆå‘˜ä¼šè¢«å¤šæ¬¡å¤åˆ¶</strong>ï¼Œå¯¼è‡´æ•°æ®å†—ä½™ã€äºŒä¹‰æ€§ï¼Œç”šè‡³é€»è¾‘é”™è¯¯ã€‚</p>
<p>æ•°æ®å†—ä½™è¡¨ç°åœ¨é—´æ¥åŸºç±»Â <code>A</code>Â çš„æˆå‘˜å› ä¸ºBå’ŒCçš„ç¼˜æ•…ä¼šåœ¨æœ€ç»ˆæ´¾ç”Ÿç±»Â <code>D</code>Â ä¸­å­˜åœ¨ä¸¤ä»½ï¼Œæµªè´¹å†…å­˜ï¼›</p>
<p>äºŒä¹‰æ€§åˆ™è¡¨ç°åœ¨ç›´æ¥è®¿é—®Â <code>D</code>Â å¯¹è±¡çš„Â <code>A</code>Â æˆå‘˜æ—¶ï¼Œç¼–è¯‘å™¨æ— æ³•åŒºåˆ†æ˜¯Â <code>B</code>Â ç»§æ‰¿çš„Â <code>A</code>Â è¿˜æ˜¯Â <code>C</code>Â ç»§æ‰¿çš„Â <code>A</code>ï¼Œå°±ä¼šé€ æˆç¼–è¯‘æŠ¥é”™ï¼›</p>
<p>é€»è¾‘é”™è¯¯ï¼šè‹¥Â <code>A</code>Â æœ‰è™šå‡½æ•°ï¼Œå¤šæ€è°ƒç”¨æ—¶å¯èƒ½å› é‡å¤çš„åŸºç±»æŒ‡é’ˆå¯¼è‡´è¡Œä¸ºå¼‚å¸¸ã€‚åŸå› æ˜¯éè™šç»§æ‰¿çš„è±å½¢ç»“æ„ä¸­ï¼Œæœ€ç»ˆæ´¾ç”Ÿç±»ä¼šåŒ…å«<strong>ä¸¤ä»½ A çš„è™šæŒ‡é’ˆï¼ˆvptrï¼‰</strong>ï¼Œå¤šæ€è°ƒç”¨æ—¶æ— æ³•ç¡®å®šè¯¥ç”¨å“ªä¸€ä¸ªï¼Œå¯¼è‡´è°ƒç”¨ç»“æœä¸ç¬¦åˆé¢„æœŸï¼Œç”šè‡³å´©æºƒã€‚</p>
<p><strong>è±å½¢ç»§æ‰¿çš„å†…å­˜å¸ƒå±€</strong>å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dcb3548d7aeb4dde870c176ff7a591cc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Zu-5b2i5a2m54ix5aW96ICFX1d1:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767372649&amp;x-signature=ZHjq2NZXFF8VDBgYNju4pnKnFiA%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-2">è§£å†³æ–¹æ¡ˆï¼šè™šç»§æ‰¿</h2>
<p>ç”±äºå¤šç»§æ‰¿ä¼šé€ æˆè±å½¢ç»§æ‰¿é—®é¢˜ï¼Œé‚£ä¹ˆC++ æä¾›<strong>è™šç»§æ‰¿</strong>æœºåˆ¶å°±æ˜¯è§£å†³è±å½¢ç»§æ‰¿çš„åŠæ³•ã€‚è™šç»§æ‰¿é€šè¿‡è®©ä¸­é—´åŸºç±»ï¼ˆ<code>B</code>ã€<code>C</code>ï¼‰å…±äº«åŒä¸€ä¸ªé—´æ¥åŸºç±»ï¼ˆ<code>A</code>ï¼‰çš„å®ä¾‹ï¼Œä»è€Œæ¶ˆé™¤æ•°æ®å†—ä½™å’ŒäºŒä¹‰æ€§</p>
<p>åœ¨ä¸­é—´åŸºç±»ç»§æ‰¿é¡¶å±‚åŸºç±»æ—¶ï¼Œæ·»åŠ Â <code>virtual</code>Â å…³é”®å­—ï¼Œç”¨ä»£ç ä¸¾ä¾‹å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// é¡¶å±‚åŸºç±»ï¼ˆä¸å˜ï¼‰</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">A</span> {
<span class="hljs-keyword">public</span>:
    <span class="hljs-type">int</span> a;
    <span class="hljs-built_in">A</span>(<span class="hljs-type">int</span> val) : <span class="hljs-built_in">a</span>(val) {}
};

<span class="hljs-comment">// ä¸­é—´åŸºç±» Bï¼šè™šç»§æ‰¿ A</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">B</span> : <span class="hljs-keyword">virtual</span> <span class="hljs-keyword">public</span> A {
<span class="hljs-keyword">public</span>:
    <span class="hljs-comment">// è™šç»§æ‰¿ä¸‹ï¼ŒB çš„æ„é€ å‡½æ•°ä¸å†ç›´æ¥åˆå§‹åŒ– Aï¼ˆA çš„åˆå§‹åŒ–ç”±æœ€ç»ˆæ´¾ç”Ÿç±»è´Ÿè´£ï¼‰</span>
    <span class="hljs-built_in">B</span>() {}
};

<span class="hljs-comment">// ä¸­é—´åŸºç±» Cï¼šè™šç»§æ‰¿ A</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">C</span> : <span class="hljs-keyword">virtual</span> <span class="hljs-keyword">public</span> A {
<span class="hljs-keyword">public</span>:
    <span class="hljs-built_in">C</span>() {}
};

<span class="hljs-comment">// æœ€ç»ˆæ´¾ç”Ÿç±» Dï¼šå¿…é¡»ç›´æ¥åˆå§‹åŒ–è™šåŸºç±» A</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">D</span> : <span class="hljs-keyword">public</span> B, <span class="hljs-keyword">public</span> C {
<span class="hljs-keyword">public</span>:
    <span class="hljs-comment">// æ ¸å¿ƒï¼šè™šåŸºç±» A çš„æ„é€ ç”±æœ€ç»ˆæ´¾ç”Ÿç±» D ç»Ÿä¸€åˆå§‹åŒ–ï¼Œé¿å…é‡å¤</span>
    <span class="hljs-built_in">D</span>(<span class="hljs-type">int</span> val) : <span class="hljs-built_in">A</span>(val), <span class="hljs-built_in">B</span>(), <span class="hljs-built_in">C</span>() {}
};

<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-function">D <span class="hljs-title">d</span><span class="hljs-params">(<span class="hljs-number">10</span>)</span></span>;
    <span class="hljs-comment">// æ— æ­§ä¹‰ï¼šd ä¸­åªæœ‰ä¸€ä»½ A::a</span>
    cout &lt;&lt; d.a &lt;&lt; endl; <span class="hljs-comment">// è¾“å‡º 10</span>
    cout &lt;&lt; d.B::a &lt;&lt; endl; <span class="hljs-comment">// ä»å¯æ˜¾å¼è®¿é—®ï¼Œç»“æœåŒä¸Š</span>
    cout &lt;&lt; d.C::a &lt;&lt; endl; <span class="hljs-comment">// ç»“æœåŒä¸Š</span>
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<p>é€šè¿‡ä¸Šè¿°ä»£ç ï¼Œæˆ‘ä»¬æ·±å…¥åˆ†æè™šç»§æ‰¿çš„åº•å±‚åŸç†ï¼Œè™šç»§æ‰¿æ˜¯é€šè¿‡<strong>è™šåŸºç±»è¡¨ï¼ˆvbtableï¼‰</strong>Â å’Œ<strong>è™šåŸºç±»æŒ‡é’ˆï¼ˆvbptrï¼‰</strong>Â å®ç°çš„ï¼š</p>
<blockquote>
<ol>
<li>
<p>ä¸­é—´åŸºç±»ï¼ˆ<code>B</code>ã€<code>C</code>ï¼‰çš„å¯¹è±¡ä¸­ä¼šå¢åŠ ä¸€ä¸ªÂ <code>vbptr</code>Â æŒ‡é’ˆï¼ŒæŒ‡å‘è™šåŸºç±»è¡¨ï¼›</p>
</li>
<li>
<p>è™šåŸºç±»è¡¨å­˜å‚¨å½“å‰å¯¹è±¡åˆ°è™šåŸºç±»ï¼ˆ<code>A</code>ï¼‰å®ä¾‹çš„åç§»é‡ï¼›</p>
</li>
<li>
<p>æœ€ç»ˆæ´¾ç”Ÿç±»ï¼ˆ<code>D</code>ï¼‰ä¸­åªä¿ç•™ä¸€ä»½Â <code>A</code>Â çš„å®ä¾‹ï¼Œ<code>B</code>Â å’ŒÂ <code>C</code>Â çš„Â <code>vbptr</code>Â éƒ½æŒ‡å‘è¿™åŒä¸€ä¸ªå®ä¾‹ã€‚</p>
</li>
</ol>
</blockquote>
<p>éè™šç»§æ‰¿çš„å†…å­˜å¸ƒå±€ç¤ºæ„å›¾å¦‚ä¸‹æ‰€ç¤ºï¼š
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a0b9b08c2ea549b5ac3e29c3cfc01274~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Zu-5b2i5a2m54ix5aW96ICFX1d1:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767372649&amp;x-signature=tG0BlQy6odTarabR7iqiP4zJjeM%3D" alt="" loading="lazy"/>
è™šç»§æ‰¿çš„å†…å­˜å¸ƒå±€ç¤ºæ„å›¾å¦‚ä¸‹æ‰€ç¤ºï¼š
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/32d9e265fe2947fa8a6be4af271aabc2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Zu-5b2i5a2m54ix5aW96ICFX1d1:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767372649&amp;x-signature=426suva1OvVfJj3OdVUE4HOCCMU%3D" alt=" " loading="lazy"/></p>
<p>è™½ç„¶è™šç»§æ‰¿å¯ä»¥è§£å†³è±å½¢ç»§æ‰¿çš„é—®é¢˜ï¼Œä½†åœ¨ç°å®å¼€å‘ä¸­ï¼Œä¸ºäº†å‡å°‘ä¸å¿…è¦çš„éº»çƒ¦ï¼Œå°½é‡é¿å…ä½¿ç”¨å¤šç»§æ‰¿ã€‚</p>
<h2 data-id="heading-3">æ¥å£å¤šç»§æ‰¿çš„å®‰å…¨åœºæ™¯</h2>
<p>è‹¥é¡¶å±‚åŸºç±»æ˜¯<strong>çº¯è™šç±»</strong>ï¼Œå³ä½¿æ˜¯è±å½¢ç»§æ‰¿ç»“æ„ï¼Œä¹Ÿæ— æ•°æ®å†—ä½™ï¼ˆå› ä¸ºçº¯è™šç±»æ— æˆå‘˜å˜é‡ï¼‰ï¼Œæ­¤æ—¶æ— éœ€è™šç»§æ‰¿ï¼Œç”¨ä»£ç ä¸¾ä¾‹å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// çº¯è™šæ¥å£ A</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">A</span> {
<span class="hljs-keyword">public</span>:
    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">func</span><span class="hljs-params">()</span> </span>= <span class="hljs-number">0</span>;
    <span class="hljs-keyword">virtual</span> ~<span class="hljs-built_in">A</span>() = <span class="hljs-keyword">default</span>;
};

<span class="hljs-keyword">class</span> <span class="hljs-title class_">B</span> : <span class="hljs-keyword">public</span> A {
<span class="hljs-keyword">public</span>:
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">func</span><span class="hljs-params">()</span> <span class="hljs-keyword">override</span> </span>{ cout &lt;&lt; <span class="hljs-string">"B::func"</span> &lt;&lt; endl; }
};

<span class="hljs-keyword">class</span> <span class="hljs-title class_">C</span> : <span class="hljs-keyword">public</span> A {
<span class="hljs-keyword">public</span>:
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">func</span><span class="hljs-params">()</span> <span class="hljs-keyword">override</span> </span>{ cout &lt;&lt; <span class="hljs-string">"C::func"</span> &lt;&lt; endl; }
};

<span class="hljs-keyword">class</span> <span class="hljs-title class_">D</span> : <span class="hljs-keyword">public</span> B, <span class="hljs-keyword">public</span> C {
<span class="hljs-keyword">public</span>:
    <span class="hljs-comment">// å¿…é¡»é‡å†™ funcï¼Œå¦åˆ™ D ä»æ˜¯æŠ½è±¡ç±»ï¼ˆè§£å†³äºŒä¹‰æ€§ï¼‰</span>
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">func</span><span class="hljs-params">()</span> <span class="hljs-keyword">override</span> </span>{ B::<span class="hljs-built_in">func</span>(); }
};

<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{
    D d;
    d.<span class="hljs-built_in">func</span>(); <span class="hljs-comment">// è¾“å‡º B::funcï¼Œæ— æ­§ä¹‰</span>
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<h2 data-id="heading-4">æ€»ç»“</h2>
<p>è±å½¢ç»§æ‰¿çš„æ ¸å¿ƒé—®é¢˜æ˜¯é—´æ¥åŸºç±»æˆå‘˜é‡å¤ï¼Œè™šç»§æ‰¿é€šè¿‡å…±äº«åŸºç±»å®ä¾‹è§£å†³è¯¥é—®é¢˜ï¼Œå®é™…å¼€å‘ä¸­åº”ä¼˜å…ˆé¿å…å¤šç»§æ‰¿ã€‚</p>
<p>ä»¥ä¸Šå°±æ˜¯æœ¬æ–‡çš„æ‰€æœ‰å†…å®¹ï¼Œå¦‚æœæœ¬æ–‡å¯¹ä½ æœ‰å¸®åŠ©çš„è¯æ¬¢è¿ç‚¹èµæ”¶è—å“¦~</p>
<p>æ„Ÿå…´è¶£çš„æœ‹å‹ä¹Ÿæ¬¢è¿å…³æ³¨å“Ÿ<del>æˆ‘å°†ä¼šæŒç»­è¾“å‡ºç¼–ç¨‹å¼€å‘çš„å†…å®¹</del></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Node.js ä¸ Haskell æ··åˆç½‘ç»œç¼–ç¨‹è¸©å‘è®°ï¼šTCP ç²˜åŒ…ä¸çŠ¶æ€ä¸ä¸€è‡´å¼•å‘çš„â€œæ­»é”â€]]></title>    <link>https://juejin.cn/post/7588034035286736911</link>    <guid>https://juejin.cn/post/7588034035286736911</guid>    <pubDate>2025-12-27T03:41:46.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588034035286736911" data-draft-id="7588004376867209251" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Node.js ä¸ Haskell æ··åˆç½‘ç»œç¼–ç¨‹è¸©å‘è®°ï¼šTCP ç²˜åŒ…ä¸çŠ¶æ€ä¸ä¸€è‡´å¼•å‘çš„â€œæ­»é”â€"/> <meta itemprop="keywords" content="JavaScript,Node.js"/> <meta itemprop="datePublished" content="2025-12-27T03:41:46.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Lupino"/> <meta itemprop="url" content="https://juejin.cn/user/3051900006579256"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Node.js ä¸ Haskell æ··åˆç½‘ç»œç¼–ç¨‹è¸©å‘è®°ï¼šTCP ç²˜åŒ…ä¸çŠ¶æ€ä¸ä¸€è‡´å¼•å‘çš„â€œæ­»é”â€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3051900006579256/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Lupino
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-27T03:41:46.000Z" title="Sat Dec 27 2025 03:41:46 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">1. èƒŒæ™¯ä¸ç›®æ ‡</h2>
<p>æˆ‘ä»¬éœ€è¦åœ¨ Node.js ä¸­å®ç°ä¸€ä¸ªå®šåˆ¶åŒ–çš„ TCP å®¢æˆ·ç«¯ (<code>RSATransport</code>)ï¼Œç”¨äºè¿æ¥ç°æœ‰çš„ Haskell æœåŠ¡ç«¯ã€‚è¯¥åè®®åŒ…å«è‡ªå®šä¹‰çš„æ¡æ‰‹æµç¨‹å’Œä¸‰ç§æ•°æ®ä¼ è¾“æ¨¡å¼ï¼š</p>
<ul>
<li><strong>Plain (0)</strong> : æ¡æ‰‹åæ˜æ–‡ç›´è¿ã€‚</li>
<li><strong>RSA (1)</strong> : å…¨ç¨‹ä½¿ç”¨ RSA-OAEP åŠ å¯†ã€‚</li>
<li><strong>AES (2)</strong> : æ¡æ‰‹åå•†å‡º Session Key åä½¿ç”¨ AES-CTR åŠ å¯†ã€‚</li>
</ul>
<p><strong>Haskell æœåŠ¡ç«¯é€»è¾‘ (<code>RSA.hs</code>)</strong> ï¼š æœåŠ¡ç«¯åœ¨æ¡æ‰‹æ—¶ä½¿ç”¨å¸¦ç¼“å†²çš„è¯»å–æ–¹å¼ (<code>recvDataOaep</code>)ï¼Œä½†åœ¨åˆ‡æ¢åˆ° <strong>Plain</strong> æ¨¡å¼åï¼Œç›´æ¥æ“ä½œåº•å±‚ Socket (<code>recvData tp</code>)ã€‚</p>
<h2 data-id="heading-1">2. é—®é¢˜ç°è±¡</h2>
<p>å¼€å‘è¿‡ç¨‹ä¸­å‡ºç°äº†ä¸€ä¸ªå¥‡æ€ªçš„ç°è±¡ï¼š</p>
<ol>
<li><strong>AES æ¨¡å¼æ­£å¸¸</strong>ï¼šæ¡æ‰‹ã€å¯†é’¥äº¤æ¢ã€æ•°æ®ä¼ è¾“å‡æµç•…ã€‚</li>
<li><strong>RSA æ¨¡å¼æ­£å¸¸</strong>ã€‚</li>
<li><strong>Plain æ¨¡å¼â€œå¡æ­»â€</strong> ï¼šæ¡æ‰‹çœ‹ä¼¼å®Œæˆï¼Œä½†éšåå‘é€çš„ç¬¬ä¸€æ¡æ•°æ®æœåŠ¡ç«¯æ— å“åº”ï¼Œå®¢æˆ·ç«¯ä¹Ÿæ”¶ä¸åˆ°å›åŒ…ã€‚</li>
<li><strong>â€œè–›å®šè°”çš„ Bugâ€</strong> ï¼šå¦‚æœåœ¨ä»£ç ä¸­åŠ å…¥ <code>console.log</code>ï¼Œæœ‰æ—¶èƒ½è·‘é€šä¸€ç‚¹ç‚¹ï¼Œä½†éšåä¾ç„¶å¡ä½ã€‚</li>
</ol>
<h2 data-id="heading-2">3. æ ¹å› æ·±åº¦åˆ†æ</h2>
<p>ç»è¿‡æ’æŸ¥ï¼Œè¿™æ˜¯ä¸€ä¸ªå…¸å‹çš„ <strong>TCP ç²˜åŒ…</strong> é‡ä¸Š <strong>åº”ç”¨å±‚çŠ¶æ€ç¼“å†²åŒºè®¾è®¡ç¼ºé™·</strong> å¯¼è‡´çš„é€»è¾‘æ­»é”ã€‚</p>
<h3 data-id="heading-3">3.1 Haskell æœåŠ¡ç«¯çš„â€œç¼“å†²åŒºæ—è·¯â€ Bug</h3>
<p>åœ¨ <code>RSA.hs</code> ä¸­ï¼Œæ¥æ”¶é€»è¾‘æ˜¯è¿™æ ·çš„ï¼š</p>
<p>Haskell</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- Haskell ä¼ªä»£ç </span>
recvData RSATP {..} n <span class="hljs-operator">=</span> <span class="hljs-keyword">case</span> rsaMode <span class="hljs-keyword">of</span>
  Plain <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span> recvData tp n           <span class="hljs-comment">-- [å…³é”®ç‚¹] ç›´æ¥è¯»åº•å±‚ Socketï¼Œå¿½ç•¥ç¼“å†²åŒº</span>
  RSA   <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span> recvDataOaep readBuffer ... <span class="hljs-comment">-- ä»ç¼“å†²åŒº readBuffer è¯»å–</span>
  AES   <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span> recvDataAes readBuffer ...  <span class="hljs-comment">-- ä»ç¼“å†²åŒº readBuffer è¯»å–</span>
</code></pre>
<p>åœ¨æ¡æ‰‹é˜¶æ®µï¼ˆåå•† Modeï¼‰ï¼ŒæœåŠ¡ç«¯è°ƒç”¨çš„æ˜¯ <code>recvDataOaep</code>ã€‚è¿™ä¸ªå‡½æ•°ä¸ºäº†è§£å¯†ï¼Œå¯èƒ½ä¼šä» TCP Socket é¢„è¯»å–å¤šäºæ‰€éœ€çš„å­—èŠ‚ï¼ˆä¾‹å¦‚è¯»å–äº† 4096 å­—èŠ‚ï¼Œä½† Mode åŒ…åªæœ‰ 256 å­—èŠ‚ï¼‰ã€‚<strong>å¤šä½™çš„æ•°æ®è¢«ç•™åœ¨äº† Haskell çš„ <code>readBuffer</code> (TVar) ä¸­ã€‚</strong></p>
<h3 data-id="heading-4">3.2 Node.js çš„â€œè¿‡äºé«˜æ•ˆâ€</h3>
<p>åœ¨ Node.js å®¢æˆ·ç«¯ï¼Œå½“æ¡æ‰‹å®Œæˆï¼ˆå‘é€äº† Mode Byteï¼‰åï¼Œæˆ‘ä»¬ç«‹å³æ¸…ç©ºäº†ç§¯å‹çš„å†™å…¥é˜Ÿåˆ— (<code>_writeBuffer</code>) å¹¶å‘é€ä¸šåŠ¡æ•°æ®ã€‚</p>
<p>ç”±äº TCP çš„ <strong>Nagle ç®—æ³•</strong> å’Œæ“ä½œç³»ç»Ÿçš„ç¼“å†²æœºåˆ¶ï¼Œå‘é€çš„ <strong>[Mode åŒ…]</strong> å’Œåç»­çš„ <strong>[ä¸šåŠ¡æ•°æ®åŒ…]</strong> æå¤§æ¦‚ç‡è¢«åˆå¹¶æˆäº†ä¸€ä¸ª TCP æ®µå‘é€åˆ°äº†æœåŠ¡ç«¯ã€‚</p>
<h3 data-id="heading-5">3.3 è‡´å‘½çš„â€œæ“¦è‚©è€Œè¿‡â€</h3>
<p>äºæ˜¯å‘ç”Ÿäº†ä»¥ä¸‹æ—¶åºï¼š</p>
<ol>
<li><strong>Client</strong>: å‘é€ <code>[Mode=Plain][Data="Hello"]</code>ï¼ˆåœ¨åŒä¸€ä¸ª TCP åŒ…ä¸­ï¼‰ã€‚</li>
<li><strong>Server</strong>: è°ƒç”¨ <code>recvDataOaep</code> è¯»å– Modeã€‚å®ƒæŠŠæ•´ä¸ª TCP åŒ…è¯»å…¥å†…å­˜ï¼Œè§£æå‡º <code>Mode=Plain</code>ï¼Œå‰©ä¸‹çš„ <code>Data="Hello"</code> ç•™åœ¨äº† <code>readBuffer</code> ä¸­ã€‚</li>
<li><strong>Server</strong>: åˆ‡æ¢çŠ¶æ€åˆ° <code>Plain</code>ã€‚</li>
<li><strong>Server</strong>: è°ƒç”¨ <code>recvData tp</code> ç­‰å¾…æ–°æ•°æ®ã€‚<strong>æ³¨æ„ï¼šå®ƒè·³è¿‡äº† <code>readBuffer</code>ï¼Œç›´æ¥å»é—®åº•å±‚ Socket è¦æ•°æ®ï¼</strong></li>
<li><strong>Result</strong>: Socket ç¼“å†²åŒºæ˜¯ç©ºçš„ï¼ˆæ•°æ®å·²ç»è¢«è¯»åˆ°åº”ç”¨å±‚ç¼“å†²åŒºäº†ï¼‰ï¼ŒæœåŠ¡ç«¯æŒ‚èµ·ç­‰å¾…ã€‚å®¢æˆ·ç«¯ä»¥ä¸ºæœåŠ¡ç«¯æ”¶åˆ°äº†ï¼Œä¹Ÿåœ¨ç­‰å¾…å“åº”ã€‚<strong>æ­»é”å½¢æˆã€‚</strong></li>
</ol>
<h2 data-id="heading-6">4. è§£å†³æ–¹æ¡ˆ</h2>
<p>è¦è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå¿…é¡»åœ¨å®¢æˆ·ç«¯æ‰“ç ´â€œç²˜åŒ…â€ï¼Œç¡®ä¿æœåŠ¡ç«¯åœ¨å¤„ç†å®Œ Mode åˆ‡æ¢åï¼ŒSocket ç¼“å†²åŒºé‡Œæ‰æœ‰æ–°æ•°æ®åˆ°è¾¾ã€‚</p>
<h3 data-id="heading-7">4.1 ç¦ç”¨ Nagle ç®—æ³•</h3>
<p>é¦–å…ˆï¼Œç¦æ­¢ TCP å»¶è¿Ÿå‘é€ï¼Œç¡®ä¿å°åŒ…ï¼ˆå¦‚æ¡æ‰‹åŒ…ï¼‰èƒ½å°½å¿«å‘å‡ºå»ã€‚</p>
<p>JavaScript</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">this</span>._socket = net.connect(options);
<span class="hljs-keyword">this</span>._socket.setNoDelay(<span class="hljs-literal">true</span>); <span class="hljs-comment">// ç¦ç”¨ Nagle</span>
</code></pre>
<h3 data-id="heading-8">4.2 ä¸¥æ ¼çš„å†™æ“ä½œæµæ§</h3>
<p>ä¸èƒ½ä¾èµ– Node.js çš„è‡ªåŠ¨ç¼“å†²ï¼Œå¿…é¡»ç¡®ä¿ä¸Šä¸€ä¸ªåŒ…çœŸæ­£å†™å…¥å†…æ ¸ï¼ˆdrainï¼‰åï¼Œå†å‘ä¸‹ä¸€ä¸ªåŒ…ã€‚</p>
<p>JavaScript</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä½¿ç”¨å›è°ƒé“¾ç¡®ä¿é¡ºåº</span>
<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">_sendOAEP</span>(modePayload, <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// Mode åŒ…å†™å…¥å®Œæˆåçš„å›è°ƒ</span>
    self.<span class="hljs-title function_">_finishHandshake</span>();
});
</code></pre>
<h3 data-id="heading-9">4.3 é’ˆå¯¹ Plain æ¨¡å¼çš„â€œé­”æ³•å»¶æ—¶â€</h3>
<p>è¿™æ˜¯æœ€å…³é”®çš„ä¸€æ­¥ã€‚ç”±äºæˆ‘ä»¬æ— æ³•ä¿®æ”¹ Haskell æœåŠ¡ç«¯ä»£ç ï¼Œå¿…é¡»åœ¨å®¢æˆ·ç«¯è¿›è¡Œè§„é¿ã€‚åœ¨å‘é€ Mode åŒ…å’Œå‘é€ç¬¬ä¸€æ¡ Plain æ•°æ®ä¹‹é—´ï¼Œå¼ºåˆ¶æ’å…¥ä¸€ä¸ªå¾®å°çš„å»¶æ—¶ï¼ˆ50msï¼‰ã€‚</p>
<p>è¿™ç»™äº†æœåŠ¡ç«¯è¶³å¤Ÿçš„æ—¶é—´ï¼š</p>
<ol>
<li>å¤„ç† Mode åŒ…ã€‚</li>
<li>æ¸…ç©ºå…¶å†…éƒ¨æ¥æ”¶é€»è¾‘ã€‚</li>
<li>åˆ‡æ¢åˆ° Socket ç›´æ¥è¯»å–æ¨¡å¼ã€‚</li>
</ol>
<p>JavaScript</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title class_">RSATransport</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">_finishHandshake</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">_state</span> = <span class="hljs-string">'ESTABLISHED'</span>;
  <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">emit</span>(<span class="hljs-string">'connect'</span>);

  <span class="hljs-comment">// åˆ·æ–°ç§¯å‹çš„æ•°æ®</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">_writeBuffer</span>.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span>) {
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">flush</span> = (<span class="hljs-params"/>) =&gt; {
      <span class="hljs-comment">// ... å‘é€ç§¯å‹æ•°æ® ...</span>
    };

    <span class="hljs-comment">// é’ˆå¯¹ Plain æ¨¡å¼çš„ Hackï¼š</span>
    <span class="hljs-comment">// å¼ºåˆ¶å»¶æ—¶ï¼Œé˜²æ­¢ Mode åŒ…å’Œåç»­æ•°æ®ç²˜åŒ…ï¼Œ</span>
    <span class="hljs-comment">// é¿å…æœåŠ¡ç«¯è¯»å– Mode æ—¶è¯¯è¯»äº†åç»­æ•°æ®åˆ° Buffer ä¸­å´åœ¨ Plain æ¨¡å¼ä¸‹æ— æ³•è®¿é—®ã€‚</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">_mode</span> === <span class="hljs-variable constant_">MODE_PLAIN</span>) {
      <span class="hljs-built_in">setTimeout</span>(flush, <span class="hljs-number">50</span>); 
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-title function_">flush</span>();
    }
  }
};
</code></pre>
<h3 data-id="heading-10">4.4 å®Œå–„èƒŒå‹ (Backpressure) å¤„ç†</h3>
<p>é™¤äº†ä¸Šè¿°æ ¸å¿ƒ Bugï¼Œæˆ‘ä»¬è¿˜ä¿®å¤äº† <code>write</code> æ–¹æ³•çš„è¿”å›å€¼é—®é¢˜ã€‚å½“å¤„äº Plain æ¨¡å¼ï¼ˆé«˜ååï¼‰æ—¶ï¼Œå¿…é¡»æ­£ç¡®å¤„ç† TCP çš„èƒŒå‹ï¼Œå¦åˆ™ä¼šå¯¼è‡´å†…å­˜é£™å‡æˆ–æ•°æ®ä¸¢å¤±ã€‚</p>
<p>JavaScript</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// è½¬å‘åº•å±‚çš„ drain äº‹ä»¶</span>
<span class="hljs-keyword">this</span>._socket.on(<span class="hljs-string">'drain'</span>, () =&gt; <span class="hljs-keyword">this</span>.emit(<span class="hljs-string">'drain'</span>));

<span class="hljs-comment">// æ­£ç¡®è¿”å› boolean</span>
Transport.prototype.write = function(<span class="hljs-keyword">data</span>, encoding, callback) {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._socket.write(<span class="hljs-keyword">data</span>, encoding, callback); 
};
</code></pre>
<h2 data-id="heading-11">5. æ€»ç»“</h2>
<p>è¿™æ¬¡æ’æŸ¥å†æ¬¡éªŒè¯äº†ç½‘ç»œç¼–ç¨‹ä¸­çš„ä¸€æ¡é“å¾‹ï¼š<strong>TCP æ˜¯æµåè®®ï¼Œä¸æ˜¯åŒ…åè®®</strong>ã€‚</p>
<p>å½“å®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯ç”±ä¸åŒè¯­è¨€ç¼–å†™ï¼Œä¸”æœåŠ¡ç«¯å­˜åœ¨æ··åˆè¯»å–ç­–ç•¥ï¼ˆBufferè¯»å– vs Socketç›´è¯»ï¼‰æ—¶ï¼Œåº”ç”¨å±‚å¿…é¡»æå…¶å°å¿ƒåœ°å¤„ç†æ•°æ®è¾¹ç•Œã€‚</p>
<ul>
<li><strong>æ•™è®­ 1</strong>: ä¸è¦å‡è®¾ <code>write</code> ä¸¤æ¬¡å°±ä¼šäº§ç”Ÿä¸¤ä¸ª TCP åŒ…ã€‚</li>
<li><strong>æ•™è®­ 2</strong>: åœ¨å¤„ç†åè®®çŠ¶æ€åˆ‡æ¢ï¼ˆå¦‚æ¡æ‰‹ -&gt; ä¼ è¾“ï¼‰æ—¶ï¼ŒçŠ¶æ€æœºçš„åŒæ­¥è‡³å…³é‡è¦ã€‚</li>
<li><strong>æ•™è®­ 3</strong>: é‡åˆ°â€œå¡æ­»â€ä¸”æ—¥å¿—å½±å“è¡Œä¸ºæ—¶ï¼Œä¼˜å…ˆæ€€ç–‘ç¼“å†²æœºåˆ¶å’Œç«æ€æ¡ä»¶ã€‚</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ”¯ä»˜é…ç½®æ—¶å¥½æ—¶åï¼Ÿå¼‚æ­¥æ–¹æ³•é‡Œçš„å¯¹è±¡å¼•ç”¨å‘]]></title>    <link>https://juejin.cn/post/7588010346071179274</link>    <guid>https://juejin.cn/post/7588010346071179274</guid>    <pubDate>2025-12-27T03:53:57.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588010346071179274" data-draft-id="7588010346071162890" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ”¯ä»˜é…ç½®æ—¶å¥½æ—¶åï¼Ÿå¼‚æ­¥æ–¹æ³•é‡Œçš„å¯¹è±¡å¼•ç”¨å‘"/> <meta itemprop="keywords" content="åç«¯,é¢è¯•,Java"/> <meta itemprop="datePublished" content="2025-12-27T03:53:57.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="9å·è¾¾äºº"/> <meta itemprop="url" content="https://juejin.cn/user/2450136052270077"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ”¯ä»˜é…ç½®æ—¶å¥½æ—¶åï¼Ÿå¼‚æ­¥æ–¹æ³•é‡Œçš„å¯¹è±¡å¼•ç”¨å‘
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2450136052270077/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    9å·è¾¾äºº
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-27T03:53:57.000Z" title="Sat Dec 27 2025 03:53:57 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä¸Šå‘¨æ¥åˆ°å®¢æœåé¦ˆã€‚</p>
<p>æœ‰äº›å•†æˆ·å¼€é€šä¹‹åï¼Œå¾®ä¿¡æ”¯ä»˜åŠŸèƒ½ä¸èƒ½ç”¨ï¼Œæœ‰äº›åˆå¯ä»¥ã€‚ä¸èƒ½ç”¨çš„å•†æˆ·å°±éœ€è¦å®¢æœæ‰‹åŠ¨ä»‹å…¥ï¼Œé‡æ–°é…ç½®æ”¯ä»˜å‚æ•°æ‰æ¢å¤æ­£å¸¸ã€‚</p>
<p>è¿™ä¸ªé—®é¢˜å°±å¾ˆè¯¡å¼‚ï¼Œ<strong>æ—¶å¥½æ—¶å</strong>ã€‚æœ‰æ—¶å€™æ­£å¸¸ï¼Œæœ‰æ—¶å€™å°±ä¸è¡Œã€‚</p>
<p>ä½†æ˜¯åå°æ—¥å¿—æ˜¾ç¤ºéƒ½æ˜¯é…ç½®æˆåŠŸã€‚ä»£ç æ‰§è¡Œå®Œäº†ï¼Œæ²¡æœ‰ä»»ä½•æŠ¥é”™ã€‚</p>
<h2 data-id="heading-0">è¯¡å¼‚çš„ç°è±¡</h2>
<p>å¼€å§‹æ’æŸ¥æ—¥å¿—ã€‚å‘ç°äº†å‡ ä¸ªå¾ˆå¥‡æ€ªçš„ç‚¹ï¼š</p>
<ol>
<li><strong>ä¸šåŠ¡æ—¥å¿—æ˜¾ç¤ºæˆåŠŸ</strong>ï¼Œæ²¡æœ‰ä»»ä½•å¼‚å¸¸</li>
<li><strong>è°ƒç”¨æ—¥å¿—æ˜¾ç¤ºä¸¤æ¬¡é…ç½®ç”¨çš„appidä¸€æ ·</strong></li>
<li><strong>ä»£ç æ˜æ˜å†™çš„æ˜¯ä¸¤ä¸ªä¸åŒçš„appid</strong></li>
<li><strong>é…ç½®æ–‡ä»¶ä¹Ÿæ²¡é—®é¢˜</strong>ï¼Œä¸¤ä¸ªappidéƒ½é…å¯¹äº†</li>
</ol>
<p>ä»£ç å†™çš„æ˜æ˜æ˜¯Aå’ŒBä¸¤ä¸ªappidï¼Œä¸ºå•¥æ—¥å¿—é‡Œéƒ½å˜æˆBäº†ï¼Ÿ</p>
<p>çœ‹äº†å¥½å‡ éæ—¥å¿—ï¼Œç¡®å®šæ²¡çœ‹é”™ã€‚ä¸¤æ¬¡è°ƒç”¨ä¼ å…¥çš„appidç¡®å®ä¸€æ¨¡ä¸€æ ·ã€‚</p>
<p>é‚£å°±åªèƒ½çœ‹çœ‹ä»£ç äº†ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">openMemberV2Service.wxConfig(openMemberV2DTO)<span class="hljs-comment">;</span>
openMemberV2DTO.setSupAppId(sysConfig.getWxHuikeOfficialAccountAppid())<span class="hljs-comment">;</span>
openMemberV2DTO.setAccountType("00")<span class="hljs-comment">;</span>
openMemberV2Service.wxConfig(openMemberV2DTO)<span class="hljs-comment">;</span>
LogUtil.info(log,Â "editGrantÂ &gt;&gt;Â å¼€é€šæˆåŠŸÂ &gt;&gt;Â <span class="hljs-attr">param</span>Â =Â {}<span class="hljs-string">",Â param);
</span></code></pre>
<p>ä¹ä¸€çœ‹ï¼Œå®Œå…¨æ²¡é—®é¢˜ã€‚</p>
<p>ç¬¬ä¸€æ¬¡è°ƒç”¨ç”¨çš„æ˜¯<code>openMemberV2DTO</code>åŸå§‹çš„appidã€‚ç¬¬äºŒæ¬¡è°ƒç”¨ä¹‹å‰ï¼Œæ˜æ˜ä¿®æ”¹äº†<code>supAppId</code>å’Œ<code>accountType</code>ã€‚</p>
<p>ä»£ç é€»è¾‘ä¹Ÿå¾ˆæ¸…æ™°ï¼Œä¸ºå•¥ä¼šå‡ºé—®é¢˜ï¼Ÿ</p>
<p>ä¼šä¸ä¼šæ˜¯é…ç½®æ–‡ä»¶æŠŠappidé…é”™äº†ï¼Ÿ</p>
<p>æ£€æŸ¥äº†é…ç½®æ–‡ä»¶ï¼š</p>
<p>é…ç½®ä¹Ÿæ²¡é—®é¢˜ã€‚ä¸¤ä¸ªappidéƒ½å¯¹ã€‚</p>
<p>æ—¢ç„¶ä»£ç é€»è¾‘æ²¡é—®é¢˜ï¼Œé…ç½®ä¹Ÿæ²¡é—®é¢˜ï¼Œé‚£é—®é¢˜å¤§æ¦‚ç‡å°±æ˜¯wxConfigè¿™ä¸ªæ–¹æ³•äº†</p>
<p>ç‚¹å¼€<code>wxConfig</code>æ–¹æ³•ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">public</span>Â <span class="hljs-built_in">void</span>Â <span class="hljs-title function_">wxConfig</span>(<span class="hljs-params">OpenMemberV2DTOÂ dto</span>)Â {
Â Â Â Â asyncTaskExecutor.<span class="hljs-title function_">execute</span>(()Â -&gt;Â {
Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â è·å–å‚æ•°</span>
Â Â Â Â Â Â Â Â <span class="hljs-title class_">String</span>Â subAppIdÂ =Â dto.<span class="hljs-title function_">getSupAppId</span>();
Â Â Â Â Â Â Â Â <span class="hljs-title class_">String</span>Â accountTypeÂ =Â dto.<span class="hljs-title function_">getAccountType</span>();

Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â è°ƒç”¨å¾®ä¿¡APIé…ç½®</span>
Â Â Â Â Â Â Â Â <span class="hljs-title class_">JSON</span><span class="hljs-built_in">Object</span>Â bodyÂ =Â <span class="hljs-keyword">new</span>Â <span class="hljs-title class_">JSON</span><span class="hljs-built_in">Object</span>();
Â Â Â Â Â Â Â Â body.<span class="hljs-title function_">put</span>(<span class="hljs-string">"sub_appid"</span>,Â subAppId);
Â Â Â Â Â Â Â Â body.<span class="hljs-title function_">put</span>(<span class="hljs-string">"account_type"</span>,Â accountType);

Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â è°ƒç”¨å¹³å°æ¥å£...</span>
Â Â Â Â Â Â Â Â platformManager.<span class="hljs-title function_">call</span>(callParam);
Â Â Â Â });
}
</code></pre>
<p>çœ‹åˆ°<code>asyncTaskExecutor.execute</code>ï¼Œç›¸ä¿¡å¤§å®¶å°±æ˜ç™½äº†ã€‚</p>
<p><strong>è¿™æ˜¯ä¸ªå¼‚æ­¥æ–¹æ³•ï¼</strong></p>
<p>é‚£é—®é¢˜é“¾è·¯å°±æ¸…æ¥šäº†ï¼š</p>
<ol>
<li>ä¸»çº¿ç¨‹è°ƒç”¨<code>wxConfig(openMemberV2DTO)</code> â†’ ä»»åŠ¡æäº¤åˆ°çº¿ç¨‹æ± ï¼Œ<strong>è¿˜æ²¡æ‰§è¡Œ</strong></li>
<li>ä¸»çº¿ç¨‹ç»§ç»­æ‰§è¡Œï¼Œä¿®æ”¹<code>openMemberV2DTO.setSupAppId(...)</code></li>
<li>ä¸»çº¿ç¨‹å†æ¬¡è°ƒç”¨<code>wxConfig(openMemberV2DTO)</code> â†’ åˆæäº¤ä¸€ä¸ªä»»åŠ¡åˆ°çº¿ç¨‹æ± </li>
<li>çº¿ç¨‹æ± å¼€å§‹æ‰§è¡Œç¬¬ä¸€ä¸ªä»»åŠ¡ â†’ è¯»å–<code>dto.getSupAppId()</code>ï¼Œå‘ç°å·²ç»æ˜¯ä¿®æ”¹åçš„å€¼äº†</li>
<li>çº¿ç¨‹æ± æ‰§è¡Œç¬¬äºŒä¸ªä»»åŠ¡ â†’ è¿˜æ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼Œappidå½“ç„¶ä¸€æ ·</li>
</ol>
<p><strong>ä¸¤æ¬¡ä¼ çš„æ˜¯åŒä¸€ä¸ªå¯¹è±¡å¼•ç”¨ï¼Œç¬¬äºŒæ¬¡ä¿®æ”¹æ±¡æŸ“äº†ç¬¬ä¸€æ¬¡çš„æ•°æ®ã€‚</strong></p>
<h2 data-id="heading-1">é—®é¢˜æœ¬è´¨</h2>
<p>è¿™ä¸ªé—®é¢˜çš„æœ¬è´¨æ˜¯ï¼š<strong>å¯¹è±¡å¼•ç”¨ + å¼‚æ­¥æ–¹æ³• â‰ˆ æ•°æ®æ±¡æŸ“</strong></p>
<h3 data-id="heading-2">Javaå¯¹è±¡å¼•ç”¨æœºåˆ¶</h3>
<p>Javaæ–¹æ³•ä¼ å‚ï¼Œä¼ çš„æ˜¯å¼•ç”¨ï¼Œä¸æ˜¯å‰¯æœ¬ã€‚</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">//Â è¿™ä¸¤æ¬¡è°ƒç”¨ï¼Œä¼ çš„æ˜¯åŒä¸€ä¸ªå¯¹è±¡çš„å¼•ç”¨</span>
<span class="hljs-built_in">wxConfig</span>(openMemberV2DTO);Â Â <span class="hljs-comment">//Â ä¼ çš„æ˜¯å¼•ç”¨</span>
openMemberV2DTO<span class="hljs-selector-class">.setSupAppId</span>("new_appid");Â Â <span class="hljs-comment">//Â ä¿®æ”¹å¯¹è±¡</span>
<span class="hljs-built_in">wxConfig</span>(openMemberV2DTO);Â Â <span class="hljs-comment">//Â è¿˜æ˜¯åŒä¸€ä¸ªå¼•ç”¨</span>
</code></pre>
<p>å¦‚æœ<code>wxConfig</code>æ˜¯åŒæ­¥æ–¹æ³•ï¼Œæ²¡é—®é¢˜ã€‚å› ä¸ºç¬¬ä¸€æ¬¡è°ƒç”¨ä¼šç«‹å³æ‰§è¡Œå®Œï¼Œç”¨çš„æ˜¯ä¿®æ”¹å‰çš„å€¼ã€‚</p>
<p>ä½†<code>wxConfig</code>æ˜¯å¼‚æ­¥æ–¹æ³•ã€‚</p>
<h3 data-id="heading-3">å¼‚æ­¥æ–¹æ³•çš„æ‰§è¡Œæ—¶æœº</h3>
<p>å¼‚æ­¥æ–¹æ³•ä¸ä¼šç«‹å³æ‰§è¡Œï¼Œè€Œæ˜¯æäº¤åˆ°çº¿ç¨‹æ± ï¼Œç­‰çº¿ç¨‹æ± æœ‰ç©ºé—²çº¿ç¨‹æ—¶æ‰æ‰§è¡Œã€‚</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">//Â ä¸»çº¿ç¨‹æ—¶é—´çº¿</span>
t1:Â <span class="hljs-built_in">wxConfig</span>(dto)Â Â â†’Â æäº¤ä»»åŠ¡Aåˆ°çº¿ç¨‹æ± 
t2:Â dto.<span class="hljs-built_in">setSupAppId</span>(<span class="hljs-string">"new"</span>)Â Â â†’Â ä¿®æ”¹å¯¹è±¡
t3:Â <span class="hljs-built_in">wxConfig</span>(dto)Â Â â†’Â æäº¤ä»»åŠ¡Båˆ°çº¿ç¨‹æ± 
t4:Â ä¸»çº¿ç¨‹ç»“æŸ

//Â çº¿ç¨‹æ± æ—¶é—´çº¿
t5:Â æ‰§è¡Œä»»åŠ¡AÂ â†’Â è¯»å–dto.<span class="hljs-built_in">getSupAppId</span>()Â Â //Â å·²ç»æ˜¯<span class="hljs-string">"new"</span>äº†ï¼
t6:Â æ‰§è¡Œä»»åŠ¡BÂ â†’Â è¯»å–dto.<span class="hljs-built_in">getSupAppId</span>()Â Â //Â è¿˜æ˜¯<span class="hljs-string">"new"</span>
</code></pre>
<h3 data-id="heading-4">å®Œæ•´çš„é—®é¢˜é“¾è·¯</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant Main as ä¸»çº¿ç¨‹
    participant Pool as çº¿ç¨‹æ± 
    participant Obj as openMemberV2DTOå¯¹è±¡

    Note over Main: t1æ—¶åˆ»
    Main-&gt;&gt;Pool: wxConfig(openMemberV2DTO)
    Note over Pool: ä»»åŠ¡Aè¿›å…¥é˜Ÿåˆ—&lt;br/&gt;ç­‰å¾…æ‰§è¡Œ

    Note over Main: t2æ—¶åˆ»
    Main-&gt;&gt;Obj: setSupAppId(&amp;#34;wx_huike...&amp;#34;)
    Main-&gt;&gt;Obj: setAccountType(&amp;#34;00&amp;#34;)
    Note over Obj: å¯¹è±¡çŠ¶æ€è¢«ä¿®æ”¹

    Note over Main: t3æ—¶åˆ»
    Main-&gt;&gt;Pool: wxConfig(openMemberV2DTO)
    Note over Pool: ä»»åŠ¡Bè¿›å…¥é˜Ÿåˆ—&lt;br/&gt;ç­‰å¾…æ‰§è¡Œ

    Note over Main: t4æ—¶åˆ»
    Note over Main: ä¸»çº¿ç¨‹ç»“æŸ&lt;br/&gt;æ‰“å°&amp;#34;å¼€é€šæˆåŠŸ&amp;#34;

    Note over Pool: t5æ—¶åˆ»
    Pool-&gt;&gt;Obj: æ‰§è¡Œä»»åŠ¡A&lt;br/&gt;è¯»å–getSupAppId()
    Note over Obj: è¿”å›ï¼š&amp;#34;wx_huike...&amp;#34;&lt;br/&gt;å·²ç»æ˜¯ä¿®æ”¹åçš„å€¼ï¼

    Note over Pool: t6æ—¶åˆ»
    Pool-&gt;&gt;Obj: æ‰§è¡Œä»»åŠ¡B&lt;br/&gt;è¯»å–getSupAppId()
    Note over Obj: è¿”å›ï¼š&amp;#34;wx_huike...&amp;#34;&lt;br/&gt;è¿˜æ˜¯åŒä¸€ä¸ªå€¼ï¼
</code></pre>
<p><strong>ä¸¤ä¸ªä»»åŠ¡è¯»å–çš„éƒ½æ˜¯ä¿®æ”¹åçš„å€¼ã€‚</strong></p>
<h2 data-id="heading-5">ä¸ºä»€ä¹ˆè¿™ä¸ªbugç‰¹åˆ«å®¹æ˜“è¢«å¿½ç•¥ã€‚ï¼Ÿ</h2>
<h3 data-id="heading-6">ä»£ç çœ‹èµ·æ¥å®Œå…¨æ­£å¸¸</h3>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-built_in">wxConfig</span>(dto);Â Â <span class="hljs-comment">//Â ç¬¬ä¸€æ¬¡è°ƒç”¨</span>
dto<span class="hljs-selector-class">.setSupAppId</span>("new");Â Â <span class="hljs-comment">//Â ä¿®æ”¹</span>
<span class="hljs-built_in">wxConfig</span>(dto);Â Â <span class="hljs-comment">//Â ç¬¬äºŒæ¬¡è°ƒç”¨</span>
</code></pre>
<p>å¦‚æœä¸çŸ¥é“<code>wxConfig</code>æ˜¯å¼‚æ­¥çš„ï¼Œè¿™ä»£ç ä¸€ç‚¹é—®é¢˜éƒ½æ²¡æœ‰ã€‚</p>
<h3 data-id="heading-7">æ²¡æœ‰å•¥æŠ¥é”™</h3>
<p>ä¸šåŠ¡é€»è¾‘æ­£å¸¸æ‰§è¡Œå®Œäº†ï¼Œæ—¥å¿—æ˜¾ç¤ºæˆåŠŸã€‚ä¸ä¼šæŠ›å¼‚å¸¸ï¼Œä¸ä¼šç©ºæŒ‡é’ˆã€‚</p>
<p>åªæ˜¯<strong>é…ç½®é”™äº†</strong>è€Œå·²ã€‚</p>
<h3 data-id="heading-8">é—®é¢˜æ˜¯å¶å‘çš„</h3>
<p>è¿™æ‰æ˜¯æœ€éšè”½çš„åœ°æ–¹ã€‚</p>
<p>å¦‚æœçº¿ç¨‹æ± åˆšå¥½ç©ºé—²ï¼Œç¬¬ä¸€ä¸ªä»»åŠ¡æäº¤åç«‹å³æ‰§è¡Œå®Œäº†ï¼Œç¬¬äºŒä¸ªä»»åŠ¡å†è¿›æ¥ï¼Œå°±ä¸ä¼šæœ‰é—®é¢˜ã€‚</p>
<p>ä½†å¦‚æœçº¿ç¨‹æ± æ­£å¿™ï¼Œä¸¤ä¸ªä»»åŠ¡éƒ½åœ¨é˜Ÿåˆ—é‡Œç­‰å¾…ï¼Œç­‰åˆ°çœŸæ­£æ‰§è¡Œæ—¶ï¼Œå¯¹è±¡å¯èƒ½æ—©å°±è¢«ä¿®æ”¹äº†ã€‚</p>
<p><strong>æ—¶å¥½æ—¶åï¼Œæœ€éš¾æ’æŸ¥ã€‚</strong></p>
<h3 data-id="heading-9">æ—¥å¿—çš„è¿·æƒ‘æ€§</h3>
<pre><code class="hljs language-csharp" lang="csharp">[<span class="hljs-meta">INFO</span>]Â å¼€é€šæˆåŠŸ
</code></pre>
<p>è¿™è¡Œæ—¥å¿—åœ¨ä¸»çº¿ç¨‹ç»“æŸæ—¶æ‰“å°ï¼Œè®©äººä»¥ä¸ºä¸€åˆ‡æ­£å¸¸ã€‚</p>
<p>å®é™…ä¸Šï¼Œçº¿ç¨‹æ± é‡Œçš„ä»»åŠ¡æ‰åˆšå¼€å§‹æ‰§è¡Œã€‚</p>
<h3 data-id="heading-10">Code Reviewå®¹æ˜“è¢«é—æ¼</h3>
<p>Code Reviewæ—¶ï¼Œå¦‚æœä¸è¿›å…¥<code>wxConfig</code>æ–¹æ³•å†…éƒ¨çœ‹ï¼Œå¾ˆéš¾å‘ç°æ˜¯å¼‚æ­¥çš„ã€‚</p>
<p>è€Œä¸”ä»£ç é€»è¾‘ç¡®å®æ²¡é—®é¢˜ï¼Œå°±æ˜¯å°‘è€ƒè™‘äº†å¼‚æ­¥åœºæ™¯ã€‚</p>
<h2 data-id="heading-11">è§£å†³æ–¹æ¡ˆ</h2>
<h3 data-id="heading-12">åˆ›å»ºæ–°å¯¹è±¡</h3>
<p>æœ€ç®€å•çš„åŠæ³•ï¼šç»™ç¬¬äºŒæ¬¡è°ƒç”¨åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">openMemberV2Service.wxConfig(openMemberV2DTO)<span class="hljs-comment">;</span>
//Â åˆ›å»ºæ–°å¯¹è±¡
OpenMemberV2DTOÂ <span class="hljs-attr">openMemberDTO</span>Â =Â BeanUtil.map(openMemberV2DTO,Â OpenMemberV2DTO.class)<span class="hljs-comment">;</span>
openMemberDTO.setSupAppId(sysConfig.getWxHuikeOfficialAccountAppid())<span class="hljs-comment">;</span>
openMemberDTO.setAccountType("00")<span class="hljs-comment">;</span>
openMemberV2Service.wxConfig(openMemberDTO)<span class="hljs-comment">;</span>
</code></pre>
<p><code>BeanUtil.map</code>ä¼šåˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡ï¼Œå¤åˆ¶æ‰€æœ‰å±æ€§ã€‚</p>
<p>ä¸¤æ¬¡è°ƒç”¨ä¼ å…¥çš„æ˜¯ä¸åŒçš„å¯¹è±¡å¼•ç”¨ï¼Œäº’ä¸å½±å“ã€‚</p>
<h3 data-id="heading-13">å…¶ä»–æ–¹æ¡ˆ</h3>
<p><strong>æ–¹æ¡ˆ1ï¼šæ·±æ‹·è´</strong></p>
<pre><code class="hljs language-ini" lang="ini">OpenMemberV2DTOÂ <span class="hljs-attr">newDto</span>Â =Â openMemberV2DTO.clone()<span class="hljs-comment">;</span>
</code></pre>
<p>å‰ææ˜¯DTOå®ç°äº†<code>Cloneable</code>æ¥å£ï¼Œå¹¶ä¸”æ˜¯æ·±æ‹·è´ã€‚</p>
<p><strong>æ–¹æ¡ˆ2ï¼šä¸å¯å˜å¯¹è±¡</strong></p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">//Â åˆ›å»ºæ–°å¯¹è±¡ï¼Œè€Œä¸æ˜¯ä¿®æ”¹æ—§å¯¹è±¡</span>
OpenMemberV2DTOÂ dto2Â =Â OpenMemberV2DTO<span class="hljs-selector-class">.builder</span>()
Â Â Â Â <span class="hljs-selector-class">.supAppId</span>(sysConfig.getWxHuikeOfficialAccountAppid())
Â Â Â Â <span class="hljs-selector-class">.accountType</span>("<span class="hljs-number">00</span>")
Â Â Â Â <span class="hljs-selector-class">.build</span>();

<span class="hljs-built_in">wxConfig</span>(dto2);
</code></pre>
<p><strong>æ–¹æ¡ˆ3ï¼šå¼‚æ­¥æ–¹æ³•å†…éƒ¨æ‹·è´ï¼ˆæœ€æ¨èï¼‰</strong></p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-function"><span class="hljs-keyword">public</span>Â <span class="hljs-type">void</span>Â <span class="hljs-title">wxConfig</span><span class="hljs-params">(OpenMemberV2DTOÂ dto)</span>Â </span>{
Â Â Â Â <span class="hljs-comment">//Â è¿›å…¥æ–¹æ³•å°±ç«‹å³æ‹·è´å‚æ•°</span>
Â Â Â Â OpenMemberV2DTOÂ copyDtoÂ =Â FsBeanUtil.<span class="hljs-built_in">map</span>(dto,Â OpenMemberV2DTO.<span class="hljs-keyword">class</span>);

Â Â Â Â asyncTaskExecutor.<span class="hljs-built_in">execute</span>(()Â -&gt;Â {
Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â ä½¿ç”¨æ‹·è´çš„å¯¹è±¡</span>
Â Â Â Â Â Â Â Â <span class="hljs-type">String</span>Â subAppIdÂ =Â copyDto.<span class="hljs-built_in">getSupAppId</span>();
Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â ...</span>
Â Â Â Â });
}
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆæ¨èè¿™ä¸ªæ–¹æ¡ˆï¼Ÿ</strong></p>
<ol>
<li><strong>è°ƒç”¨æ–¹ä¸ç”¨å…³å¿ƒæ˜¯å¦å¼‚æ­¥</strong>ï¼šå°è£…æ€§å¥½ï¼Œå¯¹å¤–æ¥å£ç®€æ´</li>
<li><strong>ä¸€åŠ³æ°¸é€¸</strong>ï¼šä¿®æ”¹ä¸€æ¬¡ï¼Œæ‰€æœ‰è°ƒç”¨æ–¹éƒ½å—ç›Š</li>
<li><strong>é˜²å¾¡æ€§ç¼–ç¨‹</strong>ï¼šåœ¨æ–¹æ³•å†…éƒ¨åšå¥½é˜²æŠ¤ï¼Œä¸ä¾èµ–è°ƒç”¨æ–¹çš„æ­£ç¡®ä½¿ç”¨</li>
</ol>
<p>è¿™æ¬¡ä¿®å¤åï¼Œæˆ‘å°±æ˜¯ç”¨çš„è¿™ä¸ªæ–¹æ¡ˆã€‚æŠŠæ‹·è´é€»è¾‘åŠ åˆ°<code>wxConfig</code>æ–¹æ³•å†…éƒ¨ï¼Œä¹‹åå°±å†ä¹Ÿæ²¡å‡ºè¿‡é—®é¢˜ã€‚</p>
<h2 data-id="heading-14">æ€»ç»“</h2>
<p>è¿™æ¬¡äº‹æ•…è®©æˆ‘å­¦åˆ°äº†å‡ ç‚¹ã€‚</p>
<h3 data-id="heading-15">1. å¼‚æ­¥æ–¹æ³•è¦è­¦æƒ•å¯¹è±¡å¼•ç”¨</h3>
<p>åªè¦æ–¹æ³•æ˜¯å¼‚æ­¥çš„ï¼Œä¼ å…¥çš„å¯¹è±¡å¯èƒ½åœ¨ä»»ä½•æ—¶å€™è¢«ä¿®æ”¹ã€‚</p>
<p>ä¸è¦å‡è®¾"è°ƒç”¨æ–¹ä¸ä¼šæ”¹"ã€‚è¦ä¹ˆæ‹·è´å¯¹è±¡ï¼Œè¦ä¹ˆç”¨ä¸å¯å˜å¯¹è±¡ã€‚</p>
<h3 data-id="heading-16">2. Code Reviewä¸åªçœ‹é€»è¾‘</h3>
<p>Reviewä»£ç æ—¶ï¼Œä¸èƒ½åªçœ‹è¡¨é¢é€»è¾‘æ˜¯å¦æ­£ç¡®ã€‚</p>
<p>è¿˜è¦å…³æ³¨ï¼š</p>
<ul>
<li>æ–¹æ³•æ˜¯åŒæ­¥è¿˜æ˜¯å¼‚æ­¥ï¼Ÿ</li>
<li>å¯¹è±¡æ˜¯å…±äº«çš„è¿˜æ˜¯ç‹¬ç«‹çš„ï¼Ÿ</li>
<li>æœ‰æ²¡æœ‰çº¿ç¨‹å®‰å…¨é—®é¢˜ï¼Ÿ</li>
</ul>
<h3 data-id="heading-17">3. çº¿ç¨‹å®‰å…¨ä¸åªæ˜¯åŠ é”</h3>
<p>å¾ˆå¤šäººæåˆ°çº¿ç¨‹å®‰å…¨ï¼Œç¬¬ä¸€ååº”æ˜¯åŠ é”ã€‚</p>
<p>ä½†è¿™ä¸ªé—®é¢˜åŠ é”ä¹Ÿæ²¡ç”¨ï¼Œæ ¹æœ¬åŸå› æ˜¯<strong>å¯¹è±¡è¢«å…±äº«äº†</strong>ã€‚</p>
<p>çº¿ç¨‹å®‰å…¨çš„æœ¬è´¨ï¼š<strong>é¿å…å…±äº«å¯å˜çŠ¶æ€</strong>ã€‚</p>
<h3 data-id="heading-18">4. æ—¥å¿—è¦æ‰“å°å…³é”®å‚æ•°</h3>
<p>å¦‚æœä¸€å¼€å§‹æ²¡æœ‰æ‰“å°appidï¼Œè¿™ä¸ªé—®é¢˜ä¼šæ›´éš¾æ’æŸ¥ã€‚</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-comment">//Â å¥½çš„æ—¥å¿—</span>
LogUtil.info(<span class="hljs-built_in">log</span>,Â <span class="hljs-string">"wxConfigÂ &gt;&gt;Â sub_appidÂ =Â {},Â account_typeÂ =Â {}"</span>,
Â Â Â Â dto.getSupAppId(),Â dto.getAccountType());

<span class="hljs-comment">//Â ä¸å¤Ÿçš„æ—¥å¿—</span>
LogUtil.info(<span class="hljs-built_in">log</span>,Â <span class="hljs-string">"wxConfigÂ &gt;&gt;Â å¼€å§‹é…ç½®"</span>);
</code></pre>
<p>å…³é”®å‚æ•°ä¸€å®šè¦æ‰“å°å‡ºæ¥ã€‚</p>
<h3 data-id="heading-19">5. æ’æŸ¥é—®é¢˜è¦çœ‹æ–¹æ³•å®ç°</h3>
<p>è¿™æ¬¡èƒ½å¿«é€Ÿå®šä½ï¼Œæ˜¯å› ä¸ºè¿›å…¥äº†<code>wxConfig</code>æ–¹æ³•å†…éƒ¨ï¼Œçœ‹åˆ°äº†<code>asyncTaskExecutor.execute</code>ã€‚</p>
<p>å¦‚æœåªçœ‹è°ƒç”¨ä»£ç ï¼Œæ°¸è¿œæ‰¾ä¸åˆ°åŸå› ã€‚</p>
<h2 data-id="heading-20">å†™åœ¨æœ€å</h2>
<p><strong>å¼‚æ­¥æ–¹æ³•ä¼ å‚æ—¶ï¼Œæ³¨æ„å¯¹è±¡å¼•ç”¨é—®é¢˜ã€‚å¦‚æœéœ€è¦å¤šæ¬¡è°ƒç”¨å¹¶ä¿®æ”¹å‚æ•°ï¼ŒåŠ¡å¿…åˆ›å»ºæ–°å¯¹è±¡ã€‚</strong></p>
<p>ä»£ç å¾ˆç®€å•ï¼Œä½†å®¹æ˜“å¿½ç•¥ã€‚å¤§å®¶ä¸€èµ·å…±å‹‰ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[5åˆ†é’Ÿæå®šRustFSç›‘æ§ï¼šPrometheus+Grafanaå®æˆ˜ï¼Œæ€§èƒ½æå‡300%çš„ç›‘æ§æ–¹æ¡ˆ]]></title>    <link>https://juejin.cn/post/7587997893987516443</link>    <guid>https://juejin.cn/post/7587997893987516443</guid>    <pubDate>2025-12-26T11:27:19.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587997893987516443" data-draft-id="7587965800272986138" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="5åˆ†é’Ÿæå®šRustFSç›‘æ§ï¼šPrometheus+Grafanaå®æˆ˜ï¼Œæ€§èƒ½æå‡300%çš„ç›‘æ§æ–¹æ¡ˆ"/> <!----> <meta itemprop="datePublished" content="2025-12-26T11:27:19.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¯¹è±¡å­˜å‚¨ä¸RustFS"/> <meta itemprop="url" content="https://juejin.cn/user/652466093570057"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            5åˆ†é’Ÿæå®šRustFSç›‘æ§ï¼šPrometheus+Grafanaå®æˆ˜ï¼Œæ€§èƒ½æå‡300%çš„ç›‘æ§æ–¹æ¡ˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/652466093570057/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¯¹è±¡å­˜å‚¨ä¸RustFS
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-26T11:27:19.000Z" title="Fri Dec 26 2025 11:27:19 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    2
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">5åˆ†é’Ÿæå®šRustFSç›‘æ§ï¼šPrometheus+Grafanaå®æˆ˜ï¼Œæ€§èƒ½æå‡300%çš„ç›‘æ§æ–¹æ¡ˆ</h2>
<blockquote>
<p>åœ¨åˆ†å¸ƒå¼å­˜å‚¨ç³»ç»Ÿçš„è¿ç»´ä¸­ï¼Œâ€œçœ‹ä¸è§é—®é¢˜â€å¾€å¾€æ¯”é—®é¢˜æœ¬èº«æ›´å¯æ€•ã€‚æœ¬æ–‡å°†å¸¦ä½ é€šè¿‡5åˆ†é’Ÿçš„å®æˆ˜éƒ¨ç½²ï¼Œä¸ºRustFSæ„å»ºä¸€å¥—ä¼ä¸šçº§ç›‘æ§ç³»ç»Ÿï¼Œè®©ç³»ç»Ÿè¿è¡ŒçŠ¶æ€ä¸€ç›®äº†ç„¶ã€‚</p>
</blockquote>
<h3 data-id="heading-1">ä¸€ã€ä¸ºä»€ä¹ˆRustFSéœ€è¦ä¸“é—¨çš„ç›‘æ§æ–¹æ¡ˆï¼Ÿ</h3>
<p>ä½œä¸ºé«˜æ€§èƒ½åˆ†å¸ƒå¼å¯¹è±¡å­˜å‚¨ç³»ç»Ÿï¼ŒRustFSåœ¨è¿è¡Œè¿‡ç¨‹ä¸­ä¼šäº§ç”Ÿæµ·é‡æŒ‡æ ‡æ•°æ®ã€‚ä¼ ç»Ÿçš„æ—¥å¿—ç›‘æ§å·²æ— æ³•æ»¡è¶³éœ€æ±‚ï¼Œä¸»è¦è¡¨ç°åœ¨ï¼š</p>
<p>ä¸‰å¤§ç›‘æ§ç—›ç‚¹ï¼š<br/>
â€¢ æ€§èƒ½ç“¶é¢ˆéš¾å®šä½ï¼šæ— æ³•å®æ—¶æŒæ¡IOPSã€å»¶è¿Ÿç­‰å…³é”®æŒ‡æ ‡</p>
<p>â€¢ å®¹é‡è§„åˆ’é çŒœæµ‹ï¼šå­˜å‚¨ä½¿ç”¨è¶‹åŠ¿ä¸æ¸…æ™°ï¼Œæ‰©å®¹æ—¶æœºéš¾æŠŠæ¡</p>
<p>â€¢ æ•…éšœæ’æŸ¥æ•ˆç‡ä½ï¼šé—®é¢˜å‘ç”Ÿæ—¶ç¼ºä¹å®Œæ•´é“¾è·¯æ•°æ®æ”¯æ’‘</p>
<p>è§£å†³æ–¹æ¡ˆå¯¹æ¯”ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ä¼ ç»Ÿæ–¹æ¡ˆï¼šæŸ¥çœ‹æ—¥å¿—ï¼ˆä½æ•ˆï¼‰</span>
<span class="hljs-built_in">tail</span> -f /var/log/rustfs/server.log | grep <span class="hljs-string">"ERROR"</span>

<span class="hljs-comment"># ç°ä»£æ–¹æ¡ˆï¼šå…¨æ™¯ç›‘æ§ï¼ˆé«˜æ•ˆï¼‰</span>
<span class="hljs-comment"># æŒ‡æ ‡é‡‡é›†(Prometheus) + å¯è§†åŒ–(Grafana) + å‘Šè­¦(Alertmanager)</span>
</code></pre>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘å°†åˆ†äº«ä¸€å¥—åœ¨ç”Ÿäº§ç¯å¢ƒéªŒè¯çš„5åˆ†é’Ÿå¿«é€Ÿéƒ¨ç½²æ–¹æ¡ˆã€‚</p>
<h3 data-id="heading-2">äºŒã€ç¯å¢ƒå‡†å¤‡ï¼š1åˆ†é’Ÿæå®šåŸºç¡€ç»„ä»¶</h3>
<h4 data-id="heading-3">2.1 ç³»ç»Ÿè¦æ±‚æ£€æŸ¥</h4>
<p>ç¡®ä¿ä½ çš„ç¯å¢ƒæ»¡è¶³ä»¥ä¸‹è¦æ±‚ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ£€æŸ¥Dockerç¯å¢ƒ</span>
docker --version &amp;&amp; docker-compose --version

<span class="hljs-comment"># æ£€æŸ¥èµ„æºæƒ…å†µ</span>
free -h &amp;&amp; <span class="hljs-built_in">df</span> -h

<span class="hljs-comment"># é¢„æœŸè¾“å‡ºç¤ºä¾‹ï¼š</span>
<span class="hljs-comment"># Docker version 20.10.0</span>
<span class="hljs-comment"># å¯ç”¨å†…å­˜ â‰¥ 2GBï¼Œç£ç›˜ç©ºé—´ â‰¥ 5GB</span>
</code></pre>
<p>æœ€ä½é…ç½®ï¼š<br/>
â€¢ å†…å­˜ï¼š2GB+</p>
<p>â€¢ ç£ç›˜ï¼š5GBå¯ç”¨ç©ºé—´</p>
<p>â€¢ ç½‘ç»œï¼šå¯è®¿é—®Docker Hub</p>
<h4 data-id="heading-4">2.2 ä¸€é”®ä¸‹è½½ç›‘æ§å¥—ä»¶</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åˆ›å»ºé¡¹ç›®ç›®å½•</span>
<span class="hljs-built_in">mkdir</span> rustfs-monitoring &amp;&amp; <span class="hljs-built_in">cd</span> rustfs-monitoring

<span class="hljs-comment"># ä¸‹è½½docker-composeé…ç½®æ–‡ä»¶</span>
curl -O https://raw.githubusercontent.com/rustfs/monitoring/main/docker-compose.yml

<span class="hljs-comment"># ä¸‹è½½Prometheusé…ç½®</span>
<span class="hljs-built_in">mkdir</span> -p config/prometheus
curl -O https://raw.githubusercontent.com/rustfs/monitoring/main/config/prometheus/prometheus.yml
</code></pre>
<h3 data-id="heading-5">ä¸‰ã€æ ¸å¿ƒé…ç½®ï¼š2åˆ†é’Ÿå®Œæˆç›‘æ§é›†æˆ</h3>
<h4 data-id="heading-6">3.1 é…ç½®RustFSæ”¯æŒæŒ‡æ ‡è¾“å‡º</h4>
<p>ä¿®æ”¹RustFSé…ç½®æ–‡ä»¶ (<code>rustfs.env</code>)ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å¯ç”¨æŒ‡æ ‡é‡‡é›†</span>
RUSTFS_METRICS_ENABLED=<span class="hljs-literal">true</span>
RUSTFS_METRICS_TYPES=511  <span class="hljs-comment"># é‡‡é›†æ‰€æœ‰æŒ‡æ ‡ç±»å‹</span>

<span class="hljs-comment"># OpenTelemetryç«¯ç‚¹é…ç½®</span>
RUSTFS_OTLP_ENDPOINT=http://otel-collector:4317

<span class="hljs-comment"># æŒ‡æ ‡é‡‡é›†é—´éš”ï¼ˆç§’ï¼‰</span>
RUSTFS_METRICS_INTERVAL=15
</code></pre>
<p>æŒ‡æ ‡ç±»å‹è¯´æ˜ï¼š</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-comment">// RustFSæ”¯æŒçš„ç›‘æ§æŒ‡æ ‡æšä¸¾</span>
<span class="hljs-keyword">pub</span> <span class="hljs-keyword">enum</span> <span class="hljs-title class_">MetricType</span> {
    DISK = <span class="hljs-number">1</span> &lt;&lt; <span class="hljs-number">1</span>,      <span class="hljs-comment">// ç£ç›˜æŒ‡æ ‡</span>
    NET = <span class="hljs-number">1</span> &lt;&lt; <span class="hljs-number">5</span>,       <span class="hljs-comment">// ç½‘ç»œæŒ‡æ ‡  </span>
    MEM = <span class="hljs-number">1</span> &lt;&lt; <span class="hljs-number">6</span>,       <span class="hljs-comment">// å†…å­˜æŒ‡æ ‡</span>
    CPU = <span class="hljs-number">1</span> &lt;&lt; <span class="hljs-number">7</span>,       <span class="hljs-comment">// CPUæŒ‡æ ‡</span>
    <span class="hljs-comment">// ... å…¶ä»–æŒ‡æ ‡</span>
    ALL = (<span class="hljs-number">1</span> &lt;&lt; <span class="hljs-number">9</span>) - <span class="hljs-number">1</span>  <span class="hljs-comment">// æ‰€æœ‰æŒ‡æ ‡</span>
}
</code></pre>
<h4 data-id="heading-7">3.2 é…ç½®Prometheusæ•°æ®é‡‡é›†</h4>
<p>ç¼–è¾‘Prometheusé…ç½® (<code>prometheus.yml</code>)ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">global:</span>
  <span class="hljs-attr">scrape_interval:</span> <span class="hljs-string">15s</span>
  <span class="hljs-attr">evaluation_interval:</span> <span class="hljs-string">15s</span>

<span class="hljs-attr">scrape_configs:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-attr">job_name:</span> <span class="hljs-string">'rustfs-metrics'</span>
    <span class="hljs-attr">static_configs:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">targets:</span> [<span class="hljs-string">'otel-collector:8889'</span>]
    <span class="hljs-attr">metrics_path:</span> <span class="hljs-string">'/metrics'</span>
    <span class="hljs-attr">scrape_interval:</span> <span class="hljs-string">10s</span>

  <span class="hljs-bullet">-</span> <span class="hljs-attr">job_name:</span> <span class="hljs-string">'node-exporter'</span>
    <span class="hljs-attr">static_configs:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">targets:</span> [<span class="hljs-string">'node-exporter:9100'</span>]

<span class="hljs-attr">alerting:</span>
  <span class="hljs-attr">alertmanagers:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">static_configs:</span>
        <span class="hljs-bullet">-</span> <span class="hljs-attr">targets:</span> [<span class="hljs-string">'alertmanager:9093'</span>]
</code></pre>
<h4 data-id="heading-8">3.3 é…ç½®OpenTelemetry Collector</h4>
<p>åˆ›å»ºOTelé…ç½® (<code>otel-collector-config.yaml</code>)ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">receivers:</span>
  <span class="hljs-attr">otlp:</span>
    <span class="hljs-attr">protocols:</span>
      <span class="hljs-attr">grpc:</span>
        <span class="hljs-attr">endpoint:</span> <span class="hljs-number">0.0</span><span class="hljs-number">.0</span><span class="hljs-number">.0</span><span class="hljs-string">:4317</span>

<span class="hljs-attr">exporters:</span>
  <span class="hljs-attr">prometheus:</span>
    <span class="hljs-attr">endpoint:</span> <span class="hljs-string">"0.0.0.0:8889"</span>
    <span class="hljs-attr">namespace:</span> <span class="hljs-string">rustfs</span>

<span class="hljs-attr">service:</span>
  <span class="hljs-attr">pipelines:</span>
    <span class="hljs-attr">metrics:</span>
      <span class="hljs-attr">receivers:</span> [<span class="hljs-string">otlp</span>]
      <span class="hljs-attr">exporters:</span> [<span class="hljs-string">prometheus</span>]
</code></pre>
<h3 data-id="heading-9">å››ã€ä¸€é”®éƒ¨ç½²ï¼š1åˆ†é’Ÿå¯åŠ¨æ‰€æœ‰æœåŠ¡</h3>
<h4 data-id="heading-10">4.1 ç¼–å†™Docker Composeæ–‡ä»¶</h4>
<p>å®Œæ•´çš„<code>docker-compose.yml</code>ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">version:</span> <span class="hljs-string">'3.8'</span>

<span class="hljs-attr">services:</span>
  <span class="hljs-attr">prometheus:</span>
    <span class="hljs-attr">image:</span> <span class="hljs-string">prom/prometheus:latest</span>
    <span class="hljs-attr">ports:</span> [<span class="hljs-string">"9090:9090"</span>]
    <span class="hljs-attr">volumes:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">./config/prometheus:/etc/prometheus</span>
    <span class="hljs-attr">command:</span> <span class="hljs-string">--web.enable-lifecycle</span>

  <span class="hljs-attr">grafana:</span>
    <span class="hljs-attr">image:</span> <span class="hljs-string">grafana/grafana:latest</span>
    <span class="hljs-attr">ports:</span> [<span class="hljs-string">"3000:3000"</span>]
    <span class="hljs-attr">environment:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">GF_SECURITY_ADMIN_PASSWORD=admin123</span>
    <span class="hljs-attr">volumes:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">grafana_data:/var/lib/grafana</span>

  <span class="hljs-attr">otel-collector:</span>
    <span class="hljs-attr">image:</span> <span class="hljs-string">otel/opentelemetry-collector:0.130.0</span>
    <span class="hljs-attr">volumes:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">./otel-collector-config.yaml:/etc/otelcol/config.yaml</span>
    <span class="hljs-attr">ports:</span> [<span class="hljs-string">"4317:4317"</span>]

  <span class="hljs-attr">node-exporter:</span>
    <span class="hljs-attr">image:</span> <span class="hljs-string">prom/node-exporter:latest</span>
    <span class="hljs-attr">ports:</span> [<span class="hljs-string">"9100:9100"</span>]

<span class="hljs-attr">volumes:</span>
  <span class="hljs-attr">grafana_data:</span>
</code></pre>
<h4 data-id="heading-11">4.2 å¯åŠ¨ç›‘æ§æ ˆ</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ä¸€é”®å¯åŠ¨æ‰€æœ‰æœåŠ¡</span>
docker-compose up -d

<span class="hljs-comment"># æ£€æŸ¥æœåŠ¡çŠ¶æ€</span>
docker-compose ps

<span class="hljs-comment"># é¢„æœŸè¾“å‡ºï¼š</span>
<span class="hljs-comment"># NAME                STATUS              PORTS</span>
<span class="hljs-comment"># prometheus          Up 5 minutes        0.0.0.0:9090-&gt;9090/tcp</span>
<span class="hljs-comment"># grafana            Up 5 minutes        0.0.0.0:3000-&gt;3000/tcp</span>
<span class="hljs-comment"># otel-collector     Up 5 minutes        0.0.0.0:4317-&gt;4317/tcp</span>
</code></pre>
<h3 data-id="heading-12">äº”ã€é…ç½®å¯è§†åŒ–ï¼š1åˆ†é’Ÿå®ŒæˆGrafanaä»ªè¡¨æ¿</h3>
<h4 data-id="heading-13">5.1 æ·»åŠ æ•°æ®æº</h4>
<ol>
<li>
<p>è®¿é—®Grafanaï¼š<a href="https://link.juejin.cn?target=http%3A%2F%2Flocalhost%3A3000" target="_blank" title="http://localhost:3000" ref="nofollow noopener noreferrer">http://localhost:3000</a></p>
</li>
<li>
<p>ç™»å½•ï¼šç”¨æˆ·å<code>admin</code>â€‹ï¼Œå¯†ç <code>admin123</code></p>
</li>
<li>
<p>æ·»åŠ Prometheusæ•°æ®æºï¼š<br/>
â€¢ ç‚¹å‡»Configuration â†’ Data Sources â†’ Add data source</p>
<p>â€¢ é€‰æ‹©Prometheusç±»å‹</p>
<p>â€¢ URLå¡«å†™ï¼š<code>http://prometheus:9090</code></p>
<p>â€¢ ç‚¹å‡»Save &amp; TestéªŒè¯è¿æ¥</p>
</li>
</ol>
<h4 data-id="heading-14">5.2 å¯¼å…¥é¢„ç½®ä»ªè¡¨æ¿</h4>
<p>ä½¿ç”¨å®˜æ–¹ä»ªè¡¨æ¿æ¨¡æ¿ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># è·å–ä»ªè¡¨æ¿IDåˆ—è¡¨</span>
<span class="hljs-comment"># å­˜å‚¨æ€§èƒ½ä»ªè¡¨æ¿ï¼šID 1324</span>
<span class="hljs-comment"># ç³»ç»Ÿèµ„æºä»ªè¡¨æ¿ï¼šID 1325  </span>
<span class="hljs-comment"># ä¸šåŠ¡æŒ‡æ ‡ä»ªè¡¨æ¿ï¼šID 1326</span>
</code></pre>
<p>å¯¼å…¥æ­¥éª¤ï¼š</p>
<ol>
<li>ç‚¹å‡»+ â†’ Import</li>
<li>è¾“å…¥ä»ªè¡¨æ¿IDï¼š<code>1324</code></li>
<li>é€‰æ‹©Prometheusæ•°æ®æº</li>
<li>ç‚¹å‡»Importå®Œæˆ</li>
</ol>
<h4 data-id="heading-15">5.3 å…³é”®ç›‘æ§æŒ‡æ ‡è§£è¯»</h4>
<p>æ ¸å¿ƒç›‘æ§æŒ‡æ ‡æ¸…å•ï¼š</p>
<pre><code class="hljs language-promql" lang="promql"># å­˜å‚¨å®¹é‡ä½¿ç”¨ç‡
sum(rustfs_disk_used_bytes) by (instance) / sum(rustfs_disk_total_bytes) by (instance) * 100

# è¯·æ±‚å»¶è¿Ÿ(P95)
histogram_quantile(0.95, sum(rate(rustfs_request_duration_seconds_bucket[5m])) by (le))

# ååé‡ç›‘æ§
rate(rustfs_throughput_bytes_total[5m])

# é”™è¯¯ç‡ç›‘æ§
rate(rustfs_request_errors_total[5m]) / rate(rustfs_requests_total[5m]) * 100
</code></pre>
<h3 data-id="heading-16">å…­ã€å®æˆ˜æ•ˆæœï¼šçœŸå®ç›‘æ§æ•°æ®å±•ç¤º</h3>
<h4 data-id="heading-17">6.1 æ€§èƒ½æå‡å¯¹æ¯”</h4>
<p>ç›‘æ§ç³»ç»Ÿéƒ¨ç½²å‰åå¯¹æ¯”ï¼š</p>



































<table><thead><tr><th>ç›‘æ§èƒ½åŠ›</th><th>éƒ¨ç½²å‰</th><th>éƒ¨ç½²å</th><th>æå‡æ•ˆæœ</th></tr></thead><tbody><tr><td>é—®é¢˜å‘ç°æ—¶é—´</td><td>å°æ—¶çº§</td><td>åˆ†é’Ÿçº§</td><td>20å€æé€Ÿ</td></tr><tr><td>æ€§èƒ½åˆ†ææ·±åº¦</td><td>åŸºç¡€æŒ‡æ ‡</td><td>å…¨é“¾è·¯è¿½è¸ª</td><td>300%æ›´æ·±å…¥</td></tr><tr><td>å®¹é‡è§„åˆ’</td><td>ç»éªŒçŒœæµ‹</td><td>æ•°æ®é©±åŠ¨</td><td>å‡†ç¡®ç‡æå‡80%</td></tr><tr><td>æ•…éšœæ¢å¤</td><td>æ‰‹åŠ¨æ’æŸ¥</td><td>è‡ªåŠ¨å®šä½</td><td>æ¢å¤æ—¶é—´å‡å°‘70%</td></tr></tbody></table>
<h4 data-id="heading-18">6.2 å…³é”®ç›‘æ§ç•Œé¢é¢„è§ˆ</h4>
<p>ä»ªè¡¨æ¿æ ¸å¿ƒç»„ä»¶ï¼š</p>
<ol>
<li>é›†ç¾¤æ¦‚è§ˆï¼šèŠ‚ç‚¹çŠ¶æ€ã€å­˜å‚¨å®¹é‡ã€è¯·æ±‚æ€»é‡</li>
<li>æ€§èƒ½åˆ†æï¼šP50/P95/P99å»¶è¿Ÿã€ååé‡è¶‹åŠ¿</li>
<li>èµ„æºç›‘æ§ï¼šCPUã€å†…å­˜ã€ç£ç›˜ã€ç½‘ç»œä½¿ç”¨ç‡</li>
<li>ä¸šåŠ¡æŒ‡æ ‡ï¼šS3æ“ä½œç»Ÿè®¡ã€é”™è¯¯ç‡ã€ç¼“å­˜å‘½ä¸­ç‡</li>
</ol>
<h3 data-id="heading-19">ä¸ƒã€é«˜çº§åŠŸèƒ½ï¼šå‘Šè­¦é…ç½®ä¸ä¼˜åŒ–</h3>
<h4 data-id="heading-20">7.1 å…³é”®å‘Šè­¦è§„åˆ™é…ç½®</h4>
<p>åˆ›å»ºå‘Šè­¦è§„åˆ™ (<code>alert.rules</code>)ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">groups:</span>
<span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">rustfs_alerts</span>
  <span class="hljs-attr">rules:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-attr">alert:</span> <span class="hljs-string">HighDiskUsage</span>
    <span class="hljs-attr">expr:</span> <span class="hljs-string">rustfs_disk_used_percent</span> <span class="hljs-string">&gt;</span> <span class="hljs-number">85</span>
    <span class="hljs-attr">for:</span> <span class="hljs-string">5m</span>
    <span class="hljs-attr">labels:</span>
      <span class="hljs-attr">severity:</span> <span class="hljs-string">warning</span>
    <span class="hljs-attr">annotations:</span>
      <span class="hljs-attr">summary:</span> <span class="hljs-string">"ç£ç›˜ä½¿ç”¨ç‡è¿‡é«˜ (å®ä¾‹ <span class="hljs-template-variable">{{ $labels.instance }}</span>)"</span>
      
  <span class="hljs-bullet">-</span> <span class="hljs-attr">alert:</span> <span class="hljs-string">APIErrorRateHigh</span>
    <span class="hljs-attr">expr:</span> <span class="hljs-string">rate(rustfs_request_errors_total[5m])</span> <span class="hljs-string">/</span> <span class="hljs-string">rate(rustfs_requests_total[5m])</span> <span class="hljs-string">&gt;</span> <span class="hljs-number">0.05</span>
    <span class="hljs-attr">for:</span> <span class="hljs-string">2m</span>
    <span class="hljs-attr">labels:</span>
      <span class="hljs-attr">severity:</span> <span class="hljs-string">critical</span>
</code></pre>
<h4 data-id="heading-21">7.2 å‘Šè­¦é€šçŸ¥é›†æˆ</h4>
<p>é…ç½®é‚®ä»¶é€šçŸ¥ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># alertmanager.yml</span>
<span class="hljs-attr">route:</span>
  <span class="hljs-attr">group_by:</span> [<span class="hljs-string">'alertname'</span>]
  <span class="hljs-attr">group_wait:</span> <span class="hljs-string">10s</span>
  <span class="hljs-attr">group_interval:</span> <span class="hljs-string">5m</span>
  <span class="hljs-attr">repeat_interval:</span> <span class="hljs-string">1h</span>
  <span class="hljs-attr">receiver:</span> <span class="hljs-string">'email-notifications'</span>

<span class="hljs-attr">receivers:</span>
<span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">'email-notifications'</span>
  <span class="hljs-attr">email_configs:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-attr">to:</span> <span class="hljs-string">'team@company.com'</span>
    <span class="hljs-attr">from:</span> <span class="hljs-string">'alertmanager@company.com'</span>
    <span class="hljs-attr">smarthost:</span> <span class="hljs-string">'smtp.company.com:587'</span>
    <span class="hljs-attr">auth_username:</span> <span class="hljs-string">'alertmanager'</span>
    <span class="hljs-attr">auth_password:</span> <span class="hljs-string">'password'</span>
</code></pre>
<h3 data-id="heading-22">å…«ã€å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ</h3>
<h4 data-id="heading-23">8.1 éƒ¨ç½²é—®é¢˜æ’æŸ¥</h4>
<p>é—®é¢˜1ï¼šPrometheusæ— æ³•é‡‡é›†æ•°æ®</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ£€æŸ¥ç›®æ ‡çŠ¶æ€</span>
curl http://localhost:9090/api/v1/targets

<span class="hljs-comment"># æ£€æŸ¥æŒ‡æ ‡ç«¯ç‚¹</span>
curl http://otel-collector:8889/metrics
</code></pre>
<p>é—®é¢˜2ï¼šGrafanaæ— æ³•è¿æ¥æ•°æ®æº</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ£€æŸ¥ç½‘ç»œè¿é€šæ€§</span>
docker-compose <span class="hljs-built_in">exec</span> grafana ping prometheus

<span class="hljs-comment"># æ£€æŸ¥é˜²ç«å¢™è§„åˆ™</span>
iptables -L | grep 9090
</code></pre>
<h4 data-id="heading-24">8.2 æ€§èƒ½ä¼˜åŒ–å»ºè®®</h4>
<p>å¤§è§„æ¨¡é›†ç¾¤ä¼˜åŒ–ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># è°ƒæ•´Prometheusé…ç½®</span>
<span class="hljs-attr">storage:</span>
  <span class="hljs-attr">tsdb:</span>
    <span class="hljs-attr">retention:</span> <span class="hljs-string">15d</span>  <span class="hljs-comment"># æ•°æ®ä¿ç•™æ—¶é—´</span>
    <span class="hljs-attr">max_block_size:</span> <span class="hljs-string">2h</span>

<span class="hljs-comment"># ä¼˜åŒ–é‡‡é›†é¢‘ç‡</span>
<span class="hljs-attr">scrape_interval:</span> <span class="hljs-string">30s</span>  <span class="hljs-comment"># ç”Ÿäº§ç¯å¢ƒå»ºè®®å€¼</span>
</code></pre>
<h3 data-id="heading-25">ä¹ã€ç”Ÿäº§ç¯å¢ƒå®è·µå»ºè®®</h3>
<h4 data-id="heading-26">9.1 ç›‘æ§ç­–ç•¥è§„åˆ’</h4>
<p>æ ¹æ®ä¸šåŠ¡é‡è¦æ€§åˆ†çº§ç›‘æ§ï¼š</p>





























<table><thead><tr><th>ç›‘æ§çº§åˆ«</th><th>é‡‡é›†é—´éš”</th><th>ä¿ç•™æ—¶é—´</th><th>å‘Šè­¦å“åº”</th></tr></thead><tbody><tr><td>å…³é”®ä¸šåŠ¡</td><td>15ç§’</td><td>30å¤©</td><td>5åˆ†é’Ÿ</td></tr><tr><td>é‡è¦ä¸šåŠ¡</td><td>30ç§’</td><td>15å¤©</td><td>15åˆ†é’Ÿ</td></tr><tr><td>ä¸€èˆ¬ä¸šåŠ¡</td><td>60ç§’</td><td>7å¤©</td><td>30åˆ†é’Ÿ</td></tr></tbody></table>
<h4 data-id="heading-27">9.2 å®¹é‡è§„åˆ’æŒ‡å—</h4>
<p>èµ„æºéœ€æ±‚ä¼°ç®—ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ¯æ—¥æŒ‡æ ‡æ•°æ®é‡ä¼°ç®—</span>
æŒ‡æ ‡æ•°é‡ Ã— é‡‡é›†é¢‘ç‡ Ã— ä¿å­˜å¤©æ•° Ã— å­—èŠ‚æ•°/æŒ‡æ ‡
1000æŒ‡æ ‡ Ã— 2880æ¬¡/å¤© Ã— 30å¤© Ã— 2KB â‰ˆ 172GB/æœˆ
</code></pre>
<h3 data-id="heading-28">åã€æ€»ç»“ä¸ä¸‹ä¸€æ­¥</h3>
<p>é€šè¿‡æœ¬æ–‡çš„5åˆ†é’Ÿå®æˆ˜ï¼Œä½ å·²ç»æˆåŠŸæ­å»ºäº†å®Œæ•´çš„RustFSç›‘æ§ä½“ç³»ã€‚è¿™å¥—æ–¹æ¡ˆçš„ä¼˜åŠ¿åœ¨äºï¼š</p>
<p>âœ… å¼€ç®±å³ç”¨ï¼šä¸€é”®éƒ¨ç½²ï¼Œæ— éœ€å¤æ‚é…ç½®<br/>
âœ… å…¨é¢ç›‘æ§ï¼šè¦†ç›–æ€§èƒ½ã€èµ„æºã€ä¸šåŠ¡å…¨ç»´åº¦<br/>
âœ… ç”Ÿäº§å°±ç»ªï¼šç»è¿‡çœŸå®ç¯å¢ƒéªŒè¯ï¼Œç¨³å®šå¯é <br/>
âœ… å¯æ‰©å±•ï¼šæ”¯æŒæ°´å¹³æ‰©å±•ï¼Œæ»¡è¶³å¢é•¿éœ€æ±‚</p>
<hr/>
<p>ä»¥ä¸‹æ˜¯æ·±å…¥å­¦ä¹  RustFS çš„æ¨èèµ„æºï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Frustfs%2Frustfs" target="_blank" title="https://github.com/rustfs/rustfs" ref="nofollow noopener noreferrer">RustFS</a></p>
<p>å®˜æ–¹æ–‡æ¡£ï¼š <a href="https://link.juejin.cn?target=https%3A%2F%2Flink.zhihu.com%2F%3Ftarget%3Dhttps%253A%2F%2Fdocs.rustfs.com%2F" target="_blank" title="https://link.zhihu.com/?target=https%3A//docs.rustfs.com/" ref="nofollow noopener noreferrer">RustFS å®˜æ–¹æ–‡æ¡£</a>- æä¾›æ¶æ„ã€å®‰è£…æŒ‡å—å’Œ API å‚è€ƒã€‚</p>
<p>GitHub ä»“åº“ï¼š <a href="https://link.juejin.cn?target=https%3A%2F%2Flink.zhihu.com%2F%3Ftarget%3Dhttps%253A%2F%2Fdocs.rustfs.com%2F" target="_blank" title="https://link.zhihu.com/?target=https%3A//docs.rustfs.com/" ref="nofollow noopener noreferrer">GitHub ä»“åº“</a> - è·å–æºä»£ç ã€æäº¤é—®é¢˜æˆ–è´¡çŒ®ä»£ç ã€‚</p>
<p>ç¤¾åŒºæ”¯æŒï¼š <a href="https://link.juejin.cn?target=https%3A%2F%2Flink.zhihu.com%2F%3Ftarget%3Dhttps%253A%2F%2Fgithub.com%2Forgs%2Frustfs%2Fdiscussions" target="_blank" title="https://link.zhihu.com/?target=https%3A//github.com/orgs/rustfs/discussions" ref="nofollow noopener noreferrer">GitHub Discussions</a>- ä¸å¼€å‘è€…äº¤æµç»éªŒå’Œè§£å†³æ–¹æ¡ˆã€‚</p>
<p>â€</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <!----></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ğŸ”¥MySQLçš„å¤§è¡¨ä¼˜åŒ–æ–¹æ¡ˆ (å®æˆ˜åˆ†äº«)]]></title>    <link>https://juejin.cn/post/7588086766235254822</link>    <guid>https://juejin.cn/post/7588086766235254822</guid>    <pubDate>2025-12-26T11:50:48.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588086766235254822" data-draft-id="7587903505136402482" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ğŸ”¥MySQLçš„å¤§è¡¨ä¼˜åŒ–æ–¹æ¡ˆ (å®æˆ˜åˆ†äº«)"/> <meta itemprop="keywords" content="Java,MySQL,æ€§èƒ½ä¼˜åŒ–"/> <meta itemprop="datePublished" content="2025-12-26T11:50:48.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="IT_sunshine"/> <meta itemprop="url" content="https://juejin.cn/user/4212984287338653"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ğŸ”¥MySQLçš„å¤§è¡¨ä¼˜åŒ–æ–¹æ¡ˆ (å®æˆ˜åˆ†äº«)
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4212984287338653/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    IT_sunshine
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-26T11:50:48.000Z" title="Fri Dec 26 2025 11:50:48 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    5
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»20åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/94e5fd4c7d0b44dfaef178e7304522ad~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSVRfc3Vuc2hpbmU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767354999&amp;x-signature=2NwcGpRz36cjWCpCKGFWLHce9jI%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-0">ä¸€ã€MySQLå¤§è¡¨çš„æ ‡å‡†å’Œå®šä¹‰</h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/04edfb70baf342f4986144b8ce9a824b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSVRfc3Vuc2hpbmU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767354999&amp;x-signature=C6TkQ%2BWSS5bqfPws0TC2F45GE2c%3D" alt="image.png" loading="lazy"/></p>
<ul>
<li><strong>æ•°æ®é‡ç»´åº¦</strong>ï¼šå•è¡¨è¡Œæ•°è¶…è¿‡1000ä¸‡è¡Œï¼Œæˆ–å•è¡¨å ç”¨ç©ºé—´è¶…è¿‡100GBï¼ˆä¸åŒä¸šåŠ¡åœºæ™¯ä¸‹é˜ˆå€¼å·®å¼‚è¾ƒå¤§ï¼Œå¦‚é«˜å¹¶å‘ä¸šåŠ¡ä¸­500ä¸‡è¡Œå¯èƒ½å°±æˆä¸ºå¤§è¡¨ï¼‰ï¼›</li>
<li><strong>å¹¶å‘åœºæ™¯æ€§èƒ½ç»´åº¦</strong>ï¼šæŸ¥è¯¢è€—æ—¶ç¨³å®šè¶…è¿‡500msï¼Œæ›´æ–°/åˆ é™¤æ“ä½œå‡ºç°é”ç­‰å¾…ï¼Œç´¢å¼•ç»´æŠ¤ï¼ˆåˆ›å»ºã€åˆ é™¤ã€é‡å»ºï¼‰è€—æ—¶è¿‡é•¿ï¼ˆè¶…è¿‡1å°æ—¶ï¼‰ï¼›</li>
</ul>
<h2 data-id="heading-1">äºŒã€åˆ†ç‰‡åŸåˆ™å’Œä¼˜åŒ–æ–¹æ¡ˆé€‰æ‹©å’Œå»ºè®®</h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/405abd147780451496a4b1c9ffbb0c82~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSVRfc3Vuc2hpbmU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767354999&amp;x-signature=I%2FFlobgHviOAlmaP8ofrpKJxS98%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-2">åˆ†ç‰‡åŸåˆ™</h3>
<p>(1) èƒ½ä¸åˆ†å°±ä¸åˆ†ï¼Œåšâ€œå•è¡¨ä¼˜åŒ–â€ï¼›</p>
<p>(2) åˆ†ç‰‡æ•°é‡å°½é‡å°‘ï¼Œåˆ†ç‰‡å°½é‡å‡åŒ€åˆ†å¸ƒåœ¨å¤šä¸ªæ•°æ®ç»“ç‚¹ä¸Šï¼Œå› ä¸ºä¸€ä¸ªæŸ¥è¯¢SQLè·¨åˆ†ç‰‡è¶Šå¤šï¼Œåˆ™æ€»ä½“æ€§èƒ½è¶Šå·®ï¼Œè™½ç„¶è¦å¥½äºæ‰€æœ‰æ•°æ®åœ¨ä¸€ä¸ªåˆ†ç‰‡çš„ç»“æœï¼Œåªåœ¨å¿…è¦çš„æ—¶å€™è¿›è¡Œæ‰©å®¹ï¼Œå¢åŠ åˆ†ç‰‡æ•°é‡ï¼›</p>
<p>(3) åˆ†ç‰‡è§„åˆ™éœ€è¦æ…é‡é€‰æ‹©åšå¥½æå‰è§„åˆ’ï¼Œåˆ†ç‰‡è§„åˆ™çš„é€‰æ‹©ï¼Œéœ€è¦è€ƒè™‘æ•°æ®çš„å¢é•¿æ¨¡å¼ï¼Œæ•°æ®çš„è®¿é—®æ¨¡å¼ï¼Œåˆ†ç‰‡å…³è”æ€§é—®é¢˜ï¼Œä»¥åŠåˆ†ç‰‡æ‰©å®¹é—®é¢˜ï¼Œæœ€è¿‘çš„åˆ†ç‰‡ç­–ç•¥ä¸ºèŒƒå›´åˆ†ç‰‡ï¼Œæšä¸¾åˆ†ç‰‡ï¼Œä¸€è‡´æ€§Hashåˆ†ç‰‡ï¼Œè¿™å‡ ç§åˆ†ç‰‡éƒ½æœ‰åˆ©äºæ‰©å®¹ï¼›</p>
<p>(4) å°½é‡ä¸è¦åœ¨ä¸€ä¸ªäº‹åŠ¡ä¸­çš„SQLè·¨è¶Šå¤šä¸ªåˆ†ç‰‡ï¼Œåˆ†å¸ƒå¼äº‹åŠ¡ä¸€ç›´æ˜¯ä¸ªä¸å¥½å¤„ç†çš„é—®é¢˜ï¼›</p>
<p>(5) å¯ä»¥é€šè¿‡æ•°æ®å†—ä½™å’Œè¡¨åˆ†åŒºèµ–é™ä½è·¨åº“Joinçš„å¯èƒ½ã€‚</p>
<h3 data-id="heading-3">ä¼˜åŒ–æ–¹æ¡ˆé€‰æ‹©å’Œå»ºè®®</h3>
<p>ä¸åŒä¸šåŠ¡åœºæ™¯ã€ä¸åŒæ•°æ®é‡è§„æ¨¡ä¸‹ï¼Œåº”é€‰æ‹©ä¸åŒçš„ä¼˜åŒ–æ–¹æ¡ˆï¼Œé¿å…ç›²ç›®é‡‡ç”¨æ¶æ„çº§ä¼˜åŒ–ï¼ˆå¦‚åˆ†åº“åˆ†è¡¨ï¼‰å¢åŠ ç³»ç»Ÿå¤æ‚åº¦ï¼Œåˆ†åº“åˆ†è¡¨çš„å®æ–½å»ºè®®ï¼š</p>
<ul>
<li><strong>æ•°æ®é‡ &lt; 1000ä¸‡</strong>ï¼šä¼˜å…ˆé‡‡ç”¨â€œæŸ¥è¯¢ä¼˜åŒ–+ç´¢å¼•ä¼˜åŒ–+è¡¨ç»“æ„ä¼˜åŒ–â€çš„ä½æˆæœ¬æ–¹æ¡ˆã€‚æ£€æŸ¥å¹¶ä¼˜åŒ–æ…¢æŸ¥è¯¢è¯­å¥ï¼Œè°ƒæ•´ç´¢å¼•è®¾è®¡ï¼Œè§„èŒƒè¡¨ç»“æ„ï¼Œé€šå¸¸èƒ½æ»¡è¶³æ€§èƒ½éœ€æ±‚ï¼›</li>
<li><strong>1000ä¸‡ â‰¤ æ•°æ®é‡ â‰¤ 1äº¿</strong>ï¼šé‡‡ç”¨â€œæ•°æ®å½’æ¡£+åˆ†åŒºè¡¨â€æ–¹æ¡ˆã€‚å°†å†å²æ•°æ®å½’æ¡£ï¼Œå‡å°‘æ´»è·ƒæ•°æ®é‡ï¼›é€šè¿‡åˆ†åŒºè¡¨æ‹†åˆ†æ•°æ®ï¼Œæå‡æŸ¥è¯¢å’Œå†™å…¥æ•ˆç‡ï¼›è‹¥ä¸ºè¯»å¤šå†™å°‘åœºæ™¯ï¼Œå¯æ­é…è¯»å†™åˆ†ç¦»ï¼›</li>
<li><strong>æ•°æ®é‡ â‰¥ 1äº¿æˆ–è€…å¹¶å‘æé«˜</strong>ï¼šé‡‡ç”¨â€œåˆ†åº“åˆ†è¡¨â€æ¶æ„çº§æ–¹æ¡ˆã€‚ç»“åˆä¸šåŠ¡åœºæ™¯é€‰æ‹©åˆé€‚çš„åˆ†ç‰‡é”®å’Œæ‹†åˆ†ç­–ç•¥ï¼Œä½¿ç”¨ä¸­é—´ä»¶ç®€åŒ–å®ç°ï¼›åŒæ—¶æ­é…æ•°æ®å½’æ¡£ã€è¯»å†™åˆ†ç¦»ã€ç¼“å­˜ç­‰æ–¹æ¡ˆï¼Œå…¨æ–¹ä½æå‡ç³»ç»Ÿæ€§èƒ½å’Œå¯ç”¨æ€§ã€‚</li>
</ul>
<h2 data-id="heading-4">ä¸‰ã€å¤§è¡¨ä¼˜åŒ–æ ¸å¿ƒæ€è·¯</h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3b55c19e2d19458394b62c22bd45888f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSVRfc3Vuc2hpbmU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767354999&amp;x-signature=6wrkrg6uEw3UZbEpwqNSJrfN560%3D" alt="image.png" loading="lazy"/></p>
<ul>
<li><strong>è¡¨è®¾è®¡å±‚</strong>ï¼šä»æºå¤´å‡å°‘æ•°æ®å†—ä½™ï¼Œåˆç†è®¾è®¡è¡¨ç»“æ„å’Œç´¢å¼•ï¼Œé¿å…æ•°æ®è¿‡åº¦å †ç§¯ï¼›</li>
<li><strong>æŸ¥è¯¢ä¸ç´¢å¼•å±‚</strong>ï¼šæå‡æŸ¥è¯¢æ•ˆç‡ï¼Œå‡å°‘æ— æ•ˆæ•°æ®æ‰«æï¼Œé™ä½ç´¢å¼•ç»´æŠ¤æˆæœ¬ï¼›</li>
<li><strong>æ¶æ„å’Œè¿ç»´å±‚</strong>ï¼šé€šè¿‡åˆ†åº“åˆ†è¡¨ã€è¯»å†™åˆ†ç¦»ã€æ•°æ®å½’æ¡£ç­‰æ–¹å¼ï¼Œåˆ†æ•£å•è¡¨å‹åŠ›ï¼Œæå‡ç³»ç»Ÿå¹¶å‘èƒ½åŠ›ã€‚</li>
</ul>
<h2 data-id="heading-5">å››ã€è¡¨è®¾è®¡å­—æ®µä¼˜åŒ– (ä»æºå¤´ä¸Šé¿å…å¤§è¡¨é—®é¢˜)</h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d136aa98af10476dac5c56ea277ffd40~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSVRfc3Vuc2hpbmU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767354999&amp;x-signature=RqwvRi31DwllPv8f9WooEHzAHIU%3D" alt="image.png" loading="lazy"/></p>
<ol>
<li>ä¼˜å…ˆä½¿ç”¨å ç”¨ç©ºé—´å°çš„å­—æ®µç±»å‹ã€‚ä¾‹å¦‚ï¼Œå­˜å‚¨ç”¨æˆ·IDæ—¶ï¼Œè‹¥èŒƒå›´å…è®¸ï¼Œä½¿ç”¨INTï¼ˆ4å­—èŠ‚ï¼‰è€ŒéBIGINTï¼ˆ8å­—èŠ‚ï¼‰ï¼›</li>
<li>å­˜å‚¨çŠ¶æ€ã€æ€§åˆ«æ—¶ï¼Œä½¿ç”¨TINYINTï¼ˆ1å­—èŠ‚ï¼‰è€ŒéVARCHARï¼›</li>
<li>ä½¿ç”¨æ•´æ•°æˆ–æšä¸¾ä»£æ›¿å­—ç¬¦ä¸²ç±»å‹ï¼›</li>
<li>å°½é‡ä½¿ç”¨å¤šæ—¶åŒº / å…¨çƒåŒ–çš„TIMESTAMPï¼ˆ4å­—èŠ‚ï¼‰è€ŒéDATETIMEï¼ˆ8å­—èŠ‚ï¼‰ï¼ŒåŒæ—¶TIMESTAMPå…·æœ‰è‡ªåŠ¨èµ‹å€¼ä»¥åŠâ¾ƒè‡ªåŠ¨æ›´æ–°çš„ç‰¹æ€§ï¼›</li>
<li>å•è¡¨ä¸è¦æœ‰å¤ªå¤šå­—æ®µï¼Œå»ºè®®åœ¨30ä¸ªä»¥å†…ï¼›</li>
<li>é¿å…ä½¿ç”¨NULLå­—æ®µï¼Œå¯¹äºéå¿…å¡«å­—æ®µï¼Œè®¾ç½®åˆç†çš„é»˜è®¤å€¼ï¼Œé¿å…å¤§é‡NULLå€¼å­˜å‚¨ã€‚MySQLå¯¹NULLå€¼çš„å­˜å‚¨å’ŒæŸ¥è¯¢æ•ˆç‡è¾ƒä½ï¼Œä¸”NULLå€¼æ— æ³•å‚ä¸ç´¢å¼•ï¼›</li>
<li>é¿å…ä½¿ç”¨å¤§å­—æ®µï¼Œå°½é‡é¿å…åœ¨æ ¸å¿ƒä¸šåŠ¡è¡¨ä¸­ä½¿ç”¨TEXTã€BLOBç­‰å¤§å­—æ®µã€‚è‹¥å¿…é¡»å­˜å‚¨ï¼ˆå¦‚ç”¨æˆ·å¤´åƒã€å¯Œæ–‡æœ¬å†…å®¹ï¼‰ï¼Œå¯å°†å¤§å­—æ®µæ‹†åˆ†åˆ°å•ç‹¬çš„é™„å±è¡¨ä¸­ï¼Œæ ¸å¿ƒè¡¨ä»…å­˜å‚¨å…³è”IDï¼Œå‡å°‘æ ¸å¿ƒè¡¨çš„æ•°æ®è¡Œå¤§å°ï¼Œæå‡æŸ¥è¯¢æ—¶çš„ç£ç›˜I/Oæ•ˆç‡ï¼›</li>
</ol>
<h2 data-id="heading-6">äº”ã€ç´¢å¼•ä¼˜åŒ–</h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0afbc83784fa4cb9b4cd86326ea2994e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSVRfc3Vuc2hpbmU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767354999&amp;x-signature=tKrWxHbLXcGw1X34BxxXwvcTeec%3D" alt="image.png" loading="lazy"/></p>
<ol>
<li><strong>éµå¾ªæœ€å·¦åŒ¹é…åŸåˆ™</strong>ï¼Œåˆ›å»ºè”åˆç´¢å¼•æ—¶ï¼Œå°†æŸ¥è¯¢é¢‘ç‡é«˜ã€åŒºåˆ†åº¦é«˜çš„å­—æ®µæ”¾åœ¨å‰é¢ã€‚ä¾‹å¦‚ï¼Œä¸šåŠ¡ä¸­é¢‘ç¹æŸ¥è¯¢â€œç”¨æˆ·ID+è®¢å•çŠ¶æ€â€ï¼Œåˆ™è”åˆç´¢å¼•åº”ä¸ºï¼ˆuser_id, order_statusï¼‰ï¼Œè€Œéï¼ˆorder_status, user_idï¼‰ï¼›</li>
<li><strong>æ§åˆ¶ç´¢å¼•æ•°é‡</strong>ï¼Œå•è¡¨ç´¢å¼•æ•°é‡å»ºè®®ä¸è¶…è¿‡5ä¸ªï¼Œè¿‡å¤šçš„ç´¢å¼•ä¼šå¯¼è‡´INSERTã€UPDATEã€DELETEæ“ä½œæ—¶éœ€è¦åŒæ­¥ç»´æŠ¤å¤šä¸ªç´¢å¼•ï¼Œä¸¥é‡é™ä½å†™å…¥æ€§èƒ½ã€‚å¯¹äºå¤§è¡¨ï¼Œæ¯å¢åŠ ä¸€ä¸ªç´¢å¼•ï¼Œå†™å…¥è€—æ—¶å¯èƒ½ä¼šæ˜¾è‘—å¢åŠ ï¼›</li>
<li><strong>ä½¿ç”¨è¦†ç›–ç´¢å¼•</strong>ï¼Œé’ˆå¯¹é¢‘ç¹çš„æŸ¥è¯¢åœºæ™¯ï¼Œåˆ›å»ºè¦†ç›–ç´¢å¼•ï¼Œé¿å…å›è¡¨æŸ¥è¯¢ã€‚ä¾‹å¦‚ï¼ŒæŸ¥è¯¢â€œç”¨æˆ·IDã€è®¢å•é‡‘é¢ã€è®¢å•æ—¶é—´â€æ—¶ï¼Œåˆ›å»ºè”åˆç´¢å¼•ï¼ˆuser_id, order_amount, order_timeï¼‰ï¼ŒæŸ¥è¯¢æ—¶å¯ç›´æ¥ä»ç´¢å¼•ä¸­è·å–æ‰€éœ€æ•°æ®ï¼Œæ— éœ€è®¿é—®ä¸»é”®ç´¢å¼•ï¼›</li>
<li><strong>é¿å…æ— æ•ˆç´¢å¼•</strong>ï¼Œåˆ é™¤æœªä½¿ç”¨æˆ–é‡å¤çš„ç´¢å¼•ã€‚å¯é€šè¿‡MySQLçš„æ…¢æŸ¥è¯¢æ—¥å¿—ã€sys.schema_unused_indexesè§†å›¾ï¼ˆMySQL 8.0+ï¼‰ç»Ÿè®¡ç´¢å¼•ä½¿ç”¨æƒ…å†µï¼Œæ¸…ç†æ— æ•ˆç´¢å¼•ï¼›é¿å…åˆ›å»ºä¸ä¸»é”®ç´¢å¼•é‡å¤çš„ç´¢å¼•ï¼ˆå¦‚ä¸»é”®ä¸ºidï¼Œå†åˆ›å»ºç´¢å¼•ï¼ˆidï¼‰ï¼‰ï¼›</li>
<li><strong>è€ƒè™‘åˆ†åŒºç´¢å¼•</strong>ï¼Œå¯¹äºåˆ†åŒºè¡¨ï¼Œç´¢å¼•ä¼šæŒ‰åˆ†åŒºåˆ›å»ºï¼Œæ¯ä¸ªåˆ†åŒºçš„ç´¢å¼•ä½“ç§¯æ›´å°ï¼ŒæŸ¥è¯¢æ—¶åªéœ€æ‰«æå¯¹åº”åˆ†åŒºçš„ç´¢å¼•ï¼Œæå‡æŸ¥è¯¢æ•ˆç‡ã€‚</li>
<li><strong>é¿å…æ²¡å¿…è¦ç´¢å¼•</strong>ï¼Œå€¼åˆ†å¸ƒå¾ˆç¨€å°‘çš„å­—æ®µä¸é€‚åˆå»ºç´¢å¼•ï¼Œä¾‹å¦‚"æ€§åˆ«"è¿™ç§åªæœ‰ä¸¤ä¸‰ä¸ªå€¼çš„å­—æ®µï¼›</li>
<li><strong>åˆç†åˆ›å»ºè”åˆç´¢å¼•ï¼ˆé¿å…å†—ä½™</strong>ï¼‰ï¼Œå¦‚(a,b,c) ç›¸å½“äº (a) ã€(a,b) ã€(a,b,c)ï¼›</li>
<li><strong>æ ¹æ®æŸ¥è¯¢æœ‰é’ˆå¯¹æ€§åˆ›å»ºç´¢å¼•</strong>ï¼Œè€ƒè™‘åœ¨WHEREå’ŒORDER BYå‘½ä»¤ä¸Šæ¶‰åŠçš„åˆ—å»ºç«‹ç´¢å¼•ï¼Œå¯æ ¹æ®EXPLAINæ¥æŸ¥çœ‹æ˜¯å¦ç”¨äº†ç´¢å¼•è¿˜æ˜¯å…¨è¡¨æ‰«æï¼›</li>
</ol>
<h2 data-id="heading-7">å…­ã€æŸ¥è¯¢SQLä¼˜åŒ–</h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5d605d3311d5405c9e0d2b4f4d0af175~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSVRfc3Vuc2hpbmU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767354999&amp;x-signature=%2FpU9I61Lui847swqvXbTKZqAjmI%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-8">â‘ é¿å…å…¨è¡¨æ‰«æ</h3>
<ul>
<li><strong>ç¡®ä¿æŸ¥è¯¢èµ°ç´¢å¼•</strong>ï¼šé¿å…åœ¨æŸ¥è¯¢æ¡ä»¶ä¸­å¯¹ç´¢å¼•å­—æ®µè¿›è¡Œå‡½æ•°æ“ä½œï¼ˆå¦‚SUBSTRã€DATE_FORMATï¼‰ã€éšå¼ç±»å‹è½¬æ¢ï¼ˆå¦‚å°†VARCHARç±»å‹çš„å­—æ®µä¸INTå€¼æ¯”è¾ƒï¼‰ï¼Œè¿™äº›æ“ä½œä¼šå¯¼è‡´ç´¢å¼•å¤±æ•ˆï¼Œè§¦å‘å…¨è¡¨æ‰«æã€‚ä¾‹å¦‚ï¼Œé¿å…â€œWHERE SUBSTR(user_phone, 1, 3) = '138'â€ï¼Œå¯æ”¹ä¸ºâ€œWHERE user_phone LIKE '138%'â€ï¼ˆå‰ææ˜¯user_phoneå­—æ®µæœ‰ç´¢å¼•ï¼‰ï¼›</li>
<li>**é¿å…ä½¿ç”¨æ¨¡ç³ŠæŸ¥è¯¢å‰ç¼€%ï¼š<strong>æ¨¡ç³ŠæŸ¥è¯¢â€œLIKE '%xxx'â€æˆ–â€œLIKE '%xxx%'â€ä¼šå¯¼è‡´ç´¢å¼•å¤±æ•ˆï¼Œè§¦å‘å…¨è¡¨æ‰«æã€‚è‹¥ä¸šåŠ¡éœ€æ¨¡ç³ŠæŸ¥è¯¢ï¼Œå¯è€ƒè™‘ä½¿</strong>ç”¨Elasticsearchç­‰æœç´¢å¼•æ“æ›¿ä»£ï¼Œæˆ–é€šè¿‡ä¸šåŠ¡è°ƒæ•´æ”¹ä¸ºâ€œLIKE 'xxx%'â€ï¼›</li>
<li>**é¿å…ä½¿ç”¨ORæ¡ä»¶ï¼ˆæ— ç´¢å¼•æ—¶ï¼‰ï¼šå½“ORæ¡ä»¶ä¸­çš„å­—æ®µæ— ç´¢å¼•æ—¶ï¼Œä¼šè§¦å‘å…¨è¡¨æ‰«æã€‚å¯å°†ORæ”¹ä¸ºUNION ALLï¼ˆè‹¥ç»“æœæ— é‡å¤ï¼‰ï¼Œä¸”ç¡®ä¿æ¯ä¸ªæŸ¥è¯¢åˆ†æ”¯éƒ½èµ°ç´¢å¼•ã€‚ä¾‹å¦‚ï¼Œâ€œWHERE user_id = 1 OR order_id = 100â€å¯æ”¹ä¸ºâ€œ(SELECT * FROM order WHERE user_id = 1) UNION ALL (SELECT * FROM order WHERE order_id = 100)â€ã€‚</li>
</ul>
<h3 data-id="heading-9">â‘¡ä¼˜åŒ–æŸ¥è¯¢è¯­å¥ç»“æ„</h3>
<ul>
<li><strong>åªæŸ¥è¯¢æ‰€éœ€å­—æ®µ</strong>ï¼šé¿å…ä½¿ç”¨SELECT *ï¼ŒåªæŸ¥è¯¢ä¸šåŠ¡éœ€è¦çš„å­—æ®µã€‚ä¸€æ–¹é¢å‡å°‘æ•°æ®ä¼ è¾“é‡ï¼Œå¦ä¸€æ–¹é¢è‹¥æŸ¥è¯¢å­—æ®µå¯é€šè¿‡è¦†ç›–ç´¢å¼•è·å–ï¼Œå¯é¿å…å›</li>
<li><strong>æ§åˆ¶JOINè¡¨æ•°é‡</strong>ï¼šJOINè¡¨æ•°é‡è¶Šå¤šï¼ŒæŸ¥è¯¢å¤æ‚åº¦è¶Šé«˜ï¼Œæ€§èƒ½è¶Šå·®ã€‚å¤§è¡¨æŸ¥è¯¢ä¸­ï¼ŒJOINè¡¨æ•°é‡å»ºè®®ä¸è¶…è¿‡3ä¸ªã€‚å¯¹äºå¤æ‚æŸ¥è¯¢ï¼Œå¯é€šè¿‡åˆ†æ­¥éª¤æŸ¥è¯¢ã€ä¸­é—´è¡¨å­˜å‚¨ç»“æœç­‰æ–¹å¼ç®€åŒ–ï¼›</li>
<li><strong>é¿å…ä½¿ç”¨å­æŸ¥è¯¢ï¼ˆå°¤å…¶æ˜¯ç›¸å…³å­æŸ¥è¯¢ï¼‰</strong>ï¼šç›¸å…³å­æŸ¥è¯¢ä¼šå¯¼è‡´MySQLé‡å¤æ‰§è¡Œå­æŸ¥è¯¢è¯­å¥ï¼Œæ•ˆç‡æä½ã€‚å¯å°†å­æŸ¥è¯¢æ”¹ä¸ºJOINæŸ¥è¯¢ï¼Œæˆ–é€šè¿‡ä¸´æ—¶è¡¨å­˜å‚¨å­æŸ¥è¯¢ç»“æœï¼›</li>
<li><strong>åˆç†ä½¿ç”¨LIMIT</strong>ï¼šå¯¹äºåˆ†é¡µæŸ¥è¯¢ï¼Œä½¿ç”¨LIMITæ§åˆ¶è¿”å›ç»“æœæ•°é‡ã€‚ä½†éœ€æ³¨æ„ï¼Œå½“åˆ†é¡µé¡µç è¾ƒå¤§æ—¶ï¼ˆå¦‚LIMIT 100000, 20ï¼‰ï¼ŒMySQLä¼šæ‰«æå‰100020æ¡æ•°æ®å†ä¸¢å¼ƒå‰100000æ¡ï¼Œæ•ˆç‡è¾ƒä½ã€‚å¯é€šè¿‡â€œç´¢å¼•+ä¸»é”®â€ä¼˜åŒ–ï¼Œä¾‹å¦‚â€œWHERE id &gt; 100000 LIMIT 20â€ï¼ˆå‰ææ˜¯idä¸ºè‡ªå¢ä¸»é”®ï¼Œä¸”æŸ¥è¯¢æ¡ä»¶å¯åŸºäºidè¿‡æ»¤ï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-10">â‘¢ä¼˜åŒ–äº‹åŠ¡å’Œé”</h3>
<ul>
<li><strong>æ§åˆ¶äº‹åŠ¡ç²’åº¦</strong>ï¼šé¿å…é•¿äº‹åŠ¡ï¼Œé•¿äº‹åŠ¡ä¼šå ç”¨é”èµ„æºï¼Œå¯¼è‡´å…¶ä»–æ“ä½œå‡ºç°é”ç­‰å¾…ã€‚å¤§è¡¨æ“ä½œä¸­ï¼Œå°½é‡å°†äº‹åŠ¡æ‹†åˆ†ä¸ºçŸ­äº‹åŠ¡ï¼ŒåªåŒ…å«å¿…è¦çš„SQLè¯­å¥ï¼›</li>
<li><strong>ä½¿ç”¨åˆç†çš„éš”ç¦»çº§åˆ«</strong>ï¼šæ ¹æ®ä¸šåŠ¡éœ€æ±‚é€‰æ‹©æœ€ä½çš„éš”ç¦»çº§åˆ«ã€‚ä¾‹å¦‚ï¼Œè‹¥ä¸šåŠ¡å…è®¸è„è¯»ï¼Œå¯ä½¿ç”¨READ UNCOMMITTEDï¼›å¤§å¤šæ•°ä¸šåŠ¡å¯ä½¿ç”¨READ COMMITTEDï¼Œé¿å…REPEATABLE READå¸¦æ¥çš„é—´éš™é”é—®é¢˜ï¼Œå‡å°‘é”ç­‰å¾…ï¼›</li>
<li><strong>é¿å…è¡Œé”å‡çº§ä¸ºè¡¨é”</strong>ï¼šMySQLä¸­ï¼Œè‹¥æŸ¥è¯¢æ¡ä»¶æœªèµ°ç´¢å¼•ï¼Œä¼šè§¦å‘å…¨è¡¨æ‰«æï¼Œæ­¤æ—¶è¡Œé”ä¼šå‡çº§ä¸ºè¡¨é”ï¼Œå¯¼è‡´å…¶ä»–æ“ä½œæ— æ³•å¹¶å‘æ‰§è¡Œã€‚éœ€ç¡®ä¿æ›´æ–°ã€åˆ é™¤æ“ä½œçš„æŸ¥è¯¢æ¡ä»¶èµ°ç´¢å¼•ï¼Œé¿å…è¡¨é”ã€‚</li>
</ul>
<h3 data-id="heading-11">â‘£å…¶ä»–</h3>
<ul>
<li>ä¸åšåˆ—è¿ç®—ï¼šSELECT id WHERE age + 1 = 10ï¼Œä»»ä½•å¯¹åˆ—çš„æ“ä½œéƒ½å°†å¯¼è‡´è¡¨æ‰«æï¼Œå®ƒåŒ…æ‹¬æ•°æ®åº“æ•™ç¨‹å‡½æ•°ã€è®¡ç®—è¡¨è¾¾å¼ç­‰ç­‰ï¼ŒæŸ¥è¯¢æ—¶è¦å°½å¯èƒ½å°†æ“ä½œç§»è‡³ç­‰å·å³è¾¹ï¼›</li>
<li>SQLè¯­å¥å°½å¯èƒ½ç®€å•ï¼šä¸€æ¡SQLåªèƒ½åœ¨ä¸€ä¸ªcpuè¿ç®—ï¼›å¤§è¯­å¥æ‹†å°è¯­å¥ï¼Œå‡å°‘é”æ—¶é—´ï¼›ä¸€æ¡å¤§SQLå¯ä»¥å µæ­»æ•´ä¸ªåº“ï¼›</li>
<li>ORæ”¹å†™æˆINï¼šORçš„æ•ˆç‡æ˜¯nçº§åˆ«ï¼ŒINçš„æ•ˆç‡æ˜¯log(n)çº§åˆ«ï¼Œinçš„ä¸ªæ•°å»ºè®®æ§åˆ¶åœ¨200ä»¥å†…ï¼›</li>
<li>ä¸ç”¨å‡½æ•°å’Œè§¦å‘å™¨ï¼Œåœ¨åº”ç”¨ç¨‹åºå®ç°ï¼›</li>
<li>æ¨¡ç³ŠæŸ¥è¯¢é¿å…å·¦æ¨¡ç³Š%xxxå¼æŸ¥è¯¢ï¼›</li>
<li>ä½¿ç”¨åŒç±»å‹è¿›è¡Œæ¯”è¾ƒï¼Œæ¯”å¦‚ç”¨'123'å’Œ'123'æ¯”ï¼Œ123å’Œ123æ¯”ï¼›</li>
<li>å°½é‡é¿å…åœ¨WHEREå­å¥ä¸­ä½¿ç”¨!=æˆ–&lt;&gt;æ“ä½œç¬¦ï¼Œå¦åˆ™å°†å¼•æ“æ”¾å¼ƒä½¿ç”¨ç´¢å¼•è€Œè¿›è¡Œå…¨è¡¨æ‰«æï¼›</li>
<li>å¯¹äºè¿ç»­æ•°å€¼ï¼Œä½¿ç”¨BETWEENä¸ç”¨INï¼šSELECT id FROM t WHERE num BETWEEN 1 AND 5ï¼›</li>
<li>åˆ—è¡¨æ•°æ®ä¸è¦æ‹¿å…¨è¡¨ï¼Œè¦ä½¿ç”¨LIMITæ¥åˆ†é¡µï¼Œæ¯é¡µæ•°é‡ä¹Ÿä¸è¦å¤ªå¤§ã€‚</li>
</ul>
<h2 data-id="heading-12">ä¸ƒã€æ•°æ®å½’æ¡£(å‡å°‘æ´»è·ƒæ•°æ®é‡)</h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/79c2e99d0edb402c89f89e19c933feca~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSVRfc3Vuc2hpbmU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767354999&amp;x-signature=aSWXigt4xEoEE8PvJ4axdZHfWTE%3D" alt="image.png" loading="lazy"/></p>
<p>æ•°æ®å½’æ¡£æ˜¯å°†å†å²æ•°æ®è¿ç§»åˆ°å•ç‹¬çš„å­˜å‚¨ä»‹è´¨æˆ–è¡¨ä¸­ï¼Œå‡å°‘æ ¸å¿ƒè¡¨çš„æ´»è·ƒæ•°æ®é‡ã€‚ å¤§è¡¨ä¸­å¾€å¾€å­˜åœ¨å¤§é‡å†å²æ•°æ®ï¼ˆå¦‚3ä¸ªæœˆå‰çš„è®¢å•ã€1å¹´å‰çš„æ—¥å¿—ï¼‰ï¼Œè¿™äº›æ•°æ®è®¿é—®é¢‘ç‡æä½ï¼Œä½†å ç”¨å¤§é‡å­˜å‚¨ç©ºé—´ï¼Œå½±å“æ´»è·ƒæ•°æ®çš„æŸ¥è¯¢å’Œå†™å…¥æ€§èƒ½ã€‚</p>
<ul>
<li>
<p>ç¡®å®šå½’æ¡£æ¡ä»¶ï¼šæ ¹æ®ä¸šåŠ¡åœºæ™¯ç¡®å®šå½’æ¡£çš„æ—¶é—´èŒƒå›´æˆ–æ•°æ®çŠ¶æ€ã€‚ä¾‹å¦‚ï¼Œè®¢å•è¡¨ä¸­å½’æ¡£3ä¸ªæœˆå‰çš„å·²å®Œæˆè®¢å•ï¼›æ—¥å¿—è¡¨ä¸­å½’æ¡£1å¹´å‰çš„æ‰€æœ‰æ—¥å¿—ï¼›</p>
</li>
<li>
<p><strong>é€‰æ‹©å½’æ¡£ç›®æ ‡</strong></p>
<ul>
<li>åŒåº“ä¸åŒè¡¨ï¼šå°†å†å²æ•°æ®è¿ç§»åˆ°åŒåº“çš„å½’æ¡£è¡¨ä¸­ï¼ˆå¦‚orderè¡¨å½’æ¡£åˆ°order_hist_202401ï¼‰ï¼Œä¾¿äºåç»­æŸ¥è¯¢å†å²æ•°æ®æ—¶ç›´æ¥å…³è”ï¼›</li>
<li>å¼‚åº“å­˜å‚¨ï¼šå°†å†å²æ•°æ®è¿ç§»åˆ°ç‹¬ç«‹çš„å½’æ¡£æ•°æ®åº“ï¼ˆå¦‚MySQLä»åº“ã€Hiveã€ClickHouseç­‰ï¼‰ï¼Œå‡å°‘å¯¹æ ¸å¿ƒåº“çš„èµ„æºå ç”¨ï¼›å¯¹äºæµ·é‡å†å²æ•°æ®ï¼Œå¯ä½¿ç”¨ä½æˆæœ¬çš„å­˜å‚¨ä»‹è´¨ï¼ˆå¦‚å¯¹è±¡å­˜å‚¨ï¼‰ï¼›</li>
<li>å†·çƒ­æ•°æ®åˆ†ç¦»ï¼šæ ¸å¿ƒè¡¨åªä¿ç•™çƒ­ç‚¹æ•°æ®ï¼ˆå¦‚è¿‘1ä¸ªæœˆï¼‰ï¼Œå†å²æ•°æ®è¿ç§»åˆ°å†·å­˜å‚¨ï¼ŒæŸ¥è¯¢å†å²æ•°æ®æ—¶é€šè¿‡ä¸“é—¨çš„æœåŠ¡æˆ–æ¥å£è®¿é—®ã€‚</li>
</ul>
</li>
<li>
<p><strong>å½’æ¡£æ‰§è¡Œæ–¹å¼</strong></p>
<ul>
<li>å®šæ—¶ä»»åŠ¡å½’æ¡£ï¼šé€šè¿‡xxljobã€crontabã€Airflowç­‰å·¥å…·å®šæ—¶æ‰§è¡Œå½’æ¡£è„šæœ¬ï¼Œé‡‡ç”¨â€œåˆ†é¡µæŸ¥è¯¢+æ‰¹é‡æ’å…¥+æ‰¹é‡åˆ é™¤â€çš„æ–¹å¼ï¼Œé¿å…ä¸€æ¬¡æ€§æ“ä½œå¤§é‡æ•°æ®å¯¼è‡´é”ç­‰å¾…æˆ–äº‹åŠ¡è¶…æ—¶ï¼›</li>
<li>åœ¨çº¿å½’æ¡£å·¥å…·ï¼šä½¿ç”¨pt-archiverï¼ˆPercona Toolkitï¼‰ç­‰ä¸“ä¸šå·¥å…·ï¼Œæ”¯æŒå¢é‡å½’æ¡£ã€å¹¶è¡Œå½’æ¡£ï¼Œä¸”å¯¹ä¸šåŠ¡å½±å“è¾ƒå°ã€‚ä¾‹å¦‚ï¼Œpt-archiverå¯é€šè¿‡--limitå‚æ•°æ§åˆ¶æ¯æ¬¡å½’æ¡£çš„è¡Œæ•°ï¼Œ--sleepå‚æ•°æ§åˆ¶å½’æ¡£é—´éš”ï¼Œå‡å°‘å¯¹æ ¸å¿ƒè¡¨çš„æ€§èƒ½å½±å“ï¼›</li>
</ul>
</li>
</ul>
<h2 data-id="heading-13">å…«ã€åˆ†åŒºè¡¨è®¾è®¡ ï¼ˆæ‹†åˆ†æ•°æ®åˆ°å¤šä¸ªç‰©ç†åˆ†åŒºï¼‰</h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/842fb4a2a8f548d78a5514c502f356ea~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSVRfc3Vuc2hpbmU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767354999&amp;x-signature=4pCeYmxE3raYMUCwJWkCHj6xDYw%3D" alt="image.png" loading="lazy"/></p>
<p>åˆ†åŒºè¡¨æ˜¯MySQLæä¾›çš„ä¸€ç§è¡¨çº§ä¼˜åŒ–æ–¹æ¡ˆï¼Œå°†ä¸€ä¸ªå¤§è¡¨åœ¨é€»è¾‘ä¸Šæ‹†åˆ†ä¸ºå¤šä¸ªå°è¡¨ï¼Œç‰©ç†ä¸Šå­˜å‚¨ä¸ºå¤šä¸ªç‹¬ç«‹çš„æ–‡ä»¶ã€‚æŸ¥è¯¢æ—¶ï¼ŒMySQLåªéœ€æ‰«æå¯¹åº”çš„åˆ†åŒºï¼Œæ— éœ€æ‰«æå…¨è¡¨ï¼Œä»è€Œæå‡æŸ¥è¯¢æ•ˆç‡ï¼›åŒæ—¶ï¼Œåˆ†åŒºè¡¨ä¾¿äºæ•°æ®å½’æ¡£ï¼ˆç›´æ¥åˆ é™¤æ•´ä¸ªåˆ†åŒºï¼‰ã€å¤‡ä»½æ¢å¤ï¼ˆå•ç‹¬å¤‡ä»½æŸä¸ªåˆ†åŒºï¼‰ã€‚</p>
<ul>
<li>
<p><strong>åˆ†åŒºç±»å‹é€‰æ‹©</strong></p>
<ul>
<li>MySQLæ”¯æŒå¤šç§åˆ†åŒºç±»å‹ï¼Œéœ€æ ¹æ®ä¸šåŠ¡åœºæ™¯é€‰æ‹©ï¼š
<ul>
<li>èŒƒå›´åˆ†åŒºï¼ˆRANGE Partitionï¼‰ï¼šæŒ‰è¿ç»­çš„èŒƒå›´åˆ’åˆ†åˆ†åŒºï¼Œé€‚ç”¨äºæŒ‰æ—¶é—´ã€IDç­‰æœ‰åºå­—æ®µæ‹†åˆ†çš„åœºæ™¯ï¼ˆå¦‚è®¢å•è¡¨ã€æ—¥å¿—è¡¨ï¼‰ã€‚ä¾‹å¦‚ï¼Œè®¢å•è¡¨æŒ‰åˆ›å»ºæ—¶é—´åˆ†åŒºï¼Œæ¯ä¸ªåˆ†åŒºå­˜å‚¨1ä¸ªæœˆçš„æ•°æ®ï¼›ç”¨æˆ·è¡¨æŒ‰ç”¨æˆ·IDåˆ†åŒºï¼Œæ¯ä¸ªåˆ†åŒºå­˜å‚¨100ä¸‡ç”¨æˆ·çš„æ•°æ®ã€‚èŒƒå›´åˆ†åŒºæ˜¯æœ€å¸¸ç”¨çš„åˆ†åŒºç±»å‹ï¼Œä¾¿äºæ•°æ®å½’æ¡£ï¼ˆç›´æ¥åˆ é™¤æ—§åˆ†åŒºï¼‰ï¼›</li>
<li>åˆ—è¡¨åˆ†åŒºï¼ˆList Partitionï¼‰ï¼šæŒ‰ç¦»æ•£çš„å€¼åˆ—è¡¨åˆ’åˆ†åˆ†åŒºï¼Œé€‚ç”¨äºæ•°æ®çŠ¶æ€å›ºå®šçš„åœºæ™¯ï¼ˆå¦‚è®¢å•çŠ¶æ€ã€ç”¨æˆ·æ‰€å±åœ°åŒºï¼‰ã€‚ä¾‹å¦‚ï¼Œè®¢å•è¡¨æŒ‰è®¢å•çŠ¶æ€åˆ†åŒºï¼Œåˆ†ä¸ºâ€œå¾…æ”¯ä»˜â€â€œå·²å®Œæˆâ€â€œå·²å–æ¶ˆâ€ä¸‰ä¸ªåˆ†åŒºï¼Œ æ ¸é”€è¡¨å¯ä»¥æŒ‰æ ¸é”€çŠ¶æ€åˆ†åŒºï¼Œåˆ†ä¸ºâ€œæœªæ ¸é”€â€ã€â€œå·²æ ¸é”€â€ã€â€œå·²é€€æ¬¾â€ï¼›</li>
<li>å“ˆå¸Œåˆ†åŒºï¼ˆHash Partitionï¼‰ï¼šæŒ‰å­—æ®µçš„å“ˆå¸Œå€¼åˆ’åˆ†åˆ†åŒºï¼Œé€‚ç”¨äºæ•°æ®å‡åŒ€åˆ†å¸ƒã€æ— æ˜æ˜¾èŒƒå›´æˆ–åˆ—è¡¨ç‰¹å¾çš„åœºæ™¯ã€‚ä¾‹å¦‚ï¼Œå°†ç”¨æˆ·è¡¨æŒ‰ç”¨æˆ·IDå“ˆå¸Œåˆ†åŒºï¼Œç¡®ä¿æ¯ä¸ªåˆ†åŒºçš„æ•°æ®é‡ç›¸å¯¹å‡è¡¡ï¼›ä½†å“ˆå¸Œåˆ†åŒºä¸ä¾¿äºæ•°æ®å½’æ¡£ï¼›</li>
<li>å¤åˆåˆ†å¸ƒï¼ˆComposite Partitionï¼‰ï¼šç»“åˆä¸¤ç§åˆ†åŒºç±»å‹ï¼ˆå¦‚RANGE-HASHã€RANGE-LISTï¼‰ï¼Œé€‚ç”¨äºå¤æ‚åœºæ™¯ã€‚ä¾‹å¦‚ï¼Œè®¢å•è¡¨å…ˆæŒ‰åˆ›å»ºæ—¶é—´èŒƒå›´åˆ†åŒºï¼Œæ¯ä¸ªèŒƒå›´åˆ†åŒºå†…å†æŒ‰è®¢å•çŠ¶æ€åˆ—è¡¨åˆ†åŒºã€‚</li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>åˆ†åŒºè¡¨ä½¿ç”¨æ³¨æ„äº‹é¡¹</strong></p>
<ul>
<li>åˆ†åŒºé”®é€‰æ‹©ï¼šåˆ†åŒºé”®éœ€ä¸æŸ¥è¯¢æ¡ä»¶é«˜åº¦ç›¸å…³ï¼Œç¡®ä¿æŸ¥è¯¢æ—¶èƒ½ç²¾å‡†å®šä½åˆ°å°‘æ•°å‡ ä¸ªåˆ†åŒºï¼ˆå³â€œåˆ†åŒºè£å‰ªâ€ï¼‰ã€‚ä¾‹å¦‚ï¼Œè‹¥è®¢å•è¡¨çš„æŸ¥è¯¢å¤šåŸºäºåˆ›å»ºæ—¶é—´ï¼Œåˆ™åˆ†åŒºé”®é€‰æ‹©åˆ›å»ºæ—¶é—´ï¼›è‹¥æŸ¥è¯¢å¤šåŸºäºç”¨æˆ·IDï¼Œåˆ™åˆ†åŒºé”®é€‰æ‹©ç”¨æˆ·IDï¼›</li>
<li>æ§åˆ¶åˆ†åŒºæ•°é‡ï¼šåˆ†åŒºæ•°é‡å¹¶éè¶Šå¤šè¶Šå¥½ï¼Œè¿‡å¤šçš„åˆ†åŒºä¼šå¢åŠ MySQLçš„å…ƒæ•°æ®ç®¡ç†æˆæœ¬ï¼Œå¯¼è‡´æŸ¥è¯¢æ—¶åˆ†åŒºè£å‰ªæ•ˆç‡ä¸‹é™ã€‚ä¸€èˆ¬å»ºè®®å•è¡¨åˆ†åŒºæ•°é‡ä¸è¶…è¿‡100ä¸ªï¼›</li>
<li>é¿å…è·¨åˆ†åŒºæŸ¥è¯¢ï¼šè·¨åˆ†åŒºæŸ¥è¯¢ï¼ˆå¦‚æŸ¥è¯¢å¤šä¸ªåˆ†åŒºçš„æ•°æ®ï¼‰ä¼šå¯¼è‡´MySQLæ‰«æå¤šä¸ªåˆ†åŒºï¼Œæ€§èƒ½å¯èƒ½ä¸éåˆ†åŒºè¡¨ç›¸å½“ç”šè‡³æ›´å·®ã€‚éœ€é€šè¿‡ä¸šåŠ¡ä¼˜åŒ–é¿å…è·¨åˆ†åŒºæŸ¥è¯¢ï¼Œæˆ–é€šè¿‡ç´¢å¼•ä¼˜åŒ–æå‡è·¨åˆ†åŒºæŸ¥è¯¢æ•ˆç‡ï¼›</li>
<li>åˆ†åŒºè¡¨é™åˆ¶ï¼šMySQL 5.7åŠä»¥ä¸‹ç‰ˆæœ¬ä¸­ï¼Œåˆ†åŒºè¡¨ä¸æ”¯æŒå¤–é”®ï¼›æŸäº›å­˜å‚¨å¼•æ“ï¼ˆå¦‚MyISAMï¼‰å¯¹åˆ†åŒºè¡¨çš„æ”¯æŒæœ‰é™ï¼Œå»ºè®®ä½¿ç”¨InnoDBå¼•æ“ï¼›åˆ†åŒºè¡¨çš„ç´¢å¼•æ˜¯æŒ‰åˆ†åŒºåˆ›å»ºçš„ï¼Œéœ€ç¡®ä¿æ¯ä¸ªåˆ†åŒºçš„ç´¢å¼•è®¾è®¡åˆç†ã€‚</li>
</ul>
</li>
</ul>
<h2 data-id="heading-14">ä¹ã€åˆ†åº“åˆ†è¡¨ (æ¶æ„çº§æ‹†åˆ†çªç ´å•åº“å•è¡¨é™åˆ¶)</h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f93e09c6261f440cb107a7cd5cf42968~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSVRfc3Vuc2hpbmU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767354999&amp;x-signature=Xmr9Vg8C5JYPppyoOE2md5X36TE%3D" alt="image.png" loading="lazy"/></p>
<ul>
<li>
<p><strong>æ ¸å¿ƒæ¦‚å¿µ</strong></p>
<ul>
<li>æ°´å¹³æ‹†åˆ†ï¼šå°†åŒä¸€ä¸ªè¡¨çš„æ•°æ®æŒ‰è¡Œæ‹†åˆ†åˆ°å¤šä¸ªè¡¨ä¸­ï¼Œæ¯ä¸ªè¡¨çš„ç»“æ„ç›¸åŒã€‚ä¾‹å¦‚ï¼Œå°†è®¢å•è¡¨æŒ‰ç”¨æˆ·IDå“ˆå¸Œæ‹†åˆ†åˆ°10ä¸ªè¡¨ä¸­ï¼Œæ¯ä¸ªè¡¨å­˜å‚¨10%çš„ç”¨æˆ·è®¢å•æ•°æ®ã€‚æ°´å¹³æ‹†åˆ†æ˜¯åˆ†åº“åˆ†è¡¨çš„ä¸»æµæ–¹å¼ï¼Œèƒ½æœ‰æ•ˆçªç ´å•è¡¨æ•°æ®é‡é™åˆ¶ï¼›</li>
<li>å‚ç›´æ‹†åˆ†ï¼šå°†åŒä¸€ä¸ªè¡¨çš„æ•°æ®æŒ‰åˆ—æ‹†åˆ†åˆ°å¤šä¸ªè¡¨ä¸­ï¼Œæ¯ä¸ªè¡¨å­˜å‚¨éƒ¨åˆ†å­—æ®µã€‚ä¾‹å¦‚ï¼Œå°†ç”¨æˆ·è¡¨æ‹†åˆ†ä¸ºç”¨æˆ·åŸºæœ¬ä¿¡æ¯è¡¨ï¼ˆå­˜å‚¨IDã€å§“åã€æ‰‹æœºå·ç­‰æ ¸å¿ƒå­—æ®µï¼‰å’Œç”¨æˆ·è¯¦æƒ…è¡¨ï¼ˆå­˜å‚¨åœ°å€ã€ç®€ä»‹ç­‰å¤§å­—æ®µï¼‰ï¼Œæ ¸å¿ƒè¡¨æ•°æ®é‡å°ï¼ŒæŸ¥è¯¢æ•ˆç‡é«˜ï¼›</li>
<li>åˆ†åº“ï¼šå°†æ‹†åˆ†åçš„è¡¨åˆ†å¸ƒåˆ°å¤šä¸ªæ•°æ®åº“ä¸­ï¼Œé¿å…å•åº“çš„CPUã€å†…å­˜ã€ç£ç›˜I/Oèµ„æºç“¶é¢ˆã€‚ä¾‹å¦‚ï¼Œå°†10ä¸ªè®¢å•åˆ†è¡¨åˆ†å¸ƒåˆ°2ä¸ªæ•°æ®åº“ä¸­ï¼Œæ¯ä¸ªæ•°æ®åº“å­˜å‚¨5ä¸ªåˆ†è¡¨ï¼›</li>
<li>åˆ†ç‰‡é”®ï¼šç”¨äºæ‹†åˆ†æ•°æ®çš„å­—æ®µï¼ˆå¦‚ç”¨æˆ·IDã€è®¢å•IDã€åˆ›å»ºæ—¶é—´ï¼‰ï¼Œåˆ†ç‰‡é”®çš„é€‰æ‹©ç›´æ¥å½±å“åˆ†åº“åˆ†è¡¨çš„æ•ˆæœï¼Œéœ€ç¡®ä¿æ•°æ®å‡åŒ€åˆ†å¸ƒã€æŸ¥è¯¢èƒ½ç²¾å‡†å®šä½åˆ†ç‰‡ã€‚</li>
</ul>
</li>
<li>
<p><strong>åˆ†åº“åˆ†è¡¨ç­–ç•¥</strong></p>
</li>
<li>
<p>æ°´å¹³æ‹†åˆ†</p>
<ul>
<li>èŒƒå›´æ‹†åˆ†ï¼šæŒ‰åˆ†ç‰‡é”®çš„èŒƒå›´æ‹†åˆ†æ•°æ®ï¼Œå¦‚æŒ‰è®¢å•åˆ›å»ºæ—¶é—´æ‹†åˆ†ï¼Œæ¯ä¸ªåˆ†ç‰‡å­˜å‚¨1ä¸ªæœˆçš„æ•°æ®ï¼›æŒ‰ç”¨æˆ·IDæ‹†åˆ†ï¼Œæ¯ä¸ªåˆ†ç‰‡å­˜å‚¨100ä¸‡ç”¨æˆ·çš„æ•°æ®ã€‚èŒƒå›´æ‹†åˆ†ä¾¿äºæ•°æ®å½’æ¡£ï¼ˆç›´æ¥åˆ é™¤æ—§åˆ†ç‰‡ï¼‰ï¼Œä½†å¯èƒ½å‡ºç°æ•°æ®çƒ­ç‚¹ï¼ˆå¦‚æœ€æ–°æœˆä»½çš„è®¢å•åˆ†ç‰‡è®¿é—®é¢‘ç‡æé«˜ï¼‰ï¼›</li>
<li>å“ˆå¸Œæ‹†åˆ†ï¼šæŒ‰åˆ†ç‰‡é”®çš„å“ˆå¸Œå€¼å–æ¨¡æ‹†åˆ†æ•°æ®ï¼Œå¦‚æŒ‰ç”¨æˆ·ID % 10æ‹†åˆ†åˆ°10ä¸ªåˆ†ç‰‡ã€‚å“ˆå¸Œæ‹†åˆ†èƒ½ç¡®ä¿æ•°æ®å‡åŒ€åˆ†å¸ƒï¼Œé¿å…çƒ­ç‚¹åˆ†ç‰‡ï¼Œä½†ä¸ä¾¿äºæ•°æ®å½’æ¡£ï¼ŒæŸ¥è¯¢å†å²æ•°æ®æ—¶å¯èƒ½éœ€è¦è®¿é—®å¤šä¸ªåˆ†ç‰‡ï¼›</li>
<li>ä¸€è‡´æ€§å“ˆå¸Œæ‹†åˆ†ï¼šåœ¨å“ˆå¸Œæ‹†åˆ†çš„åŸºç¡€ä¸Šï¼Œé€šè¿‡ä¸€è‡´æ€§å“ˆå¸Œç®—æ³•å‡å°‘åˆ†ç‰‡æ‰©å®¹æ—¶çš„æ•°æ®è¿ç§»é‡ã€‚é€‚ç”¨äºä¸šåŠ¡æ•°æ®é‡æŒç»­å¢é•¿ã€éœ€è¦é¢‘ç¹æ‰©å®¹çš„åœºæ™¯ã€‚</li>
</ul>
</li>
<li>
<p>å‚ç›´æ‹†åˆ†</p>
<ul>
<li>æŒ‰å­—æ®µè®¿é—®é¢‘ç‡æ‹†åˆ†ï¼šå°†é«˜é¢‘è®¿é—®çš„æ ¸å¿ƒå­—æ®µï¼ˆå¦‚ç”¨æˆ·IDã€å§“åã€è®¢å•é‡‘é¢ï¼‰æ”¾åœ¨ä¸»è¡¨ï¼Œä½é¢‘è®¿é—®çš„å­—æ®µï¼ˆå¦‚ç”¨æˆ·ç®€ä»‹ã€è®¢å•å¤‡æ³¨ï¼‰æ”¾åœ¨ä»è¡¨ï¼›</li>
<li>æŒ‰å­—æ®µç±»å‹æ‹†åˆ†ï¼šå°†å¤§å­—æ®µï¼ˆTEXTã€BLOBï¼‰æ‹†åˆ†åˆ°å•ç‹¬çš„è¡¨ä¸­ï¼Œä¸»è¡¨ä»…å­˜å‚¨å…³è”IDï¼Œå‡å°‘ä¸»è¡¨çš„æ•°æ®è¡Œå¤§å°ï¼Œæå‡æŸ¥è¯¢æ•ˆç‡ã€‚</li>
</ul>
</li>
<li>
<p><strong>åˆ†åº“åˆ†è¡¨å®ç°æ–¹å¼</strong></p>
<ul>
<li>
<p>å®¢æˆ·ç«¯åˆ†ç‰‡</p>
<ul>
<li>åœ¨åº”ç”¨ç¨‹åºä¸­ç›´æ¥å®ç°åˆ†åº“åˆ†è¡¨é€»è¾‘ï¼Œé€šè¿‡ä»£ç æ§åˆ¶æ•°æ®çš„å†™å…¥å’ŒæŸ¥è¯¢åˆ†ç‰‡ã€‚ä¼˜ç‚¹æ˜¯çµæ´»æ€§é«˜ï¼Œç¼ºç‚¹æ˜¯å¼€å‘æˆæœ¬é«˜ï¼Œéœ€ç»´æŠ¤å¤§é‡åˆ†ç‰‡é€»è¾‘ä»£ç ï¼Œåç»­æ‰©å®¹ã€è¿ç§»å›°éš¾ï¼›</li>
</ul>
</li>
<li>
<p>ä¸­é—´ä»¶åˆ†ç‰‡</p>
<ul>
<li>ä½¿ç”¨ä¸“ä¸šçš„åˆ†åº“åˆ†è¡¨ä¸­é—´ä»¶ï¼ˆå¦‚Sharding-JDBCã€MyCatã€TDSQLï¼‰ï¼Œä¸­é—´ä»¶å°è£…äº†åˆ†ç‰‡é€»è¾‘ï¼Œåº”ç”¨ç¨‹åºé€šè¿‡ä¸­é—´ä»¶è®¿é—®æ•°æ®åº“ï¼Œæ— éœ€å…³æ³¨åˆ†ç‰‡ç»†èŠ‚ã€‚ä¼˜ç‚¹æ˜¯å¼€å‘æˆæœ¬ä½ã€æ˜“äºç»´æŠ¤å’Œæ‰©å®¹ï¼Œæ˜¯ç›®å‰ä¸»æµçš„å®ç°æ–¹å¼ã€‚</li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>å¦‚ä½•ä¿è¯åˆ†å¸ƒå¼æ•°æ®åº“æ¶æ„ä¸­å…¨å±€å”¯ä¸€IDçš„ç”Ÿæˆ</strong>ï¼Ÿ</p>
<ul>
<li>
<p>åˆ†å¸ƒå¼IDç”Ÿæˆçš„è¦æ±‚å’Œæ ¸å¿ƒéš¾ç‚¹</p>
<ul>
<li>(1) å…¨å±€å”¯ä¸€æ€§ï¼šä¿æŒç”Ÿæˆçš„IDå…¨å±€å”¯ä¸€ï¼Œåœ¨ä»»ä½•æƒ…å†µä¸‹ä¹Ÿä¸ä¼šå‡ºç°é‡å¤çš„å€¼ï¼ˆå¦‚é˜²æ­¢æ—¶é—´å›æ‹”ï¼Œæ—¶é’Ÿå‘¨æœŸé—®é¢˜ï¼‰ï¼›</li>
<li>(2) è¶‹åŠ¿é€’å¢ï¼šä¿è¯ä¸‹ä¸€ä¸ªIDä¸€å®šå¤§äºä¸Šä¸€ä¸ªIDï¼Œä¾‹å¦‚äº‹åŠ¡ç‰ˆæœ¬å·ã€IMèŠå¤©ä¸­çš„å¢é‡æ¶ˆæ¯ã€æ’åºç­‰ç‰¹æ®Šéœ€æ±‚ï¼›</li>
<li>(3) é«˜æ€§èƒ½ï¼šIDçš„éœ€æ±‚åœºæ™¯å¤šï¼Œä¸­å¿ƒåŒ–ç”Ÿæˆç»„ä»¶åï¼Œéœ€è¦é«˜å¹¶å‘å¤„ç†ï¼Œä»¥æ¥è¿‘ 0msçš„å“åº”å¤§è§„æ¨¡å¹¶å‘æ‰§è¡Œï¼›</li>
<li>(4) é«˜å¯ç”¨ï¼š ä½œä¸ºIDçš„ç”Ÿäº§æºå¤´ï¼Œéœ€è¦100%å¯ç”¨ï¼Œå½“æ¥å…¥çš„ä¸šåŠ¡ç³»ç»Ÿå¤šçš„æ—¶å€™ï¼Œå¾ˆéš¾è°ƒæ•´å‡ºå„æ–¹éƒ½å¯æ¥å—çš„åœæœºå‘å¸ƒçª—å£ï¼Œåªèƒ½æ¥å—æ— æŸå‘å¸ƒï¼›</li>
<li>(5) æ˜“æ¥å…¥ï¼šä½œä¸ºé€»è¾‘ä¸Šç®€å•çš„åˆ†å¸ƒå¼IDè¦æ¨å¹¿ä½¿ç”¨ï¼Œå¿…é¡»å¼ºè°ƒå¼€ç®±å³ç”¨ï¼Œå®¹æ˜“ä¸Šæ‰‹ï¼›</li>
</ul>
</li>
<li>
<p>å¤§å‚è‡ªç ”åˆ†å¸ƒå¼IDæ¡†æ¶å®ç°</p>
<ul>
<li><a href="https://link.juejin.cn?target=http%3A%2F%2Fwww.52im.net%2Fthread-2751-1-1.html" target="_blank" title="http://www.52im.net/thread-2751-1-1.html" ref="nofollow noopener noreferrer">ç¾å›¢åˆ†å¸ƒå¼IDç”Ÿæˆç³»ç»ŸLeaf(å¯¹Snowflakeç®—æ³•è¿›è¡Œäº†æ”¹è¿›)</a>
<ul>
<li>Leaf-segmentæ–¹æ¡ˆï¼šå¯ç”Ÿæˆå…¨å±€å”¯ä¸€ã€å…¨å±€æœ‰åºçš„ID</li>
<li>Leaf-snowflakeæ–¹æ¡ˆï¼šå¯ç”Ÿæˆå…¨å±€å”¯ä¸€ã€å±€éƒ¨æœ‰åºçš„ID</li>
</ul>
</li>
<li><a href="https://link.juejin.cn?target=http%3A%2F%2Fwww.52im.net%2Fthread-2953-1-1.html" target="_blank" title="http://www.52im.net/thread-2953-1-1.html" ref="nofollow noopener noreferrer">ç™¾åº¦åˆ†å¸ƒå¼IDç”Ÿæˆå™¨UidGenerator(å¯¹Snowflakeç®—æ³•è¿›è¡Œäº†æ”¹è¿›)</a></li>
<li><a href="https://link.juejin.cn?target=http%3A%2F%2Fwww.52im.net%2Fthread-3129-1-1.html" target="_blank" title="http://www.52im.net/thread-3129-1-1.html" ref="nofollow noopener noreferrer">æ»´æ»´çš„é«˜æ€§èƒ½IDç”Ÿæˆå™¨(Tinyid)</a></li>
<li><a href="https://link.juejin.cn?target=http%3A%2F%2Fwww.52im.net%2Fthread-4378-1-1.html" target="_blank" title="http://www.52im.net/thread-4378-1-1.html" ref="nofollow noopener noreferrer">vivoçš„è‡ªç ”åˆ†å¸ƒå¼IDæœåŠ¡</a></li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>å„å¤§æ¡†æ¶å¯¹æ¯”</strong></p>
</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f7e1593155ab42d7bda83a9295eeea18~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSVRfc3Vuc2hpbmU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767354999&amp;x-signature=h9h72Zd7HRjUj%2FBItt0B522HlM0%3D" alt="image.png" loading="lazy"/></p>
<ul>
<li>
<hr/>
<ul>
<li>åˆ†ç‰‡é”®é€‰æ‹©è‡³å…³é‡è¦ï¼šåˆ†ç‰‡é”®éœ€æ»¡è¶³â€œæ•°æ®å‡åŒ€åˆ†å¸ƒâ€å’Œâ€œæŸ¥è¯¢ç²¾å‡†å®šä½â€ä¸¤ä¸ªæ ¸å¿ƒè¦æ±‚ã€‚ä¾‹å¦‚ï¼Œè®¢å•è¡¨è‹¥æŒ‰è®¢å•IDå“ˆå¸Œæ‹†åˆ†ï¼ŒæŸ¥è¯¢â€œæŸç”¨æˆ·çš„æ‰€æœ‰è®¢å•â€æ—¶ä¼šéœ€è¦è®¿é—®æ‰€æœ‰åˆ†ç‰‡ï¼Œæ•ˆç‡æä½ï¼›æ­¤æ—¶åº”é€‰æ‹©ç”¨æˆ·IDä½œä¸ºåˆ†ç‰‡é”®ï¼ŒæŸ¥è¯¢æ—¶å¯ç›´æ¥å®šä½åˆ°ç”¨æˆ·æ‰€å±çš„åˆ†ç‰‡ï¼›</li>
<li>é¿å…åˆ†å¸ƒå¼äº‹åŠ¡ï¼šåˆ†åº“åˆ†è¡¨åï¼Œè·¨åˆ†ç‰‡çš„æ“ä½œä¼šäº§ç”Ÿåˆ†å¸ƒå¼äº‹åŠ¡ï¼Œåˆ†å¸ƒå¼äº‹åŠ¡å®ç°å¤æ‚ã€æ€§èƒ½å·®ã€‚éœ€é€šè¿‡ä¸šåŠ¡ä¼˜åŒ–é¿å…è·¨åˆ†ç‰‡æ“ä½œï¼Œæˆ–é‡‡ç”¨æœ€ç»ˆä¸€è‡´æ€§æ–¹æ¡ˆï¼ˆå¦‚æœ¬åœ°æ¶ˆæ¯è¡¨ã€äº‹åŠ¡æ¶ˆæ¯ï¼‰æ›¿ä»£åˆ†å¸ƒå¼äº‹åŠ¡ï¼›</li>
<li>è€ƒè™‘æ‰©å®¹æ–¹æ¡ˆï¼šæ‹†åˆ†æ—¶éœ€é¢„ç•™æ‰©å®¹ç©ºé—´ï¼Œé¿å…åç»­æ‰©å®¹æ—¶å¤§é‡æ•°æ®è¿ç§»ã€‚ä¾‹å¦‚ï¼Œé‡‡ç”¨ä¸€è‡´æ€§å“ˆå¸Œæ‹†åˆ†ï¼Œæˆ–æŒ‰â€œ2çš„å¹‚æ¬¡â€æ‹†åˆ†ï¼ˆå¦‚åˆå§‹æ‹†åˆ†ä¸º8ä¸ªåˆ†ç‰‡ï¼Œåç»­å¯æ‰©å®¹ä¸º16ä¸ªï¼‰ï¼›</li>
<li>è¿ç»´å¤æ‚åº¦æå‡ï¼šåˆ†åº“åˆ†è¡¨åï¼Œæ•°æ®åº“é›†ç¾¤çš„è¿ç»´éš¾åº¦æ˜¾è‘—å¢åŠ ï¼Œéœ€å…³æ³¨åˆ†ç‰‡çš„å¥åº·çŠ¶æ€ã€æ•°æ®ä¸€è‡´æ€§ã€å¤‡ä»½æ¢å¤ç­‰é—®é¢˜ã€‚å¯å€ŸåŠ©ä¸­é—´ä»¶çš„ç›‘æ§åŠŸèƒ½ï¼Œæˆ–ä½¿ç”¨ä¸“ä¸šçš„è¿ç»´å·¥å…·ï¼ˆå¦‚Prometheusã€Grafanaï¼‰è¿›è¡Œç›‘æ§ã€‚</li>
</ul>
</li>
</ul>
<h2 data-id="heading-15">åã€å…¶ä»–ä¼˜åŒ–æ–¹æ¡ˆ</h2>
<ul>
<li>
<p><strong>è¯»å†™åˆ†ç¦»</strong></p>
<ul>
<li>å¯¹äºè¯»å¤šå†™å°‘çš„å¤§è¡¨åœºæ™¯ï¼ˆå¦‚å•†å“è¡¨ã€ç”¨æˆ·è¡¨ï¼‰ï¼Œå¯é‡‡ç”¨è¯»å†™åˆ†ç¦»æ¶æ„ï¼šä¸»åº“è´Ÿè´£å†™å…¥æ“ä½œï¼ˆINSERTã€UPDATEã€DELETEï¼‰ï¼Œä»åº“è´Ÿè´£è¯»å–æ“ä½œï¼ˆSELECTï¼‰ï¼Œé€šè¿‡ä¸»ä»å¤åˆ¶åŒæ­¥æ•°æ®ã€‚è¯»å†™åˆ†ç¦»èƒ½åˆ†æ•£å•åº“çš„è¯»å†™å‹åŠ›ï¼Œæå‡æŸ¥è¯¢æ€§èƒ½ï¼Œéœ€æ³¨æ„ä¸»ä»å¤åˆ¶çš„å»¶è¿Ÿé—®é¢˜ï¼Œå¯¹äºå®æ—¶æ€§è¦æ±‚é«˜çš„æŸ¥è¯¢ï¼Œéœ€è·¯ç”±åˆ°ä¸»åº“ã€‚</li>
</ul>
</li>
<li>
<p><strong>æ•°æ®åº“å‚æ•°ä¼˜åŒ–(é€šè¿‡ä¼˜åŒ–MySQçš„é…ç½®å‚æ•°ï¼Œæå‡æ•°æ®åº“æ€§èƒ½)</strong></p>
<ul>
<li>è°ƒæ•´ç¼“å†²æ± å¤§å°ï¼ˆinnodb_buffer_pool_sizeï¼‰ï¼šå»ºè®®è®¾ç½®ä¸ºæœåŠ¡å™¨ç‰©ç†å†…å­˜çš„50%-70%ï¼Œæå‡æ•°æ®å’Œç´¢å¼•çš„ç¼“å­˜å‘½ä¸­ç‡ï¼›</li>
<li>è°ƒæ•´æ—¥å¿—ç›¸å…³å‚æ•°ï¼ˆinnodb_log_file_sizeã€innodb_log_buffer_sizeï¼‰ï¼šå¢å¤§æ—¥å¿—æ–‡ä»¶å¤§å°ï¼Œå‡å°‘æ—¥å¿—åˆ·ç›˜æ¬¡æ•°ï¼›å¢å¤§æ—¥å¿—ç¼“å†²åŒºï¼Œå‡å°‘ç£ç›˜I/Oï¼›</li>
<li>è°ƒæ•´è¿æ¥æ•°å‚æ•°ï¼ˆmax_connectionsã€wait_timeoutï¼‰ï¼šæ ¹æ®ä¸šåŠ¡éœ€æ±‚è®¾ç½®åˆç†çš„æœ€å¤§è¿æ¥æ•°ï¼Œé¿å…è¿æ¥è€—å°½ï¼›è®¾ç½®åˆç†çš„è¿æ¥è¶…æ—¶æ—¶é—´ï¼Œé‡Šæ”¾ç©ºé—²è¿æ¥ï¼›</li>
</ul>
</li>
<li>
<p><strong>ç¡¬ä»¶ä¸å­˜å‚¨ä¼˜åŒ–ï¼Œç¡¬ä»¶å’Œå­˜å‚¨æ˜¯æ•°æ®åº“æ€§èƒ½çš„åŸºç¡€ï¼Œå¤§è¡¨åœºæ™¯ä¸‹éœ€é€‰æ‹©é«˜æ€§èƒ½çš„ç¡¬ä»¶</strong></p>
<ul>
<li>ä½¿ç”¨SSDç¡¬ç›˜ï¼šSSDçš„è¯»å†™é€Ÿåº¦è¿œé«˜äºæœºæ¢°ç¡¬ç›˜ï¼Œèƒ½æ˜¾è‘—æå‡å¤§è¡¨çš„ç£ç›˜I/Oæ•ˆç‡ï¼›</li>
<li>æå‡CPUå’Œå†…å­˜é…ç½®ï¼šå¤§è¡¨æŸ¥è¯¢å’Œç´¢å¼•ç»´æŠ¤éœ€è¦å¤§é‡CPUå’Œå†…å­˜èµ„æºï¼Œé€‰æ‹©å¤šæ ¸CPUã€å¤§å®¹é‡å†…å­˜çš„æœåŠ¡å™¨ï¼›</li>
<li>ä½¿ç”¨RAIDé˜µåˆ—ï¼šé€šè¿‡RAID 0ã€RAID 10ç­‰é˜µåˆ—æ–¹å¼ï¼Œæå‡ç£ç›˜çš„è¯»å†™æ€§èƒ½å’Œå¯é æ€§ã€‚</li>
</ul>
</li>
</ul>
<h2 data-id="heading-16">åä¸€ã€æ€»ç»“</h2>
<p>MySQLå¤§è¡¨ä¼˜åŒ–æ˜¯ä¸€ä¸ªç³»ç»Ÿæ€§å·¥ç¨‹ï¼Œéœ€ä»è¡¨è®¾è®¡ã€æŸ¥è¯¢ã€ç´¢å¼•ã€æ•°æ®å½’æ¡£ã€åˆ†åŒºè¡¨ã€åˆ†åº“åˆ†è¡¨ç­‰å¤šä¸ªç»´åº¦ç»¼åˆè€ƒé‡ï¼Œæ ¸å¿ƒæ˜¯â€œå‡å°‘æ•°æ®é‡ã€é™ä½è®¿é—®æˆæœ¬ã€åˆ†æ•£å‹åŠ›â€ã€‚ä¼˜åŒ–è¿‡ç¨‹ä¸­åº”éµå¾ªâ€œå…ˆæ˜“åéš¾ã€å…ˆè½¯åç¡¬â€çš„åŸåˆ™ï¼Œä¼˜å…ˆé‡‡ç”¨ä½æˆæœ¬ã€ä½é£é™©çš„æ–¹æ¡ˆï¼Œå†æ ¹æ®ä¸šåŠ¡éœ€æ±‚é€æ­¥å‡çº§åˆ°æ¶æ„çº§ä¼˜åŒ–ã€‚å¤§å‚çš„å®æˆ˜æ¡ˆä¾‹è¡¨æ˜ï¼Œä¼˜åŒ–æ–¹æ¡ˆéœ€ç´§å¯†ç»“åˆä¸šåŠ¡åœºæ™¯ï¼šç”µå•†è®¢å•è¡¨é€‚åˆåˆ†åº“åˆ†è¡¨+æ•°æ®å½’æ¡£ï¼Œæ—¥å¿—è¡¨é€‚åˆåˆ†åŒºè¡¨+å†·çƒ­åˆ†ç¦»ï¼Œå•†å“è¡¨é€‚åˆå‚ç›´æ‹†åˆ†+è¯»å†™åˆ†ç¦»+ç¼“å­˜ã€‚åŒæ—¶ï¼Œä¼˜åŒ–åçš„ç›‘æ§ä¸è¿ç»´è‡³å…³é‡è¦ï¼Œèƒ½ç¡®ä¿ç³»ç»Ÿé•¿æœŸç¨³å®šè¿è¡Œã€‚å¥½äº†ï¼Œä»Šå¤©çš„åˆ†äº«å°±åˆ°æ­¤ç»“æŸäº†ï¼Œå¦‚æœæ–‡ç« å¯¹ä½ æœ‰æ‰€å¸®åŠ©ï¼Œæ¬¢è¿ï¼š<em><strong>ç‚¹èµğŸ‘+è¯„è®ºğŸ’¬+æ”¶è—â¤</strong></em>ï¼Œæˆ‘æ˜¯ï¼š<strong><code>IT_sunshine</code></strong>Â ï¼Œæˆ‘ä»¬ä¸‹æœŸè§ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[MySQL äº‹åŠ¡å…¨è§£æï¼šä» ACID ç‰¹æ€§åˆ°å®æˆ˜è½åœ°ï¼ˆéƒ¨é—¨ - å‘˜å·¥åœºæ™¯ï¼‰]]></title>    <link>https://juejin.cn/post/7588086766235271206</link>    <guid>https://juejin.cn/post/7588086766235271206</guid>    <pubDate>2025-12-26T12:08:15.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588086766235271206" data-draft-id="7587997893987549211" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="MySQL äº‹åŠ¡å…¨è§£æï¼šä» ACID ç‰¹æ€§åˆ°å®æˆ˜è½åœ°ï¼ˆéƒ¨é—¨ - å‘˜å·¥åœºæ™¯ï¼‰"/> <meta itemprop="keywords" content="åç«¯,æ•°æ®åº“"/> <meta itemprop="datePublished" content="2025-12-26T12:08:15.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¨‹åºå‘˜æ ¹æ ¹"/> <meta itemprop="url" content="https://juejin.cn/user/555679166786139"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            MySQL äº‹åŠ¡å…¨è§£æï¼šä» ACID ç‰¹æ€§åˆ°å®æˆ˜è½åœ°ï¼ˆéƒ¨é—¨ - å‘˜å·¥åœºæ™¯ï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/555679166786139/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¨‹åºå‘˜æ ¹æ ¹
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-26T12:08:15.000Z" title="Fri Dec 26 2025 12:08:15 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ä¼ä¸šçº§ç³»ç»Ÿå¼€å‘ä¸­ï¼Œâ€œæ•°æ®ä¸€è‡´æ€§â€ æ˜¯æ ¸å¿ƒè¯‰æ±‚ â€”â€” æ¯”å¦‚å‘˜å·¥å…¥èŒæ—¶ï¼Œâ€œæ–°å¢å‘˜å·¥è®°å½•â€ å’Œ â€œæ›´æ–°éƒ¨é—¨äººæ•°â€ è¿™ä¸¤ä¸ªæ“ä½œå¿…é¡»åŒæ—¶æˆåŠŸæˆ–åŒæ—¶å¤±è´¥ï¼›å†æ¯”å¦‚è´¢åŠ¡è½¬è´¦æ—¶ï¼Œâ€œæ‰£æ¬¾â€ å’Œ â€œæ”¶æ¬¾â€ ä¹Ÿä¸èƒ½åªæ‰§è¡Œå…¶ä¸€ã€‚è€Œä¿è¯è¿™ç§ â€œè¦ä¹ˆå…¨æˆã€è¦ä¹ˆå…¨è´¥â€ çš„æ ¸å¿ƒæŠ€æœ¯ï¼Œå°±æ˜¯<strong>æ•°æ®åº“äº‹åŠ¡ï¼ˆTransactionï¼‰</strong> ã€‚æœ¬æ–‡å°†ä»¥ â€œéƒ¨é—¨ - å‘˜å·¥â€ è¿™ä¸€ç»å…¸ä¸šåŠ¡åœºæ™¯ä¸ºæ ¸å¿ƒï¼Œä»äº‹åŠ¡çš„æ ¸å¿ƒä»·å€¼ã€ACID ç‰¹æ€§ã€éš”ç¦»çº§åˆ«ï¼Œåˆ° JDBC/MyBatis/Spring ä¸­çš„å®æˆ˜è½åœ°ï¼Œå¸®ä½ å½»åº•æŒæ¡äº‹åŠ¡çš„ä½¿ç”¨ä¸ä¼˜åŒ–ã€‚</p>
<h2 data-id="heading-0">ä¸€ã€äº‹åŠ¡çš„æ ¸å¿ƒä»·å€¼ï¼šä¸ºä»€ä¹ˆç¦»ä¸å¼€äº‹åŠ¡ï¼Ÿ</h2>
<p>å…ˆçœ‹ä¸€ä¸ªå…¸å‹çš„ä¸šåŠ¡åœºæ™¯ï¼š</p>
<blockquote>
<p>ä¼ä¸šæ‹›è˜æ–°å‘˜å·¥ â€œé’±å…«â€ å…¥èŒç ”å‘éƒ¨ï¼Œéœ€è¦æ‰§è¡Œä¸¤ä¸ªæ“ä½œï¼š</p>
<ol>
<li>å‘<code>emp</code>è¡¨æ’å…¥ â€œé’±å…«â€ çš„å‘˜å·¥è®°å½•ï¼›</li>
<li>å‘<code>dept</code>è¡¨æ›´æ–°ç ”å‘éƒ¨çš„å‘˜å·¥æ•°é‡ï¼ˆ<code>emp_count</code>å­—æ®µï¼‰ï¼ŒåŠ  1ã€‚</li>
</ol>
</blockquote>
<p>å¦‚æœæ²¡æœ‰äº‹åŠ¡æ§åˆ¶ï¼Œå¯èƒ½å‡ºç°ä¸¤ç§å¼‚å¸¸ï¼š</p>
<ul>
<li>åœºæ™¯ 1ï¼šæ’å…¥å‘˜å·¥è®°å½•æˆåŠŸï¼Œä½†æ›´æ–°éƒ¨é—¨äººæ•°å¤±è´¥ â†’ ç ”å‘éƒ¨äººæ•°å°‘ç®— 1 äººï¼Œæ•°æ®ä¸ä¸€è‡´ï¼›</li>
<li>åœºæ™¯ 2ï¼šæ›´æ–°éƒ¨é—¨äººæ•°æˆåŠŸï¼Œä½†æ’å…¥å‘˜å·¥è®°å½•å¤±è´¥ â†’ ç ”å‘éƒ¨äººæ•°å¤šç®— 1 äººï¼Œæ•°æ®é”™è¯¯ã€‚</li>
</ul>
<p>è€Œäº‹åŠ¡çš„æ ¸å¿ƒä½œç”¨ï¼Œå°±æ˜¯<strong>å°†ä¸€ç»„æ“ä½œå°è£…ä¸ºä¸€ä¸ª â€œä¸å¯åˆ†å‰²çš„æ‰§è¡Œå•å…ƒâ€</strong> ï¼Œç¡®ä¿å•å…ƒå†…çš„æ‰€æœ‰æ“ä½œè¦ä¹ˆå…¨éƒ¨æ‰§è¡ŒæˆåŠŸï¼Œè¦ä¹ˆå…¨éƒ¨å›æ»šï¼ˆæ’¤é”€ï¼‰ï¼Œä»æ ¹æœ¬ä¸Šé¿å…æ•°æ®ä¸ä¸€è‡´é—®é¢˜ã€‚</p>
<h2 data-id="heading-1">äºŒã€äº‹åŠ¡çš„æ ¸å¿ƒç‰¹æ€§ï¼šACID åŸåˆ™</h2>
<p>äº‹åŠ¡çš„æœ¬è´¨æ˜¯éµå¾ª<strong>ACID å››å¤§ç‰¹æ€§</strong>çš„ä¸€ç»„æ•°æ®åº“æ“ä½œï¼Œè¿™æ˜¯äº‹åŠ¡çš„æ ¸å¿ƒå®šä¹‰ï¼Œæˆ‘ä»¬ç»“åˆ â€œéƒ¨é—¨ - å‘˜å·¥â€ åœºæ™¯é€ä¸€æ‹†è§£ï¼š</p>



































<table><thead><tr><th>ç‰¹æ€§</th><th>è‹±æ–‡å…¨ç§°</th><th>æ ¸å¿ƒå®šä¹‰</th><th>éƒ¨é—¨ - å‘˜å·¥åœºæ™¯ç¤ºä¾‹</th></tr></thead><tbody><tr><td>åŸå­æ€§ï¼ˆAï¼‰</td><td>Atomicity</td><td>äº‹åŠ¡ä¸­çš„æ“ä½œè¦ä¹ˆå…¨éƒ¨æ‰§è¡ŒæˆåŠŸï¼Œè¦ä¹ˆå…¨éƒ¨å›æ»šï¼Œä¸å­˜åœ¨ â€œéƒ¨åˆ†æˆåŠŸâ€</td><td>å…¥èŒæ“ä½œï¼šæ’å…¥å‘˜å·¥ + æ›´æ–°éƒ¨é—¨äººæ•°ï¼Œè¦ä¹ˆéƒ½æˆï¼Œè¦ä¹ˆéƒ½å›æ»šï¼ˆæ¯”å¦‚å‘˜å·¥å§“åé‡å¤å¯¼è‡´æ’å…¥å¤±è´¥ï¼Œéƒ¨é—¨äººæ•°ä¹Ÿä¸æ›´æ–°ï¼‰</td></tr><tr><td>ä¸€è‡´æ€§ï¼ˆCï¼‰</td><td>Consistency</td><td>äº‹åŠ¡æ‰§è¡Œå‰åï¼Œæ•°æ®åº“çš„ â€œä¸šåŠ¡è§„åˆ™â€ ä¿æŒä¸€è‡´ï¼ˆå¦‚éƒ¨é—¨äººæ•° = è¯¥éƒ¨é—¨å‘˜å·¥æ•°ï¼‰</td><td>æ‰§è¡Œå‰ç ”å‘éƒ¨äººæ•°æ˜¯ 2ï¼Œæ‰§è¡Œåå¿…é¡»æ˜¯ 3ï¼ˆæˆåŠŸï¼‰æˆ–ä»ä¸º 2ï¼ˆå¤±è´¥ï¼‰ï¼Œä¸ä¼šå‡ºç° â€œå‘˜å·¥æ–°å¢ä½†äººæ•°ä¸å˜â€ çš„ä¸ä¸€è‡´</td></tr><tr><td>éš”ç¦»æ€§ï¼ˆIï¼‰</td><td>Isolation</td><td>å¤šä¸ªäº‹åŠ¡å¹¶å‘æ‰§è¡Œæ—¶ï¼Œå½¼æ­¤éš”ç¦»ã€äº’ä¸å¹²æ‰°ï¼Œé¿å…å¹¶å‘å¯¼è‡´çš„æ•°æ®é”™è¯¯</td><td>ç®¡ç†å‘˜ A æ–°å¢å‘˜å·¥ã€ç®¡ç†å‘˜ B ç»Ÿè®¡éƒ¨é—¨äººæ•°ï¼Œä¸¤ä¸ªäº‹åŠ¡å¹¶å‘æ‰§è¡Œæ—¶ï¼ŒB ä¸ä¼šè¯»åˆ° A â€œæœªæäº¤çš„ä¸­é—´æ•°æ®â€</td></tr><tr><td>æŒä¹…æ€§ï¼ˆDï¼‰</td><td>Durability</td><td>äº‹åŠ¡æäº¤åï¼Œä¿®æ”¹ä¼šæ°¸ä¹…ä¿å­˜åˆ°æ•°æ®åº“ï¼Œå³ä½¿æ•°æ®åº“å´©æºƒä¹Ÿä¸ä¼šä¸¢å¤±</td><td>å…¥èŒæ“ä½œæäº¤åï¼Œâ€œé’±å…«â€ çš„å‘˜å·¥è®°å½•å’Œç ”å‘éƒ¨äººæ•°çš„ä¿®æ”¹ä¼šæ°¸ä¹…ä¿å­˜ï¼Œé‡å¯æ•°æ®åº“åæ•°æ®ä»æœ‰æ•ˆ</td></tr></tbody></table>
<p><strong>å…³é”®è¯´æ˜</strong>ï¼šACID æ˜¯äº‹åŠ¡çš„ â€œå¥‘çº¦â€ï¼Œå…¶ä¸­<strong>åŸå­æ€§ã€ä¸€è‡´æ€§ã€æŒä¹…æ€§</strong>ç”±æ•°æ®åº“çš„ â€œé‡åšæ—¥å¿—ï¼ˆRedo Logï¼‰â€ å’Œ â€œå›æ»šæ—¥å¿—ï¼ˆUndo Logï¼‰â€ ä¿è¯ï¼Œ<strong>éš”ç¦»æ€§</strong>ç”±äº‹åŠ¡éš”ç¦»çº§åˆ«å’Œé”æœºåˆ¶ä¿è¯ã€‚</p>
<h2 data-id="heading-2">ä¸‰ã€äº‹åŠ¡çš„éš”ç¦»çº§åˆ«ï¼šè§£å†³å¹¶å‘äº‹åŠ¡å†²çª</h2>
<p>åœ¨å¤šç”¨æˆ·å¹¶å‘æ“ä½œæ•°æ®åº“æ—¶ï¼Œè‹¥æ²¡æœ‰éš”ç¦»æ€§æ§åˆ¶ï¼Œä¼šå‡ºç°<strong>è„è¯»ã€ä¸å¯é‡å¤è¯»ã€å¹»è¯»</strong>ä¸‰ç±»é—®é¢˜ã€‚MySQL é€šè¿‡ â€œäº‹åŠ¡éš”ç¦»çº§åˆ«â€ æ¥å¹³è¡¡ â€œéš”ç¦»æ€§â€ å’Œ â€œå¹¶å‘æ€§èƒ½â€ï¼Œå…±å®šä¹‰äº† 4 ä¸ªéš”ç¦»çº§åˆ«ï¼ˆä»ä½åˆ°é«˜ï¼‰ï¼š</p>
<h4 data-id="heading-3">1. å››ç±»å¹¶å‘é—®é¢˜ï¼ˆå…ˆç†è§£é—®é¢˜ï¼Œå†çœ‹è§£å†³æ–¹æ¡ˆï¼‰</h4>

























<table><thead><tr><th>é—®é¢˜ç±»å‹</th><th>å®šä¹‰</th><th>éƒ¨é—¨ - å‘˜å·¥åœºæ™¯ç¤ºä¾‹</th></tr></thead><tbody><tr><td>è„è¯»ï¼ˆDirty Readï¼‰</td><td>ä¸€ä¸ªäº‹åŠ¡è¯»å–åˆ°å¦ä¸€ä¸ªäº‹åŠ¡ â€œæœªæäº¤â€ çš„ä¿®æ”¹æ•°æ®</td><td>äº‹åŠ¡ A æ–°å¢å‘˜å·¥ â€œé’±å…«â€ ä½†æœªæäº¤ï¼Œäº‹åŠ¡ B æŸ¥è¯¢ç ”å‘éƒ¨äººæ•°ä¸º 3ï¼›äº‹åŠ¡ A å›æ»šåï¼Œäº‹åŠ¡ B è¯»åˆ°çš„ â€œ3â€ å°±æ˜¯ â€œè„æ•°æ®â€</td></tr><tr><td>ä¸å¯é‡å¤è¯»ï¼ˆNon-repeatable Readï¼‰</td><td>ä¸€ä¸ªäº‹åŠ¡å†…å¤šæ¬¡è¯»å–åŒä¸€æ•°æ®ï¼Œç»“æœä¸ä¸€è‡´ï¼ˆè¢«å…¶ä»–äº‹åŠ¡ â€œä¿®æ”¹å¹¶æäº¤â€ï¼‰</td><td>äº‹åŠ¡ B ç¬¬ä¸€æ¬¡æŸ¥ç ”å‘éƒ¨äººæ•°ä¸º 2ï¼Œäº‹åŠ¡ A æ–°å¢å‘˜å·¥å¹¶æäº¤ï¼Œäº‹åŠ¡ B å†æ¬¡æŸ¥è¯¢äººæ•°ä¸º 3ï¼Œä¸¤æ¬¡ç»“æœä¸åŒ</td></tr><tr><td>å¹»è¯»ï¼ˆPhantom Readï¼‰</td><td>ä¸€ä¸ªäº‹åŠ¡å†…å¤šæ¬¡æ‰§è¡ŒåŒä¸€æŸ¥è¯¢ï¼Œç»“æœé›†è¡Œæ•°ä¸ä¸€è‡´ï¼ˆè¢«å…¶ä»–äº‹åŠ¡ â€œæ’å…¥ / åˆ é™¤å¹¶æäº¤â€ï¼‰</td><td>äº‹åŠ¡ B æŸ¥è¯¢ â€œè–ªèµ„&gt; 15000 çš„ç ”å‘éƒ¨å‘˜å·¥â€ æœ‰ 2 äººï¼Œäº‹åŠ¡ A æ–°å¢ 1 åé«˜è–ªå‘˜å·¥å¹¶æäº¤ï¼Œäº‹åŠ¡ B å†æ¬¡æŸ¥è¯¢å˜ä¸º 3 äººï¼Œå¦‚åŒ â€œå‡ºç°å¹»è§‰â€</td></tr></tbody></table>
<h4 data-id="heading-4">2. å››ç§éš”ç¦»çº§åˆ«ï¼ˆè§£å†³å¹¶å‘é—®é¢˜çš„ä¸åŒç¨‹åº¦ï¼‰</h4>
<p>MySQL é»˜è®¤éš”ç¦»çº§åˆ«ä¸º<code>REPEATABLE READï¼ˆå¯é‡å¤è¯»ï¼‰</code>ï¼Œä¹Ÿæ˜¯ç”Ÿäº§ç¯å¢ƒæœ€å¸¸ç”¨çš„çº§åˆ«ã€‚</p>








































<table><thead><tr><th>éš”ç¦»çº§åˆ«</th><th>è‹±æ–‡å…¨ç§°</th><th>è§£å†³çš„é—®é¢˜</th><th>å…è®¸çš„é—®é¢˜</th><th>æ€§èƒ½</th></tr></thead><tbody><tr><td>è¯»æœªæäº¤</td><td>READ UNCOMMITTED</td><td>æ— ï¼ˆæœ€ä½éš”ç¦»ï¼‰</td><td>è„è¯»ã€ä¸å¯é‡å¤è¯»ã€å¹»è¯»</td><td>æœ€é«˜</td></tr><tr><td>è¯»å·²æäº¤</td><td>READ COMMITTED</td><td>è„è¯»</td><td>ä¸å¯é‡å¤è¯»ã€å¹»è¯»</td><td>è¾ƒé«˜</td></tr><tr><td>å¯é‡å¤è¯»ï¼ˆé»˜è®¤ï¼‰</td><td>REPEATABLE READ</td><td>è„è¯»ã€ä¸å¯é‡å¤è¯»</td><td>å¹»è¯»ï¼ˆMySQL å·²é€šè¿‡ MVCC è§£å†³ï¼‰</td><td>ä¸­ç­‰</td></tr><tr><td>ä¸²è¡ŒåŒ–</td><td>SERIALIZABLE</td><td>æ‰€æœ‰é—®é¢˜ï¼ˆå®Œå…¨éš”ç¦»ï¼‰</td><td>æ— ï¼ˆå¹¶å‘äº‹åŠ¡ä¸²è¡Œæ‰§è¡Œï¼‰</td><td>æœ€ä½</td></tr></tbody></table>
<p><strong>å…³é”®è¯´æ˜</strong>ï¼š</p>
<ul>
<li>MySQL çš„<code>REPEATABLE READ</code>é€šè¿‡ â€œå¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶ï¼ˆMVCCï¼‰â€ é¢å¤–è§£å†³äº†å¹»è¯»é—®é¢˜ï¼Œæ˜¯æ¯”æ ‡å‡†å®šä¹‰æ›´ä¼˜çš„å®ç°ï¼›</li>
<li>éš”ç¦»çº§åˆ«è¶Šé«˜ï¼Œå¹¶å‘æ€§èƒ½è¶Šä½ï¼Œéœ€æ ¹æ®ä¸šåŠ¡åœºæ™¯é€‰æ‹©ï¼ˆå¦‚è´¢åŠ¡ç³»ç»Ÿç”¨<code>SERIALIZABLE</code>ï¼Œæ™®é€šä¸šåŠ¡ç”¨<code>REPEATABLE READ</code>ï¼‰ã€‚</li>
</ul>
<h4 data-id="heading-5">3. æŸ¥çœ‹ / è®¾ç½®éš”ç¦»çº§åˆ«</h4>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- æŸ¥çœ‹å½“å‰ä¼šè¯éš”ç¦»çº§åˆ«</span>
<span class="hljs-keyword">SELECT</span> @<span class="hljs-variable">@SESSION</span>.tx_isolation;
<span class="hljs-comment">-- æŸ¥çœ‹å…¨å±€éš”ç¦»çº§åˆ«</span>
<span class="hljs-keyword">SELECT</span> @<span class="hljs-variable">@GLOBAL</span>.tx_isolation;

<span class="hljs-comment">-- è®¾ç½®å½“å‰ä¼šè¯éš”ç¦»çº§åˆ«ä¸ºè¯»å·²æäº¤</span>
<span class="hljs-keyword">SET</span> SESSION TRANSACTION ISOLATION LEVEL READ COMMITTED;
<span class="hljs-comment">-- è®¾ç½®å…¨å±€éš”ç¦»çº§åˆ«ä¸ºå¯é‡å¤è¯»ï¼ˆé»˜è®¤ï¼‰</span>
<span class="hljs-keyword">SET</span> <span class="hljs-keyword">GLOBAL</span> TRANSACTION ISOLATION LEVEL REPEATABLE READ;
</code></pre>
<h2 data-id="heading-6">å››ã€äº‹åŠ¡çš„åŸºç¡€æ“ä½œè¯­æ³•ï¼ˆMySQL å®æˆ˜ï¼‰</h2>
<h4 data-id="heading-7">1. æ ¸å¿ƒè¯­æ³•</h4>
<p>MySQL é»˜è®¤å¼€å¯ â€œè‡ªåŠ¨æäº¤ï¼ˆAUTOCOMMITï¼‰â€ï¼Œå³æ¯æ¡ SQL è¯­å¥éƒ½æ˜¯ä¸€ä¸ªç‹¬ç«‹äº‹åŠ¡ã€‚éœ€æ‰‹åŠ¨å…³é—­è‡ªåŠ¨æäº¤æˆ–æ˜¾å¼å¼€å¯äº‹åŠ¡ã€‚</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- 1. å…³é—­è‡ªåŠ¨æäº¤ï¼ˆå½“å‰ä¼šè¯æœ‰æ•ˆï¼‰</span>
<span class="hljs-keyword">SET</span> AUTOCOMMIT <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;

<span class="hljs-comment">-- 2. å¼€å¯äº‹åŠ¡ï¼ˆæ˜¾å¼å£°æ˜äº‹åŠ¡å¼€å§‹ï¼‰</span>
<span class="hljs-keyword">BEGIN</span>; <span class="hljs-comment">-- æˆ– START TRANSACTION;</span>

<span class="hljs-comment">-- 3. æ‰§è¡Œäº‹åŠ¡å†…çš„æ“ä½œï¼ˆå¦‚æ’å…¥å‘˜å·¥+æ›´æ–°éƒ¨é—¨äººæ•°ï¼‰</span>
<span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> `emp` (emp_name, emp_salary, hire_date, dept_id) 
<span class="hljs-keyword">VALUES</span> (<span class="hljs-string">'é’±å…«'</span>, <span class="hljs-number">14000.00</span>, <span class="hljs-string">'2024-01-01'</span>, <span class="hljs-number">1</span>);

<span class="hljs-keyword">UPDATE</span> `dept` <span class="hljs-keyword">SET</span> emp_count <span class="hljs-operator">=</span> emp_count <span class="hljs-operator">+</span> <span class="hljs-number">1</span> <span class="hljs-keyword">WHERE</span> dept_id <span class="hljs-operator">=</span> <span class="hljs-number">1</span>;

<span class="hljs-comment">-- 4. æäº¤äº‹åŠ¡ï¼ˆæ‰€æœ‰æ“ä½œç”Ÿæ•ˆï¼ŒæŒä¹…åŒ–åˆ°æ•°æ®åº“ï¼‰</span>
<span class="hljs-keyword">COMMIT</span>;

<span class="hljs-comment">-- 4. å›æ»šäº‹åŠ¡ï¼ˆæ’¤é”€æ‰€æœ‰æ“ä½œï¼Œå›åˆ°äº‹åŠ¡å¼€å§‹å‰çš„çŠ¶æ€ï¼‰</span>
<span class="hljs-comment">-- ROLLBACK;</span>

<span class="hljs-comment">-- 5. ä¿å­˜ç‚¹ï¼ˆå¯é€‰ï¼Œå›æ»šåˆ°æŒ‡å®šä½ç½®ï¼Œè€Œéæ•´ä¸ªäº‹åŠ¡ï¼‰</span>
<span class="hljs-keyword">SAVEPOINT</span> sp1; <span class="hljs-comment">-- è®¾ç½®ä¿å­˜ç‚¹</span>
<span class="hljs-keyword">ROLLBACK</span> <span class="hljs-keyword">TO</span> sp1; <span class="hljs-comment">-- å›æ»šåˆ°ä¿å­˜ç‚¹</span>
</code></pre>
<h4 data-id="heading-8">2. å®æˆ˜æ¡ˆä¾‹ï¼ˆéƒ¨é—¨ - å‘˜å·¥å…¥èŒï¼‰</h4>
<p>å…ˆç»™<code>dept</code>è¡¨æ–°å¢<code>emp_count</code>å­—æ®µï¼ˆç”¨äºç»Ÿè®¡éƒ¨é—¨äººæ•°ï¼‰ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> `dept` <span class="hljs-keyword">ADD</span> <span class="hljs-keyword">COLUMN</span> `emp_count` <span class="hljs-type">INT</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">0</span> COMMENT <span class="hljs-string">'éƒ¨é—¨å‘˜å·¥æ•°'</span>;
<span class="hljs-comment">-- åˆå§‹åŒ–ç°æœ‰éƒ¨é—¨äººæ•°</span>
<span class="hljs-keyword">UPDATE</span> `dept` <span class="hljs-keyword">SET</span> emp_count <span class="hljs-operator">=</span> <span class="hljs-number">2</span> <span class="hljs-keyword">WHERE</span> dept_id <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; <span class="hljs-comment">-- ç ”å‘éƒ¨2äºº</span>
<span class="hljs-keyword">UPDATE</span> `dept` <span class="hljs-keyword">SET</span> emp_count <span class="hljs-operator">=</span> <span class="hljs-number">1</span> <span class="hljs-keyword">WHERE</span> dept_id <span class="hljs-operator">=</span> <span class="hljs-number">2</span>; <span class="hljs-comment">-- äººäº‹éƒ¨1äºº</span>
<span class="hljs-keyword">UPDATE</span> `dept` <span class="hljs-keyword">SET</span> emp_count <span class="hljs-operator">=</span> <span class="hljs-number">1</span> <span class="hljs-keyword">WHERE</span> dept_id <span class="hljs-operator">=</span> <span class="hljs-number">3</span>; <span class="hljs-comment">-- è´¢åŠ¡éƒ¨1äºº</span>
<span class="hljs-keyword">UPDATE</span> `dept` <span class="hljs-keyword">SET</span> emp_count <span class="hljs-operator">=</span> <span class="hljs-number">0</span> <span class="hljs-keyword">WHERE</span> dept_id <span class="hljs-operator">=</span> <span class="hljs-number">4</span>; <span class="hljs-comment">-- å¸‚åœºéƒ¨0äºº</span>
</code></pre>
<p>æ‰§è¡Œå¸¦äº‹åŠ¡çš„å…¥èŒæ“ä½œï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- æ­¥éª¤1ï¼šå¼€å¯äº‹åŠ¡</span>
<span class="hljs-keyword">BEGIN</span>;

<span class="hljs-comment">-- æ­¥éª¤2ï¼šæ‰§è¡Œæ“ä½œ1ï¼šæ’å…¥æ–°å‘˜å·¥</span>
<span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> `emp` (emp_name, emp_salary, hire_date, dept_id, manager_id) 
<span class="hljs-keyword">VALUES</span> (<span class="hljs-string">'é’±å…«'</span>, <span class="hljs-number">14000.00</span>, <span class="hljs-string">'2024-01-01'</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>);

<span class="hljs-comment">-- æ­¥éª¤3ï¼šæ‰§è¡Œæ“ä½œ2ï¼šæ›´æ–°ç ”å‘éƒ¨äººæ•°</span>
<span class="hljs-keyword">UPDATE</span> `dept` <span class="hljs-keyword">SET</span> emp_count <span class="hljs-operator">=</span> emp_count <span class="hljs-operator">+</span> <span class="hljs-number">1</span> <span class="hljs-keyword">WHERE</span> dept_id <span class="hljs-operator">=</span> <span class="hljs-number">1</span>;

<span class="hljs-comment">-- æ­¥éª¤4ï¼šéªŒè¯æ•°æ®ï¼ˆäº‹åŠ¡æœªæäº¤ï¼Œä»…å½“å‰ä¼šè¯å¯è§ï¼‰</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> `emp` <span class="hljs-keyword">WHERE</span> emp_name <span class="hljs-operator">=</span> <span class="hljs-string">'é’±å…«'</span>; <span class="hljs-comment">-- èƒ½æŸ¥åˆ°</span>
<span class="hljs-keyword">SELECT</span> emp_count <span class="hljs-keyword">FROM</span> `dept` <span class="hljs-keyword">WHERE</span> dept_id <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; <span class="hljs-comment">-- 3</span>

<span class="hljs-comment">-- æ­¥éª¤5ï¼šæäº¤äº‹åŠ¡ï¼ˆæ•°æ®æŒä¹…åŒ–ï¼‰</span>
<span class="hljs-keyword">COMMIT</span>;

<span class="hljs-comment">-- è‹¥æ“ä½œå¤±è´¥ï¼Œæ‰§è¡Œå›æ»šï¼šROLLBACK;</span>
</code></pre>
<h2 data-id="heading-9">äº”ã€å®æˆ˜è½åœ°ï¼šä¸åŒå¼€å‘åœºæ™¯ä¸‹çš„äº‹åŠ¡ä½¿ç”¨</h2>
<h4 data-id="heading-10">1. åŸç”Ÿ JDBC ä¸­çš„äº‹åŠ¡æ§åˆ¶</h4>
<p>JDBC é»˜è®¤ä¹Ÿæ˜¯è‡ªåŠ¨æäº¤äº‹åŠ¡ï¼Œéœ€æ‰‹åŠ¨å…³é—­è‡ªåŠ¨æäº¤ï¼Œé€šè¿‡<code>Connection</code>å¯¹è±¡æ§åˆ¶äº‹åŠ¡ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> java.sql.Connection;
<span class="hljs-keyword">import</span> java.sql.DriverManager;
<span class="hljs-keyword">import</span> java.sql.PreparedStatement;
<span class="hljs-keyword">import</span> java.sql.SQLException;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">JdbcTransactionDemo</span> {
    <span class="hljs-comment">// æ•°æ®åº“è¿æ¥ä¿¡æ¯</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">URL</span> <span class="hljs-operator">=</span> <span class="hljs-string">"jdbc:mysql://localhost:3306/test?serverTimezone=UTC&amp;useSSL=false"</span>;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">USER</span> <span class="hljs-operator">=</span> <span class="hljs-string">"root"</span>;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">PASSWORD</span> <span class="hljs-operator">=</span> <span class="hljs-string">"123456"</span>;

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-type">Connection</span> <span class="hljs-variable">conn</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;
        <span class="hljs-type">PreparedStatement</span> <span class="hljs-variable">pstmt1</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;
        <span class="hljs-type">PreparedStatement</span> <span class="hljs-variable">pstmt2</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;

        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// 1. è·å–è¿æ¥</span>
            conn = DriverManager.getConnection(URL, USER, PASSWORD);
            <span class="hljs-comment">// 2. å…³é—­è‡ªåŠ¨æäº¤ï¼ˆå¼€å¯æ‰‹åŠ¨äº‹åŠ¡ï¼‰</span>
            conn.setAutoCommit(<span class="hljs-literal">false</span>);

            <span class="hljs-comment">// 3. æ“ä½œ1ï¼šæ’å…¥æ–°å‘˜å·¥</span>
            <span class="hljs-type">String</span> <span class="hljs-variable">sql1</span> <span class="hljs-operator">=</span> <span class="hljs-string">"INSERT INTO emp (emp_name, emp_salary, hire_date, dept_id, manager_id) VALUES (?, ?, ?, ?, ?)"</span>;
            pstmt1 = conn.prepareStatement(sql1);
            pstmt1.setString(<span class="hljs-number">1</span>, <span class="hljs-string">"é’±å…«"</span>);
            pstmt1.setBigDecimal(<span class="hljs-number">2</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">java</span>.math.BigDecimal(<span class="hljs-string">"14000.00"</span>));
            pstmt1.setDate(<span class="hljs-number">3</span>, java.sql.Date.valueOf(<span class="hljs-string">"2024-01-01"</span>));
            pstmt1.setLong(<span class="hljs-number">4</span>, <span class="hljs-number">1L</span>);
            pstmt1.setLong(<span class="hljs-number">5</span>, <span class="hljs-number">1L</span>);
            pstmt1.executeUpdate();

            <span class="hljs-comment">// 4. æ“ä½œ2ï¼šæ›´æ–°éƒ¨é—¨äººæ•°</span>
            <span class="hljs-type">String</span> <span class="hljs-variable">sql2</span> <span class="hljs-operator">=</span> <span class="hljs-string">"UPDATE dept SET emp_count = emp_count + 1 WHERE dept_id = ?"</span>;
            pstmt2 = conn.prepareStatement(sql2);
            pstmt2.setLong(<span class="hljs-number">1</span>, <span class="hljs-number">1L</span>);
            pstmt2.executeUpdate();

            <span class="hljs-comment">// 5. æäº¤äº‹åŠ¡ï¼ˆæ‰€æœ‰æ“ä½œç”Ÿæ•ˆï¼‰</span>
            conn.commit();
            System.out.println(<span class="hljs-string">"å…¥èŒæ“ä½œæˆåŠŸï¼Œäº‹åŠ¡æäº¤ï¼"</span>);

        } <span class="hljs-keyword">catch</span> (SQLException e) {
            e.printStackTrace();
            <span class="hljs-comment">// 6. å‘ç”Ÿå¼‚å¸¸ï¼Œå›æ»šäº‹åŠ¡</span>
            <span class="hljs-keyword">try</span> {
                <span class="hljs-keyword">if</span> (conn != <span class="hljs-literal">null</span>) {
                    conn.rollback();
                    System.out.println(<span class="hljs-string">"æ“ä½œå¤±è´¥ï¼Œäº‹åŠ¡å›æ»šï¼"</span>);
                }
            } <span class="hljs-keyword">catch</span> (SQLException ex) {
                ex.printStackTrace();
            }
        } <span class="hljs-keyword">finally</span> {
            <span class="hljs-comment">// 7. å…³é—­èµ„æº</span>
            <span class="hljs-keyword">try</span> {
                <span class="hljs-keyword">if</span> (pstmt1 != <span class="hljs-literal">null</span>) pstmt1.close();
                <span class="hljs-keyword">if</span> (pstmt2 != <span class="hljs-literal">null</span>) pstmt2.close();
                <span class="hljs-keyword">if</span> (conn != <span class="hljs-literal">null</span>) {
                    conn.setAutoCommit(<span class="hljs-literal">true</span>); <span class="hljs-comment">// æ¢å¤è‡ªåŠ¨æäº¤</span>
                    conn.close();
                }
            } <span class="hljs-keyword">catch</span> (SQLException e) {
                e.printStackTrace();
            }
        }
    }
}
</code></pre>
<h4 data-id="heading-11">2. MyBatis ä¸­çš„äº‹åŠ¡æ§åˆ¶</h4>
<p>MyBatis çš„äº‹åŠ¡é»˜è®¤ç”±<code>SqlSession</code>æ§åˆ¶ï¼Œé»˜è®¤å…³é—­è‡ªåŠ¨æäº¤ï¼Œéœ€æ‰‹åŠ¨<code>commit()</code>æˆ–<code>rollback()</code>ï¼š</p>
<h5 data-id="heading-12">ï¼ˆ1ï¼‰ç¼–å†™ Mapper æ¥å£å’Œ XML</h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// EmpMapper.java</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">EmpMapper</span> {
    <span class="hljs-comment">// æ’å…¥å‘˜å·¥</span>
    <span class="hljs-type">int</span> <span class="hljs-title function_">insertEmp</span><span class="hljs-params">(Emp emp)</span>;
}

<span class="hljs-comment">// DeptMapper.java</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">DeptMapper</span> {
    <span class="hljs-comment">// æ›´æ–°éƒ¨é—¨äººæ•°</span>
    <span class="hljs-type">int</span> <span class="hljs-title function_">updateDeptCount</span><span class="hljs-params">(<span class="hljs-meta">@Param("deptId")</span> Long deptId, <span class="hljs-meta">@Param("count")</span> <span class="hljs-type">int</span> count)</span>;
}
</code></pre>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- EmpMapper.xml --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">insert</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"insertEmp"</span>&gt;</span>
    INSERT INTO emp (emp_name, emp_salary, hire_date, dept_id, manager_id)
    VALUES (#{empName}, #{empSalary}, #{hireDate}, #{deptId}, #{managerId})
<span class="hljs-tag">&lt;/<span class="hljs-name">insert</span>&gt;</span>

<span class="hljs-comment">&lt;!-- DeptMapper.xml --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">update</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"updateDeptCount"</span>&gt;</span>
    UPDATE dept SET emp_count = emp_count + #{count} WHERE dept_id = #{deptId}
<span class="hljs-tag">&lt;/<span class="hljs-name">update</span>&gt;</span>
</code></pre>
<h5 data-id="heading-13">ï¼ˆ2ï¼‰MyBatis äº‹åŠ¡å®æˆ˜</h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.apache.ibatis.session.SqlSession;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyBatisTransactionDemo</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-comment">// 1. è·å–SqlSessionï¼ˆé»˜è®¤autoCommit=falseï¼‰</span>
        <span class="hljs-keyword">try</span> (<span class="hljs-type">SqlSession</span> <span class="hljs-variable">session</span> <span class="hljs-operator">=</span> MyBatisUtil.getSqlSession(<span class="hljs-literal">false</span>)) {
            <span class="hljs-comment">// 2. è·å–Mapper</span>
            <span class="hljs-type">EmpMapper</span> <span class="hljs-variable">empMapper</span> <span class="hljs-operator">=</span> session.getMapper(EmpMapper.class);
            <span class="hljs-type">DeptMapper</span> <span class="hljs-variable">deptMapper</span> <span class="hljs-operator">=</span> session.getMapper(DeptMapper.class);

            <span class="hljs-comment">// 3. æ„å»ºå‘˜å·¥å¯¹è±¡</span>
            <span class="hljs-type">Emp</span> <span class="hljs-variable">emp</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Emp</span>();
            emp.setEmpName(<span class="hljs-string">"é’±å…«"</span>);
            emp.setEmpSalary(<span class="hljs-keyword">new</span> <span class="hljs-title class_">java</span>.math.BigDecimal(<span class="hljs-string">"14000.00"</span>));
            emp.setHireDate(java.sql.Date.valueOf(<span class="hljs-string">"2024-01-01"</span>));
            emp.setDeptId(<span class="hljs-number">1L</span>);
            emp.setManagerId(<span class="hljs-number">1L</span>);

            <span class="hljs-comment">// 4. æ‰§è¡Œæ“ä½œ</span>
            empMapper.insertEmp(emp);
            deptMapper.updateDeptCount(<span class="hljs-number">1L</span>, <span class="hljs-number">1</span>);

            <span class="hljs-comment">// 5. æäº¤äº‹åŠ¡</span>
            session.commit();
            System.out.println(<span class="hljs-string">"å…¥èŒæ“ä½œæˆåŠŸï¼Œäº‹åŠ¡æäº¤ï¼"</span>);

        } <span class="hljs-keyword">catch</span> (Exception e) {
            e.printStackTrace();
            <span class="hljs-comment">// 6. å¼‚å¸¸å›æ»šï¼ˆtry-with-resourcesä¼šè‡ªåŠ¨å…³é—­sessionï¼Œè§¦å‘rollbackï¼‰</span>
            System.out.println(<span class="hljs-string">"æ“ä½œå¤±è´¥ï¼Œäº‹åŠ¡å›æ»šï¼"</span>);
        }
    }
}
</code></pre>
<h4 data-id="heading-14">3. Spring å£°æ˜å¼äº‹åŠ¡ï¼ˆç”Ÿäº§ç¯å¢ƒé¦–é€‰ï¼‰</h4>
<p>åœ¨ Spring/Spring Boot é¡¹ç›®ä¸­ï¼Œæ¨èä½¿ç”¨<code>@Transactional</code>æ³¨è§£å®ç° â€œå£°æ˜å¼äº‹åŠ¡â€ï¼Œæ— éœ€æ‰‹åŠ¨æ§åˆ¶<code>commit/rollback</code>ï¼Œæ›´ç®€æ´é«˜æ•ˆï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.springframework.stereotype.Service;
<span class="hljs-keyword">import</span> org.springframework.transaction.annotation.Transactional;

<span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">EmpDeptService</span> {
    <span class="hljs-comment">// æ³¨å…¥Mapper</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> EmpMapper empMapper;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> DeptMapper deptMapper;

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">EmpDeptService</span><span class="hljs-params">(EmpMapper empMapper, DeptMapper deptMapper)</span> {
        <span class="hljs-built_in">this</span>.empMapper = empMapper;
        <span class="hljs-built_in">this</span>.deptMapper = deptMapper;
    }

    <span class="hljs-comment">// å£°æ˜äº‹åŠ¡ï¼šé»˜è®¤å‘ç”ŸRuntimeExceptionæ—¶å›æ»š</span>
    <span class="hljs-meta">@Transactional(rollbackFor = Exception.class)</span> <span class="hljs-comment">// æ•è·æ‰€æœ‰å¼‚å¸¸å›æ»š</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">addEmpWithDept</span><span class="hljs-params">(Emp emp)</span> {
        <span class="hljs-comment">// 1. æ’å…¥å‘˜å·¥</span>
        empMapper.insertEmp(emp);
        <span class="hljs-comment">// 2. æ›´æ–°éƒ¨é—¨äººæ•°</span>
        deptMapper.updateDeptCount(emp.getDeptId(), <span class="hljs-number">1</span>);
        
        <span class="hljs-comment">// æ¨¡æ‹Ÿå¼‚å¸¸ï¼ˆæµ‹è¯•å›æ»šï¼‰</span>
        <span class="hljs-comment">// int i = 1 / 0;</span>
    }
}
</code></pre>
<p><strong>å…³é”®è¯´æ˜</strong>ï¼š</p>
<ul>
<li><code>@Transactional</code>é»˜è®¤åªæ•è·<code>RuntimeException</code>ï¼Œéœ€é€šè¿‡<code>rollbackFor = Exception.class</code>æŒ‡å®šæ•è·æ‰€æœ‰å¼‚å¸¸ï¼›</li>
<li>å¯é€šè¿‡<code>isolation</code>å±æ€§è®¾ç½®éš”ç¦»çº§åˆ«ï¼ˆå¦‚<code>isolation = Isolation.REPEATABLE_READ</code>ï¼‰ï¼›</li>
<li>å¯é€šè¿‡<code>propagation</code>å±æ€§è®¾ç½®äº‹åŠ¡ä¼ æ’­è¡Œä¸ºï¼ˆå¦‚<code>REQUIRED</code>ï¼šé»˜è®¤ï¼Œæœ‰äº‹åŠ¡åˆ™åŠ å…¥ï¼Œæ— åˆ™æ–°å»ºï¼‰ã€‚</li>
</ul>
<h2 data-id="heading-15">å…­ã€äº‹åŠ¡çš„å¸¸è§é—®é¢˜ä¸æœ€ä½³å®è·µ</h2>
<h4 data-id="heading-16">1. å¸¸è§é—®é¢˜æ’æŸ¥</h4>
<ul>
<li><strong>äº‹åŠ¡ä¸å›æ»š</strong>ï¼šæ£€æŸ¥æ˜¯å¦æ•è·äº†å¼‚å¸¸ï¼ˆæœªæŠ›å‡ºå¼‚å¸¸åˆ™ Spring ä¸ä¼šå›æ»šï¼‰ã€æ˜¯å¦æ˜¯éè¿è¡Œæ—¶å¼‚å¸¸ï¼ˆéœ€æŒ‡å®š<code>rollbackFor</code>ï¼‰ã€æ˜¯å¦è°ƒç”¨äº†é public æ–¹æ³•ï¼ˆ<code>@Transactional</code>ä»…å¯¹ public æ–¹æ³•ç”Ÿæ•ˆï¼‰ï¼›</li>
<li><strong>é•¿äº‹åŠ¡å¯¼è‡´æ€§èƒ½é—®é¢˜</strong>ï¼šé•¿äº‹åŠ¡ä¼šå ç”¨æ•°æ®åº“è¿æ¥ã€æŒæœ‰é”æ—¶é—´é•¿ï¼Œå¯¼è‡´å¹¶å‘ä¸‹é™ï¼Œéœ€å°½é‡ç¼©å°äº‹åŠ¡èŒƒå›´ï¼›</li>
<li><strong>æ­»é”</strong>ï¼šå¤šä¸ªäº‹åŠ¡äº’ç›¸ç­‰å¾…å¯¹æ–¹æŒæœ‰çš„é”ï¼Œå¯é€šè¿‡<code>SHOW ENGINE INNODB STATUS</code>æŸ¥çœ‹æ­»é”æ—¥å¿—ï¼Œä¼˜åŒ– SQL æ‰§è¡Œé¡ºåºã€‚</li>
</ul>
<h4 data-id="heading-17">2. æ ¸å¿ƒæœ€ä½³å®è·µ</h4>
<h5 data-id="heading-18">ï¼ˆ1ï¼‰å°½é‡ç¼©å°äº‹åŠ¡èŒƒå›´</h5>
<p>åªå°† â€œå¿…é¡»åŸå­æ‰§è¡Œâ€ çš„æ“ä½œæ”¾å…¥äº‹åŠ¡ï¼Œé¿å…æ— å…³æ“ä½œï¼ˆå¦‚æ—¥å¿—æ‰“å°ã€è¿œç¨‹è°ƒç”¨ï¼‰ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Transactional</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">addEmpWithDept</span><span class="hljs-params">(Emp emp)</span> {
    <span class="hljs-comment">// äº‹åŠ¡å†…ï¼šæ ¸å¿ƒæ“ä½œï¼ˆå¿…é¡»åŸå­ï¼‰</span>
    empMapper.insertEmp(emp);
    deptMapper.updateDeptCount(emp.getDeptId(), <span class="hljs-number">1</span>);
}

<span class="hljs-comment">// äº‹åŠ¡å¤–ï¼šæ— å…³æ“ä½œ</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">logEmpAdd</span><span class="hljs-params">(Emp emp)</span> {
    logger.info(<span class="hljs-string">"æ–°å¢å‘˜å·¥ï¼š{}"</span>, emp.getEmpName());
}
</code></pre>
<h5 data-id="heading-19">ï¼ˆ2ï¼‰é¿å…é•¿äº‹åŠ¡</h5>
<ul>
<li>ä¸åœ¨äº‹åŠ¡å†…æ‰§è¡Œè€—æ—¶æ“ä½œï¼ˆå¦‚æ–‡ä»¶ä¸Šä¼ ã€ç¬¬ä¸‰æ–¹æ¥å£è°ƒç”¨ï¼‰ï¼›</li>
<li>æ‰¹é‡æ“ä½œå¯æ‹†åˆ†ä¸ºå¤šä¸ªå°äº‹åŠ¡ï¼ˆå¦‚æ¯ 1000 æ¡æ•°æ®æäº¤ä¸€æ¬¡ï¼‰ã€‚</li>
</ul>
<h5 data-id="heading-20">ï¼ˆ3ï¼‰åˆç†è®¾ç½®éš”ç¦»çº§åˆ«</h5>
<ul>
<li>æ™®é€šä¸šåŠ¡ï¼šä½¿ç”¨ MySQL é»˜è®¤çš„<code>REPEATABLE READ</code>ï¼›</li>
<li>é«˜å¹¶å‘è¯»ä¸šåŠ¡ï¼šå¯é™çº§ä¸º<code>READ COMMITTED</code>ï¼ˆæå‡æ€§èƒ½ï¼‰ï¼›</li>
<li>è´¢åŠ¡ / æ ¸å¿ƒæ•°æ®ï¼šä½¿ç”¨<code>SERIALIZABLE</code>ï¼ˆä¿è¯ç»å¯¹ä¸€è‡´æ€§ï¼‰ã€‚</li>
</ul>
<h5 data-id="heading-21">ï¼ˆ4ï¼‰é¿å…æ‰‹åŠ¨é”ä¸äº‹åŠ¡å†²çª</h5>
<p>å°½é‡åˆ©ç”¨äº‹åŠ¡çš„éš”ç¦»çº§åˆ«å’Œ MVCCï¼Œè€Œéæ‰‹åŠ¨åŠ é”ï¼ˆå¦‚<code>SELECT ... FOR UPDATE</code>ï¼‰ï¼Œæ‰‹åŠ¨é”æ˜“å¯¼è‡´æ­»é”ã€‚</p>
<h5 data-id="heading-22">ï¼ˆ5ï¼‰ç›‘æ§äº‹åŠ¡æ‰§è¡Œæƒ…å†µ</h5>
<p>ç”Ÿäº§ç¯å¢ƒéœ€ç›‘æ§é•¿äº‹åŠ¡ã€æ­»é”ã€äº‹åŠ¡å¤±è´¥ç‡ï¼Œå¯é€šè¿‡ MySQL çš„<code>information_schema</code>è¡¨æŸ¥è¯¢ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- æŸ¥è¯¢å½“å‰è¿è¡Œçš„äº‹åŠ¡</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> information_schema.INNODB_TRX;
<span class="hljs-comment">-- æŸ¥è¯¢æ­»é”æ—¥å¿—</span>
<span class="hljs-keyword">SHOW</span> ENGINE INNODB STATUS;
</code></pre>
<h2 data-id="heading-23">ä¸ƒã€æ€»ç»“ä¸æ‹“å±•</h2>
<p>æœ¬æ–‡ä»¥ â€œéƒ¨é—¨ - å‘˜å·¥â€ åœºæ™¯ä¸ºæ ¸å¿ƒï¼Œè®²è§£äº†äº‹åŠ¡çš„ ACID ç‰¹æ€§ã€éš”ç¦»çº§åˆ«ã€åŸºç¡€è¯­æ³•ï¼Œä»¥åŠ JDBC/MyBatis/Spring ä¸­çš„å®æˆ˜è½åœ°ï¼Œæ ¸å¿ƒè¦ç‚¹æ€»ç»“ï¼š</p>
<ol>
<li>
<p><strong>äº‹åŠ¡çš„æ ¸å¿ƒç›®æ ‡</strong>ï¼šä¿è¯ä¸€ç»„æ“ä½œçš„åŸå­æ€§ï¼Œé¿å…æ•°æ®ä¸ä¸€è‡´ï¼Œéµå¾ª ACID å››å¤§ç‰¹æ€§ï¼›</p>
</li>
<li>
<p><strong>éš”ç¦»çº§åˆ«é€‰æ‹©</strong>ï¼šé»˜è®¤ç”¨<code>REPEATABLE READ</code>ï¼Œæ ¹æ®ä¸šåŠ¡åœºæ™¯å¹³è¡¡ â€œéš”ç¦»æ€§â€ å’Œ â€œå¹¶å‘æ€§èƒ½â€ï¼›</p>
</li>
<li>
<p><strong>å®æˆ˜å»ºè®®</strong>ï¼š</p>
<ul>
<li>åŸç”Ÿ JDBC/MyBatisï¼šæ‰‹åŠ¨æ§åˆ¶<code>commit/rollback</code>ï¼Œå…³é—­è‡ªåŠ¨æäº¤ï¼›</li>
<li>Spring é¡¹ç›®ï¼šä¼˜å…ˆä½¿ç”¨<code>@Transactional</code>å£°æ˜å¼äº‹åŠ¡ï¼Œç®€åŒ–å¼€å‘ï¼›</li>
</ul>
</li>
<li>
<p><strong>æ€§èƒ½ä¼˜åŒ–</strong>ï¼šç¼©å°äº‹åŠ¡èŒƒå›´ã€é¿å…é•¿äº‹åŠ¡ã€ç›‘æ§æ­»é”å’Œé•¿äº‹åŠ¡ã€‚</p>
</li>
</ol>
<h4 data-id="heading-24">æ‹“å±•æ–¹å‘ï¼š</h4>
<ul>
<li><strong>åˆ†å¸ƒå¼äº‹åŠ¡</strong>ï¼šè·¨å¤šä¸ªæ•°æ®åº“ / æœåŠ¡çš„äº‹åŠ¡ï¼Œå¯ä½¿ç”¨ Seataã€TCCã€SAGA ç­‰æ–¹æ¡ˆï¼›</li>
<li><strong>äº‹åŠ¡æ—¥å¿—</strong>ï¼šäº†è§£ Redo Log/Undo Log çš„å·¥ä½œåŸç†ï¼Œç†è§£äº‹åŠ¡æŒä¹…æ€§å’Œå›æ»šçš„åº•å±‚å®ç°ï¼›</li>
<li><strong>é”æœºåˆ¶</strong>ï¼šæ·±å…¥å­¦ä¹  InnoDB çš„è¡Œé”ã€è¡¨é”ã€é—´éš™é”ï¼Œç†è§£éš”ç¦»çº§åˆ«ä¸é”çš„å…³ç³»ã€‚</li>
</ul>
<p>äº‹åŠ¡æ˜¯æ•°æ®åº“ä¿è¯æ•°æ®ä¸€è‡´æ€§çš„æ ¸å¿ƒæœºåˆ¶ï¼Œä¹Ÿæ˜¯ä¼ä¸šçº§å¼€å‘ä¸­å¿…é¡»æŒæ¡çš„æŠ€èƒ½ã€‚æŒæ¡äº‹åŠ¡çš„ä½¿ç”¨ä¸ä¼˜åŒ–ï¼Œä¸ä»…èƒ½é¿å…æ•°æ®é”™è¯¯ï¼Œè¿˜èƒ½æå‡ç³»ç»Ÿçš„å¹¶å‘æ€§èƒ½å’Œç¨³å®šæ€§ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Pyinstallerè¿›é˜¶ä¹‹æ„å»ºç®¡ç†å¤§æ€å™¨-SPECæ–‡ä»¶]]></title>    <link>https://juejin.cn/post/7588086766235369510</link>    <guid>https://juejin.cn/post/7588086766235369510</guid>    <pubDate>2025-12-26T12:35:15.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588086766235369510" data-draft-id="7587997893987713051" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Pyinstallerè¿›é˜¶ä¹‹æ„å»ºç®¡ç†å¤§æ€å™¨-SPECæ–‡ä»¶"/> <meta itemprop="keywords" content="åç«¯,Python,ç¨‹åºå‘˜"/> <meta itemprop="datePublished" content="2025-12-26T12:35:15.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å”å”åœ¨å­¦ä¹ "/> <meta itemprop="url" content="https://juejin.cn/user/4009253326568761"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Pyinstallerè¿›é˜¶ä¹‹æ„å»ºç®¡ç†å¤§æ€å™¨-SPECæ–‡ä»¶
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4009253326568761/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å”å”åœ¨å­¦ä¹ 
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-26T12:35:15.000Z" title="Fri Dec 26 2025 12:35:15 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    7
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>ç”¨è¿‡ <code>python</code> æ‰“åŒ…ç”Ÿæˆ <code>Windows</code> å¯æ‰§è¡Œç¨‹åºçš„åŒå­¦ï¼Œå¤§æ¦‚ç‡éƒ½ç”¨è¿‡å¤§åé¼é¼çš„ <code>pyinstaller</code> åº“å§ã€‚</p>
</blockquote>
<p><code>pyinstaller</code> å¦‚æœæƒ³æœ€ç»ˆç”Ÿæˆçš„å¯æ‰§è¡Œç¨‹åºï¼ŒåŒ…æ‹¬åªé™å®šçš„ <code>python</code> æŒ‡å®šæ¨¡å—æˆ–è€…è¦é¢å¤–çš„é™æ€èµ„æºæ–‡ä»¶ï¼Œå†™æ‰§è¡ŒæŒ‡ä»¤ä¸€èˆ¬éƒ½å¾ˆé•¿çš„ã€‚</p>
<pre><code class="hljs language-shell" lang="shell">pyinstaller --noconfirm --log-level=WARN \
    --onefile --nowindow \
    --add-data="README:." \
    --add-data="image1.png:img" \
    --add-binary="libfoo.so:lib" \
    --hidden-import=secret1 \
    --hidden-import=secret2 \
    --upx-dir=/usr/local/share
</code></pre>
<p>è€Œæœ‰æ²¡æœ‰ä¸€ç§æ–¹å¼å¯ä»¥æ›´å¥½åœ°è¿›è¡Œ <code>pyinstaller</code> çš„æ„å»ºç®¡ç†å‘¢ï¼Ÿçœ‹ <a href="https://link.juejin.cn?target=https%3A%2F%2Fpyinstaller.org%2Fen%2Fstable%2Fspec-files.html" target="_blank" title="https://pyinstaller.org/en/stable/spec-files.html" ref="nofollow noopener noreferrer">å®˜ç½‘æ–‡æ¡£ï¼šUsing Spec Files â€” PyInstaller 6.17.0 documentation</a>ï¼Œé‚£å°±æ˜¯ä½¿ç”¨ <code>spec</code> æ–‡ä»¶è¿›è¡Œæ„å»ºç®¡ç†ã€‚</p>
<p>PSï¼šå¦‚æœå¯¹ pyinstaller åŸºç¡€ä½¿ç”¨ä¸å¤ªäº†è§£ï¼Œä¹Ÿå¯ä»¥çœ‹çœ‹å°ç¼–çš„å¾€æœŸæ–‡ç« ã€‚
<a href="https://juejin.cn/post/7562095444215791631" target="_blank" title="https://juejin.cn/post/7562095444215791631">Pyinstaller - Pythonæ¡Œé¢åº”ç”¨æ‰“åŒ…çš„é¦–é€‰å·¥å…· - æ˜é‡‘</a></p>
<h2 data-id="heading-0">1. specæ–‡ä»¶çš„æ„æˆå’Œä½¿ç”¨</h2>
<p>Q1ï¼šæ€ä¹ˆä½¿ç”¨ <code>spec</code> æ–‡ä»¶å‘¢ï¼Ÿå¾ˆç®€å•ï¼šæ‰§è¡Œ <code>pyinstaller</code> æŒ‡ä»¤æ—¶å¸¦ä¸Šå¯¹åº”çš„ <code>spec</code> æ–‡ä»¶å³å¯ã€‚</p>
<pre><code class="hljs language-shell" lang="shell">pyinstaller --clean --noconfirm xxx.spec
</code></pre>
<p>Q2ï¼š<code>spec</code> æ–‡ä»¶æ˜¯æ€ä¹ˆåšåˆ°æœ‰æ•ˆæ„å»ºå’Œç®¡ç†æ¨¡å—å’Œèµ„æºæ–‡ä»¶çš„å‘¢ï¼Ÿ</p>
<p>ä¸»è¦é€šè¿‡ä¸‹é¢å‡ ä¸ªæ ¸å¿ƒçš„é…ç½®æ­¥éª¤ï¼šAnalysis-åˆ†æä¾èµ– â†’ PYZ-æ‰“åŒ…æ¨¡å— â†’ EXE-ç”Ÿæˆexe â†’ [COLLECT-æ”¶é›†æ–‡ä»¶]</p>
<p>ğŸ’¡æ¸©é¦¨æç¤ºï¼šå•æ–‡ä»¶æ¨¡å¼ä¸‹ï¼Œä¸éœ€è¦é¢å¤–è¿›è¡Œç¬¬å››æ­¥éª¤æ”¶é›†æ–‡ä»¶ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a15f5b28c8a5419ba3ab92cec90b88f6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZSQ5Y-U5Zyo5a2m5Lmg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767405208&amp;x-signature=iCNIkuDSi2hm%2BAUjxVePCugSJEw%3D" alt="" loading="lazy"/></p>
<p>ä¸‹é¢å…·ä½“å±•å¼€è¿›è¡Œä»‹ç»ã€‚</p>
<hr/>
<h2 data-id="heading-1">2. Analysis ç±»</h2>
<h3 data-id="heading-2">2.1 ä½œç”¨åœºæ™¯</h3>
<p><strong>ä¾èµ–åˆ†æå™¨</strong>ï¼Œè¿™æ˜¯æ‰“åŒ…è¿‡ç¨‹çš„æ ¸å¿ƒæ­¥éª¤ã€‚å®ƒä¼šï¼š</p>
<ul>
<li>åˆ†æä½ çš„Pythonè„šæœ¬</li>
<li>é€’å½’æŸ¥æ‰¾æ‰€æœ‰å¯¼å…¥çš„æ¨¡å—</li>
<li>æ”¶é›†æ‰€æœ‰éœ€è¦çš„æ–‡ä»¶ï¼ˆPythonæ¨¡å—ã€æ‰©å±•æ¨¡å—ã€æ•°æ®æ–‡ä»¶ç­‰ï¼‰</li>
</ul>
<blockquote>
<p>âœï¸ å¼€å¤´è¯´çš„ç®¡ç†æ¨¡å—å’Œæ•°æ®æ–‡ä»¶ï¼Œå°±ä¸»è¦åœ¨è¿™é‡Œè¿›è¡Œé…ç½®çš„ã€‚</p>
</blockquote>
<h3 data-id="heading-3">2.2 å‚æ•°é…ç½®è¯¦è§£</h3>
<p>è¿™é‡Œæˆ‘ç”¨çš„æ¯”è¾ƒå¤šçš„å°±Â <code>excludes</code>Â ã€<code>hiddenimports</code>Â å’ŒÂ <code>datas</code>ï¼Œå…¶ä»–é»˜è®¤å¡«å†™æˆ–æŒ‰ç…§æ¨¡æ¿å³å¯ã€‚</p>
<pre><code class="hljs language-python" lang="python">a = Analysis(
    <span class="hljs-comment"># ============ å¿…éœ€å‚æ•° ============</span>
    scripts=[<span class="hljs-string">'main.py'</span>],  <span class="hljs-comment"># ä¸»è„šæœ¬åˆ—è¡¨</span>

    <span class="hljs-comment"># ============ è·¯å¾„ç›¸å…³ ============</span>
    pathex=[<span class="hljs-string">'/path/to/project'</span>, <span class="hljs-string">'/another/path'</span>],  <span class="hljs-comment"># æ¨¡å—æœç´¢è·¯å¾„</span>
    hookspath=[<span class="hljs-string">'custom_hooks'</span>],  <span class="hljs-comment"># è‡ªå®šä¹‰hookæ–‡ä»¶è·¯å¾„</span>
    runtime_hooks=[<span class="hljs-string">'runtime_hooks/hook-qt.py'</span>],  <span class="hljs-comment"># è¿è¡Œæ—¶hookè„šæœ¬</span>

    <span class="hljs-comment"># ============ æ¨¡å—å¤„ç† ============</span>
    excludes=[                          <span class="hljs-comment"># æ’é™¤çš„æ¨¡å—ï¼ˆå‡å°‘åŒ…ä½“ç§¯ï¼‰</span>
        <span class="hljs-string">'tkinter'</span>,
        <span class="hljs-string">'unittest'</span>,
        <span class="hljs-string">'pydoc'</span>,
        <span class="hljs-string">'pdb'</span>,
        <span class="hljs-string">'matplotlib'</span>
    ],
    hiddenimports=[                     <span class="hljs-comment"># éšè—å¯¼å…¥ï¼ˆåŠ¨æ€å¯¼å…¥çš„æ¨¡å—ï¼‰</span>
        <span class="hljs-string">'PIL._imaging'</span>,
        <span class="hljs-string">'sklearn.utils._weight_vector'</span>,
        <span class="hljs-string">'pandas._libs.tslibs.timedeltas'</span>
    ],
    win_no_prefer_redirects=<span class="hljs-literal">False</span>,      <span class="hljs-comment"># Windowsä¸“ç”¨ï¼šDLLé‡å®šå‘</span>
    win_private_assemblies=<span class="hljs-literal">False</span>,       <span class="hljs-comment"># Windowsä¸“ç”¨ï¼šç§æœ‰ç¨‹åºé›†</span>

    <span class="hljs-comment"># ============ æ–‡ä»¶æ”¶é›† ============</span>
    datas=[                            <span class="hljs-comment"># éPythonæ–‡ä»¶ï¼ˆé…ç½®æ–‡ä»¶ã€å›¾ç‰‡ç­‰ï¼‰</span>
        (<span class="hljs-string">'config.json'</span>, <span class="hljs-string">'.'</span>),          <span class="hljs-comment"># (æºæ–‡ä»¶, ç›®æ ‡ç›®å½•)</span>
        (<span class="hljs-string">'images/*.png'</span>, <span class="hljs-string">'images'</span>),
        (<span class="hljs-string">'data/*.csv'</span>, <span class="hljs-string">'data'</span>)
    ],
    binaries=[                         <span class="hljs-comment"># äºŒè¿›åˆ¶æ–‡ä»¶ï¼ˆ.so, .dllç­‰ï¼‰</span>
        (<span class="hljs-string">'/usr/lib/libssl.so'</span>, <span class="hljs-string">'lib'</span>), <span class="hljs-comment"># (æºæ–‡ä»¶, ç›®æ ‡ç›®å½•)</span>
        (<span class="hljs-string">'C:/Windows/System32/msvcp140.dll'</span>, <span class="hljs-string">'.'</span>)
    ],

    <span class="hljs-comment"># ============ é«˜çº§é€‰é¡¹ ============</span>
    cipher=block_cipher,               <span class="hljs-comment"># åŠ å¯†å­—èŠ‚ç çš„å¯†é’¥</span>
    noarchive=<span class="hljs-literal">False</span>,                   <span class="hljs-comment"># True=ä¸è§£å‹åˆ°ä¸´æ—¶ç›®å½•</span>
    optimize=<span class="hljs-number">0</span>,                        <span class="hljs-comment"># å­—èŠ‚ç ä¼˜åŒ–çº§åˆ«ï¼š-1, 0, 1, 2</span>
    upx=<span class="hljs-literal">False</span>,                         <span class="hljs-comment"># æ˜¯å¦ç”¨UPXå‹ç¼©ï¼ˆå·²å¼ƒç”¨ï¼Œåœ¨EXEä¸­è®¾ç½®ï¼‰</span>
    upx_exclude=[],                    <span class="hljs-comment"># æ’é™¤UPXå‹ç¼©çš„æ–‡ä»¶</span>
    strip=<span class="hljs-literal">False</span>,                       <span class="hljs-comment"># æ˜¯å¦å»é™¤ç¬¦å·ä¿¡æ¯</span>
    prefetch=<span class="hljs-literal">False</span>,                    <span class="hljs-comment"># é¢„å–æ¨¡å¼ï¼ˆå®éªŒæ€§ï¼‰</span>
    name=<span class="hljs-literal">None</span>,                         <span class="hljs-comment"># åˆ†æåç§°ï¼ˆç”¨äºå¤šç¨‹åºæ‰“åŒ…ï¼‰</span>
)
</code></pre>
<h3 data-id="heading-4">2.3 å®é™…ç¤ºä¾‹</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># å¤æ‚çš„Analysisé…ç½®</span>
block_cipher = pyi_crypto.PyiBlockCipher(key=<span class="hljs-string">'my-secret-key'</span>)

a = Analysis(
    [<span class="hljs-string">'app_main.py'</span>, <span class="hljs-string">'helper.py'</span>],  <span class="hljs-comment"># å¤šä¸ªå…¥å£æ–‡ä»¶</span>
    pathex=[os.getcwd(), <span class="hljs-string">'../shared_libs'</span>],
    binaries=[
        (<span class="hljs-string">'lib/ffmpeg.exe'</span>, <span class="hljs-string">'bin'</span>),
        (<span class="hljs-string">'lib/iconv.dll'</span>, <span class="hljs-string">'bin'</span>)
    ],
    datas=[
        (<span class="hljs-string">'ui/*.ui'</span>, <span class="hljs-string">'ui'</span>),           <span class="hljs-comment"># Qt Designeræ–‡ä»¶</span>
        (<span class="hljs-string">'locales/*.qm'</span>, <span class="hljs-string">'locales'</span>), <span class="hljs-comment"># ç¿»è¯‘æ–‡ä»¶</span>
        (<span class="hljs-string">'*.ini'</span>, <span class="hljs-string">'.'</span>),              <span class="hljs-comment"># é…ç½®æ–‡ä»¶</span>
        (<span class="hljs-string">'docs/*.md'</span>, <span class="hljs-string">'docs'</span>)
    ],
    hiddenimports=[
        <span class="hljs-string">'win32timezone'</span>,             <span class="hljs-comment"># pywin32ç›¸å…³</span>
        <span class="hljs-string">'sqlalchemy.sql.default_comparator'</span>,
        <span class="hljs-string">'pkg_resources.py2_warn'</span>
    ],
    hookspath=[<span class="hljs-string">'hooks'</span>],             <span class="hljs-comment"># è‡ªå®šä¹‰hookç›®å½•</span>
    runtime_hooks=[<span class="hljs-string">'hooks/runtime/rthook_pyside6.py'</span>],
    excludes=[<span class="hljs-string">'scipy'</span>, <span class="hljs-string">'numpy.testing'</span>],
    cipher=block_cipher,
    optimize=<span class="hljs-number">1</span>                       <span class="hljs-comment"># å­—èŠ‚ç ä¼˜åŒ–</span>
)
</code></pre>
<h2 data-id="heading-5">3. EXE ç±»</h2>
<h3 data-id="heading-6">3.1 ä½œç”¨åœºæ™¯</h3>
<p><strong>å¯æ‰§è¡Œæ–‡ä»¶æ„å»ºå™¨</strong>ï¼Œå°†åˆ†æç»“æœæ‰“åŒ…æˆæœ€ç»ˆçš„å¯æ‰§è¡Œæ–‡ä»¶ã€‚</p>
<h3 data-id="heading-7">3.2 å‚æ•°é…ç½®è¯¦è§£</h3>
<pre><code class="hljs language-python" lang="python">exe = EXE(
    <span class="hljs-comment"># ============ å¿…éœ€å‚æ•° ============</span>
    pyz,                <span class="hljs-comment"># PYZå¯¹è±¡ï¼ˆåŒ…å«æ‰€æœ‰Pythonæ¨¡å—ï¼‰</span>
    a.scripts,          <span class="hljs-comment"># Analysisçš„scriptsç»“æœ</span>
    a.binaries,         <span class="hljs-comment"># Analysisçš„binariesç»“æœ</span>
    a.zipfiles,         <span class="hljs-comment"># Analysisçš„zipfilesç»“æœ</span>
    a.datas,            <span class="hljs-comment"># Analysisçš„datasç»“æœ</span>

    <span class="hljs-comment"># ============ è¾“å‡ºé…ç½® ============</span>
    name=<span class="hljs-string">'MyApp'</span>,       <span class="hljs-comment"># è¾“å‡ºæ–‡ä»¶åï¼ˆä¸åŠ .exeï¼‰</span>
    debug=<span class="hljs-literal">False</span>,        <span class="hljs-comment"># True=åŒ…å«è°ƒè¯•ä¿¡æ¯</span>
    strip=<span class="hljs-literal">False</span>,        <span class="hljs-comment"># True=å»é™¤ç¬¦å·ä¿¡æ¯ï¼ˆå‡å°ä½“ç§¯ï¼‰</span>
    upx=<span class="hljs-literal">True</span>,           <span class="hljs-comment"># True=ä½¿ç”¨UPXå‹ç¼©ï¼ˆéœ€å®‰è£…UPXï¼‰</span>

    <span class="hljs-comment"># ============ æ§åˆ¶å°/çª—å£è®¾ç½® ============</span>
    console=<span class="hljs-literal">True</span>,       <span class="hljs-comment"># True=æ§åˆ¶å°ç¨‹åºï¼ŒFalse=çª—å£ç¨‹åºï¼ˆWindowsï¼‰</span>
    disable_windowed_traceback=<span class="hljs-literal">False</span>,  <span class="hljs-comment"># ç¦ç”¨çª—å£ç¨‹åºé”™è¯¯è·Ÿè¸ª</span>
    argv_emulation=<span class="hljs-literal">False</span>,  <span class="hljs-comment"># macOS: æ¨¡æ‹Ÿå‘½ä»¤è¡Œå‚æ•°</span>

    <span class="hljs-comment"># ============ å›¾æ ‡å’Œå…ƒæ•°æ® ============</span>
    icon=<span class="hljs-string">'app.ico'</span>,     <span class="hljs-comment"># ç¨‹åºå›¾æ ‡ï¼ˆWindows: .ico, macOS: .icnsï¼‰</span>

    <span class="hljs-comment"># ============ è¿è¡Œæ—¶è¡Œä¸º ============</span>
    bootloader_ignore_signals=<span class="hljs-literal">False</span>,  <span class="hljs-comment"># å¿½ç•¥ä¿¡å·ï¼ˆUnixï¼‰</span>
    runtime_tmpdir=<span class="hljs-literal">None</span>,  <span class="hljs-comment"># ä¸´æ—¶ç›®å½•è·¯å¾„</span>

    <span class="hljs-comment"># ============ é‡å®šå‘è®¾ç½® ============</span>
    exclude_binaries=<span class="hljs-literal">False</span>,  <span class="hljs-comment"># True=ä¸åŒ…å«äºŒè¿›åˆ¶ä¾èµ–</span>
    code_signing_identity=<span class="hljs-literal">None</span>,  <span class="hljs-comment"># macOSä»£ç ç­¾åæ ‡è¯†</span>

    <span class="hljs-comment"># ============ åŠ å¯†å’Œä¼˜åŒ– ============</span>
    entitlements_file=<span class="hljs-literal">None</span>,  <span class="hljs-comment"># macOSæˆæƒæ–‡ä»¶</span>
    embed_manifest=<span class="hljs-literal">True</span>,     <span class="hljs-comment"># Windows: åµŒå…¥manifest</span>
    target_arch=<span class="hljs-literal">None</span>,        <span class="hljs-comment"># ç›®æ ‡æ¶æ„ï¼š'x86', 'x64', 'arm64'</span>

    <span class="hljs-comment"># ============ å…¶ä»–é€‰é¡¹ ============</span>
    <span class="hljs-built_in">ascii</span>=<span class="hljs-literal">False</span>,        <span class="hljs-comment"># å¼ƒç”¨</span>
    uac_admin=<span class="hljs-literal">False</span>,    <span class="hljs-comment"># Windows: ä»¥ç®¡ç†å‘˜è¿è¡Œ</span>
    uac_uiaccess=<span class="hljs-literal">False</span>, <span class="hljs-comment"># Windows: UIè®¿é—®æƒé™</span>

    <span class="hljs-comment"># ============ è°ƒè¯•ç›¸å…³ ============</span>
    bootloader_ignore_signals=<span class="hljs-literal">False</span>,
    strict_arch=<span class="hljs-literal">False</span>,
)
</code></pre>
<h3 data-id="heading-8">3.3 å®é™…ç¤ºä¾‹</h3>
<p>è¿™é‡Œè¿˜çœŸæ²¡æ€ä¹ˆå·®å¼‚åŒ–ä½¿ç”¨è¿‡ï¼Œä¸€èˆ¬éƒ½æ˜¯é…ç½®Â <code>win</code>Â å¹³å°ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># ä¸åŒå¹³å°é…ç½®ç¤ºä¾‹</span>
<span class="hljs-keyword">if</span> sys.platform == <span class="hljs-string">'win32'</span>:
    exe = EXE(
        pyz,
        a.scripts,
        a.binaries,
        a.zipfiles,
        a.datas,
        name=<span class="hljs-string">'MyApp'</span>,
        debug=<span class="hljs-literal">False</span>,
        strip=<span class="hljs-literal">False</span>,
        upx=<span class="hljs-literal">True</span>,
        console=<span class="hljs-literal">False</span>,  <span class="hljs-comment"># æ— æ§åˆ¶å°çª—å£</span>
        icon=<span class="hljs-string">'app.ico'</span>,
        uac_admin=<span class="hljs-literal">True</span>,  <span class="hljs-comment"># éœ€è¦ç®¡ç†å‘˜æƒé™</span>
        embed_manifest=<span class="hljs-literal">True</span>,
        version=<span class="hljs-string">'version_info.txt'</span>  <span class="hljs-comment"># Windowsç‰ˆæœ¬èµ„æº</span>
    )
<span class="hljs-keyword">elif</span> sys.platform == <span class="hljs-string">'darwin'</span>:
    exe = EXE(
        pyz,
        a.scripts,
        a.binaries,
        a.zipfiles,
        a.datas,
        name=<span class="hljs-string">'MyApp'</span>,
        debug=<span class="hljs-literal">False</span>,
        strip=<span class="hljs-literal">True</span>,
        upx=<span class="hljs-literal">False</span>,
        console=<span class="hljs-literal">False</span>,
        icon=<span class="hljs-string">'app.icns'</span>,
        entitlements_file=<span class="hljs-string">'app.entitlements'</span>,
        code_signing_identity=<span class="hljs-string">'Developer ID Application: Your Name (XXXXXX)'</span>
    )
<span class="hljs-keyword">else</span>:  <span class="hljs-comment"># Linux</span>
    exe = EXE(
        pyz,
        a.scripts,
        a.binaries,
        a.zipfiles,
        a.datas,
        name=<span class="hljs-string">'myapp'</span>,
        debug=<span class="hljs-literal">False</span>,
        strip=<span class="hljs-literal">True</span>,
        upx=<span class="hljs-literal">True</span>,
        console=<span class="hljs-literal">True</span>  <span class="hljs-comment"># Linuxé€šå¸¸ç”¨æ§åˆ¶å°</span>
    )
</code></pre>
<h2 data-id="heading-9">4. todo-liståº”ç”¨å®Œæ•´æ–‡ä»¶ç¤ºä¾‹</h2>
<p>ä»¥æœ€è¿‘æˆ‘åœ¨æ’°å†™çš„ <code>todo-list</code> åº”ç”¨çš„æ‰“åŒ…é…ç½®æ–‡ä»¶ä¸ºä¾‹ï¼Œè¿™ä¸ªä¸»è¦æ˜¯ <code>AI</code> ç¼–å†™çš„ï¼Œæˆ‘å°±æ”¹äº†å‡ è¡Œä»£ç è€Œå·²ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># -*- mode: python ; coding: utf-8 -*-</span>

<span class="hljs-keyword">import</span> sys
<span class="hljs-keyword">from</span> pathlib <span class="hljs-keyword">import</span> Path

<span class="hljs-comment"># è·å–é¡¹ç›®æ ¹ç›®å½•</span>
project_root = Path(SPECPATH).parent
frontend_dir = project_root / <span class="hljs-string">'frontend'</span>
data_dir = project_root / <span class="hljs-string">'data'</span>

<span class="hljs-comment"># æ”¶é›†å‰ç«¯æ–‡ä»¶</span>
frontend_files = [
 (<span class="hljs-string">'frontend/index.html'</span>, <span class="hljs-string">'frontend/'</span>),
 (<span class="hljs-string">'frontend/css/*'</span>, <span class="hljs-string">'frontend/css'</span>),
 (<span class="hljs-string">'frontend/js/*'</span>, <span class="hljs-string">'frontend/js'</span>)
]

<span class="hljs-comment"># æ”¶é›†æ•°æ®æ–‡ä»¶</span>
data_files = []
<span class="hljs-keyword">if</span> data_dir.exists():
    <span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> data_dir.rglob(<span class="hljs-string">'*'</span>):
        <span class="hljs-keyword">if</span> item.is_file():
            relative_path = item.relative_to(data_dir)
            data_files.append((<span class="hljs-built_in">str</span>(item), <span class="hljs-string">'data'</span>))

block_cipher = <span class="hljs-literal">None</span>

a = Analysis(
    [<span class="hljs-string">'run.py'</span>],
    pathex=[<span class="hljs-built_in">str</span>(project_root), <span class="hljs-built_in">str</span>(project_root / <span class="hljs-string">'backend'</span>), <span class="hljs-built_in">str</span>(project_root / <span class="hljs-string">'TodoList'</span> / <span class="hljs-string">'backend'</span>)],
    binaries=[],
    datas=frontend_files + data_files,
    hiddenimports=[
        <span class="hljs-string">'webview'</span>,
        <span class="hljs-string">'webview.platforms'</span>,
        <span class="hljs-string">'webview.platforms.cef'</span>,
        <span class="hljs-string">'webview.platforms.edgechromium'</span>,
        <span class="hljs-string">'webview.platforms.mshtml'</span>,
        <span class="hljs-string">'webview.platforms.gtk'</span>,
        <span class="hljs-string">'webview.platforms.cocoa'</span>,
        <span class="hljs-string">'webview.platforms.qt'</span>,
        <span class="hljs-string">'sqlite3'</span>,
        <span class="hljs-string">'json'</span>,
        <span class="hljs-string">'threading'</span>,
        <span class="hljs-string">'datetime'</span>,
        <span class="hljs-string">'http.server'</span>,
        <span class="hljs-string">'socketserver'</span>,
        <span class="hljs-string">'urllib.parse'</span>,
        <span class="hljs-string">'pathlib'</span>,
        <span class="hljs-string">'os'</span>,
        <span class="hljs-string">'sys'</span>,
        <span class="hljs-string">'shutil'</span>,
        <span class="hljs-string">'subprocess'</span>,
        <span class="hljs-string">'re'</span>,
        <span class="hljs-string">'uuid'</span>,
        <span class="hljs-string">'hashlib'</span>,
        <span class="hljs-string">'base64'</span>,
        <span class="hljs-string">'html'</span>,
        <span class="hljs-string">'webbrowser'</span>,
        <span class="hljs-string">'tkinter'</span>,
        <span class="hljs-string">'tkinter.messagebox'</span>,
        <span class="hljs-string">'tkinter.filedialog'</span>,
        <span class="hljs-string">'tkinter.simpledialog'</span>,
        <span class="hljs-comment"># åç«¯æ¨¡å—</span>
        <span class="hljs-string">'database.operations'</span>,
        <span class="hljs-string">'database.models'</span>,
        <span class="hljs-string">'api.todo_api'</span>
    ],
    hookspath=[],
    hooksconfig={},
    runtime_hooks=[],
    excludes=[
        <span class="hljs-string">'matplotlib'</span>,
        <span class="hljs-string">'numpy'</span>,
        <span class="hljs-string">'scipy'</span>,
        <span class="hljs-string">'pandas'</span>,
        <span class="hljs-string">'PIL'</span>,
        <span class="hljs-string">'cv2'</span>,
        <span class="hljs-string">'PyQt6'</span>
    ],
    win_no_prefer_redirects=<span class="hljs-literal">False</span>,
    win_private_assemblies=<span class="hljs-literal">False</span>,
    cipher=block_cipher,
    noarchive=<span class="hljs-literal">False</span>,
)

pyz = PYZ(a.pure, a.zipped_data, cipher=block_cipher)

exe = EXE(
    pyz,
    a.scripts,
    a.binaries,
    a.zipfiles,
    a.datas,
    [],
    name=<span class="hljs-string">'TodoList'</span>,
    debug=<span class="hljs-literal">False</span>,
    bootloader_ignore_signals=<span class="hljs-literal">False</span>,
    strip=<span class="hljs-literal">False</span>,
    upx=<span class="hljs-literal">True</span>,
    upx_exclude=[],
    runtime_tmpdir=<span class="hljs-literal">None</span>,
    console=<span class="hljs-literal">False</span>,
    disable_windowed_traceback=<span class="hljs-literal">False</span>,
    argv_emulation=<span class="hljs-literal">False</span>,
    target_arch=<span class="hljs-literal">None</span>,
    codesign_identity=<span class="hljs-literal">None</span>,
    entitlements_file=<span class="hljs-literal">None</span>,
    icon=<span class="hljs-string">'todo_icon.ico'</span> <span class="hljs-keyword">if</span> Path(<span class="hljs-string">'todo_icon.ico'</span>).exists() <span class="hljs-keyword">else</span> <span class="hljs-literal">None</span>,
    version=<span class="hljs-string">'version_info.txt'</span> <span class="hljs-keyword">if</span> Path(<span class="hljs-string">'version_info.txt'</span>).exists() <span class="hljs-keyword">else</span> <span class="hljs-literal">None</span>
)
</code></pre>
<p>ç¤ºä¾‹ä¸Šå¯ä»¥çœ‹å‡ºå®é™…ä¸Šï¼Œ<code>spec</code> æ–‡ä»¶æ‰§è¡Œæ—¶æ˜¯å¯ä»¥è¯†åˆ« <code>python</code> ä»£ç çš„ã€‚</p>
<h2 data-id="heading-10">5. è¡¥å……è¯´æ˜</h2>
<h3 data-id="heading-11">5.1 é’ˆå¯¹ç‰¹å®šåº“çš„é…ç½®</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># æ‰“åŒ…PyQt6/PySide6åº”ç”¨</span>
a = Analysis(
    [<span class="hljs-string">'app.py'</span>],
    hiddenimports=[
        <span class="hljs-string">'PySide6.QtXml'</span>,
        <span class="hljs-string">'PySide6.QtNetwork'</span>
    ],
    binaries=[
        (<span class="hljs-string">'/path/to/qt/plugins/platforms/*'</span>, <span class="hljs-string">'platforms'</span>)
    ],
    datas=[
        (<span class="hljs-string">'/path/to/qt/translations/*'</span>, <span class="hljs-string">'translations'</span>)
    ]
)

<span class="hljs-comment"># æ‰“åŒ…æœºå™¨å­¦ä¹ åº”ç”¨ï¼ˆæ’é™¤å¤§å‹åº“ï¼‰</span>
a = Analysis(
    [<span class="hljs-string">'ml_app.py'</span>],
    excludes=[
        <span class="hljs-string">'torch'</span>,  <span class="hljs-comment"># å¤ªå¤§ï¼Œè®©ç”¨æˆ·è‡ªå·±å®‰è£…</span>
        <span class="hljs-string">'tensorflow'</span>,
        <span class="hljs-string">'jax'</span>
    ],
    hiddenimports=[
        <span class="hljs-string">'sklearn.utils._cython_blas'</span>,
        <span class="hljs-string">'numpy.core._multiarray_umath'</span>
    ]
)
</code></pre>
<h3 data-id="heading-12">5.2 è°ƒè¯•æŠ€å·§</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># è°ƒè¯•æ¨¡å¼é…ç½®</span>
exe = EXE(
    <span class="hljs-comment"># ...</span>
    debug=<span class="hljs-literal">True</span>,      <span class="hljs-comment"># åŒ…å«è°ƒè¯•ä¿¡æ¯</span>
    strip=<span class="hljs-literal">False</span>,     <span class="hljs-comment"># ä¸å»é™¤ç¬¦å·</span>
    upx=<span class="hljs-literal">False</span>,       <span class="hljs-comment"># ä¸å‹ç¼©ï¼ˆä¾¿äºè°ƒè¯•ï¼‰</span>
    console=<span class="hljs-literal">True</span>     <span class="hljs-comment"># æ˜¾ç¤ºæ§åˆ¶å°çœ‹é”™è¯¯</span>
)

<span class="hljs-comment"># è¿è¡Œæ—¶æŸ¥çœ‹ç¼ºå¤±æ¨¡å—</span>
<span class="hljs-keyword">import</span> sys
<span class="hljs-keyword">if</span> <span class="hljs-built_in">hasattr</span>(sys, <span class="hljs-string">'_MEIPASS'</span>):
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ä¸´æ—¶ç›®å½•: <span class="hljs-subst">{sys._MEIPASS}</span>"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ¨¡å—è·¯å¾„: <span class="hljs-subst">{sys.path}</span>"</span>)
</code></pre>
<h3 data-id="heading-13">5.3 å…¶ä»–è¯´æ˜</h3>
<p>é™¤äº†ç”¨äº <code>pyinstaller</code> çš„æ‰“åŒ…å¤–ï¼Œ<code>spec</code> æ–‡ä»¶ä¹Ÿåœ¨å…¶ä»–åœºæ™¯æœ‰ç›¸å…³ä½¿ç”¨çš„ï¼š</p>
<ol>
<li>
<p><strong>RPMåŒ…ç®¡ç†</strong>ï¼šLinuxç³»ç»Ÿè½¯ä»¶æ‰“åŒ…</p>
</li>
<li>
<p><strong>å…¶ä»–æ„å»ºå·¥å…·</strong>ï¼šä½œä¸ºé…ç½®æ–‡ä»¶ä½¿ç”¨</p>
</li>
</ol>
<p>å¦å¤–æœ‰ç±»ä¼¼ä½œç”¨çš„æ–‡ä»¶è¿˜æœ‰ï¼š<code>setup.cfg</code>ã€<code>pyproject.toml</code> ç­‰</p>
<hr/>
<p>å¥½å•¦ï¼Œä»Šå¤©çš„åˆ†äº«å°±åˆ°è¿™é‡Œäº†ï¼Œæ„Ÿè°¢é˜…è¯»ï¼Œå¦‚æœè§‰å¾—æ–‡ç« å¯¹ä½ æœ‰ç”¨çš„è¯ï¼Œæ¬¢è¿ä¸‰è¿ã€æ¬¢è¿å…³æ³¨ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Elasticsearchæ ¸å¿ƒåŸç†â€”â€”å€’æ’ç´¢å¼•ã€æ˜ å°„ä¸åˆ†è¯å¯¹æœç´¢è´¨é‡çš„å½±å“è·¯å¾„]]></title>    <link>https://juejin.cn/post/7587997157237276724</link>    <guid>https://juejin.cn/post/7587997157237276724</guid>    <pubDate>2025-12-26T12:46:58.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587997157237276724" data-draft-id="7587743345198022708" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Elasticsearchæ ¸å¿ƒåŸç†â€”â€”å€’æ’ç´¢å¼•ã€æ˜ å°„ä¸åˆ†è¯å¯¹æœç´¢è´¨é‡çš„å½±å“è·¯å¾„"/> <meta itemprop="keywords" content="æ¶æ„"/> <meta itemprop="datePublished" content="2025-12-26T12:46:58.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="åæœˆå—åŸ"/> <meta itemprop="url" content="https://juejin.cn/user/3456520290576862"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Elasticsearchæ ¸å¿ƒåŸç†â€”â€”å€’æ’ç´¢å¼•ã€æ˜ å°„ä¸åˆ†è¯å¯¹æœç´¢è´¨é‡çš„å½±å“è·¯å¾„
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3456520290576862/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    åæœˆå—åŸ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-26T12:46:58.000Z" title="Fri Dec 26 2025 12:46:58 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    5
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><strong>å†™åœ¨å‰é¢ï¼Œæœ¬äººç›®å‰å¤„äºæ±‚èŒä¸­ï¼Œå¦‚æœ‰åˆé€‚å†…æ¨å²—ä½ï¼Œè¯·åŠ ï¼šlpshiyue æ„Ÿè°¢ã€‚åŒæ—¶è¿˜æœ›å¤§å®¶ä¸€é”®ä¸‰è¿ï¼Œèµšç‚¹å¥¶ç²‰é’±ã€‚</strong></p>
<blockquote>
<p>æŒæ¡Elasticsearchçš„æœç´¢è´¨é‡ä¼˜åŒ–ï¼Œå…³é”®åœ¨äºç†è§£å€’æ’ç´¢å¼•å¦‚ä½•å°†æ•°æ®è½¬æ¢ä¸ºå¯æœç´¢çš„çŸ¥è¯†å›¾è°±ï¼Œæ˜ å°„å¦‚ä½•å®šä¹‰æ•°æ®çš„DNAç»“æ„ï¼Œä»¥åŠåˆ†è¯å™¨å¦‚ä½•å½±å“æœç´¢çš„ç²¾å‡†åº¦</p>
</blockquote>
<p>åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­å®Œæˆå¤±è´¥å¤„ç½®å’Œå¼¹æ€§è®¾è®¡åï¼Œæˆ‘ä»¬è½¬å‘æ•°æ®æ£€ç´¢çš„æ ¸å¿ƒæŒ‘æˆ˜ã€‚æœç´¢è´¨é‡ç›´æ¥å†³å®šç”¨æˆ·ä½“éªŒï¼Œè€ŒElasticsearchä½œä¸ºé¢†å…ˆçš„æœç´¢å¼•æ“ï¼Œå…¶æ•ˆæœå–å†³äºä¸‰å¤§æ ¸å¿ƒåŸç†çš„ååŒä½œç”¨ã€‚æœ¬æ–‡å°†æ·±å…¥è§£æå€’æ’ç´¢å¼•çš„å·¥ä½œæœºåˆ¶ã€æ˜ å°„çš„è®¾è®¡å“²å­¦å’Œåˆ†è¯å™¨çš„åŒ¹é…ç­–ç•¥ï¼Œæ­ç¤ºå®ƒä»¬å¦‚ä½•å…±åŒå½±å“æœç´¢è´¨é‡ã€‚</p>
<h2 data-id="heading-0">1 å€’æ’ç´¢å¼•ï¼šä»æ–‡æ¡£å­˜å‚¨åˆ°çŸ¥è¯†å›¾è°±çš„æ€ç»´è½¬å˜</h2>
<h3 data-id="heading-1">1.1 æ­£æ’ç´¢å¼•ä¸å€’æ’ç´¢å¼•çš„æœ¬è´¨åŒºåˆ«</h3>
<p>ä¼ ç»Ÿæ•°æ®åº“ä½¿ç”¨<strong>æ­£æ’ç´¢å¼•</strong>ï¼ˆForward Indexï¼‰ï¼Œè¿™æ˜¯ä¸€ç§"æ–‡æ¡£â†’å†…å®¹"çš„æ˜ å°„å…³ç³»ï¼Œç±»ä¼¼äºä¹¦ç±çš„ç›®å½•ï¼ˆé€šè¿‡é¡µç æŸ¥æ‰¾ç« èŠ‚å†…å®¹ï¼‰ã€‚è¿™ç§ç´¢å¼•æ–¹å¼åœ¨å¤„ç†"LIKE '%keyword%'"æŸ¥è¯¢æ—¶éœ€è¦è¿›è¡Œå…¨è¡¨æ‰«æï¼Œéšç€æ•°æ®é‡å¢åŠ ï¼Œæ€§èƒ½æ€¥å‰§ä¸‹é™ã€‚</p>
<p>Elasticsearchçš„æ ¸å¿ƒçªç ´åœ¨äºé‡‡ç”¨<strong>å€’æ’ç´¢å¼•</strong>ï¼ˆInverted Indexï¼‰ï¼Œå®ç°äº†"å†…å®¹â†’æ–‡æ¡£"çš„é€†å‘æ˜ å°„ã€‚è¿™ç›¸å½“äºä¹¦ç±æœ«å°¾çš„å…³é”®è¯ç´¢å¼•ï¼Œç›´æ¥å‘Šè¯‰è¯»è€…æ¯ä¸ªå…³é”®è¯å‡ºç°åœ¨å“ªäº›é¡µç ã€‚</p>
<p><strong>å®é™…ç¤ºä¾‹å¯¹æ¯”</strong>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">  -- ä¼ ç»Ÿæ•°æ®åº“çš„æ­£æ’ç´¢å¼•æŸ¥è¯¢ï¼ˆæ€§èƒ½éšæ•°æ®é‡å¢åŠ è€Œçº¿æ€§ä¸‹é™ï¼‰SELECT * FROM products WHERE title LIKE <span class="hljs-string">'%æ‰‹æœº%'</span> OR description LIKE <span class="hljs-string">'%æ‰‹æœº%'</span>;-- Elasticsearchçš„å€’æ’ç´¢å¼•æŸ¥è¯¢ï¼ˆæ€§èƒ½åŸºæœ¬æ’å®šï¼‰GET /products/_search{  <span class="hljs-string">"query"</span>: {    <span class="hljs-string">"match"</span>: {      <span class="hljs-string">"title"</span>: <span class="hljs-string">"æ‰‹æœº"</span>    }  }}
</code></pre>
<h3 data-id="heading-2">1.2 å€’æ’ç´¢å¼•çš„åº•å±‚ç»“æ„ä¸æ„å»ºè¿‡ç¨‹</h3>
<p>å€’æ’ç´¢å¼•ä¸æ˜¯ç®€å•çš„å…³é”®è¯æ˜ å°„ï¼Œè€Œæ˜¯åŒ…å«ä¸°å¯Œè¯­ä¹‰ä¿¡æ¯çš„<strong>é«˜çº§æ•°æ®ç»“æ„</strong>ã€‚å…¶æ ¸å¿ƒç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼š</p>
<p><strong>è¯é¡¹å­—å…¸</strong>ï¼ˆTerm Dictionaryï¼‰å­˜å‚¨æ‰€æœ‰å”¯ä¸€çš„è¯é¡¹ï¼Œå¹¶æŒ‰å­—å…¸åºæ’åºï¼Œä¾¿äºä½¿ç”¨äºŒåˆ†æŸ¥æ‰¾ç­‰ç®—æ³•å¿«é€Ÿå®šä½ã€‚</p>
<p><strong>å€’æ’åˆ—è¡¨</strong>ï¼ˆPosting Listï¼‰è®°å½•æ¯ä¸ªè¯é¡¹çš„è¯¦ç»†å‡ºç°ä¿¡æ¯ï¼ŒåŒ…å«ï¼š</p>
<ul>
<li>â€¢ <strong>æ–‡æ¡£ID</strong>ï¼ˆDocIDï¼‰ï¼šåŒ…å«è¯¥è¯é¡¹çš„æ–‡æ¡£æ ‡è¯†</li>
<li>â€¢ <strong>è¯é¢‘</strong>ï¼ˆTFï¼‰ï¼šè¯é¡¹åœ¨æ–‡æ¡£ä¸­å‡ºç°çš„æ¬¡æ•°ï¼ˆç›¸å…³æ€§è¯„åˆ†é‡è¦å› ç´ ï¼‰</li>
<li>â€¢ <strong>ä½ç½®</strong>ï¼ˆPositionï¼‰ï¼šè¯é¡¹åœ¨æ–‡æ¡£ä¸­çš„å…·ä½“ä½ç½®ï¼ˆæ”¯æŒçŸ­è¯­æŸ¥è¯¢ï¼‰</li>
<li>â€¢ <strong>åç§»é‡</strong>ï¼ˆOffsetï¼‰ï¼šè¯é¡¹åœ¨åŸå§‹æ–‡æœ¬ä¸­çš„èµ·æ­¢ä½ç½®ï¼ˆæ”¯æŒé«˜äº®æ˜¾ç¤ºï¼‰</li>
</ul>
<p><strong>å€’æ’ç´¢å¼•æ„å»ºæµç¨‹</strong>å…·ä½“åŒ…æ‹¬ä»¥ä¸‹æ­¥éª¤ï¼š</p>
<ol>
<li>1. <strong>æ–‡æ¡£è§£æ</strong>ï¼šæå–æ–‡æœ¬å­—æ®µï¼Œè¿›è¡Œç¼–ç ç»Ÿä¸€å’Œæ ¼å¼æ¸…ç†</li>
<li>2. <strong>åˆ†è¯å¤„ç†</strong>ï¼šé€šè¿‡åˆ†è¯å™¨å°†æ–‡æœ¬æ‹†åˆ†ä¸ºå•ç‹¬çš„è¯é¡¹</li>
<li>3. <strong>æ ‡å‡†åŒ–å¤„ç†</strong>ï¼šåŒ…æ‹¬è½¬å°å†™ã€å»é™¤åœç”¨è¯ã€è¯å¹²æå–ç­‰</li>
<li>4. <strong>ç”Ÿæˆå€’æ’é¡¹</strong>ï¼šè®°å½•æ¯ä¸ªè¯é¡¹åœ¨æ–‡æ¡£ä¸­çš„å‡ºç°é¢‘ç‡ã€ä½ç½®ç­‰ä¿¡æ¯</li>
<li>5. <strong>ç´¢å¼•å­˜å‚¨</strong>ï¼šå°†å€’æ’é¡¹å†™å…¥ç´¢å¼•æ®µï¼Œå®ç°æŒä¹…åŒ–</li>
</ol>
<h3 data-id="heading-3">1.3 å€’æ’ç´¢å¼•çš„æŸ¥è¯¢æœºåˆ¶ä¸æ€§èƒ½ä¼˜åŒ–</h3>
<p>å½“ç”¨æˆ·å‘èµ·æœç´¢è¯·æ±‚æ—¶ï¼ŒElasticsearchæ‰§è¡Œé«˜æ•ˆçš„<strong>ä¸¤é˜¶æ®µæŸ¥è¯¢æµç¨‹</strong>ï¼š</p>
<p><strong>æŸ¥è¯¢è§£æé˜¶æ®µ</strong>ï¼šæœç´¢è¯ç»è¿‡ç›¸åŒçš„åˆ†è¯å’Œæ ‡å‡†åŒ–å¤„ç†ï¼Œç¡®ä¿æŸ¥è¯¢ä¸ç´¢å¼•çš„å…¼å®¹æ€§ã€‚ä¾‹å¦‚æœç´¢"Quick Foxes"ä¼šè¢«åˆ†è¯ä¸º["quick", "fox"]ã€‚</p>
<p><strong>å€’æ’åˆ—è¡¨æŸ¥æ‰¾ä¸åˆå¹¶</strong>ï¼šElasticsearchåœ¨è¯é¡¹å­—å…¸ä¸­æŸ¥æ‰¾æ¯ä¸ªè¯é¡¹çš„å€’æ’åˆ—è¡¨ï¼Œç„¶åæ ¹æ®æŸ¥è¯¢é€»è¾‘ï¼ˆAND/ORï¼‰è¿›è¡Œåˆ—è¡¨åˆå¹¶ã€‚å¯¹äºANDæŸ¥è¯¢ï¼Œå–å€’æ’åˆ—è¡¨çš„äº¤é›†ï¼›å¯¹äºORæŸ¥è¯¢ï¼Œåˆ™å–å¹¶é›†ã€‚</p>
<p><strong>æ€§èƒ½ä¼˜åŒ–æŠ€æœ¯</strong>åŒ…æ‹¬ï¼š</p>
<ul>
<li>â€¢ <strong>è·³è¡¨</strong>ï¼ˆSkip Listsï¼‰ï¼šåŠ é€Ÿå¤§å‹å€’æ’åˆ—è¡¨çš„åˆå¹¶æ“ä½œ</li>
<li>â€¢ <strong>ä½å›¾ç´¢å¼•</strong>ï¼ˆBitmap Indexingï¼‰ï¼šå¯¹æšä¸¾å‹å­—æ®µè¿›è¡Œé«˜æ•ˆå‹ç¼©</li>
<li>â€¢ <strong>å¸ƒéš†è¿‡æ»¤å™¨</strong>ï¼ˆBloom Filterï¼‰ï¼šå¿«é€Ÿåˆ¤æ–­è¯é¡¹æ˜¯å¦å­˜åœ¨ï¼Œé¿å…ä¸å¿…è¦çš„ç£ç›˜æŸ¥æ‰¾</li>
</ul>
<h2 data-id="heading-4">2 æ˜ å°„è®¾è®¡ï¼šæ•°æ®æ¨¡å¼çš„æˆ˜ç•¥è§„åˆ’</h2>
<h3 data-id="heading-5">2.1 æ˜ å°„çš„æ ¸å¿ƒä½œç”¨ä¸è®¾è®¡åŸåˆ™</h3>
<p>æ˜ å°„ï¼ˆMappingï¼‰åœ¨Elasticsearchä¸­ç›¸å½“äºæ•°æ®åº“çš„æ¨¡å¼è®¾è®¡ï¼Œå®ƒå®šä¹‰äº†æ–‡æ¡£åŠå…¶åŒ…å«çš„å­—æ®µå¦‚ä½•å­˜å‚¨å’Œç´¢å¼•ã€‚æ°å½“çš„æ˜ å°„è®¾è®¡æ˜¯æœç´¢æ€§èƒ½çš„åŸºçŸ³ã€‚</p>
<p><strong>æ˜ å°„çš„æ ¸å¿ƒä»·å€¼</strong>ä½“ç°åœ¨ï¼š</p>
<ul>
<li>â€¢ <strong>å­˜å‚¨ä¼˜åŒ–</strong>ï¼šé€‰æ‹©åˆé€‚çš„å­—æ®µç±»å‹å‡å°‘ç£ç›˜ç©ºé—´å ç”¨</li>
<li>â€¢ <strong>ç´¢å¼•ä¼˜åŒ–</strong>ï¼šåˆç†çš„ç´¢å¼•é…ç½®æå‡æŸ¥è¯¢é€Ÿåº¦</li>
<li>â€¢ <strong>æœç´¢ä¼˜åŒ–</strong>ï¼šæ­£ç¡®çš„åˆ†æå™¨è®¾ç½®æé«˜æœç´¢ç»“æœç›¸å…³æ€§</li>
</ul>
<h3 data-id="heading-6">2.2 å­—æ®µç±»å‹é€‰æ‹©ç­–ç•¥</h3>
<p>Elasticsearchæä¾›äº†ä¸°å¯Œçš„å­—æ®µç±»å‹ï¼Œæ¯ç§ç±»å‹éƒ½æœ‰å…¶ç‰¹å®šçš„åº”ç”¨åœºæ™¯å’Œæ€§èƒ½ç‰¹å¾ï¼š</p>
<p><strong>æ–‡æœ¬ç±»å‹å®¶æ—</strong>ï¼š</p>
<ul>
<li>â€¢ <strong>text</strong>ç±»å‹ï¼šé€‚ç”¨äºéœ€è¦åˆ†è¯çš„å…¨æ–‡æœç´¢åœºæ™¯ï¼Œå¦‚å•†å“æè¿°ã€æ–‡ç« å†…å®¹</li>
<li>â€¢ <strong>keyword</strong>ç±»å‹ï¼šé€‚ç”¨äºç²¾ç¡®åŒ¹é…ï¼Œå¦‚çŠ¶æ€æ ‡ç­¾ã€åˆ†ç±»ç¼–ç </li>
</ul>
<p><strong>æ•°å€¼ç±»å‹å®¶æ—</strong>ï¼š</p>
<ul>
<li>â€¢ <strong>æ•´æ•°ç±»å‹</strong>ï¼ˆinteger, longï¼‰ï¼šé€‚åˆç¦»æ•£æ•°å€¼ï¼Œå¦‚æ•°é‡ã€å¹´é¾„</li>
<li>â€¢ <strong>æµ®ç‚¹ç±»å‹</strong>ï¼ˆfloat, doubleï¼‰ï¼šé€‚åˆè¿ç»­æ•°å€¼ï¼Œå¦‚ä»·æ ¼ã€è¯„åˆ†</li>
</ul>
<p><strong>ä¸“ç”¨ç±»å‹å®¶æ—</strong>ï¼š</p>
<ul>
<li>â€¢ <strong>date</strong>ï¼šæ—¥æœŸå’Œæ—¶é—´æ•°æ®ï¼Œæ”¯æŒä¸°å¯Œçš„èŒƒå›´æŸ¥è¯¢</li>
<li>â€¢ <strong>geo_point</strong>ï¼šåœ°ç†åæ ‡ï¼Œæ”¯æŒåœ°ç†ä½ç½®æŸ¥è¯¢</li>
<li>â€¢ <strong>ip</strong>ï¼šIPåœ°å€ï¼Œæ”¯æŒCIDRæŸ¥è¯¢</li>
</ul>
<p><strong>å¤šå­—æ®µæ˜ å°„å®æˆ˜ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">  PUT /ecommerce_products{  <span class="hljs-string">"mappings"</span>: {    <span class="hljs-string">"properties"</span>: {      <span class="hljs-string">"product_id"</span>: {        <span class="hljs-string">"type"</span>: <span class="hljs-string">"keyword"</span>      },      <span class="hljs-string">"product_name"</span>: {        <span class="hljs-string">"type"</span>: <span class="hljs-string">"text"</span>,        <span class="hljs-string">"analyzer"</span>: <span class="hljs-string">"ik_max_word"</span>,        <span class="hljs-string">"fields"</span>: {          <span class="hljs-string">"keyword"</span>: {            <span class="hljs-string">"type"</span>: <span class="hljs-string">"keyword"</span>          },          <span class="hljs-string">"pinyin"</span>: {            <span class="hljs-string">"type"</span>: <span class="hljs-string">"text"</span>,            <span class="hljs-string">"analyzer"</span>: <span class="hljs-string">"pinyin"</span>          }        }      },      <span class="hljs-string">"price"</span>: {        <span class="hljs-string">"type"</span>: <span class="hljs-string">"scaled_float"</span>,        <span class="hljs-string">"scaling_factor"</span>: 100      },      <span class="hljs-string">"tags"</span>: {        <span class="hljs-string">"type"</span>: <span class="hljs-string">"keyword"</span>      },      <span class="hljs-string">"description"</span>: {        <span class="hljs-string">"type"</span>: <span class="hljs-string">"text"</span>,        <span class="hljs-string">"analyzer"</span>: <span class="hljs-string">"ik_smart"</span>      },      <span class="hljs-string">"created_time"</span>: {        <span class="hljs-string">"type"</span>: <span class="hljs-string">"date"</span>      },      <span class="hljs-string">"location"</span>: {        <span class="hljs-string">"type"</span>: <span class="hljs-string">"geo_point"</span>      }    }  }}
</code></pre>
<p>æ­¤é…ç½®ä¸ºå•†å“åç§°åŒæ—¶æä¾›åˆ†è¯æœç´¢ã€ç²¾ç¡®åŒ¹é…å’Œæ‹¼éŸ³æœç´¢èƒ½åŠ›</p>
<h3 data-id="heading-7">2.3 æ˜ å°„è®¾è®¡çš„æœ€ä½³å®è·µ</h3>
<p><strong>åŠ¨æ€æ˜ å°„ä¸é™æ€æ˜ å°„çš„å¹³è¡¡</strong>ï¼šåœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œå»ºè®®ä¼˜å…ˆä½¿ç”¨é™æ€æ˜ å°„ï¼Œé¿å…å­—æ®µçˆ†ç‚¸é—®é¢˜ã€‚</p>
<p><strong>ç´¢å¼•é€‰é¡¹çš„ç²¾ç»†æ§åˆ¶</strong>ï¼šå¯¹äºä¸éœ€è¦æœç´¢çš„å­—æ®µï¼ˆå¦‚MD5å“ˆå¸Œå€¼ï¼‰ï¼Œå¯ä»¥è®¾ç½®<code>"index": false</code>èŠ‚çœå­˜å‚¨ç©ºé—´ã€‚</p>
<p><strong>å‰¯æœ¬è®¾ç½®çš„ä¼˜åŒ–</strong>ï¼šåœ¨å†™å…¥å¯†é›†å‹åœºæ™¯ä¸­ï¼Œå¯ä»¥æš‚æ—¶è®¾ç½®<code>"number_of_replicas": 0</code>æå‡å†™å…¥é€Ÿåº¦ï¼Œå†™å…¥å®Œæˆåå†æ¢å¤å‰¯æœ¬æ•°é‡ã€‚</p>
<h2 data-id="heading-8">3 åˆ†è¯æœºåˆ¶ï¼šæœç´¢ç²¾å‡†åº¦çš„å†³å®šå› ç´ </h2>
<h3 data-id="heading-9">3.1 åˆ†è¯å™¨çš„å·¥ä½œåŸç†ä¸ç»„ä»¶ååŒ</h3>
<p>åˆ†è¯å™¨ï¼ˆAnalyzerï¼‰æ˜¯å°†æ–‡æœ¬è½¬æ¢ä¸ºè¯é¡¹çš„å…³é”®ç»„ä»¶ï¼Œç›´æ¥å†³å®šæœç´¢çš„å¬å›ç‡å’Œå‡†ç¡®ç‡ã€‚ä¸€ä¸ªå®Œæ•´çš„åˆ†è¯å™¨åŒ…å«ä¸‰ä¸ªååŒå·¥ä½œçš„ç»„ä»¶ï¼š</p>
<p><strong>å­—ç¬¦è¿‡æ»¤å™¨</strong>ï¼ˆCharacter Filtersï¼‰è´Ÿè´£åŸå§‹æ–‡æœ¬çš„é¢„å¤„ç†ï¼Œå¦‚HTMLæ ‡ç­¾å»é™¤ã€ç‰¹æ®Šå­—ç¬¦è½¬æ¢ã€‚</p>
<p><strong>åˆ†è¯å•å…ƒ</strong>ï¼ˆTokenizerï¼‰æ˜¯åˆ†è¯å™¨çš„æ ¸å¿ƒï¼Œå°†æ–‡æœ¬åˆ‡åˆ†ä¸ºç‹¬ç«‹çš„è¯é¡¹ï¼ˆTokenï¼‰ã€‚ä¸åŒçš„åˆ†è¯å•å…ƒé‡‡ç”¨ä¸åŒçš„åˆ‡åˆ†ç­–ç•¥ã€‚</p>
<p><strong>è¯é¡¹è¿‡æ»¤å™¨</strong>ï¼ˆToken Filtersï¼‰å¯¹åˆ†è¯ç»“æœè¿›è¡Œå†åŠ å·¥ï¼ŒåŒ…æ‹¬è½¬å°å†™ã€åœç”¨è¯å»é™¤ã€åŒä¹‰è¯æ‰©å±•ç­‰ã€‚</p>
<h3 data-id="heading-10">3.2 ä¸­æ–‡åˆ†è¯çš„æŒ‘æˆ˜ä¸è§£å†³æ–¹æ¡ˆ</h3>
<p>ä¸­æ–‡åˆ†è¯é¢ä¸´<strong>æ— è‡ªç„¶åˆ†éš”ç¬¦</strong>ã€<strong>æ–°è¯å‘ç°</strong>ã€<strong>æ­§ä¹‰æ¶ˆé™¤</strong>ç­‰ç‹¬ç‰¹æŒ‘æˆ˜ã€‚IKåˆ†è¯å™¨æ˜¯ä¸­æ–‡åœºæ™¯çš„é¦–é€‰è§£å†³æ–¹æ¡ˆï¼Œæä¾›ä¸¤ç§åˆ†è¯æ¨¡å¼ï¼š</p>
<p><strong>ik_smartæ¨¡å¼</strong>ï¼ˆç²—ç²’åº¦åˆ†è¯ï¼‰é€‚åˆç²¾å‡†åŒ¹é…åœºæ™¯ï¼Œå¬å›ç‡è¾ƒä½ä½†å‡†ç¡®ç‡é«˜ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">  <span class="hljs-string">"ä¸­åäººæ°‘å…±å’Œå›½å®ªæ³•"</span> â†’ [<span class="hljs-string">"ä¸­åäººæ°‘å…±å’Œå›½"</span>, <span class="hljs-string">"å®ªæ³•"</span>]
</code></pre>
<p><strong>ik_max_wordæ¨¡å¼</strong>ï¼ˆç»†ç²’åº¦åˆ†è¯ï¼‰é€‚åˆå¬å›ä¼˜å…ˆåœºæ™¯ï¼Œå¬å›ç‡é«˜ä½†å¯èƒ½åŒ…å«æ— å…³ç»“æœï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">  <span class="hljs-string">"ä¸­åäººæ°‘å…±å’Œå›½å®ªæ³•"</span> â†’ [<span class="hljs-string">"ä¸­åäººæ°‘å…±å’Œå›½"</span>, <span class="hljs-string">"ä¸­åäººæ°‘"</span>, <span class="hljs-string">"ä¸­å"</span>, <span class="hljs-string">"åäºº"</span>, <span class="hljs-string">"äººæ°‘å…±å’Œå›½"</span>, <span class="hljs-string">"äººæ°‘"</span>, <span class="hljs-string">"å…±å’Œå›½"</span>, <span class="hljs-string">"å…±å’Œ"</span>, <span class="hljs-string">"å›½"</span>, <span class="hljs-string">"å®ªæ³•"</span>]
</code></pre>
<p><strong>IKåˆ†è¯å™¨é…ç½®ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-xml" lang="xml">  <span class="hljs-comment">&lt;!-- IK Analyzer æ‰©å±•é…ç½® --&gt;</span><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">"1.0"</span> encoding=<span class="hljs-string">"UTF-8"</span>?&gt;</span><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">properties</span> <span class="hljs-keyword">SYSTEM</span> <span class="hljs-string">"http://java.sun.com/dtd/properties.dtd"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">properties</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">comment</span>&gt;</span>IK Analyzer æ‰©å±•é…ç½®<span class="hljs-tag">&lt;/<span class="hljs-name">comment</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">entry</span> <span class="hljs-attr">key</span>=<span class="hljs-string">"ext_dict"</span>&gt;</span>custom_words.dic<span class="hljs-tag">&lt;/<span class="hljs-name">entry</span>&gt;</span>    <span class="hljs-comment">&lt;!-- è‡ªå®šä¹‰æ‰©å±•è¯å…¸ --&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">entry</span> <span class="hljs-attr">key</span>=<span class="hljs-string">"ext_stopwords"</span>&gt;</span>stop_words.dic<span class="hljs-tag">&lt;/<span class="hljs-name">entry</span>&gt;</span> <span class="hljs-comment">&lt;!-- è‡ªå®šä¹‰åœç”¨è¯ --&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">properties</span>&gt;</span>
</code></pre>
<p>é€šè¿‡æ‰©å±•è¯å…¸å¯ä»¥æ·»åŠ é¢†åŸŸä¸“æœ‰åè¯ï¼Œæå‡ä¸“ä¸šæ–‡æœ¬çš„åˆ†è¯æ•ˆæœ</p>
<h3 data-id="heading-11">3.3 å¤šè¯­è¨€æ··åˆåœºæ™¯çš„åˆ†è¯ç­–ç•¥</h3>
<p>åœ¨å®é™…åº”ç”¨ä¸­ï¼Œç»å¸¸é‡åˆ°ä¸­è‹±æ–‡æ··åˆã€æ‹¼éŸ³åŒ¹é…ç­‰å¤æ‚åœºæ™¯ï¼Œéœ€è¦é‡‡ç”¨ç»„åˆåˆ†è¯ç­–ç•¥ï¼š</p>
<p><strong>ä¸­è‹±æ–‡æ··åˆåˆ†è¯</strong>ï¼šä½¿ç”¨IKåˆ†è¯å™¨é…åˆè‹±æ–‡å¤„ç†èƒ½åŠ›ï¼Œç¡®ä¿ä¸­è‹±æ–‡æœ¯è¯­éƒ½èƒ½æ­£ç¡®è¯†åˆ«ã€‚</p>
<p><strong>æ‹¼éŸ³åˆ†è¯é›†æˆ</strong>ï¼šä¸ºé‡è¦å­—æ®µåŒæ—¶é…ç½®æ‹¼éŸ³åˆ†è¯å™¨ï¼Œæ”¯æŒæ‹¼éŸ³æœç´¢ï¼š</p>
<pre><code class="hljs language-json" lang="json">  <span class="hljs-attr">"product_name"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>  <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"text"</span><span class="hljs-punctuation">,</span>  <span class="hljs-attr">"analyzer"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ik_max_word"</span><span class="hljs-punctuation">,</span>  <span class="hljs-attr">"fields"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>    <span class="hljs-attr">"pinyin"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>      <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"text"</span><span class="hljs-punctuation">,</span>       <span class="hljs-attr">"analyzer"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"pinyin"</span>    <span class="hljs-punctuation">}</span>  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">}</span>
</code></pre>
<p><strong>åŒä¹‰è¯æ‰©å±•</strong>ï¼šé…ç½®åŒä¹‰è¯è¿‡æ»¤å™¨ï¼Œæå‡æœç´¢å¬å›ç‡ï¼š</p>
<pre><code class="hljs language-css" lang="css">  "<span class="hljs-attribute">filter</span>": {  "my_synonyms": {    "type": <span class="hljs-string">"synonym"</span>,    <span class="hljs-string">"synonyms"</span>: [      <span class="hljs-string">"æ‰‹æœº, ç”µè¯, ç§»åŠ¨ç”µè¯"</span>,      <span class="hljs-string">"ç”µè„‘, è®¡ç®—æœº, ç¬”è®°æœ¬"</span>    ]  }}
</code></pre>
<h2 data-id="heading-12">4 ä¸‰è€…ååŒï¼šæœç´¢è´¨é‡çš„å½±å“è·¯å¾„åˆ†æ</h2>
<h3 data-id="heading-13">4.1 æœç´¢è´¨é‡çš„å…¨é“¾è·¯å½±å“å› ç´ </h3>
<p>æœç´¢è´¨é‡çš„å¥½åå—åˆ°ä»æ•°æ®æ¥å…¥åˆ°ç»“æœè¿”å›çš„å…¨é“¾è·¯å½±å“ï¼Œå…¶ä¸­å€’æ’ç´¢å¼•ã€æ˜ å°„å’Œåˆ†è¯å™¨åœ¨å„ä¸ªç¯èŠ‚å‘æŒ¥å…³é”®ä½œç”¨ï¼š</p>
<p><strong>æ•°æ®æ‘„å…¥é˜¶æ®µ</strong>ï¼šæ˜ å°„å†³å®šå­—æ®µå¦‚ä½•è¢«è§£æï¼Œåˆ†è¯å™¨å†³å®šæ–‡æœ¬å¦‚ä½•è¢«åˆ‡åˆ†ï¼Œå€’æ’ç´¢å¼•å†³å®šè¯é¡¹å¦‚ä½•è¢«å­˜å‚¨ã€‚</p>
<p><strong>æŸ¥è¯¢å¤„ç†é˜¶æ®µ</strong>ï¼šæŸ¥è¯¢è¯ç»è¿‡ç›¸åŒçš„åˆ†è¯å¤„ç†ï¼Œç¡®ä¿æŸ¥è¯¢ä¸ç´¢å¼•çš„ä¸€è‡´æ€§ï¼›å€’æ’ç´¢å¼•æä¾›é«˜æ•ˆçš„è¯é¡¹æŸ¥æ‰¾èƒ½åŠ›ã€‚</p>
<p><strong>ç»“æœæ’åºé˜¶æ®µ</strong>ï¼šå€’æ’ç´¢å¼•ä¸­å­˜å‚¨çš„è¯é¢‘ã€ä½ç½®ç­‰ä¿¡æ¯ä¸ºç›¸å…³æ€§è¯„åˆ†æä¾›åŸºç¡€æ•°æ®ã€‚</p>
<h3 data-id="heading-14">4.2 å…¸å‹é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ</h3>
<p><strong>æœç´¢å¬å›ç‡ä½</strong>é€šå¸¸ç”±è¿‡åº¦æ¿€è¿›çš„åˆ†è¯ç­–ç•¥å¯¼è‡´ã€‚è§£å†³æ–¹æ¡ˆåŒ…æ‹¬ï¼šä½¿ç”¨ç»†ç²’åº¦åˆ†è¯æ¨¡å¼ï¼ˆik_max_wordï¼‰ã€åˆç†é…ç½®åŒä¹‰è¯ã€ä¼˜åŒ–åœç”¨è¯åˆ—è¡¨ã€‚</p>
<p><strong>æœç´¢å‡†ç¡®ç‡ä½</strong>å¾€å¾€å› åˆ†è¯ç²’åº¦å¤ªç»†æˆ–åŒä¹‰è¯è¿‡åº¦æ‰©å±•å¼•èµ·ã€‚è§£å†³æ–¹æ¡ˆåŒ…æ‹¬ï¼šä½¿ç”¨ç²—ç²’åº¦åˆ†è¯æ¨¡å¼ï¼ˆik_smartï¼‰ã€è°ƒæ•´ç›¸å…³æ€§è¯„åˆ†æƒé‡ã€å®Œå–„åŒä¹‰è¯è§„åˆ™ã€‚</p>
<p><strong>æœç´¢æ€§èƒ½å·®</strong>å¯èƒ½ä¸å€’æ’ç´¢å¼•è¿‡å¤§æˆ–æ˜ å°„è®¾è®¡ä¸åˆç†æœ‰å…³ã€‚è§£å†³æ–¹æ¡ˆåŒ…æ‹¬ï¼šåˆç†é…ç½®ç´¢å¼•é€‰é¡¹ã€ä½¿ç”¨å¤šå­—æ®µç±»å‹é¿å…å…¨æ–‡æœ¬æœç´¢ã€ä¼˜åŒ–åˆ†ç‰‡å¤§å°ã€‚</p>
<h3 data-id="heading-15">4.3 å®æˆ˜è°ƒä¼˜æ¡ˆä¾‹ï¼šç”µå•†æœç´¢ç³»ç»Ÿä¼˜åŒ–</h3>
<p><strong>é—®é¢˜åœºæ™¯</strong>ï¼šæŸç”µå•†å¹³å°å•†å“æœç´¢å­˜åœ¨ç»“æœä¸ç›¸å…³ã€æ‹¼éŸ³æœç´¢ä¸æ”¯æŒã€æ€§èƒ½ç“¶é¢ˆç­‰é—®é¢˜ã€‚</p>
<p><strong>ä¼˜åŒ–æ–¹æ¡ˆ</strong>ï¼š</p>
<ol>
<li>1. <strong>æ˜ å°„é‡æ„</strong>ï¼šä¸ºå•†å“åå­—æ®µé…ç½®å¤šå­—æ®µæ˜ å°„ï¼ŒåŒæ—¶æ”¯æŒä¸­æ–‡åˆ†è¯ã€ç²¾ç¡®åŒ¹é…å’Œæ‹¼éŸ³æœç´¢</li>
<li>2. <strong>åˆ†è¯ä¼˜åŒ–</strong>ï¼šç»“åˆIKåˆ†è¯å™¨ä¸è‡ªå®šä¹‰è¯å…¸ï¼Œæ·»åŠ å“ç‰Œåå’Œæ–°å“ç±»çš„ä¸“æœ‰åè¯</li>
<li>3. <strong>ç´¢å¼•ä¼˜åŒ–</strong>ï¼šè°ƒæ•´å€’æ’ç´¢å¼•çš„ç´¢å¼•é€‰é¡¹ï¼Œå¯¹ä»·æ ¼ç­‰æ•°å€¼å­—æ®µä½¿ç”¨doc_valuesæå‡èšåˆæ€§èƒ½</li>
</ol>
<p><strong>ä¼˜åŒ–ç»“æœ</strong>ï¼šæœç´¢å‡†ç¡®ç‡æå‡35%ï¼Œæ‹¼éŸ³æœç´¢æ”¯æŒåº¦100%ï¼Œæœç´¢å“åº”æ—¶é—´å‡å°‘60%ã€‚</p>
<h2 data-id="heading-16">5 æ€§èƒ½ä¸è´¨é‡å¹³è¡¡çš„è‰ºæœ¯</h2>
<h3 data-id="heading-17">5.1 ç´¢å¼•æ€§èƒ½ä¸æœç´¢è´¨é‡çš„æƒè¡¡</h3>
<p>åœ¨Elasticsearchä¸­ï¼Œæ€§èƒ½ä¸è´¨é‡éœ€è¦è°¨æ…å¹³è¡¡ã€‚è¿‡åº¦è¿½æ±‚æœç´¢è´¨é‡å¯èƒ½å¯¼è‡´ç´¢å¼•æ€§èƒ½ä¸‹é™ï¼Œè€Œè¿‡åº¦ä¼˜åŒ–ç´¢å¼•é€Ÿåº¦å¯èƒ½å½±å“æœç´¢å‡†ç¡®æ€§ã€‚</p>
<p><strong>ç´¢å¼•ä¼˜åŒ–ç­–ç•¥</strong>ï¼š</p>
<ul>
<li>â€¢ æ‰¹é‡æ–‡æ¡£å†™å…¥ï¼Œå‡å°‘ç´¢å¼•æäº¤é¢‘ç‡</li>
<li>â€¢ ä¼˜åŒ–åˆ·æ–°é—´éš”ï¼ˆrefresh_intervalï¼‰ï¼Œå¹³è¡¡è¿‘å®æ—¶æ€§ä¸å†™å…¥ååé‡</li>
<li>â€¢ åˆç†é…ç½®åˆ†ç‰‡æ•°é‡å’Œå¤§å°ï¼Œé¿å…å¤§é‡å°åˆ†ç‰‡æˆ–è¿‡å¤§å¤§åˆ†ç‰‡</li>
</ul>
<p><strong>æœç´¢ä¼˜åŒ–ç­–ç•¥</strong>ï¼š</p>
<ul>
<li>â€¢ ä½¿ç”¨filterä¸Šä¸‹æ–‡ç¼“å­˜é¢‘ç¹ä½¿ç”¨çš„è¿‡æ»¤æ¡ä»¶</li>
<li>â€¢ é¿å…é€šé…ç¬¦æŸ¥è¯¢ï¼Œç‰¹åˆ«æ˜¯å‰å¯¼é€šé…ç¬¦ï¼ˆå¦‚*abcï¼‰</li>
<li>â€¢ ä½¿ç”¨å¼‚æ­¥æœç´¢å¤„ç†å¤æ‚èšåˆæŸ¥è¯¢</li>
</ul>
<h3 data-id="heading-18">5.2 ç›‘æ§ä¸æŒç»­ä¼˜åŒ–</h3>
<p>å»ºç«‹å®Œå–„çš„ç›‘æ§ä½“ç³»æ˜¯æŒç»­ä¼˜åŒ–æœç´¢è´¨é‡çš„åŸºç¡€ã€‚å…³é”®ç›‘æ§æŒ‡æ ‡åŒ…æ‹¬ï¼š</p>
<p><strong>ç´¢å¼•æ€§èƒ½æŒ‡æ ‡</strong>ï¼šç´¢å¼•å»¶è¿Ÿã€ç´¢å¼•ååé‡ã€åˆå¹¶æ“ä½œé¢‘ç‡<br/>
<strong>æœç´¢è´¨é‡æŒ‡æ ‡</strong>ï¼šæŸ¥è¯¢å»¶è¿Ÿã€å‘½ä¸­ç‡ã€é¦–æ¡ç»“æœç‚¹å‡»ç‡<br/>
<strong>ç³»ç»Ÿèµ„æºæŒ‡æ ‡</strong>ï¼šå †å†…å­˜ä½¿ç”¨ç‡ã€ç£ç›˜I/Oã€CPUåˆ©ç”¨ç‡</p>
<p>å®šæœŸè¿›è¡Œæœç´¢è´¨é‡è¯„ä¼°ï¼Œé€šè¿‡A/Bæµ‹è¯•å¯¹æ¯”ä¸åŒåˆ†è¯ç­–ç•¥æˆ–è¯„åˆ†å…¬å¼çš„æ•ˆæœï¼Œå®ç°æ•°æ®é©±åŠ¨çš„æŒç»­ä¼˜åŒ–ã€‚</p>
<h2 data-id="heading-19">æ€»ç»“</h2>
<p>Elasticsearchçš„æœç´¢è´¨é‡ä¼˜åŒ–æ˜¯ä¸€ä¸ªç³»ç»Ÿå·¥ç¨‹ï¼Œå€’æ’ç´¢å¼•ã€æ˜ å°„è®¾è®¡å’Œåˆ†è¯å™¨åˆ†åˆ«ä»æ•°æ®ç»“æ„ã€æ•°æ®æ¨¡å‹å’Œæ•°æ®å¤„ç†çš„ç»´åº¦å½±å“æœç´¢æ•ˆæœã€‚</p>
<p><strong>å€’æ’ç´¢å¼•</strong>æ˜¯æœç´¢æ€§èƒ½çš„åŸºçŸ³ï¼Œå…¶é«˜æ•ˆçš„æ•°æ®ç»“æ„ä½¿æ¯«ç§’çº§æœç´¢æˆä¸ºå¯èƒ½ã€‚<strong>æ˜ å°„è®¾è®¡</strong>å†³å®šäº†æ•°æ®çš„å­˜å‚¨å’Œç´¢å¼•æ–¹å¼ï¼Œåˆç†çš„æ˜ å°„æ˜¯é«˜æ•ˆæœç´¢çš„å‰æã€‚<strong>åˆ†è¯å™¨</strong>ç›´æ¥å½±å“æœç´¢çš„å¬å›ç‡å’Œå‡†ç¡®ç‡ï¼Œç‰¹åˆ«æ˜¯å¯¹äºä¸­æ–‡ç­‰å¤æ‚è¯­è¨€ã€‚</p>
<p>åœ¨å®é™…åº”ç”¨ä¸­ï¼Œéœ€è¦æ ¹æ®å…·ä½“ä¸šåŠ¡åœºæ™¯å¹³è¡¡æœç´¢è´¨é‡ä¸ç³»ç»Ÿæ€§èƒ½ï¼Œå»ºç«‹æŒç»­ç›‘æ§å’Œä¼˜åŒ–æœºåˆ¶ã€‚åªæœ‰æ·±å…¥ç†è§£è¿™ä¸‰è€…çš„å·¥ä½œåŸç†å’Œç›¸äº’å½±å“ï¼Œæ‰èƒ½æ„å»ºå‡ºæ—¢å¿«åˆå‡†çš„æœç´¢ç³»ç»Ÿã€‚</p>
<p><strong>ğŸ“š ä¸‹ç¯‡é¢„å‘Š</strong><br/>
ã€ŠESæ€§èƒ½ä¸å¯ç”¨æ€§â€”â€”åˆ†ç‰‡ã€å‰¯æœ¬ã€è·¯ç”±ä¸èšåˆçš„è°ƒåº¦é€»è¾‘ä¸æˆæœ¬ã€‹â€”â€” æˆ‘ä»¬å°†æ·±å…¥æ¢è®¨ï¼š</p>
<ul>
<li>â€¢ ğŸ¯ <strong>åˆ†ç‰‡ç­–ç•¥</strong>ï¼šæ•°æ®åˆ†å¸ƒã€è¯»å†™è´Ÿè½½ä¸æ°´å¹³æ‰©å±•çš„å¹³è¡¡ä¹‹é“</li>
<li>â€¢ ğŸ”„ <strong>å‰¯æœ¬æœºåˆ¶</strong>ï¼šé«˜å¯ç”¨æ€§ä¿éšœä¸è¯»å–ååé‡çš„æå‡æ–¹æ¡ˆ</li>
<li>â€¢ ğŸ§© <strong>è·¯ç”±ä¼˜åŒ–</strong>ï¼šè¯·æ±‚åˆ†å‘ã€è´Ÿè½½å‡è¡¡ä¸æ•…éšœè½¬ç§»çš„æ™ºèƒ½é€»è¾‘</li>
<li>â€¢ ğŸ“Š <strong>èšåˆæ€§èƒ½</strong>ï¼šå¤§æ•°æ®é›†ç»Ÿè®¡åˆ†æä¸å®æ—¶å¯è§†åŒ–çš„æˆæœ¬æ§åˆ¶</li>
<li>â€¢ âš–ï¸ <strong>èµ„æºæƒè¡¡</strong>ï¼šå­˜å‚¨æˆæœ¬ã€è®¡ç®—å¼€é”€ä¸æŸ¥è¯¢å»¶è¿Ÿçš„å¹³è¡¡è‰ºæœ¯</li>
</ul>
<p><strong>ç‚¹å‡»å…³æ³¨ï¼ŒæŒæ¡Elasticsearché›†ç¾¤è°ƒä¼˜çš„æ ¸å¿ƒæ–¹æ³•è®ºï¼</strong></p>
<blockquote>
<p><strong>ä»Šæ—¥è¡ŒåŠ¨å»ºè®®</strong>ï¼š</p>
<ol>
<li>1. åˆ†æç°æœ‰ç´¢å¼•çš„æ˜ å°„è®¾è®¡ï¼Œè¯†åˆ«å­—æ®µç±»å‹ä½¿ç”¨ä¸å½“çš„æƒ…å†µ</li>
<li>2. è¯„ä¼°å½“å‰åˆ†è¯ç­–ç•¥å¯¹æœç´¢è´¨é‡çš„å½±å“ï¼Œé’ˆå¯¹æ ¸å¿ƒä¸šåŠ¡åœºæ™¯è¿›è¡Œä¼˜åŒ–</li>
<li>3. æ£€æŸ¥å€’æ’ç´¢å¼•å¤§å°ä¸æŸ¥è¯¢æ¨¡å¼ï¼Œä¼˜åŒ–ç´¢å¼•é…ç½®æå‡æŸ¥è¯¢æ€§èƒ½</li>
<li>4. å»ºç«‹æœç´¢è´¨é‡ç›‘æ§ä½“ç³»ï¼Œå®šæœŸè¯„ä¼°å¬å›ç‡ä¸å‡†ç¡®ç‡æŒ‡æ ‡</li>
</ol>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[javaå¹¶å‘ç¼–ç¨‹ï¼ˆjucç†è®ºç¯‡ï¼‰]]></title>    <link>https://juejin.cn/post/7588001624905269267</link>    <guid>https://juejin.cn/post/7588001624905269267</guid>    <pubDate>2025-12-26T15:20:38.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588001624905269267" data-draft-id="7588007285546434566" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="javaå¹¶å‘ç¼–ç¨‹ï¼ˆjucç†è®ºç¯‡ï¼‰"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-26T15:20:38.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ihgry"/> <meta itemprop="url" content="https://juejin.cn/user/3210229685954718"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            javaå¹¶å‘ç¼–ç¨‹ï¼ˆjucç†è®ºç¯‡ï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3210229685954718/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ihgry
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-26T15:20:38.000Z" title="Fri Dec 26 2025 15:20:38 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h4 data-id="heading-0">CAS</h4>
<ul>
<li>CAS(Compare And Swap)ï¼Œå¤„ç†å™¨ä¼šæ¯”è¾ƒå½“å‰å†…å­˜åœ°å€ä¸Šçš„å€¼ å’Œ çº¿ç¨‹ä¸­å˜é‡çš„å€¼ï¼ˆé¢„æœŸå€¼ï¼‰æ˜¯å¦ç›¸ç­‰ï¼Œå¦‚æœç›¸ç­‰åˆ™æ›¿æ¢å†…å­˜åœ°å€ä¸Šçš„å€¼ä¸ºæ–°å€¼ï¼Œå¦‚æœä¸ç›¸ç­‰åˆ™ä¸æ›´æ–°ï¼Œç¡¬ä»¶å±‚é¢ä¸Šæ”¯æŒä½¿ç”¨ä¸€æ¡æŒ‡ä»¤æ¥å®ç°ä¸Šé¢çš„æ“ä½œï¼Œx86ä¸­æ˜¯<code>cmpxchgl</code>æŒ‡ä»¤</li>
<li>CASæ“ä½œä¸æ¶‰åŠçº¿ç¨‹ä¸Šä¸‹æ–‡åˆ‡æ¢ï¼Œå¹¶ä¸”ä¸ä½¿ç”¨é”ï¼Œä¼šæé«˜ç³»ç»Ÿçš„å¹¶å‘æ€§</li>
</ul>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1d3cd7260f6a47c699781a44e1e95cc8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgaWhncnk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767367332&amp;x-signature=mRlEYponi%2F6JG5tch69PoEwjA9I%3D" alt="CASæ€»çº¿.jpg" width="50%" loading="lazy"/></p>
<ul>
<li>
<p><code>ABAé—®é¢˜</code>ï¼šä¸€ä¸ªçº¿ç¨‹å°†å˜é‡Aæ”¹ä¸ºäº†å˜é‡Bï¼Œä¹‹ååˆæ”¹ä¸ºäº†å˜é‡Aï¼Œå¦ä¸€ä¸ªçº¿ç¨‹åœ¨æ‰§è¡ŒCASæ“ä½œæ—¶ä¼šè®¤ä¸ºè¯¥å˜é‡æ²¡æœ‰å‘ç”Ÿå˜åŒ–ï¼Œå¯èƒ½ä¼šå¯¼è‡´é”™è¯¯ã€‚è§£å†³æ–¹æ¡ˆï¼šæ·»åŠ ç‰ˆæœ¬å·è¿›è¡Œå¯¹æ¯”ï¼Œå¯ä»¥ä½¿ç”¨<code>AtomicStampedReference</code>ç±»</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> AtomicStampedReference&lt;Integer&gt; atomicStampedReference = <span class="hljs-keyword">new</span> <span class="hljs-title class_">AtomicStampedReference</span>&lt;&gt;(<span class="hljs-number">100</span>, <span class="hljs-number">66</span>);

<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> InterruptedException {
    <span class="hljs-comment">// è·å–å½“å‰çš„å¼•ç”¨å€¼å’Œæ—¶é—´æˆ³</span>
    <span class="hljs-type">int</span> <span class="hljs-variable">stamp</span> <span class="hljs-operator">=</span> atomicStampedReference.getStamp();
    <span class="hljs-type">Integer</span> <span class="hljs-variable">value</span> <span class="hljs-operator">=</span> atomicStampedReference.getReference();

    <span class="hljs-comment">// ä¿®æ”¹å¼•ç”¨å€¼</span>
    <span class="hljs-type">boolean</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> atomicStampedReference.compareAndSet(value, value + <span class="hljs-number">10</span>, stamp, stamp + <span class="hljs-number">1</span>);
    System.out.println(<span class="hljs-string">"result = "</span> + result);

    <span class="hljs-comment">// è¾“å‡ºæœ€ç»ˆçš„å€¼</span>
    System.out.println(<span class="hljs-string">"Final value = "</span> + atomicStampedReference.getReference());
    System.out.println(<span class="hljs-string">"Final stamp = "</span> + atomicStampedReference.getStamp());
}
</code></pre>
</li>
</ul>
<h4 data-id="heading-1">Synchorized</h4>
<ul>
<li><code>synchorized</code>ä¿®é¥°å®ä¾‹æ–¹æ³•æ—¶ï¼Œé”å¯¹è±¡æ˜¯å½“å‰çš„å®ä¾‹å¯¹è±¡ï¼›<code>synchorized</code>ä¿®é¥°é™æ€æ–¹æ³•æ—¶ï¼Œé”å¯¹è±¡æ˜¯å½“å‰çš„classç±»å¯¹è±¡ï¼›<code>synchorized</code>ä½œç”¨äºä»£ç å—æ—¶ï¼Œé”å¯¹è±¡æ˜¯æ‹¬å·é‡Œé¢çš„å¯¹è±¡</li>
<li><code>synchorized</code>æ˜¯å¯é‡å…¥é”ï¼Œä¸€ä¸ªçº¿ç¨‹å¯ä»¥é‡å¤è·å–åˆ°è¯¥é”ï¼Œæ¯è·å–ä¸€æ¬¡é”ï¼Œè®¡æ•°å™¨åŠ ä¸€ï¼Œé‡Šæ”¾é”æ—¶ï¼Œè®¡æ•°å™¨å‡ä¸€ï¼Œç›´åˆ°è®¡æ•°å™¨ä¸º0ï¼Œé”æ‰ä¼šçœŸæ­£é‡Šæ”¾</li>
<li><code>synchronized</code>ä¿®é¥°æ–¹æ³•æ—¶ï¼Œä¼šåœ¨æ–¹æ³•çš„è®¿é—®æ ‡å¿—ä½ä¸­å¢åŠ ä¸€ä¸ª<code>ACC_SYNCHORIZED</code>æ ‡å¿—ï¼Œå½“çº¿ç¨‹è®¿é—®è¯¥æ–¹æ³•æ—¶ï¼Œå¦‚æœåŒ…å«è¯¥æ ‡å¿—ä½ï¼Œå°±è¦è·å¾—è¯¥æ–¹æ³•å¯¹åº”çš„å¯¹è±¡çš„ç›‘è§†å™¨é”æ‰èƒ½æ‰§è¡Œè¯¥æ–¹æ³•</li>
<li><code>synchronized</code>ä¿®é¥°ä»£ç å—æ—¶ï¼Œä¼šåœ¨ä»£ç å—çš„å‰åæ’å…¥<code>monitorenter</code>å’Œ<code>monitorexit</code>å­—èŠ‚ç æŒ‡ä»¤</li>
</ul>
<p>é”å‡çº§è¿‡ç¨‹ï¼š</p>
<ul>
<li>åœ¨æ²¡æœ‰é”ç«äº‰çš„æƒ…å†µä¸‹ï¼Œä¸€ä¸ªçº¿ç¨‹æ¥åŠ é”ï¼ŒJVMä¼šå‘é”å¯¹è±¡çš„å¯¹è±¡å¤´ä¸­å†™å…¥è¯¥çº¿ç¨‹id (è¿™æ—¶å€™çš„é”å«<code>åå‘é”</code>)ï¼Œåç»­è¯¥çº¿ç¨‹å†è¿›å…¥è¯¥é”æ—¶ï¼Œæ— éœ€è¿›è¡Œé¢å¤–çš„åŒæ­¥æ“ä½œ</li>
<li>åœ¨é”è½»åº¦ç«äº‰çš„æ—¶å€™ï¼Œä¼šå‡çº§ä¸º<code>è½»é‡çº§é”</code>ï¼ŒJVMä¼šåœ¨å½“å‰çº¿ç¨‹ä¸­åˆ›å»ºä¸€ä¸ªæ ˆå¸§ï¼Œé€šè¿‡CASæ“ä½œå°†è¿™ä¸ªæ ˆå¸§çš„åœ°å€å†™å…¥å¯¹è±¡å¤´ä¸­ï¼Œå¦‚æœæˆåŠŸè¡¨ç¤ºè¯¥çº¿ç¨‹è·å–åˆ°äº†é”ï¼Œå¦‚æœå¤±è´¥åˆ™è¡¨ç¤ºå…¶ä»–çº¿ç¨‹å·²ç»æŒæœ‰è¯¥é”ï¼Œæ­¤æ—¶ä¼šå‡çº§ä¸ºé‡é‡çº§é”</li>
<li>å½“é”ç«äº‰æ¿€çƒˆæ—¶ï¼ŒJVMä¼šå‡çº§ä¸ºé‡é‡çº§é”ï¼Œ<code>synchorized</code>ä¿®æ”¹ä»£ç å—æ—¶ï¼Œçº¿ç¨‹ä¼šå°è¯•è·å–monitorå¯¹è±¡çš„æ‰€æœ‰æƒï¼ŒæŠ¢åˆ°äº†å°±æ˜¯æˆåŠŸè·å–åˆ°é”ï¼ŒæŠ¢ä¸åˆ°çº¿ç¨‹å°±ä¼šé˜»å¡ï¼Œç­‰å¾…é‡æ–°è·å–é”</li>
</ul>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7c9a95149fda49acbb3b3c05a0aa4e2b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgaWhncnk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767367332&amp;x-signature=m5QQqowuzyac%2BmkEKZxVG2PDUX0%3D" alt="å¯¹è±¡å¤´.jpg" width="70%" loading="lazy"/></p>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e3a40f4e7f55406bb80d018171ddd2fd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgaWhncnk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767367332&amp;x-signature=FTI0cqXoBBx4Waqaa%2B4pl6HKu2w%3D" alt="é”æ ˆå¸§.jpg" width="50%" loading="lazy"/></p>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/12864ed5a0af4fa193a2a553a208cab6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgaWhncnk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767367332&amp;x-signature=jB83O5iCAK1kU1EHu66Z4hcza7w%3D" alt="é”è†¨èƒ€" width="50%" loading="lazy"/></p>
<p>Synchorizedå’ŒReentrantLock</p>
<ul>
<li><code>synchorized</code>å’Œ<code>ReentrantLock</code> éƒ½æ˜¯å¯é‡å…¥é”</li>
<li><code>synchorized</code>æ˜¯éå…¬å¹³é”ï¼Œä¸æ”¯æŒè®¾ç½®è¶…æ—¶æ—¶é—´ï¼Œä¸æ”¯æŒæ¡ä»¶åˆ¤æ–­ï¼Œä¸éœ€è¦æ‰‹åŠ¨é‡Šæ”¾é”</li>
<li><code>ReentrantLock</code>æ—¢å¯ä»¥æ˜¯éå…¬å¹³é”ä¹Ÿå¯ä»¥æ˜¯å…¬å¹³é”ï¼ˆé»˜è®¤æ˜¯éå…¬å¹³é”ï¼‰ï¼Œå…è®¸è®¾ç½®è·å–é”çš„è¶…æ—¶æ—¶é—´ï¼Œå¯ä»¥é€šè¿‡<code>lock.Condition</code>å¯¹è±¡å°†ä¸æ»¡è¶³æ¡ä»¶çš„çº¿ç¨‹åŠ å…¥åˆ°é˜»å¡é˜Ÿåˆ—ä¸­</li>
</ul>
<h4 data-id="heading-2">ThreadLocal</h4>
<ul>
<li>
<p>åŸºæœ¬ä½¿ç”¨</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserContext</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> ThreadLocal&lt;User&gt; CONTEXT = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ThreadLocal</span>&lt;User&gt;();

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> User <span class="hljs-title function_">getUser</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> CONTEXT.get();
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setUser</span><span class="hljs-params">(User user)</span> {
        CONTEXT.set(user);
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">remove</span><span class="hljs-params">()</span> {
        CONTEXT.remove();
    }
}
</code></pre>
</li>
<li>
<p>æ¯ä¸ªçº¿ç¨‹å†…éƒ¨ç»´æŠ¤äº†ä¸€ä¸ª<code>ThreadLocalMap</code>å¯¹è±¡ï¼Œ<code>ThreadLocalMap</code>ä»¥<code>ThreadLocal</code>ä¸ºkeyï¼Œçº¿ç¨‹å˜é‡å‰¯æœ¬ä¸ºvalue</p>
</li>
<li>
<p><code>ThreadLocalMap</code>ä¸­çš„keyæ˜¯å¼±å¼•ç”¨ï¼Œä¹‹æ‰€ä»¥ä¸æ˜¯å¼ºå¼•ç”¨æ˜¯å› ä¸ºæ‰€ä½¿ç”¨çš„çº¿ç¨‹å¾€å¾€æ˜¯çº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹ï¼Œçº¿ç¨‹ä¸€èˆ¬ä¸ä¼šè¢«é”€æ¯ï¼Œå¯¹<code>ThreadLocal</code>çš„å¼•ç”¨å°±ä¼šä¸€ç›´å­˜åœ¨ï¼Œå¯¼è‡´å†…å­˜é‡Šæ”¾ä¸æ‰</p>
</li>
<li>
<p>æœ€ä½³å®è·µï¼š</p>
<ul>
<li>å­˜å‚¨ç”¨æˆ·ç™»å½•ä¿¡æ¯ï¼Œè®©æ¯ä¸ªçº¿ç¨‹æœ‰ç‹¬ç«‹çš„ç”¨æˆ·ä¸Šä¸‹æ–‡</li>
<li>ç®¡ç†æ•°æ®åº“é“¾æ¥ï¼Œå°†ä¸€ä¸ªæ•°æ®åº“è¿æ¥æ”¾å…¥ThreadLocalä¸­ï¼Œåœ¨éœ€è¦ä½¿ç”¨æ•°æ®åº“è¿æ¥çš„åœ°æ–¹ç›´æ¥ä»ThreadLocalè·å–</li>
</ul>
</li>
</ul>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/87e0d298116b48f0868df6b9bae173bb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgaWhncnk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767367332&amp;x-signature=RYhUF9x9QLPH1Q1eWOpzs11J5AY%3D" alt="Thread.jpg" width="50%" loading="lazy"/></p>
<h4 data-id="heading-3">Volatile</h4>
<ul>
<li>
<p><code>volatile</code>å¯ä»¥ä¿è¯å¯è§æ€§ï¼Œå½“ä¸€ä¸ªçº¿ç¨‹ä¿®æ”¹äº†<code>volatile</code>å˜é‡çš„å€¼åï¼Œæ–°å€¼ä¼šç«‹å³è¢«åˆ·æ–°åˆ°ä¸»å†…å­˜ä¸­ï¼Œå…¶ä»–çº¿ç¨‹åœ¨è¯»å–è¯¥å˜é‡æ—¶å¯ä»¥ç«‹å³è·å–åˆ°æœ€æ–°çš„å€¼ï¼Œé¿å…ç”±äºç¼“å­˜ä¸€è‡´æ€§é—®é¢˜å¯¼è‡´ â€çœ‹è§â€œæ—§å€¼çš„ç°è±¡</p>
</li>
<li>
<p><code>volatile</code>åº•å±‚ä¼šåŠ ä¸€ä¸ª<code>lock</code>å‰ç¼€æŒ‡ä»¤è¿›è¡Œæ€»çº¿é”å®šï¼Œæ€»çº¿ç›‘å¬åˆ°ä¿®æ”¹äº†å…±äº«æ•°æ®åï¼Œä¼šè®©å…¶ä»–å¤„ç†å™¨ä¸­çš„ç¼“å­˜æ›´æ–°æˆ–å¤±æ•ˆ</p>
</li>
<li>
<p><code>volatile</code>å¯ä»¥ç¦æ­¢ jvm æŒ‡ä»¤é‡æ’ï¼Œä¿è¯åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ä¹Ÿèƒ½æ­£å¸¸è¿è¡Œ</p>
<p>æ­£å¸¸æƒ…å†µï¼š1. ä¸ºå¯¹è±¡åˆ†é…å†…å­˜ï¼Œ2. åˆå§‹åŒ–ï¼Œ3. å°†å¯¹è±¡å¼•ç”¨æŒ‡å‘å¯¹åº”å†…å­˜åœ°å€</p>
<p>æŒ‡ä»¤é‡æ’å¯èƒ½å˜æˆ1 3 2ï¼Œè¿™æ ·å¯èƒ½ä¼šå‘ç”Ÿé—®é¢˜</p>
</li>
</ul>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cc75ac7c66f64437b9944454bac221e5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgaWhncnk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767367332&amp;x-signature=UU3LL7jAudgBGLMXXBikk%2BBH0ks%3D" alt="1.png" width="50%" loading="lazy"/></p>
<h4 data-id="heading-4">AQS</h4>
<ul>
<li>AQSæ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œå†…éƒ¨å°è£…äº†çº¿ç¨‹ åŠ é”ã€è§£é”ã€å…¥é˜Ÿã€å‡ºé˜Ÿçš„ä¸€äº›æ–¹æ³•ï¼Œæä¾›ç»™å…¶ä»–jucé”ä½¿ç”¨</li>
<li>å®ƒå†…éƒ¨é€šè¿‡ç»´æŠ¤ä¸€ä¸ªå…±äº«å˜é‡<code>state</code>å’Œå…ˆè¿›å…ˆå‡º<code>FIFO</code>ç­‰å¾…é˜Ÿåˆ—æ¥æ§åˆ¶å¹¶å‘çº¿ç¨‹ï¼Œåœ¨ç‹¬å é”ä¸­ï¼Œ<code>state</code>ä¸º0è¡¨ç¤ºæœªè¢«å ç”¨ï¼Œ1è¡¨ç¤ºå·²è¢«å ç”¨ï¼Œå½“çº¿ç¨‹è·å–èµ„æºå¤±è´¥æ—¶ï¼Œä¼šè¢«åŠ å…¥åˆ°AQSçš„ç­‰å¾…é˜Ÿåˆ—ä¸­</li>
<li>åŸºäºAQSå®ç°çš„ç±»æœ‰<code>ReentrantLock</code>, <code>CountDownLatch</code>, <code>Semaphore</code>ç­‰</li>
</ul>
<h4 data-id="heading-5">å…¶ä»–</h4>
<p>æ­»é”ï¼šä¸¤ä¸ªçº¿ç¨‹éƒ½æƒ³è·å–å¯¹æ–¹å·²ç»æ‹¥æœ‰çš„é”ï¼Œé¿å…æ­»é”çš„æ–¹æ³•ï¼š</p>
<ul>
<li>é¿å…åœ¨ä¸€ä¸ªé”çš„ä»£ç å—ä¸­å†æ¬¡å°è¯•è·å–å¦ä¸€ä¸ªé”</li>
<li>ä½¿ç”¨å°è¯•è·å–é”çš„æ–¹æ³•ï¼Œæ¯”å¦‚<code>ReentrantLock</code>çš„<code>trylock</code>æ–¹æ³•ï¼Œ<code>Semaphore</code>çš„<code>tryAcquire</code>æ–¹æ³•ï¼Œå¦‚æœè·å–ä¸åˆ°ä½¿ç”¨å…¶ä»–æ–¹æ¡ˆ</li>
<li>å‡å°é”çš„æ§åˆ¶èŒƒå›´</li>
</ul>
<p>ä¿è¯çº¿ç¨‹å®‰å…¨çš„æ–¹å¼</p>
<ul>
<li>åŒæ­¥é”ï¼š<code>synchorized</code>ã€<code>ReentrantLock</code></li>
<li>åŸå­æ“ä½œç±»ï¼š<code>AtomicInteger</code>ã€<code>AtomicReference</code></li>
<li>çº¿ç¨‹å®‰å…¨çš„å®¹å™¨ï¼š<code>ConcurrentHashMap</code>ç­‰ï¼Œé¿å…æ‰‹åŠ¨åŠ é”</li>
<li>ä½¿ç”¨å±€éƒ¨å˜é‡</li>
</ul>
<p>ä¸€ä¸ªçº¿ç¨‹è¢«å¯åŠ¨ä¸¤æ¬¡ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆï¼š</p>
<ul>
<li>çº¿ç¨‹ä¸€æ—¦è¿è¡Œå°±ä¸ä¼šå›åˆ°åˆå§‹çŠ¶æ€ï¼Œä¼šæŠ›å‡º<code>IllegalThreadStateException</code>å¼‚å¸¸</li>
</ul>
<p>ä¸Šä¸‹æ–‡åˆ‡æ¢ï¼š</p>
<ul>
<li>æš‚åœä¸€ä¸ªçº¿ç¨‹çš„å¤„ç†ï¼Œå¹¶å°†CPUå¯„å­˜å™¨ä¸­è¯¥çº¿ç¨‹çš„æ•°æ®å­˜å‚¨åœ¨å†…å­˜ä¸­</li>
<li>ä»å†…å­˜ä¸­è·å–ä¸‹ä¸€ä¸ªçº¿ç¨‹çš„ä¸Šä¸‹æ–‡ï¼Œå¹¶åœ¨CPUçš„å¯„å­˜å™¨ä¸­æ¢å¤å®ƒ</li>
<li>è¿”å›åˆ°ç¨‹åºè®¡æ•°å™¨æŒ‡ç¤ºçš„ä½ç½® ç»§ç»­æ‰§è¡Œ</li>
</ul>
<p>å¹¶å‘å’Œå¹¶è¡Œï¼š</p>
<ul>
<li>å¹¶å‘ï¼šçº¿ç¨‹è½®æµä½¿ç”¨cpuçš„åšæ³•ç§°ä¸ºå¹¶å‘</li>
<li>å¹¶è¡Œï¼šå¤šä¸ªcpuåŒæ—¶åœ¨è°ƒåº¦çº¿ç¨‹æ‰§è¡Œä»»åŠ¡</li>
</ul>
<p>åŸå­æ€§ã€å¯è§æ€§ã€æœ‰åºæ€§</p>
<ul>
<li>åŸå­æ€§ï¼šä¸€ç»„æ“ä½œè¦ä¹ˆå…¨éƒ¨æ‰§è¡ŒæˆåŠŸï¼Œè¦ä¹ˆå…¨éƒ¨ä¸æ‰§è¡Œ</li>
<li>å¯è§æ€§ï¼šä¸€ä¸ªçº¿ç¨‹ä¿®æ”¹å…±äº«å˜é‡çš„å€¼åï¼Œå…¶ä»–çº¿ç¨‹èƒ½å¤Ÿç«‹å³çœ‹åˆ°è¿™ä¸ªä¿®æ”¹åçš„å€¼</li>
<li>æœ‰åºæ€§ï¼šç¨‹åºçš„æ‰§è¡Œé¡ºåºå’Œä»£ç çš„å…ˆåé¡ºåºä¸€è‡´ï¼Œä½†æ˜¯å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ï¼Œç¼–è¯‘å™¨ä¼šå¯¹æŒ‡ä»¤è¿›è¡Œé‡æ’åºï¼Œè¿›è€Œå‡ºç°å¹¶å‘é—®é¢˜</li>
</ul>
<p>æŒ‡ä»¤é‡æ’ï¼š</p>
<ul>
<li>ç¼–è¯‘å™¨å’Œå¤„ç†å™¨ä¸ºäº†ä¼˜åŒ–æ€§èƒ½ï¼Œå¯¹æŒ‡ä»¤æ‰§è¡Œé¡ºåºè¿›è¡Œè°ƒæ•´ï¼ŒæŒ‡ä»¤é‡æ’ç±»å‹åŒ…æ‹¬ï¼šç¼–è¯‘å™¨é‡æ’å’Œcpué‡æ’ã€‚ä¸ºäº†é¿å…å¤šçº¿ç¨‹ä¹‹é—´æ“ä½œå‡ºç°ä¸åŒæ­¥ç°è±¡ï¼Œå¯ä»¥ä½¿ç”¨<code>volatile</code>å’Œ<code>synchorized</code>ç­‰æ¥é™åˆ¶è¿™ç§è¡Œä¸º</li>
</ul>
<h4 data-id="heading-6">ç›¸å…³æ–‡ç« </h4>
<ul>
<li>CASï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fnote.youdao.com%2Fs%2FAJECfbdA" target="_blank" title="https://note.youdao.com/s/AJECfbdA" ref="nofollow noopener noreferrer">note.youdao.com/s/AJECfbdA</a></li>
<li>ThreadLocalï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fnote.youdao.com%2Fs%2F7pvkie8N" target="_blank" title="https://note.youdao.com/s/7pvkie8N" ref="nofollow noopener noreferrer">note.youdao.com/s/7pvkie8N</a></li>
<li>CPUç¼“å­˜æ¶æ„ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fnote.youdao.com%2Fs%2FALicPbhV" target="_blank" title="https://note.youdao.com/s/ALicPbhV" ref="nofollow noopener noreferrer">note.youdao.com/s/ALicPbhV</a></li>
<li>JUCå¹¶å‘å·¥å…·ç±»ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fnote.youdao.com%2Fs%2FdbBcYl4a" target="_blank" title="https://note.youdao.com/s/dbBcYl4a" ref="nofollow noopener noreferrer">note.youdao.com/s/dbBcYl4a</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¦‚ä½•å®ç°åˆ’è¯æ•ˆæœ]]></title>    <link>https://juejin.cn/post/7587998744294768646</link>    <guid>https://juejin.cn/post/7587998744294768646</guid>    <pubDate>2025-12-26T10:41:11.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587998744294768646" data-draft-id="7587392473851805742" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¦‚ä½•å®ç°åˆ’è¯æ•ˆæœ"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript"/> <meta itemprop="datePublished" content="2025-12-26T10:41:11.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="june18"/> <meta itemprop="url" content="https://juejin.cn/user/1011206428561639"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¦‚ä½•å®ç°åˆ’è¯æ•ˆæœ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1011206428561639/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    june18
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-26T10:41:11.000Z" title="Fri Dec 26 2025 10:41:11 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»23åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æœ€è¿‘åšäº†ä¸€ä¸ªåˆ’è¯çš„éœ€æ±‚ï¼Œæƒ³å’Œå¤§å®¶åˆ†äº«ä¸€ä¸‹ã€‚åˆ’è¯åœ¨å¯Œæ–‡æœ¬ç¼–è¾‘å™¨é‡Œæ¯”è¾ƒå¸¸ç”¨ï¼Œæ•ˆæœå›¾å¦‚ä¸‹ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a0eab5eec4d34614bd694046415016a2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAganVuZTE4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767350471&amp;x-signature=FgxGXQtTGDzxMI%2BnypfoIWsLr68%3D" alt="åˆ’è¯æ•ˆæœ" loading="lazy"/></p>
<p>æœ¬ç¯‡æ–‡ç« å°†ä¸€æ­¥ä¸€æ­¥å¸¦å¤§å®¶å®ç°è¿™ä¸ªæ•ˆæœã€‚</p>
<h2 data-id="heading-0">å®ç°å­—æ•°ç»Ÿè®¡</h2>
<h3 data-id="heading-1">å‰ç½®çŸ¥è¯†</h3>
<h4 data-id="heading-2">window.getSelection</h4>
<p><code>window.getSelection</code> å¯è·å–é€‰ä¸­æ–‡æœ¬ä¿¡æ¯å’Œé€‰æ‹©å†…å®¹ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-variable language_">document</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"mouseup"</span>, <span class="hljs-keyword">function</span> (<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> selection = <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">getSelection</span>();
  <span class="hljs-keyword">if</span> (selection) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'selection'</span>, selection)
    <span class="hljs-keyword">const</span> selectedText = selection.<span class="hljs-title function_">toString</span>();
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(selectedText);
  }
});
</code></pre>
<p>æ‰§è¡Œç»“æœæˆªå›¾ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/db7ea8fbc6b84e929481a0e64fcb6c33~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAganVuZTE4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767350471&amp;x-signature=XhHbZgaVGNb0V%2F675o6tUnsc%2BQc%3D" alt="window.getSelection" loading="lazy"/></p>
<h3 data-id="heading-3">å®ç°è¾“å…¥æ¡†</h3>
<p>ä¸»ç»„ä»¶ <code>TextCustom</code>ï¼ŒåŒ…æ‹¬ä¸¤ä¸ªç»„ä»¶ï¼šè¾“å…¥æ¡†å’Œæµ®åŠ¨å·¥å…·æ ã€‚
è¿™é‡Œçš„è¾“å…¥æ¡†æ˜¯é€šè¿‡ <code>div</code> å…ƒç´ æ¨¡æ‹Ÿçš„ï¼Œå®ç°èµ·æ¥ä¹Ÿå¾ˆç®€å•ï¼Œåªéœ€è¦ä¸º <code>div</code> æ·»åŠ  <code>contentEditable</code> å±æ€§ ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> <span class="hljs-title function_">TextCustom</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      {/* æ¨¡æ‹Ÿè¾“å…¥æ¡† */}
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span>
        <span class="hljs-attr">id</span>=<span class="hljs-string">"editor"</span> // <span class="hljs-attr">åé¢ä¼šç”¨</span>
        <span class="hljs-attr">contentEditable</span>=<span class="hljs-string">{true}</span>
        <span class="hljs-attr">suppressContentEditableWarning</span>=<span class="hljs-string">{true}</span> // <span class="hljs-attr">suppressContentEditableWarning</span> <span class="hljs-attr">æ˜¯</span> <span class="hljs-attr">React</span> <span class="hljs-attr">æ¡†æ¶ä¸­çš„ä¸€ä¸ªç‰¹æ®Šå±æ€§</span>ï¼Œ<span class="hljs-attr">ç”¨äº</span>â€Œ<span class="hljs-attr">æŠ‘åˆ¶</span>â€Œ<span class="hljs-attr">contentEditable</span> <span class="hljs-attr">å…ƒç´ è§¦å‘çš„å¸¸è§è­¦å‘Š</span>
      /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
};
</code></pre>
<h3 data-id="heading-4">å®ç°æµ®åŠ¨å·¥å…·æ ç»„ä»¶</h3>
<h4 data-id="heading-5">æµ®åŠ¨å·¥å…·æ ç»„ä»¶å®ç°</h4>
<p>æµ®åŠ¨å·¥å…·æ ç»„ä»¶æ˜¯é€šè¿‡å›ºå®šå®šä½å®ç°çš„ï¼Œå·¥å…·æ çš„ä½ç½®æ˜¯è·Ÿéšé€‰ä¸­æ–‡æœ¬çš„ä½ç½®æ”¹å˜è€Œæ”¹å˜çš„ï¼Œä¸»è¦å±æ€§æ˜¯ <code>top</code> å’Œ <code>left</code>ï¼Œé»˜è®¤å€¼éƒ½å…ˆè®¾ç½®æˆ 0ã€‚</p>
<p>æµ®åŠ¨å·¥å…·æ ç»„ä»¶çš„å†…å®¹æ˜¯é€‰ä¸­æ–‡æœ¬çš„å­—æ•°ç»Ÿè®¡ï¼Œå…ˆç¡¬ç¼–ç æˆâ€œx å­—â€ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> <span class="hljs-title function_">FloatingToolbar</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>
      <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span>
        <span class="hljs-attr">position:</span> "<span class="hljs-attr">fixed</span>",
        <span class="hljs-attr">top:</span> <span class="hljs-attr">0</span>, // <span class="hljs-attr">åœ¨é€‰ä¸­æ–‡æœ¬ä¸Šæ–¹æ˜¾ç¤º</span>
        <span class="hljs-attr">left:</span> <span class="hljs-attr">0</span>, // <span class="hljs-attr">å±…ä¸­æ˜¾ç¤º</span>
        <span class="hljs-attr">transform:</span> "<span class="hljs-attr">translateX</span>(<span class="hljs-attr">-10</span>%)", // <span class="hljs-attr">å¾®è°ƒæ°´å¹³ä½ç½®</span>
        <span class="hljs-attr">background:</span> "#<span class="hljs-attr">fff</span>",
        <span class="hljs-attr">border:</span> "<span class="hljs-attr">1px</span> <span class="hljs-attr">solid</span> <span class="hljs-attr">red</span>",
        <span class="hljs-attr">zIndex:</span> <span class="hljs-attr">10000</span>,
      }}
    &gt;</span>
      {/* æ˜¾ç¤ºé€‰ä¸­æ–‡æœ¬çš„å­—ç¬¦æ•°é‡ */}
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
        ğŸ“ x å­—
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
};
</code></pre>
<h4 data-id="heading-6">å¼•å…¥åˆ°ä¸»ç»„ä»¶</h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> <span class="hljs-title function_">TextCustom</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      {/* æ¨¡æ‹Ÿè¾“å…¥æ¡† */}
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span>
        <span class="hljs-attr">id</span>=<span class="hljs-string">"editor"</span> // <span class="hljs-attr">åé¢ä¼šç”¨</span>
        <span class="hljs-attr">contentEditable</span>=<span class="hljs-string">{true}</span>
        <span class="hljs-attr">suppressContentEditableWarning</span>=<span class="hljs-string">{true}</span> // <span class="hljs-attr">suppressContentEditableWarning</span> <span class="hljs-attr">æ˜¯</span> <span class="hljs-attr">React</span> <span class="hljs-attr">æ¡†æ¶ä¸­çš„ä¸€ä¸ªç‰¹æ®Šå±æ€§</span>ï¼Œ<span class="hljs-attr">ç”¨äº</span>â€Œ<span class="hljs-attr">æŠ‘åˆ¶</span>â€Œ<span class="hljs-attr">contentEditable</span> <span class="hljs-attr">å…ƒç´ è§¦å‘çš„å¸¸è§è­¦å‘Š</span>
      /&gt;</span>

      <span class="hljs-tag">&lt;<span class="hljs-name">FloatingToolbar</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
};
</code></pre>
<h3 data-id="heading-7">å®ç°è‡ªå®šä¹‰ hook</h3>
<p>å°è£…è‡ªå®šä¹‰ hookï¼Œå¯å‘½åä¸º <code>useTextSelection</code>ï¼Œå…¥å‚æ˜¯è¾“å…¥æ¡† idï¼Œè¿”å› selection å’Œ toolbarRefã€‚
å…¶ä¸­ selection æ˜¯ç”¨æ¥è·å–æ–‡æœ¬é€‰æ‹©ä¿¡æ¯ï¼ŒåŒ…æ‹¬é€‰ä¸­æ–‡æœ¬çš„ä½ç½®å’Œé€‰ä¸­çš„æ–‡æœ¬å†…å®¹ï¼›toolbarRef æ˜¯å·¥å…·æ çš„å¼•ç”¨ï¼Œåé¢çš„é¼ æ ‡äº‹ä»¶ä¼šç”¨åˆ°ï¼Œå¤§æ¦‚ç»“æ„å¦‚ä¸‹ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> <span class="hljs-title function_">useTextSelection</span> = (<span class="hljs-params">target</span>) =&gt; {
  <span class="hljs-comment">// å­˜å‚¨æ–‡æœ¬é€‰æ‹©ä¿¡æ¯</span>
  <span class="hljs-keyword">const</span> [selection, setSelection] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">null</span>);
  
  <span class="hljs-comment">// æ ‡è®°ç”¨æˆ·æ˜¯å¦æ­£åœ¨ä¸å·¥å…·æ äº¤äº’ï¼Œæ¯”å¦‚ç‚¹å‡»å·¥å…·æ </span>
  <span class="hljs-keyword">const</span> isInToolbarRef = <span class="hljs-title function_">useRef</span>(<span class="hljs-literal">false</span>);
  
  <span class="hljs-comment">// å·¥å…·æ  DOM å…ƒç´ çš„å¼•ç”¨</span>
  <span class="hljs-keyword">const</span> toolbarRef = <span class="hljs-title function_">useRef</span>(<span class="hljs-literal">null</span>);

  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-comment">/**
     * å¤„ç†æ–‡æœ¬é€‰æ‹©å˜åŒ–äº‹ä»¶
     * å½“ç”¨æˆ·åœ¨é¡µé¢ä¸Šé€‰æ‹©æ–‡æœ¬æ—¶è§¦å‘
     */</span>
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleSelectionChange</span> = (<span class="hljs-params"/>) =&gt; {
      <span class="hljs-comment">// å¦‚æœç”¨æˆ·æ­£åœ¨ä¸å·¥å…·æ äº¤äº’ï¼Œä¸å¤„ç†é€‰æ‹©å˜åŒ–</span>
      <span class="hljs-keyword">if</span> (isInToolbarRef.<span class="hljs-property">current</span>) <span class="hljs-keyword">return</span>;

      <span class="hljs-keyword">const</span> selection = <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">getSelection</span>();
      <span class="hljs-keyword">const</span> selectedText = selection.<span class="hljs-title function_">toString</span>().<span class="hljs-title function_">trim</span>();

      <span class="hljs-comment">// ç¡®ä¿æœ‰é€‰ä¸­æ–‡æœ¬å¹¶ä¸”é€‰æ‹©èŒƒå›´æœ‰æ•ˆ</span>
      <span class="hljs-keyword">if</span> (selectedText &amp;&amp; selection.<span class="hljs-property">rangeCount</span> &gt; <span class="hljs-number">0</span>) {
        <span class="hljs-keyword">const</span> range = selection.<span class="hljs-title function_">getRangeAt</span>(<span class="hljs-number">0</span>);
        <span class="hljs-keyword">const</span> rect = range.<span class="hljs-title function_">getBoundingClientRect</span>(); <span class="hljs-comment">// è·å–é€‰ä¸­æ–‡æœ¬çš„ä½ç½®å’Œå°ºå¯¸</span>

        <span class="hljs-comment">// è·å–é€‰ä¸­æ–‡æœ¬çš„é”šç‚¹èŠ‚ç‚¹ï¼ˆé€‰æ‹©çš„èµ·å§‹ä½ç½®ï¼‰</span>
        <span class="hljs-keyword">const</span> anchorNode = selection.<span class="hljs-property">anchorNode</span>;
        <span class="hljs-comment">// è·å–ç›®æ ‡ç¼–è¾‘å™¨å…ƒç´ </span>
        <span class="hljs-keyword">const</span> targetElement = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(target);
        
        <span class="hljs-comment">// æ£€æŸ¥é€‰æ‹©æ˜¯å¦å‘ç”Ÿåœ¨ç›®æ ‡ç¼–è¾‘å™¨å†…</span>
        <span class="hljs-keyword">const</span> isInTarget =
          targetElement &amp;&amp;
          (targetElement.<span class="hljs-title function_">contains</span>(anchorNode) || targetElement === anchorNode);

        <span class="hljs-keyword">if</span> (isInTarget) {
          <span class="hljs-comment">// æ›´æ–°é€‰æ‹©ä¿¡æ¯ï¼Œæ˜¾ç¤ºå·¥å…·æ </span>
          <span class="hljs-title function_">setSelection</span>({
            <span class="hljs-attr">clientRect</span>: rect,        <span class="hljs-comment">// é€‰ä¸­æ–‡æœ¬çš„ä½ç½®ä¿¡æ¯</span>
            <span class="hljs-attr">selectedText</span>: selectedText, <span class="hljs-comment">// é€‰ä¸­çš„æ–‡æœ¬å†…å®¹</span>
          });
        } <span class="hljs-keyword">else</span> {
          <span class="hljs-comment">// é€‰æ‹©ä¸åœ¨ç¼–è¾‘å™¨å†…ï¼Œéšè—å·¥å…·æ </span>
          <span class="hljs-title function_">setSelection</span>(<span class="hljs-literal">null</span>);
        }
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-comment">// æ²¡æœ‰é€‰ä¸­æ–‡æœ¬ï¼Œéšè—å·¥å…·æ </span>
        <span class="hljs-title function_">setSelection</span>(<span class="hljs-literal">null</span>);
      }
    };

    <span class="hljs-comment">/**
     * å¤„ç†é¼ æ ‡æŒ‰ä¸‹äº‹ä»¶
     * ç”¨äºæ£€æµ‹ç”¨æˆ·æ˜¯å¦ç‚¹å‡»äº†å·¥å…·æ åŒºåŸŸ
     * <span class="hljs-doctag">@param</span> {<span class="hljs-type">MouseEvent</span>} <span class="hljs-variable">e</span> - é¼ æ ‡äº‹ä»¶å¯¹è±¡
     */</span>
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleMouseDown</span> = (<span class="hljs-params">e</span>) =&gt; {
      <span class="hljs-comment">// æ£€æŸ¥ç‚¹å‡»æ˜¯å¦å‘ç”Ÿåœ¨å·¥å…·æ åŒºåŸŸå†…</span>
      <span class="hljs-keyword">if</span> (toolbarRef.<span class="hljs-property">current</span> &amp;&amp; toolbarRef.<span class="hljs-property">current</span>.<span class="hljs-title function_">contains</span>(e.<span class="hljs-property">target</span>)) {
        isInToolbarRef.<span class="hljs-property">current</span> = <span class="hljs-literal">true</span>; <span class="hljs-comment">// ç”¨æˆ·æ­£åœ¨ä¸å·¥å…·æ äº¤äº’</span>
      } <span class="hljs-keyword">else</span> {
        isInToolbarRef.<span class="hljs-property">current</span> = <span class="hljs-literal">false</span>; <span class="hljs-comment">// ç”¨æˆ·ç‚¹å‡»äº†å·¥å…·æ å¤–éƒ¨</span>
      }
    };

    <span class="hljs-comment">/**
     * å¤„ç†é¼ æ ‡æŠ¬èµ·äº‹ä»¶
     * ç”¨æˆ·å®Œæˆé€‰æ‹©æ“ä½œåï¼Œå»¶è¿Ÿæ£€æŸ¥é€‰æ‹©å†…å®¹
     */</span>
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleMouseUp</span> = (<span class="hljs-params"/>) =&gt; {
      <span class="hljs-comment">// å»¶è¿Ÿ 100ms æ‰§è¡Œï¼Œç¡®ä¿æµè§ˆå™¨å·²å®Œæˆé€‰æ‹©æ“ä½œ</span>
      <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
        <span class="hljs-comment">// å¦‚æœç”¨æˆ·æ²¡æœ‰ä¸å·¥å…·æ äº¤äº’ï¼Œå¤„ç†é€‰æ‹©å˜åŒ–</span>
        <span class="hljs-keyword">if</span> (!isInToolbarRef.<span class="hljs-property">current</span>) {
          <span class="hljs-title function_">handleSelectionChange</span>();
        }
      }, <span class="hljs-number">100</span>);
    };

    <span class="hljs-comment">/**
     * å¤„ç†ç‚¹å‡»å¤–éƒ¨äº‹ä»¶
     * å½“ç”¨æˆ·ç‚¹å‡»å·¥å…·æ å’Œç¼–è¾‘å™¨å¤–éƒ¨æ—¶ï¼Œéšè—å·¥å…·æ 
     * <span class="hljs-doctag">@param</span> {<span class="hljs-type">MouseEvent</span>} <span class="hljs-variable">e</span> - é¼ æ ‡äº‹ä»¶å¯¹è±¡
     */</span>
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleClickOutside</span> = (<span class="hljs-params">e</span>) =&gt; {
      <span class="hljs-comment">// æ£€æŸ¥ç‚¹å‡»æ˜¯å¦å‘ç”Ÿåœ¨å·¥å…·æ å¤–éƒ¨</span>
      <span class="hljs-keyword">if</span> (toolbarRef.<span class="hljs-property">current</span> &amp;&amp; !toolbarRef.<span class="hljs-property">current</span>.<span class="hljs-title function_">contains</span>(e.<span class="hljs-property">target</span>)) {
        <span class="hljs-keyword">const</span> targetElement = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(target);
        <span class="hljs-comment">// æ£€æŸ¥ç‚¹å‡»æ˜¯å¦ä¹Ÿå‘ç”Ÿåœ¨ç¼–è¾‘å™¨å¤–éƒ¨</span>
        <span class="hljs-keyword">if</span> (targetElement &amp;&amp; !targetElement.<span class="hljs-title function_">contains</span>(e.<span class="hljs-property">target</span>)) {
          <span class="hljs-comment">// é‡ç½®é€‰æ‹©ä¿¡æ¯ï¼Œéšè—å·¥å…·æ </span>
          <span class="hljs-title function_">setSelection</span>(<span class="hljs-literal">null</span>);
        }
      }
    };

    <span class="hljs-comment">// æ·»åŠ äº‹ä»¶ç›‘å¬å™¨</span>
    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"selectionchange"</span>, handleSelectionChange); <span class="hljs-comment">// ç›‘å¬æ–‡æœ¬é€‰æ‹©å˜åŒ–</span>
    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"mousedown"</span>, handleMouseDown); <span class="hljs-comment">// ç›‘å¬é¼ æ ‡æŒ‰ä¸‹</span>
    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"mouseup"</span>, handleMouseUp); <span class="hljs-comment">// ç›‘å¬é¼ æ ‡æŠ¬èµ·</span>
    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"mousedown"</span>, handleClickOutside); <span class="hljs-comment">// ç›‘å¬å¤–éƒ¨ç‚¹å‡»</span>

    <span class="hljs-comment">// æ¸…ç†å‡½æ•°ï¼šç»„ä»¶å¸è½½æ—¶ç§»é™¤äº‹ä»¶ç›‘å¬å™¨</span>
    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">"selectionchange"</span>, handleSelectionChange);
      <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">"mousedown"</span>, handleMouseDown);
      <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">"mouseup"</span>, handleMouseUp);
      <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">"mousedown"</span>, handleClickOutside);
    };
  }, [target]); <span class="hljs-comment">// ä¾èµ–é¡¹ï¼šå½“ target å˜åŒ–æ—¶é‡æ–°è¿è¡Œ effect</span>

  <span class="hljs-keyword">return</span> {
    selection,    <span class="hljs-comment">// å½“å‰çš„é€‰æ‹©ä¿¡æ¯</span>
    toolbarRef,   <span class="hljs-comment">// å·¥å…·æ çš„ ref å¼•ç”¨</span>
  };
}
</code></pre>
<p>ä¸»ç»„ä»¶ä¿®æ”¹å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> <span class="hljs-title function_">TextCustom</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-comment">// ä½¿ç”¨è‡ªå®šä¹‰ Hook è·å–æ–‡æœ¬é€‰æ‹©ä¿¡æ¯å’Œå·¥å…·æ å¼•ç”¨</span>
  <span class="hljs-keyword">const</span> { selection, toolbarRef } = <span class="hljs-title function_">useTextSelection</span>(<span class="hljs-string">"#editor"</span>);

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span>
        <span class="hljs-attr">id</span>=<span class="hljs-string">"editor"</span>
        <span class="hljs-attr">contentEditable</span>=<span class="hljs-string">{true}</span>
        <span class="hljs-attr">className</span>=<span class="hljs-string">{styles.editor}</span>
        <span class="hljs-attr">suppressContentEditableWarning</span>=<span class="hljs-string">{true}</span>
      /&gt;</span>

      <span class="hljs-tag">&lt;<span class="hljs-name">FloatingToolbar</span>
        <span class="hljs-attr">selection</span>=<span class="hljs-string">{selection}</span>
        <span class="hljs-attr">toolbarRef</span>=<span class="hljs-string">{toolbarRef}</span>
      /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
};
</code></pre>
<p>æµ®åŠ¨å·¥å…·æ ä¿®æ”¹å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> <span class="hljs-title function_">FloatingToolbar</span> = (<span class="hljs-params">{
  selection,
  toolbarRef,
}</span>) =&gt; {
  <span class="hljs-comment">// å¦‚æœæ²¡æœ‰é€‰æ‹©ä¿¡æ¯ï¼Œä¸æ¸²æŸ“å·¥å…·æ </span>
  <span class="hljs-keyword">if</span> (!selection) <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;

  <span class="hljs-keyword">const</span> { clientRect, selectedText } = selection;
  
  <span class="hljs-comment">// å¦‚æœæ²¡æœ‰é€‰ä¸­æ–‡æœ¬æˆ–ä½ç½®ä¿¡æ¯ï¼Œä¸æ¸²æŸ“å·¥å…·æ </span>
  <span class="hljs-keyword">if</span> (!selectedText || !clientRect) <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>
      <span class="hljs-attr">ref</span>=<span class="hljs-string">{toolbarRef}</span>
      <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span>
        <span class="hljs-attr">position:</span> "<span class="hljs-attr">fixed</span>",
        <span class="hljs-attr">top:</span> <span class="hljs-attr">clientRect.top</span> <span class="hljs-attr">-</span> <span class="hljs-attr">65</span>, // <span class="hljs-attr">åœ¨é€‰ä¸­æ–‡æœ¬ä¸Šæ–¹æ˜¾ç¤º</span>ï¼Œ<span class="hljs-attr">65</span> <span class="hljs-attr">ä¸æ˜¯å›ºå®šçš„</span>ï¼Œ<span class="hljs-attr">å¯ä»¥è‡ªè¡Œè°ƒæ•´</span>
        <span class="hljs-attr">left:</span> <span class="hljs-attr">clientRect.left</span> + <span class="hljs-attr">clientRect.width</span> / <span class="hljs-attr">2</span>, // <span class="hljs-attr">å±…ä¸­æ˜¾ç¤º</span>
        <span class="hljs-attr">transform:</span> "<span class="hljs-attr">translateX</span>(<span class="hljs-attr">-10</span>%)", // <span class="hljs-attr">å¾®è°ƒæ°´å¹³ä½ç½®</span>
        <span class="hljs-attr">background:</span> "#<span class="hljs-attr">fff</span>",
        <span class="hljs-attr">border:</span> "<span class="hljs-attr">1px</span> <span class="hljs-attr">solid</span> <span class="hljs-attr">red</span>",
        <span class="hljs-attr">zIndex:</span> <span class="hljs-attr">10000</span>,
      }}
    &gt;</span>
      {/* æ˜¾ç¤ºé€‰ä¸­æ–‡æœ¬çš„å­—ç¬¦æ•°é‡ */}
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
        ğŸ“ {selectedText.length} å­—
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
};
</code></pre>
<h2 data-id="heading-8">å®ç°åŠ ç²—</h2>
<h3 data-id="heading-9">å‰ç½®çŸ¥è¯†</h3>
<h4 data-id="heading-10">document.execCommand</h4>
<p><code>document.execCommand</code> å¯å¯¹é€‰ä¸­æ–‡æœ¬è¿›è¡Œæ“ä½œï¼Œæ¯”å¦‚åŠ ç²—ã€æ–œä½“ã€ä¸‹åˆ’çº¿ç­‰ï¼Œä¸¾ä¸ªç®€å•çš„ä¾‹å­ã€‚</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>æ–‡æœ¬ç¼–è¾‘å™¨ç¤ºä¾‹<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
   <span class="hljs-selector-class">.editor</span> {
      <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#ccc</span>;
      <span class="hljs-attribute">padding</span>: <span class="hljs-number">10px</span>;
      <span class="hljs-attribute">min-height</span>: <span class="hljs-number">200px</span>;
    }
  </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">contentEditable</span>=<span class="hljs-string">"true"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"editor"</span>&gt;</span>
    è¯·åœ¨è¿™é‡Œè¾“å…¥æ–‡æœ¬ï¼Œç„¶åé€‰ä¸­ä¸€éƒ¨åˆ†æ–‡æœ¬å¹¶ç‚¹å‡»ç›¸åº”çš„æŒ‰é’®ã€‚
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">"handleBold()"</span>&gt;</span>åŠ ç²—<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">"handleItalic()"</span>&gt;</span>æ–œä½“<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">"handleUnderline()"</span>&gt;</span>ä¸‹åˆ’çº¿<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>

  <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">handleBold</span>(<span class="hljs-params"/>) {
      <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">execCommand</span>(<span class="hljs-string">"bold"</span>, <span class="hljs-literal">false</span>, <span class="hljs-literal">null</span>);
    }

    <span class="hljs-keyword">function</span> <span class="hljs-title function_">handleItalic</span>(<span class="hljs-params"/>) {
      <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">execCommand</span>(<span class="hljs-string">"italic"</span>, <span class="hljs-literal">false</span>, <span class="hljs-literal">null</span>);
    }

    <span class="hljs-keyword">function</span> <span class="hljs-title function_">handleUnderline</span>(<span class="hljs-params"/>) {
      <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">execCommand</span>(<span class="hljs-string">"underline"</span>, <span class="hljs-literal">false</span>, <span class="hljs-literal">null</span>);
    }
  </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/df031f24e0f641e6a1d8819ecd12c024~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAganVuZTE4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767350471&amp;x-signature=RyYPGawTLaqM%2B7EMAfiPCU0ofk0%3D" alt="æ–‡æœ¬ç¼–è¾‘å™¨ç¤ºä¾‹" loading="lazy"/></p>
<h4 data-id="heading-11">document.queryCommandState("bold")</h4>
<p><code>document.queryCommandState("bold")</code> å¯è·å–åŠ ç²—çŠ¶æ€ï¼Œè¿”å›å¸ƒå°”å€¼ã€‚å½“é€‰æ‹©çš„æ–‡æœ¬ï¼Œåªæœ‰éƒ¨åˆ†åŠ ç²—æ—¶ä¹Ÿä¼šè¿”å› trueã€‚</p>
<h3 data-id="heading-12">ä¿®æ”¹ä¸»ç»„ä»¶</h3>
<p>ä»è‡ªå®šä¹‰ Hook ä¸­è·å– <code>isBoldActive</code> å’Œ <code>handleBoldClick</code>ï¼Œå¹¶ä¼ ç»™æµ®åŠ¨å·¥å…·æ ç»„ä»¶ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> <span class="hljs-title function_">TextCustom</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-comment">// ä½¿ç”¨è‡ªå®šä¹‰ Hook è·å–æ–‡æœ¬é€‰æ‹©ä¿¡æ¯</span>
  <span class="hljs-keyword">const</span> { 
    selection, 
    toolbarRef, 
    isBoldActive, 
    handleBoldClick 
  } = <span class="hljs-title function_">useTextSelection</span>(<span class="hljs-string">"#editor"</span>);

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      {/* å¯ç¼–è¾‘çš„æ–‡æœ¬åŒºåŸŸ */}
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span>
        <span class="hljs-attr">id</span>=<span class="hljs-string">"editor"</span>
        <span class="hljs-attr">contentEditable</span>=<span class="hljs-string">{true}</span>
        <span class="hljs-attr">suppressContentEditableWarning</span>=<span class="hljs-string">{true}</span>
      /&gt;</span>

      {/* æµ®åŠ¨å·¥å…·æ ç»„ä»¶ */}
      <span class="hljs-tag">&lt;<span class="hljs-name">FloatingToolbar</span>
        <span class="hljs-attr">selection</span>=<span class="hljs-string">{selection}</span>
        <span class="hljs-attr">toolbarRef</span>=<span class="hljs-string">{toolbarRef}</span>
        <span class="hljs-attr">onBoldClick</span>=<span class="hljs-string">{handleBoldClick}</span>
        <span class="hljs-attr">isBoldActive</span>=<span class="hljs-string">{isBoldActive}</span>
      /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
};
</code></pre>
<h3 data-id="heading-13">ä¿®æ”¹æµ®åŠ¨å·¥å…·æ </h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> <span class="hljs-title function_">FloatingToolbar</span> = (<span class="hljs-params">{
  selection,
  toolbarRef,
  onBoldClick,
  isBoldActive = <span class="hljs-literal">false</span>,
}</span>) =&gt; {
  <span class="hljs-comment">// å¦‚æœæ²¡æœ‰é€‰æ‹©ä¿¡æ¯ï¼Œä¸æ¸²æŸ“å·¥å…·æ </span>
  <span class="hljs-keyword">if</span> (!selection) <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;

  <span class="hljs-keyword">const</span> { clientRect, selectedText, range } = selection;
  
  <span class="hljs-comment">// å¦‚æœæ²¡æœ‰é€‰ä¸­æ–‡æœ¬æˆ–ä½ç½®ä¿¡æ¯ï¼Œä¸æ¸²æŸ“å·¥å…·æ </span>
  <span class="hljs-keyword">if</span> (!selectedText || !clientRect || !range) <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>
      <span class="hljs-attr">ref</span>=<span class="hljs-string">{toolbarRef}</span>
      <span class="hljs-attr">className</span>=<span class="hljs-string">"floating-toolbar"</span>
      <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span>
        <span class="hljs-attr">position:</span> "<span class="hljs-attr">fixed</span>",
        <span class="hljs-attr">top:</span> <span class="hljs-attr">clientRect.top</span> <span class="hljs-attr">-</span> <span class="hljs-attr">65</span>,
        <span class="hljs-attr">left:</span> <span class="hljs-attr">clientRect.left</span> + <span class="hljs-attr">clientRect.width</span> / <span class="hljs-attr">2</span>,
        <span class="hljs-attr">transform:</span> "<span class="hljs-attr">translateX</span>(<span class="hljs-attr">-10</span>%)",
        <span class="hljs-attr">background:</span> "#<span class="hljs-attr">fff</span>",
        <span class="hljs-attr">zIndex:</span> <span class="hljs-attr">10000</span>,
        <span class="hljs-attr">minWidth:</span> "<span class="hljs-attr">180px</span>",
      }}
    &gt;</span>
      {/* æ˜¾ç¤ºé€‰ä¸­æ–‡æœ¬çš„å­—ç¬¦æ•°é‡ */}
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">fontSize:</span> "<span class="hljs-attr">12px</span>", <span class="hljs-attr">fontWeight:</span> "<span class="hljs-attr">bold</span>" }}&gt;</span>
        ğŸ“ {selectedText.length} å­—
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

      {/* åŠ ç²—æŒ‰é’® */}
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span>
        <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> onBoldClick &amp;&amp; onBoldClick(range)}
        title="åŠ ç²—"
        style={{
          background: isBoldActive ? "#3498db" : "#999",
          border: "none",
          color: "white",
          width: "36px",
          height: "36px",
          borderRadius: "6px",
          cursor: "pointer",
          display: "flex",
          alignItems: "center",
          justifyContent: "center",
          fontSize: "14px",
        }}
      &gt;
        <span class="hljs-tag">&lt;<span class="hljs-name">strong</span>&gt;</span>B<span class="hljs-tag">&lt;/<span class="hljs-name">strong</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
};
</code></pre>
<h3 data-id="heading-14">ä¿®æ”¹è‡ªå®šä¹‰ Hook</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> <span class="hljs-title function_">useTextSelection</span> = (<span class="hljs-params">target</span>) =&gt; {
  <span class="hljs-keyword">const</span> [selection, setSelection] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">null</span>);
  <span class="hljs-keyword">const</span> [isBoldActive, setIsBoldActive] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">false</span>);
  
  <span class="hljs-comment">// æ ‡è®°ç”¨æˆ·æ˜¯å¦æ­£åœ¨ä¸å·¥å…·æ äº¤äº’</span>
  <span class="hljs-keyword">const</span> isInToolbarRef = <span class="hljs-title function_">useRef</span>(<span class="hljs-literal">false</span>);
  
  <span class="hljs-comment">// å·¥å…·æ  DOM å…ƒç´ çš„å¼•ç”¨</span>
  <span class="hljs-keyword">const</span> toolbarRef = <span class="hljs-title function_">useRef</span>(<span class="hljs-literal">null</span>);

  <span class="hljs-comment">// è·å–åŠ ç²—çŠ¶æ€</span>
  <span class="hljs-keyword">const</span> getBoldState = <span class="hljs-title function_">useCallback</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">document</span>.<span class="hljs-property">queryCommandState</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">queryCommandState</span>(<span class="hljs-string">"bold"</span>);
  }, []);

  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-comment">/**
     * å¤„ç†æ–‡æœ¬é€‰æ‹©å˜åŒ–äº‹ä»¶
     */</span>
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleSelectionChange</span> = (<span class="hljs-params"/>) =&gt; {
      <span class="hljs-comment">// å¦‚æœç”¨æˆ·æ­£åœ¨ä¸å·¥å…·æ äº¤äº’ï¼Œä¸å¤„ç†é€‰æ‹©å˜åŒ–</span>
      <span class="hljs-keyword">if</span> (isInToolbarRef.<span class="hljs-property">current</span>) <span class="hljs-keyword">return</span>;

      <span class="hljs-keyword">const</span> selection = <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">getSelection</span>();
      <span class="hljs-keyword">const</span> selectedText = selection.<span class="hljs-title function_">toString</span>().<span class="hljs-title function_">trim</span>();

      <span class="hljs-comment">// ç¡®ä¿æœ‰é€‰ä¸­æ–‡æœ¬å¹¶ä¸”é€‰æ‹©èŒƒå›´æœ‰æ•ˆ</span>
      <span class="hljs-keyword">if</span> (selectedText &amp;&amp; selection.<span class="hljs-property">rangeCount</span> &gt; <span class="hljs-number">0</span>) {
        <span class="hljs-keyword">const</span> range = selection.<span class="hljs-title function_">getRangeAt</span>(<span class="hljs-number">0</span>);
        <span class="hljs-keyword">const</span> rect = range.<span class="hljs-title function_">getBoundingClientRect</span>();

        <span class="hljs-keyword">const</span> anchorNode = selection.<span class="hljs-property">anchorNode</span>;
        <span class="hljs-keyword">const</span> targetElement = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(target);
        
        <span class="hljs-comment">// æ£€æŸ¥é€‰æ‹©æ˜¯å¦å‘ç”Ÿåœ¨ç›®æ ‡ç¼–è¾‘å™¨å†…</span>
        <span class="hljs-keyword">const</span> isInTarget =
          targetElement &amp;&amp;
          (targetElement.<span class="hljs-title function_">contains</span>(anchorNode) || targetElement === anchorNode);

        <span class="hljs-keyword">if</span> (isInTarget) {
          <span class="hljs-comment">// ä¿å­˜é€‰æ‹©èŒƒå›´</span>
          <span class="hljs-comment">// æ›´æ–°é€‰æ‹©ä¿¡æ¯ï¼Œæ˜¾ç¤ºå·¥å…·æ </span>
          <span class="hljs-title function_">setSelection</span>({
            <span class="hljs-attr">clientRect</span>: rect,
            <span class="hljs-attr">selectedText</span>: selectedText,
            <span class="hljs-attr">range</span>: range,
          });

          <span class="hljs-comment">// è·å–å½“å‰åŠ ç²—çŠ¶æ€</span>
          <span class="hljs-title function_">setIsBoldActive</span>(<span class="hljs-title function_">getBoldState</span>());  <span class="hljs-comment">// å›æ˜¾åŠ ç²—ä½¿ç”¨</span>
        } <span class="hljs-keyword">else</span> {
          <span class="hljs-comment">// é€‰æ‹©ä¸åœ¨ç¼–è¾‘å™¨å†…ï¼Œéšè—å·¥å…·æ </span>
          <span class="hljs-title function_">setSelection</span>(<span class="hljs-literal">null</span>);
        }
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-comment">// æ²¡æœ‰é€‰ä¸­æ–‡æœ¬ï¼Œéšè—å·¥å…·æ </span>
        <span class="hljs-title function_">setSelection</span>(<span class="hljs-literal">null</span>);
      }
    };

    <span class="hljs-comment">/**
     * å¤„ç†é¼ æ ‡æŒ‰ä¸‹äº‹ä»¶
     */</span>
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleMouseDown</span> = (<span class="hljs-params">e</span>) =&gt; {
      <span class="hljs-comment">// æ£€æŸ¥ç‚¹å‡»æ˜¯å¦å‘ç”Ÿåœ¨å·¥å…·æ åŒºåŸŸå†…</span>
      <span class="hljs-keyword">if</span> (toolbarRef.<span class="hljs-property">current</span> &amp;&amp; toolbarRef.<span class="hljs-property">current</span>.<span class="hljs-title function_">contains</span>(e.<span class="hljs-property">target</span>)) {
        isInToolbarRef.<span class="hljs-property">current</span> = <span class="hljs-literal">true</span>;
      } <span class="hljs-keyword">else</span> {
        isInToolbarRef.<span class="hljs-property">current</span> = <span class="hljs-literal">false</span>;
      }
    };

    <span class="hljs-comment">/**
     * å¤„ç†é¼ æ ‡æŠ¬èµ·äº‹ä»¶
     */</span>
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleMouseUp</span> = (<span class="hljs-params"/>) =&gt; {
      <span class="hljs-comment">// å»¶è¿Ÿæ‰§è¡Œï¼Œç¡®ä¿æµè§ˆå™¨å·²å®Œæˆé€‰æ‹©æ“ä½œ</span>
      <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
        <span class="hljs-keyword">if</span> (!isInToolbarRef.<span class="hljs-property">current</span>) {
          <span class="hljs-title function_">handleSelectionChange</span>();
        }
      }, <span class="hljs-number">100</span>);
    };

    <span class="hljs-comment">/**
     * å¤„ç†ç‚¹å‡»å¤–éƒ¨äº‹ä»¶
     */</span>
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleClickOutside</span> = (<span class="hljs-params">e</span>) =&gt; {
      <span class="hljs-keyword">if</span> (toolbarRef.<span class="hljs-property">current</span> &amp;&amp; !toolbarRef.<span class="hljs-property">current</span>.<span class="hljs-title function_">contains</span>(e.<span class="hljs-property">target</span>)) {
        <span class="hljs-keyword">const</span> targetElement = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(target);
        <span class="hljs-keyword">if</span> (targetElement &amp;&amp; !targetElement.<span class="hljs-title function_">contains</span>(e.<span class="hljs-property">target</span>)) {
          <span class="hljs-title function_">setSelection</span>(<span class="hljs-literal">null</span>);
        }
      }
    };

    <span class="hljs-comment">// æ·»åŠ äº‹ä»¶ç›‘å¬å™¨</span>
    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"selectionchange"</span>, handleSelectionChange);
    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"mousedown"</span>, handleMouseDown);
    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"mouseup"</span>, handleMouseUp);
    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"mousedown"</span>, handleClickOutside);

    <span class="hljs-comment">// æ¸…ç†å‡½æ•°ï¼šç»„ä»¶å¸è½½æ—¶ç§»é™¤äº‹ä»¶ç›‘å¬å™¨</span>
    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">"selectionchange"</span>, handleSelectionChange);
      <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">"mousedown"</span>, handleMouseDown);
      <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">"mouseup"</span>, handleMouseUp);
      <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">"mousedown"</span>, handleClickOutside);
    };
  }, [target, getBoldState]);

  <span class="hljs-comment">// å¤„ç†åŠ ç²—æ“ä½œ</span>
  <span class="hljs-keyword">const</span> handleBoldClick = <span class="hljs-title function_">useCallback</span>(<span class="hljs-function">(<span class="hljs-params">range</span>) =&gt;</span> {
    <span class="hljs-keyword">if</span> (!range) <span class="hljs-keyword">return</span>;

    <span class="hljs-comment">// æ‰§è¡ŒåŠ ç²—å‘½ä»¤</span>
    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">execCommand</span>(<span class="hljs-string">"bold"</span>, <span class="hljs-literal">false</span>, <span class="hljs-literal">null</span>);

    <span class="hljs-title function_">setIsBoldActive</span>(<span class="hljs-title function_">getBoldState</span>());
  }, [getBoldState]);

  <span class="hljs-keyword">return</span> {
    selection,
    toolbarRef,
    isBoldActive,
    handleBoldClick,
  };
};
</code></pre>
<h2 data-id="heading-15">å®ç°æ–œä½“</h2>
<p>åŠ ç²—ç†è§£äº†ï¼Œæ–œä½“å°±ç®€å•äº†ï¼Œæµç¨‹æ˜¯ä¸€æ¨¡ä¸€æ ·çš„ã€‚</p>
<h3 data-id="heading-16">ä¿®æ”¹ä¸»ç»„ä»¶</h3>
<p>ä»è‡ªå®šä¹‰ Hook ä¸­è·å– <code>isItalicActive</code> å’Œ <code>handleItalicClick</code>ï¼Œå¹¶ä¼ ç»™æµ®åŠ¨å·¥å…·æ ç»„ä»¶ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> <span class="hljs-title function_">TextCustom</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-comment">// ä½¿ç”¨è‡ªå®šä¹‰ Hook è·å–æ–‡æœ¬é€‰æ‹©ä¿¡æ¯</span>
  <span class="hljs-keyword">const</span> { 
    selection, 
    toolbarRef, 
    isBoldActive, 
    isItalicActive,
    handleBoldClick,
    handleItalicClick
  } = <span class="hljs-title function_">useTextSelection</span>(<span class="hljs-string">"#editor"</span>);

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      {/* å¯ç¼–è¾‘çš„æ–‡æœ¬åŒºåŸŸ */}
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span>
        <span class="hljs-attr">id</span>=<span class="hljs-string">"editor"</span>
        <span class="hljs-attr">contentEditable</span>=<span class="hljs-string">{true}</span>
        <span class="hljs-attr">suppressContentEditableWarning</span>=<span class="hljs-string">{true}</span>
      /&gt;</span>

      {/* æµ®åŠ¨å·¥å…·æ ç»„ä»¶ */}
      <span class="hljs-tag">&lt;<span class="hljs-name">FloatingToolbar</span>
        <span class="hljs-attr">selection</span>=<span class="hljs-string">{selection}</span>
        <span class="hljs-attr">toolbarRef</span>=<span class="hljs-string">{toolbarRef}</span>
        <span class="hljs-attr">onBoldClick</span>=<span class="hljs-string">{handleBoldClick}</span>
        <span class="hljs-attr">onItalicClick</span>=<span class="hljs-string">{handleItalicClick}</span>
        <span class="hljs-attr">isBoldActive</span>=<span class="hljs-string">{isBoldActive}</span>
        <span class="hljs-attr">isItalicActive</span>=<span class="hljs-string">{isItalicActive}</span>
      /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
};
</code></pre>
<h3 data-id="heading-17">ä¿®æ”¹æµ®åŠ¨å·¥å…·æ </h3>
<p>å¢åŠ æ–œä½“æŒ‰é’®ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> <span class="hljs-title function_">FloatingToolbar</span> = (<span class="hljs-params">{
  selection,
  toolbarRef,
  onBoldClick,
  onItalicClick,
  isBoldActive = <span class="hljs-literal">false</span>,
  isItalicActive = <span class="hljs-literal">false</span>,
}</span>) =&gt; {
  <span class="hljs-comment">// å¦‚æœæ²¡æœ‰é€‰æ‹©ä¿¡æ¯ï¼Œä¸æ¸²æŸ“å·¥å…·æ </span>
  <span class="hljs-keyword">if</span> (!selection) <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;

  <span class="hljs-keyword">const</span> { clientRect, selectedText, range } = selection;
  
  <span class="hljs-comment">// å¦‚æœæ²¡æœ‰é€‰ä¸­æ–‡æœ¬æˆ–ä½ç½®ä¿¡æ¯ï¼Œä¸æ¸²æŸ“å·¥å…·æ </span>
  <span class="hljs-keyword">if</span> (!selectedText || !clientRect || !range) <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>
      <span class="hljs-attr">ref</span>=<span class="hljs-string">{toolbarRef}</span>
      <span class="hljs-attr">className</span>=<span class="hljs-string">"floating-toolbar"</span>
      <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span>
        <span class="hljs-attr">position:</span> "<span class="hljs-attr">fixed</span>",
        <span class="hljs-attr">top:</span> <span class="hljs-attr">clientRect.top</span> <span class="hljs-attr">-</span> <span class="hljs-attr">65</span>,
        <span class="hljs-attr">left:</span> <span class="hljs-attr">clientRect.left</span> + <span class="hljs-attr">clientRect.width</span> / <span class="hljs-attr">2</span>,
        <span class="hljs-attr">transform:</span> "<span class="hljs-attr">translateX</span>(<span class="hljs-attr">-10</span>%)",
        <span class="hljs-attr">background:</span> "#<span class="hljs-attr">fff</span>",
        <span class="hljs-attr">zIndex:</span> <span class="hljs-attr">10000</span>,
        <span class="hljs-attr">minWidth:</span> "<span class="hljs-attr">180px</span>",
      }}
    &gt;</span>
      {/* æ˜¾ç¤ºé€‰ä¸­æ–‡æœ¬çš„å­—ç¬¦æ•°é‡ */}
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">fontSize:</span> "<span class="hljs-attr">12px</span>", <span class="hljs-attr">fontWeight:</span> "<span class="hljs-attr">bold</span>" }}&gt;</span>
        ğŸ“ {selectedText.length} å­—
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

      {/* åŠ ç²—æŒ‰é’® */}
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span>
        <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> onBoldClick &amp;&amp; onBoldClick(range)}
        title="åŠ ç²—"
        style={{
          background: isBoldActive ? "#3498db" : "#999",
          border: "none",
          color: "white",
          width: "36px",
          height: "36px",
          borderRadius: "6px",
          cursor: "pointer",
          display: "flex",
          alignItems: "center",
          justifyContent: "center",
          fontSize: "14px",
        }}
      &gt;
        <span class="hljs-tag">&lt;<span class="hljs-name">strong</span>&gt;</span>B<span class="hljs-tag">&lt;/<span class="hljs-name">strong</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>

      {/* æ–œä½“æŒ‰é’® */}
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span>
        <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> onItalicClick &amp;&amp; onItalicClick(range)}
        title="æ–œä½“"
        style={{
          background: isItalicActive ? "#3498db" : "#999",
          border: "none",
          color: "white",
          width: "36px",
          height: "36px",
          borderRadius: "6px",
          cursor: "pointer",
          display: "flex",
          alignItems: "center",
          justifyContent: "center",
          fontSize: "14px",
          fontStyle: "italic",
        }}
      &gt;
        I
      <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
};
</code></pre>
<h3 data-id="heading-18">ä¿®æ”¹è‡ªå®šä¹‰ Hook</h3>
<p>ä¸»è¦æœ‰ä¸¤å¤„æ”¹åŠ¨ï¼š</p>
<ol>
<li>å°è£…äº† <code>updateFormattingStates</code> å‡½æ•°ç”¨äºæ›´æ–°æ‰€æœ‰æ ¼å¼åŒ–çŠ¶æ€ï¼ŒåŒ…æ‹¬åŠ ç²—å’Œæ–œä½“ã€‚</li>
<li>å¢åŠ å¤„ç†æ–œä½“æ“ä½œã€‚</li>
</ol>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> <span class="hljs-title function_">useTextSelection</span> = (<span class="hljs-params">target</span>) =&gt; {
  <span class="hljs-keyword">const</span> [selection, setSelection] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">null</span>);
  <span class="hljs-keyword">const</span> [isBoldActive, setIsBoldActive] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">false</span>);
  <span class="hljs-keyword">const</span> [isItalicActive, setIsItalicActive] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">false</span>);
  
  <span class="hljs-comment">// æ ‡è®°ç”¨æˆ·æ˜¯å¦æ­£åœ¨ä¸å·¥å…·æ äº¤äº’</span>
  <span class="hljs-keyword">const</span> isInToolbarRef = <span class="hljs-title function_">useRef</span>(<span class="hljs-literal">false</span>);
  
  <span class="hljs-comment">// å·¥å…·æ  DOM å…ƒç´ çš„å¼•ç”¨</span>
  <span class="hljs-keyword">const</span> toolbarRef = <span class="hljs-title function_">useRef</span>(<span class="hljs-literal">null</span>);

  <span class="hljs-comment">// è·å–åŠ ç²—çŠ¶æ€</span>
  <span class="hljs-keyword">const</span> getBoldState = <span class="hljs-title function_">useCallback</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">document</span>.<span class="hljs-property">queryCommandState</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">queryCommandState</span>(<span class="hljs-string">"bold"</span>);
  }, []);

  <span class="hljs-comment">// è·å–æ–œä½“çŠ¶æ€</span>
  <span class="hljs-keyword">const</span> getItalicState = <span class="hljs-title function_">useCallback</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">document</span>.<span class="hljs-property">queryCommandState</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">queryCommandState</span>(<span class="hljs-string">"italic"</span>);
  }, []);

  <span class="hljs-comment">// æ›´æ–°æ‰€æœ‰æ ¼å¼åŒ–çŠ¶æ€</span>
  <span class="hljs-keyword">const</span> updateFormattingStates = <span class="hljs-title function_">useCallback</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-title function_">setIsBoldActive</span>(<span class="hljs-title function_">getBoldState</span>());
    <span class="hljs-title function_">setIsItalicActive</span>(<span class="hljs-title function_">getItalicState</span>());
  }, [getBoldState, getItalicState]);

  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-comment">/**
     * å¤„ç†æ–‡æœ¬é€‰æ‹©å˜åŒ–äº‹ä»¶
     */</span>
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleSelectionChange</span> = (<span class="hljs-params"/>) =&gt; {
      <span class="hljs-comment">// å¦‚æœç”¨æˆ·æ­£åœ¨ä¸å·¥å…·æ äº¤äº’ï¼Œä¸å¤„ç†é€‰æ‹©å˜åŒ–</span>
      <span class="hljs-keyword">if</span> (isInToolbarRef.<span class="hljs-property">current</span>) <span class="hljs-keyword">return</span>;

      <span class="hljs-keyword">const</span> selection = <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">getSelection</span>();
      <span class="hljs-keyword">const</span> selectedText = selection.<span class="hljs-title function_">toString</span>().<span class="hljs-title function_">trim</span>();

      <span class="hljs-comment">// ç¡®ä¿æœ‰é€‰ä¸­æ–‡æœ¬å¹¶ä¸”é€‰æ‹©èŒƒå›´æœ‰æ•ˆ</span>
      <span class="hljs-keyword">if</span> (selectedText &amp;&amp; selection.<span class="hljs-property">rangeCount</span> &gt; <span class="hljs-number">0</span>) {
        <span class="hljs-keyword">const</span> range = selection.<span class="hljs-title function_">getRangeAt</span>(<span class="hljs-number">0</span>);
        <span class="hljs-keyword">const</span> rect = range.<span class="hljs-title function_">getBoundingClientRect</span>();

        <span class="hljs-keyword">const</span> anchorNode = selection.<span class="hljs-property">anchorNode</span>;
        <span class="hljs-keyword">const</span> targetElement = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(target);
        
        <span class="hljs-comment">// æ£€æŸ¥é€‰æ‹©æ˜¯å¦å‘ç”Ÿåœ¨ç›®æ ‡ç¼–è¾‘å™¨å†…</span>
        <span class="hljs-keyword">const</span> isInTarget =
          targetElement &amp;&amp;
          (targetElement.<span class="hljs-title function_">contains</span>(anchorNode) || targetElement === anchorNode);

        <span class="hljs-keyword">if</span> (isInTarget) {
          <span class="hljs-comment">// ä¿å­˜é€‰æ‹©èŒƒå›´</span>
          <span class="hljs-comment">// æ›´æ–°é€‰æ‹©ä¿¡æ¯ï¼Œæ˜¾ç¤ºå·¥å…·æ </span>
          <span class="hljs-title function_">setSelection</span>({
            <span class="hljs-attr">clientRect</span>: rect,
            <span class="hljs-attr">selectedText</span>: selectedText,
            <span class="hljs-attr">range</span>: range,
          });

          <span class="hljs-comment">// è·å–å½“å‰æ ¼å¼åŒ–çŠ¶æ€</span>
          <span class="hljs-title function_">updateFormattingStates</span>();
        } <span class="hljs-keyword">else</span> {
          <span class="hljs-comment">// é€‰æ‹©ä¸åœ¨ç¼–è¾‘å™¨å†…ï¼Œéšè—å·¥å…·æ </span>
          <span class="hljs-title function_">setSelection</span>(<span class="hljs-literal">null</span>);
        }
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-comment">// æ²¡æœ‰é€‰ä¸­æ–‡æœ¬ï¼Œéšè—å·¥å…·æ </span>
        <span class="hljs-title function_">setSelection</span>(<span class="hljs-literal">null</span>);
      }
    };

    <span class="hljs-comment">/**
     * å¤„ç†é¼ æ ‡æŒ‰ä¸‹äº‹ä»¶
     */</span>
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleMouseDown</span> = (<span class="hljs-params">e</span>) =&gt; {
      <span class="hljs-comment">// æ£€æŸ¥ç‚¹å‡»æ˜¯å¦å‘ç”Ÿåœ¨å·¥å…·æ åŒºåŸŸå†…</span>
      <span class="hljs-keyword">if</span> (toolbarRef.<span class="hljs-property">current</span> &amp;&amp; toolbarRef.<span class="hljs-property">current</span>.<span class="hljs-title function_">contains</span>(e.<span class="hljs-property">target</span>)) {
        isInToolbarRef.<span class="hljs-property">current</span> = <span class="hljs-literal">true</span>;
      } <span class="hljs-keyword">else</span> {
        isInToolbarRef.<span class="hljs-property">current</span> = <span class="hljs-literal">false</span>;
      }
    };

    <span class="hljs-comment">/**
     * å¤„ç†é¼ æ ‡æŠ¬èµ·äº‹ä»¶
     */</span>
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleMouseUp</span> = (<span class="hljs-params"/>) =&gt; {
      <span class="hljs-comment">// å»¶è¿Ÿæ‰§è¡Œï¼Œç¡®ä¿æµè§ˆå™¨å·²å®Œæˆé€‰æ‹©æ“ä½œ</span>
      <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
        <span class="hljs-keyword">if</span> (!isInToolbarRef.<span class="hljs-property">current</span>) {
          <span class="hljs-title function_">handleSelectionChange</span>();
        }
      }, <span class="hljs-number">100</span>);
    };

    <span class="hljs-comment">/**
     * å¤„ç†ç‚¹å‡»å¤–éƒ¨äº‹ä»¶
     */</span>
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleClickOutside</span> = (<span class="hljs-params">e</span>) =&gt; {
      <span class="hljs-keyword">if</span> (toolbarRef.<span class="hljs-property">current</span> &amp;&amp; !toolbarRef.<span class="hljs-property">current</span>.<span class="hljs-title function_">contains</span>(e.<span class="hljs-property">target</span>)) {
        <span class="hljs-keyword">const</span> targetElement = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(target);
        <span class="hljs-keyword">if</span> (targetElement &amp;&amp; !targetElement.<span class="hljs-title function_">contains</span>(e.<span class="hljs-property">target</span>)) {
          <span class="hljs-title function_">setSelection</span>(<span class="hljs-literal">null</span>);
        }
      }
    };

    <span class="hljs-comment">// æ·»åŠ äº‹ä»¶ç›‘å¬å™¨</span>
    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"selectionchange"</span>, handleSelectionChange);
    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"mousedown"</span>, handleMouseDown);
    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"mouseup"</span>, handleMouseUp);
    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"mousedown"</span>, handleClickOutside);

    <span class="hljs-comment">// æ¸…ç†å‡½æ•°ï¼šç»„ä»¶å¸è½½æ—¶ç§»é™¤äº‹ä»¶ç›‘å¬å™¨</span>
    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">"selectionchange"</span>, handleSelectionChange);
      <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">"mousedown"</span>, handleMouseDown);
      <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">"mouseup"</span>, handleMouseUp);
      <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">"mousedown"</span>, handleClickOutside);
    };
  }, [target, getBoldState]);

  <span class="hljs-comment">// å¤„ç†åŠ ç²—æ“ä½œ</span>
  <span class="hljs-keyword">const</span> handleBoldClick = <span class="hljs-title function_">useCallback</span>(<span class="hljs-function">(<span class="hljs-params">range</span>) =&gt;</span> {
    <span class="hljs-keyword">if</span> (!range) <span class="hljs-keyword">return</span>;

    <span class="hljs-comment">// æ‰§è¡ŒåŠ ç²—å‘½ä»¤</span>
    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">execCommand</span>(<span class="hljs-string">"bold"</span>, <span class="hljs-literal">false</span>, <span class="hljs-literal">null</span>);

    <span class="hljs-title function_">updateFormattingStates</span>();
  }, [updateFormattingStates]);

  <span class="hljs-comment">// å¤„ç†æ–œä½“æ“ä½œ</span>
  <span class="hljs-keyword">const</span> handleItalicClick = <span class="hljs-title function_">useCallback</span>(<span class="hljs-function">(<span class="hljs-params">range</span>) =&gt;</span> {
    <span class="hljs-keyword">if</span> (!range) <span class="hljs-keyword">return</span>;

    <span class="hljs-comment">// æ‰§è¡Œæ–œä½“å‘½ä»¤</span>
    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">execCommand</span>(<span class="hljs-string">"italic"</span>, <span class="hljs-literal">false</span>, <span class="hljs-literal">null</span>);

    <span class="hljs-comment">// æ¢å¤é€‰æ‹©èŒƒå›´å¹¶æ›´æ–°çŠ¶æ€</span>
    <span class="hljs-title function_">updateFormattingStates</span>();
  }, [updateFormattingStates]);

  <span class="hljs-keyword">return</span> {
    selection,
    toolbarRef,
    isBoldActive,
    handleBoldClick,
  };
};
</code></pre>
<h2 data-id="heading-19">å®ç°ä¸‹åˆ’çº¿</h2>
<h3 data-id="heading-20">ä¿®æ”¹ä¸»ç»„ä»¶</h3>
<p>ä»è‡ªå®šä¹‰ Hook ä¸­è·å– <code>isUnderlineActive</code> å’Œ <code>handleUnderlineClick</code>ï¼Œå¹¶ä¼ ç»™æµ®åŠ¨å·¥å…·æ ç»„ä»¶ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> <span class="hljs-title function_">TextCustom</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-comment">// ä½¿ç”¨è‡ªå®šä¹‰ Hook è·å–æ–‡æœ¬é€‰æ‹©ä¿¡æ¯</span>
  <span class="hljs-keyword">const</span> { 
    selection, 
    toolbarRef, 
    isBoldActive, 
    isItalicActive,
    isUnderlineActive,
    handleBoldClick,
    handleItalicClick,
    handleUnderlineClick,
  } = <span class="hljs-title function_">useTextSelection</span>(<span class="hljs-string">"#editor"</span>);

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      {/* å¯ç¼–è¾‘çš„æ–‡æœ¬åŒºåŸŸ */}
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span>
        <span class="hljs-attr">id</span>=<span class="hljs-string">"editor"</span>
        <span class="hljs-attr">contentEditable</span>=<span class="hljs-string">{true}</span>
        <span class="hljs-attr">suppressContentEditableWarning</span>=<span class="hljs-string">{true}</span>
      /&gt;</span>

      {/* æµ®åŠ¨å·¥å…·æ ç»„ä»¶ */}
      <span class="hljs-tag">&lt;<span class="hljs-name">FloatingToolbar</span>
        <span class="hljs-attr">selection</span>=<span class="hljs-string">{selection}</span>
        <span class="hljs-attr">toolbarRef</span>=<span class="hljs-string">{toolbarRef}</span>
        <span class="hljs-attr">onBoldClick</span>=<span class="hljs-string">{handleBoldClick}</span>
        <span class="hljs-attr">onItalicClick</span>=<span class="hljs-string">{handleItalicClick}</span>
        <span class="hljs-attr">onUnderlineClick</span>=<span class="hljs-string">{handleUnderlineClick}</span>
        <span class="hljs-attr">isBoldActive</span>=<span class="hljs-string">{isBoldActive}</span>
        <span class="hljs-attr">isItalicActive</span>=<span class="hljs-string">{isItalicActive}</span>
        <span class="hljs-attr">isUnderlineActive</span>=<span class="hljs-string">{isUnderlineActive}</span>
      /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
};
</code></pre>
<h3 data-id="heading-21">ä¿®æ”¹æµ®åŠ¨å·¥å…·æ </h3>
<p>å¢åŠ ä¸‹åˆ’çº¿æŒ‰é’®ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> <span class="hljs-title function_">FloatingToolbar</span> = (<span class="hljs-params">{
  selection,
  toolbarRef,
  onBoldClick,
  onItalicClick,
  onUnderlineClick,
  isBoldActive = <span class="hljs-literal">false</span>,
  isItalicActive = <span class="hljs-literal">false</span>,
  isUnderlineActive = <span class="hljs-literal">false</span>,
}</span>) =&gt; {
  <span class="hljs-comment">// å¦‚æœæ²¡æœ‰é€‰æ‹©ä¿¡æ¯ï¼Œä¸æ¸²æŸ“å·¥å…·æ </span>
  <span class="hljs-keyword">if</span> (!selection) <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;

  <span class="hljs-keyword">const</span> { clientRect, selectedText, range } = selection;
  
  <span class="hljs-comment">// å¦‚æœæ²¡æœ‰é€‰ä¸­æ–‡æœ¬æˆ–ä½ç½®ä¿¡æ¯ï¼Œä¸æ¸²æŸ“å·¥å…·æ </span>
  <span class="hljs-keyword">if</span> (!selectedText || !clientRect || !range) <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>
      <span class="hljs-attr">ref</span>=<span class="hljs-string">{toolbarRef}</span>
      <span class="hljs-attr">className</span>=<span class="hljs-string">"floating-toolbar"</span>
      <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span>
        <span class="hljs-attr">position:</span> "<span class="hljs-attr">fixed</span>",
        <span class="hljs-attr">top:</span> <span class="hljs-attr">clientRect.top</span> <span class="hljs-attr">-</span> <span class="hljs-attr">65</span>,
        <span class="hljs-attr">left:</span> <span class="hljs-attr">clientRect.left</span> + <span class="hljs-attr">clientRect.width</span> / <span class="hljs-attr">2</span>,
        <span class="hljs-attr">transform:</span> "<span class="hljs-attr">translateX</span>(<span class="hljs-attr">-10</span>%)",
        <span class="hljs-attr">background:</span> "#<span class="hljs-attr">fff</span>",
        <span class="hljs-attr">zIndex:</span> <span class="hljs-attr">10000</span>,
        <span class="hljs-attr">minWidth:</span> "<span class="hljs-attr">180px</span>",
      }}
    &gt;</span>
      {/* æ˜¾ç¤ºé€‰ä¸­æ–‡æœ¬çš„å­—ç¬¦æ•°é‡ */}
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">fontSize:</span> "<span class="hljs-attr">12px</span>", <span class="hljs-attr">fontWeight:</span> "<span class="hljs-attr">bold</span>" }}&gt;</span>
        ğŸ“ {selectedText.length} å­—
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

      {/* åŠ ç²—æŒ‰é’® */}
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span>
        <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> onBoldClick &amp;&amp; onBoldClick(range)}
        title="åŠ ç²—"
        style={{
          background: isBoldActive ? "#3498db" : "#999",
          border: "none",
          color: "white",
          width: "36px",
          height: "36px",
          borderRadius: "6px",
          cursor: "pointer",
          display: "flex",
          alignItems: "center",
          justifyContent: "center",
          fontSize: "14px",
        }}
      &gt;
        <span class="hljs-tag">&lt;<span class="hljs-name">strong</span>&gt;</span>B<span class="hljs-tag">&lt;/<span class="hljs-name">strong</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>

      {/* æ–œä½“æŒ‰é’® */}
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span>
        <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> onItalicClick &amp;&amp; onItalicClick(range)}
        title="æ–œä½“"
        style={{
          background: isItalicActive ? "#3498db" : "#999",
          border: "none",
          color: "white",
          width: "36px",
          height: "36px",
          borderRadius: "6px",
          cursor: "pointer",
          display: "flex",
          alignItems: "center",
          justifyContent: "center",
          fontSize: "14px",
          fontStyle: "italic",
        }}
      &gt;
        I
      <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>

      {/* ä¸‹åˆ’çº¿æŒ‰é’® */}
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span>
        <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> onUnderlineClick &amp;&amp; onUnderlineClick(range)}
        title="ä¸‹åˆ’çº¿"
        style={{
          background: isUnderlineActive ? "#3498db" : "#999",
          border: "none",
          color: "white",
          width: "36px",
          height: "36px",
          borderRadius: "6px",
          cursor: "pointer",
          display: "flex",
          alignItems: "center",
          justifyContent: "center",
          fontSize: "14px",
          textDecoration: "underline",
        }}
      &gt;
        U
      <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
};
</code></pre>
<h3 data-id="heading-22">ä¿®æ”¹è‡ªå®šä¹‰ Hook</h3>
<p>ä¸»è¦æœ‰ä¸¤å¤„æ”¹åŠ¨ï¼š</p>
<ol>
<li>å¢åŠ è·å–ä¸‹åˆ’çº¿çŠ¶æ€</li>
<li>å¢åŠ å¤„ç†ä¸‹åˆ’çº¿æ“ä½œ</li>
</ol>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> <span class="hljs-title function_">useTextSelection</span> = (<span class="hljs-params">target</span>) =&gt; {
  <span class="hljs-keyword">const</span> [selection, setSelection] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">null</span>);
  <span class="hljs-keyword">const</span> [isBoldActive, setIsBoldActive] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">false</span>);
  <span class="hljs-keyword">const</span> [isItalicActive, setIsItalicActive] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">false</span>);
  <span class="hljs-keyword">const</span> [isUnderlineActive, setIsUnderlineActive] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">false</span>);
  
  <span class="hljs-comment">// æ ‡è®°ç”¨æˆ·æ˜¯å¦æ­£åœ¨ä¸å·¥å…·æ äº¤äº’</span>
  <span class="hljs-keyword">const</span> isInToolbarRef = <span class="hljs-title function_">useRef</span>(<span class="hljs-literal">false</span>);
  
  <span class="hljs-comment">// å·¥å…·æ  DOM å…ƒç´ çš„å¼•ç”¨</span>
  <span class="hljs-keyword">const</span> toolbarRef = <span class="hljs-title function_">useRef</span>(<span class="hljs-literal">null</span>);

  <span class="hljs-comment">// è·å–åŠ ç²—çŠ¶æ€</span>
  <span class="hljs-keyword">const</span> getBoldState = <span class="hljs-title function_">useCallback</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">document</span>.<span class="hljs-property">queryCommandState</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">queryCommandState</span>(<span class="hljs-string">"bold"</span>);
  }, []);

  <span class="hljs-comment">// è·å–æ–œä½“çŠ¶æ€</span>
  <span class="hljs-keyword">const</span> getItalicState = <span class="hljs-title function_">useCallback</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">document</span>.<span class="hljs-property">queryCommandState</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">queryCommandState</span>(<span class="hljs-string">"italic"</span>);
  }, []);

  <span class="hljs-comment">// è·å–ä¸‹åˆ’çº¿çŠ¶æ€</span>
  <span class="hljs-keyword">const</span> getUnderlineState = <span class="hljs-title function_">useCallback</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">document</span>.<span class="hljs-property">queryCommandState</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">queryCommandState</span>(<span class="hljs-string">"underline"</span>);
  }, []);

  <span class="hljs-comment">// æ›´æ–°æ‰€æœ‰æ ¼å¼åŒ–çŠ¶æ€</span>
  <span class="hljs-keyword">const</span> updateFormattingStates = <span class="hljs-title function_">useCallback</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-title function_">setIsBoldActive</span>(<span class="hljs-title function_">getBoldState</span>());
    <span class="hljs-title function_">setIsItalicActive</span>(<span class="hljs-title function_">getItalicState</span>());
    <span class="hljs-title function_">setIsUnderlineActive</span>(<span class="hljs-title function_">getUnderlineState</span>());
  }, [getBoldState, getItalicState, getUnderlineState]);

  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-comment">/**
     * å¤„ç†æ–‡æœ¬é€‰æ‹©å˜åŒ–äº‹ä»¶
     */</span>
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleSelectionChange</span> = (<span class="hljs-params"/>) =&gt; {
      <span class="hljs-comment">// å¦‚æœç”¨æˆ·æ­£åœ¨ä¸å·¥å…·æ äº¤äº’ï¼Œä¸å¤„ç†é€‰æ‹©å˜åŒ–</span>
      <span class="hljs-keyword">if</span> (isInToolbarRef.<span class="hljs-property">current</span>) <span class="hljs-keyword">return</span>;

      <span class="hljs-keyword">const</span> selection = <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">getSelection</span>();
      <span class="hljs-keyword">const</span> selectedText = selection.<span class="hljs-title function_">toString</span>().<span class="hljs-title function_">trim</span>();

      <span class="hljs-comment">// ç¡®ä¿æœ‰é€‰ä¸­æ–‡æœ¬å¹¶ä¸”é€‰æ‹©èŒƒå›´æœ‰æ•ˆ</span>
      <span class="hljs-keyword">if</span> (selectedText &amp;&amp; selection.<span class="hljs-property">rangeCount</span> &gt; <span class="hljs-number">0</span>) {
        <span class="hljs-keyword">const</span> range = selection.<span class="hljs-title function_">getRangeAt</span>(<span class="hljs-number">0</span>);
        <span class="hljs-keyword">const</span> rect = range.<span class="hljs-title function_">getBoundingClientRect</span>();

        <span class="hljs-keyword">const</span> anchorNode = selection.<span class="hljs-property">anchorNode</span>;
        <span class="hljs-keyword">const</span> targetElement = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(target);
        
        <span class="hljs-comment">// æ£€æŸ¥é€‰æ‹©æ˜¯å¦å‘ç”Ÿåœ¨ç›®æ ‡ç¼–è¾‘å™¨å†…</span>
        <span class="hljs-keyword">const</span> isInTarget =
          targetElement &amp;&amp;
          (targetElement.<span class="hljs-title function_">contains</span>(anchorNode) || targetElement === anchorNode);

        <span class="hljs-keyword">if</span> (isInTarget) {
          <span class="hljs-comment">// ä¿å­˜é€‰æ‹©èŒƒå›´</span>
          <span class="hljs-comment">// æ›´æ–°é€‰æ‹©ä¿¡æ¯ï¼Œæ˜¾ç¤ºå·¥å…·æ </span>
          <span class="hljs-title function_">setSelection</span>({
            <span class="hljs-attr">clientRect</span>: rect,
            <span class="hljs-attr">selectedText</span>: selectedText,
            <span class="hljs-attr">range</span>: range,
          });

          <span class="hljs-comment">// è·å–å½“å‰æ ¼å¼åŒ–çŠ¶æ€</span>
          <span class="hljs-title function_">updateFormattingStates</span>();
        } <span class="hljs-keyword">else</span> {
          <span class="hljs-comment">// é€‰æ‹©ä¸åœ¨ç¼–è¾‘å™¨å†…ï¼Œéšè—å·¥å…·æ </span>
          <span class="hljs-title function_">setSelection</span>(<span class="hljs-literal">null</span>);
        }
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-comment">// æ²¡æœ‰é€‰ä¸­æ–‡æœ¬ï¼Œéšè—å·¥å…·æ </span>
        <span class="hljs-title function_">setSelection</span>(<span class="hljs-literal">null</span>);
      }
    };

    <span class="hljs-comment">/**
     * å¤„ç†é¼ æ ‡æŒ‰ä¸‹äº‹ä»¶
     */</span>
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleMouseDown</span> = (<span class="hljs-params">e</span>) =&gt; {
      <span class="hljs-comment">// æ£€æŸ¥ç‚¹å‡»æ˜¯å¦å‘ç”Ÿåœ¨å·¥å…·æ åŒºåŸŸå†…</span>
      <span class="hljs-keyword">if</span> (toolbarRef.<span class="hljs-property">current</span> &amp;&amp; toolbarRef.<span class="hljs-property">current</span>.<span class="hljs-title function_">contains</span>(e.<span class="hljs-property">target</span>)) {
        isInToolbarRef.<span class="hljs-property">current</span> = <span class="hljs-literal">true</span>;
      } <span class="hljs-keyword">else</span> {
        isInToolbarRef.<span class="hljs-property">current</span> = <span class="hljs-literal">false</span>;
      }
    };

    <span class="hljs-comment">/**
     * å¤„ç†é¼ æ ‡æŠ¬èµ·äº‹ä»¶
     */</span>
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleMouseUp</span> = (<span class="hljs-params"/>) =&gt; {
      <span class="hljs-comment">// å»¶è¿Ÿæ‰§è¡Œï¼Œç¡®ä¿æµè§ˆå™¨å·²å®Œæˆé€‰æ‹©æ“ä½œ</span>
      <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
        <span class="hljs-keyword">if</span> (!isInToolbarRef.<span class="hljs-property">current</span>) {
          <span class="hljs-title function_">handleSelectionChange</span>();
        }
      }, <span class="hljs-number">100</span>);
    };

    <span class="hljs-comment">/**
     * å¤„ç†ç‚¹å‡»å¤–éƒ¨äº‹ä»¶
     */</span>
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleClickOutside</span> = (<span class="hljs-params">e</span>) =&gt; {
      <span class="hljs-keyword">if</span> (toolbarRef.<span class="hljs-property">current</span> &amp;&amp; !toolbarRef.<span class="hljs-property">current</span>.<span class="hljs-title function_">contains</span>(e.<span class="hljs-property">target</span>)) {
        <span class="hljs-keyword">const</span> targetElement = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(target);
        <span class="hljs-keyword">if</span> (targetElement &amp;&amp; !targetElement.<span class="hljs-title function_">contains</span>(e.<span class="hljs-property">target</span>)) {
          <span class="hljs-title function_">setSelection</span>(<span class="hljs-literal">null</span>);
        }
      }
    };

    <span class="hljs-comment">// æ·»åŠ äº‹ä»¶ç›‘å¬å™¨</span>
    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"selectionchange"</span>, handleSelectionChange);
    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"mousedown"</span>, handleMouseDown);
    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"mouseup"</span>, handleMouseUp);
    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"mousedown"</span>, handleClickOutside);

    <span class="hljs-comment">// æ¸…ç†å‡½æ•°ï¼šç»„ä»¶å¸è½½æ—¶ç§»é™¤äº‹ä»¶ç›‘å¬å™¨</span>
    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">"selectionchange"</span>, handleSelectionChange);
      <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">"mousedown"</span>, handleMouseDown);
      <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">"mouseup"</span>, handleMouseUp);
      <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">"mousedown"</span>, handleClickOutside);
    };
  }, [target, getBoldState]);

  <span class="hljs-comment">// å¤„ç†åŠ ç²—æ“ä½œ</span>
  <span class="hljs-keyword">const</span> handleBoldClick = <span class="hljs-title function_">useCallback</span>(<span class="hljs-function">(<span class="hljs-params">range</span>) =&gt;</span> {
    <span class="hljs-keyword">if</span> (!range) <span class="hljs-keyword">return</span>;

    <span class="hljs-comment">// æ‰§è¡ŒåŠ ç²—å‘½ä»¤</span>
    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">execCommand</span>(<span class="hljs-string">"bold"</span>, <span class="hljs-literal">false</span>, <span class="hljs-literal">null</span>);

    <span class="hljs-title function_">updateFormattingStates</span>();
  }, [updateFormattingStates]);

  <span class="hljs-comment">// å¤„ç†æ–œä½“æ“ä½œ</span>
  <span class="hljs-keyword">const</span> handleItalicClick = <span class="hljs-title function_">useCallback</span>(<span class="hljs-function">(<span class="hljs-params">range</span>) =&gt;</span> {
    <span class="hljs-keyword">if</span> (!range) <span class="hljs-keyword">return</span>;

    <span class="hljs-comment">// æ‰§è¡Œæ–œä½“å‘½ä»¤</span>
    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">execCommand</span>(<span class="hljs-string">"italic"</span>, <span class="hljs-literal">false</span>, <span class="hljs-literal">null</span>);

    <span class="hljs-comment">// æ¢å¤é€‰æ‹©èŒƒå›´å¹¶æ›´æ–°çŠ¶æ€</span>
    <span class="hljs-title function_">updateFormattingStates</span>();
  }, [updateFormattingStates]);

  <span class="hljs-comment">// å¤„ç†ä¸‹åˆ’çº¿æ“ä½œ</span>
  <span class="hljs-keyword">const</span> handleUnderlineClick = <span class="hljs-title function_">useCallback</span>(<span class="hljs-function">(<span class="hljs-params">range</span>) =&gt;</span> {
    <span class="hljs-keyword">if</span> (!range) <span class="hljs-keyword">return</span>;

    <span class="hljs-comment">// æ‰§è¡Œä¸‹åˆ’çº¿å‘½ä»¤</span>
    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">execCommand</span>(<span class="hljs-string">"underline"</span>, <span class="hljs-literal">false</span>, <span class="hljs-literal">null</span>);

    <span class="hljs-comment">// æ›´æ–°çŠ¶æ€</span>
    <span class="hljs-title function_">updateFormattingStates</span>();
  }, [updateFormattingStates]);

  <span class="hljs-keyword">return</span> {
    selection,
    toolbarRef,
    isBoldActive,
    handleBoldClick,
  };
};
</code></pre>
<h2 data-id="heading-23">å®ç°å­—å·</h2>
<h3 data-id="heading-24">ä¿®æ”¹ä¸»ç»„ä»¶</h3>
<p>ä»è‡ªå®šä¹‰ Hook ä¸­è·å– <code>fontSize</code> å’Œ <code>handleFontSizeChange</code>ï¼Œå¹¶ä¼ ç»™æµ®åŠ¨å·¥å…·æ ç»„ä»¶ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> <span class="hljs-title function_">TextCustom</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-comment">// ä½¿ç”¨è‡ªå®šä¹‰ Hook è·å–æ–‡æœ¬é€‰æ‹©ä¿¡æ¯</span>
  <span class="hljs-keyword">const</span> { 
    selection, 
    toolbarRef, 
    isBoldActive, 
    isItalicActive,
    isUnderlineActive,
    fontSize,
    handleBoldClick,
    handleItalicClick,
    handleUnderlineClick,
    handleFontSizeChange,
  } = <span class="hljs-title function_">useTextSelection</span>(<span class="hljs-string">"#editor"</span>);

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      {/* å¯ç¼–è¾‘çš„æ–‡æœ¬åŒºåŸŸ */}
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span>
        <span class="hljs-attr">id</span>=<span class="hljs-string">"editor"</span>
        <span class="hljs-attr">contentEditable</span>=<span class="hljs-string">{true}</span>
        <span class="hljs-attr">suppressContentEditableWarning</span>=<span class="hljs-string">{true}</span>
      /&gt;</span>

      {/* æµ®åŠ¨å·¥å…·æ ç»„ä»¶ */}
      <span class="hljs-tag">&lt;<span class="hljs-name">FloatingToolbar</span>
        <span class="hljs-attr">selection</span>=<span class="hljs-string">{selection}</span>
        <span class="hljs-attr">toolbarRef</span>=<span class="hljs-string">{toolbarRef}</span>
        <span class="hljs-attr">onBoldClick</span>=<span class="hljs-string">{handleBoldClick}</span>
        <span class="hljs-attr">onItalicClick</span>=<span class="hljs-string">{handleItalicClick}</span>
        <span class="hljs-attr">onUnderlineClick</span>=<span class="hljs-string">{handleUnderlineClick}</span>
        <span class="hljs-attr">onFontSizeChange</span>=<span class="hljs-string">{handleFontSizeChange}</span>
        <span class="hljs-attr">isBoldActive</span>=<span class="hljs-string">{isBoldActive}</span>
        <span class="hljs-attr">isItalicActive</span>=<span class="hljs-string">{isItalicActive}</span>
        <span class="hljs-attr">isUnderlineActive</span>=<span class="hljs-string">{isUnderlineActive}</span>
        <span class="hljs-attr">fontSize</span>=<span class="hljs-string">{fontSize}</span>
      /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
};
</code></pre>
<h3 data-id="heading-25">ä¿®æ”¹æµ®åŠ¨å·¥å…·æ </h3>
<p>ä¸»è¦å¢åŠ å­—å·é€‰æ‹©å™¨ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> <span class="hljs-title function_">FloatingToolbar</span> = (<span class="hljs-params">{
  selection,
  toolbarRef,
  onBoldClick,
  onItalicClick,
  onUnderlineClick,
  onFontSizeChange,
  isBoldActive = <span class="hljs-literal">false</span>,
  isItalicActive = <span class="hljs-literal">false</span>,
  isUnderlineActive = <span class="hljs-literal">false</span>,
  fontSize = <span class="hljs-string">"3"</span>,
}</span>) =&gt; {
  <span class="hljs-comment">// å¦‚æœæ²¡æœ‰é€‰æ‹©ä¿¡æ¯ï¼Œä¸æ¸²æŸ“å·¥å…·æ </span>
  <span class="hljs-keyword">if</span> (!selection) <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;

  <span class="hljs-keyword">const</span> { clientRect, selectedText, range } = selection;
  
  <span class="hljs-comment">// å¦‚æœæ²¡æœ‰é€‰ä¸­æ–‡æœ¬æˆ–ä½ç½®ä¿¡æ¯ï¼Œä¸æ¸²æŸ“å·¥å…·æ </span>
  <span class="hljs-keyword">if</span> (!selectedText || !clientRect || !range) <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>
      <span class="hljs-attr">ref</span>=<span class="hljs-string">{toolbarRef}</span>
      <span class="hljs-attr">className</span>=<span class="hljs-string">"floating-toolbar"</span>
      <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span>
        <span class="hljs-attr">position:</span> "<span class="hljs-attr">fixed</span>",
        <span class="hljs-attr">top:</span> <span class="hljs-attr">clientRect.top</span> <span class="hljs-attr">-</span> <span class="hljs-attr">65</span>,
        <span class="hljs-attr">left:</span> <span class="hljs-attr">clientRect.left</span> + <span class="hljs-attr">clientRect.width</span> / <span class="hljs-attr">2</span>,
        <span class="hljs-attr">transform:</span> "<span class="hljs-attr">translateX</span>(<span class="hljs-attr">-10</span>%)",
        <span class="hljs-attr">background:</span> "#<span class="hljs-attr">fff</span>",
        <span class="hljs-attr">zIndex:</span> <span class="hljs-attr">10000</span>,
        <span class="hljs-attr">minWidth:</span> "<span class="hljs-attr">180px</span>",
      }}
    &gt;</span>
      {/* æ˜¾ç¤ºé€‰ä¸­æ–‡æœ¬çš„å­—ç¬¦æ•°é‡ */}
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">fontSize:</span> "<span class="hljs-attr">12px</span>", <span class="hljs-attr">fontWeight:</span> "<span class="hljs-attr">bold</span>" }}&gt;</span>
        ğŸ“ {selectedText.length} å­—
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

      {/* åŠ ç²—æŒ‰é’® */}
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span>
        <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> onBoldClick &amp;&amp; onBoldClick(range)}
        title="åŠ ç²—"
        style={{
          background: isBoldActive ? "#3498db" : "#999",
          border: "none",
          color: "white",
          width: "36px",
          height: "36px",
          borderRadius: "6px",
          cursor: "pointer",
          display: "flex",
          alignItems: "center",
          justifyContent: "center",
          fontSize: "14px",
        }}
      &gt;
        <span class="hljs-tag">&lt;<span class="hljs-name">strong</span>&gt;</span>B<span class="hljs-tag">&lt;/<span class="hljs-name">strong</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>

      {/* æ–œä½“æŒ‰é’® */}
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span>
        <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> onItalicClick &amp;&amp; onItalicClick(range)}
        title="æ–œä½“"
        style={{
          background: isItalicActive ? "#3498db" : "#999",
          border: "none",
          color: "white",
          width: "36px",
          height: "36px",
          borderRadius: "6px",
          cursor: "pointer",
          display: "flex",
          alignItems: "center",
          justifyContent: "center",
          fontSize: "14px",
          fontStyle: "italic",
        }}
      &gt;
        I
      <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>

      {/* ä¸‹åˆ’çº¿æŒ‰é’® */}
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span>
        <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> onUnderlineClick &amp;&amp; onUnderlineClick(range)}
        title="ä¸‹åˆ’çº¿"
        style={{
          background: isUnderlineActive ? "#3498db" : "#999",
          border: "none",
          color: "white",
          width: "36px",
          height: "36px",
          borderRadius: "6px",
          cursor: "pointer",
          display: "flex",
          alignItems: "center",
          justifyContent: "center",
          fontSize: "14px",
          textDecoration: "underline",
        }}
      &gt;
        U
      <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>

      {/* å­—å·é€‰æ‹©å™¨ */}
      <span class="hljs-tag">&lt;<span class="hljs-name">select</span>
        <span class="hljs-attr">value</span>=<span class="hljs-string">{fontSize}</span>
        <span class="hljs-attr">onChange</span>=<span class="hljs-string">{(e)</span> =&gt;</span> onFontSizeChange &amp;&amp; onFontSizeChange(e.target.value, range)}
        onMouseDown={(e) =&gt; e.stopPropagation()}
        onClick={(e) =&gt; e.stopPropagation()}
        style={{
          background: "#999",
          color: "white",
          border: "1px solid #999",
          borderRadius: "4px",
          padding: "6px 10px",
          cursor: "pointer",
          fontSize: "12px",
          width: "90px",
          appearance: "auto",
        }}
      &gt;
        <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"1"</span>&gt;</span>12px<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"2"</span>&gt;</span>14px<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"3"</span>&gt;</span>16px<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"4"</span>&gt;</span>18px<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"5"</span>&gt;</span>24px<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"6"</span>&gt;</span>32px<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"7"</span>&gt;</span>48px<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span>

      {/* é¢œè‰²é€‰æ‹©å™¨ */}
      <span class="hljs-tag">&lt;<span class="hljs-name">input</span>
        <span class="hljs-attr">type</span>=<span class="hljs-string">"color"</span>
        <span class="hljs-attr">value</span>=<span class="hljs-string">{color}</span>
        <span class="hljs-attr">onChange</span>=<span class="hljs-string">{(e)</span> =&gt;</span> onColorChange &amp;&amp; onColorChange(e.target.value, range)}
        title="æ–‡å­—é¢œè‰²"
        style={{
          width: "36px",
          height: "36px",
          border: "2px solid #4a627a",
          borderRadius: "6px",
          cursor: "pointer",
          padding: "0",
          backgroundColor: color || "#ffffff",
        }}
        onMouseDown={(e) =&gt; e.stopPropagation()}
        onClick={(e) =&gt; e.stopPropagation()}
      /&gt;
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
};
</code></pre>
<h3 data-id="heading-26">ä¿®æ”¹è‡ªå®šä¹‰ Hook</h3>
<p>å­—å·å’Œåé¢çš„é¢œè‰²éƒ½æ˜¯é€šè¿‡å¢åŠ åµŒå¥— <code>span</code> æ ‡ç­¾å®ç°çš„ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> <span class="hljs-title function_">useTextSelection</span> = (<span class="hljs-params">target</span>) =&gt; {
  <span class="hljs-keyword">const</span> [selection, setSelection] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">null</span>);
  <span class="hljs-keyword">const</span> [isBoldActive, setIsBoldActive] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">false</span>);
  <span class="hljs-keyword">const</span> [isItalicActive, setIsItalicActive] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">false</span>);
  <span class="hljs-keyword">const</span> [isUnderlineActive, setIsUnderlineActive] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">false</span>);
  <span class="hljs-keyword">const</span> [fontSize, setFontSize] = <span class="hljs-title function_">useState</span>(<span class="hljs-string">"3"</span>);
  
  <span class="hljs-comment">// æ ‡è®°ç”¨æˆ·æ˜¯å¦æ­£åœ¨ä¸å·¥å…·æ äº¤äº’</span>
  <span class="hljs-keyword">const</span> isInToolbarRef = <span class="hljs-title function_">useRef</span>(<span class="hljs-literal">false</span>);
  
  <span class="hljs-comment">// å·¥å…·æ  DOM å…ƒç´ çš„å¼•ç”¨</span>
  <span class="hljs-keyword">const</span> toolbarRef = <span class="hljs-title function_">useRef</span>(<span class="hljs-literal">null</span>);

  <span class="hljs-comment">// è·å–åŠ ç²—çŠ¶æ€</span>
  <span class="hljs-keyword">const</span> getBoldState = <span class="hljs-title function_">useCallback</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">document</span>.<span class="hljs-property">queryCommandState</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">queryCommandState</span>(<span class="hljs-string">"bold"</span>);
  }, []);

  <span class="hljs-comment">// è·å–æ–œä½“çŠ¶æ€</span>
  <span class="hljs-keyword">const</span> getItalicState = <span class="hljs-title function_">useCallback</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">document</span>.<span class="hljs-property">queryCommandState</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">queryCommandState</span>(<span class="hljs-string">"italic"</span>);
  }, []);

  <span class="hljs-comment">// è·å–ä¸‹åˆ’çº¿çŠ¶æ€</span>
  <span class="hljs-keyword">const</span> getUnderlineState = <span class="hljs-title function_">useCallback</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">document</span>.<span class="hljs-property">queryCommandState</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">queryCommandState</span>(<span class="hljs-string">"underline"</span>);
  }, []);

  <span class="hljs-comment">// è·å–å½“å‰é€‰æ‹©çš„å­—å·</span>
  <span class="hljs-keyword">const</span> getFontSizeState = <span class="hljs-title function_">useCallback</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> selection = <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">getSelection</span>();
    <span class="hljs-keyword">if</span> (!selection.<span class="hljs-property">rangeCount</span>) <span class="hljs-keyword">return</span> <span class="hljs-string">"3"</span>;

    <span class="hljs-keyword">const</span> range = selection.<span class="hljs-title function_">getRangeAt</span>(<span class="hljs-number">0</span>);

    <span class="hljs-keyword">let</span> element = range.<span class="hljs-property">startContainer</span>;
    <span class="hljs-keyword">if</span> (element.<span class="hljs-property">nodeType</span> !== <span class="hljs-title class_">Node</span>.<span class="hljs-property">ELEMENT_NODE</span>) {
      element = element.<span class="hljs-property">parentElement</span>;
    }

    <span class="hljs-comment">// éå†çˆ¶å…ƒç´ æŸ¥æ‰¾å­—ä½“å¤§å°</span>
    <span class="hljs-keyword">while</span> (element &amp;&amp; element !== <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(target)) {
      <span class="hljs-keyword">if</span> (element.<span class="hljs-property">nodeType</span> === <span class="hljs-title class_">Node</span>.<span class="hljs-property">ELEMENT_NODE</span>) {
        <span class="hljs-keyword">const</span> computedStyle = <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">getComputedStyle</span>(element);
        <span class="hljs-keyword">const</span> computedFontSize = computedStyle.<span class="hljs-property">fontSize</span>;

        <span class="hljs-keyword">if</span> (computedFontSize) {
          <span class="hljs-keyword">const</span> sizeInPx = <span class="hljs-built_in">parseInt</span>(computedFontSize);
          <span class="hljs-keyword">if</span> (sizeInPx &gt;= <span class="hljs-number">42</span>) <span class="hljs-keyword">return</span> <span class="hljs-string">"7"</span>;
          <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (sizeInPx &gt;= <span class="hljs-number">28</span>) <span class="hljs-keyword">return</span> <span class="hljs-string">"6"</span>;
          <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (sizeInPx &gt;= <span class="hljs-number">22</span>) <span class="hljs-keyword">return</span> <span class="hljs-string">"5"</span>;
          <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (sizeInPx &gt;= <span class="hljs-number">17</span>) <span class="hljs-keyword">return</span> <span class="hljs-string">"4"</span>;
          <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (sizeInPx &gt;= <span class="hljs-number">15</span>) <span class="hljs-keyword">return</span> <span class="hljs-string">"3"</span>;
          <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (sizeInPx &gt;= <span class="hljs-number">13</span>) <span class="hljs-keyword">return</span> <span class="hljs-string">"2"</span>;
          <span class="hljs-keyword">else</span> <span class="hljs-keyword">return</span> <span class="hljs-string">"1"</span>;
        }
      }
      element = element.<span class="hljs-property">parentElement</span>;
    }

    <span class="hljs-keyword">return</span> <span class="hljs-string">"3"</span>;
  }, [target]);

  <span class="hljs-comment">// æ›´æ–°æ‰€æœ‰æ ¼å¼åŒ–çŠ¶æ€</span>
  <span class="hljs-keyword">const</span> updateFormattingStates = <span class="hljs-title function_">useCallback</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-title function_">setIsBoldActive</span>(<span class="hljs-title function_">getBoldState</span>());
    <span class="hljs-title function_">setIsItalicActive</span>(<span class="hljs-title function_">getItalicState</span>());
    <span class="hljs-title function_">setIsUnderlineActive</span>(<span class="hljs-title function_">getUnderlineState</span>());
    <span class="hljs-title function_">setFontSize</span>(<span class="hljs-title function_">getFontSizeState</span>());
  }, [getBoldState, getItalicState, getUnderlineState, getFontSizeState]);

  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-comment">/**
     * å¤„ç†æ–‡æœ¬é€‰æ‹©å˜åŒ–äº‹ä»¶
     */</span>
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleSelectionChange</span> = (<span class="hljs-params"/>) =&gt; {
      <span class="hljs-comment">// å¦‚æœç”¨æˆ·æ­£åœ¨ä¸å·¥å…·æ äº¤äº’ï¼Œä¸å¤„ç†é€‰æ‹©å˜åŒ–</span>
      <span class="hljs-keyword">if</span> (isInToolbarRef.<span class="hljs-property">current</span>) <span class="hljs-keyword">return</span>;

      <span class="hljs-keyword">const</span> selection = <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">getSelection</span>();
      <span class="hljs-keyword">const</span> selectedText = selection.<span class="hljs-title function_">toString</span>().<span class="hljs-title function_">trim</span>();

      <span class="hljs-comment">// ç¡®ä¿æœ‰é€‰ä¸­æ–‡æœ¬å¹¶ä¸”é€‰æ‹©èŒƒå›´æœ‰æ•ˆ</span>
      <span class="hljs-keyword">if</span> (selectedText &amp;&amp; selection.<span class="hljs-property">rangeCount</span> &gt; <span class="hljs-number">0</span>) {
        <span class="hljs-keyword">const</span> range = selection.<span class="hljs-title function_">getRangeAt</span>(<span class="hljs-number">0</span>);
        <span class="hljs-keyword">const</span> rect = range.<span class="hljs-title function_">getBoundingClientRect</span>();

        <span class="hljs-keyword">const</span> anchorNode = selection.<span class="hljs-property">anchorNode</span>;
        <span class="hljs-keyword">const</span> targetElement = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(target);
        
        <span class="hljs-comment">// æ£€æŸ¥é€‰æ‹©æ˜¯å¦å‘ç”Ÿåœ¨ç›®æ ‡ç¼–è¾‘å™¨å†…</span>
        <span class="hljs-keyword">const</span> isInTarget =
          targetElement &amp;&amp;
          (targetElement.<span class="hljs-title function_">contains</span>(anchorNode) || targetElement === anchorNode);

        <span class="hljs-keyword">if</span> (isInTarget) {
          <span class="hljs-comment">// ä¿å­˜é€‰æ‹©èŒƒå›´</span>
          <span class="hljs-comment">// æ›´æ–°é€‰æ‹©ä¿¡æ¯ï¼Œæ˜¾ç¤ºå·¥å…·æ </span>
          <span class="hljs-title function_">setSelection</span>({
            <span class="hljs-attr">clientRect</span>: rect,
            <span class="hljs-attr">selectedText</span>: selectedText,
            <span class="hljs-attr">range</span>: range,
          });

          <span class="hljs-comment">// è·å–å½“å‰æ ¼å¼åŒ–çŠ¶æ€</span>
          <span class="hljs-title function_">updateFormattingStates</span>();
        } <span class="hljs-keyword">else</span> {
          <span class="hljs-comment">// é€‰æ‹©ä¸åœ¨ç¼–è¾‘å™¨å†…ï¼Œéšè—å·¥å…·æ </span>
          <span class="hljs-title function_">setSelection</span>(<span class="hljs-literal">null</span>);
        }
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-comment">// æ²¡æœ‰é€‰ä¸­æ–‡æœ¬ï¼Œéšè—å·¥å…·æ </span>
        <span class="hljs-title function_">setSelection</span>(<span class="hljs-literal">null</span>);
      }
    };

    <span class="hljs-comment">/**
     * å¤„ç†é¼ æ ‡æŒ‰ä¸‹äº‹ä»¶
     */</span>
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleMouseDown</span> = (<span class="hljs-params">e</span>) =&gt; {
      <span class="hljs-comment">// æ£€æŸ¥ç‚¹å‡»æ˜¯å¦å‘ç”Ÿåœ¨å·¥å…·æ åŒºåŸŸå†…</span>
      <span class="hljs-keyword">if</span> (toolbarRef.<span class="hljs-property">current</span> &amp;&amp; toolbarRef.<span class="hljs-property">current</span>.<span class="hljs-title function_">contains</span>(e.<span class="hljs-property">target</span>)) {
        isInToolbarRef.<span class="hljs-property">current</span> = <span class="hljs-literal">true</span>;
      } <span class="hljs-keyword">else</span> {
        isInToolbarRef.<span class="hljs-property">current</span> = <span class="hljs-literal">false</span>;
      }
    };

    <span class="hljs-comment">/**
     * å¤„ç†é¼ æ ‡æŠ¬èµ·äº‹ä»¶
     */</span>
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleMouseUp</span> = (<span class="hljs-params"/>) =&gt; {
      <span class="hljs-comment">// å»¶è¿Ÿæ‰§è¡Œï¼Œç¡®ä¿æµè§ˆå™¨å·²å®Œæˆé€‰æ‹©æ“ä½œ</span>
      <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
        <span class="hljs-keyword">if</span> (!isInToolbarRef.<span class="hljs-property">current</span>) {
          <span class="hljs-title function_">handleSelectionChange</span>();
        }
      }, <span class="hljs-number">100</span>);
    };

    <span class="hljs-comment">/**
     * å¤„ç†ç‚¹å‡»å¤–éƒ¨äº‹ä»¶
     */</span>
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleClickOutside</span> = (<span class="hljs-params">e</span>) =&gt; {
      <span class="hljs-keyword">if</span> (toolbarRef.<span class="hljs-property">current</span> &amp;&amp; !toolbarRef.<span class="hljs-property">current</span>.<span class="hljs-title function_">contains</span>(e.<span class="hljs-property">target</span>)) {
        <span class="hljs-keyword">const</span> targetElement = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(target);
        <span class="hljs-keyword">if</span> (targetElement &amp;&amp; !targetElement.<span class="hljs-title function_">contains</span>(e.<span class="hljs-property">target</span>)) {
          <span class="hljs-title function_">setSelection</span>(<span class="hljs-literal">null</span>);
        }
      }
    };

    <span class="hljs-comment">// æ·»åŠ äº‹ä»¶ç›‘å¬å™¨</span>
    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"selectionchange"</span>, handleSelectionChange);
    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"mousedown"</span>, handleMouseDown);
    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"mouseup"</span>, handleMouseUp);
    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"mousedown"</span>, handleClickOutside);

    <span class="hljs-comment">// æ¸…ç†å‡½æ•°ï¼šç»„ä»¶å¸è½½æ—¶ç§»é™¤äº‹ä»¶ç›‘å¬å™¨</span>
    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">"selectionchange"</span>, handleSelectionChange);
      <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">"mousedown"</span>, handleMouseDown);
      <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">"mouseup"</span>, handleMouseUp);
      <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">"mousedown"</span>, handleClickOutside);
    };
  }, [target, getBoldState]);

  <span class="hljs-comment">// è®¾ç½®å­—ä½“å¤§å°</span>
  <span class="hljs-keyword">const</span> setFontSizeCommand = <span class="hljs-title function_">useCallback</span>(<span class="hljs-function">(<span class="hljs-params">sizeValue, range</span>) =&gt;</span> {
    <span class="hljs-keyword">if</span> (!range) <span class="hljs-keyword">return</span>;

    <span class="hljs-keyword">const</span> selection = <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">getSelection</span>();
    selection.<span class="hljs-title function_">removeAllRanges</span>();
    selection.<span class="hljs-title function_">addRange</span>(range);

    <span class="hljs-keyword">const</span> newRange = selection.<span class="hljs-title function_">getRangeAt</span>(<span class="hljs-number">0</span>);
    <span class="hljs-keyword">const</span> span = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">"span"</span>);

    <span class="hljs-keyword">const</span> sizeMap = {
      <span class="hljs-string">"1"</span>: <span class="hljs-string">"12px"</span>,
      <span class="hljs-string">"2"</span>: <span class="hljs-string">"14px"</span>,
      <span class="hljs-string">"3"</span>: <span class="hljs-string">"16px"</span>,
      <span class="hljs-string">"4"</span>: <span class="hljs-string">"18px"</span>,
      <span class="hljs-string">"5"</span>: <span class="hljs-string">"24px"</span>,
      <span class="hljs-string">"6"</span>: <span class="hljs-string">"32px"</span>,
      <span class="hljs-string">"7"</span>: <span class="hljs-string">"48px"</span>,
    };

    span.<span class="hljs-property">style</span>.<span class="hljs-property">fontSize</span> = sizeMap[sizeValue] || <span class="hljs-string">"16px"</span>;

    <span class="hljs-keyword">try</span> {
      <span class="hljs-comment">// æ£€æŸ¥é€‰æ‹©èŒƒå›´æ˜¯å¦å·²æŠ˜å ï¼ˆå³æ²¡æœ‰é€‰ä¸­æ–‡æœ¬ï¼Œåªæœ‰ä¸€ä¸ªå…‰æ ‡ä½ç½®ï¼‰</span>
      <span class="hljs-comment">// å¦‚æœæ˜¯æŠ˜å çŠ¶æ€ï¼Œä¸æ‰§è¡Œå­—ä½“å¤§å°è®¾ç½®æ“ä½œ</span>
      <span class="hljs-keyword">if</span> (newRange.<span class="hljs-property">collapsed</span>) <span class="hljs-keyword">return</span>;

      <span class="hljs-keyword">const</span> clonedRange = newRange.<span class="hljs-title function_">cloneRange</span>();
      <span class="hljs-keyword">const</span> fragment = clonedRange.<span class="hljs-title function_">extractContents</span>();
      span.<span class="hljs-title function_">appendChild</span>(fragment);
      clonedRange.<span class="hljs-title function_">insertNode</span>(span);

      <span class="hljs-comment">// æ¸…é™¤å½“å‰é€‰æ‹©ï¼Œç„¶åé‡æ–°é€‰ä¸­åˆšåˆšæ’å…¥çš„spanå…ƒç´ å†…å®¹</span>
      <span class="hljs-comment">// è¿™æ ·ç”¨æˆ·å¯ä»¥ç»§ç»­å¯¹åŒä¸€æ®µæ–‡æœ¬è¿›è¡Œå…¶ä»–æ“ä½œ</span>
      selection.<span class="hljs-title function_">removeAllRanges</span>();
      <span class="hljs-keyword">const</span> newSelectionRange = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createRange</span>();
      newSelectionRange.<span class="hljs-title function_">selectNodeContents</span>(span);
      selection.<span class="hljs-title function_">addRange</span>(newSelectionRange);
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"è®¾ç½®å­—ä½“å¤§å°å¤±è´¥:"</span>, error);
    }

    <span class="hljs-comment">// æ›´æ–°çŠ¶æ€</span>
    <span class="hljs-title function_">setFontSize</span>(sizeValue);
  }, []);

  <span class="hljs-comment">// å¤„ç†åŠ ç²—æ“ä½œ</span>
  <span class="hljs-keyword">const</span> handleBoldClick = <span class="hljs-title function_">useCallback</span>(<span class="hljs-function">(<span class="hljs-params">range</span>) =&gt;</span> {
    <span class="hljs-keyword">if</span> (!range) <span class="hljs-keyword">return</span>;

    <span class="hljs-comment">// æ‰§è¡ŒåŠ ç²—å‘½ä»¤</span>
    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">execCommand</span>(<span class="hljs-string">"bold"</span>, <span class="hljs-literal">false</span>, <span class="hljs-literal">null</span>);

    <span class="hljs-title function_">updateFormattingStates</span>();
  }, [updateFormattingStates]);

  <span class="hljs-comment">// å¤„ç†æ–œä½“æ“ä½œ</span>
  <span class="hljs-keyword">const</span> handleItalicClick = <span class="hljs-title function_">useCallback</span>(<span class="hljs-function">(<span class="hljs-params">range</span>) =&gt;</span> {
    <span class="hljs-keyword">if</span> (!range) <span class="hljs-keyword">return</span>;

    <span class="hljs-comment">// æ‰§è¡Œæ–œä½“å‘½ä»¤</span>
    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">execCommand</span>(<span class="hljs-string">"italic"</span>, <span class="hljs-literal">false</span>, <span class="hljs-literal">null</span>);

    <span class="hljs-comment">// æ¢å¤é€‰æ‹©èŒƒå›´å¹¶æ›´æ–°çŠ¶æ€</span>
    <span class="hljs-title function_">updateFormattingStates</span>();
  }, [updateFormattingStates]);

  <span class="hljs-comment">// å¤„ç†ä¸‹åˆ’çº¿æ“ä½œ</span>
  <span class="hljs-keyword">const</span> handleUnderlineClick = <span class="hljs-title function_">useCallback</span>(<span class="hljs-function">(<span class="hljs-params">range</span>) =&gt;</span> {
    <span class="hljs-keyword">if</span> (!range) <span class="hljs-keyword">return</span>;

    <span class="hljs-comment">// æ‰§è¡Œä¸‹åˆ’çº¿å‘½ä»¤</span>
    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">execCommand</span>(<span class="hljs-string">"underline"</span>, <span class="hljs-literal">false</span>, <span class="hljs-literal">null</span>);

    <span class="hljs-comment">// æ›´æ–°çŠ¶æ€</span>
    <span class="hljs-title function_">updateFormattingStates</span>();
  }, [updateFormattingStates]);

  <span class="hljs-comment">// å¤„ç†å­—å·å˜åŒ–</span>
  <span class="hljs-keyword">const</span> handleFontSizeChange = <span class="hljs-title function_">useCallback</span>(<span class="hljs-function">(<span class="hljs-params">sizeValue, range</span>) =&gt;</span> {
    <span class="hljs-keyword">if</span> (!range) <span class="hljs-keyword">return</span>;

    <span class="hljs-title function_">setFontSizeCommand</span>(sizeValue, range);
    <span class="hljs-title function_">updateFormattingStates</span>();
  }, [setFontSizeCommand, updateFormattingStates]);

  <span class="hljs-keyword">return</span> {
    selection,
    toolbarRef,
    isBoldActive,
    handleBoldClick,
  };
};
</code></pre>
<h2 data-id="heading-27">å®ç°é¢œè‰²</h2>
<h3 data-id="heading-28">ä¿®æ”¹ä¸»ç»„ä»¶</h3>
<p>ä»è‡ªå®šä¹‰ Hook ä¸­è·å– <code>color</code> å’Œ <code>handleColorChange</code>ï¼Œå¹¶ä¼ ç»™æµ®åŠ¨å·¥å…·æ ç»„ä»¶ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> <span class="hljs-title function_">TextCustom</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-comment">// ä½¿ç”¨è‡ªå®šä¹‰ Hook è·å–æ–‡æœ¬é€‰æ‹©ä¿¡æ¯</span>
  <span class="hljs-keyword">const</span> { 
    selection, 
    toolbarRef, 
    isBoldActive, 
    isItalicActive,
    isUnderlineActive,
    fontSize,
    handleBoldClick,
    handleItalicClick,
    handleUnderlineClick,
    handleFontSizeChange,
  } = <span class="hljs-title function_">useTextSelection</span>(<span class="hljs-string">"#editor"</span>);

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      {/* å¯ç¼–è¾‘çš„æ–‡æœ¬åŒºåŸŸ */}
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span>
        <span class="hljs-attr">id</span>=<span class="hljs-string">"editor"</span>
        <span class="hljs-attr">contentEditable</span>=<span class="hljs-string">{true}</span>
        <span class="hljs-attr">suppressContentEditableWarning</span>=<span class="hljs-string">{true}</span>
      /&gt;</span>

      {/* æµ®åŠ¨å·¥å…·æ ç»„ä»¶ */}
      <span class="hljs-tag">&lt;<span class="hljs-name">FloatingToolbar</span>
        <span class="hljs-attr">selection</span>=<span class="hljs-string">{selection}</span>
        <span class="hljs-attr">toolbarRef</span>=<span class="hljs-string">{toolbarRef}</span>
        <span class="hljs-attr">onBoldClick</span>=<span class="hljs-string">{handleBoldClick}</span>
        <span class="hljs-attr">onItalicClick</span>=<span class="hljs-string">{handleItalicClick}</span>
        <span class="hljs-attr">onUnderlineClick</span>=<span class="hljs-string">{handleUnderlineClick}</span>
        <span class="hljs-attr">onFontSizeChange</span>=<span class="hljs-string">{handleFontSizeChange}</span>
        <span class="hljs-attr">onColorChange</span>=<span class="hljs-string">{handleColorChange}</span>
        <span class="hljs-attr">isBoldActive</span>=<span class="hljs-string">{isBoldActive}</span>
        <span class="hljs-attr">isItalicActive</span>=<span class="hljs-string">{isItalicActive}</span>
        <span class="hljs-attr">isUnderlineActive</span>=<span class="hljs-string">{isUnderlineActive}</span>
        <span class="hljs-attr">fontSize</span>=<span class="hljs-string">{fontSize}</span>
        <span class="hljs-attr">color</span>=<span class="hljs-string">{color}</span>
      /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
};
</code></pre>
<h3 data-id="heading-29">ä¿®æ”¹æµ®åŠ¨å·¥å…·æ </h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> <span class="hljs-title function_">FloatingToolbar</span> = (<span class="hljs-params">{
  selection,
  toolbarRef,
  onBoldClick,
  onItalicClick,
  onUnderlineClick,
  onFontSizeChange,
  onColorChange,
  isBoldActive = <span class="hljs-literal">false</span>,
  isItalicActive = <span class="hljs-literal">false</span>,
  isUnderlineActive = <span class="hljs-literal">false</span>,
  fontSize = <span class="hljs-string">"3"</span>,
  color = <span class="hljs-string">"#000000"</span>,
}</span>) =&gt; {
  <span class="hljs-comment">// å¦‚æœæ²¡æœ‰é€‰æ‹©ä¿¡æ¯ï¼Œä¸æ¸²æŸ“å·¥å…·æ </span>
  <span class="hljs-keyword">if</span> (!selection) <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;

  <span class="hljs-keyword">const</span> { clientRect, selectedText, range } = selection;
  
  <span class="hljs-comment">// å¦‚æœæ²¡æœ‰é€‰ä¸­æ–‡æœ¬æˆ–ä½ç½®ä¿¡æ¯ï¼Œä¸æ¸²æŸ“å·¥å…·æ </span>
  <span class="hljs-keyword">if</span> (!selectedText || !clientRect || !range) <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>
      <span class="hljs-attr">ref</span>=<span class="hljs-string">{toolbarRef}</span>
      <span class="hljs-attr">className</span>=<span class="hljs-string">"floating-toolbar"</span>
      <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span>
        <span class="hljs-attr">position:</span> "<span class="hljs-attr">fixed</span>",
        <span class="hljs-attr">top:</span> <span class="hljs-attr">clientRect.top</span> <span class="hljs-attr">-</span> <span class="hljs-attr">65</span>,
        <span class="hljs-attr">left:</span> <span class="hljs-attr">clientRect.left</span> + <span class="hljs-attr">clientRect.width</span> / <span class="hljs-attr">2</span>,
        <span class="hljs-attr">transform:</span> "<span class="hljs-attr">translateX</span>(<span class="hljs-attr">-10</span>%)",
        <span class="hljs-attr">background:</span> "#<span class="hljs-attr">fff</span>",
        <span class="hljs-attr">zIndex:</span> <span class="hljs-attr">10000</span>,
        <span class="hljs-attr">minWidth:</span> "<span class="hljs-attr">180px</span>",
      }}
    &gt;</span>
      {/* æ˜¾ç¤ºé€‰ä¸­æ–‡æœ¬çš„å­—ç¬¦æ•°é‡ */}
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">fontSize:</span> "<span class="hljs-attr">12px</span>", <span class="hljs-attr">fontWeight:</span> "<span class="hljs-attr">bold</span>" }}&gt;</span>
        ğŸ“ {selectedText.length} å­—
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

      {/* åŠ ç²—æŒ‰é’® */}
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span>
        <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> onBoldClick &amp;&amp; onBoldClick(range)}
        title="åŠ ç²—"
        style={{
          background: isBoldActive ? "#3498db" : "#999",
          border: "none",
          color: "white",
          width: "36px",
          height: "36px",
          borderRadius: "6px",
          cursor: "pointer",
          display: "flex",
          alignItems: "center",
          justifyContent: "center",
          fontSize: "14px",
        }}
      &gt;
        <span class="hljs-tag">&lt;<span class="hljs-name">strong</span>&gt;</span>B<span class="hljs-tag">&lt;/<span class="hljs-name">strong</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>

      {/* æ–œä½“æŒ‰é’® */}
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span>
        <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> onItalicClick &amp;&amp; onItalicClick(range)}
        title="æ–œä½“"
        style={{
          background: isItalicActive ? "#3498db" : "#999",
          border: "none",
          color: "white",
          width: "36px",
          height: "36px",
          borderRadius: "6px",
          cursor: "pointer",
          display: "flex",
          alignItems: "center",
          justifyContent: "center",
          fontSize: "14px",
          fontStyle: "italic",
        }}
      &gt;
        I
      <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>

      {/* ä¸‹åˆ’çº¿æŒ‰é’® */}
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span>
        <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> onUnderlineClick &amp;&amp; onUnderlineClick(range)}
        title="ä¸‹åˆ’çº¿"
        style={{
          background: isUnderlineActive ? "#3498db" : "#999",
          border: "none",
          color: "white",
          width: "36px",
          height: "36px",
          borderRadius: "6px",
          cursor: "pointer",
          display: "flex",
          alignItems: "center",
          justifyContent: "center",
          fontSize: "14px",
          textDecoration: "underline",
        }}
      &gt;
        U
      <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>

      {/* å­—å·é€‰æ‹©å™¨ */}
      <span class="hljs-tag">&lt;<span class="hljs-name">select</span>
        <span class="hljs-attr">value</span>=<span class="hljs-string">{fontSize}</span>
        <span class="hljs-attr">onChange</span>=<span class="hljs-string">{(e)</span> =&gt;</span> onFontSizeChange &amp;&amp; onFontSizeChange(e.target.value, range)}
        onMouseDown={(e) =&gt; e.stopPropagation()}
        onClick={(e) =&gt; e.stopPropagation()}
        style={{
          background: "#999",
          color: "white",
          border: "1px solid #999",
          borderRadius: "4px",
          padding: "6px 10px",
          cursor: "pointer",
          fontSize: "12px",
          width: "90px",
          appearance: "auto",
        }}
      &gt;
        <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"1"</span>&gt;</span>12px<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"2"</span>&gt;</span>14px<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"3"</span>&gt;</span>16px<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"4"</span>&gt;</span>18px<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"5"</span>&gt;</span>24px<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"6"</span>&gt;</span>32px<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"7"</span>&gt;</span>48px<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span>

      {/* é¢œè‰²é€‰æ‹©å™¨ */}
      <span class="hljs-tag">&lt;<span class="hljs-name">input</span>
        <span class="hljs-attr">type</span>=<span class="hljs-string">"color"</span>
        <span class="hljs-attr">value</span>=<span class="hljs-string">{color}</span>
        <span class="hljs-attr">onChange</span>=<span class="hljs-string">{(e)</span> =&gt;</span> onColorChange &amp;&amp; onColorChange(e.target.value, range)}
        title="æ–‡å­—é¢œè‰²"
        style={{
          width: "36px",
          height: "36px",
          border: "2px solid #4a627a",
          borderRadius: "6px",
          cursor: "pointer",
          padding: "0",
          backgroundColor: color || "#ffffff",
        }}
        onMouseDown={(e) =&gt; e.stopPropagation()}
        onClick={(e) =&gt; e.stopPropagation()}
      /&gt;
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
};
</code></pre>
<h3 data-id="heading-30">ä¿®æ”¹è‡ªå®šä¹‰ Hook</h3>
<p>åœ¨çœ‹å…·ä½“å®ç°å‰ï¼Œå…ˆè®¤è¯†ä¸€ä¸ª APIï¼Œ<code>document.createTreeWalke</code> æ˜¯ä¸€ä¸ªç”¨äº <strong>æ·±åº¦ä¼˜å…ˆéå† DOM æ ‘</strong> çš„æ¥å£ã€‚</p>
<p>åŸºæœ¬è¯­æ³•</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> walker = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createTreeWalker</span>(
  root,          <span class="hljs-comment">// éå†çš„èµ·å§‹èŠ‚ç‚¹</span>
  whatToShow,    <span class="hljs-comment">// è¦æ˜¾ç¤ºå“ªäº›ç±»å‹çš„èŠ‚ç‚¹</span>
  filter         <span class="hljs-comment">// å¯é€‰çš„è¿‡æ»¤å™¨å‡½æ•°</span>
);
</code></pre>
<p>ç®€å•ç¤ºä¾‹</p>
<pre><code class="hljs language-js" lang="js">&lt;div id=<span class="hljs-string">"container"</span>&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>æ ‡é¢˜<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span>
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>æ®µè½ <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>æ–‡æœ¬<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span>
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>é¡¹ç›®1<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>é¡¹ç›®2<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span></span>
&lt;/div&gt;

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">const</span> container = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'container'</span>);

<span class="hljs-comment">// åˆ›å»º TreeWalkerï¼š ä» container å¼€å§‹ï¼Œåªéå†å…ƒç´ èŠ‚ç‚¹</span>
<span class="hljs-keyword">const</span> walker = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createTreeWalker</span>(
  container,
  <span class="hljs-title class_">NodeFilter</span>.<span class="hljs-property">SHOW_ELEMENT</span>,  <span class="hljs-comment">// åªæ˜¾ç¤ºå…ƒç´ èŠ‚ç‚¹</span>
  <span class="hljs-literal">null</span>  <span class="hljs-comment">// ä¸è¿‡æ»¤</span>
);

<span class="hljs-keyword">const</span> nodes = [];
<span class="hljs-keyword">let</span> node;
<span class="hljs-keyword">while</span> (node = walker.<span class="hljs-title function_">nextNode</span>()) {
  nodes.<span class="hljs-title function_">push</span>(node.<span class="hljs-property">tagName</span>);
}

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(nodes); <span class="hljs-comment">// è¾“å‡º: ["H1", "P", "SPAN", "UL", "LI", "LI"] æ·±åº¦ä¼˜å…ˆéå†é¡ºåº</span>
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>
</code></pre>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> <span class="hljs-title function_">useTextSelection</span> = (<span class="hljs-params">target</span>) =&gt; {
  <span class="hljs-keyword">const</span> [selection, setSelection] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">null</span>);
  <span class="hljs-keyword">const</span> [isBoldActive, setIsBoldActive] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">false</span>);
  <span class="hljs-keyword">const</span> [isItalicActive, setIsItalicActive] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">false</span>);
  <span class="hljs-keyword">const</span> [isUnderlineActive, setIsUnderlineActive] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">false</span>);
  <span class="hljs-keyword">const</span> [fontSize, setFontSize] = <span class="hljs-title function_">useState</span>(<span class="hljs-string">"3"</span>);
  <span class="hljs-keyword">const</span> [color, setColor] = <span class="hljs-title function_">useState</span>(<span class="hljs-string">"#000000"</span>);
  
  <span class="hljs-comment">// æ ‡è®°ç”¨æˆ·æ˜¯å¦æ­£åœ¨ä¸å·¥å…·æ äº¤äº’</span>
  <span class="hljs-keyword">const</span> isInToolbarRef = <span class="hljs-title function_">useRef</span>(<span class="hljs-literal">false</span>);
  
  <span class="hljs-comment">// å·¥å…·æ  DOM å…ƒç´ çš„å¼•ç”¨</span>
  <span class="hljs-keyword">const</span> toolbarRef = <span class="hljs-title function_">useRef</span>(<span class="hljs-literal">null</span>);

  <span class="hljs-comment">// RGB è½¬åå…­è¿›åˆ¶è¾…åŠ©å‡½æ•°</span>
  <span class="hljs-keyword">const</span> rgbToHex = <span class="hljs-title function_">useCallback</span>(<span class="hljs-function">(<span class="hljs-params">rgb</span>) =&gt;</span> {
    <span class="hljs-comment">// å¦‚æœå·²ç»æ˜¯åå…­è¿›åˆ¶æ ¼å¼ï¼Œç›´æ¥è¿”å›</span>
    <span class="hljs-keyword">if</span> (rgb.<span class="hljs-title function_">startsWith</span>(<span class="hljs-string">"#"</span>)) <span class="hljs-keyword">return</span> rgb;

    <span class="hljs-comment">// åŒ¹é… RGB æˆ– RGBA æ ¼å¼ï¼šrgb(255, 255, 255) æˆ– rgba(255, 255, 255, 0.5)</span>
    <span class="hljs-keyword">const</span> match = rgb.<span class="hljs-title function_">match</span>(<span class="hljs-regexp">/rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*[\d.]+)?\)/</span>);
    <span class="hljs-keyword">if</span> (match) {
      <span class="hljs-keyword">const</span> r = <span class="hljs-built_in">parseInt</span>(match[<span class="hljs-number">1</span>]);
      <span class="hljs-keyword">const</span> g = <span class="hljs-built_in">parseInt</span>(match[<span class="hljs-number">2</span>]);
      <span class="hljs-keyword">const</span> b = <span class="hljs-built_in">parseInt</span>(match[<span class="hljs-number">3</span>]);

      <span class="hljs-comment">// å°† RGB å€¼è½¬æ¢ä¸ºåå…­è¿›åˆ¶ï¼Œå¹¶ç¡®ä¿ä¸¤ä½æ˜¾ç¤º</span>
      <span class="hljs-keyword">return</span> (
        <span class="hljs-string">"#"</span> +
        r.<span class="hljs-title function_">toString</span>(<span class="hljs-number">16</span>).<span class="hljs-title function_">padStart</span>(<span class="hljs-number">2</span>, <span class="hljs-string">"0"</span>) +
        g.<span class="hljs-title function_">toString</span>(<span class="hljs-number">16</span>).<span class="hljs-title function_">padStart</span>(<span class="hljs-number">2</span>, <span class="hljs-string">"0"</span>) +
        b.<span class="hljs-title function_">toString</span>(<span class="hljs-number">16</span>).<span class="hljs-title function_">padStart</span>(<span class="hljs-number">2</span>, <span class="hljs-string">"0"</span>)
      );
    }

    <span class="hljs-comment">// æ— æ³•è§£æçš„é¢œè‰²ï¼Œè¿”å›é»˜è®¤é»‘è‰²</span>
    <span class="hljs-keyword">return</span> <span class="hljs-string">"#000000"</span>;
  }, []);

  <span class="hljs-comment">// è·å–åŠ ç²—çŠ¶æ€</span>
  <span class="hljs-keyword">const</span> getBoldState = <span class="hljs-title function_">useCallback</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">document</span>.<span class="hljs-property">queryCommandState</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">queryCommandState</span>(<span class="hljs-string">"bold"</span>);
  }, []);

  <span class="hljs-comment">// è·å–æ–œä½“çŠ¶æ€</span>
  <span class="hljs-keyword">const</span> getItalicState = <span class="hljs-title function_">useCallback</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">document</span>.<span class="hljs-property">queryCommandState</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">queryCommandState</span>(<span class="hljs-string">"italic"</span>);
  }, []);

  <span class="hljs-comment">// è·å–ä¸‹åˆ’çº¿çŠ¶æ€</span>
  <span class="hljs-keyword">const</span> getUnderlineState = <span class="hljs-title function_">useCallback</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">document</span>.<span class="hljs-property">queryCommandState</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">queryCommandState</span>(<span class="hljs-string">"underline"</span>);
  }, []);

  <span class="hljs-comment">// è·å–å½“å‰é€‰æ‹©çš„å­—å·</span>
  <span class="hljs-keyword">const</span> getFontSizeState = <span class="hljs-title function_">useCallback</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> selection = <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">getSelection</span>();
    <span class="hljs-keyword">if</span> (!selection.<span class="hljs-property">rangeCount</span>) <span class="hljs-keyword">return</span> <span class="hljs-string">"3"</span>;

    <span class="hljs-keyword">const</span> range = selection.<span class="hljs-title function_">getRangeAt</span>(<span class="hljs-number">0</span>);

    <span class="hljs-keyword">let</span> element = range.<span class="hljs-property">startContainer</span>;
    <span class="hljs-keyword">if</span> (element.<span class="hljs-property">nodeType</span> !== <span class="hljs-title class_">Node</span>.<span class="hljs-property">ELEMENT_NODE</span>) {
      element = element.<span class="hljs-property">parentElement</span>;
    }

    <span class="hljs-comment">// éå†çˆ¶å…ƒç´ æŸ¥æ‰¾å­—ä½“å¤§å°</span>
    <span class="hljs-keyword">while</span> (element &amp;&amp; element !== <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(target)) {
      <span class="hljs-keyword">if</span> (element.<span class="hljs-property">nodeType</span> === <span class="hljs-title class_">Node</span>.<span class="hljs-property">ELEMENT_NODE</span>) {
        <span class="hljs-keyword">const</span> computedStyle = <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">getComputedStyle</span>(element);
        <span class="hljs-keyword">const</span> computedFontSize = computedStyle.<span class="hljs-property">fontSize</span>;

        <span class="hljs-keyword">if</span> (computedFontSize) {
          <span class="hljs-keyword">const</span> sizeInPx = <span class="hljs-built_in">parseInt</span>(computedFontSize);
          <span class="hljs-keyword">if</span> (sizeInPx &gt;= <span class="hljs-number">42</span>) <span class="hljs-keyword">return</span> <span class="hljs-string">"7"</span>;
          <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (sizeInPx &gt;= <span class="hljs-number">28</span>) <span class="hljs-keyword">return</span> <span class="hljs-string">"6"</span>;
          <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (sizeInPx &gt;= <span class="hljs-number">22</span>) <span class="hljs-keyword">return</span> <span class="hljs-string">"5"</span>;
          <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (sizeInPx &gt;= <span class="hljs-number">17</span>) <span class="hljs-keyword">return</span> <span class="hljs-string">"4"</span>;
          <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (sizeInPx &gt;= <span class="hljs-number">15</span>) <span class="hljs-keyword">return</span> <span class="hljs-string">"3"</span>;
          <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (sizeInPx &gt;= <span class="hljs-number">13</span>) <span class="hljs-keyword">return</span> <span class="hljs-string">"2"</span>;
          <span class="hljs-keyword">else</span> <span class="hljs-keyword">return</span> <span class="hljs-string">"1"</span>;
        }
      }
      element = element.<span class="hljs-property">parentElement</span>;
    }

    <span class="hljs-keyword">return</span> <span class="hljs-string">"3"</span>;
  }, [target]);

  <span class="hljs-comment">// è·å–å½“å‰é€‰æ‹©çš„é¢œè‰²</span>
  <span class="hljs-keyword">const</span> getColorState = <span class="hljs-title function_">useCallback</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> selection = <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">getSelection</span>();
    <span class="hljs-keyword">if</span> (!selection.<span class="hljs-property">rangeCount</span>) <span class="hljs-keyword">return</span> <span class="hljs-string">"#000000"</span>;

    <span class="hljs-keyword">const</span> range = selection.<span class="hljs-title function_">getRangeAt</span>(<span class="hljs-number">0</span>);
    <span class="hljs-keyword">const</span> commonAncestor = range.<span class="hljs-property">commonAncestorContainer</span>;

    <span class="hljs-keyword">let</span> element = range.<span class="hljs-property">startContainer</span>;
    <span class="hljs-keyword">if</span> (element.<span class="hljs-property">nodeType</span> !== <span class="hljs-title class_">Node</span>.<span class="hljs-property">ELEMENT_NODE</span>) {
      element = element.<span class="hljs-property">parentElement</span>;
    }

    <span class="hljs-comment">// éå†çˆ¶å…ƒç´ æŸ¥æ‰¾é¢œè‰²</span>
    <span class="hljs-keyword">while</span> (element &amp;&amp; element !== <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(target)) {
      <span class="hljs-keyword">if</span> (element.<span class="hljs-property">nodeType</span> === <span class="hljs-title class_">Node</span>.<span class="hljs-property">ELEMENT_NODE</span>) {
        <span class="hljs-keyword">const</span> computedStyle = <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">getComputedStyle</span>(element);
        <span class="hljs-keyword">const</span> computedColor = computedStyle.<span class="hljs-property">color</span>;

        <span class="hljs-comment">// æ£€æŸ¥é¢œè‰²æ˜¯å¦ä¸ºæœ‰æ•ˆå€¼ï¼ˆéé€æ˜ã€éé»˜è®¤é»‘è‰²ï¼‰</span>
        <span class="hljs-keyword">if</span> (
          computedColor &amp;&amp;
          computedColor !== <span class="hljs-string">"rgba(0, 0, 0, 0)"</span> &amp;&amp;
          computedColor !== <span class="hljs-string">"transparent"</span> &amp;&amp;
          !computedColor.<span class="hljs-title function_">startsWith</span>(<span class="hljs-params"><span class="hljs-string">"rgba(0, 0, 0, "</span></span>)
        ) {
          <span class="hljs-keyword">return</span> <span class="hljs-title function_">rgbToHex</span>(computedColor);
        }
      }
      element = element.<span class="hljs-property">parentElement</span>;
    }

    <span class="hljs-comment">// å¦‚æœæ²¡æœ‰æ‰¾åˆ°ï¼Œæ£€æŸ¥é€‰æ‹©èŒƒå›´å†…çš„å…ƒç´ </span>
    <span class="hljs-keyword">const</span> walker = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createTreeWalker</span>(
      commonAncestor,
      <span class="hljs-title class_">NodeFilter</span>.<span class="hljs-property">SHOW_ELEMENT</span>,
      {
        <span class="hljs-attr">acceptNode</span>: <span class="hljs-function">(<span class="hljs-params">node</span>) =&gt;</span>
          range.<span class="hljs-title function_">intersectsNode</span>(node)
            ? <span class="hljs-title class_">NodeFilter</span>.<span class="hljs-property">FILTER_ACCEPT</span>
            : <span class="hljs-title class_">NodeFilter</span>.<span class="hljs-property">FILTER_REJECT</span>,
      },
    );

    <span class="hljs-comment">// å½“å‘ä¸Šéå†æ‰¾ä¸åˆ°é¢œè‰²æ—¶ï¼Œå®ƒä¼šæ·±åº¦éå†é€‰æ‹©èŒƒå›´å†…çš„æ‰€æœ‰å…ƒç´ ï¼Œæ‰¾åˆ°ç¬¬ä¸€ä¸ªæœ‰æ•ˆçš„æ–‡æœ¬é¢œè‰²ã€‚</span>
    <span class="hljs-keyword">while</span> ((element = walker.<span class="hljs-title function_">nextNode</span>())) {
      <span class="hljs-keyword">const</span> computedStyle = <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">getComputedStyle</span>(element);
      <span class="hljs-keyword">const</span> computedColor = computedStyle.<span class="hljs-property">color</span>;

      <span class="hljs-keyword">if</span> (
        computedColor &amp;&amp;
        computedColor !== <span class="hljs-string">"rgba(0, 0, 0, 0)"</span> &amp;&amp;
        computedColor !== <span class="hljs-string">"transparent"</span> &amp;&amp;
        !computedColor.<span class="hljs-title function_">startsWith</span>(<span class="hljs-params"><span class="hljs-string">"rgba(0, 0, 0, "</span></span>)
      ) {
        <span class="hljs-keyword">return</span> <span class="hljs-title function_">rgbToHex</span>(computedColor);
      }
    }

    <span class="hljs-keyword">return</span> <span class="hljs-string">"#000000"</span>;
  }, [target, rgbToHex]);

  <span class="hljs-comment">// æ›´æ–°æ‰€æœ‰æ ¼å¼åŒ–çŠ¶æ€</span>
  <span class="hljs-keyword">const</span> updateFormattingStates = <span class="hljs-title function_">useCallback</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-title function_">setIsBoldActive</span>(<span class="hljs-title function_">getBoldState</span>());
    <span class="hljs-title function_">setIsItalicActive</span>(<span class="hljs-title function_">getItalicState</span>());
    <span class="hljs-title function_">setIsUnderlineActive</span>(<span class="hljs-title function_">getUnderlineState</span>());
    <span class="hljs-title function_">setFontSize</span>(<span class="hljs-title function_">getFontSizeState</span>());
    <span class="hljs-title function_">setColor</span>(<span class="hljs-title function_">getColorState</span>());
  }, [getBoldState, getItalicState, getUnderlineState, getFontSizeState, getColorState]);

  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-comment">/**
     * å¤„ç†æ–‡æœ¬é€‰æ‹©å˜åŒ–äº‹ä»¶
     */</span>
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleSelectionChange</span> = (<span class="hljs-params"/>) =&gt; {
      <span class="hljs-comment">// å¦‚æœç”¨æˆ·æ­£åœ¨ä¸å·¥å…·æ äº¤äº’ï¼Œä¸å¤„ç†é€‰æ‹©å˜åŒ–</span>
      <span class="hljs-keyword">if</span> (isInToolbarRef.<span class="hljs-property">current</span>) <span class="hljs-keyword">return</span>;

      <span class="hljs-keyword">const</span> selection = <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">getSelection</span>();
      <span class="hljs-keyword">const</span> selectedText = selection.<span class="hljs-title function_">toString</span>().<span class="hljs-title function_">trim</span>();

      <span class="hljs-comment">// ç¡®ä¿æœ‰é€‰ä¸­æ–‡æœ¬å¹¶ä¸”é€‰æ‹©èŒƒå›´æœ‰æ•ˆ</span>
      <span class="hljs-keyword">if</span> (selectedText &amp;&amp; selection.<span class="hljs-property">rangeCount</span> &gt; <span class="hljs-number">0</span>) {
        <span class="hljs-keyword">const</span> range = selection.<span class="hljs-title function_">getRangeAt</span>(<span class="hljs-number">0</span>);
        <span class="hljs-keyword">const</span> rect = range.<span class="hljs-title function_">getBoundingClientRect</span>();

        <span class="hljs-keyword">const</span> anchorNode = selection.<span class="hljs-property">anchorNode</span>;
        <span class="hljs-keyword">const</span> targetElement = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(target);
        
        <span class="hljs-comment">// æ£€æŸ¥é€‰æ‹©æ˜¯å¦å‘ç”Ÿåœ¨ç›®æ ‡ç¼–è¾‘å™¨å†…</span>
        <span class="hljs-keyword">const</span> isInTarget =
          targetElement &amp;&amp;
          (targetElement.<span class="hljs-title function_">contains</span>(anchorNode) || targetElement === anchorNode);

        <span class="hljs-keyword">if</span> (isInTarget) {
          <span class="hljs-comment">// ä¿å­˜é€‰æ‹©èŒƒå›´</span>
          <span class="hljs-comment">// æ›´æ–°é€‰æ‹©ä¿¡æ¯ï¼Œæ˜¾ç¤ºå·¥å…·æ </span>
          <span class="hljs-title function_">setSelection</span>({
            <span class="hljs-attr">clientRect</span>: rect,
            <span class="hljs-attr">selectedText</span>: selectedText,
            <span class="hljs-attr">range</span>: range,
          });

          <span class="hljs-comment">// è·å–å½“å‰æ ¼å¼åŒ–çŠ¶æ€</span>
          <span class="hljs-title function_">updateFormattingStates</span>();
        } <span class="hljs-keyword">else</span> {
          <span class="hljs-comment">// é€‰æ‹©ä¸åœ¨ç¼–è¾‘å™¨å†…ï¼Œéšè—å·¥å…·æ </span>
          <span class="hljs-title function_">setSelection</span>(<span class="hljs-literal">null</span>);
        }
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-comment">// æ²¡æœ‰é€‰ä¸­æ–‡æœ¬ï¼Œéšè—å·¥å…·æ </span>
        <span class="hljs-title function_">setSelection</span>(<span class="hljs-literal">null</span>);
      }
    };

    <span class="hljs-comment">/**
     * å¤„ç†é¼ æ ‡æŒ‰ä¸‹äº‹ä»¶
     */</span>
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleMouseDown</span> = (<span class="hljs-params">e</span>) =&gt; {
      <span class="hljs-comment">// æ£€æŸ¥ç‚¹å‡»æ˜¯å¦å‘ç”Ÿåœ¨å·¥å…·æ åŒºåŸŸå†…</span>
      <span class="hljs-keyword">if</span> (toolbarRef.<span class="hljs-property">current</span> &amp;&amp; toolbarRef.<span class="hljs-property">current</span>.<span class="hljs-title function_">contains</span>(e.<span class="hljs-property">target</span>)) {
        isInToolbarRef.<span class="hljs-property">current</span> = <span class="hljs-literal">true</span>;
      } <span class="hljs-keyword">else</span> {
        isInToolbarRef.<span class="hljs-property">current</span> = <span class="hljs-literal">false</span>;
      }
    };

    <span class="hljs-comment">/**
     * å¤„ç†é¼ æ ‡æŠ¬èµ·äº‹ä»¶
     */</span>
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleMouseUp</span> = (<span class="hljs-params"/>) =&gt; {
      <span class="hljs-comment">// å»¶è¿Ÿæ‰§è¡Œï¼Œç¡®ä¿æµè§ˆå™¨å·²å®Œæˆé€‰æ‹©æ“ä½œ</span>
      <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
        <span class="hljs-keyword">if</span> (!isInToolbarRef.<span class="hljs-property">current</span>) {
          <span class="hljs-title function_">handleSelectionChange</span>();
        }
      }, <span class="hljs-number">100</span>);
    };

    <span class="hljs-comment">/**
     * å¤„ç†ç‚¹å‡»å¤–éƒ¨äº‹ä»¶
     */</span>
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleClickOutside</span> = (<span class="hljs-params">e</span>) =&gt; {
      <span class="hljs-keyword">if</span> (toolbarRef.<span class="hljs-property">current</span> &amp;&amp; !toolbarRef.<span class="hljs-property">current</span>.<span class="hljs-title function_">contains</span>(e.<span class="hljs-property">target</span>)) {
        <span class="hljs-keyword">const</span> targetElement = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(target);
        <span class="hljs-keyword">if</span> (targetElement &amp;&amp; !targetElement.<span class="hljs-title function_">contains</span>(e.<span class="hljs-property">target</span>)) {
          <span class="hljs-title function_">setSelection</span>(<span class="hljs-literal">null</span>);
        }
      }
    };

    <span class="hljs-comment">// æ·»åŠ äº‹ä»¶ç›‘å¬å™¨</span>
    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"selectionchange"</span>, handleSelectionChange);
    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"mousedown"</span>, handleMouseDown);
    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"mouseup"</span>, handleMouseUp);
    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"mousedown"</span>, handleClickOutside);

    <span class="hljs-comment">// æ¸…ç†å‡½æ•°ï¼šç»„ä»¶å¸è½½æ—¶ç§»é™¤äº‹ä»¶ç›‘å¬å™¨</span>
    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">"selectionchange"</span>, handleSelectionChange);
      <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">"mousedown"</span>, handleMouseDown);
      <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">"mouseup"</span>, handleMouseUp);
      <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">"mousedown"</span>, handleClickOutside);
    };
  }, [target, getBoldState]);

  <span class="hljs-comment">// è®¾ç½®å­—ä½“å¤§å°</span>
  <span class="hljs-keyword">const</span> setFontSizeCommand = <span class="hljs-title function_">useCallback</span>(<span class="hljs-function">(<span class="hljs-params">sizeValue, range</span>) =&gt;</span> {
    <span class="hljs-keyword">if</span> (!range) <span class="hljs-keyword">return</span>;

    <span class="hljs-keyword">const</span> selection = <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">getSelection</span>();
    selection.<span class="hljs-title function_">removeAllRanges</span>();
    selection.<span class="hljs-title function_">addRange</span>(range);

    <span class="hljs-keyword">const</span> newRange = selection.<span class="hljs-title function_">getRangeAt</span>(<span class="hljs-number">0</span>);
    <span class="hljs-keyword">const</span> span = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">"span"</span>);

    <span class="hljs-keyword">const</span> sizeMap = {
      <span class="hljs-string">"1"</span>: <span class="hljs-string">"12px"</span>,
      <span class="hljs-string">"2"</span>: <span class="hljs-string">"14px"</span>,
      <span class="hljs-string">"3"</span>: <span class="hljs-string">"16px"</span>,
      <span class="hljs-string">"4"</span>: <span class="hljs-string">"18px"</span>,
      <span class="hljs-string">"5"</span>: <span class="hljs-string">"24px"</span>,
      <span class="hljs-string">"6"</span>: <span class="hljs-string">"32px"</span>,
      <span class="hljs-string">"7"</span>: <span class="hljs-string">"48px"</span>,
    };

    span.<span class="hljs-property">style</span>.<span class="hljs-property">fontSize</span> = sizeMap[sizeValue] || <span class="hljs-string">"16px"</span>;

    <span class="hljs-keyword">try</span> {
      <span class="hljs-comment">// æ£€æŸ¥é€‰æ‹©èŒƒå›´æ˜¯å¦å·²æŠ˜å ï¼ˆå³æ²¡æœ‰é€‰ä¸­æ–‡æœ¬ï¼Œåªæœ‰ä¸€ä¸ªå…‰æ ‡ä½ç½®ï¼‰</span>
      <span class="hljs-comment">// å¦‚æœæ˜¯æŠ˜å çŠ¶æ€ï¼Œä¸æ‰§è¡Œå­—ä½“å¤§å°è®¾ç½®æ“ä½œ</span>
      <span class="hljs-keyword">if</span> (newRange.<span class="hljs-property">collapsed</span>) <span class="hljs-keyword">return</span>;

      <span class="hljs-keyword">const</span> clonedRange = newRange.<span class="hljs-title function_">cloneRange</span>();
      <span class="hljs-keyword">const</span> fragment = clonedRange.<span class="hljs-title function_">extractContents</span>();
      span.<span class="hljs-title function_">appendChild</span>(fragment);
      clonedRange.<span class="hljs-title function_">insertNode</span>(span);

      <span class="hljs-comment">// æ¸…é™¤å½“å‰é€‰æ‹©ï¼Œç„¶åé‡æ–°é€‰ä¸­åˆšåˆšæ’å…¥çš„spanå…ƒç´ å†…å®¹</span>
      <span class="hljs-comment">// è¿™æ ·ç”¨æˆ·å¯ä»¥ç»§ç»­å¯¹åŒä¸€æ®µæ–‡æœ¬è¿›è¡Œå…¶ä»–æ“ä½œ</span>
      selection.<span class="hljs-title function_">removeAllRanges</span>();
      <span class="hljs-keyword">const</span> newSelectionRange = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createRange</span>();
      newSelectionRange.<span class="hljs-title function_">selectNodeContents</span>(span);
      selection.<span class="hljs-title function_">addRange</span>(newSelectionRange);
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"è®¾ç½®å­—ä½“å¤§å°å¤±è´¥:"</span>, error);
    }

    <span class="hljs-comment">// æ›´æ–°çŠ¶æ€</span>
    <span class="hljs-title function_">setFontSize</span>(sizeValue);
  }, []);

  <span class="hljs-comment">// è®¾ç½®æ–‡æœ¬é¢œè‰²</span>
  <span class="hljs-keyword">const</span> setTextColor = <span class="hljs-title function_">useCallback</span>(<span class="hljs-function">(<span class="hljs-params">colorValue, range</span>) =&gt;</span> {
    <span class="hljs-keyword">if</span> (!range) <span class="hljs-keyword">return</span>;

    <span class="hljs-keyword">const</span> selection = <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">getSelection</span>();
    selection.<span class="hljs-title function_">removeAllRanges</span>();
    selection.<span class="hljs-title function_">addRange</span>(range);

    <span class="hljs-keyword">const</span> newRange = selection.<span class="hljs-title function_">getRangeAt</span>(<span class="hljs-number">0</span>);
    <span class="hljs-keyword">const</span> span = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">"span"</span>);

    span.<span class="hljs-property">style</span>.<span class="hljs-property">color</span> = colorValue;

    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">if</span> (newRange.<span class="hljs-property">collapsed</span>) <span class="hljs-keyword">return</span>;

      <span class="hljs-keyword">const</span> clonedRange = newRange.<span class="hljs-title function_">cloneRange</span>();
      <span class="hljs-keyword">const</span> fragment = clonedRange.<span class="hljs-title function_">extractContents</span>();
      span.<span class="hljs-title function_">appendChild</span>(fragment);
      clonedRange.<span class="hljs-title function_">insertNode</span>(span);

      selection.<span class="hljs-title function_">removeAllRanges</span>();
      <span class="hljs-keyword">const</span> newSelectionRange = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createRange</span>();
      newSelectionRange.<span class="hljs-title function_">selectNodeContents</span>(span);
      selection.<span class="hljs-title function_">addRange</span>(newSelectionRange);
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"è®¾ç½®é¢œè‰²å¤±è´¥:"</span>, error);
    }

    <span class="hljs-title function_">setColor</span>(colorValue);
  }, []);

  <span class="hljs-comment">// å¤„ç†åŠ ç²—æ“ä½œ</span>
  <span class="hljs-keyword">const</span> handleBoldClick = <span class="hljs-title function_">useCallback</span>(<span class="hljs-function">(<span class="hljs-params">range</span>) =&gt;</span> {
    <span class="hljs-keyword">if</span> (!range) <span class="hljs-keyword">return</span>;

    <span class="hljs-comment">// æ‰§è¡ŒåŠ ç²—å‘½ä»¤</span>
    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">execCommand</span>(<span class="hljs-string">"bold"</span>, <span class="hljs-literal">false</span>, <span class="hljs-literal">null</span>);

    <span class="hljs-title function_">updateFormattingStates</span>();
  }, [updateFormattingStates]);

  <span class="hljs-comment">// å¤„ç†æ–œä½“æ“ä½œ</span>
  <span class="hljs-keyword">const</span> handleItalicClick = <span class="hljs-title function_">useCallback</span>(<span class="hljs-function">(<span class="hljs-params">range</span>) =&gt;</span> {
    <span class="hljs-keyword">if</span> (!range) <span class="hljs-keyword">return</span>;

    <span class="hljs-comment">// æ‰§è¡Œæ–œä½“å‘½ä»¤</span>
    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">execCommand</span>(<span class="hljs-string">"italic"</span>, <span class="hljs-literal">false</span>, <span class="hljs-literal">null</span>);

    <span class="hljs-comment">// æ¢å¤é€‰æ‹©èŒƒå›´å¹¶æ›´æ–°çŠ¶æ€</span>
    <span class="hljs-title function_">updateFormattingStates</span>();
  }, [updateFormattingStates]);

  <span class="hljs-comment">// å¤„ç†ä¸‹åˆ’çº¿æ“ä½œ</span>
  <span class="hljs-keyword">const</span> handleUnderlineClick = <span class="hljs-title function_">useCallback</span>(<span class="hljs-function">(<span class="hljs-params">range</span>) =&gt;</span> {
    <span class="hljs-keyword">if</span> (!range) <span class="hljs-keyword">return</span>;

    <span class="hljs-comment">// æ‰§è¡Œä¸‹åˆ’çº¿å‘½ä»¤</span>
    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">execCommand</span>(<span class="hljs-string">"underline"</span>, <span class="hljs-literal">false</span>, <span class="hljs-literal">null</span>);

    <span class="hljs-comment">// æ›´æ–°çŠ¶æ€</span>
    <span class="hljs-title function_">updateFormattingStates</span>();
  }, [updateFormattingStates]);

  <span class="hljs-comment">// å¤„ç†å­—å·å˜åŒ–</span>
  <span class="hljs-keyword">const</span> handleFontSizeChange = <span class="hljs-title function_">useCallback</span>(<span class="hljs-function">(<span class="hljs-params">sizeValue, range</span>) =&gt;</span> {
    <span class="hljs-keyword">if</span> (!range) <span class="hljs-keyword">return</span>;

    <span class="hljs-title function_">setFontSizeCommand</span>(sizeValue, range);
    <span class="hljs-title function_">updateFormattingStates</span>();
  }, [setFontSizeCommand, updateFormattingStates]);

  <span class="hljs-keyword">return</span> {
    selection,
    toolbarRef,
    isBoldActive,
    handleBoldClick,
  };
};
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[esp32 å°æ™ºAI é¡¹ç›®]]></title>    <link>https://juejin.cn/post/7588001624904892435</link>    <guid>https://juejin.cn/post/7588001624904892435</guid>    <pubDate>2025-12-26T13:16:27.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588001624904892435" data-draft-id="7588001624904859667" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="esp32 å°æ™ºAI é¡¹ç›®"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-26T13:16:27.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å‰ç«¯è€çˆ·æ¨è½¦"/> <meta itemprop="url" content="https://juejin.cn/user/2189882895381079"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            esp32 å°æ™ºAI é¡¹ç›®
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2189882895381079/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å‰ç«¯è€çˆ·æ¨è½¦
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-26T13:16:27.000Z" title="Fri Dec 26 2025 13:16:27 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»13åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>#ä¸€ã€æ¥å…¥ MAX98357
MAX98357 æ˜¯ä¸€æ¬¾éå¸¸æµè¡Œçš„Â <strong>I2S æ•°å­—éŸ³é¢‘æ”¾å¤§å™¨æ¨¡å—</strong>ï¼Œä¸ ESP32 æ­é…æ˜¯åˆ¶ä½œæ•°å­—éŸ³é¢‘é¡¹ç›®çš„ç»å…¸ç»„åˆã€‚æ§åˆ¶å®ƒçš„æ ¸å¿ƒåœ¨äºï¼š<strong>æ­£ç¡®é…ç½® ESP32 çš„ I2S éŸ³é¢‘æ¥å£ï¼Œå¹¶å‘å…¶å‘é€æ•°å­—éŸ³é¢‘æ•°æ®</strong>ã€‚ä¸ºäº†æ–¹ä¾¿ä½ ç†è§£ä»ä»£ç åˆ°å£°éŸ³çš„å®Œæ•´æµç¨‹ï¼Œä¸‹å›¾æ¸…æ™°åœ°å±•ç¤ºäº†æ§åˆ¶ MAX98357 çš„æ ¸å¿ƒå·¥ä½œæµï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b48e65f9bc65437090fcbcac182f893b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv6ICB54i35o6o6L2m:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767359787&amp;x-signature=h%2F25JA8UEjvSv3APRo2ddSe%2BdAo%3D" alt="image.png" loading="lazy"/></p>
<h4 data-id="heading-0">ğŸ”Œ ç¡¬ä»¶è¿æ¥ï¼ˆæ¥çº¿ï¼‰</h4>
<p>è¿æ¥éå¸¸ç®€å•ï¼Œå› ä¸º MAX98357 ä½¿ç”¨æ ‡å‡†çš„ I2S æ¥å£ï¼š</p>













































<table><thead><tr><th>ESP32 å¼•è„š</th><th>MAX98357 å¼•è„š</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td><strong>3.3V</strong></td><td><strong>VIN</strong></td><td>ç”µæºï¼ˆ3.3V-5Vå‡å¯ï¼Œä¸ESP32å…±ç”¨3.3Væœ€æ–¹ä¾¿ï¼‰</td></tr><tr><td><strong>GND</strong></td><td><strong>GND</strong></td><td>æ¥åœ°ï¼ˆå¿…é¡»å…±åœ°ï¼‰</td></tr><tr><td><strong>GPIO 25 (æˆ–å…¶å®ƒ)</strong></td><td><strong>DIN</strong></td><td><strong>ä¸²è¡Œæ•°æ®è¾“å…¥</strong>ï¼Œè¿™æ˜¯æœ€é‡è¦çš„æ•°æ®çº¿ã€‚</td></tr><tr><td><strong>GPIO 26 (æˆ–å…¶å®ƒ)</strong></td><td><strong>BCLK</strong></td><td><strong>ä½æ—¶é’Ÿ</strong>ï¼Œç”¨äºåŒæ­¥æ¯ä¸€ä½æ•°æ®ã€‚</td></tr><tr><td><strong>GPIO 27 (æˆ–å…¶å®ƒ)</strong></td><td><strong>LRC</strong></td><td><strong>å·¦å³å£°é“æ—¶é’Ÿ</strong>ï¼Œç”¨äºåˆ‡æ¢å·¦å³å£°é“ã€‚</td></tr><tr><td>ï¼ˆå¯é€‰ï¼‰GPIOï¼ˆå¦‚15ï¼‰</td><td><strong>GAIN</strong></td><td>å¢ç›Šæ§åˆ¶ã€‚<strong>ä¸æ¥æ—¶é»˜è®¤ä¸ºé«˜å¢ç›Šï¼ˆ15dBï¼‰</strong> ã€‚å¦‚éœ€ä½å¢ç›Šï¼ˆ9dBï¼‰ï¼Œå°†æ­¤è„šæ¥åœ°ã€‚</td></tr><tr><td>ï¼ˆä¸è¿æ¥ï¼‰</td><td><strong>SD</strong></td><td>å…³æ–­å¼•è„šï¼ŒMAX98357 å†…éƒ¨å·²ä¸‹æ‹‰ï¼Œæ­£å¸¸å·¥ä½œæ—¶æ— éœ€è¿æ¥ã€‚</td></tr></tbody></table>
<blockquote>
<p><strong>å¼•è„šé€‰æ‹©æç¤º</strong>ï¼šESP32 æœ‰å¤šä¸ª I2S å¼•è„šï¼Œä½ å¯ä»¥ä½¿ç”¨ä¸Šè¡¨çš„å¼•è„šï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å…¶ä»–æ”¯æŒ I2S çš„å¼•è„šï¼ˆå¦‚ GPIO 5, 17, 18, 19, 21, 22, 23 ç­‰ï¼‰ï¼Œåªè¦åœ¨ä»£ç ä¸­ç»Ÿä¸€å³å¯ã€‚</p>
</blockquote>
<h4 data-id="heading-1">ğŸ› ï¸ è½¯ä»¶é…ç½®ä¸ç¼–ç¨‹ï¼ˆPlatformIOï¼‰</h4>
<p>åœ¨ PlatformIO é¡¹ç›®ä¸­ï¼Œæœ€ä¾¿æ·çš„æ–¹æ³•æ˜¯ä½¿ç”¨ä¸€ä¸ªä¼˜ç§€çš„éŸ³é¢‘åº“ï¼š<strong><code>AudioTools</code></strong>ã€‚</p>
<ol>
<li><strong>å®‰è£…åº“</strong>ï¼š<br/>
åœ¨ PlatformIO çš„ â€œLibrary Managerâ€ ä¸­æœç´¢Â <strong><code>AudioTools by pschatzmann</code></strong>Â å¹¶å®‰è£…ã€‚è¿™ä¸ªåº“å‡ ä¹å›Šæ‹¬äº†æ‰€æœ‰éŸ³é¢‘åŠŸèƒ½ï¼Œéå¸¸é€‚åˆå…¥é—¨ã€‚</li>
<li><strong>ç¼–å†™åŸºç¡€ç¨‹åº</strong>ï¼š<br/>
ä»¥ä¸‹ä»£ç æ¼”ç¤ºå¦‚ä½•æ’­æ”¾ä¸€ä¸ªç®€å•çš„Â <strong>440Hz æ­£å¼¦æ³¢ï¼ˆæ ‡å‡†éŸ³Aï¼‰</strong> ï¼Œè¿™æ˜¯æµ‹è¯•éŸ³é¢‘ç³»ç»Ÿçš„â€œHello Worldâ€ã€‚</li>
</ol>
<p>cpp</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-comment">/**
 * ESP32 + MAX98357 åŸºç¡€æµ‹è¯•
 * æ’­æ”¾ä¸€ä¸ª440Hzçš„æ­£å¼¦æ³¢
 */</span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;Arduino.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">"AudioTools.h"</span></span>

<span class="hljs-comment">// 1. å®šä¹‰I2Sè¾“å‡ºæ¥å£ï¼Œå¹¶æŒ‡å®šå¼•è„š</span>
<span class="hljs-comment">// å‚æ•°è§£é‡Šï¼šI2SStream(int data_pin, int clock_pin, int lr_pin)</span>
I2SStream i2s;
<span class="hljs-type">const</span> <span class="hljs-type">int</span> data_pin = <span class="hljs-number">25</span>;  <span class="hljs-comment">// DIN è¿æ¥çš„GPIO</span>
<span class="hljs-type">const</span> <span class="hljs-type">int</span> clock_pin = <span class="hljs-number">26</span>; <span class="hljs-comment">// BCLK è¿æ¥çš„GPIO</span>
<span class="hljs-type">const</span> <span class="hljs-type">int</span> lr_pin = <span class="hljs-number">27</span>;    <span class="hljs-comment">// LRC è¿æ¥çš„GPIO</span>

<span class="hljs-comment">// 2. å®šä¹‰éŸ³é¢‘ä¿¡å·æºï¼šä¸€ä¸ª440Hzçš„æ­£å¼¦æ³¢</span>
<span class="hljs-function">SineWaveGenerator&lt;<span class="hljs-type">int16_t</span>&gt; <span class="hljs-title">sineWave</span><span class="hljs-params">(<span class="hljs-number">32000</span>)</span></span>; <span class="hljs-comment">// ç”Ÿæˆ16ä½æœ‰ç¬¦å·æ•´æ•°æ ¼å¼çš„æ­£å¼¦æ³¢ï¼ŒæŒ¯å¹…32000</span>
<span class="hljs-function">GeneratedSoundStream&lt;<span class="hljs-type">int16_t</span>&gt; <span class="hljs-title">sound</span><span class="hljs-params">(sineWave)</span></span>; <span class="hljs-comment">// å°†æ­£å¼¦æ³¢åŒ…è£…æˆéŸ³é¢‘æµ</span>
<span class="hljs-function">StreamCopy <span class="hljs-title">copier</span><span class="hljs-params">(i2s, sound)</span></span>; <span class="hljs-comment">// éŸ³é¢‘æ•°æ®å¤åˆ¶å™¨ï¼šå°†å£°éŸ³æºçš„æ•°æ®å¤åˆ¶åˆ°I2Sè¾“å‡º</span>

<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">setup</span><span class="hljs-params">()</span> </span>{
  <span class="hljs-built_in">Serial</span>.<span class="hljs-built_in">begin</span>(<span class="hljs-number">115200</span>);
  
  <span class="hljs-comment">// 3. é…ç½®I2SéŸ³é¢‘å‚æ•°</span>
  <span class="hljs-keyword">auto</span> config = i2s.<span class="hljs-built_in">defaultConfig</span>();
  config.pin_data = data_pin;
  config.pin_bck = clock_pin;
  config.pin_ws = lr_pin;
  config.sample_rate = <span class="hljs-number">44100</span>; <span class="hljs-comment">// æ ‡å‡†é‡‡æ ·ç‡</span>
  config.bits_per_sample = <span class="hljs-number">16</span>; <span class="hljs-comment">// 16ä½é‡‡æ ·æ·±åº¦</span>
  config.channels = <span class="hljs-number">2</span>; <span class="hljs-comment">// ç«‹ä½“å£°</span>
  config.i2s_format = I2S_STD_FORMAT; <span class="hljs-comment">// æ ‡å‡†I2Sæ ¼å¼</span>
  
  <span class="hljs-comment">// 4. åˆå§‹åŒ–I2S</span>
  i2s.<span class="hljs-built_in">begin</span>(config);
  
  <span class="hljs-comment">// 5. é…ç½®æ­£å¼¦æ³¢å‚æ•°ï¼š440Hzï¼Œé‡‡æ ·ç‡ä¸I2Sä¸€è‡´</span>
  sineWave.<span class="hljs-built_in">begin</span>(config.channels, config.sample_rate, <span class="hljs-number">440</span>);
  
  <span class="hljs-built_in">Serial</span>.<span class="hljs-built_in">println</span>(<span class="hljs-string">"å¼€å§‹æ’­æ”¾ 440Hz æ­£å¼¦æ³¢ï¼ˆæ ‡å‡†éŸ³Aï¼‰..."</span>);
}

<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">loop</span><span class="hljs-params">()</span> </span>{
  <span class="hljs-comment">// ä¸æ–­å°†ç”Ÿæˆçš„éŸ³é¢‘æ•°æ®å¤åˆ¶åˆ°I2Sæ¥å£</span>
  copier.<span class="hljs-built_in">copy</span>();
}
</code></pre>
<h4 data-id="heading-2">ğŸµ æ’­æ”¾å®é™…éŸ³é¢‘æ–‡ä»¶ï¼ˆå¦‚WAVï¼‰</h4>
<p>è¦æ’­æ”¾SDå¡æˆ–SPIFFSä¸­çš„éŸ³é¢‘æ–‡ä»¶ï¼Œä½ éœ€è¦ï¼š</p>
<ol>
<li><strong>å®‰è£…é¢å¤–åº“</strong>ï¼šåœ¨ PlatformIO ä¸­å®‰è£…Â <strong><code>AudioCodecs by pschatzmann</code></strong>ã€‚</li>
<li><strong>å‡†å¤‡éŸ³é¢‘æ–‡ä»¶</strong>ï¼šå°†å…¶è½¬æ¢ä¸ºÂ <strong>å•å£°é“æˆ–ç«‹ä½“å£°ã€16ä½ã€é‡‡æ ·ç‡ä¸è¶…è¿‡44100Hzçš„WAVæ–‡ä»¶</strong>ï¼Œå¹¶ä¸Šä¼ åˆ°ESP32çš„SPIFFSæˆ–SDå¡ä¸­ã€‚</li>
</ol>
<p>ä»¥ä¸‹æ˜¯æ’­æ”¾SPIFFSä¸­<code>test.wav</code>æ–‡ä»¶çš„ç¤ºä¾‹ä»£ç æ¡†æ¶ï¼š</p>
<p>cpp</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;Arduino.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">"AudioTools.h"</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">"AudioLibs/AudioSourceSPIFFS.h"</span> <span class="hljs-comment">// SPIFFSéŸ³é¢‘æº</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">"AudioCodecs/CodecWAV.h"</span> <span class="hljs-comment">// WAVè§£ç å™¨</span></span>

I2SStream i2s;
SPIFFSStream file; <span class="hljs-comment">// SPIFFSæ–‡ä»¶æµ</span>
WAVDecoder dec; <span class="hljs-comment">// WAVè§£ç å™¨</span>
<span class="hljs-function">EncodedAudioStream <span class="hljs-title">decoder</span><span class="hljs-params">(&amp;i2s, &amp;dec)</span></span>; <span class="hljs-comment">// è§£ç åçš„éŸ³é¢‘æµæŒ‡å‘I2S</span>
<span class="hljs-function">StreamCopy <span class="hljs-title">copier</span><span class="hljs-params">(decoder, file)</span></span>; <span class="hljs-comment">// å°†æ–‡ä»¶-&gt;è§£ç -&gt;I2S</span>

<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">setup</span><span class="hljs-params">()</span> </span>{
  <span class="hljs-built_in">Serial</span>.<span class="hljs-built_in">begin</span>(<span class="hljs-number">115200</span>);
  
  <span class="hljs-comment">// åˆå§‹åŒ–æ–‡ä»¶ç³»ç»Ÿï¼ˆéœ€è¦å…ˆé€šè¿‡PlatformIOçš„â€œUpload Filesystem Imageâ€ä¸Šä¼ æ–‡ä»¶ï¼‰</span>
  <span class="hljs-keyword">if</span> (!SPIFFS.<span class="hljs-built_in">begin</span>()) {
    <span class="hljs-built_in">Serial</span>.<span class="hljs-built_in">println</span>(<span class="hljs-string">"SPIFFSåˆå§‹åŒ–å¤±è´¥ï¼"</span>);
    <span class="hljs-keyword">while</span>(<span class="hljs-number">1</span>);
  }

  <span class="hljs-comment">// é…ç½®I2Sï¼ˆåŒä¸Šä¾‹ï¼Œçœç•¥ï¼‰</span>
  <span class="hljs-keyword">auto</span> i2sConfig = i2s.<span class="hljs-built_in">defaultConfig</span>();
  i2sConfig.pin_data = <span class="hljs-number">25</span>;
  <span class="hljs-comment">// ... å…¶ä»–é…ç½®</span>
  i2s.<span class="hljs-built_in">begin</span>(i2sConfig);

  <span class="hljs-comment">// é…ç½®éŸ³é¢‘æµ</span>
  file.<span class="hljs-built_in">begin</span>(<span class="hljs-string">"/test.wav"</span>); <span class="hljs-comment">// æ‰“å¼€æ–‡ä»¶</span>
  decoder.<span class="hljs-built_in">begin</span>(); <span class="hljs-comment">// å¼€å§‹è§£ç </span>

  <span class="hljs-built_in">Serial</span>.<span class="hljs-built_in">println</span>(<span class="hljs-string">"å¼€å§‹æ’­æ”¾WAVæ–‡ä»¶..."</span>);
}

<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">loop</span><span class="hljs-params">()</span> </span>{
  <span class="hljs-keyword">if</span> (copier.<span class="hljs-built_in">copy</span>()) {
    <span class="hljs-comment">// æ­£å¸¸æ’­æ”¾ä¸­</span>
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-built_in">Serial</span>.<span class="hljs-built_in">println</span>(<span class="hljs-string">"æ’­æ”¾ç»“æŸæˆ–å‡ºé”™"</span>);
    <span class="hljs-built_in">delay</span>(<span class="hljs-number">2000</span>);
    <span class="hljs-comment">// å¯åœ¨æ­¤å¾ªç¯æ’­æ”¾æˆ–æ’­æ”¾ä¸‹ä¸€é¦–</span>
  }
}
</code></pre>
<h4 data-id="heading-3">ğŸ”„ ä¸ä¹‹å‰çš„ST7789å±å¹•é¡¹ç›®ç»“åˆ</h4>
<p>ä½ å¯ä»¥è½»æ¾åœ°å°†éŸ³é¢‘æ§åˆ¶å’Œå±å¹•æ˜¾ç¤ºç»“åˆåœ¨ä¸€ä¸ªESP32é¡¹ç›®ä¸­ï¼Œå› ä¸ºä¸¤è€…ä½¿ç”¨ä¸åŒçš„ç¡¬ä»¶æ¥å£ï¼ˆI2S vs. SPIï¼‰ä¸”åº“ä¸å†²çªã€‚ä¾‹å¦‚ï¼Œåœ¨å±å¹•ä¸Šæ˜¾ç¤ºå½“å‰æ’­æ”¾çš„æ­Œæ›²åã€éŸ³é‡æˆ–éŸ³é¢‘é¢‘è°±ã€‚åªéœ€å°†ä¸¤éƒ¨åˆ†çš„<code>setup()</code>å’Œ<code>loop()</code>é€»è¾‘åˆç†æ•´åˆå³å¯ã€‚</p>
<h2 data-id="heading-4">æ¥å…¥ SDå¡</h2>
<p>åŸºäºæˆ‘ä»¬ä¹‹å‰çš„è®¨è®ºï¼Œä»¥ä¸‹æ˜¯ä½¿ç”¨Â <strong>ESP32 é€šè¿‡ SD å¡è¯»å–å¹¶æ’­æ”¾ WAV éŸ³é¢‘æ–‡ä»¶</strong>Â çš„å®Œæ•´å®ç°æ–¹æ¡ˆã€‚è¿™æ¶µç›–äº†ç¡¬ä»¶è¿æ¥ã€PlatformIO é…ç½®å’Œå¯è¿è¡Œçš„ä»£ç ã€‚</p>
<h4 data-id="heading-5">ğŸ“ å®Œæ•´é¡¹ç›®å®ç°æŒ‡å—</h4>
<h5 data-id="heading-6">1. ç¡¬ä»¶è¿æ¥ (ESP32 + SDå¡æ¨¡å— + MAX98357)</h5>
<p>è¯·ç¡®ä¿ä½ çš„ç¡¬ä»¶æŒ‰æ­¤è¿æ¥ã€‚<strong>ç”µæºç¨³å®šæ˜¯å…³é”®</strong>ï¼Œå»ºè®®ä½¿ç”¨å¤–éƒ¨5Vç”µæºä¸ºéŸ³é¢‘éƒ¨åˆ†ç‹¬ç«‹ä¾›ç”µï¼Œå¹¶ä¸ESP32å…±åœ°ã€‚</p>























































<table><thead><tr><th>ESP32 GPIO å¼•è„š</th><th>SD å¡æ¨¡å—å¼•è„š</th><th>MAX98357 æ¨¡å—å¼•è„š</th></tr></thead><tbody><tr><td><strong>3.3V</strong></td><td>VCC</td><td>VIN (å¯å•ç‹¬ä¾›ç”µ)</td></tr><tr><td><strong>GND</strong></td><td>GND</td><td>GND (<strong>å¿…é¡»å…±åœ°</strong>)</td></tr><tr><td><strong>GPIO 23</strong></td><td>MOSI</td><td>--</td></tr><tr><td><strong>GPIO 19</strong></td><td>MISO</td><td>--</td></tr><tr><td><strong>GPIO 18</strong></td><td>SCK</td><td>--</td></tr><tr><td><strong>GPIO 5</strong>Â (ç¤ºä¾‹)</td><td>CS (ç‰‡é€‰)</td><td>--</td></tr><tr><td><strong>GPIO 25</strong></td><td>--</td><td>DIN</td></tr><tr><td><strong>GPIO 26</strong></td><td>--</td><td>BCLK</td></tr><tr><td><strong>GPIO 27</strong></td><td>--</td><td>LRC</td></tr></tbody></table>
<h5 data-id="heading-7">2. PlatformIO é¡¹ç›®é…ç½® (<code>platformio.ini</code>)</h5>
<p>åˆ›å»ºæˆ–ä¿®æ”¹é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„Â <code>platformio.ini</code>Â æ–‡ä»¶ã€‚</p>
<p>ini</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-section">[env:esp32-dev]</span>
<span class="hljs-attr">platform</span> = espressif32
<span class="hljs-attr">board</span> = esp32dev
<span class="hljs-attr">framework</span> = ardui<span class="hljs-literal">no</span>
<span class="hljs-attr">monitor_speed</span> = <span class="hljs-number">115200</span>

<span class="hljs-comment">; æ ¸å¿ƒä¾èµ–åº“</span>
<span class="hljs-attr">lib_deps</span> = 
    pschatzmann/ESP32-AudioTools @ ^1.0.8  <span class="hljs-comment"># ä¸»éŸ³é¢‘åº“</span>
    pschatzmann/arduino-audio-tools @ ^1.1.9
    pschatzmann/arduino-audiocodecs @ ^1.0.6 <span class="hljs-comment"># WAVè§£ç å™¨</span>
    <span class="hljs-comment">; SDå¡åº“å·²åŒ…å«åœ¨æ¡†æ¶ä¸­</span>

<span class="hljs-comment">; ä¼˜åŒ–æ„å»º</span>
<span class="hljs-attr">board_build.flash_mode</span> = dio
<span class="hljs-attr">build_flags</span> = 
    -Wl,-Teagle.flash.4m32m.ld
</code></pre>
<h5 data-id="heading-8">3. ä¸»ç¨‹åºä»£ç  (<code>src/main.cpp</code>)</h5>
<p>å°†ä»¥ä¸‹ä»£ç å¤åˆ¶åˆ°Â <code>src/main.cpp</code>Â ä¸­ï¼Œå¹¶æ ¹æ®ä½ çš„å¼•è„šå®šä¹‰è¿›è¡Œä¿®æ”¹ã€‚</p>
<p>cpp</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-comment">/**
 * ESP32 SDå¡ WAVéŸ³é¢‘æ’­æ”¾å™¨
 * ä¾èµ–ï¼šAudioToolsåº“
 */</span>

<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;Arduino.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">"AudioTools.h"</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">"AudioLibs/AudioSourceSD.h"</span> <span class="hljs-comment">// SDå¡éŸ³é¢‘æº</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">"AudioCodecs/CodecWAV.h"</span>    <span class="hljs-comment">// WAVè§£ç å™¨</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;SD.h&gt;</span>                      <span class="hljs-comment">// SDå¡é©±åŠ¨</span></span>

<span class="hljs-comment">// ==================== ç”¨æˆ·é…ç½®åŒºåŸŸ ====================</span>
<span class="hljs-comment">// 1. SDå¡å¼•è„šé…ç½®ï¼ˆæ ¹æ®å®é™…æ¥çº¿ä¿®æ”¹ï¼ï¼‰</span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> SD_CS_PIN    5   <span class="hljs-comment">// SDå¡æ¨¡å—çš„ç‰‡é€‰å¼•è„š</span></span>

<span class="hljs-comment">// 2. I2Så¼•è„šé…ç½®ï¼ˆæ ¹æ®å®é™…æ¥çº¿ä¿®æ”¹ï¼ï¼‰</span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> I2S_DIN_PIN  25  <span class="hljs-comment">// MAX98357çš„DIN</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> I2S_BCLK_PIN 26  <span class="hljs-comment">// MAX98357çš„BCLK</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> I2S_LRC_PIN  27  <span class="hljs-comment">// MAX98357çš„LRC</span></span>

<span class="hljs-comment">// 3. éŸ³é¢‘æ–‡ä»¶è®¾ç½®</span>
<span class="hljs-type">const</span> <span class="hljs-type">char</span>* audioFilePath = <span class="hljs-string">"/test.wav"</span>; <span class="hljs-comment">// æ”¾åœ¨SDå¡æ ¹ç›®å½•çš„æµ‹è¯•æ–‡ä»¶</span>
<span class="hljs-comment">// ====================================================</span>

<span class="hljs-comment">// åˆ›å»ºéŸ³é¢‘å¯¹è±¡</span>
I2SStream i2s;                 <span class="hljs-comment">// I2Sè¾“å‡ºæµ</span>
<span class="hljs-function">SDStream <span class="hljs-title">file</span><span class="hljs-params">(SD_CS_PIN)</span></span>;      <span class="hljs-comment">// SDå¡æ–‡ä»¶æµï¼Œä¼ å…¥CSå¼•è„šå·</span>
WAVDecoder dec;                <span class="hljs-comment">// WAVè§£ç å™¨</span>
<span class="hljs-function">EncodedAudioStream <span class="hljs-title">decoder</span><span class="hljs-params">(&amp;i2s, &amp;dec)</span></span>; <span class="hljs-comment">// è§£ç åç®¡é“è¿æ¥åˆ°I2S</span>
<span class="hljs-function">StreamCopy <span class="hljs-title">copier</span><span class="hljs-params">(decoder, file)</span></span>;       <span class="hljs-comment">// è´Ÿè´£æ•°æ®å¤åˆ¶çš„â€œå¼•æ“â€</span>

<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">printAudioInfo</span><span class="hljs-params">(AudioInfo info)</span> </span>{
  <span class="hljs-built_in">Serial</span>.<span class="hljs-built_in">println</span>(<span class="hljs-string">"=== éŸ³é¢‘ä¿¡æ¯ ==="</span>);
  <span class="hljs-built_in">Serial</span>.<span class="hljs-built_in">printf</span>(<span class="hljs-string">"é‡‡æ ·ç‡: %d Hz\n"</span>, info.sample_rate);
  <span class="hljs-built_in">Serial</span>.<span class="hljs-built_in">printf</span>(<span class="hljs-string">"å£°é“æ•°: %d\n"</span>, info.channels);
  <span class="hljs-built_in">Serial</span>.<span class="hljs-built_in">printf</span>(<span class="hljs-string">"ä½æ·±åº¦: %d-bit\n"</span>, info.bits_per_sample);
  <span class="hljs-built_in">Serial</span>.<span class="hljs-built_in">println</span>(<span class="hljs-string">"================"</span>);
}

<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">setup</span><span class="hljs-params">()</span> </span>{
  <span class="hljs-built_in">Serial</span>.<span class="hljs-built_in">begin</span>(<span class="hljs-number">115200</span>);
  <span class="hljs-keyword">while</span> (!<span class="hljs-built_in">Serial</span>); <span class="hljs-comment">// ç­‰å¾…ä¸²å£è¿æ¥ï¼ˆä»…ç”¨äºè°ƒè¯•ï¼‰</span>
  <span class="hljs-built_in">delay</span>(<span class="hljs-number">500</span>);
  <span class="hljs-built_in">Serial</span>.<span class="hljs-built_in">println</span>(<span class="hljs-string">"\n\nESP32 SDå¡éŸ³é¢‘æ’­æ”¾å™¨å¯åŠ¨..."</span>);

  <span class="hljs-comment">// === ç¬¬ä¸€æ­¥ï¼šåˆå§‹åŒ–SDå¡ ===</span>
  <span class="hljs-built_in">Serial</span>.<span class="hljs-built_in">print</span>(<span class="hljs-string">"åˆå§‹åŒ–SDå¡..."</span>);
  <span class="hljs-keyword">if</span> (!<span class="hljs-built_in">SD</span>.<span class="hljs-built_in">begin</span>(SD_CS_PIN)) {
    <span class="hljs-built_in">Serial</span>.<span class="hljs-built_in">println</span>(<span class="hljs-string">"å¤±è´¥ï¼è¯·æ£€æŸ¥ï¼š"</span>);
    <span class="hljs-built_in">Serial</span>.<span class="hljs-built_in">println</span>(<span class="hljs-string">"  1. SDå¡æ˜¯å¦æ’å…¥ï¼Ÿ"</span>);
    <span class="hljs-built_in">Serial</span>.<span class="hljs-built_in">println</span>(<span class="hljs-string">"  2. å¼•è„šè¿æ¥æ˜¯å¦æ­£ç¡®ï¼Ÿ"</span>);
    <span class="hljs-built_in">Serial</span>.<span class="hljs-built_in">println</span>(<span class="hljs-string">"  3. SDå¡æ ¼å¼æ˜¯å¦ä¸ºFAT32ï¼Ÿ"</span>);
    <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) { <span class="hljs-comment">// æŒ‚èµ·</span>
      <span class="hljs-built_in">delay</span>(<span class="hljs-number">100</span>);
    }
  }
  <span class="hljs-built_in">Serial</span>.<span class="hljs-built_in">println</span>(<span class="hljs-string">"æˆåŠŸï¼"</span>);

  <span class="hljs-comment">// å¯é€‰ï¼šåˆ—å‡ºæ ¹ç›®å½•æ–‡ä»¶</span>
  <span class="hljs-built_in">Serial</span>.<span class="hljs-built_in">println</span>(<span class="hljs-string">"SDå¡æ ¹ç›®å½•å†…å®¹ï¼š"</span>);
  <span class="hljs-built_in">File</span> root = <span class="hljs-built_in">SD</span>.<span class="hljs-built_in">open</span>(<span class="hljs-string">"/"</span>);
  <span class="hljs-keyword">while</span> (<span class="hljs-built_in">File</span> entry = root.<span class="hljs-built_in">openNextFile</span>()) {
    <span class="hljs-built_in">Serial</span>.<span class="hljs-built_in">print</span>(<span class="hljs-string">"  "</span>);
    <span class="hljs-built_in">Serial</span>.<span class="hljs-built_in">println</span>(entry.<span class="hljs-built_in">name</span>());
    entry.<span class="hljs-built_in">close</span>();
  }
  root.<span class="hljs-built_in">close</span>();

  <span class="hljs-comment">// === ç¬¬äºŒæ­¥ï¼šé…ç½®å¹¶åˆå§‹åŒ–I2S ===</span>
  <span class="hljs-built_in">Serial</span>.<span class="hljs-built_in">print</span>(<span class="hljs-string">"é…ç½®I2SéŸ³é¢‘æ¥å£..."</span>);
  <span class="hljs-keyword">auto</span> config = i2s.<span class="hljs-built_in">defaultConfig</span>();
  config.pin_data = I2S_DIN_PIN;
  config.pin_bck = I2S_BCLK_PIN;
  config.pin_ws = I2S_LRC_PIN;
  config.sample_rate = <span class="hljs-number">44100</span>; <span class="hljs-comment">// åˆå§‹é‡‡æ ·ç‡ï¼Œè§£ç åä¼šæ ¹æ®æ–‡ä»¶è‡ªåŠ¨è°ƒæ•´</span>
  config.bits_per_sample = <span class="hljs-number">16</span>;
  config.channels = <span class="hljs-number">2</span>;
  config.i2s_format = I2S_STD_FORMAT;
  <span class="hljs-comment">// config.buffer_size = 1024; // è‹¥å‡ºç°çˆ†éŸ³å¯å°è¯•å¢å¤§</span>
  <span class="hljs-comment">// config.buffer_count = 8;</span>

  <span class="hljs-keyword">if</span> (!i2s.<span class="hljs-built_in">begin</span>(config)) {
    <span class="hljs-built_in">Serial</span>.<span class="hljs-built_in">println</span>(<span class="hljs-string">"I2Såˆå§‹åŒ–å¤±è´¥ï¼è¯·æ£€æŸ¥å¼•è„šã€‚"</span>);
    <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>);
  }
  <span class="hljs-built_in">Serial</span>.<span class="hljs-built_in">println</span>(<span class="hljs-string">"æˆåŠŸï¼"</span>);

  <span class="hljs-comment">// === ç¬¬ä¸‰æ­¥ï¼šå°è¯•æ‰“å¼€å¹¶è§£ç éŸ³é¢‘æ–‡ä»¶ ===</span>
  <span class="hljs-built_in">Serial</span>.<span class="hljs-built_in">printf</span>(<span class="hljs-string">"å°è¯•æ‰“å¼€æ–‡ä»¶: %s\n"</span>, audioFilePath);
  
  <span class="hljs-keyword">if</span> (!file.<span class="hljs-built_in">begin</span>(audioFilePath)) {
    <span class="hljs-built_in">Serial</span>.<span class="hljs-built_in">println</span>(<span class="hljs-string">"æ–‡ä»¶æ‰“å¼€å¤±è´¥ï¼è¯·æ£€æŸ¥è·¯å¾„å’Œæ–‡ä»¶åã€‚"</span>);
    <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>);
  }

  <span class="hljs-comment">// è®¾ç½®è§£ç å™¨è¾“å‡ºä¿¡æ¯å›è°ƒï¼ˆå¯é€‰ï¼‰</span>
  decoder.<span class="hljs-built_in">setInfoCallback</span>(printAudioInfo);
  
  <span class="hljs-built_in">Serial</span>.<span class="hljs-built_in">println</span>(<span class="hljs-string">"å¼€å§‹è§£ç å¹¶æ’­æ”¾..."</span>);
  decoder.<span class="hljs-built_in">begin</span>();

  <span class="hljs-comment">// å¯é€‰ï¼šè®¾ç½®éŸ³é‡ï¼ˆ0.0é™éŸ³ ~ 1.0æœ€å¤§ï¼‰</span>
  <span class="hljs-comment">// i2s.setVolume(0.7);</span>
}

<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">loop</span><span class="hljs-params">()</span> </span>{
  <span class="hljs-comment">// æ ¸å¿ƒï¼šå°†æ–‡ä»¶æ•°æ®å¤åˆ¶åˆ°è§£ç å™¨ï¼Œå†é€è‡³I2S</span>
  <span class="hljs-keyword">if</span> (copier.<span class="hljs-built_in">copy</span>()) {
    <span class="hljs-comment">// æ•°æ®æ­£åœ¨ç¨³å®šä¼ è¾“ä¸­ï¼Œå¯ä»¥åœ¨æ­¤æ·»åŠ æ’­æ”¾çŠ¶æ€æŒ‡ç¤ºï¼ˆå¦‚ç‚¹äº®LEDï¼‰</span>
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// æ’­æ”¾ç»“æŸæˆ–å‘ç”Ÿé”™è¯¯</span>
    <span class="hljs-built_in">Serial</span>.<span class="hljs-built_in">println</span>(<span class="hljs-string">"æ’­æ”¾ç»“æŸã€‚"</span>);
    
    <span class="hljs-comment">// ç®€å•ç¤ºä¾‹ï¼šç­‰å¾…3ç§’åé‡æ–°æ’­æ”¾</span>
    <span class="hljs-built_in">delay</span>(<span class="hljs-number">3000</span>);
    <span class="hljs-built_in">Serial</span>.<span class="hljs-built_in">println</span>(<span class="hljs-string">"é‡æ–°æ’­æ”¾..."</span>);
    
    <span class="hljs-comment">// é‡ç½®æ–‡ä»¶æµåˆ°å¼€å§‹ä½ç½®</span>
    file.<span class="hljs-built_in">begin</span>(audioFilePath);
    decoder.<span class="hljs-built_in">begin</span>();
  }
  
  <span class="hljs-comment">// å¯ä»¥åœ¨æ­¤å¤„åŠ å…¥å…¶ä»–æ§åˆ¶é€»è¾‘ï¼Œå¦‚æŒ‰é”®æ£€æµ‹åˆ‡æ¢æ­Œæ›²</span>
}
</code></pre>
<h4 data-id="heading-9">ğŸš€ å¦‚ä½•è¿è¡Œ</h4>
<ol>
<li><strong>å‡†å¤‡SDå¡</strong>ï¼šæ ¼å¼åŒ–ä¸ºFAT32ï¼Œå°†è½¬æ¢å¥½çš„16ä½ã€å•å£°é“/ç«‹ä½“å£°ã€44100Hzçš„WAVæ–‡ä»¶ï¼ˆå¦‚Â <code>test.wav</code>ï¼‰å¤åˆ¶åˆ°<strong>æ ¹ç›®å½•</strong>ã€‚</li>
<li><strong>è¿æ¥ç¡¬ä»¶</strong>ï¼šæŒ‰ä¸Šè¿°è¡¨æ ¼è¿æ¥å¥½æ‰€æœ‰çº¿è·¯ï¼Œ<strong>ä»”ç»†æ£€æŸ¥ç”µæºå’Œåœ°çº¿</strong>ã€‚</li>
<li><strong>ä¸Šä¼ ä»£ç </strong>ï¼šåœ¨VS Codeä¸­ï¼Œç‚¹å‡»PlatformIOåº•éƒ¨çš„Â <strong>âœ”ï¸ï¼ˆç¼–è¯‘ï¼‰</strong> ï¼Œç„¶åç‚¹å‡»Â <strong>â¡ï¸ï¼ˆä¸Šä¼ ï¼‰</strong> Â æŒ‰é’®ã€‚</li>
<li><strong>æŸ¥çœ‹æ—¥å¿—</strong>ï¼šæ‰“å¼€ä¸²å£ç›‘è§†å™¨ï¼ˆæ³¢ç‰¹ç‡115200ï¼‰ï¼ŒæŸ¥çœ‹åˆå§‹åŒ–çŠ¶æ€å’Œæ’­æ”¾ä¿¡æ¯ã€‚</li>
</ol>
<h2 data-id="heading-10">æ¥å…¥ INMP 441 éº¦å…‹é£</h2>
<p>å°†Â <strong>INMP441</strong>Â æ•°å­—éº¦å…‹é£æ¨¡å—è¿æ¥åˆ°Â <strong>ESP32</strong>Â æ˜¯è¿›è¡Œé«˜è´¨é‡éŸ³é¢‘é‡‡é›†çš„ç»å…¸æ–¹æ¡ˆã€‚INMP441 æ˜¯ä¸€æ¬¾é€šè¿‡Â <strong>I2S æ¥å£</strong>Â è¾“å‡ºçš„åº•éƒ¨è¿›éŸ³ MEMS éº¦å…‹é£ï¼Œä¸ ESP32 çš„ I2S å¤–è®¾å®Œç¾å…¼å®¹ã€‚</p>
<h4 data-id="heading-11">ğŸ”Œ ç¡¬ä»¶è¿æ¥</h4>
<p>INMP441 éœ€è¦æ ‡å‡†çš„ I2S è¿æ¥ï¼Œä½†ä¸ä¹‹å‰çš„ MAX98357ï¼ˆä»è®¾å¤‡ï¼‰ä¸åŒï¼Œ<strong>INMP441 å·¥ä½œåœ¨â€œä¸»æ¨¡å¼â€</strong> ï¼Œè¿™æ„å‘³ç€å®ƒè´Ÿè´£ç”Ÿæˆä¸»æ—¶é’Ÿï¼ˆBCLKï¼‰å’Œå·¦å³æ—¶é’Ÿï¼ˆLRCLKï¼‰ã€‚å› æ­¤ï¼Œè¿æ¥æ–¹å¼æœ‰ç‰¹å®šè¦æ±‚ã€‚</p>
<p>è¯·æŒ‰ä»¥ä¸‹è¡¨æ ¼è¿æ¥ï¼ˆè¿™æ˜¯æœ€å¸¸è§çš„æ¥æ³•ï¼‰ï¼š</p>








































<table><thead><tr><th>ESP32 GPIO å¼•è„š</th><th>INMP441 æ¨¡å—å¼•è„š</th><th>ä¿¡å·è¯´æ˜</th></tr></thead><tbody><tr><td><strong>3.3V</strong></td><td><strong>VDD</strong></td><td>ç”µæº (<strong>å¿…é¡»ä¸º 3.3V</strong>ï¼Œ5Vä¼šæŸåéº¦å…‹é£)</td></tr><tr><td><strong>GND</strong></td><td><strong>GND</strong></td><td>æ¥åœ°</td></tr><tr><td><strong>GPIO 32</strong>Â (æˆ–å…¶å®ƒ)</td><td><strong>SD</strong></td><td><strong>ä¸²è¡Œæ•°æ®è¾“å‡º</strong>Â (æ•°æ®çº¿ï¼Œä»éº¦å…‹é£åˆ°ESP32)</td></tr><tr><td><strong>GPIO 14</strong></td><td><strong>WS</strong></td><td><strong>å­—é€‰æ‹© (å·¦å³å£°é“æ—¶é’Ÿ)</strong> ï¼Œ<strong>ç”±éº¦å…‹é£è¾“å‡ºç»™ESP32</strong></td></tr><tr><td><strong>GPIO 15</strong></td><td><strong>SCK</strong></td><td><strong>ä¸²è¡Œæ—¶é’Ÿ (ä½æ—¶é’Ÿ)</strong> ï¼Œ<strong>ç”±éº¦å…‹é£è¾“å‡ºç»™ESP32</strong></td></tr><tr><td>(å¯é€‰)Â <strong>GPIO 13</strong></td><td><strong>L/R</strong></td><td>å£°é“é€‰æ‹©ã€‚<strong>æ¥GNDä¸ºå·¦å£°é“ï¼Œæ¥VDDä¸ºå³å£°é“</strong>ã€‚é€šå¸¸æ‚¬ç©ºæˆ–æ¥åœ°å³å¯ã€‚</td></tr></tbody></table>
<blockquote>
<p><strong>å…³é”®è¯´æ˜</strong>ï¼š</p>
<ol>
<li><strong>æ—¶é’Ÿæ–¹å‘</strong>ï¼šINMP441 æ˜¯â€œä¸»è®¾å¤‡â€ï¼Œ<strong>SCK</strong>Â å’ŒÂ <strong>WS</strong>Â æ˜¯å®ƒçš„<strong>è¾“å‡º</strong>ï¼Œå¿…é¡»è¿æ¥åˆ° ESP32 çš„å¯¹åº” I2S è¾“å…¥å¼•è„šã€‚ESP32 åœ¨æ­¤é…ç½®ä¸­ä½œä¸ºâ€œä»è®¾å¤‡â€æ¥æ”¶æ—¶é’Ÿå’Œæ•°æ®ã€‚</li>
<li><strong>å¼•è„šçµæ´»æ€§</strong>ï¼šä¸Šè¡¨ä¸­çš„ GPIO 32ã€14ã€15 æ˜¯ ESP32 çš„é»˜è®¤ I2S ä»è®¾å¤‡æ¥æ”¶å¼•è„šï¼Œæ¨èä½¿ç”¨ã€‚ç†è®ºä¸Šå…¶ä»–æ”¯æŒ I2S çš„å¼•è„šä¹Ÿå¯ç”¨ï¼Œä½†éœ€è¦ä¿®æ”¹ä»£ç çš„å¼•è„šæ˜ å°„ã€‚</li>
<li><strong>ç”µæº</strong>ï¼šåŠ¡å¿…ä½¿ç”¨ 3.3V ä¾›ç”µã€‚</li>
</ol>
</blockquote>
<h4 data-id="heading-12">ğŸ“¦ PlatformIO é…ç½® (<code>platformio.ini</code>)</h4>
<p>ç»§ç»­ä½¿ç”¨å¼ºå¤§çš„Â <code>AudioTools</code>Â åº“ï¼Œå®ƒåŒæ ·ç®€åŒ–äº†å½•éŸ³æµç¨‹ã€‚</p>
<p>ini</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-section">[env:esp32-dev]</span>
<span class="hljs-attr">platform</span> = espressif32
<span class="hljs-attr">board</span> = esp32dev
<span class="hljs-attr">framework</span> = ardui<span class="hljs-literal">no</span>
<span class="hljs-attr">monitor_speed</span> = <span class="hljs-number">115200</span>

<span class="hljs-attr">lib_deps</span> = 
    pschatzmann/ESP32-AudioTools @ ^1.0.8
    pschatzmann/arduino-audio-tools @ ^1.1.9
</code></pre>
<h4 data-id="heading-13">ğŸ’» åŸºç¡€å½•éŸ³ä¸ä¸²å£ç»˜å›¾ç¨‹åº (<code>src/main.cpp</code>)</h4>
<p>ä»¥ä¸‹ä»£ç å°†åˆå§‹åŒ– INMP441ï¼Œè¿ç»­é‡‡é›†éŸ³é¢‘æ•°æ®ï¼Œå¹¶å°†åŸå§‹æ•°æ®é€šè¿‡ä¸²å£å‘é€ã€‚ä½ å¯ä»¥ç”¨ Arduino IDE æˆ– PlatformIO çš„ä¸²å£ç»˜å›¾å™¨æŸ¥çœ‹æ³¢å½¢ã€‚</p>
<p>cpp</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-comment">/**
 * ESP32 + INMP441 åŸºç¡€å½•éŸ³æµ‹è¯•
 * å°†éŸ³é¢‘åŸå§‹æ•°æ®é€šè¿‡ä¸²å£è¾“å‡ºï¼Œå¯ç”¨äºç»˜å›¾å™¨æŸ¥çœ‹æ³¢å½¢
 */</span>

<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;Arduino.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">"AudioTools.h"</span></span>

<span class="hljs-comment">// ==================== é…ç½® ====================</span>
<span class="hljs-comment">// å®šä¹‰I2Så¼•è„š (æ ¹æ®ä½ çš„å®é™…è¿æ¥è°ƒæ•´ï¼)</span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> I2S_SD_IN   32  <span class="hljs-comment">// INMP441çš„SD -&gt; ESP32çš„GPIO 32</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> I2S_WS_IN   14  <span class="hljs-comment">// INMP441çš„WS -&gt; ESP32çš„GPIO 14</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> I2S_SCK_IN  15  <span class="hljs-comment">// INMP441çš„SCK -&gt; ESP32çš„GPIO 15</span></span>

<span class="hljs-comment">// å®šä¹‰éŸ³é¢‘å‚æ•°</span>
<span class="hljs-type">const</span> <span class="hljs-type">int</span> sampleRate = <span class="hljs-number">44100</span>; <span class="hljs-comment">// é‡‡æ ·ç‡ (Hz)</span>
<span class="hljs-type">const</span> <span class="hljs-type">int</span> bufferSize = <span class="hljs-number">1024</span>;   <span class="hljs-comment">// ç¼“å†²åŒºå¤§å°</span>

<span class="hljs-comment">// åˆ›å»ºI2Sæµå¯¹è±¡ç”¨äºè¾“å…¥ï¼ˆå½•éŸ³ï¼‰</span>
I2SStream i2sInput;
<span class="hljs-type">int16_t</span> buffer[bufferSize]; <span class="hljs-comment">// ç”¨äºå­˜å‚¨éŸ³é¢‘æ ·æœ¬çš„ç¼“å†²åŒºï¼ˆ16ä½æœ‰ç¬¦å·æ•´æ•°ï¼‰</span>

<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">printAudioInfo</span><span class="hljs-params">(AudioInfo info)</span> </span>{
  <span class="hljs-built_in">Serial</span>.<span class="hljs-built_in">println</span>(<span class="hljs-string">"=== I2Séº¦å…‹é£åˆå§‹åŒ–æˆåŠŸ ==="</span>);
  <span class="hljs-built_in">Serial</span>.<span class="hljs-built_in">printf</span>(<span class="hljs-string">"é‡‡æ ·ç‡: %d Hz\n"</span>, info.sample_rate);
  <span class="hljs-built_in">Serial</span>.<span class="hljs-built_in">printf</span>(<span class="hljs-string">"å£°é“æ•°: %d\n"</span>, info.channels);
  <span class="hljs-built_in">Serial</span>.<span class="hljs-built_in">printf</span>(<span class="hljs-string">"ä½æ·±åº¦: %d-bit\n"</span>, info.bits_per_sample);
  <span class="hljs-built_in">Serial</span>.<span class="hljs-built_in">println</span>(<span class="hljs-string">"å¼€å§‹é‡‡é›†éŸ³é¢‘..."</span>);
  <span class="hljs-built_in">Serial</span>.<span class="hljs-built_in">println</span>(<span class="hljs-string">"æ‰“å¼€ä¸²å£ç»˜å›¾å™¨(Tools -&gt; Serial Plotter)æŸ¥çœ‹æ³¢å½¢ã€‚"</span>);
}

<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">setup</span><span class="hljs-params">()</span> </span>{
  <span class="hljs-built_in">Serial</span>.<span class="hljs-built_in">begin</span>(<span class="hljs-number">115200</span>);
  <span class="hljs-keyword">while</span> (!<span class="hljs-built_in">Serial</span>);
  <span class="hljs-built_in">delay</span>(<span class="hljs-number">500</span>);

  <span class="hljs-built_in">Serial</span>.<span class="hljs-built_in">println</span>(<span class="hljs-string">"å¯åŠ¨ INMP441 éº¦å…‹é£æµ‹è¯•..."</span>);

  <span class="hljs-comment">// é…ç½®I2Sè¾“å…¥å‚æ•°</span>
  <span class="hljs-keyword">auto</span> i2sConfig = i2sInput.<span class="hljs-built_in">defaultConfig</span>(RX_MODE);
  i2sConfig.pin_data = I2S_SD_IN;
  i2sConfig.pin_ws = I2S_WS_IN;
  i2sConfig.pin_bck = I2S_SCK_IN;
  i2sConfig.sample_rate = sampleRate;
  i2sConfig.bits_per_sample = <span class="hljs-number">16</span>;
  i2sConfig.channels = <span class="hljs-number">1</span>;          <span class="hljs-comment">// INMP441 å•å£°é“</span>
  i2sConfig.i2s_format = I2S_STD_FORMAT;
  i2sConfig.is_master = <span class="hljs-literal">false</span>;     <span class="hljs-comment">// ESP32 ä½œä¸ºä»è®¾å¤‡ï¼Œä½¿ç”¨éº¦å…‹é£æä¾›çš„æ—¶é’Ÿï¼</span>
  i2sConfig.port_no = <span class="hljs-number">0</span>;           <span class="hljs-comment">// ä½¿ç”¨I2Sç«¯å£0</span>

  <span class="hljs-comment">// å¼€å§‹I2Sè¾“å…¥</span>
  <span class="hljs-keyword">if</span> (!i2sInput.<span class="hljs-built_in">begin</span>(i2sConfig)) {
    <span class="hljs-built_in">Serial</span>.<span class="hljs-built_in">println</span>(<span class="hljs-string">"é”™è¯¯ï¼šI2Séº¦å…‹é£åˆå§‹åŒ–å¤±è´¥ï¼è¯·æ£€æŸ¥æ¥çº¿å’Œå¼•è„šå®šä¹‰ã€‚"</span>);
    <span class="hljs-keyword">while</span> (<span class="hljs-number">1</span>); <span class="hljs-comment">// åœæ­¢</span>
  }
  <span class="hljs-built_in">printAudioInfo</span>(i2sInput.<span class="hljs-built_in">audioInfo</span>());
}

<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">loop</span><span class="hljs-params">()</span> </span>{
  <span class="hljs-comment">// ä»I2Sæµè¯»å–ä¸€å¸§éŸ³é¢‘æ•°æ®åˆ°ç¼“å†²åŒº</span>
  <span class="hljs-type">size_t</span> numSamplesRead = i2sInput.<span class="hljs-built_in">readBytes</span>((<span class="hljs-type">uint8_t</span>*)buffer, <span class="hljs-built_in">sizeof</span>(buffer));

  <span class="hljs-comment">// å°†è¯»å–åˆ°çš„æ¯ä¸ª16ä½æ ·æœ¬é€šè¿‡ä¸²å£å‘é€ï¼Œç”¨äºç»˜å›¾</span>
  <span class="hljs-comment">// æ³¨æ„ï¼šå¯¹äºä¸²å£ç»˜å›¾å™¨ï¼Œä¸€æ¬¡åªéœ€å‘é€ä¸€ä¸ªå€¼ï¼ˆå•å£°é“ï¼‰</span>
  <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; numSamplesRead / <span class="hljs-built_in">sizeof</span>(<span class="hljs-type">int16_t</span>); i++) {
    <span class="hljs-built_in">Serial</span>.<span class="hljs-built_in">println</span>(buffer[i]); <span class="hljs-comment">// å°†æ ·æœ¬å€¼ç›´æ¥æ‰“å°</span>
  }
  <span class="hljs-comment">// æ³¨æ„ï¼šé«˜é‡‡æ ·ç‡ä¸‹ï¼ŒSerial.printå¯èƒ½æˆä¸ºç“¶é¢ˆï¼Œæ­¤ä»£ç ä»…ç”¨äºæ¼”ç¤ºã€‚</span>
  <span class="hljs-comment">// å®é™…åº”ç”¨æ—¶åº”å¤„ç†æˆ–å­˜å‚¨æ•°æ®ï¼Œè€Œéå…¨éƒ¨æ‰“å°ã€‚</span>
}
</code></pre>
<h4 data-id="heading-14">ğŸ”¬ å¦‚ä½•æµ‹è¯•ä¸éªŒè¯</h4>
<ol>
<li><strong>ä¸Šä¼ ä»£ç </strong>ï¼šç¡®ä¿æ¥çº¿æ­£ç¡®åï¼Œç¼–è¯‘å¹¶ä¸Šä¼ ä»£ç åˆ° ESP32ã€‚</li>
<li><strong>æ‰“å¼€ä¸²å£ç›‘è§†å™¨</strong>ï¼šæ³¢ç‰¹ç‡è®¾ä¸º115200ï¼ŒæŸ¥çœ‹åˆå§‹åŒ–ä¿¡æ¯ã€‚</li>
<li><strong>æ‰“å¼€ä¸²å£ç»˜å›¾å™¨</strong>ï¼šåœ¨ PlatformIO æˆ– Arduino IDE ä¸­ï¼Œæ‰¾åˆ°Â <strong>Serial Plotter</strong>Â åŠŸèƒ½å¹¶æ‰“å¼€ã€‚ä½ åº”è¯¥èƒ½çœ‹åˆ°éšç¯å¢ƒå£°éŸ³å˜åŒ–çš„å®æ—¶æ³¢å½¢å›¾ã€‚å¯¹ç€éº¦å…‹é£è¯´è¯æˆ–åˆ¶é€ å£°éŸ³ï¼Œè§‚å¯Ÿæ³¢å½¢å˜åŒ–ã€‚</li>
</ol>
<h4 data-id="heading-15">ğŸ“ è¿›é˜¶åº”ç”¨ï¼šå°†å½•éŸ³ä¿å­˜åˆ° SD å¡ï¼ˆWAVæ ¼å¼ï¼‰</h4>
<p>å½•åˆ¶éŸ³é¢‘å¹¶ä¿å­˜æ˜¯å¸¸è§éœ€æ±‚ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€åŒ–çš„æ¡†æ¶ï¼Œå±•ç¤ºå¦‚ä½•å°†Â <code>AudioTools</code>Â åº“çš„å½•éŸ³æ•°æ®é€šè¿‡Â <code>WAVEncoder</code>Â ä¿å­˜ä¸º WAV æ–‡ä»¶åˆ° SD å¡ã€‚</p>
<blockquote>
<p><strong>å‰æ</strong>ï¼šä½ å·²ç»æŒ‰ä¹‹å‰æŒ‡å—æ¥å¥½ SD å¡æ¨¡å—å¹¶å®‰è£…äº†æ‰€éœ€åº“ã€‚</p>
</blockquote>
<p>cpp</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-comment">// æ³¨æ„ï¼šæ­¤ä¸ºé«˜çº§ç¤ºä¾‹æ¡†æ¶ï¼Œå¯èƒ½éœ€è¦è°ƒæ•´æ‰èƒ½å®Œå…¨è¿è¡Œ</span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;Arduino.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">"AudioTools.h"</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">"AudioLibs/AudioSourceSD.h"</span> <span class="hljs-comment">// ç”¨äºSDå¡å†™å…¥</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">"AudioCodecs/CodecWAV.h"</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;SD.h&gt;</span></span>

<span class="hljs-comment">// ... å¼•è„šå®šä¹‰å’ŒI2Sè¾“å…¥é…ç½®ä¸ä¸Šæ–‡ç›¸åŒ ...</span>

<span class="hljs-function">SDStream <span class="hljs-title">sd_out</span><span class="hljs-params">(<span class="hljs-number">5</span>)</span></span>; <span class="hljs-comment">// SDå¡CSå¼•è„šä¸º5</span>
WAVEncoder wav_enc;
<span class="hljs-function">EncodedAudioStream <span class="hljs-title">encoder</span><span class="hljs-params">(&amp;sd_out, &amp;wav_enc)</span></span>; <span class="hljs-comment">// å°†WAVç¼–ç æµæŒ‡å‘SDå¡</span>
<span class="hljs-function">StreamCopy <span class="hljs-title">copier</span><span class="hljs-params">(encoder, i2sInput)</span></span>; <span class="hljs-comment">// å°†I2Sè¾“å…¥å¤åˆ¶åˆ°ç¼–ç å™¨</span>

<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">setup</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-comment">// ... åˆå§‹åŒ–ä¸²å£ã€SDå¡ã€I2Sè¾“å…¥ ...</span>
    <span class="hljs-comment">// åˆå§‹åŒ–SDå¡è¾“å‡ºæµ</span>
    <span class="hljs-keyword">if</span> (!<span class="hljs-built_in">SD</span>.<span class="hljs-built_in">begin</span>(<span class="hljs-number">5</span>)) { <span class="hljs-comment">/* é”™è¯¯å¤„ç† */</span> }
    sd_out.<span class="hljs-built_in">begin</span>(<span class="hljs-string">"/recording.wav"</span>, FILE_WRITE); <span class="hljs-comment">// æ‰“å¼€æ–‡ä»¶</span>
    encoder.<span class="hljs-built_in">begin</span>(i2sInput.<span class="hljs-built_in">audioInfo</span>()); <span class="hljs-comment">// ä»¥è¾“å…¥éŸ³é¢‘å‚æ•°å¼€å§‹ç¼–ç </span>
    wav_enc.<span class="hljs-built_in">begin</span>(encoder); <span class="hljs-comment">// å¼€å§‹WAVç¼–ç </span>
    <span class="hljs-built_in">Serial</span>.<span class="hljs-built_in">println</span>(<span class="hljs-string">"å¼€å§‹å½•éŸ³åˆ°SDå¡..."</span>);
}

<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">loop</span><span class="hljs-params">()</span> </span>{
    copier.<span class="hljs-built_in">copy</span>(); <span class="hljs-comment">// æŒç»­å½•éŸ³</span>
    <span class="hljs-comment">// å¯ä»¥é€šè¿‡æŒ‰é’®æˆ–å…¶ä»–æ¡ä»¶è§¦å‘åœæ­¢å½•éŸ³ï¼šencoder.end(); sd_out.end();</span>
}
</code></pre>
<h4 data-id="heading-16">âš ï¸ å¸¸è§é—®é¢˜</h4>

























<table><thead><tr><th>é—®é¢˜</th><th>æ’æŸ¥è¦ç‚¹</th></tr></thead><tbody><tr><td><strong>æ²¡æœ‰æ•°æ®/å…¨æ˜¯å™ªå£°</strong></td><td>1.Â <strong>æ—¶é’Ÿæ¨¡å¼</strong>ï¼šç¡®è®¤Â <code>i2sConfig.is_master = false</code>ã€‚ 2.Â <strong>å¼•è„š</strong>ï¼šæœ€å¯èƒ½ï¼åå¤æ£€æŸ¥ SCK, WS, SD ä¸‰æ¡æ•°æ®çº¿æ˜¯å¦æ¥å¯¹ã€‚ 3.Â <strong>ç”µæº</strong>ï¼šç¡®ä¿æ˜¯Â <strong>3.3V</strong>ï¼Œä¸” GND å·²å…±åœ°ã€‚</td></tr><tr><td><strong>å£°éŸ³æ³¢å½¢å¾ˆå°</strong></td><td>INMP441 çµæ•åº¦è¾ƒé«˜ã€‚å°è¯•å¢å¤§å£°æºéŸ³é‡æˆ–è°ƒæ•´ä»£ç ä¸­çš„å¢ç›Šï¼ˆå¯å¯¹Â <code>buffer[i]</code>Â ä¹˜ä»¥ä¸€ä¸ªç³»æ•°åå†å‘é€ï¼‰ã€‚</td></tr><tr><td><strong>ç¼–è¯‘é”™è¯¯</strong></td><td>ç¡®ä¿Â <code>platformio.ini</code>Â ä¸­çš„Â <code>lib_deps</code>Â å·²æ­£ç¡®æ·»åŠ Â <code>AudioTools</code>Â åº“ã€‚</td></tr><tr><td><strong>ç¨‹åºè¿è¡Œä¸ç¨³å®š</strong></td><td>é™ä½é‡‡æ ·ç‡ï¼ˆå¦‚æ”¹ä¸º 16000 Hzï¼‰æˆ–å¢åŠ Â <code>bufferSize</code>ã€‚</td></tr></tbody></table>
<p>æˆåŠŸè¿æ¥å¹¶é‡‡é›†åˆ°éŸ³é¢‘æ•°æ®åï¼Œä½ å¯ä»¥å°†å…¶ç”¨äºè¯­éŸ³å”¤é†’ã€ç¯å¢ƒå£°åˆ†æã€å®æ—¶ä¼ è¾“æˆ–ä¸ä¹‹å‰çš„æ’­æ”¾åŠŸèƒ½ç»“åˆå®ç°å›éŸ³æ¶ˆé™¤ç­‰ã€‚å¦‚æœä½ åœ¨å…·ä½“å®ç°ä¸­é‡åˆ°é—®é¢˜ï¼Œå¯ä»¥æä¾›ä¸²å£è¾“å‡ºçš„é”™è¯¯ä¿¡æ¯ï¼Œä»¥ä¾¿è¿›ä¸€æ­¥è¯Šæ–­ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Vue3-æ’æ§½slot]]></title>    <link>https://juejin.cn/post/7587965800273182746</link>    <guid>https://juejin.cn/post/7587965800273182746</guid>    <pubDate>2025-12-26T13:47:59.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587965800273182746" data-draft-id="7588086766235516966" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Vue3-æ’æ§½slot"/> <meta itemprop="keywords" content="å‰ç«¯,Vue.js"/> <meta itemprop="datePublished" content="2025-12-26T13:47:59.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="YaeZed"/> <meta itemprop="url" content="https://juejin.cn/user/3977350021390107"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Vue3-æ’æ§½slot
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3977350021390107/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    YaeZed
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-26T13:47:59.000Z" title="Fri Dec 26 2025 13:47:59 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    5
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body .octicon{display:inline-block;fill:currentColor;vertical-align:text-bottom}.markdown-body .anchor{float:left;line-height:1;margin-left:-20px;padding-right:4px}.markdown-body .anchor:focus{outline:none}.markdown-body h1 .octicon-link,.markdown-body h2 .octicon-link,.markdown-body h3 .octicon-link,.markdown-body h4 .octicon-link,.markdown-body h5 .octicon-link,.markdown-body h6 .octicon-link{color:#1b1f23;vertical-align:middle;visibility:hidden}.markdown-body h1:hover .anchor,.markdown-body h2:hover .anchor,.markdown-body h3:hover .anchor,.markdown-body h4:hover .anchor,.markdown-body h5:hover .anchor,.markdown-body h6:hover .anchor{text-decoration:none}.markdown-body h1:hover .anchor .octicon-link,.markdown-body h2:hover .anchor .octicon-link,.markdown-body h3:hover .anchor .octicon-link,.markdown-body h4:hover .anchor .octicon-link,.markdown-body h5:hover .anchor .octicon-link,.markdown-body h6:hover .anchor .octicon-link{visibility:visible}.markdown-body h1:hover .anchor .octicon-link:before,.markdown-body h2:hover .anchor .octicon-link:before,.markdown-body h3:hover .anchor .octicon-link:before,.markdown-body h4:hover .anchor .octicon-link:before,.markdown-body h5:hover .anchor .octicon-link:before,.markdown-body h6:hover .anchor .octicon-link:before{width:16px;height:16px;content:" ";display:inline-block;background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' aria-hidden='true'%3E%3Cpath fill-rule='evenodd' d='M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z'/%3E%3C/svg%3E")}.markdown-body{-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;color:#24292e;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji;font-size:16px;line-height:1.5;word-wrap:break-word}.markdown-body details{display:block}.markdown-body summary{display:list-item}.markdown-body a{background-color:initial}.markdown-body a:active,.markdown-body a:hover{outline-width:0}.markdown-body strong{font-weight:inherit;font-weight:bolder}.markdown-body h1{margin:.67em 0}.markdown-body img{border-style:none}.markdown-body code,.markdown-body kbd,.markdown-body pre{font-family:monospace,monospace;font-size:1em}.markdown-body hr{box-sizing:initial;overflow:visible}.markdown-body input{font:inherit;margin:0;overflow:visible}.markdown-body [type=checkbox]{box-sizing:border-box;padding:0}.markdown-body *{box-sizing:border-box}.markdown-body input{font-family:inherit;font-size:inherit;line-height:inherit}.markdown-body a{color:#0366d6;text-decoration:none}.markdown-body a:hover{text-decoration:underline}.markdown-body strong{font-weight:600}.markdown-body hr{height:0;margin:15px 0;overflow:hidden;background:transparent;border-bottom:1px solid #dfe2e5}.markdown-body hr:after,.markdown-body hr:before{display:table;content:""}.markdown-body hr:after{clear:both}.markdown-body table{border-spacing:0;border-collapse:collapse}.markdown-body td,.markdown-body th{padding:0}.markdown-body details summary{cursor:pointer}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin-top:0;margin-bottom:0}.markdown-body h1{font-size:32px}.markdown-body h1,.markdown-body h2{font-weight:600}.markdown-body h2{font-size:24px}.markdown-body h3{font-size:20px}.markdown-body h3,.markdown-body h4{font-weight:600}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:14px}.markdown-body h5,.markdown-body h6{font-weight:600}.markdown-body h6{font-size:12px}.markdown-body p{margin-top:0;margin-bottom:10px}.markdown-body blockquote{margin:0}.markdown-body ol,.markdown-body ul{padding-left:0;margin-top:0;margin-bottom:0}.markdown-body ol ol,.markdown-body ul ol{list-style-type:lower-roman}.markdown-body ol ol ol,.markdown-body ol ul ol,.markdown-body ul ol ol,.markdown-body ul ul ol{list-style-type:lower-alpha}.markdown-body dd{margin-left:0}.markdown-body code,.markdown-body pre{font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:12px}.markdown-body pre{margin-top:0;margin-bottom:0}.markdown-body input::-webkit-inner-spin-button,.markdown-body input::-webkit-outer-spin-button{margin:0;-webkit-appearance:none;appearance:none}.markdown-body :checked+.radio-label{position:relative;z-index:1;border-color:#0366d6}.markdown-body .border{border:1px solid #e1e4e8!important}.markdown-body .border-0{border:0!important}.markdown-body .border-bottom{border-bottom:1px solid #e1e4e8!important}.markdown-body .rounded-1{border-radius:3px!important}.markdown-body .bg-white{background-color:#fff!important}.markdown-body .bg-gray-light{background-color:#fafbfc!important}.markdown-body .text-gray-light{color:#6a737d!important}.markdown-body .pl-3,.markdown-body .px-3{padding-left:16px!important}.markdown-body .px-3{padding-right:16px!important}.markdown-body .f6{font-size:12px!important}.markdown-body .lh-condensed{line-height:1.25!important}.markdown-body .text-bold{font-weight:600!important}.markdown-body .pl-c{color:#6a737d}.markdown-body .pl-c1,.markdown-body .pl-s .pl-v{color:#005cc5}.markdown-body .pl-e,.markdown-body .pl-en{color:#6f42c1}.markdown-body .pl-s .pl-s1,.markdown-body .pl-smi{color:#24292e}.markdown-body .pl-ent{color:#22863a}.markdown-body .pl-k{color:#d73a49}.markdown-body .pl-pds,.markdown-body .pl-s,.markdown-body .pl-s .pl-pse .pl-s1,.markdown-body .pl-sr,.markdown-body .pl-sr .pl-cce,.markdown-body .pl-sr .pl-sra,.markdown-body .pl-sr .pl-sre{color:#032f62}.markdown-body .pl-smw,.markdown-body .pl-v{color:#e36209}.markdown-body .pl-bu{color:#b31d28}.markdown-body .pl-ii{color:#fafbfc;background-color:#b31d28}.markdown-body .pl-c2{color:#fafbfc;background-color:#d73a49}.markdown-body .pl-c2:before{content:"^M"}.markdown-body .pl-sr .pl-cce{font-weight:700;color:#22863a}.markdown-body .pl-ml{color:#735c0f}.markdown-body .pl-mh,.markdown-body .pl-mh .pl-en,.markdown-body .pl-ms{font-weight:700;color:#005cc5}.markdown-body .pl-mi{font-style:italic;color:#24292e}.markdown-body .pl-mb{font-weight:700;color:#24292e}.markdown-body .pl-md{color:#b31d28;background-color:#ffeef0}.markdown-body .pl-mi1{color:#22863a;background-color:#f0fff4}.markdown-body .pl-mc{color:#e36209;background-color:#ffebda}.markdown-body .pl-mi2{color:#f6f8fa;background-color:#005cc5}.markdown-body .pl-mdr{font-weight:700;color:#6f42c1}.markdown-body .pl-ba{color:#586069}.markdown-body .pl-sg{color:#959da5}.markdown-body .pl-corl{text-decoration:underline;color:#032f62}.markdown-body .mb-0{margin-bottom:0!important}.markdown-body .my-2{margin-bottom:8px!important;margin-top:8px!important}.markdown-body .pl-0{padding-left:0!important}.markdown-body .py-0{padding-top:0!important;padding-bottom:0!important}.markdown-body .pl-1{padding-left:4px!important}.markdown-body .pl-2{padding-left:8px!important}.markdown-body .py-2{padding-top:8px!important;padding-bottom:8px!important}.markdown-body .pl-3{padding-left:16px!important}.markdown-body .pl-4{padding-left:24px!important}.markdown-body .pl-5{padding-left:32px!important}.markdown-body .pl-6{padding-left:40px!important}.markdown-body .pl-7{padding-left:48px!important}.markdown-body .pl-8{padding-left:64px!important}.markdown-body .pl-9{padding-left:80px!important}.markdown-body .pl-10{padding-left:96px!important}.markdown-body .pl-11{padding-left:112px!important}.markdown-body .pl-12{padding-left:128px!important}.markdown-body hr{border-bottom-color:#eee}.markdown-body kbd{display:inline-block;padding:3px 5px;font:11px SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;line-height:10px;color:#444d56;vertical-align:middle;background-color:#fafbfc;border:1px solid #d1d5da;border-radius:3px;box-shadow:inset 0 -1px 0 #d1d5da}.markdown-body:after,.markdown-body:before{display:table;content:""}.markdown-body:after{clear:both}.markdown-body&gt;:first-child{margin-top:0!important}.markdown-body&gt;:last-child{margin-bottom:0!important}.markdown-body a:not([href]){color:inherit;text-decoration:none}.markdown-body blockquote,.markdown-body details,.markdown-body dl,.markdown-body ol,.markdown-body p,.markdown-body pre,.markdown-body table,.markdown-body ul{margin-top:0;margin-bottom:16px}.markdown-body hr{height:.25em;padding:0;margin:24px 0;background-color:#e1e4e8;border:0}.markdown-body blockquote{padding:0 1em;color:#6a737d;border-left:.25em solid #dfe2e5}.markdown-body blockquote&gt;:first-child{margin-top:0}.markdown-body blockquote&gt;:last-child{margin-bottom:0}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin-top:24px;margin-bottom:16px;font-weight:600;line-height:1.25}.markdown-body h1{font-size:2em}.markdown-body h1,.markdown-body h2{padding-bottom:.3em;border-bottom:1px solid #eaecef}.markdown-body h2{font-size:1.5em}.markdown-body h3{font-size:1.25em}.markdown-body h4{font-size:1em}.markdown-body h5{font-size:.875em}.markdown-body h6{font-size:.85em;color:#6a737d}.markdown-body ol,.markdown-body ul{padding-left:2em}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:0;margin-bottom:0}.markdown-body li{word-wrap:break-all}.markdown-body li&gt;p{margin-top:16px}.markdown-body li+li{margin-top:.25em}.markdown-body dl{padding:0}.markdown-body dl dt{padding:0;margin-top:16px;font-size:1em;font-style:italic;font-weight:600}.markdown-body dl dd{padding:0 16px;margin-bottom:16px}.markdown-body table{display:block;width:100%;overflow:auto}.markdown-body table th{font-weight:600}.markdown-body table td,.markdown-body table th{padding:6px 13px;border:1px solid #dfe2e5}.markdown-body table tr{background-color:#fff;border-top:1px solid #c6cbd1}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}.markdown-body img{max-width:100%;box-sizing:initial;background-color:#fff}.markdown-body img[align=right]{padding-left:20px}.markdown-body img[align=left]{padding-right:20px}.markdown-body code{padding:.2em .4em;margin:0;font-size:85%;background-color:rgba(27,31,35,.05);border-radius:3px}.markdown-body pre{word-wrap:normal}.markdown-body pre&gt;code{padding:0;margin:0;font-size:100%;word-break:normal;white-space:pre;background:transparent;border:0}.markdown-body .highlight{margin-bottom:16px}.markdown-body .highlight pre{margin-bottom:0;word-break:normal}.markdown-body .highlight pre,.markdown-body pre{padding:16px;overflow:auto;font-size:85%;line-height:1.45;background-color:#f6f8fa;border-radius:3px}.markdown-body pre code{display:inline;max-width:auto;padding:0;margin:0;overflow:visible;line-height:inherit;word-wrap:normal;background-color:initial;border:0}.markdown-body .commit-tease-sha{display:inline-block;font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:90%;color:#444d56}.markdown-body .full-commit .btn-outline:not(:disabled):hover{color:#005cc5;border-color:#005cc5}.markdown-body .blob-wrapper{overflow-x:auto;overflow-y:hidden}.markdown-body .blob-wrapper-embedded{max-height:240px;overflow-y:auto}.markdown-body .blob-num{width:1%;min-width:50px;padding-right:10px;padding-left:10px;font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:12px;line-height:20px;color:rgba(27,31,35,.3);text-align:right;white-space:nowrap;vertical-align:top;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.markdown-body .blob-num:hover{color:rgba(27,31,35,.6)}.markdown-body .blob-num:before{content:attr(data-line-number)}.markdown-body .blob-code{position:relative;padding-right:10px;padding-left:10px;line-height:20px;vertical-align:top}.markdown-body .blob-code-inner{overflow:visible;font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:12px;color:#24292e;word-wrap:normal;white-space:pre}.markdown-body .pl-token.active,.markdown-body .pl-token:hover{cursor:pointer;background:#ffea7f}.markdown-body .tab-size[data-tab-size="1"]{-moz-tab-size:1;tab-size:1}.markdown-body .tab-size[data-tab-size="2"]{-moz-tab-size:2;tab-size:2}.markdown-body .tab-size[data-tab-size="3"]{-moz-tab-size:3;tab-size:3}.markdown-body .tab-size[data-tab-size="4"]{-moz-tab-size:4;tab-size:4}.markdown-body .tab-size[data-tab-size="5"]{-moz-tab-size:5;tab-size:5}.markdown-body .tab-size[data-tab-size="6"]{-moz-tab-size:6;tab-size:6}.markdown-body .tab-size[data-tab-size="7"]{-moz-tab-size:7;tab-size:7}.markdown-body .tab-size[data-tab-size="8"]{-moz-tab-size:8;tab-size:8}.markdown-body .tab-size[data-tab-size="9"]{-moz-tab-size:9;tab-size:9}.markdown-body .tab-size[data-tab-size="10"]{-moz-tab-size:10;tab-size:10}.markdown-body .tab-size[data-tab-size="11"]{-moz-tab-size:11;tab-size:11}.markdown-body .tab-size[data-tab-size="12"]{-moz-tab-size:12;tab-size:12}.markdown-body .task-list-item{list-style-type:none}.markdown-body .task-list-item+.task-list-item{margin-top:3px}.markdown-body .task-list-item input{margin:0 .2em .25em -1.6em;vertical-align:middle}</style><style data-highlight="" data-highlight-key="gml">.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#222;color:silver}.hljs-keyword{color:#ffb871;font-weight:700}.hljs-built_in{color:#ffb871}.hljs-literal{color:#ff8080}.hljs-symbol{color:#58e55a}.hljs-comment{color:#5b995b}.hljs-string{color:#ff0}.hljs-number{color:#ff8080}.hljs-addition,.hljs-attribute,.hljs-bullet,.hljs-code,.hljs-deletion,.hljs-doctag,.hljs-function,.hljs-link,.hljs-meta,.hljs-meta-keyword,.hljs-name,.hljs-quote,.hljs-regexp,.hljs-section,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-id,.hljs-selector-pseudo,.hljs-selector-tag,.hljs-subst,.hljs-template-tag,.hljs-template-variable,.hljs-title,.hljs-type,.hljs-variable{color:silver}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æ’æ§½æ˜¯ Vue ç»„ä»¶ä¸­ä¸€ä¸ªéå¸¸æ ¸å¿ƒçš„æ¦‚å¿µï¼Œå®ƒå…è®¸ä½ ä»¥ä¸€ç§çµæ´»çš„æ–¹å¼å°†å†…å®¹â€œæ’å…¥â€åˆ°å­ç»„ä»¶çš„æŒ‡å®šä½ç½®ï¼Œæå¤§åœ°æé«˜äº†ç»„ä»¶çš„å¤ç”¨æ€§å’ŒçµTAæ€§ã€‚æ’æ§½å…è®¸ç»„ä»¶åªè´Ÿè´£æ¸²æŸ“ä¸€ä¸ªâ€œæ¡†æ¶â€ï¼ˆæ¯”å¦‚è¾¹æ¡†ã€é˜´å½±ï¼‰ï¼Œè€ŒæŠŠâ€œå†…å®¹â€çš„å†³å®šæƒäº¤ç»™ä½¿ç”¨å®ƒçš„çˆ¶ç»„ä»¶ã€‚</p>
<h2 data-id="heading-0">1.é»˜è®¤æ’æ§½</h2>
<p>æœ€ç®€å•çš„æ’æ§½ï¼Œå­ç»„ä»¶ä¸­åªæœ‰ä¸€ä¸ªæœªå‘½åçš„ <code>&lt;slot&gt;</code> å‡ºå£ã€‚</p>
<blockquote>
<p>å­ç»„ä»¶</p>
</blockquote>
<pre><code class="hljs language-ts" lang="ts">&lt;template&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>å¡ç‰‡æ ‡é¢˜<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">slot</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">slot</span>&gt;</span> <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
&lt;/template&gt;

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="css">
<span class="hljs-selector-class">.card</span> {
  <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#ccc</span>;
  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">8px</span>;
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">16px</span>;
  <span class="hljs-attribute">max-width</span>: <span class="hljs-number">300px</span>;
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span></span>
</code></pre>
<blockquote>
<p>çˆ¶ç»„ä»¶</p>
</blockquote>
<pre><code class="hljs language-ts" lang="ts">&lt;template&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">BaseCard</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>è¿™æ˜¯ä¸€çˆ¶ç»„ä»¶<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"./assets/logo.png"</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">"Vue Logo"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"width: 100px;"</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">BaseCard</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span>

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"ts"</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> <span class="hljs-title class_">BaseCard</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./components/BaseCard.vue'</span>;
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>
</code></pre>
<h2 data-id="heading-1">2.å…·åæ’æ§½</h2>
<p>å½“å­ç»„ä»¶éœ€è¦å¤šä¸ªâ€œå‘ä½â€æ—¶ï¼ˆä¾‹å¦‚ï¼Œä¸€ä¸ªç”¨äºå¤´éƒ¨ï¼Œä¸€ä¸ªç”¨äºåº•éƒ¨ï¼‰ï¼Œå°±éœ€è¦ä½¿ç”¨å…·åæ’æ§½ã€‚</p>
<blockquote>
<p>å­ç»„ä»¶ï¼šä½¿ç”¨ <code>name</code> å±æ€§æ¥åŒºåˆ†ä¸åŒçš„æ’æ§½ã€‚</p>
</blockquote>
<pre><code class="hljs language-ts" lang="ts">&lt;template&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"modal"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">header</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"modal-header"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">slot</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"header"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">slot</span>&gt;</span> <span class="hljs-tag">&lt;/<span class="hljs-name">header</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">main</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"modal-body"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">slot</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">slot</span>&gt;</span> <span class="hljs-tag">&lt;/<span class="hljs-name">main</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">footer</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"modal-footer"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">slot</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"footer"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">slot</span>&gt;</span> <span class="hljs-tag">&lt;/<span class="hljs-name">footer</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
&lt;/template&gt;

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="css">
<span class="hljs-selector-class">.modal</span> { <span class="hljs-attribute">background</span>: <span class="hljs-number">#fff</span>; <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#ddd</span>; }
<span class="hljs-selector-class">.modal-header</span>, <span class="hljs-selector-class">.modal-footer</span> { <span class="hljs-attribute">padding</span>: <span class="hljs-number">10px</span>; <span class="hljs-attribute">background</span>: <span class="hljs-number">#f4f4f4</span>; }
<span class="hljs-selector-class">.modal-body</span> { <span class="hljs-attribute">padding</span>: <span class="hljs-number">20px</span>; }
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span></span>
</code></pre>
<blockquote>
<p>çˆ¶ç»„ä»¶ï¼šä½¿ç”¨ <code>&lt;template&gt;</code> æ ‡ç­¾å’Œ <code>v-slot</code> æŒ‡ä»¤ï¼ˆæˆ–å…¶ç®€å†™ <code>#</code>ï¼‰æ¥æŒ‡å®šè¦å¡«å……çš„æ’æ§½ã€‚</p>
</blockquote>
<pre><code class="hljs language-ts" lang="ts">&lt;template&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">ModalLayout</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">template</span> <span class="hljs-attr">v-slot</span> = <span class="hljs-string">"header"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>è¿™æ˜¯ä¸€ä¸ªæ¨¡æ€æ¡†æ ‡é¢˜<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>è¿™æ˜¯æ¨¡æ€æ¡†çš„ä¸»è¦å†…å®¹...<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">template</span> #<span class="hljs-attr">footer</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span>&gt;</span>å–æ¶ˆ<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span>&gt;</span>ç¡®è®¤<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">ModalLayout</span>&gt;</span></span>
&lt;/template&gt;

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"ts"</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> <span class="hljs-title class_">ModalLayout</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./components/ModalLayout.vue'</span>;
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>
</code></pre>
<h2 data-id="heading-2">3.ä½œç”¨åŸŸæ’æ§½</h2>
<p>è¿™æ˜¯æ’æ§½æœ€å¼ºå¤§çš„åŠŸèƒ½ã€‚å®ƒå…è®¸å­ç»„ä»¶å‘çˆ¶ç»„ä»¶çš„æ’æ§½å†…å®¹ä¼ é€’æ•°æ®ã€‚è¿™åœ¨å¤„ç†<strong>åˆ—è¡¨æ¸²æŸ“</strong>æ—¶éå¸¸æœ‰ç”¨ï¼Œå­ç»„ä»¶è´Ÿè´£æ•°æ®è¿­ä»£ï¼Œè€Œçˆ¶ç»„ä»¶è´Ÿè´£å®šä¹‰æ¯ä¸€é¡¹çš„æ¸²æŸ“æ ·å¼ã€‚</p>
<blockquote>
<p>å­ç»„ä»¶ï¼šå­ç»„ä»¶é€šè¿‡åœ¨ <code>&lt;slot&gt;</code> æ ‡ç­¾ä¸Šç»‘å®šå±æ€§ï¼Œæ¥å°†æ•°æ®"æš´éœ²"ç»™çˆ¶ç»„ä»¶ã€‚</p>
</blockquote>
<pre><code class="hljs language-ts" lang="ts">&lt;template&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"user-list"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>ç”¨æˆ·åˆ—è¡¨:<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">"user in users"</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">"user.id"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">slot</span> <span class="hljs-attr">:user</span>=<span class="hljs-string">"user"</span> <span class="hljs-attr">:isAdmin</span>=<span class="hljs-string">"user.name === 'Alice'"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">slot</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
&lt;/template&gt;

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"ts"</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { ref } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>;

interface <span class="hljs-title class_">User</span> {
  <span class="hljs-attr">id</span>: number;
  <span class="hljs-attr">name</span>: string;
  <span class="hljs-attr">age</span>: number;
}

<span class="hljs-keyword">const</span> users = ref&lt;<span class="hljs-title class_">User</span>[]&gt;([
  { <span class="hljs-attr">id</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'Alice'</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">30</span> },
  { <span class="hljs-attr">id</span>: <span class="hljs-number">2</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'Bob'</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">25</span> },
]);
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</span></code></pre>
<blockquote>
<p>çˆ¶ç»„ä»¶ï¼šçˆ¶ç»„ä»¶é€šè¿‡ <code>v-slot</code> (æˆ– <code>#</code>) æ¥æ”¶å­ç»„ä»¶ä¼ é€’çš„æ•°æ®ï¼Œ<strong>å¹¶ä¸”å¯ä»¥ç«‹å³ä¸ºè¿™äº›æ•°æ®æ·»åŠ  TypeScript ç±»å‹</strong>ã€‚</p>
</blockquote>
<pre><code class="hljs language-ts" lang="ts">&lt;template&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">UserList</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">template</span> #<span class="hljs-attr">default</span>=<span class="hljs-string">"{ user, isAdmin }: { user: User, isAdmin: boolean }"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span> 
        {{ user.name }} ({{ user.age }}å²)
      <span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">"isAdmin"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"color: red; margin-left: 10px;"</span>&gt;</span>[ç®¡ç†å‘˜]<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">UserList</span>&gt;</span></span>
&lt;/template&gt;

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"ts"</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> <span class="hljs-title class_">UserList</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./components/UserList.vue'</span>;

<span class="hljs-comment">// æˆ‘ä»¬å¯ä»¥åœ¨çˆ¶ç»„ä»¶ä¸­ä¹Ÿå®šä¹‰è¿™ä¸ªç±»å‹ï¼Œä»¥ä¾¿å¤ç”¨</span>
interface <span class="hljs-title class_">User</span> {
  <span class="hljs-attr">id</span>: number;
  <span class="hljs-attr">name</span>: string;
  <span class="hljs-attr">age</span>: number;
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>
</code></pre>
<h2 data-id="heading-3">4.è‡ªå®šä¹‰æ’æ§½(Vue 3.3+)</h2>
<p>åœ¨ Vue 3.3 åŠæ›´é«˜ç‰ˆæœ¬ä¸­ï¼Œ <code>&lt;script setup&gt;</code> æä¾›äº† <code>defineSlots</code> å®ï¼Œè¿™æ˜¯åœ¨å­ç»„ä»¶ä¸­<strong>ä¸ºæ’æ§½æä¾›ç±»å‹</strong>çš„å®˜æ–¹æ–¹å¼ã€‚è¿™æå¤§åœ°æ”¹å–„äº†å¼€å‘ä½“éªŒï¼Œ<strong>çˆ¶ç»„ä»¶ä¸å†éœ€è¦æ‰‹åŠ¨å£°æ˜ç±»å‹</strong>ï¼Œå› ä¸º TS å¯ä»¥è‡ªåŠ¨ä»å­ç»„ä»¶æ¨æ–­å®ƒä»¬ã€‚</p>
<blockquote>
<p>å­ç»„ä»¶ï¼šä½¿ç”¨ <code>defineSlots</code> æ¥å£°æ˜æ’æ§½åŠå…¶æœŸæœ›çš„ <code>props</code> ç±»å‹ã€‚</p>
</blockquote>
<pre><code class="hljs language-ts" lang="ts">&lt;template&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"list"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">"(item, index) in items"</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">"item.id"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">slot</span> <span class="hljs-attr">:item</span>=<span class="hljs-string">"item"</span> <span class="hljs-attr">:index</span>=<span class="hljs-string">"index"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">slot</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
&lt;/template&gt;

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"ts"</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { ref } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>;

<span class="hljs-comment">// 1. å®šä¹‰æ•°æ®å’Œç±»å‹</span>
interface <span class="hljs-title class_">Item</span> {
  <span class="hljs-attr">id</span>: string;
  <span class="hljs-attr">text</span>: string;
}
<span class="hljs-keyword">const</span> items = ref&lt;<span class="hljs-title class_">Item</span>[]&gt;([
  { <span class="hljs-attr">id</span>: <span class="hljs-string">'a'</span>, <span class="hljs-attr">text</span>: <span class="hljs-string">'ç¬¬ä¸€é¡¹'</span> },
  { <span class="hljs-attr">id</span>: <span class="hljs-string">'b'</span>, <span class="hljs-attr">text</span>: <span class="hljs-string">'ç¬¬äºŒé¡¹'</span> },
]);

<span class="hljs-comment">// 2. (é‡ç‚¹) ä½¿ç”¨ defineSlots </span>
<span class="hljs-comment">// è¿™æ˜¯ä¸€ä¸ªå®ï¼Œæ— éœ€å¯¼å…¥</span>
<span class="hljs-comment">// å®ƒå®šä¹‰äº† 'default' æ’æ§½ä¼šæ¥æ”¶ä¸€ä¸ªå¯¹è±¡ï¼Œè¯¥å¯¹è±¡åŒ…å«ä¸€ä¸ª 'item' å±æ€§ (ç±»å‹ä¸º Item)</span>
<span class="hljs-comment">// å’Œä¸€ä¸ª 'index' å±æ€§ (ç±»å‹ä¸º number)</span>
defineSlots&lt;{
  <span class="hljs-title function_">default</span>(<span class="hljs-attr">props</span>: { <span class="hljs-attr">item</span>: <span class="hljs-title class_">Item</span>; <span class="hljs-attr">index</span>: number }): any;
  <span class="hljs-comment">// å¦‚æœæœ‰å…·åæ’æ§½ï¼Œä¹Ÿå¯ä»¥åœ¨è¿™é‡Œå®šä¹‰ï¼Œæ¯”å¦‚ï¼š</span>
  <span class="hljs-comment">// header(props: { title: string }): any;</span>
}&gt;();
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</span></code></pre>
<blockquote>
<p>çˆ¶ç»„ä»¶ï¼šçˆ¶ç»„ä»¶çš„ <code>slotProps</code> (æˆ–è§£æ„çš„å˜é‡) ä¼šè¢«<strong>è‡ªåŠ¨æ¨æ–­</strong>å‡ºæ­£ç¡®çš„ç±»å‹</p>
</blockquote>
<pre><code class="hljs language-ts" lang="ts">&lt;template&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">TypedList</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">template</span> #<span class="hljs-attr">default</span>=<span class="hljs-string">"{ item, index }"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">strong</span>&gt;</span>{{ index + 1 }}.<span class="hljs-tag">&lt;/<span class="hljs-name">strong</span>&gt;</span> {{ item.text.toUpperCase() }}
      <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">TypedList</span>&gt;</span></span>
&lt;/template&gt;

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"ts"</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> <span class="hljs-title class_">TypedList</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./components/TypedList.vue'</span>;
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>
</code></pre>
<h2 data-id="heading-4">5.æ€»ç»“</h2>
<ul>
<li>
<p><strong>å¸ƒå±€ç»„ä»¶</strong> (<code>Layout.vue</code>):</p>
<ul>
<li><strong>åœºæ™¯</strong>: å®šä¹‰ç½‘ç«™çš„é€šç”¨å¸ƒå±€ï¼Œå¦‚ä¾§è¾¹æ ã€é¡¶éƒ¨å¯¼èˆªå’Œå†…å®¹åŒºåŸŸã€‚</li>
<li><strong>ç”¨æ³•</strong>: ä½¿ç”¨ <code>header</code>, <code>sidebar</code>, <code>main</code> ç­‰å…·åæ’æ§½ï¼Œè®©ä¸åŒé¡µé¢å¡«å……è‡ªå·±çš„å†…å®¹ã€‚</li>
</ul>
</li>
<li>
<p><strong>å¯å¤ç”¨ UI å…ƒç´ </strong> (<code>Modal.vue</code>, <code>Card.vue</code>, <code>Dropdown.vue</code>):</p>
<ul>
<li><strong>åœºæ™¯</strong>: å°è£…é€šç”¨çš„äº¤äº’å’Œæ ·å¼ï¼Œä½†å…è®¸å†…å®¹é«˜åº¦è‡ªå®šä¹‰ã€‚</li>
<li><strong>ç”¨æ³•</strong>: <code>Modal</code> ç»„ä»¶æä¾› <code>header</code> (æ ‡é¢˜), <code>body</code> (å†…å®¹), <code>footer</code> (æŒ‰é’®) æ’æ§½ã€‚</li>
</ul>
</li>
<li>
<p><strong>åˆ—è¡¨æ¸²æŸ“å™¨</strong> (<code>DataList.vue</code>, <code>ProductGrid.vue</code>):</p>
<ul>
<li><strong>åœºæ™¯</strong>: ç»„ä»¶è´Ÿè´£è·å–å’Œè¿­ä»£æ•°æ®ï¼ˆå¦‚ API è¯·æ±‚ã€åˆ†é¡µï¼‰ï¼Œä½†æŠŠ<em>å¦‚ä½•æ¸²æŸ“æ¯ä¸€é¡¹</em>çš„æ§åˆ¶æƒäº¤ç»™çˆ¶ç»„ä»¶ã€‚</li>
<li><strong>ç”¨æ³•</strong>: <strong>(æ ¸å¿ƒ)</strong> ä½¿ç”¨<strong>ä½œç”¨åŸŸæ’æ§½</strong>ï¼Œå°† <code>item</code> (å½“å‰é¡¹æ•°æ®) ä¼ é€’ç»™çˆ¶ç»„ä»¶ã€‚è¿™æ˜¯æœ€çµæ´»çš„æ¨¡å¼ã€‚</li>
</ul>
</li>
<li>
<p><strong>æä¾›è€…ç»„ä»¶</strong> (<code>Toggle.vue</code>, <code>MouseTracker.vue</code>):</p>
<ul>
<li><strong>åœºæ™¯</strong>: ç»„ä»¶ç®¡ç†æŸä¸ªçŠ¶æ€ï¼ˆå¦‚ <code>isOn</code>ï¼‰æˆ–é€»è¾‘ï¼ˆå¦‚é¼ æ ‡ä½ç½®ï¼‰ï¼Œå¹¶é€šè¿‡ä½œç”¨åŸŸæ’æ§½å°†è¿™äº›çŠ¶æ€æš´éœ²å‡ºå»ï¼Œè®©çˆ¶ç»„ä»¶æ¥å†³å®šå¦‚ä½•æ¸²æŸ“ã€‚</li>
<li><strong>ç”¨æ³•</strong>: å­ç»„ä»¶ <code>&lt;slot :isOn="isOn" :toggle="toggleFunction"&gt;&lt;/slot&gt;</code>ã€‚</li>
</ul>
</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[äº”å¹´å‰ç«¯ï¼Œæˆ‘å‡Œæ™¨ä¸‰ç‚¹çš„ç”µè„‘å±å¹•å‰ç»ˆäºæƒ³é€šäº†è¿™ä»¶äº‹]]></title>    <link>https://juejin.cn/post/7587740546955477032</link>    <guid>https://juejin.cn/post/7587740546955477032</guid>    <pubDate>2025-12-26T13:57:14.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587740546955477032" data-draft-id="7588034035286229007" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="äº”å¹´å‰ç«¯ï¼Œæˆ‘å‡Œæ™¨ä¸‰ç‚¹çš„ç”µè„‘å±å¹•å‰ç»ˆäºæƒ³é€šäº†è¿™ä»¶äº‹"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,Vue.js"/> <meta itemprop="datePublished" content="2025-12-26T13:57:14.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="destinying"/> <meta itemprop="url" content="https://juejin.cn/user/896842287549703"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            äº”å¹´å‰ç«¯ï¼Œæˆ‘å‡Œæ™¨ä¸‰ç‚¹çš„ç”µè„‘å±å¹•å‰ç»ˆäºæƒ³é€šäº†è¿™ä»¶äº‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/896842287549703/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    destinying
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-26T13:57:14.000Z" title="Fri Dec 26 2025 13:57:14 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    4
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">äº”å¹´å‰ç«¯å¼€å‘ï¼šé‚£äº›åŠ ç­åˆ°æ·±å¤œçš„æ—¥å­é‡Œï¼Œæˆ‘ç»ˆäºæ‰¾åˆ°äº†ç­”æ¡ˆ</h2>
<blockquote>
<p>è½¬çœ¼é—´ï¼Œåšå‰ç«¯å·²ç»äº”å¹´äº†ã€‚å›æƒ³èµ·è¿™äº›å¹´çš„ç‚¹ç‚¹æ»´æ»´ï¼Œæœ‰ä¸ºäº†ä¸€ä¸ªåƒç´ å¯¹ä¸é½è€ŒæŠ˜è…¾åˆ°å‡Œæ™¨çš„æ‰§ç€ï¼Œä¹Ÿæœ‰ç»ˆäºè§£å†³äº†ä¸€ä¸ªæ€§èƒ½é—®é¢˜åçš„æ¬£å–œè‹¥ç‹‚ã€‚</p>
</blockquote>
<h3 data-id="heading-1">ğŸ’» é‚£äº›è®©æˆ‘æŠ“ç‹‚çš„ç¬é—´</h3>
<h4 data-id="heading-2">ä¸€ä¸ªpaddingæäº†æˆ‘ä¸€æ™šä¸Š</h4>
<p>è®°å¾—åˆšå…¥è¡Œçš„æ—¶å€™ï¼Œæœ‰ä¸ªå¸ƒå±€é—®é¢˜è®©æˆ‘å¤´ç–¼äº†ä¸€æ•´æ™šã€‚å°±æ˜¯ä¸¤ä¸ªdivä¹‹é—´çš„é—´è·ï¼Œæ€ä¹ˆè°ƒéƒ½ä¸å¯¹ã€‚é‚£æ—¶å€™æˆ‘è¿˜ä¸çŸ¥é“æµè§ˆå™¨é»˜è®¤æ ·å¼è¿™å›äº‹ï¼Œå¯¹ç€Chromeå¼€å‘è€…å·¥å…·ä¸€ééåœ°è¯•ï¼Œå„ç§marginã€paddingç»„åˆï¼Œç»“æœç¬¬äºŒå¤©æ—©ä¸Šä¸€é—®èµ„æ·±åŒäº‹ï¼Œäººå®¶è½»ææ·¡å†™åœ°è¯´ï¼š"reset.cssåŠ äº†ä¹ˆï¼Ÿ"</p>
<p>é‚£ä¸€åˆ»æˆ‘æ‰æ˜ç™½ï¼Œ<strong>å¾ˆå¤šä½ ä»¥ä¸ºçš„æŠ€æœ¯éš¾é¢˜ï¼Œå…¶å®åªæ˜¯çŸ¥è¯†ç›²åŒºè€Œå·²</strong>ã€‚</p>
<h4 data-id="heading-3">"è¿™ä¸ªéœ€æ±‚å¾ˆç®€å•"èƒŒåçš„æ·±å‘</h4>
<p>äº§å“ç»ç†è¯´ï¼š"è¿™ä¸ªéœ€æ±‚å¾ˆç®€å•ï¼Œå°±æ˜¯åŠ ä¸ªæ‹–æ‹½æ’åºåŠŸèƒ½ã€‚"</p>
<p>æˆ‘ï¼š"å¥½çš„ï¼Œåº”è¯¥ä¸€å¤©å°±å¤Ÿäº†ã€‚"</p>
<p>ç„¶åæˆ‘æ‰å‘ç°ï¼Œæ‹–æ‹½æ’åºè¦è€ƒè™‘ï¼š</p>
<ul>
<li>ç§»åŠ¨ç«¯çš„æ‰‹åŠ¿è¯†åˆ«</li>
<li>PCç«¯çš„é¼ æ ‡äº‹ä»¶</li>
<li>ä¸åŒæµè§ˆå™¨çš„äº‹ä»¶å…¼å®¹æ€§</li>
<li>æ‹–æ‹½è¿‡ç¨‹ä¸­çš„è§†è§‰åé¦ˆ</li>
<li>è¾¹ç•Œå¤„ç†å’Œç¢°æ’æ£€æµ‹</li>
<li>æ€§èƒ½ä¼˜åŒ–ï¼ˆé˜²æ­¢é¢‘ç¹é‡ç»˜ï¼‰</li>
<li>å¯è®¿é—®æ€§æ”¯æŒ</li>
</ul>
<p><strong>ä¸‰å¤©å</strong>ï¼Œæˆ‘ç»ˆäºäº¤å‡ºäº†"çœ‹ä¼¼ç®€å•"çš„åŠŸèƒ½ã€‚ä»é‚£ä»¥åï¼Œæˆ‘å†ä¹Ÿä¸è½»æ˜“ç›¸ä¿¡"è¿™ä¸ªéœ€æ±‚å¾ˆç®€å•"è¿™ç§è¯äº†ã€‚</p>
<h3 data-id="heading-4">ğŸŒ± é‚£äº›è®©æˆ‘æˆé•¿çš„æ—¶åˆ»</h3>
<h4 data-id="heading-5">ç¬¬ä¸€æ¬¡é‡æ„è€é¡¹ç›®</h4>
<p>æ¥æ‰‹ä¸€ä¸ªä¸‰å¹´å‰çš„è€é¡¹ç›®ï¼Œä»£ç é‡Œåˆ°å¤„éƒ½æ˜¯<code>document.getElementById</code>ï¼ŒjQueryå’ŒåŸç”ŸJSæ··ç”¨ï¼Œå…¨å±€å˜é‡æ»¡å¤©é£ã€‚é‡æ„è¿‡ç¨‹ä¸­ï¼Œæˆ‘å‘ç°äº†ä¸€äº›æœ‰æ„æ€çš„"é»‘å†å²"ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å½“å¹´çš„å‰è¾ˆä»¬æ˜¯æ€ä¹ˆå†™ä»£ç çš„</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">getData</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">if</span> (data1 == <span class="hljs-literal">null</span>) {
    data1 = [];
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">100</span>; i++) {
      data1.<span class="hljs-title function_">push</span>(i);
    }
  }
  <span class="hljs-keyword">return</span> data1;
}

<span class="hljs-comment">// è¿˜æœ‰è¿™ç§ç¥å¥‡çš„æ“ä½œ</span>
$(<span class="hljs-string">"#button"</span>).<span class="hljs-title function_">click</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
  <span class="hljs-built_in">setTimeout</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
    location.<span class="hljs-title function_">reload</span>();
  }, <span class="hljs-number">100</span>);
});
</code></pre>
<p>é‡æ„é‚£æ®µæ—¶é—´ï¼Œæ¯å¤©éƒ½åœ¨è·Ÿå†å²ä»£ç ææ–—ï¼Œä½†ä¹Ÿæ­£æ˜¯è¿™ä¸ªè¿‡ç¨‹ï¼Œè®©æˆ‘çœŸæ­£ç†è§£äº†ä»€ä¹ˆå«"ä»£ç å¯ç»´æŠ¤æ€§"ã€‚</p>
<h4 data-id="heading-6">å­¦ä¼šäº†è¯´"ä¸"</h4>
<p>ä»¥å‰åˆšå…¥è¡Œæ—¶ï¼Œäº§å“æä»€ä¹ˆéœ€æ±‚æˆ‘éƒ½è¯´"è¡Œ"ã€‚ç›´åˆ°æœ‰ä¸€æ¬¡ï¼Œä¸ºäº†èµ¶ä¸€ä¸ªä¸åˆç†çš„deadlineï¼Œæˆ‘ç†¬äº†å¥½å‡ ä¸ªé€šå®µï¼Œæœ€åä¸Šçº¿çš„ç‰ˆæœ¬è¿˜å‡ºäº†bugã€‚</p>
<p>åæ¥æˆ‘å­¦èªæ˜äº†ï¼Œå¼€å§‹è·Ÿäº§å“å’Œæ²Ÿé€šï¼š</p>
<ul>
<li>è¿™ä¸ªéœ€æ±‚çš„æŠ€æœ¯å¤æ‚åº¦æ˜¯å¤šå°‘</li>
<li>éœ€è¦å¤šå°‘å¼€å‘æ—¶é—´</li>
<li>å¦‚æœä¸€å®šè¦æå‰ï¼Œå“ªäº›åŠŸèƒ½å¯ä»¥ç æ‰</li>
<li>å½“å‰æŠ€æœ¯æ–¹æ¡ˆçš„é£é™©ç‚¹åœ¨å“ªé‡Œ</li>
</ul>
<p><strong>å­¦ä¼šè¯„ä¼°å’Œæ²Ÿé€šï¼Œæ¯”å­¦ä¼šå†™ä»£ç æ›´é‡è¦</strong>ã€‚</p>
<h3 data-id="heading-7">ğŸ¤” ç¨‹åºå‘˜çš„æ—¥å¸¸æ€è€ƒ</h3>
<h4 data-id="heading-8">å…³äºåŠ ç­çš„é‚£äº›äº‹</h4>
<p>åˆšå¼€å§‹å·¥ä½œçš„æ—¶å€™ï¼Œæˆ‘è§‰å¾—åŠ ç­=åŠªåŠ›ã€‚åæ¥æ…¢æ…¢å‘ç°ï¼š</p>
<ul>
<li><strong>æœ‰æ•ˆçš„æ—¶é—´ç®¡ç†æ¯”é•¿æ—¶é—´å·¥ä½œæ›´é‡è¦</strong></li>
<li><strong>ä¼šå†™ä»£ç ä¸ç­‰äºä¼šè§£å†³é—®é¢˜</strong></li>
<li><strong>å¥åº·æ¯”KPIé‡è¦å¾—å¤š</strong></li>
</ul>
<p>æˆ‘ç°åœ¨å°½é‡ä¸åŠ ç­ï¼Œä¸æ˜¯å› ä¸ºæ‡’ï¼Œè€Œæ˜¯æˆ‘å­¦ä¼šäº†ï¼š</p>
<ul>
<li>æå‰è¯„ä¼°å·¥ä½œé‡</li>
<li>åŠæ—¶æ²Ÿé€šé£é™©</li>
<li>æ‹’ç»ä¸åˆç†çš„éœ€æ±‚</li>
<li>ä¿æŒä¸“æ³¨ï¼Œå‡å°‘æ— æ•ˆåŠ ç­</li>
</ul>
<h4 data-id="heading-9">å…³äºæŠ€æœ¯ç„¦è™‘</h4>
<p>å‰ç«¯æŠ€æœ¯æ›´æ–°å¤ªå¿«ï¼ŒVueè¿˜æ²¡å­¦å®Œï¼ŒReactåˆå‡ºäº†æ–°ç‰¹æ€§ï¼ŒCSSæ¡†æ¶å±‚å‡ºä¸ç©·ã€‚å‰ä¸¤å¹´æˆ‘å¾ˆç„¦è™‘ï¼Œæ€•è¢«æ·˜æ±°ã€‚</p>
<p>ç°åœ¨æˆ‘æƒ³é€šäº†ï¼š</p>
<ul>
<li><strong>åŸºç¡€æ°¸è¿œæ˜¯ç‹é“</strong>ï¼šHTML/CSS/JavaScriptçš„æ ¸å¿ƒä¸ä¼šå˜</li>
<li><strong>å­¦ä¹ è¦è®²æ–¹æ³•</strong>ï¼šä¸è¦è¿½ç€æ–°æŠ€æœ¯è·‘ï¼Œè¦æœ‰é€‰æ‹©åœ°å­¦</li>
<li><strong>é¡¹ç›®é©±åŠ¨å­¦ä¹ </strong>ï¼šåœ¨å®é™…é¡¹ç›®ä¸­å­¦ä¹ æ–°æŠ€æœ¯æ•ˆæœæœ€å¥½</li>
<li><strong>ä¿æŒè¾“å‡º</strong>ï¼šå†™åšå®¢ã€åšåˆ†äº«æ˜¯æœ€å¥½çš„å­¦ä¹ æ–¹å¼</li>
</ul>
<h3 data-id="heading-10">ğŸ’ª çœŸæ­£çš„æˆé•¿æ˜¯ä»€ä¹ˆ</h3>
<h4 data-id="heading-11">ä»æŠ€æœ¯æ€ç»´åˆ°äº§å“æ€ç»´</h4>
<p>åˆšå¼€å§‹æˆ‘åªå…³å¿ƒä»£ç å†™å¾—çˆ½ä¸çˆ½ï¼Œåæ¥æˆ‘å¼€å§‹æ€è€ƒï¼š</p>
<ul>
<li>ç”¨æˆ·çœŸçš„éœ€è¦è¿™ä¸ªåŠŸèƒ½å—ï¼Ÿ</li>
<li>è¿™ä¸ªäº¤äº’ä½“éªŒå¤Ÿå¥½å—ï¼Ÿ</li>
<li>æ€§èƒ½ä¼˜åŒ–èƒ½å¸¦æ¥ä»€ä¹ˆä»·å€¼ï¼Ÿ</li>
<li>æˆ‘çš„ä»£ç å¯¹å›¢é˜Ÿåä½œå‹å¥½å—ï¼Ÿ</li>
</ul>
<p><strong>æŠ€æœ¯æ˜¯å·¥å…·ï¼Œä¸æ˜¯ç›®çš„</strong>ã€‚çœŸæ­£çš„å‰ç«¯å¼€å‘ï¼Œæ˜¯ç”¨æŠ€æœ¯ä¸ºç”¨æˆ·åˆ›é€ ä»·å€¼ã€‚</p>
<h4 data-id="heading-12">æ‰¾åˆ°äº†è‡ªå·±çš„èŠ‚å¥</h4>
<p>ç°åœ¨çš„æˆ‘ï¼š</p>
<ul>
<li>ä¸å†ç›²ç›®è¿½æ–°æŠ€æœ¯ï¼Œè€Œæ˜¯é€‰æ‹©é€‚åˆè‡ªå·±çš„æŠ€æœ¯æ ˆ</li>
<li>é‡è§†ä»£ç è´¨é‡ï¼Œä½†ä¸æ‰§ç€äºå®Œç¾</li>
<li>ä¼šä¸»åŠ¨æ²Ÿé€šéœ€æ±‚ï¼Œè€Œä¸æ˜¯è¢«åŠ¨æ¥å—</li>
<li>ä¿æŒå­¦ä¹ çš„çƒ­æƒ…ï¼Œä½†ä¸ç„¦è™‘</li>
<li>çŸ¥é“ä»€ä¹ˆæ—¶å€™è¯¥åŠªåŠ›ï¼Œä»€ä¹ˆæ—¶å€™è¯¥ä¼‘æ¯</li>
</ul>
<h3 data-id="heading-13">ğŸ¯ ç»™è‡ªå·±çš„ä¸€äº›è¯</h3>
<p>äº”å¹´ä¸‹æ¥ï¼Œæˆ‘æƒ³å¯¹è‡ªå·±è¯´ï¼š</p>
<ol>
<li><strong>ä¿æŒå¥½å¥‡ï¼Œä½†ä¸è¦ç›²ç›®è·Ÿé£</strong></li>
<li><strong>å†™ä»£ç å¾ˆé‡è¦ï¼Œä½†è§£å†³é—®é¢˜æ›´é‡è¦</strong></li>
<li><strong>æŠ€æœ¯è¦ç²¾è¿›ï¼Œä½†ç”Ÿæ´»ä¹Ÿè¦å¹³è¡¡</strong></li>
<li><strong>å¤šåˆ†äº«ï¼Œå¤šäº¤æµï¼Œå¤šæ€è€ƒ</strong></li>
<li><strong>è®°ä½ï¼Œä½ é¦–å…ˆæ˜¯ä¸€ä¸ªäººï¼Œå…¶æ¬¡æ‰æ˜¯ç¨‹åºå‘˜</strong></li>
</ol>
<h3 data-id="heading-14">âœ¨ ä¸‹ä¸€ä¸ªäº”å¹´</h3>
<p>æŠ€æœ¯è¿™æ¡è·¯å¾ˆé•¿ï¼Œä½†æˆ‘ä¸æ€¥äº†ã€‚æ…¢æ…¢åœ°å­¦ä¹ ï¼Œç¨³ç¨³åœ°æˆé•¿ï¼Œè¸å®åšå¥½æ¯ä¸€ä¸ªé¡¹ç›®ã€‚</p>
<p>æ¯•ç«Ÿï¼Œ<strong>æœ€å¥½çš„ä»£ç ä¸æ˜¯æœ€å¤æ‚çš„ï¼Œè€Œæ˜¯æœ€åˆé€‚çš„</strong>ã€‚æœ€å¥½çš„ç¨‹åºå‘˜ä¸æ˜¯æœ€èªæ˜çš„ï¼Œè€Œæ˜¯æœ€æ‡‚å¾—å¹³è¡¡çš„ã€‚</p>
<p>æ„¿æˆ‘ä»¬éƒ½èƒ½åœ¨è¿™æ¡è·¯ä¸Šï¼Œæ‰¾åˆ°å±äºè‡ªå·±çš„èŠ‚å¥å’Œç­”æ¡ˆã€‚</p>
<hr/>
<p><em>ä½ åœ¨å‰ç«¯è·¯ä¸Šæœ‰ä»€ä¹ˆéš¾å¿˜çš„ç»å†ï¼Ÿæ¬¢è¿åœ¨è¯„è®ºåŒºåˆ†äº«ä½ çš„æ•…äº‹ã€‚</em></p>
<p>#å‰ç«¯å¼€å‘ #ç¨‹åºå‘˜æˆé•¿ #æŠ€æœ¯æ„Ÿæ‚Ÿ #èŒåœºç»éªŒ #çœŸå®æ„Ÿå—</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Androidç¨³å®šæ€§åŸºç¡€:ç³»ç»Ÿæ¶æ„ä¸å…³é”®æœºåˆ¶]]></title>    <link>https://juejin.cn/post/7587776610436497423</link>    <guid>https://juejin.cn/post/7587776610436497423</guid>    <pubDate>2025-12-26T12:45:07.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587776610436497423" data-draft-id="7587808953076678656" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Androidç¨³å®šæ€§åŸºç¡€:ç³»ç»Ÿæ¶æ„ä¸å…³é”®æœºåˆ¶"/> <meta itemprop="keywords" content="Android,æ€§èƒ½ä¼˜åŒ–"/> <meta itemprop="datePublished" content="2025-12-26T12:45:07.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å†¬å¥‡Lab"/> <meta itemprop="url" content="https://juejin.cn/user/1857501105781193"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Androidç¨³å®šæ€§åŸºç¡€:ç³»ç»Ÿæ¶æ„ä¸å…³é”®æœºåˆ¶
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1857501105781193/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å†¬å¥‡Lab
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-26T12:45:07.000Z" title="Fri Dec 26 2025 12:45:07 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»15åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Androidç¨³å®šæ€§åŸºç¡€:ç³»ç»Ÿæ¶æ„ä¸å…³é”®æœºåˆ¶</h2>
<blockquote>
<p>ç³»ç»Ÿç¨³å®šæ€§æ˜¯ç”¨æˆ·ä½“éªŒçš„åŸºçŸ³,ä¹Ÿæ˜¯å“ç‰Œå£ç¢‘çš„ç”Ÿå‘½çº¿ã€‚</p>
</blockquote>
<h3 data-id="heading-1">å¼•è¨€:ä¸ºä»€ä¹ˆç³»ç»Ÿç¨³å®šæ€§å¦‚æ­¤é‡è¦?</h3>
<p>è¿˜è®°å¾—æŸçŸ¥åæ‰‹æœºå“ç‰Œå› ä¸ºç³»ç»Ÿé¢‘ç¹æ­»æœºè¢«ç”¨æˆ·é›†ä½“æŠ•è¯‰çš„æ–°é—»å—?ä¸€æ¬¡ç³»ç»Ÿå´©æºƒå¯èƒ½åªéœ€è¦å‡ ç§’é’Ÿ,ä½†å¯¹å“ç‰Œå½¢è±¡çš„ä¼¤å®³å´éœ€è¦å‡ å¹´æ¥ä¿®å¤ã€‚</p>
<p>ä½œä¸ºä¸€åAndroid Frameworkå·¥ç¨‹å¸ˆ,ä½ å¯èƒ½ç»å¸¸ä¼šé‡åˆ°è¿™æ ·çš„åœºæ™¯:</p>
<ul>
<li>æµ‹è¯•åŒå­¦æ°”å†²å†²åœ°è·‘è¿‡æ¥:"æ‰‹æœºåˆå¡æ­»äº†!"</li>
<li>ç”¨æˆ·åé¦ˆ:"AppåŠ¨ä¸åŠ¨å°±é—ªé€€,å¤ªçƒ‚äº†!"</li>
<li>è€æ¿åœ¨ç¾¤é‡Œ@æ‰€æœ‰äºº:"çº¿ä¸Šå‡ºç°å¤§é¢ç§¯ANR,ç´§æ€¥å¤„ç†!"</li>
</ul>
<p>è¿™äº›é—®é¢˜çš„èƒŒå,éƒ½æŒ‡å‘åŒä¸€ä¸ªä¸»é¢˜â€”â€”<strong>ç³»ç»Ÿç¨³å®šæ€§</strong>ã€‚</p>
<p>ç³»ç»Ÿç¨³å®šæ€§å°±åƒæ˜¯æˆ¿å­çš„åœ°åŸºã€‚åœ°åŸºä¸ç¨³,å†æ¼‚äº®çš„è£…ä¿®ä¹Ÿæ˜¯ç©ºä¸­æ¥¼é˜ã€‚Androidç³»ç»Ÿè¿è¡Œç€æ•°åä¸ªç³»ç»Ÿè¿›ç¨‹ã€ä¸Šç™¾ä¸ªç³»ç»ŸæœåŠ¡,å®ƒä»¬å°±åƒä¸€ä¸ªç²¾å¯†çš„äº¤å“ä¹å›¢,ä»»ä½•ä¸€ä¸ªæˆå‘˜å‡ºäº†é—®é¢˜,æ•´åœºæ¼”å‡ºéƒ½ä¼šå—åˆ°å½±å“ã€‚</p>
<p>æœ¬æ–‡æ˜¯ã€ŠAndroidç³»ç»Ÿç¨³å®šæ€§ä¸æ€§èƒ½ä¼˜åŒ–ã€‹ç³»åˆ—çš„å¼€ç¯‡ä¹‹ä½œã€‚æˆ‘ä»¬å°†ä»Androidç³»ç»Ÿæ¶æ„å‡ºå‘,å¸¦ä½ å»ºç«‹èµ·ç³»ç»Ÿç¨³å®šæ€§åˆ†æçš„åŸºç¡€è®¤çŸ¥æ¡†æ¶ã€‚è¯»å®Œæœ¬æ–‡,ä½ å°†èƒ½å¤Ÿ:</p>
<ol>
<li>ç†è§£Androidç³»ç»Ÿåˆ†å±‚æ¶æ„ä¸ç¨³å®šæ€§çš„å…³ç³»</li>
<li>æŒæ¡ç³»ç»Ÿç¨³å®šæ€§çš„æ ¸å¿ƒæœºåˆ¶å’Œå…³é”®ç»„ä»¶</li>
<li>äº†è§£ç¨³å®šæ€§é—®é¢˜çš„åˆ†ç±»å’Œè¡¨ç°å½¢å¼</li>
<li>å»ºç«‹ç³»ç»Ÿç¨³å®šæ€§åˆ†æçš„åŸºç¡€æ€ç»´æ¡†æ¶</li>
</ol>
<p>å‡†å¤‡å¥½äº†å—?è®©æˆ‘ä»¬å¼€å§‹è¿™æ®µæ¢ç´¢ä¹‹æ—…!</p>
<hr/>
<h3 data-id="heading-2">ä¸€ã€Androidç³»ç»Ÿæ¶æ„å›é¡¾</h3>
<p>è¦ç†è§£ç³»ç»Ÿç¨³å®šæ€§,é¦–å…ˆè¦å¯¹Androidçš„ç³»ç»Ÿæ¶æ„æœ‰æ¸…æ™°çš„è®¤è¯†ã€‚å¦‚æœæŠŠAndroidç³»ç»Ÿæ¯”ä½œä¸€æ ‹å¤§æ¥¼,é‚£ä¹ˆå®ƒæ˜¯è¿™æ ·åˆ†å±‚å»ºé€ çš„:</p>
<h4 data-id="heading-3">1.1 åˆ†å±‚æ¶æ„æ¦‚è§ˆ</h4>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/12a44f64f0a2406bbef3524a012c752a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yas5aWHTGFi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767357907&amp;x-signature=0pGk1YvoHwtfPNJcf00Qo15WlKI%3D" alt="01-01-android-architecture.png" loading="lazy"/></p>
<p>è¿™ç§åˆ†å±‚è®¾è®¡å°±åƒæ˜¯ä¸€ä¸ªé‡‘å­—å¡”,<strong>è¶Šå¾€ä¸‹å±‚è¶Šç¨³å®š,ä½†å‡ºé—®é¢˜çš„å½±å“ä¹Ÿè¶Šå¤§</strong>ã€‚</p>
<p>æ‰“ä¸ªæ¯”æ–¹:å¦‚æœä½ å®¶çš„ç¯æ³¡åäº†(åº”ç”¨å±‚),æ¢ä¸€ä¸ªå°±å¥½;å¦‚æœç”µè·¯æ¿çƒ§äº†(Frameworkå±‚),å¯èƒ½æ•´ä¸ªæˆ¿é—´éƒ½æ²¡ç”µ;å¦‚æœå˜å‹å™¨ç‚¸äº†(Kernelå±‚),æ•´æ ‹æ¥¼éƒ½è¦é­æ®ƒ!</p>
<h4 data-id="heading-4">1.2 å„å±‚å¯¹ç¨³å®šæ€§çš„å½±å“</h4>
<p>è®©æˆ‘ä»¬é€å±‚åˆ†æ,çœ‹çœ‹æ¯ä¸€å±‚å¯èƒ½å‡ºç°ä»€ä¹ˆç¨³å®šæ€§é—®é¢˜:</p>
<h5 data-id="heading-5">åº”ç”¨å±‚ (Applications)</h5>
<p>è¿™æ˜¯ç”¨æˆ·ç›´æ¥æ¥è§¦çš„å±‚é¢,ç¨³å®šæ€§é—®é¢˜ä¸»è¦è¡¨ç°ä¸º:</p>
<ul>
<li><strong>Java Crash</strong>: æœªæ•è·çš„å¼‚å¸¸å¯¼è‡´åº”ç”¨é—ªé€€</li>
<li><strong>ANR</strong>: ä¸»çº¿ç¨‹é˜»å¡å¯¼è‡´åº”ç”¨æ— å“åº”</li>
<li><strong>å†…å­˜æ³„æ¼</strong>: æŒç»­å ç”¨å†…å­˜æœ€ç»ˆå¯¼è‡´OOM</li>
</ul>
<p><strong>å½±å“èŒƒå›´</strong>: å•ä¸ªåº”ç”¨
<strong>ä¸¥é‡ç¨‹åº¦</strong>: ä¸€èˆ¬(ç”¨æˆ·å¯ä»¥é‡æ–°æ‰“å¼€åº”ç”¨)</p>
<h5 data-id="heading-6">Frameworkå±‚ (Application Framework)</h5>
<p>è¿™æ˜¯Androidçš„"å¤§è„‘",æä¾›äº†æ‰€æœ‰åº”ç”¨è¿è¡Œæ‰€éœ€çš„æœåŠ¡:</p>
<ul>
<li><strong>System Server Crash</strong>: æ ¸å¿ƒç³»ç»ŸæœåŠ¡å´©æºƒ,å¯¼è‡´ç³»ç»Ÿé‡å¯</li>
<li><strong>æœåŠ¡æ­»é”</strong>: å¤šä¸ªæœåŠ¡ç›¸äº’ç­‰å¾…,ç³»ç»Ÿå¡æ­»</li>
<li><strong>Binderèµ„æºè€—å°½</strong>: è¿›ç¨‹é—´é€šä¿¡é˜»å¡</li>
</ul>
<p><strong>å½±å“èŒƒå›´</strong>: æ•´ä¸ªç³»ç»Ÿ
<strong>ä¸¥é‡ç¨‹åº¦</strong>: ä¸¥é‡(å¯èƒ½å¯¼è‡´ç³»ç»Ÿé‡å¯)</p>
<h5 data-id="heading-7">Nativeå±‚ (Native Libraries &amp; ART)</h5>
<p>è¿™ä¸€å±‚ç”¨C/C++ç¼–å†™,æ‰§è¡Œæ•ˆç‡é«˜ä½†ä¹Ÿæ›´å®¹æ˜“å‡ºé—®é¢˜:</p>
<ul>
<li><strong>Native Crash</strong>: SIGSEGVã€SIGABRTç­‰ä¿¡å·å¯¼è‡´è¿›ç¨‹ç»ˆæ­¢</li>
<li><strong>å†…å­˜è®¿é—®è¿è§„</strong>: é‡æŒ‡é’ˆã€æ•°ç»„è¶Šç•Œ</li>
<li><strong>èµ„æºæ³„æ¼</strong>: æ–‡ä»¶æè¿°ç¬¦ã€å†…å­˜æ³„æ¼</li>
</ul>
<p><strong>å½±å“èŒƒå›´</strong>: å•ä¸ªè¿›ç¨‹åˆ°æ•´ä¸ªç³»ç»Ÿ
<strong>ä¸¥é‡ç¨‹åº¦</strong>: é‡è¦åˆ°ä¸¥é‡</p>
<h5 data-id="heading-8">HALå±‚ (Hardware Abstraction Layer)</h5>
<p>ç¡¬ä»¶æŠ½è±¡å±‚è¿æ¥è½¯ä»¶å’Œç¡¬ä»¶:</p>
<ul>
<li><strong>HALæœåŠ¡å´©æºƒ</strong>: ç¡¬ä»¶åŠŸèƒ½ä¸å¯ç”¨</li>
<li><strong>ç¡¬ä»¶è¶…æ—¶</strong>: ä¸ç¡¬ä»¶é€šä¿¡è¶…æ—¶</li>
</ul>
<p><strong>å½±å“èŒƒå›´</strong>: ç‰¹å®šç¡¬ä»¶åŠŸèƒ½
<strong>ä¸¥é‡ç¨‹åº¦</strong>: é‡è¦</p>
<h5 data-id="heading-9">Kernelå±‚ (Linux Kernel)</h5>
<p>è¿™æ˜¯ç³»ç»Ÿçš„æ ¹åŸº:</p>
<ul>
<li><strong>Kernel Panic</strong>: å†…æ ¸å´©æºƒ,ç³»ç»Ÿç›´æ¥é‡å¯</li>
<li><strong>é©±åŠ¨å´©æºƒ</strong>: ç‰¹å®šç¡¬ä»¶åŠŸèƒ½å¼‚å¸¸</li>
<li><strong>æ­»é”</strong>: ç³»ç»Ÿå®Œå…¨å¡æ­»</li>
</ul>
<p><strong>å½±å“èŒƒå›´</strong>: æ•´ä¸ªè®¾å¤‡
<strong>ä¸¥é‡ç¨‹åº¦</strong>: è‡´å‘½</p>
<h4 data-id="heading-10">1.3 å…³é”®è¿›ç¨‹ä¸æœåŠ¡</h4>
<p>åœ¨Androidç³»ç»Ÿä¸­,æœ‰å‡ ä¸ªè¿›ç¨‹æ˜¯"å‘½æ ¹å­",å®ƒä»¬æŒ‚äº†,æ•´ä¸ªç³»ç»Ÿå°±å¾—é‡å¯:</p>
<h5 data-id="heading-11">Zygoteè¿›ç¨‹</h5>
<p>Zygoteæ˜¯Androidçš„"å­µåŒ–å™¨",æ‰€æœ‰åº”ç”¨è¿›ç¨‹éƒ½æ˜¯ä»å®ƒforkå‡ºæ¥çš„ã€‚å¯ä»¥æŠŠå®ƒæƒ³è±¡æˆä¸€ä¸ª"åº”ç”¨å·¥å‚":</p>
<pre><code class="hljs language-scss" lang="scss">Zygote
  â”œâ”€â”€ <span class="hljs-built_in">fork</span>() â†’ App1è¿›ç¨‹
  â”œâ”€â”€ <span class="hljs-built_in">fork</span>() â†’ App2è¿›ç¨‹
  â”œâ”€â”€ <span class="hljs-built_in">fork</span>() â†’ App3è¿›ç¨‹
  â””â”€â”€ <span class="hljs-built_in">fork</span>() â†’ System Serverè¿›ç¨‹
</code></pre>
<p>å¦‚æœZygoteæŒ‚äº†,å°±åƒå·¥å‚å€’é—­äº†,æ–°çš„åº”ç”¨è¿›ç¨‹æ— æ³•åˆ›å»º,ç³»ç»Ÿåªèƒ½é‡å¯ã€‚</p>
<h5 data-id="heading-12">System Serverè¿›ç¨‹</h5>
<p>System Serveræ˜¯Androidçš„"å¤§ç®¡å®¶",è¿è¡Œç€å‡ ä¹æ‰€æœ‰æ ¸å¿ƒç³»ç»ŸæœåŠ¡:</p>



































<table><thead><tr><th>æœåŠ¡åç§°</th><th>èŒè´£</th><th>æŒ‚äº†ä¼šæ€æ ·</th></tr></thead><tbody><tr><td>ActivityManagerService</td><td>ç®¡ç†å››å¤§ç»„ä»¶ç”Ÿå‘½å‘¨æœŸ</td><td>æ— æ³•å¯åŠ¨/åˆ‡æ¢åº”ç”¨</td></tr><tr><td>WindowManagerService</td><td>ç®¡ç†çª—å£æ˜¾ç¤º</td><td>å±å¹•ä¸€ç‰‡ç©ºç™½</td></tr><tr><td>PackageManagerService</td><td>ç®¡ç†åº”ç”¨å®‰è£…/æŸ¥è¯¢</td><td>æ— æ³•å®‰è£…/æŸ¥æ‰¾åº”ç”¨</td></tr><tr><td>PowerManagerService</td><td>ç®¡ç†ç”µæºçŠ¶æ€</td><td>æ— æ³•ä¼‘çœ /å”¤é†’</td></tr><tr><td>InputManagerService</td><td>ç®¡ç†è¾“å…¥äº‹ä»¶</td><td>è§¦æ‘¸/æŒ‰é”®å¤±æ•ˆ</td></tr></tbody></table>
<p>System Serverä¸€æ—¦å´©æºƒ,æ•´ä¸ªç³»ç»Ÿå°±ä¼šé‡å¯(ä½ ä¼šçœ‹åˆ°å¼€æœºåŠ¨ç”»é‡æ–°æ’­æ”¾)ã€‚</p>
<h5 data-id="heading-13">SurfaceFlingerè¿›ç¨‹</h5>
<p>SurfaceFlingeræ˜¯Androidçš„"ç”»å¸ˆ",è´Ÿè´£å°†æ‰€æœ‰åº”ç”¨çš„ç•Œé¢åˆæˆåæ˜¾ç¤ºåˆ°å±å¹•ä¸Š:</p>
<pre><code class="hljs language-css" lang="css">App1 Surface â”€â”
App2 Surface â”€â”€â”¼â”€â”€â†’ SurfaceFlinger â”€â”€â†’ <span class="hljs-attribute">Display</span>
StatusBar    â”€â”˜
</code></pre>
<p>å¦‚æœSurfaceFlingeræŒ‚äº†,å±å¹•è¦ä¹ˆé»‘å±,è¦ä¹ˆç”»é¢å®šæ ¼ã€‚</p>
<hr/>
<h3 data-id="heading-14">äºŒã€ç¨³å®šæ€§æ ¸å¿ƒæœºåˆ¶</h3>
<p>Androidç³»ç»Ÿè®¾è®¡äº†å¤šç§æœºåˆ¶æ¥ä¿éšœç¨³å®šæ€§,å°±åƒäººä½“çš„å…ç–«ç³»ç»Ÿä¸€æ ·ã€‚è®©æˆ‘ä»¬é€ä¸€äº†è§£è¿™äº›"æŠ¤åŸæ²³"ã€‚</p>
<h4 data-id="heading-15">2.1 è¿›ç¨‹ç®¡ç†æœºåˆ¶</h4>
<p>Androidæ˜¯ä¸€ä¸ªå¤šä»»åŠ¡æ“ä½œç³»ç»Ÿ,ä½†æ‰‹æœºçš„å†…å­˜æ˜¯æœ‰é™çš„ã€‚å¦‚ä½•åœ¨æœ‰é™çš„èµ„æºä¸‹ä¿è¯ç³»ç»Ÿæµç•…è¿è¡Œ?ç­”æ¡ˆæ˜¯<strong>è¿›ç¨‹ä¼˜å…ˆçº§ç®¡ç†</strong>å’Œ<strong>Low Memory Killer (LMK)</strong>ã€‚</p>
<h5 data-id="heading-16">è¿›ç¨‹ä¼˜å…ˆçº§</h5>
<p>Androidæ ¹æ®è¿›ç¨‹çš„é‡è¦æ€§å°†å…¶åˆ†ä¸º5ä¸ªç­‰çº§:</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2d1d8b3f5d06479ebe824d587664a23e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yas5aWHTGFi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767357907&amp;x-signature=mJkiv4sgDLoVXnaz9Qh9ysdVU%2BY%3D" alt="01-02-process-priority-lmk.png" loading="lazy"/></p>















































<table><thead><tr><th>ä¼˜å…ˆçº§</th><th>åç§°</th><th>oom_adj</th><th>è¯´æ˜</th><th>ä¾‹å­</th></tr></thead><tbody><tr><td>æœ€é«˜</td><td>Foreground</td><td>0</td><td>ç”¨æˆ·æ­£åœ¨äº¤äº’çš„è¿›ç¨‹</td><td>å‰å°App</td></tr><tr><td>é«˜</td><td>Visible</td><td>100</td><td>å¯è§ä½†ä¸åœ¨å‰å°</td><td>åå°æœ‰æ‚¬æµ®çª—çš„App</td></tr><tr><td>ä¸­</td><td>Service</td><td>200</td><td>è¿è¡Œåå°æœåŠ¡çš„è¿›ç¨‹</td><td>éŸ³ä¹æ’­æ”¾å™¨</td></tr><tr><td>ä½</td><td>Cached</td><td>900</td><td>ç¼“å­˜çš„åå°è¿›ç¨‹</td><td>æœ€è¿‘ä½¿ç”¨çš„App</td></tr><tr><td>æœ€ä½</td><td>Empty</td><td>999</td><td>ç©ºè¿›ç¨‹,éšæ—¶å¯æ€</td><td>å·²é€€å‡ºçš„App</td></tr></tbody></table>
<p>å¯ä»¥ç”¨ä»¥ä¸‹ä»£ç æŸ¥çœ‹è¿›ç¨‹ä¼˜å…ˆçº§:</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// æŸ¥çœ‹è¿›ç¨‹ä¼˜å…ˆçº§</span>
<span class="hljs-type">ActivityManager</span> <span class="hljs-variable">am</span> <span class="hljs-operator">=</span> getSystemService(ActivityManager.class);
List&lt;ActivityManager.RunningAppProcessInfo&gt; processes = am.getRunningAppProcesses();
<span class="hljs-keyword">for</span> (ActivityManager.RunningAppProcessInfo info : processes) {
    Log.d(TAG, <span class="hljs-string">"Process: "</span> + info.processName +
          <span class="hljs-string">", Importance: "</span> + info.importance +
          <span class="hljs-string">", ImportanceReasonCode: "</span> + info.importanceReasonCode);
}
</code></pre>
<h5 data-id="heading-17">Low Memory Killer (LMK)</h5>
<p>å½“ç³»ç»Ÿå†…å­˜ä¸è¶³æ—¶,LMKå°±ä¼šå‡ºé©¬"æ€è¿›ç¨‹"ã€‚å®ƒçš„å·¥ä½œåŸç†å¾ˆç®€å•:<strong>ä¼˜å…ˆæ€ä½ä¼˜å…ˆçº§çš„è¿›ç¨‹,é‡Šæ”¾å†…å­˜ç»™é«˜ä¼˜å…ˆçº§è¿›ç¨‹ä½¿ç”¨</strong>ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">å†…å­˜å……è¶³æ—¶:  <span class="hljs-section">[å‰å°App]</span> <span class="hljs-section">[å¯è§App]</span> <span class="hljs-section">[æœåŠ¡]</span> <span class="hljs-section">[ç¼“å­˜1]</span> <span class="hljs-section">[ç¼“å­˜2]</span> <span class="hljs-section">[ç©ºè¿›ç¨‹]</span>
                â†“ å†…å­˜ç´§å¼ 
å†…å­˜ç´§å¼ æ—¶:  <span class="hljs-section">[å‰å°App]</span> <span class="hljs-section">[å¯è§App]</span> <span class="hljs-section">[æœåŠ¡]</span> <span class="hljs-section">[ç¼“å­˜1]</span>  â† ç©ºè¿›ç¨‹å’Œç¼“å­˜2è¢«æ€
                â†“ å†…å­˜ä¸¥é‡ä¸è¶³
æç«¯æƒ…å†µ:    <span class="hljs-section">[å‰å°App]</span> <span class="hljs-section">[å¯è§App]</span>  â† è¿æœåŠ¡è¿›ç¨‹éƒ½è¢«æ€äº†
</code></pre>
<p><strong>LMK vs OOM Killerçš„åŒºåˆ«</strong>:</p>






























<table><thead><tr><th>ç‰¹æ€§</th><th>LMK</th><th>OOM Killer</th></tr></thead><tbody><tr><td>æ‰€å±å±‚</td><td>Androidç”¨æˆ·ç©ºé—´</td><td>Linuxå†…æ ¸</td></tr><tr><td>è§¦å‘æ—¶æœº</td><td>å†…å­˜ä½äºé˜ˆå€¼æ—¶(ä¸»åŠ¨)</td><td>å†…å­˜è€—å°½æ—¶(è¢«åŠ¨)</td></tr><tr><td>æ€è¿›ç¨‹ç­–ç•¥</td><td>åŸºäºoom_adjä¼˜å…ˆçº§</td><td>åŸºäºoom_score</td></tr><tr><td>ç›®çš„</td><td>é¢„é˜²æ€§é‡Šæ”¾å†…å­˜</td><td>ç´§æ€¥é‡Šæ”¾å†…å­˜</td></tr></tbody></table>
<p>LMKå°±åƒæ˜¯ä¸€ä¸ª"æœªé›¨ç»¸ç¼ª"çš„ç®¡å®¶,åœ¨å†…å­˜ç´§å¼ ä¹‹å‰å°±å¼€å§‹æ¸…ç†;è€ŒOOM Killeræ˜¯"äº¡ç¾Šè¡¥ç‰¢"çš„æœ€åæ‰‹æ®µã€‚</p>
<h4 data-id="heading-18">2.2 å¼‚å¸¸ç›‘æ§æœºåˆ¶</h4>
<p>Androidç³»ç»Ÿæœ‰ä¸€å¥—å®Œå–„çš„"å¥åº·æ£€æŸ¥"æœºåˆ¶,èƒ½å¤ŸåŠæ—¶å‘ç°å¹¶å¤„ç†å„ç§å¼‚å¸¸ã€‚</p>
<h5 data-id="heading-19">ANRç›‘æ§</h5>
<p>ANR (Application Not Responding) æ˜¯ç”¨æˆ·æœ€å¸¸é‡åˆ°çš„ç¨³å®šæ€§é—®é¢˜ä¹‹ä¸€ã€‚å½“åº”ç”¨åœ¨è§„å®šæ—¶é—´å†…æ²¡æœ‰å“åº”,ç³»ç»Ÿå°±ä¼šå¼¹å‡º"åº”ç”¨æ— å“åº”"å¯¹è¯æ¡†ã€‚</p>
<p>ANRçš„è§¦å‘æ¡ä»¶:</p>






























<table><thead><tr><th>ç±»å‹</th><th>è¶…æ—¶æ—¶é—´</th><th>è§¦å‘åœºæ™¯</th></tr></thead><tbody><tr><td>Inputäº‹ä»¶</td><td>5ç§’</td><td>è§¦æ‘¸/æŒ‰é”®äº‹ä»¶æœªå¤„ç†</td></tr><tr><td>Broadcast</td><td>å‰å°10ç§’/åå°60ç§’</td><td>å¹¿æ’­æ¥æ”¶å™¨æœªå®Œæˆ</td></tr><tr><td>Service</td><td>å‰å°20ç§’/åå°200ç§’</td><td>æœåŠ¡å¯åŠ¨æœªå®Œæˆ</td></tr><tr><td>ContentProvider</td><td>10ç§’</td><td>Providerå‘å¸ƒè¶…æ—¶</td></tr></tbody></table>
<p>ANRç›‘æ§çš„æ ¸å¿ƒé€»è¾‘:</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ç®€åŒ–çš„ANRæ£€æµ‹é€»è¾‘ (InputDispatcher.cpp)</span>
<span class="hljs-keyword">void</span> InputDispatcher::handleAnr() {
    <span class="hljs-comment">// 1. å‘é€è¾“å…¥äº‹ä»¶ç»™åº”ç”¨</span>
    dispatchEventLocked(event);

    <span class="hljs-comment">// 2. è®¾ç½®è¶…æ—¶å®šæ—¶å™¨ (5ç§’)</span>
    mAnrTimer.set(5000ms);

    <span class="hljs-comment">// 3. ç­‰å¾…åº”ç”¨å“åº”</span>
    <span class="hljs-keyword">if</span> (!receivedResponse &amp;&amp; timeout) {
        <span class="hljs-comment">// 4. è§¦å‘ANR</span>
        notifyAnr(connection, reason);
    }
}
</code></pre>
<h5 data-id="heading-20">Crashç›‘æ§</h5>
<p>åº”ç”¨å´©æºƒåˆ†ä¸ºJava Crashå’ŒNative Crashä¸¤ç§:</p>
<p><strong>Java Crashå¤„ç†æµç¨‹</strong>:</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// è®¾ç½®å…¨å±€å¼‚å¸¸å¤„ç†å™¨</span>
Thread.setDefaultUncaughtExceptionHandler(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>.UncaughtExceptionHandler() {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">uncaughtException</span><span class="hljs-params">(Thread t, Throwable e)</span> {
        <span class="hljs-comment">// 1. æ”¶é›†å´©æºƒä¿¡æ¯</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">stackTrace</span> <span class="hljs-operator">=</span> Log.getStackTraceString(e);

        <span class="hljs-comment">// 2. å†™å…¥æ—¥å¿—</span>
        Log.e(TAG, <span class="hljs-string">"Uncaught exception in thread "</span> + t.getName(), e);

        <span class="hljs-comment">// 3. ä¸ŠæŠ¥åˆ°æœåŠ¡å™¨ (å¯é€‰)</span>
        CrashReporter.report(e);

        <span class="hljs-comment">// 4. ç»ˆæ­¢è¿›ç¨‹</span>
        Process.killProcess(Process.myPid());
    }
});
</code></pre>
<p><strong>Native Crashå¤„ç†æµç¨‹</strong>:</p>
<p>Nativeå±‚çš„å´©æºƒé€šè¿‡Linuxä¿¡å·æœºåˆ¶å¤„ç†:</p>
<pre><code class="hljs language-scss" lang="scss">ç¨‹åºè§¦å‘SIGSEGV (æ®µé”™è¯¯)
        â†“
å†…æ ¸å‘é€ä¿¡å·ç»™è¿›ç¨‹
        â†“
debuggerdæ•è·ä¿¡å·
        â†“
æ”¶é›†å´©æºƒä¿¡æ¯(å¯„å­˜å™¨ã€å †æ ˆã€maps)
        â†“
ç”Ÿæˆtombstoneæ–‡ä»¶
        â†“
é€šçŸ¥AMSè¿›ç¨‹ç»ˆæ­¢
</code></pre>
<h5 data-id="heading-21">Watchdogæœºåˆ¶</h5>
<p>Watchdogæ˜¯System Serverçš„"çœ‹é—¨ç‹—",ä¸“é—¨ç›‘æ§æ ¸å¿ƒçº¿ç¨‹æ˜¯å¦æ­£å¸¸è¿è¡Œã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// Watchdogç›‘æ§çš„æ ¸å¿ƒçº¿ç¨‹</span>
mMonitorChecker = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HandlerChecker</span>(FgThread.getHandler(), <span class="hljs-string">"foreground thread"</span>);
mMonitorChecker.addMonitor(mAms); <span class="hljs-comment">// ActivityManagerService</span>
mMonitorChecker.addMonitor(mWms); <span class="hljs-comment">// WindowManagerService</span>
mMonitorChecker.addMonitor(mPms); <span class="hljs-comment">// PowerManagerService</span>
<span class="hljs-comment">// ...</span>
</code></pre>
<p>Watchdogçš„å·¥ä½œåŸç†:</p>
<ol>
<li>æ¯éš”30ç§’å‘è¢«ç›‘æ§çº¿ç¨‹çš„Handlerå‘é€æ¶ˆæ¯</li>
<li>å¦‚æœ60ç§’å†…æ²¡æœ‰æ”¶åˆ°å“åº”,åˆ¤å®šä¸ºåŠæ­»é”çŠ¶æ€</li>
<li>å¦‚æœè¶…è¿‡60ç§’(é»˜è®¤å€¼)ä»æ— å“åº”,è§¦å‘Watchdogé‡å¯</li>
<li>ç”Ÿæˆtraces.txtæ–‡ä»¶,è®°å½•æ‰€æœ‰çº¿ç¨‹å †æ ˆ</li>
</ol>

<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-section">æ­£å¸¸æƒ…å†µ:</span>
Watchdog â”€â”€å‘é€æ¶ˆæ¯â”€â”€â†’ æ ¸å¿ƒçº¿ç¨‹ â”€â”€30ç§’å†…å“åº”â”€â”€â†’ Watchdog: <span class="hljs-string">"ä¸€åˆ‡æ­£å¸¸"</span>

<span class="hljs-section">å¼‚å¸¸æƒ…å†µ:</span>
Watchdog â”€â”€å‘é€æ¶ˆæ¯â”€â”€â†’ æ ¸å¿ƒçº¿ç¨‹(å¡ä½äº†) â”€â”€60ç§’æ— å“åº”â”€â”€â†’ Watchdog: <span class="hljs-string">"é‡å¯System Server!"</span>
</code></pre>
<h4 data-id="heading-22">2.3 èµ„æºç®¡ç†æœºåˆ¶</h4>
<p>èµ„æºæ³„æ¼æ˜¯ç¨³å®šæ€§é—®é¢˜çš„å¸¸è§æ ¹å› ã€‚Androidå¯¹å‡ ç±»å…³é”®èµ„æºæœ‰ä¸“é—¨çš„ç®¡ç†æœºåˆ¶ã€‚</p>
<h5 data-id="heading-23">å†…å­˜ç®¡ç†</h5>
<p>Androidçš„å†…å­˜åˆ†ä¸ºå‡ ä¸ªåŒºåŸŸ:</p>






























<table><thead><tr><th>å†…å­˜ç±»å‹</th><th>è¯´æ˜</th><th>å…¸å‹é—®é¢˜</th></tr></thead><tbody><tr><td>Java Heap</td><td>Dalvik/ARTç®¡ç†çš„å †å†…å­˜</td><td>å†…å­˜æ³„æ¼å¯¼è‡´OOM</td></tr><tr><td>Native Heap</td><td>C/C++åˆ†é…çš„å†…å­˜</td><td>å¿˜è®°freeå¯¼è‡´æ³„æ¼</td></tr><tr><td>Graphics</td><td>GPUä½¿ç”¨çš„å›¾å½¢å†…å­˜</td><td>å¤§å›¾ç‰‡å¯¼è‡´OOM</td></tr><tr><td>Code</td><td>åŠ è½½çš„dex/soå ç”¨</td><td>åŠ è½½è¿‡å¤šåº“</td></tr></tbody></table>
<h5 data-id="heading-24">æ–‡ä»¶æè¿°ç¬¦(FD)ç®¡ç†</h5>
<p>æ¯ä¸ªè¿›ç¨‹å¯æ‰“å¼€çš„æ–‡ä»¶æè¿°ç¬¦æ•°é‡æ˜¯æœ‰é™çš„(é€šå¸¸æ˜¯1024ä¸ª)ã€‚FDæ³„æ¼ä¼šå¯¼è‡´:</p>
<ul>
<li>æ— æ³•æ‰“å¼€æ–°æ–‡ä»¶</li>
<li>æ— æ³•åˆ›å»ºæ–°Socket</li>
<li>æ— æ³•å»ºç«‹Binderè¿æ¥</li>
</ul>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æŸ¥çœ‹è¿›ç¨‹çš„FDä½¿ç”¨æƒ…å†µ</span>
adb shell <span class="hljs-built_in">ls</span> -la /proc/&lt;pid&gt;/fd | <span class="hljs-built_in">wc</span> -l

<span class="hljs-comment"># æŸ¥çœ‹FDé™åˆ¶</span>
adb shell <span class="hljs-built_in">cat</span> /proc/&lt;pid&gt;/limits | grep <span class="hljs-string">"open files"</span>
</code></pre>
<h5 data-id="heading-25">Binderèµ„æºç®¡ç†</h5>
<p>Binderæ˜¯Androidæœ€é‡è¦çš„IPCæœºåˆ¶,ä½†å®ƒçš„èµ„æºä¹Ÿæ˜¯æœ‰é™çš„:</p>
<ul>
<li><strong>Binderçº¿ç¨‹æ± </strong>: é»˜è®¤æœ€å¤š16ä¸ªçº¿ç¨‹</li>
<li><strong>Binderç¼“å†²åŒº</strong>: æ¯ä¸ªè¿›ç¨‹æœ€å¤§1MB(æ™®é€šåº”ç”¨)</li>
<li><strong>Binderä»£ç†å¯¹è±¡</strong>: æ•°é‡æœ‰ä¸Šé™</li>
</ul>
<p>å½“Binderèµ„æºè€—å°½æ—¶,è¿›ç¨‹é—´é€šä¿¡å°±ä¼šå¤±è´¥,è¡¨ç°ä¸ºANRæˆ–åŠŸèƒ½å¼‚å¸¸ã€‚</p>
<hr/>
<h3 data-id="heading-26">ä¸‰ã€ç¨³å®šæ€§é—®é¢˜åˆ†ç±»</h3>
<p>äº†è§£äº†ç¨³å®šæ€§æœºåˆ¶å,è®©æˆ‘ä»¬æ¥ç³»ç»Ÿåœ°åˆ†ç±»å„ç§ç¨³å®šæ€§é—®é¢˜ã€‚</p>
<h4 data-id="heading-27">3.1 æŒ‰ä¸¥é‡ç¨‹åº¦åˆ†ç±»</h4>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a39fd2a78d5742839b1506a3a821879d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yas5aWHTGFi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767357907&amp;x-signature=n1m%2F9wrnxMSiTDROyGyENnl0FlU%3D" alt="01-03-stability-classification.png" loading="lazy"/></p>
<pre><code class="hljs language-arduino" lang="arduino">ä¸¥é‡ç¨‹åº¦é‡‘å­—å¡”:

        /\
       /è‡´\        Kernel Panicã€System <span class="hljs-built_in">Server</span> Crash
      /å‘½çº§\       â†’ ç³»ç»Ÿé‡å¯,ç”¨æˆ·æ•°æ®å¯èƒ½ä¸¢å¤±
     /â”€â”€â”€â”€â”€â”€\
    / ä¸¥é‡çº§ \     Native Crashã€Watchdogé‡å¯
   /â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\    â†’ åŠŸèƒ½ä¸å¯ç”¨,éœ€è¦é‡å¯åº”ç”¨/ç³»ç»Ÿ
  /  é‡è¦çº§    \   ANRã€ç³»ç»ŸæœåŠ¡æ— å“åº”
 /â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\  â†’ ç”¨æˆ·ä½“éªŒä¸¥é‡ä¸‹é™
/    ä¸€èˆ¬çº§      \ åº”ç”¨Crashã€æ€§èƒ½å¡é¡¿
/â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\ â†’ å½±å“å•ä¸ªåº”ç”¨,ç”¨æˆ·å¯æ¢å¤
</code></pre>
<h4 data-id="heading-28">3.2 æŒ‰è¡¨ç°å½¢å¼åˆ†ç±»</h4>
<h5 data-id="heading-29">æ— å“åº”ç±»</h5>

























<table><thead><tr><th>é—®é¢˜</th><th>è¡¨ç°</th><th>å¸¸è§åŸå› </th></tr></thead><tbody><tr><td>ANR</td><td>å¼¹å‡º"åº”ç”¨æ— å“åº”"å¯¹è¯æ¡†</td><td>ä¸»çº¿ç¨‹é˜»å¡ã€æ­»é”</td></tr><tr><td>Systemæ— å“åº”</td><td>ç³»ç»Ÿå¡æ­»,æŒ‰é”®æ— ååº”</td><td>System Serveræ­»é”</td></tr><tr><td>é»‘å±</td><td>å±å¹•æ— æ˜¾ç¤º</td><td>SurfaceFlingeré—®é¢˜</td></tr></tbody></table>
<h5 data-id="heading-30">å´©æºƒç±»</h5>

























<table><thead><tr><th>é—®é¢˜</th><th>è¡¨ç°</th><th>å¸¸è§åŸå› </th></tr></thead><tbody><tr><td>Java Crash</td><td>åº”ç”¨é—ªé€€</td><td>ç©ºæŒ‡é’ˆã€æ•°ç»„è¶Šç•Œ</td></tr><tr><td>Native Crash</td><td>åº”ç”¨é—ªé€€,æœ‰tombstone</td><td>å†…å­˜è®¿é—®è¿è§„</td></tr><tr><td>Kernel Crash</td><td>ç³»ç»Ÿç›´æ¥é‡å¯</td><td>é©±åŠ¨bugã€ç¡¬ä»¶é—®é¢˜</td></tr></tbody></table>
<h5 data-id="heading-31">å¼‚å¸¸é‡å¯ç±»</h5>

























<table><thead><tr><th>é—®é¢˜</th><th>è¡¨ç°</th><th>å¸¸è§åŸå› </th></tr></thead><tbody><tr><td>Watchdogé‡å¯</td><td>çœ‹åˆ°å¼€æœºåŠ¨ç”»</td><td>ç³»ç»ŸæœåŠ¡æ­»é”</td></tr><tr><td>Kernel Panic</td><td>çªç„¶é‡å¯</td><td>å†…æ ¸å¼‚å¸¸</td></tr><tr><td>ç¡¬ä»¶Watchdog</td><td>çªç„¶é‡å¯</td><td>ç³»ç»Ÿå®Œå…¨å¡æ­»</td></tr></tbody></table>
<h4 data-id="heading-32">3.3 å¸¸è§æ ¹å› åˆ†æ</h4>
<p>ç»è¿‡å¤§é‡é—®é¢˜åˆ†æ,æˆ‘æ€»ç»“äº†ç¨³å®šæ€§é—®é¢˜çš„å¸¸è§æ ¹å› :</p>
<ol>
<li>
<p><strong>æ­»é”é—®é¢˜</strong> (çº¦25%)</p>
<ul>
<li>å¤šçº¿ç¨‹ç«äº‰åŒä¸€èµ„æº</li>
<li>Binderè°ƒç”¨å½¢æˆç¯è·¯</li>
<li>ä¸»çº¿ç¨‹ç­‰å¾…å­çº¿ç¨‹</li>
</ul>
</li>
<li>
<p><strong>èµ„æºè€—å°½</strong> (çº¦20%)</p>
<ul>
<li>å†…å­˜æ³„æ¼å¯¼è‡´OOM</li>
<li>FDæ³„æ¼</li>
<li>Binderèµ„æºè€—å°½</li>
</ul>
</li>
<li>
<p><strong>å†…å­˜è®¿é—®è¿è§„</strong> (çº¦15%)</p>
<ul>
<li>ç©ºæŒ‡é’ˆå¼•ç”¨</li>
<li>é‡æŒ‡é’ˆ</li>
<li>æ•°ç»„è¶Šç•Œ</li>
</ul>
</li>
<li>
<p><strong>å¹¶å‘ç«æ€</strong> (çº¦15%)</p>
<ul>
<li>å¤šçº¿ç¨‹è¯»å†™å†²çª</li>
<li>æ—¶åºé—®é¢˜</li>
</ul>
</li>
<li>
<p><strong>ç¬¬ä¸‰æ–¹SDKé—®é¢˜</strong> (çº¦10%)</p>
<ul>
<li>SDKå…¼å®¹æ€§é—®é¢˜</li>
<li>SDKå†…éƒ¨bug</li>
</ul>
</li>
<li>
<p><strong>å…¶ä»–</strong> (çº¦15%)</p>
<ul>
<li>é…ç½®é”™è¯¯</li>
<li>ç¡¬ä»¶å…¼å®¹æ€§</li>
<li>ç³»ç»Ÿbug</li>
</ul>
</li>
</ol>
<hr/>
<h3 data-id="heading-33">å››ã€ç¨³å®šæ€§åˆ†ææ€ç»´æ¡†æ¶</h3>
<p>å½“é‡åˆ°ç¨³å®šæ€§é—®é¢˜æ—¶,å¦‚ä½•é«˜æ•ˆåœ°å®šä½æ ¹å› ?è¿™é‡Œåˆ†äº«ä¸€å¥—å®ç”¨çš„åˆ†ææ¡†æ¶ã€‚</p>
<h4 data-id="heading-34">4.1 åˆ†ææµç¨‹</h4>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/47b8d166890d4fae9d12e3cfbe133364~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yas5aWHTGFi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767357907&amp;x-signature=KD63VvZdamCBTZarqkUvrz9rOaQ%3D" alt="01-04-analysis-workflow.png" loading="lazy"/></p>
<h4 data-id="heading-35">4.2 5W1Håˆ†ææ³•</h4>
<p>é¢å¯¹ç¨³å®šæ€§é—®é¢˜,æˆ‘ä¹ æƒ¯ç”¨5W1Hæ³•æ¥ç†æ¸…æ€è·¯:</p>








































<table><thead><tr><th>é—®é¢˜</th><th>è¯´æ˜</th><th>å¦‚ä½•è·å–</th></tr></thead><tbody><tr><td><strong>What</strong></td><td>å‘ç”Ÿäº†ä»€ä¹ˆ?</td><td>ç°è±¡æè¿°ã€é”™è¯¯ç±»å‹</td></tr><tr><td><strong>When</strong></td><td>ä»€ä¹ˆæ—¶å€™å‘ç”Ÿ?</td><td>æ—¶é—´æˆ³ã€å‘ç”Ÿé¢‘ç‡</td></tr><tr><td><strong>Where</strong></td><td>åœ¨å“ªé‡Œå‘ç”Ÿ?</td><td>æ¨¡å—ã€æ–‡ä»¶ã€ä»£ç è¡Œ</td></tr><tr><td><strong>Who</strong></td><td>è°å‡ºäº†é—®é¢˜?</td><td>è¿›ç¨‹ã€çº¿ç¨‹ã€ç»„ä»¶</td></tr><tr><td><strong>Why</strong></td><td>ä¸ºä»€ä¹ˆå‘ç”Ÿ?</td><td>æ ¹æœ¬åŸå› åˆ†æ</td></tr><tr><td><strong>How</strong></td><td>å¦‚ä½•å¤ç°?å¦‚ä½•è§£å†³?</td><td>å¤ç°æ­¥éª¤ã€ä¿®å¤æ–¹æ¡ˆ</td></tr></tbody></table>
<h4 data-id="heading-36">4.3 å·¥å…·ç®±æ¦‚è§ˆ</h4>
<p>å·¥æ¬²å–„å…¶äº‹,å¿…å…ˆåˆ©å…¶å™¨ã€‚ä»¥ä¸‹æ˜¯åˆ†æç¨³å®šæ€§é—®é¢˜çš„å¸¸ç”¨å·¥å…·:</p>
<h5 data-id="heading-37">æ—¥å¿—å·¥å…·</h5>

























<table><thead><tr><th>å·¥å…·</th><th>ç”¨é€”</th><th>å‘½ä»¤ç¤ºä¾‹</th></tr></thead><tbody><tr><td>logcat</td><td>æŸ¥çœ‹å®æ—¶æ—¥å¿—</td><td><code>adb logcat -v threadtime</code></td></tr><tr><td>DropBox</td><td>æŸ¥çœ‹ç³»ç»Ÿä¿å­˜çš„å¼‚å¸¸</td><td><code>adb shell dumpsys dropbox</code></td></tr><tr><td>bugreport</td><td>å¯¼å‡ºå®Œæ•´ç³»ç»Ÿæ—¥å¿—</td><td><code>adb bugreport</code></td></tr></tbody></table>
<h5 data-id="heading-38">åˆ†æå·¥å…·</h5>






























<table><thead><tr><th>å·¥å…·</th><th>ç”¨é€”</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>Systrace</td><td>ç³»ç»Ÿçº§æ€§èƒ½åˆ†æ</td><td>ANRã€å¡é¡¿é—®é¢˜</td></tr><tr><td>Perfetto</td><td>æ–°ä¸€ä»£traceå·¥å…·</td><td>å¤æ‚æ€§èƒ½é—®é¢˜</td></tr><tr><td>addr2line</td><td>Nativeç¬¦å·åŒ–</td><td>Native Crash</td></tr><tr><td>MAT</td><td>å†…å­˜åˆ†æ</td><td>å†…å­˜æ³„æ¼</td></tr></tbody></table>
<h5 data-id="heading-39">ç¤ºä¾‹:åˆ†æä¸€ä¸ªANR</h5>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># 1. è·å–ANR traces</span>
adb pull /data/anr/traces.txt

<span class="hljs-comment"># 2. æŸ¥çœ‹ANRåŸå› </span>
adb shell dumpsys activity anr

<span class="hljs-comment"># 3. åˆ†ætraces.txtä¸­çš„å †æ ˆ</span>
<span class="hljs-comment"># é‡ç‚¹å…³æ³¨mainçº¿ç¨‹çš„çŠ¶æ€:</span>
<span class="hljs-comment"># - å¦‚æœæ˜¯BLOCKED,æ‰¾å®ƒåœ¨ç­‰ä»€ä¹ˆé”</span>
<span class="hljs-comment"># - å¦‚æœæ˜¯WAITING,æ‰¾å®ƒåœ¨ç­‰ä»€ä¹ˆä¿¡å·</span>
<span class="hljs-comment"># - å¦‚æœåœ¨æ‰§è¡ŒæŸä¸ªæ–¹æ³•,åˆ†æè¯¥æ–¹æ³•ä¸ºä»€ä¹ˆæ…¢</span>

<span class="hljs-comment"># 4. ä½¿ç”¨Systraceè¿›ä¸€æ­¥åˆ†æ</span>
python systrace.py -o trace.html <span class="hljs-built_in">sched</span> freq idle am wm gfx view
</code></pre>
<hr/>
<h3 data-id="heading-40">äº”ã€å®æˆ˜æ¡ˆä¾‹:ä¸€ä¸ªçœŸå®çš„ANRåˆ†æ</h3>
<p>è®©æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªçœŸå®æ¡ˆä¾‹,æ¼”ç¤ºå¦‚ä½•è¿ç”¨ä¸Šé¢çš„çŸ¥è¯†è¿›è¡Œåˆ†æã€‚</p>
<h4 data-id="heading-41">é—®é¢˜ç°è±¡</h4>
<p>ç”¨æˆ·åé¦ˆ:åœ¨è®¾ç½®ä¸­åˆ‡æ¢WiFiæ—¶,ç»å¸¸å‡ºç°"ç³»ç»Ÿç•Œé¢æ— å“åº”"çš„å¼¹çª—ã€‚</p>
<h4 data-id="heading-42">åˆ†æè¿‡ç¨‹</h4>
<p><strong>Step 1: æ”¶é›†æ—¥å¿—</strong></p>
<pre><code class="hljs language-bash" lang="bash">adb bugreport
adb pull /data/anr/traces.txt
</code></pre>
<p><strong>Step 2: ç¡®å®šé—®é¢˜ç±»å‹</strong></p>
<p>ä»DropBoxä¸­æ‰¾åˆ°ANRè®°å½•:</p>
<pre><code class="hljs language-ini" lang="ini">Subject: Broadcast of Intent { <span class="hljs-attr">act</span>=android.net.wifi.WIFI_STATE_CHANGED }
ANR in com.android.systemui
PID: 1234
Reason: Broadcast of Intent { <span class="hljs-attr">act</span>=android.net.wifi.WIFI_STATE_CHANGED }
        waited 10003ms for android.intent.action.BATTERY_CHANGED
</code></pre>
<p>è¿™æ˜¯ä¸€ä¸ª<strong>Broadcast Timeout ANR</strong>ã€‚</p>
<p><strong>Step 3: åˆ†æå †æ ˆ</strong></p>
<p>ä»traces.txtä¸­æ‰¾åˆ°SystemUIçš„ä¸»çº¿ç¨‹:</p>
<pre><code class="hljs language-ini" lang="ini">"main" <span class="hljs-attr">prio</span>=<span class="hljs-number">5</span> tid=<span class="hljs-number">1</span> Blocked
  | <span class="hljs-attr">group</span>=<span class="hljs-string">"main"</span> sCount=<span class="hljs-number">1</span> dsCount=<span class="hljs-number">0</span> flags=<span class="hljs-number">1</span> obj=<span class="hljs-number">0</span>x74e04dd8 self=<span class="hljs-number">0</span>x7a4e014c00
  | <span class="hljs-attr">sysTid</span>=<span class="hljs-number">1234</span> nice=-<span class="hljs-number">2</span> cgrp=default sched=<span class="hljs-number">0</span>/<span class="hljs-number">0</span> handle=<span class="hljs-number">0</span>x7b5a9f49a8
  | <span class="hljs-attr">state</span>=S schedstat=( <span class="hljs-number">123456789</span> <span class="hljs-number">987654321</span> <span class="hljs-number">12345</span> ) utm=<span class="hljs-number">100</span> stm=<span class="hljs-number">50</span> core=<span class="hljs-number">2</span> HZ=<span class="hljs-number">100</span>
  at com.android.systemui.BatteryController.update(BatteryController.java:150)
  - waiting to lock &lt;0x0a1b2c3d&gt; (a java.lang.Object) held by thread 15
  at com.android.systemui.BatteryController.onReceive(BatteryController.java:100)
  ...
</code></pre>
<p>ä¸»çº¿ç¨‹åœ¨ç­‰ä¸€ä¸ªé”,è¿™ä¸ªé”è¢«çº¿ç¨‹15æŒæœ‰ã€‚</p>
<p><strong>Step 4: æ‰¾åˆ°æŒé”çº¿ç¨‹</strong></p>
<pre><code class="hljs language-lua" lang="lua"><span class="hljs-string">"BatteryStats"</span> prio=<span class="hljs-number">5</span> tid=<span class="hljs-number">15</span> Native
  | group=<span class="hljs-string">"main"</span> sCount=<span class="hljs-number">1</span> dsCount=<span class="hljs-number">0</span> flags=<span class="hljs-number">1</span> obj=<span class="hljs-number">0x13579bdf</span> <span class="hljs-built_in">self</span>=<span class="hljs-number">0x7a4e028800</span>
  at android.<span class="hljs-built_in">os</span>.BinderProxy.transactNative(Native Method)
  at android.<span class="hljs-built_in">os</span>.BinderProxy.transact(Binder.java:<span class="hljs-number">1129</span>)
  at com.android.internal.<span class="hljs-built_in">os</span>.IBatteryStats$Stub$Proxy.noteWifiOn(IBatteryStats.java:<span class="hljs-number">2046</span>)
  ...
</code></pre>
<p>çº¿ç¨‹15æ­£åœ¨è¿›è¡ŒBinderè°ƒç”¨,ç­‰å¾…BatteryStatsServiceå“åº”ã€‚</p>
<p><strong>Step 5: æ ¹å› åˆ†æ</strong></p>
<p>ç»è¿‡è¿›ä¸€æ­¥åˆ†æå‘ç°,BatteryStatsServiceæ­£åœ¨è¿›è¡Œä¸€ä¸ªè€—æ—¶çš„ç»Ÿè®¡æ“ä½œ,å¯¼è‡´Binderè°ƒç”¨è¶…æ—¶ã€‚æœ€ç»ˆå½¢æˆäº†è¿™æ ·çš„ç­‰å¾…é“¾:</p>
<pre><code class="hljs">ä¸»çº¿ç¨‹ç­‰å¾…é” â†’ çº¿ç¨‹15æŒæœ‰é”ä½†åœ¨ç­‰Binder â†’ BatteryStatsServiceç¹å¿™
</code></pre>
<p><strong>Step 6: è§£å†³æ–¹æ¡ˆ</strong></p>
<ol>
<li>å°†BatteryControllerçš„æ›´æ–°æ“ä½œç§»åˆ°å­çº¿ç¨‹</li>
<li>ä¼˜åŒ–BatteryStatsServiceçš„ç»Ÿè®¡é€»è¾‘</li>
</ol>
<hr/>
<h3 data-id="heading-43">å…­ã€åç»­æ–‡ç« é¢„å‘Š</h3>
<p>æœ¬æ–‡ä½œä¸ºç³»åˆ—å¼€ç¯‡,å»ºç«‹äº†ç³»ç»Ÿç¨³å®šæ€§çš„åŸºç¡€è®¤çŸ¥æ¡†æ¶ã€‚åœ¨åç»­æ–‡ç« ä¸­,æˆ‘ä»¬å°†æ·±å…¥æ¯ä¸ªä¸“é¢˜:</p>






























<table><thead><tr><th>æ–‡ç« </th><th>ä¸»é¢˜</th><th>ä½ å°†å­¦åˆ°</th></tr></thead><tbody><tr><td>ç¬¬2ç¯‡</td><td>ANRæœºåˆ¶æ·±åº¦è§£æ</td><td>ANRçš„è§¦å‘ã€æ£€æµ‹ã€ä¸ŠæŠ¥å…¨æµç¨‹</td></tr><tr><td>ç¬¬3ç¯‡</td><td>ANRé—®é¢˜æ’æŸ¥å®æˆ˜</td><td>traces.txtåˆ†ææŠ€å·§ã€å¸¸è§ANRæ¡ˆä¾‹</td></tr><tr><td>ç¬¬4ç¯‡</td><td>Native Crashåˆ†æ</td><td>tombstoneè§£è¯»ã€addr2lineä½¿ç”¨</td></tr><tr><td>ç¬¬5ç¯‡</td><td>Watchdogæœºåˆ¶</td><td>ç³»ç»Ÿçœ‹é—¨ç‹—çš„å·¥ä½œåŸç†</td></tr></tbody></table>
<p>æ•¬è¯·æœŸå¾…!</p>
<hr/>
<h3 data-id="heading-44">æ€»ç»“</h3>
<p>æœ¬æ–‡ä»Androidç³»ç»Ÿæ¶æ„å‡ºå‘,ä»‹ç»äº†ç³»ç»Ÿç¨³å®šæ€§çš„æ ¸å¿ƒæ¦‚å¿µ:</p>
<ol>
<li><strong>åˆ†å±‚æ¶æ„</strong>: ç†è§£Androidäº”å±‚æ¶æ„åŠå„å±‚çš„ç¨³å®šæ€§å½±å“</li>
<li><strong>å…³é”®è¿›ç¨‹</strong>: Zygoteã€System Serverã€SurfaceFlingeræ˜¯ç³»ç»Ÿçš„"ç”Ÿå‘½çº¿"</li>
<li><strong>æ ¸å¿ƒæœºåˆ¶</strong>: è¿›ç¨‹ä¼˜å…ˆçº§ã€LMKã€ANRæ£€æµ‹ã€Watchdogæ„æˆäº†ç¨³å®šæ€§ä¿éšœä½“ç³»</li>
<li><strong>é—®é¢˜åˆ†ç±»</strong>: æŒ‰ä¸¥é‡ç¨‹åº¦å’Œè¡¨ç°å½¢å¼å¯¹ç¨³å®šæ€§é—®é¢˜è¿›è¡Œåˆ†ç±»</li>
<li><strong>åˆ†ææ¡†æ¶</strong>: 5W1Håˆ†ææ³•å’Œå·¥å…·ç®±å¸®åŠ©é«˜æ•ˆå®šä½é—®é¢˜</li>
</ol>
<p>ç³»ç»Ÿç¨³å®šæ€§ä¸æ˜¯ä¸€æœä¸€å¤•èƒ½æŒæ¡çš„,éœ€è¦åœ¨å®è·µä¸­ä¸æ–­ç§¯ç´¯ã€‚å¸Œæœ›æœ¬æ–‡èƒ½å¸®ä½ å»ºç«‹èµ·æ­£ç¡®çš„è®¤çŸ¥æ¡†æ¶,åœ¨é¢å¯¹ç¨³å®šæ€§é—®é¢˜æ—¶ä¸å†è¿·èŒ«ã€‚</p>
<hr/>
<h3 data-id="heading-45">å‚è€ƒèµ„æ–™</h3>
<ol>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.android.com%2Fguide%2Fplatform" target="_blank" title="https://developer.android.com/guide/platform" ref="nofollow noopener noreferrer">Androidå®˜æ–¹æ–‡æ¡£ - ç³»ç»Ÿæ¶æ„</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fcs.android.com%2Fandroid%2Fplatform%2Fsuperproject%2F%2B%2Fmaster%3Aframeworks%2Fbase%2Fservices%2Fcore%2Fjava%2Fcom%2Fandroid%2Fserver%2Fam%2F" target="_blank" title="https://cs.android.com/android/platform/superproject/+/master:frameworks/base/services/core/java/com/android/server/am/" ref="nofollow noopener noreferrer">AOSPæºç  - ActivityManagerService</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fbook.douban.com%2Fsubject%2F25921329%2F" target="_blank" title="https://book.douban.com/subject/25921329/" ref="nofollow noopener noreferrer">æ·±å…¥ç†è§£Androidå†…æ ¸è®¾è®¡æ€æƒ³</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fbook.douban.com%2Fsubject%2F19986441%2F" target="_blank" title="https://book.douban.com/subject/19986441/" ref="nofollow noopener noreferrer">Androidç³»ç»Ÿæºä»£ç æƒ…æ™¯åˆ†æ</a></li>
</ol>
<hr/>
<blockquote>
<p><strong>ä½œè€…ç®€ä»‹</strong>: å¤šå¹´Androidç³»ç»Ÿå¼€å‘ç»éªŒ,ä¸“æ³¨äºç³»ç»Ÿç¨³å®šæ€§ä¸æ€§èƒ½ä¼˜åŒ–é¢†åŸŸã€‚æ¬¢è¿å…³æ³¨æœ¬ç³»åˆ—,ä¸€èµ·æ·±å…¥Androidç³»ç»Ÿçš„ç²¾å½©ä¸–ç•Œ!</p>
</blockquote>
<p><strong>æ‰¾åˆ°æˆ‘</strong>: <a href="https://link.juejin.cn?target=https%3A%2F%2Fhome.wonlab.top" target="_blank" title="https://home.wonlab.top" ref="nofollow noopener noreferrer">ä¸ªäººä¸»é¡µ</a><br/>
<strong>è¿”å›ä¸“æ ç›®å½•</strong>: <a href="https://juejin.cn/post/7587473691170095104" target="_blank" title="https://juejin.cn/post/7587473691170095104">Androidç¨³å®šæ€§&amp;æ€§èƒ½æ·±å…¥ç†è§£ä¸“æ ä»‹ç»</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[LangChain Tool å®æˆ˜ï¼šè®©å¤§æ¨¡å‹â€œé•¿å‡ºåŒæ‰‹â€ï¼Œé€šè¿‡ Tool è°ƒç”¨è¿æ¥çœŸå®ä¸–ç•Œ]]></title>    <link>https://juejin.cn/post/7588034035286425615</link>    <guid>https://juejin.cn/post/7588034035286425615</guid>    <pubDate>2025-12-26T15:51:50.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588034035286425615" data-draft-id="7587997157237489716" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content=" LangChain Tool å®æˆ˜ï¼šè®©å¤§æ¨¡å‹â€œé•¿å‡ºåŒæ‰‹â€ï¼Œé€šè¿‡ Tool è°ƒç”¨è¿æ¥çœŸå®ä¸–ç•Œ"/> <meta itemprop="keywords" content="LangChain,Node.js,AIGC"/> <meta itemprop="datePublished" content="2025-12-26T15:51:50.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¥ç§˜çš„çŒªå¤´"/> <meta itemprop="url" content="https://juejin.cn/user/793223472877051"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
             LangChain Tool å®æˆ˜ï¼šè®©å¤§æ¨¡å‹â€œé•¿å‡ºåŒæ‰‹â€ï¼Œé€šè¿‡ Tool è°ƒç”¨è¿æ¥çœŸå®ä¸–ç•Œ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/793223472877051/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¥ç§˜çš„çŒªå¤´
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-26T15:51:50.000Z" title="Fri Dec 26 2025 15:51:50 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p><strong>å‰è¨€</strong></p>
<p>å¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰é€šå¸¸è¢«æ¯”ä½œâ€œå¤§è„‘â€ï¼Œå®ƒæ‹¥æœ‰æµ·é‡çš„çŸ¥è¯†å’Œå¼ºå¤§çš„é€»è¾‘æ¨ç†èƒ½åŠ›ã€‚ä½†æ˜¯ï¼Œä¸€ä¸ªåªæœ‰å¤§è„‘çš„æ™ºè€…ï¼Œå¦‚æœæ— æ³•æ„ŸçŸ¥å½“ä¸‹çš„æ—¶é—´ã€æ— æ³•æŸ¥è¯¢å®æ—¶çš„å¤©æ°”ã€æ— æ³•è¿›è¡Œç²¾ç¡®çš„æ•°å­¦è¿ç®—ï¼Œå®ƒçš„èƒ½åŠ›å°±ä¼šå¤§æ‰“æŠ˜æ‰£ã€‚</p>
<p><strong>Toolsï¼ˆå·¥å…·ï¼‰</strong> æ¨¡å—ï¼Œå°±æ˜¯ LangChain èµ‹äºˆå¤§æ¨¡å‹çš„â€œåŒæ‰‹â€å’Œâ€œæ„Ÿå®˜â€ã€‚é€šè¿‡ Toolsï¼Œæˆ‘ä»¬å¯ä»¥è®©å¤§æ¨¡å‹ä¸ä»…ä»…æ˜¯é™ªèŠï¼Œè€Œæ˜¯çœŸæ­£å…·å¤‡<strong>è°ƒç”¨å¤–éƒ¨å‡½æ•°ã€æ‰§è¡Œå¤æ‚ä»»åŠ¡</strong>çš„èƒ½åŠ›ã€‚</p>
<p>æœ¬æ–‡å°†ç»“åˆä¸€æ®µåŸºäº <code>ChatDeepSeek</code> çš„å®æˆ˜ä»£ç ï¼Œå¸¦ä½ ä»é›¶å¼€å§‹ï¼Œæ·±å…¥ç†è§£å¦‚ä½•åœ¨ LangChain ä¸­å®šä¹‰å·¥å…·ã€ä½¿ç”¨ Zod è¿›è¡Œå‚æ•°æ ¡éªŒï¼Œä»¥åŠå¦‚ä½•ä¼˜é›…åœ°å¤„ç†æ¨¡å‹è¿”å›çš„å·¥å…·è°ƒç”¨è¯·æ±‚ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-0">ä¸€ã€ ä¸ºä»€ä¹ˆæˆ‘ä»¬éœ€è¦ Toolï¼Ÿ</h2>
<p>åœ¨æ·±å…¥ä»£ç ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ€è€ƒä¸€ä¸ªé—®é¢˜ï¼šä¸ºä»€ä¹ˆ ChatGPT æœ‰æ—¶å€™åšä¸å¥½ç®€å•çš„åŠ å‡æ³•ï¼Ÿä¸ºä»€ä¹ˆå®ƒä¸çŸ¥é“ä»Šå¤©åŒ—äº¬çš„å¤©æ°”ï¼Ÿ</p>
<p>å› ä¸ºå¤§æ¨¡å‹çš„æœ¬è´¨æ˜¯<strong>æ¦‚ç‡é¢„æµ‹</strong>ï¼Œå®ƒæ˜¯åŸºäºè®­ç»ƒæ•°æ®ç”Ÿæˆä¸‹ä¸€ä¸ªå­—çš„ï¼Œè€Œä¸æ˜¯åŸºäºé€»è¾‘è¿ç®—æˆ–å®æ—¶æ•°æ®åº“ã€‚</p>
<ul>
<li><strong>æ•°å­¦è®¡ç®—</strong>ï¼šå¤§æ¨¡å‹æ˜¯â€œæ–‡ç§‘ç”Ÿâ€ï¼Œå¤æ‚çš„è®¡ç®—å®¹æ˜“äº§ç”Ÿå¹»è§‰ã€‚</li>
<li><strong>å®æ—¶ä¿¡æ¯</strong>ï¼šå¤§æ¨¡å‹çš„è®­ç»ƒæ•°æ®æˆªæ­¢äºè¿‡å»ï¼Œå®ƒæ— æ³•é¢„çŸ¥â€œä»Šå¤©â€å‘ç”Ÿçš„äº‹æƒ…ã€‚</li>
</ul>
<p><strong>LangChain Tool çš„å‡ºç°è§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚</strong> å®ƒçš„æ ¸å¿ƒæ€æƒ³æ˜¯ï¼š
å½“ç”¨æˆ·é—®â€œ1234 + 5678 ç­‰äºå‡ ï¼Ÿâ€æ—¶ï¼Œå¤§æ¨¡å‹ä¸å†è‡ªå·±ççŒœï¼Œè€Œæ˜¯åˆ†æå‡ºâ€œå“¦ï¼Œè¿™æ˜¯ä¸€ä¸ªè®¡ç®—ä»»åŠ¡â€ï¼Œç„¶åå‘Šè¯‰ç¨‹åºï¼šâ€œè¯·å¸®æˆ‘è°ƒç”¨ <code>add</code> å·¥å…·ï¼Œå‚æ•°æ˜¯ <code>a=1234, b=5678</code>â€ã€‚ç¨‹åºè¿è¡Œå®Œä»£ç åï¼Œå°†ç»“æœåé¦ˆç»™ç”¨æˆ·ã€‚</p>
<blockquote>
<p>è¿˜æœ‰ä¸€ä¸ªé‡è¦ä½œç”¨åœ¨äºï¼šå¯¹äºç®€å•ä»»åŠ¡ï¼Œæ— éœ€è°ƒç”¨å¤§æ¨¡å‹è‡ªè¡Œå¤„ç†ï¼Œä»è€ŒèŠ‚çœå®è´µçš„ <strong>token</strong>ï¼›è€Œå¯¹äºå¤§æ¨¡å‹æœ¬èº«éš¾ä»¥å®Œæˆçš„ç‰¹å®šä»»åŠ¡ <strong>(å®æ—¶æ„ŸçŸ¥ã€ç²¾å‡†æ‰§è¡Œæˆ–å¤–éƒ¨æ“ä½œ.....)</strong>ï¼Œåˆ™å¯ä»¥é€šè¿‡è°ƒç”¨å¤–éƒ¨å·¥å…·æ¥æ‰©å±•å…¶èƒ½åŠ›ï¼Œä½¿å…¶èƒ½å¤Ÿé—´æ¥å®Œæˆè¿™äº›å·¥ä½œã€‚</p>
</blockquote>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†é€šè¿‡ä»£ç ä¸€æ­¥æ­¥å®ç°è¿™ä¸ªè¿‡ç¨‹ã€‚</p>
<hr/>
<h2 data-id="heading-1">äºŒã€ åŸºç¡€å…¥é—¨ï¼šå®šä¹‰ä¸€ä¸ªç®€å•çš„â€œåŠ æ³•å·¥å…·â€</h2>
<p>æˆ‘ä»¬è¦è®²çš„ç¬¬ä¸€ä¸ªçŸ¥è¯†ç‚¹æ˜¯ï¼š<strong>å¦‚ä½•å®šä¹‰ä¸€ä¸ªå·¥å…·</strong>ã€‚</p>
<p>åœ¨ LangChain ä¸­ï¼Œ<code>tool</code> å‡½æ•°æ˜¯æ ¸å¿ƒã€‚æˆ‘ä»¬éœ€è¦å¼•å…¥å®ƒï¼Œå¹¶é…åˆ <code>zod</code> åº“æ¥å®šä¹‰å‚æ•°ç»“æ„ã€‚</p>
<h3 data-id="heading-2">1. å¼•å…¥å¿…è¦çš„ä¾èµ–</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">ChatDeepSeek</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@langchain/deepseek"</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">'dotenv/config'</span>;
<span class="hljs-keyword">import</span> { tool } <span class="hljs-keyword">from</span> <span class="hljs-string">"@langchain/core/tools"</span>;
<span class="hljs-keyword">import</span> { z } <span class="hljs-keyword">from</span> <span class="hljs-string">"zod"</span>; <span class="hljs-comment">// å…³é”®ï¼šç”¨äºå®šä¹‰å‡½æ•°å‚æ•°çš„ç±»å‹ schema</span>
</code></pre>
<p>è¿™é‡Œé‡ç‚¹ä»‹ç»ä¸€ä¸‹ <strong><code>zod</code></strong>ã€‚
å¤§æ¨¡å‹è¾“å‡ºçš„æ˜¯æ–‡æœ¬ï¼ˆJSON å­—ç¬¦ä¸²ï¼‰ï¼Œè€Œæˆ‘ä»¬çš„å‡½æ•°éœ€è¦çš„æ˜¯å…·ä½“çš„å˜é‡ï¼ˆå¦‚æ•°å­—ã€å­—ç¬¦ä¸²ï¼‰ã€‚<strong>Zod çš„ä½œç”¨å°±æ˜¯å»ºç«‹ä¸€ä¸ªâ€œå¥‘çº¦â€</strong>ï¼šå®ƒå‘Šè¯‰å¤§æ¨¡å‹ï¼Œâ€œå¦‚æœä½ è¦è°ƒç”¨è¿™ä¸ªå·¥å…·ï¼Œä½ å¿…é¡»ç»™æˆ‘ä¼ ä»€ä¹ˆæ ·çš„å‚æ•°ï¼Œæ˜¯æ•°å­—è¿˜æ˜¯å­—ç¬¦ä¸²â€ã€‚è¿™å¤§å¤§æé«˜äº†å·¥å…·è°ƒç”¨çš„å‡†ç¡®æ€§ã€‚</p>
<h3 data-id="heading-3">2. ç¼–å†™åŠ æ³•å·¥å…· (<code>addTool</code>)</h3>
<p>æˆ‘ä»¬å…ˆä»æœ€ç®€å•çš„åŠ æ³•å¼€å§‹ï¼Œè®©å¤§æ¨¡å‹å­¦ä¼šç®—æœ¯ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å‡½æ•° å®šä¹‰ä¸€ä¸ªåŠ æ³•å·¥å…·</span>
<span class="hljs-keyword">const</span> addTool = <span class="hljs-title function_">tool</span>(
    <span class="hljs-comment">// 1. å·¥å…·çš„å…·ä½“é€»è¾‘ï¼ˆå‡½æ•°ä½“ï¼‰</span>
    <span class="hljs-comment">// è¿™é‡Œæ¥æ”¶ä¸€ä¸ªå¯¹è±¡ï¼Œè§£æ„å‡º a å’Œ b</span>
    <span class="hljs-comment">// æ³¨æ„ï¼šæ‰€æœ‰å·¥å…·å‡½æ•°çš„å‚æ•°é€šå¸¸éƒ½ä¼šè¢«åŒ…è£…æˆä¸€ä¸ªå¯¹è±¡</span>
    <span class="hljs-keyword">async</span> ({a, b}) =&gt; <span class="hljs-title class_">String</span>(a + b), 
    {
        <span class="hljs-comment">// 2. å·¥å…·çš„å…ƒæ•°æ®ï¼ˆMetadataï¼‰</span>
        <span class="hljs-attr">name</span>: <span class="hljs-string">"add"</span>, <span class="hljs-comment">// å·¥å…·åç§°ï¼Œå¤§æ¨¡å‹é€šè¿‡è¿™ä¸ªåå­—è¯†åˆ«å·¥å…·</span>
        <span class="hljs-attr">description</span>: <span class="hljs-string">"è®¡ç®—ä¸¤ä¸ªæ•°å­—çš„å’Œ"</span>, <span class="hljs-comment">// å·¥å…·æè¿°ï¼Œéå¸¸é‡è¦ï¼è¿™ç›¸å½“äºå†™ç»™å¤§æ¨¡å‹çš„ Promptï¼Œå‘Šè¯‰å®ƒä»€ä¹ˆæ—¶å€™ç”¨è¿™ä¸ªå·¥å…·</span>
        
        <span class="hljs-comment">// 3. å‚æ•° Schema å®šä¹‰</span>
        <span class="hljs-attr">schema</span>: z.<span class="hljs-title function_">object</span>({
            <span class="hljs-attr">a</span>: z.<span class="hljs-title function_">number</span>().<span class="hljs-title function_">describe</span>(<span class="hljs-string">"åŠ æ•° a"</span>), <span class="hljs-comment">// æ˜ç¡®å‘Šè¯‰æ¨¡å‹ï¼Œa å¿…é¡»æ˜¯ä¸€ä¸ªæ•°å­—</span>
            <span class="hljs-attr">b</span>: z.<span class="hljs-title function_">number</span>().<span class="hljs-title function_">describe</span>(<span class="hljs-string">"åŠ æ•° b"</span>)  <span class="hljs-comment">// b ä¹Ÿå¿…é¡»æ˜¯ä¸€ä¸ªæ•°å­—</span>
        })
    }
)
</code></pre>
<p><strong>ä»£ç æ·±åº¦è§£æï¼š</strong></p>
<ul>
<li><strong><code>tool(function, options)</code></strong>: è¿™æ˜¯å®šä¹‰å·¥å…·çš„æ ‡å‡†èŒƒå¼ã€‚ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å®é™…æ‰§è¡Œçš„ JavaScript å‡½æ•°ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯é…ç½®å¯¹è±¡ã€‚</li>
<li><strong><code>async ({a, b})</code></strong>: LangChain çš„å·¥å…·è°ƒç”¨é€šå¸¸æ˜¯å¼‚æ­¥çš„ã€‚å‚æ•°è¢«è®¾è®¡ä¸ºè§£æ„å½¢å¼ï¼Œè¿™æ˜¯ä¸ºäº†é…åˆ Zod å®šä¹‰çš„ Object Schemaã€‚</li>
<li><strong><code>description</code></strong>: åƒä¸‡ä¸è¦å¿½è§†æè¿°ï¼å¤§æ¨¡å‹æ­£æ˜¯é€šè¿‡è¿™æ®µæ–‡å­—æ¥åˆ¤æ–­ç”¨æˆ·çš„é—®é¢˜æ˜¯å¦éœ€è¦ä½¿ç”¨è¯¥å·¥å…·ã€‚å¦‚æœæè¿°å†™å¾—å«ç³Šï¼Œæ¨¡å‹å¯èƒ½å°±ä¸ä¼šè°ƒç”¨å®ƒã€‚</li>
<li><strong><code>z.number()</code></strong>: è¿™é‡Œé™åˆ¶äº† <code>a</code> å’Œ <code>b</code> å¿…é¡»æ˜¯æ•°å­—ã€‚å¦‚æœæ¨¡å‹æŠ½é£ä¼ äº†å­—ç¬¦ä¸²ï¼ŒZod ä¼šåœ¨åº•å±‚è¿›è¡Œæ ¡éªŒæˆ–æŠ¥é”™ï¼Œä¿è¯äº†ç¨‹åºçš„å¥å£®æ€§ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-4">ä¸‰ã€ è¿›é˜¶å®æˆ˜ï¼šå®šä¹‰â€œå¤©æ°”æŸ¥è¯¢å·¥å…·â€</h2>
<p>å­¦ä¼šäº†ç®€å•çš„åŠ æ³•ï¼Œæˆ‘ä»¬æ¥æ¨¡æ‹Ÿä¸€ä¸ªæ›´è´´è¿‘çœŸå®åœºæ™¯çš„ä¸šåŠ¡â€”â€”æŸ¥è¯¢å¤©æ°”ã€‚
ç”±äºæˆ‘ä»¬æ²¡æœ‰è¿æ¥çœŸå®çš„æ°”è±¡å±€ APIï¼Œè¿™é‡Œæˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªâ€œä¼ªæ•°æ®åº“â€æ¥æ¨¡æ‹Ÿã€‚</p>
<h3 data-id="heading-5">1. æ¨¡æ‹Ÿæ•°æ®æº</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> fakeWeatherDB = {
    åŒ—äº¬: { <span class="hljs-attr">temp</span>: <span class="hljs-string">"30Â°C"</span>, <span class="hljs-attr">condition</span>: <span class="hljs-string">"æ™´"</span>, <span class="hljs-attr">wind</span>: <span class="hljs-string">"å¾®é£"</span> },
    ä¸Šæµ·: { <span class="hljs-attr">temp</span>: <span class="hljs-string">"28Â°C"</span>, <span class="hljs-attr">condition</span>: <span class="hljs-string">"å¤šäº‘"</span>, <span class="hljs-attr">wind</span>: <span class="hljs-string">"ä¸œé£ 3 çº§"</span> },
    å¹¿å·: { <span class="hljs-attr">temp</span>: <span class="hljs-string">"32Â°C"</span>, <span class="hljs-attr">condition</span>: <span class="hljs-string">"é˜µé›¨"</span>, <span class="hljs-attr">wind</span>: <span class="hljs-string">"å—é£ 2 çº§"</span> }
}
</code></pre>
<h3 data-id="heading-6">2. ç¼–å†™å¤©æ°”å·¥å…· (<code>weatherTool</code>)</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> weatherTool = <span class="hljs-title function_">tool</span>(
    <span class="hljs-keyword">async</span> ({city}) =&gt; {
        <span class="hljs-comment">// æ¨¡æ‹Ÿæ•°æ®åº“æŸ¥è¯¢</span>
        <span class="hljs-keyword">const</span> weather = fakeWeatherDB[city];
        <span class="hljs-comment">// è¾¹ç•Œæƒ…å†µå¤„ç†</span>
        <span class="hljs-keyword">if</span>(!weather){
            <span class="hljs-keyword">return</span> <span class="hljs-string">`åŸå¸‚<span class="hljs-subst">${city}</span>çš„å¤©æ°”æœªæ‰¾åˆ°`</span>;
        }
        <span class="hljs-comment">// è¿”å›è‡ªç„¶è¯­è¨€æè¿°çš„ç»“æœï¼Œæ–¹ä¾¿å¤§æ¨¡å‹ç†è§£</span>
       <span class="hljs-keyword">return</span> <span class="hljs-string">`å½“å‰<span class="hljs-subst">${city}</span>çš„å¤©æ°”æ˜¯<span class="hljs-subst">${weather.temp}</span>,<span class="hljs-subst">${weather.condition}</span>, é£åŠ›<span class="hljs-subst">${weather.wind}</span>`</span>;
    },
    {
        <span class="hljs-attr">name</span>: <span class="hljs-string">"get_weather"</span>,
        <span class="hljs-attr">description</span>: <span class="hljs-string">"æŸ¥è¯¢æŒ‡å®šåŸå¸‚çš„ä»Šæ—¥å¤©æ°”æƒ…å†µ"</span>, <span class="hljs-comment">// æ˜ç¡®çš„åŠŸèƒ½æè¿°</span>
        <span class="hljs-attr">schema</span>: z.<span class="hljs-title function_">object</span>({
            <span class="hljs-comment">// z.string() è§„å®šå‚æ•° city å¿…é¡»æ˜¯å­—ç¬¦ä¸²</span>
            <span class="hljs-comment">// .describe() è¿›ä¸€æ­¥è§£é‡Šå‚æ•°å«ä¹‰ï¼Œå¸®åŠ©æ¨¡å‹æå–æ­£ç¡®çš„å®ä½“</span>
            <span class="hljs-attr">city</span>: z.<span class="hljs-title function_">string</span>().<span class="hljs-title function_">describe</span>(<span class="hljs-string">"è¦æŸ¥è¯¢å¤©æ°”çš„åŸå¸‚"</span>) 
        })
    }
)
</code></pre>
<p><strong>çŸ¥è¯†ç‚¹å»¶ä¼¸ï¼š</strong>
åœ¨ <code>weatherTool</code> ä¸­ï¼Œæˆ‘ä»¬çœ‹åˆ°äº†å·¥å…·ä¸ä»…ä»…æ˜¯è®¡ç®—ï¼Œè¿˜å¯ä»¥æ˜¯<strong>æŸ¥è¡¨ã€è¯·æ±‚ APIã€è¯»å–æ–‡ä»¶</strong>ã€‚</p>
<ul>
<li><strong>è¿”å›å€¼</strong>ï¼šå·¥å…·çš„è¿”å›å€¼é€šå¸¸æ˜¯å­—ç¬¦ä¸²ã€‚ä¸ºä»€ä¹ˆï¼Ÿå› ä¸ºè¿™ä¸ªè¿”å›å€¼æœ€ç»ˆæ˜¯è¦å–‚å›ç»™å¤§æ¨¡å‹çš„ï¼Œå¤§æ¨¡å‹ç†è§£æ–‡æœ¬èƒ½åŠ›æœ€å¼ºã€‚</li>
<li><strong>Error Handling</strong>ï¼šæˆ‘ä»¬åœ¨ä»£ç ä¸­åˆ¤æ–­äº† <code>if(!weather)</code>ã€‚åœ¨çœŸå®å¼€å‘ä¸­ï¼Œå·¥å…·å†…éƒ¨åšå¥½é”™è¯¯å¤„ç†éå¸¸é‡è¦ï¼Œå¦åˆ™ä¸€ä¸ªå¼‚å¸¸å¯èƒ½å¯¼è‡´æ•´ä¸ªå¯¹è¯å´©å¡Œã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-7">å››ã€ é“¾æ¥å¤§è„‘ï¼šç»‘å®šå·¥å…·åˆ°æ¨¡å‹</h2>
<p>å·¥å…·å®šä¹‰å¥½äº†ï¼Œå°±åƒå®¶é‡Œä¹°äº†å¸å°˜å™¨å’Œæ´—ç¢—æœºï¼Œä½†å¦‚æœä½œä¸ºâ€œç®¡å®¶â€çš„å¤§æ¨¡å‹ä¸çŸ¥é“å®ƒä»¬çš„å­˜åœ¨ï¼Œä¹Ÿæ˜¯ç™½æ­ã€‚æˆ‘ä»¬éœ€è¦å°†å·¥å…·**ç»‘å®šï¼ˆBindï¼‰**åˆ°æ¨¡å‹ä¸Šã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å®ä¾‹åŒ– DeepSeek æ¨¡å‹</span>
<span class="hljs-keyword">const</span> model = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ChatDeepSeek</span>({
    <span class="hljs-attr">model</span>: <span class="hljs-string">'deepseek-chat'</span>,
    <span class="hljs-attr">temperature</span>: <span class="hljs-number">0</span> <span class="hljs-comment">// è®¾ç½®ä¸º 0ï¼Œè®©æ¨¡å‹æ›´ç†æ€§ã€é€»è¾‘æ›´ä¸¥å¯†ï¼Œå‡å°‘èƒ¡è¨€ä¹±è¯­</span>
}).<span class="hljs-title function_">bindTools</span>([addTool, weatherTool]) <span class="hljs-comment">// æ ¸å¿ƒæ­¥éª¤ï¼šç»‘å®šå·¥å…·æ•°ç»„</span>
</code></pre>
<p><strong>è§£æï¼š</strong></p>
<ul>
<li><strong><code>.bindTools([...])</code></strong>: è¿™ä¸€æ­¥å‘ç”Ÿäº†å¾ˆå¤šé­”æ³•ã€‚LangChain ä¼šè‡ªåŠ¨å°†æˆ‘ä»¬è¦å®šä¹‰çš„ <code>addTool</code> å’Œ <code>weatherTool</code> çš„ <code>name</code>ã€<code>description</code> ä»¥åŠ <code>zod schema</code> è½¬æ¢æˆ OpenAI å…¼å®¹çš„ JSON æ ¼å¼ï¼Œå¹¶å‘é€ç»™ DeepSeek æ¨¡å‹ã€‚</li>
<li>æ­¤æ—¶ï¼Œæ¨¡å‹ä¸ä»…çŸ¥é“â€œæˆ‘æ˜¯è°â€ï¼Œè¿˜çŸ¥é“â€œæˆ‘æ‰‹è¾¹æœ‰ä¸¤ä¸ªå·¥å…·ï¼šä¸€ä¸ªèƒ½ç®—åŠ æ³•ï¼Œä¸€ä¸ªèƒ½æŸ¥å¤©æ°”â€ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-8">äº”ã€ è§¦å‘è°ƒç”¨ä¸ç»“æœå¤„ç†ï¼ˆé‡ç‚¹ï¼šå¯é€‰é“¾è¿ç®—ç¬¦ï¼‰</h2>
<p>ä¸‡äº‹ä¿±å¤‡ï¼Œåªæ¬ ä¸œé£ã€‚æˆ‘ä»¬å‘æ¨¡å‹æé—®ï¼Œçœ‹çœ‹å®ƒå¦‚ä½•ååº”ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å‘èµ·æé—®</span>
<span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> model.<span class="hljs-title function_">invoke</span>(<span class="hljs-string">'åŒ—äº¬ä»Šå¤©çš„å¤©æ°”æ€ä¹ˆæ ·'</span>);
</code></pre>
<p>å½“è¿™å¥è¯å‘å‡ºå»åï¼ŒDeepSeek ä¼šè¿›è¡Œå¦‚ä¸‹æ€è€ƒï¼š</p>
<ol>
<li>ç”¨æˆ·é—®çš„æ˜¯å¤©æ°”ã€‚</li>
<li>æˆ‘æœ‰ <code>get_weather</code> å·¥å…·å—ï¼Ÿæœ‰ã€‚</li>
<li>å·¥å…·æè¿°è¯´å®ƒèƒ½â€œæŸ¥è¯¢æŒ‡å®šåŸå¸‚å¤©æ°”â€ã€‚åŒ¹é…æˆåŠŸï¼</li>
<li>æå–å‚æ•°ï¼šåŸå¸‚æ˜¯â€œåŒ—äº¬â€ã€‚</li>
<li><strong>å†³ç­–</strong>ï¼šæˆ‘ä¸ç›´æ¥å›ç­”æ–‡æœ¬ï¼Œè€Œæ˜¯è¿”å›ä¸€ä¸ªâ€œå·¥å…·è°ƒç”¨è¯·æ±‚ï¼ˆTool Callï¼‰â€ã€‚</li>
</ol>
<h3 data-id="heading-9">å¤„ç†å“åº”ï¼šå¯é€‰é“¾è¿ç®—ç¬¦ (<code>?.</code>) çš„å¦™ç”¨</h3>
<p>æ¨¡å‹è¿”å›çš„ <code>res</code> å¯¹è±¡ä¸­ï¼ŒåŒ…å«äº†å¾ˆå¤šä¿¡æ¯ã€‚å¦‚æœæ¨¡å‹å†³å®šè°ƒç”¨å·¥å…·ï¼Œ<code>res.tool_calls</code> å±æ€§å°±ä¼šæœ‰å€¼ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å¯é€‰é“¾è¿ç®—ç¬¦ es6 æ–°å¢ ä»£ç çš„ç®€æ´å’Œä¼˜é›…</span>
<span class="hljs-comment">// ä¼ ç»Ÿå†™æ³•ï¼ˆç¹çï¼‰ï¼š</span>
<span class="hljs-comment">// if(res.tool_calls){</span>
<span class="hljs-comment">//     if(res.tool_calls.length){</span>
<span class="hljs-comment">//         // ...</span>
<span class="hljs-comment">//     }</span>
<span class="hljs-comment">// }</span>

<span class="hljs-comment">// ç°ä»£å†™æ³•ï¼ˆæ¨èï¼‰ï¼š</span>
<span class="hljs-keyword">if</span>(res.<span class="hljs-property">tool_calls</span>?.<span class="hljs-property">length</span>){
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"æ¨¡å‹å†³å®šè°ƒç”¨å·¥å…·:"</span>, res.<span class="hljs-property">tool_calls</span>);
    
    <span class="hljs-comment">// è·å–ç¬¬ä¸€ä¸ªå·¥å…·è°ƒç”¨çš„æŒ‡ä»¤</span>
    <span class="hljs-keyword">const</span> toolCall = res.<span class="hljs-property">tool_calls</span>[<span class="hljs-number">0</span>];

    <span class="hljs-comment">// æ ¹æ®å·¥å…·åç§°ï¼Œåˆ†å‘æ‰§è¡Œé€»è¾‘</span>
    <span class="hljs-keyword">if</span>(toolCall.<span class="hljs-property">name</span> === <span class="hljs-string">'add'</span>){
        <span class="hljs-comment">// æ‰§è¡ŒåŠ æ³•å·¥å…·</span>
        <span class="hljs-comment">// toolCall.args åŒ…å«äº†æ¨¡å‹æå–å¥½çš„å‚æ•° {a: ..., b: ...}</span>
        <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> addTool.<span class="hljs-title function_">invoke</span>(toolCall.<span class="hljs-property">args</span>);
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"åŠ æ³•å·¥å…·è¿è¡Œç»“æœ:"</span>, result);
    }
    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(toolCall.<span class="hljs-property">name</span> === <span class="hljs-string">'get_weather'</span>){
        <span class="hljs-comment">// æ‰§è¡Œå¤©æ°”å·¥å…·</span>
        <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> weatherTool.<span class="hljs-title function_">invoke</span>(toolCall.<span class="hljs-property">args</span>);
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"å¤©æ°”å·¥å…·è¿è¡Œç»“æœ:"</span>, result);
    }
}
</code></pre>
<h4 data-id="heading-10">ä¸ºäº†ç›´è§‚ç†è§£å‡½æ•°æ‰“å°ä¸€ä¸‹<code>res.tool_callsçœ‹çœ‹</code>ï¼š</h4>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e07553c2cc4d405c9e0210bda1549e62~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56We56eY55qE54yq5aS0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767369109&amp;x-signature=tnd%2FlLx5RpCjLK3yfnvN4g5saWM%3D" alt="å±å¹•æˆªå›¾ 2025-12-26 234001.png" loading="lazy"/></p>
<blockquote>
<p>ä½ å¯ä»¥ç›´è§‚åœ°çœ‹åˆ°è°ƒç”¨ç»“æ„ï¼š<code>name</code> å’Œå·¥å…·å®šä¹‰é‡Œçš„ <code>name</code> ä¸€æ¨¡ä¸€æ ·ï¼Œè€Œ <code>args</code> åˆ™æ˜¯å¤§æ¨¡å‹åœ¨ç†è§£ç”¨æˆ·é—®é¢˜åï¼Œæ ¹æ®<code>tool</code>è¦æ±‚çš„å‚æ•°æ ¼å¼ï¼Œè‡ªåŠ¨â€œå¡«å¥½â€çš„è¾“å…¥å†…å®¹ã€‚</p>
</blockquote>
<p><strong>çŸ¥è¯†ç‚¹è¯¦è§£ï¼šå¯é€‰é“¾è¿ç®—ç¬¦ (<code>?.</code>)</strong></p>
<p>åœ¨ JavaScript ä¸­ï¼Œå¤„ç†æ·±å±‚åµŒå¥—çš„å¯¹è±¡å±æ€§æ—¶ï¼Œç»å¸¸ä¼šé‡åˆ° <code>Cannot read property of undefined</code> çš„æŠ¥é”™ã€‚</p>
<ul>
<li><code>res.tool_calls</code> å¯èƒ½ä¸å­˜åœ¨ï¼ˆå¦‚æœæ¨¡å‹è®¤ä¸ºä¸éœ€è¦è°ƒç”¨å·¥å…·ï¼Œåªæ˜¯æ™®é€šèŠå¤©ï¼‰ã€‚</li>
<li>å¦‚æœä¸ä½¿ç”¨ <code>?.</code>ï¼Œæˆ‘ä»¬éœ€è¦å†™å¤šå±‚ <code>if</code> åˆ¤æ–­æ¥ç¡®ä¿å®‰å…¨ã€‚</li>
<li><strong><code>res.tool_calls?.length</code></strong> çš„æ„æ€æ˜¯ï¼šå¦‚æœ <code>res.tool_calls</code> å­˜åœ¨ï¼ˆä¸ä¸º null æˆ– undefinedï¼‰ï¼Œåˆ™è¯»å– <code>.length</code>ï¼›å¦åˆ™ï¼Œç›´æ¥è¿”å› <code>undefined</code>ï¼Œä¸ä¼šæŠ¥é”™ã€‚é…åˆ <code>if</code> è¯­å¥ï¼Œ<code>undefined</code> ä¼šè¢«è§†ä¸º falseï¼Œé€»è¾‘éå¸¸é€šé¡ºã€‚</li>
</ul>
<p>è¿™ä¸€å°å°çš„è¯­æ³•ç³–ï¼Œæå¤§åœ°æå‡äº†ä»£ç çš„<strong>ç®€æ´æ€§</strong>å’Œ<strong>ä¼˜é›…åº¦</strong>ï¼Œæ˜¯ç°ä»£ JS å¼€å‘çš„å¿…å¤‡æŠ€å·§ã€‚</p>
<hr/>
<h2 data-id="heading-11">å…­ã€ å®Œæ•´æµç¨‹æ€»ç»“</h2>
<p>è®©æˆ‘ä»¬å›é¡¾ä¸€ä¸‹è¿™æ®µä»£ç è¿è¡Œçš„å®Œæ•´ç”Ÿå‘½å‘¨æœŸï¼š</p>
<ol>
<li><strong>å®šä¹‰é˜¶æ®µ</strong>ï¼šæˆ‘ä»¬ç”¨ <code>tool()</code> å’Œ <code>zod</code> ç²¾ç¡®æè¿°äº† <code>add</code> å’Œ <code>get_weather</code> ä¸¤ä¸ªå·¥å…·çš„åŠŸèƒ½å’Œå‚æ•°æ ¼å¼ã€‚</li>
<li><strong>ç»‘å®šé˜¶æ®µ</strong>ï¼šé€šè¿‡ <code>.bindTools()</code> å°†è¿™äº›èƒ½åŠ›çš„â€œè¯´æ˜ä¹¦â€å‘ç»™äº† DeepSeek å¤§æ¨¡å‹ã€‚</li>
<li><strong>æ¨ç†é˜¶æ®µ</strong>ï¼šç”¨æˆ·æé—®â€œåŒ—äº¬å¤©æ°”â€ï¼Œæ¨¡å‹åˆ†æè¯­ä¹‰ï¼Œå‘½ä¸­ <code>get_weather</code> å·¥å…·ï¼Œå¹¶ç²¾å‡†æå–å‡º <code>city: "åŒ—äº¬"</code>ã€‚</li>
<li><strong>å“åº”é˜¶æ®µ</strong>ï¼šæ¨¡å‹è¿”å›åŒ…å« <code>tool_calls</code> çš„å“åº”å¯¹è±¡ã€‚</li>
<li><strong>æ‰§è¡Œé˜¶æ®µ</strong>ï¼šæˆ‘ä»¬çš„ä»£ç é€šè¿‡ <code>?.</code> å®‰å…¨åœ°æ£€æµ‹åˆ°è°ƒç”¨è¯·æ±‚ï¼Œå¹¶åœ¨æœ¬åœ°è¿è¡Œäº† <code>weatherTool</code> å‡½æ•°ï¼Œé€šè¿‡æŸ¥é˜… <code>fakeWeatherDB</code> å¾—åˆ°äº†ç»“æœã€‚</li>
</ol>
<h3 data-id="heading-12">è¿è¡Œæ•ˆæœé¢„è§ˆ</h3>
<p>å½“ä½ è¿è¡Œè¿™æ®µä»£ç ï¼ˆ<code>node index.js</code>ï¼‰ï¼Œæ§åˆ¶å°ä¼šè¾“å‡ºï¼š</p>
<pre><code class="hljs language-bash" lang="bash">[
  {
    name: <span class="hljs-string">'get_weather'</span>,
    args: { city: <span class="hljs-string">'åŒ—äº¬'</span> },
    <span class="hljs-built_in">id</span>: <span class="hljs-string">'call_xxxxxxxxx'</span>
  }
]
æœ€ç»ˆç»“æœ: å½“å‰åŒ—äº¬çš„å¤©æ°”æ˜¯30Â°C,æ™´, é£åŠ›å¾®é£
</code></pre>
<p>å¦‚æœä½ æŠŠé—®é¢˜æ”¹æˆ <code>model.invoke('100 åŠ  200 ç­‰äºå‡ ')</code>ï¼Œå®ƒä¼šè‡ªåŠ¨åˆ‡æ¢é€»è¾‘ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">[
  {
    name: <span class="hljs-string">'add'</span>,
    args: { a: 100, b: 200 },
    <span class="hljs-built_in">id</span>: <span class="hljs-string">'call_yyyyyyyyy'</span>
  }
]
æœ€ç»ˆç»“æœ: 300
</code></pre>
<hr/>
<h2 data-id="heading-13">ä¸ƒã€ ç»“è¯­</h2>
<p>é€šè¿‡è¿™ç¯‡æ–‡ç« ï¼Œæˆ‘ä»¬ä¸ä»…å­¦ä¹ äº† LangChain ä¸­ <code>tool</code> çš„åŸºç¡€ç”¨æ³•ï¼Œè¿˜æŒæ¡äº†å¦‚ä½•åˆ©ç”¨ <code>zod</code> è¿›è¡Œæ•°æ®éªŒè¯ä»¥åŠä½¿ç”¨ ES6+ çš„å¯é€‰é“¾è¿ç®—ç¬¦ç¼–å†™å¥å£®çš„ä»£ç ã€‚</p>
<p>Tools æ¨¡å—å½»åº•æ”¹å˜äº†å¤§æ¨¡å‹çš„åº”ç”¨å½¢æ€ã€‚å®ƒè®©å¤§æ¨¡å‹ä»ä¸€ä¸ªâ€œåªè¯»â€çš„ç™¾ç§‘å…¨ä¹¦ï¼Œè¿›åŒ–æˆäº†ä¸€ä¸ªèƒ½â€œè¯»å†™â€ç°å®ä¸–ç•Œçš„æ™ºèƒ½ä»£ç†ï¼ˆAgentï¼‰ã€‚</p>
<p>èµ¶å¿«æ‰“å¼€ä½ çš„ç¼–è¾‘å™¨ï¼Œè¯•ç€å®šä¹‰å±äºä½ è‡ªå·±çš„å·¥å…·å§ï¼ä¸ç®¡æ˜¯æŸ¥è¯¢è‚¡ç¥¨ã€å‘é€é‚®ä»¶ï¼Œè¿˜æ˜¯æ§åˆ¶æ™ºèƒ½å®¶å±…ï¼ŒLangChain éƒ½èƒ½å¸®ä½ å®ç°ã€‚</p>
<hr/>
<p><em>æœ¬æ–‡ä»£ç ç¤ºä¾‹åŸºäº LangChain.js æœ€æ–°ç‰ˆæœ¬ï¼Œæ¬¢è¿ç‚¹èµæ”¶è—ï¼</em></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[C++ä¸­JSONåºåˆ—åŒ–å’Œååºåˆ—åŒ–çš„å®ç°]]></title>    <link>https://juejin.cn/post/7588010346070851594</link>    <guid>https://juejin.cn/post/7588010346070851594</guid>    <pubDate>2025-12-27T01:52:26.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588010346070851594" data-draft-id="7588010346070835210" data-original-type="2" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="C++ä¸­JSONåºåˆ—åŒ–å’Œååºåˆ—åŒ–çš„å®ç°"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-27T01:52:26.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="charlee44"/> <meta itemprop="url" content="https://juejin.cn/user/1117549770846872"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            C++ä¸­JSONåºåˆ—åŒ–å’Œååºåˆ—åŒ–çš„å®ç°
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1117549770846872/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    charlee44
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-27T01:52:26.000Z" title="Sat Dec 27 2025 01:52:26 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    6
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">1. å¼•è¨€</h2>
<p><strong>åºåˆ—åŒ–</strong>ï¼ˆSerializationï¼‰æ˜¯æŒ‡å°†ç¨‹åºä¸­çš„å†…å­˜å¯¹è±¡ï¼ˆå¦‚ç»“æ„ä½“ã€ç±»å®ä¾‹ã€åˆ—è¡¨ç­‰ï¼‰è½¬æ¢æˆä¸€ç§<strong>å¯ä»¥å­˜å‚¨æˆ–ä¼ è¾“çš„æ ¼å¼</strong>ï¼ˆé€šå¸¸æ˜¯å­—èŠ‚æµæˆ–æ–‡æœ¬ï¼‰çš„è¿‡ç¨‹ã€‚å¸¸è§çš„åºåˆ—åŒ–æ ¼å¼åŒ…æ‹¬ï¼š</p>
<ul>
<li>JSONï¼ˆæ–‡æœ¬ï¼Œäººç±»å¯è¯»ï¼‰</li>
<li>XML</li>
<li>Protocol Buffersï¼ˆäºŒè¿›åˆ¶ï¼Œé«˜æ•ˆï¼‰</li>
<li>MessagePack</li>
<li>YAML</li>
<li>ç”šè‡³è‡ªå®šä¹‰çš„äºŒè¿›åˆ¶æ ¼å¼</li>
</ul>
<p><strong>ååºåˆ—åŒ–</strong>ï¼ˆDeserializationï¼‰æ˜¯åºåˆ—åŒ–çš„é€†è¿‡ç¨‹ï¼šå°†<strong>åºåˆ—åŒ–åçš„æ•°æ®</strong>ï¼ˆå¦‚ JSON å­—ç¬¦ä¸²ï¼‰é‡æ–°è½¬æ¢å›<strong>ç¨‹åºä¸­çš„å†…å­˜å¯¹è±¡</strong>ã€‚</p>
<h2 data-id="heading-1">2. åŸå› </h2>
<p>é‚£ä¹ˆï¼Œä¸ºä»€ä¹ˆéœ€è¦åºåˆ—åŒ–å’Œååºåˆ—åŒ–å‘¢ï¼Ÿç¬”è€…çš„ä½“ä¼šæ˜¯ä¸åºåˆ—åŒ–/ååºåˆ—åŒ–ä¹Ÿè¡Œï¼Œåªä¸è¿‡åœ¨è¿›è¡Œç›¸åº”çš„è¯»å–å’Œå†™å…¥æ“ä½œçš„æ—¶å€™ä¼šéå¸¸ç¹çã€‚æ¯”å¦‚ä¸€ä¸ªé…ç½®æ–‡ä»¶æ›´æ–°ï¼š</p>
<p>å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªåšå®¢ç³»ç»Ÿçš„é…ç½®ï¼ŒåŒ…å«ç«™ç‚¹æ ‡é¢˜ã€ä½œè€…åã€æ˜¯å¦å¯ç”¨è¯„è®ºã€é»˜è®¤å°é¢åœ°å€ç­‰å¤šä¸ªå­—æ®µã€‚å¦‚æœä¸ä½¿ç”¨åºåˆ—åŒ–æœºåˆ¶ï¼Œæ¯æ¬¡è¯»å–é…ç½®æ—¶ï¼Œå°±å¾—æ‰‹åŠ¨æ‰“å¼€ JSONï¼ˆæˆ– YAMLã€INIï¼‰æ–‡ä»¶ï¼Œé€è¡Œè§£æï¼Œåˆ¤æ–­æ¯ä¸ªå­—æ®µæ˜¯å¦å­˜åœ¨ã€ç±»å‹æ˜¯å¦æ­£ç¡®ï¼Œå†ä¸€ä¸€èµ‹å€¼ç»™ç¨‹åºä¸­çš„å˜é‡ï¼›è€Œå½“ç”¨æˆ·ä¿®æ”¹äº†æŸä¸ªè®¾ç½®ã€éœ€è¦ä¿å­˜å›æ–‡ä»¶æ—¶ï¼Œåˆå¾—æ‰‹åŠ¨æ‹¼æ¥å­—ç¬¦ä¸²ã€å¤„ç†å¼•å·è½¬ä¹‰ã€æ•°ç»„æ ¼å¼ã€ç¼©è¿›å¯¹é½â€¦â€¦ç¨æœ‰ä¸æ…ï¼Œå°±ä¼šç”Ÿæˆæ ¼å¼é”™è¯¯çš„æ–‡ä»¶ï¼Œå¯¼è‡´ç¨‹åºä¸‹æ¬¡å¯åŠ¨å¤±è´¥ã€‚</p>
<p>æ›´éº»çƒ¦çš„æ˜¯ï¼Œä¸€æ—¦é…ç½®ç»“æ„å‘ç”Ÿå˜åŒ–â€”â€”æ¯”å¦‚æ–°å¢ä¸€ä¸ª theme å­—æ®µï¼Œæˆ–è€…æŠŠ enableComments æ‹†æˆ enablePostComments å’Œ enablePageCommentsâ€”â€”æˆ‘ä»¬å°±ä¸å¾—ä¸åŒæ—¶ä¿®æ”¹è¯»å–é€»è¾‘ã€å†™å…¥é€»è¾‘ã€é»˜è®¤å€¼åˆå§‹åŒ–ã€é”™è¯¯å¤„ç†ç­‰å¤šå¤„ä»£ç ï¼Œææ˜“é—æ¼æˆ–å‡ºé”™ã€‚</p>
<p>è€Œæœ‰äº†åºåˆ—åŒ–å’Œååºåˆ—åŒ–ï¼Œè¿™ä¸€åˆ‡å°±å˜å¾—ç®€æ´è€Œå¯é ï¼šå®šä¹‰å¥½ç»“æ„ä½“ï¼ˆæˆ–ç±»ï¼‰ï¼Œæ³¨å†Œå¯¹åº”çš„è½¬æ¢å‡½æ•°ï¼Œä¸€è¡Œä»£ç å°±èƒ½ä» JSON æ„é€ å‡ºå®Œæ•´çš„é…ç½®å¯¹è±¡ï¼Œå¦ä¸€è¡Œä»£ç å°±èƒ½æŠŠä¿®æ”¹åçš„å¯¹è±¡å†™å›æ–‡ä»¶ã€‚å­—æ®µå¢å‡åªéœ€è°ƒæ•´ç»“æ„ä½“ï¼Œè¯»å†™é€»è¾‘å‡ ä¹æ— éœ€æ”¹åŠ¨ï¼Œæ—¢å‡å°‘äº†é‡å¤åŠ³åŠ¨ï¼Œä¹Ÿå¤§å¤§æå‡äº†å¥å£®æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚</p>
<p>å› æ­¤ï¼Œåºåˆ—åŒ–/ååºåˆ—åŒ–å¹¶éâ€œå¿…é¡»â€ï¼Œä½†å®ƒæ˜¯å¯¹æŠ—å¤æ‚æ€§ã€æå‡å¼€å‘æ•ˆç‡å’Œç³»ç»Ÿå¯é æ€§çš„é‡è¦å·¥å…·ã€‚</p>
<h2 data-id="heading-2">3. å®ç°</h2>
<h3 data-id="heading-3">3.1 ç¤ºä¾‹</h3>
<p>è¿™é‡Œå°±ä¸¾ä¾‹å®ç°ä¸€ä¸‹ C++ ä¸­ JSON åºåˆ—åŒ–å’Œååºåˆ—åŒ–ã€‚å¦‚æœè¦ååºåˆ—åŒ–æˆ C++ å¯ä»¥ä½¿ç”¨çš„å†…å­˜å¯¹è±¡ï¼Œæœ€å¥½çš„æ•°æ®å®¹å™¨å°±æ˜¯ struct ã€‚å½“ç„¶ class ä¹Ÿå¯ä»¥ï¼Œä¸è¿‡æˆ‘ä»¬éƒ½çŸ¥é“ struct å’Œ class çš„åŒºåˆ«ï¼šstruct çš„æˆå‘˜ä¸€èˆ¬é»˜è®¤æ˜¯å…¬æœ‰çš„ï¼Œè€Œ class çš„æˆå‘˜ä¸€èˆ¬é»˜è®¤æ˜¯ç§æœ‰çš„ã€‚å› æ­¤ï¼Œstruct é€‚åˆä»¥æ•°æ®æˆå‘˜ä¸ºä¸»çš„ï¼Œæ¯”è¾ƒç®€å•çš„å¯¹è±¡ï¼›class é€‚åˆä»¥æ–¹æ³•æˆå‘˜ä¸ºä¸»çš„ï¼Œæ¯”è¾ƒå¤æ‚çš„å¯¹è±¡ã€‚</p>
<p>ç¬”è€…ä½¿ç”¨ nlohmann/json ä¸­åºåˆ—åŒ–/ååºåˆ—åŒ–ä¸€ä¸ªè¡¨è¾¾åšå®¢çš„æ•°æ®å¯¹è±¡ï¼š</p>
<p><strong>BlogMeta.h</strong>ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;nlohmann/json.hpp&gt;</span></span>&#13;
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string&gt;</span></span>&#13;
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span>&#13;
&#13;
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">"PostStats.h"</span></span>&#13;
&#13;
<span class="hljs-keyword">namespace</span> DataTransfer {&#13;
&#13;
<span class="hljs-comment">/// @brief ä¸€ç¯‡åšå®¢çš„å…ƒæ•°æ®</span>&#13;
<span class="hljs-keyword">struct</span> <span class="hljs-title class_">BlogMeta</span> {&#13;
  std::string id;&#13;
  std::string title;&#13;
  std::string summary;&#13;
  std::string createdTime;&#13;
  std::string updatedTime;  &#13;
  std::string coverAddress;&#13;
  <span class="hljs-type">int64_t</span> isDraft;&#13;
  std::vector&lt;std::string&gt; tagNames;&#13;
  std::vector&lt;std::string&gt; categoryNames;&#13;
  PostStats postStats;&#13;
&#13;
  <span class="hljs-comment">// æä¾›åºåˆ—åŒ–æ¥å£</span>&#13;
  <span class="hljs-function"><span class="hljs-keyword">friend</span> <span class="hljs-type">void</span> <span class="hljs-title">to_json</span><span class="hljs-params">(nlohmann::json&amp; j, <span class="hljs-type">const</span> BlogMeta&amp; s)</span></span>;&#13;
&#13;
  <span class="hljs-comment">// æä¾›ååºåˆ—åŒ–æ¥å£</span>&#13;
  <span class="hljs-function"><span class="hljs-keyword">friend</span> <span class="hljs-type">void</span> <span class="hljs-title">from_json</span><span class="hljs-params">(<span class="hljs-type">const</span> nlohmann::json&amp; j, BlogMeta&amp; s)</span></span>;&#13;
};
</code></pre>
<p><strong>BlogMeta.cpp</strong>ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">"BlogMeta.h"</span></span>&#13;
&#13;
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">"Util/GetTime.h"</span></span>&#13;
&#13;
<span class="hljs-keyword">namespace</span> DataTransfer {&#13;
&#13;
<span class="hljs-comment">// æä¾›åºåˆ—åŒ–æ¥å£</span>&#13;
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">to_json</span><span class="hljs-params">(nlohmann::json&amp; j, <span class="hljs-type">const</span> BlogMeta&amp; s)</span> </span>{&#13;
  j = nlohmann::json{{<span class="hljs-string">"id"</span>, s.id},&#13;
                     {<span class="hljs-string">"title"</span>, s.title},&#13;
                     {<span class="hljs-string">"summary"</span>, s.summary},&#13;
                     {<span class="hljs-string">"createdTime"</span>, s.createdTime},&#13;
                     {<span class="hljs-string">"updatedTime"</span>, s.updatedTime},&#13;
                     {<span class="hljs-string">"coverAddress"</span>, s.coverAddress},&#13;
                     {<span class="hljs-string">"isDraft"</span>, s.isDraft},&#13;
                     {<span class="hljs-string">"tagNames"</span>, s.tagNames},&#13;
                     {<span class="hljs-string">"categoryNames"</span>, s.categoryNames},&#13;
                     {<span class="hljs-string">"postStats"</span>, s.postStats}};&#13;
}&#13;
&#13;
<span class="hljs-comment">// æä¾›ååºåˆ—åŒ–æ¥å£</span>&#13;
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">from_json</span><span class="hljs-params">(<span class="hljs-type">const</span> nlohmann::json&amp; j, BlogMeta&amp; s)</span> </span>{&#13;
  s.id = j.<span class="hljs-built_in">at</span>(<span class="hljs-string">"id"</span>).<span class="hljs-built_in">get</span>&lt;std::string&gt;();&#13;
  s.title = j.<span class="hljs-built_in">at</span>(<span class="hljs-string">"title"</span>).<span class="hljs-built_in">get</span>&lt;std::string&gt;();&#13;
  s.summary = j.<span class="hljs-built_in">at</span>(<span class="hljs-string">"summary"</span>).<span class="hljs-built_in">get</span>&lt;std::string&gt;();&#13;
  s.createdTime = j.<span class="hljs-built_in">at</span>(<span class="hljs-string">"createdTime"</span>).<span class="hljs-built_in">get</span>&lt;std::string&gt;();&#13;
  s.updatedTime =&#13;
      j.<span class="hljs-built_in">value</span>(<span class="hljs-string">"updatedTime"</span>, Util::<span class="hljs-built_in">GetCurrentTime</span>());  <span class="hljs-comment">//æä¾›é»˜è®¤å€¼ï¼Œå¢åŠ ç¨³å®šæ€§</span>&#13;
  s.coverAddress = j.<span class="hljs-built_in">at</span>(<span class="hljs-string">"coverAddress"</span>).<span class="hljs-built_in">get</span>&lt;std::string&gt;();&#13;
  s.isDraft = j.<span class="hljs-built_in">at</span>(<span class="hljs-string">"isDraft"</span>).<span class="hljs-built_in">get</span>&lt;<span class="hljs-type">int64_t</span>&gt;();&#13;
  s.tagNames = j.<span class="hljs-built_in">at</span>(<span class="hljs-string">"tagNames"</span>).get&lt;std::vector&lt;std::string&gt;&gt;();&#13;
  s.categoryNames = j.<span class="hljs-built_in">at</span>(<span class="hljs-string">"categoryNames"</span>).get&lt;std::vector&lt;std::string&gt;&gt;();&#13;
  s.postStats = j.<span class="hljs-built_in">at</span>(<span class="hljs-string">"postStats"</span>).<span class="hljs-built_in">get</span>&lt;PostStats&gt;();&#13;
}&#13;
&#13;
}  <span class="hljs-comment">// namespace DataTransfer</span>
</code></pre>
<p>å…¶ä¸­ <code>to_json</code> / <code>from_json</code> å°±æ˜¯å¯¹åº”çš„ åºåˆ—åŒ– / ååºåˆ—åŒ–æ¥å£ã€‚åªéœ€è¦å¡«å……è¿™ä¸€å¯¹æ¥å£ï¼Œå°±å¯ä»¥é€šè¿‡èµ‹å€¼è¿ç®—ç¬¦<code>=</code>å®ç°è‡ªåŠ¨åºåˆ—åŒ–å’Œååºåˆ—åŒ–ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span>&#13;
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;nlohmann/json.hpp&gt;</span></span>&#13;
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">"BlogMeta.h"</span>  <span class="hljs-comment">// åŒ…å«ä½ çš„ BlogMeta å®šä¹‰</span></span>&#13;
&#13;
<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{&#13;
    <span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> DataTransfer;&#13;
    <span class="hljs-keyword">using</span> json = nlohmann::json;&#13;
&#13;
    <span class="hljs-comment">// ----------------------------</span>&#13;
    <span class="hljs-comment">// 1. åˆ›å»ºä¸€ä¸ª BlogMeta å¯¹è±¡ï¼ˆå†…å­˜ä¸­çš„æ•°æ®ï¼‰</span>&#13;
    <span class="hljs-comment">// ----------------------------</span>&#13;
    BlogMeta blog;&#13;
    blog.id = <span class="hljs-string">"blog-001"</span>;&#13;
    blog.title = <span class="hljs-string">"æ·±å…¥ç†è§£ C++ åºåˆ—åŒ–"</span>;&#13;
    blog.summary = <span class="hljs-string">"æœ¬æ–‡ä»‹ç»å¦‚ä½•ä½¿ç”¨ nlohmann/json è¿›è¡Œå®‰å…¨é«˜æ•ˆçš„åºåˆ—åŒ–ã€‚"</span>;&#13;
    blog.createdTime = <span class="hljs-string">"2025-12-22T10:00:00Z"</span>;&#13;
    blog.updatedTime = <span class="hljs-string">"2025-12-22T17:00:00Z"</span>;  <span class="hljs-comment">// å¯çœç•¥ï¼Œååºåˆ—åŒ–æ—¶ä¼šç”¨é»˜è®¤å€¼</span>&#13;
    blog.coverAddress = <span class="hljs-string">"/images/cpp_serialization.jpg"</span>;&#13;
    blog.isDraft = <span class="hljs-number">0</span>;&#13;
    blog.tagNames = {<span class="hljs-string">"C++"</span>, <span class="hljs-string">"JSON"</span>, <span class="hljs-string">"Serialization"</span>};&#13;
    blog.categoryNames = {<span class="hljs-string">"Programming"</span>, <span class="hljs-string">"Tutorial"</span>};&#13;
    blog.postStats = {<span class="hljs-number">1200</span>, <span class="hljs-number">85</span>, <span class="hljs-number">23</span>};&#13;
&#13;
    <span class="hljs-comment">// ----------------------------</span>&#13;
    <span class="hljs-comment">// 2. åºåˆ—åŒ–ï¼šBlogMeta â†’ JSON</span>&#13;
    <span class="hljs-comment">// ----------------------------</span>&#13;
    json j = blog;  <span class="hljs-comment">// è‡ªåŠ¨è°ƒç”¨ to_json</span>&#13;
    std::cout &lt;&lt; <span class="hljs-string">"ã€åºåˆ—åŒ–ç»“æœã€‘\n"</span> &lt;&lt; j.<span class="hljs-built_in">dump</span>(<span class="hljs-number">2</span>) &lt;&lt; <span class="hljs-string">"\n\n"</span>;&#13;
&#13;
    <span class="hljs-comment">// ----------------------------</span>&#13;
    <span class="hljs-comment">// 3. ååºåˆ—åŒ–ï¼šJSON â†’ BlogMeta</span>&#13;
    <span class="hljs-comment">// ----------------------------</span>&#13;
    <span class="hljs-comment">// æ¨¡æ‹Ÿä»æ–‡ä»¶æˆ–ç½‘ç»œæ¥æ”¶åˆ°çš„ JSONï¼ˆæ•…æ„çœç•¥ updatedTimeï¼‰</span>&#13;
    std::string jsonStr = <span class="hljs-string">R"({&#13;
        "id": "blog-002",&#13;
        "title": "ååºåˆ—åŒ–çš„å¥å£®æ€§æµ‹è¯•",&#13;
        "summary": "æµ‹è¯•ç¼ºå¤± updatedTime å­—æ®µæ—¶çš„è¡Œä¸º",&#13;
        "createdTime": "2025-12-20T08:30:00Z",&#13;
        "coverAddress": "/images/robust.png",&#13;
        "isDraft": 1,&#13;
        "tagNames": ["C++", "Robustness"],&#13;
        "categoryNames": ["Engineering"],&#13;
        "postStats": {&#13;
            "viewCount": 450,&#13;
            "likeCount": 30,&#13;
            "commentCount": 5&#13;
        }&#13;
    })"</span>;&#13;
 &#13;
    BlogMeta restoredBlog = json::<span class="hljs-built_in">parse</span>(jsonStr);  <span class="hljs-comment">// è‡ªåŠ¨è°ƒç”¨ from_json</span>&#13;
  &#13;
    <span class="hljs-comment">// ----------------------------</span>&#13;
    <span class="hljs-comment">// 4. éªŒè¯ååºåˆ—åŒ–ç»“æœ</span>&#13;
    <span class="hljs-comment">// ----------------------------</span>&#13;
    std::cout &lt;&lt; <span class="hljs-string">"ã€ååºåˆ—åŒ–ç»“æœã€‘\n"</span>;&#13;
    std::cout &lt;&lt; <span class="hljs-string">"ID: "</span> &lt;&lt; restoredBlog.id &lt;&lt; <span class="hljs-string">"\n"</span>;&#13;
    std::cout &lt;&lt; <span class="hljs-string">"Title: "</span> &lt;&lt; restoredBlog.title &lt;&lt; <span class="hljs-string">"\n"</span>;&#13;
    std::cout &lt;&lt; <span class="hljs-string">"UpdatedTime (åº”ä¸ºå½“å‰é»˜è®¤å€¼): "</span> &lt;&lt; restoredBlog.updatedTime &lt;&lt; <span class="hljs-string">"\n"</span>;&#13;
    std::cout &lt;&lt; <span class="hljs-string">"Is Draft: "</span> &lt;&lt; restoredBlog.isDraft &lt;&lt; <span class="hljs-string">"\n"</span>;&#13;
    std::cout &lt;&lt; <span class="hljs-string">"Tags: "</span>;&#13;
    <span class="hljs-keyword">for</span> (<span class="hljs-type">const</span> <span class="hljs-keyword">auto</span>&amp; tag : restoredBlog.tagNames) {&#13;
        std::cout &lt;&lt; tag &lt;&lt; <span class="hljs-string">" "</span>;&#13;
    }&#13;
    std::cout &lt;&lt; <span class="hljs-string">"\n"</span>;&#13;
&#13;
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;&#13;
}
</code></pre>
<h3 data-id="heading-4">3.2 èƒ½åŠ›</h3>
<p>åºåˆ—åŒ– / ååºåˆ—åŒ–çš„èƒ½åŠ›å–å†³äºæ‰€ä½¿ç”¨çš„åº“å®ç°çš„ç¨‹åº¦ã€‚ä¾‹å¦‚è¿™ä¸ªä¾‹å­ä¸­ï¼Œstd å®¹å™¨ <code>std::vector&lt;std::string&gt;</code> ä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨èµ‹å€¼è¿ç®—ç¬¦<code>=</code>æ¥åºåˆ—åŒ–/ååºåˆ—åŒ–å—ï¼Ÿç¡®å®æ˜¯å¯ä»¥çš„ï¼Œnlohmann/json æ”¯æŒæ‰€æœ‰åŸºç¡€ç±»å‹ä»¥åŠç»å¤§å¤šæ•° std å®¹å™¨ç±»å‹çš„ç›´æ¥ åºåˆ—åŒ–/ ååºåˆ—åŒ–ã€‚ä¸è¿‡é»˜è®¤æƒ…å†µä¸‹ï¼ŒC++ æ•°æ®ç±»å‹ä¸JSONçš„å¯¹åº”å…³ç³»æ˜¯ï¼šstd::string å¯¹åº”å­—ç¬¦ä¸²ï¼Œ int64_tï¼Œ uint64_t æˆ– double å¯¹åº”æ•°å­—ï¼Œ std::map å¯¹åº”å¯¹è±¡ï¼Œ std::vector å¯¹åº”æ•°ç»„ï¼Œä¸” bool å¯¹åº”å¸ƒå°”å€¼ã€‚</p>
<p>å¦å¤–ï¼Œnlohmann/json è¿˜æ”¯æŒåµŒå¥—åºåˆ—åŒ–ã€‚æ¯”å¦‚è¿™é‡Œçš„ PostStats å…¶å®ä¹Ÿæ˜¯ä¸ªè‡ªå®šä¹‰çš„ struct ï¼Œä¹Ÿå®ç°äº† <code>to_json</code> / <code>from_json</code> æ¥å£ï¼Œå› æ­¤å¯ä»¥ç›´æ¥é€šè¿‡èµ‹å€¼è¿ç®—ç¬¦<code>=</code>ç›¸äº’è½¬æ¢ã€‚</p>
<p><strong>PostStats.h</strong>:</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-meta">#<span class="hljs-keyword">pragma</span> once</span>&#13;
&#13;
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;nlohmann/json.hpp&gt;</span></span>&#13;
&#13;
<span class="hljs-keyword">namespace</span> DataTransfer {&#13;
&#13;
<span class="hljs-comment">/// @brief ä¸€ç¯‡åšå®¢çš„ç»Ÿè®¡ä¿¡æ¯</span>&#13;
<span class="hljs-keyword">struct</span> <span class="hljs-title class_">PostStats</span> {&#13;
  <span class="hljs-type">int64_t</span> viewCount = <span class="hljs-number">0</span>;     <span class="hljs-comment">// é˜…è¯»é‡</span>&#13;
  <span class="hljs-type">int64_t</span> likeCount = <span class="hljs-number">0</span>;     <span class="hljs-comment">// ç‚¹èµé‡</span>&#13;
  <span class="hljs-type">int64_t</span> commentCount = <span class="hljs-number">0</span>;  <span class="hljs-comment">// è¯„è®ºé‡</span>&#13;
&#13;
  <span class="hljs-comment">// æä¾›åºåˆ—åŒ–æ¥å£</span>&#13;
  <span class="hljs-function"><span class="hljs-keyword">friend</span> <span class="hljs-type">void</span> <span class="hljs-title">to_json</span><span class="hljs-params">(nlohmann::json&amp; j, <span class="hljs-type">const</span> PostStats&amp; s)</span></span>;&#13;
&#13;
  <span class="hljs-comment">// æä¾›ååºåˆ—åŒ–æ¥å£</span>&#13;
  <span class="hljs-function"><span class="hljs-keyword">friend</span> <span class="hljs-type">void</span> <span class="hljs-title">from_json</span><span class="hljs-params">(<span class="hljs-type">const</span> nlohmann::json&amp; j, PostStats&amp; s)</span></span>;&#13;
};&#13;
&#13;
}  <span class="hljs-comment">// namespace DataTransfer</span>
</code></pre>
<p><strong>PostStats.cpp</strong>:</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">"PostStats.h"</span></span>&#13;
&#13;
<span class="hljs-keyword">namespace</span> DataTransfer {&#13;
&#13;
<span class="hljs-comment">// æä¾›åºåˆ—åŒ–æ¥å£</span>&#13;
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">to_json</span><span class="hljs-params">(nlohmann::json&amp; j, <span class="hljs-type">const</span> PostStats&amp; s)</span> </span>{&#13;
  j = nlohmann::json{{<span class="hljs-string">"viewCount"</span>, s.viewCount},&#13;
                     {<span class="hljs-string">"likeCount"</span>, s.likeCount},&#13;
                     {<span class="hljs-string">"commentCount"</span>, s.commentCount}};&#13;
}&#13;
&#13;
<span class="hljs-comment">// æä¾›ååºåˆ—åŒ–æ¥å£</span>&#13;
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">from_json</span><span class="hljs-params">(<span class="hljs-type">const</span> nlohmann::json&amp; j, PostStats&amp; s)</span> </span>{&#13;
  s.viewCount = j.<span class="hljs-built_in">at</span>(<span class="hljs-string">"viewCount"</span>).<span class="hljs-built_in">get</span>&lt;<span class="hljs-type">int64_t</span>&gt;();&#13;
  s.likeCount = j.<span class="hljs-built_in">at</span>(<span class="hljs-string">"likeCount"</span>).<span class="hljs-built_in">get</span>&lt;<span class="hljs-type">int64_t</span>&gt;();&#13;
  s.commentCount = j.<span class="hljs-built_in">at</span>(<span class="hljs-string">"commentCount"</span>).<span class="hljs-built_in">get</span>&lt;<span class="hljs-type">int64_t</span>&gt;();&#13;
}&#13;
&#13;
}  <span class="hljs-comment">// namespace DataTransfer</span>
</code></pre>
<h3 data-id="heading-5">3.3 å…¼å®¹</h3>
<p>å¦‚æœ JSON é…ç½®æ–‡ä»¶è¿›è¡Œäº†å‡çº§ï¼Œæ¯”å¦‚å¢åŠ äº†ä¸€ä¸ªæ–°çš„é…ç½®å­—æ®µï¼Œé‚£ä¹ˆæ–°çš„ç¨‹åºè¯»å–æ—§çš„é…ç½®æ–‡ä»¶å°±æœ‰å¯èƒ½å‡ºé”™ï¼Œæ‰€ä»¥åœ¨ååºåˆ—åŒ–çš„æ—¶å€™æœ€å¥½ä½¿ç”¨ value() æä¾›é»˜è®¤å€¼ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">from_json</span><span class="hljs-params">(<span class="hljs-type">const</span> nlohmann::json&amp; j, BlogMeta&amp; s)</span> </span>{&#13;
  s.id = j.<span class="hljs-built_in">value</span>(<span class="hljs-string">"id"</span>, std::string{});&#13;
  s.title = j.<span class="hljs-built_in">value</span>(<span class="hljs-string">"title"</span>, std::string{});&#13;
  s.summary = j.<span class="hljs-built_in">value</span>(<span class="hljs-string">"summary"</span>, std::string{});&#13;
  s.createdTime = j.<span class="hljs-built_in">value</span>(<span class="hljs-string">"createdTime"</span>, std::string{});&#13;
  s.updatedTime = j.<span class="hljs-built_in">value</span>(<span class="hljs-string">"updatedTime"</span>, std::string{}); <span class="hljs-comment">// è‹¥ç¼ºå¤±åˆ™ä¸ºç©ºå­—ç¬¦ä¸²</span>&#13;
  s.coverAddress = j.<span class="hljs-built_in">value</span>(<span class="hljs-string">"coverAddress"</span>, std::string{});&#13;
  s.isDraft = j.<span class="hljs-built_in">value</span>(<span class="hljs-string">"isDraft"</span>, <span class="hljs-type">int64_t</span>{<span class="hljs-number">0</span>});&#13;
  s.tagNames = j.<span class="hljs-built_in">value</span>(<span class="hljs-string">"tagNames"</span>, std::vector&lt;std::string&gt;{});&#13;
  s.categoryNames = j.<span class="hljs-built_in">value</span>(<span class="hljs-string">"categoryNames"</span>, std::vector&lt;std::string&gt;{});&#13;
&#13;
  <span class="hljs-comment">// å¯¹äºåµŒå¥—ç»“æ„å¦‚ PostStatsï¼Œå¦‚æœå®ƒä¹Ÿæ”¯æŒ from_jsonï¼Œå¯è¿™æ ·å¤„ç†ï¼š</span>&#13;
  <span class="hljs-keyword">if</span> (j.<span class="hljs-built_in">contains</span>(<span class="hljs-string">"postStats"</span>) &amp;&amp; j[<span class="hljs-string">"postStats"</span>].<span class="hljs-built_in">is_object</span>()) {&#13;
    s.postStats = j[<span class="hljs-string">"postStats"</span>].<span class="hljs-built_in">get</span>&lt;PostStats&gt;();&#13;
  } <span class="hljs-keyword">else</span> {&#13;
    s.postStats = PostStats{}; <span class="hljs-comment">// é»˜è®¤æ„é€ </span>&#13;
  }&#13;
}
</code></pre>
<p>å¦å¤–ï¼Œå¦‚æœä¸šåŠ¡é€»è¾‘å…è®¸ï¼Œèƒ½åˆ†æ¸…æ¥šå“ªäº›æ˜¯å¿…é¡»å­—æ®µï¼Œå“ªäº›æ˜¯å¯é€‰å­—æ®µï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨<code>std::optional</code>:</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">/// @brief ä¸€ç¯‡åšå®¢çš„å…ƒæ•°æ®ï¼ˆå¥å£®ç‰ˆï¼Œæ”¯æŒå¯é€‰å­—æ®µï¼‰</span>&#13;
<span class="hljs-keyword">struct</span> <span class="hljs-title class_">BlogMeta</span> {&#13;
    std::string id;                          <span class="hljs-comment">// å¿…å¡«</span>&#13;
    std::string title;                       <span class="hljs-comment">// å¿…å¡«</span>&#13;
    std::optional&lt;std::string&gt; summary;&#13;
    std::string createdTime;                 <span class="hljs-comment">// é€šå¸¸å¿…å¡«ï¼Œä¹Ÿå¯æ”¹ä¸º optional</span>&#13;
    std::optional&lt;std::string&gt; updatedTime;  &#13;
    std::optional&lt;std::string&gt; coverAddress;&#13;
    std::optional&lt;<span class="hljs-type">int64_t</span>&gt; isDraft;          <span class="hljs-comment">// å¯é€‰ï¼Œé»˜è®¤ false æˆ– 0</span>&#13;
    std::optional&lt;std::vector&lt;std::string&gt;&gt; tagNames;&#13;
    std::optional&lt;std::vector&lt;std::string&gt;&gt; categoryNames;&#13;
    std::optional&lt;PostStats&gt; postStats;&#13;
&#13;
    <span class="hljs-comment">// åºåˆ—åŒ–/ååºåˆ—åŒ–å‹å…ƒå£°æ˜</span>&#13;
    <span class="hljs-function"><span class="hljs-keyword">friend</span> <span class="hljs-type">void</span> <span class="hljs-title">to_json</span><span class="hljs-params">(nlohmann::json&amp; j, <span class="hljs-type">const</span> BlogMeta&amp; s)</span></span>;&#13;
    <span class="hljs-function"><span class="hljs-keyword">friend</span> <span class="hljs-type">void</span> <span class="hljs-title">from_json</span><span class="hljs-params">(<span class="hljs-type">const</span> nlohmann::json&amp; j, BlogMeta&amp; s)</span></span>;&#13;
};&#13;
&#13;
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">to_json</span><span class="hljs-params">(nlohmann::json&amp; j, <span class="hljs-type">const</span> BlogMeta&amp; s)</span> </span>{&#13;
    j = nlohmann::json{&#13;
        {<span class="hljs-string">"id"</span>, s.id},&#13;
        {<span class="hljs-string">"title"</span>, s.title},&#13;
        {<span class="hljs-string">"summary"</span>, s.summary},&#13;
        {<span class="hljs-string">"createdTime"</span>, s.createdTime},&#13;
        {<span class="hljs-string">"updatedTime"</span>, s.updatedTime},&#13;
        {<span class="hljs-string">"coverAddress"</span>, s.coverAddress},&#13;
        {<span class="hljs-string">"isDraft"</span>, s.isDraft},&#13;
        {<span class="hljs-string">"tagNames"</span>, s.tagNames},&#13;
        {<span class="hljs-string">"categoryNames"</span>, s.categoryNames},&#13;
        {<span class="hljs-string">"postStats"</span>, s.postStats}&#13;
    };&#13;
}&#13;
&#13;
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">from_json</span><span class="hljs-params">(<span class="hljs-type">const</span> nlohmann::json&amp; j, BlogMeta&amp; s)</span> </span>{&#13;
    <span class="hljs-comment">// å¿…å¡«å­—æ®µï¼šä½¿ç”¨ at()ï¼Œç¼ºå¤±æ—¶æŠ¥é”™</span>&#13;
    s.id = j.<span class="hljs-built_in">at</span>(<span class="hljs-string">"id"</span>).<span class="hljs-built_in">get</span>&lt;std::string&gt;();&#13;
    s.title = j.<span class="hljs-built_in">at</span>(<span class="hljs-string">"title"</span>).<span class="hljs-built_in">get</span>&lt;std::string&gt;();&#13;
    s.createdTime = j.<span class="hljs-built_in">at</span>(<span class="hljs-string">"createdTime"</span>).<span class="hljs-built_in">get</span>&lt;std::string&gt;(); <span class="hljs-comment">// è‹¥ä½ ä¹Ÿæƒ³è®©å®ƒå¯é€‰ï¼Œæ”¹ç”¨ value æˆ– optional</span>&#13;
&#13;
    <span class="hljs-comment">// å¯é€‰å­—æ®µï¼šç›´æ¥èµ‹å€¼ï¼Œnlohmann è‡ªåŠ¨å¤„ç†å­˜åœ¨æ€§</span>&#13;
    <span class="hljs-keyword">if</span> (j.<span class="hljs-built_in">contains</span>(<span class="hljs-string">"summary"</span>))       s.summary = j[<span class="hljs-string">"summary"</span>].<span class="hljs-built_in">get</span>&lt;std::string&gt;();&#13;
    <span class="hljs-keyword">if</span> (j.<span class="hljs-built_in">contains</span>(<span class="hljs-string">"updatedTime"</span>))   s.updatedTime = j[<span class="hljs-string">"updatedTime"</span>].<span class="hljs-built_in">get</span>&lt;std::string&gt;();&#13;
    <span class="hljs-keyword">if</span> (j.<span class="hljs-built_in">contains</span>(<span class="hljs-string">"coverAddress"</span>))  s.coverAddress = j[<span class="hljs-string">"coverAddress"</span>].<span class="hljs-built_in">get</span>&lt;std::string&gt;();&#13;
    <span class="hljs-keyword">if</span> (j.<span class="hljs-built_in">contains</span>(<span class="hljs-string">"isDraft"</span>))       s.isDraft = j[<span class="hljs-string">"isDraft"</span>].<span class="hljs-built_in">get</span>&lt;<span class="hljs-type">int64_t</span>&gt;();&#13;
    <span class="hljs-keyword">if</span> (j.<span class="hljs-built_in">contains</span>(<span class="hljs-string">"tagNames"</span>))      s.tagNames = j[<span class="hljs-string">"tagNames"</span>].get&lt;std::vector&lt;std::string&gt;&gt;();&#13;
    <span class="hljs-keyword">if</span> (j.<span class="hljs-built_in">contains</span>(<span class="hljs-string">"categoryNames"</span>)) s.categoryNames = j[<span class="hljs-string">"categoryNames"</span>].get&lt;std::vector&lt;std::string&gt;&gt;();&#13;
    <span class="hljs-keyword">if</span> (j.<span class="hljs-built_in">contains</span>(<span class="hljs-string">"postStats"</span>))     s.postStats = j[<span class="hljs-string">"postStats"</span>].<span class="hljs-built_in">get</span>&lt;PostStats&gt;();&#13;
}
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Tailwind CSSï¼šåŸå­åŒ– CSS çš„ç°ä»£å¼€å‘å®è·µ]]></title>    <link>https://juejin.cn/post/7588028859540570138</link>    <guid>https://juejin.cn/post/7588028859540570138</guid>    <pubDate>2025-12-26T16:26:13.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588028859540570138" data-draft-id="7588010346070605834" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Tailwind CSSï¼šåŸå­åŒ– CSS çš„ç°ä»£å¼€å‘å®è·µ"/> <meta itemprop="keywords" content="å‰ç«¯,CSS,JavaScript"/> <meta itemprop="datePublished" content="2025-12-26T16:26:13.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Tzarevich"/> <meta itemprop="url" content="https://juejin.cn/user/578786070367529"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Tailwind CSSï¼šåŸå­åŒ– CSS çš„ç°ä»£å¼€å‘å®è·µ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/578786070367529/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Tzarevich
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-26T16:26:13.000Z" title="Fri Dec 26 2025 16:26:13 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    3
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.8;font-weight:400;font-size:16px;word-spacing:2px;letter-spacing:2px;overflow-x:hidden;color:#3e3e3e;background-image:linear-gradient(90deg,rgba(50,0,0,.05) 3%,transparent 0),linear-gradient(1turn,rgba(50,0,0,.05) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:30px;margin-bottom:5px}.markdown-body h2{padding-bottom:12px;font-size:24px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:18px;padding-bottom:0}.markdown-body h4{font-size:1.2em;border-bottom:2px solid #ef7060;word-spacing:0!important;letter-spacing:0!important;font-size:inherit;line-height:inherit;display:block;font-weight:400;background:#ef7060;color:#fff;padding:10px;border-top-right-radius:3px;border-top-left-radius:3px;margin-right:3px}.markdown-body h5{font-size:15px}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="monokai">.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#272822;color:#ddd}.hljs-keyword,.hljs-literal,.hljs-name,.hljs-selector-tag,.hljs-strong,.hljs-tag{color:#f92672}.hljs-code{color:#66d9ef}.hljs-class .hljs-title{color:#fff}.hljs-attribute,.hljs-link,.hljs-regexp,.hljs-symbol{color:#bf79db}.hljs-addition,.hljs-built_in,.hljs-builtin-name,.hljs-bullet,.hljs-emphasis,.hljs-section,.hljs-selector-attr,.hljs-selector-pseudo,.hljs-string,.hljs-subst,.hljs-template-tag,.hljs-template-variable,.hljs-title,.hljs-type,.hljs-variable{color:#a6e22e}.hljs-comment,.hljs-deletion,.hljs-meta,.hljs-quote{color:#75715e}.hljs-doctag,.hljs-keyword,.hljs-literal,.hljs-section,.hljs-selector-id,.hljs-selector-tag,.hljs-title,.hljs-type{font-weight:700}</style><h2 data-id="heading-0">Tailwind CSSï¼šåŸå­åŒ– CSS çš„ç°ä»£å¼€å‘å®è·µ</h2>
<p>åœ¨å½“ä»Šå¿«é€Ÿè¿­ä»£çš„å‰ç«¯å¼€å‘ç¯å¢ƒä¸­ï¼Œå¦‚ä½•é«˜æ•ˆã€ä¸€è‡´ä¸”å¯ç»´æŠ¤åœ°æ„å»ºç”¨æˆ·ç•Œé¢ï¼Œæˆä¸ºæ¯ä¸ªå›¢é˜Ÿå¿…é¡»é¢å¯¹çš„æ ¸å¿ƒé—®é¢˜ã€‚ä¼ ç»Ÿ CSS çš„å‘½åå›°å¢ƒã€æ ·å¼å†—ä½™å’Œå¤ç”¨éš¾é¢˜ï¼Œå‚¬ç”Ÿäº†ä¸€ç§æ–°çš„è§£å†³æ–¹æ¡ˆâ€”â€”<strong>åŸå­åŒ– CSS</strong>ï¼ˆAtomic CSSï¼‰ã€‚è€Œ <strong>Tailwind CSS</strong>ï¼Œæ­£æ˜¯è¿™ä¸€ç†å¿µæœ€æˆåŠŸçš„å®è·µè€…ã€‚æœ¬æ–‡å°†ç»“åˆå®é™…ä»£ç ä¸å¼€å‘åœºæ™¯ï¼Œæ·±å…¥è§£æ Tailwind CSS çš„æ ¸å¿ƒæ€æƒ³ã€ä¼˜åŠ¿åŠæœ€ä½³å®è·µã€‚</p>
<hr/>
<h3 data-id="heading-1">ä¸€ã€ä»€ä¹ˆæ˜¯åŸå­åŒ– CSSï¼Ÿ</h3>
<p>ä¼ ç»Ÿ CSS å€¾å‘äºâ€œè¯­ä¹‰åŒ–å‘½åâ€ï¼šæˆ‘ä»¬ä¸ºç»„ä»¶èµ·ä¸€ä¸ªåå­—ï¼ˆå¦‚ <code>.card-title</code>ï¼‰ï¼Œç„¶åä¸ºå…¶ç¼–å†™æ ·å¼ã€‚è¿™ç§æ–¹å¼å¸¸è¢«ç§°ä¸ºâ€œé¢å‘å¯¹è±¡ CSSâ€ï¼ˆOOCSSï¼‰ï¼Œå®ƒè¯•å›¾é€šè¿‡<strong>å°è£…åŸºç±»ã€ç»„åˆå¤šæ€</strong>æ¥æå‡å¤ç”¨æ€§ã€‚ä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.btn</span> { <span class="hljs-attribute">padding</span>: <span class="hljs-number">8px</span> <span class="hljs-number">16px</span>; <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">6px</span>; }
<span class="hljs-selector-class">.btn-primary</span> { <span class="hljs-attribute">background</span>: skyblue; <span class="hljs-attribute">color</span>: white; }
</code></pre>
<p>ä½†å®è·µä¸­ï¼Œ<strong>æ ·å¼å¾€å¾€å¸¦æœ‰å¤ªå¤šä¸šåŠ¡å±æ€§</strong>ï¼Œå¯¼è‡´åœ¨ä¸€ä¸ªæˆ–å°‘æ•°ç±»åä¸‹ï¼Œæ ·å¼å‡ ä¹æ— æ³•è·¨é¡¹ç›®å¤ç”¨ï¼Œæœ€ç»ˆæ¼”å˜ä¸ºâ€œä¸€æ¬¡æ€§ CSSâ€ã€‚</p>
<p><strong>åŸå­åŒ– CSS åˆ™åå…¶é“è€Œè¡Œä¹‹</strong>ï¼šå®ƒå°†æ ·å¼æ‹†è§£ä¸ºæœ€å°ã€å•ä¸€èŒè´£çš„â€œåŸå­ç±»â€ï¼Œæ¯ä¸ªç±»åªæ§åˆ¶ä¸€ä¸ªå…·ä½“çš„æ ·å¼å±æ€§ã€‚ä¾‹å¦‚ï¼š</p>
<ul>
<li><code>p-4</code> â†’ <code>padding: 1rem</code></li>
<li><code>bg-blue-500</code> â†’ <code>background-color: #3b82f6</code></li>
<li><code>text-center</code> â†’ <code>text-align: center</code></li>
</ul>
<p>è¿™äº›ç±»åç›´æ¥æè¿°<strong>æ ·å¼æœ¬èº«</strong>ï¼Œè€Œéå†…å®¹è¯­ä¹‰ã€‚é€šè¿‡ç»„åˆè¿™äº›åŸå­ç±»ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ HTML ä¸­ç›´æ¥æ„å»º UIï¼Œæ— éœ€ç¦»å¼€æ¨¡æ¿æ–‡ä»¶ã€‚</p>
<blockquote>
<p>å°†æˆ‘ä»¬çš„ CSS è§„åˆ™æ‹†åˆ†æˆåŸå­ CSSï¼Œä¼šæœ‰å¤§é‡çš„åŸºç±»ï¼Œå¥½å¤ç”¨ã€å¥½ç»´æŠ¤ï¼Œä¸ä¼šé‡å¤ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-2">äºŒã€Tailwind CSSï¼šåŸå­åŒ–ç†å¿µçš„é›†å¤§æˆè€…</h3>
<p>Tailwind CSS æ˜¯ä¸€ä¸ªåŠŸèƒ½ä¼˜å…ˆï¼ˆUtility-Firstï¼‰çš„ CSS æ¡†æ¶ï¼Œå®ƒä¸æä¾›é¢„è®¾ç»„ä»¶ï¼ˆå¦‚ Bootstrap çš„ <code>.btn</code>ï¼‰ï¼Œè€Œæ˜¯æä¾›ä¸€å¥—å®Œæ•´çš„å·¥å…·ç±»ç³»ç»Ÿã€‚</p>
<h4 data-id="heading-3">ç¤ºä¾‹ï¼šæ„å»ºä¸€ä¸ªæŒ‰é’®</h4>
<pre><code class="hljs language-ini" lang="ini">&lt;button <span class="hljs-attr">className</span>=<span class="hljs-string">"px-4 py-2 bg-[skyblue] text-white rounded-lg hover:bg-blue-200"</span>&gt;
  æäº¤
&lt;/button&gt;
</code></pre>
<ul>
<li><code>px-4 py-2</code>ï¼šè®¾ç½®å†…è¾¹è·ï¼Œè¡¨ç¤ºæ°´å¹³æ–¹å‘å†…è¾¹è·1remï¼Œå‚ç›´æ–¹å‘å†…è¾¹è·0.5remï¼›</li>
<li><code>bg-[skyblue]</code>ï¼šèƒŒæ™¯è‰²ï¼›</li>
<li><code>rounded-lg</code>ï¼šåœ†è§’ï¼Œlgä¸ºlargeå¤§å·åœ†è§’ï¼ˆ0.5rem = 8pxï¼‰ï¼›</li>
<li><code>hover:bg-blue-200</code>ï¼šæ‚¬åœæ•ˆæœï¼Œé¼ æ ‡æ‚¬åœæ—¶èƒŒæ™¯è‰²å˜ä¸ºè“è‰²ç³»200æ·±åº¦é¢œè‰²ï¼Œhoverä¸ºæ‚¬åœä¼ªç±»å‰ç¼€ã€‚</li>
</ul>
<p>æ‰€æœ‰æ ·å¼ä¸€ç›®äº†ç„¶ï¼Œæ— éœ€æŸ¥é˜… CSS æ–‡ä»¶ã€‚</p>
<h4 data-id="heading-4">ğŸ¤– LLM æ—¶ä»£çš„ç†æƒ³æ­æ¡£</h4>
<p>éšç€å¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰çš„æ™®åŠï¼Œ<strong>ç”¨è‡ªç„¶è¯­è¨€ç”Ÿæˆ UI ä»£ç </strong>æˆä¸ºå¯èƒ½ã€‚è€Œ Tailwind çš„ç±»åå…·æœ‰é«˜åº¦<strong>è¯­ä¹‰åŒ–ã€ç»“æ„åŒ–ã€å¯é¢„æµ‹</strong>çš„ç‰¹ç‚¹ï¼š</p>
<ul>
<li>å¼€å‘è€…åªéœ€æè¿°ï¼šâ€œä¸€ä¸ªå¸¦åœ†è§’ã€è“è‰²èƒŒæ™¯ã€ç™½è‰²æ–‡å­—çš„æŒ‰é’®â€</li>
<li>LLM å³å¯è¾“å‡ºï¼š<code>&lt;button class="px-4 py-2 bg-blue-500 text-white rounded"&gt;</code></li>
</ul>
<p>ç›¸æ¯”ä¹‹ä¸‹ï¼Œä¼ ç»Ÿ CSS éœ€è¦æ¨¡å‹åŒæ—¶ç”Ÿæˆ HTML å’Œ CSSï¼Œå¹¶ä¿è¯ç±»ååŒ¹é…ï¼Œéš¾åº¦æ›´é«˜ã€‚<strong>Tailwind è®©â€œPrompt â†’ UIâ€ çš„è·¯å¾„æ›´çŸ­ã€æ›´å¯é </strong>ã€‚</p>
<hr/>
<h3 data-id="heading-5">ä¸‰ã€å¿«é€Ÿä¸Šæ‰‹ï¼šåŸºäº Vite çš„é¡¹ç›®é…ç½®</h3>
<p>è¦åœ¨é¡¹ç›®ä¸­ä½¿ç”¨ Tailwindï¼Œåªéœ€å‡ æ­¥ï¼š</p>
<ol>
<li>
<p>åˆ›å»º Vite é¡¹ç›®ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp">npm <span class="hljs-keyword">init</span> vite
</code></pre>
</li>
<li>
<p>å®‰è£… Tailwind åŠå®˜æ–¹ Vite æ’ä»¶ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin">npm install -D tailwindcss <span class="hljs-meta">@tailwindcss</span>/vite
npx tailwindcss <span class="hljs-keyword">init</span>
</code></pre>
</li>
<li>
<p>é…ç½® <code>vite.config.js</code>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { defineConfig } <span class="hljs-keyword">from</span> <span class="hljs-string">'vite'</span>
<span class="hljs-keyword">import</span> tailwindcss <span class="hljs-keyword">from</span> <span class="hljs-string">'@tailwindcss/vite'</span> <span class="hljs-comment">// tailwindæ’ä»¶</span>
<span class="hljs-keyword">import</span> react <span class="hljs-keyword">from</span> <span class="hljs-string">'@vitejs/plugin-react'</span> <span class="hljs-comment">// reactæ’ä»¶</span>

<span class="hljs-comment">// https://vite.dev/config/</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineConfig</span>({
<span class="hljs-attr">plugins</span>: [<span class="hljs-title function_">react</span>(), <span class="hljs-title function_">tailwindcss</span>()],
})
</code></pre>
</li>
<li>
<p>åœ¨å…¥å£ CSS æ–‡ä»¶ï¼ˆå¦‚ <code>index.css</code>ï¼‰ä¸­å¼•å…¥ï¼š</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-keyword">@import</span> <span class="hljs-string">"tailwindcss"</span>;
</code></pre>
</li>
</ol>
<p>è‡³æ­¤ï¼Œæ‰€æœ‰åŸå­ç±»å³å¯åœ¨ JSX/HTML ä¸­ç›´æ¥ä½¿ç”¨ï¼Œ<strong>å‡ ä¹æ— éœ€å†æ‰‹å†™ CSS</strong>ã€‚</p>
<h3 data-id="heading-6">å››ã€æ€§èƒ½ä¸å·¥ç¨‹åŒ–ï¼šDocumentFragment ä¸ React Fragment</h3>
<p>é«˜æ•ˆçš„ UI ä¸ä»…å…³ä¹è§†è§‰ï¼Œä¹Ÿæ¶‰åŠæ€§èƒ½ã€‚åœ¨åŠ¨æ€æ¸²æŸ“å¤§é‡ DOM èŠ‚ç‚¹æ—¶ï¼Œ<strong>å‡å°‘é‡æ’/é‡ç»˜</strong>è‡³å…³é‡è¦ã€‚</p>
<h4 data-id="heading-7">åŸç”Ÿä¼˜åŒ–ï¼šDocumentFragment</h4>
<pre><code class="hljs language-ini" lang="ini">const <span class="hljs-attr">fragment</span> = document.createDocumentFragment()<span class="hljs-comment">;</span>
fragment.appendChild(p1)<span class="hljs-comment">;</span>
fragment.appendChild(p2)<span class="hljs-comment">;</span>
container.appendChild(fragment)<span class="hljs-comment">; // ä»…è§¦å‘ä¸€æ¬¡ DOM æ›´æ–°</span>
</code></pre>
<p>é€šè¿‡ <code>DocumentFragment</code>ï¼Œæˆ‘ä»¬å°†å¤šä¸ªèŠ‚ç‚¹åœ¨å†…å­˜ä¸­ç»„è£…åä¸€æ¬¡æ€§æ’å…¥ï¼Œæ˜¾è‘—æå‡æ€§èƒ½ã€‚</p>
<h4 data-id="heading-8">React åœºæ™¯ï¼šFragment è§£å†³å•æ ¹é™åˆ¶</h4>
<p>React è¦æ±‚ç»„ä»¶è¿”å›å•ä¸€æ ¹èŠ‚ç‚¹ã€‚è‹¥éœ€è¿”å›å¤šä¸ªåŒçº§å…ƒç´ ï¼Œä¼ ç»Ÿåšæ³•æ˜¯åŒ…è£¹ä¸€ä¸ªæ— æ„ä¹‰çš„ <code>&lt;div&gt;</code>ï¼Œä½†è¿™ä¼šæ±¡æŸ“ DOM ç»“æ„ã€‚</p>
<p>Tailwind + React çš„æœ€ä½³å®è·µæ˜¯ä½¿ç”¨ <strong>Fragment</strong>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>111<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>222<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">ArticleCard</span> /&gt;</span> {/* è‡ªå®šä¹‰å¡ç‰‡ç»„ä»¶ */}
    <span class="hljs-tag">&lt;/&gt;</span></span>
  )
}
</code></pre>
<p><code>&lt;&gt;...&lt;/&gt;</code>ï¼ˆå³ <code>&lt;React.Fragment&gt;</code>ï¼‰å…è®¸æˆ‘ä»¬è¿”å›å¤šä¸ªå…ƒç´ ï¼Œ<strong>ä¸äº§ç”Ÿé¢å¤– DOM èŠ‚ç‚¹</strong>ï¼Œä¿æŒç»“æ„çº¯å‡€ï¼ŒåŒæ—¶ä¹Ÿä¾¿äºä¸€æ¬¡æ€§æ’å…¥æ•´ä¸ª UI ç‰‡æ®µï¼Œæå‡æ¸²æŸ“æ€§èƒ½ã€‚</p>
<h3 data-id="heading-9">äº”ã€å“åº”å¼è®¾è®¡ï¼šMobile First çš„ä¼˜é›…å®ç°</h3>
<p>Tailwind å†…ç½®å“åº”å¼å‰ç¼€ï¼Œå®Œç¾æ”¯æŒâ€œç§»åŠ¨ç«¯ä¼˜å…ˆâ€å¼€å‘ç­–ç•¥ã€‚</p>
<h4 data-id="heading-10">åŸºç¡€å¸ƒå±€ï¼ˆç§»åŠ¨ç«¯å‚ç›´å †å ï¼‰ï¼š</h4>
<pre><code class="hljs language-css" lang="css">&lt;<span class="hljs-selector-tag">div</span> className="<span class="hljs-attribute">flex</span> <span class="hljs-attribute">flex</span>-col <span class="hljs-attribute">gap</span>-<span class="hljs-number">4</span>"&gt;
  &lt;<span class="hljs-selector-tag">main</span> className="bg-blue-<span class="hljs-number">100</span> <span class="hljs-selector-tag">p</span>-<span class="hljs-number">4</span>"&gt;ä¸»å†…å®¹&lt;/<span class="hljs-selector-tag">main</span>&gt;
  &lt;<span class="hljs-selector-tag">aside</span> className="bg-green-<span class="hljs-number">100</span> <span class="hljs-selector-tag">p</span>-<span class="hljs-number">4</span>"&gt;ä¾§è¾¹æ &lt;/<span class="hljs-selector-tag">aside</span>&gt;
&lt;/<span class="hljs-selector-tag">div</span>&gt;
</code></pre>
<h4 data-id="heading-11">å¢å¼ºè‡³æ¡Œé¢ç«¯ï¼ˆæ°´å¹³æ’åˆ—ï¼‰ï¼š</h4>
<pre><code class="hljs language-ini" lang="ini">&lt;div <span class="hljs-attr">className</span>=<span class="hljs-string">"flex flex-col md:flex-row gap-4"</span>&gt;
  &lt;main <span class="hljs-attr">className</span>=<span class="hljs-string">"bg-blue-100 p-4 md:w-2/3"</span>&gt;ä¸»å†…å®¹&lt;/main&gt;
  &lt;aside <span class="hljs-attr">className</span>=<span class="hljs-string">"bg-green-100 p-4 md:w-1/3"</span>&gt;ä¾§è¾¹æ &lt;/aside&gt;
&lt;/div&gt;
</code></pre>
<ul>
<li>å°å±ï¼š<code>flex-col</code>ï¼ˆå‚ç›´ï¼‰</li>
<li>ä¸­å±åŠä»¥ä¸Šï¼š<code>md:flex-row</code>ï¼ˆæ°´å¹³ï¼‰</li>
</ul>
<p>è¿™ç§â€œæ¸è¿›å¢å¼ºâ€çš„æ–¹å¼ï¼Œç¡®ä¿äº†åœ¨æ‰€æœ‰è®¾å¤‡ä¸Šéƒ½æœ‰è‰¯å¥½ä½“éªŒã€‚</p>
<h3 data-id="heading-12">å…­ã€ä¸ºä»€ä¹ˆé€‰æ‹© Tailwindï¼Ÿ</h3>
<ol>
<li><strong>å¼€å‘æ•ˆç‡é«˜</strong>ï¼šæ ·å¼å³ä»£ç ï¼Œæ— éœ€ä¸Šä¸‹æ–‡åˆ‡æ¢ï¼›</li>
<li><strong>è®¾è®¡ä¸€è‡´æ€§</strong>ï¼šåŸºäºé¢„è®¾çš„è®¾è®¡ç³»ç»Ÿï¼ˆé—´è·ã€é¢œè‰²ã€å­—ä½“ç­‰ï¼‰ï¼›</li>
<li><strong>é«˜åº¦å¯å®šåˆ¶</strong>ï¼šé€šè¿‡ <code>tailwind.config.js</code> æ‰©å±•ä¸»é¢˜ã€æ–­ç‚¹ã€æ’ä»¶ï¼›</li>
<li><strong>æè‡´æ€§èƒ½</strong>ï¼šJIT æ¨¡å¼ä»…ç”Ÿæˆç”¨åˆ°çš„ CSSï¼Œä½“ç§¯æå°ï¼›</li>
<li><strong>æœªæ¥å‹å¥½</strong>ï¼šä¸ Reactã€Vueã€Svelte ç­‰ç°ä»£æ¡†æ¶æ— ç¼é›†æˆï¼›</li>
<li><strong>AI å‹å¥½</strong>ï¼šç±»åç»“æ„æ¸…æ™°ï¼Œæ˜“äº LLM ç†è§£ä¸ç”Ÿæˆã€‚</li>
</ol>
<h3 data-id="heading-13">ä¸ƒã€ç»“è¯­</h3>
<p>Tailwind CSS ä¸ä»…ä»…æ˜¯ä¸€ä¸ª CSS æ¡†æ¶ï¼Œæ›´æ˜¯ä¸€ç§<strong>UI å¼€å‘å“²å­¦</strong>ã€‚å®ƒé€šè¿‡åŸå­åŒ–ã€åŠŸèƒ½ä¼˜å…ˆçš„è®¾è®¡ï¼Œå°† CSS ä»â€œå‘½åçš„è‰ºæœ¯â€è½¬å˜ä¸ºâ€œç»„åˆçš„ç§‘å­¦â€ã€‚æ­£å¦‚æˆ‘ä»¬åœ¨æ–‡ç« ä¸­æ‰€è§ï¼Œæ— è®ºæ˜¯ç®€å•çš„æŒ‰é’®ã€å¤æ‚çš„å¡ç‰‡ï¼Œè¿˜æ˜¯å“åº”å¼å¸ƒå±€ï¼ŒTailwind éƒ½èƒ½ä»¥ç®€æ´ã€ç›´è§‚çš„æ–¹å¼å®ç°ã€‚</p>
<p>æ›´é‡è¦çš„æ˜¯ï¼Œåœ¨ AI ç¼–ç¨‹æ—¶ä»£ï¼ŒTailwind çš„<strong>ç»“æ„åŒ–ã€è¯­ä¹‰åŒ–ç±»å</strong>ä½¿å…¶æˆä¸ºè‡ªç„¶è¯­è¨€ç”Ÿæˆ UI çš„ç†æƒ³è½½ä½“ã€‚å¯¹äºè¿½æ±‚æ•ˆç‡ã€ä¸€è‡´æ€§å’Œå¯ç»´æŠ¤æ€§çš„ç°ä»£å‰ç«¯å›¢é˜Ÿè€Œè¨€ï¼ŒTailwind CSS æ— ç–‘æ˜¯å€¼å¾—æ‹¥æŠ±çš„åˆ©å™¨ã€‚</p>
<blockquote>
<p><strong>â€œä¸ç”¨ç¦»å¼€ HTML å†™ CSS äº†ï¼Œæ‰€æœ‰çš„æ ·å¼éƒ½åœ¨ç±»åä¸­ã€‚â€</strong><br/>
â€”â€” è¿™æˆ–è®¸æ˜¯å¯¹ Tailwind æœ€ç²¾ç‚¼çš„èµç¾ã€‚</p>
</blockquote>
<p><strong>å‚è€ƒèµ„æ–™</strong>ï¼š</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftailwindcss.com%2F" target="_blank" title="https://tailwindcss.com/" ref="nofollow noopener noreferrer">Tailwind CSS å®˜æ–¹æ–‡æ¡£</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Cursor Visual Editorï¼šå‰ç«¯æ ·å¼è°ƒè¯•çš„æ–°åˆ©å™¨]]></title>    <link>https://juejin.cn/post/7587776610436759567</link>    <guid>https://juejin.cn/post/7587776610436759567</guid>    <pubDate>2025-12-26T19:05:37.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587776610436759567" data-draft-id="7587965800273018906" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Cursor Visual Editorï¼šå‰ç«¯æ ·å¼è°ƒè¯•çš„æ–°åˆ©å™¨"/> <meta itemprop="keywords" content="CSS,å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-26T19:05:37.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="bytemanx"/> <meta itemprop="url" content="https://juejin.cn/user/4059855780846936"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Cursor Visual Editorï¼šå‰ç«¯æ ·å¼è°ƒè¯•çš„æ–°åˆ©å™¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4059855780846936/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    bytemanx
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-26T19:05:37.000Z" title="Fri Dec 26 2025 19:05:37 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä½œä¸ºå‰ç«¯å¼€å‘è€…ï¼Œä½ ä¸€å®šç»å†è¿‡è¿™æ ·çš„åœºæ™¯ï¼šä¸ºäº†è°ƒæ•´ä¸€ä¸ªæ¸å˜çš„è§’åº¦ã€ä¿®æ”¹ä¸€ä¸ªå…ƒç´ çš„è¡Œé«˜ï¼Œåå¤åœ¨ä»£ç å’Œæµè§ˆå™¨ä¹‹é—´åˆ‡æ¢ï¼Œæ”¹ä¸€è¡Œä»£ç ã€ä¿å­˜ã€åˆ·æ–°ã€çœ‹æ•ˆæœã€å†æ”¹â€¦â€¦</p>
<p>è¿™ç§"ç›²è°ƒ"çš„æ–¹å¼æ•ˆç‡ä½ä¸‹ï¼Œå°¤å…¶æ˜¯åœ¨è°ƒè¯• CSS åŠ¨ç”»è¿™ç±»éœ€è¦ç²¾ç»†æ§åˆ¶çš„æ•ˆæœæ—¶ï¼Œæ›´æ˜¯è®©äººæŠ“ç‹‚ã€‚</p>
<p>å¥½æ¶ˆæ¯æ˜¯ï¼ŒCursor 2.2 å¸¦æ¥äº†ä¸€ä¸ªä»¤äººå…´å¥‹çš„æ–°åŠŸèƒ½â€”â€”<strong>Visual Editor</strong>ã€‚å®ƒå°†ä½ çš„ Web åº”ç”¨ã€ä»£ç åº“å’Œå¯è§†åŒ–ç¼–è¾‘å·¥å…·æ•´åˆåˆ°åŒä¸€ä¸ªçª—å£ä¸­ï¼Œè®©ç•Œé¢è°ƒè¯•å˜å¾—å‰æ‰€æœªæœ‰çš„ç›´è§‚ã€‚</p>
<p>ä»Šå¤©ï¼Œæˆ‘ä»¬å°±é€šè¿‡ä¸¤ä¸ªç‚«é…·çš„ CSS åŠ¨ç”»æ¡ˆä¾‹ï¼Œæ¥ä½“éªŒä¸€ä¸‹è¿™ä¸ªå¯è§†åŒ–ç¼–è¾‘å™¨çš„å¼ºå¤§ä¹‹å¤„ã€‚</p>
<h2 data-id="heading-0">è®¤è¯† Visual Editor</h2>
<p>é¦–å…ˆï¼Œåœ¨ Cursor ä¸­é€‰æ‹© <strong>Open Browser</strong> å³å¯æ‰“å¼€å†…ç½®æµè§ˆå™¨å°çª—å£ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f8fe3aa43615414884e06d5701fefb77~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgYnl0ZW1hbng=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767380736&amp;x-signature=TfRYZrS8h1bY%2BLt2D42hgaG7Jg8%3D" alt="20251227024633_rec_-convert.gif" loading="lazy"/></p>
<p>æ ¹æ® <a href="https://link.juejin.cn?target=https%3A%2F%2Fcursor.com%2Fblog%2Fbrowser-visual-editor" target="_blank" title="https://cursor.com/blog/browser-visual-editor" ref="nofollow noopener noreferrer">Cursor å®˜æ–¹åšå®¢</a> çš„ä»‹ç»ï¼ŒVisual Editor æä¾›äº†å››å¤§æ ¸å¿ƒèƒ½åŠ›ï¼š</p>
<h3 data-id="heading-1">1. æ‹–æ‹½é‡æ’ï¼ˆDrag-and-dropï¼‰</h3>
<p>ç›´æ¥åœ¨æ¸²æŸ“å¥½çš„é¡µé¢ä¸Šæ‹–åŠ¨å…ƒç´ ï¼Œè°ƒæ•´å¸ƒå±€ç»“æ„ã€‚ä½ å¯ä»¥äº¤æ¢æŒ‰é’®é¡ºåºã€æ—‹è½¬åŒºå—ä½ç½®ã€æµ‹è¯•ä¸åŒçš„ç½‘æ ¼é…ç½®â€”â€”æ‰€æœ‰æ“ä½œéƒ½ä¸éœ€è¦åˆ‡æ¢ä¸Šä¸‹æ–‡ã€‚å½“è§†è§‰è®¾è®¡ç¬¦åˆé¢„æœŸåï¼Œè®© Agent å¸®ä½ æ›´æ–°åº•å±‚ä»£ç ã€‚</p>
<h3 data-id="heading-2">2. ç»„ä»¶çŠ¶æ€æµ‹è¯•ï¼ˆTest component statesï¼‰</h3>
<p>å¯¹äº React åº”ç”¨ï¼ŒVisual Editor å¯ä»¥åœ¨ä¾§è¾¹æ ç›´æ¥æ˜¾ç¤ºç»„ä»¶çš„ propsï¼Œè®©ä½ æ–¹ä¾¿åœ°åˆ‡æ¢ä¸åŒçš„ç»„ä»¶çŠ¶æ€å˜ä½“ã€‚</p>
<h3 data-id="heading-3">3. å±æ€§å¯è§†åŒ–è°ƒæ•´ï¼ˆVisual controlsï¼‰</h3>
<p>è¿™æ˜¯æœ€å®ç”¨çš„åŠŸèƒ½ä¹‹ä¸€ã€‚ä¾§è¾¹æ æä¾›äº†æ»‘å—ã€é¢œè‰²é€‰æ‹©å™¨ç­‰å¯è§†åŒ–æ§ä»¶ï¼Œæ”¯æŒå®æ—¶é¢„è§ˆã€‚ä½ å¯ä»¥ç²¾ç¡®è°ƒæ•´é¢œè‰²ã€å¸ƒå±€ã€å­—ä½“ç­‰å±æ€§ï¼Œæ‰€æœ‰æ”¹åŠ¨å³æ—¶ç”Ÿæ•ˆã€‚</p>
<h3 data-id="heading-4">4. ç‚¹å‡» + æç¤ºï¼ˆPoint and promptï¼‰</h3>
<p>é€‰ä¸­ç•Œé¢ä¸Šçš„ä»»æ„å…ƒç´ ï¼Œç”¨è‡ªç„¶è¯­è¨€æè¿°ä½ æƒ³è¦çš„ä¿®æ”¹ã€‚æ¯”å¦‚ç‚¹å‡»ä¸€ä¸ªå…ƒç´ è¯´"æŠŠè¿™ä¸ªå˜å¤§"ï¼Œç‚¹å‡»å¦ä¸€ä¸ªè¯´"æ”¹æˆçº¢è‰²"â€”â€”å¤šä¸ª Agent ä¼šå¹¶è¡Œæ‰§è¡Œï¼Œå‡ ç§’é’Ÿå†…å®Œæˆä¿®æ”¹ã€‚</p>
<h2 data-id="heading-5">å®æˆ˜æ¡ˆä¾‹ä¸€ï¼šæ¸å˜æµåŠ¨æ–‡å­—</h2>
<p>è®©æˆ‘ä»¬ç”¨ä¸€ä¸ªæ¸å˜æµåŠ¨æ–‡å­—æ•ˆæœæ¥ä½“éªŒ Visual Editor çš„å¨åŠ›ã€‚</p>
<h3 data-id="heading-6">æ•ˆæœå±•ç¤º</h3>
<p>å…ˆæ¥çœ‹çœ‹æœ€ç»ˆæ•ˆæœï¼š</p>
<p><span href="https://code.juejin.cn/pen/7588133688486232127" class="code-editor-container"><iframe class="code-editor-frame" data-code="code-editor-element" data-code-id="7588133688486232127" data-src="https://code.juejin.cn/pen/7588133688486232127" style="display:none;" loading="lazy"/><span class="loading-placeholder" style="display:none"><img class="placeholder-image" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAAJElEQVRoge3BMQEAAADCoPVP7WkJoAAAAAAAAAAAAAAAAAAAbjh8AAFte11jAAAAAElFTkSuQmCC" loading="lazy"/><span class="loading-logo"/></span></span></p>
<h3 data-id="heading-7">å¯è§†åŒ–è°ƒè¯•ä½“éªŒ</h3>
<p>åœ¨ Visual Editor ä¸­æ‰“å¼€è¿™ä¸ªé¡µé¢åï¼Œç‚¹å‡»æ–‡å­—å…ƒç´ å³å¯é€‰ä¸­å®ƒï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/764c21244f964632ab6c16263165f8bb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgYnl0ZW1hbng=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767380736&amp;x-signature=ifpwCZInj8bCEFE%2B9gFvReR307c%3D" alt="image.png" loading="lazy"/></p>
<p>é€‰ä¸­åï¼Œä¾§è¾¹æ ä¼šæ˜¾ç¤ºè¯¥å…ƒç´ çš„æ‰€æœ‰å¯è°ƒæ•´å±æ€§ã€‚æ¯”å¦‚æˆ‘ä»¬æƒ³è°ƒæ•´æ¸å˜çš„è§’åº¦ï¼Œåªéœ€è¦æ‹–åŠ¨æ»‘å—å³å¯å®æ—¶é¢„è§ˆæ•ˆæœï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/40049c2c425c4c81bef5e64823cff4fe~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgYnl0ZW1hbng=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767380736&amp;x-signature=w2evS5dDaJOhHlwNXXonVGHkOfU%3D" alt="20251226200440_rec_.gif" loading="lazy"/></p>
<p>æƒ³è±¡ä¸€ä¸‹ï¼Œå¦‚æœç”¨ä¼ ç»Ÿæ–¹å¼è°ƒè¯•è¿™ä¸ªè§’åº¦å‚æ•°ï¼šä¿®æ”¹ä»£ç  â†’ ä¿å­˜ â†’ ç­‰å¾…çƒ­æ›´æ–° â†’ æŸ¥çœ‹æ•ˆæœ â†’ ä¸æ»¡æ„å†æ”¹â€¦â€¦è€Œç°åœ¨åªéœ€è¦æ‹–åŠ¨æ»‘å—ï¼Œæ‰€è§å³æ‰€å¾—ï¼</p>
<h3 data-id="heading-8">æ ¸å¿ƒåŸç†</h3>
<p>è¿™ä¸ªæ¸å˜æµåŠ¨æ•ˆæœçš„å®ç°åŸç†å…¶å®å¾ˆç®€å•ï¼Œæ ¸å¿ƒä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.text</span> {
    <span class="hljs-comment">/* å¤šè‰²çº¿æ€§æ¸å˜ */</span>
    <span class="hljs-attribute">background</span>: <span class="hljs-built_in">linear-gradient</span>(
        <span class="hljs-number">90deg</span>,
        <span class="hljs-built_in">rgba</span>(<span class="hljs-number">48</span>, <span class="hljs-number">207</span>, <span class="hljs-number">208</span>, <span class="hljs-number">1</span>) <span class="hljs-number">0%</span>,
        <span class="hljs-built_in">rgba</span>(<span class="hljs-number">102</span>, <span class="hljs-number">166</span>, <span class="hljs-number">255</span>, <span class="hljs-number">1</span>) <span class="hljs-number">22%</span>,
        <span class="hljs-built_in">rgba</span>(<span class="hljs-number">136</span>, <span class="hljs-number">136</span>, <span class="hljs-number">136</span>, <span class="hljs-number">1</span>) <span class="hljs-number">40%</span>,
        <span class="hljs-built_in">rgba</span>(<span class="hljs-number">255</span>, <span class="hljs-number">154</span>, <span class="hljs-number">139</span>, <span class="hljs-number">1</span>) <span class="hljs-number">60%</span>,
        <span class="hljs-built_in">rgba</span>(<span class="hljs-number">51</span>, <span class="hljs-number">8</span>, <span class="hljs-number">103</span>, <span class="hljs-number">1</span>) <span class="hljs-number">81%</span>,
        <span class="hljs-built_in">rgba</span>(<span class="hljs-number">48</span>, <span class="hljs-number">207</span>, <span class="hljs-number">208</span>, <span class="hljs-number">1</span>) <span class="hljs-number">100%</span>
    );
    <span class="hljs-comment">/* èƒŒæ™¯å®½åº¦è®¾ä¸ºå…ƒç´ çš„ 2 å€ */</span>
    <span class="hljs-attribute">background-size</span>: <span class="hljs-number">200%</span> auto;
    <span class="hljs-comment">/* å°†èƒŒæ™¯è£å‰ªåˆ°æ–‡å­—å½¢çŠ¶ */</span>
    -webkit-<span class="hljs-attribute">background-clip</span>: text;
    <span class="hljs-attribute">background-clip</span>: text;
    <span class="hljs-comment">/* æ–‡å­—é¢œè‰²é€æ˜ï¼Œéœ²å‡ºèƒŒæ™¯ */</span>
    <span class="hljs-attribute">color</span>: transparent;
    <span class="hljs-comment">/* åº”ç”¨æµåŠ¨åŠ¨ç”» */</span>
    <span class="hljs-attribute">animation</span>: gradient-flow <span class="hljs-number">3s</span> linear infinite;
}

<span class="hljs-keyword">@keyframes</span> gradient-flow {
    <span class="hljs-number">0%</span> {
        <span class="hljs-attribute">background-position</span>: <span class="hljs-number">0%</span> center;
    }
    <span class="hljs-number">100%</span> {
        <span class="hljs-attribute">background-position</span>: <span class="hljs-number">200%</span> center;
    }
}
</code></pre>
<p>åŸç†è§£æï¼š</p>
<ol>
<li><strong><code>linear-gradient</code></strong>ï¼šåˆ›å»ºä¸€ä¸ªå¤šè‰²æ¸å˜èƒŒæ™¯ï¼Œé¦–å°¾é¢œè‰²ç›¸åŒä»¥å®ç°æ— ç¼å¾ªç¯</li>
<li><strong><code>background-size: 200%</code></strong>ï¼šè®©èƒŒæ™¯å®½åº¦æ˜¯å…ƒç´ çš„ä¸¤å€ï¼Œä¸ºåŠ¨ç”»æä¾›ç§»åŠ¨ç©ºé—´</li>
<li><strong><code>background-clip: text</code></strong>ï¼šå°†èƒŒæ™¯è£å‰ªåˆ°æ–‡å­—è½®å»“å†…</li>
<li><strong><code>animation</code></strong>ï¼šé€šè¿‡æ”¹å˜ <code>background-position</code> ä» 0% åˆ° 200%ï¼Œè®©æ¸å˜"æµåŠ¨"èµ·æ¥</li>
</ol>
<h2 data-id="heading-9">å®æˆ˜æ¡ˆä¾‹äºŒï¼šç«‹ä½“é€è§†æ–‡å­—</h2>
<p>æ¥ä¸‹æ¥çœ‹ä¸€ä¸ªæ›´æœ‰æ„æ€çš„æ•ˆæœâ€”â€”ç«‹ä½“é€è§†æ–‡å­—ã€‚</p>
<h3 data-id="heading-10">æ•ˆæœå±•ç¤º</h3>
<p><span href="https://code.juejin.cn/pen/7588238924326109184" class="code-editor-container"><iframe class="code-editor-frame" data-code="code-editor-element" data-code-id="7588238924326109184" data-src="https://code.juejin.cn/pen/7588238924326109184" style="display:none;" loading="lazy"/><span class="loading-placeholder" style="display:none"><img class="placeholder-image" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAAJElEQVRoge3BMQEAAADCoPVP7WkJoAAAAAAAAAAAAAAAAAAAbjh8AAFte11jAAAAAElFTkSuQmCC" loading="lazy"/><span class="loading-logo"/></span></span></p>
<h3 data-id="heading-11">å¯è§†åŒ–è°ƒè¯•ä½“éªŒ</h3>
<p>è¿™ä¸ªæ•ˆæœçš„è§†è§‰å‘ˆç°é«˜åº¦ä¾èµ–äº <code>line-height</code> å’Œ <code>clip-height</code> ç­‰å‚æ•°çš„ç²¾ç¡®é…åˆã€‚ä½¿ç”¨ Visual Editorï¼Œæˆ‘ä»¬å¯ä»¥ç›´è§‚åœ°è°ƒæ•´è¿™äº›æ•°å€¼ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/52df46b595cf435db7805eb03081a854~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgYnl0ZW1hbng=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767380736&amp;x-signature=zn7%2FWPk7LdDgZ%2F4SrAJsuigbrOo%3D" alt="20251227021832_rec_-convert.gif" loading="lazy"/></p>
<p>é€šè¿‡å¯è§†åŒ–è°ƒæ•´ï¼Œä½ å¯ä»¥ç›´è§‚åœ°çœ‹åˆ°å‚æ•°å˜åŒ–å¯¹ç«‹ä½“æ•ˆæœçš„å½±å“ï¼Œå¿«é€Ÿæ‰¾åˆ°æœ€ä½³çš„è§†è§‰å¹³è¡¡ç‚¹ã€‚</p>
<h3 data-id="heading-12">æ ¸å¿ƒåŸç†</h3>
<p>è¿™ä¸ªç«‹ä½“é€è§†æ•ˆæœçš„æ ¸å¿ƒåœ¨äº CSS å˜æ¢çš„å·§å¦™ç»„åˆï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-pseudo">:root</span> {
    <span class="hljs-attr">--clip-height</span>: <span class="hljs-number">90px</span>;
    <span class="hljs-attr">--line-height</span>: <span class="hljs-number">85px</span>;
    <span class="hljs-attr">--left-offset</span>: <span class="hljs-number">50px</span>;
}

<span class="hljs-selector-class">.Words-line</span> {
    <span class="hljs-attribute">height</span>: <span class="hljs-built_in">var</span>(--clip-height);
    <span class="hljs-attribute">overflow</span>: hidden;
    <span class="hljs-attribute">position</span>: relative;
}

<span class="hljs-comment">/* å¥‡æ•°è¡Œï¼šå€¾æ–œ + å‹ç¼© */</span>
<span class="hljs-selector-class">.Words-line</span><span class="hljs-selector-pseudo">:nth-child</span>(odd) {
    <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">skew</span>(<span class="hljs-number">60deg</span>, -<span class="hljs-number">30deg</span>) <span class="hljs-built_in">scaleY</span>(<span class="hljs-number">0.66667</span>);
}

<span class="hljs-comment">/* å¶æ•°è¡Œï¼šå€¾æ–œ + æ‹‰ä¼¸ */</span>
<span class="hljs-selector-class">.Words-line</span><span class="hljs-selector-pseudo">:nth-child</span>(even) {
    <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">skew</span>(<span class="hljs-number">0deg</span>, -<span class="hljs-number">30deg</span>) <span class="hljs-built_in">scaleY</span>(<span class="hljs-number">1.33333</span>);
}

<span class="hljs-comment">/* æ¯è¡Œé€’å¢çš„å·¦åç§»ï¼Œå½¢æˆé˜¶æ¢¯æ•ˆæœ */</span>
<span class="hljs-selector-class">.Words-line</span><span class="hljs-selector-pseudo">:nth-child</span>(<span class="hljs-number">1</span>) { <span class="hljs-attribute">left</span>: <span class="hljs-built_in">calc</span>(<span class="hljs-built_in">var</span>(--left-offset) * <span class="hljs-number">1</span>); }
<span class="hljs-selector-class">.Words-line</span><span class="hljs-selector-pseudo">:nth-child</span>(<span class="hljs-number">2</span>) { <span class="hljs-attribute">left</span>: <span class="hljs-built_in">calc</span>(<span class="hljs-built_in">var</span>(--left-offset) * <span class="hljs-number">2</span>); }
<span class="hljs-selector-class">.Words-line</span><span class="hljs-selector-pseudo">:nth-child</span>(<span class="hljs-number">3</span>) { <span class="hljs-attribute">left</span>: <span class="hljs-built_in">calc</span>(<span class="hljs-built_in">var</span>(--left-offset) * <span class="hljs-number">3</span>); }
<span class="hljs-comment">/* ... */</span>
</code></pre>
<p>åŸç†è§£æï¼š</p>
<ol>
<li><strong><code>skew()</code> å€¾æ–œå˜æ¢</strong>ï¼šé€šè¿‡ä¸åŒçš„å€¾æ–œè§’åº¦ï¼Œè®©å¥‡å¶è¡Œå½¢æˆè§†è§‰ä¸Šçš„"æŠ˜å "æ•ˆæœ</li>
<li><strong><code>scaleY()</code> å‚ç›´ç¼©æ”¾</strong>ï¼šå¥‡æ•°è¡Œå‹ç¼©ï¼ˆ0.66667ï¼‰ï¼Œå¶æ•°è¡Œæ‹‰ä¼¸ï¼ˆ1.33333ï¼‰ï¼Œé…åˆå€¾æ–œåˆ›é€  3D é€è§†é”™è§‰</li>
<li><strong>é€’å¢çš„ <code>left</code> åç§»</strong>ï¼šæ¯è¡Œå‘å³åç§»ï¼Œå½¢æˆé˜¶æ¢¯çŠ¶çš„ç«‹ä½“å±‚æ¬¡</li>
<li><strong><code>overflow: hidden</code></strong>ï¼šè£å‰ªè¶…å‡ºçš„å†…å®¹ï¼Œç¡®ä¿æ¯è¡Œåªæ˜¾ç¤ºå›ºå®šé«˜åº¦</li>
</ol>
<p>hover æ—¶çš„æ–‡å­—åˆ‡æ¢åŠ¨ç”»åˆ™é€šè¿‡ <code>translate3d</code> å®ç°ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-tag">p</span> {
    <span class="hljs-attribute">transition</span>: all <span class="hljs-number">0.4s</span> ease-in-out;
}

<span class="hljs-selector-class">.Words</span><span class="hljs-selector-pseudo">:hover</span> <span class="hljs-selector-tag">p</span> {
    <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translate3d</span>(<span class="hljs-number">0</span>, <span class="hljs-built_in">calc</span>(<span class="hljs-built_in">var</span>(--clip-height) * -<span class="hljs-number">1</span>), <span class="hljs-number">0</span>);
}
</code></pre>
<h2 data-id="heading-13">æ€»ç»“</h2>
<p>Cursor Visual Editor çš„å‡ºç°ï¼ŒçœŸæ­£å®ç°äº†"è®¾è®¡å³ä»£ç "çš„ç†å¿µï¼š</p>
<ul>
<li><strong>æ‰€è§å³æ‰€å¾—</strong>ï¼šå‘Šåˆ«åå¤ä¿å­˜åˆ·æ–°çš„ä½æ•ˆå¾ªç¯ï¼Œæ ·å¼è°ƒæ•´å³æ—¶ç”Ÿæ•ˆ</li>
<li><strong>é™ä½å¿ƒæ™ºè´Ÿæ‹…</strong>ï¼šä¸å†éœ€è¦è„‘è¡¥å‚æ•°å˜åŒ–çš„æ•ˆæœï¼Œå¯è§†åŒ–æ§ä»¶è®©è°ƒè¯•æ›´ç›´è§‚</li>
<li><strong>è®¾è®¡ä¸ä»£ç ç»Ÿä¸€</strong>ï¼šåœ¨åŒä¸€çª—å£å®Œæˆè§†è§‰è°ƒæ•´å’Œä»£ç ä¿®æ”¹ï¼Œæ— ç¼è¡”æ¥</li>
</ul>
<p>è¿™ä¸ªåŠŸèƒ½ç‰¹åˆ«é€‚åˆä»¥ä¸‹åœºæ™¯ï¼š</p>
<ol>
<li><strong>æ ·å¼å¾®è°ƒ</strong>ï¼šé¢œè‰²ã€é—´è·ã€å­—ä½“å¤§å°ç­‰å‚æ•°çš„ç²¾ç»†è°ƒæ•´</li>
<li><strong>å¸ƒå±€å®éªŒ</strong>ï¼šå¿«é€Ÿæµ‹è¯•ä¸åŒçš„å¸ƒå±€æ–¹æ¡ˆ</li>
<li><strong>åŠ¨ç”»è°ƒè¯•</strong>ï¼šå®æ—¶é¢„è§ˆåŠ¨ç”»å‚æ•°çš„å˜åŒ–æ•ˆæœ</li>
</ol>
<p>æ­£å¦‚ Cursor å®˜æ–¹æ‰€è¯´ï¼Œä»–ä»¬çœ‹åˆ°äº†ä¸€ä¸ªæœªæ¥ï¼šAgent ä¸ Web åº”ç”¨å¼€å‘æ·±åº¦èåˆï¼Œäººä»¬é€šè¿‡æ›´ç›´è§‚çš„ç•Œé¢å°†æƒ³æ³•è½¬åŒ–ä¸ºä»£ç ã€‚Visual Editor æ­£æ˜¯æœç€è¿™ä¸ªæ–¹å‘è¿ˆå‡ºçš„é‡è¦ä¸€æ­¥ã€‚</p>
<p>å¦‚æœä½ è¿˜æ²¡æœ‰å°è¯•è¿‡è¿™ä¸ªåŠŸèƒ½ï¼Œå¼ºçƒˆå»ºè®®æ‰“å¼€ Cursorï¼Œç”¨ä½ è‡ªå·±çš„é¡¹ç›®ä½“éªŒä¸€ä¸‹â€”â€”ç›¸ä¿¡ä½ ä¼šçˆ±ä¸Šè¿™ç§"æ‰€è§å³æ‰€å¾—"çš„å¼€å‘æ–¹å¼ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[JavaScript æœ‰å“ªäº›æ•°æ®ç±»å‹ï¼Ÿå®ƒä»¬åœ¨å†…å­˜é‡Œæ˜¯æ€ä¹ˆå­˜çš„ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7588007285547073542</link>    <guid>https://juejin.cn/post/7588007285547073542</guid>    <pubDate>2025-12-27T01:45:29.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588007285547073542" data-draft-id="7579127397498060851" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="JavaScript æœ‰å“ªäº›æ•°æ®ç±»å‹ï¼Ÿå®ƒä»¬åœ¨å†…å­˜é‡Œæ˜¯æ€ä¹ˆå­˜çš„ï¼Ÿ"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript"/> <meta itemprop="datePublished" content="2025-12-27T01:45:29.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="åˆ˜å¤§å"/> <meta itemprop="url" content="https://juejin.cn/user/3507878440995946"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            JavaScript æœ‰å“ªäº›æ•°æ®ç±»å‹ï¼Ÿå®ƒä»¬åœ¨å†…å­˜é‡Œæ˜¯æ€ä¹ˆå­˜çš„ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3507878440995946/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    åˆ˜å¤§å
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-27T01:45:29.000Z" title="Sat Dec 27 2025 01:45:29 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æœ‰æ—¶å€™å¯¹ <code>JavaScript</code> çš„ä»£ç å¾ˆæ˜¯ç–‘æƒ‘ï¼Œæˆ‘å†™è¿‡è¿™æ ·ä¸€æ®µä»£ç ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">let</span> user1 = { <span class="hljs-attr">name</span>: <span class="hljs-string">'å°æ˜'</span> };
<span class="hljs-keyword">let</span> user2 = user1;
user2.<span class="hljs-property">name</span> = <span class="hljs-string">'å°çº¢'</span>;
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(user1.<span class="hljs-property">name</span>); <span class="hljs-comment">// ç»“æœå±…ç„¶æ˜¯ â€œå°çº¢â€ï¼Ÿ</span>
</code></pre>
<p>æˆ‘å½“æ—¶æ„£ä½äº†ï¼šæˆ‘åªæ˜¯æ”¹äº† <code>user2</code>ï¼Œä¸ºä»€ä¹ˆ <code>user1</code> ä¹Ÿè·Ÿç€å˜äº†ï¼Ÿ<br/>
è€Œæ¢æˆæ•°å­—æ—¶ï¼Œå´å®Œå…¨ä¸æ˜¯è¿™æ ·ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">let</span> a = <span class="hljs-number">10</span>;
<span class="hljs-keyword">let</span> b = a;
b = <span class="hljs-number">20</span>;
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(a); <span class="hljs-comment">// è¿˜æ˜¯ 10ï¼Œæ²¡å˜</span>
</code></pre>
<p>æ˜æ˜éƒ½æ˜¯èµ‹å€¼ï¼Œè¡Œä¸ºæ€ä¹ˆå·®è¿™ä¹ˆå¤šï¼Ÿ</p>
<p>åæ¥æˆ‘æ‰æ˜ç™½ï¼Œé—®é¢˜çš„å…³é”®å¹¶ä¸æ˜¯ä»£ç çš„å†™æ³•é—®é¢˜ï¼Œè€Œæ˜¯åœ¨ <strong>JavaScript çš„æ•°æ®ç±»å‹å’Œå®ƒä»¬åœ¨å†…å­˜ä¸­çš„å­˜å‚¨æ–¹å¼</strong>ã€‚</p>
<p>ææ‡‚è¿™ä¸€ç‚¹ï¼Œå¾ˆå¤šçœ‹ä¼¼å¥‡æ€ªçš„è¡Œä¸ºå°±éƒ½é¡ºç†æˆç« äº†ã€‚</p>
<hr/>
<h2 data-id="heading-0">ä¸€ã€JavaScript æœ‰å‡ ç§æ•°æ®ç±»å‹ï¼Ÿ</h2>
<p>æ ¹æ® ECMAScript æ ‡å‡†ï¼ŒJavaScript çš„æ•°æ®ç±»å‹åˆ†ä¸ºä¸¤å¤§ç±»ï¼š</p>
<h3 data-id="heading-1">1. åŸå§‹ç±»å‹â€”â€”å…± 7 ç§</h3>
<p>è¿™äº›ç±»å‹çš„ç‰¹ç‚¹æ˜¯ï¼š<strong>å€¼ä¸å¯å˜ã€ç›´æ¥è¡¨ç¤ºæ•°æ®æœ¬èº«</strong>ã€‚</p>













































<table><thead><tr><th>ç±»å‹</th><th>ç¤ºä¾‹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>number</code></td><td><code>42</code>, <code>3.14</code>, <code>NaN</code></td><td>æ‰€æœ‰æ•°å­—ï¼ŒåŒ…æ‹¬æ•´æ•°ã€æµ®ç‚¹æ•°ã€ç‰¹æ®Šå€¼</td></tr><tr><td><code>string</code></td><td><code>'hello'</code>, <code>"JS"</code></td><td>å­—ç¬¦ä¸²ï¼Œä¸å¯å˜</td></tr><tr><td><code>boolean</code></td><td><code>true</code>, <code>false</code></td><td>å¸ƒå°”å€¼</td></tr><tr><td><code>undefined</code></td><td><code>let a; console.log(a);</code></td><td>å˜é‡å·²å£°æ˜ä½†æœªèµ‹å€¼</td></tr><tr><td><code>null</code></td><td><code>let b = null;</code></td><td>è¡¨ç¤ºç©ºæˆ–æ— å€¼ï¼ˆæ³¨æ„ï¼šå®ƒæ˜¯åŸå§‹ç±»å‹ï¼ï¼‰</td></tr><tr><td><code>symbol</code></td><td><code>Symbol('id')</code></td><td>ES6 å¼•å…¥ï¼Œå”¯ä¸€ä¸”ä¸å¯å˜çš„æ ‡è¯†ç¬¦</td></tr><tr><td><code>bigint</code></td><td><code>123n</code>, <code>9007199254740991n</code></td><td>ES2020 å¼•å…¥ï¼Œç”¨äºè¡¨ç¤ºä»»æ„å¤§çš„æ•´æ•°</td></tr></tbody></table>
<p><code>typeof null</code> è¿”å› <code>"object"</code> æ˜¯ JavaScript çš„ä¸€ä¸ªå†å²æ€§ bugï¼Œè‡³ä»Šæœªä¿®å¤ã€‚ä½†ä»è¯­è¨€è®¾è®¡ä¸Šï¼Œ<code>null</code> å±äºåŸå§‹ç±»å‹ã€‚</p>
<hr/>
<h3 data-id="heading-2">2. å¼•ç”¨ç±»å‹â€”â€”ç»Ÿç§°å¯¹è±¡</h3>
<p>é™¤äº†ä¸Šè¿° 7 ç§ï¼Œ<strong>å…¶ä»–æ‰€æœ‰å€¼éƒ½æ˜¯å¯¹è±¡</strong>ï¼Œå±äºå¼•ç”¨ç±»å‹ï¼ŒåŒ…æ‹¬ï¼š</p>
<ul>
<li>æ™®é€šå¯¹è±¡ï¼š<code>{ name: 'Tom' }</code></li>
<li>æ•°ç»„ï¼š<code>[1, 2, 3]</code></li>
<li>å‡½æ•°ï¼š<code>function() {}</code></li>
<li>æ—¥æœŸï¼š<code>new Date()</code></li>
<li>æ­£åˆ™ï¼š<code>/abc/</code></li>
<li>ç”šè‡³ <code>Map</code>ã€<code>Set</code>ã€<code>Promise</code> ç­‰</li>
</ul>
<p>å¼•ç”¨ç±»å‹çš„æ ¸å¿ƒç‰¹ç‚¹æ˜¯ï¼š<strong>å¯å˜ã€é€šè¿‡å¼•ç”¨æ¥è®¿é—®å®é™…æ•°æ®</strong>ã€‚</p>
<hr/>
<h2 data-id="heading-3">äºŒã€å®ƒä»¬åœ¨å†…å­˜ä¸­æ€ä¹ˆå­˜å‚¨ï¼Ÿ</h2>
<p>è¿™æ˜¯ç†è§£ä¸€åˆ‡è¡Œä¸ºå·®å¼‚çš„æ ¹æºï¼</p>
<p>è®¡ç®—æœºå†…å­˜å¤§è‡´åˆ†ä¸ºä¸¤ä¸ªåŒºåŸŸï¼š</p>
<ul>
<li><strong>æ ˆï¼ˆStackï¼‰</strong>ï¼šé€Ÿåº¦å¿«ï¼Œç©ºé—´å°ï¼Œç”¨äºå­˜å‚¨ç®€å•ã€å›ºå®šå¤§å°çš„æ•°æ®ã€‚</li>
<li><strong>å †ï¼ˆHeapï¼‰</strong>ï¼šç©ºé—´å¤§ï¼Œé€Ÿåº¦ç¨æ…¢ï¼Œç”¨äºå­˜å‚¨å¤æ‚ã€åŠ¨æ€å¤§å°çš„æ•°æ®ã€‚</li>
</ul>
<h3 data-id="heading-4">åŸå§‹ç±»å‹ï¼šç›´æ¥å­˜åœ¨æ ˆé‡Œ</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">let</span> age = <span class="hljs-number">25</span>;
<span class="hljs-keyword">let</span> isStudent = <span class="hljs-literal">true</span>;
</code></pre>
<p>è¿™ä¸¤ä¸ªå˜é‡å°±åƒä¸¤ä¸ªå°æŠ½å±‰ï¼Œ<strong>å€¼æœ¬èº«ç›´æ¥æ”¾åœ¨æ ˆä¸­</strong>ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-string">æ ˆï¼ˆStackï¼‰</span>
<span class="hljs-string">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="hljs-string">â”‚</span> <span class="hljs-attr">age:</span> <span class="hljs-number">25</span>         <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span> <span class="hljs-attr">isStudent:</span> <span class="hljs-literal">true</span> <span class="hljs-string">â”‚</span>
<span class="hljs-string">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
</code></pre>
<p>å½“ä½ å¤åˆ¶ä¸€ä¸ªåŸå§‹å€¼ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">let</span> myAge = age; <span class="hljs-comment">// æŠŠ 25 å¤åˆ¶ä¸€ä»½</span>
myAge = <span class="hljs-number">30</span>;
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(age); <span class="hljs-comment">// ä»ç„¶æ˜¯ 25</span>
</code></pre>
<p>å› ä¸º <code>myAge</code> æ‹¿åˆ°çš„æ˜¯ <strong>å…¨æ–°çš„å‰¯æœ¬</strong>ï¼Œå’Œ <code>age</code> å®Œå…¨æ— å…³ã€‚</p>
<p>æ‰€ä»¥åŸå§‹ç±»å‹æ˜¯æŒ‰å€¼è¿›è¡Œä¼ é€’ï¼ˆPass by Valueï¼‰ã€‚</p>
<hr/>
<h3 data-id="heading-5">å¼•ç”¨ç±»å‹ï¼šæ ˆå­˜åœ°å€ï¼Œå †å­˜çœŸå®å¯¹è±¡</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">let</span> user = { <span class="hljs-attr">name</span>: <span class="hljs-string">'Alice'</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">25</span> };
</code></pre>
<p>è¿™æ—¶å‘ç”Ÿäº†ä¸¤ä»¶äº‹ï¼š</p>
<ol>
<li>å¯¹è±¡ <code>{ name: 'Alice', age: 25 }</code> è¢«åˆ›å»ºï¼Œå­˜æ”¾åœ¨å †ä¸­ã€‚</li>
<li>å˜é‡ <code>user</code> å¹¶ä¸ç›´æ¥åŒ…å«è¿™ä¸ªå¯¹è±¡ï¼Œè€Œæ˜¯ä¿å­˜ä¸€ä¸ªæŒ‡å‘å †ä¸­å¯¹è±¡çš„å¼•ç”¨åœ°å€ï¼Œè¿™ä¸ªåœ°å€æ”¾åœ¨æ ˆé‡Œã€‚</li>
</ol>
<p>å›¾ç¤ºå¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-css" lang="css">æ ˆï¼ˆStackï¼‰              å †ï¼ˆHeapï¼‰
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ user: [åœ°å€A] â”œâ”€â”€â”€â”€â”€â†’â”‚ { name: <span class="hljs-string">'Alice'</span>, age: <span class="hljs-number">25</span> } â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<p>å½“ä½ èµ‹å€¼ç»™å¦ä¸€ä¸ªå˜é‡ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">let</span> admin = user; <span class="hljs-comment">// å¤åˆ¶çš„æ˜¯åœ°å€ï¼Œä¸æ˜¯å¯¹è±¡ï¼</span>
admin.<span class="hljs-property">name</span> = <span class="hljs-string">'Bob'</span>;
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(user.<span class="hljs-property">name</span>); <span class="hljs-comment">// è¾“å‡º "Bob"ï¼</span>
</code></pre>
<p>å› ä¸º <code>admin</code> å’Œ <code>user</code> <strong>æŒ‡å‘åŒä¸€ä¸ªå †ä¸­çš„å¯¹è±¡</strong>ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-string">æ ˆï¼ˆStackï¼‰</span>              <span class="hljs-string">å †ï¼ˆHeapï¼‰</span>
<span class="hljs-string">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>      
<span class="hljs-string">â”‚</span> <span class="hljs-attr">user:</span> [<span class="hljs-string">åœ°å€A</span>] <span class="hljs-string">â”œâ”€â”€â”</span>   
<span class="hljs-string">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span>  <span class="hljs-string">â”‚</span>   <span class="hljs-string">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="hljs-string">â”‚</span> <span class="hljs-attr">admin:</span> [<span class="hljs-string">åœ°å€A</span>] <span class="hljs-string">â”œâ”€â”€â”¼â”€â”€â†’â”‚</span> { <span class="hljs-attr">name:</span> <span class="hljs-string">'Bob'</span>, <span class="hljs-attr">age:</span> <span class="hljs-number">25</span> }  <span class="hljs-string">â”‚</span>
<span class="hljs-string">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>  <span class="hljs-string">â”‚</span>   <span class="hljs-string">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
                  <span class="hljs-string">â”‚</span>
                  <span class="hljs-string">â””â”€â”€â”€â”˜</span>
</code></pre>
<p>æ‰€ä»¥å¼•ç”¨ç±»å‹æ˜¯æŒ‰å…±äº«çš„æ–¹å¼è¿›è¡Œä¼ é€’ï¼ˆPass by Sharingï¼‰</p>
<p>æ³¨æ„ï¼šä¸æ˜¯æŒ‰å¼•ç”¨ä¼ é€’ï¼ŒJS ä¸­æ²¡æœ‰çœŸæ­£çš„æŒ‰å¼•ç”¨ä¼ é€’</p>
<hr/>
<h2 data-id="heading-6">ä¸‰ã€æ·±å…¥å¯¹æ¯”</h2>








































<table><thead><tr><th>ç‰¹æ€§</th><th>åŸå§‹ç±»å‹</th><th>å¼•ç”¨ç±»å‹ï¼ˆå¯¹è±¡ï¼‰</th></tr></thead><tbody><tr><td>å­˜å‚¨ä½ç½®</td><td>æ ˆï¼ˆStackï¼‰</td><td>æ ˆï¼ˆå­˜å¼•ç”¨åœ°å€ï¼‰ + å †ï¼ˆå­˜å®é™…å¯¹è±¡ï¼‰</td></tr><tr><td>èµ‹å€¼è¡Œä¸º</td><td>å¤åˆ¶å€¼æœ¬èº«</td><td>å¤åˆ¶å¼•ç”¨åœ°å€ï¼ˆå¤šä¸ªå˜é‡å…±äº«åŒä¸€å¯¹è±¡ï¼‰</td></tr><tr><td>æ˜¯å¦å¯å˜</td><td>ä¸å¯å˜ï¼ˆæ“ä½œç”Ÿæˆæ–°å€¼ï¼‰</td><td>å¯å˜ï¼ˆå¯ç›´æ¥ä¿®æ”¹å±æ€§ï¼‰</td></tr><tr><td>æ¯”è¾ƒæ–¹å¼</td><td>æ¯”è¾ƒå€¼æ˜¯å¦ç›¸ç­‰</td><td>æ¯”è¾ƒå¼•ç”¨åœ°å€æ˜¯å¦ç›¸åŒ</td></tr><tr><td>å†…å­˜å ç”¨</td><td>å›ºå®šã€è¾ƒå°</td><td>åŠ¨æ€ã€å¯èƒ½å¾ˆå¤§</td></tr><tr><td>å…¸å‹åœºæ™¯</td><td>æ•°å­—ã€å­—ç¬¦ä¸²ã€å¸ƒå°”å€¼</td><td>å¯¹è±¡ã€æ•°ç»„ã€å‡½æ•°</td></tr></tbody></table>
<h3 data-id="heading-7">ä¸¾ä¸ªæ¯”è¾ƒçš„ä¾‹å­ï¼š</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åŸå§‹ç±»å‹æ¯”è¾ƒ</span>
<span class="hljs-number">5</span> === <span class="hljs-number">5</span>; <span class="hljs-comment">// true</span>
<span class="hljs-string">'hi'</span> === <span class="hljs-string">'hi'</span>; <span class="hljs-comment">// true</span>

<span class="hljs-comment">// å¼•ç”¨ç±»å‹æ¯”è¾ƒ</span>
{} === {}; <span class="hljs-comment">// falseï¼ä¸¤ä¸ªä¸åŒå¯¹è±¡</span>
<span class="hljs-keyword">let</span> a = {}; <span class="hljs-keyword">let</span> b = a;
a === b; <span class="hljs-comment">// trueï¼åŒä¸€ä¸ªå¯¹è±¡</span>
</code></pre>
<hr/>
<h2 data-id="heading-8">å››ã€å¸¸è§é—®é¢˜</h2>
<h3 data-id="heading-9">ä¸ºä»€ä¹ˆå­—ç¬¦ä¸²å¾ˆé•¿ï¼Œä¹Ÿç®—åŸå§‹ç±»å‹ï¼Ÿ</h3>
<p>è™½ç„¶å­—ç¬¦ä¸²å¯èƒ½å¾ˆé•¿ï¼Œä½† JS å¼•æ“ä¼šåšå†…éƒ¨ä¼˜åŒ–ï¼ˆæ¯”å¦‚ä½¿ç”¨æŒ‡é’ˆï¼‰ï¼Œä½†ä»<strong>è¯­è¨€è¯­ä¹‰</strong>ä¸Šï¼Œå­—ç¬¦ä¸²æ˜¯<strong>ä¸å¯å˜çš„åŸå§‹å€¼</strong>ã€‚ä»»ä½•â€œä¿®æ”¹â€éƒ½ä¼šç”Ÿæˆæ–°å­—ç¬¦ä¸²ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">let</span> s = <span class="hljs-string">'hello'</span>;
s = s + <span class="hljs-string">' world'</span>; <span class="hljs-comment">// åˆ›å»ºäº†æ–°å­—ç¬¦ä¸²ï¼ŒåŸ 'hello' æœªè¢«ä¿®æ”¹</span>
</code></pre>
<h3 data-id="heading-10">å¦‚ä½•çœŸæ­£å¤åˆ¶ä¸€ä¸ªå¯¹è±¡ï¼Œè€Œä¸æ˜¯å…±äº«ï¼Ÿ</h3>
<p><strong>æµ…æ‹·è´</strong>ï¼šåªå¤åˆ¶ç¬¬ä¸€å±‚å±æ€§</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">let</span> newObj = { ...oldObj };
<span class="hljs-comment">// æˆ–</span>
<span class="hljs-keyword">let</span> newObj = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>({}, oldObj);
</code></pre>
<p><strong>æ·±æ‹·è´</strong>ï¼šé€’å½’å¤åˆ¶æ‰€æœ‰å±‚çº§ï¼ˆéœ€æ³¨æ„å¾ªç¯å¼•ç”¨ç­‰é—®é¢˜ï¼‰</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">let</span> deepCopy = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(obj)); <span class="hljs-comment">// æœ‰å±€é™ï¼ˆä¸èƒ½æ‹·è´å‡½æ•°ã€undefined ç­‰ï¼‰</span>
<span class="hljs-comment">// æ¨èä½¿ç”¨ Lodash çš„ _.cloneDeep()</span>
</code></pre>
<hr/>
<h2 data-id="heading-11">äº”ã€æ€»ç»“</h2>
<ol>
<li><strong>åŸå§‹ç±»å‹</strong>ï¼šå€¼ç›´æ¥å­˜åœ¨æ ˆé‡Œï¼Œèµ‹å€¼æ˜¯å¤åˆ¶å€¼ï¼Œäº’ä¸å½±å“ã€‚</li>
<li><strong>å¼•ç”¨ç±»å‹</strong>ï¼šæ ˆé‡Œå­˜åœ°å€ï¼Œå †é‡Œå­˜å¯¹è±¡ï¼Œèµ‹å€¼æ˜¯å¤åˆ¶åœ°å€ï¼Œå…±äº«åŒä¸€å¯¹è±¡ã€‚</li>
<li><strong>ç†è§£å­˜å‚¨æœºåˆ¶</strong>ï¼Œæ˜¯æŒæ¡ JS èµ‹å€¼ã€å‡½æ•°ä¼ å‚ã€çŠ¶æ€ç®¡ç†ã€æ€§èƒ½ä¼˜åŒ–çš„åŸºç¡€ï¼</li>
</ol>
<hr/>
<p>ä¸‹æ¬¡å½“ä½ çœ‹åˆ°ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">let</span> a = obj;
a.<span class="hljs-property">x</span> = <span class="hljs-number">10</span>;
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(obj.<span class="hljs-property">x</span>); <span class="hljs-comment">// ä¸ºä»€ä¹ˆå˜äº†ï¼Ÿ</span>
</code></pre>
<p>ä½ å°±çŸ¥é“ï¼š<strong>å› ä¸º a å’Œ obj æŒ‡å‘çš„æ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼</strong></p>
<blockquote>
<p>æœ¬æ–‡é¦–å‘äºå…¬ä¼—å·ï¼šç¨‹åºå‘˜åˆ˜å¤§åï¼Œä¸“æ³¨åˆ†äº«å‰åç«¯å¼€å‘çš„å®æˆ˜ç¬”è®°ã€‚å…³æ³¨æˆ‘ï¼Œå°‘èµ°å¼¯è·¯ï¼Œä¸€èµ·è¿›æ­¥ï¼</p>
</blockquote>
<h4 data-id="heading-12">ğŸ“Œå¾€æœŸç²¾å½©</h4>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2F184BGM_pdMFLc0ASrferwQ" target="_blank" title="https://mp.weixin.qq.com/s/184BGM_pdMFLc0ASrferwQ" ref="nofollow noopener noreferrer">ã€Šä»£ç é‡Œå…¨æ˜¯ new å¯¹è±¡ï¼ŒçœŸçš„å¾ˆ Low å—ï¼Ÿæˆ‘è®¤çœŸæƒ³äº†ä¸€æ™šã€‹</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2Fp0n2mN5RDDDaIWuHHVRUZQ" target="_blank" title="https://mp.weixin.qq.com/s/p0n2mN5RDDDaIWuHHVRUZQ" ref="nofollow noopener noreferrer">ã€ŠJava å¼€å‘å¿…çœ‹ï¼šä»€ä¹ˆæ—¶å€™ç”¨ forï¼Œä»€ä¹ˆæ—¶å€™ç”¨ Streamï¼Ÿã€‹</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FX-MSa0CHwVW_qgPezbpMUA" target="_blank" title="https://mp.weixin.qq.com/s/X-MSa0CHwVW_qgPezbpMUA" ref="nofollow noopener noreferrer">ã€Šè¿™ 5 ä¸ªå†·é—¨ HTML æ ‡ç­¾ï¼Œè®©æˆ‘ç›´æ¥åˆ äº†100 è¡Œ JS ä»£ç ã€‹</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FT3ronvigepWew6dRC4uH2g" target="_blank" title="https://mp.weixin.qq.com/s/T3ronvigepWew6dRC4uH2g" ref="nofollow noopener noreferrer">ã€ŠVue ç»„ä»¶é€šä¿¡çš„ 8 ç§æœ€ä½³å®è·µï¼Œä½ çŸ¥é“å‡ ç§ï¼Ÿã€‹</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[çŸ­æ€è€ƒç¬¬265å¤©ï¼Œå°çº¢ä¹¦èµ·å·3å‘¨æ€ä¹ˆæ ·ï¼Ÿå®æ“æ€»ç»“è¿™3ç‚¹ï¼]]></title>    <link>https://juejin.cn/post/7588007285547057158</link>    <guid>https://juejin.cn/post/7588007285547057158</guid>    <pubDate>2025-12-27T01:42:29.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588007285547057158" data-draft-id="7588007285547040774" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="çŸ­æ€è€ƒç¬¬265å¤©ï¼Œå°çº¢ä¹¦èµ·å·3å‘¨æ€ä¹ˆæ ·ï¼Ÿå®æ“æ€»ç»“è¿™3ç‚¹ï¼"/> <meta itemprop="keywords" content="Android,AIç¼–ç¨‹"/> <meta itemprop="datePublished" content="2025-12-27T01:42:29.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¨‹åºå‘˜ç æ­Œ"/> <meta itemprop="url" content="https://juejin.cn/user/764915820529831"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            çŸ­æ€è€ƒç¬¬265å¤©ï¼Œå°çº¢ä¹¦èµ·å·3å‘¨æ€ä¹ˆæ ·ï¼Ÿå®æ“æ€»ç»“è¿™3ç‚¹ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/764915820529831/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¨‹åºå‘˜ç æ­Œ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-27T01:42:29.000Z" title="Sat Dec 27 2025 01:42:29 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å°çº¢ä¹¦æ˜¯å†…å®¹ç”Ÿäº§å¹³å°ï¼Œæµé‡å·¨å¤§ï¼Œä¸»è¦ç¾¤ä½“æ˜¯ä¸€çº¿åŸå¸‚é«˜è´¨é‡ç”¨æˆ·ï¼Œæ˜¯ä¼—å¤šè‡ªåª’ä½“IPå¿…äº‰ä¹‹åœ°ï¼Œç å“¥è‡ªèµ·å·èµ·3å‘¨äº†ï¼Œç°åœ¨è¯´ä¸€ä¸‹ä¸»è¦çš„æ„Ÿå—ï¼Œæ€»ç»“ä¸€ä¸‹å®æ“ç»éªŒã€‚</p>
<p>ä¸€ã€åˆ›ä½œï¼šè¸©å‡†è§„åˆ™æ‰èƒ½æ¥ä½æµé‡</p>
<ol>
<li>å…»å·3-5å¤©å†å‘ç¬”è®°</li>
</ol>
<p>ä¸è¦æ€¥ç€å‘ç¬”è®°ï¼Œå…ˆèŠ±3-5å¤©åˆ·åŒèµ›é“å†…å®¹ã€ç‚¹èµè¯„è®ºï¼Œè®©ç³»ç»Ÿè®¤å®šä½ æ˜¯çœŸå®ç”¨æˆ·ï¼Œç²¾å‡†æ‰“ä¸Šå‚ç›´æ ‡ç­¾ã€‚</p>
<ol start="2">
<li>å‘ç¨¿å‰ç”¨AIæ‰«æ•æ„Ÿè¯</li>
</ol>
<p>é¿å…å› è¿è§„è¢«é™æµï¼Œè¿™æ˜¯åŸºç¡€æ“ä½œã€‚</p>
<ol start="3">
<li>å‘å¸ƒåä¿æŒè´¦å·æ´»è·ƒ</li>
</ol>
<p>å†åˆ·20åˆ†é’ŸåŒç±»ç¬”è®°ä¿æŒè´¦å·æ´»è·ƒï¼Œæœ‰åŠ©äºè·å¾—åˆå§‹æ›å…‰æƒé‡ã€‚</p>
<ol start="4">
<li>å°çˆ†è¶‹åŠ¿ä¸‹è¿ç»­åˆ›ä½œ</li>
</ol>
<p>å¦‚æœæŸç¯‡ç¬”è®°å‡ºç°å°çˆ†è¶‹åŠ¿ï¼Œä¸€å®šè¦è¶çƒ­æ‰“é“ï¼Œè¿ç»­æ›´3-5æ¡åŒç±»å‹å†…å®¹ï¼ŒæŠ“ä½å¹³å°çš„æµé‡æ¨é€é«˜å³°ï¼Œå¿«é€Ÿæ”¾å¤§æ›å…‰é‡ã€‚</p>
<p>äºŒã€å¤ç›˜ï¼šæ•°æ®ä¸ä¼šè¯´è°</p>
<ol>
<li>æ‹†è§£åå°æ ¸å¿ƒæ•°æ®</li>
</ol>
<p>ç¬”è®°å‘å¸ƒååˆ«åªç›¯ç€ç²‰ä¸æ•°ï¼Œè¦æ‹†è§£åå°ç‚¹å‡»ç‡ã€æ”¶è—é‡ã€æ–°å¢å…³æ³¨è¿™äº›æ ¸å¿ƒæ•°æ®ï¼Œéšæ—¶è°ƒæ•´åˆ›ä½œæ–¹å‘ã€‚</p>
<ol start="2">
<li>åŒä¸»é¢˜è‡³å°‘è¿å‘3ç¯‡</li>
</ol>
<p>åƒä¸‡ä¸è¦å‘1-2ç¯‡æ²¡èµ·è‰²å°±ç›´æ¥æ¢èµ›é“ï¼ŒåŒä¸»é¢˜è‡³å°‘è¿å‘3ç¯‡å†åšåˆ¤æ–­ã€‚</p>
<ol start="3">
<li>æ¯å‘¨ä¿æŒ3ç¯‡ç¨³å®šè¾“å‡º</li>
</ol>
<p>è®©ç³»ç»Ÿåˆ¤å®šä½ æ˜¯èƒ½æŒç»­äº§å‡ºä¼˜è´¨å†…å®¹çš„åšä¸»ï¼Œè·å¾—é•¿æœŸæ¨æµå€¾æ–œã€‚</p>
<p>ä¸‰ã€æ¸…é†’è®¤çŸ¥ï¼šæµé‡â‰ æˆåŠŸ</p>
<ol>
<li>æ‘¸é€å¹³å°è§„åˆ™å°±èƒ½è½»æ¾è·å–æµé‡</li>
</ol>
<p>åœ¨å°çº¢ä¹¦æ‹¿åˆ°99+ç‚¹èµæ”¶è—ï¼Œç”šè‡³æ¶¨ç²‰åƒç²‰éƒ½ä¸ç®—éš¾äº‹ï¼Œä½†æ‘¸é€å¹³å°è§„åˆ™å°±èƒ½è½»æ¾åšåˆ°ï¼Œä½†è¿™ç»ä¸ä»£è¡¨èƒ½åŠ›æœ‰å¤šå‡ºä¼—ã€‚</p>
<ol start="2">
<li>æ‰“é€šä»å†…å®¹æ„æ€ã€åˆ›ä½œå‘å¸ƒï¼Œåˆ°å¼•æµå˜ç°çš„å®Œæ•´é—­ç¯ï¼Œå¾ˆå¤šåšä¸»åæ‹¥ä¸Šä¸‡ç²‰ä¸ï¼Œå´å¡åœ¨å•†ä¸šåŒ–ç¯èŠ‚ï¼Œæœ€ç»ˆåªèƒ½æ²¦ä¸ºæ•°æ®å‡ºä¼—çš„â€œæ— æ•ˆè´¦å·â€ã€‚æ¯ä¸ªç¯èŠ‚éƒ½ç¼ºä¸€ä¸å¯ï¼Œç¯ç¯ç›¸æ‰£æ‰èƒ½æŠŠæµé‡å˜æˆçœŸé‡‘ç™½é“¶ã€‚</li>
</ol>
<p>æˆ‘æ˜¯â€ç¨‹åºå‘˜ç æ­Œâ€œï¼Œå…¨ç½‘æ˜µç§°ç»Ÿä¸€ï¼Œ10+å¹´å¤§å‚ç¨‹åºå‘˜ç»éªŒï¼Œåœ¨èŒåœºï¼Œç©å‰¯ä¸šï¼Œç›®æ ‡å‰¯ä¸šå¹´æ”¶å…¥ç™¾ä¸‡ï¼Œæ¢ç´¢å¯å¤åˆ©å¯å¤åˆ¶çš„ä¸€äººä¼ä¸šç©æ³•ï¼Œå¯å»gzhå›´è§‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åˆ†å¸ƒå¼äº‹åŠ¡æœ¬åœ°æ¶ˆæ¯è¡¨è¯¦è§£ï¼šä¸­å°å›¢é˜Ÿçš„ä½ä¾µå…¥è½åœ°æ–¹æ¡ˆ]]></title>    <link>https://juejin.cn/post/7588064253635330102</link>    <guid>https://juejin.cn/post/7588064253635330102</guid>    <pubDate>2025-12-27T01:49:49.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588064253635330102" data-draft-id="7588064253635313718" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åˆ†å¸ƒå¼äº‹åŠ¡æœ¬åœ°æ¶ˆæ¯è¡¨è¯¦è§£ï¼šä¸­å°å›¢é˜Ÿçš„ä½ä¾µå…¥è½åœ°æ–¹æ¡ˆ"/> <meta itemprop="keywords" content="åç«¯,åˆ†å¸ƒå¼"/> <meta itemprop="datePublished" content="2025-12-27T01:49:49.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å›å®¶è·¯ä¸Šç»•äº†å¼¯"/> <meta itemprop="url" content="https://juejin.cn/user/536217404587134"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åˆ†å¸ƒå¼äº‹åŠ¡æœ¬åœ°æ¶ˆæ¯è¡¨è¯¦è§£ï¼šä¸­å°å›¢é˜Ÿçš„ä½ä¾µå…¥è½åœ°æ–¹æ¡ˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/536217404587134/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å›å®¶è·¯ä¸Šç»•äº†å¼¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-27T01:49:49.000Z" title="Sat Dec 27 2025 01:49:49 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»15åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">åˆ†å¸ƒå¼äº‹åŠ¡æœ¬åœ°æ¶ˆæ¯è¡¨è¯¦è§£ï¼šä¸­å°å›¢é˜Ÿçš„ä½ä¾µå…¥è½åœ°æ–¹æ¡ˆ</h2>
<p>åœ¨åˆ†å¸ƒå¼äº‹åŠ¡é¢†åŸŸï¼Œå¾ˆå¤šä¸­å°å›¢é˜Ÿé¢ä¸´ä¸€ä¸ªå…±æ€§å›°å¢ƒï¼šæ—¢éœ€è¦è§£å†³è·¨æœåŠ¡æ•°æ®ä¸€è‡´æ€§é—®é¢˜ï¼ˆå¦‚è®¢å•åˆ›å»ºååŒæ­¥ç§¯åˆ†ã€æ”¯ä»˜æˆåŠŸåæ›´æ–°ç‰©æµçŠ¶æ€ï¼‰ï¼Œåˆæ— æ³•æ‰¿æ‹…TCCã€SAGAæ¨¡å¼çš„é«˜å¼€å‘æˆæœ¬ï¼Œä¹Ÿä¸æ»¡è¶³2PC/3PCå¯¹â€œçŸ­äº‹åŠ¡ã€ä½å¹¶å‘â€çš„é™åˆ¶ã€‚æ­¤æ—¶ï¼Œâ€œæœ¬åœ°æ¶ˆæ¯è¡¨+æ¶ˆæ¯é˜Ÿåˆ—â€çš„æ–¹æ¡ˆè„±é¢–è€Œå‡ºâ€”â€”å®ƒåŸºäºâ€œæœ¬åœ°äº‹åŠ¡+å¼‚æ­¥é‡è¯•â€çš„æ ¸å¿ƒæ€è·¯ï¼Œå®ç°äº†ä½ä¾µå…¥ã€ä½å¤æ‚åº¦ã€é«˜å¯ç”¨çš„æœ€ç»ˆä¸€è‡´æ€§ï¼Œæˆä¸ºä¸­å°å›¢é˜Ÿå’Œç®€å•å¼‚æ­¥åœºæ™¯çš„é¦–é€‰åˆ†å¸ƒå¼äº‹åŠ¡æ–¹æ¡ˆã€‚ä»Šå¤©ï¼Œæˆ‘ä»¬å°±å…¨é¢æ‹†è§£æœ¬åœ°æ¶ˆæ¯è¡¨çš„è®¾è®¡é€»è¾‘ã€æ‰§è¡Œæµç¨‹ã€ä¼˜ç¼ºç‚¹åŠè½åœ°è¦ç‚¹ã€‚</p>
<h3 data-id="heading-1">ä¸€ã€é“ºå«ï¼šä¸­å°å›¢é˜Ÿçš„åˆ†å¸ƒå¼äº‹åŠ¡ç—›ç‚¹ï¼Œæœ¬åœ°æ¶ˆæ¯è¡¨çš„è¯ç”ŸèƒŒæ™¯</h3>
<p>ä¸­å°å›¢é˜Ÿåœ¨è½åœ°åˆ†å¸ƒå¼äº‹åŠ¡æ—¶ï¼Œæ ¸å¿ƒç—›ç‚¹å¾€å¾€ä¸æ˜¯â€œæŠ€æœ¯å…ˆè¿›æ€§â€ï¼Œè€Œæ˜¯â€œä½æˆæœ¬ã€ä½ä¾µå…¥ã€æ˜“ç»´æŠ¤â€ã€‚ä¼ ç»Ÿæ–¹æ¡ˆçš„çŸ­æ¿æ°å¥½å‡»ä¸­äº†è¿™äº›ç—›ç‚¹ï¼š</p>
<ul>
<li><strong>2PC/3PCï¼ˆå¼ºä¸€è‡´æ€§ï¼‰</strong> ï¼šæ€§èƒ½å·®ã€é˜»å¡é£é™©é«˜ï¼Œä»…é€‚åˆä½å¹¶å‘åœºæ™¯ï¼›ä¾èµ–èµ„æºå±‚äº‹åŠ¡æ”¯æŒï¼Œæ— æ³•é€‚é…å¼‚æ­¥è·¨æœåŠ¡åœºæ™¯ï¼ˆå¦‚è®¢å•åˆ›å»ºåå¼‚æ­¥å‘é€šçŸ¥ï¼‰ã€‚</li>
<li><strong>TCCï¼ˆæŸ”æ€§äº‹åŠ¡ï¼‰</strong> ï¼šä¸šåŠ¡ä¾µå…¥æ€§æå¼ºï¼Œéœ€æ”¹é€ æ‰€æœ‰å‚ä¸æœåŠ¡çš„æ¥å£ï¼ˆå®ç°Try/Confirm/Cancelï¼‰ï¼Œå¼€å‘ç»´æŠ¤æˆæœ¬é«˜ï¼›å¯¹å›¢é˜ŸæŠ€æœ¯èƒ½åŠ›è¦æ±‚é«˜ï¼Œä¸­å°å›¢é˜Ÿéš¾ä»¥é©¾é©­ã€‚</li>
<li><strong>SAGAï¼ˆæŸ”æ€§äº‹åŠ¡ï¼‰</strong> ï¼šè™½ä¾µå…¥æ€§ä½äºTCCï¼Œä½†å¤æ‚æµç¨‹çš„åè°ƒé€»è¾‘å’Œè¡¥å¿äº‹åŠ¡è®¾è®¡ä»éœ€è¾ƒé«˜æˆæœ¬ï¼›é€‚åˆé•¿äº‹åŠ¡ï¼Œå¯¹ç®€å•å¼‚æ­¥åœºæ™¯ï¼ˆå¦‚â€œæ“ä½œ+é€šçŸ¥â€ï¼‰è€Œè¨€è¿‡äºåšé‡ã€‚</li>
</ul>
<p>ä¸­å°å›¢é˜Ÿçš„æ ¸å¿ƒéœ€æ±‚æ˜¯ï¼š<strong>ä½ä»£ç æ”¹é€ ã€ä½å¼€å‘æˆæœ¬ã€é«˜å¯ç”¨æ€§ã€é€‚é…ç®€å•å¼‚æ­¥è·¨æœåŠ¡åœºæ™¯</strong>ã€‚æœ¬åœ°æ¶ˆæ¯è¡¨æ–¹æ¡ˆæ­£æ˜¯åŸºäºè¿™ä¸€éœ€æ±‚è®¾è®¡çš„â€”â€”å®ƒä¸ä¾èµ–å¤æ‚æ¡†æ¶ï¼Œä»…é€šè¿‡â€œæ•°æ®åº“æœ¬åœ°äº‹åŠ¡+æ¶ˆæ¯é˜Ÿåˆ—é‡è¯•â€çš„ç»„åˆï¼Œå°±èƒ½è§£å†³å¤§éƒ¨åˆ†ç®€å•å¼‚æ­¥åœºæ™¯çš„åˆ†å¸ƒå¼äº‹åŠ¡é—®é¢˜ï¼Œå®ç°â€œä¸šåŠ¡æ“ä½œâ€ä¸â€œè·¨æœåŠ¡é€šçŸ¥â€çš„æœ€ç»ˆä¸€è‡´æ€§ã€‚</p>
<h3 data-id="heading-2">äºŒã€æœ¬åœ°æ¶ˆæ¯è¡¨æ ¸å¿ƒå®šä¹‰ï¼šä»€ä¹ˆæ˜¯â€œæœ¬åœ°äº‹åŠ¡+æ¶ˆæ¯é˜Ÿåˆ—â€æ–¹æ¡ˆï¼Ÿ</h3>
<p>æœ¬åœ°æ¶ˆæ¯è¡¨æ–¹æ¡ˆçš„æ ¸å¿ƒå®šä¹‰æ˜¯ï¼š<strong>å°†åˆ†å¸ƒå¼äº‹åŠ¡æ‹†åˆ†ä¸ºâ€œæœ¬åœ°ä¸šåŠ¡äº‹åŠ¡â€å’Œâ€œå¼‚æ­¥æ¶ˆæ¯é€šçŸ¥â€ä¸¤ä¸ªéƒ¨åˆ†ï¼Œé€šè¿‡åœ¨ä¸šåŠ¡åº“ä¸­æ–°å¢â€œæœ¬åœ°æ¶ˆæ¯è¡¨â€ï¼Œå°†â€œä¸šåŠ¡æ“ä½œâ€ä¸â€œæ¶ˆæ¯å†™å…¥â€å°è£…åœ¨åŒä¸€ä¸ªæœ¬åœ°äº‹åŠ¡ä¸­ï¼Œä¿è¯ä¸¤è€…åŸå­æ€§ï¼ˆè¦ä¹ˆéƒ½æˆåŠŸï¼Œè¦ä¹ˆéƒ½å¤±è´¥ï¼‰ï¼›ä¹‹åé€šè¿‡å®šæ—¶ä»»åŠ¡æ‰«ææœ¬åœ°æ¶ˆæ¯è¡¨ï¼Œå°†æœªæŠ•é€’çš„æ¶ˆæ¯æŠ•é€’åˆ°æ¶ˆæ¯é˜Ÿåˆ—ï¼›æ¥æ”¶æ–¹æ¶ˆè´¹æ¶ˆæ¯é˜Ÿåˆ—ä¸­çš„æ¶ˆæ¯ï¼Œæ‰§è¡Œå¯¹åº”çš„ä¸šåŠ¡æ“ä½œï¼›è‹¥æ¶ˆè´¹å¤±è´¥ï¼Œé€šè¿‡æ¶ˆæ¯é˜Ÿåˆ—çš„é‡è¯•æœºåˆ¶é‡å¤æŠ•é€’ï¼Œç›´è‡³æ¶ˆè´¹æˆåŠŸï¼Œæœ€ç»ˆå®ç°è·¨æœåŠ¡çš„æœ€ç»ˆä¸€è‡´æ€§</strong>ã€‚</p>
<p>æ ¸å¿ƒç»„æˆè¦ç´ ï¼ˆæç®€è®¾è®¡ï¼Œæ— å¤æ‚è§’è‰²ï¼‰ï¼š</p>
<ol>
<li><strong>æœ¬åœ°æ¶ˆæ¯è¡¨</strong>ï¼šå­˜å‚¨åœ¨ä¸šåŠ¡æ•°æ®åº“ä¸­çš„ä¸€å¼ è¡¨ï¼Œç”¨äºè®°å½•éœ€è¦å¼‚æ­¥æŠ•é€’çš„æ¶ˆæ¯ï¼Œæ ¸å¿ƒå­—æ®µåŒ…æ‹¬ï¼šæ¶ˆæ¯IDï¼ˆå”¯ä¸€æ ‡è¯†ï¼‰ã€æ¶ˆæ¯å†…å®¹ï¼ˆå¦‚è®¢å•IDã€ç”¨æˆ·IDï¼‰ã€æ¶ˆæ¯çŠ¶æ€ï¼ˆå¾…æŠ•é€’/å·²æŠ•é€’/å·²æ¶ˆè´¹/å¤±è´¥ï¼‰ã€åˆ›å»ºæ—¶é—´ã€æŠ•é€’æ¬¡æ•°ã€ä¸‹æ¬¡æŠ•é€’æ—¶é—´ç­‰ï¼›æ¶ˆæ¯è¡¨ä¸ä¸šåŠ¡è¡¨åœ¨åŒä¸€ä¸ªæ•°æ®åº“ï¼Œç¡®ä¿æœ¬åœ°äº‹åŠ¡åŸå­æ€§ã€‚</li>
<li><strong>æœ¬åœ°ä¸šåŠ¡äº‹åŠ¡</strong>ï¼šå‘èµ·æ–¹çš„æ ¸å¿ƒä¸šåŠ¡æ“ä½œï¼ˆå¦‚åˆ›å»ºè®¢å•ã€æ‰£å‡ä½™é¢ï¼‰ï¼Œä¸â€œå†™å…¥æœ¬åœ°æ¶ˆæ¯è¡¨â€çš„æ“ä½œå°è£…åœ¨åŒä¸€ä¸ªæ•°æ®åº“äº‹åŠ¡ä¸­ï¼Œä¿è¯ä¸¤è€…åŒæ—¶æˆåŠŸæˆ–åŒæ—¶å¤±è´¥ã€‚</li>
<li><strong>æ¶ˆæ¯é˜Ÿåˆ—ï¼ˆMQï¼‰</strong> ï¼šç”¨äºå¼‚æ­¥ä¼ é€’æ¶ˆæ¯ï¼ˆå¦‚RabbitMQã€RocketMQã€Kafkaï¼‰ï¼Œæ‰¿æ¥æœ¬åœ°æ¶ˆæ¯è¡¨çš„æ¶ˆæ¯æŠ•é€’ï¼Œä¸ºæ¥æ”¶æ–¹æä¾›å¼‚æ­¥æ¶ˆè´¹èƒ½åŠ›ï¼›ä¾èµ–æ¶ˆæ¯é˜Ÿåˆ—çš„â€œæŒä¹…åŒ–â€å’Œâ€œé‡è¯•æœºåˆ¶â€ï¼Œä¿è¯æ¶ˆæ¯ä¸ä¸¢å¤±ã€æ¶ˆè´¹å¤±è´¥å¯é‡è¯•ã€‚</li>
<li><strong>å®šæ—¶ä»»åŠ¡ï¼ˆæ¶ˆæ¯æŠ•é€’å™¨ï¼‰</strong> ï¼šå®šæœŸæ‰«ææœ¬åœ°æ¶ˆæ¯è¡¨ä¸­â€œå¾…æŠ•é€’â€çŠ¶æ€çš„æ¶ˆæ¯ï¼Œå°†å…¶æŠ•é€’åˆ°æ¶ˆæ¯é˜Ÿåˆ—ï¼›è‹¥æŠ•é€’å¤±è´¥ï¼ˆå¦‚MQå®•æœºï¼‰ï¼Œè®°å½•æŠ•é€’æ¬¡æ•°å’Œä¸‹æ¬¡æŠ•é€’æ—¶é—´ï¼Œä¸‹æ¬¡ç»§ç»­é‡è¯•ã€‚</li>
</ol>
<p>æ ¸å¿ƒè§’è‰²ï¼ˆè§’è‰²æç®€ï¼Œæ˜“ç»´æŠ¤ï¼‰ï¼š</p>
<ul>
<li><strong>äº‹åŠ¡å‘èµ·æ–¹</strong>ï¼šæ‰§è¡Œæœ¬åœ°ä¸šåŠ¡äº‹åŠ¡ï¼Œå†™å…¥æœ¬åœ°æ¶ˆæ¯è¡¨ï¼Œé€šè¿‡å®šæ—¶ä»»åŠ¡æŠ•é€’æ¶ˆæ¯ï¼›</li>
<li><strong>äº‹åŠ¡æ¥æ”¶æ–¹</strong>ï¼šæ¶ˆè´¹æ¶ˆæ¯é˜Ÿåˆ—ä¸­çš„æ¶ˆæ¯ï¼Œæ‰§è¡Œå¯¹åº”çš„ä¸šåŠ¡æ“ä½œï¼ˆå¦‚åˆ›å»ºç§¯åˆ†è®°å½•ã€æ›´æ–°ç‰©æµçŠ¶æ€ï¼‰ï¼›</li>
<li><strong>æ¶ˆæ¯é˜Ÿåˆ—ï¼ˆä¸­é—´ä»¶ï¼‰</strong> ï¼šè´Ÿè´£æ¶ˆæ¯çš„å­˜å‚¨ã€ä¼ é€’å’Œé‡è¯•ï¼Œæ˜¯å¼‚æ­¥é€šä¿¡çš„æ ¸å¿ƒè½½ä½“ã€‚</li>
</ul>
<h3 data-id="heading-3">ä¸‰ã€æœ¬åœ°æ¶ˆæ¯è¡¨å®Œæ•´æµç¨‹æ‹†è§£ï¼šä»¥â€œè®¢å•åˆ›å»ºååŒæ­¥ç§¯åˆ†â€ä¸ºä¾‹</h3>
<p>æˆ‘ä»¬ä»¥â€œç”µå•†è®¢å•åˆ›å»ºåï¼Œå¼‚æ­¥åŒæ­¥ç”¨æˆ·ç§¯åˆ†ï¼ˆè®¢å•æœåŠ¡â†’ç§¯åˆ†æœåŠ¡ï¼‰â€çš„ç»å…¸åœºæ™¯ä¸ºä¾‹ï¼Œæ‹†è§£æœ¬åœ°æ¶ˆæ¯è¡¨çš„å®Œæ•´æ‰§è¡Œæµç¨‹ï¼Œç›´è§‚ç†è§£æ¯ä¸ªç¯èŠ‚çš„å…·ä½“æ“ä½œï¼š</p>
<p>ä¸šåŠ¡éœ€æ±‚ï¼šç”¨æˆ·åˆ›å»ºè®¢å•ï¼ˆè®¢å•æœåŠ¡ï¼‰åï¼Œç§¯åˆ†æœåŠ¡éœ€ä¸ºç”¨æˆ·å¢åŠ å¯¹åº”ç§¯åˆ†ï¼Œç¡®ä¿â€œè®¢å•åˆ›å»ºæˆåŠŸâ€ä¸â€œç§¯åˆ†å¢åŠ æˆåŠŸâ€æœ€ç»ˆä¸€è‡´ï¼ˆå…è®¸çŸ­æš‚å»¶è¿Ÿï¼‰ã€‚</p>
<h4 data-id="heading-4">å‰ç½®å‡†å¤‡ï¼šåˆ›å»ºæœ¬åœ°æ¶ˆæ¯è¡¨</h4>
<p>åœ¨è®¢å•æœåŠ¡çš„ä¸šåŠ¡æ•°æ®åº“ä¸­ï¼Œæ–°å¢â€œlocal_messageâ€æœ¬åœ°æ¶ˆæ¯è¡¨ï¼Œè¡¨ç»“æ„ç¤ºä¾‹ï¼ˆMySQLï¼‰ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> `local_message` (
  `id` <span class="hljs-type">bigint</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="hljs-string">'ä¸»é”®ID'</span>,
  `message_id` <span class="hljs-type">varchar</span>(<span class="hljs-number">64</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'æ¶ˆæ¯å”¯ä¸€IDï¼ˆUUIDï¼‰'</span>,
  `message_content` text <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'æ¶ˆæ¯å†…å®¹ï¼ˆJSONæ ¼å¼ï¼Œå¦‚{"order_id":"123","user_id":"456","points":10}ï¼‰'</span>,
  `message_status` tinyint(<span class="hljs-number">4</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">0</span> COMMENT <span class="hljs-string">'æ¶ˆæ¯çŠ¶æ€ï¼š0-å¾…æŠ•é€’ï¼Œ1-å·²æŠ•é€’ï¼Œ2-å·²æ¶ˆè´¹ï¼Œ3-æŠ•é€’å¤±è´¥'</span>,
  `delivery_count` <span class="hljs-type">int</span>(<span class="hljs-number">11</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">0</span> COMMENT <span class="hljs-string">'å·²æŠ•é€’æ¬¡æ•°'</span>,
  `next_delivery_time` datetime <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'ä¸‹æ¬¡æŠ•é€’æ—¶é—´'</span>,
  `create_time` datetime <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span> COMMENT <span class="hljs-string">'åˆ›å»ºæ—¶é—´'</span>,
  `update_time` datetime <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span> <span class="hljs-keyword">ON</span> <span class="hljs-keyword">UPDATE</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span> COMMENT <span class="hljs-string">'æ›´æ–°æ—¶é—´'</span>,
  <span class="hljs-keyword">PRIMARY</span> KEY (`id`),
  <span class="hljs-keyword">UNIQUE</span> KEY `uk_message_id` (`message_id`),
  INDEX `idx_message_status` (`message_status`),
  INDEX `idx_next_delivery_time` (`next_delivery_time`)
) ENGINE<span class="hljs-operator">=</span>InnoDB <span class="hljs-keyword">DEFAULT</span> CHARSET<span class="hljs-operator">=</span>utf8mb4 COMMENT<span class="hljs-operator">=</span><span class="hljs-string">'æœ¬åœ°æ¶ˆæ¯è¡¨'</span>;
</code></pre>
<h4 data-id="heading-5">é˜¶æ®µ1ï¼šæ‰§è¡Œæœ¬åœ°äº‹åŠ¡ï¼ˆä¸šåŠ¡æ“ä½œ+å†™å…¥æ¶ˆæ¯è¡¨ï¼‰</h4>
<p>è®¢å•æœåŠ¡åœ¨åˆ›å»ºè®¢å•æ—¶ï¼Œå°†â€œåˆ›å»ºè®¢å•â€å’Œâ€œå†™å…¥ç§¯åˆ†åŒæ­¥æ¶ˆæ¯â€å°è£…åœ¨åŒä¸€ä¸ªæœ¬åœ°äº‹åŠ¡ä¸­ï¼Œä¿è¯åŸå­æ€§ï¼š</p>
<ol>
<li>ç”¨æˆ·å‘èµ·åˆ›å»ºè®¢å•è¯·æ±‚ï¼Œè®¢å•æœåŠ¡å¼€å¯æ•°æ®åº“äº‹åŠ¡ï¼›</li>
<li>æ‰§è¡Œæ ¸å¿ƒä¸šåŠ¡æ“ä½œï¼šå‘â€œorderâ€è¡¨æ’å…¥è®¢å•è®°å½•ï¼ˆçŠ¶æ€ä¸ºâ€œå·²åˆ›å»ºâ€ï¼‰ï¼›</li>
<li>æ‰§è¡Œæ¶ˆæ¯å†™å…¥æ“ä½œï¼šç”Ÿæˆå”¯ä¸€æ¶ˆæ¯IDï¼Œå‘â€œlocal_messageâ€è¡¨æ’å…¥ä¸€æ¡æ¶ˆæ¯ï¼ˆæ¶ˆæ¯å†…å®¹ä¸ºè®¢å•IDã€ç”¨æˆ·IDã€ç§¯åˆ†å€¼ç­‰ï¼ŒçŠ¶æ€ä¸ºâ€œ0-å¾…æŠ•é€’â€ï¼Œä¸‹æ¬¡æŠ•é€’æ—¶é—´ä¸ºå½“å‰æ—¶é—´+10ç§’ï¼‰ï¼›</li>
<li>æäº¤æ•°æ®åº“äº‹åŠ¡ï¼šè‹¥æ­¥éª¤2å’Œ3å‡æˆåŠŸï¼Œäº‹åŠ¡æäº¤ï¼Œè®¢å•åˆ›å»ºæˆåŠŸä¸”æ¶ˆæ¯å†™å…¥æˆåŠŸï¼›è‹¥ä»»æ„ä¸€æ­¥å¤±è´¥ï¼ˆå¦‚è®¢å•å‚æ•°é”™è¯¯ã€æ•°æ®åº“å¼‚å¸¸ï¼‰ï¼Œäº‹åŠ¡å›æ»šï¼Œè®¢å•å’Œæ¶ˆæ¯å‡ä¸ç”Ÿæ•ˆï¼Œæ— æ•°æ®ä¸ä¸€è‡´ã€‚</li>
</ol>
<h4 data-id="heading-6">é˜¶æ®µ2ï¼šå®šæ—¶ä»»åŠ¡æŠ•é€’æ¶ˆæ¯åˆ°MQ</h4>
<p>è®¢å•æœåŠ¡å¯åŠ¨å®šæ—¶ä»»åŠ¡ï¼ˆå¦‚æ¯10ç§’æ‰§è¡Œä¸€æ¬¡ï¼‰ï¼Œæ‰«ææœ¬åœ°æ¶ˆæ¯è¡¨ä¸­â€œå¾…æŠ•é€’â€ä¸”â€œä¸‹æ¬¡æŠ•é€’æ—¶é—´â‰¤å½“å‰æ—¶é—´â€çš„æ¶ˆæ¯ï¼Œå°†å…¶æŠ•é€’åˆ°æ¶ˆæ¯é˜Ÿåˆ—ï¼ˆå¦‚RocketMQçš„â€œorder_to_points_topicâ€ä¸»é¢˜ï¼‰ï¼š</p>
<ol>
<li>
<p>å®šæ—¶ä»»åŠ¡æŸ¥è¯¢æœ¬åœ°æ¶ˆæ¯è¡¨ï¼š<code>SELECT * FROM local_message WHERE message_status=0 AND next_delivery_time â‰¤ NOW()</code>ï¼›</p>
</li>
<li>
<p>éå†æŸ¥è¯¢ç»“æœï¼Œå‘æ¶ˆæ¯é˜Ÿåˆ—å‘é€æ¶ˆæ¯ï¼ˆæ¶ˆæ¯å†…å®¹ä¸ºlocal_messageè¡¨ä¸­çš„message_contentï¼‰ï¼›</p>
</li>
<li>
<p>å¤„ç†æŠ•é€’ç»“æœï¼š</p>
<ol>
<li>è‹¥æŠ•é€’æˆåŠŸï¼šæ›´æ–°æ¶ˆæ¯çŠ¶æ€ä¸ºâ€œ1-å·²æŠ•é€’â€ï¼Œè®°å½•æŠ•é€’æ¬¡æ•°ï¼›</li>
<li>è‹¥æŠ•é€’å¤±è´¥ï¼ˆå¦‚MQå®•æœºï¼‰ï¼šæ›´æ–°æŠ•é€’æ¬¡æ•°ï¼ˆ+1ï¼‰ï¼Œè®¾ç½®ä¸‹æ¬¡æŠ•é€’æ—¶é—´ï¼ˆå¦‚å½“å‰æ—¶é—´+2^nç§’ï¼Œé‡‡ç”¨æŒ‡æ•°é€€é¿ç­–ç•¥ï¼Œé¿å…é¢‘ç¹é‡è¯•ï¼‰ï¼›è‹¥æŠ•é€’æ¬¡æ•°è¶…è¿‡é˜ˆå€¼ï¼ˆå¦‚5æ¬¡ï¼‰ï¼Œæ ‡è®°æ¶ˆæ¯çŠ¶æ€ä¸ºâ€œ3-æŠ•é€’å¤±è´¥â€ï¼Œè§¦å‘å‘Šè­¦ï¼ˆäººå·¥ä»‹å…¥å¤„ç†ï¼‰ã€‚</li>
</ol>
</li>
</ol>
<h4 data-id="heading-7">é˜¶æ®µ3ï¼šæ¥æ”¶æ–¹æ¶ˆè´¹æ¶ˆæ¯ï¼Œæ‰§è¡Œä¸šåŠ¡æ“ä½œ</h4>
<p>ç§¯åˆ†æœåŠ¡ç›‘å¬æ¶ˆæ¯é˜Ÿåˆ—çš„â€œorder_to_points_topicâ€ä¸»é¢˜ï¼Œæ¶ˆè´¹è®¢å•æœåŠ¡æŠ•é€’çš„æ¶ˆæ¯ï¼Œæ‰§è¡Œç§¯åˆ†å¢åŠ æ“ä½œï¼š</p>
<ol>
<li>
<p>ç§¯åˆ†æœåŠ¡ä»æ¶ˆæ¯é˜Ÿåˆ—è·å–æ¶ˆæ¯ï¼Œè§£ææ¶ˆæ¯å†…å®¹ï¼ˆè®¢å•IDã€ç”¨æˆ·IDã€ç§¯åˆ†å€¼ï¼‰ï¼›</p>
</li>
<li>
<p>æ‰§è¡Œå¹‚ç­‰æ€§æ ¡éªŒï¼šæŸ¥è¯¢â€œpoints_logâ€ç§¯åˆ†æ—¥å¿—è¡¨ï¼Œåˆ¤æ–­è¯¥æ¶ˆæ¯IDå¯¹åº”çš„ç§¯åˆ†æ˜¯å¦å·²å¢åŠ ï¼ˆé¿å…é‡å¤æ¶ˆè´¹ï¼‰ï¼›è‹¥å·²æ¶ˆè´¹ï¼Œç›´æ¥è¿”å›æˆåŠŸï¼›è‹¥æœªæ¶ˆè´¹ï¼Œç»§ç»­ä¸‹ä¸€æ­¥ï¼›</p>
</li>
<li>
<p>æ‰§è¡Œæ ¸å¿ƒä¸šåŠ¡æ“ä½œï¼šå‘â€œuser_pointsâ€è¡¨æ›´æ–°ç”¨æˆ·ç§¯åˆ†ï¼ˆå¢åŠ å¯¹åº”ç§¯åˆ†ï¼‰ï¼Œå‘â€œpoints_logâ€è¡¨æ’å…¥ç§¯åˆ†å˜æ›´è®°å½•ï¼ˆå…³è”æ¶ˆæ¯IDï¼Œç”¨äºå¹‚ç­‰æ ¡éªŒï¼‰ï¼›</p>
</li>
<li>
<p>å¤„ç†æ¶ˆè´¹ç»“æœï¼š</p>
<ol>
<li>è‹¥æ¶ˆè´¹æˆåŠŸï¼šå‘æ¶ˆæ¯é˜Ÿåˆ—å‘é€â€œæ¶ˆè´¹ç¡®è®¤â€ï¼ˆACKï¼‰ï¼Œæ¶ˆæ¯é˜Ÿåˆ—åˆ é™¤è¯¥æ¶ˆæ¯ï¼›</li>
<li>è‹¥æ¶ˆè´¹å¤±è´¥ï¼ˆå¦‚æ•°æ®åº“å¼‚å¸¸ã€ç§¯åˆ†æœåŠ¡å®•æœºï¼‰ï¼šä¸å‘é€ACKï¼Œæ¶ˆæ¯é˜Ÿåˆ—å°†è¯¥æ¶ˆæ¯é‡æ–°æ”¾å…¥é˜Ÿåˆ—ï¼Œç­‰å¾…ä¸‹æ¬¡æŠ•é€’ï¼ˆä¾èµ–MQçš„é‡è¯•æœºåˆ¶ï¼Œé‡è¯•é—´éš”å¯é…ç½®ï¼‰ï¼›è‹¥é‡è¯•æ¬¡æ•°è¶…è¿‡é˜ˆå€¼ï¼Œæ¶ˆæ¯è¿›å…¥æ­»ä¿¡é˜Ÿåˆ—ï¼Œåç»­äººå·¥å¤„ç†ã€‚</li>
</ol>
</li>
</ol>
<h4 data-id="heading-8">é˜¶æ®µ4ï¼šï¼ˆå¯é€‰ï¼‰æ¶ˆæ¯æ¶ˆè´¹ç¡®è®¤å›å†™ï¼ˆä¼˜åŒ–ç‚¹ï¼‰</h4>
<p>ä¸ºäº†æ›´ç²¾å‡†åœ°è·Ÿè¸ªæ¶ˆæ¯çŠ¶æ€ï¼Œå¯å¢åŠ â€œæ¶ˆè´¹ç¡®è®¤å›å†™â€æ­¥éª¤ï¼šç§¯åˆ†æœåŠ¡æ¶ˆè´¹æˆåŠŸåï¼Œä¸»åŠ¨è°ƒç”¨è®¢å•æœåŠ¡çš„â€œæ¶ˆæ¯æ¶ˆè´¹ç¡®è®¤æ¥å£â€ï¼Œè®¢å•æœåŠ¡æ”¶åˆ°åå°†æœ¬åœ°æ¶ˆæ¯è¡¨ä¸­å¯¹åº”æ¶ˆæ¯çš„çŠ¶æ€æ›´æ–°ä¸ºâ€œ2-å·²æ¶ˆè´¹â€ã€‚æ­¤æ­¥éª¤éå¿…éœ€ï¼Œä½†èƒ½è®©æ¶ˆæ¯çŠ¶æ€æ›´é€æ˜ï¼Œä¾¿äºé—®é¢˜æ’æŸ¥ã€‚</p>
<h3 data-id="heading-9">å››ã€æœ¬åœ°æ¶ˆæ¯è¡¨çš„æ ¸å¿ƒä¼˜åŠ¿ä¸å±€é™æ€§</h3>
<p>æœ¬åœ°æ¶ˆæ¯è¡¨æ–¹æ¡ˆçš„ä¼˜åŠ¿å’Œå±€é™æ€§éƒ½æºäºå…¶â€œæç®€è®¾è®¡â€ï¼Œé€‚é…åœºæ™¯é«˜åº¦èšç„¦äºâ€œç®€å•å¼‚æ­¥è·¨æœåŠ¡åœºæ™¯â€ã€‚</p>
<h4 data-id="heading-10">1. æ ¸å¿ƒä¼˜åŠ¿ï¼šä½ä¾µå…¥ã€ä½æˆæœ¬ã€é«˜å¯ç”¨</h4>
<ul>
<li><strong>ä¸šåŠ¡ä¾µå…¥æ€§æä½</strong>ï¼šæ— éœ€æ”¹é€ ç°æœ‰ä¸šåŠ¡æ¥å£ï¼Œä»…éœ€åœ¨ä¸šåŠ¡åº“ä¸­æ–°å¢æœ¬åœ°æ¶ˆæ¯è¡¨ï¼Œåœ¨åŸæœ‰ä¸šåŠ¡äº‹åŠ¡ä¸­æ–°å¢â€œå†™å…¥æ¶ˆæ¯â€çš„æ­¥éª¤ï¼Œå¼€å‘æ”¹é€ é‡æå°ï¼›</li>
<li><strong>å®ç°ç®€å•ï¼Œæˆæœ¬ä½</strong>ï¼šä¸ä¾èµ–å¤æ‚çš„åˆ†å¸ƒå¼äº‹åŠ¡æ¡†æ¶ï¼Œä»…éœ€ä½¿ç”¨æ•°æ®åº“æœ¬åœ°äº‹åŠ¡å’Œæ¶ˆæ¯é˜Ÿåˆ—ï¼Œä¸­å°å›¢é˜Ÿæ— éœ€é¢å¤–å­¦ä¹ æˆæœ¬ï¼Œå°±èƒ½å¿«é€Ÿè½åœ°ï¼›</li>
<li><strong>é«˜å¯ç”¨æ€§å¼º</strong>ï¼šæœ¬åœ°äº‹åŠ¡ä¿è¯â€œä¸šåŠ¡+æ¶ˆæ¯â€åŸå­æ€§ï¼Œæ— æ•°æ®ä¸¢å¤±é£é™©ï¼›æ¶ˆæ¯é˜Ÿåˆ—çš„æŒä¹…åŒ–å’Œé‡è¯•æœºåˆ¶ï¼Œä¿è¯æ¶ˆæ¯èƒ½å¯é æŠ•é€’ï¼›å®šæ—¶ä»»åŠ¡çš„æŒ‡æ•°é€€é¿é‡è¯•ï¼Œé¿å…äº†ç¬æ—¶æ•…éšœå¯¼è‡´çš„æ¶ˆæ¯æŠ•é€’å¤±è´¥ï¼›</li>
<li><strong>æ€§èƒ½å½±å“å°</strong>ï¼šæœ¬åœ°æ¶ˆæ¯è¡¨çš„å†™å…¥æ˜¯æœ¬åœ°æ•°æ®åº“æ“ä½œï¼Œæ€§èƒ½å¼€é”€æä½ï¼›æ¶ˆæ¯æŠ•é€’å’Œæ¶ˆè´¹æ˜¯å¼‚æ­¥çš„ï¼Œä¸ä¼šé˜»å¡æ ¸å¿ƒä¸šåŠ¡æµç¨‹ï¼ˆå¦‚è®¢å•åˆ›å»ºï¼‰ï¼Œå¯¹æ ¸å¿ƒä¸šåŠ¡æ€§èƒ½å‡ ä¹æ— å½±å“ã€‚</li>
</ul>
<h4 data-id="heading-11">2. å±€é™æ€§ï¼šä»…é€‚é…ç®€å•åœºæ™¯ï¼Œä¸€è‡´æ€§å»¶è¿Ÿå¯æ§</h4>
<ul>
<li><strong>ä»…æ”¯æŒç®€å•å¼‚æ­¥åœºæ™¯</strong>ï¼šé€‚åˆâ€œä¸€å¯¹ä¸€â€çš„å¼‚æ­¥è·¨æœåŠ¡é€šçŸ¥åœºæ™¯ï¼ˆå¦‚è®¢å•â†’ç§¯åˆ†ã€æ”¯ä»˜â†’ç‰©æµï¼‰ï¼›ä¸æ”¯æŒå¤æ‚æµç¨‹ï¼ˆå¦‚å¤šæœåŠ¡ä¸²è¡Œ/å¹¶è¡Œäº¤äº’ã€æµç¨‹åˆ†æ”¯ï¼‰ï¼Œä¹Ÿä¸æ”¯æŒé•¿äº‹åŠ¡åœºæ™¯ï¼›</li>
<li><strong>ä»…èƒ½ä¿è¯æœ€ç»ˆä¸€è‡´æ€§</strong>ï¼šæ¶ˆæ¯æŠ•é€’å’Œæ¶ˆè´¹å­˜åœ¨å»¶è¿Ÿï¼Œä¼šå‡ºç°â€œè®¢å•åˆ›å»ºæˆåŠŸä½†ç§¯åˆ†å°šæœªå¢åŠ â€çš„ä¸­é—´çŠ¶æ€ï¼Œéœ€ä¸šåŠ¡å±‚é¢èƒ½æ¥å—ï¼›</li>
<li><strong>æ¶ˆæ¯è¡¨ä¸ä¸šåŠ¡åº“è€¦åˆ</strong>ï¼šæœ¬åœ°æ¶ˆæ¯è¡¨å­˜å‚¨åœ¨ä¸šåŠ¡æ•°æ®åº“ä¸­ï¼Œä¼šå¢åŠ ä¸šåŠ¡åº“çš„å­˜å‚¨å‹åŠ›ï¼›è‹¥ä¸šåŠ¡åº“å®•æœºï¼Œæ¶ˆæ¯æŠ•é€’ä¼šæš‚æ—¶ä¸­æ–­ï¼ˆä½†ä¸šåŠ¡ä¹Ÿæ— æ³•æ‰§è¡Œï¼Œå±äºå¯æ¥å—èŒƒå›´ï¼‰ï¼›</li>
<li><strong>éœ€æ‰‹åŠ¨å¤„ç†å¹‚ç­‰æ€§å’Œæ­»ä¿¡æ¶ˆæ¯</strong>ï¼šæ¶ˆè´¹æ–¹å¿…é¡»å®ç°å¹‚ç­‰æ€§ï¼ˆé¿å…é‡å¤æ¶ˆè´¹ï¼‰ï¼Œæ­»ä¿¡æ¶ˆæ¯ï¼ˆå¤šæ¬¡é‡è¯•å¤±è´¥çš„æ¶ˆæ¯ï¼‰éœ€è¦äººå·¥ä»‹å…¥å¤„ç†ï¼Œå¢åŠ äº†è¿ç»´æˆæœ¬ã€‚</li>
</ul>
<h3 data-id="heading-12">äº”ã€æœ¬åœ°æ¶ˆæ¯è¡¨çš„é€‚ç”¨åœºæ™¯ä¸è½åœ°æ³¨æ„äº‹é¡¹</h3>
<p>æœ¬åœ°æ¶ˆæ¯è¡¨æ–¹æ¡ˆçš„ç‰¹æ€§å†³å®šäº†å®ƒæ˜¯â€œç®€å•å¼‚æ­¥åœºæ™¯çš„æœ€ä¼˜è§£â€ï¼Œè½åœ°æ—¶éœ€é‡ç‚¹è§£å†³å¹‚ç­‰æ€§ã€é‡è¯•ç­–ç•¥ã€æ­»ä¿¡å¤„ç†ç­‰æ ¸å¿ƒé—®é¢˜ã€‚</p>
<h4 data-id="heading-13">1. é€‚ç”¨åœºæ™¯</h4>
<ul>
<li><strong>ç®€å•å¼‚æ­¥è·¨æœåŠ¡é€šçŸ¥åœºæ™¯</strong>ï¼šå¦‚è®¢å•åˆ›å»ºååŒæ­¥ç§¯åˆ†ã€æ”¯ä»˜æˆåŠŸåæ›´æ–°ç‰©æµçŠ¶æ€ã€ç”¨æˆ·æ³¨å†Œåå‘é€æ¬¢è¿çŸ­ä¿¡/é‚®ä»¶ï¼›</li>
<li><strong>ä¸­å°å›¢é˜Ÿã€ä½å¼€å‘æˆæœ¬éœ€æ±‚åœºæ™¯</strong>ï¼šå›¢é˜ŸæŠ€æœ¯èƒ½åŠ›æœ‰é™ï¼Œæ— æ³•æ‰¿æ‹…TCCã€SAGAçš„å¼€å‘ç»´æŠ¤æˆæœ¬ï¼Œéœ€è¦å¿«é€Ÿè½åœ°åˆ†å¸ƒå¼äº‹åŠ¡æ–¹æ¡ˆï¼›</li>
<li><strong>æ ¸å¿ƒä¸šåŠ¡éå¼ºå®æ—¶ä¸€è‡´æ€§åœºæ™¯</strong>ï¼šæ ¸å¿ƒä¸šåŠ¡ï¼ˆå¦‚è®¢å•åˆ›å»ºï¼‰æ— éœ€ç­‰å¾…è·¨æœåŠ¡æ“ä½œå®Œæˆï¼Œå¯æ¥å—çŸ­æš‚çš„ä¸€è‡´æ€§å»¶è¿Ÿï¼›</li>
<li><strong>åŸºäºå…³ç³»å‹æ•°æ®åº“çš„ä¸šåŠ¡åœºæ™¯</strong>ï¼šä¸šåŠ¡ä½¿ç”¨MySQLã€PostgreSQLç­‰å…³ç³»å‹æ•°æ®åº“ï¼Œèƒ½åˆ©ç”¨æœ¬åœ°äº‹åŠ¡ä¿è¯â€œä¸šåŠ¡+æ¶ˆæ¯â€çš„åŸå­æ€§ã€‚</li>
</ul>
<h4 data-id="heading-14">2. è½åœ°æ³¨æ„äº‹é¡¹ï¼ˆæ ¸å¿ƒæŠ€æœ¯éš¾ç‚¹ï¼‰</h4>
<ul>
<li>
<p><strong>æ¶ˆæ¯è¡¨è®¾è®¡ä¼˜åŒ–</strong>ï¼š</p>
<ul>
<li>å¿…é¡»æ·»åŠ â€œæ¶ˆæ¯å”¯ä¸€IDâ€ï¼ˆå¦‚UUIDï¼‰ï¼Œç”¨äºå¹‚ç­‰æ€§æ ¡éªŒï¼›</li>
<li>ç´¢å¼•è®¾è®¡ï¼šä¸ºâ€œmessage_statusâ€å’Œâ€œnext_delivery_timeâ€å»ºç«‹è”åˆç´¢å¼•ï¼Œæå‡å®šæ—¶ä»»åŠ¡æŸ¥è¯¢æ•ˆç‡ï¼›ä¸ºâ€œmessage_idâ€å»ºç«‹å”¯ä¸€ç´¢å¼•ï¼Œé¿å…é‡å¤æ’å…¥æ¶ˆæ¯ï¼›</li>
<li>å­—æ®µç²¾ç®€ï¼šä»…å­˜å‚¨å¿…è¦çš„æ¶ˆæ¯å†…å®¹ï¼Œé¿å…æ¶ˆæ¯è¡¨è¿‡å¤§å½±å“æŸ¥è¯¢æ€§èƒ½ã€‚</li>
</ul>
</li>
<li>
<p><strong>ä¸¥æ ¼ä¿è¯å¹‚ç­‰æ€§</strong>ï¼š</p>
<ul>
<li>æ¶ˆè´¹æ–¹ï¼šé€šè¿‡â€œæ¶ˆæ¯IDâ€æˆ–â€œä¸šåŠ¡å”¯ä¸€æ ‡è¯†ï¼ˆå¦‚è®¢å•IDï¼‰â€åšå¹‚ç­‰æ ¡éªŒï¼Œç¡®ä¿é‡å¤æ¶ˆè´¹ä¸ä¼šå¯¼è‡´æ•°æ®å¼‚å¸¸ï¼ˆå¦‚é‡å¤å¢åŠ ç§¯åˆ†ï¼‰ï¼›</li>
<li>å‘èµ·æ–¹ï¼šæœ¬åœ°äº‹åŠ¡æäº¤å‰ï¼Œé€šè¿‡â€œæ¶ˆæ¯IDâ€å”¯ä¸€ç´¢å¼•é¿å…é‡å¤å†™å…¥æ¶ˆæ¯ã€‚</li>
</ul>
</li>
<li>
<p><strong>åˆç†è®¾è®¡é‡è¯•ç­–ç•¥</strong>ï¼š</p>
<ul>
<li>å‘èµ·æ–¹å®šæ—¶ä»»åŠ¡ï¼šé‡‡ç”¨â€œæŒ‡æ•°é€€é¿é‡è¯•â€ï¼ˆå¦‚10ç§’ã€20ç§’ã€40ç§’ã€80ç§’...ï¼‰ï¼Œé¿å…é¢‘ç¹é‡è¯•ç»™MQå’Œæ•°æ®åº“å¸¦æ¥å‹åŠ›ï¼›è®¾ç½®æœ€å¤§æŠ•é€’æ¬¡æ•°ï¼ˆå¦‚5æ¬¡ï¼‰ï¼Œè¶…è¿‡é˜ˆå€¼æ ‡è®°ä¸ºå¤±è´¥å¹¶å‘Šè­¦ï¼›</li>
<li>æ¶ˆæ¯é˜Ÿåˆ—æ¶ˆè´¹ï¼šé…ç½®åˆç†çš„é‡è¯•é—´éš”ï¼ˆå¦‚30ç§’ï¼‰ï¼Œè¶…è¿‡é‡è¯•æ¬¡æ•°åå°†æ¶ˆæ¯è½¬å…¥æ­»ä¿¡é˜Ÿåˆ—ï¼Œé¿å…å ç”¨æ­£å¸¸æ¶ˆæ¯é˜Ÿåˆ—èµ„æºã€‚</li>
</ul>
</li>
<li>
<p><strong>æ¶ˆæ¯æ¸…ç†ä¸å½’æ¡£</strong>ï¼šå®šæ—¶å½’æ¡£æˆ–åˆ é™¤â€œå·²æ¶ˆè´¹â€çŠ¶æ€çš„æ¶ˆæ¯ï¼ˆå¦‚å½’æ¡£3ä¸ªæœˆå‰çš„æ¶ˆæ¯ï¼‰ï¼Œé¿å…æœ¬åœ°æ¶ˆæ¯è¡¨è¿‡å¤§ï¼Œå½±å“æŸ¥è¯¢å’Œå†™å…¥æ€§èƒ½ï¼›</p>
</li>
<li>
<p><strong>äº‹åŠ¡éš”ç¦»çº§åˆ«é€‰æ‹©</strong>ï¼šå‘èµ·æ–¹æ•°æ®åº“å»ºè®®ä½¿ç”¨â€œè¯»å·²æäº¤ï¼ˆRead Committedï¼‰â€æˆ–æ›´é«˜çš„éš”ç¦»çº§åˆ«ï¼Œé¿å…å®šæ—¶ä»»åŠ¡è¯»å–åˆ°æœªæäº¤çš„æ¶ˆæ¯ï¼ˆè„è¯»ï¼‰ï¼›</p>
</li>
<li>
<p><strong>ç›‘æ§ä¸å‘Šè­¦æœºåˆ¶</strong>ï¼šå»ºç«‹æ¶ˆæ¯çŠ¶æ€ç›‘æ§é¢æ¿ï¼Œå®æ—¶ç›‘æ§â€œå¾…æŠ•é€’â€â€œæŠ•é€’å¤±è´¥â€â€œæ­»ä¿¡æ¶ˆæ¯â€çš„æ•°é‡ï¼›å¯¹â€œæŠ•é€’å¤±è´¥â€â€œæ­»ä¿¡æ¶ˆæ¯â€è®¾ç½®å‘Šè­¦ï¼ˆå¦‚çŸ­ä¿¡ã€é‚®ä»¶å‘Šè­¦ï¼‰ï¼Œç¡®ä¿åŠæ—¶äººå·¥ä»‹å…¥å¤„ç†ã€‚</p>
</li>
</ul>
<h3 data-id="heading-15">å…­ã€æœ¬åœ°æ¶ˆæ¯è¡¨ä¸å…¶ä»–åˆ†å¸ƒå¼äº‹åŠ¡æ–¹æ¡ˆçš„é€‰å‹å¯¹æ¯”</h3>
<p>åˆ†å¸ƒå¼äº‹åŠ¡æ–¹æ¡ˆçš„é€‰å‹æ ¸å¿ƒæ˜¯â€œåœºæ™¯åŒ¹é…+æˆæœ¬æƒè¡¡â€ï¼Œæˆ‘ä»¬å°†æœ¬åœ°æ¶ˆæ¯è¡¨ä¸å…¶ä»–ä¸»æµæ–¹æ¡ˆå¯¹æ¯”ï¼Œæ˜ç¡®é€‚ç”¨è¾¹ç•Œï¼š</p>













































<table><thead><tr><th>æ–¹æ¡ˆç±»å‹</th><th>ä¸€è‡´æ€§</th><th>æ€§èƒ½</th><th>ä¸šåŠ¡ä¾µå…¥æ€§</th><th>å¼€å‘ç»´æŠ¤æˆæœ¬</th><th>é€‚é…åœºæ™¯</th></tr></thead><tbody><tr><td>2PC/3PCï¼ˆå¼ºä¸€è‡´æ€§ï¼‰</td><td>å¼ºä¸€è‡´</td><td>ä½</td><td>ä½ï¼ˆä¾èµ–èµ„æºå±‚ï¼‰</td><td>ä¸­</td><td>çŸ­äº‹åŠ¡ã€ä½å¹¶å‘ã€ä¸€è‡´æ€§è¦æ±‚æé«˜ï¼ˆå¦‚é‡‘èæ ¸å¿ƒè½¬è´¦ï¼‰</td></tr><tr><td>TCCï¼ˆæŸ”æ€§äº‹åŠ¡ï¼‰</td><td>æœ€ç»ˆä¸€è‡´</td><td>é«˜</td><td>é«˜ï¼ˆæ”¹é€ ä¸šåŠ¡æ¥å£ï¼‰</td><td>é«˜</td><td>çŸ­äº‹åŠ¡ã€é«˜å¹¶å‘ã€è·¨å¤šç§èµ„æºï¼ˆå¦‚ç”µå•†ç§’æ€ä¸‹å•ï¼‰</td></tr><tr><td>SAGAï¼ˆæŸ”æ€§äº‹åŠ¡ï¼‰</td><td>æœ€ç»ˆä¸€è‡´</td><td>ä¸­é«˜</td><td>ä¸­ï¼ˆæ–°å¢è¡¥å¿äº‹åŠ¡ï¼‰</td><td>ä¸­é«˜</td><td>é•¿äº‹åŠ¡ã€å¤æ‚æµç¨‹ï¼ˆå¦‚è®¢å•å…¨æµç¨‹ã€ç‰©æµå±¥çº¦ï¼‰</td></tr><tr><td>æœ¬åœ°æ¶ˆæ¯è¡¨+MQï¼ˆæŸ”æ€§äº‹åŠ¡ï¼‰</td><td>æœ€ç»ˆä¸€è‡´</td><td>é«˜</td><td>æä½ï¼ˆæ–°å¢æ¶ˆæ¯è¡¨ï¼‰</td><td>ä½</td><td>ç®€å•å¼‚æ­¥åœºæ™¯ã€ä¸­å°å›¢é˜Ÿã€ä½æˆæœ¬éœ€æ±‚ï¼ˆå¦‚è®¢å•â†’ç§¯åˆ†ã€æ”¯ä»˜â†’ç‰©æµï¼‰</td></tr></tbody></table>
<h3 data-id="heading-16">ä¸ƒã€æ€»ç»“ï¼šæœ¬åœ°æ¶ˆæ¯è¡¨çš„æ ¸å¿ƒä»·å€¼ä¸è½åœ°å–èˆ</h3>
<p>æœ¬åœ°æ¶ˆæ¯è¡¨æ–¹æ¡ˆçš„æ ¸å¿ƒä»·å€¼åœ¨äºâ€œä»¥æœ€ä½çš„æˆæœ¬è§£å†³ç®€å•å¼‚æ­¥åœºæ™¯çš„æœ€ç»ˆä¸€è‡´æ€§é—®é¢˜â€â€”â€”å®ƒæ”¾å¼ƒäº†å¤æ‚çš„å¼ºä¸€è‡´æ€§ä¿éšœå’Œå¤æ‚æµç¨‹é€‚é…èƒ½åŠ›ï¼Œæ¢æ¥äº†â€œä½ä¾µå…¥ã€æ˜“å®ç°ã€é«˜å¯ç”¨â€çš„ç‰¹æ€§ï¼Œå®Œç¾å¥‘åˆä¸­å°å›¢é˜Ÿå’Œç®€å•ä¸šåŠ¡çš„éœ€æ±‚ã€‚å®ƒä¸æ˜¯æœ€â€œå…ˆè¿›â€çš„åˆ†å¸ƒå¼äº‹åŠ¡æ–¹æ¡ˆï¼Œä½†å´æ˜¯æœ€â€œåŠ¡å®â€çš„æ–¹æ¡ˆä¹‹ä¸€ã€‚</p>
<p>åœ¨å®é™…è½åœ°æ—¶ï¼Œæˆ‘ä»¬éœ€æ˜ç¡®ï¼šæœ¬åœ°æ¶ˆæ¯è¡¨çš„éš¾ç‚¹ä¸åœ¨äºâ€œæµç¨‹è®¾è®¡â€ï¼Œè€Œåœ¨äºâ€œç»†èŠ‚ä¼˜åŒ–â€ï¼ˆå¦‚å¹‚ç­‰æ€§ã€é‡è¯•ç­–ç•¥ã€æ¶ˆæ¯æ¸…ç†ï¼‰ã€‚å»ºè®®æ— éœ€è¿½æ±‚å¤æ‚çš„è‡ªå®šä¹‰å®ç°ï¼Œå¯åŸºäºæˆç†Ÿçš„æ¶ˆæ¯é˜Ÿåˆ—ï¼ˆå¦‚RocketMQçš„äº‹åŠ¡æ¶ˆæ¯åŠŸèƒ½ï¼Œæœ¬è´¨æ˜¯æœ¬åœ°æ¶ˆæ¯è¡¨çš„å°è£…ï¼‰å¿«é€Ÿè½åœ°ï¼Œå‡å°‘é‡å¤å¼€å‘ã€‚</p>
<p>æœ€åï¼Œå›å½’åˆ†å¸ƒå¼äº‹åŠ¡çš„æ ¸å¿ƒåŸåˆ™ï¼š<strong>æ²¡æœ‰æœ€ä¼˜æ–¹æ¡ˆï¼Œåªæœ‰æœ€é€‚é…ä¸šåŠ¡çš„æ–¹æ¡ˆ</strong>ã€‚è‹¥ä½ çš„ä¸šåŠ¡æ˜¯ç®€å•å¼‚æ­¥è·¨æœåŠ¡é€šçŸ¥ï¼Œä¸”å›¢é˜Ÿè¿½æ±‚ä½æˆæœ¬ã€ä½ä¾µå…¥ï¼Œæœ¬åœ°æ¶ˆæ¯è¡¨æ–¹æ¡ˆæ˜¯é¦–é€‰ï¼›è‹¥éœ€è¦å¤„ç†é«˜å¹¶å‘çŸ­äº‹åŠ¡ï¼Œé€‰æ‹©TCCï¼›è‹¥éœ€è¦å¤„ç†é•¿äº‹åŠ¡å¤æ‚æµç¨‹ï¼Œé€‰æ‹©SAGAï¼›è‹¥ä¸€è‡´æ€§è¦æ±‚æé«˜ï¼Œå¼ºä¸€è‡´æ€§æ–¹æ¡ˆä»æ˜¯åº•çº¿ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¤§æ•°æ®-196 scikit-learn KNN å®æˆ˜ï¼šKNeighborsClassifierã€kneighbors ä¸å­¦ä¹ æ›²çº¿é€‰æœ€ä¼˜ æ¡ˆä¾‹1çº¢é…’ æ¡ˆä¾‹2ä¹³è…º]]></title>    <link>https://juejin.cn/post/7588010346070867978</link>    <guid>https://juejin.cn/post/7588010346070867978</guid>    <pubDate>2025-12-27T01:56:12.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588010346070867978" data-draft-id="7587965800273575962" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¤§æ•°æ®-196 scikit-learn KNN å®æˆ˜ï¼šKNeighborsClassifierã€kneighbors ä¸å­¦ä¹ æ›²çº¿é€‰æœ€ä¼˜ æ¡ˆä¾‹1çº¢é…’ æ¡ˆä¾‹2ä¹³è…º"/> <meta itemprop="keywords" content="åç«¯,å¤§æ•°æ®,æœºå™¨å­¦ä¹ "/> <meta itemprop="datePublished" content="2025-12-27T01:56:12.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ­¦å­åº·"/> <meta itemprop="url" content="https://juejin.cn/user/149189314230039"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¤§æ•°æ®-196 scikit-learn KNN å®æˆ˜ï¼šKNeighborsClassifierã€kneighbors ä¸å­¦ä¹ æ›²çº¿é€‰æœ€ä¼˜ æ¡ˆä¾‹1çº¢é…’ æ¡ˆä¾‹2ä¹³è…º
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/149189314230039/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ­¦å­åº·
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-27T01:56:12.000Z" title="Sat Dec 27 2025 01:56:12 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">TL;DR</h2>
<ul>
<li>åœºæ™¯ï¼šç”¨ scikit-learn å¿«é€Ÿè½åœ° KNN åˆ†ç±»ï¼Œç†è§£ fit/predict/scoreã€kneighbors ä¸é€‰ Kã€‚</li>
<li>ç»“è®ºï¼šå•æ¬¡åˆ’åˆ†ä¸‹â€œæœ€ä¼˜ Kâ€ä¸ç¨³å®šï¼›ç”¨äº¤å‰éªŒè¯ + æ ‡å‡†åŒ– Pipeline æ‰èƒ½å·¥ç¨‹åŒ–å®š Kã€‚</li>
<li>äº§å‡ºï¼šä¸¤å¥—æ¡ˆä¾‹ä»£ç éª¨æ¶ + é‚»å±…æ£€ç´¢æ–¹æ³• + é€‰ K çš„å¯å¤ç°å®è·µæ¸…å•ä¸é”™è¯¯é€ŸæŸ¥ã€‚</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a1b37cc4bd6a4fdaa7deb433b1bae7e0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767405371&amp;x-signature=YqElGPzDYmDvayRDNOCs0JErsSI%3D" alt="å¤§æ•°æ®-196 scikit-learn KNN å®æˆ˜ï¼šKNeighborsClassifierã€kneighbors ä¸å­¦ä¹ æ›²çº¿é€‰æœ€ä¼˜ æ¡ˆä¾‹1çº¢é…’ æ¡ˆä¾‹2ä¹³è…ºç™Œ" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/52e3063a5ce648a2b5d762a296a76c90~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767405371&amp;x-signature=A%2Bwv2QpcoRWbQmgeiPIwI6G%2FqK8%3D" alt="å¤§æ•°æ®-196 scikit-learn KNN å®æˆ˜ï¼šKNeighborsClassifierã€kneighbors ä¸å­¦ä¹ æ›²çº¿é€‰æœ€ä¼˜ æ¡ˆä¾‹1çº¢é…’ æ¡ˆä¾‹2ä¹³è…ºç™Œ" loading="lazy"/></p>
<h2 data-id="heading-1">scikit-learn ç®—æ³•åº“å®ç°</h2>
<p>scikit-learnï¼ˆç®€ç§° sklearnï¼‰è‡ª 2007 å¹´ç”± David Cournapeau å‘èµ·ä»¥æ¥ï¼Œå·²ç»æˆä¸º Python ç”Ÿæ€ç³»ç»Ÿä¸­æœ€é‡è¦çš„æœºå™¨å­¦ä¹ åº“ä¹‹ä¸€ã€‚ä½œä¸º NumPy å’Œ SciPy ç”Ÿæ€ç³»ç»Ÿçš„é‡è¦ç»„æˆéƒ¨åˆ†ï¼Œsklearn ä¸ºæ•°æ®ç§‘å­¦å®¶å’Œæœºå™¨å­¦ä¹ å·¥ç¨‹å¸ˆæä¾›äº†å¼ºå¤§è€Œé«˜æ•ˆçš„å·¥å…·é›†ã€‚</p>
<p>åœ¨åŠŸèƒ½æ¶æ„ä¸Šï¼Œscikit-learn ä¸»è¦æ”¯æŒå››å¤§æ ¸å¿ƒæœºå™¨å­¦ä¹ ç®—æ³•é¢†åŸŸï¼š</p>
<ol>
<li><strong>åˆ†ç±»ç®—æ³•</strong>ï¼šåŒ…æ‹¬é€»è¾‘å›å½’ï¼ˆLogisticRegressionï¼‰ã€æ”¯æŒå‘é‡æœºï¼ˆSVCï¼‰ã€éšæœºæ£®æ—ï¼ˆRandomForestClassifierï¼‰ç­‰ï¼Œé€‚ç”¨äºå®¢æˆ·æµå¤±é¢„æµ‹ã€åƒåœ¾é‚®ä»¶è¯†åˆ«ç­‰åœºæ™¯</li>
<li><strong>å›å½’ç®—æ³•</strong>ï¼šå¦‚çº¿æ€§å›å½’ï¼ˆLinearRegressionï¼‰ã€å²­å›å½’ï¼ˆRidgeï¼‰ç­‰ï¼Œå¯ç”¨äºæˆ¿ä»·é¢„æµ‹ã€é”€é‡é¢„ä¼°ç­‰ä»»åŠ¡</li>
<li><strong>é™ç»´æŠ€æœ¯</strong>ï¼šä¸»æˆåˆ†åˆ†æï¼ˆPCAï¼‰ã€t-SNE ç­‰ç®—æ³•ï¼Œå¸®åŠ©å¤„ç†é«˜ç»´æ•°æ®å¯è§†åŒ–</li>
<li><strong>èšç±»ç®—æ³•</strong>ï¼šKå‡å€¼ï¼ˆKMeansï¼‰ã€DBSCAN ç­‰ï¼Œé€‚ç”¨äºç”¨æˆ·åˆ†ç¾¤ã€å¼‚å¸¸æ£€æµ‹ç­‰åº”ç”¨</li>
</ol>
<p>æ­¤å¤–ï¼Œscikit-learn è¿˜æä¾›ä¸‰å¤§å…³é”®åŠŸèƒ½æ¨¡å—ï¼š</p>
<ul>
<li><strong>ç‰¹å¾æå–</strong>ï¼šåŒ…æ‹¬æ–‡æœ¬ç‰¹å¾å‘é‡åŒ–ï¼ˆCountVectorizerï¼‰ã€TF-IDF è½¬æ¢ç­‰</li>
<li><strong>æ•°æ®é¢„å¤„ç†</strong>ï¼šæ ‡å‡†åŒ–ï¼ˆStandardScalerï¼‰ã€å½’ä¸€åŒ–ï¼ˆMinMaxScalerï¼‰ã€ç¼ºå¤±å€¼å¤„ç†ç­‰</li>
<li><strong>æ¨¡å‹è¯„ä¼°</strong>ï¼šäº¤å‰éªŒè¯ï¼ˆcross_val_scoreï¼‰ã€å¤šç§è¯„ä¼°æŒ‡æ ‡ï¼ˆaccuracy_score, f1_score ç­‰ï¼‰</li>
</ul>
<p>åœ¨å®é™…å·¥ç¨‹åº”ç”¨ä¸­ï¼Œç›´æ¥ä½¿ç”¨ Python åŸç”Ÿä»£ç ä»å¤´å®ç°æœºå™¨å­¦ä¹ ç®—æ³•å­˜åœ¨è¯¸å¤šæŒ‘æˆ˜ï¼š</p>
<ol>
<li>å¼€å‘å‘¨æœŸé•¿ï¼Œéœ€è¦å¤„ç†å¤§é‡åº•å±‚æ•°å­¦è¿ç®—å’Œä¼˜åŒ–é—®é¢˜</li>
<li>éš¾ä»¥ä¿è¯ä»£ç çš„å¥å£®æ€§å’Œè®¡ç®—æ•ˆç‡</li>
<li>ç¼ºä¹ç»Ÿä¸€çš„æ¥å£è®¾è®¡ï¼Œä¸åˆ©äºå›¢é˜Ÿåä½œå’Œæ¨¡å‹ç»´æŠ¤</li>
</ol>
<p>ç›¸æ¯”ä¹‹ä¸‹ï¼Œä½¿ç”¨ scikit-learn çš„æ ‡å‡†å·¥ä½œæµç¨‹æ›´åŠ é«˜æ•ˆå¯é ï¼š</p>
<ol>
<li>æ•°æ®é‡‡é›†åï¼Œé¦–å…ˆè¿›è¡Œæ¢ç´¢æ€§åˆ†æï¼ˆEDAï¼‰</li>
<li>æ ¹æ®æ•°æ®ç‰¹å¾ï¼ˆå¦‚çº¿æ€§/éçº¿æ€§ã€æ•°æ®è§„æ¨¡ã€ç‰¹å¾ç»´åº¦ç­‰ï¼‰é€‰æ‹©åˆé€‚çš„ç®—æ³•</li>
<li>é€šè¿‡ sklearn ç»Ÿä¸€çš„ API æ¥å£ï¼ˆfit/predict/transformï¼‰è°ƒç”¨ç®—æ³•</li>
<li>ä½¿ç”¨ç½‘æ ¼æœç´¢ï¼ˆGridSearchCVï¼‰æˆ–éšæœºæœç´¢ï¼ˆRandomizedSearchCVï¼‰ä¼˜åŒ–è¶…å‚æ•°</li>
<li>é€šè¿‡äº¤å‰éªŒè¯è¯„ä¼°æ¨¡å‹æ€§èƒ½ï¼Œæœ€ç»ˆå®ç°ç®—æ³•æ•ˆç‡ä¸æ•ˆæœçš„å¹³è¡¡</li>
</ol>
<p>ä¾‹å¦‚ï¼Œåœ¨ç”µå•†æ¨èç³»ç»Ÿå¼€å‘ä¸­ï¼Œå¯ä»¥ï¼š</p>
<ol>
<li>ä½¿ç”¨ sklearn çš„ KNN ç®—æ³•å®ç°ååŒè¿‡æ»¤</li>
<li>é€šè¿‡ Pipeline å°†ç‰¹å¾æ ‡å‡†åŒ–ã€é™ç»´å’Œåˆ†ç±»å™¨ç»„åˆ</li>
<li>åˆ©ç”¨ classification_report è¾“å‡ºç²¾ç¡®ç‡ã€å¬å›ç‡ç­‰æŒ‡æ ‡</li>
</ol>
<p>æ­£æ˜¯è¿™ç§æ¨¡å—åŒ–è®¾è®¡ã€ç»Ÿä¸€æ¥å£å’Œä¸°å¯Œçš„ç®—æ³•å®ç°ï¼Œä½¿ scikit-learn æˆä¸ºæœºå™¨å­¦ä¹ å®è·µä¸­çš„é¦–é€‰å·¥å…·åŒ…ï¼Œå¤§å¤§é™ä½äº†ç®—æ³•åº”ç”¨çš„é—¨æ§›ï¼Œæé«˜äº†å¼€å‘æ•ˆç‡ã€‚</p>
<h3 data-id="heading-2">è®¾è®¡åŸåˆ™</h3>
<p>ä¸€è‡´æ€§
æ‰€æœ‰å¯¹è±¡å…±äº«ä¸€ä¸ªç®€å•ä¸€è‡´çš„ç•Œé¢ï¼ˆæ¥å£ï¼‰</p>
<ul>
<li>ä¼°ç®—å™¨ï¼šfit()æ–¹æ³•ï¼ŒåŸºäºæ•°æ®ä¼°ç®—å‚æ•°çš„ä»»æ„å¯¹è±¡ï¼Œä½¿ç”¨çš„å‚æ•°æ˜¯ä¸€ä¸ªæ•°æ®é›†ï¼ˆå¯¹åº” Xï¼Œæœ‰ç›‘ç£ç®—æ³•è¿˜éœ€è¦ä¸€ä¸ªYï¼‰ï¼Œå¼•å¯¼ä¼°ç®—è¿‡ç¨‹çš„ä»»æ„å…¶ä»–å‚æ•°æˆä¸ºè¶…å‚æ•°ï¼Œå¿…é¡»è¢«è®¾ç½®ä¸ºå®ä¾‹å˜é‡ã€‚</li>
<li>è½¬æ¢å™¨ï¼štransform()æ–¹æ³•ï¼Œä½¿ç”¨ä¼°ç®—å™¨è½¬æ¢æ•°æ®é›†ï¼Œè½¬æ¢è¿‡ç¨‹ä¾èµ–äºå­¦ä¹ å‚æ•°ï¼Œå¯ä»¥ä½¿ç”¨ä¾¿æ·æ–¹å¼ï¼šfit_transform()ï¼Œç›¸å½“äºå…ˆ fit()å† transform()ï¼Œæœ‰æ—¶ä¼˜åŒ–è¿‡é€Ÿåº¦æ›´å¿«ã€‚</li>
<li>é¢„æµ‹å™¨ï¼špredict()æ–¹æ³•ï¼Œä½¿ç”¨ä¼°ç®—å™¨é¢„æµ‹æ–°æ•°æ®ï¼Œè¿”å›åŒ…å«é¢„æµ‹ç»“æœçš„æ•°æ®ï¼Œè¿˜æœ‰ score()æ–¹æ³•ï¼šç”¨äºåº¦é‡ç»™å®šæµ‹è¯•é›†çš„é¢„æµ‹æ•ˆæœçš„å¥½åï¼ˆè¿ç»­ y ä½¿ç”¨ R æ–¹ï¼Œåˆ†ç±» y ä½¿ç”¨å‡†ç¡®ç‡ accuracyï¼‰</li>
</ul>
<h3 data-id="heading-3">ç›‘æ§</h3>
<p>æ£€æŸ¥æ‰€æœ‰å‚æ•°ï¼Œæ‰€æœ‰ä¼°ç®—å™¨çš„è¶…å‚æ•°å¯ä»¥é€šè¿‡å…¬å…±å®ä¾‹å˜é‡è®¿é—®ï¼Œæ‰€æœ‰ä¼°ç®—å™¨çš„å­¦ä¹ å‚æ•°éƒ½å¯ä»¥é€šè¿‡æœ‰ä¸‹åˆ’çº¿åç¼€çš„å…¬å…±å®ä¾‹å˜é‡è®¿é—®ã€‚</p>
<h3 data-id="heading-4">é˜²æ­¢ç±»æ‰©æ•£</h3>
<p>å¯¹è±¡å‹å›ºå®šï¼Œæ•°æ®é›†è¢«è¡¨ç¤ºä¸º Numpy æ•°ç»„æˆ– Scipy ç¨€ç–çŸ©é˜µï¼Œè¶…æƒ¨æ˜¯æ™®é€šçš„ Pythonå­—ç¬¦æˆ–æ•°å­—ã€‚</p>
<h3 data-id="heading-5">åˆæˆ</h3>
<p>ç°æœ‰çš„æ„å»ºå°½å¯èƒ½é‡ç”¨ï¼Œå¯ä»¥è½»æ¾åˆ›å»ºä¸€ä¸ªæµæ°´çº¿ Piplineã€‚</p>
<h3 data-id="heading-6">åˆæˆé»˜è®¤å€¼</h3>
<p>å¤§å¤šå‚æ•°æä¾›åˆç†é»˜è®¤å€¼ï¼Œå¯ä»¥è½»æ¾æ­å»ºä¸€ä¸ªåŸºæœ¬çš„å·¥ä½œç³»ç»Ÿã€‚</p>
<h4 data-id="heading-7">æ¡ˆä¾‹1ï¼šçº¢é…’</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> sklearn.neighbors <span class="hljs-keyword">import</span> KNeighborsClassifier

<span class="hljs-comment"># 0 ä»£è¡¨ â€œé»‘çš®è¯ºâ€ï¼Œ1 ä»£è¡¨ â€œèµ¤éœç â€</span>
clf = KNeighborsClassifier(n_neighbors = <span class="hljs-number">3</span>)
clf = clf.fit(wine_data.iloc[:,<span class="hljs-number">0</span>:<span class="hljs-number">2</span>], wine_data.iloc[:,-<span class="hljs-number">1</span>])
result = clf.predict([[<span class="hljs-number">12.8</span>,<span class="hljs-number">4.1</span>]]) <span class="hljs-comment"># è¿”å›é¢„æµ‹çš„æ ‡ç­¾</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"result: <span class="hljs-subst">{result}</span>"</span>)

<span class="hljs-comment"># å¯¹æ¨¡å‹è¿›è¡Œä¸€ä¸ªè¯„ä¼°ï¼Œæ¥å£scoreè¿”å›é¢„æµ‹çš„å‡†ç¡®ç‡</span>
score = clf.score([[<span class="hljs-number">12.8</span>,<span class="hljs-number">4.1</span>]],[<span class="hljs-number">0</span>])
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"score: <span class="hljs-subst">{score}</span>"</span>)

<span class="hljs-built_in">print</span>(clf.predict_proba([[<span class="hljs-number">12.8</span>,<span class="hljs-number">4.1</span>]]))

</code></pre>
<p>æ‰§è¡Œç»“æœå¦‚ä¸‹å›¾æ˜¯ï¼š
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a47616495cb940939d5282545463e487~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767405371&amp;x-signature=Ja9JAPiuWB%2BJ4jGfOagezLxqyn4%3D" alt="sklearn Kè¿‘é‚»ç®—æ³•" loading="lazy"/></p>
<h4 data-id="heading-8">æ¡ˆä¾‹2ï¼šä¹³è…ºç™Œ</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> sklearn.neighbors <span class="hljs-keyword">import</span> KNeighborsClassifier
<span class="hljs-keyword">from</span> sklearn.datasets <span class="hljs-keyword">import</span> load_breast_cancer
<span class="hljs-keyword">from</span> sklearn.model_selection <span class="hljs-keyword">import</span> train_test_split

<span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd
<span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np
<span class="hljs-comment">#è¯»å–æ•°æ®é›†</span>
data = load_breast_cancer()
<span class="hljs-comment">#DateFrameæ ¼å¼æ˜¾ç¤º</span>
X = data.data
y = data.target
name = [<span class="hljs-string">'å¹³å‡åŠå¾„'</span>,<span class="hljs-string">'å¹³å‡çº¹ç†'</span>,<span class="hljs-string">'å¹³å‡å‘¨é•¿'</span>,<span class="hljs-string">'å¹³å‡é¢ç§¯'</span>,
<span class="hljs-string">'å¹³å‡å…‰æ»‘åº¦'</span>,<span class="hljs-string">'å¹³å‡ç´§å‡‘åº¦'</span>,<span class="hljs-string">'å¹³å‡å‡¹åº¦'</span>,
<span class="hljs-string">'å¹³å‡å‡¹ç‚¹'</span>,<span class="hljs-string">'å¹³å‡å¯¹ç§°'</span>,<span class="hljs-string">'å¹³å‡åˆ†å½¢ç»´æ•°'</span>,
<span class="hljs-string">'åŠå¾„è¯¯å·®'</span>,<span class="hljs-string">'çº¹ç†è¯¯å·®'</span>,<span class="hljs-string">'å‘¨é•¿è¯¯å·®'</span>,<span class="hljs-string">'é¢ç§¯è¯¯å·®'</span>,
<span class="hljs-string">'å¹³æ»‘åº¦è¯¯å·®'</span>,<span class="hljs-string">'ç´§å‡‘åº¦è¯¯å·®'</span>,<span class="hljs-string">'å‡¹åº¦è¯¯å·®'</span>,
<span class="hljs-string">'å‡¹ç‚¹è¯¯å·®'</span>,<span class="hljs-string">'å¯¹ç§°è¯¯å·®'</span>,
<span class="hljs-string">'åˆ†å½¢ç»´æ•°è¯¯å·®'</span>,<span class="hljs-string">'æœ€å·®åŠå¾„'</span>,<span class="hljs-string">'æœ€å·®çº¹ç†'</span>,
<span class="hljs-string">'æœ€å·®çš„è¾¹ç•Œ'</span>,<span class="hljs-string">'æœ€å·®çš„åŒºåŸŸ'</span>,<span class="hljs-string">'æœ€å·®çš„å¹³æ»‘åº¦'</span>,
<span class="hljs-string">'æœ€å·®çš„ç´§å‡‘æ€§'</span>,<span class="hljs-string">'æœ€å·®çš„å‡¹é™·'</span>,<span class="hljs-string">'æœ€å·®çš„å‡¹ç‚¹'</span>,
<span class="hljs-string">'æœ€å·®çš„å¯¹ç§°æ€§'</span>,<span class="hljs-string">'æœ€å·®çš„åˆ†å½¢ç»´æ•°'</span>,<span class="hljs-string">'æ‚£ç—…å¦'</span>]
data=np.concatenate((X,y.reshape(-<span class="hljs-number">1</span>,<span class="hljs-number">1</span>)),axis=<span class="hljs-number">1</span>)
table=pd.DataFrame(data=data,columns=name)
table.head()

<span class="hljs-comment"># åˆ’åˆ†è®­ç»ƒé›†å’Œæµ‹è¯•é›† #30%æ•°æ®ä½œä¸ºè®­ç»ƒé›†</span>
Xtrain,Xtest,Ytrain,Ytest = train_test_split(X,y,test_size=<span class="hljs-number">0.2</span>,random_state=<span class="hljs-number">420</span>)
<span class="hljs-comment"># å»ºç«‹æ¨¡å‹&amp;è¯„ä¼°æ¨¡å‹</span>
clf = KNeighborsClassifier(n_neighbors=<span class="hljs-number">4</span>)
<span class="hljs-comment"># å»ºç«‹åˆ†ç±»å™¨</span>
clf = clf.fit(Xtrain,Ytrain)
score = clf.score(Xtest,Ytest)
score
</code></pre>
<p>æ‰§è¡Œç»“æœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/819873c325864a66944131ea655fb2db~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767405371&amp;x-signature=Ap5J%2FaIPWVnaNySJS3BXo5cO4Fc%3D" alt="sklearn ä¹³è…ºç™Œæ¡ˆä¾‹" loading="lazy"/>
å¦‚ä½•ç”¨ä¸Šé¢åˆ†ç±»å™¨æ‹Ÿåˆç»“æœæ‰¾å‡ºç¦» Xtest ä¸­ç¬¬ 20 è¡Œå’Œç¬¬ 30 è¡Œæœ€è¿‘çš„ 4 ä¸ªâ€œç‚¹â€?</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># æŸ¥æ‰¾ç‚¹çš„Ké‚»å±…ã€‚è¿”å›æ¯ä¸ªç‚¹çš„é‚»å±…çš„ä¸ä¹‹çš„è·ç¦»å’Œç´¢å¼•å€¼ã€‚</span>
clf.kneighbors(Xtest[[<span class="hljs-number">20</span>,<span class="hljs-number">30</span>],:],return_distance=<span class="hljs-literal">True</span>)
</code></pre>
<p>æŸ¥è¯¢ç»“æœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5c2b2eff9e6649b7a549f6ccac366d6d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767405371&amp;x-signature=3P%2BGRyusnB43AY%2BTxk4RigwcT70%3D" alt="sklearn kè¿‘é‚»è¾“å‡ºç»“æœ" loading="lazy"/></p>
<h3 data-id="heading-9">é€‰æ‹©æœ€ä¼˜Kå€¼</h3>
<p>KNN ä¸­çš„ä¸€ä¸ªè¶…å‚æ•°ï¼Œæ‰€è°“â€œè¶…å‚æ•°â€ï¼Œå°±æ˜¯éœ€è¦äººä¸ºè¾“å…¥ï¼Œç®—æ³•ä¸èƒ½é€šè¿‡ç›´æ¥è®¡ç®—å¾—å‡ºè¿™ä¸ªå‚æ•°ï¼ŒKNN ä¸­çš„ K ä»£è¡¨çš„æ˜¯è·ç¦»éœ€è¦åˆ†ç±»çš„æµ‹è¯•ç‚¹ X æœ€è¿‘çš„ K ä¸ªæ ·æœ¬ï¼Œå¦‚æœä¸è¾“å…¥è¿™ä¸ªå€¼ï¼Œé‚£ä¹ˆç®—æ³•ä¸­é‡è¦éƒ¨åˆ†â€œé€‰å‡º K ä¸ªæœ€è¿‘é‚»â€å°±æ— æ³•å®ç°ã€‚
ä» KNN çš„åŸç†ä¸­å¯è§ï¼Œæ˜¯å¦èƒ½å¤Ÿç¡®è®¤åˆé€‚çš„ K å€¼å¯¹ç®—æ³•æœ‰æå¤§çš„å½±å“ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/45d413c6ac364e4ba2cc7fda96ac80b7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767405371&amp;x-signature=ZfqcNXGHigY6P2bUPYAzESEg6O8%3D" alt="KNN è¶…å‚æ•°" loading="lazy"/>
å¦‚æœé€‰æ‹©çš„ Kå€¼è¾ƒå°ï¼Œå°±ç›¸å½“äºè¾ƒå°çš„é¢†åŸŸä¸­çš„è®­ç»ƒå®ä¾‹è¿›è¡Œé¢„æµ‹ï¼Œè¿™æ—¶å€™åªæœ‰ä¸è¾“å…¥å®ä¾‹è¾ƒè¿‘çš„è®­ç»ƒå®ä¾‹æ‰ä¼šå¯¹é¢„æµ‹ç»“æœèµ·ä½œç”¨ï¼Œä½†ç¼ºç‚¹æ˜¯é¢„æµ‹ç»“æœä¼šå¯¹è¿‘é‚»çš„å®ä¾‹ç‚¹éå¸¸æ•æ„Ÿï¼Œå¦‚æœè¿‘é‚»çš„å®ä¾‹ç‚¹æ°å¥½æ˜¯å™ªå£°ï¼Œé¢„æµ‹å°±ä¼šå‡ºé”™ã€‚
ç›¸åçš„ï¼Œå¦‚æœé€‰æ‹©çš„ K å€¼è¾ƒå¤§ï¼Œå°±ç›¸å½“äºè¾ƒå¤§çš„é¢†åŸŸä¸­çš„è®­ç»ƒå®ä¾‹è¿›è¡Œé¢„æµ‹ï¼Œè¿™æ—¶ä¸è¾“å…¥å®ä¾‹è¾ƒè¿œçš„ï¼ˆä¸ç›¸ä¼¼çš„ï¼‰è®­ç»ƒå®ä¾‹ä¹Ÿä¼šå¯¹é¢„æµ‹èµ·ä½œç”¨ï¼Œä½¿é¢„æµ‹å‘ç”Ÿé”™è¯¯ã€‚å› æ­¤ï¼Œè¶…å‚æ•° K çš„é€‰å®šæ˜¯ KNN çš„å¤´å·é—®é¢˜ã€‚</p>
<h3 data-id="heading-10">å­¦ä¹ æ›²çº¿</h3>
<p>æˆ‘ä»¬æ€ä¹ˆæ ·é€‰æ‹©ä¸€ä¸ªæœ€ä½³çš„ K å€¼ï¼Ÿåœ¨è¿™é‡Œè¦ä½¿ç”¨æœºå™¨å­¦ä¹ ä¸­çš„ç¥å™¨ï¼šå‚æ•°å­¦ä¹ æ›²çº¿ï¼Œå‚æ•°å­¦ä¹ æ›²çº¿æ˜¯ä¸€æ¡ä»¥ä¸åŒçš„å‚æ•°å–å€¼ä¸ºæ¨ªåæ ‡ï¼Œä¸åŒå‚æ•°å–å€¼ä¸‹çš„æ¨¡å‹ç»“æœä¸ºçºµåæ ‡çš„æ›²çº¿ï¼Œæˆ‘ä»¬å¾€å¾€é€‰æ‹©æ¨¡å‹è¡¨ç°æœ€ä½³ç‚¹çš„å‚æ•°å–å€¼ä½œä¸ºè¿™ä¸ªå‚æ•°çš„å–å€¼ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># æ›´æ¢ä¸åŒçš„n_neighborså‚æ•°çš„å–å€¼ï¼Œè§‚å¯Ÿç»“æœçš„å˜åŒ–</span>
clf = KNeighborsClassifier(n_neighbors=<span class="hljs-number">7</span>)
clf = clf.fit(Xtrain,Ytrain)
score = clf.score(Xtest,Ytest)
score
</code></pre>
<p>æŸ¥çœ‹ç»“æœå¦‚ä¸‹ï¼š
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/702e3a32191c4fa2bfc391302d4b1b05~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767405371&amp;x-signature=qRlA4s9ShYF7wNBUGCqS3o%2FdQ60%3D" alt="Kè¿‘é‚»ç®—æ³• å­¦ä¹ æ›²çº¿" loading="lazy"/>
ç»˜åˆ¶å­¦ä¹ æ›²çº¿ï¼š</p>
<pre><code class="hljs language-python" lang="python">score = []
krange = <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,<span class="hljs-number">20</span>)
<span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> krange:
clf = KNeighborsClassifier(n_neighbors=i)
clf = clf.fit(Xtrain,Ytrain)
score.append(clf.score(Xtest,Ytest))
plt.plot(krange,score)
plt.show()
</code></pre>
<p>æ‰§è¡Œç»“æœå¦‚ä¸‹ï¼š
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fb84ef8cdd0f4c73b9fda24c2847c51f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767405371&amp;x-signature=ncVH3CmHlLjYcadiUQ7sxrla1M8%3D" alt="Kè¿‘é‚»å­¦ä¹ æ›²çº¿ç»˜åˆ¶" loading="lazy"/>
å›¾åƒå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/68c7f5c57a4341948635500ffe1b8f00~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767405371&amp;x-signature=Tutrs2Hd8UIjSzQTC8xdatQjGDM%3D" alt="Kè¿‘é‚»å­¦ä¹ æ›²çº¿ç»˜åˆ¶" loading="lazy"/>
é‚£ä¹ˆä¸Šå›¾ä¸­ K ä¸ºå¤šå°‘çš„æ—¶å€™åˆ†å€¼æœ€é«˜å‘¢ï¼Ÿ</p>
<pre><code class="hljs language-shell" lang="shell">score.index(max(score))+1
</code></pre>
<p>æ‰§è¡Œç»“æœå¦‚ä¸‹æ‰€ç¤ºï¼š
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fe0a07a22b214e47b16d87120d4724f6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767405371&amp;x-signature=ujwduRSOcmovunXakNNowueMdIw%3D" alt="Kè¿‘é‚»å­¦ä¹ æ›²çº¿è¾“å‡ºKå€¼" loading="lazy"/>
ä½†æ˜¯è¿™ä¸ªæ—¶å€™ä¹Ÿä¼šæœ‰é—®é¢˜ï¼Œå¦‚æœéšæœºåˆ’åˆ†çš„æ•°æ®é›†å˜åŒ–çš„è¯ï¼Œå¾—åˆ†æœ€é«˜çš„K å€¼ä¹Ÿä¼šå‘ç”Ÿå˜åŒ–ã€‚</p>
<pre><code class="hljs language-python" lang="python">Xtrain,Xtest,Ytrain,Ytest = train_test_split(X,y,test_size=<span class="hljs-number">0.2</span>,random_state=<span class="hljs-number">421</span>)
score = []
krange = <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,<span class="hljs-number">20</span>)
<span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> krange:
    clf = KNeighborsClassifier(n_neighbors=i)
    clf = clf.fit(Xtrain,Ytrain)
    score.append(clf.score(Xtest,Ytest))
plt.plot(krange,score)
plt.show()
</code></pre>
<p>æ‰§è¡Œç»“æœå¦‚ä¸‹æ‰€ç¤ºï¼š
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ffcfc484fe134274912cb9f1a9558e4d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767405371&amp;x-signature=dTOGR9%2FeghqjH6eC5nZKjF%2F26yA%3D" alt="Kè¿‘é‚»å­¦ä¹ è®­ç»ƒ" loading="lazy"/>
è¾“å‡ºçš„å›¾ç‰‡çš„æ˜¯ï¼š
![Kè¿‘é‚»å­¦ä¹ è®­ç»ƒ]](<a href="https://link.juejin.cn?target=https%3A%2F%2Fi-blog.csdnimg.cn%2Fdirect%2F2a005d64a3e34884b0944b400ecd31de.png" target="_blank" title="https://i-blog.csdnimg.cn/direct/2a005d64a3e34884b0944b400ecd31de.png" ref="nofollow noopener noreferrer">i-blog.csdnimg.cn/direct/2a00â€¦</a>)
æ­¤æ—¶çš„K ä¸ºå¤šå°‘åˆ†å€¼æœ€é«˜ï¼Ÿ</p>
<pre><code class="hljs language-python" lang="python">score.index(<span class="hljs-built_in">max</span>(score))+<span class="hljs-number">1</span>
</code></pre>
<p>æ‰§è¡Œç»“æœå¦‚ä¸‹æ‰€ç¤ºï¼š
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/393c23544e5e4a0eb176be9d9ae78743~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767405371&amp;x-signature=gZiqk0mBDfVStEmAsdB1sMd%2BQkA%3D" alt="Kè¿‘é‚»ç¡®å®šæœ€é«˜çš„åˆ†å€¼æ˜¯å¤šå°‘" loading="lazy"/>
æ­¤æ—¶å°±æ— æ³•ç¡®å®šæœ€ä½³çš„ K å€¼äº†ï¼Œå°±æ— æ³•è¿›è¡Œä¸‹é¢çš„å»ºæ¨¡å·¥ä½œï¼Œæ€ä¹ˆåŠï¼Ÿ</p>
<h2 data-id="heading-11">é”™è¯¯é€ŸæŸ¥</h2>

































































<table><thead><tr><th>ç—‡çŠ¶</th><th>æ ¹å› å®šä½</th><th>ä¿®å¤</th><th>å­¦ä¹ æ›²çº¿</th></tr></thead><tbody><tr><td>ä»£ç ç›´æ¥æŠ¥ <code>IndentationError</code></td><td><code>for</code> å¾ªç¯ä½“æœªç¼©è¿›</td><td>è¡¥é½å¾ªç¯ä½“ç¼©è¿›ï¼›ç¡®ä¿ <code>clf = ... fit append</code> åœ¨å¾ªç¯å†…</td><td>è¿è¡Œåˆ° <code>for i in krange:</code> å¤„å³å¤±è´¥</td></tr><tr><td><code>NameError: name 'wine_data' is not defined</code></td><td>çº¢é…’æ¡ˆä¾‹æœªç»™å‡ºæ•°æ®è¯»å–/å˜é‡å®šä¹‰</td><td>åœ¨æ­£æ–‡å‰è¡¥å……æ•°æ®åŠ è½½ä¸ <code>DataFrame</code> æ„é€ ï¼›æˆ–æ”¹ç”¨ <code>sklearn</code> å†…ç½®æ•°æ®é›†/CSV è¯»å–ç¤ºä¾‹</td><td>æŒ‡å‘ <code>wine_data.iloc...</code></td></tr><tr><td><code>NameError: name 'plt' is not defined</code></td><td>ç»˜å›¾æœªå¯¼å…¥ <code>matplotlib</code></td><td>å¢åŠ  <code>import matplotlib.pyplot as plt</code></td><td>æŒ‡å‘ <code>plt.plot(...)</code></td></tr><tr><td><code>score</code> çœ‹èµ·æ¥â€œå¾ˆé«˜/å¾ˆä½â€ï¼Œä½†ä¸å¯ä¿¡</td><td>å•æ ·æœ¬æˆ–æå°æ ·æœ¬è°ƒç”¨ <code>score</code>ï¼Œç»Ÿè®¡æ„ä¹‰ä¸è¶³</td><td>ç”¨ç‹¬ç«‹æµ‹è¯•é›†ï¼ˆ<code>Xtest</code>/<code>Ytest</code>ï¼‰è¯„ä¼°ï¼›è‡³å°‘ä¸Šç™¾æ ·æœ¬æˆ–äº¤å‰éªŒè¯å‡å€¼</td><td><code>clf.score([[12.8,4.1]],[0])</code> è¿™ç±»å†™æ³•</td></tr><tr><td>â€œæœ€ä½³ Kâ€éš <code>random_state</code> æ”¹å˜</td><td>å•æ¬¡åˆ‡åˆ†å¯¼è‡´æ–¹å·®å¤§ï¼›æ•°æ®é‡/ç±»åˆ«åˆ†å¸ƒä½¿ç»“æœæ•æ„Ÿ</td><td>ç”¨ <code>StratifiedKFold</code> + <code>GridSearchCV</code>ï¼›æŠ¥å‘Šå‡å€¼Â±æ–¹å·®/ç½®ä¿¡åŒºé—´ï¼Œä¸æŠ¥å•ç‚¹å³°å€¼</td><td>å¯¹æ¯” <code>random_state=420</code> ä¸ <code>421</code> çš„å³°å€¼ K ä¸åŒ</td></tr><tr><td>KNN æ•ˆæœå¼‚å¸¸ã€K å¾ˆå¤§/å¾ˆå°æ‰å¥½</td><td>ç‰¹å¾æœªæ ‡å‡†åŒ–å¯¼è‡´è·ç¦»è¢«é‡çº²ä¸»å¯¼</td><td>ç”¨ <code>Pipeline(StandardScaler(), KNN)</code>ï¼›å¿…è¦æ—¶å°è¯•ä¸åŒè·ç¦»åº¦é‡ï¼ˆ<code>metric</code>ï¼‰</td><td>æ£€æŸ¥ç‰¹å¾é‡çº²ï¼ˆå¦‚é¢ç§¯/å‘¨é•¿é‡çº§è¿œå¤§äºåˆ†å½¢ç»´æ•°ï¼‰</td></tr><tr><td><code>kneighbors</code> ç»“æœçœ‹ä¸æ‡‚æˆ–ç´¢å¼•å¯¹ä¸ä¸ŠåŸè¡¨</td><td><code>Xtest</code> æ˜¯ <code>ndarray</code>ï¼Œç´¢å¼•è¿”å›çš„æ˜¯è®­ç»ƒé›†ç´¢å¼•ï¼ˆç›¸å¯¹ <code>Xtrain</code>ï¼‰</td><td>æ˜ç¡® <code>kneighbors(Xtest[[20,30]], ...)</code> è¿”å›çš„æ˜¯ <code>Xtrain</code> çš„é‚»å±…ç´¢å¼•ï¼›ç”¨è¿™äº›ç´¢å¼•å›æŸ¥ <code>Xtrain</code>/<code>Ytrain</code></td><td>è¾“å‡ºä¸º <code>(distances, indices)</code>ï¼Œ<code>indices</code> æŒ‡å‘è®­ç»ƒé›†æ ·æœ¬</td></tr><tr><td>æ–‡å­—æ³¨é‡Šä¸ä»£ç ä¸ä¸€è‡´</td><td>æ³¨é‡Šå†™â€œ30%æ•°æ®ä½œä¸ºè®­ç»ƒé›†â€ï¼Œä½† <code>test_size=0.2</code> å®é™…æ˜¯ 20% æµ‹è¯•é›†</td><td>ä»¥ä»£ç ä¸ºå‡†ï¼›ç»Ÿä¸€æ³¨é‡Šå£å¾„ï¼ˆè®­ç»ƒ/æµ‹è¯•æ¯”ä¾‹ï¼‰é¿å…è¯»è€…è¯¯è§£</td><td><code>train_test_split(... test_size=0.2 ...)</code></td></tr><tr><td><code>KNeighborsClassifier</code> é€Ÿåº¦æ…¢/å†…å­˜é«˜</td><td>å¤§æ ·æœ¬ä¸‹ KNN é¢„æµ‹ä¸ºè¿‘é‚»æ£€ç´¢ï¼Œå¤æ‚åº¦é«˜</td><td>é™ç»´ï¼ˆ<code>PCA</code>ï¼‰ã€è¿‘ä¼¼è¿‘é‚»ï¼ˆå¤–éƒ¨åº“ï¼‰ã€å‡å°‘ç‰¹å¾/æ ·æœ¬ï¼›æˆ–æ¢æ¨¡å‹ï¼ˆçº¿æ€§/æ ‘æ¨¡å‹ï¼‰</td><td>é¢„æµ‹è€—æ—¶éšæ ·æœ¬æ•°çº¿æ€§/è¿‘çº¿æ€§ä¸Šå‡</td></tr></tbody></table>
<h2 data-id="heading-12">å…¶ä»–ç³»åˆ—</h2>
<h3 data-id="heading-13">ğŸš€ AIç¯‡æŒç»­æ›´æ–°ä¸­ï¼ˆé•¿æœŸæ›´æ–°ï¼‰</h3>
<p><strong>AIç‚¼ä¸¹æ—¥å¿—-29 - å­—èŠ‚è·³åŠ¨ DeerFlow æ·±åº¦ç ”ç©¶æ¡†<em>æ–œä½“æ ·å¼</em>æ¶ ç§æœ‰éƒ¨ç½² æµ‹è¯•ä¸Šæ‰‹ æ¶æ„ç ”ç©¶</strong>ï¼ŒæŒç»­æ‰“é€ å®ç”¨AIå·¥å…·æŒ‡å—ï¼
<strong>AIç ”ç©¶-132 Java ç”Ÿæ€å‰æ²¿ 2025ï¼šSpringã€Quarkusã€GraalVMã€CRaC ä¸äº‘åŸç”Ÿè½åœ°</strong></p>
<h3 data-id="heading-14">ğŸ’» Javaç¯‡æŒç»­æ›´æ–°ä¸­ï¼ˆé•¿æœŸæ›´æ–°ï¼‰</h3>
<p><strong>Java-207 RabbitMQ Direct äº¤æ¢å™¨è·¯ç”±ï¼šRoutingKey ç²¾ç¡®åŒ¹é…ã€é˜Ÿåˆ—å¤šç»‘å®šä¸æ—¥å¿—åˆ†æµå®æˆ˜</strong>
MyBatis å·²å®Œç»“ï¼ŒSpring å·²å®Œç»“ï¼ŒNginxå·²å®Œç»“ï¼ŒTomcatå·²å®Œç»“ï¼Œåˆ†å¸ƒå¼æœåŠ¡å·²å®Œç»“ï¼ŒDubboå·²å®Œç»“ï¼ŒMySQLå·²å®Œç»“ï¼ŒMongoDBå·²å®Œç»“ï¼ŒNeo4jå·²å®Œç»“ï¼ŒFastDFS å·²å®Œç»“ï¼ŒOSSå·²å®Œç»“ï¼ŒGuavaCacheå·²å®Œç»“ï¼ŒEVCacheå·²å®Œç»“ï¼ŒRabbitMQæ­£åœ¨æ›´æ–°... æ·±å…¥æµ…å‡ºåŠ©ä½ æ‰“ç‰¢åŸºç¡€ï¼</p>
<h3 data-id="heading-15">ğŸ“Š å¤§æ•°æ®æ¿å—å·²å®Œæˆå¤šé¡¹å¹²è´§æ›´æ–°ï¼ˆ300ç¯‡ï¼‰ï¼š</h3>
<p>åŒ…æ‹¬ Hadoopã€Hiveã€Kafkaã€Flinkã€ClickHouseã€Elasticsearch ç­‰äºŒåä½™é¡¹æ ¸å¿ƒç»„ä»¶ï¼Œè¦†ç›–ç¦»çº¿+å®æ—¶æ•°ä»“å…¨æ ˆï¼
<strong>å¤§æ•°æ®-278 Spark MLib - åŸºç¡€ä»‹ç» æœºå™¨å­¦ä¹ ç®—æ³• æ¢¯åº¦æå‡æ ‘ GBDTæ¡ˆä¾‹ è¯¦è§£</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æˆä¸ºé«˜çº§ PHP å¼€å‘è€…éœ€è¦çš„æ€ç»´è½¬å˜]]></title>    <link>https://juejin.cn/post/7588007285546827782</link>    <guid>https://juejin.cn/post/7588007285546827782</guid>    <pubDate>2025-12-27T00:16:27.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588007285546827782" data-draft-id="7588007285546811398" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æˆä¸ºé«˜çº§ PHP å¼€å‘è€…éœ€è¦çš„æ€ç»´è½¬å˜"/> <meta itemprop="keywords" content="åç«¯,PHP"/> <meta itemprop="datePublished" content="2025-12-27T00:16:27.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="BingoGo"/> <meta itemprop="url" content="https://juejin.cn/user/993614242266077"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æˆä¸ºé«˜çº§ PHP å¼€å‘è€…éœ€è¦çš„æ€ç»´è½¬å˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/993614242266077/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    BingoGo
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-27T00:16:27.000Z" title="Sat Dec 27 2025 00:16:27 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">æˆä¸ºé«˜çº§ PHP å¼€å‘è€…éœ€è¦çš„æ€ç»´è½¬å˜</h2>
<p>æƒ³æˆä¸º PHP é«˜æ‰‹?å…ˆä»è°ƒæ•´æ€ç»´å¼€å§‹</p>
<p>æƒ³æˆä¸ºä¸“ä¸šçš„ PHP å¼€å‘è€…?è¿™å¾ˆå¥½ã€‚ä½†åœ¨æ·±å…¥ç ”ç©¶ PHP è¯­æ³•æˆ–æœ€æ–°æ¡†æ¶ä¹‹å‰,æœ‰ä¸€ä»¶äº‹ä½ éœ€è¦æ˜ç¡®:ä½ çš„æ€ç»´æ–¹å¼ã€‚</p>
<p>äº‹å®ä¸Š,è¿™ä¸ä»…ä»…æ˜¯å†™ä»£ç â€”â€”æˆä¸º PHP ä¸“ä¸šäººå£«æ„å‘³ç€ç”¨ä¸åŒçš„æ–¹å¼æ€è€ƒã€‚è¿™å…³ä¹ä½ å¦‚ä½•å¤„ç†é—®é¢˜ã€å¦‚ä½•ä¸ä»–äººåä½œ,ä»¥åŠå¦‚ä½•æˆé•¿ã€‚å½“ç„¶,æ·±å…¥äº†è§£ PHP å¾ˆé‡è¦,ä½†æ­£ç¡®çš„æ€ç»´æ–¹å¼æ‰æ˜¯åœ¨ PHP é¢†åŸŸè„±é¢–è€Œå‡ºçš„çœŸæ­£å…³é”®ã€‚</p>
<p>æœ¬æ–‡å°†è®¨è®ºèƒ½è®©ä½ ä» PHP æ–°æ‰‹æˆé•¿ä¸ºä¸“ä¸šå¼€å‘è€…çš„å…³é”®æ€ç»´è½¬å˜ã€‚å‡†å¤‡å¥½æå‡äº†å—?å¼€å§‹å§ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fcatchadmin.com%2Fpost%2F2025-12%2Fthe-mindset-shifts-you-need-to-become-a-rockstar-php-developer" target="_blank" title="https://catchadmin.com/post/2025-12/the-mindset-shifts-you-need-to-become-a-rockstar-php-developer" ref="nofollow noopener noreferrer">åŸæ–‡é“¾æ¥ æˆä¸ºé«˜çº§ PHP å¼€å‘è€…éœ€è¦çš„æ€ç»´è½¬å˜</a></p>
<h3 data-id="heading-1">è½¬å˜ 1:ä»"åªæ˜¯å†™ä»£ç "åˆ°"è§£å†³å®é™…é—®é¢˜"</h3>
<p>å†™ä»£ç å¾ˆé…·,ä½†è§£å†³é—®é¢˜æ›´é…·</p>
<p>è¯´å®è¯:ä»»ä½•äººéƒ½èƒ½å†™ä»£ç ã€‚ä½†å†™å‡ºèƒ½è§£å†³å®é™…é—®é¢˜çš„ä»£ç ?è¿™æ‰æ˜¯å…³é”®æ‰€åœ¨ã€‚ä½œä¸ºåˆå­¦è€…,å¾ˆå®¹æ˜“è¿·å¤±åœ¨è¯­æ³•ç»†èŠ‚å’Œå‡½æ•°è°ƒç”¨ä¸­,ä½†é‡ç‚¹æ˜¯:ç¼–ç åªæ˜¯å·¥å…·ã€‚ä½œä¸º PHP å¼€å‘è€…,ä½ çš„å·¥ä½œä¸ä»…ä»…æ˜¯æ•²ä»£ç â€”â€”è€Œæ˜¯ä»¥æœ€ä½³æ–¹å¼è§£å†³é—®é¢˜ã€‚</p>
<p><strong>æŠ€æœ¯å®è·µ:åœ¨ç¼–ç å‰å…ˆåˆ†è§£é—®é¢˜</strong></p>
<p>åœ¨æ‰“å¼€ä»£ç ç¼–è¾‘å™¨ä¹‹å‰,å…ˆå°†é—®é¢˜åˆ†è§£æˆå¯ç®¡ç†çš„å°å—ã€‚ä½¿ç”¨æµç¨‹å›¾æˆ–ä¼ªä»£ç ç­‰å·¥å…·æ¥è§„åˆ’é€»è¾‘ã€‚è¿™ç§æ–¹æ³•ä¸ä»…èƒ½ç†æ¸…æ€è·¯,è¿˜èƒ½å¸®ä½ å°½æ—©å‘ç°è¾¹ç•Œæƒ…å†µå’Œæ½œåœ¨é™·é˜±ã€‚</p>
<p>ç¤ºä¾‹:
æ„å»ºè´­ç‰©è½¦æ—¶,å…ˆä¸ºæ·»åŠ å•†å“ã€è®¡ç®—æ€»ä»·å’Œç®¡ç†ä¼šè¯æŒä¹…åŒ–ç¼–å†™ä¼ªä»£ç ã€‚ç„¶ååœ¨ PHP ä¸­æœ‰æ¡ä¸ç´Šåœ°å®ç°æ¯ä¸€æ­¥ã€‚ä¾‹å¦‚:</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-comment">// Pseudocode: Add item to cart</span>
<span class="hljs-keyword">if</span> (!<span class="hljs-keyword">isset</span>(<span class="hljs-variable">$_SESSION</span>[<span class="hljs-string">'cart'</span>])) {
    <span class="hljs-variable">$_SESSION</span>[<span class="hljs-string">'cart'</span>] = <span class="hljs-keyword">array</span>();
}
<span class="hljs-title function_ invoke__">array_push</span>(<span class="hljs-variable">$_SESSION</span>[<span class="hljs-string">'cart'</span>], <span class="hljs-variable">$item</span>);
</code></pre>
<p>è¿™ç§ç»“æ„åŒ–æ–¹æ³•å°†ç¼–ç è½¬å˜ä¸ºè§£å†³é—®é¢˜,è€Œä¸ä»…ä»…æ˜¯éšæ„å†™ä»£ç ã€‚</p>
<h3 data-id="heading-2">è½¬å˜ 2:ä»"å¤åˆ¶ç²˜è´´ç¼–ç "åˆ°"ç†è§£å¹¶æŒæ§ä½ çš„ä»£ç "</h3>
<p>åˆ«å†å·æ‡’å¤åˆ¶ç²˜è´´äº†(æˆ‘ä»¬éƒ½ç»å†è¿‡)</p>
<p>è¿™å¾ˆè¯±äºº,å¯¹å§?åœ¨ Stack Overflow ä¸Šæ‰¾åˆ°å¿«é€Ÿè§£å†³æ–¹æ¡ˆ,å¤åˆ¶ç²˜è´´ä»£ç ,ç„¶åæ”¶å·¥ã€‚ä½†ç°å®æ˜¯:è¿™åœ¨çŸ­æœŸå†…å¯èƒ½æœ‰æ•ˆ,ä½†ä»é•¿è¿œæ¥çœ‹æ˜¯ç¾éš¾ã€‚å¦‚æœä½ ä¸ç†è§£æ­£åœ¨ä½¿ç”¨çš„ä»£ç ,å°±ä¼šé‡åˆ°æ— æ³•ä¿®å¤çš„é—®é¢˜â€”â€”æ›´ç³Ÿçš„æ˜¯,ä½ ä¼šé”™è¿‡å­¦ä¹ å¦‚ä½•ç¼–å†™çœŸæ­£é€‚åˆä½ çš„ä»£ç çš„æœºä¼šã€‚</p>
<p><strong>æŠ€æœ¯å®è·µ:é˜…è¯»æ–‡æ¡£å¹¶åœ¨æœ¬åœ°æµ‹è¯•</strong></p>
<p>ä¸è¦ç›´æ¥å¤åˆ¶ç²˜è´´,è€Œæ˜¯å…ˆé˜…è¯»æ–‡æ¡£ã€‚è¿™å¯¹ç†è§£å‡½æ•°å’Œåº“çš„å·¥ä½œåŸç†è‡³å…³é‡è¦ã€‚ä¸€æ—¦æŒæ¡äº†æ¦‚å¿µ,å°±åœ¨éš”ç¦»ç¯å¢ƒä¸­æµ‹è¯•å®ƒ(ä½¿ç”¨ PHP FPM æˆ– Xdebug ç­‰å·¥å…·)æ¥è§‚å¯Ÿå®ƒçš„è¡Œä¸ºã€‚</p>
<p>ç¤ºä¾‹:
åœ¨ä½¿ç”¨ç¬¬ä¸‰æ–¹ API ä¹‹å‰,å½»åº•é˜…è¯»å…¶æ–‡æ¡£ã€‚å°è¯•ç®€å•çš„ curl è¯·æ±‚æ¥æŸ¥çœ‹æ•°æ®æ ¼å¼ä»¥åŠ PHP å¦‚ä½•å¤„ç†å®ƒã€‚ä¸è¦åªä¾èµ–æ•™ç¨‹â€”â€”è‡ªå·±åŠ¨æ‰‹è¯•è¯•ã€‚ä»¥ä¸‹æ˜¯åœ¨ PHP ä¸­å‘ API å‘èµ·è¯·æ±‚çš„å¿«é€Ÿç¤ºä¾‹:</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-comment">// Example: Using cURL to send a GET request</span>
<span class="hljs-variable">$ch</span> = <span class="hljs-title function_ invoke__">curl_init</span>();
<span class="hljs-title function_ invoke__">curl_setopt</span>(<span class="hljs-variable">$ch</span>, CURLOPT_URL, <span class="hljs-string">"https://api.example.com/data"</span>);
<span class="hljs-title function_ invoke__">curl_setopt</span>(<span class="hljs-variable">$ch</span>, CURLOPT_RETURNTRANSFER, <span class="hljs-number">1</span>);
<span class="hljs-variable">$response</span> = <span class="hljs-title function_ invoke__">curl_exec</span>(<span class="hljs-variable">$ch</span>);
<span class="hljs-title function_ invoke__">curl_close</span>(<span class="hljs-variable">$ch</span>);
<span class="hljs-variable">$data</span> = <span class="hljs-title function_ invoke__">json_decode</span>(<span class="hljs-variable">$response</span>, <span class="hljs-literal">true</span>);
<span class="hljs-title function_ invoke__">print_r</span>(<span class="hljs-variable">$data</span>);
</code></pre>
<p>ç°åœ¨,ä½ ç†è§£äº†è¯·æ±‚è¿‡ç¨‹ä»¥åŠ API å¦‚ä½•å“åº”ã€‚</p>
<h3 data-id="heading-3">è½¬å˜ 3:ä»"ç‹¬ç«‹å¼€å‘"åˆ°"å›¢é˜Ÿåä½œ"</h3>
<p>ä½ ä¸æ˜¯ä¸€ä¸ªäººåœ¨æˆ˜æ–—</p>
<p>æ˜¯çš„,ç‹¬è‡ªå®Œæˆå°é¡¹ç›®ä¸€å¼€å§‹æ„Ÿè§‰å¾ˆå¥½ã€‚ä½†ä¸€æ—¦è¿›å…¥ä¸“ä¸šé¢†åŸŸ,ç¼–ç å°±å˜æˆäº†å›¢é˜Ÿè¿åŠ¨ã€‚ä½œä¸º PHP å¼€å‘è€…,ä½ ç»å¸¸ä¼šä¸å‰ç«¯å¼€å‘è€…ã€æ•°æ®åº“ç®¡ç†å‘˜ã€è®¾è®¡å¸ˆ,æœ‰æ—¶ç”šè‡³æ˜¯é¡¹ç›®ç»ç†ä¸€èµ·å·¥ä½œã€‚ä½ ä¸å†æ˜¯ä¸€æ”¯å•äººå†›é˜Ÿâ€”â€”ä½ æ˜¯æ›´å¤§å›¾æ™¯çš„ä¸€éƒ¨åˆ†ã€‚</p>
<p><strong>æŠ€æœ¯å®è·µ:è®¤çœŸä½¿ç”¨ç‰ˆæœ¬æ§åˆ¶(Git)</strong></p>
<p>åä½œæ„å‘³ç€å…±äº«ä»£ç å’Œè·Ÿè¸ªå˜æ›´ã€‚è¿™å°±æ˜¯ç‰ˆæœ¬æ§åˆ¶çš„ç”¨æ­¦ä¹‹åœ°ã€‚å­¦ä¹  Git å¹¶ä½¿ç”¨ GitHub æˆ– GitLab ç­‰å¹³å°å°†ä½¿ä½ çš„ä»£ç åä½œé¡ºç•…é«˜æ•ˆã€‚ä½¿ç”¨ Git,ä½ å¯ä»¥è·Ÿè¸ªå˜æ›´ã€å›é€€åˆ°ä»¥å‰çš„ç‰ˆæœ¬,å¹¶åˆå¹¶å¤šä¸ªå¼€å‘è€…çš„ä»£ç è€Œä¸ä¼šæ··ä¹±ã€‚</p>
<p>ç¤ºä¾‹:</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># Initialize a new Git repository</span>
git init
<span class="hljs-comment"># Add files to the staging area</span>
git add .
<span class="hljs-comment"># Commit changes with a message</span>
git commit -m <span class="hljs-string">"Initial commit"</span>
<span class="hljs-comment"># Push changes to a remote repository</span>
git push origin main
</code></pre>
<p>Git ä¸ä»…é€‚ç”¨äºå¤§å‹å›¢é˜Ÿâ€”â€”å®ƒå¯¹ä¸ªäººé¡¹ç›®ä¹Ÿè‡³å…³é‡è¦,å› ä¸ºå®ƒèƒ½å¸®ä½ æœ‰æ•ˆç®¡ç†å˜æ›´ã€‚ä¸ä»–äººåˆä½œæ—¶,æ‹‰å–è¯·æ±‚å’Œä»£ç å®¡æŸ¥å¯¹äºç»´æŠ¤é«˜è´¨é‡ä»£ç è‡³å…³é‡è¦ã€‚</p>
<h3 data-id="heading-4">è½¬å˜ 4:ä»"è¿½é€æµè¡Œæ¡†æ¶"åˆ°"æŒæ¡åŸºç¡€"</h3>
<p>æ¡†æ¶å¾ˆæœ‰è¶£,ä½†åŸºç¡€æ‰æ˜¯æ°¸æ’çš„</p>
<p>Laravelã€Symfony å’Œ CodeIgniter ç­‰ PHP æ¡†æ¶å¾ˆæ£’,ä½†é—®é¢˜æ˜¯:åœ¨æ·±å…¥ç ”ç©¶ä»»ä½•æ¡†æ¶ä¹‹å‰,ä½ éœ€è¦å¯¹ PHP æœ¬èº«æœ‰æ‰å®çš„ç†è§£ã€‚åœ¨ä¸ç†è§£åŸºç¡€çš„æƒ…å†µä¸‹ç›´æ¥è·³å…¥æ¡†æ¶,å°±åƒåœ¨å­¦ä¼šèµ°è·¯ä¹‹å‰å°±æƒ³è·‘æ­¥ã€‚</p>
<p><strong>æŠ€æœ¯å®è·µ:ä»é›¶å¼€å§‹æ„å»ºé¡¹ç›®</strong></p>
<p>åœ¨æ·±å…¥ç ”ç©¶ Laravel ç­‰æ¡†æ¶ä¹‹å‰,èŠ±æ—¶é—´ä½¿ç”¨çº¯ PHP ä»é›¶å¼€å§‹æ„å»ºä¸€ä¸ªç®€å•é¡¹ç›®ã€‚ä¾‹å¦‚,æ„å»ºä¸€ä¸ªç®€å•çš„ CRUD(åˆ›å»ºã€è¯»å–ã€æ›´æ–°ã€åˆ é™¤)åº”ç”¨,è€Œä¸ä¾èµ–ä»»ä½•æ¡†æ¶ã€‚è¿™å°†å·©å›ºä½ å¯¹ä»¥ä¸‹å†…å®¹çš„ç†è§£:</p>
<ul>
<li>è·¯ç”±</li>
<li>æ•°æ®åº“äº¤äº’</li>
<li>ä¼šè¯å¤„ç†</li>
<li>ç”¨æˆ·è®¤è¯</li>
</ul>
<p>ç¤ºä¾‹:
ä»¥ä¸‹æ˜¯å¦‚ä½•ä½¿ç”¨ PHP å’Œ MySQL è®¾ç½®åŸºæœ¬ CRUD åº”ç”¨:</p>
<ol>
<li>åˆ›å»ºæ•°æ®åº“è¡¨:</li>
</ol>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> users (
  id <span class="hljs-type">INT</span> AUTO_INCREMENT <span class="hljs-keyword">PRIMARY</span> KEY,
  name <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">100</span>),
  email <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">100</span>)
);
</code></pre>
<ol start="2">
<li>ä½¿ç”¨ PHP æ’å…¥æ•°æ®:</li>
</ol>
<pre><code class="hljs language-php" lang="php"><span class="hljs-comment">// Establish a connection</span>
<span class="hljs-variable">$conn</span> = <span class="hljs-keyword">new</span> <span class="hljs-title function_ invoke__">mysqli</span>(<span class="hljs-string">"localhost"</span>, <span class="hljs-string">"username"</span>, <span class="hljs-string">"password"</span>, <span class="hljs-string">"database"</span>);
<span class="hljs-comment">// Check for connection error</span>
<span class="hljs-keyword">if</span> (<span class="hljs-variable">$conn</span>-&gt;connect_error) {
    <span class="hljs-keyword">die</span>(<span class="hljs-string">"Connection failed: "</span> . <span class="hljs-variable">$conn</span>-&gt;connect_error);
}
<span class="hljs-comment">// Insert data</span>
<span class="hljs-variable">$sql</span> = <span class="hljs-string">"INSERT INTO users (name, email) VALUES ('John Doe', 'john@example.com')"</span>;
<span class="hljs-keyword">if</span> (<span class="hljs-variable">$conn</span>-&gt;<span class="hljs-title function_ invoke__">query</span>(<span class="hljs-variable">$sql</span>) === <span class="hljs-literal">TRUE</span>) {
    <span class="hljs-keyword">echo</span> <span class="hljs-string">"New record created successfully"</span>;
} <span class="hljs-keyword">else</span> {
    <span class="hljs-keyword">echo</span> <span class="hljs-string">"Error: "</span> . <span class="hljs-variable">$sql</span> . <span class="hljs-string">"&lt;br&gt;"</span> . <span class="hljs-variable">$conn</span>-&gt;error;
}
<span class="hljs-variable">$conn</span>-&gt;<span class="hljs-title function_ invoke__">close</span>();
</code></pre>
<p>åœ¨ä¸ä½¿ç”¨æ¡†æ¶çš„æƒ…å†µä¸‹æ„å»ºé¡¹ç›®å°†è®©ä½ æ·±å…¥ç†è§£åº•å±‚å·¥ä½œåŸç†,è¿™ä¼šè®©ä½ åœ¨ä¹‹åä½¿ç”¨ Laravel ç­‰æ¡†æ¶æ—¶æ„Ÿè§‰è½»æ¾è®¸å¤šã€‚</p>
<h3 data-id="heading-5">è½¬å˜ 5:ä»"ä¸€æ¬¡æ€§å­¦ä¹ "åˆ°"æŒç»­å­¦ä¹ "</h3>
<p>å­¦ä¹ æ°¸æ— æ­¢å¢ƒ</p>
<p>å¦‚æœä½ è®¤ä¸ºå­¦å®Œ PHP å’Œå‡ ä¸ªæ¡†æ¶å°±"å®Œæˆ"äº†,é‚£å°±å†æƒ³æƒ³ã€‚æŠ€æœ¯ä¸–ç•Œå‘å±•è¿…é€Ÿ,ä½œä¸ºä¸“ä¸šå¼€å‘è€…,ä½ éœ€è¦è·Ÿä¸Šæ­¥ä¼ã€‚ä¼˜ç§€çš„ PHP å¼€å‘è€…ä¸ä»…ä»…æ˜¯çŸ¥é“å¦‚ä½•å†™ä»£ç çš„äºº;è€Œæ˜¯ä¸æ–­è¿›åŒ–ã€é€‚åº”å¹¶ä¿æŒå¥½å¥‡å¿ƒçš„äººã€‚</p>
<p><strong>æŠ€æœ¯å®è·µ:å…³æ³¨ PHP å˜æ›´æ—¥å¿—å’Œåšå®¢</strong></p>
<p>åŠæ—¶äº†è§£ PHP ç‰ˆæœ¬å’Œæœ€ä½³å®è·µã€‚è®¢é˜…åšå®¢,å…³æ³¨ PHP ç›¸å…³æ–°é—»,å¹¶é˜…è¯»æ¯ä¸ªæ–°ç‰ˆæœ¬å‘å¸ƒçš„å®˜æ–¹ PHP å˜æ›´æ—¥å¿—ã€‚äº†è§£ PHP 8 ä¸­çš„æ–°ç‰¹æ€§(å¦‚ JIT å’Œå±æ€§)å°†ä½¿ä½ çš„ä»£ç ä¿æŒç°ä»£å’Œé«˜æ•ˆã€‚</p>
<p>ç¤ºä¾‹:
åœ¨ PHP 8 ä¸­,match è¡¨è¾¾å¼å¯ä»¥æˆä¸º switch-case çš„æ›´ç®€æ´æ›¿ä»£æ–¹æ¡ˆã€‚å¦‚æœä½ è¿˜æ²¡è¯•è¿‡,ç°åœ¨å°±è¯•è¯•!</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-variable">$fruit</span> = <span class="hljs-string">'apple'</span>;
<span class="hljs-keyword">echo</span> <span class="hljs-keyword">match</span>(<span class="hljs-variable">$fruit</span>) {
    <span class="hljs-string">'apple'</span> =&gt; <span class="hljs-string">'It'</span>s an apple!<span class="hljs-string">',
    '</span>banana<span class="hljs-string">' =&gt; '</span>It<span class="hljs-string">'s a banana!'</span>,
    <span class="hljs-keyword">default</span> =&gt; <span class="hljs-string">'Unknown fruit'</span>,
};
</code></pre>
<p>è¿™ç§æ–°è¯­æ³•æ›´ç´§å‡‘,æ¶ˆé™¤äº†å¤šä¸ª case è¯­å¥çš„éœ€è¦ã€‚</p>
<h3 data-id="heading-6">è½¬å˜ 6:ä»"å¿«é€Ÿä¿®å¤"åˆ°"é•¿æœŸè§£å†³æ–¹æ¡ˆ"</h3>
<p>å†™å‡ºä½ ä¼šå¼•ä»¥ä¸ºè±ªçš„ä»£ç (è€Œä¸ä»…ä»…æ˜¯èƒ½ç”¨çš„ä»£ç )</p>
<p>æˆ‘ä»¬éƒ½ç»å†è¿‡ã€‚ç´§è¿«çš„æˆªæ­¢æ—¥æœŸã€å‹åŠ›,ä»¥åŠéšä¾¿æ‹¼å‡‘ç‚¹ä¸œè¥¿çš„è¯±æƒ‘ã€‚ä½†é—®é¢˜æ˜¯:ç¼–å†™å¿«é€Ÿè€Œç²—ç³™çš„ä»£ç ç°åœ¨å¯èƒ½å®Œæˆå·¥ä½œ,ä½†ä»¥åä¼šåå™¬ä½ ã€‚ç³Ÿç³•çš„ä»£ç ä¼šå¯¼è‡´ bugã€æ€§èƒ½é—®é¢˜å’Œå·¨å¤§çš„éº»çƒ¦ã€‚</p>
<p><strong>æŠ€æœ¯å®è·µ:ç¼–å†™å¯æµ‹è¯•ã€å¯æ‰©å±•çš„ä»£ç </strong></p>
<p>ç¡®ä¿ä»£ç ä¿æŒæ•´æ´å’Œå¯æ‰©å±•çš„ä¸€ç§æ–¹æ³•æ˜¯ç¼–å†™æµ‹è¯•ã€‚ä½¿ç”¨ PHPUnit è¿›è¡Œå•å…ƒæµ‹è¯•æ¥éªŒè¯ä»£ç çš„æ¯ä¸ªéƒ¨åˆ†æ˜¯å¦æŒ‰é¢„æœŸå·¥ä½œã€‚</p>
<p>ç¤ºä¾‹:
ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„ PHPUnit æµ‹è¯•,ç”¨äºæµ‹è¯•è®¡ç®—è´­ç‰©è½¦ä¸­å•†å“æ€»ä»·çš„æ–¹æ³•:</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-keyword">use</span> <span class="hljs-title">PHPUnit</span>\<span class="hljs-title">Framework</span>\<span class="hljs-title">TestCase</span>;
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ShoppingCartTest</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">TestCase</span>
</span>{
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">testTotalPrice</span>(<span class="hljs-params"/>)
    </span>{
        <span class="hljs-variable">$cart</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ShoppingCart</span>();
        <span class="hljs-variable">$cart</span>-&gt;<span class="hljs-title function_ invoke__">addItem</span>(<span class="hljs-string">'Apple'</span>, <span class="hljs-number">1.50</span>);
        <span class="hljs-variable">$cart</span>-&gt;<span class="hljs-title function_ invoke__">addItem</span>(<span class="hljs-string">'Banana'</span>, <span class="hljs-number">1.00</span>);
        
        <span class="hljs-variable language_">$this</span>-&gt;<span class="hljs-title function_ invoke__">assertEquals</span>(<span class="hljs-number">2.50</span>, <span class="hljs-variable">$cart</span>-&gt;<span class="hljs-title function_ invoke__">getTotalPrice</span>());
    }
}
</code></pre>
<p>å•å…ƒæµ‹è¯•æœ‰åŠ©äºå°½æ—©å‘ç° bug,å¹¶ç¡®ä¿åœ¨æ·»åŠ æ–°åŠŸèƒ½æ—¶,ç°æœ‰åŠŸèƒ½ä¸ä¼šå‡ºé—®é¢˜ã€‚</p>
<h3 data-id="heading-7">ç»“è¯­:è½¬å˜æ€ç»´,è®©ä½ çš„ PHP èŒä¸šç”Ÿæ¶¯è…¾é£</h3>
<p>æˆä¸º PHP ä¸“ä¸šäººå£«è¿œä¸æ­¢äºå†™ä»£ç â€”â€”è¿™å…³ä¹åƒé—®é¢˜è§£å†³è€…ä¸€æ ·æ€è€ƒã€æ·±å…¥ç†è§£ä½ çš„å·¥å…·ã€ä¸ä»–äººåä½œ,ä»¥åŠè‡´åŠ›äºæŒç»­æˆé•¿ã€‚å¦‚æœä½ ä»Šå¤©å¼€å§‹è¿›è¡Œè¿™äº›æ€ç»´è½¬å˜,ä½ å°†é¡ºåˆ©æˆä¸ºä¸€åæŠ¢æ‰‹çš„ PHP å¼€å‘è€…ã€‚</p>
<p>æ‰€ä»¥,ä¸‹æ¬¡åä¸‹æ¥ç¼–ç æ—¶,è®°ä½:è¿™ä¸ä»…ä»…æ˜¯å®Œæˆå·¥ä½œâ€”â€”è€Œæ˜¯ä»¥æ­£ç¡®çš„æ–¹å¼ã€ä¸“ä¸šçš„æ–¹å¼å»åšã€‚ç¥ç¼–ç æ„‰å¿«!</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Pythonæ€§èƒ½è°ƒä¼˜å®æˆ˜ï¼š5ä¸ªä¸æŠ¥é”™ä½†æ‹–æ…¢ä»£ç 300%çš„éšè—é™·é˜±ï¼ˆé™„è§£å†³æ–¹æ¡ˆï¼‰]]></title>    <link>https://juejin.cn/post/7587776610436841487</link>    <guid>https://juejin.cn/post/7587776610436841487</guid>    <pubDate>2025-12-27T00:16:50.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587776610436841487" data-draft-id="7587776610436825103" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Pythonæ€§èƒ½è°ƒä¼˜å®æˆ˜ï¼š5ä¸ªä¸æŠ¥é”™ä½†æ‹–æ…¢ä»£ç 300%çš„éšè—é™·é˜±ï¼ˆé™„è§£å†³æ–¹æ¡ˆï¼‰"/> <meta itemprop="keywords" content="åç«¯,å‰ç«¯,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-12-27T00:16:50.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é˜¿æ©™çš„ç™¾å®ç®±"/> <meta itemprop="url" content="https://juejin.cn/user/1638743356481367"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Pythonæ€§èƒ½è°ƒä¼˜å®æˆ˜ï¼š5ä¸ªä¸æŠ¥é”™ä½†æ‹–æ…¢ä»£ç 300%çš„éšè—é™·é˜±ï¼ˆé™„è§£å†³æ–¹æ¡ˆï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1638743356481367/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é˜¿æ©™çš„ç™¾å®ç®±
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-27T00:16:50.000Z" title="Sat Dec 27 2025 00:16:50 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0"><strong>Pythonæ€§èƒ½è°ƒä¼˜å®æˆ˜ï¼š5ä¸ªä¸æŠ¥é”™ä½†æ‹–æ…¢ä»£ç 300%çš„éšè—é™·é˜±ï¼ˆé™„è§£å†³æ–¹æ¡ˆï¼‰</strong></h2>
<h2 data-id="heading-1">å¼•è¨€</h2>
<p>Pythonä»¥å…¶ç®€æ´æ˜“ç”¨çš„è¯­æ³•å’Œå¼ºå¤§çš„ç”Ÿæ€ç³»ç»Ÿèµ¢å¾—äº†å¼€å‘è€…çš„é’çã€‚ç„¶è€Œï¼Œè¿™ç§â€œç®€å•â€èƒŒåå¾€å¾€éšè—ç€æ€§èƒ½é™·é˜±â€”â€”è®¸å¤šçœ‹ä¼¼æ— å®³çš„å†™æ³•å¯èƒ½åœ¨ä¸çŸ¥ä¸è§‰ä¸­è®©ä½ çš„ä»£ç è¿è¡Œæ•ˆç‡é™ä½æ•°å€ã€‚æ›´æ£˜æ‰‹çš„æ˜¯ï¼Œè¿™äº›é™·é˜±é€šå¸¸ä¸ä¼šå¼•å‘é”™è¯¯ï¼Œè€Œæ˜¯æ‚„æ— å£°æ¯åœ°æ‹–æ…¢ç¨‹åºï¼Œç›´åˆ°ä½ å‘ç°ç³»ç»Ÿå“åº”ç¼“æ…¢æˆ–èµ„æºè€—å°½æ—¶æ‰æ„è¯†åˆ°é—®é¢˜çš„ä¸¥é‡æ€§ã€‚</p>
<p>æœ¬æ–‡å°†æ­ç¤º5ä¸ªæœ€å¸¸è§çš„Pythonæ€§èƒ½é™·é˜±ï¼Œå®ƒä»¬å¯èƒ½è®©ä½ çš„ä»£ç è¿è¡Œé€Ÿåº¦é™ä½300%ç”šè‡³æ›´å¤šã€‚æ¯ä¸ªé™·é˜±éƒ½ä¼šé…ä»¥å®é™…æ¡ˆä¾‹ã€åŸç†åˆ†æå’Œç»è¿‡éªŒè¯çš„ä¼˜åŒ–æ–¹æ¡ˆã€‚æ— è®ºä½ æ˜¯æ­£åœ¨å¤„ç†å¤§å‹æ•°æ®é›†çš„å·¥ç¨‹å¸ˆï¼Œè¿˜æ˜¯éœ€è¦ä¼˜åŒ–Webåº”ç”¨å“åº”æ—¶é—´çš„å¼€å‘è€…ï¼Œè¿™äº›å®æˆ˜ç»éªŒéƒ½èƒ½å¸®åŠ©ä½ å†™å‡ºæ›´é«˜æ•ˆçš„Pythonä»£ç ã€‚</p>
<hr/>
<h2 data-id="heading-2">é™·é˜±1ï¼šä¸å½“ä½¿ç”¨å­—ç¬¦ä¸²æ‹¼æ¥</h2>
<h3 data-id="heading-3">é—®é¢˜ç°è±¡</h3>
<p>åœ¨å¾ªç¯ä¸­ä½¿ç”¨<code>+</code>æ“ä½œç¬¦æ‹¼æ¥å­—ç¬¦ä¸²æ˜¯è®¸å¤šåˆå­¦è€…çš„å¸¸è§åšæ³•ï¼š</p>
<pre><code class="hljs language-python" lang="python">result = <span class="hljs-string">""</span>
<span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">10000</span>):
    result += <span class="hljs-built_in">str</span>(i)
</code></pre>
<h3 data-id="heading-4">ä¸ºä»€ä¹ˆæ…¢ï¼Ÿ</h3>
<ul>
<li>Pythonå­—ç¬¦ä¸²æ˜¯ä¸å¯å˜å¯¹è±¡ï¼Œæ¯æ¬¡<code>+=</code>éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡å¹¶å¤åˆ¶åŸå†…å®¹</li>
<li>æ—¶é—´å¤æ‚åº¦ä»O(n)æ¶åŒ–åˆ°O(nÂ²)ï¼Œå®æµ‹åœ¨10ä¸‡æ¬¡æ‹¼æ¥æ—¶æ¯”ä¼˜åŒ–æ–¹æ¡ˆæ…¢40å€</li>
</ul>
<h3 data-id="heading-5">è§£å†³æ–¹æ¡ˆ</h3>
<p>ä½¿ç”¨<code>.join()</code>æ–¹æ³•æˆ–IOç¼“å†²åŒºï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># æ–¹æ¡ˆ1ï¼šç›´æ¥ç”Ÿæˆåˆ—è¡¨åæ‹¼æ¥</span>
parts = []
<span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">10000</span>):
    parts.append(<span class="hljs-built_in">str</span>(i))
result = <span class="hljs-string">""</span>.join(parts)

<span class="hljs-comment"># æ–¹æ¡ˆ2ï¼šä½¿ç”¨io.StringIOï¼ˆé€‚ç”¨äºå¤æ‚åœºæ™¯ï¼‰</span>
<span class="hljs-keyword">from</span> io <span class="hljs-keyword">import</span> StringIO
buf = StringIO()
<span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">10000</span>):
    buf.write(<span class="hljs-built_in">str</span>(i))
result = buf.getvalue()
</code></pre>
<hr/>
<h2 data-id="heading-6">é™·é˜±2ï¼šé¢‘ç¹åˆ›å»ºå°å‹å¯¹è±¡</h2>
<h3 data-id="heading-7">é—®é¢˜ç°è±¡</h3>
<p>åœ¨çƒ­ç‚¹è·¯å¾„ä¸­é¢‘ç¹åˆ›å»ºå°å¯¹è±¡ï¼ˆå¦‚datetimeã€namedtupleï¼‰ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> datetime <span class="hljs-keyword">import</span> datetime

<span class="hljs-keyword">def</span> <span class="hljs-title function_">process_logs</span>(<span class="hljs-params">logs</span>):
    <span class="hljs-keyword">return</span> [datetime.strptime(log[<span class="hljs-string">'time'</span>], <span class="hljs-string">'%Y-%m-%d'</span>) <span class="hljs-keyword">for</span> log <span class="hljs-keyword">in</span> logs]
</code></pre>
<h3 data-id="heading-8">ä¸ºä»€ä¹ˆæ…¢ï¼Ÿ</h3>
<ul>
<li>Pythonå¯¹è±¡åˆ›å»ºéœ€è¦å†…å­˜åˆ†é…å’Œåˆå§‹åŒ–å¼€é”€</li>
<li>CPythonçš„åƒåœ¾å›æ”¶æœºåˆ¶ä¼šå¢åŠ é¢å¤–è´Ÿæ‹…</li>
</ul>
<h3 data-id="heading-9">è§£å†³æ–¹æ¡ˆ</h3>
<p>é‡‡ç”¨å¯¹è±¡æ± æˆ–ç¼“å­˜æ¨¡å¼ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> functools <span class="hljs-keyword">import</span> lru_cache

<span class="hljs-meta">@lru_cache(<span class="hljs-params">maxsize=<span class="hljs-number">256</span></span>)</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">parse_date</span>(<span class="hljs-params">date_str</span>):
    <span class="hljs-keyword">return</span> datetime.strptime(date_str, <span class="hljs-string">'%Y-%m-%d'</span>)

<span class="hljs-comment"># æˆ–è€…å¯¹å·²çŸ¥æœ‰é™é›†åˆé¢„å…ˆè®¡ç®—</span>
DATE_CACHE = {d: datetime.strptime(d, <span class="hljs-string">'%Y-%m-%d'</span>) 
              <span class="hljs-keyword">for</span> d <span class="hljs-keyword">in</span> <span class="hljs-built_in">set</span>(log[<span class="hljs-string">'time'</span>] <span class="hljs-keyword">for</span> log <span class="hljs-keyword">in</span> logs)}
</code></pre>
<hr/>
<h2 data-id="heading-10">é™·é˜±3ï¼šè¿‡åº¦ä¾èµ–Pythonå±‚å¾ªç¯</h2>
<h3 data-id="heading-11">é—®é¢˜ç°è±¡</h3>
<p>ç”¨çº¯Pythonå®ç°æ•°å€¼è®¡ç®—ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">calculate_pi</span>(<span class="hljs-params">n_terms</span>):
    numerator = <span class="hljs-number">4.0</span>
    denominator = <span class="hljs-number">1.0</span>
    operation = <span class="hljs-number">1.0</span>
    pi = <span class="hljs-number">0.0</span>
    <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n_terms):
        pi += operation * (numerator / denominator)
        denominator += <span class="hljs-number">2.0</span>
        operation *= -<span class="hljs-number">1.0</span>
    <span class="hljs-keyword">return</span> pi
</code></pre>
<h3 data-id="heading-12">ä¸ºä»€ä¹ˆæ…¢ï¼Ÿ</h3>
<ul>
<li>Pythonè§£é‡Šå™¨æ‰§è¡Œå­—èŠ‚ç çš„é€Ÿåº¦è¿œä½äºæœºå™¨åŸç”ŸæŒ‡ä»¤</li>
<li>CPythonçš„å…¨å±€è§£é‡Šå™¨é”(GIL)é™åˆ¶å¤šçº¿ç¨‹å¹¶è¡Œ</li>
</ul>
<h3 data-id="heading-13">è§£å†³æ–¹æ¡ˆ</h3>
<p>ä½¿ç”¨NumPyæˆ–Numbaè¿›è¡Œå‘é‡åŒ–è¿ç®—ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np

<span class="hljs-keyword">def</span> <span class="hljs-title function_">calculate_pi_vec</span>(<span class="hljs-params">n_terms</span>):
    k = np.arange(n_terms)
    <span class="hljs-keyword">return</span> np.<span class="hljs-built_in">sum</span>(<span class="hljs-number">4.0</span> * (-<span class="hljs-number">1</span>)**k / (<span class="hljs-number">2</span>*k + <span class="hljs-number">1</span>))

<span class="hljs-comment"># Numbaå³æ—¶ç¼–è¯‘ç‰ˆï¼ˆé¦–æ¬¡è¿è¡Œæœ‰ç¼–è¯‘å¼€é”€ï¼‰</span>
<span class="hljs-keyword">from</span> numba <span class="hljs-keyword">import</span> jit
<span class="hljs-meta">@jit(<span class="hljs-params">nopython=<span class="hljs-literal">True</span></span>)</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">calculate_pi_jit</span>(<span class="hljs-params">n_terms</span>): ... <span class="hljs-comment"># Same as original function</span>
</code></pre>
<hr/>
<h2 data-id="heading-14">é™·é˜±4ï¼šå¿½ç•¥å†…ç½®å‡½æ•°çš„é«˜æ•ˆå®ç°</h2>
<h3 data-id="heading-15">é—®é¢˜ç°è±¡</h3>
<p>æ‰‹åŠ¨å®ç°æœ¬å¯ç”¨å†…ç½®å‡½æ•°å®Œæˆçš„æ“ä½œï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># Case1: Filtering with explicit loop</span>
filtered = []
<span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> items:
    <span class="hljs-keyword">if</span> condition(x):
        filtered.append(x)

<span class="hljs-comment"># Case2: Custom max implementation </span>
max_val = items[<span class="hljs-number">0</span>]
<span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> items[<span class="hljs-number">1</span>:]:
    <span class="hljs-keyword">if</span> x &gt; max_val:
        max_val = x 
</code></pre>
<h3 data-id="heading-16">ä¸ºä»€ä¹ˆæ…¢ï¼Ÿ</h3>
<ul>
<li>CPythonçš„å†…ç½®å‡½æ•°æ˜¯ç”¨Cå®ç°çš„ï¼ˆå¦‚<code>filter()</code>ã€<code>max()</code>ï¼‰</li>
<li>Pythonå±‚é¢çš„å¾ªç¯æœ‰è§£é‡Šå™¨å¼€é”€</li>
</ul>
<h3 data-id="heading-17">Solutions:</h3>
<p>Always prefer builtins when possible:</p>
<pre><code class="hljs language-python" lang="python">filtered = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">filter</span>(condition, items)) 
<span class="hljs-comment"># Or generator expression:</span>
filtered = (x <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> items <span class="hljs-keyword">if</span> condition(x))

max_val = <span class="hljs-built_in">max</span>(items) <span class="hljs-comment"># Also works with key function </span>
</code></pre>
<hr/>
<h2 data-id="heading-18">Trap5: Unnecessary Data Copies</h2>
<h3 data-id="heading-19">Problem Pattern</h3>
<p>Creating intermediate copies without awareness:</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">normalize_matrix</span>(<span class="hljs-params">mat</span>):
    row_sums = [<span class="hljs-built_in">sum</span>(row) <span class="hljs-keyword">for</span> row <span class="hljs-keyword">in</span> mat]      <span class="hljs-comment"># First pass </span>
    <span class="hljs-keyword">return</span> [[val/sum_ <span class="hljs-keyword">for</span> val <span class="hljs-keyword">in</span> row]         <span class="hljs-comment"># Second pass   </span>
            <span class="hljs-keyword">for</span> row, sum_ <span class="hljs-keyword">in</span> <span class="hljs-built_in">zip</span>(mat, row_sums)]
            
<span class="hljs-comment"># Even worse with slicing:</span>
new_list = original_list[:]   <span class="hljs-comment"># Full shallow copy </span>
</code></pre>
<h3 data-id="heading-20">Why Slow?</h3>
<ul>
<li>Memory allocation and copying overhead grows linearly with data size</li>
<li>Cache locality suffers due to multiple passes</li>
</ul>
<h3 data-id="heading-21">Optimization Strategies:</h3>
<p>Use generators/views instead of materialized copies:</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># Single-pass iterator version </span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">normalize_matrix</span>(<span class="hljs-params">mat</span>):
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">normalized_rows</span>():
        <span class="hljs-keyword">for</span> row <span class="hljs-keyword">in</span> mat:
            sum_ = <span class="hljs-built_in">sum</span>(row)
            <span class="hljs-keyword">yield</span> [val/sum_ <span class="hljs-keyword">for</span> val <span class="hljs-keyword">in</span> row]
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">list</span>(normalized_rows())

<span class="hljs-comment"># For numpy arrays use views instead of copies:</span>
arr[:, :<span class="hljs-number">10</span>]   <span class="hljs-comment"># This creates a view, not a copy </span>
</code></pre>
<hr/>
<h2 data-id="heading-22">Conclusion</h2>
<p>Performance optimization in Python requires understanding both the language's abstractions and its underlying implementation details. The five traps we've examined share common themes:</p>
<ol>
<li>Leveraging Python's C-based builtins instead of pure-Python loops</li>
<li>Minimizing object creation overhead through caching/reuse</li>
<li>Avoiding unnecessary data duplication</li>
<li>Utilizing vectorized operations where applicable</li>
</ol>
<p>The key insight is that <strong>idiomatic Python isn't always performant Python</strong>. By combining these techniques with profiling tools like cProfile and line_profiler, you can systematically eliminate bottlenecks while maintaining code readability.</p>
<p>Remember that not all code needs optimization - focus on hotspots identified through profiling to get maximum returns from your efforts. When done correctly, these optimizations can yield speedups of <strong>300% or more</strong> with minimal code changes.</p>
<p>Ultimately, writing high-performance Python is about working with the language's strengths rather than against them - using compiled extensions when necessary, embracing generators and views for memory efficiency, and letting well-optimized libraries handle heavy lifting wherever possible.</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€èŠ‚ç‚¹ã€‘[NormalBlendèŠ‚ç‚¹]åŸç†è§£æä¸å®é™…åº”ç”¨]]></title>    <link>https://juejin.cn/post/7588086766235861030</link>    <guid>https://juejin.cn/post/7588086766235861030</guid>    <pubDate>2025-12-27T00:29:34.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588086766235861030" data-draft-id="7588031908171137033" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€èŠ‚ç‚¹ã€‘[NormalBlendèŠ‚ç‚¹]åŸç†è§£æä¸å®é™…åº”ç”¨"/> <meta itemprop="keywords" content="æ¸¸æˆå¼€å‘,å›¾å½¢å­¦,Unity3D"/> <meta itemprop="datePublished" content="2025-12-27T00:29:34.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="SmalBox"/> <meta itemprop="url" content="https://juejin.cn/user/2218166695237532"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€èŠ‚ç‚¹ã€‘[NormalBlendèŠ‚ç‚¹]åŸç†è§£æä¸å®é™…åº”ç”¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2218166695237532/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    SmalBox
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-27T00:29:34.000Z" title="Sat Dec 27 2025 00:29:34 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.csdn.net%2Fchenghai37%2Fcategory_13074589.html%3Ffromshare%3Dblogcolumn%26sharetype%3Dblogcolumn%26sharerId%3D13074589%26sharerefer%3DPC%26sharesource%3Dchenghai37%26sharefrom%3Dfrom_link" target="_blank" title="https://blog.csdn.net/chenghai37/category_13074589.html?fromshare=blogcolumn&amp;sharetype=blogcolumn&amp;sharerId=13074589&amp;sharerefer=PC&amp;sharesource=chenghai37&amp;sharefrom=from_link" ref="nofollow noopener noreferrer">ã€Unity Shader Graph ä½¿ç”¨ä¸ç‰¹æ•ˆå®ç°ã€‘</a><strong>ä¸“æ -ç›´è¾¾</strong></p>
</blockquote>
<h2 data-id="heading-0">æ³•çº¿æ··åˆæŠ€æœ¯æ¦‚è¿°</h2>
<p>åœ¨å®æ—¶æ¸²æŸ“ä¸­ï¼Œæ³•çº¿è´´å›¾æ··åˆæ˜¯å¢å¼ºè¡¨é¢ç»†èŠ‚è¡¨ç°çš„é‡è¦æŠ€æœ¯ã€‚Unity URPç®¡çº¿å†…ç½®çš„NormalBlendèŠ‚ç‚¹é€šè¿‡æ•°å­¦è¿ç®—å®ç°ä¸¤å¼ æ³•çº¿è´´å›¾çš„å¹³æ»‘è¿‡æ¸¡ï¼ŒåŒæ—¶ç¡®ä¿æ³•çº¿å‘é‡çš„ç‰©ç†æ­£ç¡®æ€§ã€‚è¯¥æŠ€æœ¯å¹¿æ³›åº”ç”¨äºè§’è‰²è£…å¤‡åˆ‡æ¢ã€åœ°å½¢æè´¨èåˆã€åŠ¨æ€å½¢å˜æ•ˆæœç­‰åœºæ™¯ï¼Œæ˜¯ç°ä»£æ¸¸æˆå¼€å‘ä¸­ä¸å¯æˆ–ç¼ºçš„æè´¨å¤„ç†å·¥å…·ã€‚</p>
<h2 data-id="heading-1">èŠ‚ç‚¹æ ¸å¿ƒåŠŸèƒ½è§£æ</h2>
<h3 data-id="heading-2">æ··åˆæ¨¡å¼é€‰æ‹©</h3>
<p>NormalBlendèŠ‚ç‚¹æä¾›ä¸¤ç§æ··åˆç®—æ³•ï¼š</p>
<ol>
<li><strong>Defaultæ¨¡å¼</strong>ï¼šé‡‡ç”¨åˆ†é‡æ··åˆç­–ç•¥ï¼Œå¯¹æ³•çº¿è´´å›¾çš„RGé€šé“è¿›è¡ŒåŠ æ³•æ··åˆï¼ŒBé€šé“è¿›è¡Œä¹˜æ³•æ··åˆï¼Œæœ€åé€šè¿‡æ ‡å‡†åŒ–å¤„ç†ç¡®ä¿è¾“å‡ºä¸ºå•ä½å‘é‡ã€‚é€‚ç”¨äºç®€å•è¡¨é¢ç»†èŠ‚çš„å åŠ ï¼Œä¾‹å¦‚è§’è‰²è£…å¤‡çº¹ç†çš„æ··åˆã€‚</li>
<li><strong>Reorientedæ¨¡å¼</strong>ï¼šé€šè¿‡é‡æ–°å®šå‘ç®—æ³•ç»´æŒæ³•çº¿æ–¹å‘ä¸€è‡´æ€§ï¼Œé‡‡ç”¨é½æ¬¡åæ ‡ç³»è½¬æ¢ä¸å‘é‡æŠ•å½±è®¡ç®—ï¼Œç¡®ä¿æ··åˆç»“æœç¬¦åˆç‰©ç†å…‰ç…§æ¨¡å‹ã€‚é€‚ç”¨äºå¤æ‚è¡¨é¢å¤„ç†ï¼Œå¦‚å¸ƒæ–™æ¨¡æ‹Ÿä¸åŠ¨æ€å½¢å˜æ•ˆæœã€‚</li>
</ol>
<h3 data-id="heading-3">ç«¯å£ä¸å‚æ•°é…ç½®</h3>
<p><img src="https://docs.unity.cn/cn/Packages-cn/com.unity.shadergraph@14.0/manual/images/NormalBlendNodeThumb.png" alt="" loading="lazy"/></p>
<ul>
<li><strong>è¾“å…¥ç«¯å£</strong>ï¼š
<ul>
<li>Aï¼šæ¥æ”¶ç¬¬ä¸€å¼ æ³•çº¿è´´å›¾æ•°æ®ï¼ˆVector3ç±»å‹ï¼‰</li>
<li>Bï¼šæ¥æ”¶ç¬¬äºŒå¼ æ³•çº¿è´´å›¾æ•°æ®ï¼ˆVector3ç±»å‹ï¼‰</li>
</ul>
</li>
<li><strong>è¾“å‡ºç«¯å£</strong>ï¼š
<ul>
<li>Outï¼šè¾“å‡ºæ··åˆåçš„æ ‡å‡†åŒ–æ³•çº¿å‘é‡ï¼ˆVector3ç±»å‹ï¼‰</li>
</ul>
</li>
<li><strong>æ§ä»¶å‚æ•°</strong>ï¼š
<ul>
<li>Modeï¼šæ··åˆæ¨¡å¼é€‰æ‹©å™¨ï¼ˆDefault/Reorientedï¼‰</li>
</ul>
</li>
</ul>
<h2 data-id="heading-4">æŠ€æœ¯å®ç°åŸç†</h2>
<h3 data-id="heading-5">æ³•çº¿æ··åˆæ•°å­¦åŸºç¡€</h3>
<p>æ³•çº¿å‘é‡æ˜¯è¡¨ç¤ºè¡¨é¢æœå‘çš„æ•°å­¦å®ä½“ï¼Œå…¶æ ¸å¿ƒå±æ€§åŒ…æ‹¬ï¼š</p>
<ul>
<li>å•ä½å‘é‡æ€§è´¨ï¼šé•¿åº¦å¿…é¡»ä¿æŒä¸º1</li>
<li>æ’å€¼ç‰¹æ€§ï¼šåœ¨ç‰‡æ®µç€è‰²å™¨ä¸­ç”±é¡¶ç‚¹æ³•çº¿æ’å€¼è·å¾—</li>
<li>ç©ºé—´è½¬æ¢ï¼šå¯é€šè¿‡çŸ©é˜µè¿ç®—åœ¨ä¸åŒåæ ‡ç³»é—´è½¬æ¢</li>
</ul>
<h3 data-id="heading-6">æ ‡å‡†åŒ–å¤„ç†æµç¨‹</h3>
<p>æ··åˆåçš„æ³•çº¿å‘é‡å¿…é¡»ç»è¿‡æ ‡å‡†åŒ–å¤„ç†ï¼Œä»¥ç¡®ä¿ï¼š</p>
<ol>
<li>å…‰ç…§è®¡ç®—çš„å‡†ç¡®æ€§</li>
<li>é˜´å½±ç”Ÿæˆçš„æ­£ç¡®æ€§</li>
<li>è¡¨é¢äº¤äº’çš„çœŸå®æ€§</li>
</ol>
<h3 data-id="heading-7">åæ ‡ç©ºé—´è½¬æ¢æœºåˆ¶</h3>
<p>NormalBlendèŠ‚ç‚¹è‡ªåŠ¨å¤„ç†åˆ‡çº¿ç©ºé—´åˆ°ä¸–ç•Œç©ºé—´çš„è½¬æ¢ï¼š</p>
<ul>
<li>è¾“å…¥æ³•çº¿é»˜è®¤ä¸ºåˆ‡çº¿ç©ºé—´åæ ‡</li>
<li>è¾“å‡ºæ³•çº¿æ ¹æ®æè´¨è®¾ç½®è‡ªåŠ¨è½¬æ¢è‡³ç›®æ ‡ç©ºé—´</li>
<li>æ”¯æŒå¯¹è±¡ç©ºé—´ã€è§†å›¾ç©ºé—´ã€ä¸–ç•Œç©ºé—´å’Œåˆ‡çº¿ç©ºé—´è¾“å‡º</li>
</ul>
<h2 data-id="heading-8">å…¸å‹åº”ç”¨åœºæ™¯ä¸å®ç°</h2>
<h3 data-id="heading-9">è§’è‰²è£…å¤‡æ³•çº¿æ··åˆ</h3>
<p><strong>å®ç°æ­¥éª¤</strong>ï¼š</p>
<ol>
<li>å‡†å¤‡è§’è‰²åŸºç¡€æ³•çº¿è´´å›¾ï¼ˆAï¼‰</li>
<li>å‡†å¤‡è£…å¤‡æ³•çº¿è´´å›¾ï¼ˆBï¼‰</li>
<li>ä½¿ç”¨Defaultæ¨¡å¼è¿›è¡Œæ··åˆ</li>
<li>é€šè¿‡æè´¨å‚æ•°æ§åˆ¶æ··åˆå¼ºåº¦</li>
</ol>
<p><strong>ä¼˜åŒ–æŠ€å·§</strong>ï¼š</p>
<ul>
<li>ä½¿ç”¨çº¹ç†é‡‡æ ·èŠ‚ç‚¹æ§åˆ¶æ··åˆåŒºåŸŸ</li>
<li>ç»“åˆé®ç½©è´´å›¾å®ç°éå‡åŒ€æ··åˆ</li>
<li>åœ¨å…³é”®åŒºåŸŸé‡‡ç”¨Reorientedæ¨¡å¼ç»´æŒæ–¹å‘ä¸€è‡´æ€§</li>
</ul>
<h3 data-id="heading-10">åœ°å½¢æ³•çº¿æ··åˆ</h3>
<p><strong>å®ç°æ­¥éª¤</strong>ï¼š</p>
<ol>
<li>å‡†å¤‡ä¸¤ç§åœ°å½¢æè´¨æ³•çº¿è´´å›¾ï¼ˆAå’ŒBï¼‰</li>
<li>åˆ›å»ºæ··åˆé®ç½©çº¹ç†</li>
<li>æ ¹æ®é®ç½©å€¼åŠ¨æ€è°ƒæ•´æ··åˆæ¯”ä¾‹</li>
<li>ä½¿ç”¨Reorientedæ¨¡å¼å¤„ç†å¤æ‚è¿‡æ¸¡</li>
</ol>
<p><strong>ä¼˜åŒ–æŠ€å·§</strong>ï¼š</p>
<ul>
<li>ä½¿ç”¨æ¸å˜çº¹ç†æ§åˆ¶æ··åˆåŒºåŸŸ</li>
<li>ç»“åˆé«˜åº¦å›¾å®ç°ç‰©ç†æ­£ç¡®çš„æ··åˆ</li>
<li>åœ¨æ–œå¡åŒºåŸŸå¢å¼ºæ··åˆå¼ºåº¦</li>
</ul>
<h3 data-id="heading-11">åŠ¨æ€å˜å½¢æ³•çº¿å¤„ç†</h3>
<p><strong>å®ç°æ­¥éª¤</strong>ï¼š</p>
<ol>
<li>å‡†å¤‡åŸºç¡€æ³•çº¿è´´å›¾ï¼ˆAï¼‰</li>
<li>å‡†å¤‡å˜å½¢å½±å“æ³•çº¿è´´å›¾ï¼ˆBï¼‰</li>
<li>æ ¹æ®å˜å½¢å‚æ•°åŠ¨æ€è°ƒæ•´æ··åˆå¼ºåº¦</li>
<li>ä½¿ç”¨Reorientedæ¨¡å¼ä¿æŒæ–¹å‘ä¸€è‡´æ€§</li>
</ol>
<p><strong>ä¼˜åŒ–æŠ€å·§</strong>ï¼š</p>
<ul>
<li>ç»“åˆé¡¶ç‚¹åŠ¨ç”»å‚æ•°æ§åˆ¶æ··åˆ</li>
<li>ä½¿ç”¨å™ªå£°çº¹ç†ä¸°å¯Œç»†èŠ‚</li>
<li>åœ¨å½¢å˜å‰§çƒˆåŒºåŸŸå¢åŠ æ··åˆå¼ºåº¦</li>
</ul>
<h2 data-id="heading-12">æ€§èƒ½ä¼˜åŒ–ç­–ç•¥</h2>
<h3 data-id="heading-13">æ¨¡å¼é€‰æ‹©ä¼˜åŒ–</h3>
<ul>
<li>ä¼˜å…ˆä½¿ç”¨Defaultæ¨¡å¼ï¼šæ€§èƒ½å¼€é”€è¾ƒå°ï¼Œé€‚åˆç®€å•æ··åˆ</li>
<li>å¤æ‚è¡¨é¢ä½¿ç”¨Reorientedæ¨¡å¼ï¼šç»´æŒæ–¹å‘ä¸€è‡´æ€§</li>
<li>æ··åˆå¼ºåº¦æ§åˆ¶ï¼šé€šè¿‡æè´¨å‚æ•°æˆ–é®ç½©è´´å›¾åŠ¨æ€è°ƒæ•´</li>
</ul>
<h3 data-id="heading-14">è®¡ç®—èµ„æºä¼˜åŒ–</h3>
<ul>
<li>é™åˆ¶æ··åˆåŒºåŸŸï¼šä½¿ç”¨é®ç½©è´´å›¾çº¦æŸæ··åˆèŒƒå›´</li>
<li>ç®€åŒ–æ··åˆæ¨¡å¼ï¼šåœ¨éå…³é”®åŒºåŸŸé‡‡ç”¨Defaultæ¨¡å¼</li>
<li>é¢„è®¡ç®—æ··åˆï¼šåœ¨æè´¨ç¼–è¾‘å™¨ä¸­é¢„å…ˆè®¡ç®—éƒ¨åˆ†ç»“æœ</li>
</ul>
<h3 data-id="heading-15">å¹³å°å…¼å®¹æ€§ä¼˜åŒ–</h3>
<ul>
<li>URPä¸HDRPå·®å¼‚ï¼šURPé‡‡ç”¨ç®€åŒ–å…‰ç…§æ¨¡å‹ï¼ŒHDRPæ”¯æŒç‰©ç†ç²¾ç¡®æè´¨</li>
<li>ç‰ˆæœ¬å…¼å®¹æ€§ï¼šä¸åŒUnityç‰ˆæœ¬å¯¹ShaderGraphèŠ‚ç‚¹çš„æ”¯æŒå¯èƒ½å­˜åœ¨å·®å¼‚</li>
<li>ç›®æ ‡å¹³å°ï¼šç§»åŠ¨ç«¯ä¼˜å…ˆé€‰ç”¨Defaultæ¨¡å¼ä»¥é™ä½è®¡ç®—é‡</li>
</ul>
<h2 data-id="heading-16">å¸¸è§é—®é¢˜è§£å†³æ–¹æ¡ˆ</h2>
<h3 data-id="heading-17">æ··åˆåå‡ºç°ä¼ªå½±</h3>
<p><strong>åŸå› </strong>ï¼š</p>
<ul>
<li>æ··åˆåŒºåŸŸè¾¹ç•Œå¤„ç†ä¸å½“</li>
<li>æ³•çº¿æ–¹å‘ä¸ä¸€è‡´</li>
<li>æ··åˆå¼ºåº¦è¿‡é«˜</li>
</ul>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<ul>
<li>ä½¿ç”¨é®ç½©è´´å›¾å¹³æ»‘è¿‡æ¸¡</li>
<li>åœ¨å…³é”®åŒºåŸŸåˆ‡æ¢è‡³Reorientedæ¨¡å¼</li>
<li>é™ä½æ··åˆå¼ºåº¦æˆ–æ‰©å±•æ··åˆåŒºåŸŸ</li>
</ul>
<h3 data-id="heading-18">æ€§èƒ½ä¸‹é™æ˜æ˜¾</h3>
<p><strong>åŸå› </strong>ï¼š</p>
<ul>
<li>æ··åˆåŒºåŸŸè¿‡å¤§</li>
<li>é‡‡ç”¨å¤æ‚æ··åˆæ¨¡å¼</li>
<li>åœ¨ç§»åŠ¨ç«¯ä½¿ç”¨é«˜ç²¾åº¦æ··åˆ</li>
</ul>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<ul>
<li>ç¼©å°æ··åˆåŒºåŸŸ</li>
<li>åœ¨éå…³é”®åŒºåŸŸä½¿ç”¨Defaultæ¨¡å¼</li>
<li>é’ˆå¯¹ç§»åŠ¨ç«¯ä¼˜åŒ–æ··åˆå‚æ•°</li>
</ul>
<h3 data-id="heading-19">å…‰ç…§è¡¨ç°å¼‚å¸¸</h3>
<p><strong>åŸå› </strong>ï¼š</p>
<ul>
<li>æ··åˆåæ³•çº¿æœªæ­£ç¡®æ ‡å‡†åŒ–</li>
<li>æ··åˆæ¨¡å¼é€‰æ‹©ä¸å½“</li>
<li>æ³•çº¿è´´å›¾æ ¼å¼æœ‰è¯¯</li>
</ul>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<ul>
<li>ç¡®ä¿è¾“å‡ºæ³•çº¿ç»è¿‡æ ‡å‡†åŒ–å¤„ç†</li>
<li>æ ¹æ®è¡¨é¢å¤æ‚åº¦é€‰æ‹©åˆé€‚çš„æ··åˆæ¨¡å¼</li>
<li>æ£€æŸ¥æ³•çº¿è´´å›¾æ ¼å¼ä¸ç”Ÿæˆæ–¹å¼</li>
</ul>
<h2 data-id="heading-20">è¿›é˜¶åº”ç”¨æ¡ˆä¾‹</h2>
<h3 data-id="heading-21">å¤šå±‚çº§æ³•çº¿æ··åˆ</h3>
<p><strong>å®ç°æ–¹æ³•</strong>ï¼š</p>
<ol>
<li>æ„å»ºå¤šä¸ªæ··åˆå±‚çº§</li>
<li>ä½¿ç”¨é®ç½©è´´å›¾æ§åˆ¶å„å±‚çº§æ··åˆåŒºåŸŸ</li>
<li>é€å±‚æ··åˆæ³•çº¿è´´å›¾</li>
</ol>
<p><strong>ä¼˜åŠ¿</strong>ï¼š</p>
<ul>
<li>å®ç°æ›´å¤æ‚çš„è¡¨é¢ç»†èŠ‚</li>
<li>å¯è°ƒæ§ä¸åŒåŒºåŸŸçš„æ··åˆå¼ºåº¦</li>
<li>æå‡æè´¨è¡¨ç°åŠ›</li>
</ul>
<h3 data-id="heading-22">åŠ¨æ€æ³•çº¿æ··åˆç³»ç»Ÿ</h3>
<p><strong>å®ç°æ–¹æ³•</strong>ï¼š</p>
<ol>
<li>ä¾æ®åŠ¨ç”»å‚æ•°åŠ¨æ€è°ƒæ•´æ··åˆå¼ºåº¦</li>
<li>ä½¿ç”¨å™ªå£°çº¹ç†å¢æ·»åŠ¨æ€ç»†èŠ‚</li>
<li>ç»“åˆé¡¶ç‚¹åŠ¨ç”»å®ç°ç‰©ç†æ­£ç¡®çš„æ··åˆ</li>
</ol>
<p><strong>åº”ç”¨åœºæ™¯</strong>ï¼š</p>
<ul>
<li>è§’è‰²è¡¨æƒ…å˜åŒ–</li>
<li>å¸ƒæ–™æ¨¡æ‹Ÿ</li>
<li>åŠ¨æ€ç¯å¢ƒå˜åŒ–</li>
</ul>
<h3 data-id="heading-23">æè´¨ç³»ç»Ÿé›†æˆæ–¹æ¡ˆ</h3>
<p><strong>å®ç°æ–¹æ³•</strong>ï¼š</p>
<ol>
<li>å°†æ··åˆå‚æ•°æš´éœ²ç»™æè´¨ç³»ç»Ÿ</li>
<li>åˆ›å»ºæè´¨å‚æ•°é›†åˆä»¥æ§åˆ¶æ··åˆè¡Œä¸º</li>
<li>å®ç°åŠ¨æ€æè´¨åˆ‡æ¢</li>
</ol>
<p><strong>ä¼˜åŠ¿</strong>ï¼š</p>
<ul>
<li>å¢å¼ºæè´¨ç³»ç»Ÿçš„çµæ´»æ€§</li>
<li>æ”¯æŒè¿è¡Œæ—¶åŠ¨æ€è°ƒæ•´</li>
<li>ç®€åŒ–ç¾æœ¯å·¥ä½œæµç¨‹</li>
</ul>
<h2 data-id="heading-24">æœ€ä½³å®è·µæ€»ç»“</h2>
<ol>
<li><strong>æ¨¡å¼é€‰æ‹©åŸåˆ™</strong>ï¼šç®€å•è¡¨é¢ä½¿ç”¨Defaultæ¨¡å¼ï¼Œå¤æ‚è¡¨é¢ä½¿ç”¨Reorientedæ¨¡å¼</li>
<li><strong>æ€§èƒ½ä¼˜åŒ–ä¼˜å…ˆçº§</strong>ï¼šç§»åŠ¨ç«¯ä¼˜å…ˆè€ƒè™‘æ€§èƒ½ï¼ŒPCç«¯å¯é€‚åº¦å¢åŠ ç»†èŠ‚</li>
<li><strong>è´¨é‡ä¿éšœæªæ–½</strong>ï¼šä½¿ç”¨æ ‡å‡†åŒ–å·¥å…·éªŒè¯æ··åˆç»“æœï¼Œç¡®ä¿æ³•çº¿æ–¹å‘æ­£ç¡®</li>
<li><strong>è¿­ä»£å¼€å‘æµç¨‹</strong>ï¼šä»ç®€å•æ··åˆèµ·æ­¥ï¼Œé€æ­¥æå‡å¤æ‚åº¦ï¼Œå¹¶æŒç»­éªŒè¯æ•ˆæœ</li>
</ol>
<hr/>
<blockquote>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.csdn.net%2Fchenghai37%2Fcategory_13074589.html%3Ffromshare%3Dblogcolumn%26sharetype%3Dblogcolumn%26sharerId%3D13074589%26sharerefer%3DPC%26sharesource%3Dchenghai37%26sharefrom%3Dfrom_link" target="_blank" title="https://blog.csdn.net/chenghai37/category_13074589.html?fromshare=blogcolumn&amp;sharetype=blogcolumn&amp;sharerId=13074589&amp;sharerefer=PC&amp;sharesource=chenghai37&amp;sharefrom=from_link" ref="nofollow noopener noreferrer">ã€Unity Shader Graph ä½¿ç”¨ä¸ç‰¹æ•ˆå®ç°ã€‘</a><strong>ä¸“æ -ç›´è¾¾</strong>
ï¼ˆæ¬¢è¿<em>ç‚¹èµç•™è¨€</em>æ¢è®¨ï¼Œæ›´å¤šäººåŠ å…¥è¿›æ¥èƒ½æ›´åŠ å®Œå–„è¿™ä¸ªæ¢ç´¢çš„è¿‡ç¨‹ï¼ŒğŸ™ï¼‰</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Hibernateï¼ˆ5ï¼‰ä»€ä¹ˆæ˜¯Hibernateçš„é…ç½®æ–‡ä»¶ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7588064253634953270</link>    <guid>https://juejin.cn/post/7588064253634953270</guid>    <pubDate>2025-12-26T23:05:10.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588064253634953270" data-draft-id="7588001624905695251" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Hibernateï¼ˆ5ï¼‰ä»€ä¹ˆæ˜¯Hibernateçš„é…ç½®æ–‡ä»¶ï¼Ÿ"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-26T23:05:10.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Victor356"/> <meta itemprop="url" content="https://juejin.cn/user/3492507879476878"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Hibernateï¼ˆ5ï¼‰ä»€ä¹ˆæ˜¯Hibernateçš„é…ç½®æ–‡ä»¶ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3492507879476878/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Victor356
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-26T23:05:10.000Z" title="Fri Dec 26 2025 23:05:10 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>Hibernateçš„é…ç½®æ–‡ä»¶æ˜¯ç”¨äºå®šä¹‰Hibernateçš„å„ç§é…ç½®å‚æ•°çš„æ–‡ä»¶ï¼ŒåŒ…æ‹¬æ•°æ®åº“è¿æ¥ä¿¡æ¯ã€Hibernateå±æ€§ã€æ˜ å°„èµ„æºã€ç¼“å­˜é…ç½®ç­‰ã€‚Hibernateä¸»è¦ä½¿ç”¨ä¸¤ç§é…ç½®æ–‡ä»¶ï¼š</p>
<ol>
<li><strong><code>hibernate.cfg.xml</code></strong>ï¼šXMLæ ¼å¼çš„é…ç½®æ–‡ä»¶ã€‚</li>
<li><strong><code>hibernate.properties</code></strong>ï¼šå±æ€§æ ¼å¼çš„é…ç½®æ–‡ä»¶ã€‚</li>
</ol>
<h3 data-id="heading-0">1. <code>hibernate.cfg.xml</code> é…ç½®æ–‡ä»¶</h3>
<p><code>hibernate.cfg.xml</code> æ˜¯ä¸€ä¸ªXMLæ ¼å¼çš„é…ç½®æ–‡ä»¶ï¼Œç”¨äºå®šä¹‰Hibernateçš„å„ç§é…ç½®å‚æ•°ï¼ŒåŒ…æ‹¬æ•°æ®åº“è¿æ¥ä¿¡æ¯ã€Hibernateå±æ€§é…ç½®ã€æ˜ å°„èµ„æºç­‰ã€‚å®ƒæ˜¯Hibernateé…ç½®ä¸­æœ€å¸¸ç”¨çš„æ–‡ä»¶ã€‚</p>
<h4 data-id="heading-1">ä¸»è¦åŠŸèƒ½ï¼š</h4>
<ul>
<li>é…ç½®æ•°æ®åº“è¿æ¥å±æ€§ã€‚</li>
<li>é…ç½®Hibernateç›¸å…³å±æ€§ï¼ˆå¦‚æ–¹è¨€ã€ç¼“å­˜ã€æ—¥å¿—ç­‰ï¼‰ã€‚</li>
<li>é…ç½®å®ä½“ç±»çš„æ˜ å°„ä¿¡æ¯ã€‚</li>
</ul>
<h4 data-id="heading-2">ç¤ºä¾‹ï¼š</h4>
<p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªè¯¦ç»†çš„<code>hibernate.cfg.xml</code>æ–‡ä»¶ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">hibernate-configuration</span> <span class="hljs-keyword">PUBLIC</span>
        <span class="hljs-string">"-//Hibernate/Hibernate Configuration DTD 3.0//EN"</span>
        <span class="hljs-string">"http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">hibernate-configuration</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">session-factory</span>&gt;</span>

        <span class="hljs-comment">&lt;!-- æ•°æ®åº“è¿æ¥é…ç½® --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.connection.driver_class"</span>&gt;</span>com.mysql.cj.jdbc.Driver<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.connection.url"</span>&gt;</span>jdbc:mysql://localhost:3306/your_database<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.connection.username"</span>&gt;</span>your_username<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.connection.password"</span>&gt;</span>your_password<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>

        <span class="hljs-comment">&lt;!-- Hibernate å±æ€§é…ç½® --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.dialect"</span>&gt;</span>org.hibernate.dialect.MySQLDialect<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.show_sql"</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.format_sql"</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.hbm2ddl.auto"</span>&gt;</span>update<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>

        <span class="hljs-comment">&lt;!-- äºŒçº§ç¼“å­˜é…ç½® --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.cache.use_second_level_cache"</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.cache.region.factory_class"</span>&gt;</span>org.hibernate.cache.ehcache.EhCacheRegionFactory<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>

        <span class="hljs-comment">&lt;!-- æŸ¥è¯¢ç¼“å­˜é…ç½® --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.cache.use_query_cache"</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>

        <span class="hljs-comment">&lt;!-- è¿æ¥æ± é…ç½® --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.c3p0.min_size"</span>&gt;</span>5<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.c3p0.max_size"</span>&gt;</span>20<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.c3p0.timeout"</span>&gt;</span>300<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.c3p0.max_statements"</span>&gt;</span>50<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.c3p0.idle_test_period"</span>&gt;</span>3000<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>

        <span class="hljs-comment">&lt;!-- æ˜ å°„ç±»é…ç½® --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">mapping</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"com.example.domain.Student"</span>/&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">mapping</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"com.example.domain.Course"</span>/&gt;</span>

    <span class="hljs-tag">&lt;/<span class="hljs-name">session-factory</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">hibernate-configuration</span>&gt;</span>
</code></pre>
<h4 data-id="heading-3">è¯¦ç»†è¯´æ˜ï¼š</h4>
<ul>
<li><strong>æ•°æ®åº“è¿æ¥é…ç½®</strong>ï¼šå®šä¹‰äº†å¦‚ä½•è¿æ¥æ•°æ®åº“ï¼ŒåŒ…æ‹¬æ•°æ®åº“é©±åŠ¨ç±»ã€URLã€ç”¨æˆ·åå’Œå¯†ç ã€‚</li>
<li><strong>Hibernateå±æ€§é…ç½®</strong>ï¼šé…ç½®Hibernateçš„è¡Œä¸ºï¼ŒåŒ…æ‹¬SQLæ–¹è¨€ã€æ˜¯å¦æ˜¾ç¤ºSQLã€SQLæ ¼å¼åŒ–é€‰é¡¹ç­‰ã€‚</li>
<li><strong>äºŒçº§ç¼“å­˜é…ç½®</strong>ï¼šå¯ç”¨äºŒçº§ç¼“å­˜å¹¶æŒ‡å®šç¼“å­˜çš„å®ç°ã€‚</li>
<li><strong>æŸ¥è¯¢ç¼“å­˜é…ç½®</strong>ï¼šå¯ç”¨æŸ¥è¯¢ç¼“å­˜ã€‚</li>
<li><strong>è¿æ¥æ± é…ç½®</strong>ï¼šé…ç½®è¿æ¥æ± çš„è¡Œä¸ºï¼Œå¦‚æœ€å°è¿æ¥æ•°ã€æœ€å¤§è¿æ¥æ•°ã€è¶…æ—¶æ—¶é—´ç­‰ã€‚</li>
<li><strong>æ˜ å°„ç±»é…ç½®</strong>ï¼šæŒ‡å®šHibernateéœ€è¦ç®¡ç†çš„å®ä½“ç±»ã€‚</li>
</ul>
<h3 data-id="heading-4">2. <code>hibernate.properties</code> é…ç½®æ–‡ä»¶</h3>
<p><code>hibernate.properties</code> æ˜¯ä¸€ä¸ªå±æ€§æ–‡ä»¶æ ¼å¼çš„é…ç½®æ–‡ä»¶ï¼Œç”¨äºå®šä¹‰Hibernateçš„å„ç§é…ç½®å‚æ•°ã€‚å®ƒçš„å†…å®¹ç›¸å¯¹ç®€å•ç›´æ¥ï¼Œä½†ä¸å¦‚XMLæ ¼å¼çš„é…ç½®æ–‡ä»¶ç»“æ„åŒ–å’Œå¯è¯»æ€§å¼ºã€‚</p>
<h4 data-id="heading-5">ç¤ºä¾‹ï¼š</h4>
<p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªè¯¦ç»†çš„<code>hibernate.properties</code>æ–‡ä»¶ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-properties" lang="properties"># æ•°æ®åº“è¿æ¥é…ç½®
hibernate.connection.driver_class = com.mysql.cj.jdbc.Driver
hibernate.connection.url = jdbc:mysql://localhost:3306/your_database
hibernate.connection.username = your_username
hibernate.connection.password = your_password

# Hibernate å±æ€§é…ç½®
hibernate.dialect = org.hibernate.dialect.MySQLDialect
hibernate.show_sql = true
hibernate.format_sql = true
hibernate.hbm2ddl.auto = update

# äºŒçº§ç¼“å­˜é…ç½®
hibernate.cache.use_second_level_cache = true
hibernate.cache.region.factory_class = org.hibernate.cache.ehcache.EhCacheRegionFactory

# æŸ¥è¯¢ç¼“å­˜é…ç½®
hibernate.cache.use_query_cache = true

# è¿æ¥æ± é…ç½®
hibernate.c3p0.min_size = 5
hibernate.c3p0.max_size = 20
hibernate.c3p0.timeout = 300
hibernate.c3p0.max_statements = 50
hibernate.c3p0.idle_test_period = 3000
</code></pre>
<h3 data-id="heading-6">ä½¿ç”¨ç¤ºä¾‹</h3>
<p>ç»“åˆä¸Šè¿°é…ç½®æ–‡ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ä»¥ä¸‹ä»£ç è¿›è¡ŒHibernateçš„åˆå§‹åŒ–å’Œä½¿ç”¨ï¼š</p>
<h4 data-id="heading-7">Javaä»£ç ç¤ºä¾‹ï¼š</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.hibernate.Session;
<span class="hljs-keyword">import</span> org.hibernate.SessionFactory;
<span class="hljs-keyword">import</span> org.hibernate.Transaction;
<span class="hljs-keyword">import</span> org.hibernate.cfg.Configuration;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HibernateUtil</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> SessionFactory sessionFactory;

    <span class="hljs-keyword">static</span> {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// åˆ›å»ºSessionFactory</span>
            sessionFactory = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Configuration</span>().configure(<span class="hljs-string">"hibernate.cfg.xml"</span>).buildSessionFactory();
        } <span class="hljs-keyword">catch</span> (Throwable ex) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ExceptionInInitializerError</span>(ex);
        }
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> SessionFactory <span class="hljs-title function_">getSessionFactory</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> sessionFactory;
    }
}

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HibernateExample</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-type">SessionFactory</span> <span class="hljs-variable">sessionFactory</span> <span class="hljs-operator">=</span> HibernateUtil.getSessionFactory();
        <span class="hljs-type">Session</span> <span class="hljs-variable">session</span> <span class="hljs-operator">=</span> sessionFactory.openSession();
        <span class="hljs-type">Transaction</span> <span class="hljs-variable">transaction</span> <span class="hljs-operator">=</span> session.beginTransaction();

        <span class="hljs-comment">// åˆ›å»ºå¹¶ä¿å­˜å­¦ç”Ÿå¯¹è±¡</span>
        <span class="hljs-type">Student</span> <span class="hljs-variable">student</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Student</span>(<span class="hljs-string">"John Doe"</span>, <span class="hljs-number">20</span>);
        session.save(student);

        transaction.commit();

        <span class="hljs-comment">// è¯»å–å­¦ç”Ÿå¯¹è±¡</span>
        transaction = session.beginTransaction();
        <span class="hljs-type">Student</span> <span class="hljs-variable">retrievedStudent</span> <span class="hljs-operator">=</span> session.get(Student.class, student.getId());
        System.out.println(<span class="hljs-string">"Retrieved Student: "</span> + retrievedStudent.getName() + <span class="hljs-string">", Age: "</span> + retrievedStudent.getAge());
        transaction.commit();

        <span class="hljs-comment">// æ›´æ–°å­¦ç”Ÿå¯¹è±¡</span>
        transaction = session.beginTransaction();
        retrievedStudent.setAge(<span class="hljs-number">21</span>);
        session.update(retrievedStudent);
        transaction.commit();

        <span class="hljs-comment">// åˆ é™¤å­¦ç”Ÿå¯¹è±¡</span>
        transaction = session.beginTransaction();
        session.delete(retrievedStudent);
        transaction.commit();

        session.close();
        sessionFactory.close();
    }
}
</code></pre>
<h3 data-id="heading-8">è¯¦ç»†è§£é‡Š</h3>
<ol>
<li>
<p><strong>æŒä¹…åŒ–ç±»å®šä¹‰</strong>ï¼šæŒä¹…åŒ–ç±»<code>Student</code>ä½¿ç”¨äº†<code>@Entity</code>æ³¨è§£è¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªæŒä¹…åŒ–å®ä½“ç±»ï¼Œ<code>@Id</code>å’Œ<code>@GeneratedValue</code>æ³¨è§£ç”¨äºå®šä¹‰ä¸»é”®å’Œä¸»é”®ç”Ÿæˆç­–ç•¥ã€‚</p>
</li>
<li>
<p><strong><code>hibernate.cfg.xml</code> é…ç½®</strong>ï¼šåœ¨é…ç½®æ–‡ä»¶ä¸­ï¼Œé€šè¿‡<code>&lt;mapping class="com.example.domain.Student"/&gt;</code>å°†<code>Student</code>ç±»æ˜ å°„åˆ°æ•°æ®åº“è¡¨ã€‚</p>
</li>
<li>
<p><strong>Hibernateæ“ä½œ</strong>ï¼š</p>
<ul>
<li><strong>åˆ›å»ºSessionFactory</strong>ï¼šé€šè¿‡<code>Configuration</code>ç±»è¯»å–<code>hibernate.cfg.xml</code>æ–‡ä»¶åˆ›å»º<code>SessionFactory</code>ã€‚</li>
<li><strong>è·å–Session</strong>ï¼šé€šè¿‡<code>SessionFactory</code>è·å–<code>Session</code>å¯¹è±¡ã€‚</li>
<li><strong>å¯åŠ¨äº‹åŠ¡</strong>ï¼šé€šè¿‡<code>Session</code>å¯¹è±¡å¯åŠ¨äº‹åŠ¡ã€‚</li>
<li><strong>CRUDæ“ä½œ</strong>ï¼š
<ul>
<li><strong>åˆ›å»ºå¹¶ä¿å­˜</strong>ï¼šä½¿ç”¨<code>session.save()</code>æ–¹æ³•ä¿å­˜ä¸€ä¸ªæ–°çš„<code>Student</code>å¯¹è±¡ã€‚</li>
<li><strong>è¯»å–</strong>ï¼šä½¿ç”¨<code>session.get()</code>æ–¹æ³•æ ¹æ®ä¸»é”®è¯»å–<code>Student</code>å¯¹è±¡ã€‚</li>
<li><strong>æ›´æ–°</strong>ï¼šä¿®æ”¹å¯¹è±¡çš„å±æ€§å€¼å¹¶ä½¿ç”¨<code>session.update()</code>æ–¹æ³•è¿›è¡Œæ›´æ–°ã€‚</li>
<li><strong>åˆ é™¤</strong>ï¼šä½¿ç”¨<code>session.delete()</code>æ–¹æ³•åˆ é™¤å¯¹è±¡ã€‚</li>
</ul>
</li>
<li><strong>æäº¤äº‹åŠ¡</strong>ï¼šé€šè¿‡<code>transaction.commit()</code>æ–¹æ³•æäº¤äº‹åŠ¡ã€‚</li>
</ul>
</li>
</ol>
<p>é€šè¿‡è¿™ç§æ–¹å¼ï¼ŒHibernateå¯ä»¥å°†Javaå¯¹è±¡æŒä¹…åŒ–åˆ°æ•°æ®åº“ä¸­ï¼Œå¤„ç†å¯¹è±¡çš„CRUDæ“ä½œï¼Œå®ç°å¯¹è±¡ä¸æ•°æ®åº“è¡¨ä¹‹é—´çš„æ˜ å°„å’Œç®¡ç†ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Hibernateï¼ˆ6ï¼‰ Hibernateæ”¯æŒå“ªäº›æ•°æ®åº“ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7588064253635002422</link>    <guid>https://juejin.cn/post/7588064253635002422</guid>    <pubDate>2025-12-26T23:06:38.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588064253635002422" data-draft-id="7588064253634969654" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Hibernateï¼ˆ6ï¼‰ Hibernateæ”¯æŒå“ªäº›æ•°æ®åº“ï¼Ÿ"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-26T23:06:38.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Victor356"/> <meta itemprop="url" content="https://juejin.cn/user/3492507879476878"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Hibernateï¼ˆ6ï¼‰ Hibernateæ”¯æŒå“ªäº›æ•°æ®åº“ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3492507879476878/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Victor356
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-26T23:06:38.000Z" title="Fri Dec 26 2025 23:06:38 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>Hibernateæ˜¯ä¸€ä¸ªå¼ºå¤§çš„å¯¹è±¡å…³ç³»æ˜ å°„ï¼ˆORMï¼‰æ¡†æ¶ï¼Œæ”¯æŒå¤šç§ä¸åŒçš„å…³ç³»å‹æ•°æ®åº“ã€‚å…¶ä¸»è¦ä¼˜åŠ¿ä¹‹ä¸€æ˜¯èƒ½å¤Ÿåœ¨åº”ç”¨ä»£ç ä¸­ä½¿ç”¨ç›¸åŒçš„APIï¼Œè€Œæ— éœ€å…³å¿ƒåº•å±‚æ•°æ®åº“çš„å…·ä½“å®ç°ã€‚Hibernateé€šè¿‡æ–¹è¨€ï¼ˆDialectï¼‰æ¥é€‚é…ä¸åŒçš„æ•°æ®åº“ã€‚</p>
<h3 data-id="heading-0">å¸¸è§çš„æ”¯æŒæ•°æ®åº“åŠå…¶æ–¹è¨€</h3>
<p>ä»¥ä¸‹æ˜¯Hibernateæ”¯æŒçš„ä¸€äº›å¸¸è§æ•°æ®åº“åŠå…¶ç›¸åº”çš„æ–¹è¨€ï¼š</p>
<ol>
<li><strong>MySQL</strong> - <code>org.hibernate.dialect.MySQLDialect</code></li>
<li><strong>PostgreSQL</strong> - <code>org.hibernate.dialect.PostgreSQLDialect</code></li>
<li><strong>Oracle</strong> - <code>org.hibernate.dialect.OracleDialect</code></li>
<li><strong>Microsoft SQL Server</strong> - <code>org.hibernate.dialect.SQLServerDialect</code></li>
<li><strong>SQLite</strong> - <code>org.hibernate.dialect.SQLiteDialect</code></li>
<li><strong>H2</strong> - <code>org.hibernate.dialect.H2Dialect</code></li>
<li><strong>DB2</strong> - <code>org.hibernate.dialect.DB2Dialect</code></li>
<li><strong>Informix</strong> - <code>org.hibernate.dialect.InformixDialect</code></li>
<li><strong>Sybase</strong> - <code>org.hibernate.dialect.SybaseDialect</code></li>
<li><strong>HSQLDB (HyperSQL)</strong> - <code>org.hibernate.dialect.HSQLDialect</code></li>
</ol>
<h3 data-id="heading-1">é…ç½®ç¤ºä¾‹</h3>
<p>æˆ‘ä»¬é€šè¿‡ä¸åŒçš„æ•°æ®åº“é…ç½®æ¥å±•ç¤ºå¦‚ä½•åœ¨Hibernateä¸­ä½¿ç”¨è¿™äº›æ–¹è¨€ã€‚</p>
<h4 data-id="heading-2">1. MySQL é…ç½®ç¤ºä¾‹</h4>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">hibernate-configuration</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">session-factory</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.connection.driver_class"</span>&gt;</span>com.mysql.cj.jdbc.Driver<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.connection.url"</span>&gt;</span>jdbc:mysql://localhost:3306/your_database<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.connection.username"</span>&gt;</span>your_username<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.connection.password"</span>&gt;</span>your_password<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.dialect"</span>&gt;</span>org.hibernate.dialect.MySQLDialect<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">mapping</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"com.example.domain.Student"</span>/&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">session-factory</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">hibernate-configuration</span>&gt;</span>
</code></pre>
<h4 data-id="heading-3">2. PostgreSQL é…ç½®ç¤ºä¾‹</h4>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">hibernate-configuration</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">session-factory</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.connection.driver_class"</span>&gt;</span>org.postgresql.Driver<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.connection.url"</span>&gt;</span>jdbc:postgresql://localhost:5432/your_database<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.connection.username"</span>&gt;</span>your_username<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.connection.password"</span>&gt;</span>your_password<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.dialect"</span>&gt;</span>org.hibernate.dialect.PostgreSQLDialect<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">mapping</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"com.example.domain.Student"</span>/&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">session-factory</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">hibernate-configuration</span>&gt;</span>
</code></pre>
<h4 data-id="heading-4">3. Oracle é…ç½®ç¤ºä¾‹</h4>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">hibernate-configuration</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">session-factory</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.connection.driver_class"</span>&gt;</span>oracle.jdbc.driver.OracleDriver<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.connection.url"</span>&gt;</span>jdbc:oracle:thin:@localhost:1521:xe<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.connection.username"</span>&gt;</span>your_username<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.connection.password"</span>&gt;</span>your_password<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.dialect"</span>&gt;</span>org.hibernate.dialect.OracleDialect<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">mapping</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"com.example.domain.Student"</span>/&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">session-factory</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">hibernate-configuration</span>&gt;</span>
</code></pre>
<h4 data-id="heading-5">4. Microsoft SQL Server é…ç½®ç¤ºä¾‹</h4>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">hibernate-configuration</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">session-factory</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.connection.driver_class"</span>&gt;</span>com.microsoft.sqlserver.jdbc.SQLServerDriver<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.connection.url"</span>&gt;</span>jdbc:sqlserver://localhost;databaseName=your_database<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.connection.username"</span>&gt;</span>your_username<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.connection.password"</span>&gt;</span>your_password<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.dialect"</span>&gt;</span>org.hibernate.dialect.SQLServerDialect<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">mapping</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"com.example.domain.Student"</span>/&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">session-factory</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">hibernate-configuration</span>&gt;</span>
</code></pre>
<h4 data-id="heading-6">5. SQLite é…ç½®ç¤ºä¾‹</h4>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">hibernate-configuration</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">session-factory</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.connection.driver_class"</span>&gt;</span>org.sqlite.JDBC<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.connection.url"</span>&gt;</span>jdbc:sqlite:your_database.db<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.dialect"</span>&gt;</span>org.hibernate.dialect.SQLiteDialect<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">mapping</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"com.example.domain.Student"</span>/&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">session-factory</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">hibernate-configuration</span>&gt;</span>
</code></pre>
<h3 data-id="heading-7">å¸¸è§é…ç½®å‚æ•°è¯´æ˜</h3>
<ul>
<li><strong>hibernate.connection.driver_class</strong>: JDBCé©±åŠ¨ç±»åã€‚</li>
<li><strong>hibernate.connection.url</strong>: æ•°æ®åº“è¿æ¥URLã€‚</li>
<li><strong>hibernate.connection.username</strong>: æ•°æ®åº“ç”¨æˆ·åã€‚</li>
<li><strong>hibernate.connection.password</strong>: æ•°æ®åº“å¯†ç ã€‚</li>
<li><strong>hibernate.dialect</strong>: æ•°æ®åº“æ–¹è¨€ï¼ŒHibernateæ ¹æ®æ–¹è¨€ç”Ÿæˆç‰¹å®šäºæ•°æ®åº“çš„SQLè¯­å¥ã€‚</li>
<li><strong>mapping class</strong>: è¦æ˜ å°„çš„å®ä½“ç±»ã€‚</li>
</ul>
<h3 data-id="heading-8">ä½¿ç”¨ç¤ºä¾‹</h3>
<p>ç»“åˆä¸Šè¿°é…ç½®æ–‡ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ä»¥ä¸‹ä»£ç è¿›è¡ŒHibernateçš„åˆå§‹åŒ–å’Œä½¿ç”¨ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.hibernate.Session;
<span class="hljs-keyword">import</span> org.hibernate.SessionFactory;
<span class="hljs-keyword">import</span> org.hibernate.Transaction;
<span class="hljs-keyword">import</span> org.hibernate.cfg.Configuration;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HibernateUtil</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> SessionFactory sessionFactory;

    <span class="hljs-keyword">static</span> {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// åˆ›å»ºSessionFactory</span>
            sessionFactory = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Configuration</span>().configure(<span class="hljs-string">"hibernate.cfg.xml"</span>).buildSessionFactory();
        } <span class="hljs-keyword">catch</span> (Throwable ex) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ExceptionInInitializerError</span>(ex);
        }
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> SessionFactory <span class="hljs-title function_">getSessionFactory</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> sessionFactory;
    }
}

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HibernateExample</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-type">SessionFactory</span> <span class="hljs-variable">sessionFactory</span> <span class="hljs-operator">=</span> HibernateUtil.getSessionFactory();
        <span class="hljs-type">Session</span> <span class="hljs-variable">session</span> <span class="hljs-operator">=</span> sessionFactory.openSession();
        <span class="hljs-type">Transaction</span> <span class="hljs-variable">transaction</span> <span class="hljs-operator">=</span> session.beginTransaction();

        <span class="hljs-comment">// åˆ›å»ºå¹¶ä¿å­˜å­¦ç”Ÿå¯¹è±¡</span>
        <span class="hljs-type">Student</span> <span class="hljs-variable">student</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Student</span>(<span class="hljs-string">"John Doe"</span>, <span class="hljs-number">20</span>);
        session.save(student);

        transaction.commit();

        <span class="hljs-comment">// è¯»å–å­¦ç”Ÿå¯¹è±¡</span>
        transaction = session.beginTransaction();
        <span class="hljs-type">Student</span> <span class="hljs-variable">retrievedStudent</span> <span class="hljs-operator">=</span> session.get(Student.class, student.getId());
        System.out.println(<span class="hljs-string">"Retrieved Student: "</span> + retrievedStudent.getName() + <span class="hljs-string">", Age: "</span> + retrievedStudent.getAge());
        transaction.commit();

        <span class="hljs-comment">// æ›´æ–°å­¦ç”Ÿå¯¹è±¡</span>
        transaction = session.beginTransaction();
        retrievedStudent.setAge(<span class="hljs-number">21</span>);
        session.update(retrievedStudent);
        transaction.commit();

        <span class="hljs-comment">// åˆ é™¤å­¦ç”Ÿå¯¹è±¡</span>
        transaction = session.beginTransaction();
        session.delete(retrievedStudent);
        transaction.commit();

        session.close();
        sessionFactory.close();
    }
}
</code></pre>
<h3 data-id="heading-9">æ€»ç»“</h3>
<p>é€šè¿‡é…ç½®ä¸åŒçš„æ–¹è¨€ï¼ŒHibernateå¯ä»¥æ”¯æŒå¤šç§æ•°æ®åº“ã€‚å¼€å‘è€…åªéœ€ä¿®æ”¹é…ç½®æ–‡ä»¶ä¸­çš„æ–¹è¨€å’Œæ•°æ®åº“è¿æ¥ä¿¡æ¯ï¼Œå³å¯åˆ‡æ¢åˆ°ä¸åŒçš„æ•°æ®åº“è€Œæ— éœ€æ”¹å˜åº”ç”¨ä»£ç ã€‚Hibernateçš„è¿™ç§è®¾è®¡æå¤§åœ°æé«˜äº†åº”ç”¨ç¨‹åºçš„å¯ç§»æ¤æ€§å’Œçµæ´»æ€§ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Next.jsç¬¬åå…­ç« (fontå­—ä½“)]]></title>    <link>https://juejin.cn/post/7587997157237571636</link>    <guid>https://juejin.cn/post/7587997157237571636</guid>    <pubDate>2025-12-26T21:54:15.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587997157237571636" data-draft-id="7588010346070638602" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Next.jsç¬¬åå…­ç« (fontå­—ä½“)"/> <meta itemprop="keywords" content="å‰ç«¯,Next.js"/> <meta itemprop="datePublished" content="2025-12-26T21:54:15.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å°æ»¡zs"/> <meta itemprop="url" content="https://juejin.cn/user/2463384809252397"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Next.jsç¬¬åå…­ç« (fontå­—ä½“)
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2463384809252397/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å°æ»¡zs
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-26T21:54:15.000Z" title="Fri Dec 26 2025 21:54:15 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">fontå­—ä½“</h2>
<p><code>next/font</code>æ¨¡å—ï¼Œå†…ç½®äº†å­—ä½“ä¼˜åŒ–åŠŸèƒ½ï¼Œå…¶ç›®çš„æ˜¯é˜²æ­¢<code>CLS</code>å¸ƒå±€åç§»ã€‚fontæ¨¡å—ä¸»è¦åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼Œä¸€éƒ¨åˆ†æ˜¯å†…ç½®çš„<code>Google Fonts</code>å­—ä½“ï¼Œå¦ä¸€éƒ¨åˆ†æ˜¯æœ¬åœ°å­—ä½“ã€‚</p>
<h4 data-id="heading-1">åŸºæœ¬ç”¨æ³•</h4>
<h5 data-id="heading-2">Goggleå­—ä½“</h5>
<p>åœ¨ä½¿ç”¨googleå­—ä½“çš„æ—¶å€™ï¼ŒGoogleå­—ä½“å’Œcssæ–‡ä»¶ä¼šåœ¨æ„å»ºçš„æ—¶å€™ä¸‹è½½åˆ°æœ¬åœ°ï¼Œå¯ä»¥ä¸é™æ€èµ„æºä¸€èµ·æ‰˜ç®¡åˆ°æœåŠ¡å™¨ï¼Œæ‰€ä»¥ä¸ä¼šå‘Googleå‘é€è¯·æ±‚ã€‚</p>
<ol>
<li>åŸºæœ¬ä½¿ç”¨</li>
</ol>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">import</span> { BBH_Sans_Hegarty } <span class="hljs-keyword">from</span> <span class="hljs-string">'next/font/google'</span> <span class="hljs-comment">//å¼•å…¥å­—ä½“åº“</span>
<span class="hljs-keyword">const</span> bbhSansHegarty = <span class="hljs-title function_">BBH_Sans_Hegarty</span>({
  <span class="hljs-attr">weight</span>: <span class="hljs-string">'400'</span>, <span class="hljs-comment">//å­—ä½“ç²—ç»†</span>
  <span class="hljs-attr">display</span>: <span class="hljs-string">'swap'</span>, <span class="hljs-comment">//å­—ä½“æ˜¾ç¤ºæ–¹å¼</span>
})
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">RootLayout</span>(<span class="hljs-params">{ children }: Readonly&lt;{ children: React.ReactNode }&gt;</span>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">body</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{bbhSansHegarty.className}</span>&gt;</span> {/** bbhSansHegartyä¼šè¿”å›ä¸€ä¸ªç±»åï¼Œç”¨äºåŠ è½½å­—ä½“ */}
        {children}
        sdsadasdjsalkdjasl
        ä½ å¥½
      <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></span>
  );
}
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bcefd9c6f27540ecb6b8baf82cea3320~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5ruhenM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767390855&amp;x-signature=Zw4b%2BVpblJHbxPR9mqpMWqPKqV4%3D" alt="google.png" loading="lazy"/></p>
<ol start="2">
<li>å¯å˜å­—ä½“</li>
</ol>
<p>å¯å˜å­—ä½“æ˜¯ä¸€ç§å¯ä»¥é€‚åº”ä¸åŒå­—é‡å’Œæ ·å¼çš„å­—ä½“ï¼Œå®ƒå¯ä»¥åœ¨ä¸åŒçš„è®¾å¤‡ä¸Šè‡ªåŠ¨è°ƒæ•´å­—ä½“å¤§å°å’Œæ ·å¼ï¼Œä»¥é€‚åº”ä¸åŒçš„å±å¹•å¤§å°å’Œåˆ†è¾¨ç‡ã€‚</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Roboto</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'next/font/google'</span>
<span class="hljs-keyword">const</span> roboto = <span class="hljs-title class_">Roboto</span>({
  <span class="hljs-attr">weight</span>: [<span class="hljs-string">'400'</span>, <span class="hljs-string">'700'</span>], <span class="hljs-comment">//å­—ä½“ç²—ç»† (ä¸æ˜¯æ‰€æœ‰å­—ä½“éƒ½æ”¯æŒå¯å˜å­—ä½“)</span>
  <span class="hljs-attr">style</span>: [<span class="hljs-string">'normal'</span>, <span class="hljs-string">'italic'</span>], <span class="hljs-comment">//å­—ä½“æ ·å¼   </span>
  <span class="hljs-attr">subsets</span>: [<span class="hljs-string">'latin'</span>],
  <span class="hljs-attr">display</span>: <span class="hljs-string">'swap'</span>,
})
</code></pre>
<p>å¦‚ä½•é€‰æ‹©å…¶ä»–å­—ä½“ï¼Ÿå¯ä»¥å‚è€ƒ<a href="https://link.juejin.cn?target=https%3A%2F%2Ffonts.google.com%2F" target="_blank" title="https://fonts.google.com/" ref="nofollow noopener noreferrer">Google Fonts</a></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4e9ca54c48d442008bf9ed53a7ae0d64~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5ruhenM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767390855&amp;x-signature=ObOKJs3LM3bAhaSQm%2B6tFMwxO0s%3D" alt="web.png" loading="lazy"/></p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Inter</span>,BBH_Sans_Bartle,<span class="hljs-title class_">Roboto</span>_Slab,<span class="hljs-title class_">Rubik</span>,<span class="hljs-title class_">Montserrat</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'next/font/google'</span> <span class="hljs-comment">//å¼•å…¥å…¶ä»–å­—ä½“åº“</span>
</code></pre>
<h4 data-id="heading-3">API å‚è€ƒ</h4>
<h4 data-id="heading-4">é…ç½®é€‰é¡¹</h4>





































































































<table><thead><tr><th>å±æ€§</th><th>Google</th><th>æœ¬åœ°</th><th>ç±»å‹</th><th>å¿…å¡«</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>src</code></td><td>âœ—</td><td>âœ“</td><td>String/Array</td><td>æ˜¯</td><td>å­—ä½“æ–‡ä»¶è·¯å¾„</td></tr><tr><td><code>weight</code></td><td>âœ“</td><td>âœ“</td><td>String/Array</td><td>å¯é€‰</td><td>å­—ä½“ç²—ç»†ï¼Œå¦‚ '400'</td></tr><tr><td><code>style</code></td><td>âœ“</td><td>âœ“</td><td>String/Array</td><td>-</td><td>å­—ä½“æ ·å¼ï¼Œå¦‚ 'normal'</td></tr><tr><td><code>subsets</code></td><td>âœ“</td><td>âœ—</td><td>Array</td><td>-</td><td>å­—ç¬¦å­é›†</td></tr><tr><td><code>axes</code></td><td>âœ“</td><td>âœ—</td><td>Array</td><td>-</td><td>å¯å˜å­—ä½“è½´</td></tr><tr><td><code>display</code></td><td>âœ“</td><td>âœ“</td><td>String</td><td>-</td><td>æ˜¾ç¤ºç­–ç•¥</td></tr><tr><td><code>preload</code></td><td>âœ“</td><td>âœ“</td><td>Boolean</td><td>-</td><td>æ˜¯å¦é¢„åŠ è½½</td></tr><tr><td><code>fallback</code></td><td>âœ“</td><td>âœ“</td><td>Array</td><td>-</td><td>å¤‡ç”¨å­—ä½“</td></tr><tr><td><code>adjustFontFallback</code></td><td>âœ“</td><td>âœ“</td><td>Boolean/String</td><td>-</td><td>è°ƒæ•´å¤‡ç”¨å­—ä½“</td></tr><tr><td><code>variable</code></td><td>âœ“</td><td>âœ“</td><td>String</td><td>-</td><td>CSS å˜é‡</td></tr><tr><td><code>declarations</code></td><td>âœ—</td><td>âœ“</td><td>Array</td><td>-</td><td>è‡ªå®šä¹‰å£°æ˜</td></tr></tbody></table>
<h5 data-id="heading-5">style</h5>
<p>å­—ä½“æ ·å¼ï¼Œå¦‚ 'normal' 'italicï¼ˆæ–œä½“ï¼‰' 'obliqueï¼ˆå€¾æ–œï¼‰' ç­‰ã€‚</p>
<h5 data-id="heading-6">weight</h5>
<p>å­—ä½“ç²—ç»†ï¼Œå¦‚ '400' '700' '900' ç­‰ã€‚</p>
<h5 data-id="heading-7">display</h5>
<p><strong>auto</strong>ï¼šæµè§ˆå™¨é»˜è®¤ï¼ˆé€šå¸¸ä¸º blockï¼‰</p>
<p><strong>block</strong>ï¼šç©ºç™½ 3s â†’ å¤‡ç”¨å­—ä½“ â†’ è‡ªå®šä¹‰å­—ä½“</p>
<p><strong>swap</strong>ï¼šå¤‡ç”¨å­—ä½“ â†’ è‡ªå®šä¹‰å­—ä½“</p>
<p><strong>fallback</strong>ï¼šç©ºç™½ 100ms â†’ å¤‡ç”¨å­—ä½“ï¼Œ3s å†…åŠ è½½å®Œæˆåˆ™åˆ‡æ¢</p>
<p><strong>optional</strong>ï¼šç©ºç™½ 100msï¼Œ100ms å†…åŠ è½½å®Œæˆåˆ™ä½¿ç”¨ï¼Œå¦åˆ™ç”¨å¤‡ç”¨å­—ä½“</p>
<h5 data-id="heading-8">æœ¬åœ°å­—ä½“</h5>
<p>å­—ä½“ä¸‹è½½åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fnextjs-docs-henna-six.vercel.app%2FZhiyongDatongFont.ttf" target="_blank" title="https://nextjs-docs-henna-six.vercel.app/ZhiyongDatongFont.ttf" ref="nofollow noopener noreferrer">å…è´¹å¯å•†ç”¨å­—ä½“</a></p>
<p>æœ¬åœ°å­—ä½“éœ€è¦é€šè¿‡<code>src</code>å±æ€§æŒ‡å®šå­—ä½“æ–‡ä»¶è·¯å¾„ï¼Œå­—ä½“æ–‡ä»¶è·¯å¾„å¯ä»¥æ˜¯å•ä¸ªæ–‡ä»¶ï¼Œä¹Ÿå¯ä»¥æ˜¯å¤šä¸ªæ–‡ä»¶ã€‚</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">import</span> localFont <span class="hljs-keyword">from</span> <span class="hljs-string">'next/font/local'</span>
<span class="hljs-keyword">const</span> local = <span class="hljs-title function_">localFont</span>({
  <span class="hljs-attr">src</span>:<span class="hljs-string">'./font/zydtt.ttf'</span>, <span class="hljs-comment">//æœ¬åœ°å­—ä½“æ–‡ä»¶è·¯å¾„</span>
  <span class="hljs-attr">display</span>: <span class="hljs-string">'swap'</span>, <span class="hljs-comment">//å­—ä½“æ˜¾ç¤ºæ–¹å¼</span>
})
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">RootLayout</span>(<span class="hljs-params">{ children }: Readonly&lt;{ children: React.ReactNode }&gt;</span>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">body</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{local.className}</span>&gt;</span>
        {children}
        sdsadasdjsalkdjasl
        ä½ å¥½
      <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></span>
  );
}
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2bb7fb89090e41c390d7abe5f29ae5ec~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5ruhenM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767390855&amp;x-signature=Ei%2BKONlI6FK%2Fjz5etg4BCPSrSDU%3D" alt="local.png" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Next.jsç¬¬åä¸ƒç« (Scriptè„šæœ¬)]]></title>    <link>https://juejin.cn/post/7588031908171071497</link>    <guid>https://juejin.cn/post/7588031908171071497</guid>    <pubDate>2025-12-26T22:01:10.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588031908171071497" data-draft-id="7587997157237588020" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Next.jsç¬¬åä¸ƒç« (Scriptè„šæœ¬)"/> <meta itemprop="keywords" content="å‰ç«¯,Next.js"/> <meta itemprop="datePublished" content="2025-12-26T22:01:10.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å°æ»¡zs"/> <meta itemprop="url" content="https://juejin.cn/user/2463384809252397"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Next.jsç¬¬åä¸ƒç« (Scriptè„šæœ¬)
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2463384809252397/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å°æ»¡zs
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-26T22:01:10.000Z" title="Fri Dec 26 2025 22:01:10 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Scriptç»„ä»¶</h2>
<p>Next.jså…è®¸æˆ‘ä»¬ä½¿ç”¨Scriptç»„ä»¶å»åŠ è½½jsè„šæœ¬(å¤–éƒ¨/æœ¬åœ°è„šæœ¬)ï¼Œå¹¶ä¸”ä»–è¿˜å¯¹Scriptç»„ä»¶è¿›è¡Œä¼˜åŒ–ã€‚</p>
<h4 data-id="heading-1">åŸºæœ¬ä½¿ç”¨</h4>
<h5 data-id="heading-2">å±€éƒ¨å¼•å…¥</h5>
<p>src/app/home/page.tsx</p>
<p>åœ¨homeè·¯ç”±å¼•å…¥ä¸€ä¸ªè¿œç¨‹çš„jsè„šæœ¬ï¼Œä»–åªä¼šåœ¨åˆ‡æ¢åˆ°homeè·¯ç”±æ—¶æ‰ä¼šåŠ è½½ï¼Œå¹¶ä¸”åªä¼šåŠ è½½ä¸€æ¬¡ï¼Œç„¶åçº³å…¥ç¼“å­˜ã€‚</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">Script</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'next/script'</span> <span class="hljs-comment">//å¼•å…¥Scriptç»„ä»¶</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">HomePage</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> (
        <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">Script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://unpkg.com/vue@3/dist/vue.global.js"</span> /&gt;</span><span class="xml">
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span></span>
    )
}
</code></pre>
<p>ä»–çš„åº•å±‚åŸç†ä¼šæŠŠè¿™ä¸ª<code>Script</code>ç»„ä»¶è½¬æ¢æˆ<code>&lt;script&gt;</code>æ ‡ç­¾ï¼Œç„¶åæ’å…¥åˆ°<code>&lt;head&gt;</code>æ ‡ç­¾ä¸­ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b46cb2a31d4a40c5bb4c280642d449ee~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5ruhenM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767391270&amp;x-signature=8FpB%2BRbdoa5Xu1eD6NBbkKy2eUc%3D" alt="head.png" loading="lazy"/></p>
<h5 data-id="heading-3">å…¨å±€å¼•å…¥</h5>
<p>src/app/layout.tsx</p>
<p>å…¨å±€å¼•å…¥ç›´æ¥åœ¨app/layout.tsxä¸­å¼•å…¥ï¼Œä»–ä¼šè‡ªåŠ¨åœ¨æ‰€æœ‰é¡µé¢ä¸­å¼•å…¥ï¼Œå¹¶ä¸”åªä¼šåŠ è½½ä¸€æ¬¡ï¼Œç„¶åçº³å…¥ç¼“å­˜ã€‚</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">Script</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'next/script'</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">RootLayout</span>(<span class="hljs-params">{ children }: { children: React.ReactNode }</span>) {
    <span class="hljs-keyword">return</span> (
        <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">Script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://unpkg.com/vue@3/dist/vue.global.js"</span> /&gt;</span><span class="xml">
            <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
                {children}
            <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></span></span>
    )
}
</code></pre>
<h5 data-id="heading-4">åŠ è½½ç­–ç•¥</h5>
<p>Next.jså…è®¸æˆ‘ä»¬é€šè¿‡<code>strategy</code>å±æ€§æ¥æ§åˆ¶<code>Script</code>ç»„ä»¶çš„åŠ è½½ç­–ç•¥ã€‚</p>
<ul>
<li><code>beforeInteractive</code>: åœ¨ä»£ç å’Œé¡µé¢ä¹‹å‰åŠ è½½<code>ä¼šé˜»å¡é¡µé¢æ¸²æŸ“</code>ã€‚</li>
<li><code>afterInteractive</code>(é»˜è®¤å€¼): åœ¨é¡µé¢æ¸²æŸ“åˆ°å®¢æˆ·ç«¯ä¹‹ååŠ è½½ã€‚</li>
<li><code>lazyOnload</code>: åœ¨æµè§ˆå™¨ç©ºé—²æ—¶ç¨ååŠ è½½è„šæœ¬ã€‚</li>
<li><code>worker</code>(å®éªŒæ€§ç‰¹æ€§): æš‚æ—¶ä¸å»ºè®®ä½¿ç”¨ã€‚</li>
</ul>
<pre><code class="hljs language-tsx" lang="tsx">&lt;<span class="hljs-title class_">Script</span> id=<span class="hljs-string">"VGUBHJMK1"</span> strategy=<span class="hljs-string">"beforeInteractive"</span> src=<span class="hljs-string">"https://unpkg.com/vue@3/dist/vue.global.js"</span> /&gt;
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Script</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"VGUBHJMK2"</span> <span class="hljs-attr">strategy</span>=<span class="hljs-string">"afterInteractive"</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://unpkg.com/vue@3/dist/vue.global.js"</span> /&gt;</span></span>
<span class="xml"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Script</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"VGUBHJMK3"</span> <span class="hljs-attr">strategy</span>=<span class="hljs-string">"lazyOnload"</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://unpkg.com/vue@3/dist/vue.global.js"</span> /&gt;</span></span></span>
<span class="xml"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Script</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"VGUBHJMK4"</span> <span class="hljs-attr">strategy</span>=<span class="hljs-string">"worker"</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://unpkg.com/vue@3/dist/vue.global.js"</span> /&gt;</span></span></span>
</code></pre>
<blockquote>
<p>webWorkeræ¨¡å¼ å°šä¸ç¨³å®šï¼Œè°¨æ…ä½¿ç”¨,å°æç¤ºå¯ä»¥ç»™Scriptç»„ä»¶æ·»åŠ idï¼ŒNext.jsä¼šè¿½è¸ªä¼˜åŒ–ã€‚</p>
</blockquote>
<h5 data-id="heading-5">å†…è”è„šæœ¬</h5>
<p>å³ä½¿ä¸ä»å¤–éƒ¨æ–‡ä»¶è½½å…¥è„šæœ¬ï¼ŒNext.jsä¹Ÿæ”¯æŒæˆ‘ä»¬é€šè¿‡{}ç›´æ¥åœ¨<code>Scriptç»„ä»¶</code>ç¼–å†™ä»£ç ã€‚</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">Script</span> <span class="hljs-keyword">from</span> <span class="hljs-string">"next/script"</span>;
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">RootLayout</span>(<span class="hljs-params">{
  children
}: Readonly&lt;{
  children: React.ReactNode;
}&gt;</span>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">Script</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"VGUBHJMK5"</span> <span class="hljs-attr">strategy</span>=<span class="hljs-string">"beforeInteractive"</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://unpkg.com/vue@3/dist/vue.global.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">Script</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
        {children}
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"app"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">Script</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"VGUBHJMK6"</span>
         <span class="hljs-attr">strategy</span>=<span class="hljs-string">"afterInteractive"</span>&gt;</span><span class="xml">
        {
           `
            const {createApp} = Vue
            createApp({
              template: '<span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>{{ message }}<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>',
              setup() {
                return {
                  message: 'Next.js + Vue.js'
                }
              }
            }).mount('#app')
          `
        }
        </span><span class="hljs-tag">&lt;/<span class="hljs-name">Script</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></span>
  );
}
</code></pre>
<p>ç¬¬äºŒç§å†™æ³•ä½¿ç”¨ dangerouslySetInnerHTML å±æ€§æ¥è®¾ç½®å†…è”è„šæœ¬ã€‚</p>
<pre><code class="hljs language-tsx" lang="tsx">&lt;<span class="hljs-title class_">Script</span> dangerouslySetInnerHTML={{<span class="hljs-attr">__html</span>: <span class="hljs-string">`
    const {createApp} = Vue
    createApp({
        template: '&lt;h1&gt;{{ message }}&lt;/h1&gt;',
        setup() {
        return {
            message: 'Next.js + Vue.js'
        }
        }
    }).mount('#app')
    `</span> }} strategy=<span class="hljs-string">"afterInteractive"</span>&gt;
&lt;/<span class="hljs-title class_">Script</span>&gt;
</code></pre>
<h5 data-id="heading-6">äº‹ä»¶ç›‘å¬</h5>
<ul>
<li>onload: è„šæœ¬åŠ è½½å®Œæˆæ—¶è§¦å‘ã€‚</li>
<li>onReady: è„šæœ¬åŠ è½½å®Œæˆåï¼Œä¸”ç»„ä»¶æ¯æ¬¡æŒ‚è½½çš„æ—¶å€™éƒ½ä¼šè§¦å‘ã€‚</li>
<li>onError: è„šæœ¬åŠ è½½å¤±è´¥æ—¶è§¦å‘ã€‚</li>
</ul>
<p>Scriptç»„ä»¶åªæœ‰åœ¨å¯¼å…¥å®¢æˆ·ç«¯çš„æ—¶å€™æ‰ä¼šç”Ÿæ•ˆï¼Œæ‰€ä»¥éœ€è¦ä½¿ç”¨<code>'use client'</code>å£°æ˜è¿™æ˜¯ä¸€ä¸ªå®¢æˆ·ç«¯ç»„ä»¶ã€‚</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-string">'use client'</span>
 
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Script</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'next/script'</span>
 
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Page</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Script</span>
        <span class="hljs-attr">src</span>=<span class="hljs-string">"https://example.com/script.js"</span>
        <span class="hljs-attr">onLoad</span>=<span class="hljs-string">{()</span> =&gt;</span><span class="javascript"> {
          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Script has loaded'</span>)
        }}
      /&gt;
    &lt;/&gt;</span></span>
  )
}
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[LeetCode çƒ­é¢˜100 --- åŒæŒ‡é’ˆä¸“åŒº]]></title>    <link>https://juejin.cn/post/7588002126258913286</link>    <guid>https://juejin.cn/post/7588002126258913286</guid>    <pubDate>2025-12-26T17:36:42.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588002126258913286" data-draft-id="7587322796826443816" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="LeetCode çƒ­é¢˜100 --- åŒæŒ‡é’ˆä¸“åŒº"/> <meta itemprop="keywords" content="ç®—æ³•"/> <meta itemprop="datePublished" content="2025-12-26T17:36:42.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è°è¨€è¥¿è¥¿é‡Œ"/> <meta itemprop="url" content="https://juejin.cn/user/332466136029851"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            LeetCode çƒ­é¢˜100 --- åŒæŒ‡é’ˆä¸“åŒº
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/332466136029851/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è°è¨€è¥¿è¥¿é‡Œ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-26T17:36:42.000Z" title="Fri Dec 26 2025 17:36:42 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0"><a href="https://link.juejin.cn?target=https%3A%2F%2Fleetcode.cn%2Fproblems%2Fmove-zeroes%2Fdescription%2F%3FenvType%3Dstudy-plan-v2%26envId%3Dtop-100-liked" target="_blank" title="https://leetcode.cn/problems/move-zeroes/description/?envType=study-plan-v2&amp;envId=top-100-liked" ref="nofollow noopener noreferrer">283. ç§»åŠ¨é›¶ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰</a></h2>
<h3 data-id="heading-1">é¢˜ç›®åˆ†æï¼š</h3>
<p>é¢˜ç›®è¦æ±‚å°†æ•°ç»„ <code>nums</code> ä¸­æ‰€æœ‰ 0 ç§»åŠ¨è‡³æ•°ç»„æœ«å°¾ï¼ŒåŒæ—¶ä¿æŒå…¶ä»–éé›¶å…ƒç´ çš„ç›¸å¯¹é¡ºåºä¸å˜ï¼Œå¹¶ä¸”è¦æ±‚åœ¨åŸæ•°ç»„ä¸Šè¿›è¡Œæ“ä½œã€‚</p>
<p>æ ¸å¿ƒè¦æ±‚ï¼š</p>
<ul>
<li><strong>0 è¦ç§»åŠ¨è‡³æ•°ç»„æœ«å°¾</strong></li>
<li><strong>éé›¶å…ƒç´ ç›¸å¯¹ä½ç½®ä¸å˜</strong></li>
<li><strong>åœ¨åŸæ•°ç»„ä¸Šè¿›è¡Œæ“ä½œ</strong></li>
</ul>
<h3 data-id="heading-2">è§£æ³•ä¸€ï¼ˆæš´åŠ›ä½¿ç”¨æ•°ç»„æ–¹æ³•ï¼‰</h3>
<p>éå†æ•°ç»„å°†å…¶ä¸­æ‰€æœ‰ä¸º 0 çš„æ•°<strong>ç›´æ¥ä½¿ç”¨<code>splice</code>åˆ é™¤</strong>å¹¶ä¸”<strong>è®°å½• 0 çš„ä¸ªæ•°</strong>ï¼Œæœ€å<strong>é€šè¿‡<code>push</code>å¡«å…¥</strong>â€œç§»åŠ¨â€çš„ 0</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">var</span> moveZeroes = <span class="hljs-keyword">function</span>(<span class="hljs-params">nums</span>) {
    <span class="hljs-keyword">let</span> n = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; nums.<span class="hljs-property">length</span>;){
        <span class="hljs-keyword">if</span>(nums[i] == <span class="hljs-number">0</span>){
            n++;
            nums.<span class="hljs-title function_">splice</span>(i, <span class="hljs-number">1</span>);
        } <span class="hljs-keyword">else</span> i++;
    }
    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> j = <span class="hljs-number">0</span>; j &lt; n; j++){
        nums.<span class="hljs-title function_">push</span>(<span class="hljs-number">0</span>);
    }
    <span class="hljs-keyword">return</span> nums;
};
</code></pre>
<h4 data-id="heading-3">â±ï¸ æ—¶é—´å¤æ‚åº¦åˆ†æ</h4>
<ul>
<li>
<p><strong><code>splice(i, 1)</code> çš„ä»£ä»·</strong>ï¼š<br/>
åœ¨æ•°ç»„ä¸­é—´åˆ é™¤ä¸€ä¸ªå…ƒç´ ï¼Œéœ€è¦å°† <strong>i åé¢çš„æ‰€æœ‰å…ƒç´ å‘å‰ç§»åŠ¨ä¸€ä½</strong>ã€‚<br/>
--&gt; <strong>æ—¶é—´å¤æ‚åº¦ä¸º O(k)</strong> ï¼Œå…¶ä¸­ k æ˜¯ä» i åˆ°æœ«å°¾çš„å…ƒç´ ä¸ªæ•°ã€‚</p>
</li>
<li>
<p>æœ€åçš„æƒ…å†µï¼šå‡è®¾æ•°ç»„ä¸­æœ‰ <code>z</code> ä¸ª 0ï¼Œä¸”å®ƒä»¬åˆ†å¸ƒåœ¨å‰é¢ï¼š</p>
<ul>
<li>ç¬¬ 1 ä¸ª 0 è¢«åˆ æ—¶ï¼Œç§»åŠ¨ n-1Â ä¸ªå…ƒç´ </li>
<li>ç¬¬ 2 ä¸ª 0 è¢«åˆ æ—¶ï¼Œç§»åŠ¨Â n-2Â ä¸ªå…ƒç´ </li>
<li>...</li>
<li>æœ€åæƒ…å†µæ€»ç§»åŠ¨æ¬¡æ•° â‰ˆÂ (n-1) + (n-2) + ... + (n-z)Â â‰ˆÂ <strong>O(nÂ²)</strong></li>
</ul>
<p>ï¼ˆä¾‹å¦‚è¾“å…¥ <code>[0,0,0,...,0,1]</code>ï¼‰</p>
</li>
<li>
<p><strong><code>push(0)</code>çš„ä»£ä»·</strong>ï¼š æ˜¯ O(z)ï¼Œå¯å¿½ç•¥ã€‚</p>
</li>
</ul>
<p><strong>æœ€åæ—¶é—´å¤æ‚åº¦ï¼šO(nÂ²)</strong></p>
<blockquote>
<p>æ³¨ï¼š</p>
<p>JavaScript æ•°ç»„åœ¨åº•å±‚é€šå¸¸æ˜¯è¿ç»­å†…å­˜ï¼Œè€Œ<code>splice(i, 1)</code>Â ä¼šè§¦å‘Â <strong>å¤§é‡å…ƒç´ çš„å†…å­˜æ‹·è´</strong></p>
<p>âš ï¸ å°½é‡<strong>é¿å…åœ¨å¾ªç¯ä¸­ä½¿ç”¨ <code>splice</code> åˆ é™¤å…ƒç´ </strong>ï¼Œå°¤å…¶æ˜¯åœ¨å¤„ç†å¤§æ•°ç»„æ—¶ï¼Œæ€§èƒ½ä¼šæ€¥å‰§ä¸‹é™</p>
</blockquote>
<h3 data-id="heading-4">è§£æ³•äºŒï¼ˆåŒæŒ‡é’ˆ + äº¤æ¢ï¼‰</h3>
<p>é¢˜ç›®çš„é—®é¢˜æœ¬è´¨ä¸Šæ˜¯å°†æ‰€æœ‰éé›¶çš„å…ƒç´ æŒ‰ç…§åŸå…ˆçš„ç›¸å¯¹é¡ºåºæ’åœ¨æ•°ç»„çš„æœ€å‰æ–¹ï¼Œé‚£ä¹ˆä¸å¦¨é€šè¿‡<strong>ä¸€ä¸ªæŒ‡é’ˆå®‰æ’éé›¶å…ƒç´ çš„ä½ç½®</strong>ï¼Œè€Œ<strong>å¦ä¸€ä¸ªæŒ‡é’ˆæ¥æŸ¥æ‰¾æ‰€æœ‰éé›¶çš„å…ƒç´ </strong>å¹¶ä¸”<strong>é€šè¿‡äº¤æ¢æ¥å°†å…¶æ”¾ç½®</strong>åœ¨æ­£ç¡®çš„ä½ç½®ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">var</span> moveZeroes = <span class="hljs-keyword">function</span>(<span class="hljs-params">nums</span>) {
    <span class="hljs-keyword">let</span> j = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; nums.<span class="hljs-property">length</span>; i++) {
        <span class="hljs-keyword">if</span> (nums[i] != <span class="hljs-number">0</span>) {
            <span class="hljs-keyword">let</span> temp = nums[j];
            nums[j] = nums[i];
            nums[i] = temp;
            <span class="hljs-comment">// [çµèŒ¶å±±è‰¾åºœ] çµç¥åšæ³•ï¼š</span>
            <span class="hljs-comment">// [nums[j],nums[i]] = [nums[i],nums[j]]; ï¼ˆæ›´ç®€æ´ã€æ›´ç°ä»£ï¼‰</span>
            j++;
        }
    }
};
</code></pre>
<h4 data-id="heading-5">â±ï¸ æ—¶é—´å¤æ‚åº¦åˆ†æ</h4>
<ul>
<li><strong>å•æ¬¡éå†</strong>ï¼š<br/>
ä½¿ç”¨ <code>for</code> å¾ªç¯ä» <code>i = 0</code> åˆ° <code>i = nums.length - 1</code> éå†æ•°ç»„ä¸€æ¬¡ â†’ <strong>O(n)</strong></li>
<li><strong>äº¤æ¢æ“ä½œ</strong>ï¼š<br/>
æ¯æ¬¡é‡åˆ°éé›¶å…ƒç´ æ—¶ï¼Œæ‰§è¡Œä¸€æ¬¡äº¤æ¢ï¼ˆé€šè¿‡ä¸´æ—¶å˜é‡æˆ–è§£æ„èµ‹å€¼ï¼‰ï¼Œè¯¥æ“ä½œä¸º <strong>O(1)</strong> ï¼›<br/>
ç”±äº <code>i</code> å•è°ƒé€’å¢ã€<code>j</code> ä¸å›é€€ï¼Œæ¯ä¸ªå…ƒç´ æœ€å¤šè¢«è®¿é—®å’Œäº¤æ¢ä¸€æ¬¡ â†’ <strong>æ€»äº¤æ¢å¼€é”€ä¸º O(n)</strong></li>
<li><strong>æ€»æ—¶é—´å¤æ‚åº¦</strong>ï¼šO(n) + O(n) = <strong>O(n)</strong></li>
</ul>
<h2 data-id="heading-6"><a href="https://link.juejin.cn?target=https%3A%2F%2Fleetcode.cn%2Fproblems%2Fcontainer-with-most-water%2Fdescription%2F%3FenvType%3Dstudy-plan-v2%26envId%3Dtop-100-liked" target="_blank" title="https://leetcode.cn/problems/container-with-most-water/description/?envType=study-plan-v2&amp;envId=top-100-liked" ref="nofollow noopener noreferrer">11. ç››æœ€å¤šæ°´çš„å®¹å™¨ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰</a></h2>
<h3 data-id="heading-7">é¢˜ç›®åˆ†æï¼š</h3>
<p>é¢˜ç›®è¦æ±‚ä»ç»™å®šçš„æ•´æ•°æ•°ç»„ <code>height</code> ä¸­é€‰æ‹©ä¸¤æ¡å‚çº¿ï¼Œä½¿å¾—å®ƒä»¬ä¸ x è½´å…±åŒæ„æˆçš„å®¹å™¨å¯ä»¥å®¹çº³æœ€å¤šçš„æ°´ï¼Œå¹¶è¿”å›è¯¥æœ€å¤§æ°´é‡ã€‚</p>
<p>æ ¸å¿ƒè¦æ±‚ï¼š</p>
<ul>
<li><strong>å®¹å™¨ä¸èƒ½å€¾æ–œ</strong></li>
<li><strong>è¾ƒçŸ­çš„ä¸€æ¡å†³å®šå®¹å™¨çš„é«˜åº¦</strong></li>
<li><strong>å®¹å™¨çš„å®½åº¦ä¸ºç´¢å¼•ä¹‹å·®</strong></li>
<li><strong>ç›®æ ‡æ˜¯ä½¿å®¹å™¨çš„é¢ç§¯ï¼ˆæ°´é‡ï¼‰æœ€å¤§åŒ–</strong></li>
</ul>
<p>æœ¬é¢˜æœ¬è´¨ä¸Šæ˜¯åœ¨æ‰€æœ‰å¯èƒ½çš„å‚çº¿å¯¹ <code>(i, j)</code>ï¼ˆå…¶ä¸­ <code>i &lt; j</code>ï¼‰ä¸­ï¼Œå¯»æ‰¾ä½¿é¢ç§¯</p>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>area</mtext><mo>=</mo><mo stretchy="false">(</mo><mi>j</mi><mo>âˆ’</mo><mi>i</mi><mo stretchy="false">)</mo><mo>Ã—</mo><mi>min</mi><mo>â¡</mo><mo stretchy="false">(</mo><mtext>height</mtext><mo stretchy="false">[</mo><mi>i</mi><mo stretchy="false">]</mo><mo separator="true">,</mo><mtext>height</mtext><mo stretchy="false">[</mo><mi>j</mi><mo stretchy="false">]</mo><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\text{area} = (j - i) \times \min(\text{height}[i], \text{height}[j])</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"/><span class="mord text"><span class="mord">area</span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal">i</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mop">min</span><span class="mopen">(</span><span class="mord text"><span class="mord">height</span></span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord text"><span class="mord">height</span></span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span><span class="mclose">])</span></span></span></span></span></p>
<p>æœ€å¤§çš„ç»„åˆã€‚</p>
<h3 data-id="heading-8">è§£æ³•ï¼ˆåŒæŒ‡é’ˆï¼‰</h3>
<p>é¢˜ç›®æœ¬æ„å°±æ˜¯è¦æ‰¾åˆ°ä¸¤ä¸ªå°½å¯èƒ½è¿œä¸”å°½å¯èƒ½é«˜çš„æ•°æ®ï¼Œé‚£ä¹ˆä¸å¦¨å…ˆ<strong>æŠŠä¸¤ä¸ªæŒ‡é’ˆæ”¾ç½®æœ€è¿œ</strong>ï¼Œå†é€šè¿‡<strong>é€ä¸€å‡å°è·ç¦»æ¥æ‰¾åˆ°å°½å¯èƒ½é«˜çš„æ•°æ®æ¥å¹³è¡¡è·ç¦»çš„ç¼©å‡</strong>ã€‚</p>
<p><strong>ä¼˜åŒ–ï¼š</strong> ç”±äºè·ç¦»åœ¨ç¼©å‡ï¼Œæ‰€ä»¥å¦‚æœæ•°æ®è¿˜å‡å°çš„è¯ï¼Œé‚£ä¹ˆæ€»é‡ä¸€å®šå‡å°ï¼Œæ‰€ä»¥åªèƒ½ç‰ºç‰²æ›´å°çš„ä¸€è¾¹å‘ä¸­å¿ƒæŸ¥æ‰¾æ˜¯å¦èƒ½æ‰¾åˆ°æ›´é«˜çš„æ•°æ®ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">var</span> maxArea = <span class="hljs-keyword">function</span>(<span class="hljs-params">height</span>) {
    <span class="hljs-keyword">let</span> left = <span class="hljs-number">0</span>, right = height.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>;
    <span class="hljs-comment">// æ€»é¢ç§¯</span>
    <span class="hljs-keyword">let</span> m = <span class="hljs-number">0</span>;
    
    <span class="hljs-keyword">while</span>(left &lt; right) {
        <span class="hljs-comment">// è®¡ç®—å½“å‰é¢ç§¯å¹¶æ¯”è¾ƒå¤§å°</span>
        area = (right - left) * <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(height[left], height[right])
        m = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(area, m);
        <span class="hljs-comment">// åˆ¤æ–­å“ªæ–¹æ›´å°ï¼Œå“ªæ–¹ç§»åŠ¨</span>
        <span class="hljs-keyword">if</span> (height[left] &lt; height[right]) left++;
        <span class="hljs-keyword">else</span> right--;
    }
    <span class="hljs-keyword">return</span> m;
}
</code></pre>
<h2 data-id="heading-9"><a href="https://link.juejin.cn?target=https%3A%2F%2Fleetcode.cn%2Fproblems%2F3sum%2Fdescription%2F%3FenvType%3Dstudy-plan-v2%26envId%3Dtop-100-liked" target="_blank" title="https://leetcode.cn/problems/3sum/description/?envType=study-plan-v2&amp;envId=top-100-liked" ref="nofollow noopener noreferrer">15. ä¸‰æ•°ä¹‹å’Œ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰</a></h2>
<h3 data-id="heading-10">é¢˜ç›®åˆ†æï¼š</h3>
<p>é¢˜ç›®è¦æ±‚ä»ç»™å®šçš„æ•´æ•°æ•°ç»„ <code>nums</code> ä¸­æ‰¾å‡º<strong>æ‰€æœ‰ä¸‹æ ‡ä¸é‡å¤çš„ä¸‰å…ƒç»„</strong>ï¼Œä½¿å¾—ä¸‰ä¸ªæ•°çš„å’Œä¸º 0ï¼Œå¹¶ä¸”æ¯ç»„ä¸åŒã€‚</p>
<p>æ ¸å¿ƒè¦æ±‚ï¼š</p>
<ul>
<li><strong>ä¸‰å…ƒç»„ä¸­çš„ä¸‰ä¸ªæ•°ä¹‹å’Œå¿…é¡»ç­‰äº 0</strong></li>
<li><strong>ç»“æœä¸­ä¸èƒ½åŒ…å«é‡å¤çš„ä¸‰å…ƒç»„</strong></li>
<li><strong>ä¸‰å…ƒç»„å†…çš„å…ƒç´ å¯ä»¥æŒ‰ä»»æ„é¡ºåºæ’åˆ—</strong></li>
<li><strong>æ¯ä¸ªä¸‰å…ƒç»„ä¸­çš„å…ƒç´ å¿…é¡»æ¥è‡ªæ•°ç»„ä¸­ä¸åŒçš„ä½ç½®ï¼ˆä½†å€¼å¯ä»¥ç›¸åŒï¼‰</strong></li>
</ul>
<p>æœ¬é¢˜æœ¬è´¨ä¸Šæ˜¯åœ¨æ•°ç»„ä¸­å¯»æ‰¾æ‰€æœ‰æ»¡è¶³<br/>
<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>nums</mtext><mo stretchy="false">[</mo><mi>i</mi><mo stretchy="false">]</mo><mo>+</mo><mtext>nums</mtext><mo stretchy="false">[</mo><mi>j</mi><mo stretchy="false">]</mo><mo>+</mo><mtext>nums</mtext><mo stretchy="false">[</mo><mi>k</mi><mo stretchy="false">]</mo><mo>=</mo><mn>0</mn><mspace width="1em"/></mrow><annotation encoding="application/x-tex">\text{nums}[i] + \text{nums}[j] + \text{nums}[k] = 0 \quad</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord text"><span class="mord">nums</span></span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord text"><span class="mord">nums</span></span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord text"><span class="mord">nums</span></span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">0</span><span class="mspace" style="margin-right:1em;"/></span></span></span></span><br/>
çš„ä¸‰å…ƒç»„ï¼Œå¹¶ç¡®ä¿ç»“æœé›†åˆä¸­æ— é‡å¤ã€‚</p>
<hr/>
<h3 data-id="heading-11">è§£æ³•ï¼ˆæ’åº + åŒæŒ‡é’ˆï¼‰</h3>
<p>æš´åŠ›æšä¸¾éœ€è¦ä¸‰é‡å¾ªç¯ï¼Œè¿™æ ·æ—¶é—´å¤æ‚åº¦å°†ä¼šé£™å‡åˆ° O(nÂ³)ï¼Œæ•ˆç‡æå…¶ä½ä¸‹ï¼Œæ‰€ä»¥æˆ‘ä»¬é‡‡ç”¨<strong>æ’åº + å›ºå®šä¸€ä¸ªæ•° + åŒæŒ‡é’ˆ</strong>çš„ä¼˜åŒ–ç­–ç•¥ã€‚</p>
<p><strong>å…³é”®æ€æƒ³ï¼š</strong></p>
<ol>
<li>
<p><strong>å…ˆå¯¹æ•°ç»„æ’åº</strong>ï¼Œåç»­å¯ä»¥é€šè¿‡å¤§å°å…³ç³»ç§»åŠ¨æŒ‡é’ˆã€‚å½“åˆ°è¾¾åˆ†ç•Œç‚¹ <code>0</code>æ—¶ï¼Œåç»­æ‰€æœ‰å€¼æ— è®ºå¦‚ä½•å¢åŠ æ€»å€¼éƒ½ä¸ä¼šä¸ºé›¶ï¼ˆä¼˜åŒ–ç‚¹ï¼‰ï¼›</p>
</li>
<li>
<p><strong>å›ºå®šç¬¬ä¸€ä¸ªæ•° <code>nums[i]</code></strong> ï¼Œå°†å…¶è½¬åŒ–ä¸ºâ€œåœ¨å‰©ä½™æ•°ç»„ä¸­æ‰¾ä¸¤æ•°ä¹‹å’Œä¸º <code>-nums[i]</code>â€çš„é—®é¢˜ï¼›</p>
</li>
<li>
<p><strong>ä½¿ç”¨åŒæŒ‡é’ˆ <code>left = i+1</code>ã€<code>right = n-1</code></strong> å‘ä¸­é—´æ”¶ç¼©ï¼Œæ ¹æ®å½“å‰å’Œä¸ç›®æ ‡å€¼çš„å¤§å°å…³ç³»ç§»åŠ¨æŒ‡é’ˆï¼›</p>
</li>
<li>
<p><strong>è·³è¿‡é‡å¤å€¼</strong>ï¼š</p>
<ul>
<li>è‹¥ <code>nums[i] == nums[i-1]</code>ï¼Œè·³è¿‡é‡å¤ï¼›</li>
<li>æ‰¾åˆ°ä¸€ç»„è§£åï¼Œç»§ç»­è·³è¿‡ <code>left</code> å’Œ <code>right</code> çš„é‡å¤å€¼ï¼Œé˜²æ­¢é‡å¤ç­”æ¡ˆã€‚</li>
</ul>
</li>
</ol>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">var</span> threeSum = <span class="hljs-keyword">function</span>(<span class="hljs-params">nums</span>) {
    <span class="hljs-comment">// å…ˆæ’åºï¼šå‡åºæ’åˆ—ï¼Œä½¿ç”¨JSå†…ç½®çš„ sort æ–¹æ³•</span>
    <span class="hljs-comment">// sort() æ ¹æ®è¿”å›å€¼å†³å®š a å’Œ b è°æ’åœ¨å‰é¢</span>
    <span class="hljs-comment">// a - b &lt;= 0 ==&gt; é¡ºåºä¸º a, b</span>
    <span class="hljs-comment">// a - b &gt;  0 ==&gt; é¡ºåºä¸º b, a</span>
    nums.<span class="hljs-title function_">sort</span>(<span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> a - b);
    <span class="hljs-keyword">const</span> res = [];

    <span class="hljs-comment">// å›ºå®šç¬¬ä¸€ä¸ªæ•° nums[i]</span>
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; nums.<span class="hljs-property">length</span> - <span class="hljs-number">2</span>; i++) {
        <span class="hljs-comment">// æœ€å°å€¼å·²å¤§äº 0ï¼Œåç»­ä¸å¯èƒ½æœ‰è§£</span>
        <span class="hljs-keyword">if</span> (nums[i] &gt; <span class="hljs-number">0</span>) <span class="hljs-keyword">break</span>;

        <span class="hljs-comment">// è·³è¿‡é‡å¤çš„èµ·å§‹å€¼ï¼Œé¿å…é‡å¤ä¸‰å…ƒç»„</span>
        <span class="hljs-keyword">if</span> (i &gt; <span class="hljs-number">0</span> &amp;&amp; nums[i] === nums[i - <span class="hljs-number">1</span>]) <span class="hljs-keyword">continue</span>;
        <span class="hljs-comment">// åŒæŒ‡é’ˆ</span>
        <span class="hljs-keyword">let</span> left = i + <span class="hljs-number">1</span>;
        <span class="hljs-keyword">let</span> right = nums.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>;

        <span class="hljs-keyword">while</span> (left &lt; right) {
            <span class="hljs-keyword">const</span> sum = nums[i] + nums[left] + nums[right];
            <span class="hljs-keyword">if</span> (sum === <span class="hljs-number">0</span>) {
                res.<span class="hljs-title function_">push</span>([nums[i], nums[left], nums[right]]);
                
                <span class="hljs-comment">// ç§»åŠ¨åŒæŒ‡é’ˆï¼Œç»§ç»­æŸ¥æ‰¾</span>
                left++;
                right--;
                <span class="hljs-comment">// è·³è¿‡é‡å¤ç»„</span>
                <span class="hljs-keyword">while</span> (left &lt; right &amp;&amp; nums[left] === nums[left - <span class="hljs-number">1</span>]) left++;
                <span class="hljs-keyword">while</span> (left &lt; right &amp;&amp; nums[right] === nums[right + <span class="hljs-number">1</span>]) right--;
            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (sum &lt; <span class="hljs-number">0</span>) {
                <span class="hljs-comment">// å’Œå¤ªå°ï¼Œéœ€å¢å¤§ â†’ å·¦æŒ‡é’ˆå³ç§»</span>
                left++;
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-comment">// å’Œå¤ªå¤§ï¼Œéœ€å‡å° â†’ å³æŒ‡é’ˆå·¦ç§»</span>
                right--;
            }
        }
    }
    <span class="hljs-keyword">return</span> res;
};
</code></pre>
<h4 data-id="heading-12">â±ï¸ æ—¶é—´å¤æ‚åº¦åˆ†æ</h4>
<ul>
<li><strong>æ’åºæ“ä½œ</strong>ï¼š<br/>
è°ƒç”¨ <code>nums.sort((a, b) =&gt; a - b)</code> å¯¹æ•°ç»„è¿›è¡Œå‡åºæ’åºï¼ŒJavaScript å¼•æ“é€šå¸¸é‡‡ç”¨é«˜æ•ˆæ’åºç®—æ³•ï¼Œæ—¶é—´å¤æ‚åº¦ --&gt;  <strong>O(n log n)</strong> ã€‚</li>
<li><strong>å¤–å±‚å¾ªç¯</strong>ï¼š<br/>
<code>for</code> å¾ªç¯éå† <code>i</code> ä» <code>0</code> åˆ° <code>nums.length - 3</code>ï¼Œæ—¶é—´å¤æ‚åº¦ --&gt;  <strong>O(n)</strong> ã€‚</li>
<li><strong>å†…å±‚åŒæŒ‡é’ˆæ‰«æ</strong>ï¼š<br/>
å¯¹äºæ¯ä¸ªå›ºå®šçš„ <code>i</code>ï¼Œ<code>left</code> å’Œ <code>right</code> ä»ä¸¤ç«¯å‘ä¸­é—´ç§»åŠ¨ï¼Œ<strong>æ¯ä¸ªå…ƒç´ åœ¨è¯¥è½®ä¸­æœ€å¤šè¢«è®¿é—®ä¸€æ¬¡</strong>ï¼Œå› æ­¤æ¯è½®å†…å±‚å¾ªç¯çš„æ—¶é—´å¤æ‚åº¦ --&gt; <strong>O(n)</strong> ã€‚<br/>
ç”±äºå¤–å±‚å¾ªç¯æ‰§è¡Œ O(n) æ¬¡ï¼Œæœ¬åº”å½“ä¸º O(nÂ²)ï¼Œä½†æ˜¯å¹¶éæ¯è½®éƒ½èµ°å®Œæ•´ä¸ªæ•°ç»„ï¼Œæ‰€ä»¥æœ€åæƒ…å†µä¸‹ --&gt; <strong>O(nÂ²)</strong>ã€‚</li>
<li><strong>æ€»æ—¶é—´å¤æ‚åº¦</strong>ï¼šæ’åº O(n log n) + åŒæŒ‡é’ˆä¸»é€»è¾‘ O(nÂ²) = <strong>O(nÂ²)</strong></li>
</ul>
<h2 data-id="heading-13"><a href="https://link.juejin.cn?target=https%3A%2F%2Fleetcode.cn%2Fproblems%2Ftrapping-rain-water%2Fdescription%2F%3FenvType%3Dstudy-plan-v2%26envId%3Dtop-100-liked" target="_blank" title="https://leetcode.cn/problems/trapping-rain-water/description/?envType=study-plan-v2&amp;envId=top-100-liked" ref="nofollow noopener noreferrer">42. æ¥é›¨æ°´ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰</a></h2>
<h3 data-id="heading-14">é¢˜ç›®åˆ†æï¼š</h3>
<p>é¢˜ç›®è¦æ±‚è®¡ç®—åœ¨ç»™å®šçš„éè´Ÿæ•´æ•°æ•°ç»„ <code>height</code> æ‰€è¡¨ç¤ºçš„æŸ±çŠ¶å›¾ä¸­ï¼Œ<strong>èƒ½æ¥ä½å¤šå°‘å•ä½çš„é›¨æ°´</strong>ã€‚æ¯ä¸ªå…ƒç´  <code>height[i]</code> è¡¨ç¤ºä½ç½® <code>i</code> å¤„æŸ±å­çš„é«˜åº¦ï¼Œå®½åº¦å‡ä¸º 1ã€‚</p>
<p>æ ¸å¿ƒè¦æ±‚ï¼š</p>
<ul>
<li><strong>é›¨æ°´åªèƒ½ç§¯åœ¨â€œå‡¹é™·â€åŒºåŸŸ</strong>ï¼Œå³ä¸¤ä¾§æœ‰æ›´é«˜æŸ±å­çš„ä½ç½®ï¼›</li>
<li><strong>æ¯ä¸ªä½ç½®èƒ½æ¥çš„é›¨æ°´é‡ = min(å·¦ä¾§æœ€é«˜æŸ±, å³ä¾§æœ€é«˜æŸ±) - å½“å‰é«˜åº¦</strong>ï¼ˆè‹¥ç»“æœä¸ºæ­£ï¼Œå¦åˆ™ä¸º 0ï¼‰ï¼›</li>
<li><strong>ä¸èƒ½å€¾æ–œå®¹å™¨ï¼Œé›¨æ°´å‚ç›´ä¸‹è½å¹¶è¢«ä¸¤ä¾§æŸ±å­å›´ä½</strong>ï¼›</li>
<li><strong>ç›®æ ‡æ˜¯è¿”å›æ•´ä¸ªç»“æ„èƒ½å‚¨å­˜çš„æ€»é›¨æ°´é‡</strong>ã€‚</li>
</ul>
<p>æœ¬é¢˜æœ¬è´¨ä¸Šæ˜¯ï¼šå¯¹æ¯ä¸ªä½ç½® <code>i</code>ï¼Œå¿«é€Ÿç¡®å®šå…¶<strong>å·¦ä¾§æœ€å¤§é«˜åº¦</strong>å’Œ<strong>å³ä¾§æœ€å¤§é«˜åº¦</strong>ï¼Œä»è€Œè®¡ç®—è¯¥ä½ç½®çš„ç§¯æ°´ã€‚</p>
<hr/>
<h3 data-id="heading-15">è§£æ³•ï¼ˆåŒæŒ‡é’ˆ + åŠ¨æ€è¾¹ç•Œï¼‰</h3>
<p>æš´åŠ›è§£æ³•éœ€å¯¹æ¯ä¸ªä½ç½®éå†å·¦å³æ±‚æœ€å¤§å€¼ï¼Œæ—¶é—´å¤æ‚åº¦ O(nÂ²)ã€‚å³ä½¿ä½¿ç”¨é¢å¤–æ•°ç»„é¢„å¤„ç†å·¦å³æœ€å¤§å€¼å¯ä¼˜åŒ–è‡³ O(n)ï¼Œä½†æ˜¯ç©ºé—´å ç”¨è¿˜æ˜¯è¿‡å¤§ã€‚</p>
<p>æ‰€ä»¥è§£æ³•é‡‡ç”¨<strong>åŒæŒ‡é’ˆä»ä¸¤ç«¯å‘ä¸­é—´æ”¶ç¼©</strong>ï¼Œå†åˆ©ç”¨<strong>è´ªå¿ƒæ€æƒ³</strong>å®ç° <strong>O(1) ç©ºé—´ã€O(n) æ—¶é—´</strong> çš„æœ€ä¼˜è§£ã€‚</p>
<p><strong>å…³é”®æ€æƒ³ï¼š</strong></p>
<ol>
<li>
<p><strong>ç»´æŠ¤ä¸¤ä¸ªå˜é‡ <code>lmax</code> å’Œ <code>rmax</code></strong>ï¼Œåˆ†åˆ«è¡¨ç¤ºå½“å‰ <code>left</code> æŒ‡é’ˆå·¦ä¾§ï¼ˆå«è‡ªèº«ï¼‰çš„æœ€å¤§é«˜åº¦ï¼Œä»¥åŠ <code>right</code> æŒ‡é’ˆå³ä¾§ï¼ˆå«è‡ªèº«ï¼‰çš„æœ€å¤§é«˜åº¦ï¼›</p>
</li>
<li>
<p><strong>æ¯”è¾ƒ <code>lmax</code> ä¸ <code>rmax</code></strong>ï¼š</p>
<ul>
<li>è‹¥ <code>lmax &lt; rmax</code>ï¼Œè¯´æ˜ <code>left</code> ä½ç½®çš„ç§¯æ°´<strong>ç”±å·¦ä¾§æœ€å¤§å€¼å†³å®š</strong>ï¼ˆå› ä¸ºå³ä¾§å­˜åœ¨æ›´é«˜çš„è¾¹ç•Œï¼‰ï¼Œæ­¤æ—¶å¯å®‰å…¨è®¡ç®— <code>left</code> å¤„çš„ç§¯æ°´ï¼›</li>
<li>å¦åˆ™ï¼Œ<code>right</code> ä½ç½®çš„ç§¯æ°´ç”±å³ä¾§æœ€å¤§å€¼å†³å®šï¼Œè®¡ç®— <code>right</code> å¤„çš„ç§¯æ°´ï¼›</li>
</ul>
</li>
<li>
<p><strong>æ¯æ¬¡åªç§»åŠ¨è¾ƒçŸ®ä¸€ä¾§çš„æŒ‡é’ˆ</strong>ï¼Œç¡®ä¿å¦ä¸€ä¾§å§‹ç»ˆå­˜åœ¨è¶³å¤Ÿé«˜çš„â€œæŒ¡æ¿â€ï¼Œä»è€Œä¿è¯å½“å‰ç§¯æ°´è®¡ç®—çš„æ­£ç¡®æ€§ã€‚</p>
</li>
<li>
<p>å¹¶ä¸”ä¸¤ä¸ªæŒ‡é’ˆ<strong>ç›¸é‡çš„ä½ç½®ä¸€å®šä¸ºæœ€é«˜çš„æŸ±å­</strong>ï¼Œè¿™ä¸ªæŸ±å­æ˜¯æ— æ³•è£…æ°´çš„ã€‚</p>
</li>
</ol>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">var</span> trap = <span class="hljs-keyword">function</span>(<span class="hljs-params">height</span>) {
    <span class="hljs-comment">// åˆ›å»ºåŒæŒ‡é’ˆ </span>
    <span class="hljs-keyword">let</span> left = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">let</span> right = height.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>;

    <span class="hljs-keyword">let</span> m = <span class="hljs-number">0</span>;              <span class="hljs-comment">// æ€»é›¨æ°´é‡</span>
    <span class="hljs-keyword">let</span> lmax = <span class="hljs-number">0</span>, rmax = <span class="hljs-number">0</span>; <span class="hljs-comment">// å½“å‰å·¦å³ä¾§æœ€å¤§é«˜åº¦</span>

    <span class="hljs-keyword">while</span> (left &lt; right) {
        <span class="hljs-comment">// æ›´æ–°å·¦å³ä¾§æœ€å¤§é«˜åº¦</span>
        lmax = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(lmax, height[left]);
        rmax = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(rmax, height[right]);

        <span class="hljs-keyword">if</span> (lmax &lt; rmax) {
            <span class="hljs-comment">// å·¦ä¾§æœ€å¤§å€¼æ›´å° â†’ left ä½ç½®çš„ç§¯æ°´ç”± lmax å†³å®š</span>
            m += lmax - height[left];
            left++;
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-comment">// å³ä¾§æœ€å¤§å€¼æ›´å°æˆ–ç›¸ç­‰ â†’ right ä½ç½®çš„ç§¯æ°´ç”± rmax å†³å®š</span>
            m += rmax - height[right];
            right--;
        }
    }
    <span class="hljs-keyword">return</span> m;
};
</code></pre>
<h4 data-id="heading-16">â±ï¸ æ—¶é—´å¤æ‚åº¦åˆ†æ</h4>
<ul>
<li><strong>åŒæŒ‡é’ˆéå†</strong>ï¼š<br/>
<code>left</code> å’Œ <code>right</code> ä»ä¸¤ç«¯å‘ä¸­é—´ç§»åŠ¨ï¼Œ<strong>æ¯ä¸ªå…ƒç´ æœ€å¤šè¢«è®¿é—®ä¸€æ¬¡</strong>ï¼Œå¾ªç¯æ‰§è¡Œ <strong>O(n)</strong> æ¬¡ã€‚</li>
<li><strong>æ¯è½®æ“ä½œ</strong>ï¼š<br/>
åŒ…æ‹¬ <code>Math.max</code>ã€æ¯”è¾ƒã€åŠ æ³•å’ŒæŒ‡é’ˆç§»åŠ¨ï¼Œå‡ä¸º <strong>O(1)</strong> å¸¸æ•°æ—¶é—´æ“ä½œã€‚</li>
<li><strong>æ€»æ—¶é—´å¤æ‚åº¦</strong>ï¼š<strong>O(n)</strong></li>
<li><strong>ç©ºé—´å¤æ‚åº¦</strong>ï¼šä»…ä½¿ç”¨å¸¸æ•°ä¸ªå˜é‡ï¼ˆ<code>left</code>, <code>right</code>, <code>m</code>, <code>lmax</code>, <code>rmax</code>ï¼‰â†’ <strong>O(1)</strong></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åˆ«å†è®© AI ç›´æ¥å†™é¡µé¢äº†ï¼šä¸€ç§æ›´ç¨³çš„ä¸­åå°å¼€å‘æ–¹å¼]]></title>    <link>https://juejin.cn/post/7587965800273362970</link>    <guid>https://juejin.cn/post/7587965800273362970</guid>    <pubDate>2025-12-26T16:35:04.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587965800273362970" data-draft-id="7587997893988089883" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åˆ«å†è®© AI ç›´æ¥å†™é¡µé¢äº†ï¼šä¸€ç§æ›´ç¨³çš„ä¸­åå°å¼€å‘æ–¹å¼"/> <meta itemprop="keywords" content="å‰ç«¯,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-12-26T16:35:04.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æœˆäº®æœ‰çŸ³å¤´"/> <meta itemprop="url" content="https://juejin.cn/user/3526889032395613"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åˆ«å†è®© AI ç›´æ¥å†™é¡µé¢äº†ï¼šä¸€ç§æ›´ç¨³çš„ä¸­åå°å¼€å‘æ–¹å¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3526889032395613/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æœˆäº®æœ‰çŸ³å¤´
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-26T16:35:04.000Z" title="Fri Dec 26 2025 16:35:04 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body cache result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><strong>æœ¬æ–‡è®¨è®ºçš„ä¸æ˜¯ Demo çº§åˆ«çš„ AI ç¼–ç ä½“éªŒï¼Œè€Œæ˜¯é¢å‘çœŸå®å›¢é˜Ÿã€é•¿æœŸç»´æŠ¤çš„ä¸­åå°å·¥ç¨‹å®è·µã€‚</strong></p>
<blockquote>
<p><strong>AI èƒ½å†™ä»£ç ï¼Œä½†ä¸æ„å‘³ç€å®ƒé€‚åˆç›´æ¥â€œäº§å‡ºé¡µé¢â€ã€‚</strong></p>
</blockquote>
<p>æœ€è¿‘ä¸€å¹´ï¼Œå¤§æ¨¡å‹åœ¨å‰ç«¯é¢†åŸŸçš„è®¨è®ºå‡ ä¹éƒ½å›´ç»•ä¸€ä¸ªé—®é¢˜ï¼š</p>
<blockquote>
<p><strong>â€œèƒ½ä¸èƒ½è®© AI ç›´æ¥æŠŠé¡µé¢å†™å‡ºæ¥ï¼Ÿâ€</strong></p>
</blockquote>
<p>åœ¨çœŸå®çš„ä¸­åå°é¡¹ç›®ä¸­ï¼Œæˆ‘çš„ç­”æ¡ˆæ˜¯ï¼š<br/>
<strong>ä¸ä½†ä¸ç¨³ï¼Œè€Œä¸”å¾ˆå±é™©ã€‚</strong></p>
<p>è¿™ç¯‡æ–‡ç« æƒ³åˆ†äº«ä¸€ç§æˆ‘åœ¨çœŸå®é¡¹ç›®ä¸­å®è·µè¿‡ã€<strong>å¯é•¿æœŸä½¿ç”¨ã€å¯è§„æ¨¡åŒ–</strong>çš„æ–¹å¼ï¼š<br/>
<strong>ä¸æ˜¯è®© AI å†™é¡µé¢ï¼Œè€Œæ˜¯æŠŠ AI çº³å…¥ä¸­åå°å‰ç«¯çš„å·¥ç¨‹ä½“ç³»ä¸­ã€‚</strong>
æŠŠ AI çš„ä¸ç¡®å®šæ€§å…³è¿›äº†ç¬¼å­é‡Œï¼Œç”¨å·¥ç¨‹æµç¨‹ä¿è¯å¯æ§æ€§ã€‚</p>
<p><strong>æ¨¡æ¿å›ºåŒ–è§„èŒƒï¼ŒSpec æè¿°å˜åŒ–ï¼Œå¤§æ¨¡å‹ç”Ÿæˆ Specï¼Œè„šæœ¬ç”Ÿæˆä»£ç ï¼Œlint/test åšå…œåº•ã€‚</strong>
å®ƒè§£å†³äº† AI ä¸Šå·¥ç¨‹æœ€è‡´å‘½çš„å››ä»¶äº‹ï¼š</p>
<ol>
<li><strong>å¯å®¡è®¡</strong>ï¼šå˜åŒ–åœ¨ specï¼Œç”Ÿæˆç»“æœå¯ diff</li>
<li><strong>å¯é‡å¤</strong>ï¼šåŒä¸€ä¸ª spec åå¤ç”Ÿæˆç»“æœä¸€è‡´</li>
<li><strong>å¯å…œåº•</strong>ï¼šlint/test æ˜¯ç¡¬é—¨æ§›</li>
<li><strong>å¯è§„æ¨¡åŒ–</strong>ï¼šä» prompt å·¥è‰ºå˜æˆæµç¨‹</li>
</ol>
<p>åœ¨ä¸­åå°åœºæ™¯ï¼Œå°¤å…¶æ˜¯ <strong>CRUD å æ¯”é«˜</strong> çš„é¡¹ç›®é‡Œï¼Œè¿™å‡ ä¹å°±æ˜¯â€œæ€§ä»·æ¯”æœ€ä¼˜è§£â€ã€‚</p>
<h2 data-id="heading-0">ä¸€ã€ä¸­åå°é¡µé¢å¼€å‘çš„çœŸå®å›°å¢ƒ</h2>
<p>å¦‚æœä½ åšè¿‡ä¸­åå°å‰ç«¯ï¼Œä¸€å®šå¯¹ä¸‹é¢è¿™äº›åœºæ™¯ä¸é™Œç”Ÿï¼š</p>
<ul>
<li>é¡µé¢ 80% æ˜¯ CRUD</li>
<li>åˆ—è¡¨é¡µç»“æ„é«˜åº¦ä¸€è‡´</li>
<li>è¡¨å•å­—æ®µä¸æ–­å˜åŒ–</li>
<li>å¤§é‡å¤åˆ¶ç²˜è´´</li>
<li>é¡µé¢é€»è¾‘â€œçœ‹èµ·æ¥å·®ä¸å¤šï¼Œä½†æ°¸è¿œä¸å®Œå…¨ä¸€æ ·â€</li>
</ul>
<p>æœ€ç»ˆç»“æœå¾€å¾€æ˜¯ï¼š</p>
<ul>
<li>ä»£ç å†—ä½™</li>
<li>é£æ ¼ä¸ç»Ÿä¸€</li>
<li>æ–°äººä¸Šæ‰‹æ…¢</li>
<li>æ”¹ä¸€ä¸ªå­—æ®µè¦æ”¹å¥½å‡ ä¸ªåœ°æ–¹</li>
</ul>
<p>è¿™äº›é—®é¢˜<strong>ä¸æ˜¯æŸä¸ªæ¡†æ¶çš„é—®é¢˜</strong>ï¼Œè€Œæ˜¯ä¸­åå°å¼€å‘çš„ç»“æ„æ€§é—®é¢˜ã€‚</p>
<h2 data-id="heading-1">äºŒã€ä¸ºä»€ä¹ˆâ€œè®© AI ç›´æ¥å†™é¡µé¢â€åœ¨çœŸå®é¡¹ç›®é‡Œè¡Œä¸é€šï¼Ÿ</h2>
<p>å¾ˆå¤šäººç¬¬ä¸€ååº”æ˜¯ï¼š</p>
<blockquote>
<p>â€œæ—¢ç„¶é¡µé¢è¿™ä¹ˆé‡å¤ï¼Œä¸ºä»€ä¹ˆä¸ç›´æ¥è®© AI å†™ Vue / React é¡µé¢ï¼Ÿâ€</p>
</blockquote>
<p>åœ¨çœŸå®é¡¹ç›®ä¸­ï¼Œè¿™ç§æ–¹å¼å¾€å¾€ä¼šé‡åˆ°å‡ ä¸ªè‡´å‘½é—®é¢˜ã€‚</p>
<h3 data-id="heading-2">1ï¸âƒ£ ä¸ç¨³å®š</h3>
<ul>
<li>åŒæ ·çš„ promptï¼Œæ¯æ¬¡ç”Ÿæˆç»“æœä¸åŒ</li>
<li>ç»„ä»¶ç»“æ„ã€å‘½åé£æ ¼ä¸æ–­æ¼‚ç§»</li>
<li>éš¾ä»¥ä¿è¯å›¢é˜Ÿç»Ÿä¸€è§„èŒƒ</li>
</ul>
<h3 data-id="heading-3">2ï¸âƒ£ éš¾ä»¥ review</h3>
<ul>
<li>AI ä¸€æ¬¡ç”Ÿæˆå‡ ç™¾è¡Œä»£ç </li>
<li>reviewer å¾ˆéš¾åˆ¤æ–­â€œè¿™æ˜¯ä¸æ˜¯å¯¹çš„â€</li>
<li>å‡ºé—®é¢˜æ—¶éš¾ä»¥å®šä½è´£ä»»</li>
</ul>
<h3 data-id="heading-4">3ï¸âƒ£ æ— æ³•è§„æ¨¡åŒ–</h3>
<ul>
<li>prompt æ˜¯éšæ€§çš„</li>
<li>ç»éªŒæ— æ³•æ²‰æ·€</li>
<li>æ¯ä¸ªé¡µé¢éƒ½æ˜¯â€œé‡æ–°ç”Ÿæˆä¸€æ¬¡â€</li>
</ul>
<h3 data-id="heading-5">4ï¸âƒ£ å·¥ç¨‹ä½“ç³»æ— æ³•å…œåº•</h3>
<ul>
<li>lint / test å¾ˆéš¾æå‰å‘ç°è¯­ä¹‰é—®é¢˜</li>
<li>ä¸€æ—¦å‡ºé”™ï¼Œå¾€å¾€æ˜¯è¿è¡ŒæœŸé—®é¢˜</li>
</ul>
<p><strong>ç»“è®ºå¾ˆæ˜ç¡®ï¼š<br/>
AI ç›´æ¥å†™é¡µé¢ï¼Œæ›´åƒæ˜¯ demoï¼Œè€Œä¸æ˜¯å·¥ç¨‹æ–¹æ¡ˆã€‚</strong></p>
<h2 data-id="heading-6">ä¸‰ã€ä¸€ä¸ªæ›´ç¨³çš„æ€è·¯ï¼šæŠŠâ€œå˜åŒ–â€å’Œâ€œç¨³å®šâ€æ‹†å¼€</h2>
<p>åœ¨çœŸå®é¡¹ç›®ä¸­ï¼Œæˆ‘æœ€ç»ˆé€‰æ‹©äº†ä¸€ç§<strong>æ›´åå·¥ç¨‹åŒ–</strong>çš„åšæ³•ï¼š</p>
<blockquote>
<p><strong>Template + Spec + Generator + AI</strong></p>
</blockquote>
<p>æ ¸å¿ƒæ€æƒ³åªæœ‰ä¸€å¥è¯ï¼š</p>
<blockquote>
<p><strong>æ¨¡æ¿è´Ÿè´£ç¨³å®šæ€§ï¼ŒSpec è´Ÿè´£å˜åŒ–ï¼ŒAI åªå‚ä¸å˜åŒ–ã€‚</strong></p>
</blockquote>
<h3 data-id="heading-7">è¿™ä¸ªæµç¨‹é•¿ä»€ä¹ˆæ ·ï¼Ÿ</h3>
<pre><code class="hljs language-js" lang="js">éœ€æ±‚æè¿°
   â†“
é¡µé¢è§„æ ¼ï¼ˆ<span class="hljs-title class_">Spec</span>ï¼‰
   â†“
æ¨¡æ¿ï¼ˆ<span class="hljs-title class_">Template</span>ï¼‰
   â†“
ç”Ÿæˆè„šæœ¬ï¼ˆ<span class="hljs-title class_">Generator</span>ï¼‰
   â†“
é¡µé¢ä»£ç 
   â†“
lint / test æ ¡éªŒ
</code></pre>
<p>è¿™ä¸æ˜¯ä¸ºäº†â€œå¤šä¸€å±‚æŠ½è±¡â€ï¼Œè€Œæ˜¯ä¸ºäº†<strong>æŠŠ AI çš„ä¸ç¡®å®šæ€§é™åˆ¶åœ¨å¯æ§èŒƒå›´å†…</strong>ã€‚</p>
<h2 data-id="heading-8">å››ã€ä»€ä¹ˆæ˜¯ Specï¼Ÿ</h2>
<p>**Specï¼ˆSpecificationï¼‰**å¯ä»¥ç†è§£ä¸ºï¼š</p>
<blockquote>
<p><strong>é¡µé¢çš„â€œè§„æ ¼è¯´æ˜ä¹¦â€</strong></p>
</blockquote>
<p>å®ƒæè¿°çš„æ˜¯ï¼š</p>
<ul>
<li>é¡µé¢æ ‡é¢˜</li>
<li>æ¥å£åœ°å€</li>
<li>è¡¨æ ¼å­—æ®µ</li>
<li>æŸ¥è¯¢æ¡ä»¶</li>
<li>è¡¨å•å­—æ®µä¸æ ¡éªŒè§„åˆ™</li>
</ul>
<p>è€Œä¸æ˜¯ï¼š</p>
<ul>
<li>ç”Ÿå‘½å‘¨æœŸæ€ä¹ˆå†™</li>
<li>API æ€ä¹ˆè°ƒç”¨</li>
<li>UI ç»„ä»¶æ€ä¹ˆæ‹¼</li>
</ul>
<p>è¿™äº›å†…å®¹ï¼Œéå¸¸é€‚åˆç”¨ä¸€ä»½ç»“æ„åŒ–æ•°æ®æ¥è¡¨è¾¾ã€‚</p>
<h3 data-id="heading-9">ä¸€ä¸ªç®€åŒ–çš„ Spec ç¤ºä¾‹</h3>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"title"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ä¾›åº”å•†ç®¡ç†"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"api"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"list"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"/api/supplier/list"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"create"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"/api/supplier/create"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"update"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"/api/supplier/update"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"delete"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"/api/supplier/delete"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"columns"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-punctuation">{</span> <span class="hljs-attr">"prop"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"name"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"label"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ä¾›åº”å•†åç§°"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">{</span> <span class="hljs-attr">"prop"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"contact"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"label"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"è”ç³»äºº"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">{</span> <span class="hljs-attr">"prop"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"status"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"label"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"çŠ¶æ€"</span> <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"formSchema"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-punctuation">{</span> <span class="hljs-attr">"prop"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"name"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"label"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ä¾›åº”å•†åç§°"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"required"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">{</span> <span class="hljs-attr">"prop"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"contact"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"label"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"è”ç³»äºº"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"prop"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"status"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"label"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"çŠ¶æ€"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"select"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"options"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"å¯ç”¨"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"åœç”¨"</span><span class="hljs-punctuation">]</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>è¿™ä»½ JSON <strong>ä¸ä¾èµ–ä»»ä½•å‰ç«¯æ¡†æ¶</strong>ï¼Œä½†å·²ç»å®Œæ•´æè¿°äº†ä¸€ä¸ªä¸­åå°é¡µé¢çš„â€œå˜åŒ–ç‚¹â€ã€‚</p>
<h2 data-id="heading-10">äº”ã€Templateï¼šæŠŠé‡å¤åŠ³åŠ¨å›ºåŒ–æˆèµ„äº§</h2>
<p>Template æ˜¯<strong>å›ºå®šä¸å˜çš„éƒ¨åˆ†</strong>ï¼Œä¾‹å¦‚ï¼š</p>
<ul>
<li>é¡µé¢æ•´ä½“ç»“æ„</li>
<li>è¡¨æ ¼ / è¡¨å• / å¼¹çª—éª¨æ¶</li>
<li>API è°ƒç”¨æ–¹å¼</li>
<li>åˆ†é¡µé€»è¾‘</li>
<li>é”™è¯¯å¤„ç†æ–¹å¼</li>
</ul>
<p>å®ƒçš„ç‰¹ç‚¹æ˜¯ï¼š</p>
<ul>
<li>äººå·¥ç»´æŠ¤</li>
<li>ç‰ˆæœ¬åŒ–</li>
<li>å¯ review</li>
<li>å¾ˆå°‘å˜åŠ¨</li>
</ul>
<p>ä½ å¯ä»¥ç”¨ Vueã€Reactã€Svelteï¼Œ<strong>æ¨¡æ¿æ€æƒ³æœ¬èº«ä¸æ¡†æ¶æ— å…³</strong>ã€‚</p>
<h2 data-id="heading-11">å…­ã€Generatorï¼šè®©ç”Ÿæˆå˜æˆç¡®å®šæ€§è¡Œä¸º</h2>
<p>Generator çš„èŒè´£éå¸¸å•ä¸€ï¼š</p>
<blockquote>
<p><strong>æŠŠ Spec å¡«è¿› Templateï¼Œç”Ÿæˆä»£ç æ–‡ä»¶</strong></p>
</blockquote>
<p>è¿™ä¸€ç‚¹éå¸¸é‡è¦ï¼š</p>
<ul>
<li>Generator æ˜¯è„šæœ¬</li>
<li>è¾“å‡ºæ˜¯ç¡®å®šçš„</li>
<li>ä¸æ¶‰åŠ AI å†³ç­–</li>
</ul>
<p>æ¢å¥è¯è¯´ï¼š</p>
<blockquote>
<p><strong>Generator ä¸æ˜¯â€œæ™ºèƒ½çš„â€ï¼Œä½†å®ƒæ˜¯å¯é çš„ã€‚</strong></p>
</blockquote>
<h2 data-id="heading-12">ä¸ƒã€AI åœ¨è¿™é‡Œæ‰®æ¼”ä»€ä¹ˆè§’è‰²ï¼Ÿ</h2>
<p>åœ¨è¿™å¥—ä½“ç³»ä¸­ï¼ŒAI çš„èŒè´£è¢«ä¸¥æ ¼é™åˆ¶åœ¨ä¸¤ç‚¹ï¼š</p>
<h3 data-id="heading-13">âœ… 1. ä»è‡ªç„¶è¯­è¨€ç”Ÿæˆ Spec</h3>
<p>AI éå¸¸æ“…é•¿ï¼š</p>
<ul>
<li>ç†è§£ä¸šåŠ¡æè¿°</li>
<li>ç”Ÿæˆç»“æ„åŒ– JSON</li>
<li>è¡¥å…¨å­—æ®µä¿¡æ¯</li>
</ul>
<h3 data-id="heading-14">âœ… 2. æŒ‰ lint / æŠ¥é”™åšæœ€å°ä¿®å¤</h3>
<ul>
<li>åªä¿®å…·ä½“æ–‡ä»¶</li>
<li>åªåšæœ€å° diff</li>
<li>ä¸é‡å†™æ•´ä½“ç»“æ„</li>
</ul>
<h3 data-id="heading-15">âŒ AI ä¸è¯¥åšçš„äº‹</h3>
<ul>
<li>ç›´æ¥å†™é¡µé¢ä»£ç </li>
<li>ä¿®æ”¹æ¨¡æ¿</li>
<li>æ”¹åŠ¨åŸºç¡€è®¾æ–½</li>
<li>å¼•å…¥æ–°ä¾èµ–</li>
</ul>
<p>è¿™æ ·åšçš„ç»“æœæ˜¯ï¼š<br/>
<strong>AI çš„èƒ½åŠ›è¢«â€œå·¥ç¨‹æµç¨‹â€çº¦æŸï¼Œè€Œä¸æ˜¯åè¿‡æ¥ã€‚</strong></p>
<h3 data-id="heading-16">âœ… æ­£ç¡®å§¿åŠ¿</h3>
<p><strong>è®© Codex åšä¸¤ä»¶äº‹ï¼š</strong></p>
<p>1ï¸âƒ£ æ ¹æ®è‡ªç„¶è¯­è¨€ <strong>ç”Ÿæˆ Spec JSON</strong><br/>
2ï¸âƒ£ æ ¹æ® lint / æŠ¥é”™ <strong>åšæœ€å° patch ä¿®å¤</strong></p>
<p>ç¤ºä¾‹æŒ‡ä»¤ï¼ˆåœ¨ Codex CLI / IDE ä¸­ï¼‰ï¼š</p>
<blockquote>
<p>åœ¨ <code>specs/</code> ä¸‹ç”Ÿæˆ <code>supplier.json</code>ï¼Œå­—æ®µä¸ºä¾›åº”å•†åç§°ã€è”ç³»äººã€ç”µè¯ã€çŠ¶æ€ï¼ˆå¯ç”¨/åœç”¨ï¼‰ï¼Œæ¥å£è·¯å¾„ä¸º <code>/api/supplier/*</code>ï¼Œè¾“å‡ºå¿…é¡»æ˜¯ä¸¥æ ¼ JSONã€‚</p>
</blockquote>
<p>ç„¶åï¼š</p>
<pre><code class="hljs language-bash" lang="bash">yarn gen:page specs/supplier.json
yarn lint
</code></pre>
<p>å¦‚æœ lint æŠ¥é”™ï¼Œå†è®© Codex ä¿®ï¼š</p>
<blockquote>
<p>æ ¹æ® lint æŠ¥é”™ï¼Œåªä¿®æ”¹ <code>src/views/supplier/List.vue</code>ï¼Œç”¨æœ€å°æ”¹åŠ¨ä¿®åˆ°é€šè¿‡ã€‚</p>
</blockquote>
<h2 data-id="heading-17">å…«ã€ä¸ºä»€ä¹ˆè¿™ç§æ–¹å¼æ›´é€‚åˆçœŸå®å›¢é˜Ÿï¼Ÿ</h2>
<p>ä»å·¥ç¨‹è§’åº¦çœ‹ï¼Œè¿™ç§æ–¹å¼æœ‰å‡ ä¸ªæ˜æ˜¾ä¼˜åŠ¿ï¼š</p>
<ul>
<li><strong>å¯æ§</strong>ï¼šæ¨¡æ¿ç¨³å®šï¼Œå˜åŒ–é›†ä¸­åœ¨ Spec</li>
<li><strong>å¯ review</strong>ï¼šSpec æ˜¯ç»“æ„åŒ–æ•°æ®</li>
<li><strong>å¯å›æ»š</strong>ï¼šgit diff éå¸¸æ¸…æ™°</li>
<li><strong>å¯è§„æ¨¡åŒ–</strong>ï¼šä¸æ˜¯ prompt é©±åŠ¨ï¼Œè€Œæ˜¯æµç¨‹é©±åŠ¨</li>
<li><strong>å¯è¿ç§»</strong>ï¼šæ¢æ¡†æ¶åªéœ€æ¢æ¨¡æ¿</li>
</ul>
<p>è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆå®ƒæ¯”â€œç›´æ¥è®© AI å†™é¡µé¢â€æ›´ç¨³ã€‚</p>
<h2 data-id="heading-18">ä¹ã€è¿™å¥—æ€è·¯ä¸åªé€‚ç”¨äºä¸­åå°</h2>
<p>è¿™ç§æ¨¡å¼å¯ä»¥è‡ªç„¶æ‰©å±•åˆ°ï¼š</p>
<ul>
<li>è¡¨å•é¡µ / è¯¦æƒ…é¡µ</li>
<li>æƒé™è·¯ç”±ç”Ÿæˆ</li>
<li>é¡µé¢è¿ç§»ï¼ˆå¦‚ Vue2 â†’ Vue3ï¼‰</li>
<li>ä½ä»£ç  / é¡µé¢å·¥å‚</li>
<li>å‰ç«¯å·¥ç¨‹è‡ªåŠ¨åŒ–</li>
</ul>
<p>æ ¸å¿ƒä¸åœ¨å·¥å…·ï¼Œè€Œåœ¨<strong>æ‹†åˆ†å˜åŒ–ä¸ç¨³å®šçš„è¾¹ç•Œ</strong>ã€‚</p>
<h2 data-id="heading-19">åã€æ¨¡æ¿åŒ–ä¸æ˜¯ç»ˆç‚¹ï¼šä¸€æ¡æ›´ç°å®çš„â€œæœ€ä½³è¿›åŒ–è·¯çº¿â€</h2>
<p>éœ€è¦è¯´æ˜çš„æ˜¯ï¼Œ<strong>Template + Spec + Generator å¹¶ä¸æ˜¯ç»ˆææ–¹æ¡ˆ</strong>ï¼Œè€Œæ˜¯ä¸€ä¸ªéå¸¸åˆé€‚çš„<strong>å·¥ç¨‹èµ·ç‚¹</strong>ã€‚å¹¶ä¸æ˜¯æ‰€æœ‰å›¢é˜Ÿéƒ½éœ€è¦èµ°åˆ°é…ç½®é©±åŠ¨æˆ– AST ä¿®æ”¹é˜¶æ®µï¼Œ<strong>å¯¹å¾ˆå¤šå›¢é˜Ÿæ¥è¯´ï¼ŒTemplate + Spec æœ¬èº«å·²ç»æ˜¯æœ€ä¼˜è§£ã€‚</strong></p>
<p>åœ¨çœŸå®é¡¹ç›®ä¸­ï¼Œæˆ‘æ›´æ¨èæŠŠå®ƒçœ‹ä½œä¸€æ¡â€œå¯è¿›åŒ–çš„è·¯çº¿â€ï¼Œè€Œä¸æ˜¯ä¸€é”¤å®šéŸ³çš„è®¾è®¡ã€‚</p>
<h3 data-id="heading-20">ç¬¬ä¸€æ­¥ï¼šTemplate + Specï¼ˆç°åœ¨çš„æ–¹æ¡ˆï¼‰</h3>
<p><strong>é€‚ç”¨åœºæ™¯ï¼š</strong></p>
<ul>
<li>CRUD é¡µé¢å æ¯”é«˜</li>
<li>æ–°é¡µé¢æ•°é‡å¤š</li>
<li>å›¢é˜Ÿå¸Œæœ›å°½å¿«ç»Ÿä¸€è§„èŒƒ</li>
</ul>
<p><strong>ä»·å€¼ï¼š</strong></p>
<ul>
<li>å¿«é€Ÿè½åœ°</li>
<li>é£é™©å¯æ§</li>
<li>éå¸¸é€‚åˆå¼•å…¥ AI çš„ç¬¬ä¸€æ­¥</li>
</ul>
<hr/>
<h3 data-id="heading-21">ç¬¬äºŒæ­¥ï¼šæŠ½è±¡ç¨³å®šèƒ½åŠ›ï¼Œå¼±åŒ–æ¨¡æ¿å¤æ‚åº¦</h3>
<p>å½“å‘ç°æ¨¡æ¿é‡Œå¼€å§‹å‡ºç°å¤§é‡æ¡ä»¶åˆ†æ”¯æ—¶ï¼Œä¸€ä¸ªæ›´ç¨³çš„åšæ³•æ˜¯ï¼š</p>
<blockquote>
<p><strong>æŠŠæ¨¡æ¿ä¸­çš„ç¨³å®šé€»è¾‘æŠ½æˆåŸºç¡€ç»„ä»¶ï¼ˆå¦‚ BaseCrudPageï¼‰</strong></p>
</blockquote>
<p>æ­¤æ—¶ï¼š</p>
<ul>
<li>æ¨¡æ¿å˜è–„</li>
<li>spec åªæè¿°â€œé¡µé¢é…ç½®â€</li>
<li>é¡µé¢æœ¬èº«ä¸å†é¢‘ç¹ç”Ÿæˆæ–°æ–‡ä»¶</li>
</ul>
<p>è¿™ä¸€æ­¥ï¼Œå·²ç»éå¸¸æ¥è¿‘<strong>é…ç½®é©±åŠ¨é¡µé¢æ¸²æŸ“</strong>ã€‚</p>
<h3 data-id="heading-22">ç¬¬ä¸‰æ­¥ï¼šä»â€œç”Ÿæˆä»£ç â€èµ°å‘â€œé…ç½®å³é¡µé¢â€</h3>
<p>åœ¨ CRUD å æ¯”æé«˜çš„ç³»ç»Ÿä¸­ï¼Œæœ€ç»ˆå½¢æ€å¾€å¾€æ˜¯ï¼š</p>
<blockquote>
<p><strong>é¡µé¢ = é…ç½®ï¼ˆSpecï¼‰ + æ¸²æŸ“å™¨</strong></p>
</blockquote>
<p>æ­¤æ—¶ï¼š</p>
<ul>
<li>æ–°é¡µé¢ä¸å†ç”Ÿæˆ <code>.vue</code> æ–‡ä»¶</li>
<li>åªæ–°å¢ spec + è·¯ç”±é…ç½®</li>
<li>AI ç›´æ¥ç”Ÿæˆ specï¼Œæ”¶ç›Šæœ€å¤§</li>
</ul>
<p>è¿™æœ¬è´¨ä¸Šå°±æ˜¯<strong>ä½ä»£ç /é¡µé¢å·¥å‚çš„é›å½¢</strong>ã€‚</p>
<h3 data-id="heading-23">ç¬¬å››æ­¥ï¼šå­˜é‡é¡¹ç›®å¼•å…¥ç»“æ„åŒ–ä¿®æ”¹ï¼ˆAST / Patchï¼‰</h3>
<p>å¯¹äºå·²æœ‰å¤§é‡é¡µé¢çš„ç³»ç»Ÿï¼Œæ›´ç¨³å¦¥çš„æ–¹å¼æ˜¯ï¼š</p>
<ul>
<li>ç”¨ spec æè¿°â€œå˜æ›´æ„å›¾â€</li>
<li>ç”¨å·¥å…·å¯¹ä»£ç åšç»“æ„åŒ–ä¿®æ”¹ï¼ˆå¦‚åªæ”¹ columnsã€formSchemaï¼‰</li>
<li>AI åªäº§å‡º patchï¼Œè€Œä¸æ˜¯é‡å†™é¡µé¢</li>
</ul>
<p>è¿™ä¸€æ­¥éå¸¸é€‚åˆï¼š</p>
<ul>
<li>è€é¡¹ç›®</li>
<li>å®‰å…¨è¦æ±‚é«˜çš„å›¢é˜Ÿ</li>
<li>æ¸è¿›å¼æ¼”è¿›</li>
</ul>
<h3 data-id="heading-24">ä¸€å¥è¯æ€»ç»“è¿™æ¡è·¯çº¿</h3>
<blockquote>
<p><strong>æ¨¡æ¿åŒ–æ˜¯æŠŠ AI å¼•å…¥å·¥ç¨‹ä½“ç³»çš„ç¬¬ä¸€æ­¥ï¼Œ<br/>
é…ç½®é©±åŠ¨å’Œç»“æ„åŒ–ä¿®æ”¹ï¼Œæ‰æ˜¯ä¸­åå°å·¥ç¨‹çš„é•¿æœŸå½¢æ€ã€‚</strong></p>
</blockquote>
<h2 data-id="heading-25">åä¸€ã€æ€»ç»“</h2>
<p>å¤§æ¨¡å‹çš„ä»·å€¼ï¼Œä¸åœ¨äºâ€œæ›¿ä»£å·¥ç¨‹å¸ˆå†™é¡µé¢â€ï¼Œ<br/>
è€Œåœ¨äºï¼š</p>
<blockquote>
<p><strong>æŠŠé‡å¤åŠ³åŠ¨ç»“æ„åŒ–ï¼Œå¹¶åµŒå…¥åˆ°å·¥ç¨‹ä½“ç³»ä¸­ã€‚</strong></p>
</blockquote>
<p>åœ¨ä¸­åå°å‰ç«¯å¼€å‘ä¸­ï¼Œ<br/>
<strong>æœ€ç¨³çš„æ–¹å¼æ°¸è¿œä¸æ˜¯â€œè®© AI è‡ªç”±å‘æŒ¥â€ï¼Œ<br/>
è€Œæ˜¯è®©å®ƒåœ¨æ¸…æ™°çš„è¾¹ç•Œå†…å·¥ä½œã€‚</strong></p>
<p>å¦‚æœåªèƒ½è®°ä½ä¸€å¥è¯ï¼š  ä¸è¦è®© AI ç›´æ¥å†™é¡µé¢ï¼Œè®©å®ƒå†™â€œå˜åŒ–â€ï¼Œå…¶ä½™äº¤ç»™å·¥ç¨‹ã€‚</p>
<hr/>
<p>å¦‚æœä½ è§‰å¾—è¿™ç¯‡æ–‡ç« å¯¹ä½ æœ‰å¯å‘ï¼Œæ¬¢è¿ç‚¹èµæˆ–æ”¶è— ğŸ‘</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item>  </channel></rss>