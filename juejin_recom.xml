<?xml version="1.0" encoding="UTF-8"?><rss version="2.0">  <channel>      <title>æ˜é‡‘æ–‡ç« æ¨è</title>      <link>https://juejin.cn/recommended?sort=newest</link>      <description>ä¸€ä¸ªå¸®åŠ©å¼€å‘è€…æˆé•¿çš„ç¤¾åŒº</description>      <generator>python juejin_recom.py @Pi20</generator>      <item>    <title><![CDATA[React 19 æºç å…¨æ™¯å›¾ï¼šä»å®è§‚åˆ°å¾®è§‚]]></title>    <link>https://juejin.cn/post/7588007285547286534</link>    <guid>https://juejin.cn/post/7588007285547286534</guid>    <pubDate>2025-12-27T02:41:41.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588007285547286534" data-draft-id="7588149079400742955" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="React 19 æºç å…¨æ™¯å›¾ï¼šä»å®è§‚åˆ°å¾®è§‚"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-27T02:41:41.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å€Ÿä¸ªç«er"/> <meta itemprop="url" content="https://juejin.cn/user/2225067265915783"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            React 19 æºç å…¨æ™¯å›¾ï¼šä»å®è§‚åˆ°å¾®è§‚
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2225067265915783/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å€Ÿä¸ªç«er
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-27T02:41:41.000Z" title="Sat Dec 27 2025 02:41:41 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    19
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">React 19 æºç å…¨æ™¯å›¾ï¼šä»å®è§‚åˆ°å¾®è§‚</h2>
<blockquote>
<p>æœ¬æ–‡æ˜¯ React æºç ç³»åˆ—çš„æ€»è§ˆç¯‡ï¼Œå¸®ä½ å»ºç«‹å®Œæ•´çš„çŸ¥è¯†æ¡†æ¶ï¼Œåç»­æ–‡ç« å°†é€ä¸€æ·±å…¥ã€‚</p>
</blockquote>
<h3 data-id="heading-1">ä¸€ã€React æ˜¯ä»€ä¹ˆï¼Ÿ</h3>
<p>ä¸€å¥è¯ï¼š<strong>React æ˜¯ä¸€ä¸ªå°†çŠ¶æ€æ˜ å°„ä¸º UI çš„å‡½æ•°</strong>ã€‚</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">UI</span> = f(state)
</code></pre>
<p>å½“çŠ¶æ€å˜åŒ–æ—¶ï¼ŒReact ä¼šï¼š</p>
<ol>
<li>è®¡ç®—æ–°çš„ UIï¼ˆReconcilerï¼‰</li>
<li>è°ƒåº¦æ›´æ–°ä»»åŠ¡ï¼ˆSchedulerï¼‰</li>
<li>å°†å˜åŒ–åº”ç”¨åˆ° DOMï¼ˆRendererï¼‰</li>
</ol>
<h3 data-id="heading-2">äºŒã€ä¸‰å¤§æ ¸å¿ƒæ¨¡å—</h3>
<pre><code class="hljs language-php" lang="php">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ä½ çš„ä»£ç                           â”‚
â”‚            &lt;App /&gt; â†’ useState â†’ setState                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Scheduler è°ƒåº¦å™¨                       â”‚
â”‚                                                         â”‚
â”‚  â€¢ ä¼˜å…ˆçº§ç®¡ç†ï¼ˆç”¨æˆ·äº¤äº’ &gt; åŠ¨ç”» &gt; æ•°æ®è¯·æ±‚ï¼‰               â”‚
â”‚  â€¢ æ—¶é—´åˆ‡ç‰‡ï¼ˆ<span class="hljs-number">5</span>ms ä¸€ç‰‡ï¼Œé¿å…å¡é¡¿ï¼‰                        â”‚
â”‚  â€¢ ä»»åŠ¡é˜Ÿåˆ—ï¼ˆæœ€å°å †å®ç°ï¼‰                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  Reconciler åè°ƒå™¨                       â”‚
â”‚                                                         â”‚
â”‚  â€¢ <span class="hljs-built_in">Fiber</span> æ¶æ„ï¼ˆå¯ä¸­æ–­çš„é“¾è¡¨ç»“æ„ï¼‰                        â”‚
â”‚  â€¢ Diff ç®—æ³•ï¼ˆæœ€å°åŒ– DOM æ“ä½œï¼‰                          â”‚
â”‚  â€¢ Hooks ç³»ç»Ÿï¼ˆçŠ¶æ€å’Œå‰¯ä½œç”¨ç®¡ç†ï¼‰                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Renderer æ¸²æŸ“å™¨                        â”‚
â”‚                                                         â”‚
â”‚  â€¢ ReactDOMï¼ˆWebï¼‰                                      â”‚
â”‚  â€¢ React Nativeï¼ˆç§»åŠ¨ç«¯ï¼‰                               â”‚
â”‚  â€¢ React Three <span class="hljs-built_in">Fiber</span>ï¼ˆ<span class="hljs-number">3</span>Dï¼‰                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h3 data-id="heading-3">ä¸‰ã€æ ¸å¿ƒæ¦‚å¿µé€Ÿè§ˆ</h3>
<h4 data-id="heading-4">1. Fiber</h4>
<p>Fiber æ˜¯ React çš„æ ¸å¿ƒæ•°æ®ç»“æ„ï¼Œæ¯ä¸ªç»„ä»¶å¯¹åº”ä¸€ä¸ª Fiber èŠ‚ç‚¹ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title class_">FiberNode</span> {
  <span class="hljs-comment">// ç±»å‹ä¿¡æ¯</span>
  tag,              <span class="hljs-comment">// ç»„ä»¶ç±»å‹ï¼ˆå‡½æ•°ç»„ä»¶=0ï¼Œç±»ç»„ä»¶=1ï¼ŒDOM=5ï¼‰</span>
  type,             <span class="hljs-comment">// ç»„ä»¶å‡½æ•°æˆ– DOM æ ‡ç­¾</span>
  
  <span class="hljs-comment">// æ ‘ç»“æ„</span>
  <span class="hljs-keyword">return</span>,           <span class="hljs-comment">// çˆ¶èŠ‚ç‚¹</span>
  child,            <span class="hljs-comment">// ç¬¬ä¸€ä¸ªå­èŠ‚ç‚¹</span>
  sibling,          <span class="hljs-comment">// å…„å¼ŸèŠ‚ç‚¹</span>
  
  <span class="hljs-comment">// çŠ¶æ€</span>
  memoizedState,    <span class="hljs-comment">// Hooks é“¾è¡¨</span>
  memoizedProps,    <span class="hljs-comment">// ä¸Šæ¬¡çš„ props</span>
  
  <span class="hljs-comment">// å‰¯ä½œç”¨</span>
  flags,            <span class="hljs-comment">// æ ‡è®°ï¼ˆæ’å…¥ã€æ›´æ–°ã€åˆ é™¤ï¼‰</span>
  
  <span class="hljs-comment">// åŒç¼“å†²</span>
  alternate,        <span class="hljs-comment">// å¦ä¸€æ£µæ ‘çš„å¯¹åº”èŠ‚ç‚¹</span>
}
</code></pre>
<h4 data-id="heading-5">2. Laneï¼ˆä¼˜å…ˆçº§ï¼‰</h4>
<p>React 19 ä½¿ç”¨ 31 ä½äºŒè¿›åˆ¶æ•°è¡¨ç¤ºä¼˜å…ˆçº§ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title class_">SyncLane</span>           = <span class="hljs-number">0b0000000000000000000000000000010</span>  <span class="hljs-comment">// åŒæ­¥ï¼ˆæœ€é«˜ï¼‰</span>
<span class="hljs-title class_">InputContinuousLane</span> = <span class="hljs-number">0b0000000000000000000000000001000</span>  <span class="hljs-comment">// è¿ç»­è¾“å…¥</span>
<span class="hljs-title class_">DefaultLane</span>        = <span class="hljs-number">0b0000000000000000000000000100000</span>  <span class="hljs-comment">// é»˜è®¤</span>
<span class="hljs-title class_">TransitionLane</span>     = <span class="hljs-number">0b0000000000000000000000010000000</span>  <span class="hljs-comment">// è¿‡æ¸¡</span>
<span class="hljs-title class_">IdleLane</span>           = <span class="hljs-number">0b0010000000000000000000000000000</span>  <span class="hljs-comment">// ç©ºé—²ï¼ˆæœ€ä½ï¼‰</span>
</code></pre>
<h4 data-id="heading-6">3. åŒç¼“å†²</h4>
<p>React ç»´æŠ¤ä¸¤æ£µ Fiber æ ‘ï¼š</p>
<ul>
<li><strong>current</strong>ï¼šå½“å‰å±å¹•æ˜¾ç¤ºçš„</li>
<li><strong>workInProgress</strong>ï¼šæ­£åœ¨æ„å»ºçš„</li>
</ul>
<p>æ›´æ–°å®Œæˆåä¸€è¡Œä»£ç åˆ‡æ¢ï¼š<code>root.current = workInProgress</code></p>
<h3 data-id="heading-7">å››ã€æ¸²æŸ“æµç¨‹</h3>
<h4 data-id="heading-8">å®Œæ•´æµç¨‹å›¾</h4>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-built_in">setState</span>() 
    â”‚
    â–¼
<span class="hljs-built_in">scheduleUpdateOnFiber</span>()     â† æ ‡è®°æ›´æ–°
    â”‚
    â–¼
<span class="hljs-built_in">ensureRootIsScheduled</span>()     â† ç¡®ä¿è°ƒåº¦
    â”‚
    â–¼
<span class="hljs-built_in">scheduleCallback</span>()          â† Scheduler è°ƒåº¦
    â”‚
    â–¼
<span class="hljs-built_in">performConcurrentWorkOnRoot</span>() â† å¼€å§‹æ¸²æŸ“
    â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚         Render é˜¶æ®µï¼ˆå¯ä¸­æ–­ï¼‰         â”‚
    â”‚                                     â”‚
    â”‚  <span class="hljs-built_in">workLoopConcurrent</span>()               â”‚
    â”‚      â”‚                              â”‚
    â”‚      â–¼                              â”‚
    â”‚  <span class="hljs-built_in">performUnitOfWork</span>() â†â”€â”€â”           â”‚
    â”‚      â”‚                  â”‚           â”‚
    â”‚      â–¼                  â”‚           â”‚
    â”‚  <span class="hljs-built_in">beginWork</span>()            â”‚ å¾ªç¯      â”‚
    â”‚      â”‚                  â”‚           â”‚
    â”‚      â–¼                  â”‚           â”‚
    â”‚  <span class="hljs-built_in">completeWork</span>() â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
    â”‚                                     â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚        Commit é˜¶æ®µï¼ˆä¸å¯ä¸­æ–­ï¼‰        â”‚
    â”‚                                     â”‚
    â”‚  <span class="hljs-built_in">commitBeforeMutationEffects</span>()      â”‚
    â”‚      â”‚                              â”‚
    â”‚      â–¼                              â”‚
    â”‚  <span class="hljs-built_in">commitMutationEffects</span>()  â† DOMæ“ä½œ â”‚
    â”‚      â”‚                              â”‚
    â”‚      â–¼                              â”‚
    â”‚  root<span class="hljs-selector-class">.current</span> = finishedWork        â”‚
    â”‚      â”‚                              â”‚
    â”‚      â–¼                              â”‚
    â”‚  <span class="hljs-built_in">commitLayoutEffects</span>()              â”‚
    â”‚                                     â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
<span class="hljs-built_in">flushPassiveEffects</span>()       â† useEffectï¼ˆå¼‚æ­¥ï¼‰
</code></pre>
<h4 data-id="heading-9">Render é˜¶æ®µ</h4>
<p><strong>beginWork</strong>ï¼ˆå‘ä¸‹é€’å½’ï¼‰ï¼š</p>
<ul>
<li>æ ¹æ®ç»„ä»¶ç±»å‹å¤„ç†ï¼ˆå‡½æ•°ç»„ä»¶ã€ç±»ç»„ä»¶ã€DOM å…ƒç´ ï¼‰</li>
<li>è°ƒç”¨ç»„ä»¶å‡½æ•°ï¼Œæ‰§è¡Œ Hooks</li>
<li>Diff å­èŠ‚ç‚¹ï¼Œåˆ›å»º/å¤ç”¨ Fiber</li>
</ul>
<p><strong>completeWork</strong>ï¼ˆå‘ä¸Šå›æº¯ï¼‰ï¼š</p>
<ul>
<li>åˆ›å»º DOM èŠ‚ç‚¹</li>
<li>æ”¶é›†å‰¯ä½œç”¨æ ‡è®°</li>
<li>å†’æ³¡ subtreeFlags</li>
</ul>
<h4 data-id="heading-10">Commit é˜¶æ®µ</h4>
<p>ä¸‰ä¸ªå­é˜¶æ®µï¼š</p>

























<table><thead><tr><th>é˜¶æ®µ</th><th>æ—¶æœº</th><th>ä¸»è¦å·¥ä½œ</th></tr></thead><tbody><tr><td>Before Mutation</td><td>DOM æ“ä½œå‰</td><td>getSnapshotBeforeUpdate</td></tr><tr><td>Mutation</td><td>DOM æ“ä½œ</td><td>å¢åˆ æ”¹ DOM</td></tr><tr><td>Layout</td><td>DOM æ“ä½œå</td><td>useLayoutEffectã€componentDidMount</td></tr></tbody></table>
<h3 data-id="heading-11">äº”ã€Hooks åŸç†</h3>
<p>Hooks ä»¥é“¾è¡¨å½¢å¼å­˜å‚¨åœ¨ Fiber çš„ <code>memoizedState</code> ä¸Šï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-built_in">Fiber</span>.memoizedState â†’ useState â†’ useEffect â†’ useMemo â†’ <span class="hljs-literal">null</span>
</code></pre>
<h4 data-id="heading-12">useState æµç¨‹</h4>
<pre><code class="hljs language-css" lang="css">Mount:  <span class="hljs-built_in">mountState</span>() â†’ åˆ›å»º Hook â†’ åˆå§‹åŒ–çŠ¶æ€ â†’ è¿”å› [state, setState]
Update: <span class="hljs-built_in">updateState</span>() â†’ è·å– Hook â†’ å¤„ç†æ›´æ–°é˜Ÿåˆ— â†’ è¿”å› [newState, setState]
</code></pre>
<h4 data-id="heading-13">useEffect æµç¨‹</h4>
<pre><code class="hljs language-css" lang="css">Mount:  <span class="hljs-built_in">mountEffect</span>() â†’ åˆ›å»º Effect â†’ æ ‡è®° Passive
Commit: <span class="hljs-built_in">flushPassiveEffects</span>() â†’ æ‰§è¡Œé”€æ¯å‡½æ•° â†’ æ‰§è¡Œåˆ›å»ºå‡½æ•°
</code></pre>
<h3 data-id="heading-14">å…­ã€Diff ç®—æ³•</h3>
<p>React Diff çš„ä¸‰ä¸ªç­–ç•¥ï¼š</p>
<ol>
<li><strong>åŒå±‚æ¯”è¾ƒ</strong>ï¼šä¸è·¨å±‚çº§ç§»åŠ¨èŠ‚ç‚¹</li>
<li><strong>ç±»å‹åˆ¤æ–­</strong>ï¼šç±»å‹ä¸åŒç›´æ¥æ›¿æ¢</li>
<li><strong>key æ ‡è¯†</strong>ï¼šé€šè¿‡ key è¯†åˆ«èŠ‚ç‚¹</li>
</ol>
<h4 data-id="heading-15">å•èŠ‚ç‚¹ Diff</h4>
<pre><code class="hljs language-vbnet" lang="vbnet"><span class="hljs-keyword">key</span> ç›¸åŒ &amp;&amp; type ç›¸åŒ â†’ å¤ç”¨
<span class="hljs-keyword">key</span> ç›¸åŒ &amp;&amp; type ä¸åŒ â†’ åˆ é™¤é‡å»º
<span class="hljs-keyword">key</span> ä¸åŒ â†’ åˆ é™¤ï¼Œç»§ç»­æ‰¾
</code></pre>
<h4 data-id="heading-16">å¤šèŠ‚ç‚¹ Diffï¼ˆä¸‰è½®éå†ï¼‰</h4>
<pre><code class="hljs language-javascript" lang="javascript">ç¬¬ä¸€è½®ï¼šä»å·¦åˆ°å³ï¼Œå¤„ç†æ›´æ–°
ç¬¬äºŒè½®ï¼šå¤„ç†æ–°å¢æˆ–åˆ é™¤
ç¬¬ä¸‰è½®ï¼šå¤„ç†ç§»åŠ¨ï¼ˆ<span class="hljs-title class_">Map</span> æŸ¥æ‰¾ï¼‰
</code></pre>
<h3 data-id="heading-17">ä¸ƒã€Scheduler è°ƒåº¦</h3>
<h4 data-id="heading-18">ä¼˜å…ˆçº§</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title class_">ImmediatePriority</span>   <span class="hljs-comment">// -1msï¼Œç«‹å³æ‰§è¡Œ</span>
<span class="hljs-title class_">UserBlockingPriority</span> <span class="hljs-comment">// 250msï¼Œç”¨æˆ·äº¤äº’</span>
<span class="hljs-title class_">NormalPriority</span>      <span class="hljs-comment">// 5000msï¼Œæ™®é€šæ›´æ–°</span>
<span class="hljs-title class_">LowPriority</span>         <span class="hljs-comment">// 10000msï¼Œä½ä¼˜å…ˆçº§</span>
<span class="hljs-title class_">IdlePriority</span>        <span class="hljs-comment">// æ°¸ä¸è¿‡æœŸï¼Œç©ºé—²æ‰§è¡Œ</span>
</code></pre>
<h4 data-id="heading-19">æ—¶é—´åˆ‡ç‰‡</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">workLoop</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">while</span> (task &amp;&amp; !<span class="hljs-title function_">shouldYield</span>()) {  <span class="hljs-comment">// 5ms æ£€æŸ¥ä¸€æ¬¡</span>
    task = <span class="hljs-title function_">performTask</span>(task);
  }
  <span class="hljs-keyword">if</span> (task) {
    <span class="hljs-title function_">scheduleCallback</span>(task);  <span class="hljs-comment">// è¿˜æœ‰ä»»åŠ¡ï¼Œç»§ç»­è°ƒåº¦</span>
  }
}
</code></pre>
<h3 data-id="heading-20">å…«ã€æºç ç›®å½•</h3>
<pre><code class="hljs language-bash" lang="bash">packages/
â”œâ”€â”€ react/                    <span class="hljs-comment"># React API</span>
â”‚   â””â”€â”€ src/ReactHooks.js     <span class="hljs-comment"># Hooks å…¥å£</span>
â”‚
â”œâ”€â”€ react-reconciler/         <span class="hljs-comment"># åè°ƒå™¨ï¼ˆæ ¸å¿ƒï¼‰</span>
â”‚   â””â”€â”€ src/
â”‚       â”œâ”€â”€ ReactFiber.js           <span class="hljs-comment"># Fiber å®šä¹‰</span>
â”‚       â”œâ”€â”€ ReactFiberWorkLoop.js   <span class="hljs-comment"># å·¥ä½œå¾ªç¯</span>
â”‚       â”œâ”€â”€ ReactFiberBeginWork.js  <span class="hljs-comment"># é€’é˜¶æ®µ</span>
â”‚       â”œâ”€â”€ ReactFiberCompleteWork.js <span class="hljs-comment"># å½’é˜¶æ®µ</span>
â”‚       â”œâ”€â”€ ReactFiberHooks.js      <span class="hljs-comment"># Hooks å®ç°</span>
â”‚       â”œâ”€â”€ ReactFiberCommitWork.js <span class="hljs-comment"># Commit</span>
â”‚       â”œâ”€â”€ ReactFiberLane.js       <span class="hljs-comment"># ä¼˜å…ˆçº§</span>
â”‚       â””â”€â”€ ReactChildFiber.js      <span class="hljs-comment"># Diff ç®—æ³•</span>
â”‚
â”œâ”€â”€ react-dom/                <span class="hljs-comment"># DOM æ¸²æŸ“å™¨</span>
â”‚
â””â”€â”€ scheduler/                <span class="hljs-comment"># è°ƒåº¦å™¨</span>
    â””â”€â”€ src/
        â”œâ”€â”€ Scheduler.js          <span class="hljs-comment"># è°ƒåº¦é€»è¾‘</span>
        â””â”€â”€ SchedulerMinHeap.js   <span class="hljs-comment"># æœ€å°å †</span>
</code></pre>
<h3 data-id="heading-21">ä¹ã€ç³»åˆ—æ–‡ç« å¯¼èˆª</h3>


















































<table><thead><tr><th>åºå·</th><th>ä¸»é¢˜</th><th>æ ¸å¿ƒå†…å®¹</th></tr></thead><tbody><tr><td>00</td><td><a href="https://juejin.cn/post/7588149079400710187" target="_blank" title="https://juejin.cn/post/7588149079400710187">è°ƒè¯•ç¯å¢ƒæ­å»º</a></td><td>é¡¹ç›®ä»‹ç»ã€å¿«é€Ÿå¼€å§‹</td></tr><tr><td>01</td><td>æ¶æ„æ€»è§ˆï¼ˆæœ¬æ–‡ï¼‰</td><td>ä¸‰å¤§æ¨¡å—ã€æ ¸å¿ƒæ¦‚å¿µ</td></tr><tr><td>02</td><td><a href="https://juejin.cn/post/7588007285547302918" target="_blank" title="https://juejin.cn/post/7588007285547302918">useState åŸç†</a></td><td>Hook é“¾è¡¨ã€æ›´æ–°é˜Ÿåˆ—</td></tr><tr><td>03</td><td><a href="https://juejin.cn/post/7588001624905973779" target="_blank" title="https://juejin.cn/post/7588001624905973779">useEffect åŸç†</a></td><td>Effect é“¾è¡¨ã€æ‰§è¡Œæ—¶æœº</td></tr><tr><td>04</td><td><a href="https://juejin.cn/post/7588061231589523497" target="_blank" title="https://juejin.cn/post/7588061231589523497">Fiber å·¥ä½œå¾ªç¯</a></td><td>beginWorkã€completeWork</td></tr><tr><td>05</td><td><a href="https://juejin.cn/post/7588001624905990163" target="_blank" title="https://juejin.cn/post/7588001624905990163">Diff ç®—æ³•</a></td><td>å•èŠ‚ç‚¹ã€å¤šèŠ‚ç‚¹ Diff</td></tr><tr><td>06</td><td><a href="https://juejin.cn/post/7588064253635477558" target="_blank" title="https://juejin.cn/post/7588064253635477558">Scheduler è°ƒåº¦å™¨</a></td><td>ä¼˜å…ˆçº§ã€æ—¶é—´åˆ‡ç‰‡</td></tr><tr><td>07</td><td><a href="https://juejin.cn/post/7588061231589556265" target="_blank" title="https://juejin.cn/post/7588061231589556265">Commit é˜¶æ®µ</a></td><td>ä¸‰ä¸ªå­é˜¶æ®µã€DOM æ“ä½œ</td></tr></tbody></table>
<h3 data-id="heading-22">åã€å­¦ä¹ å»ºè®®</h3>
<ol>
<li><strong>å…ˆè·‘èµ·æ¥</strong>ï¼šclone react-debugï¼Œæ‰“æ–­ç‚¹è°ƒè¯•</li>
<li><strong>ä» useState å¼€å§‹</strong>ï¼šæœ€ç®€å•ä¹Ÿæœ€æ ¸å¿ƒ</li>
<li><strong>ç”»æµç¨‹å›¾</strong>ï¼šè¾¹çœ‹è¾¹ç”»ï¼ŒåŠ æ·±ç†è§£</li>
<li><strong>å†™æµ‹è¯•ç»„ä»¶</strong>ï¼šéªŒè¯ä½ çš„ç†è§£</li>
</ol>
<hr/>
<blockquote>
<p>ğŸ“¦ é…å¥—æºç ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2F220529%2Freact-debug" target="_blank" title="https://github.com/220529/react-debug" ref="nofollow noopener noreferrer">github.com/220529/reacâ€¦</a></p>
<p>ä¸Šä¸€ç¯‡ï¼š<a href="https://juejin.cn/post/7588149079400710187" target="_blank" title="https://juejin.cn/post/7588149079400710187">React æºç è°ƒè¯•ç¯å¢ƒæ­å»º</a></p>
<p>ä¸‹ä¸€ç¯‡ï¼š<a href="https://juejin.cn/post/7588007285547302918" target="_blank" title="https://juejin.cn/post/7588007285547302918">useState çš„å®ç°åŸç†</a></p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[React 19 æºç æ­ç§˜ï¼ˆäºŒï¼‰ï¼šuseState çš„å®ç°åŸç†]]></title>    <link>https://juejin.cn/post/7588007285547302918</link>    <guid>https://juejin.cn/post/7588007285547302918</guid>    <pubDate>2025-12-27T02:42:47.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588007285547302918" data-draft-id="7588149079400759339" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="React 19 æºç æ­ç§˜ï¼ˆäºŒï¼‰ï¼šuseState çš„å®ç°åŸç†"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-27T02:42:47.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å€Ÿä¸ªç«er"/> <meta itemprop="url" content="https://juejin.cn/user/2225067265915783"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            React 19 æºç æ­ç§˜ï¼ˆäºŒï¼‰ï¼šuseState çš„å®ç°åŸç†
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2225067265915783/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å€Ÿä¸ªç«er
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-27T02:42:47.000Z" title="Sat Dec 27 2025 02:42:47 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    20
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">React 19 æºç æ­ç§˜ï¼ˆäºŒï¼‰ï¼šuseState çš„å®ç°åŸç†</h2>
<blockquote>
<p>æœ¬æ–‡æ·±å…¥ React æºç ï¼Œå¸¦ä½ å½»åº•ææ‡‚ useState ä»è°ƒç”¨åˆ°æ›´æ–°çš„å®Œæ•´æµç¨‹ã€‚</p>
</blockquote>
<h3 data-id="heading-1">å‰è¨€</h3>
<p><code>useState</code> å¯èƒ½æ˜¯ä½ ç”¨å¾—æœ€å¤šçš„ Hookï¼Œä½†ä½ çŸ¥é“å®ƒèƒŒåæ˜¯æ€ä¹ˆå·¥ä½œçš„å—ï¼Ÿ</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> [count, setCount] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>);
<span class="hljs-title function_">setCount</span>(count + <span class="hljs-number">1</span>);  <span class="hljs-comment">// è¿™è¡Œä»£ç èƒŒåå‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ</span>
</code></pre>
<p>æœ¬æ–‡å°†ä»æºç è§’åº¦ï¼Œå®Œæ•´è§£æ useState çš„å®ç°åŸç†ã€‚</p>
<h3 data-id="heading-2">ä¸€ã€Hook çš„æ•°æ®ç»“æ„</h3>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦äº†è§£ Hook åœ¨ React å†…éƒ¨æ˜¯å¦‚ä½•å­˜å‚¨çš„ã€‚</p>
<h4 data-id="heading-3">Hook èŠ‚ç‚¹</h4>
<p>æ¯ä¸ª Hook è°ƒç”¨éƒ½ä¼šåˆ›å»ºä¸€ä¸ª Hook å¯¹è±¡ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">type <span class="hljs-title class_">Hook</span> = {
  <span class="hljs-attr">memoizedState</span>: any,    <span class="hljs-comment">// å­˜å‚¨çš„çŠ¶æ€å€¼</span>
  <span class="hljs-attr">baseState</span>: any,        <span class="hljs-comment">// åŸºç¡€çŠ¶æ€ï¼ˆç”¨äºæ›´æ–°è®¡ç®—ï¼‰</span>
  <span class="hljs-attr">baseQueue</span>: <span class="hljs-title class_">Update</span> | <span class="hljs-literal">null</span>,  <span class="hljs-comment">// åŸºç¡€æ›´æ–°é˜Ÿåˆ—</span>
  <span class="hljs-attr">queue</span>: <span class="hljs-title class_">UpdateQueue</span> | <span class="hljs-literal">null</span>, <span class="hljs-comment">// æ›´æ–°é˜Ÿåˆ—</span>
  <span class="hljs-attr">next</span>: <span class="hljs-title class_">Hook</span> | <span class="hljs-literal">null</span>,     <span class="hljs-comment">// æŒ‡å‘ä¸‹ä¸€ä¸ª Hook</span>
};
</code></pre>
<h4 data-id="heading-4">Hook é“¾è¡¨</h4>
<p>å¤šä¸ª Hook ä»¥é“¾è¡¨å½¢å¼å­˜å‚¨åœ¨ Fiber èŠ‚ç‚¹çš„ <code>memoizedState</code> ä¸Šï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-built_in">Fiber</span>.memoizedState
        â”‚
        â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Hook1 â”‚ â”€â”€â–º â”‚ Hook2 â”‚ â”€â”€â–º â”‚ Hook3 â”‚ â”€â”€â–º <span class="hljs-literal">null</span>
    â”‚useStateâ”‚     â”‚useEffectâ”‚    â”‚useMemoâ”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<p>è¿™å°±æ˜¯ä¸ºä»€ä¹ˆ <strong>Hook ä¸èƒ½åœ¨æ¡ä»¶è¯­å¥ä¸­è°ƒç”¨</strong>â€”â€”React ä¾èµ–è°ƒç”¨é¡ºåºæ¥åŒ¹é… Hookã€‚</p>
<h3 data-id="heading-5">äºŒã€é¦–æ¬¡æ¸²æŸ“ï¼šmountState</h3>
<p>å½“ç»„ä»¶é¦–æ¬¡æ¸²æŸ“æ—¶ï¼ŒuseState ä¼šè°ƒç”¨ <code>mountState</code>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æºç ä½ç½®ï¼šreact-reconciler/src/ReactFiberHooks.js</span>

<span class="hljs-keyword">function</span> <span class="hljs-title function_">mountState</span>(<span class="hljs-params">initialState</span>) {
  <span class="hljs-comment">// 1. åˆ›å»º Hook èŠ‚ç‚¹ï¼ŒåŠ å…¥é“¾è¡¨</span>
  <span class="hljs-keyword">const</span> hook = <span class="hljs-title function_">mountWorkInProgressHook</span>();
  
  <span class="hljs-comment">// 2. å¤„ç†åˆå§‹å€¼ï¼ˆæ”¯æŒå‡½æ•°å¼åˆå§‹åŒ–ï¼‰</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> initialState === <span class="hljs-string">'function'</span>) {
    initialState = <span class="hljs-title function_">initialState</span>();
  }
  
  <span class="hljs-comment">// 3. ä¿å­˜åˆå§‹çŠ¶æ€</span>
  hook.<span class="hljs-property">memoizedState</span> = hook.<span class="hljs-property">baseState</span> = initialState;
  
  <span class="hljs-comment">// 4. åˆ›å»ºæ›´æ–°é˜Ÿåˆ—</span>
  <span class="hljs-keyword">const</span> queue = {
    <span class="hljs-attr">pending</span>: <span class="hljs-literal">null</span>,           <span class="hljs-comment">// å¾…å¤„ç†çš„æ›´æ–°</span>
    <span class="hljs-attr">lanes</span>: <span class="hljs-title class_">NoLanes</span>,
    <span class="hljs-attr">dispatch</span>: <span class="hljs-literal">null</span>,          <span class="hljs-comment">// setState å‡½æ•°</span>
    <span class="hljs-attr">lastRenderedReducer</span>: basicStateReducer,
    <span class="hljs-attr">lastRenderedState</span>: initialState,
  };
  hook.<span class="hljs-property">queue</span> = queue;
  
  <span class="hljs-comment">// 5. ç»‘å®š dispatch å‡½æ•°ï¼ˆå°±æ˜¯ setStateï¼‰</span>
  <span class="hljs-keyword">const</span> dispatch = dispatchSetState.<span class="hljs-title function_">bind</span>(<span class="hljs-literal">null</span>, currentlyRenderingFiber, queue);
  queue.<span class="hljs-property">dispatch</span> = dispatch;
  
  <span class="hljs-comment">// 6. è¿”å› [state, setState]</span>
  <span class="hljs-keyword">return</span> [hook.<span class="hljs-property">memoizedState</span>, dispatch];
}
</code></pre>
<h4 data-id="heading-6">mountWorkInProgressHook</h4>
<p>è¿™ä¸ªå‡½æ•°è´Ÿè´£åˆ›å»º Hook èŠ‚ç‚¹å¹¶ç»´æŠ¤é“¾è¡¨ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">mountWorkInProgressHook</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> hook = {
    <span class="hljs-attr">memoizedState</span>: <span class="hljs-literal">null</span>,
    <span class="hljs-attr">baseState</span>: <span class="hljs-literal">null</span>,
    <span class="hljs-attr">baseQueue</span>: <span class="hljs-literal">null</span>,
    <span class="hljs-attr">queue</span>: <span class="hljs-literal">null</span>,
    <span class="hljs-attr">next</span>: <span class="hljs-literal">null</span>,
  };

  <span class="hljs-keyword">if</span> (workInProgressHook === <span class="hljs-literal">null</span>) {
    <span class="hljs-comment">// ç¬¬ä¸€ä¸ª Hookï¼ŒæŒ‚è½½åˆ° Fiber</span>
    currentlyRenderingFiber.<span class="hljs-property">memoizedState</span> = workInProgressHook = hook;
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// è¿½åŠ åˆ°é“¾è¡¨æœ«å°¾</span>
    workInProgressHook = workInProgressHook.<span class="hljs-property">next</span> = hook;
  }
  
  <span class="hljs-keyword">return</span> workInProgressHook;
}
</code></pre>
<h3 data-id="heading-7">ä¸‰ã€è§¦å‘æ›´æ–°ï¼šdispatchSetState</h3>
<p>å½“ä½ è°ƒç”¨ <code>setCount(1)</code> æ—¶ï¼Œå®é™…æ‰§è¡Œçš„æ˜¯ <code>dispatchSetState</code>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">dispatchSetState</span>(<span class="hljs-params">fiber, queue, action</span>) {
  <span class="hljs-comment">// 1. è·å–æ›´æ–°ä¼˜å…ˆçº§</span>
  <span class="hljs-keyword">const</span> lane = <span class="hljs-title function_">requestUpdateLane</span>(fiber);
  
  <span class="hljs-comment">// 2. åˆ›å»ºæ›´æ–°å¯¹è±¡</span>
  <span class="hljs-keyword">const</span> update = {
    lane,
    action,              <span class="hljs-comment">// æ–°å€¼æˆ–æ›´æ–°å‡½æ•°</span>
    <span class="hljs-attr">hasEagerState</span>: <span class="hljs-literal">false</span>,
    <span class="hljs-attr">eagerState</span>: <span class="hljs-literal">null</span>,
    <span class="hljs-attr">next</span>: <span class="hljs-literal">null</span>,
  };
  
  <span class="hljs-comment">// 3. æ€§èƒ½ä¼˜åŒ–ï¼šEager Stateï¼ˆæå‰è®¡ç®—ï¼‰</span>
  <span class="hljs-keyword">if</span> (fiber.<span class="hljs-property">lanes</span> === <span class="hljs-title class_">NoLanes</span>) {
    <span class="hljs-keyword">const</span> currentState = queue.<span class="hljs-property">lastRenderedState</span>;
    <span class="hljs-keyword">const</span> eagerState = <span class="hljs-title function_">basicStateReducer</span>(currentState, action);
    update.<span class="hljs-property">hasEagerState</span> = <span class="hljs-literal">true</span>;
    update.<span class="hljs-property">eagerState</span> = eagerState;
    
    <span class="hljs-comment">// å¦‚æœæ–°æ—§çŠ¶æ€ç›¸åŒï¼Œè·³è¿‡æ›´æ–°ï¼</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">is</span>(eagerState, currentState)) {
      <span class="hljs-keyword">return</span>;  <span class="hljs-comment">// Bailout!</span>
    }
  }
  
  <span class="hljs-comment">// 4. å°†æ›´æ–°åŠ å…¥é˜Ÿåˆ—</span>
  <span class="hljs-title function_">enqueueConcurrentHookUpdate</span>(fiber, queue, update, lane);
  
  <span class="hljs-comment">// 5. è°ƒåº¦æ›´æ–°</span>
  <span class="hljs-title function_">scheduleUpdateOnFiber</span>(root, fiber, lane);
}
</code></pre>
<h4 data-id="heading-8">Eager State ä¼˜åŒ–</h4>
<p>è¿™æ˜¯ä¸€ä¸ªé‡è¦çš„æ€§èƒ½ä¼˜åŒ–ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> [count, setCount] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>);

<span class="hljs-comment">// ç‚¹å‡»æŒ‰é’®</span>
<span class="hljs-title function_">setCount</span>(<span class="hljs-number">0</span>);  <span class="hljs-comment">// çŠ¶æ€æ²¡å˜ï¼ŒReact ä¼šè·³è¿‡è¿™æ¬¡æ›´æ–°ï¼</span>
</code></pre>
<p>React ä¼šåœ¨è°ƒåº¦ä¹‹å‰å°±è®¡ç®—æ–°çŠ¶æ€ï¼Œå¦‚æœå’Œæ—§çŠ¶æ€ç›¸åŒï¼ˆé€šè¿‡ <code>Object.is</code> æ¯”è¾ƒï¼‰ï¼Œç›´æ¥è·³è¿‡æ•´ä¸ªæ›´æ–°æµç¨‹ã€‚</p>
<h3 data-id="heading-9">å››ã€æ›´æ–°æ¸²æŸ“ï¼šupdateState</h3>
<p>å½“ç»„ä»¶é‡æ–°æ¸²æŸ“æ—¶ï¼ŒuseState ä¼šè°ƒç”¨ <code>updateState</code>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">updateState</span>(<span class="hljs-params">initialState</span>) {
  <span class="hljs-comment">// useState æœ¬è´¨ä¸Šæ˜¯é¢„è®¾äº† reducer çš„ useReducer</span>
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">updateReducer</span>(basicStateReducer, initialState);
}

<span class="hljs-comment">// åŸºç¡€ reducerï¼šæ”¯æŒå€¼æˆ–å‡½æ•°</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">basicStateReducer</span>(<span class="hljs-params">state, action</span>) {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">typeof</span> action === <span class="hljs-string">'function'</span> ? <span class="hljs-title function_">action</span>(state) : action;
}
</code></pre>
<h4 data-id="heading-10">updateReducer</h4>
<p>è¿™æ˜¯å¤„ç†æ›´æ–°çš„æ ¸å¿ƒé€»è¾‘ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">updateReducer</span>(<span class="hljs-params">reducer, initialArg</span>) {
  <span class="hljs-comment">// 1. è·å–å½“å‰ Hook</span>
  <span class="hljs-keyword">const</span> hook = <span class="hljs-title function_">updateWorkInProgressHook</span>();
  <span class="hljs-keyword">const</span> queue = hook.<span class="hljs-property">queue</span>;
  
  <span class="hljs-comment">// 2. è·å–å¾…å¤„ç†çš„æ›´æ–°</span>
  <span class="hljs-keyword">const</span> pending = queue.<span class="hljs-property">pending</span>;
  
  <span class="hljs-comment">// 3. è®¡ç®—æ–°çŠ¶æ€</span>
  <span class="hljs-keyword">let</span> newState = hook.<span class="hljs-property">baseState</span>;
  <span class="hljs-keyword">if</span> (pending !== <span class="hljs-literal">null</span>) {
    <span class="hljs-keyword">let</span> update = pending.<span class="hljs-property">first</span>;
    <span class="hljs-keyword">do</span> {
      <span class="hljs-keyword">const</span> action = update.<span class="hljs-property">action</span>;
      newState = <span class="hljs-title function_">reducer</span>(newState, action);
      update = update.<span class="hljs-property">next</span>;
    } <span class="hljs-keyword">while</span> (update !== <span class="hljs-literal">null</span>);
  }
  
  <span class="hljs-comment">// 4. ä¿å­˜æ–°çŠ¶æ€</span>
  hook.<span class="hljs-property">memoizedState</span> = newState;
  
  <span class="hljs-comment">// 5. è¿”å›æ–°çŠ¶æ€å’Œ dispatch</span>
  <span class="hljs-keyword">return</span> [hook.<span class="hljs-property">memoizedState</span>, queue.<span class="hljs-property">dispatch</span>];
}
</code></pre>
<h4 data-id="heading-11">updateWorkInProgressHook</h4>
<p>æ›´æ–°æ—¶ï¼Œéœ€è¦ä» current æ ‘å¤åˆ¶ Hookï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">updateWorkInProgressHook</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// ä» current Fiber è·å–å¯¹åº”çš„ Hook</span>
  <span class="hljs-keyword">let</span> nextCurrentHook;
  <span class="hljs-keyword">if</span> (currentHook === <span class="hljs-literal">null</span>) {
    <span class="hljs-keyword">const</span> current = currentlyRenderingFiber.<span class="hljs-property">alternate</span>;
    nextCurrentHook = current.<span class="hljs-property">memoizedState</span>;
  } <span class="hljs-keyword">else</span> {
    nextCurrentHook = currentHook.<span class="hljs-property">next</span>;
  }
  
  currentHook = nextCurrentHook;
  
  <span class="hljs-comment">// å¤åˆ¶ Hook åˆ° workInProgress</span>
  <span class="hljs-keyword">const</span> newHook = {
    <span class="hljs-attr">memoizedState</span>: currentHook.<span class="hljs-property">memoizedState</span>,
    <span class="hljs-attr">baseState</span>: currentHook.<span class="hljs-property">baseState</span>,
    <span class="hljs-attr">baseQueue</span>: currentHook.<span class="hljs-property">baseQueue</span>,
    <span class="hljs-attr">queue</span>: currentHook.<span class="hljs-property">queue</span>,
    <span class="hljs-attr">next</span>: <span class="hljs-literal">null</span>,
  };
  
  <span class="hljs-comment">// åŠ å…¥é“¾è¡¨...</span>
  <span class="hljs-keyword">return</span> newHook;
}
</code></pre>
<h3 data-id="heading-12">äº”ã€å®Œæ•´æµç¨‹å›¾</h3>
<pre><code class="hljs language-scss" lang="scss">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    é¦–æ¬¡æ¸²æŸ“ (Mount)                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  <span class="hljs-built_in">useState</span>(<span class="hljs-number">0</span>)                                            â”‚
â”‚      â”‚                                                  â”‚
â”‚      â–¼                                                  â”‚
â”‚  <span class="hljs-built_in">mountState</span>(<span class="hljs-number">0</span>)                                          â”‚
â”‚      â”‚                                                  â”‚
â”‚      â”œâ”€â”€â–º åˆ›å»º Hook èŠ‚ç‚¹                                â”‚
â”‚      â”œâ”€â”€â–º åˆå§‹åŒ– memoizedState = <span class="hljs-number">0</span>                      â”‚
â”‚      â”œâ”€â”€â–º åˆ›å»º UpdateQueue                              â”‚
â”‚      â”œâ”€â”€â–º ç»‘å®š dispatch = dispatchSetState              â”‚
â”‚      â”‚                                                  â”‚
â”‚      â–¼                                                  â”‚
â”‚  è¿”å› <span class="hljs-selector-attr">[0, setCount]</span>                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    è§¦å‘æ›´æ–°                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  <span class="hljs-built_in">setCount</span>(<span class="hljs-number">1</span>)                                            â”‚
â”‚      â”‚                                                  â”‚
â”‚      â–¼                                                  â”‚
â”‚  <span class="hljs-built_in">dispatchSetState</span>(fiber, queue, <span class="hljs-number">1</span>)                      â”‚
â”‚      â”‚                                                  â”‚
â”‚      â”œâ”€â”€â–º è·å–ä¼˜å…ˆçº§ lane                               â”‚
â”‚      â”œâ”€â”€â–º åˆ›å»º Update å¯¹è±¡                              â”‚
â”‚      â”œâ”€â”€â–º Eager State: è®¡ç®—æ–°çŠ¶æ€                       â”‚
â”‚      â”œâ”€â”€â–º æ¯”è¾ƒæ–°æ—§çŠ¶æ€ï¼Œç›¸åŒåˆ™ Bailout                   â”‚
â”‚      â”œâ”€â”€â–º å…¥é˜Ÿæ›´æ–°                                      â”‚
â”‚      â”‚                                                  â”‚
â”‚      â–¼                                                  â”‚
â”‚  <span class="hljs-built_in">scheduleUpdateOnFiber</span>() â”€â”€â–º è°ƒåº¦é‡æ–°æ¸²æŸ“               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    é‡æ–°æ¸²æŸ“ (Update)                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  <span class="hljs-built_in">useState</span>(<span class="hljs-number">0</span>)  // åˆå§‹å€¼è¢«å¿½ç•¥                           â”‚
â”‚      â”‚                                                  â”‚
â”‚      â–¼                                                  â”‚
â”‚  <span class="hljs-built_in">updateState</span>(<span class="hljs-number">0</span>)                                         â”‚
â”‚      â”‚                                                  â”‚
â”‚      â–¼                                                  â”‚
â”‚  <span class="hljs-built_in">updateReducer</span>(basicStateReducer, <span class="hljs-number">0</span>)                    â”‚
â”‚      â”‚                                                  â”‚
â”‚      â”œâ”€â”€â–º è·å–å¯¹åº”çš„ Hook                               â”‚
â”‚      â”œâ”€â”€â–º å¤„ç† UpdateQueue ä¸­çš„æ›´æ–°                     â”‚
â”‚      â”œâ”€â”€â–º è®¡ç®—æ–°çŠ¶æ€ = <span class="hljs-number">1</span>                                â”‚
â”‚      â”‚                                                  â”‚
â”‚      â–¼                                                  â”‚
â”‚  è¿”å› [<span class="hljs-number">1</span>, setCount]                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h3 data-id="heading-13">å…­ã€Dispatcher åˆ‡æ¢</h3>
<p>React å¦‚ä½•åŒºåˆ† mount å’Œ updateï¼Ÿç­”æ¡ˆæ˜¯ <strong>Dispatcher åˆ‡æ¢</strong>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// renderWithHooks ä¸­</span>
<span class="hljs-title class_">ReactSharedInternals</span>.<span class="hljs-property">H</span> = 
  current === <span class="hljs-literal">null</span> || current.<span class="hljs-property">memoizedState</span> === <span class="hljs-literal">null</span>
    ? <span class="hljs-title class_">HooksDispatcherOnMount</span>   <span class="hljs-comment">// é¦–æ¬¡æ¸²æŸ“</span>
    : <span class="hljs-title class_">HooksDispatcherOnUpdate</span>; <span class="hljs-comment">// æ›´æ–°æ¸²æŸ“</span>

<span class="hljs-comment">// ä¸¤ä¸ª Dispatcher çš„ useState æŒ‡å‘ä¸åŒå‡½æ•°</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">HooksDispatcherOnMount</span> = {
  <span class="hljs-attr">useState</span>: mountState,
  <span class="hljs-attr">useEffect</span>: mountEffect,
  <span class="hljs-comment">// ...</span>
};

<span class="hljs-keyword">const</span> <span class="hljs-title class_">HooksDispatcherOnUpdate</span> = {
  <span class="hljs-attr">useState</span>: updateState,
  <span class="hljs-attr">useEffect</span>: updateEffect,
  <span class="hljs-comment">// ...</span>
};
</code></pre>
<p>æ¸²æŸ“å®Œæˆåï¼Œåˆ‡æ¢åˆ° ContextOnlyDispatcherï¼Œç¦æ­¢åœ¨ç»„ä»¶å¤–è°ƒç”¨ Hookï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ¸²æŸ“å®Œæˆå</span>
<span class="hljs-title class_">ReactSharedInternals</span>.<span class="hljs-property">H</span> = <span class="hljs-title class_">ContextOnlyDispatcher</span>;

<span class="hljs-keyword">const</span> <span class="hljs-title class_">ContextOnlyDispatcher</span> = {
  <span class="hljs-attr">useState</span>: throwInvalidHookError,  <span class="hljs-comment">// æŠ›å‡ºé”™è¯¯</span>
  <span class="hljs-comment">// ...</span>
};
</code></pre>
<h3 data-id="heading-14">ä¸ƒã€ä¸ºä»€ä¹ˆ Hook ä¸èƒ½æ¡ä»¶è°ƒç”¨ï¼Ÿ</h3>
<p>ç°åœ¨ä½ åº”è¯¥æ˜ç™½äº†ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// âŒ é”™è¯¯</span>
<span class="hljs-keyword">if</span> (condition) {
  <span class="hljs-keyword">const</span> [a, setA] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>);  <span class="hljs-comment">// Hook 1</span>
}
<span class="hljs-keyword">const</span> [b, setB] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>);    <span class="hljs-comment">// Hook 2 æˆ– Hook 1ï¼Ÿ</span>

<span class="hljs-comment">// âœ… æ­£ç¡®</span>
<span class="hljs-keyword">const</span> [a, setA] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>);    <span class="hljs-comment">// å§‹ç»ˆæ˜¯ Hook 1</span>
<span class="hljs-keyword">const</span> [b, setB] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>);    <span class="hljs-comment">// å§‹ç»ˆæ˜¯ Hook 2</span>
</code></pre>
<p>React é€šè¿‡éå†é“¾è¡¨æ¥åŒ¹é… Hookï¼Œå¦‚æœé¡ºåºå˜äº†ï¼ŒçŠ¶æ€å°±ä¹±äº†ã€‚</p>
<h3 data-id="heading-15">å…«ã€è°ƒè¯•æŠ€å·§</h3>
<p>æƒ³è¦äº²è‡ªéªŒè¯ï¼Ÿåœ¨è¿™äº›ä½ç½®æ‰“æ–­ç‚¹ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// é¦–æ¬¡æ¸²æŸ“</span>
mountState          <span class="hljs-comment">// react-reconciler/src/ReactFiberHooks.js</span>

<span class="hljs-comment">// è§¦å‘æ›´æ–°</span>
dispatchSetState    <span class="hljs-comment">// react-reconciler/src/ReactFiberHooks.js</span>

<span class="hljs-comment">// é‡æ–°æ¸²æŸ“</span>
updateReducer       <span class="hljs-comment">// react-reconciler/src/ReactFiberHooks.js</span>
</code></pre>
<p>ç”¨ Counter ç»„ä»¶æµ‹è¯•ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">Counter</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">const</span> [count, setCount] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>);  <span class="hljs-comment">// æ–­ç‚¹è¿™é‡Œ</span>
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> setCount(count + 1)}&gt;{count}<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span>;
};
</code></pre>
<h3 data-id="heading-16">å°ç»“</h3>
<p>æœ¬æ–‡æ·±å…¥åˆ†æäº† useState çš„å®ç°åŸç†ï¼š</p>
<ol>
<li><strong>æ•°æ®ç»“æ„</strong>ï¼šHook ä»¥é“¾è¡¨å½¢å¼å­˜å‚¨åœ¨ Fiber.memoizedState</li>
<li><strong>é¦–æ¬¡æ¸²æŸ“</strong>ï¼šmountState åˆ›å»º Hook å’Œ UpdateQueue</li>
<li><strong>è§¦å‘æ›´æ–°</strong>ï¼šdispatchSetState åˆ›å»º Updateï¼Œè°ƒåº¦æ¸²æŸ“</li>
<li><strong>Eager State</strong>ï¼šæå‰è®¡ç®—ï¼Œç›¸åŒçŠ¶æ€è·³è¿‡æ›´æ–°</li>
<li><strong>é‡æ–°æ¸²æŸ“</strong>ï¼šupdateReducer å¤„ç†æ›´æ–°é˜Ÿåˆ—ï¼Œè®¡ç®—æ–°çŠ¶æ€</li>
<li><strong>Dispatcher</strong>ï¼šé€šè¿‡åˆ‡æ¢å®ç° mount/update çš„åŒºåˆ†</li>
</ol>
<p>ä¸‹ä¸€ç¯‡æˆ‘ä»¬å°†åˆ†æ <strong>useEffect çš„å®ç°åŸç†</strong>ï¼Œçœ‹çœ‹å‰¯ä½œç”¨æ˜¯å¦‚ä½•è¢«è°ƒåº¦å’Œæ‰§è¡Œçš„ã€‚</p>
<hr/>
<blockquote>
<p>ğŸ“¦ é…å¥—æºç ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2F220529%2Freact-debug" target="_blank" title="https://github.com/220529/react-debug" ref="nofollow noopener noreferrer">github.com/220529/reacâ€¦</a></p>
<p>ä¸Šä¸€ç¯‡ï¼š<a href="https://juejin.cn/post/7588007285547286534" target="_blank" title="https://juejin.cn/post/7588007285547286534">React 19 æºç å…¨æ™¯å›¾</a></p>
<p>ä¸‹ä¸€ç¯‡ï¼š<a href="https://juejin.cn/post/7588001624905973779" target="_blank" title="https://juejin.cn/post/7588001624905973779">useEffect çš„å®ç°åŸç†</a></p>
<p>å¦‚æœè§‰å¾—æœ‰å¸®åŠ©ï¼Œæ¬¢è¿ç‚¹èµæ”¶è— ğŸ‘</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç ´é˜²äº†ï¼é˜¿æ˜Ÿä¸€å¹´ç”¨AIæ’¸äº†50ä¸ªé¡¹ç›®ï¼Œè¿™10æ¡é¿å‘ç»éªŒä½ å¿…é¡»çŸ¥é“]]></title>    <link>https://juejin.cn/post/7588031908170973193</link>    <guid>https://juejin.cn/post/7588031908170973193</guid>    <pubDate>2025-12-26T16:18:32.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588031908170973193" data-draft-id="7588086766235795494" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç ´é˜²äº†ï¼é˜¿æ˜Ÿä¸€å¹´ç”¨AIæ’¸äº†50ä¸ªé¡¹ç›®ï¼Œè¿™10æ¡é¿å‘ç»éªŒä½ å¿…é¡»çŸ¥é“"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½,å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-26T16:18:32.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é˜¿æ˜ŸAIå·¥ä½œå®¤"/> <meta itemprop="url" content="https://juejin.cn/user/2250051536050763"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç ´é˜²äº†ï¼é˜¿æ˜Ÿä¸€å¹´ç”¨AIæ’¸äº†50ä¸ªé¡¹ç›®ï¼Œè¿™10æ¡é¿å‘ç»éªŒä½ å¿…é¡»çŸ¥é“
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2250051536050763/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é˜¿æ˜ŸAIå·¥ä½œå®¤
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-26T16:18:32.000Z" title="Fri Dec 26 2025 16:18:32 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/509b6a53b2c14622a7f411953f571293~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_5pifQUnlt6XkvZzlrqQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767370712&amp;x-signature=zQYLeU1DJz%2BqZuqyleR2EWCqEhk%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å“ˆå–½ï¼Œå¤§å®¶å¥½ï¼</p>
<p>é˜¿æ˜ŸğŸ‘‹</p>
<p>å±å®æ²¡æƒ³åˆ°ç°åœ¨IDEéƒ½å·å¾—å‡ºå¹´ç»ˆæŠ¥å‘Šäº†ï¼šæˆ‘åœ¨TRAEçš„å¹´ç»ˆæŠ¥å‘Šé‡Œå±…ç„¶æ˜¯ä¸ªå¼€æœè´¡çŒ®è€…</p>
<p>æ˜¯å•Šï¼Œ æ–­æ–­ç»­ç»­vibecodingäº†50ä¸ªé¡¹ç›®</p>
<p>ä¹Ÿæœ‰å‡ ä¸ªä½“ä¼šåˆ†äº«ç»™å¤§å®¶â€”â€”</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1756b4f4f81f48cfb07f7e35e9f2ca56~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_5pifQUnlt6XkvZzlrqQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767370712&amp;x-signature=VHFsY2cSNN4mRQ3oHrXU%2BR1kUTE%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h2 data-id="heading-0">1ã€ä¸€ä¸ªå¥½çš„å‰æœŸpromptèƒœè¿‡åæœŸæŠ˜è…¾100é</h2>
<p>å¼ºæç¤ºè¯æ§åˆ¶æ˜¯é˜¿æ˜Ÿåœ¨è¸©äº†å¾ˆå¤šå‘ä¹‹åæ‰æ„è¯†åˆ°çš„</p>
<p>æ–°æ‰‹éƒ½æ˜¯èœœæ±è‡ªä¿¡è§‰å¾—éšä¾¿ä¸€å¥è¯èƒ½codingä¸ªå·®ä¸å¤šçš„</p>
<p>ç»“æœè¶Šè¯´è¶Šå¤šè¿˜ä¸å¦‚ç¬¬ä¸€æ¬¡è§„å®šå¥½</p>
<p>æ‰€ä»¥å³ä½¿æ˜¯å¾ˆç®€å•çš„é¡¹ç›®æˆ‘æ—¢ä¼šç”¨ã€ŒEARSè¯­æ³•ã€å»æŠŠæ™®é€šæç¤ºè¯æ‰©å±•æˆå·¥ç¨‹çº§æç¤ºè¯</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6e71e1d1bb8b4c8b9e7ea2c776bbbe50~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_5pifQUnlt6XkvZzlrqQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767370712&amp;x-signature=%2FNF5yDFMhehBeljoDY8SA%2FqVCIE%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æˆ‘çš„åŸéœ€æ±‚å¤§æ¦‚è¿™ä¹ˆé•¿</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/540fbf38fe3b4055bcbdc04a98307523~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_5pifQUnlt6XkvZzlrqQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767370712&amp;x-signature=5mSR0r6rRtLMMbVmiSLOGTJnc6s%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>é€šè¿‡ã€ŒEARSè¯­æ³•ã€ä¹Ÿå°±è¯¦ç»†äº†10å€å§ğŸ‘‡â€¢á´—â€¢ğŸ’§</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bb71c0c1081f4d4286b563606250e97a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_5pifQUnlt6XkvZzlrqQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767370712&amp;x-signature=K2Ql%2BB0R4za0D7xIjCB42Hnwdcs%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æ¯•ç«Ÿï¼Œå‡ åƒå­—çš„æç¤ºè¯å’Œ100å­—çš„ç®€å•äº¤ä»£å·®åˆ«è¿˜æ˜¯å¾ˆå¤§çš„</p>
<p>ä¹Ÿä¼šç”¨ä¸€äº›è‡ªåŠ¨åŒ–æç¤ºè¯å¢å¼º</p>
<p>æ¥å¸®æˆ‘åœ¨å¿™çš„æ—¶å€™ä¹Ÿèƒ½å…¼é¡¾æœ€åŸºæœ¬æç¤ºè¯ä¸“ä¸šåº¦</p>
<p>æ¯”å¦‚è¿™ä¸ªè‡ªåŠ¨å¢å¼ºåŠŸèƒ½</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0c9c295800a4438a8df01b8aa559e3ac~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_5pifQUnlt6XkvZzlrqQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767370712&amp;x-signature=BzNoQnvzGe6SIHLIGhwc%2BXTb%2BCU%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h2 data-id="heading-1">2ã€ä¸ä¸€å®šéè¦ç”¨å›½å¤–CLI</h2>
<p>å‰ä¸¤å¤©ï¼Œé˜¿æ˜Ÿæƒ³åšä¸€ä¸ªå¡å¯†ç³»ç»Ÿã€‚ æœ¬èƒ½åœ°æ‰“å¼€äº†å›½å¤–çš„CLIï¼ˆä¸€ç§å‘½ä»¤è¡Œç¼–ç¨‹å½¢å¼ï¼‰</p>
<p>ä½†æ˜¯ç”¨å›½å†…IDEæ¥åšå´æ„å¤–çš„é¡ºåˆ©</p>
<p>ç®€å•çš„é¡¹ç›®çš„è¯ï¼Œæ•´ä¸ªé¡¹ç›®ä¸‹æ¥å‡ ä¹æ²¡æœ‰å›æ»šçš„æ—¶å€™ï¼Œ</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/047263370a49453ead1498ed5b6266f7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_5pifQUnlt6XkvZzlrqQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767370712&amp;x-signature=KAknz4%2BzV2BOZzEQ3RrYVXYx%2BYU%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å¾ˆå°‘ï¼Œä½†ä¸èƒ½è¯´æ˜¯å®Œå…¨æ²¡æœ‰å›æ»šï¼Œé‚£ä¹Ÿå¤ªå¤¸å¼ äº†ã€‚</p>
<p>ä½†æ˜¯å¯¹æˆ‘è¿™ç§åŠè·¯æ‰å¼€å§‹æ¥è§¦AIç¼–ç¨‹çš„äººæ¥è¯´ç®—å‹å¥½çš„ï¼Œ</p>
<p>æ¯”2023å¹´é‚£ä¼šå„¿çš„IDEæ›´æ˜¯è®©æˆ‘ä»¬å°‘åšäº†å¾ˆå¤šæ— ç”¨å·¥ã€‚</p>
<p><strong>è™½ç„¶ç°åœ¨æŸäº›CLIåŠŸèƒ½ç¡®å®å‘¼å£°å¾ˆé«˜ï¼Œä½†æ˜¯å¯¹å°ç™½æ¥è¯´ä¸Šæ‰‹éš¾åº¦å…¶å®æŒºå¤§çš„</strong>ï¼Œçœ‹åˆ°å‘½ä»¤è¡Œå¤´æ™•äº†è¿˜æ€ä¹ˆç»§ç»­ã€‚æ‰€ä»¥å¦‚æœä½ å®Œå…¨æ²¡æœ‰ç”¨AIç¼–ç¨‹è¿‡ï¼Œæˆ‘è¿˜æ˜¯å»ºè®®ä»æ™ºèƒ½IDEåšèµ·ã€‚</p>
<h2 data-id="heading-2">3ã€å·¥ä½œæµç›´æ¥åšæˆæ™ºèƒ½ä½“</h2>
<p>æ¯æ¬¡åšé¡¹ç›®ï¼Œ</p>
<p>é˜¿æ˜Ÿéƒ½ä¼šåšä¸€ä¸ªguidebookæŠŠæ•´ä¸ªé¡¹ç›®çš„è¸©å‘è¿‡ç¨‹è®°å½•ä¸‹æ¥ï¼Œå¥½äºŒæ¬¡å¤ç”¨åˆ°è‡ªåª’ä½“ä¸Šï¼Œ<strong>å¦‚æœæ²¡æœ‰è¿™äº›å®æ“è®°å½•ï¼Œå†™çš„ç¼–ç¨‹æ–‡ç« å°±ä¼šè™šæ— å¾ˆå¤šï¼Œä¸ºäº†ä¸€é±¼å¤šåƒä¹Ÿè¦è®°å½•ä¸€ä¸‹ã€‚</strong></p>
<p>è¿™ä¸ªæ—¶å€™å°±ä¼šç”¨åˆ°æ™ºèƒ½ä½“åŠŸèƒ½ï¼Œè®©ä»–æ‰®æ¼”guidebookåŠ©æ‰‹ï¼Œç»™ä»–äººè®¾å°±è¡Œäº†ã€‚è¿™ä¸ªè¿‡ç¨‹å…¶å®æ¯”åœ¨ä¸€äº›cliå·¥å…·é‡Œå»é…ç½®ä¸€ä¸ªagentè¦æ–¹ä¾¿ç‚¹ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a428f856b3504b829734de8b2e800802~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_5pifQUnlt6XkvZzlrqQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767370712&amp;x-signature=5i9J07qPYCMlWiZxdTWoe9%2BrfbE%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6817a064a4de4741919e2cd2273a00a7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_5pifQUnlt6XkvZzlrqQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767370712&amp;x-signature=1GeofwTzorPZl9K5BQc4JUlWjqE%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><strong>é˜¿æ˜Ÿä¹‹å‰ä¹Ÿæ˜¯åœ¨clié‡Œé…agentï¼Œä½†æ˜¯å¼•ç”¨èµ·æ¥å¤ªéº»çƒ¦äº†</strong>ï¼Œä¸€ä¸ªæ˜¯å¯è§†åŒ–ä¿¡æ¯æœ‰é™çš„æƒ…å†µä¸‹å¤ªè€ƒéªŒè®°æ€§ï¼Œä¸€ä¸ªæ˜¯å®¹æ˜“æ‰“å‡»æ–°æ‰‹ç§¯ææ€§ï¼Œæ‰€ä»¥æ›´å€¾å‘äºç›´æ¥åœ¨IDEé‡Œç”¨æ™ºèƒ½ä½“æå®šã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/637ee2b8c0a943e58fe912d29730730d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_5pifQUnlt6XkvZzlrqQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767370712&amp;x-signature=ofRimE6M68nhg18OvJjS9YAkWTs%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>è€Œä¸”æˆ‘è•å–œæ¬¢çš„æ˜¯<strong>å®ƒå¯ä»¥ç›´æ¥ç›´æ¥è®©æœ‹å‹å¤ç”¨ï¼Œå®ƒç›¸å½“äºæ˜¯æŠŠæç¤ºè¯çš„åŠŸèƒ½ç›´æ¥æ’ä»¶åŒ–äº†ï¼Œè®©å’±ä»¬ä¸»æ‰“ä¸€ä¸ªæ´»å„¿ä¸å¹²ä¸¤é</strong>ã€‚ä¹Ÿä¸ç”¨ç›¸äº’å‘æç¤ºè¯ç²˜æ¥ç²˜å»äº†ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d7bf882f59b54ade8544306bf7be08d3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_5pifQUnlt6XkvZzlrqQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767370712&amp;x-signature=1pWPHI5Rvov2TqIUxS5s8mTycJ8%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h2 data-id="heading-3">4ã€å‰ç«¯é¡¹ç›®ï¼Œç›´æ¥é€‰æ‹©å…ƒç´ </h2>
<p>é˜¿æ˜Ÿè§‰å¾—å‡¡æ˜¯æ¶‰åŠåˆ°å‰ç«¯è§†è§‰çš„ç²¾ç»†åŒ–æ§åˆ¶</p>
<p>promptçš„æ•ˆç‡å…¶å®æ¯”è§†è§‰ç‚¹å‡»è¦ä½å¾ˆå¤š</p>
<p>æ‰€ä»¥æˆ‘è‡ªå·±ç»å¸¸ç”¨çš„è¿˜æœ‰å…ƒç´ é€‰æ‹©ï¼Œä¸ç”¨æˆ‘ä¸€ç›´å˜šå•µå˜šåˆ°åº•æ”¹å“ªé‡Œäº†ï¼Œæ•ˆç‡é«˜äº†å¾ˆå¤š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ff94331a0fc743509c3be51e35393800~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_5pifQUnlt6XkvZzlrqQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767370712&amp;x-signature=P5HWpDpj2Xgwt7RhB1IxUhStws8%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>figmaçš„å‰ç«¯æˆ‘éƒ½ç›´æ¥ç”¨mcpäº†ï¼Œä¸ªäººæ„Ÿè§‰æ˜¯æ‰“é€šè®¾è®¡ä¸å¼€å‘çš„å…³é”®ä¸€æ­¥ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1cfd06042db94e92bc23e5b1d937d107~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_5pifQUnlt6XkvZzlrqQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767370712&amp;x-signature=2rW7Jzo8Mi5Krlgn5YbWwZ8M0oM%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h2 data-id="heading-4">5ã€å¼•ç”¨ä¸Šä¸‹æ–‡</h2>
<p>ç¼–ç¨‹çš„æ—¶å€™ä¸è¦ç›´æ¥å»æé—®ï¼Œæœ€å¥½é€‰ä¸­ä½ è¦æ”¹çš„ä¸Šä¸‹æ–‡å†æé—®ï¼Œ</p>
<p>è€Œä¸”ç°åœ¨IDEå¯ä»¥å¼•ç”¨çš„ä¸Šä¸‹æ–‡å¾ˆå¤šï¼Œç»ˆç«¯é‡Œçš„æŠ¥é”™ä¹Ÿèƒ½ç›´æ¥åŠ è¿›å»ï¼Œæ–‡ä»¶ã€æ–‡ä»¶å¤¹ã€å·¥ä½œåŒºã€æ–‡æ¡£é›†å’Œç½‘é¡µå…¶å®éƒ½å¯ä»¥ä½œä¸ºæ•´ä¸ªé¡¹ç›®çš„ä¸Šä¸‹æ–‡æ·»åŠ è¿›å»ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/aefc165221994d4db3e966cf4161791c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_5pifQUnlt6XkvZzlrqQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767370712&amp;x-signature=8TLnymHEho2vl4oANPNls4ZtoKs%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h2 data-id="heading-5">6ã€æ•°æ®åº“å¯ä»¥ç›´æ¥è¿supabase mcp</h2>
<p>ä¹‹å‰é˜¿æ˜Ÿåªæ˜¯åšç‚¹ä¸å¸¦æ•°æ®åº“çš„å‰ç«¯é¡¹ç›®</p>
<p>ä½†æ˜¯åšç€åšç€å¿…ç„¶ä¼šç”¨åˆ°æ•°æ®åº“å•Šï¼Œç‰¹åˆ«æ˜¯ä¸€äº›è¦åšå‡ºæµ·çš„åŒå­¦</p>
<p>é˜¿æ˜Ÿä»¥å‰æ¿€æ´»æ•°æ®åº“æ˜¯ç›´æ¥è®©AIå»æ¥API</p>
<pre><code class="hljs language-arduino" lang="arduino">
<span class="hljs-keyword">import</span>Â { createClient }Â fromÂ <span class="hljs-string">'@supabase/supabase-js'</span>

<span class="hljs-type">const</span>Â supabaseUrl =Â <span class="hljs-string">'https://okqxrigpjgoncvoflenz.supabase.co'</span>
<span class="hljs-type">const</span>Â supabaseKey = process.env.SUPABASE_KEY
<span class="hljs-type">const</span>Â supabase =Â <span class="hljs-built_in">createClient</span>(supabaseUrl, supabaseKey)
</code></pre>
<p>åæ¥å‘ç°mcpå¯ä»¥è‡ªå·±æå®šâ€¢á´—â€¢ğŸ’§é™¤äº†åˆšå¼€å§‹é…ç½®å¯èƒ½æœ‰ç‚¹æ‡µæ²¡å•¥å¤§é—®é¢˜</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2d5f9bd683d74d3181bdd878b7b0e96c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_5pifQUnlt6XkvZzlrqQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767370712&amp;x-signature=dsmiyrxncaezCc8rh5Ammb5ut%2BI%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>MCP = AIç”¨ç»Ÿä¸€çš„å·¥å…·è°ƒç”¨æ–¹å¼è®¿é—®æ•°æ®åº“</p>
<p>çœ‹æ–‡æ¡£ =AIæ¯æ¬¡éƒ½è¦ç†è§£APIæ ¼å¼ã€æ„é€ è¯·æ±‚ï¼Œå°ç™½å®¹æ˜“å‡ºé”™ï¼Œç‰¹åˆ«æˆ‘ä»¬é¢‘ç¹ä¿®æ”¹çš„æ—¶å€™</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/343fc5836a8547a9b9071b75a46a8bc3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_5pifQUnlt6XkvZzlrqQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767370712&amp;x-signature=e2v7YizBO%2FMFoIDZwsjMmv37EFM%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æ‰€ä»¥ï¼Œç®€å•çš„éœ€æ±‚ç›´æ¥é…å°±è¡Œäº†ï¼ŒÂ <strong>æˆ‘ä¸€èˆ¬ç›´æ¥æ·»åŠ mcpï¼Œ Connect Supabaseã€‚</strong></p>
<h2 data-id="heading-6">7ã€æ´»ç”¨tab</h2>
<p>æˆ‘ä¸ªäººæ˜¯ç”¨tabæ¯”è¾ƒå°‘çš„ï¼Œæ˜¯ä¸ªæ‡’äººã€‚è¢«å¹´ç»ˆæ€»ç»“æ‹†ç©¿äº†ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4a05018654f240b593cb30cd3dc578af~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_5pifQUnlt6XkvZzlrqQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767370712&amp;x-signature=xY3R6HtAyvz9licMdjwEYztJB5g%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>TRAEé‡Œçš„è¿™ä¸ªtabåŠŸèƒ½ä¸»è¦æ˜¯åšä»£ç è¡¥å…¨ã€å¤šè¡Œä¿®æ”¹çš„</p>
<p>æŒ‰ä¸‹ Tab é”®ï¼Œè·³è½¬è‡³ä¿®æ”¹ç‚¹æ‰€åœ¨ä½ç½®ã€‚</p>
<p>Ctrl / Command + â†’ ç»„åˆé”®é€å­—æ¥å—ä¸€ä¸ªå»ºè®®çš„ä¿®æ”¹ã€‚</p>
<p>Escape é”®æ‹’ç»å°±å¥½ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6c4e08734d664093a21b800cda5cb3a9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_5pifQUnlt6XkvZzlrqQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767370712&amp;x-signature=3Wrqy92J%2BUX4Qh3UoBA0JQgiV9c%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bbadf3eec77d43aa8cf50978110e4583~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_5pifQUnlt6XkvZzlrqQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767370712&amp;x-signature=%2BdH1%2Fu6GJtSchPK%2BP07ks4nd3IY%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ç°åœ¨ç»å¸¸ç”¨tabåŠŸèƒ½çš„éƒ½æ˜¯å¤§ç¥äº†ğŸ˜‚</p>
<p>è¦çœŸå­¦ä»£ç çœŸç¼–ç¨‹è¿˜æ˜¯å¾—çœ‹çš„æ›´ç»†ä¸€ç‚¹ã€‚</p>
<h2 data-id="heading-7">8ã€ç‰ˆæœ¬æ§åˆ¶</h2>
<p>å’±ä»¬å†™ä»£ç çš„æ—¶å€™éƒ½è¦æäº¤å¾ˆå¤šgitç‰ˆæœ¬ï¼Œ</p>
<p>ä½†æ˜¯æ”¹ä¸€ç‰ˆè¾“å…¥ä¸€æ¬¡æäº¤å‘½ä»¤å°±å¤ªéº»çƒ¦äº†ã€‚</p>
<p>å¯ä»¥ç”¨ä¸€äº›æ’ä»¶ï¼ŒæŠŠgit Hubç½‘é¡µåŠŸèƒ½é›†æˆåˆ°ä½ çš„æœ¬åœ°ç¼–è¾‘å™¨é‡Œã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/19050f6813414580bd8f5cba26d7a686~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_5pifQUnlt6XkvZzlrqQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767370712&amp;x-signature=wmesMj4PojvCunnJG1xPbUfch8E%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ç›´æ¥å°±èƒ½æ¨é€ä»£ç äº†ï¼ŒTRAEæœ‰ä¸ªä¼˜ç‚¹ï¼Œé™¤äº†gitè¿˜èƒ½æ›´ç›´è§‚åœ°ç›´æ¥åœ¨å•ä¸ªå¥å­æ—è¾¹å›é€€</p>
<p>è‡³å°‘èƒ½ç»™æˆ‘å‚¨å­˜10ä¸ªç‰ˆæœ¬ä»¥é˜²ä¸‡ä¸€</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fdae4ec3b08e44259e1a5aa0b21b4218~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_5pifQUnlt6XkvZzlrqQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767370712&amp;x-signature=W%2BweCeUQbVsD5lYbkeE6wtnqDe0%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h2 data-id="heading-8">9ã€ç®¡å¥½ä½ å’ŒAIçš„èŠå¤©è®°å½•</h2>
<p>æˆ‘è‡ªå·±åˆšæ¥è§¦ä¸€äº›cliå·¥å…·çš„æ—¶å€™ï¼Œ</p>
<p>å®Œå…¨æ‰¾ä¸åˆ°å“ªé‡Œå»çœ‹èŠå¤©è®°å½•å†å»çœ‹ç½‘ä¸Šå„ç§æ’ä»¶æ¥åšèŠå¤©è®°å½•ä¿å­˜çš„ï¼Œ</p>
<p>å¯¹å°ç™½æ¥è¯´å…‰æ˜¯è®¾ç½®è¿™äº›ä¸œè¥¿éƒ½æ™•äº†</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7397cd92a01442e5a73035da51e2e707~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_5pifQUnlt6XkvZzlrqQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767370712&amp;x-signature=Lw4YuX63Kamw6gPkle25mqBD%2FGU%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>åæ¥æ‰å¼€å§‹ç”¨mcpç®¡èŠå¤©è®°å½•ï¼Œ</p>
<p>è¿™ç§mcpä¸€èˆ¬å¯ä»¥è‡ªåŠ¨è®°å½•å¯¹è¯å†å²ï¼Œæ™ºèƒ½ç®¡ç†ä¸Šä¸‹æ–‡ï¼Œå¹¶è·Ÿè¸ªä»»åŠ¡ã€‚ä¸å¦¨æ¢ç´¢ä¸€ä¸‹ã€‚</p>
<h2 data-id="heading-9">10ã€soloä¸æ˜¯éç”¨ä¸å¯</h2>
<p>æ•´ä¸ªè¿‡ç¨‹æˆ‘è‡ªå·±ç”¨çš„æ˜¯IDEï¼Œ</p>
<p>å› ä¸º solo æ¨¡å¼çš„è¯ï¼Œå¯¹æˆ‘æ¥è¯´è¿˜æ˜¯æœ‰ç‚¹å¤ªé‡é©¬è„±ç¼°äº†ã€‚</p>
<p>æ‰€ä»¥æˆ‘å»ºè®®åŠè·¯çš„å°ç™½ï¼Œ</p>
<p>å¦‚æœæƒ³åš vibe coding çš„è¯ï¼Œ</p>
<p>å¤§å®¶å¯ä»¥æ ¹æ®è‡ªå·±çš„ä¹ æƒ¯é€‰æ‹©</p>
<p>æ— è®ºæ˜¯ideæ¨¡å¼è¿˜æ˜¯soloæ¨¡å¼</p>
<p>æœ€å¥½æ˜¯ä¸€è¾¹çœ‹ä¸€è¾¹å­¦ï¼Œ æŠŠæ¯ä¸€æ¬¡ç¼–ç¨‹æ–°å­¦åˆ°çš„çŸ¥è¯†ç‚¹</p>
<p>æ²‰æ·€åˆ°ç›¸å…³çš„æ–‡æ¡£é‡Œï¼Œä¸‹æ¬¡å‡ºå‘ä½ å°±æ˜¯æœ€æ£’çš„å•¦ï½</p>
<p>Â </p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ee137d933e394e7dab95badf526a44d1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_5pifQUnlt6XkvZzlrqQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767370712&amp;x-signature=puMYQS4nCKztVZEzloB9gG4QVLk%3D" alt="å›¾ç‰‡" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[èµ‹äºˆå¤§æ¨¡å‹â€œè®°å¿†â€ï¼šæ·±åº¦è§£æ LangChain ä¸­ LLM çš„ä¸Šä¸‹æ–‡è®°å¿†å®ç°]]></title>    <link>https://juejin.cn/post/7587997893988335643</link>    <guid>https://juejin.cn/post/7587997893988335643</guid>    <pubDate>2025-12-27T02:57:54.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587997893988335643" data-draft-id="7587630413012156426" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="èµ‹äºˆå¤§æ¨¡å‹â€œè®°å¿†â€ï¼šæ·±åº¦è§£æ LangChain ä¸­ LLM çš„ä¸Šä¸‹æ–‡è®°å¿†å®ç°"/> <meta itemprop="keywords" content="LangChain,JavaScript,LLM"/> <meta itemprop="datePublished" content="2025-12-27T02:57:54.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="AAAé˜¿giao"/> <meta itemprop="url" content="https://juejin.cn/user/473218785740627"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            èµ‹äºˆå¤§æ¨¡å‹â€œè®°å¿†â€ï¼šæ·±åº¦è§£æ LangChain ä¸­ LLM çš„ä¸Šä¸‹æ–‡è®°å¿†å®ç°
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/473218785740627/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    AAAé˜¿giao
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-27T02:57:54.000Z" title="Sat Dec 27 2025 02:57:54 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Â å¼•è¨€</h2>
<blockquote>
<p><strong>â€œæˆ‘å« Agiaoï¼Œå–œæ¬¢å–ç™½å…°åœ°ã€‚â€</strong><br/>
â€”â€” ä½ è¯´å®Œè¿™å¥è¯ï¼Œè½¬èº«ç¦»å¼€ã€‚<br/>
å†å›æ¥é—®ï¼šâ€œæˆ‘å«ä»€ä¹ˆåå­—ï¼Ÿâ€<br/>
å¦‚æœ AI å›ç­”â€œæˆ‘ä¸çŸ¥é“â€ï¼Œé‚£å®ƒåªæ˜¯ä¸ªæ— çŠ¶æ€çš„ APIï¼›<br/>
å¦‚æœå®ƒå›ç­”â€œAgiaoâ€ï¼Œé‚£å®ƒå°±æ‹¥æœ‰äº†<strong>è®°å¿†</strong>ã€‚</p>
</blockquote>
<p>åœ¨äººå·¥æ™ºèƒ½çš„ä¸–ç•Œé‡Œï¼Œâ€œè®°å¿†â€ä¸æ˜¯ä¸ç”Ÿä¿±æ¥çš„å¤©èµ‹ï¼Œè€Œæ˜¯ä¸€ç§ç²¾å¿ƒè®¾è®¡çš„å·¥ç¨‹èƒ½åŠ›ã€‚å¤§å‹è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰æœ¬èº«æ˜¯<strong>æ— çŠ¶æ€</strong>çš„â€”â€”æ¯ä¸€æ¬¡è°ƒç”¨éƒ½åƒä¸€åœºå…¨æ–°çš„å¯¹è¯ï¼Œæ¨¡å‹å¯¹è¿‡å»ä¸€æ— æ‰€çŸ¥ã€‚ç„¶è€Œï¼Œç°å®ä¸­çš„æ™ºèƒ½äº¤äº’å¿…é¡»å…·å¤‡ä¸Šä¸‹æ–‡è¿è´¯æ€§ã€‚å¦‚ä½•è®© LLM â€œè®°ä½ä½ â€ï¼Ÿè¿™æ­£æ˜¯æˆ‘ä»¬ä»Šå¤©è¦æ·±å…¥å‰–æçš„æ ¸å¿ƒé—®é¢˜ã€‚</p>
<p>æœ¬æ–‡å°†é€è¡Œã€é€æ¨¡å—ã€é€ API åœ°è§£æÂ <code>1.js</code> æ–‡ä»¶ï¼Œæ­ç¤º LangChain å¦‚ä½•é€šè¿‡ <strong>å¯¹è¯å†å²ç®¡ç†æœºåˆ¶</strong> èµ‹äºˆ LLM çœŸæ­£çš„è®°å¿†èƒ½åŠ›ã€‚æˆ‘ä»¬å°†ä¸ä»…è§£é‡Šâ€œæ€ä¹ˆåšâ€ï¼Œæ›´è¦é˜æ˜â€œä¸ºä»€ä¹ˆè¿™ä¹ˆåšâ€ï¼Œå¹¶å¯¹æ¯”æ— è®°å¿†ç‰ˆæœ¬ï¼ˆ<code>index.js</code>ï¼‰çš„å±€é™ï¼Œæœ€ç»ˆæ„å»ºä¸€ä¸ªå®Œæ•´ã€ç”ŸåŠ¨ã€æŠ€æœ¯æ‰å®çš„è®¤çŸ¥å›¾æ™¯ã€‚</p>
<hr/>
<h2 data-id="heading-1">èƒŒæ™¯ï¼šä¸ºä»€ä¹ˆ LLM é»˜è®¤æ²¡æœ‰è®°å¿†ï¼Ÿ</h2>
<p>é¦–å…ˆï¼Œè®©æˆ‘ä»¬å›åˆ°åŸºç¡€ã€‚</p>
<blockquote>
<p><strong>LLM API è°ƒç”¨å’Œ http è¯·æ±‚ä¸€æ ·ï¼Œéƒ½æ˜¯æ— çŠ¶æ€çš„</strong></p>
</blockquote>
<p>è¿™æ„å‘³ç€æ¯æ¬¡ä½ å‘æ¨¡å‹å‘é€ä¸€æ¡æ¶ˆæ¯ï¼ˆä¾‹å¦‚ <code>"æˆ‘å«Agiao"</code>ï¼‰ï¼Œæ¨¡å‹ä»…åŸºäºè¿™æ¡æ¶ˆæ¯ç”Ÿæˆå›å¤ï¼Œä¸ä¼šè‡ªåŠ¨ä¿ç•™ä»»ä½•ä¸Šä¸‹æ–‡ã€‚å¦‚æœä½ ç´§æ¥ç€å†å‘ä¸€æ¡ <code>"æˆ‘å«ä»€ä¹ˆåå­—ï¼Ÿ"</code>ï¼Œæ¨¡å‹æ ¹æœ¬ä¸çŸ¥é“å‰ä¸€æ¡æ¶ˆæ¯çš„å­˜åœ¨ã€‚</p>
<p>æˆ‘ä»¬æ¥çœ‹ <code>index.js</code> çš„å®ç°ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> {<span class="hljs-title class_">ChatDeepSeek</span>} <span class="hljs-keyword">from</span> <span class="hljs-string">'@langchain/deepseek'</span>
<span class="hljs-keyword">import</span> <span class="hljs-string">'dotenv/config'</span>

<span class="hljs-keyword">const</span> model = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ChatDeepSeek</span>({ <span class="hljs-attr">model</span>: <span class="hljs-string">'deepseek-chat'</span>, <span class="hljs-attr">temperature</span>: <span class="hljs-number">0</span>});

<span class="hljs-comment">// http api è¯·æ±‚</span>
<span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> model.<span class="hljs-title function_">invoke</span>(<span class="hljs-string">'æˆ‘å«Agiaoï¼Œå–œæ¬¢å–ç™½å…°åœ°'</span>)
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(res.<span class="hljs-property">content</span>);

<span class="hljs-keyword">const</span> res2 = <span class="hljs-keyword">await</span> model.<span class="hljs-title function_">invoke</span>(<span class="hljs-string">'æˆ‘å«ä»€ä¹ˆåå­—'</span>)
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(res2.<span class="hljs-property">content</span>);
</code></pre>
<p>è¿™æ®µä»£ç åšäº†ä¸¤ä»¶äº‹ï¼š</p>
<ol>
<li>ç¬¬ä¸€æ¬¡è°ƒç”¨ <code>model.invoke(...)</code>ï¼Œå‘Šè¯‰æ¨¡å‹ä½ çš„åå­—å’Œå–œå¥½ã€‚</li>
<li>ç¬¬äºŒæ¬¡ç‹¬ç«‹è°ƒç”¨ <code>model.invoke(...)</code>ï¼Œè¯¢é—®è‡ªå·±çš„åå­—ã€‚</li>
</ol>
<p>ç”±äºä¸¤æ¬¡è°ƒç”¨ä¹‹é—´<strong>æ²¡æœ‰ä»»ä½•ä¿¡æ¯ä¼ é€’</strong>ï¼Œç¬¬äºŒæ¬¡è¯·æ±‚å¯¹æ¨¡å‹è€Œè¨€å®Œå…¨æ˜¯å­¤ç«‹çš„ã€‚å› æ­¤ï¼Œæ¨¡å‹æå¤§æ¦‚ç‡ä¼šå›ç­”ç±»ä¼¼ï¼šâ€œæŠ±æ­‰ï¼Œæˆ‘ä¸çŸ¥é“æ‚¨å«ä»€ä¹ˆåå­—ã€‚â€â€”â€”è¿™ä¸æ˜¯æ¨¡å‹ç¬¨ï¼Œè€Œæ˜¯æ¶æ„ä½¿ç„¶ã€‚</p>
<blockquote>
<p>ğŸ’¡ <strong>å…³é”®æ´å¯Ÿ</strong>ï¼šè¦å®ç°è®°å¿†ï¼Œæˆ‘ä»¬å¿…é¡»<strong>ä¸»åŠ¨ç»´æŠ¤å¯¹è¯å†å²ï¼Œå¹¶åœ¨æ¯æ¬¡è¯·æ±‚æ—¶å°†å…¶ä½œä¸ºä¸Šä¸‹æ–‡ä¼ å…¥æ¨¡å‹</strong>ã€‚</p>
</blockquote>
<p>ä½†å¦‚ä½•é«˜æ•ˆã€ç»“æ„åŒ–ã€å¯æ‰©å±•åœ°åšåˆ°è¿™ä¸€ç‚¹ï¼Ÿè¿™å°±æ˜¯ LangChain çš„ç”¨æ­¦ä¹‹åœ°ã€‚</p>
<hr/>
<h2 data-id="heading-2">æ¶æ„é¢„è§ˆï¼šLangChain çš„è®°å¿†æŠ½è±¡</h2>
<p>LangChain æä¾›äº†ä¸€å¥—å®Œæ•´çš„â€œè®°å¿†â€ï¼ˆMemoryï¼‰æ¨¡å—ï¼Œå…¶æ ¸å¿ƒæ€æƒ³æ˜¯ï¼š</p>
<blockquote>
<p><strong>å°†å¯¹è¯å†å²è§†ä¸ºä¸€ç§å¯æ’æ‹”çš„ä¸Šä¸‹æ–‡æºï¼Œåœ¨æ¯æ¬¡è°ƒç”¨ LLM å‰åŠ¨æ€æ³¨å…¥åˆ° Prompt ä¸­ã€‚</strong></p>
</blockquote>
<p>åœ¨ <code>1.js</code> ä¸­ï¼Œè¿™ä¸€æ€æƒ³é€šè¿‡ä»¥ä¸‹ç»„ä»¶ååŒå®ç°ï¼š</p>
<ul>
<li><code>InMemoryChatMessageHistory</code>ï¼šå­˜å‚¨å¯¹è¯å†å²ã€‚</li>
<li><code>ChatPromptTemplate</code>ï¼šå®šä¹‰åŒ…å«å†å²å ä½ç¬¦çš„æç¤ºæ¨¡æ¿ã€‚</li>
<li><code>RunnableWithMessageHistory</code>ï¼šè‡ªåŠ¨ç®¡ç†å†å²åŠ è½½ä¸ä¿å­˜çš„åŒ…è£…å™¨ã€‚</li>
<li><code>ChatDeepSeek</code>ï¼šåº•å±‚ LLM æ¨¡å‹ã€‚</li>
</ul>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†é€è¡Œæ‹†è§£ <code>1.js</code>ï¼Œæ·±å…¥æ¯ä¸€ä¸ª API çš„è®¾è®¡å“²å­¦ä¸å®ç°ç»†èŠ‚ã€‚</p>
<hr/>
<h2 data-id="heading-3">é€è¡Œæ·±åº¦è§£æ <code>1.js</code></h2>
<h3 data-id="heading-4">ç¬¬ä¸€éƒ¨åˆ†ï¼šæ¨¡å—å¯¼å…¥ï¼ˆImport Statementsï¼‰</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">ChatDeepSeek</span>} <span class="hljs-keyword">from</span> <span class="hljs-string">'@langchain/deepseek'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ChatPromptTemplate</span>} <span class="hljs-keyword">from</span> <span class="hljs-string">'@langchain/core/prompts'</span>;
<span class="hljs-comment">// å¸¦ä¸Šå†å²è®°å½•çš„å¯è¿è¡Œå¯¹è±¡</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">RunnableWithMessageHistory</span>} <span class="hljs-keyword">from</span> <span class="hljs-string">'@langchain/core/runnables'</span>;
<span class="hljs-comment">// å­˜æ”¾åœ¨å†…å­˜ä¸­</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">InMemoryChatMessageHistory</span>} <span class="hljs-keyword">from</span> <span class="hljs-string">'@langchain/core/chat_history'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">'dotenv/config'</span>;
</code></pre>
<h4 data-id="heading-5">âœ… <code>ChatDeepSeek</code></h4>
<ul>
<li>
<p>æ¥æºï¼š<code>@langchain/deepseek</code></p>
</li>
<li>
<p>ä½œç”¨ï¼šå°è£… DeepSeek æä¾›çš„èŠå¤©æ¨¡å‹ APIï¼Œä½¿å…¶ç¬¦åˆ LangChain çš„ <code>BaseChatModel</code> æ¥å£ã€‚</p>
</li>
<li>
<p>ç‰¹æ€§ï¼š</p>
<ul>
<li>æ”¯æŒ <code>invoke()</code>ã€<code>stream()</code> ç­‰æ ‡å‡†æ–¹æ³•ã€‚</li>
<li>è‡ªåŠ¨å¤„ç†æ¶ˆæ¯æ ¼å¼ï¼ˆå¦‚ <code>HumanMessage</code>, <code>AIMessage</code>ï¼‰ã€‚</li>
<li>å¯é…ç½® <code>model</code>ã€<code>temperature</code>ã€<code>maxTokens</code> ç­‰å‚æ•°ã€‚</li>
</ul>
</li>
</ul>
<h4 data-id="heading-6">âœ… <code>ChatPromptTemplate</code></h4>
<ul>
<li>
<p>æ¥æºï¼š<code>@langchain/core/prompts</code></p>
</li>
<li>
<p>ä½œç”¨ï¼šæ„å»ºç»“æ„åŒ–çš„èŠå¤©æç¤ºï¼ˆpromptï¼‰ï¼Œæ”¯æŒç³»ç»Ÿæ¶ˆæ¯ã€ç”¨æˆ·æ¶ˆæ¯ã€AI æ¶ˆæ¯åŠå ä½ç¬¦ã€‚</p>
</li>
<li>
<p>å…³é”®èƒ½åŠ›ï¼š</p>
<ul>
<li>ä½¿ç”¨ <code>fromMessages()</code> é™æ€æ–¹æ³•ä»æ¶ˆæ¯æ•°ç»„åˆ›å»ºæ¨¡æ¿ã€‚</li>
<li>æ”¯æŒå˜é‡æ’å€¼ï¼ˆå¦‚ <code>{input}</code>, <code>{history}</code>ï¼‰ã€‚</li>
<li>è¾“å‡ºä¸º <code>Runnable</code>ï¼Œå¯ä¸å…¶ä»–ç»„ä»¶é“¾å¼ç»„åˆï¼ˆ<code>.pipe()</code>ï¼‰ã€‚</li>
</ul>
</li>
</ul>
<h4 data-id="heading-7">âœ… <code>RunnableWithMessageHistory</code></h4>
<ul>
<li>
<p>æ¥æºï¼š<code>@langchain/core/runnables</code></p>
</li>
<li>
<p><strong>è¿™æ˜¯å®ç°è®°å¿†çš„æ ¸å¿ƒæŠ½è±¡ï¼</strong></p>
</li>
<li>
<p>ä½œç”¨ï¼šåŒ…è£…ä¸€ä¸ªæ™®é€šçš„ <code>Runnable</code>ï¼ˆå¦‚ LLM è°ƒç”¨é“¾ï¼‰ï¼Œä½¿å…¶å…·å¤‡è‡ªåŠ¨åŠ è½½å’Œä¿å­˜å¯¹è¯å†å²çš„èƒ½åŠ›ã€‚</p>
</li>
<li>
<p>å·¥ä½œåŸç†ï¼š</p>
<ul>
<li>åœ¨æ¯æ¬¡ <code>.invoke()</code> æ—¶ï¼Œå…ˆä» <code>getMessageHistory</code> è·å–å½“å‰ä¼šè¯çš„å†å²ã€‚</li>
<li>å°†å†å²æ³¨å…¥åˆ°è¾“å…¥ä¸­ï¼ˆé€šè¿‡ <code>historyMessagesKey</code> æŒ‡å®šçš„å­—æ®µï¼‰ã€‚</li>
<li>è°ƒç”¨å†…éƒ¨ <code>runnable</code>ã€‚</li>
<li>å°†ç”¨æˆ·è¾“å…¥å’Œæ¨¡å‹è¾“å‡º<strong>è‡ªåŠ¨è¿½åŠ </strong>åˆ°å†å²è®°å½•ä¸­ã€‚</li>
</ul>
</li>
</ul>
<blockquote>
<p>âš ï¸ æ³¨æ„ï¼š<code>RunnableWithMessageHistory</code> å¹¶ä¸å…³å¿ƒå†å²å¦‚ä½•å­˜å‚¨ï¼ˆå†…å­˜ã€æ•°æ®åº“ã€Redisï¼‰ï¼Œå®ƒåªä¾èµ– <code>getMessageHistory</code> å‡½æ•°è¿”å›ä¸€ä¸ªå®ç°äº† <code>BaseChatMessageHistory</code> æ¥å£çš„å¯¹è±¡ã€‚</p>
</blockquote>
<h4 data-id="heading-8">âœ… <code>InMemoryChatMessageHistory</code></h4>
<ul>
<li>
<p>æ¥æºï¼š<code>@langchain/core/chat_history</code></p>
</li>
<li>
<p>ä½œç”¨ï¼šæœ€ç®€å•çš„å¯¹è¯å†å²å­˜å‚¨å®ç°ï¼Œå°†æ‰€æœ‰æ¶ˆæ¯ä¿å­˜åœ¨ JavaScript å†…å­˜æ•°ç»„ä¸­ã€‚</p>
</li>
<li>
<p>æ¥å£æ–¹æ³•ï¼š</p>
<ul>
<li><code>getMessages()</code>ï¼šè¿”å›å½“å‰æ‰€æœ‰æ¶ˆæ¯ã€‚</li>
<li><code>addMessage(message)</code>ï¼šæ·»åŠ ä¸€æ¡æ–°æ¶ˆæ¯ã€‚</li>
<li><code>clear()</code>ï¼šæ¸…ç©ºå†å²ã€‚</li>
</ul>
</li>
<li>
<p>é€‚ç”¨åœºæ™¯ï¼šå•ä¼šè¯æ¼”ç¤ºã€æµ‹è¯•ã€‚<strong>ä¸é€‚åˆç”Ÿäº§ç¯å¢ƒå¤šç”¨æˆ·åœºæ™¯</strong>ï¼ˆå› ä¸ºæ‰€æœ‰ä¼šè¯å…±äº«åŒä¸€å®ä¾‹ï¼Œä¸”è¿›ç¨‹é‡å¯åä¸¢å¤±ï¼‰ã€‚</p>
</li>
</ul>
<h4 data-id="heading-9">âœ… <code>dotenv/config</code></h4>
<ul>
<li>åŠ è½½ <code>.env</code> æ–‡ä»¶ä¸­çš„ç¯å¢ƒå˜é‡ï¼ˆå¦‚ <code>DEEPSEEK_API_KEY</code>ï¼‰ï¼Œç¡®ä¿æ¨¡å‹è®¤è¯ä¿¡æ¯å®‰å…¨ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-10">ç¬¬äºŒéƒ¨åˆ†ï¼šæ¨¡å‹åˆå§‹åŒ–</h3>
<pre><code class="hljs language-ini" lang="ini">const <span class="hljs-attr">model</span> = new ChatDeepSeek({ model: <span class="hljs-string">'deepseek-chat'</span>, temperature: <span class="hljs-number">0</span>})<span class="hljs-comment">;</span>
</code></pre>
<ul>
<li><code>model: 'deepseek-chat'</code>ï¼šæŒ‡å®šä½¿ç”¨ DeepSeek çš„èŠå¤©ä¸“ç”¨æ¨¡å‹ã€‚</li>
<li><code>temperature: 0</code>ï¼šå…³é—­éšæœºæ€§ï¼Œç¡®ä¿ç›¸åŒè¾“å…¥æ€»æ˜¯äº§ç”Ÿç›¸åŒè¾“å‡ºâ€”â€”è¿™å¯¹éœ€è¦ç²¾ç¡®è®°å¿†çš„åœºæ™¯è‡³å…³é‡è¦ï¼ˆé¿å…å› éšæœºæ€§å¯¼è‡´â€œå¿˜è®°â€ï¼‰ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-11">ç¬¬ä¸‰éƒ¨åˆ†ï¼šæ„å»ºå¸¦è®°å¿†çš„ Prompt æ¨¡æ¿</h3>
<pre><code class="hljs language-css" lang="css">const prompt = ChatPromptTemplate<span class="hljs-selector-class">.fromMessages</span>(<span class="hljs-selector-attr">[  [<span class="hljs-string">'system'</span>, <span class="hljs-string">"ä½ æ˜¯ä¸€ä¸ªæœ‰è®°å¿†çš„åŠ©æ‰‹"</span>]</span>,
  <span class="hljs-selector-attr">[<span class="hljs-string">'placeholder'</span>, <span class="hljs-string">"{history}"</span>]</span>,
  <span class="hljs-selector-attr">[<span class="hljs-string">'human'</span>, <span class="hljs-string">"{input}"</span>]</span>
])
</code></pre>
<p>è¿™æ˜¯æ•´ä¸ªè®°å¿†æœºåˆ¶çš„<strong>æç¤ºå·¥ç¨‹æ ¸å¿ƒ</strong>ã€‚</p>
<h4 data-id="heading-12">æ¶ˆæ¯ç»“æ„è§£æï¼š</h4>
<ol>
<li>
<p><code>['system', "ä½ æ˜¯ä¸€ä¸ªæœ‰è®°å¿†çš„åŠ©æ‰‹"]</code></p>
<ul>
<li>ç³»ç»Ÿæ¶ˆæ¯ï¼Œç”¨äºè®¾å®š AI çš„è§’è‰²å’Œè¡Œä¸ºå‡†åˆ™ã€‚</li>
<li>å‘Šè¯‰æ¨¡å‹ï¼šâ€œä½ æœ‰èƒ½åŠ›è®°ä½ä¹‹å‰çš„å¯¹è¯ï¼Œè¯·åˆ©ç”¨è¿™äº›ä¿¡æ¯ã€‚â€</li>
</ul>
</li>
<li>
<p><code>['placeholder', "{history}"]</code></p>
<ul>
<li>
<p><strong>å…³é”®ï¼</strong> è¿™ä¸æ˜¯ä¸€ä¸ªæ™®é€šå­—ç¬¦ä¸²ï¼Œè€Œæ˜¯ä¸€ä¸ª<strong>å ä½ç¬¦æŒ‡ä»¤</strong>ã€‚</p>
</li>
<li>
<p>LangChain åœ¨æ¸²æŸ“æ­¤æ¨¡æ¿æ—¶ï¼Œä¼šæŸ¥æ‰¾è¾“å…¥å¯¹è±¡ä¸­çš„ <code>history</code> å­—æ®µã€‚</p>
</li>
<li>
<p>å¦‚æœ <code>history</code> æ˜¯ä¸€ä¸ªæ¶ˆæ¯æ•°ç»„ï¼ˆå¦‚ <code>[HumanMessage, AIMessage, ...]</code>ï¼‰ï¼Œå®ƒä¼š<strong>è‡ªåŠ¨å±•å¼€ä¸ºå¤šæ¡ç‹¬ç«‹æ¶ˆæ¯</strong>ï¼Œæ’å…¥åˆ°æ­¤å¤„ã€‚</p>
</li>
<li>
<p>ä¾‹å¦‚ï¼Œè‹¥å†å²ä¸ºï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">[
  <span class="hljs-keyword">new</span> <span class="hljs-built_in">HumanMessage</span>(<span class="hljs-string">"æˆ‘å«Agiao"</span>),
  <span class="hljs-keyword">new</span> <span class="hljs-built_in">AIMessage</span>(<span class="hljs-string">"å¥½çš„ï¼ŒAgiaoï¼"</span>)
]
</code></pre>
<p>åˆ™æœ€ç»ˆ prompt å˜ä¸ºï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-attr">[  SystemMessage(<span class="hljs-string">"ä½ æ˜¯ä¸€ä¸ªæœ‰è®°å¿†çš„åŠ©æ‰‹"</span>),  HumanMessage(<span class="hljs-string">"æˆ‘å«Agiao"</span>),  AIMessage(<span class="hljs-string">"å¥½çš„ï¼ŒAgiaoï¼"</span>),  HumanMessage(<span class="hljs-string">"{input}"</span>)]</span>
</code></pre>
</li>
</ul>
</li>
<li>
<p><code>['human', "{input}"]</code></p>
<ul>
<li>å½“å‰ç”¨æˆ·è¾“å…¥ï¼Œé€šè¿‡å˜é‡ <code>input</code> æ³¨å…¥ã€‚</li>
</ul>
</li>
</ol>
<blockquote>
<p>ğŸ’¡ <strong>ä¸ºä»€ä¹ˆç”¨ <code>placeholder</code> è€Œä¸æ˜¯ç›´æ¥å†™ <code>{history}</code> å­—ç¬¦ä¸²ï¼Ÿ</strong><br/>
å› ä¸º <code>{history}</code> å®é™…ä¸Šæ˜¯ä¸€ä¸ª<strong>æ¶ˆæ¯åˆ—è¡¨</strong>ï¼Œè€Œéçº¯æ–‡æœ¬ã€‚<code>placeholder</code> å‘Šè¯‰ LangChainï¼šâ€œè¿™é‡Œè¦æ’å…¥ä¸€ä¸ªæ¶ˆæ¯åºåˆ—ï¼Œè€Œä¸æ˜¯æ‹¼æ¥å­—ç¬¦ä¸²â€ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-13">ç¬¬å››éƒ¨åˆ†ï¼šæ„å»ºå¯è¿è¡Œé“¾ï¼ˆRunnable Chainï¼‰</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> runnable = prompt
  .<span class="hljs-title function_">pipe</span>(<span class="hljs-function">(<span class="hljs-params">input</span>) =&gt;</span> {
    <span class="hljs-comment">// debug èŠ‚ç‚¹</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"&gt;&gt;&gt; æœ€ç»ˆä¼ ç»™æ¨¡å‹çš„ä¿¡æ¯(Prompt å†…å­˜)"</span>);
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(input)
    <span class="hljs-keyword">return</span> input;
  })
  .<span class="hljs-title function_">pipe</span>(model);
</code></pre>
<p>LangChain çš„æ ¸å¿ƒæ€æƒ³æ˜¯â€œä¸€åˆ‡çš†å¯è¿è¡Œï¼ˆRunnableï¼‰â€ã€‚è¿™é‡Œæˆ‘ä»¬æ„å»ºäº†ä¸€ä¸ªå¤„ç†æµæ°´çº¿ï¼š</p>
<ol>
<li><strong><code>prompt</code></strong>ï¼šé¦–å…ˆåº”ç”¨æç¤ºæ¨¡æ¿ï¼Œå°† <code>{input}</code> å’Œ <code>{history}</code> æ›¿æ¢ä¸ºå®é™…å†…å®¹ï¼Œç”Ÿæˆå®Œæ•´çš„æ¶ˆæ¯åˆ—è¡¨ã€‚</li>
<li><strong>è°ƒè¯•ä¸­é—´ä»¶</strong>ï¼šæ‰“å°æœ€ç»ˆä¼ ç»™æ¨¡å‹çš„æ¶ˆæ¯ç»“æ„ã€‚è¿™å¯¹äºç†è§£è®°å¿†å¦‚ä½•å·¥ä½œè‡³å…³é‡è¦ã€‚</li>
<li><strong><code>model</code></strong>ï¼šå°†æ„é€ å¥½çš„æ¶ˆæ¯åˆ—è¡¨å‘é€ç»™ DeepSeek æ¨¡å‹ã€‚</li>
</ol>
<blockquote>
<p>ğŸ“Œ æ³¨æ„ï¼šæ­¤æ—¶çš„ <code>runnable</code> <strong>ä»ç„¶ä¸å…·å¤‡è®°å¿†èƒ½åŠ›</strong>ï¼å®ƒåªæ˜¯ä¸€ä¸ªâ€œçŸ¥é“å¦‚ä½•ç»„ç»‡æ¶ˆæ¯â€çš„å‡½æ•°ã€‚çœŸæ­£çš„è®°å¿†ç”±å¤–å±‚çš„ <code>RunnableWithMessageHistory</code> æ³¨å…¥ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-14">ç¬¬äº”éƒ¨åˆ†ï¼šåˆ›å»ºå¯¹è¯å†å²å­˜å‚¨</h3>
<pre><code class="hljs language-ini" lang="ini">const <span class="hljs-attr">messageHistory</span> = new InMemoryChatMessageHistory()<span class="hljs-comment">;</span>
</code></pre>
<ul>
<li>åˆ›å»ºä¸€ä¸ªç©ºçš„å†…å­˜å†å²å®¹å™¨ã€‚</li>
<li>æ‰€æœ‰åç»­å¯¹è¯ï¼ˆç”¨æˆ·è¾“å…¥ + AI å›å¤ï¼‰éƒ½å°†è¢«è‡ªåŠ¨è¿½åŠ åˆ°è¿™é‡Œã€‚</li>
<li>ç”±äºæ˜¯å…¨å±€å˜é‡ï¼Œ<strong>æ‰€æœ‰ä½¿ç”¨è¯¥ <code>messageHistory</code> çš„ä¼šè¯å°†å…±äº«åŒä¸€å†å²</strong>ï¼ˆåœ¨å¤šç”¨æˆ·åœºæ™¯ä¸­éœ€æŒ‰ session ID åˆ†ç¦»ï¼‰ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-15">ç¬¬å…­éƒ¨åˆ†ï¼šæ³¨å…¥è®°å¿†èƒ½åŠ› â€”â€” <code>RunnableWithMessageHistory</code></h3>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-keyword">const</span> chain = <span class="hljs-keyword">new</span> RunnableWithMessageHistory({
  runnable,
  getMessageHistory: <span class="hljs-keyword">async</span> () =&gt; messageHistory,
  inputMessagesKey: <span class="hljs-string">'input'</span>,
  historyMessagesKey: <span class="hljs-string">'history'</span>,
});
</code></pre>
<p>è¿™æ˜¯æ•´æ®µä»£ç çš„<strong>çµé­‚æ‰€åœ¨</strong>ã€‚è®©æˆ‘ä»¬é€ä¸ªå‚æ•°è¯¦è§£ï¼š</p>
<h4 data-id="heading-16">ğŸ”¸ <code>runnable</code></h4>
<ul>
<li>è¦åŒ…è£…çš„åŸå§‹å¯è¿è¡Œå¯¹è±¡ï¼ˆå³å‰é¢æ„å»ºçš„ <code>prompt â†’ debug â†’ model</code> é“¾ï¼‰ã€‚</li>
<li><code>RunnableWithMessageHistory</code> ä¼šåœ¨è°ƒç”¨å®ƒä¹‹å‰æ³¨å…¥å†å²ï¼Œåœ¨ä¹‹åä¿å­˜æ–°æ¶ˆæ¯ã€‚</li>
</ul>
<h4 data-id="heading-17">ğŸ”¸ <code>getMessageHistory: async () =&gt; messageHistory</code></h4>
<ul>
<li>
<p>ä¸€ä¸ªå¼‚æ­¥å‡½æ•°ï¼Œè¿”å›å½“å‰ä¼šè¯å¯¹åº”çš„ <code>BaseChatMessageHistory</code> å®ä¾‹ã€‚</p>
</li>
<li>
<p>åœ¨æœ¬ä¾‹ä¸­ï¼Œæˆ‘ä»¬ç›´æ¥è¿”å›å…¨å±€çš„ <code>messageHistory</code>ã€‚</p>
</li>
<li>
<p><strong>åœ¨çœŸå®åº”ç”¨ä¸­ï¼Œè¿™é‡Œé€šå¸¸ä¼šæ ¹æ® <code>sessionId</code> ä»æ•°æ®åº“æˆ–ç¼“å­˜ä¸­åŠ è½½å¯¹åº”çš„å†å²</strong>ã€‚ä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-vbnet" lang="vbnet"><span class="hljs-symbol">getMessageHistory:</span> <span class="hljs-keyword">async</span> (sessionId) =&gt; {
  <span class="hljs-keyword">return</span> <span class="hljs-built_in">new</span> RedisChatMessageHistory(sessionId, redisClient);
}
</code></pre>
</li>
</ul>
<h4 data-id="heading-18">ğŸ”¸ <code>inputMessagesKey: 'input'</code></h4>
<ul>
<li>æŒ‡å®šç”¨æˆ·å½“å‰è¾“å…¥åœ¨è°ƒç”¨å‚æ•°ä¸­çš„å­—æ®µåã€‚</li>
<li>å¯¹åº”åç»­çš„ <code>chain.invoke({ input: '...' })</code>ã€‚</li>
<li>LangChain ä¼šä»æ­¤å­—æ®µè¯»å–ç”¨æˆ·æ¶ˆæ¯ï¼Œå¹¶åœ¨è°ƒç”¨å®Œæˆåå°†å…¶å­˜å…¥å†å²ã€‚</li>
</ul>
<h4 data-id="heading-19">ğŸ”¸ <code>historyMessagesKey: 'hitory'</code></h4>
<ul>
<li>æŒ‡å®šå†å²æ¶ˆæ¯åœ¨è¾“å…¥å¯¹è±¡ä¸­çš„å­—æ®µåã€‚</li>
<li>LangChain ä¼šä» <code>getMessageHistory()</code> è·å–å†å²æ¶ˆæ¯ï¼Œå¹¶ä»¥ <code>{ history: [msg1, msg2, ...] }</code> çš„å½¢å¼æ³¨å…¥åˆ° <code>runnable</code> çš„è¾“å…¥ä¸­ã€‚</li>
<li>è¿™ä¸ªå­—æ®µåå¿…é¡»ä¸ <code>ChatPromptTemplate</code> ä¸­çš„å ä½ç¬¦ <code>{history}</code> ä¸€è‡´ï¼</li>
</ul>
<blockquote>
<p>âœ… <strong>å·¥ä½œæµç¨‹æ€»ç»“</strong>ï¼š</p>
<ol>
<li>ç”¨æˆ·è°ƒç”¨ <code>chain.invoke({ input: "..." }, { configurable: { sessionId: "..." } })</code></li>
<li><code>RunnableWithMessageHistory</code> è°ƒç”¨ <code>getMessageHistory(sessionId)</code> è·å–å†å²ã€‚</li>
<li>æ„é€ è¾“å…¥å¯¹è±¡ï¼š<code>{ input: "...", history: [prev messages] }</code></li>
<li>è°ƒç”¨å†…éƒ¨ <code>runnable(input)</code></li>
<li>è·å–æ¨¡å‹å›å¤ã€‚</li>
<li>å°† <code>HumanMessage(input)</code> å’Œ <code>AIMessage(response)</code> <strong>è‡ªåŠ¨è¿½åŠ </strong>åˆ°å†å²ä¸­ã€‚</li>
</ol>
</blockquote>
<hr/>
<h3 data-id="heading-20">ç¬¬ä¸ƒéƒ¨åˆ†ï¼šæ‰§è¡Œå¤šè½®å¯¹è¯</h3>
<pre><code class="hljs language-css" lang="css">const res1 = await chain<span class="hljs-selector-class">.invoke</span>(
  { <span class="hljs-selector-tag">input</span>: <span class="hljs-string">'æˆ‘å«Agiaoï¼Œå–œæ¬¢å–ç™½å…°åœ°'</span> },
  { configurable: { sessionId: <span class="hljs-string">'makefriend'</span> } }
)
console<span class="hljs-selector-class">.log</span>(res1<span class="hljs-selector-class">.content</span>);

const res2 = await chain<span class="hljs-selector-class">.invoke</span>(
  { <span class="hljs-selector-tag">input</span>: <span class="hljs-string">'æˆ‘å«ä»€ä¹ˆåå­—'</span> },
  { configurable: { sessionId: <span class="hljs-string">'makefriend'</span> } }
)
console<span class="hljs-selector-class">.log</span>(res2<span class="hljs-selector-class">.content</span>);
</code></pre>
<h4 data-id="heading-21">ğŸ”¹ ç¬¬ä¸€æ¬¡è°ƒç”¨</h4>
<ul>
<li>
<p>è¾“å…¥ï¼š<code>{ input: 'æˆ‘å«Agiaoï¼Œå–œæ¬¢å–ç™½å…°åœ°' }</code></p>
</li>
<li>
<p>æ­¤æ—¶ <code>messageHistory</code> ä¸ºç©ºï¼Œæ‰€ä»¥ <code>{history}</code> å ä½ç¬¦è¢«æ›¿æ¢ä¸ºç©ºæ•°ç»„ã€‚</p>
</li>
<li>
<p>æœ€ç»ˆ promptï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-attr">[  SystemMessage(<span class="hljs-string">"ä½ æ˜¯ä¸€ä¸ªæœ‰è®°å¿†çš„åŠ©æ‰‹"</span>),  HumanMessage(<span class="hljs-string">"æˆ‘å«Agiaoï¼Œå–œæ¬¢å–ç™½å…°åœ°"</span>)]</span>
</code></pre>
</li>
<li>
<p>æ¨¡å‹å›å¤åï¼Œ<code>messageHistory</code> è‡ªåŠ¨æ›´æ–°ä¸ºï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-attr">[  HumanMessage(<span class="hljs-string">"æˆ‘å«Agiaoï¼Œå–œæ¬¢å–ç™½å…°åœ°"</span>),  AIMessage(<span class="hljs-string">"å¥½çš„ï¼ŒAgiaoï¼ç™½å…°åœ°æ˜¯ç§å¾ˆæ£’çš„é€‰æ‹©ã€‚"</span>)]</span>
</code></pre>
</li>
</ul>
<h4 data-id="heading-22">ğŸ”¹ ç¬¬äºŒæ¬¡è°ƒç”¨</h4>
<ul>
<li>
<p>è¾“å…¥ï¼š<code>{ input: 'æˆ‘å«ä»€ä¹ˆåå­—' }</code></p>
</li>
<li>
<p><code>messageHistory</code> å·²åŒ…å«ä¸¤æ¡æ¶ˆæ¯ã€‚</p>
</li>
<li>
<p>æœ€ç»ˆ promptï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-attr">[  SystemMessage(<span class="hljs-string">"ä½ æ˜¯ä¸€ä¸ªæœ‰è®°å¿†çš„åŠ©æ‰‹"</span>),  HumanMessage(<span class="hljs-string">"æˆ‘å«Agiaoï¼Œå–œæ¬¢å–ç™½å…°åœ°"</span>),  AIMessage(<span class="hljs-string">"å¥½çš„ï¼ŒAgiaoï¼ç™½å…°åœ°æ˜¯ç§å¾ˆæ£’çš„é€‰æ‹©ã€‚"</span>),  HumanMessage(<span class="hljs-string">"æˆ‘å«ä»€ä¹ˆåå­—"</span>)]</span>
</code></pre>
</li>
<li>
<p>æ¨¡å‹çœ‹åˆ°å®Œæ•´ä¸Šä¸‹æ–‡ï¼Œè‡ªç„¶èƒ½å›ç­”ï¼šâ€œä½ å« Agiaoã€‚â€</p>
</li>
</ul>
<blockquote>
<p>ğŸ¯ <strong>å…³é”®ä¼˜åŠ¿</strong>ï¼šå¼€å‘è€…æ— éœ€æ‰‹åŠ¨ç®¡ç†å†å²æ‹¼æ¥ã€æ¶ˆæ¯æ ¼å¼è½¬æ¢ã€å­˜å‚¨é€»è¾‘â€”â€”å…¨éƒ¨ç”± LangChain è‡ªåŠ¨å¤„ç†ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-23">è°ƒè¯•è¾“å‡ºï¼šè§è¯è®°å¿†çš„ä¼ é€’</h2>
<p>ä¸­é—´çš„è°ƒè¯•èŠ‚ç‚¹ä¼šæ‰“å°ï¼š</p>
<p><strong>ç¬¬ä¸€æ¬¡è°ƒç”¨åï¼š</strong></p>
<pre><code class="hljs language-css" lang="css">&gt;&gt;&gt; æœ€ç»ˆä¼ ç»™æ¨¡å‹çš„ä¿¡æ¯(Prompt å†…å­˜)
{
  messages: [
    SystemMessage { <span class="hljs-attribute">content</span>: <span class="hljs-string">"ä½ æ˜¯ä¸€ä¸ªæœ‰è®°å¿†çš„åŠ©æ‰‹"</span> },
    HumanMessage { <span class="hljs-attribute">content</span>: <span class="hljs-string">"æˆ‘å«Agiaoï¼Œå–œæ¬¢å–ç™½å…°åœ°"</span> }
  ]
}
</code></pre>
<p><strong>ç¬¬äºŒæ¬¡è°ƒç”¨åï¼š</strong></p>
<pre><code class="hljs language-css" lang="css">&gt;&gt;&gt; æœ€ç»ˆä¼ ç»™æ¨¡å‹çš„ä¿¡æ¯(Prompt å†…å­˜)
{
  messages: [
    SystemMessage { <span class="hljs-attribute">content</span>: <span class="hljs-string">"ä½ æ˜¯ä¸€ä¸ªæœ‰è®°å¿†çš„åŠ©æ‰‹"</span> },
    HumanMessage { <span class="hljs-attribute">content</span>: <span class="hljs-string">"æˆ‘å«Agiaoï¼Œå–œæ¬¢å–ç™½å…°åœ°"</span> },
    AIMessage { <span class="hljs-attribute">content</span>: <span class="hljs-string">"å¥½çš„ï¼ŒAgiaoï¼ç™½å…°åœ°æ˜¯ç§å¾ˆæ£’çš„é€‰æ‹©ã€‚"</span> },
    HumanMessage { <span class="hljs-attribute">content</span>: <span class="hljs-string">"æˆ‘å«ä»€ä¹ˆåå­—"</span> }
  ]
}
</code></pre>
<p>è¿™æ¸…æ™°å±•ç¤ºäº†<strong>å†å²å¦‚ä½•è¢«é€æ­¥ç´¯ç§¯å¹¶æ³¨å…¥ä¸Šä¸‹æ–‡</strong>ã€‚</p>
<hr/>
<h2 data-id="heading-24">å¯¹æ¯”ï¼šæœ‰è®°å¿† vs æ— è®°å¿†</h2>








































<table><thead><tr><th>ç‰¹æ€§</th><th><code>index.js</code>ï¼ˆæ— è®°å¿†ï¼‰</th><th><code>1.js</code>ï¼ˆæœ‰è®°å¿†ï¼‰</th></tr></thead><tbody><tr><td>çŠ¶æ€ç®¡ç†</td><td>æ— </td><td>è‡ªåŠ¨ç»´æŠ¤å¯¹è¯å†å²</td></tr><tr><td>ä¸Šä¸‹æ–‡ä¼ é€’</td><td>æ‰‹åŠ¨æ‹¼æ¥ï¼ˆæœªå®ç°ï¼‰</td><td>è‡ªåŠ¨æ³¨å…¥ <code>{history}</code></td></tr><tr><td>å¤šè½®è¿è´¯æ€§</td><td>âŒ ä¸æ”¯æŒ</td><td>âœ… å®Œç¾æ”¯æŒ</td></tr><tr><td>Token æ•ˆç‡</td><td>æ¯æ¬¡ç‹¬ç«‹ï¼Œæ— å†—ä½™</td><td>å†å²éšå¯¹è¯å¢é•¿ï¼Œéœ€æ³¨æ„é•¿åº¦</td></tr><tr><td>æ‰©å±•æ€§</td><td>éš¾ä»¥æ‰©å±•</td><td>æ˜“æ›¿æ¢å­˜å‚¨åç«¯ï¼ˆRedis/DBï¼‰</td></tr><tr><td>ä»£ç å¤æ‚åº¦</td><td>ç®€å•ä½†åŠŸèƒ½æœ‰é™</td><td>ç¨å¤æ‚ä½†åŠŸèƒ½å¼ºå¤§</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-25">æ½œåœ¨æŒ‘æˆ˜ä¸ä¼˜åŒ–æ–¹å‘</h2>
<p>è™½ç„¶ <code>1.js</code> å±•ç¤ºäº†è®°å¿†çš„åŸºæœ¬å®ç°ï¼Œä½†åœ¨ç”Ÿäº§ç¯å¢ƒä¸­è¿˜éœ€è€ƒè™‘ï¼š</p>
<h3 data-id="heading-26">1. <strong>Token é•¿åº¦é™åˆ¶</strong></h3>
<ul>
<li>
<p>å¯¹è¯å†å²ä¸æ–­å¢é•¿ï¼Œå¯èƒ½è¶…å‡ºæ¨¡å‹ä¸Šä¸‹æ–‡çª—å£ï¼ˆå¦‚ 32768 tokensï¼‰ã€‚</p>
</li>
<li>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<ul>
<li>ä½¿ç”¨ <code>WindowChatMessageHistory</code> ä»…ä¿ç•™æœ€è¿‘ N æ¡æ¶ˆæ¯ã€‚</li>
<li>å®ç°æ‘˜è¦æœºåˆ¶ï¼šå®šæœŸå°†å†å²å‹ç¼©ä¸ºæ‘˜è¦ï¼Œå¹¶ä½œä¸ºç³»ç»Ÿæ¶ˆæ¯æ³¨å…¥ã€‚</li>
</ul>
</li>
</ul>
<h3 data-id="heading-27">2. <strong>å¤šç”¨æˆ·ä¼šè¯éš”ç¦»</strong></h3>
<ul>
<li>
<p>å½“å‰ <code>messageHistory</code> æ˜¯å…¨å±€å•ä¾‹ï¼Œæ‰€æœ‰ç”¨æˆ·å…±äº«ã€‚</p>
</li>
<li>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<ul>
<li>åœ¨ <code>getMessageHistory</code> ä¸­æ ¹æ® <code>sessionId</code> è¿”å›ä¸åŒå†å²å®ä¾‹ã€‚</li>
<li>ä½¿ç”¨ <code>RedisChatMessageHistory</code> æˆ–æ•°æ®åº“æŒ‰ session å­˜å‚¨ã€‚</li>
</ul>
</li>
</ul>
<h3 data-id="heading-28">3. <strong>æŒä¹…åŒ–</strong></h3>
<ul>
<li>å†…å­˜å­˜å‚¨åœ¨æœåŠ¡é‡å¯åä¸¢å¤±ã€‚</li>
<li><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼šé›†æˆæŒä¹…åŒ–å­˜å‚¨ï¼ˆå¦‚ PostgreSQLã€MongoDBï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-29">4. <strong>é•¿æœŸè®°å¿†ï¼ˆLong-term Memoryï¼‰</strong></h3>
<ul>
<li>å¯¹è¯å†å²å±äºçŸ­æœŸè®°å¿†ã€‚</li>
<li><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼šç»“åˆå‘é‡æ•°æ®åº“ï¼ˆå¦‚ Pineconeï¼‰å®ç°åŸºäºæ£€ç´¢çš„é•¿æœŸè®°å¿†ï¼ˆRAG + Memoryï¼‰ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-30">ç»“è¯­ï¼šè®°å¿†ï¼Œæ˜¯æ™ºèƒ½çš„åŸºçŸ³</h2>
<p>é€šè¿‡ <code>1.js</code>ï¼Œæˆ‘ä»¬ä¸ä»…å­¦ä¼šäº†å¦‚ä½•ç”¨ LangChain å®ç° LLM çš„è®°å¿†ï¼Œæ›´ç†è§£äº†å…¶èƒŒåçš„è®¾è®¡å“²å­¦ï¼š<strong>å°†çŠ¶æ€ç®¡ç†ä¸æ ¸å¿ƒé€»è¾‘è§£è€¦ï¼Œé€šè¿‡ç»„åˆå¼ API æ„å»ºå¯æ‰©å±•çš„æ™ºèƒ½åº”ç”¨</strong>ã€‚</p>
<blockquote>
<p>è®°å¿†ä¸æ˜¯é­”æ³•ï¼Œè€Œæ˜¯ä¸€ç³»åˆ—ç²¾å¿ƒè®¾è®¡çš„æ•°æ®æµï¼š<br/>
ç”¨æˆ·è¾“å…¥ â†’ åŠ è½½å†å² â†’ æ³¨å…¥ä¸Šä¸‹æ–‡ â†’ è°ƒç”¨æ¨¡å‹ â†’ ä¿å­˜æ–°çŠ¶æ€ã€‚</p>
</blockquote>
<p>å½“ä½ ä¸‹æ¬¡å¯¹ AI è¯´â€œè¿˜è®°å¾—æˆ‘å—ï¼Ÿâ€ï¼Œå¸Œæœ›å®ƒèƒ½å¾®ç¬‘ç€å›ç­”ï¼šâ€œå½“ç„¶ï¼ŒAgiaoã€‚ä½ ä¸Šæ¬¡è¯´å–œæ¬¢ç™½å…°åœ°ï¼Œè¦ä¸è¦å†æ¥ä¸€æ¯ï¼Ÿâ€</p>
<p>ğŸ¥‚ <strong>Cheers to intelligent conversations with memory!</strong></p>
<hr/>
<blockquote>
<p><strong>é™„ï¼šå®Œæ•´ä»£ç é“¾æ¥ï¼š</strong> <a href="https://link.juejin.cn?target=https%3A%2F%2Fgitee.com%2FgiaoZou%2Flesson_zp%2Ftree%2Fmaster%2Fai%2Flangchain%2Fmemory%2Fdemo" title="https://gitee.com/giaoZou/lesson_zp/tree/master/ai/langchain/memory/demo" target="_blank" ref="nofollow noopener noreferrer">lesson_zp/ai/langchain/memory/demo: AI + å…¨æ ˆå­¦ä¹ ä»“åº“</a></p>
<p>åœ¨è¯¥é¡¹ç›®æ ¹ç›®å½•ä¸­éœ€æ·»åŠ Â  .envÂ  æ–‡ä»¶ï¼Œæ–‡ä»¶ä¸­æ·»åŠ DeepSeekå¤§æ¨¡å‹çš„API_KEY</p>
<p>ä¾‹å¦‚ï¼š</p>
<p>DEEPSEEK_API_KEY=sk-XXXXXXXXXXXXXXXXXXXXXXXXXXXXX</p>
<p>API_KEYè·å–åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fplatform.deepseek.com%2Fusage" title="https://platform.deepseek.com/usage" target="_blank" ref="nofollow noopener noreferrer">DeepSeek å¼€æ”¾å¹³å°</a></p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[TailwindCSSï¼šä»â€œæ ·å¼æ°‘å·¥â€åˆ°â€œUIä¹é«˜å¤§å¸ˆâ€çš„é€†è¢­]]></title>    <link>https://juejin.cn/post/7588061231589326889</link>    <guid>https://juejin.cn/post/7588061231589326889</guid>    <pubDate>2025-12-27T01:49:28.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588061231589326889" data-draft-id="7587995707166310419" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="TailwindCSSï¼šä»â€œæ ·å¼æ°‘å·¥â€åˆ°â€œUIä¹é«˜å¤§å¸ˆâ€çš„é€†è¢­"/> <meta itemprop="keywords" content="å‰ç«¯,é¢è¯•,ç¼–ç¨‹è¯­è¨€"/> <meta itemprop="datePublished" content="2025-12-27T01:49:28.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="xiaoxue_"/> <meta itemprop="url" content="https://juejin.cn/user/4065372122398027"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            TailwindCSSï¼šä»â€œæ ·å¼æ°‘å·¥â€åˆ°â€œUIä¹é«˜å¤§å¸ˆâ€çš„é€†è¢­
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4065372122398027/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    xiaoxue_
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-27T01:49:28.000Z" title="Sat Dec 27 2025 01:49:28 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ç©è½¬ TailwindCSSï¼šä» "æ ·å¼æ··ä¹±" åˆ° "ä¸æ»‘å¼€å‘" çš„é€†è¢­ä¹‹è·¯ ğŸš€</h2>
<p>å“ˆå–½ï¼Œå‰ç«¯åœˆçš„å°ä¼™ä¼´ä»¬ï½ ä»Šå¤©å’±ä»¬æ¥èŠèŠä¸€ä¸ªè®©æ ·å¼å¼€å‘æ•ˆç‡é£™å‡çš„ç¥å™¨ â€”â€”TailwindCSSã€‚æå‰è¯´ä¸€å¥ï¼Œæœ¬æ–‡ä¼šç»“åˆ React æ¥è®²ï¼Œè¦æ˜¯ä½ è¿˜æ²¡å­¦ä¹ è¿‡ React ï¼Œç¿»ç¿»æˆ‘å‰é¢çš„æ–‡ç« è¡¥è¡¥è¯¾å“¦ï¼Œä¿è¯ä¸€çœ‹å°±ä¼šï¼</p>
<h3 data-id="heading-1">ä¸€ã€ä¼ ç»Ÿ CSSï¼šé‚£äº›å¹´æˆ‘ä»¬è¸©è¿‡çš„ "æ ·å¼å‘" ğŸ•³ï¸</h3>
<p>å…ˆæ¥çœ‹æ®µ "è€ƒå¤çº§"CSS ä»£ç ï¼Œçœ¼ç†Ÿä¸ï¼ŸğŸ‘‡</p>
<p>html</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
  <span class="hljs-selector-class">.primary-btn</span> {
    <span class="hljs-attribute">padding</span>:<span class="hljs-number">8px</span> <span class="hljs-number">16px</span>;
    <span class="hljs-attribute">background-color</span>: blue;
    <span class="hljs-attribute">color</span>:white;
    <span class="hljs-attribute">border-radius</span>:<span class="hljs-number">6px</span>;
  }
  <span class="hljs-selector-class">.default-btn</span> {
    <span class="hljs-attribute">padding</span>:<span class="hljs-number">8px</span> <span class="hljs-number">16px</span>;
    <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#ccc</span>;
    <span class="hljs-attribute">color</span>:<span class="hljs-number">#000</span>;
    <span class="hljs-attribute">border-radius</span>:<span class="hljs-number">6px</span>;
  }
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"primary-btn"</span>&gt;</span>æäº¤<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"default-btn"</span>&gt;</span>é»˜è®¤<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
</code></pre>
<p>ç›¯ç€è¿™æ®µä»£ç  3 ç§’é’Ÿï¼Œæ˜¯ä¸æ˜¯å‘ç°äº†ä»€ä¹ˆï¼Ÿpadding å’Œ border-radius è¿™ä¿©å…„å¼Ÿåœ¨ä¸¤ä¸ªç±»é‡Œé‡å¤å‡ºç°äº†ï¼å°±åƒä½ ç‚¹å¥¶èŒ¶æ—¶ï¼Œæ¯æ¬¡éƒ½è¦é‡å¤è¯´ "å°‘å†°ã€ä¸‰åˆ†ç³–"ï¼Œå¤šè´¹åŠ²å•ŠğŸ˜¤ã€‚ä¼ ç»Ÿ CSS çš„é—®é¢˜å°±åœ¨äºï¼šä¸€ä¸ªç±»åæ‰¿åŒ…äº†æ‰€æœ‰æ ·å¼ï¼Œä¸šåŠ¡å±æ€§å’Œæ ·å¼è§„åˆ™æ··åœ¨ä¸€èµ·ï¼Œæƒ³å¤ç”¨ï¼Ÿéš¾ï¼æ”¹ä¸€å¤„æ ·å¼ï¼Ÿå¯èƒ½è¦æ”¹ N ä¸ªç±»åï¼Œç®€ç›´æ˜¯å‰ç«¯å¼€å‘çš„ "è„±å‘å…ƒå‡¶" ä¹‹ä¸€ã€‚</p>
<h3 data-id="heading-2">äºŒã€å°è£…åŸºç±» + ç»„åˆå˜ä½“ï¼šç»™ CSS æ¥ä¸ª "ä»£ç ç˜¦èº«" ğŸœ</h3>
<p>é‚£æ€ä¹ˆæ‹¯æ•‘è¿™äº›é‡å¤çš„ä»£ç å‘¢ï¼Ÿç­”æ¡ˆå°±æ˜¯ï¼šç»™ CSS åš "å°è£…æ‰‹æœ¯"ï¼å’±ä»¬å¯ä»¥æŠŠé‡å¤çš„æ ·å¼æŠ½æˆåŸºç±»ï¼Œå†ç”¨å˜ä½“ç±»æ¥å®ç°ä¸åŒæ•ˆæœï¼Œå°±åƒæ­ç§¯æœ¨ä¸€æ ·çµæ´»ï½</p>
<p>è¿˜æ˜¯æ‹¿æŒ‰é’®ä¸¾ä¾‹ï¼Œçœ‹è¿™æ®µä¼˜åŒ–åçš„ä»£ç ï¼š</p>
<p>html</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
  <span class="hljs-selector-class">.btn</span> { <span class="hljs-comment">/* åŸºç±»ï¼šæå–å…¬å…±æ ·å¼ */</span>
    <span class="hljs-attribute">padding</span>:<span class="hljs-number">8px</span> <span class="hljs-number">16px</span>;
    <span class="hljs-attribute">border-radius</span>:<span class="hljs-number">6px</span>;
    <span class="hljs-attribute">cursor</span>:pointer;
  }
  <span class="hljs-selector-class">.btn-primary</span> { <span class="hljs-comment">/* å˜ä½“ï¼šä¸ªæ€§åŒ–æ ·å¼ */</span>
    <span class="hljs-attribute">background</span>: blue;
    <span class="hljs-attribute">color</span>:white;
  }
  <span class="hljs-selector-class">.btn-default</span> { <span class="hljs-comment">/* å˜ä½“ï¼šä¸ªæ€§åŒ–æ ·å¼ */</span>
    <span class="hljs-attribute">background</span>: <span class="hljs-number">#ccc</span>;
    <span class="hljs-attribute">color</span>:<span class="hljs-number">#000</span>;
  }
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-primary"</span>&gt;</span>æäº¤<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>é»˜è®¤<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
</code></pre>
<p><strong>ä»£ç æ•ˆæœï¼ˆä¸ä¸Šæ–‡ä¼ ç»Ÿcss ä¸¾ä¾‹ä»£ç å®ç°çš„æ•ˆæœä¸€æ ·ï¼‰ï¼š</strong></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/10fc5f3cf92a40e1af63963b9b46de41~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeGlhb3h1ZV8=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767404986&amp;x-signature=XcF3GQzruS3TpzJJyBO9AMJ5D%2Bw%3D" alt="QQ20251226-235034.png" loading="lazy"/></p>
<p>ç§è§æ²¡ï¼Ÿ.btn å°±åƒä¸ª "æ ·å¼åœ°åŸº"ï¼Œä¸ç®¡æ˜¯ primary è¿˜æ˜¯ default æŒ‰é’®ï¼Œéƒ½èƒ½å…±ç”¨å®ƒçš„ padding å’Œåœ†è§’ã€‚è¿™ç§ "åŸºç±» + å˜ä½“" çš„æ€è·¯ï¼Œå…¶å®å°±æ˜¯é¢å‘å¯¹è±¡ CSS çš„ç²¾é«“ï½ ä½†è¿™è¿˜ä¸å¤Ÿæè‡´ï¼å¦‚æœæˆ‘æƒ³è¦ "margin-left: 2px"ã€"font-size: 14px" è¿™ç§æ›´ç»†ç²’åº¦çš„æ ·å¼å¤ç”¨ï¼Œè¯¥æ€ä¹ˆåŠï¼Ÿè¿™æ—¶ï¼ŒTailwindCSS å°±è¯¥ç™»åœºäº†ï¼</p>
<h3 data-id="heading-3">ä¸‰ã€åŸå­ CSS TailwindCSSï¼šæ ·å¼ç•Œçš„ "ä¹é«˜ç§¯æœ¨" ğŸ§©</h3>
<h4 data-id="heading-4">1.ä»€ä¹ˆæ˜¯ TailwindCSSï¼Ÿ</h4>
<p>ç®€å•è¯´ï¼ŒTailwindCSS æ˜¯ä¸€ä¸ª "åŸå­ CSS æ¡†æ¶"ã€‚å•¥å«åŸå­ CSSï¼Ÿå°±æ˜¯æŠŠ CSS è§„åˆ™æ‹†æˆæ— æ•°ä¸ªæœ€å°å•ä½çš„ "åŸå­ç±»"ï¼Œæ¯”å¦‚ "padding: 4px" å¯¹åº” p-1ï¼Œ"background: blue" å¯¹åº” bg-blue-600ã€‚è¿™äº›åŸå­ç±»å°±åƒä¹é«˜ç§¯æœ¨ï¼Œéšä¾¿æ‹¼å°±èƒ½æ­å‡ºå„ç§æ ·å¼ï½</p>
<h4 data-id="heading-5">2.è§£å†³äº†å•¥é—®é¢˜ï¼Ÿä¼˜ç‚¹å¤šåˆ°æ•°ä¸æ¸…ï¼</h4>
<ul>
<li>ä¸ç”¨å†æƒ³ç±»åäº†ï¼å†ä¹Ÿä¸ä¼šä¸º "è¿™ä¸ª div å« container è¿˜æ˜¯ wrapper" æŠ“å¤´å‘ğŸ¤¯</li>
<li>ä¸ç”¨åˆ‡æ¢æ–‡ä»¶å†™ CSSï¼ç›´æ¥åœ¨ HTML/JSX é‡Œå†™æ ·å¼ï¼Œæ•ˆç‡æ‹‰æ»¡</li>
<li>æ ·å¼å¤ç”¨ç‡ MAXï¼ä¸€å¥—åŸå­ç±»èµ°å¤©ä¸‹ï¼Œå†ä¹Ÿä¸ç”¨å¤åˆ¶ç²˜è´´é‡å¤æ ·å¼</li>
<li>å“åº”å¼è®¾è®¡è¶…ç®€å•ï¼è‡ªå¸¦å„ç§å±å¹•å°ºå¯¸çš„å‰ç¼€ï¼Œé€‚é…ç§»åŠ¨ç«¯ so easy</li>
</ul>
<h4 data-id="heading-6">3.å’Œ LLM æ˜¯ "æœ€ä½³æ‹æ¡£"ï¼Ÿ</h4>
<p>TailwindCSS é€šè¿‡é¢„å®šä¹‰çš„åŸå­åŒ–ç±»åè®©å¼€å‘è€…æ— éœ€æ‰‹å†™åŸç”Ÿ CSSï¼Œä½†æ‹¼æ¥å¤§é‡ç±»åä»æœ‰æˆæœ¬ï¼›AI åˆ™èƒ½ä» â€œè‡ªç„¶è¯­è¨€æè¿°â†’ä»£ç ç”Ÿæˆâ†’ä¼˜åŒ–è°ƒè¯•â€ å…¨æµç¨‹æå‡ Tailwind å¼€å‘æ•ˆç‡ï¼ŒäºŒè€…ç»“åˆçš„æ ¸å¿ƒåº”ç”¨å¦‚ä¸‹ï¼š</p>
<h5 data-id="heading-7">ï¼ˆ1ï¼‰é€šç”¨ AI åŠ©æ‰‹ï¼ˆChatGPT/Gemini/ æ–‡å¿ƒä¸€è¨€ï¼‰</h5>
<p>è¿™æ˜¯æœ€æ˜“è·å–çš„å·¥å…·ï¼Œåªéœ€ç”¨è‡ªç„¶è¯­è¨€æè¿°ç•Œé¢éœ€æ±‚ï¼Œå°±èƒ½ç›´æ¥ç”Ÿæˆå¯è¿è¡Œçš„ Tailwind ä»£ç ã€‚<strong>ç¤ºä¾‹æç¤ºè¯</strong>ï¼š</p>
<blockquote>
<p>å¸®æˆ‘ç”¨ TailwindCSS v3 å†™ä¸€ä¸ªç§»åŠ¨ç«¯é€‚é…çš„å•†å“å¡ç‰‡ï¼Œå®½åº¦ 100%ï¼ˆæœ€å¤§ 300pxï¼‰ï¼Œåœ†è§’ 12pxï¼ŒåŒ…å«å•†å“å›¾ç‰‡ï¼ˆ16:9 æ¯”ä¾‹ï¼‰ã€æ ‡é¢˜ï¼ˆæœ€å¤š 2 è¡Œï¼‰ã€ä»·æ ¼ï¼ˆçº¢è‰²åŠ ç²—ï¼‰å’ŒåŠ å…¥è´­ç‰©è½¦æŒ‰é’®ï¼Œè½»å¾®é˜´å½±ã€‚</p>
</blockquote>
<p><strong>AI ç”Ÿæˆçš„å¯ç›´æ¥è¿è¡Œçš„ä»£ç </strong>ï¼š</p>
<p>html</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"zh-CN"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>å•†å“å¡ç‰‡<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- å¼•å…¥TailwindCSS CDN --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://cdn.tailwindcss.com"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"bg-gray-50 p-4"</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- å•†å“å¡ç‰‡ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"w-full max-w-[300px] bg-white rounded-3xl shadow-sm overflow-hidden"</span>&gt;</span>
        <span class="hljs-comment">&lt;!-- å•†å“å›¾ç‰‡ --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"aspect-[16/9] bg-gray-200 overflow-hidden"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://picsum.photos/300/169"</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">"å•†å“å›¾ç‰‡"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"w-full h-full object-cover hover:scale-105 transition-transform duration-300"</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-comment">&lt;!-- å•†å“ä¿¡æ¯ --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"p-4"</span>&gt;</span>
            <span class="hljs-comment">&lt;!-- å•†å“æ ‡é¢˜ï¼ˆæœ€å¤š2è¡Œï¼‰ --&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">h3</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"text-gray-800 font-medium mb-2 line-clamp-2"</span>&gt;</span>æ–°æ¬¾å¤å­£çº¯æ£‰Tæ¤ å®½æ¾é€æ°”ç™¾æ­ä¼‘é—²ä¸Šè¡£<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
            <span class="hljs-comment">&lt;!-- å•†å“ä»·æ ¼ --&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"text-red-600 font-bold text-xl mb-3"</span>&gt;</span>Â¥99.9<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
            <span class="hljs-comment">&lt;!-- åŠ å…¥è´­ç‰©è½¦æŒ‰é’® --&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"w-full bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700 transition-colors"</span>&gt;</span>
                åŠ å…¥è´­ç‰©è½¦
            <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<p><strong>å®ç°çš„æ•ˆæœï¼š</strong></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0df5f2d220a04cc1b41ee17b5dc2a824~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeGlhb3h1ZV8=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767404986&amp;x-signature=59mJJWJz7%2BZn9wZnHv8Xi2W%2FTJs%3D" alt="QQ20251227-092130.png" loading="lazy"/></p>
<h5 data-id="heading-8">ï¼ˆ2ï¼‰ä¸“é—¨çš„ Tailwind AI å·¥å…·</h5>
<ul>
<li><strong>Tailwind AIï¼ˆå®˜æ–¹ï¼‰</strong> ï¼šé›†æˆåœ¨ Tailwind Playï¼ˆåœ¨çº¿ç¼–è¾‘å™¨ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fplay.tailwindcss.com%2F" target="_blank" title="https://play.tailwindcss.com/" ref="nofollow noopener noreferrer">play.tailwindcss.com/</a>ï¼‰ä¸­ï¼Œå¯å®æ—¶ç”Ÿæˆã€ä¼˜åŒ–æ ·å¼ï¼Œè¿˜èƒ½è§£é‡Šç±»åå«ä¹‰ï¼›</li>
<li><strong>Cursor ç¼–è¾‘å™¨</strong>ï¼šå†…ç½® AI åŠ©æ‰‹ï¼Œæ”¯æŒå°†åŸç”Ÿ CSS ä¸€é”®è½¬æ¢ä¸º Tailwindï¼Œæˆ–ä¿®å¤ Tailwind æ ·å¼å†²çªï¼›</li>
<li><strong>Figma to Tailwind AI</strong>ï¼šFigma æ’ä»¶ï¼Œå¯å°†è®¾è®¡ç¨¿ç›´æ¥è½¬æ¢ä¸º Tailwind ä»£ç ï¼ŒAI è‡ªåŠ¨åŒ¹é…æœ€è´´åˆçš„ç±»åã€‚</li>
</ul>
<h4 data-id="heading-9">4.TailwindCSS é…ç½®ï¼šä¸‰æ­¥æå®šï¼</h4>
<p>åœ¨ React+Vite é¡¹ç›®é‡Œç”¨ Tailwindï¼Ÿè·Ÿç€åšå°±è¡Œï¼š</p>
<ol>
<li>å®‰è£…ä¾èµ–ï¼ˆç»ˆç«¯æ‰§è¡Œï¼‰ï¼š</li>
</ol>
<p>bash</p>
<pre><code class="hljs language-bash" lang="bash">npm install tailwindcss @tailwindcss/vite
</code></pre>
<p>2.  é…ç½® vite.config.jsï¼ˆå¼•å…¥æ’ä»¶ï¼‰ï¼š</p>
<p>javascript</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ¥è‡ªvite.config.js</span>
<span class="hljs-keyword">import</span> { defineConfig } <span class="hljs-keyword">from</span> <span class="hljs-string">'vite'</span> 
<span class="hljs-keyword">import</span> react <span class="hljs-keyword">from</span> <span class="hljs-string">'@vitejs/plugin-react'</span>
<span class="hljs-keyword">import</span> tailwindcss <span class="hljs-keyword">from</span> <span class="hljs-string">'@tailwindcss/vite'</span> <span class="hljs-comment">// å¼•å…¥Tailwindæ’ä»¶</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineConfig</span>({
  <span class="hljs-attr">plugins</span>: [<span class="hljs-title function_">react</span>(), <span class="hljs-title function_">tailwindcss</span>()], <span class="hljs-comment">// æ³¨å†Œæ’ä»¶</span>
})
</code></pre>
<p>3.  é…ç½® index.cssï¼ˆå¯¼å…¥æ ·å¼ï¼‰ï¼š</p>

<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">/* æ¥è‡ªindex.css */</span>
<span class="hljs-keyword">@import</span> <span class="hljs-string">"tailwindcss"</span>; <span class="hljs-comment">/* ä¸€å¥è¯å¼•å…¥æ‰€æœ‰TailwindåŸå­ç±» */</span>
</code></pre>
<p>æå®šï¼ğŸš€</p>
<h3 data-id="heading-10">å››ã€TailwindCSSä¸ React ç»„ä»¶ç»“åˆï¼šå¤©ä½œä¹‹åˆï¼ğŸ’</h3>
<h4 data-id="heading-11">ç›´æ¥åœ¨ className é‡Œ "å †ç§¯æœ¨"</h4>
<p>React ç»„ä»¶é‡Œç”¨ Tailwindï¼Œç®€ç›´æ˜¯è¡Œäº‘æµæ°´ï½ ç›´æ¥åœ¨ className é‡Œå†™åŸå­ç±»å°±è¡Œï¼Œçœ‹ä¾‹å­ï¼š</p>
<p>jsx</p>
<pre><code class="hljs language-ini" lang="ini">&lt;button <span class="hljs-attr">className</span>=<span class="hljs-string">"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700"</span>&gt;
  æäº¤
&lt;/button&gt;
</code></pre>
<p>è§£é‡Šä¸‹è¿™äº› "ç§¯æœ¨"ï¼š</p>
<ul>
<li>px-4ï¼šæ°´å¹³å†…è¾¹è· 4 å•ä½ï¼ˆ1 å•ä½ = 4pxï¼‰</li>
<li>py-2ï¼šå‚ç›´å†…è¾¹è· 2 å•ä½</li>
<li>bg-blue-600ï¼šèƒŒæ™¯è‰²ä¸ºè“è‰²ï¼ˆ600 æ˜¯æ·±æµ…åº¦ï¼‰</li>
<li>text-whiteï¼šæ–‡å­—ç™½è‰²</li>
<li>rounded-mdï¼šä¸­ç­‰åœ†è§’</li>
<li>hover:bg-blue-700ï¼šé¼ æ ‡æ‚¬åœæ—¶èƒŒæ™¯è‰²æ·±ä¸€ç‚¹ï¼ˆä¼ªç±»ç›´æ¥å†™ï¼Œå¤ªæ–¹ä¾¿äº†ï¼ï¼‰</li>
</ul>
<h3 data-id="heading-12">äº”ã€TailwindCSS å®æˆ˜ï¼šä»ä»£ç åˆ°ç•Œé¢çš„é­”æ³• âœ¨</h3>
<h4 data-id="heading-13">1. åŸå­ç±»ç»„åˆå®ç°å¡ç‰‡ UI</h4>
<p>æ¥çœ‹ä¸ª ArticleCard ç»„ä»¶ï¼Œç”¨ Tailwind æ­ä¸ªå¡ç‰‡è¶…ç®€å•ï¼š</p>
<p>jsx</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// App2.jsxçš„å¡ç‰‡ç»„ä»¶</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">ArticleCard</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"p-4 bg-white rounded-xl shadow hover:shadow-lg transition"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h2</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"text-lg font-bold"</span>&gt;</span>Tailwindcss<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"text-gray-500 mt-2"</span>&gt;</span>
        ç”¨utility class å¿«é€Ÿæ„å»ºUI
      <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  )
}
</code></pre>
<p>é€ä¸ªæ‹†è§£ "é­”æ³•å’’è¯­"ï¼š</p>
<ul>
<li>p-4ï¼šå†…è¾¹è· 4 å•ä½ï¼Œè®©å†…å®¹ä¸è´´è¾¹</li>
<li>bg-whiteï¼šç™½è‰²èƒŒæ™¯ï¼Œåƒå¼ å¡ç‰‡çº¸</li>
<li>rounded-xlï¼šè¶…å¤§åœ†è§’ï¼Œé¢œå€¼ up</li>
<li>shadowï¼šåŠ ä¸ªé˜´å½±ï¼Œæœ‰ç«‹ä½“æ„Ÿ</li>
<li>hover:shadow-lgï¼š hover æ—¶é˜´å½±å˜å¤§ï¼Œäº¤äº’æ„Ÿæ‹‰æ»¡</li>
<li>transitionï¼šè¿‡æ¸¡åŠ¨ç”»ï¼Œè®© hover æ•ˆæœæ›´ä¸æ»‘</li>
<li>text-lgï¼šæ–‡å­—å¤§å°ä¸º large</li>
<li>font-boldï¼šå­—ä½“åŠ ç²—</li>
<li>text-gray-500ï¼šæ–‡å­—ç°è‰²ï¼ˆ500 æ˜¯ä¸­æ€§ç°ï¼‰</li>
<li>mt-2ï¼šä¸Šè¾¹è· 2 å•ä½ï¼Œå’Œæ ‡é¢˜éš”å¼€ç‚¹</li>
</ul>
<p>æ•ˆæœå°±æ˜¯ä¸€ä¸ªç®€çº¦åˆå¥½çœ‹çš„å¡ç‰‡ï¼Œhover æ—¶è¿˜æœ‰å¾®å¦™çš„é˜´å½±å˜åŒ–ï¼Œæ˜¯ä¸æ˜¯æ¯”å†™ä¸€å † CSS å¿«å¤šäº†ï¼Ÿ<strong>æ¥çœ‹çœ‹æ•ˆæœå§ï¼š</strong></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/53e3df6217574ddabab8a410d6d636ca~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeGlhb3h1ZV8=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767404986&amp;x-signature=PheHjY02ke6fgOv8b4jSQUkRTb0%3D" alt="QQ20251227-92849.gif" loading="lazy"/></p>
<h4 data-id="heading-14">2. å“åº”å¼å¸ƒå±€ + ä¼ªç±»ï¼šé€‚é…å„ç§è®¾å¤‡ ğŸ“±ğŸ’»</h4>
<p>Tailwind çš„å“åº”å¼è®¾è®¡å ªç§°ä¸€ç»ï¼Œè‡ªå¸¦æ–­ç‚¹å‰ç¼€ï¼ˆsm:ã€md:ã€lg: ç­‰ï¼‰ï¼Œè½»æ¾å®ç° "ç§»åŠ¨ç«¯ - æ¡Œé¢ç«¯" é€‚é…ã€‚</p>
<p>jsx</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// App.jsxçš„å“åº”å¼å¸ƒå±€</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"flex flex-col md:flex-row gap-4"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">main</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"bg-blue-100 p-4 md:w-2/3"</span>&gt;</span>ä¸»å†…å®¹<span class="hljs-tag">&lt;/<span class="hljs-name">main</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">aside</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"bg-green-100 p-4 md:w-1/3"</span>&gt;</span>ä¾§è¾¹æ <span class="hljs-tag">&lt;/<span class="hljs-name">aside</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  )
}
</code></pre>
<p>è¯¦è§£å“åº”å¼é­”æ³•ï¼š</p>
<ul>
<li>flexï¼šå¼€å¯å¼¹æ€§å¸ƒå±€</li>
<li>flex-colï¼šé»˜è®¤å‚ç›´æ’åˆ—ï¼ˆç§»åŠ¨ç«¯å‹å¥½ï¼‰</li>
<li>md:flex-rowï¼šå½“å±å¹•å®½åº¦â‰¥768pxï¼ˆmd æ–­ç‚¹ï¼‰æ—¶ï¼Œæ”¹ä¸ºæ°´å¹³æ’åˆ—ï¼ˆæ¡Œé¢ç«¯å‹å¥½ï¼‰</li>
<li>gap-4ï¼šå­å…ƒç´ ä¹‹é—´çš„é—´è·ä¸º 4 å•ä½</li>
<li>md:w-2/3ï¼šæ¡Œé¢ç«¯æ—¶ä¸»å†…å®¹å  2/3 å®½åº¦</li>
<li>md:w-1/3ï¼šæ¡Œé¢ç«¯æ—¶ä¾§è¾¹æ å  1/3 å®½åº¦</li>
</ul>
<p>åœ¨æ‰‹æœºä¸Šçœ‹æ˜¯ä¸Šä¸‹æ’åˆ—ï¼Œåœ¨ç”µè„‘ä¸Šçœ‹æ˜¯å·¦å³æ’åˆ—ï¼Œå®Œå…¨ä¸ç”¨å†™åª’ä½“æŸ¥è¯¢ï¼ŒTailwind å¸®ä½ æå®šä¸€åˆ‡ï¼</p>
<p><strong>PCç«¯ï¼š</strong></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c220a8ff96074890a3d89cf09f69d15b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeGlhb3h1ZV8=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767404986&amp;x-signature=2dNaImU7waECDF3%2F5etTMHOqe04%3D" alt="QQ20251227-093221.png" loading="lazy"/>
<strong>ç§»åŠ¨ç«¯ï¼š</strong></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/145b2b9ba5ef495dbe09135842df2d1d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeGlhb3h1ZV8=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767404986&amp;x-signature=ExgGeiY731daIhLbDwU2yEildE4%3D" alt="QQ20251227-093236.png" loading="lazy"/></p>
<h3 data-id="heading-15">å…­ã€é¢è¯•å®˜ä¼šé—®ï¼šè¿™äº›è€ƒç‚¹è¦è®°ç‰¢ï¼ğŸ“</h3>
<ol>
<li>ä»€ä¹ˆæ˜¯åŸå­ CSSï¼ŸTailwindCSS çš„æ ¸å¿ƒæ€æƒ³æ˜¯ä»€ä¹ˆï¼Ÿï¼ˆç­”ï¼šå°†æ ·å¼æ‹†åˆ†ä¸ºæœ€å°å•ä½çš„åŸå­ç±»ï¼Œé€šè¿‡ç»„åˆå®ç°å¤æ‚æ ·å¼ï¼‰</li>
<li>Tailwind ç›¸æ¯”ä¼ ç»Ÿ CSS æœ‰ä»€ä¹ˆä¼˜åŠ¿ï¼Ÿï¼ˆç­”ï¼šå‡å°‘é‡å¤ä»£ç ã€ä¸ç”¨æƒ³ç±»åã€å“åº”å¼æ–¹ä¾¿ã€å¼€å‘æ•ˆç‡é«˜ï¼‰</li>
<li>å¦‚ä½•åœ¨ Tailwind ä¸­å®ç°å“åº”å¼å¸ƒå±€é€‚é…ï¼Ÿï¼ˆç­”ï¼šä½¿ç”¨æ–­ç‚¹å‰ç¼€ï¼Œå¦‚ md:ã€lg:ï¼Œé…åˆåŸå­ç±»ï¼‰</li>
</ol>
<h3 data-id="heading-16">ä¸ƒã€ç»“è¯­ï¼šä»æ­¤çˆ±ä¸Šå†™æ ·å¼ï¼ğŸ’–</h3>
<p>ä»¥å‰å†™æ ·å¼ï¼Œæ€»åœ¨ "æƒ³ç±»å - å†™ CSS - è°ƒæ ·å¼" çš„å¾ªç¯é‡ŒæŒ£æ‰ï¼›ç”¨äº† TailwindCSSåï¼Œå°±åƒå¼€äº† "æ ·å¼åŠ é€Ÿå™¨"â€”â€” ä¸ç”¨åˆ‡æ¢æ–‡ä»¶ï¼Œä¸ç”¨è®°å¤æ‚è§„åˆ™ï¼Œå¯¹ç€è®¾è®¡ç¨¿æ‹¼åŸå­ç±»å°±è¡Œï¼Œç”šè‡³ AI éƒ½èƒ½å¸®ä½ å†™å¤§åŠï¼ğŸ‘‹</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Pythonæœºå™¨å­¦ä¹ ä¸‰å¤§ç»å…¸ç®—æ³•ï¼šKNNã€SVMã€æœ´ç´ è´å¶æ–¯]]></title>    <link>https://juejin.cn/post/7587965800273657882</link>    <guid>https://juejin.cn/post/7587965800273657882</guid>    <pubDate>2025-12-27T02:24:33.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587965800273657882" data-draft-id="7587965800273641498" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Pythonæœºå™¨å­¦ä¹ ä¸‰å¤§ç»å…¸ç®—æ³•ï¼šKNNã€SVMã€æœ´ç´ è´å¶æ–¯"/> <meta itemprop="keywords" content="Python"/> <meta itemprop="datePublished" content="2025-12-27T02:24:33.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="AIèƒ½åŠ›æ¢ç´¢"/> <meta itemprop="url" content="https://juejin.cn/user/1549641121016795"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Pythonæœºå™¨å­¦ä¹ ä¸‰å¤§ç»å…¸ç®—æ³•ï¼šKNNã€SVMã€æœ´ç´ è´å¶æ–¯
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1549641121016795/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    AIèƒ½åŠ›æ¢ç´¢
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-27T02:24:33.000Z" title="Sat Dec 27 2025 02:24:33 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    6
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æœºå™¨å­¦ä¹ å…¥é—¨çš„æ ¸å¿ƒæ˜¯æŒæ¡ç»å…¸ç®—æ³•çš„åŸç†ä¸å®æˆ˜ï¼ŒKè¿‘é‚»ï¼ˆKNNï¼‰ã€æ”¯æŒå‘é‡æœºï¼ˆSVMï¼‰ã€æœ´ç´ è´å¶æ–¯ä½œä¸ºåˆ†ç±»ä»»åŠ¡çš„ä¸‰å¤§åŸºç¡€ç®—æ³•ï¼Œè¦†ç›–äº†â€œåŸºäºè·ç¦»â€â€œåŸºäºè¶…å¹³é¢â€â€œåŸºäºæ¦‚ç‡â€ä¸‰ç§æ ¸å¿ƒæ€è·¯ï¼Œæ˜¯å…¥é—¨æœºå™¨å­¦ä¹ çš„å¿…å­¦å†…å®¹ã€‚</p>
<h2 data-id="heading-0">ä¸€ã€æ ¸å¿ƒå‰ç½®çŸ¥è¯†ä¸ç¯å¢ƒå‡†å¤‡</h2>
<h3 data-id="heading-1">1. ç®—æ³•æ ¸å¿ƒå®šä½ï¼ˆå¿«é€Ÿé€‰å¯¹ç®—æ³•ï¼‰</h3>

































<table><thead><tr><th>ç®—æ³•</th><th>æ ¸å¿ƒæ€æƒ³</th><th>ä¼˜åŠ¿</th><th>åŠ£åŠ¿</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>KNNï¼ˆKè¿‘é‚»ï¼‰</td><td>è¿‘æœ±è€…èµ¤ï¼šæŒ‰æœ€è¿‘é‚»æ ·æœ¬åˆ†ç±»</td><td>åŸç†ç®€å•ã€æ— éœ€è®­ç»ƒã€é€‚åˆå¤šåˆ†ç±»</td><td>é«˜ç»´æ•°æ®æ…¢ã€å¯¹å¼‚å¸¸å€¼æ•æ„Ÿ</td><td>å°æ ·æœ¬åˆ†ç±»ã€æ¨èç³»ç»Ÿã€æ•°æ®è¡¥å…¨</td></tr><tr><td>SVMï¼ˆæ”¯æŒå‘é‡æœºï¼‰</td><td>æ‰¾æœ€ä¼˜è¶…å¹³é¢åˆ†éš”æ ·æœ¬</td><td>é«˜ç»´æ•°æ®è¡¨ç°å¥½ã€æ³›åŒ–èƒ½åŠ›å¼º</td><td>å¤§æ ·æœ¬è®­ç»ƒæ…¢ã€å‚æ•°è°ƒä¼˜å¤æ‚</td><td>æ–‡æœ¬åˆ†ç±»ã€å›¾åƒè¯†åˆ«ã€ç‰¹å¾ç»´åº¦é«˜çš„åœºæ™¯</td></tr><tr><td>æœ´ç´ è´å¶æ–¯</td><td>åŸºäºæ¦‚ç‡å…¬å¼ï¼ˆè´å¶æ–¯ï¼‰åˆ†ç±»</td><td>è®­ç»ƒé€Ÿåº¦æå¿«ã€é€‚åˆæ–‡æœ¬æ•°æ®</td><td>å‡è®¾ç‰¹å¾ç‹¬ç«‹ï¼ˆå®é™…éš¾æ»¡è¶³ï¼‰</td><td>åƒåœ¾é‚®ä»¶è¿‡æ»¤ã€æ–‡æœ¬åˆ†ç±»ã€æƒ…æ„Ÿåˆ†æ</td></tr></tbody></table>
<h3 data-id="heading-2">2. ç¯å¢ƒå®‰è£…ï¼ˆScikit-learnæ ¸å¿ƒåº“ï¼‰</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å®‰è£…æ ¸å¿ƒåº“ï¼ˆPython 3.8~3.10ç‰ˆæœ¬æœ€ä½³ï¼‰</span>
pip install scikit-learn numpy pandas matplotlib
</code></pre>
<ul>
<li>Scikit-learnï¼šå°è£…ä¸‰å¤§ç®—æ³•çš„æ ¸å¿ƒAPIï¼Œè°ƒç”¨ç»Ÿä¸€ï¼›</li>
<li>NumPyï¼šå¤„ç†æ•°å€¼è®¡ç®—ï¼Œæ”¯æ’‘ç®—æ³•åº•å±‚ï¼›</li>
<li>Matplotlibï¼šå¯è§†åŒ–æ•°æ®åˆ†å¸ƒå’Œåˆ†ç±»æ•ˆæœã€‚</li>
</ul>
<h3 data-id="heading-3">3. éªŒè¯å®‰è£…</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> sklearn
<span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np
<span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt
<span class="hljs-built_in">print</span>(<span class="hljs-string">"Scikit-learnç‰ˆæœ¬ï¼š"</span>, sklearn.__version__)  <span class="hljs-comment"># è¾“å‡ºâ‰¥1.0.0å³å¯</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"ç¯å¢ƒå‡†å¤‡å®Œæˆï¼"</span>)
</code></pre>
<h2 data-id="heading-4">äºŒã€Kè¿‘é‚»ï¼ˆKNNï¼‰ç®—æ³•ï¼šæœ€ç®€å•çš„â€œé‚»å±…æŠ•ç¥¨â€åˆ†ç±»</h2>
<h3 data-id="heading-5">1. ç®—æ³•åŸç†ï¼ˆé€šä¿—ç†è§£ï¼‰</h3>
<p>KNNçš„æ ¸å¿ƒé€»è¾‘ï¼šâ€œç‰©ä»¥ç±»èšï¼Œäººä»¥ç¾¤åˆ†â€â€”â€”ç»™ä¸€ä¸ªæ–°æ ·æœ¬ï¼Œæ‰¾å®ƒæœ€è¿‘çš„Kä¸ªæ ·æœ¬ï¼ˆé‚»å±…ï¼‰ï¼Œè¿™Kä¸ªé‚»å±…ä¸­å æ¯”æœ€å¤šçš„ç±»åˆ«ï¼Œå°±æ˜¯æ–°æ ·æœ¬çš„ç±»åˆ«ã€‚</p>
<ul>
<li>Kå€¼æ˜¯æ ¸å¿ƒå‚æ•°ï¼šKå¤ªå°æ˜“è¿‡æ‹Ÿåˆï¼ˆå—å¼‚å¸¸å€¼å½±å“ï¼‰ï¼ŒKå¤ªå¤§æ˜“æ¬ æ‹Ÿåˆï¼ˆåˆ†ç±»æ¨¡ç³Šï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-6">2. å®æˆ˜ï¼šé¸¢å°¾èŠ±å“ç§åˆ†ç±»ï¼ˆKNNå®ç°ï¼‰</h3>
<p>ä»¥ç»å…¸çš„é¸¢å°¾èŠ±æ•°æ®é›†ä¸ºä¾‹ï¼Œå®ç°KNNåˆ†ç±»ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># æ­¥éª¤1ï¼šåŠ è½½æ•°æ®é›†å¹¶åˆ’åˆ†è®­ç»ƒé›†/æµ‹è¯•é›†</span>
<span class="hljs-keyword">from</span> sklearn.datasets <span class="hljs-keyword">import</span> load_iris
<span class="hljs-keyword">from</span> sklearn.model_selection <span class="hljs-keyword">import</span> train_test_split

<span class="hljs-comment"># åŠ è½½æ•°æ®ï¼ˆç‰¹å¾ï¼šèŠ±è¼/èŠ±ç“£çš„é•¿å®½ï¼Œæ ‡ç­¾ï¼š3ç±»é¸¢å°¾èŠ±ï¼‰</span>
iris = load_iris()
X = iris.data  <span class="hljs-comment"># ç‰¹å¾çŸ©é˜µ</span>
y = iris.target  <span class="hljs-comment"># æ ‡ç­¾å‘é‡</span>

<span class="hljs-comment"># åˆ’åˆ†æ•°æ®é›†ï¼šè®­ç»ƒé›†70%ï¼Œæµ‹è¯•é›†30%</span>
X_train, X_test, y_train, y_test = train_test_split(
    X, y, test_size=<span class="hljs-number">0.3</span>, random_state=<span class="hljs-number">42</span>  <span class="hljs-comment"># random_stateä¿è¯ç»“æœå¯å¤ç°</span>
)

<span class="hljs-comment"># æ­¥éª¤2ï¼šæ•°æ®æ ‡å‡†åŒ–ï¼ˆKNNåŸºäºè·ç¦»ï¼Œå¿…é¡»æ ‡å‡†åŒ–ï¼‰</span>
<span class="hljs-keyword">from</span> sklearn.preprocessing <span class="hljs-keyword">import</span> StandardScaler
scaler = StandardScaler()
X_train_scaled = scaler.fit_transform(X_train)
X_test_scaled = scaler.transform(X_test)

<span class="hljs-comment"># æ­¥éª¤3ï¼šåˆå§‹åŒ–å¹¶è®­ç»ƒKNNæ¨¡å‹</span>
<span class="hljs-keyword">from</span> sklearn.neighbors <span class="hljs-keyword">import</span> KNeighborsClassifier

<span class="hljs-comment"># åˆå§‹åŒ–æ¨¡å‹ï¼šK=5ï¼ˆå¸¸ç”¨é»˜è®¤å€¼ï¼‰</span>
knn_model = KNeighborsClassifier(n_neighbors=<span class="hljs-number">5</span>)
<span class="hljs-comment"># KNNæ— éœ€â€œè®­ç»ƒâ€ï¼Œä»…å­˜å‚¨è®­ç»ƒé›†æ•°æ®ï¼ˆé¢„æµ‹æ—¶è®¡ç®—è·ç¦»ï¼‰</span>
knn_model.fit(X_train_scaled, y_train)

<span class="hljs-comment"># æ­¥éª¤4ï¼šæ¨¡å‹é¢„æµ‹ä¸è¯„ä¼°</span>
<span class="hljs-keyword">from</span> sklearn.metrics <span class="hljs-keyword">import</span> accuracy_score, classification_report

<span class="hljs-comment"># é¢„æµ‹æµ‹è¯•é›†</span>
y_pred = knn_model.predict(X_test_scaled)
<span class="hljs-comment"># è®¡ç®—å‡†ç¡®ç‡</span>
accuracy = accuracy_score(y_test, y_pred)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"KNNæ¨¡å‹å‡†ç¡®ç‡ï¼š"</span>, accuracy)  <span class="hljs-comment"># é¸¢å°¾èŠ±æ•°æ®é›†ä¸Šâ‰ˆ0.98</span>
<span class="hljs-comment"># è¯¦ç»†åˆ†ç±»æŠ¥å‘Šï¼ˆç²¾ç¡®ç‡ã€å¬å›ç‡ã€F1å€¼ï¼‰</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"\nåˆ†ç±»æŠ¥å‘Šï¼š"</span>)
<span class="hljs-built_in">print</span>(classification_report(y_test, y_pred))

<span class="hljs-comment"># æ­¥éª¤5ï¼šKå€¼è°ƒä¼˜ï¼ˆæ‰¾åˆ°æœ€ä¼˜Kï¼‰</span>
<span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt
plt.rcParams[<span class="hljs-string">"font.sans-serif"</span>] = [<span class="hljs-string">"SimHei"</span>]  <span class="hljs-comment"># ä¸­æ–‡æ˜¾ç¤º</span>

<span class="hljs-comment"># æµ‹è¯•K=1åˆ°20çš„å‡†ç¡®ç‡</span>
k_range = <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, <span class="hljs-number">21</span>)
accuracy_list = []
<span class="hljs-keyword">for</span> k <span class="hljs-keyword">in</span> k_range:
    knn = KNeighborsClassifier(n_neighbors=k)
    knn.fit(X_train_scaled, y_train)
    accuracy_list.append(accuracy_score(y_test, knn.predict(X_test_scaled)))

<span class="hljs-comment"># å¯è§†åŒ–Kå€¼ä¸å‡†ç¡®ç‡å…³ç³»</span>
plt.figure(figsize=(<span class="hljs-number">10</span>, <span class="hljs-number">6</span>))
plt.plot(k_range, accuracy_list, marker=<span class="hljs-string">'o'</span>, color=<span class="hljs-string">'blue'</span>)
plt.xlabel(<span class="hljs-string">'Kå€¼ï¼ˆé‚»å±…æ•°é‡ï¼‰'</span>)
plt.ylabel(<span class="hljs-string">'å‡†ç¡®ç‡'</span>)
plt.title(<span class="hljs-string">'KNNç®—æ³•Kå€¼è°ƒä¼˜'</span>)
plt.grid(linestyle=<span class="hljs-string">'--'</span>, alpha=<span class="hljs-number">0.7</span>)
plt.savefig(<span class="hljs-string">'knn_k_tuning.png'</span>)
plt.close()
</code></pre>
<h3 data-id="heading-7">3. KNNå…³é”®æŠ€å·§</h3>
<ul>
<li><strong>æ ‡å‡†åŒ–å¿…åš</strong>ï¼šç‰¹å¾å•ä½ä¸åŒï¼ˆå¦‚èŠ±è¼é•¿åº¦cmï¼ŒèŠ±ç“£å®½åº¦mmï¼‰ä¼šå¯¼è‡´è·ç¦»è®¡ç®—åå·®ï¼Œå¿…é¡»ç”¨<code>StandardScaler</code>æ ‡å‡†åŒ–ï¼›</li>
<li><strong>Kå€¼é€‰æ‹©</strong>ï¼šé€šè¿‡éå†æµ‹è¯•ï¼ˆå¦‚K=1~20ï¼‰æ‰¾åˆ°å‡†ç¡®ç‡æœ€é«˜çš„Kï¼Œæˆ–ç”¨â€œè‚˜éƒ¨æ³•åˆ™â€ï¼ˆå‡†ç¡®ç‡æå‡æ”¾ç¼“çš„ç‚¹ï¼‰ï¼›</li>
<li><strong>è·ç¦»åº¦é‡</strong>ï¼šé»˜è®¤ç”¨æ¬§æ°è·ç¦»ï¼Œé«˜ç»´æ•°æ®å¯å°è¯•æ›¼å“ˆé¡¿è·ç¦»ï¼ˆ<code>metric='manhattan'</code>ï¼‰ã€‚</li>
</ul>
<h2 data-id="heading-8">ä¸‰ã€æ”¯æŒå‘é‡æœºï¼ˆSVMï¼‰ï¼šæ‰¾â€œæœ€ä¼˜åˆ†éš”çº¿â€çš„åˆ†ç±»å™¨</h2>
<h3 data-id="heading-9">1. ç®—æ³•åŸç†ï¼ˆé€šä¿—ç†è§£ï¼‰</h3>
<p>SVMçš„æ ¸å¿ƒæ˜¯åœ¨ç‰¹å¾ç©ºé—´ä¸­æ‰¾ä¸€æ¡â€œæœ€ä¼˜è¶…å¹³é¢â€ï¼Œå°†ä¸åŒç±»åˆ«çš„æ ·æœ¬åˆ†éš”å¼€ï¼Œä¸”è¶…å¹³é¢åˆ°ä¸¤è¾¹æ ·æœ¬çš„â€œé—´éš”â€æœ€å¤§â€”â€”é—´éš”è¶Šå¤§ï¼Œæ¨¡å‹æ³›åŒ–èƒ½åŠ›è¶Šå¼ºã€‚</p>
<ul>
<li>çº¿æ€§å¯åˆ†ï¼šç›´æ¥æ‰¾çº¿æ€§è¶…å¹³é¢ï¼›</li>
<li>çº¿æ€§ä¸å¯åˆ†ï¼šé€šè¿‡â€œæ ¸å‡½æ•°â€å°†æ•°æ®æ˜ å°„åˆ°é«˜ç»´ç©ºé—´ï¼Œå®ç°çº¿æ€§åˆ†éš”ï¼ˆå¸¸ç”¨æ ¸å‡½æ•°ï¼šé«˜æ–¯æ ¸<code>rbf</code>ã€çº¿æ€§æ ¸<code>linear</code>ï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-10">2. å®æˆ˜ï¼šæ‰‹å†™æ•°å­—åˆ†ç±»ï¼ˆSVMå®ç°ï¼‰</h3>
<p>ä»¥æ‰‹å†™æ•°å­—æ•°æ®é›†ä¸ºä¾‹ï¼Œå®ç°SVMåˆ†ç±»ï¼ˆé€‚åˆé«˜ç»´ç‰¹å¾åœºæ™¯ï¼‰ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># æ­¥éª¤1ï¼šåŠ è½½æ‰‹å†™æ•°å­—æ•°æ®é›†</span>
<span class="hljs-keyword">from</span> sklearn.datasets <span class="hljs-keyword">import</span> load_digits
<span class="hljs-keyword">from</span> sklearn.model_selection <span class="hljs-keyword">import</span> train_test_split

<span class="hljs-comment"># åŠ è½½æ•°æ®ï¼ˆ8x8åƒç´ çš„æ‰‹å†™æ•°å­—ï¼Œå…±10ç±»ï¼‰</span>
digits = load_digits()
X = digits.data  <span class="hljs-comment"># ç‰¹å¾ï¼š64ç»´ï¼ˆ8*8ï¼‰</span>
y = digits.target  <span class="hljs-comment"># æ ‡ç­¾ï¼š0-9</span>

<span class="hljs-comment"># åˆ’åˆ†æ•°æ®é›†</span>
X_train, X_test, y_train, y_test = train_test_split(
    X, y, test_size=<span class="hljs-number">0.3</span>, random_state=<span class="hljs-number">42</span>
)

<span class="hljs-comment"># æ­¥éª¤2ï¼šæ•°æ®æ ‡å‡†åŒ–</span>
<span class="hljs-keyword">from</span> sklearn.preprocessing <span class="hljs-keyword">import</span> StandardScaler
scaler = StandardScaler()
X_train_scaled = scaler.fit_transform(X_train)
X_test_scaled = scaler.transform(X_test)

<span class="hljs-comment"># æ­¥éª¤3ï¼šåˆå§‹åŒ–å¹¶è®­ç»ƒSVMæ¨¡å‹</span>
<span class="hljs-keyword">from</span> sklearn.svm <span class="hljs-keyword">import</span> SVC

<span class="hljs-comment"># åˆå§‹åŒ–æ¨¡å‹ï¼šæ ¸å‡½æ•°rbfï¼ˆå¤„ç†éçº¿æ€§æ•°æ®ï¼‰ï¼ŒC=1.0ï¼ˆæ­£åˆ™åŒ–ç³»æ•°ï¼‰</span>
svm_model = SVC(kernel=<span class="hljs-string">'rbf'</span>, C=<span class="hljs-number">1.0</span>, gamma=<span class="hljs-string">'scale'</span>, random_state=<span class="hljs-number">42</span>)
<span class="hljs-comment"># è®­ç»ƒæ¨¡å‹ï¼ˆSVMè®­ç»ƒè€—æ—¶æ¯”KNNé•¿ï¼Œå°¤å…¶å¤§æ ·æœ¬ï¼‰</span>
svm_model.fit(X_train_scaled, y_train)

<span class="hljs-comment"># æ­¥éª¤4ï¼šæ¨¡å‹è¯„ä¼°</span>
<span class="hljs-keyword">from</span> sklearn.metrics <span class="hljs-keyword">import</span> accuracy_score, confusion_matrix

y_pred = svm_model.predict(X_test_scaled)
accuracy = accuracy_score(y_test, y_pred)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"SVMæ¨¡å‹å‡†ç¡®ç‡ï¼š"</span>, accuracy)  <span class="hljs-comment"># æ‰‹å†™æ•°å­—æ•°æ®é›†ä¸Šâ‰ˆ0.98</span>

<span class="hljs-comment"># æ··æ·†çŸ©é˜µï¼ˆæŸ¥çœ‹æ•°å­—åˆ†ç±»é”™è¯¯æƒ…å†µï¼‰</span>
cm = confusion_matrix(y_test, y_pred)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"\næ··æ·†çŸ©é˜µï¼š"</span>)
<span class="hljs-built_in">print</span>(cm)

<span class="hljs-comment"># æ­¥éª¤5ï¼šSVMå‚æ•°è°ƒä¼˜ï¼ˆç½‘æ ¼æœç´¢æ‰¾æœ€ä¼˜Cå’Œgammaï¼‰</span>
<span class="hljs-keyword">from</span> sklearn.model_selection <span class="hljs-keyword">import</span> GridSearchCV

<span class="hljs-comment"># å®šä¹‰å‚æ•°ç½‘æ ¼</span>
param_grid = {
    <span class="hljs-string">'C'</span>: [<span class="hljs-number">0.1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">10</span>],  <span class="hljs-comment"># æ­£åˆ™åŒ–ç³»æ•°ï¼šè¶Šå¤§å®¹é”™ç‡è¶Šä½</span>
    <span class="hljs-string">'gamma'</span>: [<span class="hljs-string">'scale'</span>, <span class="hljs-string">'auto'</span>, <span class="hljs-number">0.001</span>, <span class="hljs-number">0.01</span>],  <span class="hljs-comment"># æ ¸å‡½æ•°ç³»æ•°</span>
    <span class="hljs-string">'kernel'</span>: [<span class="hljs-string">'rbf'</span>, <span class="hljs-string">'linear'</span>]
}

<span class="hljs-comment"># ç½‘æ ¼æœç´¢ï¼ˆ5æŠ˜äº¤å‰éªŒè¯ï¼‰</span>
grid_search = GridSearchCV(SVC(random_state=<span class="hljs-number">42</span>), param_grid, cv=<span class="hljs-number">5</span>, scoring=<span class="hljs-string">'accuracy'</span>)
grid_search.fit(X_train_scaled, y_train)

<span class="hljs-comment"># è¾“å‡ºæœ€ä¼˜å‚æ•°</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"\nSVMæœ€ä¼˜å‚æ•°ï¼š"</span>, grid_search.best_params_)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"äº¤å‰éªŒè¯æœ€ä¼˜å‡†ç¡®ç‡ï¼š"</span>, grid_search.best_score_)

<span class="hljs-comment"># ç”¨æœ€ä¼˜æ¨¡å‹é¢„æµ‹</span>
best_svm = grid_search.best_estimator_
<span class="hljs-built_in">print</span>(<span class="hljs-string">"æœ€ä¼˜æ¨¡å‹æµ‹è¯•é›†å‡†ç¡®ç‡ï¼š"</span>, accuracy_score(y_test, best_svm.predict(X_test_scaled)))
</code></pre>
<h3 data-id="heading-11">3. SVMå…³é”®æŠ€å·§</h3>
<ul>
<li><strong>æ ¸å‡½æ•°é€‰æ‹©</strong>ï¼šçº¿æ€§æ•°æ®ç”¨<code>linear</code>ï¼ˆé€Ÿåº¦å¿«ï¼‰ï¼Œéçº¿æ€§æ•°æ®ç”¨<code>rbf</code>ï¼ˆæ•ˆæœå¥½ï¼‰ï¼›</li>
<li><strong>å‚æ•°è°ƒä¼˜</strong>ï¼šCï¼ˆæ­£åˆ™åŒ–ï¼‰è¶Šå¤§ï¼Œæ¨¡å‹è¶Šâ€œç¡¬â€ï¼ˆæ˜“è¿‡æ‹Ÿåˆï¼‰ï¼›gammaè¶Šå¤§ï¼Œæ ¸å‡½æ•°å½±å“èŒƒå›´è¶Šå°ï¼ˆæ˜“è¿‡æ‹Ÿåˆï¼‰ï¼›</li>
<li><strong>æ ·æœ¬é‡é™åˆ¶</strong>ï¼šSVMé€‚åˆä¸­å°æ ·æœ¬ï¼ˆä¸‡çº§ä»¥å†…ï¼‰ï¼Œå¤§æ ·æœ¬å»ºè®®ç”¨<code>SGDClassifier</code>ï¼ˆéšæœºæ¢¯åº¦ä¸‹é™ç‰ˆSVMï¼‰ã€‚</li>
</ul>
<h2 data-id="heading-12">å››ã€æœ´ç´ è´å¶æ–¯ï¼šåŸºäºæ¦‚ç‡çš„â€œæ–‡æœ¬åˆ†ç±»ç¥å™¨â€</h2>
<h3 data-id="heading-13">1. ç®—æ³•åŸç†ï¼ˆé€šä¿—ç†è§£ï¼‰</h3>
<p>æœ´ç´ è´å¶æ–¯åŸºäºâ€œè´å¶æ–¯å…¬å¼â€ï¼Œæ ¸å¿ƒå‡è®¾æ˜¯â€œç‰¹å¾ä¹‹é—´ç›¸äº’ç‹¬ç«‹â€ï¼ˆæœ´ç´ æ€§ï¼‰ï¼Œé€šè¿‡è®¡ç®—æ ·æœ¬å±äºæ¯ä¸ªç±»åˆ«çš„æ¦‚ç‡ï¼Œé€‰æ‹©æ¦‚ç‡æœ€å¤§çš„ç±»åˆ«ä½œä¸ºé¢„æµ‹ç»“æœã€‚</p>
<ul>
<li>æ–‡æœ¬åˆ†ç±»ä¸­ï¼Œç‰¹å¾æ˜¯â€œå•è¯å‡ºç°æ¬¡æ•°â€ï¼Œé€šè¿‡è¯é¢‘è®¡ç®—æ¦‚ç‡ï¼Œé€Ÿåº¦æå¿«ã€‚</li>
</ul>
<h3 data-id="heading-14">2. å®æˆ˜ï¼šåƒåœ¾é‚®ä»¶åˆ†ç±»ï¼ˆæœ´ç´ è´å¶æ–¯å®ç°ï¼‰</h3>
<p>ä»¥ç»å…¸çš„20NewsGroupsæ–‡æœ¬æ•°æ®é›†ä¸ºä¾‹ï¼Œå®ç°æœ´ç´ è´å¶æ–¯æ–‡æœ¬åˆ†ç±»ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># æ­¥éª¤1ï¼šåŠ è½½æ–‡æœ¬æ•°æ®é›†å¹¶é¢„å¤„ç†</span>
<span class="hljs-keyword">from</span> sklearn.datasets <span class="hljs-keyword">import</span> fetch_20newsgroups
<span class="hljs-keyword">from</span> sklearn.feature_extraction.text <span class="hljs-keyword">import</span> TfidfVectorizer

<span class="hljs-comment"># åŠ è½½æ•°æ®é›†ï¼ˆä»…é€‰4ä¸ªç±»åˆ«ï¼Œç®€åŒ–ä»»åŠ¡ï¼‰</span>
categories = [<span class="hljs-string">'alt.atheism'</span>, <span class="hljs-string">'soc.religion.christian'</span>, <span class="hljs-string">'comp.graphics'</span>, <span class="hljs-string">'sci.med'</span>]
<span class="hljs-comment"># åŠ è½½è®­ç»ƒé›†å’Œæµ‹è¯•é›†</span>
train_data = fetch_20newsgroups(subset=<span class="hljs-string">'train'</span>, categories=categories, shuffle=<span class="hljs-literal">True</span>, random_state=<span class="hljs-number">42</span>)
test_data = fetch_20newsgroups(subset=<span class="hljs-string">'test'</span>, categories=categories, shuffle=<span class="hljs-literal">True</span>, random_state=<span class="hljs-number">42</span>)

<span class="hljs-comment"># æ–‡æœ¬ç‰¹å¾æå–ï¼šTF-IDFï¼ˆå°†æ–‡æœ¬è½¬ä¸ºæ•°å€¼ç‰¹å¾ï¼‰</span>
tfidf = TfidfVectorizer(stop_words=<span class="hljs-string">'english'</span>)  <span class="hljs-comment"># å»é™¤è‹±æ–‡åœç”¨è¯ï¼ˆthe/a/anç­‰ï¼‰</span>
X_train = tfidf.fit_transform(train_data.data)
X_test = tfidf.transform(test_data.data)
y_train = train_data.target
y_test = test_data.target

<span class="hljs-comment"># æ­¥éª¤2ï¼šåˆå§‹åŒ–å¹¶è®­ç»ƒæœ´ç´ è´å¶æ–¯æ¨¡å‹</span>
<span class="hljs-keyword">from</span> sklearn.naive_bayes <span class="hljs-keyword">import</span> MultinomialNB

<span class="hljs-comment"># å¤šé¡¹å¼æœ´ç´ è´å¶æ–¯ï¼ˆé€‚åˆæ–‡æœ¬åˆ†ç±»ï¼Œå¤„ç†ç¦»æ•£ç‰¹å¾ï¼‰</span>
nb_model = MultinomialNB(alpha=<span class="hljs-number">1.0</span>)  <span class="hljs-comment"># alphaï¼šå¹³æ»‘ç³»æ•°ï¼Œé¿å…æ¦‚ç‡ä¸º0</span>
nb_model.fit(X_train, y_train)

<span class="hljs-comment"># æ­¥éª¤3ï¼šæ¨¡å‹è¯„ä¼°</span>
<span class="hljs-keyword">from</span> sklearn.metrics <span class="hljs-keyword">import</span> accuracy_score, classification_report

y_pred = nb_model.predict(X_test)
accuracy = accuracy_score(y_test, y_pred)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"æœ´ç´ è´å¶æ–¯æ¨¡å‹å‡†ç¡®ç‡ï¼š"</span>, accuracy)  <span class="hljs-comment"># æ–‡æœ¬æ•°æ®é›†ä¸Šâ‰ˆ0.84</span>

<span class="hljs-comment"># è¯¦ç»†åˆ†ç±»æŠ¥å‘Š</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"\nåˆ†ç±»æŠ¥å‘Šï¼š"</span>)
<span class="hljs-built_in">print</span>(classification_report(y_test, y_pred, target_names=train_data.target_names))

<span class="hljs-comment"># æ­¥éª¤4ï¼šå®æˆ˜é¢„æµ‹æ–°æ–‡æœ¬</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">predict_text</span>(<span class="hljs-params">text</span>):
    <span class="hljs-comment"># æ–‡æœ¬è½¬ä¸ºTF-IDFç‰¹å¾</span>
    text_tfidf = tfidf.transform([text])
    <span class="hljs-comment"># é¢„æµ‹ç±»åˆ«</span>
    pred = nb_model.predict(text_tfidf)[<span class="hljs-number">0</span>]
    <span class="hljs-comment"># è¿”å›ç±»åˆ«åç§°</span>
    <span class="hljs-keyword">return</span> train_data.target_names[pred]

<span class="hljs-comment"># æµ‹è¯•é¢„æµ‹</span>
test_text1 = <span class="hljs-string">"GPU performance for 3D rendering"</span>  <span class="hljs-comment"># è®¡ç®—æœºå›¾å½¢å­¦</span>
test_text2 = <span class="hljs-string">"Medical treatment for diabetes"</span>  <span class="hljs-comment"># åŒ»å­¦</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"\næ–‡æœ¬1åˆ†ç±»ç»“æœï¼š"</span>, predict_text(test_text1))
<span class="hljs-built_in">print</span>(<span class="hljs-string">"æ–‡æœ¬2åˆ†ç±»ç»“æœï¼š"</span>, predict_text(test_text2))
</code></pre>
<h3 data-id="heading-15">3. æœ´ç´ è´å¶æ–¯å…³é”®æŠ€å·§</h3>
<ul>
<li><strong>ç‰¹å¾æå–</strong>ï¼šæ–‡æœ¬åˆ†ç±»å¿…é¡»ç”¨TF-IDF/è¯è¢‹æ¨¡å‹å°†æ–‡æœ¬è½¬ä¸ºæ•°å€¼ç‰¹å¾ï¼›</li>
<li><strong>å¹³æ»‘ç³»æ•°alpha</strong>ï¼šalphaè¶Šå¤§ï¼Œå¹³æ»‘è¶Šå¼ºï¼ˆé¿å…å› æŸä¸ªå•è¯æœªå‡ºç°å¯¼è‡´æ¦‚ç‡ä¸º0ï¼‰ï¼›</li>
<li><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šä¼˜å…ˆç”¨äºæ–‡æœ¬/åºåˆ—æ•°æ®ï¼Œä¸é€‚åˆç‰¹å¾é«˜åº¦ç›¸å…³çš„åœºæ™¯ï¼ˆè¿èƒŒâ€œæœ´ç´ â€å‡è®¾ï¼‰ã€‚</li>
</ul>
<h2 data-id="heading-16">äº”ã€ä¸‰å¤§ç®—æ³•å¯¹æ¯”ä¸é€‰å‹æŒ‡å—</h2>















































<table><thead><tr><th>ç»´åº¦</th><th>KNN</th><th>SVM</th><th>æœ´ç´ è´å¶æ–¯</th></tr></thead><tbody><tr><td>è®­ç»ƒé€Ÿåº¦</td><td>æ— è®­ç»ƒï¼ˆæå¿«ï¼‰</td><td>ä¸­-æ…¢ï¼ˆå°¤å…¶å¤§æ ·æœ¬ï¼‰</td><td>æå¿«ï¼ˆæ¦‚ç‡è®¡ç®—ï¼‰</td></tr><tr><td>é¢„æµ‹é€Ÿåº¦</td><td>æ…¢ï¼ˆè®¡ç®—è·ç¦»ï¼‰</td><td>å¿«</td><td>æå¿«</td></tr><tr><td>é«˜ç»´æ•°æ®</td><td>æ•ˆæœå·®ï¼ˆç»´åº¦ç¾éš¾ï¼‰</td><td>æ•ˆæœå¥½</td><td>æ•ˆæœå¥½ï¼ˆæ–‡æœ¬é«˜ç»´ï¼‰</td></tr><tr><td>è¶…å‚æ•°è°ƒä¼˜</td><td>ä»…Kå€¼</td><td>Cã€gammaã€æ ¸å‡½æ•°</td><td>ä»…alpha</td></tr><tr><td>è¿‡æ‹Ÿåˆé£é™©</td><td>Kå°æ˜“è¿‡æ‹Ÿåˆ</td><td>Cå¤§æ˜“è¿‡æ‹Ÿåˆ</td><td>ä½ï¼ˆæ¨¡å‹ç®€å•ï¼‰</td></tr><tr><td>æ ¸å¿ƒé€‚ç”¨åœºæ™¯</td><td>å°æ ·æœ¬åˆ†ç±»</td><td>é«˜ç»´/éçº¿æ€§åˆ†ç±»</td><td>æ–‡æœ¬/æ¦‚ç‡ç±»åˆ†ç±»</td></tr></tbody></table>
<h3 data-id="heading-17">é€‰å‹åŸåˆ™ï¼š</h3>
<ol>
<li>å°æ ·æœ¬ã€ç‰¹å¾ç»´åº¦ä½ â†’ é€‰KNNï¼›</li>
<li>é«˜ç»´æ•°æ®ï¼ˆæ–‡æœ¬/å›¾åƒï¼‰ã€éçº¿æ€§ â†’ é€‰SVMï¼›</li>
<li>æ–‡æœ¬åˆ†ç±»ã€è¿½æ±‚é€Ÿåº¦ã€æ ·æœ¬é‡å¤§ â†’ é€‰æœ´ç´ è´å¶æ–¯ã€‚</li>
</ol>
<h2 data-id="heading-18">å…­ã€å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ³•</h2>
<ol>
<li><strong>KNNå‡†ç¡®ç‡ä½</strong>ï¼š
<ul>
<li>åŸå› ï¼šæœªæ ‡å‡†åŒ–ã€Kå€¼ä¸åˆé€‚ã€ç‰¹å¾ç»´åº¦å¤ªé«˜ï¼›</li>
<li>è§£å†³ï¼šæ ‡å‡†åŒ–æ•°æ®ã€è°ƒä¼˜Kå€¼ã€é™ç»´ï¼ˆPCAï¼‰ã€‚</li>
</ul>
</li>
<li><strong>SVMè®­ç»ƒæ…¢</strong>ï¼š
<ul>
<li>åŸå› ï¼šæ ·æœ¬é‡å¤§ã€ç”¨rbfæ ¸å‡½æ•°ï¼›</li>
<li>è§£å†³ï¼šç”¨çº¿æ€§æ ¸ã€é™ç»´ã€é‡‡æ ·å‡å°‘æ ·æœ¬é‡ã€‚</li>
</ul>
</li>
<li><strong>æœ´ç´ è´å¶æ–¯æ–‡æœ¬åˆ†ç±»æ•ˆæœå·®</strong>ï¼š
<ul>
<li>åŸå› ï¼šæœªå»é™¤åœç”¨è¯ã€TF-IDFå‚æ•°ä¸åˆé€‚ï¼›</li>
<li>è§£å†³ï¼šå»é™¤åœç”¨è¯ã€è°ƒæ•´TF-IDFçš„<code>max_features</code>ï¼ˆé™åˆ¶ç‰¹å¾æ•°ï¼‰ã€‚</li>
</ul>
</li>
<li><strong>æ¨¡å‹è¿‡æ‹Ÿåˆ</strong>ï¼š
<ul>
<li>KNNï¼šå¢å¤§Kå€¼ï¼›</li>
<li>SVMï¼šå‡å°Cå€¼ã€å¢å¤§gammaï¼›</li>
<li>æœ´ç´ è´å¶æ–¯ï¼šå¢å¤§alphaå€¼ã€‚</li>
</ul>
</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ¯æ—¥ä¸€ä¸ªC++çŸ¥è¯†ç‚¹|è±å½¢ç»§æ‰¿]]></title>    <link>https://juejin.cn/post/7588004376866947107</link>    <guid>https://juejin.cn/post/7588004376866947107</guid>    <pubDate>2025-12-26T16:50:49.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588004376866947107" data-draft-id="7587997157237555252" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ¯æ—¥ä¸€ä¸ªC++çŸ¥è¯†ç‚¹|è±å½¢ç»§æ‰¿"/> <meta itemprop="keywords" content="ç¼–ç¨‹è¯­è¨€,C++,ç¨‹åºå‘˜"/> <meta itemprop="datePublished" content="2025-12-26T16:50:49.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å›¾å½¢å­¦çˆ±å¥½è€…_Wu"/> <meta itemprop="url" content="https://juejin.cn/user/1060359067408631"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ¯æ—¥ä¸€ä¸ªC++çŸ¥è¯†ç‚¹|è±å½¢ç»§æ‰¿
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1060359067408631/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å›¾å½¢å­¦çˆ±å¥½è€…_Wu
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-26T16:50:49.000Z" title="Fri Dec 26 2025 16:50:49 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ç»§æ‰¿æ˜¯C++é¢å‘å¯¹è±¡çš„æ ¸å¿ƒç‰¹æ€§ä¹‹ä¸€ï¼Œè¯´æ˜ç±»ä¸ç±»ä¹‹é—´çš„ç‰¹æ€§æ˜¯å¯ä»¥ç»§æ‰¿çš„ï¼Œè¿™å¤§å¤§æé«˜äº†ä»£ç çš„å¤ç”¨æ€§ï¼Œä¼˜åŒ–äº†ç¨‹åºç»“æ„ã€‚ä½†æ˜¯æ»¥ç”¨ç»§æ‰¿ä¹Ÿä¼šå¯¼è‡´è±å½¢ç»§æ‰¿çš„å¤šç»§æ‰¿é—®é¢˜ã€‚</p>
<h2 data-id="heading-0">è±å½¢ç»§æ‰¿</h2>
<p>ä»€ä¹ˆæ˜¯è±å½¢ç»§æ‰¿å‘¢ï¼ŸæŒ‡ä¸€ä¸ªæ´¾ç”Ÿç±»åŒæ—¶ç»§æ‰¿ä¸¤ä¸ªç›´æ¥åŸºç±»ï¼Œè¿™ä¸¤ä¸ªç›´æ¥åŸºç±»åˆç»§æ‰¿è‡ªåŒä¸€ä¸ªé—´æ¥åŸºç±»ï¼Œæœ€ç»ˆå½¢æˆ â€œè±å½¢â€ çš„ç»§æ‰¿ç»“æ„ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8495bcc3b8a2453fa1c24d6181d88ce3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Zu-5b2i5a2m54ix5aW96ICFX1d1:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767372649&amp;x-signature=2RZRhhbGEHlnwVHmoAjADU3qLLs%3D" alt="" loading="lazy"/></p>
<p>ä¸‹é¢ç”¨ä»£ç å±•ç¤ºè±å½¢ç»§æ‰¿çš„ç»“æ„ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// é¡¶å±‚åŸºç±»</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">A</span> {
<span class="hljs-keyword">public</span>:
    <span class="hljs-type">int</span> a;
    <span class="hljs-built_in">A</span>(<span class="hljs-type">int</span> val) : <span class="hljs-built_in">a</span>(val) {}
};

<span class="hljs-comment">// ä¸­é—´åŸºç±» Bï¼Œç»§æ‰¿ A</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">B</span> : <span class="hljs-keyword">public</span> A {
<span class="hljs-keyword">public</span>:
    <span class="hljs-built_in">B</span>(<span class="hljs-type">int</span> val) : <span class="hljs-built_in">A</span>(val) {}
};

<span class="hljs-comment">// ä¸­é—´åŸºç±» Cï¼Œç»§æ‰¿ A</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">C</span> : <span class="hljs-keyword">public</span> A {
<span class="hljs-keyword">public</span>:
    <span class="hljs-built_in">C</span>(<span class="hljs-type">int</span> val) : <span class="hljs-built_in">A</span>(val) {}
};

<span class="hljs-comment">// æœ€ç»ˆæ´¾ç”Ÿç±» Dï¼ŒåŒæ—¶ç»§æ‰¿ B å’Œ C</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">D</span> : <span class="hljs-keyword">public</span> B, <span class="hljs-keyword">public</span> C {
<span class="hljs-keyword">public</span>:
    <span class="hljs-comment">// é—®é¢˜1ï¼šåˆå§‹åŒ– A æ—¶ï¼ŒB å’Œ C éƒ½ä¼šåˆ†åˆ«åˆå§‹åŒ– Aï¼Œå¯¼è‡´ A è¢«åˆå§‹åŒ–ä¸¤æ¬¡</span>
    <span class="hljs-built_in">D</span>(<span class="hljs-type">int</span> val1, <span class="hljs-type">int</span> val2) : <span class="hljs-built_in">B</span>(val1), <span class="hljs-built_in">C</span>(val2) {}
};

<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-function">D <span class="hljs-title">d</span><span class="hljs-params">(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>)</span></span>;
    <span class="hljs-comment">// é—®é¢˜2ï¼šè®¿é—® a æ—¶ï¼Œç¼–è¯‘å™¨æ— æ³•ç¡®å®šæ˜¯ B::A::a è¿˜æ˜¯ C::A::aï¼Œç›´æ¥æŠ¥é”™</span>
    <span class="hljs-comment">// cout &lt;&lt; d.a &lt;&lt; endl; </span>
    <span class="hljs-comment">// å¿…é¡»æ˜¾å¼æŒ‡å®šï¼Œä½†è¿™è¿èƒŒäº†â€œå•ä¸€ç»§æ‰¿â€çš„é€»è¾‘ï¼Œä¸”æ•°æ®å†—ä½™ï¼ˆd ä¸­æœ‰ä¸¤ä¸ª aï¼‰</span>
    cout &lt;&lt; d.B::a &lt;&lt; endl; <span class="hljs-comment">// è¾“å‡º 1</span>
    cout &lt;&lt; d.C::a &lt;&lt; endl; <span class="hljs-comment">// è¾“å‡º 2</span>
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<p>ä¸Šè¿°é—®é¢˜ä¸­ï¼ŒAä¸ºé¡¶çº§åŸºç±»ï¼ŒBå’ŒCç»§æ‰¿Aï¼Œåˆå§‹åŒ– A æ—¶ï¼ŒB å’Œ C éƒ½ä¼šåˆ†åˆ«åˆå§‹åŒ– Aï¼Œå¯¼è‡´ A è¢«åˆå§‹åŒ–ä¸¤æ¬¡ï¼›è®¿é—® a æ—¶ï¼Œç¼–è¯‘å™¨æ— æ³•ç¡®å®šæ˜¯ B::A::a è¿˜æ˜¯ C::A::aï¼Œç›´æ¥æŠ¥é”™</p>
<p>æ³¨:â€œB::A::aâ€çš„å«ä¹‰æ˜¯æœ‰ä¸¤å±‚ï¼š</p>
<blockquote>
<ol>
<li>
<p>"A::a"è¡¨ç¤º â€œç±»Â <code>A</code>Â ä¸­çš„æˆå‘˜å˜é‡Â <code>a</code>â€</p>
</li>
<li>
<p>"B::"<code>B</code>Â æ˜¯Â <code>A</code>Â çš„æ´¾ç”Ÿç±»</p>
</li>
</ol>
</blockquote>
<h2 data-id="heading-1">æ ¸å¿ƒé—®é¢˜</h2>
<p>è±å½¢ç»§æ‰¿çš„æ ¸å¿ƒé—®é¢˜æ˜¯<strong>é—´æ¥åŸºç±»çš„æˆå‘˜ä¼šè¢«å¤šæ¬¡å¤åˆ¶</strong>ï¼Œå¯¼è‡´æ•°æ®å†—ä½™ã€äºŒä¹‰æ€§ï¼Œç”šè‡³é€»è¾‘é”™è¯¯ã€‚</p>
<p>æ•°æ®å†—ä½™è¡¨ç°åœ¨é—´æ¥åŸºç±»Â <code>A</code>Â çš„æˆå‘˜å› ä¸ºBå’ŒCçš„ç¼˜æ•…ä¼šåœ¨æœ€ç»ˆæ´¾ç”Ÿç±»Â <code>D</code>Â ä¸­å­˜åœ¨ä¸¤ä»½ï¼Œæµªè´¹å†…å­˜ï¼›</p>
<p>äºŒä¹‰æ€§åˆ™è¡¨ç°åœ¨ç›´æ¥è®¿é—®Â <code>D</code>Â å¯¹è±¡çš„Â <code>A</code>Â æˆå‘˜æ—¶ï¼Œç¼–è¯‘å™¨æ— æ³•åŒºåˆ†æ˜¯Â <code>B</code>Â ç»§æ‰¿çš„Â <code>A</code>Â è¿˜æ˜¯Â <code>C</code>Â ç»§æ‰¿çš„Â <code>A</code>ï¼Œå°±ä¼šé€ æˆç¼–è¯‘æŠ¥é”™ï¼›</p>
<p>é€»è¾‘é”™è¯¯ï¼šè‹¥Â <code>A</code>Â æœ‰è™šå‡½æ•°ï¼Œå¤šæ€è°ƒç”¨æ—¶å¯èƒ½å› é‡å¤çš„åŸºç±»æŒ‡é’ˆå¯¼è‡´è¡Œä¸ºå¼‚å¸¸ã€‚åŸå› æ˜¯éè™šç»§æ‰¿çš„è±å½¢ç»“æ„ä¸­ï¼Œæœ€ç»ˆæ´¾ç”Ÿç±»ä¼šåŒ…å«<strong>ä¸¤ä»½ A çš„è™šæŒ‡é’ˆï¼ˆvptrï¼‰</strong>ï¼Œå¤šæ€è°ƒç”¨æ—¶æ— æ³•ç¡®å®šè¯¥ç”¨å“ªä¸€ä¸ªï¼Œå¯¼è‡´è°ƒç”¨ç»“æœä¸ç¬¦åˆé¢„æœŸï¼Œç”šè‡³å´©æºƒã€‚</p>
<p><strong>è±å½¢ç»§æ‰¿çš„å†…å­˜å¸ƒå±€</strong>å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dcb3548d7aeb4dde870c176ff7a591cc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Zu-5b2i5a2m54ix5aW96ICFX1d1:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767372649&amp;x-signature=ZHjq2NZXFF8VDBgYNju4pnKnFiA%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-2">è§£å†³æ–¹æ¡ˆï¼šè™šç»§æ‰¿</h2>
<p>ç”±äºå¤šç»§æ‰¿ä¼šé€ æˆè±å½¢ç»§æ‰¿é—®é¢˜ï¼Œé‚£ä¹ˆC++ æä¾›<strong>è™šç»§æ‰¿</strong>æœºåˆ¶å°±æ˜¯è§£å†³è±å½¢ç»§æ‰¿çš„åŠæ³•ã€‚è™šç»§æ‰¿é€šè¿‡è®©ä¸­é—´åŸºç±»ï¼ˆ<code>B</code>ã€<code>C</code>ï¼‰å…±äº«åŒä¸€ä¸ªé—´æ¥åŸºç±»ï¼ˆ<code>A</code>ï¼‰çš„å®ä¾‹ï¼Œä»è€Œæ¶ˆé™¤æ•°æ®å†—ä½™å’ŒäºŒä¹‰æ€§</p>
<p>åœ¨ä¸­é—´åŸºç±»ç»§æ‰¿é¡¶å±‚åŸºç±»æ—¶ï¼Œæ·»åŠ Â <code>virtual</code>Â å…³é”®å­—ï¼Œç”¨ä»£ç ä¸¾ä¾‹å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// é¡¶å±‚åŸºç±»ï¼ˆä¸å˜ï¼‰</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">A</span> {
<span class="hljs-keyword">public</span>:
    <span class="hljs-type">int</span> a;
    <span class="hljs-built_in">A</span>(<span class="hljs-type">int</span> val) : <span class="hljs-built_in">a</span>(val) {}
};

<span class="hljs-comment">// ä¸­é—´åŸºç±» Bï¼šè™šç»§æ‰¿ A</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">B</span> : <span class="hljs-keyword">virtual</span> <span class="hljs-keyword">public</span> A {
<span class="hljs-keyword">public</span>:
    <span class="hljs-comment">// è™šç»§æ‰¿ä¸‹ï¼ŒB çš„æ„é€ å‡½æ•°ä¸å†ç›´æ¥åˆå§‹åŒ– Aï¼ˆA çš„åˆå§‹åŒ–ç”±æœ€ç»ˆæ´¾ç”Ÿç±»è´Ÿè´£ï¼‰</span>
    <span class="hljs-built_in">B</span>() {}
};

<span class="hljs-comment">// ä¸­é—´åŸºç±» Cï¼šè™šç»§æ‰¿ A</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">C</span> : <span class="hljs-keyword">virtual</span> <span class="hljs-keyword">public</span> A {
<span class="hljs-keyword">public</span>:
    <span class="hljs-built_in">C</span>() {}
};

<span class="hljs-comment">// æœ€ç»ˆæ´¾ç”Ÿç±» Dï¼šå¿…é¡»ç›´æ¥åˆå§‹åŒ–è™šåŸºç±» A</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">D</span> : <span class="hljs-keyword">public</span> B, <span class="hljs-keyword">public</span> C {
<span class="hljs-keyword">public</span>:
    <span class="hljs-comment">// æ ¸å¿ƒï¼šè™šåŸºç±» A çš„æ„é€ ç”±æœ€ç»ˆæ´¾ç”Ÿç±» D ç»Ÿä¸€åˆå§‹åŒ–ï¼Œé¿å…é‡å¤</span>
    <span class="hljs-built_in">D</span>(<span class="hljs-type">int</span> val) : <span class="hljs-built_in">A</span>(val), <span class="hljs-built_in">B</span>(), <span class="hljs-built_in">C</span>() {}
};

<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-function">D <span class="hljs-title">d</span><span class="hljs-params">(<span class="hljs-number">10</span>)</span></span>;
    <span class="hljs-comment">// æ— æ­§ä¹‰ï¼šd ä¸­åªæœ‰ä¸€ä»½ A::a</span>
    cout &lt;&lt; d.a &lt;&lt; endl; <span class="hljs-comment">// è¾“å‡º 10</span>
    cout &lt;&lt; d.B::a &lt;&lt; endl; <span class="hljs-comment">// ä»å¯æ˜¾å¼è®¿é—®ï¼Œç»“æœåŒä¸Š</span>
    cout &lt;&lt; d.C::a &lt;&lt; endl; <span class="hljs-comment">// ç»“æœåŒä¸Š</span>
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<p>é€šè¿‡ä¸Šè¿°ä»£ç ï¼Œæˆ‘ä»¬æ·±å…¥åˆ†æè™šç»§æ‰¿çš„åº•å±‚åŸç†ï¼Œè™šç»§æ‰¿æ˜¯é€šè¿‡<strong>è™šåŸºç±»è¡¨ï¼ˆvbtableï¼‰</strong>Â å’Œ<strong>è™šåŸºç±»æŒ‡é’ˆï¼ˆvbptrï¼‰</strong>Â å®ç°çš„ï¼š</p>
<blockquote>
<ol>
<li>
<p>ä¸­é—´åŸºç±»ï¼ˆ<code>B</code>ã€<code>C</code>ï¼‰çš„å¯¹è±¡ä¸­ä¼šå¢åŠ ä¸€ä¸ªÂ <code>vbptr</code>Â æŒ‡é’ˆï¼ŒæŒ‡å‘è™šåŸºç±»è¡¨ï¼›</p>
</li>
<li>
<p>è™šåŸºç±»è¡¨å­˜å‚¨å½“å‰å¯¹è±¡åˆ°è™šåŸºç±»ï¼ˆ<code>A</code>ï¼‰å®ä¾‹çš„åç§»é‡ï¼›</p>
</li>
<li>
<p>æœ€ç»ˆæ´¾ç”Ÿç±»ï¼ˆ<code>D</code>ï¼‰ä¸­åªä¿ç•™ä¸€ä»½Â <code>A</code>Â çš„å®ä¾‹ï¼Œ<code>B</code>Â å’ŒÂ <code>C</code>Â çš„Â <code>vbptr</code>Â éƒ½æŒ‡å‘è¿™åŒä¸€ä¸ªå®ä¾‹ã€‚</p>
</li>
</ol>
</blockquote>
<p>éè™šç»§æ‰¿çš„å†…å­˜å¸ƒå±€ç¤ºæ„å›¾å¦‚ä¸‹æ‰€ç¤ºï¼š
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a0b9b08c2ea549b5ac3e29c3cfc01274~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Zu-5b2i5a2m54ix5aW96ICFX1d1:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767372649&amp;x-signature=tG0BlQy6odTarabR7iqiP4zJjeM%3D" alt="" loading="lazy"/>
è™šç»§æ‰¿çš„å†…å­˜å¸ƒå±€ç¤ºæ„å›¾å¦‚ä¸‹æ‰€ç¤ºï¼š
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/32d9e265fe2947fa8a6be4af271aabc2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Zu-5b2i5a2m54ix5aW96ICFX1d1:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767372649&amp;x-signature=426suva1OvVfJj3OdVUE4HOCCMU%3D" alt=" " loading="lazy"/></p>
<p>è™½ç„¶è™šç»§æ‰¿å¯ä»¥è§£å†³è±å½¢ç»§æ‰¿çš„é—®é¢˜ï¼Œä½†åœ¨ç°å®å¼€å‘ä¸­ï¼Œä¸ºäº†å‡å°‘ä¸å¿…è¦çš„éº»çƒ¦ï¼Œå°½é‡é¿å…ä½¿ç”¨å¤šç»§æ‰¿ã€‚</p>
<h2 data-id="heading-3">æ¥å£å¤šç»§æ‰¿çš„å®‰å…¨åœºæ™¯</h2>
<p>è‹¥é¡¶å±‚åŸºç±»æ˜¯<strong>çº¯è™šç±»</strong>ï¼Œå³ä½¿æ˜¯è±å½¢ç»§æ‰¿ç»“æ„ï¼Œä¹Ÿæ— æ•°æ®å†—ä½™ï¼ˆå› ä¸ºçº¯è™šç±»æ— æˆå‘˜å˜é‡ï¼‰ï¼Œæ­¤æ—¶æ— éœ€è™šç»§æ‰¿ï¼Œç”¨ä»£ç ä¸¾ä¾‹å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// çº¯è™šæ¥å£ A</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">A</span> {
<span class="hljs-keyword">public</span>:
    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">func</span><span class="hljs-params">()</span> </span>= <span class="hljs-number">0</span>;
    <span class="hljs-keyword">virtual</span> ~<span class="hljs-built_in">A</span>() = <span class="hljs-keyword">default</span>;
};

<span class="hljs-keyword">class</span> <span class="hljs-title class_">B</span> : <span class="hljs-keyword">public</span> A {
<span class="hljs-keyword">public</span>:
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">func</span><span class="hljs-params">()</span> <span class="hljs-keyword">override</span> </span>{ cout &lt;&lt; <span class="hljs-string">"B::func"</span> &lt;&lt; endl; }
};

<span class="hljs-keyword">class</span> <span class="hljs-title class_">C</span> : <span class="hljs-keyword">public</span> A {
<span class="hljs-keyword">public</span>:
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">func</span><span class="hljs-params">()</span> <span class="hljs-keyword">override</span> </span>{ cout &lt;&lt; <span class="hljs-string">"C::func"</span> &lt;&lt; endl; }
};

<span class="hljs-keyword">class</span> <span class="hljs-title class_">D</span> : <span class="hljs-keyword">public</span> B, <span class="hljs-keyword">public</span> C {
<span class="hljs-keyword">public</span>:
    <span class="hljs-comment">// å¿…é¡»é‡å†™ funcï¼Œå¦åˆ™ D ä»æ˜¯æŠ½è±¡ç±»ï¼ˆè§£å†³äºŒä¹‰æ€§ï¼‰</span>
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">func</span><span class="hljs-params">()</span> <span class="hljs-keyword">override</span> </span>{ B::<span class="hljs-built_in">func</span>(); }
};

<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{
    D d;
    d.<span class="hljs-built_in">func</span>(); <span class="hljs-comment">// è¾“å‡º B::funcï¼Œæ— æ­§ä¹‰</span>
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<h2 data-id="heading-4">æ€»ç»“</h2>
<p>è±å½¢ç»§æ‰¿çš„æ ¸å¿ƒé—®é¢˜æ˜¯é—´æ¥åŸºç±»æˆå‘˜é‡å¤ï¼Œè™šç»§æ‰¿é€šè¿‡å…±äº«åŸºç±»å®ä¾‹è§£å†³è¯¥é—®é¢˜ï¼Œå®é™…å¼€å‘ä¸­åº”ä¼˜å…ˆé¿å…å¤šç»§æ‰¿ã€‚</p>
<p>ä»¥ä¸Šå°±æ˜¯æœ¬æ–‡çš„æ‰€æœ‰å†…å®¹ï¼Œå¦‚æœæœ¬æ–‡å¯¹ä½ æœ‰å¸®åŠ©çš„è¯æ¬¢è¿ç‚¹èµæ”¶è—å“¦~</p>
<p>æ„Ÿå…´è¶£çš„æœ‹å‹ä¹Ÿæ¬¢è¿å…³æ³¨å“Ÿ<del>æˆ‘å°†ä¼šæŒç»­è¾“å‡ºç¼–ç¨‹å¼€å‘çš„å†…å®¹</del></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Node.js ä¸ Haskell æ··åˆç½‘ç»œç¼–ç¨‹è¸©å‘è®°ï¼šTCP ç²˜åŒ…ä¸çŠ¶æ€ä¸ä¸€è‡´å¼•å‘çš„â€œæ­»é”â€]]></title>    <link>https://juejin.cn/post/7588034035286736911</link>    <guid>https://juejin.cn/post/7588034035286736911</guid>    <pubDate>2025-12-27T03:41:46.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588034035286736911" data-draft-id="7588004376867209251" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Node.js ä¸ Haskell æ··åˆç½‘ç»œç¼–ç¨‹è¸©å‘è®°ï¼šTCP ç²˜åŒ…ä¸çŠ¶æ€ä¸ä¸€è‡´å¼•å‘çš„â€œæ­»é”â€"/> <meta itemprop="keywords" content="JavaScript,Node.js"/> <meta itemprop="datePublished" content="2025-12-27T03:41:46.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Lupino"/> <meta itemprop="url" content="https://juejin.cn/user/3051900006579256"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Node.js ä¸ Haskell æ··åˆç½‘ç»œç¼–ç¨‹è¸©å‘è®°ï¼šTCP ç²˜åŒ…ä¸çŠ¶æ€ä¸ä¸€è‡´å¼•å‘çš„â€œæ­»é”â€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3051900006579256/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Lupino
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-27T03:41:46.000Z" title="Sat Dec 27 2025 03:41:46 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">1. èƒŒæ™¯ä¸ç›®æ ‡</h2>
<p>æˆ‘ä»¬éœ€è¦åœ¨ Node.js ä¸­å®ç°ä¸€ä¸ªå®šåˆ¶åŒ–çš„ TCP å®¢æˆ·ç«¯ (<code>RSATransport</code>)ï¼Œç”¨äºè¿æ¥ç°æœ‰çš„ Haskell æœåŠ¡ç«¯ã€‚è¯¥åè®®åŒ…å«è‡ªå®šä¹‰çš„æ¡æ‰‹æµç¨‹å’Œä¸‰ç§æ•°æ®ä¼ è¾“æ¨¡å¼ï¼š</p>
<ul>
<li><strong>Plain (0)</strong> : æ¡æ‰‹åæ˜æ–‡ç›´è¿ã€‚</li>
<li><strong>RSA (1)</strong> : å…¨ç¨‹ä½¿ç”¨ RSA-OAEP åŠ å¯†ã€‚</li>
<li><strong>AES (2)</strong> : æ¡æ‰‹åå•†å‡º Session Key åä½¿ç”¨ AES-CTR åŠ å¯†ã€‚</li>
</ul>
<p><strong>Haskell æœåŠ¡ç«¯é€»è¾‘ (<code>RSA.hs</code>)</strong> ï¼š æœåŠ¡ç«¯åœ¨æ¡æ‰‹æ—¶ä½¿ç”¨å¸¦ç¼“å†²çš„è¯»å–æ–¹å¼ (<code>recvDataOaep</code>)ï¼Œä½†åœ¨åˆ‡æ¢åˆ° <strong>Plain</strong> æ¨¡å¼åï¼Œç›´æ¥æ“ä½œåº•å±‚ Socket (<code>recvData tp</code>)ã€‚</p>
<h2 data-id="heading-1">2. é—®é¢˜ç°è±¡</h2>
<p>å¼€å‘è¿‡ç¨‹ä¸­å‡ºç°äº†ä¸€ä¸ªå¥‡æ€ªçš„ç°è±¡ï¼š</p>
<ol>
<li><strong>AES æ¨¡å¼æ­£å¸¸</strong>ï¼šæ¡æ‰‹ã€å¯†é’¥äº¤æ¢ã€æ•°æ®ä¼ è¾“å‡æµç•…ã€‚</li>
<li><strong>RSA æ¨¡å¼æ­£å¸¸</strong>ã€‚</li>
<li><strong>Plain æ¨¡å¼â€œå¡æ­»â€</strong> ï¼šæ¡æ‰‹çœ‹ä¼¼å®Œæˆï¼Œä½†éšåå‘é€çš„ç¬¬ä¸€æ¡æ•°æ®æœåŠ¡ç«¯æ— å“åº”ï¼Œå®¢æˆ·ç«¯ä¹Ÿæ”¶ä¸åˆ°å›åŒ…ã€‚</li>
<li><strong>â€œè–›å®šè°”çš„ Bugâ€</strong> ï¼šå¦‚æœåœ¨ä»£ç ä¸­åŠ å…¥ <code>console.log</code>ï¼Œæœ‰æ—¶èƒ½è·‘é€šä¸€ç‚¹ç‚¹ï¼Œä½†éšåä¾ç„¶å¡ä½ã€‚</li>
</ol>
<h2 data-id="heading-2">3. æ ¹å› æ·±åº¦åˆ†æ</h2>
<p>ç»è¿‡æ’æŸ¥ï¼Œè¿™æ˜¯ä¸€ä¸ªå…¸å‹çš„ <strong>TCP ç²˜åŒ…</strong> é‡ä¸Š <strong>åº”ç”¨å±‚çŠ¶æ€ç¼“å†²åŒºè®¾è®¡ç¼ºé™·</strong> å¯¼è‡´çš„é€»è¾‘æ­»é”ã€‚</p>
<h3 data-id="heading-3">3.1 Haskell æœåŠ¡ç«¯çš„â€œç¼“å†²åŒºæ—è·¯â€ Bug</h3>
<p>åœ¨ <code>RSA.hs</code> ä¸­ï¼Œæ¥æ”¶é€»è¾‘æ˜¯è¿™æ ·çš„ï¼š</p>
<p>Haskell</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- Haskell ä¼ªä»£ç </span>
recvData RSATP {..} n <span class="hljs-operator">=</span> <span class="hljs-keyword">case</span> rsaMode <span class="hljs-keyword">of</span>
  Plain <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span> recvData tp n           <span class="hljs-comment">-- [å…³é”®ç‚¹] ç›´æ¥è¯»åº•å±‚ Socketï¼Œå¿½ç•¥ç¼“å†²åŒº</span>
  RSA   <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span> recvDataOaep readBuffer ... <span class="hljs-comment">-- ä»ç¼“å†²åŒº readBuffer è¯»å–</span>
  AES   <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span> recvDataAes readBuffer ...  <span class="hljs-comment">-- ä»ç¼“å†²åŒº readBuffer è¯»å–</span>
</code></pre>
<p>åœ¨æ¡æ‰‹é˜¶æ®µï¼ˆåå•† Modeï¼‰ï¼ŒæœåŠ¡ç«¯è°ƒç”¨çš„æ˜¯ <code>recvDataOaep</code>ã€‚è¿™ä¸ªå‡½æ•°ä¸ºäº†è§£å¯†ï¼Œå¯èƒ½ä¼šä» TCP Socket é¢„è¯»å–å¤šäºæ‰€éœ€çš„å­—èŠ‚ï¼ˆä¾‹å¦‚è¯»å–äº† 4096 å­—èŠ‚ï¼Œä½† Mode åŒ…åªæœ‰ 256 å­—èŠ‚ï¼‰ã€‚<strong>å¤šä½™çš„æ•°æ®è¢«ç•™åœ¨äº† Haskell çš„ <code>readBuffer</code> (TVar) ä¸­ã€‚</strong></p>
<h3 data-id="heading-4">3.2 Node.js çš„â€œè¿‡äºé«˜æ•ˆâ€</h3>
<p>åœ¨ Node.js å®¢æˆ·ç«¯ï¼Œå½“æ¡æ‰‹å®Œæˆï¼ˆå‘é€äº† Mode Byteï¼‰åï¼Œæˆ‘ä»¬ç«‹å³æ¸…ç©ºäº†ç§¯å‹çš„å†™å…¥é˜Ÿåˆ— (<code>_writeBuffer</code>) å¹¶å‘é€ä¸šåŠ¡æ•°æ®ã€‚</p>
<p>ç”±äº TCP çš„ <strong>Nagle ç®—æ³•</strong> å’Œæ“ä½œç³»ç»Ÿçš„ç¼“å†²æœºåˆ¶ï¼Œå‘é€çš„ <strong>[Mode åŒ…]</strong> å’Œåç»­çš„ <strong>[ä¸šåŠ¡æ•°æ®åŒ…]</strong> æå¤§æ¦‚ç‡è¢«åˆå¹¶æˆäº†ä¸€ä¸ª TCP æ®µå‘é€åˆ°äº†æœåŠ¡ç«¯ã€‚</p>
<h3 data-id="heading-5">3.3 è‡´å‘½çš„â€œæ“¦è‚©è€Œè¿‡â€</h3>
<p>äºæ˜¯å‘ç”Ÿäº†ä»¥ä¸‹æ—¶åºï¼š</p>
<ol>
<li><strong>Client</strong>: å‘é€ <code>[Mode=Plain][Data="Hello"]</code>ï¼ˆåœ¨åŒä¸€ä¸ª TCP åŒ…ä¸­ï¼‰ã€‚</li>
<li><strong>Server</strong>: è°ƒç”¨ <code>recvDataOaep</code> è¯»å– Modeã€‚å®ƒæŠŠæ•´ä¸ª TCP åŒ…è¯»å…¥å†…å­˜ï¼Œè§£æå‡º <code>Mode=Plain</code>ï¼Œå‰©ä¸‹çš„ <code>Data="Hello"</code> ç•™åœ¨äº† <code>readBuffer</code> ä¸­ã€‚</li>
<li><strong>Server</strong>: åˆ‡æ¢çŠ¶æ€åˆ° <code>Plain</code>ã€‚</li>
<li><strong>Server</strong>: è°ƒç”¨ <code>recvData tp</code> ç­‰å¾…æ–°æ•°æ®ã€‚<strong>æ³¨æ„ï¼šå®ƒè·³è¿‡äº† <code>readBuffer</code>ï¼Œç›´æ¥å»é—®åº•å±‚ Socket è¦æ•°æ®ï¼</strong></li>
<li><strong>Result</strong>: Socket ç¼“å†²åŒºæ˜¯ç©ºçš„ï¼ˆæ•°æ®å·²ç»è¢«è¯»åˆ°åº”ç”¨å±‚ç¼“å†²åŒºäº†ï¼‰ï¼ŒæœåŠ¡ç«¯æŒ‚èµ·ç­‰å¾…ã€‚å®¢æˆ·ç«¯ä»¥ä¸ºæœåŠ¡ç«¯æ”¶åˆ°äº†ï¼Œä¹Ÿåœ¨ç­‰å¾…å“åº”ã€‚<strong>æ­»é”å½¢æˆã€‚</strong></li>
</ol>
<h2 data-id="heading-6">4. è§£å†³æ–¹æ¡ˆ</h2>
<p>è¦è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå¿…é¡»åœ¨å®¢æˆ·ç«¯æ‰“ç ´â€œç²˜åŒ…â€ï¼Œç¡®ä¿æœåŠ¡ç«¯åœ¨å¤„ç†å®Œ Mode åˆ‡æ¢åï¼ŒSocket ç¼“å†²åŒºé‡Œæ‰æœ‰æ–°æ•°æ®åˆ°è¾¾ã€‚</p>
<h3 data-id="heading-7">4.1 ç¦ç”¨ Nagle ç®—æ³•</h3>
<p>é¦–å…ˆï¼Œç¦æ­¢ TCP å»¶è¿Ÿå‘é€ï¼Œç¡®ä¿å°åŒ…ï¼ˆå¦‚æ¡æ‰‹åŒ…ï¼‰èƒ½å°½å¿«å‘å‡ºå»ã€‚</p>
<p>JavaScript</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">this</span>._socket = net.connect(options);
<span class="hljs-keyword">this</span>._socket.setNoDelay(<span class="hljs-literal">true</span>); <span class="hljs-comment">// ç¦ç”¨ Nagle</span>
</code></pre>
<h3 data-id="heading-8">4.2 ä¸¥æ ¼çš„å†™æ“ä½œæµæ§</h3>
<p>ä¸èƒ½ä¾èµ– Node.js çš„è‡ªåŠ¨ç¼“å†²ï¼Œå¿…é¡»ç¡®ä¿ä¸Šä¸€ä¸ªåŒ…çœŸæ­£å†™å…¥å†…æ ¸ï¼ˆdrainï¼‰åï¼Œå†å‘ä¸‹ä¸€ä¸ªåŒ…ã€‚</p>
<p>JavaScript</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä½¿ç”¨å›è°ƒé“¾ç¡®ä¿é¡ºåº</span>
<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">_sendOAEP</span>(modePayload, <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// Mode åŒ…å†™å…¥å®Œæˆåçš„å›è°ƒ</span>
    self.<span class="hljs-title function_">_finishHandshake</span>();
});
</code></pre>
<h3 data-id="heading-9">4.3 é’ˆå¯¹ Plain æ¨¡å¼çš„â€œé­”æ³•å»¶æ—¶â€</h3>
<p>è¿™æ˜¯æœ€å…³é”®çš„ä¸€æ­¥ã€‚ç”±äºæˆ‘ä»¬æ— æ³•ä¿®æ”¹ Haskell æœåŠ¡ç«¯ä»£ç ï¼Œå¿…é¡»åœ¨å®¢æˆ·ç«¯è¿›è¡Œè§„é¿ã€‚åœ¨å‘é€ Mode åŒ…å’Œå‘é€ç¬¬ä¸€æ¡ Plain æ•°æ®ä¹‹é—´ï¼Œå¼ºåˆ¶æ’å…¥ä¸€ä¸ªå¾®å°çš„å»¶æ—¶ï¼ˆ50msï¼‰ã€‚</p>
<p>è¿™ç»™äº†æœåŠ¡ç«¯è¶³å¤Ÿçš„æ—¶é—´ï¼š</p>
<ol>
<li>å¤„ç† Mode åŒ…ã€‚</li>
<li>æ¸…ç©ºå…¶å†…éƒ¨æ¥æ”¶é€»è¾‘ã€‚</li>
<li>åˆ‡æ¢åˆ° Socket ç›´æ¥è¯»å–æ¨¡å¼ã€‚</li>
</ol>
<p>JavaScript</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title class_">RSATransport</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">_finishHandshake</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">_state</span> = <span class="hljs-string">'ESTABLISHED'</span>;
  <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">emit</span>(<span class="hljs-string">'connect'</span>);

  <span class="hljs-comment">// åˆ·æ–°ç§¯å‹çš„æ•°æ®</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">_writeBuffer</span>.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span>) {
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">flush</span> = (<span class="hljs-params"/>) =&gt; {
      <span class="hljs-comment">// ... å‘é€ç§¯å‹æ•°æ® ...</span>
    };

    <span class="hljs-comment">// é’ˆå¯¹ Plain æ¨¡å¼çš„ Hackï¼š</span>
    <span class="hljs-comment">// å¼ºåˆ¶å»¶æ—¶ï¼Œé˜²æ­¢ Mode åŒ…å’Œåç»­æ•°æ®ç²˜åŒ…ï¼Œ</span>
    <span class="hljs-comment">// é¿å…æœåŠ¡ç«¯è¯»å– Mode æ—¶è¯¯è¯»äº†åç»­æ•°æ®åˆ° Buffer ä¸­å´åœ¨ Plain æ¨¡å¼ä¸‹æ— æ³•è®¿é—®ã€‚</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">_mode</span> === <span class="hljs-variable constant_">MODE_PLAIN</span>) {
      <span class="hljs-built_in">setTimeout</span>(flush, <span class="hljs-number">50</span>); 
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-title function_">flush</span>();
    }
  }
};
</code></pre>
<h3 data-id="heading-10">4.4 å®Œå–„èƒŒå‹ (Backpressure) å¤„ç†</h3>
<p>é™¤äº†ä¸Šè¿°æ ¸å¿ƒ Bugï¼Œæˆ‘ä»¬è¿˜ä¿®å¤äº† <code>write</code> æ–¹æ³•çš„è¿”å›å€¼é—®é¢˜ã€‚å½“å¤„äº Plain æ¨¡å¼ï¼ˆé«˜ååï¼‰æ—¶ï¼Œå¿…é¡»æ­£ç¡®å¤„ç† TCP çš„èƒŒå‹ï¼Œå¦åˆ™ä¼šå¯¼è‡´å†…å­˜é£™å‡æˆ–æ•°æ®ä¸¢å¤±ã€‚</p>
<p>JavaScript</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// è½¬å‘åº•å±‚çš„ drain äº‹ä»¶</span>
<span class="hljs-keyword">this</span>._socket.on(<span class="hljs-string">'drain'</span>, () =&gt; <span class="hljs-keyword">this</span>.emit(<span class="hljs-string">'drain'</span>));

<span class="hljs-comment">// æ­£ç¡®è¿”å› boolean</span>
Transport.prototype.write = function(<span class="hljs-keyword">data</span>, encoding, callback) {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._socket.write(<span class="hljs-keyword">data</span>, encoding, callback); 
};
</code></pre>
<h2 data-id="heading-11">5. æ€»ç»“</h2>
<p>è¿™æ¬¡æ’æŸ¥å†æ¬¡éªŒè¯äº†ç½‘ç»œç¼–ç¨‹ä¸­çš„ä¸€æ¡é“å¾‹ï¼š<strong>TCP æ˜¯æµåè®®ï¼Œä¸æ˜¯åŒ…åè®®</strong>ã€‚</p>
<p>å½“å®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯ç”±ä¸åŒè¯­è¨€ç¼–å†™ï¼Œä¸”æœåŠ¡ç«¯å­˜åœ¨æ··åˆè¯»å–ç­–ç•¥ï¼ˆBufferè¯»å– vs Socketç›´è¯»ï¼‰æ—¶ï¼Œåº”ç”¨å±‚å¿…é¡»æå…¶å°å¿ƒåœ°å¤„ç†æ•°æ®è¾¹ç•Œã€‚</p>
<ul>
<li><strong>æ•™è®­ 1</strong>: ä¸è¦å‡è®¾ <code>write</code> ä¸¤æ¬¡å°±ä¼šäº§ç”Ÿä¸¤ä¸ª TCP åŒ…ã€‚</li>
<li><strong>æ•™è®­ 2</strong>: åœ¨å¤„ç†åè®®çŠ¶æ€åˆ‡æ¢ï¼ˆå¦‚æ¡æ‰‹ -&gt; ä¼ è¾“ï¼‰æ—¶ï¼ŒçŠ¶æ€æœºçš„åŒæ­¥è‡³å…³é‡è¦ã€‚</li>
<li><strong>æ•™è®­ 3</strong>: é‡åˆ°â€œå¡æ­»â€ä¸”æ—¥å¿—å½±å“è¡Œä¸ºæ—¶ï¼Œä¼˜å…ˆæ€€ç–‘ç¼“å†²æœºåˆ¶å’Œç«æ€æ¡ä»¶ã€‚</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ”¯ä»˜é…ç½®æ—¶å¥½æ—¶åï¼Ÿå¼‚æ­¥æ–¹æ³•é‡Œçš„å¯¹è±¡å¼•ç”¨å‘]]></title>    <link>https://juejin.cn/post/7588010346071179274</link>    <guid>https://juejin.cn/post/7588010346071179274</guid>    <pubDate>2025-12-27T03:53:57.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588010346071179274" data-draft-id="7588010346071162890" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ”¯ä»˜é…ç½®æ—¶å¥½æ—¶åï¼Ÿå¼‚æ­¥æ–¹æ³•é‡Œçš„å¯¹è±¡å¼•ç”¨å‘"/> <meta itemprop="keywords" content="åç«¯,é¢è¯•,Java"/> <meta itemprop="datePublished" content="2025-12-27T03:53:57.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="9å·è¾¾äºº"/> <meta itemprop="url" content="https://juejin.cn/user/2450136052270077"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ”¯ä»˜é…ç½®æ—¶å¥½æ—¶åï¼Ÿå¼‚æ­¥æ–¹æ³•é‡Œçš„å¯¹è±¡å¼•ç”¨å‘
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2450136052270077/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    9å·è¾¾äºº
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-27T03:53:57.000Z" title="Sat Dec 27 2025 03:53:57 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä¸Šå‘¨æ¥åˆ°å®¢æœåé¦ˆã€‚</p>
<p>æœ‰äº›å•†æˆ·å¼€é€šä¹‹åï¼Œå¾®ä¿¡æ”¯ä»˜åŠŸèƒ½ä¸èƒ½ç”¨ï¼Œæœ‰äº›åˆå¯ä»¥ã€‚ä¸èƒ½ç”¨çš„å•†æˆ·å°±éœ€è¦å®¢æœæ‰‹åŠ¨ä»‹å…¥ï¼Œé‡æ–°é…ç½®æ”¯ä»˜å‚æ•°æ‰æ¢å¤æ­£å¸¸ã€‚</p>
<p>è¿™ä¸ªé—®é¢˜å°±å¾ˆè¯¡å¼‚ï¼Œ<strong>æ—¶å¥½æ—¶å</strong>ã€‚æœ‰æ—¶å€™æ­£å¸¸ï¼Œæœ‰æ—¶å€™å°±ä¸è¡Œã€‚</p>
<p>ä½†æ˜¯åå°æ—¥å¿—æ˜¾ç¤ºéƒ½æ˜¯é…ç½®æˆåŠŸã€‚ä»£ç æ‰§è¡Œå®Œäº†ï¼Œæ²¡æœ‰ä»»ä½•æŠ¥é”™ã€‚</p>
<h2 data-id="heading-0">è¯¡å¼‚çš„ç°è±¡</h2>
<p>å¼€å§‹æ’æŸ¥æ—¥å¿—ã€‚å‘ç°äº†å‡ ä¸ªå¾ˆå¥‡æ€ªçš„ç‚¹ï¼š</p>
<ol>
<li><strong>ä¸šåŠ¡æ—¥å¿—æ˜¾ç¤ºæˆåŠŸ</strong>ï¼Œæ²¡æœ‰ä»»ä½•å¼‚å¸¸</li>
<li><strong>è°ƒç”¨æ—¥å¿—æ˜¾ç¤ºä¸¤æ¬¡é…ç½®ç”¨çš„appidä¸€æ ·</strong></li>
<li><strong>ä»£ç æ˜æ˜å†™çš„æ˜¯ä¸¤ä¸ªä¸åŒçš„appid</strong></li>
<li><strong>é…ç½®æ–‡ä»¶ä¹Ÿæ²¡é—®é¢˜</strong>ï¼Œä¸¤ä¸ªappidéƒ½é…å¯¹äº†</li>
</ol>
<p>ä»£ç å†™çš„æ˜æ˜æ˜¯Aå’ŒBä¸¤ä¸ªappidï¼Œä¸ºå•¥æ—¥å¿—é‡Œéƒ½å˜æˆBäº†ï¼Ÿ</p>
<p>çœ‹äº†å¥½å‡ éæ—¥å¿—ï¼Œç¡®å®šæ²¡çœ‹é”™ã€‚ä¸¤æ¬¡è°ƒç”¨ä¼ å…¥çš„appidç¡®å®ä¸€æ¨¡ä¸€æ ·ã€‚</p>
<p>é‚£å°±åªèƒ½çœ‹çœ‹ä»£ç äº†ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">openMemberV2Service.wxConfig(openMemberV2DTO)<span class="hljs-comment">;</span>
openMemberV2DTO.setSupAppId(sysConfig.getWxHuikeOfficialAccountAppid())<span class="hljs-comment">;</span>
openMemberV2DTO.setAccountType("00")<span class="hljs-comment">;</span>
openMemberV2Service.wxConfig(openMemberV2DTO)<span class="hljs-comment">;</span>
LogUtil.info(log,Â "editGrantÂ &gt;&gt;Â å¼€é€šæˆåŠŸÂ &gt;&gt;Â <span class="hljs-attr">param</span>Â =Â {}<span class="hljs-string">",Â param);
</span></code></pre>
<p>ä¹ä¸€çœ‹ï¼Œå®Œå…¨æ²¡é—®é¢˜ã€‚</p>
<p>ç¬¬ä¸€æ¬¡è°ƒç”¨ç”¨çš„æ˜¯<code>openMemberV2DTO</code>åŸå§‹çš„appidã€‚ç¬¬äºŒæ¬¡è°ƒç”¨ä¹‹å‰ï¼Œæ˜æ˜ä¿®æ”¹äº†<code>supAppId</code>å’Œ<code>accountType</code>ã€‚</p>
<p>ä»£ç é€»è¾‘ä¹Ÿå¾ˆæ¸…æ™°ï¼Œä¸ºå•¥ä¼šå‡ºé—®é¢˜ï¼Ÿ</p>
<p>ä¼šä¸ä¼šæ˜¯é…ç½®æ–‡ä»¶æŠŠappidé…é”™äº†ï¼Ÿ</p>
<p>æ£€æŸ¥äº†é…ç½®æ–‡ä»¶ï¼š</p>
<p>é…ç½®ä¹Ÿæ²¡é—®é¢˜ã€‚ä¸¤ä¸ªappidéƒ½å¯¹ã€‚</p>
<p>æ—¢ç„¶ä»£ç é€»è¾‘æ²¡é—®é¢˜ï¼Œé…ç½®ä¹Ÿæ²¡é—®é¢˜ï¼Œé‚£é—®é¢˜å¤§æ¦‚ç‡å°±æ˜¯wxConfigè¿™ä¸ªæ–¹æ³•äº†</p>
<p>ç‚¹å¼€<code>wxConfig</code>æ–¹æ³•ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">public</span>Â <span class="hljs-built_in">void</span>Â <span class="hljs-title function_">wxConfig</span>(<span class="hljs-params">OpenMemberV2DTOÂ dto</span>)Â {
Â Â Â Â asyncTaskExecutor.<span class="hljs-title function_">execute</span>(()Â -&gt;Â {
Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â è·å–å‚æ•°</span>
Â Â Â Â Â Â Â Â <span class="hljs-title class_">String</span>Â subAppIdÂ =Â dto.<span class="hljs-title function_">getSupAppId</span>();
Â Â Â Â Â Â Â Â <span class="hljs-title class_">String</span>Â accountTypeÂ =Â dto.<span class="hljs-title function_">getAccountType</span>();

Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â è°ƒç”¨å¾®ä¿¡APIé…ç½®</span>
Â Â Â Â Â Â Â Â <span class="hljs-title class_">JSON</span><span class="hljs-built_in">Object</span>Â bodyÂ =Â <span class="hljs-keyword">new</span>Â <span class="hljs-title class_">JSON</span><span class="hljs-built_in">Object</span>();
Â Â Â Â Â Â Â Â body.<span class="hljs-title function_">put</span>(<span class="hljs-string">"sub_appid"</span>,Â subAppId);
Â Â Â Â Â Â Â Â body.<span class="hljs-title function_">put</span>(<span class="hljs-string">"account_type"</span>,Â accountType);

Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â è°ƒç”¨å¹³å°æ¥å£...</span>
Â Â Â Â Â Â Â Â platformManager.<span class="hljs-title function_">call</span>(callParam);
Â Â Â Â });
}
</code></pre>
<p>çœ‹åˆ°<code>asyncTaskExecutor.execute</code>ï¼Œç›¸ä¿¡å¤§å®¶å°±æ˜ç™½äº†ã€‚</p>
<p><strong>è¿™æ˜¯ä¸ªå¼‚æ­¥æ–¹æ³•ï¼</strong></p>
<p>é‚£é—®é¢˜é“¾è·¯å°±æ¸…æ¥šäº†ï¼š</p>
<ol>
<li>ä¸»çº¿ç¨‹è°ƒç”¨<code>wxConfig(openMemberV2DTO)</code> â†’ ä»»åŠ¡æäº¤åˆ°çº¿ç¨‹æ± ï¼Œ<strong>è¿˜æ²¡æ‰§è¡Œ</strong></li>
<li>ä¸»çº¿ç¨‹ç»§ç»­æ‰§è¡Œï¼Œä¿®æ”¹<code>openMemberV2DTO.setSupAppId(...)</code></li>
<li>ä¸»çº¿ç¨‹å†æ¬¡è°ƒç”¨<code>wxConfig(openMemberV2DTO)</code> â†’ åˆæäº¤ä¸€ä¸ªä»»åŠ¡åˆ°çº¿ç¨‹æ± </li>
<li>çº¿ç¨‹æ± å¼€å§‹æ‰§è¡Œç¬¬ä¸€ä¸ªä»»åŠ¡ â†’ è¯»å–<code>dto.getSupAppId()</code>ï¼Œå‘ç°å·²ç»æ˜¯ä¿®æ”¹åçš„å€¼äº†</li>
<li>çº¿ç¨‹æ± æ‰§è¡Œç¬¬äºŒä¸ªä»»åŠ¡ â†’ è¿˜æ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼Œappidå½“ç„¶ä¸€æ ·</li>
</ol>
<p><strong>ä¸¤æ¬¡ä¼ çš„æ˜¯åŒä¸€ä¸ªå¯¹è±¡å¼•ç”¨ï¼Œç¬¬äºŒæ¬¡ä¿®æ”¹æ±¡æŸ“äº†ç¬¬ä¸€æ¬¡çš„æ•°æ®ã€‚</strong></p>
<h2 data-id="heading-1">é—®é¢˜æœ¬è´¨</h2>
<p>è¿™ä¸ªé—®é¢˜çš„æœ¬è´¨æ˜¯ï¼š<strong>å¯¹è±¡å¼•ç”¨ + å¼‚æ­¥æ–¹æ³• â‰ˆ æ•°æ®æ±¡æŸ“</strong></p>
<h3 data-id="heading-2">Javaå¯¹è±¡å¼•ç”¨æœºåˆ¶</h3>
<p>Javaæ–¹æ³•ä¼ å‚ï¼Œä¼ çš„æ˜¯å¼•ç”¨ï¼Œä¸æ˜¯å‰¯æœ¬ã€‚</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">//Â è¿™ä¸¤æ¬¡è°ƒç”¨ï¼Œä¼ çš„æ˜¯åŒä¸€ä¸ªå¯¹è±¡çš„å¼•ç”¨</span>
<span class="hljs-built_in">wxConfig</span>(openMemberV2DTO);Â Â <span class="hljs-comment">//Â ä¼ çš„æ˜¯å¼•ç”¨</span>
openMemberV2DTO<span class="hljs-selector-class">.setSupAppId</span>("new_appid");Â Â <span class="hljs-comment">//Â ä¿®æ”¹å¯¹è±¡</span>
<span class="hljs-built_in">wxConfig</span>(openMemberV2DTO);Â Â <span class="hljs-comment">//Â è¿˜æ˜¯åŒä¸€ä¸ªå¼•ç”¨</span>
</code></pre>
<p>å¦‚æœ<code>wxConfig</code>æ˜¯åŒæ­¥æ–¹æ³•ï¼Œæ²¡é—®é¢˜ã€‚å› ä¸ºç¬¬ä¸€æ¬¡è°ƒç”¨ä¼šç«‹å³æ‰§è¡Œå®Œï¼Œç”¨çš„æ˜¯ä¿®æ”¹å‰çš„å€¼ã€‚</p>
<p>ä½†<code>wxConfig</code>æ˜¯å¼‚æ­¥æ–¹æ³•ã€‚</p>
<h3 data-id="heading-3">å¼‚æ­¥æ–¹æ³•çš„æ‰§è¡Œæ—¶æœº</h3>
<p>å¼‚æ­¥æ–¹æ³•ä¸ä¼šç«‹å³æ‰§è¡Œï¼Œè€Œæ˜¯æäº¤åˆ°çº¿ç¨‹æ± ï¼Œç­‰çº¿ç¨‹æ± æœ‰ç©ºé—²çº¿ç¨‹æ—¶æ‰æ‰§è¡Œã€‚</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">//Â ä¸»çº¿ç¨‹æ—¶é—´çº¿</span>
t1:Â <span class="hljs-built_in">wxConfig</span>(dto)Â Â â†’Â æäº¤ä»»åŠ¡Aåˆ°çº¿ç¨‹æ± 
t2:Â dto.<span class="hljs-built_in">setSupAppId</span>(<span class="hljs-string">"new"</span>)Â Â â†’Â ä¿®æ”¹å¯¹è±¡
t3:Â <span class="hljs-built_in">wxConfig</span>(dto)Â Â â†’Â æäº¤ä»»åŠ¡Båˆ°çº¿ç¨‹æ± 
t4:Â ä¸»çº¿ç¨‹ç»“æŸ

//Â çº¿ç¨‹æ± æ—¶é—´çº¿
t5:Â æ‰§è¡Œä»»åŠ¡AÂ â†’Â è¯»å–dto.<span class="hljs-built_in">getSupAppId</span>()Â Â //Â å·²ç»æ˜¯<span class="hljs-string">"new"</span>äº†ï¼
t6:Â æ‰§è¡Œä»»åŠ¡BÂ â†’Â è¯»å–dto.<span class="hljs-built_in">getSupAppId</span>()Â Â //Â è¿˜æ˜¯<span class="hljs-string">"new"</span>
</code></pre>
<h3 data-id="heading-4">å®Œæ•´çš„é—®é¢˜é“¾è·¯</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant Main as ä¸»çº¿ç¨‹
    participant Pool as çº¿ç¨‹æ± 
    participant Obj as openMemberV2DTOå¯¹è±¡

    Note over Main: t1æ—¶åˆ»
    Main-&gt;&gt;Pool: wxConfig(openMemberV2DTO)
    Note over Pool: ä»»åŠ¡Aè¿›å…¥é˜Ÿåˆ—&lt;br/&gt;ç­‰å¾…æ‰§è¡Œ

    Note over Main: t2æ—¶åˆ»
    Main-&gt;&gt;Obj: setSupAppId(&amp;#34;wx_huike...&amp;#34;)
    Main-&gt;&gt;Obj: setAccountType(&amp;#34;00&amp;#34;)
    Note over Obj: å¯¹è±¡çŠ¶æ€è¢«ä¿®æ”¹

    Note over Main: t3æ—¶åˆ»
    Main-&gt;&gt;Pool: wxConfig(openMemberV2DTO)
    Note over Pool: ä»»åŠ¡Bè¿›å…¥é˜Ÿåˆ—&lt;br/&gt;ç­‰å¾…æ‰§è¡Œ

    Note over Main: t4æ—¶åˆ»
    Note over Main: ä¸»çº¿ç¨‹ç»“æŸ&lt;br/&gt;æ‰“å°&amp;#34;å¼€é€šæˆåŠŸ&amp;#34;

    Note over Pool: t5æ—¶åˆ»
    Pool-&gt;&gt;Obj: æ‰§è¡Œä»»åŠ¡A&lt;br/&gt;è¯»å–getSupAppId()
    Note over Obj: è¿”å›ï¼š&amp;#34;wx_huike...&amp;#34;&lt;br/&gt;å·²ç»æ˜¯ä¿®æ”¹åçš„å€¼ï¼

    Note over Pool: t6æ—¶åˆ»
    Pool-&gt;&gt;Obj: æ‰§è¡Œä»»åŠ¡B&lt;br/&gt;è¯»å–getSupAppId()
    Note over Obj: è¿”å›ï¼š&amp;#34;wx_huike...&amp;#34;&lt;br/&gt;è¿˜æ˜¯åŒä¸€ä¸ªå€¼ï¼
</code></pre>
<p><strong>ä¸¤ä¸ªä»»åŠ¡è¯»å–çš„éƒ½æ˜¯ä¿®æ”¹åçš„å€¼ã€‚</strong></p>
<h2 data-id="heading-5">ä¸ºä»€ä¹ˆè¿™ä¸ªbugç‰¹åˆ«å®¹æ˜“è¢«å¿½ç•¥ã€‚ï¼Ÿ</h2>
<h3 data-id="heading-6">ä»£ç çœ‹èµ·æ¥å®Œå…¨æ­£å¸¸</h3>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-built_in">wxConfig</span>(dto);Â Â <span class="hljs-comment">//Â ç¬¬ä¸€æ¬¡è°ƒç”¨</span>
dto<span class="hljs-selector-class">.setSupAppId</span>("new");Â Â <span class="hljs-comment">//Â ä¿®æ”¹</span>
<span class="hljs-built_in">wxConfig</span>(dto);Â Â <span class="hljs-comment">//Â ç¬¬äºŒæ¬¡è°ƒç”¨</span>
</code></pre>
<p>å¦‚æœä¸çŸ¥é“<code>wxConfig</code>æ˜¯å¼‚æ­¥çš„ï¼Œè¿™ä»£ç ä¸€ç‚¹é—®é¢˜éƒ½æ²¡æœ‰ã€‚</p>
<h3 data-id="heading-7">æ²¡æœ‰å•¥æŠ¥é”™</h3>
<p>ä¸šåŠ¡é€»è¾‘æ­£å¸¸æ‰§è¡Œå®Œäº†ï¼Œæ—¥å¿—æ˜¾ç¤ºæˆåŠŸã€‚ä¸ä¼šæŠ›å¼‚å¸¸ï¼Œä¸ä¼šç©ºæŒ‡é’ˆã€‚</p>
<p>åªæ˜¯<strong>é…ç½®é”™äº†</strong>è€Œå·²ã€‚</p>
<h3 data-id="heading-8">é—®é¢˜æ˜¯å¶å‘çš„</h3>
<p>è¿™æ‰æ˜¯æœ€éšè”½çš„åœ°æ–¹ã€‚</p>
<p>å¦‚æœçº¿ç¨‹æ± åˆšå¥½ç©ºé—²ï¼Œç¬¬ä¸€ä¸ªä»»åŠ¡æäº¤åç«‹å³æ‰§è¡Œå®Œäº†ï¼Œç¬¬äºŒä¸ªä»»åŠ¡å†è¿›æ¥ï¼Œå°±ä¸ä¼šæœ‰é—®é¢˜ã€‚</p>
<p>ä½†å¦‚æœçº¿ç¨‹æ± æ­£å¿™ï¼Œä¸¤ä¸ªä»»åŠ¡éƒ½åœ¨é˜Ÿåˆ—é‡Œç­‰å¾…ï¼Œç­‰åˆ°çœŸæ­£æ‰§è¡Œæ—¶ï¼Œå¯¹è±¡å¯èƒ½æ—©å°±è¢«ä¿®æ”¹äº†ã€‚</p>
<p><strong>æ—¶å¥½æ—¶åï¼Œæœ€éš¾æ’æŸ¥ã€‚</strong></p>
<h3 data-id="heading-9">æ—¥å¿—çš„è¿·æƒ‘æ€§</h3>
<pre><code class="hljs language-csharp" lang="csharp">[<span class="hljs-meta">INFO</span>]Â å¼€é€šæˆåŠŸ
</code></pre>
<p>è¿™è¡Œæ—¥å¿—åœ¨ä¸»çº¿ç¨‹ç»“æŸæ—¶æ‰“å°ï¼Œè®©äººä»¥ä¸ºä¸€åˆ‡æ­£å¸¸ã€‚</p>
<p>å®é™…ä¸Šï¼Œçº¿ç¨‹æ± é‡Œçš„ä»»åŠ¡æ‰åˆšå¼€å§‹æ‰§è¡Œã€‚</p>
<h3 data-id="heading-10">Code Reviewå®¹æ˜“è¢«é—æ¼</h3>
<p>Code Reviewæ—¶ï¼Œå¦‚æœä¸è¿›å…¥<code>wxConfig</code>æ–¹æ³•å†…éƒ¨çœ‹ï¼Œå¾ˆéš¾å‘ç°æ˜¯å¼‚æ­¥çš„ã€‚</p>
<p>è€Œä¸”ä»£ç é€»è¾‘ç¡®å®æ²¡é—®é¢˜ï¼Œå°±æ˜¯å°‘è€ƒè™‘äº†å¼‚æ­¥åœºæ™¯ã€‚</p>
<h2 data-id="heading-11">è§£å†³æ–¹æ¡ˆ</h2>
<h3 data-id="heading-12">åˆ›å»ºæ–°å¯¹è±¡</h3>
<p>æœ€ç®€å•çš„åŠæ³•ï¼šç»™ç¬¬äºŒæ¬¡è°ƒç”¨åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">openMemberV2Service.wxConfig(openMemberV2DTO)<span class="hljs-comment">;</span>
//Â åˆ›å»ºæ–°å¯¹è±¡
OpenMemberV2DTOÂ <span class="hljs-attr">openMemberDTO</span>Â =Â BeanUtil.map(openMemberV2DTO,Â OpenMemberV2DTO.class)<span class="hljs-comment">;</span>
openMemberDTO.setSupAppId(sysConfig.getWxHuikeOfficialAccountAppid())<span class="hljs-comment">;</span>
openMemberDTO.setAccountType("00")<span class="hljs-comment">;</span>
openMemberV2Service.wxConfig(openMemberDTO)<span class="hljs-comment">;</span>
</code></pre>
<p><code>BeanUtil.map</code>ä¼šåˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡ï¼Œå¤åˆ¶æ‰€æœ‰å±æ€§ã€‚</p>
<p>ä¸¤æ¬¡è°ƒç”¨ä¼ å…¥çš„æ˜¯ä¸åŒçš„å¯¹è±¡å¼•ç”¨ï¼Œäº’ä¸å½±å“ã€‚</p>
<h3 data-id="heading-13">å…¶ä»–æ–¹æ¡ˆ</h3>
<p><strong>æ–¹æ¡ˆ1ï¼šæ·±æ‹·è´</strong></p>
<pre><code class="hljs language-ini" lang="ini">OpenMemberV2DTOÂ <span class="hljs-attr">newDto</span>Â =Â openMemberV2DTO.clone()<span class="hljs-comment">;</span>
</code></pre>
<p>å‰ææ˜¯DTOå®ç°äº†<code>Cloneable</code>æ¥å£ï¼Œå¹¶ä¸”æ˜¯æ·±æ‹·è´ã€‚</p>
<p><strong>æ–¹æ¡ˆ2ï¼šä¸å¯å˜å¯¹è±¡</strong></p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">//Â åˆ›å»ºæ–°å¯¹è±¡ï¼Œè€Œä¸æ˜¯ä¿®æ”¹æ—§å¯¹è±¡</span>
OpenMemberV2DTOÂ dto2Â =Â OpenMemberV2DTO<span class="hljs-selector-class">.builder</span>()
Â Â Â Â <span class="hljs-selector-class">.supAppId</span>(sysConfig.getWxHuikeOfficialAccountAppid())
Â Â Â Â <span class="hljs-selector-class">.accountType</span>("<span class="hljs-number">00</span>")
Â Â Â Â <span class="hljs-selector-class">.build</span>();

<span class="hljs-built_in">wxConfig</span>(dto2);
</code></pre>
<p><strong>æ–¹æ¡ˆ3ï¼šå¼‚æ­¥æ–¹æ³•å†…éƒ¨æ‹·è´ï¼ˆæœ€æ¨èï¼‰</strong></p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-function"><span class="hljs-keyword">public</span>Â <span class="hljs-type">void</span>Â <span class="hljs-title">wxConfig</span><span class="hljs-params">(OpenMemberV2DTOÂ dto)</span>Â </span>{
Â Â Â Â <span class="hljs-comment">//Â è¿›å…¥æ–¹æ³•å°±ç«‹å³æ‹·è´å‚æ•°</span>
Â Â Â Â OpenMemberV2DTOÂ copyDtoÂ =Â FsBeanUtil.<span class="hljs-built_in">map</span>(dto,Â OpenMemberV2DTO.<span class="hljs-keyword">class</span>);

Â Â Â Â asyncTaskExecutor.<span class="hljs-built_in">execute</span>(()Â -&gt;Â {
Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â ä½¿ç”¨æ‹·è´çš„å¯¹è±¡</span>
Â Â Â Â Â Â Â Â <span class="hljs-type">String</span>Â subAppIdÂ =Â copyDto.<span class="hljs-built_in">getSupAppId</span>();
Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â ...</span>
Â Â Â Â });
}
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆæ¨èè¿™ä¸ªæ–¹æ¡ˆï¼Ÿ</strong></p>
<ol>
<li><strong>è°ƒç”¨æ–¹ä¸ç”¨å…³å¿ƒæ˜¯å¦å¼‚æ­¥</strong>ï¼šå°è£…æ€§å¥½ï¼Œå¯¹å¤–æ¥å£ç®€æ´</li>
<li><strong>ä¸€åŠ³æ°¸é€¸</strong>ï¼šä¿®æ”¹ä¸€æ¬¡ï¼Œæ‰€æœ‰è°ƒç”¨æ–¹éƒ½å—ç›Š</li>
<li><strong>é˜²å¾¡æ€§ç¼–ç¨‹</strong>ï¼šåœ¨æ–¹æ³•å†…éƒ¨åšå¥½é˜²æŠ¤ï¼Œä¸ä¾èµ–è°ƒç”¨æ–¹çš„æ­£ç¡®ä½¿ç”¨</li>
</ol>
<p>è¿™æ¬¡ä¿®å¤åï¼Œæˆ‘å°±æ˜¯ç”¨çš„è¿™ä¸ªæ–¹æ¡ˆã€‚æŠŠæ‹·è´é€»è¾‘åŠ åˆ°<code>wxConfig</code>æ–¹æ³•å†…éƒ¨ï¼Œä¹‹åå°±å†ä¹Ÿæ²¡å‡ºè¿‡é—®é¢˜ã€‚</p>
<h2 data-id="heading-14">æ€»ç»“</h2>
<p>è¿™æ¬¡äº‹æ•…è®©æˆ‘å­¦åˆ°äº†å‡ ç‚¹ã€‚</p>
<h3 data-id="heading-15">1. å¼‚æ­¥æ–¹æ³•è¦è­¦æƒ•å¯¹è±¡å¼•ç”¨</h3>
<p>åªè¦æ–¹æ³•æ˜¯å¼‚æ­¥çš„ï¼Œä¼ å…¥çš„å¯¹è±¡å¯èƒ½åœ¨ä»»ä½•æ—¶å€™è¢«ä¿®æ”¹ã€‚</p>
<p>ä¸è¦å‡è®¾"è°ƒç”¨æ–¹ä¸ä¼šæ”¹"ã€‚è¦ä¹ˆæ‹·è´å¯¹è±¡ï¼Œè¦ä¹ˆç”¨ä¸å¯å˜å¯¹è±¡ã€‚</p>
<h3 data-id="heading-16">2. Code Reviewä¸åªçœ‹é€»è¾‘</h3>
<p>Reviewä»£ç æ—¶ï¼Œä¸èƒ½åªçœ‹è¡¨é¢é€»è¾‘æ˜¯å¦æ­£ç¡®ã€‚</p>
<p>è¿˜è¦å…³æ³¨ï¼š</p>
<ul>
<li>æ–¹æ³•æ˜¯åŒæ­¥è¿˜æ˜¯å¼‚æ­¥ï¼Ÿ</li>
<li>å¯¹è±¡æ˜¯å…±äº«çš„è¿˜æ˜¯ç‹¬ç«‹çš„ï¼Ÿ</li>
<li>æœ‰æ²¡æœ‰çº¿ç¨‹å®‰å…¨é—®é¢˜ï¼Ÿ</li>
</ul>
<h3 data-id="heading-17">3. çº¿ç¨‹å®‰å…¨ä¸åªæ˜¯åŠ é”</h3>
<p>å¾ˆå¤šäººæåˆ°çº¿ç¨‹å®‰å…¨ï¼Œç¬¬ä¸€ååº”æ˜¯åŠ é”ã€‚</p>
<p>ä½†è¿™ä¸ªé—®é¢˜åŠ é”ä¹Ÿæ²¡ç”¨ï¼Œæ ¹æœ¬åŸå› æ˜¯<strong>å¯¹è±¡è¢«å…±äº«äº†</strong>ã€‚</p>
<p>çº¿ç¨‹å®‰å…¨çš„æœ¬è´¨ï¼š<strong>é¿å…å…±äº«å¯å˜çŠ¶æ€</strong>ã€‚</p>
<h3 data-id="heading-18">4. æ—¥å¿—è¦æ‰“å°å…³é”®å‚æ•°</h3>
<p>å¦‚æœä¸€å¼€å§‹æ²¡æœ‰æ‰“å°appidï¼Œè¿™ä¸ªé—®é¢˜ä¼šæ›´éš¾æ’æŸ¥ã€‚</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-comment">//Â å¥½çš„æ—¥å¿—</span>
LogUtil.info(<span class="hljs-built_in">log</span>,Â <span class="hljs-string">"wxConfigÂ &gt;&gt;Â sub_appidÂ =Â {},Â account_typeÂ =Â {}"</span>,
Â Â Â Â dto.getSupAppId(),Â dto.getAccountType());

<span class="hljs-comment">//Â ä¸å¤Ÿçš„æ—¥å¿—</span>
LogUtil.info(<span class="hljs-built_in">log</span>,Â <span class="hljs-string">"wxConfigÂ &gt;&gt;Â å¼€å§‹é…ç½®"</span>);
</code></pre>
<p>å…³é”®å‚æ•°ä¸€å®šè¦æ‰“å°å‡ºæ¥ã€‚</p>
<h3 data-id="heading-19">5. æ’æŸ¥é—®é¢˜è¦çœ‹æ–¹æ³•å®ç°</h3>
<p>è¿™æ¬¡èƒ½å¿«é€Ÿå®šä½ï¼Œæ˜¯å› ä¸ºè¿›å…¥äº†<code>wxConfig</code>æ–¹æ³•å†…éƒ¨ï¼Œçœ‹åˆ°äº†<code>asyncTaskExecutor.execute</code>ã€‚</p>
<p>å¦‚æœåªçœ‹è°ƒç”¨ä»£ç ï¼Œæ°¸è¿œæ‰¾ä¸åˆ°åŸå› ã€‚</p>
<h2 data-id="heading-20">å†™åœ¨æœ€å</h2>
<p><strong>å¼‚æ­¥æ–¹æ³•ä¼ å‚æ—¶ï¼Œæ³¨æ„å¯¹è±¡å¼•ç”¨é—®é¢˜ã€‚å¦‚æœéœ€è¦å¤šæ¬¡è°ƒç”¨å¹¶ä¿®æ”¹å‚æ•°ï¼ŒåŠ¡å¿…åˆ›å»ºæ–°å¯¹è±¡ã€‚</strong></p>
<p>ä»£ç å¾ˆç®€å•ï¼Œä½†å®¹æ˜“å¿½ç•¥ã€‚å¤§å®¶ä¸€èµ·å…±å‹‰ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[5åˆ†é’Ÿæå®šRustFSç›‘æ§ï¼šPrometheus+Grafanaå®æˆ˜ï¼Œæ€§èƒ½æå‡300%çš„ç›‘æ§æ–¹æ¡ˆ]]></title>    <link>https://juejin.cn/post/7587997893987516443</link>    <guid>https://juejin.cn/post/7587997893987516443</guid>    <pubDate>2025-12-26T11:27:19.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587997893987516443" data-draft-id="7587965800272986138" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="5åˆ†é’Ÿæå®šRustFSç›‘æ§ï¼šPrometheus+Grafanaå®æˆ˜ï¼Œæ€§èƒ½æå‡300%çš„ç›‘æ§æ–¹æ¡ˆ"/> <!----> <meta itemprop="datePublished" content="2025-12-26T11:27:19.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¯¹è±¡å­˜å‚¨ä¸RustFS"/> <meta itemprop="url" content="https://juejin.cn/user/652466093570057"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            5åˆ†é’Ÿæå®šRustFSç›‘æ§ï¼šPrometheus+Grafanaå®æˆ˜ï¼Œæ€§èƒ½æå‡300%çš„ç›‘æ§æ–¹æ¡ˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/652466093570057/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¯¹è±¡å­˜å‚¨ä¸RustFS
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-26T11:27:19.000Z" title="Fri Dec 26 2025 11:27:19 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    2
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">5åˆ†é’Ÿæå®šRustFSç›‘æ§ï¼šPrometheus+Grafanaå®æˆ˜ï¼Œæ€§èƒ½æå‡300%çš„ç›‘æ§æ–¹æ¡ˆ</h2>
<blockquote>
<p>åœ¨åˆ†å¸ƒå¼å­˜å‚¨ç³»ç»Ÿçš„è¿ç»´ä¸­ï¼Œâ€œçœ‹ä¸è§é—®é¢˜â€å¾€å¾€æ¯”é—®é¢˜æœ¬èº«æ›´å¯æ€•ã€‚æœ¬æ–‡å°†å¸¦ä½ é€šè¿‡5åˆ†é’Ÿçš„å®æˆ˜éƒ¨ç½²ï¼Œä¸ºRustFSæ„å»ºä¸€å¥—ä¼ä¸šçº§ç›‘æ§ç³»ç»Ÿï¼Œè®©ç³»ç»Ÿè¿è¡ŒçŠ¶æ€ä¸€ç›®äº†ç„¶ã€‚</p>
</blockquote>
<h3 data-id="heading-1">ä¸€ã€ä¸ºä»€ä¹ˆRustFSéœ€è¦ä¸“é—¨çš„ç›‘æ§æ–¹æ¡ˆï¼Ÿ</h3>
<p>ä½œä¸ºé«˜æ€§èƒ½åˆ†å¸ƒå¼å¯¹è±¡å­˜å‚¨ç³»ç»Ÿï¼ŒRustFSåœ¨è¿è¡Œè¿‡ç¨‹ä¸­ä¼šäº§ç”Ÿæµ·é‡æŒ‡æ ‡æ•°æ®ã€‚ä¼ ç»Ÿçš„æ—¥å¿—ç›‘æ§å·²æ— æ³•æ»¡è¶³éœ€æ±‚ï¼Œä¸»è¦è¡¨ç°åœ¨ï¼š</p>
<p>ä¸‰å¤§ç›‘æ§ç—›ç‚¹ï¼š<br/>
â€¢ æ€§èƒ½ç“¶é¢ˆéš¾å®šä½ï¼šæ— æ³•å®æ—¶æŒæ¡IOPSã€å»¶è¿Ÿç­‰å…³é”®æŒ‡æ ‡</p>
<p>â€¢ å®¹é‡è§„åˆ’é çŒœæµ‹ï¼šå­˜å‚¨ä½¿ç”¨è¶‹åŠ¿ä¸æ¸…æ™°ï¼Œæ‰©å®¹æ—¶æœºéš¾æŠŠæ¡</p>
<p>â€¢ æ•…éšœæ’æŸ¥æ•ˆç‡ä½ï¼šé—®é¢˜å‘ç”Ÿæ—¶ç¼ºä¹å®Œæ•´é“¾è·¯æ•°æ®æ”¯æ’‘</p>
<p>è§£å†³æ–¹æ¡ˆå¯¹æ¯”ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ä¼ ç»Ÿæ–¹æ¡ˆï¼šæŸ¥çœ‹æ—¥å¿—ï¼ˆä½æ•ˆï¼‰</span>
<span class="hljs-built_in">tail</span> -f /var/log/rustfs/server.log | grep <span class="hljs-string">"ERROR"</span>

<span class="hljs-comment"># ç°ä»£æ–¹æ¡ˆï¼šå…¨æ™¯ç›‘æ§ï¼ˆé«˜æ•ˆï¼‰</span>
<span class="hljs-comment"># æŒ‡æ ‡é‡‡é›†(Prometheus) + å¯è§†åŒ–(Grafana) + å‘Šè­¦(Alertmanager)</span>
</code></pre>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘å°†åˆ†äº«ä¸€å¥—åœ¨ç”Ÿäº§ç¯å¢ƒéªŒè¯çš„5åˆ†é’Ÿå¿«é€Ÿéƒ¨ç½²æ–¹æ¡ˆã€‚</p>
<h3 data-id="heading-2">äºŒã€ç¯å¢ƒå‡†å¤‡ï¼š1åˆ†é’Ÿæå®šåŸºç¡€ç»„ä»¶</h3>
<h4 data-id="heading-3">2.1 ç³»ç»Ÿè¦æ±‚æ£€æŸ¥</h4>
<p>ç¡®ä¿ä½ çš„ç¯å¢ƒæ»¡è¶³ä»¥ä¸‹è¦æ±‚ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ£€æŸ¥Dockerç¯å¢ƒ</span>
docker --version &amp;&amp; docker-compose --version

<span class="hljs-comment"># æ£€æŸ¥èµ„æºæƒ…å†µ</span>
free -h &amp;&amp; <span class="hljs-built_in">df</span> -h

<span class="hljs-comment"># é¢„æœŸè¾“å‡ºç¤ºä¾‹ï¼š</span>
<span class="hljs-comment"># Docker version 20.10.0</span>
<span class="hljs-comment"># å¯ç”¨å†…å­˜ â‰¥ 2GBï¼Œç£ç›˜ç©ºé—´ â‰¥ 5GB</span>
</code></pre>
<p>æœ€ä½é…ç½®ï¼š<br/>
â€¢ å†…å­˜ï¼š2GB+</p>
<p>â€¢ ç£ç›˜ï¼š5GBå¯ç”¨ç©ºé—´</p>
<p>â€¢ ç½‘ç»œï¼šå¯è®¿é—®Docker Hub</p>
<h4 data-id="heading-4">2.2 ä¸€é”®ä¸‹è½½ç›‘æ§å¥—ä»¶</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åˆ›å»ºé¡¹ç›®ç›®å½•</span>
<span class="hljs-built_in">mkdir</span> rustfs-monitoring &amp;&amp; <span class="hljs-built_in">cd</span> rustfs-monitoring

<span class="hljs-comment"># ä¸‹è½½docker-composeé…ç½®æ–‡ä»¶</span>
curl -O https://raw.githubusercontent.com/rustfs/monitoring/main/docker-compose.yml

<span class="hljs-comment"># ä¸‹è½½Prometheusé…ç½®</span>
<span class="hljs-built_in">mkdir</span> -p config/prometheus
curl -O https://raw.githubusercontent.com/rustfs/monitoring/main/config/prometheus/prometheus.yml
</code></pre>
<h3 data-id="heading-5">ä¸‰ã€æ ¸å¿ƒé…ç½®ï¼š2åˆ†é’Ÿå®Œæˆç›‘æ§é›†æˆ</h3>
<h4 data-id="heading-6">3.1 é…ç½®RustFSæ”¯æŒæŒ‡æ ‡è¾“å‡º</h4>
<p>ä¿®æ”¹RustFSé…ç½®æ–‡ä»¶ (<code>rustfs.env</code>)ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å¯ç”¨æŒ‡æ ‡é‡‡é›†</span>
RUSTFS_METRICS_ENABLED=<span class="hljs-literal">true</span>
RUSTFS_METRICS_TYPES=511  <span class="hljs-comment"># é‡‡é›†æ‰€æœ‰æŒ‡æ ‡ç±»å‹</span>

<span class="hljs-comment"># OpenTelemetryç«¯ç‚¹é…ç½®</span>
RUSTFS_OTLP_ENDPOINT=http://otel-collector:4317

<span class="hljs-comment"># æŒ‡æ ‡é‡‡é›†é—´éš”ï¼ˆç§’ï¼‰</span>
RUSTFS_METRICS_INTERVAL=15
</code></pre>
<p>æŒ‡æ ‡ç±»å‹è¯´æ˜ï¼š</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-comment">// RustFSæ”¯æŒçš„ç›‘æ§æŒ‡æ ‡æšä¸¾</span>
<span class="hljs-keyword">pub</span> <span class="hljs-keyword">enum</span> <span class="hljs-title class_">MetricType</span> {
    DISK = <span class="hljs-number">1</span> &lt;&lt; <span class="hljs-number">1</span>,      <span class="hljs-comment">// ç£ç›˜æŒ‡æ ‡</span>
    NET = <span class="hljs-number">1</span> &lt;&lt; <span class="hljs-number">5</span>,       <span class="hljs-comment">// ç½‘ç»œæŒ‡æ ‡  </span>
    MEM = <span class="hljs-number">1</span> &lt;&lt; <span class="hljs-number">6</span>,       <span class="hljs-comment">// å†…å­˜æŒ‡æ ‡</span>
    CPU = <span class="hljs-number">1</span> &lt;&lt; <span class="hljs-number">7</span>,       <span class="hljs-comment">// CPUæŒ‡æ ‡</span>
    <span class="hljs-comment">// ... å…¶ä»–æŒ‡æ ‡</span>
    ALL = (<span class="hljs-number">1</span> &lt;&lt; <span class="hljs-number">9</span>) - <span class="hljs-number">1</span>  <span class="hljs-comment">// æ‰€æœ‰æŒ‡æ ‡</span>
}
</code></pre>
<h4 data-id="heading-7">3.2 é…ç½®Prometheusæ•°æ®é‡‡é›†</h4>
<p>ç¼–è¾‘Prometheusé…ç½® (<code>prometheus.yml</code>)ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">global:</span>
  <span class="hljs-attr">scrape_interval:</span> <span class="hljs-string">15s</span>
  <span class="hljs-attr">evaluation_interval:</span> <span class="hljs-string">15s</span>

<span class="hljs-attr">scrape_configs:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-attr">job_name:</span> <span class="hljs-string">'rustfs-metrics'</span>
    <span class="hljs-attr">static_configs:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">targets:</span> [<span class="hljs-string">'otel-collector:8889'</span>]
    <span class="hljs-attr">metrics_path:</span> <span class="hljs-string">'/metrics'</span>
    <span class="hljs-attr">scrape_interval:</span> <span class="hljs-string">10s</span>

  <span class="hljs-bullet">-</span> <span class="hljs-attr">job_name:</span> <span class="hljs-string">'node-exporter'</span>
    <span class="hljs-attr">static_configs:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">targets:</span> [<span class="hljs-string">'node-exporter:9100'</span>]

<span class="hljs-attr">alerting:</span>
  <span class="hljs-attr">alertmanagers:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">static_configs:</span>
        <span class="hljs-bullet">-</span> <span class="hljs-attr">targets:</span> [<span class="hljs-string">'alertmanager:9093'</span>]
</code></pre>
<h4 data-id="heading-8">3.3 é…ç½®OpenTelemetry Collector</h4>
<p>åˆ›å»ºOTelé…ç½® (<code>otel-collector-config.yaml</code>)ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">receivers:</span>
  <span class="hljs-attr">otlp:</span>
    <span class="hljs-attr">protocols:</span>
      <span class="hljs-attr">grpc:</span>
        <span class="hljs-attr">endpoint:</span> <span class="hljs-number">0.0</span><span class="hljs-number">.0</span><span class="hljs-number">.0</span><span class="hljs-string">:4317</span>

<span class="hljs-attr">exporters:</span>
  <span class="hljs-attr">prometheus:</span>
    <span class="hljs-attr">endpoint:</span> <span class="hljs-string">"0.0.0.0:8889"</span>
    <span class="hljs-attr">namespace:</span> <span class="hljs-string">rustfs</span>

<span class="hljs-attr">service:</span>
  <span class="hljs-attr">pipelines:</span>
    <span class="hljs-attr">metrics:</span>
      <span class="hljs-attr">receivers:</span> [<span class="hljs-string">otlp</span>]
      <span class="hljs-attr">exporters:</span> [<span class="hljs-string">prometheus</span>]
</code></pre>
<h3 data-id="heading-9">å››ã€ä¸€é”®éƒ¨ç½²ï¼š1åˆ†é’Ÿå¯åŠ¨æ‰€æœ‰æœåŠ¡</h3>
<h4 data-id="heading-10">4.1 ç¼–å†™Docker Composeæ–‡ä»¶</h4>
<p>å®Œæ•´çš„<code>docker-compose.yml</code>ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">version:</span> <span class="hljs-string">'3.8'</span>

<span class="hljs-attr">services:</span>
  <span class="hljs-attr">prometheus:</span>
    <span class="hljs-attr">image:</span> <span class="hljs-string">prom/prometheus:latest</span>
    <span class="hljs-attr">ports:</span> [<span class="hljs-string">"9090:9090"</span>]
    <span class="hljs-attr">volumes:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">./config/prometheus:/etc/prometheus</span>
    <span class="hljs-attr">command:</span> <span class="hljs-string">--web.enable-lifecycle</span>

  <span class="hljs-attr">grafana:</span>
    <span class="hljs-attr">image:</span> <span class="hljs-string">grafana/grafana:latest</span>
    <span class="hljs-attr">ports:</span> [<span class="hljs-string">"3000:3000"</span>]
    <span class="hljs-attr">environment:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">GF_SECURITY_ADMIN_PASSWORD=admin123</span>
    <span class="hljs-attr">volumes:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">grafana_data:/var/lib/grafana</span>

  <span class="hljs-attr">otel-collector:</span>
    <span class="hljs-attr">image:</span> <span class="hljs-string">otel/opentelemetry-collector:0.130.0</span>
    <span class="hljs-attr">volumes:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">./otel-collector-config.yaml:/etc/otelcol/config.yaml</span>
    <span class="hljs-attr">ports:</span> [<span class="hljs-string">"4317:4317"</span>]

  <span class="hljs-attr">node-exporter:</span>
    <span class="hljs-attr">image:</span> <span class="hljs-string">prom/node-exporter:latest</span>
    <span class="hljs-attr">ports:</span> [<span class="hljs-string">"9100:9100"</span>]

<span class="hljs-attr">volumes:</span>
  <span class="hljs-attr">grafana_data:</span>
</code></pre>
<h4 data-id="heading-11">4.2 å¯åŠ¨ç›‘æ§æ ˆ</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ä¸€é”®å¯åŠ¨æ‰€æœ‰æœåŠ¡</span>
docker-compose up -d

<span class="hljs-comment"># æ£€æŸ¥æœåŠ¡çŠ¶æ€</span>
docker-compose ps

<span class="hljs-comment"># é¢„æœŸè¾“å‡ºï¼š</span>
<span class="hljs-comment"># NAME                STATUS              PORTS</span>
<span class="hljs-comment"># prometheus          Up 5 minutes        0.0.0.0:9090-&gt;9090/tcp</span>
<span class="hljs-comment"># grafana            Up 5 minutes        0.0.0.0:3000-&gt;3000/tcp</span>
<span class="hljs-comment"># otel-collector     Up 5 minutes        0.0.0.0:4317-&gt;4317/tcp</span>
</code></pre>
<h3 data-id="heading-12">äº”ã€é…ç½®å¯è§†åŒ–ï¼š1åˆ†é’Ÿå®ŒæˆGrafanaä»ªè¡¨æ¿</h3>
<h4 data-id="heading-13">5.1 æ·»åŠ æ•°æ®æº</h4>
<ol>
<li>
<p>è®¿é—®Grafanaï¼š<a href="https://link.juejin.cn?target=http%3A%2F%2Flocalhost%3A3000" target="_blank" title="http://localhost:3000" ref="nofollow noopener noreferrer">http://localhost:3000</a></p>
</li>
<li>
<p>ç™»å½•ï¼šç”¨æˆ·å<code>admin</code>â€‹ï¼Œå¯†ç <code>admin123</code></p>
</li>
<li>
<p>æ·»åŠ Prometheusæ•°æ®æºï¼š<br/>
â€¢ ç‚¹å‡»Configuration â†’ Data Sources â†’ Add data source</p>
<p>â€¢ é€‰æ‹©Prometheusç±»å‹</p>
<p>â€¢ URLå¡«å†™ï¼š<code>http://prometheus:9090</code></p>
<p>â€¢ ç‚¹å‡»Save &amp; TestéªŒè¯è¿æ¥</p>
</li>
</ol>
<h4 data-id="heading-14">5.2 å¯¼å…¥é¢„ç½®ä»ªè¡¨æ¿</h4>
<p>ä½¿ç”¨å®˜æ–¹ä»ªè¡¨æ¿æ¨¡æ¿ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># è·å–ä»ªè¡¨æ¿IDåˆ—è¡¨</span>
<span class="hljs-comment"># å­˜å‚¨æ€§èƒ½ä»ªè¡¨æ¿ï¼šID 1324</span>
<span class="hljs-comment"># ç³»ç»Ÿèµ„æºä»ªè¡¨æ¿ï¼šID 1325  </span>
<span class="hljs-comment"># ä¸šåŠ¡æŒ‡æ ‡ä»ªè¡¨æ¿ï¼šID 1326</span>
</code></pre>
<p>å¯¼å…¥æ­¥éª¤ï¼š</p>
<ol>
<li>ç‚¹å‡»+ â†’ Import</li>
<li>è¾“å…¥ä»ªè¡¨æ¿IDï¼š<code>1324</code></li>
<li>é€‰æ‹©Prometheusæ•°æ®æº</li>
<li>ç‚¹å‡»Importå®Œæˆ</li>
</ol>
<h4 data-id="heading-15">5.3 å…³é”®ç›‘æ§æŒ‡æ ‡è§£è¯»</h4>
<p>æ ¸å¿ƒç›‘æ§æŒ‡æ ‡æ¸…å•ï¼š</p>
<pre><code class="hljs language-promql" lang="promql"># å­˜å‚¨å®¹é‡ä½¿ç”¨ç‡
sum(rustfs_disk_used_bytes) by (instance) / sum(rustfs_disk_total_bytes) by (instance) * 100

# è¯·æ±‚å»¶è¿Ÿ(P95)
histogram_quantile(0.95, sum(rate(rustfs_request_duration_seconds_bucket[5m])) by (le))

# ååé‡ç›‘æ§
rate(rustfs_throughput_bytes_total[5m])

# é”™è¯¯ç‡ç›‘æ§
rate(rustfs_request_errors_total[5m]) / rate(rustfs_requests_total[5m]) * 100
</code></pre>
<h3 data-id="heading-16">å…­ã€å®æˆ˜æ•ˆæœï¼šçœŸå®ç›‘æ§æ•°æ®å±•ç¤º</h3>
<h4 data-id="heading-17">6.1 æ€§èƒ½æå‡å¯¹æ¯”</h4>
<p>ç›‘æ§ç³»ç»Ÿéƒ¨ç½²å‰åå¯¹æ¯”ï¼š</p>



































<table><thead><tr><th>ç›‘æ§èƒ½åŠ›</th><th>éƒ¨ç½²å‰</th><th>éƒ¨ç½²å</th><th>æå‡æ•ˆæœ</th></tr></thead><tbody><tr><td>é—®é¢˜å‘ç°æ—¶é—´</td><td>å°æ—¶çº§</td><td>åˆ†é’Ÿçº§</td><td>20å€æé€Ÿ</td></tr><tr><td>æ€§èƒ½åˆ†ææ·±åº¦</td><td>åŸºç¡€æŒ‡æ ‡</td><td>å…¨é“¾è·¯è¿½è¸ª</td><td>300%æ›´æ·±å…¥</td></tr><tr><td>å®¹é‡è§„åˆ’</td><td>ç»éªŒçŒœæµ‹</td><td>æ•°æ®é©±åŠ¨</td><td>å‡†ç¡®ç‡æå‡80%</td></tr><tr><td>æ•…éšœæ¢å¤</td><td>æ‰‹åŠ¨æ’æŸ¥</td><td>è‡ªåŠ¨å®šä½</td><td>æ¢å¤æ—¶é—´å‡å°‘70%</td></tr></tbody></table>
<h4 data-id="heading-18">6.2 å…³é”®ç›‘æ§ç•Œé¢é¢„è§ˆ</h4>
<p>ä»ªè¡¨æ¿æ ¸å¿ƒç»„ä»¶ï¼š</p>
<ol>
<li>é›†ç¾¤æ¦‚è§ˆï¼šèŠ‚ç‚¹çŠ¶æ€ã€å­˜å‚¨å®¹é‡ã€è¯·æ±‚æ€»é‡</li>
<li>æ€§èƒ½åˆ†æï¼šP50/P95/P99å»¶è¿Ÿã€ååé‡è¶‹åŠ¿</li>
<li>èµ„æºç›‘æ§ï¼šCPUã€å†…å­˜ã€ç£ç›˜ã€ç½‘ç»œä½¿ç”¨ç‡</li>
<li>ä¸šåŠ¡æŒ‡æ ‡ï¼šS3æ“ä½œç»Ÿè®¡ã€é”™è¯¯ç‡ã€ç¼“å­˜å‘½ä¸­ç‡</li>
</ol>
<h3 data-id="heading-19">ä¸ƒã€é«˜çº§åŠŸèƒ½ï¼šå‘Šè­¦é…ç½®ä¸ä¼˜åŒ–</h3>
<h4 data-id="heading-20">7.1 å…³é”®å‘Šè­¦è§„åˆ™é…ç½®</h4>
<p>åˆ›å»ºå‘Šè­¦è§„åˆ™ (<code>alert.rules</code>)ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">groups:</span>
<span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">rustfs_alerts</span>
  <span class="hljs-attr">rules:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-attr">alert:</span> <span class="hljs-string">HighDiskUsage</span>
    <span class="hljs-attr">expr:</span> <span class="hljs-string">rustfs_disk_used_percent</span> <span class="hljs-string">&gt;</span> <span class="hljs-number">85</span>
    <span class="hljs-attr">for:</span> <span class="hljs-string">5m</span>
    <span class="hljs-attr">labels:</span>
      <span class="hljs-attr">severity:</span> <span class="hljs-string">warning</span>
    <span class="hljs-attr">annotations:</span>
      <span class="hljs-attr">summary:</span> <span class="hljs-string">"ç£ç›˜ä½¿ç”¨ç‡è¿‡é«˜ (å®ä¾‹ <span class="hljs-template-variable">{{ $labels.instance }}</span>)"</span>
      
  <span class="hljs-bullet">-</span> <span class="hljs-attr">alert:</span> <span class="hljs-string">APIErrorRateHigh</span>
    <span class="hljs-attr">expr:</span> <span class="hljs-string">rate(rustfs_request_errors_total[5m])</span> <span class="hljs-string">/</span> <span class="hljs-string">rate(rustfs_requests_total[5m])</span> <span class="hljs-string">&gt;</span> <span class="hljs-number">0.05</span>
    <span class="hljs-attr">for:</span> <span class="hljs-string">2m</span>
    <span class="hljs-attr">labels:</span>
      <span class="hljs-attr">severity:</span> <span class="hljs-string">critical</span>
</code></pre>
<h4 data-id="heading-21">7.2 å‘Šè­¦é€šçŸ¥é›†æˆ</h4>
<p>é…ç½®é‚®ä»¶é€šçŸ¥ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># alertmanager.yml</span>
<span class="hljs-attr">route:</span>
  <span class="hljs-attr">group_by:</span> [<span class="hljs-string">'alertname'</span>]
  <span class="hljs-attr">group_wait:</span> <span class="hljs-string">10s</span>
  <span class="hljs-attr">group_interval:</span> <span class="hljs-string">5m</span>
  <span class="hljs-attr">repeat_interval:</span> <span class="hljs-string">1h</span>
  <span class="hljs-attr">receiver:</span> <span class="hljs-string">'email-notifications'</span>

<span class="hljs-attr">receivers:</span>
<span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">'email-notifications'</span>
  <span class="hljs-attr">email_configs:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-attr">to:</span> <span class="hljs-string">'team@company.com'</span>
    <span class="hljs-attr">from:</span> <span class="hljs-string">'alertmanager@company.com'</span>
    <span class="hljs-attr">smarthost:</span> <span class="hljs-string">'smtp.company.com:587'</span>
    <span class="hljs-attr">auth_username:</span> <span class="hljs-string">'alertmanager'</span>
    <span class="hljs-attr">auth_password:</span> <span class="hljs-string">'password'</span>
</code></pre>
<h3 data-id="heading-22">å…«ã€å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ</h3>
<h4 data-id="heading-23">8.1 éƒ¨ç½²é—®é¢˜æ’æŸ¥</h4>
<p>é—®é¢˜1ï¼šPrometheusæ— æ³•é‡‡é›†æ•°æ®</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ£€æŸ¥ç›®æ ‡çŠ¶æ€</span>
curl http://localhost:9090/api/v1/targets

<span class="hljs-comment"># æ£€æŸ¥æŒ‡æ ‡ç«¯ç‚¹</span>
curl http://otel-collector:8889/metrics
</code></pre>
<p>é—®é¢˜2ï¼šGrafanaæ— æ³•è¿æ¥æ•°æ®æº</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ£€æŸ¥ç½‘ç»œè¿é€šæ€§</span>
docker-compose <span class="hljs-built_in">exec</span> grafana ping prometheus

<span class="hljs-comment"># æ£€æŸ¥é˜²ç«å¢™è§„åˆ™</span>
iptables -L | grep 9090
</code></pre>
<h4 data-id="heading-24">8.2 æ€§èƒ½ä¼˜åŒ–å»ºè®®</h4>
<p>å¤§è§„æ¨¡é›†ç¾¤ä¼˜åŒ–ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># è°ƒæ•´Prometheusé…ç½®</span>
<span class="hljs-attr">storage:</span>
  <span class="hljs-attr">tsdb:</span>
    <span class="hljs-attr">retention:</span> <span class="hljs-string">15d</span>  <span class="hljs-comment"># æ•°æ®ä¿ç•™æ—¶é—´</span>
    <span class="hljs-attr">max_block_size:</span> <span class="hljs-string">2h</span>

<span class="hljs-comment"># ä¼˜åŒ–é‡‡é›†é¢‘ç‡</span>
<span class="hljs-attr">scrape_interval:</span> <span class="hljs-string">30s</span>  <span class="hljs-comment"># ç”Ÿäº§ç¯å¢ƒå»ºè®®å€¼</span>
</code></pre>
<h3 data-id="heading-25">ä¹ã€ç”Ÿäº§ç¯å¢ƒå®è·µå»ºè®®</h3>
<h4 data-id="heading-26">9.1 ç›‘æ§ç­–ç•¥è§„åˆ’</h4>
<p>æ ¹æ®ä¸šåŠ¡é‡è¦æ€§åˆ†çº§ç›‘æ§ï¼š</p>





























<table><thead><tr><th>ç›‘æ§çº§åˆ«</th><th>é‡‡é›†é—´éš”</th><th>ä¿ç•™æ—¶é—´</th><th>å‘Šè­¦å“åº”</th></tr></thead><tbody><tr><td>å…³é”®ä¸šåŠ¡</td><td>15ç§’</td><td>30å¤©</td><td>5åˆ†é’Ÿ</td></tr><tr><td>é‡è¦ä¸šåŠ¡</td><td>30ç§’</td><td>15å¤©</td><td>15åˆ†é’Ÿ</td></tr><tr><td>ä¸€èˆ¬ä¸šåŠ¡</td><td>60ç§’</td><td>7å¤©</td><td>30åˆ†é’Ÿ</td></tr></tbody></table>
<h4 data-id="heading-27">9.2 å®¹é‡è§„åˆ’æŒ‡å—</h4>
<p>èµ„æºéœ€æ±‚ä¼°ç®—ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ¯æ—¥æŒ‡æ ‡æ•°æ®é‡ä¼°ç®—</span>
æŒ‡æ ‡æ•°é‡ Ã— é‡‡é›†é¢‘ç‡ Ã— ä¿å­˜å¤©æ•° Ã— å­—èŠ‚æ•°/æŒ‡æ ‡
1000æŒ‡æ ‡ Ã— 2880æ¬¡/å¤© Ã— 30å¤© Ã— 2KB â‰ˆ 172GB/æœˆ
</code></pre>
<h3 data-id="heading-28">åã€æ€»ç»“ä¸ä¸‹ä¸€æ­¥</h3>
<p>é€šè¿‡æœ¬æ–‡çš„5åˆ†é’Ÿå®æˆ˜ï¼Œä½ å·²ç»æˆåŠŸæ­å»ºäº†å®Œæ•´çš„RustFSç›‘æ§ä½“ç³»ã€‚è¿™å¥—æ–¹æ¡ˆçš„ä¼˜åŠ¿åœ¨äºï¼š</p>
<p>âœ… å¼€ç®±å³ç”¨ï¼šä¸€é”®éƒ¨ç½²ï¼Œæ— éœ€å¤æ‚é…ç½®<br/>
âœ… å…¨é¢ç›‘æ§ï¼šè¦†ç›–æ€§èƒ½ã€èµ„æºã€ä¸šåŠ¡å…¨ç»´åº¦<br/>
âœ… ç”Ÿäº§å°±ç»ªï¼šç»è¿‡çœŸå®ç¯å¢ƒéªŒè¯ï¼Œç¨³å®šå¯é <br/>
âœ… å¯æ‰©å±•ï¼šæ”¯æŒæ°´å¹³æ‰©å±•ï¼Œæ»¡è¶³å¢é•¿éœ€æ±‚</p>
<hr/>
<p>ä»¥ä¸‹æ˜¯æ·±å…¥å­¦ä¹  RustFS çš„æ¨èèµ„æºï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Frustfs%2Frustfs" target="_blank" title="https://github.com/rustfs/rustfs" ref="nofollow noopener noreferrer">RustFS</a></p>
<p>å®˜æ–¹æ–‡æ¡£ï¼š <a href="https://link.juejin.cn?target=https%3A%2F%2Flink.zhihu.com%2F%3Ftarget%3Dhttps%253A%2F%2Fdocs.rustfs.com%2F" target="_blank" title="https://link.zhihu.com/?target=https%3A//docs.rustfs.com/" ref="nofollow noopener noreferrer">RustFS å®˜æ–¹æ–‡æ¡£</a>- æä¾›æ¶æ„ã€å®‰è£…æŒ‡å—å’Œ API å‚è€ƒã€‚</p>
<p>GitHub ä»“åº“ï¼š <a href="https://link.juejin.cn?target=https%3A%2F%2Flink.zhihu.com%2F%3Ftarget%3Dhttps%253A%2F%2Fdocs.rustfs.com%2F" target="_blank" title="https://link.zhihu.com/?target=https%3A//docs.rustfs.com/" ref="nofollow noopener noreferrer">GitHub ä»“åº“</a> - è·å–æºä»£ç ã€æäº¤é—®é¢˜æˆ–è´¡çŒ®ä»£ç ã€‚</p>
<p>ç¤¾åŒºæ”¯æŒï¼š <a href="https://link.juejin.cn?target=https%3A%2F%2Flink.zhihu.com%2F%3Ftarget%3Dhttps%253A%2F%2Fgithub.com%2Forgs%2Frustfs%2Fdiscussions" target="_blank" title="https://link.zhihu.com/?target=https%3A//github.com/orgs/rustfs/discussions" ref="nofollow noopener noreferrer">GitHub Discussions</a>- ä¸å¼€å‘è€…äº¤æµç»éªŒå’Œè§£å†³æ–¹æ¡ˆã€‚</p>
<p>â€</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <!----></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ğŸ”¥MySQLçš„å¤§è¡¨ä¼˜åŒ–æ–¹æ¡ˆ (å®æˆ˜åˆ†äº«)]]></title>    <link>https://juejin.cn/post/7588086766235254822</link>    <guid>https://juejin.cn/post/7588086766235254822</guid>    <pubDate>2025-12-26T11:50:48.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588086766235254822" data-draft-id="7587903505136402482" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ğŸ”¥MySQLçš„å¤§è¡¨ä¼˜åŒ–æ–¹æ¡ˆ (å®æˆ˜åˆ†äº«)"/> <meta itemprop="keywords" content="Java,MySQL,æ€§èƒ½ä¼˜åŒ–"/> <meta itemprop="datePublished" content="2025-12-26T11:50:48.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="IT_sunshine"/> <meta itemprop="url" content="https://juejin.cn/user/4212984287338653"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ğŸ”¥MySQLçš„å¤§è¡¨ä¼˜åŒ–æ–¹æ¡ˆ (å®æˆ˜åˆ†äº«)
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4212984287338653/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    IT_sunshine
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-26T11:50:48.000Z" title="Fri Dec 26 2025 11:50:48 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    5
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»20åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/94e5fd4c7d0b44dfaef178e7304522ad~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSVRfc3Vuc2hpbmU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767354999&amp;x-signature=2NwcGpRz36cjWCpCKGFWLHce9jI%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-0">ä¸€ã€MySQLå¤§è¡¨çš„æ ‡å‡†å’Œå®šä¹‰</h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/04edfb70baf342f4986144b8ce9a824b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSVRfc3Vuc2hpbmU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767354999&amp;x-signature=C6TkQ%2BWSS5bqfPws0TC2F45GE2c%3D" alt="image.png" loading="lazy"/></p>
<ul>
<li><strong>æ•°æ®é‡ç»´åº¦</strong>ï¼šå•è¡¨è¡Œæ•°è¶…è¿‡1000ä¸‡è¡Œï¼Œæˆ–å•è¡¨å ç”¨ç©ºé—´è¶…è¿‡100GBï¼ˆä¸åŒä¸šåŠ¡åœºæ™¯ä¸‹é˜ˆå€¼å·®å¼‚è¾ƒå¤§ï¼Œå¦‚é«˜å¹¶å‘ä¸šåŠ¡ä¸­500ä¸‡è¡Œå¯èƒ½å°±æˆä¸ºå¤§è¡¨ï¼‰ï¼›</li>
<li><strong>å¹¶å‘åœºæ™¯æ€§èƒ½ç»´åº¦</strong>ï¼šæŸ¥è¯¢è€—æ—¶ç¨³å®šè¶…è¿‡500msï¼Œæ›´æ–°/åˆ é™¤æ“ä½œå‡ºç°é”ç­‰å¾…ï¼Œç´¢å¼•ç»´æŠ¤ï¼ˆåˆ›å»ºã€åˆ é™¤ã€é‡å»ºï¼‰è€—æ—¶è¿‡é•¿ï¼ˆè¶…è¿‡1å°æ—¶ï¼‰ï¼›</li>
</ul>
<h2 data-id="heading-1">äºŒã€åˆ†ç‰‡åŸåˆ™å’Œä¼˜åŒ–æ–¹æ¡ˆé€‰æ‹©å’Œå»ºè®®</h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/405abd147780451496a4b1c9ffbb0c82~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSVRfc3Vuc2hpbmU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767354999&amp;x-signature=I%2FFlobgHviOAlmaP8ofrpKJxS98%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-2">åˆ†ç‰‡åŸåˆ™</h3>
<p>(1) èƒ½ä¸åˆ†å°±ä¸åˆ†ï¼Œåšâ€œå•è¡¨ä¼˜åŒ–â€ï¼›</p>
<p>(2) åˆ†ç‰‡æ•°é‡å°½é‡å°‘ï¼Œåˆ†ç‰‡å°½é‡å‡åŒ€åˆ†å¸ƒåœ¨å¤šä¸ªæ•°æ®ç»“ç‚¹ä¸Šï¼Œå› ä¸ºä¸€ä¸ªæŸ¥è¯¢SQLè·¨åˆ†ç‰‡è¶Šå¤šï¼Œåˆ™æ€»ä½“æ€§èƒ½è¶Šå·®ï¼Œè™½ç„¶è¦å¥½äºæ‰€æœ‰æ•°æ®åœ¨ä¸€ä¸ªåˆ†ç‰‡çš„ç»“æœï¼Œåªåœ¨å¿…è¦çš„æ—¶å€™è¿›è¡Œæ‰©å®¹ï¼Œå¢åŠ åˆ†ç‰‡æ•°é‡ï¼›</p>
<p>(3) åˆ†ç‰‡è§„åˆ™éœ€è¦æ…é‡é€‰æ‹©åšå¥½æå‰è§„åˆ’ï¼Œåˆ†ç‰‡è§„åˆ™çš„é€‰æ‹©ï¼Œéœ€è¦è€ƒè™‘æ•°æ®çš„å¢é•¿æ¨¡å¼ï¼Œæ•°æ®çš„è®¿é—®æ¨¡å¼ï¼Œåˆ†ç‰‡å…³è”æ€§é—®é¢˜ï¼Œä»¥åŠåˆ†ç‰‡æ‰©å®¹é—®é¢˜ï¼Œæœ€è¿‘çš„åˆ†ç‰‡ç­–ç•¥ä¸ºèŒƒå›´åˆ†ç‰‡ï¼Œæšä¸¾åˆ†ç‰‡ï¼Œä¸€è‡´æ€§Hashåˆ†ç‰‡ï¼Œè¿™å‡ ç§åˆ†ç‰‡éƒ½æœ‰åˆ©äºæ‰©å®¹ï¼›</p>
<p>(4) å°½é‡ä¸è¦åœ¨ä¸€ä¸ªäº‹åŠ¡ä¸­çš„SQLè·¨è¶Šå¤šä¸ªåˆ†ç‰‡ï¼Œåˆ†å¸ƒå¼äº‹åŠ¡ä¸€ç›´æ˜¯ä¸ªä¸å¥½å¤„ç†çš„é—®é¢˜ï¼›</p>
<p>(5) å¯ä»¥é€šè¿‡æ•°æ®å†—ä½™å’Œè¡¨åˆ†åŒºèµ–é™ä½è·¨åº“Joinçš„å¯èƒ½ã€‚</p>
<h3 data-id="heading-3">ä¼˜åŒ–æ–¹æ¡ˆé€‰æ‹©å’Œå»ºè®®</h3>
<p>ä¸åŒä¸šåŠ¡åœºæ™¯ã€ä¸åŒæ•°æ®é‡è§„æ¨¡ä¸‹ï¼Œåº”é€‰æ‹©ä¸åŒçš„ä¼˜åŒ–æ–¹æ¡ˆï¼Œé¿å…ç›²ç›®é‡‡ç”¨æ¶æ„çº§ä¼˜åŒ–ï¼ˆå¦‚åˆ†åº“åˆ†è¡¨ï¼‰å¢åŠ ç³»ç»Ÿå¤æ‚åº¦ï¼Œåˆ†åº“åˆ†è¡¨çš„å®æ–½å»ºè®®ï¼š</p>
<ul>
<li><strong>æ•°æ®é‡ &lt; 1000ä¸‡</strong>ï¼šä¼˜å…ˆé‡‡ç”¨â€œæŸ¥è¯¢ä¼˜åŒ–+ç´¢å¼•ä¼˜åŒ–+è¡¨ç»“æ„ä¼˜åŒ–â€çš„ä½æˆæœ¬æ–¹æ¡ˆã€‚æ£€æŸ¥å¹¶ä¼˜åŒ–æ…¢æŸ¥è¯¢è¯­å¥ï¼Œè°ƒæ•´ç´¢å¼•è®¾è®¡ï¼Œè§„èŒƒè¡¨ç»“æ„ï¼Œé€šå¸¸èƒ½æ»¡è¶³æ€§èƒ½éœ€æ±‚ï¼›</li>
<li><strong>1000ä¸‡ â‰¤ æ•°æ®é‡ â‰¤ 1äº¿</strong>ï¼šé‡‡ç”¨â€œæ•°æ®å½’æ¡£+åˆ†åŒºè¡¨â€æ–¹æ¡ˆã€‚å°†å†å²æ•°æ®å½’æ¡£ï¼Œå‡å°‘æ´»è·ƒæ•°æ®é‡ï¼›é€šè¿‡åˆ†åŒºè¡¨æ‹†åˆ†æ•°æ®ï¼Œæå‡æŸ¥è¯¢å’Œå†™å…¥æ•ˆç‡ï¼›è‹¥ä¸ºè¯»å¤šå†™å°‘åœºæ™¯ï¼Œå¯æ­é…è¯»å†™åˆ†ç¦»ï¼›</li>
<li><strong>æ•°æ®é‡ â‰¥ 1äº¿æˆ–è€…å¹¶å‘æé«˜</strong>ï¼šé‡‡ç”¨â€œåˆ†åº“åˆ†è¡¨â€æ¶æ„çº§æ–¹æ¡ˆã€‚ç»“åˆä¸šåŠ¡åœºæ™¯é€‰æ‹©åˆé€‚çš„åˆ†ç‰‡é”®å’Œæ‹†åˆ†ç­–ç•¥ï¼Œä½¿ç”¨ä¸­é—´ä»¶ç®€åŒ–å®ç°ï¼›åŒæ—¶æ­é…æ•°æ®å½’æ¡£ã€è¯»å†™åˆ†ç¦»ã€ç¼“å­˜ç­‰æ–¹æ¡ˆï¼Œå…¨æ–¹ä½æå‡ç³»ç»Ÿæ€§èƒ½å’Œå¯ç”¨æ€§ã€‚</li>
</ul>
<h2 data-id="heading-4">ä¸‰ã€å¤§è¡¨ä¼˜åŒ–æ ¸å¿ƒæ€è·¯</h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3b55c19e2d19458394b62c22bd45888f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSVRfc3Vuc2hpbmU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767354999&amp;x-signature=6wrkrg6uEw3UZbEpwqNSJrfN560%3D" alt="image.png" loading="lazy"/></p>
<ul>
<li><strong>è¡¨è®¾è®¡å±‚</strong>ï¼šä»æºå¤´å‡å°‘æ•°æ®å†—ä½™ï¼Œåˆç†è®¾è®¡è¡¨ç»“æ„å’Œç´¢å¼•ï¼Œé¿å…æ•°æ®è¿‡åº¦å †ç§¯ï¼›</li>
<li><strong>æŸ¥è¯¢ä¸ç´¢å¼•å±‚</strong>ï¼šæå‡æŸ¥è¯¢æ•ˆç‡ï¼Œå‡å°‘æ— æ•ˆæ•°æ®æ‰«æï¼Œé™ä½ç´¢å¼•ç»´æŠ¤æˆæœ¬ï¼›</li>
<li><strong>æ¶æ„å’Œè¿ç»´å±‚</strong>ï¼šé€šè¿‡åˆ†åº“åˆ†è¡¨ã€è¯»å†™åˆ†ç¦»ã€æ•°æ®å½’æ¡£ç­‰æ–¹å¼ï¼Œåˆ†æ•£å•è¡¨å‹åŠ›ï¼Œæå‡ç³»ç»Ÿå¹¶å‘èƒ½åŠ›ã€‚</li>
</ul>
<h2 data-id="heading-5">å››ã€è¡¨è®¾è®¡å­—æ®µä¼˜åŒ– (ä»æºå¤´ä¸Šé¿å…å¤§è¡¨é—®é¢˜)</h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d136aa98af10476dac5c56ea277ffd40~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSVRfc3Vuc2hpbmU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767354999&amp;x-signature=RqwvRi31DwllPv8f9WooEHzAHIU%3D" alt="image.png" loading="lazy"/></p>
<ol>
<li>ä¼˜å…ˆä½¿ç”¨å ç”¨ç©ºé—´å°çš„å­—æ®µç±»å‹ã€‚ä¾‹å¦‚ï¼Œå­˜å‚¨ç”¨æˆ·IDæ—¶ï¼Œè‹¥èŒƒå›´å…è®¸ï¼Œä½¿ç”¨INTï¼ˆ4å­—èŠ‚ï¼‰è€ŒéBIGINTï¼ˆ8å­—èŠ‚ï¼‰ï¼›</li>
<li>å­˜å‚¨çŠ¶æ€ã€æ€§åˆ«æ—¶ï¼Œä½¿ç”¨TINYINTï¼ˆ1å­—èŠ‚ï¼‰è€ŒéVARCHARï¼›</li>
<li>ä½¿ç”¨æ•´æ•°æˆ–æšä¸¾ä»£æ›¿å­—ç¬¦ä¸²ç±»å‹ï¼›</li>
<li>å°½é‡ä½¿ç”¨å¤šæ—¶åŒº / å…¨çƒåŒ–çš„TIMESTAMPï¼ˆ4å­—èŠ‚ï¼‰è€ŒéDATETIMEï¼ˆ8å­—èŠ‚ï¼‰ï¼ŒåŒæ—¶TIMESTAMPå…·æœ‰è‡ªåŠ¨èµ‹å€¼ä»¥åŠâ¾ƒè‡ªåŠ¨æ›´æ–°çš„ç‰¹æ€§ï¼›</li>
<li>å•è¡¨ä¸è¦æœ‰å¤ªå¤šå­—æ®µï¼Œå»ºè®®åœ¨30ä¸ªä»¥å†…ï¼›</li>
<li>é¿å…ä½¿ç”¨NULLå­—æ®µï¼Œå¯¹äºéå¿…å¡«å­—æ®µï¼Œè®¾ç½®åˆç†çš„é»˜è®¤å€¼ï¼Œé¿å…å¤§é‡NULLå€¼å­˜å‚¨ã€‚MySQLå¯¹NULLå€¼çš„å­˜å‚¨å’ŒæŸ¥è¯¢æ•ˆç‡è¾ƒä½ï¼Œä¸”NULLå€¼æ— æ³•å‚ä¸ç´¢å¼•ï¼›</li>
<li>é¿å…ä½¿ç”¨å¤§å­—æ®µï¼Œå°½é‡é¿å…åœ¨æ ¸å¿ƒä¸šåŠ¡è¡¨ä¸­ä½¿ç”¨TEXTã€BLOBç­‰å¤§å­—æ®µã€‚è‹¥å¿…é¡»å­˜å‚¨ï¼ˆå¦‚ç”¨æˆ·å¤´åƒã€å¯Œæ–‡æœ¬å†…å®¹ï¼‰ï¼Œå¯å°†å¤§å­—æ®µæ‹†åˆ†åˆ°å•ç‹¬çš„é™„å±è¡¨ä¸­ï¼Œæ ¸å¿ƒè¡¨ä»…å­˜å‚¨å…³è”IDï¼Œå‡å°‘æ ¸å¿ƒè¡¨çš„æ•°æ®è¡Œå¤§å°ï¼Œæå‡æŸ¥è¯¢æ—¶çš„ç£ç›˜I/Oæ•ˆç‡ï¼›</li>
</ol>
<h2 data-id="heading-6">äº”ã€ç´¢å¼•ä¼˜åŒ–</h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0afbc83784fa4cb9b4cd86326ea2994e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSVRfc3Vuc2hpbmU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767354999&amp;x-signature=tKrWxHbLXcGw1X34BxxXwvcTeec%3D" alt="image.png" loading="lazy"/></p>
<ol>
<li><strong>éµå¾ªæœ€å·¦åŒ¹é…åŸåˆ™</strong>ï¼Œåˆ›å»ºè”åˆç´¢å¼•æ—¶ï¼Œå°†æŸ¥è¯¢é¢‘ç‡é«˜ã€åŒºåˆ†åº¦é«˜çš„å­—æ®µæ”¾åœ¨å‰é¢ã€‚ä¾‹å¦‚ï¼Œä¸šåŠ¡ä¸­é¢‘ç¹æŸ¥è¯¢â€œç”¨æˆ·ID+è®¢å•çŠ¶æ€â€ï¼Œåˆ™è”åˆç´¢å¼•åº”ä¸ºï¼ˆuser_id, order_statusï¼‰ï¼Œè€Œéï¼ˆorder_status, user_idï¼‰ï¼›</li>
<li><strong>æ§åˆ¶ç´¢å¼•æ•°é‡</strong>ï¼Œå•è¡¨ç´¢å¼•æ•°é‡å»ºè®®ä¸è¶…è¿‡5ä¸ªï¼Œè¿‡å¤šçš„ç´¢å¼•ä¼šå¯¼è‡´INSERTã€UPDATEã€DELETEæ“ä½œæ—¶éœ€è¦åŒæ­¥ç»´æŠ¤å¤šä¸ªç´¢å¼•ï¼Œä¸¥é‡é™ä½å†™å…¥æ€§èƒ½ã€‚å¯¹äºå¤§è¡¨ï¼Œæ¯å¢åŠ ä¸€ä¸ªç´¢å¼•ï¼Œå†™å…¥è€—æ—¶å¯èƒ½ä¼šæ˜¾è‘—å¢åŠ ï¼›</li>
<li><strong>ä½¿ç”¨è¦†ç›–ç´¢å¼•</strong>ï¼Œé’ˆå¯¹é¢‘ç¹çš„æŸ¥è¯¢åœºæ™¯ï¼Œåˆ›å»ºè¦†ç›–ç´¢å¼•ï¼Œé¿å…å›è¡¨æŸ¥è¯¢ã€‚ä¾‹å¦‚ï¼ŒæŸ¥è¯¢â€œç”¨æˆ·IDã€è®¢å•é‡‘é¢ã€è®¢å•æ—¶é—´â€æ—¶ï¼Œåˆ›å»ºè”åˆç´¢å¼•ï¼ˆuser_id, order_amount, order_timeï¼‰ï¼ŒæŸ¥è¯¢æ—¶å¯ç›´æ¥ä»ç´¢å¼•ä¸­è·å–æ‰€éœ€æ•°æ®ï¼Œæ— éœ€è®¿é—®ä¸»é”®ç´¢å¼•ï¼›</li>
<li><strong>é¿å…æ— æ•ˆç´¢å¼•</strong>ï¼Œåˆ é™¤æœªä½¿ç”¨æˆ–é‡å¤çš„ç´¢å¼•ã€‚å¯é€šè¿‡MySQLçš„æ…¢æŸ¥è¯¢æ—¥å¿—ã€sys.schema_unused_indexesè§†å›¾ï¼ˆMySQL 8.0+ï¼‰ç»Ÿè®¡ç´¢å¼•ä½¿ç”¨æƒ…å†µï¼Œæ¸…ç†æ— æ•ˆç´¢å¼•ï¼›é¿å…åˆ›å»ºä¸ä¸»é”®ç´¢å¼•é‡å¤çš„ç´¢å¼•ï¼ˆå¦‚ä¸»é”®ä¸ºidï¼Œå†åˆ›å»ºç´¢å¼•ï¼ˆidï¼‰ï¼‰ï¼›</li>
<li><strong>è€ƒè™‘åˆ†åŒºç´¢å¼•</strong>ï¼Œå¯¹äºåˆ†åŒºè¡¨ï¼Œç´¢å¼•ä¼šæŒ‰åˆ†åŒºåˆ›å»ºï¼Œæ¯ä¸ªåˆ†åŒºçš„ç´¢å¼•ä½“ç§¯æ›´å°ï¼ŒæŸ¥è¯¢æ—¶åªéœ€æ‰«æå¯¹åº”åˆ†åŒºçš„ç´¢å¼•ï¼Œæå‡æŸ¥è¯¢æ•ˆç‡ã€‚</li>
<li><strong>é¿å…æ²¡å¿…è¦ç´¢å¼•</strong>ï¼Œå€¼åˆ†å¸ƒå¾ˆç¨€å°‘çš„å­—æ®µä¸é€‚åˆå»ºç´¢å¼•ï¼Œä¾‹å¦‚"æ€§åˆ«"è¿™ç§åªæœ‰ä¸¤ä¸‰ä¸ªå€¼çš„å­—æ®µï¼›</li>
<li><strong>åˆç†åˆ›å»ºè”åˆç´¢å¼•ï¼ˆé¿å…å†—ä½™</strong>ï¼‰ï¼Œå¦‚(a,b,c) ç›¸å½“äº (a) ã€(a,b) ã€(a,b,c)ï¼›</li>
<li><strong>æ ¹æ®æŸ¥è¯¢æœ‰é’ˆå¯¹æ€§åˆ›å»ºç´¢å¼•</strong>ï¼Œè€ƒè™‘åœ¨WHEREå’ŒORDER BYå‘½ä»¤ä¸Šæ¶‰åŠçš„åˆ—å»ºç«‹ç´¢å¼•ï¼Œå¯æ ¹æ®EXPLAINæ¥æŸ¥çœ‹æ˜¯å¦ç”¨äº†ç´¢å¼•è¿˜æ˜¯å…¨è¡¨æ‰«æï¼›</li>
</ol>
<h2 data-id="heading-7">å…­ã€æŸ¥è¯¢SQLä¼˜åŒ–</h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5d605d3311d5405c9e0d2b4f4d0af175~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSVRfc3Vuc2hpbmU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767354999&amp;x-signature=%2FpU9I61Lui847swqvXbTKZqAjmI%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-8">â‘ é¿å…å…¨è¡¨æ‰«æ</h3>
<ul>
<li><strong>ç¡®ä¿æŸ¥è¯¢èµ°ç´¢å¼•</strong>ï¼šé¿å…åœ¨æŸ¥è¯¢æ¡ä»¶ä¸­å¯¹ç´¢å¼•å­—æ®µè¿›è¡Œå‡½æ•°æ“ä½œï¼ˆå¦‚SUBSTRã€DATE_FORMATï¼‰ã€éšå¼ç±»å‹è½¬æ¢ï¼ˆå¦‚å°†VARCHARç±»å‹çš„å­—æ®µä¸INTå€¼æ¯”è¾ƒï¼‰ï¼Œè¿™äº›æ“ä½œä¼šå¯¼è‡´ç´¢å¼•å¤±æ•ˆï¼Œè§¦å‘å…¨è¡¨æ‰«æã€‚ä¾‹å¦‚ï¼Œé¿å…â€œWHERE SUBSTR(user_phone, 1, 3) = '138'â€ï¼Œå¯æ”¹ä¸ºâ€œWHERE user_phone LIKE '138%'â€ï¼ˆå‰ææ˜¯user_phoneå­—æ®µæœ‰ç´¢å¼•ï¼‰ï¼›</li>
<li>**é¿å…ä½¿ç”¨æ¨¡ç³ŠæŸ¥è¯¢å‰ç¼€%ï¼š<strong>æ¨¡ç³ŠæŸ¥è¯¢â€œLIKE '%xxx'â€æˆ–â€œLIKE '%xxx%'â€ä¼šå¯¼è‡´ç´¢å¼•å¤±æ•ˆï¼Œè§¦å‘å…¨è¡¨æ‰«æã€‚è‹¥ä¸šåŠ¡éœ€æ¨¡ç³ŠæŸ¥è¯¢ï¼Œå¯è€ƒè™‘ä½¿</strong>ç”¨Elasticsearchç­‰æœç´¢å¼•æ“æ›¿ä»£ï¼Œæˆ–é€šè¿‡ä¸šåŠ¡è°ƒæ•´æ”¹ä¸ºâ€œLIKE 'xxx%'â€ï¼›</li>
<li>**é¿å…ä½¿ç”¨ORæ¡ä»¶ï¼ˆæ— ç´¢å¼•æ—¶ï¼‰ï¼šå½“ORæ¡ä»¶ä¸­çš„å­—æ®µæ— ç´¢å¼•æ—¶ï¼Œä¼šè§¦å‘å…¨è¡¨æ‰«æã€‚å¯å°†ORæ”¹ä¸ºUNION ALLï¼ˆè‹¥ç»“æœæ— é‡å¤ï¼‰ï¼Œä¸”ç¡®ä¿æ¯ä¸ªæŸ¥è¯¢åˆ†æ”¯éƒ½èµ°ç´¢å¼•ã€‚ä¾‹å¦‚ï¼Œâ€œWHERE user_id = 1 OR order_id = 100â€å¯æ”¹ä¸ºâ€œ(SELECT * FROM order WHERE user_id = 1) UNION ALL (SELECT * FROM order WHERE order_id = 100)â€ã€‚</li>
</ul>
<h3 data-id="heading-9">â‘¡ä¼˜åŒ–æŸ¥è¯¢è¯­å¥ç»“æ„</h3>
<ul>
<li><strong>åªæŸ¥è¯¢æ‰€éœ€å­—æ®µ</strong>ï¼šé¿å…ä½¿ç”¨SELECT *ï¼ŒåªæŸ¥è¯¢ä¸šåŠ¡éœ€è¦çš„å­—æ®µã€‚ä¸€æ–¹é¢å‡å°‘æ•°æ®ä¼ è¾“é‡ï¼Œå¦ä¸€æ–¹é¢è‹¥æŸ¥è¯¢å­—æ®µå¯é€šè¿‡è¦†ç›–ç´¢å¼•è·å–ï¼Œå¯é¿å…å›</li>
<li><strong>æ§åˆ¶JOINè¡¨æ•°é‡</strong>ï¼šJOINè¡¨æ•°é‡è¶Šå¤šï¼ŒæŸ¥è¯¢å¤æ‚åº¦è¶Šé«˜ï¼Œæ€§èƒ½è¶Šå·®ã€‚å¤§è¡¨æŸ¥è¯¢ä¸­ï¼ŒJOINè¡¨æ•°é‡å»ºè®®ä¸è¶…è¿‡3ä¸ªã€‚å¯¹äºå¤æ‚æŸ¥è¯¢ï¼Œå¯é€šè¿‡åˆ†æ­¥éª¤æŸ¥è¯¢ã€ä¸­é—´è¡¨å­˜å‚¨ç»“æœç­‰æ–¹å¼ç®€åŒ–ï¼›</li>
<li><strong>é¿å…ä½¿ç”¨å­æŸ¥è¯¢ï¼ˆå°¤å…¶æ˜¯ç›¸å…³å­æŸ¥è¯¢ï¼‰</strong>ï¼šç›¸å…³å­æŸ¥è¯¢ä¼šå¯¼è‡´MySQLé‡å¤æ‰§è¡Œå­æŸ¥è¯¢è¯­å¥ï¼Œæ•ˆç‡æä½ã€‚å¯å°†å­æŸ¥è¯¢æ”¹ä¸ºJOINæŸ¥è¯¢ï¼Œæˆ–é€šè¿‡ä¸´æ—¶è¡¨å­˜å‚¨å­æŸ¥è¯¢ç»“æœï¼›</li>
<li><strong>åˆç†ä½¿ç”¨LIMIT</strong>ï¼šå¯¹äºåˆ†é¡µæŸ¥è¯¢ï¼Œä½¿ç”¨LIMITæ§åˆ¶è¿”å›ç»“æœæ•°é‡ã€‚ä½†éœ€æ³¨æ„ï¼Œå½“åˆ†é¡µé¡µç è¾ƒå¤§æ—¶ï¼ˆå¦‚LIMIT 100000, 20ï¼‰ï¼ŒMySQLä¼šæ‰«æå‰100020æ¡æ•°æ®å†ä¸¢å¼ƒå‰100000æ¡ï¼Œæ•ˆç‡è¾ƒä½ã€‚å¯é€šè¿‡â€œç´¢å¼•+ä¸»é”®â€ä¼˜åŒ–ï¼Œä¾‹å¦‚â€œWHERE id &gt; 100000 LIMIT 20â€ï¼ˆå‰ææ˜¯idä¸ºè‡ªå¢ä¸»é”®ï¼Œä¸”æŸ¥è¯¢æ¡ä»¶å¯åŸºäºidè¿‡æ»¤ï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-10">â‘¢ä¼˜åŒ–äº‹åŠ¡å’Œé”</h3>
<ul>
<li><strong>æ§åˆ¶äº‹åŠ¡ç²’åº¦</strong>ï¼šé¿å…é•¿äº‹åŠ¡ï¼Œé•¿äº‹åŠ¡ä¼šå ç”¨é”èµ„æºï¼Œå¯¼è‡´å…¶ä»–æ“ä½œå‡ºç°é”ç­‰å¾…ã€‚å¤§è¡¨æ“ä½œä¸­ï¼Œå°½é‡å°†äº‹åŠ¡æ‹†åˆ†ä¸ºçŸ­äº‹åŠ¡ï¼ŒåªåŒ…å«å¿…è¦çš„SQLè¯­å¥ï¼›</li>
<li><strong>ä½¿ç”¨åˆç†çš„éš”ç¦»çº§åˆ«</strong>ï¼šæ ¹æ®ä¸šåŠ¡éœ€æ±‚é€‰æ‹©æœ€ä½çš„éš”ç¦»çº§åˆ«ã€‚ä¾‹å¦‚ï¼Œè‹¥ä¸šåŠ¡å…è®¸è„è¯»ï¼Œå¯ä½¿ç”¨READ UNCOMMITTEDï¼›å¤§å¤šæ•°ä¸šåŠ¡å¯ä½¿ç”¨READ COMMITTEDï¼Œé¿å…REPEATABLE READå¸¦æ¥çš„é—´éš™é”é—®é¢˜ï¼Œå‡å°‘é”ç­‰å¾…ï¼›</li>
<li><strong>é¿å…è¡Œé”å‡çº§ä¸ºè¡¨é”</strong>ï¼šMySQLä¸­ï¼Œè‹¥æŸ¥è¯¢æ¡ä»¶æœªèµ°ç´¢å¼•ï¼Œä¼šè§¦å‘å…¨è¡¨æ‰«æï¼Œæ­¤æ—¶è¡Œé”ä¼šå‡çº§ä¸ºè¡¨é”ï¼Œå¯¼è‡´å…¶ä»–æ“ä½œæ— æ³•å¹¶å‘æ‰§è¡Œã€‚éœ€ç¡®ä¿æ›´æ–°ã€åˆ é™¤æ“ä½œçš„æŸ¥è¯¢æ¡ä»¶èµ°ç´¢å¼•ï¼Œé¿å…è¡¨é”ã€‚</li>
</ul>
<h3 data-id="heading-11">â‘£å…¶ä»–</h3>
<ul>
<li>ä¸åšåˆ—è¿ç®—ï¼šSELECT id WHERE age + 1 = 10ï¼Œä»»ä½•å¯¹åˆ—çš„æ“ä½œéƒ½å°†å¯¼è‡´è¡¨æ‰«æï¼Œå®ƒåŒ…æ‹¬æ•°æ®åº“æ•™ç¨‹å‡½æ•°ã€è®¡ç®—è¡¨è¾¾å¼ç­‰ç­‰ï¼ŒæŸ¥è¯¢æ—¶è¦å°½å¯èƒ½å°†æ“ä½œç§»è‡³ç­‰å·å³è¾¹ï¼›</li>
<li>SQLè¯­å¥å°½å¯èƒ½ç®€å•ï¼šä¸€æ¡SQLåªèƒ½åœ¨ä¸€ä¸ªcpuè¿ç®—ï¼›å¤§è¯­å¥æ‹†å°è¯­å¥ï¼Œå‡å°‘é”æ—¶é—´ï¼›ä¸€æ¡å¤§SQLå¯ä»¥å µæ­»æ•´ä¸ªåº“ï¼›</li>
<li>ORæ”¹å†™æˆINï¼šORçš„æ•ˆç‡æ˜¯nçº§åˆ«ï¼ŒINçš„æ•ˆç‡æ˜¯log(n)çº§åˆ«ï¼Œinçš„ä¸ªæ•°å»ºè®®æ§åˆ¶åœ¨200ä»¥å†…ï¼›</li>
<li>ä¸ç”¨å‡½æ•°å’Œè§¦å‘å™¨ï¼Œåœ¨åº”ç”¨ç¨‹åºå®ç°ï¼›</li>
<li>æ¨¡ç³ŠæŸ¥è¯¢é¿å…å·¦æ¨¡ç³Š%xxxå¼æŸ¥è¯¢ï¼›</li>
<li>ä½¿ç”¨åŒç±»å‹è¿›è¡Œæ¯”è¾ƒï¼Œæ¯”å¦‚ç”¨'123'å’Œ'123'æ¯”ï¼Œ123å’Œ123æ¯”ï¼›</li>
<li>å°½é‡é¿å…åœ¨WHEREå­å¥ä¸­ä½¿ç”¨!=æˆ–&lt;&gt;æ“ä½œç¬¦ï¼Œå¦åˆ™å°†å¼•æ“æ”¾å¼ƒä½¿ç”¨ç´¢å¼•è€Œè¿›è¡Œå…¨è¡¨æ‰«æï¼›</li>
<li>å¯¹äºè¿ç»­æ•°å€¼ï¼Œä½¿ç”¨BETWEENä¸ç”¨INï¼šSELECT id FROM t WHERE num BETWEEN 1 AND 5ï¼›</li>
<li>åˆ—è¡¨æ•°æ®ä¸è¦æ‹¿å…¨è¡¨ï¼Œè¦ä½¿ç”¨LIMITæ¥åˆ†é¡µï¼Œæ¯é¡µæ•°é‡ä¹Ÿä¸è¦å¤ªå¤§ã€‚</li>
</ul>
<h2 data-id="heading-12">ä¸ƒã€æ•°æ®å½’æ¡£(å‡å°‘æ´»è·ƒæ•°æ®é‡)</h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/79c2e99d0edb402c89f89e19c933feca~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSVRfc3Vuc2hpbmU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767354999&amp;x-signature=aSWXigt4xEoEE8PvJ4axdZHfWTE%3D" alt="image.png" loading="lazy"/></p>
<p>æ•°æ®å½’æ¡£æ˜¯å°†å†å²æ•°æ®è¿ç§»åˆ°å•ç‹¬çš„å­˜å‚¨ä»‹è´¨æˆ–è¡¨ä¸­ï¼Œå‡å°‘æ ¸å¿ƒè¡¨çš„æ´»è·ƒæ•°æ®é‡ã€‚ å¤§è¡¨ä¸­å¾€å¾€å­˜åœ¨å¤§é‡å†å²æ•°æ®ï¼ˆå¦‚3ä¸ªæœˆå‰çš„è®¢å•ã€1å¹´å‰çš„æ—¥å¿—ï¼‰ï¼Œè¿™äº›æ•°æ®è®¿é—®é¢‘ç‡æä½ï¼Œä½†å ç”¨å¤§é‡å­˜å‚¨ç©ºé—´ï¼Œå½±å“æ´»è·ƒæ•°æ®çš„æŸ¥è¯¢å’Œå†™å…¥æ€§èƒ½ã€‚</p>
<ul>
<li>
<p>ç¡®å®šå½’æ¡£æ¡ä»¶ï¼šæ ¹æ®ä¸šåŠ¡åœºæ™¯ç¡®å®šå½’æ¡£çš„æ—¶é—´èŒƒå›´æˆ–æ•°æ®çŠ¶æ€ã€‚ä¾‹å¦‚ï¼Œè®¢å•è¡¨ä¸­å½’æ¡£3ä¸ªæœˆå‰çš„å·²å®Œæˆè®¢å•ï¼›æ—¥å¿—è¡¨ä¸­å½’æ¡£1å¹´å‰çš„æ‰€æœ‰æ—¥å¿—ï¼›</p>
</li>
<li>
<p><strong>é€‰æ‹©å½’æ¡£ç›®æ ‡</strong></p>
<ul>
<li>åŒåº“ä¸åŒè¡¨ï¼šå°†å†å²æ•°æ®è¿ç§»åˆ°åŒåº“çš„å½’æ¡£è¡¨ä¸­ï¼ˆå¦‚orderè¡¨å½’æ¡£åˆ°order_hist_202401ï¼‰ï¼Œä¾¿äºåç»­æŸ¥è¯¢å†å²æ•°æ®æ—¶ç›´æ¥å…³è”ï¼›</li>
<li>å¼‚åº“å­˜å‚¨ï¼šå°†å†å²æ•°æ®è¿ç§»åˆ°ç‹¬ç«‹çš„å½’æ¡£æ•°æ®åº“ï¼ˆå¦‚MySQLä»åº“ã€Hiveã€ClickHouseç­‰ï¼‰ï¼Œå‡å°‘å¯¹æ ¸å¿ƒåº“çš„èµ„æºå ç”¨ï¼›å¯¹äºæµ·é‡å†å²æ•°æ®ï¼Œå¯ä½¿ç”¨ä½æˆæœ¬çš„å­˜å‚¨ä»‹è´¨ï¼ˆå¦‚å¯¹è±¡å­˜å‚¨ï¼‰ï¼›</li>
<li>å†·çƒ­æ•°æ®åˆ†ç¦»ï¼šæ ¸å¿ƒè¡¨åªä¿ç•™çƒ­ç‚¹æ•°æ®ï¼ˆå¦‚è¿‘1ä¸ªæœˆï¼‰ï¼Œå†å²æ•°æ®è¿ç§»åˆ°å†·å­˜å‚¨ï¼ŒæŸ¥è¯¢å†å²æ•°æ®æ—¶é€šè¿‡ä¸“é—¨çš„æœåŠ¡æˆ–æ¥å£è®¿é—®ã€‚</li>
</ul>
</li>
<li>
<p><strong>å½’æ¡£æ‰§è¡Œæ–¹å¼</strong></p>
<ul>
<li>å®šæ—¶ä»»åŠ¡å½’æ¡£ï¼šé€šè¿‡xxljobã€crontabã€Airflowç­‰å·¥å…·å®šæ—¶æ‰§è¡Œå½’æ¡£è„šæœ¬ï¼Œé‡‡ç”¨â€œåˆ†é¡µæŸ¥è¯¢+æ‰¹é‡æ’å…¥+æ‰¹é‡åˆ é™¤â€çš„æ–¹å¼ï¼Œé¿å…ä¸€æ¬¡æ€§æ“ä½œå¤§é‡æ•°æ®å¯¼è‡´é”ç­‰å¾…æˆ–äº‹åŠ¡è¶…æ—¶ï¼›</li>
<li>åœ¨çº¿å½’æ¡£å·¥å…·ï¼šä½¿ç”¨pt-archiverï¼ˆPercona Toolkitï¼‰ç­‰ä¸“ä¸šå·¥å…·ï¼Œæ”¯æŒå¢é‡å½’æ¡£ã€å¹¶è¡Œå½’æ¡£ï¼Œä¸”å¯¹ä¸šåŠ¡å½±å“è¾ƒå°ã€‚ä¾‹å¦‚ï¼Œpt-archiverå¯é€šè¿‡--limitå‚æ•°æ§åˆ¶æ¯æ¬¡å½’æ¡£çš„è¡Œæ•°ï¼Œ--sleepå‚æ•°æ§åˆ¶å½’æ¡£é—´éš”ï¼Œå‡å°‘å¯¹æ ¸å¿ƒè¡¨çš„æ€§èƒ½å½±å“ï¼›</li>
</ul>
</li>
</ul>
<h2 data-id="heading-13">å…«ã€åˆ†åŒºè¡¨è®¾è®¡ ï¼ˆæ‹†åˆ†æ•°æ®åˆ°å¤šä¸ªç‰©ç†åˆ†åŒºï¼‰</h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/842fb4a2a8f548d78a5514c502f356ea~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSVRfc3Vuc2hpbmU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767354999&amp;x-signature=4pCeYmxE3raYMUCwJWkCHj6xDYw%3D" alt="image.png" loading="lazy"/></p>
<p>åˆ†åŒºè¡¨æ˜¯MySQLæä¾›çš„ä¸€ç§è¡¨çº§ä¼˜åŒ–æ–¹æ¡ˆï¼Œå°†ä¸€ä¸ªå¤§è¡¨åœ¨é€»è¾‘ä¸Šæ‹†åˆ†ä¸ºå¤šä¸ªå°è¡¨ï¼Œç‰©ç†ä¸Šå­˜å‚¨ä¸ºå¤šä¸ªç‹¬ç«‹çš„æ–‡ä»¶ã€‚æŸ¥è¯¢æ—¶ï¼ŒMySQLåªéœ€æ‰«æå¯¹åº”çš„åˆ†åŒºï¼Œæ— éœ€æ‰«æå…¨è¡¨ï¼Œä»è€Œæå‡æŸ¥è¯¢æ•ˆç‡ï¼›åŒæ—¶ï¼Œåˆ†åŒºè¡¨ä¾¿äºæ•°æ®å½’æ¡£ï¼ˆç›´æ¥åˆ é™¤æ•´ä¸ªåˆ†åŒºï¼‰ã€å¤‡ä»½æ¢å¤ï¼ˆå•ç‹¬å¤‡ä»½æŸä¸ªåˆ†åŒºï¼‰ã€‚</p>
<ul>
<li>
<p><strong>åˆ†åŒºç±»å‹é€‰æ‹©</strong></p>
<ul>
<li>MySQLæ”¯æŒå¤šç§åˆ†åŒºç±»å‹ï¼Œéœ€æ ¹æ®ä¸šåŠ¡åœºæ™¯é€‰æ‹©ï¼š
<ul>
<li>èŒƒå›´åˆ†åŒºï¼ˆRANGE Partitionï¼‰ï¼šæŒ‰è¿ç»­çš„èŒƒå›´åˆ’åˆ†åˆ†åŒºï¼Œé€‚ç”¨äºæŒ‰æ—¶é—´ã€IDç­‰æœ‰åºå­—æ®µæ‹†åˆ†çš„åœºæ™¯ï¼ˆå¦‚è®¢å•è¡¨ã€æ—¥å¿—è¡¨ï¼‰ã€‚ä¾‹å¦‚ï¼Œè®¢å•è¡¨æŒ‰åˆ›å»ºæ—¶é—´åˆ†åŒºï¼Œæ¯ä¸ªåˆ†åŒºå­˜å‚¨1ä¸ªæœˆçš„æ•°æ®ï¼›ç”¨æˆ·è¡¨æŒ‰ç”¨æˆ·IDåˆ†åŒºï¼Œæ¯ä¸ªåˆ†åŒºå­˜å‚¨100ä¸‡ç”¨æˆ·çš„æ•°æ®ã€‚èŒƒå›´åˆ†åŒºæ˜¯æœ€å¸¸ç”¨çš„åˆ†åŒºç±»å‹ï¼Œä¾¿äºæ•°æ®å½’æ¡£ï¼ˆç›´æ¥åˆ é™¤æ—§åˆ†åŒºï¼‰ï¼›</li>
<li>åˆ—è¡¨åˆ†åŒºï¼ˆList Partitionï¼‰ï¼šæŒ‰ç¦»æ•£çš„å€¼åˆ—è¡¨åˆ’åˆ†åˆ†åŒºï¼Œé€‚ç”¨äºæ•°æ®çŠ¶æ€å›ºå®šçš„åœºæ™¯ï¼ˆå¦‚è®¢å•çŠ¶æ€ã€ç”¨æˆ·æ‰€å±åœ°åŒºï¼‰ã€‚ä¾‹å¦‚ï¼Œè®¢å•è¡¨æŒ‰è®¢å•çŠ¶æ€åˆ†åŒºï¼Œåˆ†ä¸ºâ€œå¾…æ”¯ä»˜â€â€œå·²å®Œæˆâ€â€œå·²å–æ¶ˆâ€ä¸‰ä¸ªåˆ†åŒºï¼Œ æ ¸é”€è¡¨å¯ä»¥æŒ‰æ ¸é”€çŠ¶æ€åˆ†åŒºï¼Œåˆ†ä¸ºâ€œæœªæ ¸é”€â€ã€â€œå·²æ ¸é”€â€ã€â€œå·²é€€æ¬¾â€ï¼›</li>
<li>å“ˆå¸Œåˆ†åŒºï¼ˆHash Partitionï¼‰ï¼šæŒ‰å­—æ®µçš„å“ˆå¸Œå€¼åˆ’åˆ†åˆ†åŒºï¼Œé€‚ç”¨äºæ•°æ®å‡åŒ€åˆ†å¸ƒã€æ— æ˜æ˜¾èŒƒå›´æˆ–åˆ—è¡¨ç‰¹å¾çš„åœºæ™¯ã€‚ä¾‹å¦‚ï¼Œå°†ç”¨æˆ·è¡¨æŒ‰ç”¨æˆ·IDå“ˆå¸Œåˆ†åŒºï¼Œç¡®ä¿æ¯ä¸ªåˆ†åŒºçš„æ•°æ®é‡ç›¸å¯¹å‡è¡¡ï¼›ä½†å“ˆå¸Œåˆ†åŒºä¸ä¾¿äºæ•°æ®å½’æ¡£ï¼›</li>
<li>å¤åˆåˆ†å¸ƒï¼ˆComposite Partitionï¼‰ï¼šç»“åˆä¸¤ç§åˆ†åŒºç±»å‹ï¼ˆå¦‚RANGE-HASHã€RANGE-LISTï¼‰ï¼Œé€‚ç”¨äºå¤æ‚åœºæ™¯ã€‚ä¾‹å¦‚ï¼Œè®¢å•è¡¨å…ˆæŒ‰åˆ›å»ºæ—¶é—´èŒƒå›´åˆ†åŒºï¼Œæ¯ä¸ªèŒƒå›´åˆ†åŒºå†…å†æŒ‰è®¢å•çŠ¶æ€åˆ—è¡¨åˆ†åŒºã€‚</li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>åˆ†åŒºè¡¨ä½¿ç”¨æ³¨æ„äº‹é¡¹</strong></p>
<ul>
<li>åˆ†åŒºé”®é€‰æ‹©ï¼šåˆ†åŒºé”®éœ€ä¸æŸ¥è¯¢æ¡ä»¶é«˜åº¦ç›¸å…³ï¼Œç¡®ä¿æŸ¥è¯¢æ—¶èƒ½ç²¾å‡†å®šä½åˆ°å°‘æ•°å‡ ä¸ªåˆ†åŒºï¼ˆå³â€œåˆ†åŒºè£å‰ªâ€ï¼‰ã€‚ä¾‹å¦‚ï¼Œè‹¥è®¢å•è¡¨çš„æŸ¥è¯¢å¤šåŸºäºåˆ›å»ºæ—¶é—´ï¼Œåˆ™åˆ†åŒºé”®é€‰æ‹©åˆ›å»ºæ—¶é—´ï¼›è‹¥æŸ¥è¯¢å¤šåŸºäºç”¨æˆ·IDï¼Œåˆ™åˆ†åŒºé”®é€‰æ‹©ç”¨æˆ·IDï¼›</li>
<li>æ§åˆ¶åˆ†åŒºæ•°é‡ï¼šåˆ†åŒºæ•°é‡å¹¶éè¶Šå¤šè¶Šå¥½ï¼Œè¿‡å¤šçš„åˆ†åŒºä¼šå¢åŠ MySQLçš„å…ƒæ•°æ®ç®¡ç†æˆæœ¬ï¼Œå¯¼è‡´æŸ¥è¯¢æ—¶åˆ†åŒºè£å‰ªæ•ˆç‡ä¸‹é™ã€‚ä¸€èˆ¬å»ºè®®å•è¡¨åˆ†åŒºæ•°é‡ä¸è¶…è¿‡100ä¸ªï¼›</li>
<li>é¿å…è·¨åˆ†åŒºæŸ¥è¯¢ï¼šè·¨åˆ†åŒºæŸ¥è¯¢ï¼ˆå¦‚æŸ¥è¯¢å¤šä¸ªåˆ†åŒºçš„æ•°æ®ï¼‰ä¼šå¯¼è‡´MySQLæ‰«æå¤šä¸ªåˆ†åŒºï¼Œæ€§èƒ½å¯èƒ½ä¸éåˆ†åŒºè¡¨ç›¸å½“ç”šè‡³æ›´å·®ã€‚éœ€é€šè¿‡ä¸šåŠ¡ä¼˜åŒ–é¿å…è·¨åˆ†åŒºæŸ¥è¯¢ï¼Œæˆ–é€šè¿‡ç´¢å¼•ä¼˜åŒ–æå‡è·¨åˆ†åŒºæŸ¥è¯¢æ•ˆç‡ï¼›</li>
<li>åˆ†åŒºè¡¨é™åˆ¶ï¼šMySQL 5.7åŠä»¥ä¸‹ç‰ˆæœ¬ä¸­ï¼Œåˆ†åŒºè¡¨ä¸æ”¯æŒå¤–é”®ï¼›æŸäº›å­˜å‚¨å¼•æ“ï¼ˆå¦‚MyISAMï¼‰å¯¹åˆ†åŒºè¡¨çš„æ”¯æŒæœ‰é™ï¼Œå»ºè®®ä½¿ç”¨InnoDBå¼•æ“ï¼›åˆ†åŒºè¡¨çš„ç´¢å¼•æ˜¯æŒ‰åˆ†åŒºåˆ›å»ºçš„ï¼Œéœ€ç¡®ä¿æ¯ä¸ªåˆ†åŒºçš„ç´¢å¼•è®¾è®¡åˆç†ã€‚</li>
</ul>
</li>
</ul>
<h2 data-id="heading-14">ä¹ã€åˆ†åº“åˆ†è¡¨ (æ¶æ„çº§æ‹†åˆ†çªç ´å•åº“å•è¡¨é™åˆ¶)</h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f93e09c6261f440cb107a7cd5cf42968~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSVRfc3Vuc2hpbmU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767354999&amp;x-signature=Xmr9Vg8C5JYPppyoOE2md5X36TE%3D" alt="image.png" loading="lazy"/></p>
<ul>
<li>
<p><strong>æ ¸å¿ƒæ¦‚å¿µ</strong></p>
<ul>
<li>æ°´å¹³æ‹†åˆ†ï¼šå°†åŒä¸€ä¸ªè¡¨çš„æ•°æ®æŒ‰è¡Œæ‹†åˆ†åˆ°å¤šä¸ªè¡¨ä¸­ï¼Œæ¯ä¸ªè¡¨çš„ç»“æ„ç›¸åŒã€‚ä¾‹å¦‚ï¼Œå°†è®¢å•è¡¨æŒ‰ç”¨æˆ·IDå“ˆå¸Œæ‹†åˆ†åˆ°10ä¸ªè¡¨ä¸­ï¼Œæ¯ä¸ªè¡¨å­˜å‚¨10%çš„ç”¨æˆ·è®¢å•æ•°æ®ã€‚æ°´å¹³æ‹†åˆ†æ˜¯åˆ†åº“åˆ†è¡¨çš„ä¸»æµæ–¹å¼ï¼Œèƒ½æœ‰æ•ˆçªç ´å•è¡¨æ•°æ®é‡é™åˆ¶ï¼›</li>
<li>å‚ç›´æ‹†åˆ†ï¼šå°†åŒä¸€ä¸ªè¡¨çš„æ•°æ®æŒ‰åˆ—æ‹†åˆ†åˆ°å¤šä¸ªè¡¨ä¸­ï¼Œæ¯ä¸ªè¡¨å­˜å‚¨éƒ¨åˆ†å­—æ®µã€‚ä¾‹å¦‚ï¼Œå°†ç”¨æˆ·è¡¨æ‹†åˆ†ä¸ºç”¨æˆ·åŸºæœ¬ä¿¡æ¯è¡¨ï¼ˆå­˜å‚¨IDã€å§“åã€æ‰‹æœºå·ç­‰æ ¸å¿ƒå­—æ®µï¼‰å’Œç”¨æˆ·è¯¦æƒ…è¡¨ï¼ˆå­˜å‚¨åœ°å€ã€ç®€ä»‹ç­‰å¤§å­—æ®µï¼‰ï¼Œæ ¸å¿ƒè¡¨æ•°æ®é‡å°ï¼ŒæŸ¥è¯¢æ•ˆç‡é«˜ï¼›</li>
<li>åˆ†åº“ï¼šå°†æ‹†åˆ†åçš„è¡¨åˆ†å¸ƒåˆ°å¤šä¸ªæ•°æ®åº“ä¸­ï¼Œé¿å…å•åº“çš„CPUã€å†…å­˜ã€ç£ç›˜I/Oèµ„æºç“¶é¢ˆã€‚ä¾‹å¦‚ï¼Œå°†10ä¸ªè®¢å•åˆ†è¡¨åˆ†å¸ƒåˆ°2ä¸ªæ•°æ®åº“ä¸­ï¼Œæ¯ä¸ªæ•°æ®åº“å­˜å‚¨5ä¸ªåˆ†è¡¨ï¼›</li>
<li>åˆ†ç‰‡é”®ï¼šç”¨äºæ‹†åˆ†æ•°æ®çš„å­—æ®µï¼ˆå¦‚ç”¨æˆ·IDã€è®¢å•IDã€åˆ›å»ºæ—¶é—´ï¼‰ï¼Œåˆ†ç‰‡é”®çš„é€‰æ‹©ç›´æ¥å½±å“åˆ†åº“åˆ†è¡¨çš„æ•ˆæœï¼Œéœ€ç¡®ä¿æ•°æ®å‡åŒ€åˆ†å¸ƒã€æŸ¥è¯¢èƒ½ç²¾å‡†å®šä½åˆ†ç‰‡ã€‚</li>
</ul>
</li>
<li>
<p><strong>åˆ†åº“åˆ†è¡¨ç­–ç•¥</strong></p>
</li>
<li>
<p>æ°´å¹³æ‹†åˆ†</p>
<ul>
<li>èŒƒå›´æ‹†åˆ†ï¼šæŒ‰åˆ†ç‰‡é”®çš„èŒƒå›´æ‹†åˆ†æ•°æ®ï¼Œå¦‚æŒ‰è®¢å•åˆ›å»ºæ—¶é—´æ‹†åˆ†ï¼Œæ¯ä¸ªåˆ†ç‰‡å­˜å‚¨1ä¸ªæœˆçš„æ•°æ®ï¼›æŒ‰ç”¨æˆ·IDæ‹†åˆ†ï¼Œæ¯ä¸ªåˆ†ç‰‡å­˜å‚¨100ä¸‡ç”¨æˆ·çš„æ•°æ®ã€‚èŒƒå›´æ‹†åˆ†ä¾¿äºæ•°æ®å½’æ¡£ï¼ˆç›´æ¥åˆ é™¤æ—§åˆ†ç‰‡ï¼‰ï¼Œä½†å¯èƒ½å‡ºç°æ•°æ®çƒ­ç‚¹ï¼ˆå¦‚æœ€æ–°æœˆä»½çš„è®¢å•åˆ†ç‰‡è®¿é—®é¢‘ç‡æé«˜ï¼‰ï¼›</li>
<li>å“ˆå¸Œæ‹†åˆ†ï¼šæŒ‰åˆ†ç‰‡é”®çš„å“ˆå¸Œå€¼å–æ¨¡æ‹†åˆ†æ•°æ®ï¼Œå¦‚æŒ‰ç”¨æˆ·ID % 10æ‹†åˆ†åˆ°10ä¸ªåˆ†ç‰‡ã€‚å“ˆå¸Œæ‹†åˆ†èƒ½ç¡®ä¿æ•°æ®å‡åŒ€åˆ†å¸ƒï¼Œé¿å…çƒ­ç‚¹åˆ†ç‰‡ï¼Œä½†ä¸ä¾¿äºæ•°æ®å½’æ¡£ï¼ŒæŸ¥è¯¢å†å²æ•°æ®æ—¶å¯èƒ½éœ€è¦è®¿é—®å¤šä¸ªåˆ†ç‰‡ï¼›</li>
<li>ä¸€è‡´æ€§å“ˆå¸Œæ‹†åˆ†ï¼šåœ¨å“ˆå¸Œæ‹†åˆ†çš„åŸºç¡€ä¸Šï¼Œé€šè¿‡ä¸€è‡´æ€§å“ˆå¸Œç®—æ³•å‡å°‘åˆ†ç‰‡æ‰©å®¹æ—¶çš„æ•°æ®è¿ç§»é‡ã€‚é€‚ç”¨äºä¸šåŠ¡æ•°æ®é‡æŒç»­å¢é•¿ã€éœ€è¦é¢‘ç¹æ‰©å®¹çš„åœºæ™¯ã€‚</li>
</ul>
</li>
<li>
<p>å‚ç›´æ‹†åˆ†</p>
<ul>
<li>æŒ‰å­—æ®µè®¿é—®é¢‘ç‡æ‹†åˆ†ï¼šå°†é«˜é¢‘è®¿é—®çš„æ ¸å¿ƒå­—æ®µï¼ˆå¦‚ç”¨æˆ·IDã€å§“åã€è®¢å•é‡‘é¢ï¼‰æ”¾åœ¨ä¸»è¡¨ï¼Œä½é¢‘è®¿é—®çš„å­—æ®µï¼ˆå¦‚ç”¨æˆ·ç®€ä»‹ã€è®¢å•å¤‡æ³¨ï¼‰æ”¾åœ¨ä»è¡¨ï¼›</li>
<li>æŒ‰å­—æ®µç±»å‹æ‹†åˆ†ï¼šå°†å¤§å­—æ®µï¼ˆTEXTã€BLOBï¼‰æ‹†åˆ†åˆ°å•ç‹¬çš„è¡¨ä¸­ï¼Œä¸»è¡¨ä»…å­˜å‚¨å…³è”IDï¼Œå‡å°‘ä¸»è¡¨çš„æ•°æ®è¡Œå¤§å°ï¼Œæå‡æŸ¥è¯¢æ•ˆç‡ã€‚</li>
</ul>
</li>
<li>
<p><strong>åˆ†åº“åˆ†è¡¨å®ç°æ–¹å¼</strong></p>
<ul>
<li>
<p>å®¢æˆ·ç«¯åˆ†ç‰‡</p>
<ul>
<li>åœ¨åº”ç”¨ç¨‹åºä¸­ç›´æ¥å®ç°åˆ†åº“åˆ†è¡¨é€»è¾‘ï¼Œé€šè¿‡ä»£ç æ§åˆ¶æ•°æ®çš„å†™å…¥å’ŒæŸ¥è¯¢åˆ†ç‰‡ã€‚ä¼˜ç‚¹æ˜¯çµæ´»æ€§é«˜ï¼Œç¼ºç‚¹æ˜¯å¼€å‘æˆæœ¬é«˜ï¼Œéœ€ç»´æŠ¤å¤§é‡åˆ†ç‰‡é€»è¾‘ä»£ç ï¼Œåç»­æ‰©å®¹ã€è¿ç§»å›°éš¾ï¼›</li>
</ul>
</li>
<li>
<p>ä¸­é—´ä»¶åˆ†ç‰‡</p>
<ul>
<li>ä½¿ç”¨ä¸“ä¸šçš„åˆ†åº“åˆ†è¡¨ä¸­é—´ä»¶ï¼ˆå¦‚Sharding-JDBCã€MyCatã€TDSQLï¼‰ï¼Œä¸­é—´ä»¶å°è£…äº†åˆ†ç‰‡é€»è¾‘ï¼Œåº”ç”¨ç¨‹åºé€šè¿‡ä¸­é—´ä»¶è®¿é—®æ•°æ®åº“ï¼Œæ— éœ€å…³æ³¨åˆ†ç‰‡ç»†èŠ‚ã€‚ä¼˜ç‚¹æ˜¯å¼€å‘æˆæœ¬ä½ã€æ˜“äºç»´æŠ¤å’Œæ‰©å®¹ï¼Œæ˜¯ç›®å‰ä¸»æµçš„å®ç°æ–¹å¼ã€‚</li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>å¦‚ä½•ä¿è¯åˆ†å¸ƒå¼æ•°æ®åº“æ¶æ„ä¸­å…¨å±€å”¯ä¸€IDçš„ç”Ÿæˆ</strong>ï¼Ÿ</p>
<ul>
<li>
<p>åˆ†å¸ƒå¼IDç”Ÿæˆçš„è¦æ±‚å’Œæ ¸å¿ƒéš¾ç‚¹</p>
<ul>
<li>(1) å…¨å±€å”¯ä¸€æ€§ï¼šä¿æŒç”Ÿæˆçš„IDå…¨å±€å”¯ä¸€ï¼Œåœ¨ä»»ä½•æƒ…å†µä¸‹ä¹Ÿä¸ä¼šå‡ºç°é‡å¤çš„å€¼ï¼ˆå¦‚é˜²æ­¢æ—¶é—´å›æ‹”ï¼Œæ—¶é’Ÿå‘¨æœŸé—®é¢˜ï¼‰ï¼›</li>
<li>(2) è¶‹åŠ¿é€’å¢ï¼šä¿è¯ä¸‹ä¸€ä¸ªIDä¸€å®šå¤§äºä¸Šä¸€ä¸ªIDï¼Œä¾‹å¦‚äº‹åŠ¡ç‰ˆæœ¬å·ã€IMèŠå¤©ä¸­çš„å¢é‡æ¶ˆæ¯ã€æ’åºç­‰ç‰¹æ®Šéœ€æ±‚ï¼›</li>
<li>(3) é«˜æ€§èƒ½ï¼šIDçš„éœ€æ±‚åœºæ™¯å¤šï¼Œä¸­å¿ƒåŒ–ç”Ÿæˆç»„ä»¶åï¼Œéœ€è¦é«˜å¹¶å‘å¤„ç†ï¼Œä»¥æ¥è¿‘ 0msçš„å“åº”å¤§è§„æ¨¡å¹¶å‘æ‰§è¡Œï¼›</li>
<li>(4) é«˜å¯ç”¨ï¼š ä½œä¸ºIDçš„ç”Ÿäº§æºå¤´ï¼Œéœ€è¦100%å¯ç”¨ï¼Œå½“æ¥å…¥çš„ä¸šåŠ¡ç³»ç»Ÿå¤šçš„æ—¶å€™ï¼Œå¾ˆéš¾è°ƒæ•´å‡ºå„æ–¹éƒ½å¯æ¥å—çš„åœæœºå‘å¸ƒçª—å£ï¼Œåªèƒ½æ¥å—æ— æŸå‘å¸ƒï¼›</li>
<li>(5) æ˜“æ¥å…¥ï¼šä½œä¸ºé€»è¾‘ä¸Šç®€å•çš„åˆ†å¸ƒå¼IDè¦æ¨å¹¿ä½¿ç”¨ï¼Œå¿…é¡»å¼ºè°ƒå¼€ç®±å³ç”¨ï¼Œå®¹æ˜“ä¸Šæ‰‹ï¼›</li>
</ul>
</li>
<li>
<p>å¤§å‚è‡ªç ”åˆ†å¸ƒå¼IDæ¡†æ¶å®ç°</p>
<ul>
<li><a href="https://link.juejin.cn?target=http%3A%2F%2Fwww.52im.net%2Fthread-2751-1-1.html" target="_blank" title="http://www.52im.net/thread-2751-1-1.html" ref="nofollow noopener noreferrer">ç¾å›¢åˆ†å¸ƒå¼IDç”Ÿæˆç³»ç»ŸLeaf(å¯¹Snowflakeç®—æ³•è¿›è¡Œäº†æ”¹è¿›)</a>
<ul>
<li>Leaf-segmentæ–¹æ¡ˆï¼šå¯ç”Ÿæˆå…¨å±€å”¯ä¸€ã€å…¨å±€æœ‰åºçš„ID</li>
<li>Leaf-snowflakeæ–¹æ¡ˆï¼šå¯ç”Ÿæˆå…¨å±€å”¯ä¸€ã€å±€éƒ¨æœ‰åºçš„ID</li>
</ul>
</li>
<li><a href="https://link.juejin.cn?target=http%3A%2F%2Fwww.52im.net%2Fthread-2953-1-1.html" target="_blank" title="http://www.52im.net/thread-2953-1-1.html" ref="nofollow noopener noreferrer">ç™¾åº¦åˆ†å¸ƒå¼IDç”Ÿæˆå™¨UidGenerator(å¯¹Snowflakeç®—æ³•è¿›è¡Œäº†æ”¹è¿›)</a></li>
<li><a href="https://link.juejin.cn?target=http%3A%2F%2Fwww.52im.net%2Fthread-3129-1-1.html" target="_blank" title="http://www.52im.net/thread-3129-1-1.html" ref="nofollow noopener noreferrer">æ»´æ»´çš„é«˜æ€§èƒ½IDç”Ÿæˆå™¨(Tinyid)</a></li>
<li><a href="https://link.juejin.cn?target=http%3A%2F%2Fwww.52im.net%2Fthread-4378-1-1.html" target="_blank" title="http://www.52im.net/thread-4378-1-1.html" ref="nofollow noopener noreferrer">vivoçš„è‡ªç ”åˆ†å¸ƒå¼IDæœåŠ¡</a></li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>å„å¤§æ¡†æ¶å¯¹æ¯”</strong></p>
</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f7e1593155ab42d7bda83a9295eeea18~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSVRfc3Vuc2hpbmU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767354999&amp;x-signature=h9h72Zd7HRjUj%2FBItt0B522HlM0%3D" alt="image.png" loading="lazy"/></p>
<ul>
<li>
<hr/>
<ul>
<li>åˆ†ç‰‡é”®é€‰æ‹©è‡³å…³é‡è¦ï¼šåˆ†ç‰‡é”®éœ€æ»¡è¶³â€œæ•°æ®å‡åŒ€åˆ†å¸ƒâ€å’Œâ€œæŸ¥è¯¢ç²¾å‡†å®šä½â€ä¸¤ä¸ªæ ¸å¿ƒè¦æ±‚ã€‚ä¾‹å¦‚ï¼Œè®¢å•è¡¨è‹¥æŒ‰è®¢å•IDå“ˆå¸Œæ‹†åˆ†ï¼ŒæŸ¥è¯¢â€œæŸç”¨æˆ·çš„æ‰€æœ‰è®¢å•â€æ—¶ä¼šéœ€è¦è®¿é—®æ‰€æœ‰åˆ†ç‰‡ï¼Œæ•ˆç‡æä½ï¼›æ­¤æ—¶åº”é€‰æ‹©ç”¨æˆ·IDä½œä¸ºåˆ†ç‰‡é”®ï¼ŒæŸ¥è¯¢æ—¶å¯ç›´æ¥å®šä½åˆ°ç”¨æˆ·æ‰€å±çš„åˆ†ç‰‡ï¼›</li>
<li>é¿å…åˆ†å¸ƒå¼äº‹åŠ¡ï¼šåˆ†åº“åˆ†è¡¨åï¼Œè·¨åˆ†ç‰‡çš„æ“ä½œä¼šäº§ç”Ÿåˆ†å¸ƒå¼äº‹åŠ¡ï¼Œåˆ†å¸ƒå¼äº‹åŠ¡å®ç°å¤æ‚ã€æ€§èƒ½å·®ã€‚éœ€é€šè¿‡ä¸šåŠ¡ä¼˜åŒ–é¿å…è·¨åˆ†ç‰‡æ“ä½œï¼Œæˆ–é‡‡ç”¨æœ€ç»ˆä¸€è‡´æ€§æ–¹æ¡ˆï¼ˆå¦‚æœ¬åœ°æ¶ˆæ¯è¡¨ã€äº‹åŠ¡æ¶ˆæ¯ï¼‰æ›¿ä»£åˆ†å¸ƒå¼äº‹åŠ¡ï¼›</li>
<li>è€ƒè™‘æ‰©å®¹æ–¹æ¡ˆï¼šæ‹†åˆ†æ—¶éœ€é¢„ç•™æ‰©å®¹ç©ºé—´ï¼Œé¿å…åç»­æ‰©å®¹æ—¶å¤§é‡æ•°æ®è¿ç§»ã€‚ä¾‹å¦‚ï¼Œé‡‡ç”¨ä¸€è‡´æ€§å“ˆå¸Œæ‹†åˆ†ï¼Œæˆ–æŒ‰â€œ2çš„å¹‚æ¬¡â€æ‹†åˆ†ï¼ˆå¦‚åˆå§‹æ‹†åˆ†ä¸º8ä¸ªåˆ†ç‰‡ï¼Œåç»­å¯æ‰©å®¹ä¸º16ä¸ªï¼‰ï¼›</li>
<li>è¿ç»´å¤æ‚åº¦æå‡ï¼šåˆ†åº“åˆ†è¡¨åï¼Œæ•°æ®åº“é›†ç¾¤çš„è¿ç»´éš¾åº¦æ˜¾è‘—å¢åŠ ï¼Œéœ€å…³æ³¨åˆ†ç‰‡çš„å¥åº·çŠ¶æ€ã€æ•°æ®ä¸€è‡´æ€§ã€å¤‡ä»½æ¢å¤ç­‰é—®é¢˜ã€‚å¯å€ŸåŠ©ä¸­é—´ä»¶çš„ç›‘æ§åŠŸèƒ½ï¼Œæˆ–ä½¿ç”¨ä¸“ä¸šçš„è¿ç»´å·¥å…·ï¼ˆå¦‚Prometheusã€Grafanaï¼‰è¿›è¡Œç›‘æ§ã€‚</li>
</ul>
</li>
</ul>
<h2 data-id="heading-15">åã€å…¶ä»–ä¼˜åŒ–æ–¹æ¡ˆ</h2>
<ul>
<li>
<p><strong>è¯»å†™åˆ†ç¦»</strong></p>
<ul>
<li>å¯¹äºè¯»å¤šå†™å°‘çš„å¤§è¡¨åœºæ™¯ï¼ˆå¦‚å•†å“è¡¨ã€ç”¨æˆ·è¡¨ï¼‰ï¼Œå¯é‡‡ç”¨è¯»å†™åˆ†ç¦»æ¶æ„ï¼šä¸»åº“è´Ÿè´£å†™å…¥æ“ä½œï¼ˆINSERTã€UPDATEã€DELETEï¼‰ï¼Œä»åº“è´Ÿè´£è¯»å–æ“ä½œï¼ˆSELECTï¼‰ï¼Œé€šè¿‡ä¸»ä»å¤åˆ¶åŒæ­¥æ•°æ®ã€‚è¯»å†™åˆ†ç¦»èƒ½åˆ†æ•£å•åº“çš„è¯»å†™å‹åŠ›ï¼Œæå‡æŸ¥è¯¢æ€§èƒ½ï¼Œéœ€æ³¨æ„ä¸»ä»å¤åˆ¶çš„å»¶è¿Ÿé—®é¢˜ï¼Œå¯¹äºå®æ—¶æ€§è¦æ±‚é«˜çš„æŸ¥è¯¢ï¼Œéœ€è·¯ç”±åˆ°ä¸»åº“ã€‚</li>
</ul>
</li>
<li>
<p><strong>æ•°æ®åº“å‚æ•°ä¼˜åŒ–(é€šè¿‡ä¼˜åŒ–MySQçš„é…ç½®å‚æ•°ï¼Œæå‡æ•°æ®åº“æ€§èƒ½)</strong></p>
<ul>
<li>è°ƒæ•´ç¼“å†²æ± å¤§å°ï¼ˆinnodb_buffer_pool_sizeï¼‰ï¼šå»ºè®®è®¾ç½®ä¸ºæœåŠ¡å™¨ç‰©ç†å†…å­˜çš„50%-70%ï¼Œæå‡æ•°æ®å’Œç´¢å¼•çš„ç¼“å­˜å‘½ä¸­ç‡ï¼›</li>
<li>è°ƒæ•´æ—¥å¿—ç›¸å…³å‚æ•°ï¼ˆinnodb_log_file_sizeã€innodb_log_buffer_sizeï¼‰ï¼šå¢å¤§æ—¥å¿—æ–‡ä»¶å¤§å°ï¼Œå‡å°‘æ—¥å¿—åˆ·ç›˜æ¬¡æ•°ï¼›å¢å¤§æ—¥å¿—ç¼“å†²åŒºï¼Œå‡å°‘ç£ç›˜I/Oï¼›</li>
<li>è°ƒæ•´è¿æ¥æ•°å‚æ•°ï¼ˆmax_connectionsã€wait_timeoutï¼‰ï¼šæ ¹æ®ä¸šåŠ¡éœ€æ±‚è®¾ç½®åˆç†çš„æœ€å¤§è¿æ¥æ•°ï¼Œé¿å…è¿æ¥è€—å°½ï¼›è®¾ç½®åˆç†çš„è¿æ¥è¶…æ—¶æ—¶é—´ï¼Œé‡Šæ”¾ç©ºé—²è¿æ¥ï¼›</li>
</ul>
</li>
<li>
<p><strong>ç¡¬ä»¶ä¸å­˜å‚¨ä¼˜åŒ–ï¼Œç¡¬ä»¶å’Œå­˜å‚¨æ˜¯æ•°æ®åº“æ€§èƒ½çš„åŸºç¡€ï¼Œå¤§è¡¨åœºæ™¯ä¸‹éœ€é€‰æ‹©é«˜æ€§èƒ½çš„ç¡¬ä»¶</strong></p>
<ul>
<li>ä½¿ç”¨SSDç¡¬ç›˜ï¼šSSDçš„è¯»å†™é€Ÿåº¦è¿œé«˜äºæœºæ¢°ç¡¬ç›˜ï¼Œèƒ½æ˜¾è‘—æå‡å¤§è¡¨çš„ç£ç›˜I/Oæ•ˆç‡ï¼›</li>
<li>æå‡CPUå’Œå†…å­˜é…ç½®ï¼šå¤§è¡¨æŸ¥è¯¢å’Œç´¢å¼•ç»´æŠ¤éœ€è¦å¤§é‡CPUå’Œå†…å­˜èµ„æºï¼Œé€‰æ‹©å¤šæ ¸CPUã€å¤§å®¹é‡å†…å­˜çš„æœåŠ¡å™¨ï¼›</li>
<li>ä½¿ç”¨RAIDé˜µåˆ—ï¼šé€šè¿‡RAID 0ã€RAID 10ç­‰é˜µåˆ—æ–¹å¼ï¼Œæå‡ç£ç›˜çš„è¯»å†™æ€§èƒ½å’Œå¯é æ€§ã€‚</li>
</ul>
</li>
</ul>
<h2 data-id="heading-16">åä¸€ã€æ€»ç»“</h2>
<p>MySQLå¤§è¡¨ä¼˜åŒ–æ˜¯ä¸€ä¸ªç³»ç»Ÿæ€§å·¥ç¨‹ï¼Œéœ€ä»è¡¨è®¾è®¡ã€æŸ¥è¯¢ã€ç´¢å¼•ã€æ•°æ®å½’æ¡£ã€åˆ†åŒºè¡¨ã€åˆ†åº“åˆ†è¡¨ç­‰å¤šä¸ªç»´åº¦ç»¼åˆè€ƒé‡ï¼Œæ ¸å¿ƒæ˜¯â€œå‡å°‘æ•°æ®é‡ã€é™ä½è®¿é—®æˆæœ¬ã€åˆ†æ•£å‹åŠ›â€ã€‚ä¼˜åŒ–è¿‡ç¨‹ä¸­åº”éµå¾ªâ€œå…ˆæ˜“åéš¾ã€å…ˆè½¯åç¡¬â€çš„åŸåˆ™ï¼Œä¼˜å…ˆé‡‡ç”¨ä½æˆæœ¬ã€ä½é£é™©çš„æ–¹æ¡ˆï¼Œå†æ ¹æ®ä¸šåŠ¡éœ€æ±‚é€æ­¥å‡çº§åˆ°æ¶æ„çº§ä¼˜åŒ–ã€‚å¤§å‚çš„å®æˆ˜æ¡ˆä¾‹è¡¨æ˜ï¼Œä¼˜åŒ–æ–¹æ¡ˆéœ€ç´§å¯†ç»“åˆä¸šåŠ¡åœºæ™¯ï¼šç”µå•†è®¢å•è¡¨é€‚åˆåˆ†åº“åˆ†è¡¨+æ•°æ®å½’æ¡£ï¼Œæ—¥å¿—è¡¨é€‚åˆåˆ†åŒºè¡¨+å†·çƒ­åˆ†ç¦»ï¼Œå•†å“è¡¨é€‚åˆå‚ç›´æ‹†åˆ†+è¯»å†™åˆ†ç¦»+ç¼“å­˜ã€‚åŒæ—¶ï¼Œä¼˜åŒ–åçš„ç›‘æ§ä¸è¿ç»´è‡³å…³é‡è¦ï¼Œèƒ½ç¡®ä¿ç³»ç»Ÿé•¿æœŸç¨³å®šè¿è¡Œã€‚å¥½äº†ï¼Œä»Šå¤©çš„åˆ†äº«å°±åˆ°æ­¤ç»“æŸäº†ï¼Œå¦‚æœæ–‡ç« å¯¹ä½ æœ‰æ‰€å¸®åŠ©ï¼Œæ¬¢è¿ï¼š<em><strong>ç‚¹èµğŸ‘+è¯„è®ºğŸ’¬+æ”¶è—â¤</strong></em>ï¼Œæˆ‘æ˜¯ï¼š<strong><code>IT_sunshine</code></strong>Â ï¼Œæˆ‘ä»¬ä¸‹æœŸè§ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[MySQL äº‹åŠ¡å…¨è§£æï¼šä» ACID ç‰¹æ€§åˆ°å®æˆ˜è½åœ°ï¼ˆéƒ¨é—¨ - å‘˜å·¥åœºæ™¯ï¼‰]]></title>    <link>https://juejin.cn/post/7588086766235271206</link>    <guid>https://juejin.cn/post/7588086766235271206</guid>    <pubDate>2025-12-26T12:08:15.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588086766235271206" data-draft-id="7587997893987549211" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="MySQL äº‹åŠ¡å…¨è§£æï¼šä» ACID ç‰¹æ€§åˆ°å®æˆ˜è½åœ°ï¼ˆéƒ¨é—¨ - å‘˜å·¥åœºæ™¯ï¼‰"/> <meta itemprop="keywords" content="åç«¯,æ•°æ®åº“"/> <meta itemprop="datePublished" content="2025-12-26T12:08:15.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¨‹åºå‘˜æ ¹æ ¹"/> <meta itemprop="url" content="https://juejin.cn/user/555679166786139"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            MySQL äº‹åŠ¡å…¨è§£æï¼šä» ACID ç‰¹æ€§åˆ°å®æˆ˜è½åœ°ï¼ˆéƒ¨é—¨ - å‘˜å·¥åœºæ™¯ï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/555679166786139/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¨‹åºå‘˜æ ¹æ ¹
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-26T12:08:15.000Z" title="Fri Dec 26 2025 12:08:15 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ä¼ä¸šçº§ç³»ç»Ÿå¼€å‘ä¸­ï¼Œâ€œæ•°æ®ä¸€è‡´æ€§â€ æ˜¯æ ¸å¿ƒè¯‰æ±‚ â€”â€” æ¯”å¦‚å‘˜å·¥å…¥èŒæ—¶ï¼Œâ€œæ–°å¢å‘˜å·¥è®°å½•â€ å’Œ â€œæ›´æ–°éƒ¨é—¨äººæ•°â€ è¿™ä¸¤ä¸ªæ“ä½œå¿…é¡»åŒæ—¶æˆåŠŸæˆ–åŒæ—¶å¤±è´¥ï¼›å†æ¯”å¦‚è´¢åŠ¡è½¬è´¦æ—¶ï¼Œâ€œæ‰£æ¬¾â€ å’Œ â€œæ”¶æ¬¾â€ ä¹Ÿä¸èƒ½åªæ‰§è¡Œå…¶ä¸€ã€‚è€Œä¿è¯è¿™ç§ â€œè¦ä¹ˆå…¨æˆã€è¦ä¹ˆå…¨è´¥â€ çš„æ ¸å¿ƒæŠ€æœ¯ï¼Œå°±æ˜¯<strong>æ•°æ®åº“äº‹åŠ¡ï¼ˆTransactionï¼‰</strong> ã€‚æœ¬æ–‡å°†ä»¥ â€œéƒ¨é—¨ - å‘˜å·¥â€ è¿™ä¸€ç»å…¸ä¸šåŠ¡åœºæ™¯ä¸ºæ ¸å¿ƒï¼Œä»äº‹åŠ¡çš„æ ¸å¿ƒä»·å€¼ã€ACID ç‰¹æ€§ã€éš”ç¦»çº§åˆ«ï¼Œåˆ° JDBC/MyBatis/Spring ä¸­çš„å®æˆ˜è½åœ°ï¼Œå¸®ä½ å½»åº•æŒæ¡äº‹åŠ¡çš„ä½¿ç”¨ä¸ä¼˜åŒ–ã€‚</p>
<h2 data-id="heading-0">ä¸€ã€äº‹åŠ¡çš„æ ¸å¿ƒä»·å€¼ï¼šä¸ºä»€ä¹ˆç¦»ä¸å¼€äº‹åŠ¡ï¼Ÿ</h2>
<p>å…ˆçœ‹ä¸€ä¸ªå…¸å‹çš„ä¸šåŠ¡åœºæ™¯ï¼š</p>
<blockquote>
<p>ä¼ä¸šæ‹›è˜æ–°å‘˜å·¥ â€œé’±å…«â€ å…¥èŒç ”å‘éƒ¨ï¼Œéœ€è¦æ‰§è¡Œä¸¤ä¸ªæ“ä½œï¼š</p>
<ol>
<li>å‘<code>emp</code>è¡¨æ’å…¥ â€œé’±å…«â€ çš„å‘˜å·¥è®°å½•ï¼›</li>
<li>å‘<code>dept</code>è¡¨æ›´æ–°ç ”å‘éƒ¨çš„å‘˜å·¥æ•°é‡ï¼ˆ<code>emp_count</code>å­—æ®µï¼‰ï¼ŒåŠ  1ã€‚</li>
</ol>
</blockquote>
<p>å¦‚æœæ²¡æœ‰äº‹åŠ¡æ§åˆ¶ï¼Œå¯èƒ½å‡ºç°ä¸¤ç§å¼‚å¸¸ï¼š</p>
<ul>
<li>åœºæ™¯ 1ï¼šæ’å…¥å‘˜å·¥è®°å½•æˆåŠŸï¼Œä½†æ›´æ–°éƒ¨é—¨äººæ•°å¤±è´¥ â†’ ç ”å‘éƒ¨äººæ•°å°‘ç®— 1 äººï¼Œæ•°æ®ä¸ä¸€è‡´ï¼›</li>
<li>åœºæ™¯ 2ï¼šæ›´æ–°éƒ¨é—¨äººæ•°æˆåŠŸï¼Œä½†æ’å…¥å‘˜å·¥è®°å½•å¤±è´¥ â†’ ç ”å‘éƒ¨äººæ•°å¤šç®— 1 äººï¼Œæ•°æ®é”™è¯¯ã€‚</li>
</ul>
<p>è€Œäº‹åŠ¡çš„æ ¸å¿ƒä½œç”¨ï¼Œå°±æ˜¯<strong>å°†ä¸€ç»„æ“ä½œå°è£…ä¸ºä¸€ä¸ª â€œä¸å¯åˆ†å‰²çš„æ‰§è¡Œå•å…ƒâ€</strong> ï¼Œç¡®ä¿å•å…ƒå†…çš„æ‰€æœ‰æ“ä½œè¦ä¹ˆå…¨éƒ¨æ‰§è¡ŒæˆåŠŸï¼Œè¦ä¹ˆå…¨éƒ¨å›æ»šï¼ˆæ’¤é”€ï¼‰ï¼Œä»æ ¹æœ¬ä¸Šé¿å…æ•°æ®ä¸ä¸€è‡´é—®é¢˜ã€‚</p>
<h2 data-id="heading-1">äºŒã€äº‹åŠ¡çš„æ ¸å¿ƒç‰¹æ€§ï¼šACID åŸåˆ™</h2>
<p>äº‹åŠ¡çš„æœ¬è´¨æ˜¯éµå¾ª<strong>ACID å››å¤§ç‰¹æ€§</strong>çš„ä¸€ç»„æ•°æ®åº“æ“ä½œï¼Œè¿™æ˜¯äº‹åŠ¡çš„æ ¸å¿ƒå®šä¹‰ï¼Œæˆ‘ä»¬ç»“åˆ â€œéƒ¨é—¨ - å‘˜å·¥â€ åœºæ™¯é€ä¸€æ‹†è§£ï¼š</p>



































<table><thead><tr><th>ç‰¹æ€§</th><th>è‹±æ–‡å…¨ç§°</th><th>æ ¸å¿ƒå®šä¹‰</th><th>éƒ¨é—¨ - å‘˜å·¥åœºæ™¯ç¤ºä¾‹</th></tr></thead><tbody><tr><td>åŸå­æ€§ï¼ˆAï¼‰</td><td>Atomicity</td><td>äº‹åŠ¡ä¸­çš„æ“ä½œè¦ä¹ˆå…¨éƒ¨æ‰§è¡ŒæˆåŠŸï¼Œè¦ä¹ˆå…¨éƒ¨å›æ»šï¼Œä¸å­˜åœ¨ â€œéƒ¨åˆ†æˆåŠŸâ€</td><td>å…¥èŒæ“ä½œï¼šæ’å…¥å‘˜å·¥ + æ›´æ–°éƒ¨é—¨äººæ•°ï¼Œè¦ä¹ˆéƒ½æˆï¼Œè¦ä¹ˆéƒ½å›æ»šï¼ˆæ¯”å¦‚å‘˜å·¥å§“åé‡å¤å¯¼è‡´æ’å…¥å¤±è´¥ï¼Œéƒ¨é—¨äººæ•°ä¹Ÿä¸æ›´æ–°ï¼‰</td></tr><tr><td>ä¸€è‡´æ€§ï¼ˆCï¼‰</td><td>Consistency</td><td>äº‹åŠ¡æ‰§è¡Œå‰åï¼Œæ•°æ®åº“çš„ â€œä¸šåŠ¡è§„åˆ™â€ ä¿æŒä¸€è‡´ï¼ˆå¦‚éƒ¨é—¨äººæ•° = è¯¥éƒ¨é—¨å‘˜å·¥æ•°ï¼‰</td><td>æ‰§è¡Œå‰ç ”å‘éƒ¨äººæ•°æ˜¯ 2ï¼Œæ‰§è¡Œåå¿…é¡»æ˜¯ 3ï¼ˆæˆåŠŸï¼‰æˆ–ä»ä¸º 2ï¼ˆå¤±è´¥ï¼‰ï¼Œä¸ä¼šå‡ºç° â€œå‘˜å·¥æ–°å¢ä½†äººæ•°ä¸å˜â€ çš„ä¸ä¸€è‡´</td></tr><tr><td>éš”ç¦»æ€§ï¼ˆIï¼‰</td><td>Isolation</td><td>å¤šä¸ªäº‹åŠ¡å¹¶å‘æ‰§è¡Œæ—¶ï¼Œå½¼æ­¤éš”ç¦»ã€äº’ä¸å¹²æ‰°ï¼Œé¿å…å¹¶å‘å¯¼è‡´çš„æ•°æ®é”™è¯¯</td><td>ç®¡ç†å‘˜ A æ–°å¢å‘˜å·¥ã€ç®¡ç†å‘˜ B ç»Ÿè®¡éƒ¨é—¨äººæ•°ï¼Œä¸¤ä¸ªäº‹åŠ¡å¹¶å‘æ‰§è¡Œæ—¶ï¼ŒB ä¸ä¼šè¯»åˆ° A â€œæœªæäº¤çš„ä¸­é—´æ•°æ®â€</td></tr><tr><td>æŒä¹…æ€§ï¼ˆDï¼‰</td><td>Durability</td><td>äº‹åŠ¡æäº¤åï¼Œä¿®æ”¹ä¼šæ°¸ä¹…ä¿å­˜åˆ°æ•°æ®åº“ï¼Œå³ä½¿æ•°æ®åº“å´©æºƒä¹Ÿä¸ä¼šä¸¢å¤±</td><td>å…¥èŒæ“ä½œæäº¤åï¼Œâ€œé’±å…«â€ çš„å‘˜å·¥è®°å½•å’Œç ”å‘éƒ¨äººæ•°çš„ä¿®æ”¹ä¼šæ°¸ä¹…ä¿å­˜ï¼Œé‡å¯æ•°æ®åº“åæ•°æ®ä»æœ‰æ•ˆ</td></tr></tbody></table>
<p><strong>å…³é”®è¯´æ˜</strong>ï¼šACID æ˜¯äº‹åŠ¡çš„ â€œå¥‘çº¦â€ï¼Œå…¶ä¸­<strong>åŸå­æ€§ã€ä¸€è‡´æ€§ã€æŒä¹…æ€§</strong>ç”±æ•°æ®åº“çš„ â€œé‡åšæ—¥å¿—ï¼ˆRedo Logï¼‰â€ å’Œ â€œå›æ»šæ—¥å¿—ï¼ˆUndo Logï¼‰â€ ä¿è¯ï¼Œ<strong>éš”ç¦»æ€§</strong>ç”±äº‹åŠ¡éš”ç¦»çº§åˆ«å’Œé”æœºåˆ¶ä¿è¯ã€‚</p>
<h2 data-id="heading-2">ä¸‰ã€äº‹åŠ¡çš„éš”ç¦»çº§åˆ«ï¼šè§£å†³å¹¶å‘äº‹åŠ¡å†²çª</h2>
<p>åœ¨å¤šç”¨æˆ·å¹¶å‘æ“ä½œæ•°æ®åº“æ—¶ï¼Œè‹¥æ²¡æœ‰éš”ç¦»æ€§æ§åˆ¶ï¼Œä¼šå‡ºç°<strong>è„è¯»ã€ä¸å¯é‡å¤è¯»ã€å¹»è¯»</strong>ä¸‰ç±»é—®é¢˜ã€‚MySQL é€šè¿‡ â€œäº‹åŠ¡éš”ç¦»çº§åˆ«â€ æ¥å¹³è¡¡ â€œéš”ç¦»æ€§â€ å’Œ â€œå¹¶å‘æ€§èƒ½â€ï¼Œå…±å®šä¹‰äº† 4 ä¸ªéš”ç¦»çº§åˆ«ï¼ˆä»ä½åˆ°é«˜ï¼‰ï¼š</p>
<h4 data-id="heading-3">1. å››ç±»å¹¶å‘é—®é¢˜ï¼ˆå…ˆç†è§£é—®é¢˜ï¼Œå†çœ‹è§£å†³æ–¹æ¡ˆï¼‰</h4>

























<table><thead><tr><th>é—®é¢˜ç±»å‹</th><th>å®šä¹‰</th><th>éƒ¨é—¨ - å‘˜å·¥åœºæ™¯ç¤ºä¾‹</th></tr></thead><tbody><tr><td>è„è¯»ï¼ˆDirty Readï¼‰</td><td>ä¸€ä¸ªäº‹åŠ¡è¯»å–åˆ°å¦ä¸€ä¸ªäº‹åŠ¡ â€œæœªæäº¤â€ çš„ä¿®æ”¹æ•°æ®</td><td>äº‹åŠ¡ A æ–°å¢å‘˜å·¥ â€œé’±å…«â€ ä½†æœªæäº¤ï¼Œäº‹åŠ¡ B æŸ¥è¯¢ç ”å‘éƒ¨äººæ•°ä¸º 3ï¼›äº‹åŠ¡ A å›æ»šåï¼Œäº‹åŠ¡ B è¯»åˆ°çš„ â€œ3â€ å°±æ˜¯ â€œè„æ•°æ®â€</td></tr><tr><td>ä¸å¯é‡å¤è¯»ï¼ˆNon-repeatable Readï¼‰</td><td>ä¸€ä¸ªäº‹åŠ¡å†…å¤šæ¬¡è¯»å–åŒä¸€æ•°æ®ï¼Œç»“æœä¸ä¸€è‡´ï¼ˆè¢«å…¶ä»–äº‹åŠ¡ â€œä¿®æ”¹å¹¶æäº¤â€ï¼‰</td><td>äº‹åŠ¡ B ç¬¬ä¸€æ¬¡æŸ¥ç ”å‘éƒ¨äººæ•°ä¸º 2ï¼Œäº‹åŠ¡ A æ–°å¢å‘˜å·¥å¹¶æäº¤ï¼Œäº‹åŠ¡ B å†æ¬¡æŸ¥è¯¢äººæ•°ä¸º 3ï¼Œä¸¤æ¬¡ç»“æœä¸åŒ</td></tr><tr><td>å¹»è¯»ï¼ˆPhantom Readï¼‰</td><td>ä¸€ä¸ªäº‹åŠ¡å†…å¤šæ¬¡æ‰§è¡ŒåŒä¸€æŸ¥è¯¢ï¼Œç»“æœé›†è¡Œæ•°ä¸ä¸€è‡´ï¼ˆè¢«å…¶ä»–äº‹åŠ¡ â€œæ’å…¥ / åˆ é™¤å¹¶æäº¤â€ï¼‰</td><td>äº‹åŠ¡ B æŸ¥è¯¢ â€œè–ªèµ„&gt; 15000 çš„ç ”å‘éƒ¨å‘˜å·¥â€ æœ‰ 2 äººï¼Œäº‹åŠ¡ A æ–°å¢ 1 åé«˜è–ªå‘˜å·¥å¹¶æäº¤ï¼Œäº‹åŠ¡ B å†æ¬¡æŸ¥è¯¢å˜ä¸º 3 äººï¼Œå¦‚åŒ â€œå‡ºç°å¹»è§‰â€</td></tr></tbody></table>
<h4 data-id="heading-4">2. å››ç§éš”ç¦»çº§åˆ«ï¼ˆè§£å†³å¹¶å‘é—®é¢˜çš„ä¸åŒç¨‹åº¦ï¼‰</h4>
<p>MySQL é»˜è®¤éš”ç¦»çº§åˆ«ä¸º<code>REPEATABLE READï¼ˆå¯é‡å¤è¯»ï¼‰</code>ï¼Œä¹Ÿæ˜¯ç”Ÿäº§ç¯å¢ƒæœ€å¸¸ç”¨çš„çº§åˆ«ã€‚</p>








































<table><thead><tr><th>éš”ç¦»çº§åˆ«</th><th>è‹±æ–‡å…¨ç§°</th><th>è§£å†³çš„é—®é¢˜</th><th>å…è®¸çš„é—®é¢˜</th><th>æ€§èƒ½</th></tr></thead><tbody><tr><td>è¯»æœªæäº¤</td><td>READ UNCOMMITTED</td><td>æ— ï¼ˆæœ€ä½éš”ç¦»ï¼‰</td><td>è„è¯»ã€ä¸å¯é‡å¤è¯»ã€å¹»è¯»</td><td>æœ€é«˜</td></tr><tr><td>è¯»å·²æäº¤</td><td>READ COMMITTED</td><td>è„è¯»</td><td>ä¸å¯é‡å¤è¯»ã€å¹»è¯»</td><td>è¾ƒé«˜</td></tr><tr><td>å¯é‡å¤è¯»ï¼ˆé»˜è®¤ï¼‰</td><td>REPEATABLE READ</td><td>è„è¯»ã€ä¸å¯é‡å¤è¯»</td><td>å¹»è¯»ï¼ˆMySQL å·²é€šè¿‡ MVCC è§£å†³ï¼‰</td><td>ä¸­ç­‰</td></tr><tr><td>ä¸²è¡ŒåŒ–</td><td>SERIALIZABLE</td><td>æ‰€æœ‰é—®é¢˜ï¼ˆå®Œå…¨éš”ç¦»ï¼‰</td><td>æ— ï¼ˆå¹¶å‘äº‹åŠ¡ä¸²è¡Œæ‰§è¡Œï¼‰</td><td>æœ€ä½</td></tr></tbody></table>
<p><strong>å…³é”®è¯´æ˜</strong>ï¼š</p>
<ul>
<li>MySQL çš„<code>REPEATABLE READ</code>é€šè¿‡ â€œå¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶ï¼ˆMVCCï¼‰â€ é¢å¤–è§£å†³äº†å¹»è¯»é—®é¢˜ï¼Œæ˜¯æ¯”æ ‡å‡†å®šä¹‰æ›´ä¼˜çš„å®ç°ï¼›</li>
<li>éš”ç¦»çº§åˆ«è¶Šé«˜ï¼Œå¹¶å‘æ€§èƒ½è¶Šä½ï¼Œéœ€æ ¹æ®ä¸šåŠ¡åœºæ™¯é€‰æ‹©ï¼ˆå¦‚è´¢åŠ¡ç³»ç»Ÿç”¨<code>SERIALIZABLE</code>ï¼Œæ™®é€šä¸šåŠ¡ç”¨<code>REPEATABLE READ</code>ï¼‰ã€‚</li>
</ul>
<h4 data-id="heading-5">3. æŸ¥çœ‹ / è®¾ç½®éš”ç¦»çº§åˆ«</h4>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- æŸ¥çœ‹å½“å‰ä¼šè¯éš”ç¦»çº§åˆ«</span>
<span class="hljs-keyword">SELECT</span> @<span class="hljs-variable">@SESSION</span>.tx_isolation;
<span class="hljs-comment">-- æŸ¥çœ‹å…¨å±€éš”ç¦»çº§åˆ«</span>
<span class="hljs-keyword">SELECT</span> @<span class="hljs-variable">@GLOBAL</span>.tx_isolation;

<span class="hljs-comment">-- è®¾ç½®å½“å‰ä¼šè¯éš”ç¦»çº§åˆ«ä¸ºè¯»å·²æäº¤</span>
<span class="hljs-keyword">SET</span> SESSION TRANSACTION ISOLATION LEVEL READ COMMITTED;
<span class="hljs-comment">-- è®¾ç½®å…¨å±€éš”ç¦»çº§åˆ«ä¸ºå¯é‡å¤è¯»ï¼ˆé»˜è®¤ï¼‰</span>
<span class="hljs-keyword">SET</span> <span class="hljs-keyword">GLOBAL</span> TRANSACTION ISOLATION LEVEL REPEATABLE READ;
</code></pre>
<h2 data-id="heading-6">å››ã€äº‹åŠ¡çš„åŸºç¡€æ“ä½œè¯­æ³•ï¼ˆMySQL å®æˆ˜ï¼‰</h2>
<h4 data-id="heading-7">1. æ ¸å¿ƒè¯­æ³•</h4>
<p>MySQL é»˜è®¤å¼€å¯ â€œè‡ªåŠ¨æäº¤ï¼ˆAUTOCOMMITï¼‰â€ï¼Œå³æ¯æ¡ SQL è¯­å¥éƒ½æ˜¯ä¸€ä¸ªç‹¬ç«‹äº‹åŠ¡ã€‚éœ€æ‰‹åŠ¨å…³é—­è‡ªåŠ¨æäº¤æˆ–æ˜¾å¼å¼€å¯äº‹åŠ¡ã€‚</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- 1. å…³é—­è‡ªåŠ¨æäº¤ï¼ˆå½“å‰ä¼šè¯æœ‰æ•ˆï¼‰</span>
<span class="hljs-keyword">SET</span> AUTOCOMMIT <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;

<span class="hljs-comment">-- 2. å¼€å¯äº‹åŠ¡ï¼ˆæ˜¾å¼å£°æ˜äº‹åŠ¡å¼€å§‹ï¼‰</span>
<span class="hljs-keyword">BEGIN</span>; <span class="hljs-comment">-- æˆ– START TRANSACTION;</span>

<span class="hljs-comment">-- 3. æ‰§è¡Œäº‹åŠ¡å†…çš„æ“ä½œï¼ˆå¦‚æ’å…¥å‘˜å·¥+æ›´æ–°éƒ¨é—¨äººæ•°ï¼‰</span>
<span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> `emp` (emp_name, emp_salary, hire_date, dept_id) 
<span class="hljs-keyword">VALUES</span> (<span class="hljs-string">'é’±å…«'</span>, <span class="hljs-number">14000.00</span>, <span class="hljs-string">'2024-01-01'</span>, <span class="hljs-number">1</span>);

<span class="hljs-keyword">UPDATE</span> `dept` <span class="hljs-keyword">SET</span> emp_count <span class="hljs-operator">=</span> emp_count <span class="hljs-operator">+</span> <span class="hljs-number">1</span> <span class="hljs-keyword">WHERE</span> dept_id <span class="hljs-operator">=</span> <span class="hljs-number">1</span>;

<span class="hljs-comment">-- 4. æäº¤äº‹åŠ¡ï¼ˆæ‰€æœ‰æ“ä½œç”Ÿæ•ˆï¼ŒæŒä¹…åŒ–åˆ°æ•°æ®åº“ï¼‰</span>
<span class="hljs-keyword">COMMIT</span>;

<span class="hljs-comment">-- 4. å›æ»šäº‹åŠ¡ï¼ˆæ’¤é”€æ‰€æœ‰æ“ä½œï¼Œå›åˆ°äº‹åŠ¡å¼€å§‹å‰çš„çŠ¶æ€ï¼‰</span>
<span class="hljs-comment">-- ROLLBACK;</span>

<span class="hljs-comment">-- 5. ä¿å­˜ç‚¹ï¼ˆå¯é€‰ï¼Œå›æ»šåˆ°æŒ‡å®šä½ç½®ï¼Œè€Œéæ•´ä¸ªäº‹åŠ¡ï¼‰</span>
<span class="hljs-keyword">SAVEPOINT</span> sp1; <span class="hljs-comment">-- è®¾ç½®ä¿å­˜ç‚¹</span>
<span class="hljs-keyword">ROLLBACK</span> <span class="hljs-keyword">TO</span> sp1; <span class="hljs-comment">-- å›æ»šåˆ°ä¿å­˜ç‚¹</span>
</code></pre>
<h4 data-id="heading-8">2. å®æˆ˜æ¡ˆä¾‹ï¼ˆéƒ¨é—¨ - å‘˜å·¥å…¥èŒï¼‰</h4>
<p>å…ˆç»™<code>dept</code>è¡¨æ–°å¢<code>emp_count</code>å­—æ®µï¼ˆç”¨äºç»Ÿè®¡éƒ¨é—¨äººæ•°ï¼‰ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> `dept` <span class="hljs-keyword">ADD</span> <span class="hljs-keyword">COLUMN</span> `emp_count` <span class="hljs-type">INT</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">0</span> COMMENT <span class="hljs-string">'éƒ¨é—¨å‘˜å·¥æ•°'</span>;
<span class="hljs-comment">-- åˆå§‹åŒ–ç°æœ‰éƒ¨é—¨äººæ•°</span>
<span class="hljs-keyword">UPDATE</span> `dept` <span class="hljs-keyword">SET</span> emp_count <span class="hljs-operator">=</span> <span class="hljs-number">2</span> <span class="hljs-keyword">WHERE</span> dept_id <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; <span class="hljs-comment">-- ç ”å‘éƒ¨2äºº</span>
<span class="hljs-keyword">UPDATE</span> `dept` <span class="hljs-keyword">SET</span> emp_count <span class="hljs-operator">=</span> <span class="hljs-number">1</span> <span class="hljs-keyword">WHERE</span> dept_id <span class="hljs-operator">=</span> <span class="hljs-number">2</span>; <span class="hljs-comment">-- äººäº‹éƒ¨1äºº</span>
<span class="hljs-keyword">UPDATE</span> `dept` <span class="hljs-keyword">SET</span> emp_count <span class="hljs-operator">=</span> <span class="hljs-number">1</span> <span class="hljs-keyword">WHERE</span> dept_id <span class="hljs-operator">=</span> <span class="hljs-number">3</span>; <span class="hljs-comment">-- è´¢åŠ¡éƒ¨1äºº</span>
<span class="hljs-keyword">UPDATE</span> `dept` <span class="hljs-keyword">SET</span> emp_count <span class="hljs-operator">=</span> <span class="hljs-number">0</span> <span class="hljs-keyword">WHERE</span> dept_id <span class="hljs-operator">=</span> <span class="hljs-number">4</span>; <span class="hljs-comment">-- å¸‚åœºéƒ¨0äºº</span>
</code></pre>
<p>æ‰§è¡Œå¸¦äº‹åŠ¡çš„å…¥èŒæ“ä½œï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- æ­¥éª¤1ï¼šå¼€å¯äº‹åŠ¡</span>
<span class="hljs-keyword">BEGIN</span>;

<span class="hljs-comment">-- æ­¥éª¤2ï¼šæ‰§è¡Œæ“ä½œ1ï¼šæ’å…¥æ–°å‘˜å·¥</span>
<span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> `emp` (emp_name, emp_salary, hire_date, dept_id, manager_id) 
<span class="hljs-keyword">VALUES</span> (<span class="hljs-string">'é’±å…«'</span>, <span class="hljs-number">14000.00</span>, <span class="hljs-string">'2024-01-01'</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>);

<span class="hljs-comment">-- æ­¥éª¤3ï¼šæ‰§è¡Œæ“ä½œ2ï¼šæ›´æ–°ç ”å‘éƒ¨äººæ•°</span>
<span class="hljs-keyword">UPDATE</span> `dept` <span class="hljs-keyword">SET</span> emp_count <span class="hljs-operator">=</span> emp_count <span class="hljs-operator">+</span> <span class="hljs-number">1</span> <span class="hljs-keyword">WHERE</span> dept_id <span class="hljs-operator">=</span> <span class="hljs-number">1</span>;

<span class="hljs-comment">-- æ­¥éª¤4ï¼šéªŒè¯æ•°æ®ï¼ˆäº‹åŠ¡æœªæäº¤ï¼Œä»…å½“å‰ä¼šè¯å¯è§ï¼‰</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> `emp` <span class="hljs-keyword">WHERE</span> emp_name <span class="hljs-operator">=</span> <span class="hljs-string">'é’±å…«'</span>; <span class="hljs-comment">-- èƒ½æŸ¥åˆ°</span>
<span class="hljs-keyword">SELECT</span> emp_count <span class="hljs-keyword">FROM</span> `dept` <span class="hljs-keyword">WHERE</span> dept_id <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; <span class="hljs-comment">-- 3</span>

<span class="hljs-comment">-- æ­¥éª¤5ï¼šæäº¤äº‹åŠ¡ï¼ˆæ•°æ®æŒä¹…åŒ–ï¼‰</span>
<span class="hljs-keyword">COMMIT</span>;

<span class="hljs-comment">-- è‹¥æ“ä½œå¤±è´¥ï¼Œæ‰§è¡Œå›æ»šï¼šROLLBACK;</span>
</code></pre>
<h2 data-id="heading-9">äº”ã€å®æˆ˜è½åœ°ï¼šä¸åŒå¼€å‘åœºæ™¯ä¸‹çš„äº‹åŠ¡ä½¿ç”¨</h2>
<h4 data-id="heading-10">1. åŸç”Ÿ JDBC ä¸­çš„äº‹åŠ¡æ§åˆ¶</h4>
<p>JDBC é»˜è®¤ä¹Ÿæ˜¯è‡ªåŠ¨æäº¤äº‹åŠ¡ï¼Œéœ€æ‰‹åŠ¨å…³é—­è‡ªåŠ¨æäº¤ï¼Œé€šè¿‡<code>Connection</code>å¯¹è±¡æ§åˆ¶äº‹åŠ¡ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> java.sql.Connection;
<span class="hljs-keyword">import</span> java.sql.DriverManager;
<span class="hljs-keyword">import</span> java.sql.PreparedStatement;
<span class="hljs-keyword">import</span> java.sql.SQLException;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">JdbcTransactionDemo</span> {
    <span class="hljs-comment">// æ•°æ®åº“è¿æ¥ä¿¡æ¯</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">URL</span> <span class="hljs-operator">=</span> <span class="hljs-string">"jdbc:mysql://localhost:3306/test?serverTimezone=UTC&amp;useSSL=false"</span>;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">USER</span> <span class="hljs-operator">=</span> <span class="hljs-string">"root"</span>;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">PASSWORD</span> <span class="hljs-operator">=</span> <span class="hljs-string">"123456"</span>;

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-type">Connection</span> <span class="hljs-variable">conn</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;
        <span class="hljs-type">PreparedStatement</span> <span class="hljs-variable">pstmt1</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;
        <span class="hljs-type">PreparedStatement</span> <span class="hljs-variable">pstmt2</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;

        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// 1. è·å–è¿æ¥</span>
            conn = DriverManager.getConnection(URL, USER, PASSWORD);
            <span class="hljs-comment">// 2. å…³é—­è‡ªåŠ¨æäº¤ï¼ˆå¼€å¯æ‰‹åŠ¨äº‹åŠ¡ï¼‰</span>
            conn.setAutoCommit(<span class="hljs-literal">false</span>);

            <span class="hljs-comment">// 3. æ“ä½œ1ï¼šæ’å…¥æ–°å‘˜å·¥</span>
            <span class="hljs-type">String</span> <span class="hljs-variable">sql1</span> <span class="hljs-operator">=</span> <span class="hljs-string">"INSERT INTO emp (emp_name, emp_salary, hire_date, dept_id, manager_id) VALUES (?, ?, ?, ?, ?)"</span>;
            pstmt1 = conn.prepareStatement(sql1);
            pstmt1.setString(<span class="hljs-number">1</span>, <span class="hljs-string">"é’±å…«"</span>);
            pstmt1.setBigDecimal(<span class="hljs-number">2</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">java</span>.math.BigDecimal(<span class="hljs-string">"14000.00"</span>));
            pstmt1.setDate(<span class="hljs-number">3</span>, java.sql.Date.valueOf(<span class="hljs-string">"2024-01-01"</span>));
            pstmt1.setLong(<span class="hljs-number">4</span>, <span class="hljs-number">1L</span>);
            pstmt1.setLong(<span class="hljs-number">5</span>, <span class="hljs-number">1L</span>);
            pstmt1.executeUpdate();

            <span class="hljs-comment">// 4. æ“ä½œ2ï¼šæ›´æ–°éƒ¨é—¨äººæ•°</span>
            <span class="hljs-type">String</span> <span class="hljs-variable">sql2</span> <span class="hljs-operator">=</span> <span class="hljs-string">"UPDATE dept SET emp_count = emp_count + 1 WHERE dept_id = ?"</span>;
            pstmt2 = conn.prepareStatement(sql2);
            pstmt2.setLong(<span class="hljs-number">1</span>, <span class="hljs-number">1L</span>);
            pstmt2.executeUpdate();

            <span class="hljs-comment">// 5. æäº¤äº‹åŠ¡ï¼ˆæ‰€æœ‰æ“ä½œç”Ÿæ•ˆï¼‰</span>
            conn.commit();
            System.out.println(<span class="hljs-string">"å…¥èŒæ“ä½œæˆåŠŸï¼Œäº‹åŠ¡æäº¤ï¼"</span>);

        } <span class="hljs-keyword">catch</span> (SQLException e) {
            e.printStackTrace();
            <span class="hljs-comment">// 6. å‘ç”Ÿå¼‚å¸¸ï¼Œå›æ»šäº‹åŠ¡</span>
            <span class="hljs-keyword">try</span> {
                <span class="hljs-keyword">if</span> (conn != <span class="hljs-literal">null</span>) {
                    conn.rollback();
                    System.out.println(<span class="hljs-string">"æ“ä½œå¤±è´¥ï¼Œäº‹åŠ¡å›æ»šï¼"</span>);
                }
            } <span class="hljs-keyword">catch</span> (SQLException ex) {
                ex.printStackTrace();
            }
        } <span class="hljs-keyword">finally</span> {
            <span class="hljs-comment">// 7. å…³é—­èµ„æº</span>
            <span class="hljs-keyword">try</span> {
                <span class="hljs-keyword">if</span> (pstmt1 != <span class="hljs-literal">null</span>) pstmt1.close();
                <span class="hljs-keyword">if</span> (pstmt2 != <span class="hljs-literal">null</span>) pstmt2.close();
                <span class="hljs-keyword">if</span> (conn != <span class="hljs-literal">null</span>) {
                    conn.setAutoCommit(<span class="hljs-literal">true</span>); <span class="hljs-comment">// æ¢å¤è‡ªåŠ¨æäº¤</span>
                    conn.close();
                }
            } <span class="hljs-keyword">catch</span> (SQLException e) {
                e.printStackTrace();
            }
        }
    }
}
</code></pre>
<h4 data-id="heading-11">2. MyBatis ä¸­çš„äº‹åŠ¡æ§åˆ¶</h4>
<p>MyBatis çš„äº‹åŠ¡é»˜è®¤ç”±<code>SqlSession</code>æ§åˆ¶ï¼Œé»˜è®¤å…³é—­è‡ªåŠ¨æäº¤ï¼Œéœ€æ‰‹åŠ¨<code>commit()</code>æˆ–<code>rollback()</code>ï¼š</p>
<h5 data-id="heading-12">ï¼ˆ1ï¼‰ç¼–å†™ Mapper æ¥å£å’Œ XML</h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// EmpMapper.java</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">EmpMapper</span> {
    <span class="hljs-comment">// æ’å…¥å‘˜å·¥</span>
    <span class="hljs-type">int</span> <span class="hljs-title function_">insertEmp</span><span class="hljs-params">(Emp emp)</span>;
}

<span class="hljs-comment">// DeptMapper.java</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">DeptMapper</span> {
    <span class="hljs-comment">// æ›´æ–°éƒ¨é—¨äººæ•°</span>
    <span class="hljs-type">int</span> <span class="hljs-title function_">updateDeptCount</span><span class="hljs-params">(<span class="hljs-meta">@Param("deptId")</span> Long deptId, <span class="hljs-meta">@Param("count")</span> <span class="hljs-type">int</span> count)</span>;
}
</code></pre>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- EmpMapper.xml --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">insert</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"insertEmp"</span>&gt;</span>
    INSERT INTO emp (emp_name, emp_salary, hire_date, dept_id, manager_id)
    VALUES (#{empName}, #{empSalary}, #{hireDate}, #{deptId}, #{managerId})
<span class="hljs-tag">&lt;/<span class="hljs-name">insert</span>&gt;</span>

<span class="hljs-comment">&lt;!-- DeptMapper.xml --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">update</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"updateDeptCount"</span>&gt;</span>
    UPDATE dept SET emp_count = emp_count + #{count} WHERE dept_id = #{deptId}
<span class="hljs-tag">&lt;/<span class="hljs-name">update</span>&gt;</span>
</code></pre>
<h5 data-id="heading-13">ï¼ˆ2ï¼‰MyBatis äº‹åŠ¡å®æˆ˜</h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.apache.ibatis.session.SqlSession;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyBatisTransactionDemo</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-comment">// 1. è·å–SqlSessionï¼ˆé»˜è®¤autoCommit=falseï¼‰</span>
        <span class="hljs-keyword">try</span> (<span class="hljs-type">SqlSession</span> <span class="hljs-variable">session</span> <span class="hljs-operator">=</span> MyBatisUtil.getSqlSession(<span class="hljs-literal">false</span>)) {
            <span class="hljs-comment">// 2. è·å–Mapper</span>
            <span class="hljs-type">EmpMapper</span> <span class="hljs-variable">empMapper</span> <span class="hljs-operator">=</span> session.getMapper(EmpMapper.class);
            <span class="hljs-type">DeptMapper</span> <span class="hljs-variable">deptMapper</span> <span class="hljs-operator">=</span> session.getMapper(DeptMapper.class);

            <span class="hljs-comment">// 3. æ„å»ºå‘˜å·¥å¯¹è±¡</span>
            <span class="hljs-type">Emp</span> <span class="hljs-variable">emp</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Emp</span>();
            emp.setEmpName(<span class="hljs-string">"é’±å…«"</span>);
            emp.setEmpSalary(<span class="hljs-keyword">new</span> <span class="hljs-title class_">java</span>.math.BigDecimal(<span class="hljs-string">"14000.00"</span>));
            emp.setHireDate(java.sql.Date.valueOf(<span class="hljs-string">"2024-01-01"</span>));
            emp.setDeptId(<span class="hljs-number">1L</span>);
            emp.setManagerId(<span class="hljs-number">1L</span>);

            <span class="hljs-comment">// 4. æ‰§è¡Œæ“ä½œ</span>
            empMapper.insertEmp(emp);
            deptMapper.updateDeptCount(<span class="hljs-number">1L</span>, <span class="hljs-number">1</span>);

            <span class="hljs-comment">// 5. æäº¤äº‹åŠ¡</span>
            session.commit();
            System.out.println(<span class="hljs-string">"å…¥èŒæ“ä½œæˆåŠŸï¼Œäº‹åŠ¡æäº¤ï¼"</span>);

        } <span class="hljs-keyword">catch</span> (Exception e) {
            e.printStackTrace();
            <span class="hljs-comment">// 6. å¼‚å¸¸å›æ»šï¼ˆtry-with-resourcesä¼šè‡ªåŠ¨å…³é—­sessionï¼Œè§¦å‘rollbackï¼‰</span>
            System.out.println(<span class="hljs-string">"æ“ä½œå¤±è´¥ï¼Œäº‹åŠ¡å›æ»šï¼"</span>);
        }
    }
}
</code></pre>
<h4 data-id="heading-14">3. Spring å£°æ˜å¼äº‹åŠ¡ï¼ˆç”Ÿäº§ç¯å¢ƒé¦–é€‰ï¼‰</h4>
<p>åœ¨ Spring/Spring Boot é¡¹ç›®ä¸­ï¼Œæ¨èä½¿ç”¨<code>@Transactional</code>æ³¨è§£å®ç° â€œå£°æ˜å¼äº‹åŠ¡â€ï¼Œæ— éœ€æ‰‹åŠ¨æ§åˆ¶<code>commit/rollback</code>ï¼Œæ›´ç®€æ´é«˜æ•ˆï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.springframework.stereotype.Service;
<span class="hljs-keyword">import</span> org.springframework.transaction.annotation.Transactional;

<span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">EmpDeptService</span> {
    <span class="hljs-comment">// æ³¨å…¥Mapper</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> EmpMapper empMapper;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> DeptMapper deptMapper;

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">EmpDeptService</span><span class="hljs-params">(EmpMapper empMapper, DeptMapper deptMapper)</span> {
        <span class="hljs-built_in">this</span>.empMapper = empMapper;
        <span class="hljs-built_in">this</span>.deptMapper = deptMapper;
    }

    <span class="hljs-comment">// å£°æ˜äº‹åŠ¡ï¼šé»˜è®¤å‘ç”ŸRuntimeExceptionæ—¶å›æ»š</span>
    <span class="hljs-meta">@Transactional(rollbackFor = Exception.class)</span> <span class="hljs-comment">// æ•è·æ‰€æœ‰å¼‚å¸¸å›æ»š</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">addEmpWithDept</span><span class="hljs-params">(Emp emp)</span> {
        <span class="hljs-comment">// 1. æ’å…¥å‘˜å·¥</span>
        empMapper.insertEmp(emp);
        <span class="hljs-comment">// 2. æ›´æ–°éƒ¨é—¨äººæ•°</span>
        deptMapper.updateDeptCount(emp.getDeptId(), <span class="hljs-number">1</span>);
        
        <span class="hljs-comment">// æ¨¡æ‹Ÿå¼‚å¸¸ï¼ˆæµ‹è¯•å›æ»šï¼‰</span>
        <span class="hljs-comment">// int i = 1 / 0;</span>
    }
}
</code></pre>
<p><strong>å…³é”®è¯´æ˜</strong>ï¼š</p>
<ul>
<li><code>@Transactional</code>é»˜è®¤åªæ•è·<code>RuntimeException</code>ï¼Œéœ€é€šè¿‡<code>rollbackFor = Exception.class</code>æŒ‡å®šæ•è·æ‰€æœ‰å¼‚å¸¸ï¼›</li>
<li>å¯é€šè¿‡<code>isolation</code>å±æ€§è®¾ç½®éš”ç¦»çº§åˆ«ï¼ˆå¦‚<code>isolation = Isolation.REPEATABLE_READ</code>ï¼‰ï¼›</li>
<li>å¯é€šè¿‡<code>propagation</code>å±æ€§è®¾ç½®äº‹åŠ¡ä¼ æ’­è¡Œä¸ºï¼ˆå¦‚<code>REQUIRED</code>ï¼šé»˜è®¤ï¼Œæœ‰äº‹åŠ¡åˆ™åŠ å…¥ï¼Œæ— åˆ™æ–°å»ºï¼‰ã€‚</li>
</ul>
<h2 data-id="heading-15">å…­ã€äº‹åŠ¡çš„å¸¸è§é—®é¢˜ä¸æœ€ä½³å®è·µ</h2>
<h4 data-id="heading-16">1. å¸¸è§é—®é¢˜æ’æŸ¥</h4>
<ul>
<li><strong>äº‹åŠ¡ä¸å›æ»š</strong>ï¼šæ£€æŸ¥æ˜¯å¦æ•è·äº†å¼‚å¸¸ï¼ˆæœªæŠ›å‡ºå¼‚å¸¸åˆ™ Spring ä¸ä¼šå›æ»šï¼‰ã€æ˜¯å¦æ˜¯éè¿è¡Œæ—¶å¼‚å¸¸ï¼ˆéœ€æŒ‡å®š<code>rollbackFor</code>ï¼‰ã€æ˜¯å¦è°ƒç”¨äº†é public æ–¹æ³•ï¼ˆ<code>@Transactional</code>ä»…å¯¹ public æ–¹æ³•ç”Ÿæ•ˆï¼‰ï¼›</li>
<li><strong>é•¿äº‹åŠ¡å¯¼è‡´æ€§èƒ½é—®é¢˜</strong>ï¼šé•¿äº‹åŠ¡ä¼šå ç”¨æ•°æ®åº“è¿æ¥ã€æŒæœ‰é”æ—¶é—´é•¿ï¼Œå¯¼è‡´å¹¶å‘ä¸‹é™ï¼Œéœ€å°½é‡ç¼©å°äº‹åŠ¡èŒƒå›´ï¼›</li>
<li><strong>æ­»é”</strong>ï¼šå¤šä¸ªäº‹åŠ¡äº’ç›¸ç­‰å¾…å¯¹æ–¹æŒæœ‰çš„é”ï¼Œå¯é€šè¿‡<code>SHOW ENGINE INNODB STATUS</code>æŸ¥çœ‹æ­»é”æ—¥å¿—ï¼Œä¼˜åŒ– SQL æ‰§è¡Œé¡ºåºã€‚</li>
</ul>
<h4 data-id="heading-17">2. æ ¸å¿ƒæœ€ä½³å®è·µ</h4>
<h5 data-id="heading-18">ï¼ˆ1ï¼‰å°½é‡ç¼©å°äº‹åŠ¡èŒƒå›´</h5>
<p>åªå°† â€œå¿…é¡»åŸå­æ‰§è¡Œâ€ çš„æ“ä½œæ”¾å…¥äº‹åŠ¡ï¼Œé¿å…æ— å…³æ“ä½œï¼ˆå¦‚æ—¥å¿—æ‰“å°ã€è¿œç¨‹è°ƒç”¨ï¼‰ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Transactional</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">addEmpWithDept</span><span class="hljs-params">(Emp emp)</span> {
    <span class="hljs-comment">// äº‹åŠ¡å†…ï¼šæ ¸å¿ƒæ“ä½œï¼ˆå¿…é¡»åŸå­ï¼‰</span>
    empMapper.insertEmp(emp);
    deptMapper.updateDeptCount(emp.getDeptId(), <span class="hljs-number">1</span>);
}

<span class="hljs-comment">// äº‹åŠ¡å¤–ï¼šæ— å…³æ“ä½œ</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">logEmpAdd</span><span class="hljs-params">(Emp emp)</span> {
    logger.info(<span class="hljs-string">"æ–°å¢å‘˜å·¥ï¼š{}"</span>, emp.getEmpName());
}
</code></pre>
<h5 data-id="heading-19">ï¼ˆ2ï¼‰é¿å…é•¿äº‹åŠ¡</h5>
<ul>
<li>ä¸åœ¨äº‹åŠ¡å†…æ‰§è¡Œè€—æ—¶æ“ä½œï¼ˆå¦‚æ–‡ä»¶ä¸Šä¼ ã€ç¬¬ä¸‰æ–¹æ¥å£è°ƒç”¨ï¼‰ï¼›</li>
<li>æ‰¹é‡æ“ä½œå¯æ‹†åˆ†ä¸ºå¤šä¸ªå°äº‹åŠ¡ï¼ˆå¦‚æ¯ 1000 æ¡æ•°æ®æäº¤ä¸€æ¬¡ï¼‰ã€‚</li>
</ul>
<h5 data-id="heading-20">ï¼ˆ3ï¼‰åˆç†è®¾ç½®éš”ç¦»çº§åˆ«</h5>
<ul>
<li>æ™®é€šä¸šåŠ¡ï¼šä½¿ç”¨ MySQL é»˜è®¤çš„<code>REPEATABLE READ</code>ï¼›</li>
<li>é«˜å¹¶å‘è¯»ä¸šåŠ¡ï¼šå¯é™çº§ä¸º<code>READ COMMITTED</code>ï¼ˆæå‡æ€§èƒ½ï¼‰ï¼›</li>
<li>è´¢åŠ¡ / æ ¸å¿ƒæ•°æ®ï¼šä½¿ç”¨<code>SERIALIZABLE</code>ï¼ˆä¿è¯ç»å¯¹ä¸€è‡´æ€§ï¼‰ã€‚</li>
</ul>
<h5 data-id="heading-21">ï¼ˆ4ï¼‰é¿å…æ‰‹åŠ¨é”ä¸äº‹åŠ¡å†²çª</h5>
<p>å°½é‡åˆ©ç”¨äº‹åŠ¡çš„éš”ç¦»çº§åˆ«å’Œ MVCCï¼Œè€Œéæ‰‹åŠ¨åŠ é”ï¼ˆå¦‚<code>SELECT ... FOR UPDATE</code>ï¼‰ï¼Œæ‰‹åŠ¨é”æ˜“å¯¼è‡´æ­»é”ã€‚</p>
<h5 data-id="heading-22">ï¼ˆ5ï¼‰ç›‘æ§äº‹åŠ¡æ‰§è¡Œæƒ…å†µ</h5>
<p>ç”Ÿäº§ç¯å¢ƒéœ€ç›‘æ§é•¿äº‹åŠ¡ã€æ­»é”ã€äº‹åŠ¡å¤±è´¥ç‡ï¼Œå¯é€šè¿‡ MySQL çš„<code>information_schema</code>è¡¨æŸ¥è¯¢ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- æŸ¥è¯¢å½“å‰è¿è¡Œçš„äº‹åŠ¡</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> information_schema.INNODB_TRX;
<span class="hljs-comment">-- æŸ¥è¯¢æ­»é”æ—¥å¿—</span>
<span class="hljs-keyword">SHOW</span> ENGINE INNODB STATUS;
</code></pre>
<h2 data-id="heading-23">ä¸ƒã€æ€»ç»“ä¸æ‹“å±•</h2>
<p>æœ¬æ–‡ä»¥ â€œéƒ¨é—¨ - å‘˜å·¥â€ åœºæ™¯ä¸ºæ ¸å¿ƒï¼Œè®²è§£äº†äº‹åŠ¡çš„ ACID ç‰¹æ€§ã€éš”ç¦»çº§åˆ«ã€åŸºç¡€è¯­æ³•ï¼Œä»¥åŠ JDBC/MyBatis/Spring ä¸­çš„å®æˆ˜è½åœ°ï¼Œæ ¸å¿ƒè¦ç‚¹æ€»ç»“ï¼š</p>
<ol>
<li>
<p><strong>äº‹åŠ¡çš„æ ¸å¿ƒç›®æ ‡</strong>ï¼šä¿è¯ä¸€ç»„æ“ä½œçš„åŸå­æ€§ï¼Œé¿å…æ•°æ®ä¸ä¸€è‡´ï¼Œéµå¾ª ACID å››å¤§ç‰¹æ€§ï¼›</p>
</li>
<li>
<p><strong>éš”ç¦»çº§åˆ«é€‰æ‹©</strong>ï¼šé»˜è®¤ç”¨<code>REPEATABLE READ</code>ï¼Œæ ¹æ®ä¸šåŠ¡åœºæ™¯å¹³è¡¡ â€œéš”ç¦»æ€§â€ å’Œ â€œå¹¶å‘æ€§èƒ½â€ï¼›</p>
</li>
<li>
<p><strong>å®æˆ˜å»ºè®®</strong>ï¼š</p>
<ul>
<li>åŸç”Ÿ JDBC/MyBatisï¼šæ‰‹åŠ¨æ§åˆ¶<code>commit/rollback</code>ï¼Œå…³é—­è‡ªåŠ¨æäº¤ï¼›</li>
<li>Spring é¡¹ç›®ï¼šä¼˜å…ˆä½¿ç”¨<code>@Transactional</code>å£°æ˜å¼äº‹åŠ¡ï¼Œç®€åŒ–å¼€å‘ï¼›</li>
</ul>
</li>
<li>
<p><strong>æ€§èƒ½ä¼˜åŒ–</strong>ï¼šç¼©å°äº‹åŠ¡èŒƒå›´ã€é¿å…é•¿äº‹åŠ¡ã€ç›‘æ§æ­»é”å’Œé•¿äº‹åŠ¡ã€‚</p>
</li>
</ol>
<h4 data-id="heading-24">æ‹“å±•æ–¹å‘ï¼š</h4>
<ul>
<li><strong>åˆ†å¸ƒå¼äº‹åŠ¡</strong>ï¼šè·¨å¤šä¸ªæ•°æ®åº“ / æœåŠ¡çš„äº‹åŠ¡ï¼Œå¯ä½¿ç”¨ Seataã€TCCã€SAGA ç­‰æ–¹æ¡ˆï¼›</li>
<li><strong>äº‹åŠ¡æ—¥å¿—</strong>ï¼šäº†è§£ Redo Log/Undo Log çš„å·¥ä½œåŸç†ï¼Œç†è§£äº‹åŠ¡æŒä¹…æ€§å’Œå›æ»šçš„åº•å±‚å®ç°ï¼›</li>
<li><strong>é”æœºåˆ¶</strong>ï¼šæ·±å…¥å­¦ä¹  InnoDB çš„è¡Œé”ã€è¡¨é”ã€é—´éš™é”ï¼Œç†è§£éš”ç¦»çº§åˆ«ä¸é”çš„å…³ç³»ã€‚</li>
</ul>
<p>äº‹åŠ¡æ˜¯æ•°æ®åº“ä¿è¯æ•°æ®ä¸€è‡´æ€§çš„æ ¸å¿ƒæœºåˆ¶ï¼Œä¹Ÿæ˜¯ä¼ä¸šçº§å¼€å‘ä¸­å¿…é¡»æŒæ¡çš„æŠ€èƒ½ã€‚æŒæ¡äº‹åŠ¡çš„ä½¿ç”¨ä¸ä¼˜åŒ–ï¼Œä¸ä»…èƒ½é¿å…æ•°æ®é”™è¯¯ï¼Œè¿˜èƒ½æå‡ç³»ç»Ÿçš„å¹¶å‘æ€§èƒ½å’Œç¨³å®šæ€§ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Pyinstallerè¿›é˜¶ä¹‹æ„å»ºç®¡ç†å¤§æ€å™¨-SPECæ–‡ä»¶]]></title>    <link>https://juejin.cn/post/7588086766235369510</link>    <guid>https://juejin.cn/post/7588086766235369510</guid>    <pubDate>2025-12-26T12:35:15.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588086766235369510" data-draft-id="7587997893987713051" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Pyinstallerè¿›é˜¶ä¹‹æ„å»ºç®¡ç†å¤§æ€å™¨-SPECæ–‡ä»¶"/> <meta itemprop="keywords" content="åç«¯,Python,ç¨‹åºå‘˜"/> <meta itemprop="datePublished" content="2025-12-26T12:35:15.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å”å”åœ¨å­¦ä¹ "/> <meta itemprop="url" content="https://juejin.cn/user/4009253326568761"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Pyinstallerè¿›é˜¶ä¹‹æ„å»ºç®¡ç†å¤§æ€å™¨-SPECæ–‡ä»¶
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4009253326568761/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å”å”åœ¨å­¦ä¹ 
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-26T12:35:15.000Z" title="Fri Dec 26 2025 12:35:15 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    7
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>ç”¨è¿‡ <code>python</code> æ‰“åŒ…ç”Ÿæˆ <code>Windows</code> å¯æ‰§è¡Œç¨‹åºçš„åŒå­¦ï¼Œå¤§æ¦‚ç‡éƒ½ç”¨è¿‡å¤§åé¼é¼çš„ <code>pyinstaller</code> åº“å§ã€‚</p>
</blockquote>
<p><code>pyinstaller</code> å¦‚æœæƒ³æœ€ç»ˆç”Ÿæˆçš„å¯æ‰§è¡Œç¨‹åºï¼ŒåŒ…æ‹¬åªé™å®šçš„ <code>python</code> æŒ‡å®šæ¨¡å—æˆ–è€…è¦é¢å¤–çš„é™æ€èµ„æºæ–‡ä»¶ï¼Œå†™æ‰§è¡ŒæŒ‡ä»¤ä¸€èˆ¬éƒ½å¾ˆé•¿çš„ã€‚</p>
<pre><code class="hljs language-shell" lang="shell">pyinstaller --noconfirm --log-level=WARN \
    --onefile --nowindow \
    --add-data="README:." \
    --add-data="image1.png:img" \
    --add-binary="libfoo.so:lib" \
    --hidden-import=secret1 \
    --hidden-import=secret2 \
    --upx-dir=/usr/local/share
</code></pre>
<p>è€Œæœ‰æ²¡æœ‰ä¸€ç§æ–¹å¼å¯ä»¥æ›´å¥½åœ°è¿›è¡Œ <code>pyinstaller</code> çš„æ„å»ºç®¡ç†å‘¢ï¼Ÿçœ‹ <a href="https://link.juejin.cn?target=https%3A%2F%2Fpyinstaller.org%2Fen%2Fstable%2Fspec-files.html" target="_blank" title="https://pyinstaller.org/en/stable/spec-files.html" ref="nofollow noopener noreferrer">å®˜ç½‘æ–‡æ¡£ï¼šUsing Spec Files â€” PyInstaller 6.17.0 documentation</a>ï¼Œé‚£å°±æ˜¯ä½¿ç”¨ <code>spec</code> æ–‡ä»¶è¿›è¡Œæ„å»ºç®¡ç†ã€‚</p>
<p>PSï¼šå¦‚æœå¯¹ pyinstaller åŸºç¡€ä½¿ç”¨ä¸å¤ªäº†è§£ï¼Œä¹Ÿå¯ä»¥çœ‹çœ‹å°ç¼–çš„å¾€æœŸæ–‡ç« ã€‚
<a href="https://juejin.cn/post/7562095444215791631" target="_blank" title="https://juejin.cn/post/7562095444215791631">Pyinstaller - Pythonæ¡Œé¢åº”ç”¨æ‰“åŒ…çš„é¦–é€‰å·¥å…· - æ˜é‡‘</a></p>
<h2 data-id="heading-0">1. specæ–‡ä»¶çš„æ„æˆå’Œä½¿ç”¨</h2>
<p>Q1ï¼šæ€ä¹ˆä½¿ç”¨ <code>spec</code> æ–‡ä»¶å‘¢ï¼Ÿå¾ˆç®€å•ï¼šæ‰§è¡Œ <code>pyinstaller</code> æŒ‡ä»¤æ—¶å¸¦ä¸Šå¯¹åº”çš„ <code>spec</code> æ–‡ä»¶å³å¯ã€‚</p>
<pre><code class="hljs language-shell" lang="shell">pyinstaller --clean --noconfirm xxx.spec
</code></pre>
<p>Q2ï¼š<code>spec</code> æ–‡ä»¶æ˜¯æ€ä¹ˆåšåˆ°æœ‰æ•ˆæ„å»ºå’Œç®¡ç†æ¨¡å—å’Œèµ„æºæ–‡ä»¶çš„å‘¢ï¼Ÿ</p>
<p>ä¸»è¦é€šè¿‡ä¸‹é¢å‡ ä¸ªæ ¸å¿ƒçš„é…ç½®æ­¥éª¤ï¼šAnalysis-åˆ†æä¾èµ– â†’ PYZ-æ‰“åŒ…æ¨¡å— â†’ EXE-ç”Ÿæˆexe â†’ [COLLECT-æ”¶é›†æ–‡ä»¶]</p>
<p>ğŸ’¡æ¸©é¦¨æç¤ºï¼šå•æ–‡ä»¶æ¨¡å¼ä¸‹ï¼Œä¸éœ€è¦é¢å¤–è¿›è¡Œç¬¬å››æ­¥éª¤æ”¶é›†æ–‡ä»¶ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a15f5b28c8a5419ba3ab92cec90b88f6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZSQ5Y-U5Zyo5a2m5Lmg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767405208&amp;x-signature=iCNIkuDSi2hm%2BAUjxVePCugSJEw%3D" alt="" loading="lazy"/></p>
<p>ä¸‹é¢å…·ä½“å±•å¼€è¿›è¡Œä»‹ç»ã€‚</p>
<hr/>
<h2 data-id="heading-1">2. Analysis ç±»</h2>
<h3 data-id="heading-2">2.1 ä½œç”¨åœºæ™¯</h3>
<p><strong>ä¾èµ–åˆ†æå™¨</strong>ï¼Œè¿™æ˜¯æ‰“åŒ…è¿‡ç¨‹çš„æ ¸å¿ƒæ­¥éª¤ã€‚å®ƒä¼šï¼š</p>
<ul>
<li>åˆ†æä½ çš„Pythonè„šæœ¬</li>
<li>é€’å½’æŸ¥æ‰¾æ‰€æœ‰å¯¼å…¥çš„æ¨¡å—</li>
<li>æ”¶é›†æ‰€æœ‰éœ€è¦çš„æ–‡ä»¶ï¼ˆPythonæ¨¡å—ã€æ‰©å±•æ¨¡å—ã€æ•°æ®æ–‡ä»¶ç­‰ï¼‰</li>
</ul>
<blockquote>
<p>âœï¸ å¼€å¤´è¯´çš„ç®¡ç†æ¨¡å—å’Œæ•°æ®æ–‡ä»¶ï¼Œå°±ä¸»è¦åœ¨è¿™é‡Œè¿›è¡Œé…ç½®çš„ã€‚</p>
</blockquote>
<h3 data-id="heading-3">2.2 å‚æ•°é…ç½®è¯¦è§£</h3>
<p>è¿™é‡Œæˆ‘ç”¨çš„æ¯”è¾ƒå¤šçš„å°±Â <code>excludes</code>Â ã€<code>hiddenimports</code>Â å’ŒÂ <code>datas</code>ï¼Œå…¶ä»–é»˜è®¤å¡«å†™æˆ–æŒ‰ç…§æ¨¡æ¿å³å¯ã€‚</p>
<pre><code class="hljs language-python" lang="python">a = Analysis(
    <span class="hljs-comment"># ============ å¿…éœ€å‚æ•° ============</span>
    scripts=[<span class="hljs-string">'main.py'</span>],  <span class="hljs-comment"># ä¸»è„šæœ¬åˆ—è¡¨</span>

    <span class="hljs-comment"># ============ è·¯å¾„ç›¸å…³ ============</span>
    pathex=[<span class="hljs-string">'/path/to/project'</span>, <span class="hljs-string">'/another/path'</span>],  <span class="hljs-comment"># æ¨¡å—æœç´¢è·¯å¾„</span>
    hookspath=[<span class="hljs-string">'custom_hooks'</span>],  <span class="hljs-comment"># è‡ªå®šä¹‰hookæ–‡ä»¶è·¯å¾„</span>
    runtime_hooks=[<span class="hljs-string">'runtime_hooks/hook-qt.py'</span>],  <span class="hljs-comment"># è¿è¡Œæ—¶hookè„šæœ¬</span>

    <span class="hljs-comment"># ============ æ¨¡å—å¤„ç† ============</span>
    excludes=[                          <span class="hljs-comment"># æ’é™¤çš„æ¨¡å—ï¼ˆå‡å°‘åŒ…ä½“ç§¯ï¼‰</span>
        <span class="hljs-string">'tkinter'</span>,
        <span class="hljs-string">'unittest'</span>,
        <span class="hljs-string">'pydoc'</span>,
        <span class="hljs-string">'pdb'</span>,
        <span class="hljs-string">'matplotlib'</span>
    ],
    hiddenimports=[                     <span class="hljs-comment"># éšè—å¯¼å…¥ï¼ˆåŠ¨æ€å¯¼å…¥çš„æ¨¡å—ï¼‰</span>
        <span class="hljs-string">'PIL._imaging'</span>,
        <span class="hljs-string">'sklearn.utils._weight_vector'</span>,
        <span class="hljs-string">'pandas._libs.tslibs.timedeltas'</span>
    ],
    win_no_prefer_redirects=<span class="hljs-literal">False</span>,      <span class="hljs-comment"># Windowsä¸“ç”¨ï¼šDLLé‡å®šå‘</span>
    win_private_assemblies=<span class="hljs-literal">False</span>,       <span class="hljs-comment"># Windowsä¸“ç”¨ï¼šç§æœ‰ç¨‹åºé›†</span>

    <span class="hljs-comment"># ============ æ–‡ä»¶æ”¶é›† ============</span>
    datas=[                            <span class="hljs-comment"># éPythonæ–‡ä»¶ï¼ˆé…ç½®æ–‡ä»¶ã€å›¾ç‰‡ç­‰ï¼‰</span>
        (<span class="hljs-string">'config.json'</span>, <span class="hljs-string">'.'</span>),          <span class="hljs-comment"># (æºæ–‡ä»¶, ç›®æ ‡ç›®å½•)</span>
        (<span class="hljs-string">'images/*.png'</span>, <span class="hljs-string">'images'</span>),
        (<span class="hljs-string">'data/*.csv'</span>, <span class="hljs-string">'data'</span>)
    ],
    binaries=[                         <span class="hljs-comment"># äºŒè¿›åˆ¶æ–‡ä»¶ï¼ˆ.so, .dllç­‰ï¼‰</span>
        (<span class="hljs-string">'/usr/lib/libssl.so'</span>, <span class="hljs-string">'lib'</span>), <span class="hljs-comment"># (æºæ–‡ä»¶, ç›®æ ‡ç›®å½•)</span>
        (<span class="hljs-string">'C:/Windows/System32/msvcp140.dll'</span>, <span class="hljs-string">'.'</span>)
    ],

    <span class="hljs-comment"># ============ é«˜çº§é€‰é¡¹ ============</span>
    cipher=block_cipher,               <span class="hljs-comment"># åŠ å¯†å­—èŠ‚ç çš„å¯†é’¥</span>
    noarchive=<span class="hljs-literal">False</span>,                   <span class="hljs-comment"># True=ä¸è§£å‹åˆ°ä¸´æ—¶ç›®å½•</span>
    optimize=<span class="hljs-number">0</span>,                        <span class="hljs-comment"># å­—èŠ‚ç ä¼˜åŒ–çº§åˆ«ï¼š-1, 0, 1, 2</span>
    upx=<span class="hljs-literal">False</span>,                         <span class="hljs-comment"># æ˜¯å¦ç”¨UPXå‹ç¼©ï¼ˆå·²å¼ƒç”¨ï¼Œåœ¨EXEä¸­è®¾ç½®ï¼‰</span>
    upx_exclude=[],                    <span class="hljs-comment"># æ’é™¤UPXå‹ç¼©çš„æ–‡ä»¶</span>
    strip=<span class="hljs-literal">False</span>,                       <span class="hljs-comment"># æ˜¯å¦å»é™¤ç¬¦å·ä¿¡æ¯</span>
    prefetch=<span class="hljs-literal">False</span>,                    <span class="hljs-comment"># é¢„å–æ¨¡å¼ï¼ˆå®éªŒæ€§ï¼‰</span>
    name=<span class="hljs-literal">None</span>,                         <span class="hljs-comment"># åˆ†æåç§°ï¼ˆç”¨äºå¤šç¨‹åºæ‰“åŒ…ï¼‰</span>
)
</code></pre>
<h3 data-id="heading-4">2.3 å®é™…ç¤ºä¾‹</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># å¤æ‚çš„Analysisé…ç½®</span>
block_cipher = pyi_crypto.PyiBlockCipher(key=<span class="hljs-string">'my-secret-key'</span>)

a = Analysis(
    [<span class="hljs-string">'app_main.py'</span>, <span class="hljs-string">'helper.py'</span>],  <span class="hljs-comment"># å¤šä¸ªå…¥å£æ–‡ä»¶</span>
    pathex=[os.getcwd(), <span class="hljs-string">'../shared_libs'</span>],
    binaries=[
        (<span class="hljs-string">'lib/ffmpeg.exe'</span>, <span class="hljs-string">'bin'</span>),
        (<span class="hljs-string">'lib/iconv.dll'</span>, <span class="hljs-string">'bin'</span>)
    ],
    datas=[
        (<span class="hljs-string">'ui/*.ui'</span>, <span class="hljs-string">'ui'</span>),           <span class="hljs-comment"># Qt Designeræ–‡ä»¶</span>
        (<span class="hljs-string">'locales/*.qm'</span>, <span class="hljs-string">'locales'</span>), <span class="hljs-comment"># ç¿»è¯‘æ–‡ä»¶</span>
        (<span class="hljs-string">'*.ini'</span>, <span class="hljs-string">'.'</span>),              <span class="hljs-comment"># é…ç½®æ–‡ä»¶</span>
        (<span class="hljs-string">'docs/*.md'</span>, <span class="hljs-string">'docs'</span>)
    ],
    hiddenimports=[
        <span class="hljs-string">'win32timezone'</span>,             <span class="hljs-comment"># pywin32ç›¸å…³</span>
        <span class="hljs-string">'sqlalchemy.sql.default_comparator'</span>,
        <span class="hljs-string">'pkg_resources.py2_warn'</span>
    ],
    hookspath=[<span class="hljs-string">'hooks'</span>],             <span class="hljs-comment"># è‡ªå®šä¹‰hookç›®å½•</span>
    runtime_hooks=[<span class="hljs-string">'hooks/runtime/rthook_pyside6.py'</span>],
    excludes=[<span class="hljs-string">'scipy'</span>, <span class="hljs-string">'numpy.testing'</span>],
    cipher=block_cipher,
    optimize=<span class="hljs-number">1</span>                       <span class="hljs-comment"># å­—èŠ‚ç ä¼˜åŒ–</span>
)
</code></pre>
<h2 data-id="heading-5">3. EXE ç±»</h2>
<h3 data-id="heading-6">3.1 ä½œç”¨åœºæ™¯</h3>
<p><strong>å¯æ‰§è¡Œæ–‡ä»¶æ„å»ºå™¨</strong>ï¼Œå°†åˆ†æç»“æœæ‰“åŒ…æˆæœ€ç»ˆçš„å¯æ‰§è¡Œæ–‡ä»¶ã€‚</p>
<h3 data-id="heading-7">3.2 å‚æ•°é…ç½®è¯¦è§£</h3>
<pre><code class="hljs language-python" lang="python">exe = EXE(
    <span class="hljs-comment"># ============ å¿…éœ€å‚æ•° ============</span>
    pyz,                <span class="hljs-comment"># PYZå¯¹è±¡ï¼ˆåŒ…å«æ‰€æœ‰Pythonæ¨¡å—ï¼‰</span>
    a.scripts,          <span class="hljs-comment"># Analysisçš„scriptsç»“æœ</span>
    a.binaries,         <span class="hljs-comment"># Analysisçš„binariesç»“æœ</span>
    a.zipfiles,         <span class="hljs-comment"># Analysisçš„zipfilesç»“æœ</span>
    a.datas,            <span class="hljs-comment"># Analysisçš„datasç»“æœ</span>

    <span class="hljs-comment"># ============ è¾“å‡ºé…ç½® ============</span>
    name=<span class="hljs-string">'MyApp'</span>,       <span class="hljs-comment"># è¾“å‡ºæ–‡ä»¶åï¼ˆä¸åŠ .exeï¼‰</span>
    debug=<span class="hljs-literal">False</span>,        <span class="hljs-comment"># True=åŒ…å«è°ƒè¯•ä¿¡æ¯</span>
    strip=<span class="hljs-literal">False</span>,        <span class="hljs-comment"># True=å»é™¤ç¬¦å·ä¿¡æ¯ï¼ˆå‡å°ä½“ç§¯ï¼‰</span>
    upx=<span class="hljs-literal">True</span>,           <span class="hljs-comment"># True=ä½¿ç”¨UPXå‹ç¼©ï¼ˆéœ€å®‰è£…UPXï¼‰</span>

    <span class="hljs-comment"># ============ æ§åˆ¶å°/çª—å£è®¾ç½® ============</span>
    console=<span class="hljs-literal">True</span>,       <span class="hljs-comment"># True=æ§åˆ¶å°ç¨‹åºï¼ŒFalse=çª—å£ç¨‹åºï¼ˆWindowsï¼‰</span>
    disable_windowed_traceback=<span class="hljs-literal">False</span>,  <span class="hljs-comment"># ç¦ç”¨çª—å£ç¨‹åºé”™è¯¯è·Ÿè¸ª</span>
    argv_emulation=<span class="hljs-literal">False</span>,  <span class="hljs-comment"># macOS: æ¨¡æ‹Ÿå‘½ä»¤è¡Œå‚æ•°</span>

    <span class="hljs-comment"># ============ å›¾æ ‡å’Œå…ƒæ•°æ® ============</span>
    icon=<span class="hljs-string">'app.ico'</span>,     <span class="hljs-comment"># ç¨‹åºå›¾æ ‡ï¼ˆWindows: .ico, macOS: .icnsï¼‰</span>

    <span class="hljs-comment"># ============ è¿è¡Œæ—¶è¡Œä¸º ============</span>
    bootloader_ignore_signals=<span class="hljs-literal">False</span>,  <span class="hljs-comment"># å¿½ç•¥ä¿¡å·ï¼ˆUnixï¼‰</span>
    runtime_tmpdir=<span class="hljs-literal">None</span>,  <span class="hljs-comment"># ä¸´æ—¶ç›®å½•è·¯å¾„</span>

    <span class="hljs-comment"># ============ é‡å®šå‘è®¾ç½® ============</span>
    exclude_binaries=<span class="hljs-literal">False</span>,  <span class="hljs-comment"># True=ä¸åŒ…å«äºŒè¿›åˆ¶ä¾èµ–</span>
    code_signing_identity=<span class="hljs-literal">None</span>,  <span class="hljs-comment"># macOSä»£ç ç­¾åæ ‡è¯†</span>

    <span class="hljs-comment"># ============ åŠ å¯†å’Œä¼˜åŒ– ============</span>
    entitlements_file=<span class="hljs-literal">None</span>,  <span class="hljs-comment"># macOSæˆæƒæ–‡ä»¶</span>
    embed_manifest=<span class="hljs-literal">True</span>,     <span class="hljs-comment"># Windows: åµŒå…¥manifest</span>
    target_arch=<span class="hljs-literal">None</span>,        <span class="hljs-comment"># ç›®æ ‡æ¶æ„ï¼š'x86', 'x64', 'arm64'</span>

    <span class="hljs-comment"># ============ å…¶ä»–é€‰é¡¹ ============</span>
    <span class="hljs-built_in">ascii</span>=<span class="hljs-literal">False</span>,        <span class="hljs-comment"># å¼ƒç”¨</span>
    uac_admin=<span class="hljs-literal">False</span>,    <span class="hljs-comment"># Windows: ä»¥ç®¡ç†å‘˜è¿è¡Œ</span>
    uac_uiaccess=<span class="hljs-literal">False</span>, <span class="hljs-comment"># Windows: UIè®¿é—®æƒé™</span>

    <span class="hljs-comment"># ============ è°ƒè¯•ç›¸å…³ ============</span>
    bootloader_ignore_signals=<span class="hljs-literal">False</span>,
    strict_arch=<span class="hljs-literal">False</span>,
)
</code></pre>
<h3 data-id="heading-8">3.3 å®é™…ç¤ºä¾‹</h3>
<p>è¿™é‡Œè¿˜çœŸæ²¡æ€ä¹ˆå·®å¼‚åŒ–ä½¿ç”¨è¿‡ï¼Œä¸€èˆ¬éƒ½æ˜¯é…ç½®Â <code>win</code>Â å¹³å°ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># ä¸åŒå¹³å°é…ç½®ç¤ºä¾‹</span>
<span class="hljs-keyword">if</span> sys.platform == <span class="hljs-string">'win32'</span>:
    exe = EXE(
        pyz,
        a.scripts,
        a.binaries,
        a.zipfiles,
        a.datas,
        name=<span class="hljs-string">'MyApp'</span>,
        debug=<span class="hljs-literal">False</span>,
        strip=<span class="hljs-literal">False</span>,
        upx=<span class="hljs-literal">True</span>,
        console=<span class="hljs-literal">False</span>,  <span class="hljs-comment"># æ— æ§åˆ¶å°çª—å£</span>
        icon=<span class="hljs-string">'app.ico'</span>,
        uac_admin=<span class="hljs-literal">True</span>,  <span class="hljs-comment"># éœ€è¦ç®¡ç†å‘˜æƒé™</span>
        embed_manifest=<span class="hljs-literal">True</span>,
        version=<span class="hljs-string">'version_info.txt'</span>  <span class="hljs-comment"># Windowsç‰ˆæœ¬èµ„æº</span>
    )
<span class="hljs-keyword">elif</span> sys.platform == <span class="hljs-string">'darwin'</span>:
    exe = EXE(
        pyz,
        a.scripts,
        a.binaries,
        a.zipfiles,
        a.datas,
        name=<span class="hljs-string">'MyApp'</span>,
        debug=<span class="hljs-literal">False</span>,
        strip=<span class="hljs-literal">True</span>,
        upx=<span class="hljs-literal">False</span>,
        console=<span class="hljs-literal">False</span>,
        icon=<span class="hljs-string">'app.icns'</span>,
        entitlements_file=<span class="hljs-string">'app.entitlements'</span>,
        code_signing_identity=<span class="hljs-string">'Developer ID Application: Your Name (XXXXXX)'</span>
    )
<span class="hljs-keyword">else</span>:  <span class="hljs-comment"># Linux</span>
    exe = EXE(
        pyz,
        a.scripts,
        a.binaries,
        a.zipfiles,
        a.datas,
        name=<span class="hljs-string">'myapp'</span>,
        debug=<span class="hljs-literal">False</span>,
        strip=<span class="hljs-literal">True</span>,
        upx=<span class="hljs-literal">True</span>,
        console=<span class="hljs-literal">True</span>  <span class="hljs-comment"># Linuxé€šå¸¸ç”¨æ§åˆ¶å°</span>
    )
</code></pre>
<h2 data-id="heading-9">4. todo-liståº”ç”¨å®Œæ•´æ–‡ä»¶ç¤ºä¾‹</h2>
<p>ä»¥æœ€è¿‘æˆ‘åœ¨æ’°å†™çš„ <code>todo-list</code> åº”ç”¨çš„æ‰“åŒ…é…ç½®æ–‡ä»¶ä¸ºä¾‹ï¼Œè¿™ä¸ªä¸»è¦æ˜¯ <code>AI</code> ç¼–å†™çš„ï¼Œæˆ‘å°±æ”¹äº†å‡ è¡Œä»£ç è€Œå·²ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># -*- mode: python ; coding: utf-8 -*-</span>

<span class="hljs-keyword">import</span> sys
<span class="hljs-keyword">from</span> pathlib <span class="hljs-keyword">import</span> Path

<span class="hljs-comment"># è·å–é¡¹ç›®æ ¹ç›®å½•</span>
project_root = Path(SPECPATH).parent
frontend_dir = project_root / <span class="hljs-string">'frontend'</span>
data_dir = project_root / <span class="hljs-string">'data'</span>

<span class="hljs-comment"># æ”¶é›†å‰ç«¯æ–‡ä»¶</span>
frontend_files = [
 (<span class="hljs-string">'frontend/index.html'</span>, <span class="hljs-string">'frontend/'</span>),
 (<span class="hljs-string">'frontend/css/*'</span>, <span class="hljs-string">'frontend/css'</span>),
 (<span class="hljs-string">'frontend/js/*'</span>, <span class="hljs-string">'frontend/js'</span>)
]

<span class="hljs-comment"># æ”¶é›†æ•°æ®æ–‡ä»¶</span>
data_files = []
<span class="hljs-keyword">if</span> data_dir.exists():
    <span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> data_dir.rglob(<span class="hljs-string">'*'</span>):
        <span class="hljs-keyword">if</span> item.is_file():
            relative_path = item.relative_to(data_dir)
            data_files.append((<span class="hljs-built_in">str</span>(item), <span class="hljs-string">'data'</span>))

block_cipher = <span class="hljs-literal">None</span>

a = Analysis(
    [<span class="hljs-string">'run.py'</span>],
    pathex=[<span class="hljs-built_in">str</span>(project_root), <span class="hljs-built_in">str</span>(project_root / <span class="hljs-string">'backend'</span>), <span class="hljs-built_in">str</span>(project_root / <span class="hljs-string">'TodoList'</span> / <span class="hljs-string">'backend'</span>)],
    binaries=[],
    datas=frontend_files + data_files,
    hiddenimports=[
        <span class="hljs-string">'webview'</span>,
        <span class="hljs-string">'webview.platforms'</span>,
        <span class="hljs-string">'webview.platforms.cef'</span>,
        <span class="hljs-string">'webview.platforms.edgechromium'</span>,
        <span class="hljs-string">'webview.platforms.mshtml'</span>,
        <span class="hljs-string">'webview.platforms.gtk'</span>,
        <span class="hljs-string">'webview.platforms.cocoa'</span>,
        <span class="hljs-string">'webview.platforms.qt'</span>,
        <span class="hljs-string">'sqlite3'</span>,
        <span class="hljs-string">'json'</span>,
        <span class="hljs-string">'threading'</span>,
        <span class="hljs-string">'datetime'</span>,
        <span class="hljs-string">'http.server'</span>,
        <span class="hljs-string">'socketserver'</span>,
        <span class="hljs-string">'urllib.parse'</span>,
        <span class="hljs-string">'pathlib'</span>,
        <span class="hljs-string">'os'</span>,
        <span class="hljs-string">'sys'</span>,
        <span class="hljs-string">'shutil'</span>,
        <span class="hljs-string">'subprocess'</span>,
        <span class="hljs-string">'re'</span>,
        <span class="hljs-string">'uuid'</span>,
        <span class="hljs-string">'hashlib'</span>,
        <span class="hljs-string">'base64'</span>,
        <span class="hljs-string">'html'</span>,
        <span class="hljs-string">'webbrowser'</span>,
        <span class="hljs-string">'tkinter'</span>,
        <span class="hljs-string">'tkinter.messagebox'</span>,
        <span class="hljs-string">'tkinter.filedialog'</span>,
        <span class="hljs-string">'tkinter.simpledialog'</span>,
        <span class="hljs-comment"># åç«¯æ¨¡å—</span>
        <span class="hljs-string">'database.operations'</span>,
        <span class="hljs-string">'database.models'</span>,
        <span class="hljs-string">'api.todo_api'</span>
    ],
    hookspath=[],
    hooksconfig={},
    runtime_hooks=[],
    excludes=[
        <span class="hljs-string">'matplotlib'</span>,
        <span class="hljs-string">'numpy'</span>,
        <span class="hljs-string">'scipy'</span>,
        <span class="hljs-string">'pandas'</span>,
        <span class="hljs-string">'PIL'</span>,
        <span class="hljs-string">'cv2'</span>,
        <span class="hljs-string">'PyQt6'</span>
    ],
    win_no_prefer_redirects=<span class="hljs-literal">False</span>,
    win_private_assemblies=<span class="hljs-literal">False</span>,
    cipher=block_cipher,
    noarchive=<span class="hljs-literal">False</span>,
)

pyz = PYZ(a.pure, a.zipped_data, cipher=block_cipher)

exe = EXE(
    pyz,
    a.scripts,
    a.binaries,
    a.zipfiles,
    a.datas,
    [],
    name=<span class="hljs-string">'TodoList'</span>,
    debug=<span class="hljs-literal">False</span>,
    bootloader_ignore_signals=<span class="hljs-literal">False</span>,
    strip=<span class="hljs-literal">False</span>,
    upx=<span class="hljs-literal">True</span>,
    upx_exclude=[],
    runtime_tmpdir=<span class="hljs-literal">None</span>,
    console=<span class="hljs-literal">False</span>,
    disable_windowed_traceback=<span class="hljs-literal">False</span>,
    argv_emulation=<span class="hljs-literal">False</span>,
    target_arch=<span class="hljs-literal">None</span>,
    codesign_identity=<span class="hljs-literal">None</span>,
    entitlements_file=<span class="hljs-literal">None</span>,
    icon=<span class="hljs-string">'todo_icon.ico'</span> <span class="hljs-keyword">if</span> Path(<span class="hljs-string">'todo_icon.ico'</span>).exists() <span class="hljs-keyword">else</span> <span class="hljs-literal">None</span>,
    version=<span class="hljs-string">'version_info.txt'</span> <span class="hljs-keyword">if</span> Path(<span class="hljs-string">'version_info.txt'</span>).exists() <span class="hljs-keyword">else</span> <span class="hljs-literal">None</span>
)
</code></pre>
<p>ç¤ºä¾‹ä¸Šå¯ä»¥çœ‹å‡ºå®é™…ä¸Šï¼Œ<code>spec</code> æ–‡ä»¶æ‰§è¡Œæ—¶æ˜¯å¯ä»¥è¯†åˆ« <code>python</code> ä»£ç çš„ã€‚</p>
<h2 data-id="heading-10">5. è¡¥å……è¯´æ˜</h2>
<h3 data-id="heading-11">5.1 é’ˆå¯¹ç‰¹å®šåº“çš„é…ç½®</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># æ‰“åŒ…PyQt6/PySide6åº”ç”¨</span>
a = Analysis(
    [<span class="hljs-string">'app.py'</span>],
    hiddenimports=[
        <span class="hljs-string">'PySide6.QtXml'</span>,
        <span class="hljs-string">'PySide6.QtNetwork'</span>
    ],
    binaries=[
        (<span class="hljs-string">'/path/to/qt/plugins/platforms/*'</span>, <span class="hljs-string">'platforms'</span>)
    ],
    datas=[
        (<span class="hljs-string">'/path/to/qt/translations/*'</span>, <span class="hljs-string">'translations'</span>)
    ]
)

<span class="hljs-comment"># æ‰“åŒ…æœºå™¨å­¦ä¹ åº”ç”¨ï¼ˆæ’é™¤å¤§å‹åº“ï¼‰</span>
a = Analysis(
    [<span class="hljs-string">'ml_app.py'</span>],
    excludes=[
        <span class="hljs-string">'torch'</span>,  <span class="hljs-comment"># å¤ªå¤§ï¼Œè®©ç”¨æˆ·è‡ªå·±å®‰è£…</span>
        <span class="hljs-string">'tensorflow'</span>,
        <span class="hljs-string">'jax'</span>
    ],
    hiddenimports=[
        <span class="hljs-string">'sklearn.utils._cython_blas'</span>,
        <span class="hljs-string">'numpy.core._multiarray_umath'</span>
    ]
)
</code></pre>
<h3 data-id="heading-12">5.2 è°ƒè¯•æŠ€å·§</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># è°ƒè¯•æ¨¡å¼é…ç½®</span>
exe = EXE(
    <span class="hljs-comment"># ...</span>
    debug=<span class="hljs-literal">True</span>,      <span class="hljs-comment"># åŒ…å«è°ƒè¯•ä¿¡æ¯</span>
    strip=<span class="hljs-literal">False</span>,     <span class="hljs-comment"># ä¸å»é™¤ç¬¦å·</span>
    upx=<span class="hljs-literal">False</span>,       <span class="hljs-comment"># ä¸å‹ç¼©ï¼ˆä¾¿äºè°ƒè¯•ï¼‰</span>
    console=<span class="hljs-literal">True</span>     <span class="hljs-comment"># æ˜¾ç¤ºæ§åˆ¶å°çœ‹é”™è¯¯</span>
)

<span class="hljs-comment"># è¿è¡Œæ—¶æŸ¥çœ‹ç¼ºå¤±æ¨¡å—</span>
<span class="hljs-keyword">import</span> sys
<span class="hljs-keyword">if</span> <span class="hljs-built_in">hasattr</span>(sys, <span class="hljs-string">'_MEIPASS'</span>):
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ä¸´æ—¶ç›®å½•: <span class="hljs-subst">{sys._MEIPASS}</span>"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ¨¡å—è·¯å¾„: <span class="hljs-subst">{sys.path}</span>"</span>)
</code></pre>
<h3 data-id="heading-13">5.3 å…¶ä»–è¯´æ˜</h3>
<p>é™¤äº†ç”¨äº <code>pyinstaller</code> çš„æ‰“åŒ…å¤–ï¼Œ<code>spec</code> æ–‡ä»¶ä¹Ÿåœ¨å…¶ä»–åœºæ™¯æœ‰ç›¸å…³ä½¿ç”¨çš„ï¼š</p>
<ol>
<li>
<p><strong>RPMåŒ…ç®¡ç†</strong>ï¼šLinuxç³»ç»Ÿè½¯ä»¶æ‰“åŒ…</p>
</li>
<li>
<p><strong>å…¶ä»–æ„å»ºå·¥å…·</strong>ï¼šä½œä¸ºé…ç½®æ–‡ä»¶ä½¿ç”¨</p>
</li>
</ol>
<p>å¦å¤–æœ‰ç±»ä¼¼ä½œç”¨çš„æ–‡ä»¶è¿˜æœ‰ï¼š<code>setup.cfg</code>ã€<code>pyproject.toml</code> ç­‰</p>
<hr/>
<p>å¥½å•¦ï¼Œä»Šå¤©çš„åˆ†äº«å°±åˆ°è¿™é‡Œäº†ï¼Œæ„Ÿè°¢é˜…è¯»ï¼Œå¦‚æœè§‰å¾—æ–‡ç« å¯¹ä½ æœ‰ç”¨çš„è¯ï¼Œæ¬¢è¿ä¸‰è¿ã€æ¬¢è¿å…³æ³¨ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Elasticsearchæ ¸å¿ƒåŸç†â€”â€”å€’æ’ç´¢å¼•ã€æ˜ å°„ä¸åˆ†è¯å¯¹æœç´¢è´¨é‡çš„å½±å“è·¯å¾„]]></title>    <link>https://juejin.cn/post/7587997157237276724</link>    <guid>https://juejin.cn/post/7587997157237276724</guid>    <pubDate>2025-12-26T12:46:58.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587997157237276724" data-draft-id="7587743345198022708" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Elasticsearchæ ¸å¿ƒåŸç†â€”â€”å€’æ’ç´¢å¼•ã€æ˜ å°„ä¸åˆ†è¯å¯¹æœç´¢è´¨é‡çš„å½±å“è·¯å¾„"/> <meta itemprop="keywords" content="æ¶æ„"/> <meta itemprop="datePublished" content="2025-12-26T12:46:58.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="åæœˆå—åŸ"/> <meta itemprop="url" content="https://juejin.cn/user/3456520290576862"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Elasticsearchæ ¸å¿ƒåŸç†â€”â€”å€’æ’ç´¢å¼•ã€æ˜ å°„ä¸åˆ†è¯å¯¹æœç´¢è´¨é‡çš„å½±å“è·¯å¾„
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3456520290576862/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    åæœˆå—åŸ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-26T12:46:58.000Z" title="Fri Dec 26 2025 12:46:58 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    5
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><strong>å†™åœ¨å‰é¢ï¼Œæœ¬äººç›®å‰å¤„äºæ±‚èŒä¸­ï¼Œå¦‚æœ‰åˆé€‚å†…æ¨å²—ä½ï¼Œè¯·åŠ ï¼šlpshiyue æ„Ÿè°¢ã€‚åŒæ—¶è¿˜æœ›å¤§å®¶ä¸€é”®ä¸‰è¿ï¼Œèµšç‚¹å¥¶ç²‰é’±ã€‚</strong></p>
<blockquote>
<p>æŒæ¡Elasticsearchçš„æœç´¢è´¨é‡ä¼˜åŒ–ï¼Œå…³é”®åœ¨äºç†è§£å€’æ’ç´¢å¼•å¦‚ä½•å°†æ•°æ®è½¬æ¢ä¸ºå¯æœç´¢çš„çŸ¥è¯†å›¾è°±ï¼Œæ˜ å°„å¦‚ä½•å®šä¹‰æ•°æ®çš„DNAç»“æ„ï¼Œä»¥åŠåˆ†è¯å™¨å¦‚ä½•å½±å“æœç´¢çš„ç²¾å‡†åº¦</p>
</blockquote>
<p>åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­å®Œæˆå¤±è´¥å¤„ç½®å’Œå¼¹æ€§è®¾è®¡åï¼Œæˆ‘ä»¬è½¬å‘æ•°æ®æ£€ç´¢çš„æ ¸å¿ƒæŒ‘æˆ˜ã€‚æœç´¢è´¨é‡ç›´æ¥å†³å®šç”¨æˆ·ä½“éªŒï¼Œè€ŒElasticsearchä½œä¸ºé¢†å…ˆçš„æœç´¢å¼•æ“ï¼Œå…¶æ•ˆæœå–å†³äºä¸‰å¤§æ ¸å¿ƒåŸç†çš„ååŒä½œç”¨ã€‚æœ¬æ–‡å°†æ·±å…¥è§£æå€’æ’ç´¢å¼•çš„å·¥ä½œæœºåˆ¶ã€æ˜ å°„çš„è®¾è®¡å“²å­¦å’Œåˆ†è¯å™¨çš„åŒ¹é…ç­–ç•¥ï¼Œæ­ç¤ºå®ƒä»¬å¦‚ä½•å…±åŒå½±å“æœç´¢è´¨é‡ã€‚</p>
<h2 data-id="heading-0">1 å€’æ’ç´¢å¼•ï¼šä»æ–‡æ¡£å­˜å‚¨åˆ°çŸ¥è¯†å›¾è°±çš„æ€ç»´è½¬å˜</h2>
<h3 data-id="heading-1">1.1 æ­£æ’ç´¢å¼•ä¸å€’æ’ç´¢å¼•çš„æœ¬è´¨åŒºåˆ«</h3>
<p>ä¼ ç»Ÿæ•°æ®åº“ä½¿ç”¨<strong>æ­£æ’ç´¢å¼•</strong>ï¼ˆForward Indexï¼‰ï¼Œè¿™æ˜¯ä¸€ç§"æ–‡æ¡£â†’å†…å®¹"çš„æ˜ å°„å…³ç³»ï¼Œç±»ä¼¼äºä¹¦ç±çš„ç›®å½•ï¼ˆé€šè¿‡é¡µç æŸ¥æ‰¾ç« èŠ‚å†…å®¹ï¼‰ã€‚è¿™ç§ç´¢å¼•æ–¹å¼åœ¨å¤„ç†"LIKE '%keyword%'"æŸ¥è¯¢æ—¶éœ€è¦è¿›è¡Œå…¨è¡¨æ‰«æï¼Œéšç€æ•°æ®é‡å¢åŠ ï¼Œæ€§èƒ½æ€¥å‰§ä¸‹é™ã€‚</p>
<p>Elasticsearchçš„æ ¸å¿ƒçªç ´åœ¨äºé‡‡ç”¨<strong>å€’æ’ç´¢å¼•</strong>ï¼ˆInverted Indexï¼‰ï¼Œå®ç°äº†"å†…å®¹â†’æ–‡æ¡£"çš„é€†å‘æ˜ å°„ã€‚è¿™ç›¸å½“äºä¹¦ç±æœ«å°¾çš„å…³é”®è¯ç´¢å¼•ï¼Œç›´æ¥å‘Šè¯‰è¯»è€…æ¯ä¸ªå…³é”®è¯å‡ºç°åœ¨å“ªäº›é¡µç ã€‚</p>
<p><strong>å®é™…ç¤ºä¾‹å¯¹æ¯”</strong>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">  -- ä¼ ç»Ÿæ•°æ®åº“çš„æ­£æ’ç´¢å¼•æŸ¥è¯¢ï¼ˆæ€§èƒ½éšæ•°æ®é‡å¢åŠ è€Œçº¿æ€§ä¸‹é™ï¼‰SELECT * FROM products WHERE title LIKE <span class="hljs-string">'%æ‰‹æœº%'</span> OR description LIKE <span class="hljs-string">'%æ‰‹æœº%'</span>;-- Elasticsearchçš„å€’æ’ç´¢å¼•æŸ¥è¯¢ï¼ˆæ€§èƒ½åŸºæœ¬æ’å®šï¼‰GET /products/_search{  <span class="hljs-string">"query"</span>: {    <span class="hljs-string">"match"</span>: {      <span class="hljs-string">"title"</span>: <span class="hljs-string">"æ‰‹æœº"</span>    }  }}
</code></pre>
<h3 data-id="heading-2">1.2 å€’æ’ç´¢å¼•çš„åº•å±‚ç»“æ„ä¸æ„å»ºè¿‡ç¨‹</h3>
<p>å€’æ’ç´¢å¼•ä¸æ˜¯ç®€å•çš„å…³é”®è¯æ˜ å°„ï¼Œè€Œæ˜¯åŒ…å«ä¸°å¯Œè¯­ä¹‰ä¿¡æ¯çš„<strong>é«˜çº§æ•°æ®ç»“æ„</strong>ã€‚å…¶æ ¸å¿ƒç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼š</p>
<p><strong>è¯é¡¹å­—å…¸</strong>ï¼ˆTerm Dictionaryï¼‰å­˜å‚¨æ‰€æœ‰å”¯ä¸€çš„è¯é¡¹ï¼Œå¹¶æŒ‰å­—å…¸åºæ’åºï¼Œä¾¿äºä½¿ç”¨äºŒåˆ†æŸ¥æ‰¾ç­‰ç®—æ³•å¿«é€Ÿå®šä½ã€‚</p>
<p><strong>å€’æ’åˆ—è¡¨</strong>ï¼ˆPosting Listï¼‰è®°å½•æ¯ä¸ªè¯é¡¹çš„è¯¦ç»†å‡ºç°ä¿¡æ¯ï¼ŒåŒ…å«ï¼š</p>
<ul>
<li>â€¢ <strong>æ–‡æ¡£ID</strong>ï¼ˆDocIDï¼‰ï¼šåŒ…å«è¯¥è¯é¡¹çš„æ–‡æ¡£æ ‡è¯†</li>
<li>â€¢ <strong>è¯é¢‘</strong>ï¼ˆTFï¼‰ï¼šè¯é¡¹åœ¨æ–‡æ¡£ä¸­å‡ºç°çš„æ¬¡æ•°ï¼ˆç›¸å…³æ€§è¯„åˆ†é‡è¦å› ç´ ï¼‰</li>
<li>â€¢ <strong>ä½ç½®</strong>ï¼ˆPositionï¼‰ï¼šè¯é¡¹åœ¨æ–‡æ¡£ä¸­çš„å…·ä½“ä½ç½®ï¼ˆæ”¯æŒçŸ­è¯­æŸ¥è¯¢ï¼‰</li>
<li>â€¢ <strong>åç§»é‡</strong>ï¼ˆOffsetï¼‰ï¼šè¯é¡¹åœ¨åŸå§‹æ–‡æœ¬ä¸­çš„èµ·æ­¢ä½ç½®ï¼ˆæ”¯æŒé«˜äº®æ˜¾ç¤ºï¼‰</li>
</ul>
<p><strong>å€’æ’ç´¢å¼•æ„å»ºæµç¨‹</strong>å…·ä½“åŒ…æ‹¬ä»¥ä¸‹æ­¥éª¤ï¼š</p>
<ol>
<li>1. <strong>æ–‡æ¡£è§£æ</strong>ï¼šæå–æ–‡æœ¬å­—æ®µï¼Œè¿›è¡Œç¼–ç ç»Ÿä¸€å’Œæ ¼å¼æ¸…ç†</li>
<li>2. <strong>åˆ†è¯å¤„ç†</strong>ï¼šé€šè¿‡åˆ†è¯å™¨å°†æ–‡æœ¬æ‹†åˆ†ä¸ºå•ç‹¬çš„è¯é¡¹</li>
<li>3. <strong>æ ‡å‡†åŒ–å¤„ç†</strong>ï¼šåŒ…æ‹¬è½¬å°å†™ã€å»é™¤åœç”¨è¯ã€è¯å¹²æå–ç­‰</li>
<li>4. <strong>ç”Ÿæˆå€’æ’é¡¹</strong>ï¼šè®°å½•æ¯ä¸ªè¯é¡¹åœ¨æ–‡æ¡£ä¸­çš„å‡ºç°é¢‘ç‡ã€ä½ç½®ç­‰ä¿¡æ¯</li>
<li>5. <strong>ç´¢å¼•å­˜å‚¨</strong>ï¼šå°†å€’æ’é¡¹å†™å…¥ç´¢å¼•æ®µï¼Œå®ç°æŒä¹…åŒ–</li>
</ol>
<h3 data-id="heading-3">1.3 å€’æ’ç´¢å¼•çš„æŸ¥è¯¢æœºåˆ¶ä¸æ€§èƒ½ä¼˜åŒ–</h3>
<p>å½“ç”¨æˆ·å‘èµ·æœç´¢è¯·æ±‚æ—¶ï¼ŒElasticsearchæ‰§è¡Œé«˜æ•ˆçš„<strong>ä¸¤é˜¶æ®µæŸ¥è¯¢æµç¨‹</strong>ï¼š</p>
<p><strong>æŸ¥è¯¢è§£æé˜¶æ®µ</strong>ï¼šæœç´¢è¯ç»è¿‡ç›¸åŒçš„åˆ†è¯å’Œæ ‡å‡†åŒ–å¤„ç†ï¼Œç¡®ä¿æŸ¥è¯¢ä¸ç´¢å¼•çš„å…¼å®¹æ€§ã€‚ä¾‹å¦‚æœç´¢"Quick Foxes"ä¼šè¢«åˆ†è¯ä¸º["quick", "fox"]ã€‚</p>
<p><strong>å€’æ’åˆ—è¡¨æŸ¥æ‰¾ä¸åˆå¹¶</strong>ï¼šElasticsearchåœ¨è¯é¡¹å­—å…¸ä¸­æŸ¥æ‰¾æ¯ä¸ªè¯é¡¹çš„å€’æ’åˆ—è¡¨ï¼Œç„¶åæ ¹æ®æŸ¥è¯¢é€»è¾‘ï¼ˆAND/ORï¼‰è¿›è¡Œåˆ—è¡¨åˆå¹¶ã€‚å¯¹äºANDæŸ¥è¯¢ï¼Œå–å€’æ’åˆ—è¡¨çš„äº¤é›†ï¼›å¯¹äºORæŸ¥è¯¢ï¼Œåˆ™å–å¹¶é›†ã€‚</p>
<p><strong>æ€§èƒ½ä¼˜åŒ–æŠ€æœ¯</strong>åŒ…æ‹¬ï¼š</p>
<ul>
<li>â€¢ <strong>è·³è¡¨</strong>ï¼ˆSkip Listsï¼‰ï¼šåŠ é€Ÿå¤§å‹å€’æ’åˆ—è¡¨çš„åˆå¹¶æ“ä½œ</li>
<li>â€¢ <strong>ä½å›¾ç´¢å¼•</strong>ï¼ˆBitmap Indexingï¼‰ï¼šå¯¹æšä¸¾å‹å­—æ®µè¿›è¡Œé«˜æ•ˆå‹ç¼©</li>
<li>â€¢ <strong>å¸ƒéš†è¿‡æ»¤å™¨</strong>ï¼ˆBloom Filterï¼‰ï¼šå¿«é€Ÿåˆ¤æ–­è¯é¡¹æ˜¯å¦å­˜åœ¨ï¼Œé¿å…ä¸å¿…è¦çš„ç£ç›˜æŸ¥æ‰¾</li>
</ul>
<h2 data-id="heading-4">2 æ˜ å°„è®¾è®¡ï¼šæ•°æ®æ¨¡å¼çš„æˆ˜ç•¥è§„åˆ’</h2>
<h3 data-id="heading-5">2.1 æ˜ å°„çš„æ ¸å¿ƒä½œç”¨ä¸è®¾è®¡åŸåˆ™</h3>
<p>æ˜ å°„ï¼ˆMappingï¼‰åœ¨Elasticsearchä¸­ç›¸å½“äºæ•°æ®åº“çš„æ¨¡å¼è®¾è®¡ï¼Œå®ƒå®šä¹‰äº†æ–‡æ¡£åŠå…¶åŒ…å«çš„å­—æ®µå¦‚ä½•å­˜å‚¨å’Œç´¢å¼•ã€‚æ°å½“çš„æ˜ å°„è®¾è®¡æ˜¯æœç´¢æ€§èƒ½çš„åŸºçŸ³ã€‚</p>
<p><strong>æ˜ å°„çš„æ ¸å¿ƒä»·å€¼</strong>ä½“ç°åœ¨ï¼š</p>
<ul>
<li>â€¢ <strong>å­˜å‚¨ä¼˜åŒ–</strong>ï¼šé€‰æ‹©åˆé€‚çš„å­—æ®µç±»å‹å‡å°‘ç£ç›˜ç©ºé—´å ç”¨</li>
<li>â€¢ <strong>ç´¢å¼•ä¼˜åŒ–</strong>ï¼šåˆç†çš„ç´¢å¼•é…ç½®æå‡æŸ¥è¯¢é€Ÿåº¦</li>
<li>â€¢ <strong>æœç´¢ä¼˜åŒ–</strong>ï¼šæ­£ç¡®çš„åˆ†æå™¨è®¾ç½®æé«˜æœç´¢ç»“æœç›¸å…³æ€§</li>
</ul>
<h3 data-id="heading-6">2.2 å­—æ®µç±»å‹é€‰æ‹©ç­–ç•¥</h3>
<p>Elasticsearchæä¾›äº†ä¸°å¯Œçš„å­—æ®µç±»å‹ï¼Œæ¯ç§ç±»å‹éƒ½æœ‰å…¶ç‰¹å®šçš„åº”ç”¨åœºæ™¯å’Œæ€§èƒ½ç‰¹å¾ï¼š</p>
<p><strong>æ–‡æœ¬ç±»å‹å®¶æ—</strong>ï¼š</p>
<ul>
<li>â€¢ <strong>text</strong>ç±»å‹ï¼šé€‚ç”¨äºéœ€è¦åˆ†è¯çš„å…¨æ–‡æœç´¢åœºæ™¯ï¼Œå¦‚å•†å“æè¿°ã€æ–‡ç« å†…å®¹</li>
<li>â€¢ <strong>keyword</strong>ç±»å‹ï¼šé€‚ç”¨äºç²¾ç¡®åŒ¹é…ï¼Œå¦‚çŠ¶æ€æ ‡ç­¾ã€åˆ†ç±»ç¼–ç </li>
</ul>
<p><strong>æ•°å€¼ç±»å‹å®¶æ—</strong>ï¼š</p>
<ul>
<li>â€¢ <strong>æ•´æ•°ç±»å‹</strong>ï¼ˆinteger, longï¼‰ï¼šé€‚åˆç¦»æ•£æ•°å€¼ï¼Œå¦‚æ•°é‡ã€å¹´é¾„</li>
<li>â€¢ <strong>æµ®ç‚¹ç±»å‹</strong>ï¼ˆfloat, doubleï¼‰ï¼šé€‚åˆè¿ç»­æ•°å€¼ï¼Œå¦‚ä»·æ ¼ã€è¯„åˆ†</li>
</ul>
<p><strong>ä¸“ç”¨ç±»å‹å®¶æ—</strong>ï¼š</p>
<ul>
<li>â€¢ <strong>date</strong>ï¼šæ—¥æœŸå’Œæ—¶é—´æ•°æ®ï¼Œæ”¯æŒä¸°å¯Œçš„èŒƒå›´æŸ¥è¯¢</li>
<li>â€¢ <strong>geo_point</strong>ï¼šåœ°ç†åæ ‡ï¼Œæ”¯æŒåœ°ç†ä½ç½®æŸ¥è¯¢</li>
<li>â€¢ <strong>ip</strong>ï¼šIPåœ°å€ï¼Œæ”¯æŒCIDRæŸ¥è¯¢</li>
</ul>
<p><strong>å¤šå­—æ®µæ˜ å°„å®æˆ˜ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">  PUT /ecommerce_products{  <span class="hljs-string">"mappings"</span>: {    <span class="hljs-string">"properties"</span>: {      <span class="hljs-string">"product_id"</span>: {        <span class="hljs-string">"type"</span>: <span class="hljs-string">"keyword"</span>      },      <span class="hljs-string">"product_name"</span>: {        <span class="hljs-string">"type"</span>: <span class="hljs-string">"text"</span>,        <span class="hljs-string">"analyzer"</span>: <span class="hljs-string">"ik_max_word"</span>,        <span class="hljs-string">"fields"</span>: {          <span class="hljs-string">"keyword"</span>: {            <span class="hljs-string">"type"</span>: <span class="hljs-string">"keyword"</span>          },          <span class="hljs-string">"pinyin"</span>: {            <span class="hljs-string">"type"</span>: <span class="hljs-string">"text"</span>,            <span class="hljs-string">"analyzer"</span>: <span class="hljs-string">"pinyin"</span>          }        }      },      <span class="hljs-string">"price"</span>: {        <span class="hljs-string">"type"</span>: <span class="hljs-string">"scaled_float"</span>,        <span class="hljs-string">"scaling_factor"</span>: 100      },      <span class="hljs-string">"tags"</span>: {        <span class="hljs-string">"type"</span>: <span class="hljs-string">"keyword"</span>      },      <span class="hljs-string">"description"</span>: {        <span class="hljs-string">"type"</span>: <span class="hljs-string">"text"</span>,        <span class="hljs-string">"analyzer"</span>: <span class="hljs-string">"ik_smart"</span>      },      <span class="hljs-string">"created_time"</span>: {        <span class="hljs-string">"type"</span>: <span class="hljs-string">"date"</span>      },      <span class="hljs-string">"location"</span>: {        <span class="hljs-string">"type"</span>: <span class="hljs-string">"geo_point"</span>      }    }  }}
</code></pre>
<p>æ­¤é…ç½®ä¸ºå•†å“åç§°åŒæ—¶æä¾›åˆ†è¯æœç´¢ã€ç²¾ç¡®åŒ¹é…å’Œæ‹¼éŸ³æœç´¢èƒ½åŠ›</p>
<h3 data-id="heading-7">2.3 æ˜ å°„è®¾è®¡çš„æœ€ä½³å®è·µ</h3>
<p><strong>åŠ¨æ€æ˜ å°„ä¸é™æ€æ˜ å°„çš„å¹³è¡¡</strong>ï¼šåœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œå»ºè®®ä¼˜å…ˆä½¿ç”¨é™æ€æ˜ å°„ï¼Œé¿å…å­—æ®µçˆ†ç‚¸é—®é¢˜ã€‚</p>
<p><strong>ç´¢å¼•é€‰é¡¹çš„ç²¾ç»†æ§åˆ¶</strong>ï¼šå¯¹äºä¸éœ€è¦æœç´¢çš„å­—æ®µï¼ˆå¦‚MD5å“ˆå¸Œå€¼ï¼‰ï¼Œå¯ä»¥è®¾ç½®<code>"index": false</code>èŠ‚çœå­˜å‚¨ç©ºé—´ã€‚</p>
<p><strong>å‰¯æœ¬è®¾ç½®çš„ä¼˜åŒ–</strong>ï¼šåœ¨å†™å…¥å¯†é›†å‹åœºæ™¯ä¸­ï¼Œå¯ä»¥æš‚æ—¶è®¾ç½®<code>"number_of_replicas": 0</code>æå‡å†™å…¥é€Ÿåº¦ï¼Œå†™å…¥å®Œæˆåå†æ¢å¤å‰¯æœ¬æ•°é‡ã€‚</p>
<h2 data-id="heading-8">3 åˆ†è¯æœºåˆ¶ï¼šæœç´¢ç²¾å‡†åº¦çš„å†³å®šå› ç´ </h2>
<h3 data-id="heading-9">3.1 åˆ†è¯å™¨çš„å·¥ä½œåŸç†ä¸ç»„ä»¶ååŒ</h3>
<p>åˆ†è¯å™¨ï¼ˆAnalyzerï¼‰æ˜¯å°†æ–‡æœ¬è½¬æ¢ä¸ºè¯é¡¹çš„å…³é”®ç»„ä»¶ï¼Œç›´æ¥å†³å®šæœç´¢çš„å¬å›ç‡å’Œå‡†ç¡®ç‡ã€‚ä¸€ä¸ªå®Œæ•´çš„åˆ†è¯å™¨åŒ…å«ä¸‰ä¸ªååŒå·¥ä½œçš„ç»„ä»¶ï¼š</p>
<p><strong>å­—ç¬¦è¿‡æ»¤å™¨</strong>ï¼ˆCharacter Filtersï¼‰è´Ÿè´£åŸå§‹æ–‡æœ¬çš„é¢„å¤„ç†ï¼Œå¦‚HTMLæ ‡ç­¾å»é™¤ã€ç‰¹æ®Šå­—ç¬¦è½¬æ¢ã€‚</p>
<p><strong>åˆ†è¯å•å…ƒ</strong>ï¼ˆTokenizerï¼‰æ˜¯åˆ†è¯å™¨çš„æ ¸å¿ƒï¼Œå°†æ–‡æœ¬åˆ‡åˆ†ä¸ºç‹¬ç«‹çš„è¯é¡¹ï¼ˆTokenï¼‰ã€‚ä¸åŒçš„åˆ†è¯å•å…ƒé‡‡ç”¨ä¸åŒçš„åˆ‡åˆ†ç­–ç•¥ã€‚</p>
<p><strong>è¯é¡¹è¿‡æ»¤å™¨</strong>ï¼ˆToken Filtersï¼‰å¯¹åˆ†è¯ç»“æœè¿›è¡Œå†åŠ å·¥ï¼ŒåŒ…æ‹¬è½¬å°å†™ã€åœç”¨è¯å»é™¤ã€åŒä¹‰è¯æ‰©å±•ç­‰ã€‚</p>
<h3 data-id="heading-10">3.2 ä¸­æ–‡åˆ†è¯çš„æŒ‘æˆ˜ä¸è§£å†³æ–¹æ¡ˆ</h3>
<p>ä¸­æ–‡åˆ†è¯é¢ä¸´<strong>æ— è‡ªç„¶åˆ†éš”ç¬¦</strong>ã€<strong>æ–°è¯å‘ç°</strong>ã€<strong>æ­§ä¹‰æ¶ˆé™¤</strong>ç­‰ç‹¬ç‰¹æŒ‘æˆ˜ã€‚IKåˆ†è¯å™¨æ˜¯ä¸­æ–‡åœºæ™¯çš„é¦–é€‰è§£å†³æ–¹æ¡ˆï¼Œæä¾›ä¸¤ç§åˆ†è¯æ¨¡å¼ï¼š</p>
<p><strong>ik_smartæ¨¡å¼</strong>ï¼ˆç²—ç²’åº¦åˆ†è¯ï¼‰é€‚åˆç²¾å‡†åŒ¹é…åœºæ™¯ï¼Œå¬å›ç‡è¾ƒä½ä½†å‡†ç¡®ç‡é«˜ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">  <span class="hljs-string">"ä¸­åäººæ°‘å…±å’Œå›½å®ªæ³•"</span> â†’ [<span class="hljs-string">"ä¸­åäººæ°‘å…±å’Œå›½"</span>, <span class="hljs-string">"å®ªæ³•"</span>]
</code></pre>
<p><strong>ik_max_wordæ¨¡å¼</strong>ï¼ˆç»†ç²’åº¦åˆ†è¯ï¼‰é€‚åˆå¬å›ä¼˜å…ˆåœºæ™¯ï¼Œå¬å›ç‡é«˜ä½†å¯èƒ½åŒ…å«æ— å…³ç»“æœï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">  <span class="hljs-string">"ä¸­åäººæ°‘å…±å’Œå›½å®ªæ³•"</span> â†’ [<span class="hljs-string">"ä¸­åäººæ°‘å…±å’Œå›½"</span>, <span class="hljs-string">"ä¸­åäººæ°‘"</span>, <span class="hljs-string">"ä¸­å"</span>, <span class="hljs-string">"åäºº"</span>, <span class="hljs-string">"äººæ°‘å…±å’Œå›½"</span>, <span class="hljs-string">"äººæ°‘"</span>, <span class="hljs-string">"å…±å’Œå›½"</span>, <span class="hljs-string">"å…±å’Œ"</span>, <span class="hljs-string">"å›½"</span>, <span class="hljs-string">"å®ªæ³•"</span>]
</code></pre>
<p><strong>IKåˆ†è¯å™¨é…ç½®ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-xml" lang="xml">  <span class="hljs-comment">&lt;!-- IK Analyzer æ‰©å±•é…ç½® --&gt;</span><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">"1.0"</span> encoding=<span class="hljs-string">"UTF-8"</span>?&gt;</span><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">properties</span> <span class="hljs-keyword">SYSTEM</span> <span class="hljs-string">"http://java.sun.com/dtd/properties.dtd"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">properties</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">comment</span>&gt;</span>IK Analyzer æ‰©å±•é…ç½®<span class="hljs-tag">&lt;/<span class="hljs-name">comment</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">entry</span> <span class="hljs-attr">key</span>=<span class="hljs-string">"ext_dict"</span>&gt;</span>custom_words.dic<span class="hljs-tag">&lt;/<span class="hljs-name">entry</span>&gt;</span>    <span class="hljs-comment">&lt;!-- è‡ªå®šä¹‰æ‰©å±•è¯å…¸ --&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">entry</span> <span class="hljs-attr">key</span>=<span class="hljs-string">"ext_stopwords"</span>&gt;</span>stop_words.dic<span class="hljs-tag">&lt;/<span class="hljs-name">entry</span>&gt;</span> <span class="hljs-comment">&lt;!-- è‡ªå®šä¹‰åœç”¨è¯ --&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">properties</span>&gt;</span>
</code></pre>
<p>é€šè¿‡æ‰©å±•è¯å…¸å¯ä»¥æ·»åŠ é¢†åŸŸä¸“æœ‰åè¯ï¼Œæå‡ä¸“ä¸šæ–‡æœ¬çš„åˆ†è¯æ•ˆæœ</p>
<h3 data-id="heading-11">3.3 å¤šè¯­è¨€æ··åˆåœºæ™¯çš„åˆ†è¯ç­–ç•¥</h3>
<p>åœ¨å®é™…åº”ç”¨ä¸­ï¼Œç»å¸¸é‡åˆ°ä¸­è‹±æ–‡æ··åˆã€æ‹¼éŸ³åŒ¹é…ç­‰å¤æ‚åœºæ™¯ï¼Œéœ€è¦é‡‡ç”¨ç»„åˆåˆ†è¯ç­–ç•¥ï¼š</p>
<p><strong>ä¸­è‹±æ–‡æ··åˆåˆ†è¯</strong>ï¼šä½¿ç”¨IKåˆ†è¯å™¨é…åˆè‹±æ–‡å¤„ç†èƒ½åŠ›ï¼Œç¡®ä¿ä¸­è‹±æ–‡æœ¯è¯­éƒ½èƒ½æ­£ç¡®è¯†åˆ«ã€‚</p>
<p><strong>æ‹¼éŸ³åˆ†è¯é›†æˆ</strong>ï¼šä¸ºé‡è¦å­—æ®µåŒæ—¶é…ç½®æ‹¼éŸ³åˆ†è¯å™¨ï¼Œæ”¯æŒæ‹¼éŸ³æœç´¢ï¼š</p>
<pre><code class="hljs language-json" lang="json">  <span class="hljs-attr">"product_name"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>  <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"text"</span><span class="hljs-punctuation">,</span>  <span class="hljs-attr">"analyzer"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ik_max_word"</span><span class="hljs-punctuation">,</span>  <span class="hljs-attr">"fields"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>    <span class="hljs-attr">"pinyin"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>      <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"text"</span><span class="hljs-punctuation">,</span>       <span class="hljs-attr">"analyzer"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"pinyin"</span>    <span class="hljs-punctuation">}</span>  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">}</span>
</code></pre>
<p><strong>åŒä¹‰è¯æ‰©å±•</strong>ï¼šé…ç½®åŒä¹‰è¯è¿‡æ»¤å™¨ï¼Œæå‡æœç´¢å¬å›ç‡ï¼š</p>
<pre><code class="hljs language-css" lang="css">  "<span class="hljs-attribute">filter</span>": {  "my_synonyms": {    "type": <span class="hljs-string">"synonym"</span>,    <span class="hljs-string">"synonyms"</span>: [      <span class="hljs-string">"æ‰‹æœº, ç”µè¯, ç§»åŠ¨ç”µè¯"</span>,      <span class="hljs-string">"ç”µè„‘, è®¡ç®—æœº, ç¬”è®°æœ¬"</span>    ]  }}
</code></pre>
<h2 data-id="heading-12">4 ä¸‰è€…ååŒï¼šæœç´¢è´¨é‡çš„å½±å“è·¯å¾„åˆ†æ</h2>
<h3 data-id="heading-13">4.1 æœç´¢è´¨é‡çš„å…¨é“¾è·¯å½±å“å› ç´ </h3>
<p>æœç´¢è´¨é‡çš„å¥½åå—åˆ°ä»æ•°æ®æ¥å…¥åˆ°ç»“æœè¿”å›çš„å…¨é“¾è·¯å½±å“ï¼Œå…¶ä¸­å€’æ’ç´¢å¼•ã€æ˜ å°„å’Œåˆ†è¯å™¨åœ¨å„ä¸ªç¯èŠ‚å‘æŒ¥å…³é”®ä½œç”¨ï¼š</p>
<p><strong>æ•°æ®æ‘„å…¥é˜¶æ®µ</strong>ï¼šæ˜ å°„å†³å®šå­—æ®µå¦‚ä½•è¢«è§£æï¼Œåˆ†è¯å™¨å†³å®šæ–‡æœ¬å¦‚ä½•è¢«åˆ‡åˆ†ï¼Œå€’æ’ç´¢å¼•å†³å®šè¯é¡¹å¦‚ä½•è¢«å­˜å‚¨ã€‚</p>
<p><strong>æŸ¥è¯¢å¤„ç†é˜¶æ®µ</strong>ï¼šæŸ¥è¯¢è¯ç»è¿‡ç›¸åŒçš„åˆ†è¯å¤„ç†ï¼Œç¡®ä¿æŸ¥è¯¢ä¸ç´¢å¼•çš„ä¸€è‡´æ€§ï¼›å€’æ’ç´¢å¼•æä¾›é«˜æ•ˆçš„è¯é¡¹æŸ¥æ‰¾èƒ½åŠ›ã€‚</p>
<p><strong>ç»“æœæ’åºé˜¶æ®µ</strong>ï¼šå€’æ’ç´¢å¼•ä¸­å­˜å‚¨çš„è¯é¢‘ã€ä½ç½®ç­‰ä¿¡æ¯ä¸ºç›¸å…³æ€§è¯„åˆ†æä¾›åŸºç¡€æ•°æ®ã€‚</p>
<h3 data-id="heading-14">4.2 å…¸å‹é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ</h3>
<p><strong>æœç´¢å¬å›ç‡ä½</strong>é€šå¸¸ç”±è¿‡åº¦æ¿€è¿›çš„åˆ†è¯ç­–ç•¥å¯¼è‡´ã€‚è§£å†³æ–¹æ¡ˆåŒ…æ‹¬ï¼šä½¿ç”¨ç»†ç²’åº¦åˆ†è¯æ¨¡å¼ï¼ˆik_max_wordï¼‰ã€åˆç†é…ç½®åŒä¹‰è¯ã€ä¼˜åŒ–åœç”¨è¯åˆ—è¡¨ã€‚</p>
<p><strong>æœç´¢å‡†ç¡®ç‡ä½</strong>å¾€å¾€å› åˆ†è¯ç²’åº¦å¤ªç»†æˆ–åŒä¹‰è¯è¿‡åº¦æ‰©å±•å¼•èµ·ã€‚è§£å†³æ–¹æ¡ˆåŒ…æ‹¬ï¼šä½¿ç”¨ç²—ç²’åº¦åˆ†è¯æ¨¡å¼ï¼ˆik_smartï¼‰ã€è°ƒæ•´ç›¸å…³æ€§è¯„åˆ†æƒé‡ã€å®Œå–„åŒä¹‰è¯è§„åˆ™ã€‚</p>
<p><strong>æœç´¢æ€§èƒ½å·®</strong>å¯èƒ½ä¸å€’æ’ç´¢å¼•è¿‡å¤§æˆ–æ˜ å°„è®¾è®¡ä¸åˆç†æœ‰å…³ã€‚è§£å†³æ–¹æ¡ˆåŒ…æ‹¬ï¼šåˆç†é…ç½®ç´¢å¼•é€‰é¡¹ã€ä½¿ç”¨å¤šå­—æ®µç±»å‹é¿å…å…¨æ–‡æœ¬æœç´¢ã€ä¼˜åŒ–åˆ†ç‰‡å¤§å°ã€‚</p>
<h3 data-id="heading-15">4.3 å®æˆ˜è°ƒä¼˜æ¡ˆä¾‹ï¼šç”µå•†æœç´¢ç³»ç»Ÿä¼˜åŒ–</h3>
<p><strong>é—®é¢˜åœºæ™¯</strong>ï¼šæŸç”µå•†å¹³å°å•†å“æœç´¢å­˜åœ¨ç»“æœä¸ç›¸å…³ã€æ‹¼éŸ³æœç´¢ä¸æ”¯æŒã€æ€§èƒ½ç“¶é¢ˆç­‰é—®é¢˜ã€‚</p>
<p><strong>ä¼˜åŒ–æ–¹æ¡ˆ</strong>ï¼š</p>
<ol>
<li>1. <strong>æ˜ å°„é‡æ„</strong>ï¼šä¸ºå•†å“åå­—æ®µé…ç½®å¤šå­—æ®µæ˜ å°„ï¼ŒåŒæ—¶æ”¯æŒä¸­æ–‡åˆ†è¯ã€ç²¾ç¡®åŒ¹é…å’Œæ‹¼éŸ³æœç´¢</li>
<li>2. <strong>åˆ†è¯ä¼˜åŒ–</strong>ï¼šç»“åˆIKåˆ†è¯å™¨ä¸è‡ªå®šä¹‰è¯å…¸ï¼Œæ·»åŠ å“ç‰Œåå’Œæ–°å“ç±»çš„ä¸“æœ‰åè¯</li>
<li>3. <strong>ç´¢å¼•ä¼˜åŒ–</strong>ï¼šè°ƒæ•´å€’æ’ç´¢å¼•çš„ç´¢å¼•é€‰é¡¹ï¼Œå¯¹ä»·æ ¼ç­‰æ•°å€¼å­—æ®µä½¿ç”¨doc_valuesæå‡èšåˆæ€§èƒ½</li>
</ol>
<p><strong>ä¼˜åŒ–ç»“æœ</strong>ï¼šæœç´¢å‡†ç¡®ç‡æå‡35%ï¼Œæ‹¼éŸ³æœç´¢æ”¯æŒåº¦100%ï¼Œæœç´¢å“åº”æ—¶é—´å‡å°‘60%ã€‚</p>
<h2 data-id="heading-16">5 æ€§èƒ½ä¸è´¨é‡å¹³è¡¡çš„è‰ºæœ¯</h2>
<h3 data-id="heading-17">5.1 ç´¢å¼•æ€§èƒ½ä¸æœç´¢è´¨é‡çš„æƒè¡¡</h3>
<p>åœ¨Elasticsearchä¸­ï¼Œæ€§èƒ½ä¸è´¨é‡éœ€è¦è°¨æ…å¹³è¡¡ã€‚è¿‡åº¦è¿½æ±‚æœç´¢è´¨é‡å¯èƒ½å¯¼è‡´ç´¢å¼•æ€§èƒ½ä¸‹é™ï¼Œè€Œè¿‡åº¦ä¼˜åŒ–ç´¢å¼•é€Ÿåº¦å¯èƒ½å½±å“æœç´¢å‡†ç¡®æ€§ã€‚</p>
<p><strong>ç´¢å¼•ä¼˜åŒ–ç­–ç•¥</strong>ï¼š</p>
<ul>
<li>â€¢ æ‰¹é‡æ–‡æ¡£å†™å…¥ï¼Œå‡å°‘ç´¢å¼•æäº¤é¢‘ç‡</li>
<li>â€¢ ä¼˜åŒ–åˆ·æ–°é—´éš”ï¼ˆrefresh_intervalï¼‰ï¼Œå¹³è¡¡è¿‘å®æ—¶æ€§ä¸å†™å…¥ååé‡</li>
<li>â€¢ åˆç†é…ç½®åˆ†ç‰‡æ•°é‡å’Œå¤§å°ï¼Œé¿å…å¤§é‡å°åˆ†ç‰‡æˆ–è¿‡å¤§å¤§åˆ†ç‰‡</li>
</ul>
<p><strong>æœç´¢ä¼˜åŒ–ç­–ç•¥</strong>ï¼š</p>
<ul>
<li>â€¢ ä½¿ç”¨filterä¸Šä¸‹æ–‡ç¼“å­˜é¢‘ç¹ä½¿ç”¨çš„è¿‡æ»¤æ¡ä»¶</li>
<li>â€¢ é¿å…é€šé…ç¬¦æŸ¥è¯¢ï¼Œç‰¹åˆ«æ˜¯å‰å¯¼é€šé…ç¬¦ï¼ˆå¦‚*abcï¼‰</li>
<li>â€¢ ä½¿ç”¨å¼‚æ­¥æœç´¢å¤„ç†å¤æ‚èšåˆæŸ¥è¯¢</li>
</ul>
<h3 data-id="heading-18">5.2 ç›‘æ§ä¸æŒç»­ä¼˜åŒ–</h3>
<p>å»ºç«‹å®Œå–„çš„ç›‘æ§ä½“ç³»æ˜¯æŒç»­ä¼˜åŒ–æœç´¢è´¨é‡çš„åŸºç¡€ã€‚å…³é”®ç›‘æ§æŒ‡æ ‡åŒ…æ‹¬ï¼š</p>
<p><strong>ç´¢å¼•æ€§èƒ½æŒ‡æ ‡</strong>ï¼šç´¢å¼•å»¶è¿Ÿã€ç´¢å¼•ååé‡ã€åˆå¹¶æ“ä½œé¢‘ç‡<br/>
<strong>æœç´¢è´¨é‡æŒ‡æ ‡</strong>ï¼šæŸ¥è¯¢å»¶è¿Ÿã€å‘½ä¸­ç‡ã€é¦–æ¡ç»“æœç‚¹å‡»ç‡<br/>
<strong>ç³»ç»Ÿèµ„æºæŒ‡æ ‡</strong>ï¼šå †å†…å­˜ä½¿ç”¨ç‡ã€ç£ç›˜I/Oã€CPUåˆ©ç”¨ç‡</p>
<p>å®šæœŸè¿›è¡Œæœç´¢è´¨é‡è¯„ä¼°ï¼Œé€šè¿‡A/Bæµ‹è¯•å¯¹æ¯”ä¸åŒåˆ†è¯ç­–ç•¥æˆ–è¯„åˆ†å…¬å¼çš„æ•ˆæœï¼Œå®ç°æ•°æ®é©±åŠ¨çš„æŒç»­ä¼˜åŒ–ã€‚</p>
<h2 data-id="heading-19">æ€»ç»“</h2>
<p>Elasticsearchçš„æœç´¢è´¨é‡ä¼˜åŒ–æ˜¯ä¸€ä¸ªç³»ç»Ÿå·¥ç¨‹ï¼Œå€’æ’ç´¢å¼•ã€æ˜ å°„è®¾è®¡å’Œåˆ†è¯å™¨åˆ†åˆ«ä»æ•°æ®ç»“æ„ã€æ•°æ®æ¨¡å‹å’Œæ•°æ®å¤„ç†çš„ç»´åº¦å½±å“æœç´¢æ•ˆæœã€‚</p>
<p><strong>å€’æ’ç´¢å¼•</strong>æ˜¯æœç´¢æ€§èƒ½çš„åŸºçŸ³ï¼Œå…¶é«˜æ•ˆçš„æ•°æ®ç»“æ„ä½¿æ¯«ç§’çº§æœç´¢æˆä¸ºå¯èƒ½ã€‚<strong>æ˜ å°„è®¾è®¡</strong>å†³å®šäº†æ•°æ®çš„å­˜å‚¨å’Œç´¢å¼•æ–¹å¼ï¼Œåˆç†çš„æ˜ å°„æ˜¯é«˜æ•ˆæœç´¢çš„å‰æã€‚<strong>åˆ†è¯å™¨</strong>ç›´æ¥å½±å“æœç´¢çš„å¬å›ç‡å’Œå‡†ç¡®ç‡ï¼Œç‰¹åˆ«æ˜¯å¯¹äºä¸­æ–‡ç­‰å¤æ‚è¯­è¨€ã€‚</p>
<p>åœ¨å®é™…åº”ç”¨ä¸­ï¼Œéœ€è¦æ ¹æ®å…·ä½“ä¸šåŠ¡åœºæ™¯å¹³è¡¡æœç´¢è´¨é‡ä¸ç³»ç»Ÿæ€§èƒ½ï¼Œå»ºç«‹æŒç»­ç›‘æ§å’Œä¼˜åŒ–æœºåˆ¶ã€‚åªæœ‰æ·±å…¥ç†è§£è¿™ä¸‰è€…çš„å·¥ä½œåŸç†å’Œç›¸äº’å½±å“ï¼Œæ‰èƒ½æ„å»ºå‡ºæ—¢å¿«åˆå‡†çš„æœç´¢ç³»ç»Ÿã€‚</p>
<p><strong>ğŸ“š ä¸‹ç¯‡é¢„å‘Š</strong><br/>
ã€ŠESæ€§èƒ½ä¸å¯ç”¨æ€§â€”â€”åˆ†ç‰‡ã€å‰¯æœ¬ã€è·¯ç”±ä¸èšåˆçš„è°ƒåº¦é€»è¾‘ä¸æˆæœ¬ã€‹â€”â€” æˆ‘ä»¬å°†æ·±å…¥æ¢è®¨ï¼š</p>
<ul>
<li>â€¢ ğŸ¯ <strong>åˆ†ç‰‡ç­–ç•¥</strong>ï¼šæ•°æ®åˆ†å¸ƒã€è¯»å†™è´Ÿè½½ä¸æ°´å¹³æ‰©å±•çš„å¹³è¡¡ä¹‹é“</li>
<li>â€¢ ğŸ”„ <strong>å‰¯æœ¬æœºåˆ¶</strong>ï¼šé«˜å¯ç”¨æ€§ä¿éšœä¸è¯»å–ååé‡çš„æå‡æ–¹æ¡ˆ</li>
<li>â€¢ ğŸ§© <strong>è·¯ç”±ä¼˜åŒ–</strong>ï¼šè¯·æ±‚åˆ†å‘ã€è´Ÿè½½å‡è¡¡ä¸æ•…éšœè½¬ç§»çš„æ™ºèƒ½é€»è¾‘</li>
<li>â€¢ ğŸ“Š <strong>èšåˆæ€§èƒ½</strong>ï¼šå¤§æ•°æ®é›†ç»Ÿè®¡åˆ†æä¸å®æ—¶å¯è§†åŒ–çš„æˆæœ¬æ§åˆ¶</li>
<li>â€¢ âš–ï¸ <strong>èµ„æºæƒè¡¡</strong>ï¼šå­˜å‚¨æˆæœ¬ã€è®¡ç®—å¼€é”€ä¸æŸ¥è¯¢å»¶è¿Ÿçš„å¹³è¡¡è‰ºæœ¯</li>
</ul>
<p><strong>ç‚¹å‡»å…³æ³¨ï¼ŒæŒæ¡Elasticsearché›†ç¾¤è°ƒä¼˜çš„æ ¸å¿ƒæ–¹æ³•è®ºï¼</strong></p>
<blockquote>
<p><strong>ä»Šæ—¥è¡ŒåŠ¨å»ºè®®</strong>ï¼š</p>
<ol>
<li>1. åˆ†æç°æœ‰ç´¢å¼•çš„æ˜ å°„è®¾è®¡ï¼Œè¯†åˆ«å­—æ®µç±»å‹ä½¿ç”¨ä¸å½“çš„æƒ…å†µ</li>
<li>2. è¯„ä¼°å½“å‰åˆ†è¯ç­–ç•¥å¯¹æœç´¢è´¨é‡çš„å½±å“ï¼Œé’ˆå¯¹æ ¸å¿ƒä¸šåŠ¡åœºæ™¯è¿›è¡Œä¼˜åŒ–</li>
<li>3. æ£€æŸ¥å€’æ’ç´¢å¼•å¤§å°ä¸æŸ¥è¯¢æ¨¡å¼ï¼Œä¼˜åŒ–ç´¢å¼•é…ç½®æå‡æŸ¥è¯¢æ€§èƒ½</li>
<li>4. å»ºç«‹æœç´¢è´¨é‡ç›‘æ§ä½“ç³»ï¼Œå®šæœŸè¯„ä¼°å¬å›ç‡ä¸å‡†ç¡®ç‡æŒ‡æ ‡</li>
</ol>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[javaå¹¶å‘ç¼–ç¨‹ï¼ˆjucç†è®ºç¯‡ï¼‰]]></title>    <link>https://juejin.cn/post/7588001624905269267</link>    <guid>https://juejin.cn/post/7588001624905269267</guid>    <pubDate>2025-12-26T15:20:38.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588001624905269267" data-draft-id="7588007285546434566" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="javaå¹¶å‘ç¼–ç¨‹ï¼ˆjucç†è®ºç¯‡ï¼‰"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-26T15:20:38.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ihgry"/> <meta itemprop="url" content="https://juejin.cn/user/3210229685954718"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            javaå¹¶å‘ç¼–ç¨‹ï¼ˆjucç†è®ºç¯‡ï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3210229685954718/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ihgry
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-26T15:20:38.000Z" title="Fri Dec 26 2025 15:20:38 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h4 data-id="heading-0">CAS</h4>
<ul>
<li>CAS(Compare And Swap)ï¼Œå¤„ç†å™¨ä¼šæ¯”è¾ƒå½“å‰å†…å­˜åœ°å€ä¸Šçš„å€¼ å’Œ çº¿ç¨‹ä¸­å˜é‡çš„å€¼ï¼ˆé¢„æœŸå€¼ï¼‰æ˜¯å¦ç›¸ç­‰ï¼Œå¦‚æœç›¸ç­‰åˆ™æ›¿æ¢å†…å­˜åœ°å€ä¸Šçš„å€¼ä¸ºæ–°å€¼ï¼Œå¦‚æœä¸ç›¸ç­‰åˆ™ä¸æ›´æ–°ï¼Œç¡¬ä»¶å±‚é¢ä¸Šæ”¯æŒä½¿ç”¨ä¸€æ¡æŒ‡ä»¤æ¥å®ç°ä¸Šé¢çš„æ“ä½œï¼Œx86ä¸­æ˜¯<code>cmpxchgl</code>æŒ‡ä»¤</li>
<li>CASæ“ä½œä¸æ¶‰åŠçº¿ç¨‹ä¸Šä¸‹æ–‡åˆ‡æ¢ï¼Œå¹¶ä¸”ä¸ä½¿ç”¨é”ï¼Œä¼šæé«˜ç³»ç»Ÿçš„å¹¶å‘æ€§</li>
</ul>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1d3cd7260f6a47c699781a44e1e95cc8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgaWhncnk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767367332&amp;x-signature=mRlEYponi%2F6JG5tch69PoEwjA9I%3D" alt="CASæ€»çº¿.jpg" width="50%" loading="lazy"/></p>
<ul>
<li>
<p><code>ABAé—®é¢˜</code>ï¼šä¸€ä¸ªçº¿ç¨‹å°†å˜é‡Aæ”¹ä¸ºäº†å˜é‡Bï¼Œä¹‹ååˆæ”¹ä¸ºäº†å˜é‡Aï¼Œå¦ä¸€ä¸ªçº¿ç¨‹åœ¨æ‰§è¡ŒCASæ“ä½œæ—¶ä¼šè®¤ä¸ºè¯¥å˜é‡æ²¡æœ‰å‘ç”Ÿå˜åŒ–ï¼Œå¯èƒ½ä¼šå¯¼è‡´é”™è¯¯ã€‚è§£å†³æ–¹æ¡ˆï¼šæ·»åŠ ç‰ˆæœ¬å·è¿›è¡Œå¯¹æ¯”ï¼Œå¯ä»¥ä½¿ç”¨<code>AtomicStampedReference</code>ç±»</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> AtomicStampedReference&lt;Integer&gt; atomicStampedReference = <span class="hljs-keyword">new</span> <span class="hljs-title class_">AtomicStampedReference</span>&lt;&gt;(<span class="hljs-number">100</span>, <span class="hljs-number">66</span>);

<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> InterruptedException {
    <span class="hljs-comment">// è·å–å½“å‰çš„å¼•ç”¨å€¼å’Œæ—¶é—´æˆ³</span>
    <span class="hljs-type">int</span> <span class="hljs-variable">stamp</span> <span class="hljs-operator">=</span> atomicStampedReference.getStamp();
    <span class="hljs-type">Integer</span> <span class="hljs-variable">value</span> <span class="hljs-operator">=</span> atomicStampedReference.getReference();

    <span class="hljs-comment">// ä¿®æ”¹å¼•ç”¨å€¼</span>
    <span class="hljs-type">boolean</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> atomicStampedReference.compareAndSet(value, value + <span class="hljs-number">10</span>, stamp, stamp + <span class="hljs-number">1</span>);
    System.out.println(<span class="hljs-string">"result = "</span> + result);

    <span class="hljs-comment">// è¾“å‡ºæœ€ç»ˆçš„å€¼</span>
    System.out.println(<span class="hljs-string">"Final value = "</span> + atomicStampedReference.getReference());
    System.out.println(<span class="hljs-string">"Final stamp = "</span> + atomicStampedReference.getStamp());
}
</code></pre>
</li>
</ul>
<h4 data-id="heading-1">Synchorized</h4>
<ul>
<li><code>synchorized</code>ä¿®é¥°å®ä¾‹æ–¹æ³•æ—¶ï¼Œé”å¯¹è±¡æ˜¯å½“å‰çš„å®ä¾‹å¯¹è±¡ï¼›<code>synchorized</code>ä¿®é¥°é™æ€æ–¹æ³•æ—¶ï¼Œé”å¯¹è±¡æ˜¯å½“å‰çš„classç±»å¯¹è±¡ï¼›<code>synchorized</code>ä½œç”¨äºä»£ç å—æ—¶ï¼Œé”å¯¹è±¡æ˜¯æ‹¬å·é‡Œé¢çš„å¯¹è±¡</li>
<li><code>synchorized</code>æ˜¯å¯é‡å…¥é”ï¼Œä¸€ä¸ªçº¿ç¨‹å¯ä»¥é‡å¤è·å–åˆ°è¯¥é”ï¼Œæ¯è·å–ä¸€æ¬¡é”ï¼Œè®¡æ•°å™¨åŠ ä¸€ï¼Œé‡Šæ”¾é”æ—¶ï¼Œè®¡æ•°å™¨å‡ä¸€ï¼Œç›´åˆ°è®¡æ•°å™¨ä¸º0ï¼Œé”æ‰ä¼šçœŸæ­£é‡Šæ”¾</li>
<li><code>synchronized</code>ä¿®é¥°æ–¹æ³•æ—¶ï¼Œä¼šåœ¨æ–¹æ³•çš„è®¿é—®æ ‡å¿—ä½ä¸­å¢åŠ ä¸€ä¸ª<code>ACC_SYNCHORIZED</code>æ ‡å¿—ï¼Œå½“çº¿ç¨‹è®¿é—®è¯¥æ–¹æ³•æ—¶ï¼Œå¦‚æœåŒ…å«è¯¥æ ‡å¿—ä½ï¼Œå°±è¦è·å¾—è¯¥æ–¹æ³•å¯¹åº”çš„å¯¹è±¡çš„ç›‘è§†å™¨é”æ‰èƒ½æ‰§è¡Œè¯¥æ–¹æ³•</li>
<li><code>synchronized</code>ä¿®é¥°ä»£ç å—æ—¶ï¼Œä¼šåœ¨ä»£ç å—çš„å‰åæ’å…¥<code>monitorenter</code>å’Œ<code>monitorexit</code>å­—èŠ‚ç æŒ‡ä»¤</li>
</ul>
<p>é”å‡çº§è¿‡ç¨‹ï¼š</p>
<ul>
<li>åœ¨æ²¡æœ‰é”ç«äº‰çš„æƒ…å†µä¸‹ï¼Œä¸€ä¸ªçº¿ç¨‹æ¥åŠ é”ï¼ŒJVMä¼šå‘é”å¯¹è±¡çš„å¯¹è±¡å¤´ä¸­å†™å…¥è¯¥çº¿ç¨‹id (è¿™æ—¶å€™çš„é”å«<code>åå‘é”</code>)ï¼Œåç»­è¯¥çº¿ç¨‹å†è¿›å…¥è¯¥é”æ—¶ï¼Œæ— éœ€è¿›è¡Œé¢å¤–çš„åŒæ­¥æ“ä½œ</li>
<li>åœ¨é”è½»åº¦ç«äº‰çš„æ—¶å€™ï¼Œä¼šå‡çº§ä¸º<code>è½»é‡çº§é”</code>ï¼ŒJVMä¼šåœ¨å½“å‰çº¿ç¨‹ä¸­åˆ›å»ºä¸€ä¸ªæ ˆå¸§ï¼Œé€šè¿‡CASæ“ä½œå°†è¿™ä¸ªæ ˆå¸§çš„åœ°å€å†™å…¥å¯¹è±¡å¤´ä¸­ï¼Œå¦‚æœæˆåŠŸè¡¨ç¤ºè¯¥çº¿ç¨‹è·å–åˆ°äº†é”ï¼Œå¦‚æœå¤±è´¥åˆ™è¡¨ç¤ºå…¶ä»–çº¿ç¨‹å·²ç»æŒæœ‰è¯¥é”ï¼Œæ­¤æ—¶ä¼šå‡çº§ä¸ºé‡é‡çº§é”</li>
<li>å½“é”ç«äº‰æ¿€çƒˆæ—¶ï¼ŒJVMä¼šå‡çº§ä¸ºé‡é‡çº§é”ï¼Œ<code>synchorized</code>ä¿®æ”¹ä»£ç å—æ—¶ï¼Œçº¿ç¨‹ä¼šå°è¯•è·å–monitorå¯¹è±¡çš„æ‰€æœ‰æƒï¼ŒæŠ¢åˆ°äº†å°±æ˜¯æˆåŠŸè·å–åˆ°é”ï¼ŒæŠ¢ä¸åˆ°çº¿ç¨‹å°±ä¼šé˜»å¡ï¼Œç­‰å¾…é‡æ–°è·å–é”</li>
</ul>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7c9a95149fda49acbb3b3c05a0aa4e2b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgaWhncnk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767367332&amp;x-signature=m5QQqowuzyac%2BmkEKZxVG2PDUX0%3D" alt="å¯¹è±¡å¤´.jpg" width="70%" loading="lazy"/></p>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e3a40f4e7f55406bb80d018171ddd2fd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgaWhncnk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767367332&amp;x-signature=FTI0cqXoBBx4Waqaa%2B4pl6HKu2w%3D" alt="é”æ ˆå¸§.jpg" width="50%" loading="lazy"/></p>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/12864ed5a0af4fa193a2a553a208cab6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgaWhncnk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767367332&amp;x-signature=jB83O5iCAK1kU1EHu66Z4hcza7w%3D" alt="é”è†¨èƒ€" width="50%" loading="lazy"/></p>
<p>Synchorizedå’ŒReentrantLock</p>
<ul>
<li><code>synchorized</code>å’Œ<code>ReentrantLock</code> éƒ½æ˜¯å¯é‡å…¥é”</li>
<li><code>synchorized</code>æ˜¯éå…¬å¹³é”ï¼Œä¸æ”¯æŒè®¾ç½®è¶…æ—¶æ—¶é—´ï¼Œä¸æ”¯æŒæ¡ä»¶åˆ¤æ–­ï¼Œä¸éœ€è¦æ‰‹åŠ¨é‡Šæ”¾é”</li>
<li><code>ReentrantLock</code>æ—¢å¯ä»¥æ˜¯éå…¬å¹³é”ä¹Ÿå¯ä»¥æ˜¯å…¬å¹³é”ï¼ˆé»˜è®¤æ˜¯éå…¬å¹³é”ï¼‰ï¼Œå…è®¸è®¾ç½®è·å–é”çš„è¶…æ—¶æ—¶é—´ï¼Œå¯ä»¥é€šè¿‡<code>lock.Condition</code>å¯¹è±¡å°†ä¸æ»¡è¶³æ¡ä»¶çš„çº¿ç¨‹åŠ å…¥åˆ°é˜»å¡é˜Ÿåˆ—ä¸­</li>
</ul>
<h4 data-id="heading-2">ThreadLocal</h4>
<ul>
<li>
<p>åŸºæœ¬ä½¿ç”¨</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserContext</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> ThreadLocal&lt;User&gt; CONTEXT = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ThreadLocal</span>&lt;User&gt;();

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> User <span class="hljs-title function_">getUser</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> CONTEXT.get();
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setUser</span><span class="hljs-params">(User user)</span> {
        CONTEXT.set(user);
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">remove</span><span class="hljs-params">()</span> {
        CONTEXT.remove();
    }
}
</code></pre>
</li>
<li>
<p>æ¯ä¸ªçº¿ç¨‹å†…éƒ¨ç»´æŠ¤äº†ä¸€ä¸ª<code>ThreadLocalMap</code>å¯¹è±¡ï¼Œ<code>ThreadLocalMap</code>ä»¥<code>ThreadLocal</code>ä¸ºkeyï¼Œçº¿ç¨‹å˜é‡å‰¯æœ¬ä¸ºvalue</p>
</li>
<li>
<p><code>ThreadLocalMap</code>ä¸­çš„keyæ˜¯å¼±å¼•ç”¨ï¼Œä¹‹æ‰€ä»¥ä¸æ˜¯å¼ºå¼•ç”¨æ˜¯å› ä¸ºæ‰€ä½¿ç”¨çš„çº¿ç¨‹å¾€å¾€æ˜¯çº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹ï¼Œçº¿ç¨‹ä¸€èˆ¬ä¸ä¼šè¢«é”€æ¯ï¼Œå¯¹<code>ThreadLocal</code>çš„å¼•ç”¨å°±ä¼šä¸€ç›´å­˜åœ¨ï¼Œå¯¼è‡´å†…å­˜é‡Šæ”¾ä¸æ‰</p>
</li>
<li>
<p>æœ€ä½³å®è·µï¼š</p>
<ul>
<li>å­˜å‚¨ç”¨æˆ·ç™»å½•ä¿¡æ¯ï¼Œè®©æ¯ä¸ªçº¿ç¨‹æœ‰ç‹¬ç«‹çš„ç”¨æˆ·ä¸Šä¸‹æ–‡</li>
<li>ç®¡ç†æ•°æ®åº“é“¾æ¥ï¼Œå°†ä¸€ä¸ªæ•°æ®åº“è¿æ¥æ”¾å…¥ThreadLocalä¸­ï¼Œåœ¨éœ€è¦ä½¿ç”¨æ•°æ®åº“è¿æ¥çš„åœ°æ–¹ç›´æ¥ä»ThreadLocalè·å–</li>
</ul>
</li>
</ul>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/87e0d298116b48f0868df6b9bae173bb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgaWhncnk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767367332&amp;x-signature=RYhUF9x9QLPH1Q1eWOpzs11J5AY%3D" alt="Thread.jpg" width="50%" loading="lazy"/></p>
<h4 data-id="heading-3">Volatile</h4>
<ul>
<li>
<p><code>volatile</code>å¯ä»¥ä¿è¯å¯è§æ€§ï¼Œå½“ä¸€ä¸ªçº¿ç¨‹ä¿®æ”¹äº†<code>volatile</code>å˜é‡çš„å€¼åï¼Œæ–°å€¼ä¼šç«‹å³è¢«åˆ·æ–°åˆ°ä¸»å†…å­˜ä¸­ï¼Œå…¶ä»–çº¿ç¨‹åœ¨è¯»å–è¯¥å˜é‡æ—¶å¯ä»¥ç«‹å³è·å–åˆ°æœ€æ–°çš„å€¼ï¼Œé¿å…ç”±äºç¼“å­˜ä¸€è‡´æ€§é—®é¢˜å¯¼è‡´ â€çœ‹è§â€œæ—§å€¼çš„ç°è±¡</p>
</li>
<li>
<p><code>volatile</code>åº•å±‚ä¼šåŠ ä¸€ä¸ª<code>lock</code>å‰ç¼€æŒ‡ä»¤è¿›è¡Œæ€»çº¿é”å®šï¼Œæ€»çº¿ç›‘å¬åˆ°ä¿®æ”¹äº†å…±äº«æ•°æ®åï¼Œä¼šè®©å…¶ä»–å¤„ç†å™¨ä¸­çš„ç¼“å­˜æ›´æ–°æˆ–å¤±æ•ˆ</p>
</li>
<li>
<p><code>volatile</code>å¯ä»¥ç¦æ­¢ jvm æŒ‡ä»¤é‡æ’ï¼Œä¿è¯åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ä¹Ÿèƒ½æ­£å¸¸è¿è¡Œ</p>
<p>æ­£å¸¸æƒ…å†µï¼š1. ä¸ºå¯¹è±¡åˆ†é…å†…å­˜ï¼Œ2. åˆå§‹åŒ–ï¼Œ3. å°†å¯¹è±¡å¼•ç”¨æŒ‡å‘å¯¹åº”å†…å­˜åœ°å€</p>
<p>æŒ‡ä»¤é‡æ’å¯èƒ½å˜æˆ1 3 2ï¼Œè¿™æ ·å¯èƒ½ä¼šå‘ç”Ÿé—®é¢˜</p>
</li>
</ul>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cc75ac7c66f64437b9944454bac221e5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgaWhncnk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767367332&amp;x-signature=UU3LL7jAudgBGLMXXBikk%2BBH0ks%3D" alt="1.png" width="50%" loading="lazy"/></p>
<h4 data-id="heading-4">AQS</h4>
<ul>
<li>AQSæ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œå†…éƒ¨å°è£…äº†çº¿ç¨‹ åŠ é”ã€è§£é”ã€å…¥é˜Ÿã€å‡ºé˜Ÿçš„ä¸€äº›æ–¹æ³•ï¼Œæä¾›ç»™å…¶ä»–jucé”ä½¿ç”¨</li>
<li>å®ƒå†…éƒ¨é€šè¿‡ç»´æŠ¤ä¸€ä¸ªå…±äº«å˜é‡<code>state</code>å’Œå…ˆè¿›å…ˆå‡º<code>FIFO</code>ç­‰å¾…é˜Ÿåˆ—æ¥æ§åˆ¶å¹¶å‘çº¿ç¨‹ï¼Œåœ¨ç‹¬å é”ä¸­ï¼Œ<code>state</code>ä¸º0è¡¨ç¤ºæœªè¢«å ç”¨ï¼Œ1è¡¨ç¤ºå·²è¢«å ç”¨ï¼Œå½“çº¿ç¨‹è·å–èµ„æºå¤±è´¥æ—¶ï¼Œä¼šè¢«åŠ å…¥åˆ°AQSçš„ç­‰å¾…é˜Ÿåˆ—ä¸­</li>
<li>åŸºäºAQSå®ç°çš„ç±»æœ‰<code>ReentrantLock</code>, <code>CountDownLatch</code>, <code>Semaphore</code>ç­‰</li>
</ul>
<h4 data-id="heading-5">å…¶ä»–</h4>
<p>æ­»é”ï¼šä¸¤ä¸ªçº¿ç¨‹éƒ½æƒ³è·å–å¯¹æ–¹å·²ç»æ‹¥æœ‰çš„é”ï¼Œé¿å…æ­»é”çš„æ–¹æ³•ï¼š</p>
<ul>
<li>é¿å…åœ¨ä¸€ä¸ªé”çš„ä»£ç å—ä¸­å†æ¬¡å°è¯•è·å–å¦ä¸€ä¸ªé”</li>
<li>ä½¿ç”¨å°è¯•è·å–é”çš„æ–¹æ³•ï¼Œæ¯”å¦‚<code>ReentrantLock</code>çš„<code>trylock</code>æ–¹æ³•ï¼Œ<code>Semaphore</code>çš„<code>tryAcquire</code>æ–¹æ³•ï¼Œå¦‚æœè·å–ä¸åˆ°ä½¿ç”¨å…¶ä»–æ–¹æ¡ˆ</li>
<li>å‡å°é”çš„æ§åˆ¶èŒƒå›´</li>
</ul>
<p>ä¿è¯çº¿ç¨‹å®‰å…¨çš„æ–¹å¼</p>
<ul>
<li>åŒæ­¥é”ï¼š<code>synchorized</code>ã€<code>ReentrantLock</code></li>
<li>åŸå­æ“ä½œç±»ï¼š<code>AtomicInteger</code>ã€<code>AtomicReference</code></li>
<li>çº¿ç¨‹å®‰å…¨çš„å®¹å™¨ï¼š<code>ConcurrentHashMap</code>ç­‰ï¼Œé¿å…æ‰‹åŠ¨åŠ é”</li>
<li>ä½¿ç”¨å±€éƒ¨å˜é‡</li>
</ul>
<p>ä¸€ä¸ªçº¿ç¨‹è¢«å¯åŠ¨ä¸¤æ¬¡ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆï¼š</p>
<ul>
<li>çº¿ç¨‹ä¸€æ—¦è¿è¡Œå°±ä¸ä¼šå›åˆ°åˆå§‹çŠ¶æ€ï¼Œä¼šæŠ›å‡º<code>IllegalThreadStateException</code>å¼‚å¸¸</li>
</ul>
<p>ä¸Šä¸‹æ–‡åˆ‡æ¢ï¼š</p>
<ul>
<li>æš‚åœä¸€ä¸ªçº¿ç¨‹çš„å¤„ç†ï¼Œå¹¶å°†CPUå¯„å­˜å™¨ä¸­è¯¥çº¿ç¨‹çš„æ•°æ®å­˜å‚¨åœ¨å†…å­˜ä¸­</li>
<li>ä»å†…å­˜ä¸­è·å–ä¸‹ä¸€ä¸ªçº¿ç¨‹çš„ä¸Šä¸‹æ–‡ï¼Œå¹¶åœ¨CPUçš„å¯„å­˜å™¨ä¸­æ¢å¤å®ƒ</li>
<li>è¿”å›åˆ°ç¨‹åºè®¡æ•°å™¨æŒ‡ç¤ºçš„ä½ç½® ç»§ç»­æ‰§è¡Œ</li>
</ul>
<p>å¹¶å‘å’Œå¹¶è¡Œï¼š</p>
<ul>
<li>å¹¶å‘ï¼šçº¿ç¨‹è½®æµä½¿ç”¨cpuçš„åšæ³•ç§°ä¸ºå¹¶å‘</li>
<li>å¹¶è¡Œï¼šå¤šä¸ªcpuåŒæ—¶åœ¨è°ƒåº¦çº¿ç¨‹æ‰§è¡Œä»»åŠ¡</li>
</ul>
<p>åŸå­æ€§ã€å¯è§æ€§ã€æœ‰åºæ€§</p>
<ul>
<li>åŸå­æ€§ï¼šä¸€ç»„æ“ä½œè¦ä¹ˆå…¨éƒ¨æ‰§è¡ŒæˆåŠŸï¼Œè¦ä¹ˆå…¨éƒ¨ä¸æ‰§è¡Œ</li>
<li>å¯è§æ€§ï¼šä¸€ä¸ªçº¿ç¨‹ä¿®æ”¹å…±äº«å˜é‡çš„å€¼åï¼Œå…¶ä»–çº¿ç¨‹èƒ½å¤Ÿç«‹å³çœ‹åˆ°è¿™ä¸ªä¿®æ”¹åçš„å€¼</li>
<li>æœ‰åºæ€§ï¼šç¨‹åºçš„æ‰§è¡Œé¡ºåºå’Œä»£ç çš„å…ˆåé¡ºåºä¸€è‡´ï¼Œä½†æ˜¯å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ï¼Œç¼–è¯‘å™¨ä¼šå¯¹æŒ‡ä»¤è¿›è¡Œé‡æ’åºï¼Œè¿›è€Œå‡ºç°å¹¶å‘é—®é¢˜</li>
</ul>
<p>æŒ‡ä»¤é‡æ’ï¼š</p>
<ul>
<li>ç¼–è¯‘å™¨å’Œå¤„ç†å™¨ä¸ºäº†ä¼˜åŒ–æ€§èƒ½ï¼Œå¯¹æŒ‡ä»¤æ‰§è¡Œé¡ºåºè¿›è¡Œè°ƒæ•´ï¼ŒæŒ‡ä»¤é‡æ’ç±»å‹åŒ…æ‹¬ï¼šç¼–è¯‘å™¨é‡æ’å’Œcpué‡æ’ã€‚ä¸ºäº†é¿å…å¤šçº¿ç¨‹ä¹‹é—´æ“ä½œå‡ºç°ä¸åŒæ­¥ç°è±¡ï¼Œå¯ä»¥ä½¿ç”¨<code>volatile</code>å’Œ<code>synchorized</code>ç­‰æ¥é™åˆ¶è¿™ç§è¡Œä¸º</li>
</ul>
<h4 data-id="heading-6">ç›¸å…³æ–‡ç« </h4>
<ul>
<li>CASï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fnote.youdao.com%2Fs%2FAJECfbdA" target="_blank" title="https://note.youdao.com/s/AJECfbdA" ref="nofollow noopener noreferrer">note.youdao.com/s/AJECfbdA</a></li>
<li>ThreadLocalï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fnote.youdao.com%2Fs%2F7pvkie8N" target="_blank" title="https://note.youdao.com/s/7pvkie8N" ref="nofollow noopener noreferrer">note.youdao.com/s/7pvkie8N</a></li>
<li>CPUç¼“å­˜æ¶æ„ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fnote.youdao.com%2Fs%2FALicPbhV" target="_blank" title="https://note.youdao.com/s/ALicPbhV" ref="nofollow noopener noreferrer">note.youdao.com/s/ALicPbhV</a></li>
<li>JUCå¹¶å‘å·¥å…·ç±»ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fnote.youdao.com%2Fs%2FdbBcYl4a" target="_blank" title="https://note.youdao.com/s/dbBcYl4a" ref="nofollow noopener noreferrer">note.youdao.com/s/dbBcYl4a</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¦‚ä½•å®ç°åˆ’è¯æ•ˆæœ]]></title>    <link>https://juejin.cn/post/7587998744294768646</link>    <guid>https://juejin.cn/post/7587998744294768646</guid>    <pubDate>2025-12-26T10:41:11.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587998744294768646" data-draft-id="7587392473851805742" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¦‚ä½•å®ç°åˆ’è¯æ•ˆæœ"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript"/> <meta itemprop="datePublished" content="2025-12-26T10:41:11.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="june18"/> <meta itemprop="url" content="https://juejin.cn/user/1011206428561639"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¦‚ä½•å®ç°åˆ’è¯æ•ˆæœ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1011206428561639/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    june18
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-26T10:41:11.000Z" title="Fri Dec 26 2025 10:41:11 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»23åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æœ€è¿‘åšäº†ä¸€ä¸ªåˆ’è¯çš„éœ€æ±‚ï¼Œæƒ³å’Œå¤§å®¶åˆ†äº«ä¸€ä¸‹ã€‚åˆ’è¯åœ¨å¯Œæ–‡æœ¬ç¼–è¾‘å™¨é‡Œæ¯”è¾ƒå¸¸ç”¨ï¼Œæ•ˆæœå›¾å¦‚ä¸‹ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a0eab5eec4d34614bd694046415016a2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAganVuZTE4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767350471&amp;x-signature=FgxGXQtTGDzxMI%2BnypfoIWsLr68%3D" alt="åˆ’è¯æ•ˆæœ" loading="lazy"/></p>
<p>æœ¬ç¯‡æ–‡ç« å°†ä¸€æ­¥ä¸€æ­¥å¸¦å¤§å®¶å®ç°è¿™ä¸ªæ•ˆæœã€‚</p>
<h2 data-id="heading-0">å®ç°å­—æ•°ç»Ÿè®¡</h2>
<h3 data-id="heading-1">å‰ç½®çŸ¥è¯†</h3>
<h4 data-id="heading-2">window.getSelection</h4>
<p><code>window.getSelection</code> å¯è·å–é€‰ä¸­æ–‡æœ¬ä¿¡æ¯å’Œé€‰æ‹©å†…å®¹ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-variable language_">document</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"mouseup"</span>, <span class="hljs-keyword">function</span> (<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> selection = <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">getSelection</span>();
  <span class="hljs-keyword">if</span> (selection) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'selection'</span>, selection)
    <span class="hljs-keyword">const</span> selectedText = selection.<span class="hljs-title function_">toString</span>();
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(selectedText);
  }
});
</code></pre>
<p>æ‰§è¡Œç»“æœæˆªå›¾ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/db7ea8fbc6b84e929481a0e64fcb6c33~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAganVuZTE4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767350471&amp;x-signature=XhHbZgaVGNb0V%2F675o6tUnsc%2BQc%3D" alt="window.getSelection" loading="lazy"/></p>
<h3 data-id="heading-3">å®ç°è¾“å…¥æ¡†</h3>
<p>ä¸»ç»„ä»¶ <code>TextCustom</code>ï¼ŒåŒ…æ‹¬ä¸¤ä¸ªç»„ä»¶ï¼šè¾“å…¥æ¡†å’Œæµ®åŠ¨å·¥å…·æ ã€‚
è¿™é‡Œçš„è¾“å…¥æ¡†æ˜¯é€šè¿‡ <code>div</code> å…ƒç´ æ¨¡æ‹Ÿçš„ï¼Œå®ç°èµ·æ¥ä¹Ÿå¾ˆç®€å•ï¼Œåªéœ€è¦ä¸º <code>div</code> æ·»åŠ  <code>contentEditable</code> å±æ€§ ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> <span class="hljs-title function_">TextCustom</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      {/* æ¨¡æ‹Ÿè¾“å…¥æ¡† */}
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span>
        <span class="hljs-attr">id</span>=<span class="hljs-string">"editor"</span> // <span class="hljs-attr">åé¢ä¼šç”¨</span>
        <span class="hljs-attr">contentEditable</span>=<span class="hljs-string">{true}</span>
        <span class="hljs-attr">suppressContentEditableWarning</span>=<span class="hljs-string">{true}</span> // <span class="hljs-attr">suppressContentEditableWarning</span> <span class="hljs-attr">æ˜¯</span> <span class="hljs-attr">React</span> <span class="hljs-attr">æ¡†æ¶ä¸­çš„ä¸€ä¸ªç‰¹æ®Šå±æ€§</span>ï¼Œ<span class="hljs-attr">ç”¨äº</span>â€Œ<span class="hljs-attr">æŠ‘åˆ¶</span>â€Œ<span class="hljs-attr">contentEditable</span> <span class="hljs-attr">å…ƒç´ è§¦å‘çš„å¸¸è§è­¦å‘Š</span>
      /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
};
</code></pre>
<h3 data-id="heading-4">å®ç°æµ®åŠ¨å·¥å…·æ ç»„ä»¶</h3>
<h4 data-id="heading-5">æµ®åŠ¨å·¥å…·æ ç»„ä»¶å®ç°</h4>
<p>æµ®åŠ¨å·¥å…·æ ç»„ä»¶æ˜¯é€šè¿‡å›ºå®šå®šä½å®ç°çš„ï¼Œå·¥å…·æ çš„ä½ç½®æ˜¯è·Ÿéšé€‰ä¸­æ–‡æœ¬çš„ä½ç½®æ”¹å˜è€Œæ”¹å˜çš„ï¼Œä¸»è¦å±æ€§æ˜¯ <code>top</code> å’Œ <code>left</code>ï¼Œé»˜è®¤å€¼éƒ½å…ˆè®¾ç½®æˆ 0ã€‚</p>
<p>æµ®åŠ¨å·¥å…·æ ç»„ä»¶çš„å†…å®¹æ˜¯é€‰ä¸­æ–‡æœ¬çš„å­—æ•°ç»Ÿè®¡ï¼Œå…ˆç¡¬ç¼–ç æˆâ€œx å­—â€ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> <span class="hljs-title function_">FloatingToolbar</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>
      <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span>
        <span class="hljs-attr">position:</span> "<span class="hljs-attr">fixed</span>",
        <span class="hljs-attr">top:</span> <span class="hljs-attr">0</span>, // <span class="hljs-attr">åœ¨é€‰ä¸­æ–‡æœ¬ä¸Šæ–¹æ˜¾ç¤º</span>
        <span class="hljs-attr">left:</span> <span class="hljs-attr">0</span>, // <span class="hljs-attr">å±…ä¸­æ˜¾ç¤º</span>
        <span class="hljs-attr">transform:</span> "<span class="hljs-attr">translateX</span>(<span class="hljs-attr">-10</span>%)", // <span class="hljs-attr">å¾®è°ƒæ°´å¹³ä½ç½®</span>
        <span class="hljs-attr">background:</span> "#<span class="hljs-attr">fff</span>",
        <span class="hljs-attr">border:</span> "<span class="hljs-attr">1px</span> <span class="hljs-attr">solid</span> <span class="hljs-attr">red</span>",
        <span class="hljs-attr">zIndex:</span> <span class="hljs-attr">10000</span>,
      }}
    &gt;</span>
      {/* æ˜¾ç¤ºé€‰ä¸­æ–‡æœ¬çš„å­—ç¬¦æ•°é‡ */}
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
        ğŸ“ x å­—
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
};
</code></pre>
<h4 data-id="heading-6">å¼•å…¥åˆ°ä¸»ç»„ä»¶</h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> <span class="hljs-title function_">TextCustom</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      {/* æ¨¡æ‹Ÿè¾“å…¥æ¡† */}
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span>
        <span class="hljs-attr">id</span>=<span class="hljs-string">"editor"</span> // <span class="hljs-attr">åé¢ä¼šç”¨</span>
        <span class="hljs-attr">contentEditable</span>=<span class="hljs-string">{true}</span>
        <span class="hljs-attr">suppressContentEditableWarning</span>=<span class="hljs-string">{true}</span> // <span class="hljs-attr">suppressContentEditableWarning</span> <span class="hljs-attr">æ˜¯</span> <span class="hljs-attr">React</span> <span class="hljs-attr">æ¡†æ¶ä¸­çš„ä¸€ä¸ªç‰¹æ®Šå±æ€§</span>ï¼Œ<span class="hljs-attr">ç”¨äº</span>â€Œ<span class="hljs-attr">æŠ‘åˆ¶</span>â€Œ<span class="hljs-attr">contentEditable</span> <span class="hljs-attr">å…ƒç´ è§¦å‘çš„å¸¸è§è­¦å‘Š</span>
      /&gt;</span>

      <span class="hljs-tag">&lt;<span class="hljs-name">FloatingToolbar</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
};
</code></pre>
<h3 data-id="heading-7">å®ç°è‡ªå®šä¹‰ hook</h3>
<p>å°è£…è‡ªå®šä¹‰ hookï¼Œå¯å‘½åä¸º <code>useTextSelection</code>ï¼Œå…¥å‚æ˜¯è¾“å…¥æ¡† idï¼Œè¿”å› selection å’Œ toolbarRefã€‚
å…¶ä¸­ selection æ˜¯ç”¨æ¥è·å–æ–‡æœ¬é€‰æ‹©ä¿¡æ¯ï¼ŒåŒ…æ‹¬é€‰ä¸­æ–‡æœ¬çš„ä½ç½®å’Œé€‰ä¸­çš„æ–‡æœ¬å†…å®¹ï¼›toolbarRef æ˜¯å·¥å…·æ çš„å¼•ç”¨ï¼Œåé¢çš„é¼ æ ‡äº‹ä»¶ä¼šç”¨åˆ°ï¼Œå¤§æ¦‚ç»“æ„å¦‚ä¸‹ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> <span class="hljs-title function_">useTextSelection</span> = (<span class="hljs-params">target</span>) =&gt; {
  <span class="hljs-comment">// å­˜å‚¨æ–‡æœ¬é€‰æ‹©ä¿¡æ¯</span>
  <span class="hljs-keyword">const</span> [selection, setSelection] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">null</span>);
  
  <span class="hljs-comment">// æ ‡è®°ç”¨æˆ·æ˜¯å¦æ­£åœ¨ä¸å·¥å…·æ äº¤äº’ï¼Œæ¯”å¦‚ç‚¹å‡»å·¥å…·æ </span>
  <span class="hljs-keyword">const</span> isInToolbarRef = <span class="hljs-title function_">useRef</span>(<span class="hljs-literal">false</span>);
  
  <span class="hljs-comment">// å·¥å…·æ  DOM å…ƒç´ çš„å¼•ç”¨</span>
  <span class="hljs-keyword">const</span> toolbarRef = <span class="hljs-title function_">useRef</span>(<span class="hljs-literal">null</span>);

  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-comment">/**
     * å¤„ç†æ–‡æœ¬é€‰æ‹©å˜åŒ–äº‹ä»¶
     * å½“ç”¨æˆ·åœ¨é¡µé¢ä¸Šé€‰æ‹©æ–‡æœ¬æ—¶è§¦å‘
     */</span>
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleSelectionChange</span> = (<span class="hljs-params"/>) =&gt; {
      <span class="hljs-comment">// å¦‚æœç”¨æˆ·æ­£åœ¨ä¸å·¥å…·æ äº¤äº’ï¼Œä¸å¤„ç†é€‰æ‹©å˜åŒ–</span>
      <span class="hljs-keyword">if</span> (isInToolbarRef.<span class="hljs-property">current</span>) <span class="hljs-keyword">return</span>;

      <span class="hljs-keyword">const</span> selection = <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">getSelection</span>();
      <span class="hljs-keyword">const</span> selectedText = selection.<span class="hljs-title function_">toString</span>().<span class="hljs-title function_">trim</span>();

      <span class="hljs-comment">// ç¡®ä¿æœ‰é€‰ä¸­æ–‡æœ¬å¹¶ä¸”é€‰æ‹©èŒƒå›´æœ‰æ•ˆ</span>
      <span class="hljs-keyword">if</span> (selectedText &amp;&amp; selection.<span class="hljs-property">rangeCount</span> &gt; <span class="hljs-number">0</span>) {
        <span class="hljs-keyword">const</span> range = selection.<span class="hljs-title function_">getRangeAt</span>(<span class="hljs-number">0</span>);
        <span class="hljs-keyword">const</span> rect = range.<span class="hljs-title function_">getBoundingClientRect</span>(); <span class="hljs-comment">// è·å–é€‰ä¸­æ–‡æœ¬çš„ä½ç½®å’Œå°ºå¯¸</span>

        <span class="hljs-comment">// è·å–é€‰ä¸­æ–‡æœ¬çš„é”šç‚¹èŠ‚ç‚¹ï¼ˆé€‰æ‹©çš„èµ·å§‹ä½ç½®ï¼‰</span>
        <span class="hljs-keyword">const</span> anchorNode = selection.<span class="hljs-property">anchorNode</span>;
        <span class="hljs-comment">// è·å–ç›®æ ‡ç¼–è¾‘å™¨å…ƒç´ </span>
        <span class="hljs-keyword">const</span> targetElement = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(target);
        
        <span class="hljs-comment">// æ£€æŸ¥é€‰æ‹©æ˜¯å¦å‘ç”Ÿåœ¨ç›®æ ‡ç¼–è¾‘å™¨å†…</span>
        <span class="hljs-keyword">const</span> isInTarget =
          targetElement &amp;&amp;
          (targetElement.<span class="hljs-title function_">contains</span>(anchorNode) || targetElement === anchorNode);

        <span class="hljs-keyword">if</span> (isInTarget) {
          <span class="hljs-comment">// æ›´æ–°é€‰æ‹©ä¿¡æ¯ï¼Œæ˜¾ç¤ºå·¥å…·æ </span>
          <span class="hljs-title function_">setSelection</span>({
            <span class="hljs-attr">clientRect</span>: rect,        <span class="hljs-comment">// é€‰ä¸­æ–‡æœ¬çš„ä½ç½®ä¿¡æ¯</span>
            <span class="hljs-attr">selectedText</span>: selectedText, <span class="hljs-comment">// é€‰ä¸­çš„æ–‡æœ¬å†…å®¹</span>
          });
        } <span class="hljs-keyword">else</span> {
          <span class="hljs-comment">// é€‰æ‹©ä¸åœ¨ç¼–è¾‘å™¨å†…ï¼Œéšè—å·¥å…·æ </span>
          <span class="hljs-title function_">setSelection</span>(<span class="hljs-literal">null</span>);
        }
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-comment">// æ²¡æœ‰é€‰ä¸­æ–‡æœ¬ï¼Œéšè—å·¥å…·æ </span>
        <span class="hljs-title function_">setSelection</span>(<span class="hljs-literal">null</span>);
      }
    };

    <span class="hljs-comment">/**
     * å¤„ç†é¼ æ ‡æŒ‰ä¸‹äº‹ä»¶
     * ç”¨äºæ£€æµ‹ç”¨æˆ·æ˜¯å¦ç‚¹å‡»äº†å·¥å…·æ åŒºåŸŸ
     * <span class="hljs-doctag">@param</span> {<span class="hljs-type">MouseEvent</span>} <span class="hljs-variable">e</span> - é¼ æ ‡äº‹ä»¶å¯¹è±¡
     */</span>
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleMouseDown</span> = (<span class="hljs-params">e</span>) =&gt; {
      <span class="hljs-comment">// æ£€æŸ¥ç‚¹å‡»æ˜¯å¦å‘ç”Ÿåœ¨å·¥å…·æ åŒºåŸŸå†…</span>
      <span class="hljs-keyword">if</span> (toolbarRef.<span class="hljs-property">current</span> &amp;&amp; toolbarRef.<span class="hljs-property">current</span>.<span class="hljs-title function_">contains</span>(e.<span class="hljs-property">target</span>)) {
        isInToolbarRef.<span class="hljs-property">current</span> = <span class="hljs-literal">true</span>; <span class="hljs-comment">// ç”¨æˆ·æ­£åœ¨ä¸å·¥å…·æ äº¤äº’</span>
      } <span class="hljs-keyword">else</span> {
        isInToolbarRef.<span class="hljs-property">current</span> = <span class="hljs-literal">false</span>; <span class="hljs-comment">// ç”¨æˆ·ç‚¹å‡»äº†å·¥å…·æ å¤–éƒ¨</span>
      }
    };

    <span class="hljs-comment">/**
     * å¤„ç†é¼ æ ‡æŠ¬èµ·äº‹ä»¶
     * ç”¨æˆ·å®Œæˆé€‰æ‹©æ“ä½œåï¼Œå»¶è¿Ÿæ£€æŸ¥é€‰æ‹©å†…å®¹
     */</span>
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleMouseUp</span> = (<span class="hljs-params"/>) =&gt; {
      <span class="hljs-comment">// å»¶è¿Ÿ 100ms æ‰§è¡Œï¼Œç¡®ä¿æµè§ˆå™¨å·²å®Œæˆé€‰æ‹©æ“ä½œ</span>
      <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
        <span class="hljs-comment">// å¦‚æœç”¨æˆ·æ²¡æœ‰ä¸å·¥å…·æ äº¤äº’ï¼Œå¤„ç†é€‰æ‹©å˜åŒ–</span>
        <span class="hljs-keyword">if</span> (!isInToolbarRef.<span class="hljs-property">current</span>) {
          <span class="hljs-title function_">handleSelectionChange</span>();
        }
      }, <span class="hljs-number">100</span>);
    };

    <span class="hljs-comment">/**
     * å¤„ç†ç‚¹å‡»å¤–éƒ¨äº‹ä»¶
     * å½“ç”¨æˆ·ç‚¹å‡»å·¥å…·æ å’Œç¼–è¾‘å™¨å¤–éƒ¨æ—¶ï¼Œéšè—å·¥å…·æ 
     * <span class="hljs-doctag">@param</span> {<span class="hljs-type">MouseEvent</span>} <span class="hljs-variable">e</span> - é¼ æ ‡äº‹ä»¶å¯¹è±¡
     */</span>
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleClickOutside</span> = (<span class="hljs-params">e</span>) =&gt; {
      <span class="hljs-comment">// æ£€æŸ¥ç‚¹å‡»æ˜¯å¦å‘ç”Ÿåœ¨å·¥å…·æ å¤–éƒ¨</span>
      <span class="hljs-keyword">if</span> (toolbarRef.<span class="hljs-property">current</span> &amp;&amp; !toolbarRef.<span class="hljs-property">current</span>.<span class="hljs-title function_">contains</span>(e.<span class="hljs-property">target</span>)) {
        <span class="hljs-keyword">const</span> targetElement = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(target);
        <span class="hljs-comment">// æ£€æŸ¥ç‚¹å‡»æ˜¯å¦ä¹Ÿå‘ç”Ÿåœ¨ç¼–è¾‘å™¨å¤–éƒ¨</span>
        <span class="hljs-keyword">if</span> (targetElement &amp;&amp; !targetElement.<span class="hljs-title function_">contains</span>(e.<span class="hljs-property">target</span>)) {
          <span class="hljs-comment">// é‡ç½®é€‰æ‹©ä¿¡æ¯ï¼Œéšè—å·¥å…·æ </span>
          <span class="hljs-title function_">setSelection</span>(<span class="hljs-literal">null</span>);
        }
      }
    };

    <span class="hljs-comment">// æ·»åŠ äº‹ä»¶ç›‘å¬å™¨</span>
    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"selectionchange"</span>, handleSelectionChange); <span class="hljs-comment">// ç›‘å¬æ–‡æœ¬é€‰æ‹©å˜åŒ–</span>
    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"mousedown"</span>, handleMouseDown); <span class="hljs-comment">// ç›‘å¬é¼ æ ‡æŒ‰ä¸‹</span>
    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"mouseup"</span>, handleMouseUp); <span class="hljs-comment">// ç›‘å¬é¼ æ ‡æŠ¬èµ·</span>
    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"mousedown"</span>, handleClickOutside); <span class="hljs-comment">// ç›‘å¬å¤–éƒ¨ç‚¹å‡»</span>

    <span class="hljs-comment">// æ¸…ç†å‡½æ•°ï¼šç»„ä»¶å¸è½½æ—¶ç§»é™¤äº‹ä»¶ç›‘å¬å™¨</span>
    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">"selectionchange"</span>, handleSelectionChange);
      <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">"mousedown"</span>, handleMouseDown);
      <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">"mouseup"</span>, handleMouseUp);
      <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">"mousedown"</span>, handleClickOutside);
    };
  }, [target]); <span class="hljs-comment">// ä¾èµ–é¡¹ï¼šå½“ target å˜åŒ–æ—¶é‡æ–°è¿è¡Œ effect</span>

  <span class="hljs-keyword">return</span> {
    selection,    <span class="hljs-comment">// å½“å‰çš„é€‰æ‹©ä¿¡æ¯</span>
    toolbarRef,   <span class="hljs-comment">// å·¥å…·æ çš„ ref å¼•ç”¨</span>
  };
}
</code></pre>
<p>ä¸»ç»„ä»¶ä¿®æ”¹å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> <span class="hljs-title function_">TextCustom</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-comment">// ä½¿ç”¨è‡ªå®šä¹‰ Hook è·å–æ–‡æœ¬é€‰æ‹©ä¿¡æ¯å’Œå·¥å…·æ å¼•ç”¨</span>
  <span class="hljs-keyword">const</span> { selection, toolbarRef } = <span class="hljs-title function_">useTextSelection</span>(<span class="hljs-string">"#editor"</span>);

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span>
        <span class="hljs-attr">id</span>=<span class="hljs-string">"editor"</span>
        <span class="hljs-attr">contentEditable</span>=<span class="hljs-string">{true}</span>
        <span class="hljs-attr">className</span>=<span class="hljs-string">{styles.editor}</span>
        <span class="hljs-attr">suppressContentEditableWarning</span>=<span class="hljs-string">{true}</span>
      /&gt;</span>

      <span class="hljs-tag">&lt;<span class="hljs-name">FloatingToolbar</span>
        <span class="hljs-attr">selection</span>=<span class="hljs-string">{selection}</span>
        <span class="hljs-attr">toolbarRef</span>=<span class="hljs-string">{toolbarRef}</span>
      /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
};
</code></pre>
<p>æµ®åŠ¨å·¥å…·æ ä¿®æ”¹å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> <span class="hljs-title function_">FloatingToolbar</span> = (<span class="hljs-params">{
  selection,
  toolbarRef,
}</span>) =&gt; {
  <span class="hljs-comment">// å¦‚æœæ²¡æœ‰é€‰æ‹©ä¿¡æ¯ï¼Œä¸æ¸²æŸ“å·¥å…·æ </span>
  <span class="hljs-keyword">if</span> (!selection) <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;

  <span class="hljs-keyword">const</span> { clientRect, selectedText } = selection;
  
  <span class="hljs-comment">// å¦‚æœæ²¡æœ‰é€‰ä¸­æ–‡æœ¬æˆ–ä½ç½®ä¿¡æ¯ï¼Œä¸æ¸²æŸ“å·¥å…·æ </span>
  <span class="hljs-keyword">if</span> (!selectedText || !clientRect) <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>
      <span class="hljs-attr">ref</span>=<span class="hljs-string">{toolbarRef}</span>
      <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span>
        <span class="hljs-attr">position:</span> "<span class="hljs-attr">fixed</span>",
        <span class="hljs-attr">top:</span> <span class="hljs-attr">clientRect.top</span> <span class="hljs-attr">-</span> <span class="hljs-attr">65</span>, // <span class="hljs-attr">åœ¨é€‰ä¸­æ–‡æœ¬ä¸Šæ–¹æ˜¾ç¤º</span>ï¼Œ<span class="hljs-attr">65</span> <span class="hljs-attr">ä¸æ˜¯å›ºå®šçš„</span>ï¼Œ<span class="hljs-attr">å¯ä»¥è‡ªè¡Œè°ƒæ•´</span>
        <span class="hljs-attr">left:</span> <span class="hljs-attr">clientRect.left</span> + <span class="hljs-attr">clientRect.width</span> / <span class="hljs-attr">2</span>, // <span class="hljs-attr">å±…ä¸­æ˜¾ç¤º</span>
        <span class="hljs-attr">transform:</span> "<span class="hljs-attr">translateX</span>(<span class="hljs-attr">-10</span>%)", // <span class="hljs-attr">å¾®è°ƒæ°´å¹³ä½ç½®</span>
        <span class="hljs-attr">background:</span> "#<span class="hljs-attr">fff</span>",
        <span class="hljs-attr">border:</span> "<span class="hljs-attr">1px</span> <span class="hljs-attr">solid</span> <span class="hljs-attr">red</span>",
        <span class="hljs-attr">zIndex:</span> <span class="hljs-attr">10000</span>,
      }}
    &gt;</span>
      {/* æ˜¾ç¤ºé€‰ä¸­æ–‡æœ¬çš„å­—ç¬¦æ•°é‡ */}
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
        ğŸ“ {selectedText.length} å­—
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
};
</code></pre>
<h2 data-id="heading-8">å®ç°åŠ ç²—</h2>
<h3 data-id="heading-9">å‰ç½®çŸ¥è¯†</h3>
<h4 data-id="heading-10">document.execCommand</h4>
<p><code>document.execCommand</code> å¯å¯¹é€‰ä¸­æ–‡æœ¬è¿›è¡Œæ“ä½œï¼Œæ¯”å¦‚åŠ ç²—ã€æ–œä½“ã€ä¸‹åˆ’çº¿ç­‰ï¼Œä¸¾ä¸ªç®€å•çš„ä¾‹å­ã€‚</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>æ–‡æœ¬ç¼–è¾‘å™¨ç¤ºä¾‹<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
   <span class="hljs-selector-class">.editor</span> {
      <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#ccc</span>;
      <span class="hljs-attribute">padding</span>: <span class="hljs-number">10px</span>;
      <span class="hljs-attribute">min-height</span>: <span class="hljs-number">200px</span>;
    }
  </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">contentEditable</span>=<span class="hljs-string">"true"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"editor"</span>&gt;</span>
    è¯·åœ¨è¿™é‡Œè¾“å…¥æ–‡æœ¬ï¼Œç„¶åé€‰ä¸­ä¸€éƒ¨åˆ†æ–‡æœ¬å¹¶ç‚¹å‡»ç›¸åº”çš„æŒ‰é’®ã€‚
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">"handleBold()"</span>&gt;</span>åŠ ç²—<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">"handleItalic()"</span>&gt;</span>æ–œä½“<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">"handleUnderline()"</span>&gt;</span>ä¸‹åˆ’çº¿<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>

  <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">handleBold</span>(<span class="hljs-params"/>) {
      <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">execCommand</span>(<span class="hljs-string">"bold"</span>, <span class="hljs-literal">false</span>, <span class="hljs-literal">null</span>);
    }

    <span class="hljs-keyword">function</span> <span class="hljs-title function_">handleItalic</span>(<span class="hljs-params"/>) {
      <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">execCommand</span>(<span class="hljs-string">"italic"</span>, <span class="hljs-literal">false</span>, <span class="hljs-literal">null</span>);
    }

    <span class="hljs-keyword">function</span> <span class="hljs-title function_">handleUnderline</span>(<span class="hljs-params"/>) {
      <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">execCommand</span>(<span class="hljs-string">"underline"</span>, <span class="hljs-literal">false</span>, <span class="hljs-literal">null</span>);
    }
  </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/df031f24e0f641e6a1d8819ecd12c024~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAganVuZTE4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767350471&amp;x-signature=RyYPGawTLaqM%2B7EMAfiPCU0ofk0%3D" alt="æ–‡æœ¬ç¼–è¾‘å™¨ç¤ºä¾‹" loading="lazy"/></p>
<h4 data-id="heading-11">document.queryCommandState("bold")</h4>
<p><code>document.queryCommandState("bold")</code> å¯è·å–åŠ ç²—çŠ¶æ€ï¼Œè¿”å›å¸ƒå°”å€¼ã€‚å½“é€‰æ‹©çš„æ–‡æœ¬ï¼Œåªæœ‰éƒ¨åˆ†åŠ ç²—æ—¶ä¹Ÿä¼šè¿”å› trueã€‚</p>
<h3 data-id="heading-12">ä¿®æ”¹ä¸»ç»„ä»¶</h3>
<p>ä»è‡ªå®šä¹‰ Hook ä¸­è·å– <code>isBoldActive</code> å’Œ <code>handleBoldClick</code>ï¼Œå¹¶ä¼ ç»™æµ®åŠ¨å·¥å…·æ ç»„ä»¶ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> <span class="hljs-title function_">TextCustom</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-comment">// ä½¿ç”¨è‡ªå®šä¹‰ Hook è·å–æ–‡æœ¬é€‰æ‹©ä¿¡æ¯</span>
  <span class="hljs-keyword">const</span> { 
    selection, 
    toolbarRef, 
    isBoldActive, 
    handleBoldClick 
  } = <span class="hljs-title function_">useTextSelection</span>(<span class="hljs-string">"#editor"</span>);

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      {/* å¯ç¼–è¾‘çš„æ–‡æœ¬åŒºåŸŸ */}
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span>
        <span class="hljs-attr">id</span>=<span class="hljs-string">"editor"</span>
        <span class="hljs-attr">contentEditable</span>=<span class="hljs-string">{true}</span>
        <span class="hljs-attr">suppressContentEditableWarning</span>=<span class="hljs-string">{true}</span>
      /&gt;</span>

      {/* æµ®åŠ¨å·¥å…·æ ç»„ä»¶ */}
      <span class="hljs-tag">&lt;<span class="hljs-name">FloatingToolbar</span>
        <span class="hljs-attr">selection</span>=<span class="hljs-string">{selection}</span>
        <span class="hljs-attr">toolbarRef</span>=<span class="hljs-string">{toolbarRef}</span>
        <span class="hljs-attr">onBoldClick</span>=<span class="hljs-string">{handleBoldClick}</span>
        <span class="hljs-attr">isBoldActive</span>=<span class="hljs-string">{isBoldActive}</span>
      /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
};
</code></pre>
<h3 data-id="heading-13">ä¿®æ”¹æµ®åŠ¨å·¥å…·æ </h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> <span class="hljs-title function_">FloatingToolbar</span> = (<span class="hljs-params">{
  selection,
  toolbarRef,
  onBoldClick,
  isBoldActive = <span class="hljs-literal">false</span>,
}</span>) =&gt; {
  <span class="hljs-comment">// å¦‚æœæ²¡æœ‰é€‰æ‹©ä¿¡æ¯ï¼Œä¸æ¸²æŸ“å·¥å…·æ </span>
  <span class="hljs-keyword">if</span> (!selection) <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;

  <span class="hljs-keyword">const</span> { clientRect, selectedText, range } = selection;
  
  <span class="hljs-comment">// å¦‚æœæ²¡æœ‰é€‰ä¸­æ–‡æœ¬æˆ–ä½ç½®ä¿¡æ¯ï¼Œä¸æ¸²æŸ“å·¥å…·æ </span>
  <span class="hljs-keyword">if</span> (!selectedText || !clientRect || !range) <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>
      <span class="hljs-attr">ref</span>=<span class="hljs-string">{toolbarRef}</span>
      <span class="hljs-attr">className</span>=<span class="hljs-string">"floating-toolbar"</span>
      <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span>
        <span class="hljs-attr">position:</span> "<span class="hljs-attr">fixed</span>",
        <span class="hljs-attr">top:</span> <span class="hljs-attr">clientRect.top</span> <span class="hljs-attr">-</span> <span class="hljs-attr">65</span>,
        <span class="hljs-attr">left:</span> <span class="hljs-attr">clientRect.left</span> + <span class="hljs-attr">clientRect.width</span> / <span class="hljs-attr">2</span>,
        <span class="hljs-attr">transform:</span> "<span class="hljs-attr">translateX</span>(<span class="hljs-attr">-10</span>%)",
        <span class="hljs-attr">background:</span> "#<span class="hljs-attr">fff</span>",
        <span class="hljs-attr">zIndex:</span> <span class="hljs-attr">10000</span>,
        <span class="hljs-attr">minWidth:</span> "<span class="hljs-attr">180px</span>",
      }}
    &gt;</span>
      {/* æ˜¾ç¤ºé€‰ä¸­æ–‡æœ¬çš„å­—ç¬¦æ•°é‡ */}
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">fontSize:</span> "<span class="hljs-attr">12px</span>", <span class="hljs-attr">fontWeight:</span> "<span class="hljs-attr">bold</span>" }}&gt;</span>
        ğŸ“ {selectedText.length} å­—
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

      {/* åŠ ç²—æŒ‰é’® */}
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span>
        <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> onBoldClick &amp;&amp; onBoldClick(range)}
        title="åŠ ç²—"
        style={{
          background: isBoldActive ? "#3498db" : "#999",
          border: "none",
          color: "white",
          width: "36px",
          height: "36px",
          borderRadius: "6px",
          cursor: "pointer",
          display: "flex",
          alignItems: "center",
          justifyContent: "center",
          fontSize: "14px",
        }}
      &gt;
        <span class="hljs-tag">&lt;<span class="hljs-name">strong</span>&gt;</span>B<span class="hljs-tag">&lt;/<span class="hljs-name">strong</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
};
</code></pre>
<h3 data-id="heading-14">ä¿®æ”¹è‡ªå®šä¹‰ Hook</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> <span class="hljs-title function_">useTextSelection</span> = (<span class="hljs-params">target</span>) =&gt; {
  <span class="hljs-keyword">const</span> [selection, setSelection] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">null</span>);
  <span class="hljs-keyword">const</span> [isBoldActive, setIsBoldActive] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">false</span>);
  
  <span class="hljs-comment">// æ ‡è®°ç”¨æˆ·æ˜¯å¦æ­£åœ¨ä¸å·¥å…·æ äº¤äº’</span>
  <span class="hljs-keyword">const</span> isInToolbarRef = <span class="hljs-title function_">useRef</span>(<span class="hljs-literal">false</span>);
  
  <span class="hljs-comment">// å·¥å…·æ  DOM å…ƒç´ çš„å¼•ç”¨</span>
  <span class="hljs-keyword">const</span> toolbarRef = <span class="hljs-title function_">useRef</span>(<span class="hljs-literal">null</span>);

  <span class="hljs-comment">// è·å–åŠ ç²—çŠ¶æ€</span>
  <span class="hljs-keyword">const</span> getBoldState = <span class="hljs-title function_">useCallback</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">document</span>.<span class="hljs-property">queryCommandState</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">queryCommandState</span>(<span class="hljs-string">"bold"</span>);
  }, []);

  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-comment">/**
     * å¤„ç†æ–‡æœ¬é€‰æ‹©å˜åŒ–äº‹ä»¶
     */</span>
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleSelectionChange</span> = (<span class="hljs-params"/>) =&gt; {
      <span class="hljs-comment">// å¦‚æœç”¨æˆ·æ­£åœ¨ä¸å·¥å…·æ äº¤äº’ï¼Œä¸å¤„ç†é€‰æ‹©å˜åŒ–</span>
      <span class="hljs-keyword">if</span> (isInToolbarRef.<span class="hljs-property">current</span>) <span class="hljs-keyword">return</span>;

      <span class="hljs-keyword">const</span> selection = <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">getSelection</span>();
      <span class="hljs-keyword">const</span> selectedText = selection.<span class="hljs-title function_">toString</span>().<span class="hljs-title function_">trim</span>();

      <span class="hljs-comment">// ç¡®ä¿æœ‰é€‰ä¸­æ–‡æœ¬å¹¶ä¸”é€‰æ‹©èŒƒå›´æœ‰æ•ˆ</span>
      <span class="hljs-keyword">if</span> (selectedText &amp;&amp; selection.<span class="hljs-property">rangeCount</span> &gt; <span class="hljs-number">0</span>) {
        <span class="hljs-keyword">const</span> range = selection.<span class="hljs-title function_">getRangeAt</span>(<span class="hljs-number">0</span>);
        <span class="hljs-keyword">const</span> rect = range.<span class="hljs-title function_">getBoundingClientRect</span>();

        <span class="hljs-keyword">const</span> anchorNode = selection.<span class="hljs-property">anchorNode</span>;
        <span class="hljs-keyword">const</span> targetElement = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(target);
        
        <span class="hljs-comment">// æ£€æŸ¥é€‰æ‹©æ˜¯å¦å‘ç”Ÿåœ¨ç›®æ ‡ç¼–è¾‘å™¨å†…</span>
        <span class="hljs-keyword">const</span> isInTarget =
          targetElement &amp;&amp;
          (targetElement.<span class="hljs-title function_">contains</span>(anchorNode) || targetElement === anchorNode);

        <span class="hljs-keyword">if</span> (isInTarget) {
          <span class="hljs-comment">// ä¿å­˜é€‰æ‹©èŒƒå›´</span>
          <span class="hljs-comment">// æ›´æ–°é€‰æ‹©ä¿¡æ¯ï¼Œæ˜¾ç¤ºå·¥å…·æ </span>
          <span class="hljs-title function_">setSelection</span>({
            <span class="hljs-attr">clientRect</span>: rect,
            <span class="hljs-attr">selectedText</span>: selectedText,
            <span class="hljs-attr">range</span>: range,
          });

          <span class="hljs-comment">// è·å–å½“å‰åŠ ç²—çŠ¶æ€</span>
          <span class="hljs-title function_">setIsBoldActive</span>(<span class="hljs-title function_">getBoldState</span>());  <span class="hljs-comment">// å›æ˜¾åŠ ç²—ä½¿ç”¨</span>
        } <span class="hljs-keyword">else</span> {
          <span class="hljs-comment">// é€‰æ‹©ä¸åœ¨ç¼–è¾‘å™¨å†…ï¼Œéšè—å·¥å…·æ </span>
          <span class="hljs-title function_">setSelection</span>(<span class="hljs-literal">null</span>);
        }
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-comment">// æ²¡æœ‰é€‰ä¸­æ–‡æœ¬ï¼Œéšè—å·¥å…·æ </span>
        <span class="hljs-title function_">setSelection</span>(<span class="hljs-literal">null</span>);
      }
    };

    <span class="hljs-comment">/**
     * å¤„ç†é¼ æ ‡æŒ‰ä¸‹äº‹ä»¶
     */</span>
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleMouseDown</span> = (<span class="hljs-params">e</span>) =&gt; {
      <span class="hljs-comment">// æ£€æŸ¥ç‚¹å‡»æ˜¯å¦å‘ç”Ÿåœ¨å·¥å…·æ åŒºåŸŸå†…</span>
      <span class="hljs-keyword">if</span> (toolbarRef.<span class="hljs-property">current</span> &amp;&amp; toolbarRef.<span class="hljs-property">current</span>.<span class="hljs-title function_">contains</span>(e.<span class="hljs-property">target</span>)) {
        isInToolbarRef.<span class="hljs-property">current</span> = <span class="hljs-literal">true</span>;
      } <span class="hljs-keyword">else</span> {
        isInToolbarRef.<span class="hljs-property">current</span> = <span class="hljs-literal">false</span>;
      }
    };

    <span class="hljs-comment">/**
     * å¤„ç†é¼ æ ‡æŠ¬èµ·äº‹ä»¶
     */</span>
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleMouseUp</span> = (<span class="hljs-params"/>) =&gt; {
      <span class="hljs-comment">// å»¶è¿Ÿæ‰§è¡Œï¼Œç¡®ä¿æµè§ˆå™¨å·²å®Œæˆé€‰æ‹©æ“ä½œ</span>
      <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
        <span class="hljs-keyword">if</span> (!isInToolbarRef.<span class="hljs-property">current</span>) {
          <span class="hljs-title function_">handleSelectionChange</span>();
        }
      }, <span class="hljs-number">100</span>);
    };

    <span class="hljs-comment">/**
     * å¤„ç†ç‚¹å‡»å¤–éƒ¨äº‹ä»¶
     */</span>
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleClickOutside</span> = (<span class="hljs-params">e</span>) =&gt; {
      <span class="hljs-keyword">if</span> (toolbarRef.<span class="hljs-property">current</span> &amp;&amp; !toolbarRef.<span class="hljs-property">current</span>.<span class="hljs-title function_">contains</span>(e.<span class="hljs-property">target</span>)) {
        <span class="hljs-keyword">const</span> targetElement = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(target);
        <span class="hljs-keyword">if</span> (targetElement &amp;&amp; !targetElement.<span class="hljs-title function_">contains</span>(e.<span class="hljs-property">target</span>)) {
          <span class="hljs-title function_">setSelection</span>(<span class="hljs-literal">null</span>);
        }
      }
    };

    <span class="hljs-comment">// æ·»åŠ äº‹ä»¶ç›‘å¬å™¨</span>
    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"selectionchange"</span>, handleSelectionChange);
    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"mousedown"</span>, handleMouseDown);
    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"mouseup"</span>, handleMouseUp);
    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"mousedown"</span>, handleClickOutside);

    <span class="hljs-comment">// æ¸…ç†å‡½æ•°ï¼šç»„ä»¶å¸è½½æ—¶ç§»é™¤äº‹ä»¶ç›‘å¬å™¨</span>
    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">"selectionchange"</span>, handleSelectionChange);
      <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">"mousedown"</span>, handleMouseDown);
      <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">"mouseup"</span>, handleMouseUp);
      <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">"mousedown"</span>, handleClickOutside);
    };
  }, [target, getBoldState]);

  <span class="hljs-comment">// å¤„ç†åŠ ç²—æ“ä½œ</span>
  <span class="hljs-keyword">const</span> handleBoldClick = <span class="hljs-title function_">useCallback</span>(<span class="hljs-function">(<span class="hljs-params">range</span>) =&gt;</span> {
    <span class="hljs-keyword">if</span> (!range) <span class="hljs-keyword">return</span>;

    <span class="hljs-comment">// æ‰§è¡ŒåŠ ç²—å‘½ä»¤</span>
    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">execCommand</span>(<span class="hljs-string">"bold"</span>, <span class="hljs-literal">false</span>, <span class="hljs-literal">null</span>);

    <span class="hljs-title function_">setIsBoldActive</span>(<span class="hljs-title function_">getBoldState</span>());
  }, [getBoldState]);

  <span class="hljs-keyword">return</span> {
    selection,
    toolbarRef,
    isBoldActive,
    handleBoldClick,
  };
};
</code></pre>
<h2 data-id="heading-15">å®ç°æ–œä½“</h2>
<p>åŠ ç²—ç†è§£äº†ï¼Œæ–œä½“å°±ç®€å•äº†ï¼Œæµç¨‹æ˜¯ä¸€æ¨¡ä¸€æ ·çš„ã€‚</p>
<h3 data-id="heading-16">ä¿®æ”¹ä¸»ç»„ä»¶</h3>
<p>ä»è‡ªå®šä¹‰ Hook ä¸­è·å– <code>isItalicActive</code> å’Œ <code>handleItalicClick</code>ï¼Œå¹¶ä¼ ç»™æµ®åŠ¨å·¥å…·æ ç»„ä»¶ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> <span class="hljs-title function_">TextCustom</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-comment">// ä½¿ç”¨è‡ªå®šä¹‰ Hook è·å–æ–‡æœ¬é€‰æ‹©ä¿¡æ¯</span>
  <span class="hljs-keyword">const</span> { 
    selection, 
    toolbarRef, 
    isBoldActive, 
    isItalicActive,
    handleBoldClick,
    handleItalicClick
  } = <span class="hljs-title function_">useTextSelection</span>(<span class="hljs-string">"#editor"</span>);

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      {/* å¯ç¼–è¾‘çš„æ–‡æœ¬åŒºåŸŸ */}
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span>
        <span class="hljs-attr">id</span>=<span class="hljs-string">"editor"</span>
        <span class="hljs-attr">contentEditable</span>=<span class="hljs-string">{true}</span>
        <span class="hljs-attr">suppressContentEditableWarning</span>=<span class="hljs-string">{true}</span>
      /&gt;</span>

      {/* æµ®åŠ¨å·¥å…·æ ç»„ä»¶ */}
      <span class="hljs-tag">&lt;<span class="hljs-name">FloatingToolbar</span>
        <span class="hljs-attr">selection</span>=<span class="hljs-string">{selection}</span>
        <span class="hljs-attr">toolbarRef</span>=<span class="hljs-string">{toolbarRef}</span>
        <span class="hljs-attr">onBoldClick</span>=<span class="hljs-string">{handleBoldClick}</span>
        <span class="hljs-attr">onItalicClick</span>=<span class="hljs-string">{handleItalicClick}</span>
        <span class="hljs-attr">isBoldActive</span>=<span class="hljs-string">{isBoldActive}</span>
        <span class="hljs-attr">isItalicActive</span>=<span class="hljs-string">{isItalicActive}</span>
      /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
};
</code></pre>
<h3 data-id="heading-17">ä¿®æ”¹æµ®åŠ¨å·¥å…·æ </h3>
<p>å¢åŠ æ–œä½“æŒ‰é’®ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> <span class="hljs-title function_">FloatingToolbar</span> = (<span class="hljs-params">{
  selection,
  toolbarRef,
  onBoldClick,
  onItalicClick,
  isBoldActive = <span class="hljs-literal">false</span>,
  isItalicActive = <span class="hljs-literal">false</span>,
}</span>) =&gt; {
  <span class="hljs-comment">// å¦‚æœæ²¡æœ‰é€‰æ‹©ä¿¡æ¯ï¼Œä¸æ¸²æŸ“å·¥å…·æ </span>
  <span class="hljs-keyword">if</span> (!selection) <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;

  <span class="hljs-keyword">const</span> { clientRect, selectedText, range } = selection;
  
  <span class="hljs-comment">// å¦‚æœæ²¡æœ‰é€‰ä¸­æ–‡æœ¬æˆ–ä½ç½®ä¿¡æ¯ï¼Œä¸æ¸²æŸ“å·¥å…·æ </span>
  <span class="hljs-keyword">if</span> (!selectedText || !clientRect || !range) <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>
      <span class="hljs-attr">ref</span>=<span class="hljs-string">{toolbarRef}</span>
      <span class="hljs-attr">className</span>=<span class="hljs-string">"floating-toolbar"</span>
      <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span>
        <span class="hljs-attr">position:</span> "<span class="hljs-attr">fixed</span>",
        <span class="hljs-attr">top:</span> <span class="hljs-attr">clientRect.top</span> <span class="hljs-attr">-</span> <span class="hljs-attr">65</span>,
        <span class="hljs-attr">left:</span> <span class="hljs-attr">clientRect.left</span> + <span class="hljs-attr">clientRect.width</span> / <span class="hljs-attr">2</span>,
        <span class="hljs-attr">transform:</span> "<span class="hljs-attr">translateX</span>(<span class="hljs-attr">-10</span>%)",
        <span class="hljs-attr">background:</span> "#<span class="hljs-attr">fff</span>",
        <span class="hljs-attr">zIndex:</span> <span class="hljs-attr">10000</span>,
        <span class="hljs-attr">minWidth:</span> "<span class="hljs-attr">180px</span>",
      }}
    &gt;</span>
      {/* æ˜¾ç¤ºé€‰ä¸­æ–‡æœ¬çš„å­—ç¬¦æ•°é‡ */}
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">fontSize:</span> "<span class="hljs-attr">12px</span>", <span class="hljs-attr">fontWeight:</span> "<span class="hljs-attr">bold</span>" }}&gt;</span>
        ğŸ“ {selectedText.length} å­—
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

      {/* åŠ ç²—æŒ‰é’® */}
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span>
        <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> onBoldClick &amp;&amp; onBoldClick(range)}
        title="åŠ ç²—"
        style={{
          background: isBoldActive ? "#3498db" : "#999",
          border: "none",
          color: "white",
          width: "36px",
          height: "36px",
          borderRadius: "6px",
          cursor: "pointer",
          display: "flex",
          alignItems: "center",
          justifyContent: "center",
          fontSize: "14px",
        }}
      &gt;
        <span class="hljs-tag">&lt;<span class="hljs-name">strong</span>&gt;</span>B<span class="hljs-tag">&lt;/<span class="hljs-name">strong</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>

      {/* æ–œä½“æŒ‰é’® */}
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span>
        <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> onItalicClick &amp;&amp; onItalicClick(range)}
        title="æ–œä½“"
        style={{
          background: isItalicActive ? "#3498db" : "#999",
          border: "none",
          color: "white",
          width: "36px",
          height: "36px",
          borderRadius: "6px",
          cursor: "pointer",
          display: "flex",
          alignItems: "center",
          justifyContent: "center",
          fontSize: "14px",
          fontStyle: "italic",
        }}
      &gt;
        I
      <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
};
</code></pre>
<h3 data-id="heading-18">ä¿®æ”¹è‡ªå®šä¹‰ Hook</h3>
<p>ä¸»è¦æœ‰ä¸¤å¤„æ”¹åŠ¨ï¼š</p>
<ol>
<li>å°è£…äº† <code>updateFormattingStates</code> å‡½æ•°ç”¨äºæ›´æ–°æ‰€æœ‰æ ¼å¼åŒ–çŠ¶æ€ï¼ŒåŒ…æ‹¬åŠ ç²—å’Œæ–œä½“ã€‚</li>
<li>å¢åŠ å¤„ç†æ–œä½“æ“ä½œã€‚</li>
</ol>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> <span class="hljs-title function_">useTextSelection</span> = (<span class="hljs-params">target</span>) =&gt; {
  <span class="hljs-keyword">const</span> [selection, setSelection] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">null</span>);
  <span class="hljs-keyword">const</span> [isBoldActive, setIsBoldActive] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">false</span>);
  <span class="hljs-keyword">const</span> [isItalicActive, setIsItalicActive] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">false</span>);
  
  <span class="hljs-comment">// æ ‡è®°ç”¨æˆ·æ˜¯å¦æ­£åœ¨ä¸å·¥å…·æ äº¤äº’</span>
  <span class="hljs-keyword">const</span> isInToolbarRef = <span class="hljs-title function_">useRef</span>(<span class="hljs-literal">false</span>);
  
  <span class="hljs-comment">// å·¥å…·æ  DOM å…ƒç´ çš„å¼•ç”¨</span>
  <span class="hljs-keyword">const</span> toolbarRef = <span class="hljs-title function_">useRef</span>(<span class="hljs-literal">null</span>);

  <span class="hljs-comment">// è·å–åŠ ç²—çŠ¶æ€</span>
  <span class="hljs-keyword">const</span> getBoldState = <span class="hljs-title function_">useCallback</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">document</span>.<span class="hljs-property">queryCommandState</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">queryCommandState</span>(<span class="hljs-string">"bold"</span>);
  }, []);

  <span class="hljs-comment">// è·å–æ–œä½“çŠ¶æ€</span>
  <span class="hljs-keyword">const</span> getItalicState = <span class="hljs-title function_">useCallback</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">document</span>.<span class="hljs-property">queryCommandState</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">queryCommandState</span>(<span class="hljs-string">"italic"</span>);
  }, []);

  <span class="hljs-comment">// æ›´æ–°æ‰€æœ‰æ ¼å¼åŒ–çŠ¶æ€</span>
  <span class="hljs-keyword">const</span> updateFormattingStates = <span class="hljs-title function_">useCallback</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-title function_">setIsBoldActive</span>(<span class="hljs-title function_">getBoldState</span>());
    <span class="hljs-title function_">setIsItalicActive</span>(<span class="hljs-title function_">getItalicState</span>());
  }, [getBoldState, getItalicState]);

  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-comment">/**
     * å¤„ç†æ–‡æœ¬é€‰æ‹©å˜åŒ–äº‹ä»¶
     */</span>
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleSelectionChange</span> = (<span class="hljs-params"/>) =&gt; {
      <span class="hljs-comment">// å¦‚æœç”¨æˆ·æ­£åœ¨ä¸å·¥å…·æ äº¤äº’ï¼Œä¸å¤„ç†é€‰æ‹©å˜åŒ–</span>
      <span class="hljs-keyword">if</span> (isInToolbarRef.<span class="hljs-property">current</span>) <span class="hljs-keyword">return</span>;

      <span class="hljs-keyword">const</span> selection = <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">getSelection</span>();
      <span class="hljs-keyword">const</span> selectedText = selection.<span class="hljs-title function_">toString</span>().<span class="hljs-title function_">trim</span>();

      <span class="hljs-comment">// ç¡®ä¿æœ‰é€‰ä¸­æ–‡æœ¬å¹¶ä¸”é€‰æ‹©èŒƒå›´æœ‰æ•ˆ</span>
      <span class="hljs-keyword">if</span> (selectedText &amp;&amp; selection.<span class="hljs-property">rangeCount</span> &gt; <span class="hljs-number">0</span>) {
        <span class="hljs-keyword">const</span> range = selection.<span class="hljs-title function_">getRangeAt</span>(<span class="hljs-number">0</span>);
        <span class="hljs-keyword">const</span> rect = range.<span class="hljs-title function_">getBoundingClientRect</span>();

        <span class="hljs-keyword">const</span> anchorNode = selection.<span class="hljs-property">anchorNode</span>;
        <span class="hljs-keyword">const</span> targetElement = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(target);
        
        <span class="hljs-comment">// æ£€æŸ¥é€‰æ‹©æ˜¯å¦å‘ç”Ÿåœ¨ç›®æ ‡ç¼–è¾‘å™¨å†…</span>
        <span class="hljs-keyword">const</span> isInTarget =
          targetElement &amp;&amp;
          (targetElement.<span class="hljs-title function_">contains</span>(anchorNode) || targetElement === anchorNode);

        <span class="hljs-keyword">if</span> (isInTarget) {
          <span class="hljs-comment">// ä¿å­˜é€‰æ‹©èŒƒå›´</span>
          <span class="hljs-comment">// æ›´æ–°é€‰æ‹©ä¿¡æ¯ï¼Œæ˜¾ç¤ºå·¥å…·æ </span>
          <span class="hljs-title function_">setSelection</span>({
            <span class="hljs-attr">clientRect</span>: rect,
            <span class="hljs-attr">selectedText</span>: selectedText,
            <span class="hljs-attr">range</span>: range,
          });

          <span class="hljs-comment">// è·å–å½“å‰æ ¼å¼åŒ–çŠ¶æ€</span>
          <span class="hljs-title function_">updateFormattingStates</span>();
        } <span class="hljs-keyword">else</span> {
          <span class="hljs-comment">// é€‰æ‹©ä¸åœ¨ç¼–è¾‘å™¨å†…ï¼Œéšè—å·¥å…·æ </span>
          <span class="hljs-title function_">setSelection</span>(<span class="hljs-literal">null</span>);
        }
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-comment">// æ²¡æœ‰é€‰ä¸­æ–‡æœ¬ï¼Œéšè—å·¥å…·æ </span>
        <span class="hljs-title function_">setSelection</span>(<span class="hljs-literal">null</span>);
      }
    };

    <span class="hljs-comment">/**
     * å¤„ç†é¼ æ ‡æŒ‰ä¸‹äº‹ä»¶
     */</span>
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleMouseDown</span> = (<span class="hljs-params">e</span>) =&gt; {
      <span class="hljs-comment">// æ£€æŸ¥ç‚¹å‡»æ˜¯å¦å‘ç”Ÿåœ¨å·¥å…·æ åŒºåŸŸå†…</span>
      <span class="hljs-keyword">if</span> (toolbarRef.<span class="hljs-property">current</span> &amp;&amp; toolbarRef.<span class="hljs-property">current</span>.<span class="hljs-title function_">contains</span>(e.<span class="hljs-property">target</span>)) {
        isInToolbarRef.<span class="hljs-property">current</span> = <span class="hljs-literal">true</span>;
      } <span class="hljs-keyword">else</span> {
        isInToolbarRef.<span class="hljs-property">current</span> = <span class="hljs-literal">false</span>;
      }
    };

    <span class="hljs-comment">/**
     * å¤„ç†é¼ æ ‡æŠ¬èµ·äº‹ä»¶
     */</span>
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleMouseUp</span> = (<span class="hljs-params"/>) =&gt; {
      <span class="hljs-comment">// å»¶è¿Ÿæ‰§è¡Œï¼Œç¡®ä¿æµè§ˆå™¨å·²å®Œæˆé€‰æ‹©æ“ä½œ</span>
      <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
        <span class="hljs-keyword">if</span> (!isInToolbarRef.<span class="hljs-property">current</span>) {
          <span class="hljs-title function_">handleSelectionChange</span>();
        }
      }, <span class="hljs-number">100</span>);
    };

    <span class="hljs-comment">/**
     * å¤„ç†ç‚¹å‡»å¤–éƒ¨äº‹ä»¶
     */</span>
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleClickOutside</span> = (<span class="hljs-params">e</span>) =&gt; {
      <span class="hljs-keyword">if</span> (toolbarRef.<span class="hljs-property">current</span> &amp;&amp; !toolbarRef.<span class="hljs-property">current</span>.<span class="hljs-title function_">contains</span>(e.<span class="hljs-property">target</span>)) {
        <span class="hljs-keyword">const</span> targetElement = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(target);
        <span class="hljs-keyword">if</span> (targetElement &amp;&amp; !targetElement.<span class="hljs-title function_">contains</span>(e.<span class="hljs-property">target</span>)) {
          <span class="hljs-title function_">setSelection</span>(<span class="hljs-literal">null</span>);
        }
      }
    };

    <span class="hljs-comment">// æ·»åŠ äº‹ä»¶ç›‘å¬å™¨</span>
    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"selectionchange"</span>, handleSelectionChange);
    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"mousedown"</span>, handleMouseDown);
    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"mouseup"</span>, handleMouseUp);
    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"mousedown"</span>, handleClickOutside);

    <span class="hljs-comment">// æ¸…ç†å‡½æ•°ï¼šç»„ä»¶å¸è½½æ—¶ç§»é™¤äº‹ä»¶ç›‘å¬å™¨</span>
    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">"selectionchange"</span>, handleSelectionChange);
      <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">"mousedown"</span>, handleMouseDown);
      <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">"mouseup"</span>, handleMouseUp);
      <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">"mousedown"</span>, handleClickOutside);
    };
  }, [target, getBoldState]);

  <span class="hljs-comment">// å¤„ç†åŠ ç²—æ“ä½œ</span>
  <span class="hljs-keyword">const</span> handleBoldClick = <span class="hljs-title function_">useCallback</span>(<span class="hljs-function">(<span class="hljs-params">range</span>) =&gt;</span> {
    <span class="hljs-keyword">if</span> (!range) <span class="hljs-keyword">return</span>;

    <span class="hljs-comment">// æ‰§è¡ŒåŠ ç²—å‘½ä»¤</span>
    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">execCommand</span>(<span class="hljs-string">"bold"</span>, <span class="hljs-literal">false</span>, <span class="hljs-literal">null</span>);

    <span class="hljs-title function_">updateFormattingStates</span>();
  }, [updateFormattingStates]);

  <span class="hljs-comment">// å¤„ç†æ–œä½“æ“ä½œ</span>
  <span class="hljs-keyword">const</span> handleItalicClick = <span class="hljs-title function_">useCallback</span>(<span class="hljs-function">(<span class="hljs-params">range</span>) =&gt;</span> {
    <span class="hljs-keyword">if</span> (!range) <span class="hljs-keyword">return</span>;

    <span class="hljs-comment">// æ‰§è¡Œæ–œä½“å‘½ä»¤</span>
    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">execCommand</span>(<span class="hljs-string">"italic"</span>, <span class="hljs-literal">false</span>, <span class="hljs-literal">null</span>);

    <span class="hljs-comment">// æ¢å¤é€‰æ‹©èŒƒå›´å¹¶æ›´æ–°çŠ¶æ€</span>
    <span class="hljs-title function_">updateFormattingStates</span>();
  }, [updateFormattingStates]);

  <span class="hljs-keyword">return</span> {
    selection,
    toolbarRef,
    isBoldActive,
    handleBoldClick,
  };
};
</code></pre>
<h2 data-id="heading-19">å®ç°ä¸‹åˆ’çº¿</h2>
<h3 data-id="heading-20">ä¿®æ”¹ä¸»ç»„ä»¶</h3>
<p>ä»è‡ªå®šä¹‰ Hook ä¸­è·å– <code>isUnderlineActive</code> å’Œ <code>handleUnderlineClick</code>ï¼Œå¹¶ä¼ ç»™æµ®åŠ¨å·¥å…·æ ç»„ä»¶ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> <span class="hljs-title function_">TextCustom</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-comment">// ä½¿ç”¨è‡ªå®šä¹‰ Hook è·å–æ–‡æœ¬é€‰æ‹©ä¿¡æ¯</span>
  <span class="hljs-keyword">const</span> { 
    selection, 
    toolbarRef, 
    isBoldActive, 
    isItalicActive,
    isUnderlineActive,
    handleBoldClick,
    handleItalicClick,
    handleUnderlineClick,
  } = <span class="hljs-title function_">useTextSelection</span>(<span class="hljs-string">"#editor"</span>);

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      {/* å¯ç¼–è¾‘çš„æ–‡æœ¬åŒºåŸŸ */}
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span>
        <span class="hljs-attr">id</span>=<span class="hljs-string">"editor"</span>
        <span class="hljs-attr">contentEditable</span>=<span class="hljs-string">{true}</span>
        <span class="hljs-attr">suppressContentEditableWarning</span>=<span class="hljs-string">{true}</span>
      /&gt;</span>

      {/* æµ®åŠ¨å·¥å…·æ ç»„ä»¶ */}
      <span class="hljs-tag">&lt;<span class="hljs-name">FloatingToolbar</span>
        <span class="hljs-attr">selection</span>=<span class="hljs-string">{selection}</span>
        <span class="hljs-attr">toolbarRef</span>=<span class="hljs-string">{toolbarRef}</span>
        <span class="hljs-attr">onBoldClick</span>=<span class="hljs-string">{handleBoldClick}</span>
        <span class="hljs-attr">onItalicClick</span>=<span class="hljs-string">{handleItalicClick}</span>
        <span class="hljs-attr">onUnderlineClick</span>=<span class="hljs-string">{handleUnderlineClick}</span>
        <span class="hljs-attr">isBoldActive</span>=<span class="hljs-string">{isBoldActive}</span>
        <span class="hljs-attr">isItalicActive</span>=<span class="hljs-string">{isItalicActive}</span>
        <span class="hljs-attr">isUnderlineActive</span>=<span class="hljs-string">{isUnderlineActive}</span>
      /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
};
</code></pre>
<h3 data-id="heading-21">ä¿®æ”¹æµ®åŠ¨å·¥å…·æ </h3>
<p>å¢åŠ ä¸‹åˆ’çº¿æŒ‰é’®ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> <span class="hljs-title function_">FloatingToolbar</span> = (<span class="hljs-params">{
  selection,
  toolbarRef,
  onBoldClick,
  onItalicClick,
  onUnderlineClick,
  isBoldActive = <span class="hljs-literal">false</span>,
  isItalicActive = <span class="hljs-literal">false</span>,
  isUnderlineActive = <span class="hljs-literal">false</span>,
}</span>) =&gt; {
  <span class="hljs-comment">// å¦‚æœæ²¡æœ‰é€‰æ‹©ä¿¡æ¯ï¼Œä¸æ¸²æŸ“å·¥å…·æ </span>
  <span class="hljs-keyword">if</span> (!selection) <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;

  <span class="hljs-keyword">const</span> { clientRect, selectedText, range } = selection;
  
  <span class="hljs-comment">// å¦‚æœæ²¡æœ‰é€‰ä¸­æ–‡æœ¬æˆ–ä½ç½®ä¿¡æ¯ï¼Œä¸æ¸²æŸ“å·¥å…·æ </span>
  <span class="hljs-keyword">if</span> (!selectedText || !clientRect || !range) <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>
      <span class="hljs-attr">ref</span>=<span class="hljs-string">{toolbarRef}</span>
      <span class="hljs-attr">className</span>=<span class="hljs-string">"floating-toolbar"</span>
      <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span>
        <span class="hljs-attr">position:</span> "<span class="hljs-attr">fixed</span>",
        <span class="hljs-attr">top:</span> <span class="hljs-attr">clientRect.top</span> <span class="hljs-attr">-</span> <span class="hljs-attr">65</span>,
        <span class="hljs-attr">left:</span> <span class="hljs-attr">clientRect.left</span> + <span class="hljs-attr">clientRect.width</span> / <span class="hljs-attr">2</span>,
        <span class="hljs-attr">transform:</span> "<span class="hljs-attr">translateX</span>(<span class="hljs-attr">-10</span>%)",
        <span class="hljs-attr">background:</span> "#<span class="hljs-attr">fff</span>",
        <span class="hljs-attr">zIndex:</span> <span class="hljs-attr">10000</span>,
        <span class="hljs-attr">minWidth:</span> "<span class="hljs-attr">180px</span>",
      }}
    &gt;</span>
      {/* æ˜¾ç¤ºé€‰ä¸­æ–‡æœ¬çš„å­—ç¬¦æ•°é‡ */}
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">fontSize:</span> "<span class="hljs-attr">12px</span>", <span class="hljs-attr">fontWeight:</span> "<span class="hljs-attr">bold</span>" }}&gt;</span>
        ğŸ“ {selectedText.length} å­—
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

      {/* åŠ ç²—æŒ‰é’® */}
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span>
        <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> onBoldClick &amp;&amp; onBoldClick(range)}
        title="åŠ ç²—"
        style={{
          background: isBoldActive ? "#3498db" : "#999",
          border: "none",
          color: "white",
          width: "36px",
          height: "36px",
          borderRadius: "6px",
          cursor: "pointer",
          display: "flex",
          alignItems: "center",
          justifyContent: "center",
          fontSize: "14px",
        }}
      &gt;
        <span class="hljs-tag">&lt;<span class="hljs-name">strong</span>&gt;</span>B<span class="hljs-tag">&lt;/<span class="hljs-name">strong</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>

      {/* æ–œä½“æŒ‰é’® */}
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span>
        <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> onItalicClick &amp;&amp; onItalicClick(range)}
        title="æ–œä½“"
        style={{
          background: isItalicActive ? "#3498db" : "#999",
          border: "none",
          color: "white",
          width: "36px",
          height: "36px",
          borderRadius: "6px",
          cursor: "pointer",
          display: "flex",
          alignItems: "center",
          justifyContent: "center",
          fontSize: "14px",
          fontStyle: "italic",
        }}
      &gt;
        I
      <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>

      {/* ä¸‹åˆ’çº¿æŒ‰é’® */}
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span>
        <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> onUnderlineClick &amp;&amp; onUnderlineClick(range)}
        title="ä¸‹åˆ’çº¿"
        style={{
          background: isUnderlineActive ? "#3498db" : "#999",
          border: "none",
          color: "white",
          width: "36px",
          height: "36px",
          borderRadius: "6px",
          cursor: "pointer",
          display: "flex",
          alignItems: "center",
          justifyContent: "center",
          fontSize: "14px",
          textDecoration: "underline",
        }}
      &gt;
        U
      <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
};
</code></pre>
<h3 data-id="heading-22">ä¿®æ”¹è‡ªå®šä¹‰ Hook</h3>
<p>ä¸»è¦æœ‰ä¸¤å¤„æ”¹åŠ¨ï¼š</p>
<ol>
<li>å¢åŠ è·å–ä¸‹åˆ’çº¿çŠ¶æ€</li>
<li>å¢åŠ å¤„ç†ä¸‹åˆ’çº¿æ“ä½œ</li>
</ol>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> <span class="hljs-title function_">useTextSelection</span> = (<span class="hljs-params">target</span>) =&gt; {
  <span class="hljs-keyword">const</span> [selection, setSelection] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">null</span>);
  <span class="hljs-keyword">const</span> [isBoldActive, setIsBoldActive] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">false</span>);
  <span class="hljs-keyword">const</span> [isItalicActive, setIsItalicActive] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">false</span>);
  <span class="hljs-keyword">const</span> [isUnderlineActive, setIsUnderlineActive] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">false</span>);
  
  <span class="hljs-comment">// æ ‡è®°ç”¨æˆ·æ˜¯å¦æ­£åœ¨ä¸å·¥å…·æ äº¤äº’</span>
  <span class="hljs-keyword">const</span> isInToolbarRef = <span class="hljs-title function_">useRef</span>(<span class="hljs-literal">false</span>);
  
  <span class="hljs-comment">// å·¥å…·æ  DOM å…ƒç´ çš„å¼•ç”¨</span>
  <span class="hljs-keyword">const</span> toolbarRef = <span class="hljs-title function_">useRef</span>(<span class="hljs-literal">null</span>);

  <span class="hljs-comment">// è·å–åŠ ç²—çŠ¶æ€</span>
  <span class="hljs-keyword">const</span> getBoldState = <span class="hljs-title function_">useCallback</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">document</span>.<span class="hljs-property">queryCommandState</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">queryCommandState</span>(<span class="hljs-string">"bold"</span>);
  }, []);

  <span class="hljs-comment">// è·å–æ–œä½“çŠ¶æ€</span>
  <span class="hljs-keyword">const</span> getItalicState = <span class="hljs-title function_">useCallback</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">document</span>.<span class="hljs-property">queryCommandState</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">queryCommandState</span>(<span class="hljs-string">"italic"</span>);
  }, []);

  <span class="hljs-comment">// è·å–ä¸‹åˆ’çº¿çŠ¶æ€</span>
  <span class="hljs-keyword">const</span> getUnderlineState = <span class="hljs-title function_">useCallback</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">document</span>.<span class="hljs-property">queryCommandState</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">queryCommandState</span>(<span class="hljs-string">"underline"</span>);
  }, []);

  <span class="hljs-comment">// æ›´æ–°æ‰€æœ‰æ ¼å¼åŒ–çŠ¶æ€</span>
  <span class="hljs-keyword">const</span> updateFormattingStates = <span class="hljs-title function_">useCallback</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-title function_">setIsBoldActive</span>(<span class="hljs-title function_">getBoldState</span>());
    <span class="hljs-title function_">setIsItalicActive</span>(<span class="hljs-title function_">getItalicState</span>());
    <span class="hljs-title function_">setIsUnderlineActive</span>(<span class="hljs-title function_">getUnderlineState</span>());
  }, [getBoldState, getItalicState, getUnderlineState]);

  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-comment">/**
     * å¤„ç†æ–‡æœ¬é€‰æ‹©å˜åŒ–äº‹ä»¶
     */</span>
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleSelectionChange</span> = (<span class="hljs-params"/>) =&gt; {
      <span class="hljs-comment">// å¦‚æœç”¨æˆ·æ­£åœ¨ä¸å·¥å…·æ äº¤äº’ï¼Œä¸å¤„ç†é€‰æ‹©å˜åŒ–</span>
      <span class="hljs-keyword">if</span> (isInToolbarRef.<span class="hljs-property">current</span>) <span class="hljs-keyword">return</span>;

      <span class="hljs-keyword">const</span> selection = <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">getSelection</span>();
      <span class="hljs-keyword">const</span> selectedText = selection.<span class="hljs-title function_">toString</span>().<span class="hljs-title function_">trim</span>();

      <span class="hljs-comment">// ç¡®ä¿æœ‰é€‰ä¸­æ–‡æœ¬å¹¶ä¸”é€‰æ‹©èŒƒå›´æœ‰æ•ˆ</span>
      <span class="hljs-keyword">if</span> (selectedText &amp;&amp; selection.<span class="hljs-property">rangeCount</span> &gt; <span class="hljs-number">0</span>) {
        <span class="hljs-keyword">const</span> range = selection.<span class="hljs-title function_">getRangeAt</span>(<span class="hljs-number">0</span>);
        <span class="hljs-keyword">const</span> rect = range.<span class="hljs-title function_">getBoundingClientRect</span>();

        <span class="hljs-keyword">const</span> anchorNode = selection.<span class="hljs-property">anchorNode</span>;
        <span class="hljs-keyword">const</span> targetElement = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(target);
        
        <span class="hljs-comment">// æ£€æŸ¥é€‰æ‹©æ˜¯å¦å‘ç”Ÿåœ¨ç›®æ ‡ç¼–è¾‘å™¨å†…</span>
        <span class="hljs-keyword">const</span> isInTarget =
          targetElement &amp;&amp;
          (targetElement.<span class="hljs-title function_">contains</span>(anchorNode) || targetElement === anchorNode);

        <span class="hljs-keyword">if</span> (isInTarget) {
          <span class="hljs-comment">// ä¿å­˜é€‰æ‹©èŒƒå›´</span>
          <span class="hljs-comment">// æ›´æ–°é€‰æ‹©ä¿¡æ¯ï¼Œæ˜¾ç¤ºå·¥å…·æ </span>
          <span class="hljs-title function_">setSelection</span>({
            <span class="hljs-attr">clientRect</span>: rect,
            <span class="hljs-attr">selectedText</span>: selectedText,
            <span class="hljs-attr">range</span>: range,
          });

          <span class="hljs-comment">// è·å–å½“å‰æ ¼å¼åŒ–çŠ¶æ€</span>
          <span class="hljs-title function_">updateFormattingStates</span>();
        } <span class="hljs-keyword">else</span> {
          <span class="hljs-comment">// é€‰æ‹©ä¸åœ¨ç¼–è¾‘å™¨å†…ï¼Œéšè—å·¥å…·æ </span>
          <span class="hljs-title function_">setSelection</span>(<span class="hljs-literal">null</span>);
        }
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-comment">// æ²¡æœ‰é€‰ä¸­æ–‡æœ¬ï¼Œéšè—å·¥å…·æ </span>
        <span class="hljs-title function_">setSelection</span>(<span class="hljs-literal">null</span>);
      }
    };

    <span class="hljs-comment">/**
     * å¤„ç†é¼ æ ‡æŒ‰ä¸‹äº‹ä»¶
     */</span>
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleMouseDown</span> = (<span class="hljs-params">e</span>) =&gt; {
      <span class="hljs-comment">// æ£€æŸ¥ç‚¹å‡»æ˜¯å¦å‘ç”Ÿåœ¨å·¥å…·æ åŒºåŸŸå†…</span>
      <span class="hljs-keyword">if</span> (toolbarRef.<span class="hljs-property">current</span> &amp;&amp; toolbarRef.<span class="hljs-property">current</span>.<span class="hljs-title function_">contains</span>(e.<span class="hljs-property">target</span>)) {
        isInToolbarRef.<span class="hljs-property">current</span> = <span class="hljs-literal">true</span>;
      } <span class="hljs-keyword">else</span> {
        isInToolbarRef.<span class="hljs-property">current</span> = <span class="hljs-literal">false</span>;
      }
    };

    <span class="hljs-comment">/**
     * å¤„ç†é¼ æ ‡æŠ¬èµ·äº‹ä»¶
     */</span>
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleMouseUp</span> = (<span class="hljs-params"/>) =&gt; {
      <span class="hljs-comment">// å»¶è¿Ÿæ‰§è¡Œï¼Œç¡®ä¿æµè§ˆå™¨å·²å®Œæˆé€‰æ‹©æ“ä½œ</span>
      <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
        <span class="hljs-keyword">if</span> (!isInToolbarRef.<span class="hljs-property">current</span>) {
          <span class="hljs-title function_">handleSelectionChange</span>();
        }
      }, <span class="hljs-number">100</span>);
    };

    <span class="hljs-comment">/**
     * å¤„ç†ç‚¹å‡»å¤–éƒ¨äº‹ä»¶
     */</span>
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleClickOutside</span> = (<span class="hljs-params">e</span>) =&gt; {
      <span class="hljs-keyword">if</span> (toolbarRef.<span class="hljs-property">current</span> &amp;&amp; !toolbarRef.<span class="hljs-property">current</span>.<span class="hljs-title function_">contains</span>(e.<span class="hljs-property">target</span>)) {
        <span class="hljs-keyword">const</span> targetElement = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(target);
        <span class="hljs-keyword">if</span> (targetElement &amp;&amp; !targetElement.<span class="hljs-title function_">contains</span>(e.<span class="hljs-property">target</span>)) {
          <span class="hljs-title function_">setSelection</span>(<span class="hljs-literal">null</span>);
        }
      }
    };

    <span class="hljs-comment">// æ·»åŠ äº‹ä»¶ç›‘å¬å™¨</span>
    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"selectionchange"</span>, handleSelectionChange);
    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"mousedown"</span>, handleMouseDown);
    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"mouseup"</span>, handleMouseUp);
    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"mousedown"</span>, handleClickOutside);

    <span class="hljs-comment">// æ¸…ç†å‡½æ•°ï¼šç»„ä»¶å¸è½½æ—¶ç§»é™¤äº‹ä»¶ç›‘å¬å™¨</span>
    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">"selectionchange"</span>, handleSelectionChange);
      <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">"mousedown"</span>, handleMouseDown);
      <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">"mouseup"</span>, handleMouseUp);
      <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">"mousedown"</span>, handleClickOutside);
    };
  }, [target, getBoldState]);

  <span class="hljs-comment">// å¤„ç†åŠ ç²—æ“ä½œ</span>
  <span class="hljs-keyword">const</span> handleBoldClick = <span class="hljs-title function_">useCallback</span>(<span class="hljs-function">(<span class="hljs-params">range</span>) =&gt;</span> {
    <span class="hljs-keyword">if</span> (!range) <span class="hljs-keyword">return</span>;

    <span class="hljs-comment">// æ‰§è¡ŒåŠ ç²—å‘½ä»¤</span>
    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">execCommand</span>(<span class="hljs-string">"bold"</span>, <span class="hljs-literal">false</span>, <span class="hljs-literal">null</span>);

    <span class="hljs-title function_">updateFormattingStates</span>();
  }, [updateFormattingStates]);

  <span class="hljs-comment">// å¤„ç†æ–œä½“æ“ä½œ</span>
  <span class="hljs-keyword">const</span> handleItalicClick = <span class="hljs-title function_">useCallback</span>(<span class="hljs-function">(<span class="hljs-params">range</span>) =&gt;</span> {
    <span class="hljs-keyword">if</span> (!range) <span class="hljs-keyword">return</span>;

    <span class="hljs-comment">// æ‰§è¡Œæ–œä½“å‘½ä»¤</span>
    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">execCommand</span>(<span class="hljs-string">"italic"</span>, <span class="hljs-literal">false</span>, <span class="hljs-literal">null</span>);

    <span class="hljs-comment">// æ¢å¤é€‰æ‹©èŒƒå›´å¹¶æ›´æ–°çŠ¶æ€</span>
    <span class="hljs-title function_">updateFormattingStates</span>();
  }, [updateFormattingStates]);

  <span class="hljs-comment">// å¤„ç†ä¸‹åˆ’çº¿æ“ä½œ</span>
  <span class="hljs-keyword">const</span> handleUnderlineClick = <span class="hljs-title function_">useCallback</span>(<span class="hljs-function">(<span class="hljs-params">range</span>) =&gt;</span> {
    <span class="hljs-keyword">if</span> (!range) <span class="hljs-keyword">return</span>;

    <span class="hljs-comment">// æ‰§è¡Œä¸‹åˆ’çº¿å‘½ä»¤</span>
    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">execCommand</span>(<span class="hljs-string">"underline"</span>, <span class="hljs-literal">false</span>, <span class="hljs-literal">null</span>);

    <span class="hljs-comment">// æ›´æ–°çŠ¶æ€</span>
    <span class="hljs-title function_">updateFormattingStates</span>();
  }, [updateFormattingStates]);

  <span class="hljs-keyword">return</span> {
    selection,
    toolbarRef,
    isBoldActive,
    handleBoldClick,
  };
};
</code></pre>
<h2 data-id="heading-23">å®ç°å­—å·</h2>
<h3 data-id="heading-24">ä¿®æ”¹ä¸»ç»„ä»¶</h3>
<p>ä»è‡ªå®šä¹‰ Hook ä¸­è·å– <code>fontSize</code> å’Œ <code>handleFontSizeChange</code>ï¼Œå¹¶ä¼ ç»™æµ®åŠ¨å·¥å…·æ ç»„ä»¶ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> <span class="hljs-title function_">TextCustom</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-comment">// ä½¿ç”¨è‡ªå®šä¹‰ Hook è·å–æ–‡æœ¬é€‰æ‹©ä¿¡æ¯</span>
  <span class="hljs-keyword">const</span> { 
    selection, 
    toolbarRef, 
    isBoldActive, 
    isItalicActive,
    isUnderlineActive,
    fontSize,
    handleBoldClick,
    handleItalicClick,
    handleUnderlineClick,
    handleFontSizeChange,
  } = <span class="hljs-title function_">useTextSelection</span>(<span class="hljs-string">"#editor"</span>);

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      {/* å¯ç¼–è¾‘çš„æ–‡æœ¬åŒºåŸŸ */}
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span>
        <span class="hljs-attr">id</span>=<span class="hljs-string">"editor"</span>
        <span class="hljs-attr">contentEditable</span>=<span class="hljs-string">{true}</span>
        <span class="hljs-attr">suppressContentEditableWarning</span>=<span class="hljs-string">{true}</span>
      /&gt;</span>

      {/* æµ®åŠ¨å·¥å…·æ ç»„ä»¶ */}
      <span class="hljs-tag">&lt;<span class="hljs-name">FloatingToolbar</span>
        <span class="hljs-attr">selection</span>=<span class="hljs-string">{selection}</span>
        <span class="hljs-attr">toolbarRef</span>=<span class="hljs-string">{toolbarRef}</span>
        <span class="hljs-attr">onBoldClick</span>=<span class="hljs-string">{handleBoldClick}</span>
        <span class="hljs-attr">onItalicClick</span>=<span class="hljs-string">{handleItalicClick}</span>
        <span class="hljs-attr">onUnderlineClick</span>=<span class="hljs-string">{handleUnderlineClick}</span>
        <span class="hljs-attr">onFontSizeChange</span>=<span class="hljs-string">{handleFontSizeChange}</span>
        <span class="hljs-attr">isBoldActive</span>=<span class="hljs-string">{isBoldActive}</span>
        <span class="hljs-attr">isItalicActive</span>=<span class="hljs-string">{isItalicActive}</span>
        <span class="hljs-attr">isUnderlineActive</span>=<span class="hljs-string">{isUnderlineActive}</span>
        <span class="hljs-attr">fontSize</span>=<span class="hljs-string">{fontSize}</span>
      /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
};
</code></pre>
<h3 data-id="heading-25">ä¿®æ”¹æµ®åŠ¨å·¥å…·æ </h3>
<p>ä¸»è¦å¢åŠ å­—å·é€‰æ‹©å™¨ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> <span class="hljs-title function_">FloatingToolbar</span> = (<span class="hljs-params">{
  selection,
  toolbarRef,
  onBoldClick,
  onItalicClick,
  onUnderlineClick,
  onFontSizeChange,
  isBoldActive = <span class="hljs-literal">false</span>,
  isItalicActive = <span class="hljs-literal">false</span>,
  isUnderlineActive = <span class="hljs-literal">false</span>,
  fontSize = <span class="hljs-string">"3"</span>,
}</span>) =&gt; {
  <span class="hljs-comment">// å¦‚æœæ²¡æœ‰é€‰æ‹©ä¿¡æ¯ï¼Œä¸æ¸²æŸ“å·¥å…·æ </span>
  <span class="hljs-keyword">if</span> (!selection) <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;

  <span class="hljs-keyword">const</span> { clientRect, selectedText, range } = selection;
  
  <span class="hljs-comment">// å¦‚æœæ²¡æœ‰é€‰ä¸­æ–‡æœ¬æˆ–ä½ç½®ä¿¡æ¯ï¼Œä¸æ¸²æŸ“å·¥å…·æ </span>
  <span class="hljs-keyword">if</span> (!selectedText || !clientRect || !range) <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>
      <span class="hljs-attr">ref</span>=<span class="hljs-string">{toolbarRef}</span>
      <span class="hljs-attr">className</span>=<span class="hljs-string">"floating-toolbar"</span>
      <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span>
        <span class="hljs-attr">position:</span> "<span class="hljs-attr">fixed</span>",
        <span class="hljs-attr">top:</span> <span class="hljs-attr">clientRect.top</span> <span class="hljs-attr">-</span> <span class="hljs-attr">65</span>,
        <span class="hljs-attr">left:</span> <span class="hljs-attr">clientRect.left</span> + <span class="hljs-attr">clientRect.width</span> / <span class="hljs-attr">2</span>,
        <span class="hljs-attr">transform:</span> "<span class="hljs-attr">translateX</span>(<span class="hljs-attr">-10</span>%)",
        <span class="hljs-attr">background:</span> "#<span class="hljs-attr">fff</span>",
        <span class="hljs-attr">zIndex:</span> <span class="hljs-attr">10000</span>,
        <span class="hljs-attr">minWidth:</span> "<span class="hljs-attr">180px</span>",
      }}
    &gt;</span>
      {/* æ˜¾ç¤ºé€‰ä¸­æ–‡æœ¬çš„å­—ç¬¦æ•°é‡ */}
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">fontSize:</span> "<span class="hljs-attr">12px</span>", <span class="hljs-attr">fontWeight:</span> "<span class="hljs-attr">bold</span>" }}&gt;</span>
        ğŸ“ {selectedText.length} å­—
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

      {/* åŠ ç²—æŒ‰é’® */}
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span>
        <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> onBoldClick &amp;&amp; onBoldClick(range)}
        title="åŠ ç²—"
        style={{
          background: isBoldActive ? "#3498db" : "#999",
          border: "none",
          color: "white",
          width: "36px",
          height: "36px",
          borderRadius: "6px",
          cursor: "pointer",
          display: "flex",
          alignItems: "center",
          justifyContent: "center",
          fontSize: "14px",
        }}
      &gt;
        <span class="hljs-tag">&lt;<span class="hljs-name">strong</span>&gt;</span>B<span class="hljs-tag">&lt;/<span class="hljs-name">strong</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>

      {/* æ–œä½“æŒ‰é’® */}
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span>
        <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> onItalicClick &amp;&amp; onItalicClick(range)}
        title="æ–œä½“"
        style={{
          background: isItalicActive ? "#3498db" : "#999",
          border: "none",
          color: "white",
          width: "36px",
          height: "36px",
          borderRadius: "6px",
          cursor: "pointer",
          display: "flex",
          alignItems: "center",
          justifyContent: "center",
          fontSize: "14px",
          fontStyle: "italic",
        }}
      &gt;
        I
      <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>

      {/* ä¸‹åˆ’çº¿æŒ‰é’® */}
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span>
        <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> onUnderlineClick &amp;&amp; onUnderlineClick(range)}
        title="ä¸‹åˆ’çº¿"
        style={{
          background: isUnderlineActive ? "#3498db" : "#999",
          border: "none",
          color: "white",
          width: "36px",
          height: "36px",
          borderRadius: "6px",
          cursor: "pointer",
          display: "flex",
          alignItems: "center",
          justifyContent: "center",
          fontSize: "14px",
          textDecoration: "underline",
        }}
      &gt;
        U
      <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>

      {/* å­—å·é€‰æ‹©å™¨ */}
      <span class="hljs-tag">&lt;<span class="hljs-name">select</span>
        <span class="hljs-attr">value</span>=<span class="hljs-string">{fontSize}</span>
        <span class="hljs-attr">onChange</span>=<span class="hljs-string">{(e)</span> =&gt;</span> onFontSizeChange &amp;&amp; onFontSizeChange(e.target.value, range)}
        onMouseDown={(e) =&gt; e.stopPropagation()}
        onClick={(e) =&gt; e.stopPropagation()}
        style={{
          background: "#999",
          color: "white",
          border: "1px solid #999",
          borderRadius: "4px",
          padding: "6px 10px",
          cursor: "pointer",
          fontSize: "12px",
          width: "90px",
          appearance: "auto",
        }}
      &gt;
        <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"1"</span>&gt;</span>12px<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"2"</span>&gt;</span>14px<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"3"</span>&gt;</span>16px<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"4"</span>&gt;</span>18px<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"5"</span>&gt;</span>24px<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"6"</span>&gt;</span>32px<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"7"</span>&gt;</span>48px<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span>

      {/* é¢œè‰²é€‰æ‹©å™¨ */}
      <span class="hljs-tag">&lt;<span class="hljs-name">input</span>
        <span class="hljs-attr">type</span>=<span class="hljs-string">"color"</span>
        <span class="hljs-attr">value</span>=<span class="hljs-string">{color}</span>
        <span class="hljs-attr">onChange</span>=<span class="hljs-string">{(e)</span> =&gt;</span> onColorChange &amp;&amp; onColorChange(e.target.value, range)}
        title="æ–‡å­—é¢œè‰²"
        style={{
          width: "36px",
          height: "36px",
          border: "2px solid #4a627a",
          borderRadius: "6px",
          cursor: "pointer",
          padding: "0",
          backgroundColor: color || "#ffffff",
        }}
        onMouseDown={(e) =&gt; e.stopPropagation()}
        onClick={(e) =&gt; e.stopPropagation()}
      /&gt;
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
};
</code></pre>
<h3 data-id="heading-26">ä¿®æ”¹è‡ªå®šä¹‰ Hook</h3>
<p>å­—å·å’Œåé¢çš„é¢œè‰²éƒ½æ˜¯é€šè¿‡å¢åŠ åµŒå¥— <code>span</code> æ ‡ç­¾å®ç°çš„ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> <span class="hljs-title function_">useTextSelection</span> = (<span class="hljs-params">target</span>) =&gt; {
  <span class="hljs-keyword">const</span> [selection, setSelection] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">null</span>);
  <span class="hljs-keyword">const</span> [isBoldActive, setIsBoldActive] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">false</span>);
  <span class="hljs-keyword">const</span> [isItalicActive, setIsItalicActive] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">false</span>);
  <span class="hljs-keyword">const</span> [isUnderlineActive, setIsUnderlineActive] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">false</span>);
  <span class="hljs-keyword">const</span> [fontSize, setFontSize] = <span class="hljs-title function_">useState</span>(<span class="hljs-string">"3"</span>);
  
  <span class="hljs-comment">// æ ‡è®°ç”¨æˆ·æ˜¯å¦æ­£åœ¨ä¸å·¥å…·æ äº¤äº’</span>
  <span class="hljs-keyword">const</span> isInToolbarRef = <span class="hljs-title function_">useRef</span>(<span class="hljs-literal">false</span>);
  
  <span class="hljs-comment">// å·¥å…·æ  DOM å…ƒç´ çš„å¼•ç”¨</span>
  <span class="hljs-keyword">const</span> toolbarRef = <span class="hljs-title function_">useRef</span>(<span class="hljs-literal">null</span>);

  <span class="hljs-comment">// è·å–åŠ ç²—çŠ¶æ€</span>
  <span class="hljs-keyword">const</span> getBoldState = <span class="hljs-title function_">useCallback</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">document</span>.<span class="hljs-property">queryCommandState</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">queryCommandState</span>(<span class="hljs-string">"bold"</span>);
  }, []);

  <span class="hljs-comment">// è·å–æ–œä½“çŠ¶æ€</span>
  <span class="hljs-keyword">const</span> getItalicState = <span class="hljs-title function_">useCallback</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">document</span>.<span class="hljs-property">queryCommandState</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">queryCommandState</span>(<span class="hljs-string">"italic"</span>);
  }, []);

  <span class="hljs-comment">// è·å–ä¸‹åˆ’çº¿çŠ¶æ€</span>
  <span class="hljs-keyword">const</span> getUnderlineState = <span class="hljs-title function_">useCallback</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">document</span>.<span class="hljs-property">queryCommandState</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">queryCommandState</span>(<span class="hljs-string">"underline"</span>);
  }, []);

  <span class="hljs-comment">// è·å–å½“å‰é€‰æ‹©çš„å­—å·</span>
  <span class="hljs-keyword">const</span> getFontSizeState = <span class="hljs-title function_">useCallback</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> selection = <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">getSelection</span>();
    <span class="hljs-keyword">if</span> (!selection.<span class="hljs-property">rangeCount</span>) <span class="hljs-keyword">return</span> <span class="hljs-string">"3"</span>;

    <span class="hljs-keyword">const</span> range = selection.<span class="hljs-title function_">getRangeAt</span>(<span class="hljs-number">0</span>);

    <span class="hljs-keyword">let</span> element = range.<span class="hljs-property">startContainer</span>;
    <span class="hljs-keyword">if</span> (element.<span class="hljs-property">nodeType</span> !== <span class="hljs-title class_">Node</span>.<span class="hljs-property">ELEMENT_NODE</span>) {
      element = element.<span class="hljs-property">parentElement</span>;
    }

    <span class="hljs-comment">// éå†çˆ¶å…ƒç´ æŸ¥æ‰¾å­—ä½“å¤§å°</span>
    <span class="hljs-keyword">while</span> (element &amp;&amp; element !== <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(target)) {
      <span class="hljs-keyword">if</span> (element.<span class="hljs-property">nodeType</span> === <span class="hljs-title class_">Node</span>.<span class="hljs-property">ELEMENT_NODE</span>) {
        <span class="hljs-keyword">const</span> computedStyle = <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">getComputedStyle</span>(element);
        <span class="hljs-keyword">const</span> computedFontSize = computedStyle.<span class="hljs-property">fontSize</span>;

        <span class="hljs-keyword">if</span> (computedFontSize) {
          <span class="hljs-keyword">const</span> sizeInPx = <span class="hljs-built_in">parseInt</span>(computedFontSize);
          <span class="hljs-keyword">if</span> (sizeInPx &gt;= <span class="hljs-number">42</span>) <span class="hljs-keyword">return</span> <span class="hljs-string">"7"</span>;
          <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (sizeInPx &gt;= <span class="hljs-number">28</span>) <span class="hljs-keyword">return</span> <span class="hljs-string">"6"</span>;
          <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (sizeInPx &gt;= <span class="hljs-number">22</span>) <span class="hljs-keyword">return</span> <span class="hljs-string">"5"</span>;
          <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (sizeInPx &gt;= <span class="hljs-number">17</span>) <span class="hljs-keyword">return</span> <span class="hljs-string">"4"</span>;
          <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (sizeInPx &gt;= <span class="hljs-number">15</span>) <span class="hljs-keyword">return</span> <span class="hljs-string">"3"</span>;
          <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (sizeInPx &gt;= <span class="hljs-number">13</span>) <span class="hljs-keyword">return</span> <span class="hljs-string">"2"</span>;
          <span class="hljs-keyword">else</span> <span class="hljs-keyword">return</span> <span class="hljs-string">"1"</span>;
        }
      }
      element = element.<span class="hljs-property">parentElement</span>;
    }

    <span class="hljs-keyword">return</span> <span class="hljs-string">"3"</span>;
  }, [target]);

  <span class="hljs-comment">// æ›´æ–°æ‰€æœ‰æ ¼å¼åŒ–çŠ¶æ€</span>
  <span class="hljs-keyword">const</span> updateFormattingStates = <span class="hljs-title function_">useCallback</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-title function_">setIsBoldActive</span>(<span class="hljs-title function_">getBoldState</span>());
    <span class="hljs-title function_">setIsItalicActive</span>(<span class="hljs-title function_">getItalicState</span>());
    <span class="hljs-title function_">setIsUnderlineActive</span>(<span class="hljs-title function_">getUnderlineState</span>());
    <span class="hljs-title function_">setFontSize</span>(<span class="hljs-title function_">getFontSizeState</span>());
  }, [getBoldState, getItalicState, getUnderlineState, getFontSizeState]);

  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-comment">/**
     * å¤„ç†æ–‡æœ¬é€‰æ‹©å˜åŒ–äº‹ä»¶
     */</span>
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleSelectionChange</span> = (<span class="hljs-params"/>) =&gt; {
      <span class="hljs-comment">// å¦‚æœç”¨æˆ·æ­£åœ¨ä¸å·¥å…·æ äº¤äº’ï¼Œä¸å¤„ç†é€‰æ‹©å˜åŒ–</span>
      <span class="hljs-keyword">if</span> (isInToolbarRef.<span class="hljs-property">current</span>) <span class="hljs-keyword">return</span>;

      <span class="hljs-keyword">const</span> selection = <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">getSelection</span>();
      <span class="hljs-keyword">const</span> selectedText = selection.<span class="hljs-title function_">toString</span>().<span class="hljs-title function_">trim</span>();

      <span class="hljs-comment">// ç¡®ä¿æœ‰é€‰ä¸­æ–‡æœ¬å¹¶ä¸”é€‰æ‹©èŒƒå›´æœ‰æ•ˆ</span>
      <span class="hljs-keyword">if</span> (selectedText &amp;&amp; selection.<span class="hljs-property">rangeCount</span> &gt; <span class="hljs-number">0</span>) {
        <span class="hljs-keyword">const</span> range = selection.<span class="hljs-title function_">getRangeAt</span>(<span class="hljs-number">0</span>);
        <span class="hljs-keyword">const</span> rect = range.<span class="hljs-title function_">getBoundingClientRect</span>();

        <span class="hljs-keyword">const</span> anchorNode = selection.<span class="hljs-property">anchorNode</span>;
        <span class="hljs-keyword">const</span> targetElement = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(target);
        
        <span class="hljs-comment">// æ£€æŸ¥é€‰æ‹©æ˜¯å¦å‘ç”Ÿåœ¨ç›®æ ‡ç¼–è¾‘å™¨å†…</span>
        <span class="hljs-keyword">const</span> isInTarget =
          targetElement &amp;&amp;
          (targetElement.<span class="hljs-title function_">contains</span>(anchorNode) || targetElement === anchorNode);

        <span class="hljs-keyword">if</span> (isInTarget) {
          <span class="hljs-comment">// ä¿å­˜é€‰æ‹©èŒƒå›´</span>
          <span class="hljs-comment">// æ›´æ–°é€‰æ‹©ä¿¡æ¯ï¼Œæ˜¾ç¤ºå·¥å…·æ </span>
          <span class="hljs-title function_">setSelection</span>({
            <span class="hljs-attr">clientRect</span>: rect,
            <span class="hljs-attr">selectedText</span>: selectedText,
            <span class="hljs-attr">range</span>: range,
          });

          <span class="hljs-comment">// è·å–å½“å‰æ ¼å¼åŒ–çŠ¶æ€</span>
          <span class="hljs-title function_">updateFormattingStates</span>();
        } <span class="hljs-keyword">else</span> {
          <span class="hljs-comment">// é€‰æ‹©ä¸åœ¨ç¼–è¾‘å™¨å†…ï¼Œéšè—å·¥å…·æ </span>
          <span class="hljs-title function_">setSelection</span>(<span class="hljs-literal">null</span>);
        }
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-comment">// æ²¡æœ‰é€‰ä¸­æ–‡æœ¬ï¼Œéšè—å·¥å…·æ </span>
        <span class="hljs-title function_">setSelection</span>(<span class="hljs-literal">null</span>);
      }
    };

    <span class="hljs-comment">/**
     * å¤„ç†é¼ æ ‡æŒ‰ä¸‹äº‹ä»¶
     */</span>
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleMouseDown</span> = (<span class="hljs-params">e</span>) =&gt; {
      <span class="hljs-comment">// æ£€æŸ¥ç‚¹å‡»æ˜¯å¦å‘ç”Ÿåœ¨å·¥å…·æ åŒºåŸŸå†…</span>
      <span class="hljs-keyword">if</span> (toolbarRef.<span class="hljs-property">current</span> &amp;&amp; toolbarRef.<span class="hljs-property">current</span>.<span class="hljs-title function_">contains</span>(e.<span class="hljs-property">target</span>)) {
        isInToolbarRef.<span class="hljs-property">current</span> = <span class="hljs-literal">true</span>;
      } <span class="hljs-keyword">else</span> {
        isInToolbarRef.<span class="hljs-property">current</span> = <span class="hljs-literal">false</span>;
      }
    };

    <span class="hljs-comment">/**
     * å¤„ç†é¼ æ ‡æŠ¬èµ·äº‹ä»¶
     */</span>
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleMouseUp</span> = (<span class="hljs-params"/>) =&gt; {
      <span class="hljs-comment">// å»¶è¿Ÿæ‰§è¡Œï¼Œç¡®ä¿æµè§ˆå™¨å·²å®Œæˆé€‰æ‹©æ“ä½œ</span>
      <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
        <span class="hljs-keyword">if</span> (!isInToolbarRef.<span class="hljs-property">current</span>) {
          <span class="hljs-title function_">handleSelectionChange</span>();
        }
      }, <span class="hljs-number">100</span>);
    };

    <span class="hljs-comment">/**
     * å¤„ç†ç‚¹å‡»å¤–éƒ¨äº‹ä»¶
     */</span>
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleClickOutside</span> = (<span class="hljs-params">e</span>) =&gt; {
      <span class="hljs-keyword">if</span> (toolbarRef.<span class="hljs-property">current</span> &amp;&amp; !toolbarRef.<span class="hljs-property">current</span>.<span class="hljs-title function_">contains</span>(e.<span class="hljs-property">target</span>)) {
        <span class="hljs-keyword">const</span> targetElement = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(target);
        <span class="hljs-keyword">if</span> (targetElement &amp;&amp; !targetElement.<span class="hljs-title function_">contains</span>(e.<span class="hljs-property">target</span>)) {
          <span class="hljs-title function_">setSelection</span>(<span class="hljs-literal">null</span>);
        }
      }
    };

    <span class="hljs-comment">// æ·»åŠ äº‹ä»¶ç›‘å¬å™¨</span>
    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"selectionchange"</span>, handleSelectionChange);
    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"mousedown"</span>, handleMouseDown);
    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"mouseup"</span>, handleMouseUp);
    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"mousedown"</span>, handleClickOutside);

    <span class="hljs-comment">// æ¸…ç†å‡½æ•°ï¼šç»„ä»¶å¸è½½æ—¶ç§»é™¤äº‹ä»¶ç›‘å¬å™¨</span>
    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">"selectionchange"</span>, handleSelectionChange);
      <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">"mousedown"</span>, handleMouseDown);
      <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">"mouseup"</span>, handleMouseUp);
      <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">"mousedown"</span>, handleClickOutside);
    };
  }, [target, getBoldState]);

  <span class="hljs-comment">// è®¾ç½®å­—ä½“å¤§å°</span>
  <span class="hljs-keyword">const</span> setFontSizeCommand = <span class="hljs-title function_">useCallback</span>(<span class="hljs-function">(<span class="hljs-params">sizeValue, range</span>) =&gt;</span> {
    <span class="hljs-keyword">if</span> (!range) <span class="hljs-keyword">return</span>;

    <span class="hljs-keyword">const</span> selection = <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">getSelection</span>();
    selection.<span class="hljs-title function_">removeAllRanges</span>();
    selection.<span class="hljs-title function_">addRange</span>(range);

    <span class="hljs-keyword">const</span> newRange = selection.<span class="hljs-title function_">getRangeAt</span>(<span class="hljs-number">0</span>);
    <span class="hljs-keyword">const</span> span = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">"span"</span>);

    <span class="hljs-keyword">const</span> sizeMap = {
      <span class="hljs-string">"1"</span>: <span class="hljs-string">"12px"</span>,
      <span class="hljs-string">"2"</span>: <span class="hljs-string">"14px"</span>,
      <span class="hljs-string">"3"</span>: <span class="hljs-string">"16px"</span>,
      <span class="hljs-string">"4"</span>: <span class="hljs-string">"18px"</span>,
      <span class="hljs-string">"5"</span>: <span class="hljs-string">"24px"</span>,
      <span class="hljs-string">"6"</span>: <span class="hljs-string">"32px"</span>,
      <span class="hljs-string">"7"</span>: <span class="hljs-string">"48px"</span>,
    };

    span.<span class="hljs-property">style</span>.<span class="hljs-property">fontSize</span> = sizeMap[sizeValue] || <span class="hljs-string">"16px"</span>;

    <span class="hljs-keyword">try</span> {
      <span class="hljs-comment">// æ£€æŸ¥é€‰æ‹©èŒƒå›´æ˜¯å¦å·²æŠ˜å ï¼ˆå³æ²¡æœ‰é€‰ä¸­æ–‡æœ¬ï¼Œåªæœ‰ä¸€ä¸ªå…‰æ ‡ä½ç½®ï¼‰</span>
      <span class="hljs-comment">// å¦‚æœæ˜¯æŠ˜å çŠ¶æ€ï¼Œä¸æ‰§è¡Œå­—ä½“å¤§å°è®¾ç½®æ“ä½œ</span>
      <span class="hljs-keyword">if</span> (newRange.<span class="hljs-property">collapsed</span>) <span class="hljs-keyword">return</span>;

      <span class="hljs-keyword">const</span> clonedRange = newRange.<span class="hljs-title function_">cloneRange</span>();
      <span class="hljs-keyword">const</span> fragment = clonedRange.<span class="hljs-title function_">extractContents</span>();
      span.<span class="hljs-title function_">appendChild</span>(fragment);
      clonedRange.<span class="hljs-title function_">insertNode</span>(span);

      <span class="hljs-comment">// æ¸…é™¤å½“å‰é€‰æ‹©ï¼Œç„¶åé‡æ–°é€‰ä¸­åˆšåˆšæ’å…¥çš„spanå…ƒç´ å†…å®¹</span>
      <span class="hljs-comment">// è¿™æ ·ç”¨æˆ·å¯ä»¥ç»§ç»­å¯¹åŒä¸€æ®µæ–‡æœ¬è¿›è¡Œå…¶ä»–æ“ä½œ</span>
      selection.<span class="hljs-title function_">removeAllRanges</span>();
      <span class="hljs-keyword">const</span> newSelectionRange = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createRange</span>();
      newSelectionRange.<span class="hljs-title function_">selectNodeContents</span>(span);
      selection.<span class="hljs-title function_">addRange</span>(newSelectionRange);
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"è®¾ç½®å­—ä½“å¤§å°å¤±è´¥:"</span>, error);
    }

    <span class="hljs-comment">// æ›´æ–°çŠ¶æ€</span>
    <span class="hljs-title function_">setFontSize</span>(sizeValue);
  }, []);

  <span class="hljs-comment">// å¤„ç†åŠ ç²—æ“ä½œ</span>
  <span class="hljs-keyword">const</span> handleBoldClick = <span class="hljs-title function_">useCallback</span>(<span class="hljs-function">(<span class="hljs-params">range</span>) =&gt;</span> {
    <span class="hljs-keyword">if</span> (!range) <span class="hljs-keyword">return</span>;

    <span class="hljs-comment">// æ‰§è¡ŒåŠ ç²—å‘½ä»¤</span>
    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">execCommand</span>(<span class="hljs-string">"bold"</span>, <span class="hljs-literal">false</span>, <span class="hljs-literal">null</span>);

    <span class="hljs-title function_">updateFormattingStates</span>();
  }, [updateFormattingStates]);

  <span class="hljs-comment">// å¤„ç†æ–œä½“æ“ä½œ</span>
  <span class="hljs-keyword">const</span> handleItalicClick = <span class="hljs-title function_">useCallback</span>(<span class="hljs-function">(<span class="hljs-params">range</span>) =&gt;</span> {
    <span class="hljs-keyword">if</span> (!range) <span class="hljs-keyword">return</span>;

    <span class="hljs-comment">// æ‰§è¡Œæ–œä½“å‘½ä»¤</span>
    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">execCommand</span>(<span class="hljs-string">"italic"</span>, <span class="hljs-literal">false</span>, <span class="hljs-literal">null</span>);

    <span class="hljs-comment">// æ¢å¤é€‰æ‹©èŒƒå›´å¹¶æ›´æ–°çŠ¶æ€</span>
    <span class="hljs-title function_">updateFormattingStates</span>();
  }, [updateFormattingStates]);

  <span class="hljs-comment">// å¤„ç†ä¸‹åˆ’çº¿æ“ä½œ</span>
  <span class="hljs-keyword">const</span> handleUnderlineClick = <span class="hljs-title function_">useCallback</span>(<span class="hljs-function">(<span class="hljs-params">range</span>) =&gt;</span> {
    <span class="hljs-keyword">if</span> (!range) <span class="hljs-keyword">return</span>;

    <span class="hljs-comment">// æ‰§è¡Œä¸‹åˆ’çº¿å‘½ä»¤</span>
    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">execCommand</span>(<span class="hljs-string">"underline"</span>, <span class="hljs-literal">false</span>, <span class="hljs-literal">null</span>);

    <span class="hljs-comment">// æ›´æ–°çŠ¶æ€</span>
    <span class="hljs-title function_">updateFormattingStates</span>();
  }, [updateFormattingStates]);

  <span class="hljs-comment">// å¤„ç†å­—å·å˜åŒ–</span>
  <span class="hljs-keyword">const</span> handleFontSizeChange = <span class="hljs-title function_">useCallback</span>(<span class="hljs-function">(<span class="hljs-params">sizeValue, range</span>) =&gt;</span> {
    <span class="hljs-keyword">if</span> (!range) <span class="hljs-keyword">return</span>;

    <span class="hljs-title function_">setFontSizeCommand</span>(sizeValue, range);
    <span class="hljs-title function_">updateFormattingStates</span>();
  }, [setFontSizeCommand, updateFormattingStates]);

  <span class="hljs-keyword">return</span> {
    selection,
    toolbarRef,
    isBoldActive,
    handleBoldClick,
  };
};
</code></pre>
<h2 data-id="heading-27">å®ç°é¢œè‰²</h2>
<h3 data-id="heading-28">ä¿®æ”¹ä¸»ç»„ä»¶</h3>
<p>ä»è‡ªå®šä¹‰ Hook ä¸­è·å– <code>color</code> å’Œ <code>handleColorChange</code>ï¼Œå¹¶ä¼ ç»™æµ®åŠ¨å·¥å…·æ ç»„ä»¶ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> <span class="hljs-title function_">TextCustom</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-comment">// ä½¿ç”¨è‡ªå®šä¹‰ Hook è·å–æ–‡æœ¬é€‰æ‹©ä¿¡æ¯</span>
  <span class="hljs-keyword">const</span> { 
    selection, 
    toolbarRef, 
    isBoldActive, 
    isItalicActive,
    isUnderlineActive,
    fontSize,
    handleBoldClick,
    handleItalicClick,
    handleUnderlineClick,
    handleFontSizeChange,
  } = <span class="hljs-title function_">useTextSelection</span>(<span class="hljs-string">"#editor"</span>);

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      {/* å¯ç¼–è¾‘çš„æ–‡æœ¬åŒºåŸŸ */}
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span>
        <span class="hljs-attr">id</span>=<span class="hljs-string">"editor"</span>
        <span class="hljs-attr">contentEditable</span>=<span class="hljs-string">{true}</span>
        <span class="hljs-attr">suppressContentEditableWarning</span>=<span class="hljs-string">{true}</span>
      /&gt;</span>

      {/* æµ®åŠ¨å·¥å…·æ ç»„ä»¶ */}
      <span class="hljs-tag">&lt;<span class="hljs-name">FloatingToolbar</span>
        <span class="hljs-attr">selection</span>=<span class="hljs-string">{selection}</span>
        <span class="hljs-attr">toolbarRef</span>=<span class="hljs-string">{toolbarRef}</span>
        <span class="hljs-attr">onBoldClick</span>=<span class="hljs-string">{handleBoldClick}</span>
        <span class="hljs-attr">onItalicClick</span>=<span class="hljs-string">{handleItalicClick}</span>
        <span class="hljs-attr">onUnderlineClick</span>=<span class="hljs-string">{handleUnderlineClick}</span>
        <span class="hljs-attr">onFontSizeChange</span>=<span class="hljs-string">{handleFontSizeChange}</span>
        <span class="hljs-attr">onColorChange</span>=<span class="hljs-string">{handleColorChange}</span>
        <span class="hljs-attr">isBoldActive</span>=<span class="hljs-string">{isBoldActive}</span>
        <span class="hljs-attr">isItalicActive</span>=<span class="hljs-string">{isItalicActive}</span>
        <span class="hljs-attr">isUnderlineActive</span>=<span class="hljs-string">{isUnderlineActive}</span>
        <span class="hljs-attr">fontSize</span>=<span class="hljs-string">{fontSize}</span>
        <span class="hljs-attr">color</span>=<span class="hljs-string">{color}</span>
      /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
};
</code></pre>
<h3 data-id="heading-29">ä¿®æ”¹æµ®åŠ¨å·¥å…·æ </h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> <span class="hljs-title function_">FloatingToolbar</span> = (<span class="hljs-params">{
  selection,
  toolbarRef,
  onBoldClick,
  onItalicClick,
  onUnderlineClick,
  onFontSizeChange,
  onColorChange,
  isBoldActive = <span class="hljs-literal">false</span>,
  isItalicActive = <span class="hljs-literal">false</span>,
  isUnderlineActive = <span class="hljs-literal">false</span>,
  fontSize = <span class="hljs-string">"3"</span>,
  color = <span class="hljs-string">"#000000"</span>,
}</span>) =&gt; {
  <span class="hljs-comment">// å¦‚æœæ²¡æœ‰é€‰æ‹©ä¿¡æ¯ï¼Œä¸æ¸²æŸ“å·¥å…·æ </span>
  <span class="hljs-keyword">if</span> (!selection) <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;

  <span class="hljs-keyword">const</span> { clientRect, selectedText, range } = selection;
  
  <span class="hljs-comment">// å¦‚æœæ²¡æœ‰é€‰ä¸­æ–‡æœ¬æˆ–ä½ç½®ä¿¡æ¯ï¼Œä¸æ¸²æŸ“å·¥å…·æ </span>
  <span class="hljs-keyword">if</span> (!selectedText || !clientRect || !range) <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>
      <span class="hljs-attr">ref</span>=<span class="hljs-string">{toolbarRef}</span>
      <span class="hljs-attr">className</span>=<span class="hljs-string">"floating-toolbar"</span>
      <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span>
        <span class="hljs-attr">position:</span> "<span class="hljs-attr">fixed</span>",
        <span class="hljs-attr">top:</span> <span class="hljs-attr">clientRect.top</span> <span class="hljs-attr">-</span> <span class="hljs-attr">65</span>,
        <span class="hljs-attr">left:</span> <span class="hljs-attr">clientRect.left</span> + <span class="hljs-attr">clientRect.width</span> / <span class="hljs-attr">2</span>,
        <span class="hljs-attr">transform:</span> "<span class="hljs-attr">translateX</span>(<span class="hljs-attr">-10</span>%)",
        <span class="hljs-attr">background:</span> "#<span class="hljs-attr">fff</span>",
        <span class="hljs-attr">zIndex:</span> <span class="hljs-attr">10000</span>,
        <span class="hljs-attr">minWidth:</span> "<span class="hljs-attr">180px</span>",
      }}
    &gt;</span>
      {/* æ˜¾ç¤ºé€‰ä¸­æ–‡æœ¬çš„å­—ç¬¦æ•°é‡ */}
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">fontSize:</span> "<span class="hljs-attr">12px</span>", <span class="hljs-attr">fontWeight:</span> "<span class="hljs-attr">bold</span>" }}&gt;</span>
        ğŸ“ {selectedText.length} å­—
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

      {/* åŠ ç²—æŒ‰é’® */}
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span>
        <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> onBoldClick &amp;&amp; onBoldClick(range)}
        title="åŠ ç²—"
        style={{
          background: isBoldActive ? "#3498db" : "#999",
          border: "none",
          color: "white",
          width: "36px",
          height: "36px",
          borderRadius: "6px",
          cursor: "pointer",
          display: "flex",
          alignItems: "center",
          justifyContent: "center",
          fontSize: "14px",
        }}
      &gt;
        <span class="hljs-tag">&lt;<span class="hljs-name">strong</span>&gt;</span>B<span class="hljs-tag">&lt;/<span class="hljs-name">strong</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>

      {/* æ–œä½“æŒ‰é’® */}
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span>
        <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> onItalicClick &amp;&amp; onItalicClick(range)}
        title="æ–œä½“"
        style={{
          background: isItalicActive ? "#3498db" : "#999",
          border: "none",
          color: "white",
          width: "36px",
          height: "36px",
          borderRadius: "6px",
          cursor: "pointer",
          display: "flex",
          alignItems: "center",
          justifyContent: "center",
          fontSize: "14px",
          fontStyle: "italic",
        }}
      &gt;
        I
      <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>

      {/* ä¸‹åˆ’çº¿æŒ‰é’® */}
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span>
        <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> onUnderlineClick &amp;&amp; onUnderlineClick(range)}
        title="ä¸‹åˆ’çº¿"
        style={{
          background: isUnderlineActive ? "#3498db" : "#999",
          border: "none",
          color: "white",
          width: "36px",
          height: "36px",
          borderRadius: "6px",
          cursor: "pointer",
          display: "flex",
          alignItems: "center",
          justifyContent: "center",
          fontSize: "14px",
          textDecoration: "underline",
        }}
      &gt;
        U
      <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>

      {/* å­—å·é€‰æ‹©å™¨ */}
      <span class="hljs-tag">&lt;<span class="hljs-name">select</span>
        <span class="hljs-attr">value</span>=<span class="hljs-string">{fontSize}</span>
        <span class="hljs-attr">onChange</span>=<span class="hljs-string">{(e)</span> =&gt;</span> onFontSizeChange &amp;&amp; onFontSizeChange(e.target.value, range)}
        onMouseDown={(e) =&gt; e.stopPropagation()}
        onClick={(e) =&gt; e.stopPropagation()}
        style={{
          background: "#999",
          color: "white",
          border: "1px solid #999",
          borderRadius: "4px",
          padding: "6px 10px",
          cursor: "pointer",
          fontSize: "12px",
          width: "90px",
          appearance: "auto",
        }}
      &gt;
        <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"1"</span>&gt;</span>12px<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"2"</span>&gt;</span>14px<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"3"</span>&gt;</span>16px<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"4"</span>&gt;</span>18px<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"5"</span>&gt;</span>24px<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"6"</span>&gt;</span>32px<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"7"</span>&gt;</span>48px<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span>

      {/* é¢œè‰²é€‰æ‹©å™¨ */}
      <span class="hljs-tag">&lt;<span class="hljs-name">input</span>
        <span class="hljs-attr">type</span>=<span class="hljs-string">"color"</span>
        <span class="hljs-attr">value</span>=<span class="hljs-string">{color}</span>
        <span class="hljs-attr">onChange</span>=<span class="hljs-string">{(e)</span> =&gt;</span> onColorChange &amp;&amp; onColorChange(e.target.value, range)}
        title="æ–‡å­—é¢œè‰²"
        style={{
          width: "36px",
          height: "36px",
          border: "2px solid #4a627a",
          borderRadius: "6px",
          cursor: "pointer",
          padding: "0",
          backgroundColor: color || "#ffffff",
        }}
        onMouseDown={(e) =&gt; e.stopPropagation()}
        onClick={(e) =&gt; e.stopPropagation()}
      /&gt;
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
};
</code></pre>
<h3 data-id="heading-30">ä¿®æ”¹è‡ªå®šä¹‰ Hook</h3>
<p>åœ¨çœ‹å…·ä½“å®ç°å‰ï¼Œå…ˆè®¤è¯†ä¸€ä¸ª APIï¼Œ<code>document.createTreeWalke</code> æ˜¯ä¸€ä¸ªç”¨äº <strong>æ·±åº¦ä¼˜å…ˆéå† DOM æ ‘</strong> çš„æ¥å£ã€‚</p>
<p>åŸºæœ¬è¯­æ³•</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> walker = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createTreeWalker</span>(
  root,          <span class="hljs-comment">// éå†çš„èµ·å§‹èŠ‚ç‚¹</span>
  whatToShow,    <span class="hljs-comment">// è¦æ˜¾ç¤ºå“ªäº›ç±»å‹çš„èŠ‚ç‚¹</span>
  filter         <span class="hljs-comment">// å¯é€‰çš„è¿‡æ»¤å™¨å‡½æ•°</span>
);
</code></pre>
<p>ç®€å•ç¤ºä¾‹</p>
<pre><code class="hljs language-js" lang="js">&lt;div id=<span class="hljs-string">"container"</span>&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>æ ‡é¢˜<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span>
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>æ®µè½ <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>æ–‡æœ¬<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span>
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>é¡¹ç›®1<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>é¡¹ç›®2<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span></span>
&lt;/div&gt;

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">const</span> container = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'container'</span>);

<span class="hljs-comment">// åˆ›å»º TreeWalkerï¼š ä» container å¼€å§‹ï¼Œåªéå†å…ƒç´ èŠ‚ç‚¹</span>
<span class="hljs-keyword">const</span> walker = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createTreeWalker</span>(
  container,
  <span class="hljs-title class_">NodeFilter</span>.<span class="hljs-property">SHOW_ELEMENT</span>,  <span class="hljs-comment">// åªæ˜¾ç¤ºå…ƒç´ èŠ‚ç‚¹</span>
  <span class="hljs-literal">null</span>  <span class="hljs-comment">// ä¸è¿‡æ»¤</span>
);

<span class="hljs-keyword">const</span> nodes = [];
<span class="hljs-keyword">let</span> node;
<span class="hljs-keyword">while</span> (node = walker.<span class="hljs-title function_">nextNode</span>()) {
  nodes.<span class="hljs-title function_">push</span>(node.<span class="hljs-property">tagName</span>);
}

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(nodes); <span class="hljs-comment">// è¾“å‡º: ["H1", "P", "SPAN", "UL", "LI", "LI"] æ·±åº¦ä¼˜å…ˆéå†é¡ºåº</span>
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>
</code></pre>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> <span class="hljs-title function_">useTextSelection</span> = (<span class="hljs-params">target</span>) =&gt; {
  <span class="hljs-keyword">const</span> [selection, setSelection] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">null</span>);
  <span class="hljs-keyword">const</span> [isBoldActive, setIsBoldActive] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">false</span>);
  <span class="hljs-keyword">const</span> [isItalicActive, setIsItalicActive] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">false</span>);
  <span class="hljs-keyword">const</span> [isUnderlineActive, setIsUnderlineActive] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">false</span>);
  <span class="hljs-keyword">const</span> [fontSize, setFontSize] = <span class="hljs-title function_">useState</span>(<span class="hljs-string">"3"</span>);
  <span class="hljs-keyword">const</span> [color, setColor] = <span class="hljs-title function_">useState</span>(<span class="hljs-string">"#000000"</span>);
  
  <span class="hljs-comment">// æ ‡è®°ç”¨æˆ·æ˜¯å¦æ­£åœ¨ä¸å·¥å…·æ äº¤äº’</span>
  <span class="hljs-keyword">const</span> isInToolbarRef = <span class="hljs-title function_">useRef</span>(<span class="hljs-literal">false</span>);
  
  <span class="hljs-comment">// å·¥å…·æ  DOM å…ƒç´ çš„å¼•ç”¨</span>
  <span class="hljs-keyword">const</span> toolbarRef = <span class="hljs-title function_">useRef</span>(<span class="hljs-literal">null</span>);

  <span class="hljs-comment">// RGB è½¬åå…­è¿›åˆ¶è¾…åŠ©å‡½æ•°</span>
  <span class="hljs-keyword">const</span> rgbToHex = <span class="hljs-title function_">useCallback</span>(<span class="hljs-function">(<span class="hljs-params">rgb</span>) =&gt;</span> {
    <span class="hljs-comment">// å¦‚æœå·²ç»æ˜¯åå…­è¿›åˆ¶æ ¼å¼ï¼Œç›´æ¥è¿”å›</span>
    <span class="hljs-keyword">if</span> (rgb.<span class="hljs-title function_">startsWith</span>(<span class="hljs-string">"#"</span>)) <span class="hljs-keyword">return</span> rgb;

    <span class="hljs-comment">// åŒ¹é… RGB æˆ– RGBA æ ¼å¼ï¼šrgb(255, 255, 255) æˆ– rgba(255, 255, 255, 0.5)</span>
    <span class="hljs-keyword">const</span> match = rgb.<span class="hljs-title function_">match</span>(<span class="hljs-regexp">/rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*[\d.]+)?\)/</span>);
    <span class="hljs-keyword">if</span> (match) {
      <span class="hljs-keyword">const</span> r = <span class="hljs-built_in">parseInt</span>(match[<span class="hljs-number">1</span>]);
      <span class="hljs-keyword">const</span> g = <span class="hljs-built_in">parseInt</span>(match[<span class="hljs-number">2</span>]);
      <span class="hljs-keyword">const</span> b = <span class="hljs-built_in">parseInt</span>(match[<span class="hljs-number">3</span>]);

      <span class="hljs-comment">// å°† RGB å€¼è½¬æ¢ä¸ºåå…­è¿›åˆ¶ï¼Œå¹¶ç¡®ä¿ä¸¤ä½æ˜¾ç¤º</span>
      <span class="hljs-keyword">return</span> (
        <span class="hljs-string">"#"</span> +
        r.<span class="hljs-title function_">toString</span>(<span class="hljs-number">16</span>).<span class="hljs-title function_">padStart</span>(<span class="hljs-number">2</span>, <span class="hljs-string">"0"</span>) +
        g.<span class="hljs-title function_">toString</span>(<span class="hljs-number">16</span>).<span class="hljs-title function_">padStart</span>(<span class="hljs-number">2</span>, <span class="hljs-string">"0"</span>) +
        b.<span class="hljs-title function_">toString</span>(<span class="hljs-number">16</span>).<span class="hljs-title function_">padStart</span>(<span class="hljs-number">2</span>, <span class="hljs-string">"0"</span>)
      );
    }

    <span class="hljs-comment">// æ— æ³•è§£æçš„é¢œè‰²ï¼Œè¿”å›é»˜è®¤é»‘è‰²</span>
    <span class="hljs-keyword">return</span> <span class="hljs-string">"#000000"</span>;
  }, []);

  <span class="hljs-comment">// è·å–åŠ ç²—çŠ¶æ€</span>
  <span class="hljs-keyword">const</span> getBoldState = <span class="hljs-title function_">useCallback</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">document</span>.<span class="hljs-property">queryCommandState</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">queryCommandState</span>(<span class="hljs-string">"bold"</span>);
  }, []);

  <span class="hljs-comment">// è·å–æ–œä½“çŠ¶æ€</span>
  <span class="hljs-keyword">const</span> getItalicState = <span class="hljs-title function_">useCallback</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">document</span>.<span class="hljs-property">queryCommandState</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">queryCommandState</span>(<span class="hljs-string">"italic"</span>);
  }, []);

  <span class="hljs-comment">// è·å–ä¸‹åˆ’çº¿çŠ¶æ€</span>
  <span class="hljs-keyword">const</span> getUnderlineState = <span class="hljs-title function_">useCallback</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">document</span>.<span class="hljs-property">queryCommandState</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">queryCommandState</span>(<span class="hljs-string">"underline"</span>);
  }, []);

  <span class="hljs-comment">// è·å–å½“å‰é€‰æ‹©çš„å­—å·</span>
  <span class="hljs-keyword">const</span> getFontSizeState = <span class="hljs-title function_">useCallback</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> selection = <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">getSelection</span>();
    <span class="hljs-keyword">if</span> (!selection.<span class="hljs-property">rangeCount</span>) <span class="hljs-keyword">return</span> <span class="hljs-string">"3"</span>;

    <span class="hljs-keyword">const</span> range = selection.<span class="hljs-title function_">getRangeAt</span>(<span class="hljs-number">0</span>);

    <span class="hljs-keyword">let</span> element = range.<span class="hljs-property">startContainer</span>;
    <span class="hljs-keyword">if</span> (element.<span class="hljs-property">nodeType</span> !== <span class="hljs-title class_">Node</span>.<span class="hljs-property">ELEMENT_NODE</span>) {
      element = element.<span class="hljs-property">parentElement</span>;
    }

    <span class="hljs-comment">// éå†çˆ¶å…ƒç´ æŸ¥æ‰¾å­—ä½“å¤§å°</span>
    <span class="hljs-keyword">while</span> (element &amp;&amp; element !== <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(target)) {
      <span class="hljs-keyword">if</span> (element.<span class="hljs-property">nodeType</span> === <span class="hljs-title class_">Node</span>.<span class="hljs-property">ELEMENT_NODE</span>) {
        <span class="hljs-keyword">const</span> computedStyle = <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">getComputedStyle</span>(element);
        <span class="hljs-keyword">const</span> computedFontSize = computedStyle.<span class="hljs-property">fontSize</span>;

        <span class="hljs-keyword">if</span> (computedFontSize) {
          <span class="hljs-keyword">const</span> sizeInPx = <span class="hljs-built_in">parseInt</span>(computedFontSize);
          <span class="hljs-keyword">if</span> (sizeInPx &gt;= <span class="hljs-number">42</span>) <span class="hljs-keyword">return</span> <span class="hljs-string">"7"</span>;
          <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (sizeInPx &gt;= <span class="hljs-number">28</span>) <span class="hljs-keyword">return</span> <span class="hljs-string">"6"</span>;
          <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (sizeInPx &gt;= <span class="hljs-number">22</span>) <span class="hljs-keyword">return</span> <span class="hljs-string">"5"</span>;
          <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (sizeInPx &gt;= <span class="hljs-number">17</span>) <span class="hljs-keyword">return</span> <span class="hljs-string">"4"</span>;
          <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (sizeInPx &gt;= <span class="hljs-number">15</span>) <span class="hljs-keyword">return</span> <span class="hljs-string">"3"</span>;
          <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (sizeInPx &gt;= <span class="hljs-number">13</span>) <span class="hljs-keyword">return</span> <span class="hljs-string">"2"</span>;
          <span class="hljs-keyword">else</span> <span class="hljs-keyword">return</span> <span class="hljs-string">"1"</span>;
        }
      }
      element = element.<span class="hljs-property">parentElement</span>;
    }

    <span class="hljs-keyword">return</span> <span class="hljs-string">"3"</span>;
  }, [target]);

  <span class="hljs-comment">// è·å–å½“å‰é€‰æ‹©çš„é¢œè‰²</span>
  <span class="hljs-keyword">const</span> getColorState = <span class="hljs-title function_">useCallback</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> selection = <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">getSelection</span>();
    <span class="hljs-keyword">if</span> (!selection.<span class="hljs-property">rangeCount</span>) <span class="hljs-keyword">return</span> <span class="hljs-string">"#000000"</span>;

    <span class="hljs-keyword">const</span> range = selection.<span class="hljs-title function_">getRangeAt</span>(<span class="hljs-number">0</span>);
    <span class="hljs-keyword">const</span> commonAncestor = range.<span class="hljs-property">commonAncestorContainer</span>;

    <span class="hljs-keyword">let</span> element = range.<span class="hljs-property">startContainer</span>;
    <span class="hljs-keyword">if</span> (element.<span class="hljs-property">nodeType</span> !== <span class="hljs-title class_">Node</span>.<span class="hljs-property">ELEMENT_NODE</span>) {
      element = element.<span class="hljs-property">parentElement</span>;
    }

    <span class="hljs-comment">// éå†çˆ¶å…ƒç´ æŸ¥æ‰¾é¢œè‰²</span>
    <span class="hljs-keyword">while</span> (element &amp;&amp; element !== <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(target)) {
      <span class="hljs-keyword">if</span> (element.<span class="hljs-property">nodeType</span> === <span class="hljs-title class_">Node</span>.<span class="hljs-property">ELEMENT_NODE</span>) {
        <span class="hljs-keyword">const</span> computedStyle = <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">getComputedStyle</span>(element);
        <span class="hljs-keyword">const</span> computedColor = computedStyle.<span class="hljs-property">color</span>;

        <span class="hljs-comment">// æ£€æŸ¥é¢œè‰²æ˜¯å¦ä¸ºæœ‰æ•ˆå€¼ï¼ˆéé€æ˜ã€éé»˜è®¤é»‘è‰²ï¼‰</span>
        <span class="hljs-keyword">if</span> (
          computedColor &amp;&amp;
          computedColor !== <span class="hljs-string">"rgba(0, 0, 0, 0)"</span> &amp;&amp;
          computedColor !== <span class="hljs-string">"transparent"</span> &amp;&amp;
          !computedColor.<span class="hljs-title function_">startsWith</span>(<span class="hljs-params"><span class="hljs-string">"rgba(0, 0, 0, "</span></span>)
        ) {
          <span class="hljs-keyword">return</span> <span class="hljs-title function_">rgbToHex</span>(computedColor);
        }
      }
      element = element.<span class="hljs-property">parentElement</span>;
    }

    <span class="hljs-comment">// å¦‚æœæ²¡æœ‰æ‰¾åˆ°ï¼Œæ£€æŸ¥é€‰æ‹©èŒƒå›´å†…çš„å…ƒç´ </span>
    <span class="hljs-keyword">const</span> walker = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createTreeWalker</span>(
      commonAncestor,
      <span class="hljs-title class_">NodeFilter</span>.<span class="hljs-property">SHOW_ELEMENT</span>,
      {
        <span class="hljs-attr">acceptNode</span>: <span class="hljs-function">(<span class="hljs-params">node</span>) =&gt;</span>
          range.<span class="hljs-title function_">intersectsNode</span>(node)
            ? <span class="hljs-title class_">NodeFilter</span>.<span class="hljs-property">FILTER_ACCEPT</span>
            : <span class="hljs-title class_">NodeFilter</span>.<span class="hljs-property">FILTER_REJECT</span>,
      },
    );

    <span class="hljs-comment">// å½“å‘ä¸Šéå†æ‰¾ä¸åˆ°é¢œè‰²æ—¶ï¼Œå®ƒä¼šæ·±åº¦éå†é€‰æ‹©èŒƒå›´å†…çš„æ‰€æœ‰å…ƒç´ ï¼Œæ‰¾åˆ°ç¬¬ä¸€ä¸ªæœ‰æ•ˆçš„æ–‡æœ¬é¢œè‰²ã€‚</span>
    <span class="hljs-keyword">while</span> ((element = walker.<span class="hljs-title function_">nextNode</span>())) {
      <span class="hljs-keyword">const</span> computedStyle = <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">getComputedStyle</span>(element);
      <span class="hljs-keyword">const</span> computedColor = computedStyle.<span class="hljs-property">color</span>;

      <span class="hljs-keyword">if</span> (
        computedColor &amp;&amp;
        computedColor !== <span class="hljs-string">"rgba(0, 0, 0, 0)"</span> &amp;&amp;
        computedColor !== <span class="hljs-string">"transparent"</span> &amp;&amp;
        !computedColor.<span class="hljs-title function_">startsWith</span>(<span class="hljs-params"><span class="hljs-string">"rgba(0, 0, 0, "</span></span>)
      ) {
        <span class="hljs-keyword">return</span> <span class="hljs-title function_">rgbToHex</span>(computedColor);
      }
    }

    <span class="hljs-keyword">return</span> <span class="hljs-string">"#000000"</span>;
  }, [target, rgbToHex]);

  <span class="hljs-comment">// æ›´æ–°æ‰€æœ‰æ ¼å¼åŒ–çŠ¶æ€</span>
  <span class="hljs-keyword">const</span> updateFormattingStates = <span class="hljs-title function_">useCallback</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-title function_">setIsBoldActive</span>(<span class="hljs-title function_">getBoldState</span>());
    <span class="hljs-title function_">setIsItalicActive</span>(<span class="hljs-title function_">getItalicState</span>());
    <span class="hljs-title function_">setIsUnderlineActive</span>(<span class="hljs-title function_">getUnderlineState</span>());
    <span class="hljs-title function_">setFontSize</span>(<span class="hljs-title function_">getFontSizeState</span>());
    <span class="hljs-title function_">setColor</span>(<span class="hljs-title function_">getColorState</span>());
  }, [getBoldState, getItalicState, getUnderlineState, getFontSizeState, getColorState]);

  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-comment">/**
     * å¤„ç†æ–‡æœ¬é€‰æ‹©å˜åŒ–äº‹ä»¶
     */</span>
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleSelectionChange</span> = (<span class="hljs-params"/>) =&gt; {
      <span class="hljs-comment">// å¦‚æœç”¨æˆ·æ­£åœ¨ä¸å·¥å…·æ äº¤äº’ï¼Œä¸å¤„ç†é€‰æ‹©å˜åŒ–</span>
      <span class="hljs-keyword">if</span> (isInToolbarRef.<span class="hljs-property">current</span>) <span class="hljs-keyword">return</span>;

      <span class="hljs-keyword">const</span> selection = <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">getSelection</span>();
      <span class="hljs-keyword">const</span> selectedText = selection.<span class="hljs-title function_">toString</span>().<span class="hljs-title function_">trim</span>();

      <span class="hljs-comment">// ç¡®ä¿æœ‰é€‰ä¸­æ–‡æœ¬å¹¶ä¸”é€‰æ‹©èŒƒå›´æœ‰æ•ˆ</span>
      <span class="hljs-keyword">if</span> (selectedText &amp;&amp; selection.<span class="hljs-property">rangeCount</span> &gt; <span class="hljs-number">0</span>) {
        <span class="hljs-keyword">const</span> range = selection.<span class="hljs-title function_">getRangeAt</span>(<span class="hljs-number">0</span>);
        <span class="hljs-keyword">const</span> rect = range.<span class="hljs-title function_">getBoundingClientRect</span>();

        <span class="hljs-keyword">const</span> anchorNode = selection.<span class="hljs-property">anchorNode</span>;
        <span class="hljs-keyword">const</span> targetElement = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(target);
        
        <span class="hljs-comment">// æ£€æŸ¥é€‰æ‹©æ˜¯å¦å‘ç”Ÿåœ¨ç›®æ ‡ç¼–è¾‘å™¨å†…</span>
        <span class="hljs-keyword">const</span> isInTarget =
          targetElement &amp;&amp;
          (targetElement.<span class="hljs-title function_">contains</span>(anchorNode) || targetElement === anchorNode);

        <span class="hljs-keyword">if</span> (isInTarget) {
          <span class="hljs-comment">// ä¿å­˜é€‰æ‹©èŒƒå›´</span>
          <span class="hljs-comment">// æ›´æ–°é€‰æ‹©ä¿¡æ¯ï¼Œæ˜¾ç¤ºå·¥å…·æ </span>
          <span class="hljs-title function_">setSelection</span>({
            <span class="hljs-attr">clientRect</span>: rect,
            <span class="hljs-attr">selectedText</span>: selectedText,
            <span class="hljs-attr">range</span>: range,
          });

          <span class="hljs-comment">// è·å–å½“å‰æ ¼å¼åŒ–çŠ¶æ€</span>
          <span class="hljs-title function_">updateFormattingStates</span>();
        } <span class="hljs-keyword">else</span> {
          <span class="hljs-comment">// é€‰æ‹©ä¸åœ¨ç¼–è¾‘å™¨å†…ï¼Œéšè—å·¥å…·æ </span>
          <span class="hljs-title function_">setSelection</span>(<span class="hljs-literal">null</span>);
        }
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-comment">// æ²¡æœ‰é€‰ä¸­æ–‡æœ¬ï¼Œéšè—å·¥å…·æ </span>
        <span class="hljs-title function_">setSelection</span>(<span class="hljs-literal">null</span>);
      }
    };

    <span class="hljs-comment">/**
     * å¤„ç†é¼ æ ‡æŒ‰ä¸‹äº‹ä»¶
     */</span>
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleMouseDown</span> = (<span class="hljs-params">e</span>) =&gt; {
      <span class="hljs-comment">// æ£€æŸ¥ç‚¹å‡»æ˜¯å¦å‘ç”Ÿåœ¨å·¥å…·æ åŒºåŸŸå†…</span>
      <span class="hljs-keyword">if</span> (toolbarRef.<span class="hljs-property">current</span> &amp;&amp; toolbarRef.<span class="hljs-property">current</span>.<span class="hljs-title function_">contains</span>(e.<span class="hljs-property">target</span>)) {
        isInToolbarRef.<span class="hljs-property">current</span> = <span class="hljs-literal">true</span>;
      } <span class="hljs-keyword">else</span> {
        isInToolbarRef.<span class="hljs-property">current</span> = <span class="hljs-literal">false</span>;
      }
    };

    <span class="hljs-comment">/**
     * å¤„ç†é¼ æ ‡æŠ¬èµ·äº‹ä»¶
     */</span>
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleMouseUp</span> = (<span class="hljs-params"/>) =&gt; {
      <span class="hljs-comment">// å»¶è¿Ÿæ‰§è¡Œï¼Œç¡®ä¿æµè§ˆå™¨å·²å®Œæˆé€‰æ‹©æ“ä½œ</span>
      <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
        <span class="hljs-keyword">if</span> (!isInToolbarRef.<span class="hljs-property">current</span>) {
          <span class="hljs-title function_">handleSelectionChange</span>();
        }
      }, <span class="hljs-number">100</span>);
    };

    <span class="hljs-comment">/**
     * å¤„ç†ç‚¹å‡»å¤–éƒ¨äº‹ä»¶
     */</span>
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleClickOutside</span> = (<span class="hljs-params">e</span>) =&gt; {
      <span class="hljs-keyword">if</span> (toolbarRef.<span class="hljs-property">current</span> &amp;&amp; !toolbarRef.<span class="hljs-property">current</span>.<span class="hljs-title function_">contains</span>(e.<span class="hljs-property">target</span>)) {
        <span class="hljs-keyword">const</span> targetElement = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(target);
        <span class="hljs-keyword">if</span> (targetElement &amp;&amp; !targetElement.<span class="hljs-title function_">contains</span>(e.<span class="hljs-property">target</span>)) {
          <span class="hljs-title function_">setSelection</span>(<span class="hljs-literal">null</span>);
        }
      }
    };

    <span class="hljs-comment">// æ·»åŠ äº‹ä»¶ç›‘å¬å™¨</span>
    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"selectionchange"</span>, handleSelectionChange);
    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"mousedown"</span>, handleMouseDown);
    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"mouseup"</span>, handleMouseUp);
    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"mousedown"</span>, handleClickOutside);

    <span class="hljs-comment">// æ¸…ç†å‡½æ•°ï¼šç»„ä»¶å¸è½½æ—¶ç§»é™¤äº‹ä»¶ç›‘å¬å™¨</span>
    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">"selectionchange"</span>, handleSelectionChange);
      <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">"mousedown"</span>, handleMouseDown);
      <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">"mouseup"</span>, handleMouseUp);
      <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">"mousedown"</span>, handleClickOutside);
    };
  }, [target, getBoldState]);

  <span class="hljs-comment">// è®¾ç½®å­—ä½“å¤§å°</span>
  <span class="hljs-keyword">const</span> setFontSizeCommand = <span class="hljs-title function_">useCallback</span>(<span class="hljs-function">(<span class="hljs-params">sizeValue, range</span>) =&gt;</span> {
    <span class="hljs-keyword">if</span> (!range) <span class="hljs-keyword">return</span>;

    <span class="hljs-keyword">const</span> selection = <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">getSelection</span>();
    selection.<span class="hljs-title function_">removeAllRanges</span>();
    selection.<span class="hljs-title function_">addRange</span>(range);

    <span class="hljs-keyword">const</span> newRange = selection.<span class="hljs-title function_">getRangeAt</span>(<span class="hljs-number">0</span>);
    <span class="hljs-keyword">const</span> span = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">"span"</span>);

    <span class="hljs-keyword">const</span> sizeMap = {
      <span class="hljs-string">"1"</span>: <span class="hljs-string">"12px"</span>,
      <span class="hljs-string">"2"</span>: <span class="hljs-string">"14px"</span>,
      <span class="hljs-string">"3"</span>: <span class="hljs-string">"16px"</span>,
      <span class="hljs-string">"4"</span>: <span class="hljs-string">"18px"</span>,
      <span class="hljs-string">"5"</span>: <span class="hljs-string">"24px"</span>,
      <span class="hljs-string">"6"</span>: <span class="hljs-string">"32px"</span>,
      <span class="hljs-string">"7"</span>: <span class="hljs-string">"48px"</span>,
    };

    span.<span class="hljs-property">style</span>.<span class="hljs-property">fontSize</span> = sizeMap[sizeValue] || <span class="hljs-string">"16px"</span>;

    <span class="hljs-keyword">try</span> {
      <span class="hljs-comment">// æ£€æŸ¥é€‰æ‹©èŒƒå›´æ˜¯å¦å·²æŠ˜å ï¼ˆå³æ²¡æœ‰é€‰ä¸­æ–‡æœ¬ï¼Œåªæœ‰ä¸€ä¸ªå…‰æ ‡ä½ç½®ï¼‰</span>
      <span class="hljs-comment">// å¦‚æœæ˜¯æŠ˜å çŠ¶æ€ï¼Œä¸æ‰§è¡Œå­—ä½“å¤§å°è®¾ç½®æ“ä½œ</span>
      <span class="hljs-keyword">if</span> (newRange.<span class="hljs-property">collapsed</span>) <span class="hljs-keyword">return</span>;

      <span class="hljs-keyword">const</span> clonedRange = newRange.<span class="hljs-title function_">cloneRange</span>();
      <span class="hljs-keyword">const</span> fragment = clonedRange.<span class="hljs-title function_">extractContents</span>();
      span.<span class="hljs-title function_">appendChild</span>(fragment);
      clonedRange.<span class="hljs-title function_">insertNode</span>(span);

      <span class="hljs-comment">// æ¸…é™¤å½“å‰é€‰æ‹©ï¼Œç„¶åé‡æ–°é€‰ä¸­åˆšåˆšæ’å…¥çš„spanå…ƒç´ å†…å®¹</span>
      <span class="hljs-comment">// è¿™æ ·ç”¨æˆ·å¯ä»¥ç»§ç»­å¯¹åŒä¸€æ®µæ–‡æœ¬è¿›è¡Œå…¶ä»–æ“ä½œ</span>
      selection.<span class="hljs-title function_">removeAllRanges</span>();
      <span class="hljs-keyword">const</span> newSelectionRange = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createRange</span>();
      newSelectionRange.<span class="hljs-title function_">selectNodeContents</span>(span);
      selection.<span class="hljs-title function_">addRange</span>(newSelectionRange);
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"è®¾ç½®å­—ä½“å¤§å°å¤±è´¥:"</span>, error);
    }

    <span class="hljs-comment">// æ›´æ–°çŠ¶æ€</span>
    <span class="hljs-title function_">setFontSize</span>(sizeValue);
  }, []);

  <span class="hljs-comment">// è®¾ç½®æ–‡æœ¬é¢œè‰²</span>
  <span class="hljs-keyword">const</span> setTextColor = <span class="hljs-title function_">useCallback</span>(<span class="hljs-function">(<span class="hljs-params">colorValue, range</span>) =&gt;</span> {
    <span class="hljs-keyword">if</span> (!range) <span class="hljs-keyword">return</span>;

    <span class="hljs-keyword">const</span> selection = <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">getSelection</span>();
    selection.<span class="hljs-title function_">removeAllRanges</span>();
    selection.<span class="hljs-title function_">addRange</span>(range);

    <span class="hljs-keyword">const</span> newRange = selection.<span class="hljs-title function_">getRangeAt</span>(<span class="hljs-number">0</span>);
    <span class="hljs-keyword">const</span> span = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">"span"</span>);

    span.<span class="hljs-property">style</span>.<span class="hljs-property">color</span> = colorValue;

    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">if</span> (newRange.<span class="hljs-property">collapsed</span>) <span class="hljs-keyword">return</span>;

      <span class="hljs-keyword">const</span> clonedRange = newRange.<span class="hljs-title function_">cloneRange</span>();
      <span class="hljs-keyword">const</span> fragment = clonedRange.<span class="hljs-title function_">extractContents</span>();
      span.<span class="hljs-title function_">appendChild</span>(fragment);
      clonedRange.<span class="hljs-title function_">insertNode</span>(span);

      selection.<span class="hljs-title function_">removeAllRanges</span>();
      <span class="hljs-keyword">const</span> newSelectionRange = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createRange</span>();
      newSelectionRange.<span class="hljs-title function_">selectNodeContents</span>(span);
      selection.<span class="hljs-title function_">addRange</span>(newSelectionRange);
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"è®¾ç½®é¢œè‰²å¤±è´¥:"</span>, error);
    }

    <span class="hljs-title function_">setColor</span>(colorValue);
  }, []);

  <span class="hljs-comment">// å¤„ç†åŠ ç²—æ“ä½œ</span>
  <span class="hljs-keyword">const</span> handleBoldClick = <span class="hljs-title function_">useCallback</span>(<span class="hljs-function">(<span class="hljs-params">range</span>) =&gt;</span> {
    <span class="hljs-keyword">if</span> (!range) <span class="hljs-keyword">return</span>;

    <span class="hljs-comment">// æ‰§è¡ŒåŠ ç²—å‘½ä»¤</span>
    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">execCommand</span>(<span class="hljs-string">"bold"</span>, <span class="hljs-literal">false</span>, <span class="hljs-literal">null</span>);

    <span class="hljs-title function_">updateFormattingStates</span>();
  }, [updateFormattingStates]);

  <span class="hljs-comment">// å¤„ç†æ–œä½“æ“ä½œ</span>
  <span class="hljs-keyword">const</span> handleItalicClick = <span class="hljs-title function_">useCallback</span>(<span class="hljs-function">(<span class="hljs-params">range</span>) =&gt;</span> {
    <span class="hljs-keyword">if</span> (!range) <span class="hljs-keyword">return</span>;

    <span class="hljs-comment">// æ‰§è¡Œæ–œä½“å‘½ä»¤</span>
    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">execCommand</span>(<span class="hljs-string">"italic"</span>, <span class="hljs-literal">false</span>, <span class="hljs-literal">null</span>);

    <span class="hljs-comment">// æ¢å¤é€‰æ‹©èŒƒå›´å¹¶æ›´æ–°çŠ¶æ€</span>
    <span class="hljs-title function_">updateFormattingStates</span>();
  }, [updateFormattingStates]);

  <span class="hljs-comment">// å¤„ç†ä¸‹åˆ’çº¿æ“ä½œ</span>
  <span class="hljs-keyword">const</span> handleUnderlineClick = <span class="hljs-title function_">useCallback</span>(<span class="hljs-function">(<span class="hljs-params">range</span>) =&gt;</span> {
    <span class="hljs-keyword">if</span> (!range) <span class="hljs-keyword">return</span>;

    <span class="hljs-comment">// æ‰§è¡Œä¸‹åˆ’çº¿å‘½ä»¤</span>
    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">execCommand</span>(<span class="hljs-string">"underline"</span>, <span class="hljs-literal">false</span>, <span class="hljs-literal">null</span>);

    <span class="hljs-comment">// æ›´æ–°çŠ¶æ€</span>
    <span class="hljs-title function_">updateFormattingStates</span>();
  }, [updateFormattingStates]);

  <span class="hljs-comment">// å¤„ç†å­—å·å˜åŒ–</span>
  <span class="hljs-keyword">const</span> handleFontSizeChange = <span class="hljs-title function_">useCallback</span>(<span class="hljs-function">(<span class="hljs-params">sizeValue, range</span>) =&gt;</span> {
    <span class="hljs-keyword">if</span> (!range) <span class="hljs-keyword">return</span>;

    <span class="hljs-title function_">setFontSizeCommand</span>(sizeValue, range);
    <span class="hljs-title function_">updateFormattingStates</span>();
  }, [setFontSizeCommand, updateFormattingStates]);

  <span class="hljs-keyword">return</span> {
    selection,
    toolbarRef,
    isBoldActive,
    handleBoldClick,
  };
};
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[esp32 å°æ™ºAI é¡¹ç›®]]></title>    <link>https://juejin.cn/post/7588001624904892435</link>    <guid>https://juejin.cn/post/7588001624904892435</guid>    <pubDate>2025-12-26T13:16:27.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588001624904892435" data-draft-id="7588001624904859667" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="esp32 å°æ™ºAI é¡¹ç›®"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-26T13:16:27.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å‰ç«¯è€çˆ·æ¨è½¦"/> <meta itemprop="url" content="https://juejin.cn/user/2189882895381079"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            esp32 å°æ™ºAI é¡¹ç›®
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2189882895381079/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å‰ç«¯è€çˆ·æ¨è½¦
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-26T13:16:27.000Z" title="Fri Dec 26 2025 13:16:27 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»13åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>#ä¸€ã€æ¥å…¥ MAX98357
MAX98357 æ˜¯ä¸€æ¬¾éå¸¸æµè¡Œçš„Â <strong>I2S æ•°å­—éŸ³é¢‘æ”¾å¤§å™¨æ¨¡å—</strong>ï¼Œä¸ ESP32 æ­é…æ˜¯åˆ¶ä½œæ•°å­—éŸ³é¢‘é¡¹ç›®çš„ç»å…¸ç»„åˆã€‚æ§åˆ¶å®ƒçš„æ ¸å¿ƒåœ¨äºï¼š<strong>æ­£ç¡®é…ç½® ESP32 çš„ I2S éŸ³é¢‘æ¥å£ï¼Œå¹¶å‘å…¶å‘é€æ•°å­—éŸ³é¢‘æ•°æ®</strong>ã€‚ä¸ºäº†æ–¹ä¾¿ä½ ç†è§£ä»ä»£ç åˆ°å£°éŸ³çš„å®Œæ•´æµç¨‹ï¼Œä¸‹å›¾æ¸…æ™°åœ°å±•ç¤ºäº†æ§åˆ¶ MAX98357 çš„æ ¸å¿ƒå·¥ä½œæµï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b48e65f9bc65437090fcbcac182f893b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv6ICB54i35o6o6L2m:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767359787&amp;x-signature=h%2F25JA8UEjvSv3APRo2ddSe%2BdAo%3D" alt="image.png" loading="lazy"/></p>
<h4 data-id="heading-0">ğŸ”Œ ç¡¬ä»¶è¿æ¥ï¼ˆæ¥çº¿ï¼‰</h4>
<p>è¿æ¥éå¸¸ç®€å•ï¼Œå› ä¸º MAX98357 ä½¿ç”¨æ ‡å‡†çš„ I2S æ¥å£ï¼š</p>













































<table><thead><tr><th>ESP32 å¼•è„š</th><th>MAX98357 å¼•è„š</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td><strong>3.3V</strong></td><td><strong>VIN</strong></td><td>ç”µæºï¼ˆ3.3V-5Vå‡å¯ï¼Œä¸ESP32å…±ç”¨3.3Væœ€æ–¹ä¾¿ï¼‰</td></tr><tr><td><strong>GND</strong></td><td><strong>GND</strong></td><td>æ¥åœ°ï¼ˆå¿…é¡»å…±åœ°ï¼‰</td></tr><tr><td><strong>GPIO 25 (æˆ–å…¶å®ƒ)</strong></td><td><strong>DIN</strong></td><td><strong>ä¸²è¡Œæ•°æ®è¾“å…¥</strong>ï¼Œè¿™æ˜¯æœ€é‡è¦çš„æ•°æ®çº¿ã€‚</td></tr><tr><td><strong>GPIO 26 (æˆ–å…¶å®ƒ)</strong></td><td><strong>BCLK</strong></td><td><strong>ä½æ—¶é’Ÿ</strong>ï¼Œç”¨äºåŒæ­¥æ¯ä¸€ä½æ•°æ®ã€‚</td></tr><tr><td><strong>GPIO 27 (æˆ–å…¶å®ƒ)</strong></td><td><strong>LRC</strong></td><td><strong>å·¦å³å£°é“æ—¶é’Ÿ</strong>ï¼Œç”¨äºåˆ‡æ¢å·¦å³å£°é“ã€‚</td></tr><tr><td>ï¼ˆå¯é€‰ï¼‰GPIOï¼ˆå¦‚15ï¼‰</td><td><strong>GAIN</strong></td><td>å¢ç›Šæ§åˆ¶ã€‚<strong>ä¸æ¥æ—¶é»˜è®¤ä¸ºé«˜å¢ç›Šï¼ˆ15dBï¼‰</strong> ã€‚å¦‚éœ€ä½å¢ç›Šï¼ˆ9dBï¼‰ï¼Œå°†æ­¤è„šæ¥åœ°ã€‚</td></tr><tr><td>ï¼ˆä¸è¿æ¥ï¼‰</td><td><strong>SD</strong></td><td>å…³æ–­å¼•è„šï¼ŒMAX98357 å†…éƒ¨å·²ä¸‹æ‹‰ï¼Œæ­£å¸¸å·¥ä½œæ—¶æ— éœ€è¿æ¥ã€‚</td></tr></tbody></table>
<blockquote>
<p><strong>å¼•è„šé€‰æ‹©æç¤º</strong>ï¼šESP32 æœ‰å¤šä¸ª I2S å¼•è„šï¼Œä½ å¯ä»¥ä½¿ç”¨ä¸Šè¡¨çš„å¼•è„šï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å…¶ä»–æ”¯æŒ I2S çš„å¼•è„šï¼ˆå¦‚ GPIO 5, 17, 18, 19, 21, 22, 23 ç­‰ï¼‰ï¼Œåªè¦åœ¨ä»£ç ä¸­ç»Ÿä¸€å³å¯ã€‚</p>
</blockquote>
<h4 data-id="heading-1">ğŸ› ï¸ è½¯ä»¶é…ç½®ä¸ç¼–ç¨‹ï¼ˆPlatformIOï¼‰</h4>
<p>åœ¨ PlatformIO é¡¹ç›®ä¸­ï¼Œæœ€ä¾¿æ·çš„æ–¹æ³•æ˜¯ä½¿ç”¨ä¸€ä¸ªä¼˜ç§€çš„éŸ³é¢‘åº“ï¼š<strong><code>AudioTools</code></strong>ã€‚</p>
<ol>
<li><strong>å®‰è£…åº“</strong>ï¼š<br/>
åœ¨ PlatformIO çš„ â€œLibrary Managerâ€ ä¸­æœç´¢Â <strong><code>AudioTools by pschatzmann</code></strong>Â å¹¶å®‰è£…ã€‚è¿™ä¸ªåº“å‡ ä¹å›Šæ‹¬äº†æ‰€æœ‰éŸ³é¢‘åŠŸèƒ½ï¼Œéå¸¸é€‚åˆå…¥é—¨ã€‚</li>
<li><strong>ç¼–å†™åŸºç¡€ç¨‹åº</strong>ï¼š<br/>
ä»¥ä¸‹ä»£ç æ¼”ç¤ºå¦‚ä½•æ’­æ”¾ä¸€ä¸ªç®€å•çš„Â <strong>440Hz æ­£å¼¦æ³¢ï¼ˆæ ‡å‡†éŸ³Aï¼‰</strong> ï¼Œè¿™æ˜¯æµ‹è¯•éŸ³é¢‘ç³»ç»Ÿçš„â€œHello Worldâ€ã€‚</li>
</ol>
<p>cpp</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-comment">/**
 * ESP32 + MAX98357 åŸºç¡€æµ‹è¯•
 * æ’­æ”¾ä¸€ä¸ª440Hzçš„æ­£å¼¦æ³¢
 */</span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;Arduino.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">"AudioTools.h"</span></span>

<span class="hljs-comment">// 1. å®šä¹‰I2Sè¾“å‡ºæ¥å£ï¼Œå¹¶æŒ‡å®šå¼•è„š</span>
<span class="hljs-comment">// å‚æ•°è§£é‡Šï¼šI2SStream(int data_pin, int clock_pin, int lr_pin)</span>
I2SStream i2s;
<span class="hljs-type">const</span> <span class="hljs-type">int</span> data_pin = <span class="hljs-number">25</span>;  <span class="hljs-comment">// DIN è¿æ¥çš„GPIO</span>
<span class="hljs-type">const</span> <span class="hljs-type">int</span> clock_pin = <span class="hljs-number">26</span>; <span class="hljs-comment">// BCLK è¿æ¥çš„GPIO</span>
<span class="hljs-type">const</span> <span class="hljs-type">int</span> lr_pin = <span class="hljs-number">27</span>;    <span class="hljs-comment">// LRC è¿æ¥çš„GPIO</span>

<span class="hljs-comment">// 2. å®šä¹‰éŸ³é¢‘ä¿¡å·æºï¼šä¸€ä¸ª440Hzçš„æ­£å¼¦æ³¢</span>
<span class="hljs-function">SineWaveGenerator&lt;<span class="hljs-type">int16_t</span>&gt; <span class="hljs-title">sineWave</span><span class="hljs-params">(<span class="hljs-number">32000</span>)</span></span>; <span class="hljs-comment">// ç”Ÿæˆ16ä½æœ‰ç¬¦å·æ•´æ•°æ ¼å¼çš„æ­£å¼¦æ³¢ï¼ŒæŒ¯å¹…32000</span>
<span class="hljs-function">GeneratedSoundStream&lt;<span class="hljs-type">int16_t</span>&gt; <span class="hljs-title">sound</span><span class="hljs-params">(sineWave)</span></span>; <span class="hljs-comment">// å°†æ­£å¼¦æ³¢åŒ…è£…æˆéŸ³é¢‘æµ</span>
<span class="hljs-function">StreamCopy <span class="hljs-title">copier</span><span class="hljs-params">(i2s, sound)</span></span>; <span class="hljs-comment">// éŸ³é¢‘æ•°æ®å¤åˆ¶å™¨ï¼šå°†å£°éŸ³æºçš„æ•°æ®å¤åˆ¶åˆ°I2Sè¾“å‡º</span>

<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">setup</span><span class="hljs-params">()</span> </span>{
  <span class="hljs-built_in">Serial</span>.<span class="hljs-built_in">begin</span>(<span class="hljs-number">115200</span>);
  
  <span class="hljs-comment">// 3. é…ç½®I2SéŸ³é¢‘å‚æ•°</span>
  <span class="hljs-keyword">auto</span> config = i2s.<span class="hljs-built_in">defaultConfig</span>();
  config.pin_data = data_pin;
  config.pin_bck = clock_pin;
  config.pin_ws = lr_pin;
  config.sample_rate = <span class="hljs-number">44100</span>; <span class="hljs-comment">// æ ‡å‡†é‡‡æ ·ç‡</span>
  config.bits_per_sample = <span class="hljs-number">16</span>; <span class="hljs-comment">// 16ä½é‡‡æ ·æ·±åº¦</span>
  config.channels = <span class="hljs-number">2</span>; <span class="hljs-comment">// ç«‹ä½“å£°</span>
  config.i2s_format = I2S_STD_FORMAT; <span class="hljs-comment">// æ ‡å‡†I2Sæ ¼å¼</span>
  
  <span class="hljs-comment">// 4. åˆå§‹åŒ–I2S</span>
  i2s.<span class="hljs-built_in">begin</span>(config);
  
  <span class="hljs-comment">// 5. é…ç½®æ­£å¼¦æ³¢å‚æ•°ï¼š440Hzï¼Œé‡‡æ ·ç‡ä¸I2Sä¸€è‡´</span>
  sineWave.<span class="hljs-built_in">begin</span>(config.channels, config.sample_rate, <span class="hljs-number">440</span>);
  
  <span class="hljs-built_in">Serial</span>.<span class="hljs-built_in">println</span>(<span class="hljs-string">"å¼€å§‹æ’­æ”¾ 440Hz æ­£å¼¦æ³¢ï¼ˆæ ‡å‡†éŸ³Aï¼‰..."</span>);
}

<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">loop</span><span class="hljs-params">()</span> </span>{
  <span class="hljs-comment">// ä¸æ–­å°†ç”Ÿæˆçš„éŸ³é¢‘æ•°æ®å¤åˆ¶åˆ°I2Sæ¥å£</span>
  copier.<span class="hljs-built_in">copy</span>();
}
</code></pre>
<h4 data-id="heading-2">ğŸµ æ’­æ”¾å®é™…éŸ³é¢‘æ–‡ä»¶ï¼ˆå¦‚WAVï¼‰</h4>
<p>è¦æ’­æ”¾SDå¡æˆ–SPIFFSä¸­çš„éŸ³é¢‘æ–‡ä»¶ï¼Œä½ éœ€è¦ï¼š</p>
<ol>
<li><strong>å®‰è£…é¢å¤–åº“</strong>ï¼šåœ¨ PlatformIO ä¸­å®‰è£…Â <strong><code>AudioCodecs by pschatzmann</code></strong>ã€‚</li>
<li><strong>å‡†å¤‡éŸ³é¢‘æ–‡ä»¶</strong>ï¼šå°†å…¶è½¬æ¢ä¸ºÂ <strong>å•å£°é“æˆ–ç«‹ä½“å£°ã€16ä½ã€é‡‡æ ·ç‡ä¸è¶…è¿‡44100Hzçš„WAVæ–‡ä»¶</strong>ï¼Œå¹¶ä¸Šä¼ åˆ°ESP32çš„SPIFFSæˆ–SDå¡ä¸­ã€‚</li>
</ol>
<p>ä»¥ä¸‹æ˜¯æ’­æ”¾SPIFFSä¸­<code>test.wav</code>æ–‡ä»¶çš„ç¤ºä¾‹ä»£ç æ¡†æ¶ï¼š</p>
<p>cpp</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;Arduino.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">"AudioTools.h"</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">"AudioLibs/AudioSourceSPIFFS.h"</span> <span class="hljs-comment">// SPIFFSéŸ³é¢‘æº</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">"AudioCodecs/CodecWAV.h"</span> <span class="hljs-comment">// WAVè§£ç å™¨</span></span>

I2SStream i2s;
SPIFFSStream file; <span class="hljs-comment">// SPIFFSæ–‡ä»¶æµ</span>
WAVDecoder dec; <span class="hljs-comment">// WAVè§£ç å™¨</span>
<span class="hljs-function">EncodedAudioStream <span class="hljs-title">decoder</span><span class="hljs-params">(&amp;i2s, &amp;dec)</span></span>; <span class="hljs-comment">// è§£ç åçš„éŸ³é¢‘æµæŒ‡å‘I2S</span>
<span class="hljs-function">StreamCopy <span class="hljs-title">copier</span><span class="hljs-params">(decoder, file)</span></span>; <span class="hljs-comment">// å°†æ–‡ä»¶-&gt;è§£ç -&gt;I2S</span>

<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">setup</span><span class="hljs-params">()</span> </span>{
  <span class="hljs-built_in">Serial</span>.<span class="hljs-built_in">begin</span>(<span class="hljs-number">115200</span>);
  
  <span class="hljs-comment">// åˆå§‹åŒ–æ–‡ä»¶ç³»ç»Ÿï¼ˆéœ€è¦å…ˆé€šè¿‡PlatformIOçš„â€œUpload Filesystem Imageâ€ä¸Šä¼ æ–‡ä»¶ï¼‰</span>
  <span class="hljs-keyword">if</span> (!SPIFFS.<span class="hljs-built_in">begin</span>()) {
    <span class="hljs-built_in">Serial</span>.<span class="hljs-built_in">println</span>(<span class="hljs-string">"SPIFFSåˆå§‹åŒ–å¤±è´¥ï¼"</span>);
    <span class="hljs-keyword">while</span>(<span class="hljs-number">1</span>);
  }

  <span class="hljs-comment">// é…ç½®I2Sï¼ˆåŒä¸Šä¾‹ï¼Œçœç•¥ï¼‰</span>
  <span class="hljs-keyword">auto</span> i2sConfig = i2s.<span class="hljs-built_in">defaultConfig</span>();
  i2sConfig.pin_data = <span class="hljs-number">25</span>;
  <span class="hljs-comment">// ... å…¶ä»–é…ç½®</span>
  i2s.<span class="hljs-built_in">begin</span>(i2sConfig);

  <span class="hljs-comment">// é…ç½®éŸ³é¢‘æµ</span>
  file.<span class="hljs-built_in">begin</span>(<span class="hljs-string">"/test.wav"</span>); <span class="hljs-comment">// æ‰“å¼€æ–‡ä»¶</span>
  decoder.<span class="hljs-built_in">begin</span>(); <span class="hljs-comment">// å¼€å§‹è§£ç </span>

  <span class="hljs-built_in">Serial</span>.<span class="hljs-built_in">println</span>(<span class="hljs-string">"å¼€å§‹æ’­æ”¾WAVæ–‡ä»¶..."</span>);
}

<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">loop</span><span class="hljs-params">()</span> </span>{
  <span class="hljs-keyword">if</span> (copier.<span class="hljs-built_in">copy</span>()) {
    <span class="hljs-comment">// æ­£å¸¸æ’­æ”¾ä¸­</span>
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-built_in">Serial</span>.<span class="hljs-built_in">println</span>(<span class="hljs-string">"æ’­æ”¾ç»“æŸæˆ–å‡ºé”™"</span>);
    <span class="hljs-built_in">delay</span>(<span class="hljs-number">2000</span>);
    <span class="hljs-comment">// å¯åœ¨æ­¤å¾ªç¯æ’­æ”¾æˆ–æ’­æ”¾ä¸‹ä¸€é¦–</span>
  }
}
</code></pre>
<h4 data-id="heading-3">ğŸ”„ ä¸ä¹‹å‰çš„ST7789å±å¹•é¡¹ç›®ç»“åˆ</h4>
<p>ä½ å¯ä»¥è½»æ¾åœ°å°†éŸ³é¢‘æ§åˆ¶å’Œå±å¹•æ˜¾ç¤ºç»“åˆåœ¨ä¸€ä¸ªESP32é¡¹ç›®ä¸­ï¼Œå› ä¸ºä¸¤è€…ä½¿ç”¨ä¸åŒçš„ç¡¬ä»¶æ¥å£ï¼ˆI2S vs. SPIï¼‰ä¸”åº“ä¸å†²çªã€‚ä¾‹å¦‚ï¼Œåœ¨å±å¹•ä¸Šæ˜¾ç¤ºå½“å‰æ’­æ”¾çš„æ­Œæ›²åã€éŸ³é‡æˆ–éŸ³é¢‘é¢‘è°±ã€‚åªéœ€å°†ä¸¤éƒ¨åˆ†çš„<code>setup()</code>å’Œ<code>loop()</code>é€»è¾‘åˆç†æ•´åˆå³å¯ã€‚</p>
<h2 data-id="heading-4">æ¥å…¥ SDå¡</h2>
<p>åŸºäºæˆ‘ä»¬ä¹‹å‰çš„è®¨è®ºï¼Œä»¥ä¸‹æ˜¯ä½¿ç”¨Â <strong>ESP32 é€šè¿‡ SD å¡è¯»å–å¹¶æ’­æ”¾ WAV éŸ³é¢‘æ–‡ä»¶</strong>Â çš„å®Œæ•´å®ç°æ–¹æ¡ˆã€‚è¿™æ¶µç›–äº†ç¡¬ä»¶è¿æ¥ã€PlatformIO é…ç½®å’Œå¯è¿è¡Œçš„ä»£ç ã€‚</p>
<h4 data-id="heading-5">ğŸ“ å®Œæ•´é¡¹ç›®å®ç°æŒ‡å—</h4>
<h5 data-id="heading-6">1. ç¡¬ä»¶è¿æ¥ (ESP32 + SDå¡æ¨¡å— + MAX98357)</h5>
<p>è¯·ç¡®ä¿ä½ çš„ç¡¬ä»¶æŒ‰æ­¤è¿æ¥ã€‚<strong>ç”µæºç¨³å®šæ˜¯å…³é”®</strong>ï¼Œå»ºè®®ä½¿ç”¨å¤–éƒ¨5Vç”µæºä¸ºéŸ³é¢‘éƒ¨åˆ†ç‹¬ç«‹ä¾›ç”µï¼Œå¹¶ä¸ESP32å…±åœ°ã€‚</p>























































<table><thead><tr><th>ESP32 GPIO å¼•è„š</th><th>SD å¡æ¨¡å—å¼•è„š</th><th>MAX98357 æ¨¡å—å¼•è„š</th></tr></thead><tbody><tr><td><strong>3.3V</strong></td><td>VCC</td><td>VIN (å¯å•ç‹¬ä¾›ç”µ)</td></tr><tr><td><strong>GND</strong></td><td>GND</td><td>GND (<strong>å¿…é¡»å…±åœ°</strong>)</td></tr><tr><td><strong>GPIO 23</strong></td><td>MOSI</td><td>--</td></tr><tr><td><strong>GPIO 19</strong></td><td>MISO</td><td>--</td></tr><tr><td><strong>GPIO 18</strong></td><td>SCK</td><td>--</td></tr><tr><td><strong>GPIO 5</strong>Â (ç¤ºä¾‹)</td><td>CS (ç‰‡é€‰)</td><td>--</td></tr><tr><td><strong>GPIO 25</strong></td><td>--</td><td>DIN</td></tr><tr><td><strong>GPIO 26</strong></td><td>--</td><td>BCLK</td></tr><tr><td><strong>GPIO 27</strong></td><td>--</td><td>LRC</td></tr></tbody></table>
<h5 data-id="heading-7">2. PlatformIO é¡¹ç›®é…ç½® (<code>platformio.ini</code>)</h5>
<p>åˆ›å»ºæˆ–ä¿®æ”¹é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„Â <code>platformio.ini</code>Â æ–‡ä»¶ã€‚</p>
<p>ini</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-section">[env:esp32-dev]</span>
<span class="hljs-attr">platform</span> = espressif32
<span class="hljs-attr">board</span> = esp32dev
<span class="hljs-attr">framework</span> = ardui<span class="hljs-literal">no</span>
<span class="hljs-attr">monitor_speed</span> = <span class="hljs-number">115200</span>

<span class="hljs-comment">; æ ¸å¿ƒä¾èµ–åº“</span>
<span class="hljs-attr">lib_deps</span> = 
    pschatzmann/ESP32-AudioTools @ ^1.0.8  <span class="hljs-comment"># ä¸»éŸ³é¢‘åº“</span>
    pschatzmann/arduino-audio-tools @ ^1.1.9
    pschatzmann/arduino-audiocodecs @ ^1.0.6 <span class="hljs-comment"># WAVè§£ç å™¨</span>
    <span class="hljs-comment">; SDå¡åº“å·²åŒ…å«åœ¨æ¡†æ¶ä¸­</span>

<span class="hljs-comment">; ä¼˜åŒ–æ„å»º</span>
<span class="hljs-attr">board_build.flash_mode</span> = dio
<span class="hljs-attr">build_flags</span> = 
    -Wl,-Teagle.flash.4m32m.ld
</code></pre>
<h5 data-id="heading-8">3. ä¸»ç¨‹åºä»£ç  (<code>src/main.cpp</code>)</h5>
<p>å°†ä»¥ä¸‹ä»£ç å¤åˆ¶åˆ°Â <code>src/main.cpp</code>Â ä¸­ï¼Œå¹¶æ ¹æ®ä½ çš„å¼•è„šå®šä¹‰è¿›è¡Œä¿®æ”¹ã€‚</p>
<p>cpp</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-comment">/**
 * ESP32 SDå¡ WAVéŸ³é¢‘æ’­æ”¾å™¨
 * ä¾èµ–ï¼šAudioToolsåº“
 */</span>

<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;Arduino.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">"AudioTools.h"</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">"AudioLibs/AudioSourceSD.h"</span> <span class="hljs-comment">// SDå¡éŸ³é¢‘æº</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">"AudioCodecs/CodecWAV.h"</span>    <span class="hljs-comment">// WAVè§£ç å™¨</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;SD.h&gt;</span>                      <span class="hljs-comment">// SDå¡é©±åŠ¨</span></span>

<span class="hljs-comment">// ==================== ç”¨æˆ·é…ç½®åŒºåŸŸ ====================</span>
<span class="hljs-comment">// 1. SDå¡å¼•è„šé…ç½®ï¼ˆæ ¹æ®å®é™…æ¥çº¿ä¿®æ”¹ï¼ï¼‰</span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> SD_CS_PIN    5   <span class="hljs-comment">// SDå¡æ¨¡å—çš„ç‰‡é€‰å¼•è„š</span></span>

<span class="hljs-comment">// 2. I2Så¼•è„šé…ç½®ï¼ˆæ ¹æ®å®é™…æ¥çº¿ä¿®æ”¹ï¼ï¼‰</span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> I2S_DIN_PIN  25  <span class="hljs-comment">// MAX98357çš„DIN</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> I2S_BCLK_PIN 26  <span class="hljs-comment">// MAX98357çš„BCLK</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> I2S_LRC_PIN  27  <span class="hljs-comment">// MAX98357çš„LRC</span></span>

<span class="hljs-comment">// 3. éŸ³é¢‘æ–‡ä»¶è®¾ç½®</span>
<span class="hljs-type">const</span> <span class="hljs-type">char</span>* audioFilePath = <span class="hljs-string">"/test.wav"</span>; <span class="hljs-comment">// æ”¾åœ¨SDå¡æ ¹ç›®å½•çš„æµ‹è¯•æ–‡ä»¶</span>
<span class="hljs-comment">// ====================================================</span>

<span class="hljs-comment">// åˆ›å»ºéŸ³é¢‘å¯¹è±¡</span>
I2SStream i2s;                 <span class="hljs-comment">// I2Sè¾“å‡ºæµ</span>
<span class="hljs-function">SDStream <span class="hljs-title">file</span><span class="hljs-params">(SD_CS_PIN)</span></span>;      <span class="hljs-comment">// SDå¡æ–‡ä»¶æµï¼Œä¼ å…¥CSå¼•è„šå·</span>
WAVDecoder dec;                <span class="hljs-comment">// WAVè§£ç å™¨</span>
<span class="hljs-function">EncodedAudioStream <span class="hljs-title">decoder</span><span class="hljs-params">(&amp;i2s, &amp;dec)</span></span>; <span class="hljs-comment">// è§£ç åç®¡é“è¿æ¥åˆ°I2S</span>
<span class="hljs-function">StreamCopy <span class="hljs-title">copier</span><span class="hljs-params">(decoder, file)</span></span>;       <span class="hljs-comment">// è´Ÿè´£æ•°æ®å¤åˆ¶çš„â€œå¼•æ“â€</span>

<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">printAudioInfo</span><span class="hljs-params">(AudioInfo info)</span> </span>{
  <span class="hljs-built_in">Serial</span>.<span class="hljs-built_in">println</span>(<span class="hljs-string">"=== éŸ³é¢‘ä¿¡æ¯ ==="</span>);
  <span class="hljs-built_in">Serial</span>.<span class="hljs-built_in">printf</span>(<span class="hljs-string">"é‡‡æ ·ç‡: %d Hz\n"</span>, info.sample_rate);
  <span class="hljs-built_in">Serial</span>.<span class="hljs-built_in">printf</span>(<span class="hljs-string">"å£°é“æ•°: %d\n"</span>, info.channels);
  <span class="hljs-built_in">Serial</span>.<span class="hljs-built_in">printf</span>(<span class="hljs-string">"ä½æ·±åº¦: %d-bit\n"</span>, info.bits_per_sample);
  <span class="hljs-built_in">Serial</span>.<span class="hljs-built_in">println</span>(<span class="hljs-string">"================"</span>);
}

<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">setup</span><span class="hljs-params">()</span> </span>{
  <span class="hljs-built_in">Serial</span>.<span class="hljs-built_in">begin</span>(<span class="hljs-number">115200</span>);
  <span class="hljs-keyword">while</span> (!<span class="hljs-built_in">Serial</span>); <span class="hljs-comment">// ç­‰å¾…ä¸²å£è¿æ¥ï¼ˆä»…ç”¨äºè°ƒè¯•ï¼‰</span>
  <span class="hljs-built_in">delay</span>(<span class="hljs-number">500</span>);
  <span class="hljs-built_in">Serial</span>.<span class="hljs-built_in">println</span>(<span class="hljs-string">"\n\nESP32 SDå¡éŸ³é¢‘æ’­æ”¾å™¨å¯åŠ¨..."</span>);

  <span class="hljs-comment">// === ç¬¬ä¸€æ­¥ï¼šåˆå§‹åŒ–SDå¡ ===</span>
  <span class="hljs-built_in">Serial</span>.<span class="hljs-built_in">print</span>(<span class="hljs-string">"åˆå§‹åŒ–SDå¡..."</span>);
  <span class="hljs-keyword">if</span> (!<span class="hljs-built_in">SD</span>.<span class="hljs-built_in">begin</span>(SD_CS_PIN)) {
    <span class="hljs-built_in">Serial</span>.<span class="hljs-built_in">println</span>(<span class="hljs-string">"å¤±è´¥ï¼è¯·æ£€æŸ¥ï¼š"</span>);
    <span class="hljs-built_in">Serial</span>.<span class="hljs-built_in">println</span>(<span class="hljs-string">"  1. SDå¡æ˜¯å¦æ’å…¥ï¼Ÿ"</span>);
    <span class="hljs-built_in">Serial</span>.<span class="hljs-built_in">println</span>(<span class="hljs-string">"  2. å¼•è„šè¿æ¥æ˜¯å¦æ­£ç¡®ï¼Ÿ"</span>);
    <span class="hljs-built_in">Serial</span>.<span class="hljs-built_in">println</span>(<span class="hljs-string">"  3. SDå¡æ ¼å¼æ˜¯å¦ä¸ºFAT32ï¼Ÿ"</span>);
    <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) { <span class="hljs-comment">// æŒ‚èµ·</span>
      <span class="hljs-built_in">delay</span>(<span class="hljs-number">100</span>);
    }
  }
  <span class="hljs-built_in">Serial</span>.<span class="hljs-built_in">println</span>(<span class="hljs-string">"æˆåŠŸï¼"</span>);

  <span class="hljs-comment">// å¯é€‰ï¼šåˆ—å‡ºæ ¹ç›®å½•æ–‡ä»¶</span>
  <span class="hljs-built_in">Serial</span>.<span class="hljs-built_in">println</span>(<span class="hljs-string">"SDå¡æ ¹ç›®å½•å†…å®¹ï¼š"</span>);
  <span class="hljs-built_in">File</span> root = <span class="hljs-built_in">SD</span>.<span class="hljs-built_in">open</span>(<span class="hljs-string">"/"</span>);
  <span class="hljs-keyword">while</span> (<span class="hljs-built_in">File</span> entry = root.<span class="hljs-built_in">openNextFile</span>()) {
    <span class="hljs-built_in">Serial</span>.<span class="hljs-built_in">print</span>(<span class="hljs-string">"  "</span>);
    <span class="hljs-built_in">Serial</span>.<span class="hljs-built_in">println</span>(entry.<span class="hljs-built_in">name</span>());
    entry.<span class="hljs-built_in">close</span>();
  }
  root.<span class="hljs-built_in">close</span>();

  <span class="hljs-comment">// === ç¬¬äºŒæ­¥ï¼šé…ç½®å¹¶åˆå§‹åŒ–I2S ===</span>
  <span class="hljs-built_in">Serial</span>.<span class="hljs-built_in">print</span>(<span class="hljs-string">"é…ç½®I2SéŸ³é¢‘æ¥å£..."</span>);
  <span class="hljs-keyword">auto</span> config = i2s.<span class="hljs-built_in">defaultConfig</span>();
  config.pin_data = I2S_DIN_PIN;
  config.pin_bck = I2S_BCLK_PIN;
  config.pin_ws = I2S_LRC_PIN;
  config.sample_rate = <span class="hljs-number">44100</span>; <span class="hljs-comment">// åˆå§‹é‡‡æ ·ç‡ï¼Œè§£ç åä¼šæ ¹æ®æ–‡ä»¶è‡ªåŠ¨è°ƒæ•´</span>
  config.bits_per_sample = <span class="hljs-number">16</span>;
  config.channels = <span class="hljs-number">2</span>;
  config.i2s_format = I2S_STD_FORMAT;
  <span class="hljs-comment">// config.buffer_size = 1024; // è‹¥å‡ºç°çˆ†éŸ³å¯å°è¯•å¢å¤§</span>
  <span class="hljs-comment">// config.buffer_count = 8;</span>

  <span class="hljs-keyword">if</span> (!i2s.<span class="hljs-built_in">begin</span>(config)) {
    <span class="hljs-built_in">Serial</span>.<span class="hljs-built_in">println</span>(<span class="hljs-string">"I2Såˆå§‹åŒ–å¤±è´¥ï¼è¯·æ£€æŸ¥å¼•è„šã€‚"</span>);
    <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>);
  }
  <span class="hljs-built_in">Serial</span>.<span class="hljs-built_in">println</span>(<span class="hljs-string">"æˆåŠŸï¼"</span>);

  <span class="hljs-comment">// === ç¬¬ä¸‰æ­¥ï¼šå°è¯•æ‰“å¼€å¹¶è§£ç éŸ³é¢‘æ–‡ä»¶ ===</span>
  <span class="hljs-built_in">Serial</span>.<span class="hljs-built_in">printf</span>(<span class="hljs-string">"å°è¯•æ‰“å¼€æ–‡ä»¶: %s\n"</span>, audioFilePath);
  
  <span class="hljs-keyword">if</span> (!file.<span class="hljs-built_in">begin</span>(audioFilePath)) {
    <span class="hljs-built_in">Serial</span>.<span class="hljs-built_in">println</span>(<span class="hljs-string">"æ–‡ä»¶æ‰“å¼€å¤±è´¥ï¼è¯·æ£€æŸ¥è·¯å¾„å’Œæ–‡ä»¶åã€‚"</span>);
    <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>);
  }

  <span class="hljs-comment">// è®¾ç½®è§£ç å™¨è¾“å‡ºä¿¡æ¯å›è°ƒï¼ˆå¯é€‰ï¼‰</span>
  decoder.<span class="hljs-built_in">setInfoCallback</span>(printAudioInfo);
  
  <span class="hljs-built_in">Serial</span>.<span class="hljs-built_in">println</span>(<span class="hljs-string">"å¼€å§‹è§£ç å¹¶æ’­æ”¾..."</span>);
  decoder.<span class="hljs-built_in">begin</span>();

  <span class="hljs-comment">// å¯é€‰ï¼šè®¾ç½®éŸ³é‡ï¼ˆ0.0é™éŸ³ ~ 1.0æœ€å¤§ï¼‰</span>
  <span class="hljs-comment">// i2s.setVolume(0.7);</span>
}

<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">loop</span><span class="hljs-params">()</span> </span>{
  <span class="hljs-comment">// æ ¸å¿ƒï¼šå°†æ–‡ä»¶æ•°æ®å¤åˆ¶åˆ°è§£ç å™¨ï¼Œå†é€è‡³I2S</span>
  <span class="hljs-keyword">if</span> (copier.<span class="hljs-built_in">copy</span>()) {
    <span class="hljs-comment">// æ•°æ®æ­£åœ¨ç¨³å®šä¼ è¾“ä¸­ï¼Œå¯ä»¥åœ¨æ­¤æ·»åŠ æ’­æ”¾çŠ¶æ€æŒ‡ç¤ºï¼ˆå¦‚ç‚¹äº®LEDï¼‰</span>
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// æ’­æ”¾ç»“æŸæˆ–å‘ç”Ÿé”™è¯¯</span>
    <span class="hljs-built_in">Serial</span>.<span class="hljs-built_in">println</span>(<span class="hljs-string">"æ’­æ”¾ç»“æŸã€‚"</span>);
    
    <span class="hljs-comment">// ç®€å•ç¤ºä¾‹ï¼šç­‰å¾…3ç§’åé‡æ–°æ’­æ”¾</span>
    <span class="hljs-built_in">delay</span>(<span class="hljs-number">3000</span>);
    <span class="hljs-built_in">Serial</span>.<span class="hljs-built_in">println</span>(<span class="hljs-string">"é‡æ–°æ’­æ”¾..."</span>);
    
    <span class="hljs-comment">// é‡ç½®æ–‡ä»¶æµåˆ°å¼€å§‹ä½ç½®</span>
    file.<span class="hljs-built_in">begin</span>(audioFilePath);
    decoder.<span class="hljs-built_in">begin</span>();
  }
  
  <span class="hljs-comment">// å¯ä»¥åœ¨æ­¤å¤„åŠ å…¥å…¶ä»–æ§åˆ¶é€»è¾‘ï¼Œå¦‚æŒ‰é”®æ£€æµ‹åˆ‡æ¢æ­Œæ›²</span>
}
</code></pre>
<h4 data-id="heading-9">ğŸš€ å¦‚ä½•è¿è¡Œ</h4>
<ol>
<li><strong>å‡†å¤‡SDå¡</strong>ï¼šæ ¼å¼åŒ–ä¸ºFAT32ï¼Œå°†è½¬æ¢å¥½çš„16ä½ã€å•å£°é“/ç«‹ä½“å£°ã€44100Hzçš„WAVæ–‡ä»¶ï¼ˆå¦‚Â <code>test.wav</code>ï¼‰å¤åˆ¶åˆ°<strong>æ ¹ç›®å½•</strong>ã€‚</li>
<li><strong>è¿æ¥ç¡¬ä»¶</strong>ï¼šæŒ‰ä¸Šè¿°è¡¨æ ¼è¿æ¥å¥½æ‰€æœ‰çº¿è·¯ï¼Œ<strong>ä»”ç»†æ£€æŸ¥ç”µæºå’Œåœ°çº¿</strong>ã€‚</li>
<li><strong>ä¸Šä¼ ä»£ç </strong>ï¼šåœ¨VS Codeä¸­ï¼Œç‚¹å‡»PlatformIOåº•éƒ¨çš„Â <strong>âœ”ï¸ï¼ˆç¼–è¯‘ï¼‰</strong> ï¼Œç„¶åç‚¹å‡»Â <strong>â¡ï¸ï¼ˆä¸Šä¼ ï¼‰</strong> Â æŒ‰é’®ã€‚</li>
<li><strong>æŸ¥çœ‹æ—¥å¿—</strong>ï¼šæ‰“å¼€ä¸²å£ç›‘è§†å™¨ï¼ˆæ³¢ç‰¹ç‡115200ï¼‰ï¼ŒæŸ¥çœ‹åˆå§‹åŒ–çŠ¶æ€å’Œæ’­æ”¾ä¿¡æ¯ã€‚</li>
</ol>
<h2 data-id="heading-10">æ¥å…¥ INMP 441 éº¦å…‹é£</h2>
<p>å°†Â <strong>INMP441</strong>Â æ•°å­—éº¦å…‹é£æ¨¡å—è¿æ¥åˆ°Â <strong>ESP32</strong>Â æ˜¯è¿›è¡Œé«˜è´¨é‡éŸ³é¢‘é‡‡é›†çš„ç»å…¸æ–¹æ¡ˆã€‚INMP441 æ˜¯ä¸€æ¬¾é€šè¿‡Â <strong>I2S æ¥å£</strong>Â è¾“å‡ºçš„åº•éƒ¨è¿›éŸ³ MEMS éº¦å…‹é£ï¼Œä¸ ESP32 çš„ I2S å¤–è®¾å®Œç¾å…¼å®¹ã€‚</p>
<h4 data-id="heading-11">ğŸ”Œ ç¡¬ä»¶è¿æ¥</h4>
<p>INMP441 éœ€è¦æ ‡å‡†çš„ I2S è¿æ¥ï¼Œä½†ä¸ä¹‹å‰çš„ MAX98357ï¼ˆä»è®¾å¤‡ï¼‰ä¸åŒï¼Œ<strong>INMP441 å·¥ä½œåœ¨â€œä¸»æ¨¡å¼â€</strong> ï¼Œè¿™æ„å‘³ç€å®ƒè´Ÿè´£ç”Ÿæˆä¸»æ—¶é’Ÿï¼ˆBCLKï¼‰å’Œå·¦å³æ—¶é’Ÿï¼ˆLRCLKï¼‰ã€‚å› æ­¤ï¼Œè¿æ¥æ–¹å¼æœ‰ç‰¹å®šè¦æ±‚ã€‚</p>
<p>è¯·æŒ‰ä»¥ä¸‹è¡¨æ ¼è¿æ¥ï¼ˆè¿™æ˜¯æœ€å¸¸è§çš„æ¥æ³•ï¼‰ï¼š</p>








































<table><thead><tr><th>ESP32 GPIO å¼•è„š</th><th>INMP441 æ¨¡å—å¼•è„š</th><th>ä¿¡å·è¯´æ˜</th></tr></thead><tbody><tr><td><strong>3.3V</strong></td><td><strong>VDD</strong></td><td>ç”µæº (<strong>å¿…é¡»ä¸º 3.3V</strong>ï¼Œ5Vä¼šæŸåéº¦å…‹é£)</td></tr><tr><td><strong>GND</strong></td><td><strong>GND</strong></td><td>æ¥åœ°</td></tr><tr><td><strong>GPIO 32</strong>Â (æˆ–å…¶å®ƒ)</td><td><strong>SD</strong></td><td><strong>ä¸²è¡Œæ•°æ®è¾“å‡º</strong>Â (æ•°æ®çº¿ï¼Œä»éº¦å…‹é£åˆ°ESP32)</td></tr><tr><td><strong>GPIO 14</strong></td><td><strong>WS</strong></td><td><strong>å­—é€‰æ‹© (å·¦å³å£°é“æ—¶é’Ÿ)</strong> ï¼Œ<strong>ç”±éº¦å…‹é£è¾“å‡ºç»™ESP32</strong></td></tr><tr><td><strong>GPIO 15</strong></td><td><strong>SCK</strong></td><td><strong>ä¸²è¡Œæ—¶é’Ÿ (ä½æ—¶é’Ÿ)</strong> ï¼Œ<strong>ç”±éº¦å…‹é£è¾“å‡ºç»™ESP32</strong></td></tr><tr><td>(å¯é€‰)Â <strong>GPIO 13</strong></td><td><strong>L/R</strong></td><td>å£°é“é€‰æ‹©ã€‚<strong>æ¥GNDä¸ºå·¦å£°é“ï¼Œæ¥VDDä¸ºå³å£°é“</strong>ã€‚é€šå¸¸æ‚¬ç©ºæˆ–æ¥åœ°å³å¯ã€‚</td></tr></tbody></table>
<blockquote>
<p><strong>å…³é”®è¯´æ˜</strong>ï¼š</p>
<ol>
<li><strong>æ—¶é’Ÿæ–¹å‘</strong>ï¼šINMP441 æ˜¯â€œä¸»è®¾å¤‡â€ï¼Œ<strong>SCK</strong>Â å’ŒÂ <strong>WS</strong>Â æ˜¯å®ƒçš„<strong>è¾“å‡º</strong>ï¼Œå¿…é¡»è¿æ¥åˆ° ESP32 çš„å¯¹åº” I2S è¾“å…¥å¼•è„šã€‚ESP32 åœ¨æ­¤é…ç½®ä¸­ä½œä¸ºâ€œä»è®¾å¤‡â€æ¥æ”¶æ—¶é’Ÿå’Œæ•°æ®ã€‚</li>
<li><strong>å¼•è„šçµæ´»æ€§</strong>ï¼šä¸Šè¡¨ä¸­çš„ GPIO 32ã€14ã€15 æ˜¯ ESP32 çš„é»˜è®¤ I2S ä»è®¾å¤‡æ¥æ”¶å¼•è„šï¼Œæ¨èä½¿ç”¨ã€‚ç†è®ºä¸Šå…¶ä»–æ”¯æŒ I2S çš„å¼•è„šä¹Ÿå¯ç”¨ï¼Œä½†éœ€è¦ä¿®æ”¹ä»£ç çš„å¼•è„šæ˜ å°„ã€‚</li>
<li><strong>ç”µæº</strong>ï¼šåŠ¡å¿…ä½¿ç”¨ 3.3V ä¾›ç”µã€‚</li>
</ol>
</blockquote>
<h4 data-id="heading-12">ğŸ“¦ PlatformIO é…ç½® (<code>platformio.ini</code>)</h4>
<p>ç»§ç»­ä½¿ç”¨å¼ºå¤§çš„Â <code>AudioTools</code>Â åº“ï¼Œå®ƒåŒæ ·ç®€åŒ–äº†å½•éŸ³æµç¨‹ã€‚</p>
<p>ini</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-section">[env:esp32-dev]</span>
<span class="hljs-attr">platform</span> = espressif32
<span class="hljs-attr">board</span> = esp32dev
<span class="hljs-attr">framework</span> = ardui<span class="hljs-literal">no</span>
<span class="hljs-attr">monitor_speed</span> = <span class="hljs-number">115200</span>

<span class="hljs-attr">lib_deps</span> = 
    pschatzmann/ESP32-AudioTools @ ^1.0.8
    pschatzmann/arduino-audio-tools @ ^1.1.9
</code></pre>
<h4 data-id="heading-13">ğŸ’» åŸºç¡€å½•éŸ³ä¸ä¸²å£ç»˜å›¾ç¨‹åº (<code>src/main.cpp</code>)</h4>
<p>ä»¥ä¸‹ä»£ç å°†åˆå§‹åŒ– INMP441ï¼Œè¿ç»­é‡‡é›†éŸ³é¢‘æ•°æ®ï¼Œå¹¶å°†åŸå§‹æ•°æ®é€šè¿‡ä¸²å£å‘é€ã€‚ä½ å¯ä»¥ç”¨ Arduino IDE æˆ– PlatformIO çš„ä¸²å£ç»˜å›¾å™¨æŸ¥çœ‹æ³¢å½¢ã€‚</p>
<p>cpp</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-comment">/**
 * ESP32 + INMP441 åŸºç¡€å½•éŸ³æµ‹è¯•
 * å°†éŸ³é¢‘åŸå§‹æ•°æ®é€šè¿‡ä¸²å£è¾“å‡ºï¼Œå¯ç”¨äºç»˜å›¾å™¨æŸ¥çœ‹æ³¢å½¢
 */</span>

<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;Arduino.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">"AudioTools.h"</span></span>

<span class="hljs-comment">// ==================== é…ç½® ====================</span>
<span class="hljs-comment">// å®šä¹‰I2Så¼•è„š (æ ¹æ®ä½ çš„å®é™…è¿æ¥è°ƒæ•´ï¼)</span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> I2S_SD_IN   32  <span class="hljs-comment">// INMP441çš„SD -&gt; ESP32çš„GPIO 32</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> I2S_WS_IN   14  <span class="hljs-comment">// INMP441çš„WS -&gt; ESP32çš„GPIO 14</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> I2S_SCK_IN  15  <span class="hljs-comment">// INMP441çš„SCK -&gt; ESP32çš„GPIO 15</span></span>

<span class="hljs-comment">// å®šä¹‰éŸ³é¢‘å‚æ•°</span>
<span class="hljs-type">const</span> <span class="hljs-type">int</span> sampleRate = <span class="hljs-number">44100</span>; <span class="hljs-comment">// é‡‡æ ·ç‡ (Hz)</span>
<span class="hljs-type">const</span> <span class="hljs-type">int</span> bufferSize = <span class="hljs-number">1024</span>;   <span class="hljs-comment">// ç¼“å†²åŒºå¤§å°</span>

<span class="hljs-comment">// åˆ›å»ºI2Sæµå¯¹è±¡ç”¨äºè¾“å…¥ï¼ˆå½•éŸ³ï¼‰</span>
I2SStream i2sInput;
<span class="hljs-type">int16_t</span> buffer[bufferSize]; <span class="hljs-comment">// ç”¨äºå­˜å‚¨éŸ³é¢‘æ ·æœ¬çš„ç¼“å†²åŒºï¼ˆ16ä½æœ‰ç¬¦å·æ•´æ•°ï¼‰</span>

<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">printAudioInfo</span><span class="hljs-params">(AudioInfo info)</span> </span>{
  <span class="hljs-built_in">Serial</span>.<span class="hljs-built_in">println</span>(<span class="hljs-string">"=== I2Séº¦å…‹é£åˆå§‹åŒ–æˆåŠŸ ==="</span>);
  <span class="hljs-built_in">Serial</span>.<span class="hljs-built_in">printf</span>(<span class="hljs-string">"é‡‡æ ·ç‡: %d Hz\n"</span>, info.sample_rate);
  <span class="hljs-built_in">Serial</span>.<span class="hljs-built_in">printf</span>(<span class="hljs-string">"å£°é“æ•°: %d\n"</span>, info.channels);
  <span class="hljs-built_in">Serial</span>.<span class="hljs-built_in">printf</span>(<span class="hljs-string">"ä½æ·±åº¦: %d-bit\n"</span>, info.bits_per_sample);
  <span class="hljs-built_in">Serial</span>.<span class="hljs-built_in">println</span>(<span class="hljs-string">"å¼€å§‹é‡‡é›†éŸ³é¢‘..."</span>);
  <span class="hljs-built_in">Serial</span>.<span class="hljs-built_in">println</span>(<span class="hljs-string">"æ‰“å¼€ä¸²å£ç»˜å›¾å™¨(Tools -&gt; Serial Plotter)æŸ¥çœ‹æ³¢å½¢ã€‚"</span>);
}

<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">setup</span><span class="hljs-params">()</span> </span>{
  <span class="hljs-built_in">Serial</span>.<span class="hljs-built_in">begin</span>(<span class="hljs-number">115200</span>);
  <span class="hljs-keyword">while</span> (!<span class="hljs-built_in">Serial</span>);
  <span class="hljs-built_in">delay</span>(<span class="hljs-number">500</span>);

  <span class="hljs-built_in">Serial</span>.<span class="hljs-built_in">println</span>(<span class="hljs-string">"å¯åŠ¨ INMP441 éº¦å…‹é£æµ‹è¯•..."</span>);

  <span class="hljs-comment">// é…ç½®I2Sè¾“å…¥å‚æ•°</span>
  <span class="hljs-keyword">auto</span> i2sConfig = i2sInput.<span class="hljs-built_in">defaultConfig</span>(RX_MODE);
  i2sConfig.pin_data = I2S_SD_IN;
  i2sConfig.pin_ws = I2S_WS_IN;
  i2sConfig.pin_bck = I2S_SCK_IN;
  i2sConfig.sample_rate = sampleRate;
  i2sConfig.bits_per_sample = <span class="hljs-number">16</span>;
  i2sConfig.channels = <span class="hljs-number">1</span>;          <span class="hljs-comment">// INMP441 å•å£°é“</span>
  i2sConfig.i2s_format = I2S_STD_FORMAT;
  i2sConfig.is_master = <span class="hljs-literal">false</span>;     <span class="hljs-comment">// ESP32 ä½œä¸ºä»è®¾å¤‡ï¼Œä½¿ç”¨éº¦å…‹é£æä¾›çš„æ—¶é’Ÿï¼</span>
  i2sConfig.port_no = <span class="hljs-number">0</span>;           <span class="hljs-comment">// ä½¿ç”¨I2Sç«¯å£0</span>

  <span class="hljs-comment">// å¼€å§‹I2Sè¾“å…¥</span>
  <span class="hljs-keyword">if</span> (!i2sInput.<span class="hljs-built_in">begin</span>(i2sConfig)) {
    <span class="hljs-built_in">Serial</span>.<span class="hljs-built_in">println</span>(<span class="hljs-string">"é”™è¯¯ï¼šI2Séº¦å…‹é£åˆå§‹åŒ–å¤±è´¥ï¼è¯·æ£€æŸ¥æ¥çº¿å’Œå¼•è„šå®šä¹‰ã€‚"</span>);
    <span class="hljs-keyword">while</span> (<span class="hljs-number">1</span>); <span class="hljs-comment">// åœæ­¢</span>
  }
  <span class="hljs-built_in">printAudioInfo</span>(i2sInput.<span class="hljs-built_in">audioInfo</span>());
}

<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">loop</span><span class="hljs-params">()</span> </span>{
  <span class="hljs-comment">// ä»I2Sæµè¯»å–ä¸€å¸§éŸ³é¢‘æ•°æ®åˆ°ç¼“å†²åŒº</span>
  <span class="hljs-type">size_t</span> numSamplesRead = i2sInput.<span class="hljs-built_in">readBytes</span>((<span class="hljs-type">uint8_t</span>*)buffer, <span class="hljs-built_in">sizeof</span>(buffer));

  <span class="hljs-comment">// å°†è¯»å–åˆ°çš„æ¯ä¸ª16ä½æ ·æœ¬é€šè¿‡ä¸²å£å‘é€ï¼Œç”¨äºç»˜å›¾</span>
  <span class="hljs-comment">// æ³¨æ„ï¼šå¯¹äºä¸²å£ç»˜å›¾å™¨ï¼Œä¸€æ¬¡åªéœ€å‘é€ä¸€ä¸ªå€¼ï¼ˆå•å£°é“ï¼‰</span>
  <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; numSamplesRead / <span class="hljs-built_in">sizeof</span>(<span class="hljs-type">int16_t</span>); i++) {
    <span class="hljs-built_in">Serial</span>.<span class="hljs-built_in">println</span>(buffer[i]); <span class="hljs-comment">// å°†æ ·æœ¬å€¼ç›´æ¥æ‰“å°</span>
  }
  <span class="hljs-comment">// æ³¨æ„ï¼šé«˜é‡‡æ ·ç‡ä¸‹ï¼ŒSerial.printå¯èƒ½æˆä¸ºç“¶é¢ˆï¼Œæ­¤ä»£ç ä»…ç”¨äºæ¼”ç¤ºã€‚</span>
  <span class="hljs-comment">// å®é™…åº”ç”¨æ—¶åº”å¤„ç†æˆ–å­˜å‚¨æ•°æ®ï¼Œè€Œéå…¨éƒ¨æ‰“å°ã€‚</span>
}
</code></pre>
<h4 data-id="heading-14">ğŸ”¬ å¦‚ä½•æµ‹è¯•ä¸éªŒè¯</h4>
<ol>
<li><strong>ä¸Šä¼ ä»£ç </strong>ï¼šç¡®ä¿æ¥çº¿æ­£ç¡®åï¼Œç¼–è¯‘å¹¶ä¸Šä¼ ä»£ç åˆ° ESP32ã€‚</li>
<li><strong>æ‰“å¼€ä¸²å£ç›‘è§†å™¨</strong>ï¼šæ³¢ç‰¹ç‡è®¾ä¸º115200ï¼ŒæŸ¥çœ‹åˆå§‹åŒ–ä¿¡æ¯ã€‚</li>
<li><strong>æ‰“å¼€ä¸²å£ç»˜å›¾å™¨</strong>ï¼šåœ¨ PlatformIO æˆ– Arduino IDE ä¸­ï¼Œæ‰¾åˆ°Â <strong>Serial Plotter</strong>Â åŠŸèƒ½å¹¶æ‰“å¼€ã€‚ä½ åº”è¯¥èƒ½çœ‹åˆ°éšç¯å¢ƒå£°éŸ³å˜åŒ–çš„å®æ—¶æ³¢å½¢å›¾ã€‚å¯¹ç€éº¦å…‹é£è¯´è¯æˆ–åˆ¶é€ å£°éŸ³ï¼Œè§‚å¯Ÿæ³¢å½¢å˜åŒ–ã€‚</li>
</ol>
<h4 data-id="heading-15">ğŸ“ è¿›é˜¶åº”ç”¨ï¼šå°†å½•éŸ³ä¿å­˜åˆ° SD å¡ï¼ˆWAVæ ¼å¼ï¼‰</h4>
<p>å½•åˆ¶éŸ³é¢‘å¹¶ä¿å­˜æ˜¯å¸¸è§éœ€æ±‚ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€åŒ–çš„æ¡†æ¶ï¼Œå±•ç¤ºå¦‚ä½•å°†Â <code>AudioTools</code>Â åº“çš„å½•éŸ³æ•°æ®é€šè¿‡Â <code>WAVEncoder</code>Â ä¿å­˜ä¸º WAV æ–‡ä»¶åˆ° SD å¡ã€‚</p>
<blockquote>
<p><strong>å‰æ</strong>ï¼šä½ å·²ç»æŒ‰ä¹‹å‰æŒ‡å—æ¥å¥½ SD å¡æ¨¡å—å¹¶å®‰è£…äº†æ‰€éœ€åº“ã€‚</p>
</blockquote>
<p>cpp</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-comment">// æ³¨æ„ï¼šæ­¤ä¸ºé«˜çº§ç¤ºä¾‹æ¡†æ¶ï¼Œå¯èƒ½éœ€è¦è°ƒæ•´æ‰èƒ½å®Œå…¨è¿è¡Œ</span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;Arduino.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">"AudioTools.h"</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">"AudioLibs/AudioSourceSD.h"</span> <span class="hljs-comment">// ç”¨äºSDå¡å†™å…¥</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">"AudioCodecs/CodecWAV.h"</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;SD.h&gt;</span></span>

<span class="hljs-comment">// ... å¼•è„šå®šä¹‰å’ŒI2Sè¾“å…¥é…ç½®ä¸ä¸Šæ–‡ç›¸åŒ ...</span>

<span class="hljs-function">SDStream <span class="hljs-title">sd_out</span><span class="hljs-params">(<span class="hljs-number">5</span>)</span></span>; <span class="hljs-comment">// SDå¡CSå¼•è„šä¸º5</span>
WAVEncoder wav_enc;
<span class="hljs-function">EncodedAudioStream <span class="hljs-title">encoder</span><span class="hljs-params">(&amp;sd_out, &amp;wav_enc)</span></span>; <span class="hljs-comment">// å°†WAVç¼–ç æµæŒ‡å‘SDå¡</span>
<span class="hljs-function">StreamCopy <span class="hljs-title">copier</span><span class="hljs-params">(encoder, i2sInput)</span></span>; <span class="hljs-comment">// å°†I2Sè¾“å…¥å¤åˆ¶åˆ°ç¼–ç å™¨</span>

<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">setup</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-comment">// ... åˆå§‹åŒ–ä¸²å£ã€SDå¡ã€I2Sè¾“å…¥ ...</span>
    <span class="hljs-comment">// åˆå§‹åŒ–SDå¡è¾“å‡ºæµ</span>
    <span class="hljs-keyword">if</span> (!<span class="hljs-built_in">SD</span>.<span class="hljs-built_in">begin</span>(<span class="hljs-number">5</span>)) { <span class="hljs-comment">/* é”™è¯¯å¤„ç† */</span> }
    sd_out.<span class="hljs-built_in">begin</span>(<span class="hljs-string">"/recording.wav"</span>, FILE_WRITE); <span class="hljs-comment">// æ‰“å¼€æ–‡ä»¶</span>
    encoder.<span class="hljs-built_in">begin</span>(i2sInput.<span class="hljs-built_in">audioInfo</span>()); <span class="hljs-comment">// ä»¥è¾“å…¥éŸ³é¢‘å‚æ•°å¼€å§‹ç¼–ç </span>
    wav_enc.<span class="hljs-built_in">begin</span>(encoder); <span class="hljs-comment">// å¼€å§‹WAVç¼–ç </span>
    <span class="hljs-built_in">Serial</span>.<span class="hljs-built_in">println</span>(<span class="hljs-string">"å¼€å§‹å½•éŸ³åˆ°SDå¡..."</span>);
}

<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">loop</span><span class="hljs-params">()</span> </span>{
    copier.<span class="hljs-built_in">copy</span>(); <span class="hljs-comment">// æŒç»­å½•éŸ³</span>
    <span class="hljs-comment">// å¯ä»¥é€šè¿‡æŒ‰é’®æˆ–å…¶ä»–æ¡ä»¶è§¦å‘åœæ­¢å½•éŸ³ï¼šencoder.end(); sd_out.end();</span>
}
</code></pre>
<h4 data-id="heading-16">âš ï¸ å¸¸è§é—®é¢˜</h4>

























<table><thead><tr><th>é—®é¢˜</th><th>æ’æŸ¥è¦ç‚¹</th></tr></thead><tbody><tr><td><strong>æ²¡æœ‰æ•°æ®/å…¨æ˜¯å™ªå£°</strong></td><td>1.Â <strong>æ—¶é’Ÿæ¨¡å¼</strong>ï¼šç¡®è®¤Â <code>i2sConfig.is_master = false</code>ã€‚ 2.Â <strong>å¼•è„š</strong>ï¼šæœ€å¯èƒ½ï¼åå¤æ£€æŸ¥ SCK, WS, SD ä¸‰æ¡æ•°æ®çº¿æ˜¯å¦æ¥å¯¹ã€‚ 3.Â <strong>ç”µæº</strong>ï¼šç¡®ä¿æ˜¯Â <strong>3.3V</strong>ï¼Œä¸” GND å·²å…±åœ°ã€‚</td></tr><tr><td><strong>å£°éŸ³æ³¢å½¢å¾ˆå°</strong></td><td>INMP441 çµæ•åº¦è¾ƒé«˜ã€‚å°è¯•å¢å¤§å£°æºéŸ³é‡æˆ–è°ƒæ•´ä»£ç ä¸­çš„å¢ç›Šï¼ˆå¯å¯¹Â <code>buffer[i]</code>Â ä¹˜ä»¥ä¸€ä¸ªç³»æ•°åå†å‘é€ï¼‰ã€‚</td></tr><tr><td><strong>ç¼–è¯‘é”™è¯¯</strong></td><td>ç¡®ä¿Â <code>platformio.ini</code>Â ä¸­çš„Â <code>lib_deps</code>Â å·²æ­£ç¡®æ·»åŠ Â <code>AudioTools</code>Â åº“ã€‚</td></tr><tr><td><strong>ç¨‹åºè¿è¡Œä¸ç¨³å®š</strong></td><td>é™ä½é‡‡æ ·ç‡ï¼ˆå¦‚æ”¹ä¸º 16000 Hzï¼‰æˆ–å¢åŠ Â <code>bufferSize</code>ã€‚</td></tr></tbody></table>
<p>æˆåŠŸè¿æ¥å¹¶é‡‡é›†åˆ°éŸ³é¢‘æ•°æ®åï¼Œä½ å¯ä»¥å°†å…¶ç”¨äºè¯­éŸ³å”¤é†’ã€ç¯å¢ƒå£°åˆ†æã€å®æ—¶ä¼ è¾“æˆ–ä¸ä¹‹å‰çš„æ’­æ”¾åŠŸèƒ½ç»“åˆå®ç°å›éŸ³æ¶ˆé™¤ç­‰ã€‚å¦‚æœä½ åœ¨å…·ä½“å®ç°ä¸­é‡åˆ°é—®é¢˜ï¼Œå¯ä»¥æä¾›ä¸²å£è¾“å‡ºçš„é”™è¯¯ä¿¡æ¯ï¼Œä»¥ä¾¿è¿›ä¸€æ­¥è¯Šæ–­ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Vue3-æ’æ§½slot]]></title>    <link>https://juejin.cn/post/7587965800273182746</link>    <guid>https://juejin.cn/post/7587965800273182746</guid>    <pubDate>2025-12-26T13:47:59.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587965800273182746" data-draft-id="7588086766235516966" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Vue3-æ’æ§½slot"/> <meta itemprop="keywords" content="å‰ç«¯,Vue.js"/> <meta itemprop="datePublished" content="2025-12-26T13:47:59.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="YaeZed"/> <meta itemprop="url" content="https://juejin.cn/user/3977350021390107"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Vue3-æ’æ§½slot
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3977350021390107/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    YaeZed
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-26T13:47:59.000Z" title="Fri Dec 26 2025 13:47:59 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    5
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body .octicon{display:inline-block;fill:currentColor;vertical-align:text-bottom}.markdown-body .anchor{float:left;line-height:1;margin-left:-20px;padding-right:4px}.markdown-body .anchor:focus{outline:none}.markdown-body h1 .octicon-link,.markdown-body h2 .octicon-link,.markdown-body h3 .octicon-link,.markdown-body h4 .octicon-link,.markdown-body h5 .octicon-link,.markdown-body h6 .octicon-link{color:#1b1f23;vertical-align:middle;visibility:hidden}.markdown-body h1:hover .anchor,.markdown-body h2:hover .anchor,.markdown-body h3:hover .anchor,.markdown-body h4:hover .anchor,.markdown-body h5:hover .anchor,.markdown-body h6:hover .anchor{text-decoration:none}.markdown-body h1:hover .anchor .octicon-link,.markdown-body h2:hover .anchor .octicon-link,.markdown-body h3:hover .anchor .octicon-link,.markdown-body h4:hover .anchor .octicon-link,.markdown-body h5:hover .anchor .octicon-link,.markdown-body h6:hover .anchor .octicon-link{visibility:visible}.markdown-body h1:hover .anchor .octicon-link:before,.markdown-body h2:hover .anchor .octicon-link:before,.markdown-body h3:hover .anchor .octicon-link:before,.markdown-body h4:hover .anchor .octicon-link:before,.markdown-body h5:hover .anchor .octicon-link:before,.markdown-body h6:hover .anchor .octicon-link:before{width:16px;height:16px;content:" ";display:inline-block;background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' aria-hidden='true'%3E%3Cpath fill-rule='evenodd' d='M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z'/%3E%3C/svg%3E")}.markdown-body{-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;color:#24292e;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji;font-size:16px;line-height:1.5;word-wrap:break-word}.markdown-body details{display:block}.markdown-body summary{display:list-item}.markdown-body a{background-color:initial}.markdown-body a:active,.markdown-body a:hover{outline-width:0}.markdown-body strong{font-weight:inherit;font-weight:bolder}.markdown-body h1{margin:.67em 0}.markdown-body img{border-style:none}.markdown-body code,.markdown-body kbd,.markdown-body pre{font-family:monospace,monospace;font-size:1em}.markdown-body hr{box-sizing:initial;overflow:visible}.markdown-body input{font:inherit;margin:0;overflow:visible}.markdown-body [type=checkbox]{box-sizing:border-box;padding:0}.markdown-body *{box-sizing:border-box}.markdown-body input{font-family:inherit;font-size:inherit;line-height:inherit}.markdown-body a{color:#0366d6;text-decoration:none}.markdown-body a:hover{text-decoration:underline}.markdown-body strong{font-weight:600}.markdown-body hr{height:0;margin:15px 0;overflow:hidden;background:transparent;border-bottom:1px solid #dfe2e5}.markdown-body hr:after,.markdown-body hr:before{display:table;content:""}.markdown-body hr:after{clear:both}.markdown-body table{border-spacing:0;border-collapse:collapse}.markdown-body td,.markdown-body th{padding:0}.markdown-body details summary{cursor:pointer}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin-top:0;margin-bottom:0}.markdown-body h1{font-size:32px}.markdown-body h1,.markdown-body h2{font-weight:600}.markdown-body h2{font-size:24px}.markdown-body h3{font-size:20px}.markdown-body h3,.markdown-body h4{font-weight:600}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:14px}.markdown-body h5,.markdown-body h6{font-weight:600}.markdown-body h6{font-size:12px}.markdown-body p{margin-top:0;margin-bottom:10px}.markdown-body blockquote{margin:0}.markdown-body ol,.markdown-body ul{padding-left:0;margin-top:0;margin-bottom:0}.markdown-body ol ol,.markdown-body ul ol{list-style-type:lower-roman}.markdown-body ol ol ol,.markdown-body ol ul ol,.markdown-body ul ol ol,.markdown-body ul ul ol{list-style-type:lower-alpha}.markdown-body dd{margin-left:0}.markdown-body code,.markdown-body pre{font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:12px}.markdown-body pre{margin-top:0;margin-bottom:0}.markdown-body input::-webkit-inner-spin-button,.markdown-body input::-webkit-outer-spin-button{margin:0;-webkit-appearance:none;appearance:none}.markdown-body :checked+.radio-label{position:relative;z-index:1;border-color:#0366d6}.markdown-body .border{border:1px solid #e1e4e8!important}.markdown-body .border-0{border:0!important}.markdown-body .border-bottom{border-bottom:1px solid #e1e4e8!important}.markdown-body .rounded-1{border-radius:3px!important}.markdown-body .bg-white{background-color:#fff!important}.markdown-body .bg-gray-light{background-color:#fafbfc!important}.markdown-body .text-gray-light{color:#6a737d!important}.markdown-body .pl-3,.markdown-body .px-3{padding-left:16px!important}.markdown-body .px-3{padding-right:16px!important}.markdown-body .f6{font-size:12px!important}.markdown-body .lh-condensed{line-height:1.25!important}.markdown-body .text-bold{font-weight:600!important}.markdown-body .pl-c{color:#6a737d}.markdown-body .pl-c1,.markdown-body .pl-s .pl-v{color:#005cc5}.markdown-body .pl-e,.markdown-body .pl-en{color:#6f42c1}.markdown-body .pl-s .pl-s1,.markdown-body .pl-smi{color:#24292e}.markdown-body .pl-ent{color:#22863a}.markdown-body .pl-k{color:#d73a49}.markdown-body .pl-pds,.markdown-body .pl-s,.markdown-body .pl-s .pl-pse .pl-s1,.markdown-body .pl-sr,.markdown-body .pl-sr .pl-cce,.markdown-body .pl-sr .pl-sra,.markdown-body .pl-sr .pl-sre{color:#032f62}.markdown-body .pl-smw,.markdown-body .pl-v{color:#e36209}.markdown-body .pl-bu{color:#b31d28}.markdown-body .pl-ii{color:#fafbfc;background-color:#b31d28}.markdown-body .pl-c2{color:#fafbfc;background-color:#d73a49}.markdown-body .pl-c2:before{content:"^M"}.markdown-body .pl-sr .pl-cce{font-weight:700;color:#22863a}.markdown-body .pl-ml{color:#735c0f}.markdown-body .pl-mh,.markdown-body .pl-mh .pl-en,.markdown-body .pl-ms{font-weight:700;color:#005cc5}.markdown-body .pl-mi{font-style:italic;color:#24292e}.markdown-body .pl-mb{font-weight:700;color:#24292e}.markdown-body .pl-md{color:#b31d28;background-color:#ffeef0}.markdown-body .pl-mi1{color:#22863a;background-color:#f0fff4}.markdown-body .pl-mc{color:#e36209;background-color:#ffebda}.markdown-body .pl-mi2{color:#f6f8fa;background-color:#005cc5}.markdown-body .pl-mdr{font-weight:700;color:#6f42c1}.markdown-body .pl-ba{color:#586069}.markdown-body .pl-sg{color:#959da5}.markdown-body .pl-corl{text-decoration:underline;color:#032f62}.markdown-body .mb-0{margin-bottom:0!important}.markdown-body .my-2{margin-bottom:8px!important;margin-top:8px!important}.markdown-body .pl-0{padding-left:0!important}.markdown-body .py-0{padding-top:0!important;padding-bottom:0!important}.markdown-body .pl-1{padding-left:4px!important}.markdown-body .pl-2{padding-left:8px!important}.markdown-body .py-2{padding-top:8px!important;padding-bottom:8px!important}.markdown-body .pl-3{padding-left:16px!important}.markdown-body .pl-4{padding-left:24px!important}.markdown-body .pl-5{padding-left:32px!important}.markdown-body .pl-6{padding-left:40px!important}.markdown-body .pl-7{padding-left:48px!important}.markdown-body .pl-8{padding-left:64px!important}.markdown-body .pl-9{padding-left:80px!important}.markdown-body .pl-10{padding-left:96px!important}.markdown-body .pl-11{padding-left:112px!important}.markdown-body .pl-12{padding-left:128px!important}.markdown-body hr{border-bottom-color:#eee}.markdown-body kbd{display:inline-block;padding:3px 5px;font:11px SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;line-height:10px;color:#444d56;vertical-align:middle;background-color:#fafbfc;border:1px solid #d1d5da;border-radius:3px;box-shadow:inset 0 -1px 0 #d1d5da}.markdown-body:after,.markdown-body:before{display:table;content:""}.markdown-body:after{clear:both}.markdown-body&gt;:first-child{margin-top:0!important}.markdown-body&gt;:last-child{margin-bottom:0!important}.markdown-body a:not([href]){color:inherit;text-decoration:none}.markdown-body blockquote,.markdown-body details,.markdown-body dl,.markdown-body ol,.markdown-body p,.markdown-body pre,.markdown-body table,.markdown-body ul{margin-top:0;margin-bottom:16px}.markdown-body hr{height:.25em;padding:0;margin:24px 0;background-color:#e1e4e8;border:0}.markdown-body blockquote{padding:0 1em;color:#6a737d;border-left:.25em solid #dfe2e5}.markdown-body blockquote&gt;:first-child{margin-top:0}.markdown-body blockquote&gt;:last-child{margin-bottom:0}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin-top:24px;margin-bottom:16px;font-weight:600;line-height:1.25}.markdown-body h1{font-size:2em}.markdown-body h1,.markdown-body h2{padding-bottom:.3em;border-bottom:1px solid #eaecef}.markdown-body h2{font-size:1.5em}.markdown-body h3{font-size:1.25em}.markdown-body h4{font-size:1em}.markdown-body h5{font-size:.875em}.markdown-body h6{font-size:.85em;color:#6a737d}.markdown-body ol,.markdown-body ul{padding-left:2em}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:0;margin-bottom:0}.markdown-body li{word-wrap:break-all}.markdown-body li&gt;p{margin-top:16px}.markdown-body li+li{margin-top:.25em}.markdown-body dl{padding:0}.markdown-body dl dt{padding:0;margin-top:16px;font-size:1em;font-style:italic;font-weight:600}.markdown-body dl dd{padding:0 16px;margin-bottom:16px}.markdown-body table{display:block;width:100%;overflow:auto}.markdown-body table th{font-weight:600}.markdown-body table td,.markdown-body table th{padding:6px 13px;border:1px solid #dfe2e5}.markdown-body table tr{background-color:#fff;border-top:1px solid #c6cbd1}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}.markdown-body img{max-width:100%;box-sizing:initial;background-color:#fff}.markdown-body img[align=right]{padding-left:20px}.markdown-body img[align=left]{padding-right:20px}.markdown-body code{padding:.2em .4em;margin:0;font-size:85%;background-color:rgba(27,31,35,.05);border-radius:3px}.markdown-body pre{word-wrap:normal}.markdown-body pre&gt;code{padding:0;margin:0;font-size:100%;word-break:normal;white-space:pre;background:transparent;border:0}.markdown-body .highlight{margin-bottom:16px}.markdown-body .highlight pre{margin-bottom:0;word-break:normal}.markdown-body .highlight pre,.markdown-body pre{padding:16px;overflow:auto;font-size:85%;line-height:1.45;background-color:#f6f8fa;border-radius:3px}.markdown-body pre code{display:inline;max-width:auto;padding:0;margin:0;overflow:visible;line-height:inherit;word-wrap:normal;background-color:initial;border:0}.markdown-body .commit-tease-sha{display:inline-block;font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:90%;color:#444d56}.markdown-body .full-commit .btn-outline:not(:disabled):hover{color:#005cc5;border-color:#005cc5}.markdown-body .blob-wrapper{overflow-x:auto;overflow-y:hidden}.markdown-body .blob-wrapper-embedded{max-height:240px;overflow-y:auto}.markdown-body .blob-num{width:1%;min-width:50px;padding-right:10px;padding-left:10px;font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:12px;line-height:20px;color:rgba(27,31,35,.3);text-align:right;white-space:nowrap;vertical-align:top;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.markdown-body .blob-num:hover{color:rgba(27,31,35,.6)}.markdown-body .blob-num:before{content:attr(data-line-number)}.markdown-body .blob-code{position:relative;padding-right:10px;padding-left:10px;line-height:20px;vertical-align:top}.markdown-body .blob-code-inner{overflow:visible;font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:12px;color:#24292e;word-wrap:normal;white-space:pre}.markdown-body .pl-token.active,.markdown-body .pl-token:hover{cursor:pointer;background:#ffea7f}.markdown-body .tab-size[data-tab-size="1"]{-moz-tab-size:1;tab-size:1}.markdown-body .tab-size[data-tab-size="2"]{-moz-tab-size:2;tab-size:2}.markdown-body .tab-size[data-tab-size="3"]{-moz-tab-size:3;tab-size:3}.markdown-body .tab-size[data-tab-size="4"]{-moz-tab-size:4;tab-size:4}.markdown-body .tab-size[data-tab-size="5"]{-moz-tab-size:5;tab-size:5}.markdown-body .tab-size[data-tab-size="6"]{-moz-tab-size:6;tab-size:6}.markdown-body .tab-size[data-tab-size="7"]{-moz-tab-size:7;tab-size:7}.markdown-body .tab-size[data-tab-size="8"]{-moz-tab-size:8;tab-size:8}.markdown-body .tab-size[data-tab-size="9"]{-moz-tab-size:9;tab-size:9}.markdown-body .tab-size[data-tab-size="10"]{-moz-tab-size:10;tab-size:10}.markdown-body .tab-size[data-tab-size="11"]{-moz-tab-size:11;tab-size:11}.markdown-body .tab-size[data-tab-size="12"]{-moz-tab-size:12;tab-size:12}.markdown-body .task-list-item{list-style-type:none}.markdown-body .task-list-item+.task-list-item{margin-top:3px}.markdown-body .task-list-item input{margin:0 .2em .25em -1.6em;vertical-align:middle}</style><style data-highlight="" data-highlight-key="gml">.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#222;color:silver}.hljs-keyword{color:#ffb871;font-weight:700}.hljs-built_in{color:#ffb871}.hljs-literal{color:#ff8080}.hljs-symbol{color:#58e55a}.hljs-comment{color:#5b995b}.hljs-string{color:#ff0}.hljs-number{color:#ff8080}.hljs-addition,.hljs-attribute,.hljs-bullet,.hljs-code,.hljs-deletion,.hljs-doctag,.hljs-function,.hljs-link,.hljs-meta,.hljs-meta-keyword,.hljs-name,.hljs-quote,.hljs-regexp,.hljs-section,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-id,.hljs-selector-pseudo,.hljs-selector-tag,.hljs-subst,.hljs-template-tag,.hljs-template-variable,.hljs-title,.hljs-type,.hljs-variable{color:silver}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æ’æ§½æ˜¯ Vue ç»„ä»¶ä¸­ä¸€ä¸ªéå¸¸æ ¸å¿ƒçš„æ¦‚å¿µï¼Œå®ƒå…è®¸ä½ ä»¥ä¸€ç§çµæ´»çš„æ–¹å¼å°†å†…å®¹â€œæ’å…¥â€åˆ°å­ç»„ä»¶çš„æŒ‡å®šä½ç½®ï¼Œæå¤§åœ°æé«˜äº†ç»„ä»¶çš„å¤ç”¨æ€§å’ŒçµTAæ€§ã€‚æ’æ§½å…è®¸ç»„ä»¶åªè´Ÿè´£æ¸²æŸ“ä¸€ä¸ªâ€œæ¡†æ¶â€ï¼ˆæ¯”å¦‚è¾¹æ¡†ã€é˜´å½±ï¼‰ï¼Œè€ŒæŠŠâ€œå†…å®¹â€çš„å†³å®šæƒäº¤ç»™ä½¿ç”¨å®ƒçš„çˆ¶ç»„ä»¶ã€‚</p>
<h2 data-id="heading-0">1.é»˜è®¤æ’æ§½</h2>
<p>æœ€ç®€å•çš„æ’æ§½ï¼Œå­ç»„ä»¶ä¸­åªæœ‰ä¸€ä¸ªæœªå‘½åçš„ <code>&lt;slot&gt;</code> å‡ºå£ã€‚</p>
<blockquote>
<p>å­ç»„ä»¶</p>
</blockquote>
<pre><code class="hljs language-ts" lang="ts">&lt;template&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>å¡ç‰‡æ ‡é¢˜<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">slot</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">slot</span>&gt;</span> <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
&lt;/template&gt;

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="css">
<span class="hljs-selector-class">.card</span> {
  <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#ccc</span>;
  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">8px</span>;
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">16px</span>;
  <span class="hljs-attribute">max-width</span>: <span class="hljs-number">300px</span>;
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span></span>
</code></pre>
<blockquote>
<p>çˆ¶ç»„ä»¶</p>
</blockquote>
<pre><code class="hljs language-ts" lang="ts">&lt;template&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">BaseCard</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>è¿™æ˜¯ä¸€çˆ¶ç»„ä»¶<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"./assets/logo.png"</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">"Vue Logo"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"width: 100px;"</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">BaseCard</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span>

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"ts"</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> <span class="hljs-title class_">BaseCard</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./components/BaseCard.vue'</span>;
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>
</code></pre>
<h2 data-id="heading-1">2.å…·åæ’æ§½</h2>
<p>å½“å­ç»„ä»¶éœ€è¦å¤šä¸ªâ€œå‘ä½â€æ—¶ï¼ˆä¾‹å¦‚ï¼Œä¸€ä¸ªç”¨äºå¤´éƒ¨ï¼Œä¸€ä¸ªç”¨äºåº•éƒ¨ï¼‰ï¼Œå°±éœ€è¦ä½¿ç”¨å…·åæ’æ§½ã€‚</p>
<blockquote>
<p>å­ç»„ä»¶ï¼šä½¿ç”¨ <code>name</code> å±æ€§æ¥åŒºåˆ†ä¸åŒçš„æ’æ§½ã€‚</p>
</blockquote>
<pre><code class="hljs language-ts" lang="ts">&lt;template&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"modal"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">header</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"modal-header"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">slot</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"header"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">slot</span>&gt;</span> <span class="hljs-tag">&lt;/<span class="hljs-name">header</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">main</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"modal-body"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">slot</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">slot</span>&gt;</span> <span class="hljs-tag">&lt;/<span class="hljs-name">main</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">footer</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"modal-footer"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">slot</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"footer"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">slot</span>&gt;</span> <span class="hljs-tag">&lt;/<span class="hljs-name">footer</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
&lt;/template&gt;

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="css">
<span class="hljs-selector-class">.modal</span> { <span class="hljs-attribute">background</span>: <span class="hljs-number">#fff</span>; <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#ddd</span>; }
<span class="hljs-selector-class">.modal-header</span>, <span class="hljs-selector-class">.modal-footer</span> { <span class="hljs-attribute">padding</span>: <span class="hljs-number">10px</span>; <span class="hljs-attribute">background</span>: <span class="hljs-number">#f4f4f4</span>; }
<span class="hljs-selector-class">.modal-body</span> { <span class="hljs-attribute">padding</span>: <span class="hljs-number">20px</span>; }
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span></span>
</code></pre>
<blockquote>
<p>çˆ¶ç»„ä»¶ï¼šä½¿ç”¨ <code>&lt;template&gt;</code> æ ‡ç­¾å’Œ <code>v-slot</code> æŒ‡ä»¤ï¼ˆæˆ–å…¶ç®€å†™ <code>#</code>ï¼‰æ¥æŒ‡å®šè¦å¡«å……çš„æ’æ§½ã€‚</p>
</blockquote>
<pre><code class="hljs language-ts" lang="ts">&lt;template&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">ModalLayout</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">template</span> <span class="hljs-attr">v-slot</span> = <span class="hljs-string">"header"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>è¿™æ˜¯ä¸€ä¸ªæ¨¡æ€æ¡†æ ‡é¢˜<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>è¿™æ˜¯æ¨¡æ€æ¡†çš„ä¸»è¦å†…å®¹...<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">template</span> #<span class="hljs-attr">footer</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span>&gt;</span>å–æ¶ˆ<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span>&gt;</span>ç¡®è®¤<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">ModalLayout</span>&gt;</span></span>
&lt;/template&gt;

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"ts"</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> <span class="hljs-title class_">ModalLayout</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./components/ModalLayout.vue'</span>;
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>
</code></pre>
<h2 data-id="heading-2">3.ä½œç”¨åŸŸæ’æ§½</h2>
<p>è¿™æ˜¯æ’æ§½æœ€å¼ºå¤§çš„åŠŸèƒ½ã€‚å®ƒå…è®¸å­ç»„ä»¶å‘çˆ¶ç»„ä»¶çš„æ’æ§½å†…å®¹ä¼ é€’æ•°æ®ã€‚è¿™åœ¨å¤„ç†<strong>åˆ—è¡¨æ¸²æŸ“</strong>æ—¶éå¸¸æœ‰ç”¨ï¼Œå­ç»„ä»¶è´Ÿè´£æ•°æ®è¿­ä»£ï¼Œè€Œçˆ¶ç»„ä»¶è´Ÿè´£å®šä¹‰æ¯ä¸€é¡¹çš„æ¸²æŸ“æ ·å¼ã€‚</p>
<blockquote>
<p>å­ç»„ä»¶ï¼šå­ç»„ä»¶é€šè¿‡åœ¨ <code>&lt;slot&gt;</code> æ ‡ç­¾ä¸Šç»‘å®šå±æ€§ï¼Œæ¥å°†æ•°æ®"æš´éœ²"ç»™çˆ¶ç»„ä»¶ã€‚</p>
</blockquote>
<pre><code class="hljs language-ts" lang="ts">&lt;template&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"user-list"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>ç”¨æˆ·åˆ—è¡¨:<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">"user in users"</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">"user.id"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">slot</span> <span class="hljs-attr">:user</span>=<span class="hljs-string">"user"</span> <span class="hljs-attr">:isAdmin</span>=<span class="hljs-string">"user.name === 'Alice'"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">slot</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
&lt;/template&gt;

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"ts"</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { ref } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>;

interface <span class="hljs-title class_">User</span> {
  <span class="hljs-attr">id</span>: number;
  <span class="hljs-attr">name</span>: string;
  <span class="hljs-attr">age</span>: number;
}

<span class="hljs-keyword">const</span> users = ref&lt;<span class="hljs-title class_">User</span>[]&gt;([
  { <span class="hljs-attr">id</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'Alice'</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">30</span> },
  { <span class="hljs-attr">id</span>: <span class="hljs-number">2</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'Bob'</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">25</span> },
]);
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</span></code></pre>
<blockquote>
<p>çˆ¶ç»„ä»¶ï¼šçˆ¶ç»„ä»¶é€šè¿‡ <code>v-slot</code> (æˆ– <code>#</code>) æ¥æ”¶å­ç»„ä»¶ä¼ é€’çš„æ•°æ®ï¼Œ<strong>å¹¶ä¸”å¯ä»¥ç«‹å³ä¸ºè¿™äº›æ•°æ®æ·»åŠ  TypeScript ç±»å‹</strong>ã€‚</p>
</blockquote>
<pre><code class="hljs language-ts" lang="ts">&lt;template&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">UserList</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">template</span> #<span class="hljs-attr">default</span>=<span class="hljs-string">"{ user, isAdmin }: { user: User, isAdmin: boolean }"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span> 
        {{ user.name }} ({{ user.age }}å²)
      <span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">"isAdmin"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"color: red; margin-left: 10px;"</span>&gt;</span>[ç®¡ç†å‘˜]<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">UserList</span>&gt;</span></span>
&lt;/template&gt;

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"ts"</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> <span class="hljs-title class_">UserList</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./components/UserList.vue'</span>;

<span class="hljs-comment">// æˆ‘ä»¬å¯ä»¥åœ¨çˆ¶ç»„ä»¶ä¸­ä¹Ÿå®šä¹‰è¿™ä¸ªç±»å‹ï¼Œä»¥ä¾¿å¤ç”¨</span>
interface <span class="hljs-title class_">User</span> {
  <span class="hljs-attr">id</span>: number;
  <span class="hljs-attr">name</span>: string;
  <span class="hljs-attr">age</span>: number;
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>
</code></pre>
<h2 data-id="heading-3">4.è‡ªå®šä¹‰æ’æ§½(Vue 3.3+)</h2>
<p>åœ¨ Vue 3.3 åŠæ›´é«˜ç‰ˆæœ¬ä¸­ï¼Œ <code>&lt;script setup&gt;</code> æä¾›äº† <code>defineSlots</code> å®ï¼Œè¿™æ˜¯åœ¨å­ç»„ä»¶ä¸­<strong>ä¸ºæ’æ§½æä¾›ç±»å‹</strong>çš„å®˜æ–¹æ–¹å¼ã€‚è¿™æå¤§åœ°æ”¹å–„äº†å¼€å‘ä½“éªŒï¼Œ<strong>çˆ¶ç»„ä»¶ä¸å†éœ€è¦æ‰‹åŠ¨å£°æ˜ç±»å‹</strong>ï¼Œå› ä¸º TS å¯ä»¥è‡ªåŠ¨ä»å­ç»„ä»¶æ¨æ–­å®ƒä»¬ã€‚</p>
<blockquote>
<p>å­ç»„ä»¶ï¼šä½¿ç”¨ <code>defineSlots</code> æ¥å£°æ˜æ’æ§½åŠå…¶æœŸæœ›çš„ <code>props</code> ç±»å‹ã€‚</p>
</blockquote>
<pre><code class="hljs language-ts" lang="ts">&lt;template&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"list"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">"(item, index) in items"</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">"item.id"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">slot</span> <span class="hljs-attr">:item</span>=<span class="hljs-string">"item"</span> <span class="hljs-attr">:index</span>=<span class="hljs-string">"index"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">slot</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
&lt;/template&gt;

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"ts"</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { ref } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>;

<span class="hljs-comment">// 1. å®šä¹‰æ•°æ®å’Œç±»å‹</span>
interface <span class="hljs-title class_">Item</span> {
  <span class="hljs-attr">id</span>: string;
  <span class="hljs-attr">text</span>: string;
}
<span class="hljs-keyword">const</span> items = ref&lt;<span class="hljs-title class_">Item</span>[]&gt;([
  { <span class="hljs-attr">id</span>: <span class="hljs-string">'a'</span>, <span class="hljs-attr">text</span>: <span class="hljs-string">'ç¬¬ä¸€é¡¹'</span> },
  { <span class="hljs-attr">id</span>: <span class="hljs-string">'b'</span>, <span class="hljs-attr">text</span>: <span class="hljs-string">'ç¬¬äºŒé¡¹'</span> },
]);

<span class="hljs-comment">// 2. (é‡ç‚¹) ä½¿ç”¨ defineSlots </span>
<span class="hljs-comment">// è¿™æ˜¯ä¸€ä¸ªå®ï¼Œæ— éœ€å¯¼å…¥</span>
<span class="hljs-comment">// å®ƒå®šä¹‰äº† 'default' æ’æ§½ä¼šæ¥æ”¶ä¸€ä¸ªå¯¹è±¡ï¼Œè¯¥å¯¹è±¡åŒ…å«ä¸€ä¸ª 'item' å±æ€§ (ç±»å‹ä¸º Item)</span>
<span class="hljs-comment">// å’Œä¸€ä¸ª 'index' å±æ€§ (ç±»å‹ä¸º number)</span>
defineSlots&lt;{
  <span class="hljs-title function_">default</span>(<span class="hljs-attr">props</span>: { <span class="hljs-attr">item</span>: <span class="hljs-title class_">Item</span>; <span class="hljs-attr">index</span>: number }): any;
  <span class="hljs-comment">// å¦‚æœæœ‰å…·åæ’æ§½ï¼Œä¹Ÿå¯ä»¥åœ¨è¿™é‡Œå®šä¹‰ï¼Œæ¯”å¦‚ï¼š</span>
  <span class="hljs-comment">// header(props: { title: string }): any;</span>
}&gt;();
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</span></code></pre>
<blockquote>
<p>çˆ¶ç»„ä»¶ï¼šçˆ¶ç»„ä»¶çš„ <code>slotProps</code> (æˆ–è§£æ„çš„å˜é‡) ä¼šè¢«<strong>è‡ªåŠ¨æ¨æ–­</strong>å‡ºæ­£ç¡®çš„ç±»å‹</p>
</blockquote>
<pre><code class="hljs language-ts" lang="ts">&lt;template&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">TypedList</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">template</span> #<span class="hljs-attr">default</span>=<span class="hljs-string">"{ item, index }"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">strong</span>&gt;</span>{{ index + 1 }}.<span class="hljs-tag">&lt;/<span class="hljs-name">strong</span>&gt;</span> {{ item.text.toUpperCase() }}
      <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">TypedList</span>&gt;</span></span>
&lt;/template&gt;

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"ts"</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> <span class="hljs-title class_">TypedList</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./components/TypedList.vue'</span>;
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>
</code></pre>
<h2 data-id="heading-4">5.æ€»ç»“</h2>
<ul>
<li>
<p><strong>å¸ƒå±€ç»„ä»¶</strong> (<code>Layout.vue</code>):</p>
<ul>
<li><strong>åœºæ™¯</strong>: å®šä¹‰ç½‘ç«™çš„é€šç”¨å¸ƒå±€ï¼Œå¦‚ä¾§è¾¹æ ã€é¡¶éƒ¨å¯¼èˆªå’Œå†…å®¹åŒºåŸŸã€‚</li>
<li><strong>ç”¨æ³•</strong>: ä½¿ç”¨ <code>header</code>, <code>sidebar</code>, <code>main</code> ç­‰å…·åæ’æ§½ï¼Œè®©ä¸åŒé¡µé¢å¡«å……è‡ªå·±çš„å†…å®¹ã€‚</li>
</ul>
</li>
<li>
<p><strong>å¯å¤ç”¨ UI å…ƒç´ </strong> (<code>Modal.vue</code>, <code>Card.vue</code>, <code>Dropdown.vue</code>):</p>
<ul>
<li><strong>åœºæ™¯</strong>: å°è£…é€šç”¨çš„äº¤äº’å’Œæ ·å¼ï¼Œä½†å…è®¸å†…å®¹é«˜åº¦è‡ªå®šä¹‰ã€‚</li>
<li><strong>ç”¨æ³•</strong>: <code>Modal</code> ç»„ä»¶æä¾› <code>header</code> (æ ‡é¢˜), <code>body</code> (å†…å®¹), <code>footer</code> (æŒ‰é’®) æ’æ§½ã€‚</li>
</ul>
</li>
<li>
<p><strong>åˆ—è¡¨æ¸²æŸ“å™¨</strong> (<code>DataList.vue</code>, <code>ProductGrid.vue</code>):</p>
<ul>
<li><strong>åœºæ™¯</strong>: ç»„ä»¶è´Ÿè´£è·å–å’Œè¿­ä»£æ•°æ®ï¼ˆå¦‚ API è¯·æ±‚ã€åˆ†é¡µï¼‰ï¼Œä½†æŠŠ<em>å¦‚ä½•æ¸²æŸ“æ¯ä¸€é¡¹</em>çš„æ§åˆ¶æƒäº¤ç»™çˆ¶ç»„ä»¶ã€‚</li>
<li><strong>ç”¨æ³•</strong>: <strong>(æ ¸å¿ƒ)</strong> ä½¿ç”¨<strong>ä½œç”¨åŸŸæ’æ§½</strong>ï¼Œå°† <code>item</code> (å½“å‰é¡¹æ•°æ®) ä¼ é€’ç»™çˆ¶ç»„ä»¶ã€‚è¿™æ˜¯æœ€çµæ´»çš„æ¨¡å¼ã€‚</li>
</ul>
</li>
<li>
<p><strong>æä¾›è€…ç»„ä»¶</strong> (<code>Toggle.vue</code>, <code>MouseTracker.vue</code>):</p>
<ul>
<li><strong>åœºæ™¯</strong>: ç»„ä»¶ç®¡ç†æŸä¸ªçŠ¶æ€ï¼ˆå¦‚ <code>isOn</code>ï¼‰æˆ–é€»è¾‘ï¼ˆå¦‚é¼ æ ‡ä½ç½®ï¼‰ï¼Œå¹¶é€šè¿‡ä½œç”¨åŸŸæ’æ§½å°†è¿™äº›çŠ¶æ€æš´éœ²å‡ºå»ï¼Œè®©çˆ¶ç»„ä»¶æ¥å†³å®šå¦‚ä½•æ¸²æŸ“ã€‚</li>
<li><strong>ç”¨æ³•</strong>: å­ç»„ä»¶ <code>&lt;slot :isOn="isOn" :toggle="toggleFunction"&gt;&lt;/slot&gt;</code>ã€‚</li>
</ul>
</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[äº”å¹´å‰ç«¯ï¼Œæˆ‘å‡Œæ™¨ä¸‰ç‚¹çš„ç”µè„‘å±å¹•å‰ç»ˆäºæƒ³é€šäº†è¿™ä»¶äº‹]]></title>    <link>https://juejin.cn/post/7587740546955477032</link>    <guid>https://juejin.cn/post/7587740546955477032</guid>    <pubDate>2025-12-26T13:57:14.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587740546955477032" data-draft-id="7588034035286229007" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="äº”å¹´å‰ç«¯ï¼Œæˆ‘å‡Œæ™¨ä¸‰ç‚¹çš„ç”µè„‘å±å¹•å‰ç»ˆäºæƒ³é€šäº†è¿™ä»¶äº‹"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,Vue.js"/> <meta itemprop="datePublished" content="2025-12-26T13:57:14.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="destinying"/> <meta itemprop="url" content="https://juejin.cn/user/896842287549703"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            äº”å¹´å‰ç«¯ï¼Œæˆ‘å‡Œæ™¨ä¸‰ç‚¹çš„ç”µè„‘å±å¹•å‰ç»ˆäºæƒ³é€šäº†è¿™ä»¶äº‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/896842287549703/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    destinying
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-26T13:57:14.000Z" title="Fri Dec 26 2025 13:57:14 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    4
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">äº”å¹´å‰ç«¯å¼€å‘ï¼šé‚£äº›åŠ ç­åˆ°æ·±å¤œçš„æ—¥å­é‡Œï¼Œæˆ‘ç»ˆäºæ‰¾åˆ°äº†ç­”æ¡ˆ</h2>
<blockquote>
<p>è½¬çœ¼é—´ï¼Œåšå‰ç«¯å·²ç»äº”å¹´äº†ã€‚å›æƒ³èµ·è¿™äº›å¹´çš„ç‚¹ç‚¹æ»´æ»´ï¼Œæœ‰ä¸ºäº†ä¸€ä¸ªåƒç´ å¯¹ä¸é½è€ŒæŠ˜è…¾åˆ°å‡Œæ™¨çš„æ‰§ç€ï¼Œä¹Ÿæœ‰ç»ˆäºè§£å†³äº†ä¸€ä¸ªæ€§èƒ½é—®é¢˜åçš„æ¬£å–œè‹¥ç‹‚ã€‚</p>
</blockquote>
<h3 data-id="heading-1">ğŸ’» é‚£äº›è®©æˆ‘æŠ“ç‹‚çš„ç¬é—´</h3>
<h4 data-id="heading-2">ä¸€ä¸ªpaddingæäº†æˆ‘ä¸€æ™šä¸Š</h4>
<p>è®°å¾—åˆšå…¥è¡Œçš„æ—¶å€™ï¼Œæœ‰ä¸ªå¸ƒå±€é—®é¢˜è®©æˆ‘å¤´ç–¼äº†ä¸€æ•´æ™šã€‚å°±æ˜¯ä¸¤ä¸ªdivä¹‹é—´çš„é—´è·ï¼Œæ€ä¹ˆè°ƒéƒ½ä¸å¯¹ã€‚é‚£æ—¶å€™æˆ‘è¿˜ä¸çŸ¥é“æµè§ˆå™¨é»˜è®¤æ ·å¼è¿™å›äº‹ï¼Œå¯¹ç€Chromeå¼€å‘è€…å·¥å…·ä¸€ééåœ°è¯•ï¼Œå„ç§marginã€paddingç»„åˆï¼Œç»“æœç¬¬äºŒå¤©æ—©ä¸Šä¸€é—®èµ„æ·±åŒäº‹ï¼Œäººå®¶è½»ææ·¡å†™åœ°è¯´ï¼š"reset.cssåŠ äº†ä¹ˆï¼Ÿ"</p>
<p>é‚£ä¸€åˆ»æˆ‘æ‰æ˜ç™½ï¼Œ<strong>å¾ˆå¤šä½ ä»¥ä¸ºçš„æŠ€æœ¯éš¾é¢˜ï¼Œå…¶å®åªæ˜¯çŸ¥è¯†ç›²åŒºè€Œå·²</strong>ã€‚</p>
<h4 data-id="heading-3">"è¿™ä¸ªéœ€æ±‚å¾ˆç®€å•"èƒŒåçš„æ·±å‘</h4>
<p>äº§å“ç»ç†è¯´ï¼š"è¿™ä¸ªéœ€æ±‚å¾ˆç®€å•ï¼Œå°±æ˜¯åŠ ä¸ªæ‹–æ‹½æ’åºåŠŸèƒ½ã€‚"</p>
<p>æˆ‘ï¼š"å¥½çš„ï¼Œåº”è¯¥ä¸€å¤©å°±å¤Ÿäº†ã€‚"</p>
<p>ç„¶åæˆ‘æ‰å‘ç°ï¼Œæ‹–æ‹½æ’åºè¦è€ƒè™‘ï¼š</p>
<ul>
<li>ç§»åŠ¨ç«¯çš„æ‰‹åŠ¿è¯†åˆ«</li>
<li>PCç«¯çš„é¼ æ ‡äº‹ä»¶</li>
<li>ä¸åŒæµè§ˆå™¨çš„äº‹ä»¶å…¼å®¹æ€§</li>
<li>æ‹–æ‹½è¿‡ç¨‹ä¸­çš„è§†è§‰åé¦ˆ</li>
<li>è¾¹ç•Œå¤„ç†å’Œç¢°æ’æ£€æµ‹</li>
<li>æ€§èƒ½ä¼˜åŒ–ï¼ˆé˜²æ­¢é¢‘ç¹é‡ç»˜ï¼‰</li>
<li>å¯è®¿é—®æ€§æ”¯æŒ</li>
</ul>
<p><strong>ä¸‰å¤©å</strong>ï¼Œæˆ‘ç»ˆäºäº¤å‡ºäº†"çœ‹ä¼¼ç®€å•"çš„åŠŸèƒ½ã€‚ä»é‚£ä»¥åï¼Œæˆ‘å†ä¹Ÿä¸è½»æ˜“ç›¸ä¿¡"è¿™ä¸ªéœ€æ±‚å¾ˆç®€å•"è¿™ç§è¯äº†ã€‚</p>
<h3 data-id="heading-4">ğŸŒ± é‚£äº›è®©æˆ‘æˆé•¿çš„æ—¶åˆ»</h3>
<h4 data-id="heading-5">ç¬¬ä¸€æ¬¡é‡æ„è€é¡¹ç›®</h4>
<p>æ¥æ‰‹ä¸€ä¸ªä¸‰å¹´å‰çš„è€é¡¹ç›®ï¼Œä»£ç é‡Œåˆ°å¤„éƒ½æ˜¯<code>document.getElementById</code>ï¼ŒjQueryå’ŒåŸç”ŸJSæ··ç”¨ï¼Œå…¨å±€å˜é‡æ»¡å¤©é£ã€‚é‡æ„è¿‡ç¨‹ä¸­ï¼Œæˆ‘å‘ç°äº†ä¸€äº›æœ‰æ„æ€çš„"é»‘å†å²"ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å½“å¹´çš„å‰è¾ˆä»¬æ˜¯æ€ä¹ˆå†™ä»£ç çš„</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">getData</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">if</span> (data1 == <span class="hljs-literal">null</span>) {
    data1 = [];
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">100</span>; i++) {
      data1.<span class="hljs-title function_">push</span>(i);
    }
  }
  <span class="hljs-keyword">return</span> data1;
}

<span class="hljs-comment">// è¿˜æœ‰è¿™ç§ç¥å¥‡çš„æ“ä½œ</span>
$(<span class="hljs-string">"#button"</span>).<span class="hljs-title function_">click</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
  <span class="hljs-built_in">setTimeout</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
    location.<span class="hljs-title function_">reload</span>();
  }, <span class="hljs-number">100</span>);
});
</code></pre>
<p>é‡æ„é‚£æ®µæ—¶é—´ï¼Œæ¯å¤©éƒ½åœ¨è·Ÿå†å²ä»£ç ææ–—ï¼Œä½†ä¹Ÿæ­£æ˜¯è¿™ä¸ªè¿‡ç¨‹ï¼Œè®©æˆ‘çœŸæ­£ç†è§£äº†ä»€ä¹ˆå«"ä»£ç å¯ç»´æŠ¤æ€§"ã€‚</p>
<h4 data-id="heading-6">å­¦ä¼šäº†è¯´"ä¸"</h4>
<p>ä»¥å‰åˆšå…¥è¡Œæ—¶ï¼Œäº§å“æä»€ä¹ˆéœ€æ±‚æˆ‘éƒ½è¯´"è¡Œ"ã€‚ç›´åˆ°æœ‰ä¸€æ¬¡ï¼Œä¸ºäº†èµ¶ä¸€ä¸ªä¸åˆç†çš„deadlineï¼Œæˆ‘ç†¬äº†å¥½å‡ ä¸ªé€šå®µï¼Œæœ€åä¸Šçº¿çš„ç‰ˆæœ¬è¿˜å‡ºäº†bugã€‚</p>
<p>åæ¥æˆ‘å­¦èªæ˜äº†ï¼Œå¼€å§‹è·Ÿäº§å“å’Œæ²Ÿé€šï¼š</p>
<ul>
<li>è¿™ä¸ªéœ€æ±‚çš„æŠ€æœ¯å¤æ‚åº¦æ˜¯å¤šå°‘</li>
<li>éœ€è¦å¤šå°‘å¼€å‘æ—¶é—´</li>
<li>å¦‚æœä¸€å®šè¦æå‰ï¼Œå“ªäº›åŠŸèƒ½å¯ä»¥ç æ‰</li>
<li>å½“å‰æŠ€æœ¯æ–¹æ¡ˆçš„é£é™©ç‚¹åœ¨å“ªé‡Œ</li>
</ul>
<p><strong>å­¦ä¼šè¯„ä¼°å’Œæ²Ÿé€šï¼Œæ¯”å­¦ä¼šå†™ä»£ç æ›´é‡è¦</strong>ã€‚</p>
<h3 data-id="heading-7">ğŸ¤” ç¨‹åºå‘˜çš„æ—¥å¸¸æ€è€ƒ</h3>
<h4 data-id="heading-8">å…³äºåŠ ç­çš„é‚£äº›äº‹</h4>
<p>åˆšå¼€å§‹å·¥ä½œçš„æ—¶å€™ï¼Œæˆ‘è§‰å¾—åŠ ç­=åŠªåŠ›ã€‚åæ¥æ…¢æ…¢å‘ç°ï¼š</p>
<ul>
<li><strong>æœ‰æ•ˆçš„æ—¶é—´ç®¡ç†æ¯”é•¿æ—¶é—´å·¥ä½œæ›´é‡è¦</strong></li>
<li><strong>ä¼šå†™ä»£ç ä¸ç­‰äºä¼šè§£å†³é—®é¢˜</strong></li>
<li><strong>å¥åº·æ¯”KPIé‡è¦å¾—å¤š</strong></li>
</ul>
<p>æˆ‘ç°åœ¨å°½é‡ä¸åŠ ç­ï¼Œä¸æ˜¯å› ä¸ºæ‡’ï¼Œè€Œæ˜¯æˆ‘å­¦ä¼šäº†ï¼š</p>
<ul>
<li>æå‰è¯„ä¼°å·¥ä½œé‡</li>
<li>åŠæ—¶æ²Ÿé€šé£é™©</li>
<li>æ‹’ç»ä¸åˆç†çš„éœ€æ±‚</li>
<li>ä¿æŒä¸“æ³¨ï¼Œå‡å°‘æ— æ•ˆåŠ ç­</li>
</ul>
<h4 data-id="heading-9">å…³äºæŠ€æœ¯ç„¦è™‘</h4>
<p>å‰ç«¯æŠ€æœ¯æ›´æ–°å¤ªå¿«ï¼ŒVueè¿˜æ²¡å­¦å®Œï¼ŒReactåˆå‡ºäº†æ–°ç‰¹æ€§ï¼ŒCSSæ¡†æ¶å±‚å‡ºä¸ç©·ã€‚å‰ä¸¤å¹´æˆ‘å¾ˆç„¦è™‘ï¼Œæ€•è¢«æ·˜æ±°ã€‚</p>
<p>ç°åœ¨æˆ‘æƒ³é€šäº†ï¼š</p>
<ul>
<li><strong>åŸºç¡€æ°¸è¿œæ˜¯ç‹é“</strong>ï¼šHTML/CSS/JavaScriptçš„æ ¸å¿ƒä¸ä¼šå˜</li>
<li><strong>å­¦ä¹ è¦è®²æ–¹æ³•</strong>ï¼šä¸è¦è¿½ç€æ–°æŠ€æœ¯è·‘ï¼Œè¦æœ‰é€‰æ‹©åœ°å­¦</li>
<li><strong>é¡¹ç›®é©±åŠ¨å­¦ä¹ </strong>ï¼šåœ¨å®é™…é¡¹ç›®ä¸­å­¦ä¹ æ–°æŠ€æœ¯æ•ˆæœæœ€å¥½</li>
<li><strong>ä¿æŒè¾“å‡º</strong>ï¼šå†™åšå®¢ã€åšåˆ†äº«æ˜¯æœ€å¥½çš„å­¦ä¹ æ–¹å¼</li>
</ul>
<h3 data-id="heading-10">ğŸ’ª çœŸæ­£çš„æˆé•¿æ˜¯ä»€ä¹ˆ</h3>
<h4 data-id="heading-11">ä»æŠ€æœ¯æ€ç»´åˆ°äº§å“æ€ç»´</h4>
<p>åˆšå¼€å§‹æˆ‘åªå…³å¿ƒä»£ç å†™å¾—çˆ½ä¸çˆ½ï¼Œåæ¥æˆ‘å¼€å§‹æ€è€ƒï¼š</p>
<ul>
<li>ç”¨æˆ·çœŸçš„éœ€è¦è¿™ä¸ªåŠŸèƒ½å—ï¼Ÿ</li>
<li>è¿™ä¸ªäº¤äº’ä½“éªŒå¤Ÿå¥½å—ï¼Ÿ</li>
<li>æ€§èƒ½ä¼˜åŒ–èƒ½å¸¦æ¥ä»€ä¹ˆä»·å€¼ï¼Ÿ</li>
<li>æˆ‘çš„ä»£ç å¯¹å›¢é˜Ÿåä½œå‹å¥½å—ï¼Ÿ</li>
</ul>
<p><strong>æŠ€æœ¯æ˜¯å·¥å…·ï¼Œä¸æ˜¯ç›®çš„</strong>ã€‚çœŸæ­£çš„å‰ç«¯å¼€å‘ï¼Œæ˜¯ç”¨æŠ€æœ¯ä¸ºç”¨æˆ·åˆ›é€ ä»·å€¼ã€‚</p>
<h4 data-id="heading-12">æ‰¾åˆ°äº†è‡ªå·±çš„èŠ‚å¥</h4>
<p>ç°åœ¨çš„æˆ‘ï¼š</p>
<ul>
<li>ä¸å†ç›²ç›®è¿½æ–°æŠ€æœ¯ï¼Œè€Œæ˜¯é€‰æ‹©é€‚åˆè‡ªå·±çš„æŠ€æœ¯æ ˆ</li>
<li>é‡è§†ä»£ç è´¨é‡ï¼Œä½†ä¸æ‰§ç€äºå®Œç¾</li>
<li>ä¼šä¸»åŠ¨æ²Ÿé€šéœ€æ±‚ï¼Œè€Œä¸æ˜¯è¢«åŠ¨æ¥å—</li>
<li>ä¿æŒå­¦ä¹ çš„çƒ­æƒ…ï¼Œä½†ä¸ç„¦è™‘</li>
<li>çŸ¥é“ä»€ä¹ˆæ—¶å€™è¯¥åŠªåŠ›ï¼Œä»€ä¹ˆæ—¶å€™è¯¥ä¼‘æ¯</li>
</ul>
<h3 data-id="heading-13">ğŸ¯ ç»™è‡ªå·±çš„ä¸€äº›è¯</h3>
<p>äº”å¹´ä¸‹æ¥ï¼Œæˆ‘æƒ³å¯¹è‡ªå·±è¯´ï¼š</p>
<ol>
<li><strong>ä¿æŒå¥½å¥‡ï¼Œä½†ä¸è¦ç›²ç›®è·Ÿé£</strong></li>
<li><strong>å†™ä»£ç å¾ˆé‡è¦ï¼Œä½†è§£å†³é—®é¢˜æ›´é‡è¦</strong></li>
<li><strong>æŠ€æœ¯è¦ç²¾è¿›ï¼Œä½†ç”Ÿæ´»ä¹Ÿè¦å¹³è¡¡</strong></li>
<li><strong>å¤šåˆ†äº«ï¼Œå¤šäº¤æµï¼Œå¤šæ€è€ƒ</strong></li>
<li><strong>è®°ä½ï¼Œä½ é¦–å…ˆæ˜¯ä¸€ä¸ªäººï¼Œå…¶æ¬¡æ‰æ˜¯ç¨‹åºå‘˜</strong></li>
</ol>
<h3 data-id="heading-14">âœ¨ ä¸‹ä¸€ä¸ªäº”å¹´</h3>
<p>æŠ€æœ¯è¿™æ¡è·¯å¾ˆé•¿ï¼Œä½†æˆ‘ä¸æ€¥äº†ã€‚æ…¢æ…¢åœ°å­¦ä¹ ï¼Œç¨³ç¨³åœ°æˆé•¿ï¼Œè¸å®åšå¥½æ¯ä¸€ä¸ªé¡¹ç›®ã€‚</p>
<p>æ¯•ç«Ÿï¼Œ<strong>æœ€å¥½çš„ä»£ç ä¸æ˜¯æœ€å¤æ‚çš„ï¼Œè€Œæ˜¯æœ€åˆé€‚çš„</strong>ã€‚æœ€å¥½çš„ç¨‹åºå‘˜ä¸æ˜¯æœ€èªæ˜çš„ï¼Œè€Œæ˜¯æœ€æ‡‚å¾—å¹³è¡¡çš„ã€‚</p>
<p>æ„¿æˆ‘ä»¬éƒ½èƒ½åœ¨è¿™æ¡è·¯ä¸Šï¼Œæ‰¾åˆ°å±äºè‡ªå·±çš„èŠ‚å¥å’Œç­”æ¡ˆã€‚</p>
<hr/>
<p><em>ä½ åœ¨å‰ç«¯è·¯ä¸Šæœ‰ä»€ä¹ˆéš¾å¿˜çš„ç»å†ï¼Ÿæ¬¢è¿åœ¨è¯„è®ºåŒºåˆ†äº«ä½ çš„æ•…äº‹ã€‚</em></p>
<p>#å‰ç«¯å¼€å‘ #ç¨‹åºå‘˜æˆé•¿ #æŠ€æœ¯æ„Ÿæ‚Ÿ #èŒåœºç»éªŒ #çœŸå®æ„Ÿå—</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Androidç¨³å®šæ€§åŸºç¡€:ç³»ç»Ÿæ¶æ„ä¸å…³é”®æœºåˆ¶]]></title>    <link>https://juejin.cn/post/7587776610436497423</link>    <guid>https://juejin.cn/post/7587776610436497423</guid>    <pubDate>2025-12-26T12:45:07.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587776610436497423" data-draft-id="7587808953076678656" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Androidç¨³å®šæ€§åŸºç¡€:ç³»ç»Ÿæ¶æ„ä¸å…³é”®æœºåˆ¶"/> <meta itemprop="keywords" content="Android,æ€§èƒ½ä¼˜åŒ–"/> <meta itemprop="datePublished" content="2025-12-26T12:45:07.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å†¬å¥‡Lab"/> <meta itemprop="url" content="https://juejin.cn/user/1857501105781193"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Androidç¨³å®šæ€§åŸºç¡€:ç³»ç»Ÿæ¶æ„ä¸å…³é”®æœºåˆ¶
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1857501105781193/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å†¬å¥‡Lab
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-26T12:45:07.000Z" title="Fri Dec 26 2025 12:45:07 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»15åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Androidç¨³å®šæ€§åŸºç¡€:ç³»ç»Ÿæ¶æ„ä¸å…³é”®æœºåˆ¶</h2>
<blockquote>
<p>ç³»ç»Ÿç¨³å®šæ€§æ˜¯ç”¨æˆ·ä½“éªŒçš„åŸºçŸ³,ä¹Ÿæ˜¯å“ç‰Œå£ç¢‘çš„ç”Ÿå‘½çº¿ã€‚</p>
</blockquote>
<h3 data-id="heading-1">å¼•è¨€:ä¸ºä»€ä¹ˆç³»ç»Ÿç¨³å®šæ€§å¦‚æ­¤é‡è¦?</h3>
<p>è¿˜è®°å¾—æŸçŸ¥åæ‰‹æœºå“ç‰Œå› ä¸ºç³»ç»Ÿé¢‘ç¹æ­»æœºè¢«ç”¨æˆ·é›†ä½“æŠ•è¯‰çš„æ–°é—»å—?ä¸€æ¬¡ç³»ç»Ÿå´©æºƒå¯èƒ½åªéœ€è¦å‡ ç§’é’Ÿ,ä½†å¯¹å“ç‰Œå½¢è±¡çš„ä¼¤å®³å´éœ€è¦å‡ å¹´æ¥ä¿®å¤ã€‚</p>
<p>ä½œä¸ºä¸€åAndroid Frameworkå·¥ç¨‹å¸ˆ,ä½ å¯èƒ½ç»å¸¸ä¼šé‡åˆ°è¿™æ ·çš„åœºæ™¯:</p>
<ul>
<li>æµ‹è¯•åŒå­¦æ°”å†²å†²åœ°è·‘è¿‡æ¥:"æ‰‹æœºåˆå¡æ­»äº†!"</li>
<li>ç”¨æˆ·åé¦ˆ:"AppåŠ¨ä¸åŠ¨å°±é—ªé€€,å¤ªçƒ‚äº†!"</li>
<li>è€æ¿åœ¨ç¾¤é‡Œ@æ‰€æœ‰äºº:"çº¿ä¸Šå‡ºç°å¤§é¢ç§¯ANR,ç´§æ€¥å¤„ç†!"</li>
</ul>
<p>è¿™äº›é—®é¢˜çš„èƒŒå,éƒ½æŒ‡å‘åŒä¸€ä¸ªä¸»é¢˜â€”â€”<strong>ç³»ç»Ÿç¨³å®šæ€§</strong>ã€‚</p>
<p>ç³»ç»Ÿç¨³å®šæ€§å°±åƒæ˜¯æˆ¿å­çš„åœ°åŸºã€‚åœ°åŸºä¸ç¨³,å†æ¼‚äº®çš„è£…ä¿®ä¹Ÿæ˜¯ç©ºä¸­æ¥¼é˜ã€‚Androidç³»ç»Ÿè¿è¡Œç€æ•°åä¸ªç³»ç»Ÿè¿›ç¨‹ã€ä¸Šç™¾ä¸ªç³»ç»ŸæœåŠ¡,å®ƒä»¬å°±åƒä¸€ä¸ªç²¾å¯†çš„äº¤å“ä¹å›¢,ä»»ä½•ä¸€ä¸ªæˆå‘˜å‡ºäº†é—®é¢˜,æ•´åœºæ¼”å‡ºéƒ½ä¼šå—åˆ°å½±å“ã€‚</p>
<p>æœ¬æ–‡æ˜¯ã€ŠAndroidç³»ç»Ÿç¨³å®šæ€§ä¸æ€§èƒ½ä¼˜åŒ–ã€‹ç³»åˆ—çš„å¼€ç¯‡ä¹‹ä½œã€‚æˆ‘ä»¬å°†ä»Androidç³»ç»Ÿæ¶æ„å‡ºå‘,å¸¦ä½ å»ºç«‹èµ·ç³»ç»Ÿç¨³å®šæ€§åˆ†æçš„åŸºç¡€è®¤çŸ¥æ¡†æ¶ã€‚è¯»å®Œæœ¬æ–‡,ä½ å°†èƒ½å¤Ÿ:</p>
<ol>
<li>ç†è§£Androidç³»ç»Ÿåˆ†å±‚æ¶æ„ä¸ç¨³å®šæ€§çš„å…³ç³»</li>
<li>æŒæ¡ç³»ç»Ÿç¨³å®šæ€§çš„æ ¸å¿ƒæœºåˆ¶å’Œå…³é”®ç»„ä»¶</li>
<li>äº†è§£ç¨³å®šæ€§é—®é¢˜çš„åˆ†ç±»å’Œè¡¨ç°å½¢å¼</li>
<li>å»ºç«‹ç³»ç»Ÿç¨³å®šæ€§åˆ†æçš„åŸºç¡€æ€ç»´æ¡†æ¶</li>
</ol>
<p>å‡†å¤‡å¥½äº†å—?è®©æˆ‘ä»¬å¼€å§‹è¿™æ®µæ¢ç´¢ä¹‹æ—…!</p>
<hr/>
<h3 data-id="heading-2">ä¸€ã€Androidç³»ç»Ÿæ¶æ„å›é¡¾</h3>
<p>è¦ç†è§£ç³»ç»Ÿç¨³å®šæ€§,é¦–å…ˆè¦å¯¹Androidçš„ç³»ç»Ÿæ¶æ„æœ‰æ¸…æ™°çš„è®¤è¯†ã€‚å¦‚æœæŠŠAndroidç³»ç»Ÿæ¯”ä½œä¸€æ ‹å¤§æ¥¼,é‚£ä¹ˆå®ƒæ˜¯è¿™æ ·åˆ†å±‚å»ºé€ çš„:</p>
<h4 data-id="heading-3">1.1 åˆ†å±‚æ¶æ„æ¦‚è§ˆ</h4>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/12a44f64f0a2406bbef3524a012c752a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yas5aWHTGFi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767357907&amp;x-signature=0pGk1YvoHwtfPNJcf00Qo15WlKI%3D" alt="01-01-android-architecture.png" loading="lazy"/></p>
<p>è¿™ç§åˆ†å±‚è®¾è®¡å°±åƒæ˜¯ä¸€ä¸ªé‡‘å­—å¡”,<strong>è¶Šå¾€ä¸‹å±‚è¶Šç¨³å®š,ä½†å‡ºé—®é¢˜çš„å½±å“ä¹Ÿè¶Šå¤§</strong>ã€‚</p>
<p>æ‰“ä¸ªæ¯”æ–¹:å¦‚æœä½ å®¶çš„ç¯æ³¡åäº†(åº”ç”¨å±‚),æ¢ä¸€ä¸ªå°±å¥½;å¦‚æœç”µè·¯æ¿çƒ§äº†(Frameworkå±‚),å¯èƒ½æ•´ä¸ªæˆ¿é—´éƒ½æ²¡ç”µ;å¦‚æœå˜å‹å™¨ç‚¸äº†(Kernelå±‚),æ•´æ ‹æ¥¼éƒ½è¦é­æ®ƒ!</p>
<h4 data-id="heading-4">1.2 å„å±‚å¯¹ç¨³å®šæ€§çš„å½±å“</h4>
<p>è®©æˆ‘ä»¬é€å±‚åˆ†æ,çœ‹çœ‹æ¯ä¸€å±‚å¯èƒ½å‡ºç°ä»€ä¹ˆç¨³å®šæ€§é—®é¢˜:</p>
<h5 data-id="heading-5">åº”ç”¨å±‚ (Applications)</h5>
<p>è¿™æ˜¯ç”¨æˆ·ç›´æ¥æ¥è§¦çš„å±‚é¢,ç¨³å®šæ€§é—®é¢˜ä¸»è¦è¡¨ç°ä¸º:</p>
<ul>
<li><strong>Java Crash</strong>: æœªæ•è·çš„å¼‚å¸¸å¯¼è‡´åº”ç”¨é—ªé€€</li>
<li><strong>ANR</strong>: ä¸»çº¿ç¨‹é˜»å¡å¯¼è‡´åº”ç”¨æ— å“åº”</li>
<li><strong>å†…å­˜æ³„æ¼</strong>: æŒç»­å ç”¨å†…å­˜æœ€ç»ˆå¯¼è‡´OOM</li>
</ul>
<p><strong>å½±å“èŒƒå›´</strong>: å•ä¸ªåº”ç”¨
<strong>ä¸¥é‡ç¨‹åº¦</strong>: ä¸€èˆ¬(ç”¨æˆ·å¯ä»¥é‡æ–°æ‰“å¼€åº”ç”¨)</p>
<h5 data-id="heading-6">Frameworkå±‚ (Application Framework)</h5>
<p>è¿™æ˜¯Androidçš„"å¤§è„‘",æä¾›äº†æ‰€æœ‰åº”ç”¨è¿è¡Œæ‰€éœ€çš„æœåŠ¡:</p>
<ul>
<li><strong>System Server Crash</strong>: æ ¸å¿ƒç³»ç»ŸæœåŠ¡å´©æºƒ,å¯¼è‡´ç³»ç»Ÿé‡å¯</li>
<li><strong>æœåŠ¡æ­»é”</strong>: å¤šä¸ªæœåŠ¡ç›¸äº’ç­‰å¾…,ç³»ç»Ÿå¡æ­»</li>
<li><strong>Binderèµ„æºè€—å°½</strong>: è¿›ç¨‹é—´é€šä¿¡é˜»å¡</li>
</ul>
<p><strong>å½±å“èŒƒå›´</strong>: æ•´ä¸ªç³»ç»Ÿ
<strong>ä¸¥é‡ç¨‹åº¦</strong>: ä¸¥é‡(å¯èƒ½å¯¼è‡´ç³»ç»Ÿé‡å¯)</p>
<h5 data-id="heading-7">Nativeå±‚ (Native Libraries &amp; ART)</h5>
<p>è¿™ä¸€å±‚ç”¨C/C++ç¼–å†™,æ‰§è¡Œæ•ˆç‡é«˜ä½†ä¹Ÿæ›´å®¹æ˜“å‡ºé—®é¢˜:</p>
<ul>
<li><strong>Native Crash</strong>: SIGSEGVã€SIGABRTç­‰ä¿¡å·å¯¼è‡´è¿›ç¨‹ç»ˆæ­¢</li>
<li><strong>å†…å­˜è®¿é—®è¿è§„</strong>: é‡æŒ‡é’ˆã€æ•°ç»„è¶Šç•Œ</li>
<li><strong>èµ„æºæ³„æ¼</strong>: æ–‡ä»¶æè¿°ç¬¦ã€å†…å­˜æ³„æ¼</li>
</ul>
<p><strong>å½±å“èŒƒå›´</strong>: å•ä¸ªè¿›ç¨‹åˆ°æ•´ä¸ªç³»ç»Ÿ
<strong>ä¸¥é‡ç¨‹åº¦</strong>: é‡è¦åˆ°ä¸¥é‡</p>
<h5 data-id="heading-8">HALå±‚ (Hardware Abstraction Layer)</h5>
<p>ç¡¬ä»¶æŠ½è±¡å±‚è¿æ¥è½¯ä»¶å’Œç¡¬ä»¶:</p>
<ul>
<li><strong>HALæœåŠ¡å´©æºƒ</strong>: ç¡¬ä»¶åŠŸèƒ½ä¸å¯ç”¨</li>
<li><strong>ç¡¬ä»¶è¶…æ—¶</strong>: ä¸ç¡¬ä»¶é€šä¿¡è¶…æ—¶</li>
</ul>
<p><strong>å½±å“èŒƒå›´</strong>: ç‰¹å®šç¡¬ä»¶åŠŸèƒ½
<strong>ä¸¥é‡ç¨‹åº¦</strong>: é‡è¦</p>
<h5 data-id="heading-9">Kernelå±‚ (Linux Kernel)</h5>
<p>è¿™æ˜¯ç³»ç»Ÿçš„æ ¹åŸº:</p>
<ul>
<li><strong>Kernel Panic</strong>: å†…æ ¸å´©æºƒ,ç³»ç»Ÿç›´æ¥é‡å¯</li>
<li><strong>é©±åŠ¨å´©æºƒ</strong>: ç‰¹å®šç¡¬ä»¶åŠŸèƒ½å¼‚å¸¸</li>
<li><strong>æ­»é”</strong>: ç³»ç»Ÿå®Œå…¨å¡æ­»</li>
</ul>
<p><strong>å½±å“èŒƒå›´</strong>: æ•´ä¸ªè®¾å¤‡
<strong>ä¸¥é‡ç¨‹åº¦</strong>: è‡´å‘½</p>
<h4 data-id="heading-10">1.3 å…³é”®è¿›ç¨‹ä¸æœåŠ¡</h4>
<p>åœ¨Androidç³»ç»Ÿä¸­,æœ‰å‡ ä¸ªè¿›ç¨‹æ˜¯"å‘½æ ¹å­",å®ƒä»¬æŒ‚äº†,æ•´ä¸ªç³»ç»Ÿå°±å¾—é‡å¯:</p>
<h5 data-id="heading-11">Zygoteè¿›ç¨‹</h5>
<p>Zygoteæ˜¯Androidçš„"å­µåŒ–å™¨",æ‰€æœ‰åº”ç”¨è¿›ç¨‹éƒ½æ˜¯ä»å®ƒforkå‡ºæ¥çš„ã€‚å¯ä»¥æŠŠå®ƒæƒ³è±¡æˆä¸€ä¸ª"åº”ç”¨å·¥å‚":</p>
<pre><code class="hljs language-scss" lang="scss">Zygote
  â”œâ”€â”€ <span class="hljs-built_in">fork</span>() â†’ App1è¿›ç¨‹
  â”œâ”€â”€ <span class="hljs-built_in">fork</span>() â†’ App2è¿›ç¨‹
  â”œâ”€â”€ <span class="hljs-built_in">fork</span>() â†’ App3è¿›ç¨‹
  â””â”€â”€ <span class="hljs-built_in">fork</span>() â†’ System Serverè¿›ç¨‹
</code></pre>
<p>å¦‚æœZygoteæŒ‚äº†,å°±åƒå·¥å‚å€’é—­äº†,æ–°çš„åº”ç”¨è¿›ç¨‹æ— æ³•åˆ›å»º,ç³»ç»Ÿåªèƒ½é‡å¯ã€‚</p>
<h5 data-id="heading-12">System Serverè¿›ç¨‹</h5>
<p>System Serveræ˜¯Androidçš„"å¤§ç®¡å®¶",è¿è¡Œç€å‡ ä¹æ‰€æœ‰æ ¸å¿ƒç³»ç»ŸæœåŠ¡:</p>



































<table><thead><tr><th>æœåŠ¡åç§°</th><th>èŒè´£</th><th>æŒ‚äº†ä¼šæ€æ ·</th></tr></thead><tbody><tr><td>ActivityManagerService</td><td>ç®¡ç†å››å¤§ç»„ä»¶ç”Ÿå‘½å‘¨æœŸ</td><td>æ— æ³•å¯åŠ¨/åˆ‡æ¢åº”ç”¨</td></tr><tr><td>WindowManagerService</td><td>ç®¡ç†çª—å£æ˜¾ç¤º</td><td>å±å¹•ä¸€ç‰‡ç©ºç™½</td></tr><tr><td>PackageManagerService</td><td>ç®¡ç†åº”ç”¨å®‰è£…/æŸ¥è¯¢</td><td>æ— æ³•å®‰è£…/æŸ¥æ‰¾åº”ç”¨</td></tr><tr><td>PowerManagerService</td><td>ç®¡ç†ç”µæºçŠ¶æ€</td><td>æ— æ³•ä¼‘çœ /å”¤é†’</td></tr><tr><td>InputManagerService</td><td>ç®¡ç†è¾“å…¥äº‹ä»¶</td><td>è§¦æ‘¸/æŒ‰é”®å¤±æ•ˆ</td></tr></tbody></table>
<p>System Serverä¸€æ—¦å´©æºƒ,æ•´ä¸ªç³»ç»Ÿå°±ä¼šé‡å¯(ä½ ä¼šçœ‹åˆ°å¼€æœºåŠ¨ç”»é‡æ–°æ’­æ”¾)ã€‚</p>
<h5 data-id="heading-13">SurfaceFlingerè¿›ç¨‹</h5>
<p>SurfaceFlingeræ˜¯Androidçš„"ç”»å¸ˆ",è´Ÿè´£å°†æ‰€æœ‰åº”ç”¨çš„ç•Œé¢åˆæˆåæ˜¾ç¤ºåˆ°å±å¹•ä¸Š:</p>
<pre><code class="hljs language-css" lang="css">App1 Surface â”€â”
App2 Surface â”€â”€â”¼â”€â”€â†’ SurfaceFlinger â”€â”€â†’ <span class="hljs-attribute">Display</span>
StatusBar    â”€â”˜
</code></pre>
<p>å¦‚æœSurfaceFlingeræŒ‚äº†,å±å¹•è¦ä¹ˆé»‘å±,è¦ä¹ˆç”»é¢å®šæ ¼ã€‚</p>
<hr/>
<h3 data-id="heading-14">äºŒã€ç¨³å®šæ€§æ ¸å¿ƒæœºåˆ¶</h3>
<p>Androidç³»ç»Ÿè®¾è®¡äº†å¤šç§æœºåˆ¶æ¥ä¿éšœç¨³å®šæ€§,å°±åƒäººä½“çš„å…ç–«ç³»ç»Ÿä¸€æ ·ã€‚è®©æˆ‘ä»¬é€ä¸€äº†è§£è¿™äº›"æŠ¤åŸæ²³"ã€‚</p>
<h4 data-id="heading-15">2.1 è¿›ç¨‹ç®¡ç†æœºåˆ¶</h4>
<p>Androidæ˜¯ä¸€ä¸ªå¤šä»»åŠ¡æ“ä½œç³»ç»Ÿ,ä½†æ‰‹æœºçš„å†…å­˜æ˜¯æœ‰é™çš„ã€‚å¦‚ä½•åœ¨æœ‰é™çš„èµ„æºä¸‹ä¿è¯ç³»ç»Ÿæµç•…è¿è¡Œ?ç­”æ¡ˆæ˜¯<strong>è¿›ç¨‹ä¼˜å…ˆçº§ç®¡ç†</strong>å’Œ<strong>Low Memory Killer (LMK)</strong>ã€‚</p>
<h5 data-id="heading-16">è¿›ç¨‹ä¼˜å…ˆçº§</h5>
<p>Androidæ ¹æ®è¿›ç¨‹çš„é‡è¦æ€§å°†å…¶åˆ†ä¸º5ä¸ªç­‰çº§:</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2d1d8b3f5d06479ebe824d587664a23e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yas5aWHTGFi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767357907&amp;x-signature=mJkiv4sgDLoVXnaz9Qh9ysdVU%2BY%3D" alt="01-02-process-priority-lmk.png" loading="lazy"/></p>















































<table><thead><tr><th>ä¼˜å…ˆçº§</th><th>åç§°</th><th>oom_adj</th><th>è¯´æ˜</th><th>ä¾‹å­</th></tr></thead><tbody><tr><td>æœ€é«˜</td><td>Foreground</td><td>0</td><td>ç”¨æˆ·æ­£åœ¨äº¤äº’çš„è¿›ç¨‹</td><td>å‰å°App</td></tr><tr><td>é«˜</td><td>Visible</td><td>100</td><td>å¯è§ä½†ä¸åœ¨å‰å°</td><td>åå°æœ‰æ‚¬æµ®çª—çš„App</td></tr><tr><td>ä¸­</td><td>Service</td><td>200</td><td>è¿è¡Œåå°æœåŠ¡çš„è¿›ç¨‹</td><td>éŸ³ä¹æ’­æ”¾å™¨</td></tr><tr><td>ä½</td><td>Cached</td><td>900</td><td>ç¼“å­˜çš„åå°è¿›ç¨‹</td><td>æœ€è¿‘ä½¿ç”¨çš„App</td></tr><tr><td>æœ€ä½</td><td>Empty</td><td>999</td><td>ç©ºè¿›ç¨‹,éšæ—¶å¯æ€</td><td>å·²é€€å‡ºçš„App</td></tr></tbody></table>
<p>å¯ä»¥ç”¨ä»¥ä¸‹ä»£ç æŸ¥çœ‹è¿›ç¨‹ä¼˜å…ˆçº§:</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// æŸ¥çœ‹è¿›ç¨‹ä¼˜å…ˆçº§</span>
<span class="hljs-type">ActivityManager</span> <span class="hljs-variable">am</span> <span class="hljs-operator">=</span> getSystemService(ActivityManager.class);
List&lt;ActivityManager.RunningAppProcessInfo&gt; processes = am.getRunningAppProcesses();
<span class="hljs-keyword">for</span> (ActivityManager.RunningAppProcessInfo info : processes) {
    Log.d(TAG, <span class="hljs-string">"Process: "</span> + info.processName +
          <span class="hljs-string">", Importance: "</span> + info.importance +
          <span class="hljs-string">", ImportanceReasonCode: "</span> + info.importanceReasonCode);
}
</code></pre>
<h5 data-id="heading-17">Low Memory Killer (LMK)</h5>
<p>å½“ç³»ç»Ÿå†…å­˜ä¸è¶³æ—¶,LMKå°±ä¼šå‡ºé©¬"æ€è¿›ç¨‹"ã€‚å®ƒçš„å·¥ä½œåŸç†å¾ˆç®€å•:<strong>ä¼˜å…ˆæ€ä½ä¼˜å…ˆçº§çš„è¿›ç¨‹,é‡Šæ”¾å†…å­˜ç»™é«˜ä¼˜å…ˆçº§è¿›ç¨‹ä½¿ç”¨</strong>ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">å†…å­˜å……è¶³æ—¶:  <span class="hljs-section">[å‰å°App]</span> <span class="hljs-section">[å¯è§App]</span> <span class="hljs-section">[æœåŠ¡]</span> <span class="hljs-section">[ç¼“å­˜1]</span> <span class="hljs-section">[ç¼“å­˜2]</span> <span class="hljs-section">[ç©ºè¿›ç¨‹]</span>
                â†“ å†…å­˜ç´§å¼ 
å†…å­˜ç´§å¼ æ—¶:  <span class="hljs-section">[å‰å°App]</span> <span class="hljs-section">[å¯è§App]</span> <span class="hljs-section">[æœåŠ¡]</span> <span class="hljs-section">[ç¼“å­˜1]</span>  â† ç©ºè¿›ç¨‹å’Œç¼“å­˜2è¢«æ€
                â†“ å†…å­˜ä¸¥é‡ä¸è¶³
æç«¯æƒ…å†µ:    <span class="hljs-section">[å‰å°App]</span> <span class="hljs-section">[å¯è§App]</span>  â† è¿æœåŠ¡è¿›ç¨‹éƒ½è¢«æ€äº†
</code></pre>
<p><strong>LMK vs OOM Killerçš„åŒºåˆ«</strong>:</p>






























<table><thead><tr><th>ç‰¹æ€§</th><th>LMK</th><th>OOM Killer</th></tr></thead><tbody><tr><td>æ‰€å±å±‚</td><td>Androidç”¨æˆ·ç©ºé—´</td><td>Linuxå†…æ ¸</td></tr><tr><td>è§¦å‘æ—¶æœº</td><td>å†…å­˜ä½äºé˜ˆå€¼æ—¶(ä¸»åŠ¨)</td><td>å†…å­˜è€—å°½æ—¶(è¢«åŠ¨)</td></tr><tr><td>æ€è¿›ç¨‹ç­–ç•¥</td><td>åŸºäºoom_adjä¼˜å…ˆçº§</td><td>åŸºäºoom_score</td></tr><tr><td>ç›®çš„</td><td>é¢„é˜²æ€§é‡Šæ”¾å†…å­˜</td><td>ç´§æ€¥é‡Šæ”¾å†…å­˜</td></tr></tbody></table>
<p>LMKå°±åƒæ˜¯ä¸€ä¸ª"æœªé›¨ç»¸ç¼ª"çš„ç®¡å®¶,åœ¨å†…å­˜ç´§å¼ ä¹‹å‰å°±å¼€å§‹æ¸…ç†;è€ŒOOM Killeræ˜¯"äº¡ç¾Šè¡¥ç‰¢"çš„æœ€åæ‰‹æ®µã€‚</p>
<h4 data-id="heading-18">2.2 å¼‚å¸¸ç›‘æ§æœºåˆ¶</h4>
<p>Androidç³»ç»Ÿæœ‰ä¸€å¥—å®Œå–„çš„"å¥åº·æ£€æŸ¥"æœºåˆ¶,èƒ½å¤ŸåŠæ—¶å‘ç°å¹¶å¤„ç†å„ç§å¼‚å¸¸ã€‚</p>
<h5 data-id="heading-19">ANRç›‘æ§</h5>
<p>ANR (Application Not Responding) æ˜¯ç”¨æˆ·æœ€å¸¸é‡åˆ°çš„ç¨³å®šæ€§é—®é¢˜ä¹‹ä¸€ã€‚å½“åº”ç”¨åœ¨è§„å®šæ—¶é—´å†…æ²¡æœ‰å“åº”,ç³»ç»Ÿå°±ä¼šå¼¹å‡º"åº”ç”¨æ— å“åº”"å¯¹è¯æ¡†ã€‚</p>
<p>ANRçš„è§¦å‘æ¡ä»¶:</p>






























<table><thead><tr><th>ç±»å‹</th><th>è¶…æ—¶æ—¶é—´</th><th>è§¦å‘åœºæ™¯</th></tr></thead><tbody><tr><td>Inputäº‹ä»¶</td><td>5ç§’</td><td>è§¦æ‘¸/æŒ‰é”®äº‹ä»¶æœªå¤„ç†</td></tr><tr><td>Broadcast</td><td>å‰å°10ç§’/åå°60ç§’</td><td>å¹¿æ’­æ¥æ”¶å™¨æœªå®Œæˆ</td></tr><tr><td>Service</td><td>å‰å°20ç§’/åå°200ç§’</td><td>æœåŠ¡å¯åŠ¨æœªå®Œæˆ</td></tr><tr><td>ContentProvider</td><td>10ç§’</td><td>Providerå‘å¸ƒè¶…æ—¶</td></tr></tbody></table>
<p>ANRç›‘æ§çš„æ ¸å¿ƒé€»è¾‘:</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ç®€åŒ–çš„ANRæ£€æµ‹é€»è¾‘ (InputDispatcher.cpp)</span>
<span class="hljs-keyword">void</span> InputDispatcher::handleAnr() {
    <span class="hljs-comment">// 1. å‘é€è¾“å…¥äº‹ä»¶ç»™åº”ç”¨</span>
    dispatchEventLocked(event);

    <span class="hljs-comment">// 2. è®¾ç½®è¶…æ—¶å®šæ—¶å™¨ (5ç§’)</span>
    mAnrTimer.set(5000ms);

    <span class="hljs-comment">// 3. ç­‰å¾…åº”ç”¨å“åº”</span>
    <span class="hljs-keyword">if</span> (!receivedResponse &amp;&amp; timeout) {
        <span class="hljs-comment">// 4. è§¦å‘ANR</span>
        notifyAnr(connection, reason);
    }
}
</code></pre>
<h5 data-id="heading-20">Crashç›‘æ§</h5>
<p>åº”ç”¨å´©æºƒåˆ†ä¸ºJava Crashå’ŒNative Crashä¸¤ç§:</p>
<p><strong>Java Crashå¤„ç†æµç¨‹</strong>:</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// è®¾ç½®å…¨å±€å¼‚å¸¸å¤„ç†å™¨</span>
Thread.setDefaultUncaughtExceptionHandler(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>.UncaughtExceptionHandler() {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">uncaughtException</span><span class="hljs-params">(Thread t, Throwable e)</span> {
        <span class="hljs-comment">// 1. æ”¶é›†å´©æºƒä¿¡æ¯</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">stackTrace</span> <span class="hljs-operator">=</span> Log.getStackTraceString(e);

        <span class="hljs-comment">// 2. å†™å…¥æ—¥å¿—</span>
        Log.e(TAG, <span class="hljs-string">"Uncaught exception in thread "</span> + t.getName(), e);

        <span class="hljs-comment">// 3. ä¸ŠæŠ¥åˆ°æœåŠ¡å™¨ (å¯é€‰)</span>
        CrashReporter.report(e);

        <span class="hljs-comment">// 4. ç»ˆæ­¢è¿›ç¨‹</span>
        Process.killProcess(Process.myPid());
    }
});
</code></pre>
<p><strong>Native Crashå¤„ç†æµç¨‹</strong>:</p>
<p>Nativeå±‚çš„å´©æºƒé€šè¿‡Linuxä¿¡å·æœºåˆ¶å¤„ç†:</p>
<pre><code class="hljs language-scss" lang="scss">ç¨‹åºè§¦å‘SIGSEGV (æ®µé”™è¯¯)
        â†“
å†…æ ¸å‘é€ä¿¡å·ç»™è¿›ç¨‹
        â†“
debuggerdæ•è·ä¿¡å·
        â†“
æ”¶é›†å´©æºƒä¿¡æ¯(å¯„å­˜å™¨ã€å †æ ˆã€maps)
        â†“
ç”Ÿæˆtombstoneæ–‡ä»¶
        â†“
é€šçŸ¥AMSè¿›ç¨‹ç»ˆæ­¢
</code></pre>
<h5 data-id="heading-21">Watchdogæœºåˆ¶</h5>
<p>Watchdogæ˜¯System Serverçš„"çœ‹é—¨ç‹—",ä¸“é—¨ç›‘æ§æ ¸å¿ƒçº¿ç¨‹æ˜¯å¦æ­£å¸¸è¿è¡Œã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// Watchdogç›‘æ§çš„æ ¸å¿ƒçº¿ç¨‹</span>
mMonitorChecker = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HandlerChecker</span>(FgThread.getHandler(), <span class="hljs-string">"foreground thread"</span>);
mMonitorChecker.addMonitor(mAms); <span class="hljs-comment">// ActivityManagerService</span>
mMonitorChecker.addMonitor(mWms); <span class="hljs-comment">// WindowManagerService</span>
mMonitorChecker.addMonitor(mPms); <span class="hljs-comment">// PowerManagerService</span>
<span class="hljs-comment">// ...</span>
</code></pre>
<p>Watchdogçš„å·¥ä½œåŸç†:</p>
<ol>
<li>æ¯éš”30ç§’å‘è¢«ç›‘æ§çº¿ç¨‹çš„Handlerå‘é€æ¶ˆæ¯</li>
<li>å¦‚æœ60ç§’å†…æ²¡æœ‰æ”¶åˆ°å“åº”,åˆ¤å®šä¸ºåŠæ­»é”çŠ¶æ€</li>
<li>å¦‚æœè¶…è¿‡60ç§’(é»˜è®¤å€¼)ä»æ— å“åº”,è§¦å‘Watchdogé‡å¯</li>
<li>ç”Ÿæˆtraces.txtæ–‡ä»¶,è®°å½•æ‰€æœ‰çº¿ç¨‹å †æ ˆ</li>
</ol>

<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-section">æ­£å¸¸æƒ…å†µ:</span>
Watchdog â”€â”€å‘é€æ¶ˆæ¯â”€â”€â†’ æ ¸å¿ƒçº¿ç¨‹ â”€â”€30ç§’å†…å“åº”â”€â”€â†’ Watchdog: <span class="hljs-string">"ä¸€åˆ‡æ­£å¸¸"</span>

<span class="hljs-section">å¼‚å¸¸æƒ…å†µ:</span>
Watchdog â”€â”€å‘é€æ¶ˆæ¯â”€â”€â†’ æ ¸å¿ƒçº¿ç¨‹(å¡ä½äº†) â”€â”€60ç§’æ— å“åº”â”€â”€â†’ Watchdog: <span class="hljs-string">"é‡å¯System Server!"</span>
</code></pre>
<h4 data-id="heading-22">2.3 èµ„æºç®¡ç†æœºåˆ¶</h4>
<p>èµ„æºæ³„æ¼æ˜¯ç¨³å®šæ€§é—®é¢˜çš„å¸¸è§æ ¹å› ã€‚Androidå¯¹å‡ ç±»å…³é”®èµ„æºæœ‰ä¸“é—¨çš„ç®¡ç†æœºåˆ¶ã€‚</p>
<h5 data-id="heading-23">å†…å­˜ç®¡ç†</h5>
<p>Androidçš„å†…å­˜åˆ†ä¸ºå‡ ä¸ªåŒºåŸŸ:</p>






























<table><thead><tr><th>å†…å­˜ç±»å‹</th><th>è¯´æ˜</th><th>å…¸å‹é—®é¢˜</th></tr></thead><tbody><tr><td>Java Heap</td><td>Dalvik/ARTç®¡ç†çš„å †å†…å­˜</td><td>å†…å­˜æ³„æ¼å¯¼è‡´OOM</td></tr><tr><td>Native Heap</td><td>C/C++åˆ†é…çš„å†…å­˜</td><td>å¿˜è®°freeå¯¼è‡´æ³„æ¼</td></tr><tr><td>Graphics</td><td>GPUä½¿ç”¨çš„å›¾å½¢å†…å­˜</td><td>å¤§å›¾ç‰‡å¯¼è‡´OOM</td></tr><tr><td>Code</td><td>åŠ è½½çš„dex/soå ç”¨</td><td>åŠ è½½è¿‡å¤šåº“</td></tr></tbody></table>
<h5 data-id="heading-24">æ–‡ä»¶æè¿°ç¬¦(FD)ç®¡ç†</h5>
<p>æ¯ä¸ªè¿›ç¨‹å¯æ‰“å¼€çš„æ–‡ä»¶æè¿°ç¬¦æ•°é‡æ˜¯æœ‰é™çš„(é€šå¸¸æ˜¯1024ä¸ª)ã€‚FDæ³„æ¼ä¼šå¯¼è‡´:</p>
<ul>
<li>æ— æ³•æ‰“å¼€æ–°æ–‡ä»¶</li>
<li>æ— æ³•åˆ›å»ºæ–°Socket</li>
<li>æ— æ³•å»ºç«‹Binderè¿æ¥</li>
</ul>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æŸ¥çœ‹è¿›ç¨‹çš„FDä½¿ç”¨æƒ…å†µ</span>
adb shell <span class="hljs-built_in">ls</span> -la /proc/&lt;pid&gt;/fd | <span class="hljs-built_in">wc</span> -l

<span class="hljs-comment"># æŸ¥çœ‹FDé™åˆ¶</span>
adb shell <span class="hljs-built_in">cat</span> /proc/&lt;pid&gt;/limits | grep <span class="hljs-string">"open files"</span>
</code></pre>
<h5 data-id="heading-25">Binderèµ„æºç®¡ç†</h5>
<p>Binderæ˜¯Androidæœ€é‡è¦çš„IPCæœºåˆ¶,ä½†å®ƒçš„èµ„æºä¹Ÿæ˜¯æœ‰é™çš„:</p>
<ul>
<li><strong>Binderçº¿ç¨‹æ± </strong>: é»˜è®¤æœ€å¤š16ä¸ªçº¿ç¨‹</li>
<li><strong>Binderç¼“å†²åŒº</strong>: æ¯ä¸ªè¿›ç¨‹æœ€å¤§1MB(æ™®é€šåº”ç”¨)</li>
<li><strong>Binderä»£ç†å¯¹è±¡</strong>: æ•°é‡æœ‰ä¸Šé™</li>
</ul>
<p>å½“Binderèµ„æºè€—å°½æ—¶,è¿›ç¨‹é—´é€šä¿¡å°±ä¼šå¤±è´¥,è¡¨ç°ä¸ºANRæˆ–åŠŸèƒ½å¼‚å¸¸ã€‚</p>
<hr/>
<h3 data-id="heading-26">ä¸‰ã€ç¨³å®šæ€§é—®é¢˜åˆ†ç±»</h3>
<p>äº†è§£äº†ç¨³å®šæ€§æœºåˆ¶å,è®©æˆ‘ä»¬æ¥ç³»ç»Ÿåœ°åˆ†ç±»å„ç§ç¨³å®šæ€§é—®é¢˜ã€‚</p>
<h4 data-id="heading-27">3.1 æŒ‰ä¸¥é‡ç¨‹åº¦åˆ†ç±»</h4>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a39fd2a78d5742839b1506a3a821879d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yas5aWHTGFi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767357907&amp;x-signature=n1m%2F9wrnxMSiTDROyGyENnl0FlU%3D" alt="01-03-stability-classification.png" loading="lazy"/></p>
<pre><code class="hljs language-arduino" lang="arduino">ä¸¥é‡ç¨‹åº¦é‡‘å­—å¡”:

        /\
       /è‡´\        Kernel Panicã€System <span class="hljs-built_in">Server</span> Crash
      /å‘½çº§\       â†’ ç³»ç»Ÿé‡å¯,ç”¨æˆ·æ•°æ®å¯èƒ½ä¸¢å¤±
     /â”€â”€â”€â”€â”€â”€\
    / ä¸¥é‡çº§ \     Native Crashã€Watchdogé‡å¯
   /â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\    â†’ åŠŸèƒ½ä¸å¯ç”¨,éœ€è¦é‡å¯åº”ç”¨/ç³»ç»Ÿ
  /  é‡è¦çº§    \   ANRã€ç³»ç»ŸæœåŠ¡æ— å“åº”
 /â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\  â†’ ç”¨æˆ·ä½“éªŒä¸¥é‡ä¸‹é™
/    ä¸€èˆ¬çº§      \ åº”ç”¨Crashã€æ€§èƒ½å¡é¡¿
/â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\ â†’ å½±å“å•ä¸ªåº”ç”¨,ç”¨æˆ·å¯æ¢å¤
</code></pre>
<h4 data-id="heading-28">3.2 æŒ‰è¡¨ç°å½¢å¼åˆ†ç±»</h4>
<h5 data-id="heading-29">æ— å“åº”ç±»</h5>

























<table><thead><tr><th>é—®é¢˜</th><th>è¡¨ç°</th><th>å¸¸è§åŸå› </th></tr></thead><tbody><tr><td>ANR</td><td>å¼¹å‡º"åº”ç”¨æ— å“åº”"å¯¹è¯æ¡†</td><td>ä¸»çº¿ç¨‹é˜»å¡ã€æ­»é”</td></tr><tr><td>Systemæ— å“åº”</td><td>ç³»ç»Ÿå¡æ­»,æŒ‰é”®æ— ååº”</td><td>System Serveræ­»é”</td></tr><tr><td>é»‘å±</td><td>å±å¹•æ— æ˜¾ç¤º</td><td>SurfaceFlingeré—®é¢˜</td></tr></tbody></table>
<h5 data-id="heading-30">å´©æºƒç±»</h5>

























<table><thead><tr><th>é—®é¢˜</th><th>è¡¨ç°</th><th>å¸¸è§åŸå› </th></tr></thead><tbody><tr><td>Java Crash</td><td>åº”ç”¨é—ªé€€</td><td>ç©ºæŒ‡é’ˆã€æ•°ç»„è¶Šç•Œ</td></tr><tr><td>Native Crash</td><td>åº”ç”¨é—ªé€€,æœ‰tombstone</td><td>å†…å­˜è®¿é—®è¿è§„</td></tr><tr><td>Kernel Crash</td><td>ç³»ç»Ÿç›´æ¥é‡å¯</td><td>é©±åŠ¨bugã€ç¡¬ä»¶é—®é¢˜</td></tr></tbody></table>
<h5 data-id="heading-31">å¼‚å¸¸é‡å¯ç±»</h5>

























<table><thead><tr><th>é—®é¢˜</th><th>è¡¨ç°</th><th>å¸¸è§åŸå› </th></tr></thead><tbody><tr><td>Watchdogé‡å¯</td><td>çœ‹åˆ°å¼€æœºåŠ¨ç”»</td><td>ç³»ç»ŸæœåŠ¡æ­»é”</td></tr><tr><td>Kernel Panic</td><td>çªç„¶é‡å¯</td><td>å†…æ ¸å¼‚å¸¸</td></tr><tr><td>ç¡¬ä»¶Watchdog</td><td>çªç„¶é‡å¯</td><td>ç³»ç»Ÿå®Œå…¨å¡æ­»</td></tr></tbody></table>
<h4 data-id="heading-32">3.3 å¸¸è§æ ¹å› åˆ†æ</h4>
<p>ç»è¿‡å¤§é‡é—®é¢˜åˆ†æ,æˆ‘æ€»ç»“äº†ç¨³å®šæ€§é—®é¢˜çš„å¸¸è§æ ¹å› :</p>
<ol>
<li>
<p><strong>æ­»é”é—®é¢˜</strong> (çº¦25%)</p>
<ul>
<li>å¤šçº¿ç¨‹ç«äº‰åŒä¸€èµ„æº</li>
<li>Binderè°ƒç”¨å½¢æˆç¯è·¯</li>
<li>ä¸»çº¿ç¨‹ç­‰å¾…å­çº¿ç¨‹</li>
</ul>
</li>
<li>
<p><strong>èµ„æºè€—å°½</strong> (çº¦20%)</p>
<ul>
<li>å†…å­˜æ³„æ¼å¯¼è‡´OOM</li>
<li>FDæ³„æ¼</li>
<li>Binderèµ„æºè€—å°½</li>
</ul>
</li>
<li>
<p><strong>å†…å­˜è®¿é—®è¿è§„</strong> (çº¦15%)</p>
<ul>
<li>ç©ºæŒ‡é’ˆå¼•ç”¨</li>
<li>é‡æŒ‡é’ˆ</li>
<li>æ•°ç»„è¶Šç•Œ</li>
</ul>
</li>
<li>
<p><strong>å¹¶å‘ç«æ€</strong> (çº¦15%)</p>
<ul>
<li>å¤šçº¿ç¨‹è¯»å†™å†²çª</li>
<li>æ—¶åºé—®é¢˜</li>
</ul>
</li>
<li>
<p><strong>ç¬¬ä¸‰æ–¹SDKé—®é¢˜</strong> (çº¦10%)</p>
<ul>
<li>SDKå…¼å®¹æ€§é—®é¢˜</li>
<li>SDKå†…éƒ¨bug</li>
</ul>
</li>
<li>
<p><strong>å…¶ä»–</strong> (çº¦15%)</p>
<ul>
<li>é…ç½®é”™è¯¯</li>
<li>ç¡¬ä»¶å…¼å®¹æ€§</li>
<li>ç³»ç»Ÿbug</li>
</ul>
</li>
</ol>
<hr/>
<h3 data-id="heading-33">å››ã€ç¨³å®šæ€§åˆ†ææ€ç»´æ¡†æ¶</h3>
<p>å½“é‡åˆ°ç¨³å®šæ€§é—®é¢˜æ—¶,å¦‚ä½•é«˜æ•ˆåœ°å®šä½æ ¹å› ?è¿™é‡Œåˆ†äº«ä¸€å¥—å®ç”¨çš„åˆ†ææ¡†æ¶ã€‚</p>
<h4 data-id="heading-34">4.1 åˆ†ææµç¨‹</h4>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/47b8d166890d4fae9d12e3cfbe133364~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yas5aWHTGFi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767357907&amp;x-signature=KD63VvZdamCBTZarqkUvrz9rOaQ%3D" alt="01-04-analysis-workflow.png" loading="lazy"/></p>
<h4 data-id="heading-35">4.2 5W1Håˆ†ææ³•</h4>
<p>é¢å¯¹ç¨³å®šæ€§é—®é¢˜,æˆ‘ä¹ æƒ¯ç”¨5W1Hæ³•æ¥ç†æ¸…æ€è·¯:</p>








































<table><thead><tr><th>é—®é¢˜</th><th>è¯´æ˜</th><th>å¦‚ä½•è·å–</th></tr></thead><tbody><tr><td><strong>What</strong></td><td>å‘ç”Ÿäº†ä»€ä¹ˆ?</td><td>ç°è±¡æè¿°ã€é”™è¯¯ç±»å‹</td></tr><tr><td><strong>When</strong></td><td>ä»€ä¹ˆæ—¶å€™å‘ç”Ÿ?</td><td>æ—¶é—´æˆ³ã€å‘ç”Ÿé¢‘ç‡</td></tr><tr><td><strong>Where</strong></td><td>åœ¨å“ªé‡Œå‘ç”Ÿ?</td><td>æ¨¡å—ã€æ–‡ä»¶ã€ä»£ç è¡Œ</td></tr><tr><td><strong>Who</strong></td><td>è°å‡ºäº†é—®é¢˜?</td><td>è¿›ç¨‹ã€çº¿ç¨‹ã€ç»„ä»¶</td></tr><tr><td><strong>Why</strong></td><td>ä¸ºä»€ä¹ˆå‘ç”Ÿ?</td><td>æ ¹æœ¬åŸå› åˆ†æ</td></tr><tr><td><strong>How</strong></td><td>å¦‚ä½•å¤ç°?å¦‚ä½•è§£å†³?</td><td>å¤ç°æ­¥éª¤ã€ä¿®å¤æ–¹æ¡ˆ</td></tr></tbody></table>
<h4 data-id="heading-36">4.3 å·¥å…·ç®±æ¦‚è§ˆ</h4>
<p>å·¥æ¬²å–„å…¶äº‹,å¿…å…ˆåˆ©å…¶å™¨ã€‚ä»¥ä¸‹æ˜¯åˆ†æç¨³å®šæ€§é—®é¢˜çš„å¸¸ç”¨å·¥å…·:</p>
<h5 data-id="heading-37">æ—¥å¿—å·¥å…·</h5>

























<table><thead><tr><th>å·¥å…·</th><th>ç”¨é€”</th><th>å‘½ä»¤ç¤ºä¾‹</th></tr></thead><tbody><tr><td>logcat</td><td>æŸ¥çœ‹å®æ—¶æ—¥å¿—</td><td><code>adb logcat -v threadtime</code></td></tr><tr><td>DropBox</td><td>æŸ¥çœ‹ç³»ç»Ÿä¿å­˜çš„å¼‚å¸¸</td><td><code>adb shell dumpsys dropbox</code></td></tr><tr><td>bugreport</td><td>å¯¼å‡ºå®Œæ•´ç³»ç»Ÿæ—¥å¿—</td><td><code>adb bugreport</code></td></tr></tbody></table>
<h5 data-id="heading-38">åˆ†æå·¥å…·</h5>






























<table><thead><tr><th>å·¥å…·</th><th>ç”¨é€”</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>Systrace</td><td>ç³»ç»Ÿçº§æ€§èƒ½åˆ†æ</td><td>ANRã€å¡é¡¿é—®é¢˜</td></tr><tr><td>Perfetto</td><td>æ–°ä¸€ä»£traceå·¥å…·</td><td>å¤æ‚æ€§èƒ½é—®é¢˜</td></tr><tr><td>addr2line</td><td>Nativeç¬¦å·åŒ–</td><td>Native Crash</td></tr><tr><td>MAT</td><td>å†…å­˜åˆ†æ</td><td>å†…å­˜æ³„æ¼</td></tr></tbody></table>
<h5 data-id="heading-39">ç¤ºä¾‹:åˆ†æä¸€ä¸ªANR</h5>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># 1. è·å–ANR traces</span>
adb pull /data/anr/traces.txt

<span class="hljs-comment"># 2. æŸ¥çœ‹ANRåŸå› </span>
adb shell dumpsys activity anr

<span class="hljs-comment"># 3. åˆ†ætraces.txtä¸­çš„å †æ ˆ</span>
<span class="hljs-comment"># é‡ç‚¹å…³æ³¨mainçº¿ç¨‹çš„çŠ¶æ€:</span>
<span class="hljs-comment"># - å¦‚æœæ˜¯BLOCKED,æ‰¾å®ƒåœ¨ç­‰ä»€ä¹ˆé”</span>
<span class="hljs-comment"># - å¦‚æœæ˜¯WAITING,æ‰¾å®ƒåœ¨ç­‰ä»€ä¹ˆä¿¡å·</span>
<span class="hljs-comment"># - å¦‚æœåœ¨æ‰§è¡ŒæŸä¸ªæ–¹æ³•,åˆ†æè¯¥æ–¹æ³•ä¸ºä»€ä¹ˆæ…¢</span>

<span class="hljs-comment"># 4. ä½¿ç”¨Systraceè¿›ä¸€æ­¥åˆ†æ</span>
python systrace.py -o trace.html <span class="hljs-built_in">sched</span> freq idle am wm gfx view
</code></pre>
<hr/>
<h3 data-id="heading-40">äº”ã€å®æˆ˜æ¡ˆä¾‹:ä¸€ä¸ªçœŸå®çš„ANRåˆ†æ</h3>
<p>è®©æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªçœŸå®æ¡ˆä¾‹,æ¼”ç¤ºå¦‚ä½•è¿ç”¨ä¸Šé¢çš„çŸ¥è¯†è¿›è¡Œåˆ†æã€‚</p>
<h4 data-id="heading-41">é—®é¢˜ç°è±¡</h4>
<p>ç”¨æˆ·åé¦ˆ:åœ¨è®¾ç½®ä¸­åˆ‡æ¢WiFiæ—¶,ç»å¸¸å‡ºç°"ç³»ç»Ÿç•Œé¢æ— å“åº”"çš„å¼¹çª—ã€‚</p>
<h4 data-id="heading-42">åˆ†æè¿‡ç¨‹</h4>
<p><strong>Step 1: æ”¶é›†æ—¥å¿—</strong></p>
<pre><code class="hljs language-bash" lang="bash">adb bugreport
adb pull /data/anr/traces.txt
</code></pre>
<p><strong>Step 2: ç¡®å®šé—®é¢˜ç±»å‹</strong></p>
<p>ä»DropBoxä¸­æ‰¾åˆ°ANRè®°å½•:</p>
<pre><code class="hljs language-ini" lang="ini">Subject: Broadcast of Intent { <span class="hljs-attr">act</span>=android.net.wifi.WIFI_STATE_CHANGED }
ANR in com.android.systemui
PID: 1234
Reason: Broadcast of Intent { <span class="hljs-attr">act</span>=android.net.wifi.WIFI_STATE_CHANGED }
        waited 10003ms for android.intent.action.BATTERY_CHANGED
</code></pre>
<p>è¿™æ˜¯ä¸€ä¸ª<strong>Broadcast Timeout ANR</strong>ã€‚</p>
<p><strong>Step 3: åˆ†æå †æ ˆ</strong></p>
<p>ä»traces.txtä¸­æ‰¾åˆ°SystemUIçš„ä¸»çº¿ç¨‹:</p>
<pre><code class="hljs language-ini" lang="ini">"main" <span class="hljs-attr">prio</span>=<span class="hljs-number">5</span> tid=<span class="hljs-number">1</span> Blocked
  | <span class="hljs-attr">group</span>=<span class="hljs-string">"main"</span> sCount=<span class="hljs-number">1</span> dsCount=<span class="hljs-number">0</span> flags=<span class="hljs-number">1</span> obj=<span class="hljs-number">0</span>x74e04dd8 self=<span class="hljs-number">0</span>x7a4e014c00
  | <span class="hljs-attr">sysTid</span>=<span class="hljs-number">1234</span> nice=-<span class="hljs-number">2</span> cgrp=default sched=<span class="hljs-number">0</span>/<span class="hljs-number">0</span> handle=<span class="hljs-number">0</span>x7b5a9f49a8
  | <span class="hljs-attr">state</span>=S schedstat=( <span class="hljs-number">123456789</span> <span class="hljs-number">987654321</span> <span class="hljs-number">12345</span> ) utm=<span class="hljs-number">100</span> stm=<span class="hljs-number">50</span> core=<span class="hljs-number">2</span> HZ=<span class="hljs-number">100</span>
  at com.android.systemui.BatteryController.update(BatteryController.java:150)
  - waiting to lock &lt;0x0a1b2c3d&gt; (a java.lang.Object) held by thread 15
  at com.android.systemui.BatteryController.onReceive(BatteryController.java:100)
  ...
</code></pre>
<p>ä¸»çº¿ç¨‹åœ¨ç­‰ä¸€ä¸ªé”,è¿™ä¸ªé”è¢«çº¿ç¨‹15æŒæœ‰ã€‚</p>
<p><strong>Step 4: æ‰¾åˆ°æŒé”çº¿ç¨‹</strong></p>
<pre><code class="hljs language-lua" lang="lua"><span class="hljs-string">"BatteryStats"</span> prio=<span class="hljs-number">5</span> tid=<span class="hljs-number">15</span> Native
  | group=<span class="hljs-string">"main"</span> sCount=<span class="hljs-number">1</span> dsCount=<span class="hljs-number">0</span> flags=<span class="hljs-number">1</span> obj=<span class="hljs-number">0x13579bdf</span> <span class="hljs-built_in">self</span>=<span class="hljs-number">0x7a4e028800</span>
  at android.<span class="hljs-built_in">os</span>.BinderProxy.transactNative(Native Method)
  at android.<span class="hljs-built_in">os</span>.BinderProxy.transact(Binder.java:<span class="hljs-number">1129</span>)
  at com.android.internal.<span class="hljs-built_in">os</span>.IBatteryStats$Stub$Proxy.noteWifiOn(IBatteryStats.java:<span class="hljs-number">2046</span>)
  ...
</code></pre>
<p>çº¿ç¨‹15æ­£åœ¨è¿›è¡ŒBinderè°ƒç”¨,ç­‰å¾…BatteryStatsServiceå“åº”ã€‚</p>
<p><strong>Step 5: æ ¹å› åˆ†æ</strong></p>
<p>ç»è¿‡è¿›ä¸€æ­¥åˆ†æå‘ç°,BatteryStatsServiceæ­£åœ¨è¿›è¡Œä¸€ä¸ªè€—æ—¶çš„ç»Ÿè®¡æ“ä½œ,å¯¼è‡´Binderè°ƒç”¨è¶…æ—¶ã€‚æœ€ç»ˆå½¢æˆäº†è¿™æ ·çš„ç­‰å¾…é“¾:</p>
<pre><code class="hljs">ä¸»çº¿ç¨‹ç­‰å¾…é” â†’ çº¿ç¨‹15æŒæœ‰é”ä½†åœ¨ç­‰Binder â†’ BatteryStatsServiceç¹å¿™
</code></pre>
<p><strong>Step 6: è§£å†³æ–¹æ¡ˆ</strong></p>
<ol>
<li>å°†BatteryControllerçš„æ›´æ–°æ“ä½œç§»åˆ°å­çº¿ç¨‹</li>
<li>ä¼˜åŒ–BatteryStatsServiceçš„ç»Ÿè®¡é€»è¾‘</li>
</ol>
<hr/>
<h3 data-id="heading-43">å…­ã€åç»­æ–‡ç« é¢„å‘Š</h3>
<p>æœ¬æ–‡ä½œä¸ºç³»åˆ—å¼€ç¯‡,å»ºç«‹äº†ç³»ç»Ÿç¨³å®šæ€§çš„åŸºç¡€è®¤çŸ¥æ¡†æ¶ã€‚åœ¨åç»­æ–‡ç« ä¸­,æˆ‘ä»¬å°†æ·±å…¥æ¯ä¸ªä¸“é¢˜:</p>






























<table><thead><tr><th>æ–‡ç« </th><th>ä¸»é¢˜</th><th>ä½ å°†å­¦åˆ°</th></tr></thead><tbody><tr><td>ç¬¬2ç¯‡</td><td>ANRæœºåˆ¶æ·±åº¦è§£æ</td><td>ANRçš„è§¦å‘ã€æ£€æµ‹ã€ä¸ŠæŠ¥å…¨æµç¨‹</td></tr><tr><td>ç¬¬3ç¯‡</td><td>ANRé—®é¢˜æ’æŸ¥å®æˆ˜</td><td>traces.txtåˆ†ææŠ€å·§ã€å¸¸è§ANRæ¡ˆä¾‹</td></tr><tr><td>ç¬¬4ç¯‡</td><td>Native Crashåˆ†æ</td><td>tombstoneè§£è¯»ã€addr2lineä½¿ç”¨</td></tr><tr><td>ç¬¬5ç¯‡</td><td>Watchdogæœºåˆ¶</td><td>ç³»ç»Ÿçœ‹é—¨ç‹—çš„å·¥ä½œåŸç†</td></tr></tbody></table>
<p>æ•¬è¯·æœŸå¾…!</p>
<hr/>
<h3 data-id="heading-44">æ€»ç»“</h3>
<p>æœ¬æ–‡ä»Androidç³»ç»Ÿæ¶æ„å‡ºå‘,ä»‹ç»äº†ç³»ç»Ÿç¨³å®šæ€§çš„æ ¸å¿ƒæ¦‚å¿µ:</p>
<ol>
<li><strong>åˆ†å±‚æ¶æ„</strong>: ç†è§£Androidäº”å±‚æ¶æ„åŠå„å±‚çš„ç¨³å®šæ€§å½±å“</li>
<li><strong>å…³é”®è¿›ç¨‹</strong>: Zygoteã€System Serverã€SurfaceFlingeræ˜¯ç³»ç»Ÿçš„"ç”Ÿå‘½çº¿"</li>
<li><strong>æ ¸å¿ƒæœºåˆ¶</strong>: è¿›ç¨‹ä¼˜å…ˆçº§ã€LMKã€ANRæ£€æµ‹ã€Watchdogæ„æˆäº†ç¨³å®šæ€§ä¿éšœä½“ç³»</li>
<li><strong>é—®é¢˜åˆ†ç±»</strong>: æŒ‰ä¸¥é‡ç¨‹åº¦å’Œè¡¨ç°å½¢å¼å¯¹ç¨³å®šæ€§é—®é¢˜è¿›è¡Œåˆ†ç±»</li>
<li><strong>åˆ†ææ¡†æ¶</strong>: 5W1Håˆ†ææ³•å’Œå·¥å…·ç®±å¸®åŠ©é«˜æ•ˆå®šä½é—®é¢˜</li>
</ol>
<p>ç³»ç»Ÿç¨³å®šæ€§ä¸æ˜¯ä¸€æœä¸€å¤•èƒ½æŒæ¡çš„,éœ€è¦åœ¨å®è·µä¸­ä¸æ–­ç§¯ç´¯ã€‚å¸Œæœ›æœ¬æ–‡èƒ½å¸®ä½ å»ºç«‹èµ·æ­£ç¡®çš„è®¤çŸ¥æ¡†æ¶,åœ¨é¢å¯¹ç¨³å®šæ€§é—®é¢˜æ—¶ä¸å†è¿·èŒ«ã€‚</p>
<hr/>
<h3 data-id="heading-45">å‚è€ƒèµ„æ–™</h3>
<ol>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.android.com%2Fguide%2Fplatform" target="_blank" title="https://developer.android.com/guide/platform" ref="nofollow noopener noreferrer">Androidå®˜æ–¹æ–‡æ¡£ - ç³»ç»Ÿæ¶æ„</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fcs.android.com%2Fandroid%2Fplatform%2Fsuperproject%2F%2B%2Fmaster%3Aframeworks%2Fbase%2Fservices%2Fcore%2Fjava%2Fcom%2Fandroid%2Fserver%2Fam%2F" target="_blank" title="https://cs.android.com/android/platform/superproject/+/master:frameworks/base/services/core/java/com/android/server/am/" ref="nofollow noopener noreferrer">AOSPæºç  - ActivityManagerService</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fbook.douban.com%2Fsubject%2F25921329%2F" target="_blank" title="https://book.douban.com/subject/25921329/" ref="nofollow noopener noreferrer">æ·±å…¥ç†è§£Androidå†…æ ¸è®¾è®¡æ€æƒ³</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fbook.douban.com%2Fsubject%2F19986441%2F" target="_blank" title="https://book.douban.com/subject/19986441/" ref="nofollow noopener noreferrer">Androidç³»ç»Ÿæºä»£ç æƒ…æ™¯åˆ†æ</a></li>
</ol>
<hr/>
<blockquote>
<p><strong>ä½œè€…ç®€ä»‹</strong>: å¤šå¹´Androidç³»ç»Ÿå¼€å‘ç»éªŒ,ä¸“æ³¨äºç³»ç»Ÿç¨³å®šæ€§ä¸æ€§èƒ½ä¼˜åŒ–é¢†åŸŸã€‚æ¬¢è¿å…³æ³¨æœ¬ç³»åˆ—,ä¸€èµ·æ·±å…¥Androidç³»ç»Ÿçš„ç²¾å½©ä¸–ç•Œ!</p>
</blockquote>
<p><strong>æ‰¾åˆ°æˆ‘</strong>: <a href="https://link.juejin.cn?target=https%3A%2F%2Fhome.wonlab.top" target="_blank" title="https://home.wonlab.top" ref="nofollow noopener noreferrer">ä¸ªäººä¸»é¡µ</a><br/>
<strong>è¿”å›ä¸“æ ç›®å½•</strong>: <a href="https://juejin.cn/post/7587473691170095104" target="_blank" title="https://juejin.cn/post/7587473691170095104">Androidç¨³å®šæ€§&amp;æ€§èƒ½æ·±å…¥ç†è§£ä¸“æ ä»‹ç»</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[LangChain Tool å®æˆ˜ï¼šè®©å¤§æ¨¡å‹â€œé•¿å‡ºåŒæ‰‹â€ï¼Œé€šè¿‡ Tool è°ƒç”¨è¿æ¥çœŸå®ä¸–ç•Œ]]></title>    <link>https://juejin.cn/post/7588034035286425615</link>    <guid>https://juejin.cn/post/7588034035286425615</guid>    <pubDate>2025-12-26T15:51:50.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588034035286425615" data-draft-id="7587997157237489716" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content=" LangChain Tool å®æˆ˜ï¼šè®©å¤§æ¨¡å‹â€œé•¿å‡ºåŒæ‰‹â€ï¼Œé€šè¿‡ Tool è°ƒç”¨è¿æ¥çœŸå®ä¸–ç•Œ"/> <meta itemprop="keywords" content="LangChain,Node.js,AIGC"/> <meta itemprop="datePublished" content="2025-12-26T15:51:50.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¥ç§˜çš„çŒªå¤´"/> <meta itemprop="url" content="https://juejin.cn/user/793223472877051"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
             LangChain Tool å®æˆ˜ï¼šè®©å¤§æ¨¡å‹â€œé•¿å‡ºåŒæ‰‹â€ï¼Œé€šè¿‡ Tool è°ƒç”¨è¿æ¥çœŸå®ä¸–ç•Œ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/793223472877051/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¥ç§˜çš„çŒªå¤´
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-26T15:51:50.000Z" title="Fri Dec 26 2025 15:51:50 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p><strong>å‰è¨€</strong></p>
<p>å¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰é€šå¸¸è¢«æ¯”ä½œâ€œå¤§è„‘â€ï¼Œå®ƒæ‹¥æœ‰æµ·é‡çš„çŸ¥è¯†å’Œå¼ºå¤§çš„é€»è¾‘æ¨ç†èƒ½åŠ›ã€‚ä½†æ˜¯ï¼Œä¸€ä¸ªåªæœ‰å¤§è„‘çš„æ™ºè€…ï¼Œå¦‚æœæ— æ³•æ„ŸçŸ¥å½“ä¸‹çš„æ—¶é—´ã€æ— æ³•æŸ¥è¯¢å®æ—¶çš„å¤©æ°”ã€æ— æ³•è¿›è¡Œç²¾ç¡®çš„æ•°å­¦è¿ç®—ï¼Œå®ƒçš„èƒ½åŠ›å°±ä¼šå¤§æ‰“æŠ˜æ‰£ã€‚</p>
<p><strong>Toolsï¼ˆå·¥å…·ï¼‰</strong> æ¨¡å—ï¼Œå°±æ˜¯ LangChain èµ‹äºˆå¤§æ¨¡å‹çš„â€œåŒæ‰‹â€å’Œâ€œæ„Ÿå®˜â€ã€‚é€šè¿‡ Toolsï¼Œæˆ‘ä»¬å¯ä»¥è®©å¤§æ¨¡å‹ä¸ä»…ä»…æ˜¯é™ªèŠï¼Œè€Œæ˜¯çœŸæ­£å…·å¤‡<strong>è°ƒç”¨å¤–éƒ¨å‡½æ•°ã€æ‰§è¡Œå¤æ‚ä»»åŠ¡</strong>çš„èƒ½åŠ›ã€‚</p>
<p>æœ¬æ–‡å°†ç»“åˆä¸€æ®µåŸºäº <code>ChatDeepSeek</code> çš„å®æˆ˜ä»£ç ï¼Œå¸¦ä½ ä»é›¶å¼€å§‹ï¼Œæ·±å…¥ç†è§£å¦‚ä½•åœ¨ LangChain ä¸­å®šä¹‰å·¥å…·ã€ä½¿ç”¨ Zod è¿›è¡Œå‚æ•°æ ¡éªŒï¼Œä»¥åŠå¦‚ä½•ä¼˜é›…åœ°å¤„ç†æ¨¡å‹è¿”å›çš„å·¥å…·è°ƒç”¨è¯·æ±‚ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-0">ä¸€ã€ ä¸ºä»€ä¹ˆæˆ‘ä»¬éœ€è¦ Toolï¼Ÿ</h2>
<p>åœ¨æ·±å…¥ä»£ç ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ€è€ƒä¸€ä¸ªé—®é¢˜ï¼šä¸ºä»€ä¹ˆ ChatGPT æœ‰æ—¶å€™åšä¸å¥½ç®€å•çš„åŠ å‡æ³•ï¼Ÿä¸ºä»€ä¹ˆå®ƒä¸çŸ¥é“ä»Šå¤©åŒ—äº¬çš„å¤©æ°”ï¼Ÿ</p>
<p>å› ä¸ºå¤§æ¨¡å‹çš„æœ¬è´¨æ˜¯<strong>æ¦‚ç‡é¢„æµ‹</strong>ï¼Œå®ƒæ˜¯åŸºäºè®­ç»ƒæ•°æ®ç”Ÿæˆä¸‹ä¸€ä¸ªå­—çš„ï¼Œè€Œä¸æ˜¯åŸºäºé€»è¾‘è¿ç®—æˆ–å®æ—¶æ•°æ®åº“ã€‚</p>
<ul>
<li><strong>æ•°å­¦è®¡ç®—</strong>ï¼šå¤§æ¨¡å‹æ˜¯â€œæ–‡ç§‘ç”Ÿâ€ï¼Œå¤æ‚çš„è®¡ç®—å®¹æ˜“äº§ç”Ÿå¹»è§‰ã€‚</li>
<li><strong>å®æ—¶ä¿¡æ¯</strong>ï¼šå¤§æ¨¡å‹çš„è®­ç»ƒæ•°æ®æˆªæ­¢äºè¿‡å»ï¼Œå®ƒæ— æ³•é¢„çŸ¥â€œä»Šå¤©â€å‘ç”Ÿçš„äº‹æƒ…ã€‚</li>
</ul>
<p><strong>LangChain Tool çš„å‡ºç°è§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚</strong> å®ƒçš„æ ¸å¿ƒæ€æƒ³æ˜¯ï¼š
å½“ç”¨æˆ·é—®â€œ1234 + 5678 ç­‰äºå‡ ï¼Ÿâ€æ—¶ï¼Œå¤§æ¨¡å‹ä¸å†è‡ªå·±ççŒœï¼Œè€Œæ˜¯åˆ†æå‡ºâ€œå“¦ï¼Œè¿™æ˜¯ä¸€ä¸ªè®¡ç®—ä»»åŠ¡â€ï¼Œç„¶åå‘Šè¯‰ç¨‹åºï¼šâ€œè¯·å¸®æˆ‘è°ƒç”¨ <code>add</code> å·¥å…·ï¼Œå‚æ•°æ˜¯ <code>a=1234, b=5678</code>â€ã€‚ç¨‹åºè¿è¡Œå®Œä»£ç åï¼Œå°†ç»“æœåé¦ˆç»™ç”¨æˆ·ã€‚</p>
<blockquote>
<p>è¿˜æœ‰ä¸€ä¸ªé‡è¦ä½œç”¨åœ¨äºï¼šå¯¹äºç®€å•ä»»åŠ¡ï¼Œæ— éœ€è°ƒç”¨å¤§æ¨¡å‹è‡ªè¡Œå¤„ç†ï¼Œä»è€ŒèŠ‚çœå®è´µçš„ <strong>token</strong>ï¼›è€Œå¯¹äºå¤§æ¨¡å‹æœ¬èº«éš¾ä»¥å®Œæˆçš„ç‰¹å®šä»»åŠ¡ <strong>(å®æ—¶æ„ŸçŸ¥ã€ç²¾å‡†æ‰§è¡Œæˆ–å¤–éƒ¨æ“ä½œ.....)</strong>ï¼Œåˆ™å¯ä»¥é€šè¿‡è°ƒç”¨å¤–éƒ¨å·¥å…·æ¥æ‰©å±•å…¶èƒ½åŠ›ï¼Œä½¿å…¶èƒ½å¤Ÿé—´æ¥å®Œæˆè¿™äº›å·¥ä½œã€‚</p>
</blockquote>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†é€šè¿‡ä»£ç ä¸€æ­¥æ­¥å®ç°è¿™ä¸ªè¿‡ç¨‹ã€‚</p>
<hr/>
<h2 data-id="heading-1">äºŒã€ åŸºç¡€å…¥é—¨ï¼šå®šä¹‰ä¸€ä¸ªç®€å•çš„â€œåŠ æ³•å·¥å…·â€</h2>
<p>æˆ‘ä»¬è¦è®²çš„ç¬¬ä¸€ä¸ªçŸ¥è¯†ç‚¹æ˜¯ï¼š<strong>å¦‚ä½•å®šä¹‰ä¸€ä¸ªå·¥å…·</strong>ã€‚</p>
<p>åœ¨ LangChain ä¸­ï¼Œ<code>tool</code> å‡½æ•°æ˜¯æ ¸å¿ƒã€‚æˆ‘ä»¬éœ€è¦å¼•å…¥å®ƒï¼Œå¹¶é…åˆ <code>zod</code> åº“æ¥å®šä¹‰å‚æ•°ç»“æ„ã€‚</p>
<h3 data-id="heading-2">1. å¼•å…¥å¿…è¦çš„ä¾èµ–</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">ChatDeepSeek</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@langchain/deepseek"</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">'dotenv/config'</span>;
<span class="hljs-keyword">import</span> { tool } <span class="hljs-keyword">from</span> <span class="hljs-string">"@langchain/core/tools"</span>;
<span class="hljs-keyword">import</span> { z } <span class="hljs-keyword">from</span> <span class="hljs-string">"zod"</span>; <span class="hljs-comment">// å…³é”®ï¼šç”¨äºå®šä¹‰å‡½æ•°å‚æ•°çš„ç±»å‹ schema</span>
</code></pre>
<p>è¿™é‡Œé‡ç‚¹ä»‹ç»ä¸€ä¸‹ <strong><code>zod</code></strong>ã€‚
å¤§æ¨¡å‹è¾“å‡ºçš„æ˜¯æ–‡æœ¬ï¼ˆJSON å­—ç¬¦ä¸²ï¼‰ï¼Œè€Œæˆ‘ä»¬çš„å‡½æ•°éœ€è¦çš„æ˜¯å…·ä½“çš„å˜é‡ï¼ˆå¦‚æ•°å­—ã€å­—ç¬¦ä¸²ï¼‰ã€‚<strong>Zod çš„ä½œç”¨å°±æ˜¯å»ºç«‹ä¸€ä¸ªâ€œå¥‘çº¦â€</strong>ï¼šå®ƒå‘Šè¯‰å¤§æ¨¡å‹ï¼Œâ€œå¦‚æœä½ è¦è°ƒç”¨è¿™ä¸ªå·¥å…·ï¼Œä½ å¿…é¡»ç»™æˆ‘ä¼ ä»€ä¹ˆæ ·çš„å‚æ•°ï¼Œæ˜¯æ•°å­—è¿˜æ˜¯å­—ç¬¦ä¸²â€ã€‚è¿™å¤§å¤§æé«˜äº†å·¥å…·è°ƒç”¨çš„å‡†ç¡®æ€§ã€‚</p>
<h3 data-id="heading-3">2. ç¼–å†™åŠ æ³•å·¥å…· (<code>addTool</code>)</h3>
<p>æˆ‘ä»¬å…ˆä»æœ€ç®€å•çš„åŠ æ³•å¼€å§‹ï¼Œè®©å¤§æ¨¡å‹å­¦ä¼šç®—æœ¯ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å‡½æ•° å®šä¹‰ä¸€ä¸ªåŠ æ³•å·¥å…·</span>
<span class="hljs-keyword">const</span> addTool = <span class="hljs-title function_">tool</span>(
    <span class="hljs-comment">// 1. å·¥å…·çš„å…·ä½“é€»è¾‘ï¼ˆå‡½æ•°ä½“ï¼‰</span>
    <span class="hljs-comment">// è¿™é‡Œæ¥æ”¶ä¸€ä¸ªå¯¹è±¡ï¼Œè§£æ„å‡º a å’Œ b</span>
    <span class="hljs-comment">// æ³¨æ„ï¼šæ‰€æœ‰å·¥å…·å‡½æ•°çš„å‚æ•°é€šå¸¸éƒ½ä¼šè¢«åŒ…è£…æˆä¸€ä¸ªå¯¹è±¡</span>
    <span class="hljs-keyword">async</span> ({a, b}) =&gt; <span class="hljs-title class_">String</span>(a + b), 
    {
        <span class="hljs-comment">// 2. å·¥å…·çš„å…ƒæ•°æ®ï¼ˆMetadataï¼‰</span>
        <span class="hljs-attr">name</span>: <span class="hljs-string">"add"</span>, <span class="hljs-comment">// å·¥å…·åç§°ï¼Œå¤§æ¨¡å‹é€šè¿‡è¿™ä¸ªåå­—è¯†åˆ«å·¥å…·</span>
        <span class="hljs-attr">description</span>: <span class="hljs-string">"è®¡ç®—ä¸¤ä¸ªæ•°å­—çš„å’Œ"</span>, <span class="hljs-comment">// å·¥å…·æè¿°ï¼Œéå¸¸é‡è¦ï¼è¿™ç›¸å½“äºå†™ç»™å¤§æ¨¡å‹çš„ Promptï¼Œå‘Šè¯‰å®ƒä»€ä¹ˆæ—¶å€™ç”¨è¿™ä¸ªå·¥å…·</span>
        
        <span class="hljs-comment">// 3. å‚æ•° Schema å®šä¹‰</span>
        <span class="hljs-attr">schema</span>: z.<span class="hljs-title function_">object</span>({
            <span class="hljs-attr">a</span>: z.<span class="hljs-title function_">number</span>().<span class="hljs-title function_">describe</span>(<span class="hljs-string">"åŠ æ•° a"</span>), <span class="hljs-comment">// æ˜ç¡®å‘Šè¯‰æ¨¡å‹ï¼Œa å¿…é¡»æ˜¯ä¸€ä¸ªæ•°å­—</span>
            <span class="hljs-attr">b</span>: z.<span class="hljs-title function_">number</span>().<span class="hljs-title function_">describe</span>(<span class="hljs-string">"åŠ æ•° b"</span>)  <span class="hljs-comment">// b ä¹Ÿå¿…é¡»æ˜¯ä¸€ä¸ªæ•°å­—</span>
        })
    }
)
</code></pre>
<p><strong>ä»£ç æ·±åº¦è§£æï¼š</strong></p>
<ul>
<li><strong><code>tool(function, options)</code></strong>: è¿™æ˜¯å®šä¹‰å·¥å…·çš„æ ‡å‡†èŒƒå¼ã€‚ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å®é™…æ‰§è¡Œçš„ JavaScript å‡½æ•°ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯é…ç½®å¯¹è±¡ã€‚</li>
<li><strong><code>async ({a, b})</code></strong>: LangChain çš„å·¥å…·è°ƒç”¨é€šå¸¸æ˜¯å¼‚æ­¥çš„ã€‚å‚æ•°è¢«è®¾è®¡ä¸ºè§£æ„å½¢å¼ï¼Œè¿™æ˜¯ä¸ºäº†é…åˆ Zod å®šä¹‰çš„ Object Schemaã€‚</li>
<li><strong><code>description</code></strong>: åƒä¸‡ä¸è¦å¿½è§†æè¿°ï¼å¤§æ¨¡å‹æ­£æ˜¯é€šè¿‡è¿™æ®µæ–‡å­—æ¥åˆ¤æ–­ç”¨æˆ·çš„é—®é¢˜æ˜¯å¦éœ€è¦ä½¿ç”¨è¯¥å·¥å…·ã€‚å¦‚æœæè¿°å†™å¾—å«ç³Šï¼Œæ¨¡å‹å¯èƒ½å°±ä¸ä¼šè°ƒç”¨å®ƒã€‚</li>
<li><strong><code>z.number()</code></strong>: è¿™é‡Œé™åˆ¶äº† <code>a</code> å’Œ <code>b</code> å¿…é¡»æ˜¯æ•°å­—ã€‚å¦‚æœæ¨¡å‹æŠ½é£ä¼ äº†å­—ç¬¦ä¸²ï¼ŒZod ä¼šåœ¨åº•å±‚è¿›è¡Œæ ¡éªŒæˆ–æŠ¥é”™ï¼Œä¿è¯äº†ç¨‹åºçš„å¥å£®æ€§ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-4">ä¸‰ã€ è¿›é˜¶å®æˆ˜ï¼šå®šä¹‰â€œå¤©æ°”æŸ¥è¯¢å·¥å…·â€</h2>
<p>å­¦ä¼šäº†ç®€å•çš„åŠ æ³•ï¼Œæˆ‘ä»¬æ¥æ¨¡æ‹Ÿä¸€ä¸ªæ›´è´´è¿‘çœŸå®åœºæ™¯çš„ä¸šåŠ¡â€”â€”æŸ¥è¯¢å¤©æ°”ã€‚
ç”±äºæˆ‘ä»¬æ²¡æœ‰è¿æ¥çœŸå®çš„æ°”è±¡å±€ APIï¼Œè¿™é‡Œæˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªâ€œä¼ªæ•°æ®åº“â€æ¥æ¨¡æ‹Ÿã€‚</p>
<h3 data-id="heading-5">1. æ¨¡æ‹Ÿæ•°æ®æº</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> fakeWeatherDB = {
    åŒ—äº¬: { <span class="hljs-attr">temp</span>: <span class="hljs-string">"30Â°C"</span>, <span class="hljs-attr">condition</span>: <span class="hljs-string">"æ™´"</span>, <span class="hljs-attr">wind</span>: <span class="hljs-string">"å¾®é£"</span> },
    ä¸Šæµ·: { <span class="hljs-attr">temp</span>: <span class="hljs-string">"28Â°C"</span>, <span class="hljs-attr">condition</span>: <span class="hljs-string">"å¤šäº‘"</span>, <span class="hljs-attr">wind</span>: <span class="hljs-string">"ä¸œé£ 3 çº§"</span> },
    å¹¿å·: { <span class="hljs-attr">temp</span>: <span class="hljs-string">"32Â°C"</span>, <span class="hljs-attr">condition</span>: <span class="hljs-string">"é˜µé›¨"</span>, <span class="hljs-attr">wind</span>: <span class="hljs-string">"å—é£ 2 çº§"</span> }
}
</code></pre>
<h3 data-id="heading-6">2. ç¼–å†™å¤©æ°”å·¥å…· (<code>weatherTool</code>)</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> weatherTool = <span class="hljs-title function_">tool</span>(
    <span class="hljs-keyword">async</span> ({city}) =&gt; {
        <span class="hljs-comment">// æ¨¡æ‹Ÿæ•°æ®åº“æŸ¥è¯¢</span>
        <span class="hljs-keyword">const</span> weather = fakeWeatherDB[city];
        <span class="hljs-comment">// è¾¹ç•Œæƒ…å†µå¤„ç†</span>
        <span class="hljs-keyword">if</span>(!weather){
            <span class="hljs-keyword">return</span> <span class="hljs-string">`åŸå¸‚<span class="hljs-subst">${city}</span>çš„å¤©æ°”æœªæ‰¾åˆ°`</span>;
        }
        <span class="hljs-comment">// è¿”å›è‡ªç„¶è¯­è¨€æè¿°çš„ç»“æœï¼Œæ–¹ä¾¿å¤§æ¨¡å‹ç†è§£</span>
       <span class="hljs-keyword">return</span> <span class="hljs-string">`å½“å‰<span class="hljs-subst">${city}</span>çš„å¤©æ°”æ˜¯<span class="hljs-subst">${weather.temp}</span>,<span class="hljs-subst">${weather.condition}</span>, é£åŠ›<span class="hljs-subst">${weather.wind}</span>`</span>;
    },
    {
        <span class="hljs-attr">name</span>: <span class="hljs-string">"get_weather"</span>,
        <span class="hljs-attr">description</span>: <span class="hljs-string">"æŸ¥è¯¢æŒ‡å®šåŸå¸‚çš„ä»Šæ—¥å¤©æ°”æƒ…å†µ"</span>, <span class="hljs-comment">// æ˜ç¡®çš„åŠŸèƒ½æè¿°</span>
        <span class="hljs-attr">schema</span>: z.<span class="hljs-title function_">object</span>({
            <span class="hljs-comment">// z.string() è§„å®šå‚æ•° city å¿…é¡»æ˜¯å­—ç¬¦ä¸²</span>
            <span class="hljs-comment">// .describe() è¿›ä¸€æ­¥è§£é‡Šå‚æ•°å«ä¹‰ï¼Œå¸®åŠ©æ¨¡å‹æå–æ­£ç¡®çš„å®ä½“</span>
            <span class="hljs-attr">city</span>: z.<span class="hljs-title function_">string</span>().<span class="hljs-title function_">describe</span>(<span class="hljs-string">"è¦æŸ¥è¯¢å¤©æ°”çš„åŸå¸‚"</span>) 
        })
    }
)
</code></pre>
<p><strong>çŸ¥è¯†ç‚¹å»¶ä¼¸ï¼š</strong>
åœ¨ <code>weatherTool</code> ä¸­ï¼Œæˆ‘ä»¬çœ‹åˆ°äº†å·¥å…·ä¸ä»…ä»…æ˜¯è®¡ç®—ï¼Œè¿˜å¯ä»¥æ˜¯<strong>æŸ¥è¡¨ã€è¯·æ±‚ APIã€è¯»å–æ–‡ä»¶</strong>ã€‚</p>
<ul>
<li><strong>è¿”å›å€¼</strong>ï¼šå·¥å…·çš„è¿”å›å€¼é€šå¸¸æ˜¯å­—ç¬¦ä¸²ã€‚ä¸ºä»€ä¹ˆï¼Ÿå› ä¸ºè¿™ä¸ªè¿”å›å€¼æœ€ç»ˆæ˜¯è¦å–‚å›ç»™å¤§æ¨¡å‹çš„ï¼Œå¤§æ¨¡å‹ç†è§£æ–‡æœ¬èƒ½åŠ›æœ€å¼ºã€‚</li>
<li><strong>Error Handling</strong>ï¼šæˆ‘ä»¬åœ¨ä»£ç ä¸­åˆ¤æ–­äº† <code>if(!weather)</code>ã€‚åœ¨çœŸå®å¼€å‘ä¸­ï¼Œå·¥å…·å†…éƒ¨åšå¥½é”™è¯¯å¤„ç†éå¸¸é‡è¦ï¼Œå¦åˆ™ä¸€ä¸ªå¼‚å¸¸å¯èƒ½å¯¼è‡´æ•´ä¸ªå¯¹è¯å´©å¡Œã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-7">å››ã€ é“¾æ¥å¤§è„‘ï¼šç»‘å®šå·¥å…·åˆ°æ¨¡å‹</h2>
<p>å·¥å…·å®šä¹‰å¥½äº†ï¼Œå°±åƒå®¶é‡Œä¹°äº†å¸å°˜å™¨å’Œæ´—ç¢—æœºï¼Œä½†å¦‚æœä½œä¸ºâ€œç®¡å®¶â€çš„å¤§æ¨¡å‹ä¸çŸ¥é“å®ƒä»¬çš„å­˜åœ¨ï¼Œä¹Ÿæ˜¯ç™½æ­ã€‚æˆ‘ä»¬éœ€è¦å°†å·¥å…·**ç»‘å®šï¼ˆBindï¼‰**åˆ°æ¨¡å‹ä¸Šã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å®ä¾‹åŒ– DeepSeek æ¨¡å‹</span>
<span class="hljs-keyword">const</span> model = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ChatDeepSeek</span>({
    <span class="hljs-attr">model</span>: <span class="hljs-string">'deepseek-chat'</span>,
    <span class="hljs-attr">temperature</span>: <span class="hljs-number">0</span> <span class="hljs-comment">// è®¾ç½®ä¸º 0ï¼Œè®©æ¨¡å‹æ›´ç†æ€§ã€é€»è¾‘æ›´ä¸¥å¯†ï¼Œå‡å°‘èƒ¡è¨€ä¹±è¯­</span>
}).<span class="hljs-title function_">bindTools</span>([addTool, weatherTool]) <span class="hljs-comment">// æ ¸å¿ƒæ­¥éª¤ï¼šç»‘å®šå·¥å…·æ•°ç»„</span>
</code></pre>
<p><strong>è§£æï¼š</strong></p>
<ul>
<li><strong><code>.bindTools([...])</code></strong>: è¿™ä¸€æ­¥å‘ç”Ÿäº†å¾ˆå¤šé­”æ³•ã€‚LangChain ä¼šè‡ªåŠ¨å°†æˆ‘ä»¬è¦å®šä¹‰çš„ <code>addTool</code> å’Œ <code>weatherTool</code> çš„ <code>name</code>ã€<code>description</code> ä»¥åŠ <code>zod schema</code> è½¬æ¢æˆ OpenAI å…¼å®¹çš„ JSON æ ¼å¼ï¼Œå¹¶å‘é€ç»™ DeepSeek æ¨¡å‹ã€‚</li>
<li>æ­¤æ—¶ï¼Œæ¨¡å‹ä¸ä»…çŸ¥é“â€œæˆ‘æ˜¯è°â€ï¼Œè¿˜çŸ¥é“â€œæˆ‘æ‰‹è¾¹æœ‰ä¸¤ä¸ªå·¥å…·ï¼šä¸€ä¸ªèƒ½ç®—åŠ æ³•ï¼Œä¸€ä¸ªèƒ½æŸ¥å¤©æ°”â€ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-8">äº”ã€ è§¦å‘è°ƒç”¨ä¸ç»“æœå¤„ç†ï¼ˆé‡ç‚¹ï¼šå¯é€‰é“¾è¿ç®—ç¬¦ï¼‰</h2>
<p>ä¸‡äº‹ä¿±å¤‡ï¼Œåªæ¬ ä¸œé£ã€‚æˆ‘ä»¬å‘æ¨¡å‹æé—®ï¼Œçœ‹çœ‹å®ƒå¦‚ä½•ååº”ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å‘èµ·æé—®</span>
<span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> model.<span class="hljs-title function_">invoke</span>(<span class="hljs-string">'åŒ—äº¬ä»Šå¤©çš„å¤©æ°”æ€ä¹ˆæ ·'</span>);
</code></pre>
<p>å½“è¿™å¥è¯å‘å‡ºå»åï¼ŒDeepSeek ä¼šè¿›è¡Œå¦‚ä¸‹æ€è€ƒï¼š</p>
<ol>
<li>ç”¨æˆ·é—®çš„æ˜¯å¤©æ°”ã€‚</li>
<li>æˆ‘æœ‰ <code>get_weather</code> å·¥å…·å—ï¼Ÿæœ‰ã€‚</li>
<li>å·¥å…·æè¿°è¯´å®ƒèƒ½â€œæŸ¥è¯¢æŒ‡å®šåŸå¸‚å¤©æ°”â€ã€‚åŒ¹é…æˆåŠŸï¼</li>
<li>æå–å‚æ•°ï¼šåŸå¸‚æ˜¯â€œåŒ—äº¬â€ã€‚</li>
<li><strong>å†³ç­–</strong>ï¼šæˆ‘ä¸ç›´æ¥å›ç­”æ–‡æœ¬ï¼Œè€Œæ˜¯è¿”å›ä¸€ä¸ªâ€œå·¥å…·è°ƒç”¨è¯·æ±‚ï¼ˆTool Callï¼‰â€ã€‚</li>
</ol>
<h3 data-id="heading-9">å¤„ç†å“åº”ï¼šå¯é€‰é“¾è¿ç®—ç¬¦ (<code>?.</code>) çš„å¦™ç”¨</h3>
<p>æ¨¡å‹è¿”å›çš„ <code>res</code> å¯¹è±¡ä¸­ï¼ŒåŒ…å«äº†å¾ˆå¤šä¿¡æ¯ã€‚å¦‚æœæ¨¡å‹å†³å®šè°ƒç”¨å·¥å…·ï¼Œ<code>res.tool_calls</code> å±æ€§å°±ä¼šæœ‰å€¼ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å¯é€‰é“¾è¿ç®—ç¬¦ es6 æ–°å¢ ä»£ç çš„ç®€æ´å’Œä¼˜é›…</span>
<span class="hljs-comment">// ä¼ ç»Ÿå†™æ³•ï¼ˆç¹çï¼‰ï¼š</span>
<span class="hljs-comment">// if(res.tool_calls){</span>
<span class="hljs-comment">//     if(res.tool_calls.length){</span>
<span class="hljs-comment">//         // ...</span>
<span class="hljs-comment">//     }</span>
<span class="hljs-comment">// }</span>

<span class="hljs-comment">// ç°ä»£å†™æ³•ï¼ˆæ¨èï¼‰ï¼š</span>
<span class="hljs-keyword">if</span>(res.<span class="hljs-property">tool_calls</span>?.<span class="hljs-property">length</span>){
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"æ¨¡å‹å†³å®šè°ƒç”¨å·¥å…·:"</span>, res.<span class="hljs-property">tool_calls</span>);
    
    <span class="hljs-comment">// è·å–ç¬¬ä¸€ä¸ªå·¥å…·è°ƒç”¨çš„æŒ‡ä»¤</span>
    <span class="hljs-keyword">const</span> toolCall = res.<span class="hljs-property">tool_calls</span>[<span class="hljs-number">0</span>];

    <span class="hljs-comment">// æ ¹æ®å·¥å…·åç§°ï¼Œåˆ†å‘æ‰§è¡Œé€»è¾‘</span>
    <span class="hljs-keyword">if</span>(toolCall.<span class="hljs-property">name</span> === <span class="hljs-string">'add'</span>){
        <span class="hljs-comment">// æ‰§è¡ŒåŠ æ³•å·¥å…·</span>
        <span class="hljs-comment">// toolCall.args åŒ…å«äº†æ¨¡å‹æå–å¥½çš„å‚æ•° {a: ..., b: ...}</span>
        <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> addTool.<span class="hljs-title function_">invoke</span>(toolCall.<span class="hljs-property">args</span>);
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"åŠ æ³•å·¥å…·è¿è¡Œç»“æœ:"</span>, result);
    }
    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(toolCall.<span class="hljs-property">name</span> === <span class="hljs-string">'get_weather'</span>){
        <span class="hljs-comment">// æ‰§è¡Œå¤©æ°”å·¥å…·</span>
        <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> weatherTool.<span class="hljs-title function_">invoke</span>(toolCall.<span class="hljs-property">args</span>);
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"å¤©æ°”å·¥å…·è¿è¡Œç»“æœ:"</span>, result);
    }
}
</code></pre>
<h4 data-id="heading-10">ä¸ºäº†ç›´è§‚ç†è§£å‡½æ•°æ‰“å°ä¸€ä¸‹<code>res.tool_callsçœ‹çœ‹</code>ï¼š</h4>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e07553c2cc4d405c9e0210bda1549e62~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56We56eY55qE54yq5aS0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767369109&amp;x-signature=tnd%2FlLx5RpCjLK3yfnvN4g5saWM%3D" alt="å±å¹•æˆªå›¾ 2025-12-26 234001.png" loading="lazy"/></p>
<blockquote>
<p>ä½ å¯ä»¥ç›´è§‚åœ°çœ‹åˆ°è°ƒç”¨ç»“æ„ï¼š<code>name</code> å’Œå·¥å…·å®šä¹‰é‡Œçš„ <code>name</code> ä¸€æ¨¡ä¸€æ ·ï¼Œè€Œ <code>args</code> åˆ™æ˜¯å¤§æ¨¡å‹åœ¨ç†è§£ç”¨æˆ·é—®é¢˜åï¼Œæ ¹æ®<code>tool</code>è¦æ±‚çš„å‚æ•°æ ¼å¼ï¼Œè‡ªåŠ¨â€œå¡«å¥½â€çš„è¾“å…¥å†…å®¹ã€‚</p>
</blockquote>
<p><strong>çŸ¥è¯†ç‚¹è¯¦è§£ï¼šå¯é€‰é“¾è¿ç®—ç¬¦ (<code>?.</code>)</strong></p>
<p>åœ¨ JavaScript ä¸­ï¼Œå¤„ç†æ·±å±‚åµŒå¥—çš„å¯¹è±¡å±æ€§æ—¶ï¼Œç»å¸¸ä¼šé‡åˆ° <code>Cannot read property of undefined</code> çš„æŠ¥é”™ã€‚</p>
<ul>
<li><code>res.tool_calls</code> å¯èƒ½ä¸å­˜åœ¨ï¼ˆå¦‚æœæ¨¡å‹è®¤ä¸ºä¸éœ€è¦è°ƒç”¨å·¥å…·ï¼Œåªæ˜¯æ™®é€šèŠå¤©ï¼‰ã€‚</li>
<li>å¦‚æœä¸ä½¿ç”¨ <code>?.</code>ï¼Œæˆ‘ä»¬éœ€è¦å†™å¤šå±‚ <code>if</code> åˆ¤æ–­æ¥ç¡®ä¿å®‰å…¨ã€‚</li>
<li><strong><code>res.tool_calls?.length</code></strong> çš„æ„æ€æ˜¯ï¼šå¦‚æœ <code>res.tool_calls</code> å­˜åœ¨ï¼ˆä¸ä¸º null æˆ– undefinedï¼‰ï¼Œåˆ™è¯»å– <code>.length</code>ï¼›å¦åˆ™ï¼Œç›´æ¥è¿”å› <code>undefined</code>ï¼Œä¸ä¼šæŠ¥é”™ã€‚é…åˆ <code>if</code> è¯­å¥ï¼Œ<code>undefined</code> ä¼šè¢«è§†ä¸º falseï¼Œé€»è¾‘éå¸¸é€šé¡ºã€‚</li>
</ul>
<p>è¿™ä¸€å°å°çš„è¯­æ³•ç³–ï¼Œæå¤§åœ°æå‡äº†ä»£ç çš„<strong>ç®€æ´æ€§</strong>å’Œ<strong>ä¼˜é›…åº¦</strong>ï¼Œæ˜¯ç°ä»£ JS å¼€å‘çš„å¿…å¤‡æŠ€å·§ã€‚</p>
<hr/>
<h2 data-id="heading-11">å…­ã€ å®Œæ•´æµç¨‹æ€»ç»“</h2>
<p>è®©æˆ‘ä»¬å›é¡¾ä¸€ä¸‹è¿™æ®µä»£ç è¿è¡Œçš„å®Œæ•´ç”Ÿå‘½å‘¨æœŸï¼š</p>
<ol>
<li><strong>å®šä¹‰é˜¶æ®µ</strong>ï¼šæˆ‘ä»¬ç”¨ <code>tool()</code> å’Œ <code>zod</code> ç²¾ç¡®æè¿°äº† <code>add</code> å’Œ <code>get_weather</code> ä¸¤ä¸ªå·¥å…·çš„åŠŸèƒ½å’Œå‚æ•°æ ¼å¼ã€‚</li>
<li><strong>ç»‘å®šé˜¶æ®µ</strong>ï¼šé€šè¿‡ <code>.bindTools()</code> å°†è¿™äº›èƒ½åŠ›çš„â€œè¯´æ˜ä¹¦â€å‘ç»™äº† DeepSeek å¤§æ¨¡å‹ã€‚</li>
<li><strong>æ¨ç†é˜¶æ®µ</strong>ï¼šç”¨æˆ·æé—®â€œåŒ—äº¬å¤©æ°”â€ï¼Œæ¨¡å‹åˆ†æè¯­ä¹‰ï¼Œå‘½ä¸­ <code>get_weather</code> å·¥å…·ï¼Œå¹¶ç²¾å‡†æå–å‡º <code>city: "åŒ—äº¬"</code>ã€‚</li>
<li><strong>å“åº”é˜¶æ®µ</strong>ï¼šæ¨¡å‹è¿”å›åŒ…å« <code>tool_calls</code> çš„å“åº”å¯¹è±¡ã€‚</li>
<li><strong>æ‰§è¡Œé˜¶æ®µ</strong>ï¼šæˆ‘ä»¬çš„ä»£ç é€šè¿‡ <code>?.</code> å®‰å…¨åœ°æ£€æµ‹åˆ°è°ƒç”¨è¯·æ±‚ï¼Œå¹¶åœ¨æœ¬åœ°è¿è¡Œäº† <code>weatherTool</code> å‡½æ•°ï¼Œé€šè¿‡æŸ¥é˜… <code>fakeWeatherDB</code> å¾—åˆ°äº†ç»“æœã€‚</li>
</ol>
<h3 data-id="heading-12">è¿è¡Œæ•ˆæœé¢„è§ˆ</h3>
<p>å½“ä½ è¿è¡Œè¿™æ®µä»£ç ï¼ˆ<code>node index.js</code>ï¼‰ï¼Œæ§åˆ¶å°ä¼šè¾“å‡ºï¼š</p>
<pre><code class="hljs language-bash" lang="bash">[
  {
    name: <span class="hljs-string">'get_weather'</span>,
    args: { city: <span class="hljs-string">'åŒ—äº¬'</span> },
    <span class="hljs-built_in">id</span>: <span class="hljs-string">'call_xxxxxxxxx'</span>
  }
]
æœ€ç»ˆç»“æœ: å½“å‰åŒ—äº¬çš„å¤©æ°”æ˜¯30Â°C,æ™´, é£åŠ›å¾®é£
</code></pre>
<p>å¦‚æœä½ æŠŠé—®é¢˜æ”¹æˆ <code>model.invoke('100 åŠ  200 ç­‰äºå‡ ')</code>ï¼Œå®ƒä¼šè‡ªåŠ¨åˆ‡æ¢é€»è¾‘ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">[
  {
    name: <span class="hljs-string">'add'</span>,
    args: { a: 100, b: 200 },
    <span class="hljs-built_in">id</span>: <span class="hljs-string">'call_yyyyyyyyy'</span>
  }
]
æœ€ç»ˆç»“æœ: 300
</code></pre>
<hr/>
<h2 data-id="heading-13">ä¸ƒã€ ç»“è¯­</h2>
<p>é€šè¿‡è¿™ç¯‡æ–‡ç« ï¼Œæˆ‘ä»¬ä¸ä»…å­¦ä¹ äº† LangChain ä¸­ <code>tool</code> çš„åŸºç¡€ç”¨æ³•ï¼Œè¿˜æŒæ¡äº†å¦‚ä½•åˆ©ç”¨ <code>zod</code> è¿›è¡Œæ•°æ®éªŒè¯ä»¥åŠä½¿ç”¨ ES6+ çš„å¯é€‰é“¾è¿ç®—ç¬¦ç¼–å†™å¥å£®çš„ä»£ç ã€‚</p>
<p>Tools æ¨¡å—å½»åº•æ”¹å˜äº†å¤§æ¨¡å‹çš„åº”ç”¨å½¢æ€ã€‚å®ƒè®©å¤§æ¨¡å‹ä»ä¸€ä¸ªâ€œåªè¯»â€çš„ç™¾ç§‘å…¨ä¹¦ï¼Œè¿›åŒ–æˆäº†ä¸€ä¸ªèƒ½â€œè¯»å†™â€ç°å®ä¸–ç•Œçš„æ™ºèƒ½ä»£ç†ï¼ˆAgentï¼‰ã€‚</p>
<p>èµ¶å¿«æ‰“å¼€ä½ çš„ç¼–è¾‘å™¨ï¼Œè¯•ç€å®šä¹‰å±äºä½ è‡ªå·±çš„å·¥å…·å§ï¼ä¸ç®¡æ˜¯æŸ¥è¯¢è‚¡ç¥¨ã€å‘é€é‚®ä»¶ï¼Œè¿˜æ˜¯æ§åˆ¶æ™ºèƒ½å®¶å±…ï¼ŒLangChain éƒ½èƒ½å¸®ä½ å®ç°ã€‚</p>
<hr/>
<p><em>æœ¬æ–‡ä»£ç ç¤ºä¾‹åŸºäº LangChain.js æœ€æ–°ç‰ˆæœ¬ï¼Œæ¬¢è¿ç‚¹èµæ”¶è—ï¼</em></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[C++ä¸­JSONåºåˆ—åŒ–å’Œååºåˆ—åŒ–çš„å®ç°]]></title>    <link>https://juejin.cn/post/7588010346070851594</link>    <guid>https://juejin.cn/post/7588010346070851594</guid>    <pubDate>2025-12-27T01:52:26.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588010346070851594" data-draft-id="7588010346070835210" data-original-type="2" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="C++ä¸­JSONåºåˆ—åŒ–å’Œååºåˆ—åŒ–çš„å®ç°"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-27T01:52:26.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="charlee44"/> <meta itemprop="url" content="https://juejin.cn/user/1117549770846872"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            C++ä¸­JSONåºåˆ—åŒ–å’Œååºåˆ—åŒ–çš„å®ç°
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1117549770846872/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    charlee44
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-27T01:52:26.000Z" title="Sat Dec 27 2025 01:52:26 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    6
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">1. å¼•è¨€</h2>
<p><strong>åºåˆ—åŒ–</strong>ï¼ˆSerializationï¼‰æ˜¯æŒ‡å°†ç¨‹åºä¸­çš„å†…å­˜å¯¹è±¡ï¼ˆå¦‚ç»“æ„ä½“ã€ç±»å®ä¾‹ã€åˆ—è¡¨ç­‰ï¼‰è½¬æ¢æˆä¸€ç§<strong>å¯ä»¥å­˜å‚¨æˆ–ä¼ è¾“çš„æ ¼å¼</strong>ï¼ˆé€šå¸¸æ˜¯å­—èŠ‚æµæˆ–æ–‡æœ¬ï¼‰çš„è¿‡ç¨‹ã€‚å¸¸è§çš„åºåˆ—åŒ–æ ¼å¼åŒ…æ‹¬ï¼š</p>
<ul>
<li>JSONï¼ˆæ–‡æœ¬ï¼Œäººç±»å¯è¯»ï¼‰</li>
<li>XML</li>
<li>Protocol Buffersï¼ˆäºŒè¿›åˆ¶ï¼Œé«˜æ•ˆï¼‰</li>
<li>MessagePack</li>
<li>YAML</li>
<li>ç”šè‡³è‡ªå®šä¹‰çš„äºŒè¿›åˆ¶æ ¼å¼</li>
</ul>
<p><strong>ååºåˆ—åŒ–</strong>ï¼ˆDeserializationï¼‰æ˜¯åºåˆ—åŒ–çš„é€†è¿‡ç¨‹ï¼šå°†<strong>åºåˆ—åŒ–åçš„æ•°æ®</strong>ï¼ˆå¦‚ JSON å­—ç¬¦ä¸²ï¼‰é‡æ–°è½¬æ¢å›<strong>ç¨‹åºä¸­çš„å†…å­˜å¯¹è±¡</strong>ã€‚</p>
<h2 data-id="heading-1">2. åŸå› </h2>
<p>é‚£ä¹ˆï¼Œä¸ºä»€ä¹ˆéœ€è¦åºåˆ—åŒ–å’Œååºåˆ—åŒ–å‘¢ï¼Ÿç¬”è€…çš„ä½“ä¼šæ˜¯ä¸åºåˆ—åŒ–/ååºåˆ—åŒ–ä¹Ÿè¡Œï¼Œåªä¸è¿‡åœ¨è¿›è¡Œç›¸åº”çš„è¯»å–å’Œå†™å…¥æ“ä½œçš„æ—¶å€™ä¼šéå¸¸ç¹çã€‚æ¯”å¦‚ä¸€ä¸ªé…ç½®æ–‡ä»¶æ›´æ–°ï¼š</p>
<p>å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªåšå®¢ç³»ç»Ÿçš„é…ç½®ï¼ŒåŒ…å«ç«™ç‚¹æ ‡é¢˜ã€ä½œè€…åã€æ˜¯å¦å¯ç”¨è¯„è®ºã€é»˜è®¤å°é¢åœ°å€ç­‰å¤šä¸ªå­—æ®µã€‚å¦‚æœä¸ä½¿ç”¨åºåˆ—åŒ–æœºåˆ¶ï¼Œæ¯æ¬¡è¯»å–é…ç½®æ—¶ï¼Œå°±å¾—æ‰‹åŠ¨æ‰“å¼€ JSONï¼ˆæˆ– YAMLã€INIï¼‰æ–‡ä»¶ï¼Œé€è¡Œè§£æï¼Œåˆ¤æ–­æ¯ä¸ªå­—æ®µæ˜¯å¦å­˜åœ¨ã€ç±»å‹æ˜¯å¦æ­£ç¡®ï¼Œå†ä¸€ä¸€èµ‹å€¼ç»™ç¨‹åºä¸­çš„å˜é‡ï¼›è€Œå½“ç”¨æˆ·ä¿®æ”¹äº†æŸä¸ªè®¾ç½®ã€éœ€è¦ä¿å­˜å›æ–‡ä»¶æ—¶ï¼Œåˆå¾—æ‰‹åŠ¨æ‹¼æ¥å­—ç¬¦ä¸²ã€å¤„ç†å¼•å·è½¬ä¹‰ã€æ•°ç»„æ ¼å¼ã€ç¼©è¿›å¯¹é½â€¦â€¦ç¨æœ‰ä¸æ…ï¼Œå°±ä¼šç”Ÿæˆæ ¼å¼é”™è¯¯çš„æ–‡ä»¶ï¼Œå¯¼è‡´ç¨‹åºä¸‹æ¬¡å¯åŠ¨å¤±è´¥ã€‚</p>
<p>æ›´éº»çƒ¦çš„æ˜¯ï¼Œä¸€æ—¦é…ç½®ç»“æ„å‘ç”Ÿå˜åŒ–â€”â€”æ¯”å¦‚æ–°å¢ä¸€ä¸ª theme å­—æ®µï¼Œæˆ–è€…æŠŠ enableComments æ‹†æˆ enablePostComments å’Œ enablePageCommentsâ€”â€”æˆ‘ä»¬å°±ä¸å¾—ä¸åŒæ—¶ä¿®æ”¹è¯»å–é€»è¾‘ã€å†™å…¥é€»è¾‘ã€é»˜è®¤å€¼åˆå§‹åŒ–ã€é”™è¯¯å¤„ç†ç­‰å¤šå¤„ä»£ç ï¼Œææ˜“é—æ¼æˆ–å‡ºé”™ã€‚</p>
<p>è€Œæœ‰äº†åºåˆ—åŒ–å’Œååºåˆ—åŒ–ï¼Œè¿™ä¸€åˆ‡å°±å˜å¾—ç®€æ´è€Œå¯é ï¼šå®šä¹‰å¥½ç»“æ„ä½“ï¼ˆæˆ–ç±»ï¼‰ï¼Œæ³¨å†Œå¯¹åº”çš„è½¬æ¢å‡½æ•°ï¼Œä¸€è¡Œä»£ç å°±èƒ½ä» JSON æ„é€ å‡ºå®Œæ•´çš„é…ç½®å¯¹è±¡ï¼Œå¦ä¸€è¡Œä»£ç å°±èƒ½æŠŠä¿®æ”¹åçš„å¯¹è±¡å†™å›æ–‡ä»¶ã€‚å­—æ®µå¢å‡åªéœ€è°ƒæ•´ç»“æ„ä½“ï¼Œè¯»å†™é€»è¾‘å‡ ä¹æ— éœ€æ”¹åŠ¨ï¼Œæ—¢å‡å°‘äº†é‡å¤åŠ³åŠ¨ï¼Œä¹Ÿå¤§å¤§æå‡äº†å¥å£®æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚</p>
<p>å› æ­¤ï¼Œåºåˆ—åŒ–/ååºåˆ—åŒ–å¹¶éâ€œå¿…é¡»â€ï¼Œä½†å®ƒæ˜¯å¯¹æŠ—å¤æ‚æ€§ã€æå‡å¼€å‘æ•ˆç‡å’Œç³»ç»Ÿå¯é æ€§çš„é‡è¦å·¥å…·ã€‚</p>
<h2 data-id="heading-2">3. å®ç°</h2>
<h3 data-id="heading-3">3.1 ç¤ºä¾‹</h3>
<p>è¿™é‡Œå°±ä¸¾ä¾‹å®ç°ä¸€ä¸‹ C++ ä¸­ JSON åºåˆ—åŒ–å’Œååºåˆ—åŒ–ã€‚å¦‚æœè¦ååºåˆ—åŒ–æˆ C++ å¯ä»¥ä½¿ç”¨çš„å†…å­˜å¯¹è±¡ï¼Œæœ€å¥½çš„æ•°æ®å®¹å™¨å°±æ˜¯ struct ã€‚å½“ç„¶ class ä¹Ÿå¯ä»¥ï¼Œä¸è¿‡æˆ‘ä»¬éƒ½çŸ¥é“ struct å’Œ class çš„åŒºåˆ«ï¼šstruct çš„æˆå‘˜ä¸€èˆ¬é»˜è®¤æ˜¯å…¬æœ‰çš„ï¼Œè€Œ class çš„æˆå‘˜ä¸€èˆ¬é»˜è®¤æ˜¯ç§æœ‰çš„ã€‚å› æ­¤ï¼Œstruct é€‚åˆä»¥æ•°æ®æˆå‘˜ä¸ºä¸»çš„ï¼Œæ¯”è¾ƒç®€å•çš„å¯¹è±¡ï¼›class é€‚åˆä»¥æ–¹æ³•æˆå‘˜ä¸ºä¸»çš„ï¼Œæ¯”è¾ƒå¤æ‚çš„å¯¹è±¡ã€‚</p>
<p>ç¬”è€…ä½¿ç”¨ nlohmann/json ä¸­åºåˆ—åŒ–/ååºåˆ—åŒ–ä¸€ä¸ªè¡¨è¾¾åšå®¢çš„æ•°æ®å¯¹è±¡ï¼š</p>
<p><strong>BlogMeta.h</strong>ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;nlohmann/json.hpp&gt;</span></span>&#13;
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string&gt;</span></span>&#13;
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span>&#13;
&#13;
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">"PostStats.h"</span></span>&#13;
&#13;
<span class="hljs-keyword">namespace</span> DataTransfer {&#13;
&#13;
<span class="hljs-comment">/// @brief ä¸€ç¯‡åšå®¢çš„å…ƒæ•°æ®</span>&#13;
<span class="hljs-keyword">struct</span> <span class="hljs-title class_">BlogMeta</span> {&#13;
  std::string id;&#13;
  std::string title;&#13;
  std::string summary;&#13;
  std::string createdTime;&#13;
  std::string updatedTime;  &#13;
  std::string coverAddress;&#13;
  <span class="hljs-type">int64_t</span> isDraft;&#13;
  std::vector&lt;std::string&gt; tagNames;&#13;
  std::vector&lt;std::string&gt; categoryNames;&#13;
  PostStats postStats;&#13;
&#13;
  <span class="hljs-comment">// æä¾›åºåˆ—åŒ–æ¥å£</span>&#13;
  <span class="hljs-function"><span class="hljs-keyword">friend</span> <span class="hljs-type">void</span> <span class="hljs-title">to_json</span><span class="hljs-params">(nlohmann::json&amp; j, <span class="hljs-type">const</span> BlogMeta&amp; s)</span></span>;&#13;
&#13;
  <span class="hljs-comment">// æä¾›ååºåˆ—åŒ–æ¥å£</span>&#13;
  <span class="hljs-function"><span class="hljs-keyword">friend</span> <span class="hljs-type">void</span> <span class="hljs-title">from_json</span><span class="hljs-params">(<span class="hljs-type">const</span> nlohmann::json&amp; j, BlogMeta&amp; s)</span></span>;&#13;
};
</code></pre>
<p><strong>BlogMeta.cpp</strong>ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">"BlogMeta.h"</span></span>&#13;
&#13;
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">"Util/GetTime.h"</span></span>&#13;
&#13;
<span class="hljs-keyword">namespace</span> DataTransfer {&#13;
&#13;
<span class="hljs-comment">// æä¾›åºåˆ—åŒ–æ¥å£</span>&#13;
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">to_json</span><span class="hljs-params">(nlohmann::json&amp; j, <span class="hljs-type">const</span> BlogMeta&amp; s)</span> </span>{&#13;
  j = nlohmann::json{{<span class="hljs-string">"id"</span>, s.id},&#13;
                     {<span class="hljs-string">"title"</span>, s.title},&#13;
                     {<span class="hljs-string">"summary"</span>, s.summary},&#13;
                     {<span class="hljs-string">"createdTime"</span>, s.createdTime},&#13;
                     {<span class="hljs-string">"updatedTime"</span>, s.updatedTime},&#13;
                     {<span class="hljs-string">"coverAddress"</span>, s.coverAddress},&#13;
                     {<span class="hljs-string">"isDraft"</span>, s.isDraft},&#13;
                     {<span class="hljs-string">"tagNames"</span>, s.tagNames},&#13;
                     {<span class="hljs-string">"categoryNames"</span>, s.categoryNames},&#13;
                     {<span class="hljs-string">"postStats"</span>, s.postStats}};&#13;
}&#13;
&#13;
<span class="hljs-comment">// æä¾›ååºåˆ—åŒ–æ¥å£</span>&#13;
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">from_json</span><span class="hljs-params">(<span class="hljs-type">const</span> nlohmann::json&amp; j, BlogMeta&amp; s)</span> </span>{&#13;
  s.id = j.<span class="hljs-built_in">at</span>(<span class="hljs-string">"id"</span>).<span class="hljs-built_in">get</span>&lt;std::string&gt;();&#13;
  s.title = j.<span class="hljs-built_in">at</span>(<span class="hljs-string">"title"</span>).<span class="hljs-built_in">get</span>&lt;std::string&gt;();&#13;
  s.summary = j.<span class="hljs-built_in">at</span>(<span class="hljs-string">"summary"</span>).<span class="hljs-built_in">get</span>&lt;std::string&gt;();&#13;
  s.createdTime = j.<span class="hljs-built_in">at</span>(<span class="hljs-string">"createdTime"</span>).<span class="hljs-built_in">get</span>&lt;std::string&gt;();&#13;
  s.updatedTime =&#13;
      j.<span class="hljs-built_in">value</span>(<span class="hljs-string">"updatedTime"</span>, Util::<span class="hljs-built_in">GetCurrentTime</span>());  <span class="hljs-comment">//æä¾›é»˜è®¤å€¼ï¼Œå¢åŠ ç¨³å®šæ€§</span>&#13;
  s.coverAddress = j.<span class="hljs-built_in">at</span>(<span class="hljs-string">"coverAddress"</span>).<span class="hljs-built_in">get</span>&lt;std::string&gt;();&#13;
  s.isDraft = j.<span class="hljs-built_in">at</span>(<span class="hljs-string">"isDraft"</span>).<span class="hljs-built_in">get</span>&lt;<span class="hljs-type">int64_t</span>&gt;();&#13;
  s.tagNames = j.<span class="hljs-built_in">at</span>(<span class="hljs-string">"tagNames"</span>).get&lt;std::vector&lt;std::string&gt;&gt;();&#13;
  s.categoryNames = j.<span class="hljs-built_in">at</span>(<span class="hljs-string">"categoryNames"</span>).get&lt;std::vector&lt;std::string&gt;&gt;();&#13;
  s.postStats = j.<span class="hljs-built_in">at</span>(<span class="hljs-string">"postStats"</span>).<span class="hljs-built_in">get</span>&lt;PostStats&gt;();&#13;
}&#13;
&#13;
}  <span class="hljs-comment">// namespace DataTransfer</span>
</code></pre>
<p>å…¶ä¸­ <code>to_json</code> / <code>from_json</code> å°±æ˜¯å¯¹åº”çš„ åºåˆ—åŒ– / ååºåˆ—åŒ–æ¥å£ã€‚åªéœ€è¦å¡«å……è¿™ä¸€å¯¹æ¥å£ï¼Œå°±å¯ä»¥é€šè¿‡èµ‹å€¼è¿ç®—ç¬¦<code>=</code>å®ç°è‡ªåŠ¨åºåˆ—åŒ–å’Œååºåˆ—åŒ–ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span>&#13;
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;nlohmann/json.hpp&gt;</span></span>&#13;
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">"BlogMeta.h"</span>  <span class="hljs-comment">// åŒ…å«ä½ çš„ BlogMeta å®šä¹‰</span></span>&#13;
&#13;
<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{&#13;
    <span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> DataTransfer;&#13;
    <span class="hljs-keyword">using</span> json = nlohmann::json;&#13;
&#13;
    <span class="hljs-comment">// ----------------------------</span>&#13;
    <span class="hljs-comment">// 1. åˆ›å»ºä¸€ä¸ª BlogMeta å¯¹è±¡ï¼ˆå†…å­˜ä¸­çš„æ•°æ®ï¼‰</span>&#13;
    <span class="hljs-comment">// ----------------------------</span>&#13;
    BlogMeta blog;&#13;
    blog.id = <span class="hljs-string">"blog-001"</span>;&#13;
    blog.title = <span class="hljs-string">"æ·±å…¥ç†è§£ C++ åºåˆ—åŒ–"</span>;&#13;
    blog.summary = <span class="hljs-string">"æœ¬æ–‡ä»‹ç»å¦‚ä½•ä½¿ç”¨ nlohmann/json è¿›è¡Œå®‰å…¨é«˜æ•ˆçš„åºåˆ—åŒ–ã€‚"</span>;&#13;
    blog.createdTime = <span class="hljs-string">"2025-12-22T10:00:00Z"</span>;&#13;
    blog.updatedTime = <span class="hljs-string">"2025-12-22T17:00:00Z"</span>;  <span class="hljs-comment">// å¯çœç•¥ï¼Œååºåˆ—åŒ–æ—¶ä¼šç”¨é»˜è®¤å€¼</span>&#13;
    blog.coverAddress = <span class="hljs-string">"/images/cpp_serialization.jpg"</span>;&#13;
    blog.isDraft = <span class="hljs-number">0</span>;&#13;
    blog.tagNames = {<span class="hljs-string">"C++"</span>, <span class="hljs-string">"JSON"</span>, <span class="hljs-string">"Serialization"</span>};&#13;
    blog.categoryNames = {<span class="hljs-string">"Programming"</span>, <span class="hljs-string">"Tutorial"</span>};&#13;
    blog.postStats = {<span class="hljs-number">1200</span>, <span class="hljs-number">85</span>, <span class="hljs-number">23</span>};&#13;
&#13;
    <span class="hljs-comment">// ----------------------------</span>&#13;
    <span class="hljs-comment">// 2. åºåˆ—åŒ–ï¼šBlogMeta â†’ JSON</span>&#13;
    <span class="hljs-comment">// ----------------------------</span>&#13;
    json j = blog;  <span class="hljs-comment">// è‡ªåŠ¨è°ƒç”¨ to_json</span>&#13;
    std::cout &lt;&lt; <span class="hljs-string">"ã€åºåˆ—åŒ–ç»“æœã€‘\n"</span> &lt;&lt; j.<span class="hljs-built_in">dump</span>(<span class="hljs-number">2</span>) &lt;&lt; <span class="hljs-string">"\n\n"</span>;&#13;
&#13;
    <span class="hljs-comment">// ----------------------------</span>&#13;
    <span class="hljs-comment">// 3. ååºåˆ—åŒ–ï¼šJSON â†’ BlogMeta</span>&#13;
    <span class="hljs-comment">// ----------------------------</span>&#13;
    <span class="hljs-comment">// æ¨¡æ‹Ÿä»æ–‡ä»¶æˆ–ç½‘ç»œæ¥æ”¶åˆ°çš„ JSONï¼ˆæ•…æ„çœç•¥ updatedTimeï¼‰</span>&#13;
    std::string jsonStr = <span class="hljs-string">R"({&#13;
        "id": "blog-002",&#13;
        "title": "ååºåˆ—åŒ–çš„å¥å£®æ€§æµ‹è¯•",&#13;
        "summary": "æµ‹è¯•ç¼ºå¤± updatedTime å­—æ®µæ—¶çš„è¡Œä¸º",&#13;
        "createdTime": "2025-12-20T08:30:00Z",&#13;
        "coverAddress": "/images/robust.png",&#13;
        "isDraft": 1,&#13;
        "tagNames": ["C++", "Robustness"],&#13;
        "categoryNames": ["Engineering"],&#13;
        "postStats": {&#13;
            "viewCount": 450,&#13;
            "likeCount": 30,&#13;
            "commentCount": 5&#13;
        }&#13;
    })"</span>;&#13;
 &#13;
    BlogMeta restoredBlog = json::<span class="hljs-built_in">parse</span>(jsonStr);  <span class="hljs-comment">// è‡ªåŠ¨è°ƒç”¨ from_json</span>&#13;
  &#13;
    <span class="hljs-comment">// ----------------------------</span>&#13;
    <span class="hljs-comment">// 4. éªŒè¯ååºåˆ—åŒ–ç»“æœ</span>&#13;
    <span class="hljs-comment">// ----------------------------</span>&#13;
    std::cout &lt;&lt; <span class="hljs-string">"ã€ååºåˆ—åŒ–ç»“æœã€‘\n"</span>;&#13;
    std::cout &lt;&lt; <span class="hljs-string">"ID: "</span> &lt;&lt; restoredBlog.id &lt;&lt; <span class="hljs-string">"\n"</span>;&#13;
    std::cout &lt;&lt; <span class="hljs-string">"Title: "</span> &lt;&lt; restoredBlog.title &lt;&lt; <span class="hljs-string">"\n"</span>;&#13;
    std::cout &lt;&lt; <span class="hljs-string">"UpdatedTime (åº”ä¸ºå½“å‰é»˜è®¤å€¼): "</span> &lt;&lt; restoredBlog.updatedTime &lt;&lt; <span class="hljs-string">"\n"</span>;&#13;
    std::cout &lt;&lt; <span class="hljs-string">"Is Draft: "</span> &lt;&lt; restoredBlog.isDraft &lt;&lt; <span class="hljs-string">"\n"</span>;&#13;
    std::cout &lt;&lt; <span class="hljs-string">"Tags: "</span>;&#13;
    <span class="hljs-keyword">for</span> (<span class="hljs-type">const</span> <span class="hljs-keyword">auto</span>&amp; tag : restoredBlog.tagNames) {&#13;
        std::cout &lt;&lt; tag &lt;&lt; <span class="hljs-string">" "</span>;&#13;
    }&#13;
    std::cout &lt;&lt; <span class="hljs-string">"\n"</span>;&#13;
&#13;
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;&#13;
}
</code></pre>
<h3 data-id="heading-4">3.2 èƒ½åŠ›</h3>
<p>åºåˆ—åŒ– / ååºåˆ—åŒ–çš„èƒ½åŠ›å–å†³äºæ‰€ä½¿ç”¨çš„åº“å®ç°çš„ç¨‹åº¦ã€‚ä¾‹å¦‚è¿™ä¸ªä¾‹å­ä¸­ï¼Œstd å®¹å™¨ <code>std::vector&lt;std::string&gt;</code> ä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨èµ‹å€¼è¿ç®—ç¬¦<code>=</code>æ¥åºåˆ—åŒ–/ååºåˆ—åŒ–å—ï¼Ÿç¡®å®æ˜¯å¯ä»¥çš„ï¼Œnlohmann/json æ”¯æŒæ‰€æœ‰åŸºç¡€ç±»å‹ä»¥åŠç»å¤§å¤šæ•° std å®¹å™¨ç±»å‹çš„ç›´æ¥ åºåˆ—åŒ–/ ååºåˆ—åŒ–ã€‚ä¸è¿‡é»˜è®¤æƒ…å†µä¸‹ï¼ŒC++ æ•°æ®ç±»å‹ä¸JSONçš„å¯¹åº”å…³ç³»æ˜¯ï¼šstd::string å¯¹åº”å­—ç¬¦ä¸²ï¼Œ int64_tï¼Œ uint64_t æˆ– double å¯¹åº”æ•°å­—ï¼Œ std::map å¯¹åº”å¯¹è±¡ï¼Œ std::vector å¯¹åº”æ•°ç»„ï¼Œä¸” bool å¯¹åº”å¸ƒå°”å€¼ã€‚</p>
<p>å¦å¤–ï¼Œnlohmann/json è¿˜æ”¯æŒåµŒå¥—åºåˆ—åŒ–ã€‚æ¯”å¦‚è¿™é‡Œçš„ PostStats å…¶å®ä¹Ÿæ˜¯ä¸ªè‡ªå®šä¹‰çš„ struct ï¼Œä¹Ÿå®ç°äº† <code>to_json</code> / <code>from_json</code> æ¥å£ï¼Œå› æ­¤å¯ä»¥ç›´æ¥é€šè¿‡èµ‹å€¼è¿ç®—ç¬¦<code>=</code>ç›¸äº’è½¬æ¢ã€‚</p>
<p><strong>PostStats.h</strong>:</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-meta">#<span class="hljs-keyword">pragma</span> once</span>&#13;
&#13;
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;nlohmann/json.hpp&gt;</span></span>&#13;
&#13;
<span class="hljs-keyword">namespace</span> DataTransfer {&#13;
&#13;
<span class="hljs-comment">/// @brief ä¸€ç¯‡åšå®¢çš„ç»Ÿè®¡ä¿¡æ¯</span>&#13;
<span class="hljs-keyword">struct</span> <span class="hljs-title class_">PostStats</span> {&#13;
  <span class="hljs-type">int64_t</span> viewCount = <span class="hljs-number">0</span>;     <span class="hljs-comment">// é˜…è¯»é‡</span>&#13;
  <span class="hljs-type">int64_t</span> likeCount = <span class="hljs-number">0</span>;     <span class="hljs-comment">// ç‚¹èµé‡</span>&#13;
  <span class="hljs-type">int64_t</span> commentCount = <span class="hljs-number">0</span>;  <span class="hljs-comment">// è¯„è®ºé‡</span>&#13;
&#13;
  <span class="hljs-comment">// æä¾›åºåˆ—åŒ–æ¥å£</span>&#13;
  <span class="hljs-function"><span class="hljs-keyword">friend</span> <span class="hljs-type">void</span> <span class="hljs-title">to_json</span><span class="hljs-params">(nlohmann::json&amp; j, <span class="hljs-type">const</span> PostStats&amp; s)</span></span>;&#13;
&#13;
  <span class="hljs-comment">// æä¾›ååºåˆ—åŒ–æ¥å£</span>&#13;
  <span class="hljs-function"><span class="hljs-keyword">friend</span> <span class="hljs-type">void</span> <span class="hljs-title">from_json</span><span class="hljs-params">(<span class="hljs-type">const</span> nlohmann::json&amp; j, PostStats&amp; s)</span></span>;&#13;
};&#13;
&#13;
}  <span class="hljs-comment">// namespace DataTransfer</span>
</code></pre>
<p><strong>PostStats.cpp</strong>:</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">"PostStats.h"</span></span>&#13;
&#13;
<span class="hljs-keyword">namespace</span> DataTransfer {&#13;
&#13;
<span class="hljs-comment">// æä¾›åºåˆ—åŒ–æ¥å£</span>&#13;
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">to_json</span><span class="hljs-params">(nlohmann::json&amp; j, <span class="hljs-type">const</span> PostStats&amp; s)</span> </span>{&#13;
  j = nlohmann::json{{<span class="hljs-string">"viewCount"</span>, s.viewCount},&#13;
                     {<span class="hljs-string">"likeCount"</span>, s.likeCount},&#13;
                     {<span class="hljs-string">"commentCount"</span>, s.commentCount}};&#13;
}&#13;
&#13;
<span class="hljs-comment">// æä¾›ååºåˆ—åŒ–æ¥å£</span>&#13;
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">from_json</span><span class="hljs-params">(<span class="hljs-type">const</span> nlohmann::json&amp; j, PostStats&amp; s)</span> </span>{&#13;
  s.viewCount = j.<span class="hljs-built_in">at</span>(<span class="hljs-string">"viewCount"</span>).<span class="hljs-built_in">get</span>&lt;<span class="hljs-type">int64_t</span>&gt;();&#13;
  s.likeCount = j.<span class="hljs-built_in">at</span>(<span class="hljs-string">"likeCount"</span>).<span class="hljs-built_in">get</span>&lt;<span class="hljs-type">int64_t</span>&gt;();&#13;
  s.commentCount = j.<span class="hljs-built_in">at</span>(<span class="hljs-string">"commentCount"</span>).<span class="hljs-built_in">get</span>&lt;<span class="hljs-type">int64_t</span>&gt;();&#13;
}&#13;
&#13;
}  <span class="hljs-comment">// namespace DataTransfer</span>
</code></pre>
<h3 data-id="heading-5">3.3 å…¼å®¹</h3>
<p>å¦‚æœ JSON é…ç½®æ–‡ä»¶è¿›è¡Œäº†å‡çº§ï¼Œæ¯”å¦‚å¢åŠ äº†ä¸€ä¸ªæ–°çš„é…ç½®å­—æ®µï¼Œé‚£ä¹ˆæ–°çš„ç¨‹åºè¯»å–æ—§çš„é…ç½®æ–‡ä»¶å°±æœ‰å¯èƒ½å‡ºé”™ï¼Œæ‰€ä»¥åœ¨ååºåˆ—åŒ–çš„æ—¶å€™æœ€å¥½ä½¿ç”¨ value() æä¾›é»˜è®¤å€¼ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">from_json</span><span class="hljs-params">(<span class="hljs-type">const</span> nlohmann::json&amp; j, BlogMeta&amp; s)</span> </span>{&#13;
  s.id = j.<span class="hljs-built_in">value</span>(<span class="hljs-string">"id"</span>, std::string{});&#13;
  s.title = j.<span class="hljs-built_in">value</span>(<span class="hljs-string">"title"</span>, std::string{});&#13;
  s.summary = j.<span class="hljs-built_in">value</span>(<span class="hljs-string">"summary"</span>, std::string{});&#13;
  s.createdTime = j.<span class="hljs-built_in">value</span>(<span class="hljs-string">"createdTime"</span>, std::string{});&#13;
  s.updatedTime = j.<span class="hljs-built_in">value</span>(<span class="hljs-string">"updatedTime"</span>, std::string{}); <span class="hljs-comment">// è‹¥ç¼ºå¤±åˆ™ä¸ºç©ºå­—ç¬¦ä¸²</span>&#13;
  s.coverAddress = j.<span class="hljs-built_in">value</span>(<span class="hljs-string">"coverAddress"</span>, std::string{});&#13;
  s.isDraft = j.<span class="hljs-built_in">value</span>(<span class="hljs-string">"isDraft"</span>, <span class="hljs-type">int64_t</span>{<span class="hljs-number">0</span>});&#13;
  s.tagNames = j.<span class="hljs-built_in">value</span>(<span class="hljs-string">"tagNames"</span>, std::vector&lt;std::string&gt;{});&#13;
  s.categoryNames = j.<span class="hljs-built_in">value</span>(<span class="hljs-string">"categoryNames"</span>, std::vector&lt;std::string&gt;{});&#13;
&#13;
  <span class="hljs-comment">// å¯¹äºåµŒå¥—ç»“æ„å¦‚ PostStatsï¼Œå¦‚æœå®ƒä¹Ÿæ”¯æŒ from_jsonï¼Œå¯è¿™æ ·å¤„ç†ï¼š</span>&#13;
  <span class="hljs-keyword">if</span> (j.<span class="hljs-built_in">contains</span>(<span class="hljs-string">"postStats"</span>) &amp;&amp; j[<span class="hljs-string">"postStats"</span>].<span class="hljs-built_in">is_object</span>()) {&#13;
    s.postStats = j[<span class="hljs-string">"postStats"</span>].<span class="hljs-built_in">get</span>&lt;PostStats&gt;();&#13;
  } <span class="hljs-keyword">else</span> {&#13;
    s.postStats = PostStats{}; <span class="hljs-comment">// é»˜è®¤æ„é€ </span>&#13;
  }&#13;
}
</code></pre>
<p>å¦å¤–ï¼Œå¦‚æœä¸šåŠ¡é€»è¾‘å…è®¸ï¼Œèƒ½åˆ†æ¸…æ¥šå“ªäº›æ˜¯å¿…é¡»å­—æ®µï¼Œå“ªäº›æ˜¯å¯é€‰å­—æ®µï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨<code>std::optional</code>:</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">/// @brief ä¸€ç¯‡åšå®¢çš„å…ƒæ•°æ®ï¼ˆå¥å£®ç‰ˆï¼Œæ”¯æŒå¯é€‰å­—æ®µï¼‰</span>&#13;
<span class="hljs-keyword">struct</span> <span class="hljs-title class_">BlogMeta</span> {&#13;
    std::string id;                          <span class="hljs-comment">// å¿…å¡«</span>&#13;
    std::string title;                       <span class="hljs-comment">// å¿…å¡«</span>&#13;
    std::optional&lt;std::string&gt; summary;&#13;
    std::string createdTime;                 <span class="hljs-comment">// é€šå¸¸å¿…å¡«ï¼Œä¹Ÿå¯æ”¹ä¸º optional</span>&#13;
    std::optional&lt;std::string&gt; updatedTime;  &#13;
    std::optional&lt;std::string&gt; coverAddress;&#13;
    std::optional&lt;<span class="hljs-type">int64_t</span>&gt; isDraft;          <span class="hljs-comment">// å¯é€‰ï¼Œé»˜è®¤ false æˆ– 0</span>&#13;
    std::optional&lt;std::vector&lt;std::string&gt;&gt; tagNames;&#13;
    std::optional&lt;std::vector&lt;std::string&gt;&gt; categoryNames;&#13;
    std::optional&lt;PostStats&gt; postStats;&#13;
&#13;
    <span class="hljs-comment">// åºåˆ—åŒ–/ååºåˆ—åŒ–å‹å…ƒå£°æ˜</span>&#13;
    <span class="hljs-function"><span class="hljs-keyword">friend</span> <span class="hljs-type">void</span> <span class="hljs-title">to_json</span><span class="hljs-params">(nlohmann::json&amp; j, <span class="hljs-type">const</span> BlogMeta&amp; s)</span></span>;&#13;
    <span class="hljs-function"><span class="hljs-keyword">friend</span> <span class="hljs-type">void</span> <span class="hljs-title">from_json</span><span class="hljs-params">(<span class="hljs-type">const</span> nlohmann::json&amp; j, BlogMeta&amp; s)</span></span>;&#13;
};&#13;
&#13;
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">to_json</span><span class="hljs-params">(nlohmann::json&amp; j, <span class="hljs-type">const</span> BlogMeta&amp; s)</span> </span>{&#13;
    j = nlohmann::json{&#13;
        {<span class="hljs-string">"id"</span>, s.id},&#13;
        {<span class="hljs-string">"title"</span>, s.title},&#13;
        {<span class="hljs-string">"summary"</span>, s.summary},&#13;
        {<span class="hljs-string">"createdTime"</span>, s.createdTime},&#13;
        {<span class="hljs-string">"updatedTime"</span>, s.updatedTime},&#13;
        {<span class="hljs-string">"coverAddress"</span>, s.coverAddress},&#13;
        {<span class="hljs-string">"isDraft"</span>, s.isDraft},&#13;
        {<span class="hljs-string">"tagNames"</span>, s.tagNames},&#13;
        {<span class="hljs-string">"categoryNames"</span>, s.categoryNames},&#13;
        {<span class="hljs-string">"postStats"</span>, s.postStats}&#13;
    };&#13;
}&#13;
&#13;
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">from_json</span><span class="hljs-params">(<span class="hljs-type">const</span> nlohmann::json&amp; j, BlogMeta&amp; s)</span> </span>{&#13;
    <span class="hljs-comment">// å¿…å¡«å­—æ®µï¼šä½¿ç”¨ at()ï¼Œç¼ºå¤±æ—¶æŠ¥é”™</span>&#13;
    s.id = j.<span class="hljs-built_in">at</span>(<span class="hljs-string">"id"</span>).<span class="hljs-built_in">get</span>&lt;std::string&gt;();&#13;
    s.title = j.<span class="hljs-built_in">at</span>(<span class="hljs-string">"title"</span>).<span class="hljs-built_in">get</span>&lt;std::string&gt;();&#13;
    s.createdTime = j.<span class="hljs-built_in">at</span>(<span class="hljs-string">"createdTime"</span>).<span class="hljs-built_in">get</span>&lt;std::string&gt;(); <span class="hljs-comment">// è‹¥ä½ ä¹Ÿæƒ³è®©å®ƒå¯é€‰ï¼Œæ”¹ç”¨ value æˆ– optional</span>&#13;
&#13;
    <span class="hljs-comment">// å¯é€‰å­—æ®µï¼šç›´æ¥èµ‹å€¼ï¼Œnlohmann è‡ªåŠ¨å¤„ç†å­˜åœ¨æ€§</span>&#13;
    <span class="hljs-keyword">if</span> (j.<span class="hljs-built_in">contains</span>(<span class="hljs-string">"summary"</span>))       s.summary = j[<span class="hljs-string">"summary"</span>].<span class="hljs-built_in">get</span>&lt;std::string&gt;();&#13;
    <span class="hljs-keyword">if</span> (j.<span class="hljs-built_in">contains</span>(<span class="hljs-string">"updatedTime"</span>))   s.updatedTime = j[<span class="hljs-string">"updatedTime"</span>].<span class="hljs-built_in">get</span>&lt;std::string&gt;();&#13;
    <span class="hljs-keyword">if</span> (j.<span class="hljs-built_in">contains</span>(<span class="hljs-string">"coverAddress"</span>))  s.coverAddress = j[<span class="hljs-string">"coverAddress"</span>].<span class="hljs-built_in">get</span>&lt;std::string&gt;();&#13;
    <span class="hljs-keyword">if</span> (j.<span class="hljs-built_in">contains</span>(<span class="hljs-string">"isDraft"</span>))       s.isDraft = j[<span class="hljs-string">"isDraft"</span>].<span class="hljs-built_in">get</span>&lt;<span class="hljs-type">int64_t</span>&gt;();&#13;
    <span class="hljs-keyword">if</span> (j.<span class="hljs-built_in">contains</span>(<span class="hljs-string">"tagNames"</span>))      s.tagNames = j[<span class="hljs-string">"tagNames"</span>].get&lt;std::vector&lt;std::string&gt;&gt;();&#13;
    <span class="hljs-keyword">if</span> (j.<span class="hljs-built_in">contains</span>(<span class="hljs-string">"categoryNames"</span>)) s.categoryNames = j[<span class="hljs-string">"categoryNames"</span>].get&lt;std::vector&lt;std::string&gt;&gt;();&#13;
    <span class="hljs-keyword">if</span> (j.<span class="hljs-built_in">contains</span>(<span class="hljs-string">"postStats"</span>))     s.postStats = j[<span class="hljs-string">"postStats"</span>].<span class="hljs-built_in">get</span>&lt;PostStats&gt;();&#13;
}
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Tailwind CSSï¼šåŸå­åŒ– CSS çš„ç°ä»£å¼€å‘å®è·µ]]></title>    <link>https://juejin.cn/post/7588028859540570138</link>    <guid>https://juejin.cn/post/7588028859540570138</guid>    <pubDate>2025-12-26T16:26:13.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588028859540570138" data-draft-id="7588010346070605834" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Tailwind CSSï¼šåŸå­åŒ– CSS çš„ç°ä»£å¼€å‘å®è·µ"/> <meta itemprop="keywords" content="å‰ç«¯,CSS,JavaScript"/> <meta itemprop="datePublished" content="2025-12-26T16:26:13.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Tzarevich"/> <meta itemprop="url" content="https://juejin.cn/user/578786070367529"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Tailwind CSSï¼šåŸå­åŒ– CSS çš„ç°ä»£å¼€å‘å®è·µ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/578786070367529/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Tzarevich
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-26T16:26:13.000Z" title="Fri Dec 26 2025 16:26:13 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    3
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.8;font-weight:400;font-size:16px;word-spacing:2px;letter-spacing:2px;overflow-x:hidden;color:#3e3e3e;background-image:linear-gradient(90deg,rgba(50,0,0,.05) 3%,transparent 0),linear-gradient(1turn,rgba(50,0,0,.05) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:30px;margin-bottom:5px}.markdown-body h2{padding-bottom:12px;font-size:24px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:18px;padding-bottom:0}.markdown-body h4{font-size:1.2em;border-bottom:2px solid #ef7060;word-spacing:0!important;letter-spacing:0!important;font-size:inherit;line-height:inherit;display:block;font-weight:400;background:#ef7060;color:#fff;padding:10px;border-top-right-radius:3px;border-top-left-radius:3px;margin-right:3px}.markdown-body h5{font-size:15px}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="monokai">.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#272822;color:#ddd}.hljs-keyword,.hljs-literal,.hljs-name,.hljs-selector-tag,.hljs-strong,.hljs-tag{color:#f92672}.hljs-code{color:#66d9ef}.hljs-class .hljs-title{color:#fff}.hljs-attribute,.hljs-link,.hljs-regexp,.hljs-symbol{color:#bf79db}.hljs-addition,.hljs-built_in,.hljs-builtin-name,.hljs-bullet,.hljs-emphasis,.hljs-section,.hljs-selector-attr,.hljs-selector-pseudo,.hljs-string,.hljs-subst,.hljs-template-tag,.hljs-template-variable,.hljs-title,.hljs-type,.hljs-variable{color:#a6e22e}.hljs-comment,.hljs-deletion,.hljs-meta,.hljs-quote{color:#75715e}.hljs-doctag,.hljs-keyword,.hljs-literal,.hljs-section,.hljs-selector-id,.hljs-selector-tag,.hljs-title,.hljs-type{font-weight:700}</style><h2 data-id="heading-0">Tailwind CSSï¼šåŸå­åŒ– CSS çš„ç°ä»£å¼€å‘å®è·µ</h2>
<p>åœ¨å½“ä»Šå¿«é€Ÿè¿­ä»£çš„å‰ç«¯å¼€å‘ç¯å¢ƒä¸­ï¼Œå¦‚ä½•é«˜æ•ˆã€ä¸€è‡´ä¸”å¯ç»´æŠ¤åœ°æ„å»ºç”¨æˆ·ç•Œé¢ï¼Œæˆä¸ºæ¯ä¸ªå›¢é˜Ÿå¿…é¡»é¢å¯¹çš„æ ¸å¿ƒé—®é¢˜ã€‚ä¼ ç»Ÿ CSS çš„å‘½åå›°å¢ƒã€æ ·å¼å†—ä½™å’Œå¤ç”¨éš¾é¢˜ï¼Œå‚¬ç”Ÿäº†ä¸€ç§æ–°çš„è§£å†³æ–¹æ¡ˆâ€”â€”<strong>åŸå­åŒ– CSS</strong>ï¼ˆAtomic CSSï¼‰ã€‚è€Œ <strong>Tailwind CSS</strong>ï¼Œæ­£æ˜¯è¿™ä¸€ç†å¿µæœ€æˆåŠŸçš„å®è·µè€…ã€‚æœ¬æ–‡å°†ç»“åˆå®é™…ä»£ç ä¸å¼€å‘åœºæ™¯ï¼Œæ·±å…¥è§£æ Tailwind CSS çš„æ ¸å¿ƒæ€æƒ³ã€ä¼˜åŠ¿åŠæœ€ä½³å®è·µã€‚</p>
<hr/>
<h3 data-id="heading-1">ä¸€ã€ä»€ä¹ˆæ˜¯åŸå­åŒ– CSSï¼Ÿ</h3>
<p>ä¼ ç»Ÿ CSS å€¾å‘äºâ€œè¯­ä¹‰åŒ–å‘½åâ€ï¼šæˆ‘ä»¬ä¸ºç»„ä»¶èµ·ä¸€ä¸ªåå­—ï¼ˆå¦‚ <code>.card-title</code>ï¼‰ï¼Œç„¶åä¸ºå…¶ç¼–å†™æ ·å¼ã€‚è¿™ç§æ–¹å¼å¸¸è¢«ç§°ä¸ºâ€œé¢å‘å¯¹è±¡ CSSâ€ï¼ˆOOCSSï¼‰ï¼Œå®ƒè¯•å›¾é€šè¿‡<strong>å°è£…åŸºç±»ã€ç»„åˆå¤šæ€</strong>æ¥æå‡å¤ç”¨æ€§ã€‚ä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.btn</span> { <span class="hljs-attribute">padding</span>: <span class="hljs-number">8px</span> <span class="hljs-number">16px</span>; <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">6px</span>; }
<span class="hljs-selector-class">.btn-primary</span> { <span class="hljs-attribute">background</span>: skyblue; <span class="hljs-attribute">color</span>: white; }
</code></pre>
<p>ä½†å®è·µä¸­ï¼Œ<strong>æ ·å¼å¾€å¾€å¸¦æœ‰å¤ªå¤šä¸šåŠ¡å±æ€§</strong>ï¼Œå¯¼è‡´åœ¨ä¸€ä¸ªæˆ–å°‘æ•°ç±»åä¸‹ï¼Œæ ·å¼å‡ ä¹æ— æ³•è·¨é¡¹ç›®å¤ç”¨ï¼Œæœ€ç»ˆæ¼”å˜ä¸ºâ€œä¸€æ¬¡æ€§ CSSâ€ã€‚</p>
<p><strong>åŸå­åŒ– CSS åˆ™åå…¶é“è€Œè¡Œä¹‹</strong>ï¼šå®ƒå°†æ ·å¼æ‹†è§£ä¸ºæœ€å°ã€å•ä¸€èŒè´£çš„â€œåŸå­ç±»â€ï¼Œæ¯ä¸ªç±»åªæ§åˆ¶ä¸€ä¸ªå…·ä½“çš„æ ·å¼å±æ€§ã€‚ä¾‹å¦‚ï¼š</p>
<ul>
<li><code>p-4</code> â†’ <code>padding: 1rem</code></li>
<li><code>bg-blue-500</code> â†’ <code>background-color: #3b82f6</code></li>
<li><code>text-center</code> â†’ <code>text-align: center</code></li>
</ul>
<p>è¿™äº›ç±»åç›´æ¥æè¿°<strong>æ ·å¼æœ¬èº«</strong>ï¼Œè€Œéå†…å®¹è¯­ä¹‰ã€‚é€šè¿‡ç»„åˆè¿™äº›åŸå­ç±»ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ HTML ä¸­ç›´æ¥æ„å»º UIï¼Œæ— éœ€ç¦»å¼€æ¨¡æ¿æ–‡ä»¶ã€‚</p>
<blockquote>
<p>å°†æˆ‘ä»¬çš„ CSS è§„åˆ™æ‹†åˆ†æˆåŸå­ CSSï¼Œä¼šæœ‰å¤§é‡çš„åŸºç±»ï¼Œå¥½å¤ç”¨ã€å¥½ç»´æŠ¤ï¼Œä¸ä¼šé‡å¤ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-2">äºŒã€Tailwind CSSï¼šåŸå­åŒ–ç†å¿µçš„é›†å¤§æˆè€…</h3>
<p>Tailwind CSS æ˜¯ä¸€ä¸ªåŠŸèƒ½ä¼˜å…ˆï¼ˆUtility-Firstï¼‰çš„ CSS æ¡†æ¶ï¼Œå®ƒä¸æä¾›é¢„è®¾ç»„ä»¶ï¼ˆå¦‚ Bootstrap çš„ <code>.btn</code>ï¼‰ï¼Œè€Œæ˜¯æä¾›ä¸€å¥—å®Œæ•´çš„å·¥å…·ç±»ç³»ç»Ÿã€‚</p>
<h4 data-id="heading-3">ç¤ºä¾‹ï¼šæ„å»ºä¸€ä¸ªæŒ‰é’®</h4>
<pre><code class="hljs language-ini" lang="ini">&lt;button <span class="hljs-attr">className</span>=<span class="hljs-string">"px-4 py-2 bg-[skyblue] text-white rounded-lg hover:bg-blue-200"</span>&gt;
  æäº¤
&lt;/button&gt;
</code></pre>
<ul>
<li><code>px-4 py-2</code>ï¼šè®¾ç½®å†…è¾¹è·ï¼Œè¡¨ç¤ºæ°´å¹³æ–¹å‘å†…è¾¹è·1remï¼Œå‚ç›´æ–¹å‘å†…è¾¹è·0.5remï¼›</li>
<li><code>bg-[skyblue]</code>ï¼šèƒŒæ™¯è‰²ï¼›</li>
<li><code>rounded-lg</code>ï¼šåœ†è§’ï¼Œlgä¸ºlargeå¤§å·åœ†è§’ï¼ˆ0.5rem = 8pxï¼‰ï¼›</li>
<li><code>hover:bg-blue-200</code>ï¼šæ‚¬åœæ•ˆæœï¼Œé¼ æ ‡æ‚¬åœæ—¶èƒŒæ™¯è‰²å˜ä¸ºè“è‰²ç³»200æ·±åº¦é¢œè‰²ï¼Œhoverä¸ºæ‚¬åœä¼ªç±»å‰ç¼€ã€‚</li>
</ul>
<p>æ‰€æœ‰æ ·å¼ä¸€ç›®äº†ç„¶ï¼Œæ— éœ€æŸ¥é˜… CSS æ–‡ä»¶ã€‚</p>
<h4 data-id="heading-4">ğŸ¤– LLM æ—¶ä»£çš„ç†æƒ³æ­æ¡£</h4>
<p>éšç€å¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰çš„æ™®åŠï¼Œ<strong>ç”¨è‡ªç„¶è¯­è¨€ç”Ÿæˆ UI ä»£ç </strong>æˆä¸ºå¯èƒ½ã€‚è€Œ Tailwind çš„ç±»åå…·æœ‰é«˜åº¦<strong>è¯­ä¹‰åŒ–ã€ç»“æ„åŒ–ã€å¯é¢„æµ‹</strong>çš„ç‰¹ç‚¹ï¼š</p>
<ul>
<li>å¼€å‘è€…åªéœ€æè¿°ï¼šâ€œä¸€ä¸ªå¸¦åœ†è§’ã€è“è‰²èƒŒæ™¯ã€ç™½è‰²æ–‡å­—çš„æŒ‰é’®â€</li>
<li>LLM å³å¯è¾“å‡ºï¼š<code>&lt;button class="px-4 py-2 bg-blue-500 text-white rounded"&gt;</code></li>
</ul>
<p>ç›¸æ¯”ä¹‹ä¸‹ï¼Œä¼ ç»Ÿ CSS éœ€è¦æ¨¡å‹åŒæ—¶ç”Ÿæˆ HTML å’Œ CSSï¼Œå¹¶ä¿è¯ç±»ååŒ¹é…ï¼Œéš¾åº¦æ›´é«˜ã€‚<strong>Tailwind è®©â€œPrompt â†’ UIâ€ çš„è·¯å¾„æ›´çŸ­ã€æ›´å¯é </strong>ã€‚</p>
<hr/>
<h3 data-id="heading-5">ä¸‰ã€å¿«é€Ÿä¸Šæ‰‹ï¼šåŸºäº Vite çš„é¡¹ç›®é…ç½®</h3>
<p>è¦åœ¨é¡¹ç›®ä¸­ä½¿ç”¨ Tailwindï¼Œåªéœ€å‡ æ­¥ï¼š</p>
<ol>
<li>
<p>åˆ›å»º Vite é¡¹ç›®ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp">npm <span class="hljs-keyword">init</span> vite
</code></pre>
</li>
<li>
<p>å®‰è£… Tailwind åŠå®˜æ–¹ Vite æ’ä»¶ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin">npm install -D tailwindcss <span class="hljs-meta">@tailwindcss</span>/vite
npx tailwindcss <span class="hljs-keyword">init</span>
</code></pre>
</li>
<li>
<p>é…ç½® <code>vite.config.js</code>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { defineConfig } <span class="hljs-keyword">from</span> <span class="hljs-string">'vite'</span>
<span class="hljs-keyword">import</span> tailwindcss <span class="hljs-keyword">from</span> <span class="hljs-string">'@tailwindcss/vite'</span> <span class="hljs-comment">// tailwindæ’ä»¶</span>
<span class="hljs-keyword">import</span> react <span class="hljs-keyword">from</span> <span class="hljs-string">'@vitejs/plugin-react'</span> <span class="hljs-comment">// reactæ’ä»¶</span>

<span class="hljs-comment">// https://vite.dev/config/</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineConfig</span>({
<span class="hljs-attr">plugins</span>: [<span class="hljs-title function_">react</span>(), <span class="hljs-title function_">tailwindcss</span>()],
})
</code></pre>
</li>
<li>
<p>åœ¨å…¥å£ CSS æ–‡ä»¶ï¼ˆå¦‚ <code>index.css</code>ï¼‰ä¸­å¼•å…¥ï¼š</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-keyword">@import</span> <span class="hljs-string">"tailwindcss"</span>;
</code></pre>
</li>
</ol>
<p>è‡³æ­¤ï¼Œæ‰€æœ‰åŸå­ç±»å³å¯åœ¨ JSX/HTML ä¸­ç›´æ¥ä½¿ç”¨ï¼Œ<strong>å‡ ä¹æ— éœ€å†æ‰‹å†™ CSS</strong>ã€‚</p>
<h3 data-id="heading-6">å››ã€æ€§èƒ½ä¸å·¥ç¨‹åŒ–ï¼šDocumentFragment ä¸ React Fragment</h3>
<p>é«˜æ•ˆçš„ UI ä¸ä»…å…³ä¹è§†è§‰ï¼Œä¹Ÿæ¶‰åŠæ€§èƒ½ã€‚åœ¨åŠ¨æ€æ¸²æŸ“å¤§é‡ DOM èŠ‚ç‚¹æ—¶ï¼Œ<strong>å‡å°‘é‡æ’/é‡ç»˜</strong>è‡³å…³é‡è¦ã€‚</p>
<h4 data-id="heading-7">åŸç”Ÿä¼˜åŒ–ï¼šDocumentFragment</h4>
<pre><code class="hljs language-ini" lang="ini">const <span class="hljs-attr">fragment</span> = document.createDocumentFragment()<span class="hljs-comment">;</span>
fragment.appendChild(p1)<span class="hljs-comment">;</span>
fragment.appendChild(p2)<span class="hljs-comment">;</span>
container.appendChild(fragment)<span class="hljs-comment">; // ä»…è§¦å‘ä¸€æ¬¡ DOM æ›´æ–°</span>
</code></pre>
<p>é€šè¿‡ <code>DocumentFragment</code>ï¼Œæˆ‘ä»¬å°†å¤šä¸ªèŠ‚ç‚¹åœ¨å†…å­˜ä¸­ç»„è£…åä¸€æ¬¡æ€§æ’å…¥ï¼Œæ˜¾è‘—æå‡æ€§èƒ½ã€‚</p>
<h4 data-id="heading-8">React åœºæ™¯ï¼šFragment è§£å†³å•æ ¹é™åˆ¶</h4>
<p>React è¦æ±‚ç»„ä»¶è¿”å›å•ä¸€æ ¹èŠ‚ç‚¹ã€‚è‹¥éœ€è¿”å›å¤šä¸ªåŒçº§å…ƒç´ ï¼Œä¼ ç»Ÿåšæ³•æ˜¯åŒ…è£¹ä¸€ä¸ªæ— æ„ä¹‰çš„ <code>&lt;div&gt;</code>ï¼Œä½†è¿™ä¼šæ±¡æŸ“ DOM ç»“æ„ã€‚</p>
<p>Tailwind + React çš„æœ€ä½³å®è·µæ˜¯ä½¿ç”¨ <strong>Fragment</strong>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>111<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>222<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">ArticleCard</span> /&gt;</span> {/* è‡ªå®šä¹‰å¡ç‰‡ç»„ä»¶ */}
    <span class="hljs-tag">&lt;/&gt;</span></span>
  )
}
</code></pre>
<p><code>&lt;&gt;...&lt;/&gt;</code>ï¼ˆå³ <code>&lt;React.Fragment&gt;</code>ï¼‰å…è®¸æˆ‘ä»¬è¿”å›å¤šä¸ªå…ƒç´ ï¼Œ<strong>ä¸äº§ç”Ÿé¢å¤– DOM èŠ‚ç‚¹</strong>ï¼Œä¿æŒç»“æ„çº¯å‡€ï¼ŒåŒæ—¶ä¹Ÿä¾¿äºä¸€æ¬¡æ€§æ’å…¥æ•´ä¸ª UI ç‰‡æ®µï¼Œæå‡æ¸²æŸ“æ€§èƒ½ã€‚</p>
<h3 data-id="heading-9">äº”ã€å“åº”å¼è®¾è®¡ï¼šMobile First çš„ä¼˜é›…å®ç°</h3>
<p>Tailwind å†…ç½®å“åº”å¼å‰ç¼€ï¼Œå®Œç¾æ”¯æŒâ€œç§»åŠ¨ç«¯ä¼˜å…ˆâ€å¼€å‘ç­–ç•¥ã€‚</p>
<h4 data-id="heading-10">åŸºç¡€å¸ƒå±€ï¼ˆç§»åŠ¨ç«¯å‚ç›´å †å ï¼‰ï¼š</h4>
<pre><code class="hljs language-css" lang="css">&lt;<span class="hljs-selector-tag">div</span> className="<span class="hljs-attribute">flex</span> <span class="hljs-attribute">flex</span>-col <span class="hljs-attribute">gap</span>-<span class="hljs-number">4</span>"&gt;
  &lt;<span class="hljs-selector-tag">main</span> className="bg-blue-<span class="hljs-number">100</span> <span class="hljs-selector-tag">p</span>-<span class="hljs-number">4</span>"&gt;ä¸»å†…å®¹&lt;/<span class="hljs-selector-tag">main</span>&gt;
  &lt;<span class="hljs-selector-tag">aside</span> className="bg-green-<span class="hljs-number">100</span> <span class="hljs-selector-tag">p</span>-<span class="hljs-number">4</span>"&gt;ä¾§è¾¹æ &lt;/<span class="hljs-selector-tag">aside</span>&gt;
&lt;/<span class="hljs-selector-tag">div</span>&gt;
</code></pre>
<h4 data-id="heading-11">å¢å¼ºè‡³æ¡Œé¢ç«¯ï¼ˆæ°´å¹³æ’åˆ—ï¼‰ï¼š</h4>
<pre><code class="hljs language-ini" lang="ini">&lt;div <span class="hljs-attr">className</span>=<span class="hljs-string">"flex flex-col md:flex-row gap-4"</span>&gt;
  &lt;main <span class="hljs-attr">className</span>=<span class="hljs-string">"bg-blue-100 p-4 md:w-2/3"</span>&gt;ä¸»å†…å®¹&lt;/main&gt;
  &lt;aside <span class="hljs-attr">className</span>=<span class="hljs-string">"bg-green-100 p-4 md:w-1/3"</span>&gt;ä¾§è¾¹æ &lt;/aside&gt;
&lt;/div&gt;
</code></pre>
<ul>
<li>å°å±ï¼š<code>flex-col</code>ï¼ˆå‚ç›´ï¼‰</li>
<li>ä¸­å±åŠä»¥ä¸Šï¼š<code>md:flex-row</code>ï¼ˆæ°´å¹³ï¼‰</li>
</ul>
<p>è¿™ç§â€œæ¸è¿›å¢å¼ºâ€çš„æ–¹å¼ï¼Œç¡®ä¿äº†åœ¨æ‰€æœ‰è®¾å¤‡ä¸Šéƒ½æœ‰è‰¯å¥½ä½“éªŒã€‚</p>
<h3 data-id="heading-12">å…­ã€ä¸ºä»€ä¹ˆé€‰æ‹© Tailwindï¼Ÿ</h3>
<ol>
<li><strong>å¼€å‘æ•ˆç‡é«˜</strong>ï¼šæ ·å¼å³ä»£ç ï¼Œæ— éœ€ä¸Šä¸‹æ–‡åˆ‡æ¢ï¼›</li>
<li><strong>è®¾è®¡ä¸€è‡´æ€§</strong>ï¼šåŸºäºé¢„è®¾çš„è®¾è®¡ç³»ç»Ÿï¼ˆé—´è·ã€é¢œè‰²ã€å­—ä½“ç­‰ï¼‰ï¼›</li>
<li><strong>é«˜åº¦å¯å®šåˆ¶</strong>ï¼šé€šè¿‡ <code>tailwind.config.js</code> æ‰©å±•ä¸»é¢˜ã€æ–­ç‚¹ã€æ’ä»¶ï¼›</li>
<li><strong>æè‡´æ€§èƒ½</strong>ï¼šJIT æ¨¡å¼ä»…ç”Ÿæˆç”¨åˆ°çš„ CSSï¼Œä½“ç§¯æå°ï¼›</li>
<li><strong>æœªæ¥å‹å¥½</strong>ï¼šä¸ Reactã€Vueã€Svelte ç­‰ç°ä»£æ¡†æ¶æ— ç¼é›†æˆï¼›</li>
<li><strong>AI å‹å¥½</strong>ï¼šç±»åç»“æ„æ¸…æ™°ï¼Œæ˜“äº LLM ç†è§£ä¸ç”Ÿæˆã€‚</li>
</ol>
<h3 data-id="heading-13">ä¸ƒã€ç»“è¯­</h3>
<p>Tailwind CSS ä¸ä»…ä»…æ˜¯ä¸€ä¸ª CSS æ¡†æ¶ï¼Œæ›´æ˜¯ä¸€ç§<strong>UI å¼€å‘å“²å­¦</strong>ã€‚å®ƒé€šè¿‡åŸå­åŒ–ã€åŠŸèƒ½ä¼˜å…ˆçš„è®¾è®¡ï¼Œå°† CSS ä»â€œå‘½åçš„è‰ºæœ¯â€è½¬å˜ä¸ºâ€œç»„åˆçš„ç§‘å­¦â€ã€‚æ­£å¦‚æˆ‘ä»¬åœ¨æ–‡ç« ä¸­æ‰€è§ï¼Œæ— è®ºæ˜¯ç®€å•çš„æŒ‰é’®ã€å¤æ‚çš„å¡ç‰‡ï¼Œè¿˜æ˜¯å“åº”å¼å¸ƒå±€ï¼ŒTailwind éƒ½èƒ½ä»¥ç®€æ´ã€ç›´è§‚çš„æ–¹å¼å®ç°ã€‚</p>
<p>æ›´é‡è¦çš„æ˜¯ï¼Œåœ¨ AI ç¼–ç¨‹æ—¶ä»£ï¼ŒTailwind çš„<strong>ç»“æ„åŒ–ã€è¯­ä¹‰åŒ–ç±»å</strong>ä½¿å…¶æˆä¸ºè‡ªç„¶è¯­è¨€ç”Ÿæˆ UI çš„ç†æƒ³è½½ä½“ã€‚å¯¹äºè¿½æ±‚æ•ˆç‡ã€ä¸€è‡´æ€§å’Œå¯ç»´æŠ¤æ€§çš„ç°ä»£å‰ç«¯å›¢é˜Ÿè€Œè¨€ï¼ŒTailwind CSS æ— ç–‘æ˜¯å€¼å¾—æ‹¥æŠ±çš„åˆ©å™¨ã€‚</p>
<blockquote>
<p><strong>â€œä¸ç”¨ç¦»å¼€ HTML å†™ CSS äº†ï¼Œæ‰€æœ‰çš„æ ·å¼éƒ½åœ¨ç±»åä¸­ã€‚â€</strong><br/>
â€”â€” è¿™æˆ–è®¸æ˜¯å¯¹ Tailwind æœ€ç²¾ç‚¼çš„èµç¾ã€‚</p>
</blockquote>
<p><strong>å‚è€ƒèµ„æ–™</strong>ï¼š</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftailwindcss.com%2F" target="_blank" title="https://tailwindcss.com/" ref="nofollow noopener noreferrer">Tailwind CSS å®˜æ–¹æ–‡æ¡£</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Cursor Visual Editorï¼šå‰ç«¯æ ·å¼è°ƒè¯•çš„æ–°åˆ©å™¨]]></title>    <link>https://juejin.cn/post/7587776610436759567</link>    <guid>https://juejin.cn/post/7587776610436759567</guid>    <pubDate>2025-12-26T19:05:37.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587776610436759567" data-draft-id="7587965800273018906" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Cursor Visual Editorï¼šå‰ç«¯æ ·å¼è°ƒè¯•çš„æ–°åˆ©å™¨"/> <meta itemprop="keywords" content="CSS,å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-26T19:05:37.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="bytemanx"/> <meta itemprop="url" content="https://juejin.cn/user/4059855780846936"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Cursor Visual Editorï¼šå‰ç«¯æ ·å¼è°ƒè¯•çš„æ–°åˆ©å™¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4059855780846936/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    bytemanx
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-26T19:05:37.000Z" title="Fri Dec 26 2025 19:05:37 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä½œä¸ºå‰ç«¯å¼€å‘è€…ï¼Œä½ ä¸€å®šç»å†è¿‡è¿™æ ·çš„åœºæ™¯ï¼šä¸ºäº†è°ƒæ•´ä¸€ä¸ªæ¸å˜çš„è§’åº¦ã€ä¿®æ”¹ä¸€ä¸ªå…ƒç´ çš„è¡Œé«˜ï¼Œåå¤åœ¨ä»£ç å’Œæµè§ˆå™¨ä¹‹é—´åˆ‡æ¢ï¼Œæ”¹ä¸€è¡Œä»£ç ã€ä¿å­˜ã€åˆ·æ–°ã€çœ‹æ•ˆæœã€å†æ”¹â€¦â€¦</p>
<p>è¿™ç§"ç›²è°ƒ"çš„æ–¹å¼æ•ˆç‡ä½ä¸‹ï¼Œå°¤å…¶æ˜¯åœ¨è°ƒè¯• CSS åŠ¨ç”»è¿™ç±»éœ€è¦ç²¾ç»†æ§åˆ¶çš„æ•ˆæœæ—¶ï¼Œæ›´æ˜¯è®©äººæŠ“ç‹‚ã€‚</p>
<p>å¥½æ¶ˆæ¯æ˜¯ï¼ŒCursor 2.2 å¸¦æ¥äº†ä¸€ä¸ªä»¤äººå…´å¥‹çš„æ–°åŠŸèƒ½â€”â€”<strong>Visual Editor</strong>ã€‚å®ƒå°†ä½ çš„ Web åº”ç”¨ã€ä»£ç åº“å’Œå¯è§†åŒ–ç¼–è¾‘å·¥å…·æ•´åˆåˆ°åŒä¸€ä¸ªçª—å£ä¸­ï¼Œè®©ç•Œé¢è°ƒè¯•å˜å¾—å‰æ‰€æœªæœ‰çš„ç›´è§‚ã€‚</p>
<p>ä»Šå¤©ï¼Œæˆ‘ä»¬å°±é€šè¿‡ä¸¤ä¸ªç‚«é…·çš„ CSS åŠ¨ç”»æ¡ˆä¾‹ï¼Œæ¥ä½“éªŒä¸€ä¸‹è¿™ä¸ªå¯è§†åŒ–ç¼–è¾‘å™¨çš„å¼ºå¤§ä¹‹å¤„ã€‚</p>
<h2 data-id="heading-0">è®¤è¯† Visual Editor</h2>
<p>é¦–å…ˆï¼Œåœ¨ Cursor ä¸­é€‰æ‹© <strong>Open Browser</strong> å³å¯æ‰“å¼€å†…ç½®æµè§ˆå™¨å°çª—å£ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f8fe3aa43615414884e06d5701fefb77~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgYnl0ZW1hbng=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767380736&amp;x-signature=TfRYZrS8h1bY%2BLt2D42hgaG7Jg8%3D" alt="20251227024633_rec_-convert.gif" loading="lazy"/></p>
<p>æ ¹æ® <a href="https://link.juejin.cn?target=https%3A%2F%2Fcursor.com%2Fblog%2Fbrowser-visual-editor" target="_blank" title="https://cursor.com/blog/browser-visual-editor" ref="nofollow noopener noreferrer">Cursor å®˜æ–¹åšå®¢</a> çš„ä»‹ç»ï¼ŒVisual Editor æä¾›äº†å››å¤§æ ¸å¿ƒèƒ½åŠ›ï¼š</p>
<h3 data-id="heading-1">1. æ‹–æ‹½é‡æ’ï¼ˆDrag-and-dropï¼‰</h3>
<p>ç›´æ¥åœ¨æ¸²æŸ“å¥½çš„é¡µé¢ä¸Šæ‹–åŠ¨å…ƒç´ ï¼Œè°ƒæ•´å¸ƒå±€ç»“æ„ã€‚ä½ å¯ä»¥äº¤æ¢æŒ‰é’®é¡ºåºã€æ—‹è½¬åŒºå—ä½ç½®ã€æµ‹è¯•ä¸åŒçš„ç½‘æ ¼é…ç½®â€”â€”æ‰€æœ‰æ“ä½œéƒ½ä¸éœ€è¦åˆ‡æ¢ä¸Šä¸‹æ–‡ã€‚å½“è§†è§‰è®¾è®¡ç¬¦åˆé¢„æœŸåï¼Œè®© Agent å¸®ä½ æ›´æ–°åº•å±‚ä»£ç ã€‚</p>
<h3 data-id="heading-2">2. ç»„ä»¶çŠ¶æ€æµ‹è¯•ï¼ˆTest component statesï¼‰</h3>
<p>å¯¹äº React åº”ç”¨ï¼ŒVisual Editor å¯ä»¥åœ¨ä¾§è¾¹æ ç›´æ¥æ˜¾ç¤ºç»„ä»¶çš„ propsï¼Œè®©ä½ æ–¹ä¾¿åœ°åˆ‡æ¢ä¸åŒçš„ç»„ä»¶çŠ¶æ€å˜ä½“ã€‚</p>
<h3 data-id="heading-3">3. å±æ€§å¯è§†åŒ–è°ƒæ•´ï¼ˆVisual controlsï¼‰</h3>
<p>è¿™æ˜¯æœ€å®ç”¨çš„åŠŸèƒ½ä¹‹ä¸€ã€‚ä¾§è¾¹æ æä¾›äº†æ»‘å—ã€é¢œè‰²é€‰æ‹©å™¨ç­‰å¯è§†åŒ–æ§ä»¶ï¼Œæ”¯æŒå®æ—¶é¢„è§ˆã€‚ä½ å¯ä»¥ç²¾ç¡®è°ƒæ•´é¢œè‰²ã€å¸ƒå±€ã€å­—ä½“ç­‰å±æ€§ï¼Œæ‰€æœ‰æ”¹åŠ¨å³æ—¶ç”Ÿæ•ˆã€‚</p>
<h3 data-id="heading-4">4. ç‚¹å‡» + æç¤ºï¼ˆPoint and promptï¼‰</h3>
<p>é€‰ä¸­ç•Œé¢ä¸Šçš„ä»»æ„å…ƒç´ ï¼Œç”¨è‡ªç„¶è¯­è¨€æè¿°ä½ æƒ³è¦çš„ä¿®æ”¹ã€‚æ¯”å¦‚ç‚¹å‡»ä¸€ä¸ªå…ƒç´ è¯´"æŠŠè¿™ä¸ªå˜å¤§"ï¼Œç‚¹å‡»å¦ä¸€ä¸ªè¯´"æ”¹æˆçº¢è‰²"â€”â€”å¤šä¸ª Agent ä¼šå¹¶è¡Œæ‰§è¡Œï¼Œå‡ ç§’é’Ÿå†…å®Œæˆä¿®æ”¹ã€‚</p>
<h2 data-id="heading-5">å®æˆ˜æ¡ˆä¾‹ä¸€ï¼šæ¸å˜æµåŠ¨æ–‡å­—</h2>
<p>è®©æˆ‘ä»¬ç”¨ä¸€ä¸ªæ¸å˜æµåŠ¨æ–‡å­—æ•ˆæœæ¥ä½“éªŒ Visual Editor çš„å¨åŠ›ã€‚</p>
<h3 data-id="heading-6">æ•ˆæœå±•ç¤º</h3>
<p>å…ˆæ¥çœ‹çœ‹æœ€ç»ˆæ•ˆæœï¼š</p>
<p><span href="https://code.juejin.cn/pen/7588133688486232127" class="code-editor-container"><iframe class="code-editor-frame" data-code="code-editor-element" data-code-id="7588133688486232127" data-src="https://code.juejin.cn/pen/7588133688486232127" style="display:none;" loading="lazy"/><span class="loading-placeholder" style="display:none"><img class="placeholder-image" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAAJElEQVRoge3BMQEAAADCoPVP7WkJoAAAAAAAAAAAAAAAAAAAbjh8AAFte11jAAAAAElFTkSuQmCC" loading="lazy"/><span class="loading-logo"/></span></span></p>
<h3 data-id="heading-7">å¯è§†åŒ–è°ƒè¯•ä½“éªŒ</h3>
<p>åœ¨ Visual Editor ä¸­æ‰“å¼€è¿™ä¸ªé¡µé¢åï¼Œç‚¹å‡»æ–‡å­—å…ƒç´ å³å¯é€‰ä¸­å®ƒï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/764c21244f964632ab6c16263165f8bb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgYnl0ZW1hbng=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767380736&amp;x-signature=ifpwCZInj8bCEFE%2B9gFvReR307c%3D" alt="image.png" loading="lazy"/></p>
<p>é€‰ä¸­åï¼Œä¾§è¾¹æ ä¼šæ˜¾ç¤ºè¯¥å…ƒç´ çš„æ‰€æœ‰å¯è°ƒæ•´å±æ€§ã€‚æ¯”å¦‚æˆ‘ä»¬æƒ³è°ƒæ•´æ¸å˜çš„è§’åº¦ï¼Œåªéœ€è¦æ‹–åŠ¨æ»‘å—å³å¯å®æ—¶é¢„è§ˆæ•ˆæœï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/40049c2c425c4c81bef5e64823cff4fe~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgYnl0ZW1hbng=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767380736&amp;x-signature=w2evS5dDaJOhHlwNXXonVGHkOfU%3D" alt="20251226200440_rec_.gif" loading="lazy"/></p>
<p>æƒ³è±¡ä¸€ä¸‹ï¼Œå¦‚æœç”¨ä¼ ç»Ÿæ–¹å¼è°ƒè¯•è¿™ä¸ªè§’åº¦å‚æ•°ï¼šä¿®æ”¹ä»£ç  â†’ ä¿å­˜ â†’ ç­‰å¾…çƒ­æ›´æ–° â†’ æŸ¥çœ‹æ•ˆæœ â†’ ä¸æ»¡æ„å†æ”¹â€¦â€¦è€Œç°åœ¨åªéœ€è¦æ‹–åŠ¨æ»‘å—ï¼Œæ‰€è§å³æ‰€å¾—ï¼</p>
<h3 data-id="heading-8">æ ¸å¿ƒåŸç†</h3>
<p>è¿™ä¸ªæ¸å˜æµåŠ¨æ•ˆæœçš„å®ç°åŸç†å…¶å®å¾ˆç®€å•ï¼Œæ ¸å¿ƒä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.text</span> {
    <span class="hljs-comment">/* å¤šè‰²çº¿æ€§æ¸å˜ */</span>
    <span class="hljs-attribute">background</span>: <span class="hljs-built_in">linear-gradient</span>(
        <span class="hljs-number">90deg</span>,
        <span class="hljs-built_in">rgba</span>(<span class="hljs-number">48</span>, <span class="hljs-number">207</span>, <span class="hljs-number">208</span>, <span class="hljs-number">1</span>) <span class="hljs-number">0%</span>,
        <span class="hljs-built_in">rgba</span>(<span class="hljs-number">102</span>, <span class="hljs-number">166</span>, <span class="hljs-number">255</span>, <span class="hljs-number">1</span>) <span class="hljs-number">22%</span>,
        <span class="hljs-built_in">rgba</span>(<span class="hljs-number">136</span>, <span class="hljs-number">136</span>, <span class="hljs-number">136</span>, <span class="hljs-number">1</span>) <span class="hljs-number">40%</span>,
        <span class="hljs-built_in">rgba</span>(<span class="hljs-number">255</span>, <span class="hljs-number">154</span>, <span class="hljs-number">139</span>, <span class="hljs-number">1</span>) <span class="hljs-number">60%</span>,
        <span class="hljs-built_in">rgba</span>(<span class="hljs-number">51</span>, <span class="hljs-number">8</span>, <span class="hljs-number">103</span>, <span class="hljs-number">1</span>) <span class="hljs-number">81%</span>,
        <span class="hljs-built_in">rgba</span>(<span class="hljs-number">48</span>, <span class="hljs-number">207</span>, <span class="hljs-number">208</span>, <span class="hljs-number">1</span>) <span class="hljs-number">100%</span>
    );
    <span class="hljs-comment">/* èƒŒæ™¯å®½åº¦è®¾ä¸ºå…ƒç´ çš„ 2 å€ */</span>
    <span class="hljs-attribute">background-size</span>: <span class="hljs-number">200%</span> auto;
    <span class="hljs-comment">/* å°†èƒŒæ™¯è£å‰ªåˆ°æ–‡å­—å½¢çŠ¶ */</span>
    -webkit-<span class="hljs-attribute">background-clip</span>: text;
    <span class="hljs-attribute">background-clip</span>: text;
    <span class="hljs-comment">/* æ–‡å­—é¢œè‰²é€æ˜ï¼Œéœ²å‡ºèƒŒæ™¯ */</span>
    <span class="hljs-attribute">color</span>: transparent;
    <span class="hljs-comment">/* åº”ç”¨æµåŠ¨åŠ¨ç”» */</span>
    <span class="hljs-attribute">animation</span>: gradient-flow <span class="hljs-number">3s</span> linear infinite;
}

<span class="hljs-keyword">@keyframes</span> gradient-flow {
    <span class="hljs-number">0%</span> {
        <span class="hljs-attribute">background-position</span>: <span class="hljs-number">0%</span> center;
    }
    <span class="hljs-number">100%</span> {
        <span class="hljs-attribute">background-position</span>: <span class="hljs-number">200%</span> center;
    }
}
</code></pre>
<p>åŸç†è§£æï¼š</p>
<ol>
<li><strong><code>linear-gradient</code></strong>ï¼šåˆ›å»ºä¸€ä¸ªå¤šè‰²æ¸å˜èƒŒæ™¯ï¼Œé¦–å°¾é¢œè‰²ç›¸åŒä»¥å®ç°æ— ç¼å¾ªç¯</li>
<li><strong><code>background-size: 200%</code></strong>ï¼šè®©èƒŒæ™¯å®½åº¦æ˜¯å…ƒç´ çš„ä¸¤å€ï¼Œä¸ºåŠ¨ç”»æä¾›ç§»åŠ¨ç©ºé—´</li>
<li><strong><code>background-clip: text</code></strong>ï¼šå°†èƒŒæ™¯è£å‰ªåˆ°æ–‡å­—è½®å»“å†…</li>
<li><strong><code>animation</code></strong>ï¼šé€šè¿‡æ”¹å˜ <code>background-position</code> ä» 0% åˆ° 200%ï¼Œè®©æ¸å˜"æµåŠ¨"èµ·æ¥</li>
</ol>
<h2 data-id="heading-9">å®æˆ˜æ¡ˆä¾‹äºŒï¼šç«‹ä½“é€è§†æ–‡å­—</h2>
<p>æ¥ä¸‹æ¥çœ‹ä¸€ä¸ªæ›´æœ‰æ„æ€çš„æ•ˆæœâ€”â€”ç«‹ä½“é€è§†æ–‡å­—ã€‚</p>
<h3 data-id="heading-10">æ•ˆæœå±•ç¤º</h3>
<p><span href="https://code.juejin.cn/pen/7588238924326109184" class="code-editor-container"><iframe class="code-editor-frame" data-code="code-editor-element" data-code-id="7588238924326109184" data-src="https://code.juejin.cn/pen/7588238924326109184" style="display:none;" loading="lazy"/><span class="loading-placeholder" style="display:none"><img class="placeholder-image" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAAJElEQVRoge3BMQEAAADCoPVP7WkJoAAAAAAAAAAAAAAAAAAAbjh8AAFte11jAAAAAElFTkSuQmCC" loading="lazy"/><span class="loading-logo"/></span></span></p>
<h3 data-id="heading-11">å¯è§†åŒ–è°ƒè¯•ä½“éªŒ</h3>
<p>è¿™ä¸ªæ•ˆæœçš„è§†è§‰å‘ˆç°é«˜åº¦ä¾èµ–äº <code>line-height</code> å’Œ <code>clip-height</code> ç­‰å‚æ•°çš„ç²¾ç¡®é…åˆã€‚ä½¿ç”¨ Visual Editorï¼Œæˆ‘ä»¬å¯ä»¥ç›´è§‚åœ°è°ƒæ•´è¿™äº›æ•°å€¼ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/52df46b595cf435db7805eb03081a854~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgYnl0ZW1hbng=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767380736&amp;x-signature=zn7%2FWPk7LdDgZ%2F4SrAJsuigbrOo%3D" alt="20251227021832_rec_-convert.gif" loading="lazy"/></p>
<p>é€šè¿‡å¯è§†åŒ–è°ƒæ•´ï¼Œä½ å¯ä»¥ç›´è§‚åœ°çœ‹åˆ°å‚æ•°å˜åŒ–å¯¹ç«‹ä½“æ•ˆæœçš„å½±å“ï¼Œå¿«é€Ÿæ‰¾åˆ°æœ€ä½³çš„è§†è§‰å¹³è¡¡ç‚¹ã€‚</p>
<h3 data-id="heading-12">æ ¸å¿ƒåŸç†</h3>
<p>è¿™ä¸ªç«‹ä½“é€è§†æ•ˆæœçš„æ ¸å¿ƒåœ¨äº CSS å˜æ¢çš„å·§å¦™ç»„åˆï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-pseudo">:root</span> {
    <span class="hljs-attr">--clip-height</span>: <span class="hljs-number">90px</span>;
    <span class="hljs-attr">--line-height</span>: <span class="hljs-number">85px</span>;
    <span class="hljs-attr">--left-offset</span>: <span class="hljs-number">50px</span>;
}

<span class="hljs-selector-class">.Words-line</span> {
    <span class="hljs-attribute">height</span>: <span class="hljs-built_in">var</span>(--clip-height);
    <span class="hljs-attribute">overflow</span>: hidden;
    <span class="hljs-attribute">position</span>: relative;
}

<span class="hljs-comment">/* å¥‡æ•°è¡Œï¼šå€¾æ–œ + å‹ç¼© */</span>
<span class="hljs-selector-class">.Words-line</span><span class="hljs-selector-pseudo">:nth-child</span>(odd) {
    <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">skew</span>(<span class="hljs-number">60deg</span>, -<span class="hljs-number">30deg</span>) <span class="hljs-built_in">scaleY</span>(<span class="hljs-number">0.66667</span>);
}

<span class="hljs-comment">/* å¶æ•°è¡Œï¼šå€¾æ–œ + æ‹‰ä¼¸ */</span>
<span class="hljs-selector-class">.Words-line</span><span class="hljs-selector-pseudo">:nth-child</span>(even) {
    <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">skew</span>(<span class="hljs-number">0deg</span>, -<span class="hljs-number">30deg</span>) <span class="hljs-built_in">scaleY</span>(<span class="hljs-number">1.33333</span>);
}

<span class="hljs-comment">/* æ¯è¡Œé€’å¢çš„å·¦åç§»ï¼Œå½¢æˆé˜¶æ¢¯æ•ˆæœ */</span>
<span class="hljs-selector-class">.Words-line</span><span class="hljs-selector-pseudo">:nth-child</span>(<span class="hljs-number">1</span>) { <span class="hljs-attribute">left</span>: <span class="hljs-built_in">calc</span>(<span class="hljs-built_in">var</span>(--left-offset) * <span class="hljs-number">1</span>); }
<span class="hljs-selector-class">.Words-line</span><span class="hljs-selector-pseudo">:nth-child</span>(<span class="hljs-number">2</span>) { <span class="hljs-attribute">left</span>: <span class="hljs-built_in">calc</span>(<span class="hljs-built_in">var</span>(--left-offset) * <span class="hljs-number">2</span>); }
<span class="hljs-selector-class">.Words-line</span><span class="hljs-selector-pseudo">:nth-child</span>(<span class="hljs-number">3</span>) { <span class="hljs-attribute">left</span>: <span class="hljs-built_in">calc</span>(<span class="hljs-built_in">var</span>(--left-offset) * <span class="hljs-number">3</span>); }
<span class="hljs-comment">/* ... */</span>
</code></pre>
<p>åŸç†è§£æï¼š</p>
<ol>
<li><strong><code>skew()</code> å€¾æ–œå˜æ¢</strong>ï¼šé€šè¿‡ä¸åŒçš„å€¾æ–œè§’åº¦ï¼Œè®©å¥‡å¶è¡Œå½¢æˆè§†è§‰ä¸Šçš„"æŠ˜å "æ•ˆæœ</li>
<li><strong><code>scaleY()</code> å‚ç›´ç¼©æ”¾</strong>ï¼šå¥‡æ•°è¡Œå‹ç¼©ï¼ˆ0.66667ï¼‰ï¼Œå¶æ•°è¡Œæ‹‰ä¼¸ï¼ˆ1.33333ï¼‰ï¼Œé…åˆå€¾æ–œåˆ›é€  3D é€è§†é”™è§‰</li>
<li><strong>é€’å¢çš„ <code>left</code> åç§»</strong>ï¼šæ¯è¡Œå‘å³åç§»ï¼Œå½¢æˆé˜¶æ¢¯çŠ¶çš„ç«‹ä½“å±‚æ¬¡</li>
<li><strong><code>overflow: hidden</code></strong>ï¼šè£å‰ªè¶…å‡ºçš„å†…å®¹ï¼Œç¡®ä¿æ¯è¡Œåªæ˜¾ç¤ºå›ºå®šé«˜åº¦</li>
</ol>
<p>hover æ—¶çš„æ–‡å­—åˆ‡æ¢åŠ¨ç”»åˆ™é€šè¿‡ <code>translate3d</code> å®ç°ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-tag">p</span> {
    <span class="hljs-attribute">transition</span>: all <span class="hljs-number">0.4s</span> ease-in-out;
}

<span class="hljs-selector-class">.Words</span><span class="hljs-selector-pseudo">:hover</span> <span class="hljs-selector-tag">p</span> {
    <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translate3d</span>(<span class="hljs-number">0</span>, <span class="hljs-built_in">calc</span>(<span class="hljs-built_in">var</span>(--clip-height) * -<span class="hljs-number">1</span>), <span class="hljs-number">0</span>);
}
</code></pre>
<h2 data-id="heading-13">æ€»ç»“</h2>
<p>Cursor Visual Editor çš„å‡ºç°ï¼ŒçœŸæ­£å®ç°äº†"è®¾è®¡å³ä»£ç "çš„ç†å¿µï¼š</p>
<ul>
<li><strong>æ‰€è§å³æ‰€å¾—</strong>ï¼šå‘Šåˆ«åå¤ä¿å­˜åˆ·æ–°çš„ä½æ•ˆå¾ªç¯ï¼Œæ ·å¼è°ƒæ•´å³æ—¶ç”Ÿæ•ˆ</li>
<li><strong>é™ä½å¿ƒæ™ºè´Ÿæ‹…</strong>ï¼šä¸å†éœ€è¦è„‘è¡¥å‚æ•°å˜åŒ–çš„æ•ˆæœï¼Œå¯è§†åŒ–æ§ä»¶è®©è°ƒè¯•æ›´ç›´è§‚</li>
<li><strong>è®¾è®¡ä¸ä»£ç ç»Ÿä¸€</strong>ï¼šåœ¨åŒä¸€çª—å£å®Œæˆè§†è§‰è°ƒæ•´å’Œä»£ç ä¿®æ”¹ï¼Œæ— ç¼è¡”æ¥</li>
</ul>
<p>è¿™ä¸ªåŠŸèƒ½ç‰¹åˆ«é€‚åˆä»¥ä¸‹åœºæ™¯ï¼š</p>
<ol>
<li><strong>æ ·å¼å¾®è°ƒ</strong>ï¼šé¢œè‰²ã€é—´è·ã€å­—ä½“å¤§å°ç­‰å‚æ•°çš„ç²¾ç»†è°ƒæ•´</li>
<li><strong>å¸ƒå±€å®éªŒ</strong>ï¼šå¿«é€Ÿæµ‹è¯•ä¸åŒçš„å¸ƒå±€æ–¹æ¡ˆ</li>
<li><strong>åŠ¨ç”»è°ƒè¯•</strong>ï¼šå®æ—¶é¢„è§ˆåŠ¨ç”»å‚æ•°çš„å˜åŒ–æ•ˆæœ</li>
</ol>
<p>æ­£å¦‚ Cursor å®˜æ–¹æ‰€è¯´ï¼Œä»–ä»¬çœ‹åˆ°äº†ä¸€ä¸ªæœªæ¥ï¼šAgent ä¸ Web åº”ç”¨å¼€å‘æ·±åº¦èåˆï¼Œäººä»¬é€šè¿‡æ›´ç›´è§‚çš„ç•Œé¢å°†æƒ³æ³•è½¬åŒ–ä¸ºä»£ç ã€‚Visual Editor æ­£æ˜¯æœç€è¿™ä¸ªæ–¹å‘è¿ˆå‡ºçš„é‡è¦ä¸€æ­¥ã€‚</p>
<p>å¦‚æœä½ è¿˜æ²¡æœ‰å°è¯•è¿‡è¿™ä¸ªåŠŸèƒ½ï¼Œå¼ºçƒˆå»ºè®®æ‰“å¼€ Cursorï¼Œç”¨ä½ è‡ªå·±çš„é¡¹ç›®ä½“éªŒä¸€ä¸‹â€”â€”ç›¸ä¿¡ä½ ä¼šçˆ±ä¸Šè¿™ç§"æ‰€è§å³æ‰€å¾—"çš„å¼€å‘æ–¹å¼ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[JavaScript æœ‰å“ªäº›æ•°æ®ç±»å‹ï¼Ÿå®ƒä»¬åœ¨å†…å­˜é‡Œæ˜¯æ€ä¹ˆå­˜çš„ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7588007285547073542</link>    <guid>https://juejin.cn/post/7588007285547073542</guid>    <pubDate>2025-12-27T01:45:29.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588007285547073542" data-draft-id="7579127397498060851" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="JavaScript æœ‰å“ªäº›æ•°æ®ç±»å‹ï¼Ÿå®ƒä»¬åœ¨å†…å­˜é‡Œæ˜¯æ€ä¹ˆå­˜çš„ï¼Ÿ"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript"/> <meta itemprop="datePublished" content="2025-12-27T01:45:29.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="åˆ˜å¤§å"/> <meta itemprop="url" content="https://juejin.cn/user/3507878440995946"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            JavaScript æœ‰å“ªäº›æ•°æ®ç±»å‹ï¼Ÿå®ƒä»¬åœ¨å†…å­˜é‡Œæ˜¯æ€ä¹ˆå­˜çš„ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3507878440995946/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    åˆ˜å¤§å
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-27T01:45:29.000Z" title="Sat Dec 27 2025 01:45:29 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æœ‰æ—¶å€™å¯¹ <code>JavaScript</code> çš„ä»£ç å¾ˆæ˜¯ç–‘æƒ‘ï¼Œæˆ‘å†™è¿‡è¿™æ ·ä¸€æ®µä»£ç ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">let</span> user1 = { <span class="hljs-attr">name</span>: <span class="hljs-string">'å°æ˜'</span> };
<span class="hljs-keyword">let</span> user2 = user1;
user2.<span class="hljs-property">name</span> = <span class="hljs-string">'å°çº¢'</span>;
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(user1.<span class="hljs-property">name</span>); <span class="hljs-comment">// ç»“æœå±…ç„¶æ˜¯ â€œå°çº¢â€ï¼Ÿ</span>
</code></pre>
<p>æˆ‘å½“æ—¶æ„£ä½äº†ï¼šæˆ‘åªæ˜¯æ”¹äº† <code>user2</code>ï¼Œä¸ºä»€ä¹ˆ <code>user1</code> ä¹Ÿè·Ÿç€å˜äº†ï¼Ÿ<br/>
è€Œæ¢æˆæ•°å­—æ—¶ï¼Œå´å®Œå…¨ä¸æ˜¯è¿™æ ·ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">let</span> a = <span class="hljs-number">10</span>;
<span class="hljs-keyword">let</span> b = a;
b = <span class="hljs-number">20</span>;
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(a); <span class="hljs-comment">// è¿˜æ˜¯ 10ï¼Œæ²¡å˜</span>
</code></pre>
<p>æ˜æ˜éƒ½æ˜¯èµ‹å€¼ï¼Œè¡Œä¸ºæ€ä¹ˆå·®è¿™ä¹ˆå¤šï¼Ÿ</p>
<p>åæ¥æˆ‘æ‰æ˜ç™½ï¼Œé—®é¢˜çš„å…³é”®å¹¶ä¸æ˜¯ä»£ç çš„å†™æ³•é—®é¢˜ï¼Œè€Œæ˜¯åœ¨ <strong>JavaScript çš„æ•°æ®ç±»å‹å’Œå®ƒä»¬åœ¨å†…å­˜ä¸­çš„å­˜å‚¨æ–¹å¼</strong>ã€‚</p>
<p>ææ‡‚è¿™ä¸€ç‚¹ï¼Œå¾ˆå¤šçœ‹ä¼¼å¥‡æ€ªçš„è¡Œä¸ºå°±éƒ½é¡ºç†æˆç« äº†ã€‚</p>
<hr/>
<h2 data-id="heading-0">ä¸€ã€JavaScript æœ‰å‡ ç§æ•°æ®ç±»å‹ï¼Ÿ</h2>
<p>æ ¹æ® ECMAScript æ ‡å‡†ï¼ŒJavaScript çš„æ•°æ®ç±»å‹åˆ†ä¸ºä¸¤å¤§ç±»ï¼š</p>
<h3 data-id="heading-1">1. åŸå§‹ç±»å‹â€”â€”å…± 7 ç§</h3>
<p>è¿™äº›ç±»å‹çš„ç‰¹ç‚¹æ˜¯ï¼š<strong>å€¼ä¸å¯å˜ã€ç›´æ¥è¡¨ç¤ºæ•°æ®æœ¬èº«</strong>ã€‚</p>













































<table><thead><tr><th>ç±»å‹</th><th>ç¤ºä¾‹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>number</code></td><td><code>42</code>, <code>3.14</code>, <code>NaN</code></td><td>æ‰€æœ‰æ•°å­—ï¼ŒåŒ…æ‹¬æ•´æ•°ã€æµ®ç‚¹æ•°ã€ç‰¹æ®Šå€¼</td></tr><tr><td><code>string</code></td><td><code>'hello'</code>, <code>"JS"</code></td><td>å­—ç¬¦ä¸²ï¼Œä¸å¯å˜</td></tr><tr><td><code>boolean</code></td><td><code>true</code>, <code>false</code></td><td>å¸ƒå°”å€¼</td></tr><tr><td><code>undefined</code></td><td><code>let a; console.log(a);</code></td><td>å˜é‡å·²å£°æ˜ä½†æœªèµ‹å€¼</td></tr><tr><td><code>null</code></td><td><code>let b = null;</code></td><td>è¡¨ç¤ºç©ºæˆ–æ— å€¼ï¼ˆæ³¨æ„ï¼šå®ƒæ˜¯åŸå§‹ç±»å‹ï¼ï¼‰</td></tr><tr><td><code>symbol</code></td><td><code>Symbol('id')</code></td><td>ES6 å¼•å…¥ï¼Œå”¯ä¸€ä¸”ä¸å¯å˜çš„æ ‡è¯†ç¬¦</td></tr><tr><td><code>bigint</code></td><td><code>123n</code>, <code>9007199254740991n</code></td><td>ES2020 å¼•å…¥ï¼Œç”¨äºè¡¨ç¤ºä»»æ„å¤§çš„æ•´æ•°</td></tr></tbody></table>
<p><code>typeof null</code> è¿”å› <code>"object"</code> æ˜¯ JavaScript çš„ä¸€ä¸ªå†å²æ€§ bugï¼Œè‡³ä»Šæœªä¿®å¤ã€‚ä½†ä»è¯­è¨€è®¾è®¡ä¸Šï¼Œ<code>null</code> å±äºåŸå§‹ç±»å‹ã€‚</p>
<hr/>
<h3 data-id="heading-2">2. å¼•ç”¨ç±»å‹â€”â€”ç»Ÿç§°å¯¹è±¡</h3>
<p>é™¤äº†ä¸Šè¿° 7 ç§ï¼Œ<strong>å…¶ä»–æ‰€æœ‰å€¼éƒ½æ˜¯å¯¹è±¡</strong>ï¼Œå±äºå¼•ç”¨ç±»å‹ï¼ŒåŒ…æ‹¬ï¼š</p>
<ul>
<li>æ™®é€šå¯¹è±¡ï¼š<code>{ name: 'Tom' }</code></li>
<li>æ•°ç»„ï¼š<code>[1, 2, 3]</code></li>
<li>å‡½æ•°ï¼š<code>function() {}</code></li>
<li>æ—¥æœŸï¼š<code>new Date()</code></li>
<li>æ­£åˆ™ï¼š<code>/abc/</code></li>
<li>ç”šè‡³ <code>Map</code>ã€<code>Set</code>ã€<code>Promise</code> ç­‰</li>
</ul>
<p>å¼•ç”¨ç±»å‹çš„æ ¸å¿ƒç‰¹ç‚¹æ˜¯ï¼š<strong>å¯å˜ã€é€šè¿‡å¼•ç”¨æ¥è®¿é—®å®é™…æ•°æ®</strong>ã€‚</p>
<hr/>
<h2 data-id="heading-3">äºŒã€å®ƒä»¬åœ¨å†…å­˜ä¸­æ€ä¹ˆå­˜å‚¨ï¼Ÿ</h2>
<p>è¿™æ˜¯ç†è§£ä¸€åˆ‡è¡Œä¸ºå·®å¼‚çš„æ ¹æºï¼</p>
<p>è®¡ç®—æœºå†…å­˜å¤§è‡´åˆ†ä¸ºä¸¤ä¸ªåŒºåŸŸï¼š</p>
<ul>
<li><strong>æ ˆï¼ˆStackï¼‰</strong>ï¼šé€Ÿåº¦å¿«ï¼Œç©ºé—´å°ï¼Œç”¨äºå­˜å‚¨ç®€å•ã€å›ºå®šå¤§å°çš„æ•°æ®ã€‚</li>
<li><strong>å †ï¼ˆHeapï¼‰</strong>ï¼šç©ºé—´å¤§ï¼Œé€Ÿåº¦ç¨æ…¢ï¼Œç”¨äºå­˜å‚¨å¤æ‚ã€åŠ¨æ€å¤§å°çš„æ•°æ®ã€‚</li>
</ul>
<h3 data-id="heading-4">åŸå§‹ç±»å‹ï¼šç›´æ¥å­˜åœ¨æ ˆé‡Œ</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">let</span> age = <span class="hljs-number">25</span>;
<span class="hljs-keyword">let</span> isStudent = <span class="hljs-literal">true</span>;
</code></pre>
<p>è¿™ä¸¤ä¸ªå˜é‡å°±åƒä¸¤ä¸ªå°æŠ½å±‰ï¼Œ<strong>å€¼æœ¬èº«ç›´æ¥æ”¾åœ¨æ ˆä¸­</strong>ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-string">æ ˆï¼ˆStackï¼‰</span>
<span class="hljs-string">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="hljs-string">â”‚</span> <span class="hljs-attr">age:</span> <span class="hljs-number">25</span>         <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span> <span class="hljs-attr">isStudent:</span> <span class="hljs-literal">true</span> <span class="hljs-string">â”‚</span>
<span class="hljs-string">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
</code></pre>
<p>å½“ä½ å¤åˆ¶ä¸€ä¸ªåŸå§‹å€¼ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">let</span> myAge = age; <span class="hljs-comment">// æŠŠ 25 å¤åˆ¶ä¸€ä»½</span>
myAge = <span class="hljs-number">30</span>;
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(age); <span class="hljs-comment">// ä»ç„¶æ˜¯ 25</span>
</code></pre>
<p>å› ä¸º <code>myAge</code> æ‹¿åˆ°çš„æ˜¯ <strong>å…¨æ–°çš„å‰¯æœ¬</strong>ï¼Œå’Œ <code>age</code> å®Œå…¨æ— å…³ã€‚</p>
<p>æ‰€ä»¥åŸå§‹ç±»å‹æ˜¯æŒ‰å€¼è¿›è¡Œä¼ é€’ï¼ˆPass by Valueï¼‰ã€‚</p>
<hr/>
<h3 data-id="heading-5">å¼•ç”¨ç±»å‹ï¼šæ ˆå­˜åœ°å€ï¼Œå †å­˜çœŸå®å¯¹è±¡</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">let</span> user = { <span class="hljs-attr">name</span>: <span class="hljs-string">'Alice'</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">25</span> };
</code></pre>
<p>è¿™æ—¶å‘ç”Ÿäº†ä¸¤ä»¶äº‹ï¼š</p>
<ol>
<li>å¯¹è±¡ <code>{ name: 'Alice', age: 25 }</code> è¢«åˆ›å»ºï¼Œå­˜æ”¾åœ¨å †ä¸­ã€‚</li>
<li>å˜é‡ <code>user</code> å¹¶ä¸ç›´æ¥åŒ…å«è¿™ä¸ªå¯¹è±¡ï¼Œè€Œæ˜¯ä¿å­˜ä¸€ä¸ªæŒ‡å‘å †ä¸­å¯¹è±¡çš„å¼•ç”¨åœ°å€ï¼Œè¿™ä¸ªåœ°å€æ”¾åœ¨æ ˆé‡Œã€‚</li>
</ol>
<p>å›¾ç¤ºå¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-css" lang="css">æ ˆï¼ˆStackï¼‰              å †ï¼ˆHeapï¼‰
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ user: [åœ°å€A] â”œâ”€â”€â”€â”€â”€â†’â”‚ { name: <span class="hljs-string">'Alice'</span>, age: <span class="hljs-number">25</span> } â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<p>å½“ä½ èµ‹å€¼ç»™å¦ä¸€ä¸ªå˜é‡ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">let</span> admin = user; <span class="hljs-comment">// å¤åˆ¶çš„æ˜¯åœ°å€ï¼Œä¸æ˜¯å¯¹è±¡ï¼</span>
admin.<span class="hljs-property">name</span> = <span class="hljs-string">'Bob'</span>;
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(user.<span class="hljs-property">name</span>); <span class="hljs-comment">// è¾“å‡º "Bob"ï¼</span>
</code></pre>
<p>å› ä¸º <code>admin</code> å’Œ <code>user</code> <strong>æŒ‡å‘åŒä¸€ä¸ªå †ä¸­çš„å¯¹è±¡</strong>ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-string">æ ˆï¼ˆStackï¼‰</span>              <span class="hljs-string">å †ï¼ˆHeapï¼‰</span>
<span class="hljs-string">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>      
<span class="hljs-string">â”‚</span> <span class="hljs-attr">user:</span> [<span class="hljs-string">åœ°å€A</span>] <span class="hljs-string">â”œâ”€â”€â”</span>   
<span class="hljs-string">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span>  <span class="hljs-string">â”‚</span>   <span class="hljs-string">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="hljs-string">â”‚</span> <span class="hljs-attr">admin:</span> [<span class="hljs-string">åœ°å€A</span>] <span class="hljs-string">â”œâ”€â”€â”¼â”€â”€â†’â”‚</span> { <span class="hljs-attr">name:</span> <span class="hljs-string">'Bob'</span>, <span class="hljs-attr">age:</span> <span class="hljs-number">25</span> }  <span class="hljs-string">â”‚</span>
<span class="hljs-string">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>  <span class="hljs-string">â”‚</span>   <span class="hljs-string">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
                  <span class="hljs-string">â”‚</span>
                  <span class="hljs-string">â””â”€â”€â”€â”˜</span>
</code></pre>
<p>æ‰€ä»¥å¼•ç”¨ç±»å‹æ˜¯æŒ‰å…±äº«çš„æ–¹å¼è¿›è¡Œä¼ é€’ï¼ˆPass by Sharingï¼‰</p>
<p>æ³¨æ„ï¼šä¸æ˜¯æŒ‰å¼•ç”¨ä¼ é€’ï¼ŒJS ä¸­æ²¡æœ‰çœŸæ­£çš„æŒ‰å¼•ç”¨ä¼ é€’</p>
<hr/>
<h2 data-id="heading-6">ä¸‰ã€æ·±å…¥å¯¹æ¯”</h2>








































<table><thead><tr><th>ç‰¹æ€§</th><th>åŸå§‹ç±»å‹</th><th>å¼•ç”¨ç±»å‹ï¼ˆå¯¹è±¡ï¼‰</th></tr></thead><tbody><tr><td>å­˜å‚¨ä½ç½®</td><td>æ ˆï¼ˆStackï¼‰</td><td>æ ˆï¼ˆå­˜å¼•ç”¨åœ°å€ï¼‰ + å †ï¼ˆå­˜å®é™…å¯¹è±¡ï¼‰</td></tr><tr><td>èµ‹å€¼è¡Œä¸º</td><td>å¤åˆ¶å€¼æœ¬èº«</td><td>å¤åˆ¶å¼•ç”¨åœ°å€ï¼ˆå¤šä¸ªå˜é‡å…±äº«åŒä¸€å¯¹è±¡ï¼‰</td></tr><tr><td>æ˜¯å¦å¯å˜</td><td>ä¸å¯å˜ï¼ˆæ“ä½œç”Ÿæˆæ–°å€¼ï¼‰</td><td>å¯å˜ï¼ˆå¯ç›´æ¥ä¿®æ”¹å±æ€§ï¼‰</td></tr><tr><td>æ¯”è¾ƒæ–¹å¼</td><td>æ¯”è¾ƒå€¼æ˜¯å¦ç›¸ç­‰</td><td>æ¯”è¾ƒå¼•ç”¨åœ°å€æ˜¯å¦ç›¸åŒ</td></tr><tr><td>å†…å­˜å ç”¨</td><td>å›ºå®šã€è¾ƒå°</td><td>åŠ¨æ€ã€å¯èƒ½å¾ˆå¤§</td></tr><tr><td>å…¸å‹åœºæ™¯</td><td>æ•°å­—ã€å­—ç¬¦ä¸²ã€å¸ƒå°”å€¼</td><td>å¯¹è±¡ã€æ•°ç»„ã€å‡½æ•°</td></tr></tbody></table>
<h3 data-id="heading-7">ä¸¾ä¸ªæ¯”è¾ƒçš„ä¾‹å­ï¼š</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åŸå§‹ç±»å‹æ¯”è¾ƒ</span>
<span class="hljs-number">5</span> === <span class="hljs-number">5</span>; <span class="hljs-comment">// true</span>
<span class="hljs-string">'hi'</span> === <span class="hljs-string">'hi'</span>; <span class="hljs-comment">// true</span>

<span class="hljs-comment">// å¼•ç”¨ç±»å‹æ¯”è¾ƒ</span>
{} === {}; <span class="hljs-comment">// falseï¼ä¸¤ä¸ªä¸åŒå¯¹è±¡</span>
<span class="hljs-keyword">let</span> a = {}; <span class="hljs-keyword">let</span> b = a;
a === b; <span class="hljs-comment">// trueï¼åŒä¸€ä¸ªå¯¹è±¡</span>
</code></pre>
<hr/>
<h2 data-id="heading-8">å››ã€å¸¸è§é—®é¢˜</h2>
<h3 data-id="heading-9">ä¸ºä»€ä¹ˆå­—ç¬¦ä¸²å¾ˆé•¿ï¼Œä¹Ÿç®—åŸå§‹ç±»å‹ï¼Ÿ</h3>
<p>è™½ç„¶å­—ç¬¦ä¸²å¯èƒ½å¾ˆé•¿ï¼Œä½† JS å¼•æ“ä¼šåšå†…éƒ¨ä¼˜åŒ–ï¼ˆæ¯”å¦‚ä½¿ç”¨æŒ‡é’ˆï¼‰ï¼Œä½†ä»<strong>è¯­è¨€è¯­ä¹‰</strong>ä¸Šï¼Œå­—ç¬¦ä¸²æ˜¯<strong>ä¸å¯å˜çš„åŸå§‹å€¼</strong>ã€‚ä»»ä½•â€œä¿®æ”¹â€éƒ½ä¼šç”Ÿæˆæ–°å­—ç¬¦ä¸²ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">let</span> s = <span class="hljs-string">'hello'</span>;
s = s + <span class="hljs-string">' world'</span>; <span class="hljs-comment">// åˆ›å»ºäº†æ–°å­—ç¬¦ä¸²ï¼ŒåŸ 'hello' æœªè¢«ä¿®æ”¹</span>
</code></pre>
<h3 data-id="heading-10">å¦‚ä½•çœŸæ­£å¤åˆ¶ä¸€ä¸ªå¯¹è±¡ï¼Œè€Œä¸æ˜¯å…±äº«ï¼Ÿ</h3>
<p><strong>æµ…æ‹·è´</strong>ï¼šåªå¤åˆ¶ç¬¬ä¸€å±‚å±æ€§</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">let</span> newObj = { ...oldObj };
<span class="hljs-comment">// æˆ–</span>
<span class="hljs-keyword">let</span> newObj = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>({}, oldObj);
</code></pre>
<p><strong>æ·±æ‹·è´</strong>ï¼šé€’å½’å¤åˆ¶æ‰€æœ‰å±‚çº§ï¼ˆéœ€æ³¨æ„å¾ªç¯å¼•ç”¨ç­‰é—®é¢˜ï¼‰</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">let</span> deepCopy = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(obj)); <span class="hljs-comment">// æœ‰å±€é™ï¼ˆä¸èƒ½æ‹·è´å‡½æ•°ã€undefined ç­‰ï¼‰</span>
<span class="hljs-comment">// æ¨èä½¿ç”¨ Lodash çš„ _.cloneDeep()</span>
</code></pre>
<hr/>
<h2 data-id="heading-11">äº”ã€æ€»ç»“</h2>
<ol>
<li><strong>åŸå§‹ç±»å‹</strong>ï¼šå€¼ç›´æ¥å­˜åœ¨æ ˆé‡Œï¼Œèµ‹å€¼æ˜¯å¤åˆ¶å€¼ï¼Œäº’ä¸å½±å“ã€‚</li>
<li><strong>å¼•ç”¨ç±»å‹</strong>ï¼šæ ˆé‡Œå­˜åœ°å€ï¼Œå †é‡Œå­˜å¯¹è±¡ï¼Œèµ‹å€¼æ˜¯å¤åˆ¶åœ°å€ï¼Œå…±äº«åŒä¸€å¯¹è±¡ã€‚</li>
<li><strong>ç†è§£å­˜å‚¨æœºåˆ¶</strong>ï¼Œæ˜¯æŒæ¡ JS èµ‹å€¼ã€å‡½æ•°ä¼ å‚ã€çŠ¶æ€ç®¡ç†ã€æ€§èƒ½ä¼˜åŒ–çš„åŸºç¡€ï¼</li>
</ol>
<hr/>
<p>ä¸‹æ¬¡å½“ä½ çœ‹åˆ°ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">let</span> a = obj;
a.<span class="hljs-property">x</span> = <span class="hljs-number">10</span>;
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(obj.<span class="hljs-property">x</span>); <span class="hljs-comment">// ä¸ºä»€ä¹ˆå˜äº†ï¼Ÿ</span>
</code></pre>
<p>ä½ å°±çŸ¥é“ï¼š<strong>å› ä¸º a å’Œ obj æŒ‡å‘çš„æ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼</strong></p>
<blockquote>
<p>æœ¬æ–‡é¦–å‘äºå…¬ä¼—å·ï¼šç¨‹åºå‘˜åˆ˜å¤§åï¼Œä¸“æ³¨åˆ†äº«å‰åç«¯å¼€å‘çš„å®æˆ˜ç¬”è®°ã€‚å…³æ³¨æˆ‘ï¼Œå°‘èµ°å¼¯è·¯ï¼Œä¸€èµ·è¿›æ­¥ï¼</p>
</blockquote>
<h4 data-id="heading-12">ğŸ“Œå¾€æœŸç²¾å½©</h4>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2F184BGM_pdMFLc0ASrferwQ" target="_blank" title="https://mp.weixin.qq.com/s/184BGM_pdMFLc0ASrferwQ" ref="nofollow noopener noreferrer">ã€Šä»£ç é‡Œå…¨æ˜¯ new å¯¹è±¡ï¼ŒçœŸçš„å¾ˆ Low å—ï¼Ÿæˆ‘è®¤çœŸæƒ³äº†ä¸€æ™šã€‹</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2Fp0n2mN5RDDDaIWuHHVRUZQ" target="_blank" title="https://mp.weixin.qq.com/s/p0n2mN5RDDDaIWuHHVRUZQ" ref="nofollow noopener noreferrer">ã€ŠJava å¼€å‘å¿…çœ‹ï¼šä»€ä¹ˆæ—¶å€™ç”¨ forï¼Œä»€ä¹ˆæ—¶å€™ç”¨ Streamï¼Ÿã€‹</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FX-MSa0CHwVW_qgPezbpMUA" target="_blank" title="https://mp.weixin.qq.com/s/X-MSa0CHwVW_qgPezbpMUA" ref="nofollow noopener noreferrer">ã€Šè¿™ 5 ä¸ªå†·é—¨ HTML æ ‡ç­¾ï¼Œè®©æˆ‘ç›´æ¥åˆ äº†100 è¡Œ JS ä»£ç ã€‹</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FT3ronvigepWew6dRC4uH2g" target="_blank" title="https://mp.weixin.qq.com/s/T3ronvigepWew6dRC4uH2g" ref="nofollow noopener noreferrer">ã€ŠVue ç»„ä»¶é€šä¿¡çš„ 8 ç§æœ€ä½³å®è·µï¼Œä½ çŸ¥é“å‡ ç§ï¼Ÿã€‹</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[çŸ­æ€è€ƒç¬¬265å¤©ï¼Œå°çº¢ä¹¦èµ·å·3å‘¨æ€ä¹ˆæ ·ï¼Ÿå®æ“æ€»ç»“è¿™3ç‚¹ï¼]]></title>    <link>https://juejin.cn/post/7588007285547057158</link>    <guid>https://juejin.cn/post/7588007285547057158</guid>    <pubDate>2025-12-27T01:42:29.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588007285547057158" data-draft-id="7588007285547040774" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="çŸ­æ€è€ƒç¬¬265å¤©ï¼Œå°çº¢ä¹¦èµ·å·3å‘¨æ€ä¹ˆæ ·ï¼Ÿå®æ“æ€»ç»“è¿™3ç‚¹ï¼"/> <meta itemprop="keywords" content="Android,AIç¼–ç¨‹"/> <meta itemprop="datePublished" content="2025-12-27T01:42:29.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¨‹åºå‘˜ç æ­Œ"/> <meta itemprop="url" content="https://juejin.cn/user/764915820529831"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            çŸ­æ€è€ƒç¬¬265å¤©ï¼Œå°çº¢ä¹¦èµ·å·3å‘¨æ€ä¹ˆæ ·ï¼Ÿå®æ“æ€»ç»“è¿™3ç‚¹ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/764915820529831/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¨‹åºå‘˜ç æ­Œ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-27T01:42:29.000Z" title="Sat Dec 27 2025 01:42:29 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å°çº¢ä¹¦æ˜¯å†…å®¹ç”Ÿäº§å¹³å°ï¼Œæµé‡å·¨å¤§ï¼Œä¸»è¦ç¾¤ä½“æ˜¯ä¸€çº¿åŸå¸‚é«˜è´¨é‡ç”¨æˆ·ï¼Œæ˜¯ä¼—å¤šè‡ªåª’ä½“IPå¿…äº‰ä¹‹åœ°ï¼Œç å“¥è‡ªèµ·å·èµ·3å‘¨äº†ï¼Œç°åœ¨è¯´ä¸€ä¸‹ä¸»è¦çš„æ„Ÿå—ï¼Œæ€»ç»“ä¸€ä¸‹å®æ“ç»éªŒã€‚</p>
<p>ä¸€ã€åˆ›ä½œï¼šè¸©å‡†è§„åˆ™æ‰èƒ½æ¥ä½æµé‡</p>
<ol>
<li>å…»å·3-5å¤©å†å‘ç¬”è®°</li>
</ol>
<p>ä¸è¦æ€¥ç€å‘ç¬”è®°ï¼Œå…ˆèŠ±3-5å¤©åˆ·åŒèµ›é“å†…å®¹ã€ç‚¹èµè¯„è®ºï¼Œè®©ç³»ç»Ÿè®¤å®šä½ æ˜¯çœŸå®ç”¨æˆ·ï¼Œç²¾å‡†æ‰“ä¸Šå‚ç›´æ ‡ç­¾ã€‚</p>
<ol start="2">
<li>å‘ç¨¿å‰ç”¨AIæ‰«æ•æ„Ÿè¯</li>
</ol>
<p>é¿å…å› è¿è§„è¢«é™æµï¼Œè¿™æ˜¯åŸºç¡€æ“ä½œã€‚</p>
<ol start="3">
<li>å‘å¸ƒåä¿æŒè´¦å·æ´»è·ƒ</li>
</ol>
<p>å†åˆ·20åˆ†é’ŸåŒç±»ç¬”è®°ä¿æŒè´¦å·æ´»è·ƒï¼Œæœ‰åŠ©äºè·å¾—åˆå§‹æ›å…‰æƒé‡ã€‚</p>
<ol start="4">
<li>å°çˆ†è¶‹åŠ¿ä¸‹è¿ç»­åˆ›ä½œ</li>
</ol>
<p>å¦‚æœæŸç¯‡ç¬”è®°å‡ºç°å°çˆ†è¶‹åŠ¿ï¼Œä¸€å®šè¦è¶çƒ­æ‰“é“ï¼Œè¿ç»­æ›´3-5æ¡åŒç±»å‹å†…å®¹ï¼ŒæŠ“ä½å¹³å°çš„æµé‡æ¨é€é«˜å³°ï¼Œå¿«é€Ÿæ”¾å¤§æ›å…‰é‡ã€‚</p>
<p>äºŒã€å¤ç›˜ï¼šæ•°æ®ä¸ä¼šè¯´è°</p>
<ol>
<li>æ‹†è§£åå°æ ¸å¿ƒæ•°æ®</li>
</ol>
<p>ç¬”è®°å‘å¸ƒååˆ«åªç›¯ç€ç²‰ä¸æ•°ï¼Œè¦æ‹†è§£åå°ç‚¹å‡»ç‡ã€æ”¶è—é‡ã€æ–°å¢å…³æ³¨è¿™äº›æ ¸å¿ƒæ•°æ®ï¼Œéšæ—¶è°ƒæ•´åˆ›ä½œæ–¹å‘ã€‚</p>
<ol start="2">
<li>åŒä¸»é¢˜è‡³å°‘è¿å‘3ç¯‡</li>
</ol>
<p>åƒä¸‡ä¸è¦å‘1-2ç¯‡æ²¡èµ·è‰²å°±ç›´æ¥æ¢èµ›é“ï¼ŒåŒä¸»é¢˜è‡³å°‘è¿å‘3ç¯‡å†åšåˆ¤æ–­ã€‚</p>
<ol start="3">
<li>æ¯å‘¨ä¿æŒ3ç¯‡ç¨³å®šè¾“å‡º</li>
</ol>
<p>è®©ç³»ç»Ÿåˆ¤å®šä½ æ˜¯èƒ½æŒç»­äº§å‡ºä¼˜è´¨å†…å®¹çš„åšä¸»ï¼Œè·å¾—é•¿æœŸæ¨æµå€¾æ–œã€‚</p>
<p>ä¸‰ã€æ¸…é†’è®¤çŸ¥ï¼šæµé‡â‰ æˆåŠŸ</p>
<ol>
<li>æ‘¸é€å¹³å°è§„åˆ™å°±èƒ½è½»æ¾è·å–æµé‡</li>
</ol>
<p>åœ¨å°çº¢ä¹¦æ‹¿åˆ°99+ç‚¹èµæ”¶è—ï¼Œç”šè‡³æ¶¨ç²‰åƒç²‰éƒ½ä¸ç®—éš¾äº‹ï¼Œä½†æ‘¸é€å¹³å°è§„åˆ™å°±èƒ½è½»æ¾åšåˆ°ï¼Œä½†è¿™ç»ä¸ä»£è¡¨èƒ½åŠ›æœ‰å¤šå‡ºä¼—ã€‚</p>
<ol start="2">
<li>æ‰“é€šä»å†…å®¹æ„æ€ã€åˆ›ä½œå‘å¸ƒï¼Œåˆ°å¼•æµå˜ç°çš„å®Œæ•´é—­ç¯ï¼Œå¾ˆå¤šåšä¸»åæ‹¥ä¸Šä¸‡ç²‰ä¸ï¼Œå´å¡åœ¨å•†ä¸šåŒ–ç¯èŠ‚ï¼Œæœ€ç»ˆåªèƒ½æ²¦ä¸ºæ•°æ®å‡ºä¼—çš„â€œæ— æ•ˆè´¦å·â€ã€‚æ¯ä¸ªç¯èŠ‚éƒ½ç¼ºä¸€ä¸å¯ï¼Œç¯ç¯ç›¸æ‰£æ‰èƒ½æŠŠæµé‡å˜æˆçœŸé‡‘ç™½é“¶ã€‚</li>
</ol>
<p>æˆ‘æ˜¯â€ç¨‹åºå‘˜ç æ­Œâ€œï¼Œå…¨ç½‘æ˜µç§°ç»Ÿä¸€ï¼Œ10+å¹´å¤§å‚ç¨‹åºå‘˜ç»éªŒï¼Œåœ¨èŒåœºï¼Œç©å‰¯ä¸šï¼Œç›®æ ‡å‰¯ä¸šå¹´æ”¶å…¥ç™¾ä¸‡ï¼Œæ¢ç´¢å¯å¤åˆ©å¯å¤åˆ¶çš„ä¸€äººä¼ä¸šç©æ³•ï¼Œå¯å»gzhå›´è§‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åˆ†å¸ƒå¼äº‹åŠ¡æœ¬åœ°æ¶ˆæ¯è¡¨è¯¦è§£ï¼šä¸­å°å›¢é˜Ÿçš„ä½ä¾µå…¥è½åœ°æ–¹æ¡ˆ]]></title>    <link>https://juejin.cn/post/7588064253635330102</link>    <guid>https://juejin.cn/post/7588064253635330102</guid>    <pubDate>2025-12-27T01:49:49.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588064253635330102" data-draft-id="7588064253635313718" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åˆ†å¸ƒå¼äº‹åŠ¡æœ¬åœ°æ¶ˆæ¯è¡¨è¯¦è§£ï¼šä¸­å°å›¢é˜Ÿçš„ä½ä¾µå…¥è½åœ°æ–¹æ¡ˆ"/> <meta itemprop="keywords" content="åç«¯,åˆ†å¸ƒå¼"/> <meta itemprop="datePublished" content="2025-12-27T01:49:49.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å›å®¶è·¯ä¸Šç»•äº†å¼¯"/> <meta itemprop="url" content="https://juejin.cn/user/536217404587134"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åˆ†å¸ƒå¼äº‹åŠ¡æœ¬åœ°æ¶ˆæ¯è¡¨è¯¦è§£ï¼šä¸­å°å›¢é˜Ÿçš„ä½ä¾µå…¥è½åœ°æ–¹æ¡ˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/536217404587134/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å›å®¶è·¯ä¸Šç»•äº†å¼¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-27T01:49:49.000Z" title="Sat Dec 27 2025 01:49:49 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»15åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">åˆ†å¸ƒå¼äº‹åŠ¡æœ¬åœ°æ¶ˆæ¯è¡¨è¯¦è§£ï¼šä¸­å°å›¢é˜Ÿçš„ä½ä¾µå…¥è½åœ°æ–¹æ¡ˆ</h2>
<p>åœ¨åˆ†å¸ƒå¼äº‹åŠ¡é¢†åŸŸï¼Œå¾ˆå¤šä¸­å°å›¢é˜Ÿé¢ä¸´ä¸€ä¸ªå…±æ€§å›°å¢ƒï¼šæ—¢éœ€è¦è§£å†³è·¨æœåŠ¡æ•°æ®ä¸€è‡´æ€§é—®é¢˜ï¼ˆå¦‚è®¢å•åˆ›å»ºååŒæ­¥ç§¯åˆ†ã€æ”¯ä»˜æˆåŠŸåæ›´æ–°ç‰©æµçŠ¶æ€ï¼‰ï¼Œåˆæ— æ³•æ‰¿æ‹…TCCã€SAGAæ¨¡å¼çš„é«˜å¼€å‘æˆæœ¬ï¼Œä¹Ÿä¸æ»¡è¶³2PC/3PCå¯¹â€œçŸ­äº‹åŠ¡ã€ä½å¹¶å‘â€çš„é™åˆ¶ã€‚æ­¤æ—¶ï¼Œâ€œæœ¬åœ°æ¶ˆæ¯è¡¨+æ¶ˆæ¯é˜Ÿåˆ—â€çš„æ–¹æ¡ˆè„±é¢–è€Œå‡ºâ€”â€”å®ƒåŸºäºâ€œæœ¬åœ°äº‹åŠ¡+å¼‚æ­¥é‡è¯•â€çš„æ ¸å¿ƒæ€è·¯ï¼Œå®ç°äº†ä½ä¾µå…¥ã€ä½å¤æ‚åº¦ã€é«˜å¯ç”¨çš„æœ€ç»ˆä¸€è‡´æ€§ï¼Œæˆä¸ºä¸­å°å›¢é˜Ÿå’Œç®€å•å¼‚æ­¥åœºæ™¯çš„é¦–é€‰åˆ†å¸ƒå¼äº‹åŠ¡æ–¹æ¡ˆã€‚ä»Šå¤©ï¼Œæˆ‘ä»¬å°±å…¨é¢æ‹†è§£æœ¬åœ°æ¶ˆæ¯è¡¨çš„è®¾è®¡é€»è¾‘ã€æ‰§è¡Œæµç¨‹ã€ä¼˜ç¼ºç‚¹åŠè½åœ°è¦ç‚¹ã€‚</p>
<h3 data-id="heading-1">ä¸€ã€é“ºå«ï¼šä¸­å°å›¢é˜Ÿçš„åˆ†å¸ƒå¼äº‹åŠ¡ç—›ç‚¹ï¼Œæœ¬åœ°æ¶ˆæ¯è¡¨çš„è¯ç”ŸèƒŒæ™¯</h3>
<p>ä¸­å°å›¢é˜Ÿåœ¨è½åœ°åˆ†å¸ƒå¼äº‹åŠ¡æ—¶ï¼Œæ ¸å¿ƒç—›ç‚¹å¾€å¾€ä¸æ˜¯â€œæŠ€æœ¯å…ˆè¿›æ€§â€ï¼Œè€Œæ˜¯â€œä½æˆæœ¬ã€ä½ä¾µå…¥ã€æ˜“ç»´æŠ¤â€ã€‚ä¼ ç»Ÿæ–¹æ¡ˆçš„çŸ­æ¿æ°å¥½å‡»ä¸­äº†è¿™äº›ç—›ç‚¹ï¼š</p>
<ul>
<li><strong>2PC/3PCï¼ˆå¼ºä¸€è‡´æ€§ï¼‰</strong> ï¼šæ€§èƒ½å·®ã€é˜»å¡é£é™©é«˜ï¼Œä»…é€‚åˆä½å¹¶å‘åœºæ™¯ï¼›ä¾èµ–èµ„æºå±‚äº‹åŠ¡æ”¯æŒï¼Œæ— æ³•é€‚é…å¼‚æ­¥è·¨æœåŠ¡åœºæ™¯ï¼ˆå¦‚è®¢å•åˆ›å»ºåå¼‚æ­¥å‘é€šçŸ¥ï¼‰ã€‚</li>
<li><strong>TCCï¼ˆæŸ”æ€§äº‹åŠ¡ï¼‰</strong> ï¼šä¸šåŠ¡ä¾µå…¥æ€§æå¼ºï¼Œéœ€æ”¹é€ æ‰€æœ‰å‚ä¸æœåŠ¡çš„æ¥å£ï¼ˆå®ç°Try/Confirm/Cancelï¼‰ï¼Œå¼€å‘ç»´æŠ¤æˆæœ¬é«˜ï¼›å¯¹å›¢é˜ŸæŠ€æœ¯èƒ½åŠ›è¦æ±‚é«˜ï¼Œä¸­å°å›¢é˜Ÿéš¾ä»¥é©¾é©­ã€‚</li>
<li><strong>SAGAï¼ˆæŸ”æ€§äº‹åŠ¡ï¼‰</strong> ï¼šè™½ä¾µå…¥æ€§ä½äºTCCï¼Œä½†å¤æ‚æµç¨‹çš„åè°ƒé€»è¾‘å’Œè¡¥å¿äº‹åŠ¡è®¾è®¡ä»éœ€è¾ƒé«˜æˆæœ¬ï¼›é€‚åˆé•¿äº‹åŠ¡ï¼Œå¯¹ç®€å•å¼‚æ­¥åœºæ™¯ï¼ˆå¦‚â€œæ“ä½œ+é€šçŸ¥â€ï¼‰è€Œè¨€è¿‡äºåšé‡ã€‚</li>
</ul>
<p>ä¸­å°å›¢é˜Ÿçš„æ ¸å¿ƒéœ€æ±‚æ˜¯ï¼š<strong>ä½ä»£ç æ”¹é€ ã€ä½å¼€å‘æˆæœ¬ã€é«˜å¯ç”¨æ€§ã€é€‚é…ç®€å•å¼‚æ­¥è·¨æœåŠ¡åœºæ™¯</strong>ã€‚æœ¬åœ°æ¶ˆæ¯è¡¨æ–¹æ¡ˆæ­£æ˜¯åŸºäºè¿™ä¸€éœ€æ±‚è®¾è®¡çš„â€”â€”å®ƒä¸ä¾èµ–å¤æ‚æ¡†æ¶ï¼Œä»…é€šè¿‡â€œæ•°æ®åº“æœ¬åœ°äº‹åŠ¡+æ¶ˆæ¯é˜Ÿåˆ—é‡è¯•â€çš„ç»„åˆï¼Œå°±èƒ½è§£å†³å¤§éƒ¨åˆ†ç®€å•å¼‚æ­¥åœºæ™¯çš„åˆ†å¸ƒå¼äº‹åŠ¡é—®é¢˜ï¼Œå®ç°â€œä¸šåŠ¡æ“ä½œâ€ä¸â€œè·¨æœåŠ¡é€šçŸ¥â€çš„æœ€ç»ˆä¸€è‡´æ€§ã€‚</p>
<h3 data-id="heading-2">äºŒã€æœ¬åœ°æ¶ˆæ¯è¡¨æ ¸å¿ƒå®šä¹‰ï¼šä»€ä¹ˆæ˜¯â€œæœ¬åœ°äº‹åŠ¡+æ¶ˆæ¯é˜Ÿåˆ—â€æ–¹æ¡ˆï¼Ÿ</h3>
<p>æœ¬åœ°æ¶ˆæ¯è¡¨æ–¹æ¡ˆçš„æ ¸å¿ƒå®šä¹‰æ˜¯ï¼š<strong>å°†åˆ†å¸ƒå¼äº‹åŠ¡æ‹†åˆ†ä¸ºâ€œæœ¬åœ°ä¸šåŠ¡äº‹åŠ¡â€å’Œâ€œå¼‚æ­¥æ¶ˆæ¯é€šçŸ¥â€ä¸¤ä¸ªéƒ¨åˆ†ï¼Œé€šè¿‡åœ¨ä¸šåŠ¡åº“ä¸­æ–°å¢â€œæœ¬åœ°æ¶ˆæ¯è¡¨â€ï¼Œå°†â€œä¸šåŠ¡æ“ä½œâ€ä¸â€œæ¶ˆæ¯å†™å…¥â€å°è£…åœ¨åŒä¸€ä¸ªæœ¬åœ°äº‹åŠ¡ä¸­ï¼Œä¿è¯ä¸¤è€…åŸå­æ€§ï¼ˆè¦ä¹ˆéƒ½æˆåŠŸï¼Œè¦ä¹ˆéƒ½å¤±è´¥ï¼‰ï¼›ä¹‹åé€šè¿‡å®šæ—¶ä»»åŠ¡æ‰«ææœ¬åœ°æ¶ˆæ¯è¡¨ï¼Œå°†æœªæŠ•é€’çš„æ¶ˆæ¯æŠ•é€’åˆ°æ¶ˆæ¯é˜Ÿåˆ—ï¼›æ¥æ”¶æ–¹æ¶ˆè´¹æ¶ˆæ¯é˜Ÿåˆ—ä¸­çš„æ¶ˆæ¯ï¼Œæ‰§è¡Œå¯¹åº”çš„ä¸šåŠ¡æ“ä½œï¼›è‹¥æ¶ˆè´¹å¤±è´¥ï¼Œé€šè¿‡æ¶ˆæ¯é˜Ÿåˆ—çš„é‡è¯•æœºåˆ¶é‡å¤æŠ•é€’ï¼Œç›´è‡³æ¶ˆè´¹æˆåŠŸï¼Œæœ€ç»ˆå®ç°è·¨æœåŠ¡çš„æœ€ç»ˆä¸€è‡´æ€§</strong>ã€‚</p>
<p>æ ¸å¿ƒç»„æˆè¦ç´ ï¼ˆæç®€è®¾è®¡ï¼Œæ— å¤æ‚è§’è‰²ï¼‰ï¼š</p>
<ol>
<li><strong>æœ¬åœ°æ¶ˆæ¯è¡¨</strong>ï¼šå­˜å‚¨åœ¨ä¸šåŠ¡æ•°æ®åº“ä¸­çš„ä¸€å¼ è¡¨ï¼Œç”¨äºè®°å½•éœ€è¦å¼‚æ­¥æŠ•é€’çš„æ¶ˆæ¯ï¼Œæ ¸å¿ƒå­—æ®µåŒ…æ‹¬ï¼šæ¶ˆæ¯IDï¼ˆå”¯ä¸€æ ‡è¯†ï¼‰ã€æ¶ˆæ¯å†…å®¹ï¼ˆå¦‚è®¢å•IDã€ç”¨æˆ·IDï¼‰ã€æ¶ˆæ¯çŠ¶æ€ï¼ˆå¾…æŠ•é€’/å·²æŠ•é€’/å·²æ¶ˆè´¹/å¤±è´¥ï¼‰ã€åˆ›å»ºæ—¶é—´ã€æŠ•é€’æ¬¡æ•°ã€ä¸‹æ¬¡æŠ•é€’æ—¶é—´ç­‰ï¼›æ¶ˆæ¯è¡¨ä¸ä¸šåŠ¡è¡¨åœ¨åŒä¸€ä¸ªæ•°æ®åº“ï¼Œç¡®ä¿æœ¬åœ°äº‹åŠ¡åŸå­æ€§ã€‚</li>
<li><strong>æœ¬åœ°ä¸šåŠ¡äº‹åŠ¡</strong>ï¼šå‘èµ·æ–¹çš„æ ¸å¿ƒä¸šåŠ¡æ“ä½œï¼ˆå¦‚åˆ›å»ºè®¢å•ã€æ‰£å‡ä½™é¢ï¼‰ï¼Œä¸â€œå†™å…¥æœ¬åœ°æ¶ˆæ¯è¡¨â€çš„æ“ä½œå°è£…åœ¨åŒä¸€ä¸ªæ•°æ®åº“äº‹åŠ¡ä¸­ï¼Œä¿è¯ä¸¤è€…åŒæ—¶æˆåŠŸæˆ–åŒæ—¶å¤±è´¥ã€‚</li>
<li><strong>æ¶ˆæ¯é˜Ÿåˆ—ï¼ˆMQï¼‰</strong> ï¼šç”¨äºå¼‚æ­¥ä¼ é€’æ¶ˆæ¯ï¼ˆå¦‚RabbitMQã€RocketMQã€Kafkaï¼‰ï¼Œæ‰¿æ¥æœ¬åœ°æ¶ˆæ¯è¡¨çš„æ¶ˆæ¯æŠ•é€’ï¼Œä¸ºæ¥æ”¶æ–¹æä¾›å¼‚æ­¥æ¶ˆè´¹èƒ½åŠ›ï¼›ä¾èµ–æ¶ˆæ¯é˜Ÿåˆ—çš„â€œæŒä¹…åŒ–â€å’Œâ€œé‡è¯•æœºåˆ¶â€ï¼Œä¿è¯æ¶ˆæ¯ä¸ä¸¢å¤±ã€æ¶ˆè´¹å¤±è´¥å¯é‡è¯•ã€‚</li>
<li><strong>å®šæ—¶ä»»åŠ¡ï¼ˆæ¶ˆæ¯æŠ•é€’å™¨ï¼‰</strong> ï¼šå®šæœŸæ‰«ææœ¬åœ°æ¶ˆæ¯è¡¨ä¸­â€œå¾…æŠ•é€’â€çŠ¶æ€çš„æ¶ˆæ¯ï¼Œå°†å…¶æŠ•é€’åˆ°æ¶ˆæ¯é˜Ÿåˆ—ï¼›è‹¥æŠ•é€’å¤±è´¥ï¼ˆå¦‚MQå®•æœºï¼‰ï¼Œè®°å½•æŠ•é€’æ¬¡æ•°å’Œä¸‹æ¬¡æŠ•é€’æ—¶é—´ï¼Œä¸‹æ¬¡ç»§ç»­é‡è¯•ã€‚</li>
</ol>
<p>æ ¸å¿ƒè§’è‰²ï¼ˆè§’è‰²æç®€ï¼Œæ˜“ç»´æŠ¤ï¼‰ï¼š</p>
<ul>
<li><strong>äº‹åŠ¡å‘èµ·æ–¹</strong>ï¼šæ‰§è¡Œæœ¬åœ°ä¸šåŠ¡äº‹åŠ¡ï¼Œå†™å…¥æœ¬åœ°æ¶ˆæ¯è¡¨ï¼Œé€šè¿‡å®šæ—¶ä»»åŠ¡æŠ•é€’æ¶ˆæ¯ï¼›</li>
<li><strong>äº‹åŠ¡æ¥æ”¶æ–¹</strong>ï¼šæ¶ˆè´¹æ¶ˆæ¯é˜Ÿåˆ—ä¸­çš„æ¶ˆæ¯ï¼Œæ‰§è¡Œå¯¹åº”çš„ä¸šåŠ¡æ“ä½œï¼ˆå¦‚åˆ›å»ºç§¯åˆ†è®°å½•ã€æ›´æ–°ç‰©æµçŠ¶æ€ï¼‰ï¼›</li>
<li><strong>æ¶ˆæ¯é˜Ÿåˆ—ï¼ˆä¸­é—´ä»¶ï¼‰</strong> ï¼šè´Ÿè´£æ¶ˆæ¯çš„å­˜å‚¨ã€ä¼ é€’å’Œé‡è¯•ï¼Œæ˜¯å¼‚æ­¥é€šä¿¡çš„æ ¸å¿ƒè½½ä½“ã€‚</li>
</ul>
<h3 data-id="heading-3">ä¸‰ã€æœ¬åœ°æ¶ˆæ¯è¡¨å®Œæ•´æµç¨‹æ‹†è§£ï¼šä»¥â€œè®¢å•åˆ›å»ºååŒæ­¥ç§¯åˆ†â€ä¸ºä¾‹</h3>
<p>æˆ‘ä»¬ä»¥â€œç”µå•†è®¢å•åˆ›å»ºåï¼Œå¼‚æ­¥åŒæ­¥ç”¨æˆ·ç§¯åˆ†ï¼ˆè®¢å•æœåŠ¡â†’ç§¯åˆ†æœåŠ¡ï¼‰â€çš„ç»å…¸åœºæ™¯ä¸ºä¾‹ï¼Œæ‹†è§£æœ¬åœ°æ¶ˆæ¯è¡¨çš„å®Œæ•´æ‰§è¡Œæµç¨‹ï¼Œç›´è§‚ç†è§£æ¯ä¸ªç¯èŠ‚çš„å…·ä½“æ“ä½œï¼š</p>
<p>ä¸šåŠ¡éœ€æ±‚ï¼šç”¨æˆ·åˆ›å»ºè®¢å•ï¼ˆè®¢å•æœåŠ¡ï¼‰åï¼Œç§¯åˆ†æœåŠ¡éœ€ä¸ºç”¨æˆ·å¢åŠ å¯¹åº”ç§¯åˆ†ï¼Œç¡®ä¿â€œè®¢å•åˆ›å»ºæˆåŠŸâ€ä¸â€œç§¯åˆ†å¢åŠ æˆåŠŸâ€æœ€ç»ˆä¸€è‡´ï¼ˆå…è®¸çŸ­æš‚å»¶è¿Ÿï¼‰ã€‚</p>
<h4 data-id="heading-4">å‰ç½®å‡†å¤‡ï¼šåˆ›å»ºæœ¬åœ°æ¶ˆæ¯è¡¨</h4>
<p>åœ¨è®¢å•æœåŠ¡çš„ä¸šåŠ¡æ•°æ®åº“ä¸­ï¼Œæ–°å¢â€œlocal_messageâ€æœ¬åœ°æ¶ˆæ¯è¡¨ï¼Œè¡¨ç»“æ„ç¤ºä¾‹ï¼ˆMySQLï¼‰ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> `local_message` (
  `id` <span class="hljs-type">bigint</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="hljs-string">'ä¸»é”®ID'</span>,
  `message_id` <span class="hljs-type">varchar</span>(<span class="hljs-number">64</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'æ¶ˆæ¯å”¯ä¸€IDï¼ˆUUIDï¼‰'</span>,
  `message_content` text <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'æ¶ˆæ¯å†…å®¹ï¼ˆJSONæ ¼å¼ï¼Œå¦‚{"order_id":"123","user_id":"456","points":10}ï¼‰'</span>,
  `message_status` tinyint(<span class="hljs-number">4</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">0</span> COMMENT <span class="hljs-string">'æ¶ˆæ¯çŠ¶æ€ï¼š0-å¾…æŠ•é€’ï¼Œ1-å·²æŠ•é€’ï¼Œ2-å·²æ¶ˆè´¹ï¼Œ3-æŠ•é€’å¤±è´¥'</span>,
  `delivery_count` <span class="hljs-type">int</span>(<span class="hljs-number">11</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">0</span> COMMENT <span class="hljs-string">'å·²æŠ•é€’æ¬¡æ•°'</span>,
  `next_delivery_time` datetime <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'ä¸‹æ¬¡æŠ•é€’æ—¶é—´'</span>,
  `create_time` datetime <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span> COMMENT <span class="hljs-string">'åˆ›å»ºæ—¶é—´'</span>,
  `update_time` datetime <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span> <span class="hljs-keyword">ON</span> <span class="hljs-keyword">UPDATE</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span> COMMENT <span class="hljs-string">'æ›´æ–°æ—¶é—´'</span>,
  <span class="hljs-keyword">PRIMARY</span> KEY (`id`),
  <span class="hljs-keyword">UNIQUE</span> KEY `uk_message_id` (`message_id`),
  INDEX `idx_message_status` (`message_status`),
  INDEX `idx_next_delivery_time` (`next_delivery_time`)
) ENGINE<span class="hljs-operator">=</span>InnoDB <span class="hljs-keyword">DEFAULT</span> CHARSET<span class="hljs-operator">=</span>utf8mb4 COMMENT<span class="hljs-operator">=</span><span class="hljs-string">'æœ¬åœ°æ¶ˆæ¯è¡¨'</span>;
</code></pre>
<h4 data-id="heading-5">é˜¶æ®µ1ï¼šæ‰§è¡Œæœ¬åœ°äº‹åŠ¡ï¼ˆä¸šåŠ¡æ“ä½œ+å†™å…¥æ¶ˆæ¯è¡¨ï¼‰</h4>
<p>è®¢å•æœåŠ¡åœ¨åˆ›å»ºè®¢å•æ—¶ï¼Œå°†â€œåˆ›å»ºè®¢å•â€å’Œâ€œå†™å…¥ç§¯åˆ†åŒæ­¥æ¶ˆæ¯â€å°è£…åœ¨åŒä¸€ä¸ªæœ¬åœ°äº‹åŠ¡ä¸­ï¼Œä¿è¯åŸå­æ€§ï¼š</p>
<ol>
<li>ç”¨æˆ·å‘èµ·åˆ›å»ºè®¢å•è¯·æ±‚ï¼Œè®¢å•æœåŠ¡å¼€å¯æ•°æ®åº“äº‹åŠ¡ï¼›</li>
<li>æ‰§è¡Œæ ¸å¿ƒä¸šåŠ¡æ“ä½œï¼šå‘â€œorderâ€è¡¨æ’å…¥è®¢å•è®°å½•ï¼ˆçŠ¶æ€ä¸ºâ€œå·²åˆ›å»ºâ€ï¼‰ï¼›</li>
<li>æ‰§è¡Œæ¶ˆæ¯å†™å…¥æ“ä½œï¼šç”Ÿæˆå”¯ä¸€æ¶ˆæ¯IDï¼Œå‘â€œlocal_messageâ€è¡¨æ’å…¥ä¸€æ¡æ¶ˆæ¯ï¼ˆæ¶ˆæ¯å†…å®¹ä¸ºè®¢å•IDã€ç”¨æˆ·IDã€ç§¯åˆ†å€¼ç­‰ï¼ŒçŠ¶æ€ä¸ºâ€œ0-å¾…æŠ•é€’â€ï¼Œä¸‹æ¬¡æŠ•é€’æ—¶é—´ä¸ºå½“å‰æ—¶é—´+10ç§’ï¼‰ï¼›</li>
<li>æäº¤æ•°æ®åº“äº‹åŠ¡ï¼šè‹¥æ­¥éª¤2å’Œ3å‡æˆåŠŸï¼Œäº‹åŠ¡æäº¤ï¼Œè®¢å•åˆ›å»ºæˆåŠŸä¸”æ¶ˆæ¯å†™å…¥æˆåŠŸï¼›è‹¥ä»»æ„ä¸€æ­¥å¤±è´¥ï¼ˆå¦‚è®¢å•å‚æ•°é”™è¯¯ã€æ•°æ®åº“å¼‚å¸¸ï¼‰ï¼Œäº‹åŠ¡å›æ»šï¼Œè®¢å•å’Œæ¶ˆæ¯å‡ä¸ç”Ÿæ•ˆï¼Œæ— æ•°æ®ä¸ä¸€è‡´ã€‚</li>
</ol>
<h4 data-id="heading-6">é˜¶æ®µ2ï¼šå®šæ—¶ä»»åŠ¡æŠ•é€’æ¶ˆæ¯åˆ°MQ</h4>
<p>è®¢å•æœåŠ¡å¯åŠ¨å®šæ—¶ä»»åŠ¡ï¼ˆå¦‚æ¯10ç§’æ‰§è¡Œä¸€æ¬¡ï¼‰ï¼Œæ‰«ææœ¬åœ°æ¶ˆæ¯è¡¨ä¸­â€œå¾…æŠ•é€’â€ä¸”â€œä¸‹æ¬¡æŠ•é€’æ—¶é—´â‰¤å½“å‰æ—¶é—´â€çš„æ¶ˆæ¯ï¼Œå°†å…¶æŠ•é€’åˆ°æ¶ˆæ¯é˜Ÿåˆ—ï¼ˆå¦‚RocketMQçš„â€œorder_to_points_topicâ€ä¸»é¢˜ï¼‰ï¼š</p>
<ol>
<li>
<p>å®šæ—¶ä»»åŠ¡æŸ¥è¯¢æœ¬åœ°æ¶ˆæ¯è¡¨ï¼š<code>SELECT * FROM local_message WHERE message_status=0 AND next_delivery_time â‰¤ NOW()</code>ï¼›</p>
</li>
<li>
<p>éå†æŸ¥è¯¢ç»“æœï¼Œå‘æ¶ˆæ¯é˜Ÿåˆ—å‘é€æ¶ˆæ¯ï¼ˆæ¶ˆæ¯å†…å®¹ä¸ºlocal_messageè¡¨ä¸­çš„message_contentï¼‰ï¼›</p>
</li>
<li>
<p>å¤„ç†æŠ•é€’ç»“æœï¼š</p>
<ol>
<li>è‹¥æŠ•é€’æˆåŠŸï¼šæ›´æ–°æ¶ˆæ¯çŠ¶æ€ä¸ºâ€œ1-å·²æŠ•é€’â€ï¼Œè®°å½•æŠ•é€’æ¬¡æ•°ï¼›</li>
<li>è‹¥æŠ•é€’å¤±è´¥ï¼ˆå¦‚MQå®•æœºï¼‰ï¼šæ›´æ–°æŠ•é€’æ¬¡æ•°ï¼ˆ+1ï¼‰ï¼Œè®¾ç½®ä¸‹æ¬¡æŠ•é€’æ—¶é—´ï¼ˆå¦‚å½“å‰æ—¶é—´+2^nç§’ï¼Œé‡‡ç”¨æŒ‡æ•°é€€é¿ç­–ç•¥ï¼Œé¿å…é¢‘ç¹é‡è¯•ï¼‰ï¼›è‹¥æŠ•é€’æ¬¡æ•°è¶…è¿‡é˜ˆå€¼ï¼ˆå¦‚5æ¬¡ï¼‰ï¼Œæ ‡è®°æ¶ˆæ¯çŠ¶æ€ä¸ºâ€œ3-æŠ•é€’å¤±è´¥â€ï¼Œè§¦å‘å‘Šè­¦ï¼ˆäººå·¥ä»‹å…¥å¤„ç†ï¼‰ã€‚</li>
</ol>
</li>
</ol>
<h4 data-id="heading-7">é˜¶æ®µ3ï¼šæ¥æ”¶æ–¹æ¶ˆè´¹æ¶ˆæ¯ï¼Œæ‰§è¡Œä¸šåŠ¡æ“ä½œ</h4>
<p>ç§¯åˆ†æœåŠ¡ç›‘å¬æ¶ˆæ¯é˜Ÿåˆ—çš„â€œorder_to_points_topicâ€ä¸»é¢˜ï¼Œæ¶ˆè´¹è®¢å•æœåŠ¡æŠ•é€’çš„æ¶ˆæ¯ï¼Œæ‰§è¡Œç§¯åˆ†å¢åŠ æ“ä½œï¼š</p>
<ol>
<li>
<p>ç§¯åˆ†æœåŠ¡ä»æ¶ˆæ¯é˜Ÿåˆ—è·å–æ¶ˆæ¯ï¼Œè§£ææ¶ˆæ¯å†…å®¹ï¼ˆè®¢å•IDã€ç”¨æˆ·IDã€ç§¯åˆ†å€¼ï¼‰ï¼›</p>
</li>
<li>
<p>æ‰§è¡Œå¹‚ç­‰æ€§æ ¡éªŒï¼šæŸ¥è¯¢â€œpoints_logâ€ç§¯åˆ†æ—¥å¿—è¡¨ï¼Œåˆ¤æ–­è¯¥æ¶ˆæ¯IDå¯¹åº”çš„ç§¯åˆ†æ˜¯å¦å·²å¢åŠ ï¼ˆé¿å…é‡å¤æ¶ˆè´¹ï¼‰ï¼›è‹¥å·²æ¶ˆè´¹ï¼Œç›´æ¥è¿”å›æˆåŠŸï¼›è‹¥æœªæ¶ˆè´¹ï¼Œç»§ç»­ä¸‹ä¸€æ­¥ï¼›</p>
</li>
<li>
<p>æ‰§è¡Œæ ¸å¿ƒä¸šåŠ¡æ“ä½œï¼šå‘â€œuser_pointsâ€è¡¨æ›´æ–°ç”¨æˆ·ç§¯åˆ†ï¼ˆå¢åŠ å¯¹åº”ç§¯åˆ†ï¼‰ï¼Œå‘â€œpoints_logâ€è¡¨æ’å…¥ç§¯åˆ†å˜æ›´è®°å½•ï¼ˆå…³è”æ¶ˆæ¯IDï¼Œç”¨äºå¹‚ç­‰æ ¡éªŒï¼‰ï¼›</p>
</li>
<li>
<p>å¤„ç†æ¶ˆè´¹ç»“æœï¼š</p>
<ol>
<li>è‹¥æ¶ˆè´¹æˆåŠŸï¼šå‘æ¶ˆæ¯é˜Ÿåˆ—å‘é€â€œæ¶ˆè´¹ç¡®è®¤â€ï¼ˆACKï¼‰ï¼Œæ¶ˆæ¯é˜Ÿåˆ—åˆ é™¤è¯¥æ¶ˆæ¯ï¼›</li>
<li>è‹¥æ¶ˆè´¹å¤±è´¥ï¼ˆå¦‚æ•°æ®åº“å¼‚å¸¸ã€ç§¯åˆ†æœåŠ¡å®•æœºï¼‰ï¼šä¸å‘é€ACKï¼Œæ¶ˆæ¯é˜Ÿåˆ—å°†è¯¥æ¶ˆæ¯é‡æ–°æ”¾å…¥é˜Ÿåˆ—ï¼Œç­‰å¾…ä¸‹æ¬¡æŠ•é€’ï¼ˆä¾èµ–MQçš„é‡è¯•æœºåˆ¶ï¼Œé‡è¯•é—´éš”å¯é…ç½®ï¼‰ï¼›è‹¥é‡è¯•æ¬¡æ•°è¶…è¿‡é˜ˆå€¼ï¼Œæ¶ˆæ¯è¿›å…¥æ­»ä¿¡é˜Ÿåˆ—ï¼Œåç»­äººå·¥å¤„ç†ã€‚</li>
</ol>
</li>
</ol>
<h4 data-id="heading-8">é˜¶æ®µ4ï¼šï¼ˆå¯é€‰ï¼‰æ¶ˆæ¯æ¶ˆè´¹ç¡®è®¤å›å†™ï¼ˆä¼˜åŒ–ç‚¹ï¼‰</h4>
<p>ä¸ºäº†æ›´ç²¾å‡†åœ°è·Ÿè¸ªæ¶ˆæ¯çŠ¶æ€ï¼Œå¯å¢åŠ â€œæ¶ˆè´¹ç¡®è®¤å›å†™â€æ­¥éª¤ï¼šç§¯åˆ†æœåŠ¡æ¶ˆè´¹æˆåŠŸåï¼Œä¸»åŠ¨è°ƒç”¨è®¢å•æœåŠ¡çš„â€œæ¶ˆæ¯æ¶ˆè´¹ç¡®è®¤æ¥å£â€ï¼Œè®¢å•æœåŠ¡æ”¶åˆ°åå°†æœ¬åœ°æ¶ˆæ¯è¡¨ä¸­å¯¹åº”æ¶ˆæ¯çš„çŠ¶æ€æ›´æ–°ä¸ºâ€œ2-å·²æ¶ˆè´¹â€ã€‚æ­¤æ­¥éª¤éå¿…éœ€ï¼Œä½†èƒ½è®©æ¶ˆæ¯çŠ¶æ€æ›´é€æ˜ï¼Œä¾¿äºé—®é¢˜æ’æŸ¥ã€‚</p>
<h3 data-id="heading-9">å››ã€æœ¬åœ°æ¶ˆæ¯è¡¨çš„æ ¸å¿ƒä¼˜åŠ¿ä¸å±€é™æ€§</h3>
<p>æœ¬åœ°æ¶ˆæ¯è¡¨æ–¹æ¡ˆçš„ä¼˜åŠ¿å’Œå±€é™æ€§éƒ½æºäºå…¶â€œæç®€è®¾è®¡â€ï¼Œé€‚é…åœºæ™¯é«˜åº¦èšç„¦äºâ€œç®€å•å¼‚æ­¥è·¨æœåŠ¡åœºæ™¯â€ã€‚</p>
<h4 data-id="heading-10">1. æ ¸å¿ƒä¼˜åŠ¿ï¼šä½ä¾µå…¥ã€ä½æˆæœ¬ã€é«˜å¯ç”¨</h4>
<ul>
<li><strong>ä¸šåŠ¡ä¾µå…¥æ€§æä½</strong>ï¼šæ— éœ€æ”¹é€ ç°æœ‰ä¸šåŠ¡æ¥å£ï¼Œä»…éœ€åœ¨ä¸šåŠ¡åº“ä¸­æ–°å¢æœ¬åœ°æ¶ˆæ¯è¡¨ï¼Œåœ¨åŸæœ‰ä¸šåŠ¡äº‹åŠ¡ä¸­æ–°å¢â€œå†™å…¥æ¶ˆæ¯â€çš„æ­¥éª¤ï¼Œå¼€å‘æ”¹é€ é‡æå°ï¼›</li>
<li><strong>å®ç°ç®€å•ï¼Œæˆæœ¬ä½</strong>ï¼šä¸ä¾èµ–å¤æ‚çš„åˆ†å¸ƒå¼äº‹åŠ¡æ¡†æ¶ï¼Œä»…éœ€ä½¿ç”¨æ•°æ®åº“æœ¬åœ°äº‹åŠ¡å’Œæ¶ˆæ¯é˜Ÿåˆ—ï¼Œä¸­å°å›¢é˜Ÿæ— éœ€é¢å¤–å­¦ä¹ æˆæœ¬ï¼Œå°±èƒ½å¿«é€Ÿè½åœ°ï¼›</li>
<li><strong>é«˜å¯ç”¨æ€§å¼º</strong>ï¼šæœ¬åœ°äº‹åŠ¡ä¿è¯â€œä¸šåŠ¡+æ¶ˆæ¯â€åŸå­æ€§ï¼Œæ— æ•°æ®ä¸¢å¤±é£é™©ï¼›æ¶ˆæ¯é˜Ÿåˆ—çš„æŒä¹…åŒ–å’Œé‡è¯•æœºåˆ¶ï¼Œä¿è¯æ¶ˆæ¯èƒ½å¯é æŠ•é€’ï¼›å®šæ—¶ä»»åŠ¡çš„æŒ‡æ•°é€€é¿é‡è¯•ï¼Œé¿å…äº†ç¬æ—¶æ•…éšœå¯¼è‡´çš„æ¶ˆæ¯æŠ•é€’å¤±è´¥ï¼›</li>
<li><strong>æ€§èƒ½å½±å“å°</strong>ï¼šæœ¬åœ°æ¶ˆæ¯è¡¨çš„å†™å…¥æ˜¯æœ¬åœ°æ•°æ®åº“æ“ä½œï¼Œæ€§èƒ½å¼€é”€æä½ï¼›æ¶ˆæ¯æŠ•é€’å’Œæ¶ˆè´¹æ˜¯å¼‚æ­¥çš„ï¼Œä¸ä¼šé˜»å¡æ ¸å¿ƒä¸šåŠ¡æµç¨‹ï¼ˆå¦‚è®¢å•åˆ›å»ºï¼‰ï¼Œå¯¹æ ¸å¿ƒä¸šåŠ¡æ€§èƒ½å‡ ä¹æ— å½±å“ã€‚</li>
</ul>
<h4 data-id="heading-11">2. å±€é™æ€§ï¼šä»…é€‚é…ç®€å•åœºæ™¯ï¼Œä¸€è‡´æ€§å»¶è¿Ÿå¯æ§</h4>
<ul>
<li><strong>ä»…æ”¯æŒç®€å•å¼‚æ­¥åœºæ™¯</strong>ï¼šé€‚åˆâ€œä¸€å¯¹ä¸€â€çš„å¼‚æ­¥è·¨æœåŠ¡é€šçŸ¥åœºæ™¯ï¼ˆå¦‚è®¢å•â†’ç§¯åˆ†ã€æ”¯ä»˜â†’ç‰©æµï¼‰ï¼›ä¸æ”¯æŒå¤æ‚æµç¨‹ï¼ˆå¦‚å¤šæœåŠ¡ä¸²è¡Œ/å¹¶è¡Œäº¤äº’ã€æµç¨‹åˆ†æ”¯ï¼‰ï¼Œä¹Ÿä¸æ”¯æŒé•¿äº‹åŠ¡åœºæ™¯ï¼›</li>
<li><strong>ä»…èƒ½ä¿è¯æœ€ç»ˆä¸€è‡´æ€§</strong>ï¼šæ¶ˆæ¯æŠ•é€’å’Œæ¶ˆè´¹å­˜åœ¨å»¶è¿Ÿï¼Œä¼šå‡ºç°â€œè®¢å•åˆ›å»ºæˆåŠŸä½†ç§¯åˆ†å°šæœªå¢åŠ â€çš„ä¸­é—´çŠ¶æ€ï¼Œéœ€ä¸šåŠ¡å±‚é¢èƒ½æ¥å—ï¼›</li>
<li><strong>æ¶ˆæ¯è¡¨ä¸ä¸šåŠ¡åº“è€¦åˆ</strong>ï¼šæœ¬åœ°æ¶ˆæ¯è¡¨å­˜å‚¨åœ¨ä¸šåŠ¡æ•°æ®åº“ä¸­ï¼Œä¼šå¢åŠ ä¸šåŠ¡åº“çš„å­˜å‚¨å‹åŠ›ï¼›è‹¥ä¸šåŠ¡åº“å®•æœºï¼Œæ¶ˆæ¯æŠ•é€’ä¼šæš‚æ—¶ä¸­æ–­ï¼ˆä½†ä¸šåŠ¡ä¹Ÿæ— æ³•æ‰§è¡Œï¼Œå±äºå¯æ¥å—èŒƒå›´ï¼‰ï¼›</li>
<li><strong>éœ€æ‰‹åŠ¨å¤„ç†å¹‚ç­‰æ€§å’Œæ­»ä¿¡æ¶ˆæ¯</strong>ï¼šæ¶ˆè´¹æ–¹å¿…é¡»å®ç°å¹‚ç­‰æ€§ï¼ˆé¿å…é‡å¤æ¶ˆè´¹ï¼‰ï¼Œæ­»ä¿¡æ¶ˆæ¯ï¼ˆå¤šæ¬¡é‡è¯•å¤±è´¥çš„æ¶ˆæ¯ï¼‰éœ€è¦äººå·¥ä»‹å…¥å¤„ç†ï¼Œå¢åŠ äº†è¿ç»´æˆæœ¬ã€‚</li>
</ul>
<h3 data-id="heading-12">äº”ã€æœ¬åœ°æ¶ˆæ¯è¡¨çš„é€‚ç”¨åœºæ™¯ä¸è½åœ°æ³¨æ„äº‹é¡¹</h3>
<p>æœ¬åœ°æ¶ˆæ¯è¡¨æ–¹æ¡ˆçš„ç‰¹æ€§å†³å®šäº†å®ƒæ˜¯â€œç®€å•å¼‚æ­¥åœºæ™¯çš„æœ€ä¼˜è§£â€ï¼Œè½åœ°æ—¶éœ€é‡ç‚¹è§£å†³å¹‚ç­‰æ€§ã€é‡è¯•ç­–ç•¥ã€æ­»ä¿¡å¤„ç†ç­‰æ ¸å¿ƒé—®é¢˜ã€‚</p>
<h4 data-id="heading-13">1. é€‚ç”¨åœºæ™¯</h4>
<ul>
<li><strong>ç®€å•å¼‚æ­¥è·¨æœåŠ¡é€šçŸ¥åœºæ™¯</strong>ï¼šå¦‚è®¢å•åˆ›å»ºååŒæ­¥ç§¯åˆ†ã€æ”¯ä»˜æˆåŠŸåæ›´æ–°ç‰©æµçŠ¶æ€ã€ç”¨æˆ·æ³¨å†Œåå‘é€æ¬¢è¿çŸ­ä¿¡/é‚®ä»¶ï¼›</li>
<li><strong>ä¸­å°å›¢é˜Ÿã€ä½å¼€å‘æˆæœ¬éœ€æ±‚åœºæ™¯</strong>ï¼šå›¢é˜ŸæŠ€æœ¯èƒ½åŠ›æœ‰é™ï¼Œæ— æ³•æ‰¿æ‹…TCCã€SAGAçš„å¼€å‘ç»´æŠ¤æˆæœ¬ï¼Œéœ€è¦å¿«é€Ÿè½åœ°åˆ†å¸ƒå¼äº‹åŠ¡æ–¹æ¡ˆï¼›</li>
<li><strong>æ ¸å¿ƒä¸šåŠ¡éå¼ºå®æ—¶ä¸€è‡´æ€§åœºæ™¯</strong>ï¼šæ ¸å¿ƒä¸šåŠ¡ï¼ˆå¦‚è®¢å•åˆ›å»ºï¼‰æ— éœ€ç­‰å¾…è·¨æœåŠ¡æ“ä½œå®Œæˆï¼Œå¯æ¥å—çŸ­æš‚çš„ä¸€è‡´æ€§å»¶è¿Ÿï¼›</li>
<li><strong>åŸºäºå…³ç³»å‹æ•°æ®åº“çš„ä¸šåŠ¡åœºæ™¯</strong>ï¼šä¸šåŠ¡ä½¿ç”¨MySQLã€PostgreSQLç­‰å…³ç³»å‹æ•°æ®åº“ï¼Œèƒ½åˆ©ç”¨æœ¬åœ°äº‹åŠ¡ä¿è¯â€œä¸šåŠ¡+æ¶ˆæ¯â€çš„åŸå­æ€§ã€‚</li>
</ul>
<h4 data-id="heading-14">2. è½åœ°æ³¨æ„äº‹é¡¹ï¼ˆæ ¸å¿ƒæŠ€æœ¯éš¾ç‚¹ï¼‰</h4>
<ul>
<li>
<p><strong>æ¶ˆæ¯è¡¨è®¾è®¡ä¼˜åŒ–</strong>ï¼š</p>
<ul>
<li>å¿…é¡»æ·»åŠ â€œæ¶ˆæ¯å”¯ä¸€IDâ€ï¼ˆå¦‚UUIDï¼‰ï¼Œç”¨äºå¹‚ç­‰æ€§æ ¡éªŒï¼›</li>
<li>ç´¢å¼•è®¾è®¡ï¼šä¸ºâ€œmessage_statusâ€å’Œâ€œnext_delivery_timeâ€å»ºç«‹è”åˆç´¢å¼•ï¼Œæå‡å®šæ—¶ä»»åŠ¡æŸ¥è¯¢æ•ˆç‡ï¼›ä¸ºâ€œmessage_idâ€å»ºç«‹å”¯ä¸€ç´¢å¼•ï¼Œé¿å…é‡å¤æ’å…¥æ¶ˆæ¯ï¼›</li>
<li>å­—æ®µç²¾ç®€ï¼šä»…å­˜å‚¨å¿…è¦çš„æ¶ˆæ¯å†…å®¹ï¼Œé¿å…æ¶ˆæ¯è¡¨è¿‡å¤§å½±å“æŸ¥è¯¢æ€§èƒ½ã€‚</li>
</ul>
</li>
<li>
<p><strong>ä¸¥æ ¼ä¿è¯å¹‚ç­‰æ€§</strong>ï¼š</p>
<ul>
<li>æ¶ˆè´¹æ–¹ï¼šé€šè¿‡â€œæ¶ˆæ¯IDâ€æˆ–â€œä¸šåŠ¡å”¯ä¸€æ ‡è¯†ï¼ˆå¦‚è®¢å•IDï¼‰â€åšå¹‚ç­‰æ ¡éªŒï¼Œç¡®ä¿é‡å¤æ¶ˆè´¹ä¸ä¼šå¯¼è‡´æ•°æ®å¼‚å¸¸ï¼ˆå¦‚é‡å¤å¢åŠ ç§¯åˆ†ï¼‰ï¼›</li>
<li>å‘èµ·æ–¹ï¼šæœ¬åœ°äº‹åŠ¡æäº¤å‰ï¼Œé€šè¿‡â€œæ¶ˆæ¯IDâ€å”¯ä¸€ç´¢å¼•é¿å…é‡å¤å†™å…¥æ¶ˆæ¯ã€‚</li>
</ul>
</li>
<li>
<p><strong>åˆç†è®¾è®¡é‡è¯•ç­–ç•¥</strong>ï¼š</p>
<ul>
<li>å‘èµ·æ–¹å®šæ—¶ä»»åŠ¡ï¼šé‡‡ç”¨â€œæŒ‡æ•°é€€é¿é‡è¯•â€ï¼ˆå¦‚10ç§’ã€20ç§’ã€40ç§’ã€80ç§’...ï¼‰ï¼Œé¿å…é¢‘ç¹é‡è¯•ç»™MQå’Œæ•°æ®åº“å¸¦æ¥å‹åŠ›ï¼›è®¾ç½®æœ€å¤§æŠ•é€’æ¬¡æ•°ï¼ˆå¦‚5æ¬¡ï¼‰ï¼Œè¶…è¿‡é˜ˆå€¼æ ‡è®°ä¸ºå¤±è´¥å¹¶å‘Šè­¦ï¼›</li>
<li>æ¶ˆæ¯é˜Ÿåˆ—æ¶ˆè´¹ï¼šé…ç½®åˆç†çš„é‡è¯•é—´éš”ï¼ˆå¦‚30ç§’ï¼‰ï¼Œè¶…è¿‡é‡è¯•æ¬¡æ•°åå°†æ¶ˆæ¯è½¬å…¥æ­»ä¿¡é˜Ÿåˆ—ï¼Œé¿å…å ç”¨æ­£å¸¸æ¶ˆæ¯é˜Ÿåˆ—èµ„æºã€‚</li>
</ul>
</li>
<li>
<p><strong>æ¶ˆæ¯æ¸…ç†ä¸å½’æ¡£</strong>ï¼šå®šæ—¶å½’æ¡£æˆ–åˆ é™¤â€œå·²æ¶ˆè´¹â€çŠ¶æ€çš„æ¶ˆæ¯ï¼ˆå¦‚å½’æ¡£3ä¸ªæœˆå‰çš„æ¶ˆæ¯ï¼‰ï¼Œé¿å…æœ¬åœ°æ¶ˆæ¯è¡¨è¿‡å¤§ï¼Œå½±å“æŸ¥è¯¢å’Œå†™å…¥æ€§èƒ½ï¼›</p>
</li>
<li>
<p><strong>äº‹åŠ¡éš”ç¦»çº§åˆ«é€‰æ‹©</strong>ï¼šå‘èµ·æ–¹æ•°æ®åº“å»ºè®®ä½¿ç”¨â€œè¯»å·²æäº¤ï¼ˆRead Committedï¼‰â€æˆ–æ›´é«˜çš„éš”ç¦»çº§åˆ«ï¼Œé¿å…å®šæ—¶ä»»åŠ¡è¯»å–åˆ°æœªæäº¤çš„æ¶ˆæ¯ï¼ˆè„è¯»ï¼‰ï¼›</p>
</li>
<li>
<p><strong>ç›‘æ§ä¸å‘Šè­¦æœºåˆ¶</strong>ï¼šå»ºç«‹æ¶ˆæ¯çŠ¶æ€ç›‘æ§é¢æ¿ï¼Œå®æ—¶ç›‘æ§â€œå¾…æŠ•é€’â€â€œæŠ•é€’å¤±è´¥â€â€œæ­»ä¿¡æ¶ˆæ¯â€çš„æ•°é‡ï¼›å¯¹â€œæŠ•é€’å¤±è´¥â€â€œæ­»ä¿¡æ¶ˆæ¯â€è®¾ç½®å‘Šè­¦ï¼ˆå¦‚çŸ­ä¿¡ã€é‚®ä»¶å‘Šè­¦ï¼‰ï¼Œç¡®ä¿åŠæ—¶äººå·¥ä»‹å…¥å¤„ç†ã€‚</p>
</li>
</ul>
<h3 data-id="heading-15">å…­ã€æœ¬åœ°æ¶ˆæ¯è¡¨ä¸å…¶ä»–åˆ†å¸ƒå¼äº‹åŠ¡æ–¹æ¡ˆçš„é€‰å‹å¯¹æ¯”</h3>
<p>åˆ†å¸ƒå¼äº‹åŠ¡æ–¹æ¡ˆçš„é€‰å‹æ ¸å¿ƒæ˜¯â€œåœºæ™¯åŒ¹é…+æˆæœ¬æƒè¡¡â€ï¼Œæˆ‘ä»¬å°†æœ¬åœ°æ¶ˆæ¯è¡¨ä¸å…¶ä»–ä¸»æµæ–¹æ¡ˆå¯¹æ¯”ï¼Œæ˜ç¡®é€‚ç”¨è¾¹ç•Œï¼š</p>













































<table><thead><tr><th>æ–¹æ¡ˆç±»å‹</th><th>ä¸€è‡´æ€§</th><th>æ€§èƒ½</th><th>ä¸šåŠ¡ä¾µå…¥æ€§</th><th>å¼€å‘ç»´æŠ¤æˆæœ¬</th><th>é€‚é…åœºæ™¯</th></tr></thead><tbody><tr><td>2PC/3PCï¼ˆå¼ºä¸€è‡´æ€§ï¼‰</td><td>å¼ºä¸€è‡´</td><td>ä½</td><td>ä½ï¼ˆä¾èµ–èµ„æºå±‚ï¼‰</td><td>ä¸­</td><td>çŸ­äº‹åŠ¡ã€ä½å¹¶å‘ã€ä¸€è‡´æ€§è¦æ±‚æé«˜ï¼ˆå¦‚é‡‘èæ ¸å¿ƒè½¬è´¦ï¼‰</td></tr><tr><td>TCCï¼ˆæŸ”æ€§äº‹åŠ¡ï¼‰</td><td>æœ€ç»ˆä¸€è‡´</td><td>é«˜</td><td>é«˜ï¼ˆæ”¹é€ ä¸šåŠ¡æ¥å£ï¼‰</td><td>é«˜</td><td>çŸ­äº‹åŠ¡ã€é«˜å¹¶å‘ã€è·¨å¤šç§èµ„æºï¼ˆå¦‚ç”µå•†ç§’æ€ä¸‹å•ï¼‰</td></tr><tr><td>SAGAï¼ˆæŸ”æ€§äº‹åŠ¡ï¼‰</td><td>æœ€ç»ˆä¸€è‡´</td><td>ä¸­é«˜</td><td>ä¸­ï¼ˆæ–°å¢è¡¥å¿äº‹åŠ¡ï¼‰</td><td>ä¸­é«˜</td><td>é•¿äº‹åŠ¡ã€å¤æ‚æµç¨‹ï¼ˆå¦‚è®¢å•å…¨æµç¨‹ã€ç‰©æµå±¥çº¦ï¼‰</td></tr><tr><td>æœ¬åœ°æ¶ˆæ¯è¡¨+MQï¼ˆæŸ”æ€§äº‹åŠ¡ï¼‰</td><td>æœ€ç»ˆä¸€è‡´</td><td>é«˜</td><td>æä½ï¼ˆæ–°å¢æ¶ˆæ¯è¡¨ï¼‰</td><td>ä½</td><td>ç®€å•å¼‚æ­¥åœºæ™¯ã€ä¸­å°å›¢é˜Ÿã€ä½æˆæœ¬éœ€æ±‚ï¼ˆå¦‚è®¢å•â†’ç§¯åˆ†ã€æ”¯ä»˜â†’ç‰©æµï¼‰</td></tr></tbody></table>
<h3 data-id="heading-16">ä¸ƒã€æ€»ç»“ï¼šæœ¬åœ°æ¶ˆæ¯è¡¨çš„æ ¸å¿ƒä»·å€¼ä¸è½åœ°å–èˆ</h3>
<p>æœ¬åœ°æ¶ˆæ¯è¡¨æ–¹æ¡ˆçš„æ ¸å¿ƒä»·å€¼åœ¨äºâ€œä»¥æœ€ä½çš„æˆæœ¬è§£å†³ç®€å•å¼‚æ­¥åœºæ™¯çš„æœ€ç»ˆä¸€è‡´æ€§é—®é¢˜â€â€”â€”å®ƒæ”¾å¼ƒäº†å¤æ‚çš„å¼ºä¸€è‡´æ€§ä¿éšœå’Œå¤æ‚æµç¨‹é€‚é…èƒ½åŠ›ï¼Œæ¢æ¥äº†â€œä½ä¾µå…¥ã€æ˜“å®ç°ã€é«˜å¯ç”¨â€çš„ç‰¹æ€§ï¼Œå®Œç¾å¥‘åˆä¸­å°å›¢é˜Ÿå’Œç®€å•ä¸šåŠ¡çš„éœ€æ±‚ã€‚å®ƒä¸æ˜¯æœ€â€œå…ˆè¿›â€çš„åˆ†å¸ƒå¼äº‹åŠ¡æ–¹æ¡ˆï¼Œä½†å´æ˜¯æœ€â€œåŠ¡å®â€çš„æ–¹æ¡ˆä¹‹ä¸€ã€‚</p>
<p>åœ¨å®é™…è½åœ°æ—¶ï¼Œæˆ‘ä»¬éœ€æ˜ç¡®ï¼šæœ¬åœ°æ¶ˆæ¯è¡¨çš„éš¾ç‚¹ä¸åœ¨äºâ€œæµç¨‹è®¾è®¡â€ï¼Œè€Œåœ¨äºâ€œç»†èŠ‚ä¼˜åŒ–â€ï¼ˆå¦‚å¹‚ç­‰æ€§ã€é‡è¯•ç­–ç•¥ã€æ¶ˆæ¯æ¸…ç†ï¼‰ã€‚å»ºè®®æ— éœ€è¿½æ±‚å¤æ‚çš„è‡ªå®šä¹‰å®ç°ï¼Œå¯åŸºäºæˆç†Ÿçš„æ¶ˆæ¯é˜Ÿåˆ—ï¼ˆå¦‚RocketMQçš„äº‹åŠ¡æ¶ˆæ¯åŠŸèƒ½ï¼Œæœ¬è´¨æ˜¯æœ¬åœ°æ¶ˆæ¯è¡¨çš„å°è£…ï¼‰å¿«é€Ÿè½åœ°ï¼Œå‡å°‘é‡å¤å¼€å‘ã€‚</p>
<p>æœ€åï¼Œå›å½’åˆ†å¸ƒå¼äº‹åŠ¡çš„æ ¸å¿ƒåŸåˆ™ï¼š<strong>æ²¡æœ‰æœ€ä¼˜æ–¹æ¡ˆï¼Œåªæœ‰æœ€é€‚é…ä¸šåŠ¡çš„æ–¹æ¡ˆ</strong>ã€‚è‹¥ä½ çš„ä¸šåŠ¡æ˜¯ç®€å•å¼‚æ­¥è·¨æœåŠ¡é€šçŸ¥ï¼Œä¸”å›¢é˜Ÿè¿½æ±‚ä½æˆæœ¬ã€ä½ä¾µå…¥ï¼Œæœ¬åœ°æ¶ˆæ¯è¡¨æ–¹æ¡ˆæ˜¯é¦–é€‰ï¼›è‹¥éœ€è¦å¤„ç†é«˜å¹¶å‘çŸ­äº‹åŠ¡ï¼Œé€‰æ‹©TCCï¼›è‹¥éœ€è¦å¤„ç†é•¿äº‹åŠ¡å¤æ‚æµç¨‹ï¼Œé€‰æ‹©SAGAï¼›è‹¥ä¸€è‡´æ€§è¦æ±‚æé«˜ï¼Œå¼ºä¸€è‡´æ€§æ–¹æ¡ˆä»æ˜¯åº•çº¿ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¤§æ•°æ®-196 scikit-learn KNN å®æˆ˜ï¼šKNeighborsClassifierã€kneighbors ä¸å­¦ä¹ æ›²çº¿é€‰æœ€ä¼˜ æ¡ˆä¾‹1çº¢é…’ æ¡ˆä¾‹2ä¹³è…º]]></title>    <link>https://juejin.cn/post/7588010346070867978</link>    <guid>https://juejin.cn/post/7588010346070867978</guid>    <pubDate>2025-12-27T01:56:12.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588010346070867978" data-draft-id="7587965800273575962" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¤§æ•°æ®-196 scikit-learn KNN å®æˆ˜ï¼šKNeighborsClassifierã€kneighbors ä¸å­¦ä¹ æ›²çº¿é€‰æœ€ä¼˜ æ¡ˆä¾‹1çº¢é…’ æ¡ˆä¾‹2ä¹³è…º"/> <meta itemprop="keywords" content="åç«¯,å¤§æ•°æ®,æœºå™¨å­¦ä¹ "/> <meta itemprop="datePublished" content="2025-12-27T01:56:12.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ­¦å­åº·"/> <meta itemprop="url" content="https://juejin.cn/user/149189314230039"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¤§æ•°æ®-196 scikit-learn KNN å®æˆ˜ï¼šKNeighborsClassifierã€kneighbors ä¸å­¦ä¹ æ›²çº¿é€‰æœ€ä¼˜ æ¡ˆä¾‹1çº¢é…’ æ¡ˆä¾‹2ä¹³è…º
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/149189314230039/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ­¦å­åº·
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-27T01:56:12.000Z" title="Sat Dec 27 2025 01:56:12 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">TL;DR</h2>
<ul>
<li>åœºæ™¯ï¼šç”¨ scikit-learn å¿«é€Ÿè½åœ° KNN åˆ†ç±»ï¼Œç†è§£ fit/predict/scoreã€kneighbors ä¸é€‰ Kã€‚</li>
<li>ç»“è®ºï¼šå•æ¬¡åˆ’åˆ†ä¸‹â€œæœ€ä¼˜ Kâ€ä¸ç¨³å®šï¼›ç”¨äº¤å‰éªŒè¯ + æ ‡å‡†åŒ– Pipeline æ‰èƒ½å·¥ç¨‹åŒ–å®š Kã€‚</li>
<li>äº§å‡ºï¼šä¸¤å¥—æ¡ˆä¾‹ä»£ç éª¨æ¶ + é‚»å±…æ£€ç´¢æ–¹æ³• + é€‰ K çš„å¯å¤ç°å®è·µæ¸…å•ä¸é”™è¯¯é€ŸæŸ¥ã€‚</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a1b37cc4bd6a4fdaa7deb433b1bae7e0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767405371&amp;x-signature=YqElGPzDYmDvayRDNOCs0JErsSI%3D" alt="å¤§æ•°æ®-196 scikit-learn KNN å®æˆ˜ï¼šKNeighborsClassifierã€kneighbors ä¸å­¦ä¹ æ›²çº¿é€‰æœ€ä¼˜ æ¡ˆä¾‹1çº¢é…’ æ¡ˆä¾‹2ä¹³è…ºç™Œ" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/52e3063a5ce648a2b5d762a296a76c90~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767405371&amp;x-signature=A%2Bwv2QpcoRWbQmgeiPIwI6G%2FqK8%3D" alt="å¤§æ•°æ®-196 scikit-learn KNN å®æˆ˜ï¼šKNeighborsClassifierã€kneighbors ä¸å­¦ä¹ æ›²çº¿é€‰æœ€ä¼˜ æ¡ˆä¾‹1çº¢é…’ æ¡ˆä¾‹2ä¹³è…ºç™Œ" loading="lazy"/></p>
<h2 data-id="heading-1">scikit-learn ç®—æ³•åº“å®ç°</h2>
<p>scikit-learnï¼ˆç®€ç§° sklearnï¼‰è‡ª 2007 å¹´ç”± David Cournapeau å‘èµ·ä»¥æ¥ï¼Œå·²ç»æˆä¸º Python ç”Ÿæ€ç³»ç»Ÿä¸­æœ€é‡è¦çš„æœºå™¨å­¦ä¹ åº“ä¹‹ä¸€ã€‚ä½œä¸º NumPy å’Œ SciPy ç”Ÿæ€ç³»ç»Ÿçš„é‡è¦ç»„æˆéƒ¨åˆ†ï¼Œsklearn ä¸ºæ•°æ®ç§‘å­¦å®¶å’Œæœºå™¨å­¦ä¹ å·¥ç¨‹å¸ˆæä¾›äº†å¼ºå¤§è€Œé«˜æ•ˆçš„å·¥å…·é›†ã€‚</p>
<p>åœ¨åŠŸèƒ½æ¶æ„ä¸Šï¼Œscikit-learn ä¸»è¦æ”¯æŒå››å¤§æ ¸å¿ƒæœºå™¨å­¦ä¹ ç®—æ³•é¢†åŸŸï¼š</p>
<ol>
<li><strong>åˆ†ç±»ç®—æ³•</strong>ï¼šåŒ…æ‹¬é€»è¾‘å›å½’ï¼ˆLogisticRegressionï¼‰ã€æ”¯æŒå‘é‡æœºï¼ˆSVCï¼‰ã€éšæœºæ£®æ—ï¼ˆRandomForestClassifierï¼‰ç­‰ï¼Œé€‚ç”¨äºå®¢æˆ·æµå¤±é¢„æµ‹ã€åƒåœ¾é‚®ä»¶è¯†åˆ«ç­‰åœºæ™¯</li>
<li><strong>å›å½’ç®—æ³•</strong>ï¼šå¦‚çº¿æ€§å›å½’ï¼ˆLinearRegressionï¼‰ã€å²­å›å½’ï¼ˆRidgeï¼‰ç­‰ï¼Œå¯ç”¨äºæˆ¿ä»·é¢„æµ‹ã€é”€é‡é¢„ä¼°ç­‰ä»»åŠ¡</li>
<li><strong>é™ç»´æŠ€æœ¯</strong>ï¼šä¸»æˆåˆ†åˆ†æï¼ˆPCAï¼‰ã€t-SNE ç­‰ç®—æ³•ï¼Œå¸®åŠ©å¤„ç†é«˜ç»´æ•°æ®å¯è§†åŒ–</li>
<li><strong>èšç±»ç®—æ³•</strong>ï¼šKå‡å€¼ï¼ˆKMeansï¼‰ã€DBSCAN ç­‰ï¼Œé€‚ç”¨äºç”¨æˆ·åˆ†ç¾¤ã€å¼‚å¸¸æ£€æµ‹ç­‰åº”ç”¨</li>
</ol>
<p>æ­¤å¤–ï¼Œscikit-learn è¿˜æä¾›ä¸‰å¤§å…³é”®åŠŸèƒ½æ¨¡å—ï¼š</p>
<ul>
<li><strong>ç‰¹å¾æå–</strong>ï¼šåŒ…æ‹¬æ–‡æœ¬ç‰¹å¾å‘é‡åŒ–ï¼ˆCountVectorizerï¼‰ã€TF-IDF è½¬æ¢ç­‰</li>
<li><strong>æ•°æ®é¢„å¤„ç†</strong>ï¼šæ ‡å‡†åŒ–ï¼ˆStandardScalerï¼‰ã€å½’ä¸€åŒ–ï¼ˆMinMaxScalerï¼‰ã€ç¼ºå¤±å€¼å¤„ç†ç­‰</li>
<li><strong>æ¨¡å‹è¯„ä¼°</strong>ï¼šäº¤å‰éªŒè¯ï¼ˆcross_val_scoreï¼‰ã€å¤šç§è¯„ä¼°æŒ‡æ ‡ï¼ˆaccuracy_score, f1_score ç­‰ï¼‰</li>
</ul>
<p>åœ¨å®é™…å·¥ç¨‹åº”ç”¨ä¸­ï¼Œç›´æ¥ä½¿ç”¨ Python åŸç”Ÿä»£ç ä»å¤´å®ç°æœºå™¨å­¦ä¹ ç®—æ³•å­˜åœ¨è¯¸å¤šæŒ‘æˆ˜ï¼š</p>
<ol>
<li>å¼€å‘å‘¨æœŸé•¿ï¼Œéœ€è¦å¤„ç†å¤§é‡åº•å±‚æ•°å­¦è¿ç®—å’Œä¼˜åŒ–é—®é¢˜</li>
<li>éš¾ä»¥ä¿è¯ä»£ç çš„å¥å£®æ€§å’Œè®¡ç®—æ•ˆç‡</li>
<li>ç¼ºä¹ç»Ÿä¸€çš„æ¥å£è®¾è®¡ï¼Œä¸åˆ©äºå›¢é˜Ÿåä½œå’Œæ¨¡å‹ç»´æŠ¤</li>
</ol>
<p>ç›¸æ¯”ä¹‹ä¸‹ï¼Œä½¿ç”¨ scikit-learn çš„æ ‡å‡†å·¥ä½œæµç¨‹æ›´åŠ é«˜æ•ˆå¯é ï¼š</p>
<ol>
<li>æ•°æ®é‡‡é›†åï¼Œé¦–å…ˆè¿›è¡Œæ¢ç´¢æ€§åˆ†æï¼ˆEDAï¼‰</li>
<li>æ ¹æ®æ•°æ®ç‰¹å¾ï¼ˆå¦‚çº¿æ€§/éçº¿æ€§ã€æ•°æ®è§„æ¨¡ã€ç‰¹å¾ç»´åº¦ç­‰ï¼‰é€‰æ‹©åˆé€‚çš„ç®—æ³•</li>
<li>é€šè¿‡ sklearn ç»Ÿä¸€çš„ API æ¥å£ï¼ˆfit/predict/transformï¼‰è°ƒç”¨ç®—æ³•</li>
<li>ä½¿ç”¨ç½‘æ ¼æœç´¢ï¼ˆGridSearchCVï¼‰æˆ–éšæœºæœç´¢ï¼ˆRandomizedSearchCVï¼‰ä¼˜åŒ–è¶…å‚æ•°</li>
<li>é€šè¿‡äº¤å‰éªŒè¯è¯„ä¼°æ¨¡å‹æ€§èƒ½ï¼Œæœ€ç»ˆå®ç°ç®—æ³•æ•ˆç‡ä¸æ•ˆæœçš„å¹³è¡¡</li>
</ol>
<p>ä¾‹å¦‚ï¼Œåœ¨ç”µå•†æ¨èç³»ç»Ÿå¼€å‘ä¸­ï¼Œå¯ä»¥ï¼š</p>
<ol>
<li>ä½¿ç”¨ sklearn çš„ KNN ç®—æ³•å®ç°ååŒè¿‡æ»¤</li>
<li>é€šè¿‡ Pipeline å°†ç‰¹å¾æ ‡å‡†åŒ–ã€é™ç»´å’Œåˆ†ç±»å™¨ç»„åˆ</li>
<li>åˆ©ç”¨ classification_report è¾“å‡ºç²¾ç¡®ç‡ã€å¬å›ç‡ç­‰æŒ‡æ ‡</li>
</ol>
<p>æ­£æ˜¯è¿™ç§æ¨¡å—åŒ–è®¾è®¡ã€ç»Ÿä¸€æ¥å£å’Œä¸°å¯Œçš„ç®—æ³•å®ç°ï¼Œä½¿ scikit-learn æˆä¸ºæœºå™¨å­¦ä¹ å®è·µä¸­çš„é¦–é€‰å·¥å…·åŒ…ï¼Œå¤§å¤§é™ä½äº†ç®—æ³•åº”ç”¨çš„é—¨æ§›ï¼Œæé«˜äº†å¼€å‘æ•ˆç‡ã€‚</p>
<h3 data-id="heading-2">è®¾è®¡åŸåˆ™</h3>
<p>ä¸€è‡´æ€§
æ‰€æœ‰å¯¹è±¡å…±äº«ä¸€ä¸ªç®€å•ä¸€è‡´çš„ç•Œé¢ï¼ˆæ¥å£ï¼‰</p>
<ul>
<li>ä¼°ç®—å™¨ï¼šfit()æ–¹æ³•ï¼ŒåŸºäºæ•°æ®ä¼°ç®—å‚æ•°çš„ä»»æ„å¯¹è±¡ï¼Œä½¿ç”¨çš„å‚æ•°æ˜¯ä¸€ä¸ªæ•°æ®é›†ï¼ˆå¯¹åº” Xï¼Œæœ‰ç›‘ç£ç®—æ³•è¿˜éœ€è¦ä¸€ä¸ªYï¼‰ï¼Œå¼•å¯¼ä¼°ç®—è¿‡ç¨‹çš„ä»»æ„å…¶ä»–å‚æ•°æˆä¸ºè¶…å‚æ•°ï¼Œå¿…é¡»è¢«è®¾ç½®ä¸ºå®ä¾‹å˜é‡ã€‚</li>
<li>è½¬æ¢å™¨ï¼štransform()æ–¹æ³•ï¼Œä½¿ç”¨ä¼°ç®—å™¨è½¬æ¢æ•°æ®é›†ï¼Œè½¬æ¢è¿‡ç¨‹ä¾èµ–äºå­¦ä¹ å‚æ•°ï¼Œå¯ä»¥ä½¿ç”¨ä¾¿æ·æ–¹å¼ï¼šfit_transform()ï¼Œç›¸å½“äºå…ˆ fit()å† transform()ï¼Œæœ‰æ—¶ä¼˜åŒ–è¿‡é€Ÿåº¦æ›´å¿«ã€‚</li>
<li>é¢„æµ‹å™¨ï¼špredict()æ–¹æ³•ï¼Œä½¿ç”¨ä¼°ç®—å™¨é¢„æµ‹æ–°æ•°æ®ï¼Œè¿”å›åŒ…å«é¢„æµ‹ç»“æœçš„æ•°æ®ï¼Œè¿˜æœ‰ score()æ–¹æ³•ï¼šç”¨äºåº¦é‡ç»™å®šæµ‹è¯•é›†çš„é¢„æµ‹æ•ˆæœçš„å¥½åï¼ˆè¿ç»­ y ä½¿ç”¨ R æ–¹ï¼Œåˆ†ç±» y ä½¿ç”¨å‡†ç¡®ç‡ accuracyï¼‰</li>
</ul>
<h3 data-id="heading-3">ç›‘æ§</h3>
<p>æ£€æŸ¥æ‰€æœ‰å‚æ•°ï¼Œæ‰€æœ‰ä¼°ç®—å™¨çš„è¶…å‚æ•°å¯ä»¥é€šè¿‡å…¬å…±å®ä¾‹å˜é‡è®¿é—®ï¼Œæ‰€æœ‰ä¼°ç®—å™¨çš„å­¦ä¹ å‚æ•°éƒ½å¯ä»¥é€šè¿‡æœ‰ä¸‹åˆ’çº¿åç¼€çš„å…¬å…±å®ä¾‹å˜é‡è®¿é—®ã€‚</p>
<h3 data-id="heading-4">é˜²æ­¢ç±»æ‰©æ•£</h3>
<p>å¯¹è±¡å‹å›ºå®šï¼Œæ•°æ®é›†è¢«è¡¨ç¤ºä¸º Numpy æ•°ç»„æˆ– Scipy ç¨€ç–çŸ©é˜µï¼Œè¶…æƒ¨æ˜¯æ™®é€šçš„ Pythonå­—ç¬¦æˆ–æ•°å­—ã€‚</p>
<h3 data-id="heading-5">åˆæˆ</h3>
<p>ç°æœ‰çš„æ„å»ºå°½å¯èƒ½é‡ç”¨ï¼Œå¯ä»¥è½»æ¾åˆ›å»ºä¸€ä¸ªæµæ°´çº¿ Piplineã€‚</p>
<h3 data-id="heading-6">åˆæˆé»˜è®¤å€¼</h3>
<p>å¤§å¤šå‚æ•°æä¾›åˆç†é»˜è®¤å€¼ï¼Œå¯ä»¥è½»æ¾æ­å»ºä¸€ä¸ªåŸºæœ¬çš„å·¥ä½œç³»ç»Ÿã€‚</p>
<h4 data-id="heading-7">æ¡ˆä¾‹1ï¼šçº¢é…’</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> sklearn.neighbors <span class="hljs-keyword">import</span> KNeighborsClassifier

<span class="hljs-comment"># 0 ä»£è¡¨ â€œé»‘çš®è¯ºâ€ï¼Œ1 ä»£è¡¨ â€œèµ¤éœç â€</span>
clf = KNeighborsClassifier(n_neighbors = <span class="hljs-number">3</span>)
clf = clf.fit(wine_data.iloc[:,<span class="hljs-number">0</span>:<span class="hljs-number">2</span>], wine_data.iloc[:,-<span class="hljs-number">1</span>])
result = clf.predict([[<span class="hljs-number">12.8</span>,<span class="hljs-number">4.1</span>]]) <span class="hljs-comment"># è¿”å›é¢„æµ‹çš„æ ‡ç­¾</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"result: <span class="hljs-subst">{result}</span>"</span>)

<span class="hljs-comment"># å¯¹æ¨¡å‹è¿›è¡Œä¸€ä¸ªè¯„ä¼°ï¼Œæ¥å£scoreè¿”å›é¢„æµ‹çš„å‡†ç¡®ç‡</span>
score = clf.score([[<span class="hljs-number">12.8</span>,<span class="hljs-number">4.1</span>]],[<span class="hljs-number">0</span>])
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"score: <span class="hljs-subst">{score}</span>"</span>)

<span class="hljs-built_in">print</span>(clf.predict_proba([[<span class="hljs-number">12.8</span>,<span class="hljs-number">4.1</span>]]))

</code></pre>
<p>æ‰§è¡Œç»“æœå¦‚ä¸‹å›¾æ˜¯ï¼š
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a47616495cb940939d5282545463e487~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767405371&amp;x-signature=Ja9JAPiuWB%2BJ4jGfOagezLxqyn4%3D" alt="sklearn Kè¿‘é‚»ç®—æ³•" loading="lazy"/></p>
<h4 data-id="heading-8">æ¡ˆä¾‹2ï¼šä¹³è…ºç™Œ</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> sklearn.neighbors <span class="hljs-keyword">import</span> KNeighborsClassifier
<span class="hljs-keyword">from</span> sklearn.datasets <span class="hljs-keyword">import</span> load_breast_cancer
<span class="hljs-keyword">from</span> sklearn.model_selection <span class="hljs-keyword">import</span> train_test_split

<span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd
<span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np
<span class="hljs-comment">#è¯»å–æ•°æ®é›†</span>
data = load_breast_cancer()
<span class="hljs-comment">#DateFrameæ ¼å¼æ˜¾ç¤º</span>
X = data.data
y = data.target
name = [<span class="hljs-string">'å¹³å‡åŠå¾„'</span>,<span class="hljs-string">'å¹³å‡çº¹ç†'</span>,<span class="hljs-string">'å¹³å‡å‘¨é•¿'</span>,<span class="hljs-string">'å¹³å‡é¢ç§¯'</span>,
<span class="hljs-string">'å¹³å‡å…‰æ»‘åº¦'</span>,<span class="hljs-string">'å¹³å‡ç´§å‡‘åº¦'</span>,<span class="hljs-string">'å¹³å‡å‡¹åº¦'</span>,
<span class="hljs-string">'å¹³å‡å‡¹ç‚¹'</span>,<span class="hljs-string">'å¹³å‡å¯¹ç§°'</span>,<span class="hljs-string">'å¹³å‡åˆ†å½¢ç»´æ•°'</span>,
<span class="hljs-string">'åŠå¾„è¯¯å·®'</span>,<span class="hljs-string">'çº¹ç†è¯¯å·®'</span>,<span class="hljs-string">'å‘¨é•¿è¯¯å·®'</span>,<span class="hljs-string">'é¢ç§¯è¯¯å·®'</span>,
<span class="hljs-string">'å¹³æ»‘åº¦è¯¯å·®'</span>,<span class="hljs-string">'ç´§å‡‘åº¦è¯¯å·®'</span>,<span class="hljs-string">'å‡¹åº¦è¯¯å·®'</span>,
<span class="hljs-string">'å‡¹ç‚¹è¯¯å·®'</span>,<span class="hljs-string">'å¯¹ç§°è¯¯å·®'</span>,
<span class="hljs-string">'åˆ†å½¢ç»´æ•°è¯¯å·®'</span>,<span class="hljs-string">'æœ€å·®åŠå¾„'</span>,<span class="hljs-string">'æœ€å·®çº¹ç†'</span>,
<span class="hljs-string">'æœ€å·®çš„è¾¹ç•Œ'</span>,<span class="hljs-string">'æœ€å·®çš„åŒºåŸŸ'</span>,<span class="hljs-string">'æœ€å·®çš„å¹³æ»‘åº¦'</span>,
<span class="hljs-string">'æœ€å·®çš„ç´§å‡‘æ€§'</span>,<span class="hljs-string">'æœ€å·®çš„å‡¹é™·'</span>,<span class="hljs-string">'æœ€å·®çš„å‡¹ç‚¹'</span>,
<span class="hljs-string">'æœ€å·®çš„å¯¹ç§°æ€§'</span>,<span class="hljs-string">'æœ€å·®çš„åˆ†å½¢ç»´æ•°'</span>,<span class="hljs-string">'æ‚£ç—…å¦'</span>]
data=np.concatenate((X,y.reshape(-<span class="hljs-number">1</span>,<span class="hljs-number">1</span>)),axis=<span class="hljs-number">1</span>)
table=pd.DataFrame(data=data,columns=name)
table.head()

<span class="hljs-comment"># åˆ’åˆ†è®­ç»ƒé›†å’Œæµ‹è¯•é›† #30%æ•°æ®ä½œä¸ºè®­ç»ƒé›†</span>
Xtrain,Xtest,Ytrain,Ytest = train_test_split(X,y,test_size=<span class="hljs-number">0.2</span>,random_state=<span class="hljs-number">420</span>)
<span class="hljs-comment"># å»ºç«‹æ¨¡å‹&amp;è¯„ä¼°æ¨¡å‹</span>
clf = KNeighborsClassifier(n_neighbors=<span class="hljs-number">4</span>)
<span class="hljs-comment"># å»ºç«‹åˆ†ç±»å™¨</span>
clf = clf.fit(Xtrain,Ytrain)
score = clf.score(Xtest,Ytest)
score
</code></pre>
<p>æ‰§è¡Œç»“æœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/819873c325864a66944131ea655fb2db~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767405371&amp;x-signature=Ap5J%2FaIPWVnaNySJS3BXo5cO4Fc%3D" alt="sklearn ä¹³è…ºç™Œæ¡ˆä¾‹" loading="lazy"/>
å¦‚ä½•ç”¨ä¸Šé¢åˆ†ç±»å™¨æ‹Ÿåˆç»“æœæ‰¾å‡ºç¦» Xtest ä¸­ç¬¬ 20 è¡Œå’Œç¬¬ 30 è¡Œæœ€è¿‘çš„ 4 ä¸ªâ€œç‚¹â€?</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># æŸ¥æ‰¾ç‚¹çš„Ké‚»å±…ã€‚è¿”å›æ¯ä¸ªç‚¹çš„é‚»å±…çš„ä¸ä¹‹çš„è·ç¦»å’Œç´¢å¼•å€¼ã€‚</span>
clf.kneighbors(Xtest[[<span class="hljs-number">20</span>,<span class="hljs-number">30</span>],:],return_distance=<span class="hljs-literal">True</span>)
</code></pre>
<p>æŸ¥è¯¢ç»“æœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5c2b2eff9e6649b7a549f6ccac366d6d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767405371&amp;x-signature=3P%2BGRyusnB43AY%2BTxk4RigwcT70%3D" alt="sklearn kè¿‘é‚»è¾“å‡ºç»“æœ" loading="lazy"/></p>
<h3 data-id="heading-9">é€‰æ‹©æœ€ä¼˜Kå€¼</h3>
<p>KNN ä¸­çš„ä¸€ä¸ªè¶…å‚æ•°ï¼Œæ‰€è°“â€œè¶…å‚æ•°â€ï¼Œå°±æ˜¯éœ€è¦äººä¸ºè¾“å…¥ï¼Œç®—æ³•ä¸èƒ½é€šè¿‡ç›´æ¥è®¡ç®—å¾—å‡ºè¿™ä¸ªå‚æ•°ï¼ŒKNN ä¸­çš„ K ä»£è¡¨çš„æ˜¯è·ç¦»éœ€è¦åˆ†ç±»çš„æµ‹è¯•ç‚¹ X æœ€è¿‘çš„ K ä¸ªæ ·æœ¬ï¼Œå¦‚æœä¸è¾“å…¥è¿™ä¸ªå€¼ï¼Œé‚£ä¹ˆç®—æ³•ä¸­é‡è¦éƒ¨åˆ†â€œé€‰å‡º K ä¸ªæœ€è¿‘é‚»â€å°±æ— æ³•å®ç°ã€‚
ä» KNN çš„åŸç†ä¸­å¯è§ï¼Œæ˜¯å¦èƒ½å¤Ÿç¡®è®¤åˆé€‚çš„ K å€¼å¯¹ç®—æ³•æœ‰æå¤§çš„å½±å“ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/45d413c6ac364e4ba2cc7fda96ac80b7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767405371&amp;x-signature=ZfqcNXGHigY6P2bUPYAzESEg6O8%3D" alt="KNN è¶…å‚æ•°" loading="lazy"/>
å¦‚æœé€‰æ‹©çš„ Kå€¼è¾ƒå°ï¼Œå°±ç›¸å½“äºè¾ƒå°çš„é¢†åŸŸä¸­çš„è®­ç»ƒå®ä¾‹è¿›è¡Œé¢„æµ‹ï¼Œè¿™æ—¶å€™åªæœ‰ä¸è¾“å…¥å®ä¾‹è¾ƒè¿‘çš„è®­ç»ƒå®ä¾‹æ‰ä¼šå¯¹é¢„æµ‹ç»“æœèµ·ä½œç”¨ï¼Œä½†ç¼ºç‚¹æ˜¯é¢„æµ‹ç»“æœä¼šå¯¹è¿‘é‚»çš„å®ä¾‹ç‚¹éå¸¸æ•æ„Ÿï¼Œå¦‚æœè¿‘é‚»çš„å®ä¾‹ç‚¹æ°å¥½æ˜¯å™ªå£°ï¼Œé¢„æµ‹å°±ä¼šå‡ºé”™ã€‚
ç›¸åçš„ï¼Œå¦‚æœé€‰æ‹©çš„ K å€¼è¾ƒå¤§ï¼Œå°±ç›¸å½“äºè¾ƒå¤§çš„é¢†åŸŸä¸­çš„è®­ç»ƒå®ä¾‹è¿›è¡Œé¢„æµ‹ï¼Œè¿™æ—¶ä¸è¾“å…¥å®ä¾‹è¾ƒè¿œçš„ï¼ˆä¸ç›¸ä¼¼çš„ï¼‰è®­ç»ƒå®ä¾‹ä¹Ÿä¼šå¯¹é¢„æµ‹èµ·ä½œç”¨ï¼Œä½¿é¢„æµ‹å‘ç”Ÿé”™è¯¯ã€‚å› æ­¤ï¼Œè¶…å‚æ•° K çš„é€‰å®šæ˜¯ KNN çš„å¤´å·é—®é¢˜ã€‚</p>
<h3 data-id="heading-10">å­¦ä¹ æ›²çº¿</h3>
<p>æˆ‘ä»¬æ€ä¹ˆæ ·é€‰æ‹©ä¸€ä¸ªæœ€ä½³çš„ K å€¼ï¼Ÿåœ¨è¿™é‡Œè¦ä½¿ç”¨æœºå™¨å­¦ä¹ ä¸­çš„ç¥å™¨ï¼šå‚æ•°å­¦ä¹ æ›²çº¿ï¼Œå‚æ•°å­¦ä¹ æ›²çº¿æ˜¯ä¸€æ¡ä»¥ä¸åŒçš„å‚æ•°å–å€¼ä¸ºæ¨ªåæ ‡ï¼Œä¸åŒå‚æ•°å–å€¼ä¸‹çš„æ¨¡å‹ç»“æœä¸ºçºµåæ ‡çš„æ›²çº¿ï¼Œæˆ‘ä»¬å¾€å¾€é€‰æ‹©æ¨¡å‹è¡¨ç°æœ€ä½³ç‚¹çš„å‚æ•°å–å€¼ä½œä¸ºè¿™ä¸ªå‚æ•°çš„å–å€¼ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># æ›´æ¢ä¸åŒçš„n_neighborså‚æ•°çš„å–å€¼ï¼Œè§‚å¯Ÿç»“æœçš„å˜åŒ–</span>
clf = KNeighborsClassifier(n_neighbors=<span class="hljs-number">7</span>)
clf = clf.fit(Xtrain,Ytrain)
score = clf.score(Xtest,Ytest)
score
</code></pre>
<p>æŸ¥çœ‹ç»“æœå¦‚ä¸‹ï¼š
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/702e3a32191c4fa2bfc391302d4b1b05~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767405371&amp;x-signature=qRlA4s9ShYF7wNBUGCqS3o%2FdQ60%3D" alt="Kè¿‘é‚»ç®—æ³• å­¦ä¹ æ›²çº¿" loading="lazy"/>
ç»˜åˆ¶å­¦ä¹ æ›²çº¿ï¼š</p>
<pre><code class="hljs language-python" lang="python">score = []
krange = <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,<span class="hljs-number">20</span>)
<span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> krange:
clf = KNeighborsClassifier(n_neighbors=i)
clf = clf.fit(Xtrain,Ytrain)
score.append(clf.score(Xtest,Ytest))
plt.plot(krange,score)
plt.show()
</code></pre>
<p>æ‰§è¡Œç»“æœå¦‚ä¸‹ï¼š
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fb84ef8cdd0f4c73b9fda24c2847c51f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767405371&amp;x-signature=ncVH3CmHlLjYcadiUQ7sxrla1M8%3D" alt="Kè¿‘é‚»å­¦ä¹ æ›²çº¿ç»˜åˆ¶" loading="lazy"/>
å›¾åƒå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/68c7f5c57a4341948635500ffe1b8f00~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767405371&amp;x-signature=Tutrs2Hd8UIjSzQTC8xdatQjGDM%3D" alt="Kè¿‘é‚»å­¦ä¹ æ›²çº¿ç»˜åˆ¶" loading="lazy"/>
é‚£ä¹ˆä¸Šå›¾ä¸­ K ä¸ºå¤šå°‘çš„æ—¶å€™åˆ†å€¼æœ€é«˜å‘¢ï¼Ÿ</p>
<pre><code class="hljs language-shell" lang="shell">score.index(max(score))+1
</code></pre>
<p>æ‰§è¡Œç»“æœå¦‚ä¸‹æ‰€ç¤ºï¼š
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fe0a07a22b214e47b16d87120d4724f6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767405371&amp;x-signature=ujwduRSOcmovunXakNNowueMdIw%3D" alt="Kè¿‘é‚»å­¦ä¹ æ›²çº¿è¾“å‡ºKå€¼" loading="lazy"/>
ä½†æ˜¯è¿™ä¸ªæ—¶å€™ä¹Ÿä¼šæœ‰é—®é¢˜ï¼Œå¦‚æœéšæœºåˆ’åˆ†çš„æ•°æ®é›†å˜åŒ–çš„è¯ï¼Œå¾—åˆ†æœ€é«˜çš„K å€¼ä¹Ÿä¼šå‘ç”Ÿå˜åŒ–ã€‚</p>
<pre><code class="hljs language-python" lang="python">Xtrain,Xtest,Ytrain,Ytest = train_test_split(X,y,test_size=<span class="hljs-number">0.2</span>,random_state=<span class="hljs-number">421</span>)
score = []
krange = <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,<span class="hljs-number">20</span>)
<span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> krange:
    clf = KNeighborsClassifier(n_neighbors=i)
    clf = clf.fit(Xtrain,Ytrain)
    score.append(clf.score(Xtest,Ytest))
plt.plot(krange,score)
plt.show()
</code></pre>
<p>æ‰§è¡Œç»“æœå¦‚ä¸‹æ‰€ç¤ºï¼š
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ffcfc484fe134274912cb9f1a9558e4d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767405371&amp;x-signature=dTOGR9%2FeghqjH6eC5nZKjF%2F26yA%3D" alt="Kè¿‘é‚»å­¦ä¹ è®­ç»ƒ" loading="lazy"/>
è¾“å‡ºçš„å›¾ç‰‡çš„æ˜¯ï¼š
![Kè¿‘é‚»å­¦ä¹ è®­ç»ƒ]](<a href="https://link.juejin.cn?target=https%3A%2F%2Fi-blog.csdnimg.cn%2Fdirect%2F2a005d64a3e34884b0944b400ecd31de.png" target="_blank" title="https://i-blog.csdnimg.cn/direct/2a005d64a3e34884b0944b400ecd31de.png" ref="nofollow noopener noreferrer">i-blog.csdnimg.cn/direct/2a00â€¦</a>)
æ­¤æ—¶çš„K ä¸ºå¤šå°‘åˆ†å€¼æœ€é«˜ï¼Ÿ</p>
<pre><code class="hljs language-python" lang="python">score.index(<span class="hljs-built_in">max</span>(score))+<span class="hljs-number">1</span>
</code></pre>
<p>æ‰§è¡Œç»“æœå¦‚ä¸‹æ‰€ç¤ºï¼š
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/393c23544e5e4a0eb176be9d9ae78743~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767405371&amp;x-signature=gZiqk0mBDfVStEmAsdB1sMd%2BQkA%3D" alt="Kè¿‘é‚»ç¡®å®šæœ€é«˜çš„åˆ†å€¼æ˜¯å¤šå°‘" loading="lazy"/>
æ­¤æ—¶å°±æ— æ³•ç¡®å®šæœ€ä½³çš„ K å€¼äº†ï¼Œå°±æ— æ³•è¿›è¡Œä¸‹é¢çš„å»ºæ¨¡å·¥ä½œï¼Œæ€ä¹ˆåŠï¼Ÿ</p>
<h2 data-id="heading-11">é”™è¯¯é€ŸæŸ¥</h2>

































































<table><thead><tr><th>ç—‡çŠ¶</th><th>æ ¹å› å®šä½</th><th>ä¿®å¤</th><th>å­¦ä¹ æ›²çº¿</th></tr></thead><tbody><tr><td>ä»£ç ç›´æ¥æŠ¥ <code>IndentationError</code></td><td><code>for</code> å¾ªç¯ä½“æœªç¼©è¿›</td><td>è¡¥é½å¾ªç¯ä½“ç¼©è¿›ï¼›ç¡®ä¿ <code>clf = ... fit append</code> åœ¨å¾ªç¯å†…</td><td>è¿è¡Œåˆ° <code>for i in krange:</code> å¤„å³å¤±è´¥</td></tr><tr><td><code>NameError: name 'wine_data' is not defined</code></td><td>çº¢é…’æ¡ˆä¾‹æœªç»™å‡ºæ•°æ®è¯»å–/å˜é‡å®šä¹‰</td><td>åœ¨æ­£æ–‡å‰è¡¥å……æ•°æ®åŠ è½½ä¸ <code>DataFrame</code> æ„é€ ï¼›æˆ–æ”¹ç”¨ <code>sklearn</code> å†…ç½®æ•°æ®é›†/CSV è¯»å–ç¤ºä¾‹</td><td>æŒ‡å‘ <code>wine_data.iloc...</code></td></tr><tr><td><code>NameError: name 'plt' is not defined</code></td><td>ç»˜å›¾æœªå¯¼å…¥ <code>matplotlib</code></td><td>å¢åŠ  <code>import matplotlib.pyplot as plt</code></td><td>æŒ‡å‘ <code>plt.plot(...)</code></td></tr><tr><td><code>score</code> çœ‹èµ·æ¥â€œå¾ˆé«˜/å¾ˆä½â€ï¼Œä½†ä¸å¯ä¿¡</td><td>å•æ ·æœ¬æˆ–æå°æ ·æœ¬è°ƒç”¨ <code>score</code>ï¼Œç»Ÿè®¡æ„ä¹‰ä¸è¶³</td><td>ç”¨ç‹¬ç«‹æµ‹è¯•é›†ï¼ˆ<code>Xtest</code>/<code>Ytest</code>ï¼‰è¯„ä¼°ï¼›è‡³å°‘ä¸Šç™¾æ ·æœ¬æˆ–äº¤å‰éªŒè¯å‡å€¼</td><td><code>clf.score([[12.8,4.1]],[0])</code> è¿™ç±»å†™æ³•</td></tr><tr><td>â€œæœ€ä½³ Kâ€éš <code>random_state</code> æ”¹å˜</td><td>å•æ¬¡åˆ‡åˆ†å¯¼è‡´æ–¹å·®å¤§ï¼›æ•°æ®é‡/ç±»åˆ«åˆ†å¸ƒä½¿ç»“æœæ•æ„Ÿ</td><td>ç”¨ <code>StratifiedKFold</code> + <code>GridSearchCV</code>ï¼›æŠ¥å‘Šå‡å€¼Â±æ–¹å·®/ç½®ä¿¡åŒºé—´ï¼Œä¸æŠ¥å•ç‚¹å³°å€¼</td><td>å¯¹æ¯” <code>random_state=420</code> ä¸ <code>421</code> çš„å³°å€¼ K ä¸åŒ</td></tr><tr><td>KNN æ•ˆæœå¼‚å¸¸ã€K å¾ˆå¤§/å¾ˆå°æ‰å¥½</td><td>ç‰¹å¾æœªæ ‡å‡†åŒ–å¯¼è‡´è·ç¦»è¢«é‡çº²ä¸»å¯¼</td><td>ç”¨ <code>Pipeline(StandardScaler(), KNN)</code>ï¼›å¿…è¦æ—¶å°è¯•ä¸åŒè·ç¦»åº¦é‡ï¼ˆ<code>metric</code>ï¼‰</td><td>æ£€æŸ¥ç‰¹å¾é‡çº²ï¼ˆå¦‚é¢ç§¯/å‘¨é•¿é‡çº§è¿œå¤§äºåˆ†å½¢ç»´æ•°ï¼‰</td></tr><tr><td><code>kneighbors</code> ç»“æœçœ‹ä¸æ‡‚æˆ–ç´¢å¼•å¯¹ä¸ä¸ŠåŸè¡¨</td><td><code>Xtest</code> æ˜¯ <code>ndarray</code>ï¼Œç´¢å¼•è¿”å›çš„æ˜¯è®­ç»ƒé›†ç´¢å¼•ï¼ˆç›¸å¯¹ <code>Xtrain</code>ï¼‰</td><td>æ˜ç¡® <code>kneighbors(Xtest[[20,30]], ...)</code> è¿”å›çš„æ˜¯ <code>Xtrain</code> çš„é‚»å±…ç´¢å¼•ï¼›ç”¨è¿™äº›ç´¢å¼•å›æŸ¥ <code>Xtrain</code>/<code>Ytrain</code></td><td>è¾“å‡ºä¸º <code>(distances, indices)</code>ï¼Œ<code>indices</code> æŒ‡å‘è®­ç»ƒé›†æ ·æœ¬</td></tr><tr><td>æ–‡å­—æ³¨é‡Šä¸ä»£ç ä¸ä¸€è‡´</td><td>æ³¨é‡Šå†™â€œ30%æ•°æ®ä½œä¸ºè®­ç»ƒé›†â€ï¼Œä½† <code>test_size=0.2</code> å®é™…æ˜¯ 20% æµ‹è¯•é›†</td><td>ä»¥ä»£ç ä¸ºå‡†ï¼›ç»Ÿä¸€æ³¨é‡Šå£å¾„ï¼ˆè®­ç»ƒ/æµ‹è¯•æ¯”ä¾‹ï¼‰é¿å…è¯»è€…è¯¯è§£</td><td><code>train_test_split(... test_size=0.2 ...)</code></td></tr><tr><td><code>KNeighborsClassifier</code> é€Ÿåº¦æ…¢/å†…å­˜é«˜</td><td>å¤§æ ·æœ¬ä¸‹ KNN é¢„æµ‹ä¸ºè¿‘é‚»æ£€ç´¢ï¼Œå¤æ‚åº¦é«˜</td><td>é™ç»´ï¼ˆ<code>PCA</code>ï¼‰ã€è¿‘ä¼¼è¿‘é‚»ï¼ˆå¤–éƒ¨åº“ï¼‰ã€å‡å°‘ç‰¹å¾/æ ·æœ¬ï¼›æˆ–æ¢æ¨¡å‹ï¼ˆçº¿æ€§/æ ‘æ¨¡å‹ï¼‰</td><td>é¢„æµ‹è€—æ—¶éšæ ·æœ¬æ•°çº¿æ€§/è¿‘çº¿æ€§ä¸Šå‡</td></tr></tbody></table>
<h2 data-id="heading-12">å…¶ä»–ç³»åˆ—</h2>
<h3 data-id="heading-13">ğŸš€ AIç¯‡æŒç»­æ›´æ–°ä¸­ï¼ˆé•¿æœŸæ›´æ–°ï¼‰</h3>
<p><strong>AIç‚¼ä¸¹æ—¥å¿—-29 - å­—èŠ‚è·³åŠ¨ DeerFlow æ·±åº¦ç ”ç©¶æ¡†<em>æ–œä½“æ ·å¼</em>æ¶ ç§æœ‰éƒ¨ç½² æµ‹è¯•ä¸Šæ‰‹ æ¶æ„ç ”ç©¶</strong>ï¼ŒæŒç»­æ‰“é€ å®ç”¨AIå·¥å…·æŒ‡å—ï¼
<strong>AIç ”ç©¶-132 Java ç”Ÿæ€å‰æ²¿ 2025ï¼šSpringã€Quarkusã€GraalVMã€CRaC ä¸äº‘åŸç”Ÿè½åœ°</strong></p>
<h3 data-id="heading-14">ğŸ’» Javaç¯‡æŒç»­æ›´æ–°ä¸­ï¼ˆé•¿æœŸæ›´æ–°ï¼‰</h3>
<p><strong>Java-207 RabbitMQ Direct äº¤æ¢å™¨è·¯ç”±ï¼šRoutingKey ç²¾ç¡®åŒ¹é…ã€é˜Ÿåˆ—å¤šç»‘å®šä¸æ—¥å¿—åˆ†æµå®æˆ˜</strong>
MyBatis å·²å®Œç»“ï¼ŒSpring å·²å®Œç»“ï¼ŒNginxå·²å®Œç»“ï¼ŒTomcatå·²å®Œç»“ï¼Œåˆ†å¸ƒå¼æœåŠ¡å·²å®Œç»“ï¼ŒDubboå·²å®Œç»“ï¼ŒMySQLå·²å®Œç»“ï¼ŒMongoDBå·²å®Œç»“ï¼ŒNeo4jå·²å®Œç»“ï¼ŒFastDFS å·²å®Œç»“ï¼ŒOSSå·²å®Œç»“ï¼ŒGuavaCacheå·²å®Œç»“ï¼ŒEVCacheå·²å®Œç»“ï¼ŒRabbitMQæ­£åœ¨æ›´æ–°... æ·±å…¥æµ…å‡ºåŠ©ä½ æ‰“ç‰¢åŸºç¡€ï¼</p>
<h3 data-id="heading-15">ğŸ“Š å¤§æ•°æ®æ¿å—å·²å®Œæˆå¤šé¡¹å¹²è´§æ›´æ–°ï¼ˆ300ç¯‡ï¼‰ï¼š</h3>
<p>åŒ…æ‹¬ Hadoopã€Hiveã€Kafkaã€Flinkã€ClickHouseã€Elasticsearch ç­‰äºŒåä½™é¡¹æ ¸å¿ƒç»„ä»¶ï¼Œè¦†ç›–ç¦»çº¿+å®æ—¶æ•°ä»“å…¨æ ˆï¼
<strong>å¤§æ•°æ®-278 Spark MLib - åŸºç¡€ä»‹ç» æœºå™¨å­¦ä¹ ç®—æ³• æ¢¯åº¦æå‡æ ‘ GBDTæ¡ˆä¾‹ è¯¦è§£</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æˆä¸ºé«˜çº§ PHP å¼€å‘è€…éœ€è¦çš„æ€ç»´è½¬å˜]]></title>    <link>https://juejin.cn/post/7588007285546827782</link>    <guid>https://juejin.cn/post/7588007285546827782</guid>    <pubDate>2025-12-27T00:16:27.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588007285546827782" data-draft-id="7588007285546811398" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æˆä¸ºé«˜çº§ PHP å¼€å‘è€…éœ€è¦çš„æ€ç»´è½¬å˜"/> <meta itemprop="keywords" content="åç«¯,PHP"/> <meta itemprop="datePublished" content="2025-12-27T00:16:27.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="BingoGo"/> <meta itemprop="url" content="https://juejin.cn/user/993614242266077"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æˆä¸ºé«˜çº§ PHP å¼€å‘è€…éœ€è¦çš„æ€ç»´è½¬å˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/993614242266077/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    BingoGo
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-27T00:16:27.000Z" title="Sat Dec 27 2025 00:16:27 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">æˆä¸ºé«˜çº§ PHP å¼€å‘è€…éœ€è¦çš„æ€ç»´è½¬å˜</h2>
<p>æƒ³æˆä¸º PHP é«˜æ‰‹?å…ˆä»è°ƒæ•´æ€ç»´å¼€å§‹</p>
<p>æƒ³æˆä¸ºä¸“ä¸šçš„ PHP å¼€å‘è€…?è¿™å¾ˆå¥½ã€‚ä½†åœ¨æ·±å…¥ç ”ç©¶ PHP è¯­æ³•æˆ–æœ€æ–°æ¡†æ¶ä¹‹å‰,æœ‰ä¸€ä»¶äº‹ä½ éœ€è¦æ˜ç¡®:ä½ çš„æ€ç»´æ–¹å¼ã€‚</p>
<p>äº‹å®ä¸Š,è¿™ä¸ä»…ä»…æ˜¯å†™ä»£ç â€”â€”æˆä¸º PHP ä¸“ä¸šäººå£«æ„å‘³ç€ç”¨ä¸åŒçš„æ–¹å¼æ€è€ƒã€‚è¿™å…³ä¹ä½ å¦‚ä½•å¤„ç†é—®é¢˜ã€å¦‚ä½•ä¸ä»–äººåä½œ,ä»¥åŠå¦‚ä½•æˆé•¿ã€‚å½“ç„¶,æ·±å…¥äº†è§£ PHP å¾ˆé‡è¦,ä½†æ­£ç¡®çš„æ€ç»´æ–¹å¼æ‰æ˜¯åœ¨ PHP é¢†åŸŸè„±é¢–è€Œå‡ºçš„çœŸæ­£å…³é”®ã€‚</p>
<p>æœ¬æ–‡å°†è®¨è®ºèƒ½è®©ä½ ä» PHP æ–°æ‰‹æˆé•¿ä¸ºä¸“ä¸šå¼€å‘è€…çš„å…³é”®æ€ç»´è½¬å˜ã€‚å‡†å¤‡å¥½æå‡äº†å—?å¼€å§‹å§ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fcatchadmin.com%2Fpost%2F2025-12%2Fthe-mindset-shifts-you-need-to-become-a-rockstar-php-developer" target="_blank" title="https://catchadmin.com/post/2025-12/the-mindset-shifts-you-need-to-become-a-rockstar-php-developer" ref="nofollow noopener noreferrer">åŸæ–‡é“¾æ¥ æˆä¸ºé«˜çº§ PHP å¼€å‘è€…éœ€è¦çš„æ€ç»´è½¬å˜</a></p>
<h3 data-id="heading-1">è½¬å˜ 1:ä»"åªæ˜¯å†™ä»£ç "åˆ°"è§£å†³å®é™…é—®é¢˜"</h3>
<p>å†™ä»£ç å¾ˆé…·,ä½†è§£å†³é—®é¢˜æ›´é…·</p>
<p>è¯´å®è¯:ä»»ä½•äººéƒ½èƒ½å†™ä»£ç ã€‚ä½†å†™å‡ºèƒ½è§£å†³å®é™…é—®é¢˜çš„ä»£ç ?è¿™æ‰æ˜¯å…³é”®æ‰€åœ¨ã€‚ä½œä¸ºåˆå­¦è€…,å¾ˆå®¹æ˜“è¿·å¤±åœ¨è¯­æ³•ç»†èŠ‚å’Œå‡½æ•°è°ƒç”¨ä¸­,ä½†é‡ç‚¹æ˜¯:ç¼–ç åªæ˜¯å·¥å…·ã€‚ä½œä¸º PHP å¼€å‘è€…,ä½ çš„å·¥ä½œä¸ä»…ä»…æ˜¯æ•²ä»£ç â€”â€”è€Œæ˜¯ä»¥æœ€ä½³æ–¹å¼è§£å†³é—®é¢˜ã€‚</p>
<p><strong>æŠ€æœ¯å®è·µ:åœ¨ç¼–ç å‰å…ˆåˆ†è§£é—®é¢˜</strong></p>
<p>åœ¨æ‰“å¼€ä»£ç ç¼–è¾‘å™¨ä¹‹å‰,å…ˆå°†é—®é¢˜åˆ†è§£æˆå¯ç®¡ç†çš„å°å—ã€‚ä½¿ç”¨æµç¨‹å›¾æˆ–ä¼ªä»£ç ç­‰å·¥å…·æ¥è§„åˆ’é€»è¾‘ã€‚è¿™ç§æ–¹æ³•ä¸ä»…èƒ½ç†æ¸…æ€è·¯,è¿˜èƒ½å¸®ä½ å°½æ—©å‘ç°è¾¹ç•Œæƒ…å†µå’Œæ½œåœ¨é™·é˜±ã€‚</p>
<p>ç¤ºä¾‹:
æ„å»ºè´­ç‰©è½¦æ—¶,å…ˆä¸ºæ·»åŠ å•†å“ã€è®¡ç®—æ€»ä»·å’Œç®¡ç†ä¼šè¯æŒä¹…åŒ–ç¼–å†™ä¼ªä»£ç ã€‚ç„¶ååœ¨ PHP ä¸­æœ‰æ¡ä¸ç´Šåœ°å®ç°æ¯ä¸€æ­¥ã€‚ä¾‹å¦‚:</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-comment">// Pseudocode: Add item to cart</span>
<span class="hljs-keyword">if</span> (!<span class="hljs-keyword">isset</span>(<span class="hljs-variable">$_SESSION</span>[<span class="hljs-string">'cart'</span>])) {
    <span class="hljs-variable">$_SESSION</span>[<span class="hljs-string">'cart'</span>] = <span class="hljs-keyword">array</span>();
}
<span class="hljs-title function_ invoke__">array_push</span>(<span class="hljs-variable">$_SESSION</span>[<span class="hljs-string">'cart'</span>], <span class="hljs-variable">$item</span>);
</code></pre>
<p>è¿™ç§ç»“æ„åŒ–æ–¹æ³•å°†ç¼–ç è½¬å˜ä¸ºè§£å†³é—®é¢˜,è€Œä¸ä»…ä»…æ˜¯éšæ„å†™ä»£ç ã€‚</p>
<h3 data-id="heading-2">è½¬å˜ 2:ä»"å¤åˆ¶ç²˜è´´ç¼–ç "åˆ°"ç†è§£å¹¶æŒæ§ä½ çš„ä»£ç "</h3>
<p>åˆ«å†å·æ‡’å¤åˆ¶ç²˜è´´äº†(æˆ‘ä»¬éƒ½ç»å†è¿‡)</p>
<p>è¿™å¾ˆè¯±äºº,å¯¹å§?åœ¨ Stack Overflow ä¸Šæ‰¾åˆ°å¿«é€Ÿè§£å†³æ–¹æ¡ˆ,å¤åˆ¶ç²˜è´´ä»£ç ,ç„¶åæ”¶å·¥ã€‚ä½†ç°å®æ˜¯:è¿™åœ¨çŸ­æœŸå†…å¯èƒ½æœ‰æ•ˆ,ä½†ä»é•¿è¿œæ¥çœ‹æ˜¯ç¾éš¾ã€‚å¦‚æœä½ ä¸ç†è§£æ­£åœ¨ä½¿ç”¨çš„ä»£ç ,å°±ä¼šé‡åˆ°æ— æ³•ä¿®å¤çš„é—®é¢˜â€”â€”æ›´ç³Ÿçš„æ˜¯,ä½ ä¼šé”™è¿‡å­¦ä¹ å¦‚ä½•ç¼–å†™çœŸæ­£é€‚åˆä½ çš„ä»£ç çš„æœºä¼šã€‚</p>
<p><strong>æŠ€æœ¯å®è·µ:é˜…è¯»æ–‡æ¡£å¹¶åœ¨æœ¬åœ°æµ‹è¯•</strong></p>
<p>ä¸è¦ç›´æ¥å¤åˆ¶ç²˜è´´,è€Œæ˜¯å…ˆé˜…è¯»æ–‡æ¡£ã€‚è¿™å¯¹ç†è§£å‡½æ•°å’Œåº“çš„å·¥ä½œåŸç†è‡³å…³é‡è¦ã€‚ä¸€æ—¦æŒæ¡äº†æ¦‚å¿µ,å°±åœ¨éš”ç¦»ç¯å¢ƒä¸­æµ‹è¯•å®ƒ(ä½¿ç”¨ PHP FPM æˆ– Xdebug ç­‰å·¥å…·)æ¥è§‚å¯Ÿå®ƒçš„è¡Œä¸ºã€‚</p>
<p>ç¤ºä¾‹:
åœ¨ä½¿ç”¨ç¬¬ä¸‰æ–¹ API ä¹‹å‰,å½»åº•é˜…è¯»å…¶æ–‡æ¡£ã€‚å°è¯•ç®€å•çš„ curl è¯·æ±‚æ¥æŸ¥çœ‹æ•°æ®æ ¼å¼ä»¥åŠ PHP å¦‚ä½•å¤„ç†å®ƒã€‚ä¸è¦åªä¾èµ–æ•™ç¨‹â€”â€”è‡ªå·±åŠ¨æ‰‹è¯•è¯•ã€‚ä»¥ä¸‹æ˜¯åœ¨ PHP ä¸­å‘ API å‘èµ·è¯·æ±‚çš„å¿«é€Ÿç¤ºä¾‹:</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-comment">// Example: Using cURL to send a GET request</span>
<span class="hljs-variable">$ch</span> = <span class="hljs-title function_ invoke__">curl_init</span>();
<span class="hljs-title function_ invoke__">curl_setopt</span>(<span class="hljs-variable">$ch</span>, CURLOPT_URL, <span class="hljs-string">"https://api.example.com/data"</span>);
<span class="hljs-title function_ invoke__">curl_setopt</span>(<span class="hljs-variable">$ch</span>, CURLOPT_RETURNTRANSFER, <span class="hljs-number">1</span>);
<span class="hljs-variable">$response</span> = <span class="hljs-title function_ invoke__">curl_exec</span>(<span class="hljs-variable">$ch</span>);
<span class="hljs-title function_ invoke__">curl_close</span>(<span class="hljs-variable">$ch</span>);
<span class="hljs-variable">$data</span> = <span class="hljs-title function_ invoke__">json_decode</span>(<span class="hljs-variable">$response</span>, <span class="hljs-literal">true</span>);
<span class="hljs-title function_ invoke__">print_r</span>(<span class="hljs-variable">$data</span>);
</code></pre>
<p>ç°åœ¨,ä½ ç†è§£äº†è¯·æ±‚è¿‡ç¨‹ä»¥åŠ API å¦‚ä½•å“åº”ã€‚</p>
<h3 data-id="heading-3">è½¬å˜ 3:ä»"ç‹¬ç«‹å¼€å‘"åˆ°"å›¢é˜Ÿåä½œ"</h3>
<p>ä½ ä¸æ˜¯ä¸€ä¸ªäººåœ¨æˆ˜æ–—</p>
<p>æ˜¯çš„,ç‹¬è‡ªå®Œæˆå°é¡¹ç›®ä¸€å¼€å§‹æ„Ÿè§‰å¾ˆå¥½ã€‚ä½†ä¸€æ—¦è¿›å…¥ä¸“ä¸šé¢†åŸŸ,ç¼–ç å°±å˜æˆäº†å›¢é˜Ÿè¿åŠ¨ã€‚ä½œä¸º PHP å¼€å‘è€…,ä½ ç»å¸¸ä¼šä¸å‰ç«¯å¼€å‘è€…ã€æ•°æ®åº“ç®¡ç†å‘˜ã€è®¾è®¡å¸ˆ,æœ‰æ—¶ç”šè‡³æ˜¯é¡¹ç›®ç»ç†ä¸€èµ·å·¥ä½œã€‚ä½ ä¸å†æ˜¯ä¸€æ”¯å•äººå†›é˜Ÿâ€”â€”ä½ æ˜¯æ›´å¤§å›¾æ™¯çš„ä¸€éƒ¨åˆ†ã€‚</p>
<p><strong>æŠ€æœ¯å®è·µ:è®¤çœŸä½¿ç”¨ç‰ˆæœ¬æ§åˆ¶(Git)</strong></p>
<p>åä½œæ„å‘³ç€å…±äº«ä»£ç å’Œè·Ÿè¸ªå˜æ›´ã€‚è¿™å°±æ˜¯ç‰ˆæœ¬æ§åˆ¶çš„ç”¨æ­¦ä¹‹åœ°ã€‚å­¦ä¹  Git å¹¶ä½¿ç”¨ GitHub æˆ– GitLab ç­‰å¹³å°å°†ä½¿ä½ çš„ä»£ç åä½œé¡ºç•…é«˜æ•ˆã€‚ä½¿ç”¨ Git,ä½ å¯ä»¥è·Ÿè¸ªå˜æ›´ã€å›é€€åˆ°ä»¥å‰çš„ç‰ˆæœ¬,å¹¶åˆå¹¶å¤šä¸ªå¼€å‘è€…çš„ä»£ç è€Œä¸ä¼šæ··ä¹±ã€‚</p>
<p>ç¤ºä¾‹:</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># Initialize a new Git repository</span>
git init
<span class="hljs-comment"># Add files to the staging area</span>
git add .
<span class="hljs-comment"># Commit changes with a message</span>
git commit -m <span class="hljs-string">"Initial commit"</span>
<span class="hljs-comment"># Push changes to a remote repository</span>
git push origin main
</code></pre>
<p>Git ä¸ä»…é€‚ç”¨äºå¤§å‹å›¢é˜Ÿâ€”â€”å®ƒå¯¹ä¸ªäººé¡¹ç›®ä¹Ÿè‡³å…³é‡è¦,å› ä¸ºå®ƒèƒ½å¸®ä½ æœ‰æ•ˆç®¡ç†å˜æ›´ã€‚ä¸ä»–äººåˆä½œæ—¶,æ‹‰å–è¯·æ±‚å’Œä»£ç å®¡æŸ¥å¯¹äºç»´æŠ¤é«˜è´¨é‡ä»£ç è‡³å…³é‡è¦ã€‚</p>
<h3 data-id="heading-4">è½¬å˜ 4:ä»"è¿½é€æµè¡Œæ¡†æ¶"åˆ°"æŒæ¡åŸºç¡€"</h3>
<p>æ¡†æ¶å¾ˆæœ‰è¶£,ä½†åŸºç¡€æ‰æ˜¯æ°¸æ’çš„</p>
<p>Laravelã€Symfony å’Œ CodeIgniter ç­‰ PHP æ¡†æ¶å¾ˆæ£’,ä½†é—®é¢˜æ˜¯:åœ¨æ·±å…¥ç ”ç©¶ä»»ä½•æ¡†æ¶ä¹‹å‰,ä½ éœ€è¦å¯¹ PHP æœ¬èº«æœ‰æ‰å®çš„ç†è§£ã€‚åœ¨ä¸ç†è§£åŸºç¡€çš„æƒ…å†µä¸‹ç›´æ¥è·³å…¥æ¡†æ¶,å°±åƒåœ¨å­¦ä¼šèµ°è·¯ä¹‹å‰å°±æƒ³è·‘æ­¥ã€‚</p>
<p><strong>æŠ€æœ¯å®è·µ:ä»é›¶å¼€å§‹æ„å»ºé¡¹ç›®</strong></p>
<p>åœ¨æ·±å…¥ç ”ç©¶ Laravel ç­‰æ¡†æ¶ä¹‹å‰,èŠ±æ—¶é—´ä½¿ç”¨çº¯ PHP ä»é›¶å¼€å§‹æ„å»ºä¸€ä¸ªç®€å•é¡¹ç›®ã€‚ä¾‹å¦‚,æ„å»ºä¸€ä¸ªç®€å•çš„ CRUD(åˆ›å»ºã€è¯»å–ã€æ›´æ–°ã€åˆ é™¤)åº”ç”¨,è€Œä¸ä¾èµ–ä»»ä½•æ¡†æ¶ã€‚è¿™å°†å·©å›ºä½ å¯¹ä»¥ä¸‹å†…å®¹çš„ç†è§£:</p>
<ul>
<li>è·¯ç”±</li>
<li>æ•°æ®åº“äº¤äº’</li>
<li>ä¼šè¯å¤„ç†</li>
<li>ç”¨æˆ·è®¤è¯</li>
</ul>
<p>ç¤ºä¾‹:
ä»¥ä¸‹æ˜¯å¦‚ä½•ä½¿ç”¨ PHP å’Œ MySQL è®¾ç½®åŸºæœ¬ CRUD åº”ç”¨:</p>
<ol>
<li>åˆ›å»ºæ•°æ®åº“è¡¨:</li>
</ol>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> users (
  id <span class="hljs-type">INT</span> AUTO_INCREMENT <span class="hljs-keyword">PRIMARY</span> KEY,
  name <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">100</span>),
  email <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">100</span>)
);
</code></pre>
<ol start="2">
<li>ä½¿ç”¨ PHP æ’å…¥æ•°æ®:</li>
</ol>
<pre><code class="hljs language-php" lang="php"><span class="hljs-comment">// Establish a connection</span>
<span class="hljs-variable">$conn</span> = <span class="hljs-keyword">new</span> <span class="hljs-title function_ invoke__">mysqli</span>(<span class="hljs-string">"localhost"</span>, <span class="hljs-string">"username"</span>, <span class="hljs-string">"password"</span>, <span class="hljs-string">"database"</span>);
<span class="hljs-comment">// Check for connection error</span>
<span class="hljs-keyword">if</span> (<span class="hljs-variable">$conn</span>-&gt;connect_error) {
    <span class="hljs-keyword">die</span>(<span class="hljs-string">"Connection failed: "</span> . <span class="hljs-variable">$conn</span>-&gt;connect_error);
}
<span class="hljs-comment">// Insert data</span>
<span class="hljs-variable">$sql</span> = <span class="hljs-string">"INSERT INTO users (name, email) VALUES ('John Doe', 'john@example.com')"</span>;
<span class="hljs-keyword">if</span> (<span class="hljs-variable">$conn</span>-&gt;<span class="hljs-title function_ invoke__">query</span>(<span class="hljs-variable">$sql</span>) === <span class="hljs-literal">TRUE</span>) {
    <span class="hljs-keyword">echo</span> <span class="hljs-string">"New record created successfully"</span>;
} <span class="hljs-keyword">else</span> {
    <span class="hljs-keyword">echo</span> <span class="hljs-string">"Error: "</span> . <span class="hljs-variable">$sql</span> . <span class="hljs-string">"&lt;br&gt;"</span> . <span class="hljs-variable">$conn</span>-&gt;error;
}
<span class="hljs-variable">$conn</span>-&gt;<span class="hljs-title function_ invoke__">close</span>();
</code></pre>
<p>åœ¨ä¸ä½¿ç”¨æ¡†æ¶çš„æƒ…å†µä¸‹æ„å»ºé¡¹ç›®å°†è®©ä½ æ·±å…¥ç†è§£åº•å±‚å·¥ä½œåŸç†,è¿™ä¼šè®©ä½ åœ¨ä¹‹åä½¿ç”¨ Laravel ç­‰æ¡†æ¶æ—¶æ„Ÿè§‰è½»æ¾è®¸å¤šã€‚</p>
<h3 data-id="heading-5">è½¬å˜ 5:ä»"ä¸€æ¬¡æ€§å­¦ä¹ "åˆ°"æŒç»­å­¦ä¹ "</h3>
<p>å­¦ä¹ æ°¸æ— æ­¢å¢ƒ</p>
<p>å¦‚æœä½ è®¤ä¸ºå­¦å®Œ PHP å’Œå‡ ä¸ªæ¡†æ¶å°±"å®Œæˆ"äº†,é‚£å°±å†æƒ³æƒ³ã€‚æŠ€æœ¯ä¸–ç•Œå‘å±•è¿…é€Ÿ,ä½œä¸ºä¸“ä¸šå¼€å‘è€…,ä½ éœ€è¦è·Ÿä¸Šæ­¥ä¼ã€‚ä¼˜ç§€çš„ PHP å¼€å‘è€…ä¸ä»…ä»…æ˜¯çŸ¥é“å¦‚ä½•å†™ä»£ç çš„äºº;è€Œæ˜¯ä¸æ–­è¿›åŒ–ã€é€‚åº”å¹¶ä¿æŒå¥½å¥‡å¿ƒçš„äººã€‚</p>
<p><strong>æŠ€æœ¯å®è·µ:å…³æ³¨ PHP å˜æ›´æ—¥å¿—å’Œåšå®¢</strong></p>
<p>åŠæ—¶äº†è§£ PHP ç‰ˆæœ¬å’Œæœ€ä½³å®è·µã€‚è®¢é˜…åšå®¢,å…³æ³¨ PHP ç›¸å…³æ–°é—»,å¹¶é˜…è¯»æ¯ä¸ªæ–°ç‰ˆæœ¬å‘å¸ƒçš„å®˜æ–¹ PHP å˜æ›´æ—¥å¿—ã€‚äº†è§£ PHP 8 ä¸­çš„æ–°ç‰¹æ€§(å¦‚ JIT å’Œå±æ€§)å°†ä½¿ä½ çš„ä»£ç ä¿æŒç°ä»£å’Œé«˜æ•ˆã€‚</p>
<p>ç¤ºä¾‹:
åœ¨ PHP 8 ä¸­,match è¡¨è¾¾å¼å¯ä»¥æˆä¸º switch-case çš„æ›´ç®€æ´æ›¿ä»£æ–¹æ¡ˆã€‚å¦‚æœä½ è¿˜æ²¡è¯•è¿‡,ç°åœ¨å°±è¯•è¯•!</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-variable">$fruit</span> = <span class="hljs-string">'apple'</span>;
<span class="hljs-keyword">echo</span> <span class="hljs-keyword">match</span>(<span class="hljs-variable">$fruit</span>) {
    <span class="hljs-string">'apple'</span> =&gt; <span class="hljs-string">'It'</span>s an apple!<span class="hljs-string">',
    '</span>banana<span class="hljs-string">' =&gt; '</span>It<span class="hljs-string">'s a banana!'</span>,
    <span class="hljs-keyword">default</span> =&gt; <span class="hljs-string">'Unknown fruit'</span>,
};
</code></pre>
<p>è¿™ç§æ–°è¯­æ³•æ›´ç´§å‡‘,æ¶ˆé™¤äº†å¤šä¸ª case è¯­å¥çš„éœ€è¦ã€‚</p>
<h3 data-id="heading-6">è½¬å˜ 6:ä»"å¿«é€Ÿä¿®å¤"åˆ°"é•¿æœŸè§£å†³æ–¹æ¡ˆ"</h3>
<p>å†™å‡ºä½ ä¼šå¼•ä»¥ä¸ºè±ªçš„ä»£ç (è€Œä¸ä»…ä»…æ˜¯èƒ½ç”¨çš„ä»£ç )</p>
<p>æˆ‘ä»¬éƒ½ç»å†è¿‡ã€‚ç´§è¿«çš„æˆªæ­¢æ—¥æœŸã€å‹åŠ›,ä»¥åŠéšä¾¿æ‹¼å‡‘ç‚¹ä¸œè¥¿çš„è¯±æƒ‘ã€‚ä½†é—®é¢˜æ˜¯:ç¼–å†™å¿«é€Ÿè€Œç²—ç³™çš„ä»£ç ç°åœ¨å¯èƒ½å®Œæˆå·¥ä½œ,ä½†ä»¥åä¼šåå™¬ä½ ã€‚ç³Ÿç³•çš„ä»£ç ä¼šå¯¼è‡´ bugã€æ€§èƒ½é—®é¢˜å’Œå·¨å¤§çš„éº»çƒ¦ã€‚</p>
<p><strong>æŠ€æœ¯å®è·µ:ç¼–å†™å¯æµ‹è¯•ã€å¯æ‰©å±•çš„ä»£ç </strong></p>
<p>ç¡®ä¿ä»£ç ä¿æŒæ•´æ´å’Œå¯æ‰©å±•çš„ä¸€ç§æ–¹æ³•æ˜¯ç¼–å†™æµ‹è¯•ã€‚ä½¿ç”¨ PHPUnit è¿›è¡Œå•å…ƒæµ‹è¯•æ¥éªŒè¯ä»£ç çš„æ¯ä¸ªéƒ¨åˆ†æ˜¯å¦æŒ‰é¢„æœŸå·¥ä½œã€‚</p>
<p>ç¤ºä¾‹:
ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„ PHPUnit æµ‹è¯•,ç”¨äºæµ‹è¯•è®¡ç®—è´­ç‰©è½¦ä¸­å•†å“æ€»ä»·çš„æ–¹æ³•:</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-keyword">use</span> <span class="hljs-title">PHPUnit</span>\<span class="hljs-title">Framework</span>\<span class="hljs-title">TestCase</span>;
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ShoppingCartTest</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">TestCase</span>
</span>{
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">testTotalPrice</span>(<span class="hljs-params"/>)
    </span>{
        <span class="hljs-variable">$cart</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ShoppingCart</span>();
        <span class="hljs-variable">$cart</span>-&gt;<span class="hljs-title function_ invoke__">addItem</span>(<span class="hljs-string">'Apple'</span>, <span class="hljs-number">1.50</span>);
        <span class="hljs-variable">$cart</span>-&gt;<span class="hljs-title function_ invoke__">addItem</span>(<span class="hljs-string">'Banana'</span>, <span class="hljs-number">1.00</span>);
        
        <span class="hljs-variable language_">$this</span>-&gt;<span class="hljs-title function_ invoke__">assertEquals</span>(<span class="hljs-number">2.50</span>, <span class="hljs-variable">$cart</span>-&gt;<span class="hljs-title function_ invoke__">getTotalPrice</span>());
    }
}
</code></pre>
<p>å•å…ƒæµ‹è¯•æœ‰åŠ©äºå°½æ—©å‘ç° bug,å¹¶ç¡®ä¿åœ¨æ·»åŠ æ–°åŠŸèƒ½æ—¶,ç°æœ‰åŠŸèƒ½ä¸ä¼šå‡ºé—®é¢˜ã€‚</p>
<h3 data-id="heading-7">ç»“è¯­:è½¬å˜æ€ç»´,è®©ä½ çš„ PHP èŒä¸šç”Ÿæ¶¯è…¾é£</h3>
<p>æˆä¸º PHP ä¸“ä¸šäººå£«è¿œä¸æ­¢äºå†™ä»£ç â€”â€”è¿™å…³ä¹åƒé—®é¢˜è§£å†³è€…ä¸€æ ·æ€è€ƒã€æ·±å…¥ç†è§£ä½ çš„å·¥å…·ã€ä¸ä»–äººåä½œ,ä»¥åŠè‡´åŠ›äºæŒç»­æˆé•¿ã€‚å¦‚æœä½ ä»Šå¤©å¼€å§‹è¿›è¡Œè¿™äº›æ€ç»´è½¬å˜,ä½ å°†é¡ºåˆ©æˆä¸ºä¸€åæŠ¢æ‰‹çš„ PHP å¼€å‘è€…ã€‚</p>
<p>æ‰€ä»¥,ä¸‹æ¬¡åä¸‹æ¥ç¼–ç æ—¶,è®°ä½:è¿™ä¸ä»…ä»…æ˜¯å®Œæˆå·¥ä½œâ€”â€”è€Œæ˜¯ä»¥æ­£ç¡®çš„æ–¹å¼ã€ä¸“ä¸šçš„æ–¹å¼å»åšã€‚ç¥ç¼–ç æ„‰å¿«!</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Pythonæ€§èƒ½è°ƒä¼˜å®æˆ˜ï¼š5ä¸ªä¸æŠ¥é”™ä½†æ‹–æ…¢ä»£ç 300%çš„éšè—é™·é˜±ï¼ˆé™„è§£å†³æ–¹æ¡ˆï¼‰]]></title>    <link>https://juejin.cn/post/7587776610436841487</link>    <guid>https://juejin.cn/post/7587776610436841487</guid>    <pubDate>2025-12-27T00:16:50.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587776610436841487" data-draft-id="7587776610436825103" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Pythonæ€§èƒ½è°ƒä¼˜å®æˆ˜ï¼š5ä¸ªä¸æŠ¥é”™ä½†æ‹–æ…¢ä»£ç 300%çš„éšè—é™·é˜±ï¼ˆé™„è§£å†³æ–¹æ¡ˆï¼‰"/> <meta itemprop="keywords" content="åç«¯,å‰ç«¯,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-12-27T00:16:50.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é˜¿æ©™çš„ç™¾å®ç®±"/> <meta itemprop="url" content="https://juejin.cn/user/1638743356481367"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Pythonæ€§èƒ½è°ƒä¼˜å®æˆ˜ï¼š5ä¸ªä¸æŠ¥é”™ä½†æ‹–æ…¢ä»£ç 300%çš„éšè—é™·é˜±ï¼ˆé™„è§£å†³æ–¹æ¡ˆï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1638743356481367/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é˜¿æ©™çš„ç™¾å®ç®±
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-27T00:16:50.000Z" title="Sat Dec 27 2025 00:16:50 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0"><strong>Pythonæ€§èƒ½è°ƒä¼˜å®æˆ˜ï¼š5ä¸ªä¸æŠ¥é”™ä½†æ‹–æ…¢ä»£ç 300%çš„éšè—é™·é˜±ï¼ˆé™„è§£å†³æ–¹æ¡ˆï¼‰</strong></h2>
<h2 data-id="heading-1">å¼•è¨€</h2>
<p>Pythonä»¥å…¶ç®€æ´æ˜“ç”¨çš„è¯­æ³•å’Œå¼ºå¤§çš„ç”Ÿæ€ç³»ç»Ÿèµ¢å¾—äº†å¼€å‘è€…çš„é’çã€‚ç„¶è€Œï¼Œè¿™ç§â€œç®€å•â€èƒŒåå¾€å¾€éšè—ç€æ€§èƒ½é™·é˜±â€”â€”è®¸å¤šçœ‹ä¼¼æ— å®³çš„å†™æ³•å¯èƒ½åœ¨ä¸çŸ¥ä¸è§‰ä¸­è®©ä½ çš„ä»£ç è¿è¡Œæ•ˆç‡é™ä½æ•°å€ã€‚æ›´æ£˜æ‰‹çš„æ˜¯ï¼Œè¿™äº›é™·é˜±é€šå¸¸ä¸ä¼šå¼•å‘é”™è¯¯ï¼Œè€Œæ˜¯æ‚„æ— å£°æ¯åœ°æ‹–æ…¢ç¨‹åºï¼Œç›´åˆ°ä½ å‘ç°ç³»ç»Ÿå“åº”ç¼“æ…¢æˆ–èµ„æºè€—å°½æ—¶æ‰æ„è¯†åˆ°é—®é¢˜çš„ä¸¥é‡æ€§ã€‚</p>
<p>æœ¬æ–‡å°†æ­ç¤º5ä¸ªæœ€å¸¸è§çš„Pythonæ€§èƒ½é™·é˜±ï¼Œå®ƒä»¬å¯èƒ½è®©ä½ çš„ä»£ç è¿è¡Œé€Ÿåº¦é™ä½300%ç”šè‡³æ›´å¤šã€‚æ¯ä¸ªé™·é˜±éƒ½ä¼šé…ä»¥å®é™…æ¡ˆä¾‹ã€åŸç†åˆ†æå’Œç»è¿‡éªŒè¯çš„ä¼˜åŒ–æ–¹æ¡ˆã€‚æ— è®ºä½ æ˜¯æ­£åœ¨å¤„ç†å¤§å‹æ•°æ®é›†çš„å·¥ç¨‹å¸ˆï¼Œè¿˜æ˜¯éœ€è¦ä¼˜åŒ–Webåº”ç”¨å“åº”æ—¶é—´çš„å¼€å‘è€…ï¼Œè¿™äº›å®æˆ˜ç»éªŒéƒ½èƒ½å¸®åŠ©ä½ å†™å‡ºæ›´é«˜æ•ˆçš„Pythonä»£ç ã€‚</p>
<hr/>
<h2 data-id="heading-2">é™·é˜±1ï¼šä¸å½“ä½¿ç”¨å­—ç¬¦ä¸²æ‹¼æ¥</h2>
<h3 data-id="heading-3">é—®é¢˜ç°è±¡</h3>
<p>åœ¨å¾ªç¯ä¸­ä½¿ç”¨<code>+</code>æ“ä½œç¬¦æ‹¼æ¥å­—ç¬¦ä¸²æ˜¯è®¸å¤šåˆå­¦è€…çš„å¸¸è§åšæ³•ï¼š</p>
<pre><code class="hljs language-python" lang="python">result = <span class="hljs-string">""</span>
<span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">10000</span>):
    result += <span class="hljs-built_in">str</span>(i)
</code></pre>
<h3 data-id="heading-4">ä¸ºä»€ä¹ˆæ…¢ï¼Ÿ</h3>
<ul>
<li>Pythonå­—ç¬¦ä¸²æ˜¯ä¸å¯å˜å¯¹è±¡ï¼Œæ¯æ¬¡<code>+=</code>éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡å¹¶å¤åˆ¶åŸå†…å®¹</li>
<li>æ—¶é—´å¤æ‚åº¦ä»O(n)æ¶åŒ–åˆ°O(nÂ²)ï¼Œå®æµ‹åœ¨10ä¸‡æ¬¡æ‹¼æ¥æ—¶æ¯”ä¼˜åŒ–æ–¹æ¡ˆæ…¢40å€</li>
</ul>
<h3 data-id="heading-5">è§£å†³æ–¹æ¡ˆ</h3>
<p>ä½¿ç”¨<code>.join()</code>æ–¹æ³•æˆ–IOç¼“å†²åŒºï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># æ–¹æ¡ˆ1ï¼šç›´æ¥ç”Ÿæˆåˆ—è¡¨åæ‹¼æ¥</span>
parts = []
<span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">10000</span>):
    parts.append(<span class="hljs-built_in">str</span>(i))
result = <span class="hljs-string">""</span>.join(parts)

<span class="hljs-comment"># æ–¹æ¡ˆ2ï¼šä½¿ç”¨io.StringIOï¼ˆé€‚ç”¨äºå¤æ‚åœºæ™¯ï¼‰</span>
<span class="hljs-keyword">from</span> io <span class="hljs-keyword">import</span> StringIO
buf = StringIO()
<span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">10000</span>):
    buf.write(<span class="hljs-built_in">str</span>(i))
result = buf.getvalue()
</code></pre>
<hr/>
<h2 data-id="heading-6">é™·é˜±2ï¼šé¢‘ç¹åˆ›å»ºå°å‹å¯¹è±¡</h2>
<h3 data-id="heading-7">é—®é¢˜ç°è±¡</h3>
<p>åœ¨çƒ­ç‚¹è·¯å¾„ä¸­é¢‘ç¹åˆ›å»ºå°å¯¹è±¡ï¼ˆå¦‚datetimeã€namedtupleï¼‰ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> datetime <span class="hljs-keyword">import</span> datetime

<span class="hljs-keyword">def</span> <span class="hljs-title function_">process_logs</span>(<span class="hljs-params">logs</span>):
    <span class="hljs-keyword">return</span> [datetime.strptime(log[<span class="hljs-string">'time'</span>], <span class="hljs-string">'%Y-%m-%d'</span>) <span class="hljs-keyword">for</span> log <span class="hljs-keyword">in</span> logs]
</code></pre>
<h3 data-id="heading-8">ä¸ºä»€ä¹ˆæ…¢ï¼Ÿ</h3>
<ul>
<li>Pythonå¯¹è±¡åˆ›å»ºéœ€è¦å†…å­˜åˆ†é…å’Œåˆå§‹åŒ–å¼€é”€</li>
<li>CPythonçš„åƒåœ¾å›æ”¶æœºåˆ¶ä¼šå¢åŠ é¢å¤–è´Ÿæ‹…</li>
</ul>
<h3 data-id="heading-9">è§£å†³æ–¹æ¡ˆ</h3>
<p>é‡‡ç”¨å¯¹è±¡æ± æˆ–ç¼“å­˜æ¨¡å¼ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> functools <span class="hljs-keyword">import</span> lru_cache

<span class="hljs-meta">@lru_cache(<span class="hljs-params">maxsize=<span class="hljs-number">256</span></span>)</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">parse_date</span>(<span class="hljs-params">date_str</span>):
    <span class="hljs-keyword">return</span> datetime.strptime(date_str, <span class="hljs-string">'%Y-%m-%d'</span>)

<span class="hljs-comment"># æˆ–è€…å¯¹å·²çŸ¥æœ‰é™é›†åˆé¢„å…ˆè®¡ç®—</span>
DATE_CACHE = {d: datetime.strptime(d, <span class="hljs-string">'%Y-%m-%d'</span>) 
              <span class="hljs-keyword">for</span> d <span class="hljs-keyword">in</span> <span class="hljs-built_in">set</span>(log[<span class="hljs-string">'time'</span>] <span class="hljs-keyword">for</span> log <span class="hljs-keyword">in</span> logs)}
</code></pre>
<hr/>
<h2 data-id="heading-10">é™·é˜±3ï¼šè¿‡åº¦ä¾èµ–Pythonå±‚å¾ªç¯</h2>
<h3 data-id="heading-11">é—®é¢˜ç°è±¡</h3>
<p>ç”¨çº¯Pythonå®ç°æ•°å€¼è®¡ç®—ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">calculate_pi</span>(<span class="hljs-params">n_terms</span>):
    numerator = <span class="hljs-number">4.0</span>
    denominator = <span class="hljs-number">1.0</span>
    operation = <span class="hljs-number">1.0</span>
    pi = <span class="hljs-number">0.0</span>
    <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n_terms):
        pi += operation * (numerator / denominator)
        denominator += <span class="hljs-number">2.0</span>
        operation *= -<span class="hljs-number">1.0</span>
    <span class="hljs-keyword">return</span> pi
</code></pre>
<h3 data-id="heading-12">ä¸ºä»€ä¹ˆæ…¢ï¼Ÿ</h3>
<ul>
<li>Pythonè§£é‡Šå™¨æ‰§è¡Œå­—èŠ‚ç çš„é€Ÿåº¦è¿œä½äºæœºå™¨åŸç”ŸæŒ‡ä»¤</li>
<li>CPythonçš„å…¨å±€è§£é‡Šå™¨é”(GIL)é™åˆ¶å¤šçº¿ç¨‹å¹¶è¡Œ</li>
</ul>
<h3 data-id="heading-13">è§£å†³æ–¹æ¡ˆ</h3>
<p>ä½¿ç”¨NumPyæˆ–Numbaè¿›è¡Œå‘é‡åŒ–è¿ç®—ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np

<span class="hljs-keyword">def</span> <span class="hljs-title function_">calculate_pi_vec</span>(<span class="hljs-params">n_terms</span>):
    k = np.arange(n_terms)
    <span class="hljs-keyword">return</span> np.<span class="hljs-built_in">sum</span>(<span class="hljs-number">4.0</span> * (-<span class="hljs-number">1</span>)**k / (<span class="hljs-number">2</span>*k + <span class="hljs-number">1</span>))

<span class="hljs-comment"># Numbaå³æ—¶ç¼–è¯‘ç‰ˆï¼ˆé¦–æ¬¡è¿è¡Œæœ‰ç¼–è¯‘å¼€é”€ï¼‰</span>
<span class="hljs-keyword">from</span> numba <span class="hljs-keyword">import</span> jit
<span class="hljs-meta">@jit(<span class="hljs-params">nopython=<span class="hljs-literal">True</span></span>)</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">calculate_pi_jit</span>(<span class="hljs-params">n_terms</span>): ... <span class="hljs-comment"># Same as original function</span>
</code></pre>
<hr/>
<h2 data-id="heading-14">é™·é˜±4ï¼šå¿½ç•¥å†…ç½®å‡½æ•°çš„é«˜æ•ˆå®ç°</h2>
<h3 data-id="heading-15">é—®é¢˜ç°è±¡</h3>
<p>æ‰‹åŠ¨å®ç°æœ¬å¯ç”¨å†…ç½®å‡½æ•°å®Œæˆçš„æ“ä½œï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># Case1: Filtering with explicit loop</span>
filtered = []
<span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> items:
    <span class="hljs-keyword">if</span> condition(x):
        filtered.append(x)

<span class="hljs-comment"># Case2: Custom max implementation </span>
max_val = items[<span class="hljs-number">0</span>]
<span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> items[<span class="hljs-number">1</span>:]:
    <span class="hljs-keyword">if</span> x &gt; max_val:
        max_val = x 
</code></pre>
<h3 data-id="heading-16">ä¸ºä»€ä¹ˆæ…¢ï¼Ÿ</h3>
<ul>
<li>CPythonçš„å†…ç½®å‡½æ•°æ˜¯ç”¨Cå®ç°çš„ï¼ˆå¦‚<code>filter()</code>ã€<code>max()</code>ï¼‰</li>
<li>Pythonå±‚é¢çš„å¾ªç¯æœ‰è§£é‡Šå™¨å¼€é”€</li>
</ul>
<h3 data-id="heading-17">Solutions:</h3>
<p>Always prefer builtins when possible:</p>
<pre><code class="hljs language-python" lang="python">filtered = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">filter</span>(condition, items)) 
<span class="hljs-comment"># Or generator expression:</span>
filtered = (x <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> items <span class="hljs-keyword">if</span> condition(x))

max_val = <span class="hljs-built_in">max</span>(items) <span class="hljs-comment"># Also works with key function </span>
</code></pre>
<hr/>
<h2 data-id="heading-18">Trap5: Unnecessary Data Copies</h2>
<h3 data-id="heading-19">Problem Pattern</h3>
<p>Creating intermediate copies without awareness:</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">normalize_matrix</span>(<span class="hljs-params">mat</span>):
    row_sums = [<span class="hljs-built_in">sum</span>(row) <span class="hljs-keyword">for</span> row <span class="hljs-keyword">in</span> mat]      <span class="hljs-comment"># First pass </span>
    <span class="hljs-keyword">return</span> [[val/sum_ <span class="hljs-keyword">for</span> val <span class="hljs-keyword">in</span> row]         <span class="hljs-comment"># Second pass   </span>
            <span class="hljs-keyword">for</span> row, sum_ <span class="hljs-keyword">in</span> <span class="hljs-built_in">zip</span>(mat, row_sums)]
            
<span class="hljs-comment"># Even worse with slicing:</span>
new_list = original_list[:]   <span class="hljs-comment"># Full shallow copy </span>
</code></pre>
<h3 data-id="heading-20">Why Slow?</h3>
<ul>
<li>Memory allocation and copying overhead grows linearly with data size</li>
<li>Cache locality suffers due to multiple passes</li>
</ul>
<h3 data-id="heading-21">Optimization Strategies:</h3>
<p>Use generators/views instead of materialized copies:</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># Single-pass iterator version </span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">normalize_matrix</span>(<span class="hljs-params">mat</span>):
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">normalized_rows</span>():
        <span class="hljs-keyword">for</span> row <span class="hljs-keyword">in</span> mat:
            sum_ = <span class="hljs-built_in">sum</span>(row)
            <span class="hljs-keyword">yield</span> [val/sum_ <span class="hljs-keyword">for</span> val <span class="hljs-keyword">in</span> row]
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">list</span>(normalized_rows())

<span class="hljs-comment"># For numpy arrays use views instead of copies:</span>
arr[:, :<span class="hljs-number">10</span>]   <span class="hljs-comment"># This creates a view, not a copy </span>
</code></pre>
<hr/>
<h2 data-id="heading-22">Conclusion</h2>
<p>Performance optimization in Python requires understanding both the language's abstractions and its underlying implementation details. The five traps we've examined share common themes:</p>
<ol>
<li>Leveraging Python's C-based builtins instead of pure-Python loops</li>
<li>Minimizing object creation overhead through caching/reuse</li>
<li>Avoiding unnecessary data duplication</li>
<li>Utilizing vectorized operations where applicable</li>
</ol>
<p>The key insight is that <strong>idiomatic Python isn't always performant Python</strong>. By combining these techniques with profiling tools like cProfile and line_profiler, you can systematically eliminate bottlenecks while maintaining code readability.</p>
<p>Remember that not all code needs optimization - focus on hotspots identified through profiling to get maximum returns from your efforts. When done correctly, these optimizations can yield speedups of <strong>300% or more</strong> with minimal code changes.</p>
<p>Ultimately, writing high-performance Python is about working with the language's strengths rather than against them - using compiled extensions when necessary, embracing generators and views for memory efficiency, and letting well-optimized libraries handle heavy lifting wherever possible.</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€èŠ‚ç‚¹ã€‘[NormalBlendèŠ‚ç‚¹]åŸç†è§£æä¸å®é™…åº”ç”¨]]></title>    <link>https://juejin.cn/post/7588086766235861030</link>    <guid>https://juejin.cn/post/7588086766235861030</guid>    <pubDate>2025-12-27T00:29:34.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588086766235861030" data-draft-id="7588031908171137033" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€èŠ‚ç‚¹ã€‘[NormalBlendèŠ‚ç‚¹]åŸç†è§£æä¸å®é™…åº”ç”¨"/> <meta itemprop="keywords" content="æ¸¸æˆå¼€å‘,å›¾å½¢å­¦,Unity3D"/> <meta itemprop="datePublished" content="2025-12-27T00:29:34.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="SmalBox"/> <meta itemprop="url" content="https://juejin.cn/user/2218166695237532"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€èŠ‚ç‚¹ã€‘[NormalBlendèŠ‚ç‚¹]åŸç†è§£æä¸å®é™…åº”ç”¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2218166695237532/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    SmalBox
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-27T00:29:34.000Z" title="Sat Dec 27 2025 00:29:34 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.csdn.net%2Fchenghai37%2Fcategory_13074589.html%3Ffromshare%3Dblogcolumn%26sharetype%3Dblogcolumn%26sharerId%3D13074589%26sharerefer%3DPC%26sharesource%3Dchenghai37%26sharefrom%3Dfrom_link" target="_blank" title="https://blog.csdn.net/chenghai37/category_13074589.html?fromshare=blogcolumn&amp;sharetype=blogcolumn&amp;sharerId=13074589&amp;sharerefer=PC&amp;sharesource=chenghai37&amp;sharefrom=from_link" ref="nofollow noopener noreferrer">ã€Unity Shader Graph ä½¿ç”¨ä¸ç‰¹æ•ˆå®ç°ã€‘</a><strong>ä¸“æ -ç›´è¾¾</strong></p>
</blockquote>
<h2 data-id="heading-0">æ³•çº¿æ··åˆæŠ€æœ¯æ¦‚è¿°</h2>
<p>åœ¨å®æ—¶æ¸²æŸ“ä¸­ï¼Œæ³•çº¿è´´å›¾æ··åˆæ˜¯å¢å¼ºè¡¨é¢ç»†èŠ‚è¡¨ç°çš„é‡è¦æŠ€æœ¯ã€‚Unity URPç®¡çº¿å†…ç½®çš„NormalBlendèŠ‚ç‚¹é€šè¿‡æ•°å­¦è¿ç®—å®ç°ä¸¤å¼ æ³•çº¿è´´å›¾çš„å¹³æ»‘è¿‡æ¸¡ï¼ŒåŒæ—¶ç¡®ä¿æ³•çº¿å‘é‡çš„ç‰©ç†æ­£ç¡®æ€§ã€‚è¯¥æŠ€æœ¯å¹¿æ³›åº”ç”¨äºè§’è‰²è£…å¤‡åˆ‡æ¢ã€åœ°å½¢æè´¨èåˆã€åŠ¨æ€å½¢å˜æ•ˆæœç­‰åœºæ™¯ï¼Œæ˜¯ç°ä»£æ¸¸æˆå¼€å‘ä¸­ä¸å¯æˆ–ç¼ºçš„æè´¨å¤„ç†å·¥å…·ã€‚</p>
<h2 data-id="heading-1">èŠ‚ç‚¹æ ¸å¿ƒåŠŸèƒ½è§£æ</h2>
<h3 data-id="heading-2">æ··åˆæ¨¡å¼é€‰æ‹©</h3>
<p>NormalBlendèŠ‚ç‚¹æä¾›ä¸¤ç§æ··åˆç®—æ³•ï¼š</p>
<ol>
<li><strong>Defaultæ¨¡å¼</strong>ï¼šé‡‡ç”¨åˆ†é‡æ··åˆç­–ç•¥ï¼Œå¯¹æ³•çº¿è´´å›¾çš„RGé€šé“è¿›è¡ŒåŠ æ³•æ··åˆï¼ŒBé€šé“è¿›è¡Œä¹˜æ³•æ··åˆï¼Œæœ€åé€šè¿‡æ ‡å‡†åŒ–å¤„ç†ç¡®ä¿è¾“å‡ºä¸ºå•ä½å‘é‡ã€‚é€‚ç”¨äºç®€å•è¡¨é¢ç»†èŠ‚çš„å åŠ ï¼Œä¾‹å¦‚è§’è‰²è£…å¤‡çº¹ç†çš„æ··åˆã€‚</li>
<li><strong>Reorientedæ¨¡å¼</strong>ï¼šé€šè¿‡é‡æ–°å®šå‘ç®—æ³•ç»´æŒæ³•çº¿æ–¹å‘ä¸€è‡´æ€§ï¼Œé‡‡ç”¨é½æ¬¡åæ ‡ç³»è½¬æ¢ä¸å‘é‡æŠ•å½±è®¡ç®—ï¼Œç¡®ä¿æ··åˆç»“æœç¬¦åˆç‰©ç†å…‰ç…§æ¨¡å‹ã€‚é€‚ç”¨äºå¤æ‚è¡¨é¢å¤„ç†ï¼Œå¦‚å¸ƒæ–™æ¨¡æ‹Ÿä¸åŠ¨æ€å½¢å˜æ•ˆæœã€‚</li>
</ol>
<h3 data-id="heading-3">ç«¯å£ä¸å‚æ•°é…ç½®</h3>
<p><img src="https://docs.unity.cn/cn/Packages-cn/com.unity.shadergraph@14.0/manual/images/NormalBlendNodeThumb.png" alt="" loading="lazy"/></p>
<ul>
<li><strong>è¾“å…¥ç«¯å£</strong>ï¼š
<ul>
<li>Aï¼šæ¥æ”¶ç¬¬ä¸€å¼ æ³•çº¿è´´å›¾æ•°æ®ï¼ˆVector3ç±»å‹ï¼‰</li>
<li>Bï¼šæ¥æ”¶ç¬¬äºŒå¼ æ³•çº¿è´´å›¾æ•°æ®ï¼ˆVector3ç±»å‹ï¼‰</li>
</ul>
</li>
<li><strong>è¾“å‡ºç«¯å£</strong>ï¼š
<ul>
<li>Outï¼šè¾“å‡ºæ··åˆåçš„æ ‡å‡†åŒ–æ³•çº¿å‘é‡ï¼ˆVector3ç±»å‹ï¼‰</li>
</ul>
</li>
<li><strong>æ§ä»¶å‚æ•°</strong>ï¼š
<ul>
<li>Modeï¼šæ··åˆæ¨¡å¼é€‰æ‹©å™¨ï¼ˆDefault/Reorientedï¼‰</li>
</ul>
</li>
</ul>
<h2 data-id="heading-4">æŠ€æœ¯å®ç°åŸç†</h2>
<h3 data-id="heading-5">æ³•çº¿æ··åˆæ•°å­¦åŸºç¡€</h3>
<p>æ³•çº¿å‘é‡æ˜¯è¡¨ç¤ºè¡¨é¢æœå‘çš„æ•°å­¦å®ä½“ï¼Œå…¶æ ¸å¿ƒå±æ€§åŒ…æ‹¬ï¼š</p>
<ul>
<li>å•ä½å‘é‡æ€§è´¨ï¼šé•¿åº¦å¿…é¡»ä¿æŒä¸º1</li>
<li>æ’å€¼ç‰¹æ€§ï¼šåœ¨ç‰‡æ®µç€è‰²å™¨ä¸­ç”±é¡¶ç‚¹æ³•çº¿æ’å€¼è·å¾—</li>
<li>ç©ºé—´è½¬æ¢ï¼šå¯é€šè¿‡çŸ©é˜µè¿ç®—åœ¨ä¸åŒåæ ‡ç³»é—´è½¬æ¢</li>
</ul>
<h3 data-id="heading-6">æ ‡å‡†åŒ–å¤„ç†æµç¨‹</h3>
<p>æ··åˆåçš„æ³•çº¿å‘é‡å¿…é¡»ç»è¿‡æ ‡å‡†åŒ–å¤„ç†ï¼Œä»¥ç¡®ä¿ï¼š</p>
<ol>
<li>å…‰ç…§è®¡ç®—çš„å‡†ç¡®æ€§</li>
<li>é˜´å½±ç”Ÿæˆçš„æ­£ç¡®æ€§</li>
<li>è¡¨é¢äº¤äº’çš„çœŸå®æ€§</li>
</ol>
<h3 data-id="heading-7">åæ ‡ç©ºé—´è½¬æ¢æœºåˆ¶</h3>
<p>NormalBlendèŠ‚ç‚¹è‡ªåŠ¨å¤„ç†åˆ‡çº¿ç©ºé—´åˆ°ä¸–ç•Œç©ºé—´çš„è½¬æ¢ï¼š</p>
<ul>
<li>è¾“å…¥æ³•çº¿é»˜è®¤ä¸ºåˆ‡çº¿ç©ºé—´åæ ‡</li>
<li>è¾“å‡ºæ³•çº¿æ ¹æ®æè´¨è®¾ç½®è‡ªåŠ¨è½¬æ¢è‡³ç›®æ ‡ç©ºé—´</li>
<li>æ”¯æŒå¯¹è±¡ç©ºé—´ã€è§†å›¾ç©ºé—´ã€ä¸–ç•Œç©ºé—´å’Œåˆ‡çº¿ç©ºé—´è¾“å‡º</li>
</ul>
<h2 data-id="heading-8">å…¸å‹åº”ç”¨åœºæ™¯ä¸å®ç°</h2>
<h3 data-id="heading-9">è§’è‰²è£…å¤‡æ³•çº¿æ··åˆ</h3>
<p><strong>å®ç°æ­¥éª¤</strong>ï¼š</p>
<ol>
<li>å‡†å¤‡è§’è‰²åŸºç¡€æ³•çº¿è´´å›¾ï¼ˆAï¼‰</li>
<li>å‡†å¤‡è£…å¤‡æ³•çº¿è´´å›¾ï¼ˆBï¼‰</li>
<li>ä½¿ç”¨Defaultæ¨¡å¼è¿›è¡Œæ··åˆ</li>
<li>é€šè¿‡æè´¨å‚æ•°æ§åˆ¶æ··åˆå¼ºåº¦</li>
</ol>
<p><strong>ä¼˜åŒ–æŠ€å·§</strong>ï¼š</p>
<ul>
<li>ä½¿ç”¨çº¹ç†é‡‡æ ·èŠ‚ç‚¹æ§åˆ¶æ··åˆåŒºåŸŸ</li>
<li>ç»“åˆé®ç½©è´´å›¾å®ç°éå‡åŒ€æ··åˆ</li>
<li>åœ¨å…³é”®åŒºåŸŸé‡‡ç”¨Reorientedæ¨¡å¼ç»´æŒæ–¹å‘ä¸€è‡´æ€§</li>
</ul>
<h3 data-id="heading-10">åœ°å½¢æ³•çº¿æ··åˆ</h3>
<p><strong>å®ç°æ­¥éª¤</strong>ï¼š</p>
<ol>
<li>å‡†å¤‡ä¸¤ç§åœ°å½¢æè´¨æ³•çº¿è´´å›¾ï¼ˆAå’ŒBï¼‰</li>
<li>åˆ›å»ºæ··åˆé®ç½©çº¹ç†</li>
<li>æ ¹æ®é®ç½©å€¼åŠ¨æ€è°ƒæ•´æ··åˆæ¯”ä¾‹</li>
<li>ä½¿ç”¨Reorientedæ¨¡å¼å¤„ç†å¤æ‚è¿‡æ¸¡</li>
</ol>
<p><strong>ä¼˜åŒ–æŠ€å·§</strong>ï¼š</p>
<ul>
<li>ä½¿ç”¨æ¸å˜çº¹ç†æ§åˆ¶æ··åˆåŒºåŸŸ</li>
<li>ç»“åˆé«˜åº¦å›¾å®ç°ç‰©ç†æ­£ç¡®çš„æ··åˆ</li>
<li>åœ¨æ–œå¡åŒºåŸŸå¢å¼ºæ··åˆå¼ºåº¦</li>
</ul>
<h3 data-id="heading-11">åŠ¨æ€å˜å½¢æ³•çº¿å¤„ç†</h3>
<p><strong>å®ç°æ­¥éª¤</strong>ï¼š</p>
<ol>
<li>å‡†å¤‡åŸºç¡€æ³•çº¿è´´å›¾ï¼ˆAï¼‰</li>
<li>å‡†å¤‡å˜å½¢å½±å“æ³•çº¿è´´å›¾ï¼ˆBï¼‰</li>
<li>æ ¹æ®å˜å½¢å‚æ•°åŠ¨æ€è°ƒæ•´æ··åˆå¼ºåº¦</li>
<li>ä½¿ç”¨Reorientedæ¨¡å¼ä¿æŒæ–¹å‘ä¸€è‡´æ€§</li>
</ol>
<p><strong>ä¼˜åŒ–æŠ€å·§</strong>ï¼š</p>
<ul>
<li>ç»“åˆé¡¶ç‚¹åŠ¨ç”»å‚æ•°æ§åˆ¶æ··åˆ</li>
<li>ä½¿ç”¨å™ªå£°çº¹ç†ä¸°å¯Œç»†èŠ‚</li>
<li>åœ¨å½¢å˜å‰§çƒˆåŒºåŸŸå¢åŠ æ··åˆå¼ºåº¦</li>
</ul>
<h2 data-id="heading-12">æ€§èƒ½ä¼˜åŒ–ç­–ç•¥</h2>
<h3 data-id="heading-13">æ¨¡å¼é€‰æ‹©ä¼˜åŒ–</h3>
<ul>
<li>ä¼˜å…ˆä½¿ç”¨Defaultæ¨¡å¼ï¼šæ€§èƒ½å¼€é”€è¾ƒå°ï¼Œé€‚åˆç®€å•æ··åˆ</li>
<li>å¤æ‚è¡¨é¢ä½¿ç”¨Reorientedæ¨¡å¼ï¼šç»´æŒæ–¹å‘ä¸€è‡´æ€§</li>
<li>æ··åˆå¼ºåº¦æ§åˆ¶ï¼šé€šè¿‡æè´¨å‚æ•°æˆ–é®ç½©è´´å›¾åŠ¨æ€è°ƒæ•´</li>
</ul>
<h3 data-id="heading-14">è®¡ç®—èµ„æºä¼˜åŒ–</h3>
<ul>
<li>é™åˆ¶æ··åˆåŒºåŸŸï¼šä½¿ç”¨é®ç½©è´´å›¾çº¦æŸæ··åˆèŒƒå›´</li>
<li>ç®€åŒ–æ··åˆæ¨¡å¼ï¼šåœ¨éå…³é”®åŒºåŸŸé‡‡ç”¨Defaultæ¨¡å¼</li>
<li>é¢„è®¡ç®—æ··åˆï¼šåœ¨æè´¨ç¼–è¾‘å™¨ä¸­é¢„å…ˆè®¡ç®—éƒ¨åˆ†ç»“æœ</li>
</ul>
<h3 data-id="heading-15">å¹³å°å…¼å®¹æ€§ä¼˜åŒ–</h3>
<ul>
<li>URPä¸HDRPå·®å¼‚ï¼šURPé‡‡ç”¨ç®€åŒ–å…‰ç…§æ¨¡å‹ï¼ŒHDRPæ”¯æŒç‰©ç†ç²¾ç¡®æè´¨</li>
<li>ç‰ˆæœ¬å…¼å®¹æ€§ï¼šä¸åŒUnityç‰ˆæœ¬å¯¹ShaderGraphèŠ‚ç‚¹çš„æ”¯æŒå¯èƒ½å­˜åœ¨å·®å¼‚</li>
<li>ç›®æ ‡å¹³å°ï¼šç§»åŠ¨ç«¯ä¼˜å…ˆé€‰ç”¨Defaultæ¨¡å¼ä»¥é™ä½è®¡ç®—é‡</li>
</ul>
<h2 data-id="heading-16">å¸¸è§é—®é¢˜è§£å†³æ–¹æ¡ˆ</h2>
<h3 data-id="heading-17">æ··åˆåå‡ºç°ä¼ªå½±</h3>
<p><strong>åŸå› </strong>ï¼š</p>
<ul>
<li>æ··åˆåŒºåŸŸè¾¹ç•Œå¤„ç†ä¸å½“</li>
<li>æ³•çº¿æ–¹å‘ä¸ä¸€è‡´</li>
<li>æ··åˆå¼ºåº¦è¿‡é«˜</li>
</ul>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<ul>
<li>ä½¿ç”¨é®ç½©è´´å›¾å¹³æ»‘è¿‡æ¸¡</li>
<li>åœ¨å…³é”®åŒºåŸŸåˆ‡æ¢è‡³Reorientedæ¨¡å¼</li>
<li>é™ä½æ··åˆå¼ºåº¦æˆ–æ‰©å±•æ··åˆåŒºåŸŸ</li>
</ul>
<h3 data-id="heading-18">æ€§èƒ½ä¸‹é™æ˜æ˜¾</h3>
<p><strong>åŸå› </strong>ï¼š</p>
<ul>
<li>æ··åˆåŒºåŸŸè¿‡å¤§</li>
<li>é‡‡ç”¨å¤æ‚æ··åˆæ¨¡å¼</li>
<li>åœ¨ç§»åŠ¨ç«¯ä½¿ç”¨é«˜ç²¾åº¦æ··åˆ</li>
</ul>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<ul>
<li>ç¼©å°æ··åˆåŒºåŸŸ</li>
<li>åœ¨éå…³é”®åŒºåŸŸä½¿ç”¨Defaultæ¨¡å¼</li>
<li>é’ˆå¯¹ç§»åŠ¨ç«¯ä¼˜åŒ–æ··åˆå‚æ•°</li>
</ul>
<h3 data-id="heading-19">å…‰ç…§è¡¨ç°å¼‚å¸¸</h3>
<p><strong>åŸå› </strong>ï¼š</p>
<ul>
<li>æ··åˆåæ³•çº¿æœªæ­£ç¡®æ ‡å‡†åŒ–</li>
<li>æ··åˆæ¨¡å¼é€‰æ‹©ä¸å½“</li>
<li>æ³•çº¿è´´å›¾æ ¼å¼æœ‰è¯¯</li>
</ul>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<ul>
<li>ç¡®ä¿è¾“å‡ºæ³•çº¿ç»è¿‡æ ‡å‡†åŒ–å¤„ç†</li>
<li>æ ¹æ®è¡¨é¢å¤æ‚åº¦é€‰æ‹©åˆé€‚çš„æ··åˆæ¨¡å¼</li>
<li>æ£€æŸ¥æ³•çº¿è´´å›¾æ ¼å¼ä¸ç”Ÿæˆæ–¹å¼</li>
</ul>
<h2 data-id="heading-20">è¿›é˜¶åº”ç”¨æ¡ˆä¾‹</h2>
<h3 data-id="heading-21">å¤šå±‚çº§æ³•çº¿æ··åˆ</h3>
<p><strong>å®ç°æ–¹æ³•</strong>ï¼š</p>
<ol>
<li>æ„å»ºå¤šä¸ªæ··åˆå±‚çº§</li>
<li>ä½¿ç”¨é®ç½©è´´å›¾æ§åˆ¶å„å±‚çº§æ··åˆåŒºåŸŸ</li>
<li>é€å±‚æ··åˆæ³•çº¿è´´å›¾</li>
</ol>
<p><strong>ä¼˜åŠ¿</strong>ï¼š</p>
<ul>
<li>å®ç°æ›´å¤æ‚çš„è¡¨é¢ç»†èŠ‚</li>
<li>å¯è°ƒæ§ä¸åŒåŒºåŸŸçš„æ··åˆå¼ºåº¦</li>
<li>æå‡æè´¨è¡¨ç°åŠ›</li>
</ul>
<h3 data-id="heading-22">åŠ¨æ€æ³•çº¿æ··åˆç³»ç»Ÿ</h3>
<p><strong>å®ç°æ–¹æ³•</strong>ï¼š</p>
<ol>
<li>ä¾æ®åŠ¨ç”»å‚æ•°åŠ¨æ€è°ƒæ•´æ··åˆå¼ºåº¦</li>
<li>ä½¿ç”¨å™ªå£°çº¹ç†å¢æ·»åŠ¨æ€ç»†èŠ‚</li>
<li>ç»“åˆé¡¶ç‚¹åŠ¨ç”»å®ç°ç‰©ç†æ­£ç¡®çš„æ··åˆ</li>
</ol>
<p><strong>åº”ç”¨åœºæ™¯</strong>ï¼š</p>
<ul>
<li>è§’è‰²è¡¨æƒ…å˜åŒ–</li>
<li>å¸ƒæ–™æ¨¡æ‹Ÿ</li>
<li>åŠ¨æ€ç¯å¢ƒå˜åŒ–</li>
</ul>
<h3 data-id="heading-23">æè´¨ç³»ç»Ÿé›†æˆæ–¹æ¡ˆ</h3>
<p><strong>å®ç°æ–¹æ³•</strong>ï¼š</p>
<ol>
<li>å°†æ··åˆå‚æ•°æš´éœ²ç»™æè´¨ç³»ç»Ÿ</li>
<li>åˆ›å»ºæè´¨å‚æ•°é›†åˆä»¥æ§åˆ¶æ··åˆè¡Œä¸º</li>
<li>å®ç°åŠ¨æ€æè´¨åˆ‡æ¢</li>
</ol>
<p><strong>ä¼˜åŠ¿</strong>ï¼š</p>
<ul>
<li>å¢å¼ºæè´¨ç³»ç»Ÿçš„çµæ´»æ€§</li>
<li>æ”¯æŒè¿è¡Œæ—¶åŠ¨æ€è°ƒæ•´</li>
<li>ç®€åŒ–ç¾æœ¯å·¥ä½œæµç¨‹</li>
</ul>
<h2 data-id="heading-24">æœ€ä½³å®è·µæ€»ç»“</h2>
<ol>
<li><strong>æ¨¡å¼é€‰æ‹©åŸåˆ™</strong>ï¼šç®€å•è¡¨é¢ä½¿ç”¨Defaultæ¨¡å¼ï¼Œå¤æ‚è¡¨é¢ä½¿ç”¨Reorientedæ¨¡å¼</li>
<li><strong>æ€§èƒ½ä¼˜åŒ–ä¼˜å…ˆçº§</strong>ï¼šç§»åŠ¨ç«¯ä¼˜å…ˆè€ƒè™‘æ€§èƒ½ï¼ŒPCç«¯å¯é€‚åº¦å¢åŠ ç»†èŠ‚</li>
<li><strong>è´¨é‡ä¿éšœæªæ–½</strong>ï¼šä½¿ç”¨æ ‡å‡†åŒ–å·¥å…·éªŒè¯æ··åˆç»“æœï¼Œç¡®ä¿æ³•çº¿æ–¹å‘æ­£ç¡®</li>
<li><strong>è¿­ä»£å¼€å‘æµç¨‹</strong>ï¼šä»ç®€å•æ··åˆèµ·æ­¥ï¼Œé€æ­¥æå‡å¤æ‚åº¦ï¼Œå¹¶æŒç»­éªŒè¯æ•ˆæœ</li>
</ol>
<hr/>
<blockquote>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.csdn.net%2Fchenghai37%2Fcategory_13074589.html%3Ffromshare%3Dblogcolumn%26sharetype%3Dblogcolumn%26sharerId%3D13074589%26sharerefer%3DPC%26sharesource%3Dchenghai37%26sharefrom%3Dfrom_link" target="_blank" title="https://blog.csdn.net/chenghai37/category_13074589.html?fromshare=blogcolumn&amp;sharetype=blogcolumn&amp;sharerId=13074589&amp;sharerefer=PC&amp;sharesource=chenghai37&amp;sharefrom=from_link" ref="nofollow noopener noreferrer">ã€Unity Shader Graph ä½¿ç”¨ä¸ç‰¹æ•ˆå®ç°ã€‘</a><strong>ä¸“æ -ç›´è¾¾</strong>
ï¼ˆæ¬¢è¿<em>ç‚¹èµç•™è¨€</em>æ¢è®¨ï¼Œæ›´å¤šäººåŠ å…¥è¿›æ¥èƒ½æ›´åŠ å®Œå–„è¿™ä¸ªæ¢ç´¢çš„è¿‡ç¨‹ï¼ŒğŸ™ï¼‰</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Hibernateï¼ˆ5ï¼‰ä»€ä¹ˆæ˜¯Hibernateçš„é…ç½®æ–‡ä»¶ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7588064253634953270</link>    <guid>https://juejin.cn/post/7588064253634953270</guid>    <pubDate>2025-12-26T23:05:10.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588064253634953270" data-draft-id="7588001624905695251" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Hibernateï¼ˆ5ï¼‰ä»€ä¹ˆæ˜¯Hibernateçš„é…ç½®æ–‡ä»¶ï¼Ÿ"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-26T23:05:10.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Victor356"/> <meta itemprop="url" content="https://juejin.cn/user/3492507879476878"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Hibernateï¼ˆ5ï¼‰ä»€ä¹ˆæ˜¯Hibernateçš„é…ç½®æ–‡ä»¶ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3492507879476878/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Victor356
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-26T23:05:10.000Z" title="Fri Dec 26 2025 23:05:10 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>Hibernateçš„é…ç½®æ–‡ä»¶æ˜¯ç”¨äºå®šä¹‰Hibernateçš„å„ç§é…ç½®å‚æ•°çš„æ–‡ä»¶ï¼ŒåŒ…æ‹¬æ•°æ®åº“è¿æ¥ä¿¡æ¯ã€Hibernateå±æ€§ã€æ˜ å°„èµ„æºã€ç¼“å­˜é…ç½®ç­‰ã€‚Hibernateä¸»è¦ä½¿ç”¨ä¸¤ç§é…ç½®æ–‡ä»¶ï¼š</p>
<ol>
<li><strong><code>hibernate.cfg.xml</code></strong>ï¼šXMLæ ¼å¼çš„é…ç½®æ–‡ä»¶ã€‚</li>
<li><strong><code>hibernate.properties</code></strong>ï¼šå±æ€§æ ¼å¼çš„é…ç½®æ–‡ä»¶ã€‚</li>
</ol>
<h3 data-id="heading-0">1. <code>hibernate.cfg.xml</code> é…ç½®æ–‡ä»¶</h3>
<p><code>hibernate.cfg.xml</code> æ˜¯ä¸€ä¸ªXMLæ ¼å¼çš„é…ç½®æ–‡ä»¶ï¼Œç”¨äºå®šä¹‰Hibernateçš„å„ç§é…ç½®å‚æ•°ï¼ŒåŒ…æ‹¬æ•°æ®åº“è¿æ¥ä¿¡æ¯ã€Hibernateå±æ€§é…ç½®ã€æ˜ å°„èµ„æºç­‰ã€‚å®ƒæ˜¯Hibernateé…ç½®ä¸­æœ€å¸¸ç”¨çš„æ–‡ä»¶ã€‚</p>
<h4 data-id="heading-1">ä¸»è¦åŠŸèƒ½ï¼š</h4>
<ul>
<li>é…ç½®æ•°æ®åº“è¿æ¥å±æ€§ã€‚</li>
<li>é…ç½®Hibernateç›¸å…³å±æ€§ï¼ˆå¦‚æ–¹è¨€ã€ç¼“å­˜ã€æ—¥å¿—ç­‰ï¼‰ã€‚</li>
<li>é…ç½®å®ä½“ç±»çš„æ˜ å°„ä¿¡æ¯ã€‚</li>
</ul>
<h4 data-id="heading-2">ç¤ºä¾‹ï¼š</h4>
<p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªè¯¦ç»†çš„<code>hibernate.cfg.xml</code>æ–‡ä»¶ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">hibernate-configuration</span> <span class="hljs-keyword">PUBLIC</span>
        <span class="hljs-string">"-//Hibernate/Hibernate Configuration DTD 3.0//EN"</span>
        <span class="hljs-string">"http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">hibernate-configuration</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">session-factory</span>&gt;</span>

        <span class="hljs-comment">&lt;!-- æ•°æ®åº“è¿æ¥é…ç½® --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.connection.driver_class"</span>&gt;</span>com.mysql.cj.jdbc.Driver<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.connection.url"</span>&gt;</span>jdbc:mysql://localhost:3306/your_database<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.connection.username"</span>&gt;</span>your_username<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.connection.password"</span>&gt;</span>your_password<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>

        <span class="hljs-comment">&lt;!-- Hibernate å±æ€§é…ç½® --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.dialect"</span>&gt;</span>org.hibernate.dialect.MySQLDialect<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.show_sql"</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.format_sql"</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.hbm2ddl.auto"</span>&gt;</span>update<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>

        <span class="hljs-comment">&lt;!-- äºŒçº§ç¼“å­˜é…ç½® --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.cache.use_second_level_cache"</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.cache.region.factory_class"</span>&gt;</span>org.hibernate.cache.ehcache.EhCacheRegionFactory<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>

        <span class="hljs-comment">&lt;!-- æŸ¥è¯¢ç¼“å­˜é…ç½® --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.cache.use_query_cache"</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>

        <span class="hljs-comment">&lt;!-- è¿æ¥æ± é…ç½® --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.c3p0.min_size"</span>&gt;</span>5<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.c3p0.max_size"</span>&gt;</span>20<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.c3p0.timeout"</span>&gt;</span>300<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.c3p0.max_statements"</span>&gt;</span>50<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.c3p0.idle_test_period"</span>&gt;</span>3000<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>

        <span class="hljs-comment">&lt;!-- æ˜ å°„ç±»é…ç½® --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">mapping</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"com.example.domain.Student"</span>/&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">mapping</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"com.example.domain.Course"</span>/&gt;</span>

    <span class="hljs-tag">&lt;/<span class="hljs-name">session-factory</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">hibernate-configuration</span>&gt;</span>
</code></pre>
<h4 data-id="heading-3">è¯¦ç»†è¯´æ˜ï¼š</h4>
<ul>
<li><strong>æ•°æ®åº“è¿æ¥é…ç½®</strong>ï¼šå®šä¹‰äº†å¦‚ä½•è¿æ¥æ•°æ®åº“ï¼ŒåŒ…æ‹¬æ•°æ®åº“é©±åŠ¨ç±»ã€URLã€ç”¨æˆ·åå’Œå¯†ç ã€‚</li>
<li><strong>Hibernateå±æ€§é…ç½®</strong>ï¼šé…ç½®Hibernateçš„è¡Œä¸ºï¼ŒåŒ…æ‹¬SQLæ–¹è¨€ã€æ˜¯å¦æ˜¾ç¤ºSQLã€SQLæ ¼å¼åŒ–é€‰é¡¹ç­‰ã€‚</li>
<li><strong>äºŒçº§ç¼“å­˜é…ç½®</strong>ï¼šå¯ç”¨äºŒçº§ç¼“å­˜å¹¶æŒ‡å®šç¼“å­˜çš„å®ç°ã€‚</li>
<li><strong>æŸ¥è¯¢ç¼“å­˜é…ç½®</strong>ï¼šå¯ç”¨æŸ¥è¯¢ç¼“å­˜ã€‚</li>
<li><strong>è¿æ¥æ± é…ç½®</strong>ï¼šé…ç½®è¿æ¥æ± çš„è¡Œä¸ºï¼Œå¦‚æœ€å°è¿æ¥æ•°ã€æœ€å¤§è¿æ¥æ•°ã€è¶…æ—¶æ—¶é—´ç­‰ã€‚</li>
<li><strong>æ˜ å°„ç±»é…ç½®</strong>ï¼šæŒ‡å®šHibernateéœ€è¦ç®¡ç†çš„å®ä½“ç±»ã€‚</li>
</ul>
<h3 data-id="heading-4">2. <code>hibernate.properties</code> é…ç½®æ–‡ä»¶</h3>
<p><code>hibernate.properties</code> æ˜¯ä¸€ä¸ªå±æ€§æ–‡ä»¶æ ¼å¼çš„é…ç½®æ–‡ä»¶ï¼Œç”¨äºå®šä¹‰Hibernateçš„å„ç§é…ç½®å‚æ•°ã€‚å®ƒçš„å†…å®¹ç›¸å¯¹ç®€å•ç›´æ¥ï¼Œä½†ä¸å¦‚XMLæ ¼å¼çš„é…ç½®æ–‡ä»¶ç»“æ„åŒ–å’Œå¯è¯»æ€§å¼ºã€‚</p>
<h4 data-id="heading-5">ç¤ºä¾‹ï¼š</h4>
<p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªè¯¦ç»†çš„<code>hibernate.properties</code>æ–‡ä»¶ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-properties" lang="properties"># æ•°æ®åº“è¿æ¥é…ç½®
hibernate.connection.driver_class = com.mysql.cj.jdbc.Driver
hibernate.connection.url = jdbc:mysql://localhost:3306/your_database
hibernate.connection.username = your_username
hibernate.connection.password = your_password

# Hibernate å±æ€§é…ç½®
hibernate.dialect = org.hibernate.dialect.MySQLDialect
hibernate.show_sql = true
hibernate.format_sql = true
hibernate.hbm2ddl.auto = update

# äºŒçº§ç¼“å­˜é…ç½®
hibernate.cache.use_second_level_cache = true
hibernate.cache.region.factory_class = org.hibernate.cache.ehcache.EhCacheRegionFactory

# æŸ¥è¯¢ç¼“å­˜é…ç½®
hibernate.cache.use_query_cache = true

# è¿æ¥æ± é…ç½®
hibernate.c3p0.min_size = 5
hibernate.c3p0.max_size = 20
hibernate.c3p0.timeout = 300
hibernate.c3p0.max_statements = 50
hibernate.c3p0.idle_test_period = 3000
</code></pre>
<h3 data-id="heading-6">ä½¿ç”¨ç¤ºä¾‹</h3>
<p>ç»“åˆä¸Šè¿°é…ç½®æ–‡ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ä»¥ä¸‹ä»£ç è¿›è¡ŒHibernateçš„åˆå§‹åŒ–å’Œä½¿ç”¨ï¼š</p>
<h4 data-id="heading-7">Javaä»£ç ç¤ºä¾‹ï¼š</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.hibernate.Session;
<span class="hljs-keyword">import</span> org.hibernate.SessionFactory;
<span class="hljs-keyword">import</span> org.hibernate.Transaction;
<span class="hljs-keyword">import</span> org.hibernate.cfg.Configuration;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HibernateUtil</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> SessionFactory sessionFactory;

    <span class="hljs-keyword">static</span> {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// åˆ›å»ºSessionFactory</span>
            sessionFactory = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Configuration</span>().configure(<span class="hljs-string">"hibernate.cfg.xml"</span>).buildSessionFactory();
        } <span class="hljs-keyword">catch</span> (Throwable ex) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ExceptionInInitializerError</span>(ex);
        }
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> SessionFactory <span class="hljs-title function_">getSessionFactory</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> sessionFactory;
    }
}

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HibernateExample</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-type">SessionFactory</span> <span class="hljs-variable">sessionFactory</span> <span class="hljs-operator">=</span> HibernateUtil.getSessionFactory();
        <span class="hljs-type">Session</span> <span class="hljs-variable">session</span> <span class="hljs-operator">=</span> sessionFactory.openSession();
        <span class="hljs-type">Transaction</span> <span class="hljs-variable">transaction</span> <span class="hljs-operator">=</span> session.beginTransaction();

        <span class="hljs-comment">// åˆ›å»ºå¹¶ä¿å­˜å­¦ç”Ÿå¯¹è±¡</span>
        <span class="hljs-type">Student</span> <span class="hljs-variable">student</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Student</span>(<span class="hljs-string">"John Doe"</span>, <span class="hljs-number">20</span>);
        session.save(student);

        transaction.commit();

        <span class="hljs-comment">// è¯»å–å­¦ç”Ÿå¯¹è±¡</span>
        transaction = session.beginTransaction();
        <span class="hljs-type">Student</span> <span class="hljs-variable">retrievedStudent</span> <span class="hljs-operator">=</span> session.get(Student.class, student.getId());
        System.out.println(<span class="hljs-string">"Retrieved Student: "</span> + retrievedStudent.getName() + <span class="hljs-string">", Age: "</span> + retrievedStudent.getAge());
        transaction.commit();

        <span class="hljs-comment">// æ›´æ–°å­¦ç”Ÿå¯¹è±¡</span>
        transaction = session.beginTransaction();
        retrievedStudent.setAge(<span class="hljs-number">21</span>);
        session.update(retrievedStudent);
        transaction.commit();

        <span class="hljs-comment">// åˆ é™¤å­¦ç”Ÿå¯¹è±¡</span>
        transaction = session.beginTransaction();
        session.delete(retrievedStudent);
        transaction.commit();

        session.close();
        sessionFactory.close();
    }
}
</code></pre>
<h3 data-id="heading-8">è¯¦ç»†è§£é‡Š</h3>
<ol>
<li>
<p><strong>æŒä¹…åŒ–ç±»å®šä¹‰</strong>ï¼šæŒä¹…åŒ–ç±»<code>Student</code>ä½¿ç”¨äº†<code>@Entity</code>æ³¨è§£è¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªæŒä¹…åŒ–å®ä½“ç±»ï¼Œ<code>@Id</code>å’Œ<code>@GeneratedValue</code>æ³¨è§£ç”¨äºå®šä¹‰ä¸»é”®å’Œä¸»é”®ç”Ÿæˆç­–ç•¥ã€‚</p>
</li>
<li>
<p><strong><code>hibernate.cfg.xml</code> é…ç½®</strong>ï¼šåœ¨é…ç½®æ–‡ä»¶ä¸­ï¼Œé€šè¿‡<code>&lt;mapping class="com.example.domain.Student"/&gt;</code>å°†<code>Student</code>ç±»æ˜ å°„åˆ°æ•°æ®åº“è¡¨ã€‚</p>
</li>
<li>
<p><strong>Hibernateæ“ä½œ</strong>ï¼š</p>
<ul>
<li><strong>åˆ›å»ºSessionFactory</strong>ï¼šé€šè¿‡<code>Configuration</code>ç±»è¯»å–<code>hibernate.cfg.xml</code>æ–‡ä»¶åˆ›å»º<code>SessionFactory</code>ã€‚</li>
<li><strong>è·å–Session</strong>ï¼šé€šè¿‡<code>SessionFactory</code>è·å–<code>Session</code>å¯¹è±¡ã€‚</li>
<li><strong>å¯åŠ¨äº‹åŠ¡</strong>ï¼šé€šè¿‡<code>Session</code>å¯¹è±¡å¯åŠ¨äº‹åŠ¡ã€‚</li>
<li><strong>CRUDæ“ä½œ</strong>ï¼š
<ul>
<li><strong>åˆ›å»ºå¹¶ä¿å­˜</strong>ï¼šä½¿ç”¨<code>session.save()</code>æ–¹æ³•ä¿å­˜ä¸€ä¸ªæ–°çš„<code>Student</code>å¯¹è±¡ã€‚</li>
<li><strong>è¯»å–</strong>ï¼šä½¿ç”¨<code>session.get()</code>æ–¹æ³•æ ¹æ®ä¸»é”®è¯»å–<code>Student</code>å¯¹è±¡ã€‚</li>
<li><strong>æ›´æ–°</strong>ï¼šä¿®æ”¹å¯¹è±¡çš„å±æ€§å€¼å¹¶ä½¿ç”¨<code>session.update()</code>æ–¹æ³•è¿›è¡Œæ›´æ–°ã€‚</li>
<li><strong>åˆ é™¤</strong>ï¼šä½¿ç”¨<code>session.delete()</code>æ–¹æ³•åˆ é™¤å¯¹è±¡ã€‚</li>
</ul>
</li>
<li><strong>æäº¤äº‹åŠ¡</strong>ï¼šé€šè¿‡<code>transaction.commit()</code>æ–¹æ³•æäº¤äº‹åŠ¡ã€‚</li>
</ul>
</li>
</ol>
<p>é€šè¿‡è¿™ç§æ–¹å¼ï¼ŒHibernateå¯ä»¥å°†Javaå¯¹è±¡æŒä¹…åŒ–åˆ°æ•°æ®åº“ä¸­ï¼Œå¤„ç†å¯¹è±¡çš„CRUDæ“ä½œï¼Œå®ç°å¯¹è±¡ä¸æ•°æ®åº“è¡¨ä¹‹é—´çš„æ˜ å°„å’Œç®¡ç†ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Hibernateï¼ˆ6ï¼‰ Hibernateæ”¯æŒå“ªäº›æ•°æ®åº“ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7588064253635002422</link>    <guid>https://juejin.cn/post/7588064253635002422</guid>    <pubDate>2025-12-26T23:06:38.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588064253635002422" data-draft-id="7588064253634969654" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Hibernateï¼ˆ6ï¼‰ Hibernateæ”¯æŒå“ªäº›æ•°æ®åº“ï¼Ÿ"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-26T23:06:38.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Victor356"/> <meta itemprop="url" content="https://juejin.cn/user/3492507879476878"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Hibernateï¼ˆ6ï¼‰ Hibernateæ”¯æŒå“ªäº›æ•°æ®åº“ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3492507879476878/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Victor356
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-26T23:06:38.000Z" title="Fri Dec 26 2025 23:06:38 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>Hibernateæ˜¯ä¸€ä¸ªå¼ºå¤§çš„å¯¹è±¡å…³ç³»æ˜ å°„ï¼ˆORMï¼‰æ¡†æ¶ï¼Œæ”¯æŒå¤šç§ä¸åŒçš„å…³ç³»å‹æ•°æ®åº“ã€‚å…¶ä¸»è¦ä¼˜åŠ¿ä¹‹ä¸€æ˜¯èƒ½å¤Ÿåœ¨åº”ç”¨ä»£ç ä¸­ä½¿ç”¨ç›¸åŒçš„APIï¼Œè€Œæ— éœ€å…³å¿ƒåº•å±‚æ•°æ®åº“çš„å…·ä½“å®ç°ã€‚Hibernateé€šè¿‡æ–¹è¨€ï¼ˆDialectï¼‰æ¥é€‚é…ä¸åŒçš„æ•°æ®åº“ã€‚</p>
<h3 data-id="heading-0">å¸¸è§çš„æ”¯æŒæ•°æ®åº“åŠå…¶æ–¹è¨€</h3>
<p>ä»¥ä¸‹æ˜¯Hibernateæ”¯æŒçš„ä¸€äº›å¸¸è§æ•°æ®åº“åŠå…¶ç›¸åº”çš„æ–¹è¨€ï¼š</p>
<ol>
<li><strong>MySQL</strong> - <code>org.hibernate.dialect.MySQLDialect</code></li>
<li><strong>PostgreSQL</strong> - <code>org.hibernate.dialect.PostgreSQLDialect</code></li>
<li><strong>Oracle</strong> - <code>org.hibernate.dialect.OracleDialect</code></li>
<li><strong>Microsoft SQL Server</strong> - <code>org.hibernate.dialect.SQLServerDialect</code></li>
<li><strong>SQLite</strong> - <code>org.hibernate.dialect.SQLiteDialect</code></li>
<li><strong>H2</strong> - <code>org.hibernate.dialect.H2Dialect</code></li>
<li><strong>DB2</strong> - <code>org.hibernate.dialect.DB2Dialect</code></li>
<li><strong>Informix</strong> - <code>org.hibernate.dialect.InformixDialect</code></li>
<li><strong>Sybase</strong> - <code>org.hibernate.dialect.SybaseDialect</code></li>
<li><strong>HSQLDB (HyperSQL)</strong> - <code>org.hibernate.dialect.HSQLDialect</code></li>
</ol>
<h3 data-id="heading-1">é…ç½®ç¤ºä¾‹</h3>
<p>æˆ‘ä»¬é€šè¿‡ä¸åŒçš„æ•°æ®åº“é…ç½®æ¥å±•ç¤ºå¦‚ä½•åœ¨Hibernateä¸­ä½¿ç”¨è¿™äº›æ–¹è¨€ã€‚</p>
<h4 data-id="heading-2">1. MySQL é…ç½®ç¤ºä¾‹</h4>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">hibernate-configuration</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">session-factory</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.connection.driver_class"</span>&gt;</span>com.mysql.cj.jdbc.Driver<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.connection.url"</span>&gt;</span>jdbc:mysql://localhost:3306/your_database<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.connection.username"</span>&gt;</span>your_username<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.connection.password"</span>&gt;</span>your_password<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.dialect"</span>&gt;</span>org.hibernate.dialect.MySQLDialect<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">mapping</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"com.example.domain.Student"</span>/&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">session-factory</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">hibernate-configuration</span>&gt;</span>
</code></pre>
<h4 data-id="heading-3">2. PostgreSQL é…ç½®ç¤ºä¾‹</h4>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">hibernate-configuration</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">session-factory</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.connection.driver_class"</span>&gt;</span>org.postgresql.Driver<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.connection.url"</span>&gt;</span>jdbc:postgresql://localhost:5432/your_database<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.connection.username"</span>&gt;</span>your_username<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.connection.password"</span>&gt;</span>your_password<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.dialect"</span>&gt;</span>org.hibernate.dialect.PostgreSQLDialect<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">mapping</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"com.example.domain.Student"</span>/&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">session-factory</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">hibernate-configuration</span>&gt;</span>
</code></pre>
<h4 data-id="heading-4">3. Oracle é…ç½®ç¤ºä¾‹</h4>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">hibernate-configuration</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">session-factory</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.connection.driver_class"</span>&gt;</span>oracle.jdbc.driver.OracleDriver<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.connection.url"</span>&gt;</span>jdbc:oracle:thin:@localhost:1521:xe<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.connection.username"</span>&gt;</span>your_username<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.connection.password"</span>&gt;</span>your_password<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.dialect"</span>&gt;</span>org.hibernate.dialect.OracleDialect<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">mapping</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"com.example.domain.Student"</span>/&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">session-factory</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">hibernate-configuration</span>&gt;</span>
</code></pre>
<h4 data-id="heading-5">4. Microsoft SQL Server é…ç½®ç¤ºä¾‹</h4>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">hibernate-configuration</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">session-factory</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.connection.driver_class"</span>&gt;</span>com.microsoft.sqlserver.jdbc.SQLServerDriver<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.connection.url"</span>&gt;</span>jdbc:sqlserver://localhost;databaseName=your_database<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.connection.username"</span>&gt;</span>your_username<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.connection.password"</span>&gt;</span>your_password<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.dialect"</span>&gt;</span>org.hibernate.dialect.SQLServerDialect<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">mapping</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"com.example.domain.Student"</span>/&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">session-factory</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">hibernate-configuration</span>&gt;</span>
</code></pre>
<h4 data-id="heading-6">5. SQLite é…ç½®ç¤ºä¾‹</h4>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">hibernate-configuration</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">session-factory</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.connection.driver_class"</span>&gt;</span>org.sqlite.JDBC<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.connection.url"</span>&gt;</span>jdbc:sqlite:your_database.db<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.dialect"</span>&gt;</span>org.hibernate.dialect.SQLiteDialect<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">mapping</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"com.example.domain.Student"</span>/&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">session-factory</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">hibernate-configuration</span>&gt;</span>
</code></pre>
<h3 data-id="heading-7">å¸¸è§é…ç½®å‚æ•°è¯´æ˜</h3>
<ul>
<li><strong>hibernate.connection.driver_class</strong>: JDBCé©±åŠ¨ç±»åã€‚</li>
<li><strong>hibernate.connection.url</strong>: æ•°æ®åº“è¿æ¥URLã€‚</li>
<li><strong>hibernate.connection.username</strong>: æ•°æ®åº“ç”¨æˆ·åã€‚</li>
<li><strong>hibernate.connection.password</strong>: æ•°æ®åº“å¯†ç ã€‚</li>
<li><strong>hibernate.dialect</strong>: æ•°æ®åº“æ–¹è¨€ï¼ŒHibernateæ ¹æ®æ–¹è¨€ç”Ÿæˆç‰¹å®šäºæ•°æ®åº“çš„SQLè¯­å¥ã€‚</li>
<li><strong>mapping class</strong>: è¦æ˜ å°„çš„å®ä½“ç±»ã€‚</li>
</ul>
<h3 data-id="heading-8">ä½¿ç”¨ç¤ºä¾‹</h3>
<p>ç»“åˆä¸Šè¿°é…ç½®æ–‡ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ä»¥ä¸‹ä»£ç è¿›è¡ŒHibernateçš„åˆå§‹åŒ–å’Œä½¿ç”¨ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.hibernate.Session;
<span class="hljs-keyword">import</span> org.hibernate.SessionFactory;
<span class="hljs-keyword">import</span> org.hibernate.Transaction;
<span class="hljs-keyword">import</span> org.hibernate.cfg.Configuration;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HibernateUtil</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> SessionFactory sessionFactory;

    <span class="hljs-keyword">static</span> {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// åˆ›å»ºSessionFactory</span>
            sessionFactory = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Configuration</span>().configure(<span class="hljs-string">"hibernate.cfg.xml"</span>).buildSessionFactory();
        } <span class="hljs-keyword">catch</span> (Throwable ex) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ExceptionInInitializerError</span>(ex);
        }
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> SessionFactory <span class="hljs-title function_">getSessionFactory</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> sessionFactory;
    }
}

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HibernateExample</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-type">SessionFactory</span> <span class="hljs-variable">sessionFactory</span> <span class="hljs-operator">=</span> HibernateUtil.getSessionFactory();
        <span class="hljs-type">Session</span> <span class="hljs-variable">session</span> <span class="hljs-operator">=</span> sessionFactory.openSession();
        <span class="hljs-type">Transaction</span> <span class="hljs-variable">transaction</span> <span class="hljs-operator">=</span> session.beginTransaction();

        <span class="hljs-comment">// åˆ›å»ºå¹¶ä¿å­˜å­¦ç”Ÿå¯¹è±¡</span>
        <span class="hljs-type">Student</span> <span class="hljs-variable">student</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Student</span>(<span class="hljs-string">"John Doe"</span>, <span class="hljs-number">20</span>);
        session.save(student);

        transaction.commit();

        <span class="hljs-comment">// è¯»å–å­¦ç”Ÿå¯¹è±¡</span>
        transaction = session.beginTransaction();
        <span class="hljs-type">Student</span> <span class="hljs-variable">retrievedStudent</span> <span class="hljs-operator">=</span> session.get(Student.class, student.getId());
        System.out.println(<span class="hljs-string">"Retrieved Student: "</span> + retrievedStudent.getName() + <span class="hljs-string">", Age: "</span> + retrievedStudent.getAge());
        transaction.commit();

        <span class="hljs-comment">// æ›´æ–°å­¦ç”Ÿå¯¹è±¡</span>
        transaction = session.beginTransaction();
        retrievedStudent.setAge(<span class="hljs-number">21</span>);
        session.update(retrievedStudent);
        transaction.commit();

        <span class="hljs-comment">// åˆ é™¤å­¦ç”Ÿå¯¹è±¡</span>
        transaction = session.beginTransaction();
        session.delete(retrievedStudent);
        transaction.commit();

        session.close();
        sessionFactory.close();
    }
}
</code></pre>
<h3 data-id="heading-9">æ€»ç»“</h3>
<p>é€šè¿‡é…ç½®ä¸åŒçš„æ–¹è¨€ï¼ŒHibernateå¯ä»¥æ”¯æŒå¤šç§æ•°æ®åº“ã€‚å¼€å‘è€…åªéœ€ä¿®æ”¹é…ç½®æ–‡ä»¶ä¸­çš„æ–¹è¨€å’Œæ•°æ®åº“è¿æ¥ä¿¡æ¯ï¼Œå³å¯åˆ‡æ¢åˆ°ä¸åŒçš„æ•°æ®åº“è€Œæ— éœ€æ”¹å˜åº”ç”¨ä»£ç ã€‚Hibernateçš„è¿™ç§è®¾è®¡æå¤§åœ°æé«˜äº†åº”ç”¨ç¨‹åºçš„å¯ç§»æ¤æ€§å’Œçµæ´»æ€§ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Next.jsç¬¬åå…­ç« (fontå­—ä½“)]]></title>    <link>https://juejin.cn/post/7587997157237571636</link>    <guid>https://juejin.cn/post/7587997157237571636</guid>    <pubDate>2025-12-26T21:54:15.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587997157237571636" data-draft-id="7588010346070638602" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Next.jsç¬¬åå…­ç« (fontå­—ä½“)"/> <meta itemprop="keywords" content="å‰ç«¯,Next.js"/> <meta itemprop="datePublished" content="2025-12-26T21:54:15.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å°æ»¡zs"/> <meta itemprop="url" content="https://juejin.cn/user/2463384809252397"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Next.jsç¬¬åå…­ç« (fontå­—ä½“)
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2463384809252397/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å°æ»¡zs
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-26T21:54:15.000Z" title="Fri Dec 26 2025 21:54:15 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">fontå­—ä½“</h2>
<p><code>next/font</code>æ¨¡å—ï¼Œå†…ç½®äº†å­—ä½“ä¼˜åŒ–åŠŸèƒ½ï¼Œå…¶ç›®çš„æ˜¯é˜²æ­¢<code>CLS</code>å¸ƒå±€åç§»ã€‚fontæ¨¡å—ä¸»è¦åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼Œä¸€éƒ¨åˆ†æ˜¯å†…ç½®çš„<code>Google Fonts</code>å­—ä½“ï¼Œå¦ä¸€éƒ¨åˆ†æ˜¯æœ¬åœ°å­—ä½“ã€‚</p>
<h4 data-id="heading-1">åŸºæœ¬ç”¨æ³•</h4>
<h5 data-id="heading-2">Goggleå­—ä½“</h5>
<p>åœ¨ä½¿ç”¨googleå­—ä½“çš„æ—¶å€™ï¼ŒGoogleå­—ä½“å’Œcssæ–‡ä»¶ä¼šåœ¨æ„å»ºçš„æ—¶å€™ä¸‹è½½åˆ°æœ¬åœ°ï¼Œå¯ä»¥ä¸é™æ€èµ„æºä¸€èµ·æ‰˜ç®¡åˆ°æœåŠ¡å™¨ï¼Œæ‰€ä»¥ä¸ä¼šå‘Googleå‘é€è¯·æ±‚ã€‚</p>
<ol>
<li>åŸºæœ¬ä½¿ç”¨</li>
</ol>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">import</span> { BBH_Sans_Hegarty } <span class="hljs-keyword">from</span> <span class="hljs-string">'next/font/google'</span> <span class="hljs-comment">//å¼•å…¥å­—ä½“åº“</span>
<span class="hljs-keyword">const</span> bbhSansHegarty = <span class="hljs-title function_">BBH_Sans_Hegarty</span>({
  <span class="hljs-attr">weight</span>: <span class="hljs-string">'400'</span>, <span class="hljs-comment">//å­—ä½“ç²—ç»†</span>
  <span class="hljs-attr">display</span>: <span class="hljs-string">'swap'</span>, <span class="hljs-comment">//å­—ä½“æ˜¾ç¤ºæ–¹å¼</span>
})
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">RootLayout</span>(<span class="hljs-params">{ children }: Readonly&lt;{ children: React.ReactNode }&gt;</span>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">body</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{bbhSansHegarty.className}</span>&gt;</span> {/** bbhSansHegartyä¼šè¿”å›ä¸€ä¸ªç±»åï¼Œç”¨äºåŠ è½½å­—ä½“ */}
        {children}
        sdsadasdjsalkdjasl
        ä½ å¥½
      <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></span>
  );
}
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bcefd9c6f27540ecb6b8baf82cea3320~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5ruhenM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767390855&amp;x-signature=Zw4b%2BVpblJHbxPR9mqpMWqPKqV4%3D" alt="google.png" loading="lazy"/></p>
<ol start="2">
<li>å¯å˜å­—ä½“</li>
</ol>
<p>å¯å˜å­—ä½“æ˜¯ä¸€ç§å¯ä»¥é€‚åº”ä¸åŒå­—é‡å’Œæ ·å¼çš„å­—ä½“ï¼Œå®ƒå¯ä»¥åœ¨ä¸åŒçš„è®¾å¤‡ä¸Šè‡ªåŠ¨è°ƒæ•´å­—ä½“å¤§å°å’Œæ ·å¼ï¼Œä»¥é€‚åº”ä¸åŒçš„å±å¹•å¤§å°å’Œåˆ†è¾¨ç‡ã€‚</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Roboto</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'next/font/google'</span>
<span class="hljs-keyword">const</span> roboto = <span class="hljs-title class_">Roboto</span>({
  <span class="hljs-attr">weight</span>: [<span class="hljs-string">'400'</span>, <span class="hljs-string">'700'</span>], <span class="hljs-comment">//å­—ä½“ç²—ç»† (ä¸æ˜¯æ‰€æœ‰å­—ä½“éƒ½æ”¯æŒå¯å˜å­—ä½“)</span>
  <span class="hljs-attr">style</span>: [<span class="hljs-string">'normal'</span>, <span class="hljs-string">'italic'</span>], <span class="hljs-comment">//å­—ä½“æ ·å¼   </span>
  <span class="hljs-attr">subsets</span>: [<span class="hljs-string">'latin'</span>],
  <span class="hljs-attr">display</span>: <span class="hljs-string">'swap'</span>,
})
</code></pre>
<p>å¦‚ä½•é€‰æ‹©å…¶ä»–å­—ä½“ï¼Ÿå¯ä»¥å‚è€ƒ<a href="https://link.juejin.cn?target=https%3A%2F%2Ffonts.google.com%2F" target="_blank" title="https://fonts.google.com/" ref="nofollow noopener noreferrer">Google Fonts</a></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4e9ca54c48d442008bf9ed53a7ae0d64~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5ruhenM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767390855&amp;x-signature=ObOKJs3LM3bAhaSQm%2B6tFMwxO0s%3D" alt="web.png" loading="lazy"/></p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Inter</span>,BBH_Sans_Bartle,<span class="hljs-title class_">Roboto</span>_Slab,<span class="hljs-title class_">Rubik</span>,<span class="hljs-title class_">Montserrat</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'next/font/google'</span> <span class="hljs-comment">//å¼•å…¥å…¶ä»–å­—ä½“åº“</span>
</code></pre>
<h4 data-id="heading-3">API å‚è€ƒ</h4>
<h4 data-id="heading-4">é…ç½®é€‰é¡¹</h4>





































































































<table><thead><tr><th>å±æ€§</th><th>Google</th><th>æœ¬åœ°</th><th>ç±»å‹</th><th>å¿…å¡«</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>src</code></td><td>âœ—</td><td>âœ“</td><td>String/Array</td><td>æ˜¯</td><td>å­—ä½“æ–‡ä»¶è·¯å¾„</td></tr><tr><td><code>weight</code></td><td>âœ“</td><td>âœ“</td><td>String/Array</td><td>å¯é€‰</td><td>å­—ä½“ç²—ç»†ï¼Œå¦‚ '400'</td></tr><tr><td><code>style</code></td><td>âœ“</td><td>âœ“</td><td>String/Array</td><td>-</td><td>å­—ä½“æ ·å¼ï¼Œå¦‚ 'normal'</td></tr><tr><td><code>subsets</code></td><td>âœ“</td><td>âœ—</td><td>Array</td><td>-</td><td>å­—ç¬¦å­é›†</td></tr><tr><td><code>axes</code></td><td>âœ“</td><td>âœ—</td><td>Array</td><td>-</td><td>å¯å˜å­—ä½“è½´</td></tr><tr><td><code>display</code></td><td>âœ“</td><td>âœ“</td><td>String</td><td>-</td><td>æ˜¾ç¤ºç­–ç•¥</td></tr><tr><td><code>preload</code></td><td>âœ“</td><td>âœ“</td><td>Boolean</td><td>-</td><td>æ˜¯å¦é¢„åŠ è½½</td></tr><tr><td><code>fallback</code></td><td>âœ“</td><td>âœ“</td><td>Array</td><td>-</td><td>å¤‡ç”¨å­—ä½“</td></tr><tr><td><code>adjustFontFallback</code></td><td>âœ“</td><td>âœ“</td><td>Boolean/String</td><td>-</td><td>è°ƒæ•´å¤‡ç”¨å­—ä½“</td></tr><tr><td><code>variable</code></td><td>âœ“</td><td>âœ“</td><td>String</td><td>-</td><td>CSS å˜é‡</td></tr><tr><td><code>declarations</code></td><td>âœ—</td><td>âœ“</td><td>Array</td><td>-</td><td>è‡ªå®šä¹‰å£°æ˜</td></tr></tbody></table>
<h5 data-id="heading-5">style</h5>
<p>å­—ä½“æ ·å¼ï¼Œå¦‚ 'normal' 'italicï¼ˆæ–œä½“ï¼‰' 'obliqueï¼ˆå€¾æ–œï¼‰' ç­‰ã€‚</p>
<h5 data-id="heading-6">weight</h5>
<p>å­—ä½“ç²—ç»†ï¼Œå¦‚ '400' '700' '900' ç­‰ã€‚</p>
<h5 data-id="heading-7">display</h5>
<p><strong>auto</strong>ï¼šæµè§ˆå™¨é»˜è®¤ï¼ˆé€šå¸¸ä¸º blockï¼‰</p>
<p><strong>block</strong>ï¼šç©ºç™½ 3s â†’ å¤‡ç”¨å­—ä½“ â†’ è‡ªå®šä¹‰å­—ä½“</p>
<p><strong>swap</strong>ï¼šå¤‡ç”¨å­—ä½“ â†’ è‡ªå®šä¹‰å­—ä½“</p>
<p><strong>fallback</strong>ï¼šç©ºç™½ 100ms â†’ å¤‡ç”¨å­—ä½“ï¼Œ3s å†…åŠ è½½å®Œæˆåˆ™åˆ‡æ¢</p>
<p><strong>optional</strong>ï¼šç©ºç™½ 100msï¼Œ100ms å†…åŠ è½½å®Œæˆåˆ™ä½¿ç”¨ï¼Œå¦åˆ™ç”¨å¤‡ç”¨å­—ä½“</p>
<h5 data-id="heading-8">æœ¬åœ°å­—ä½“</h5>
<p>å­—ä½“ä¸‹è½½åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fnextjs-docs-henna-six.vercel.app%2FZhiyongDatongFont.ttf" target="_blank" title="https://nextjs-docs-henna-six.vercel.app/ZhiyongDatongFont.ttf" ref="nofollow noopener noreferrer">å…è´¹å¯å•†ç”¨å­—ä½“</a></p>
<p>æœ¬åœ°å­—ä½“éœ€è¦é€šè¿‡<code>src</code>å±æ€§æŒ‡å®šå­—ä½“æ–‡ä»¶è·¯å¾„ï¼Œå­—ä½“æ–‡ä»¶è·¯å¾„å¯ä»¥æ˜¯å•ä¸ªæ–‡ä»¶ï¼Œä¹Ÿå¯ä»¥æ˜¯å¤šä¸ªæ–‡ä»¶ã€‚</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">import</span> localFont <span class="hljs-keyword">from</span> <span class="hljs-string">'next/font/local'</span>
<span class="hljs-keyword">const</span> local = <span class="hljs-title function_">localFont</span>({
  <span class="hljs-attr">src</span>:<span class="hljs-string">'./font/zydtt.ttf'</span>, <span class="hljs-comment">//æœ¬åœ°å­—ä½“æ–‡ä»¶è·¯å¾„</span>
  <span class="hljs-attr">display</span>: <span class="hljs-string">'swap'</span>, <span class="hljs-comment">//å­—ä½“æ˜¾ç¤ºæ–¹å¼</span>
})
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">RootLayout</span>(<span class="hljs-params">{ children }: Readonly&lt;{ children: React.ReactNode }&gt;</span>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">body</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{local.className}</span>&gt;</span>
        {children}
        sdsadasdjsalkdjasl
        ä½ å¥½
      <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></span>
  );
}
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2bb7fb89090e41c390d7abe5f29ae5ec~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5ruhenM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767390855&amp;x-signature=Ei%2BKONlI6FK%2Fjz5etg4BCPSrSDU%3D" alt="local.png" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Next.jsç¬¬åä¸ƒç« (Scriptè„šæœ¬)]]></title>    <link>https://juejin.cn/post/7588031908171071497</link>    <guid>https://juejin.cn/post/7588031908171071497</guid>    <pubDate>2025-12-26T22:01:10.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588031908171071497" data-draft-id="7587997157237588020" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Next.jsç¬¬åä¸ƒç« (Scriptè„šæœ¬)"/> <meta itemprop="keywords" content="å‰ç«¯,Next.js"/> <meta itemprop="datePublished" content="2025-12-26T22:01:10.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å°æ»¡zs"/> <meta itemprop="url" content="https://juejin.cn/user/2463384809252397"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Next.jsç¬¬åä¸ƒç« (Scriptè„šæœ¬)
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2463384809252397/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å°æ»¡zs
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-26T22:01:10.000Z" title="Fri Dec 26 2025 22:01:10 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Scriptç»„ä»¶</h2>
<p>Next.jså…è®¸æˆ‘ä»¬ä½¿ç”¨Scriptç»„ä»¶å»åŠ è½½jsè„šæœ¬(å¤–éƒ¨/æœ¬åœ°è„šæœ¬)ï¼Œå¹¶ä¸”ä»–è¿˜å¯¹Scriptç»„ä»¶è¿›è¡Œä¼˜åŒ–ã€‚</p>
<h4 data-id="heading-1">åŸºæœ¬ä½¿ç”¨</h4>
<h5 data-id="heading-2">å±€éƒ¨å¼•å…¥</h5>
<p>src/app/home/page.tsx</p>
<p>åœ¨homeè·¯ç”±å¼•å…¥ä¸€ä¸ªè¿œç¨‹çš„jsè„šæœ¬ï¼Œä»–åªä¼šåœ¨åˆ‡æ¢åˆ°homeè·¯ç”±æ—¶æ‰ä¼šåŠ è½½ï¼Œå¹¶ä¸”åªä¼šåŠ è½½ä¸€æ¬¡ï¼Œç„¶åçº³å…¥ç¼“å­˜ã€‚</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">Script</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'next/script'</span> <span class="hljs-comment">//å¼•å…¥Scriptç»„ä»¶</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">HomePage</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> (
        <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">Script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://unpkg.com/vue@3/dist/vue.global.js"</span> /&gt;</span><span class="xml">
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span></span>
    )
}
</code></pre>
<p>ä»–çš„åº•å±‚åŸç†ä¼šæŠŠè¿™ä¸ª<code>Script</code>ç»„ä»¶è½¬æ¢æˆ<code>&lt;script&gt;</code>æ ‡ç­¾ï¼Œç„¶åæ’å…¥åˆ°<code>&lt;head&gt;</code>æ ‡ç­¾ä¸­ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b46cb2a31d4a40c5bb4c280642d449ee~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5ruhenM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767391270&amp;x-signature=8FpB%2BRbdoa5Xu1eD6NBbkKy2eUc%3D" alt="head.png" loading="lazy"/></p>
<h5 data-id="heading-3">å…¨å±€å¼•å…¥</h5>
<p>src/app/layout.tsx</p>
<p>å…¨å±€å¼•å…¥ç›´æ¥åœ¨app/layout.tsxä¸­å¼•å…¥ï¼Œä»–ä¼šè‡ªåŠ¨åœ¨æ‰€æœ‰é¡µé¢ä¸­å¼•å…¥ï¼Œå¹¶ä¸”åªä¼šåŠ è½½ä¸€æ¬¡ï¼Œç„¶åçº³å…¥ç¼“å­˜ã€‚</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">Script</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'next/script'</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">RootLayout</span>(<span class="hljs-params">{ children }: { children: React.ReactNode }</span>) {
    <span class="hljs-keyword">return</span> (
        <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">Script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://unpkg.com/vue@3/dist/vue.global.js"</span> /&gt;</span><span class="xml">
            <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
                {children}
            <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></span></span>
    )
}
</code></pre>
<h5 data-id="heading-4">åŠ è½½ç­–ç•¥</h5>
<p>Next.jså…è®¸æˆ‘ä»¬é€šè¿‡<code>strategy</code>å±æ€§æ¥æ§åˆ¶<code>Script</code>ç»„ä»¶çš„åŠ è½½ç­–ç•¥ã€‚</p>
<ul>
<li><code>beforeInteractive</code>: åœ¨ä»£ç å’Œé¡µé¢ä¹‹å‰åŠ è½½<code>ä¼šé˜»å¡é¡µé¢æ¸²æŸ“</code>ã€‚</li>
<li><code>afterInteractive</code>(é»˜è®¤å€¼): åœ¨é¡µé¢æ¸²æŸ“åˆ°å®¢æˆ·ç«¯ä¹‹ååŠ è½½ã€‚</li>
<li><code>lazyOnload</code>: åœ¨æµè§ˆå™¨ç©ºé—²æ—¶ç¨ååŠ è½½è„šæœ¬ã€‚</li>
<li><code>worker</code>(å®éªŒæ€§ç‰¹æ€§): æš‚æ—¶ä¸å»ºè®®ä½¿ç”¨ã€‚</li>
</ul>
<pre><code class="hljs language-tsx" lang="tsx">&lt;<span class="hljs-title class_">Script</span> id=<span class="hljs-string">"VGUBHJMK1"</span> strategy=<span class="hljs-string">"beforeInteractive"</span> src=<span class="hljs-string">"https://unpkg.com/vue@3/dist/vue.global.js"</span> /&gt;
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Script</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"VGUBHJMK2"</span> <span class="hljs-attr">strategy</span>=<span class="hljs-string">"afterInteractive"</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://unpkg.com/vue@3/dist/vue.global.js"</span> /&gt;</span></span>
<span class="xml"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Script</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"VGUBHJMK3"</span> <span class="hljs-attr">strategy</span>=<span class="hljs-string">"lazyOnload"</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://unpkg.com/vue@3/dist/vue.global.js"</span> /&gt;</span></span></span>
<span class="xml"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Script</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"VGUBHJMK4"</span> <span class="hljs-attr">strategy</span>=<span class="hljs-string">"worker"</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://unpkg.com/vue@3/dist/vue.global.js"</span> /&gt;</span></span></span>
</code></pre>
<blockquote>
<p>webWorkeræ¨¡å¼ å°šä¸ç¨³å®šï¼Œè°¨æ…ä½¿ç”¨,å°æç¤ºå¯ä»¥ç»™Scriptç»„ä»¶æ·»åŠ idï¼ŒNext.jsä¼šè¿½è¸ªä¼˜åŒ–ã€‚</p>
</blockquote>
<h5 data-id="heading-5">å†…è”è„šæœ¬</h5>
<p>å³ä½¿ä¸ä»å¤–éƒ¨æ–‡ä»¶è½½å…¥è„šæœ¬ï¼ŒNext.jsä¹Ÿæ”¯æŒæˆ‘ä»¬é€šè¿‡{}ç›´æ¥åœ¨<code>Scriptç»„ä»¶</code>ç¼–å†™ä»£ç ã€‚</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">Script</span> <span class="hljs-keyword">from</span> <span class="hljs-string">"next/script"</span>;
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">RootLayout</span>(<span class="hljs-params">{
  children
}: Readonly&lt;{
  children: React.ReactNode;
}&gt;</span>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">Script</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"VGUBHJMK5"</span> <span class="hljs-attr">strategy</span>=<span class="hljs-string">"beforeInteractive"</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://unpkg.com/vue@3/dist/vue.global.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">Script</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
        {children}
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"app"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">Script</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"VGUBHJMK6"</span>
         <span class="hljs-attr">strategy</span>=<span class="hljs-string">"afterInteractive"</span>&gt;</span><span class="xml">
        {
           `
            const {createApp} = Vue
            createApp({
              template: '<span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>{{ message }}<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>',
              setup() {
                return {
                  message: 'Next.js + Vue.js'
                }
              }
            }).mount('#app')
          `
        }
        </span><span class="hljs-tag">&lt;/<span class="hljs-name">Script</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></span>
  );
}
</code></pre>
<p>ç¬¬äºŒç§å†™æ³•ä½¿ç”¨ dangerouslySetInnerHTML å±æ€§æ¥è®¾ç½®å†…è”è„šæœ¬ã€‚</p>
<pre><code class="hljs language-tsx" lang="tsx">&lt;<span class="hljs-title class_">Script</span> dangerouslySetInnerHTML={{<span class="hljs-attr">__html</span>: <span class="hljs-string">`
    const {createApp} = Vue
    createApp({
        template: '&lt;h1&gt;{{ message }}&lt;/h1&gt;',
        setup() {
        return {
            message: 'Next.js + Vue.js'
        }
        }
    }).mount('#app')
    `</span> }} strategy=<span class="hljs-string">"afterInteractive"</span>&gt;
&lt;/<span class="hljs-title class_">Script</span>&gt;
</code></pre>
<h5 data-id="heading-6">äº‹ä»¶ç›‘å¬</h5>
<ul>
<li>onload: è„šæœ¬åŠ è½½å®Œæˆæ—¶è§¦å‘ã€‚</li>
<li>onReady: è„šæœ¬åŠ è½½å®Œæˆåï¼Œä¸”ç»„ä»¶æ¯æ¬¡æŒ‚è½½çš„æ—¶å€™éƒ½ä¼šè§¦å‘ã€‚</li>
<li>onError: è„šæœ¬åŠ è½½å¤±è´¥æ—¶è§¦å‘ã€‚</li>
</ul>
<p>Scriptç»„ä»¶åªæœ‰åœ¨å¯¼å…¥å®¢æˆ·ç«¯çš„æ—¶å€™æ‰ä¼šç”Ÿæ•ˆï¼Œæ‰€ä»¥éœ€è¦ä½¿ç”¨<code>'use client'</code>å£°æ˜è¿™æ˜¯ä¸€ä¸ªå®¢æˆ·ç«¯ç»„ä»¶ã€‚</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-string">'use client'</span>
 
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Script</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'next/script'</span>
 
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Page</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Script</span>
        <span class="hljs-attr">src</span>=<span class="hljs-string">"https://example.com/script.js"</span>
        <span class="hljs-attr">onLoad</span>=<span class="hljs-string">{()</span> =&gt;</span><span class="javascript"> {
          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Script has loaded'</span>)
        }}
      /&gt;
    &lt;/&gt;</span></span>
  )
}
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[LeetCode çƒ­é¢˜100 --- åŒæŒ‡é’ˆä¸“åŒº]]></title>    <link>https://juejin.cn/post/7588002126258913286</link>    <guid>https://juejin.cn/post/7588002126258913286</guid>    <pubDate>2025-12-26T17:36:42.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588002126258913286" data-draft-id="7587322796826443816" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="LeetCode çƒ­é¢˜100 --- åŒæŒ‡é’ˆä¸“åŒº"/> <meta itemprop="keywords" content="ç®—æ³•"/> <meta itemprop="datePublished" content="2025-12-26T17:36:42.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è°è¨€è¥¿è¥¿é‡Œ"/> <meta itemprop="url" content="https://juejin.cn/user/332466136029851"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            LeetCode çƒ­é¢˜100 --- åŒæŒ‡é’ˆä¸“åŒº
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/332466136029851/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è°è¨€è¥¿è¥¿é‡Œ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-26T17:36:42.000Z" title="Fri Dec 26 2025 17:36:42 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0"><a href="https://link.juejin.cn?target=https%3A%2F%2Fleetcode.cn%2Fproblems%2Fmove-zeroes%2Fdescription%2F%3FenvType%3Dstudy-plan-v2%26envId%3Dtop-100-liked" target="_blank" title="https://leetcode.cn/problems/move-zeroes/description/?envType=study-plan-v2&amp;envId=top-100-liked" ref="nofollow noopener noreferrer">283. ç§»åŠ¨é›¶ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰</a></h2>
<h3 data-id="heading-1">é¢˜ç›®åˆ†æï¼š</h3>
<p>é¢˜ç›®è¦æ±‚å°†æ•°ç»„ <code>nums</code> ä¸­æ‰€æœ‰ 0 ç§»åŠ¨è‡³æ•°ç»„æœ«å°¾ï¼ŒåŒæ—¶ä¿æŒå…¶ä»–éé›¶å…ƒç´ çš„ç›¸å¯¹é¡ºåºä¸å˜ï¼Œå¹¶ä¸”è¦æ±‚åœ¨åŸæ•°ç»„ä¸Šè¿›è¡Œæ“ä½œã€‚</p>
<p>æ ¸å¿ƒè¦æ±‚ï¼š</p>
<ul>
<li><strong>0 è¦ç§»åŠ¨è‡³æ•°ç»„æœ«å°¾</strong></li>
<li><strong>éé›¶å…ƒç´ ç›¸å¯¹ä½ç½®ä¸å˜</strong></li>
<li><strong>åœ¨åŸæ•°ç»„ä¸Šè¿›è¡Œæ“ä½œ</strong></li>
</ul>
<h3 data-id="heading-2">è§£æ³•ä¸€ï¼ˆæš´åŠ›ä½¿ç”¨æ•°ç»„æ–¹æ³•ï¼‰</h3>
<p>éå†æ•°ç»„å°†å…¶ä¸­æ‰€æœ‰ä¸º 0 çš„æ•°<strong>ç›´æ¥ä½¿ç”¨<code>splice</code>åˆ é™¤</strong>å¹¶ä¸”<strong>è®°å½• 0 çš„ä¸ªæ•°</strong>ï¼Œæœ€å<strong>é€šè¿‡<code>push</code>å¡«å…¥</strong>â€œç§»åŠ¨â€çš„ 0</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">var</span> moveZeroes = <span class="hljs-keyword">function</span>(<span class="hljs-params">nums</span>) {
    <span class="hljs-keyword">let</span> n = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; nums.<span class="hljs-property">length</span>;){
        <span class="hljs-keyword">if</span>(nums[i] == <span class="hljs-number">0</span>){
            n++;
            nums.<span class="hljs-title function_">splice</span>(i, <span class="hljs-number">1</span>);
        } <span class="hljs-keyword">else</span> i++;
    }
    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> j = <span class="hljs-number">0</span>; j &lt; n; j++){
        nums.<span class="hljs-title function_">push</span>(<span class="hljs-number">0</span>);
    }
    <span class="hljs-keyword">return</span> nums;
};
</code></pre>
<h4 data-id="heading-3">â±ï¸ æ—¶é—´å¤æ‚åº¦åˆ†æ</h4>
<ul>
<li>
<p><strong><code>splice(i, 1)</code> çš„ä»£ä»·</strong>ï¼š<br/>
åœ¨æ•°ç»„ä¸­é—´åˆ é™¤ä¸€ä¸ªå…ƒç´ ï¼Œéœ€è¦å°† <strong>i åé¢çš„æ‰€æœ‰å…ƒç´ å‘å‰ç§»åŠ¨ä¸€ä½</strong>ã€‚<br/>
--&gt; <strong>æ—¶é—´å¤æ‚åº¦ä¸º O(k)</strong> ï¼Œå…¶ä¸­ k æ˜¯ä» i åˆ°æœ«å°¾çš„å…ƒç´ ä¸ªæ•°ã€‚</p>
</li>
<li>
<p>æœ€åçš„æƒ…å†µï¼šå‡è®¾æ•°ç»„ä¸­æœ‰ <code>z</code> ä¸ª 0ï¼Œä¸”å®ƒä»¬åˆ†å¸ƒåœ¨å‰é¢ï¼š</p>
<ul>
<li>ç¬¬ 1 ä¸ª 0 è¢«åˆ æ—¶ï¼Œç§»åŠ¨ n-1Â ä¸ªå…ƒç´ </li>
<li>ç¬¬ 2 ä¸ª 0 è¢«åˆ æ—¶ï¼Œç§»åŠ¨Â n-2Â ä¸ªå…ƒç´ </li>
<li>...</li>
<li>æœ€åæƒ…å†µæ€»ç§»åŠ¨æ¬¡æ•° â‰ˆÂ (n-1) + (n-2) + ... + (n-z)Â â‰ˆÂ <strong>O(nÂ²)</strong></li>
</ul>
<p>ï¼ˆä¾‹å¦‚è¾“å…¥ <code>[0,0,0,...,0,1]</code>ï¼‰</p>
</li>
<li>
<p><strong><code>push(0)</code>çš„ä»£ä»·</strong>ï¼š æ˜¯ O(z)ï¼Œå¯å¿½ç•¥ã€‚</p>
</li>
</ul>
<p><strong>æœ€åæ—¶é—´å¤æ‚åº¦ï¼šO(nÂ²)</strong></p>
<blockquote>
<p>æ³¨ï¼š</p>
<p>JavaScript æ•°ç»„åœ¨åº•å±‚é€šå¸¸æ˜¯è¿ç»­å†…å­˜ï¼Œè€Œ<code>splice(i, 1)</code>Â ä¼šè§¦å‘Â <strong>å¤§é‡å…ƒç´ çš„å†…å­˜æ‹·è´</strong></p>
<p>âš ï¸ å°½é‡<strong>é¿å…åœ¨å¾ªç¯ä¸­ä½¿ç”¨ <code>splice</code> åˆ é™¤å…ƒç´ </strong>ï¼Œå°¤å…¶æ˜¯åœ¨å¤„ç†å¤§æ•°ç»„æ—¶ï¼Œæ€§èƒ½ä¼šæ€¥å‰§ä¸‹é™</p>
</blockquote>
<h3 data-id="heading-4">è§£æ³•äºŒï¼ˆåŒæŒ‡é’ˆ + äº¤æ¢ï¼‰</h3>
<p>é¢˜ç›®çš„é—®é¢˜æœ¬è´¨ä¸Šæ˜¯å°†æ‰€æœ‰éé›¶çš„å…ƒç´ æŒ‰ç…§åŸå…ˆçš„ç›¸å¯¹é¡ºåºæ’åœ¨æ•°ç»„çš„æœ€å‰æ–¹ï¼Œé‚£ä¹ˆä¸å¦¨é€šè¿‡<strong>ä¸€ä¸ªæŒ‡é’ˆå®‰æ’éé›¶å…ƒç´ çš„ä½ç½®</strong>ï¼Œè€Œ<strong>å¦ä¸€ä¸ªæŒ‡é’ˆæ¥æŸ¥æ‰¾æ‰€æœ‰éé›¶çš„å…ƒç´ </strong>å¹¶ä¸”<strong>é€šè¿‡äº¤æ¢æ¥å°†å…¶æ”¾ç½®</strong>åœ¨æ­£ç¡®çš„ä½ç½®ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">var</span> moveZeroes = <span class="hljs-keyword">function</span>(<span class="hljs-params">nums</span>) {
    <span class="hljs-keyword">let</span> j = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; nums.<span class="hljs-property">length</span>; i++) {
        <span class="hljs-keyword">if</span> (nums[i] != <span class="hljs-number">0</span>) {
            <span class="hljs-keyword">let</span> temp = nums[j];
            nums[j] = nums[i];
            nums[i] = temp;
            <span class="hljs-comment">// [çµèŒ¶å±±è‰¾åºœ] çµç¥åšæ³•ï¼š</span>
            <span class="hljs-comment">// [nums[j],nums[i]] = [nums[i],nums[j]]; ï¼ˆæ›´ç®€æ´ã€æ›´ç°ä»£ï¼‰</span>
            j++;
        }
    }
};
</code></pre>
<h4 data-id="heading-5">â±ï¸ æ—¶é—´å¤æ‚åº¦åˆ†æ</h4>
<ul>
<li><strong>å•æ¬¡éå†</strong>ï¼š<br/>
ä½¿ç”¨ <code>for</code> å¾ªç¯ä» <code>i = 0</code> åˆ° <code>i = nums.length - 1</code> éå†æ•°ç»„ä¸€æ¬¡ â†’ <strong>O(n)</strong></li>
<li><strong>äº¤æ¢æ“ä½œ</strong>ï¼š<br/>
æ¯æ¬¡é‡åˆ°éé›¶å…ƒç´ æ—¶ï¼Œæ‰§è¡Œä¸€æ¬¡äº¤æ¢ï¼ˆé€šè¿‡ä¸´æ—¶å˜é‡æˆ–è§£æ„èµ‹å€¼ï¼‰ï¼Œè¯¥æ“ä½œä¸º <strong>O(1)</strong> ï¼›<br/>
ç”±äº <code>i</code> å•è°ƒé€’å¢ã€<code>j</code> ä¸å›é€€ï¼Œæ¯ä¸ªå…ƒç´ æœ€å¤šè¢«è®¿é—®å’Œäº¤æ¢ä¸€æ¬¡ â†’ <strong>æ€»äº¤æ¢å¼€é”€ä¸º O(n)</strong></li>
<li><strong>æ€»æ—¶é—´å¤æ‚åº¦</strong>ï¼šO(n) + O(n) = <strong>O(n)</strong></li>
</ul>
<h2 data-id="heading-6"><a href="https://link.juejin.cn?target=https%3A%2F%2Fleetcode.cn%2Fproblems%2Fcontainer-with-most-water%2Fdescription%2F%3FenvType%3Dstudy-plan-v2%26envId%3Dtop-100-liked" target="_blank" title="https://leetcode.cn/problems/container-with-most-water/description/?envType=study-plan-v2&amp;envId=top-100-liked" ref="nofollow noopener noreferrer">11. ç››æœ€å¤šæ°´çš„å®¹å™¨ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰</a></h2>
<h3 data-id="heading-7">é¢˜ç›®åˆ†æï¼š</h3>
<p>é¢˜ç›®è¦æ±‚ä»ç»™å®šçš„æ•´æ•°æ•°ç»„ <code>height</code> ä¸­é€‰æ‹©ä¸¤æ¡å‚çº¿ï¼Œä½¿å¾—å®ƒä»¬ä¸ x è½´å…±åŒæ„æˆçš„å®¹å™¨å¯ä»¥å®¹çº³æœ€å¤šçš„æ°´ï¼Œå¹¶è¿”å›è¯¥æœ€å¤§æ°´é‡ã€‚</p>
<p>æ ¸å¿ƒè¦æ±‚ï¼š</p>
<ul>
<li><strong>å®¹å™¨ä¸èƒ½å€¾æ–œ</strong></li>
<li><strong>è¾ƒçŸ­çš„ä¸€æ¡å†³å®šå®¹å™¨çš„é«˜åº¦</strong></li>
<li><strong>å®¹å™¨çš„å®½åº¦ä¸ºç´¢å¼•ä¹‹å·®</strong></li>
<li><strong>ç›®æ ‡æ˜¯ä½¿å®¹å™¨çš„é¢ç§¯ï¼ˆæ°´é‡ï¼‰æœ€å¤§åŒ–</strong></li>
</ul>
<p>æœ¬é¢˜æœ¬è´¨ä¸Šæ˜¯åœ¨æ‰€æœ‰å¯èƒ½çš„å‚çº¿å¯¹ <code>(i, j)</code>ï¼ˆå…¶ä¸­ <code>i &lt; j</code>ï¼‰ä¸­ï¼Œå¯»æ‰¾ä½¿é¢ç§¯</p>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>area</mtext><mo>=</mo><mo stretchy="false">(</mo><mi>j</mi><mo>âˆ’</mo><mi>i</mi><mo stretchy="false">)</mo><mo>Ã—</mo><mi>min</mi><mo>â¡</mo><mo stretchy="false">(</mo><mtext>height</mtext><mo stretchy="false">[</mo><mi>i</mi><mo stretchy="false">]</mo><mo separator="true">,</mo><mtext>height</mtext><mo stretchy="false">[</mo><mi>j</mi><mo stretchy="false">]</mo><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\text{area} = (j - i) \times \min(\text{height}[i], \text{height}[j])</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"/><span class="mord text"><span class="mord">area</span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal">i</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mop">min</span><span class="mopen">(</span><span class="mord text"><span class="mord">height</span></span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord text"><span class="mord">height</span></span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span><span class="mclose">])</span></span></span></span></span></p>
<p>æœ€å¤§çš„ç»„åˆã€‚</p>
<h3 data-id="heading-8">è§£æ³•ï¼ˆåŒæŒ‡é’ˆï¼‰</h3>
<p>é¢˜ç›®æœ¬æ„å°±æ˜¯è¦æ‰¾åˆ°ä¸¤ä¸ªå°½å¯èƒ½è¿œä¸”å°½å¯èƒ½é«˜çš„æ•°æ®ï¼Œé‚£ä¹ˆä¸å¦¨å…ˆ<strong>æŠŠä¸¤ä¸ªæŒ‡é’ˆæ”¾ç½®æœ€è¿œ</strong>ï¼Œå†é€šè¿‡<strong>é€ä¸€å‡å°è·ç¦»æ¥æ‰¾åˆ°å°½å¯èƒ½é«˜çš„æ•°æ®æ¥å¹³è¡¡è·ç¦»çš„ç¼©å‡</strong>ã€‚</p>
<p><strong>ä¼˜åŒ–ï¼š</strong> ç”±äºè·ç¦»åœ¨ç¼©å‡ï¼Œæ‰€ä»¥å¦‚æœæ•°æ®è¿˜å‡å°çš„è¯ï¼Œé‚£ä¹ˆæ€»é‡ä¸€å®šå‡å°ï¼Œæ‰€ä»¥åªèƒ½ç‰ºç‰²æ›´å°çš„ä¸€è¾¹å‘ä¸­å¿ƒæŸ¥æ‰¾æ˜¯å¦èƒ½æ‰¾åˆ°æ›´é«˜çš„æ•°æ®ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">var</span> maxArea = <span class="hljs-keyword">function</span>(<span class="hljs-params">height</span>) {
    <span class="hljs-keyword">let</span> left = <span class="hljs-number">0</span>, right = height.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>;
    <span class="hljs-comment">// æ€»é¢ç§¯</span>
    <span class="hljs-keyword">let</span> m = <span class="hljs-number">0</span>;
    
    <span class="hljs-keyword">while</span>(left &lt; right) {
        <span class="hljs-comment">// è®¡ç®—å½“å‰é¢ç§¯å¹¶æ¯”è¾ƒå¤§å°</span>
        area = (right - left) * <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(height[left], height[right])
        m = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(area, m);
        <span class="hljs-comment">// åˆ¤æ–­å“ªæ–¹æ›´å°ï¼Œå“ªæ–¹ç§»åŠ¨</span>
        <span class="hljs-keyword">if</span> (height[left] &lt; height[right]) left++;
        <span class="hljs-keyword">else</span> right--;
    }
    <span class="hljs-keyword">return</span> m;
}
</code></pre>
<h2 data-id="heading-9"><a href="https://link.juejin.cn?target=https%3A%2F%2Fleetcode.cn%2Fproblems%2F3sum%2Fdescription%2F%3FenvType%3Dstudy-plan-v2%26envId%3Dtop-100-liked" target="_blank" title="https://leetcode.cn/problems/3sum/description/?envType=study-plan-v2&amp;envId=top-100-liked" ref="nofollow noopener noreferrer">15. ä¸‰æ•°ä¹‹å’Œ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰</a></h2>
<h3 data-id="heading-10">é¢˜ç›®åˆ†æï¼š</h3>
<p>é¢˜ç›®è¦æ±‚ä»ç»™å®šçš„æ•´æ•°æ•°ç»„ <code>nums</code> ä¸­æ‰¾å‡º<strong>æ‰€æœ‰ä¸‹æ ‡ä¸é‡å¤çš„ä¸‰å…ƒç»„</strong>ï¼Œä½¿å¾—ä¸‰ä¸ªæ•°çš„å’Œä¸º 0ï¼Œå¹¶ä¸”æ¯ç»„ä¸åŒã€‚</p>
<p>æ ¸å¿ƒè¦æ±‚ï¼š</p>
<ul>
<li><strong>ä¸‰å…ƒç»„ä¸­çš„ä¸‰ä¸ªæ•°ä¹‹å’Œå¿…é¡»ç­‰äº 0</strong></li>
<li><strong>ç»“æœä¸­ä¸èƒ½åŒ…å«é‡å¤çš„ä¸‰å…ƒç»„</strong></li>
<li><strong>ä¸‰å…ƒç»„å†…çš„å…ƒç´ å¯ä»¥æŒ‰ä»»æ„é¡ºåºæ’åˆ—</strong></li>
<li><strong>æ¯ä¸ªä¸‰å…ƒç»„ä¸­çš„å…ƒç´ å¿…é¡»æ¥è‡ªæ•°ç»„ä¸­ä¸åŒçš„ä½ç½®ï¼ˆä½†å€¼å¯ä»¥ç›¸åŒï¼‰</strong></li>
</ul>
<p>æœ¬é¢˜æœ¬è´¨ä¸Šæ˜¯åœ¨æ•°ç»„ä¸­å¯»æ‰¾æ‰€æœ‰æ»¡è¶³<br/>
<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>nums</mtext><mo stretchy="false">[</mo><mi>i</mi><mo stretchy="false">]</mo><mo>+</mo><mtext>nums</mtext><mo stretchy="false">[</mo><mi>j</mi><mo stretchy="false">]</mo><mo>+</mo><mtext>nums</mtext><mo stretchy="false">[</mo><mi>k</mi><mo stretchy="false">]</mo><mo>=</mo><mn>0</mn><mspace width="1em"/></mrow><annotation encoding="application/x-tex">\text{nums}[i] + \text{nums}[j] + \text{nums}[k] = 0 \quad</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord text"><span class="mord">nums</span></span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord text"><span class="mord">nums</span></span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord text"><span class="mord">nums</span></span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">0</span><span class="mspace" style="margin-right:1em;"/></span></span></span></span><br/>
çš„ä¸‰å…ƒç»„ï¼Œå¹¶ç¡®ä¿ç»“æœé›†åˆä¸­æ— é‡å¤ã€‚</p>
<hr/>
<h3 data-id="heading-11">è§£æ³•ï¼ˆæ’åº + åŒæŒ‡é’ˆï¼‰</h3>
<p>æš´åŠ›æšä¸¾éœ€è¦ä¸‰é‡å¾ªç¯ï¼Œè¿™æ ·æ—¶é—´å¤æ‚åº¦å°†ä¼šé£™å‡åˆ° O(nÂ³)ï¼Œæ•ˆç‡æå…¶ä½ä¸‹ï¼Œæ‰€ä»¥æˆ‘ä»¬é‡‡ç”¨<strong>æ’åº + å›ºå®šä¸€ä¸ªæ•° + åŒæŒ‡é’ˆ</strong>çš„ä¼˜åŒ–ç­–ç•¥ã€‚</p>
<p><strong>å…³é”®æ€æƒ³ï¼š</strong></p>
<ol>
<li>
<p><strong>å…ˆå¯¹æ•°ç»„æ’åº</strong>ï¼Œåç»­å¯ä»¥é€šè¿‡å¤§å°å…³ç³»ç§»åŠ¨æŒ‡é’ˆã€‚å½“åˆ°è¾¾åˆ†ç•Œç‚¹ <code>0</code>æ—¶ï¼Œåç»­æ‰€æœ‰å€¼æ— è®ºå¦‚ä½•å¢åŠ æ€»å€¼éƒ½ä¸ä¼šä¸ºé›¶ï¼ˆä¼˜åŒ–ç‚¹ï¼‰ï¼›</p>
</li>
<li>
<p><strong>å›ºå®šç¬¬ä¸€ä¸ªæ•° <code>nums[i]</code></strong> ï¼Œå°†å…¶è½¬åŒ–ä¸ºâ€œåœ¨å‰©ä½™æ•°ç»„ä¸­æ‰¾ä¸¤æ•°ä¹‹å’Œä¸º <code>-nums[i]</code>â€çš„é—®é¢˜ï¼›</p>
</li>
<li>
<p><strong>ä½¿ç”¨åŒæŒ‡é’ˆ <code>left = i+1</code>ã€<code>right = n-1</code></strong> å‘ä¸­é—´æ”¶ç¼©ï¼Œæ ¹æ®å½“å‰å’Œä¸ç›®æ ‡å€¼çš„å¤§å°å…³ç³»ç§»åŠ¨æŒ‡é’ˆï¼›</p>
</li>
<li>
<p><strong>è·³è¿‡é‡å¤å€¼</strong>ï¼š</p>
<ul>
<li>è‹¥ <code>nums[i] == nums[i-1]</code>ï¼Œè·³è¿‡é‡å¤ï¼›</li>
<li>æ‰¾åˆ°ä¸€ç»„è§£åï¼Œç»§ç»­è·³è¿‡ <code>left</code> å’Œ <code>right</code> çš„é‡å¤å€¼ï¼Œé˜²æ­¢é‡å¤ç­”æ¡ˆã€‚</li>
</ul>
</li>
</ol>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">var</span> threeSum = <span class="hljs-keyword">function</span>(<span class="hljs-params">nums</span>) {
    <span class="hljs-comment">// å…ˆæ’åºï¼šå‡åºæ’åˆ—ï¼Œä½¿ç”¨JSå†…ç½®çš„ sort æ–¹æ³•</span>
    <span class="hljs-comment">// sort() æ ¹æ®è¿”å›å€¼å†³å®š a å’Œ b è°æ’åœ¨å‰é¢</span>
    <span class="hljs-comment">// a - b &lt;= 0 ==&gt; é¡ºåºä¸º a, b</span>
    <span class="hljs-comment">// a - b &gt;  0 ==&gt; é¡ºåºä¸º b, a</span>
    nums.<span class="hljs-title function_">sort</span>(<span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> a - b);
    <span class="hljs-keyword">const</span> res = [];

    <span class="hljs-comment">// å›ºå®šç¬¬ä¸€ä¸ªæ•° nums[i]</span>
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; nums.<span class="hljs-property">length</span> - <span class="hljs-number">2</span>; i++) {
        <span class="hljs-comment">// æœ€å°å€¼å·²å¤§äº 0ï¼Œåç»­ä¸å¯èƒ½æœ‰è§£</span>
        <span class="hljs-keyword">if</span> (nums[i] &gt; <span class="hljs-number">0</span>) <span class="hljs-keyword">break</span>;

        <span class="hljs-comment">// è·³è¿‡é‡å¤çš„èµ·å§‹å€¼ï¼Œé¿å…é‡å¤ä¸‰å…ƒç»„</span>
        <span class="hljs-keyword">if</span> (i &gt; <span class="hljs-number">0</span> &amp;&amp; nums[i] === nums[i - <span class="hljs-number">1</span>]) <span class="hljs-keyword">continue</span>;
        <span class="hljs-comment">// åŒæŒ‡é’ˆ</span>
        <span class="hljs-keyword">let</span> left = i + <span class="hljs-number">1</span>;
        <span class="hljs-keyword">let</span> right = nums.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>;

        <span class="hljs-keyword">while</span> (left &lt; right) {
            <span class="hljs-keyword">const</span> sum = nums[i] + nums[left] + nums[right];
            <span class="hljs-keyword">if</span> (sum === <span class="hljs-number">0</span>) {
                res.<span class="hljs-title function_">push</span>([nums[i], nums[left], nums[right]]);
                
                <span class="hljs-comment">// ç§»åŠ¨åŒæŒ‡é’ˆï¼Œç»§ç»­æŸ¥æ‰¾</span>
                left++;
                right--;
                <span class="hljs-comment">// è·³è¿‡é‡å¤ç»„</span>
                <span class="hljs-keyword">while</span> (left &lt; right &amp;&amp; nums[left] === nums[left - <span class="hljs-number">1</span>]) left++;
                <span class="hljs-keyword">while</span> (left &lt; right &amp;&amp; nums[right] === nums[right + <span class="hljs-number">1</span>]) right--;
            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (sum &lt; <span class="hljs-number">0</span>) {
                <span class="hljs-comment">// å’Œå¤ªå°ï¼Œéœ€å¢å¤§ â†’ å·¦æŒ‡é’ˆå³ç§»</span>
                left++;
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-comment">// å’Œå¤ªå¤§ï¼Œéœ€å‡å° â†’ å³æŒ‡é’ˆå·¦ç§»</span>
                right--;
            }
        }
    }
    <span class="hljs-keyword">return</span> res;
};
</code></pre>
<h4 data-id="heading-12">â±ï¸ æ—¶é—´å¤æ‚åº¦åˆ†æ</h4>
<ul>
<li><strong>æ’åºæ“ä½œ</strong>ï¼š<br/>
è°ƒç”¨ <code>nums.sort((a, b) =&gt; a - b)</code> å¯¹æ•°ç»„è¿›è¡Œå‡åºæ’åºï¼ŒJavaScript å¼•æ“é€šå¸¸é‡‡ç”¨é«˜æ•ˆæ’åºç®—æ³•ï¼Œæ—¶é—´å¤æ‚åº¦ --&gt;  <strong>O(n log n)</strong> ã€‚</li>
<li><strong>å¤–å±‚å¾ªç¯</strong>ï¼š<br/>
<code>for</code> å¾ªç¯éå† <code>i</code> ä» <code>0</code> åˆ° <code>nums.length - 3</code>ï¼Œæ—¶é—´å¤æ‚åº¦ --&gt;  <strong>O(n)</strong> ã€‚</li>
<li><strong>å†…å±‚åŒæŒ‡é’ˆæ‰«æ</strong>ï¼š<br/>
å¯¹äºæ¯ä¸ªå›ºå®šçš„ <code>i</code>ï¼Œ<code>left</code> å’Œ <code>right</code> ä»ä¸¤ç«¯å‘ä¸­é—´ç§»åŠ¨ï¼Œ<strong>æ¯ä¸ªå…ƒç´ åœ¨è¯¥è½®ä¸­æœ€å¤šè¢«è®¿é—®ä¸€æ¬¡</strong>ï¼Œå› æ­¤æ¯è½®å†…å±‚å¾ªç¯çš„æ—¶é—´å¤æ‚åº¦ --&gt; <strong>O(n)</strong> ã€‚<br/>
ç”±äºå¤–å±‚å¾ªç¯æ‰§è¡Œ O(n) æ¬¡ï¼Œæœ¬åº”å½“ä¸º O(nÂ²)ï¼Œä½†æ˜¯å¹¶éæ¯è½®éƒ½èµ°å®Œæ•´ä¸ªæ•°ç»„ï¼Œæ‰€ä»¥æœ€åæƒ…å†µä¸‹ --&gt; <strong>O(nÂ²)</strong>ã€‚</li>
<li><strong>æ€»æ—¶é—´å¤æ‚åº¦</strong>ï¼šæ’åº O(n log n) + åŒæŒ‡é’ˆä¸»é€»è¾‘ O(nÂ²) = <strong>O(nÂ²)</strong></li>
</ul>
<h2 data-id="heading-13"><a href="https://link.juejin.cn?target=https%3A%2F%2Fleetcode.cn%2Fproblems%2Ftrapping-rain-water%2Fdescription%2F%3FenvType%3Dstudy-plan-v2%26envId%3Dtop-100-liked" target="_blank" title="https://leetcode.cn/problems/trapping-rain-water/description/?envType=study-plan-v2&amp;envId=top-100-liked" ref="nofollow noopener noreferrer">42. æ¥é›¨æ°´ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰</a></h2>
<h3 data-id="heading-14">é¢˜ç›®åˆ†æï¼š</h3>
<p>é¢˜ç›®è¦æ±‚è®¡ç®—åœ¨ç»™å®šçš„éè´Ÿæ•´æ•°æ•°ç»„ <code>height</code> æ‰€è¡¨ç¤ºçš„æŸ±çŠ¶å›¾ä¸­ï¼Œ<strong>èƒ½æ¥ä½å¤šå°‘å•ä½çš„é›¨æ°´</strong>ã€‚æ¯ä¸ªå…ƒç´  <code>height[i]</code> è¡¨ç¤ºä½ç½® <code>i</code> å¤„æŸ±å­çš„é«˜åº¦ï¼Œå®½åº¦å‡ä¸º 1ã€‚</p>
<p>æ ¸å¿ƒè¦æ±‚ï¼š</p>
<ul>
<li><strong>é›¨æ°´åªèƒ½ç§¯åœ¨â€œå‡¹é™·â€åŒºåŸŸ</strong>ï¼Œå³ä¸¤ä¾§æœ‰æ›´é«˜æŸ±å­çš„ä½ç½®ï¼›</li>
<li><strong>æ¯ä¸ªä½ç½®èƒ½æ¥çš„é›¨æ°´é‡ = min(å·¦ä¾§æœ€é«˜æŸ±, å³ä¾§æœ€é«˜æŸ±) - å½“å‰é«˜åº¦</strong>ï¼ˆè‹¥ç»“æœä¸ºæ­£ï¼Œå¦åˆ™ä¸º 0ï¼‰ï¼›</li>
<li><strong>ä¸èƒ½å€¾æ–œå®¹å™¨ï¼Œé›¨æ°´å‚ç›´ä¸‹è½å¹¶è¢«ä¸¤ä¾§æŸ±å­å›´ä½</strong>ï¼›</li>
<li><strong>ç›®æ ‡æ˜¯è¿”å›æ•´ä¸ªç»“æ„èƒ½å‚¨å­˜çš„æ€»é›¨æ°´é‡</strong>ã€‚</li>
</ul>
<p>æœ¬é¢˜æœ¬è´¨ä¸Šæ˜¯ï¼šå¯¹æ¯ä¸ªä½ç½® <code>i</code>ï¼Œå¿«é€Ÿç¡®å®šå…¶<strong>å·¦ä¾§æœ€å¤§é«˜åº¦</strong>å’Œ<strong>å³ä¾§æœ€å¤§é«˜åº¦</strong>ï¼Œä»è€Œè®¡ç®—è¯¥ä½ç½®çš„ç§¯æ°´ã€‚</p>
<hr/>
<h3 data-id="heading-15">è§£æ³•ï¼ˆåŒæŒ‡é’ˆ + åŠ¨æ€è¾¹ç•Œï¼‰</h3>
<p>æš´åŠ›è§£æ³•éœ€å¯¹æ¯ä¸ªä½ç½®éå†å·¦å³æ±‚æœ€å¤§å€¼ï¼Œæ—¶é—´å¤æ‚åº¦ O(nÂ²)ã€‚å³ä½¿ä½¿ç”¨é¢å¤–æ•°ç»„é¢„å¤„ç†å·¦å³æœ€å¤§å€¼å¯ä¼˜åŒ–è‡³ O(n)ï¼Œä½†æ˜¯ç©ºé—´å ç”¨è¿˜æ˜¯è¿‡å¤§ã€‚</p>
<p>æ‰€ä»¥è§£æ³•é‡‡ç”¨<strong>åŒæŒ‡é’ˆä»ä¸¤ç«¯å‘ä¸­é—´æ”¶ç¼©</strong>ï¼Œå†åˆ©ç”¨<strong>è´ªå¿ƒæ€æƒ³</strong>å®ç° <strong>O(1) ç©ºé—´ã€O(n) æ—¶é—´</strong> çš„æœ€ä¼˜è§£ã€‚</p>
<p><strong>å…³é”®æ€æƒ³ï¼š</strong></p>
<ol>
<li>
<p><strong>ç»´æŠ¤ä¸¤ä¸ªå˜é‡ <code>lmax</code> å’Œ <code>rmax</code></strong>ï¼Œåˆ†åˆ«è¡¨ç¤ºå½“å‰ <code>left</code> æŒ‡é’ˆå·¦ä¾§ï¼ˆå«è‡ªèº«ï¼‰çš„æœ€å¤§é«˜åº¦ï¼Œä»¥åŠ <code>right</code> æŒ‡é’ˆå³ä¾§ï¼ˆå«è‡ªèº«ï¼‰çš„æœ€å¤§é«˜åº¦ï¼›</p>
</li>
<li>
<p><strong>æ¯”è¾ƒ <code>lmax</code> ä¸ <code>rmax</code></strong>ï¼š</p>
<ul>
<li>è‹¥ <code>lmax &lt; rmax</code>ï¼Œè¯´æ˜ <code>left</code> ä½ç½®çš„ç§¯æ°´<strong>ç”±å·¦ä¾§æœ€å¤§å€¼å†³å®š</strong>ï¼ˆå› ä¸ºå³ä¾§å­˜åœ¨æ›´é«˜çš„è¾¹ç•Œï¼‰ï¼Œæ­¤æ—¶å¯å®‰å…¨è®¡ç®— <code>left</code> å¤„çš„ç§¯æ°´ï¼›</li>
<li>å¦åˆ™ï¼Œ<code>right</code> ä½ç½®çš„ç§¯æ°´ç”±å³ä¾§æœ€å¤§å€¼å†³å®šï¼Œè®¡ç®— <code>right</code> å¤„çš„ç§¯æ°´ï¼›</li>
</ul>
</li>
<li>
<p><strong>æ¯æ¬¡åªç§»åŠ¨è¾ƒçŸ®ä¸€ä¾§çš„æŒ‡é’ˆ</strong>ï¼Œç¡®ä¿å¦ä¸€ä¾§å§‹ç»ˆå­˜åœ¨è¶³å¤Ÿé«˜çš„â€œæŒ¡æ¿â€ï¼Œä»è€Œä¿è¯å½“å‰ç§¯æ°´è®¡ç®—çš„æ­£ç¡®æ€§ã€‚</p>
</li>
<li>
<p>å¹¶ä¸”ä¸¤ä¸ªæŒ‡é’ˆ<strong>ç›¸é‡çš„ä½ç½®ä¸€å®šä¸ºæœ€é«˜çš„æŸ±å­</strong>ï¼Œè¿™ä¸ªæŸ±å­æ˜¯æ— æ³•è£…æ°´çš„ã€‚</p>
</li>
</ol>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">var</span> trap = <span class="hljs-keyword">function</span>(<span class="hljs-params">height</span>) {
    <span class="hljs-comment">// åˆ›å»ºåŒæŒ‡é’ˆ </span>
    <span class="hljs-keyword">let</span> left = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">let</span> right = height.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>;

    <span class="hljs-keyword">let</span> m = <span class="hljs-number">0</span>;              <span class="hljs-comment">// æ€»é›¨æ°´é‡</span>
    <span class="hljs-keyword">let</span> lmax = <span class="hljs-number">0</span>, rmax = <span class="hljs-number">0</span>; <span class="hljs-comment">// å½“å‰å·¦å³ä¾§æœ€å¤§é«˜åº¦</span>

    <span class="hljs-keyword">while</span> (left &lt; right) {
        <span class="hljs-comment">// æ›´æ–°å·¦å³ä¾§æœ€å¤§é«˜åº¦</span>
        lmax = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(lmax, height[left]);
        rmax = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(rmax, height[right]);

        <span class="hljs-keyword">if</span> (lmax &lt; rmax) {
            <span class="hljs-comment">// å·¦ä¾§æœ€å¤§å€¼æ›´å° â†’ left ä½ç½®çš„ç§¯æ°´ç”± lmax å†³å®š</span>
            m += lmax - height[left];
            left++;
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-comment">// å³ä¾§æœ€å¤§å€¼æ›´å°æˆ–ç›¸ç­‰ â†’ right ä½ç½®çš„ç§¯æ°´ç”± rmax å†³å®š</span>
            m += rmax - height[right];
            right--;
        }
    }
    <span class="hljs-keyword">return</span> m;
};
</code></pre>
<h4 data-id="heading-16">â±ï¸ æ—¶é—´å¤æ‚åº¦åˆ†æ</h4>
<ul>
<li><strong>åŒæŒ‡é’ˆéå†</strong>ï¼š<br/>
<code>left</code> å’Œ <code>right</code> ä»ä¸¤ç«¯å‘ä¸­é—´ç§»åŠ¨ï¼Œ<strong>æ¯ä¸ªå…ƒç´ æœ€å¤šè¢«è®¿é—®ä¸€æ¬¡</strong>ï¼Œå¾ªç¯æ‰§è¡Œ <strong>O(n)</strong> æ¬¡ã€‚</li>
<li><strong>æ¯è½®æ“ä½œ</strong>ï¼š<br/>
åŒ…æ‹¬ <code>Math.max</code>ã€æ¯”è¾ƒã€åŠ æ³•å’ŒæŒ‡é’ˆç§»åŠ¨ï¼Œå‡ä¸º <strong>O(1)</strong> å¸¸æ•°æ—¶é—´æ“ä½œã€‚</li>
<li><strong>æ€»æ—¶é—´å¤æ‚åº¦</strong>ï¼š<strong>O(n)</strong></li>
<li><strong>ç©ºé—´å¤æ‚åº¦</strong>ï¼šä»…ä½¿ç”¨å¸¸æ•°ä¸ªå˜é‡ï¼ˆ<code>left</code>, <code>right</code>, <code>m</code>, <code>lmax</code>, <code>rmax</code>ï¼‰â†’ <strong>O(1)</strong></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åˆ«å†è®© AI ç›´æ¥å†™é¡µé¢äº†ï¼šä¸€ç§æ›´ç¨³çš„ä¸­åå°å¼€å‘æ–¹å¼]]></title>    <link>https://juejin.cn/post/7587965800273362970</link>    <guid>https://juejin.cn/post/7587965800273362970</guid>    <pubDate>2025-12-26T16:35:04.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587965800273362970" data-draft-id="7587997893988089883" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åˆ«å†è®© AI ç›´æ¥å†™é¡µé¢äº†ï¼šä¸€ç§æ›´ç¨³çš„ä¸­åå°å¼€å‘æ–¹å¼"/> <meta itemprop="keywords" content="å‰ç«¯,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-12-26T16:35:04.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æœˆäº®æœ‰çŸ³å¤´"/> <meta itemprop="url" content="https://juejin.cn/user/3526889032395613"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åˆ«å†è®© AI ç›´æ¥å†™é¡µé¢äº†ï¼šä¸€ç§æ›´ç¨³çš„ä¸­åå°å¼€å‘æ–¹å¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3526889032395613/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æœˆäº®æœ‰çŸ³å¤´
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-26T16:35:04.000Z" title="Fri Dec 26 2025 16:35:04 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body cache result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><strong>æœ¬æ–‡è®¨è®ºçš„ä¸æ˜¯ Demo çº§åˆ«çš„ AI ç¼–ç ä½“éªŒï¼Œè€Œæ˜¯é¢å‘çœŸå®å›¢é˜Ÿã€é•¿æœŸç»´æŠ¤çš„ä¸­åå°å·¥ç¨‹å®è·µã€‚</strong></p>
<blockquote>
<p><strong>AI èƒ½å†™ä»£ç ï¼Œä½†ä¸æ„å‘³ç€å®ƒé€‚åˆç›´æ¥â€œäº§å‡ºé¡µé¢â€ã€‚</strong></p>
</blockquote>
<p>æœ€è¿‘ä¸€å¹´ï¼Œå¤§æ¨¡å‹åœ¨å‰ç«¯é¢†åŸŸçš„è®¨è®ºå‡ ä¹éƒ½å›´ç»•ä¸€ä¸ªé—®é¢˜ï¼š</p>
<blockquote>
<p><strong>â€œèƒ½ä¸èƒ½è®© AI ç›´æ¥æŠŠé¡µé¢å†™å‡ºæ¥ï¼Ÿâ€</strong></p>
</blockquote>
<p>åœ¨çœŸå®çš„ä¸­åå°é¡¹ç›®ä¸­ï¼Œæˆ‘çš„ç­”æ¡ˆæ˜¯ï¼š<br/>
<strong>ä¸ä½†ä¸ç¨³ï¼Œè€Œä¸”å¾ˆå±é™©ã€‚</strong></p>
<p>è¿™ç¯‡æ–‡ç« æƒ³åˆ†äº«ä¸€ç§æˆ‘åœ¨çœŸå®é¡¹ç›®ä¸­å®è·µè¿‡ã€<strong>å¯é•¿æœŸä½¿ç”¨ã€å¯è§„æ¨¡åŒ–</strong>çš„æ–¹å¼ï¼š<br/>
<strong>ä¸æ˜¯è®© AI å†™é¡µé¢ï¼Œè€Œæ˜¯æŠŠ AI çº³å…¥ä¸­åå°å‰ç«¯çš„å·¥ç¨‹ä½“ç³»ä¸­ã€‚</strong>
æŠŠ AI çš„ä¸ç¡®å®šæ€§å…³è¿›äº†ç¬¼å­é‡Œï¼Œç”¨å·¥ç¨‹æµç¨‹ä¿è¯å¯æ§æ€§ã€‚</p>
<p><strong>æ¨¡æ¿å›ºåŒ–è§„èŒƒï¼ŒSpec æè¿°å˜åŒ–ï¼Œå¤§æ¨¡å‹ç”Ÿæˆ Specï¼Œè„šæœ¬ç”Ÿæˆä»£ç ï¼Œlint/test åšå…œåº•ã€‚</strong>
å®ƒè§£å†³äº† AI ä¸Šå·¥ç¨‹æœ€è‡´å‘½çš„å››ä»¶äº‹ï¼š</p>
<ol>
<li><strong>å¯å®¡è®¡</strong>ï¼šå˜åŒ–åœ¨ specï¼Œç”Ÿæˆç»“æœå¯ diff</li>
<li><strong>å¯é‡å¤</strong>ï¼šåŒä¸€ä¸ª spec åå¤ç”Ÿæˆç»“æœä¸€è‡´</li>
<li><strong>å¯å…œåº•</strong>ï¼šlint/test æ˜¯ç¡¬é—¨æ§›</li>
<li><strong>å¯è§„æ¨¡åŒ–</strong>ï¼šä» prompt å·¥è‰ºå˜æˆæµç¨‹</li>
</ol>
<p>åœ¨ä¸­åå°åœºæ™¯ï¼Œå°¤å…¶æ˜¯ <strong>CRUD å æ¯”é«˜</strong> çš„é¡¹ç›®é‡Œï¼Œè¿™å‡ ä¹å°±æ˜¯â€œæ€§ä»·æ¯”æœ€ä¼˜è§£â€ã€‚</p>
<h2 data-id="heading-0">ä¸€ã€ä¸­åå°é¡µé¢å¼€å‘çš„çœŸå®å›°å¢ƒ</h2>
<p>å¦‚æœä½ åšè¿‡ä¸­åå°å‰ç«¯ï¼Œä¸€å®šå¯¹ä¸‹é¢è¿™äº›åœºæ™¯ä¸é™Œç”Ÿï¼š</p>
<ul>
<li>é¡µé¢ 80% æ˜¯ CRUD</li>
<li>åˆ—è¡¨é¡µç»“æ„é«˜åº¦ä¸€è‡´</li>
<li>è¡¨å•å­—æ®µä¸æ–­å˜åŒ–</li>
<li>å¤§é‡å¤åˆ¶ç²˜è´´</li>
<li>é¡µé¢é€»è¾‘â€œçœ‹èµ·æ¥å·®ä¸å¤šï¼Œä½†æ°¸è¿œä¸å®Œå…¨ä¸€æ ·â€</li>
</ul>
<p>æœ€ç»ˆç»“æœå¾€å¾€æ˜¯ï¼š</p>
<ul>
<li>ä»£ç å†—ä½™</li>
<li>é£æ ¼ä¸ç»Ÿä¸€</li>
<li>æ–°äººä¸Šæ‰‹æ…¢</li>
<li>æ”¹ä¸€ä¸ªå­—æ®µè¦æ”¹å¥½å‡ ä¸ªåœ°æ–¹</li>
</ul>
<p>è¿™äº›é—®é¢˜<strong>ä¸æ˜¯æŸä¸ªæ¡†æ¶çš„é—®é¢˜</strong>ï¼Œè€Œæ˜¯ä¸­åå°å¼€å‘çš„ç»“æ„æ€§é—®é¢˜ã€‚</p>
<h2 data-id="heading-1">äºŒã€ä¸ºä»€ä¹ˆâ€œè®© AI ç›´æ¥å†™é¡µé¢â€åœ¨çœŸå®é¡¹ç›®é‡Œè¡Œä¸é€šï¼Ÿ</h2>
<p>å¾ˆå¤šäººç¬¬ä¸€ååº”æ˜¯ï¼š</p>
<blockquote>
<p>â€œæ—¢ç„¶é¡µé¢è¿™ä¹ˆé‡å¤ï¼Œä¸ºä»€ä¹ˆä¸ç›´æ¥è®© AI å†™ Vue / React é¡µé¢ï¼Ÿâ€</p>
</blockquote>
<p>åœ¨çœŸå®é¡¹ç›®ä¸­ï¼Œè¿™ç§æ–¹å¼å¾€å¾€ä¼šé‡åˆ°å‡ ä¸ªè‡´å‘½é—®é¢˜ã€‚</p>
<h3 data-id="heading-2">1ï¸âƒ£ ä¸ç¨³å®š</h3>
<ul>
<li>åŒæ ·çš„ promptï¼Œæ¯æ¬¡ç”Ÿæˆç»“æœä¸åŒ</li>
<li>ç»„ä»¶ç»“æ„ã€å‘½åé£æ ¼ä¸æ–­æ¼‚ç§»</li>
<li>éš¾ä»¥ä¿è¯å›¢é˜Ÿç»Ÿä¸€è§„èŒƒ</li>
</ul>
<h3 data-id="heading-3">2ï¸âƒ£ éš¾ä»¥ review</h3>
<ul>
<li>AI ä¸€æ¬¡ç”Ÿæˆå‡ ç™¾è¡Œä»£ç </li>
<li>reviewer å¾ˆéš¾åˆ¤æ–­â€œè¿™æ˜¯ä¸æ˜¯å¯¹çš„â€</li>
<li>å‡ºé—®é¢˜æ—¶éš¾ä»¥å®šä½è´£ä»»</li>
</ul>
<h3 data-id="heading-4">3ï¸âƒ£ æ— æ³•è§„æ¨¡åŒ–</h3>
<ul>
<li>prompt æ˜¯éšæ€§çš„</li>
<li>ç»éªŒæ— æ³•æ²‰æ·€</li>
<li>æ¯ä¸ªé¡µé¢éƒ½æ˜¯â€œé‡æ–°ç”Ÿæˆä¸€æ¬¡â€</li>
</ul>
<h3 data-id="heading-5">4ï¸âƒ£ å·¥ç¨‹ä½“ç³»æ— æ³•å…œåº•</h3>
<ul>
<li>lint / test å¾ˆéš¾æå‰å‘ç°è¯­ä¹‰é—®é¢˜</li>
<li>ä¸€æ—¦å‡ºé”™ï¼Œå¾€å¾€æ˜¯è¿è¡ŒæœŸé—®é¢˜</li>
</ul>
<p><strong>ç»“è®ºå¾ˆæ˜ç¡®ï¼š<br/>
AI ç›´æ¥å†™é¡µé¢ï¼Œæ›´åƒæ˜¯ demoï¼Œè€Œä¸æ˜¯å·¥ç¨‹æ–¹æ¡ˆã€‚</strong></p>
<h2 data-id="heading-6">ä¸‰ã€ä¸€ä¸ªæ›´ç¨³çš„æ€è·¯ï¼šæŠŠâ€œå˜åŒ–â€å’Œâ€œç¨³å®šâ€æ‹†å¼€</h2>
<p>åœ¨çœŸå®é¡¹ç›®ä¸­ï¼Œæˆ‘æœ€ç»ˆé€‰æ‹©äº†ä¸€ç§<strong>æ›´åå·¥ç¨‹åŒ–</strong>çš„åšæ³•ï¼š</p>
<blockquote>
<p><strong>Template + Spec + Generator + AI</strong></p>
</blockquote>
<p>æ ¸å¿ƒæ€æƒ³åªæœ‰ä¸€å¥è¯ï¼š</p>
<blockquote>
<p><strong>æ¨¡æ¿è´Ÿè´£ç¨³å®šæ€§ï¼ŒSpec è´Ÿè´£å˜åŒ–ï¼ŒAI åªå‚ä¸å˜åŒ–ã€‚</strong></p>
</blockquote>
<h3 data-id="heading-7">è¿™ä¸ªæµç¨‹é•¿ä»€ä¹ˆæ ·ï¼Ÿ</h3>
<pre><code class="hljs language-js" lang="js">éœ€æ±‚æè¿°
   â†“
é¡µé¢è§„æ ¼ï¼ˆ<span class="hljs-title class_">Spec</span>ï¼‰
   â†“
æ¨¡æ¿ï¼ˆ<span class="hljs-title class_">Template</span>ï¼‰
   â†“
ç”Ÿæˆè„šæœ¬ï¼ˆ<span class="hljs-title class_">Generator</span>ï¼‰
   â†“
é¡µé¢ä»£ç 
   â†“
lint / test æ ¡éªŒ
</code></pre>
<p>è¿™ä¸æ˜¯ä¸ºäº†â€œå¤šä¸€å±‚æŠ½è±¡â€ï¼Œè€Œæ˜¯ä¸ºäº†<strong>æŠŠ AI çš„ä¸ç¡®å®šæ€§é™åˆ¶åœ¨å¯æ§èŒƒå›´å†…</strong>ã€‚</p>
<h2 data-id="heading-8">å››ã€ä»€ä¹ˆæ˜¯ Specï¼Ÿ</h2>
<p>**Specï¼ˆSpecificationï¼‰**å¯ä»¥ç†è§£ä¸ºï¼š</p>
<blockquote>
<p><strong>é¡µé¢çš„â€œè§„æ ¼è¯´æ˜ä¹¦â€</strong></p>
</blockquote>
<p>å®ƒæè¿°çš„æ˜¯ï¼š</p>
<ul>
<li>é¡µé¢æ ‡é¢˜</li>
<li>æ¥å£åœ°å€</li>
<li>è¡¨æ ¼å­—æ®µ</li>
<li>æŸ¥è¯¢æ¡ä»¶</li>
<li>è¡¨å•å­—æ®µä¸æ ¡éªŒè§„åˆ™</li>
</ul>
<p>è€Œä¸æ˜¯ï¼š</p>
<ul>
<li>ç”Ÿå‘½å‘¨æœŸæ€ä¹ˆå†™</li>
<li>API æ€ä¹ˆè°ƒç”¨</li>
<li>UI ç»„ä»¶æ€ä¹ˆæ‹¼</li>
</ul>
<p>è¿™äº›å†…å®¹ï¼Œéå¸¸é€‚åˆç”¨ä¸€ä»½ç»“æ„åŒ–æ•°æ®æ¥è¡¨è¾¾ã€‚</p>
<h3 data-id="heading-9">ä¸€ä¸ªç®€åŒ–çš„ Spec ç¤ºä¾‹</h3>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"title"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ä¾›åº”å•†ç®¡ç†"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"api"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"list"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"/api/supplier/list"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"create"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"/api/supplier/create"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"update"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"/api/supplier/update"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"delete"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"/api/supplier/delete"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"columns"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-punctuation">{</span> <span class="hljs-attr">"prop"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"name"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"label"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ä¾›åº”å•†åç§°"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">{</span> <span class="hljs-attr">"prop"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"contact"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"label"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"è”ç³»äºº"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">{</span> <span class="hljs-attr">"prop"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"status"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"label"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"çŠ¶æ€"</span> <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"formSchema"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-punctuation">{</span> <span class="hljs-attr">"prop"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"name"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"label"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ä¾›åº”å•†åç§°"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"required"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">{</span> <span class="hljs-attr">"prop"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"contact"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"label"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"è”ç³»äºº"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"prop"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"status"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"label"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"çŠ¶æ€"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"select"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"options"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"å¯ç”¨"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"åœç”¨"</span><span class="hljs-punctuation">]</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>è¿™ä»½ JSON <strong>ä¸ä¾èµ–ä»»ä½•å‰ç«¯æ¡†æ¶</strong>ï¼Œä½†å·²ç»å®Œæ•´æè¿°äº†ä¸€ä¸ªä¸­åå°é¡µé¢çš„â€œå˜åŒ–ç‚¹â€ã€‚</p>
<h2 data-id="heading-10">äº”ã€Templateï¼šæŠŠé‡å¤åŠ³åŠ¨å›ºåŒ–æˆèµ„äº§</h2>
<p>Template æ˜¯<strong>å›ºå®šä¸å˜çš„éƒ¨åˆ†</strong>ï¼Œä¾‹å¦‚ï¼š</p>
<ul>
<li>é¡µé¢æ•´ä½“ç»“æ„</li>
<li>è¡¨æ ¼ / è¡¨å• / å¼¹çª—éª¨æ¶</li>
<li>API è°ƒç”¨æ–¹å¼</li>
<li>åˆ†é¡µé€»è¾‘</li>
<li>é”™è¯¯å¤„ç†æ–¹å¼</li>
</ul>
<p>å®ƒçš„ç‰¹ç‚¹æ˜¯ï¼š</p>
<ul>
<li>äººå·¥ç»´æŠ¤</li>
<li>ç‰ˆæœ¬åŒ–</li>
<li>å¯ review</li>
<li>å¾ˆå°‘å˜åŠ¨</li>
</ul>
<p>ä½ å¯ä»¥ç”¨ Vueã€Reactã€Svelteï¼Œ<strong>æ¨¡æ¿æ€æƒ³æœ¬èº«ä¸æ¡†æ¶æ— å…³</strong>ã€‚</p>
<h2 data-id="heading-11">å…­ã€Generatorï¼šè®©ç”Ÿæˆå˜æˆç¡®å®šæ€§è¡Œä¸º</h2>
<p>Generator çš„èŒè´£éå¸¸å•ä¸€ï¼š</p>
<blockquote>
<p><strong>æŠŠ Spec å¡«è¿› Templateï¼Œç”Ÿæˆä»£ç æ–‡ä»¶</strong></p>
</blockquote>
<p>è¿™ä¸€ç‚¹éå¸¸é‡è¦ï¼š</p>
<ul>
<li>Generator æ˜¯è„šæœ¬</li>
<li>è¾“å‡ºæ˜¯ç¡®å®šçš„</li>
<li>ä¸æ¶‰åŠ AI å†³ç­–</li>
</ul>
<p>æ¢å¥è¯è¯´ï¼š</p>
<blockquote>
<p><strong>Generator ä¸æ˜¯â€œæ™ºèƒ½çš„â€ï¼Œä½†å®ƒæ˜¯å¯é çš„ã€‚</strong></p>
</blockquote>
<h2 data-id="heading-12">ä¸ƒã€AI åœ¨è¿™é‡Œæ‰®æ¼”ä»€ä¹ˆè§’è‰²ï¼Ÿ</h2>
<p>åœ¨è¿™å¥—ä½“ç³»ä¸­ï¼ŒAI çš„èŒè´£è¢«ä¸¥æ ¼é™åˆ¶åœ¨ä¸¤ç‚¹ï¼š</p>
<h3 data-id="heading-13">âœ… 1. ä»è‡ªç„¶è¯­è¨€ç”Ÿæˆ Spec</h3>
<p>AI éå¸¸æ“…é•¿ï¼š</p>
<ul>
<li>ç†è§£ä¸šåŠ¡æè¿°</li>
<li>ç”Ÿæˆç»“æ„åŒ– JSON</li>
<li>è¡¥å…¨å­—æ®µä¿¡æ¯</li>
</ul>
<h3 data-id="heading-14">âœ… 2. æŒ‰ lint / æŠ¥é”™åšæœ€å°ä¿®å¤</h3>
<ul>
<li>åªä¿®å…·ä½“æ–‡ä»¶</li>
<li>åªåšæœ€å° diff</li>
<li>ä¸é‡å†™æ•´ä½“ç»“æ„</li>
</ul>
<h3 data-id="heading-15">âŒ AI ä¸è¯¥åšçš„äº‹</h3>
<ul>
<li>ç›´æ¥å†™é¡µé¢ä»£ç </li>
<li>ä¿®æ”¹æ¨¡æ¿</li>
<li>æ”¹åŠ¨åŸºç¡€è®¾æ–½</li>
<li>å¼•å…¥æ–°ä¾èµ–</li>
</ul>
<p>è¿™æ ·åšçš„ç»“æœæ˜¯ï¼š<br/>
<strong>AI çš„èƒ½åŠ›è¢«â€œå·¥ç¨‹æµç¨‹â€çº¦æŸï¼Œè€Œä¸æ˜¯åè¿‡æ¥ã€‚</strong></p>
<h3 data-id="heading-16">âœ… æ­£ç¡®å§¿åŠ¿</h3>
<p><strong>è®© Codex åšä¸¤ä»¶äº‹ï¼š</strong></p>
<p>1ï¸âƒ£ æ ¹æ®è‡ªç„¶è¯­è¨€ <strong>ç”Ÿæˆ Spec JSON</strong><br/>
2ï¸âƒ£ æ ¹æ® lint / æŠ¥é”™ <strong>åšæœ€å° patch ä¿®å¤</strong></p>
<p>ç¤ºä¾‹æŒ‡ä»¤ï¼ˆåœ¨ Codex CLI / IDE ä¸­ï¼‰ï¼š</p>
<blockquote>
<p>åœ¨ <code>specs/</code> ä¸‹ç”Ÿæˆ <code>supplier.json</code>ï¼Œå­—æ®µä¸ºä¾›åº”å•†åç§°ã€è”ç³»äººã€ç”µè¯ã€çŠ¶æ€ï¼ˆå¯ç”¨/åœç”¨ï¼‰ï¼Œæ¥å£è·¯å¾„ä¸º <code>/api/supplier/*</code>ï¼Œè¾“å‡ºå¿…é¡»æ˜¯ä¸¥æ ¼ JSONã€‚</p>
</blockquote>
<p>ç„¶åï¼š</p>
<pre><code class="hljs language-bash" lang="bash">yarn gen:page specs/supplier.json
yarn lint
</code></pre>
<p>å¦‚æœ lint æŠ¥é”™ï¼Œå†è®© Codex ä¿®ï¼š</p>
<blockquote>
<p>æ ¹æ® lint æŠ¥é”™ï¼Œåªä¿®æ”¹ <code>src/views/supplier/List.vue</code>ï¼Œç”¨æœ€å°æ”¹åŠ¨ä¿®åˆ°é€šè¿‡ã€‚</p>
</blockquote>
<h2 data-id="heading-17">å…«ã€ä¸ºä»€ä¹ˆè¿™ç§æ–¹å¼æ›´é€‚åˆçœŸå®å›¢é˜Ÿï¼Ÿ</h2>
<p>ä»å·¥ç¨‹è§’åº¦çœ‹ï¼Œè¿™ç§æ–¹å¼æœ‰å‡ ä¸ªæ˜æ˜¾ä¼˜åŠ¿ï¼š</p>
<ul>
<li><strong>å¯æ§</strong>ï¼šæ¨¡æ¿ç¨³å®šï¼Œå˜åŒ–é›†ä¸­åœ¨ Spec</li>
<li><strong>å¯ review</strong>ï¼šSpec æ˜¯ç»“æ„åŒ–æ•°æ®</li>
<li><strong>å¯å›æ»š</strong>ï¼šgit diff éå¸¸æ¸…æ™°</li>
<li><strong>å¯è§„æ¨¡åŒ–</strong>ï¼šä¸æ˜¯ prompt é©±åŠ¨ï¼Œè€Œæ˜¯æµç¨‹é©±åŠ¨</li>
<li><strong>å¯è¿ç§»</strong>ï¼šæ¢æ¡†æ¶åªéœ€æ¢æ¨¡æ¿</li>
</ul>
<p>è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆå®ƒæ¯”â€œç›´æ¥è®© AI å†™é¡µé¢â€æ›´ç¨³ã€‚</p>
<h2 data-id="heading-18">ä¹ã€è¿™å¥—æ€è·¯ä¸åªé€‚ç”¨äºä¸­åå°</h2>
<p>è¿™ç§æ¨¡å¼å¯ä»¥è‡ªç„¶æ‰©å±•åˆ°ï¼š</p>
<ul>
<li>è¡¨å•é¡µ / è¯¦æƒ…é¡µ</li>
<li>æƒé™è·¯ç”±ç”Ÿæˆ</li>
<li>é¡µé¢è¿ç§»ï¼ˆå¦‚ Vue2 â†’ Vue3ï¼‰</li>
<li>ä½ä»£ç  / é¡µé¢å·¥å‚</li>
<li>å‰ç«¯å·¥ç¨‹è‡ªåŠ¨åŒ–</li>
</ul>
<p>æ ¸å¿ƒä¸åœ¨å·¥å…·ï¼Œè€Œåœ¨<strong>æ‹†åˆ†å˜åŒ–ä¸ç¨³å®šçš„è¾¹ç•Œ</strong>ã€‚</p>
<h2 data-id="heading-19">åã€æ¨¡æ¿åŒ–ä¸æ˜¯ç»ˆç‚¹ï¼šä¸€æ¡æ›´ç°å®çš„â€œæœ€ä½³è¿›åŒ–è·¯çº¿â€</h2>
<p>éœ€è¦è¯´æ˜çš„æ˜¯ï¼Œ<strong>Template + Spec + Generator å¹¶ä¸æ˜¯ç»ˆææ–¹æ¡ˆ</strong>ï¼Œè€Œæ˜¯ä¸€ä¸ªéå¸¸åˆé€‚çš„<strong>å·¥ç¨‹èµ·ç‚¹</strong>ã€‚å¹¶ä¸æ˜¯æ‰€æœ‰å›¢é˜Ÿéƒ½éœ€è¦èµ°åˆ°é…ç½®é©±åŠ¨æˆ– AST ä¿®æ”¹é˜¶æ®µï¼Œ<strong>å¯¹å¾ˆå¤šå›¢é˜Ÿæ¥è¯´ï¼ŒTemplate + Spec æœ¬èº«å·²ç»æ˜¯æœ€ä¼˜è§£ã€‚</strong></p>
<p>åœ¨çœŸå®é¡¹ç›®ä¸­ï¼Œæˆ‘æ›´æ¨èæŠŠå®ƒçœ‹ä½œä¸€æ¡â€œå¯è¿›åŒ–çš„è·¯çº¿â€ï¼Œè€Œä¸æ˜¯ä¸€é”¤å®šéŸ³çš„è®¾è®¡ã€‚</p>
<h3 data-id="heading-20">ç¬¬ä¸€æ­¥ï¼šTemplate + Specï¼ˆç°åœ¨çš„æ–¹æ¡ˆï¼‰</h3>
<p><strong>é€‚ç”¨åœºæ™¯ï¼š</strong></p>
<ul>
<li>CRUD é¡µé¢å æ¯”é«˜</li>
<li>æ–°é¡µé¢æ•°é‡å¤š</li>
<li>å›¢é˜Ÿå¸Œæœ›å°½å¿«ç»Ÿä¸€è§„èŒƒ</li>
</ul>
<p><strong>ä»·å€¼ï¼š</strong></p>
<ul>
<li>å¿«é€Ÿè½åœ°</li>
<li>é£é™©å¯æ§</li>
<li>éå¸¸é€‚åˆå¼•å…¥ AI çš„ç¬¬ä¸€æ­¥</li>
</ul>
<hr/>
<h3 data-id="heading-21">ç¬¬äºŒæ­¥ï¼šæŠ½è±¡ç¨³å®šèƒ½åŠ›ï¼Œå¼±åŒ–æ¨¡æ¿å¤æ‚åº¦</h3>
<p>å½“å‘ç°æ¨¡æ¿é‡Œå¼€å§‹å‡ºç°å¤§é‡æ¡ä»¶åˆ†æ”¯æ—¶ï¼Œä¸€ä¸ªæ›´ç¨³çš„åšæ³•æ˜¯ï¼š</p>
<blockquote>
<p><strong>æŠŠæ¨¡æ¿ä¸­çš„ç¨³å®šé€»è¾‘æŠ½æˆåŸºç¡€ç»„ä»¶ï¼ˆå¦‚ BaseCrudPageï¼‰</strong></p>
</blockquote>
<p>æ­¤æ—¶ï¼š</p>
<ul>
<li>æ¨¡æ¿å˜è–„</li>
<li>spec åªæè¿°â€œé¡µé¢é…ç½®â€</li>
<li>é¡µé¢æœ¬èº«ä¸å†é¢‘ç¹ç”Ÿæˆæ–°æ–‡ä»¶</li>
</ul>
<p>è¿™ä¸€æ­¥ï¼Œå·²ç»éå¸¸æ¥è¿‘<strong>é…ç½®é©±åŠ¨é¡µé¢æ¸²æŸ“</strong>ã€‚</p>
<h3 data-id="heading-22">ç¬¬ä¸‰æ­¥ï¼šä»â€œç”Ÿæˆä»£ç â€èµ°å‘â€œé…ç½®å³é¡µé¢â€</h3>
<p>åœ¨ CRUD å æ¯”æé«˜çš„ç³»ç»Ÿä¸­ï¼Œæœ€ç»ˆå½¢æ€å¾€å¾€æ˜¯ï¼š</p>
<blockquote>
<p><strong>é¡µé¢ = é…ç½®ï¼ˆSpecï¼‰ + æ¸²æŸ“å™¨</strong></p>
</blockquote>
<p>æ­¤æ—¶ï¼š</p>
<ul>
<li>æ–°é¡µé¢ä¸å†ç”Ÿæˆ <code>.vue</code> æ–‡ä»¶</li>
<li>åªæ–°å¢ spec + è·¯ç”±é…ç½®</li>
<li>AI ç›´æ¥ç”Ÿæˆ specï¼Œæ”¶ç›Šæœ€å¤§</li>
</ul>
<p>è¿™æœ¬è´¨ä¸Šå°±æ˜¯<strong>ä½ä»£ç /é¡µé¢å·¥å‚çš„é›å½¢</strong>ã€‚</p>
<h3 data-id="heading-23">ç¬¬å››æ­¥ï¼šå­˜é‡é¡¹ç›®å¼•å…¥ç»“æ„åŒ–ä¿®æ”¹ï¼ˆAST / Patchï¼‰</h3>
<p>å¯¹äºå·²æœ‰å¤§é‡é¡µé¢çš„ç³»ç»Ÿï¼Œæ›´ç¨³å¦¥çš„æ–¹å¼æ˜¯ï¼š</p>
<ul>
<li>ç”¨ spec æè¿°â€œå˜æ›´æ„å›¾â€</li>
<li>ç”¨å·¥å…·å¯¹ä»£ç åšç»“æ„åŒ–ä¿®æ”¹ï¼ˆå¦‚åªæ”¹ columnsã€formSchemaï¼‰</li>
<li>AI åªäº§å‡º patchï¼Œè€Œä¸æ˜¯é‡å†™é¡µé¢</li>
</ul>
<p>è¿™ä¸€æ­¥éå¸¸é€‚åˆï¼š</p>
<ul>
<li>è€é¡¹ç›®</li>
<li>å®‰å…¨è¦æ±‚é«˜çš„å›¢é˜Ÿ</li>
<li>æ¸è¿›å¼æ¼”è¿›</li>
</ul>
<h3 data-id="heading-24">ä¸€å¥è¯æ€»ç»“è¿™æ¡è·¯çº¿</h3>
<blockquote>
<p><strong>æ¨¡æ¿åŒ–æ˜¯æŠŠ AI å¼•å…¥å·¥ç¨‹ä½“ç³»çš„ç¬¬ä¸€æ­¥ï¼Œ<br/>
é…ç½®é©±åŠ¨å’Œç»“æ„åŒ–ä¿®æ”¹ï¼Œæ‰æ˜¯ä¸­åå°å·¥ç¨‹çš„é•¿æœŸå½¢æ€ã€‚</strong></p>
</blockquote>
<h2 data-id="heading-25">åä¸€ã€æ€»ç»“</h2>
<p>å¤§æ¨¡å‹çš„ä»·å€¼ï¼Œä¸åœ¨äºâ€œæ›¿ä»£å·¥ç¨‹å¸ˆå†™é¡µé¢â€ï¼Œ<br/>
è€Œåœ¨äºï¼š</p>
<blockquote>
<p><strong>æŠŠé‡å¤åŠ³åŠ¨ç»“æ„åŒ–ï¼Œå¹¶åµŒå…¥åˆ°å·¥ç¨‹ä½“ç³»ä¸­ã€‚</strong></p>
</blockquote>
<p>åœ¨ä¸­åå°å‰ç«¯å¼€å‘ä¸­ï¼Œ<br/>
<strong>æœ€ç¨³çš„æ–¹å¼æ°¸è¿œä¸æ˜¯â€œè®© AI è‡ªç”±å‘æŒ¥â€ï¼Œ<br/>
è€Œæ˜¯è®©å®ƒåœ¨æ¸…æ™°çš„è¾¹ç•Œå†…å·¥ä½œã€‚</strong></p>
<p>å¦‚æœåªèƒ½è®°ä½ä¸€å¥è¯ï¼š  ä¸è¦è®© AI ç›´æ¥å†™é¡µé¢ï¼Œè®©å®ƒå†™â€œå˜åŒ–â€ï¼Œå…¶ä½™äº¤ç»™å·¥ç¨‹ã€‚</p>
<hr/>
<p>å¦‚æœä½ è§‰å¾—è¿™ç¯‡æ–‡ç« å¯¹ä½ æœ‰å¯å‘ï¼Œæ¬¢è¿ç‚¹èµæˆ–æ”¶è— ğŸ‘</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸€æ¬¾åŸºäº .NET 9 æ„å»ºçš„ä¼ä¸šçº§ Web RBAC å¿«é€Ÿå¼€å‘æ¡†æ¶]]></title>    <link>https://juejin.cn/post/7588007285546418182</link>    <guid>https://juejin.cn/post/7588007285546418182</guid>    <pubDate>2025-12-26T15:15:54.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588007285546418182" data-draft-id="7588007285546401798" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸€æ¬¾åŸºäº .NET 9 æ„å»ºçš„ä¼ä¸šçº§ Web RBAC å¿«é€Ÿå¼€å‘æ¡†æ¶"/> <meta itemprop="keywords" content=".NET"/> <meta itemprop="datePublished" content="2025-12-26T15:15:54.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è¿½é€æ—¶å…‰è€…"/> <meta itemprop="url" content="https://juejin.cn/user/2770425031690333"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸€æ¬¾åŸºäº .NET 9 æ„å»ºçš„ä¼ä¸šçº§ Web RBAC å¿«é€Ÿå¼€å‘æ¡†æ¶
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2770425031690333/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è¿½é€æ—¶å…‰è€…
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-26T15:15:54.000Z" title="Fri Dec 26 2025 15:15:54 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>ä»Šå¤©å¤§å§šç»™å¤§å®¶åˆ†äº«ä¸€æ¬¾åŸºäº .NET 9 æ„å»ºçš„ä¼ä¸šçº§ã€å¼€æº Web RBAC å¿«é€Ÿå¼€å‘æ¡†æ¶ï¼šRuYiAdminã€‚</p>
<h2 data-id="heading-1">é¡¹ç›®ä»‹ç»</h2>
<p>RuYiAdmin ä¸€æ¬¾åŸºäº .NET 9 æ„å»ºçš„ä¼ä¸šçº§ã€å‰åç«¯åˆ†ç¦»ã€å¼€æºï¼ˆApache Licenseï¼‰ Web RBAC å¿«é€Ÿå¼€å‘æ¡†æ¶ï¼Œå…·æœ‰çµæ´»çš„æ¶æ„è®¾è®¡å’Œå¼ºå¤§çš„åŠŸèƒ½ï¼Œé€‚ç”¨äºå¿«é€Ÿå¼€å‘é«˜æ€§èƒ½çš„ä¼ä¸šçº§åº”ç”¨ï¼Œå…·æœ‰ä½ä»£ç ã€è·¨å¹³å°ã€åˆ†å¸ƒå¼ã€å¤šçº¿ç¨‹å’Œé«˜æ€§èƒ½ç­‰ç‰¹è‰²ã€‚</p>
<h2 data-id="heading-2">é€‚ç”¨åœºæ™¯</h2>
<ul>
<li>ä¼ä¸šçº§åå°ç®¡ç†ç³»ç»Ÿï¼šç”¨äºä¼ä¸šå†…éƒ¨çš„å„ç§ç®¡ç†ä»»åŠ¡ï¼Œå¦‚ç”¨æˆ·ç®¡ç†ã€æƒé™æ§åˆ¶ã€æ•°æ®ç»Ÿè®¡ç­‰ã€‚</li>
<li>å†…å®¹ç®¡ç†ç³»ç»Ÿï¼ˆCMSï¼‰ï¼šç”¨äºç½‘ç«™å†…å®¹çš„åˆ›å»ºã€ç¼–è¾‘ã€å‘å¸ƒå’Œç®¡ç†ã€‚</li>
<li>å®¢æˆ·å…³ç³»ç®¡ç†ï¼ˆCRMï¼‰ç³»ç»Ÿï¼šå¸®åŠ©ä¼ä¸šè·Ÿè¸ªå’Œç®¡ç†å®¢æˆ·ä¿¡æ¯ã€é”€å”®æœºä¼šå’Œå®¢æˆ·æœåŠ¡è¯·æ±‚ã€‚</li>
</ul>
<h2 data-id="heading-3">ä¸»è¦ç‰¹ç‚¹</h2>
<ul>
<li><strong>å‰åç«¯åˆ†ç¦»ï¼š</strong> RuYiAdmin é‡‡ç”¨å‰åç«¯åˆ†ç¦»æ¶æ„ï¼Œå‰ç«¯åŸºäºVueElementAdminï¼Œä½¿ç”¨ Vue2 å’Œ Element UIï¼Œåç«¯åŸºäº .NET 9 æ„å»ºã€‚</li>
<li><strong>ä»£ç è‡ªåŠ¨ç”Ÿæˆï¼š</strong> æ”¯æŒä¸€é”®ç”Ÿæˆè§†å›¾å±‚ã€æ§åˆ¶å±‚ã€æœåŠ¡å±‚ã€ä»“å‚¨å±‚ã€é¢†åŸŸå±‚å’Œ DTO ä¸šåŠ¡æ¨¡å‹å±‚ä»£ç ï¼Œæå¤§åœ°ç¼©çŸ­äº†å¼€å‘å‘¨æœŸã€‚</li>
<li><strong>å¤šæ•°æ®åº“æ”¯æŒï¼š</strong> æ”¯æŒå¤šç§å…³ç³»å‹æ•°æ®åº“ï¼ˆå¦‚ MySQLã€SqlServerã€SQLiteã€Oracleã€PostgreSQLã€OpenGaussã€Kingbaseã€DMï¼‰å’Œéå…³ç³»å‹æ•°æ®åº“ï¼ˆå¦‚ Redisã€MongoDBã€Elasticsearchã€Meilisearchï¼‰ï¼ŒåŒæ—¶æ”¯æŒåŠ¨æ€æ•°æ®æºï¼Œä»¥æ»¡è¶³ä¸åŒä¼ä¸šçš„éœ€æ±‚ã€‚</li>
<li><strong>é¡¹ç›®å®‰å…¨æ€§é«˜ï¼š</strong> æ”¯æŒ4Aç­‰çº§è®¤è¯ï¼Œæ»¡è¶³ç­‰ä¿ä¸‰çº§è¦æ±‚ï¼Œæ”¯æŒé˜² SQL æ³¨å…¥ã€é˜² Token åŠ«æŒã€é˜²æ¥å£æ¸—é€ä¸æŠ–åŠ¨ï¼Œé›†æˆRSAã€AESåŠå›½äº§ SM åŠ å¯†ç®—æ³•ï¼Œæ”¯æŒå…¨é“¾è·¯HTTPSåŠ å¯†ä¼ è¾“åè®®ï¼Œç¡®ä¿ä¼ä¸šçº§åº”ç”¨çš„å®‰å…¨æ€§ã€‚</li>
<li>æ”¯æŒå¾®æœåŠ¡ï¼Œæ”¯æŒæœåŠ¡çš„æ³¨å†Œã€å‘ç°ã€å¥åº·æ£€æŸ¥ã€ç†”æ–­å’Œé™çº§ã€‚</li>
</ul>
<h2 data-id="heading-4">é¡¹ç›®æŠ€æœ¯æ ˆ</h2>
<ul>
<li>å‰ç«¯ï¼šVue2ã€Element UIã€Node.jsç­‰ã€‚</li>
<li>åç«¯ï¼šC#ã€.NET 9ã€AspNetCoreRateLimitã€SqlSugarã€AutoMapperã€SignalRã€MiniProfilerã€CAPã€RabbitMQã€Redisã€Consulç­‰ã€‚</li>
</ul>
<h2 data-id="heading-5">å®‰è£…æ•™ç¨‹</h2>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/65b33a329e714542a17f15a749c938dc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767366954&amp;x-signature=0WWCIdLd%2Faw20BukKEaqgx5zrqs%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-6">è½¯ä»¶æ¶æ„å›¾</h2>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b3db5bfe168441d1b5a630b0847de675~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767366954&amp;x-signature=2DlGneAThLO%2F%2FNVP%2BkB%2F3CsB9C0%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-7">é¡¹ç›®æºä»£ç </h2>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b3c6ad0bca55418bbd2a130858947253~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767366954&amp;x-signature=JE1JKADfx6%2BE0636k3ISq3c4KNg%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-8">é¡¹ç›®æ•ˆæœæˆªå›¾</h2>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/489788f978e647079dcde6b683d4ce07~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767366954&amp;x-signature=PzyLvIRn2FHItYYAjmYAfrbq5Cc%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/87684fb26e814032984594a89933da8a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767366954&amp;x-signature=uk9lX55RF83vdo%2F4CJ8608bEz3g%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0012a7ea5bb6423085e54c4f52950e84~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767366954&amp;x-signature=1i6Ymt8MXDOzL6w2tLHPqstBVCc%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/540f5a18b2e94474b7fe968a768c4728~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767366954&amp;x-signature=1csLmkfdGEfWW7CikJnNYvMEldk%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/eae99d04517344fb80532d6b8940aa08~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767366954&amp;x-signature=oXSPnqnaAYMU1kddBS%2BEUm8Y9EU%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5be9962d5b21477492843030f7b5f59c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767366954&amp;x-signature=eeM0HPwEeVdtbu8YBdWAUnwjTO8%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0c62a706866443129fcf0441dc89d3fa~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767366954&amp;x-signature=G76RIi%2FdjKjYHIXqbnWn7V%2FcJU8%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f564806e8bb54a8792cfd0b49f6f691b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767366954&amp;x-signature=Z%2FmQ%2FYAKUXqQ3KH2HPUKbDIbxIg%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/78a75d60b53d42b28a993bfc96e77cf0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767366954&amp;x-signature=w3sMG%2B8jW9GNgls2wFXBthz32Uc%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5d13e94a93b24727b080c8e1b347b446~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767366954&amp;x-signature=bUw1cAI%2FEhzh76uVg5%2FZFVRYEIY%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/45424de315834001840af8e424a3be6a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767366954&amp;x-signature=3H%2FSkFl14L3PzX2Ni6DmyjOqnxQ%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/183804178d3344f4baee493cceb9f31f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767366954&amp;x-signature=ilhm5aanDv8w9w%2F6IBCrc%2BJJyq4%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/292198da5fc84f1a8dbd773f2f09d054~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767366954&amp;x-signature=pqqqqxYzNaPUPmecDKA0Js5EYvE%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/696ccdf29bb3453eb610fb98a0e50b0d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767366954&amp;x-signature=blsKHgnzg7CyhoHLAJ4HTGa8Psg%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-9">é¡¹ç›®æºç åœ°å€</h2>
<p>æ›´å¤šé¡¹ç›®å®ç”¨åŠŸèƒ½å’Œç‰¹æ€§æ¬¢è¿å‰å¾€é¡¹ç›®å¼€æºåœ°å€æŸ¥çœ‹ğŸ‘€ï¼Œåˆ«å¿˜äº†ç»™é¡¹ç›®ä¸€ä¸ªStaræ”¯æŒğŸ’–ã€‚</p>
<ul>
<li><strong>Giteeå¼€æºåœ°å€ï¼š</strong> <a href="https://link.juejin.cn?target=https%3A%2F%2Fgitee.com%2Fpang-mingjun%2FRuYiAdmin" target="_blank" title="https://gitee.com/pang-mingjun/RuYiAdmin" ref="nofollow noopener noreferrer">gitee.com/pang-mingjuâ€¦</a></li>
</ul>
<h2 data-id="heading-10">ä¼˜ç§€é¡¹ç›®å’Œæ¡†æ¶ç²¾é€‰</h2>
<p>è¯¥é¡¹ç›®å·²æ”¶å½•åˆ°C#/.NET/.NET Coreä¼˜ç§€é¡¹ç›®å’Œæ¡†æ¶ç²¾é€‰ä¸­ï¼Œå…³æ³¨ä¼˜ç§€é¡¹ç›®å’Œæ¡†æ¶ç²¾é€‰èƒ½è®©ä½ åŠæ—¶äº†è§£C#ã€.NETå’Œ.NET Coreé¢†åŸŸçš„æœ€æ–°åŠ¨æ€å’Œæœ€ä½³å®è·µï¼Œæé«˜å¼€å‘å·¥ä½œæ•ˆç‡å’Œè´¨é‡ã€‚å‘å·²æŒ–ï¼Œæ¬¢è¿å¤§å®¶è¸Šè·ƒæäº¤PRæ¨èæˆ–è‡ªèï¼ˆ<strong>è®©ä¼˜ç§€çš„é¡¹ç›®å’Œæ¡†æ¶ä¸è¢«åŸ‹æ²¡ğŸ¤</strong>ï¼‰ã€‚</p>
<ul>
<li><strong>GitHubå¼€æºåœ°å€ï¼š</strong> <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FYSGStudyHards%2FDotNetGuide%2Fblob%2Fmain%2Fdocs%2FDotNet%2FDotNetProjectPicks.md" target="_blank" title="https://github.com/YSGStudyHards/DotNetGuide/blob/main/docs/DotNet/DotNetProjectPicks.md" ref="nofollow noopener noreferrer">github.com/YSGStudyHarâ€¦</a></li>
<li><strong>Giteeå¼€æºåœ°å€ï¼š</strong> <a href="https://link.juejin.cn?target=https%3A%2F%2Fgitee.com%2Fysgdaydayup%2FDotNetGuide%2Fblob%2Fmain%2Fdocs%2FDotNet%2FDotNetProjectPicks.md" target="_blank" title="https://gitee.com/ysgdaydayup/DotNetGuide/blob/main/docs/DotNet/DotNetProjectPicks.md" ref="nofollow noopener noreferrer">gitee.com/ysgdaydayupâ€¦</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æœ€å¼ºã€Œå­¦ä¸šæˆç»©åˆ†æå‹åŠ›æ„ŸçŸ¥å‹ AI å¿ƒç†é™ªä¼´ã€æ™ºèƒ½ä½“â€”åŸºäºè…¾è®¯å…ƒå™¨Ã—TextInå¤§æ¨¡å‹åŠ é€Ÿå™¨Ã—æ··å…ƒå¤§æ¨¡å‹çš„å®æˆ˜æ„å»º]]></title>    <link>https://juejin.cn/post/7587965908289110026</link>    <guid>https://juejin.cn/post/7587965908289110026</guid>    <pubDate>2025-12-26T14:09:52.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587965908289110026" data-draft-id="7588086766235582502" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æœ€å¼ºã€Œå­¦ä¸šæˆç»©åˆ†æå‹åŠ›æ„ŸçŸ¥å‹ AI å¿ƒç†é™ªä¼´ã€æ™ºèƒ½ä½“â€”åŸºäºè…¾è®¯å…ƒå™¨Ã—TextInå¤§æ¨¡å‹åŠ é€Ÿå™¨Ã—æ··å…ƒå¤§æ¨¡å‹çš„å®æˆ˜æ„å»º"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-12-26T14:09:52.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="CodeJourney"/> <meta itemprop="url" content="https://juejin.cn/user/3558441089502232"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æœ€å¼ºã€Œå­¦ä¸šæˆç»©åˆ†æå‹åŠ›æ„ŸçŸ¥å‹ AI å¿ƒç†é™ªä¼´ã€æ™ºèƒ½ä½“â€”åŸºäºè…¾è®¯å…ƒå™¨Ã—TextInå¤§æ¨¡å‹åŠ é€Ÿå™¨Ã—æ··å…ƒå¤§æ¨¡å‹çš„å®æˆ˜æ„å»º
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3558441089502232/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    CodeJourney
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-26T14:09:52.000Z" title="Fri Dec 26 2025 14:09:52 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»28åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">æœ€å¼ºã€Œå­¦ä¸šæˆç»©åˆ†æå‹åŠ›æ„ŸçŸ¥å‹ AI å¿ƒç†é™ªä¼´ã€æ™ºèƒ½ä½“â€”åŸºäºè…¾è®¯å…ƒå™¨Ã—TextInÃ—æ··å…ƒå¤§æ¨¡å‹çš„å®æˆ˜æ„å»º</h2>
<h2 data-id="heading-1">ä¸€ã€é¡¹ç›®èƒŒæ™¯</h2>
<p>åœ¨â€œåŒå‡â€æ”¿ç­–æ·±åŒ–ä¸æ•™è‚²æ•°å­—åŒ–æŒç»­æ¨è¿›çš„èƒŒæ™¯ä¸‹ï¼Œ<strong>å­¦ç”Ÿå­¦ä¸šè¯„ä»·æ­£åœ¨ä»â€œå”¯åˆ†æ•°è®ºâ€å‘â€œæ•°æ®é©±åŠ¨çš„å…¨é¢æˆé•¿åˆ†æâ€è½¬å‹</strong>ã€‚æˆç»©å•ä¸å†åªæ˜¯ç®€å•çš„åˆ†æ•°æ±‡æ€»ï¼Œè€Œæ˜¯è•´å«ç€å­¦ç”Ÿå­¦ä¹ çŠ¶æ€ã€å­¦ç§‘ä¼˜åŠ¿ã€æ³¢åŠ¨è¶‹åŠ¿ä»¥åŠæ½œåœ¨å¿ƒç†å‹åŠ›çš„é‡è¦æ•°æ®è½½ä½“ã€‚</p>
<p>ç„¶è€Œï¼Œåœ¨å½“å‰æ•™å­¦å®è·µä¸­ä»æ™®éå­˜åœ¨ä»¥ä¸‹é—®é¢˜ï¼š</p>
<ul>
<li><strong>æˆç»©åˆ†æç»´åº¦å•ä¸€</strong>ï¼šå¤šæ•°å­¦æ ¡æˆ–ç­çº§ä»åœç•™åœ¨å¹³å‡åˆ†ã€æ’åç­‰é™æ€ç»Ÿè®¡å±‚é¢ï¼Œç¼ºä¹å¯¹ä¸ªäººæˆé•¿è½¨è¿¹ã€å­¦ç§‘ç»“æ„å¤±è¡¡ã€é˜¶æ®µæ€§æ³¢åŠ¨çš„æ·±åº¦åˆ†æï¼›</li>
<li><strong>æ•°æ®å¤„ç†æˆæœ¬é«˜</strong>ï¼šå¤§é‡æˆç»©å•ä»¥ PDFã€æ‰«æä»¶ã€ç…§ç‰‡ç­‰éç»“æ„åŒ–å½¢å¼å­˜åœ¨ï¼Œäººå·¥æ•´ç†è€—æ—¶è€—åŠ›ï¼Œéš¾ä»¥è§„æ¨¡åŒ–åº”ç”¨ï¼›</li>
<li><strong>å¿ƒç†å…³æ€€é•¿æœŸç¼ºä½</strong>ï¼šæˆç»©æ³¢åŠ¨å¾€å¾€ç›´æ¥å½±å“å­¦ç”Ÿæƒ…ç»ªä¸è‡ªæˆ‘è®¤çŸ¥ï¼Œä½†ç°å®ä¸­æ•™å¸ˆç²¾åŠ›æœ‰é™ï¼Œå­¦ç”Ÿç¼ºä¹ç¨³å®šã€ä½é—¨æ§›çš„æƒ…ç»ªç–å¯¼ä¸æˆé•¿é™ªä¼´æ¸ é“ï¼›</li>
<li><strong>â€œåˆ†æ•°å‹åŠ›â€æ„ŸçŸ¥æ»å</strong>ï¼šå¤šæ•°å¿ƒç†å¹²é¢„å‘ç”Ÿåœ¨é—®é¢˜æ˜¾æ€§åŒ–ä¹‹åï¼Œç¼ºä¹åŸºäºå­¦ä¸šæ•°æ®çš„å‰ç½®é£é™©æ„ŸçŸ¥ä¸æ¸©å’Œä»‹å…¥æœºåˆ¶ã€‚</li>
</ul>
<p>éšç€å¤§æ¨¡å‹æŠ€æœ¯ä¸æ™ºèƒ½ä½“å¹³å°çš„æˆç†Ÿï¼Œè¿™ä¸€å±€é¢æ­£åœ¨å‘ç”Ÿæ”¹å˜ã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e2eb4b8383674ceab99d5223668c9255~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZUpvdXJuZXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767362992&amp;x-signature=ki0K39rMOwyMhHT3SZrXDhFUR8Q%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>æœ¬é¡¹ç›®åŸºäº <strong>è…¾è®¯å…ƒå™¨æ™ºèƒ½ä½“æ„å»ºå¹³å°</strong>ï¼Œèåˆ <strong>TextIn å¤§æ¨¡å‹åŠ é€Ÿå™¨çš„é«˜ç²¾åº¦ OCR ä¸è¡¨æ ¼ç»“æ„åŒ–èƒ½åŠ›</strong>ï¼Œå¹¶å¼•å…¥ <strong>æ··å…ƒå¤§æ¨¡å‹çš„å¤šæ¨¡æ€ç†è§£ä¸æƒ…ç»ªæ¨ç†èƒ½åŠ›</strong>ï¼Œæ„å»ºä¸€å¥— <strong>â€œç­çº§å¤šç»´åº¦æˆç»©åˆ†æ Ã— å­¦ä¸šå‹åŠ›æ„ŸçŸ¥å‹ AI å¿ƒç†é™ªä¼´æ™ºèƒ½ä½“â€</strong>ã€‚</p>
<p>è¯¥æ™ºèƒ½ä½“ä¸ä»…èƒ½å¤Ÿè‡ªåŠ¨å®Œæˆæˆç»©å•çš„é«˜ç²¾åº¦è§£æä¸å¤šç»´ç»Ÿè®¡åˆ†æï¼Œè¿˜èƒ½åœ¨æ­¤åŸºç¡€ä¸Šï¼š</p>
<ul>
<li>è¯†åˆ«å­¦ç”Ÿæ½œåœ¨çš„å­¦ä¸šå‹åŠ›ä¿¡å·ä¸æƒ…ç»ªé£é™©ï¼›</li>
<li>ä»¥<strong>éè¯„åˆ¤ã€ä½å‹åŠ›</strong>çš„æ–¹å¼è¿›è¡Œæƒ…ç»ªç–å¯¼ä¸æ­£å‘å¼•å¯¼ï¼›</li>
<li>ä¸ºæ•™å¸ˆæä¾›æ•°æ®é©±åŠ¨çš„ç­çº§ç”»åƒä¸å¹²é¢„å‚è€ƒï¼›</li>
<li>ä¸ºå­¦ç”Ÿæä¾›æŒç»­ã€ç¨³å®šã€å¯å¯¹è¯çš„æˆé•¿é™ªä¼´ã€‚</li>
</ul>
<p>é€šè¿‡å°†<strong>å­¦ä¸šæ•°æ®åˆ†æ</strong>ä¸<strong>æƒ…ç»ªå…³æ€€æ™ºèƒ½ä½“</strong>æ·±åº¦èåˆï¼Œæœ¬é¡¹ç›®æ¢ç´¢äº†ä¸€ç§é¢å‘çœŸå®æ•™å­¦åœºæ™¯çš„ <strong>â€œå­¦ä¸šâ€”å¿ƒç†ååŒå‹ AI Agentâ€</strong> è½åœ°è·¯å¾„ï¼Œä¸ºæ™ºæ…§æ•™è‚²ä¸å­¦ç”Ÿå¿ƒç†å¥åº·æä¾›å¯å¤åˆ¶ã€å¯æ‰©å±•çš„æŠ€æœ¯å®è·µèŒƒå¼ã€‚</p>
<h3 data-id="heading-2">1.1æ•ˆæœæ¼”ç¤º</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d57627925b4243978ca89258060cf99b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZUpvdXJuZXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767362992&amp;x-signature=eOcYAoGe9bYgcIOhxN1mIv0NrIM%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6d4048b33f5645c89d6aea3bb8d78337~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZUpvdXJuZXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767362992&amp;x-signature=CX5jRvK5NI64FtoG8aq6hZVd2Mw%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a0037f72807f4b51b007dbdb2454f9b5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZUpvdXJuZXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767362992&amp;x-signature=Hl%2BTI%2BlDKoYJhZ0CtMjEdiS%2FMRc%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2939034d53d942cd9a97d0d183fa3ca1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZUpvdXJuZXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767362992&amp;x-signature=4GB%2F4JZVkN2H7CnP4ZG1aQCj14E%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/847a97f1ea684c01abd3a81638a7ea98~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZUpvdXJuZXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767362992&amp;x-signature=EcYkOd6A9hjwsEq9TFDQPl56C5E%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dc1c5397c2384af8b9adbde1ec4de34b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZUpvdXJuZXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767362992&amp;x-signature=1EEsHs%2B2gdoOW4o3Z4AC8RDdGe8%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h2 data-id="heading-3">äºŒã€é¡¹ç›®çŸ¥è¯†ç‚¹æ¦‚è§ˆ</h2>
<p>åœ¨æœ¬é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬å¹¶éå•ä¸€ä¾èµ–æŸä¸€ä¸ªå¤§æ¨¡å‹æˆ–å·¥å…·ï¼Œè€Œæ˜¯é€šè¿‡<strong>æ™ºèƒ½ä½“å¹³å° + æ–‡æ¡£ç†è§£å¼•æ“ + é€šç”¨å¤§æ¨¡å‹</strong>çš„ååŒï¼Œæ„å»ºä¸€å¥—é¢å‘çœŸå®æ•™è‚²åœºæ™¯çš„å¤åˆå‹ AI ç³»ç»Ÿã€‚ä»¥ä¸‹å¯¹é¡¹ç›®æ¶‰åŠçš„ä¸‰é¡¹æ ¸å¿ƒæŠ€æœ¯èƒ½åŠ›è¿›è¡Œç®€è¦è¯´æ˜ã€‚</p>
<h3 data-id="heading-4">2.1 ä»€ä¹ˆæ˜¯è…¾è®¯å…ƒå™¨ï¼Ÿ</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ddd5a04e3d664216af67775035787389~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZUpvdXJuZXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767362992&amp;x-signature=rlQesesHT9brPqaYLppfVmc5jfQ%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p><strong>è…¾è®¯å…ƒå™¨</strong>æ˜¯è…¾è®¯æ¨å‡ºçš„ä¸€ç«™å¼ <strong>AI æ™ºèƒ½ä½“ï¼ˆAgentï¼‰æ„å»ºä¸è¿è¡Œå¹³å°</strong>ï¼Œé¢å‘å¼€å‘è€…æä¾›ä»èƒ½åŠ›ç¼–æ’ã€æ¨¡å‹è°ƒç”¨åˆ°ä¸Šä¸‹æ–‡ç®¡ç†çš„å®Œæ•´æ™ºèƒ½ä½“åŸºç¡€è®¾æ–½ã€‚</p>
<p>ä¸ä¼ ç»Ÿâ€œå•è½®å¯¹è¯å¼ AIâ€ä¸åŒï¼Œè…¾è®¯å…ƒå™¨å¼ºè°ƒçš„æ˜¯ï¼š</p>
<ul>
<li><strong>å¯æ„ŸçŸ¥ç¯å¢ƒ</strong></li>
<li><strong>å¯è§„åˆ’æµç¨‹</strong></li>
<li><strong>å¯è°ƒç”¨å·¥å…·</strong></li>
<li><strong>å¯æŒç»­è®°å¿†</strong></li>
</ul>
<p>å³å…·å¤‡å®Œæ•´â€œæ„ŸçŸ¥â€”å†³ç­–â€”è¡ŒåŠ¨â€”åé¦ˆâ€é—­ç¯çš„æ™ºèƒ½ä½“èƒ½åŠ›ã€‚</p>
<p>åœ¨å®é™…ä½¿ç”¨ä¸­ï¼Œå¼€å‘è€…å¯ä»¥é€šè¿‡è…¾è®¯å…ƒå™¨ï¼š</p>
<ul>
<li>å°† OCRã€æ•°æ®åˆ†æã€å¤§æ¨¡å‹æ¨ç†ç­‰èƒ½åŠ›å°è£…ä¸ºç‹¬ç«‹èŠ‚ç‚¹ï¼›</li>
<li>é€šè¿‡æµç¨‹ç¼–æ’æ–¹å¼æ„å»ºå¤šæ­¥éª¤æ™ºèƒ½ä½“ä»»åŠ¡ï¼›</li>
<li>ä¸ºä¸åŒè§’è‰²ï¼ˆå­¦ç”Ÿ / æ•™å¸ˆï¼‰é…ç½®å·®å¼‚åŒ–äº¤äº’é€»è¾‘ï¼›</li>
<li>ç®¡ç†æ™ºèƒ½ä½“ä¸Šä¸‹æ–‡è®°å¿†ä¸æƒé™è¾¹ç•Œã€‚</li>
</ul>
<p>åœ¨æœ¬é¡¹ç›®ä¸­ï¼Œè…¾è®¯å…ƒå™¨ä½œä¸º<strong>æ™ºèƒ½ä½“çš„â€œä¸­æ¢ç³»ç»Ÿâ€</strong>ï¼Œè´Ÿè´£ä¸²è”æˆç»©è§£æã€æ•°æ®åˆ†æã€å‹åŠ›æ„ŸçŸ¥ä¸æƒ…ç»ªé™ªä¼´ç­‰å¤šä¸ªèƒ½åŠ›æ¨¡å—ï¼Œå®ç°å¤æ‚æ•™è‚²åœºæ™¯ä¸‹çš„ç¨³å®šè¿è¡Œä¸å¯æ‰©å±•è½åœ°ã€‚</p>
<h3 data-id="heading-5">2.2 ä»€ä¹ˆæ˜¯ TextIn å¤§æ¨¡å‹åŠ é€Ÿå™¨ï¼Ÿ</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/41905fc77b9f469799ff8cdf65a011e2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZUpvdXJuZXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767362992&amp;x-signature=ArB69xVvX%2FTXzHjNIm9cIJc6btY%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p><strong>TextIn å¤§æ¨¡å‹åŠ é€Ÿå™¨</strong>æ˜¯ä¸€å¥—é¢å‘ <strong>å¤æ‚æ–‡æ¡£ç†è§£åœºæ™¯</strong> çš„æ™ºèƒ½è§£æå¼•æ“ï¼Œæ ¸å¿ƒèƒ½åŠ›æ˜¯å°† <strong>éç»“æ„åŒ–æ–‡æ¡£é«˜ç²¾åº¦è½¬åŒ–ä¸ºç»“æ„åŒ–æ•°æ®</strong>ã€‚</p>
<p>åœ¨æ•™è‚²åœºæ™¯ä¸­ï¼Œæˆç»©å•é€šå¸¸å­˜åœ¨ä»¥ä¸‹ç‰¹ç‚¹ï¼š</p>
<ul>
<li>æ ¼å¼ä¸ç»Ÿä¸€ã€æ¨¡æ¿å¤šæ ·ï¼›</li>
<li>è¡¨æ ¼ç»“æ„å¤æ‚ï¼Œå­˜åœ¨åˆå¹¶å•å…ƒæ ¼ï¼›</li>
<li>æ¥æºå¤šä¸ºæ‰«æä»¶æˆ–æ‹ç…§å›¾ç‰‡ï¼›</li>
<li>å«æœ‰å¤§é‡ç›¸ä¼¼å­—æ®µï¼Œäººå·¥æ ¡å¯¹æˆæœ¬é«˜ã€‚</li>
</ul>
<p>TextIn å¤§æ¨¡å‹åŠ é€Ÿå™¨é€šè¿‡ <strong>å¤§æ¨¡å‹ + è§„åˆ™å¼•æ“ + è§†è§‰ç†è§£</strong> çš„æ–¹å¼ï¼Œæä¾›ï¼š</p>
<ul>
<li>é«˜ç²¾åº¦ OCR æ–‡å­—è¯†åˆ«ï¼›</li>
<li>è¡¨æ ¼ç»“æ„è‡ªåŠ¨è¿˜åŸï¼›</li>
<li>å­—æ®µè¯­ä¹‰è¯†åˆ«ä¸å¯¹é½ï¼›</li>
<li>é”™è¯¯å®¹å¿ä¸çº åèƒ½åŠ›ã€‚</li>
</ul>
<p>åœ¨æœ¬é¡¹ç›®ä¸­ï¼ŒTextIn è´Ÿè´£å°†æˆç»©å•ä»â€œçœ‹å¾—æ‡‚ä½†ç”¨ä¸äº†â€çš„æ–‡æ¡£å½¢æ€ï¼Œè½¬åŒ–ä¸º <strong>å¯è®¡ç®—ã€å¯åˆ†æã€å¯æ¨ç†</strong> çš„æ ‡å‡†åŒ–æ•°æ®ï¼Œä¸ºåç»­ç­çº§åˆ†æä¸æƒ…ç»ªåˆ¤æ–­æä¾›å¯é è¾“å…¥åŸºç¡€ã€‚</p>
<h3 data-id="heading-6">2.3 ä»€ä¹ˆæ˜¯æ··å…ƒå¤§æ¨¡å‹ï¼Ÿ</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0673ae7d83ac4283a560cad6a500d7b6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZUpvdXJuZXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767362992&amp;x-signature=8cvZ7ZhwNeTN4Jj9iNLGUZfSB2s%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p><strong>æ··å…ƒå¤§æ¨¡å‹</strong>æ˜¯è…¾è®¯è‡ªç ”çš„é€šç”¨å¤§è¯­è¨€æ¨¡å‹ä½“ç³»ï¼Œå…·å¤‡è‡ªç„¶è¯­è¨€ç†è§£ã€é€»è¾‘æ¨ç†ã€æƒ…ç»ªè¯†åˆ«ä¸å†…å®¹ç”Ÿæˆç­‰å¤šé¡¹èƒ½åŠ›ï¼Œé€‚ç”¨äºå¤æ‚ã€å¤šè½®ã€ä¸Šä¸‹æ–‡æ•æ„Ÿçš„äº¤äº’åœºæ™¯ã€‚</p>
<p>ç›¸è¾ƒäºä»…ç”¨äºæ–‡æœ¬ç”Ÿæˆçš„å¤§æ¨¡å‹ï¼Œæ··å…ƒæ›´å¼ºè°ƒï¼š</p>
<ul>
<li><strong>ä¸Šä¸‹æ–‡è¿ç»­ç†è§£èƒ½åŠ›</strong></li>
<li><strong>å¤šç»´åº¦è¯­ä¹‰æ¨ç†èƒ½åŠ›</strong></li>
<li><strong>æƒ…ç»ªä¸æ„å›¾è¯†åˆ«èƒ½åŠ›</strong></li>
<li><strong>å¯æ§ã€ç¨³å¥çš„è¾“å‡ºé£æ ¼</strong></li>
</ul>
<p>åœ¨æœ¬é¡¹ç›®ä¸­ï¼Œæ··å…ƒå¤§æ¨¡å‹ä¸»è¦æ‰¿æ‹…ä¸‰ç±»æ ¸å¿ƒä»»åŠ¡ï¼š</p>
<ol>
<li>
<p><strong>æˆç»©åˆ†æç»“æœçš„è¯­ä¹‰æ€»ç»“ä¸è§£é‡Š</strong>
å°†å†°å†·çš„ç»Ÿè®¡æ•°æ®è½¬åŒ–ä¸ºå­¦ç”Ÿä¸æ•™å¸ˆæ˜“äºç†è§£çš„è‡ªç„¶è¯­è¨€åé¦ˆã€‚</p>
</li>
<li>
<p><strong>å­¦ä¸šå‹åŠ›ä¸æƒ…ç»ªçŠ¶æ€æ¨ç†</strong>
ç»“åˆæˆç»©å˜åŒ–ä¸å­¦ç”Ÿè¯­è¨€è¾“å…¥ï¼Œè¯†åˆ«æ½œåœ¨å‹åŠ›ä¿¡å·ä¸æƒ…ç»ªæ³¢åŠ¨ã€‚</p>
</li>
<li>
<p><strong>é™ªä¼´å¼å¯¹è¯ä¸å¼•å¯¼åé¦ˆ</strong>
ä»¥éè¯„åˆ¤ã€ä½å‹åŠ›çš„æ–¹å¼ä¸å­¦ç”ŸæŒç»­äº’åŠ¨ï¼Œæä¾›æƒ…ç»ªç–å¯¼ä¸æˆé•¿å¼•å¯¼ã€‚</p>
</li>
</ol>
<p>æ··å…ƒå¤§æ¨¡å‹çš„å¼•å…¥ï¼Œä½¿ç³»ç»Ÿä¸ä»…â€œä¼šç®—åˆ†â€ï¼Œæ›´â€œæ‡‚å­¦ç”Ÿâ€ï¼Œæ˜¯å®ç°â€œå­¦ä¸šå‹åŠ›æ„ŸçŸ¥å‹ AI å¿ƒç†é™ªä¼´â€çš„å…³é”®èƒ½åŠ›æ”¯æ’‘ã€‚</p>
<h2 data-id="heading-7">ä¸‰ã€æŠ€æœ¯æ–¹æ¡ˆ</h2>
<p>æœ¬é¡¹ç›®ä»¥â€œ<strong>å­¦ä¸šæ•°æ®å¯ç»“æ„åŒ–ã€å‹åŠ›çŠ¶æ€å¯æ„ŸçŸ¥ã€æˆé•¿é™ªä¼´å¯æŒç»­</strong>â€ä¸ºæ ¸å¿ƒç›®æ ‡ï¼ŒåŸºäºè…¾è®¯å…ƒå™¨æ™ºèƒ½ä½“å¹³å°ï¼Œæ„å»ºä¸€å¥—è¦†ç›– <strong>æ•°æ®é‡‡é›† â†’ æˆç»©åˆ†æ â†’ å‹åŠ›æ„ŸçŸ¥ â†’ æƒ…ç»ªç–å¯¼ â†’ æˆé•¿åé¦ˆ</strong> çš„é—­ç¯å¼ AI æ™ºèƒ½ä½“æŠ€æœ¯æ–¹æ¡ˆã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8d86f8711ae1406a9151ad4e83df35b8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZUpvdXJuZXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767362992&amp;x-signature=L5tq7MPbrKs1DuUFiZ0SN40yAbQ%3D" alt="" loading="lazy"/></p>
<p>æ•´ä½“æ¶æ„é‡‡ç”¨ <strong>â€œå¤šæºæ•°æ®è§£æ + å¤§æ¨¡å‹æ¨ç† + è§„åˆ™ä¸æƒ…ç»ªååŒå†³ç­–â€</strong> çš„è®¾è®¡æ€è·¯ï¼Œç¡®ä¿ç³»ç»Ÿåœ¨çœŸå®æ•™å­¦åœºæ™¯ä¸­å…·å¤‡å¯è§£é‡Šæ€§ã€ç¨³å®šæ€§ä¸å¯æ‰©å±•æ€§ã€‚</p>
<h3 data-id="heading-8">3.1 æ™ºèƒ½ä½“æ€»ä½“æ¶æ„è®¾è®¡ï¼ˆåŸºäºè…¾è®¯å…ƒå™¨ï¼‰</h3>
<p>é¡¹ç›®æ ¸å¿ƒæ™ºèƒ½ä½“æ„å»ºäº <strong>è…¾è®¯å…ƒå™¨å¹³å°</strong>ï¼Œé€šè¿‡æ¨¡å—åŒ–èŠ‚ç‚¹ç¼–æ’çš„æ–¹å¼ï¼Œå®ç°å¤šèƒ½åŠ›ååŒï¼š</p>
<ul>
<li><strong>è¾“å…¥å±‚</strong>ï¼šæˆç»©å•å›¾ç‰‡ / PDF / æ‰«æä»¶ã€å­¦ç”Ÿè‡ªç„¶è¯­è¨€è¾“å…¥ï¼ˆæƒ…ç»ªå€¾è¯‰ã€å­¦ä¹ å›°æƒ‘ï¼‰</li>
<li><strong>èƒ½åŠ›å±‚</strong>ï¼š
<ul>
<li>OCR ä¸è¡¨æ ¼è§£æèŠ‚ç‚¹ï¼ˆTextIn å¤§æ¨¡å‹åŠ é€Ÿå™¨ï¼‰</li>
<li>æˆç»©ç»Ÿè®¡ä¸è¶‹åŠ¿åˆ†æèŠ‚ç‚¹</li>
<li>å­¦ä¸šå‹åŠ›æ„ŸçŸ¥ä¸æƒ…ç»ªæ¨ç†èŠ‚ç‚¹ï¼ˆæ··å…ƒå¤§æ¨¡å‹ï¼‰</li>
<li>å¯¹è¯ä¸é™ªä¼´å“åº”èŠ‚ç‚¹</li>
</ul>
</li>
<li><strong>è¾“å‡ºå±‚</strong>ï¼š
<ul>
<li>ç­çº§å¤šç»´åº¦æˆç»©åˆ†ææŠ¥å‘Š</li>
<li>å­¦ç”Ÿä¸ªæ€§åŒ–å­¦ä¹ ä¸æƒ…ç»ªåé¦ˆ</li>
<li>æ•™å¸ˆä¾§ç»“æ„åŒ–åˆ†æä¸é£é™©æç¤º</li>
</ul>
</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4369939866ab4924a33dd176ee3f395b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZUpvdXJuZXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767362992&amp;x-signature=CQiOMndjw6tdjYy5f4jNDATEbG4%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>é€šè¿‡è…¾è®¯å…ƒå™¨çš„ <strong>æµç¨‹ç¼–æ’ã€ä¸Šä¸‹æ–‡è®°å¿†ä¸æƒé™æ§åˆ¶èƒ½åŠ›</strong>ï¼Œå®ç°å­¦ç”Ÿç«¯ä¸æ•™å¸ˆç«¯çš„æ™ºèƒ½ä½“èƒ½åŠ›éš”ç¦»ä¸ååŒã€‚</p>
<hr/>
<h3 data-id="heading-9">3.2 æˆç»©å•é«˜ç²¾åº¦è§£ææ–¹æ¡ˆï¼ˆTextIn å¤§æ¨¡å‹åŠ é€Ÿå™¨ï¼‰</h3>
<p>é’ˆå¯¹æˆç»©å•<strong>æ ¼å¼å¤šæ ·ã€è¡¨æ ¼ç»“æ„å¤æ‚ã€æ‰«æè´¨é‡å‚å·®ä¸é½</strong>çš„é—®é¢˜ï¼Œç³»ç»Ÿå¼•å…¥ <strong>TextIn å¤§æ¨¡å‹åŠ é€Ÿå™¨</strong>ï¼Œå®Œæˆéç»“æ„åŒ–æˆç»©å•çš„é«˜ç²¾åº¦ç»“æ„åŒ–å¤„ç†ã€‚</p>
<p>æ ¸å¿ƒèƒ½åŠ›åŒ…æ‹¬ï¼š</p>
<ul>
<li><strong>å¤šæ ¼å¼æ”¯æŒ</strong>ï¼šæ”¯æŒå›¾ç‰‡ã€PDFã€æ‰«æä»¶ç­‰å¤šç§è¾“å…¥å½¢å¼ï¼›</li>
<li><strong>è¡¨æ ¼ç»“æ„è¿˜åŸ</strong>ï¼šè‡ªåŠ¨è¯†åˆ«è¡¨å¤´ã€åˆå¹¶å•å…ƒæ ¼ã€å­¦ç§‘åˆ—ä¸å­¦ç”Ÿè¡Œï¼›</li>
<li><strong>å­—æ®µè¯­ä¹‰è¯†åˆ«</strong>ï¼šåŒºåˆ†å§“åã€å­¦å·ã€å•ç§‘æˆç»©ã€æ€»åˆ†ã€æ’åç­‰å…³é”®å­—æ®µï¼›</li>
<li><strong>é”™è¯¯å®¹å¿ä¸ä¿®æ­£</strong>ï¼šå¯¹å€¾æ–œã€æ¨¡ç³Šã€ä½åˆ†è¾¨ç‡æ–‡æ¡£å…·å¤‡è¾ƒå¼ºé²æ£’æ€§ã€‚</li>
</ul>
<p>è¾“å‡ºç»“æœä¸ºæ ‡å‡†åŒ– JSON / è¡¨æ ¼ç»“æ„æ•°æ®ï¼Œä¸ºåç»­åˆ†æä¸å¤§æ¨¡å‹æ¨ç†æä¾›å¯é æ•°æ®åŸºç¡€ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/339fd18091694f2c9ef78c43166a095f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZUpvdXJuZXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767362992&amp;x-signature=AxTqdkV2l6GeaZMgkR7onm3N79o%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h3 data-id="heading-10">3.3 å­¦ä¸šå‹åŠ›æ„ŸçŸ¥ä¸æƒ…ç»ªæ¨ç†æœºåˆ¶ï¼ˆæ··å…ƒå¤§æ¨¡å‹ï¼‰</h3>
<p>åŒºåˆ«äºä¼ ç»Ÿä»…åŸºäºåˆ†æ•°çš„åˆ†ææ–¹å¼ï¼Œæœ¬é¡¹ç›®å¼•å…¥ <strong>â€œå­¦ä¸šå‹åŠ›æ„ŸçŸ¥æ¨¡å‹â€</strong>ï¼Œå°†æˆç»©æ•°æ®ä¸å­¦ç”Ÿè¯­è¨€è¾“å…¥è¿›è¡Œè”åˆæ¨ç†ã€‚</p>
<p>å‹åŠ›è¯†åˆ«ä¿¡å·æ¥æºåŒ…æ‹¬ï¼š</p>
<ul>
<li>æˆç»©è¿ç»­ä¸‹é™æˆ–æ³¢åŠ¨åŠ å‰§ï¼›</li>
<li>å•ç§‘é•¿æœŸä½äºç­çº§å‡å€¼ï¼›</li>
<li>å­¦ä¸šè´Ÿæ‹…ç›¸å…³é«˜é¢‘æƒ…ç»ªè¯ï¼ˆç„¦è™‘ã€å®³æ€•ã€å¤±æœ›ç­‰ï¼‰ï¼›</li>
<li>è‡ªæˆ‘å¦å®šã€æ¯”è¾ƒå‹è¯­è¨€æ¨¡å¼ã€‚</li>
</ul>
<p>åŸºäº <strong>æ··å…ƒå¤§æ¨¡å‹çš„æƒ…ç»ªç†è§£ä¸ä¸Šä¸‹æ–‡æ¨ç†èƒ½åŠ›</strong>ï¼Œç³»ç»Ÿå¯¹å­¦ç”Ÿå½“å‰çŠ¶æ€è¿›è¡Œç»¼åˆåˆ¤æ–­ï¼Œå¹¶åˆ’åˆ†ä¸ºä¸åŒå‹åŠ›ç­‰çº§ï¼Œä½œä¸ºåç»­å¹²é¢„ç­–ç•¥çš„ä¾æ®ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/98556f886aa34d80b2bfad7672c8c9a2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZUpvdXJuZXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767362992&amp;x-signature=siCI4wV0%2FdJN2JZR2OGGqMEfcNY%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h2 data-id="heading-11">å››ã€æ­å»ºã€Œå­¦ä¸šæˆç»©åˆ†æå‹åŠ›æ„ŸçŸ¥å‹ AI å¿ƒç†é™ªä¼´ã€æ™ºèƒ½ä½“</h2>
<p>åœ¨å®Œæˆé¡¹ç›®èƒŒæ™¯ã€æ ¸å¿ƒæŠ€æœ¯é€‰å‹ä¸æ•´ä½“æŠ€æœ¯æ–¹æ¡ˆè®¾è®¡ä¹‹åï¼Œæœ¬ç« å°†å›´ç»•<strong>å¦‚ä½•åŸºäºè…¾è®¯å…ƒå™¨å®é™…æ­å»ºè¯¥æ™ºèƒ½ä½“</strong>å±•å¼€ï¼Œé‡ç‚¹ä»‹ç»æ™ºèƒ½ä½“çš„åˆ›å»ºæµç¨‹ã€èƒ½åŠ›èŠ‚ç‚¹é…ç½®æ–¹å¼ä»¥åŠå…³é”®é€»è¾‘çš„è½åœ°å®ç°æ€è·¯ï¼Œç¡®ä¿æ–¹æ¡ˆä¸ä»…â€œèƒ½è®²æ¸…â€ï¼Œä¹Ÿâ€œèƒ½è·‘èµ·æ¥â€ã€‚</p>
<h3 data-id="heading-12">4.1 è…¾è®¯å…ƒå™¨æ™ºèƒ½ä½“åˆ›å»º</h3>
<p>åœ¨è…¾è®¯å…ƒå™¨å¹³å°ä¸­ï¼Œé¦–å…ˆåˆ›å»ºä¸€ä¸ªæ–°çš„æ™ºèƒ½ä½“å®ä¾‹ï¼Œå¹¶æ˜ç¡®å…¶<strong>è§’è‰²å®šä½ä¸æœåŠ¡å¯¹è±¡</strong>ã€‚</p>
<p>æœ¬é¡¹ç›®é‡‡ç”¨ <strong>â€œä¸€ä½“å¤šè§’è‰²â€</strong> çš„è®¾è®¡æ€è·¯ï¼Œå³ï¼š</p>
<ul>
<li>
<p><strong>å­¦ç”Ÿä¾§æ™ºèƒ½ä½“</strong></p>
<ul>
<li>é¢å‘å­¦ç”Ÿæä¾›æˆç»©è§£è¯»ã€å­¦ä¹ åé¦ˆä¸æƒ…ç»ªé™ªä¼´</li>
<li>å¼ºè°ƒå…±æƒ…ã€å¼•å¯¼ä¸éè¯„åˆ¤å¼å¯¹è¯</li>
</ul>
</li>
<li>
<p><strong>æ•™å¸ˆä¾§æ™ºèƒ½ä½“</strong></p>
<ul>
<li>é¢å‘æ•™å¸ˆæä¾›ç­çº§æˆç»©ç”»åƒã€è¶‹åŠ¿åˆ†æä¸é£é™©æç¤º</li>
<li>å¼ºè°ƒæ•°æ®å®¢è§‚æ€§ä¸å¯è§£é‡Šæ€§ï¼Œé¿å…æƒ…ç»ªåŒ–æ ‡ç­¾</li>
</ul>
</li>
</ul>
<p>åœ¨å…ƒå™¨ä¸­é€šè¿‡<strong>ä¸åŒçš„æç¤ºè¯æ¨¡æ¿ä¸æƒé™é…ç½®</strong>ï¼Œå®ç°åŒä¸€å¥—åº•å±‚èƒ½åŠ›ã€ä¸åŒäº¤äº’è¡¨ç°çš„æ™ºèƒ½ä½“åˆ†æ”¯ã€‚</p>
<p>ç™»å½•è…¾è®¯å…ƒå™¨å¹³å°åï¼Œç‚¹å‡»å³ä¸Šè§’ ã€Œä¸ªäººç©ºé—´ã€ï¼Œè¿›å…¥ ã€Œæˆ‘çš„æ™ºèƒ½ä½“ã€ é¡µé¢ï¼Œé€‰æ‹© ã€Œåˆ›å»ºæ™ºèƒ½ä½“ã€ã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0a638153d1284763844ee1fed264d714~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZUpvdXJuZXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767362992&amp;x-signature=RB%2FynbQp43FuRprxErSqKi%2FJhLE%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>åœ¨æ™ºèƒ½ä½“ç±»å‹é€‰æ‹©ç•Œé¢ä¸­ï¼Œé€‰æ‹© ã€Œå¯¹è¯å¼æ™ºèƒ½ä½“ã€ã€‚
è¯¥ç±»å‹é€‚ç”¨äºå…·å¤‡å¤šè½®äº¤äº’ã€æƒ…ç»ªç†è§£ä¸å¤æ‚ä»»åŠ¡å¤„ç†èƒ½åŠ›çš„åº”ç”¨åœºæ™¯ï¼Œé€‚åˆæœ¬é¡¹ç›®ä¸­â€œæˆç»©åˆ†æ + æƒ…ç»ªç–å¯¼â€çš„å¤åˆéœ€æ±‚ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/06ccd17784c74ade914d5943d112bf42~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZUpvdXJuZXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767362992&amp;x-signature=2v%2BC7b0Tx8gutbyQncBFK8MPZAA%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
åœ¨æ–°å»ºå¯¹è¯å¼æ™ºèƒ½ä½“é¡µé¢ä¸­ï¼Œå¡«å†™ä»¥ä¸‹ä¿¡æ¯ï¼š</p>
<ul>
<li>
<p>æ™ºèƒ½ä½“åç§°ï¼šç”¨äºå¯¹å¤–å±•ç¤ºä¸è¯†åˆ«</p>
</li>
<li>
<p>æ™ºèƒ½ä½“ç®€ä»‹ï¼šç®€è¦è¯´æ˜æ™ºèƒ½ä½“çš„æ ¸å¿ƒèƒ½åŠ›ä¸ä½¿ç”¨åœºæ™¯</p>
</li>
</ul>
<p>ä¿¡æ¯å¡«å†™å®Œæˆåï¼Œç‚¹å‡» ã€Œæ–°å»ºã€ æŒ‰é’®ï¼Œå®Œæˆæ™ºèƒ½ä½“çš„åŸºç¡€åˆ›å»ºã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4624904b3ffb4e03b018d84980437176~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZUpvdXJuZXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767362992&amp;x-signature=CXn%2FfYRQo8DbbR1u0XUMx0pDyg4%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
åˆ›å»ºæˆåŠŸåï¼Œç³»ç»Ÿå°†è‡ªåŠ¨è·³è½¬è‡³æ™ºèƒ½ä½“åå°ç®¡ç†é¡µé¢ã€‚åœ¨è¯¥é¡µé¢ä¸­ï¼Œå¯ä»¥å¯¹æ™ºèƒ½ä½“è¿›è¡Œè§’è‰²è®¾å®šã€æ¨¡å‹é€‰æ‹©ã€èƒ½åŠ›é…ç½®ä¸æµ‹è¯•éªŒè¯ç­‰æ“ä½œã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/784f3ad828e84312b3311201df11c2c7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZUpvdXJuZXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767362992&amp;x-signature=K8QVMzqIWq8OsmdSQvqAstZPoNM%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h3 data-id="heading-13">4.2 æ™ºèƒ½ä½“è§’è‰²å®šä½</h3>
<p>åœ¨ ã€Œè§’è‰²è®¾å®š / æç¤ºè¯ã€ æ¨¡å—ä¸­ï¼Œç¼–å†™æ™ºèƒ½ä½“çš„ç³»ç»Ÿæç¤ºè¯ï¼ˆSystem Promptï¼‰ã€‚
å¯ç»“åˆå¹³å°æä¾›çš„ ã€Œæç¤ºè¯ä¸€é”®ä¼˜åŒ–ã€ åŠŸèƒ½ï¼Œå¯¹åˆå§‹æç¤ºè¯è¿›è¡Œç»“æ„åŒ–ä¸è¯­ä¹‰å¢å¼ºã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/424daf5bee914e3384595a69ff63ce2b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZUpvdXJuZXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767362992&amp;x-signature=c2Gvak7qZzILwbg165HcFY3xd%2Bg%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
ä»¥ä¸‹ä¸ºæœ¬é¡¹ç›®ä¸­ä½¿ç”¨çš„æ ¸å¿ƒè§’è‰²æç¤ºè¯ï¼Œç”¨äºæ˜ç¡®æ™ºèƒ½ä½“çš„å®šä½ã€èƒ½åŠ›è¾¹ç•Œä¸è¾“å‡ºé£æ ¼ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">ã€è¦æ±‚ã€‘æ‰®æ¼”ä¸€åå­¦ä¸šæˆç»©åˆ†æä¸å‹åŠ›æ„ŸçŸ¥å‹AIå¿ƒç†é™ªä¼´æ™ºèƒ½ä½“ï¼Œèƒ½å¤ŸåŸºäºå­¦ç”Ÿæˆç»©å•æ•°æ®ä¸å­¦ç”Ÿè‡ªç„¶è¯­è¨€è¾“å…¥ï¼Œè¿›è¡Œå¤šç»´åº¦å­¦ä¸šåˆ†æã€å­¦ä¸šå‹åŠ›æ„ŸçŸ¥ï¼Œå¹¶ä»¥éè¯„åˆ¤ã€é™ªä¼´å¼æ–¹å¼ä¸ºå­¦ç”Ÿæä¾›æƒ…ç»ªç–å¯¼ä¸æˆé•¿å¼•å¯¼ï¼ŒåŒæ—¶ä¸ºæ•™å¸ˆæä¾›å»æƒ…ç»ªåŒ–çš„æ•°æ®åˆ†æä¸é£é™©æç¤ºã€‚

ã€åç§°ã€‘å­¦ä¸šæˆç»©åˆ†æä¸å‹åŠ›æ„ŸçŸ¥å‹ AI å¿ƒç†é™ªä¼´æ™ºèƒ½ä½“

ã€å±æ€§ã€‘AIæ™ºèƒ½ä½“ï¼Œä¸“æ³¨äºå­¦ä¸šæˆç»©åˆ†æä¸å‹åŠ›æ„ŸçŸ¥ï¼Œå…·å¤‡æƒ…ç»ªç†è§£èƒ½åŠ›

ã€äººç‰©å…³ç³»ã€‘å­¦ç”Ÿã€æ•™å¸ˆ

ã€äººç‰©ç»å†ã€‘ç”±æ•™è‚²å¿ƒç†å­¦ä¸“å®¶ã€æ•°æ®ç§‘å­¦å®¶åŠAIå·¥ç¨‹å¸ˆå…±åŒå¼€å‘ï¼Œæ—¨åœ¨é€šè¿‡æŠ€æœ¯æ‰‹æ®µå¸®åŠ©å­¦ç”Ÿç¼“è§£å­¦ä¸šå‹åŠ›ï¼Œä¿ƒè¿›å¥åº·æˆé•¿ã€‚

ã€å¤–è²Œç‰¹å¾ã€‘æ— å®ä½“å½¢æ€ï¼Œä»¥æ–‡å­—å½¢å¼å‘ˆç°

ã€æ€§æ ¼ç‰¹ç‚¹ã€‘æ¸©å’Œã€ç†æ€§ã€ä¸å±…é«˜ä¸´ä¸‹ï¼Œé‡è§†å…±æƒ…ï¼Œä¸ç›´æ¥å¦å®šç”¨æˆ·æ„Ÿå—ï¼Œä¸ä½¿ç”¨å¿ƒç†è¯Šæ–­æˆ–æ ‡ç­¾åŒ–è¯­è¨€ï¼Œè¡¨è¾¾æ¸…æ™°ã€æœ‰ç»“æ„ï¼Œä½†é¿å…è¯´æ•™

ã€è¯­è¨€é£æ ¼ã€‘
- å­¦ç”Ÿç«¯è¾“å‡ºï¼šæ¸©å’Œã€é¼“åŠ±ã€å…±æƒ…å‹è¡¨è¾¾
- æ•™å¸ˆç«¯è¾“å‡ºï¼šå®¢è§‚ã€ä¸­æ€§ã€æ•°æ®é©±åŠ¨è¡¨è¾¾

ã€äººç‰©å–œå¥½ã€‘æ— å…·ä½“å–œå¥½ï¼Œä½†è‡´åŠ›äºå¸®åŠ©å­¦ç”Ÿå’Œæ•™å¸ˆè§£å†³é—®é¢˜

ã€è¾“å‡ºè¦æ±‚ã€‘
- ä½¿ç”¨ç®€ä½“ä¸­æ–‡
- åˆ†ç‚¹è¾“å‡ºæ—¶éœ€é€»è¾‘æ¸…æ™°
- æƒ…ç»ªç–å¯¼æ—¶å…ˆå…±æƒ…ã€å†å¼•å¯¼ã€æœ€åç»™å»ºè®®

ã€èƒ½åŠ›é™åˆ¶ã€‘
- ä¸èƒ½è¿›è¡Œå¿ƒç†ç–¾ç—…è¯Šæ–­æˆ–æ²»ç–—å»ºè®®
- ä¸èƒ½æ›¿ä»£æ•™å¸ˆã€å®¶é•¿æˆ–å¿ƒç†å’¨è¯¢å¸ˆçš„ä¸“ä¸šå†³ç­–
- ä¸è¾“å‡ºä»»ä½•å¯¹å­¦ç”Ÿçš„è´Ÿé¢æ ‡ç­¾æˆ–ä»·å€¼è¯„åˆ¤
- ä¸åŸºäºå•æ¬¡æˆç»©æ³¢åŠ¨åšé•¿æœŸèƒ½åŠ›åˆ¤æ–­

ã€å…¶ä»–è¦æ±‚ã€‘
- é¢å‘å­¦ç”Ÿæ—¶åé™ªä¼´ä¸å¼•å¯¼
- é¢å‘æ•™å¸ˆæ—¶åæ•°æ®ä¸å®¢è§‚åˆ†æ

ã€èƒ½è¾¾æˆä»¥ä¸‹ç”¨æˆ·æ„å›¾ã€‘
<span class="hljs-comment">#æ„å›¾åç§°ï¼šå­¦ä¸šå‹åŠ›ç¼“è§£</span>
<span class="hljs-comment">#æ„å›¾æè¿°ï¼šé€šè¿‡åˆ†æå­¦ç”Ÿæˆç»©å•æ•°æ®å’Œè‡ªç„¶è¯­è¨€è¾“å…¥ï¼Œè¯†åˆ«å­¦ä¸šå‹åŠ›æºï¼Œå¹¶æä¾›æƒ…ç»ªç–å¯¼å’Œæˆé•¿å¼•å¯¼ã€‚</span>
<span class="hljs-comment">#æ„å›¾ç¤ºä¾‹ï¼šå­¦ç”Ÿè¡¨ç¤ºè¿‘æœŸè€ƒè¯•æˆç»©ä¸‹é™ï¼Œæ„Ÿåˆ°ç„¦è™‘ã€‚AIæ™ºèƒ½ä½“é€šè¿‡åˆ†ææˆç»©å•å’Œå­¦ç”Ÿè¾“å…¥ï¼Œå‘ç°å…¶åœ¨æ•°å­¦å’Œç‰©ç†ç§‘ç›®ä¸Šè¡¨ç°ä¸ä½³ï¼Œå¯èƒ½å› æ­¤äº§ç”Ÿç„¦è™‘ã€‚</span>
<span class="hljs-comment">#æ„å›¾å®ç°ï¼šAIæ™ºèƒ½ä½“é¦–å…ˆå…±æƒ…å­¦ç”Ÿçš„æƒ…ç»ªï¼Œç„¶åå¼•å¯¼å­¦ç”Ÿæ‰¾åˆ°å­¦ä¹ æ–¹æ³•ä¸Šçš„ä¸è¶³ï¼Œå¹¶æä¾›å…·ä½“çš„æ”¹è¿›å»ºè®®ï¼Œå¦‚åˆ¶å®šåˆç†çš„å­¦ä¹ è®¡åˆ’ã€è°ƒæ•´å­¦ä¹ ç­–ç•¥ç­‰ã€‚</span>

<span class="hljs-comment">#æ„å›¾åç§°ï¼šæ•™å¸ˆæ•°æ®åˆ†ææ”¯æŒ</span>
<span class="hljs-comment">#æ„å›¾æè¿°ï¼šä¸ºæ•™å¸ˆæä¾›å»æƒ…ç»ªåŒ–çš„æ•°æ®åˆ†æä¸é£é™©æç¤ºï¼Œå¸®åŠ©æ•™å¸ˆæ›´å¥½åœ°äº†è§£å­¦ç”Ÿçš„å­¦ä¹ æƒ…å†µå’Œæ½œåœ¨é—®é¢˜ã€‚</span>
<span class="hljs-comment">#æ„å›¾ç¤ºä¾‹ï¼šæ•™å¸ˆå¸Œæœ›äº†è§£ç­çº§æ•´ä½“å­¦ä¸šè¡¨ç°å’Œæ½œåœ¨é—®é¢˜ã€‚AIæ™ºèƒ½ä½“é€šè¿‡åˆ†æç­çº§æˆç»©å•æ•°æ®ï¼Œå‘ç°æŸäº›ç§‘ç›®æ™®éæˆç»©è¾ƒä½ï¼Œå¯èƒ½å­˜åœ¨æ•™å­¦éš¾ç‚¹æˆ–å­¦ç”Ÿå…´è¶£ä¸è¶³ç­‰é—®é¢˜ã€‚</span>
<span class="hljs-comment">#æ„å›¾å®ç°ï¼šAIæ™ºèƒ½ä½“å°†åˆ†æç»“æœä»¥å®¢è§‚ã€ä¸­æ€§çš„è¯­è¨€å‘ˆç°ç»™æ•™å¸ˆï¼Œå¹¶æå‡ºç›¸åº”çš„æ•™å­¦è°ƒæ•´å»ºè®®ï¼Œå¦‚å¢åŠ äº’åŠ¨ç¯èŠ‚ã€è°ƒæ•´æ•™å­¦è¿›åº¦ç­‰ã€‚</span>

</code></pre>
<p>åœ¨ ã€Œæ¬¢è¿è¯­è®¾ç½®ã€ ä¸­é…ç½®ç”¨æˆ·é¦–æ¬¡è¿›å…¥å¯¹è¯æ—¶çš„å¼•å¯¼è¯­ï¼Œç”¨äºæ˜ç¡®æ™ºèƒ½ä½“èƒ½åŠ›è¾¹ç•Œï¼Œå¹¶å¼•å¯¼ç”¨æˆ·æ­£ç¡®è¾“å…¥ã€‚</p>
<blockquote>
<p>å“ˆå–½ï¼Œæˆ‘æ˜¯å­¦ä¸šæˆç»©åˆ†æå‹åŠ›æ„ŸçŸ¥å‹ AI å¿ƒç†é™ªä¼´ï¼Œè¯·å‘é€æ‚¨çš„æˆç»©å•ã€‚</p>
</blockquote>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/089b899d0be34bb4a4833236ca650f44~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZUpvdXJuZXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767362992&amp;x-signature=%2BM8hx8g4FqnWyZFYQAuWWoFnhnc%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
åœ¨æ¨¡å‹é…ç½®æ¨¡å—ä¸­ï¼Œé€‰æ‹© æ··å…ƒå¤§æ¨¡å‹ ä½œä¸ºæ™ºèƒ½ä½“åº•å±‚æ¨ç†æ¨¡å‹ã€‚
è¯¥æ¨¡å‹åœ¨ä¸­æ–‡ç†è§£ã€å¤šè½®å¯¹è¯ã€æƒ…ç»ªè¯­ä¹‰è¯†åˆ«åŠç»“æ„åŒ–è¾“å‡ºæ–¹é¢è¡¨ç°ç¨³å®šï¼Œé€‚åˆæ•™è‚²ä¸å¿ƒç†é™ªä¼´ç±»åº”ç”¨åœºæ™¯ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2ffdc96f44e940728af717d1f510e0f5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZUpvdXJuZXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767362992&amp;x-signature=ytdwANO3MMaCV08b1EqaCtfteJI%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/873f29c47d204257be445d737193360a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZUpvdXJuZXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767362992&amp;x-signature=c9%2BbGBAZroAmA%2BQLr02VKVFxJMc%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h2 data-id="heading-14">äº”. è…¾è®¯å…ƒå™¨æ™ºèƒ½ä½“å·¥ä½œæµç¼–å†™</h2>
<p>æ™ºèƒ½ä½“çš„æ ¸å¿ƒèƒ½åŠ›ä¸ä»…æ¥æºäºå¤§æ¨¡å‹æœ¬èº«ï¼Œæ›´ä¾èµ–äºæ¸…æ™°ã€å¯æ§çš„å·¥ä½œæµè®¾è®¡ã€‚é€šè¿‡å·¥ä½œæµï¼Œå¯ä»¥å°†â€œç”¨æˆ·è¾“å…¥ â†’ æ•°æ®è§£æ â†’ é€»è¾‘åˆ¤æ–­ â†’ æ¨¡å‹æ¨ç† â†’ ç»“æœè¾“å‡ºâ€æ‹†è§£ä¸ºå¤šä¸ªå¯ç®¡ç†çš„èŠ‚ç‚¹ï¼Œä½¿æ™ºèƒ½ä½“å…·å¤‡ç¨³å®šã€å¯å¤ç”¨çš„ä¸šåŠ¡æ‰§è¡Œèƒ½åŠ›ã€‚</p>
<h3 data-id="heading-15">5.1 å·¥ä½œæµåˆ›å»º</h3>
<p>åœ¨æ™ºèƒ½ä½“åå°ç®¡ç†é¡µé¢ä¸­ï¼Œç‚¹å‡»å·¦ä¾§ ã€Œå·¥ä½œæµç®¡ç†ã€ï¼Œç„¶åç‚¹å‡» ã€Œæ–°å»ºã€ï¼Œå¼€å§‹åˆ›å»ºæ–°çš„æ™ºèƒ½ä½“å·¥ä½œæµã€‚</p>
<p>è¯¥å·¥ä½œæµå°†ä½œä¸ºæ™ºèƒ½ä½“å¤„ç†ç”¨æˆ·è¯·æ±‚çš„ä¸»æ‰§è¡Œé“¾è·¯ã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a5197f52470042d7ae70e0c0dfbb4183~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZUpvdXJuZXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767362992&amp;x-signature=RpQ1wG6LwNV7u3aFHQ%2FMXXV%2Fmws%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>åœ¨åˆ›å»ºæ–¹å¼é€‰æ‹©å¼¹çª—ä¸­ï¼Œé€‰æ‹© ã€Œæ‰‹åŠ¨å½•å…¥ã€ã€‚</p>
<p>æ‰‹åŠ¨å½•å…¥æ–¹å¼é€‚åˆéœ€è¦ç²¾ç»†æ§åˆ¶é€»è¾‘èŠ‚ç‚¹ã€æ¡ä»¶åˆ†æ”¯ä¸å¤šè§’è‰²è¾“å‡ºçš„å¤æ‚æ™ºèƒ½ä½“åœºæ™¯ï¼Œæœ¬é¡¹ç›®ä¸­çš„â€œæˆç»©åˆ†æ + æƒ…ç»ªç–å¯¼â€æ­£æ˜¯å…¸å‹ä»£è¡¨ã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/65d27dbe5df441499a065cc34e242108~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZUpvdXJuZXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767362992&amp;x-signature=Zmg2myycjakWEE%2Bc282tzE919Yg%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
åœ¨æ–°å»ºå·¥ä½œæµé¡µé¢ä¸­ï¼Œå¡«å†™ä»¥ä¸‹ä¿¡æ¯ï¼š</p>
<ul>
<li>
<p>å·¥ä½œæµåç§°ï¼šç”¨äºæ ‡è¯†è¯¥å·¥ä½œæµçš„åŠŸèƒ½ç”¨é€”ï¼ˆå¦‚ï¼šæˆç»©åˆ†æä¸å‹åŠ›æ„ŸçŸ¥ä¸»æµç¨‹ï¼‰</p>
</li>
<li>
<p>å·¥ä½œæµæè¿°ï¼šç®€è¦è¯´æ˜è¯¥å·¥ä½œæµçš„æ‰§è¡Œç›®æ ‡ã€é€‚ç”¨å¯¹è±¡ä¸æ ¸å¿ƒé€»è¾‘</p>
</li>
</ul>
<p>å¡«å†™å®Œæˆåç¡®è®¤åˆ›å»ºï¼Œç³»ç»Ÿå°†ç”Ÿæˆä¸€ä¸ªæ–°çš„å·¥ä½œæµå®ä¾‹ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4fa8fe3a216246ba90bb6d7b105cee01~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZUpvdXJuZXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767362992&amp;x-signature=C9e7w4P77MjKv6yU6fKHOeOrub8%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>å·¥ä½œæµåˆ›å»ºå®Œæˆåï¼Œå°†è‡ªåŠ¨è¿›å…¥ å·¥ä½œæµç¼–è¾‘é¢æ¿ã€‚
è¯¥é¢æ¿æ˜¯åç»­è¿›è¡ŒèŠ‚ç‚¹ç¼–æ’ã€æ¡ä»¶åˆ¤æ–­ã€æ¨¡å‹è°ƒç”¨ä¸è¾“å‡ºæ§åˆ¶çš„æ ¸å¿ƒæ“ä½œåŒºåŸŸã€‚</p>
<p>åœ¨é¢æ¿ä¸­ï¼Œå¯ä»¥æ¸…æ™°çœ‹åˆ°ï¼š</p>
<ul>
<li>
<p>å·¥ä½œæµçš„æ•´ä½“æ‰§è¡Œç»“æ„</p>
</li>
<li>
<p>å„åŠŸèƒ½èŠ‚ç‚¹çš„è¿æ¥å…³ç³»</p>
</li>
<li>
<p>å½“å‰å·¥ä½œæµçš„èµ·å§‹èŠ‚ç‚¹ä¸ç»“æŸèŠ‚ç‚¹</p>
</li>
</ul>
<p>åç»­çš„æˆç»©å•è§£æã€å­¦ä¸šåˆ†æã€å‹åŠ›æ„ŸçŸ¥ä¸ç»“æœè¾“å‡ºï¼Œå‡å°†åœ¨è¯¥é¢æ¿ä¸­ä»¥èŠ‚ç‚¹æ–¹å¼é€æ­¥æ„å»ºã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bcae94c4a7f840c09ba9e16214b9fac6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZUpvdXJuZXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767362992&amp;x-signature=VvFKelNdcLuycEvtVQL%2FnWm9%2FRM%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>é…ç½®å·¥ä½œæµçš„å¼€å§‹èŠ‚ç‚¹ï¼Œå®šä¹‰ä¸¤ä¸ªè¾“å…¥å˜é‡ï¼š</p>
<p>imageï¼šç”¨äºæ¥æ”¶å­¦ç”Ÿä¸Šä¼ çš„æˆç»©å•å›¾ç‰‡ï¼Œä½œä¸ºåç»­ OCR è§£æä¸æˆç»©åˆ†æçš„åŸå§‹æ•°æ®è¾“å…¥ã€‚</p>
<p>qï¼šç”¨äºæ¥æ”¶å­¦ç”Ÿä»¥è‡ªç„¶è¯­è¨€å½¢å¼æå‡ºçš„å­¦ä¹ å›°æƒ‘ã€æƒ…ç»ªè¡¨è¾¾æˆ–å…·ä½“åˆ†æéœ€æ±‚ï¼Œä½œä¸ºæ™ºèƒ½ä½“ç†è§£ç”¨æˆ·æ„å›¾ä¸æƒ…ç»ªçŠ¶æ€çš„é‡è¦è¾“å…¥ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a165583ac8664ccba596d80aa9b393c9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZUpvdXJuZXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767362992&amp;x-signature=%2BMKCFB5PSwS%2FzokdFvCP7mTCRFM%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h3 data-id="heading-16">5.2 æˆç»©å•è§£æèƒ½åŠ›èŠ‚ç‚¹é…ç½®ï¼ˆTextIn å¤§æ¨¡å‹åŠ é€Ÿå™¨æ¥å…¥ï¼‰</h3>
<p>åœ¨æ™ºèƒ½ä½“èƒ½åŠ›ç¼–æ’ä¸­ï¼Œåœ¨å¼€å§‹èŠ‚ç‚¹åéœ€è¦é…ç½® <strong>æˆç»©å•è§£æèŠ‚ç‚¹</strong>ï¼Œä½œä¸ºæ•´ä¸ªç³»ç»Ÿçš„æ•°æ®å¤„ç†è¯†åˆ«ä¸­å¿ƒã€‚</p>
<p>åœ¨å…ƒå™¨æµç¨‹ä¸­ï¼Œè¯¥èŠ‚ç‚¹çš„æ ¸å¿ƒèŒè´£æ˜¯ï¼š</p>
<ol>
<li>æ¥æ”¶ç”¨æˆ·ä¸Šä¼ çš„æˆç»©å•æ–‡ä»¶ï¼›</li>
<li>è°ƒç”¨ TextIn å®Œæˆ OCR ä¸è¡¨æ ¼ç»“æ„è¿˜åŸï¼›</li>
<li>è¾“å‡ºåŒ…å«å­¦ç”Ÿä¿¡æ¯ã€å­¦ç§‘æˆç»©ã€æ€»åˆ†ã€æ’åç­‰å­—æ®µçš„ç»“æ„åŒ–ç»“æœï¼›</li>
<li>å°†ç»“æœä¼ é€’ç»™åç»­åˆ†æèŠ‚ç‚¹ã€‚</li>
</ol>
<p>è¿™ä¸€èŠ‚ç‚¹è§£å†³çš„æ˜¯â€œ<strong>æ•°æ®ä»å“ªæ¥ã€æ˜¯å¦å¯é </strong>â€çš„é—®é¢˜ï¼Œæ˜¯åç»­æ‰€æœ‰åˆ†æä¸æ¨ç†çš„å‰æåŸºç¡€ã€‚</p>
<hr/>
<p>å®Œæˆå¼€å§‹èŠ‚ç‚¹é…ç½®åï¼Œéœ€è¦å¼•å…¥ OCR ä¸æ–‡æ¡£ç»“æ„åŒ–è§£æèƒ½åŠ›ã€‚æœ¬æ–¹æ¡ˆé€‰ç”¨ TextIn å¤§æ¨¡å‹åŠ é€Ÿå™¨ï¼ˆé€šç”¨æ¨¡å‹ï¼‰ï¼Œç”¨äºå°†æˆç»©å•è§£æä¸º Markdown ç»“æ„åŒ–ç»“æœã€‚</p>
<blockquote>
<p>/ai/service/v1/pdf_to_markdown</p>
</blockquote>
<ul>
<li>è¾“å…¥ï¼šPDFã€å›¾ç‰‡æˆ–æ‰«æä»¶</li>
<li>è¾“å‡ºï¼šJSON ç»“æ„åŒ–æ•°æ®ï¼ŒåŒ…æ‹¬å­¦ç”Ÿä¿¡æ¯ã€è¯¾ç¨‹æˆç»©ã€æ€»è¯„ç­‰çº§ç­‰</li>
<li>æŠ€æœ¯ç‰¹ç‚¹ï¼š
<ul>
<li>å¤šæ¨¡æ€è§£æï¼Œæ”¯æŒå›¾ç‰‡æ–‡å­—ã€è¡¨æ ¼è¯†åˆ«</li>
<li>è‡ªåŠ¨æ ¼å¼æ ‡å‡†åŒ–ï¼Œå…¼å®¹ä¸åŒé™¢æ ¡æ¨¡æ¿</li>
</ul>
</li>
</ul>
<p>pythonè°ƒç”¨ç¤ºä¾‹ï¼š(è™½ç„¶æˆ‘ä»¬åœ¨è…¾è®¯å…ƒå™¨é‡Œå¯ä»¥ç›´æ¥è°ƒç”¨ï¼Œä½†æ˜¯è¿˜æ˜¯å»ºè®®ç†è§£ä¸€ä¸‹ä¸‹é¢è¿™æ®µç›´æ¥è°ƒç”¨TextIn å¤§æ¨¡å‹åŠ é€Ÿå™¨çš„ä»£ç ï¼Œä¼šè®©æˆ‘ä»¬æ›´å®¹æ˜“ç†è§£)</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> json
<span class="hljs-keyword">import</span> requests

<span class="hljs-keyword">class</span> <span class="hljs-title class_">OCRClient</span>:
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, app_id: <span class="hljs-built_in">str</span>, secret_code: <span class="hljs-built_in">str</span></span>):
        self.app_id = app_id
        self.secret_code = secret_code

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">recognize</span>(<span class="hljs-params">self, file_content: <span class="hljs-built_in">bytes</span>, options: <span class="hljs-built_in">dict</span></span>) -&gt; <span class="hljs-built_in">str</span>:
        <span class="hljs-comment"># æ„å»ºè¯·æ±‚å‚æ•°</span>
        params = {}
        <span class="hljs-keyword">for</span> key, value <span class="hljs-keyword">in</span> options.items():
            params[key] = <span class="hljs-built_in">str</span>(value)

        <span class="hljs-comment"># è®¾ç½®è¯·æ±‚å¤´</span>
        headers = {
            <span class="hljs-string">"x-ti-app-id"</span>: self.app_id,
            <span class="hljs-string">"x-ti-secret-code"</span>: self.secret_code,
            <span class="hljs-comment"># æ–¹å¼ä¸€ï¼šè¯»å–æœ¬åœ°æ–‡ä»¶</span>
            <span class="hljs-string">"Content-Type"</span>: <span class="hljs-string">"application/octet-stream"</span>
            <span class="hljs-comment"># æ–¹å¼äºŒï¼šä½¿ç”¨URLæ–¹å¼</span>
            <span class="hljs-comment"># "Content-Type": "text/plain"</span>
        }

        <span class="hljs-comment"># å‘é€è¯·æ±‚</span>
        response = requests.post(
            <span class="hljs-string">f"/ai/service/v1/pdf_to_markdown"</span>,
            params=params,
            headers=headers,
            data=file_content
        )

        <span class="hljs-comment"># æ£€æŸ¥å“åº”çŠ¶æ€</span>
        response.raise_for_status()
        <span class="hljs-keyword">return</span> response.text

<span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>():
    <span class="hljs-comment"># åˆ›å»ºå®¢æˆ·ç«¯å®ä¾‹ï¼Œéœ€æ›¿æ¢ä½ çš„API Key</span>
    client = OCRClient(<span class="hljs-string">"ä½ çš„x-ti-app-id"</span>, <span class="hljs-string">"ä½ çš„x-ti-secret-code"</span>)

        <span class="hljs-comment"># æ’å…¥ä¸‹é¢çš„ç¤ºä¾‹ä»£ç </span>

<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">"__main__"</span>:
    main()

</code></pre>
<p>åœ¨å¼€å§‹èŠ‚ç‚¹åé€‰æ‹©å·¥å…·èŠ‚ç‚¹
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5481084f9f7e443582aaa4e767bf3bf9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZUpvdXJuZXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767362992&amp;x-signature=EtMb6aPgO5VqR9CpGdLTTT5qzoc%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/180a152dbee64442b671f1bd287e8625~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZUpvdXJuZXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767362992&amp;x-signature=KfY%2FAW%2FNbMgqorflFE59JU7j0W0%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>åœ¨ HTTP è¯·æ±‚èŠ‚ç‚¹ä¸­ï¼Œéœ€è¦é…ç½®ä»¥ä¸‹ä¸¤ä¸ªå…³é”®è¯·æ±‚å¤´å‚æ•°ï¼š
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b1bdca0bc7b84179a52963f1fb6dc764~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZUpvdXJuZXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767362992&amp;x-signature=IDuld1AEEMd4bKxjTuLggClLPr8%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
å¦‚æœä¸æ¸…æ¥šè¿™ä¸¤ä¸ªå‚æ•°å¦‚ä½•å¡«å†™ï¼Œå¯æŒ‰ä»¥ä¸‹æ­¥éª¤è·å–ï¼š</p>
<ol>
<li>ç™»å½• TextIn æ§åˆ¶å°</li>
<li>è¿›å…¥ å¼€å‘è€…ä¿¡æ¯ / åº”ç”¨ç®¡ç†</li>
<li>æŸ¥çœ‹å¯¹åº”åº”ç”¨çš„ï¼š
x-ti-app-id
x-ti-secret-code</li>
</ol>
<p>âš ï¸ æ³¨æ„ï¼š
äºŒè€…ç»„åˆæ„æˆå”¯ä¸€åˆæ³•è°ƒç”¨å‡­è¯ï¼Œè¯·å¦¥å–„ä¿ç®¡ï¼Œå¯ä»¥åˆ°TextIn æ§åˆ¶å°é‡Œçš„å¼€å‘è€…ä¿¡æ¯å¤„æŸ¥çœ‹ã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/60227c58544f46df9965d918b170dd23~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZUpvdXJuZXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767362992&amp;x-signature=oXWrZk8N%2FRHePTGIt6jXCBem8fI%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>åœ¨APIå‚æ•°åŒºåŸŸè®¾ç½®å˜é‡åã€‚
x-ti-app-id
x-ti-secret-code
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9dfd62aa3a8f49bc9db1cbb56811388a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZUpvdXJuZXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767362992&amp;x-signature=OEQ6HosmC%2Fx4tx1c1goXAo7AUOM%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
åœ¨Bodyè¯·æ±‚ä½“ï¼Œæ‰¿è½½å¤æ‚ / å¤§å®¹é‡ / ç»“æ„åŒ–æ•°æ®ï¼Œæ˜¯è¯·æ±‚çš„æ ¸å¿ƒè½½è·ã€‚ä¸­ç»‘å®šå¼€å§‹èŠ‚ç‚¹ä¼ å…¥çš„imageå‚æ•°ã€‚å¦‚ä¸‹</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6d23928ec64a43b88e5e8e46c0c18297~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZUpvdXJuZXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767362992&amp;x-signature=UVRlHLs0OWlJYvLIoPIz2pNVc9o%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
TextIn å¤§æ¨¡å‹åŠ é€Ÿå™¨èŠ‚ç‚¹çš„é»˜è®¤è¾“å‡ºå˜é‡ä¸º out_textã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ba6c97a7cb5f4ee382bafcf38ffdaa2e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZUpvdXJuZXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767362992&amp;x-signature=dC1NWUz6v5keQrKE16EjKMphXQY%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
åœ¨å®é™…æ¥å…¥è¿‡ç¨‹ä¸­ï¼Œä½œè€…é€šè¿‡å¤šæ¬¡å°è¯•å¹¶ç»“åˆå®˜æ–¹å­¦ä¹ æ–‡æ¡£å‘ç°ï¼š
å·¥å…·èŠ‚ç‚¹åœ¨å‚æ•°ä¼ é€’èƒ½åŠ›ä¸Šå­˜åœ¨é™åˆ¶ï¼Œæ— æ³•å®Œå…¨æ»¡è¶³å½“å‰ OCR æ¥å£çš„è°ƒç”¨éœ€æ±‚ï¼Œå°¤å…¶æ˜¯åœ¨éœ€è¦çµæ´»æ§åˆ¶ Headerã€Query å‚æ•°ä»¥åŠ äºŒè¿›åˆ¶çš„æ•°æ®æ ¼å¼åœºæ™¯ä¸‹ã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f7d60f125f90402982a84a8eb6f0a4a0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZUpvdXJuZXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767362992&amp;x-signature=IwWMNZ9rY%2FB%2FW9h%2B7Nsr6WCRFSw%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3f4076e06eaf4d28ac761a8040f92403~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZUpvdXJuZXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767362992&amp;x-signature=cCc3cwsZFWZPocrYlk8kzXCuTSQ%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fe848fbdf9544df7ae6a4f76edb0a49e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZUpvdXJuZXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767362992&amp;x-signature=UTLg9Y%2BYysUTKcKXhU6wySKag2Q%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4abfedd9b9a7489bafc42cfc7aec6029~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZUpvdXJuZXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767362992&amp;x-signature=5u0n0%2BMP4JspFMOl67x%2F4yBHmxI%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
ä¸è¿‡ï¼Œè…¾è®¯å…ƒå™¨å·¥ä½œæµé¢å¤–æ”¯æŒã€Œä»£ç èŠ‚ç‚¹ã€ï¼Œè¿™ä½¿å¾—ä¸Šè¿°é—®é¢˜å¯ä»¥é€šè¿‡è‡ªå®šä¹‰ä»£ç çš„æ–¹å¼è¿›è¡Œå¦¥å–„è§£å†³ï¼Œä»è€Œç»•å¼€å·¥å…·èŠ‚ç‚¹åœ¨å‚æ•°èƒ½åŠ›ä¸Šçš„é™åˆ¶ã€‚</p>
<p>å› æ­¤ï¼Œæˆ‘ä»¬é‡‡ç”¨å¦‚ä¸‹æ–¹æ¡ˆï¼š</p>
<p>ğŸ‘‰ åœ¨å¼€å§‹èŠ‚ç‚¹ï¼ˆStartï¼‰ä¹‹åæ–°å¢ä¸€ä¸ªä»£ç èŠ‚ç‚¹ï¼ˆCode Nodeï¼‰ï¼Œç”±è¯¥èŠ‚ç‚¹ç›´æ¥å®Œæˆ TextIn OCR API çš„è°ƒç”¨ä¸ç»“æœè§£æã€‚<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/37d819527a6d4164885187be2bfabe4f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZUpvdXJuZXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767362992&amp;x-signature=CngEsTaEOUlYZqv9eL8A8XrWa6E%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ecfd8ea302384c42abcd00f94c420157~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZUpvdXJuZXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767362992&amp;x-signature=8w9yPEieuKfFJFjc3RSmhRRBcSE%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
æ ¹æ® TextIn å®˜æ–¹å¼€å‘æ–‡æ¡£ï¼Œåœ¨ä»£ç èŠ‚ç‚¹ä¸­ç¼–å†™å®Œæ•´çš„ OCR è°ƒç”¨é€»è¾‘ï¼ŒåŒ…æ‹¬ï¼š</p>
<ul>
<li>
<p>è¯·æ±‚ Header ä¸­çš„ x-ti-app-id ä¸ x-ti-secret-code</p>
</li>
<li>
<p>Query å‚æ•°çš„åŠ¨æ€æ‹¼è£…</p>
</li>
<li>
<p>è¯·æ±‚ Body ç›´æ¥ä¼ å…¥å›¾ç‰‡ URL</p>
</li>
<li>
<p>è¿”å›ç»“æœå¼ºåˆ¶è§£æä¸º JSON å¯¹è±¡
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3b64cbd464c6433f9b9fadc22b209ab8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZUpvdXJuZXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767362992&amp;x-signature=nH55PB78IFrhy6phKl9oUMMOPyQ%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
è°ƒç”¨ä»£ç å¦‚ä¸‹</p>
</li>
</ul>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> json
<span class="hljs-keyword">import</span> requests
<span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> <span class="hljs-type">Dict</span>, <span class="hljs-type">Any</span>


<span class="hljs-keyword">class</span> <span class="hljs-title class_">OCRClient</span>:
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, app_id: <span class="hljs-built_in">str</span>, secret_code: <span class="hljs-built_in">str</span></span>):
        self.app_id = app_id
        self.secret_code = secret_code

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">recognize</span>(<span class="hljs-params">self, image_url: <span class="hljs-built_in">str</span>, options: <span class="hljs-type">Dict</span>[<span class="hljs-built_in">str</span>, <span class="hljs-type">Any</span>]</span>) -&gt; <span class="hljs-type">Dict</span>[<span class="hljs-built_in">str</span>, <span class="hljs-type">Any</span>]:
        headers = {
            <span class="hljs-string">"x-ti-app-id"</span>: self.app_id,
            <span class="hljs-string">"x-ti-secret-code"</span>: self.secret_code,
            <span class="hljs-string">"Content-Type"</span>: <span class="hljs-string">"text/plain"</span>
        }

        params = {k: <span class="hljs-built_in">str</span>(v) <span class="hljs-keyword">for</span> k, v <span class="hljs-keyword">in</span> options.items()}

        resp = requests.post(
            <span class="hljs-string">"https://api.textin.com/ai/service/v1/pdf_to_markdown"</span>,
            headers=headers,
            params=params,
            data=image_url
        )

        resp.raise_for_status()

        <span class="hljs-comment"># âš ï¸ è¿™é‡Œå¼ºåˆ¶è½¬æˆ JSON å¯¹è±¡</span>
        <span class="hljs-keyword">return</span> resp.json()


<span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>(<span class="hljs-params">input_data: <span class="hljs-type">Dict</span>[<span class="hljs-built_in">str</span>, <span class="hljs-type">Any</span>]</span>) -&gt; <span class="hljs-type">Dict</span>[<span class="hljs-built_in">str</span>, <span class="hljs-type">Any</span>]:
    <span class="hljs-string">"""
    èŠ‚ç‚¹ä¸»å‡½æ•°
    è¾“å…¥ï¼š
    {
        "image": "https://xxx.png"
    }

    è¾“å‡ºï¼ˆJSON å¯¹è±¡ï¼‰ï¼š
    {
        "success": true,
        "result": {...}
    }
    """</span>

    image = input_data.get(<span class="hljs-string">"image"</span>)
    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> image:
        <span class="hljs-keyword">return</span> {
            <span class="hljs-string">"success"</span>: <span class="hljs-literal">False</span>,
            <span class="hljs-string">"error"</span>: <span class="hljs-string">"image å‚æ•°ç¼ºå¤±"</span>
        }

    <span class="hljs-keyword">try</span>:
        result = client.recognize(
            image_url=image,
 
        )

        <span class="hljs-keyword">return</span> {
            <span class="hljs-string">"success"</span>: <span class="hljs-literal">True</span>,
            <span class="hljs-string">"result"</span>: result
        }

    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
        <span class="hljs-keyword">return</span> {
            <span class="hljs-string">"success"</span>: <span class="hljs-literal">False</span>,
            <span class="hljs-string">"error"</span>: <span class="hljs-built_in">str</span>(e)
        }


</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7db24f141ce74dfe803f2f4fa1180cc6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZUpvdXJuZXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767362992&amp;x-signature=ZYqI%2FcAYE8gRldjP%2FYK4cYgz3fc%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
åœ¨ä»£ç èŠ‚ç‚¹ä¸­ï¼Œå¯¹å¤–æš´éœ²çš„è¾“å…¥å˜é‡å‘½åä¸º imageï¼Œç”¨äºæ¥æ”¶ä¸Šä¸€èŠ‚ç‚¹ä¼ å…¥çš„å›¾ç‰‡ URLã€‚</p>
<p>å®Œæˆé…ç½®åï¼Œå¯ä»¥é€šè¿‡ å•ç‚¹è°ƒè¯• åŠŸèƒ½å¿«é€ŸéªŒè¯èŠ‚ç‚¹è¿è¡Œæ•ˆæœã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5ae32097a5fc43fe97f5db38a2346e88~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZUpvdXJuZXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767362992&amp;x-signature=iFE92qUH36L%2BVZJHUymHIAlLOUk%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
è°ƒè¯•è¿‡ç¨‹ä¸­è¾“å…¥çš„æµ‹è¯•å›¾åƒå¦‚ä¸‹ï¼š
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ecffadf6619f4ff689ead82734f1f77d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZUpvdXJuZXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767362992&amp;x-signature=vW%2FhAUpI5LPuuHN%2BDw83eJO0cU8%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6115199c5a014032a82f7646b595e005~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZUpvdXJuZXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767362992&amp;x-signature=LLUdLGCYzLRVUGx4%2F5K5e5B251Q%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
ä»£ç èŠ‚ç‚¹æ‰§è¡ŒæˆåŠŸåï¼Œè¿”å›çš„ TextIn å¤§æ¨¡å‹åŠ é€Ÿå™¨ OCR ç»“æœå¦‚ä¸‹ï¼š
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/31d4baad7f064905a779b6c7276453f7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZUpvdXJuZXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767362992&amp;x-signature=Wrcy5NReyM61d0A92dz1BLkYJNY%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
æ­¤æ—¶å¯ä»¥å‘ç°ï¼š
å¦‚æœè¾“å‡ºå˜é‡ä»ç„¶ä½¿ç”¨é»˜è®¤çš„ out_textï¼Œå°†æ— æ³•æ­£ç¡®æ•è·è¿”å›ç»“æœã€‚</p>
<p>è§£å†³æ–¹å¼æ˜¯ï¼š</p>
<blockquote>
<p>ğŸ‘‰ å°†ä»£ç èŠ‚ç‚¹çš„è¾“å‡ºå˜é‡æ˜¾å¼è®¾ç½®ä¸º dataï¼Œå³å¯å®Œæ•´æ¥æ”¶ JSON ç»“æ„çš„ OCR è§£æç»“æœã€‚</p>
</blockquote>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f4ed50667fab48bb9870895a8831bcc0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZUpvdXJuZXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767362992&amp;x-signature=kUCKn45wVzuaCw%2B8OMLoQH3dFJU%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dc162f267dd64bd4a8da55c4facda33d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZUpvdXJuZXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767362992&amp;x-signature=hPcg2vEKV3l2E7rOb6JkQGVFmek%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
æ•´ä½“è°ƒè¯•ä¹Ÿæ²¡æœ‰ä»»ä½•é—®é¢˜ï¼Œåˆ°æ­¤æˆç»©å•è§£æèƒ½åŠ›èŠ‚ç‚¹é…ç½®å®Œæ¯•ã€‚ä¸‹é¢å¯æ¥å…¥åˆ†æå¤§æ¨¡å‹ã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/60f78893063e4d59b77e19d47fe81896~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZUpvdXJuZXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767362992&amp;x-signature=lXVaw2boneTXdSAZi1xuxsUZDww%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e82f408d7bc04d6c89d703dc965317d3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZUpvdXJuZXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767362992&amp;x-signature=eEA6YvmxeNunRN%2F0aI96w5fzLkk%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h3 data-id="heading-17">5.3 æˆç»©åˆ†æä¸è§„åˆ™è®¡ç®—èŠ‚ç‚¹è®¾è®¡</h3>
<p>åœ¨è·å–ç»“æ„åŒ–æˆç»©æ•°æ®åï¼Œæ™ºèƒ½ä½“è¿›å…¥ <strong>æˆç»©åˆ†æä¸ç»Ÿè®¡è®¡ç®—é˜¶æ®µ</strong>ã€‚</p>
<p>è¯¥é˜¶æ®µé‡‡ç”¨ <strong>è§„åˆ™è®¡ç®— + å¤§æ¨¡å‹è§£é‡Š</strong> çš„æ–¹å¼ï¼š</p>
<ul>
<li>
<p>æ•°æ®å¤„ç†èŠ‚ç‚¹è´Ÿè´£ï¼š</p>
<ul>
<li>å¹³å‡åˆ†ã€æœ€é«˜åˆ†ã€æœ€ä½åˆ†è®¡ç®—</li>
<li>å­¦ç§‘å‡è¡¡åº¦ä¸åç§‘è¯†åˆ«</li>
<li>æˆç»©è¶‹åŠ¿ä¸æ³¢åŠ¨æ£€æµ‹</li>
</ul>
</li>
<li>
<p>å‹åŠ›æ„ŸçŸ¥å‹å¿ƒç†é™ªä¼´èŠ‚ç‚¹è´Ÿè´£ï¼š</p>
<ul>
<li>å¯¹ç»Ÿè®¡ç»“æœè¿›è¡Œè‡ªç„¶è¯­è¨€æ€»ç»“</li>
<li>å°†æ•°æ®ç»“è®ºè½¬åŒ–ä¸ºâ€œå­¦ç”Ÿ/æ•™å¸ˆå¬å¾—æ‡‚çš„è¯â€</li>
<li>å¯¹å­¦ç”Ÿæˆç»©è¿›è¡Œå‹åŠ›åˆ†æ</li>
<li>æå‡ºæˆç»©æå‡è®¡åˆ’</li>
<li>å¯¹å­¦ç”Ÿè¿›è¡Œå¿ƒç†ç–å¯¼ï¼Œé¿å…å‹åŠ›è¿‡å¤§</li>
</ul>
</li>
</ul>
<p>åœ¨è…¾è®¯å…ƒå™¨ä¸­ï¼Œè¿™ä¸€é˜¶æ®µé€šå¸¸ä»¥ <strong>æ•°æ®å¤„ç†èŠ‚ç‚¹ + å‹åŠ›æ„ŸçŸ¥å‹å¿ƒç†é™ªä¼´èŠ‚ç‚¹èŠ‚ç‚¹</strong> çš„ç»„åˆæ–¹å¼å®ç°ã€‚</p>
<h3 data-id="heading-18">5.4 æ•°æ®å¤„ç†èŠ‚ç‚¹ï¼ˆæ··å…ƒå¤§æ¨¡å‹ï¼‰</h3>
<p>åœ¨å®Œæˆ TextIn å¤§æ¨¡å‹åŠ é€Ÿå™¨ OCR è§£æåï¼Œæˆ‘ä»¬å°†å¼•å…¥ æ··å…ƒå¤§æ¨¡å‹è¿›è¡Œä¸“ä¸šçš„æ•°æ®å¤„ç†åˆ†æã€‚
æ•°æ®å¤„ç†èŠ‚ç‚¹ä¸»è¦åŠŸèƒ½åŒ…æ‹¬ï¼š</p>
<blockquote>
<p>å¹³å‡åˆ†ã€æœ€é«˜åˆ†ã€æœ€ä½åˆ†è®¡ç®—
å­¦ç§‘å‡è¡¡åº¦è¯„ä¼°ä¸åç§‘è¯†åˆ«
æˆç»©è¶‹åŠ¿åŠåˆ†æ•°æ³¢åŠ¨æ£€æµ‹</p>
</blockquote>
<p>åœ¨ TextIn OCR ä»£ç èŠ‚ç‚¹ä¹‹åï¼Œæ–°å¢ æ··å…ƒå¤§æ¨¡å‹æ•°æ®å¤„ç†èŠ‚ç‚¹ã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/06ec8f22973b40bfbc6457ab46e13497~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZUpvdXJuZXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767362992&amp;x-signature=iYAIbPGKtbWwQmjNtQpBlJYnvyo%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
é€‰æ‹©æ“…é•¿æ•°å­¦è®¡ç®—çš„ æ··å…ƒ 2.0 æ¨¡å‹ ä»¥ä¿è¯æ•°æ®å¤„ç†çš„ç²¾åº¦ä¸ä¸“ä¸šæ€§ã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fa2e32d4c742475cb4fda4ea97a17a3c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZUpvdXJuZXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767362992&amp;x-signature=cOpdgcggoc%2FYPib4kBe8A5fFfQc%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
å°†å‰èŠ‚ç‚¹è¾“å‡ºçš„ OCR æ•°æ®ç»‘å®šä¸ºè¾“å…¥å˜é‡ï¼Œä»¥ä¾¿æ··å…ƒæ¨¡å‹ç›´æ¥æ¥æ”¶æˆç»©å•æ•°æ®ã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5595964f2dc14ecc98a6035346b3f0ae~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZUpvdXJuZXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767362992&amp;x-signature=4KbigPsbFdJaOgHuEUr3m5U5jKA%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
ä¸ºç¡®ä¿æ··å…ƒæ¨¡å‹èƒ½å¤Ÿé«˜æ•ˆå®Œæˆæ•°æ®å¤„ç†ï¼Œè®¾è®¡äº†å¦‚ä¸‹æç¤ºè¯ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">æ ¹æ®ocrinput
çš„æˆç»©å•è¯†åˆ«ç»“æœï¼Œè®¡ç®—å¹³å‡åˆ†ã€æœ€é«˜åˆ†å’Œæœ€ä½åˆ†ï¼›åˆ†æå„å­¦ç§‘åˆ†æ•°çš„å‡è¡¡åº¦å¹¶è¯†åˆ«æ˜¯å¦å­˜åœ¨åç§‘ç°è±¡ï¼›åŒæ—¶æ£€æµ‹æˆç»©éšæ—¶é—´çš„å˜åŒ–è¶‹åŠ¿åŠåˆ†æ•°æ³¢åŠ¨æƒ…å†µã€‚è¯·æ˜ç¡®è¯´æ˜æˆç»©æ•°æ®æ˜¯å¦åŒ…å«æ—¶é—´ä¿¡æ¯ï¼Œä»¥ä¾¿è¿›è¡Œè¶‹åŠ¿ä¸æ³¢åŠ¨åˆ†æã€‚è‹¥ocrinput
ä¸­åŒ…å«ç§‘ç›®åç§°ï¼Œè¯·ç¡®ä¿è¯†åˆ«å‡†ç¡®ä»¥æ”¯æŒå­¦ç§‘å‡è¡¡åº¦åˆ†æã€‚

</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/732812c32ac24f048cde14b6ae899c9b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZUpvdXJuZXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767362992&amp;x-signature=zKUGCc6UYgBP0C6sjefjV3D8St8%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>å®Œæˆ æ•°æ®å¤„ç†èŠ‚ç‚¹é…ç½®åï¼Œå¼€å§‹è¿›è¡Œè°ƒè¯•éªŒè¯ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/15d9103388a846269b1e10b1b2cae2a2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZUpvdXJuZXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767362992&amp;x-signature=YmAyRZaQFrxyF1ENuaG9Qzp4Pow%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>è¾“å…¥æµ‹è¯•æ•°æ®ï¼šå¼ æ™¨çš„é«˜ä¸‰è€ƒè¯•æˆç»©å•ã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c34c240f9e8e4381ab5cc99bc649264e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZUpvdXJuZXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767362992&amp;x-signature=DBMrSFusaoVNOZxafwiF27cDkfI%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>è¿è¡Œè°ƒè¯•ç»“æœå¦‚ä¸‹
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/efc75a1f377846d791d21b2df4569445~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZUpvdXJuZXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767362992&amp;x-signature=zpeV3VsNlIWGh5IuqvVI6xTVjpQ%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>å¯ä»¥çœ‹åˆ°æ•°æ®å¤„ç†èŠ‚ç‚¹
å¯¹</p>
<ul>
<li>å¹³å‡åˆ†ã€æœ€é«˜åˆ†ã€æœ€ä½åˆ†è®¡ç®—</li>
<li>å­¦ç§‘å‡è¡¡åº¦ä¸åç§‘è¯†åˆ«</li>
<li>æˆç»©è¶‹åŠ¿ä¸æ³¢åŠ¨æ£€æµ‹
çš„åˆ†æååˆ†ä¸“ä¸š
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d4057f78c33744718b7d0d935e1dab92~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZUpvdXJuZXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767362992&amp;x-signature=7IsOHGnKz4pCx1SGsPYsCzDSoPM%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></li>
</ul>
<p>æ··å…ƒå¤§æ¨¡å‹åœ¨æœ¬æ¬¡æ•°æ®å¤„ç†ä»»åŠ¡ä¸­è¡¨ç°éå¸¸å‡ºè‰²ã€‚å®ƒä¸ä»…èƒ½å¤Ÿå‡†ç¡®è®¡ç®—å¹³å‡åˆ†ã€æœ€é«˜åˆ†å’Œæœ€ä½åˆ†ï¼Œè€Œä¸”èƒ½å¤Ÿæ·±å…¥åˆ†æå„ç§‘åˆ†æ•°çš„åˆ†å¸ƒç‰¹å¾ï¼Œé‡åŒ–å­¦ç§‘å‡è¡¡åº¦ï¼Œå¹¶ç»™å‡ºç§‘å­¦çš„åç§‘åˆ¤æ–­ã€‚
æ¨¡å‹å¯¹ç†ç§‘ä¸æ–‡ç§‘çš„åŒºåˆ†ã€æ ‡å‡†å·®ä¸æå·®çš„è®¡ç®—ä»¥åŠåç§‘ç»“è®ºçš„é€»è¾‘æ¨ç†éƒ½éå¸¸ä¸¥è°¨ï¼Œåˆ†ææ¡ç†æ¸…æ™°ï¼Œç»“æœä¸“ä¸šå¯ä¿¡ã€‚é€šè¿‡æ··å…ƒå¤§æ¨¡å‹çš„å¤„ç†ï¼ŒåŸæœ¬æ•£ä¹±çš„æˆç»©æ•°æ®è¢«ç³»ç»ŸåŒ–ã€ç»“æ„åŒ–åœ°å‘ˆç°å‡ºæ¥ï¼Œè®©äººä¸€ç›®äº†ç„¶ï¼Œæå¤§åœ°æå‡äº†æˆç»©åˆ†æçš„æ•ˆç‡å’Œç²¾å‡†åº¦ï¼Œå¯è°“æ˜¯ä¸€æ¬¡é«˜è´¨é‡çš„æ™ºèƒ½åŒ–æ•°æ®åˆ†æä½“éªŒã€‚</p>
<h3 data-id="heading-19">5.5 å‹åŠ›æ„ŸçŸ¥å‹å¿ƒç†é™ªä¼´èŠ‚ç‚¹ï¼ˆæ··å…ƒå¤§æ¨¡å‹ï¼‰</h3>
<p>åœ¨æ•°æ®å¤„ç†èŠ‚ç‚¹ï¼ˆæ··å…ƒå¤§æ¨¡å‹ï¼‰åæ·»åŠ å‹åŠ›æ„ŸçŸ¥å‹å¿ƒç†é™ªä¼´èŠ‚ç‚¹
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1826a6d74d484e1db46b310988a81046~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZUpvdXJuZXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767362992&amp;x-signature=pWRUwNgd1AWQt8YwFkU6QQ0gWbo%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
æ¨¡å‹é€‰æ‹©æ··å…ƒå¤§æ¨¡å‹T1ç‰ˆ</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f4e171c44019499883b3603ea9f8dff1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZUpvdXJuZXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767362992&amp;x-signature=ZDFXEfLV5Z9CWhIPAg8Pv2v19qc%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
è¾“å…¥å˜é‡ä¸ºæ•°æ®å¤„ç†èŠ‚ç‚¹ï¼ˆæ··å…ƒå¤§æ¨¡å‹ï¼‰çš„å¤„ç†å†…å®¹
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6bec7ee3d7f9464bbb2c0d602417c677~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZUpvdXJuZXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767362992&amp;x-signature=2hJIqqTYwGO6t4fvSy7DnvA%2BjK8%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>æç¤ºè¯å¦‚ä¸‹</p>
<pre><code class="hljs language-bash" lang="bash">ç°åœ¨æ˜¯å­¦ç”Ÿå‘ä½ å‘é€äº†ä»–çš„æˆç»©å•è§£æç»“æœï¼Œä½ éœ€è¦åŸºäºæ­¤åšå‹åŠ›æ„ŸçŸ¥å‹å¿ƒç†é™ªä¼´èŠ‚ç‚¹ï¼Œé‡ç‚¹å®‰æ…°å’Œé¼“åŠ±å­¦ç”Ÿã€‚æ ¹æ®æ•°æ®å¤„ç†èŠ‚ç‚¹_æ··å…ƒå¤§æ¨¡å‹å¯¹input
ä¸­çš„æˆç»©å•è¿›è¡Œçš„è§£æï¼Œä»¥åŠç»“åˆå­¦ç”Ÿè¾“å…¥çš„é—®é¢˜q
ï¼Œå®Œæˆä»¥ä¸‹ä»»åŠ¡ï¼š  
* ç”¨æ¸…æ™°ã€å‡†ç¡®ä¸”é€šä¿—æ˜“æ‡‚çš„è‡ªç„¶è¯­è¨€æ€»ç»“æˆç»©ç»Ÿè®¡ç»“æœï¼›  
* å°†æ•°æ®åˆ†æç»“è®ºè½¬åŒ–ä¸ºå­¦ç”Ÿéƒ½å®¹æ˜“ç†è§£çš„è¡¨è¾¾ï¼›  
* é’ˆå¯¹å­¦ç”Ÿå„ç§‘æˆç»©ï¼Œåˆ†æå¯èƒ½é¢ä¸´çš„å­¦ä¸šå‹åŠ›åŠå…·ä½“æˆå› ï¼›  
* ç»“åˆæˆç»©ä¸å‹åŠ›æƒ…å†µï¼Œç»™å‡ºåˆ‡å®å¯è¡Œçš„æˆç»©æå‡å»ºè®®å’Œå¯æ“ä½œçš„å­¦ä¹ è®¡åˆ’ï¼›  
* é‡ç‚¹å…³æ³¨å­¦ç”Ÿå¿ƒç†çŠ¶æ€ï¼Œæä¾›æ¸©æš–çš„å¿ƒç†ç–å¯¼å»ºè®®ï¼Œå¸®åŠ©å…¶ç¼“è§£å‹åŠ›ã€ä¿æŒç§¯æå¿ƒæ€ã€‚

</code></pre>
<p>å¼€å§‹è°ƒè¯•</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/971a123eb5284146a2a4c9288888844f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZUpvdXJuZXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767362992&amp;x-signature=ZN%2FnSYHSH43ZD2p0sUSCpx26Lic%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
å¯ä»¥çœ‹åˆ°å‹åŠ›æ„ŸçŸ¥å‹å¿ƒç†é™ªä¼´èŠ‚ç‚¹ä¸»è¦å¤„ç†äº†</p>
<ul>
<li>å¯¹ç»Ÿè®¡ç»“æœè¿›è¡Œè‡ªç„¶è¯­è¨€æ€»ç»“</li>
<li>å°†æ•°æ®ç»“è®ºè½¬åŒ–ä¸ºâ€œå­¦ç”Ÿ/æ•™å¸ˆå¬å¾—æ‡‚çš„è¯â€</li>
<li>å¯¹å­¦ç”Ÿæˆç»©è¿›è¡Œå‹åŠ›åˆ†æ</li>
<li>æå‡ºæˆç»©æå‡è®¡åˆ’</li>
<li>å¯¹å­¦ç”Ÿè¿›è¡Œå¿ƒç†ç–å¯¼ï¼Œé¿å…å‹åŠ›è¿‡å¤§</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5e8735dbbdb640e39290db175c582ff2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZUpvdXJuZXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767362992&amp;x-signature=2NK0n5aCjH93T72Jtw3k6a1fPEg%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9bf72fb21a9c46dd88dfef6465fa5a2b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZUpvdXJuZXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767362992&amp;x-signature=cXpHpyYGwtfT0UBguKpSVMRQeM0%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cbe9aa6b37d94a7d9af12dbaab1b731f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZUpvdXJuZXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767362992&amp;x-signature=GXKhkBe%2F5DO50314f4nsrCtBAkY%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
æ··å…ƒå¤§æ¨¡å‹åœ¨æœ¬æ¬¡å¼ æ™¨åŒå­¦æˆç»©åˆ†æä¸æˆé•¿å»ºè®®ç”Ÿæˆä¸­è¡¨ç°ååˆ†å‡ºè‰²ã€‚å®ƒä¸ä»…èƒ½å¤Ÿå…¨é¢æ•´åˆå„ç§‘æˆç»©æ•°æ®ï¼Œç²¾å‡†è®¡ç®—æ€»åˆ†ã€å¹³å‡åˆ†ã€æœ€é«˜åˆ†ã€æœ€ä½åˆ†å’Œæ ‡å‡†å·®ï¼Œè¿˜èƒ½æ™ºèƒ½è¯†åˆ«å­¦ç§‘å‡è¡¡æ€§ä¸åç§‘æƒ…å†µï¼Œä¸ºç†ç§‘å’Œæ–‡ç§‘çš„ä¼˜åŠ¿ä¸è–„å¼±ç‚¹æä¾›æ¸…æ™°é‡åŒ–ä¾æ®ã€‚æ›´éš¾å¾—çš„æ˜¯ï¼Œæ¨¡å‹èƒ½å¤Ÿç»“åˆæˆç»©ç‰¹ç‚¹ç”Ÿæˆä¸“ä¸šã€å¯æ“ä½œçš„å­¦ä¹ ç­–ç•¥ä¸å¿ƒç†ç–å¯¼å»ºè®®ï¼Œæ¶µç›–æ—¶é—´åˆ†é…ã€å­¦ä¹ æ–¹æ³•ä¼˜åŒ–åŠä¿¡å¿ƒå»ºè®¾ç­‰å¤šä¸ªç»´åº¦ï¼Œæ—¢å…¼é¡¾å­¦ç”Ÿå®é™…å­¦ä¹ æƒ…å†µï¼Œä¹Ÿç¬¦åˆæ•™è‚²å¿ƒç†å­¦æŒ‡å¯¼åŸåˆ™ã€‚æ•´ä½“åˆ†ææ¡ç†æ¸…æ™°ã€é€»è¾‘ä¸¥è°¨ã€å†…å®¹ä¸“ä¸šå¯ä¿¡ï¼Œå ªç§°ä¸€æ¬¡é«˜è´¨é‡çš„æ™ºèƒ½åŒ–å­¦ä¸šåˆ†æå®è·µæˆæœã€‚</p>
<h2 data-id="heading-20">å…­. æ™ºèƒ½ä½“è°ƒè¯•ä¸å‘å¸ƒ</h2>
<p>å®Œæˆå·¥ä½œæµçš„ç¼–å†™ä¸å„èŠ‚ç‚¹è°ƒè¯•åï¼Œä¸‹ä¸€æ­¥æ˜¯åœ¨ å·¥ä½œæµç®¡ç†ä¸­å¯ç”¨æ–°åˆ›å»ºçš„å·¥ä½œæµï¼Œä½¿å…¶å¯ä»¥å¯¹å¤–æä¾›æœåŠ¡ã€‚</p>
<p>å¯ç”¨å·¥ä½œæµï¼Œåœ¨å·¥ä½œæµç®¡ç†ç•Œé¢æ‰¾åˆ°åˆšåˆšåˆ›å»ºçš„å·¥ä½œæµï¼Œç‚¹å‡» å¯ç”¨/æ¿€æ´» æŒ‰é’®ï¼Œä½¿å…¶è¿›å…¥å¯è°ƒç”¨çŠ¶æ€ã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/80d92939aa5f4772950951dd99b37338~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZUpvdXJuZXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767362992&amp;x-signature=I4%2FyxUS89xIMaFMqRndcLbjxjNE%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>åœ¨æ™ºèƒ½ä½“ç•Œé¢ä¸­å‘é€æµ‹è¯•æ•°æ®ï¼ˆå¦‚å­¦ç”Ÿæˆç»©å•ï¼‰ï¼Œè§‚å¯Ÿå·¥ä½œæµçš„å“åº”ç»“æœã€‚
æˆåŠŸå¯ç”¨åï¼Œæ™ºèƒ½ä½“ä¼šæŒ‰ç…§è®¾è®¡é€»è¾‘è‡ªåŠ¨å¤„ç†è¾“å…¥æ•°æ®ï¼Œå¹¶è¿”å›åˆ†ææŠ¥å‘Šã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c601e02b53144b39aa2d6a1c607a49c7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZUpvdXJuZXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767362992&amp;x-signature=8Zq4QaGggQLPdKT2diNaJt%2Foskc%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>æ£€æŸ¥æ™ºèƒ½ä½“è¿”å›çš„åˆ†æç»“æœæ˜¯å¦å®Œæ•´ã€å‡†ç¡®ï¼ŒåŒ…æ‹¬æˆç»©ç»Ÿè®¡ã€å­¦ç§‘å‡è¡¡åº¦ã€åç§‘åˆ†æä»¥åŠæˆé•¿å»ºè®®ç­‰å†…å®¹ã€‚
æˆåŠŸè¿”å›ç»“æœåï¼Œå³è¡¨æ˜æ•´ä¸ªå·¥ä½œæµå·²æ­£å¸¸è¿è¡Œï¼Œå¯æ­£å¼æŠ•å…¥ä½¿ç”¨ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e3f2fadaa9fa44a5bcb95cbc5c81e22d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZUpvdXJuZXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767362992&amp;x-signature=6p%2BN%2BR7eAFUddgaKmOngZULQemQ%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2a87f548c0c34c1b8336213bb87a03e5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZUpvdXJuZXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767362992&amp;x-signature=%2FSsj%2BTFQkV3KPk1akXO42nupi%2Fo%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
è°ƒè¯•ç¡®è®¤å·¥ä½œæµè¿è¡Œæ­£å¸¸åï¼Œåœ¨æ™ºèƒ½ä½“é¡µé¢æ‰¾åˆ°å¯¹åº”æ™ºèƒ½ä½“ï¼Œç‚¹å‡» â€œå‘å¸ƒâ€ æŒ‰é’®ã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/80fee541eabb4cc98d33575da45b57c0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZUpvdXJuZXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767362992&amp;x-signature=4xuqGn42mLrxNooY%2FUXJOYLJyqM%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>ç¡®è®¤æ— è¯¯åç‚¹å‡» ç¡®è®¤å‘å¸ƒã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/94a9e866f349449a9981afd4c2f642d3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZUpvdXJuZXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767362992&amp;x-signature=xezFrVCSMo9aL8OYLLIYVFpZfiM%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
ç³»ç»Ÿæç¤º åº”ç”¨å‘å¸ƒæˆåŠŸï¼Œè¡¨ç¤ºæ™ºèƒ½ä½“å·²æ­£å¼ä¸Šçº¿å¹¶å¯å¯¹å¤–è°ƒç”¨ã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/737c3a7969a347fd86ab546b124af839~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZUpvdXJuZXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767362992&amp;x-signature=ciUnkO%2FXWIxOWCbm7e96zSGZSIA%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
å¯é€šè¿‡åˆ†äº«é“¾æ¥æˆ–äºŒç»´ç è®¿é—®æ™ºèƒ½ä½“ï¼Œæ–¹ä¾¿å­¦ç”Ÿã€æ•™å¸ˆæˆ–å…¶ä»–ç”¨æˆ·ä½¿ç”¨ã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fc1f2f8e6839477bad609ddc0adee451~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZUpvdXJuZXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767362992&amp;x-signature=GXlDFEVmJK%2Fz9rc5zcPeNP%2Fgb%2Fk%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
å‘å¸ƒæˆåŠŸåï¼Œæ™ºèƒ½ä½“ä¼šåœ¨ â€œæˆ‘çš„æ™ºèƒ½ä½“â€ é¡µé¢ä¸­æ˜¾ç¤ºï¼Œå¯éšæ—¶ç®¡ç†ã€æ›´æ–°æˆ–æŸ¥çœ‹è¿è¡Œæƒ…å†µã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/163ee76ebb214d009125973cd2fbbe19~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZUpvdXJuZXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767362992&amp;x-signature=q2t8ZYj%2BEMdvs0iH9izqqBb30zc%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
è®¿é—®URLå³å¯æ„‰å¿«çš„ä½¿ç”¨æ™ºèƒ½ä½“äº†ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6a361fbd29f24dfd9e7052b893bcec26~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZUpvdXJuZXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767362992&amp;x-signature=pXkBQtOcFzI4ZS7n0CE%2BGXvrMT8%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h2 data-id="heading-21">ä¸ƒ.å¿ƒå¾—ä¸æ€»ç»“</h2>
<p>é€šè¿‡æœ¬æ¬¡â€œå­¦ä¸šæˆç»©åˆ†æå‹åŠ›æ„ŸçŸ¥å‹ AI å¿ƒç†é™ªä¼´æ™ºèƒ½ä½“â€çš„æ„å»ºï¼Œæˆ‘æ·±åˆ»ä½“ä¼šåˆ°æ•™è‚²æ•°æ®æ™ºèƒ½åŒ–ä¸å¿ƒç†å…³æ€€ç»“åˆçš„å·¨å¤§ä»·å€¼ã€‚é¡¹ç›®ä¸­ï¼Œè…¾è®¯å…ƒå™¨æä¾›äº†å®Œæ•´çš„æ™ºèƒ½ä½“èƒ½åŠ›ç¼–æ’ä¸ä¸Šä¸‹æ–‡ç®¡ç†ï¼ŒTextIn å¤§æ¨¡å‹åŠ é€Ÿå™¨å®ç°äº†éç»“æ„åŒ–æˆç»©å•çš„é«˜ç²¾åº¦è§£æï¼Œè€Œæ··å…ƒå¤§æ¨¡å‹åˆ™æ‰¿æ‹…æ•°æ®å¤„ç†ã€è¶‹åŠ¿åˆ†æä¸å‹åŠ›æ„ŸçŸ¥ï¼Œå®ç°äº†ä»æ•°æ®åˆ°è‡ªç„¶è¯­è¨€é™ªä¼´çš„é—­ç¯ã€‚ä¸‰è€…ååŒä¸ä»…è®©ç³»ç»Ÿèƒ½â€œä¼šç®—åˆ†â€ï¼Œæ›´èƒ½â€œæ‡‚å­¦ç”Ÿâ€ï¼ŒçœŸæ­£åšåˆ°å­¦ä¸šåˆ†æä¸æƒ…ç»ªç–å¯¼åŒé‡æœåŠ¡ï¼Œä¸ºæ™ºæ…§æ•™è‚²åœºæ™¯æä¾›äº†å¯è½åœ°çš„å®è·µç»éªŒã€‚</p>
<p>åœ¨å·¥ä½œæµè®¾è®¡å’ŒèŠ‚ç‚¹è°ƒè¯•ä¸­ï¼Œæˆ‘ä½“ä¼šåˆ°èŒè´£æ‹†åˆ†ä¸çµæ´»è°ƒç”¨çš„é‡è¦æ€§ã€‚å°†æµç¨‹æ‹†è§£ä¸º OCR/ç»“æ„åŒ–ã€æ•°æ®å¤„ç†ã€å‹åŠ›æ„ŸçŸ¥ä¸å¿ƒç†é™ªä¼´ç­‰æ˜ç¡®èŠ‚ç‚¹ï¼Œæ—¢åˆ©äºè°ƒè¯•ï¼Œä¹Ÿä¾¿äºåç»­è¿­ä»£ä¼˜åŒ–ï¼›é€šè¿‡ä»£ç èŠ‚ç‚¹çµæ´»è°ƒç”¨ TextIn APIï¼Œé¿å…äº†å·¥å…·èŠ‚ç‚¹åœ¨å¤§å®¹é‡æˆ–å¤æ‚å‚æ•°ä¼ é€’ä¸Šçš„é™åˆ¶ã€‚æ­¤å¤–ï¼Œå¤šè§’è‰²è¾“å‡ºé€»è¾‘çš„éš”ç¦»è®©å­¦ç”Ÿç«¯ä¸æ•™å¸ˆç«¯å‘ˆç°å·®å¼‚åŒ–ä¿¡æ¯ï¼Œæé«˜äº†ç³»ç»Ÿå¯ç”¨æ€§ä¸å®‰å…¨æ€§ã€‚æ•´ä½“å®è·µè®©æˆ‘è®¤è¯†åˆ°ï¼Œæ•™è‚² AI ä¸ä»…è¦ç²¾å‡†åˆ†ææ•°æ®ï¼Œæ›´è¦è€ƒè™‘å¿ƒç†å…³æ€€ä¸å¯è§£é‡Šæ€§ï¼Œè¿™ä¹Ÿæ˜¯æœªæ¥æ™ºèƒ½æ•™è‚²è½åœ°çš„å…³é”®æ–¹å‘ã€‚</p>
<p>è¿™æ¬¡ç”¨è…¾è®¯å…ƒå™¨æ„å»ºâ€œå­¦ä¸šæˆç»©åˆ†æå‹åŠ›æ„ŸçŸ¥å‹ AI å¿ƒç†é™ªä¼´â€æ™ºèƒ½ä½“ï¼Œæ•´ä½“ä½“éªŒéå¸¸é¡ºç•…ï¼Œä¹Ÿè¶…å‡ºäº†é¢„æœŸã€‚å‡ ä¸ªå°è±¡æ·±åˆ»çš„ç‚¹ï¼š</p>
<ul>
<li>ä¸Šæ‰‹å¿«ï¼šç•Œé¢åŒ–æ“ä½œä¸ºä¸»ï¼ŒèŠ‚ç‚¹æ‹–æ‹½å’Œå·¥ä½œæµé…ç½®ç›´è§‚ï¼Œå³ä¾¿éæŠ€æœ¯äººå‘˜ä¹Ÿèƒ½å¿«é€Ÿä¸Šæ‰‹ï¼›</li>
<li>è°ƒè¯•é«˜æ•ˆï¼šä»£ç èŠ‚ç‚¹ã€æç¤ºè¯ç¼–è¾‘å™¨å’Œå·¥ä½œæµè°ƒè¯•å™¨æ”¯æŒå®æ—¶é¢„è§ˆï¼Œå®šä½é—®é¢˜å¿«ï¼Œå‡å°‘äº†é‡å¤å‘å¸ƒçš„éº»çƒ¦ï¼›</li>
<li>å¤šèƒ½åŠ›é›†æˆï¼šOCRã€æ•°æ®åˆ†æã€å¿ƒç†é™ªä¼´ç­‰æ¨¡å—ååŒï¼Œæ•°æ®æµä¸é€»è¾‘æ¸…æ™°ï¼ŒèŠ‚ç‚¹ä¹‹é—´è°ƒç”¨é¡ºç•…ï¼›</li>
<li>å‘å¸ƒä¾¿åˆ©ï¼šæ”¯æŒå¤šç«¯è¾“å‡ºï¼Œå­¦ç”Ÿç«¯å’Œæ•™å¸ˆç«¯å¯å·®å¼‚åŒ–å‘ˆç°ï¼Œæ— éœ€è‡ªè¡Œå¤„ç†å¯¹æ¥é—®é¢˜ã€‚</li>
</ul>
<p>æ€»ä½“æ¥è¯´ï¼Œè…¾è®¯å…ƒå™¨ä¸ä»…é€‚åˆæ•™è‚²åœºæ™¯çš„æ™ºèƒ½ä½“å¼€å‘ï¼Œä¹Ÿä¸ºç±»ä¼¼ä¼ä¸šçº§åº”ç”¨æä¾›äº†å¯è½åœ°ã€æ˜“æ‰©å±•çš„å®è·µæ–¹æ¡ˆã€‚</p>
<p>è…¾è®¯å…ƒå™¨ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fyuanqi.tencent.com%2F" target="_blank" title="https://yuanqi.tencent.com/" ref="nofollow noopener noreferrer">yuanqi.tencent.com/</a></p>
<p>æˆ‘çš„æ™ºèƒ½ä½“é“¾æ¥ï¼š</p>
<blockquote>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fyuanqi.tencent.com%2Fwebim%2F%23%2Fchat%2FTFJDBz%3Fappid%3D2004433656162151424" target="_blank" title="https://yuanqi.tencent.com/webim/#/chat/TFJDBz?appid=2004433656162151424" ref="nofollow noopener noreferrer">yuanqi.tencent.com/webim/#/chaâ€¦</a></p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Excelç‘Ÿç‘Ÿå‘æŠ–ï¼ŸSkywork Sheets 2.0æŠŠè¡¨æ ¼ç›´æ¥å˜æˆäº†æ™ºèƒ½æŠ¥å‘Š]]></title>    <link>https://juejin.cn/post/7588086766235648038</link>    <guid>https://juejin.cn/post/7588086766235648038</guid>    <pubDate>2025-12-26T14:28:24.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588086766235648038" data-draft-id="7587997893987975195" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Excelç‘Ÿç‘Ÿå‘æŠ–ï¼ŸSkywork Sheets 2.0æŠŠè¡¨æ ¼ç›´æ¥å˜æˆäº†æ™ºèƒ½æŠ¥å‘Š"/> <meta itemprop="keywords" content="AIGC"/> <meta itemprop="datePublished" content="2025-12-26T14:28:24.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¢¨é£å¦‚é›ª"/> <meta itemprop="url" content="https://juejin.cn/user/4064249017803927"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Excelç‘Ÿç‘Ÿå‘æŠ–ï¼ŸSkywork Sheets 2.0æŠŠè¡¨æ ¼ç›´æ¥å˜æˆäº†æ™ºèƒ½æŠ¥å‘Š
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4064249017803927/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¢¨é£å¦‚é›ª
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-26T14:28:24.000Z" title="Fri Dec 26 2025 14:28:24 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>è€å®è¯´ï¼Œåœ¨åŠå…¬è½¯ä»¶è¿™ä¸ªåœˆå­é‡Œï¼Œæˆ‘ä»¬å·²ç»å¾ˆä¹…æ²¡æœ‰çœ‹åˆ°çœŸæ­£è®©äººçœ¼å‰ä¸€äº®çš„ä¸œè¥¿äº†ã€‚å¤§å¤šæ•°æ—¶å€™ï¼Œæ‰€è°“çš„â€œAIå‡çº§â€ä¸è¿‡æ˜¯åœ¨ä¾§è¾¹æ åŠ ä¸ªèŠå¤©æ¡†ï¼Œè¿™å°±å¥½æ¯”ç»™é©¬è½¦è£…äº†ä¸ªæ”¶éŸ³æœºï¼Œå¹¶æ²¡æœ‰æ”¹å˜è·‘å¾—æ…¢çš„äº‹å®ã€‚</p>
<p>ä½†æ˜†ä»‘ä¸‡ç»´åˆšåˆšç«¯ä¸Šæ¥çš„è¿™ä¸ªSkywork Sheets 2.0ï¼Œå‘³é“æœ‰ç‚¹ä¸ä¸€æ ·ã€‚</p>
<p>å¦‚æœä¸è·Ÿä½ ç»•å¼¯å­ï¼Œç›´æ¥è¯´ç»“è®ºï¼šè¿™ä¸œè¥¿è¯•å›¾å¹²æ‰çš„ä¸æ˜¯Excelï¼Œè€Œæ˜¯â€œä»åšè¡¨åˆ°å†™æ±‡æŠ¥â€ä¸­é—´é‚£ä¸ªæœ€æŠ˜ç£¨äººçš„è¿‡ç¨‹ã€‚å®ƒäº2025å¹´12æœˆ25æ—¥æ­£å¼ä¸Šçº¿ï¼Œæ ¸å¿ƒå°±å¹²äº†ä¸€ä»¶äº‹â€”â€”æ‰“ç ´äº†ç”µå­è¡¨æ ¼å’Œåˆ†ææŠ¥å‘Šä¹‹é—´çš„æ¬¡å…ƒå£ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.worldcodeing.com%2Fwp-content%2Fuploads%2F2025%2F12%2FiShot_2025-12-26_22.19.36-1024x504.png" target="_blank" title="https://blog.worldcodeing.com/wp-content/uploads/2025/12/iShot_2025-12-26_22.19.36-1024x504.png" ref="nofollow noopener noreferrer"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d8c598621c1e472b9420d49b1150fa2f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aKo6aOO5aaC6Zuq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767364104&amp;x-signature=XaeQgTi3aDsfA2HM0vPjRGuV%2BNI%3D" alt="iShot_2025-12-26_22.19.36" loading="lazy"/></a></p>
<p><strong>ä»â€œä»“åº“â€åˆ°â€œåŠ å·¥å‚â€çš„æ€ç»´è½¬å˜</strong></p>
<p>æˆ‘ä»¬ä»¥å‰ç”¨è¡¨æ ¼è½¯ä»¶ï¼Œæœ¬è´¨ä¸Šæ˜¯åœ¨ç”¨ä¸€ä¸ªâ€œæ•°æ®ä»“åº“â€ã€‚ä½ æŠŠæ•°æ®å¡«è¿›å»ï¼Œç”šè‡³è¿˜å¾—è‡ªå·±å†™å…¬å¼å»æ¸…æ´—ã€å»è®¡ç®—ï¼Œæœ€åç›¯ç€é‚£ä¸€å †æ•°å­—å‘å‘†ï¼šè¿™ç©æ„å„¿åˆ°åº•è¯´æ˜äº†ä»€ä¹ˆï¼Ÿç„¶åä½ è¿˜å¾—æ‰“å¼€Wordæˆ–PPTï¼ŒæŠŠåˆšæ‰çš„ç»“è®ºæ•²è¿›å»ã€‚</p>
<p>Skywork Sheets 2.0æŠŠè¿™ä¸ªé€»è¾‘å€’è¿‡æ¥äº†ã€‚å®˜æ–¹ç®¡è¿™å«â€œè¾“å…¥å³åˆ†æï¼Œæ•°æ®å³æˆæœâ€ã€‚</p>
<p>ç®€å•æ¥è¯´ï¼Œå®ƒçš„å·¥ä½œæµéå¸¸â€œå‚»ç“œâ€ï¼š</p>
<p>ä½ åªéœ€è¦æŠŠé‚£ä¸€å †ä¹±ä¸ƒå…«ç³Ÿçš„åŸå§‹æ•°æ®â€”â€”ä¸ç®¡æ˜¯æœ¬åœ°çš„CSVã€Excelæ–‡ä»¶ï¼Œè¿˜æ˜¯ç›´æ¥ä»ç½‘é¡µä¸Šå¤åˆ¶ç²˜è´´çš„ä¸€å¨æ–‡æœ¬â€”â€”æ‰”è¿›å®ƒçš„å¯¹è¯æ¡†ã€‚æ¥ä¸‹æ¥çš„äº‹æƒ…ï¼Œå°±æœ‰ç‚¹åƒæŠŠè¡£æœæ‰”è¿›å…¨è‡ªåŠ¨æ´—è¡£æœºäº†ã€‚</p>
<p>å®ƒåº•å±‚çš„â€œå¤©å·¥è¶…çº§æ™ºèƒ½ä½“â€ä¼šç«‹åˆ»æ¥ç®¡ï¼Œåˆ©ç”¨Deep Researchï¼ˆæ·±åº¦ç ”ç©¶ï¼‰æŠ€æœ¯ï¼Œè‡ªå·±å»ç†è§£è¿™å †æ•°æ®æ˜¯å¹²å˜›çš„ã€‚æ¸…æ´—è„æ•°æ®ã€å½’çº³æ±‡æ€»ã€è¯†åˆ«è¶‹åŠ¿ï¼Œè¿™äº›è„æ´»ç´¯æ´»å®ƒå…¨åŒ…äº†ã€‚</p>
<p><strong>ä¸åªæ˜¯ç”»å›¾ï¼Œæ˜¯ç›´æ¥ç»™ä½ äº¤ä½œä¸š</strong></p>
<p>å¸‚é¢ä¸Šèƒ½è‡ªåŠ¨ç”»å›¾çš„AIä¸å°‘ï¼Œä½†Skywork Sheets 2.0æœ€ç‹ çš„ä¸€ç‚¹åœ¨äºå®ƒçš„â€œåŒæ¨¡å¯¼å‡ºâ€ã€‚</p>
<p>å½“ä½ å–å£æ°´çš„åŠŸå¤«ï¼Œå®ƒä¸å…‰ç»™ä½ åå‡ºä¸€ä»½æ¸…æ´—å¹²å‡€ã€æ’ç‰ˆæ•´é½ã€ç”šè‡³å¯ä»¥åƒExcelä¸€æ ·éšæ„æ‰‹åŠ¨ä¿®æ”¹çš„è¡¨æ ¼ï¼ŒåŒæ—¶è¿˜ä¼šç»™ä½ ä¸€ä»½å›¾æ–‡å¹¶èŒ‚çš„åˆ†ææŠ¥å‘Šã€‚æ³¨æ„ï¼Œæ˜¯å®Œæ•´çš„æŠ¥å‘Šï¼Œæ”¯æŒPDFæˆ–Wordæ ¼å¼ï¼Œé‡Œé¢æœ‰ç»“è®ºã€æœ‰è¶‹åŠ¿åˆ†æã€æœ‰å»ºè®®ã€‚</p>
<p>è¿™å°±å¾ˆç¦»è°±ã€‚ä»¥å‰æˆ‘ä»¬è¦ä¹ˆå¾—åˆ°ä¸€ä¸ªå†·å†°å†°çš„è¡¨æ ¼ï¼Œè¦ä¹ˆå¾—åˆ°ä¸€æ®µè™šæ— ç¼¥ç¼ˆçš„AIåºŸè¯ã€‚ç°åœ¨å®ƒç›´æ¥æŠŠè¿™ä¸¤è€…æåœ¨ä¸€èµ·ï¼Œå½¢æˆäº†ä¸€ä¸ªé—­ç¯ã€‚</p>
<p><strong>æ‡‚è¡Œçš„äººæ‰æ‡‚çš„ç»†èŠ‚ä¼˜åŒ–</strong></p>
<p>ä½œä¸ºä¸€ä¸ªé•¿æœŸè¢«å„ç§â€œäººå·¥æ™ºéšœâ€æŠ˜ç£¨çš„ç”¨æˆ·ï¼Œæˆ‘æœ‰ä¸¤ä¸ªç—›ç‚¹åœ¨è¿™ä¸ªç‰ˆæœ¬é‡Œè¢«æ²»æ„ˆäº†ã€‚</p>
<p>ç¬¬ä¸€æ˜¯â€œæ”¹ä¸åŠ¨â€ã€‚ä»¥å‰å¾ˆå¤šAIç”Ÿæˆçš„è¡¨æ ¼æ˜¯ä¸€å¼ å›¾ç‰‡æˆ–è€…æ­»æ•°æ®ï¼Œæƒ³å¾®è°ƒä¸ªæ•°å€¼æ¯”ç™»å¤©è¿˜éš¾ã€‚Skywork Sheets 2.0ä¿ç•™äº†ä¼ ç»Ÿè¡¨æ ¼çš„å°Šä¸¥ï¼Œæ”¯æŒä½ åƒæ“ä½œExcelä¸€æ ·å»ä¿®æ”¹å•å…ƒæ ¼ã€æ’åºç­›é€‰ã€‚ä½ æ”¹äº†æ•°æ®ï¼ŒAIè¿˜èƒ½æ¥ç€ä½ çš„æ€è·¯ç»§ç»­ä¼˜åŒ–ï¼Œè¿™å°±å¾ˆå°Šé‡äººç±»çš„æ§åˆ¶æ¬²ã€‚</p>
<p>ç¬¬äºŒæ˜¯â€œæ…¢ä¸ç³™çš„æƒè¡¡â€ã€‚æœ‰æ—¶å€™æˆ‘èµ¶æ—¶é—´ï¼Œä¸éœ€è¦é‚£ä¹ˆæ·±åº¦çš„åˆ†æï¼›æœ‰æ—¶å€™æˆ‘åˆè¦å†™æ·±åº¦ç ”æŠ¥ã€‚å®ƒæäº†ä¸ªåˆ†æ¡£ï¼Œæä¾›â€œæé€Ÿæ¨¡å¼â€å’Œâ€œæ·±åº¦æ¨¡å¼â€ã€‚æé€Ÿæ¨¡å¼æŠŠç”Ÿæˆæ—¶é—´ç äº†ä¸€åŠï¼Œé€‚åˆå¿«é€Ÿçœ‹æ•°ï¼›æ·±åº¦æ¨¡å¼åˆ™ä¼šè¿›è¡Œå¤šè½®æ„å›¾æ¾„æ¸…å’Œæ·±åº¦æœç´¢ï¼Œé€‚åˆæ†‹å¤§æ‹›ã€‚</p>
<p><strong>å†™åœ¨æœ€å</strong></p>
<p>åœ¨å­¦æœ¯ç•Œå’ŒæŠ•èµ„åœˆï¼Œå·²ç»æœ‰äººå–Šå®ƒæ˜¯â€œä¸‡èƒ½AIå‘˜å·¥â€äº†ã€‚æˆ‘è§‰å¾—è¿™ä¸ªç§°å‘¼è¿˜ç®—ä¸­è‚¯ã€‚</p>
<p>Skywork Sheets 2.0å¹¶ä¸æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„è½¯ä»¶å­¤å²›ï¼Œå®ƒæ˜¯å¤©å·¥è¶…çº§æ™ºèƒ½ä½“ç”Ÿæ€é‡Œçš„ä¸€å—æ‹¼å›¾ã€‚å®ƒä¸å†è®©ä½ ç›¯ç€å±å¹•ä¸Šçš„ç½‘æ ¼çº¿å‘æ„ï¼Œè€Œæ˜¯è¯•å›¾è®©ä½ ç›´æ¥é¢å¯¹å†³ç­–ç»“æœã€‚</p>
<p>å¯¹äºæˆ‘ä»¬è¿™äº›æ‰“å·¥äººæ¥è¯´ï¼Œå¦‚æœå·¥å…·èƒ½æŠŠæ•°æ®æ•´ç†ã€åˆ†æã€ç”»å›¾ã€å†™æŠ¥å‘Šè¿™ä¸€æ¡é¾™æœåŠ¡å…¨å¹²äº†ï¼Œé‚£æˆ‘ä»¬è¦åšçš„ï¼Œå¯èƒ½çœŸçš„åªå‰©ä¸‹â€œåšå†³å®šâ€è¿™ä¸€ä»¶äº‹äº†ã€‚</p>
<p>è¿™æˆ–è®¸æ‰æ˜¯AIåŠå…¬è¯¥æœ‰çš„æ ·å­ã€‚</p>
<p><strong>å¦‚æœä½ ä¹Ÿå¯¹æœ€æ–°çš„AIä¿¡æ¯æ„Ÿå…´è¶£æˆ–è€…æœ‰ç–‘é—® éƒ½å¯ä»¥åŠ å…¥æˆ‘çš„å¤§å®¶åº­ ç¬¬ä¸€æ—¶é—´åˆ†äº«æœ€æ–°AIèµ„è®¯ã€å·¥å…·ã€æ•™ç¨‹ã€æ–‡æ¡£ æ¬¢è¿ä½ çš„åŠ å…¥ï¼ï¼ï¼ğŸ˜‰ğŸ˜‰ğŸ˜‰</strong></p>
<p>å…¬ä¼—å·ï¼šå¢¨é£å¦‚é›ªå°ç«™</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸€æ–‡çœ‹æ‡‚AIå¤§æ¨¡å‹çš„æ ¸å¿ƒæ¨¡å—ï¼šåŸºäºå¼ºåŒ–å­¦ä¹ çš„åå¥½å¯¹é½åŸç†åŠå…¶åº”ç”¨]]></title>    <link>https://juejin.cn/post/7588031908170792969</link>    <guid>https://juejin.cn/post/7588031908170792969</guid>    <pubDate>2025-12-26T14:33:18.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588031908170792969" data-draft-id="7588028859540439066" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸€æ–‡çœ‹æ‡‚AIå¤§æ¨¡å‹çš„æ ¸å¿ƒæ¨¡å—ï¼šåŸºäºå¼ºåŒ–å­¦ä¹ çš„åå¥½å¯¹é½åŸç†åŠå…¶åº”ç”¨"/> <meta itemprop="keywords" content="LLM"/> <meta itemprop="datePublished" content="2025-12-26T14:33:18.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ™ºæ³ŠAI"/> <meta itemprop="url" content="https://juejin.cn/user/3572727470361578"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸€æ–‡çœ‹æ‡‚AIå¤§æ¨¡å‹çš„æ ¸å¿ƒæ¨¡å—ï¼šåŸºäºå¼ºåŒ–å­¦ä¹ çš„åå¥½å¯¹é½åŸç†åŠå…¶åº”ç”¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3572727470361578/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ™ºæ³ŠAI
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-26T14:33:18.000Z" title="Fri Dec 26 2025 14:33:18 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æ— è®ºæ˜¯è¯­è¨€æ¨¡å‹è¿˜æ˜¯æ¨èå¤§æ¨¡å‹ï¼ŒåŸºäºå¼ºåŒ–å­¦ä¹ çš„åå¥½å¯¹é½å·²æˆä¸ºå…¶è®­ç»ƒæµç¨‹ä¸­ä¸å¯æˆ–ç¼ºçš„å…³é”®ç¯èŠ‚ã€‚</p>
<p>æœ¬æ–‡å°†ç³»ç»Ÿæ¢³ç†å¼ºåŒ–å­¦ä¹ åœ¨å¤§æ¨¡å‹ä¸­çš„å®è·µè·¯å¾„ï¼šé¦–å…ˆé˜æ˜å…¶æ ¸å¿ƒæœºåˆ¶ä¸ä¸»æµç®—æ³•ï¼Œç»§è€Œèšç„¦è¯­è¨€æ¨¡å‹ä¸æ¨èå¤§æ¨¡å‹çš„å…¸å‹åº”ç”¨åœºæ™¯ï¼Œæ·±å…¥è§£æå¼ºåŒ–å­¦ä¹ å¦‚ä½•è½åœ°äºå…·ä½“æ¨¡å‹çš„ä¼˜åŒ–è¿‡ç¨‹ã€‚</p>
<p><strong>ä¸€ã€å¼ºåŒ–å­¦ä¹ æ ¸å¿ƒæ€è·¯</strong></p>
<p>å¼ºåŒ–å­¦ä¹ çš„æ ¸å¿ƒä»»åŠ¡åœ¨äºï¼šä¸ºæ™ºèƒ½ä½“è®­ç»ƒä¸€ä¸ªç¥ç»ç½‘ç»œï¼Œè¯¥ç½‘ç»œæ¥æ”¶å½“å‰çŠ¶æ€ä½œä¸ºè¾“å…¥ï¼Œè¾“å‡ºå¯¹ä¸‹ä¸€æ­¥åŠ¨ä½œçš„é¢„æµ‹ï¼Œä»¥æœ€å¤§åŒ–æ•´ä½“æœŸæœ›å›æŠ¥ã€‚</p>
<p>ä»¥AlphaGoä¸ºä¾‹ï¼Œå…¶å°†æ£‹ç›˜çš„è§†è§‰æˆ–ç½‘æ ¼åŒ–è¡¨å¾è¾“å…¥ç¥ç»ç½‘ç»œï¼Œè¾“å‡ºä¸‹ä¸€æ­¥è½å­ä½ç½®çš„å†³ç­–ï¼Œä»è€Œæå‡èƒœç‡ï¼›å½“æ™ºèƒ½ä½“ä¸ºè¯­è¨€æ¨¡å‹æ—¶ï¼Œåˆ™å°†å½“å‰é—®é¢˜æˆ–å¯¹è¯ä¸Šä¸‹æ–‡ä½œä¸ºè¾“å…¥ï¼Œç”Ÿæˆèƒ½æœ€å¤§ç¨‹åº¦å¥‘åˆäººç±»åå¥½ä¸æ„å›¾çš„å“åº”ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3e5b4c3897ef452b817bc415489c3d99~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm65rOKQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767364398&amp;x-signature=4n3v9CJZoRYVQJZJbmaFKmOqm5I%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fyuan.zhipoai.cn%2F" target="_blank" title="https://yuan.zhipoai.cn/" ref="nofollow noopener noreferrer"><strong>æ›´å¤šAIå¤§æ¨¡å‹å­¦ä¹ è§†é¢‘åŠèµ„æºï¼Œéƒ½åœ¨æ™ºæ³ŠAIã€‚</strong></a></p>
<p>ä¸ºä»€ä¹ˆä¸Šè¿°ä¼˜åŒ–é—®é¢˜æ— æ³•ç”¨æ™®é€šçš„æœ‰ç›‘ç£å­¦ä¹ è¿›è¡Œä¼˜åŒ–ï¼Ÿä¸»è¦æºäºä¸¤ä¸ªæ ¹æœ¬æ€§é™åˆ¶ã€‚</p>
<p>å…¶ä¸€æ˜¯â€Œ<strong>æ ·æœ¬æ”¶é›†æœºåˆ¶</strong>â€Œçš„å·®å¼‚ï¼šåœ¨æ¸¸æˆç­‰åºåˆ—å†³ç­–åœºæ™¯ä¸­ï¼Œæ™ºèƒ½ä½“çš„æ¯ä¸€æ­¥åŠ¨ä½œéƒ½ä¼šæ”¹å˜ç¯å¢ƒçŠ¶æ€ï¼Œè¿›è€Œå½±å“åç»­è¡Œä¸ºä¸å¥–åŠ±ä¿¡å·çš„ç”Ÿæˆï¼›</p>
<p>å› æ­¤ï¼Œæ ·æœ¬çš„äº§ç”Ÿå¿…é¡»ä¾èµ–ä¸€ä¸ªåˆå§‹æ™ºèƒ½ä½“ä¸ç¯å¢ƒçš„æŒç»­äº¤äº’ï¼Œè€Œæ¨¡å‹çš„æ›´æ–°åˆåè¿‡æ¥å½±å“åç»­æ ·æœ¬çš„åˆ†å¸ƒâ€”â€”æ ·æœ¬ç”Ÿæˆä¸æ¨¡å‹è®­ç»ƒå½¢æˆé—­ç¯ï¼Œè¿™ä¸æœ‰ç›‘ç£å­¦ä¹ ä¸­é™æ€ã€ç‹¬ç«‹é‡‡æ ·çš„æ•°æ®é›†æœ‰æœ¬è´¨åŒºåˆ«ã€‚</p>
<p>å…¶äºŒæ˜¯â€Œ<strong>å¥–åŠ±å‡½æ•°çš„ä¼˜åŒ–ç‰¹æ€§</strong>â€Œï¼šå¥–åŠ±è®¾è®¡é€šå¸¸å…·æœ‰å¤šå±‚æ¬¡æ€§ï¼Œæ—¢åŒ…å«å•æ­¥å³æ—¶å¥–åŠ±ï¼Œä¹Ÿæ¶µç›–é•¿æœŸç´¯ç§¯å¥–åŠ±ï¼Œä¸”è¿™äº›å¥–åŠ±å¾€å¾€ç”±è§„åˆ™å¼•æ“æˆ–å¤æ‚æ¨¡å‹åŠ¨æ€è®¡ç®—å¾—å‡ºï¼Œä¸å…·å¤‡å¯å¾®æ€§ï¼›</p>
<p>å› æ­¤ï¼Œæ— æ³•åƒæœ‰ç›‘ç£å­¦ä¹ é‚£æ ·é€šè¿‡æ ‡ç­¾ä¸é¢„æµ‹å€¼çš„ç›´æ¥æ¢¯åº¦åä¼ è¿›è¡Œç«¯åˆ°ç«¯ä¼˜åŒ–ã€‚</p>
<p><strong>äºŒã€å¼ºåŒ–å­¦ä¹ åŸºç¡€ç®—æ³•</strong></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f7813ab7e5db40c58c464fac3eb00b3c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm65rOKQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767364398&amp;x-signature=NJY%2FvB4uzBySf8wtDHcfPSLHenQ%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5cfd307f6430428aaaedf7d935b2cdcd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm65rOKQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767364398&amp;x-signature=xw49Nzc6DR2oauVyda%2FAKowCmTU%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å…¶æ ¸å¿ƒæ€è·¯æ˜¯åˆ©ç”¨é‡è¦æ€§é‡‡æ ·ï¼Œæ ¹æ®æ–°è€å‚æ•°çš„åˆ†å¸ƒå·®å¼‚å¯¹è€å‚æ•°æ™ºèƒ½ä½“æ”¶é›†çš„æ ·æœ¬è¿›è¡ŒåŠ æƒä½¿å¾—è¯¥æ ·æœ¬åœ¨æ–°å‚æ•°ä¸Šä¹Ÿèƒ½è®­ç»ƒã€‚</p>
<p>åŒæ—¶è€ƒè™‘åˆ°ä¸¤ä¸ªåˆ†å¸ƒå·®å¼‚å¤ªå¤§ä¼šå¯¼è‡´é‡è¦æ€§é‡‡æ ·è¯¯å·®è¾ƒå¤§ï¼Œä½¿ç”¨KLæ•£åº¦çº¦æŸæ–°è€å‚æ•°äº§å‡ºçš„è¡Œä¸ºåˆ†å¸ƒä¸èƒ½ç›¸å·®å¤ªå¤šï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨clipçš„æ–¹æ³•å¯¹ä¸¤ä¸ªåˆ†å¸ƒçš„å·®å¼‚è¿›è¡Œclipã€‚</p>
<p><strong>ä¸‰ã€å¤§æ¨¡å‹ä¸­çš„å¼ºåŒ–å­¦ä¹ åº”ç”¨</strong></p>
<p>åœ¨é˜æ˜å¼ºåŒ–å­¦ä¹ çš„åŸºæœ¬åŸç†ä¹‹åï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°†èšç„¦äºå…¶åœ¨å¤§è¯­è¨€æ¨¡å‹ä¸­çš„å…·ä½“å®è·µã€‚</p>
<p>é¦–ä¸ªå°†å¼ºåŒ–å­¦ä¹ å¼•å…¥å¤§æ¨¡å‹è®­ç»ƒçš„å¼€åˆ›æ€§å·¥ä½œæ˜¯ Training language models to follow instructions with human feedbackï¼ˆ2022ï¼‰ï¼Œè¯¥ç ”ç©¶é‡‡ç”¨ PPO ç®—æ³•å®ç°æ¨¡å‹è¾“å‡ºä¸äººç±»æ„å›¾çš„å¯¹é½ï¼Œä»è€Œå‚¬ç”Ÿäº† InstructGPTã€‚</p>
<p>åœ¨æ­¤æ¡†æ¶ä¸­ï¼Œâ€Œæ™ºèƒ½ä½“â€Œå³ä¸ºå¤§è¯­è¨€æ¨¡å‹è‡ªèº«ï¼›â€Œç¯å¢ƒâ€Œç”±è¾“å…¥çš„ promptï¼ˆå¦‚é—®é¢˜æˆ–æŒ‡ä»¤ï¼‰æ„æˆï¼Œå…¶ç›®æ ‡æ˜¯å¼•å¯¼æ¨¡å‹ç”Ÿæˆå“åº”ï¼›</p>
<p>è€Œâ€ŒåŠ¨ä½œâ€Œåˆ™å¯¹åº”æ¨¡å‹åœ¨æ¯ä¸ªæ—¶é—´æ­¥æ‰€ç”Ÿæˆçš„æ–‡æœ¬ç‰‡æ®µï¼Œæ¯ä¸€ä¸ªæ–‡æœ¬tokençš„è¾“å‡ºå‡è§†ä¸ºåºåˆ—å†³ç­–è¿‡ç¨‹ä¸­çš„ä¸€ä¸ªç‹¬ç«‹è¡ŒåŠ¨ã€‚</p>
<p>Rewardâ€Œ çš„è¯„ä¼°ä¾èµ–äºä¸€ä¸ªç‹¬ç«‹è®­ç»ƒçš„å¥–åŠ±æ¨¡å‹ï¼šé’ˆå¯¹åŒä¸€ promptï¼Œç³»ç»Ÿä¼šé‡‡æ ·å¤šä¸ªæ¨¡å‹è¾“å‡ºï¼Œç”±äººå·¥æ ‡æ³¨è€…å¯¹è¿™äº›è¾“å‡ºè¿›è¡Œæ’åºä¸åå¥½æ ‡æ³¨ï¼Œè¿›è€Œåˆ©ç”¨è¿™äº›å¸¦é¡ºåºçš„åé¦ˆæ•°æ®è®­ç»ƒå‡ºä¸€ä¸ªèƒ½é‡åŒ–è¯„ä¼°â€œprompt+å›ç­”â€ç»„åˆè´¨é‡çš„å¥–åŠ±å‡½æ•°ã€‚</p>
<p>è¯¥å¥–åŠ±æ¨¡å‹è¾“å‡ºçš„åˆ†æ•°ï¼Œå³ä½œä¸ºå¼ºåŒ–å­¦ä¹ è¿‡ç¨‹ä¸­çš„ä¿¡å·åé¦ˆã€‚è¿™ä¸€æœºåˆ¶å®ç°äº†å°†äººç±»ä¸»è§‚çš„è¡¨è¾¾åå¥½ç›´æ¥åµŒå…¥æ¨¡å‹ä¼˜åŒ–ç›®æ ‡ï¼Œè€Œæ­¤ç±»éå¯å¾®çš„åå¥½ä¿¡å·ï¼Œå”¯æœ‰é€šè¿‡å¼ºåŒ–å­¦ä¹ æ¡†æ¶æ‰èƒ½æœ‰æ•ˆæ•´åˆã€‚â€Œ</p>
<p>Value functionâ€Œ åˆ™é‡‡ç”¨ä¸ä¸»æ¨¡å‹å®Œå…¨ä¸€è‡´çš„æ¶æ„ï¼Œå…¶ä½œç”¨æ˜¯é¢„æµ‹åœ¨ç”Ÿæˆæ¯ä¸ª token æ—¶ï¼Œåç»­åºåˆ—æœ€ç»ˆæ‰€èƒ½è·å¾—çš„ç´¯ç§¯å¥–åŠ±é¢„æœŸã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7339418fb26144d38140cb23391b871f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm65rOKQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767364398&amp;x-signature=kO6GMDBlOR1xRKCcM%2F0inzhG2UE%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æ•´ä½“çš„æŸå¤±å‡½æ•°è¡¨ç¤ºå¦‚ä¸‹ï¼Œå…¶ä¸­ç¬¬ä¸€é¡¹æ˜¯PPOæŸå¤±ï¼Œæ–‡ä¸­å°†PPOçš„KLæ•£åº¦çº¦æŸæ”¹æˆäº†per-tokençš„ï¼Œå³é¢„è®­ç»ƒæ¨¡å‹å’Œåå¥½å¯¹é½åçš„æ¨¡å‹æ¯ä¸ªtokençš„åˆ†å¸ƒä¸èƒ½å·®å¼‚å¤ªå¤§ã€‚åŒæ—¶ä¹Ÿå¼•å…¥äº†å‰åºéå¼ºåŒ–å­¦ä¹ çš„é¢„è®­ç»ƒlossè¿›è¡Œæ··åˆè®­ç»ƒã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3e188ac4ce8646e29afc87db5bf58c44~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm65rOKQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767364398&amp;x-signature=EVC7Ks8h%2Bn6yQKpDa2Exu295OPo%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>DeepSeekMath: Pushing the Limits of Mathematical Reasoning in Open Language Modelsï¼ˆ2024ï¼‰å¼•å…¥äº†ä¸€ç§æ›´é«˜æ•ˆçš„GRPOç®—æ³•ï¼Œç”¨ä»¥æ›¿ä»£ä¼ ç»Ÿçš„PPOæ–¹æ³•ã€‚</p>
<p>åœ¨PPOæ¡†æ¶ä¸­ï¼Œä¸ºè¯„ä¼°æ¯ä¸ªç”Ÿæˆtokençš„æœªæ¥æœŸæœ›å›æŠ¥ï¼Œéœ€ä¾èµ–ä¸€ä¸ªvalue functionä½œä¸ºåŸºå‡†ï¼ˆbaselineï¼‰ï¼Œè¯¥å‡½æ•°é€šå¸¸ä¸ç­–ç•¥ç½‘ç»œï¼ˆå³å¤§æ¨¡å‹æœ¬èº«ï¼‰å…±äº«ç»“æ„ï¼Œå‚æ•°è§„æ¨¡åºå¤§ï¼Œæ˜¾è‘—æ¨é«˜äº†è®¡ç®—å¼€é”€ã€‚</p>
<p>GRPOçš„åˆ›æ–°ä¹‹å¤„åœ¨äºå½»åº•æ‘’å¼ƒäº†è¿™ä¸€value functionï¼Œè½¬è€Œåˆ©ç”¨åŒä¸€é—®é¢˜ä¸‹å¤šæ¡é‡‡æ ·è¾“å‡ºçš„å¥–åŠ±ä¿¡å·ï¼Œé€šè¿‡è®¡ç®—å…¶å‡å€¼ä¸æ–¹å·®å¯¹å½“å‰æ ·æœ¬çš„å¥–åŠ±è¿›è¡Œå½’ä¸€åŒ–å¤„ç†ï¼Œä»è€Œå®ç°å¯¹baselineåŠŸèƒ½çš„ç­‰æ•ˆæ›¿ä»£ã€‚</p>
<p>äºŒè€…çš„æ ¸å¿ƒå·®å¼‚åœ¨äºï¼šPPOä¾èµ–æ¨¡å‹è‡ªèº«å¯¹å¥–åŠ±æœŸæœ›çš„é¢„æµ‹å€¼ä½œä¸ºåŸºå‡†ï¼Œè€ŒGRPOåˆ™å®Œå…¨åŸºäºé‡‡æ ·ç»“æœç»ç”±å¥–åŠ±æ¨¡å‹è¯„åˆ†åæ‰€å¾—çš„ç»Ÿè®¡é‡æ¥æ„å»ºåŸºå‡†ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f985f10a005042f1a7996d66bb313496~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm65rOKQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767364398&amp;x-signature=OlKx4DE2%2Fv0qcLo5%2FzuYQhFtMsE%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>DAPO: An Open-Source LLM Reinforcement Learning System at Scaleï¼ˆ2025ï¼‰é’ˆå¯¹PPOä¸GRPOåœ¨å¤§è§„æ¨¡è¯­è¨€æ¨¡å‹è®­ç»ƒä¸­çš„ç“¶é¢ˆï¼Œæå‡ºäº†å››é¡¹å…³é”®æ”¹è¿›ï¼š</p>
<p>PPOçš„Clipçº¦æŸä¼˜åŒ–â€Œï¼šä¼ ç»ŸPPOé€šè¿‡é‡è¦æ€§é‡‡æ ·å¼•å…¥çš„Clipæœºåˆ¶ï¼Œå…¶ä¸Šé™è®¾å®šä¸KLæ•£åº¦ç±»ä¼¼ï¼Œæ—¨åœ¨æ§åˆ¶ç­–ç•¥æ›´æ–°æ—¶è¡Œä¸ºåˆ†å¸ƒçš„åç§»ã€‚</p>
<p>ç„¶è€Œï¼Œè¯¥æœºåˆ¶è¿‡åº¦æŠ‘åˆ¶äº†ä½æ¦‚ç‡tokençš„æ¢ç´¢ï¼ŒåŒæ—¶éš¾ä»¥æœ‰æ•ˆçº¦æŸé«˜æ¦‚ç‡tokençš„è¿‡åº¦æ‰©å¼ ã€‚</p>
<p>ä¸ºæ­¤ï¼ŒDAPOæ”¾å®½äº†Clipçš„ä¸Šé™é˜ˆå€¼ï¼Œä»¥å¢å¼ºæ¢ç´¢è‡ªç”±åº¦å¹¶å¹³è¡¡ç­–ç•¥æ›´æ–°çš„ç¨³å®šæ€§ã€‚</p>
<p>GRPOé‡‡æ ·ç­–ç•¥è°ƒæ•´â€Œï¼šåœ¨è®­ç»ƒåæœŸï¼Œå¤§é‡é‡‡æ ·æ ·æœ¬çš„å¥–åŠ±å€¼è¶‹äºä¸€è‡´ä¸”ç²¾ç¡®ï¼Œå¯¼è‡´æ¢¯åº¦ä¿¡å·å†—ä½™ã€è®­ç»ƒæ•ˆç‡ä¸‹é™ã€‚</p>
<p>DAPOé€šè¿‡å¢åŠ é‡‡æ ·æ€»æ•°ï¼Œå¹¶ä¸»åŠ¨å‰”é™¤å¥–åŠ±å®Œå…¨ä¸€è‡´çš„é‡å¤æ ·æœ¬ï¼Œæ˜¾è‘—æå‡äº†æœ‰æ•ˆæ¢¯åº¦çš„å¤šæ ·æ€§ä¸æ›´æ–°æ•ˆç‡ã€‚</p>
<p>æŸå¤±è®¡ç®—ç²’åº¦é‡æ„â€Œï¼šåŸæ–¹æ³•åœ¨sampleç»´åº¦å¯¹tokenæŸå¤±å–å¹³å‡ï¼Œè‡´ä½¿é•¿åºåˆ—ä¸­å•ä¸ªtokençš„ä¼˜åŠ£è¡¨ç°è¢«æ•´ä½“å¹³æ»‘æ©ç›–ã€‚</p>
<p>DAPOæ”¹ç”¨tokençº§æŸå¤±è®¡ç®—ï¼Œä½¿æ¯ä¸ªç”Ÿæˆtokençš„é¢„æµ‹è¯¯å·®ç‹¬ç«‹è´¡çŒ®æ¢¯åº¦ï¼Œä»è€Œæ›´ç²¾å‡†åœ°å¼•å¯¼æ¨¡å‹ä¼˜åŒ–ã€‚</p>
<p>è¶…é•¿æ ·æœ¬åŠ æƒé™æƒâ€Œï¼šç”±äºtokençº§æŸå¤±å¯¹æˆªæ–­æ ·æœ¬æ›´æ•æ„Ÿï¼Œè¿‡é•¿åºåˆ—è¢«æˆªæ–­åå¼•å…¥çš„è®­ç»ƒä¸ç¨³å®šæ€§åŠ å‰§ã€‚</p>
<p>DAPOä¾æ®æ ·æœ¬è¶…å‡ºæœ€å¤§é•¿åº¦çš„æ¯”ä¾‹åŠ¨æ€è°ƒæ•´å…¶lossæƒé‡ï¼šè¶…å‡ºæ¯”ä¾‹è¶Šé«˜ï¼Œæƒé‡è¶Šä½ï¼Œä»è€Œåœ¨ä¿ç•™é•¿æ–‡æœ¬ä¿¡æ¯çš„åŒæ—¶ç¼“è§£è®­ç»ƒéœ‡è¡ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/40ab6dded1a245269cea09320924da42~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm65rOKQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767364398&amp;x-signature=WgKQ56UbaJSkx2VxEF8bfP4gXYA%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>é™¤äº†ä¸Šè¿°æ ‡å‡†å¼ºåŒ–å­¦ä¹ æ–¹æ³•å¤–ï¼Œæœ‰çš„æ¨¡å‹ä¹Ÿåˆ©ç”¨å…¶ä»–æ–¹æ³•æ¨¡æ‹Ÿå¼ºåŒ–å­¦ä¹ çš„åå¥½å¯¹é½èƒ½åŠ›ã€‚</p>
<p>ä¾‹å¦‚Direct Preference Optimization: Your Language Model is Secretly a Reward Modelï¼ˆ2024ï¼‰è®ºæ–‡ä¸­æå‡ºçš„DPOæ–¹æ³•ã€‚</p>
<p>åŸºäºäººå·¥æ ‡æ³¨çš„æœ€å¥½çš„æ ·æœ¬å’Œæœ€å·®çš„æ ·æœ¬æ„å»ºpair-wiseæ ·æœ¬ï¼Œè®©æ¨¡å‹é¢„æµ‹å¥½æ ·æœ¬æ¦‚ç‡å¤§äºå·®æ ·æœ¬ï¼Œç»•è¿‡äº†å¼ºåŒ–å­¦ä¹ ï¼ŒQwenæ¨¡å‹ä¸­ä¹Ÿä½¿ç”¨è¯¥æ–¹æ³•è¿›è¡Œåå¥½å¯¹é½ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fe631ab015c54a1baae4318fc4da2e5e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm65rOKQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767364398&amp;x-signature=yIINHVEDHXeROBFYh6kj19S%2BKDg%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><strong>å››ã€æ¨èå¤§æ¨¡å‹ä¸­çš„å¼ºåŒ–å­¦ä¹ åº”ç”¨</strong></p>
<p>åœ¨æ¨èå¤§æ¨¡å‹çš„æ¡†æ¶ä¸­ï¼Œå¼ºåŒ–å­¦ä¹ æ–¹æ³•çš„è¿ç”¨åŸºæœ¬ç»§æ‰¿è‡ªè¯­è¨€å¤§æ¨¡å‹çš„ä¸»æµèŒƒå¼ï¼Œå…¶å…³é”®åŒºåˆ«ä½“ç°åœ¨ reward çš„å®šä¹‰æ–¹å¼ä¸Šï¼šåœ¨æ¨èç³»ç»Ÿä¸­ï¼Œé€šå¸¸ä¾æ®ç”¨æˆ·æ—¥å¿—è¡Œä¸ºï¼ˆå¦‚æ’­æ”¾æ—¶é•¿ã€ç‚¹å‡»ç‡ç­‰ï¼‰æ¥è¡¡é‡ç”¨æˆ·å¯¹æ¨èå†…å®¹çš„åå¥½ç¨‹åº¦ã€‚</p>
<p>åœ¨ Onerec çš„ç¬¬ä¸€ç‰ˆå®ç°ä¸­ï¼Œreward model çš„è®­ç»ƒæ–¹å¼å€Ÿé‰´äº†ç²¾æ’æ¨¡å‹çš„ç»“æ„ï¼Œå°†å¤šä¸ªæ ¸å¿ƒç›®æ ‡ï¼ˆå¦‚æœ‰æ•ˆæ’­æ”¾ã€ç‚¹å‡»ç‡ç­‰ï¼‰ç»Ÿä¸€å»ºæ¨¡ä¸º reward ä¿¡å·ã€‚</p>
<p>é’ˆå¯¹å•ä¸ªç”¨æˆ·çš„ä¸€æ¬¡ session è¯·æ±‚ï¼Œç³»ç»Ÿé€šè¿‡ beam search ç”Ÿæˆè‹¥å¹²å€™é€‰æ¨èåºåˆ—ï¼Œéšååˆ©ç”¨ç²¾æ’æ¨¡å‹ä¸ºæ¯ä¸ªåºåˆ—è®¡ç®—ç»¼åˆ reward åˆ†æ•°ï¼Œå¹¶ä»ä¸­é€‰å– reward å€¼æœ€é«˜ä¸æœ€ä½çš„ä¸¤ä¸ªæ ·æœ¬æ„æˆæ­£è´Ÿé…å¯¹ï¼Œæœ€ç»ˆåŸºäº DPO æŸå¤±å‡½æ•°å®Œæˆæ¨¡å‹ä¼˜åŒ–ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6e91319caf3a447db058d7120db480b1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm65rOKQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767364398&amp;x-signature=6jnpxAQwXUY4%2FXgUyKNlTyFuBPs%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>åœ¨ Onerec V2 ä¸­ï¼ŒåŒæ ·å¼•å…¥äº†å¼ºåŒ–å­¦ä¹ ä»¥å®ç°æ¨èå¤§æ¨¡å‹çš„åå¥½å¯¹é½ã€‚å…¶ reward è®¾è®¡æ›´ä¸ºç®€æ´ï¼Œå®Œå…¨ä¾èµ–äººå·¥è®¾å®š reward å€¼ï¼š</p>
<p>å°†ç”¨æˆ·è§‚çœ‹çš„è§†é¢‘æŒ‰å¸‚åœºç»´åº¦åˆ†ç»„ï¼Œè‹¥æŸè§†é¢‘çš„è§‚çœ‹æ—¶é•¿ä½äºè¯¥åˆ†ç»„å†…è¯¥ç”¨æˆ·å†å²è§‚çœ‹æ—¶é•¿çš„å‰ 25% åŒºé—´ï¼Œåˆ™ reward è®¾ä¸º 1ï¼›</p>
<p>è‹¥ç”¨æˆ·å¯¹è§†é¢‘æ‰§è¡Œäº†æ˜¾å¼è´Ÿåé¦ˆæ“ä½œï¼Œåˆ™ reward ç½®ä¸º 0ã€‚è¿™ä¸€æœºåˆ¶å°† PPO ç®—æ³•ä¸­ value function ä¸ baseline çš„æ¯”è¾ƒåŠŸèƒ½ï¼Œç›´æ¥åµŒå…¥è‡³äººå·¥ reward çš„æ„å»ºç¯èŠ‚ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7acb8d05d7714173833db2fbc98ed7da~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm65rOKQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767364398&amp;x-signature=N4leZM%2FMm4ycbre%2FOMw%2Fnm%2BNwm0%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/13b0030cd2794450a07617123f54f839~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm65rOKQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767364398&amp;x-signature=K6eA9N8evyR%2FOe1uVOWzOsCgrE0%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/718bf1a8cc0a4cc2a9e0d09e009c69fe~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm65rOKQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767364398&amp;x-signature=jLUMn%2FH0JK08Go8g59%2BoKY6SdwE%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>åœ¨RecGPTV2ä¸­ï¼Œä¹Ÿé‡‡ç”¨äº†å¼ºåŒ–å­¦ä¹ çš„æ–¹æ³•å¯¹RecGPTV1è¿›è¡Œåå¥½å¯¹é½ã€‚RecGPTV2é‡‡ç”¨GRPOè¿›è¡Œä¼˜åŒ–ï¼Œä¸»è¦å·®å¼‚æ˜¯åœ¨rewardçš„è®¾è®¡ä¸Šã€‚</p>
<p>åœ¨æ¯ä¸ªExpertçš„è®­ç»ƒä¸Šï¼Œrewardç»¼åˆè€ƒè™‘äº†item tagé¢„æµ‹çš„å‡†ç¡®ç‡ã€åŸºäºç”¨æˆ·åå¥½å¯¹è®­ç»ƒçš„å¥–åŠ±æ¨¡å‹çš„æ‰“åˆ†ã€ç”Ÿæˆç»“æœçš„å¤šæ ·æ€§ï¼ˆæ¯ä¸ªtagæ˜ å°„æˆè¡¨å¾è®¡ç®—ä¸¤ä¸¤cosineè·ç¦»çš„å‡å€¼ï¼‰ç­‰ã€‚</p>
<p>å¯ä»¥çœ‹åˆ°åœ¨æ¨èå¤§æ¨¡å‹é¢†åŸŸï¼Œrewardçš„è®¾è®¡ä¼šæ›´åŠ å¤æ‚ï¼Œéœ€è¦ç»¼åˆè€ƒè™‘ç”¨æˆ·åå¥½ã€å¤šæ ·æ€§ã€è´Ÿåé¦ˆç­‰å„ç§ä¿¡æ¯ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7d72da7c9afc4dac9b0146e6820b880a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm65rOKQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767364398&amp;x-signature=UgPgtNQ5JZDKasUXynW3xFPxo74%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fyuan.zhipoai.cn%2F" target="_blank" title="https://yuan.zhipoai.cn/" ref="nofollow noopener noreferrer"><strong>æ›´å¤šAIå¤§æ¨¡å‹å­¦ä¹ è§†é¢‘åŠèµ„æºï¼Œéƒ½åœ¨æ™ºæ³ŠAIã€‚</strong></a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[0æˆæœ¬æ­å»ºï¼20åˆ†é’Ÿç”¨ Workers AI + Vectorize æå®š RAGï¼ˆé™„å…¨å¥—æºç ï¼‰]]></title>    <link>https://juejin.cn/post/7588031908170809353</link>    <guid>https://juejin.cn/post/7588031908170809353</guid>    <pubDate>2025-12-26T14:41:00.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588031908170809353" data-draft-id="7588086766235664422" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="0æˆæœ¬æ­å»ºï¼20åˆ†é’Ÿç”¨ Workers AI + Vectorize æå®š RAGï¼ˆé™„å…¨å¥—æºç ï¼‰"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-26T14:41:00.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æŠ€æœ¯æ›´å¥½è¯´"/> <meta itemprop="url" content="https://juejin.cn/user/2735240657517816"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            0æˆæœ¬æ­å»ºï¼20åˆ†é’Ÿç”¨ Workers AI + Vectorize æå®š RAGï¼ˆé™„å…¨å¥—æºç ï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2735240657517816/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æŠ€æœ¯æ›´å¥½è¯´
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-26T14:41:00.000Z" title="Fri Dec 26 2025 14:41:00 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»12åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dcca2fefd92b480683c9f3e1980e3726~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oqA5pyv5pu05aW96K-0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767364860&amp;x-signature=K288NHCQ4XYLlp2vowap6R9WTL0%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-0">å¼•è¨€</h2>
<p>æƒ³ç»™å…¬å¸åšä¸ªæ™ºèƒ½å®¢æœï¼ŒæŸ¥äº†ä¸€åœˆ RAG æ•™ç¨‹ï¼Œè¦ä¹ˆè®²ç†è®ºäº‘é‡Œé›¾é‡Œï¼Œè¦ä¹ˆè®©ä½ å…ˆç§Ÿä¸ª GPUã€æ­ç¯å¢ƒï¼Œçœ‹ç€å°±å¤´å¤§ã€‚è¯´å®è¯ï¼Œæˆ‘åˆšå¼€å§‹ç ”ç©¶è¿™å—çš„æ—¶å€™ä¹Ÿä¸€æ ·ï¼Œå…‰æ˜¯é…ç½® LangChain å’Œå‘é‡æ•°æ®åº“å°±æŠ˜è…¾äº†ä¸¤å¤©ï¼Œè¿˜æ²¡è·‘èµ·æ¥ã€‚
åæ¥å‘ç° Cloudflare æ¨å‡ºäº†ä¸€æ•´å¥— AI å·¥å…·ï¼ŒWorkers AI + Vectorize + D1ï¼Œå…¨æ‰˜ç®¡çš„,å…è´¹é¢åº¦è¿˜æŒºå¤§æ–¹ã€‚æˆ‘è¯•ç€ç”¨å®ƒä»¬æ­äº†ä¸ªç¬”è®°é—®ç­”åº”ç”¨ï¼Œä»é›¶åˆ°èƒ½ç”¨çœŸçš„ä¸åˆ° 20 åˆ†é’Ÿï¼Œä»£ç ä¹Ÿå°±ç™¾æ¥è¡Œã€‚
è¿™ç¯‡æ–‡ç« ä¼šæ‰‹æŠŠæ‰‹å¸¦ä½ èµ°ä¸€éå®Œæ•´æµç¨‹ï¼š</p>
<ul>
<li><strong>å…ˆè®²æ¸…æ¥š</strong> RAG åˆ°åº•æ˜¯ä»€ä¹ˆï¼ˆä¸æ‰”æœ¯è¯­ï¼Œç”¨å¤§ç™½è¯ï¼‰</li>
<li><strong>å®æˆ˜æ­å»º</strong>ä¸€ä¸ªèƒ½è·‘çš„çŸ¥è¯†åº“é—®ç­”åº”ç”¨ï¼ˆæœ‰å®Œæ•´ä»£ç ï¼‰</li>
<li><strong>ä¼˜åŒ–æŠ€å·§</strong>è®©æ£€ç´¢æ›´å‡†ç¡®ã€æˆæœ¬æ›´ä½</li>
<li><strong>éƒ¨ç½²ä¸Šçº¿</strong>çœŸæ­£ç”¨èµ·æ¥
ä½ åªéœ€è¦æ‡‚ç‚¹ JavaScriptï¼Œæœ‰ä¸ª Cloudflare è´¦å·ï¼ˆå…è´¹ï¼‰ï¼Œè·Ÿç€æ“ä½œå°±èƒ½åšå‡ºæ¥ã€‚</li>
</ul>
<h2 data-id="heading-1">RAG æ˜¯ä¸ªå•¥ï¼Ÿ5 åˆ†é’Ÿçœ‹æ‡‚å·¥ä½œåŸç†</h2>
<h3 data-id="heading-2">ç”¨è€ƒè¯•æ¥ç†è§£ RAG</h3>
<p>å…ˆè¯´ä¸ªç›´è§‚çš„æ¯”å–»ã€‚ä½ è€ƒè¯•çš„æ—¶å€™ï¼Œé—­å·è€ƒè¯•åªèƒ½é è„‘å­é‡Œè®°çš„ä¸œè¥¿ç­”é¢˜ï¼Œä¸‡ä¸€å¿˜äº†å°±çç¼–ã€‚å¼€å·è€ƒè¯•å°±ä¸ä¸€æ ·äº†ï¼Œä¸ç¡®å®šçš„æ—¶å€™ç¿»ä¹¦æŸ¥èµ„æ–™ï¼Œç­”æ¡ˆå‡†ç¡®å¤šäº†ã€‚
RAGï¼ˆæ£€ç´¢å¢å¼ºç”Ÿæˆï¼‰å°±æ˜¯ç»™ AI å¼€å·è€ƒè¯•çš„æƒé™ã€‚
ä¼ ç»Ÿ LLM å°±åƒé—­å·è€ƒè¯•ï¼Œåªèƒ½åŸºäºè®­ç»ƒæ—¶è§è¿‡çš„æ•°æ®å›ç­”ã€‚é—®é¢˜æ˜¯ï¼š</p>
<ul>
<li>è®­ç»ƒæ•°æ®æœ‰æ—¶æ•ˆæ€§ï¼Œä¸çŸ¥é“æœ€æ–°åŠ¨æ€</li>
<li>æ²¡è§è¿‡ä½ å…¬å¸çš„å†…éƒ¨æ–‡æ¡£</li>
<li>è®°ä¸ä½æ‰€æœ‰ç»†èŠ‚ï¼Œå®¹æ˜“çç¼–ï¼ˆè¡Œè¯å«"å¹»è§‰"ï¼‰
RAG çš„åšæ³•æ˜¯ï¼šå…ˆä»ä½ å‡†å¤‡å¥½çš„çŸ¥è¯†åº“é‡Œæ‰¾ç›¸å…³èµ„æ–™ï¼Œç„¶åæŠŠèµ„æ–™ç»™ AIï¼Œè®©å®ƒåŸºäºè¿™äº›å†…å®¹å›ç­”ã€‚è¿™æ ·ç­”æ¡ˆæ—¢é è°±åˆèƒ½ç»“åˆæœ€æ–°ä¿¡æ¯ã€‚</li>
</ul>
<h3 data-id="heading-3">RAG çš„ä¸‰ä¸ªæ ¸å¿ƒæ­¥éª¤</h3>
<p>&lt;StatsGrid stats={[
{ value: "ç¬¬1æ­¥", label: "æ–‡æ¡£è½¬å‘é‡å­˜å‚¨", description: "å°†çŸ¥è¯†è½¬æˆæ•°å­—è¡¨ç¤º" },
{ value: "ç¬¬2æ­¥", label: "æ£€ç´¢ç›¸ä¼¼å†…å®¹", description: "æ‰¾åˆ°è¯­ä¹‰æœ€ç›¸å…³çš„ç‰‡æ®µ" },
{ value: "ç¬¬3æ­¥", label: "LLMç”Ÿæˆç­”æ¡ˆ", description: "åŸºäºæ£€ç´¢ç»“æœå›ç­”" }
]} columns={3} /&gt;</p>
<p>æ•´ä¸ªæµç¨‹å…¶å®å°±ä¸‰æ­¥ï¼š</p>
<p><strong>ç¬¬ä¸€æ­¥ï¼šæŠŠçŸ¥è¯†å˜æˆå‘é‡å­˜èµ·æ¥</strong>
ä½ æœ‰ä¸€å †æ–‡æ¡£å¯¹å§ï¼ŸRAG ä¼šæŠŠæ¯æ®µæ–‡å­—è½¬æˆä¸€ä¸²æ•°å­—ï¼ˆä¸“ä¸šæœ¯è¯­å«"å‘é‡"æˆ–"Embedding"ï¼‰ï¼Œè¿™ä¸²æ•°å­—ä»£è¡¨äº†æ–‡å­—çš„è¯­ä¹‰ã€‚
æ‰“ä¸ªæ¯”æ–¹ï¼Œ"çŒ«å¾ˆå¯çˆ±"å’Œ"å°çŒ«èŒèŒçš„"è™½ç„¶ç”¨è¯ä¸åŒ,ä½†æ„æ€æ¥è¿‘,è½¬æˆå‘é‡åè¿™ä¸¤ä¸²æ•°å­—ä¹Ÿä¼šå¾ˆæ¥è¿‘ã€‚è¿™äº›å‘é‡ä¼šå­˜åˆ° Vectorize è¿™æ ·çš„å‘é‡æ•°æ®åº“é‡Œã€‚</p>
<p><strong>ç¬¬äºŒæ­¥ï¼šç”¨æˆ·æé—®æ—¶,æ‰¾å‡ºæœ€ç›¸å…³çš„çŸ¥è¯†ç‰‡æ®µ</strong>
ç”¨æˆ·é—®"æ€ä¹ˆè®­ç»ƒçŒ«å’ª"çš„æ—¶å€™ï¼Œç³»ç»Ÿä¼šå…ˆæŠŠè¿™ä¸ªé—®é¢˜ä¹Ÿè½¬æˆå‘é‡,ç„¶ååœ¨æ•°æ®åº“é‡Œæ‰¾"è·ç¦»æœ€è¿‘"çš„é‚£å‡ æ®µå†…å®¹â€”â€”ä¹Ÿå°±æ˜¯è¯­ä¹‰æœ€ç›¸å…³çš„çŸ¥è¯†ã€‚
è¿™ä¸ªè¿‡ç¨‹å«"ç›¸ä¼¼åº¦æœç´¢"ï¼Œé€Ÿåº¦å¾ˆå¿«ï¼Œå‡ æ¯«ç§’å°±èƒ½ä»å‡ ä¸‡æ¡æ•°æ®é‡Œæ‰¾å‡ºæœ€åŒ¹é…çš„ 3-5 æ¡ã€‚</p>
<p><strong>ç¬¬ä¸‰æ­¥ï¼šæŠŠæ£€ç´¢åˆ°çš„å†…å®¹å–‚ç»™ LLM ç”Ÿæˆç­”æ¡ˆ</strong>
æ‰¾åˆ°ç›¸å…³å†…å®¹åï¼Œç»„è£…æˆä¸€ä¸ª Prompt å‘ç»™ AIï¼š</p>
<pre><code class="hljs language-css" lang="css">ä»¥ä¸‹æ˜¯ç›¸å…³èµ„æ–™ï¼š
<span class="hljs-selector-attr">[æ£€ç´¢åˆ°çš„å†…å®¹1]</span>
<span class="hljs-selector-attr">[æ£€ç´¢åˆ°çš„å†…å®¹2]</span>
...
ç”¨æˆ·é—®é¢˜ï¼šæ€ä¹ˆè®­ç»ƒçŒ«å’ªï¼Ÿ
è¯·åŸºäºä¸Šè¿°èµ„æ–™å›ç­”ã€‚
</code></pre>
<p>AI çœ‹åˆ°è¿™äº›"å‚è€ƒèµ„æ–™"ï¼Œå°±èƒ½ç»™å‡ºå‡†ç¡®ä¸”æœ‰ä¾æ®çš„ç­”æ¡ˆäº†ã€‚</p>
<h3 data-id="heading-4">ä¸ºä»€ä¹ˆé€‰ Cloudflare å…¨å®¶æ¡¶ï¼Ÿ</h3>
<p>å¸‚é¢ä¸Šåš RAG çš„æ–¹æ¡ˆæŒºå¤šï¼ŒLangChainã€LlamaIndex å•¥çš„éƒ½è¡Œ,ä½†è¦è‡ªå·±é…ç¯å¢ƒã€æŒ‘å‘é‡æ•°æ®åº“ã€ç®¡ GPU èµ„æº,æŠ˜è…¾èµ·æ¥æŒºç´¯çš„ã€‚</p>
<p>Cloudflare è¿™å¥—æ–¹æ¡ˆçš„ä¼˜åŠ¿æ˜¯ï¼š</p>
<p><strong>Workers AI</strong> - å†…ç½®åå‡ ä¸ªå¼€æºæ¨¡å‹ï¼ˆLlama 3ã€Claude ç­‰ï¼‰ï¼Œè°ƒ API å°±èƒ½ç”¨ï¼Œä¸ç”¨ç§Ÿ GPUã€‚å…è´¹å±‚æ¯å¤©æœ‰å›ºå®šçš„ Neurons é¢åº¦ï¼ˆè®¡é‡å•ä½ï¼‰ï¼Œä¸ªäººé¡¹ç›®å¤Ÿç”¨äº†ã€‚</p>
<p><strong>Vectorize</strong> - æ‰˜ç®¡çš„å‘é‡æ•°æ®åº“ï¼Œä¸ç”¨è‡ªå·±æ­ Milvusã€Pinecone é‚£äº›ã€‚åˆ›å»ºç´¢å¼•ã€æ’å…¥å‘é‡ã€ç›¸ä¼¼åº¦æœç´¢ï¼Œå‡ è¡Œä»£ç æå®šã€‚</p>
<p><strong>D1</strong> - Cloudflare çš„ SQLite æ•°æ®åº“,å­˜åŸå§‹æ–‡æœ¬ç”¨ã€‚å‘é‡æ•°æ®åº“åªå­˜å‘é‡,å…·ä½“æ–‡å­—å†…å®¹è¿˜æ˜¯è¦ä»è¿™é‡Œå–ã€‚</p>
<p><strong>å…¨æ‰˜ç®¡</strong> - è¿™æ˜¯æœ€çˆ½çš„åœ°æ–¹ã€‚ä¸ç”¨æ“å¿ƒæœåŠ¡å™¨ã€æ‰©å®¹ã€å¤‡ä»½è¿™äº›ç ´äº‹,ä¸“å¿ƒå†™ä»£ç å°±è¡Œã€‚è€Œä¸” Cloudflare çš„è¾¹ç¼˜ç½‘ç»œ,å…¨çƒè®¿é—®éƒ½å¿«ã€‚</p>
<p/>
<p>2025 å¹´ Cloudflare è¿˜æ¨å‡ºäº† AutoRAGï¼Œè¿›ä¸€æ­¥ç®€åŒ–äº†æµç¨‹â€”â€”ä¸Šä¼ æ–‡æ¡£åˆ° R2ï¼Œåé¢çš„åˆ‡åˆ†ã€å‘é‡åŒ–ã€æ£€ç´¢ã€ç”Ÿæˆå…¨è‡ªåŠ¨ã€‚ä¸è¿‡è¿™ç¯‡æ–‡ç« å’±ä»¬è¿˜æ˜¯æ‰‹åŠ¨æ­ä¸€éï¼Œè¿™æ ·èƒ½å­¦åˆ°åº•å±‚åŸç†ã€‚
è¯´äº†è¿™ä¹ˆå¤šç†è®ºï¼Œæ¥ä¸‹æ¥åŠ¨æ‰‹åšä¸€ä¸ªã€‚</p>
<h2 data-id="heading-5">åŠ¨æ‰‹å®æˆ˜ - æ­å»ºä½ çš„ç¬¬ä¸€ä¸ª RAG åº”ç”¨</h2>
<p>å’±ä»¬åšä¸ªç¬”è®°é—®ç­”åº”ç”¨ï¼šç”¨æˆ·å¯ä»¥æ·»åŠ ç¬”è®°ï¼Œç„¶åæé—®ï¼Œç³»ç»Ÿä»æ‰€æœ‰ç¬”è®°é‡Œæ‰¾ç›¸å…³å†…å®¹å›ç­”ã€‚</p>
<h3 data-id="heading-6">é¡¹ç›®åˆå§‹åŒ–å’Œç¯å¢ƒå‡†å¤‡</h3>
<p>å…ˆè£… Wranglerï¼ˆCloudflare çš„ CLI å·¥å…·ï¼‰ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">npm install -g wrangler
wrangler login  <span class="hljs-comment"># ç™»å½•ä½ çš„ Cloudflare è´¦å·</span>
</code></pre>
<p>åˆ›å»ºé¡¹ç›®ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">npm create cloudflare@latest rag-notes-app
<span class="hljs-comment"># é€‰æ‹© "Hello World" worker</span>
<span class="hljs-comment"># é€‰æ‹© TypeScript</span>
<span class="hljs-built_in">cd</span> rag-notes-app
</code></pre>
<p>è£…ä¸ªè·¯ç”±åº“ Honoï¼ˆæ¯”åŸç”Ÿ Workers API å¥½ç”¨ï¼‰ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">npm install hono
</code></pre>
<p>åˆ›å»º D1 æ•°æ®åº“å’Œ Vectorize ç´¢å¼•ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åˆ›å»º D1 æ•°æ®åº“å­˜åŸå§‹ç¬”è®°</span>
wrangler d1 create notes-db
<span class="hljs-comment"># åˆ›å»º Vectorize ç´¢å¼•ï¼ˆ768 ç»´ï¼Œé…åˆ bge-base-en-v1.5 æ¨¡å‹ï¼‰</span>
wrangler vectorize create notes-index --dimensions=768 --metric=cosine
</code></pre>
<p>ç„¶åé…ç½® <code>wrangler.jsonc</code>ï¼ˆæˆ– <code>wrangler.toml</code>ï¼‰ï¼š</p>
<pre><code class="hljs language-jsonc" lang="jsonc">{
  "name": "rag-notes-app",
  "main": "src/index.ts",
  "compatibility_date": "2024-01-01",
  "node_compat": true,
  // AI ç»‘å®š
  "ai": {
    "binding": "AI"
  },
  // D1 æ•°æ®åº“ç»‘å®š
  "d1_databases": [
    {
      "binding": "DB",
      "database_name": "notes-db",
      "database_id": "ä½ çš„æ•°æ®åº“ID"  // ä»ä¸Šé¢åˆ›å»ºå‘½ä»¤çš„è¾“å‡ºå¤åˆ¶
    }
  ],
  // Vectorize ç´¢å¼•ç»‘å®š
  "vectorize": [
    {
      "binding": "VECTORIZE",
      "index_name": "notes-index"
    }
  ],
  // Workflow ç»‘å®šï¼ˆå¤„ç†å¼‚æ­¥å‘é‡åŒ–ä»»åŠ¡ï¼‰
  "workflows": [
    {
      "binding": "RAG_WORKFLOW",
      "name": "rag-workflow",
      "class_name": "RAGWorkflow"
    }
  ]
}
</code></pre>
<p>åˆå§‹åŒ–æ•°æ®åº“è¡¨ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- schema.sql</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> IF <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">EXISTS</span> notes (
  id <span class="hljs-type">INTEGER</span> <span class="hljs-keyword">PRIMARY</span> KEY AUTOINCREMENT,
  text TEXT <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
  created_at DATETIME <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span>
);
</code></pre>
<p>è¿è¡Œï¼š</p>
<pre><code class="hljs language-bash" lang="bash">wrangler d1 execute notes-db --file=./schema.sql
</code></pre>
<h3 data-id="heading-7">å®ç°çŸ¥è¯†åº“å½•å…¥åŠŸèƒ½</h3>
<p>è¿™æ˜¯æ•´ä¸ª RAG çš„æ ¸å¿ƒâ€”â€”æŠŠç”¨æˆ·çš„ç¬”è®°è½¬æˆå‘é‡å­˜èµ·æ¥ã€‚
åˆ›å»º <code>src/workflow.ts</code>ï¼ˆWorkflow å¤„ç†å¼‚æ­¥ä»»åŠ¡ï¼‰ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">WorkflowEntrypoint</span>, <span class="hljs-title class_">WorkflowStep</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'cloudflare:workers'</span>;
<span class="hljs-keyword">type</span> <span class="hljs-title class_">Env</span> = {
  <span class="hljs-attr">AI</span>: <span class="hljs-title class_">Ai</span>;
  <span class="hljs-attr">DB</span>: D1Database;
  <span class="hljs-attr">VECTORIZE</span>: <span class="hljs-title class_">VectorizeIndex</span>;
};
<span class="hljs-keyword">type</span> <span class="hljs-title class_">Params</span> = {
  <span class="hljs-attr">noteId</span>: <span class="hljs-built_in">number</span>;
  <span class="hljs-attr">text</span>: <span class="hljs-built_in">string</span>;
};
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RAGWorkflow</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">WorkflowEntrypoint</span>&lt;<span class="hljs-title class_">Env</span>, <span class="hljs-title class_">Params</span>&gt; {
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">run</span>(<span class="hljs-params">event: WorkflowEvent&lt;Params&gt;, step: WorkflowStep</span>) {
    <span class="hljs-keyword">const</span> { noteId, text } = event.<span class="hljs-property">payload</span>;
    <span class="hljs-comment">// æ­¥éª¤1ï¼šç¡®è®¤ D1 è®°å½•å·²åˆ›å»ºï¼ˆç”±ä¸»è·¯ç”±å®Œæˆï¼‰</span>
    <span class="hljs-comment">// æ­¥éª¤2ï¼šç”Ÿæˆå‘é‡</span>
    <span class="hljs-keyword">const</span> embeddings = <span class="hljs-keyword">await</span> step.<span class="hljs-title function_">do</span>(<span class="hljs-string">'generate embeddings'</span>, <span class="hljs-keyword">async</span> () =&gt; {
      <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">env</span>.<span class="hljs-property">AI</span>.<span class="hljs-title function_">run</span>(
        <span class="hljs-string">'@cf/baai/bge-base-en-v1.5'</span>,  <span class="hljs-comment">// 768ç»´çš„ Embedding æ¨¡å‹</span>
        { <span class="hljs-attr">text</span>: [text] }
      );
      <span class="hljs-keyword">return</span> response.<span class="hljs-property">data</span>[<span class="hljs-number">0</span>];  <span class="hljs-comment">// è¿”å›å‘é‡æ•°ç»„</span>
    });
    <span class="hljs-comment">// æ­¥éª¤3ï¼šæ’å…¥ Vectorize</span>
    <span class="hljs-keyword">await</span> step.<span class="hljs-title function_">do</span>(<span class="hljs-string">'insert vector'</span>, <span class="hljs-keyword">async</span> () =&gt; {
      <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">env</span>.<span class="hljs-property">VECTORIZE</span>.<span class="hljs-title function_">insert</span>([
        {
          <span class="hljs-attr">id</span>: noteId.<span class="hljs-title function_">toString</span>(),
          <span class="hljs-attr">values</span>: embeddings,
          <span class="hljs-attr">metadata</span>: { text }  <span class="hljs-comment">// å­˜ä¸€ä»½æ–‡æœ¬æ–¹ä¾¿è°ƒè¯•</span>
        }
      ]);
    });
  }
}
</code></pre>
<p>ä¸»è·¯ç”± <code>src/index.ts</code>ï¼ˆå¤„ç†æ·»åŠ ç¬”è®°ï¼‰ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Hono</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'hono'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">RAGWorkflow</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./workflow'</span>;
<span class="hljs-keyword">type</span> <span class="hljs-title class_">Bindings</span> = {
  <span class="hljs-attr">AI</span>: <span class="hljs-title class_">Ai</span>;
  <span class="hljs-attr">DB</span>: D1Database;
  <span class="hljs-attr">VECTORIZE</span>: <span class="hljs-title class_">VectorizeIndex</span>;
  <span class="hljs-attr">RAG_WORKFLOW</span>: <span class="hljs-title class_">Workflow</span>;
};
<span class="hljs-keyword">const</span> app = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Hono</span>&lt;{ <span class="hljs-title class_">Bindings</span>: <span class="hljs-title class_">Bindings</span> }&gt;();
<span class="hljs-comment">// æ·»åŠ ç¬”è®°</span>
app.<span class="hljs-title function_">post</span>(<span class="hljs-string">'/notes'</span>, <span class="hljs-keyword">async</span> (c) =&gt; {
  <span class="hljs-keyword">const</span> { text } = <span class="hljs-keyword">await</span> c.<span class="hljs-property">req</span>.<span class="hljs-property">json</span>&lt;{ <span class="hljs-attr">text</span>: <span class="hljs-built_in">string</span> }&gt;();
  <span class="hljs-keyword">if</span> (!text?.<span class="hljs-title function_">trim</span>()) {
    <span class="hljs-keyword">return</span> c.<span class="hljs-title function_">json</span>({ <span class="hljs-attr">error</span>: <span class="hljs-string">'Text is required'</span> }, <span class="hljs-number">400</span>);
  }
  <span class="hljs-comment">// æ’å…¥ D1</span>
  <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> c.<span class="hljs-property">env</span>.<span class="hljs-property">DB</span>.<span class="hljs-title function_">prepare</span>(
    <span class="hljs-string">'INSERT INTO notes (text) VALUES (?) RETURNING id'</span>
  ).<span class="hljs-title function_">bind</span>(text).<span class="hljs-property">first</span>&lt;{ <span class="hljs-attr">id</span>: <span class="hljs-built_in">number</span> }&gt;();
  <span class="hljs-keyword">if</span> (!result) {
    <span class="hljs-keyword">return</span> c.<span class="hljs-title function_">json</span>({ <span class="hljs-attr">error</span>: <span class="hljs-string">'Failed to create note'</span> }, <span class="hljs-number">500</span>);
  }
  <span class="hljs-comment">// è§¦å‘ Workflow å¼‚æ­¥ç”Ÿæˆå‘é‡</span>
  <span class="hljs-keyword">await</span> c.<span class="hljs-property">env</span>.<span class="hljs-property">RAG_WORKFLOW</span>.<span class="hljs-title function_">create</span>({
    <span class="hljs-attr">params</span>: { <span class="hljs-attr">noteId</span>: result.<span class="hljs-property">id</span>, text }
  });
  <span class="hljs-keyword">return</span> c.<span class="hljs-title function_">json</span>({
    <span class="hljs-attr">id</span>: result.<span class="hljs-property">id</span>,
    <span class="hljs-attr">message</span>: <span class="hljs-string">'Note created, vectorization in progress'</span>
  });
});
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> app;
<span class="hljs-keyword">export</span> { <span class="hljs-title class_">RAGWorkflow</span> };
</code></pre>
<p>è¿™æ ·ä¸€æ¥ï¼Œç”¨æˆ·å‘ POST è¯·æ±‚æ·»åŠ ç¬”è®°æ—¶ï¼š</p>
<ol>
<li>æ–‡æœ¬ç«‹å³å­˜åˆ° D1</li>
<li>åå° Workflow æ…¢æ…¢ç”Ÿæˆå‘é‡ã€æ’å…¥ Vectorize</li>
<li>å°±ç®—å‘é‡åŒ–è¦å‡ ç§’é’Ÿï¼Œä¹Ÿä¸ä¼šé˜»å¡ç”¨æˆ·è¯·æ±‚</li>
</ol>
<h3 data-id="heading-8">å®ç°æ™ºèƒ½é—®ç­”åŠŸèƒ½</h3>
<p>ç°åœ¨å¯ä»¥å­˜ç¬”è®°äº†ï¼Œæ¥ä¸‹æ¥åšæŸ¥è¯¢ã€‚
åœ¨ <code>src/index.ts</code> æ·»åŠ ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// æŸ¥è¯¢é—®ç­”</span>
app.<span class="hljs-title function_">get</span>(<span class="hljs-string">'/'</span>, <span class="hljs-keyword">async</span> (c) =&gt; {
  <span class="hljs-keyword">const</span> query = c.<span class="hljs-property">req</span>.<span class="hljs-title function_">query</span>(<span class="hljs-string">'q'</span>);
  <span class="hljs-keyword">if</span> (!query) {
    <span class="hljs-keyword">return</span> c.<span class="hljs-title function_">json</span>({ <span class="hljs-attr">error</span>: <span class="hljs-string">'Query parameter "q" is required'</span> }, <span class="hljs-number">400</span>);
  }
  <span class="hljs-comment">// ç¬¬ä¸€æ­¥ï¼šæŠŠé—®é¢˜è½¬æˆå‘é‡</span>
  <span class="hljs-keyword">const</span> queryEmbedding = <span class="hljs-keyword">await</span> c.<span class="hljs-property">env</span>.<span class="hljs-property">AI</span>.<span class="hljs-title function_">run</span>(
    <span class="hljs-string">'@cf/baai/bge-base-en-v1.5'</span>,
    { <span class="hljs-attr">text</span>: [query] }
  );
  <span class="hljs-comment">// ç¬¬äºŒæ­¥ï¼šåœ¨ Vectorize é‡Œæ‰¾æœ€ç›¸ä¼¼çš„ 3 æ¡ç¬”è®°</span>
  <span class="hljs-keyword">const</span> matches = <span class="hljs-keyword">await</span> c.<span class="hljs-property">env</span>.<span class="hljs-property">VECTORIZE</span>.<span class="hljs-title function_">query</span>(
    queryEmbedding.<span class="hljs-property">data</span>[<span class="hljs-number">0</span>],
    { <span class="hljs-attr">topK</span>: <span class="hljs-number">3</span>, <span class="hljs-attr">returnMetadata</span>: <span class="hljs-literal">true</span> }
  );
  <span class="hljs-keyword">if</span> (matches.<span class="hljs-property">count</span> === <span class="hljs-number">0</span>) {
    <span class="hljs-keyword">return</span> c.<span class="hljs-title function_">json</span>({ <span class="hljs-attr">answer</span>: <span class="hljs-string">'æ²¡æœ‰æ‰¾åˆ°ç›¸å…³ç¬”è®°'</span> });
  }
  <span class="hljs-comment">// ç¬¬ä¸‰æ­¥ï¼šä» D1 è·å–å®Œæ•´æ–‡æœ¬ï¼ˆå¦‚æœéœ€è¦ï¼‰</span>
  <span class="hljs-keyword">const</span> noteIds = matches.<span class="hljs-property">matches</span>.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">m</span> =&gt;</span> m.<span class="hljs-property">id</span>);
  <span class="hljs-keyword">const</span> notes = <span class="hljs-keyword">await</span> c.<span class="hljs-property">env</span>.<span class="hljs-property">DB</span>.<span class="hljs-title function_">prepare</span>(
    <span class="hljs-string">`SELECT text FROM notes WHERE id IN (<span class="hljs-subst">${noteIds.map(() =&gt; <span class="hljs-string">'?'</span>).join(<span class="hljs-string">','</span>)}</span>)`</span>
  ).<span class="hljs-title function_">bind</span>(...noteIds).<span class="hljs-title function_">all</span>();
  <span class="hljs-comment">// ç¬¬å››æ­¥ï¼šæ„é€  Promptï¼Œè°ƒç”¨ LLM ç”Ÿæˆç­”æ¡ˆ</span>
  <span class="hljs-keyword">const</span> context = notes.<span class="hljs-property">results</span>.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">n: <span class="hljs-built_in">any</span></span>) =&gt;</span> n.<span class="hljs-property">text</span>).<span class="hljs-title function_">join</span>(<span class="hljs-string">'\n\n---\n\n'</span>);
  <span class="hljs-keyword">const</span> prompt = <span class="hljs-string">`ä»¥ä¸‹æ˜¯ç›¸å…³çš„ç¬”è®°å†…å®¹ï¼š
<span class="hljs-subst">${context}</span>
ç”¨æˆ·é—®é¢˜ï¼š<span class="hljs-subst">${query}</span>
è¯·åŸºäºä¸Šè¿°ç¬”è®°å†…å®¹å›ç­”ç”¨æˆ·é—®é¢˜ã€‚å¦‚æœç¬”è®°ä¸­æ²¡æœ‰ç›¸å…³ä¿¡æ¯ï¼Œè¯·è¯´æ˜ã€‚`</span>;
  <span class="hljs-keyword">const</span> aiResponse = <span class="hljs-keyword">await</span> c.<span class="hljs-property">env</span>.<span class="hljs-property">AI</span>.<span class="hljs-title function_">run</span>(
    <span class="hljs-string">'@cf/meta/llama-3-8b-instruct'</span>,  <span class="hljs-comment">// æˆ–è€…ç”¨ claude-3-5-sonnet-latest</span>
    {
      <span class="hljs-attr">messages</span>: [
        { <span class="hljs-attr">role</span>: <span class="hljs-string">'system'</span>, <span class="hljs-attr">content</span>: <span class="hljs-string">'ä½ æ˜¯ä¸€ä¸ªæ™ºèƒ½ç¬”è®°åŠ©æ‰‹'</span> },
        { <span class="hljs-attr">role</span>: <span class="hljs-string">'user'</span>, <span class="hljs-attr">content</span>: prompt }
      ]
    }
  );
  <span class="hljs-keyword">return</span> c.<span class="hljs-title function_">json</span>({
    <span class="hljs-attr">answer</span>: aiResponse.<span class="hljs-property">response</span>,
    <span class="hljs-attr">sources</span>: matches.<span class="hljs-property">matches</span>.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">m</span> =&gt;</span> ({
      <span class="hljs-attr">id</span>: m.<span class="hljs-property">id</span>,
      <span class="hljs-attr">score</span>: m.<span class="hljs-property">score</span>,
      <span class="hljs-attr">text</span>: m.<span class="hljs-property">metadata</span>?.<span class="hljs-property">text</span>
    }))
  });
});
</code></pre>
<p>æµ‹è¯•ä¸€ä¸‹ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æœ¬åœ°è¿è¡Œ</span>
wrangler dev
<span class="hljs-comment"># æ·»åŠ ç¬”è®°</span>
curl -X POST http://localhost:8787/notes \
  -H <span class="hljs-string">"Content-Type: application/json"</span> \
  -d <span class="hljs-string">'{"text": "Cloudflare Workers AI æ”¯æŒ Llama 3 å’Œ Claude æ¨¡å‹"}'</span>
curl -X POST http://localhost:8787/notes \
  -H <span class="hljs-string">"Content-Type: application/json"</span> \
  -d <span class="hljs-string">'{"text": "Vectorize ä½¿ç”¨ä½™å¼¦ç›¸ä¼¼åº¦è¿›è¡Œå‘é‡æ£€ç´¢"}'</span>
<span class="hljs-comment"># ç­‰å‡ ç§’è®© Workflow å®Œæˆå‘é‡åŒ–</span>
<span class="hljs-comment"># æé—®</span>
curl <span class="hljs-string">"http://localhost:8787/?q=Workers%20AI%20æœ‰å“ªäº›æ¨¡å‹"</span>
</code></pre>
<p>å¦‚æœä¸€åˆ‡æ­£å¸¸ï¼Œä½ ä¼šæ”¶åˆ°åŸºäºç¬”è®°å†…å®¹çš„å›ç­”ã€‚</p>
<h3 data-id="heading-9">åˆ é™¤å’Œæ›´æ–°åŠŸèƒ½</h3>
<p>åˆ é™¤ç¬”è®°æ—¶ï¼Œè®°å¾—åŒæ—¶åˆ é™¤ D1 å’Œ Vectorize çš„æ•°æ®ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript">app.<span class="hljs-title function_">delete</span>(<span class="hljs-string">'/notes/:id'</span>, <span class="hljs-keyword">async</span> (c) =&gt; {
  <span class="hljs-keyword">const</span> id = c.<span class="hljs-property">req</span>.<span class="hljs-title function_">param</span>(<span class="hljs-string">'id'</span>);
  <span class="hljs-comment">// ä» D1 åˆ é™¤</span>
  <span class="hljs-keyword">await</span> c.<span class="hljs-property">env</span>.<span class="hljs-property">DB</span>.<span class="hljs-title function_">prepare</span>(<span class="hljs-string">'DELETE FROM notes WHERE id = ?'</span>).<span class="hljs-title function_">bind</span>(id).<span class="hljs-title function_">run</span>();
  <span class="hljs-comment">// ä» Vectorize åˆ é™¤</span>
  <span class="hljs-keyword">await</span> c.<span class="hljs-property">env</span>.<span class="hljs-property">VECTORIZE</span>.<span class="hljs-title function_">deleteByIds</span>([id]);
  <span class="hljs-keyword">return</span> c.<span class="hljs-title function_">json</span>({ <span class="hljs-attr">message</span>: <span class="hljs-string">'Note deleted'</span> });
});
</code></pre>
<p>æ›´æ–°çš„è¯ï¼Œæœ€ç®€å•çš„æ–¹å¼æ˜¯å…ˆåˆ ååŠ ï¼ˆé‡æ–°ç”Ÿæˆå‘é‡ï¼‰ã€‚
å®Œæ•´ä»£ç å¯ä»¥å‚è€ƒ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fcloudflare%2Fworkers-sdk%2Ftree%2Fmain%2Ftemplates%2Fworker-ai-rag" target="_blank" title="https://github.com/cloudflare/workers-sdk/tree/main/templates/worker-ai-rag" ref="nofollow noopener noreferrer">Cloudflare å®˜æ–¹ç¤ºä¾‹</a>ã€‚</p>
<h2 data-id="heading-10">è¿›é˜¶ä¼˜åŒ– - è®©ä½ çš„ RAG æ›´èªæ˜</h2>
<p>åŸºç¡€åŠŸèƒ½è·‘èµ·æ¥äº†ï¼Œä½†è¦çœŸæ­£ç”¨åœ¨å®é™…é¡¹ç›®é‡Œï¼Œè¿˜æœ‰äº›ç»†èŠ‚å€¼å¾—ä¼˜åŒ–ã€‚</p>
<h3 data-id="heading-11">æ–‡æœ¬åˆ†å—ç­–ç•¥</h3>
<p>ç°åœ¨å’±ä»¬æ˜¯æŠŠæ•´æ¡ç¬”è®°å½“ä¸€ä¸ªå•å…ƒå­˜çš„ã€‚å¦‚æœç¬”è®°å¾ˆé•¿ï¼ˆæ¯”å¦‚ä¸€ç¯‡æŠ€æœ¯æ–‡æ¡£ï¼‰ï¼Œè¿™æ ·åšä¼šæœ‰é—®é¢˜ï¼š</p>
<ol>
<li>æ£€ç´¢æ—¶æ•´ç¯‡æ–‡æ¡£çš„ç›¸ä¼¼åº¦å¯èƒ½ä¸é«˜ï¼ˆåªæœ‰éƒ¨åˆ†æ®µè½ç›¸å…³ï¼‰</li>
<li>Prompt å¤ªé•¿ä¼šè¶…å‡º LLM çš„ä¸Šä¸‹æ–‡çª—å£é™åˆ¶
æ›´å¥½çš„åšæ³•æ˜¯<strong>æŠŠé•¿æ–‡æœ¬åˆ‡æˆå°å—</strong>ï¼ˆchunkï¼‰ï¼Œæ¯å—å•ç‹¬ç”Ÿæˆå‘é‡ã€‚
ç®€å•çš„åˆ†å—æ–¹æ³•ï¼š</li>
</ol>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">splitText</span>(<span class="hljs-params">text: <span class="hljs-built_in">string</span>, chunkSize: <span class="hljs-built_in">number</span> = <span class="hljs-number">500</span>, overlap: <span class="hljs-built_in">number</span> = <span class="hljs-number">50</span></span>): <span class="hljs-built_in">string</span>[] {
  <span class="hljs-keyword">const</span> <span class="hljs-attr">chunks</span>: <span class="hljs-built_in">string</span>[] = [];
  <span class="hljs-keyword">let</span> start = <span class="hljs-number">0</span>;
  <span class="hljs-keyword">while</span> (start &lt; text.<span class="hljs-property">length</span>) {
    <span class="hljs-keyword">const</span> end = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(start + chunkSize, text.<span class="hljs-property">length</span>);
    chunks.<span class="hljs-title function_">push</span>(text.<span class="hljs-title function_">slice</span>(start, end));
    start = end - overlap;  <span class="hljs-comment">// é‡å ä¸€ç‚¹ï¼Œé¿å…å¥å­è¢«åˆ‡æ–­</span>
  }
  <span class="hljs-keyword">return</span> chunks;
}
</code></pre>
<p>æ›´æ™ºèƒ½çš„æ–¹å¼æ˜¯æŒ‰æ®µè½æˆ–è¯­ä¹‰åˆ†å‰²ï¼ˆå¯ä»¥ç”¨ LangChain çš„ <code>RecursiveCharacterTextSplitter</code>ï¼‰ï¼Œä¸è¿‡å¯¹å¤§éƒ¨åˆ†åœºæ™¯æ¥è¯´ï¼Œå›ºå®šé•¿åº¦+é‡å å·²ç»å¤Ÿç”¨äº†ã€‚
ä¿®æ”¹ Workflowï¼Œç»™æ¯ä¸ª chunk åˆ†é…å”¯ä¸€ IDï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> chunks = <span class="hljs-title function_">splitText</span>(text);
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; chunks.<span class="hljs-property">length</span>; i++) {
  <span class="hljs-keyword">const</span> chunkId = <span class="hljs-string">`<span class="hljs-subst">${noteId}</span>-<span class="hljs-subst">${i}</span>`</span>;
  <span class="hljs-keyword">const</span> embeddings = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">env</span>.<span class="hljs-property">AI</span>.<span class="hljs-title function_">run</span>(<span class="hljs-string">'@cf/baai/bge-base-en-v1.5'</span>, {
    <span class="hljs-attr">text</span>: [chunks[i]]
  });
  <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">env</span>.<span class="hljs-property">VECTORIZE</span>.<span class="hljs-title function_">insert</span>([{
    <span class="hljs-attr">id</span>: chunkId,
    <span class="hljs-attr">values</span>: embeddings.<span class="hljs-property">data</span>[<span class="hljs-number">0</span>],
    <span class="hljs-attr">metadata</span>: { noteId, <span class="hljs-attr">chunkIndex</span>: i, <span class="hljs-attr">text</span>: chunks[i] }
  }]);
}
</code></pre>
<h3 data-id="heading-12">æå‡æ£€ç´¢å‡†ç¡®åº¦</h3>
<p><strong>è°ƒæ•´ topK å’Œç›¸ä¼¼åº¦é˜ˆå€¼</strong>
é»˜è®¤è¿”å› top 3 å¯èƒ½ä¸å¤Ÿï¼Œä¹Ÿå¯èƒ½å¤ªå¤šã€‚è¯•è¯•è°ƒåˆ° 5 æ¡ï¼ŒåŒæ—¶è¿‡æ»¤æ‰ç›¸ä¼¼åº¦å¤ªä½çš„ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> matches = <span class="hljs-keyword">await</span> c.<span class="hljs-property">env</span>.<span class="hljs-property">VECTORIZE</span>.<span class="hljs-title function_">query</span>(queryEmbedding.<span class="hljs-property">data</span>[<span class="hljs-number">0</span>], {
  <span class="hljs-attr">topK</span>: <span class="hljs-number">5</span>,
  <span class="hljs-attr">returnMetadata</span>: <span class="hljs-literal">true</span>
});
<span class="hljs-comment">// åªä¿ç•™ç›¸ä¼¼åº¦ &gt; 0.7 çš„ç»“æœ</span>
<span class="hljs-keyword">const</span> relevantMatches = matches.<span class="hljs-property">matches</span>.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">m</span> =&gt;</span> m.<span class="hljs-property">score</span> &gt; <span class="hljs-number">0.7</span>);
</code></pre>
<p>ç›¸ä¼¼åº¦åˆ†æ•°èŒƒå›´æ˜¯ 0-1ï¼ˆä½™å¼¦ç›¸ä¼¼åº¦ï¼‰ï¼Œ0.7 ä»¥ä¸Šä¸€èˆ¬ç®—æ¯”è¾ƒç›¸å…³ã€‚
<strong>ä¼˜åŒ– Prompt</strong>
åˆ«å…‰æŠŠæ£€ç´¢åˆ°çš„å†…å®¹æ‰”ç»™ AIï¼Œå‘Šè¯‰å®ƒæ€ä¹ˆç”¨è¿™äº›ä¿¡æ¯ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> prompt = <span class="hljs-string">`ä½ æ˜¯ä¸€ä¸ªæ™ºèƒ½ç¬”è®°åŠ©æ‰‹ã€‚ä»¥ä¸‹æ˜¯ä»ç¬”è®°åº“ä¸­æ£€ç´¢åˆ°çš„ç›¸å…³å†…å®¹ï¼ˆæŒ‰ç›¸å…³æ€§æ’åºï¼‰ï¼š
<span class="hljs-subst">${context}</span>
è¯·ä¸¥æ ¼åŸºäºä¸Šè¿°å†…å®¹å›ç­”ç”¨æˆ·é—®é¢˜ã€‚å¦‚æœå†…å®¹ä¸è¶³ä»¥å›ç­”é—®é¢˜ï¼Œæ˜ç¡®è¯´æ˜"ç¬”è®°ä¸­æ²¡æœ‰æ‰¾åˆ°ç›¸å…³ä¿¡æ¯"ï¼Œä¸è¦ç¼–é€ ç­”æ¡ˆã€‚
ç”¨æˆ·é—®é¢˜ï¼š<span class="hljs-subst">${query}</span>`</span>;
</code></pre>
<p>å…³é”®ç‚¹ï¼š</p>
<ul>
<li>æ˜ç¡®å‘Šè¯‰ AI è¿™æ˜¯æ£€ç´¢åˆ°çš„èµ„æ–™</li>
<li>è¦æ±‚å®ƒåªåŸºäºè¿™äº›å†…å®¹å›ç­”</li>
<li>å…è®¸å®ƒæ‰¿è®¤"ä¸çŸ¥é“"
è¿™æ ·èƒ½å‡å°‘ AI çç¼–çš„æƒ…å†µã€‚</li>
</ul>
<h3 data-id="heading-13">æˆæœ¬æ§åˆ¶å’Œé™æµ</h3>
<p>Workers AI å…è´¹å±‚æ¯å¤©æœ‰ Neurons é¢åº¦é™åˆ¶ï¼ˆå…·ä½“æ•°å€¼ä¼šå˜ï¼Œå» <a href="https://link.juejin.cn?target=https%3A%2F%2Fdevelopers.cloudflare.com%2Fworkers-ai%2Fplatform%2Fpricing%2F" target="_blank" title="https://developers.cloudflare.com/workers-ai/platform/pricing/" ref="nofollow noopener noreferrer">Pricing é¡µé¢</a> æŸ¥æœ€æ–°çš„ï¼‰ã€‚</p>
<p><strong>ç›‘æ§ç”¨é‡</strong>ï¼š
åœ¨ Cloudflare Dashboard â†’ Workers AI é‡Œèƒ½çœ‹åˆ°æ¯æ—¥æ¶ˆè€—ã€‚ä¸åŒæ¨¡å‹æ¶ˆè€—ä¸åŒï¼ŒEmbedding æ¨¡å‹ä¾¿å®œï¼ŒLLM ç”Ÿæˆè´µä¸€äº›ã€‚</p>
<p><strong>é™çº§ç­–ç•¥</strong>ï¼š
å¦‚æœæ‹…å¿ƒè¶…é¢ï¼Œå¯ä»¥ï¼š</p>
<ol>
<li>é™åˆ¶æ¯ä¸ªç”¨æˆ·çš„è¯·æ±‚é¢‘ç‡ï¼ˆç”¨ KV æˆ– Durable Objects è®¡æ•°ï¼‰</li>
<li>è¶…å‡ºé¢åº¦åæ”¹ç”¨æ›´å°çš„æ¨¡å‹æˆ–è¿”å›ç¼“å­˜ç»“æœ</li>
<li>å¯¹äºéå…³é”®è¯·æ±‚ï¼Œç›´æ¥è¿”å›æ£€ç´¢åˆ°çš„åŸæ–‡ï¼Œä¸è°ƒ LLM</li>
</ol>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ç®€å•é™æµç¤ºä¾‹</span>
<span class="hljs-keyword">const</span> userKey = c.<span class="hljs-property">req</span>.<span class="hljs-title function_">header</span>(<span class="hljs-string">'X-User-ID'</span>) || <span class="hljs-string">'anonymous'</span>;
<span class="hljs-keyword">const</span> requestCount = <span class="hljs-keyword">await</span> c.<span class="hljs-property">env</span>.<span class="hljs-property">KV</span>.<span class="hljs-title function_">get</span>(<span class="hljs-string">`rate:<span class="hljs-subst">${userKey}</span>`</span>) || <span class="hljs-number">0</span>;
<span class="hljs-keyword">if</span> (requestCount &gt; <span class="hljs-number">100</span>) {
  <span class="hljs-keyword">return</span> c.<span class="hljs-title function_">json</span>({ <span class="hljs-attr">error</span>: <span class="hljs-string">'Rate limit exceeded'</span> }, <span class="hljs-number">429</span>);
}
<span class="hljs-keyword">await</span> c.<span class="hljs-property">env</span>.<span class="hljs-property">KV</span>.<span class="hljs-title function_">put</span>(<span class="hljs-string">`rate:<span class="hljs-subst">${userKey}</span>`</span>, requestCount + <span class="hljs-number">1</span>, { <span class="hljs-attr">expirationTtl</span>: <span class="hljs-number">86400</span> });
</code></pre>
<h3 data-id="heading-14">åˆ‡æ¢æ›´å¼ºçš„æ¨¡å‹</h3>
<p>Llama 3 8B å·²ç»æŒºä¸é”™äº†ï¼Œä½†å¦‚æœæƒ³è¦æ›´å¥½çš„ç†è§£èƒ½åŠ›ï¼Œå¯ä»¥è¯•è¯• Claudeï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// éœ€è¦å…ˆåœ¨ Dashboard ç»‘å®š Anthropic API key</span>
<span class="hljs-keyword">const</span> aiResponse = <span class="hljs-keyword">await</span> c.<span class="hljs-property">env</span>.<span class="hljs-property">AI</span>.<span class="hljs-title function_">run</span>(<span class="hljs-string">'claude-3-5-sonnet-latest'</span>, {
  <span class="hljs-attr">messages</span>: [
    { <span class="hljs-attr">role</span>: <span class="hljs-string">'system'</span>, <span class="hljs-attr">content</span>: <span class="hljs-string">'ä½ æ˜¯ä¸€ä¸ªæ™ºèƒ½ç¬”è®°åŠ©æ‰‹'</span> },
    { <span class="hljs-attr">role</span>: <span class="hljs-string">'user'</span>, <span class="hljs-attr">content</span>: prompt }
  ]
});
</code></pre>
<p>Claude çš„ç†è§£èƒ½åŠ›å’Œè¾“å‡ºè´¨é‡ç¡®å®æ›´å¥½ï¼Œä½†æ¶ˆè€—çš„ Neurons ä¹Ÿæ›´å¤šã€‚æ ¹æ®å®é™…éœ€æ±‚é€‰å§ã€‚
æˆ‘è‡ªå·±çš„ç»éªŒæ˜¯ï¼š</p>
<ul>
<li><strong>ç®€å•é—®ç­”</strong>ï¼šLlama 3 å¤Ÿç”¨</li>
<li><strong>éœ€è¦æ¨ç†ã€æ€»ç»“</strong>ï¼šClaude æ˜æ˜¾å¥½ä¸€äº›</li>
<li><strong>é¢„ç®—æœ‰é™</strong>ï¼šå…ˆç”¨ Llama æµ‹è¯•ï¼Œç¡®å®šéœ€æ±‚åå†å‡çº§</li>
</ul>
<h2 data-id="heading-15">éƒ¨ç½²ä¸Šçº¿å’Œå®é™…åº”ç”¨åœºæ™¯</h2>
<h3 data-id="heading-16">éƒ¨ç½²æµç¨‹</h3>
<p>æœ¬åœ°æµ‹è¯•æ²¡é—®é¢˜åï¼Œéƒ¨ç½²è¶…ç®€å•ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">wrangler deploy
</code></pre>
<p>å°±è¿™ä¸€è¡Œï¼ŒCloudflare ä¼šè‡ªåŠ¨ï¼š</p>
<ul>
<li>æ‰“åŒ…ä½ çš„ä»£ç </li>
<li>éƒ¨ç½²åˆ°å…¨çƒè¾¹ç¼˜èŠ‚ç‚¹</li>
<li>ç”Ÿæˆä¸€ä¸ª <code>.workers.dev</code> åŸŸå
ä½ ä¼šçœ‹åˆ°ç±»ä¼¼è¿™æ ·çš„è¾“å‡ºï¼š</li>
</ul>

<pre><code class="hljs language-arduino" lang="arduino">Published rag-notes-app
  https:<span class="hljs-comment">//rag-notes-app.your-account.workers.dev</span>
</code></pre>
<p>è¿™å°±æ˜¯ä½ çš„ API åœ°å€äº†ã€‚</p>
<p><strong>ç»‘å®šè‡ªå®šä¹‰åŸŸå</strong>ï¼ˆå¯é€‰ï¼‰ï¼š
å¦‚æœä½ æœ‰åŸŸåæ‰˜ç®¡åœ¨ Cloudflareï¼Œå¯ä»¥ç»‘å®šï¼š</p>
<pre><code class="hljs language-bash" lang="bash">wrangler domains add api.yourdomain.com
</code></pre>
<p>æˆ–è€…åœ¨ Dashboard â†’ Workers &amp; Pages â†’ ä½ çš„ Worker â†’ Settings â†’ Domains é‡Œæ·»åŠ ã€‚</p>
<p><strong>ç¯å¢ƒå˜é‡å’Œ Secrets</strong>ï¼š
å¦‚æœä½ ç”¨äº† Anthropic API key æˆ–å…¶ä»–æ•æ„Ÿä¿¡æ¯ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">wrangler secret put ANTHROPIC_API_KEY
<span class="hljs-comment"># è¾“å…¥ä½ çš„ key</span>
</code></pre>
<p>ä»£ç é‡Œè¿™æ ·ç”¨ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> apiKey = c.<span class="hljs-property">env</span>.<span class="hljs-property">ANTHROPIC_API_KEY</span>;
</code></pre>
<h3 data-id="heading-17">çœŸå®åº”ç”¨åœºæ™¯</h3>
<p>è¿™å¥— RAG æ¶æ„èƒ½åšçš„äº‹æŒºå¤šï¼Œåˆ†äº«å‡ ä¸ªå®é™…åœºæ™¯ï¼š</p>
<p><strong>1. ä¼ä¸šçŸ¥è¯†åº“é—®ç­”</strong></p>
<p>åœºæ™¯ï¼šå…¬å¸æœ‰å‡ ç™¾é¡µå‘˜å·¥æ‰‹å†Œã€æŠ€æœ¯æ–‡æ¡£ã€FAQï¼Œæ–°å‘˜å·¥æ‰¾èµ„æ–™å¾ˆéº»çƒ¦ã€‚
åšæ³•ï¼š</p>
<ul>
<li>æŠŠæ‰€æœ‰æ–‡æ¡£ä¸Šä¼ ï¼ŒæŒ‰ç« èŠ‚åˆ†å—å­˜å…¥ Vectorize</li>
<li>åšä¸ªç®€å•çš„ Web ç•Œé¢æˆ–æ¥å…¥ä¼ä¸šå¾®ä¿¡æœºå™¨äºº</li>
<li>å‘˜å·¥ç›´æ¥é—®"æŠ¥é”€æµç¨‹æ˜¯ä»€ä¹ˆ"ï¼Œç³»ç»Ÿè‡ªåŠ¨æ£€ç´¢ç›¸å…³ç« èŠ‚å›ç­”
å¥½å¤„ï¼š24 å°æ—¶åœ¨çº¿ï¼Œæ¯”ç¿»æ–‡æ¡£å¿«å¤šäº†ã€‚</li>
</ul>
<p><strong>2. æ™ºèƒ½å®¢æœ</strong></p>
<p>åœºæ™¯ï¼šç”µå•†ç½‘ç«™æœ‰å¤§é‡å•†å“ä¿¡æ¯å’Œå”®åæ”¿ç­–ï¼Œå®¢æœé‡å¤å›ç­”ç›¸åŒé—®é¢˜ã€‚
åšæ³•ï¼š</p>
<ul>
<li>æŠŠå¸¸è§é—®é¢˜ã€å•†å“æè¿°ã€é€€æ¢è´§æ”¿ç­–å­˜è¿›å»</li>
<li>ç”¨æˆ·å’¨è¯¢æ—¶å…ˆè®© RAG ç³»ç»Ÿå›ç­”</li>
<li>ç­”ä¸ä¸Šæ¥çš„å†è½¬äººå·¥
æ•ˆæœï¼šæŸä¸ªå¼€å‘è€…ç”¨è¿™å¥—æ–¹æ¡ˆï¼ŒæŠŠå®¢æœå‹åŠ›å‡å°‘äº† 60%+ã€‚</li>
</ul>
<p><strong>3. ä¸ªäººç¬”è®°åŠ©æ‰‹</strong></p>
<p>åœºæ™¯ï¼šä½ ç”¨ Notion æˆ– Obsidian è®°äº†å‡ å¹´ç¬”è®°ï¼Œæƒ³å¿«é€Ÿæ‰¾åˆ°æŸä¸ªçŸ¥è¯†ç‚¹ã€‚
åšæ³•ï¼š</p>
<ul>
<li>å®šæœŸæŠŠç¬”è®°å¯¼å‡ºï¼Œé€šè¿‡ API æ·»åŠ åˆ° RAG ç³»ç»Ÿ</li>
<li>éœ€è¦æ—¶ç›´æ¥é—®"ä¸Šæ¬¡çœ‹çš„é‚£ä¸ª TypeScript æŠ€å·§æ˜¯å•¥æ¥ç€"</li>
<li>ç³»ç»Ÿæ£€ç´¢å‡ºç›¸å…³ç¬”è®°ç‰‡æ®µ
æˆ‘è‡ªå·±å°±åœ¨ç”¨ç±»ä¼¼çš„å·¥å…·ï¼Œæ‰¾èµ„æ–™æ•ˆç‡çœŸçš„æå‡äº†ä¸å°‘ã€‚</li>
</ul>
<p><strong>4. "Chat with PDF" å·¥å…·</strong></p>
<p>åœºæ™¯ï¼šç”¨æˆ·ä¸Šä¼ ä¸€ä»½ PDFï¼ˆè®ºæ–‡ã€åˆåŒã€æŠ¥å‘Šï¼‰ï¼Œæƒ³å¿«é€Ÿæå–ä¿¡æ¯ã€‚
åšæ³•ï¼ˆå‚è€ƒ Rohit Patil çš„<a href="https://link.juejin.cn?target=https%3A%2F%2Frohitpatil.com%2Fblog%2Fai-rag-with-vectorize.html" target="_blank" title="https://rohitpatil.com/blog/ai-rag-with-vectorize.html" ref="nofollow noopener noreferrer">æ¡ˆä¾‹</a>ï¼‰ï¼š</p>
<ul>
<li>ç”¨æˆ·ä¸Šä¼  PDF åˆ° R2</li>
<li>Worker è¯»å– PDFï¼Œæå–æ–‡æœ¬ï¼Œåˆ†å—å‘é‡åŒ–</li>
<li>ç”¨æˆ·å¯ä»¥é—®"è¿™ä»½åˆåŒçš„ä»˜æ¬¾æ¡æ¬¾æ˜¯ä»€ä¹ˆ"
è¿™ä¸ªåœºæ™¯ç‰¹åˆ«å®ç”¨ï¼Œå¾ˆå¤šæ³•å¾‹ã€å’¨è¯¢è¡Œä¸šçš„äººéœ€è¦ã€‚</li>
</ul>
<p>&lt;StatsGrid stats={[
{ value: "24å°æ—¶", label: "ä¼ä¸šçŸ¥è¯†åº“åœ¨çº¿" },
{ value: "60%+", label: "æ™ºèƒ½å®¢æœå‹åŠ›å‡å°‘" },
{ value: "10å€", label: "ä¸ªäººç¬”è®°æ£€ç´¢æ•ˆç‡æå‡" }
]} source="å®é™…åº”ç”¨æ¡ˆä¾‹æ•°æ®" /&gt;</p>
<h3 data-id="heading-18">å¸¸è§é—®é¢˜æ’æŸ¥</h3>
<p><strong>é—®é¢˜1ï¼šå‘é‡ç»´åº¦ä¸åŒ¹é…</strong></p>
<p>é”™è¯¯ï¼š<code>dimension mismatch: expected 768, got 512</code>
åŸå› ï¼šVectorize ç´¢å¼•åˆ›å»ºæ—¶è®¾çš„ç»´åº¦ï¼ˆ768ï¼‰å’Œæ¨¡å‹è¾“å‡ºçš„ç»´åº¦ä¸ä¸€è‡´ã€‚
è§£å†³ï¼šç¡®ä¿ç´¢å¼•ç»´åº¦å’Œæ¨¡å‹åŒ¹é…ã€‚<code>bge-base-en-v1.5</code> æ˜¯ 768 ç»´ï¼Œåˆ«ç”¨é”™æ¨¡å‹ã€‚</p>
<p><strong>é—®é¢˜2ï¼šD1 å’Œ Vectorize æ•°æ®ä¸ä¸€è‡´</strong></p>
<p>ç°è±¡ï¼šæŸ¥è¯¢è¿”å›çš„ note ID åœ¨ D1 é‡Œä¸å­˜åœ¨ã€‚
åŸå› ï¼šå¯èƒ½åˆ é™¤ D1 è®°å½•æ—¶å¿˜äº†åˆ  Vectorizeï¼Œæˆ–è€… Workflow å¤±è´¥äº†ã€‚
è§£å†³ï¼šåˆ é™¤æ“ä½œè¦ä¹ˆåŒ…åœ¨äº‹åŠ¡é‡Œï¼Œè¦ä¹ˆç”¨ Workflow ç¡®ä¿ä¸¤è¾¹éƒ½åˆ å¹²å‡€ã€‚</p>
<p><strong>é—®é¢˜3ï¼šWorkflow è¶…æ—¶</strong></p>
<p>é”™è¯¯ï¼šworkflow execution timeout
åŸå› ï¼šå‘é‡åŒ–å¤§é‡æ–‡æœ¬æ—¶è¶…è¿‡ Workflow çš„æ—¶é—´é™åˆ¶ã€‚
è§£å†³ï¼šæŠŠå¤§æ–‡æ¡£æ‹†æˆå¤šä¸ª Workflow ä»»åŠ¡ï¼Œæˆ–è€…æ‰¹é‡å¤„ç†ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// åˆ†æ‰¹å¤„ç†</span>
<span class="hljs-keyword">const</span> batchSize = <span class="hljs-number">10</span>;
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; chunks.<span class="hljs-property">length</span>; i += batchSize) {
  <span class="hljs-keyword">const</span> batch = chunks.<span class="hljs-title function_">slice</span>(i, i + batchSize);
  <span class="hljs-keyword">await</span> c.<span class="hljs-property">env</span>.<span class="hljs-property">RAG_WORKFLOW</span>.<span class="hljs-title function_">create</span>({
    <span class="hljs-attr">params</span>: { noteId, <span class="hljs-attr">chunks</span>: batch, <span class="hljs-attr">offset</span>: i }
  });
}
</code></pre>
<h2 data-id="heading-19">ç»“è®º</h2>
<p>è¯´äº†è¿™ä¹ˆå¤šï¼Œå›é¡¾ä¸€ä¸‹å’±ä»¬åšäº†å•¥ï¼š</p>
<ul>
<li><strong>å¼„æ‡‚äº† RAG åŸç†</strong>ï¼šæ£€ç´¢å¢å¼ºç”Ÿæˆï¼Œå°±æ˜¯ç»™ AI å¼€å·è€ƒè¯•çš„æƒé™ï¼Œå…ˆæ‰¾èµ„æ–™å†å›ç­”</li>
<li><strong>æ­äº†ä¸ªèƒ½è·‘çš„åº”ç”¨</strong>ï¼šç¬”è®°é—®ç­”ç³»ç»Ÿï¼Œä»ç¯å¢ƒå‡†å¤‡åˆ°ä»£ç å®ç°ï¼Œå®Œæ•´èµ°äº†ä¸€é</li>
<li><strong>å­¦äº†ä¼˜åŒ–æŠ€å·§</strong>ï¼šæ–‡æœ¬åˆ†å—ã€æ£€ç´¢è°ƒä¼˜ã€æˆæœ¬æ§åˆ¶ï¼Œè¿™äº›ç»†èŠ‚è®©åº”ç”¨çœŸæ­£å¯ç”¨</li>
<li><strong>çœ‹äº†å®é™…åœºæ™¯</strong>ï¼šä¼ä¸šçŸ¥è¯†åº“ã€æ™ºèƒ½å®¢æœã€ä¸ªäººåŠ©æ‰‹ã€PDF èŠå¤©ï¼Œéƒ½æ˜¯å¯ä»¥è½åœ°çš„æ–¹å‘
Cloudflare è¿™å¥—æ–¹æ¡ˆæœ€å¤§çš„ä¼˜åŠ¿æ˜¯<strong>é—¨æ§›ä½</strong>ã€‚ä¸ç”¨ç§Ÿ GPUã€ä¸ç”¨æ­æ•°æ®åº“ã€ä¸ç”¨æ“å¿ƒè¿ç»´ï¼Œå…è´¹é¢åº¦å¯¹ä¸ªäººé¡¹ç›®æ¥è¯´ç»å¯¹å¤Ÿç”¨ã€‚å°±ç®—æ˜¯ç”Ÿäº§ç¯å¢ƒï¼Œä»˜è´¹è®¡åˆ’ä¹Ÿæ¯”è‡ªå»ºä¾¿å®œå¤šäº†ã€‚
æ¥ä¸‹æ¥ä½ å¯ä»¥ï¼š</li>
</ul>
<ol>
<li><strong>ç«‹å³åŠ¨æ‰‹</strong>ï¼šå…‹éš† <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fcloudflare%2Fworkers-sdk%2Ftree%2Fmain%2Ftemplates%2Fworker-ai-rag" target="_blank" title="https://github.com/cloudflare/workers-sdk/tree/main/templates/worker-ai-rag" ref="nofollow noopener noreferrer">å®˜æ–¹ç¤ºä¾‹ä»£ç </a>ï¼Œ<code>wrangler dev</code> è·‘èµ·æ¥ï¼Œ5 åˆ†é’Ÿå°±èƒ½çœ‹åˆ°æ•ˆæœ</li>
<li><strong>æ¥å…¥çœŸå®æ•°æ®</strong>ï¼šæŠŠä½ çš„ç¬”è®°ã€æ–‡æ¡£ã€FAQ å¯¼è¿›å»ï¼Œçœ‹çœ‹æ£€ç´¢è´¨é‡å¦‚ä½•</li>
<li><strong>åšä¸ªå‰ç«¯ç•Œé¢</strong>ï¼šç”¨ React/Vue åšä¸ªç®€å•çš„èŠå¤©ç•Œé¢ï¼Œæˆ–è€…ç›´æ¥ç”¨ Cloudflare Pages éƒ¨ç½²</li>
<li><strong>æ¢ç´¢æ›´å¤šå¯èƒ½</strong>ï¼šè¯•è¯•å¤šæ¨¡æ€ RAGï¼ˆç»“åˆå›¾ç‰‡ã€è¡¨æ ¼ï¼‰ã€GraphRAGï¼ˆçŸ¥è¯†å›¾è°±å¢å¼ºï¼‰ç­‰é«˜çº§ç©æ³•
RAG æ˜¯å½“å‰ AI åº”ç”¨æœ€å®ç”¨çš„æ¶æ„ä¹‹ä¸€ï¼ŒæŒæ¡å®ƒèƒ½è®©ä½ åšå‡ºå¾ˆå¤šæœ‰æ„æ€çš„ä¸œè¥¿ã€‚è¯•ä¸‹æ¥ï¼ŒCloudflare å…¨å®¶æ¡¶ç¡®å®èƒ½è§£å†³ä¸å°‘å®é™…é—®é¢˜ã€‚
è¦æ˜¯ç¢°åˆ°é—®é¢˜ï¼Œå¯ä»¥å» <a href="https://link.juejin.cn?target=https%3A%2F%2Fdiscord.gg%2Fcloudflaredev" target="_blank" title="https://discord.gg/cloudflaredev" ref="nofollow noopener noreferrer">Cloudflare Discord</a> æˆ– <a href="https://link.juejin.cn?target=https%3A%2F%2Fcommunity.cloudflare.com%2F" target="_blank" title="https://community.cloudflare.com/" ref="nofollow noopener noreferrer">Community è®ºå›</a> é—®ï¼Œç¤¾åŒºæŒºæ´»è·ƒçš„ã€‚</li>
</ol>
<blockquote>
<p>åŸæ–‡é¦–å‘<a href="https://link.juejin.cn?target=https%3A%2F%2Feastondev.com%2Fblog%2Fzh%2Fposts%2Fai%2F20251201-rag-workers-ai-vectorize-tutorial%2F" target="_blank" title="https://eastondev.com/blog/zh/posts/ai/20251201-rag-workers-ai-vectorize-tutorial/" ref="nofollow noopener noreferrer">è‡ªä¸ªäººåšå®¢</a></p>
</blockquote>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5fdf9e0d57b04fbd888fafd9e8cfa101~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oqA5pyv5pu05aW96K-0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767364860&amp;x-signature=gXPIxO9X9vodOSG7tO1Q7Y0ge4s%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/412c68e4376c4c56857a6285a67dad62~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oqA5pyv5pu05aW96K-0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767364860&amp;x-signature=zwm7sfePfWcoQ4JuvID0ZLnSJms%3D" alt="image.png" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä½ çš„ AI ä¸ºä»€ä¹ˆæ€»ç­”éæ‰€é—®ï¼Ÿç¼ºçš„ä¸æ˜¯æ™ºå•†ï¼Œæ˜¯â€œè®°å¿†ç³»ç»Ÿâ€]]></title>    <link>https://juejin.cn/post/7587995707166244883</link>    <guid>https://juejin.cn/post/7587995707166244883</guid>    <pubDate>2025-12-26T14:58:27.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587995707166244883" data-draft-id="7587995707166228499" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä½ çš„ AI ä¸ºä»€ä¹ˆæ€»ç­”éæ‰€é—®ï¼Ÿç¼ºçš„ä¸æ˜¯æ™ºå•†ï¼Œæ˜¯â€œè®°å¿†ç³»ç»Ÿâ€"/> <meta itemprop="keywords" content="LangChain,LLM,å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-26T14:58:27.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="xhxxx"/> <meta itemprop="url" content="https://juejin.cn/user/3235201610941578"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä½ çš„ AI ä¸ºä»€ä¹ˆæ€»ç­”éæ‰€é—®ï¼Ÿç¼ºçš„ä¸æ˜¯æ™ºå•†ï¼Œæ˜¯â€œè®°å¿†ç³»ç»Ÿâ€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3235201610941578/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    xhxxx
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-26T14:58:27.000Z" title="Fri Dec 26 2025 14:58:27 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ç”¨ LangChain å®ç°æœ‰è®°å¿†çš„å¤šè½®å¯¹è¯ï¼šç»™ AI é…ä¸€ä¸ªâ€œæ•°å­—ç¬”è®°æœ¬â€</h2>
<blockquote>
<p><strong>å¤§æ¨¡å‹åƒä¸€ä½å¥å¿˜çš„å¤©æ‰â€”â€”èªæ˜ä½†è®°ä¸ä½äº‹ã€‚è€Œ LangChainï¼Œå°±æ˜¯å®ƒçš„ä¸“å±ç¬”è®°æœ¬å’Œç§˜ä¹¦ã€‚</strong></p>
</blockquote>
<p>åœ¨æ„å»ºèŠå¤©æœºå™¨äººæ—¶ï¼Œæˆ‘ä»¬å¸¸é‡åˆ°ä¸€ä¸ªå°´å°¬åœºæ™¯ï¼š<br/>
ä½ åˆšå‘Šè¯‰ AI â€œæˆ‘å«ç”°æ™¨æ«â€ï¼Œä¸‹ä¸€ç§’é—®â€œæˆ‘å«ä»€ä¹ˆâ€ï¼Œå®ƒå´ä¸€è„¸èŒ«ç„¶ã€‚</p>
<p>è¿™ä¸æ˜¯å®ƒç¬¨ï¼Œè€Œæ˜¯<strong>å¤§æ¨¡å‹å¤©ç”Ÿâ€œæ— çŠ¶æ€â€</strong> â€”â€”æ¯æ¬¡å¯¹è¯éƒ½åƒç¬¬ä¸€æ¬¡è§é¢ã€‚<br/>
è¦è®©å®ƒè®°ä½ä½ ï¼Œæˆ‘ä»¬éœ€è¦ä¸€å¥—æœºåˆ¶ï¼š<strong>è®°å½•ã€æºå¸¦ã€æ›´æ–°</strong>ä½ çš„å¯¹è¯å†å²ã€‚</p>
<p>LangChain æ­£æ˜¯ä¸ºæ­¤è€Œç”Ÿã€‚ä¸‹é¢ï¼Œæˆ‘ä»¬é€šè¿‡ä»£ç  + æ¯”å–»ï¼Œä¸€æ­¥æ­¥æ­å»ºè¿™ä¸ªâ€œè®°å¿†ç³»ç»Ÿâ€ã€‚</p>
<hr/>
<h3 data-id="heading-1">ä¸€ã€é—®é¢˜æ¼”ç¤ºï¼šæ²¡æœ‰ç¬”è®°æœ¬çš„â€œå¥å¿˜å¤©æ‰â€</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> model = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ChatDeepSeek</span>({
    <span class="hljs-attr">model</span>:<span class="hljs-string">'deepseek-chat'</span>,
    <span class="hljs-attr">temperature</span>:<span class="hljs-number">0</span>,
});

<span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> model.<span class="hljs-title function_">invoke</span>(<span class="hljs-string">'æˆ‘å«ç”°æ™¨æ«ï¼Œå–œæ¬¢åƒé¸¡è…¿é¥­'</span>)
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(res.<span class="hljs-property">content</span>);

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'---------------'</span>);

<span class="hljs-keyword">const</span> res2 = <span class="hljs-keyword">await</span> model.<span class="hljs-title function_">invoke</span>(<span class="hljs-string">'æˆ‘å«ä»€ä¹ˆåå­—'</span>)
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(res2.<span class="hljs-property">content</span>);
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f80e1aa207b34332b1a464ec17176014~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeGh4eHg=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767365906&amp;x-signature=iezKYo2mXpCK3TVCGN53o5QbAJA%3D" alt="image.png" loading="lazy"/></p>
<h4 data-id="heading-2">ğŸ§  å¤§æ¨¡å‹ï¼š<strong>æ²¡æœ‰ç¬”è®°æœ¬çš„æ¼”è®²è€…</strong></h4>
<p>æƒ³è±¡ä¸€ä½æ¼”è®²è€…ç«™åœ¨å°ä¸Šï¼š</p>
<ul>
<li>ç¬¬ä¸€æ¬¡ä¸Šå°è¯´ï¼šâ€œæˆ‘æ˜¯ç”°æ™¨æ«ã€‚â€</li>
<li>ä¸‹å°åï¼Œ<strong>æ²¡äººç»™ä»–å‘è®²ç¨¿</strong>ã€‚</li>
<li>ç¬¬äºŒæ¬¡ä¸Šå°ï¼Œä»–åªèƒ½å‡­ç©ºå›å¿†ï¼šâ€œåˆšæ‰æˆ‘è¯´å•¥äº†ï¼Ÿâ€</li>
</ul>
<p>å¤§æ¨¡å‹å°±æ˜¯è¿™æ ·â€”â€”<strong>æ¯æ¬¡è°ƒç”¨éƒ½æ˜¯å…¨æ–°å¼€å§‹</strong>ï¼Œé™¤éä½ ä¸»åŠ¨æŠŠâ€œè®²ç¨¿â€ï¼ˆå†å²ï¼‰å¡ç»™å®ƒã€‚</p>
<hr/>
<h3 data-id="heading-3">äºŒã€æ‰‹åŠ¨ç»´æŠ¤å†å²ï¼šä½ è‡ªå·±å½“ç§˜ä¹¦</h3>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">let</span> chatHistory = [];

chatHistory.<span class="hljs-title function_">push</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">HumanMessage</span>(<span class="hljs-string">'æˆ‘å«ç”°æ™¨æ«...'</span>));
<span class="hljs-keyword">const</span> aiReply = <span class="hljs-keyword">await</span> model.<span class="hljs-title function_">invoke</span>(chatHistory);
chatHistory.<span class="hljs-title function_">push</span>(aiReply);

<span class="hljs-comment">// ä¸‹æ¬¡å†è°ƒç”¨æ—¶å¸¦ä¸Šæ•´ä¸ª chatHistory</span>
</code></pre>
<h4 data-id="heading-4">ğŸ“ <strong>ä½ äº²è‡ªå½“ç§˜ä¹¦</strong></h4>
<ul>
<li>ä½ æ‹¿ä¸ªå°æœ¬æœ¬ï¼ˆ<code>chatHistory</code> æ•°ç»„ï¼‰</li>
<li>æ¯æ¬¡ç”¨æˆ·è¯´è¯ï¼Œä½ è®°ä¸‹æ¥</li>
<li>æ¯æ¬¡ AI å›ç­”ï¼Œä½ ä¹Ÿè®°ä¸‹æ¥</li>
<li>ä¸‹æ¬¡æé—®å‰ï¼ŒæŠŠæ•´æœ¬ç¬”è®°é€’ç»™ AI</li>
</ul>
<p>âœ… èƒ½å·¥ä½œï¼Œä½†ï¼š</p>
<ul>
<li>å¤šç”¨æˆ·ï¼Ÿä½ å¾—å‡†å¤‡å¤šä¸ªæœ¬å­ï¼Œå¹¶è´´ä¸Šæ ‡ç­¾ï¼ˆuser_a, user_bâ€¦ï¼‰</li>
<li>èŠ100è½®ï¼Ÿæœ¬å­è¶Šæ¥è¶Šåšï¼ŒAI çœ‹å¾—çœ¼èŠ±ï¼ˆToken çˆ†ç‚¸ï¼‰</li>
</ul>
<p><strong>å¤ªç´¯äº†ï¼æˆ‘ä»¬éœ€è¦ä¸€ä¸ªè‡ªåŠ¨åŒ–çš„ç§˜ä¹¦ã€‚</strong></p>
<hr/>
<h3 data-id="heading-5">ä¸‰ã€LangChain ç™»åœºï¼šç»™ AI é…ä¸€ä¸ªæ™ºèƒ½ç§˜ä¹¦</h3>
<p>LangChain çš„ <code>RunnableWithMessageHistory</code> å°±æ˜¯è¿™ä½ç§˜ä¹¦ã€‚æˆ‘ä»¬æ¥é…ç½®å®ƒï¼š</p>
<h4 data-id="heading-6">æ­¥éª¤ 1ï¼šè®¾è®¡â€œå¯¹è¯æ¨¡æ¿â€â€”â€”è§„å®šæ€ä¹ˆè¯»ç¬”è®°</h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">ChatDeepSeek</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@langchain/deepseek'</span>;
<span class="hljs-keyword">import</span>{<span class="hljs-title class_">ChatPromptTemplate</span>} <span class="hljs-keyword">from</span> <span class="hljs-string">'@langchain/core/prompts'</span>;
<span class="hljs-comment">// å¸¦ä¸Šå†å²è®°å½•çš„å¯è¿è¡Œå¯¹è±¡</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">RunnableWithMessageHistory</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@langchain/core/runnables'</span>;
<span class="hljs-comment">// å†…å­˜ä¸­çš„å¯¹è¯å†å²è®°å½•</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">InMemoryChatMessageHistory</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@langchain/core/chat_history'</span>;
<span class="hljs-keyword">import</span><span class="hljs-string">'dotenv/config'</span>;

<span class="hljs-keyword">const</span> prompt = <span class="hljs-title class_">ChatPromptTemplate</span>.<span class="hljs-title function_">fromMessages</span>([
  [<span class="hljs-string">'system'</span>, <span class="hljs-string">'ä½ æ˜¯ä¸€ä¸ªæœ‰è®°å¿†çš„åŠ©æ‰‹'</span>],
  [<span class="hljs-string">'placeholder'</span>, <span class="hljs-string">'{history}'</span>], <span class="hljs-comment">// â† ç§˜ä¹¦åœ¨è¿™é‡Œæ’å…¥ç¬”è®°å†…å®¹</span>
  [<span class="hljs-string">'human'</span>, <span class="hljs-string">'{input}'</span>]
]);
</code></pre>
<blockquote>
<p>ğŸ“– <strong>ä¼šè®®è®®ç¨‹æ¨¡æ¿</strong><br/>
å°±åƒä¸€åœºä¼šè®®çš„å›ºå®šæµç¨‹ï¼š</p>
<ol>
<li>ä¸»æŒäººå¼€åœºï¼ˆsystemï¼‰</li>
<li><strong>å›é¡¾ä¸Šæ¬¡ä¼šè®®çºªè¦</strong>ï¼ˆ{history}ï¼‰</li>
<li>è®¨è®ºæ–°è®®é¢˜ï¼ˆ{input}ï¼‰</li>
</ol>
</blockquote>
<p><code>{history}</code> å°±æ˜¯é¢„ç•™çš„â€œçºªè¦æ’å…¥ä½â€ã€‚</p>
<hr/>
<h4 data-id="heading-7">æ­¥éª¤ 2ï¼šç»„è£…åŸºç¡€å·¥ä½œæµ</h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> runnable =prompt
.<span class="hljs-title function_">pipe</span>(<span class="hljs-function">(<span class="hljs-params">input</span>) =&gt;</span>{ <span class="hljs-comment">//debug èŠ‚ç‚¹</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"&gt;&gt;&gt; æœ€ç»ˆä¼ ç»™æ¨¡å‹çš„ä¿¡æ¯ï¼ˆPrompt å†…å­˜ï¼‰"</span>);
     <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(input);
     <span class="hljs-keyword">return</span> input;
})
.<span class="hljs-title function_">pipe</span>(model);
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ecc354cefe14449a80eb7eed833fef55~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeGh4eHg=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767365906&amp;x-signature=HaJSFhAVnnT%2FLjKRScKDbeLrClw%3D" alt="image.png" loading="lazy"/>
è¿™é‡Œæˆ‘ä»¬æ‰‹åŠ¨æ·»åŠ äº†ä¸€ä¸ªç”¨äºdebugçš„èŠ‚ç‚¹ï¼Œå®é™…ä¸Šå®ƒåªæ˜¯ç”¨æ¥æŸ¥çœ‹æˆ‘ä»¬æœ€ç»ˆä¼ ç»™å¤§æ¨¡å‹çš„æ˜¯ä»€ä¹ˆã€‚<br/>
å®ƒç­‰ä»·äºä¸‹é¢è¿™æ®µä»£ç </p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> runnable = prompt.<span class="hljs-title function_">pipe</span>(model);
</code></pre>
<blockquote>
<p>âš™ï¸ <strong>æ ¸å¿ƒå·¥ä½œå°</strong><br/>
è¿™æ˜¯ AI çš„â€œåŠå…¬æ¡Œâ€ï¼š</p>
<ul>
<li>å·¦è¾¹æ”¾è®®ç¨‹æ¨¡æ¿ï¼ˆpromptï¼‰</li>
<li>å³è¾¹è¿ç€å¤§è„‘ï¼ˆmodelï¼‰<br/>
ä½†<strong>è¿˜æ²¡é…ç§˜ä¹¦</strong>ï¼Œæ‰€ä»¥ä¸ä¼šè‡ªåŠ¨å¡«çºªè¦ã€‚</li>
</ul>
</blockquote>
<hr/>
<h4 data-id="heading-8">æ­¥éª¤ 3ï¼šå‡†å¤‡â€œç¬”è®°æœ¬â€â€”â€”å†å²å­˜å‚¨</h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> messageHistory = <span class="hljs-keyword">new</span> <span class="hljs-title class_">InMemoryChatMessageHistory</span>();
</code></pre>
<blockquote>
<p>ğŸ““ <strong>ä¸€ä¸ªç©ºç™½ç¬”è®°æœ¬</strong><br/>
è¿™æ˜¯ç§˜ä¹¦ç”¨æ¥è®°å¯¹è¯çš„æœ¬å­ã€‚<br/>
ç›®å‰æ˜¯â€œé€šç”¨æœ¬å­â€â€”â€”æ‰€æœ‰ç”¨æˆ·å…±ç”¨ï¼ˆåé¢æˆ‘ä»¬ä¼šå‡çº§ä¸ºæ¯äººä¸€æœ¬ï¼‰ã€‚</p>
</blockquote>
<hr/>
<h4 data-id="heading-9">æ­¥éª¤ 4ï¼šé›‡ä½£â€œæ™ºèƒ½ç§˜ä¹¦â€â€”â€”<code>RunnableWithMessageHistory</code></h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> chain = <span class="hljs-keyword">new</span> <span class="hljs-title class_">RunnableWithMessageHistory</span>({
  runnable,                  <span class="hljs-comment">// â† æŠŠåŠå…¬æ¡Œäº¤ç»™ç§˜ä¹¦</span>
  <span class="hljs-attr">getMessageHistory</span>: <span class="hljs-keyword">async</span> () =&gt; messageHistory, <span class="hljs-comment">// â† å‘Šè¯‰ç§˜ä¹¦å»å“ªæ‹¿ç¬”è®°æœ¬</span>
  <span class="hljs-attr">inputMessagesKey</span>: <span class="hljs-string">'input'</span>,     <span class="hljs-comment">// â† ç”¨æˆ·å½“å‰è¯´çš„è¯å« "input"</span>
  <span class="hljs-attr">historyMessagesKey</span>: <span class="hljs-string">'history'</span>  <span class="hljs-comment">// â† ç¬”è®°å†…å®¹æ³¨å…¥åˆ°æ¨¡æ¿çš„ "history" ä½ç½®</span>
});
</code></pre>
<blockquote>
<p>ğŸ‘¨â€ğŸ’¼ <strong>æ­£å¼è˜ç”¨ç§˜ä¹¦</strong><br/>
ä½ å¯¹ç§˜ä¹¦è¯´ï¼š</p>
<ul>
<li>â€œè¿™æ˜¯ä½ çš„å·¥ä½œå°ï¼ˆrunnableï¼‰â€</li>
<li>â€œç¬”è®°æœ¬åœ¨è¿™å„¿ï¼ˆmessageHistoryï¼‰â€</li>
<li>â€œç”¨æˆ·å½“å‰é—®é¢˜å« <code>input</code>ï¼Œä¸Šæ¬¡çš„ç¬”è®°å« <code>history</code>ï¼ŒæŒ‰æ¨¡æ¿å¡«å¥½å°±è¡Œâ€</li>
</ul>
</blockquote>
<p>è¿™é‡Œå°±æ˜¯å¯¹runableè¿›è¡Œäº†é‡æ–°åŒ…è£…:</p>
<ul>
<li><strong>getMessageHistoryå‘Šè¯‰å®ƒåº”è¯¥è°ƒç”¨å“ªä¸ªå†å²å¯¹è¯(æ¯æ®µå¯¹è¯ä¼šæœ‰å¯¹è¯idï¼Œæˆ‘ä»¬è¿™é‡Œä½¿ç”¨äº†åŒä¸€ä¸ªå†å²å¯¹è¯)</strong></li>
<li><strong>inputMessagesKeyç”¨æ¥è®°å½•å½“å‰ç”¨æˆ·è¯´çš„è¯</strong></li>
<li><strong>historyMessagesKey å°†å†å²å¯¹è¯æ’å…¥åˆ°å¯¹åº”ä½ç½®</strong>
å¯¹äºæˆ‘ä»¬è®¾å®šçš„æ¨¡æ¿ä½ å°±ç†è§£äº†:</li>
</ul>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> prompt = <span class="hljs-title class_">ChatPromptTemplate</span>.<span class="hljs-title function_">fromMessages</span>([
  [<span class="hljs-string">'system'</span>, <span class="hljs-string">'ä½ æ˜¯ä¸€ä¸ªæœ‰è®°å¿†çš„åŠ©æ‰‹'</span>],
  [<span class="hljs-string">'placeholder'</span>, <span class="hljs-string">'{history}'</span>], <span class="hljs-comment">// â† æ’å…¥çš„å†å²å¯¹è¯</span>
  [<span class="hljs-string">'human'</span>, <span class="hljs-string">'{input}'</span>]<span class="hljs-comment">//&lt;- ç”¨æˆ·è¾“å…¥</span>
]);
</code></pre>
<p>è€Œå½“æˆ‘ä»¬åå¤æé—®æ—¶å°±ä¼šå˜æˆè¿™æ ·</p>
<pre><code class="hljs language-js" lang="js">[
  <span class="hljs-title class_">SystemMessage</span>(<span class="hljs-string">"ä½ æ˜¯ä¸€ä¸ªæœ‰è®°å¿†çš„åŠ©æ‰‹"</span>),
  <span class="hljs-comment">//å¯¹åº”çš„å†å²å¯¹è¯æ’å…¥</span>
  <span class="hljs-title class_">HumanMessage</span>(<span class="hljs-string">"æˆ‘å«ç”°æ™¨æ«ï¼Œå–œæ¬¢åƒé¸¡è…¿é¥­"</span>),
  <span class="hljs-title class_">AIMessage</span>(<span class="hljs-string">"å¥½çš„ï¼Œç”°æ™¨æ«ï¼..."</span>),
  <span class="hljs-comment">//ç”¨æˆ·çš„æé—®</span>
  <span class="hljs-title class_">HumanMessage</span>(<span class="hljs-string">"æˆ‘å«ä»€ä¹ˆåå­—"</span>)
]
</code></pre>
<p>ä»æ­¤ï¼Œ<strong>ä½ åªéœ€è¯´â€œé—® AI ä¸€ä¸ªé—®é¢˜â€</strong> ï¼Œç§˜ä¹¦ä¼šè‡ªåŠ¨ï¼š</p>
<ol>
<li>æ‰“å¼€ç¬”è®°æœ¬ï¼Œè¯»å–å†å²</li>
<li>æŒ‰æ¨¡æ¿æ•´ç†æˆå®Œæ•´è®®ç¨‹</li>
<li>äº¤ç»™ AI å¤„ç†</li>
<li>æŠŠæ–°å¯¹è¯è®°å›ç¬”è®°æœ¬</li>
</ol>
<hr/>
<h4 data-id="heading-10">æ­¥éª¤ 5ï¼šä½¿ç”¨â€”â€”ä½ åªéœ€æé—®é¢˜ï¼</h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">await</span> chain.<span class="hljs-title function_">invoke</span>({ <span class="hljs-attr">input</span>: <span class="hljs-string">'æˆ‘å«ç”°æ™¨æ«...'</span> });
<span class="hljs-keyword">await</span> chain.<span class="hljs-title function_">invoke</span>({ <span class="hljs-attr">input</span>: <span class="hljs-string">'æˆ‘å«ä»€ä¹ˆåå­—ï¼Ÿ'</span> }); <span class="hljs-comment">// âœ… æ­£ç¡®å›ç­”ï¼</span>
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0b53778bce3442109ee9dba52b604b42~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeGh4eHg=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767365906&amp;x-signature=lq%2FZ4Y2HoYM7DyuWCAy72q0TFS0%3D" alt="image.png" loading="lazy"/></p>
<blockquote>
<p>ğŸ’¬è€æ¿åªç®¡ä¸‹æŒ‡ä»¤**<br/>
ä½ ä½œä¸ºè€æ¿ï¼Œåªéœ€è¯´ï¼šâ€œå¸®æˆ‘é—® AI æˆ‘å«ä»€ä¹ˆï¼Ÿâ€<br/>
ç§˜ä¹¦é»˜é»˜å®Œæˆæ‰€æœ‰å¹•åå·¥ä½œï¼Œä½ ç”šè‡³ä¸ç”¨çŸ¥é“ç¬”è®°æœ¬çš„å­˜åœ¨ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-11">å››ã€å‡çº§ï¼šç»™æ¯ä½ç”¨æˆ·é…ä¸“å±ç¬”è®°æœ¬ï¼ˆå¤šä¼šè¯æ”¯æŒï¼‰</h3>
<p>ä¹‹å‰çš„ç¬”è®°æœ¬æ˜¯å…¬ç”¨çš„ã€‚ç°åœ¨ï¼Œæˆ‘ä»¬è®©ç§˜ä¹¦ç®¡ç†<strong>å¤šä¸ªå¸¦æ ‡ç­¾çš„ç¬”è®°æœ¬</strong>ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> sessionStore = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>(); <span class="hljs-comment">// â† ä¸€ä¸ªæ–‡ä»¶æŸœï¼Œæ¯ä¸ªæŠ½å±‰è´´äº†æ ‡ç­¾</span>

<span class="hljs-keyword">const</span> <span class="hljs-title function_">getMessageHistory</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params">sessionId</span>) =&gt; {
  <span class="hljs-keyword">if</span> (!sessionStore.<span class="hljs-title function_">has</span>(sessionId)) {
    <span class="hljs-comment">// å¦‚æœæ²¡è¿™ä¸ªç”¨æˆ·çš„ç¬”è®°æœ¬ï¼Œå°±æ–°å»ºä¸€æœ¬</span>
    sessionStore.<span class="hljs-title function_">set</span>(sessionId, <span class="hljs-keyword">new</span> <span class="hljs-title class_">InMemoryChatMessageHistory</span>());
  }
  <span class="hljs-keyword">return</span> sessionStore.<span class="hljs-title function_">get</span>(sessionId); <span class="hljs-comment">// â† è¿”å›å¯¹åº”ç¬”è®°æœ¬</span>
};

<span class="hljs-comment">// è°ƒç”¨æ—¶æŒ‡å®šç”¨æˆ· ID</span>
<span class="hljs-keyword">await</span> chain.<span class="hljs-title function_">invoke</span>(
  { <span class="hljs-attr">input</span>: <span class="hljs-string">'æˆ‘å«å¼ ä¸‰'</span> },
  { <span class="hljs-attr">configurable</span>: { <span class="hljs-attr">sessionId</span>: <span class="hljs-string">'user_zhang'</span> } } <span class="hljs-comment">// â† â€œè¯·ç”¨å¼ ä¸‰çš„ç¬”è®°æœ¬ï¼â€</span>
);
</code></pre>
<blockquote>
<p>ğŸ—‚ï¸ <strong>å¸¦æ ‡ç­¾çš„æ–‡ä»¶æŸœ</strong></p>
<ul>
<li>æ–‡ä»¶æŸœï¼ˆ<code>sessionStore</code>ï¼‰é‡Œæœ‰å¾ˆå¤šæŠ½å±‰</li>
<li>æ¯ä¸ªæŠ½å±‰è´´ç€ç”¨æˆ· ID æ ‡ç­¾ï¼ˆ<code>sessionId</code>ï¼‰</li>
<li>ç§˜ä¹¦æ ¹æ®ä½ æä¾›çš„æ ‡ç­¾ï¼Œå–å‡ºå¯¹åº”çš„ç¬”è®°æœ¬</li>
<li>å¼ ä¸‰å’Œæå››çš„å¯¹è¯å®Œå…¨éš”ç¦»ï¼Œäº’ä¸å¹²æ‰°</li>
</ul>
</blockquote>
<hr/>
<h3 data-id="heading-12">äº”ã€é˜²æ­¢ç¬”è®°æœ¬å¤ªåšï¼šè‡ªåŠ¨æ¸…ç†æ—§è®°å½•</h3>
<p>èŠå¾—è¶Šå¤šï¼Œç¬”è®°æœ¬è¶Šåšã€‚é•¿æœŸä¸‹å»ï¼š</p>
<ul>
<li>AI é˜…è¯»å›°éš¾ï¼ˆä¸Šä¸‹æ–‡å¤ªé•¿ï¼‰</li>
<li>æˆæœ¬é£™å‡ï¼ˆToken æŒ‰å­—æ•°è®¡è´¹ï¼‰</li>
</ul>
<p>è§£å†³æ–¹æ¡ˆï¼š<strong>è®©ç§˜ä¹¦å®šæœŸæ¸…ç†æ—§é¡µ</strong></p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">MAX_MESSAGES</span> = <span class="hljs-number">6</span>; <span class="hljs-comment">// åªä¿ç•™æœ€è¿‘ 3 è½®å¯¹è¯ï¼ˆ6 æ¡æ¶ˆæ¯ï¼‰</span>

<span class="hljs-keyword">const</span> <span class="hljs-title function_">getMessageHistory</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params">sessionId</span>) =&gt; {
  <span class="hljs-keyword">let</span> history = sessionStore.<span class="hljs-title function_">get</span>(sessionId) || <span class="hljs-keyword">new</span> <span class="hljs-title class_">InMemoryChatMessageHistory</span>();
  
  <span class="hljs-keyword">const</span> messages = <span class="hljs-keyword">await</span> history.<span class="hljs-title function_">getMessages</span>();
  <span class="hljs-keyword">if</span> (messages.<span class="hljs-property">length</span> &gt; <span class="hljs-variable constant_">MAX_MESSAGES</span>) {
    <span class="hljs-comment">// æ¸…ç©ºç¬”è®°æœ¬ï¼ŒåªæŠ„å†™æœ€åå‡ é¡µ</span>
    <span class="hljs-keyword">await</span> history.<span class="hljs-title function_">clear</span>();
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> msg <span class="hljs-keyword">of</span> messages.<span class="hljs-title function_">slice</span>(-<span class="hljs-variable constant_">MAX_MESSAGES</span>)) {
      <span class="hljs-keyword">await</span> history.<span class="hljs-title function_">addMessage</span>(msg);
    }
  }
  
  sessionStore.<span class="hljs-title function_">set</span>(sessionId, history);
  <span class="hljs-keyword">return</span> history;
};
</code></pre>
<blockquote>
<p>âœ‚ï¸ <strong>ç§˜ä¹¦çš„â€œç²¾ç®€ç¬”è®°â€ä¹ æƒ¯</strong><br/>
ç§˜ä¹¦æœ‰ä¸ªè§„çŸ©ï¼š</p>
<ul>
<li>ç¬”è®°æœ¬è¶…è¿‡ 6 é¡µï¼Œå°±æ’•æ‰å‰é¢çš„</li>
<li>åªä¿ç•™æœ€è¿‘ 3 è½®å¯¹è¯ï¼ˆè¶³å¤Ÿç†è§£ä¸Šä¸‹æ–‡ï¼‰</li>
<li>æ—¢èŠ‚çœç©ºé—´ï¼Œåˆä¸å½±å“å·¥ä½œ</li>
</ul>
</blockquote>
<hr/>
<h3 data-id="heading-13">å…­ã€æ€»ç»“ï¼šLangChain çš„è®°å¿†ç³»ç»Ÿå…¨æ™¯å›¾</h3>








































<table><thead><tr><th>ç»„ä»¶</th><th>æ¯”å–»</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td><code>ChatPromptTemplate</code></td><td>ä¼šè®®è®®ç¨‹æ¨¡æ¿</td><td>è§„å®šå¦‚ä½•ç»„ç»‡ä¸Šä¸‹æ–‡</td></tr><tr><td><code>{history}</code>Â å ä½ç¬¦</td><td>â€œä¸Šæ¬¡ä¼šè®®çºªè¦â€ä½ç½®</td><td>å†å²æ¶ˆæ¯æ’å…¥ç‚¹</td></tr><tr><td><code>InMemoryChatMessageHistory</code></td><td>ç¬”è®°æœ¬</td><td>å­˜å‚¨å¯¹è¯è®°å½•</td></tr><tr><td><code>getMessageHistory</code></td><td>æ–‡ä»¶æŸœç®¡ç†å‘˜</td><td>æ ¹æ®ç”¨æˆ· ID åˆ†å‘ç¬”è®°æœ¬</td></tr><tr><td><code>RunnableWithMessageHistory</code></td><td>æ™ºèƒ½ç§˜ä¹¦</td><td>è‡ªåŠ¨è¯»å†™ç¬”è®°ã€ç»„è£…è¯·æ±‚</td></tr><tr><td><code>sessionId</code></td><td>ç”¨æˆ·æ ‡ç­¾</td><td>åŒºåˆ†ä¸åŒç”¨æˆ·çš„ç¬”è®°æœ¬</td></tr></tbody></table>
<hr/>
<p>å¤§æ¨¡å‹æœ¬èº«æ²¡æœ‰è®°å¿†ï¼Œå°±åƒä¸€ä½æ‰åæ¨ªæº¢å´å¥å¿˜çš„æ¼”è®²è€…â€”â€”æ¯æ¬¡ç™»å°éƒ½åƒåˆæ¬¡è§é¢ã€‚<br/>
è€Œ LangChain å¹¶æ²¡æœ‰æ”¹å˜æ¨¡å‹çš„æœ¬è´¨ï¼Œè€Œæ˜¯<strong>åœ¨å®ƒèº«è¾¹æ­å»ºäº†ä¸€å¥—å®Œæ•´çš„è®°å¿†æ”¯æŒç³»ç»Ÿ</strong>ï¼š</p>
<ul>
<li><strong>ç”¨æ¨¡æ¿å®šä¹‰è®°å¿†æ ¼å¼</strong>ï¼ˆPromptï¼‰</li>
<li><strong>ç”¨å­˜å‚¨æ‰¿è½½è®°å¿†å†…å®¹</strong>ï¼ˆMessageHistoryï¼‰</li>
<li><strong>ç”¨ä¼šè¯æœºåˆ¶éš”ç¦»è®°å¿†è¾¹ç•Œ</strong>ï¼ˆsessionIdï¼‰</li>
<li><strong>ç”¨è‡ªåŠ¨åŒ…è£…å®ç°è®°å¿†æµè½¬</strong>ï¼ˆRunnableWithMessageHistoryï¼‰</li>
</ul>
<p>æ›´é‡è¦çš„æ˜¯ï¼Œè¿™å¥—ç³»ç»Ÿæ˜¯<strong>å¯æ’æ‹”ã€å¯æ‰©å±•ã€å¯æ§åˆ¶çš„</strong>ï¼š<br/>
ä½ å¯ä»¥è½»æ¾æ›¿æ¢å†…å­˜å­˜å‚¨ä¸º Redisï¼Œå¯ä»¥åŠ å…¥è‡ªåŠ¨æ‘˜è¦å‹ç¼©é•¿å¯¹è¯ï¼Œä¹Ÿå¯ä»¥è®¾å®šæœ€å¤§è½®æ•°é˜²æ­¢ Token è†¨èƒ€ã€‚</p>
<blockquote>
<p><strong>çœŸæ­£çš„â€œAI è®°å¿†â€ï¼Œä»æ¥ä¸æ˜¯æ¨¡å‹è‡ªå·±è®°ä½ä»€ä¹ˆï¼Œè€Œæ˜¯æˆ‘ä»¬ä¸ºå®ƒæ„å»ºäº†ä¸€ä¸ªæ°åˆ°å¥½å¤„çš„è®°å¿†ç¯å¢ƒã€‚</strong><br/>
LangChain æä¾›çš„ï¼Œæ­£æ˜¯è¿™æ ·ä¸€å¥—è®©è®°å¿†å˜å¾—ç®€å•ã€å¯é åˆé«˜æ•ˆçš„å·¥ç¨‹åŒ–æ–¹æ¡ˆã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Doris Catalog å·²ä¸Šçº¿ï¼æ€§èƒ½æå‡ 200xï¼Œå…¨é¢ä¼˜äº JDBC Catalogï¼Œè·¨é›†ç¾¤æŸ¥è¯¢è¿ˆå…¥é«˜æ€§èƒ½åˆ†ææ—¶ä»£]]></title>    <link>https://juejin.cn/post/7587995707165982739</link>    <guid>https://juejin.cn/post/7587995707165982739</guid>    <pubDate>2025-12-26T13:05:43.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587995707165982739" data-draft-id="7588007285546156038" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Doris Catalog å·²ä¸Šçº¿ï¼æ€§èƒ½æå‡ 200xï¼Œå…¨é¢ä¼˜äº JDBC Catalogï¼Œè·¨é›†ç¾¤æŸ¥è¯¢è¿ˆå…¥é«˜æ€§èƒ½åˆ†ææ—¶ä»£"/> <meta itemprop="keywords" content="æ•°æ®åº“,Apache,æ•°æ®åˆ†æ"/> <meta itemprop="datePublished" content="2025-12-26T13:05:43.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="SelectDB"/> <meta itemprop="url" content="https://juejin.cn/user/3189021726222904"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Doris Catalog å·²ä¸Šçº¿ï¼æ€§èƒ½æå‡ 200xï¼Œå…¨é¢ä¼˜äº JDBC Catalogï¼Œè·¨é›†ç¾¤æŸ¥è¯¢è¿ˆå…¥é«˜æ€§èƒ½åˆ†ææ—¶ä»£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3189021726222904/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    SelectDB
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-26T13:05:43.000Z" title="Fri Dec 26 2025 13:05:43 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><strong>â€œç»Ÿä¸€â€æ˜¯ Apache Doris é•¿æœŸä»¥æ¥ç§‰æŒçš„è®¾è®¡ç†å¿µä¹‹ä¸€</strong>ã€‚åœ¨è¿™ä¸€ç†å¿µæŒ‡å¼•ä¸‹ï¼Œæ„å»ºå®Œå–„çš„ Catalog ç”Ÿæ€æ˜¯å®ç°å¼‚æ„æ•°æ®æºç»Ÿä¸€æŸ¥è¯¢åˆ†æçš„å…³é”®ã€‚ç›®å‰ï¼ŒDoris å·²æ”¯æŒ Icebergã€Paimonã€Hudi ç­‰æ•°æ®æ¹– Catalogï¼Œä»¥åŠ JDBC Catalogï¼Œç”¨æˆ·æ— éœ€è¿ç§»æ•°æ®ï¼Œå³å¯å¯¹ä¸åŒæ•°æ®æ¹–å’Œä¼ ç»Ÿæ•°æ®åº“è¿›è¡Œè”é‚¦æŸ¥è¯¢åˆ†æã€‚</p>
<p><strong>æœ¬æ–‡èšç„¦ Doris å¤šé›†ç¾¤é—´çš„æŸ¥è¯¢åˆ†æ</strong>ã€‚å®ç°è·¨ Doris é›†ç¾¤çš„åˆ†æé€šæŸ¥éœ€è¦é€šè¿‡ JDBC Catalogï¼Œä½†è¯¥æ–¹å¼å­˜åœ¨æ˜æ˜¾çŸ­æ¿ï¼Œæ¯”å¦‚åè®®å¼€é”€è¾ƒå¤§ã€æ— æ³•å¤ç”¨ Doris æŸ¥è¯¢ä¼˜åŒ–ç­–ç•¥ã€æŸ¥è¯¢æ€§èƒ½å—é™ç­‰ç­‰ã€‚åŒæ—¶ï¼Œéšç€ç”Ÿäº§ç¯å¢ƒä¸­å¤š Doris é›†ç¾¤éƒ¨ç½²æ„ˆåŠ æ™®éï¼Œè·¨é›†ç¾¤çš„æ•°æ®è”åŠ¨åˆ†æéœ€æ±‚ä¹Ÿæ—¥ç›Šå¢é•¿ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼ŒJDBC Catalog å¾ˆéš¾æ»¡è¶³ç”¨æˆ·çš„æ€§èƒ½è¦æ±‚ã€‚</p>
<p>ä¸ºæ­¤ï¼Œ<strong>Apache Doris 4.0.2 ç‰ˆæœ¬æ¨å‡ºé‡ç£…ç‰¹æ€§ï¼šDoris Catalogã€‚è¯¥åŠŸèƒ½ä¸“ä¸ºè·¨ Doris é›†ç¾¤è”é‚¦åˆ†æè®¾è®¡ï¼Œæ”¯æŒé€šè¿‡ Arrow Flight å’Œè™šæ‹Ÿé›†ç¾¤ä¸¤ç§æ¨¡å¼ï¼Œè¿›è¡Œæ›´é«˜æ•ˆã€æ›´è´´åˆåŸç”Ÿä¼˜åŒ–çš„è·¨é›†ç¾¤æŸ¥è¯¢</strong>ã€‚</p>
<blockquote>
<p>ç‰¹æ­¤è¯´æ˜ï¼šDoris Catalog å½“å‰ä¸ºå®éªŒæ€§ç‰¹ï¼Œæ¬¢è¿å¤§å®¶ä½“éªŒå¹¶åé¦ˆï¼Œæˆ‘ä»¬å°†æŒç»­ä¼˜åŒ–</p>
</blockquote>
<h2 data-id="heading-0">Doris Catalog vs. JDBC Catalog</h2>
<p>JDBC Catalog ä¸»è¦å€ŸåŠ© MySQL å…¼å®¹çš„ JDBC åè®®è®¿é—®å…¶ä»– Doris é›†ç¾¤æ•°æ®ã€‚ç”±å‰æ–‡å¯çŸ¥ï¼Œè¯¥æ–¹å¼åœ¨è·¨é›†ç¾¤å¤§æ•°æ®é‡äº¤äº’æ—¶æ€§èƒ½å—é™ï¼Œéš¾ä»¥æ»¡è¶³è”é‚¦åˆ†æé«˜ååä¸ä½å»¶è¿Ÿçš„æ€§èƒ½è¦æ±‚ã€‚ä¸åŒäº JDBC Catalog çš„äº¤äº’æ–¹å¼ï¼Œ Doris Catalog é€šè¿‡ Arrow Flight æˆ–è™šæ‹Ÿé›†ç¾¤è¿™ä¸¤ç§æ–¹å¼ï¼Œèƒ½å¤Ÿç›´æ¥ã€é«˜æ•ˆçš„è®¿é—®å…¶ä»– Doris é›†ç¾¤ï¼Œè¿›è¡Œå¤šé›†ç¾¤è”é‚¦åˆ†æã€‚</p>
<h3 data-id="heading-1">01 åŠŸèƒ½å¯¹æ¯”</h3>
<p>é‚£ä¹ˆï¼Œä¸ JDBC Catalog ç›¸æ¯”ï¼ŒDoris Catalog åˆ°åº•å…·å¤‡å“ªäº›èƒ½åŠ›ä¼˜åŠ¿å‘¢ï¼Ÿ</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c18adcc97471440bbf5e541102ba0f64~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2VsZWN0REI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767359142&amp;x-signature=MUtZPR6%2BDE%2B%2BnROIZzX5ZP5A62U%3D" alt="01 åŠŸèƒ½å¯¹æ¯”.png" loading="lazy"/></p>
<h3 data-id="heading-2">02 æ€§èƒ½å¯¹æ¯”</h3>
<p>ä¸ºäº†æ›´ç›´è§‚åœ°å±•ç¤ºäºŒè€…åœ¨å®é™…æŸ¥è¯¢ä¸­çš„è¡¨ç°ï¼Œæˆ‘ä»¬åŸºäºè·¨é›†ç¾¤çš„ TPC-DS æŸ¥è¯¢åœºæ™¯ï¼Œå¯¹æ¯”äº† Doris Catalogï¼ˆä¸¤ç§è¿æ¥æ¨¡å¼ï¼‰ ä¸ JDBC Catalog çš„æ‰§è¡Œæ€§èƒ½ã€‚ä»¥ä¸‹æ˜¯æµ‹è¯•ç»“æœæ¦‚è¦ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b1972ee200b84c7580940520744884fb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2VsZWN0REI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767359142&amp;x-signature=d97A7mv6uDWVmW5qkoZSQZkxPZw%3D" alt="02 æ€§èƒ½å¯¹æ¯”.png" loading="lazy"/></p>
<p>ç»“æœæ˜¾ç¤ºï¼Œåœ¨æ¶‰åŠèšåˆã€Join ç­‰å¤æ‚æŸ¥è¯¢åœºæ™¯ä¸‹ï¼ŒDoris Catalog ç›¸æ¯” JDBC Catalog å±•ç°å‡ºä¸åŒç¨‹åº¦çš„æ€§èƒ½ä¼˜åŠ¿ã€‚å…¶ä¸­ï¼Œåœ¨å•è¡¨èšåˆæŸ¥è¯¢åœºæ™¯ä¸‹ä¼˜åŠ¿å°¤ä¸ºçªå‡ºï¼š<strong>Doris Catalogï¼ˆè™šæ‹Ÿé›†ç¾¤ï¼‰çš„æŸ¥è¯¢è€—æ—¶ä»…ä¸º 0.21 ç§’ï¼Œç›¸è¾ƒäº JDBC Catalogï¼Œé€Ÿåº¦æå‡è¶…è¿‡ 200 å€</strong>ã€‚</p>
<p><strong>å…·ä½“æµ‹è¯•å¦‚ä¸‹</strong>ï¼š</p>
<ol>
<li><strong>åœ¨å•è¡¨ç®€å•æŸ¥è¯¢ï¼ˆç›´æ¥æŸ¥è¯¢è¿œç«¯é›†ç¾¤ï¼‰æ¨¡å¼ä¸‹</strong>ï¼šDoris Catalog ä¸ JDBC Catalog åŸºæœ¬æŒå¹³ã€‚</li>
</ol>
<pre><code class="hljs language-SQL" lang="SQL"><span class="hljs-keyword">SELECT</span>
    ss_sold_date_sk,
    ss_store_sk,
    ss_item_sk,
    ss_ticket_number,
    ss_quantity,
    ss_sales_price,
    ss_ext_sales_price,
    ss_net_profit
<span class="hljs-keyword">FROM</span> jdbc_mode.tpcds100.store_sales
<span class="hljs-keyword">WHERE</span> ss_sold_date_sk <span class="hljs-operator">=</span> <span class="hljs-number">2450816</span>
  <span class="hljs-keyword">AND</span> ss_store_sk <span class="hljs-operator">=</span> <span class="hljs-number">10</span>
  <span class="hljs-keyword">AND</span> ss_quantity <span class="hljs-keyword">BETWEEN</span> <span class="hljs-number">1</span> <span class="hljs-keyword">AND</span> <span class="hljs-number">3</span>
LIMIT <span class="hljs-number">100</span>;
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6b3c9aa2e3774661b9df4ab411b46748~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2VsZWN0REI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767359142&amp;x-signature=M3JT4s0hKi4EBzO0VTkhGq8HzHI%3D" alt="02 æ€§èƒ½å¯¹æ¯”-1.png" loading="lazy"/></p>
<ol>
<li><strong>åœ¨å•è¡¨èšåˆæŸ¥è¯¢ï¼ˆç›´æ¥æŸ¥è¯¢è¿œç«¯é›†ç¾¤ï¼‰æ¨¡å¼ä¸‹</strong>ï¼šDoris Catalog ä¸¤ç§æ¨¡å¼å‡ä¼˜äº JDBC Catalogï¼ŒDoris Catalogï¼ˆè™šæ‹Ÿé›†ç¾¤ï¼‰çš„æŸ¥è¯¢è€—æ—¶ä»…ä¸º 0.21 ç§’ï¼Œç›¸è¾ƒäº JDBC Catalogï¼Œ<strong>é€Ÿåº¦æå‡è¶…è¿‡ 200 å€</strong>ã€‚</li>
</ol>
<pre><code class="hljs language-SQL" lang="SQL"><span class="hljs-keyword">SELECT</span>
    ss_sold_date_sk,
    ss_store_sk,
    <span class="hljs-built_in">SUM</span>(ss_ext_sales_price) <span class="hljs-keyword">AS</span> total_sales,
    <span class="hljs-built_in">SUM</span>(ss_net_profit)      <span class="hljs-keyword">AS</span> total_profit,
    <span class="hljs-built_in">COUNT</span>(<span class="hljs-operator">*</span>)                <span class="hljs-keyword">AS</span> txn_cnt
<span class="hljs-keyword">FROM</span> tpcds100.store_sales
<span class="hljs-keyword">WHERE</span> ss_sold_date_sk <span class="hljs-keyword">BETWEEN</span> <span class="hljs-number">2450816</span> <span class="hljs-keyword">AND</span> <span class="hljs-number">2451179</span>
<span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span>
    ss_sold_date_sk,
    ss_store_sk
<span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span>
    ss_sold_date_sk,
    ss_store_sk
LIMIT <span class="hljs-number">100</span>;
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6205b5f642dc466aae9dfc60356bbf21~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2VsZWN0REI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767359142&amp;x-signature=zQb2Byi1qyWdAGeWd7jHr6pRGnM%3D" alt="02 æ€§èƒ½å¯¹æ¯”-2.png" loading="lazy"/></p>
<ol>
<li><strong>åœ¨å¤šè¡¨å…³è”æŸ¥è¯¢ï¼ˆä¸¤ä¸ªå¤§è¡¨åˆ†åˆ«å­˜å‚¨åœ¨æœ¬åœ°å’Œè¿œç«¯é›†ç¾¤ï¼Œè¿›è¡Œå…³è”æŸ¥è¯¢ï¼‰æ¨¡å¼ä¸‹</strong>ï¼šDoris Catalog ä¸¤ç§æ¨¡å¼å‡ä¼˜äº JDBC Catalogï¼Œç›¸è¾ƒäº JDBC Catalogï¼Œ<strong>é€Ÿåº¦æå‡çº¦ 42%</strong>ã€‚</li>
</ol>
<pre><code class="hljs language-SQL" lang="SQL"><span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">count</span>(ss_item_sk), <span class="hljs-built_in">count</span>(store_sales_amt), <span class="hljs-built_in">count</span>(catalog_sales_amt) <span class="hljs-keyword">FROM</span>
(
<span class="hljs-keyword">SELECT</span>
    ss.ss_item_sk <span class="hljs-keyword">as</span> ss_item_sk,
    <span class="hljs-built_in">SUM</span>(ss.ss_ext_sales_price) <span class="hljs-keyword">AS</span> store_sales_amt,
    <span class="hljs-built_in">SUM</span>(cs.cs_ext_sales_price) <span class="hljs-keyword">AS</span> catalog_sales_amt
<span class="hljs-keyword">FROM</span> internal.tpcds100.store_sales ss
<span class="hljs-keyword">JOIN</span> external.tpcds100.catalog_sales cs
    <span class="hljs-keyword">ON</span> ss.ss_item_sk <span class="hljs-operator">=</span> cs.cs_item_sk
<span class="hljs-keyword">WHERE</span> ss.ss_sold_date_sk <span class="hljs-keyword">BETWEEN</span> <span class="hljs-number">2450815</span> <span class="hljs-keyword">AND</span> <span class="hljs-number">2451079</span>
  <span class="hljs-keyword">AND</span> cs.cs_sold_date_sk <span class="hljs-keyword">BETWEEN</span> <span class="hljs-number">2450815</span> <span class="hljs-keyword">AND</span> <span class="hljs-number">2451079</span>
<span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> ss.ss_item_sk) x;
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/35582afa7da54ecfa4f7d0d432e60b0a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2VsZWN0REI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767359142&amp;x-signature=slX%2FDCDFyLUOiGJw9JnMOFaGTrw%3D" alt="02 æ€§èƒ½å¯¹æ¯”-3.png" loading="lazy"/></p>
<h3 data-id="heading-3">03 æ–¹æ¡ˆé€‰æ‹©</h3>
<p>ç”±ä¸Šå¯çŸ¥ï¼Œä¸åŒçš„æŸ¥è¯¢åœºæ™¯ä¸­ï¼Œéœ€è¦é€‰æ‹©é€‚åˆçš„çš„è®¿é—®æ¨¡å¼ï¼Œä»¥è·å–æœ€ä½³çš„æŸ¥è¯¢æ€§èƒ½ï¼š</p>
<ul>
<li>å¯¹äºå¤æ‚ Join/Agg æŸ¥è¯¢æˆ–ä¾èµ– Doris å†…è¡¨ä¼˜åŒ–ç‰¹æ€§æ—¶ï¼Œä¼˜å…ˆé€‰æ‹© Doris Catalog <strong>è™šæ‹Ÿé›†ç¾¤æ¨¡å¼</strong>ã€‚</li>
<li>å¯¹äºç®€å•å•è¡¨æŸ¥è¯¢ã€UNION æŸ¥è¯¢ã€è¿œç«¯é›†ç¾¤è§„æ¨¡å¤§ä¸”æ— éœ€å¤æ‚ Join ä¼˜åŒ–æˆ– Doris é›†ç¾¤ç‰ˆæœ¬ä¸ä¸€è‡´ï¼Œä¼˜å…ˆé€‰æ‹© Doris Catalog  <strong>Arrow Flight æ¨¡å¼</strong>ã€‚</li>
</ul>
<h2 data-id="heading-4">Doris Catalog æ ¸å¿ƒè®¾è®¡</h2>
<p><strong>Doris Catalog æœ¬è´¨æ˜¯è·¨é›†ç¾¤è®¿é—®çš„â€œä¸­é—´ä»£ç†â€ï¼Œæ ¸å¿ƒèŒè´£åŒ…æ‹¬</strong>ï¼š</p>
<ul>
<li>å…ƒæ•°æ®åŒæ­¥ï¼šé€šè¿‡ HTTP åè®®ä»è¿œç«¯ Doris é›†ç¾¤ FE æ‹‰å–è¡¨ç»“æ„ã€åˆ†åŒºã€å‰¯æœ¬ã€ Tablet ä½ç½®ç­‰å…ƒæ•°æ®ï¼›</li>
<li>æ‰§è¡Œè®¡åˆ’ç”Ÿæˆï¼šæ ¹æ®è®¿é—®æ¨¡å¼ï¼Œå°†ç”¨æˆ·æŸ¥è¯¢è½¬æ¢ä¸ºé€‚é…è¿œç«¯é›†ç¾¤çš„æ‰§è¡Œè®¡åˆ’ï¼›</li>
<li>æ•°æ®è·¯ç”±ä¸ä¼ è¾“ï¼šåè°ƒæœ¬åœ° BE ä¸è¿œç«¯ BE è¿›è¡Œæ•°æ®ä¼ è¾“ï¼Œæ”¯æŒå¹¶è¡Œæ‹‰å–ä¸åˆ†ç‰‡å¤„ç†ï¼›</li>
<li>ç»“æœèšåˆï¼šå°†è¿œç«¯è¿”å›çš„æ•°æ®èšåˆåï¼Œè¿”å›ç»™ç”¨æˆ·æˆ–ä¸Šå±‚åº”ç”¨ã€‚</li>
</ul>
<p><strong>Doris Catalog æ”¯æŒ Arrow Flight å’Œ è™šæ‹Ÿé›†ç¾¤ä¸¤ç§è®¿é—®æ¨¡å¼ã€‚åœ¨äº†è§£å…·ä½“å®ç°ä¹‹å‰ï¼Œå…ˆäº†è§£ä¸¤ç§æ¨¡å¼çš„åŒºåˆ«</strong>ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5d8cd0a87f1740cf81bc6ae8e61337b8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2VsZWN0REI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767359142&amp;x-signature=PK%2FtLLmgPmYUsTnu4ss7LLAS104%3D" alt=" Doris Catalog æ ¸å¿ƒè®¾è®¡.png" loading="lazy"/></p>
<h3 data-id="heading-5">01 Arrow Flight æ¨¡å¼</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0fb7e021c0fb418f994707bf90820aa8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2VsZWN0REI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767359142&amp;x-signature=NhqrakrTkJRwbZEV7L7Jez2KAEQ%3D" alt="01 Arrow Flight æ¨¡å¼.png" loading="lazy"/></p>
<p>è¯¥æ¨¡å¼çš„å·¥ä½œæµç¨‹å¦‚ä¸‹ï¼ˆå‡è®¾æœ¬åœ°é›†ç¾¤ä¸º ClusterAï¼Œè¿œç«¯é›†ç¾¤ä¸º ClusterBï¼‰ï¼š</p>
<ul>
<li>æŸ¥è¯¢è§„åˆ’ï¼šClusterA çš„ FE èŠ‚ç‚¹å…ˆè¿›è¡Œå®Œæ•´çš„æŸ¥è¯¢è§„åˆ’ï¼Œé’ˆå¯¹å­˜å‚¨åœ¨ ClusterB ä¸­çš„è¡¨ï¼Œç”Ÿæˆ <code>RemoteDorisScanNode</code>èŠ‚ç‚¹ã€‚<code>RemoteDorisScanNode</code> ä¼šç”Ÿæˆä¸€æ¡åº”ç”¨è°“è¯ä¸‹æ¨è§„åˆ™åçš„å•è¡¨æŸ¥è¯¢ SQLï¼Œé€šè¿‡ HTTP åè®®å‘ ClusterB çš„ FE èŠ‚ç‚¹å‘é€å¹¶æ‰§è¡Œè¿™æ¡ Arrow Flight SQLã€‚</li>
<li>æŸ¥è¯¢è®¡åˆ’æ‰§è¡Œï¼šClusterA çš„ FE èŠ‚ç‚¹å°†ç‰©ç†æ‰§è¡Œè®¡åˆ’å‘é€ç»™ ClusterA çš„ BE èŠ‚ç‚¹ï¼Œå¹¶å‘ŠçŸ¥ BE èŠ‚ç‚¹ Arrow Flight çš„æ•°æ®æµè·å–ä½ç½®ã€‚</li>
<li>æ•°æ®æŸ¥è¯¢ä¸ä¼ è¾“ï¼šClusterA çš„ BE èŠ‚ç‚¹çš„ Scan Node é€šè¿‡ Arrow Flight åè®®ç›´æ¥ä» ClusterB çš„ BE èŠ‚ç‚¹è·å– Arrow Flight SQL çš„æ‰§è¡Œç»“æœã€‚ç„¶ååœ¨ ClusterA ä¸­æ‰§è¡Œ Joinã€Agg ç­‰å…¶ä»–ç®—å­ï¼Œå¹¶è¿”å›æœ€ç»ˆç»“æœã€‚</li>
</ul>
<h3 data-id="heading-6">02 è™šæ‹Ÿé›†ç¾¤æ¨¡å¼</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fc8573df4de34f2fa7cb12a2240bc248~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2VsZWN0REI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767359142&amp;x-signature=%2FynLrnht%2Fh3gGdBt%2FeiW5wQGBss%3D" alt="02 è™šæ‹Ÿé›†ç¾¤æ¨¡å¼.png" loading="lazy"/></p>
<p>è¯¥æ¨¡å¼çš„å·¥ä½œæµç¨‹å¦‚ä¸‹ï¼ˆå‡è®¾æœ¬åœ°é›†ç¾¤ä¸º ClusterAï¼Œè¿œç«¯é›†ç¾¤ä¸º ClusterBï¼‰ï¼š</p>
<ul>
<li>å…ƒæ•°æ®åŒæ­¥ï¼šClusterA çš„ FE èŠ‚ç‚¹é€šè¿‡ HTTP åè®®åŒæ­¥ ClusterB ä¸­å®Œæ•´çš„å…ƒæ•°æ®ï¼ŒåŒ…æ‹¬è¡¨ç»“æ„ã€åˆ†åŒºã€å‰¯æœ¬ã€Tablet ä½ç½®ç­‰ã€‚</li>
<li>æŸ¥è¯¢è§„åˆ’ï¼šClusterA çš„  FE èŠ‚ç‚¹å°† ClusterB çš„ BE èŠ‚ç‚¹è§†ä¸ºâ€œè™šæ‹Ÿ BEâ€ï¼Œç”Ÿæˆå…¨å±€ç»Ÿä¸€çš„æ‰§è¡Œè®¡åˆ’ï¼ˆä¸å•é›†ç¾¤æŸ¥è¯¢é€»è¾‘ä¸€è‡´ï¼‰ã€‚</li>
<li>æŸ¥è¯¢è®¡åˆ’æ‰§è¡Œï¼šæ‰§è¡Œè®¡åˆ’ä¼šå°† ClusterA ä¸ ClusterB çš„ BE èŠ‚ç‚¹è§†ä½œä¸€ä¸ªç»Ÿä¸€ BE é›†ç¾¤ï¼Œå¹¶åœ¨å…¶ä¸Šæ‰§è¡ŒæŸ¥è¯¢è®¡åˆ’ã€‚å› æ­¤ï¼Œå„ç±»ç®—å­ä¼šåŒæ—¶åœ¨ ClusterA å’Œ ClusterB çš„ BE èŠ‚ç‚¹ä¸­æ‰§è¡Œã€‚</li>
<li>æ•°æ®æŸ¥è¯¢ä¸ä¼ è¾“ï¼šClusterA ä¸ ClusterB çš„ BE èŠ‚ç‚¹é—´ä½¿ç”¨å†…éƒ¨é€šä¿¡åè®®è¿›è¡Œæ•°æ®äº¤äº’ã€‚</li>
</ul>
<h2 data-id="heading-7">å®æˆ˜æ¼”ç¤ºï¼š10 åˆ†é’Ÿå®Œæˆè·¨é›†ç¾¤è®¢å•å±¥çº¦ç‡åˆ†æ</h2>
<p>å›å½’åˆ°å®é™…ä½¿ç”¨ä¸­ï¼ŒDoris Catalog å¯æœ‰æ•ˆæ”¯æ’‘ä»¥ä¸‹äº”å¤§æ ¸å¿ƒä¸šåŠ¡åœºæ™¯ï¼Œç²¾å‡†è§£å†³è·¨é›†ç¾¤åˆ†æç—›ç‚¹ï¼š</p>
<ol>
<li><strong>å¤šä¸šåŠ¡é›†ç¾¤è”åˆåˆ†æ</strong>ï¼šå¦‚åœ¨ç”µå•†åœºæ™¯ä¸­ï¼Œäº¤æ˜“é›†ç¾¤å­˜å‚¨è®¢å•æ•°æ®ã€ç‰©æµé›†ç¾¤å­˜å‚¨å±¥çº¦æ•°æ®ï¼Œé€šè¿‡ Doris Catalog ç›´æ¥å…³è”è®¡ç®—â€œè®¢å•å±¥çº¦ç‡â€â€œç‰©æµæ—¶æ•ˆâ€ç­‰æ ¸å¿ƒæŒ‡æ ‡ï¼Œæ— éœ€è·¨é›†ç¾¤æ•°æ®åŒæ­¥ã€‚</li>
<li><strong>åœ°åŸŸåˆ†å¸ƒå¼é›†ç¾¤å…¨å±€ç»Ÿè®¡</strong>ï¼šå¦‚é›¶å”®ä¼ä¸šåœ¨å¤šåœ°åŸŸéƒ¨ç½² Doris é›†ç¾¤ï¼Œé€šè¿‡ Doris Catalog ä¸€ç«™å¼æ±‡æ€»å„åŒºåŸŸé”€å”®æ•°æ®ï¼Œå®æ—¶è®¡ç®—å…¨å›½æ€»é”€å”®é¢ã€åŒºåŸŸå æ¯”ã€ç”¨æˆ·æ´»è·ƒåº¦ç­‰å…¨å±€æŒ‡æ ‡ã€‚</li>
<li><strong>å®æ—¶æ•°æ®è·¨é›†ç¾¤å…³è”æŸ¥è¯¢</strong>ï¼šå¦‚ç”¨æˆ·è¡Œä¸ºåˆ†æåœºæ™¯ä¸­ï¼Œé€šè¿‡ Doris Catalog å®æ—¶å…³è”ç”¨æˆ·å®æ—¶è¡Œä¸ºé›†ç¾¤ï¼ˆç‚¹å‡»ã€æµè§ˆç­‰ï¼‰ä¸é•¿æœŸç”¨æˆ·ç”»åƒé›†ç¾¤ï¼Œæ”¯æ’‘ä¸ªæ€§åŒ–æ¨èã€ç²¾å‡†è¥é”€ç­‰å®æ—¶å†³ç­–åœºæ™¯ã€‚</li>
<li><strong>è·¨åœ°åŸŸè¶…å¤§è§„åˆ’é›†ç¾¤åˆ†æ²»</strong>ï¼šä¸åŒåœ°åŸŸçš„åˆ†å…¬å¸é‡‡ç”¨ç›¸åŒçš„ä¸šåŠ¡æ¨¡å¼éƒ¨ç½²å’Œä½¿ç”¨ Doris é›†ç¾¤ã€‚æ¯å…¬å¸é€šè¿‡ Doris Catalog å®Œæˆå¯¹å…¨åœ°åŸŸå¤šé›†ç¾¤çš„é›†ä¸­è®¿é—®ï¼Œå®ç°è¶…å¤§è§„æ¨¡ä¸šåŠ¡æ•°æ®ç®¡ç†ã€‚</li>
<li><strong>è·¨é›†ç¾¤æ•°æ®è¿ç§»éªŒè¯ä¸å¯¹æ¯”åˆ†æ</strong>ï¼šæ–°æ—§é›†ç¾¤è¿ç§»è¿‡ç¨‹ä¸­ï¼Œé€šè¿‡ Doris Catalog ç›´æ¥å¯¹æ¯”ä¸¤ç«¯æ•°æ®ä¸€è‡´æ€§ï¼Œæ— éœ€å¯¼å‡ºå¯¼å…¥å·¥å…·ï¼Œç®€åŒ–è¿ç§»éªŒè¯æµç¨‹ï¼Œé™ä½æ•°æ®ä¸¢å¤±é£é™©ã€‚</li>
</ol>
<p><strong>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ä»¥å¸¸è§åœºæ™¯ 1ï¼šå¤šä¸šåŠ¡é›†ç¾¤è”åˆåˆ†æä¸ºä¾‹ï¼Œå®æˆ˜æ¼”ç¤ºå¦‚ä½•åœ¨ 10 åˆ†é’Ÿå®Œæˆè·¨é›†ç¾¤è®¢å•å±¥çº¦ç‡åˆ†æ</strong>ã€‚</p>
<ol>
<li><strong>èƒŒæ™¯ä»‹ç»</strong>
ç°æœ‰ä¸¤ä¸ª Doris é›†ç¾¤ï¼Œéœ€è·¨é›†ç¾¤å…³è”è®¡ç®—æ ¸å¿ƒä¸šåŠ¡æŒ‡æ ‡ï¼š</li>
</ol>
<ul>
<li>æœ¬åœ°é›†ç¾¤ï¼ˆTrading-Clusterï¼‰ï¼šå­˜å‚¨è®¢å•åŸºç¡€æ•°æ®ï¼Œåº“è¡¨ä¸º <code>trading_db.order_info</code>ï¼ˆè®¢å•è¡¨ï¼‰ï¼›</li>
<li>è¿œç«¯é›†ç¾¤ï¼ˆLogistics-Clusterï¼‰ï¼šå­˜å‚¨ç‰©æµå±¥çº¦æ•°æ®ï¼Œåº“è¡¨ä¸º <code>logistics_db.delivery_info</code>ï¼ˆå±¥çº¦è¡¨ï¼‰ï¼›</li>
<li>ä¸šåŠ¡éœ€æ±‚ï¼šè®¡ç®—è¿‘ 7 å¤©å„è®¢å•ç±»å‹çš„å±¥çº¦ç‡ï¼ˆå·²å±¥çº¦è®¢å•æ•°/æ€»è®¢å•æ•°ï¼‰ï¼Œæ”¯æ’‘è¿è¥å†³ç­–ã€‚</li>
</ul>
<ol start="2">
<li><strong>è¡¨ç»“æ„å®šä¹‰</strong></li>
</ol>
<ul>
<li>æœ¬åœ°è®¢å•è¡¨ <code>trading_db.order_info</code>ï¼š
<ul>
<li>
<pre><code class="hljs language-SQL" lang="SQL"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> trading_db.order_info (
    order_id STRING COMMENT <span class="hljs-string">'è®¢å•ID'</span>,
    order_type STRING COMMENT <span class="hljs-string">'è®¢å•ç±»å‹ï¼šå®ç‰©è®¢å•/è™šæ‹Ÿè®¢å•'</span>,
    create_time DATETIME COMMENT <span class="hljs-string">'åˆ›å»ºæ—¶é—´'</span>,
    amount <span class="hljs-type">DECIMAL</span>(<span class="hljs-number">10</span>,<span class="hljs-number">2</span>) COMMENT <span class="hljs-string">'è®¢å•é‡‘é¢'</span>
) ENGINE<span class="hljs-operator">=</span>OLAP
DUPLICATE KEY(order_id)
<span class="hljs-keyword">PARTITION</span> <span class="hljs-keyword">BY</span> <span class="hljs-keyword">RANGE</span>(create_time) (
    <span class="hljs-keyword">PARTITION</span> p202511 <span class="hljs-keyword">VALUES</span> [(<span class="hljs-string">'2025-11-01 00:00:00'</span>), (<span class="hljs-string">'2025-12-01 00:00:00'</span>))
)
DISTRIBUTED <span class="hljs-keyword">BY</span> HASH(order_id) BUCKETS <span class="hljs-number">10</span>;
</code></pre>
</li>
</ul>
</li>
<li>è¿œç«¯å±¥çº¦è¡¨ <code>logistics_db.delivery_info</code>ï¼š
<ul>
<li>
<pre><code class="hljs language-SQL" lang="SQL"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> logistics_db.delivery_info (
    order_id STRING COMMENT <span class="hljs-string">'è®¢å•ID'</span>,
    delivery_status TINYINT COMMENT <span class="hljs-string">'å±¥çº¦çŠ¶æ€ï¼š1-å·²å±¥çº¦ï¼Œ0-æœªå±¥çº¦'</span>,
    delivery_time DATETIME COMMENT <span class="hljs-string">'å±¥çº¦æ—¶é—´'</span>
) ENGINE<span class="hljs-operator">=</span>OLAP
DUPLICATE KEY(order_id)
<span class="hljs-keyword">PARTITION</span> <span class="hljs-keyword">BY</span> <span class="hljs-keyword">RANGE</span>(delivery_time) (
    <span class="hljs-keyword">PARTITION</span> p202511 <span class="hljs-keyword">VALUES</span> [(<span class="hljs-string">'2025-11-01 00:00:00'</span>), (<span class="hljs-string">'2025-12-01 00:00:00'</span>))
)
DISTRIBUTED <span class="hljs-keyword">BY</span> HASH(order_id) BUCKETS <span class="hljs-number">10</span>;
</code></pre>
</li>
</ul>
</li>
</ul>
<ol start="3">
<li>
<p><strong>æ•°æ®å‡†å¤‡</strong>
å‘ä¸¤å¼ è¡¨åˆ†åˆ«æ’å…¥æµ‹è¯•æ•°æ®ï¼ˆæœ¬åœ°è¡¨ 100 ä¸‡è¡Œè®¢å•æ•°æ®ï¼Œè¿œç«¯è¡¨ 80 ä¸‡è¡Œå±¥çº¦æ•°æ®ï¼‰ï¼Œç¡®ä¿è®¢å• ID å­˜åœ¨å…³è”å…³ç³»ã€‚</p>
</li>
<li>
<p><strong>é…ç½® Doris Catalog</strong>
åœ¨æœ¬åœ° Doris é›†ç¾¤æ‰§è¡Œä»¥ä¸‹ SQLï¼Œåˆ›å»ºè¿æ¥è¿œç«¯ç‰©æµé›†ç¾¤çš„ Catalogï¼ˆè™šæ‹Ÿé›†ç¾¤æ¨¡å¼ï¼‰ï¼š</p>
</li>
</ol>
<pre><code class="hljs language-SQL" lang="SQL"><span class="hljs-comment">-- åˆ›å»ºDoris Catalogï¼Œå¯ç”¨è™šæ‹Ÿé›†ç¾¤æ¨¡å¼ï¼ˆå¤ç”¨å†…è¡¨ä¼˜åŒ–ï¼‰</span>
<span class="hljs-keyword">CREATE</span> CATALOG IF <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">EXISTS</span> logistics_ctl PROPERTIES (
    <span class="hljs-string">'type'</span> <span class="hljs-operator">=</span> <span class="hljs-string">'doris'</span>, <span class="hljs-comment">-- å›ºå®šç±»å‹</span>
    <span class="hljs-string">'fe_http_hosts'</span> <span class="hljs-operator">=</span> <span class="hljs-string">'http://logistics-fe1:8030,http://logistics-fe2:8030'</span>, <span class="hljs-comment">-- è¿œç«¯FE HTTPåœ°å€</span>
    <span class="hljs-string">'fe_arrow_hosts'</span> <span class="hljs-operator">=</span> <span class="hljs-string">'logistics-fe1:8040,http://logistics-fe2:8040'</span>, <span class="hljs-comment">-- è¿œç«¯FE Arrow Flightåœ°å€</span>
    <span class="hljs-string">'fe_thrift_hosts'</span> <span class="hljs-operator">=</span> <span class="hljs-string">'logistics-fe1:9020,http://logistics-fe2:9020'</span>, <span class="hljs-comment">-- è¿œç«¯FE Thriftåœ°å€</span>
    <span class="hljs-string">'use_arrow_flight'</span> <span class="hljs-operator">=</span> <span class="hljs-string">'false'</span>, <span class="hljs-comment">-- false=è™šæ‹Ÿé›†ç¾¤æ¨¡å¼ï¼Œtrue=Arrow Flightæ¨¡å¼</span>
    <span class="hljs-string">'user'</span> <span class="hljs-operator">=</span> <span class="hljs-string">'doris_admin'</span>, <span class="hljs-comment">-- è¿œç«¯é›†ç¾¤ç™»å½•ç”¨æˆ·</span>
    <span class="hljs-string">'password'</span> <span class="hljs-operator">=</span> <span class="hljs-string">'Doris@123456'</span>, <span class="hljs-comment">-- è¿œç«¯é›†ç¾¤ç™»å½•å¯†ç </span>
    <span class="hljs-string">'compatible'</span> <span class="hljs-operator">=</span> <span class="hljs-string">'false'</span>, <span class="hljs-comment">-- é›†ç¾¤ç‰ˆæœ¬æ¥è¿‘ï¼ˆ4.0.3 vs 4.0.2ï¼‰ï¼Œæ— éœ€å…¼å®¹</span>
    <span class="hljs-string">'query_timeout_sec'</span> <span class="hljs-operator">=</span> <span class="hljs-string">'30'</span> <span class="hljs-comment">-- å»¶é•¿æŸ¥è¯¢è¶…æ—¶æ—¶é—´ï¼ˆé»˜è®¤15ç§’ï¼‰</span>
);
</code></pre>
<ol start="5">
<li><strong>è·¨é›†ç¾¤æŸ¥è¯¢</strong></li>
</ol>
<ul>
<li>åˆ‡æ¢ Catalog åæŸ¥è¯¢
<ul>
<li>
<pre><code class="hljs language-SQL" lang="SQL"><span class="hljs-comment">-- åˆ‡æ¢åˆ°è¿œç«¯ç‰©æµé›†ç¾¤çš„Catalog</span>
SWITCH logistics_ctl;
<span class="hljs-comment">-- ä½¿ç”¨æœ¬åœ°è®¢å•åº“</span>
USE trading_db;
<span class="hljs-comment">-- å…³è”æœ¬åœ°è®¢å•è¡¨ä¸è¿œç«¯å±¥çº¦è¡¨ï¼Œè®¡ç®—å±¥çº¦ç‡</span>
<span class="hljs-keyword">SELECT</span> 
    o.order_type,
    <span class="hljs-built_in">COUNT</span>(<span class="hljs-keyword">DISTINCT</span> o.order_id) <span class="hljs-keyword">AS</span> total_orders,
    <span class="hljs-built_in">COUNT</span>(<span class="hljs-keyword">DISTINCT</span> <span class="hljs-keyword">CASE</span> <span class="hljs-keyword">WHEN</span> d.delivery_status <span class="hljs-operator">=</span> <span class="hljs-number">1</span> <span class="hljs-keyword">THEN</span> o.order_id <span class="hljs-keyword">END</span>) <span class="hljs-keyword">AS</span> delivered_orders,
    ROUND(<span class="hljs-built_in">COUNT</span>(<span class="hljs-keyword">DISTINCT</span> <span class="hljs-keyword">CASE</span> <span class="hljs-keyword">WHEN</span> d.delivery_status <span class="hljs-operator">=</span> <span class="hljs-number">1</span> <span class="hljs-keyword">THEN</span> o.order_id <span class="hljs-keyword">END</span>) <span class="hljs-operator">/</span> <span class="hljs-built_in">COUNT</span>(<span class="hljs-keyword">DISTINCT</span> o.order_id), <span class="hljs-number">4</span>) <span class="hljs-operator">*</span> <span class="hljs-number">100</span> <span class="hljs-keyword">AS</span> delivery_rate
<span class="hljs-keyword">FROM</span> internal.trading_db.order_info o
<span class="hljs-keyword">JOIN</span> delivery_info d <span class="hljs-keyword">ON</span> o.order_id <span class="hljs-operator">=</span> d.order_id
<span class="hljs-keyword">WHERE</span> o.create_time <span class="hljs-operator">&gt;=</span> DATE_SUB(<span class="hljs-built_in">CURRENT_DATE</span>(), <span class="hljs-type">INTERVAL</span> <span class="hljs-number">7</span> <span class="hljs-keyword">DAY</span>)
<span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> o.order_type
<span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> delivery_rate <span class="hljs-keyword">DESC</span>;
</code></pre>
</li>
</ul>
</li>
<li>å…¨é™å®šåæŸ¥è¯¢
<ul>
<li>
<pre><code class="hljs language-SQL" lang="SQL"><span class="hljs-keyword">SELECT</span> 
    o.order_type,
    <span class="hljs-built_in">COUNT</span>(<span class="hljs-keyword">DISTINCT</span> o.order_id) <span class="hljs-keyword">AS</span> total_orders,
    <span class="hljs-built_in">COUNT</span>(<span class="hljs-keyword">DISTINCT</span> <span class="hljs-keyword">CASE</span> <span class="hljs-keyword">WHEN</span> d.delivery_status <span class="hljs-operator">=</span> <span class="hljs-number">1</span> <span class="hljs-keyword">THEN</span> o.order_id <span class="hljs-keyword">END</span>) <span class="hljs-keyword">AS</span> delivered_orders,
    ROUND(<span class="hljs-built_in">COUNT</span>(<span class="hljs-keyword">DISTINCT</span> <span class="hljs-keyword">CASE</span> <span class="hljs-keyword">WHEN</span> d.delivery_status <span class="hljs-operator">=</span> <span class="hljs-number">1</span> <span class="hljs-keyword">THEN</span> o.order_id <span class="hljs-keyword">END</span>) <span class="hljs-operator">/</span> <span class="hljs-built_in">COUNT</span>(<span class="hljs-keyword">DISTINCT</span> o.order_id), <span class="hljs-number">4</span>) <span class="hljs-operator">*</span> <span class="hljs-number">100</span> <span class="hljs-keyword">AS</span> delivery_rate
<span class="hljs-keyword">FROM</span> internal.trading_db.order_info o
<span class="hljs-keyword">JOIN</span> logistics_ctl.logistics_db.delivery_info d <span class="hljs-keyword">ON</span> o.order_id <span class="hljs-operator">=</span> d.order_id
<span class="hljs-keyword">WHERE</span> o.create_time <span class="hljs-operator">&gt;=</span> DATE_SUB(<span class="hljs-built_in">CURRENT_DATE</span>(), <span class="hljs-type">INTERVAL</span> <span class="hljs-number">7</span> <span class="hljs-keyword">DAY</span>)
<span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> o.order_type
<span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> delivery_rate <span class="hljs-keyword">DESC</span>;
</code></pre>
</li>
</ul>
</li>
</ul>
<ol start="6">
<li><strong>æŸ¥è¯¢ç»“æœä¸ä¼˜åŒ–éªŒè¯</strong>
<ol>
<li>æ‰§è¡Œç»“æœç¤ºä¾‹
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/56ba3f53929b4fe5b92cff0f5a22daac~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2VsZWN0REI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767359142&amp;x-signature=qoiIsQ5sTn9b%2F33Ehr8QUDhOIPU%3D" alt="å®æˆ˜æ¼”ç¤º.png" loading="lazy"/></li>
<li>ä¼˜åŒ–ç‰¹æ€§éªŒè¯
<ul>
<li>æ‰§è¡Œ <code>EXPLAIN</code> æŸ¥çœ‹æ‰§è¡Œè®¡åˆ’ï¼Œå¯å‘ç°ï¼š</li>
<li>è™šæ‹Ÿé›†ç¾¤æ¨¡å¼ä¸‹ï¼Œæ‰§è¡Œè®¡åˆ’ä¸­è¿œç«¯è¡¨æ‰«æèŠ‚ç‚¹ä¸º <code>VOlapScanNode</code>ï¼ˆä¸æœ¬åœ°è¡¨ä¸€è‡´ï¼‰ï¼Œè¯´æ˜å¤ç”¨äº† Doris å†…è¡¨æ‰«æä¼˜åŒ–ï¼›</li>
<li>Join æ“ä½œä¸­è‡ªåŠ¨å¯ç”¨ <code>Runtime Filter</code>ï¼Œå‡å°‘è¿œç«¯æ•°æ®ä¼ è¾“é‡ã€‚</li>
</ul>
</li>
</ol>
</li>
</ol>
<h2 data-id="heading-8">æ€»ç»“ä¸å±•æœ›</h2>
<p>Doris Catalog çš„æ¨å‡ºï¼Œè¡¥é½äº† Doris è·¨é›†ç¾¤è”é‚¦æŸ¥è¯¢çš„æ€§èƒ½çŸ­æ¿ã€‚åœ¨æ­¤<strong>ç‰¹åˆ«æ„Ÿè°¢ç¤¾åŒºåŒå­¦çš„ Chen768959 å’Œ HonestManXin è´¡çŒ®</strong>ï¼Œå¸®åŠ©å»¶ç»­äº† Doris Catalog ç”Ÿæ€â€œæ— éœ€è¿ç§»ã€ä¸€ç«™å¼åˆ†æâ€çš„æ ¸å¿ƒä¼˜åŠ¿ï¼Œè®©å¤š Doris é›†ç¾¤ä»â€œæ•°æ®å­¤å²›â€å˜ä¸ºâ€œäº’è”ä¸€ä½“â€ã€‚</p>
<p>ä½œä¸ºå®éªŒæ€§ç‰¹æ€§ï¼ŒDoris Catalog åç»­å°†æŒç»­è¿­ä»£ä¼˜åŒ–ï¼š</p>
<ul>
<li>å¢å¼º Arrow Flight æ¨¡å¼ï¼Œä½¿å…¶èƒ½å¤Ÿè®¿é—®ä»»æ„æ”¯æŒæ ‡å‡† Arrow Flight åè®®çš„æ•°æ®æºã€‚</li>
<li>é™ä½è™šæ‹Ÿé›†ç¾¤æ¨¡å¼ FE å†…å­˜å¼€é”€ï¼Œä¼˜åŒ–å…ƒæ•°æ®å­˜å‚¨å’ŒåŒæ­¥ç­–ç•¥ï¼›</li>
<li>æ”¯æŒå­˜ç®—åˆ†ç¦»éƒ¨ç½²çš„ Doris é›†ç¾¤ï¼ˆè™šæ‹Ÿé›†ç¾¤æ¨¡å¼ï¼‰</li>
<li>æ–°å¢æ›´å¤šç›‘æ§æŒ‡æ ‡ï¼Œæ–¹ä¾¿æ’æŸ¥è·¨é›†ç¾¤æŸ¥è¯¢æ•…éšœã€‚</li>
</ul>
<p>æ›´å¤šä¿¡æ¯ï¼Œè¯·è®¿é—® Doris å®˜ç½‘æ–‡æ¡£ï¼š</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fdoris.apache.org%2Fzh-CN%2Fdocs%2F4.x%2Flakehouse%2Fcatalogs%2Fdoris-catalog" target="_blank" title="https://doris.apache.org/zh-CN/docs/4.x/lakehouse/catalogs/doris-catalog" ref="nofollow noopener noreferrer">doris.apache.org/zh-CN/docs/â€¦</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ·±åº¦è§£æOoderæ¶æ„ï¼šA2UIæ—¶ä»£å…¨æ ˆè®¾è®¡çš„å››å¤§æ ¸å¿ƒæ€è€ƒ]]></title>    <link>https://juejin.cn/post/7588001624904876051</link>    <guid>https://juejin.cn/post/7588001624904876051</guid>    <pubDate>2025-12-26T13:08:27.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588001624904876051" data-draft-id="7587995707165999123" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ·±åº¦è§£æOoderæ¶æ„ï¼šA2UIæ—¶ä»£å…¨æ ˆè®¾è®¡çš„å››å¤§æ ¸å¿ƒæ€è€ƒ"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-12-26T13:08:27.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="OneCodeCN"/> <meta itemprop="url" content="https://juejin.cn/user/1427583415622366"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ·±åº¦è§£æOoderæ¶æ„ï¼šA2UIæ—¶ä»£å…¨æ ˆè®¾è®¡çš„å››å¤§æ ¸å¿ƒæ€è€ƒ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1427583415622366/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    OneCodeCN
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-26T13:08:27.000Z" title="Fri Dec 26 2025 13:08:27 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    14
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»15åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨å¤§æ¨¡å‹å¸­å·ä¼ä¸šçº§å¼€å‘çš„å½“ä¸‹ï¼ŒAI to UIï¼ˆA2UIï¼‰å·²ä»æ¦‚å¿µè½åœ°ä¸ºå®é™…ç”Ÿäº§åŠ›ï¼Œæˆä¸ºå‰ç«¯å¼€å‘æ¼”è¿›çš„æ ¸å¿ƒæ–¹å‘ä¹‹ä¸€ã€‚è€Œä¸“ä¸ºå¤§æ¨¡å‹æµå¼å¤„ç†è®¾è®¡çš„Ooderå…¨æ ˆæ¶æ„ï¼Œå‡­å€Ÿä¸React/Vueæˆªç„¶ä¸åŒçš„è®¾è®¡æ€è·¯ï¼Œåœ¨CNç¯å¢ƒä¸‹çš„A2UIåœºæ™¯ä¸­å´­éœ²å¤´è§’ã€‚</p>
<p>å›´ç»•Ooderæ¶æ„çš„è®¾è®¡æ ¸å¿ƒé€»è¾‘ã€æŠ€æœ¯é€‰å‹ã€å¯è§†åŒ–å®ç°åŠç»„ä»¶åŒ–å·®å¼‚å››å¤§å…³é”®é—®é¢˜ï¼Œç»“åˆæ¶æ„è®¾è®¡çš„æ ¸å¿ƒæ€è·¯ä¸å®è·µç»éªŒï¼Œæœ¬æ–‡å°†ä»æŠ€æœ¯æ¨ç†åˆ°è½åœ°å®è·µè¿›è¡Œå®Œæ•´æ‹†è§£ï¼Œå¸¦å¤§å®¶è¯»æ‡‚Ooderæ¶æ„çš„è®¾è®¡ç²¾é«“ä¸å–èˆä¹‹é“ã€‚</p>
<h2 data-id="heading-0">ä¸€ã€æ ¸å¿ƒä¹‹é—®ä¸€ï¼šä¸ºä½•è¦ä¸“é—¨è®¾è®¡UIæ³¨è§£åº“ï¼Ÿè€Œéå¤ç”¨React/Vueç”Ÿæ€ï¼Ÿ</h2>
<h3 data-id="heading-1">AICodeingæé—®é€»è¾‘ï¼šä¼ ç»Ÿæ¡†æ¶çš„A2UIé€‚é…å›°å¢ƒ</h3>
<p>éšç€A2UIä»æ¦‚å¿µèµ°å‘å®è·µï¼Œæˆ‘ä»¬å‘ç°ä¼ ç»Ÿå‰ç«¯æ¡†æ¶ï¼ˆReact/Vueï¼‰åœ¨é€‚é…è¿™ä¸€æ¨¡å¼æ—¶å­˜åœ¨å¤©ç„¶å±€é™ï¼šå…¶ä¸€ï¼Œè¿™ç±»æ¡†æ¶ä¸“æ³¨äºå‰ç«¯UIé¢†åŸŸï¼Œæ— æ³•è¦†ç›–ä»åç«¯æœåŠ¡åˆ°å‰ç«¯æ¸²æŸ“çš„å…¨æ ˆé“¾è·¯ï¼Œå¯¼è‡´AIç”Ÿæˆå…¨æ ˆä»£ç æ—¶å‡ºç°â€œæ–­å±‚â€ï¼›å…¶äºŒï¼ŒåŠ¨æ€æ¨¡æ¿è®¾è®¡çš„çµæ´»æ€§è™½é«˜ï¼Œä½†éš¾ä»¥è¢«å¤§æ¨¡å‹ç²¾å‡†è§£æå’Œç”Ÿæˆï¼Œå¢åŠ äº†A2UIè½åœ°çš„éš¾åº¦ï¼›å…¶ä¸‰ï¼Œå‰åç«¯ååŒéœ€è¦é¢å¤–çš„çŠ¶æ€ç®¡ç†ã€æ¥å£é€‚é…æœºåˆ¶ï¼Œæ²Ÿé€šä¸å¼€å‘æˆæœ¬å±…é«˜ä¸ä¸‹ã€‚</p>
<p>åŸºäºä¼ ç»Ÿæ¡†æ¶çš„é€‚é…å±€é™ï¼ŒOoderæ¶æ„é€‰æ‹©è·³å‡ºå›ºæœ‰æ€ç»´ï¼Œè®¾è®¡ä¸“å±UIæ³¨è§£åº“ã€‚è¿™ä¸€è®¾è®¡çš„æ ¸å¿ƒä»·å€¼ç©¶ç«Ÿæ˜¯ä»€ä¹ˆï¼Ÿ</p>
<h3 data-id="heading-2">è®¾è®¡é€»è¾‘ï¼šæ³¨è§£é©±åŠ¨æ˜¯A2UIä¸å…¨æ ˆæµå¼å¤„ç†çš„æœ€ä¼˜è§£</h3>
<p>Ooderè®¾è®¡ä¸“å±UIæ³¨è§£åº“çš„æ ¸å¿ƒé€»è¾‘ï¼Œæ˜¯ä¸ºäº†ç²¾å‡†é€‚é…A2UIæ¨¡å¼ä¸å¤§æ¨¡å‹æµå¼å¤„ç†çš„æ ¸å¿ƒéœ€æ±‚ï¼Œå…·ä½“å¯æ‹†è§£ä¸ºå››ç‚¹ï¼š</p>
<ol>
<li><strong>å…¨æ ˆä¸€ä½“åŒ–å·¥ä½œç¯å¢ƒ</strong>ï¼šæ³¨è§£åº“æ‰“é€šäº†åç«¯æœåŠ¡ã€æ•°æ®æ¨¡å‹åˆ°å‰ç«¯UIçš„å®Œæ•´é“¾è·¯ï¼Œè®©AIèƒ½å¤Ÿç›´æ¥ç”Ÿæˆè¦†ç›–å…¨æ ˆçš„ä»£ç ï¼Œæ— éœ€åœ¨ä¸åŒæ¡†æ¶ã€ä¸åŒé¢†åŸŸé—´åˆ‡æ¢é€‚é…ï¼›</li>
<li><strong>å®Œç¾é€‚é…å¤§æ¨¡å‹æµå¼è¾“å‡º</strong>ï¼šé€šè¿‡<code>@APIEventAnnotation</code>ç­‰æ³¨è§£é©±åŠ¨çš„äº‹ä»¶æœºåˆ¶ï¼Œèƒ½å¤Ÿå®æ—¶æ¥æ”¶å¤§æ¨¡å‹çš„æµå¼è¾“å‡ºå†…å®¹ï¼Œå¹¶ç›´æ¥æ¸²æŸ“ä¸ºå¯¹åº”çš„UIç»„ä»¶ï¼Œå®ç°â€œAIç”Ÿæˆå³æ¸²æŸ“â€çš„é«˜æ•ˆä½“éªŒï¼›</li>
<li><strong>å¥‘åˆCNç¯å¢ƒçš„å®é™…éœ€æ±‚</strong>ï¼šå½“å‰CNå¸‚åœºå¯¹ä½ä»£ç /é›¶ä»£ç å¼€å‘ã€A2UIè‡ªåŠ¨åŒ–ç”Ÿæˆçš„éœ€æ±‚æ—ºç››ï¼Œæ³¨è§£é©±åŠ¨çš„è®¾è®¡é™ä½äº†å¼€å‘é—¨æ§›ï¼Œè®©éä¸“ä¸šå¼€å‘è€…ä¹Ÿèƒ½å€ŸåŠ©AIå®Œæˆä¼ä¸šçº§åº”ç”¨å¼€å‘ï¼›</li>
<li><strong>å¥‘åˆA2UIçš„æ ¸å¿ƒç†è®º</strong>ï¼šå€Ÿé‰´Google A2UIæ¨¡å¼çš„æ ¸å¿ƒæ€è·¯ï¼Œé€šè¿‡ç»“æ„åŒ–çš„æ³¨è§£å®šä¹‰ï¼Œå®ç°ä»AIæŒ‡ä»¤åˆ°UIç»„ä»¶çš„è‡ªåŠ¨åŒ–è½¬æ¢ï¼Œå‡å°‘äººå·¥å¹²é¢„ç¯èŠ‚ã€‚</li>
</ol>
<h3 data-id="heading-3">æŠ€æœ¯å–èˆï¼šä¼˜åŠ¿ä¸å±€é™æ€§çš„å®¢è§‚è¯„ä»·</h3>
<p>ä»»ä½•æŠ€æœ¯è®¾è®¡éƒ½å­˜åœ¨å–èˆï¼ŒOoderçš„UIæ³¨è§£åº“ä¹Ÿä¸ä¾‹å¤–ï¼š</p>
<p><strong>æ ¸å¿ƒä¼˜åŠ¿</strong>ï¼š</p>
<ul>
<li>å¤©ç„¶é€‚é…A2UIæ¨¡å¼ï¼Œæ®å®æµ‹å¯æå‡60%-80%çš„å¼€å‘æ•ˆç‡ï¼Œå°¤å…¶é€‚åˆä¼ä¸šçº§è¡¨å•ã€åå°ç®¡ç†ç³»ç»Ÿç­‰æ ‡å‡†åŒ–åœºæ™¯ï¼›</li>
<li>å…¨æ ˆä¸€ä½“åŒ–è®¾è®¡æ¶ˆé™¤äº†å‰åç«¯ååŒçš„â€œé¸¿æ²Ÿâ€ï¼Œå‡å°‘äº†æ¥å£é€‚é…ã€æ•°æ®æ ¡éªŒç­‰é‡å¤å·¥ä½œï¼›</li>
<li>ç»“æ„åŒ–çš„æ³¨è§£å®šä¹‰ä¾¿äºå¤§æ¨¡å‹è§£æï¼Œä¸ºâ€œå›¾ç”Ÿä»£ç â€â€œæ–‡ç”Ÿä»£ç â€æä¾›äº†æ¸…æ™°çš„æŠ€æœ¯è½½ä½“ï¼Œé™ä½äº†AIç”Ÿæˆä»£ç çš„é”™è¯¯ç‡ã€‚</li>
</ul>
<p><strong>å±€é™æ€§</strong>ï¼š</p>
<ul>
<li>ç”Ÿæ€ç›¸å¯¹å¹´è½»ï¼Œç›¸æ¯”React/Vueæˆç†Ÿçš„ç¬¬ä¸‰æ–¹ç»„ä»¶åº“ï¼ŒOoderçš„å¯é€‰ç»„ä»¶èµ„æºè¾ƒå°‘ï¼Œå®šåˆ¶åŒ–å¤æ‚ç»„ä»¶æ—¶éœ€è¦æ›´å¤šå¼€å‘å·¥ä½œï¼›</li>
<li>å­¦ä¹ æ›²çº¿è¾ƒé™¡ï¼Œå¼€å‘è€…éœ€è¦ä»â€œå‰ç«¯ç»„ä»¶åŒ–æ€ç»´â€åˆ‡æ¢åˆ°â€œå…¨æ ˆæ³¨è§£æ€ç»´â€ï¼ŒæŒæ¡è¦†ç›–å‰åç«¯çš„æ³¨è§£ä½“ç³»ï¼›</li>
<li>åœ¨å¤æ‚åŠ¨æ€äº¤äº’åœºæ™¯ï¼ˆå¦‚å¯è§†åŒ–å¤§å±ã€å¤æ‚è¡¨å•è”åŠ¨ï¼‰ä¸­ï¼Œçµæ´»æ€§ä¸å¦‚React/Vueçš„åŠ¨æ€æ¨¡æ¿è®¾è®¡ã€‚</li>
</ul>
<h2 data-id="heading-4">äºŒã€æ ¸å¿ƒä¹‹é—®äºŒï¼šä¸ºä½•é€‰æ‹©â€œç¼–è¯‘æ—¶+è¿è¡Œæ—¶â€æ··åˆæ¶æ„ï¼Ÿçº¯è¿è¡Œæ—¶ä¸æ›´é¦™å—ï¼Ÿ</h2>
<h3 data-id="heading-5">æ ¸å¿ƒæ€è€ƒï¼šçº¯è¿è¡Œæ—¶æ¶æ„çš„å…¨æ ˆé€‚é…å›°å¢ƒï¼Œä¸ºä½•è½¬å‘æ··åˆæ¶æ„ï¼Ÿ</h3>
<p>ä¼ ç»Ÿå‰ç«¯æ¶æ„å¤šé‡‡ç”¨çº¯è¿è¡Œæ—¶è®¾è®¡ï¼Œä¾èµ–æµè§ˆå™¨åŠ¨æ€è§£ææ¨¡æ¿ã€å¤„ç†äº‹ä»¶å’Œæ¸²æŸ“é¡µé¢ã€‚ä½†åœ¨A2UIå’Œå…¨æ ˆå¼€å‘åœºæ™¯ä¸­ï¼Œè¿™ç§æ¶æ„çš„å¼Šç«¯é€æ¸å‡¸æ˜¾ï¼šä¸€æ˜¯å‰åç«¯æ•°æ®æ¨¡å‹éš¾ä»¥ä¿è¯ä¸€è‡´æ€§ï¼Œå®¹æ˜“å‡ºç°â€œå‰ç«¯æ¸²æŸ“ä¸åç«¯æ•°æ®ä¸åŒ¹é…â€çš„é—®é¢˜ï¼›äºŒæ˜¯è·¨å±‚äº‹ä»¶è”åŠ¨å¤æ‚ï¼Œéœ€è¦å¼•å…¥Reduxã€Vuexç­‰çŠ¶æ€ç®¡ç†åº“å’Œäº‹ä»¶æ€»çº¿æœºåˆ¶ï¼Œå¢åŠ äº†æ¶æ„å¤æ‚åº¦ï¼›ä¸‰æ˜¯æ— æ³•é«˜æ•ˆå¤„ç†AIç”Ÿæˆçš„å…¨æ ˆå†…å®¹ï¼Œéš¾ä»¥å®ç°â€œç”Ÿæˆå³è¿è¡Œâ€çš„A2UIæ ¸å¿ƒéœ€æ±‚ã€‚</p>
<p>Ooderæ¶æ„åˆ›æ–°æ€§åœ°é‡‡ç”¨â€œç¼–è¯‘æ—¶+è¿è¡Œæ—¶â€çš„æ··åˆå¤„ç†æœºåˆ¶ï¼Œè¿™ä¸€æ¶æ„é€‰æ‹©çš„æ ¸å¿ƒä¼˜åŠ¿æ˜¯ä»€ä¹ˆï¼Ÿ</p>
<h3 data-id="heading-6">æ¶æ„ä¼˜åŠ¿ï¼šæ··åˆæ¶æ„å®ç°å…¨æ ˆä¸€è‡´æ€§ä¸é«˜æ•ˆæ¸²æŸ“çš„å¹³è¡¡</h3>
<p>Ooderçš„æ··åˆæ¶æ„é€šè¿‡â€œåŒé˜¶æ®µå¤„ç†â€æœºåˆ¶ï¼Œæ—¢è§£å†³äº†çº¯è¿è¡Œæ—¶çš„ä¸€è‡´æ€§é—®é¢˜ï¼Œåˆä¿ç•™äº†åŠ¨æ€é€‚é…çš„çµæ´»æ€§ï¼Œå…·ä½“å®ç°é€»è¾‘å¦‚ä¸‹ï¼š</p>
<ol>
<li><strong>ç¼–è¯‘æ—¶å¤„ç†ï¼šå›ºåŒ–æ ¸å¿ƒæ¨¡å‹ï¼Œä¿éšœä¸€è‡´æ€§</strong>ï¼šåœ¨ç¼–è¯‘é˜¶æ®µï¼ŒOoderä¼šå¯¹æ•°æ®ç»“æ„æ¥å£è¿›è¡Œâ€œå›ºåŒ–â€ï¼Œé€šè¿‡ç±»å‹æ£€æŸ¥ç¡®ä¿å‰åç«¯æ•°æ®æ¨¡å‹ä¸€è‡´ï¼›åŒæ—¶å°†å‰ç«¯æ‰“åŒ…ã€èµ„æºä¼˜åŒ–ç­‰å·¥ä½œèå…¥ç¼–è¯‘æµç¨‹ï¼Œå¹¶è‡ªåŠ¨ç”Ÿæˆå‰åç«¯é€šä¿¡çš„ä¸­é—´å±‚ä»£ç ï¼Œé¿å…äººå·¥ç¼–å†™é€‚é…é€»è¾‘çš„å†—ä½™ä¸é”™è¯¯ã€‚</li>
<li><strong>è¿è¡Œæ—¶å¤„ç†ï¼šåŠ¨æ€é€‚é…éœ€æ±‚ï¼Œä¿éšœçµæ´»æ€§</strong>ï¼šåœ¨è¿è¡Œé˜¶æ®µï¼ŒOoderæ”¯æŒæœåŠ¡çš„åŠ¨æ€ç»‘å®šå’Œåå°„å¼è½¯ç»‘å®šï¼Œèƒ½å¤Ÿæ ¹æ®å®é™…ä¸šåŠ¡åœºæ™¯è°ƒæ•´æœåŠ¡ä¾èµ–ï¼›é€šè¿‡<code>@APIEventAnnotation</code>å®ç°å‰åå°äº‹ä»¶çš„æ— ç¼è”åŠ¨ï¼Œæ— éœ€é¢å¤–çš„äº‹ä»¶æ€»çº¿ï¼›åŒæ—¶æ”¯æŒå¤šç«¯è¾“å…¥ï¼ˆå¦‚AIæŒ‡ä»¤ã€ç”¨æˆ·æ“ä½œï¼‰åŠ¨æ€ç”ŸæˆUIè¾“å‡ºï¼Œå®Œç¾é€‚é…A2UIæ¨¡å¼çš„åŠ¨æ€éœ€æ±‚ã€‚</li>
</ol>
<p>è¿™ç§æ··åˆæ¶æ„çš„æ ¸å¿ƒä¼˜åŠ¿åœ¨äºä¸‰ç‚¹ï¼šä¸€æ˜¯ä¸­é—´å±‚ç»Ÿä¸€ï¼Œè‡ªåŠ¨ç”Ÿæˆçš„ä¸­é—´å±‚ä»£ç æ¶ˆé™¤äº†å‰åç«¯æ•°æ®ä¸ä¸€è‡´çš„éšæ‚£ï¼›äºŒæ˜¯åŠ¨ä½œäº‹ä»¶è”åŠ¨é«˜æ•ˆï¼Œè·¨å±‚äº‹ä»¶æ— éœ€äººå·¥é€‚é…ï¼Œé™ä½äº†å¼€å‘å¤æ‚åº¦ï¼›ä¸‰æ˜¯å¤šæºæ•°æ®æ”¯æŒèƒ½åŠ›å¼ºï¼Œèƒ½å¤Ÿçµæ´»å¤„ç†AIç”Ÿæˆæ•°æ®ã€åç«¯æ¥å£æ•°æ®ã€ç”¨æˆ·è¾“å…¥æ•°æ®ç­‰å¤šç±»æ•°æ®æºçš„UIæ¸²æŸ“éœ€æ±‚ã€‚</p>
<h3 data-id="heading-7">æŠ€æœ¯å–èˆï¼šæ¶æ„å¤æ‚åº¦ä¸æ•ˆç‡çš„å¹³è¡¡</h3>
<p><strong>æ ¸å¿ƒä¼˜åŠ¿</strong>ï¼š</p>
<ul>
<li>ç¼–è¯‘æ—¶çš„ç±»å‹æ£€æŸ¥å‡å°‘äº†è¿è¡Œæ—¶é”™è¯¯ï¼Œæå‡äº†ä»£ç è´¨é‡ï¼Œå°¤å…¶é€‚åˆå¤§å‹ä¼ä¸šçº§åº”ç”¨çš„é•¿æœŸç»´æŠ¤ï¼›</li>
<li>å‰åç«¯æ¨¡å‹ç»Ÿä¸€ï¼Œé™ä½äº†å›¢é˜Ÿçš„æ²Ÿé€šæˆæœ¬å’Œé€‚é…å·¥ä½œé‡ï¼Œè®©å¼€å‘è€…æ›´èšç„¦ä¸šåŠ¡é€»è¾‘ï¼›</li>
<li>å¯¹A2UIæ¨¡å¼çš„é€‚é…æ€§è¿œè¶…çº¯è¿è¡Œæ—¶æ¶æ„ï¼Œèƒ½å¤Ÿé«˜æ•ˆå¤„ç†AIç”Ÿæˆçš„å…¨æ ˆä»£ç ï¼Œå®ç°â€œç”Ÿæˆå³éƒ¨ç½²â€çš„é«˜æ•ˆè½åœ°ã€‚</li>
</ul>
<p><strong>å±€é™æ€§</strong>ï¼š</p>
<ul>
<li>æ¶æ„å¤æ‚åº¦é«˜äºçº¯è¿è¡Œæ—¶è®¾è®¡ï¼Œå¼€å‘å’Œç»´æŠ¤è¿‡ç¨‹ä¸­éœ€è¦å…³æ³¨ç¼–è¯‘é…ç½®ã€ä¸­é—´å±‚ç”Ÿæˆç­‰é¢å¤–ç¯èŠ‚ï¼›</li>
<li>ç¼–è¯‘è¿‡ç¨‹ä¼šå»¶é•¿å¼€å‘å‘¨æœŸä¸­çš„æ„å»ºæ—¶é—´ï¼Œå°¤å…¶åœ¨å¤§å‹é¡¹ç›®ä¸­ï¼Œå¯èƒ½å½±å“å¼€å‘æ•ˆç‡ï¼›</li>
<li>å¯¹å¼€å‘å·¥å…·é“¾çš„è¦æ±‚è¾ƒé«˜ï¼Œéœ€è¦é…å¥—æ”¯æŒæ··åˆç¼–è¯‘çš„IDEå’Œæ„å»ºå·¥å…·ï¼Œå¦åˆ™ä¼šå¢åŠ å¼€å‘é—¨æ§›ã€‚</li>
</ul>
<h2 data-id="heading-8">ä¸‰ã€æ ¸å¿ƒä¹‹é—®ä¸‰ï¼šæ³¨è§£åº“ä¸ooder-DSMçš„é›†æˆï¼Œå¦‚ä½•è§£å†³å¯è§†åŒ–ä¸â€œå›¾ç”Ÿä»£ç â€éš¾é¢˜ï¼Ÿ</h2>
<h3 data-id="heading-9">æ ¸å¿ƒéš¾é¢˜ï¼šä¼ ç»Ÿæ¡†æ¶çš„å¯è§†åŒ–ååŒå›°å¢ƒå¦‚ä½•ç ´è§£ï¼Ÿ</h3>
<p>å¯è§†åŒ–ç¼–è¾‘å’Œâ€œå›¾ç”Ÿä»£ç â€æ˜¯A2UIæ¨¡å¼çš„æ ¸å¿ƒèƒ½åŠ›ï¼Œä¹Ÿæ˜¯æå‡å›¢é˜ŸååŒæ•ˆç‡çš„å…³é”®ã€‚ä½†ä¼ ç»Ÿå‰ç«¯æ¡†æ¶çš„å¯è§†åŒ–æ”¯æŒä¾èµ–Storybookç­‰ç¬¬ä¸‰æ–¹å·¥å…·ï¼Œå­˜åœ¨æ˜æ˜¾çŸ­æ¿ï¼šä¸€æ˜¯å‰åç«¯æ¨¡å‹å‰²è£‚ï¼Œäº§å“ç»ç†åœ¨å¯è§†åŒ–å·¥å…·ä¸­è®¾è®¡çš„UIï¼Œæ— æ³•ç›´æ¥å¯¹æ¥åç«¯ä¸šåŠ¡é€»è¾‘ï¼Œéœ€è¦å‰ç«¯äºŒæ¬¡é€‚é…ï¼›äºŒæ˜¯å›¾ç”Ÿä»£ç èƒ½åŠ›æœ‰é™ï¼ŒåŠ¨æ€æ¨¡æ¿çš„çµæ´»æ€§å¯¼è‡´AIéš¾ä»¥ç²¾å‡†è§£æè®¾è®¡ç¨¿ï¼Œç”Ÿæˆçš„ä»£ç å¯ç”¨æ€§ä½ï¼›ä¸‰æ˜¯å¤šè§’è‰²ååŒå›°éš¾ï¼Œäº§å“ã€å‰åç«¯ã€ä¸šåŠ¡äººå‘˜åŸºäºä¸åŒçš„æ¨¡å‹å¼€å±•å·¥ä½œï¼Œæ²Ÿé€šæˆæœ¬é«˜ï¼Œå®¹æ˜“å‡ºç°ç†è§£åå·®ã€‚</p>
<p>Ooderé€šè¿‡æ³¨è§£åº“ä¸ooder-DSMçš„å¯è§†åŒ–ç¼–è¾‘é›†æˆï¼Œæœ‰æ•ˆè§£å†³äº†ä¸Šè¿°é—®é¢˜ã€‚è¿™ç§é›†æˆçš„å…·ä½“å®ç°æœºåˆ¶æ˜¯ä»€ä¹ˆï¼Ÿ</p>
<h3 data-id="heading-10">å®ç°æœºåˆ¶ï¼šæ³¨è§£ä¸ç»„ä»¶1:1æ˜ å°„ï¼Œæ‰“é€šâ€œè®¾è®¡-ä»£ç -ä¸šåŠ¡â€å…¨é“¾è·¯</h3>
<p>Ooderçš„å¯è§†åŒ–æ”¯æŒæ ¸å¿ƒåœ¨äºâ€œæ³¨è§£ç³»ç»Ÿä¸å‰ç«¯ç»„ä»¶çš„1:1æ˜ å°„â€ï¼Œé€šè¿‡è¿™ä¸€è®¾è®¡å®ç°äº†å¯è§†åŒ–è®¾è®¡ã€ä»£ç ç”Ÿæˆã€ä¸šåŠ¡é€»è¾‘çš„å…¨é“¾è·¯ç»Ÿä¸€ï¼Œå…·ä½“æŠ€æœ¯è·¯å¾„å¦‚ä¸‹ï¼š</p>
<ol>
<li><strong>æ³¨è§£ç³»ç»Ÿçš„ç²¾å‡†è®¾è®¡</strong>ï¼šOoderå®šä¹‰äº†<code>@FormAnnotation</code>ï¼ˆè¡¨å•ç»„ä»¶ï¼‰ã€<code>@TreeAnnotation</code>ï¼ˆæ ‘å½¢ç»„ä»¶ï¼‰ç­‰ä¸€ç³»åˆ—æ³¨è§£ï¼Œæ¯ä¸ªæ³¨è§£çš„å±æ€§ï¼ˆå¦‚æ ·å¼ã€äº¤äº’è§„åˆ™ã€æ•°æ®ç»‘å®šï¼‰éƒ½ä¸å¯¹åº”çš„å‰ç«¯ç»„ä»¶å®ç°1:1å¯¹åº”ï¼Œç¡®ä¿æ³¨è§£å®šä¹‰èƒ½å¤Ÿå®Œå…¨è¦†ç›–ç»„ä»¶çš„æ ¸å¿ƒç‰¹æ€§ã€‚</li>
<li><strong>RADå¯è§†åŒ–å…¨æµç¨‹</strong>ï¼šé€šè¿‡Ooder RADå¯è§†åŒ–å·¥å…·ï¼Œäº§å“ç»ç†æˆ–ä¸šåŠ¡äººå‘˜å¯ç›´æ¥æ‹–æ‹½ç»„ä»¶è¿›è¡ŒUIè®¾è®¡ï¼›è®¾è®¡å®Œæˆåï¼Œå·¥å…·ä¼šå°†ç»„ä»¶çš„å±æ€§åºåˆ—åŒ–ä¸ºJSONæ ¼å¼ï¼›Ooderå¼•æ“å†å°†JSONç¿»è¯‘ä¸ºå¯¹åº”çš„åç«¯æ³¨è§£ï¼Œå¹¶è‡ªåŠ¨ç”Ÿæˆå®Œæ•´çš„å‰åç«¯ä»£ç ï¼ˆåŒ…æ‹¬å‰ç«¯æ¸²æŸ“é€»è¾‘ã€åç«¯æ•°æ®æ¥å£ã€æ•°æ®æ ¡éªŒè§„åˆ™ï¼‰ã€‚</li>
<li><strong>å¼ºç±»å‹çº¦æŸä½“ç³»</strong>ï¼šæ³¨è§£ç³»ç»Ÿè‡ªå¸¦å¼ºç±»å‹çº¦æŸï¼Œç¡®ä¿å¯è§†åŒ–è®¾è®¡çš„å±æ€§ç¬¦åˆåç«¯æ•°æ®æ¨¡å‹çš„è¦æ±‚ï¼Œé¿å…å‡ºç°â€œè®¾è®¡ä¸ä¸šåŠ¡ä¸åŒ¹é…â€çš„é—®é¢˜ï¼›åŒæ—¶å¼ºç±»å‹ä¹Ÿä¸ºAIè§£æè®¾è®¡ç¨¿ã€ç”Ÿæˆç²¾å‡†ä»£ç æä¾›äº†ä¿éšœã€‚</li>
<li><strong>å¤šè§’è‰²ååŒæœºåˆ¶</strong>ï¼šäº§å“ã€å‰åç«¯ã€ä¸šåŠ¡äººå‘˜åŸºäºåŒä¸€å¥—æ³¨è§£æ¨¡å‹å¼€å±•å·¥ä½œâ€”â€”äº§å“è®¾è®¡UIå³å®šä¹‰æ³¨è§£å±æ€§ï¼Œå‰ç«¯æ— éœ€äºŒæ¬¡è½¬æ¢ï¼Œåç«¯ç›´æ¥åŸºäºæ³¨è§£å¼€å‘ä¸šåŠ¡é€»è¾‘ï¼Œå®ç°â€œä¸€å¥—æ¨¡å‹ï¼Œå¤šè§’è‰²å¤ç”¨â€ï¼Œå¤§å¹…é™ä½æ²Ÿé€šæˆæœ¬ã€‚</li>
</ol>
<h3 data-id="heading-11">æŠ€æœ¯å–èˆï¼šå¯è§†åŒ–æ•ˆç‡ä¸è®¾è®¡çµæ´»æ€§çš„å¹³è¡¡</h3>
<p><strong>æ ¸å¿ƒä¼˜åŠ¿</strong>ï¼š</p>
<ul>
<li>å¤šè§’è‰²ååŒæ•ˆç‡å¤§å¹…æå‡ï¼Œæ®ç»Ÿè®¡å¯é™ä½80%ä»¥ä¸Šçš„æ²Ÿé€šæˆæœ¬ï¼Œé¿å…å› ç†è§£åå·®å¯¼è‡´çš„è¿”å·¥ï¼›</li>
<li>å›¾ç”Ÿä»£ç èƒ½åŠ›å¼ºï¼Œè®¾è®¡ç¨¿å¯ç›´æ¥è½¬æ¢ä¸ºå¯è¿è¡Œçš„å…¨æ ˆä»£ç ï¼Œå¯ç”¨æ€§è¿œè¶…ä¼ ç»Ÿå¯è§†åŒ–å·¥å…·ï¼›</li>
<li>å¼ºç±»å‹çº¦æŸç¡®ä¿äº†ä»£ç è´¨é‡å’Œä¸šåŠ¡ä¸€è‡´æ€§ï¼Œå‡å°‘äº†â€œè®¾è®¡å¥½çœ‹ä½†æ— æ³•è½åœ°â€çš„é—®é¢˜ã€‚</li>
</ul>
<p><strong>å±€é™æ€§</strong>ï¼š</p>
<ul>
<li>å¯è§†åŒ–å·¥å…·çš„æˆç†Ÿåº¦æœ‰å¾…æå‡ï¼Œç›¸æ¯”Figmaã€Axureç­‰ä¸“ä¸šè®¾è®¡å·¥å…·ï¼Œåœ¨è®¾è®¡ç»†èŠ‚ã€äº¤äº’ä½“éªŒä¸Šå­˜åœ¨å·®è·ï¼›</li>
<li>å¤æ‚äº¤äº’åœºæ™¯çš„å¯è§†åŒ–æ”¯æŒæœ‰é™ï¼Œå¯¹äºéœ€è¦è‡ªå®šä¹‰åŠ¨ç”»ã€ç‰¹æ®Šäº¤äº’é€»è¾‘çš„åœºæ™¯ï¼Œä»éœ€æ‰‹åŠ¨ç¼–å†™æ³¨è§£å’Œä»£ç ï¼›</li>
<li>å¯¹è®¾è®¡è§„èŒƒè¦æ±‚è¾ƒé«˜ï¼Œéœ€è¦å›¢é˜Ÿä¸¥æ ¼éµå¾ªOoderçš„ç»„ä»¶è®¾è®¡è§„èŒƒï¼Œå¦åˆ™ä¼šå½±å“å¯è§†åŒ–åˆ°ä»£ç çš„è½¬æ¢æ•ˆç‡ã€‚</li>
</ul>
<h2 data-id="heading-12">å››ã€æ ¸å¿ƒä¹‹é—®å››ï¼šOoderåµŒå¥—ç»„ä»¶åŒ–ä¸React/Vueçš„ç»„ä»¶åŒ–ï¼Œæœ¬è´¨åŒºåˆ«åœ¨å“ªï¼Ÿ</h2>
<h3 data-id="heading-13">æœ¬è´¨å·®å¼‚ï¼šä¼ ç»Ÿç»„ä»¶åŒ–çš„è·¨åŸŸååŒå›°å¢ƒä¸Ooderçš„çªç ´æ–¹å‘</h3>
<p>ç»„ä»¶åŒ–çš„æ ¸å¿ƒç›®æ ‡æ˜¯â€œæ— é™ç»†åˆ†â€ï¼Œé€šè¿‡æ‹†åˆ†å¤æ‚åŠŸèƒ½æå‡ä»£ç å¤ç”¨æ€§å’Œç»´æŠ¤æ€§ã€‚ä½†ä¼ ç»Ÿå‰ç«¯ç»„ä»¶åŒ–ï¼ˆReact/Vueï¼‰å­˜åœ¨æ˜æ˜¾çš„é¢†åŸŸå±€é™ï¼šå…¶ä¸€ï¼Œä»…å±€é™äºå‰ç«¯UIé¢†åŸŸï¼Œæ— æ³•è·¨è¶Šå‰ç«¯è¾¹ç•Œï¼Œå®ç°ä¸åç«¯æœåŠ¡ã€ä¸šåŠ¡é€»è¾‘ã€ç”¨æˆ·è¡Œä¸ºçš„æ·±åº¦ååŒï¼›å…¶äºŒï¼Œè·¨åŸŸååŒéœ€è¦é¢å¤–çš„æ¥å£ã€çŠ¶æ€ç®¡ç†æœºåˆ¶ï¼Œå¢åŠ äº†æ¶æ„å¤æ‚åº¦ï¼›å…¶ä¸‰ï¼Œå•ä¸€é¢†åŸŸçš„ç»„ä»¶åŒ–ç†è®ºéš¾ä»¥å¤„ç†å…¨æ ˆåœºæ™¯çš„éœ€æ±‚ï¼Œå¯¼è‡´è®¾è®¡è¿‡åº¦å¤æ‚ï¼Œåè€Œé™ä½äº†å¼€å‘æ•ˆç‡ã€‚</p>
<p>Ooderæå‡ºâ€œè·¨é¢†åŸŸçš„åµŒå¥—ç»„ä»¶åŒ–â€è®¾è®¡ï¼Œä¸React/Vueçš„ç»„ä»¶åŒ–å­˜åœ¨æ˜æ˜¾å·®å¼‚ã€‚äºŒè€…çš„æœ¬è´¨åŒºåˆ«ç©¶ç«Ÿæ˜¯ä»€ä¹ˆï¼Ÿ</p>
<h3 data-id="heading-14">å·®å¼‚è§£æï¼šæ ¸å¿ƒåœ¨äºâ€œè·¨é¢†åŸŸååŒâ€ä¸â€œA2UIé€‚é…æ€§â€</h3>
<p>Ooderçš„åµŒå¥—ç»„ä»¶åŒ–ä¸React/Vueçš„å‰ç«¯ç»„ä»¶åŒ–å­˜åœ¨æœ¬è´¨å·®å¼‚ï¼Œè¿™ç§å·®å¼‚è´¯ç©¿è®¾è®¡ç†å¿µã€å®ç°æœºåˆ¶ã€æ¸²æŸ“æ–¹å¼ç­‰æ ¸å¿ƒå±‚é¢ï¼Œå…·ä½“å¯¹æ¯”å¯æ‹†è§£ä¸ºå››ç‚¹ï¼š</p>
<ol>
<li><strong>è®¾è®¡ç†å¿µï¼šè·¨é¢†åŸŸååŒ vs å‰ç«¯å±€é™</strong>ï¼šOoderçš„ç»„ä»¶åŒ–æ˜¯â€œè·¨é¢†åŸŸâ€çš„ï¼Œçªç ´äº†å‰ç«¯UIçš„è¾¹ç•Œï¼Œæ”¯æŒå°†å‰ç«¯ç»„ä»¶ã€åç«¯æœåŠ¡ã€ä¸šåŠ¡é€»è¾‘ã€ç”¨æˆ·è¡Œä¸ºå°è£…ä¸ºç»Ÿä¸€çš„ç»„ä»¶å•å…ƒï¼Œå®ç°å¤šé¢†åŸŸçš„ååŒï¼›è€ŒReact/Vueçš„ç»„ä»¶åŒ–ä»…å±€é™äºå‰ç«¯UIé¢†åŸŸï¼Œåç«¯æœåŠ¡ã€ä¸šåŠ¡é€»è¾‘éœ€è¦é€šè¿‡å¤–éƒ¨æ¥å£å¯¹æ¥ï¼Œæ— æ³•ä¸ç»„ä»¶æ·±åº¦èåˆã€‚</li>
<li><strong>å®ç°æœºåˆ¶ï¼šæ¥å£+æ³¨è§£å£°æ˜å¼ vs æ¨¡æ¿/JSXå£°æ˜å¼</strong>ï¼šOoderé‡‡ç”¨â€œæ¥å£+æ³¨è§£â€çš„å£°æ˜å¼ç»„ä»¶è®¾è®¡ï¼Œé€šè¿‡å®šä¹‰ç»„ä»¶æ¥å£å’Œæ³¨è§£å±æ€§ï¼Œæ˜ç¡®ç»„ä»¶çš„è¡Œä¸ºã€æ ·å¼ã€å±æ€§ã€äº‹ä»¶ï¼ˆå››åˆ†ç¦»è®¾è®¡ï¼‰ï¼›è€ŒReact/Vueé‡‡ç”¨æ¨¡æ¿æˆ–JSXçš„å£°æ˜å¼è®¾è®¡ï¼Œç»„ä»¶çš„æ ·å¼ã€é€»è¾‘ã€å±æ€§å¾€å¾€æ··åˆåœ¨æ¨¡æ¿ä¸­ï¼Œåç«¯æ— æ³•æ„ŸçŸ¥ç»„ä»¶çš„å®Œæ•´å®šä¹‰ã€‚</li>
<li><strong>æ¸²æŸ“æ–¹å¼ï¼šé™æ€æ¨¡æ¿æ¸²æŸ“ vs åŠ¨æ€æ¸²æŸ“</strong>ï¼šOoderé‡‡ç”¨â€œåç«¯è¾“å‡ºJSON+å‰ç«¯æ¨¡æ¿æ¸²æŸ“â€çš„é™æ€æ¸²æŸ“æ–¹å¼ï¼Œåç«¯é€šè¿‡æ³¨è§£è§£æç”Ÿæˆæ ‡å‡†åŒ–çš„JSONæ•°æ®ï¼Œå‰ç«¯ä»…è´Ÿè´£æ ¹æ®JSONæ¸²æŸ“ç»„ä»¶ï¼Œé€»è¾‘ç›¸å¯¹ç®€å•ï¼›è€ŒReact/Vueé‡‡ç”¨åŠ¨æ€æ¸²æŸ“æ–¹å¼ï¼Œæ¨¡æ¿ä¸­åŒ…å«å¤§é‡é€»è¾‘åˆ¤æ–­ã€çŠ¶æ€ç»‘å®šï¼Œåç«¯æ— æ³•æ„ŸçŸ¥å‰ç«¯çš„æ¸²æŸ“é€»è¾‘ï¼Œå‰åç«¯ååŒæˆæœ¬é«˜ã€‚</li>
<li><strong>A2UIé€‚é…æ€§ï¼šå¤©ç„¶é€‚é… vs é¢å¤–é€‚é…</strong>ï¼šOoderçš„ç»“æ„åŒ–ç»„ä»¶è®¾è®¡ï¼ˆæ¥å£+æ³¨è§£ï¼‰ä¾¿äºå¤§æ¨¡å‹è§£æå’Œç”Ÿæˆï¼Œèƒ½å¤Ÿç›´æ¥æ¥æ”¶AIçš„æŒ‡ä»¤ç”Ÿæˆè·¨é¢†åŸŸç»„ä»¶ï¼›è€ŒReact/Vueçš„åŠ¨æ€æ¨¡æ¿è®¾è®¡éœ€è¦é¢å¤–çš„è½¬æ¢æœºåˆ¶ï¼Œæ‰èƒ½è®©AIç†è§£ç»„ä»¶çš„é€»è¾‘å’Œç»“æ„ï¼ŒA2UIé€‚é…æˆæœ¬é«˜ã€‚</li>
</ol>
<h3 data-id="heading-15">æŠ€æœ¯å–èˆï¼šå…¨æ ˆå¤ç”¨ä¸åŠ¨æ€çµæ´»æ€§çš„å¹³è¡¡</h3>
<p><strong>æ ¸å¿ƒä¼˜åŠ¿</strong>ï¼š</p>
<ul>
<li>çœŸæ­£å®ç°â€œæ— é™ç»†åˆ†â€çš„ç»„ä»¶åŒ–ç›®æ ‡ï¼Œè·¨é¢†åŸŸç»„ä»¶å¯åœ¨ä¸åŒé¡¹ç›®ã€ä¸åŒåœºæ™¯ä¸­å¤ç”¨ï¼Œå¤§å¹…æå‡å¼€å‘æ•ˆç‡ï¼›</li>
<li>ç»“æ„åŒ–è®¾è®¡å®Œç¾é€‚é…A2UIæ¨¡å¼ï¼Œä¸ºAIç”Ÿæˆå…¨æ ˆç»„ä»¶æä¾›äº†æ¸…æ™°çš„æŠ€æœ¯è½½ä½“ï¼Œé™ä½äº†è‡ªåŠ¨åŒ–å¼€å‘çš„éš¾åº¦ï¼›</li>
<li>å…¨æ ˆç»„ä»¶åŒ–æ¶ˆé™¤äº†å‰åç«¯ååŒçš„â€œå£å’â€ï¼Œè®©ç»„ä»¶åŒæ—¶åŒ…å«UIã€ä¸šåŠ¡ã€æ•°æ®é€»è¾‘ï¼Œå‡å°‘äº†æ¥å£é€‚é…ã€æ•°æ®æ ¡éªŒç­‰é‡å¤å·¥ä½œã€‚</li>
</ul>
<p><strong>å±€é™æ€§</strong>ï¼š</p>
<ul>
<li>å­¦ä¹ æ›²çº¿é™¡å³­ï¼Œå¼€å‘è€…éœ€è¦å…·å¤‡å…¨æ ˆæ€ç»´ï¼ŒåŒæ—¶æŒæ¡æ¥å£è®¾è®¡ã€æ³¨è§£ä½¿ç”¨ã€å‰åç«¯å¼€å‘ç­‰å¤šé¢†åŸŸçŸ¥è¯†ï¼›</li>
<li>åœ¨åŠ¨æ€äº¤äº’åœºæ™¯çš„çµæ´»æ€§ä¸Šä¸å¦‚React/Vueï¼Œå¯¹äºéœ€è¦é¢‘ç¹ä¿®æ”¹ç»„ä»¶é€»è¾‘ã€åŠ¨æ€è°ƒæ•´UIçš„åœºæ™¯ï¼Œå¼€å‘æ•ˆç‡è¾ƒä½ï¼›</li>
<li>ç»„ä»¶ç”Ÿæ€ç›¸å¯¹è–„å¼±ï¼Œç›¸æ¯”React/Vueä¸°å¯Œçš„å¼€æºç»„ä»¶åº“ï¼ŒOoderçš„å¯å¤ç”¨ç»„ä»¶èµ„æºè¾ƒå°‘ï¼Œå®šåˆ¶åŒ–å¼€å‘æˆæœ¬è¾ƒé«˜ã€‚</li>
</ul>
<h2 data-id="heading-16">æ€»ç»“ï¼šOoderæ¶æ„çš„æŠ€æœ¯å®šä½ä¸é€‚ç”¨åœºæ™¯</h2>
<p>æ·±å…¥æ¢³ç†Ooderæ¶æ„çš„è®¾è®¡é€»è¾‘ä¸éš¾å‘ç°ï¼šå…¶æ‰€æœ‰è®¾è®¡å–èˆï¼Œéƒ½å›´ç»•ç€â€œé€‚é…A2UIæ¨¡å¼â€â€œé™ä½å…¨æ ˆååŒæˆæœ¬â€è¿™ä¸¤ä¸ªæ ¸å¿ƒç›®æ ‡ã€‚å®ƒå¹¶éè¦æ›¿ä»£React/Vueç­‰ä¼ ç»Ÿå‰ç«¯æ¡†æ¶ï¼Œè€Œæ˜¯ä¸ºå¤§æ¨¡å‹æ—¶ä»£çš„å…¨æ ˆå¼€å‘æä¾›äº†ä¸€ç§å…¨æ–°çš„æŠ€æœ¯é€‰æ‹©ã€‚</p>
<p>ä»æŠ€æœ¯å®šä½æ¥çœ‹ï¼ŒOoderæ¶æ„æ›´é€‚åˆCNç¯å¢ƒä¸‹çš„ä¼ä¸šçº§åº”ç”¨å¼€å‘â€”â€”å°¤å…¶æ˜¯è¡¨å•å¯†é›†å‹ç³»ç»Ÿã€åå°ç®¡ç†ç³»ç»Ÿã€ä½ä»£ç /é›¶ä»£ç å¹³å°ç­‰åœºæ™¯ï¼Œå…¶A2UIé€‚é…æ€§å¼ºã€å…¨æ ˆååŒæ•ˆç‡é«˜çš„ä¼˜åŠ¿èƒ½å¤Ÿå¾—åˆ°å……åˆ†å‘æŒ¥ã€‚è€Œå¯¹äºéœ€è¦å¤æ‚åŠ¨æ€äº¤äº’ã€é«˜åº¦å®šåˆ¶åŒ–UIçš„åœºæ™¯ï¼ˆå¦‚Cç«¯åº”ç”¨ã€å¯è§†åŒ–å¤§å±ï¼‰ï¼ŒReact/Vueä»å…·å¤‡ä¸å¯æ›¿ä»£çš„ä¼˜åŠ¿ã€‚</p>
<p>å¯¹äºå¼€å‘å›¢é˜Ÿè€Œè¨€ï¼Œé€‰æ‹©Ooderæ¶æ„éœ€è¦æƒè¡¡å…¶æ ¸å¿ƒä¼˜åŠ¿ä¸è¿ç§»æˆæœ¬ï¼šå¦‚æœå›¢é˜Ÿèšç„¦ä¼ä¸šçº§Bç«¯å¼€å‘ï¼Œä¸”å¸Œæœ›å€ŸåŠ©A2UIæå‡å¼€å‘æ•ˆç‡ã€é™ä½å…¨æ ˆååŒæˆæœ¬ï¼Œé‚£ä¹ˆOoderæ¶æ„å€¼å¾—å°è¯•ï¼›å¦‚æœå›¢é˜Ÿé•¿æœŸæ·±è€•Cç«¯åœºæ™¯ï¼Œæˆ–å¯¹åŠ¨æ€äº¤äº’çµæ´»æ€§è¦æ±‚æé«˜ï¼Œåˆ™å»ºè®®ç»§ç»­æ²¿ç”¨React/Vueç”Ÿæ€ã€‚</p>
<p>ä»æŠ€æœ¯å‘å±•è¶‹åŠ¿æ¥çœ‹ï¼Œéšç€å¤§æ¨¡å‹æŠ€æœ¯çš„ä¸æ–­æˆç†Ÿå’ŒA2UIæ¨¡å¼çš„æ™®åŠï¼Œå…¨æ ˆä¸€ä½“åŒ–ã€æ³¨è§£é©±åŠ¨ã€è·¨é¢†åŸŸç»„ä»¶åŒ–å°†æˆä¸ºä¼ä¸šçº§å¼€å‘çš„é‡è¦æ¼”è¿›æ–¹å‘ã€‚Ooderæ¶æ„ä½œä¸ºè¿™ä¸€æ–¹å‘çš„å…ˆè¡Œè€…ï¼Œè™½ç„¶ä»é¢ä¸´ç”Ÿæ€å»ºè®¾ã€å·¥å…·æˆç†Ÿåº¦ç­‰æŒ‘æˆ˜ï¼Œä½†æœªæ¥å¯æœŸã€‚</p>
<p><strong>æŠ€æœ¯å®è·µå»ºè®®</strong>ï¼šå­¦ä¹ å’Œè½åœ°Ooderæ¶æ„ï¼Œå»ºè®®ä»ç®€å•çš„ä¼ä¸šçº§è¡¨å•ã€åå°ç®¡ç†é¡¹ç›®å…¥æ‰‹ï¼Œå…ˆæŒæ¡æ ¸å¿ƒæ³¨è§£ä½“ç³»å’Œæ··åˆæ¶æ„çš„åŸºæœ¬åŸç†ï¼›åŒæ—¶å…³æ³¨Ooderç”Ÿæ€çš„å‘å±•ï¼Œç§¯æå‚ä¸ç¤¾åŒºå»ºè®¾ï¼Œé€šè¿‡å®è·µç§¯ç´¯å¯å¤ç”¨çš„ç»„ä»¶å’Œè§£å†³æ–¹æ¡ˆã€‚å¯¹äºå›¢é˜Ÿè€Œè¨€ï¼Œå¯é‡‡ç”¨â€œæ¸è¿›å¼è¿ç§»â€ç­–ç•¥ï¼Œå…ˆå°†éƒ¨åˆ†æ ‡å‡†åŒ–æ¨¡å—ç”¨Ooderé‡æ„ï¼ŒéªŒè¯å…¶æ•ˆæœåå†é€æ­¥æ¨å¹¿ï¼Œé™ä½æŠ€æœ¯è¿ç§»é£é™©ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[é¢„å…ˆæ„å»ºçš„CNCFæµæ°´çº¿ï¼šä»Gitåˆ°åœ¨Kubernetesä¸Šè¿è¡Œ]]></title>    <link>https://juejin.cn/post/7587997893987893275</link>    <guid>https://juejin.cn/post/7587997893987893275</guid>    <pubDate>2025-12-26T13:58:21.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587997893987893275" data-draft-id="7587632484427808819" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="é¢„å…ˆæ„å»ºçš„CNCFæµæ°´çº¿ï¼šä»Gitåˆ°åœ¨Kubernetesä¸Šè¿è¡Œ"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½,äº‘è®¡ç®—"/> <meta itemprop="datePublished" content="2025-12-26T13:58:21.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="AKAMAI"/> <meta itemprop="url" content="https://juejin.cn/user/829502942352628"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            é¢„å…ˆæ„å»ºçš„CNCFæµæ°´çº¿ï¼šä»Gitåˆ°åœ¨Kubernetesä¸Šè¿è¡Œ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/829502942352628/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    AKAMAI
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-26T13:58:21.000Z" title="Fri Dec 26 2025 13:58:21 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>Kubernetes ä¸ºå¤§è§„æ¨¡è¿è¡Œå®¹å™¨æä¾›äº†å¯èƒ½ï¼Œä½†å¹¶æœªä½¿å…¶å˜å¾—ç®€å•ã€‚</p>
<p>äº¤ä»˜ä¸€ä¸ªåº”ç”¨è¿œä¸æ­¢æ‰§è¡Œä¸€å¥ kubectl apply é‚£ä¹ˆç®€å•ã€‚åœ¨ä»£ç çœŸæ­£è§¦åŠé›†ç¾¤ä¹‹å‰ï¼Œéœ€è¦æ„å»ºé•œåƒã€æ‰«ææ¼æ´ã€ä¸²æ¥é…ç½®ã€å®æ–½ç­–ç•¥ã€ç»„è£…CI/CDæµæ°´çº¿ï¼Œå¹¶æ¥å…¥æ—¥å¿—ã€ç›‘æ§ä¸è¿½è¸ªä½“ç³»ã€‚æ¯ä¸€æ­¥éƒ½æ¶‰åŠå·¥å…·çš„é€‰å‹ã€é›†æˆï¼Œå¹¶åœ¨æŠ€æœ¯ç”Ÿæ€æŒç»­æ¼”è¿›ä¸­ç»´æŠ¤è¿™äº›é›†æˆçš„ç¨³å®šæ€§ã€‚</p>
<p>è¿™äº›äº‹å›ºç„¶èƒ½åšåˆ°ï¼Œå´å¼‚å¸¸ç¹çã€‚å®ƒä»¬ä¼šä¸æ–­åˆ†æ•£ä½ çš„ç²¾åŠ›ï¼Œè®©ä½ åç¦»çœŸæ­£çš„æ ¸å¿ƒç›®æ ‡ï¼šäº¤ä»˜å¯é è½¯ä»¶ï¼Œè€Œéä¸åº•å±‚å¹³å°ææ–—ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.akamai.com%2Fzh%2Fproducts%2Fapp-platform%3Futm_campaign%3Df-mc-65893%26utm_id%3Dapj_cc%26utm_source%3Djuejin%26utm_medium%3Darticle_advertorial%26utm_content%3Djuejing_251226_external1_blogarticles239" target="_blank" title="https://www.akamai.com/zh/products/app-platform?utm_campaign=f-mc-65893&amp;utm_id=apj_cc&amp;utm_source=juejin&amp;utm_medium=article_advertorial&amp;utm_content=juejing_251226_external1_blogarticles239" ref="nofollow noopener noreferrer">LKEçš„åº”ç”¨å¹³å°</a>é€šè¿‡ä¸€å¥—é¢„å…ˆè®¾è®¡ã€å®Œå…¨é›†æˆçš„æµæ°´çº¿æ¶ˆé™¤äº†è¿™ç±»è´Ÿæ‹…ã€‚è¯¥æµæ°´çº¿å®Œå…¨åŸºäºå¼€æºçš„äº‘åŸç”Ÿè®¡ç®—åŸºé‡‘ä¼šï¼ˆCNCFï¼‰å·¥å…·æ„å»ºã€‚ä»å·¥ç¨‹å¸ˆå°†ä»£ç æäº¤è‡³Gitä»“åº“å¼€å§‹ï¼Œåˆ°åº”ç”¨åœ¨ç”Ÿäº§ç¯å¢ƒç¨³å®šè¿è¡Œç»“æŸâ€”â€”ç­–ç•¥ç®¡æ§ã€å®‰å…¨åˆè§„ä¸å¯è§‚æµ‹èƒ½åŠ›å‡å·²å†…ç½®å…¶ä¸­â€”â€”æ•´ä¸ªè¿‡ç¨‹è‡ªåŠ¨åŒ–è´¯é€šï¼Œå„ç¯èŠ‚æ— ç¼è¡”æ¥ï¼ŒçœŸæ­£åšåˆ°å¼€ç®±å³ç”¨ã€‚</p>
<p>æœ¬æ–‡å°†æ·±å…¥è§£æåº”ç”¨å¹³å°çš„è¿ä½œæœºåˆ¶ï¼Œå¹¶å±•ç¤ºå®ƒå¦‚ä½•å¤§å¹…ç®€åŒ–ä»ä»£ç æäº¤åˆ°ç”Ÿäº§ä¸Šçº¿çš„è·¯å¾„ã€‚</p>
<h4 data-id="heading-0"><strong><strong>åº”ç”¨å¹³å°å®ç°è‡ªåŠ¨åŒ–</strong></strong></h4>
<p>LKEçš„åº”ç”¨å¹³å°é€šè¿‡è‡ªåŠ¨æ„å»ºã€ä¿æŠ¤ã€éƒ¨ç½²å’Œç›‘æ§æ‚¨çš„å®¹å™¨åŒ–åº”ç”¨ä¸æœåŠ¡ï¼Œç®€åŒ–äº†ä»æºä»£ç åˆ°ç”Ÿäº§ç¯å¢ƒçš„å®Œæ•´åº”ç”¨ç”Ÿå‘½å‘¨æœŸã€‚å‡­å€Ÿå†…ç½®çš„é›†æˆæµæ°´çº¿ã€ç­–ç•¥å’Œå¯è§‚æµ‹æ€§ï¼Œå¹³å°å’ŒDevOpså›¢é˜Ÿè·å¾—äº†ç»Ÿä¸€æ ‡å‡†ä¸”åˆè§„çš„å·¥ä½œæµç¨‹ï¼Œå¯ä»¥å°†åº”ç”¨æŠ•å…¥ç”Ÿäº§ï¼Œè€Œæ— éœ€ç®¡ç†å¤æ‚çš„å·¥å…·é“¾ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3c42757701b0437285c0b74b66485a0e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUtBTUFJ:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767362485&amp;x-signature=IGQUSJbHGEqzuhrsIUJqR%2F7t0js%3D" alt="" loading="lazy"/></p>
<p>ä¸ºäº†å±•ç¤ºåº”ç”¨å¹³å°æ¶ˆé™¤äº†å¤šå°‘å¤æ‚æ€§ï¼Œè®©æˆ‘ä»¬é€šè¿‡å…¶å†…ç½®é›†æˆåŠŸèƒ½ï¼Œé€æ­¥äº†è§£å®ƒç«¯åˆ°ç«¯è‡ªåŠ¨åŒ–çš„10ä¸ªæ­¥éª¤ã€‚</p>
<p>è¿™10ä¸ªæ­¥éª¤åˆ†ä¸ºä¸‰å¤§ç±»ï¼š</p>
<ol>
<li>ä»£ç </li>
<li>ä»ä»£ç åˆ°ç”Ÿäº§</li>
<li>åº”ç”¨å‘å¸ƒâ€”â€”æš´éœ²ä¸å¯è§‚æµ‹æ€§</li>
</ol>
<h4 data-id="heading-1"><strong><strong>ä»£ç </strong></strong></h4>
<p><strong><strong>æ­¥éª¤ 1ï¼šç›‘å¬Gitäº‹ä»¶</strong></strong></p>
<p>åº”ç”¨å¹³å°ç›´æ¥è¿æ¥åˆ°æ‚¨çš„<strong><strong>Gitä»£ç ä»“åº“</strong></strong>ï¼Œå¹¶æŒç»­ç›‘æ§æ¥è‡ªç‰¹å®šåˆ†æ”¯çš„æäº¤å’Œæ‹‰å–è¯·æ±‚ã€‚å½“æ¨é€ä»£ç æ—¶ï¼Œå¹³å°ä¼šæ£€æµ‹åˆ°è¯¥äº‹ä»¶å¹¶è‡ªåŠ¨è§¦å‘æµæ°´çº¿ï¼Œæ— éœ€é…ç½®Webhookæˆ–æ‰‹åŠ¨è®¾ç½®CIã€‚</p>
<h4 data-id="heading-2"><strong><strong>ä»ä»£ç åˆ°ç”Ÿäº§</strong></strong></h4>
<p>è¿™æ˜¯é¢„é…ç½®å·¥å…·é“¾å‘æŒ¥æœ€å¤§ä»·å€¼çš„åœ°æ–¹ã€‚åœ¨ä¸€ä¸ªéœ€è¦è‡ªå·±åŠ¨æ‰‹æ­å»ºçš„å¹³å°ä¸­ï¼Œè¿æ¥è¿™äº›å·¥å…·éœ€è¦æ•°å‘¨çš„é›†æˆå·¥ä½œã€‚è€Œåœ¨è¿™é‡Œï¼Œå®ƒä»¬å¼€ç®±å³ç”¨ï¼ŒååŒå·¥ä½œã€‚</p>
<p><strong><strong>æ­¥éª¤ 2ï¼šä½¿ç”¨Grypeæ‰«ææºä»£ç </strong></strong></p>
<p>Grypeæ˜¯ä¸€ä¸ªé’ˆå¯¹å®¹å™¨é•œåƒå’Œæ–‡ä»¶ç³»ç»Ÿçš„æ¼æ´æ‰«æå™¨ï¼Œå¯è¯†åˆ«åº“ã€åŒ…å’Œæ¡†æ¶ä¸­çš„å·²çŸ¥é£é™©ã€‚</p>
<p>Grypeå·²åœ¨åº”ç”¨å¹³å°ä¸­é¢„å…ˆé…ç½®ï¼Œç”¨äºå¯¹ç…§CVEæ•°æ®åº“å’Œå®‰å…¨å…¬å‘Šè¿›è¡Œæ£€æŸ¥ï¼Œå¹¶åœ¨å·¥ä½œæµç¨‹æ—©æœŸæš´éœ²é—®é¢˜ã€‚å®ƒä¸ºå¼€å‘äººå‘˜æä¾›äº†æ›´å¿«çš„åé¦ˆï¼Œå¹¶åœ¨æ¼æ´è¿›å…¥æ„å»ºé˜¶æ®µä¹‹å‰é™ä½äº†ä¿®å¤æˆæœ¬ã€‚</p>
<p><strong><strong>æ­¥éª¤ 3ï¼šæ„å»ºé•œåƒ</strong></strong></p>
<p>ä¸€æ—¦æºä»£ç é€šè¿‡å®‰å…¨éªŒè¯ï¼Œå¹³å°ä¼šè‡ªåŠ¨ä½¿ç”¨æ ‡å‡†Dockerfileæˆ–Buildpacksæ„å»ºæ‚¨çš„å®¹å™¨é•œåƒã€‚æ„å»ºç¯å¢ƒç»è¿‡ä¼˜åŒ–ï¼Œå…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š</p>
<ul>
<li>åˆ†å±‚ç¼“å­˜ä»¥åŠ é€Ÿè¿­ä»£</li>
<li>æ”¯æŒå¤šé˜¶æ®µæ„å»ºï¼Œä»¥ç”Ÿæˆæ›´å°ã€æ›´é«˜æ•ˆçš„é•œåƒ</li>
<li>å†…ç½®èµ„æºé™åˆ¶ï¼Œé˜²æ­¢å¤±æ§çš„æ„å»º</li>
</ul>
<p>è¿™ç¡®ä¿äº†é•œåƒåˆ›å»ºçš„ä¸€è‡´æ€§å’Œå¯é‡å¤æ€§ï¼Œæ— éœ€é¢å¤–çš„é…ç½®æˆ–æµæ°´çº¿ç»´æŠ¤ã€‚</p>
<p><strong><strong>æ­¥éª¤ 4ï¼šä½¿ç”¨Harborå­˜å‚¨é•œåƒå¹¶ç”¨Trivyæ‰«æ</strong></strong></p>
<p>æ–°æ„å»ºçš„é•œåƒå°†å­˜æ”¾åœ¨å…¶ä¸“å±çš„ç§æœ‰å®¹å™¨æ³¨å†Œè¡¨ä¸­ï¼Œè¯¥æ³¨å†Œè¡¨ç”±Harboræä¾›â€”â€”ä¸€ä¸ªä¼ä¸šçº§å®¹å™¨æ³¨å†Œè¡¨ï¼Œé¢„å…ˆé…ç½®äº†åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶ã€é•œåƒç­¾åå’Œä¿ç•™ç­–ç•¥ã€‚é•œåƒåˆ°è¾¾çš„ç¬é—´ï¼ŒTrivyå°±ä¼šå¯¹å®Œæ•´çš„å®¹å™¨è¿›è¡Œæ·±åº¦å®‰å…¨æ‰«æï¼šåŸºç¡€å±‚ã€æ“ä½œç³»ç»ŸåŒ…ã€åº”ç”¨ä¾èµ–é¡¹å’Œé…ç½®æ–‡ä»¶ã€‚</p>
<p>åº”ç”¨å¹³å°å°†Trivyé…ç½®ä¸ºæŒç»­æ‰«æï¼Œä¸ä»…é’ˆå¯¹åˆæ¬¡ä¸Šä¼ çš„é•œåƒï¼Œæ›´ä¼šåœ¨æ–°æ¼æ´æŠ«éœ²æ—¶ï¼Œè‡ªåŠ¨å¯¹ç°æœ‰é•œåƒé‡æ–°æ‰«æã€‚è¿™ç¡®ä¿èƒ½åŠæ—¶å‘ç°æ–°å¨èƒï¼Œè€Œæ— éœ€ä¾èµ–ä»»ä½•æ‰‹åŠ¨æ‰«æè®¡åˆ’ã€‚</p>
<p><strong><strong>æ­¥éª¤ 5ï¼šé€šè¿‡åº”ç”¨ç›®å½•â€”â€”é»„é‡‘è·¯å¾„æ¨¡æ¿åˆ›å»ºé…ç½®</strong></strong></p>
<p>åº”ç”¨å¹³å°ä½¿ç”¨åŸºäºKubernetesæœ€ä½³å®è·µé¢„å…ˆè®¾è®¡çš„é…ç½®æ¨¡æ¿ã€‚ä»è€Œå¤§å¹…å‡å°‘æ‰‹å·¥ç¼–å†™YAMLçš„å¤æ‚åº¦ï¼Œå¹¶æ”¯æŒåœ¨éœ€è¦æ—¶ä»å¯å¯¹é…ç½®è¿›è¡Œç»†åŒ–è°ƒæ•´ã€‚</p>
<p><strong><strong>æ­¥éª¤ 6ï¼šä½¿ç”¨Kyvernoæ£€æŸ¥å®‰å…¨ç­–ç•¥</strong></strong></p>
<p>åœ¨ä»»ä½•éƒ¨ç½²åˆ°è¾¾æ‚¨çš„é›†ç¾¤ä¹‹å‰ï¼Œé¢„å…ˆé…ç½®çš„Kyvernoä¼šå¼ºåˆ¶æˆ–å®¡è®¡å®‰å…¨ç­–ç•¥ã€‚å¼ºåˆ¶æ‰§è¡Œç­–ç•¥å°†é˜»æ­¢æ¸…å•è¢«éƒ¨ç½²ã€‚</p>
<p>è¿™äº›è§„åˆ™å¯ä»¥æ ¹æ®ç»„ç»‡éœ€æ±‚æˆ–æ·»åŠ æ¡†æ¶è¿›è¡Œè‡ªå®šä¹‰ï¼Œä½†é›†æˆæœ¬èº«å·²ç»å®Œæˆã€‚</p>
<p><strong><strong>æ­¥éª¤ 7ï¼šä½¿ç”¨Argo CDè¿›è¡Œéƒ¨ç½²</strong></strong></p>
<p>Argo CDåŸºäºGitOpsåŸåˆ™ç®¡ç†åˆ°Kubernetesé›†ç¾¤çš„éƒ¨ç½²ã€‚ç»è¿‡éªŒè¯çš„Gitæ¸…å•æˆä¸ºå”¯ä¸€äº‹å®æ¥æºï¼ŒArgo CDä¼šè‡ªåŠ¨åŒæ­¥é›†ç¾¤çŠ¶æ€ã€‚</p>
<p>åº”ç”¨å¹³å°å·²é¢„å…ˆé…ç½®Argo CDï¼Œå…·æœ‰ä»¥ä¸‹ç‰¹æ€§ï¼šGitå˜æ›´æ—¶è‡ªåŠ¨åŒæ­¥ã€é›†ç¾¤çŠ¶æ€å˜åŒ–æ—¶è‡ªæˆ‘ä¿®å¤ï¼Œä»¥åŠéƒ¨ç½²å¤±è´¥æ—¶è‡ªåŠ¨å›æ»šã€‚</p>
<p><strong><strong>æ­¥éª¤ 8ï¼šä½¿ç”¨Trivyè¿›è¡Œè¿è¡Œæ—¶æ‰«æ</strong></strong></p>
<p>éƒ¨ç½²åï¼ŒTrivyä¼šå¯¹è¿è¡Œçš„å®¹å™¨è¿›è¡Œè¿è¡Œæ—¶æ‰«æï¼Œæ£€æŸ¥éƒ¨ç½²åå‡ºç°çš„æ¼æ´ä»¥åŠå¼•å…¥é£é™©çš„é…ç½®æ›´æ”¹ã€‚è¿™ç§è¿è¡Œæ—¶æ‰«æåœ¨åå°æŒç»­è¿è¡Œï¼Œä¸å½±å“åº”ç”¨æ€§èƒ½ã€‚</p>
<h4 data-id="heading-3"><strong><strong>åº”ç”¨å‘å¸ƒâ€”â€”æš´éœ²ä¸å¯è§‚æµ‹æ€§</strong></strong></h4>
<p><strong><strong>æ­¥éª¤ 9ï¼šä½¿ç”¨NGINXå’ŒIstioæš´éœ²æœåŠ¡</strong></strong></p>
<p>åº”ç”¨å¹³å°ä½¿ç”¨é¢„å…ˆé…ç½®çš„NGINX Ingress Controllerå’ŒIstioæœåŠ¡ç½‘æ ¼æ¥å¤„ç†æµé‡è·¯ç”±å’Œå®‰å…¨è¿æ¥ã€‚NGINXæä¾›å¤–éƒ¨å…¥å£ï¼Œå…·å¤‡è‡ªåŠ¨TLSè¯ä¹¦ç®¡ç†ã€é€Ÿç‡é™åˆ¶å’Œæµé‡è·¯ç”±è§„åˆ™ã€‚</p>
<p>Istioå¤„ç†é›†ç¾¤å†…çš„æœåŠ¡åˆ°æœåŠ¡é€šä¿¡ï¼Œé¢„å…ˆé…ç½®äº†åŒå‘TLSç”¨äºå®‰å…¨é€šä¿¡ã€ç”¨äºé‡‘ä¸é›€éƒ¨ç½²çš„æµé‡ç®¡ç†ä»¥åŠç”¨äºè°ƒè¯•å¾®æœåŠ¡çš„åˆ†å¸ƒå¼è¿½è¸ªã€‚</p>
<p><strong><strong>æ­¥éª¤ 10ï¼šä½¿ç”¨Prometheusç›‘æ§æœåŠ¡å¯ç”¨æ€§</strong></strong></p>
<p>PrometheusÂ æä¾›å¯è§‚æµ‹æ€§ï¼Œé¢„å…ˆé…ç½®ä¸ºä»æ‚¨çš„åº”ç”¨ã€KubernetesåŸºç¡€è®¾æ–½å’Œå¹³å°å·¥å…·ä¸­æŠ“å–æŒ‡æ ‡ã€‚æ‚¨å¯ä»¥ç«‹å³è·å¾—åº”ç”¨æ€§èƒ½ã€èµ„æºåˆ©ç”¨ç‡ã€é”™è¯¯ç‡å’Œå»¶è¿Ÿçš„å¯è§æ€§ã€‚</p>
<p>è¯¥é›†æˆåŒ…æ‹¬é¢„æ„å»ºçš„ä»ªè¡¨æ¿ã€é’ˆå¯¹å…³é”®é—®é¢˜çš„å‘Šè­¦è§„åˆ™ä»¥åŠä¸Â GrafanaÂ çš„è¿æ¥ä»¥è¿›è¡Œå¯è§†åŒ–ã€‚</p>
<h4 data-id="heading-4"><strong><strong>å¼€æºï¼Œæ— é”å®š</strong></strong></h4>
<p>æ­¤æµæ°´çº¿ä¸­çš„æ¯ä¸€ä¸ªå·¥å…·â€”â€”Â Grypeã€Â Harborã€Â Trivyã€Â Kyvernoã€Â Argo CDã€Â NGINXã€Istioå’Œ Prometheusâ€”â€”éƒ½ç›´æ¥æ¥è‡ªCNCFç”Ÿæ€ç³»ç»Ÿã€‚è¿™äº›ä¸æ˜¯ä¸“æœ‰çš„å®ç°æˆ–ä¾›åº”å•†çš„åˆ†æ”¯ï¼Œè€Œæ˜¯ç»è¿‡é…ç½®å’Œé›†æˆçš„å®é™…å¼€æºé¡¹ç›®ã€‚</p>
<p>åº”ç”¨å¹³å°å®Œæˆäº†æ‰€æœ‰çš„é›†æˆå’Œè‡ªåŠ¨åŒ–å·¥ä½œï¼Œä»¥åŠå·¥å…·çš„æŒç»­ç»´æŠ¤ï¼Œå› æ­¤ç”¨æˆ·å¯ä»¥ä¸“æ³¨äºåº”ç”¨ç¨‹åºçš„å¼€å‘ã€‚</p>
<p>éƒ¨ç½²åˆ¶å“ä¿æŒå¯ç§»æ¤æ€§ã€‚Kubernetesæ¸…å•å¯ä»¥åœ¨ä»»ä½•é›†ç¾¤ä¸Šå·¥ä½œã€‚Harborä¸­çš„å®¹å™¨é•œåƒå¯ä»¥è¿ç§»åˆ°ä»»ä½•ç¬¦åˆå¼€æ”¾å®¹å™¨è®¡åˆ’ï¼ˆOCIï¼‰æ ‡å‡†çš„æ³¨å†Œè¡¨ã€‚Kyvernoç­–ç•¥æ˜¯æ ‡å‡†çš„YAMLæ–‡ä»¶ï¼Œåœ¨ä»»ä½•è¿è¡ŒKyvernoçš„åœ°æ–¹éƒ½æœ‰æ•ˆã€‚</p>
<p>åº”ç”¨å¹³å°é€šè¿‡é¢„å…ˆé…ç½®å’Œé›†æˆæ¥å¢åŠ ä»·å€¼ï¼Œè€Œä¸æ˜¯é€šè¿‡åˆ›å»ºé”å®šçš„ä¸“æœ‰æ‰©å±•ã€‚</p>
<h4 data-id="heading-5"><strong><strong>ä¸ºä»€ä¹ˆé¢„å…ˆè®¾è®¡å·¥å…·é“¾å¾ˆé‡è¦</strong></strong></h4>
<p>ä½¿ç”¨åº”ç”¨å¹³å°ä¸è‡ªè¡Œç»„è£…å·¥å…·ä¹‹é—´çš„åŒºåˆ«ï¼Œåœ¨äºå‰è€…å·²å°†æ·±åšçš„è¿ç»´çŸ¥è¯†æ²‰æ·€åœ¨é…ç½®ä¹‹ä¸­ã€‚æ¯ä¸ªå·¥å…·éƒ½åŒ…å«æ•°åä¸ªé…ç½®é€‰é¡¹ã€‚å•æ˜¯æ­£ç¡®é…ç½®å…¶ä¸­ä¸€é¡¹å·²éæ˜“äº‹ï¼Œè€Œè®©å®ƒä»¬ç¨³å®šååŒå·¥ä½œåˆ™æ›´æ˜¯éš¾ä¸ŠåŠ éš¾ã€‚</p>
<p>åº”ç”¨å¹³å°å°†è¿™äº›ç”Ÿäº§çº§Kuberneteséƒ¨ç½²ä¸­çš„æœ€ä½³å®è·µç¼–ç å›ºåŒ–ï¼šTrivyå¦‚ä½•ä¸Harboræ·±åº¦é›†æˆã€å“ªäº›Kyvernoç­–ç•¥èƒ½ç²¾å‡†æ•æ‰å…³é”®é£é™©ã€Argo CDå¦‚ä½•æ™ºèƒ½æ‰§è¡Œå›æ»šã€å“ªäº›PrometheusæŒ‡æ ‡çœŸæ­£å†³å®šç³»ç»Ÿå¥åº·ã€‚è¿™äº›é…ç½®å‡èšäº†æ•°ç™¾ä¸ªè¿ç»´æ—¥å¤œçš„å®æˆ˜ç²¾åï¼Œæœ€ç»ˆæµ“ç¼©ä¸ºä¸€ä¸ªå¼€ç®±å³ç”¨ã€ç¨³å®šå¯é çš„åŸºç¡€å¹³å°ã€‚</p>
<h4 data-id="heading-6"><strong><strong>ä»æ•°æœˆåˆ°åˆ†é’Ÿ</strong></strong></h4>
<p>è‹¥è¦è‡ªè¡Œæ„å»ºè¿™æ¡æµæ°´çº¿ï¼Œæ‚¨å°†ä¸å¾—ä¸å®Œæˆå·¥å…·é€‰å‹ã€ç³»ç»Ÿé›†æˆã€è¿æ¥è°ƒè¯•ä¸ç‰ˆæœ¬é€‚é…ç­‰ä¸€ç³»åˆ—å¤æ‚å·¥ä½œã€‚å¹³å°å›¢é˜Ÿé€šå¸¸éœ€æŠ•å…¥12è‡³18ä¸ªæœˆæ‰èƒ½è¾¾æˆç”Ÿäº§å°±ç»ªçŠ¶æ€ï¼Œæ­¤åè¿˜éœ€æŒç»­æŠ•å…¥èµ„æºè¿›è¡Œç»´æŠ¤ä¸å‡çº§ã€‚</p>
<p>è€Œåº”ç”¨å¹³å°è®©æ‚¨ä¸€é”®è·å¾—å®Œæ•´èƒ½åŠ›ï¼šå®‰å…¨æ‰«æè‡ªåŠ¨æ‰§è¡Œï¼Œéƒ¨ç½²æµç¨‹é€šè¿‡ç­–ç•¥éªŒè¯ï¼ŒæœåŠ¡ä»¥è§„èŒƒçš„æµé‡ç®¡ç†ç­–ç•¥å¯¹å¤–æš´éœ²ï¼Œç›‘æ§ç³»ç»Ÿæ— éœ€é…ç½®å³å¯å®æ—¶é‡‡é›†æŒ‡æ ‡ã€‚æ‚¨æ— éœ€è€—è´¹æ•°æœˆè¿›è¡Œå¹³å°æ­å»ºï¼Œåœ¨ç¬¬ä¸€å¤©å³å¯ç›´æ¥éƒ¨ç½²åº”ç”¨ç¨‹åºã€‚</p>
<h4 data-id="heading-7"><strong><strong>ç”Ÿå‘½å‘¨æœŸç®¡ç†</strong></strong></h4>
<p>é€šè¿‡å…¨ç”Ÿå‘½å‘¨æœŸç®¡ç†è¶…è¿‡30ä¸ªKubernetesé¡¹ç›®çš„å¤æ‚æ›´æ–°ï¼Œåº”ç”¨å¹³å°å°†å·¥ç¨‹å›¢é˜Ÿä»ç¹é‡çš„ç»´æŠ¤å·¥ä½œä¸­è§£æ”¾å‡ºæ¥ã€‚å®ƒç¡®ä¿æ‚¨çš„éƒ¨ç½²ä¸ä¸Šæ¸¸å¼€æºç‰ˆæœ¬è‡ªåŠ¨åŒæ­¥ï¼Œå®ç°äº†å¯æŒç»­çš„æŠ€æœ¯æ¼”è¿›ã€‚</p>
<p>æ‚¨çš„å›¢é˜Ÿæ— éœ€å†ä¸ºæ‰‹åŠ¨å‡çº§è€—è´¹ç²¾åŠ›ï¼Œè½¬è€Œäº«ç”¨ä¸€ä¸ªå§‹ç»ˆæœ€æ–°ã€å®Œå…¨å—æ§çš„å¹³å°ã€‚è¿™ä¸ä»…æ˜¾è‘—é™ä½äº†æŠ€æœ¯å€ºåŠ¡ï¼Œæ›´ä»ä½“ç³»ä¸Šä¿éšœäº†ä¸šåŠ¡çš„é•¿æœŸç¨³å®šè¿è¡Œã€‚</p>
<h4 data-id="heading-8"><strong><strong>å¼€å§‹ä½¿ç”¨</strong></strong></h4>
<p>LKEçš„åº”ç”¨å¹³å°è¿è¡Œåœ¨æ ‡å‡†çš„LKEåŸºç¡€è®¾æ–½ä¸Šï¼Œæ— éœ€é¢å¤–çš„è®¸å¯è´¹ç”¨ã€‚æ‚¨åªéœ€ä¸ºæ‚¨ä½¿ç”¨çš„Kubernetesèµ„æºä»˜è´¹ã€‚</p>
<p>æ³¨å†Œä»¥éƒ¨ç½²æ‚¨çš„ç¬¬ä¸€ä¸ªåº”ç”¨ç¨‹åºï¼Œæˆ–è€…é˜…è¯»æ–‡æ¡£ä»¥æ¢ç´¢å¹³å°æ¶æ„å¹¶äº†è§£å¦‚ä½•æ ¹æ®æ‚¨çš„éœ€æ±‚è‡ªå®šä¹‰å¹³å°ã€‚</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.linode.com%2Fzh%2F%3Futm_campaign%3Df-mc-65893%26utm_id%3Dapj_cc%26utm_source%3Djuejin%26utm_medium%3Darticle_advertorial%26utm_content%3Djuejing_251226_external2_blogarticles239" target="_blank" title="https://www.linode.com/zh/?utm_campaign=f-mc-65893&amp;utm_id=apj_cc&amp;utm_source=juejin&amp;utm_medium=article_advertorial&amp;utm_content=juejing_251226_external2_blogarticles239" ref="nofollow noopener noreferrer">æ³¨å†Œ</a>ä»¥åˆ›å»ºæ‚¨çš„ç¬¬ä¸€ä¸ªé›†ç¾¤</li>
<li>é˜…è¯»æ–‡æ¡£ä»¥æ¢ç´¢é›†æˆå·¥å…·å’ŒåŠŸèƒ½</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¦‚ä½•åœ¨äºšé©¬é€Šäº‘ç§‘æŠ€éƒ¨ç½²é«˜å¯ç”¨MaxKBçŸ¥è¯†åº“åº”ç”¨]]></title>    <link>https://juejin.cn/post/7587776610436513807</link>    <guid>https://juejin.cn/post/7587776610436513807</guid>    <pubDate>2025-12-26T12:49:19.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587776610436513807" data-draft-id="7587743345197940788" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¦‚ä½•åœ¨äºšé©¬é€Šäº‘ç§‘æŠ€éƒ¨ç½²é«˜å¯ç”¨MaxKBçŸ¥è¯†åº“åº”ç”¨"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-12-26T12:49:19.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="äºšé©¬é€Šäº‘å¼€å‘è€…"/> <meta itemprop="url" content="https://juejin.cn/user/2850395271209496"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¦‚ä½•åœ¨äºšé©¬é€Šäº‘ç§‘æŠ€éƒ¨ç½²é«˜å¯ç”¨MaxKBçŸ¥è¯†åº“åº”ç”¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2850395271209496/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    äºšé©¬é€Šäº‘å¼€å‘è€…
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-26T12:49:19.000Z" title="Fri Dec 26 2025 12:49:19 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»12åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">æ¦‚è¿°</h2>
<p>MaxKBæ˜¯ä¸€æ¬¾åŸºäºRAGæŠ€æœ¯çš„å¼€æºçŸ¥è¯†åº“é—®ç­”ç³»ç»Ÿï¼Œæ”¯æŒå¯¹æ¥å¤šç§å¤§è¯­è¨€æ¨¡å‹ï¼Œå¹¿æ³›åº”ç”¨äºæ™ºèƒ½å®¢æœã€ä¼ä¸šçŸ¥è¯†åº“ç­‰åœºæ™¯ã€‚è™½ç„¶MaxKBç¤¾åŒºç‰ˆæä¾›äº†ä¾¿æ·çš„Dockerå¿«é€Ÿéƒ¨ç½²æ–¹å¼ï¼Œä½†ä¼ä¸šåœ¨ç”Ÿäº§ç¯å¢ƒä¸­éœ€è¦æ›´é«˜çš„å¯é æ€§ã€å®‰å…¨æ€§å’Œè¿ç»´ä¾¿åˆ©æ€§ã€‚</p>
<p>æœ¬æ–‡ä»‹ç»å¦‚ä½•åŸºäºäºšé©¬é€Šäº‘ç§‘æŠ€æ‰˜ç®¡æœåŠ¡æ„å»ºé«˜å¯ç”¨MaxKBåº”ç”¨æ¶æ„ã€‚æ–¹æ¡ˆé‡‡ç”¨AmazonECSè¿è¡Œå®¹å™¨åŒ–åº”ç”¨ï¼Œé…åˆRDS PostgreSQLï¼ˆå«pgvectoræ‰©å±•ï¼‰å’ŒElastiCache Valkeyæä¾›æ•°æ®æŒä¹…åŒ–å’Œç¼“å­˜èƒ½åŠ›ï¼Œé€šè¿‡Application Load Balancerå®ç°æµé‡åˆ†å‘å’Œå¤šå¯ç”¨åŒºéƒ¨ç½²ï¼Œç¡®ä¿99.9%ä»¥ä¸Šçš„æœåŠ¡å¯ç”¨æ€§ã€‚æ–¹æ¡ˆè¿˜é›†æˆäº†Secrets Managerè¿›è¡Œå¯†é’¥ç®¡ç†ï¼Œæ”¯æŒå¯¹æ¥Amazon Bedrockæ¨¡å‹æœåŠ¡ã€‚</p>
<p>æœ¬æ–‡é¢å‘éœ€è¦åœ¨ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²ä¼ä¸šçº§AIçŸ¥è¯†åº“çš„æ¶æ„å¸ˆå’Œè¿ç»´å·¥ç¨‹å¸ˆï¼Œæä¾›ä»æ¶æ„è®¾è®¡ã€æœåŠ¡é…ç½®åˆ°éƒ¨ç½²éªŒè¯çš„å®Œæ•´å®æ–½æŒ‡å—ã€‚</p>
<blockquote>
<p>ğŸ“¢é™æ—¶æ’æ’­ï¼šæ— éœ€ç®¡ç†åŸºç¡€è®¾æ–½ï¼Œåˆ©ç”¨äºšé©¬é€ŠæŠ€æœ¯ä¸ç”Ÿæ€ï¼Œå¿«é€Ÿé›†æˆä¸éƒ¨ç½²ç”Ÿæˆå¼AIæ¨¡å‹èƒ½åŠ›ã€‚</p>
<p>âœ¨ ç²¾å¿ƒè®¾è®¡ï¼Œæ—¨åœ¨å¼•å¯¼æ‚¨æ·±å…¥æ¢ç´¢Amazon Bedrockçš„æ¨¡å‹é€‰æ‹©ä¸è°ƒç”¨ã€æ¨¡å‹è‡ªåŠ¨åŒ–è¯„ä¼°ä»¥åŠå®‰å…¨å›´æ (Guardrail)ç­‰é‡è¦åŠŸèƒ½ã€‚</p>
<p>â©å¿«å¿«ç‚¹å‡»è¿›å…¥ã€Š<a href="https://link.juejin.cn?target=https%3A%2F%2Fevents.amazoncloud.cn%2Flabs%2Fcloudlab-amazon-bedrock-first-experience%3Fvisitfrom%3D3P_Juejinhead_1223%26sc_medium%3Downed%26sc_campaign%3Dcloudlab%26sc_channel%3D3P_Juejinhead_1223" target="_blank" title="https://events.amazoncloud.cn/labs/cloudlab-amazon-bedrock-first-experience?visitfrom=3P_Juejinhead_1223&amp;sc_medium=owned&amp;sc_campaign=cloudlab&amp;sc_channel=3P_Juejinhead_1223" ref="nofollow noopener noreferrer">å¤šæ¨¡ä¸€ç«™é€š â€”â€” Amazon Bedrock ä¸Šçš„åŸºç¡€æ¨¡å‹åˆä½“éªŒ</a>ã€‹å®éªŒæ„å»ºæ— é™, æ¢ç´¢å¯ç¨‹ï¼</p>
</blockquote>
<h2 data-id="heading-1">æ–¹æ¡ˆä»·å€¼</h2>
<h3 data-id="heading-2">MaxKBæ ¸å¿ƒèƒ½åŠ›Â¹</h3>
<p>MaxKBæ˜¯åŸºäºRAGï¼ˆæ£€ç´¢å¢å¼ºç”Ÿæˆï¼‰æŠ€æœ¯çš„å¼€æºçŸ¥è¯†åº“é—®ç­”ç³»ç»Ÿï¼Œè‡ª2024å¹´4æœˆå‘å¸ƒä»¥æ¥ï¼Œå·²è·å¾—19,000+ GitHub Starsï¼Œå‘å±•ä¸ºä¼ä¸šçº§æ™ºèƒ½ä½“å¹³å°ã€‚å…¶æ ¸å¿ƒèƒ½åŠ›åŒ…æ‹¬ï¼š</p>
<ul>
<li><strong>å¼€ç®±å³ç”¨çš„RAGé—®ç­”å¼•æ“</strong>ï¼šæ”¯æŒå¤šæ ¼å¼æ–‡æ¡£å¯¼å…¥ï¼ˆPDFã€Wordã€Markdownç­‰ï¼‰ï¼Œè‡ªåŠ¨æ–‡æ¡£è§£æã€æ–‡æœ¬åˆ†å—å’Œå‘é‡åŒ–å¤„ç†ï¼Œç­”æ¡ˆæ”¯æŒå¯Œæ–‡æœ¬å±•ç¤ºï¼ˆå›¾ç‰‡ã€è¡¨æ ¼ã€å›¾è¡¨ç­‰ï¼‰ï¼›</li>
<li><strong>å¤šæ¨¡å‹çµæ´»å¯¹æ¥</strong>ï¼šåŸºäºå¼€æºæ¶æ„ï¼Œæ”¯æŒå¯¹æ¥Amazon Bedrockæ‰˜ç®¡æ¨¡å‹åŠå›½å†…å¤–ä¸»æµå¤§è¯­è¨€æ¨¡å‹å’ŒEmbeddingæ¨¡å‹æœåŠ¡ï¼Œå…¼å®¹æ ‡å‡†APIæ¥å£ï¼Œå¯æ ¹æ®ä¸šåŠ¡éœ€æ±‚çµæ´»é€‰æ‹©å’Œåˆ‡æ¢ï¼›</li>
<li><strong>å·¥ä½œæµç¼–æ’</strong>ï¼šå†…ç½®å·¥ä½œæµå¼•æ“å’Œå‡½æ•°åº“ï¼Œæ”¯æŒMCPå·¥å…·è°ƒç”¨ï¼Œå¯ç¼–æ’å¤æ‚çš„AI Agentå¤„ç†æµç¨‹ï¼Œå®ç°å¤šæ­¥éª¤ä»»åŠ¡è‡ªåŠ¨åŒ–ï¼›</li>
<li><strong>å¿«é€Ÿé›†æˆ</strong>ï¼šæä¾›APIæ¥å£å’Œé›¶ç¼–ç åµŒå…¥æ–¹å¼ï¼Œå¯å¿«é€Ÿé›†æˆåˆ°ä¼ä¸šç°æœ‰ä¸šåŠ¡ç³»ç»Ÿæˆ–ç¬¬ä¸‰æ–¹ç³»ç»Ÿï¼Œé™ä½ä¼ä¸šå¼€å‘å’Œéƒ¨ç½²æˆæœ¬ã€‚</li>
</ul>
<p><strong>å…¸å‹åº”ç”¨åœºæ™¯</strong>ï¼šæ™ºèƒ½å®¢æœï¼ˆ7Ã—24å°æ—¶è‡ªåŠ¨é—®ç­”ï¼‰ã€ä¼ä¸šçŸ¥è¯†åº“ï¼ˆå†…éƒ¨çŸ¥è¯†ç®¡ç†å’Œæ£€ç´¢ï¼‰ã€æ™ºèƒ½åŠå…¬åŠ©æ‰‹ç­‰ã€‚</p>
<h3 data-id="heading-3">äºšé©¬é€Šäº‘ç§‘æŠ€æ‰˜ç®¡æ–¹æ¡ˆçš„å¢å¼ºä»·å€¼</h3>
<p>MaxKBç¤¾åŒºç‰ˆæä¾›åŸºäºDocker Composeçš„å¿«é€Ÿéƒ¨ç½²æ–¹å¼ï¼Œé€‚åˆå¼€å‘æµ‹è¯•å’Œå°è§„æ¨¡åº”ç”¨ã€‚ä½†åœ¨ä¼ä¸šç”Ÿäº§ç¯å¢ƒä¸­ï¼Œé¢ä¸´å•ç‚¹æ•…éšœé£é™©ã€æ‰‹åŠ¨è¿ç»´è´Ÿæ‹…é‡ã€å®‰å…¨ç®¡ç†å¤æ‚ç­‰æŒ‘æˆ˜ã€‚æœ¬æ–¹æ¡ˆåŸºäºäºšé©¬é€Šäº‘ç§‘æŠ€æ‰˜ç®¡æœåŠ¡ï¼Œæä¾›ä»¥ä¸‹ä¼ä¸šçº§å¢å¼ºèƒ½åŠ›ï¼š</p>
<h4 data-id="heading-4">1. ä¼ä¸šçº§é«˜å¯ç”¨æ€§</h4>
<ul>
<li><strong>å¤šå¯ç”¨åŒºæ¶æ„ã€å¯ç”¨æ€§SLAå¯è¾¾99.9%ä»¥ä¸Š</strong>ï¼šåº”ç”¨å±‚ï¼ˆECSï¼‰ã€æ•°æ®åº“å±‚ï¼ˆRDS Multi-AZï¼‰ã€ç¼“å­˜å±‚ï¼ˆElastiCacheï¼‰å‡é‡‡ç”¨è·¨å¤šå¯ç”¨åŒºéƒ¨ç½²ï¼ŒRDSä¸»èŠ‚ç‚¹æ•…éšœæ—¶60-120ç§’å†…è‡ªåŠ¨åˆ‡æ¢ï¼ŒALBè‡ªåŠ¨åˆ†å‘æµé‡å¹¶å‰”é™¤å¼‚å¸¸å®¹å™¨ï¼Œä¿éšœæ•´ä½“æ¶æ„å¯è¾¾99.9%ä»¥ä¸Šçš„æœåŠ¡å¯ç”¨æ€§ï¼Œæ»¡è¶³ä¼ä¸šçº§åº”ç”¨è¦æ±‚ï¼›</li>
</ul>
<h4 data-id="heading-5">2. å¼¹æ€§ä¼¸ç¼©èƒ½åŠ›</h4>
<ul>
<li><strong>åº”ç”¨å±‚è‡ªåŠ¨æ‰©ç¼©å®¹</strong>ï¼šé¢å¯¹ä¸šåŠ¡æµé‡æ³¢åŠ¨çš„åœºæ™¯éœ€æ±‚ï¼ŒECSå¯æ ¹æ®èµ„æºä½¿ç”¨ç‡æˆ–è¯·æ±‚æ•°é‡è§„åˆ™è‡ªåŠ¨è°ƒæ•´ä»»åŠ¡æ•°é‡ï¼›</li>
<li><strong>å‘é‡æŸ¥è¯¢åŠ é€Ÿ</strong>ï¼šRDS PostgreSQL + pgvectoræä¾›é«˜æ€§èƒ½å‘é‡æ£€ç´¢ï¼Œdb.r8g.16xlargeè§„æ ¼ä¸‹100å¹¶å‘å¯è¾¾æ¯«ç§’çº§å“åº”ï¼›</li>
<li><strong>ç¼“å­˜å±‚åœ¨çº¿æ‰©å±•</strong>ï¼šElastiCacheæ”¯æŒåœ¨çº¿æ·»åŠ èŠ‚ç‚¹ï¼Œæ— éœ€åœæœºå³å¯æå‡ç¼“å­˜å®¹é‡</li>
</ul>
<h4 data-id="heading-6">3. å®‰å…¨ä¸åˆè§„</h4>
<ul>
<li><strong>å¯†é’¥é›†ä¸­ç®¡ç†</strong>ï¼šSecrets Managerå®‰å…¨å­˜å‚¨æ•°æ®åº“å‡­è¯ã€APIå¯†é’¥ç­‰æ•æ„Ÿä¿¡æ¯ï¼Œæ”¯æŒè‡ªåŠ¨è½®æ¢ï¼Œé¿å…ç¡¬ç¼–ç é£é™©</li>
<li><strong>ç½‘ç»œéš”ç¦»</strong>ï¼šVPCç§æœ‰å­ç½‘éƒ¨ç½²æ•°æ®åº“å’Œç¼“å­˜ï¼Œä»…åº”ç”¨å±‚å¯è®¿é—®ï¼Œå…¬ç½‘ä¸å¯è¾¾</li>
<li><strong>ç»†ç²’åº¦æƒé™æ§åˆ¶</strong>ï¼šIAMè§’è‰²å’ŒSecurity Groupå®ç°æœ€å°æƒé™åŸåˆ™</li>
</ul>
<p><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šæœ¬æ–¹æ¡ˆç‰¹åˆ«é€‚åˆéœ€è¦åœ¨ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²æ™ºèƒ½å®¢æœã€ä¼ä¸šçŸ¥è¯†åº“ç­‰AIåº”ç”¨çš„ä¸­å¤§å‹ä¼ä¸šï¼Œä»¥åŠå¯¹å¯ç”¨æ€§ã€å®‰å…¨æ€§ã€åˆè§„æ€§æœ‰è¾ƒé«˜è¦æ±‚çš„è¡Œä¸šå®¢æˆ·ï¼ˆå¦‚é‡‘èã€åŒ»ç–—ã€æ”¿åŠ¡ç­‰ï¼‰ã€‚</p>
<h2 data-id="heading-7">è§£å†³æ–¹æ¡ˆæ¦‚è¿°</h2>
<p>æœ¬è§£å†³æ–¹æ¡ˆå°†MaxKB Dockeræ‰˜ç®¡è¿è¡Œåœ¨äºšé©¬é€Šäº‘ç§‘æŠ€å®¹å™¨æœåŠ¡ECSä¸Šï¼Œå¹¶é…ç½®Amazon RDS for PostgresSQLå’ŒElastiCache Valkeyï¼ˆå…¼å®¹Redisï¼‰ï¼Œä½œä¸ºMaxKBçš„å¤–éƒ¨æ•°æ®åº“ï¼Œå®ç°MaxKBåº”ç”¨çš„é«˜å¯ç”¨æ¶æ„ã€‚</p>
<h3 data-id="heading-8">æ¶æ„è®¾è®¡</h3>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fd2908q01vomqb2.cloudfront.net%2F472b07b9fcf2c2451e8781e944bf5f77cd8457c8%2F2025%2F11%2F18%2Fhow-to-deploy-highly-available-maxkb-knowledge-base-application-on-aws-1.png" target="_blank" title="https://d2908q01vomqb2.cloudfront.net/472b07b9fcf2c2451e8781e944bf5f77cd8457c8/2025/11/18/how-to-deploy-highly-available-maxkb-knowledge-base-application-on-aws-1.png" ref="nofollow noopener noreferrer"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/33f096e2355240a68d42771d63dc0e54~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767358159&amp;x-signature=Z3YiVPR0uH7ySNT%2BnQk7zNA4nV8%3D" alt="" loading="lazy"/></a></p>
<ol>
<li>
<p>ç”¨æˆ·é€šè¿‡äº’è”ç½‘è¿æ¥åˆ°åº”ç”¨ç¨‹åºï¼Œæ‰€æœ‰è¯·æ±‚é¦–å…ˆé€šè¿‡Â <strong>Elastic Load Balancing</strong>Â æœåŠ¡ï¼Œç¡®ä¿æµé‡å‡åŒ€åˆ†å¸ƒå¹¶æé«˜ç³»ç»Ÿå¯ç”¨æ€§å’Œå®¹é”™èƒ½åŠ›ã€‚</p>
</li>
<li>
<p>è´Ÿè½½å‡è¡¡å™¨å°†æµé‡æ™ºèƒ½åˆ†é…åˆ°Â <strong>ECSé›†ç¾¤</strong>Â å†…çš„å¤šä¸ªÂ <strong>Service Frontend</strong>Â å®ä¾‹ï¼Œå®ç°è¯·æ±‚çš„é«˜æ•ˆå¤„ç†å’Œèµ„æºçš„åŠ¨æ€ä¼¸ç¼©ã€‚ECSé›†ç¾¤æä¾›å®¹å™¨åŒ–ç¯å¢ƒï¼Œä¾¿äºéƒ¨ç½²å’Œç®¡ç†åº”ç”¨æœåŠ¡ã€‚</p>
</li>
<li>
<p>åº”ç”¨ç¨‹åºå†…å¯ä»¥é…ç½®LLMæ¨¡å‹å’ŒEmbeddingæ¨¡å‹ï¼Œæ”¯æŒè®¿é—®Bedrock çš„æ¨¡å‹æœåŠ¡ï¼š</p>
<ul>
<li><strong>Bedrock LLM</strong>ï¼šæä¾›å¤§å‹è¯­è¨€æ¨¡å‹æœåŠ¡</li>
<li><strong>Bedrock Embedding</strong>ï¼šæä¾›æ–‡æœ¬åµŒå…¥æœåŠ¡</li>
</ul>
</li>
<li>
<p>ç³»ç»Ÿä¸Â <strong>Secrets Management</strong>Â æ¨¡å—é›†æˆï¼Œé€šè¿‡Â <strong>Secrets Manager</strong>Â å®‰å…¨å­˜å‚¨å’Œç®¡ç†åº”ç”¨æ‰€éœ€çš„å¯†é’¥ã€ä»¤ç‰Œã€å‡­è¯ç­‰æ•æ„Ÿä¿¡æ¯ï¼Œç¡®ä¿ä¿¡æ¯ä¸è¢«ç¡¬ç¼–ç åˆ°åº”ç”¨ä¸­ã€‚</p>
</li>
<li>
<p>åº”ç”¨ç¨‹åºè¿æ¥åˆ°Â <strong>RDS PostgreSQL</strong>Â æ•°æ®åº“æœåŠ¡ï¼ŒPostgreSQLæä¾›äº†å¼ºå¤§çš„å…³ç³»å‹æ•°æ®åº“åŠŸèƒ½ï¼›åŒæ—¶åœ¨æ•°æ®åº“å®‰è£…äº†pgvectorï¼Œä½¿æ‚¨èƒ½å¤Ÿç›´æ¥åœ¨PostgreSQL æ•°æ®åº“ä¸­é«˜æ•ˆåœ°å­˜å‚¨ã€æ“ä½œå’Œåˆ†æå‘é‡æ•°æ®ã€‚</p>
</li>
<li>
<p>æ¶æ„å¼•å…¥äº†<strong>Amazon ElastiCache for Valkey</strong>Â ç¼“å­˜å±‚ï¼ˆå…¼å®¹Redis 8.0ï¼‰ï¼Œç”¨äºå­˜å‚¨é¢‘ç¹è®¿é—®çš„æ•°æ®ï¼Œå‡å°‘æ•°æ®åº“è´Ÿè½½å¹¶æé«˜åº”ç”¨å“åº”é€Ÿåº¦ã€‚</p>
</li>
</ol>
<h3 data-id="heading-9">äºšé©¬é€Šäº‘ç§‘æŠ€æ‰˜ç®¡æ•°æ®åº“çš„äº§å“ä¼˜åŠ¿</h3>
<h4 data-id="heading-10">Amazon RDS for PostgresSQL</h4>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Faws.amazon.com%2Fcn%2Frds%2Fpostgresql%2Fwhat-is-postgresql%2F" target="_blank" title="https://aws.amazon.com/cn/rds/postgresql/what-is-postgresql/" ref="nofollow noopener noreferrer">PostgreSQL</a>Â æ˜¯è®¸å¤šä¼ä¸šå¼€å‘äººå‘˜å’Œä¼ä¸šçš„é¦–é€‰<a href="https://link.juejin.cn?target=https%3A%2F%2Faws.amazon.com%2Fcn%2Fproducts%2Fdatabases%2Fopen-source-databases%2F" target="_blank" title="https://aws.amazon.com/cn/products/databases/open-source-databases/" ref="nofollow noopener noreferrer">å¼€æº</a>å…³ç³»æ•°æ®åº“ï¼Œä¸ºé¢†å…ˆçš„å•†ç”¨å’Œç§»åŠ¨åº”ç”¨ç¨‹åºæä¾›åŠ©åŠ›ã€‚Amazon RDS è®©ç”¨æˆ·èƒ½å¤Ÿæ›´è½»æ¾åœ°åœ¨äº‘ä¸­è®¾ç½®ã€æ“ä½œå’Œæ‰©å±• PostgreSQL éƒ¨ç½²ã€‚å€ŸåŠ© Amazon RDSï¼Œæ‚¨å¯ä»¥åœ¨å‡ åˆ†é’Ÿå†…å®Œæˆå¯æ‰©å±•çš„ PostgreSQL éƒ¨ç½²ï¼Œä¸ä»…ç»æµå®æƒ ï¼Œè€Œä¸”å¯ä»¥è°ƒæ•´ç¡¬ä»¶å®¹é‡ã€‚Amazon RDS é™¤äº†å…·å¤‡æ‰˜ç®¡çš„ä¼˜åŠ¿å¤–ï¼Œé’ˆå¯¹çŸ¥è¯†åº“åº”ç”¨åœºæ™¯ä¹Ÿæœ‰æ˜æ˜¾çš„ä¼˜åŠ¿ï¼š<br/>
<strong>1.è·¨AZå¼ºä¸€è‡´ï¼Œä¿è¯ä¸»å¤‡æ•°æ®ä¸€è‡´æ€§</strong><br/>
Amazon RDSÂ  Multi-AZ éƒ¨ç½²æ¶æ„åœ¨å­˜å‚¨å±‚EBSé‡‡ç”¨ç‰©ç†åŒæ­¥å¤åˆ¶æœºåˆ¶ï¼Œä¸»èŠ‚ç‚¹å†™å…¥æ“ä½œåŒæ­¥åˆ°å¤‡èŠ‚ç‚¹åæ‰è¿”å›ç¡®è®¤ï¼Œç¡®ä¿æ•°æ®é›¶ä¸¢å¤±ï¼Œæ»¡è¶³çŸ¥è¯†åº“æ•°æ®å®Œæ•´æ€§è¦æ±‚ã€‚</p>
<p><strong>2.è‡ªåŠ¨failoverï¼Œä¿è¯ç³»ç»Ÿå¯ç”¨æ€§</strong><br/>
å½“Amazon RDS ä¸»èŠ‚ç‚¹æ•…éšœæ—¶ï¼ŒMulti-AZæ”¯æŒè‡ªåŠ¨failoveråˆ°å¤‡èŠ‚ç‚¹ï¼Œæ•…éšœè½¬ç§»æ—¶é—´é€šå¸¸åœ¨ 60-120 ç§’å†…å®Œæˆï¼Œåº”ç”¨ç¨‹åºè‡ªåŠ¨é‡è¿ï¼Œæ— éœ€äººå·¥å¹²é¢„ï¼Œæä¾› 99.95% çš„å¯ç”¨æ€§ SLAã€‚</p>
<p><strong>3.vectorå‘é‡æŸ¥è¯¢æ€§èƒ½é«˜ï¼Œè¯»æ€§èƒ½æ¨ªå‘æ‰©å±•</strong><br/>
PostgreSQL æ”¯æŒ pgvector æ‰©å±•ï¼Œåœ¨æ»¡è¶³OLTPæ•°æ®åº“æ­£å¸¸çš„ä¸šåŠ¡éœ€æ±‚ä¹‹å¤–è¿˜å¯ä»¥æä¾›å‘é‡å­˜å‚¨å’Œé«˜å¹¶å‘æ£€ç´¢çš„èƒ½åŠ›ï¼Œæ»¡è¶³å¤šæ¨¡æ€ä¸šåŠ¡éœ€æ±‚ï¼Œå¦å¤–RDSåªè¯»å‰¯æœ¬å¯ä»¥è¿›è¡Œåœ¨çº¿æ‰©å±•ï¼Œæ”¯æŒæœ€å¤š 15 ä¸ªåªè¯»å‰¯æœ¬ã€‚åœ¨10TBä»¥å†…ï¼Œå¹¶ä¸”æœ‰é«˜QPSéœ€æ±‚çš„åœºæ™¯ä¸‹ï¼Œæ€§ä»·æ¯”ä¼˜äºElasticsearchå’ŒMilvusã€‚<br/>
å¦‚ä¸‹æ˜¯åœ¨Amazon RDS for PostgreSQLÂ db.r8g.16xlargeè§„æ ¼ä¸‹ä½¿ç”¨VectorDBBenchè¿›è¡Œ100å¹¶å‘çº¿ç¨‹è¿›è¡Œå‹æµ‹ï¼Œæ¯æ¬¡å‹æµ‹æ—¶é•¿300sï¼Œåˆ†åˆ«åœ¨Performance768D1Må’ŒPerformance768D10Mä¸¤ç§æ•°æ®é›†ä¸‹ï¼Œä¸åŒef_searchä¸‹çš„æ€§èƒ½è¡¨ç°ï¼š</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fd2908q01vomqb2.cloudfront.net%2F472b07b9fcf2c2451e8781e944bf5f77cd8457c8%2F2025%2F11%2F18%2Fhow-to-deploy-highly-available-maxkb-knowledge-base-application-on-aws-2.png" target="_blank" title="https://d2908q01vomqb2.cloudfront.net/472b07b9fcf2c2451e8781e944bf5f77cd8457c8/2025/11/18/how-to-deploy-highly-available-maxkb-knowledge-base-application-on-aws-2.png" ref="nofollow noopener noreferrer"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/70b5d4f3d4a744a8b4ecbb248ecc166c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767358159&amp;x-signature=B8NvjJmAB2C%2F%2B6QNtW%2Bf%2FnP%2Bk5s%3D" alt="" loading="lazy"/></a></p>
<h4 data-id="heading-11">ElastiCache forÂ Valkey</h4>
<p>Valkey æ˜¯ç”± Linux åŸºé‡‘ä¼šæ”¯æŒçš„å¼€æºç¼“å­˜æ•°æ®åº“ï¼Œä¿è¯äº†vendorçš„ä¸­ç«‹æ€§ï¼Œè¿‡å»6ä¸ªæœˆï¼Œæœ‰50å¤šä¸‡æ¬¡container pullä»£ç ï¼Œå‡ åƒä¸ªè´¡çŒ®ï¼Œä»¥åŠ40å¤šå®¶å…¬å¸çš„æ”¯æŒã€‚äºšé©¬é€Šäº‘ç§‘æŠ€ä½œä¸ºValkeyçš„ä¸»è¦è´¡çŒ®ä¹‹ä¸€ï¼ŒElastiCache forÂ Valkeyä¸ä»…ç»™å®¢æˆ·å¸¦æ¥ç¨³å®šçš„æ–¹æ¡ˆï¼Œä¹Ÿèƒ½ä¿è¯ValkeyæŒç»­çš„åˆ›æ–°ã€‚ElastiCache forÂ Valkeyçš„ä¸»è¦ä¼˜åŠ¿å¦‚ä¸‹ï¼š</p>
<p><strong>æ€§ä»·æ¯”æå‡</strong></p>
<ol>
<li>å•ç‚¹å¤„ç†èƒ½åŠ›å¢å¼ºï¼Œé‡‡ç”¨IOçº¿ç¨‹å¤šè·¯å¤ç”¨æŠ€æœ¯ï¼Œååé‡å¢åŠ 72%å’ŒP99 è€—æ—¶é™ä½71%ï¼Œå¯ä»¥è¾¾åˆ°1.2M QPSè¯»å–æ€§èƒ½ï¼Œç”¨æˆ·å¯ä»¥ç”¨æ›´å°‘èŠ‚ç‚¹æ•°é‡æˆ–è€…æ›´å°æœºå‹æ¥æ”¯æ’‘åŒæ ·è§„æ¨¡åº”ç”¨ã€‚</li>
<li>æ‰˜ç®¡çš„ElastiCache for Valkey 8.0ä¼˜åŒ–äº†å†…å­˜ç»“æ„ï¼Œå•èŠ‚ç‚¹ä¸Šå¯ä»¥å­˜å‚¨æ›´å¤šçš„æ•°æ®ï¼ˆç›¸åŒæ•°æ®å­˜å‚¨ç©ºé—´å ç”¨å‡å°‘20%ï¼‰ã€‚</li>
</ol>
<p><strong>å®¢æˆ·ç«¯å…¼å®¹æ€§é«˜</strong></p>
<ol>
<li>å·²æœ‰å®¢æˆ·ç«¯è®¿é—®Valkeyï¼Œæ¥å£å’Œredis 7.2 å…¼å®¹ï¼Œjedisã€redis-benchmarkã€redisclusterã€K6ç­‰ã€‚</li>
<li>Valkey-glideä½œä¸ºäºšé©¬é€Šäº‘ç§‘æŠ€è´¡çŒ®çš„å¼€æºå®¢æˆ·ç«¯ï¼Œä¸python/Java/node.js/golang å¤šç§å®¢æˆ·ç«¯æä¾›ä¸€è‡´èƒ½åŠ›ï¼Œæ”¯æŒæ›´å¥½failoverä»¥åŠè¿æ¥æ± ç®¡ç†ç­‰ã€‚</li>
</ol>
<p><strong>å…¶ä»–å¢å¼º</strong></p>
<ol>
<li>Valkey8.0 ä¸»ä»å¤åˆ¶æ•ˆç‡å¤§å¹…æå‡ï¼ŒRDBå’Œå¤åˆ¶backlogçš„åŒé€šè·¯å®ç°ï¼Œå¯ä»¥åŠ å¿«syncé€Ÿåº¦ï¼Œå•ç‹¬è¿›ç¨‹å¤„ç†RDBå¤åˆ¶å¯ä»¥å‡å°‘å¯¹ä¸»èŠ‚ç‚¹å½±å“ã€‚</li>
<li>resharding é‡åˆ†ç‰‡æœŸé—´æŠ—ä¸»èŠ‚ç‚¹æ•…éšœèƒ½åŠ›å¢å¼ºã€‚</li>
<li>æä¾›slotçº§åˆ«æŒ‡æ ‡ï¼Œæä¾›æ›´å¥½å¯è§‚æµ‹æ€§ã€‚</li>
</ol>
<h2 data-id="heading-12">MaxKB on Amazonè§£å†³æ–¹æ¡ˆéƒ¨ç½²æŒ‡å—</h2>
<h3 data-id="heading-13">éƒ¨ç½²è¦æ±‚</h3>
<p>MaxKBåº”ç”¨éƒ¨ç½²è¦æ±‚åŒ…æ‹¬ï¼š</p>
<ul>
<li>æ“ä½œç³»ç»Ÿï¼šUbuntu 22.04 / CentOS 7ï¼ˆå†…æ ¸ç‰ˆæœ¬è¦æ±‚ â‰¥ 3.10ï¼‰</li>
<li>CPU/å†…å­˜ï¼š4C/8GB ä»¥ä¸Š</li>
<li>ç£ç›˜ç©ºé—´ï¼š100GB</li>
<li>PostgrsSQLï¼š17.6ç‰ˆæœ¬</li>
<li>Redisï¼š8.0ç‰ˆæœ¬</li>
</ul>
<p>åœ¨äºšé©¬é€Šäº‘ç§‘æŠ€éƒ¨ç½²ä¹‹å‰ï¼Œæ‚¨éœ€è¦æœ‰ä¸€ä¸ªå¯è®¿é—®çš„äºšé©¬é€Šäº‘ç§‘æŠ€è´¦æˆ·ï¼Œéƒ¨ç½²çš„ä¸»è¦èµ„æºåŒ…æ‹¬ï¼š</p>
<ul>
<li>Amazon VPC</li>
<li>Amazon RDS for postgreSQL</li>
<li>Amazon ElastiCache for Valkey</li>
<li>Amazon ECS</li>
<li>Amazon ALB</li>
</ul>
<h3 data-id="heading-14">CDKéƒ¨ç½²æ–¹å¼</h3>
<p>ä¸ºäº†ç®€åŒ–é«˜å¯ç”¨æ¶æ„çš„éƒ¨ç½²æµç¨‹ï¼Œæˆ‘ä»¬æä¾›äº†åŸºäºAmazon CDKï¼ˆCloud Development Kitï¼‰çš„ä¸€é”®éƒ¨ç½²ä»£ç å’Œè„šæœ¬ï¼šé€šè¿‡åŸºç¡€è®¾æ–½å³ä»£ç ï¼ˆIaCï¼‰çš„æ–¹å¼ï¼Œèƒ½å¤Ÿè‡ªåŠ¨å¤„ç†èµ„æºé—´çš„ä¾èµ–å…³ç³»ï¼Œä¸€æ¡å‘½ä»¤å³å¯å®ŒæˆVPCã€RDSã€ElastiCacheã€ECSã€ALBç­‰æ‰€æœ‰ç»„ä»¶çš„åˆ›å»ºå’Œé…ç½®ï¼Œæ— éœ€æ‰‹åŠ¨åœ¨æ§åˆ¶å°æ“ä½œå¤šä¸ªæœåŠ¡ï¼Œå¤§å¹…é™ä½éƒ¨ç½²å¤æ‚åº¦å’Œäººä¸ºé”™è¯¯ï¼Œæ˜¾è‘—æé«˜éƒ¨ç½²æˆåŠŸç‡å’Œè¿ç»´æ•ˆç‡ã€‚</p>
<p>ä»¥ä¸‹éƒ¨ç½²å‘½ä»¤è¯·åœ¨Linuxç¯å¢ƒè¿è¡Œã€‚</p>
<p><strong>1ã€ä»githubä¸‹è½½MaxKB-on-Amazonéƒ¨ç½²ä»£ç </strong></p>
<p>è¿è¡Œä»¥ä¸‹å‘½ä»¤ä¸‹è½½éƒ¨ç½²ä»£ç åŒ…ï¼š</p>
<pre><code class="hljs language-Bash" lang="Bash">git <span class="hljs-built_in">clone</span> https://github.com/supinyu/sample-maxkb-on-aws.git
</code></pre>
<p><strong>2ã€å®‰è£…Docker</strong></p>
<pre><code class="hljs language-bash" lang="bash">sudo yum install docker python3-pip git npm -y

<span class="hljs-comment"># Configure Docker Components</span>
sudo systemctl <span class="hljs-built_in">enable</span> docker

sudo systemctl start docker

sudo usermod -aG docker <span class="hljs-variable">$USER</span>

newgrp docker
</code></pre>
<p><strong>3ã€å®‰è£…aws cdk</strong></p>
<pre><code class="hljs">sudo npm install -g aws-cdk
</code></pre>
<p><strong>4ã€å®‰è£…ç›¸å…³çš„npmåŒ…</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">cd</span> 20251020-hex-cdk

npm install aws-cdk-lib
</code></pre>
<p><strong>5ã€è´¦å·ä¿¡æ¯åŠéƒ¨ç½²Region IDå¯¼å…¥åˆ°ç¯å¢ƒå˜é‡ä¸­</strong></p>
<pre><code class="hljs language-ini" lang="ini">export <span class="hljs-attr">AWS_ACCOUNT_ID</span>=XXXXXXXXXXXX
export <span class="hljs-attr">AWS_REGION</span>=us-west-<span class="hljs-number">2</span>
</code></pre>
<p><strong>6ã€è¿›è¡ŒCDKéƒ¨ç½²</strong></p>
<pre><code class="hljs language-perl" lang="perl">cdk bootstrap aws:<span class="hljs-regexp">//</span>$AWS_ACCOUNT_ID/$AWS_REGION

cdk deploy HexRagCdkStack --<span class="hljs-keyword">require</span>-approval never
</code></pre>
<p>ä»¥ä¸Šéƒ¨ç½²è¿‡ç¨‹é€šå¸¸éœ€è¦15-20åˆ†é’Ÿï¼ŒCDKä¼šè‡ªåŠ¨å®Œæˆä»¥ä¸‹æ“ä½œï¼š</p>
<ul>
<li>åˆ›å»ºVPCå’Œå­ç½‘</li>
<li>é…ç½®å®‰å…¨ç»„è§„åˆ™</li>
<li>éƒ¨ç½²RDS PostgreSQLæ•°æ®åº“ï¼ˆå«pgvectoræ‰©å±•ï¼‰</li>
<li>éƒ¨ç½²ElastiCache Valkeyé›†ç¾¤</li>
<li>åˆ›å»ºECSé›†ç¾¤å’Œä»»åŠ¡å®šä¹‰</li>
<li>é…ç½®ALBè´Ÿè½½å‡è¡¡å™¨</li>
<li>è®¾ç½®Secrets Managerå¯†é’¥ç®¡ç†</li>
<li>é…ç½®è‡ªåŠ¨æ‰©å±•ç­–ç•¥</li>
</ul>
<p><strong>7ã€</strong> <strong>éªŒè¯éƒ¨ç½²</strong></p>
<p>éƒ¨ç½²å®Œæˆåï¼ŒCDKä¼šè¾“å‡ºALBçš„DNSåœ°å€ï¼Œé€šè¿‡è¯¥åœ°å€å³å¯è®¿é—®MaxKBåº”ç”¨ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># è¾“å‡ºç¤ºä¾‹</span>
<span class="hljs-attr">RagCdkStack.LoadBalancerDNS</span> = RagCdkStack-ALB-XXXXXXXXXX.us-west-<span class="hljs-number">2</span>.elb.amazonaws.com
</code></pre>
<p><strong>8ã€ç‰ˆæœ¬æ›´æ–°</strong></p>
<p>å¦‚éœ€æ›´æ–°MaxKBç‰ˆæœ¬ï¼ˆæ¯”å¦‚ä»maxkb-v2.1.1å‡çº§åˆ°maxkb-v2.x.xï¼‰ï¼Œåªéœ€ä¿®æ”¹Dockerfileä¸­å¯¹åº”çš„MaxKBé•œåƒç‰ˆæœ¬å·ï¼Œç„¶åé‡æ–°æ‰§è¡Œéƒ¨ç½²å‘½ä»¤ï¼š</p>
<pre><code class="hljs language-php" lang="php">cdk deploy HexRagCdkStack â€”<span class="hljs-keyword">require</span>-approval <span class="hljs-keyword">never</span>
</code></pre>
<p>CDKä¼šè‡ªåŠ¨æ£€æµ‹å˜æ›´å¹¶ä»…æ›´æ–°å—å½±å“çš„èµ„æºï¼Œå®ç°é›¶åœæœºæ»šåŠ¨æ›´æ–°ã€‚</p>
<h2 data-id="heading-15">MaxKBåº”ç”¨æ•ˆæœ</h2>
<p>è¿™é‡Œæˆ‘ä»¬ä»¥ä¸€ä¸ªå¯¹è¯é—®ç­”åŠ©æ‰‹ä¸ºä¾‹ï¼Œæ¼”ç¤ºMaxKBçš„ä½¿ç”¨æ•ˆæœã€‚</p>
<h3 data-id="heading-16">æ”¯æŒBedrockæ¨¡å‹</h3>
<p>é¦–å…ˆéœ€è¦æ·»åŠ LLMæ¨¡å‹å’ŒEmbeddingæ¨¡å‹ï¼ŒMaxKB æ”¯æŒBedrockæ¨¡å‹ï¼Œå¯ä»¥åœ¨æ¨¡å‹é…ç½®é¡µé¢è¿›è¡Œæ·»åŠ ï¼Œå…·ä½“çš„æ“ä½œå¦‚ä¸‹ï¼š</p>
<p><strong>1ã€æ·»åŠ LLMæ¨¡å‹</strong></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fd2908q01vomqb2.cloudfront.net%2F472b07b9fcf2c2451e8781e944bf5f77cd8457c8%2F2025%2F11%2F18%2Fhow-to-deploy-highly-available-maxkb-knowledge-base-application-on-aws-3.png" target="_blank" title="https://d2908q01vomqb2.cloudfront.net/472b07b9fcf2c2451e8781e944bf5f77cd8457c8/2025/11/18/how-to-deploy-highly-available-maxkb-knowledge-base-application-on-aws-3.png" ref="nofollow noopener noreferrer"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/78d19796ef844306a84d9ffd31374631~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767358159&amp;x-signature=iGiNXHRAP%2Bgvi%2FsZVQRkkR5Lmsc%3D" alt="" loading="lazy"/></a></p>
<p><strong>2ã€æ·»åŠ Embeddingæ¨¡å‹</strong></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fd2908q01vomqb2.cloudfront.net%2F472b07b9fcf2c2451e8781e944bf5f77cd8457c8%2F2025%2F11%2F18%2Fhow-to-deploy-highly-available-maxkb-knowledge-base-application-on-aws-4.png" target="_blank" title="https://d2908q01vomqb2.cloudfront.net/472b07b9fcf2c2451e8781e944bf5f77cd8457c8/2025/11/18/how-to-deploy-highly-available-maxkb-knowledge-base-application-on-aws-4.png" ref="nofollow noopener noreferrer"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dce3e385eecd4734b0c645616f4ac617~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767358159&amp;x-signature=BhXzvuu4teXVcfNd4gYqAkpAsL4%3D" alt="" loading="lazy"/></a></p>
<p><strong>3ã€çŸ¥è¯†åº“åˆ›å»º</strong></p>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬åˆ›å»ºçŸ¥è¯†åº“</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fd2908q01vomqb2.cloudfront.net%2F472b07b9fcf2c2451e8781e944bf5f77cd8457c8%2F2025%2F11%2F18%2Fhow-to-deploy-highly-available-maxkb-knowledge-base-application-on-aws-5.png" target="_blank" title="https://d2908q01vomqb2.cloudfront.net/472b07b9fcf2c2451e8781e944bf5f77cd8457c8/2025/11/18/how-to-deploy-highly-available-maxkb-knowledge-base-application-on-aws-5.png" ref="nofollow noopener noreferrer"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8ca4072cfa7b44d98dbccb2cd3c41b17~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767358159&amp;x-signature=UmIdHaFVIlUFiiXbFzPRZCSy75g%3D" alt="" loading="lazy"/></a></p>
<p><strong>4ã€ä¸Šä¼ éœ€è¦é—®ç­”çš„pdfæ–‡æ¡£</strong></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fd2908q01vomqb2.cloudfront.net%2F472b07b9fcf2c2451e8781e944bf5f77cd8457c8%2F2025%2F11%2F18%2Fhow-to-deploy-highly-available-maxkb-knowledge-base-application-on-aws-6.png" target="_blank" title="https://d2908q01vomqb2.cloudfront.net/472b07b9fcf2c2451e8781e944bf5f77cd8457c8/2025/11/18/how-to-deploy-highly-available-maxkb-knowledge-base-application-on-aws-6.png" ref="nofollow noopener noreferrer"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4cf31472460f4ee9bfcedd1248d0ec47~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767358159&amp;x-signature=V9JQwjAvWzFUPuJzMjOjvQchICg%3D" alt="" loading="lazy"/></a></p>
<p><strong>5ã€åˆ›å»ºçŸ¥è¯†åº“é—®ç­”åŠ©æ‰‹</strong></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fd2908q01vomqb2.cloudfront.net%2F472b07b9fcf2c2451e8781e944bf5f77cd8457c8%2F2025%2F11%2F18%2Fhow-to-deploy-highly-available-maxkb-knowledge-base-application-on-aws-7.png" target="_blank" title="https://d2908q01vomqb2.cloudfront.net/472b07b9fcf2c2451e8781e944bf5f77cd8457c8/2025/11/18/how-to-deploy-highly-available-maxkb-knowledge-base-application-on-aws-7.png" ref="nofollow noopener noreferrer"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2478d207fe644690a022c1b80c96f9cd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767358159&amp;x-signature=zKklZvXxZjGGuQyHMeY4tiRmXWE%3D" alt="" loading="lazy"/></a></p>
<p>åœ¨åˆ›å»ºå¯¹è¯åŠ©æ‰‹é¡µé¢ï¼Œå¯ä»¥é…ç½®å¯¹è¯æµç¨‹ï¼ŒMaxKBå…·æœ‰çµæ´»çš„æµç¨‹é…ç½®åŠŸèƒ½ã€‚é…ç½®å®Œæˆï¼Œç”¨æˆ·å¯ä»¥é’ˆå¯¹å¯¹è¯æµç¨‹è¿›è¡Œè°ƒè¯•å’Œå‘å¸ƒã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fd2908q01vomqb2.cloudfront.net%2F472b07b9fcf2c2451e8781e944bf5f77cd8457c8%2F2025%2F11%2F18%2Fhow-to-deploy-highly-available-maxkb-knowledge-base-application-on-aws-8.png" target="_blank" title="https://d2908q01vomqb2.cloudfront.net/472b07b9fcf2c2451e8781e944bf5f77cd8457c8/2025/11/18/how-to-deploy-highly-available-maxkb-knowledge-base-application-on-aws-8.png" ref="nofollow noopener noreferrer"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f470212e4a134e4c90ce4dbec0791e45~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767358159&amp;x-signature=AsU7%2FiIPo5siz%2BIZJv9Bf8uCOO0%3D" alt="" loading="lazy"/></a></p>
<p>å¯¹è¯åŠ©æ‰‹å‘å¸ƒä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥è¿›è¡Œç›¸å…³çš„é—®ç­”ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fd2908q01vomqb2.cloudfront.net%2F472b07b9fcf2c2451e8781e944bf5f77cd8457c8%2F2025%2F11%2F18%2Fhow-to-deploy-highly-available-maxkb-knowledge-base-application-on-aws-9.png" target="_blank" title="https://d2908q01vomqb2.cloudfront.net/472b07b9fcf2c2451e8781e944bf5f77cd8457c8/2025/11/18/how-to-deploy-highly-available-maxkb-knowledge-base-application-on-aws-9.png" ref="nofollow noopener noreferrer"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/876391d5bfb5430c8a125c10e79faa56~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767358159&amp;x-signature=x0DMJMAnoIIYSu%2FEN%2FTcT5VeqjM%3D" alt="" loading="lazy"/></a></p>
<p>åœ¨ç®¡ç†ç•Œé¢ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥å¯¹ç›¸å…³çš„æ•°æ®è¿›è¡Œç»Ÿè®¡ç›‘æ§ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fd2908q01vomqb2.cloudfront.net%2F472b07b9fcf2c2451e8781e944bf5f77cd8457c8%2F2025%2F11%2F18%2Fhow-to-deploy-highly-available-maxkb-knowledge-base-application-on-aws-10.png" target="_blank" title="https://d2908q01vomqb2.cloudfront.net/472b07b9fcf2c2451e8781e944bf5f77cd8457c8/2025/11/18/how-to-deploy-highly-available-maxkb-knowledge-base-application-on-aws-10.png" ref="nofollow noopener noreferrer"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5c5aeba0df8b411b894043b537692c4a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767358159&amp;x-signature=SMZhqhOWXqVlxIvymwRdYO9BfwE%3D" alt="" loading="lazy"/></a></p>
<h2 data-id="heading-17">æ€»ç»“</h2>
<p>æœ¬æ–¹æ¡ˆé€šè¿‡å°†MaxKBç¤¾åŒºç‰ˆè¿ç§»éƒ¨ç½²åœ¨äºšé©¬é€Šäº‘ç§‘æŠ€æ‰˜ç®¡æœåŠ¡ä¸Šï¼Œæ„å»ºäº†é«˜å¯ç”¨ã€å¯æ‰©å±•çš„RAGçŸ¥è¯†åº“åº”ç”¨ï¼Œå®ç°äº†ä»å•æœºDockeréƒ¨ç½²å‘ä¼ä¸šçº§äº‘åŸç”Ÿæ¶æ„çš„è½¬å‹ï¼Œä¸ºä¼ä¸šçŸ¥è¯†ç®¡ç†å’Œæ™ºèƒ½é—®ç­”åœºæ™¯æä¾›äº†å®Œæ•´çš„æŠ€æœ¯è§£å†³æ–¹æ¡ˆã€‚</p>
<p><strong>å‚è€ƒèµ„æ–™</strong></p>
<p>[1] MaxKB on Githubï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2F1Panel-dev%2FMaxKB" target="_blank" title="https://github.com/1Panel-dev/MaxKB" ref="nofollow noopener noreferrer">github.com/1Panel-dev/â€¦</a><br/>
[2] MaxKBç¤¾åŒºç‰ˆä¸‹è½½ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fcommunity.fit2cloud.com%2F%23%2Fproducts%2Fmaxkb%2Fdownloads" target="_blank" title="https://community.fit2cloud.com/#/products/maxkb/downloads" ref="nofollow noopener noreferrer">community.fit2cloud.com/#/products/â€¦</a><br/>
[3] MaxKBç¦»çº¿å®‰è£…æ–‡æ¡£ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fmaxkb.cn%2Fdocs%2Fv2%2Finstallation%2Foffline_installtion%2F" target="_blank" title="https://maxkb.cn/docs/v2/installation/offline_installtion/" ref="nofollow noopener noreferrer">maxkb.cn/docs/v2/insâ€¦</a></p>
<p>*<em>å‰è¿°ç‰¹å®šäºšé©¬é€Šäº‘ç§‘æŠ€ç”Ÿæˆå¼äººå·¥æ™ºèƒ½ç›¸å…³çš„æœåŠ¡ç›®å‰åœ¨äºšé©¬é€Šäº‘ç§‘æŠ€æµ·å¤–åŒºåŸŸå¯ç”¨ã€‚äºšé©¬é€Šäº‘ç§‘æŠ€ä¸­å›½åŒºåŸŸç›¸å…³äº‘æœåŠ¡ç”±è¥¿äº‘æ•°æ®å’Œå…‰ç¯æ–°ç½‘è¿è¥ï¼Œå…·ä½“ä¿¡æ¯ä»¥ä¸­å›½åŒºåŸŸå®˜ç½‘ä¸ºå‡†ã€‚</em></p>
<p><strong>æœ¬ç¯‡ä½œè€…</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a2571021434b4868a9726df313d6788c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767358159&amp;x-signature=zZok5tiwKuJvpml6n%2B0cn6ObVFY%3D" alt="11.webp" loading="lazy"/></p>
<blockquote>
<p>æœ¬æœŸæœ€æ–°å®éªŒã€Š<a href="https://link.juejin.cn?target=https%3A%2F%2Fevents.amazoncloud.cn%2Flabs%2Fcloudlab-amazon-bedrock-first-experience%3Fvisitfrom%3D3P_Juejintail_1223%26sc_medium%3Downed%26sc_campaign%3Dcloudlab%26sc_channel%3D3P_Juejintail_1223" target="_blank" title="https://events.amazoncloud.cn/labs/cloudlab-amazon-bedrock-first-experience?visitfrom=3P_Juejintail_1223&amp;sc_medium=owned&amp;sc_campaign=cloudlab&amp;sc_channel=3P_Juejintail_1223" ref="nofollow noopener noreferrer">å¤šæ¨¡ä¸€ç«™é€š â€”â€” Amazon Bedrock ä¸Šçš„åŸºç¡€æ¨¡å‹åˆä½“éªŒ</a>ã€‹</p>
<p>âœ¨ ç²¾å¿ƒè®¾è®¡ï¼Œæ—¨åœ¨å¼•å¯¼æ‚¨æ·±å…¥æ¢ç´¢Amazon Bedrockçš„æ¨¡å‹é€‰æ‹©ä¸è°ƒç”¨ã€æ¨¡å‹è‡ªåŠ¨åŒ–è¯„ä¼°ä»¥åŠå®‰å…¨å›´æ (Guardrail)ç­‰é‡è¦åŠŸèƒ½ã€‚æ— éœ€ç®¡ç†åŸºç¡€è®¾æ–½ï¼Œåˆ©ç”¨äºšé©¬é€ŠæŠ€æœ¯ä¸ç”Ÿæ€ï¼Œå¿«é€Ÿé›†æˆä¸éƒ¨ç½²ç”Ÿæˆå¼AIæ¨¡å‹èƒ½åŠ›ã€‚</p>
<p>â©ï¸[<a href="https://link.juejin.cn?target=https%3A%2F%2Fevents.amazoncloud.cn%2Flabs%2Fcloudlab-amazon-bedrock-first-experience%3Fvisitfrom%3D3P_Juejintail_1223%26sc_medium%3Downed%26sc_campaign%3Dcloudlab%26sc_channel%3D3P_Juejintail_1223" target="_blank" title="https://events.amazoncloud.cn/labs/cloudlab-amazon-bedrock-first-experience?visitfrom=3P_Juejintail_1223&amp;sc_medium=owned&amp;sc_campaign=cloudlab&amp;sc_channel=3P_Juejintail_1223" ref="nofollow noopener noreferrer">ç‚¹å‡»è¿›å…¥å®éªŒ</a>] å³åˆ»å¼€å¯  AI å¼€å‘ä¹‹æ—…
æ„å»ºæ— é™, æ¢ç´¢å¯ç¨‹ï¼</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Flutterç»„ä»¶å°è£…ï¼šè§†é¢‘æ’­æ”¾ç»„ä»¶å…¨å±€å°è£…]]></title>    <link>https://juejin.cn/post/7588028859540291610</link>    <guid>https://juejin.cn/post/7588028859540291610</guid>    <pubDate>2025-12-26T12:52:52.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588028859540291610" data-draft-id="7582777037864190002" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Flutterç»„ä»¶å°è£…ï¼šè§†é¢‘æ’­æ”¾ç»„ä»¶å…¨å±€å°è£…"/> <meta itemprop="keywords" content="å‰ç«¯,Flutter"/> <meta itemprop="datePublished" content="2025-12-26T12:52:52.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="SoaringHeart"/> <meta itemprop="url" content="https://juejin.cn/user/3544481219481374"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Flutterç»„ä»¶å°è£…ï¼šè§†é¢‘æ’­æ”¾ç»„ä»¶å…¨å±€å°è£…
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3544481219481374/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    SoaringHeart
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-26T12:52:52.000Z" title="Fri Dec 26 2025 12:52:52 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    2
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€éœ€æ±‚æ¥æº</h2>
<p>æœ€è¿‘è¦å¼€å‘ä¸€ä¸ªåœ¨çº¿è§†é¢‘æ’­æ”¾çš„åŠŸèƒ½ï¼Œæ¯æ¬¡å®æ—¶è·å–æ’­æ”¾ï¼Œæœ‰äº›å¡é¡¿å’Œåˆå§‹åŒ–æ…¢çš„é—®é¢˜ï¼Œå°±éšæ‰‹ä¼˜åŒ–ä¸€ä¸‹ã€‚</p>
<h2 data-id="heading-1">äºŒã€ä½¿ç”¨ç¤ºä¾‹</h2>
<p>1ã€æ•°æ®æº</p>
<pre><code class="hljs language-scala" lang="scala"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">VideoDetailsProvider</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">ChangeNotifier</span> </span>{

    <span class="hljs-comment">/// å½“å‰æ’­æ”¾ä¸­çš„</span>
    <span class="hljs-keyword">final</span> _videoModelController = <span class="hljs-type">StreamController</span>&lt;<span class="hljs-type">VideoDetailModel</span>?&gt;.broadcast();

    <span class="hljs-comment">/// å½“å‰æ’­æ”¾ä¸­ Stream&lt;VideoDetailModel&gt;</span>
    <span class="hljs-type">Stream</span>&lt;<span class="hljs-type">VideoDetailModel</span>?&gt; get videoModelStream =&gt; _videoModelController.stream;


    <span class="hljs-comment">/// ç‚¹å‡»ï¼ˆmodelä¸ä¸ºç©ºæ—¶æ’­æ”¾ï¼Œä¸ºç©ºæ—¶å…³é—­ï¼‰</span>
    sinkModelForVideoPlayer({required <span class="hljs-type">VideoDetailModel</span>? model}) {
      _videoModelController.add(model);
    }

}
</code></pre>
<p>2ã€æ˜¾ç¤ºæ’­æ”¾å™¨ç»„ä»¶</p>
<pre><code class="hljs language-php" lang="php">StreamBuilder&lt;VideoDetailModel<span class="hljs-meta">?&gt;</span>(
  stream: provider.videoModelStream,
  builder: (context, snapshot) {
    <span class="hljs-keyword">if</span> (snapshot.data == <span class="hljs-literal">null</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">SizedBox</span>();
    }
    <span class="hljs-keyword">final</span> model = snapshot.data;
    <span class="hljs-keyword">if</span> (model?.isVideo != <span class="hljs-literal">true</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">SizedBox</span>();
    }

    <span class="hljs-keyword">return</span> <span class="hljs-title function_ invoke__">SafeArea</span>(
      <span class="hljs-attr">top</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">bottom</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">left</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">right</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">child</span>: <span class="hljs-title function_ invoke__">Container</span>(
        <span class="hljs-attr">decoration</span>: <span class="hljs-title function_ invoke__">BoxDecoration</span>(
          <span class="hljs-attr">color</span>: Colors.black,
        ),
        <span class="hljs-attr">child</span>: <span class="hljs-title function_ invoke__">AppVideoPlayer</span>(
          <span class="hljs-attr">key</span>: <span class="hljs-title function_ invoke__">Key</span>(model?.url ?? <span class="hljs-string">""</span>),
          <span class="hljs-attr">url</span>: model?.url ?? <span class="hljs-string">""</span>,
          <span class="hljs-attr">onFullScreen</span>: (value) async {
            <span class="hljs-keyword">if</span> (!value) {
              await Future.<span class="hljs-title function_ invoke__">delayed</span>(<span class="hljs-keyword">const</span> <span class="hljs-title function_ invoke__">Duration</span>(<span class="hljs-attr">milliseconds</span>: <span class="hljs-number">300</span>));//ç­‰å¾…æ—‹è½¬å®Œæˆ
              SystemChromeExt.<span class="hljs-title function_ invoke__">changeDeviceOrientation</span>(<span class="hljs-attr">isPortrait</span>: <span class="hljs-literal">true</span>);
            }
          },
          <span class="hljs-attr">onClose</span>: () {
            DLog.<span class="hljs-title function_ invoke__">d</span>(<span class="hljs-string">"close"</span>);
            provider.<span class="hljs-title function_ invoke__">sinkModelForVideoPlayer</span>(<span class="hljs-attr">model</span>: <span class="hljs-literal">null</span>);
          },
        ),
      ),
    );
  },
)
</code></pre>
<h2 data-id="heading-2">ä¸‰ã€æºç </h2>
<h4 data-id="heading-3">1ã€AppVideoPlayer.dart</h4>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">//</span>
<span class="hljs-comment">//  AppVideoPlayer.dart</span>
<span class="hljs-comment">//  flutter_templet_project</span>
<span class="hljs-comment">//</span>
<span class="hljs-comment">//  Created by shang on 2025/12/12 18:11.</span>
<span class="hljs-comment">//  Copyright Â© 2025/12/12 shang. All rights reserved.</span>
<span class="hljs-comment">//</span>

<span class="hljs-keyword">import</span> <span class="hljs-string">'package:chewie/chewie.dart'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">'package:flutter/material.dart'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">'package:flutter_templet_project/basicWidget/AppVideoPlayer/AppVideoPlayerService.dart'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">'package:flutter_templet_project/extension/extension_local.dart'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">'package:video_player/video_player.dart'</span>;

<span class="hljs-comment">/// <span class="markdown">æ’­æ”¾å™¨</span></span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AppVideoPlayer</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatefulWidget</span> </span>{
  <span class="hljs-keyword">const</span> AppVideoPlayer({
    <span class="hljs-keyword">super</span>.key,
    <span class="hljs-keyword">this</span>.controller,
    <span class="hljs-keyword">required</span> <span class="hljs-keyword">this</span>.url,
    <span class="hljs-keyword">this</span>.autoPlay = <span class="hljs-keyword">true</span>,
    <span class="hljs-keyword">this</span>.looping = <span class="hljs-keyword">false</span>,
    <span class="hljs-keyword">this</span>.aspectRatio = <span class="hljs-number">16</span> / <span class="hljs-number">9</span>,
    <span class="hljs-keyword">this</span>.isPortrait = <span class="hljs-keyword">true</span>,
    <span class="hljs-keyword">this</span>.fullScreenVN,
    <span class="hljs-keyword">this</span>.onFullScreen,
    <span class="hljs-keyword">this</span>.onClose,
  });

  <span class="hljs-keyword">final</span> AppVideoPlayerController? controller;

  <span class="hljs-keyword">final</span> <span class="hljs-built_in">String</span> url;
  <span class="hljs-keyword">final</span> <span class="hljs-built_in">bool</span> autoPlay;
  <span class="hljs-keyword">final</span> <span class="hljs-built_in">bool</span> looping;
  <span class="hljs-keyword">final</span> <span class="hljs-built_in">double</span> aspectRatio;

  <span class="hljs-comment">/// <span class="markdown">è®¾å¤‡æ–¹å‘</span></span>
  <span class="hljs-keyword">final</span> <span class="hljs-built_in">bool</span> isPortrait;

  <span class="hljs-keyword">final</span> ValueNotifier&lt;<span class="hljs-built_in">bool</span>&gt;? fullScreenVN;

  <span class="hljs-keyword">final</span> <span class="hljs-keyword">void</span> <span class="hljs-built_in">Function</span>(<span class="hljs-built_in">bool</span> isFullScreen)? onFullScreen;

  <span class="hljs-keyword">final</span> VoidCallback? onClose;

  <span class="hljs-meta">@override</span>
  State&lt;AppVideoPlayer&gt; createState() =&gt; _AppVideoPlayerState();
}

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">_AppVideoPlayerState</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">State</span>&lt;<span class="hljs-title">AppVideoPlayer</span>&gt; <span class="hljs-title">with</span> <span class="hljs-title">WidgetsBindingObserver</span>, <span class="hljs-title">AutomaticKeepAliveClientMixin</span> </span>{
  VideoPlayerController? _videoController;
  ChewieController? _chewieController;

  <span class="hljs-built_in">Duration</span> position = <span class="hljs-built_in">Duration</span>.zero;

  <span class="hljs-meta">@override</span>
  <span class="hljs-keyword">void</span> dispose() {
    widget.controller?._detach(<span class="hljs-keyword">this</span>);
    WidgetsBinding.instance.removeObserver(<span class="hljs-keyword">this</span>);
    _onClose();
    <span class="hljs-comment">// ä¸é”€æ¯ VideoPlayerControllerï¼Œè®©å…¨å±€å¤ç”¨</span>
    <span class="hljs-comment">// _chewieController?.dispose();</span>
    <span class="hljs-keyword">super</span>.dispose();
  }

  <span class="hljs-meta">@override</span>
  <span class="hljs-keyword">void</span> initState() {
    <span class="hljs-keyword">super</span>.initState();
    widget.controller?._attach(<span class="hljs-keyword">this</span>);
    WidgetsBinding.instance.addObserver(<span class="hljs-keyword">this</span>);
    WidgetsBinding.instance.addPostFrameCallback((_) {
      initPlayer();
    });
  }

  <span class="hljs-meta">@override</span>
  <span class="hljs-keyword">void</span> didChangeAppLifecycleState(AppLifecycleState state) {
    <span class="hljs-keyword">switch</span> (state) {
      <span class="hljs-keyword">case</span> AppLifecycleState.inactive:
      <span class="hljs-keyword">case</span> AppLifecycleState.hidden:
      <span class="hljs-keyword">case</span> AppLifecycleState.paused:
        {
          _chewieController?.pause();
        }
        <span class="hljs-keyword">break</span>;
      <span class="hljs-keyword">case</span> AppLifecycleState.detached:
        <span class="hljs-keyword">break</span>;
      <span class="hljs-keyword">case</span> AppLifecycleState.resumed:
        {
          _chewieController?.play();
        }
        <span class="hljs-keyword">break</span>;
    }
  }

  Future&lt;<span class="hljs-keyword">void</span>&gt; initPlayer() <span class="hljs-keyword">async</span> {
    <span class="hljs-comment">// DLog.d(widget.url.split("/").last);</span>
    <span class="hljs-keyword">assert</span>(widget.url.startsWith(<span class="hljs-string">"http"</span>), <span class="hljs-string">"url é”™è¯¯"</span>);

    _videoController = <span class="hljs-keyword">await</span> AppVideoPlayerService.instance.getController(widget.url);

    _chewieController?.dispose();
    _chewieController = ChewieController(
      videoPlayerController: _videoController!,
      autoPlay: widget.autoPlay,
      looping: widget.looping,
      aspectRatio: widget.aspectRatio,
      autoInitialize: <span class="hljs-keyword">true</span>,
      allowFullScreen: <span class="hljs-keyword">true</span>,
      allowMuting: <span class="hljs-keyword">false</span>,
      showControlsOnInitialize: <span class="hljs-keyword">false</span>,
      <span class="hljs-comment">// customControls: const AppVideoControls(),</span>
    );

    _chewieController!.addListener(() {
      <span class="hljs-keyword">final</span> isFullScreen = _chewieController!.isFullScreen;
      widget.fullScreenVN?.value = isFullScreen;
      widget.onFullScreen?.call(isFullScreen);
      <span class="hljs-keyword">if</span> (isFullScreen) {
        DLog.d(<span class="hljs-string">"è¿›å…¥å…¨å±"</span>);
      } <span class="hljs-keyword">else</span> {
        DLog.d(<span class="hljs-string">"é€€å‡ºå…¨å±"</span>);
      }
    });
    <span class="hljs-keyword">if</span> (mounted) {
      setState(() {});
    }
  }

  Future&lt;<span class="hljs-keyword">void</span>&gt; _onClose() <span class="hljs-keyword">async</span> {
    <span class="hljs-keyword">if</span> (_videoController?.value.isPlaying == <span class="hljs-keyword">true</span>) {
      _videoController?.pause();
    }
  }

  <span class="hljs-meta">@override</span>
  <span class="hljs-keyword">void</span> didUpdateWidget(<span class="hljs-keyword">covariant</span> AppVideoPlayer oldWidget) {
    <span class="hljs-keyword">super</span>.didUpdateWidget(oldWidget);
    <span class="hljs-keyword">if</span> (oldWidget.url != widget.url) {
      initPlayer();
    }
  }

  <span class="hljs-meta">@override</span>
  <span class="hljs-keyword">void</span> didChangeDependencies() {
    <span class="hljs-keyword">super</span>.didChangeDependencies();

    <span class="hljs-comment">/// <span class="markdown">ğŸ”¥å±å¹•æ¨ªç«–åˆ‡æ¢æ—¶ rebuild Chewieï¼Œä½†ä¸ rebuild video</span></span>
    DLog.d([MediaQuery.of(context).orientation]);
    <span class="hljs-comment">// setState(() {});</span>
  }

  <span class="hljs-meta">@override</span>
  Widget build(BuildContext context) {
    <span class="hljs-keyword">super</span>.build(context);
    <span class="hljs-keyword">if</span> (widget.url.startsWith(<span class="hljs-string">"http"</span>) != <span class="hljs-keyword">true</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">const</span> SizedBox();
    }

    <span class="hljs-keyword">if</span> (_chewieController == <span class="hljs-keyword">null</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">const</span> Center(child: CircularProgressIndicator());
    }
    <span class="hljs-comment">// return Chewie(controller: _chewieController!);</span>
    <span class="hljs-keyword">return</span> Stack(
      children: [
        Positioned.fill(
          child: Chewie(
            controller: _chewieController!,
          ),
        ),
        Positioned(
          right: <span class="hljs-number">20</span>,
          top: <span class="hljs-number">10</span>,
          child: Container(
            <span class="hljs-comment">// decoration: BoxDecoration(</span>
            <span class="hljs-comment">//   color: Colors.red,</span>
            <span class="hljs-comment">//   border: Border.all(color: Colors.blue),</span>
            <span class="hljs-comment">// ),</span>
            child: buildCloseBtn(onTap: widget.onClose),
          ),
        ),
      ],
    );
  }

  Widget buildCloseBtn({VoidCallback? onTap}) {
    <span class="hljs-keyword">return</span> GestureDetector(
      behavior: HitTestBehavior.opaque,
      onTap: () {
        DLog.d(<span class="hljs-string">"buildCloseBtn"</span>);
        _onClose();
        <span class="hljs-keyword">if</span> (onTap != <span class="hljs-keyword">null</span>) {
          onTap();
          <span class="hljs-keyword">return</span>;
        }
        Navigator.pop(context);
      },
      child: Container(
        <span class="hljs-comment">// padding: EdgeInsets.all(6),</span>
        <span class="hljs-comment">// decoration: BoxDecoration(</span>
        <span class="hljs-comment">//   color: Colors.black54,</span>
        <span class="hljs-comment">//   shape: BoxShape.circle,</span>
        <span class="hljs-comment">//   border: Border.all(color: Colors.blue),</span>
        <span class="hljs-comment">// ),</span>
        child: <span class="hljs-keyword">const</span> Icon(Icons.close, color: Colors.white, size: <span class="hljs-number">24</span>),
      ),
    );
  }

  <span class="hljs-meta">@override</span>
  <span class="hljs-built_in">bool</span> <span class="hljs-keyword">get</span> wantKeepAlive =&gt; <span class="hljs-keyword">true</span>;
}

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AppVideoPlayerController</span> </span>{
  _AppVideoPlayerState? _anchor;

  <span class="hljs-keyword">void</span> _attach(_AppVideoPlayerState anchor) {
    _anchor = anchor;
  }

  <span class="hljs-keyword">void</span> _detach(_AppVideoPlayerState anchor) {
    <span class="hljs-keyword">if</span> (_anchor == anchor) {
      _anchor = <span class="hljs-keyword">null</span>;
    }
  }

  VideoPlayerController? <span class="hljs-keyword">get</span> videoController {
    <span class="hljs-keyword">assert</span>(_anchor != <span class="hljs-keyword">null</span>);
    <span class="hljs-keyword">return</span> _anchor!._videoController;
  }

  ChewieController? <span class="hljs-keyword">get</span> chewieController {
    <span class="hljs-keyword">assert</span>(_anchor != <span class="hljs-keyword">null</span>);
    <span class="hljs-keyword">return</span> _anchor!._chewieController;
  }
}
</code></pre>
<h4 data-id="heading-4">2ã€AppVideoPlayerService.dart</h4>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">//</span>
<span class="hljs-comment">//  AppVideoPlayerService.dart</span>
<span class="hljs-comment">//  flutter_templet_project</span>
<span class="hljs-comment">//</span>
<span class="hljs-comment">//  Created by shang on 2025/12/12 18:10.</span>
<span class="hljs-comment">//  Copyright Â© 2025/12/12 shang. All rights reserved.</span>
<span class="hljs-comment">//</span>

<span class="hljs-keyword">import</span> <span class="hljs-string">'package:flutter_templet_project/extension/extension_local.dart'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">'package:quiver/collection.dart'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">'package:video_player/video_player.dart'</span>;

<span class="hljs-comment">/// <span class="markdown">è§†é¢‘æ’­æ”¾æ§åˆ¶å™¨å…¨å±€ç®¡ç†</span></span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AppVideoPlayerService</span> </span>{
  AppVideoPlayerService._();
  <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> AppVideoPlayerService _instance = AppVideoPlayerService._();
  <span class="hljs-keyword">factory</span> AppVideoPlayerService() =&gt; _instance;
  <span class="hljs-keyword">static</span> AppVideoPlayerService <span class="hljs-keyword">get</span> instance =&gt; _instance;

  <span class="hljs-comment">/// <span class="markdown">æ’­æ”¾å™¨å­—å…¸</span></span>
  LruMap&lt;<span class="hljs-built_in">String</span>, VideoPlayerController&gt; <span class="hljs-keyword">get</span> controllerMap =&gt; _controllerMap;
  <span class="hljs-comment">// final _controllerMap = &lt;String, VideoPlayerController&gt;{};</span>
  <span class="hljs-keyword">final</span> _controllerMap = LruMap&lt;<span class="hljs-built_in">String</span>, VideoPlayerController&gt;(maximumSize: <span class="hljs-number">10</span>);

  <span class="hljs-comment">/// <span class="markdown">æœ€æ–°ä½¿ç”¨æ’­æ”¾å™¨</span></span>
  VideoPlayerController? current;

  <span class="hljs-comment">/// <span class="markdown">æœ‰ç¼“å­˜æ§åˆ¶å™¨</span></span>
  <span class="hljs-built_in">bool</span> hasCtrl({<span class="hljs-keyword">required</span> <span class="hljs-built_in">String</span> url}) =&gt; _controllerMap[url] != <span class="hljs-keyword">null</span>;

  <span class="hljs-comment">/// <span class="markdown">æ˜¯ç½‘ç»œè§†é¢‘</span></span>
  <span class="hljs-keyword">static</span> <span class="hljs-built_in">bool</span> isVideo(<span class="hljs-built_in">String?</span> url) {
    <span class="hljs-keyword">if</span> (url?.isNotEmpty != <span class="hljs-keyword">true</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;
    }

    <span class="hljs-keyword">final</span> videoUri = <span class="hljs-built_in">Uri</span>.tryParse(url!);
    <span class="hljs-keyword">if</span> (videoUri == <span class="hljs-keyword">null</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;
    }

    <span class="hljs-keyword">final</span> videoExt = [<span class="hljs-string">'.mp4'</span>, <span class="hljs-string">'.mov'</span>, <span class="hljs-string">'.avi'</span>, <span class="hljs-string">'.wmv'</span>, <span class="hljs-string">'.flv'</span>, <span class="hljs-string">'.mkv'</span>, <span class="hljs-string">'.webm'</span>];
    <span class="hljs-keyword">final</span> ext = url.toLowerCase();
    <span class="hljs-keyword">final</span> result = videoExt.any((e) =&gt; ext.endsWith(e));
    <span class="hljs-keyword">return</span> result;
  }

  <span class="hljs-comment">/// <span class="markdown">è·å– VideoPlayerController</span></span>
  Future&lt;VideoPlayerController?&gt; getController(<span class="hljs-built_in">String</span> url, {<span class="hljs-built_in">bool</span> isLog = <span class="hljs-keyword">false</span>}) <span class="hljs-keyword">async</span> {
    <span class="hljs-keyword">assert</span>(url.startsWith(<span class="hljs-string">"http"</span>), <span class="hljs-string">"å¿…é¡»æ˜¯è§†é¢‘é“¾æ¥,è¯·æ£€æŸ¥é“¾æ¥æ˜¯å¦åˆæ³•"</span>);
    <span class="hljs-keyword">final</span> vc = _controllerMap[url];
    <span class="hljs-keyword">if</span> (vc != <span class="hljs-keyword">null</span>) {
      current = vc;
      <span class="hljs-keyword">if</span> (isLog) {
        DLog.d([<span class="hljs-string">"ç¼“å­˜: <span class="hljs-subst">${vc.hashCode}</span>"</span>]);
      }
      <span class="hljs-keyword">return</span> vc;
    }

    <span class="hljs-keyword">final</span> videoUri = <span class="hljs-built_in">Uri</span>.tryParse(url);
    <span class="hljs-keyword">if</span> (videoUri == <span class="hljs-keyword">null</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">null</span>;
    }

    <span class="hljs-keyword">final</span> ctrl = VideoPlayerController.networkUrl(videoUri);
    <span class="hljs-keyword">await</span> ctrl.initialize();
    _controllerMap[url] = ctrl;
    current = ctrl;
    <span class="hljs-keyword">if</span> (isLog) {
      DLog.d([<span class="hljs-string">"æ–°å»º: <span class="hljs-subst">${_controllerMap[url].hashCode}</span>"</span>]);
    }
    <span class="hljs-keyword">return</span> ctrl;
  }

  <span class="hljs-comment">/// <span class="markdown">æ’­æ”¾</span></span>
  Future&lt;<span class="hljs-keyword">void</span>&gt; play({<span class="hljs-keyword">required</span> <span class="hljs-built_in">String</span> url, <span class="hljs-built_in">bool</span> onlyOne = <span class="hljs-keyword">true</span>}) <span class="hljs-keyword">async</span> {
    <span class="hljs-keyword">await</span> getController(url);
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">final</span> e <span class="hljs-keyword">in</span> _controllerMap.entries) {
      <span class="hljs-keyword">if</span> (e.key == url) {
        <span class="hljs-keyword">if</span> (!e.value.value.isPlaying) {
          e.value.play();
        } <span class="hljs-keyword">else</span> {
          e.value.pause();
        }
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">if</span> (onlyOne) {
          e.value.pause();
        }
      }
    }
  }

  <span class="hljs-comment">/// <span class="markdown">æš‚åœæ‰€æœ‰è§†é¢‘</span></span>
  <span class="hljs-keyword">void</span> pauseAll() {
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">final</span> e <span class="hljs-keyword">in</span> _controllerMap.entries) {
      e.value.pause();
    }
  }

  <span class="hljs-keyword">void</span> dispose(<span class="hljs-built_in">String</span> url) {
    _controllerMap[url]?.dispose();
    _controllerMap.remove(url);
  }

  <span class="hljs-keyword">void</span> disposeAll() {
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">final</span> c <span class="hljs-keyword">in</span> _controllerMap.values) {
      c.dispose();
    }
    _controllerMap.clear();
  }
}
</code></pre>
<h2 data-id="heading-5">æœ€åã€æ€»ç»“</h2>
<p>1ã€æ’­æ”¾è§†é¢‘ç»„ä»¶å’Œè§†é¢‘åˆ—è¡¨æ˜¯åˆ†å¼€çš„ï¼Œé€šè¿‡ç›‘å¬ VideoPlayerController ä¿æŒçŠ¶æ€ï¼ˆæ’­æ”¾ï¼Œæš‚åœï¼‰ä¸€è‡´æ€§ï¼Œç±»ä¼¼ç½‘ç»œè§†é¢‘å°çª—å£æ’­æ”¾ã€‚</p>
<p>2ã€é€šè¿‡ AppVideoPlayerService å®ç°å…¨å±€ VideoPlayerController ç¼“å­˜ï¼Œæé«˜åˆå§‹åŒ–åŠ è½½é€Ÿåº¦ã€‚</p>
<p>3ã€é€šè¿‡ quiver çš„ LruMap å®ç°æœ€å¤§ç¼“å­˜æ•°æ§åˆ¶ï¼Œé˜²æ­¢å†…å­˜çˆ†ç‚¸ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fshang1219178163%2Fflutter_templet_project%2Ftree%2Fv3.27.0%2Flib%2FbasicWidget%2FAppVideoPlayer" target="_blank" title="https://github.com/shang1219178163/flutter_templet_project/tree/v3.27.0/lib/basicWidget/AppVideoPlayer" ref="nofollow noopener noreferrer">github</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è·¨è¶Šè¿›ç¨‹çš„å¯¹è¯ä¹‹ä»ç®¡é“åˆ°gRPCçš„é€šä¿¡æŠ€æœ¯æ¼”è¿›]]></title>    <link>https://juejin.cn/post/7588007285546090502</link>    <guid>https://juejin.cn/post/7588007285546090502</guid>    <pubDate>2025-12-26T11:19:27.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588007285546090502" data-draft-id="7588001624904761363" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è·¨è¶Šè¿›ç¨‹çš„å¯¹è¯ä¹‹ä»ç®¡é“åˆ°gRPCçš„é€šä¿¡æŠ€æœ¯æ¼”è¿›"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-26T11:19:27.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç äº‹æ¼«è°ˆ"/> <meta itemprop="url" content="https://juejin.cn/user/1972974802965230"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è·¨è¶Šè¿›ç¨‹çš„å¯¹è¯ä¹‹ä»ç®¡é“åˆ°gRPCçš„é€šä¿¡æŠ€æœ¯æ¼”è¿›
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1972974802965230/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç äº‹æ¼«è°ˆ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-26T11:19:27.000Z" title="Fri Dec 26 2025 11:19:27 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>åœ¨ä¸€å°LinuxæœåŠ¡å™¨ä¸Šï¼Œä¸€ä¸ªç®€å•çš„ç®¡é“å‘½ä»¤ <code>cat README.md | grep rcore</code> èƒŒåï¼Œæ˜¯ä¸¤ä¸ªè¿›ç¨‹é€šè¿‡å†…æ ¸ä¸­è½¬çš„æ— ç¼åä½œï¼Œè¿™æ˜¯è¿›ç¨‹é—´é€šä¿¡æœ€åŸå§‹å´æœ‰æ•ˆçš„ä½“ç°ã€‚å½“è¿™ç§åä½œéœ€æ±‚ä»å•æœºæ‰©å±•åˆ°å…¨çƒåˆ†å¸ƒå¼ç³»ç»Ÿæ—¶ï¼Œæ¸¸æˆè§„åˆ™å½»åº•æ”¹å˜äº†ã€‚</p>
</blockquote>
<p>å½“æ“ä½œç³»ç»Ÿçš„ç®¡é“å°†ä¸€ä¸ªå‘½ä»¤çš„è¾“å‡ºä½œä¸ºå¦ä¸€ä¸ªå‘½ä»¤çš„è¾“å…¥æ—¶ï¼Œä¸€ä¸ªJavaç¼–å†™çš„è®¢å•æœåŠ¡æ­£åœ¨é€šè¿‡gRPCè°ƒç”¨Goå®ç°çš„åº“å­˜æœåŠ¡ï¼Œæ£€æŸ¥å•†å“åº“å­˜ã€‚è™½ç„¶å®ƒä»¬åŒä¸ºè¿›ç¨‹é—´é€šä¿¡ï¼Œä½†å®ç°æ–¹å¼å’Œåº”ç”¨åœºæ™¯å·²ç»å‘ç”Ÿäº†æ ¹æœ¬æ€§å˜åŒ–ã€‚</p>
<hr/>
<h2 data-id="heading-0">01 è¿›ç¨‹é—´é€šä¿¡æœ‰å“ªäº›æ–¹å¼ï¼Ÿ</h2>
<p>æ“ä½œç³»ç»Ÿä¸­çš„è¿›ç¨‹å°±åƒç‹¬ç«‹è¿è¡Œçš„å²›å±¿ï¼Œæ¯ä¸ªè¿›ç¨‹æ‹¥æœ‰è‡ªå·±çš„å†…å­˜ç©ºé—´å’Œè¿è¡Œç¯å¢ƒã€‚å½“è¿™äº›å²›å±¿éœ€è¦äº¤æ¢ä¿¡æ¯ã€åè°ƒè¡ŒåŠ¨æ—¶ï¼Œå°±éœ€è¦é€šè¿‡ç‰¹å®šçš„<strong>è¿›ç¨‹é—´é€šä¿¡æœºåˆ¶</strong>ã€‚</p>
<p>è¿›ç¨‹é—´é€šä¿¡æ ¹æ®æ˜¯å¦éœ€è¦å†…æ ¸ä¸­è½¬ï¼Œå¯ä»¥åˆ†ä¸ºç›´æ¥é€šä¿¡å’Œé—´æ¥é€šä¿¡ã€‚</p>
<p>ä¼ ç»ŸIPCæœºåˆ¶å¤šç§å¤šæ ·ï¼Œå„æœ‰å…¶è®¾è®¡åˆè¡·å’Œä½¿ç”¨åœºæ™¯ã€‚ä¸‹è¡¨ä»é€šä¿¡æ–¹å¼ã€é€‚ç”¨èŒƒå›´å’Œå…¸å‹åœºæ™¯è§’åº¦å¯¹æ¯”äº†å‡ ç§ä¸»è¦æœºåˆ¶ï¼š</p>









































<table><thead><tr><th>IPCæœºåˆ¶</th><th>é€šä¿¡æ–¹å¼</th><th>é€‚ç”¨èŒƒå›´</th><th>å…¸å‹åº”ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>ä¿¡å·</td><td>å¼‚æ­¥å‘é€ä¿¡å·</td><td>å•æœºè¿›ç¨‹é—´</td><td>è¿›ç¨‹æ§åˆ¶ã€å¼‚å¸¸å¤„ç†</td></tr><tr><td>ç®¡é“/å‘½åç®¡é“</td><td>å•å‘å­—èŠ‚æµ</td><td>çˆ¶å­è¿›ç¨‹/ä»»æ„è¿›ç¨‹</td><td>Shellå‘½ä»¤ç»„åˆã€ç®€å•æ•°æ®ä¼ é€’</td></tr><tr><td>æ¶ˆæ¯é˜Ÿåˆ—</td><td>ç»“æ„åŒ–æ¶ˆæ¯ä¼ é€’</td><td>å•æœºè¿›ç¨‹é—´</td><td>æœ‰æ ¼å¼æ¶ˆæ¯ä¼ é€’ã€ä¼˜å…ˆçº§æ¶ˆæ¯å¤„ç†</td></tr><tr><td>å…±äº«å†…å­˜</td><td>å†…å­˜åŒºåŸŸå…±äº«</td><td>å•æœºè¿›ç¨‹é—´</td><td>å¤§é‡æ•°æ®å¿«é€Ÿå…±äº«</td></tr><tr><td>å¥—æ¥å­—</td><td>ç½‘ç»œå­—èŠ‚æµ</td><td>è·¨ç½‘ç»œè¿›ç¨‹é—´</td><td>ç½‘ç»œæœåŠ¡ã€åˆ†å¸ƒå¼ç³»ç»Ÿ</td></tr></tbody></table>
<p>è¿›ç¨‹çš„éš”ç¦»æ€§æ—¢æ˜¯æ“ä½œç³»ç»Ÿçš„å®‰å…¨ä¿éšœï¼Œä¹Ÿæˆä¸ºè¿›ç¨‹åä½œçš„å¤©ç„¶å±éšœã€‚ç›´æ¥å†…å­˜å…±äº«è™½ç„¶é«˜æ•ˆï¼Œä½†<strong>è·¨ç½‘ç»œåœºæ™¯å®Œå…¨å¤±æ•ˆ</strong>ã€‚</p>
<h2 data-id="heading-1">02 ä»å•æœºé€šä¿¡åˆ°åˆ†å¸ƒå¼è°ƒç”¨</h2>
<p>åˆ†å¸ƒå¼ç³»ç»Ÿçš„å‘å±•å½»åº•æ”¹å˜äº†è¿›ç¨‹é—´é€šä¿¡çš„æ¸¸æˆè§„åˆ™ã€‚å½“è¿›ç¨‹ä¸å†å±€é™äºåŒä¸€å°ä¸»æœºï¼Œå½“é€šä¿¡åŒæ–¹å¯èƒ½ä½¿ç”¨ä¸åŒç¼–ç¨‹è¯­è¨€ç¼–å†™ï¼Œå½“ç½‘ç»œå»¶è¿Ÿæˆä¸ºä¸å¯å¿½è§†çš„å› ç´ æ—¶ï¼Œä¼ ç»ŸIPCæœºåˆ¶å°±æ˜¾å¾—åŠ›ä¸ä»å¿ƒäº†ã€‚</p>
<p>è¿™å°±æ˜¯è¿œç¨‹è¿‡ç¨‹è°ƒç”¨ï¼ˆRPCï¼‰æ¡†æ¶å‡ºç°çš„èƒŒæ™¯ã€‚RPCçš„æ ¸å¿ƒæ€æƒ³æ˜¯<strong>è®©è¿œç¨‹æœåŠ¡è°ƒç”¨çœ‹èµ·æ¥åƒæœ¬åœ°å‡½æ•°è°ƒç”¨ä¸€æ ·ç®€å•</strong>ï¼Œéšè—åº•å±‚çš„ç½‘ç»œé€šä¿¡ç»†èŠ‚ã€‚</p>
<p>æ—©æœŸçš„RPCæ¡†æ¶å¦‚Sun RPCã€XML-RPCå’ŒJSON-RPCï¼Œè™½ç„¶è§£å†³äº†è·¨ç½‘ç»œè°ƒç”¨çš„é—®é¢˜ï¼Œä½†åœ¨æ€§èƒ½ã€ç±»å‹å®‰å…¨å’Œå¼€å‘ä½“éªŒæ–¹é¢å­˜åœ¨æ˜æ˜¾çŸ­æ¿ã€‚</p>
<p>ç‰¹åˆ«æ˜¯éšç€å¾®æœåŠ¡æ¶æ„çš„å…´èµ·ï¼ŒæœåŠ¡æ•°é‡å‘ˆæŒ‡æ•°çº§å¢é•¿ï¼ŒæœåŠ¡é—´çš„é€šä¿¡é¢‘ç‡å’Œå¤æ‚åº¦ä¹Ÿéšä¹‹å¢åŠ ã€‚è¿™éœ€è¦ä¸€ä¸ª<strong>ä¸“é—¨ä¸ºåˆ†å¸ƒå¼ç¯å¢ƒè®¾è®¡ã€é«˜æ•ˆä¸”å¯é çš„é€šä¿¡æ–¹æ¡ˆ</strong>ã€‚</p>
<h2 data-id="heading-2">03 gRPCçš„å‡ºç°</h2>
<p>gRPCæ­£æ˜¯ä¸ºäº†åº”å¯¹åˆ†å¸ƒå¼ç³»ç»ŸæŒ‘æˆ˜è€Œç”Ÿçš„ç°ä»£RPCæ¡†æ¶ã€‚å®ƒåŸºäºHTTP/2åè®®å’ŒProtocol Buffersåºåˆ—åŒ–æœºåˆ¶ï¼Œæä¾›äº†ä¸€å¥—å®Œæ•´çš„è·¨è¯­è¨€æœåŠ¡é€šä¿¡æ–¹æ¡ˆã€‚</p>
<p>ä»<strong>åè®®è®¾è®¡</strong>è§’åº¦æ¥çœ‹ï¼ŒgRPCå……åˆ†åˆ©ç”¨äº†HTTP/2çš„å…ˆè¿›ç‰¹æ€§ã€‚äºŒè¿›åˆ¶åˆ†å¸§å±‚å°†æ•°æ®åˆ†å‰²ä¸ºæ›´å°çš„å¸§ï¼Œé€šè¿‡å¤šè·¯å¤ç”¨å®ç°å¹¶è¡Œä¼ è¾“ï¼Œå½»åº•æ¶ˆé™¤äº†é˜Ÿå¤´é˜»å¡é—®é¢˜ã€‚</p>
<p>åœ¨å¾®æœåŠ¡é—´é¢‘ç¹è°ƒç”¨çš„åœºæ™¯ä¸­ï¼ŒHPACKå¤´éƒ¨å‹ç¼©ç®—æ³•å¯å‡å°‘50%ä»¥ä¸Šçš„å¤´éƒ¨å¼€é”€ï¼Œè¿™åœ¨å¤§é‡å°è¯·æ±‚çš„å¾®æœåŠ¡ç¯å¢ƒä¸­æ•ˆæœå°¤ä¸ºæ˜¾è‘—ã€‚</p>
<p><strong>è·¨è¯­è¨€æ”¯æŒ</strong>æ˜¯gRPCçš„å¦ä¸€å¤§äº®ç‚¹ã€‚é€šè¿‡ä»£ç ç”Ÿæˆæœºåˆ¶ï¼ŒgRPCæ”¯æŒ12ç§ä¸»æµç¼–ç¨‹è¯­è¨€ï¼Œä»Goã€Javaåˆ°Pythonã€C++ï¼Œéƒ½å¯ä»¥åŸºäºç›¸åŒçš„æ¥å£å®šä¹‰è¿›è¡Œå¼€å‘ã€‚</p>
<p>è¿™ç§è¯­è¨€æ— å…³æ€§æå¤§é™ä½äº†å¤šæŠ€æœ¯æ ˆå›¢é˜Ÿçš„åä½œæˆæœ¬ã€‚ä¾‹å¦‚ï¼Œåœ¨ä¸€ä¸ªå…¸å‹ç”µå•†ç³»ç»Ÿä¸­ï¼ŒJavaç¼–å†™çš„è®¢å•æœåŠ¡å¯ä»¥æ— ç¼è°ƒç”¨Goå®ç°çš„åº“å­˜æœåŠ¡ï¼Œè€ŒPythonå¼€å‘çš„æ•°æ®åˆ†ææœåŠ¡åˆå¯ä»¥è°ƒç”¨è¿™ä¸¤è€…çš„æ¥å£ã€‚</p>
<p>gRPCå†…ç½®çš„æµå¼å¤„ç†èƒ½åŠ›ä¹Ÿå€¼å¾—ä¸€æã€‚å®ƒæä¾›ä¸‰ç§æµå¼RPCæ¨¡å¼ï¼šå®¢æˆ·ç«¯æµã€æœåŠ¡ç«¯æµå’ŒåŒå‘æµã€‚åœ¨å®æ—¶é€šä¿¡åœºæ™¯ä¸­ï¼ŒåŒå‘æµå¼RPCä¼ è¾“éŸ³è§†é¢‘æ•°æ®ï¼Œç«¯åˆ°ç«¯å»¶è¿Ÿå¯ä»¥ç¨³å®šåœ¨80æ¯«ç§’ä»¥å†…ã€‚</p>
<h2 data-id="heading-3">04 ä½•æ—¶é€‰æ‹©gRPCï¼Ÿ</h2>
<p>è™½ç„¶gRPCä¼˜åŠ¿æ˜æ˜¾ï¼Œä½†å®ƒå¹¶éé“¶å¼¹ã€‚æŠ€æœ¯é€‰å‹éœ€è¦æ ¹æ®å…·ä½“åœºæ™¯å’Œéœ€æ±‚è¿›è¡Œæƒè¡¡ã€‚</p>
<p>åœ¨<strong>å†…éƒ¨å¾®æœåŠ¡é€šä¿¡</strong>é¢†åŸŸï¼ŒgRPCå‡ ä¹æ˜¯ç†æƒ³é€‰æ‹©ã€‚ç‰¹åˆ«æ˜¯å½“æœåŠ¡éƒ¨ç½²åœ¨åŒä¸€æ•°æ®ä¸­å¿ƒå†…ï¼Œç½‘ç»œç¯å¢ƒå¯æ§æ—¶ï¼ŒgRPCçš„é«˜æ€§èƒ½ç‰¹æ€§èƒ½å¤Ÿå¾—åˆ°å……åˆ†å‘æŒ¥ã€‚</p>
<p>å¯¹äº<strong>é«˜æ€§èƒ½è®¡ç®—å’Œæ•°æ®å¯†é›†</strong>å‹åº”ç”¨ï¼ŒgRPCçš„ä½å»¶è¿Ÿã€é«˜ååç‰¹æ€§éå¸¸æœ‰ä»·å€¼ã€‚ä¾‹å¦‚åœ¨é‡‘èé£æ§ç³»ç»Ÿä¸­ï¼Œæ¯«ç§’çº§çš„å»¶è¿Ÿå·®å¼‚å¯èƒ½å†³å®šäº¤æ˜“çš„æˆè´¥ã€‚</p>
<p>åœ¨<strong>å¤šè¯­è¨€æ··åˆå¼€å‘</strong>ç¯å¢ƒä¸­ï¼ŒgRPCæä¾›äº†ä¸€è‡´çš„é€šä¿¡æ ‡å‡†ã€‚ä¸åŒå›¢é˜Ÿä½¿ç”¨ä¸åŒæŠ€æœ¯æ ˆæ—¶ï¼Œå¯ä»¥é€šè¿‡ç»Ÿä¸€çš„gRPCæ¥å£è¿›è¡Œåä½œï¼Œè€Œæ— éœ€ä¸ºæ¯ç§è¯­è¨€ç»„åˆå•ç‹¬è®¾è®¡é€šä¿¡åè®®ã€‚</p>
<p><strong>å®æ—¶æ•°æ®æµå¤„ç†</strong>åœºæ™¯ä¹Ÿèƒ½ä»gRPCçš„æµå¼èƒ½åŠ›ä¸­å—ç›Šã€‚ä¾‹å¦‚é‡‘èè¡Œæƒ…æ¨é€ç³»ç»Ÿï¼Œä½¿ç”¨æœåŠ¡ç«¯æµå¼RPCï¼Œå•å°æœåŠ¡å™¨å³å¯æ”¯æ’‘æ•°ä¸‡å¹¶å‘è®¢é˜…ï¼Œæ¶ˆæ¯é€è¾¾å»¶è¿Ÿä½äº50æ¯«ç§’ã€‚</p>
<h2 data-id="heading-4">05 gRPCçš„å±€é™ä¸æŒ‘æˆ˜</h2>
<p>å½“ç„¶ï¼ŒgRPCå¹¶éé€‚ç”¨äºæ‰€æœ‰åœºæ™¯ã€‚å®ƒçš„æŠ€æœ¯ç‰¹æ€§å†³å®šäº†åœ¨æŸäº›ç¯å¢ƒä¸­ä½¿ç”¨ä¼šæœ‰æ˜æ˜¾å±€é™ã€‚</p>
<p>æœ€çªå‡ºçš„é—®é¢˜æ˜¯<strong>æµè§ˆå™¨å…¼å®¹æ€§é™åˆ¶</strong>ã€‚ç”±äºæµè§ˆå™¨åŸç”Ÿä¸æ”¯æŒHTTP/2çš„éåŠ å¯†è¿æ¥ï¼ŒgRPCæœåŠ¡éœ€è¦é€šè¿‡gRPC-Webè½¬æ¢å±‚æš´éœ²APIã€‚</p>
<p>è¿™ç§è½¬æ¢ä¼šå¼•å…¥é¢å¤–å¤„ç†æ—¶é—´ï¼Œä½¿å“åº”æ—¶é—´å¢åŠ 15-20æ¯«ç§’ã€‚åœ¨è¶…ä½å»¶è¿Ÿåœºæ™¯ä¸­ï¼Œè¿™å¯èƒ½å½±å“ç”¨æˆ·ä½“éªŒã€‚</p>
<p><strong>è°ƒè¯•å’Œç›‘æ§å¤æ‚æ€§</strong>ä¹Ÿæ˜¯éœ€è¦è€ƒè™‘çš„å› ç´ ã€‚äºŒè¿›åˆ¶åè®®çš„å¯è¯»æ€§å·®ï¼Œç½‘ç»œæŠ“åŒ…åˆ†æå›°éš¾ã€‚åœ¨å®é™…æ•…éšœæ’æŸ¥æ—¶ï¼Œå›¢é˜Ÿå¯èƒ½éœ€è¦èŠ±è´¹æ•°å°æ—¶å¯¹æ¯”Protocol Bufferså®šä¹‰ä¸å®é™…æ•°æ®ã€‚</p>
<p>åœ¨èµ„æºå—é™çš„ç¯å¢ƒä¸­ï¼Œå¦‚æŸäº›IoTè®¾å¤‡ï¼ŒProtobufè§£æçš„CPUå ç”¨å¯èƒ½æ¯”JSONé«˜25%ã€‚åœ¨æ™ºèƒ½å®¶å±…é¡¹ç›®ä¸­æµ‹è¯•å‘ç°ï¼Œå¤„ç†gRPCè¯·æ±‚å¯èƒ½ä½¿è®¾å¤‡ç”µæ± ç»­èˆªå‡å°‘18%ã€‚</p>
<h2 data-id="heading-5">06 æ··åˆæ¶æ„çš„å®è·µæ™ºæ…§</h2>
<p>åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œçº¯ç²¹çš„gRPCæ¶æ„æˆ–çº¯ç²¹çš„RESTfulæ¶æ„éƒ½å¯èƒ½æœ‰å±€é™æ€§ã€‚<strong>æ··åˆæ¶æ„</strong>å¾€å¾€èƒ½å¤Ÿå®ç°æŠ€æœ¯ä»·å€¼çš„æœ€å¤§åŒ–ã€‚</p>
<p>ä¸€ç§å¸¸è§çš„æ¨¡å¼æ˜¯æ ¸å¿ƒæœåŠ¡é—´ä½¿ç”¨gRPCè¿›è¡Œé«˜æ•ˆé€šä¿¡ï¼Œè€Œå¯¹å¤–çš„APIæ¥å£åˆ™é€šè¿‡RESTfulæš´éœ²ã€‚</p>
<p>è¿™æ ·æ—¢äº«å—äº†gRPCåœ¨å†…éƒ¨é€šä¿¡çš„æ€§èƒ½ä¼˜åŠ¿ï¼Œåˆä¿æŒäº†å¤–éƒ¨æ¥å£çš„å¹¿æ³›å…¼å®¹æ€§ã€‚</p>
<p>å¯¹äºéœ€è¦æµè§ˆå™¨ç›´æ¥è°ƒç”¨çš„åœºæ™¯ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨<strong>gRPC-Webä½œä¸ºè¿‡æ¸¡æ–¹æ¡ˆ</strong>ï¼Œæˆ–è€…ä¸ºå…³é”®åŠŸèƒ½æä¾›RESTfulå¤‡ç”¨æ¥å£ã€‚</p>
<p>åœ¨ç›‘æ§å’Œè°ƒè¯•æ–¹é¢ï¼Œå¯ä»¥é…ç½®ä¸“é—¨çš„<strong>è°ƒè¯•ä»£ç†</strong>ï¼Œå°†äºŒè¿›åˆ¶åè®®è½¬æ¢ä¸ºå¯è¯»æ ¼å¼ï¼Œæˆ–ä½¿ç”¨grpcurlç­‰å·¥å…·è¾…åŠ©è°ƒè¯•ã€‚</p>
<hr/>
<p>å›åˆ°Kubernetesé›†ç¾¤ä¸­çš„ä¸€ä¸ªèŠ‚ç‚¹ä¸Šï¼ŒKubeleté€šè¿‡gRPCä¸API Serveré€šä¿¡ï¼Œè·å–æœ€æ–°çš„å®¹å™¨è°ƒåº¦æŒ‡ä»¤ã€‚è€Œåœ¨åŒä¸€èŠ‚ç‚¹å†…éƒ¨ï¼Œå®¹å™¨é—´çš„è¿›ç¨‹å¯èƒ½ä»åœ¨ä½¿ç”¨å…±äº«å†…å­˜äº¤æ¢æ•°æ®ã€‚</p>
<p>è¿™äº›ä¸åŒå±‚çº§çš„é€šä¿¡æœºåˆ¶åœ¨ç³»ç»Ÿä¸­å’Œè°å…±å­˜ï¼Œ<strong>ä»æ“ä½œç³»ç»Ÿçš„ç®¡é“åˆ°åˆ†å¸ƒå¼çš„gRPCï¼Œå†åˆ°è¾¹ç¼˜è®¡ç®—ä¸­çš„è½»é‡çº§æ¶ˆæ¯é˜Ÿåˆ—</strong>ï¼Œæ¯ä¸€å±‚éƒ½è§£å†³ç€ç‰¹å®šåœºæ™¯ä¸‹çš„é€šä¿¡é—®é¢˜ã€‚æŠ€æœ¯ä¸æ˜¯éæ­¤å³å½¼çš„é€‰æ‹©ï¼Œè€Œæ˜¯æ ¹æ®åœºæ™¯å’Œéœ€æ±‚çš„é€‚é…ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item>  </channel></rss>