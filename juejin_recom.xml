<?xml version="1.0" encoding="UTF-8"?><rss version="2.0">  <channel>      <title>æ˜é‡‘æ–‡ç« æ¨è</title>      <link>https://juejin.cn/recommended?sort=newest</link>      <description>ä¸€ä¸ªå¸®åŠ©å¼€å‘è€…æˆé•¿çš„ç¤¾åŒº</description>      <generator>python juejin_recom.py @Pi20</generator>      <item>    <title><![CDATA[5 å€æ€§èƒ½æå‡ï¼ŒApache Doris TopN å…¨å±€ä¼˜åŒ–è¯¦è§£ï½œDeep Dive]]></title>    <link>https://juejin.cn/post/7589513539845636131</link>    <guid>https://juejin.cn/post/7589513539845636131</guid>    <pubDate>2025-12-30T13:26:26.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589513539845636131" data-draft-id="7589477775210496052" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="5 å€æ€§èƒ½æå‡ï¼ŒApache Doris TopN å…¨å±€ä¼˜åŒ–è¯¦è§£ï½œDeep Dive"/> <meta itemprop="keywords" content="æ•°æ®åº“,Apache"/> <meta itemprop="datePublished" content="2025-12-30T13:26:26.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="SelectDB"/> <meta itemprop="url" content="https://juejin.cn/user/3189021726222904"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            5 å€æ€§èƒ½æå‡ï¼ŒApache Doris TopN å…¨å±€ä¼˜åŒ–è¯¦è§£ï½œDeep Dive
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3189021726222904/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    SelectDB
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-30T13:26:26.000Z" title="Tue Dec 30 2025 13:26:26 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»13åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨æ—¥å¸¸çš„æ•°æ®åˆ†æå’Œä¸šåŠ¡æŠ¥è¡¨ä¸­ï¼ŒTopN æŸ¥è¯¢å‡ ä¹æ— å¤„ä¸åœ¨ï¼šæ— è®ºæ˜¯å¯»æ‰¾é”€é‡æœ€é«˜çš„å‰åä»¶å•†å“ï¼Œè¿˜æ˜¯ç­›é€‰è®¿é—®é‡æœ€å¤šçš„å‰å‡ æ¡æ—¥å¿—ï¼Œå¼€å‘è€…å’Œæ•°æ®åˆ†æå¸ˆéƒ½åœ¨é¢‘ç¹å¤„ç†â€œå‰ N æ¡æ•°æ®â€ã€‚ç„¶è€Œï¼Œ<strong>å½“è¡¨çš„åˆ—æ•°è¾¾åˆ°ç™¾ä½™æˆ–æ›´å¤šæ—¶ï¼Œä¸€ä¸ªçœ‹ä¼¼ç®€å•çš„ <code>SELECT * â€¦ ORDER BY â€¦ LIMIT N</code> æŸ¥è¯¢ï¼ŒèƒŒåå¯èƒ½éšè—ç€å·¨å¤§çš„æ€§èƒ½ç“¶é¢ˆ</strong>ã€‚å°½ç®¡æˆ‘ä»¬åªå…³å¿ƒæŸä¸€åˆ—çš„å‰ N æ¡ç»“æœï¼Œæ•°æ®åº“ä¾ç„¶å¯èƒ½æ‰«ææ•´å¼ è¡¨çš„æ‰€æœ‰åˆ—ï¼Œä»è€Œå¯¼è‡´ IO è¯»æ”¾å¤§ï¼ˆRead Amplificationï¼‰ï¼Œæ‹–æ…¢æŸ¥è¯¢é€Ÿåº¦ã€‚åœ¨å¤§æ•°æ®åœºæ™¯ä¸‹ï¼Œè¿™ç§ä½æ•ˆä¸ä»…æµªè´¹å­˜å‚¨å¸¦å®½ï¼Œè¿˜ç›´æ¥å½±å“ä¸šåŠ¡å†³ç­–çš„å®æ—¶æ€§ã€‚</p>
<p>ä¸ºäº†å¸®åŠ©ç”¨æˆ·å¿«é€Ÿè·å–ç›®æ ‡æ•°æ®ï¼Œ<strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fdoris.apache.org%2F" target="_blank" title="https://doris.apache.org/" ref="nofollow noopener noreferrer">Apache Doris</a>é’ˆå¯¹ TopN ç±»å‹æŸ¥è¯¢è¿›è¡Œäº†å…¨å±€ä¼˜åŒ–ï¼Œå¯å°†æ­¤ç±»æŸ¥è¯¢çš„æ€§èƒ½æå‡çº¦ 5 å€ï¼›åŒæ—¶ï¼Œä¼˜åŒ–èŒƒå›´ä¹Ÿä»å•è¡¨è¿›ä¸€æ­¥æ‹“å±•è‡³æ•°æ®æ¹–åœºæ™¯ä¸å¤šè¡¨å…³è”æŸ¥è¯¢ï¼Œæ˜¾è‘—æ‰©å¤§äº†é€‚ç”¨èŒƒå›´</strong>ã€‚</p>
<h2 data-id="heading-0">TopN æŸ¥è¯¢ä¼˜åŒ–æ€è·¯</h2>
<p><strong>ä¸ºç›´è§‚è¯´æ˜ TopN æŸ¥è¯¢çš„æ€§èƒ½ç“¶é¢ˆï¼Œæˆ‘ä»¬ä¸å¦¨å°†å…¶ç®€åŒ–ä¸ºåˆ—å¼å­˜å‚¨æ–‡ä»¶çš„è¯»å–åœºæ™¯ï¼Œæ¯”å¦‚è®¿é—® Apache Doris å†…éƒ¨ Segment æ–‡ä»¶ï¼Œæˆ–è®¿é—®æ•°æ®æ¹–ä¸­å¸¸è§çš„ Parquet / ORC æ–‡ä»¶</strong>ã€‚</p>
<p>å‡è®¾éœ€è¦æ‰¾â€œç¬¬äºŒåˆ—â€ä¸­ï¼Œæ•°å€¼æœ€å¤§çš„é‚£æ¡è®°å½•ï¼š<code>SELECT * FROM table ORDER BY col2 LIMIT 1</code>ã€‚ç”±äºæŸ¥è¯¢éœ€è¦è¿”å›æ•´è¡Œï¼Œä¼ ç»Ÿåšæ³•é€šå¸¸æ˜¯å…ˆæ‰«æè¡¨çš„<strong>æ‰€æœ‰åˆ—</strong>ï¼Œæ’åºåå†å®šä½åˆ°å¯¹åº”è®°å½•ã€‚</p>
<p>è€Œ Apache Doris åŸç”Ÿåˆ—å¼å­˜å‚¨çš„ç‰©ç†å¸ƒå±€èƒ½å¤Ÿæä¾›æ›´ä¼˜è§£ï¼šç”±äºå„åˆ—ç‹¬ç«‹å­˜æ”¾ï¼Œå› æ­¤å¯å…ˆ<strong>ä»…è¯»å–ç¬¬äºŒåˆ—</strong>çš„æ•°æ®ï¼Œå¿«é€Ÿè®¡ç®—å‡ºæœ€å¤§å€¼æ‰€åœ¨çš„è¡Œå·ï¼›å†åˆ©ç”¨æ–‡ä»¶å…ƒæ•°æ®ï¼Œç›´æ¥æŒ‰è¡Œå·æå–è¯¥è¡Œçš„å®Œæ•´è®°å½•ï¼Œæ— éœ€æ‰«ææ— å…³åˆ—ã€‚ç›¸æ¯”ä¼ ç»Ÿæ–¹å¼ï¼Œ<strong>è¿™ç§æ–¹æ³•æ˜¾è‘—å‡å°‘ IO è¯»æ”¾å¤§å¹¶é™ä½å†…å­˜å ç”¨</strong>ã€‚</p>
<p><strong>è¿™ä¸€ä¼˜åŒ–å¯¹äºæ¹–ä»“åˆ†æåœºæ™¯å°¤ä¸ºå…³é”®ï¼Œå› å…¶ç›´æ¥å…³ä¹æˆæœ¬åŠæ€§èƒ½</strong>ã€‚ å¯¹äº Icebergã€Paimon ç­‰å¼€æ”¾æ¹–æ ¼å¼ï¼Œæ•°æ®é€šå¸¸å­˜æ”¾åœ¨ S3 ç­‰å¯¹è±¡å­˜å‚¨ä¸­ï¼Œå…¶ IO æ€§èƒ½æ™®éä½äºæœ¬åœ°ç£ç›˜ï¼Œä¸”å¸¸æŒ‰è®¿é—®æµé‡æˆ–è¯·æ±‚æ¬¡æ•°è®¡è´¹ã€‚<strong>æ•°æ®æ‰«ææ¬¡æ•°çš„å‡å°‘ï¼Œæ„å‘³ç€æ›´ä½çš„å»¶è¿Ÿä¸æ›´å°‘çš„è´¹ç”¨</strong>ã€‚ç‰¹åˆ«æ˜¯åœ¨æ•°æ®é‡åºå¤§ã€æŸ¥è¯¢é¢‘ç¹çš„åˆ†æä¸šåŠ¡ä¸­ï¼ŒTopN çš„ä¼˜åŒ–ä¸ä»…èƒ½å¤§å¹…æå‡å“åº”é€Ÿåº¦ï¼Œæ›´èƒ½å¸¦æ¥åˆ‡å®çš„æˆæœ¬èŠ‚çº¦ï¼Œå®ç°æ€§èƒ½ä¸ç»æµçš„åŒé‡æ”¶ç›Šã€‚</p>
<h2 data-id="heading-1">å…¨å±€ TopN ä¼˜åŒ–å®ç°</h2>
<p>åŸºäºä¸Šè¿°æ€è·¯æŒ‡å¼•ï¼Œ<strong>Apache Doris å®Œæˆäº†å¯¹ TopN çš„å…¨å±€ä¼˜åŒ–</strong>ã€‚å¯¹äºå•è¡¨çš„ TopNï¼Œåˆ©ç”¨å•èŠ‚ç‚¹å†…çš„ Runtime Filter å¯¹å†…éƒ¨è¡¨æŸ¥è¯¢è¿›è¡ŒåŠ¨æ€è¿‡æ»¤ï¼Œæœ‰æ•ˆå‡å°‘ IO å¹¶æå‡æ‰§è¡Œæ€§èƒ½ã€‚åœ¨å‰ä¸ä¹…ä¸å‘çš„ 4.0 ç‰ˆæœ¬ä¸­ï¼Œä¹Ÿè¿›ä¸€æ­¥æå‡äº† TopN æŸ¥è¯¢æ€§èƒ½ï¼Œé€šè¿‡å¼•å…¥ MaterializeNodeï¼Œå®ç°äº†ä¸¤é˜¶æ®µæ•°æ®è®¿é—®æœºåˆ¶ï¼Œ<strong>å¹¶å°†ä¼˜åŒ–èŒƒå›´ä»å•è¡¨è¿›ä¸€æ­¥æ‹“å±•è‡³æ•°æ®æ¹–åœºæ™¯ä¸å¤šè¡¨å…³è”æŸ¥è¯¢ï¼Œæ˜¾è‘—æ‰©å¤§äº†å…¶é€‚ç”¨èŒƒå›´</strong>ã€‚</p>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†æ·±å…¥è§£æ TopN Runtime Filterã€å•è¡¨ä¸¤é˜¶æ®µ TopN ä»¥åŠå¤šè¡¨å…³è” TopN çš„å…·ä½“ä¼˜åŒ–å®ç°ã€‚</p>
<h3 data-id="heading-2">01 é‡‡ç”¨ Runtime Filter</h3>
<p>Runtime Filter æ˜¯ä¸€ç§è¿è¡Œæ—¶æ•°æ®è£å‰ªæŠ€æœ¯ã€‚Doris åœ¨æ‰§è¡Œ SQL æ—¶åŠ¨æ€ç”Ÿæˆè¿‡æ»¤æ¡ä»¶ï¼Œå¹¶å°†è¿™äº›æ¡ä»¶ä¸‹æ¨åˆ°åç»­æ•°æ®å¤„ç†ç¯èŠ‚ï¼Œåˆ©ç”¨è¿è¡Œæ—¶ä¿¡æ¯è¿›è¡Œæ•°æ®è£å‰ªï¼Œä»è€Œé™ä½ IO å¼€é”€å¹¶æå‡æ€§èƒ½ã€‚åœ¨ä¸¤è¡¨ Join åœºæ™¯ä¸­ï¼Œè¿™ä¸€æŠ€æœ¯çš„å…¸å‹åº”ç”¨æ˜¯å°† build ä¾§çš„ key é›†åˆé€šè¿‡ IN-listã€Bloom Filter ç­‰å½¢å¼ä¸‹æ¨åˆ° probe ä¾§ï¼Œå°½æ—©è¿‡æ»¤æ‰æ— å…³æ•°æ®ï¼Œå‡å°‘æ‰«æå’Œä¼ è¾“ã€‚</p>
<p><strong>TopN Runtime Filter åŒæ ·é‡‡ç”¨è¿™ä¸€æ€è·¯ï¼Œåœ¨è¿è¡Œæ—¶ç»´æŠ¤æ’åºåˆ—çš„å€¼èŒƒå›´ï¼Œå¹¶ç”Ÿæˆ Runtime Filter ä»¥è£å‰ªåç»­æ‰«æï¼Œä»è€Œæå‡å•èŠ‚ç‚¹ä¸Šçš„ TopN æŸ¥è¯¢æ€§èƒ½</strong>ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/eb23108328124493a8c738139382cd41~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2VsZWN0REI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767705986&amp;x-signature=qigvcHP5Qq9OpplgYh0NccEZfxs%3D" alt="01 é‡‡ç”¨ Runtime Filter.PNG" loading="lazy"/></p>
<p>åœ¨å•æœºæµ‹è¯•ä¸­ï¼ŒåŸºäº Runtime Filter ä¼˜åŒ–åçš„ TopN æŸ¥è¯¢è€—æ—¶ä» <strong>3 ç§’é™åˆ° 1 ç§’ï¼Œæ€§èƒ½æå‡çº¦ 3 å€</strong>ï¼š</p>
<pre><code class="hljs language-vbnet" lang="vbnet"><span class="hljs-keyword">SELECT</span> * <span class="hljs-keyword">FROM</span> lineitem <span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> l_orderkey LIMIT <span class="hljs-number">1000</span>;
</code></pre>
<h3 data-id="heading-3">02 ä¸¤é˜¶æ®µæ•°æ®è®¿é—®æœºåˆ¶</h3>
<p>åŸºäº Runtime Filter çš„æ–¹æ³•è™½ç„¶èƒ½å¤Ÿåœ¨è¿è¡Œæ—¶åŠ¨æ€è¿‡æ»¤æ•°æ®ï¼Œä½†ä»éœ€è¯»å–æ‰€æœ‰åˆ—ï¼Œæ— æ³•å½»åº•æ¶ˆé™¤è¯»æ”¾å¤§ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬<strong>å¼•å…¥äº†ä¸¤é˜¶æ®µæ•°æ®è®¿é—®æœºåˆ¶</strong>ï¼Œè¿›ä¸€æ­¥å‡å°‘åˆ—çš„è¯»å–ä¸ IO å¼€é”€ã€‚å…¶æ‰§è¡Œæµç¨‹ç¤ºæ„å›¾å¦‚ä¸‹ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3a1aaffedaae4206b695dc2503f64c01~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2VsZWN0REI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767705986&amp;x-signature=ALE5rg8ykIk%2B6Hrlv3pNttp5xJM%3D" alt="02 ä¸¤é˜¶æ®µæ•°æ®è®¿é—®æœºåˆ¶.png" loading="lazy"/></p>
<p>ä»¥å¦‚ä¸‹ SQL ä¸ºä¾‹ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> <span class="hljs-keyword">table</span> <span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> colA LIMIT <span class="hljs-number">10</span>;
</code></pre>
<p><strong>ç¬¬ 1 é˜¶æ®µï¼šåªè¯»å–æ’åºåˆ—</strong></p>
<p>åœ¨è¯¥é˜¶æ®µçš„ Scan ä»»åŠ¡ä¸­ï¼Œç³»ç»Ÿåªè¯»å–æ’åºåˆ—<code>colA</code>ï¼Œå¹¶å¢åŠ ä¸€ä¸ªè¾…åŠ©åˆ— <code>__DORIS_ROWID_COL__</code>ã€‚ç›¸å½“äºæ‰§è¡Œï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">SELECT</span> colA, __DORIS_ROWID_COL__ <span class="hljs-keyword">FROM</span> <span class="hljs-keyword">table</span> <span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> colA LIMIT <span class="hljs-number">10</span>;
</code></pre>
<p>è¯¥æ–¹æ³•è·³è¿‡äº†éæ’åºåˆ—çš„è¯»å–ï¼Œä»…æ‰«æä¸æ’åºç›¸å…³çš„æ•°æ®å¹¶è®°å½•å…¶ä½ç½®ä¿¡æ¯ã€‚<code>DORIS_ROWID_COL</code> ç”¨äºå”¯ä¸€æ ‡è¯†æ•°æ®æ‰€åœ¨æ–‡ä»¶ä¸è¡Œå·ï¼Œå…¶å…·ä½“ç¼–ç è®¾è®¡å°†åœ¨åç»­ç« èŠ‚è¯¦ç»†è¯´æ˜ã€‚</p>
<p><strong>ç¬¬ 2 é˜¶æ®µï¼šåŸºäº RowID çš„å®Œæ•´æ•°æ®è·å–</strong></p>
<p>æ–°å¢çš„ MaterializeNode æ¥æ”¶ç¬¬ä¸€é˜¶æ®µçš„ç»“æœåï¼Œä¼šæ ¹æ® <code>__DORIS_ROWID_COL__</code> å‘å¯¹åº” Backend å‘èµ·åŸºäºè¡Œå·ï¼ˆRowIDï¼‰çš„æ•°æ®æ‹‰å–è¯·æ±‚ã€‚å€ŸåŠ©æ–‡ä»¶ä¸­è®°å½•çš„ä½ç½®ä¿¡æ¯ï¼ŒDoris å¯ä»¥å¿«é€Ÿå®šä½å¹¶è¯»å–å¯¹åº”è®°å½•ï¼›ç”±äºå·²å®Œæˆ TopN è®¡ç®—ï¼Œç¬¬äºŒé˜¶æ®µé€šå¸¸åªéœ€è¯»å–æœ‰é™è¡Œï¼ˆä¾‹å¦‚ç¤ºä¾‹ä¸­çš„ 10 è¡Œï¼‰ã€‚</p>
<p><strong>å¾—ç›Šäºè¯¥é˜¶æ®µå¯é€šè¿‡</strong> <strong>RPC</strong> <strong>è·¨èŠ‚ç‚¹æ‰§è¡Œï¼Œæ‰“ç ´äº†å•èŠ‚ç‚¹æ‰§è¡Œé™åˆ¶ï¼Œä¸¤é˜¶æ®µè®¿é—®æœºåˆ¶ä¹Ÿè‡ªç„¶æ‰©å±•è‡³å¤šè¡¨å…³è”çš„ TopN åœºæ™¯ï¼Œä¾‹å¦‚ï¼š</strong></p>
<pre><code class="hljs language-vbnet" lang="vbnet"><span class="hljs-keyword">SELECT</span> * <span class="hljs-keyword">FROM</span> 
lineitem <span class="hljs-keyword">JOIN</span>  orders 
<span class="hljs-keyword">ON</span> l_orderkey = o_orderkey
<span class="hljs-keyword">WHERE</span> o_orderdate &lt; <span class="hljs-type">DATE</span> <span class="hljs-comment">'1995-03-15' </span>
<span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> l_partkey LIMIT <span class="hljs-number">100</span>;
</code></pre>
<p>å…¶æ‰§è¡Œè§„åˆ’ç¤ºæ„å¦‚ä¸‹ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3fc8ac734f814aaea15def8158107271~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2VsZWN0REI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767705986&amp;x-signature=ovakvwleAFXtow0CXTOtAeuaFP8%3D" alt="02 ä¸¤é˜¶æ®µæ•°æ®è®¿é—®æœºåˆ¶-1.png" loading="lazy"/></p>
<p>æ‰§è¡Œè®¡åˆ’ä¸­ï¼ŒMaterializeNode åœ¨ç¬¬äºŒé˜¶æ®µå¯ä»¥ç©¿é€ Join èŠ‚ç‚¹ï¼Œä»æ‰«æèŠ‚ç‚¹è·å–æœ€ç»ˆæ•°æ®ã€‚</p>
<h2 data-id="heading-4">ä¼˜åŒ–å‰åæ€§èƒ½è¡¨ç°</h2>
<p>Apache Doris å¯¹äº TopN çš„ä¼˜åŒ–å·²åœ¨å¤šç§åœºæ™¯ä¸Šå¾—åˆ°éªŒè¯ã€‚æˆ‘ä»¬åœ¨ Doris å†…è¡¨ã€Parquet åŠ ORC æ ¼å¼çš„ Hive è¡¨ä¸Šï¼ŒåŸºäº TPCH 100G æ ‡å‡†æ•°æ®é›†ä¸­çš„ <code>lineitem</code> è¡¨ï¼Œåˆ†åˆ«æ„å»ºäº†<strong>å•è¡¨</strong>ä¸<strong>å¤šè¡¨</strong> TopN æŸ¥è¯¢åœºæ™¯ï¼Œç³»ç»Ÿå¯¹æ¯”äº†ä¼˜åŒ–å‰åçš„æ€§èƒ½è¡¨ç°ã€‚</p>
<ul>
<li>
<p>å•è¡¨ TopN æŸ¥è¯¢ç¤ºä¾‹ï¼ˆé€‰å–ä¸åŒæ’åºåˆ—ï¼‰ï¼š</p>
<ul>
<li>
<pre><code class="hljs language-vbnet" lang="vbnet">  -- Q1 - Q3:
  <span class="hljs-keyword">select</span> * <span class="hljs-keyword">from</span> lineitem <span class="hljs-keyword">order</span> <span class="hljs-keyword">by</span> l_orderkey limit <span class="hljs-number">1000</span>;
  <span class="hljs-keyword">select</span> * <span class="hljs-keyword">from</span> lineitem <span class="hljs-keyword">order</span> <span class="hljs-keyword">by</span> l_partkey limit <span class="hljs-number">1000</span>;
  <span class="hljs-keyword">select</span> * <span class="hljs-keyword">from</span> lineitem <span class="hljs-keyword">order</span> <span class="hljs-keyword">by</span> l_comment limit <span class="hljs-number">1000</span>;
</code></pre>
</li>
</ul>
</li>
<li>
<p>å¤šè¡¨ TopN æŸ¥è¯¢ç¤ºä¾‹ï¼ˆä¸åŒçš„è¡¨æ•°ã€JOIN æ–¹å¼ä¸ SELECT åˆ—æ•°ï¼‰ï¼š</p>
<ul>
<li>
<pre><code class="hljs language-ini" lang="ini">  -- Q4:
  SELECT * FROM lineitem JOIN orders ON <span class="hljs-attr">l_orderkey</span> = o_orderkey
  WHERE o_orderdate &lt; DATE '1995-03-15' ORDER BY l_partkey LIMIT 100<span class="hljs-comment">;</span>
  â€‹
  -- Q5:
  SELECT * FROM customer, orders, lineitem
  WHERE <span class="hljs-attr">c_mktsegment</span> = <span class="hljs-string">'BUILDING'</span>
   Â  Â AND <span class="hljs-attr">c_custkey</span> = o_custkey
   Â  Â AND <span class="hljs-attr">l_orderkey</span> = o_orderkey
   Â  Â AND o_orderdate &lt; DATE '1995-03-15'
   Â  Â AND l_shipdate &gt; DATE '1995-03-15'
  ORDER BY o_orderdate LIMIT 10<span class="hljs-comment">;</span>
  â€‹
  -- Q6:
  SELECT lineitem.*
  FROM customer, orders, lineitem
  WHERE <span class="hljs-attr">c_mktsegment</span> = <span class="hljs-string">'BUILDING'</span>
   Â  Â AND <span class="hljs-attr">c_custkey</span> = o_custkey
   Â  Â AND <span class="hljs-attr">l_orderkey</span> = o_orderkey
   Â  Â AND o_orderdate &lt; DATE '1995-03-15'
   Â  Â AND l_shipdate &gt; DATE '1995-03-15'
  ORDER BY o_orderdate LIMIT 10<span class="hljs-comment">;</span>
  â€‹
  -- Q7:
  SELECT l_shipdate, l_orderkey, l_linenumber
  FROM customer, orders, lineitem
  WHERE <span class="hljs-attr">c_mktsegment</span> = <span class="hljs-string">'BUILDING'</span>
   Â  Â AND <span class="hljs-attr">c_custkey</span> = o_custkey
   Â  Â AND <span class="hljs-attr">l_orderkey</span> = o_orderkey
   Â  Â AND o_orderdate &lt; DATE '1995-03-15'
   Â  Â AND l_shipdate &gt; DATE '1995-03-15'
  ORDER BY o_orderdate LIMIT 10<span class="hljs-comment">;</span>
  â€‹
  -- Q8:
  SELECT * FROM supplier, lineitem l1, orders, nation
  WHERE <span class="hljs-attr">s_suppkey</span> = l1.l_suppkey
   Â  Â AND <span class="hljs-attr">o_orderkey</span> = l1.l_orderkey
   Â  Â AND <span class="hljs-attr">o_orderstatus</span> = <span class="hljs-string">'F'</span>
   Â  Â AND l1.l_receiptdate &gt; l1.l_commitdate
   Â  Â AND EXISTS (SELECT * FROM lineitem l2 WHERE <span class="hljs-attr">l2.l_orderkey</span> = l1.l_orderkey AND l2.l_suppkey &lt;&gt; l1.l_suppkey)
   Â  Â AND NOT EXISTS (SELECT * FROM lineitem l3
   Â  Â  Â  Â WHERE <span class="hljs-attr">l3.l_orderkey</span> = l1.l_orderkey
   Â  Â  Â  Â  Â  Â AND l3.l_suppkey &lt;&gt; l1.l_suppkey
   Â  Â  Â  Â  Â  Â AND l3.l_receiptdate &gt; l3.l_commitdate)
   Â  Â AND <span class="hljs-attr">s_nationkey</span> = n_nationkey
   Â  Â AND <span class="hljs-attr">n_name</span> = <span class="hljs-string">'SAUDI ARABIA'</span>
  ORDER BY s_name LIMIT 100<span class="hljs-comment">;</span>
  â€‹
  -- Q9:
  SELECT s_name, s_address, s_phone, s_acctbal, l_shipdate, l_quantity, l_extendedprice, l_discount, l_tax, l_returnflag, l_linestatus, l_shipinstruct, o_orderdate, o_totalprice, o_orderpriority, n_name
  FROM supplier, lineitem l1, orders, nation
  WHERE <span class="hljs-attr">s_suppkey</span> = l1.l_suppkey
   Â  Â AND <span class="hljs-attr">o_orderkey</span> = l1.l_orderkey
   Â  Â AND <span class="hljs-attr">o_orderstatus</span> = <span class="hljs-string">'F'</span>
   Â  Â AND l1.l_receiptdate &gt; l1.l_commitdate
   Â  Â AND EXISTS (SELECT * FROM lineitem l2 WHERE <span class="hljs-attr">l2.l_orderkey</span> = l1.l_orderkey Â  AND l2.l_suppkey &lt;&gt; l1.l_suppkey)
   Â  Â AND NOT EXISTS (SELECT * FROM lineitem l3
   Â  Â  Â  Â WHERE <span class="hljs-attr">l3.l_orderkey</span> = l1.l_orderkey
   Â  Â  Â  Â  Â AND l3.l_suppkey &lt;&gt; l1.l_suppkey
   Â  Â  Â  Â  Â AND l3.l_receiptdate &gt; l3.l_commitdate)
   Â  Â AND <span class="hljs-attr">s_nationkey</span> = n_nationkey
   Â  Â AND <span class="hljs-attr">n_name</span> = <span class="hljs-string">'SAUDI ARABIA'</span>
  ORDER BY s_name LIMIT 100<span class="hljs-comment">;</span>
  â€‹
  -- Q10:
  SELECT s_name, s_nationkey, l_orderkey, o_orderstatus, n_name
  FROM supplier, lineitem l1, orders, nation
  WHERE <span class="hljs-attr">s_suppkey</span> = l1.l_suppkey
   Â  Â AND <span class="hljs-attr">o_orderkey</span> = l1.l_orderkey
   Â  Â AND <span class="hljs-attr">o_orderstatus</span> = <span class="hljs-string">'F'</span>
   Â  Â AND l1.l_receiptdate &gt; l1.l_commitdate
   Â  Â AND EXISTS (SELECT * FROM lineitem l2 WHERE <span class="hljs-attr">l2.l_orderkey</span> = l1.l_orderkey Â  AND l2.l_suppkey &lt;&gt; l1.l_suppkey)
   Â  Â AND NOT EXISTS (SELECT * FROM lineitem l3
   Â  Â  Â  Â WHERE <span class="hljs-attr">l3.l_orderkey</span> = l1.l_orderkey
   Â  Â  Â  Â  Â AND l3.l_suppkey &lt;&gt; l1.l_suppkey
   Â  Â  Â  Â  Â AND l3.l_receiptdate &gt; l3.l_commitdate)
   Â  Â AND <span class="hljs-attr">s_nationkey</span> = n_nationkey
   Â  Â AND <span class="hljs-attr">n_name</span> = <span class="hljs-string">'SAUDI ARABIA'</span>
  ORDER BY s_name LIMIT 100<span class="hljs-comment">;</span>
</code></pre>
</li>
</ul>
</li>
</ul>
<p>ä¸‹è¡¨æ±‡æ€»äº†ä¼˜åŒ–å¸¦æ¥çš„<strong>å¹³å‡æ€§èƒ½æå‡</strong>ï¼ˆæŸ¥è¯¢æ—¶é—´ç¼©çŸ­çš„ç™¾åˆ†æ¯”åŒºé—´ï¼‰ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/743da64c945b4825842c1a49a6a4e8a0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2VsZWN0REI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767705986&amp;x-signature=HsrNnKuuHfdVDYQR7aB1m2PmTkc%3D" alt="ä¼˜åŒ–å‰åçš„æ€§èƒ½è¡¨ç°.png" loading="lazy"/></p>
<p>æ•°æ®è¡¨æ˜ï¼ŒTopN ä¼˜åŒ–åœ¨å¤šç§æ•°æ®æ ¼å¼ä¸æŸ¥è¯¢æ¨¡å¼ä¸‹å‡èƒ½æ˜¾è‘—æå‡æ€§èƒ½ã€‚<strong>å¹³å‡å¯é™ä½æŸ¥è¯¢æ—¶é—´ 30% è‡³ 40%</strong> ï¼Œ<strong>åœ¨éƒ¨åˆ†å¤šè¡¨å…³è”åœºæ™¯ä¸­ï¼Œæ€§èƒ½æå‡å¹…åº¦æœ€é«˜å¯è¾¾ 80%</strong> ï¼Œæ•ˆæœå°¤ä¸ºçªå‡ºã€‚è¿™è¯æ˜äº†ä¸¤é˜¶æ®µè®¿é—®æœºåˆ¶æœ‰æ•ˆå‡å°‘äº†ä¸å¿…è¦çš„ IOï¼Œåœ¨ä¸åŒå­˜å‚¨æ ¼å¼å’Œå¤æ‚æŸ¥è¯¢ä¸­å‡èƒ½å¸¦æ¥å¯è§‚çš„æ”¶ç›Šã€‚</p>
<h2 data-id="heading-5">TopN æ‰§è¡Œé€»è¾‘è§£æ</h2>
<p>å‰æ–‡ç®€è¦ä»‹ç»äº† TopN çš„ä¸¤é˜¶æ®µæ‰§è¡Œé€»è¾‘ï¼Œåœ¨å®é™…å®ç°ä¸­ï¼Œè¯¥æµç¨‹é¢ä¸´å‡ é¡¹æ ¸å¿ƒæŒ‘æˆ˜ï¼š</p>
<ul>
<li>Pipeline æ‰§è¡Œçº¿ç¨‹çš„é˜»å¡ï¼šç¬¬äºŒé˜¶æ®µæ•°æ®æ‹‰å–æ¶‰åŠç½‘ç»œ IOï¼Œè‹¥åœ¨ Pipeline æ‰§è¡Œçº¿ç¨‹ä¸­åŒæ­¥è¿›è¡Œï¼Œä¼šå¯¼è‡´çº¿ç¨‹è¢«é˜»å¡ï¼Œé™ä½ç³»ç»Ÿæ•´ä½“ååã€‚</li>
<li>å¤šè¡¨æŸ¥è¯¢çš„æ”¯æŒï¼šJoin ç®—å­æ¶‰åŠå¤šå¼ è¡¨çš„ç‰©åŒ–ï¼Œéœ€è¦å‡†ç¡®è¯†åˆ«å¯¹åº”éœ€è¦ç‰©åŒ–çš„åˆ—ã€‚</li>
<li>å†…å¤–è¡¨æ ¼å¼çš„ç»Ÿä¸€ï¼šDoris å†…è¡¨ä¸ Parquetã€ORC ç­‰å¼€æ”¾æ ¼å¼åœ¨è¡Œå·ç®¡ç†ä¸Šæœºåˆ¶ä¸åŒï¼Œéœ€è®¾è®¡ç»Ÿä¸€çš„è¡Œæ ‡è¯†æŠ½è±¡ï¼Œä»¥ç¡®ä¿å†…å¤–è¡¨é€»è¾‘ä¸€è‡´ã€‚</li>
<li>èµ„æºéš”ç¦»ç®¡æ§ï¼šå»¶è¿Ÿç‰©åŒ–é˜¶æ®µçš„ IO æ“ä½œéœ€çº³å…¥ Workload Group è¿›è¡Œç»Ÿä¸€èµ„æºç®¡æ§ï¼Œé¿å…å¹²æ‰°çº¿ä¸Šå…¶ä»–æŸ¥è¯¢ï¼Œä¿è¯ç³»ç»Ÿç¨³å®šæ€§ã€‚</li>
</ul>
<p>é’ˆå¯¹ä¸Šè¿°æŒ‘æˆ˜ï¼Œ<strong>Doris é€šè¿‡æ··åˆä»»åŠ¡è°ƒåº¦å™¨ã€å…¨å±€è¡Œæ ‡è¯†ç¼–ç  ä¸ æ™ºèƒ½ä¼˜åŒ–å™¨è§„åˆ™ ååŒå·¥ä½œï¼Œç³»ç»Ÿæ€§åœ°è§£å†³äº†è¿™äº›é—®é¢˜</strong>ã€‚ä»¥ä¸‹æˆ‘ä»¬å°†é€ä¸€å±•å¼€å…¶è®¾è®¡å®ç°ã€‚</p>
<h3 data-id="heading-6">01 æ··åˆè°ƒåº¦å™¨</h3>
<p>ä¸ºè§£å†³ Pipeline æ‰§è¡Œçº¿ç¨‹åœ¨ç½‘ç»œ IO åœºæ™¯ä¸‹æ˜“è¢«é˜»å¡çš„é—®é¢˜ï¼Œæˆ‘ä»¬é‡æ„äº† Doris çš„ Pipeline æ‰§è¡Œæ¡†æ¶ï¼Œå¼•å…¥äº†æ··åˆä»»åŠ¡è°ƒåº¦å™¨ï¼ˆHybridTaskSchedulerï¼‰ï¼Œ<strong>ä»è°ƒåº¦å±‚é¢åˆ†ç¦»é˜»å¡ä¸éé˜»å¡ä»»åŠ¡ï¼Œæ˜¾è‘—é™ä½äº† IO ç­‰å¾…å¯¹æ‰§è¡Œæ•ˆç‡çš„å½±å“</strong>ã€‚å…¶æ ¸å¿ƒè®¾è®¡å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fc0105a0b9884af891211ecfce8bfea5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2VsZWN0REI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767705986&amp;x-signature=8q3ioj3gc5hhuCxMB4onuIY6sk0%3D" alt="01 æ··åˆè°ƒåº¦å™¨.png" loading="lazy"/></p>
<p><strong>å…·ä½“å®ç°ä¸Šï¼ŒåŸæœ‰ç»Ÿä¸€çš„ TaskScheduler è¢«æ‹†åˆ†ä¸ºä¸¤ç±»è°ƒåº¦å™¨ï¼Œå…±åŒæ„æˆæ–°çš„ HybridTaskScheduler</strong>ï¼š</p>
<ul>
<li>NonBlockingSchedulerï¼šä¸“é—¨è°ƒåº¦<strong>éé˜»å¡å‹ä»»åŠ¡</strong>ï¼ˆå¦‚çº¯è®¡ç®—æ“ä½œï¼‰ã€‚è°ƒåº¦å™¨çº¿ç¨‹æ•°é‡è·Ÿ CPU æ ¸æ•°ç›¸ç­‰ã€‚èƒ½å¤Ÿç¡®ä¿å……åˆ†åˆ©ç”¨ CPU èµ„æºã€‚</li>
<li>BlockingSchedulerï¼šç”¨äºè°ƒåº¦<strong>å¯èƒ½é˜»å¡çš„ä»»åŠ¡</strong>ï¼Œå¦‚æ¶‰åŠç£ç›˜ IOã€ç½‘ç»œ IO ç­‰æ“ä½œã€‚è¯¥è°ƒåº¦å™¨çº¿ç¨‹æ•°å¯åŠ¨æ€è°ƒæ•´ï¼Œé»˜è®¤ä¸º CPU æ ¸æ•°çš„ä¸¤å€ï¼Œä»¥æ›´å¥½åœ°å®¹çº³ IO ç­‰å¾…ã€‚</li>
</ul>
<p>é€šè¿‡å°†ä»»åŠ¡æŒ‰æ˜¯å¦é˜»å¡åˆ†ç±»è°ƒåº¦ï¼Œç³»ç»Ÿæœ‰æ•ˆé¿å…äº†é˜»å¡å‹ä»»åŠ¡å¯¹è®¡ç®—å¯†é›†å‹ä»»åŠ¡çš„èµ„æºæŠ¢å ã€‚ä¾‹å¦‚ï¼ŒTopN æŸ¥è¯¢ç¬¬äºŒé˜¶æ®µä¸­çš„ Materialization Node ä¼šè¢«è‡ªåŠ¨æäº¤è‡³ BlockingScheduler æ‰§è¡Œï¼Œä»è€Œå¤§å¹…å‡å°‘ IO é˜»å¡å¯¹å…¨å±€ Pipeline æ‰§è¡Œçº¿ç¨‹çš„å ç”¨ã€‚</p>
<h3 data-id="heading-7">02 å…¨å±€ ID ç¼–ç ä¸èµ„æºç®¡æ§</h3>
<p>ä¸Šæ–‡æåˆ°çš„ <code>__DORIS_ROWID_COL__</code>ç”¨äºåœ¨ç¬¬äºŒé˜¶æ®µç²¾ç¡®å®šä½æ•°æ®è¡Œï¼Œ<strong>å…¶ç¼–ç è®¾è®¡å…¼é¡¾äº†æ•ˆç‡ã€è·¨æ ¼å¼ä¸€è‡´æ€§ä¸èµ„æºç®¡æ§</strong>ã€‚ç¼–ç æ ¼å¼å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-go" lang="go">ç¼–ç æ ¼å¼: [version:<span class="hljs-type">uint8</span>] + [backend_id:<span class="hljs-type">uint64</span>] + [file_id:<span class="hljs-type">uint32</span>] + [row_id:<span class="hljs-type">uint32</span>]
</code></pre>
<ul>
<li>
<p><strong>version</strong>ï¼šæ ‡è¯†ç¼–ç æ ¼å¼ç‰ˆæœ¬ï¼Œç”¨äºåç»­æ‰©å±•ä¸å…¼å®¹ã€‚</p>
</li>
<li>
<p><strong>backend_id</strong>ï¼šBE èŠ‚ç‚¹ IDã€‚è¯¥å­—æ®µå®ç°äº†ç²¾å‡†çš„ RPC å®šå‘â€”â€”ç¬¬äºŒé˜¶æ®µè¯·æ±‚å¯ç›´æ¥å‘é€è‡³å¯¹åº”èŠ‚ç‚¹ï¼Œé¿å…å¹¿æ’­å¼€é”€ã€‚åŒæ—¶ï¼Œæ¥æ”¶è¯·æ±‚çš„èŠ‚ç‚¹ä¼šå°†æ•°æ®è¯»å–ä»»åŠ¡æäº¤è‡³è¯¥æŸ¥è¯¢æ‰€å±çš„ Workload Groupï¼Œä»è€Œç¡®ä¿èµ„æºéš”ç¦»ä¸ç»Ÿä¸€ç®¡æ§ã€‚</p>
</li>
<li>
<p><strong>file_id</strong>ï¼šç³»ç»Ÿä¸ºæŸ¥è¯¢æ¶‰åŠåˆ°çš„æ¯ä¸ªæ–‡ä»¶ç”Ÿæˆå”¯ä¸€ IDï¼Œå¹¶åœ¨å†…å­˜ä¸­ç»´æŠ¤ ID åˆ°å®é™…æ–‡ä»¶è·¯å¾„çš„æ˜ å°„ã€‚é€šè¿‡å”¯ä¸€ ID å¯ä»¥å‡å°‘ç¬¬äºŒé˜¶æ®µå‘é€æ–‡ä»¶ä¿¡æ¯çš„è¯·æ±‚å¤§å°ï¼Œå‡å°‘ç½‘ç»œèµ„æºå¼€é”€ã€‚</p>
<ul>
<li>å¯¹äºå†…è¡¨ï¼Œæ–‡ä»¶åç¼–ç ä¸ºï¼š<code>tabet_id-rowset_id-segment_id</code></li>
<li>å¯¹äº Parquet/ORCï¼Œæ–‡ä»¶åç¼–ç ä¸ºï¼š<code>filename-rowgroup_id</code></li>
</ul>
</li>
<li>
<p><strong>row_id</strong>ï¼šç”¨äºæ ‡è¯†æ•°æ®åœ¨å¯¹åº”æ–‡ä»¶ä¸­çš„è¡Œå·ã€‚åŒæ—¶ï¼Œé’ˆå¯¹ OUTER JOIN ç­‰å¯èƒ½ä¼šç”Ÿæˆ NULL å€¼çš„åœºæ™¯ï¼Œ<code>row_id</code> å¯ä»¥ç¼–ç ä¸º NULLï¼Œä»è€Œåœ¨ç¬¬äºŒé˜¶æ®µç›´æ¥è·³è¿‡è¯·æ±‚ï¼Œè¿›ä¸€æ­¥æå‡æ•ˆç‡ã€‚</p>
</li>
</ul>
<h3 data-id="heading-8">03 å…¨å±€å»¶è¿Ÿç‰©åŒ–ç®—æ³•</h3>
<p>ä¸ºç³»ç»Ÿæ”¯æŒä¸¤é˜¶æ®µæ•°æ®è®¿é—®ï¼Œ<strong>Doris ä¼˜åŒ–å™¨å¼•å…¥äº†å…¨æ–°çš„å…¨å±€å»¶è¿Ÿç‰©åŒ–ç®—æ³•</strong>ã€‚è¯¥ç®—æ³•åœ¨ç¼–è¯‘é˜¶æ®µè‡ªåŠ¨è¯†åˆ«å¯å»¶è¿Ÿè¯»å–çš„åˆ—ï¼Œ<strong>ä»è€Œåœ¨ä¿è¯è¯­ä¹‰æ­£ç¡®çš„å‰æä¸‹ï¼Œæœ€å¤§é™åº¦å‡å°‘ç¬¬ä¸€é˜¶æ®µçš„æ•°æ®æ‰«æé‡</strong>ã€‚å…¶æ‰§è¡Œæµç¨‹å¯æ¦‚æ‹¬å¦‚ä¸‹ï¼š</p>
<ul>
<li><strong>åˆ—é›†åˆåˆ’åˆ†</strong>ï¼šä¼˜åŒ–å™¨å°†éœ€è¦è®¿é—®çš„åˆ—åˆ†ä¸ºå…³é”®åˆ—é›† K å’Œ å»¶è¿Ÿåˆ—é›† Dã€‚K åˆ—æ˜¯åœ¨ç¬¬ä¸€é˜¶æ®µéœ€è¦è¯»å–çš„åˆ—ï¼ŒD åˆ—æ˜¯éœ€è¦åœ¨ç¬¬äºŒé˜¶æ®µå»¶è¿Ÿè¯»å–çš„åˆ—ã€‚</li>
<li><strong>è‡ªé¡¶å‘ä¸‹éå†</strong>ï¼šç®—æ³•è‡ªé¡¶å‘ä¸‹éå†æ‰§è¡Œè®¡åˆ’æ•°çš„æ¯ä¸ªç®—å­ï¼Œå°†éœ€è¦å‚ä¸è®¡ç®—çš„åˆ—ï¼ˆå¦‚æ¡ä»¶è¿‡æ»¤åˆ—ï¼ŒJoin åˆ—ç­‰ï¼‰åŠ å…¥åˆ° K é›†åˆä¸­ï¼Œå…¶ä½™åˆ—åŠ å…¥åˆ° D é›†åˆä¸­ã€‚</li>
<li><strong>å­—æ®µè½¬æ¢</strong>ï¼šå¦‚é‡åˆ°æŠ•å½±èŠ‚ç‚¹ï¼ˆProjection Operatorï¼‰æˆ–é›†åˆæ“ä½œèŠ‚ç‚¹ï¼ˆSet Operatorï¼‰ç­‰äº§ç”Ÿå­—æ®µå˜åŒ–çš„èŠ‚ç‚¹ï¼Œåˆ™ä¼šå°† K ä¸­ç›¸åº”çš„å­—æ®µè½¬æ¢æˆä¸‹å±‚èŠ‚ç‚¹çš„å­—æ®µã€‚</li>
<li><strong>ç»“æœæ¨å¯¼</strong>ï¼šæœ€ç»ˆæ¨å¯¼å‡º Scan èŠ‚ç‚¹éœ€è¯»å–çš„ K é›†åˆï¼Œä»¥åŠä¸Šæ¸¸å„ç®—å­å¯¹åº”çš„ D é›†åˆã€‚</li>
</ul>
<p>ä»¥å¦‚ä¸‹æ‰§è¡Œè®¡åˆ’ç‰‡æ®µä¸ºä¾‹ï¼š</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-attribute">FILTER</span>(x &gt; <span class="hljs-number">10</span>) --&gt; <span class="hljs-built_in">PROJECT</span>(a+b as x) --&gt; <span class="hljs-built_in">SCAN</span>(T)
</code></pre>
<ul>
<li><code>FILTER</code> èŠ‚ç‚¹ä¾èµ–åˆ— <code>x</code>ï¼Œå› æ­¤å°† <code>x</code> åŠ å…¥ Kã€‚</li>
<li><code>PROJECT</code> èŠ‚ç‚¹å°† <code>x</code> æ˜ å°„ä¸ºåº•å±‚è¡¨è¾¾å¼ <code>a + b</code>ï¼Œå› æ­¤ä» K ä¸­ç§»é™¤ <code>x</code>ï¼Œå¹¶åŠ å…¥ <code>a</code> å’Œ <code>b</code>ã€‚</li>
<li>æœ€ç»ˆä¼ é€’è‡³ <code>SCAN</code> çš„ K é›†åˆä¸º <code>{a, b}</code>ï¼Œå³ä»…éœ€åœ¨ç¬¬ä¸€é˜¶æ®µè¯»å–åˆ— <code>a</code> ä¸ <code>b</code>ã€‚</li>
</ul>
<p>è¯¥ç®—æ³•åœ¨è¯­æ³•æ ‘å±‚é¢å®ç°äº†åˆ—è¯»å–çš„æ™ºèƒ½æ¨è¿Ÿï¼Œä¸ºé«˜æ•ˆçš„ä¸¤é˜¶æ®µæ‰§è¡Œå¥ å®šäº†ç¼–è¯‘åŸºç¡€ã€‚</p>
<h2 data-id="heading-9">ç»“æŸè¯­</h2>
<p><strong>TopN ä¼˜åŒ–æå¤§åœ°å¼ºåŒ–äº†ä»æµ·é‡æ•°æ®ä¸­é«˜æ•ˆæå–æ ¸å¿ƒä¿¡æ¯çš„èƒ½åŠ›ï¼Œå¯å¹¿æ³›åº”ç”¨äºå®æ—¶æ’è¡Œæ¦œã€çƒ­ç‚¹åˆ†æã€é”€é‡ç»Ÿè®¡ã€å‘Šè­¦æ’åºç­‰é«˜ä»·å€¼ä¸šåŠ¡åœºæ™¯</strong>ã€‚</p>
<p>åœ¨æ–¹æ¡ˆè®¾è®¡è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬ä¹Ÿç ”ç©¶äº†ä¸šç•Œå…¶ä»–ç³»ç»Ÿçš„å®ç°æ€è·¯ã€‚ä»¥ DuckDB ä¸ºä¾‹ï¼Œå…¶åœ¨å¤„ç†å•è¡¨ TopN æ—¶ï¼Œä¼šå°†å…¶è½¬æ¢ä¸ºä¸€ä¸ªç‰¹æ®Šçš„semi Join æ“ä½œï¼šå·¦èŠ‚ç‚¹å»æ‰«ææ•´è¡¨ï¼Œå³èŠ‚ç‚¹åœ¨æ‰«ææ’åºåˆ—åå–å‡ºå…¶ TopN è¡Œï¼Œå¹¶ä¸”ä¼šå€ŸåŠ© Runtime Filter å‡å°‘å·¦è¡¨æ‰«ææ•°æ®é‡ã€‚è¯¥æ–¹æ¡ˆçš„ä¼˜åŠ¿åœ¨äºå¤ç”¨äº†æˆç†Ÿçš„ Join æ¡†æ¶ï¼Œä½†åœ¨æŸäº›åœºæ™¯ä¸‹â€”â€”ä¾‹å¦‚æ’åºåˆ—ä¸æ˜¯ä¸»é”®ï¼Œæˆ–é¢å¯¹ Parquet ç­‰æ ¼å¼çš„ Row Group æ—¶â€”â€”è¿‡æ»¤æ•ˆç‡å¯èƒ½å—åˆ°å½±å“ï¼Œé€‚ç”¨æ€§å­˜åœ¨ä¸€å®šè¾¹ç•Œã€‚</p>
<p><strong>æœªæ¥æˆ‘ä»¬è®¡åˆ’è¿›ä¸€æ­¥è¿›è¡Œæ·±åº¦å¼€å‘ï¼ŒåŒ…æ‹¬</strong>ï¼š</p>
<ul>
<li>é›†åˆè¿ç®—ï¼ˆUNION/EXCEPT/INTERSECTï¼‰ç­‰å¤æ‚ç®—å­çš„ TopN æ”¯æŒã€‚</li>
<li>åŠ¨æ€è‡ªé€‚åº”ç‰©åŒ–é˜ˆå€¼è°ƒæ•´ã€‚</li>
</ul>
<p>æˆ‘ä»¬å°†æŒç»­è¿½è¸ªæ•°æ®æŸ¥è¯¢é¢†åŸŸçš„å‰æ²¿æŠ€æœ¯ï¼Œå¹¶ä¸æ–­æ¢ç´¢å…¶åœ¨çœŸå®ä¸šåŠ¡åœºæ™¯ä¸­çš„è½åœ°å®è·µï¼Œè‡´åŠ›äºä¸ºç”¨æˆ·æä¾›æŒç»­é¢†å…ˆçš„æŸ¥è¯¢æ€§èƒ½ä½“éªŒã€‚</p>
<p><em>"ç§€å¹²ç»ˆæˆæ ‹ï¼Œç²¾é’¢ä¸ä½œé’©"ï¼Œ åœ¨â€œæè‡´æ€§èƒ½â€çš„æ¢ç´¢è·¯ä¸Šï¼ŒApache Doris æ°¸ä¸æ­¢æ­¥ã€‚</em></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[2025 å‰ç«¯å¼€æºä¸‰å¹´ï¼Œnpm å‘åŒ…å¡æˆ‘åŠå¤©]]></title>    <link>https://juejin.cn/post/7589482741759033371</link>    <guid>https://juejin.cn/post/7589482741759033371</guid>    <pubDate>2025-12-30T13:28:54.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589482741759033371" data-draft-id="7589325011544916006" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="2025 å‰ç«¯å¼€æºä¸‰å¹´ï¼Œnpm å‘åŒ…å¡æˆ‘åŠå¤©"/> <meta itemprop="keywords" content="å‰ç«¯,GitHub,NPM"/> <meta itemprop="datePublished" content="2025-12-30T13:28:54.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸å¦‚æ‘¸é±¼å»"/> <meta itemprop="url" content="https://juejin.cn/user/26044011388510"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            2025 å‰ç«¯å¼€æºä¸‰å¹´ï¼Œnpm å‘åŒ…å¡æˆ‘åŠå¤©
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/26044011388510/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸å¦‚æ‘¸é±¼å»
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-30T13:28:54.000Z" title="Tue Dec 30 2025 13:28:54 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0ffbe295b3404a12859f30d92cf0ac60~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5aaC5pG46bG85Y67:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767706134&amp;x-signature=eA7I69jn54e49HxtbVWfP2Rje%2B8%3D" alt="" loading="lazy"/></p>
<p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯ä¸å¦‚æ‘¸é±¼å»ï¼Œæ¬¢è¿æ¥åˆ°æˆ‘çš„åˆ†äº«ä¸“æ ï¼Œä»Šå¤©æˆ‘ä»¬æ¥èŠèŠ npm å‘åŒ…ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3519023670124fc0aa37d49012801636~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5aaC5pG46bG85Y67:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767706134&amp;x-signature=gV7OA3HhEP8f6nzQ8fQmFuOCH4U%3D" alt="" loading="lazy"/></p>
<p>å„ä½æœ€è¿‘åœ¨ npm ä¸Šæœ‰æ²¡æœ‰è§åˆ°è¿™ä¸ªè¿™ä¸ªæç¤ºï¼Ÿæ²¡é”™ï¼Œç»å…¸ token è¢«åºŸäº†ï¼æˆ‘ä¹Ÿå·®ç‚¹è¢«åºŸäº†ï¼Œæƒ³å‘ä¸ªæ–°çš„åŒ…ï¼Œæ­»æ´»å‘ä¸å‡ºæ¥å•Šï¼Œå”‰ï¼Œéƒ½æ€ªæˆ‘ä¸çœ‹æ–‡æ¡£å•ŠğŸ˜‚ã€‚</p>
<h2 data-id="heading-0">èµ·å› </h2>
<p>è¿‘æœŸç»™ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FMoonofweisheng%2Funi-mini-router" target="_blank" title="https://github.com/Moonofweisheng/uni-mini-router" ref="nofollow noopener noreferrer">uni-mini-router</a> é‡æ„äº†ä¸€ä¸‹ï¼Œä½¿ç”¨ Gemini3 Pro ç»™å®ƒæŠŠæ‰“åŒ…å™¨ä» rollup è¿ç§»åˆ°äº† tsdownï¼Œå¹¶ä¸”ä½¿ç”¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fstarter.wot-ui.cn%2F" target="_blank" title="https://starter.wot-ui.cn/" ref="nofollow noopener noreferrer">wot-starter</a>ä½œä¸ºæ¨¡æ¿é‡æ„äº†å…¶æ¼”ç¤ºä»£ç ç»“æ„ã€æ–‡æ¡£å’Œæ¼”ç¤º demoã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/657457f8a79d4e3bbeff66e22f75b329~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5aaC5pG46bG85Y67:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767706134&amp;x-signature=H%2BKXNDyT9Kye46VSZJdWVq0aHxU%3D" alt="" loading="lazy"/></p>
<p>ç¾æ»‹æ»‹çš„ä¸Šçº¿å‡†å¤‡å‘åŒ…ï¼Œç»“æœç›´æ¥æŠ¥é”™ 404ï¼Ÿ</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/da04e6c04896445b9adecfd929038e28~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5aaC5pG46bG85Y67:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767706134&amp;x-signature=%2BNZo16azIMlIiQwjanag8xq5dIs%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-1">è¿‡ç¨‹</h2>
<p>å‘åŒ…æŠ¥é”™åï¼Œä¸Šç½‘ä¸€æœï¼Œå“‡æ“¦ï¼Œç»å…¸ token è¢«åºŸäº†ï¼çœ‹äº†ä¸‹æ–‡æ¡£ï¼Œæ˜¯æ°¸ä¹…çš„ç»å…¸ token å·²ç»è¢«åºŸå¼ƒï¼Œæ¨èä½¿ç”¨ trusted publisher å‘åŒ…ï¼Œäºæ˜¯é©¬ä¸åœè¹„çš„å¼€å§‹é…ç½®ã€‚ç„¶åå°±å‡ºç°è¿™ä¸€å¹•ï¼</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dff67d1d711d41e69ed3e90f027eb593~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5aaC5pG46bG85Y67:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767706134&amp;x-signature=Law2H6xhS775%2B0fZ1b0GDNWnOiQ%3D" alt="" loading="lazy"/></p>
<p>ä»“åº“ï¼Œæˆ‘é…ä¸Šäº†ï¼Œworkflow æ–‡ä»¶ï¼Œæˆ‘å¡«å¥½äº†ï¼Œä¿ºè€å­™å•¥åŠŸåä¸è¦ï¼Œåªæ±‚æŠŠè¿™åŒ…å‘ä¸Šå»ã€‚npm çš„å¤©ç‹è€å­ä¿¡ä¸è¿‡æˆ‘ï¼Œæˆ‘æ‡‚ï¼Œè®©ä½ å°å­æ•´äº› trusted publisher å”¬æˆ‘ï¼Œæˆ‘ä¹Ÿæ‡‚ã€‚æˆ‘ä¸æ‡‚çš„æ˜¯â€¦ä½ ç‰¹ä¸è®©æˆ‘å‘åŒ…ä¸Šå»ï¼</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3e27fd3460e742d8b6e5958067eb614c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5aaC5pG46bG85Y67:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767706134&amp;x-signature=DLtdA287i4FGWu9kCjbdMpqsNI8%3D" alt="" loading="lazy"/></p>
<p>ä½•è€å¸ˆï¼ŒæŒç®¡ Trusted publishing å‘åŒ…çš„ç¥ã€‚å¯¹å””ä½ï¼Œåˆšåˆšæ˜¯æˆ‘å¤ªå¤§å£°ï¼Œæ˜¯æˆ‘æŠŠ GitHub ä»“åº“åå†™æˆäº†ä»“åº“åœ°å€ğŸ˜‚ã€‚</p>
<h2 data-id="heading-2">æ”»ç•¥</h2>
<p>æ­£ç» npm trusted publisher å‘åŒ…æ”»ç•¥æ¥äº†ï¼Œæ–‡æ¡£è§ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.npmjs.com%2Ftrusted-publishers" target="_blank" title="https://docs.npmjs.com/trusted-publishers" ref="nofollow noopener noreferrer">docs.npmjs.com/trusted-pubâ€¦</a> ã€‚</p>
<blockquote>
<p>å¦‚æœä½ æ˜¯é¦–æ¬¡å‘åŒ…ï¼Œéœ€è¦å…ˆä½¿ç”¨å­˜åœ¨æœ‰æ•ˆæœŸçš„ token è¿›è¡Œæ‰‹åŠ¨å‘åŒ…ï¼Œéšåè¿›è¡Œä»¥ä¸‹é…ç½®ã€‚</p>
</blockquote>
<p>é¦–å…ˆæˆ‘ä»¬æ‰“å¼€è®¾ç½®ï¼Œæˆ‘ä»¬ä½¿ç”¨ GitHub Action å‘åŒ…ï¼Œæ‰€ä»¥é€‰æ‹©é…ç½® GitHub Actionï¼Œ</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d378ba35f6cb474d81ef1955c82be62b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5aaC5pG46bG85Y67:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767706134&amp;x-signature=rYkCEIAP2VAsF9P1aQh92jXKykc%3D" alt="" loading="lazy"/></p>
<p>æŒ‰ç…§è¦æ±‚å¡«å†™ç”¨æˆ·åã€åŒ…åã€å·¥ä½œæµæ–‡ä»¶ç­‰
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bbd268f1be55431bad26f701984ff683~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5aaC5pG46bG85Y67:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767706134&amp;x-signature=wnviKl8VGlf1dHth2WUfrOhVWQQ%3D" alt="" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c24b928a295c4424b69d6ad5e7f63ab8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5aaC5pG46bG85Y67:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767706134&amp;x-signature=BW4jRJOyPilCINgkEbF354gEFmA%3D" alt="" loading="lazy"/></p>
<p>è°ƒæ•´ GitHub Action å·¥ä½œæµæ–‡ä»¶ï¼Œåˆ é™¤ npm ç›¸å…³ tokenï¼Œä¹Ÿå¯ä»¥å‚è€ƒä¸Šæ–¹æ–‡æ¡£è¿›è¡Œé…ç½®ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4adebda0b91d4cc7895d102c9c991485~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5aaC5pG46bG85Y67:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767706134&amp;x-signature=1FHRUpTScA0I7op35oZiYlwwAm8%3D" alt="" loading="lazy"/></p>
<p><em><strong>æœ€åï¼Œéœ€è¦æ³¨æ„: Trusted publishing éœ€è¦ npm CLI ç‰ˆæœ¬ 11.5.1 æˆ–ä»¥ä¸Š.</strong></em></p>
<h2 data-id="heading-3">æ€»ç»“</h2>
<p>ä¸€å®šè¦çœ‹æ–‡æ¡£ï¼</p>
<h2 data-id="heading-4">å‚è€ƒèµ„æ–™</h2>
<ul>
<li>npm-trusted-publishersï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.npmjs.com%2Ftrusted-publishers" target="_blank" title="https://docs.npmjs.com/trusted-publishers" ref="nofollow noopener noreferrer">docs.npmjs.com/trusted-pubâ€¦</a></li>
<li>my-uniï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fmy-uni.wot-ui.cn%2F" target="_blank" title="https://my-uni.wot-ui.cn/" ref="nofollow noopener noreferrer">my-uni.wot-ui.cn/</a></li>
<li>wot-starterï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwot-starter.wot-ui.cn%2F" target="_blank" title="https://wot-starter.wot-ui.cn/" ref="nofollow noopener noreferrer">wot-starter.wot-ui.cn/</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Tailwind CSSï¼šé¡ºé£CSS]]></title>    <link>https://juejin.cn/post/7589494631005536291</link>    <guid>https://juejin.cn/post/7589494631005536291</guid>    <pubDate>2025-12-30T12:03:11.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589494631005536291" data-draft-id="7589126814830690356" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Tailwind CSSï¼šé¡ºé£CSS"/> <meta itemprop="keywords" content="JavaScript,React.js,CSS"/> <meta itemprop="datePublished" content="2025-12-30T12:03:11.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å—å±±å®‰"/> <meta itemprop="url" content="https://juejin.cn/user/1795929588117962"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Tailwind CSSï¼šé¡ºé£CSS
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1795929588117962/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å—å±±å®‰
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-30T12:03:11.000Z" title="Tue Dec 30 2025 12:03:11 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>æœ€è¿‘åœ¨æŠ˜è…¾ React é¡¹ç›®çš„æ—¶å€™ï¼Œæ·±æ·±è¢« Tailwind CSS è¿·ä½äº†ã€‚ä»¥å‰å†™ CSS æ€»è§‰å¾—ä¹±ç³Ÿç³Ÿçš„ï¼Œç±»åèµ·å¾—å¤´ç–¼ï¼Œæ ·å¼å¤ç”¨ç‡ä½ï¼Œæ”¹ä¸ªé¢œè‰²è¿˜å¾—å…¨å±€æœç´¢ã€‚ç°åœ¨ç”¨ä¸Š Tailwindï¼Œæ„Ÿè§‰æ•´ä¸ªäººéƒ½è½»æ¾äº†ï¼Œç›´æ¥åœ¨ HTMLï¼ˆæˆ–è€… JSXï¼‰é‡Œå †ç±»åï¼Œå°±èƒ½å¿«é€Ÿæ­å‡ºå¥½çœ‹çš„ç•Œé¢ã€‚è¿™ç¯‡æ–‡ç« å°±åˆ†äº«ä¸€ä¸‹æˆ‘çš„å­¦ä¹ è¿‡ç¨‹ï¼Œä»ä¼ ç»Ÿ CSS çš„ç—›ç‚¹ï¼Œåˆ°åŸå­ CSS çš„æ¦‚å¿µï¼Œå†åˆ° Tailwind çš„å®æˆ˜åº”ç”¨ã€‚å¸Œæœ›èƒ½å¸®åˆ°åŒæ ·åœ¨çº ç»“æ ·å¼é—®é¢˜çš„æœ‹å‹ã€‚</p>
<h2 data-id="heading-1">ä¼ ç»Ÿ CSS çš„ç—›ç‚¹ï¼šä¸ºä»€ä¹ˆæˆ‘è§‰å¾—å®ƒä¸å¤Ÿç”¨äº†</h2>
<p>æ‹¿æˆ‘æœ€æ—©å†™çš„ä»£ç æ¥è¯´ï¼Œçœ‹è¿™ä¸ªç®€å•çš„æŒ‰é’®ä¾‹å­ï¼š</p>
<pre><code class="hljs language-HTML" lang="HTML"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
        <span class="hljs-comment">/* åä¾‹å­ï¼šæ¯ä¸ªæŒ‰é’®ä¸€ä¸ªç‹¬ç«‹çš„ç±»ï¼Œæ ·å¼å‡ ä¹ä¸å¤ç”¨ */</span>
        <span class="hljs-selector-class">.primary-btn</span> {
            <span class="hljs-attribute">padding</span>: <span class="hljs-number">8px</span> <span class="hljs-number">16px</span>;
            <span class="hljs-attribute">background</span>: blue;
            <span class="hljs-attribute">color</span>: white;
            <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">6px</span>;
        }
        <span class="hljs-selector-class">.default-btn</span> {
            <span class="hljs-attribute">padding</span>: <span class="hljs-number">8px</span> <span class="hljs-number">16px</span>;
            <span class="hljs-attribute">background</span>: <span class="hljs-number">#ccc</span>;
            <span class="hljs-attribute">color</span>: <span class="hljs-number">#000</span>;
            <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">6px</span>;
        }
    </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"primary-btn"</span>&gt;</span>æäº¤<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"default-btn"</span>&gt;</span>é»˜è®¤<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<p>çœ‹èµ·æ¥ç®€å•å§ï¼Ÿä½†å¦‚æœé¡¹ç›®é‡Œæœ‰å‡ åç§æŒ‰é’®å˜ä½“å‘¢ï¼Ÿæ¯ä¸ªéƒ½å†™ä¸€ä¸ªç±»ï¼ŒCSS æ–‡ä»¶å¾ˆå¿«å°±è†¨èƒ€äº†ã€‚è€Œä¸”è¿™äº›ç±»å¸¦ç€å¼ºçƒˆçš„â€œä¸šåŠ¡å±æ€§â€ï¼Œæ¯”å¦‚ primaryã€defaultï¼Œå¤ç”¨æ€§å¾ˆå·®ã€‚æ¢ä¸ªé¡¹ç›®ï¼Œè¿™äº›ç±»ååŸºæœ¬åºŸäº†ã€‚</p>
<p>åæ¥æˆ‘å­¦åˆ°â€œé¢å‘å¯¹è±¡ CSSâ€ï¼ˆOOCSSï¼‰çš„æ€è·¯ï¼šæŠŠæ ·å¼æ‹†åˆ†æˆå¯å¤ç”¨çš„åŸºç±»ï¼Œç„¶åç»„åˆèµ·æ¥ã€‚</p>
<p>æ”¹æˆè¿™æ ·ï¼š</p>
<pre><code class="hljs language-CSS" lang="CSS"><span class="hljs-selector-class">.btn</span> {
    <span class="hljs-attribute">padding</span>: <span class="hljs-number">8px</span> <span class="hljs-number">16px</span>;
    <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">6px</span>;
    <span class="hljs-attribute">cursor</span>: pointer;
}
<span class="hljs-selector-class">.btn-primary</span> {
    <span class="hljs-attribute">background</span>: blue;
    <span class="hljs-attribute">color</span>: white;
}
<span class="hljs-selector-class">.btn-default</span> {
    <span class="hljs-attribute">background</span>: <span class="hljs-number">#ccc</span>;
    <span class="hljs-attribute">color</span>: <span class="hljs-number">#000</span>;
}
</code></pre>
<p>HTML é‡Œï¼š</p>
<pre><code class="hljs language-HTML" lang="HTML"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-primary"</span>&gt;</span>æäº¤<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default"</span>&gt;</span>é»˜è®¤<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
</code></pre>
<p>è¿™å°±å¥½å¤šäº†ï¼åŸºç±» .btn å¤„ç†é€šç”¨æ ·å¼ï¼Œå˜ä½“ç±»å¤„ç†å·®å¼‚ã€‚é€šè¿‡ç»„åˆï¼Œå¤ç”¨ç‡é«˜äº†å¾ˆå¤šã€‚è¿™å…¶å®å°±æ˜¯åŸå­ CSS çš„é›å½¢ï¼šæŠŠæ ·å¼æ‹†æˆä¸€ä¸ªä¸ªå°çš„ã€ä¸å¯åˆ†çš„â€œåŸå­â€å•å…ƒã€‚</p>
<h2 data-id="heading-2">åŸå­ CSSï¼šæ ·å¼ä¸–ç•Œçš„ä¹é«˜ç§¯æœ¨</h2>
<p>åŸå­ CSSï¼ˆAtomic CSSï¼‰å°±æ˜¯æŠŠ CSS è§„åˆ™æ‹†æˆæå°çš„å•ä¸€èŒè´£ç±»ï¼Œæ¯”å¦‚ï¼š</p>
<ul>
<li>p-4ï¼špadding: 1rem;</li>
<li>bg-blue-600ï¼šbackground-color: #2563eb;</li>
<li>text-whiteï¼šcolor: white;</li>
<li>rounded-mdï¼šborder-radius: 0.375rem;</li>
</ul>
<p>è¿™äº›ç±»å°±åƒä¹é«˜ç§¯æœ¨ï¼Œå•ä¸ªæ²¡ä»€ä¹ˆç”¨ï¼Œä½†ç»„åˆèµ·æ¥èƒ½æ­å‡ºä»»ä½•å½¢çŠ¶ã€‚å¥½å¤„æ˜¾è€Œæ˜“è§ï¼š</p>
<ul>
<li><strong>é«˜åº¦å¤ç”¨</strong>ï¼šä¸€ä¸ªç±»å¯ä»¥åœ¨æ— æ•°åœ°æ–¹ç”¨ï¼Œä¸ç”¨æ‹…å¿ƒå‘½åå†²çªã€‚</li>
<li><strong>ä¸ç”¨è·³æ–‡ä»¶</strong>ï¼šæ ·å¼ç›´æ¥å†™åœ¨ HTML é‡Œï¼Œå¼€å‘æ—¶ä¸Šä¸‹æ–‡åˆ‡æ¢å°‘ï¼Œæ•ˆç‡é«˜ã€‚</li>
<li><strong>ä¸€è‡´æ€§å¼º</strong>ï¼šæ‰€æœ‰é—´è·ã€é¢œè‰²éƒ½æ¥è‡ªç»Ÿä¸€çš„è®¾è®¡ç³»ç»Ÿï¼Œä¸ä¼šä¹±ä¸ƒå…«ç³Ÿã€‚</li>
<li><strong>ç”Ÿäº§åŒ…å°</strong>ï¼šTailwind ä¼šè‡ªåŠ¨ç§»é™¤æœªä½¿ç”¨çš„ç±»ï¼Œæœ€ç»ˆ CSS æ–‡ä»¶è¶…çº§ç²¾ç®€ï¼ˆå¾€å¾€åªæœ‰å‡ å KBï¼‰ã€‚</li>
</ul>
<p>Tailwind CSS å°±æ˜¯åŸå­ CSS çš„ä»£è¡¨ä½œã€‚å®ƒä¸æä¾›ç°æˆçš„ç»„ä»¶ï¼ˆåƒ Bootstrap çš„å¡ç‰‡ã€å¯¼èˆªï¼‰ï¼Œè€Œæ˜¯ç»™ä½ ä¸€å † utility ç±»ï¼Œè®©ä½ è‡ªå·±æ‹¼ã€‚å¾ˆå¤šäººåˆšçœ‹è§‰å¾—â€œç±»åå¥½é•¿å¥½ä¹±â€ï¼Œä½†ç”¨ä¹ æƒ¯äº†å°±å›ä¸å»äº†â€”â€”å› ä¸ºå®ƒè®©ä½ ä¸“æ³¨äºå¸ƒå±€å’Œè®¾è®¡ï¼Œè€Œä¸æ˜¯çº ç»“ç±»åã€‚</p>
<p>ç›¸æ¯”ä¼ ç»Ÿ CSSï¼ŒTailwind çš„ä¼˜åŠ¿ï¼š</p>
<ul>
<li><strong>å¼€å‘é€Ÿåº¦å¿«</strong>ï¼šä¸ç”¨å†™è‡ªå®šä¹‰ CSSï¼Œ90% çš„æ ·å¼ç›´æ¥ç”¨ utility ç±»æå®šã€‚</li>
<li><strong>ç»´æŠ¤å®¹æ˜“</strong>ï¼šæ”¹æ ·å¼ç›´æ¥æ”¹ç±»åï¼Œä¸ç”¨æ‰¾ CSS æ–‡ä»¶ã€‚</li>
<li><strong>å“åº”å¼å‹å¥½</strong>ï¼šå†…ç½® mobile-first è®¾è®¡ï¼ˆåé¢è¯¦è¯´ï¼‰ã€‚</li>
<li><strong>è‡ªå®šä¹‰å¼º</strong>ï¼šé€šè¿‡é…ç½®æ–‡ä»¶ï¼Œèƒ½è½»æ¾è°ƒæ•´é¢œè‰²ã€é—´è·ç­‰è®¾è®¡ tokenã€‚</li>
</ul>
<p>å½“ç„¶ï¼Œä¸æ˜¯å®Œç¾ï¼šHTML çœ‹èµ·æ¥ç±»åå¤šï¼ˆâ€œclass soupâ€ï¼‰ï¼Œåˆå­¦æ›²çº¿é™¡ã€‚ä½†å¤šç»ƒå‡ æ¬¡ï¼Œå°±çˆ±ä¸Šäº†ã€‚</p>
<h2 data-id="heading-3">åœ¨ React + Vite é¡¹ç›®ä¸­ä¸Šæ‰‹ Tailwind CSS</h2>
<p>2025 å¹´äº†ï¼ŒTailwind å·²ç»åˆ° v4 äº†ï¼Œæ€§èƒ½æ›´å¼ºï¼Œå†…ç½® Vite æ”¯æŒè¶…çº§æ–¹ä¾¿ã€‚æˆ‘çš„ React é¡¹ç›®æ˜¯ç”¨ Vite åˆ›å»ºçš„ï¼Œå®‰è£…æ­¥éª¤è¶…çº§ç®€å•ã€‚</p>
<ol>
<li>åˆ›å»ºé¡¹ç›®ï¼š</li>
</ol>
<pre><code class="hljs language-Bash" lang="Bash">npm create vite@latest my-tailwind-project -- --template react
<span class="hljs-built_in">cd</span> my-tailwind-project
npm install
</code></pre>
<ol start="2">
<li>å®‰è£… Tailwindï¼ˆv4 æ–¹å¼ï¼‰ï¼š</li>
</ol>
<pre><code class="hljs language-Bash" lang="Bash">npm install tailwindcss @tailwindcss/vite
</code></pre>
<ol start="3">
<li>é…ç½® vite.config.jsï¼š</li>
</ol>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-keyword">import</span> { defineConfig } <span class="hljs-keyword">from</span> <span class="hljs-string">'vite'</span>
<span class="hljs-keyword">import</span> react <span class="hljs-keyword">from</span> <span class="hljs-string">'@vitejs/plugin-react'</span>
<span class="hljs-keyword">import</span> tailwindcss <span class="hljs-keyword">from</span> <span class="hljs-string">'@tailwindcss/vite'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineConfig</span>({
  <span class="hljs-attr">plugins</span>: [<span class="hljs-title function_">react</span>(), <span class="hljs-title function_">tailwindcss</span>()],
})
</code></pre>
<ol start="4">
<li>å¯¼å…¥ï¼š</li>
</ol>
<p>åœ¨ä½ çš„ CSS æ–‡ä»¶ä¸­æ·»åŠ ä¸€ä¸ª<code>@import</code>å¯¼å…¥ Tailwind CSS çš„è¯­å¥ã€‚</p>
<pre><code class="hljs language-CSS" lang="CSS"><span class="hljs-keyword">@import</span> <span class="hljs-string">"tailwindcss"</span>;
</code></pre>
<p>å°±è¿™ä¹ˆç®€å•ï¼ä¸ç”¨ postcss.config.js äº†ï¼Œv4 åŸç”Ÿæ”¯æŒ Viteã€‚</p>
<p>å¯åŠ¨ npm run devï¼Œä½ å°±å¯ä»¥åœ¨ JSX é‡Œç”¨ Tailwind ç±»äº†ã€‚</p>
<p>çœ‹æˆ‘ç¬¬ä¸€ä¸ªç»„ä»¶ï¼š</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h1</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"text-4xl font-bold text-center my-8"</span>&gt;</span>Hello Tailwind!<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700"</span>&gt;</span>
        æäº¤
      <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"px-4 py-2 bg-gray-300 text-black rounded-md hover:bg-gray-400 ml-4"</span>&gt;</span>
        é»˜è®¤
      <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/&gt;</span></span>
  )
}
</code></pre>
<p>ç›´æ¥åœ¨ className é‡Œå †ç±»ï¼špadding ç”¨ px/pyï¼ŒèƒŒæ™¯ bg-xxxï¼Œæ–‡å­— text-xxxï¼Œhover çŠ¶æ€ç›´æ¥ hover: å‰ç¼€ã€‚å¤ªçˆ½äº†ï¼</p>
<p>å¯¹åº”æ ·å¼ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cc64059565cc49089226c30be98a053a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y2X5bGx5a6J:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767700991&amp;x-signature=mKVT23jxvejXGMo2QLJf7Vj3ELQ%3D" alt="image.png" loading="lazy"/></p>
<p>æˆ‘è¿˜åšäº†ä¸ªå°å¡ç‰‡ç»„ä»¶ï¼š</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">const</span> <span class="hljs-title function_">ArticleCard</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"p-4 bg-white rounded-xl shadow hover:shadow-lg transition-shadow"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h2</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"text-lg font-bold"</span>&gt;</span>Tailwind CSS<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"text-gray-500 mt-2"</span>&gt;</span>ç”¨ utility class å¿«é€Ÿæ„å»º UI<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
};
</code></pre>
<p>hover çš„æ—¶å€™é˜´å½±å˜å¤§ï¼Œtransition å¹³æ»‘è¿‡æ¸¡ï¼Œå…¨æ˜¯ Tailwind å†…ç½®çš„ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5eb0d875edf0448da392ec0e9184189a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y2X5bGx5a6J:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767700991&amp;x-signature=Az3Gpo8zH0EzO7dis9SDLot1Z8Q%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-4">TailWindCssçš„ç—›ç‚¹</h2>
<h3 data-id="heading-5">1. HTML/JSX é‡Œç±»åè¶…çº§é•¿ï¼Œçœ‹èµ·æ¥ä¹±ç³Ÿç³Ÿçš„ï¼ˆClass Soup ç°è±¡ï¼‰</h3>
<p>è¿™æ˜¯æœ€å¤šäººåæ§½çš„ç‚¹ã€‚ä¸€ä¸ªç»„ä»¶çš„ className åŠ¨ä¸åŠ¨å°±ä¸€é•¿ä¸²</p>
<pre><code class="hljs language-html" lang="html">className="flex flex-col md:flex-row gap-4 p-6 bg-white rounded-lg shadow hover:shadow-xl transition-all"ã€‚
</code></pre>
<p>çœ‹èµ·æ¥åƒâ€œç±»åæ±¤â€ï¼Œé˜…è¯»æ€§å·®ï¼Œå°¤å…¶æ˜¯æ–°æ‰‹æˆ–åˆ«äººæ¥æ‰‹ä»£ç æ—¶ï¼Œå¾—èŠ±æ—¶é—´è§£æè¿™äº›ç±»åˆ°åº•å¹²äº†å•¥ã€‚ç›¸æ¯”ä¼ ç»Ÿ CSS ä¸€ä¸ªè¯­ä¹‰åŒ–çš„ç±»åï¼ˆå¦‚ .cardï¼‰ï¼ŒTailwind æŠŠæ ·å¼å…¨æš´éœ²åœ¨ markup é‡Œï¼Œè¿åäº†â€œå…³æ³¨ç‚¹åˆ†ç¦»â€çš„åŸåˆ™â€”â€”HTML æœ¬è¯¥ç®¡ç»“æ„ï¼ŒCSS ç®¡æ ·å¼ï¼Œç°åœ¨å…¨æ··ä¸€èµ·äº†ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c7fe175287014962862c245735be9d89~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y2X5bGx5a6J:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767700991&amp;x-signature=a8jedbwoi0DJaqVJtxlQ7RYv0sc%3D" alt="image.png" loading="lazy"/></p>
<p>è§£å†³åŠæ³•ï¼šæå–ç»„ä»¶ã€ç”¨ @apply è‡ªå®šä¹‰ç±»ï¼Œæˆ–è€…å·¥å…·å¦‚ tailwind-merge å¤„ç†æ¡ä»¶ç±»ã€‚ä½†ä¸€å¼€å§‹è¿˜æ˜¯æŒºåˆ«æ‰­çš„ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/546187fb6b8d49e797211356d66a61f7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y2X5bGx5a6J:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767700991&amp;x-signature=bMzvGrqqWjnZdRaUASKW0mD4cDI%3D" alt="image.png" loading="lazy"/></p>
<p>æ•ˆæœå±•ç¤ºï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/557ffea7b28e4fce81d6884020b1c15c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y2X5bGx5a6J:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767700991&amp;x-signature=GPxJg%2F5laEGq93Wgi7mhuQD%2FUf4%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-6">2. å­¦ä¹ æ›²çº¿é™¡å³­ï¼Œå¾—è®°ä¸€å¤§å †ç±»å</h3>
<p>Tailwind çš„ç±»åä¸æ˜¯éšä¾¿èµ·çš„ï¼Œå¾—ç†Ÿæ‚‰å®ƒçš„å‘½åè§„åˆ™ï¼špadding ç”¨ p-ï¼Œmargin ç”¨ m-ï¼Œå“åº”å¼å‰ç¼€ md: lg:ï¼Œhover: focus: ä¹‹ç±»çš„å˜ä½“ã€‚</p>
<p>åˆšä¸Šæ‰‹æ—¶ï¼Œæ€»å¾—ç¿»æ–‡æ¡£æˆ–é è®°å¿†ã€‚å¾ˆå¤šäººè¯´â€œç”¨ä¸€å‘¨å°±ä¸Šæ‰‹äº†â€ï¼Œä½†å¯¹ CSS ä¸ç†Ÿçš„æ–°äººæ¥è¯´ï¼Œå¯èƒ½å¾—ä¸€ä¸ªæœˆæ‰èƒ½æµç•…ã€‚</p>
<p>è¿˜æœ‰ï¼Œå¤æ‚æ ·å¼ï¼ˆå¦‚åµŒå¥—é€‰æ‹©å™¨ã€çˆ¶å­çŠ¶æ€ï¼‰ç”¨çº¯ Tailwind å†™èµ·æ¥éº»çƒ¦ï¼Œå¾—é  group- æˆ–æ’ä»¶ã€‚</p>
<h4 data-id="heading-7">è§£å†³æ–¹æ³•ï¼šVS Code çš„ IntelliSense æ’ä»¶æç¤º</h4>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/83d6df7921da406c968101d327d55b63~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y2X5bGx5a6J:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767700991&amp;x-signature=KwboAK3gUJgiGiVlHgtudWr9rSg%3D" alt="image.png" loading="lazy"/></p>
<p>æ•ˆæœå±•ç¤ºï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9e4e806dbf804e409d4a910f58bb90b8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y2X5bGx5a6J:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767700991&amp;x-signature=L63B3Vca1qKQMBGnWa%2FLOwY%2B480%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-8">3. ç»´æŠ¤å’Œé‡æ„æ—¶éº»çƒ¦ï¼Œå°¤å…¶æ˜¯å¤§é¡¹ç›®</h3>
<p>æƒ³å…¨å±€æ”¹ä¸ªé—´è·ï¼ˆå¦‚æ‰€æœ‰ padding ä» 4 æ”¹æˆ 6ï¼‰ï¼Ÿå¾—æœç´¢æ›¿æ¢ä¸€å †ç±»åã€‚ä¼ ç»Ÿ CSS æ”¹ä¸€ä¸ªå˜é‡æˆ–ç±»å°±è¡Œã€‚</p>
<p>æ¡ä»¶æ ·å¼ï¼ˆæ¯”å¦‚æ ¹æ® props åŠ¨æ€ç±»ï¼‰éœ€è¦é¢å¤–å·¥å…·å¦‚ clsx æˆ– tailwind-mergeï¼Œå¦åˆ™å®¹æ˜“å†²çªã€‚</p>
<p>è°ƒè¯•æ—¶ï¼Œæµè§ˆå™¨ DevTools é‡Œä¸€å †åŸå­ç±»ï¼Œè™½ç„¶èƒ½ç‚¹å¼€çœ‹ï¼Œä½†ä¸å¦‚è¯­ä¹‰ç±»ç›´è§‚ã€‚</p>
<p>å¤§é¡¹ç›®é‡Œï¼Œå¦‚æœä¸ä¸¥æ ¼è§„èŒƒï¼Œå®¹æ˜“æ ·å¼é‡å¤æˆ–ä¸ä¸€è‡´ã€‚</p>
<h2 data-id="heading-9">Tailwind çš„å“åº”å¼è®¾è®¡ï¼šMobile First æ˜¯ç‹é“</h2>
<p>Tailwind é»˜è®¤æ˜¯ mobile-firstï¼šå…ˆå†™ç§»åŠ¨ç«¯æ ·å¼ï¼Œå†ç”¨å‰ç¼€ï¼ˆå¦‚ md: lg:ï¼‰è¦†ç›–å¤§å±ã€‚</p>
<p>æ¯”å¦‚æˆ‘åšçš„å¸ƒå±€ï¼š</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">App2</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"flex flex-col gap-4 p-4 md:flex-row"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">main</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"bg-blue-100 p-4 rounded-lg md:w-2/3"</span>&gt;</span>ä¸»å†…å®¹åŒº<span class="hljs-tag">&lt;/<span class="hljs-name">main</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">aside</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"bg-green-100 p-4 rounded-lg md:w-1/3"</span>&gt;</span>ä¾§è¾¹æ <span class="hljs-tag">&lt;/<span class="hljs-name">aside</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
</code></pre>
<ul>
<li>é»˜è®¤ï¼ˆæ‰‹æœºï¼‰ï¼šflex-colï¼Œå‚ç›´æ ˆã€‚</li>
<li>md åŠä»¥ä¸Šï¼šflex-rowï¼Œæ¨ªæ’ï¼›main å  2/3ï¼Œaside å  1/3ã€‚</li>
</ul>
<p>ä¸ºä»€ä¹ˆ mobile-first å¥½ï¼Ÿå› ä¸ºæ‰‹æœºæµé‡å ä¸€åŠä»¥ä¸Šï¼Œå…ˆä¿è¯å°å±ä½“éªŒå¥½ï¼Œå†é€æ­¥å¢å¼ºå¤§å±ã€‚ä¼ ç»Ÿ desktop-first å®¹æ˜“å¿½ç•¥æ‰‹æœºã€‚</p>
<p>Tailwind æ–­ç‚¹é»˜è®¤ï¼š</p>
<ul>
<li>sm: 640px</li>
<li>md: 768px</li>
<li>lg: 1024px</li>
<li>xl: 1280px</li>
<li>2xl: 1536px</li>
</ul>
<p>æƒ³åªåœ¨æŸä¸ªèŒƒå›´ç”Ÿæ•ˆï¼Ÿç»„åˆ max- å‰ç¼€ï¼Œæ¯”å¦‚ md:max-lg: åªåœ¨ä¸­å±ã€‚</p>
<h2 data-id="heading-10">è¿›é˜¶å°æŠ€å·§å’Œæœ€ä½³å®è·µ</h2>
<p>ç”¨ Tailwind ä¹…äº†ï¼Œæœ‰äº›å¿ƒå¾—ï¼š</p>
<ol>
<li><strong>ç±»åé¡ºåºæœ‰è®²ç©¶</strong>ï¼šæˆ‘å–œæ¬¢æŒ‰â€œåŒå¿ƒåœ†â€é¡ºåºï¼šå¸ƒå±€ â†’ ç›’æ¨¡å‹ â†’ èƒŒæ™¯ â†’ æ–‡å­— â†’ å…¶ä»–ã€‚è¿™æ ·è¯»èµ·æ¥é¡ºçœ¼ã€‚</li>
<li><strong>é‡å¤ç±»å¤ªå¤šï¼Ÿæå–ç»„ä»¶</strong>ï¼šåˆ«åœ¨æ¯ä¸ªæŒ‰é’®éƒ½å†™ä¸€é•¿ä¸²ï¼Œå°è£…æˆ &lt; Button variant="primary" &gt;ã€‚</li>
<li><strong>ç”¨ @apply è‡ªå®šä¹‰ç±»</strong>ï¼šå¦‚æœæŸäº›ç»„åˆå¸¸ç”¨ï¼Œåœ¨ CSS é‡Œï¼š</li>
</ol>
<pre><code class="hljs language-CSS" lang="CSS"><span class="hljs-selector-class">.btn-primary</span> {
  <span class="hljs-keyword">@apply</span> px-<span class="hljs-number">4</span> py-<span class="hljs-number">2</span> bg-blue-<span class="hljs-number">600</span> text-white rounded-md <span class="hljs-attribute">hover</span>:bg-blue-<span class="hljs-number">700</span>;
}
</code></pre>
<ol start="4">
<li><strong>æš—é»‘æ¨¡å¼è¶…ç®€å•</strong>ï¼šåŠ  class="dark" åˆ° htmlï¼Œutility ç”¨ dark: å‰ç¼€ã€‚</li>
<li><strong>æ€§èƒ½ä¼˜åŒ–</strong>ï¼šTailwind è‡ªåŠ¨ purge æœªç”¨ç±»ï¼Œç”Ÿäº§åŒ…å¾ˆå°ã€‚</li>
<li><strong>å’Œå¤§æ¨¡å‹ç»“åˆ</strong>ï¼šTailwind ç±»åè¯­ä¹‰å¼ºï¼Œç”¨ AI ç”Ÿæˆ UI ç‰¹åˆ«å‡†ã€‚æè¿°â€œä¸€ä¸ªè“è‰²å¤§æŒ‰é’®ï¼Œhover å˜æ·±â€ï¼Œç›´æ¥åç±»åã€‚</li>
</ol>
<h2 data-id="heading-11">React ä¸­çš„ Fragment</h2>
<h3 data-id="heading-12">React ç»„ä»¶ä¸ºä»€ä¹ˆåªèƒ½è¿”å›ä¸€ä¸ªæ ¹å…ƒç´ ï¼ˆæ²¡æœ‰å¹¶åˆ—çš„å¤šä¸ªæ ¹å…ƒç´ ï¼‰ï¼Ÿ</h3>
<p>ä½ åœ¨å­¦ React æ—¶ï¼Œè‚¯å®šç¢°åˆ°è¿‡è¿™ä¸ªç»å…¸æŠ¥é”™ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1e6d05ff3544440f9bd727359d14fb15~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y2X5bGx5a6J:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767700991&amp;x-signature=c81RcaN2jlNCfnT7HCpGhyzAhkw%3D" alt="image.png" loading="lazy"/>
é”™è¯¯ä¿¡æ¯å¤§æ¦‚æ˜¯ï¼šâ€œJSX expressions must have one parent elementâ€ æˆ– â€œAdjacent JSX elements must be wrapped in an enclosing tagâ€ã€‚</p>
<p>ç®€å•è¯´ï¼Œå°±æ˜¯ <strong>React å‡½æ•°ç»„ä»¶çš„ return é‡Œï¼Œåªèƒ½è¿”å›ä¸€ä¸ªå•ä¸€çš„æ ¹å…ƒç´ ï¼Œä¸èƒ½å¹¶åˆ—å¤šä¸ªé¡¶çº§å…ƒç´ </strong>ã€‚</p>
<p>é”™çš„ä¾‹å­ï¼š</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>æ ‡é¢˜<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span>
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>æ®µè½<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span>  <span class="hljs-comment">// æŠ¥é”™ï¼ä¸¤ä¸ªå¹¶åˆ—</span>
  );
}
</code></pre>
<p>å¯¹çš„ä¾‹å­ï¼ˆä¼ ç»Ÿæ–¹å¼ï¼‰ï¼š</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>  // ç”¨ div åŒ…è£¹æˆä¸€ä¸ªæ ¹
      <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>æ ‡é¢˜<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>æ®µè½<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
</code></pre>
<p>ç°åœ¨å¾ˆå¤šäººç”¨ Fragmentï¼š</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;&gt;</span>  // ç©ºæ ‡ç­¾ï¼Œå°±æ˜¯ Fragment
      <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>æ ‡é¢˜<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>æ®µè½<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
    <span class="hljs-tag">&lt;/&gt;</span></span>
  );
}
</code></pre>
<p>é‚£ä¸ºä»€ä¹ˆ React è¦å¼ºåˆ¶è¿™ä¸ªè§„åˆ™å‘¢ï¼Ÿä¸èƒ½ç›´æ¥æ”¯æŒå¹¶åˆ—å¤šä¸ªæ ¹å—ï¼Ÿ</p>
<h3 data-id="heading-13">æ ¸å¿ƒåŸå› ï¼šJSX æœ¬è´¨ä¸Šæ˜¯ React.createElement çš„è¯­æ³•ç³–</h3>
<p>React ç»„ä»¶å…¶å®å°±æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°å¿…é¡»è¿”å› <strong>ä¸€ä¸ªå€¼</strong>ï¼ˆå•ä¸ª React Elementï¼‰ã€‚</p>
<p>JSX çœ‹èµ·æ¥åƒ HTMLï¼Œä½†å®ƒä¼šè¢« Babel ç¼–è¯‘æˆ JavaScript çš„ React.createElement è°ƒç”¨ã€‚</p>
<p>æ¯”å¦‚è¿™ä¸ª JSXï¼š</p>
<pre><code class="hljs language-jsx" lang="jsx">&lt;div&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>æ ‡é¢˜<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span>
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>æ®µè½<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span>
&lt;/div&gt;
</code></pre>
<p>ç¼–è¯‘åå¤§è‡´æ˜¯ï¼š</p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-title class_">React</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">"div"</span>, <span class="hljs-literal">null</span>,
  <span class="hljs-title class_">React</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">"h1"</span>, <span class="hljs-literal">null</span>, <span class="hljs-string">"æ ‡é¢˜"</span>),
  <span class="hljs-title class_">React</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">"p"</span>, <span class="hljs-literal">null</span>, <span class="hljs-string">"æ®µè½"</span>)
);
</code></pre>
<p>createElement è¿”å›çš„æ˜¯ <strong>ä¸€ä¸ªå•ä¸€çš„ React Element å¯¹è±¡</strong>ï¼Œå®ƒå¯ä»¥æœ‰å¤šä¸ª childrenï¼ˆå­å…ƒç´ æ•°ç»„ï¼‰ï¼Œä½†æœ¬èº«å¿…é¡»æ˜¯å•ä¸ªå¯¹è±¡ã€‚</p>
<p>å¦‚æœä½ å†™å¹¶åˆ—ä¸¤ä¸ªï¼š</p>
<pre><code class="hljs language-jsx" lang="jsx">&lt;h1&gt;æ ‡é¢˜&lt;/h1&gt;
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>æ®µè½<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span>
</code></pre>
<p>ç¼–è¯‘åç›¸å½“äºï¼š</p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-title class_">React</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">"h1"</span>, <span class="hljs-literal">null</span>, <span class="hljs-string">"æ ‡é¢˜"</span>);
<span class="hljs-title class_">React</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">"p"</span>, <span class="hljs-literal">null</span>, <span class="hljs-string">"æ®µè½"</span>);  <span class="hljs-comment">// ä¸¤ä¸ªç‹¬ç«‹çš„è°ƒç”¨</span>
</code></pre>
<p>è¿™å°±åƒå‡½æ•°é‡Œæœ‰ä¸¤æ¡ return è¯­å¥ï¼š</p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">bad</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;
  <span class="hljs-keyword">return</span> <span class="hljs-number">2</span>;  <span class="hljs-comment">// ç¬¬äºŒä¸ªæ°¸è¿œæ‰§è¡Œä¸åˆ°ï¼Œè¯­æ³•æ— æ•ˆ</span>
}
</code></pre>
<p>JavaScript å‡½æ•°åªèƒ½è¿”å›ä¸€ä¸ªå€¼ï¼Œæ‰€ä»¥ React ç»„ä»¶ä¹Ÿåªèƒ½è¿”å›ä¸€ä¸ª React Elementã€‚</p>
<h3 data-id="heading-14">å¦ä¸€ä¸ªé‡è¦åŸå› ï¼šReact çš„è™šæ‹Ÿ DOM å’Œ Reconciliationï¼ˆè°ƒå’Œï¼‰ç®—æ³•éœ€è¦æ ‘çŠ¶ç»“æ„</h3>
<p>React çš„æ ¸å¿ƒæ˜¯è™šæ‹Ÿ DOMï¼šä¸€ä¸ª JavaScript å¯¹è±¡æ ‘ã€‚</p>
<p>æ¯ä¸ªç»„ä»¶æ¸²æŸ“åï¼Œå¿…é¡»å¯¹åº”è™šæ‹Ÿ DOM æ ‘ä¸Šçš„ <strong>ä¸€ä¸ªèŠ‚ç‚¹</strong>ï¼ˆæ ¹èŠ‚ç‚¹ï¼‰ï¼Œè¿™ä¸ªèŠ‚ç‚¹å¯ä»¥æœ‰ä»»æ„å¤šä¸ªå­èŠ‚ç‚¹ï¼Œä½†ç»„ä»¶æœ¬èº«åªèƒ½ä»£è¡¨ä¸€ä¸ªèŠ‚ç‚¹ã€‚</p>
<p>å¦‚æœå…è®¸å¹¶åˆ—å¤šä¸ªæ ¹ï¼ŒReact å°±ä¸çŸ¥é“è¿™ä¸ªç»„ä»¶åœ¨è™šæ‹Ÿ DOM æ ‘é‡Œè¯¥æ€ä¹ˆæŒ‚è½½ã€æ€ä¹ˆ diffï¼ˆæ¯”è¾ƒæ–°æ—§è™šæ‹Ÿ DOMï¼‰ã€æ€ä¹ˆæ›´æ–°ã€‚</p>
<p>React çš„ diff ç®—æ³•ä¾èµ–ä¸¥æ ¼çš„æ ‘ç»“æ„ï¼šçˆ¶å­å…³ç³»æ¸…æ™°ï¼Œä¾¿äºé«˜æ•ˆæ¯”è¾ƒå’Œæ›´æ–°ã€‚</p>
<p>å¤šæ ¹çš„è¯ï¼Œæ ‘å°±ä¹±äº†ï¼Œç®—æ³•å¤æ‚åº¦ä¼šçˆ†ç‚¸ï¼Œæ€§èƒ½å˜å·®ã€‚</p>
<h3 data-id="heading-15">å†å²èƒŒæ™¯ï¼šæ—©æœŸåªèƒ½ç”¨ div åŒ…è£¹ï¼Œåæ¥å¼•å…¥ Fragment</h3>
<p>React æ—©æœŸï¼ˆv16 ä¹‹å‰ï¼‰ï¼Œå¤§å®¶åªèƒ½ç”¨æ— æ„ä¹‰çš„ &lt; div&gt; åŒ…è£¹ã€‚</p>
<p>é—®é¢˜ï¼š</p>
<ul>
<li>å¤šä¸€å±‚ DOM èŠ‚ç‚¹ï¼Œå½±å“ CSS å¸ƒå±€ï¼ˆæ¯”å¦‚ flexã€gridï¼‰</li>
<li>åœ¨è¡¨æ ¼  é‡Œè¿”å›å¤šä¸ª ï¼ŒåŒ… div ä¼šå¯¼è‡´æ— æ•ˆ HTML</li>
<li>DOM æ ‘æ›´æ·±ï¼Œç•¥å¾®å½±å“æ€§èƒ½</li>
</ul>
<p>React v16ï¼ˆ2017 å¹´ï¼‰å¼•å…¥ <strong>Fragment</strong>ï¼Œä¸“é—¨è§£å†³è¿™ä¸ªç—›ç‚¹ã€‚</p>
<p>Fragment å°±æ˜¯ä¸€ä¸ªâ€œé€æ˜åŒ…è£¹â€ï¼Œä¸æ¸²æŸ“æˆçœŸå® DOM èŠ‚ç‚¹ï¼Œåªåœ¨è™šæ‹Ÿ DOM é‡Œå ä½ã€‚</p>
<p>å†™æ³•ï¼š</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Fragment</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;
<span class="hljs-comment">// æˆ–ç›´æ¥ç”¨çŸ­è¯­æ³•ï¼ˆæ¨èï¼‰</span>
<span class="hljs-keyword">return</span> (
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Fragment</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>æ ‡é¢˜<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>æ®µè½<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">Fragment</span>&gt;</span></span>
);

<span class="hljs-comment">// æœ€å¸¸ç”¨ï¼š</span>
<span class="hljs-keyword">return</span> (
  <span class="xml"><span class="hljs-tag">&lt;&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>æ ‡é¢˜<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>æ®µè½<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
  <span class="hljs-tag">&lt;/&gt;</span></span>
);
</code></pre>
<p>æ³¨æ„ï¼šçŸ­è¯­æ³• &lt;&gt;&lt;/&gt; ä¸æ”¯æŒ key å±æ€§ï¼Œå¦‚æœåœ¨ map é‡Œéœ€è¦ keyï¼Œå°±ç”¨ &lt; Fragment key=...&gt;ã€‚</p>
<h3 data-id="heading-16">æ€»ç»“</h3>
<ul>
<li><strong>æŠ€æœ¯åŸå› </strong>ï¼šJSX â†’ React.createElement åªèƒ½è¿”å›å•ä¸ªå…ƒç´ ï¼Œå‡½æ•°åªèƒ½ return ä¸€ä¸ªå€¼ã€‚</li>
<li><strong>ç®—æ³•åŸå› </strong>ï¼šè™šæ‹Ÿ DOM éœ€è¦ä¸¥æ ¼æ ‘ç»“æ„ï¼Œä¾¿äºé«˜æ•ˆ diff å’Œæ›´æ–°ã€‚</li>
<li><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼šç”¨ Fragmentï¼ˆ&lt;&gt;...&lt;/&gt;ï¼‰åŒ…è£¹ï¼Œæ—¢æ»¡è¶³è§„åˆ™ï¼Œåˆä¸æ±¡æŸ“çœŸå® DOMã€‚</li>
</ul>
<p>è¿™ä¸ªè§„åˆ™è™½ç„¶ä¸€å¼€å§‹è®©äººè§‰å¾—éº»çƒ¦ï¼Œä½†å®ƒä¿è¯äº† React çš„é«˜æ•ˆå’Œå¯é¢„æµ‹æ€§ã€‚ç”¨ä¹ æƒ¯ Fragment åï¼Œä½ ä¼šè§‰å¾—è¶…çº§è‡ªç„¶ã€‚</p>
<h2 data-id="heading-17">ä¸ºä»€ä¹ˆå«TailWind</h2>
<p>â€œTailwindâ€ åœ¨è‹±æ–‡é‡Œæ˜¯â€œé¡ºé£â€çš„æ„æ€ï¼Œå¬èµ·æ¥æŒºè¯—æ„çš„ï¼Œè·Ÿ CSS æ¡†æ¶æœ‰å•¥å…³ç³»ï¼Ÿ</p>
<p>å…¶å®ï¼Œåå­—çš„æ¥æºè¶…çº§éšæ„ï¼Œæ¥è‡ªå®ƒçš„åˆ›å§‹äºº <strong>Adam Wathan</strong> æœ¬äººçš„ä¸€æ¬¡è„‘æ´å¤§å¼€ã€‚</p>
<p>Adam åœ¨ä¸€æ¬¡è®¿è°ˆä¸­äº²å£è¯´è¿‡ï¼ˆå¤§æ¦‚ 2022 å¹´çš„æ’­å®¢ï¼‰ï¼š</p>
<p>ä»–å½“æ—¶åœ¨ brainstorm é¡¹ç›®åå­—ï¼Œä» â€œtailâ€ è¿™ä¸ªè¯å¼€å§‹è”æƒ³â€”â€”å…ˆæƒ³åˆ° â€œtail tailâ€ï¼ˆé‡å¤ï¼‰ï¼Œç„¶å â€œwhite tailâ€ï¼ˆç™½å°¾ï¼Ÿå¯èƒ½æ˜¯ç™½å°¾é¹¿ï¼‰ï¼Œçªç„¶è¹¦å‡º <strong>Tailwind</strong>ã€‚</p>
<p>ä»–è¯´ï¼šâ€œThat's a cool name. é‚£åå­—æŒºé…·çš„ï¼Œè€Œä¸”æœ‰ç‚¹é“ç†ï¼Œå› ä¸ºå®ƒèƒ½å¸®ä½ <strong>åšäº‹æ›´å¿«</strong>ï¼ˆdo stuff fasterï¼‰ã€‚â€</p>
<p>â€œTailwindâ€ åœ¨è‹±è¯­é‡Œç¡®å®æœ‰â€œé¡ºé£â€çš„å«ä¹‰ï¼Œæ¯”å¦‚é£æœºèµ·é£æ—¶å¦‚æœæœ‰ tailwindï¼Œå°±èƒ½é£å¾—æ›´å¿«ã€æ›´é¡ºç•…ã€‚Adam è§‰å¾—è¿™ä¸ªæ¡†æ¶èƒ½è®©å¼€å‘è€…å†™æ ·å¼æ›´å¿«ã€æ›´é«˜æ•ˆï¼Œå°±åƒé¡ºé£åŠ©åŠ›ä¸€æ ·ï¼Œæ‰€ä»¥åå­—å°±è¿™ä¹ˆå®šäº†ã€‚</p>
<p>ä»–è¯´è¿™æ˜¯ä»–æƒ³åˆ°çš„ç¬¬ä¸€ä¸ªåå­—ï¼Œå°±è§‰å¾—ç‰¹åˆ«åˆé€‚ï¼Œç›´æ¥æ•²å®šäº†ã€‚</p>
<p>Tailwind CSS æœ€æ—©æ˜¯ Adam åœ¨ 2017 å¹´åšä¸€ä¸ªä¾§è¾¹é¡¹ç›®æ—¶ï¼Œé¡ºæ‰‹æå‡ºæ¥çš„ä¸€ä¸ªå†…éƒ¨å·¥å…·ï¼ˆç”¨ Less å†™çš„ utility ç±»ï¼‰ã€‚åæ¥ç›´æ’­å¼€å‘æ—¶ï¼Œè§‚ä¼—è€é—®â€œè¿™ CSS æ¡†æ¶å«å•¥â€ï¼Œä»–æ‰å†³å®šå¼€æºã€‚åå­—å°±æ˜¯è¿™ä¹ˆéšä¾¿å–çš„ï¼Œæ²¡æœ‰ä»€ä¹ˆæ·±å¥¥çš„å…¸æ•…ï¼Œå°±æ˜¯è§‰å¾—â€œé…· + è´´åˆåŠ é€Ÿå¼€å‘çš„ç†å¿µâ€ã€‚</p>
<p>æœ‰è¶£çš„æ˜¯ï¼ŒTailwind çš„ slogan ä¹Ÿæ˜¯ â€œRapidly build modern websites without ever leaving your HTMLâ€ï¼ˆå¿«é€Ÿæ„å»ºç°ä»£ç½‘ç«™ï¼Œä¸ç”¨ç¦»å¼€ HTMLï¼‰ï¼Œå®Œç¾å‘¼åº”äº†â€œé¡ºé£åŠ é€Ÿâ€çš„æ„Ÿè§‰ã€‚</p>
<p>æ‰€ä»¥ï¼ŒTailwind è¿™ä¸ªåå­—æœ¬è´¨ä¸Šå°±æ˜¯ï¼š</p>
<ul>
<li><strong>éšæ„è„‘æš´è€Œæ¥</strong>ï¼šä» â€œtailâ€ è”æƒ³åˆ°çš„è¯ã€‚</li>
<li><strong>å¯“æ„å¼€å‘åŠ é€Ÿ</strong>ï¼šåƒé¡ºé£ä¸€æ ·ï¼Œè®©ä½ å†™ UI æ›´å¿«ã€æ›´é¡ºæ‰‹ã€‚</li>
</ul>
<h2 data-id="heading-18">å†™åœ¨æœ€åï¼šä¸ºä»€ä¹ˆæˆ‘æ¨èä½ è¯•è¯• Tailwind</h2>
<p>ä»ä¼ ç»Ÿ CSS åˆ° Tailwindï¼Œæˆ‘çš„æ„Ÿè§‰æ˜¯ï¼šä»â€œæ‰‹è‰ºäººâ€å˜æˆäº†â€œå»ºç­‘å¸ˆâ€ã€‚ä»¥å‰æŠ æ¯ä¸€ä¸ªåƒç´ å†™è§„åˆ™ï¼Œç°åœ¨ç›´æ¥ç”¨ç°æˆç§¯æœ¨æ­ï¼Œä¸“æ³¨åœ¨äº§å“é€»è¾‘å’Œç”¨æˆ·ä½“éªŒä¸Šã€‚é¡¹ç›®è¿­ä»£å¿«äº†ï¼Œä»£ç å¹²å‡€äº†ï¼Œå¿ƒæƒ…ä¹Ÿå¥½äº†ã€‚</p>
<p>å¦‚æœä½ è¿˜åœ¨ç”¨ä¼ ç»Ÿ CSS çº ç»“ï¼Œä¸å¦¨åœ¨æ–°é¡¹ç›®é‡Œè¯•è¯• Tailwind + Reactã€‚åˆšå¼€å§‹å¯èƒ½ä¸é€‚åº”ç±»åå¤šï¼Œä½†åšæŒä¸€å‘¨ï¼Œä½ ä¼šçˆ±ä¸Šè¿™ç§è‡ªç”±ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[çˆ†ç«å…¨ç½‘çš„â€œç€‘å¸ƒæµâ€è§†é¢‘ï¼Œæ‰‹æŠŠæ‰‹æ•™ä½ ä¸€é”®ç”Ÿæˆï¼Œä½æˆæœ¬æ‰“é€ çˆ†æ¬¾ï¼]]></title>    <link>https://juejin.cn/post/7589494631005569059</link>    <guid>https://juejin.cn/post/7589494631005569059</guid>    <pubDate>2025-12-30T12:12:49.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589494631005569059" data-draft-id="7589477775210364980" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content=" çˆ†ç«å…¨ç½‘çš„â€œç€‘å¸ƒæµâ€è§†é¢‘ï¼Œæ‰‹æŠŠæ‰‹æ•™ä½ ä¸€é”®ç”Ÿæˆï¼Œä½æˆæœ¬æ‰“é€ çˆ†æ¬¾ï¼"/> <meta itemprop="keywords" content="ç¨‹åºå‘˜"/> <meta itemprop="datePublished" content="2025-12-30T12:12:49.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Javaä¸­æ–‡ç¤¾ç¾¤"/> <meta itemprop="url" content="https://juejin.cn/user/61228381386487"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
             çˆ†ç«å…¨ç½‘çš„â€œç€‘å¸ƒæµâ€è§†é¢‘ï¼Œæ‰‹æŠŠæ‰‹æ•™ä½ ä¸€é”®ç”Ÿæˆï¼Œä½æˆæœ¬æ‰“é€ çˆ†æ¬¾ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/61228381386487/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Javaä¸­æ–‡ç¤¾ç¾¤
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-30T12:12:49.000Z" title="Tue Dec 30 2025 12:12:49 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¤§å®¶åœ¨åˆ·çŸ­è§†é¢‘çš„æ—¶å€™ï¼Œæ˜¯ä¸æ˜¯ç»å¸¸çœ‹åˆ°é‚£ç§æ–‡å­—åƒç€‘å¸ƒä¸€æ ·è·³åŠ¨ã€è§†è§‰å†²å‡»åŠ›æå¼ºçš„è§†é¢‘ï¼Ÿ</p>
<p>å¾ˆå¤šäººç§ä¿¡é—®æˆ‘ï¼š<strong>â€œç£Šå“¥ï¼Œè¿™ç§è§†é¢‘æ˜¯ä¸æ˜¯å¾—ç”¨ç”µè„‘ç‰¹æ•ˆè½¯ä»¶åšå¤§åŠå¤©å•Šï¼Ÿâ€</strong></p>
<p>å…¶å®ï¼Œå¤§å®¶éƒ½æƒ³å¤æ‚äº†ï¼è¿™ç§è§†é¢‘çš„å®ç°æˆæœ¬æä½ï¼Œæ•ˆæœå´å‡ºå¥‡åœ°å¥½ã€‚ä»Šå¤©ï¼Œæˆ‘å°±æŠŠè¿™ä¸ªå‹ç®±åº•çš„ç»æ´»å„¿åˆ†äº«ç»™å¤§å®¶ï¼Œ<strong>åªéœ€ä¸¤æ­¥ï¼ŒN8N+å‰ªæ˜ å°±èƒ½ä¸€é”®æå®šï¼</strong> ğŸš€</p>
<hr/>
<h2 data-id="heading-0">ğŸ¬ å…ˆçœ‹æ•ˆæœ</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.bilibili.com%2Fvideo%2FBV182vHBPEaQ%2F" target="_blank" title="https://www.bilibili.com/video/BV182vHBPEaQ/" ref="nofollow noopener noreferrer">www.bilibili.com/video/BV182â€¦</a></p>
<hr/>
<p>æ–‡å­—ç‰ˆæ¦‚è§ˆï¼š</p>

<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bd10485f4f3f45d6a12493641887ccbf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2YeS4reaWh-ekvue-pA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767701569&amp;x-signature=z6g%2BSSVTL9BOT8fCYa9xAaig2SY%3D" alt="" loading="lazy"/></p>
<blockquote>
<p>â€œäººç”Ÿå››å¤§æ‚²å‰§ï¼šå¹¼å¹´å®¶ä¸å’Œï¼Œå°‘å¹´æ— è‰¯å¸ˆï¼Œæˆå¹´æ— è‰¯é…ï¼Œè€å¹´å­ä¸å­ã€‚ç„¶ä¸‡èˆ¬çš†è‹¦ï¼Œå”¯æœ‰è‡ªæ¸¡â€¦â€¦åªæœ‰ä¸€ç§è‹±é›„ä¸»ä¹‰ï¼Œå°±æ˜¯åœ¨è®¤æ¸…ç”Ÿæ´»çš„çœŸç›¸åï¼Œä¾ç„¶çƒ­çˆ±ç”Ÿæ´»ã€‚â€</p>
</blockquote>
<p>æ€ä¹ˆæ ·ï¼Ÿè¿™ç§æ–‡å­—è·³åŠ¨çš„èŠ‚å¥æ„Ÿï¼Œé…åˆä¸Šæ·±æƒ…çš„é…éŸ³ï¼Œæ˜¯ä¸æ˜¯ç¬é—´æŠŠæ ¼è°ƒæ‹‰æ»¡äº†ï¼Ÿ</p>
<hr/>
<h2 data-id="heading-1">ğŸ› ï¸ ç¬¬ä¸€æ­¥ï¼šä¸€é”®æå–ç´ æéŸ³/è§†é¢‘</h2>
<p>æƒ³è¦åšå‡ºå¥½è§†é¢‘ï¼Œå¥½çš„ç´ ææ˜¯å…³é”®ã€‚å’±ä»¬å¯ä»¥ç›´æ¥ä»é‚£äº›ç‚¹èµæé«˜çš„è§†é¢‘é‡Œè·å–éŸ³é¢‘ã€‚</p>
<ol>
<li><strong>å¤åˆ¶é“¾æ¥</strong>ï¼šåœ¨çŸ­è§†é¢‘å¹³å°ä¸Šçœ‹åˆ°å–œæ¬¢çš„è§†é¢‘ï¼Œç‚¹å‡»åˆ†äº«ï¼Œç›´æ¥â€œå¤åˆ¶é“¾æ¥â€ã€‚</li>
<li><strong>æå–éŸ³é¢‘</strong>ï¼šæ‰“å¼€å’±ä»¬çš„ <strong>n8n éŸ³é¢‘æå–åŠ©æ‰‹</strong> å·¥ä½œæµã€‚æŠŠé“¾æ¥å¾€èŠå¤©çª—å£ä¸€å‘ï¼Œç³»ç»Ÿå°±ä¼šè‡ªåŠ¨å¸®ä½ æŠŠè§†é¢‘ä¸‹è½½ä¸‹æ¥ï¼Œå¹¶é€šè¿‡ <strong>FFmpeg</strong> æ’ä»¶è‡ªåŠ¨æŠŠè§†é¢‘è½¬æˆéŸ³é¢‘ã€‚</li>
<li><strong>ä¿å­˜åˆ°æœ¬åœ°</strong>ï¼šè½¬æ¢å¥½çš„éŸ³é¢‘ä¼šä»¥æ—¶é—´æˆ³å‘½åï¼ˆæ¯”å¦‚ <code>DY_1712345.mp3</code>ï¼‰ï¼Œç›´æ¥ä¿å­˜åˆ°æ‰‹æœºæˆ–ç”µè„‘æ–‡ä»¶å¤¹é‡Œå¤‡ç”¨ã€‚</li>
</ol>
<p>è¿™ä¸€æ­¥éå¸¸å¿«ï¼Œå‡ ç§’é’Ÿå°±èƒ½æå®šï¼</p>
<hr/>
<h2 data-id="heading-2">âœ¨ ç¬¬äºŒæ­¥ï¼šå‰ªæ˜ â€œç¿»è½¬å¤§å­—â€ä¸€é”®åˆæˆ</h2>
<p>æœ‰äº†éŸ³é¢‘ï¼Œæ¥ä¸‹æ¥çš„æ“ä½œç®€ç›´å°±æ˜¯â€œå‚»ç“œå¼â€çš„ï¼Œé‡ç‚¹æ¥äº†ï¼Œå¤§å®¶çœ‹å¥½ï¼š</p>
<ol>
<li><strong>å¯¼å…¥ç´ æ</strong>ï¼šæ‰“å¼€<strong>å‰ªæ˜ </strong>ï¼Œç‚¹å‡»â€œå¼€å§‹åˆ¶ä½œâ€ï¼ŒæŠŠåˆšæ‰ä¸‹è½½å¥½çš„ MP3 éŸ³é¢‘æ‹‰åˆ°è½¨é“ä¸Šã€‚</li>
<li><strong>ç¥å¥‡æ¨¡æ¿</strong>ï¼šç‚¹å‡»åº•éƒ¨çš„ã€å­—å¹•ã€‘èœå•ï¼Œæ‰¾åˆ°ã€å­—å¹•æ¨¡æ¿ã€‘ã€‚</li>
<li><strong>ç¿»è½¬å¤§å­—</strong>ï¼šåœ¨æ¨¡æ¿åº“é‡Œæœâ€œç¿»è½¬å¤§å­—â€ï¼Œä½ ä¼šå‘ç°è¿™é‡Œæœ‰è¶…çº§å¤šé…·ç‚«çš„æ ·å¼ã€‚é€‰ä¸€ä¸ªä½ æœ€å–œæ¬¢çš„ï¼Œç‚¹å‡»åŠ å·ã€‚</li>
<li><strong>è‡ªåŠ¨è¯†åˆ«</strong>ï¼šè¿™æ—¶å€™å‰ªæ˜ å°±ä¼šè‡ªåŠ¨è¯†åˆ«éŸ³é¢‘é‡Œçš„è¯­éŸ³ï¼Œå¹¶åŒæ­¥ç”Ÿæˆå¯¹åº”çš„æ–‡å­—ç€‘å¸ƒæµæ•ˆæœï¼</li>
</ol>
<p>å¦‚å›¾æ‰€ç¤ºï¼š</p>

<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/82c182692330404fa18c1210d669cacf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2YeS4reaWh-ekvue-pA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767701569&amp;x-signature=guw1O35N5Yozh7kZYR5Jr%2FIZN1Y%3D" alt="" loading="lazy"/></p>
<p><strong>è¯´è¯é—´ï¼Œè§†é¢‘å°±è‡ªåŠ¨ç”Ÿæˆäº†ï¼</strong> è¿å¯¹é½éŸ³è½¨è¿™ç§ç´¯æ´»å„¿éƒ½ä¸ç”¨ä½ äº²è‡ªåŠ¨æ‰‹ã€‚</p>
<hr/>
<h2 data-id="heading-3">ğŸ’¡ æ€»ç»“ä¸€ä¸‹</h2>
<p>ä½ çœ‹ï¼Œå…¶å®åˆ¶ä½œçˆ†æ¬¾è§†é¢‘å¹¶ä¸éš¾ã€‚å’±ä»¬æ€»ç»“ä¸€ä¸‹æ ¸å¿ƒé€»è¾‘ï¼š<strong>å…ˆç”¨å·¥å…·æå–é«˜è´¨é‡éŸ³é¢‘ï¼Œå†åˆ©ç”¨å‰ªæ˜ çš„â€œç¿»è½¬å¤§å­—â€æ¨¡æ¿ä¸€é”®ç”Ÿæˆç‰¹æ•ˆã€‚</strong></p>
<p>æœ€åä¸€æ­¥ï¼Œç›´æ¥ç‚¹å‡»å¯¼å‡ºï¼Œä¸€ä¸ªå±äºä½ çš„é«˜æ¸…æ–‡å­—ç€‘å¸ƒæµå¤§ç‰‡å°±å‡ºç‚‰äº†ï¼</p>
<p>è¿™å°±æ˜¯ä»Šå¤©çš„å¹²è´§åˆ†äº«ã€‚<strong>æˆ‘æ˜¯ç£Šå“¥ï¼Œæ¯å¤©ä¸ºä½ åˆ†äº«ä¸€ä¸ªå®ç”¨çš„é»‘ç§‘æŠ€æŠ€å·§ã€‚</strong> è§‰å¾—æœ‰ç”¨çš„è¯ï¼Œåˆ«å¿˜äº†ç‚¹èµå…³æ³¨ï¼Œå’±ä»¬ä¸‹æœŸè§ï¼ğŸ‘‹âœ¨</p>
<blockquote>
<p>æœ¬æ–‡å·²æ”¶å½•åˆ°æˆ‘çš„æŠ€æœ¯å°ç«™ <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.javacn.site" target="_blank" title="https://www.javacn.site" ref="nofollow noopener noreferrer">www.javacn.site</a>ï¼Œç½‘ç«™åŒ…å«çš„å†…å®¹æœ‰ï¼š<strong>N8N/Coze/Dify/LangChain/SpringAI/SpringAIAlibaba/LangChain4j/AIå®æˆ˜é¡¹ç›®/AIå¸¸è§é¢è¯•é¢˜</strong>ç­‰æŠ€æœ¯åˆ†äº«ï¼Œæ¬¢è¿å„ä½å¤§ä½¬å…‰ä¸´æŒ‡å¯¼~</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Flinkæºç é˜…è¯»ï¼šåŒæµæ“ä½œ]]></title>    <link>https://juejin.cn/post/7589477341765664814</link>    <guid>https://juejin.cn/post/7589477341765664814</guid>    <pubDate>2025-12-30T12:14:33.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589477341765664814" data-draft-id="7589325011544768550" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Flinkæºç é˜…è¯»ï¼šåŒæµæ“ä½œ"/> <meta itemprop="keywords" content="Flink,å¤§æ•°æ®"/> <meta itemprop="datePublished" content="2025-12-30T12:14:33.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é¢å‘Googleç¼–ç¨‹"/> <meta itemprop="url" content="https://juejin.cn/user/1063982986695374"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Flinkæºç é˜…è¯»ï¼šåŒæµæ“ä½œ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1063982986695374/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é¢å‘Googleç¼–ç¨‹
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-30T12:14:33.000Z" title="Tue Dec 30 2025 12:14:33 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä»Šå¤©æ¥æ¢³ç†ä¸€ä¸‹ Flink åŒæµæ“ä½œç›¸å…³çš„æºç ã€‚</p>
<h3 data-id="heading-0">å†™åœ¨å‰é¢</h3>
<p>é€šè¿‡<a href="https://link.juejin.cn?target=https%3A%2F%2Fjackeyzhe.github.io%2F2025%2F07%2F19%2FFlink%25E5%25AD%25A6%25E4%25B9%25A0%25E7%25AC%2594%25E8%25AE%25B0%25EF%25BC%259A%25E5%25A4%259A%25E6%25B5%2581join%2F" target="_blank" title="https://jackeyzhe.github.io/2025/07/19/Flink%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%9A%E5%A4%9A%E6%B5%81join/" ref="nofollow noopener noreferrer">Flinkå­¦ä¹ ç¬”è®°ï¼šå¤šæµ Join</a>ä¸€æ–‡çš„ä»‹ç»ï¼Œæˆ‘ä»¬çŸ¥é“ Flink æœ‰ä¸‰ç§æ•°æ®å…³è”çš„æ–¹å¼ï¼Œåˆ†åˆ«æ˜¯ Window Joinã€Interval Join å’Œ CoGroupã€‚ä¸‹é¢æˆ‘ä»¬åˆ†åˆ«çœ‹ä¸‹è¿™ä¸‰ç§å…³è”æ–¹å¼çš„æºç å®ç°ã€‚</p>
<h3 data-id="heading-1">Window Join</h3>
<p>æˆ‘ä»¬å…ˆå›é¡¾ä¸€ä¸‹ window join çš„ä½¿ç”¨æ–¹æ³•ã€‚</p>
<pre><code class="hljs language-vbnet" lang="vbnet">DataStream&lt;Tuple2&lt;<span class="hljs-type">String</span>, <span class="hljs-type">Double</span>&gt;&gt; result = source1.<span class="hljs-keyword">join</span>(source2)
        .<span class="hljs-keyword">where</span>(record -&gt; record.f0)
        .equalTo(record -&gt; record.f0)
        .window(TumblingEventTimeWindows.<span class="hljs-keyword">of</span>(Time.seconds(<span class="hljs-number">2L</span>)))
        .apply(<span class="hljs-built_in">new</span> JoinFunction&lt;Tuple2&lt;<span class="hljs-type">String</span>, <span class="hljs-type">Double</span>&gt;, Tuple2&lt;<span class="hljs-type">String</span>, <span class="hljs-type">Double</span>&gt;, Tuple2&lt;<span class="hljs-type">String</span>, <span class="hljs-type">Double</span>&gt;&gt;() {
            @Override
            <span class="hljs-keyword">public</span> Tuple2&lt;<span class="hljs-type">String</span>, <span class="hljs-type">Double</span>&gt; <span class="hljs-keyword">join</span>(Tuple2&lt;<span class="hljs-type">String</span>, <span class="hljs-type">Double</span>&gt; record1, Tuple2&lt;<span class="hljs-type">String</span>, <span class="hljs-type">Double</span>&gt; record2) throws Exception {
                <span class="hljs-keyword">return</span> Tuple2.<span class="hljs-keyword">of</span>(record1.f0, record1.f1);
            }
        });
</code></pre>
<p>ä¸Šè¿°è°ƒç”¨é“¾è·¯ç±»çš„æµè½¬å¦‚ä¸‹ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f6d0539edba546b89aa521409a906a60~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Z2i5ZCRR29vZ2xl57yW56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767701672&amp;x-signature=VLzajX1b5lw864yFEqBbbXPs3qk%3D" alt="windowjoin" loading="lazy"/></p>
<p>åœ¨ WithWindow çš„ apply æ–¹æ³•ä¸­ï¼Œæ˜¯æ„å»ºäº†ä¸€ä¸ª coGroupedWindowedStreamï¼Œç„¶åè°ƒç”¨å®ƒçš„ apply æ–¹æ³•ã€‚</p>
<pre><code class="hljs language-scss" lang="scss">public &lt;T&gt; SingleOutputStreamOperator&lt;T&gt; <span class="hljs-built_in">apply</span>(
        JoinFunction&lt;T1, T2, T&gt; function, TypeInformation&lt;T&gt; resultType) {
    <span class="hljs-comment">// clean the closure</span>
    function = input1<span class="hljs-selector-class">.getExecutionEnvironment</span>()<span class="hljs-selector-class">.clean</span>(function);

    coGroupedWindowedStream =
            input1<span class="hljs-selector-class">.coGroup</span>(input2)
                    <span class="hljs-selector-class">.where</span>(keySelector1)
                    <span class="hljs-selector-class">.equalTo</span>(keySelector2)
                    <span class="hljs-selector-class">.window</span>(windowAssigner)
                    <span class="hljs-selector-class">.trigger</span>(trigger)
                    <span class="hljs-selector-class">.evictor</span>(evictor)
                    <span class="hljs-selector-class">.allowedLateness</span>(allowedLateness);

    return coGroupedWindowedStream<span class="hljs-selector-class">.apply</span>(new JoinCoGroupFunction&lt;&gt;(function), resultType);
}
</code></pre>
<p>è¿™é‡Œå¯ä»¥çœ‹å‡ºï¼ŒWindow Join çš„åº•å±‚æ˜¯è½¬æ¢æˆ coGroup è¿›è¡Œå¤„ç†çš„ã€‚</p>
<p>åœ¨ JoinCoGroupFunction ä¸­ï¼ŒcoGroup æ–¹æ³•å°±æ˜¯å¯¹ä¸¤ä¸ªæµè¿›è¡Œä¸¤å±‚éå†ï¼Œç„¶åå°†å…¶åº”ç”¨åˆ°æˆ‘ä»¬è‡ªå®šä¹‰çš„ JoinFunction ä¸Šã€‚</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title">JoinCoGroupFunction</span>&lt;<span class="hljs-title">T1</span>, <span class="hljs-title">T2</span>, <span class="hljs-title">T</span>&gt;
        <span class="hljs-title">extends</span> <span class="hljs-title">WrappingFunction</span>&lt;<span class="hljs-title">JoinFunction</span>&lt;<span class="hljs-title">T1</span>, <span class="hljs-title">T2</span>, <span class="hljs-title">T</span>&gt;&gt;
        <span class="hljs-title">implements</span> <span class="hljs-title">CoGroupFunction</span>&lt;<span class="hljs-title">T1</span>, <span class="hljs-title">T2</span>, <span class="hljs-title">T</span>&gt; {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> final <span class="hljs-built_in">long</span> serialVersionUID = <span class="hljs-number">1L</span>;

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">JoinCoGroupFunction</span>(<span class="hljs-params">JoinFunction&lt;T1, T2, T&gt; wrappedFunction</span>)</span> {
        super(wrappedFunction);
    }

    @Override
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">coGroup</span>(<span class="hljs-params">Iterable&lt;T1&gt; first, Iterable&lt;T2&gt; second, Collector&lt;T&gt; <span class="hljs-keyword">out</span></span>)
            throws Exception</span> {
        <span class="hljs-keyword">for</span> (T1 val1 : first) {
            <span class="hljs-keyword">for</span> (T2 val2 : second) {
                <span class="hljs-keyword">out</span>.collect(wrappedFunction.<span class="hljs-keyword">join</span>(val1, val2));
            }
        }
    }
}
</code></pre>
<h3 data-id="heading-2">CoGroup</h3>
<p>CoGroup çš„æ•´ä½“ç”¨æ³•å’Œæµç¨‹ä¸ Join éƒ½ç±»ä¼¼ï¼Œæˆ‘ä»¬å°±ä¸é€ä¸ªä»‹ç»äº†ã€‚æˆ‘ä»¬ç›´æ¥æ¥çœ‹ apply æ–¹æ³•ã€‚</p>
<pre><code class="hljs language-scss" lang="scss">public &lt;T&gt; SingleOutputStreamOperator&lt;T&gt; <span class="hljs-built_in">apply</span>(
        CoGroupFunction&lt;T1, T2, T&gt; function, TypeInformation&lt;T&gt; resultType) {
    <span class="hljs-comment">// clean the closure</span>
    function = input1<span class="hljs-selector-class">.getExecutionEnvironment</span>()<span class="hljs-selector-class">.clean</span>(function);

    UnionTypeInfo&lt;T1, T2&gt; unionType =
            new UnionTypeInfo&lt;&gt;(input1.getType(), input2<span class="hljs-selector-class">.getType</span>());
    UnionKeySelector&lt;T1, T2, KEY&gt; unionKeySelector =
            new UnionKeySelector&lt;&gt;(keySelector1, keySelector2);

    SingleOutputStreamOperator&lt;TaggedUnion&lt;T1, T2&gt;&gt; taggedInput1 =
            input1<span class="hljs-selector-class">.map</span>(new Input1Tagger&lt;T1, T2&gt;());
    taggedInput1<span class="hljs-selector-class">.getTransformation</span>()<span class="hljs-selector-class">.setParallelism</span>(input1.getParallelism(), false);
    taggedInput1<span class="hljs-selector-class">.returns</span>(unionType);

    SingleOutputStreamOperator&lt;TaggedUnion&lt;T1, T2&gt;&gt; taggedInput2 =
            input2<span class="hljs-selector-class">.map</span>(new Input2Tagger&lt;T1, T2&gt;());
    taggedInput2<span class="hljs-selector-class">.getTransformation</span>()<span class="hljs-selector-class">.setParallelism</span>(input2.getParallelism(), false);
    taggedInput2<span class="hljs-selector-class">.returns</span>(unionType);

    DataStream&lt;TaggedUnion&lt;T1, T2&gt;&gt; unionStream = taggedInput1<span class="hljs-selector-class">.union</span>(taggedInput2);

    <span class="hljs-comment">// we explicitly create the keyed stream to manually pass the key type information in</span>
    windowedStream =
            new KeyedStream&lt;TaggedUnion&lt;T1, T2&gt;, KEY&gt;(
                            unionStream, unionKeySelector, keyType)
                    <span class="hljs-selector-class">.window</span>(windowAssigner);

    if (trigger != null) {
        windowedStream<span class="hljs-selector-class">.trigger</span>(trigger);
    }
    if (evictor != null) {
        windowedStream<span class="hljs-selector-class">.evictor</span>(evictor);
    }
    if (allowedLateness != null) {
        windowedStream<span class="hljs-selector-class">.allowedLateness</span>(allowedLateness);
    }

    return windowedStream<span class="hljs-selector-class">.apply</span>(
            new CoGroupWindowFunction&lt;T1, T2, T, KEY, W&gt;(function), resultType);
}
</code></pre>
<p>åœ¨ apply æ–¹æ³•ä¸­ï¼Œå…ˆæŠŠä¸¤ä¸ªæµè¿›è¡Œåˆå¹¶ï¼Œç„¶ååˆ›å»ºäº† windowedStreamï¼Œå¹¶æŠŠçª—å£ç›¸å…³çš„å±æ€§è®¾ç½®å¥½ï¼Œæœ€åæ˜¯è°ƒç”¨ windowedStream çš„ apply æ–¹æ³•ã€‚</p>
<p>åœ¨è°ƒç”¨ <code>windowedStream.apply</code> æ–¹æ³•æ—¶ï¼Œåˆå°† function åŒ…è£…æˆäº† CoGroupWindowFunctionã€‚</p>
<pre><code class="hljs language-scala" lang="scala"><span class="hljs-keyword">private</span> static <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CoGroupWindowFunction&lt;T1</span>, <span class="hljs-title">T2</span>, <span class="hljs-title">T</span>, <span class="hljs-title">KEY</span>, <span class="hljs-title">W</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Window&gt;</span></span>
        <span class="hljs-keyword">extends</span> <span class="hljs-type">WrappingFunction</span>&lt;<span class="hljs-type">CoGroupFunction</span>&lt;<span class="hljs-type">T1</span>, <span class="hljs-type">T2</span>, <span class="hljs-type">T</span>&gt;&gt;
        implements <span class="hljs-type">WindowFunction</span>&lt;<span class="hljs-type">TaggedUnion</span>&lt;<span class="hljs-type">T1</span>, <span class="hljs-type">T2</span>&gt;, <span class="hljs-type">T</span>, <span class="hljs-type">KEY</span>, <span class="hljs-type">W</span>&gt; {

    <span class="hljs-keyword">private</span> static <span class="hljs-keyword">final</span> long serialVersionUID = <span class="hljs-number">1</span>L;

    public <span class="hljs-type">CoGroupWindowFunction</span>(<span class="hljs-type">CoGroupFunction</span>&lt;<span class="hljs-type">T1</span>, <span class="hljs-type">T2</span>, <span class="hljs-type">T</span>&gt; userFunction) {
        <span class="hljs-keyword">super</span>(userFunction);
    }

    <span class="hljs-meta">@Override</span>
    public void apply(<span class="hljs-type">KEY</span> key, <span class="hljs-type">W</span> window, <span class="hljs-type">Iterable</span>&lt;<span class="hljs-type">TaggedUnion</span>&lt;<span class="hljs-type">T1</span>, <span class="hljs-type">T2</span>&gt;&gt; values, <span class="hljs-type">Collector</span>&lt;<span class="hljs-type">T</span>&gt; out)
            <span class="hljs-keyword">throws</span> <span class="hljs-type">Exception</span> {

        <span class="hljs-type">List</span>&lt;<span class="hljs-type">T1</span>&gt; oneValues = <span class="hljs-keyword">new</span> <span class="hljs-type">ArrayList</span>&lt;&gt;();
        <span class="hljs-type">List</span>&lt;<span class="hljs-type">T2</span>&gt; twoValues = <span class="hljs-keyword">new</span> <span class="hljs-type">ArrayList</span>&lt;&gt;();

        <span class="hljs-keyword">for</span> (<span class="hljs-type">TaggedUnion</span>&lt;<span class="hljs-type">T1</span>, <span class="hljs-type">T2</span>&gt; <span class="hljs-keyword">val</span> : values) {
            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">val</span>.isOne()) {
                oneValues.add(<span class="hljs-keyword">val</span>.getOne());
            } <span class="hljs-keyword">else</span> {
                twoValues.add(<span class="hljs-keyword">val</span>.getTwo());
            }
        }
        wrappedFunction.coGroup(oneValues, twoValues, out);
    }
}
</code></pre>
<p>åœ¨ CoGroupWindowFunction çš„ apply æ–¹æ³•ä¸­æ˜¯å°†ä¸»é”®ä¸º key çš„æµåˆ†å¼€ä¸¤ä¸ªæµï¼Œå†å»è°ƒç”¨ JoinCoGroupFunction çš„ coGroup æ–¹æ³•ã€‚è¿™é‡Œçš„ values éƒ½æ˜¯ç›¸åŒçš„ keyï¼ŒåŸå› æ˜¯åœ¨ window ä¸­ç»´æŠ¤çš„ windowStateï¼Œå®ƒå†…éƒ¨æ˜¯ä¸€ä¸ª stateTableï¼Œçª—å£çš„ namespace å’Œ key å…±åŒç»´æŠ¤ä¸€ä¸ª stateï¼Œå½“çª—å£è§¦å‘æ—¶ï¼Œå°±ä¼šå¯¹ç›¸åŒ key çš„æ•°æ®è°ƒç”¨ apply æ–¹æ³•ã€‚</p>
<h3 data-id="heading-3">Interval Join</h3>
<p>æ¢³ç†å®Œäº† Window Join å’Œ CoGroup ä¹‹åï¼Œæˆ‘ä»¬å†æ¥ç€çœ‹ Interval Joinã€‚è¿˜æ˜¯å…ˆæ¥å›é¡¾ä¸€ä¸‹ç”¨æ³•ã€‚</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-type">DataStream</span>&lt;<span class="hljs-type">Tuple2</span>&lt;<span class="hljs-type">String</span>, <span class="hljs-type">Double</span>&gt;&gt; intervalJoinResult <span class="hljs-operator">=</span> source1.keyBy(record -&gt; record.f0)
        .intervalJoin(source2.keyBy(record -&gt; record.f0))
        .between(<span class="hljs-type">Time</span>.seconds(<span class="hljs-operator">-</span><span class="hljs-number">2</span>), <span class="hljs-type">Time</span>.seconds(<span class="hljs-number">2</span>))
        .process(new <span class="hljs-type">ProcessJoinFunction</span>&lt;<span class="hljs-type">Tuple2</span>&lt;<span class="hljs-type">String</span>, <span class="hljs-type">Double</span>&gt;, <span class="hljs-type">Tuple2</span>&lt;<span class="hljs-type">String</span>, <span class="hljs-type">Double</span>&gt;, <span class="hljs-type">Tuple2</span>&lt;<span class="hljs-type">String</span>, <span class="hljs-type">Double</span>&gt;&gt;() {
            <span class="hljs-meta">@Override</span>
            <span class="hljs-keyword">public</span> void processElement(<span class="hljs-type">Tuple2</span>&lt;<span class="hljs-type">String</span>, <span class="hljs-type">Double</span>&gt; record1, <span class="hljs-type">Tuple2</span>&lt;<span class="hljs-type">String</span>, <span class="hljs-type">Double</span>&gt; record2, <span class="hljs-type">ProcessJoinFunction</span>&lt;<span class="hljs-type">Tuple2</span>&lt;<span class="hljs-type">String</span>, <span class="hljs-type">Double</span>&gt;, <span class="hljs-type">Tuple2</span>&lt;<span class="hljs-type">String</span>, <span class="hljs-type">Double</span>&gt;, <span class="hljs-type">Tuple2</span>&lt;<span class="hljs-type">String</span>, <span class="hljs-type">Double</span>&gt;&gt;.<span class="hljs-type">Context</span> context, <span class="hljs-type">Collector</span>&lt;<span class="hljs-type">Tuple2</span>&lt;<span class="hljs-type">String</span>, <span class="hljs-type">Double</span>&gt;&gt; out) <span class="hljs-keyword">throws</span> <span class="hljs-type">Exception</span> {
                out.collect(<span class="hljs-type">Tuple2</span>.of(record1.f0, record1.f1 <span class="hljs-operator">+</span> record2.f1));
            }
        });
</code></pre>
<p>é€šè¿‡ç”¨æ³•å¯ä»¥çœ‹å‡ºï¼Œinterval join ä¼ å…¥çš„å¯¹è±¡æ˜¯ä¸¤ä¸ª KeyedStreamï¼Œæ¥ç€ä½¿ç”¨ between æ–¹æ³•å®šä¹‰ interval join çš„ä¸Šä¸‹è¾¹ç•Œï¼Œæœ€åè°ƒç”¨ process æ–¹æ³•æ‰§è¡Œè®¡ç®—é€»è¾‘ã€‚</p>
<p>åœ¨è°ƒç”¨è¿‡ç¨‹ä¸­ï¼Œç±»å‹çš„è½¬æ¢å¦‚ä¸‹å›¾ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/33909c4a743343abb3df807911a74101~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Z2i5ZCRR29vZ2xl57yW56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767701672&amp;x-signature=m4nBk%2BzddJx%2FAJxqMv0E9SroyiY%3D" alt="intervaljoin" loading="lazy"/></p>
<p>æˆ‘ä»¬ä¸»è¦å…³æ³¨ process çš„é€»è¾‘ã€‚</p>
<pre><code class="hljs language-scss" lang="scss">public &lt;OUT&gt; SingleOutputStreamOperator&lt;OUT&gt; <span class="hljs-built_in">process</span>(
        ProcessJoinFunction&lt;IN1, IN2, OUT&gt; processJoinFunction,
        TypeInformation&lt;OUT&gt; outputType) {
    Preconditions<span class="hljs-selector-class">.checkNotNull</span>(processJoinFunction);
    Preconditions<span class="hljs-selector-class">.checkNotNull</span>(outputType);

    final ProcessJoinFunction&lt;IN1, IN2, OUT&gt; cleanedUdf =
            <span class="hljs-attribute">left</span><span class="hljs-selector-class">.getExecutionEnvironment</span>()<span class="hljs-selector-class">.clean</span>(processJoinFunction);

    if (isEnableAsyncState) {
        final AsyncIntervalJoinOperator&lt;KEY, IN1, IN2, OUT&gt; operator =
                new AsyncIntervalJoinOperator&lt;&gt;(
                        lowerBound,
                        upperBound,
                        lowerBoundInclusive,
                        upperBoundInclusive,
                        leftLateDataOutputTag,
                        rightLateDataOutputTag,
                        left.getType()
                                <span class="hljs-selector-class">.createSerializer</span>(
                                        left.getExecutionConfig()<span class="hljs-selector-class">.getSerializerConfig</span>()),
                        <span class="hljs-attribute">right</span><span class="hljs-selector-class">.getType</span>()
                                <span class="hljs-selector-class">.createSerializer</span>(
                                        right.getExecutionConfig()<span class="hljs-selector-class">.getSerializerConfig</span>()),
                        cleanedUdf);

        return <span class="hljs-attribute">left</span><span class="hljs-selector-class">.connect</span>(right)
                <span class="hljs-selector-class">.keyBy</span>(keySelector1, keySelector2)
                <span class="hljs-selector-class">.transform</span>("Interval Join [Async]", outputType, operator);
    } else {
        final IntervalJoinOperator&lt;KEY, IN1, IN2, OUT&gt; operator =
                new IntervalJoinOperator&lt;&gt;(
                        lowerBound,
                        upperBound,
                        lowerBoundInclusive,
                        upperBoundInclusive,
                        leftLateDataOutputTag,
                        rightLateDataOutputTag,
                        left.getType()
                                <span class="hljs-selector-class">.createSerializer</span>(
                                        left.getExecutionConfig()<span class="hljs-selector-class">.getSerializerConfig</span>()),
                        <span class="hljs-attribute">right</span><span class="hljs-selector-class">.getType</span>()
                                <span class="hljs-selector-class">.createSerializer</span>(
                                        right.getExecutionConfig()<span class="hljs-selector-class">.getSerializerConfig</span>()),
                        cleanedUdf);

        return <span class="hljs-attribute">left</span><span class="hljs-selector-class">.connect</span>(right)
                <span class="hljs-selector-class">.keyBy</span>(keySelector1, keySelector2)
                <span class="hljs-selector-class">.transform</span>("Interval Join", outputType, operator);
    }
}
</code></pre>
<p>Interval join æ˜¯åŸºäº ConnectedStream å®ç°çš„ï¼ŒConnectedStream æä¾›äº†æ›´åŠ é€šç”¨çš„åŒæµæ“ä½œï¼Œå®ƒå°†ä¸¤ä¸ªæµç»„åˆæˆä¸€ä¸ª TwoInputTransformationï¼Œç„¶ååŠ å…¥æ‰§è¡Œå›¾ä¸­ã€‚</p>
<p>å…·ä½“çš„ Operator æ˜¯ IntervalJoinOperator æˆ– AsyncIntervalJoinOperatorï¼Œå®ƒä»¬éƒ½æ˜¯ TwoInputStreamOperator çš„å®ç°ç±»ï¼Œæä¾› <code>processElement1</code> å’Œ <code>processElement2</code> ä¸¤ä¸ªæ–¹æ³•åˆ†åˆ«å¤„ç†ä¸¤ä¸ªè¾“å…¥æºçš„æ•°æ®ï¼Œæœ€ç»ˆéƒ½è°ƒç”¨çš„æ˜¯ processElementã€‚</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">private</span> <span class="hljs-operator">&lt;</span><span class="hljs-type">THIS</span>, <span class="hljs-type">OTHER</span><span class="hljs-operator">&gt;</span> void processElement(
        <span class="hljs-keyword">final</span> <span class="hljs-type">StreamRecord</span>&lt;<span class="hljs-type">THIS</span>&gt; record,
        <span class="hljs-keyword">final</span> <span class="hljs-type">MapState</span>&lt;<span class="hljs-type">Long</span>, <span class="hljs-type">List</span>&lt;<span class="hljs-type">IntervalJoinOperator</span>.<span class="hljs-type">BufferEntry</span>&lt;<span class="hljs-type">THIS</span>&gt;&gt;&gt; ourBuffer,
        <span class="hljs-keyword">final</span> <span class="hljs-type">MapState</span>&lt;<span class="hljs-type">Long</span>, <span class="hljs-type">List</span>&lt;<span class="hljs-type">IntervalJoinOperator</span>.<span class="hljs-type">BufferEntry</span>&lt;<span class="hljs-type">OTHER</span>&gt;&gt;&gt; otherBuffer,
        <span class="hljs-keyword">final</span> long relativeLowerBound,
        <span class="hljs-keyword">final</span> long relativeUpperBound,
        <span class="hljs-keyword">final</span> boolean isLeft)
        <span class="hljs-keyword">throws</span> <span class="hljs-type">Exception</span> {

    <span class="hljs-keyword">final</span> <span class="hljs-type">THIS</span> ourValue <span class="hljs-operator">=</span> record.getValue();
    <span class="hljs-keyword">final</span> long ourTimestamp <span class="hljs-operator">=</span> record.getTimestamp();

    <span class="hljs-keyword">if</span> (ourTimestamp <span class="hljs-operator">==</span> <span class="hljs-type">Long</span>.<span class="hljs-type">MIN_VALUE</span>) {
        <span class="hljs-keyword">throw</span> new <span class="hljs-type">FlinkException</span>(
                <span class="hljs-string">"Long.MIN_VALUE timestamp: Elements used in "</span>
                        <span class="hljs-operator">+</span> <span class="hljs-string">"interval stream joins need to have timestamps meaningful timestamps."</span>);
    }

    <span class="hljs-keyword">if</span> (isLate(ourTimestamp)) {
        sideOutput(ourValue, ourTimestamp, isLeft);
        <span class="hljs-keyword">return</span>;
    }

    addToBuffer(ourBuffer, ourValue, ourTimestamp);

    <span class="hljs-keyword">for</span> (<span class="hljs-type">Map</span>.<span class="hljs-type">Entry</span>&lt;<span class="hljs-type">Long</span>, <span class="hljs-type">List</span>&lt;<span class="hljs-type">BufferEntry</span>&lt;<span class="hljs-type">OTHER</span>&gt;&gt;&gt; bucket : otherBuffer.entries()) {
        <span class="hljs-keyword">final</span> long timestamp <span class="hljs-operator">=</span> bucket.getKey();

        <span class="hljs-keyword">if</span> (timestamp <span class="hljs-operator">&lt;</span> ourTimestamp <span class="hljs-operator">+</span> relativeLowerBound
                <span class="hljs-operator">||</span> timestamp <span class="hljs-operator">&gt;</span> ourTimestamp <span class="hljs-operator">+</span> relativeUpperBound) {
            <span class="hljs-keyword">continue</span>;
        }

        <span class="hljs-keyword">for</span> (<span class="hljs-type">BufferEntry</span>&lt;<span class="hljs-type">OTHER</span>&gt; entry : bucket.getValue()) {
            <span class="hljs-keyword">if</span> (isLeft) {
                collect((<span class="hljs-type">T1</span>) ourValue, (<span class="hljs-type">T2</span>) entry.element, ourTimestamp, timestamp);
            } <span class="hljs-keyword">else</span> {
                collect((<span class="hljs-type">T1</span>) entry.element, (<span class="hljs-type">T2</span>) ourValue, timestamp, ourTimestamp);
            }
        }
    }

    long cleanupTime <span class="hljs-operator">=</span>
            (relativeUpperBound <span class="hljs-operator">&gt;</span> 0L) <span class="hljs-operator">?</span> ourTimestamp <span class="hljs-operator">+</span> relativeUpperBound : ourTimestamp;
    <span class="hljs-keyword">if</span> (isLeft) {
        internalTimerService.registerEventTimeTimer(<span class="hljs-type">CLEANUP_NAMESPACE_LEFT</span>, cleanupTime);
    } <span class="hljs-keyword">else</span> {
        internalTimerService.registerEventTimeTimer(<span class="hljs-type">CLEANUP_NAMESPACE_RIGHT</span>, cleanupTime);
    }
}
</code></pre>
<p>åœ¨ IntervalJoinOperator ä¸­ç»´æŠ¤äº†ä¸¤ä¸ª MapStateï¼Œæ¯ä¸ªæ¶ˆæ¯è¿›æ¥çš„æ—¶å€™ï¼Œéƒ½ä¼šåŠ å…¥åˆ° MapState ä¸­ï¼Œkey æ˜¯ timestampï¼Œvalue æ˜¯ä¸€ä¸ªå…ƒç´ çš„åˆ—è¡¨ã€‚ç„¶åéå†å¦ä¸€ä¸ª MapStateï¼Œå¾—åˆ°ç¬¦åˆæ¡ä»¶çš„æ•°æ®ã€‚æœ€åæ˜¯ä¸ºæ¯æ¡æ•°æ®æ³¨å†Œä¸€ä¸ªå®šæ—¶å™¨ï¼Œå½“æ—¶é—´è¶…è¿‡æœ‰æ•ˆèŒƒå›´åï¼Œä¼šä» MapState ä¸­æ¸…é™¤è¿™ä¸ªæ—¶é—´æˆ³çš„æ•°æ®ã€‚</p>
<h3 data-id="heading-4">æ€»ç»“</h3>
<p>æœ¬æ–‡æˆ‘ä»¬æ¢³ç†äº† Flink çš„ä¸‰ç§åŒæµæ“ä½œçš„æºç ï¼Œæˆ‘ä»¬äº†è§£åˆ° Window Join åº•å±‚æ˜¯é€šè¿‡ CoGroup å®ç°çš„ã€‚CoGroup æœ¬èº«æ˜¯å°†ä¸¤ä¸ªæµåˆå¹¶æˆ WindowedStream å¹¶ä¾èµ–äº WindowState è¿›è¡Œæ•°æ® joinã€‚æœ€å Interval Join æ˜¯é€šè¿‡ ConnectedStreams å®ç°çš„ï¼Œå†…éƒ¨çš„ IntervalJoinOperator ä¼šç»´æŠ¤ä¸¤ä¸ª MapStateï¼Œé€šè¿‡ MapState è¿›è¡Œæ•°æ®å…³è”ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä»¥æµè§ˆå™¨å¤šè¿›ç¨‹çš„è§’åº¦è§£æ„é¡µé¢æ¸²æŸ“çš„æ•´ä¸ªæµç¨‹]]></title>    <link>https://juejin.cn/post/7589509638354812955</link>    <guid>https://juejin.cn/post/7589509638354812955</guid>    <pubDate>2025-12-30T12:45:42.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589509638354812955" data-draft-id="7589454621719052338" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä»¥æµè§ˆå™¨å¤šè¿›ç¨‹çš„è§’åº¦è§£æ„é¡µé¢æ¸²æŸ“çš„æ•´ä¸ªæµç¨‹"/> <meta itemprop="keywords" content="å‰ç«¯,é¢è¯•,æµè§ˆå™¨"/> <meta itemprop="datePublished" content="2025-12-30T12:45:42.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤©å¤©æ‰­ç "/> <meta itemprop="url" content="https://juejin.cn/user/3349589831715801"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä»¥æµè§ˆå™¨å¤šè¿›ç¨‹çš„è§’åº¦è§£æ„é¡µé¢æ¸²æŸ“çš„æ•´ä¸ªæµç¨‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3349589831715801/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤©å¤©æ‰­ç 
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-30T12:45:42.000Z" title="Tue Dec 30 2025 12:45:42 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»22åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€å‰è¨€</h2>
<p><strong>é¡µé¢åœ¨æµè§ˆå™¨ä¸Šçš„æ¸²æŸ“å¹¶ä¸æ˜¯ä¸€ä¸ªä¸€æ¡çº¿çš„è¿‡ç¨‹ï¼Œè€Œæ˜¯å¤šè¿›ç¨‹æ¶æ„ä¸‹ååŒçš„ç»“æœï¼Œæœ¬æ–‡ä»æµè§ˆå™¨å¤šè¿›ç¨‹çš„è§’åº¦è§£æ„ä»urlè¾“å…¥åˆ°é¡µé¢æ¸²æŸ“çš„æ•´ä¸ªæµç¨‹çš„è§£æã€‚</strong></p>
<h2 data-id="heading-1">äºŒã€æµè§ˆå™¨çš„å¤šè¿›ç¨‹æ¶æ„</h2>
<h3 data-id="heading-2">1.è¿›ç¨‹ä¸çº¿ç¨‹ä¹‹é—´çš„å…³ç³»</h3>
<p>åœ¨æ“ä½œç³»ç»Ÿä¸­ï¼Œ<strong>è¿›ç¨‹æ˜¯èµ„æºåˆ†é…çš„æœ€å°å•ä½ï¼Œè€Œçº¿ç¨‹</strong>æ˜¯ CPU è°ƒåº¦çš„æœ€å°å•ä½ã€‚</p>
<p>ä¸ºäº†æ›´å¥½åœ°ç†è§£æµè§ˆå™¨æ¶æ„ï¼Œæˆ‘ä»¬å¯ä»¥ä»ä»¥ä¸‹ä¸‰ä¸ªç»´åº¦æ¥æ‹†è§£å®ƒä»¬çš„å…³ç³»ï¼š</p>
<h4 data-id="heading-3">A. åŒ…å«ä¸å½’å±ï¼šå·¥å‚ä¸å·¥äºº</h4>
<p>è¿›ç¨‹æ˜¯å®¹å™¨ï¼šä¸€ä¸ªè¿›ç¨‹å¥½æ¯”ä¸€ä¸ªå·¥å‚è½¦é—´ï¼Œå®ƒæ‹¥æœ‰<strong>ç‹¬ç«‹çš„å†…å­˜ç©ºé—´ã€æ•°æ®é›†å’Œç³»ç»Ÿèµ„æº</strong>ï¼ˆå¦‚ç½‘ç»œå¥æŸ„ã€æ–‡ä»¶æè¿°ç¬¦ï¼‰ã€‚</p>
<p>çº¿ç¨‹æ˜¯æ‰§è¡Œè€…ï¼šçº¿ç¨‹æ˜¯è½¦é—´é‡Œçš„å·¥äººã€‚<strong>ä¸€ä¸ªè¿›ç¨‹å¯ä»¥åŒ…å«å¤šä¸ªçº¿ç¨‹ï¼Œå®ƒä»¬ååŒå®Œæˆå¤æ‚çš„ä»»åŠ¡</strong>ã€‚</p>
<h4 data-id="heading-4">B. å…±äº«ä¸éš”ç¦»ï¼šå†…å­˜çš„è¾¹ç•Œ</h4>
<p>è¿›ç¨‹é—´ç›¸äº’éš”ç¦»ï¼šä¸ºäº†ä¿è¯ç³»ç»Ÿçš„ç¨³å®šæ€§ï¼Œ<strong>è¿›ç¨‹ä¸è¿›ç¨‹ä¹‹é—´çš„å†…å­˜æ˜¯å®Œå…¨éš”ç¦»çš„</strong>ã€‚<strong>å¦‚æœä¸€ä¸ªæ¸²æŸ“è¿›ç¨‹ï¼ˆTabé¡µï¼‰å› ä¸ºä»£ç å´©æºƒäº†ï¼Œå®ƒä¸ä¼šå½±å“åˆ°æµè§ˆå™¨ä¸»è¿›ç¨‹æˆ–å…¶ä»– Tab é¡µ</strong>ã€‚</p>
<p>çº¿ç¨‹é—´èµ„æºå…±äº«ï¼š<strong>åŒä¸€ä¸ªè¿›ç¨‹å†…çš„æ‰€æœ‰çº¿ç¨‹éƒ½å¯ä»¥è®¿é—®è¯¥è¿›ç¨‹çš„å†…å­˜ç©ºé—´</strong>ã€‚è¿™æ„å‘³ç€ <strong>JS å¼•æ“çº¿ç¨‹å¯ä»¥è½»æ¾åœ°è¯»å–åˆ°ç”±ç½‘ç»œçº¿ç¨‹ä¸‹è½½å¹¶å­˜æ”¾åœ¨å†…å­˜ä¸­çš„æ•°æ®</strong>ã€‚</p>
<h4 data-id="heading-5">C. ååŒä¸ç«äº‰ï¼šäº’æ–¥é”çš„ç”±æ¥ â˜…â˜…â˜…</h4>
<p>è¿™æ˜¯ç†è§£â€œä¸ºä»€ä¹ˆ JS ä¼šé˜»å¡æ¸²æŸ“â€çš„å…³é”®ç‚¹ï¼š</p>
<p><strong>åœ¨åŒä¸€ä¸ªæ¸²æŸ“è¿›ç¨‹å†…ï¼ŒGUI æ¸²æŸ“çº¿ç¨‹å’Œ JS å¼•æ“çº¿ç¨‹æ˜¯äº’æ–¥çš„ã€‚</strong></p>
<p><strong>åŸå› ï¼šå› ä¸º JavaScript è„šæœ¬å…·æœ‰ä¿®æ”¹ DOM çš„èƒ½åŠ›ã€‚å¦‚æœä¸¤è€…åŒæ—¶è¿è¡Œï¼ŒGUI çº¿ç¨‹æ­£åœ¨ç»˜åˆ¶ä¸€ä¸ª DOM èŠ‚ç‚¹ï¼Œè€Œ JS çº¿ç¨‹åŒæ—¶æŠŠå®ƒåˆ é™¤äº†ï¼Œå°±ä¼šå¯¼è‡´æ¸²æŸ“ç»“æœä¸å¯é¢„æœŸã€‚å› æ­¤ï¼Œæµè§ˆå™¨è§„å®šï¼šå½“ JS å¼•æ“å·¥ä½œæ—¶ï¼ŒGUI æ¸²æŸ“çº¿ç¨‹ä¼šè¢«æŒ‚èµ·ã€‚</strong></p>
<h3 data-id="heading-6">2. ä¸ºä»€ä¹ˆæµè§ˆå™¨è¦é‡‡ç”¨â€œå¤šè¿›ç¨‹â€è€Œéâ€œå•è¿›ç¨‹å¤šçº¿ç¨‹â€ï¼Ÿ</h3>
<p>åœ¨æ—©æœŸçš„æµè§ˆå™¨ä¸­ï¼Œæ‰€æœ‰åŠŸèƒ½éƒ½è¿è¡Œåœ¨ä¸€ä¸ªè¿›ç¨‹é‡Œã€‚ç°ä»£æµè§ˆå™¨æ¼”è¿›ä¸ºå¤šè¿›ç¨‹æ¶æ„ï¼Œä¸»è¦æ˜¯ä¸ºäº†è§£å†³ä¸‰ä¸ªæ ¸å¿ƒç—›ç‚¹ï¼š</p>
<p>ç¨³å®šæ€§ï¼š åœ¨å•è¿›ç¨‹ä¸‹ï¼Œä»»ä½•ä¸€ä¸ªçº¿ç¨‹çš„å´©æºƒï¼ˆå¦‚ Flash æ’ä»¶å¡æ­»æˆ–å¤æ‚çš„è„šæœ¬æ­»å¾ªç¯ï¼‰éƒ½ä¼šå¯¼è‡´æ•´ä¸ªæµè§ˆå™¨ç˜«ç—ªã€‚å¤šè¿›ç¨‹æ¶æ„ä¸‹ï¼Œ<strong>â€œä¸€ä¸ª Tab ä¸€ä¸ªè¿›ç¨‹â€</strong> å®ç°äº†æ•…éšœéš”ç¦»ã€‚</p>
<p>å®‰å…¨æ€§ï¼š æµè§ˆå™¨é€šè¿‡<strong>æ²™ç®±</strong> æœºåˆ¶å°†æ¸²æŸ“è¿›ç¨‹é”èµ·æ¥ã€‚<strong>ç”±äºæ¸²æŸ“è¿›ç¨‹è¿è¡Œçš„æ˜¯ä¸å—ä¿¡ä»»çš„ç¬¬ä¸‰æ–¹è„šæœ¬ï¼Œæ²™ç®±è®©å®ƒæ— æ³•ç›´æ¥è¯»å†™æœ¬åœ°æ–‡ä»¶æˆ–è°ƒç”¨ç³»ç»Ÿ API</strong>ã€‚æ‰€æœ‰çš„æ•æ„Ÿæ“ä½œå¿…é¡»é€šè¿‡ IPCï¼ˆè¿›ç¨‹é—´é€šä¿¡ï¼‰ å‘ŠçŸ¥æµè§ˆå™¨ä¸»è¿›ç¨‹ï¼Œç”±ä¸»è¿›ç¨‹è¿›è¡Œæƒé™å®¡æŸ¥åä»£ä¸ºæ‰§è¡Œã€‚</p>
<p>æµç•…æ€§ï¼š <strong>å¤šè¿›ç¨‹å¯ä»¥æ›´å……åˆ†åœ°åˆ©ç”¨å¤šæ ¸ CPU çš„å¹¶è¡Œè®¡ç®—èƒ½åŠ›</strong>ã€‚åŒæ—¶ï¼ŒæŸäº›è€—æ—¶çš„æ“ä½œï¼ˆå¦‚ç½‘ç»œä¸‹è½½ã€æ’ä»¶è¿è¡Œï¼‰è¢«æŠ½ç¦»åˆ°ç‹¬ç«‹è¿›ç¨‹ä¸­ï¼Œ<strong>ä¸ä¼šå ç”¨æ¸²æŸ“è¿›ç¨‹çš„ä¸»çº¿ç¨‹</strong>ã€‚</p>
<h3 data-id="heading-7">3.æµè§ˆå™¨çš„ä¸»è¦è¿›ç¨‹åŠå…¶è¿›ç¨‹ä¸‹çš„çº¿ç¨‹ï¼ˆ4 ä¸ªæ ¸å¿ƒè¿›ç¨‹ å’Œ 2 ä¸ªè¾…åŠ©/åŠ¨æ€è¿›ç¨‹ï¼‰</h3>
<h4 data-id="heading-8">â‘  æµè§ˆå™¨ä¸»è¿›ç¨‹</h4>
<p><strong>å®ƒæ˜¯æµè§ˆå™¨çš„æ ¸å¿ƒï¼Œä¹Ÿæ˜¯æ‰€æœ‰è¿›ç¨‹çš„çˆ¶è¿›ç¨‹ã€‚</strong></p>
<p><strong>èŒè´£ï¼š</strong></p>
<p>ç•Œé¢æ˜¾ç¤ºï¼šè´Ÿè´£<strong>åœ°å€æ ã€å‰è¿›åé€€æŒ‰é’®ã€ä¹¦ç­¾æ </strong>ç­‰æµè§ˆå™¨â€œå¤–å£³â€çš„ UIã€‚</p>
<p>ç”¨æˆ·äº¤äº’ï¼š<strong>ç›‘å¬é¼ æ ‡ç‚¹å‡»ã€é”®ç›˜è¾“å…¥</strong>ã€‚</p>
<p>è¿›ç¨‹ç®¡ç†ï¼šè´Ÿè´£<strong>åˆ›å»ºã€é”€æ¯å’Œåè°ƒå…¶ä»–å­è¿›ç¨‹</strong>ã€‚</p>
<p>å­˜å‚¨åŠŸèƒ½ï¼š<strong>è´Ÿè´£ç®¡ç† Cookieã€æœ¬åœ°å­˜å‚¨ï¼ˆLocalStorageï¼‰ç­‰ç£ç›˜è¯»å†™</strong>ã€‚</p>
<p><strong>æ ¸å¿ƒçº¿ç¨‹ï¼š</strong></p>
<ul>
<li><strong>UI çº¿ç¨‹</strong>ï¼šè´Ÿè´£ç»˜åˆ¶æµè§ˆå™¨å¤–å£³ï¼ˆåœ°å€æ ã€ä¹¦ç­¾æ ã€çª—å£æ§åˆ¶æŒ‰é’®ï¼‰ã€‚</li>
<li><strong>I/O çº¿ç¨‹</strong>ï¼šè´Ÿè´£ä¸å…¶ä»–è¿›ç¨‹è¿›è¡Œ IPC é€šä¿¡ã€‚ï¼ˆè¿›ç¨‹ç®¡ç†ï¼‰</li>
</ul>
<p><strong>å®ƒè´Ÿè´£ç®¡ç†å­è¿›ç¨‹ã€‚å½“ä½ ç‚¹å‡»å…³é—­æŒ‰é’®ï¼Œæ˜¯ UI çº¿ç¨‹æ•æ‰åˆ°ä¿¡å·ï¼Œé€šçŸ¥æµè§ˆå™¨è¿›ç¨‹å»é”€æ¯å¯¹åº”çš„æ¸²æŸ“è¿›ç¨‹</strong>ã€‚</p>
<h4 data-id="heading-9">â‘¡ ç½‘ç»œè¿›ç¨‹</h4>
<p><strong>åŸæœ¬æ˜¯æµè§ˆå™¨ä¸»è¿›ç¨‹ä¸­çš„ä¸€ä¸ªçº¿ç¨‹ï¼Œä¸ºäº†æå‡ç¨³å®šæ€§å’Œå®‰å…¨æ€§ï¼Œç°ä»£ Chrome å°†å…¶ç‹¬ç«‹ä¸ºè¿›ç¨‹ï¼Œä¸“é—¨è´Ÿè´£å¤„ç†ä¸å¤–éƒ¨ä¸–ç•Œçš„èµ„æºäº¤æ¢ã€‚</strong></p>
<p><strong>èŒè´£ï¼š</strong></p>
<p>èµ„æºåŠ è½½ï¼šè´Ÿè´£<strong>å‘èµ·æ‰€æœ‰çš„ç½‘ç»œè¯·æ±‚</strong>ï¼ˆHTTP/HTTPSï¼‰ï¼Œå¹¶<strong>æ¥æ”¶æœåŠ¡å™¨è¿”å›çš„æ•°æ®</strong>ã€‚</p>
<p>åè®®è§£æï¼š<strong>è§£æ HTTP å“åº”å¤´ã€çŠ¶æ€ç ï¼Œå¤„ç† 301/302 é‡å®šå‘</strong>ã€‚</p>
<p>DNS è§£æï¼š<strong>å°†åŸŸåæ˜ å°„ä¸º IP åœ°å€</strong>ã€‚</p>
<p>ç¼“å­˜ç®¡ç†ï¼šæ ¹æ® HTTP å¤´éƒ¨ä¿¡æ¯ï¼ˆå¦‚ Cache-Controlï¼‰<strong>åˆ¤æ–­å¹¶ç®¡ç†ç£ç›˜/å†…å­˜ä¸­çš„ç½‘ç»œèµ„æºç¼“å­˜</strong>ã€‚</p>
<p>å®‰å…¨æ ¡éªŒï¼š<strong>æ‹¦æˆªæ¶æ„ URL è®¿é—®</strong>ï¼ˆå¦‚ Safe Browsing å®‰å…¨æ£€æŸ¥ï¼‰ã€‚</p>
<p>Cookie å¤„ç†ï¼šè´Ÿè´£ HTTP å“åº”ä¸­ Set-Cookie çš„è§£æï¼Œä»¥åŠ<strong>è¯·æ±‚æ—¶ Cookie å­—æ®µçš„è‡ªåŠ¨æ³¨å…¥</strong>ã€‚</p>
<p><strong>æ ¸å¿ƒçº¿ç¨‹ï¼š</strong></p>
<p><strong>ç½‘ç»œåè®®æ ˆçº¿ç¨‹</strong>ï¼šè¿™æ˜¯æœ€å¿™ç¢Œçš„â€œå·¥äººâ€ï¼Œè´Ÿè´£å¤„ç† TCP æ¡æ‰‹ã€TLS åŠ å¯†è§£å¯†ã€ä»¥åŠ HTTP/1.1ã€H2ã€H3 åè®®çš„å¤„ç†ã€‚</p>
<p><strong>DNS è§£æçº¿ç¨‹</strong>ï¼šä¸“é—¨è´Ÿè´£å¯»æ‰¾åŸŸåèƒŒåçš„ IP åœ°å€ï¼Œå¹¶ç»´æŠ¤ DNS ç¼“å­˜ã€‚</p>
<p><strong>Socket ç®¡ç†çº¿ç¨‹</strong>ï¼šç®¡ç†ä¸ä¸åŒæœåŠ¡å™¨ä¹‹é—´çš„é•¿è¿æ¥ï¼ˆConnection Poolï¼‰ã€‚</p>
<h4 data-id="heading-10">â‘¢ æ¸²æŸ“è¿›ç¨‹</h4>
<p><strong>è¿™æ˜¯å‰ç«¯ä»£ç çœŸæ­£è¿è¡Œçš„â€œè½¦é—´â€ï¼Œä¹Ÿæ˜¯æµè§ˆå™¨å®‰å…¨æœºåˆ¶çš„æ ¸å¿ƒã€‚æ¯ä¸ª Tab æ ‡ç­¾é¡µé€šå¸¸æ‹¥æœ‰ä¸€ä¸ªç‹¬ç«‹çš„æ¸²æŸ“è¿›ç¨‹ï¼Œå®ƒè¿è¡Œåœ¨â€œæ²™ç®±â€ä¸­ï¼Œæ— æ³•ç›´æ¥è®¿é—®ç³»ç»Ÿèµ„æºã€‚</strong></p>
<p><strong>æ ¸å¿ƒèŒè´£ï¼š</strong></p>
<p>è§£æä¸æ„å»ºï¼š<strong>å°† HTMLã€CSS å­—èŠ‚æµè½¬åŒ–ä¸ºæµè§ˆå™¨èƒ½ç†è§£çš„ DOM æ ‘å’Œ CSSOM æ ‘</strong>ã€‚</p>
<p>è„šæœ¬æ‰§è¡Œï¼š<strong>è¿è¡Œ JavaScript ä»£ç ï¼Œå¤„ç†ç”¨æˆ·äº¤äº’é€»è¾‘</strong>ã€‚</p>
<p>å¸ƒå±€ä¸ç»˜åˆ¶ï¼š<strong>è®¡ç®—å…ƒç´ çš„å¤§å°ä½ç½®ï¼Œå¹¶ç”Ÿæˆæœ€ç»ˆçš„åƒç´ å›¾åƒä¼ ç»™ GPU è¿›ç¨‹</strong>ã€‚</p>
<p><strong>äº”å¤§æ ¸å¿ƒçº¿ç¨‹ï¼š</strong></p>
<p><strong>A.GUI æ¸²æŸ“çº¿ç¨‹</strong></p>
<p>èŒè´£ï¼šè´Ÿè´£è§£æ HTMLã€CSSï¼Œæ„å»º DOM æ ‘ã€CSSOM æ ‘ã€å¸ƒå±€æ ‘å’Œç»˜åˆ¶ã€‚</p>
<p>ç‰¹ç‚¹ï¼š<strong>å½“ç•Œé¢éœ€è¦é‡ç»˜ï¼ˆRepaintï¼‰æˆ–ç”±äºæŸäº›æ“ä½œå¼•å‘å›æµï¼ˆReflowï¼‰æ—¶ï¼Œè¯¥çº¿ç¨‹å°±ä¼šæ‰§è¡Œ</strong>ã€‚</p>
<p><strong>B.JS å¼•æ“çº¿ç¨‹</strong></p>
<p>èŒè´£ï¼š<strong>è´Ÿè´£è§£æ JavaScript è„šæœ¬ï¼Œè¿è¡Œä»£ç </strong>ã€‚</p>
<p><strong>æ ¸å¿ƒç—›ç‚¹ï¼ˆäº’æ–¥æœºåˆ¶ï¼‰ï¼šJS å¼•æ“çº¿ç¨‹ä¸ GUI æ¸²æŸ“çº¿ç¨‹æ˜¯äº’æ–¥çš„ã€‚å¦‚æœ JS æ‰§è¡Œæ—¶é—´è¿‡é•¿ï¼Œå°±ä¼šå¯¼è‡´é¡µé¢æ¸²æŸ“åŠ è½½é˜»å¡ï¼Œå‡ºç°æ‰å¸§æˆ–å¡é¡¿ã€‚</strong></p>
<p><strong>é¢è¯•äº®ç‚¹ï¼šä¸ºä»€ä¹ˆäº’æ–¥ï¼Ÿå› ä¸º JS æ‹¥æœ‰ä¿®æ”¹ DOM çš„æƒé™ã€‚å¦‚æœä¸¤è€…å¹¶è¡Œï¼Œå¯èƒ½ä¼šå‡ºç°â€œGUI æ­£åœ¨ç”»èƒŒæ™¯ï¼Œè€Œ JS åˆ é™¤äº†è¯¥èŠ‚ç‚¹â€çš„ç«æ€é—®é¢˜ã€‚</strong></p>
<p><strong>C.äº‹ä»¶è§¦å‘çº¿ç¨‹</strong></p>
<p>èŒè´£ï¼š<strong>å½’å±äºæµè§ˆå™¨è€Œä¸æ˜¯ JS å¼•æ“</strong>ï¼Œç”¨æ¥æ§åˆ¶äº‹ä»¶å¾ªç¯ï¼ˆEvent Loopï¼‰ã€‚</p>
<p>å·¥ä½œæœºåˆ¶ï¼šå½“äº‹ä»¶è¢«è§¦å‘ï¼ˆå¦‚ç‚¹å‡»ã€AJAX å®Œæˆï¼‰æ—¶ï¼Œè¯¥çº¿ç¨‹ä¼šå°†å¯¹åº”çš„å›è°ƒä»»åŠ¡åŠ å…¥åˆ°ä»»åŠ¡é˜Ÿåˆ—çš„æœ«å°¾ï¼Œç­‰å¾… JS å¼•æ“ç©ºé—²æ—¶å¤„ç†ã€‚</p>
<p><strong>D.å®šæ—¶å™¨è§¦å‘çº¿ç¨‹</strong></p>
<p>èŒè´£ï¼š<strong>è´Ÿè´£ setTimeout ä¸ setInterval çš„è®¡æ—¶</strong>ã€‚</p>
<p>å­˜åœ¨çš„æ„ä¹‰ï¼šå› ä¸º JS å¼•æ“æ˜¯å•çº¿ç¨‹çš„ï¼Œå¦‚æœå¤„äºé˜»å¡çŠ¶æ€å°±æ— æ³•è®¡æ—¶ã€‚å› æ­¤éœ€è¦ç‹¬ç«‹çº¿ç¨‹è®¡æ—¶ï¼Œè®¡æ—¶å®Œæ¯•åå†é€šçŸ¥äº‹ä»¶è§¦å‘çº¿ç¨‹å°†å›è°ƒæ¨å…¥é˜Ÿåˆ—ã€‚</p>
<p>æ³¨æ„ï¼šW3C æ ‡å‡†è§„å®šï¼ŒsetTimeout çš„é—´éš”æ—¶é—´ä½äº 4ms ä¼šè¢«è‡ªåŠ¨è®¾ä¸º 4msã€‚</p>
<p><strong>E.å¼‚æ­¥ HTTP è¯·æ±‚çº¿ç¨‹</strong></p>
<p>èŒè´£ï¼š<strong>åœ¨è¯·æ±‚å‘èµ·åï¼Œé€šè¿‡æµè§ˆå™¨åˆ†é…ä¸€ä¸ªçº¿ç¨‹ä¸“é—¨è´Ÿè´£ç›‘æ§ç½‘ç»œçŠ¶æ€</strong>ã€‚</p>
<p>å·¥ä½œæœºåˆ¶ï¼šå½“è¯·æ±‚çŠ¶æ€å˜æ›´ï¼ˆå¦‚æˆåŠŸè¿”å›ï¼‰æ—¶ï¼Œå¦‚æœè®¾æœ‰å›è°ƒå‡½æ•°ï¼Œè¯¥çº¿ç¨‹å°±ä¼šé€šçŸ¥â€œäº‹ä»¶è§¦å‘çº¿ç¨‹â€å°†å›è°ƒæ”¾å…¥ä»»åŠ¡é˜Ÿåˆ—ã€‚</p>
<p><strong>F. åˆæˆçº¿ç¨‹</strong>
<strong>ä¸“é—¨è´Ÿè´£å¤„ç†é¡µé¢çš„åˆ†å±‚å’Œå›¾åƒåˆæˆï¼Œä¸å ç”¨ä¸»çº¿ç¨‹(GUIæ¸²æŸ“çº¿ç¨‹å’ŒJSå¼•æ“çº¿ç¨‹)</strong>ã€‚</p>
<p><strong>èŒè´£ï¼š</strong></p>
<p>æ¥æ”¶æŒ‡ä»¤ï¼š<strong>ä¸»çº¿ç¨‹å®Œæˆå¸ƒå±€å’Œç»˜åˆ¶åˆ—è¡¨åï¼Œå°†è¿™äº›ä¿¡æ¯æäº¤ç»™åˆæˆçº¿ç¨‹</strong>ã€‚</p>
<p>å›¾å±‚åˆ‡ç‰‡ï¼š<strong>å°†é¡µé¢å›¾å±‚åˆ’åˆ†ä¸ºå¤§å°å›ºå®šçš„å›¾å—ï¼ˆTilesï¼‰ï¼Œä¼˜å…ˆæ …æ ¼åŒ–è§†å£å†…çš„å†…å®¹</strong>ã€‚</p>
<p>è°ƒåº¦æ …æ ¼åŒ–ï¼š<strong>é…åˆ GPU è¿›ç¨‹å°†å›¾å—è½¬æ¢ä¸ºä½å›¾ï¼ˆåƒç´ ç‚¹ï¼‰</strong>ã€‚</p>
<p>å“åº”äº¤äº’ï¼š<strong>ç›´æ¥å¤„ç†é¡µé¢çš„æ»šåŠ¨ (Scroll) å’Œ ç¼©æ”¾ (Zoom)ï¼Œè€Œæ— éœ€ç»è¿‡ä¸»çº¿ç¨‹</strong>ã€‚</p>
<p><strong>æ ¸å¿ƒä¼˜åŠ¿ï¼ˆç‹¬ç«‹æ€§ï¼‰</strong>ï¼š</p>
<p><strong>éé˜»å¡äº¤äº’ï¼šç”±äºåˆæˆçº¿ç¨‹ä¸ JS å¼•æ“çº¿ç¨‹ã€GUI æ¸²æŸ“çº¿ç¨‹ä¸äº’æ–¥ã€‚è¿™æ„å‘³ç€å³ä½¿ JS å¼•æ“æ­£åœ¨è¿è¡Œä¸€ä¸ªæ­»å¾ªç¯å¯¼è‡´é¡µé¢å¡æ­»ï¼Œä½ ä¾ç„¶å¯ä»¥æµç•…åœ°æ»šåŠ¨é¡µé¢ã€‚</strong></p>
<p><strong>ç¡¬ä»¶åŠ é€Ÿï¼šå®ƒæ˜¯åˆ©ç”¨ GPU èµ„æºçš„æ ¸å¿ƒå…¥å£ï¼Œé€šè¿‡å¤„ç† transformã€opacity ç­‰å±æ€§ï¼Œå®ç°æ— éœ€é‡æ’é‡ç»˜çš„é«˜æ€§èƒ½åŠ¨ç”»ã€‚</strong></p>
<h4 data-id="heading-11">â‘£ GPU è¿›ç¨‹ (GPU Process)</h4>
<p><strong>æœ€åˆä»…ç”¨äºå¤„ç† 3D å›¾å½¢ï¼Œä½†éšç€ç°ä»£ç½‘é¡µå¯¹æµç•…åº¦è¦æ±‚çš„æé«˜ï¼Œå®ƒå·²æˆä¸ºç½‘é¡µâ€œæ’ç‰ˆåˆæˆâ€ä¸â€œåƒç´ ä¸Šè‰²â€çš„ç‰©ç†æ”¯æŸ±ã€‚</strong></p>
<p><strong>èŒè´£ï¼š</strong></p>
<p>ç¡¬ä»¶åŠ é€Ÿï¼š<strong>å°†åˆæˆçº¿ç¨‹æäº¤çš„å›¾å—ç”±é€»è¾‘æŒ‡ä»¤è½¬æ¢ä¸ºæ˜¾å¡å¯è¯†åˆ«çš„ä½å›¾</strong>ã€‚</p>
<p>å¤åˆæ¸²æŸ“ï¼š<strong>è´Ÿè´£å°†æ¥è‡ªä¸åŒè¿›ç¨‹ï¼ˆå¦‚æµè§ˆå™¨è¿›ç¨‹çš„ UIã€æ¸²æŸ“è¿›ç¨‹çš„ç½‘é¡µå†…å®¹ï¼‰çš„ä½å›¾è¿›è¡Œæ··åˆï¼Œæœ€ç»ˆç»˜åˆ¶åˆ°æ˜¾ç¤ºå™¨å±å¹•ä¸Šã€‚</strong></p>
<p><strong>æ ¸å¿ƒçº¿ç¨‹ï¼š</strong></p>
<p>GPU æ¸²æŸ“çº¿ç¨‹ï¼š<strong>ä¸æ˜¾å¡é©±åŠ¨ç›´æ¥é€šä¿¡ï¼Œæ‰§è¡ŒçœŸæ­£çš„ç»˜åˆ¶æ“ä½œ</strong>ã€‚</p>
<p><strong>ä¸ºä»€ä¹ˆç‹¬ç«‹ï¼Ÿ</strong></p>
<p>æµè§ˆå™¨å°† GPU ç‹¬ç«‹ä¸ºè¿›ç¨‹ï¼Œä¸»è¦æ˜¯å› ä¸ºå›¾å½¢å¤„ç†æ¶‰åŠåˆ°å¤æ‚çš„æ“ä½œç³»ç»Ÿåº•å±‚è°ƒç”¨å’Œç¡¬ä»¶é©±åŠ¨ã€‚é©±åŠ¨ç¨‹åºé€šå¸¸ä¸å¦‚ç³»ç»Ÿæ ¸å¿ƒç¨³å®šï¼Œä¸€æ—¦ GPU ä»»åŠ¡å´©æºƒï¼Œæµè§ˆå™¨åªéœ€é‡å¯è¯¥è¿›ç¨‹å³å¯ï¼Œè€Œä¸ä¼šå¯¼è‡´æ•´ä¸ªæµè§ˆå™¨æˆ–æ‰€æœ‰æ ‡ç­¾é¡µâ€œé»‘å±â€æˆ–æ­»æœºã€‚</p>
<h4 data-id="heading-12">â‘¤ æ’ä»¶è¿›ç¨‹ (Plugin Process)</h4>
<p>ä¸“é—¨ç”¨äºè¿è¡Œå¦‚ Flashã€Silverlight ç­‰ç¬¬ä¸‰æ–¹æ’ä»¶çš„è¿›ç¨‹ã€‚</p>
<p><strong>èŒè´£ï¼š</strong></p>
<p>éš”ç¦»é£é™©ï¼š<strong>æ’ä»¶å¾€å¾€ç”±ç¬¬ä¸‰æ–¹å¼€å‘ï¼Œç¨³å®šæ€§å·®ä¸”ææ˜“å­˜åœ¨å®‰å…¨æ¼æ´</strong>ã€‚</p>
<p>ç‰©ç†éš”ç¦»ï¼šç¡®ä¿å³ä¾¿æ’ä»¶å´©æºƒæˆ–è¢«åŠ«æŒï¼Œå…¶ç ´ååŠ›ä¹Ÿä»…é™åœ¨è¯¥è¿›ç¨‹å†…éƒ¨ï¼Œä¸ä¼šæ³¢åŠæ¸²æŸ“è¿›ç¨‹ï¼ˆä½ çš„ç½‘é¡µï¼‰æˆ–ä¸»è¿›ç¨‹ã€‚</p>
<p>éšç€ Chrome å½»åº•åœæ­¢å¯¹ Flash çš„æ”¯æŒï¼Œç°ä»£ç½‘é¡µä¸­æ’ä»¶è¿›ç¨‹å·²è¾ƒå°‘å‡ºç°ã€‚æ³¨æ„ä¸è¦å°†â€œæ’ä»¶â€ä¸â€œæ‰©å±•â€æ··æ·†ã€‚</p>
<h4 data-id="heading-13">â‘¥ æ‰©å±•è¿›ç¨‹ (Extension Process)</h4>
<p>åœ°ä½ï¼š<strong>ä¸ºä½ å®‰è£…çš„æµè§ˆå™¨æ‰©å±•ç¨‹åº</strong>ï¼ˆå¦‚ Vue Devtools, AdBlock, ç¿»è¯‘æ’ä»¶ï¼‰æä¾›ç‹¬ç«‹çš„è¿è¡Œç©ºé—´ã€‚</p>
<p><strong>èŒè´£ï¼š</strong></p>
<p>ç‹¬ç«‹è¿è¡Œï¼š<strong>ç¡®ä¿æ‰©å±•ç¨‹åºçš„ JS é€»è¾‘ä¸ä¼šå ç”¨ç½‘é¡µæ¸²æŸ“è¿›ç¨‹çš„ CPU èµ„æº</strong>ã€‚</p>
<p>æƒé™ç®¡æ§ï¼šæµè§ˆå™¨è¿›ç¨‹ä¼š<strong>æ ¹æ®æ‰©å±•ç”³æ˜çš„æƒé™</strong>ï¼Œ<strong>ä¸¥æ ¼æ§åˆ¶æ‰©å±•è¿›ç¨‹å¯¹ç½‘é¡µå†…å®¹ï¼ˆDOMï¼‰æˆ–ç³»ç»Ÿ API çš„è®¿é—®</strong>ã€‚</p>
<h4 data-id="heading-14">æ€è€ƒé¢˜</h4>
<p><strong>æ¸²æŸ“è¿›ç¨‹æœ‰GUIçº¿ç¨‹è´Ÿè´£å¯¹html css jsçš„è§£æå’Œæ¸²æŸ“ï¼Œä¸»è¿›ç¨‹çš„UIçº¿ç¨‹å’Œgpuè¿›ç¨‹çš„gupåŠ é€Ÿçº¿ç¨‹ä¹Ÿæœ‰ç±»ä¼¼åŠŸèƒ½ï¼Œä¸ºä»€ä¹ˆè¦è¿™æ ·è®¾è®¡ï¼Ÿ</strong></p>
<h5 data-id="heading-15">A. æ¸²æŸ“è¿›ç¨‹ï¼šé€»è¾‘è®¡ç®—çš„æ ¸å¿ƒ</h5>
<p>è™½ç„¶å®ƒå«â€œæ¸²æŸ“è¿›ç¨‹â€ï¼Œä½†å®ƒå¤§éƒ¨åˆ†æ—¶é—´åœ¨åš<strong>é€»è¾‘è½¬æ¢</strong>ã€‚</p>
<p>GUI çº¿ç¨‹çš„å·¥ä½œï¼š<strong>å®ƒæŠŠä»£ç å­—èŠ‚æµå˜æˆ DOM/CSSOMã€‚æœ€é‡è¦çš„æ˜¯ï¼Œå®ƒè®¡ç®—å‡º Layoutï¼ˆå¸ƒå±€ï¼‰ã€‚</strong> å®ƒå‘Šè¯‰æµè§ˆå™¨ï¼šâ€œè¿™é‡Œæœ‰ä¸€ä¸ª 100x100 çš„çº¢è‰²æ–¹å—â€ã€‚</p>
<p>å®ƒä¸ç›´æ¥ç”»å›¾ï¼š<strong>GUI çº¿ç¨‹å¹¶ä¸ç›´æ¥æ§åˆ¶æ˜¾ç¤ºå™¨åƒç´ </strong>ï¼Œå®ƒç”Ÿæˆçš„åªæ˜¯â€œç»˜åˆ¶æŒ‡ä»¤ï¼ˆPaint Recordsï¼‰â€ã€‚</p>
<h5 data-id="heading-16">B. GPU è¿›ç¨‹ï¼šç¡¬ä»¶åŠ é€Ÿçš„çœŸç›¸</h5>
<p>ä»¥å‰æµè§ˆå™¨ç¡®å®é  CPU ç”»å›¾ï¼ˆè½¯ä»¶æ¸²æŸ“ï¼‰ï¼Œä½† CPU å¤„ç†å›¾å½¢å¤ªæ…¢äº†ã€‚</p>
<p>GPU åŠ é€Ÿçº¿ç¨‹ï¼šå®ƒ<strong>æ¥æ”¶æ¥è‡ªåˆæˆçº¿ç¨‹çš„æŒ‡ä»¤</strong>ã€‚å› ä¸º GPU æ“…é•¿å¹¶è¡Œå¤„ç†å¤§é‡åƒç´ ï¼Œå®ƒ<strong>æŠŠæ¸²æŸ“è¿›ç¨‹ç®—å¥½çš„â€œå›¾å—â€ç›´æ¥è½¬ä¸ºå±å¹•ä¸Šçš„åƒç´ ã€‚</strong></p>
<p>ç‹¬ç«‹æ€§ï¼š<strong>æŠŠ GPU ç‹¬ç«‹å‡ºæ¥æ˜¯ä¸ºäº†é˜²å´©æºƒã€‚å›¾å½¢é©±åŠ¨éå¸¸è„†å¼±ï¼Œå¦‚æœ GPU çº¿ç¨‹åœ¨æ¸²æŸ“è¿›ç¨‹é‡Œï¼Œä¸€ä¸ªå¤æ‚çš„ 3D æ•ˆæœæŒ‚äº†ï¼Œä½ çš„ç½‘é¡µå°±å´©äº†ã€‚</strong></p>
<h5 data-id="heading-17">C. ä¸»è¿›ç¨‹ï¼ˆUI çº¿ç¨‹ï¼‰ï¼šçª—å£çš„å®ˆæŠ¤è€…</h5>
<p>ä¸ºä»€ä¹ˆä¸»è¿›ç¨‹ä¹Ÿè¦å‚ä¸â€œæ˜¾ç¤ºâ€ï¼Ÿ</p>
<p><strong>éç½‘é¡µåŒºåŸŸçš„æ¸²æŸ“</strong>ï¼šç½‘é¡µä¹‹å¤–çš„åŒºåŸŸï¼ˆåœ°å€æ ã€ä¹¦ç­¾æ ã€å‰è¿›åé€€æŒ‰é’®ï¼‰ä¸å—æ¸²æŸ“è¿›ç¨‹æ§åˆ¶ã€‚</p>
<p>æœ€ç»ˆåˆæˆï¼šè¿™æ˜¯ä¸€ä¸ªå…³é”®ç‚¹ã€‚<strong>å±å¹•ä¸Šæ˜¾ç¤ºçš„å†…å®¹ = æµè§ˆå™¨å¤–å£³ä½å›¾ + ç½‘é¡µå†…å®¹ä½å›¾</strong>ã€‚</p>
<p>åä½œæµç¨‹ï¼š<strong>GPU è¿›ç¨‹ä¼šæŠŠç”»å¥½çš„ç½‘é¡µå†…å®¹ä½å›¾äº¤ç»™ä¸»è¿›ç¨‹ï¼Œä¸»è¿›ç¨‹æŠŠè‡ªå·±çš„ UI ä½å›¾å ä¸Šå»ï¼Œæœ€åç”±ä¸»è¿›ç¨‹æŒ‡æŒ¥æ˜¾ç¤ºå™¨æŠŠè¿™æ•´å¼ å›¾æ˜¾ç¤ºå‡ºæ¥ã€‚</strong></p>
<h5 data-id="heading-18">ä¸€ä¸ªå…·ä½“çš„åœºæ™¯ï¼šæ”¹å˜ background-color</h5>
<p>æ¸²æŸ“è¿›ç¨‹ (JS/GUI çº¿ç¨‹)ï¼šJS ä¿®æ”¹äº† CSSï¼Œä¸»çº¿ç¨‹é‡æ–°è®¡ç®—æ ·å¼ï¼Œå‘ç°é¢œè‰²å˜äº†ï¼Œç”Ÿæˆä¸€ä»½æ–°çš„â€œç»˜åˆ¶åˆ—è¡¨â€ã€‚</p>
<p>æ¸²æŸ“è¿›ç¨‹ (åˆæˆçº¿ç¨‹)ï¼šæ‹¿åˆ°åˆ—è¡¨ï¼ŒæŠŠä»»åŠ¡åˆ†å—ï¼Œå‘ç»™ GPU è¿›ç¨‹ã€‚</p>
<p>GPU è¿›ç¨‹ (GPU çº¿ç¨‹)ï¼šè°ƒç”¨æ˜¾å¡ç¡¬ä»¶ï¼ŒæŠŠå—å½±å“çš„åƒç´ ç‚¹é‡æ–°å–·è‰²ï¼Œç”Ÿæˆä½å›¾ã€‚</p>
<p>æµè§ˆå™¨ä¸»è¿›ç¨‹ (UI çº¿ç¨‹)ï¼šæŠŠè¿™å¼ æ–°çš„ä½å›¾æ”¾åœ¨æµè§ˆå™¨çª—å£çš„â€œç™½æ¿â€åŒºåŸŸæ˜¾ç¤ºã€‚</p>
<h2 data-id="heading-19">ä¸‰ã€ä»urlè¾“å…¥åˆ°é¡µé¢æ¸²æŸ“çš„å…¨æµç¨‹ï¼ˆç»“åˆæµè§ˆå™¨å¤šè¿›ç¨‹æ¶æ„ï¼‰</h2>
<p><strong>æ•´ä¸ªæµç¨‹å®è´¨ä¸Šæ˜¯å¤šä¸ªç‹¬ç«‹è¿›ç¨‹åœ¨æµè§ˆå™¨ä¸»è¿›ç¨‹çš„è°ƒåº¦ä¸‹ï¼Œé€šè¿‡ Mojo IPCï¼ˆè¿›ç¨‹é—´é€šä¿¡ï¼‰ è¿›è¡Œçš„ä¸€åœºæ•°æ®ä¸æ§åˆ¶æƒçš„æ¥åŠ›ã€‚</strong></p>
<h4 data-id="heading-20">1. å¯¼èˆªè§¦å‘ï¼šæµè§ˆå™¨ä¸»è¿›ç¨‹çš„è°ƒåº¦ä¸æ‹¦æˆª</h4>
<p>è¾“å…¥é¢„å¤„ç†ï¼š<strong>UI çº¿ç¨‹</strong>æ‹¦æˆªåœ°å€æ è¾“å…¥ã€‚<strong>è‹¥ä¸ºé URL å­—ç¬¦ä¸²ï¼Œè°ƒç”¨æœç´¢å¼•æ“å°è£… URLï¼›è‹¥ä¸ºåˆæ³• URLï¼Œåˆ™ç›´æ¥è¿›å…¥å¯¼èˆªé€»è¾‘</strong>ã€‚</p>
<p><strong>BeforeUnload æ‹¦æˆª</strong>ï¼šå¦‚æœå½“å‰å·²å­˜åœ¨é¡µé¢ï¼Œä¸»è¿›ç¨‹é€šè¿‡ IPC å‘å½“å‰æ¸²æŸ“è¿›ç¨‹å‘å‡ºä¿¡å·ã€‚æ¸²æŸ“è¿›ç¨‹æ‰§è¡Œ JS é€»è¾‘å¹¶è¿”å›ç»“æœã€‚ä¸ºäº†é˜²æ­¢æ¸²æŸ“è¿›ç¨‹æ— å“åº”å¯¼è‡´å¯¼èˆªå¡æ­»ï¼Œä¸»è¿›ç¨‹ä¼šå¯¹è¿™ä¸€è¿‡ç¨‹è®¾ç½® Timeout é˜ˆå€¼ã€‚</p>
<p>å¯åŠ¨ç½‘ç»œæŒ‡ä»¤ï¼š<strong>UI çº¿ç¨‹å‘èµ·ä¸€ä¸ªæŒ‡å‘ ç½‘ç»œè¿›ç¨‹ çš„ IPC è¯·æ±‚</strong>ã€‚</p>
<p><strong>è¿™é‡Œè¯¦ç»†è§£é‡Šä¸€ä¸‹BeforeUnloadå’Œå¯åŠ¨ç½‘ç»œæŒ‡ä»¤çš„è¿‡ç¨‹åŠä¼˜åŒ–â€”â€”</strong></p>
<h5 data-id="heading-21">â‘  BeforeUnload æ‹¦æˆªï¼šç»™æ—§é¡µé¢â€œäº¤ä»£é—è¨€â€çš„æœºä¼š</h5>
<p>å½“ä½ ç‚¹å‡»ä¸€ä¸ªé“¾æ¥æˆ–åœ¨åœ°å€æ å›è½¦æ—¶ï¼Œ<strong>å½“å‰çš„ç½‘é¡µï¼ˆæ—§é¡µé¢ï¼‰è¿˜æ²¡é”€æ¯ã€‚æµè§ˆå™¨å¿…é¡»å…ˆè¯¢é—®</strong>å®ƒï¼šâ€œä½ è¿˜æœ‰æ²¡å¤„ç†å®Œçš„äº‹å—ï¼Ÿâ€</p>
<p>IPC ä¿¡å·æ˜¯ä»€ä¹ˆï¼Ÿ æµè§ˆå™¨ä¸»è¿›ç¨‹ï¼ˆç®¡ç†çª—å£çš„ï¼‰å‘ç°ä½ è¦è·³èµ°äº†ï¼Œ<strong>å®ƒä¼šå‘ä¸€ä¸ª IPCï¼ˆè¿›ç¨‹é—´é€šä¿¡ï¼‰æ¶ˆæ¯ ç»™å½“å‰ç½‘é¡µæ‰€åœ¨çš„æ¸²æŸ“è¿›ç¨‹</strong>ã€‚</p>
<p><strong>æ¸²æŸ“è¿›ç¨‹åœ¨åšä»€ä¹ˆï¼Ÿ æ¸²æŸ“è¿›ç¨‹æ¥æ”¶ä¿¡å·åï¼Œä¼šæ£€æŸ¥ JS ä»£ç é‡Œæœ‰æ²¡æœ‰ç›‘å¬ beforeunload äº‹ä»¶ã€‚æ¯”å¦‚ä½ åœ¨å†™åšå®¢ï¼Œè¿˜æ²¡ä¿å­˜ï¼ŒJS å°±ä¼šå¼¹å‡ºä¸€ä¸ªå¯¹è¯æ¡†ï¼šâ€œç³»ç»Ÿå¯èƒ½ä¸ä¼šä¿å­˜æ‚¨æ‰€åšçš„æ›´æ”¹ã€‚ç¡®å®šè¦ç¦»å¼€å—ï¼Ÿâ€</strong></p>
<p>ä¸ºä»€ä¹ˆéœ€è¦ Timeoutï¼ˆè¶…æ—¶ï¼‰é˜ˆå€¼ï¼Ÿ è¿™æ˜¯<strong>ä¸ºäº†é˜²æ­»é”</strong>ã€‚å¦‚æœæ—§é¡µé¢çš„æ¸²æŸ“è¿›ç¨‹å´©äº†ï¼Œæˆ–è€… JS å†™äº†ä¸ªæ­»å¾ªç¯ï¼ˆä¾‹å¦‚ while(true){}ï¼‰ï¼Œå®ƒå°±æ— æ³•å›å¤ä¸»è¿›ç¨‹ã€‚å¦‚æœæ²¡æœ‰è¶…æ—¶æœºåˆ¶ï¼Œä½ çš„æµè§ˆå™¨åœ°å€æ å°±ä¼šæ°¸è¿œå¡åœ¨é‚£é‡Œã€‚</p>
<p>åº•å±‚é€»è¾‘ï¼š ä¸»è¿›ç¨‹ä¼šå¯åŠ¨ä¸€ä¸ªå®šæ—¶å™¨ï¼ˆæ¯”å¦‚å‡ ç§’é’Ÿï¼‰ã€‚å¦‚æœæ¸²æŸ“è¿›ç¨‹åœ¨è§„å®šæ—¶é—´å†…æ²¡å›è¯ï¼Œä¸»è¿›ç¨‹ä¼šè®¤ä¸ºè¿™ä¸ªæ¸²æŸ“è¿›ç¨‹â€œæŒ‚äº†â€ï¼Œç›´æ¥å¼ºè¡Œææ–­å®ƒçš„ç”Ÿå‘½å‘¨æœŸï¼Œå¼ºåˆ¶å¼€å§‹åŠ è½½æ–°é¡µé¢ã€‚</p>
<h5 data-id="heading-22">â‘¡å¯åŠ¨ç½‘ç»œæŒ‡ä»¤ï¼šå¤–äº¤éƒ¨æ­£å¼å‡ºèˆª</h5>
<p>ä¸€æ—¦æ—§é¡µé¢è¢«å¤„ç†å®Œï¼ˆæˆ–è€…è¶…æ—¶äº†ï¼‰ï¼Œæµè§ˆå™¨ä¸»è¿›ç¨‹å°±è¦å»äº’è”ç½‘ä¸Šæ‹¿æ–°é¡µé¢çš„æ•°æ®äº†ã€‚</p>
<p>UI çº¿ç¨‹å‘èµ·è¯·æ±‚ï¼š æ­¤æ—¶ï¼Œä¸»è¿›ç¨‹é‡Œçš„ UI çº¿ç¨‹ï¼ˆè´Ÿè´£å¤„ç†åœ°å€æ ã€æŒ‰é’®ç‚¹å‡»çš„é‚£ä¸ªå·¥äººï¼‰ä¼šæ•´ç†å¥½ç›®æ ‡ URLã€Cookieã€è¯·æ±‚å¤´ç­‰ä¿¡æ¯ã€‚</p>
<p>æŒ‡å‘ç½‘ç»œè¿›ç¨‹çš„ IPC è¯·æ±‚ï¼š åœ¨ç°ä»£ Chrome ä¸­ï¼Œ<strong>ä¸»è¿›ç¨‹è‡ªå·±ä¸è´Ÿè´£ä¸‹è½½ã€‚å®ƒä¼šæŠŠåˆšæ‰æ•´ç†å¥½çš„â€œè¯·æ±‚åŒ…â€é€šè¿‡ IPC æ‰”ç»™ ç½‘ç»œè¿›ç¨‹</strong>ã€‚</p>
<p>å½¢è±¡ç‚¹è¯´ï¼š ä¸»è¿›ç¨‹ï¼ˆCEOï¼‰ç»™ç½‘ç»œè¿›ç¨‹ï¼ˆå¤–äº¤éƒ¨ï¼‰æ‰“äº†ä¸ªç”µè¯ï¼šâ€œå–‚ï¼Œå»å¸®æˆ‘æŠŠ github.com çš„ HTML å­—èŠ‚æµå–å›æ¥ã€‚â€</p>
<h5 data-id="heading-23">â‘¢ä¸ºä»€ä¹ˆè¿™ä¸¤æ­¥æ˜¯â€œå¹¶è¡Œçš„ä¼˜åŒ–ç‚¹â€ï¼Ÿ</h5>
<p><strong>è¿™é‡Œæœ‰ä¸€ä¸ªéå¸¸ç¡¬æ ¸çš„äº®ç‚¹ï¼šç°ä»£æµè§ˆå™¨å¹¶ä¸ä¼šç­‰ beforeunload å½»åº•ç»“æŸæ‰å»å‘èµ·ç½‘ç»œè¯·æ±‚ã€‚</strong></p>
<p>ä¸ºäº†å¿«ï¼Œæµè§ˆå™¨é€šå¸¸ä¼šé‡‡å– å¹¶è¡Œç­–ç•¥ï¼š</p>
<p>ä¸€è¾¹è®©ä¸»è¿›ç¨‹è¯¢é—®æ—§é¡µé¢æ˜¯å¦è¦ç¦»å¼€ã€‚</p>
<p>ä¸€è¾¹åŒæ­¥é€šçŸ¥ç½‘ç»œè¿›ç¨‹å»è¿›è¡Œ DNS è§£æ å’Œ å»ºç«‹è¿æ¥ã€‚</p>
<p><strong>å¦‚æœç”¨æˆ·æœ€åç‚¹å‡»äº†â€œå–æ¶ˆç¦»å¼€â€ï¼Œæµè§ˆå™¨å°±æŠŠåˆšå‘èµ·çš„ç½‘ç»œè¯·æ±‚ææ–­ã€‚å¦‚æœç”¨æˆ·ç¡®å®šç¦»å¼€ï¼Œæ­¤æ—¶ç½‘ç»œè¿æ¥å¯èƒ½å·²ç»å»ºå¥½äº†ï¼Œç½‘é¡µç§’å¼€ã€‚è¿™å°±æ˜¯æ‰€è°“çš„ â€œå¯¼èˆªé¢„åŠ è½½â€æ€æƒ³ã€‚</strong></p>
<h4 data-id="heading-24">2. ç½‘ç»œèµ„æºè·å–ï¼šç½‘ç»œè¿›ç¨‹çš„â€œå¤–äº¤â€ä¸â€œåˆç­›â€</h4>
<p><strong>å½“ç½‘ç»œè¿›ç¨‹æ¥åˆ°ä¸»è¿›ç¨‹çš„æŒ‡ä»¤åï¼Œå®ƒå¼€å§‹åœ¨äº’è”ç½‘ä¸Šä¸ºç½‘é¡µå¯»æ‰¾ææ–™ã€‚</strong></p>
<h5 data-id="heading-25">A. ç‰©ç†é“¾è·¯çš„æ‰“é€šï¼ˆå»ºç«‹è¿æ¥ï¼‰</h5>
<p><strong>æµè§ˆå™¨ç¼“å­˜ï¼šé¦–å…ˆæ£€æŸ¥ç½‘ç»œè¿›ç¨‹å†…å­˜ä¸­å­˜å‚¨çš„ DNS è®°å½•ï¼ˆé€šå¸¸ç¼“å­˜ 1 åˆ†é’Ÿï¼‰</strong></p>
<p><strong>DNS ä¸æ¡æ‰‹</strong>ï¼š<strong>å¦‚æœæµè§ˆå™¨ç¼“å­˜æœªå‘½ä¸­ç½‘ç»œè¿›ç¨‹ä¼šå»æŸ¥ IP åœ°å€ï¼ˆDNSï¼‰ï¼Œç„¶åè¿›è¡Œ TCP ä¸‰æ¬¡æ¡æ‰‹ã€‚å¦‚æœæ˜¯ HTTPSï¼Œè¿˜è¦è¿›è¡Œ TLS åŠ å¯†æ¡æ‰‹ã€‚</strong></p>
<p>äº®ç‚¹ï¼š<strong>ä¸ºäº†å¿«ï¼Œæµè§ˆå™¨ä¼šç»´æŠ¤ä¸€ä¸ª è¿æ¥æ± ã€‚å¦‚æœæœ€è¿‘åˆšè®¿é—®è¿‡è¿™ä¸ªåŸŸåï¼Œå®ƒä¼šç›´æ¥å¤ç”¨ä¹‹å‰çš„â€œç®¡é“â€ï¼Œçœå»æ¡æ‰‹æ—¶é—´ã€‚</strong></p>
<h5 data-id="heading-26">B. å“åº”å¤´çš„è§£æä¸â€œé‡å®šå‘â€é»‘ç®±</h5>
<p><strong>å†…éƒ¨æ¶ˆåŒ–é‡å®šå‘</strong>ï¼š<strong>å¦‚æœæœåŠ¡å™¨è¿”å› 301/302ï¼ˆé‡å®šå‘ï¼‰ï¼Œç½‘ç»œè¿›ç¨‹ä¸ä¼šè·‘å›å»å‘Šè¯‰ä¸»è¿›ç¨‹</strong>ï¼Œè€Œæ˜¯è‡ªå·±åœ¨å†…éƒ¨é‡æ–°å‘èµ·æ–°çš„è¯·æ±‚ã€‚</p>
<p>é€»è¾‘æ„ä¹‰ï¼šå¯¹ä¸»è¿›ç¨‹å’Œæ¸²æŸ“è¿›ç¨‹æ¥è¯´ï¼Œå®ƒä»¬åªå…³å¿ƒæœ€ç»ˆæ‹¿åˆ°çš„ç»“æœï¼Œä¸­é—´è½¬äº†å‡ æ¬¡å¼¯ï¼ˆé‡å®šå‘ï¼‰ï¼Œç½‘ç»œè¿›ç¨‹åœ¨åº•å±‚å·å·å¸®ä½ å¤„ç†å¥½äº†ã€‚</p>
<h5 data-id="heading-27">C. æ ¸å¿ƒï¼šå“åº”ä½“çš„â€œé¦–åŒ…â€å—…æ¢</h5>
<p>è¿™æ˜¯å…¨æµç¨‹ä¸­æœ€ç²¾å¦™çš„åœ°æ–¹ã€‚å½“<strong>ç½‘ç»œè¿›ç¨‹æ”¶åˆ°æœåŠ¡å™¨è¿”å›çš„ç¬¬ä¸€ä»½æ•°æ®åŒ…ï¼ˆé€šå¸¸æ˜¯å‰å‡ ä¸ªå­—èŠ‚ï¼‰æ—¶</strong>ï¼š</p>
<p>ç¡®å®šèº«ä»½ï¼šç½‘ç»œè¿›ç¨‹ä¼šæŸ¥çœ‹ Content-Typeã€‚</p>
<p>å¦‚æœæ˜¯ text/htmlï¼Œå®ƒå°±çŸ¥é“ï¼šâ€œæ­£ä¸»æ¥äº†ï¼Œ<strong>å‡†å¤‡é€šçŸ¥æ¸²æŸ“è¿›ç¨‹</strong>å¹²æ´»â€ã€‚</p>
<p>å¦‚æœæ˜¯ application/octet-streamï¼Œå®ƒä¼šæ„è¯†åˆ°ï¼šâ€œè¿™æ˜¯ä¸€ä¸ªä¸‹è½½ä»»åŠ¡â€ï¼Œäºæ˜¯<strong>æŠŠè¯·æ±‚è½¬äº¤ç»™ä¸‹è½½ç®¡ç†å™¨ï¼Œå¯¼èˆªæµç¨‹åœ¨æ­¤ç»ˆæ­¢ã€‚</strong></p>
<p>å»ºç«‹æ•°æ®ç®¡é“ï¼š</p>
<p><strong>æ ¸å¿ƒæœºåˆ¶ï¼šä¸€æ—¦ç¡®è®¤æ˜¯ HTMLï¼Œç½‘ç»œè¿›ç¨‹ä¸ä¼šç­‰æ•´ä¸ªç½‘é¡µä¸‹è½½å®Œã€‚</strong></p>
<p><strong>å®ƒä¼šå»ºç«‹ä¸€æ¡â€œæ•°æ®é•¿ç®¡â€ã€‚ç®¡å­çš„è¿™å¤´åœ¨ç½‘ç»œè¿›ç¨‹ï¼ˆç»§ç»­ä¸‹è½½åç»­å­—èŠ‚ï¼‰ï¼Œç®¡å­çš„é‚£å¤´ç›´æ¥æ’è¿›æœªæ¥çš„æ¸²æŸ“è¿›ç¨‹ã€‚</strong></p>
<p><strong>å®ƒçš„æ„ä¹‰ï¼šå®ç°â€œè¾¹ä¸‹è½½è¾¹è§£æâ€ï¼Œæå¤§åœ°ç¼©çŸ­äº†ç™½å±æ—¶é—´ã€‚</strong></p>
<h4 data-id="heading-28">3. æäº¤å¯¼èˆªï¼šæ§åˆ¶æƒä»ä¸»è¿›ç¨‹ç§»äº¤ç»™æ¸²æŸ“è¿›ç¨‹</h4>
<p>è¿™æ˜¯å¯¼èˆªé˜¶æ®µæœ€æ ¸å¿ƒçš„â€œçŠ¶æ€åˆ‡æ¢â€ç‚¹ï¼Œæ ‡å¿—ç€é¡µé¢æ­£å¼ä»æ—§åœ°å€åˆ‡æ¢åˆ°æ–°åœ°å€ã€‚</p>
<p><strong>è¿›ç¨‹åˆ†é…ï¼šä¸»è¿›ç¨‹æ ¹æ® Site Isolation ç­–ç•¥åˆ†é…æ¸²æŸ“è¿›ç¨‹ã€‚å¦‚æœæ˜¯åŒç«™è·³è½¬ï¼Œå¯èƒ½å¤ç”¨åŸæœ‰è¿›ç¨‹ï¼›å¦åˆ™å¯åŠ¨æ–°è¿›ç¨‹ã€‚</strong></p>
<p>Commit æŒ‡ä»¤ï¼šä¸»è¿›ç¨‹å‘é€ CommitNavigation æ¶ˆæ¯ç»™ç›®æ ‡ æ¸²æŸ“è¿›ç¨‹ã€‚</p>
<p><strong>æ•°æ®äº¤æ¥ï¼šä¸»è¿›ç¨‹ä¼šå°†ç½‘ç»œè¿›ç¨‹ä¸­é‚£ä¸ª Data Pipe çš„å¥æŸ„éšæŒ‡ä»¤å‘é€ç»™æ¸²æŸ“è¿›ç¨‹ã€‚</strong></p>
<p>ç¡®è®¤åé¦ˆï¼šæ¸²æŸ“è¿›ç¨‹æ”¶åˆ°å¥æŸ„åï¼Œç›´æ¥ä»ç®¡é“è¯»å–æ•°æ®æµã€‚ä¸€æ—¦å¼€å§‹è§£æï¼Œæ¸²æŸ“è¿›ç¨‹å‘ä¸»è¿›ç¨‹å‘é€ DidCommitProvisionalLoadã€‚</p>
<p><strong>çŠ¶æ€åˆ‡æ¢ï¼šä¸»è¿›ç¨‹æ”¶åˆ°åé¦ˆåï¼Œæ‰§è¡Œ UI çŠ¶æ€æ›´æ–°ï¼ˆæ›´æ–°åœ°å€æ ã€é‡ç½®å†å²è®°å½•ã€åˆ·æ–°å‰è¿›æŒ‰é’®ï¼‰ã€‚æ­¤æ—¶æ—§é¡µé¢æ­£å¼è¢«é”€æ¯ã€‚</strong></p>
<h4 data-id="heading-29">4. æ¸²æŸ“æµæ°´çº¿ï¼šæ¸²æŸ“è¿›ç¨‹ä¸ GPU çš„åƒç´ äº§å‡º</h4>
<p><strong>åœ¨æ¸²æŸ“è¿›ç¨‹æ¥æ”¶åˆ°â€œæ•°æ®ç®¡é“â€çš„å¥æŸ„åï¼Œå†…éƒ¨çš„ä¸»çº¿ç¨‹ã€åˆæˆçº¿ç¨‹ ä¸ GPU è¿›ç¨‹ å¼€å§‹é«˜åº¦ååŒã€‚</strong></p>
<h5 data-id="heading-30">A. è§£æä¸æ„å»ºï¼šå°†å­—èŠ‚è½¬åŒ–ä¸ºç»“æ„</h5>
<p>æµå¼è§£æï¼š<strong>ä¸»çº¿ç¨‹æ— éœ€ç­‰å¾… HTML ä¸‹è½½å®Œæˆã€‚é€šè¿‡ Data Pipeï¼Œæ¯æ¥æ”¶åˆ°ä¸€ä¸ªæ•°æ®åŒ…ï¼ŒGUI æ¸²æŸ“çº¿ç¨‹å°±ä¼šç«‹å³å¯åŠ¨è§£æï¼Œè¾¹ä¸‹è½½è¾¹æ„å»º DOM æ ‘ã€‚</strong></p>
<p>æ ·å¼è®¡ç®—ï¼ˆCSSOMï¼‰ï¼š<strong>ä¸»çº¿ç¨‹è§£æ CSS æ ·å¼ï¼Œè®¡ç®—å‡ºæ¯ä¸ª DOM èŠ‚ç‚¹çš„æœ€ç»ˆæ ·å¼</strong>ã€‚</p>
<p><strong>äº®ç‚¹ï¼ˆäº’æ–¥æœºåˆ¶ï¼‰ï¼šæ­¤é˜¶æ®µè‹¥é‡åˆ° <code>&lt;script&gt;</code>ï¼Œä¸»çº¿ç¨‹ä¼šæŒ‚èµ· GUI æ¸²æŸ“çº¿ç¨‹ï¼Œåˆ‡æ¢åˆ° JS å¼•æ“çº¿ç¨‹ã€‚è¿™ç§äº’æ–¥ç¡®ä¿äº† JS åœ¨ä¿®æ”¹ DOM æ—¶ä¸ä¼šäº§ç”Ÿæ¸²æŸ“ç«æ€ã€‚</strong></p>
<h5 data-id="heading-31">B. å‡ ä½•è®¡ç®—ï¼šç¡®å®šç©ºé—´åæ ‡</h5>
<p>å¸ƒå±€æ ‘ï¼ˆLayout Treeï¼‰æ„å»ºï¼šä¸»çº¿ç¨‹å°† DOM ä¸ CSSOM åˆå¹¶ã€‚å®ƒä¼šè¿‡æ»¤æ‰ display: none çš„èŠ‚ç‚¹ï¼Œä»…ä¿ç•™å¯è§å…ƒç´ ã€‚</p>
<p>å‡ ä½•é‡ç®—ï¼š<strong>ä¸»çº¿ç¨‹ç²¾ç¡®è®¡ç®—æ¯ä¸ªå…ƒç´ åœ¨ä¸‰ç»´ç©ºé—´ä¸­çš„ (x, y) åæ ‡ã€å®½é«˜åŠå±‚çº§</strong>ã€‚</p>
<p><strong>äº§ç‰©ï¼šä¸€æ£µåŒ…å«æ‰€æœ‰å‡ ä½•ä¿¡æ¯çš„å¸ƒå±€æ ‘ã€‚</strong></p>
<h5 data-id="heading-32">C. è®°å½•ä¸å›¾å±‚åŒ–ï¼šç”Ÿæˆæ–½å·¥å›¾çº¸</h5>
<p><strong>åˆ†å±‚ï¼šä¸ºäº†å¤„ç† 3D è½¬æ¢ï¼ˆtransformï¼‰æˆ–æ»šåŠ¨ï¼Œä¸»çº¿ç¨‹ä¼šæ ¹æ®å±æ€§å°†é¡µé¢æ‹†åˆ†ä¸ºå¤šä¸ªå›¾å±‚ã€‚</strong></p>
<p>ç»˜åˆ¶è®°å½•ï¼ˆPaintï¼‰ï¼š<strong>ä¸»çº¿ç¨‹å¹¶ä¸ç›´æ¥ç”»å›¾ï¼Œè€Œæ˜¯å°†æ¯ä¸ªå›¾å±‚çš„ç»˜åˆ¶é€»è¾‘æ‹†è§£ä¸ºä¸€ä¸ªä¸ªæŒ‡ä»¤</strong>ï¼ˆå¦‚ï¼šâ€œåœ¨æ­¤å¤„ç”»æ­£æ–¹å½¢â€ï¼Œâ€œåœ¨å½¼å¤„å¡«å……çº¢è‰²â€ï¼‰ã€‚</p>
<p><strong>äº§ç‰©ï¼šä¸€ä»½åä¸º ç»˜åˆ¶è®°å½•ï¼ˆPaint Recordsï¼‰ çš„é€»è¾‘æ¸…å•ã€‚</strong></p>
<h5 data-id="heading-33">D. æ …æ ¼åŒ–ä¸åˆæˆï¼šåƒç´ çš„å·¥ä¸šäº§å‡º</h5>
<p>ä»»åŠ¡æ­¤æ—¶ä»ä¸»çº¿ç¨‹ç§»äº¤ç»™åˆæˆçº¿ç¨‹ï¼Œè¿›å…¥çœŸæ­£çš„ç¡¬ä»¶åŠ é€Ÿé˜¶æ®µã€‚</p>
<p><strong>åˆ‡ç‰‡ï¼ˆTilingï¼‰ï¼šåˆæˆçº¿ç¨‹å°†å·¨å¤§å›¾å±‚åˆ’åˆ†ä¸ºå›ºå®šå¤§å°çš„ å›¾å—ï¼ˆTilesï¼‰ï¼Œä¼˜å…ˆå¤„ç†è§†å£ï¼ˆç”¨æˆ·è‚‰çœ¼å¯è§åŒºåŸŸï¼‰å†…çš„å†…å®¹ã€‚</strong></p>
<p><strong>æ …æ ¼åŒ–ï¼š</strong></p>
<p>åˆæˆçº¿ç¨‹é€šè¿‡ IPC å‘ GPU è¿›ç¨‹ å‘å‡ºæŒ‡ä»¤ã€‚</p>
<p><strong>GPU è¿›ç¨‹ åˆ©ç”¨æ˜¾å¡çš„å¹¶è¡Œè®¡ç®—èƒ½åŠ›ï¼Œå°†å›¾å—æŒ‡ä»¤è½¬åŒ–ä¸ºæ˜¾å­˜ä¸­çš„ä½å›¾ã€‚</strong></p>
<p><strong>å¤åˆä¸ä¸Šå±ï¼š</strong></p>
<p><strong>åˆæˆçº¿ç¨‹æ”¶é›†æ‰€æœ‰å›¾å—ä½å›¾ï¼Œç”Ÿæˆä¸€ä»½â€œæŒ‡å¼•ï¼ˆCompositor Frameï¼‰â€ã€‚</strong>
<strong>æµè§ˆå™¨ä¸»è¿›ç¨‹ æ¥æ”¶è¯¥æŒ‡å¼•ï¼Œå°†ç½‘é¡µä½å›¾ä¸æµè§ˆå™¨å¤–å£³ï¼ˆåœ°å€æ ç­‰ï¼‰è¿›è¡Œå åŠ ï¼Œæœ€ç»ˆç”± GPU åˆ·æ–°åˆ°å±å¹•ä¸Šã€‚</strong></p>
<h5 data-id="heading-34">ä¸ºä»€ä¹ˆè¦æŠŠâ€œåˆæˆâ€ç‹¬ç«‹å‡ºæ¥ï¼Ÿ</h5>
<p><strong>éé˜»å¡æ»šåŠ¨ï¼šå½“ä¸»çº¿ç¨‹å› ä¸ºè¿è¡Œå¤æ‚çš„ JavaScript è€Œå¡æ­»æ—¶ï¼Œåˆæˆçº¿ç¨‹ ä¾ç„¶å¯ä»¥ç‹¬ç«‹å·¥ä½œã€‚å®ƒèƒ½ç›´æ¥åˆ©ç”¨ GPU æ˜¾å­˜é‡Œå·²æœ‰çš„ä½å›¾è¿›è¡Œä½ç§»åç§»ï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆå³ä¾¿ç½‘é¡µè„šæœ¬å¡é¡¿ï¼Œä½ ä¾ç„¶èƒ½æµç•…æ»‘åŠ¨ï¼ˆScrollï¼‰é¡µé¢çš„åŸå› ã€‚</strong></p>
<p><strong>ç¡¬ä»¶åŠ é€Ÿï¼šé€šè¿‡ transform æˆ– opacity åšçš„åŠ¨ç”»ï¼Œç›´æ¥åœ¨åˆæˆé˜¶æ®µå®Œæˆï¼Œä¸è§¦å‘ä¸»çº¿ç¨‹çš„â€œé‡æ’â€æˆ–â€œé‡ç»˜â€ï¼Œå®ç°äº†çœŸæ­£çš„æ€§èƒ½æœ€ä¼˜ã€‚</strong></p>
<h2 data-id="heading-35">å››ã€æµæ°´çº¿è§†è§’çš„é‡æ’ã€é‡ç»˜ä¸åˆæˆ</h2>
<p><strong>ç†è§£äº†å¤šè¿›ç¨‹åä½œçš„æ¸²æŸ“æµæ°´çº¿åï¼Œæˆ‘ä»¬å°±èƒ½ä»åº•å±‚é€»è¾‘è§£é‡Šï¼šä¸ºä»€ä¹ˆæœ‰çš„ä»£ç ä¼šè®©é¡µé¢å¡é¡¿ï¼Œè€Œæœ‰çš„ä»£ç å´èƒ½å®ç° 60fps çš„ä¸æ»‘åŠ¨ç”»ï¼Ÿ å…³é”®åœ¨äºä½ çš„æ“ä½œå¼ºè¿«æµæ°´çº¿â€œå›æº¯â€åˆ°äº†å“ªä¸€æ­¥ã€‚</strong></p>
<h4 data-id="heading-36">1. é‡æ’</h4>
<p>è§¦å‘åŸå› ï¼šä¿®æ”¹äº†å½±å“å‡ ä½•ç©ºé—´çš„å±æ€§ï¼ˆå¦‚ width, height, margin, padding, border, display ç­‰ï¼‰ï¼Œæˆ–è°ƒæ•´æµè§ˆå™¨çª—å£å¤§å°ã€‚</p>
<p><strong>æµæ°´çº¿å›æº¯ï¼š</strong></p>
<p>ä¸»çº¿ç¨‹ï¼šå¿…é¡»é‡æ–°ç»å† æ ·å¼è®¡ç®— -&gt; å¸ƒå±€  -&gt; å›¾å±‚åˆ†å±‚  -&gt; ç”Ÿæˆç»˜åˆ¶åˆ—è¡¨ ã€‚</p>
<p>åˆæˆçº¿ç¨‹ï¼šé‡æ–°è¿›è¡Œå›¾å—åˆ’åˆ†ã€‚</p>
<p>GPU è¿›ç¨‹ï¼šé‡æ–°è¿›è¡Œæ …æ ¼åŒ–å’Œä½å›¾ä¸Šä¼ ã€‚</p>
<p><strong>è¿™æ˜¯å¼€é”€æœ€å¤§çš„æ“ä½œï¼Œå› ä¸ºå®ƒè§¦å‘äº†å…¨é‡æµæ°´çº¿ï¼Œä¸”æ·±åº¦ä¾èµ–ä¸»çº¿ç¨‹çš„è®¡ç®—å‹åŠ›ã€‚</strong></p>
<h4 data-id="heading-37">2. é‡ç»˜</h4>
<p>è§¦å‘åŸå› ï¼šä¿®æ”¹äº†ä¸å½±å“å¸ƒå±€ã€ä»…å½±å“è§†è§‰å¤–è§‚çš„å±æ€§ï¼ˆå¦‚ color, background-color, visibility, box-shadow ç­‰ï¼‰ã€‚</p>
<p><strong>æµæ°´çº¿å›æº¯ï¼š</strong></p>
<p>ä¸»çº¿ç¨‹ï¼šè·³è¿‡å¸ƒå±€å’Œåˆ†å±‚ï¼Œç›´æ¥é‡æ–°ç”Ÿæˆ ç»˜åˆ¶è®°å½•ã€‚</p>
<p>åˆæˆ/GPU è¿›ç¨‹ï¼šé‡æ–°è¿›è¡Œæ …æ ¼åŒ–ã€‚</p>
<p><strong>å¼€é”€ä¸­ç­‰ã€‚è™½ç„¶é¿å¼€äº†å‡ ä½•å‡ ä½•è®¡ç®—ï¼Œä½†ä¾ç„¶éœ€è¦ä¸»çº¿ç¨‹ç”ŸæˆæŒ‡ä»¤å¹¶è§¦å‘ GPU é‡æ–°å–·è‰²ã€‚</strong></p>
<h4 data-id="heading-38">3. åˆæˆ (Composite)ï¼šç¡¬ä»¶åŠ é€Ÿçš„â€œè¶…è½¦é“â€</h4>
<p>è§¦å‘åŸå› ï¼šä½¿ç”¨ CSS çš„ transformï¼ˆä½ç§»ã€ç¼©æ”¾ã€æ—‹è½¬ï¼‰æˆ– opacityã€‚</p>
<p><strong>æµæ°´çº¿è¡¨ç°ï¼š</strong></p>
<p>ä¸»çº¿ç¨‹å®Œå…¨ä¸å‚ä¸ã€‚</p>
<p>åˆæˆçº¿ç¨‹ï¼šç›´æ¥æ¥æ”¶æŒ‡ä»¤ï¼Œåœ¨ GPU ä¸­åˆ©ç”¨å·²æœ‰çš„å›¾å—ä½å›¾è¿›è¡ŒçŸ©é˜µå˜æ¢ã€‚</p>
<p><strong>å¼€é”€æä½ã€‚è¿™æ˜¯å¤šè¿›ç¨‹æ¶æ„å¸¦æ¥çš„æœ€å¤§çº¢åˆ©â€”â€”åŠ¨ç”»ç›´æ¥åœ¨åˆæˆçº¿ç¨‹ä¸ GPU è¿›ç¨‹é—´é€šè®¯ï¼Œå³ä½¿æ­¤æ—¶ JS å¼•æ“åœ¨ä¸»çº¿ç¨‹é‡Œè·‘æ­»å¾ªç¯ï¼ŒåˆæˆåŠ¨ç”»ä¾ç„¶èƒ½æµç•…è¿è¡Œã€‚</strong></p>
<h2 data-id="heading-39">äº”ã€æ€»ç»“</h2>
<p>é€šè¿‡å¯¹æµè§ˆå™¨å¤šè¿›ç¨‹æ¶æ„åŠæ¸²æŸ“æµæ°´çº¿çš„æ·±åº¦è§£æ„ï¼Œæˆ‘ä»¬å¯ä»¥å‘ç°ï¼Œä»è¾“å…¥ URL åˆ°é¡µé¢å‘ˆç°ï¼Œæœ¬è´¨ä¸Šæ˜¯ä¸€åœºå¤šè¿›ç¨‹é—´çš„â€œæ¥åŠ›èµ›â€ä¸æµæ°´çº¿ä¸Šçš„â€œç²¾å¯†åŠ å·¥â€ã€‚</p>
<h3 data-id="heading-40">1. æ ¸å¿ƒé“¾è·¯å›é¡¾</h3>
<p>æˆ‘ä»¬å¯ä»¥å°†æ•´ä¸ªæ¼«é•¿çš„æµç¨‹æµ“ç¼©ä¸ºå››ä¸ªå…³é”®çš„ç¬é—´ï¼š</p>
<p>ä¸»è¿›ç¨‹ï¼šæ‹¦æˆªè¾“å…¥ï¼Œå¯åŠ¨å¯¼èˆªï¼ŒæŒ‡æŒ¥ç½‘ç»œéƒ¨å‡ºèˆªã€‚</p>
<p>ç½‘ç»œè¿›ç¨‹ï¼šæ‰“é€šé“¾è·¯ï¼Œå—…æ¢å†…å®¹ï¼Œå¹¶å»ºç«‹æŒ‡å‘æœªæ¥çš„æ•°æ®ç®¡é“ã€‚</p>
<p>æ¸²æŸ“è¿›ç¨‹-ä¸»çº¿ç¨‹ï¼šå°†å­—èŠ‚æµè½¬åŒ–ä¸º DOM/CSSOMï¼Œå¹¶åœ¨å‡ ä½•è®¡ç®—ä¸­ç¡®å®šæ¯ä¸€ä¸ªåƒç´ çš„åæ ‡ã€‚</p>
<p>åˆæˆçº¿ç¨‹ &amp; GPUï¼šåˆ©ç”¨ç¡¬ä»¶åŠ é€Ÿï¼Œå°†é€»è¾‘æŒ‡ä»¤è½¬åŒ–ä¸ºä½å›¾ï¼Œå®ç°æœ€ç»ˆçš„åƒç´ ä¸Šå±ã€‚</p>
<h3 data-id="heading-41">2. ç»™å‰ç«¯å¼€å‘çš„æ€§èƒ½å¯ç¤º</h3>
<p>ç†è§£äº†è¿™å¥—åº•å±‚æœºåˆ¶ï¼Œæˆ‘ä»¬å¯¹â€œæ€§èƒ½ä¼˜åŒ–â€çš„ç†è§£ä¾¿ä¸å†æµäºè¡¨é¢ï¼Œè€Œæ˜¯è¿›åŒ–ä¸ºä¸€ç§æµæ°´çº¿æ€ç»´ï¼š</p>
<p><strong>ä¿æŠ¤ä¸»çº¿ç¨‹ï¼šGUI æ¸²æŸ“ä¸ JS æ‰§è¡Œçš„äº’æ–¥æ€§å‘Šè¯‰æˆ‘ä»¬ï¼Œé•¿ä»»åŠ¡æ˜¯æ‰å¸§çš„å…ƒå‡¶ã€‚æˆ‘ä»¬åº”å½“åˆ©ç”¨ Web Workers æˆ–æ—¶é—´åˆ‡ç‰‡æ¥é‡Šæ”¾ä¸»çº¿ç¨‹ã€‚</strong></p>
<p><strong>å–„ç”¨åˆæˆå™¨ï¼šä¼˜å…ˆä½¿ç”¨ transform å’Œ opacity å®ç°åŠ¨ç”»ï¼Œæœ¬è´¨ä¸Šæ˜¯åœ¨åˆ©ç”¨å¤šè¿›ç¨‹æ¶æ„çš„çº¢åˆ©ï¼Œç»•è¿‡æ‹¥æŒ¤çš„ä¸»çº¿ç¨‹ï¼Œèµ° GPU åŠ é€Ÿçš„â€œè¶…è½¦é“â€ã€‚</strong></p>
<p><strong>å°Šé‡é‡æ’è§„å¾‹ï¼šå‡å°‘å¯¹ offsetWidth ç­‰å±æ€§çš„é¢‘ç¹è¯»å–ï¼Œå®è´¨ä¸Šæ˜¯åœ¨ä¿æŠ¤æµæ°´çº¿ä¸è¢«â€œå¼ºåˆ¶åŒæ­¥å¸ƒå±€â€æ‰“æ–­ï¼Œé¿å…æ˜‚è´µçš„é‡å¤è®¡ç®—ã€‚</strong></p>
<h3 data-id="heading-42">3. å†™åœ¨æœ€å</h3>
<p>æµè§ˆå™¨ä½œä¸ºç°ä»£æœ€å¤æ‚çš„è½¯ä»¶ä¹‹ä¸€ï¼Œå…¶å¤šè¿›ç¨‹æ¶æ„æ˜¯ç¨³å®šæ€§ã€å®‰å…¨æ€§å’Œé«˜æ€§èƒ½<strong>å·´å·´åšå¼ˆ</strong>åçš„ç»ˆææ–¹æ¡ˆã€‚</p>
<p>ä½œä¸ºå¼€å‘è€…ï¼Œç†è§£åº•å±‚æ˜¯ä¸ºäº†æ›´è‡ªç”±åœ°æ„å»ºä¸Šå±‚ã€‚ å½“ä½ å†æ¬¡æ‰“å¼€æµè§ˆå™¨çš„ Performance é¢æ¿ï¼Œçœ‹åˆ°é‚£äº›äº¤ç»‡çš„è¿›ç¨‹ä¸çº¿ç¨‹æ›²çº¿æ—¶ï¼Œä½ çœ‹åˆ°çš„ä¸å†æ˜¯æ¯ç‡¥çš„æ•°æ®ï¼Œè€Œæ˜¯ä¸€åœºç”±æ•°ä¸‡è¡Œ C++ ä»£ç æ”¯æ’‘ã€æ¯«ç§’å¿…äº‰çš„åä½œäº¤å“ä¹ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[GIS æ•°æ®è½¬æ¢ï¼šä½¿ç”¨ GDAL å°† Shp è½¬æ¢ä¸º GeoJSON æ•°æ®]]></title>    <link>https://juejin.cn/post/7589477775210430516</link>    <guid>https://juejin.cn/post/7589477775210430516</guid>    <pubDate>2025-12-30T12:49:19.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589477775210430516" data-draft-id="7589494631005601827" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="GIS æ•°æ®è½¬æ¢ï¼šä½¿ç”¨ GDAL å°† Shp è½¬æ¢ä¸º  GeoJSON æ•°æ®"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-30T12:49:19.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="GISä¹‹è·¯"/> <meta itemprop="url" content="https://juejin.cn/user/4346787284915481"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            GIS æ•°æ®è½¬æ¢ï¼šä½¿ç”¨ GDAL å°† Shp è½¬æ¢ä¸º  GeoJSON æ•°æ®
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4346787284915481/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    GISä¹‹è·¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-30T12:49:19.000Z" title="Tue Dec 30 2025 12:49:19 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<blockquote>
<p>â</p>
<p>GeoJSON ä½œä¸ºä¸€ç§é€šç”¨çš„åœ°ç†æ•°æ®æ ¼å¼ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿åœ°ç”¨äºå…±äº«äº¤æ¢ã€‚åœ¨ GIS å¼€å‘ä¸­ï¼Œç»å¸¸éœ€è¦è¿›è¡Œæ•°æ®çš„è½¬æ¢å¤„ç†ï¼Œå…¶ä¸­å¸¸è§çš„ä¾¿æ˜¯å°† Shp è½¬æ¢ä¸º GeoJSON æ•°æ®è¿›è¡Œå±•ç¤ºã€‚</p>
</blockquote>
<p>æœ‰å…³<code>GeoJSON</code>æ•°æ®çš„è¯¦ç»†ä»‹ç»ï¼Œè¯·å‚è€ƒå¾€æœŸæ–‡ç« ï¼š<strong>GeoJSON æ•°æ®ç®€ä»‹</strong></p>
<p>åœ¨ä¹‹å‰çš„æ–‡ç« ä¸­è®²äº†å¦‚ä½•ä½¿ç”¨<code>GDAL</code>æˆ–è€…<code>ogr2ogr</code>å·¥å…·å°†<code>txt</code>ä»¥åŠ<code>csv</code>æ–‡æœ¬æ•°æ®è½¬æ¢ä¸º<code>Shp</code>æ ¼å¼ï¼Œæœ¬ç¯‡æ•™ç¨‹åœ¨ä¹‹å‰ä¸€ç³»åˆ—æ–‡ç« çš„åŸºç¡€ä¸Šè®²è§£å¦‚ä½•ä½¿ç”¨<code>GDAL</code>å°†<code>Shp</code>è½¬æ¢ä¸º<code>GeoJSON</code>æ•°æ®ã€‚</p>
<ul>
<li>GDAL ç®€ä»‹</li>
<li>GDAL ä¸‹è½½å®‰è£…</li>
<li>GDAL å¼€å‘èµ·æ­¥</li>
</ul>
<p>å¦‚æœä½ è¿˜æ²¡æœ‰çœ‹è¿‡ï¼Œå»ºè®®ä»ä»¥ä¸Šå†…å®¹å¼€å§‹ã€‚</p>
<h2 data-id="heading-1">1. å¼€å‘ç¯å¢ƒ</h2>
<p>æœ¬æ–‡ä½¿ç”¨å¦‚ä¸‹å¼€å‘ç¯å¢ƒï¼Œä»¥ä¾›å‚è€ƒã€‚</p>
<p>æ—¶é—´ï¼š<code>2025å¹´</code></p>
<p>ç³»ç»Ÿï¼š<code>Windows 11</code></p>
<p>Pythonï¼š<code>3.11.7</code></p>
<p>GDALï¼š<code>3.11.1</code></p>
<h2 data-id="heading-2">2. æ•°æ®å‡†å¤‡</h2>
<p><strong>å¦‚ä¸‹æ˜¯æœ¬æ–‡é€‰å–çš„ä¸–ç•Œè¾¹ç•ŒèŒƒå›´çš„Shpæ•°æ®ç»“æ„ï¼š</strong> <img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ceb55ac33e924cce9d129203dfd909f1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR0lT5LmL6Lev:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767703759&amp;x-signature=eBBh13tm3SXk%2B4q0w8HVBF0GePA%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/815ee2daf18e4d2584886689a769545d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR0lT5LmL6Lev:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767703759&amp;x-signature=wu2rG%2FQgBri44j9NGIv2PJRoxe4%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-3">3. å¯¼å…¥ä¾èµ–</h2>
<p><code>Shp</code>ä½œä¸ºä¸€ç§çŸ¢é‡æ•°æ®æ ¼å¼ï¼Œå¯ä»¥ä½¿ç”¨çŸ¢é‡åº“<code>OGR</code>è¿›è¡Œå¤„ç†ï¼Œä»¥å®ç°<code>Shp</code>æ•°æ®è½¬æ¢ä¸º<code>GeoJSON</code>æ ¼å¼ã€‚è¿˜éœ€è¦å¼•å…¥<code>osr</code>æ¨¡å—ç”¨äºåæ ‡å®šä¹‰ä»¥åŠ<code>json</code>æ¨¡å—ç”¨äºå‡ ä½•æ•°æ®è½¬æ¢ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">from</span>Â osgeoÂ <span class="hljs-keyword">import</span>Â ogr,osr
<span class="hljs-keyword">import</span>Â os
<span class="hljs-keyword">import</span>Â json
</code></pre>
<h2 data-id="heading-4">4. æ•°æ®è¯»å–ä¸è½¬æ¢</h2>
<p>å®šä¹‰ä¸€ä¸ªæ–¹æ³•<code>Shp2GeoJSON(shpPath,jsonPath)</code>ç”¨äºå°†<code>Shp</code>æ•°æ®è½¬æ¢ä¸º<code>GeoJSON</code>æ•°æ®ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-string">"""
è¯´æ˜ï¼šå°†Â GeoJSONÂ æ–‡ä»¶è½¬æ¢ä¸ºÂ ShapfileÂ æ–‡ä»¶
å‚æ•°ï¼š
Â Â Â Â -shpPathï¼šShpÂ æ–‡ä»¶è·¯å¾„
Â Â Â Â -jsonPathï¼šGeoJSONÂ æ–‡ä»¶è·¯å¾„
"""</span>
<span class="hljs-keyword">def</span>Â <span class="hljs-title function_">Shp2GeoJSON</span>(<span class="hljs-params">shpPath,jsonPath</span>):
</code></pre>
<p>åœ¨è¿›è¡Œ<code>GeoJSON</code>æ•°æ®æ ¼å¼è½¬æ¢ä¹‹å‰ï¼Œéœ€è¦æ£€æŸ¥<code>Shp</code>æ•°æ®è·¯å¾„æ˜¯å¦å­˜åœ¨ã€‚</p>
<pre><code class="hljs language-lua" lang="lua">#Â æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨
<span class="hljs-keyword">if</span>Â <span class="hljs-built_in">os</span>.<span class="hljs-built_in">path</span>.exists(shpPath):
Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">"shpÂ æ–‡ä»¶å­˜åœ¨ã€‚"</span>)
<span class="hljs-keyword">else</span>:
Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">"shpÂ æ–‡ä»¶ä¸å­˜åœ¨ï¼Œè¯·æ£€æŸ¥æ•°æ®è·¯å¾„ï¼"</span>)
Â Â Â Â <span class="hljs-keyword">return</span>
</code></pre>
<p>æ‰“å¼€<code>Shp</code>æ•°æ®æºã€‚</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment">#Â è¯»å–Shpæ–‡ä»¶</span>
<span class="hljs-attr">shpDataSource</span>Â =Â ogr.Open(shpPath)
<span class="hljs-attr">shpLayer</span>Â =Â shpDataSource.GetLayer()
</code></pre>
<p>é¦–å…ˆæ„é€ ä¸€ä¸ª<code>GeoJSON</code>ç©ºæ•°æ®ç»“æ„ï¼Œç”¨äºå¡«å……<code>Shp</code>å±æ€§æ•°æ®ã€‚</p>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-comment">#Â æ„é€ GeoJSONå¯¹è±¡</span>
geoJSONÂ =Â {
Â Â Â Â <span class="hljs-string">"type"</span>:<span class="hljs-string">"FeatureCollection"</span>,
Â Â Â Â <span class="hljs-string">"features"</span>:[]
}
</code></pre>
<p>è¯»å–å¹¶éå†<code>Shp</code>å›¾å±‚ï¼Œå°†å‡ ä½•å¯¹è±¡ä»¥åŠå±æ€§å¯¹è±¡å¤åˆ¶åˆ°<code>GeoJSON</code>å¯¹è±¡ä¸­ã€‚ä½¿ç”¨<code>ExportToJson</code>æ–¹æ³•å°†å‡ ä½•æ•°æ®è½¬æ¢ä¸º<code>JSON</code>æ ¼å¼ï¼Œç„¶åä½¿ç”¨<code>json.loads</code>æ–¹æ³•è¿›è¡ŒåŠ è½½ï¼Œå±æ€§è¯»å–å®Œæˆä¹‹åï¼Œå°†è¦ç´ æ·»åŠ åˆ°è¦ç´ é›†åˆä¸­ã€‚</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment">#Â éå†æ‰€æœ‰è¦ç´ </span>
forÂ featureÂ inÂ shpLayer:
Â Â Â Â <span class="hljs-comment">#Â å‡ ä½•å¯¹è±¡</span>
Â Â Â Â <span class="hljs-attr">geom</span>Â =Â feature.GetGeometryRef()
Â Â Â Â <span class="hljs-comment">#Â æ„é€ GeoJSONÂ Featureå¯¹è±¡</span>
Â Â Â Â <span class="hljs-attr">featureJSON</span>Â =Â {
Â Â Â Â Â Â Â Â "type":"Feature",
Â Â Â Â Â Â Â Â "geometry":json.loads(geom.ExportToJson()),
Â Â Â Â Â Â Â Â "property":{}
Â Â Â Â }

Â Â Â Â <span class="hljs-comment">#Â è·å–å±æ€§</span>
Â Â Â Â <span class="hljs-attr">fieldCount</span>Â =Â feature.GetFieldCount()
Â Â Â Â forÂ iÂ inÂ range(fieldCount):
Â Â Â Â Â Â Â Â <span class="hljs-attr">fieldName</span>Â =Â feature.GetFieldDefnRef(i).GetName()
Â Â Â Â Â Â Â Â <span class="hljs-attr">fieldValue</span>Â =Â feature.GetField(i)
Â Â Â Â Â Â Â Â featureJSON<span class="hljs-section">["property"]</span><span class="hljs-section">[fieldName]</span>Â =Â fieldValue

Â Â Â Â <span class="hljs-comment">#Â æ·»åŠ è¦ç´ </span>
Â Â Â Â geoJSON<span class="hljs-section">["features"]</span>.append(featureJSON)
</code></pre>
<p>åœ¨<code>Shp</code>æ•°æ®è¯»å–å®Œæˆä¹‹åï¼Œå°†å…¶ä¿å­˜åˆ°<code>GeoJSON</code>æ–‡ä»¶ä¸­ï¼Œå¹¶å…³é—­æ•°æ®æºã€‚</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment">#Â å†™å…¥æ–‡ä»¶</span>
withÂ open(jsonPath,"w",<span class="hljs-attr">encoding</span>=<span class="hljs-string">"UTF-8"</span>)Â asÂ f:
Â Â Â Â json.dump(geoJSON,f,<span class="hljs-attr">ensure_ascii</span>=<span class="hljs-literal">False</span>,Â indent=<span class="hljs-number">2</span>)

<span class="hljs-comment">#Â å…³é—­æ•°æ®æº</span>
<span class="hljs-attr">shpDataSource</span>Â =Â None
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Manusè¢«æ”¶è´­ï¼Œæ™ºè°±ä¹Ÿå®šäº†8å¤©åä¸Šå¸‚]]></title>    <link>https://juejin.cn/post/7589325011544637478</link>    <guid>https://juejin.cn/post/7589325011544637478</guid>    <pubDate>2025-12-30T11:04:27.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589325011544637478" data-draft-id="7589474656874790922" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Manusè¢«æ”¶è´­ï¼Œæ™ºè°±ä¹Ÿå®šäº†8å¤©åä¸Šå¸‚"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½,OpenAI"/> <meta itemprop="datePublished" content="2025-12-30T11:04:27.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æœºå™¨ä¹‹å¿ƒ"/> <meta itemprop="url" content="https://juejin.cn/user/1873223543167902"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Manusè¢«æ”¶è´­ï¼Œæ™ºè°±ä¹Ÿå®šäº†8å¤©åä¸Šå¸‚
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1873223543167902/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æœºå™¨ä¹‹å¿ƒ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-30T11:04:27.000Z" title="Tue Dec 30 2025 11:04:27 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>AI å¤§æ–°é—»ï¼Œä¸€æ¡©æ¥ä¸€æ¡©ã€‚</p>
<p>æ—©ä¸Šåˆšä¼ æ¥Â <a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzA3MzI4MjgzMw%3D%3D%26mid%3D2651009685%26idx%3D1%26sn%3Dbfc44e95b106534d25b4002c3e701ee3%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzA3MzI4MjgzMw==&amp;mid=2651009685&amp;idx=1&amp;sn=bfc44e95b106534d25b4002c3e701ee3&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">ManusÂ </a>è¢« Meta æ”¶è´­çš„æ¶ˆæ¯ï¼Œå¾ˆå¿«ï¼Œå›´ç»•ã€Œå…¨çƒå¤§æ¨¡å‹ç¬¬ä¸€è‚¡ã€çš„ç«é€Ÿï¼Œä¹Ÿä¼ æ¥é´å­è½åœ°çš„å£°å“ã€‚</p>
<p>12 æœˆ 30 æ—¥ï¼ŒåŒ—äº¬æ™ºè°±åç« ç§‘æŠ€è‚¡ä»½æœ‰é™å…¬å¸ï¼ˆä»¥ä¸‹ç®€ç§°ã€Œæ™ºè°±ã€ï¼‰æ­£å¼å¯åŠ¨æ¸¯è‚¡æ‹›è‚¡ã€‚æ‹›è‚¡æœŸå°†æŒç»­è‡³ 2026 å¹´ 1 æœˆ 5 æ—¥ï¼Œå¹¶è®¡åˆ’äº 2026 å¹´ 1 æœˆ 8 æ—¥ä»¥è‚¡ç¥¨ä»£ç  â€œ2513â€ åœ¨é¦™æ¸¯è”äº¤æ‰€ä¸»æ¿æŒ‚ç‰Œä¸Šå¸‚ã€‚</p>
<p>æ ¹æ®æ‹›è‚¡å®‰æ’ï¼Œæ™ºè°±æ‹Ÿè¿›è¡Œå…¨çƒå‘å”® 3741.95 ä¸‡è‚¡ H è‚¡ï¼Œå…¶ä¸­é¦™æ¸¯å…¬å¼€å‘å”® 187.1 ä¸‡è‚¡ H è‚¡ï¼Œå›½é™…å‘å”® 3554.85 ä¸‡è‚¡ H è‚¡ã€‚</p>
<p>IPO çš„å®šä»·ä¸å‹Ÿèµ„è§„æ¨¡ä¹Ÿéšä¹‹æ­æ™“ â€”â€” æ¯è‚¡å‘è¡Œä»·å®šä¸º 116.20 æ¸¯å…ƒã€‚åœ¨æ‰£é™¤ç›¸å…³å‘è¡Œè´¹ç”¨åï¼Œé¢„è®¡æœ¬æ¬¡å‹Ÿèµ„è§„æ¨¡çº¦ 43 äº¿æ¸¯å…ƒï¼Œå¯¹åº”çš„ IPO å¸‚å€¼é¢„è®¡å°†è¶…è¿‡ 511 äº¿æ¸¯å…ƒã€‚</p>
<p>å…¬å¼€ä¿¡æ¯æ˜¾ç¤ºï¼Œæ™ºè°±åœ¨ç§å‹Ÿå¸‚åœºçš„ç´¯è®¡èèµ„é¢å·²è¾¾ 83.44 äº¿å…ƒï¼Œæœ€æ–°ä¼°å€¼æ”€å‡è‡³ 243.77 äº¿å…ƒã€‚è¿™æ„å‘³ç€ï¼Œåœ¨è¿ˆå‘ä¸Šå¸‚çš„å…³é”®ä¸€è·ƒä¸­ï¼Œæ™ºè°±çš„å¸‚å€¼å‡ ä¹å®ç°ç¿»å€ï¼Œå¦‚æ­¤å¹…åº¦çš„ã€Œæº¢ä»·ä¸Šå¸‚ã€ï¼Œä¹Ÿæ˜¯ä¸€æ¬¡éš¾åº¦ä¸ä½çš„å¸‚åœºæŒ‘æˆ˜ã€‚</p>
<p>åŸºçŸ³æŠ•èµ„è€…é˜µå®¹åŒæ ·é¢‡ä¸ºäº®çœ¼ã€‚å…¬å‘Šæ˜¾ç¤ºï¼ŒåŸºçŸ³æŠ•èµ„è€…åˆè®¡æ‹Ÿè®¤è´­ 29.8 äº¿æ¸¯å…ƒï¼Œå æœ¬æ¬¡å‘è¡Œè§„æ¨¡è¿‘ä¸ƒæˆï¼ˆå‡è®¾è¶…é¢é…è‚¡æƒæœªè·è¡Œä½¿ï¼‰ã€‚</p>
<p>å‚ä¸åŸºçŸ³è®¤è´­çš„æœºæ„åŒ…æ‹¬ï¼š JSC International Investment Fund SPCã€JinYi Capital Multi-Strategy Fund SPCã€Perseveranc Asset Managementã€ä¸Šæµ·é«˜æ¯…èµ„äº§ç®¡ç†ã€WT Asset Managementã€æ³°åº·äººå¯¿ã€å¹¿å‘åŸºé‡‘ã€3W Fund Management ç­‰ 11 å®¶æŠ•èµ„æœºæ„ã€‚</p>
<p>åœ¨å½“å‰æ¸¯è‚¡ç§‘æŠ€èµ„äº§æ•´ä½“æ‰¿å‹çš„èƒŒæ™¯ä¸‹ï¼Œå¦‚æ­¤é«˜æ¯”ä¾‹çš„åŸºçŸ³è®¤è´­ï¼Œä¹Ÿä¸ºè¿™åœºå›´ç»•ã€Œå…¨çƒå¤§æ¨¡å‹ç¬¬ä¸€è‚¡ã€çš„ç«é€Ÿï¼Œå†™ä¸‹äº†æ›´ä¸ºæ˜ç¡®çš„å¸‚åœºæ³¨è„šã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e168498cee594de6b617e31102e48ed1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767697467&amp;x-signature=VT6RhUMtU0rqMe0t3GZbvznxaqU%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>çƒ§é’±è¿˜åœ¨ç»§ç»­ï¼Œå¤§æ¨¡å‹å¼€å§‹èµ°å‘èµ„æœ¬å¸‚åœº</p>
<p>æ”¾çœ¼è¡Œä¸šå†…éƒ¨ï¼Œ2024 å¹´æ›¾è¢«çƒ­æ§çš„ AI å¤§æ¨¡å‹åˆ›ä¸šé˜µè¥ã€Œå…­å°è™ã€ï¼Œå·²ç»å‡ºç°æ˜æ˜¾åˆ†åŒ–ï¼šä¸¤å®¶é€‰æ‹©ä¸»åŠ¨é€€å‡ºåŸºåº§æ¨¡å‹ç«äº‰ï¼Œè½¬è€Œèšç„¦å‚ç›´åº”ç”¨ã€‚</p>
<p>å…¶ä½™å››å®¶ â€”â€” æ™ºè°±ã€MiniMaxã€æœˆä¹‹æš—é¢ä¸é˜¶è·ƒæ˜Ÿè¾° â€”â€” ä»è¯•å›¾ç•™åœ¨å¤§æ¨¡å‹è¿™å¼ ç‰Œæ¡Œä¹‹ä¸Šã€‚2024 å¹´ 12 æœˆä¸­ä¸‹æ—¬ï¼Œæ™ºè°±ä¸ MiniMax å…ˆåæŠ«éœ²æ¸¯è‚¡æ‹›è‚¡ä¹¦ã€‚</p>
<p>ä¸ MiniMax ä¸“æ³¨ to C ä¸åŒï¼Œæ™ºè°±ä¸»è¦ä¸“æ³¨ä¼ä¸šçº§æ–¹æ¡ˆï¼ˆto Bï¼‰ï¼Œå·²è½åœ°é‡‘èæœåŠ¡ã€äº’è”ç½‘ã€æ™ºèƒ½è®¾å¤‡ã€åŒ»ç–—ç­‰è¡Œä¸šã€‚</p>
<p>ä»Šå¹´ä¸ŠåŠå¹´æ™ºè°±æ”¶å…¥ä¸º 1.91 äº¿å…ƒï¼ŒæœŸå†…äºæŸé«˜è¾¾ 23.58 äº¿å…ƒï¼ŒAI ç ”å‘æˆæœ¬é«˜è¾¾ 15.95 äº¿å…ƒã€‚</p>
<p>å¦‚æœè¯´ï¼Œ2023 å¹´ä¸€çº§å¸‚åœºç»™äºˆå¤§æ¨¡å‹åˆ›ä¸šå…¬å¸çš„é«˜ä¼°å€¼ï¼Œæ›´å¤šæ˜¯æŠ¼æ³¨å®å¤§çš„æŠ€æœ¯å™äº‹ã€‚é‚£ä¹ˆè¿›å…¥ 2024â€”2025 å¹´ï¼Œå¸‚åœºå¼€å§‹æ›´æ˜ç¡®åœ°è½¬å‘æ¨¡å‹èƒ½åŠ›ä¸å•†ä¸šåŒ–å…‘ç°è·¯å¾„ã€‚</p>
<p>å³ä¾¿æ˜¯å¤´éƒ¨å…¬å¸ï¼Œä¹Ÿéš¾ä»¥ç»•å¼€å¯¹åŸºåº§æ¨¡å‹çš„æŒç»­æŠ•å…¥ï¼Œå¤§æ¨¡å‹åˆ›ä¸šå…¬å¸ä¹Ÿè¦ç›´é¢èƒ½å¦æŒç»­æ¨è¿›æ¨¡å‹è¿­ä»£ã€æ¢ç´¢åº”ç”¨åœºæ™¯è½åœ°çš„æŒ‘æˆ˜ã€‚</p>
<p>è€Œè¿™äº›ï¼Œåœ¨å¾ˆå¤§ç¨‹åº¦ä¸Šï¼Œå–å†³äºèµ„æœ¬å¸‚åœºæ˜¯å¦æ„¿æ„æä¾›é•¿æœŸã€ç¨³å®šçš„èµ„é‡‘æ”¯æŒã€‚</p>
<p>ä»Šå¹´ 4 æœˆï¼Œæ™ºè°±æ›¾åœ¨è¯ç›‘ä¼šåŒ—äº¬ç›‘ç®¡å±€å¼€å¯ A è‚¡ä¸Šå¸‚è¾…å¯¼å¤‡æ¡ˆã€‚ä½†æˆªè‡³ 12 æœˆ 12 æ—¥ï¼Œå…¬å¸å¹¶æœªæ”¶åˆ°ä¸­å›½è¯ç›‘ä¼šå…³äºæ¨è¿› A è‚¡ä¸Šå¸‚çš„è¿›ä¸€æ­¥æ„è§æˆ–é—®è¯¢ã€‚</p>
<p>åœ¨æ­¤èƒŒæ™¯ä¸‹ï¼Œæ™ºè°±é€‰æ‹©è½¬å‘æ¸¯è‚¡ï¼Œä¸ºè¿™åœºé«˜æŠ•å…¥ã€é•¿å‘¨æœŸçš„å¤§æ¨¡å‹ç«èµ›å¯»æ‰¾æ›´å¯æŒç»­çš„ç‡ƒæ–™ã€‚åŒæ—¶ï¼Œä¹Ÿå°†ç›´é¢èèµ„èƒ½åŠ›ä¸å¸‚åœºä¿¡å¿ƒçš„åŒé‡è€ƒéªŒ â€”â€” æ˜¯å¦æœ‰äººæ„¿æ„ä¸º AI çš„é•¿æœŸæŠ•å…¥ä¹°å•ã€‚</p>
<p>ä» GLM åˆ° MaaSï¼šæ™ºè°±çš„å¤§æ¨¡å‹æŠ€æœ¯åº•åº§ä¸å•†ä¸šåŒ–è·¯å¾„</p>
<p>æ‹›è‚¡ä¹¦æ˜¾ç¤ºï¼Œæ™ºè°±ä¸»è¦æä¾›ä»ç®—åŠ›ã€API æ¥å£åˆ° MaaSï¼ˆæ¨¡å‹å³æœåŠ¡ï¼‰çš„æœåŠ¡ï¼Œæ”¯æŒæœ¬åœ°å’Œäº‘ç«¯ä¸¤ç§éƒ¨ç½²æ¨¡å¼ï¼Œå·²è½åœ°å¤šä¸ªè¡Œä¸šã€‚</p>
<p>ä½œä¸ºå›½å†…ä»äº‹é€šç”¨è¯­è¨€æ¨¡å‹ç ”ç©¶ä¸äº§ä¸šåŒ–çš„ä»£è¡¨æ€§å…¬å¸ä¹‹ä¸€ï¼Œæ™ºè°±æŠ€æœ¯ä½“ç³»ä»¥ GLM ä¸ºæ ¸å¿ƒï¼Œè¦†ç›–æ–‡æœ¬ã€å¤šæ¨¡æ€ä¸é¢å‘åº”ç”¨çš„æ¨¡å‹æœåŠ¡ã€‚</p>
<p>GLM å±äºåŸºäº Transformer çš„å¤§è¯­è¨€æ¨¡å‹å»ºæ¨¡èŒƒå¼ï¼Œé€šè¿‡å°†è‡ªå›å½’ç”Ÿæˆä¸æ©ç é¢„æµ‹ç›¸ç»“åˆï¼Œå®ç°å¯¹ç†è§£ç±»ä¸ç”Ÿæˆç±»ä»»åŠ¡çš„ç»Ÿä¸€å»ºæ¨¡ã€‚è¯¥æ¶æ„æœ€æ—©ç”±æ™ºè°±ä¸æ¸…åå¤§å­¦ç›¸å…³ç ”ç©¶å›¢é˜Ÿæå‡ºï¼Œå¹¶åœ¨åç»­æ¨¡å‹ä¸­æŒç»­è¿­ä»£ã€‚</p>
<p>2021 å¹´ï¼Œæ™ºè°±å‘å¸ƒä¸­å›½é¦–ä¸ªä¸“æœ‰é¢„è®­ç»ƒå¤§æ¨¡å‹æ¡†æ¶ GLMï¼Œå¹¶æ¨å‡ºäº†æ¨¡å‹å³æœåŠ¡ï¼ˆMaaSï¼‰çš„äº§å“å¼€å‘ä¸å•†ä¸šåŒ–å¹³å°ï¼Œé€šè¿‡è¯¥å¹³å°å‘å¤–éƒ¨æä¾›å¤§æ¨¡å‹èƒ½åŠ›ä¸æœåŠ¡ã€‚</p>
<p>2022 å¹´æ™ºè°±å‘å¸ƒå¹¶å¼€æº GLM-130Bï¼ˆä¸­è‹±åŒè¯­åƒäº¿å‚æ•°æ¨¡å‹ï¼‰ï¼Œè¯¥æ¨¡å‹çš„æ¨å‡ºæ ‡å¿—ç€æ™ºè°±æ­£å¼å°† GLM ä½“ç³»è¿ç”¨äºé¢„è®­ç»ƒå¤§è¯­è¨€æ¨¡å‹ä¹‹ä¸Šã€‚</p>
<p>2024 å¹´ 1 æœˆï¼ŒGLM ç³»åˆ—è¿æ¥é‡è¦èŠ‚ç‚¹ï¼ŒGLM-4 ä¸Šçº¿ï¼Œæ”¯æŒæ›´é•¿çš„ä¸Šä¸‹æ–‡ï¼ŒåŒæ—¶æ¨ç†é€Ÿåº¦æ›´å¿«ï¼Œå¤§å¤§é™ä½æ¨ç†æˆæœ¬ã€‚</p>
<p>2025 å¹´ 7 æœˆï¼Œæ™ºè°±è¿›ä¸€æ­¥å¼€æº GLM-4.5ã€‚è¯¥æ¨¡å‹é¦–å‘ 48 å°æ—¶å†…ï¼Œç™»é¡¶ Hugging Faceï¼ˆå…¨çƒæœ€å¤§çš„å¼€æºæ¨¡å‹å¹³å°ï¼‰çƒ­é—¨æ¦œå…¨çƒç¬¬ä¸€ã€‚</p>
<p>åŒå¹´ 9 æœˆï¼Œæ™ºè°±å‘å¸ƒå¹¶å¼€æº GLM-4.6ï¼Œä½œä¸ºåŸºåº§æ¨¡å‹çš„è¿›ä¸€æ­¥å‡çº§ç‰ˆæœ¬ï¼ŒGLM-4.6 ä¸»è¦å¼ºåŒ–äº†ç¼–ç èƒ½åŠ›ã€‚11 æœˆï¼ŒGLM-4.6 åœ¨ CodeArena ä¸Šä½åˆ—å…¨çƒç¬¬ä¸€ã€‚</p>
<p>12 æœˆï¼Œæ™ºè°±æ¨å‡ºæœ€æ–°æ——èˆ°æ¨¡å‹ GLM-4.7ï¼š</p>
<ul>
<li>
<p>åœ¨æ ¸å¿ƒç¼–ç æ–¹é¢ï¼Œç›¸è¾ƒå‰ä¸€ä»£ GLM-4.6ï¼ŒGLM-4.7 åœ¨å¤šè¯­è¨€æ™ºèƒ½ä½“ç¼–ç¨‹ä¸åŸºäºç»ˆç«¯çš„ä»»åŠ¡ä¸Šå–å¾—äº†æ˜æ˜¾æå‡ï¼ŒSWE-bench 73.8%ï¼ˆ+5.8%ï¼‰ã€SWE-bench Multilingual 66.7%ï¼ˆ+12.9%ï¼‰ã€‚</p>
</li>
<li>
<p>æ°›å›´ç¼–ç¨‹ï¼šGLM-4.7 åœ¨ UI ç”Ÿæˆè´¨é‡ä¸Šå®ç°äº†é‡è¦è·ƒå‡ï¼Œèƒ½å¤Ÿç”Ÿæˆæ›´åŠ ç®€æ´ã€ç°ä»£åŒ–çš„ç½‘é¡µç•Œé¢ï¼Œå¹¶åœ¨æ¼”ç¤ºæ–‡ç¨¿ç”Ÿæˆæ–¹é¢æä¾›æ›´å‡†ç¡®çš„å¸ƒå±€ä¸å°ºå¯¸æ§åˆ¶ï¼Œæ•´ä½“è§†è§‰æ•ˆæœæ›´ä½³ã€‚</p>
</li>
<li>
<p>å·¥å…·è°ƒç”¨ï¼šGLM-4.7 çš„å·¥å…·ä½¿ç”¨èƒ½åŠ›æ˜¾è‘—æå‡ï¼Œåœ¨ BrowseComp æ‰€è¦†ç›–çš„ç½‘é¡µæµè§ˆä»»åŠ¡ä¸­å±•ç°å‡ºæ›´å¼ºçš„å®é™…æ“ä½œèƒ½åŠ›ã€‚</p>
</li>
<li>
<p>å¤æ‚æ¨ç†ä¸Šï¼šåœ¨ HLEï¼ˆHumanityâ€™s Last Examï¼‰ åŸºå‡†æµ‹è¯•ä¸­å–å¾— 42.8% çš„æˆç»©ï¼Œç›¸æ¯” GLM-4.6 æå‡ 12.4 ä¸ªç™¾åˆ†ç‚¹ã€‚</p>
</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/893e5f0b099f4df999dd2443a83b8959~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767697467&amp;x-signature=CmtyEeVUmunWZfwWA%2FvPEBgdgrA%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ä¸ GPT-5ã€GPT-5.1-Highã€Claude Sonnet 4.5ã€Gemini 3.0 Proã€DeepSeek-V3.2ã€Kimi K2 Thinking ç›¸æ¯”ï¼ŒGLM-4.7 ä¹Ÿè¡¨ç°å‡ºè‰²ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e0e302ad82604163bbbcd18d70860ed5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767697467&amp;x-signature=dBK9NSGYu45E3SzYPvXX2bUTHrI%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ä¸æ­¤åŒæ—¶ï¼Œæ™ºè°±è¿˜å‘å¸ƒäº†é¢å‘ä¸åŒåŠŸèƒ½çš„å¤šæ¨¡æ€æ¨¡å‹ï¼ŒåŒ…æ‹¬ CogViewï¼ˆå›¾åƒç”Ÿæˆï¼‰ã€GLM-4.5Vï¼ˆè§†è§‰ç†è§£ä¸æ¨ç†ï¼‰ã€CogVideoXï¼ˆè§†é¢‘ç”Ÿæˆï¼‰ç­‰ã€‚</p>
<p>åœ¨ AI Agent æ–¹é¢ï¼Œæ™ºè°±åŸºåº§æ™ºèƒ½ä½“æ¨¡å‹ä¸º AutoGLMã€‚12 æœˆæ™ºè°±å°† AutoGLM çš„æ ¸å¿ƒæ¨¡å‹å…¨é¢å¼€æºï¼Œæ ‡å¿—ç€ AutoGLM åœ¨å¼€æ”¾ç”Ÿæ€ä¸­çš„è¿›ä¸€æ­¥å‘å±•ã€‚</p>
<p>æˆªè‡³ 2025 å¹´ 6 æœˆ 30 æ—¥ï¼Œæ™ºè°±æ¨¡å‹å·²ä¸ºè¶…è¿‡ 8000 å®¶æœºæ„å®¢æˆ·æä¾›æ”¯æŒï¼›æˆªè‡³æœ€åå®é™…å¯è¡Œæ—¥æœŸï¼Œå·²ä¸ºçº¦ 8000 ä¸‡å°è®¾å¤‡æä¾›æ”¯æŒã€‚</p>
<p>åœ¨å•†ä¸šåŒ–æ–¹é¢ï¼Œæ™ºè°±ä» 2021 å¹´å°±å¼€å§‹å¸ƒå±€ MaaS çš„å•†ä¸šæ¨¡å¼ã€‚</p>
<p>MaaS å¹³å°ä¸»è¦æä¾›å››ç±»æ¨¡å‹èƒ½åŠ›ï¼Œä¸»è¦è¦†ç›–è¯­è¨€æ¨¡å‹ã€å¤šæ¨¡æ€æ¨¡å‹ã€æ™ºèƒ½ä½“æ¨¡å‹å’Œä»£ç æ¨¡å‹å››ç±»æ ¸å¿ƒæ¨¡å‹èƒ½åŠ›ï¼Œå¹¶åŒæ—¶æä¾›æ”¯æŒæ¨¡å‹å¾®è°ƒã€æ¨¡å‹éƒ¨ç½²åŠæ™ºèƒ½ä½“å¼€å‘çš„ä¸€ä½“åŒ–å·¥å…·é“¾ã€‚</p>
<p>ä»æ¨¡å‹èƒ½åŠ›çš„æ‰©å±•ã€æ™ºèƒ½ä½“æŠ€æœ¯çš„æ¨è¿›ï¼Œåˆ° MaaS å•†ä¸šåŒ–ä½“ç³»çš„é€æ­¥æˆå‹ï¼Œæ™ºè°±å·²ç»å®Œæˆäº†ä¸€è½®ç›¸å¯¹å®Œæ•´çš„æŠ€æœ¯ä¸äº§å“å¸ƒå±€ã€‚</p>
<p>ä½†é´å­è½åœ°ï¼Œå¹¶ä¸æ„å‘³ç€ç»ˆå±€å·²å®šã€‚éšç€èµ°å‘å…¬å¼€å¸‚åœºï¼Œé«˜å¼ºåº¦çš„ç ”å‘æŠ•å…¥ã€ä¸æ–­æ”€å‡çš„ç®—åŠ›æˆæœ¬ï¼Œä»¥åŠé€šç”¨å¤§æ¨¡å‹å•†ä¸šåŒ–è·¯å¾„å°šæœªå®Œå…¨è·‘é€šçš„ç°å®ï¼Œä¹Ÿè¢«ä¸€å¹¶ç½®äºæ›´é€æ˜çš„å®¡è§†ä¹‹ä¸‹ã€‚</p>
<p>ä¸Šå¸‚ä¸æ˜¯ç»ˆç‚¹ï¼Œè€Œæ˜¯ä¸€åœºæ›´é•¿å‘¨æœŸçš„å…¬å¼€æµ‹è¯•ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Hibernateï¼ˆ11ï¼‰ä»€ä¹ˆæ˜¯Hibernateçš„æŒä¹…åŒ–ä¸Šä¸‹æ–‡ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7589212818807930943</link>    <guid>https://juejin.cn/post/7589212818807930943</guid>    <pubDate>2025-12-30T11:50:45.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589212818807930943" data-draft-id="7589466706378555428" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Hibernateï¼ˆ11ï¼‰ä»€ä¹ˆæ˜¯Hibernateçš„æŒä¹…åŒ–ä¸Šä¸‹æ–‡ï¼Ÿ"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-30T11:50:45.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Victor356"/> <meta itemprop="url" content="https://juejin.cn/user/3492507879476878"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Hibernateï¼ˆ11ï¼‰ä»€ä¹ˆæ˜¯Hibernateçš„æŒä¹…åŒ–ä¸Šä¸‹æ–‡ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3492507879476878/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Victor356
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-30T11:50:45.000Z" title="Tue Dec 30 2025 11:50:45 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>Hibernateçš„æŒä¹…åŒ–ä¸Šä¸‹æ–‡ï¼ˆPersistence Contextï¼‰æ˜¯ä¸€ä¸ªéå¸¸é‡è¦çš„æ¦‚å¿µï¼Œå®ƒæŒ‡çš„æ˜¯ä¸€ä¸ªç‰¹å®šçš„Sessionå¯¹è±¡ç®¡ç†çš„æŒä¹…åŒ–å®ä½“çš„é›†åˆã€‚æŒä¹…åŒ–ä¸Šä¸‹æ–‡è´Ÿè´£ç®¡ç†å®ä½“çš„ç”Ÿå‘½å‘¨æœŸã€ç¼“å­˜å®ä½“ï¼Œå¹¶æä¾›äº‹åŠ¡æ€§å¤„ç†ã€‚æŒä¹…åŒ–ä¸Šä¸‹æ–‡çš„ä¸»è¦ä½œç”¨åŒ…æ‹¬ï¼š</p>
<ol>
<li><strong>å®ä½“ç®¡ç†</strong>ï¼šç®¡ç†å¯¹è±¡çš„æŒä¹…åŒ–çŠ¶æ€ï¼ŒåŒ…æ‹¬æ–°å»ºã€åˆ é™¤ã€æ›´æ–°ç­‰æ“ä½œã€‚</li>
<li><strong>ä¸€çº§ç¼“å­˜</strong>ï¼šSessionçš„ä¸€çº§ç¼“å­˜ï¼Œç”¨äºåœ¨æ•°æ®åº“æŸ¥è¯¢ä¸­ç¼“å­˜å®ä½“ï¼Œå‡å°‘æ•°æ®åº“è®¿é—®æ¬¡æ•°ï¼Œæé«˜æ€§èƒ½ã€‚</li>
<li><strong>äº‹åŠ¡æ€§æ“ä½œ</strong>ï¼šåœ¨äº‹åŠ¡çš„èŒƒå›´å†…ä¿æŒæŒä¹…åŒ–ä¸Šä¸‹æ–‡çš„ä¸€è‡´æ€§ã€‚</li>
<li><strong>è„æ£€æŸ¥</strong>ï¼šåœ¨äº‹åŠ¡æäº¤æ—¶ï¼Œè‡ªåŠ¨æ£€æµ‹å¹¶åŒæ­¥æŒä¹…åŒ–å¯¹è±¡çš„çŠ¶æ€å˜åŒ–åˆ°æ•°æ®åº“ã€‚</li>
</ol>
<h3 data-id="heading-0">ç¤ºä¾‹é¡¹ç›®ç»“æ„</h3>
<p>ä¸ºäº†æ·±å…¥ç†è§£æŒä¹…åŒ–ä¸Šä¸‹æ–‡ï¼Œä¸‹é¢æ˜¯ä¸€ä¸ªå®Œæ•´çš„ç¤ºä¾‹ï¼ŒåŒ…æ‹¬å¦‚ä½•é…ç½®Hibernateã€å®šä¹‰å®ä½“ç±»ã€ç®¡ç†Sessionï¼Œä»¥åŠæ¼”ç¤ºæŒä¹…åŒ–ä¸Šä¸‹æ–‡çš„è¡Œä¸ºã€‚</p>
<h4 data-id="heading-1">é…ç½®æ–‡ä»¶ <code>hibernate.cfg.xml</code></h4>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">hibernate-configuration</span> <span class="hljs-keyword">PUBLIC</span>
        <span class="hljs-string">"-//Hibernate/Hibernate Configuration DTD 3.0//EN"</span>
        <span class="hljs-string">"http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">hibernate-configuration</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">session-factory</span>&gt;</span>
        <span class="hljs-comment">&lt;!-- æ•°æ®åº“è¿æ¥é…ç½® --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.connection.driver_class"</span>&gt;</span>com.mysql.cj.jdbc.Driver<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.connection.url"</span>&gt;</span>jdbc:mysql://localhost:3306/your_database<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.connection.username"</span>&gt;</span>your_username<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.connection.password"</span>&gt;</span>your_password<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>

        <span class="hljs-comment">&lt;!-- Hibernate å±æ€§é…ç½® --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.dialect"</span>&gt;</span>org.hibernate.dialect.MySQLDialect<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.show_sql"</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.format_sql"</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.hbm2ddl.auto"</span>&gt;</span>update<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>

        <span class="hljs-comment">&lt;!-- æ˜ å°„ç±»é…ç½® --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">mapping</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"com.example.domain.Student"</span>/&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">session-factory</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">hibernate-configuration</span>&gt;</span>
</code></pre>
<h4 data-id="heading-2">HibernateUtil ç±»</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.hibernate.SessionFactory;
<span class="hljs-keyword">import</span> org.hibernate.cfg.Configuration;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HibernateUtil</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> SessionFactory sessionFactory;

    <span class="hljs-keyword">static</span> {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// ä»é…ç½®æ–‡ä»¶åˆ›å»ºSessionFactory</span>
            sessionFactory = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Configuration</span>().configure(<span class="hljs-string">"hibernate.cfg.xml"</span>).buildSessionFactory();
        } <span class="hljs-keyword">catch</span> (Throwable ex) {
            <span class="hljs-comment">// è®°å½•å¯åŠ¨å¤±è´¥çš„é”™è¯¯</span>
            System.err.println(<span class="hljs-string">"Initial SessionFactory creation failed."</span> + ex);
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ExceptionInInitializerError</span>(ex);
        }
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> SessionFactory <span class="hljs-title function_">getSessionFactory</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> sessionFactory;
    }
}
</code></pre>
<h4 data-id="heading-3">å®ä½“ç±» Student</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.example.domain;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Student</span> {
    <span class="hljs-keyword">private</span> Long id;
    <span class="hljs-keyword">private</span> String name;
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> age;

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Student</span><span class="hljs-params">()</span> {}

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Student</span><span class="hljs-params">(String name, <span class="hljs-type">int</span> age)</span> {
        <span class="hljs-built_in">this</span>.name = name;
        <span class="hljs-built_in">this</span>.age = age;
    }

    <span class="hljs-comment">// getters å’Œ setters</span>
    <span class="hljs-keyword">public</span> Long <span class="hljs-title function_">getId</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> id;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setId</span><span class="hljs-params">(Long id)</span> {
        <span class="hljs-built_in">this</span>.id = id;
    }

    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getName</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> name;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setName</span><span class="hljs-params">(String name)</span> {
        <span class="hljs-built_in">this</span>.name = name;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getAge</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> age;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setAge</span><span class="hljs-params">(<span class="hljs-type">int</span> age)</span> {
        <span class="hljs-built_in">this</span>.age = age;
    }
}
</code></pre>
<h4 data-id="heading-4">æŒä¹…åŒ–ä¸Šä¸‹æ–‡ç¤ºä¾‹</h4>
<p>ä¸‹é¢çš„ç¤ºä¾‹å±•ç¤ºäº†æŒä¹…åŒ–ä¸Šä¸‹æ–‡çš„åŸºæœ¬è¡Œä¸ºï¼ŒåŒ…æ‹¬å®ä½“çš„æŒä¹…åŒ–ã€ç¼“å­˜ç®¡ç†ä»¥åŠäº‹åŠ¡æ€§åŒæ­¥ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.hibernate.Session;
<span class="hljs-keyword">import</span> org.hibernate.SessionFactory;
<span class="hljs-keyword">import</span> org.hibernate.Transaction;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HibernatePersistenceContextExample</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-comment">// è·å–SessionFactory</span>
        <span class="hljs-type">SessionFactory</span> <span class="hljs-variable">sessionFactory</span> <span class="hljs-operator">=</span> HibernateUtil.getSessionFactory();
        
        <span class="hljs-comment">// æ‰“å¼€ä¸€ä¸ªæ–°çš„Session</span>
        <span class="hljs-type">Session</span> <span class="hljs-variable">session</span> <span class="hljs-operator">=</span> sessionFactory.openSession();
        <span class="hljs-type">Transaction</span> <span class="hljs-variable">transaction</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;

        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// å¯åŠ¨äº‹åŠ¡</span>
            transaction = session.beginTransaction();

            <span class="hljs-comment">// åˆ›å»ºå¹¶ä¿å­˜ä¸€ä¸ªæ–°çš„Studentå¯¹è±¡</span>
            <span class="hljs-type">Student</span> <span class="hljs-variable">student</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Student</span>(<span class="hljs-string">"John Doe"</span>, <span class="hljs-number">20</span>);
            session.save(student);

            <span class="hljs-comment">// æŒä¹…åŒ–ä¸Šä¸‹æ–‡ä¸­çš„studentå¯¹è±¡ç°åœ¨æ˜¯æŒä¹…åŒ–çŠ¶æ€</span>
            student.setAge(<span class="hljs-number">21</span>); <span class="hljs-comment">// ä¿®æ”¹å¯¹è±¡çš„å±æ€§</span>

            <span class="hljs-comment">// æäº¤äº‹åŠ¡</span>
            transaction.commit();
            <span class="hljs-comment">// åˆ°è¿™é‡Œï¼Œstudentå¯¹è±¡çš„çŠ¶æ€å·²ç»åŒæ­¥åˆ°æ•°æ®åº“</span>
        } <span class="hljs-keyword">catch</span> (Exception e) {
            <span class="hljs-keyword">if</span> (transaction != <span class="hljs-literal">null</span>) {
                transaction.rollback();
            }
            e.printStackTrace();
        } <span class="hljs-keyword">finally</span> {
            session.close(); <span class="hljs-comment">// å…³é—­Session</span>
        }

        <span class="hljs-comment">// é‡æ–°æ‰“å¼€ä¸€ä¸ªæ–°çš„Session</span>
        session = sessionFactory.openSession();
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// å¯åŠ¨äº‹åŠ¡</span>
            transaction = session.beginTransaction();

            <span class="hljs-comment">// ä»æ•°æ®åº“åŠ è½½Studentå¯¹è±¡</span>
            <span class="hljs-type">Student</span> <span class="hljs-variable">student</span> <span class="hljs-operator">=</span> session.get(Student.class, <span class="hljs-number">1L</span>);
            System.out.println(<span class="hljs-string">"Student: "</span> + student.getName() + <span class="hljs-string">", Age: "</span> + student.getAge());

            <span class="hljs-comment">// æäº¤äº‹åŠ¡</span>
            transaction.commit();
        } <span class="hljs-keyword">catch</span> (Exception e) {
            <span class="hljs-keyword">if</span> (transaction != <span class="hljs-literal">null</span>) {
                transaction.rollback();
            }
            e.printStackTrace();
        } <span class="hljs-keyword">finally</span> {
            session.close(); <span class="hljs-comment">// å…³é—­Session</span>
        }

        <span class="hljs-comment">// å…³é—­SessionFactory</span>
        sessionFactory.close();
    }
}
</code></pre>
<h3 data-id="heading-5">è¯¦ç»†è§£é‡Š</h3>
<ol>
<li>
<p><strong>æŒä¹…åŒ–ä¸Šä¸‹æ–‡</strong>ï¼šå½“è°ƒç”¨<code>session.save(student)</code>æ—¶ï¼Œ<code>student</code>å¯¹è±¡è¿›å…¥æŒä¹…åŒ–ä¸Šä¸‹æ–‡ï¼Œæˆä¸ºæŒä¹…åŒ–çŠ¶æ€ã€‚ä»»ä½•å¯¹è¯¥å¯¹è±¡çš„ä¿®æ”¹éƒ½ä¼šåœ¨äº‹åŠ¡æäº¤æ—¶è‡ªåŠ¨åŒæ­¥åˆ°æ•°æ®åº“ã€‚</p>
</li>
<li>
<p><strong>ä¸€çº§ç¼“å­˜</strong>ï¼šåœ¨å•ä¸ª<code>Session</code>èŒƒå›´å†…ï¼ŒHibernateç»´æŠ¤ä¸€çº§ç¼“å­˜ã€‚ç¬¬ä¸€æ¬¡æŸ¥è¯¢æŸä¸ªå®ä½“åï¼Œå®ƒä¼šè¢«ç¼“å­˜åˆ°Sessionä¸­ï¼Œéšåå¯¹è¯¥å®ä½“çš„è®¿é—®ä¼šç›´æ¥ä»ç¼“å­˜ä¸­è·å–ï¼Œè€Œä¸å†è®¿é—®æ•°æ®åº“ã€‚</p>
</li>
<li>
<p><strong>è„æ£€æŸ¥</strong>ï¼šåœ¨äº‹åŠ¡æäº¤æ—¶ï¼ŒHibernateä¼šæ£€æŸ¥æŒä¹…åŒ–ä¸Šä¸‹æ–‡ä¸­çš„å®ä½“ï¼Œæ‰¾å‡ºå·²æ›´æ”¹ä½†æœªåŒæ­¥åˆ°æ•°æ®åº“çš„å®ä½“ï¼Œå¹¶è‡ªåŠ¨æ‰§è¡Œç›¸åº”çš„SQLæ›´æ–°æ“ä½œã€‚</p>
</li>
</ol>
<h3 data-id="heading-6">æŒä¹…åŒ–ä¸Šä¸‹æ–‡çš„ç”Ÿå‘½å‘¨æœŸ</h3>
<ul>
<li><strong>Transientï¼ˆç¬æ€ï¼‰</strong>ï¼šå¯¹è±¡åœ¨æœªä¸Sessionå…³è”ä¹‹å‰å¤„äºç¬æ€çŠ¶æ€ã€‚</li>
<li><strong>Persistentï¼ˆæŒä¹…æ€ï¼‰</strong>ï¼šå¯¹è±¡ä¸€æ—¦é€šè¿‡<code>Session</code>çš„<code>save</code>ã€<code>update</code>ã€<code>merge</code>ç­‰æ–¹æ³•ä¸æŒä¹…åŒ–ä¸Šä¸‹æ–‡å…³è”ï¼Œå°±è¿›å…¥æŒä¹…æ€ã€‚</li>
<li><strong>Detachedï¼ˆæ¸¸ç¦»æ€ï¼‰</strong>ï¼š<code>Session</code>å…³é—­åï¼ŒæŒä¹…åŒ–ä¸Šä¸‹æ–‡ä¹Ÿå°±ä¸å­˜åœ¨äº†ï¼Œä¹‹å‰å…³è”çš„å¯¹è±¡å˜ä¸ºæ¸¸ç¦»æ€å¯¹è±¡ã€‚</li>
</ul>
<h3 data-id="heading-7">äº‹åŠ¡æ€§æ“ä½œ</h3>
<ul>
<li><code>session.beginTransaction()</code>ï¼šå¼€å¯ä¸€ä¸ªæ–°çš„äº‹åŠ¡ã€‚</li>
<li><code>transaction.commit()</code>ï¼šæäº¤äº‹åŠ¡ï¼ŒæŒä¹…åŒ–ä¸Šä¸‹æ–‡ä¸­çš„å˜åŒ–åŒæ­¥åˆ°æ•°æ®åº“ã€‚</li>
<li><code>transaction.rollback()</code>ï¼šå›æ»šäº‹åŠ¡ï¼Œæ’¤é”€æœªæäº¤çš„æ›´æ”¹ã€‚</li>
</ul>
<h3 data-id="heading-8">ä¸€çº§ç¼“å­˜çš„ä½œç”¨</h3>
<p>ä¸€çº§ç¼“å­˜ç”±å½“å‰<code>Session</code>å®ä¾‹ç»´æŠ¤ï¼Œç¡®ä¿åœ¨åŒä¸€ä¸ªSessionä¸­ï¼Œé‡å¤æŸ¥è¯¢ç›¸åŒçš„å®ä½“ä¸ä¼šå¤šæ¬¡è®¿é—®æ•°æ®åº“ï¼Œæé«˜äº†æ€§èƒ½ã€‚</p>
<h3 data-id="heading-9">æ€»ç»“</h3>
<p>æŒä¹…åŒ–ä¸Šä¸‹æ–‡æ˜¯Hibernateçš„æ ¸å¿ƒæœºåˆ¶ä¹‹ä¸€ï¼Œå®ƒé€šè¿‡ç®¡ç†å®ä½“çš„ç”Ÿå‘½å‘¨æœŸå’Œæä¾›ä¸€çº§ç¼“å­˜ï¼Œå®ç°äº†å¯¹æŒä¹…åŒ–å¯¹è±¡çš„é«˜æ•ˆç®¡ç†ã€‚ç†è§£æŒä¹…åŒ–ä¸Šä¸‹æ–‡çš„å·¥ä½œåŸç†ï¼Œå¯¹äºä½¿ç”¨Hibernateè¿›è¡Œé«˜æ•ˆçš„æ•°æ®è®¿é—®å’Œç®¡ç†å…·æœ‰é‡è¦æ„ä¹‰ã€‚é€šè¿‡å®é™…çš„ä»£ç ç¤ºä¾‹ï¼Œå¯ä»¥çœ‹åˆ°æŒä¹…åŒ–ä¸Šä¸‹æ–‡å¦‚ä½•åœ¨äº‹åŠ¡èŒƒå›´å†…ç®¡ç†å®ä½“çš„çŠ¶æ€å˜åŒ–ï¼Œå¹¶è‡ªåŠ¨åŒæ­¥åˆ°æ•°æ®åº“ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Hibernateï¼ˆ12ï¼‰ä»€ä¹ˆæ˜¯Hibernateçš„å®ä½“ç±»ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7589466706378588196</link>    <guid>https://juejin.cn/post/7589466706378588196</guid>    <pubDate>2025-12-30T11:51:46.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589466706378588196" data-draft-id="7589262021562187817" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Hibernateï¼ˆ12ï¼‰ä»€ä¹ˆæ˜¯Hibernateçš„å®ä½“ç±»ï¼Ÿ"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-30T11:51:46.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Victor356"/> <meta itemprop="url" content="https://juejin.cn/user/3492507879476878"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Hibernateï¼ˆ12ï¼‰ä»€ä¹ˆæ˜¯Hibernateçš„å®ä½“ç±»ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3492507879476878/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Victor356
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-30T11:51:46.000Z" title="Tue Dec 30 2025 11:51:46 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>Hibernateçš„å®ä½“ç±»ï¼ˆEntity Classï¼‰æ˜¯ä¸æ•°æ®åº“è¡¨æ˜ å°„çš„Javaç±»ã€‚æ¯ä¸ªå®ä½“ç±»å¯¹åº”æ•°æ®åº“ä¸­çš„ä¸€ä¸ªè¡¨ï¼Œç±»ä¸­çš„æ¯ä¸ªå±æ€§å¯¹åº”è¡¨ä¸­çš„ä¸€åˆ—ã€‚å®ä½“ç±»ä½¿ç”¨JavaæŒä¹…åŒ–API (JPA)çš„æ³¨è§£æˆ–è€…Hibernateç‰¹æœ‰çš„æ³¨è§£æ¥æ ‡æ³¨ï¼Œå®šä¹‰ç±»å’Œè¡¨ä¹‹é—´çš„æ˜ å°„å…³ç³»ã€‚</p>
<h3 data-id="heading-0">ä¸»è¦ç‰¹ç‚¹</h3>
<ol>
<li><strong>ç±»-è¡¨æ˜ å°„</strong>ï¼šå®ä½“ç±»ä¸æ•°æ®åº“è¡¨çš„æ˜ å°„ã€‚</li>
<li><strong>å±æ€§-åˆ—æ˜ å°„</strong>ï¼šç±»çš„å±æ€§ä¸è¡¨çš„åˆ—çš„æ˜ å°„ã€‚</li>
<li><strong>ä¸»é”®æ ‡è¯†</strong>ï¼šä½¿ç”¨æ³¨è§£æ ‡è¯†ä¸»é”®ã€‚</li>
<li><strong>å…³ç³»æ˜ å°„</strong>ï¼šæ”¯æŒä¸€å¯¹ä¸€ã€ä¸€å¯¹å¤šã€å¤šå¯¹ä¸€å’Œå¤šå¯¹å¤šç­‰å…³è”å…³ç³»ã€‚</li>
</ol>
<h3 data-id="heading-1">ç¤ºä¾‹é¡¹ç›®ç»“æ„</h3>
<p>ä¸ºäº†æ·±å…¥ç†è§£Hibernateçš„å®ä½“ç±»ï¼Œä¸‹é¢æ˜¯ä¸€ä¸ªå®Œæ•´çš„ç¤ºä¾‹ï¼ŒåŒ…æ‹¬å¦‚ä½•é…ç½®Hibernateæ–‡ä»¶ã€å®šä¹‰å®ä½“ç±»ã€ä»¥åŠç®€å•çš„CRUDæ“ä½œã€‚</p>
<h4 data-id="heading-2">é…ç½®æ–‡ä»¶ <code>hibernate.cfg.xml</code></h4>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">hibernate-configuration</span> <span class="hljs-keyword">PUBLIC</span>
        <span class="hljs-string">"-//Hibernate/Hibernate Configuration DTD 3.0//EN"</span>
        <span class="hljs-string">"http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">hibernate-configuration</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">session-factory</span>&gt;</span>
        <span class="hljs-comment">&lt;!-- æ•°æ®åº“è¿æ¥é…ç½® --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.connection.driver_class"</span>&gt;</span>com.mysql.cj.jdbc.Driver<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.connection.url"</span>&gt;</span>jdbc:mysql://localhost:3306/your_database<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.connection.username"</span>&gt;</span>your_username<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.connection.password"</span>&gt;</span>your_password<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>

        <span class="hljs-comment">&lt;!-- Hibernate å±æ€§é…ç½® --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.dialect"</span>&gt;</span>org.hibernate.dialect.MySQLDialect<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.show_sql"</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.format_sql"</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.hbm2ddl.auto"</span>&gt;</span>update<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>

        <span class="hljs-comment">&lt;!-- æ˜ å°„ç±»é…ç½® --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">mapping</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"com.example.domain.Student"</span>/&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">session-factory</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">hibernate-configuration</span>&gt;</span>
</code></pre>
<h4 data-id="heading-3">HibernateUtil ç±»</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.hibernate.SessionFactory;
<span class="hljs-keyword">import</span> org.hibernate.cfg.Configuration;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HibernateUtil</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> SessionFactory sessionFactory;

    <span class="hljs-keyword">static</span> {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// ä»é…ç½®æ–‡ä»¶åˆ›å»ºSessionFactory</span>
            sessionFactory = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Configuration</span>().configure(<span class="hljs-string">"hibernate.cfg.xml"</span>).buildSessionFactory();
        } <span class="hljs-keyword">catch</span> (Throwable ex) {
            <span class="hljs-comment">// è®°å½•å¯åŠ¨å¤±è´¥çš„é”™è¯¯</span>
            System.err.println(<span class="hljs-string">"Initial SessionFactory creation failed."</span> + ex);
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ExceptionInInitializerError</span>(ex);
        }
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> SessionFactory <span class="hljs-title function_">getSessionFactory</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> sessionFactory;
    }
}
</code></pre>
<h4 data-id="heading-4">å®ä½“ç±» Student</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.example.domain;

<span class="hljs-keyword">import</span> javax.persistence.Entity;
<span class="hljs-keyword">import</span> javax.persistence.GeneratedValue;
<span class="hljs-keyword">import</span> javax.persistence.GenerationType;
<span class="hljs-keyword">import</span> javax.persistence.Id;

<span class="hljs-meta">@Entity</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Student</span> {
    <span class="hljs-meta">@Id</span>
    <span class="hljs-meta">@GeneratedValue(strategy = GenerationType.IDENTITY)</span>
    <span class="hljs-keyword">private</span> Long id;
    
    <span class="hljs-keyword">private</span> String name;
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> age;

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Student</span><span class="hljs-params">()</span> {}

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Student</span><span class="hljs-params">(String name, <span class="hljs-type">int</span> age)</span> {
        <span class="hljs-built_in">this</span>.name = name;
        <span class="hljs-built_in">this</span>.age = age;
    }

    <span class="hljs-comment">// getters å’Œ setters</span>
    <span class="hljs-keyword">public</span> Long <span class="hljs-title function_">getId</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> id;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setId</span><span class="hljs-params">(Long id)</span> {
        <span class="hljs-built_in">this</span>.id = id;
    }

    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getName</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> name;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setName</span><span class="hljs-params">(String name)</span> {
        <span class="hljs-built_in">this</span>.name = name;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getAge</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> age;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setAge</span><span class="hljs-params">(<span class="hljs-type">int</span> age)</span> {
        <span class="hljs-built_in">this</span>.age = age;
    }
}
</code></pre>
<h3 data-id="heading-5">ä½¿ç”¨å®ä½“ç±»è¿›è¡ŒCRUDæ“ä½œ</h3>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªç¤ºä¾‹ï¼Œæ¼”ç¤ºå¦‚ä½•ä½¿ç”¨Hibernateçš„å®ä½“ç±»è¿›è¡ŒCRUDæ“ä½œã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.hibernate.Session;
<span class="hljs-keyword">import</span> org.hibernate.SessionFactory;
<span class="hljs-keyword">import</span> org.hibernate.Transaction;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HibernateCRUDExample</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-comment">// è·å–SessionFactory</span>
        <span class="hljs-type">SessionFactory</span> <span class="hljs-variable">sessionFactory</span> <span class="hljs-operator">=</span> HibernateUtil.getSessionFactory();
        <span class="hljs-type">Session</span> <span class="hljs-variable">session</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;
        <span class="hljs-type">Transaction</span> <span class="hljs-variable">transaction</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;

        <span class="hljs-comment">// åˆ›å»ºå¯¹è±¡å¹¶ä¿å­˜åˆ°æ•°æ®åº“</span>
        <span class="hljs-keyword">try</span> {
            session = sessionFactory.openSession();
            transaction = session.beginTransaction();

            <span class="hljs-type">Student</span> <span class="hljs-variable">student</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Student</span>(<span class="hljs-string">"John Doe"</span>, <span class="hljs-number">20</span>);
            session.save(student); <span class="hljs-comment">// æŒä¹…åŒ–å¯¹è±¡</span>

            transaction.commit();
        } <span class="hljs-keyword">catch</span> (Exception e) {
            <span class="hljs-keyword">if</span> (transaction != <span class="hljs-literal">null</span>) {
                transaction.rollback();
            }
            e.printStackTrace();
        } <span class="hljs-keyword">finally</span> {
            <span class="hljs-keyword">if</span> (session != <span class="hljs-literal">null</span>) {
                session.close();
            }
        }

        <span class="hljs-comment">// è¯»å–å¯¹è±¡</span>
        <span class="hljs-keyword">try</span> {
            session = sessionFactory.openSession();
            <span class="hljs-type">Student</span> <span class="hljs-variable">student</span> <span class="hljs-operator">=</span> session.get(Student.class, <span class="hljs-number">1L</span>);
            System.out.println(<span class="hljs-string">"Student: "</span> + student.getName() + <span class="hljs-string">", Age: "</span> + student.getAge());
        } <span class="hljs-keyword">catch</span> (Exception e) {
            e.printStackTrace();
        } <span class="hljs-keyword">finally</span> {
            <span class="hljs-keyword">if</span> (session != <span class="hljs-literal">null</span>) {
                session.close();
            }
        }

        <span class="hljs-comment">// æ›´æ–°å¯¹è±¡</span>
        <span class="hljs-keyword">try</span> {
            session = sessionFactory.openSession();
            transaction = session.beginTransaction();

            <span class="hljs-type">Student</span> <span class="hljs-variable">student</span> <span class="hljs-operator">=</span> session.get(Student.class, <span class="hljs-number">1L</span>);
            <span class="hljs-keyword">if</span> (student != <span class="hljs-literal">null</span>) {
                student.setAge(<span class="hljs-number">21</span>);
                session.update(student); <span class="hljs-comment">// æ›´æ–°å¯¹è±¡</span>
            }

            transaction.commit();
        } <span class="hljs-keyword">catch</span> (Exception e) {
            <span class="hljs-keyword">if</span> (transaction != <span class="hljs-literal">null</span>) {
                transaction.rollback();
            }
            e.printStackTrace();
        } <span class="hljs-keyword">finally</span> {
            <span class="hljs-keyword">if</span> (session != <span class="hljs-literal">null</span>) {
                session.close();
            }
        }

        <span class="hljs-comment">// åˆ é™¤å¯¹è±¡</span>
        <span class="hljs-keyword">try</span> {
            session = sessionFactory.openSession();
            transaction = session.beginTransaction();

            <span class="hljs-type">Student</span> <span class="hljs-variable">student</span> <span class="hljs-operator">=</span> session.get(Student.class, <span class="hljs-number">1L</span>);
            <span class="hljs-keyword">if</span> (student != <span class="hljs-literal">null</span>) {
                session.delete(student); <span class="hljs-comment">// åˆ é™¤å¯¹è±¡</span>
            }

            transaction.commit();
        } <span class="hljs-keyword">catch</span> (Exception e) {
            <span class="hljs-keyword">if</span> (transaction != <span class="hljs-literal">null</span>) {
                transaction.rollback();
            }
            e.printStackTrace();
        } <span class="hljs-keyword">finally</span> {
            <span class="hljs-keyword">if</span> (session != <span class="hljs-literal">null</span>) {
                session.close();
            }
        }

        <span class="hljs-comment">// å…³é—­SessionFactory</span>
        sessionFactory.close();
    }
}
</code></pre>
<h3 data-id="heading-6">è¯¦ç»†è§£é‡Š</h3>
<ol>
<li>
<p><strong>å®ä½“ç±»å®šä¹‰</strong>ï¼šé€šè¿‡<code>@Entity</code>æ³¨è§£å°†ç±»æ ‡è¯†ä¸ºHibernateçš„å®ä½“ç±»ã€‚<code>@Id</code>æ³¨è§£æ ‡è¯†ä¸»é”®ï¼Œ<code>@GeneratedValue</code>æ³¨è§£æŒ‡å®šä¸»é”®ç”Ÿæˆç­–ç•¥ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Entity</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Student</span> {
    <span class="hljs-meta">@Id</span>
    <span class="hljs-meta">@GeneratedValue(strategy = GenerationType.IDENTITY)</span>
    <span class="hljs-keyword">private</span> Long id;
    <span class="hljs-keyword">private</span> String name;
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> age;
}
</code></pre>
</li>
<li>
<p><strong>åˆ›å»ºå¹¶ä¿å­˜å¯¹è±¡</strong>ï¼šä½¿ç”¨<code>session.save(student)</code>æ–¹æ³•å°†å®ä½“å¯¹è±¡æŒä¹…åŒ–åˆ°æ•°æ®åº“ä¸­ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">Student</span> <span class="hljs-variable">student</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Student</span>(<span class="hljs-string">"John Doe"</span>, <span class="hljs-number">20</span>);
session.save(student);
</code></pre>
</li>
<li>
<p><strong>è¯»å–å¯¹è±¡</strong>ï¼šä½¿ç”¨<code>session.get(Student.class, 1L)</code>æ–¹æ³•ä»æ•°æ®åº“ä¸­è¯»å–å®ä½“å¯¹è±¡ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">Student</span> <span class="hljs-variable">student</span> <span class="hljs-operator">=</span> session.get(Student.class, <span class="hljs-number">1L</span>);
</code></pre>
</li>
<li>
<p><strong>æ›´æ–°å¯¹è±¡</strong>ï¼šå…ˆä»æ•°æ®åº“ä¸­è¯»å–å¯¹è±¡ï¼Œç„¶åä¿®æ”¹å¯¹è±¡å±æ€§ï¼Œæœ€åä½¿ç”¨<code>session.update(student)</code>æ–¹æ³•åŒæ­¥ä¿®æ”¹åˆ°æ•°æ®åº“ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">Student</span> <span class="hljs-variable">student</span> <span class="hljs-operator">=</span> session.get(Student.class, <span class="hljs-number">1L</span>);
student.setAge(<span class="hljs-number">21</span>);
session.update(student);
</code></pre>
</li>
<li>
<p><strong>åˆ é™¤å¯¹è±¡</strong>ï¼šå…ˆä»æ•°æ®åº“ä¸­è¯»å–å¯¹è±¡ï¼Œç„¶åä½¿ç”¨<code>session.delete(student)</code>æ–¹æ³•åˆ é™¤å¯¹è±¡ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">Student</span> <span class="hljs-variable">student</span> <span class="hljs-operator">=</span> session.get(Student.class, <span class="hljs-number">1L</span>);
session.delete(student);
</code></pre>
</li>
</ol>
<h3 data-id="heading-7">äº‹åŠ¡ç®¡ç†</h3>
<p>åœ¨è¿›è¡Œå¢åˆ æ”¹æ“ä½œæ—¶ï¼Œéœ€è¦å¼€å¯äº‹åŠ¡ï¼Œå¹¶åœ¨æ“ä½œå®Œæˆåæäº¤äº‹åŠ¡ã€‚å¦‚æœæ“ä½œå¤±è´¥ï¼Œåˆ™å›æ»šäº‹åŠ¡ä»¥ç¡®ä¿æ•°æ®ä¸€è‡´æ€§ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">Transaction</span> <span class="hljs-variable">transaction</span> <span class="hljs-operator">=</span> session.beginTransaction();
<span class="hljs-keyword">try</span> {
    <span class="hljs-comment">// æŒä¹…åŒ–æ“ä½œ</span>
    transaction.commit();
} <span class="hljs-keyword">catch</span> (Exception e) {
    <span class="hljs-keyword">if</span> (transaction != <span class="hljs-literal">null</span>) {
        transaction.rollback();
    }
    e.printStackTrace();
}
</code></pre>
<h3 data-id="heading-8">æ€»ç»“</h3>
<p>Hibernateçš„å®ä½“ç±»æ˜¯Javaç±»ä¸æ•°æ®åº“è¡¨ç»“æ„æ˜ å°„çš„æ ¸å¿ƒã€‚é€šè¿‡JPAæ³¨è§£ï¼Œå®ä½“ç±»å®šä¹‰äº†æŒä¹…åŒ–å¯¹è±¡çš„å±æ€§å’Œè¡Œä¸ºï¼Œå¹¶ä¸æ•°æ®åº“è¡¨çš„ç»“æ„ç´§å¯†ç»“åˆã€‚é€šè¿‡Hibernateæä¾›çš„APIï¼Œå¯ä»¥æ–¹ä¾¿åœ°å¯¹å®ä½“ç±»è¿›è¡ŒCRUDæ“ä½œï¼Œå®ç°æ•°æ®çš„æŒä¹…åŒ–ç®¡ç†ã€‚ç†è§£Hibernateçš„å®ä½“ç±»åŠå…¶ä½¿ç”¨æ–¹æ³•ï¼Œå¯¹äºé«˜æ•ˆåœ°ç®¡ç†æ•°æ®åº“å’Œå®ç°æ•°æ®æŒä¹…åŒ–å…·æœ‰é‡è¦æ„ä¹‰ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ğŸš€ ä»é›¶å¼€å§‹ï¼šå¦‚ä½•ä» GPTsAPI.net ç”³è¯· API Key å¹¶æ‰“é€ è‡ªå·±çš„ AI æœåŠ¡]]></title>    <link>https://juejin.cn/post/7589509638354649115</link>    <guid>https://juejin.cn/post/7589509638354649115</guid>    <pubDate>2025-12-30T11:18:52.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589509638354649115" data-draft-id="7589477341765566510" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ğŸš€ ä»é›¶å¼€å§‹ï¼šå¦‚ä½•ä» GPTsAPI.net ç”³è¯· API Key å¹¶æ‰“é€ è‡ªå·±çš„ AI æœåŠ¡"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-30T11:18:52.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="excel"/> <meta itemprop="url" content="https://juejin.cn/user/2911162520062862"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ğŸš€ ä»é›¶å¼€å§‹ï¼šå¦‚ä½•ä» GPTsAPI.net ç”³è¯· API Key å¹¶æ‰“é€ è‡ªå·±çš„ AI æœåŠ¡
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2911162520062862/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    excel
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-30T11:18:52.000Z" title="Tue Dec 30 2025 11:18:52 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    4
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨å›½å†…å¼€å‘ AI äº§å“æ—¶ï¼Œç›´æ¥ä½¿ç”¨ OpenAI å®˜æ–¹ API ç»å¸¸ä¼šé‡åˆ°ç½‘ç»œã€æ³¨å†Œå’Œä»˜è´¹ç­‰éšœç¢ã€‚GPTsAPI.net æä¾›äº†ä¸€ä¸ª<strong>å…¼å®¹ OpenAI åè®®çš„ API æœåŠ¡</strong>ã€‚</p>
<p>æœ¬æ–‡å°†ä»<strong>æ³¨å†Œã€ç”³è¯· API Key åˆ°åç«¯é›†æˆ</strong>é€æ­¥æ‹†è§£ï¼Œå¹¶ç»“åˆçœŸå® Nuxt åç«¯ä»£ç è§£é‡Šå¦‚ä½•æ‰“é€ ä¸€ä¸ªç¨³å®šã€å¯æ§çš„ AI äº§å“ã€‚</p>
<hr/>
<h2 data-id="heading-0">ğŸ§  ä¸€ã€ä»€ä¹ˆæ˜¯ GPTsAPI.netï¼Ÿ</h2>
<p>å®ƒçš„ä¸»è¦ç‰¹ç‚¹åŒ…æ‹¬ï¼š</p>
<ul>
<li>æ”¯æŒå…¼å®¹ OpenAI çš„ API è°ƒç”¨æ–¹å¼ï¼ˆå¦‚ <code>/v1/chat/completions</code>ï¼‰<a href="https://link.juejin.cn?target=https%3A%2F%2Fzhuanlan.zhihu.com%2Fp%2F704570010%3Futm_source%3Dchatgpt.com" target="_blank" title="https://zhuanlan.zhihu.com/p/704570010?utm_source=chatgpt.com" ref="nofollow noopener noreferrer">çŸ¥ä¹ä¸“æ </a></li>
<li>åœ¨å›½å†…è®¿é—®æ›´ç¨³å®š</li>
<li>æ¨¡å‹èµ„æºä¸°å¯Œï¼Œä¸”æ”¯æŒæŒ‰é‡è®¡è´¹</li>
</ul>
<hr/>
<h2 data-id="heading-1">ğŸ“ äºŒã€å¦‚ä½•åœ¨ GPTsAPI.net ä¸Šç”³è¯· API Key</h2>
<h3 data-id="heading-2">1. è®¿é—® GPTsAPI.net å®˜ç½‘</h3>
<p>é¦–å…ˆæ‰“å¼€ï¼šgptsapi.net
ä½ ä¼šçœ‹åˆ°å¹³å°ä»‹ç»å’Œå…¥å£é¡µé¢ã€‚</p>
<blockquote>
<p>æ³¨ï¼šGPTsAPI.net æ²¡æœ‰å…¬å¼€ API æ–‡æ¡£é¡µé¢ï¼Œä½†å…¶å®˜ç½‘æä¾›äº†æ³¨å†Œå…¥å£å’Œæ§åˆ¶å°ç”¨äº API Key ç®¡ç†ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-3">2. æ³¨å†Œè´¦å·</h3>
<ol>
<li>ç‚¹å‡» <strong>æ³¨å†Œ / ç™»å½•</strong> æŒ‰é’®</li>
<li>ä½¿ç”¨é‚®ç®±æˆ–æ‰‹æœºå·å®Œæˆæ³¨å†Œ</li>
<li>è¿›å…¥ç”¨æˆ·æ§åˆ¶å°</li>
</ol>
<hr/>
<h3 data-id="heading-4">3. åœ¨æ§åˆ¶å°ä¸­åˆ›å»º API Key</h3>
<p>åœ¨æ§åˆ¶å°ç•Œé¢ä¸­ä½ å¯ä»¥çœ‹åˆ° <strong>API Key ç®¡ç†ç•Œé¢</strong>ï¼š</p>
<ul>
<li>ç‚¹å‡» â€œåˆ›å»º API Keyâ€</li>
<li>ç³»ç»Ÿä¼šç”Ÿæˆä¸€ä¸ªç‹¬ä¸€æ— äºŒçš„ Key</li>
</ul>
<blockquote>
<p>é€šå¸¸ä½ ä¼šçœ‹åˆ°å½¢å¦‚ï¼š<br/>
<code>sk-xxx...</code> æˆ–è€…ç”±å¹³å°ç”Ÿæˆçš„ä¸€ä¸²å­—ç¬¦</p>
</blockquote>
<p>è¯·åŠ¡å¿…ä¿ç®¡å¥½è¿™ä¸ª Keyï¼</p>
<hr/>
<h3 data-id="heading-5">4. å……å€¼ / é€‰æ‹©è®¡è´¹è®¡åˆ’ï¼ˆå¦‚æœ‰ï¼‰</h3>
<p>éƒ¨åˆ† API Key éœ€è¦å……å€¼æ‰èƒ½è°ƒç”¨ï¼Œä½ å¯ä»¥åœ¨æ§åˆ¶å°ä¸­é€‰æ‹©è®¡è´¹æ–¹å¼å¹¶å®Œæˆå……å€¼ã€‚</p>
<p>ä¸åŒæ¨¡å‹çš„ä»·æ ¼å¯èƒ½ä¸åŒï¼Œä¾‹å¦‚ï¼š</p>





















<table><thead><tr><th>æ¨¡å‹</th><th>ä»·æ ¼ï¼ˆç¤ºä¾‹ï¼‰</th></tr></thead><tbody><tr><td>GPT-4 ç³»åˆ—</td><td>è¾ƒé«˜å®šä»·</td></tr><tr><td>Claude ç³»åˆ—</td><td>ä¸åŒç‰ˆæœ¬ä»·æ ¼ä¸åŒ</td></tr><tr><td>å…¶ä»–è½»é‡æ¨¡å‹</td><td>ç‰¹å®šä»·æ ¼ <a href="https://link.juejin.cn?target=https%3A%2F%2Fzhuanlan.zhihu.com%2Fp%2F704570010%3Futm_source%3Dchatgpt.com" target="_blank" title="https://zhuanlan.zhihu.com/p/704570010?utm_source=chatgpt.com" ref="nofollow noopener noreferrer">çŸ¥ä¹ä¸“æ </a></td></tr></tbody></table>
<hr/>
<h2 data-id="heading-6">ğŸ› ï¸ ä¸‰ã€å¦‚ä½•åœ¨åç«¯ä½¿ç”¨ GPTsAPI Key</h2>
<p>æœ‰äº† API Key ä¹‹åï¼Œä½ å°±å¯ä»¥é€šè¿‡æ ‡å‡†çš„ OpenAI API å…¼å®¹æ–¹å¼è°ƒç”¨ GPTsAPI äº†ã€‚</p>
<p><strong>åŸºæœ¬åŸåˆ™ï¼š</strong><br/>
âœ¨ æŠŠ API Key æ”¾åœ¨åç«¯ï¼Œä¸æš´éœ²ç»™å‰ç«¯<br/>
âœ¨ ä½¿ç”¨ç»Ÿä¸€åŸºåœ°å€ <code>https://api.gptsapi.net/v1</code></p>
<p>ä¸‹é¢æ˜¯å…³é”®çš„é›†æˆæ–¹å¼ï¼ˆåŸºäºä½ æä¾›çš„ Nuxt åç«¯ä»£ç ï¼‰ã€‚</p>
<hr/>
<h2 data-id="heading-7">ğŸ”Œ å››ã€åç«¯é›†æˆç¤ºä¾‹ä»£ç ï¼ˆNuxt 3 + OpenAI SDKï¼‰</h2>
<pre><code class="hljs language-ini" lang="ini">import OpenAI from "openai"
import { Config } from "~/utils/Config"

export default defineEventHandler(async (event) =&gt; {
  const <span class="hljs-attr">body</span> = await readBody(event)
  const {
    <span class="hljs-attr">model</span> = <span class="hljs-string">"gpt-5-nano"</span>,
    <span class="hljs-attr">prompt</span> = <span class="hljs-string">""</span>,
    <span class="hljs-attr">history</span> = [],
    <span class="hljs-attr">summary</span> = <span class="hljs-string">""</span>,
    <span class="hljs-attr">files</span> = [],
  } = body<span class="hljs-comment">;</span>

  const <span class="hljs-attr">client</span> = new OpenAI({
    apiKey: Config.AI_API_KEY(),
    baseURL: Config.AI_API_BASE_URL(),
  })
</code></pre>
<p>ğŸ”¹ <code>Config.AI_API_KEY()</code> çš„å€¼éœ€è¦æ˜¯ä½ åœ¨ GPTsAPI.net ç”³è¯·çš„ Key<br/>
ğŸ”¹ <code>Config.AI_API_BASE_URL()</code> é€šå¸¸å¡« <code>https://api.gptsapi.net/v1</code></p>
<hr/>
<h2 data-id="heading-8">âœ‚ï¸ äº”ã€æ¸…æ´—å†å²æ¶ˆæ¯ &amp; å¤šæ¨¡æ€å†…å®¹æ„é€ </h2>
<p>ä¸ºäº†æå‡ç”Ÿæˆè´¨é‡ï¼Œä½ çš„ä»£ç ä¸­åšäº†ä»¥ä¸‹ä¼˜åŒ–ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> cleanHistory = (history || []).<span class="hljs-title function_">filter</span>(<span class="hljs-function">(<span class="hljs-params">m</span>) =&gt;</span> {
  <span class="hljs-comment">// è¿‡æ»¤æ— æ•ˆå†å²</span>
})
</code></pre>
<p>è¿™æ ·å¯ä»¥é¿å…æ— æ•ˆã€ç©ºå†…å®¹æµªè´¹ tokenã€‚å¹¶æ”¯æŒæ–‡æœ¬ + å›¾ç‰‡è¾“å…¥é€»è¾‘ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">userContent.push({
  <span class="hljs-built_in">type</span>: <span class="hljs-string">"image_url"</span>,
  image_url: { url: `data:<span class="hljs-variable">${f.type}</span>;<span class="hljs-built_in">base64</span>,<span class="hljs-variable">${f.data}</span>` },
})
</code></pre>
<hr/>
<h2 data-id="heading-9">ğŸ“¡ å…­ã€æµå¼å“åº”ä¸äº§å“ä½“éªŒ</h2>
<p>è°ƒç”¨ API æ—¶ä½ é‡‡ç”¨äº†æµå¼è¾“å‡ºï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">const</span> completion = <span class="hljs-keyword">await</span> client.chat.completions.create({
  model,
  stream: <span class="hljs-literal">true</span>,
  messages,
})
</code></pre>
<p>å¹¶ä½¿ç”¨ Nuxt çš„ <code>sendStream</code> å°†å®æ—¶è¾“å‡ºè¿”å›å‰ç«¯ï¼Œè¿™æ ·ï¼š</p>
<ul>
<li>ç”¨æˆ·å‰ç«¯å¯ä»¥åƒ ChatGPT ä¸€æ ·å®æ—¶çœ‹åˆ°ç»“æœ</li>
<li>å“åº”ä½“éªŒæ›´å¥½</li>
</ul>
<hr/>
<h2 data-id="heading-10">ğŸ’¡ ä¸ƒã€äº§å“çº§æ³¨æ„äº‹é¡¹</h2>
<ol>
<li><strong>ä¸è¦åœ¨å‰ç«¯æš´éœ² API Key</strong></li>
<li><strong>å¯¹è°ƒç”¨è¿›è¡Œé™æµä¸ç›‘æ§</strong></li>
<li><strong>è®¾ç½®æœ€å¤§ token é™åˆ¶</strong></li>
<li><strong>åšå¥½é”™è¯¯å…œåº•ä¸é‡è¯•ç­–ç•¥</strong></li>
</ol>
<hr/>
<h2 data-id="heading-11">ğŸ§¾ å…«ã€ç¤ºä¾‹è¯·æ±‚æ–¹å¼ï¼ˆcurlï¼‰</h2>
<p>å½“ä½ è·å– Key ä»¥åï¼Œå¯ä»¥åœ¨æœ¬åœ°æµ‹è¯•ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">curl https:<span class="hljs-comment">//api.gptsapi.net/v1/chat/completions \
 -H "Authorization: Bearer YOUR_API_KEY" \
 -H "Content-Type: application/json" \
 -d '{</span>
  <span class="hljs-string">"model"</span>: <span class="hljs-string">"gpt-3.5-turbo"</span>,
  <span class="hljs-string">"messages"</span>: [{<span class="hljs-string">"role"</span>: <span class="hljs-string">"user"</span>,<span class="hljs-string">"content"</span>: <span class="hljs-string">"Hello"</span>}]
}'
</code></pre>
<p>ğŸ“Œ è¿™é‡Œä½¿ç”¨çš„å°±æ˜¯<strong>GPTsAPI æä¾›çš„å…¼å®¹ OpenAI çš„ API</strong>ã€‚<a href="https://link.juejin.cn?target=https%3A%2F%2Fzhuanlan.zhihu.com%2Fp%2F704570010%3Futm_source%3Dchatgpt.com" target="_blank" title="https://zhuanlan.zhihu.com/p/704570010?utm_source=chatgpt.com" ref="nofollow noopener noreferrer">çŸ¥ä¹ä¸“æ </a></p>
<hr/>
<h2 data-id="heading-12">âœ… ä¹ã€æ€»ç»“</h2>
<p>é€šè¿‡ GPTsAPI.net ç”³è¯· Key çš„æ­¥éª¤å¯ä»¥æ¦‚æ‹¬ä¸ºï¼š</p>
<ol>
<li>æ‰“å¼€ gptsapi.net</li>
<li>æ³¨å†Œè´¦å·</li>
<li>è¿›å…¥æ§åˆ¶å°åˆ›å»º API Key</li>
<li>åœ¨åç«¯ä½¿ç”¨è¿™ä¸ª Key è°ƒç”¨æ¨¡å‹æ¥å£</li>
</ol>
<hr/>
<p><strong>æœ¬æ–‡éƒ¨åˆ†å†…å®¹å€ŸåŠ© AI è¾…åŠ©ç”Ÿæˆï¼Œå¹¶ç”±ä½œè€…æ•´ç†å®¡æ ¸ã€‚</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Krb5-libs-1.18.2-5.ky10.x86_64.rpm å®‰è£…å¤±è´¥æ€ä¹ˆåŠï¼Ÿé™„è¯¦ç»†æ­¥éª¤]]></title>    <link>https://juejin.cn/post/7589475497001222159</link>    <guid>https://juejin.cn/post/7589475497001222159</guid>    <pubDate>2025-12-30T12:00:36.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589475497001222159" data-draft-id="7589475497001205775" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Krb5-libs-1.18.2-5.ky10.x86_64.rpm å®‰è£…å¤±è´¥æ€ä¹ˆåŠï¼Ÿé™„è¯¦ç»†æ­¥éª¤"/> <meta itemprop="keywords" content="Linux"/> <meta itemprop="datePublished" content="2025-12-30T12:00:36.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç”¨æˆ·613541146016"/> <meta itemprop="url" content="https://juejin.cn/user/1602431422584832"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Krb5-libs-1.18.2-5.ky10.x86_64.rpm å®‰è£…å¤±è´¥æ€ä¹ˆåŠï¼Ÿé™„è¯¦ç»†æ­¥éª¤
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1602431422584832/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç”¨æˆ·613541146016
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-30T12:00:36.000Z" title="Tue Dec 30 2025 12:00:36 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>â€‹</p>
<p><strong>1. å…ˆç¡®è®¤æœ‰æ²¡æœ‰è£…è¿‡</strong>â€‹</p>
<p>Â </p>
<pre><code class="hljs language-css" lang="css">rpm -<span class="hljs-selector-tag">q</span> krb5-libs
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<p>å¦‚æœæç¤º â€œpackage krb5-libs is not installedâ€ï¼Œè¯´æ˜æ²¡è£…ã€‚</p>
<hr/>
<p><strong>2. å‡†å¤‡ rpm æ–‡ä»¶</strong>â€‹</p>
<p><strong>å®‰è£…åŒ…ä¸‹è½½ï¼š</strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fpan.quark.cn%2Fs%2F5451c2c4f828" title="https://pan.quark.cn/s/5451c2c4f828" target="_blank" ref="nofollow noopener noreferrer">pan.quark.cn/s/5451c2c4fâ€¦</a>ï¼ŒæŠŠÂ <code>krb5-libs-1.18.2-5.ky10.x86_64.rpm</code>æ”¾åˆ°æŸä¸ªç›®å½•ï¼Œæ¯”å¦‚Â <code>/tmp</code>ã€‚</p>
<hr/>
<p><strong>3. å®‰è£…</strong>â€‹</p>
<p>ç”¨ root æƒé™æ‰§è¡Œï¼š</p>
<pre><code class="hljs language-bash" lang="bash">sudo rpm -ivh /tmp/krb5-libs-1.18.2-5.ky10.x86_64.rpm
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<p><code>-i</code>æ˜¯å®‰è£…ï¼Œ<code>-v</code>æ˜¾ç¤ºè¿‡ç¨‹ï¼Œ<code>-h</code>æ˜¾ç¤ºè¿›åº¦æ¡ã€‚</p>
<hr/>
<p><strong>4. æ£€æŸ¥æ˜¯å¦æˆåŠŸ</strong>â€‹</p>
<p>å†è¿è¡Œï¼š</p>
<pre><code class="hljs language-css" lang="css">rpm -<span class="hljs-selector-tag">q</span> krb5-libs
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<p>èƒ½çœ‹åˆ°ç‰ˆæœ¬å·å°±è¯´æ˜è£…å¥½äº†ã€‚</p>
<hr/>
<p><strong>5. å¦‚æœé‡åˆ°ä¾èµ–é—®é¢˜</strong>â€‹</p>
<p>Kylin ç³»ç»Ÿä¸€èˆ¬ä¼šæç¤ºç¼ºå°‘å“ªäº›åŒ…ï¼Œä½ å¯ä»¥ç”¨ yum æˆ– aptï¼ˆçœ‹ç³»ç»Ÿï¼‰å…ˆè£…ä¸Šä¾èµ–ï¼Œå†è£…è¿™ä¸ª rpmã€‚</p>
<p>ä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-xml" lang="xml">sudo yum install <span class="hljs-tag">&lt;<span class="hljs-name">ç¼ºå°‘çš„åŒ…å</span>&gt;</span>
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<p>ç„¶åå†é‡å¤ç¬¬ 3 æ­¥ã€‚</p>
<p>â€‹</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ThinkPHP8 å¸¸è§å¹¶å‘åœºæ™¯è§£å†³æ–¹æ¡ˆæ–‡æ¡£]]></title>    <link>https://juejin.cn/post/7589262021561958441</link>    <guid>https://juejin.cn/post/7589262021561958441</guid>    <pubDate>2025-12-30T10:02:13.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589262021561958441" data-draft-id="7589262021561925673" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ThinkPHP8 å¸¸è§å¹¶å‘åœºæ™¯è§£å†³æ–¹æ¡ˆæ–‡æ¡£"/> <meta itemprop="keywords" content="åç«¯,Redis"/> <meta itemprop="datePublished" content="2025-12-30T10:02:13.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å…”ä¸"/> <meta itemprop="url" content="https://juejin.cn/user/2385268740724025"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ThinkPHP8 å¸¸è§å¹¶å‘åœºæ™¯è§£å†³æ–¹æ¡ˆæ–‡æ¡£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2385268740724025/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å…”ä¸
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-30T10:02:13.000Z" title="Tue Dec 30 2025 10:02:13 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ThinkPHP8 å¸¸è§å¹¶å‘åœºæ™¯è§£å†³æ–¹æ¡ˆæ–‡æ¡£</h2>
<h2 data-id="heading-1">ä¸€ã€æ–‡æ¡£è¯´æ˜</h2>
<blockquote>
<p>æœ¬æ–‡æ¡£é’ˆå¯¹å¼€å‘ä¸­é«˜é¢‘å‡ºç°çš„4ç±»å¹¶å‘é—®é¢˜ï¼Œæä¾›åŸºäº ThinkPHP8 çš„å¯ç›´æ¥è¿è¡Œè§£å†³æ–¹æ¡ˆï¼Œæ¶µç›–ä»£ç å®ç°ã€æ ¸å¿ƒåŸç†ã€é€‚ç”¨åœºæ™¯åŠå…³é”®æ³¨æ„äº‹é¡¹ï¼Œæ—¨åœ¨å¸®åŠ©å¼€å‘è€…å¿«é€Ÿè§£å†³å¹¶å‘åœºæ™¯ä¸‹çš„æ•°æ®ä¸€è‡´æ€§å’Œç³»ç»Ÿç¨³å®šæ€§é—®é¢˜ã€‚</p>
</blockquote>
<blockquote>
<p>é€‚ç”¨èŒƒå›´ï¼šThinkPHP8 å¼€å‘è€…ã€éœ€è¦å¤„ç†å¹¶å‘åœºæ™¯ï¼ˆé˜²è¶…å–ã€é˜²é‡å¤æäº¤ç­‰ï¼‰çš„åç«¯å¼€å‘äººå‘˜</p>
</blockquote>
<blockquote>
<p>å‰ç½®ä¾èµ–ï¼šå·²é…ç½® ThinkPHP8 ç¯å¢ƒï¼Œæ¶‰åŠ Redis çš„åœºæ™¯éœ€å®Œæˆ Redis æ‰©å±•åŠé…ç½®</p>
</blockquote>
<h2 data-id="heading-2">äºŒã€æ ¸å¿ƒå¹¶å‘åœºæ™¯è§£å†³æ–¹æ¡ˆ</h2>
<h3 data-id="heading-3">åœºæ™¯1ï¼šåº“å­˜æ‰£å‡ï¼ˆé˜²æ­¢è¶…å–ï¼‰</h3>
<h4 data-id="heading-4">1.1 åœºæ™¯è¯´æ˜</h4>
<p>é«˜å¹¶å‘åœºæ™¯ä¸‹ï¼ˆå¦‚ç§’æ€ã€ä¿ƒé”€æ´»åŠ¨ï¼‰ï¼Œå¤šä¸ªç”¨æˆ·åŒæ—¶æŠ¢è´­åŒä¸€å•†å“ï¼Œè‹¥æœªåšå¹¶å‘æ§åˆ¶ï¼Œä¼šå‡ºç°åº“å­˜æ‰£å‡ä¸ºè´Ÿæ•°çš„â€œè¶…å–â€é—®é¢˜ï¼Œå¯¼è‡´ä¸šåŠ¡é€»è¾‘å¼‚å¸¸ã€‚æ ¸å¿ƒéœ€æ±‚ï¼šä¿è¯åº“å­˜æ•°æ®ä¸€è‡´æ€§ï¼Œä¸å‡ºç°è¶…å–ã€‚</p>
<h4 data-id="heading-5">1.2 æ–¹æ¡ˆé€‰å‹ï¼šMySQL æ‚²è§‚é”ï¼ˆè¡Œé”ï¼‰</h4>
<p>é‡‡ç”¨ MySQL InnoDB å­˜å‚¨å¼•æ“çš„è¡Œçº§æ’ä»–é”ï¼Œç»“åˆäº‹åŠ¡æœºåˆ¶ï¼Œç¡®ä¿â€œæ£€æŸ¥åº“å­˜+æ‰£å‡åº“å­˜â€çš„åŸå­æ€§ï¼ŒåŒä¸€æ—¶é—´ä»…å…è®¸ä¸€ä¸ªè¯·æ±‚ä¿®æ”¹ç›®æ ‡å•†å“çš„åº“å­˜è®°å½•ã€‚é€‚ç”¨äºåº“å­˜ä¸€è‡´æ€§è¦æ±‚é«˜ã€å¹¶å‘é‡ä¸­ç­‰çš„åœºæ™¯ï¼ˆå¦‚æ™®é€šç”µå•†è®¢å•ï¼‰ã€‚</p>
<h4 data-id="heading-6">1.3 å®ç°ä»£ç </h4>
<pre><code class="hljs language-php" lang="php">
<span class="hljs-meta">&lt;?php</span>
<span class="hljs-keyword">namespace</span> <span class="hljs-title class_">app</span>\<span class="hljs-title class_">controller</span>;

<span class="hljs-keyword">use</span> <span class="hljs-title">think</span>\<span class="hljs-title">facade</span>\<span class="hljs-title">Db</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">think</span>\<span class="hljs-title">response</span>\<span class="hljs-title">Json</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">StockController</span>
</span>{
    <span class="hljs-comment">/**
     * å•†å“åº“å­˜æ‰£å‡æ¥å£
     * <span class="hljs-doctag">@param</span> int $productId å•†å“IDï¼ˆURLå‚æ•°ï¼‰
     * <span class="hljs-doctag">@param</span> int $num æ‰£å‡æ•°é‡ï¼ˆé»˜è®¤1ï¼‰
     * <span class="hljs-doctag">@return</span> Json
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">reduceStock</span>(<span class="hljs-params"><span class="hljs-keyword">int</span> <span class="hljs-variable">$productId</span>, <span class="hljs-keyword">int</span> <span class="hljs-variable">$num</span> = <span class="hljs-number">1</span></span>): <span class="hljs-title">Json</span>
    </span>{
        <span class="hljs-comment">// å¼€å¯æ•°æ®åº“äº‹åŠ¡ï¼Œä¿è¯æ“ä½œåŸå­æ€§</span>
        <span class="hljs-title class_">Db</span>::<span class="hljs-title function_ invoke__">startTrans</span>();
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// 1. é”å®šç›®æ ‡å•†å“è¡Œè®°å½•ï¼ˆæ’ä»–é”ï¼Œé˜²æ­¢å¹¶å‘ä¿®æ”¹ï¼‰</span>
            <span class="hljs-comment">// lock(true) ç­‰ä»·äº SQL ä¸­çš„ SELECT ... FOR UPDATE</span>
            <span class="hljs-variable">$product</span> = <span class="hljs-title class_">Db</span>::<span class="hljs-title function_ invoke__">name</span>(<span class="hljs-string">'product'</span>)
                -&gt;<span class="hljs-title function_ invoke__">where</span>(<span class="hljs-string">'id'</span>, <span class="hljs-variable">$productId</span>)
                -&gt;<span class="hljs-title function_ invoke__">lock</span>(<span class="hljs-literal">true</span>)
                -&gt;<span class="hljs-title function_ invoke__">find</span>();

            <span class="hljs-comment">// 2. åŸºç¡€æ ¡éªŒ</span>
            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">empty</span>(<span class="hljs-variable">$product</span>)) {
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">\Exception</span>(<span class="hljs-string">"å•†å“ä¸å­˜åœ¨"</span>);
            }
            <span class="hljs-keyword">if</span> (<span class="hljs-variable">$product</span>[<span class="hljs-string">'stock'</span>] &lt; <span class="hljs-variable">$num</span>) {
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">\Exception</span>(<span class="hljs-string">"åº“å­˜ä¸è¶³ï¼Œå½“å‰åº“å­˜ï¼š<span class="hljs-subst">{$product['stock']}</span>"</span>);
            }

            <span class="hljs-comment">// 3. æ‰£å‡åº“å­˜ï¼ˆä½¿ç”¨ Db::raw ç¡®ä¿SQLè¯­æ³•æ­£ç¡®ï¼‰</span>
            <span class="hljs-variable">$updateRes</span> = <span class="hljs-title class_">Db</span>::<span class="hljs-title function_ invoke__">name</span>(<span class="hljs-string">'product'</span>)
                -&gt;<span class="hljs-title function_ invoke__">where</span>(<span class="hljs-string">'id'</span>, <span class="hljs-variable">$productId</span>)
                -&gt;<span class="hljs-title function_ invoke__">update</span>([<span class="hljs-string">'stock'</span> =&gt; <span class="hljs-title class_">Db</span>::<span class="hljs-title function_ invoke__">raw</span>(<span class="hljs-string">"stock - <span class="hljs-subst">{$num}</span>"</span>)]);

            <span class="hljs-keyword">if</span> (!<span class="hljs-variable">$updateRes</span>) {
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">\Exception</span>(<span class="hljs-string">"åº“å­˜æ‰£å‡å¤±è´¥"</span>);
            }

            <span class="hljs-comment">// 4. æäº¤äº‹åŠ¡</span>
            <span class="hljs-title class_">Db</span>::<span class="hljs-title function_ invoke__">commit</span>();
            <span class="hljs-keyword">return</span> <span class="hljs-title function_ invoke__">json</span>([
                <span class="hljs-string">'code'</span> =&gt; <span class="hljs-number">0</span>,
                <span class="hljs-string">'msg'</span> =&gt; <span class="hljs-string">'åº“å­˜æ‰£å‡æˆåŠŸ'</span>,
                <span class="hljs-string">'data'</span> =&gt; [<span class="hljs-string">'product_id'</span> =&gt; <span class="hljs-variable">$productId</span>, <span class="hljs-string">'remain_stock'</span> =&gt; <span class="hljs-variable">$product</span>[<span class="hljs-string">'stock'</span>] - <span class="hljs-variable">$num</span>]
            ]);
        } <span class="hljs-keyword">catch</span> (\<span class="hljs-built_in">Exception</span> <span class="hljs-variable">$e</span>) {
            <span class="hljs-comment">// 5. å¼‚å¸¸å›æ»šäº‹åŠ¡</span>
            <span class="hljs-title class_">Db</span>::<span class="hljs-title function_ invoke__">rollback</span>();
            <span class="hljs-keyword">return</span> <span class="hljs-title function_ invoke__">json</span>([
                <span class="hljs-string">'code'</span> =&gt; <span class="hljs-number">1</span>,
                <span class="hljs-string">'msg'</span> =&gt; <span class="hljs-variable">$e</span>-&gt;<span class="hljs-title function_ invoke__">getMessage</span>(),
                <span class="hljs-string">'data'</span> =&gt; []
            ]);
        }
    }
}

</code></pre>
<h4 data-id="heading-7">1.4 å…³é”®è§£æ</h4>
<ul>
<li>
<p><strong>è¡Œé”æœºåˆ¶</strong>ï¼š<code>lock(true)</code> ä¼šå¯¹æŸ¥è¯¢çš„å•†å“è®°å½•åŠ æ’ä»–é”ï¼ŒåŒä¸€æ—¶é—´åªæœ‰ä¸€ä¸ªäº‹åŠ¡èƒ½è·å–è¯¥é”ï¼Œå…¶ä»–è¯·æ±‚éœ€ç­‰å¾…é”é‡Šæ”¾ï¼Œé¿å…å¹¶å‘ä¿®æ”¹å†²çªã€‚</p>
</li>
<li>
<p><strong>äº‹åŠ¡ä¿éšœ</strong>ï¼šé€šè¿‡ <code>Db::startTrans()</code>ã€<code>Db::commit()</code>ã€<code>Db::rollback()</code> ç¡®ä¿â€œæŸ¥åº“å­˜+æ‰£åº“å­˜â€æ˜¯åŸå­æ“ä½œï¼Œè¦ä¹ˆå…¨éƒ¨æˆåŠŸï¼Œè¦ä¹ˆå…¨éƒ¨å›æ»šã€‚</p>
</li>
<li>
<p><strong>è¡¨ç»“æ„è¦æ±‚</strong>ï¼šproduct è¡¨éœ€åŒ…å« idï¼ˆä¸»é”®ï¼‰ã€stockï¼ˆåº“å­˜å­—æ®µï¼‰ï¼Œä¸»é”®ç´¢å¼•ç¡®ä¿è¡Œé”èƒ½ç²¾å‡†é”å®šå•æ¡è®°å½•ï¼ˆæ— ç´¢å¼•ä¼šé€€åŒ–ä¸ºè¡¨é”ï¼Œé™ä½å¹¶å‘ï¼‰ã€‚</p>
</li>
<li>
<p><strong>ä¼˜åŒ–æ–¹å‘</strong>ï¼šé«˜å¹¶å‘ç§’æ€åœºæ™¯å¯æ”¹ç”¨â€œRedis é¢„æ‰£å‡+MQ å¼‚æ­¥è½åº“â€æ–¹æ¡ˆï¼Œè¿›ä¸€æ­¥æå‡ç³»ç»Ÿååé‡ã€‚</p>
</li>
</ul>
<h3 data-id="heading-8">åœºæ™¯2ï¼šè®¢å•åˆ›å»ºï¼ˆé˜²æ­¢é‡å¤æäº¤ï¼‰</h3>
<h4 data-id="heading-9">2.1 åœºæ™¯è¯´æ˜</h4>
<p>ç”¨æˆ·å› ç½‘ç»œå»¶è¿Ÿã€é‡å¤ç‚¹å‡»æŒ‰é’®ã€æ¶æ„é‡è¯•ç­‰åŸå› ï¼Œå¯èƒ½å¯¼è‡´åŒä¸€è®¢å•è¯·æ±‚è¢«å¤šæ¬¡æäº¤ï¼Œå‡ºç°é‡å¤åˆ›å»ºè®¢å•ã€é‡å¤æ‰£å‡åº“å­˜çš„é—®é¢˜ã€‚æ ¸å¿ƒéœ€æ±‚ï¼šç¡®ä¿åŒä¸€è®¢å•è¯·æ±‚ä»…è¢«å¤„ç†ä¸€æ¬¡ã€‚</p>
<h4 data-id="heading-10">2.2 æ–¹æ¡ˆé€‰å‹ï¼šToken ä»¤ç‰ŒéªŒè¯</h4>
<p>åŸºäºâ€œä¸€æ¬¡æ€§ Tokenâ€æœºåˆ¶ï¼Œå‰ç«¯è¯·æ±‚è®¢å•åˆ›å»ºå‰å…ˆè·å–ä»¤ç‰Œï¼Œæäº¤è®¢å•æ—¶æºå¸¦ä»¤ç‰Œï¼Œåç«¯éªŒè¯ä»¤ç‰Œæœ‰æ•ˆæ€§ï¼ˆæœªä½¿ç”¨è¿‡ã€æœªè¿‡æœŸï¼‰ï¼ŒéªŒè¯é€šè¿‡åç«‹å³å¤±æ•ˆä»¤ç‰Œï¼Œé˜²æ­¢é‡å¤ä½¿ç”¨ã€‚é€‚ç”¨äºè¡¨å•æäº¤ã€API æ¥å£é˜²é‡æ”¾ç­‰åœºæ™¯ã€‚</p>
<h4 data-id="heading-11">2.3 å®ç°ä»£ç </h4>
<pre><code class="hljs language-php" lang="php">
<span class="hljs-meta">&lt;?php</span>
<span class="hljs-keyword">namespace</span> <span class="hljs-title class_">app</span>\<span class="hljs-title class_">controller</span>;

<span class="hljs-keyword">use</span> <span class="hljs-title">think</span>\<span class="hljs-title">facade</span>\<span class="hljs-title">Cache</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">think</span>\<span class="hljs-title">facade</span>\<span class="hljs-title">Db</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">think</span>\<span class="hljs-title">facade</span>\<span class="hljs-title">Session</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">think</span>\<span class="hljs-title">request</span>\<span class="hljs-title">Request</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">think</span>\<span class="hljs-title">response</span>\<span class="hljs-title">Json</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">OrderController</span>
</span>{
    <span class="hljs-comment">/**
     * 1. è·å–é˜²é‡å¤æäº¤ Tokenï¼ˆå‰ç«¯è°ƒç”¨ï¼‰
     * <span class="hljs-doctag">@return</span> Json
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getOrderToken</span>(<span class="hljs-params"/>): <span class="hljs-title">Json</span>
    </span>{
        <span class="hljs-comment">// ç”Ÿæˆéšæœºå”¯ä¸€ Tokenï¼ˆmd5+uniqid ä¿è¯å”¯ä¸€æ€§ï¼‰</span>
        <span class="hljs-variable">$token</span> = <span class="hljs-title function_ invoke__">md5</span>(<span class="hljs-title function_ invoke__">uniqid</span>(<span class="hljs-title function_ invoke__">mt_rand</span>(), <span class="hljs-literal">true</span>));
        <span class="hljs-comment">// å­˜å‚¨ Tokenï¼šå•æœºç”¨ Sessionï¼Œåˆ†å¸ƒå¼ç”¨ Redisï¼ˆæ­¤å¤„å…¼å®¹ä¸¤ç§åœºæ™¯ï¼‰</span>
        <span class="hljs-keyword">if</span> (<span class="hljs-title function_ invoke__">config</span>(<span class="hljs-string">'cache.default'</span>) === <span class="hljs-string">'redis'</span>) {
            <span class="hljs-comment">// Redis å­˜å‚¨ï¼Œè®¾ç½® 10 åˆ†é’Ÿè¿‡æœŸï¼ˆé¿å…ä»¤ç‰Œå †ç§¯ï¼‰</span>
            <span class="hljs-title class_">Cache</span>::<span class="hljs-title function_ invoke__">store</span>(<span class="hljs-string">'redis'</span>)-&gt;<span class="hljs-title function_ invoke__">set</span>(<span class="hljs-string">"order_token:"</span>.<span class="hljs-title class_">Session</span>::<span class="hljs-title function_ invoke__">getId</span>(), <span class="hljs-variable">$token</span>, <span class="hljs-number">600</span>);
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-comment">// Session å­˜å‚¨</span>
            <span class="hljs-title class_">Session</span>::<span class="hljs-title function_ invoke__">set</span>(<span class="hljs-string">'order_token'</span>, <span class="hljs-variable">$token</span>);
        }
        <span class="hljs-keyword">return</span> <span class="hljs-title function_ invoke__">json</span>([
            <span class="hljs-string">'code'</span> =&gt; <span class="hljs-number">0</span>,
            <span class="hljs-string">'msg'</span> =&gt; <span class="hljs-string">'Token è·å–æˆåŠŸ'</span>,
            <span class="hljs-string">'data'</span> =&gt; [<span class="hljs-string">'token'</span> =&gt; <span class="hljs-variable">$token</span>]
        ]);
    }

    <span class="hljs-comment">/**
     * 2. åˆ›å»ºè®¢å•æ¥å£ï¼ˆå‰ç«¯æºå¸¦ Token æäº¤ï¼‰
     * <span class="hljs-doctag">@param</span> Request $request
     * <span class="hljs-doctag">@return</span> Json
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">createOrder</span>(<span class="hljs-params">Request <span class="hljs-variable">$request</span></span>): <span class="hljs-title">Json</span>
    </span>{
        <span class="hljs-variable">$postData</span> = <span class="hljs-variable">$request</span>-&gt;<span class="hljs-title function_ invoke__">post</span>();
        <span class="hljs-comment">// å¿…è¦å‚æ•°æ ¡éªŒ</span>
        <span class="hljs-variable">$validateRes</span> = <span class="hljs-variable language_">$this</span>-&gt;<span class="hljs-title function_ invoke__">validate</span>(<span class="hljs-variable">$postData</span>, [
            <span class="hljs-string">'user_id'</span> =&gt; <span class="hljs-string">'require|integer'</span>,
            <span class="hljs-string">'product_id'</span> =&gt; <span class="hljs-string">'require|integer'</span>,
            <span class="hljs-string">'amount'</span> =&gt; <span class="hljs-string">'require|float|gt:0'</span>,
            <span class="hljs-string">'token'</span> =&gt; <span class="hljs-string">'require'</span>
        ]);
        <span class="hljs-keyword">if</span> (<span class="hljs-variable">$validateRes</span> !== <span class="hljs-literal">true</span>) {
            <span class="hljs-keyword">return</span> <span class="hljs-title function_ invoke__">json</span>([<span class="hljs-string">'code'</span> =&gt; <span class="hljs-number">1</span>, <span class="hljs-string">'msg'</span> =&gt; <span class="hljs-variable">$validateRes</span>, <span class="hljs-string">'data'</span> =&gt; []]);
        }

        <span class="hljs-variable">$token</span> = <span class="hljs-variable">$postData</span>[<span class="hljs-string">'token'</span>];
        <span class="hljs-variable">$tokenKey</span> = <span class="hljs-title function_ invoke__">config</span>(<span class="hljs-string">'cache.default'</span>) === <span class="hljs-string">'redis'</span> 
            ? <span class="hljs-string">"order_token:"</span>.<span class="hljs-title class_">Session</span>::<span class="hljs-title function_ invoke__">getId</span>() 
            : <span class="hljs-string">'order_token'</span>;

        <span class="hljs-comment">// 3. éªŒè¯ Token æœ‰æ•ˆæ€§</span>
        <span class="hljs-variable">$storedToken</span> = <span class="hljs-title function_ invoke__">config</span>(<span class="hljs-string">'cache.default'</span>) === <span class="hljs-string">'redis'</span> 
            ? <span class="hljs-title class_">Cache</span>::<span class="hljs-title function_ invoke__">store</span>(<span class="hljs-string">'redis'</span>)-&gt;<span class="hljs-title function_ invoke__">get</span>(<span class="hljs-variable">$tokenKey</span>) 
            : <span class="hljs-title class_">Session</span>::<span class="hljs-title function_ invoke__">get</span>(<span class="hljs-string">'order_token'</span>);

        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">empty</span>(<span class="hljs-variable">$storedToken</span>) || <span class="hljs-variable">$storedToken</span> !== <span class="hljs-variable">$token</span>) {
            <span class="hljs-keyword">return</span> <span class="hljs-title function_ invoke__">json</span>([<span class="hljs-string">'code'</span> =&gt; <span class="hljs-number">1</span>, <span class="hljs-string">'msg'</span> =&gt; <span class="hljs-string">'é‡å¤æäº¤æˆ– Token å·²å¤±æ•ˆ'</span>, <span class="hljs-string">'data'</span> =&gt; []]);
        }

        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// 4. éªŒè¯é€šè¿‡ï¼Œç«‹å³é”€æ¯ Tokenï¼ˆæ ¸å¿ƒï¼šç¡®ä¿ä¸€æ¬¡æ€§ä½¿ç”¨ï¼‰</span>
            <span class="hljs-keyword">if</span> (<span class="hljs-title function_ invoke__">config</span>(<span class="hljs-string">'cache.default'</span>) === <span class="hljs-string">'redis'</span>) {
                <span class="hljs-title class_">Cache</span>::<span class="hljs-title function_ invoke__">store</span>(<span class="hljs-string">'redis'</span>)-&gt;<span class="hljs-title function_ invoke__">delete</span>(<span class="hljs-variable">$tokenKey</span>);
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-title class_">Session</span>::<span class="hljs-title function_ invoke__">delete</span>(<span class="hljs-string">'order_token'</span>);
            }

            <span class="hljs-comment">// 5. æ‰§è¡Œåˆ›å»ºè®¢å•é€»è¾‘ï¼ˆæ­¤å¤„å¯è°ƒç”¨åº“å­˜æ‰£å‡æ¥å£ï¼‰</span>
            <span class="hljs-variable">$orderId</span> = <span class="hljs-title class_">Db</span>::<span class="hljs-title function_ invoke__">name</span>(<span class="hljs-string">'order'</span>)-&gt;<span class="hljs-title function_ invoke__">insertGetId</span>([
                <span class="hljs-string">'user_id'</span> =&gt; <span class="hljs-variable">$postData</span>[<span class="hljs-string">'user_id'</span>],
                <span class="hljs-string">'product_id'</span> =&gt; <span class="hljs-variable">$postData</span>[<span class="hljs-string">'product_id'</span>],
                <span class="hljs-string">'amount'</span> =&gt; <span class="hljs-variable">$postData</span>[<span class="hljs-string">'amount'</span>],
                <span class="hljs-string">'order_sn'</span> =&gt; <span class="hljs-variable">$this</span>-&gt;<span class="hljs-title function_ invoke__">generateOrderSn</span>(), // ç”Ÿæˆè®¢å•å·
                <span class="hljs-string">'status'</span> =&gt; <span class="hljs-number">1</span>, // <span class="hljs-number">1</span>-å¾…æ”¯ä»˜
                <span class="hljs-string">'create_time'</span> =&gt; <span class="hljs-title function_ invoke__">time</span>()
            ]);

            <span class="hljs-keyword">return</span> <span class="hljs-title function_ invoke__">json</span>([
                <span class="hljs-string">'code'</span> =&gt; <span class="hljs-number">0</span>,
                <span class="hljs-string">'msg'</span> =&gt; <span class="hljs-string">'è®¢å•åˆ›å»ºæˆåŠŸ'</span>,
                <span class="hljs-string">'data'</span> =&gt; [<span class="hljs-string">'order_id'</span> =&gt; <span class="hljs-variable">$orderId</span>, <span class="hljs-string">'order_sn'</span> =&gt; <span class="hljs-variable">$this</span>-&gt;<span class="hljs-title function_ invoke__">generateOrderSn</span>()]
            ]);
        } <span class="hljs-keyword">catch</span> (\<span class="hljs-built_in">Exception</span> <span class="hljs-variable">$e</span>) {
            <span class="hljs-keyword">return</span> <span class="hljs-title function_ invoke__">json</span>([<span class="hljs-string">'code'</span> =&gt; <span class="hljs-number">1</span>, <span class="hljs-string">'msg'</span> =&gt; <span class="hljs-variable">$e</span>-&gt;<span class="hljs-title function_ invoke__">getMessage</span>(), <span class="hljs-string">'data'</span> =&gt; []]);
        }
    }

    <span class="hljs-comment">/**
     * è¾…åŠ©æ–¹æ³•ï¼šç”Ÿæˆå”¯ä¸€è®¢å•å·
     * <span class="hljs-doctag">@return</span> string
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">generateOrderSn</span>(<span class="hljs-params"/>): <span class="hljs-title">string</span>
    </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-title function_ invoke__">date</span>(<span class="hljs-string">'YmdHis'</span>) . <span class="hljs-title function_ invoke__">mt_rand</span>(<span class="hljs-number">1000</span>, <span class="hljs-number">9999</span>);
    }
}

</code></pre>
<h4 data-id="heading-12">2.4 å…³é”®è§£æ</h4>
<ul>
<li>
<p><strong>Token å”¯ä¸€æ€§</strong>ï¼šé€šè¿‡ <code>uniqid(mt_rand(), true)</code> ç”Ÿæˆéšæœºå­—ç¬¦ä¸²ï¼Œç»“åˆ md5 åŠ å¯†ï¼Œç¡®ä¿ Token å”¯ä¸€ä¸”ä¸å¯é¢„æµ‹ã€‚</p>
</li>
<li>
<p><strong>å­˜å‚¨é€‚é…</strong>ï¼šå…¼å®¹å•æœºï¼ˆSessionï¼‰å’Œåˆ†å¸ƒå¼ï¼ˆRedisï¼‰éƒ¨ç½²ï¼ŒRedis å­˜å‚¨æ—¶é€šè¿‡ SessionID åŒºåˆ†ç”¨æˆ·ï¼Œé¿å… Token æ··æ·†ã€‚</p>
</li>
<li>
<p><strong>ä¸€æ¬¡æ€§æœ‰æ•ˆæ€§</strong>ï¼šè®¢å•åˆ›å»ºæˆåŠŸå‰ç«‹å³é”€æ¯ Tokenï¼Œå³ä½¿åŒä¸€ Token è¢«é‡å¤æäº¤ï¼Œä¹Ÿä¼šå›  Token ä¸å­˜åœ¨è€Œè¢«æ‹’ç»ã€‚</p>
</li>
<li>
<p><strong>è¿‡æœŸæœºåˆ¶</strong>ï¼šRedis å­˜å‚¨çš„ Token è®¾ç½® 10 åˆ†é’Ÿè¿‡æœŸï¼Œé¿å…å› ç”¨æˆ·æœªæäº¤è®¢å•å¯¼è‡´ Token é•¿æœŸå †ç§¯ã€‚</p>
</li>
</ul>
<h3 data-id="heading-13">åœºæ™¯3ï¼šåˆ†å¸ƒå¼ä»»åŠ¡è°ƒåº¦ï¼ˆé˜²æ­¢é‡å¤æ‰§è¡Œï¼‰</h3>
<h4 data-id="heading-14">3.1 åœºæ™¯è¯´æ˜</h4>
<p>åˆ†å¸ƒå¼éƒ¨ç½²ç¯å¢ƒä¸‹ï¼ˆå¤šå°æœåŠ¡å™¨ï¼‰ï¼Œå®šæ—¶ä»»åŠ¡ï¼ˆå¦‚ç”Ÿæˆæ—¥æŠ¥è¡¨ã€æ•°æ®åŒæ­¥ï¼‰è‹¥æœªåšæ§åˆ¶ï¼Œä¼šå‡ºç°å¤šå°æœåŠ¡å™¨åŒæ—¶æ‰§è¡ŒåŒä¸€ä»»åŠ¡çš„æƒ…å†µï¼Œå¯¼è‡´æ•°æ®é‡å¤å¤„ç†ã€èµ„æºæµªè´¹ã€‚æ ¸å¿ƒéœ€æ±‚ï¼šåŒä¸€ä»»åŠ¡åŒä¸€æ—¶é—´ä»…è¢«ä¸€å°æœåŠ¡å™¨æ‰§è¡Œã€‚</p>
<h4 data-id="heading-15">3.2 æ–¹æ¡ˆé€‰å‹ï¼šRedis åˆ†å¸ƒå¼é”</h4>
<p>åŸºäº Redis çš„ <code>SET NX</code>ï¼ˆSet if Not Existsï¼‰åŸå­å‘½ä»¤å®ç°åˆ†å¸ƒå¼é”ï¼Œä»»åŠ¡æ‰§è¡Œå‰å°è¯•è·å–é”ï¼Œè·å–æˆåŠŸåˆ™æ‰§è¡Œä»»åŠ¡ï¼Œå¤±è´¥åˆ™è¯´æ˜å…¶ä»–èŠ‚ç‚¹æ­£åœ¨æ‰§è¡Œï¼Œç›´æ¥è¿”å›ã€‚é€‚ç”¨äºåˆ†å¸ƒå¼å®šæ—¶ä»»åŠ¡ã€è·¨æœåŠ¡æ•°æ®åŒæ­¥ç­‰åœºæ™¯ã€‚</p>
<h4 data-id="heading-16">3.3 å®ç°ä»£ç </h4>
<pre><code class="hljs language-php" lang="php">
<span class="hljs-meta">&lt;?php</span>
<span class="hljs-keyword">namespace</span> <span class="hljs-title class_">app</span>\<span class="hljs-title class_">controller</span>;

<span class="hljs-keyword">use</span> <span class="hljs-title">think</span>\<span class="hljs-title">facade</span>\<span class="hljs-title">Cache</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">think</span>\<span class="hljs-title">response</span>\<span class="hljs-title">Json</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TaskController</span>
</span>{
    <span class="hljs-comment">/**
     * åˆ†å¸ƒå¼å®šæ—¶ä»»åŠ¡æ‰§è¡Œå…¥å£
     * ç¤ºä¾‹ï¼šæ¯æ—¥å‡Œæ™¨2ç‚¹æ‰§è¡Œæ—¥æŠ¥è¡¨ç”Ÿæˆä»»åŠ¡
     * <span class="hljs-doctag">@param</span> string $taskName ä»»åŠ¡åç§°ï¼ˆå¦‚ï¼šdaily_reportï¼‰
     * <span class="hljs-doctag">@return</span> Json
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">runDistributedTask</span>(<span class="hljs-params"><span class="hljs-keyword">string</span> <span class="hljs-variable">$taskName</span></span>): <span class="hljs-title">Json</span>
    </span>{
        <span class="hljs-comment">// 1. é”ç›¸å…³é…ç½®</span>
        <span class="hljs-variable">$lockKey</span> = <span class="hljs-string">"distributed_lock:task:<span class="hljs-subst">{$taskName}</span>"</span>; <span class="hljs-comment">// é” Keyï¼ˆæŒ‰ä»»åŠ¡åç§°åŒºåˆ†ï¼‰</span>
        <span class="hljs-variable">$lockExpire</span> = <span class="hljs-number">300</span>; <span class="hljs-comment">// é”è¿‡æœŸæ—¶é—´ï¼ˆ5åˆ†é’Ÿï¼‰ï¼Œé˜²æ­¢èŠ‚ç‚¹æŒ‚æ‰å¯¼è‡´é”æ°¸ä¹…ä¸é‡Šæ”¾</span>
        <span class="hljs-variable">$lockValue</span> = <span class="hljs-title function_ invoke__">uniqid</span>(); <span class="hljs-comment">// é”å€¼ï¼ˆç”¨äºé‡Šæ”¾é”æ—¶æ ¡éªŒï¼Œé¿å…è¯¯åˆ å…¶ä»–é”ï¼‰</span>

        <span class="hljs-comment">// 2. å°è¯•è·å– Redis åˆ†å¸ƒå¼é”ï¼ˆSET NX + EX åŸå­æ“ä½œï¼‰</span>
        <span class="hljs-comment">// NXï¼šä»…å½“ Key ä¸å­˜åœ¨æ—¶è®¾ç½®æˆåŠŸï¼›EXï¼šè®¾ç½®è¿‡æœŸæ—¶é—´ï¼ˆç§’ï¼‰</span>
        <span class="hljs-variable">$isLocked</span> = <span class="hljs-title class_">Cache</span>::<span class="hljs-title function_ invoke__">store</span>(<span class="hljs-string">'redis'</span>)-&gt;<span class="hljs-title function_ invoke__">set</span>(<span class="hljs-variable">$lockKey</span>, <span class="hljs-variable">$lockValue</span>, <span class="hljs-variable">$lockExpire</span>, [<span class="hljs-string">'NX'</span>]);

        <span class="hljs-keyword">if</span> (!<span class="hljs-variable">$isLocked</span>) {
            <span class="hljs-comment">// æœªè·å–åˆ°é”ï¼Œè¯´æ˜å…¶ä»–èŠ‚ç‚¹æ­£åœ¨æ‰§è¡Œä»»åŠ¡</span>
            <span class="hljs-keyword">return</span> <span class="hljs-title function_ invoke__">json</span>([
                <span class="hljs-string">'code'</span> =&gt; <span class="hljs-number">1</span>,
                <span class="hljs-string">'msg'</span> =&gt; <span class="hljs-string">"ä»»åŠ¡ã€<span class="hljs-subst">{$taskName}</span>ã€‘å·²åœ¨å…¶ä»–èŠ‚ç‚¹æ‰§è¡Œä¸­"</span>,
                <span class="hljs-string">'data'</span> =&gt; []
            ]);
        }

        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// 3. è·å–é”æˆåŠŸï¼Œæ‰§è¡Œä»»åŠ¡é€»è¾‘</span>
            <span class="hljs-keyword">switch</span> (<span class="hljs-variable">$taskName</span>) {
                <span class="hljs-keyword">case</span> <span class="hljs-string">'daily_report'</span>:
                    <span class="hljs-variable language_">$this</span>-&gt;<span class="hljs-title function_ invoke__">generateDailyReport</span>(); <span class="hljs-comment">// ç”Ÿæˆæ—¥æŠ¥è¡¨</span>
                    <span class="hljs-keyword">break</span>;
                <span class="hljs-keyword">case</span> <span class="hljs-string">'data_sync'</span>:
                    <span class="hljs-variable language_">$this</span>-&gt;<span class="hljs-title function_ invoke__">syncData</span>(); <span class="hljs-comment">// æ•°æ®åŒæ­¥ï¼ˆç¤ºä¾‹æ–¹æ³•ï¼‰</span>
                    <span class="hljs-keyword">break</span>;
                <span class="hljs-keyword">default</span>:
                    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">\Exception</span>(<span class="hljs-string">"æœªçŸ¥ä»»åŠ¡åç§°ï¼š<span class="hljs-subst">{$taskName}</span>"</span>);
            }

            <span class="hljs-keyword">return</span> <span class="hljs-title function_ invoke__">json</span>([
                <span class="hljs-string">'code'</span> =&gt; <span class="hljs-number">0</span>,
                <span class="hljs-string">'msg'</span> =&gt; <span class="hljs-string">"ä»»åŠ¡ã€<span class="hljs-subst">{$taskName}</span>ã€‘æ‰§è¡Œå®Œæˆ"</span>,
                <span class="hljs-string">'data'</span> =&gt; []
            ]);
        } <span class="hljs-keyword">catch</span> (\<span class="hljs-built_in">Exception</span> <span class="hljs-variable">$e</span>) {
            <span class="hljs-keyword">return</span> <span class="hljs-title function_ invoke__">json</span>([
                <span class="hljs-string">'code'</span> =&gt; <span class="hljs-number">1</span>,
                <span class="hljs-string">'msg'</span> =&gt; <span class="hljs-string">"ä»»åŠ¡ã€<span class="hljs-subst">{$taskName}</span>ã€‘æ‰§è¡Œå¤±è´¥ï¼š"</span> . <span class="hljs-variable">$e</span>-&gt;<span class="hljs-title function_ invoke__">getMessage</span>(),
                <span class="hljs-string">'data'</span> =&gt; []
            ]);
        } <span class="hljs-keyword">finally</span> {
            <span class="hljs-comment">// 4. ä»»åŠ¡æ‰§è¡Œå®Œæˆ/å¤±è´¥ï¼Œé‡Šæ”¾é”ï¼ˆLuaè„šæœ¬ä¿è¯åŸå­æ€§ï¼‰</span>
            <span class="hljs-comment">// é¿å…å› ä»»åŠ¡æ‰§è¡Œæ—¶é—´è¶…è¿‡é”è¿‡æœŸæ—¶é—´ï¼Œå¯¼è‡´è¯¯åˆ å…¶ä»–èŠ‚ç‚¹çš„é”</span>
            <span class="hljs-variable">$luaScript</span> = <span class="hljs-string">"if redis.call('get', KEYS[1]) == ARGV[1] then return redis.call('del', KEYS[1]) else return 0 end"</span>;
            <span class="hljs-title class_">Cache</span>::<span class="hljs-title function_ invoke__">store</span>(<span class="hljs-string">'redis'</span>)-&gt;<span class="hljs-keyword">eval</span>(<span class="hljs-variable">$luaScript</span>, [<span class="hljs-variable">$lockKey</span>, <span class="hljs-variable">$lockValue</span>], <span class="hljs-number">1</span>);
        }
    }

    <span class="hljs-comment">/**
     * ä»»åŠ¡1ï¼šç”Ÿæˆæ—¥æŠ¥è¡¨ï¼ˆç¤ºä¾‹å®ç°ï¼‰
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">generateDailyReport</span>(<span class="hljs-params"/>): <span class="hljs-title">void</span>
    </span>{
        <span class="hljs-comment">// æ¨¡æ‹Ÿè€—æ—¶ä»»åŠ¡ï¼ˆå®é™…åœºæ™¯ï¼šæŸ¥è¯¢æ˜¨æ—¥æ•°æ®ã€ç”ŸæˆExcelã€æ¨é€é‚®ä»¶ç­‰ï¼‰</span>
        <span class="hljs-title function_ invoke__">sleep</span>(<span class="hljs-number">3</span>);
        <span class="hljs-comment">// æ­¤å¤„å¯æ·»åŠ æŠ¥è¡¨ç”Ÿæˆé€»è¾‘ï¼ˆå¦‚å†™å…¥ report è¡¨ã€å­˜å‚¨æ–‡ä»¶ç­‰ï¼‰</span>
    }

    <span class="hljs-comment">/**
     * ä»»åŠ¡2ï¼šæ•°æ®åŒæ­¥ï¼ˆç¤ºä¾‹å®ç°ï¼‰
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">syncData</span>(<span class="hljs-params"/>): <span class="hljs-title">void</span>
    </span>{
        <span class="hljs-comment">// æ¨¡æ‹Ÿæ•°æ®åŒæ­¥é€»è¾‘ï¼ˆå¦‚åŒæ­¥ç¬¬ä¸‰æ–¹æ•°æ®åˆ°æœ¬åœ°åº“ï¼‰</span>
        <span class="hljs-title function_ invoke__">sleep</span>(<span class="hljs-number">2</span>);
    }
}

</code></pre>
<h4 data-id="heading-17">3.4 å…³é”®è§£æ</h4>
<ul>
<li>
<p><strong>åŸå­é”è·å–</strong>ï¼š<code>set($lockKey, $lockValue, $lockExpire, ['NX'])</code> æ˜¯åŸå­æ“ä½œï¼Œé¿å…â€œæ£€æŸ¥é”æ˜¯å¦å­˜åœ¨â€å’Œâ€œè®¾ç½®é”â€ä¸¤æ­¥æ“ä½œä¹‹é—´å‡ºç°å¹¶å‘é—®é¢˜ã€‚</p>
</li>
<li>
<p><strong>é”è¿‡æœŸä¿æŠ¤</strong>ï¼šè®¾ç½® 5 åˆ†é’Ÿè¿‡æœŸæ—¶é—´ï¼Œå³ä½¿æ‰§è¡Œä»»åŠ¡çš„èŠ‚ç‚¹æ„å¤–æŒ‚æ‰ï¼Œé”ä¹Ÿä¼šè‡ªåŠ¨è¿‡æœŸé‡Šæ”¾ï¼Œé¿å…æ­»é”ã€‚</p>
</li>
<li>
<p><strong>å®‰å…¨é‡Šæ”¾é”</strong>ï¼šé€šè¿‡ Lua è„šæœ¬æ ¡éªŒé”å€¼åå†åˆ é™¤ï¼Œç¡®ä¿ä»…é‡Šæ”¾å½“å‰èŠ‚ç‚¹æŒæœ‰çš„é”ï¼Œé¿å…å› ä»»åŠ¡æ‰§è¡Œè¶…æ—¶å¯¼è‡´é”è¢«å…¶ä»–èŠ‚ç‚¹è¯¯åˆ ã€‚</p>
</li>
<li>
<p><strong>ä»»åŠ¡è°ƒåº¦é…ç½®</strong>ï¼šå¯ç»“åˆ ThinkPHP å®šæ—¶ä»»åŠ¡ï¼ˆthink-cronï¼‰ï¼Œåœ¨å¤šå°æœåŠ¡å™¨éƒ¨ç½²ç›¸åŒå®šæ—¶ä»»åŠ¡ï¼Œé€šè¿‡åˆ†å¸ƒå¼é”å®ç°â€œå•ç‚¹æ‰§è¡Œâ€ã€‚</p>
</li>
</ul>
<h3 data-id="heading-18">åœºæ™¯4ï¼šç¼“å­˜æ›´æ–°ï¼ˆé˜²æ­¢ç¼“å­˜å‡»ç©¿/é›ªå´©ï¼‰</h3>
<h4 data-id="heading-19">4.1 åœºæ™¯è¯´æ˜</h4>
<ul>
<li>
<p><strong>ç¼“å­˜å‡»ç©¿</strong>ï¼šä¸€ä¸ªçƒ­ç‚¹ Key è¿‡æœŸæ—¶ï¼Œå¤§é‡è¯·æ±‚åŒæ—¶ç©¿é€åˆ°æ•°æ®åº“ï¼Œå¯¼è‡´æ•°æ®åº“ç¬é—´å‹åŠ›å‰§å¢ã€‚</p>
</li>
<li>
<p><strong>ç¼“å­˜é›ªå´©</strong>ï¼šå¤§é‡ Key åŒæ—¶è¿‡æœŸï¼Œæˆ–ç¼“å­˜æœåŠ¡å®•æœºï¼Œå¯¼è‡´æ‰€æœ‰è¯·æ±‚ç›´æ¥æ‰“åˆ°æ•°æ®åº“ï¼Œå¯èƒ½å¼•å‘æ•°æ®åº“å´©æºƒã€‚</p>
</li>
</ul>
<p>æ ¸å¿ƒéœ€æ±‚ï¼šä¿æŠ¤æ•°æ®åº“ï¼Œé¿å…ç¼“å­˜å¤±æ•ˆæ—¶çš„æµé‡å†²å‡»ã€‚</p>
<h4 data-id="heading-20">4.2 æ–¹æ¡ˆé€‰å‹ï¼šRedis äº’æ–¥é”ï¼ˆé˜²å‡»ç©¿ï¼‰+ ç¼“å­˜ç©ºå€¼ï¼ˆé˜²ç©¿é€ï¼‰+ è¿‡æœŸæ—¶é—´éšæœºåŒ–ï¼ˆé˜²é›ªå´©ï¼‰</h4>
<p>é€šè¿‡äº’æ–¥é”ç¡®ä¿åªæœ‰ä¸€ä¸ªè¯·æ±‚å»æ•°æ®åº“æŸ¥è¯¢çƒ­ç‚¹æ•°æ®å¹¶æ›´æ–°ç¼“å­˜ï¼Œå…¶ä»–è¯·æ±‚ç­‰å¾…æˆ–é‡è¯•ï¼›å¯¹ä¸å­˜åœ¨çš„ Key ç¼“å­˜ç©ºå€¼ï¼Œé˜²æ­¢ç¼“å­˜ç©¿é€ï¼›ç»™ Key è®¾ç½®éšæœºè¿‡æœŸæ—¶é—´ï¼Œé¿å…å¤§é‡ Key åŒæ—¶è¿‡æœŸã€‚</p>
<h4 data-id="heading-21">4.3 å®ç°ä»£ç </h4>
<pre><code class="hljs language-php" lang="php">
<span class="hljs-meta">&lt;?php</span>
<span class="hljs-keyword">namespace</span> <span class="hljs-title class_">app</span>\<span class="hljs-title class_">controller</span>;

<span class="hljs-keyword">use</span> <span class="hljs-title">think</span>\<span class="hljs-title">facade</span>\<span class="hljs-title">Cache</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">think</span>\<span class="hljs-title">facade</span>\<span class="hljs-title">Db</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">think</span>\<span class="hljs-title">response</span>\<span class="hljs-title">Json</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CacheController</span>
</span>{
    <span class="hljs-comment">/**
     * è·å–å•†å“è¯¦æƒ…ï¼ˆå¸¦ç¼“å­˜é˜²å‡»ç©¿/é›ªå´©/ç©¿é€ï¼‰
     * <span class="hljs-doctag">@param</span> int $productId å•†å“ID
     * <span class="hljs-doctag">@return</span> Json
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getProductDetail</span>(<span class="hljs-params"><span class="hljs-keyword">int</span> <span class="hljs-variable">$productId</span></span>): <span class="hljs-title">Json</span>
    </span>{
        <span class="hljs-comment">// 1. ç¼“å­˜ Key å®šä¹‰ï¼ˆæŒ‰ä¸šåŠ¡ç±»å‹+ID å‘½åï¼‰</span>
        <span class="hljs-variable">$cacheKey</span> = <span class="hljs-string">"product:detail:<span class="hljs-subst">{$productId}</span>"</span>;
        <span class="hljs-comment">// é” Keyï¼ˆæŒ‰ç¼“å­˜ Key è¡ç”Ÿï¼Œç¡®ä¿ä¸€ä¸€å¯¹åº”ï¼‰</span>
        <span class="hljs-variable">$lockKey</span> = <span class="hljs-string">"lock:cache:<span class="hljs-subst">{$productId}</span>"</span>;
        <span class="hljs-variable">$lockExpire</span> = <span class="hljs-number">10</span>; <span class="hljs-comment">// é”è¿‡æœŸæ—¶é—´ï¼ˆ10ç§’ï¼‰</span>
        <span class="hljs-variable">$cacheExpire</span> = <span class="hljs-number">3600</span> + <span class="hljs-title function_ invoke__">mt_rand</span>(<span class="hljs-number">0</span>, <span class="hljs-number">600</span>); <span class="hljs-comment">// ç¼“å­˜è¿‡æœŸæ—¶é—´ï¼ˆ1å°æ—¶+éšæœº0-10åˆ†é’Ÿï¼Œé˜²é›ªå´©ï¼‰</span>

        <span class="hljs-comment">// 2. ä¼˜å…ˆä»ç¼“å­˜è·å–æ•°æ®</span>
        <span class="hljs-variable">$productDetail</span> = <span class="hljs-title class_">Cache</span>::<span class="hljs-title function_ invoke__">get</span>(<span class="hljs-variable">$cacheKey</span>);
        <span class="hljs-keyword">if</span> (<span class="hljs-variable">$productDetail</span> !== <span class="hljs-literal">false</span>) {
            <span class="hljs-comment">// ç¼“å­˜å‘½ä¸­ï¼šè‹¥ä¸ºç¼“å­˜çš„ç©ºå€¼ï¼Œè¿”å›â€œå•†å“ä¸å­˜åœ¨â€</span>
            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">empty</span>(<span class="hljs-variable">$productDetail</span>)) {
                <span class="hljs-keyword">return</span> <span class="hljs-title function_ invoke__">json</span>([<span class="hljs-string">'code'</span> =&gt; <span class="hljs-number">1</span>, <span class="hljs-string">'msg'</span> =&gt; <span class="hljs-string">'å•†å“ä¸å­˜åœ¨'</span>, <span class="hljs-string">'data'</span> =&gt; []]);
            }
            <span class="hljs-keyword">return</span> <span class="hljs-title function_ invoke__">json</span>([<span class="hljs-string">'code'</span> =&gt; <span class="hljs-number">0</span>, <span class="hljs-string">'msg'</span> =&gt; <span class="hljs-string">'success'</span>, <span class="hljs-string">'data'</span> =&gt; <span class="hljs-variable">$productDetail</span>]);
        }

        <span class="hljs-comment">// 3. ç¼“å­˜æœªå‘½ä¸­ï¼Œå°è¯•è·å–äº’æ–¥é”</span>
        <span class="hljs-variable">$isLocked</span> = <span class="hljs-title class_">Cache</span>::<span class="hljs-title function_ invoke__">store</span>(<span class="hljs-string">'redis'</span>)-&gt;<span class="hljs-title function_ invoke__">set</span>(<span class="hljs-variable">$lockKey</span>, <span class="hljs-number">1</span>, <span class="hljs-variable">$lockExpire</span>, [<span class="hljs-string">'NX'</span>]);
        <span class="hljs-keyword">if</span> (!<span class="hljs-variable">$isLocked</span>) {
            <span class="hljs-comment">// æœªè·å–åˆ°é”ï¼šè¿”å›â€œç³»ç»Ÿç¹å¿™â€ï¼Œå‰ç«¯å¯é‡è¯•</span>
            <span class="hljs-keyword">return</span> <span class="hljs-title function_ invoke__">json</span>([<span class="hljs-string">'code'</span> =&gt; <span class="hljs-number">2</span>, <span class="hljs-string">'msg'</span> =&gt; <span class="hljs-string">'ç³»ç»Ÿç¹å¿™ï¼Œè¯·ç¨åå†è¯•'</span>, <span class="hljs-string">'data'</span> =&gt; []]);
        }

        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// 4. è·å–é”æˆåŠŸï¼Œä»æ•°æ®åº“æŸ¥è¯¢æ•°æ®</span>
            <span class="hljs-variable">$productDetail</span> = <span class="hljs-title class_">Db</span>::<span class="hljs-title function_ invoke__">name</span>(<span class="hljs-string">'product'</span>)
                -&gt;<span class="hljs-title function_ invoke__">where</span>(<span class="hljs-string">'id'</span>, <span class="hljs-variable">$productId</span>)
                -&gt;<span class="hljs-title function_ invoke__">find</span>();

            <span class="hljs-comment">// 5. å¤„ç†æŸ¥è¯¢ç»“æœï¼šç¼“å­˜çœŸå®æ•°æ®æˆ–ç©ºå€¼ï¼ˆé˜²ç©¿é€ï¼‰</span>
            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">empty</span>(<span class="hljs-variable">$productDetail</span>)) {
                <span class="hljs-comment">// å•†å“ä¸å­˜åœ¨ï¼Œç¼“å­˜ç©ºå€¼ï¼ˆ1åˆ†é’Ÿè¿‡æœŸï¼Œé¿å…é•¿æœŸå ç”¨ç¼“å­˜ï¼‰</span>
                <span class="hljs-title class_">Cache</span>::<span class="hljs-title function_ invoke__">set</span>(<span class="hljs-variable">$cacheKey</span>, <span class="hljs-string">''</span>, <span class="hljs-number">60</span>);
                <span class="hljs-keyword">return</span> <span class="hljs-title function_ invoke__">json</span>([<span class="hljs-string">'code'</span> =&gt; <span class="hljs-number">1</span>, <span class="hljs-string">'msg'</span> =&gt; <span class="hljs-string">'å•†å“ä¸å­˜åœ¨'</span>, <span class="hljs-string">'data'</span> =&gt; []]);
            }

            <span class="hljs-comment">// å•†å“å­˜åœ¨ï¼Œç¼“å­˜çœŸå®æ•°æ®ï¼ˆå¸¦éšæœºè¿‡æœŸæ—¶é—´ï¼Œé˜²é›ªå´©ï¼‰</span>
            <span class="hljs-title class_">Cache</span>::<span class="hljs-title function_ invoke__">set</span>(<span class="hljs-variable">$cacheKey</span>, <span class="hljs-variable">$productDetail</span>, <span class="hljs-variable">$cacheExpire</span>);

            <span class="hljs-keyword">return</span> <span class="hljs-title function_ invoke__">json</span>([<span class="hljs-string">'code'</span> =&gt; <span class="hljs-number">0</span>, <span class="hljs-string">'msg'</span> =&gt; <span class="hljs-string">'success'</span>, <span class="hljs-string">'data'</span> =&gt; <span class="hljs-variable">$productDetail</span>]);
        } <span class="hljs-keyword">catch</span> (\<span class="hljs-built_in">Exception</span> <span class="hljs-variable">$e</span>) {
            <span class="hljs-keyword">return</span> <span class="hljs-title function_ invoke__">json</span>([<span class="hljs-string">'code'</span> =&gt; <span class="hljs-number">1</span>, <span class="hljs-string">'msg'</span> =&gt; <span class="hljs-variable">$e</span>-&gt;<span class="hljs-title function_ invoke__">getMessage</span>(), <span class="hljs-string">'data'</span> =&gt; []]);
        } <span class="hljs-keyword">finally</span> {
            <span class="hljs-comment">// 6. é‡Šæ”¾é”ï¼ˆæ— è®ºæˆåŠŸå¤±è´¥ï¼Œéƒ½è¦é‡Šæ”¾ï¼‰</span>
            <span class="hljs-title class_">Cache</span>::<span class="hljs-title function_ invoke__">store</span>(<span class="hljs-string">'redis'</span>)-&gt;<span class="hljs-title function_ invoke__">delete</span>(<span class="hljs-variable">$lockKey</span>);
        }
    }
}

</code></pre>
<h4 data-id="heading-22">4.4 å…³é”®è§£æ</h4>
<ul>
<li>
<p><strong>é˜²å‡»ç©¿</strong>ï¼šäº’æ–¥é”ç¡®ä¿åªæœ‰ä¸€ä¸ªè¯·æ±‚å»æ•°æ®åº“æŸ¥è¯¢çƒ­ç‚¹æ•°æ®ï¼Œå…¶ä»–è¯·æ±‚å› è·å–ä¸åˆ°é”è€Œè¿”å›é‡è¯•æç¤ºï¼Œé¿å…å¤§é‡è¯·æ±‚åŒæ—¶ç©¿é€åˆ°æ•°æ®åº“ã€‚</p>
</li>
<li>
<p><strong>é˜²ç©¿é€</strong>ï¼šå¯¹ä¸å­˜åœ¨çš„å•†å“ï¼ˆæ•°æ®åº“æ— è®°å½•ï¼‰ï¼Œç¼“å­˜ç©ºå€¼ï¼ˆ1åˆ†é’Ÿè¿‡æœŸï¼‰ï¼Œé¿å…æ¶æ„è¯·æ±‚ï¼ˆå¦‚éå†å•†å“IDï¼‰åå¤ç©¿é€åˆ°æ•°æ®åº“ã€‚</p>
</li>
<li>
<p><strong>é˜²é›ªå´©</strong>ï¼šç¼“å­˜è¿‡æœŸæ—¶é—´è®¾ç½®ä¸ºâ€œ1å°æ—¶+éšæœº0-10åˆ†é’Ÿâ€ï¼Œä½¿å¤§é‡çƒ­ç‚¹ Key çš„è¿‡æœŸæ—¶é—´åˆ†æ•£ï¼Œé¿å…åŒæ—¶è¿‡æœŸå¯¼è‡´ç¼“å­˜é›ªå´©ã€‚</p>
</li>
<li>
<p><strong>é™çº§ç­–ç•¥</strong>ï¼šæœªè·å–åˆ°é”æ—¶è¿”å›â€œç³»ç»Ÿç¹å¿™â€ï¼Œå¼•å¯¼ç”¨æˆ·é‡è¯•ï¼Œé¿å…ç³»ç»Ÿè¿‡è½½ã€‚</p>
</li>
</ul>
<h2 data-id="heading-23">ä¸‰ã€æ€»ç»“ï¼šåœºæ™¯-æ–¹æ¡ˆå¯¹åº”è¡¨</h2>



































<table><thead><tr><th>å¹¶å‘åœºæ™¯</th><th>æ¨èæ–¹æ¡ˆ</th><th>æ ¸å¿ƒæŠ€æœ¯</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>åº“å­˜æ‰£å‡ï¼ˆé˜²è¶…å–ï¼‰</td><td>MySQL æ‚²è§‚é”+äº‹åŠ¡</td><td>è¡Œçº§æ’ä»–é”ã€æ•°æ®åº“äº‹åŠ¡</td><td>åº“å­˜ä¸€è‡´æ€§è¦æ±‚é«˜ã€å¹¶å‘é‡ä¸­ç­‰</td></tr><tr><td>è®¢å•åˆ›å»ºï¼ˆé˜²é‡å¤æäº¤ï¼‰</td><td>Token ä»¤ç‰ŒéªŒè¯</td><td>ä¸€æ¬¡æ€§ Tokenã€Session/Redis å­˜å‚¨</td><td>è¡¨å•æäº¤ã€API æ¥å£é˜²é‡æ”¾</td></tr><tr><td>åˆ†å¸ƒå¼ä»»åŠ¡è°ƒåº¦ï¼ˆé˜²é‡å¤æ‰§è¡Œï¼‰</td><td>Redis åˆ†å¸ƒå¼é”</td><td>SET NX åŸå­å‘½ä»¤ã€Lua è„šæœ¬é‡Šæ”¾é”</td><td>å¤šæœåŠ¡å™¨éƒ¨ç½²å®šæ—¶ä»»åŠ¡ã€è·¨æœåŠ¡æ•°æ®åŒæ­¥</td></tr><tr><td>ç¼“å­˜æ›´æ–°ï¼ˆé˜²å‡»ç©¿/é›ªå´©ï¼‰</td><td>Redis äº’æ–¥é”+ç¼“å­˜ç©ºå€¼+éšæœºè¿‡æœŸ</td><td>åˆ†å¸ƒå¼é”ã€ç¼“å­˜ç©ºå€¼ã€éšæœºè¿‡æœŸæ—¶é—´</td><td>çƒ­ç‚¹æ•°æ®æŸ¥è¯¢ã€é«˜å¹¶å‘ç¼“å­˜è®¿é—®åœºæ™¯</td></tr></tbody></table>
<h2 data-id="heading-24">å››ã€æ‰©å±•è¯´æ˜</h2>
<ol>
<li>
<p>æ‰€æœ‰ç¤ºä¾‹ä»£ç å‡åŸºäº ThinkPHP8 å¼€å‘ï¼Œéœ€ç¡®ä¿é¡¹ç›®å·²æ­£ç¡®é…ç½®æ•°æ®åº“ã€Redisï¼ˆæ¶‰åŠ Redis çš„åœºæ™¯ï¼‰ã€‚</p>
</li>
<li>
<p>é«˜å¹¶å‘åœºæ™¯ä¸‹ï¼ˆå¦‚ç§’æ€ï¼‰ï¼Œå»ºè®®ç»“åˆæ¶ˆæ¯é˜Ÿåˆ—ï¼ˆå¦‚ RabbitMQã€RocketMQï¼‰è¿›ä¸€æ­¥å‰Šå³°å¡«è°·ï¼Œæå‡ç³»ç»Ÿç¨³å®šæ€§ã€‚</p>
</li>
<li>
<p>åˆ†å¸ƒå¼é”é™¤ Redis å¤–ï¼Œè¿˜å¯ä½¿ç”¨ ZooKeeper å®ç°ï¼ˆå¯é æ€§æ›´é«˜ï¼Œä½†æ€§èƒ½ç•¥ä½ï¼‰ï¼Œæ ¹æ®ä¸šåŠ¡éœ€æ±‚é€‰æ‹©ã€‚</p>
</li>
<li>
<p>å®é™…å¼€å‘ä¸­éœ€ç»“åˆæ—¥å¿—è®°å½•ã€ç›‘æ§å‘Šè­¦ï¼ˆå¦‚é”ç«äº‰æƒ…å†µã€ç¼“å­˜å‘½ä¸­ç‡ï¼‰ï¼Œä¾¿äºé—®é¢˜æ’æŸ¥å’Œç³»ç»Ÿä¼˜åŒ–ã€‚</p>
</li>
</ol>
<h3 data-id="heading-25">ğŸµ å†™åœ¨æœ€å</h3>
<p>æˆ‘æ˜¯ ç½‘ç»œä¹ä¸ï¼Œçƒ­çˆ±ä»£ç ï¼Œç›®å‰ä¸“æ³¨äº Web å…¨æ ˆé¢†åŸŸã€‚</p>
<p>æ¬¢è¿å…³æ³¨æˆ‘çš„å¾®ä¿¡å…¬ä¼—å·ã€Œä¹ä¸çš„é¡¹ç›®ã€ï¼Œæˆ‘ä¼šä¸å®šæœŸåˆ†äº«ä¸€äº›å¼€å‘å¿ƒå¾—ã€æœ€ä½³å®è·µä»¥åŠæŠ€æœ¯æ¢ç´¢ç­‰å†…å®¹ï¼Œå¸Œæœ›èƒ½å¤Ÿå¸®åˆ°ä½ ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€æœºå™¨å­¦ä¹ ã€‘Kaggleæ¡ˆä¾‹ä¹‹Rossmannè¿é”è¯åº—é”€å”®é¢é¢„æµ‹ï¼šæ—¶é—´åºåˆ—ä¸æœºå™¨å­¦ä¹ å®Œç¾èåˆçš„å®æˆ˜æŒ‡å—]]></title>    <link>https://juejin.cn/post/7589220406320644132</link>    <guid>https://juejin.cn/post/7589220406320644132</guid>    <pubDate>2025-12-30T07:50:51.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589220406320644132" data-draft-id="7589214068094091283" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€æœºå™¨å­¦ä¹ ã€‘Kaggleæ¡ˆä¾‹ä¹‹Rossmannè¿é”è¯åº—é”€å”®é¢é¢„æµ‹ï¼šæ—¶é—´åºåˆ—ä¸æœºå™¨å­¦ä¹ å®Œç¾èåˆçš„å®æˆ˜æŒ‡å—"/> <meta itemprop="keywords" content="æœºå™¨å­¦ä¹ ,Kaggle,æ•°æ®æŒ–æ˜"/> <meta itemprop="datePublished" content="2025-12-30T07:50:51.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="äº‘å¤©å¾½ä¸Š"/> <meta itemprop="url" content="https://juejin.cn/user/152212479153916"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€æœºå™¨å­¦ä¹ ã€‘Kaggleæ¡ˆä¾‹ä¹‹Rossmannè¿é”è¯åº—é”€å”®é¢é¢„æµ‹ï¼šæ—¶é—´åºåˆ—ä¸æœºå™¨å­¦ä¹ å®Œç¾èåˆçš„å®æˆ˜æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/152212479153916/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    äº‘å¤©å¾½ä¸Š
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-30T07:50:51.000Z" title="Tue Dec 30 2025 07:50:51 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»29åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>ğŸ§‘ åšä¸»ç®€ä»‹ï¼šæ›¾ä»»æŸæ™ºæ…§åŸå¸‚ç±»ä¼ä¸šç®—æ³•æ€»ç›‘ï¼ŒCSDN / ç¨€åœŸæ˜é‡‘ ç­‰å¹³å°äººå·¥æ™ºèƒ½é¢†åŸŸä¼˜è´¨åˆ›ä½œè€…ã€‚</p>
</blockquote>
<blockquote>
<p>ç›®å‰åœ¨ç¾å›½å¸‚åœºçš„ç‰©æµå…¬å¸ä»äº‹é«˜çº§ç®—æ³•å·¥ç¨‹å¸ˆä¸€èŒï¼Œæ·±è€•äººå·¥æ™ºèƒ½é¢†åŸŸï¼Œç²¾é€špythonæ•°æ®æŒ–æ˜ã€å¯è§†åŒ–ã€æœºå™¨å­¦ä¹ ç­‰ï¼Œå‘è¡¨è¿‡AIç›¸å…³çš„ä¸“åˆ©å¹¶å¤šæ¬¡åœ¨AIç±»æ¯”èµ›ä¸­è·å¥–ã€‚</p>
</blockquote>
<hr/>
<p>å¾·å›½æœ€å¤§è¿é”è¯åº—Rossmannçš„é”€å”®é¢„æµ‹æŒ‘æˆ˜ï¼Œä¸ä»…è€ƒéªŒæˆ‘ä»¬çš„æœºå™¨å­¦ä¹ æŠ€èƒ½ï¼Œæ›´æ˜¯ä¸€åœºæ—¶é—´åºåˆ—åˆ†æçš„ç››å®´ã€‚å½“1115å®¶é—¨åº—çš„æœªæ¥6å‘¨é”€å”®é¢„æµ‹æ‘†åœ¨é¢å‰ï¼Œæˆ‘ä»¬è¯¥å¦‚ä½•ä»å†å²æ•°æ®ä¸­æŒ–æ˜å‡ºé”€å”®è§„å¾‹ï¼Ÿ</p>
<h2 data-id="heading-0">ä¸€ã€é¡¹ç›®è¯´æ˜</h2>
<h3 data-id="heading-1">1.1 é¡¹ç›®æè¿°</h3>
<p>ç½—æ–¯æ›¼ï¼ˆRossmannï¼‰æ˜¯æ¬§æ´²é¢†å…ˆçš„è¿é”è¯åº—å“ç‰Œï¼Œåœ¨7ä¸ªæ¬§æ´²å›½å®¶ç»è¥ç€<strong>3000å¤šå®¶è¯åº—</strong>ï¼Œ<strong>Rossmann Store Sales</strong>ç«èµ›çš„æ ¸å¿ƒç›®æ ‡ï¼šåŸºäº<strong>844,392æ¡</strong>å†å²é”€å”®è®°å½•ï¼Œé¢„æµ‹å¾·å›½1115å®¶Rossmannè¯åº—æœªæ¥6å‘¨çš„æ¯æ—¥é”€å”®é¢ï¼Œå¸®åŠ©é—¨åº—ç»ç†åˆ¶å®šæœ‰æ•ˆçš„å‘˜å·¥æ’ç­è®¡åˆ’ã€‚é—¨åº—ç»ç†éœ€è¦æå‰å…­å‘¨é¢„æµ‹æ¯æ—¥é”€å”®é¢ï¼Œä½†é”€å”®å—å¤šç§å› ç´ å½±å“ï¼š</p>
<ul>
<li><strong>ä¿ƒé”€æ´»åŠ¨</strong>ï¼šçŸ­æœŸä¿ƒé”€å’Œé•¿æœŸä¿ƒé”€æ´»åŠ¨</li>
<li><strong>ç«äº‰å¯¹æ‰‹</strong>ï¼šæœ€è¿‘çš„ç«äº‰å¯¹æ‰‹è·ç¦»å’Œå¼€ä¸šæ—¶é—´</li>
<li><strong>èŠ‚å‡æ—¥</strong>ï¼šå›½å®¶å‡æ—¥ã€å­¦æ ¡å‡æœŸ</li>
<li><strong>å­£èŠ‚æ€§</strong>ï¼šä¸åŒå­£èŠ‚å’Œæœˆä»½çš„é”€å”®æ³¢åŠ¨</li>
<li><strong>åœ°åŒºå·®å¼‚</strong>ï¼šä¸åŒé—¨åº—ä½ç½®çš„ç‰¹ç‚¹</li>
</ul>
<p><strong>æ ¸å¿ƒæŒ‘æˆ˜</strong>ï¼š</p>
<ul>
<li>æ¯å®¶é—¨åº—éƒ½æœ‰ç‹¬ç‰¹çš„æƒ…å†µå’Œç‰¹ç‚¹</li>
<li>æˆåƒä¸Šä¸‡çš„é—¨åº—ç»ç†é¢„æµ‹å‡†ç¡®æ€§å·®å¼‚å¾ˆå¤§</li>
<li>éœ€è¦åŒæ—¶å¤„ç†æ—¶é—´åºåˆ—ç‰¹æ€§å’Œé—¨åº—ç‰¹å¾</li>
</ul>
<h3 data-id="heading-2">1.2 è¯„ä¼°æŒ‡æ ‡</h3>
<p><strong>å‡æ–¹æ ¹ç™¾åˆ†æ¯”è¯¯å·®ï¼ˆRMSPEï¼‰</strong> ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4b1e63b77de54978840951ed8f01fc88~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LqR5aSp5b695LiK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767685850&amp;x-signature=Q8drsKZL%2Bzpa7pRzgTl6dA1T3L0%3D" alt="" loading="lazy"/></p>
<p><strong>é‡è¦æ³¨æ„äº‹é¡¹</strong>ï¼š</p>
<ul>
<li>åªå¯¹é”€å”®é¢ &gt; 0 çš„æ ·æœ¬è¿›è¡Œè¯„åˆ†</li>
<li>å½“é”€å”®é¢ = 0 æ—¶ï¼Œä¸çº³å…¥RMSPEè®¡ç®—</li>
<li>è¿™ç§è®¾è®¡é¿å…äº†é›¶é”€å”®é¢æ ·æœ¬å¯¹ç™¾åˆ†æ¯”è¯¯å·®è®¡ç®—çš„å¹²æ‰°</li>
</ul>
<h3 data-id="heading-3">1.3 æ•°æ®æ–‡ä»¶</h3>
<ul>
<li><strong>train.csv</strong>ï¼šå†å²é”€å”®æ•°æ®ï¼ˆåŒ…å«é”€å”®é¢ï¼‰</li>
<li><strong>test.csv</strong>ï¼šå¾…é¢„æµ‹æ•°æ®ï¼ˆä¸åŒ…å«é”€å”®é¢ï¼‰</li>
<li><strong>store.csv</strong>ï¼šé—¨åº—è¡¥å……ä¿¡æ¯</li>
<li><strong>sample_submission.csv</strong>ï¼šæäº¤æ ¼å¼ç¤ºä¾‹</li>
</ul>
<p><strong>æ•°æ®å¤„ç†ç­–ç•¥</strong>ï¼šç”±äºæ¯”èµ›å·²ç»“æŸï¼Œæˆ‘ä»¬ä»è®­ç»ƒé›†ä¸­æ‹†åˆ†å‡ºæ¯å®¶é—¨åº—çš„æœ€å48å¤©æ•°æ®ä½œä¸ºéªŒè¯é›†ï¼Œæ¨¡æ‹ŸçœŸå®æµ‹è¯•åœºæ™¯ã€‚</p>
<h3 data-id="heading-4">1.4 æ•°æ®è¯´æ˜</h3>
<h4 data-id="heading-5">1.4.1 store.csv</h4>
<ul>
<li>'Store'ï¼šå„å•†åº—çš„å”¯ä¸€Idã€‚å…±1115ä¸ªã€‚</li>
<li>'StoreType'ï¼šåŒºåˆ†4ç§ä¸åŒçš„å•†åº—æ¨¡å¼:a, b, c, dã€‚å…¶ä¸­a(54%),d(31%),å…¶ä»–(15%)</li>
<li>'Assortment'ï¼šæè¿°åˆ†ç±»çº§åˆ«:a = basic, b = extra, c = extended</li>
<li>'CompetitionDistance'ï¼šåˆ°æœ€è¿‘çš„ç«äº‰å¯¹æ‰‹å•†åº—çš„è·ç¦»(ä»¥ç±³ä¸ºå•ä½)</li>
<li>'CompetitionOpenSinceMonth'ï¼šæœ€è¿‘çš„ç«äº‰å¯¹æ‰‹å•†åº—çš„ï¼ˆå¤§æ¦‚ï¼‰å¼€åº—æœˆä»½</li>
<li>'CompetitionOpenSinceYear'ï¼šæœ€è¿‘çš„ç«äº‰å¯¹æ‰‹å•†åº—çš„ï¼ˆå¤§æ¦‚ï¼‰å¼€åº—å¹´ä»½</li>
<li>'Promo2'ï¼šä¸€äº›å•†åº—æŒç»­ä¸æ–­çš„ä¿ƒé”€æ´»åŠ¨ï¼ˆ0=å•†åº—æ²¡æœ‰å‚åŠ ï¼›1=å•†åº—å‚åŠ ï¼‰ã€‚æ•°æ®é‡ä¸€åŠä¸€åŠ</li>
<li>'Promo2SinceWeek'ï¼šè¯¥åº—å¼€å§‹å‚ä¸ä¿ƒé”€æ´»åŠ¨çš„æ—¥å†å‘¨</li>
<li>'Promo2SinceYear'ï¼šè¯¥åº—å¼€å§‹å‚ä¸ä¿ƒé”€æ´»åŠ¨çš„å¹´ä»½</li>
<li>'PromoInterval'ï¼šè¿ç»­æ—¶é—´é—´éš”çš„ä¿ƒé”€æ´»åŠ¨promo2ï¼Œæ´»åŠ¨é‡æ–°å¯åŠ¨çš„æœˆä»½ã€‚å¦‚ã€‚â€œ2æœˆã€5æœˆã€8æœˆã€11æœˆâ€æ˜¯æŒ‡æ¯è½®æ´»åŠ¨å¼€å§‹äºæ¯å¹´çš„2æœˆã€5æœˆã€8æœˆã€11æœˆ</li>
</ul>
<h4 data-id="heading-6">1.4.2 train.csv</h4>
<ul>
<li>Storeï¼šæ¯ä¸ªå•†åº—çš„å”¯ä¸€Id</li>
<li>DayOfWeekï¼šä¸€å‘¨çš„å‘¨å‡ </li>
<li>Dateï¼šæ—¥æœŸ</li>
<li>Salesï¼šå½“å¤©è¥ä¸šé¢ï¼ˆè¿™æ˜¯ä½ é¢„æµ‹çš„ï¼‰</li>
<li>Customersï¼šå½“å¤©å®¢æˆ·æ•°ï¼ˆtest.csvé‡Œæ²¡æœ‰ï¼‰</li>
<li>Openï¼šå•†åº—å½“å¤©æ˜¯å¦è¥ä¸šï¼ˆ0å¦ï¼›1æ˜¯ï¼‰</li>
<li>Promoï¼šå•†åº—å½“å¤©æ˜¯å¦æœ‰ä¿ƒé”€æ´»åŠ¨</li>
<li>StateHolidayï¼šæ˜¯å¦å›½å®¶å‡æ—¥ï¼ˆä¸€èˆ¬æƒ…å†µï¼Œé™¤å°‘æ•°ä¾‹å¤–ï¼Œæ‰€æœ‰å•†åº—åœ¨å›½å®šå‡æ—¥éƒ½å…³é—¨ï¼‰ã€‚ a =å…¬ä¼—å‡æœŸï¼Œb =å¤æ´»èŠ‚å‡æœŸï¼Œc =åœ£è¯èŠ‚ï¼Œ0 =æ— </li>
<li>SchoolHolidayï¼šï¼ˆStore,Dateï¼‰æ˜¯å¦å—å…¬ç«‹å­¦æ ¡åœè¯¾å½±å“</li>
</ul>
<h2 data-id="heading-7">äºŒã€ğŸ“Š å®Œæ•´å¯è¿è¡Œä»£ç å®ç°</h2>
<h3 data-id="heading-8">2.1 ç¯å¢ƒå‡†å¤‡ä¸æ•°æ®åŠ è½½</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment">#Â å¯¼å…¥æ‰€æœ‰å¿…è¦çš„åº“</span>
<span class="hljs-keyword">import</span>Â pandasÂ <span class="hljs-keyword">as</span>Â pd
<span class="hljs-keyword">import</span>Â numpyÂ <span class="hljs-keyword">as</span>Â np
<span class="hljs-keyword">import</span>Â matplotlib.pyplotÂ <span class="hljs-keyword">as</span>Â plt
<span class="hljs-keyword">import</span>Â seabornÂ <span class="hljs-keyword">as</span>Â sns
<span class="hljs-keyword">from</span>Â datetimeÂ <span class="hljs-keyword">import</span>Â datetime,Â timedelta
<span class="hljs-keyword">import</span>Â warnings
<span class="hljs-keyword">from</span>Â sklearn.metricsÂ <span class="hljs-keyword">import</span>Â mean_squared_error,Â mean_absolute_error,Â r2_score
<span class="hljs-keyword">from</span>Â sklearn.preprocessingÂ <span class="hljs-keyword">import</span>Â LabelEncoder
<span class="hljs-keyword">import</span>Â xgboostÂ <span class="hljs-keyword">as</span>Â xgb
<span class="hljs-keyword">import</span>Â lightgbmÂ <span class="hljs-keyword">as</span>Â lgb
<span class="hljs-keyword">from</span>Â sklearn.ensembleÂ <span class="hljs-keyword">import</span>Â RandomForestRegressor
<span class="hljs-keyword">from</span>Â sklearn.model_selectionÂ <span class="hljs-keyword">import</span>Â train_test_split,Â TimeSeriesSplit
<span class="hljs-keyword">import</span>Â gc

<span class="hljs-comment">#Â è®¾ç½®ä¸­æ–‡æ˜¾ç¤ºå’Œç¾åŒ–æ ·å¼</span>
plt.rcParams[<span class="hljs-string">'font.sans-serif'</span>]Â =Â [<span class="hljs-string">'SimHei'</span>,Â <span class="hljs-string">'DejaVuÂ Sans'</span>]
plt.rcParams[<span class="hljs-string">'axes.unicode_minus'</span>]Â =Â <span class="hljs-literal">False</span>
warnings.filterwarnings(<span class="hljs-string">'ignore'</span>)

<span class="hljs-comment">#Â è®¾ç½®Seabornæ ·å¼</span>
sns.set_style(<span class="hljs-string">"whitegrid"</span>)
sns.set_palette(<span class="hljs-string">"husl"</span>)
plt.style.use(<span class="hljs-string">'seaborn-v0_8-darkgrid'</span>)

<span class="hljs-comment">#Â å®šä¹‰RMSPEè®¡ç®—å‡½æ•°</span>
<span class="hljs-keyword">def</span>Â <span class="hljs-title function_">rmspe</span>(<span class="hljs-params">y_true,Â y_pred</span>):
Â Â Â Â <span class="hljs-string">"""
Â Â Â Â è®¡ç®—å‡æ–¹æ ¹ç™¾åˆ†æ¯”è¯¯å·®ï¼ˆRMSPEï¼‰
Â Â Â Â è¿™æ˜¯ç«èµ›çš„è¯„ä»·æŒ‡æ ‡
Â Â Â Â """</span>
Â Â Â Â maskÂ =Â y_trueÂ !=Â <span class="hljs-number">0</span>
Â Â Â Â <span class="hljs-keyword">return</span>Â np.sqrt(np.mean(np.square((y_true[mask]Â -Â y_pred[mask])Â /Â y_true[mask])))

<span class="hljs-keyword">def</span>Â <span class="hljs-title function_">rmspe_xgb</span>(<span class="hljs-params">preds,Â dtrain</span>):
Â Â Â Â <span class="hljs-string">"""
Â Â Â Â XGBoostè‡ªå®šä¹‰è¯„ä»·å‡½æ•°
Â Â Â Â """</span>
Â Â Â Â labelsÂ =Â dtrain.get_label()
Â Â Â Â maskÂ =Â labelsÂ !=Â <span class="hljs-number">0</span>
Â Â Â Â <span class="hljs-keyword">return</span>Â <span class="hljs-string">'RMSPE'</span>,Â <span class="hljs-built_in">float</span>(np.sqrt(np.mean(np.square((labels[mask]Â -Â preds[mask])Â /Â labels[mask]))))

<span class="hljs-built_in">print</span>(<span class="hljs-string">"ğŸš€Â å¼€å§‹åŠ è½½æ•°æ®..."</span>)
<span class="hljs-comment">#Â åŠ è½½æ•°æ®</span>
trainÂ =Â pd.read_csv(<span class="hljs-string">'../input/rossmann-store-sales/train.csv'</span>,Â low_memory=<span class="hljs-literal">False</span>)

storeÂ =Â pd.read_csv(<span class="hljs-string">'../input/rossmann-store-sales/store.csv'</span>,Â low_memory=<span class="hljs-literal">False</span>)


<span class="hljs-built_in">print</span>(<span class="hljs-string">"âœ…Â æ•°æ®åŠ è½½å®Œæˆï¼"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"è®­ç»ƒé›†å½¢çŠ¶:Â <span class="hljs-subst">{train.shape}</span>"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"é—¨åº—ä¿¡æ¯å½¢çŠ¶:Â <span class="hljs-subst">{store.shape}</span>"</span>)

<span class="hljs-comment">#Â æŸ¥çœ‹æ•°æ®ç»“æ„</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"\nğŸ“‹Â è®­ç»ƒé›†é¢„è§ˆ:"</span>)
<span class="hljs-built_in">print</span>(train.head())
<span class="hljs-built_in">print</span>(<span class="hljs-string">"\nğŸ“‹Â é—¨åº—ä¿¡æ¯é¢„è§ˆ:"</span>)
<span class="hljs-built_in">print</span>(store.head())
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0b9b79a26835427ca6ecec42f94eb857~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LqR5aSp5b695LiK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767685850&amp;x-signature=r1x1rtxloDcOZ8jSisd%2BQxsDUPk%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-9">2.2 æ¢ç´¢æ€§æ•°æ®åˆ†æï¼ˆEDAï¼‰</h3>
<h4 data-id="heading-10">2.2.1 æ•°æ®åˆå¹¶ä¸é¢„å¤„ç†</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span>Â <span class="hljs-title function_">preprocess_data</span>(<span class="hljs-params">train_data,Â store_data,Â test_data=<span class="hljs-literal">None</span>,Â is_train=<span class="hljs-literal">True</span></span>):
Â Â Â Â <span class="hljs-string">"""
Â Â Â Â æ•°æ®é¢„å¤„ç†å‡½æ•°
Â Â Â Â """</span>
Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"\nğŸ”§Â å¼€å§‹æ•°æ®é¢„å¤„ç†..."</span>)
Â Â Â Â 
Â Â Â Â <span class="hljs-comment">#Â åˆå¹¶é—¨åº—ä¿¡æ¯</span>
Â Â Â Â dfÂ =Â train_data.merge(store_data,Â on=<span class="hljs-string">"Store"</span>,Â how=<span class="hljs-string">"left"</span>)
Â Â Â Â 
Â Â Â Â <span class="hljs-keyword">if</span>Â <span class="hljs-keyword">not</span>Â is_train:
Â Â Â Â Â Â Â Â dfÂ =Â test_data.merge(store_data,Â on=<span class="hljs-string">"Store"</span>,Â how=<span class="hljs-string">"left"</span>)
Â Â Â Â 
Â Â Â Â <span class="hljs-comment">#Â è½¬æ¢æ—¥æœŸæ ¼å¼</span>
Â Â Â Â df[<span class="hljs-string">'Date'</span>]Â =Â pd.to_datetime(df[<span class="hljs-string">'Date'</span>],Â errors=<span class="hljs-string">'coerce'</span>)
Â Â Â Â 
Â Â Â Â <span class="hljs-comment">#Â å¤„ç†StateHolidayåˆ—çš„æ··åˆç±»å‹</span>
Â Â Â Â df[<span class="hljs-string">'StateHoliday'</span>]Â =Â df[<span class="hljs-string">'StateHoliday'</span>].astype(<span class="hljs-built_in">str</span>)
Â Â Â Â 
Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ•°æ®åˆå¹¶åå½¢çŠ¶:Â <span class="hljs-subst">{df.shape}</span>"</span>)
Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ—¥æœŸèŒƒå›´:Â <span class="hljs-subst">{df[<span class="hljs-string">'Date'</span>].<span class="hljs-built_in">min</span>()}</span>Â åˆ°Â <span class="hljs-subst">{df[<span class="hljs-string">'Date'</span>].<span class="hljs-built_in">max</span>()}</span>"</span>)
Â Â Â Â 
Â Â Â Â <span class="hljs-keyword">return</span>Â df

<span class="hljs-comment">#Â é¢„å¤„ç†è®­ç»ƒæ•°æ®</span>
train_dfÂ =Â preprocess_data(train,Â store)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"\nè®­ç»ƒæ•°æ®ç‰¹å¾:\n<span class="hljs-subst">{train_df.columns.tolist()}</span>"</span>)
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3a5efc414e7e4d888b3fbc75f15c4ecc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LqR5aSp5b695LiK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767685850&amp;x-signature=H4twnUoZMxkAJ2d3cDyEquy%2BIhE%3D" alt="" loading="lazy"/></p>
<h4 data-id="heading-11">2.2.2 ç›®æ ‡å˜é‡åˆ†å¸ƒåˆ†æ</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span>Â <span class="hljs-title function_">analyze_target_distribution</span>(<span class="hljs-params">train_df</span>):
Â Â Â Â <span class="hljs-string">"""
Â Â Â Â åˆ†æç›®æ ‡å˜é‡åˆ†å¸ƒ
Â Â Â Â """</span>
Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">"\nğŸ¯Â ç›®æ ‡å˜é‡åˆ†å¸ƒåˆ†æ"</span>)
Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">"="</span>Â *Â <span class="hljs-number">50</span>)
Â Â Â Â 
Â Â Â Â <span class="hljs-comment">#Â åŸºæœ¬ç»Ÿè®¡</span>
Â Â Â Â sales_statsÂ =Â train_df[<span class="hljs-string">'Sales'</span>].describe()
Â Â Â Â 
Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">"é”€å”®é¢ç»Ÿè®¡ä¿¡æ¯:"</span>)
Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"å‡å€¼:Â <span class="hljs-subst">{sales_stats[<span class="hljs-string">'mean'</span>]:<span class="hljs-number">.2</span>f}</span>"</span>)
Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ä¸­ä½æ•°:Â <span class="hljs-subst">{sales_stats[<span class="hljs-string">'50%'</span>]:<span class="hljs-number">.2</span>f}</span>"</span>)
Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ ‡å‡†å·®:Â <span class="hljs-subst">{sales_stats[<span class="hljs-string">'std'</span>]:<span class="hljs-number">.2</span>f}</span>"</span>)
Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æœ€å°å€¼:Â <span class="hljs-subst">{sales_stats[<span class="hljs-string">'min'</span>]:<span class="hljs-number">.2</span>f}</span>"</span>)
Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æœ€å¤§å€¼:Â <span class="hljs-subst">{sales_stats[<span class="hljs-string">'max'</span>]:<span class="hljs-number">.2</span>f}</span>"</span>)
Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"25%åˆ†ä½æ•°:Â <span class="hljs-subst">{sales_stats[<span class="hljs-string">'25%'</span>]:<span class="hljs-number">.2</span>f}</span>"</span>)
Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"75%åˆ†ä½æ•°:Â <span class="hljs-subst">{sales_stats[<span class="hljs-string">'75%'</span>]:<span class="hljs-number">.2</span>f}</span>"</span>)
Â Â Â Â 
Â Â Â Â <span class="hljs-comment">#Â å¯è§†åŒ–åˆ†å¸ƒ</span>
Â Â Â Â fig,Â axesÂ =Â plt.subplots(<span class="hljs-number">1</span>,Â <span class="hljs-number">2</span>,Â figsize=(<span class="hljs-number">14</span>,Â <span class="hljs-number">5</span>))
Â Â Â Â 
Â Â Â Â <span class="hljs-comment">#Â ç›´æ–¹å›¾</span>
Â Â Â Â axes[<span class="hljs-number">0</span>].hist(train_df[<span class="hljs-string">'Sales'</span>],Â bins=<span class="hljs-number">50</span>,Â color=<span class="hljs-string">'#3498db'</span>,Â alpha=<span class="hljs-number">0.7</span>,Â edgecolor=<span class="hljs-string">'black'</span>)
Â Â Â Â axes[<span class="hljs-number">0</span>].axvline(x=sales_stats[<span class="hljs-string">'mean'</span>],Â color=<span class="hljs-string">'red'</span>,Â linestyle=<span class="hljs-string">'--'</span>,Â 
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â label=<span class="hljs-string">f'å‡å€¼:Â <span class="hljs-subst">{sales_stats[<span class="hljs-string">"mean"</span>]:<span class="hljs-number">.0</span>f}</span>'</span>)
Â Â Â Â axes[<span class="hljs-number">0</span>].axvline(x=sales_stats[<span class="hljs-string">'50%'</span>],Â color=<span class="hljs-string">'green'</span>,Â linestyle=<span class="hljs-string">'--'</span>,Â 
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â label=<span class="hljs-string">f'ä¸­ä½æ•°:Â <span class="hljs-subst">{sales_stats[<span class="hljs-string">"50%"</span>]:<span class="hljs-number">.0</span>f}</span>'</span>)
Â Â Â Â axes[<span class="hljs-number">0</span>].set_title(<span class="hljs-string">'é”€å”®é¢åˆ†å¸ƒç›´æ–¹å›¾'</span>,Â fontsize=<span class="hljs-number">14</span>,Â fontweight=<span class="hljs-string">'bold'</span>)
Â Â Â Â axes[<span class="hljs-number">0</span>].set_xlabel(<span class="hljs-string">'é”€å”®é¢'</span>,Â fontsize=<span class="hljs-number">12</span>)
Â Â Â Â axes[<span class="hljs-number">0</span>].set_ylabel(<span class="hljs-string">'é¢‘æ•°'</span>,Â fontsize=<span class="hljs-number">12</span>)
Â Â Â Â axes[<span class="hljs-number">0</span>].legend(fontsize=<span class="hljs-number">10</span>)
Â Â Â Â axes[<span class="hljs-number">0</span>].grid(<span class="hljs-literal">True</span>,Â alpha=<span class="hljs-number">0.3</span>)
Â Â Â Â 
Â Â Â Â <span class="hljs-comment">#Â ç®±çº¿å›¾</span>
Â Â Â Â boxÂ =Â axes[<span class="hljs-number">1</span>].boxplot(train_df[<span class="hljs-string">'Sales'</span>],Â patch_artist=<span class="hljs-literal">True</span>,Â vert=<span class="hljs-literal">False</span>)
Â Â Â Â box[<span class="hljs-string">'boxes'</span>][<span class="hljs-number">0</span>].set_facecolor(<span class="hljs-string">'#e74c3c'</span>)
Â Â Â Â box[<span class="hljs-string">'boxes'</span>][<span class="hljs-number">0</span>].set_alpha(<span class="hljs-number">0.7</span>)
Â Â Â Â 
Â Â Â Â <span class="hljs-comment">#Â æ·»åŠ ç»Ÿè®¡ä¿¡æ¯</span>
Â Â Â Â stats_textÂ =Â (<span class="hljs-string">f"æ ·æœ¬æ•°:Â <span class="hljs-subst">{<span class="hljs-built_in">len</span>(train_df):,}</span>\n"</span>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-string">f"å‡å€¼:Â <span class="hljs-subst">{sales_stats[<span class="hljs-string">'mean'</span>]:<span class="hljs-number">.0</span>f}</span>\n"</span>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-string">f"ä¸­ä½æ•°:Â <span class="hljs-subst">{sales_stats[<span class="hljs-string">'50%'</span>]:<span class="hljs-number">.0</span>f}</span>\n"</span>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-string">f"æ ‡å‡†å·®:Â <span class="hljs-subst">{sales_stats[<span class="hljs-string">'std'</span>]:<span class="hljs-number">.0</span>f}</span>\n"</span>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-string">f"æœ€å°å€¼:Â <span class="hljs-subst">{sales_stats[<span class="hljs-string">'min'</span>]:<span class="hljs-number">.0</span>f}</span>\n"</span>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-string">f"æœ€å¤§å€¼:Â <span class="hljs-subst">{sales_stats[<span class="hljs-string">'max'</span>]:<span class="hljs-number">.0</span>f}</span>"</span>)
Â Â Â Â 
Â Â Â Â axes[<span class="hljs-number">1</span>].text(<span class="hljs-number">0.02</span>,Â <span class="hljs-number">0.98</span>,Â stats_text,Â transform=axes[<span class="hljs-number">1</span>].transAxes,
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â fontsize=<span class="hljs-number">10</span>,Â verticalalignment=<span class="hljs-string">'top'</span>,
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â bbox=<span class="hljs-built_in">dict</span>(boxstyle=<span class="hljs-string">'round'</span>,Â facecolor=<span class="hljs-string">'wheat'</span>,Â alpha=<span class="hljs-number">0.5</span>))
Â Â Â Â 
Â Â Â Â axes[<span class="hljs-number">1</span>].set_title(<span class="hljs-string">'é”€å”®é¢ç®±çº¿å›¾'</span>,Â fontsize=<span class="hljs-number">14</span>,Â fontweight=<span class="hljs-string">'bold'</span>)
Â Â Â Â axes[<span class="hljs-number">1</span>].set_xlabel(<span class="hljs-string">'é”€å”®é¢'</span>,Â fontsize=<span class="hljs-number">12</span>)
Â Â Â Â axes[<span class="hljs-number">1</span>].set_yticklabels([<span class="hljs-string">'é”€å”®é¢'</span>])
Â Â Â Â axes[<span class="hljs-number">1</span>].grid(<span class="hljs-literal">True</span>,Â alpha=<span class="hljs-number">0.3</span>)
Â Â Â Â 
Â Â Â Â plt.suptitle(<span class="hljs-string">'ğŸ¯Â ç›®æ ‡å˜é‡ï¼ˆé”€å”®é¢ï¼‰åˆ†å¸ƒåˆ†æ'</span>,Â fontsize=<span class="hljs-number">16</span>,Â fontweight=<span class="hljs-string">'bold'</span>,Â y=<span class="hljs-number">1.05</span>)
Â Â Â Â plt.tight_layout()
Â Â Â Â plt.show()
Â Â Â Â 
Â Â Â Â <span class="hljs-comment">#Â é›¶é”€å”®é¢åˆ†æ</span>
Â Â Â Â zero_salesÂ =Â (train_df[<span class="hljs-string">'Sales'</span>]Â ==Â <span class="hljs-number">0</span>).<span class="hljs-built_in">sum</span>()
Â Â Â Â zero_percentageÂ =Â zero_salesÂ /Â <span class="hljs-built_in">len</span>(train_df)Â *Â <span class="hljs-number">100</span>
Â Â Â Â 
Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"\nâš ï¸Â é›¶é”€å”®é¢åˆ†æ:"</span>)
Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"é›¶é”€å”®é¢è®°å½•:Â <span class="hljs-subst">{zero_sales:,}</span>Â æ¡Â (<span class="hljs-subst">{zero_percentage:<span class="hljs-number">.2</span>f}</span>%)"</span>)
Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"éé›¶é”€å”®é¢è®°å½•:Â <span class="hljs-subst">{<span class="hljs-built_in">len</span>(train_df)Â -Â zero_sales:,}</span>Â æ¡Â (<span class="hljs-subst">{<span class="hljs-number">100</span>-zero_percentage:<span class="hljs-number">.2</span>f}</span>%)"</span>)
Â Â Â Â 
Â Â Â Â <span class="hljs-comment">#Â æ£€æŸ¥é›¶é”€å”®é¢çš„åŸå› </span>
Â Â Â Â zero_sales_dfÂ =Â train_df[train_df[<span class="hljs-string">'Sales'</span>]Â ==Â <span class="hljs-number">0</span>]
Â Â Â Â <span class="hljs-keyword">if</span>Â <span class="hljs-built_in">len</span>(zero_sales_df)Â &gt;Â <span class="hljs-number">0</span>:
Â Â Â Â Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">"\né›¶é”€å”®é¢åŸå› åˆ†æ:"</span>)
Â Â Â Â Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"é—¨åº—å…³é—­Â (Open=0):Â <span class="hljs-subst">{(zero_sales_df[<span class="hljs-string">'Open'</span>]Â ==Â <span class="hljs-number">0</span>).<span class="hljs-built_in">sum</span>():,}</span>Â æ¡"</span>)
Â Â Â Â Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"èŠ‚å‡æ—¥Â (StateHolidayâ‰ 0):Â <span class="hljs-subst">{(zero_sales_df[<span class="hljs-string">'StateHoliday'</span>]Â !=Â <span class="hljs-string">'0'</span>).<span class="hljs-built_in">sum</span>():,}</span>Â æ¡"</span>)
Â Â Â Â 
Â Â Â Â <span class="hljs-keyword">return</span>Â sales_stats

<span class="hljs-comment">#Â æ‰§è¡Œç›®æ ‡å˜é‡åˆ†æ</span>
sales_statsÂ =Â analyze_target_distribution(train_df)
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b4d3db9ae3734ebeb407d1add602d0aa~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LqR5aSp5b695LiK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767685850&amp;x-signature=3CPVor0FSbc3WhZLPzgdSQ6VeHs%3D" alt="" loading="lazy"/></p>
<h4 data-id="heading-12">2.2.3 æ—¶é—´åºåˆ—åˆ†æ</h4>
<pre><code class="hljs language-scss" lang="scss">defÂ <span class="hljs-built_in">analyze_time_series</span>(train_df):
Â Â Â Â <span class="hljs-string">""</span><span class="hljs-string">"
Â Â Â Â æ—¶é—´åºåˆ—åˆ†æ
Â Â Â Â "</span><span class="hljs-string">""</span>
Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">"\nğŸ“ˆÂ æ—¶é—´åºåˆ—åˆ†æ"</span>)
Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">"="</span>Â *Â <span class="hljs-number">50</span>)
Â Â Â Â 
Â Â Â Â #Â ç¡®ä¿æ—¥æœŸåˆ—æ˜¯datetimeç±»å‹
Â Â Â Â train_df[<span class="hljs-string">'Date'</span>]Â =Â pd.<span class="hljs-built_in">to_datetime</span>(train_df[<span class="hljs-string">'Date'</span>])
Â Â Â Â 
Â Â Â Â #Â æŒ‰æ—¥æœŸèšåˆé”€å”®é¢
Â Â Â Â daily_salesÂ =Â train_df.<span class="hljs-built_in">groupby</span>(<span class="hljs-string">'Date'</span>)[<span class="hljs-string">'Sales'</span>].<span class="hljs-built_in">sum</span>().<span class="hljs-built_in">reset_index</span>()
Â Â Â Â 
Â Â Â Â #Â åˆ›å»ºæ—¶é—´åºåˆ—å¯è§†åŒ–
Â Â Â Â fig,Â axesÂ =Â plt.<span class="hljs-built_in">subplots</span>(<span class="hljs-number">2</span>,Â <span class="hljs-number">2</span>,Â figsize=(<span class="hljs-number">16</span>,Â <span class="hljs-number">10</span>))
Â Â Â Â 
Â Â Â Â #Â <span class="hljs-number">1</span>.Â æ€»é”€å”®é¢æ—¶é—´åºåˆ—
Â Â Â Â axes[<span class="hljs-number">0</span>,Â <span class="hljs-number">0</span>].<span class="hljs-built_in">plot</span>(daily_sales[<span class="hljs-string">'Date'</span>],Â daily_sales[<span class="hljs-string">'Sales'</span>],Â color=<span class="hljs-string">'#3498db'</span>,Â linewidth=<span class="hljs-number">1</span>)
Â Â Â Â axes[<span class="hljs-number">0</span>,Â <span class="hljs-number">0</span>].<span class="hljs-built_in">set_title</span>(<span class="hljs-string">'æ¯æ—¥æ€»é”€å”®é¢è¶‹åŠ¿'</span>,Â fontsize=<span class="hljs-number">12</span>,Â fontweight=<span class="hljs-string">'bold'</span>)
Â Â Â Â axes[<span class="hljs-number">0</span>,Â <span class="hljs-number">0</span>].<span class="hljs-built_in">set_xlabel</span>(<span class="hljs-string">'æ—¥æœŸ'</span>,Â fontsize=<span class="hljs-number">11</span>)
Â Â Â Â axes[<span class="hljs-number">0</span>,Â <span class="hljs-number">0</span>].<span class="hljs-built_in">set_ylabel</span>(<span class="hljs-string">'æ€»é”€å”®é¢'</span>,Â fontsize=<span class="hljs-number">11</span>)
Â Â Â Â axes[<span class="hljs-number">0</span>,Â <span class="hljs-number">0</span>].<span class="hljs-built_in">grid</span>(True,Â alpha=<span class="hljs-number">0.3</span>)
Â Â Â Â 
Â Â Â Â #Â æ·»åŠ ç§»åŠ¨å¹³å‡çº¿
Â Â Â Â window_sizeÂ =Â <span class="hljs-number">30</span>
Â Â Â Â daily_sales[<span class="hljs-string">'MA_30'</span>]Â =Â daily_sales[<span class="hljs-string">'Sales'</span>].<span class="hljs-built_in">rolling</span>(window=window_size).<span class="hljs-built_in">mean</span>()
Â Â Â Â axes[<span class="hljs-number">0</span>,Â <span class="hljs-number">0</span>].<span class="hljs-built_in">plot</span>(daily_sales[<span class="hljs-string">'Date'</span>],Â daily_sales[<span class="hljs-string">'MA_30'</span>],Â color=<span class="hljs-string">'red'</span>,Â 
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â linewidth=<span class="hljs-number">2</span>,Â label=f<span class="hljs-string">'{window_size}å¤©ç§»åŠ¨å¹³å‡'</span>)
Â Â Â Â axes[<span class="hljs-number">0</span>,Â <span class="hljs-number">0</span>].<span class="hljs-built_in">legend</span>(fontsize=<span class="hljs-number">10</span>)
Â Â Â Â 
Â Â Â Â #Â <span class="hljs-number">2</span>.Â æœˆåº¦å¹³å‡é”€å”®é¢
Â Â Â Â train_df[<span class="hljs-string">'YearMonth'</span>]Â =Â train_df[<span class="hljs-string">'Date'</span>].dt.<span class="hljs-built_in">to_period</span>(<span class="hljs-string">'M'</span>)
Â Â Â Â monthly_salesÂ =Â train_df.<span class="hljs-built_in">groupby</span>(<span class="hljs-string">'YearMonth'</span>)[<span class="hljs-string">'Sales'</span>].<span class="hljs-built_in">mean</span>().<span class="hljs-built_in">reset_index</span>()
Â Â Â Â monthly_sales[<span class="hljs-string">'YearMonth'</span>]Â =Â monthly_sales[<span class="hljs-string">'YearMonth'</span>].<span class="hljs-built_in">astype</span>(str)
Â Â Â Â 
Â Â Â Â colorsÂ =Â plt.cm.<span class="hljs-built_in">Blues</span>(np.<span class="hljs-built_in">linspace</span>(<span class="hljs-number">0.4</span>,Â <span class="hljs-number">0.8</span>,Â <span class="hljs-built_in">len</span>(monthly_sales)))
Â Â Â Â axes[<span class="hljs-number">0</span>,Â <span class="hljs-number">1</span>].<span class="hljs-built_in">bar</span>(<span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(monthly_sales)),Â monthly_sales[<span class="hljs-string">'Sales'</span>],Â color=colors,Â alpha=<span class="hljs-number">0.8</span>)
Â Â Â Â axes[<span class="hljs-number">0</span>,Â <span class="hljs-number">1</span>].<span class="hljs-built_in">set_title</span>(<span class="hljs-string">'æœˆåº¦å¹³å‡é”€å”®é¢'</span>,Â fontsize=<span class="hljs-number">12</span>,Â fontweight=<span class="hljs-string">'bold'</span>)
Â Â Â Â axes[<span class="hljs-number">0</span>,Â <span class="hljs-number">1</span>].<span class="hljs-built_in">set_xlabel</span>(<span class="hljs-string">'å¹´æœˆ'</span>,Â fontsize=<span class="hljs-number">11</span>)
Â Â Â Â axes[<span class="hljs-number">0</span>,Â <span class="hljs-number">1</span>].<span class="hljs-built_in">set_ylabel</span>(<span class="hljs-string">'å¹³å‡é”€å”®é¢'</span>,Â fontsize=<span class="hljs-number">11</span>)
Â Â Â Â axes[<span class="hljs-number">0</span>,Â <span class="hljs-number">1</span>].<span class="hljs-built_in">set_xticks</span>(<span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(monthly_sales)))
Â Â Â Â axes[<span class="hljs-number">0</span>,Â <span class="hljs-number">1</span>].<span class="hljs-built_in">set_xticklabels</span>(monthly_sales[<span class="hljs-string">'YearMonth'</span>],Â rotation=<span class="hljs-number">45</span>,Â fontsize=<span class="hljs-number">9</span>)
Â Â Â Â axes[<span class="hljs-number">0</span>,Â <span class="hljs-number">1</span>].<span class="hljs-built_in">grid</span>(True,Â alpha=<span class="hljs-number">0.3</span>,Â axis=<span class="hljs-string">'y'</span>)
Â Â Â Â 
Â Â Â Â #Â <span class="hljs-number">3</span>.Â æ˜ŸæœŸå‡ çš„å¹³å‡é”€å”®é¢
Â Â Â Â day_namesÂ =Â [<span class="hljs-string">'å‘¨ä¸€'</span>,Â <span class="hljs-string">'å‘¨äºŒ'</span>,Â <span class="hljs-string">'å‘¨ä¸‰'</span>,Â <span class="hljs-string">'å‘¨å››'</span>,Â <span class="hljs-string">'å‘¨äº”'</span>,Â <span class="hljs-string">'å‘¨å…­'</span>,Â <span class="hljs-string">'å‘¨æ—¥'</span>]
Â Â Â Â sales_by_dowÂ =Â train_df.<span class="hljs-built_in">groupby</span>(<span class="hljs-string">'DayOfWeek'</span>)[<span class="hljs-string">'Sales'</span>].<span class="hljs-built_in">mean</span>().<span class="hljs-built_in">reset_index</span>()
Â Â Â Â 
Â Â Â Â colors_dowÂ =Â plt.cm.<span class="hljs-built_in">Greens</span>(np.<span class="hljs-built_in">linspace</span>(<span class="hljs-number">0.4</span>,Â <span class="hljs-number">0.8</span>,Â <span class="hljs-number">7</span>))
Â Â Â Â axes[<span class="hljs-number">1</span>,Â <span class="hljs-number">0</span>].<span class="hljs-built_in">bar</span>(sales_by_dow[<span class="hljs-string">'DayOfWeek'</span>],Â sales_by_dow[<span class="hljs-string">'Sales'</span>],Â color=colors_dow,Â alpha=<span class="hljs-number">0.8</span>)
Â Â Â Â axes[<span class="hljs-number">1</span>,Â <span class="hljs-number">0</span>].<span class="hljs-built_in">set_title</span>(<span class="hljs-string">'æ˜ŸæœŸå‡ å¹³å‡é”€å”®é¢'</span>,Â fontsize=<span class="hljs-number">12</span>,Â fontweight=<span class="hljs-string">'bold'</span>)
Â Â Â Â axes[<span class="hljs-number">1</span>,Â <span class="hljs-number">0</span>].<span class="hljs-built_in">set_xlabel</span>(<span class="hljs-string">'æ˜ŸæœŸå‡ '</span>,Â fontsize=<span class="hljs-number">11</span>)
Â Â Â Â axes[<span class="hljs-number">1</span>,Â <span class="hljs-number">0</span>].<span class="hljs-built_in">set_ylabel</span>(<span class="hljs-string">'å¹³å‡é”€å”®é¢'</span>,Â fontsize=<span class="hljs-number">11</span>)
Â Â Â Â axes[<span class="hljs-number">1</span>,Â <span class="hljs-number">0</span>].<span class="hljs-built_in">set_xticks</span>(<span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,Â <span class="hljs-number">8</span>))
Â Â Â Â axes[<span class="hljs-number">1</span>,Â <span class="hljs-number">0</span>].<span class="hljs-built_in">set_xticklabels</span>(day_names,Â fontsize=<span class="hljs-number">10</span>)
Â Â Â Â axes[<span class="hljs-number">1</span>,Â <span class="hljs-number">0</span>].<span class="hljs-built_in">grid</span>(True,Â alpha=<span class="hljs-number">0.3</span>,Â axis=<span class="hljs-string">'y'</span>)
Â Â Â Â 
Â Â Â Â #Â æ·»åŠ æ•°å€¼æ ‡ç­¾
Â Â Â Â forÂ i,Â salesÂ inÂ <span class="hljs-built_in">enumerate</span>(sales_by_dow[<span class="hljs-string">'Sales'</span>]):
Â Â Â Â Â Â Â Â axes[<span class="hljs-number">1</span>,Â <span class="hljs-number">0</span>].<span class="hljs-built_in">text</span>(i+<span class="hljs-number">1</span>,Â salesÂ +Â <span class="hljs-number">50</span>,Â f<span class="hljs-string">'{sales:.0f}'</span>,Â ha=<span class="hljs-string">'center'</span>,Â va=<span class="hljs-string">'bottom'</span>,Â fontsize=<span class="hljs-number">9</span>)
Â Â Â Â 
Â Â Â Â #Â <span class="hljs-number">4</span>.Â æœˆåº¦é”€å”®é¢ç®±çº¿å›¾
Â Â Â Â monthly_sales_boxÂ =Â []
Â Â Â Â month_labelsÂ =Â []
Â Â Â Â 
Â Â Â Â forÂ monthÂ inÂ <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,Â <span class="hljs-number">13</span>):
Â Â Â Â Â Â Â Â month_dataÂ =Â train_df[train_df[<span class="hljs-string">'Date'</span>].dt.monthÂ ==Â month][<span class="hljs-string">'Sales'</span>]
Â Â Â Â Â Â Â Â ifÂ <span class="hljs-built_in">len</span>(month_data)Â &gt;Â <span class="hljs-number">0</span>:
Â Â Â Â Â Â Â Â Â Â Â Â monthly_sales_box.<span class="hljs-built_in">append</span>(month_data.values)
Â Â Â Â Â Â Â Â Â Â Â Â month_labels.<span class="hljs-built_in">append</span>(f<span class="hljs-string">'{month}æœˆ'</span>)
Â Â Â Â 
Â Â Â Â boxÂ =Â axes[<span class="hljs-number">1</span>,Â <span class="hljs-number">1</span>].<span class="hljs-built_in">boxplot</span>(monthly_sales_box,Â labels=month_labels,Â patch_artist=True)
Â Â Â Â colors_monthÂ =Â plt.cm.<span class="hljs-built_in">Oranges</span>(np.<span class="hljs-built_in">linspace</span>(<span class="hljs-number">0.4</span>,Â <span class="hljs-number">0.8</span>,Â <span class="hljs-number">12</span>))
Â Â Â Â 
Â Â Â Â forÂ patch,Â colorÂ inÂ <span class="hljs-built_in">zip</span>(box[<span class="hljs-string">'boxes'</span>],Â colors_month):
Â Â Â Â Â Â Â Â patch.<span class="hljs-built_in">set_facecolor</span>(color)
Â Â Â Â Â Â Â Â patch.<span class="hljs-built_in">set_alpha</span>(<span class="hljs-number">0.7</span>)
Â Â Â Â 
Â Â Â Â axes[<span class="hljs-number">1</span>,Â <span class="hljs-number">1</span>].<span class="hljs-built_in">set_title</span>(<span class="hljs-string">'æœˆåº¦é”€å”®é¢åˆ†å¸ƒï¼ˆç®±çº¿å›¾ï¼‰'</span>,Â fontsize=<span class="hljs-number">12</span>,Â fontweight=<span class="hljs-string">'bold'</span>)
Â Â Â Â axes[<span class="hljs-number">1</span>,Â <span class="hljs-number">1</span>].<span class="hljs-built_in">set_xlabel</span>(<span class="hljs-string">'æœˆä»½'</span>,Â fontsize=<span class="hljs-number">11</span>)
Â Â Â Â axes[<span class="hljs-number">1</span>,Â <span class="hljs-number">1</span>].<span class="hljs-built_in">set_ylabel</span>(<span class="hljs-string">'é”€å”®é¢'</span>,Â fontsize=<span class="hljs-number">11</span>)
Â Â Â Â axes[<span class="hljs-number">1</span>,Â <span class="hljs-number">1</span>].<span class="hljs-built_in">grid</span>(True,Â alpha=<span class="hljs-number">0.3</span>,Â axis=<span class="hljs-string">'y'</span>)
Â Â Â Â 
Â Â Â Â plt.<span class="hljs-built_in">suptitle</span>(<span class="hljs-string">'ğŸ“ŠÂ æ—¶é—´åºåˆ—åˆ†æ'</span>,Â fontsize=<span class="hljs-number">16</span>,Â fontweight=<span class="hljs-string">'bold'</span>,Â y=<span class="hljs-number">1.02</span>)
Â Â Â Â plt.<span class="hljs-built_in">tight_layout</span>()
Â Â Â Â plt.<span class="hljs-built_in">show</span>()
Â Â Â Â 
Â Â Â Â #Â æ‰“å°å­£èŠ‚æ€§åˆ†æ
Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">"\nğŸ“ŠÂ å­£èŠ‚æ€§åˆ†æ:"</span>)
Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">"-"</span>Â *Â <span class="hljs-number">40</span>)
Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">"æœˆåº¦å¹³å‡é”€å”®é¢æ’å:"</span>)
Â Â Â Â monthly_sales_sortedÂ =Â monthly_sales.<span class="hljs-built_in">sort_values</span>(<span class="hljs-string">'Sales'</span>,Â ascending=False)
Â Â Â Â forÂ i,Â rowÂ inÂ monthly_sales_sorted.<span class="hljs-built_in">iterrows</span>():
Â Â Â Â Â Â Â Â <span class="hljs-built_in">print</span>(f<span class="hljs-string">"Â Â {row['YearMonth']}:Â {row['Sales']:.0f}"</span>)
Â Â Â Â 
Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">"\næ˜ŸæœŸå‡ å¹³å‡é”€å”®é¢æ’å:"</span>)
Â Â Â Â sales_by_dow_sortedÂ =Â sales_by_dow.<span class="hljs-built_in">sort_values</span>(<span class="hljs-string">'Sales'</span>,Â ascending=False)
Â Â Â Â forÂ i,Â rowÂ inÂ sales_by_dow_sorted.<span class="hljs-built_in">iterrows</span>():
Â Â Â Â Â Â Â Â <span class="hljs-built_in">print</span>(f<span class="hljs-string">"Â Â {day_names[int(row['DayOfWeek'])-1]}:Â {row['Sales']:.0f}"</span>)
Â Â Â Â 
Â Â Â Â #Â è®¡ç®—å¢é•¿ç‡
Â Â Â Â ifÂ <span class="hljs-built_in">len</span>(monthly_sales)Â &gt;=Â <span class="hljs-number">2</span>:
Â Â Â Â Â Â Â Â latest_monthÂ =Â monthly_sales.iloc[-<span class="hljs-number">1</span>][<span class="hljs-string">'Sales'</span>]
Â Â Â Â Â Â Â Â prev_monthÂ =Â monthly_sales.iloc[-<span class="hljs-number">2</span>][<span class="hljs-string">'Sales'</span>]
Â Â Â Â Â Â Â Â ifÂ prev_monthÂ &gt;Â <span class="hljs-number">0</span>:
Â Â Â Â Â Â Â Â Â Â Â Â growth_rateÂ =Â (latest_monthÂ -Â prev_month)Â /Â prev_monthÂ *Â <span class="hljs-number">100</span>
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-built_in">print</span>(f<span class="hljs-string">"\nğŸ“ˆÂ æœˆåº¦å¢é•¿ç‡:Â {growth_rate:.2f}%"</span>)
Â Â Â Â 
Â Â Â Â returnÂ daily_sales,Â monthly_sales,Â sales_by_dow

#Â æ‰§è¡Œæ—¶é—´åºåˆ—åˆ†æ
daily_sales,Â monthly_sales,Â sales_by_dowÂ =Â <span class="hljs-built_in">analyze_time_series</span>(train_df)
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/93a60c3592fb40d593aeb54c6228fd9a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LqR5aSp5b695LiK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767685850&amp;x-signature=jp5mEe4RZ2EPg5dcPG%2F2X%2BE3vOM%3D" alt="" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9f0a37a544674d00a6406d14cc434700~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LqR5aSp5b695LiK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767685850&amp;x-signature=vSpVfcODufONXctr8szJI%2Bi7snw%3D" alt="" loading="lazy"/></p>
<h4 data-id="heading-13">2.2.4 é—¨åº—ç‰¹å¾åˆ†æ</h4>
<pre><code class="hljs language-scss" lang="scss">defÂ <span class="hljs-built_in">analyze_store_features</span>(train_df,Â store_df):
Â Â Â Â <span class="hljs-string">""</span><span class="hljs-string">"
Â Â Â Â åˆ†æé—¨åº—ç‰¹å¾
Â Â Â Â "</span><span class="hljs-string">""</span>
Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">"\nğŸªÂ é—¨åº—ç‰¹å¾åˆ†æ"</span>)
Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">"="</span>Â *Â <span class="hljs-number">50</span>)
Â Â Â Â 
Â Â Â Â #Â é—¨åº—ç±»å‹åˆ†å¸ƒ
Â Â Â Â store_type_distÂ =Â store_df[<span class="hljs-string">'StoreType'</span>].<span class="hljs-built_in">value_counts</span>()
Â Â Â Â assortment_distÂ =Â store_df[<span class="hljs-string">'Assortment'</span>].<span class="hljs-built_in">value_counts</span>()
Â Â Â Â 
Â Â Â Â #Â åˆ›å»ºé—¨åº—ç‰¹å¾å¯è§†åŒ–
Â Â Â Â fig,Â axesÂ =Â plt.<span class="hljs-built_in">subplots</span>(<span class="hljs-number">2</span>,Â <span class="hljs-number">3</span>,Â figsize=(<span class="hljs-number">16</span>,Â <span class="hljs-number">10</span>))
Â Â Â Â 
Â Â Â Â #Â <span class="hljs-number">1</span>.Â é—¨åº—ç±»å‹åˆ†å¸ƒ
Â Â Â Â colors_typeÂ =Â [<span class="hljs-string">'#3498db'</span>,Â <span class="hljs-string">'#2ecc71'</span>,Â <span class="hljs-string">'#e74c3c'</span>,Â <span class="hljs-string">'#f39c12'</span>]
Â Â Â Â axes[<span class="hljs-number">0</span>,Â <span class="hljs-number">0</span>].<span class="hljs-built_in">bar</span>(store_type_dist.index,Â store_type_dist.values,Â color=colors_type,Â alpha=<span class="hljs-number">0.8</span>)
Â Â Â Â axes[<span class="hljs-number">0</span>,Â <span class="hljs-number">0</span>].<span class="hljs-built_in">set_title</span>(<span class="hljs-string">'é—¨åº—ç±»å‹åˆ†å¸ƒ'</span>,Â fontsize=<span class="hljs-number">12</span>,Â fontweight=<span class="hljs-string">'bold'</span>)
Â Â Â Â axes[<span class="hljs-number">0</span>,Â <span class="hljs-number">0</span>].<span class="hljs-built_in">set_xlabel</span>(<span class="hljs-string">'é—¨åº—ç±»å‹'</span>,Â fontsize=<span class="hljs-number">11</span>)
Â Â Â Â axes[<span class="hljs-number">0</span>,Â <span class="hljs-number">0</span>].<span class="hljs-built_in">set_ylabel</span>(<span class="hljs-string">'é—¨åº—æ•°é‡'</span>,Â fontsize=<span class="hljs-number">11</span>)
Â Â Â Â axes[<span class="hljs-number">0</span>,Â <span class="hljs-number">0</span>].<span class="hljs-built_in">grid</span>(True,Â alpha=<span class="hljs-number">0.3</span>,Â axis=<span class="hljs-string">'y'</span>)
Â Â Â Â 
Â Â Â Â #Â æ·»åŠ æ•°å€¼æ ‡ç­¾
Â Â Â Â forÂ i,Â countÂ inÂ <span class="hljs-built_in">enumerate</span>(store_type_dist.values):
Â Â Â Â Â Â Â Â axes[<span class="hljs-number">0</span>,Â <span class="hljs-number">0</span>].<span class="hljs-built_in">text</span>(i,Â countÂ +Â <span class="hljs-number">10</span>,Â <span class="hljs-built_in">str</span>(count),Â ha=<span class="hljs-string">'center'</span>,Â va=<span class="hljs-string">'bottom'</span>,Â fontsize=<span class="hljs-number">10</span>)
Â Â Â Â 
Â Â Â Â #Â <span class="hljs-number">2</span>.Â å•†å“ç§ç±»åˆ†å¸ƒ
Â Â Â Â colors_assortÂ =Â [<span class="hljs-string">'#9b59b6'</span>,Â <span class="hljs-string">'#1abc9c'</span>,Â <span class="hljs-string">'#34495e'</span>]
Â Â Â Â axes[<span class="hljs-number">0</span>,Â <span class="hljs-number">1</span>].<span class="hljs-built_in">bar</span>(assortment_dist.index,Â assortment_dist.values,Â color=colors_assort,Â alpha=<span class="hljs-number">0.8</span>)
Â Â Â Â axes[<span class="hljs-number">0</span>,Â <span class="hljs-number">1</span>].<span class="hljs-built_in">set_title</span>(<span class="hljs-string">'å•†å“ç§ç±»åˆ†å¸ƒ'</span>,Â fontsize=<span class="hljs-number">12</span>,Â fontweight=<span class="hljs-string">'bold'</span>)
Â Â Â Â axes[<span class="hljs-number">0</span>,Â <span class="hljs-number">1</span>].<span class="hljs-built_in">set_xlabel</span>(<span class="hljs-string">'å•†å“ç§ç±»'</span>,Â fontsize=<span class="hljs-number">11</span>)
Â Â Â Â axes[<span class="hljs-number">0</span>,Â <span class="hljs-number">1</span>].<span class="hljs-built_in">set_ylabel</span>(<span class="hljs-string">'é—¨åº—æ•°é‡'</span>,Â fontsize=<span class="hljs-number">11</span>)
Â Â Â Â axes[<span class="hljs-number">0</span>,Â <span class="hljs-number">1</span>].<span class="hljs-built_in">grid</span>(True,Â alpha=<span class="hljs-number">0.3</span>,Â axis=<span class="hljs-string">'y'</span>)
Â Â Â Â 
Â Â Â Â #Â æ·»åŠ æ•°å€¼æ ‡ç­¾
Â Â Â Â forÂ i,Â countÂ inÂ <span class="hljs-built_in">enumerate</span>(assortment_dist.values):
Â Â Â Â Â Â Â Â axes[<span class="hljs-number">0</span>,Â <span class="hljs-number">1</span>].<span class="hljs-built_in">text</span>(i,Â countÂ +Â <span class="hljs-number">10</span>,Â <span class="hljs-built_in">str</span>(count),Â ha=<span class="hljs-string">'center'</span>,Â va=<span class="hljs-string">'bottom'</span>,Â fontsize=<span class="hljs-number">10</span>)
Â Â Â Â 
Â Â Â Â #Â <span class="hljs-number">3</span>.Â ç«äº‰å¯¹æ‰‹è·ç¦»åˆ†å¸ƒ
Â Â Â Â valid_distancesÂ =Â store_df[<span class="hljs-string">'CompetitionDistance'</span>].<span class="hljs-built_in">dropna</span>()
Â Â Â Â axes[<span class="hljs-number">0</span>,Â <span class="hljs-number">2</span>].<span class="hljs-built_in">hist</span>(valid_distances,Â bins=<span class="hljs-number">50</span>,Â color=<span class="hljs-string">'#e67e22'</span>,Â alpha=<span class="hljs-number">0.7</span>,Â edgecolor=<span class="hljs-string">'black'</span>)
Â Â Â Â axes[<span class="hljs-number">0</span>,Â <span class="hljs-number">2</span>].<span class="hljs-built_in">set_title</span>(<span class="hljs-string">'ç«äº‰å¯¹æ‰‹è·ç¦»åˆ†å¸ƒ'</span>,Â fontsize=<span class="hljs-number">12</span>,Â fontweight=<span class="hljs-string">'bold'</span>)
Â Â Â Â axes[<span class="hljs-number">0</span>,Â <span class="hljs-number">2</span>].<span class="hljs-built_in">set_xlabel</span>(<span class="hljs-string">'è·ç¦»ï¼ˆç±³ï¼‰'</span>,Â fontsize=<span class="hljs-number">11</span>)
Â Â Â Â axes[<span class="hljs-number">0</span>,Â <span class="hljs-number">2</span>].<span class="hljs-built_in">set_ylabel</span>(<span class="hljs-string">'é—¨åº—æ•°é‡'</span>,Â fontsize=<span class="hljs-number">12</span>)
Â Â Â Â axes[<span class="hljs-number">0</span>,Â <span class="hljs-number">2</span>].<span class="hljs-built_in">grid</span>(True,Â alpha=<span class="hljs-number">0.3</span>)
Â Â Â Â 
Â Â Â Â #Â <span class="hljs-number">4</span>.Â ä¿ƒé”€æ´»åŠ¨åˆ†æ
Â Â Â Â promo2_distÂ =Â store_df[<span class="hljs-string">'Promo2'</span>].<span class="hljs-built_in">value_counts</span>()
Â Â Â Â colors_promoÂ =Â [<span class="hljs-string">'#95a5a6'</span>,Â <span class="hljs-string">'#27ae60'</span>]
Â Â Â Â axes[<span class="hljs-number">1</span>,Â <span class="hljs-number">0</span>].<span class="hljs-built_in">pie</span>(promo2_dist.values,Â labels=[<span class="hljs-string">'æ— ä¿ƒé”€'</span>,Â <span class="hljs-string">'æœ‰ä¿ƒé”€'</span>],Â colors=colors_promo,
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â autopct=<span class="hljs-string">'%1.1f%%'</span>,Â startangle=<span class="hljs-number">90</span>)
Â Â Â Â axes[<span class="hljs-number">1</span>,Â <span class="hljs-number">0</span>].<span class="hljs-built_in">set_title</span>(<span class="hljs-string">'Promo2ä¿ƒé”€æ´»åŠ¨åˆ†å¸ƒ'</span>,Â fontsize=<span class="hljs-number">12</span>,Â fontweight=<span class="hljs-string">'bold'</span>)
Â Â Â Â 
Â Â Â Â #Â <span class="hljs-number">5</span>.Â é—¨åº—é”€å”®é¢æ’å
Â Â Â Â store_salesÂ =Â train_df.<span class="hljs-built_in">groupby</span>(<span class="hljs-string">'Store'</span>)[<span class="hljs-string">'Sales'</span>].<span class="hljs-built_in">mean</span>().<span class="hljs-built_in">sort_values</span>(ascending=False).<span class="hljs-built_in">head</span>(<span class="hljs-number">20</span>)
Â Â Â Â colors_storeÂ =Â plt.cm.<span class="hljs-built_in">viridis</span>(np.<span class="hljs-built_in">linspace</span>(<span class="hljs-number">0.4</span>,Â <span class="hljs-number">0.8</span>,Â <span class="hljs-built_in">len</span>(store_sales)))
Â Â Â Â axes[<span class="hljs-number">1</span>,Â <span class="hljs-number">1</span>].<span class="hljs-built_in">barh</span>(<span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(store_sales)),Â store_sales.values,Â color=colors_store,Â alpha=<span class="hljs-number">0.8</span>)
Â Â Â Â axes[<span class="hljs-number">1</span>,Â <span class="hljs-number">1</span>].<span class="hljs-built_in">set_title</span>(<span class="hljs-string">'é—¨åº—å¹³å‡é”€å”®é¢Top20'</span>,Â fontsize=<span class="hljs-number">12</span>,Â fontweight=<span class="hljs-string">'bold'</span>)
Â Â Â Â axes[<span class="hljs-number">1</span>,Â <span class="hljs-number">1</span>].<span class="hljs-built_in">set_xlabel</span>(<span class="hljs-string">'å¹³å‡é”€å”®é¢'</span>,Â fontsize=<span class="hljs-number">11</span>)
Â Â Â Â axes[<span class="hljs-number">1</span>,Â <span class="hljs-number">1</span>].<span class="hljs-built_in">set_ylabel</span>(<span class="hljs-string">'é—¨åº—ID'</span>,Â fontsize=<span class="hljs-number">11</span>)
Â Â Â Â axes[<span class="hljs-number">1</span>,Â <span class="hljs-number">1</span>].<span class="hljs-built_in">set_yticks</span>(<span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(store_sales)))
Â Â Â Â axes[<span class="hljs-number">1</span>,Â <span class="hljs-number">1</span>].<span class="hljs-built_in">set_yticklabels</span>(store_sales.index,Â fontsize=<span class="hljs-number">9</span>)
Â Â Â Â axes[<span class="hljs-number">1</span>,Â <span class="hljs-number">1</span>].<span class="hljs-built_in">invert_yaxis</span>()
Â Â Â Â axes[<span class="hljs-number">1</span>,Â <span class="hljs-number">1</span>].<span class="hljs-built_in">grid</span>(True,Â alpha=<span class="hljs-number">0.3</span>,Â axis=<span class="hljs-string">'x'</span>)
Â Â Â Â 
Â Â Â Â #Â <span class="hljs-number">6</span>.Â é—¨åº—ç±»å‹ä¸é”€å”®é¢çš„å…³ç³»
Â Â Â Â store_type_salesÂ =Â train_df.<span class="hljs-built_in">groupby</span>(<span class="hljs-string">'StoreType'</span>)[<span class="hljs-string">'Sales'</span>].<span class="hljs-built_in">mean</span>().<span class="hljs-built_in">sort_values</span>(ascending=False)
Â Â Â Â colors_type_salesÂ =Â plt.cm.<span class="hljs-built_in">coolwarm</span>(np.<span class="hljs-built_in">linspace</span>(<span class="hljs-number">0.2</span>,Â <span class="hljs-number">0.8</span>,Â <span class="hljs-built_in">len</span>(store_type_sales)))
Â Â Â Â barsÂ =Â axes[<span class="hljs-number">1</span>,Â <span class="hljs-number">2</span>].<span class="hljs-built_in">bar</span>(<span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(store_type_sales)),Â store_type_sales.values,Â 
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â color=colors_type_sales,Â alpha=<span class="hljs-number">0.8</span>)
Â Â Â Â axes[<span class="hljs-number">1</span>,Â <span class="hljs-number">2</span>].<span class="hljs-built_in">set_title</span>(<span class="hljs-string">'é—¨åº—ç±»å‹å¹³å‡é”€å”®é¢'</span>,Â fontsize=<span class="hljs-number">12</span>,Â fontweight=<span class="hljs-string">'bold'</span>)
Â Â Â Â axes[<span class="hljs-number">1</span>,Â <span class="hljs-number">2</span>].<span class="hljs-built_in">set_xlabel</span>(<span class="hljs-string">'é—¨åº—ç±»å‹'</span>,Â fontsize=<span class="hljs-number">11</span>)
Â Â Â Â axes[<span class="hljs-number">1</span>,Â <span class="hljs-number">2</span>].<span class="hljs-built_in">set_ylabel</span>(<span class="hljs-string">'å¹³å‡é”€å”®é¢'</span>,Â fontsize=<span class="hljs-number">11</span>)
Â Â Â Â axes[<span class="hljs-number">1</span>,Â <span class="hljs-number">2</span>].<span class="hljs-built_in">set_xticks</span>(<span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(store_type_sales)))
Â Â Â Â axes[<span class="hljs-number">1</span>,Â <span class="hljs-number">2</span>].<span class="hljs-built_in">set_xticklabels</span>(store_type_sales.index,Â fontsize=<span class="hljs-number">10</span>)
Â Â Â Â axes[<span class="hljs-number">1</span>,Â <span class="hljs-number">2</span>].<span class="hljs-built_in">grid</span>(True,Â alpha=<span class="hljs-number">0.3</span>,Â axis=<span class="hljs-string">'y'</span>)
Â Â Â Â 
Â Â Â Â #Â æ·»åŠ æ•°å€¼æ ‡ç­¾
Â Â Â Â forÂ i,Â salesÂ inÂ <span class="hljs-built_in">enumerate</span>(store_type_sales.values):
Â Â Â Â Â Â Â Â axes[<span class="hljs-number">1</span>,Â <span class="hljs-number">2</span>].<span class="hljs-built_in">text</span>(i,Â salesÂ +Â <span class="hljs-number">100</span>,Â f<span class="hljs-string">'{sales:.0f}'</span>,Â ha=<span class="hljs-string">'center'</span>,Â va=<span class="hljs-string">'bottom'</span>,Â fontsize=<span class="hljs-number">10</span>)
Â Â Â Â 
Â Â Â Â plt.<span class="hljs-built_in">suptitle</span>(<span class="hljs-string">'ğŸªÂ é—¨åº—ç‰¹å¾åˆ†æ'</span>,Â fontsize=<span class="hljs-number">16</span>,Â fontweight=<span class="hljs-string">'bold'</span>,Â y=<span class="hljs-number">1.02</span>)
Â Â Â Â plt.<span class="hljs-built_in">tight_layout</span>()
Â Â Â Â plt.<span class="hljs-built_in">show</span>()
Â Â Â Â 
Â Â Â Â #Â æ‰“å°é—¨åº—ç‰¹å¾ç»Ÿè®¡
Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">"\nğŸ“ŠÂ é—¨åº—ç‰¹å¾ç»Ÿè®¡:"</span>)
Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">"-"</span>Â *Â <span class="hljs-number">40</span>)
Â Â Â Â <span class="hljs-built_in">print</span>(f<span class="hljs-string">"é—¨åº—æ€»æ•°:Â {len(store_df)}"</span>)
Â Â Â Â <span class="hljs-built_in">print</span>(f<span class="hljs-string">"æœ‰ç«äº‰å¯¹æ‰‹è·ç¦»è®°å½•çš„é—¨åº—:Â {store_df['CompetitionDistance'].notna().sum()}"</span>)
Â Â Â Â <span class="hljs-built_in">print</span>(f<span class="hljs-string">"å‚ä¸Promo2ä¿ƒé”€çš„é—¨åº—:Â {promo2_dist.get(1,Â 0)}"</span>)
Â Â Â Â 
Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">"\né—¨åº—ç±»å‹é”€å”®é¢å¯¹æ¯”:"</span>)
Â Â Â Â forÂ store_type,Â avg_salesÂ inÂ store_type_sales.<span class="hljs-built_in">items</span>():
Â Â Â Â Â Â Â Â <span class="hljs-built_in">print</span>(f<span class="hljs-string">"Â Â {store_type}å‹é—¨åº—:Â {avg_sales:.0f}"</span>)
Â Â Â Â 
Â Â Â Â #Â ç«äº‰å¯¹æ‰‹è·ç¦»ç»Ÿè®¡
Â Â Â Â ifÂ <span class="hljs-built_in">len</span>(valid_distances)Â &gt;Â <span class="hljs-number">0</span>:
Â Â Â Â Â Â Â Â <span class="hljs-built_in">print</span>(f<span class="hljs-string">"\nç«äº‰å¯¹æ‰‹è·ç¦»ç»Ÿè®¡:"</span>)
Â Â Â Â Â Â Â Â <span class="hljs-built_in">print</span>(f<span class="hljs-string">"Â Â å¹³å‡è·ç¦»:Â {valid_distances.mean():.0f}ç±³"</span>)
Â Â Â Â Â Â Â Â <span class="hljs-built_in">print</span>(f<span class="hljs-string">"Â Â ä¸­ä½æ•°è·ç¦»:Â {valid_distances.median():.0f}ç±³"</span>)
Â Â Â Â Â Â Â Â <span class="hljs-built_in">print</span>(f<span class="hljs-string">"Â Â æœ€å°è·ç¦»:Â {valid_distances.min():.0f}ç±³"</span>)
Â Â Â Â Â Â Â Â <span class="hljs-built_in">print</span>(f<span class="hljs-string">"Â Â æœ€å¤§è·ç¦»:Â {valid_distances.max():.0f}ç±³"</span>)
Â Â Â Â 
Â Â Â Â returnÂ store_type_dist,Â assortment_dist,Â store_sales

#Â æ‰§è¡Œé—¨åº—ç‰¹å¾åˆ†æ
store_type_dist,Â assortment_dist,Â store_salesÂ =Â <span class="hljs-built_in">analyze_store_features</span>(train_df,Â store)
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e14adcfec0c849668f9ff45b015be116~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LqR5aSp5b695LiK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767685850&amp;x-signature=SCLcIo2zF8kFk5gOSEoEekyscww%3D" alt="" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7417260f83774290ae36c6a39ccb9071~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LqR5aSp5b695LiK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767685850&amp;x-signature=2UdWjeSkF2BljZrssZ%2BqgmAyM7I%3D" alt="" loading="lazy"/></p>
<h4 data-id="heading-14">2.2.5 ç›¸å…³æ€§åˆ†æ</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span>Â <span class="hljs-title function_">analyze_correlations</span>(<span class="hljs-params">train_df</span>):
Â Â Â Â <span class="hljs-string">"""
Â Â Â Â ç›¸å…³æ€§åˆ†æ
Â Â Â Â """</span>
Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">"\nğŸ”—Â ç‰¹å¾ç›¸å…³æ€§åˆ†æ"</span>)
Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">"="</span>Â *Â <span class="hljs-number">50</span>)
Â Â Â Â 
Â Â Â Â <span class="hljs-comment">#Â é€‰æ‹©æ•°å€¼ç‰¹å¾</span>
Â Â Â Â numeric_featuresÂ =Â [<span class="hljs-string">'Sales'</span>,Â <span class="hljs-string">'Customers'</span>,Â <span class="hljs-string">'Open'</span>,Â <span class="hljs-string">'Promo'</span>,Â <span class="hljs-string">'DayOfWeek'</span>,Â 
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-string">'SchoolHoliday'</span>,Â <span class="hljs-string">'CompetitionDistance'</span>]
Â Â Â Â 
Â Â Â Â <span class="hljs-comment">#Â åˆ›å»ºæ–°çš„æ•°å€¼ç‰¹å¾</span>
Â Â Â Â train_df[<span class="hljs-string">'Year'</span>]Â =Â train_df[<span class="hljs-string">'Date'</span>].dt.year
Â Â Â Â train_df[<span class="hljs-string">'Month'</span>]Â =Â train_df[<span class="hljs-string">'Date'</span>].dt.month
Â Â Â Â train_df[<span class="hljs-string">'Day'</span>]Â =Â train_df[<span class="hljs-string">'Date'</span>].dt.day
Â Â Â Â 
Â Â Â Â <span class="hljs-comment">#Â æ·»åŠ é—¨åº—ç±»å‹å’Œå•†å“ç§ç±»çš„ç¼–ç </span>
Â Â Â Â leÂ =Â LabelEncoder()
Â Â Â Â train_df[<span class="hljs-string">'StoreType_encoded'</span>]Â =Â le.fit_transform(train_df[<span class="hljs-string">'StoreType'</span>].astype(<span class="hljs-built_in">str</span>))
Â Â Â Â train_df[<span class="hljs-string">'Assortment_encoded'</span>]Â =Â le.fit_transform(train_df[<span class="hljs-string">'Assortment'</span>].astype(<span class="hljs-built_in">str</span>))
Â Â Â Â 
Â Â Â Â <span class="hljs-comment">#Â æ‰©å±•æ•°å€¼ç‰¹å¾åˆ—è¡¨</span>
Â Â Â Â extended_featuresÂ =Â numeric_featuresÂ +Â [<span class="hljs-string">'Year'</span>,Â <span class="hljs-string">'Month'</span>,Â <span class="hljs-string">'Day'</span>,Â 
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-string">'StoreType_encoded'</span>,Â <span class="hljs-string">'Assortment_encoded'</span>]
Â Â Â Â 
Â Â Â Â <span class="hljs-comment">#Â è®¡ç®—ç›¸å…³ç³»æ•°çŸ©é˜µ</span>
Â Â Â Â correlation_matrixÂ =Â train_df[extended_features].corr()
Â Â Â Â 
Â Â Â Â <span class="hljs-comment">#Â å¯è§†åŒ–ç›¸å…³ç³»æ•°çŸ©é˜µ</span>
Â Â Â Â fig,Â axÂ =Â plt.subplots(figsize=(<span class="hljs-number">12</span>,Â <span class="hljs-number">10</span>))
Â Â Â Â 
Â Â Â Â <span class="hljs-comment">#Â åˆ›å»ºçƒ­åŠ›å›¾</span>
Â Â Â Â imÂ =Â ax.imshow(correlation_matrix.values,Â cmap=<span class="hljs-string">'coolwarm'</span>,Â aspect=<span class="hljs-string">'auto'</span>)
Â Â Â Â 
Â Â Â Â <span class="hljs-comment">#Â è®¾ç½®åæ ‡è½´</span>
Â Â Â Â ax.set_xticks(<span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(correlation_matrix.columns)))
Â Â Â Â ax.set_yticks(<span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(correlation_matrix.columns)))
Â Â Â Â ax.set_xticklabels(correlation_matrix.columns,Â rotation=<span class="hljs-number">45</span>,Â ha=<span class="hljs-string">'right'</span>,Â fontsize=<span class="hljs-number">10</span>)
Â Â Â Â ax.set_yticklabels(correlation_matrix.columns,Â fontsize=<span class="hljs-number">10</span>)
Â Â Â Â 
Â Â Â Â <span class="hljs-comment">#Â æ·»åŠ é¢œè‰²æ¡</span>
Â Â Â Â plt.colorbar(im,Â ax=ax)
Â Â Â Â 
Â Â Â Â <span class="hljs-comment">#Â æ·»åŠ ç›¸å…³ç³»æ•°å€¼</span>
Â Â Â Â <span class="hljs-keyword">for</span>Â iÂ <span class="hljs-keyword">in</span>Â <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(correlation_matrix.columns)):
Â Â Â Â Â Â Â Â <span class="hljs-keyword">for</span>Â jÂ <span class="hljs-keyword">in</span>Â <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(correlation_matrix.columns)):
Â Â Â Â Â Â Â Â Â Â Â Â textÂ =Â ax.text(j,Â i,Â <span class="hljs-string">f'<span class="hljs-subst">{correlation_matrix.iloc[i,Â j]:<span class="hljs-number">.2</span>f}</span>'</span>,
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ha=<span class="hljs-string">'center'</span>,Â va=<span class="hljs-string">'center'</span>,Â color=<span class="hljs-string">'white'</span>Â <span class="hljs-keyword">if</span>Â <span class="hljs-built_in">abs</span>(correlation_matrix.iloc[i,Â j])Â &gt;Â <span class="hljs-number">0.5</span>Â <span class="hljs-keyword">else</span>Â <span class="hljs-string">'black'</span>,
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â fontsize=<span class="hljs-number">9</span>Â <span class="hljs-keyword">if</span>Â iÂ !=Â jÂ <span class="hljs-keyword">else</span>Â <span class="hljs-number">10</span>,Â fontweight=<span class="hljs-string">'bold'</span>Â <span class="hljs-keyword">if</span>Â iÂ ==Â jÂ <span class="hljs-keyword">else</span>Â <span class="hljs-string">'normal'</span>)
Â Â Â Â 
Â Â Â Â ax.set_title(<span class="hljs-string">'ç‰¹å¾ç›¸å…³æ€§çƒ­åŠ›å›¾'</span>,Â fontsize=<span class="hljs-number">16</span>,Â fontweight=<span class="hljs-string">'bold'</span>,Â pad=<span class="hljs-number">20</span>)
Â Â Â Â plt.tight_layout()
Â Â Â Â plt.show()
Â Â Â Â 
Â Â Â Â <span class="hljs-comment">#Â åˆ†æä¸é”€å”®é¢çš„ç›¸å…³æ€§</span>
Â Â Â Â sales_corrÂ =Â correlation_matrix[<span class="hljs-string">'Sales'</span>].sort_values(ascending=<span class="hljs-literal">False</span>)
Â Â Â Â 
Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">"\nğŸ¯Â ä¸é”€å”®é¢ç›¸å…³æ€§æœ€é«˜çš„ç‰¹å¾:"</span>)
Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">"-"</span>Â *Â <span class="hljs-number">50</span>)
Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"<span class="hljs-subst">{<span class="hljs-string">'ç‰¹å¾'</span>:&lt;<span class="hljs-number">20</span>}</span>Â <span class="hljs-subst">{<span class="hljs-string">'ç›¸å…³ç³»æ•°'</span>:&lt;<span class="hljs-number">10</span>}</span>Â <span class="hljs-subst">{<span class="hljs-string">'å…³ç³»ç±»å‹'</span>:&lt;<span class="hljs-number">15</span>}</span>"</span>)
Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">"-"</span>Â *Â <span class="hljs-number">50</span>)
Â Â Â Â 
Â Â Â Â <span class="hljs-keyword">for</span>Â feature,Â corr_valueÂ <span class="hljs-keyword">in</span>Â sales_corr.items():
Â Â Â Â Â Â Â Â <span class="hljs-keyword">if</span>Â featureÂ ==Â <span class="hljs-string">'Sales'</span>:
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-keyword">continue</span>
Â Â Â Â Â Â Â Â 
Â Â Â Â Â Â Â Â <span class="hljs-keyword">if</span>Â corr_valueÂ &gt;Â <span class="hljs-number">0.3</span>:
Â Â Â Â Â Â Â Â Â Â Â Â relationÂ =Â <span class="hljs-string">"å¼ºæ­£ç›¸å…³"</span>
Â Â Â Â Â Â Â Â Â Â Â Â symbolÂ =Â <span class="hljs-string">"â†‘â†‘"</span>
Â Â Â Â Â Â Â Â <span class="hljs-keyword">elif</span>Â corr_valueÂ &gt;Â <span class="hljs-number">0.1</span>:
Â Â Â Â Â Â Â Â Â Â Â Â relationÂ =Â <span class="hljs-string">"æ­£ç›¸å…³"</span>
Â Â Â Â Â Â Â Â Â Â Â Â symbolÂ =Â <span class="hljs-string">"â†‘"</span>
Â Â Â Â Â Â Â Â <span class="hljs-keyword">elif</span>Â corr_valueÂ &lt;Â -<span class="hljs-number">0.3</span>:
Â Â Â Â Â Â Â Â Â Â Â Â relationÂ =Â <span class="hljs-string">"å¼ºè´Ÿç›¸å…³"</span>
Â Â Â Â Â Â Â Â Â Â Â Â symbolÂ =Â <span class="hljs-string">"â†“â†“"</span>
Â Â Â Â Â Â Â Â <span class="hljs-keyword">elif</span>Â corr_valueÂ &lt;Â -<span class="hljs-number">0.1</span>:
Â Â Â Â Â Â Â Â Â Â Â Â relationÂ =Â <span class="hljs-string">"è´Ÿç›¸å…³"</span>
Â Â Â Â Â Â Â Â Â Â Â Â symbolÂ =Â <span class="hljs-string">"â†“"</span>
Â Â Â Â Â Â Â Â <span class="hljs-keyword">else</span>:
Â Â Â Â Â Â Â Â Â Â Â Â relationÂ =Â <span class="hljs-string">"å¼±ç›¸å…³"</span>
Â Â Â Â Â Â Â Â Â Â Â Â symbolÂ =Â <span class="hljs-string">"â†’"</span>
Â Â Â Â Â Â Â Â 
Â Â Â Â Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"<span class="hljs-subst">{feature:&lt;<span class="hljs-number">20</span>}</span>Â <span class="hljs-subst">{corr_value:&lt;<span class="hljs-number">10.4</span>f}</span>Â <span class="hljs-subst">{relation:&lt;<span class="hljs-number">15</span>}</span>Â <span class="hljs-subst">{symbol}</span>"</span>)
Â Â Â Â 
Â Â Â Â <span class="hljs-comment">#Â å…³é”®å‘ç°</span>
Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">"\nğŸ”Â å…³é”®å‘ç°:"</span>)
Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">"-"</span>Â *Â <span class="hljs-number">40</span>)
Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">"1.Â é¡¾å®¢æ•°é‡ä¸é”€å”®é¢é«˜åº¦ç›¸å…³ï¼ˆé¢„æœŸä¹‹å†…ï¼‰"</span>)
Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">"2.Â ä¿ƒé”€æ´»åŠ¨å¯¹é”€å”®é¢æœ‰ç§¯æå½±å“"</span>)
Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">"3.Â ç«äº‰å¯¹æ‰‹è·ç¦»ä¸é”€å”®é¢ç›¸å…³æ€§è¾ƒå¼±"</span>)
Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">"4.Â é—¨åº—ç±»å‹å’Œå•†å“ç§ç±»ä¸é”€å”®é¢æœ‰ä¸€å®šç›¸å…³æ€§"</span>)
Â Â Â Â 
Â Â Â Â <span class="hljs-keyword">return</span>Â correlation_matrix,Â sales_corr

<span class="hljs-comment">#Â æ‰§è¡Œç›¸å…³æ€§åˆ†æ</span>
correlation_matrix,Â sales_corrÂ =Â analyze_correlations(train_df)
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/71380a9b0cee45769d96f9fd37ddd122~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LqR5aSp5b695LiK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767685850&amp;x-signature=6IH2BdIkWqXkUovutzP%2BS7SWYRY%3D" alt="" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/57b51c0a843a4f138e58a0da7d0f34c2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LqR5aSp5b695LiK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767685850&amp;x-signature=dfTyWGDuTxnevRxXkRQocA6%2FLHM%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-15">2.3 ç‰¹å¾å·¥ç¨‹</h3>
<h4 data-id="heading-16">2.3.1 æ—¶é—´ç‰¹å¾å·¥ç¨‹</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span>Â <span class="hljs-title function_">create_time_features</span>(<span class="hljs-params">df</span>):
Â Â Â Â <span class="hljs-string">"""
Â Â Â Â åˆ›å»ºæ—¶é—´ç›¸å…³ç‰¹å¾
Â Â Â Â """</span>
Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">"\nâ°Â åˆ›å»ºæ—¶é—´ç‰¹å¾..."</span>)
Â Â Â Â 
Â Â Â Â <span class="hljs-comment">#Â ç¡®ä¿æ—¥æœŸåˆ—æ˜¯datetimeç±»å‹</span>
Â Â Â Â df[<span class="hljs-string">'Date'</span>]Â =Â pd.to_datetime(df[<span class="hljs-string">'Date'</span>])
Â Â Â Â 
Â Â Â Â <span class="hljs-comment">#Â åŸºæœ¬æ—¶é—´ç‰¹å¾</span>
Â Â Â Â df[<span class="hljs-string">'Year'</span>]Â =Â df[<span class="hljs-string">'Date'</span>].dt.yearÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â å¹´</span>
Â Â Â Â df[<span class="hljs-string">'Month'</span>]Â =Â df[<span class="hljs-string">'Date'</span>].dt.monthÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â æœˆ</span>
Â Â Â Â df[<span class="hljs-string">'Day'</span>]Â =Â df[<span class="hljs-string">'Date'</span>].dt.dayÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â æ—¥</span>
Â Â Â Â df[<span class="hljs-string">'WeekOfYear'</span>]Â =Â df[<span class="hljs-string">'Date'</span>].dt.isocalendar().weekÂ Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â ä¸€å¹´ä¸­çš„ç¬¬å‡ å‘¨</span>
Â Â Â Â df[<span class="hljs-string">'DayOfYear'</span>]Â =Â df[<span class="hljs-string">'Date'</span>].dt.dayofyearÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â ä¸€å¹´ä¸­çš„ç¬¬å‡ å¤©</span>
Â Â Â Â 
Â Â Â Â <span class="hljs-comment">#Â æ˜ŸæœŸç‰¹å¾</span>
Â Â Â Â df[<span class="hljs-string">'DayOfWeek'</span>]Â =Â df[<span class="hljs-string">'Date'</span>].dt.dayofweekÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â æ˜ŸæœŸå‡ </span>
Â Â Â Â df[<span class="hljs-string">'IsWeekend'</span>]Â =Â (df[<span class="hljs-string">'DayOfWeek'</span>]Â &gt;=Â <span class="hljs-number">5</span>).astype(<span class="hljs-built_in">int</span>)Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â æ˜¯å¦æ˜¯å‘¨æœ«</span>
Â Â Â Â 
Â Â Â Â <span class="hljs-comment">#Â å­£åº¦ç‰¹å¾</span>
Â Â Â Â df[<span class="hljs-string">'Quarter'</span>]Â =Â df[<span class="hljs-string">'Date'</span>].dt.quarterÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â é‚£ä¸€ä¸ªå­£åº¦</span>
Â Â Â Â 
Â Â Â Â <span class="hljs-comment">#Â æœˆä»½ç‰¹å¾</span>
Â Â Â Â df[<span class="hljs-string">'IsMonthStart'</span>]Â =Â df[<span class="hljs-string">'Date'</span>].dt.is_month_start.astype(<span class="hljs-built_in">int</span>)Â Â <span class="hljs-comment">#Â æ˜¯å¦ä¸ºå½“æœˆèµ·å§‹æ—¥æœŸ</span>
Â Â Â Â df[<span class="hljs-string">'IsMonthEnd'</span>]Â =Â df[<span class="hljs-string">'Date'</span>].dt.is_month_end.astype(<span class="hljs-built_in">int</span>)Â Â Â Â Â Â <span class="hljs-comment">#Â æ˜¯å¦ä¸ºå½“æœˆæ¥æ”¶æ—¥æœŸ</span>
Â Â Â Â 
Â Â Â Â <span class="hljs-comment">#Â å­£èŠ‚æ€§ç‰¹å¾ï¼ˆåŸºäºæœˆä»½ï¼‰</span>
Â Â Â Â seasonsÂ =Â {
Â Â Â Â Â Â Â Â <span class="hljs-number">12</span>:Â <span class="hljs-string">'Winter'</span>,Â <span class="hljs-number">1</span>:Â <span class="hljs-string">'Winter'</span>,Â <span class="hljs-number">2</span>:Â <span class="hljs-string">'Winter'</span>,Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â å†¬å­£</span>
Â Â Â Â Â Â Â Â <span class="hljs-number">3</span>:Â <span class="hljs-string">'Spring'</span>,Â <span class="hljs-number">4</span>:Â <span class="hljs-string">'Spring'</span>,Â <span class="hljs-number">5</span>:Â <span class="hljs-string">'Spring'</span>,Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â æ˜¥å­£</span>
Â Â Â Â Â Â Â Â <span class="hljs-number">6</span>:Â <span class="hljs-string">'Summer'</span>,Â <span class="hljs-number">7</span>:Â <span class="hljs-string">'Summer'</span>,Â <span class="hljs-number">8</span>:Â <span class="hljs-string">'Summer'</span>,Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â å¤å­£</span>
Â Â Â Â Â Â Â Â <span class="hljs-number">9</span>:Â <span class="hljs-string">'Autumn'</span>,Â <span class="hljs-number">10</span>:Â <span class="hljs-string">'Autumn'</span>,Â <span class="hljs-number">11</span>:Â <span class="hljs-string">'Autumn'</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â ç§‹å­£</span>
Â Â Â Â }
Â Â Â Â 
Â Â Â Â df[<span class="hljs-string">'Season'</span>]Â =Â df[<span class="hljs-string">'Month'</span>].<span class="hljs-built_in">map</span>(seasons)Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â æœˆä»½è¿›è¡Œå­£åº¦ç¼–ç Â Â Â Â Â Â Â Â </span>
Â Â Â Â 
Â Â Â Â <span class="hljs-comment">#Â ç¼–ç å­£èŠ‚æ€§ç‰¹å¾</span>
Â Â Â Â leÂ =Â LabelEncoder()
Â Â Â Â df[<span class="hljs-string">'Season_encoded'</span>]Â =Â le.fit_transform(df[<span class="hljs-string">'Season'</span>])Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â å¯¹å­£åº¦è¿›è¡ŒLabelç¼–ç </span>
Â Â Â Â 
Â Â Â Â <span class="hljs-comment">#Â èŠ‚å‡æ—¥ç‰¹å¾</span>
Â Â Â Â df[<span class="hljs-string">'IsHoliday'</span>]Â =Â (df[<span class="hljs-string">'StateHoliday'</span>]Â !=Â <span class="hljs-string">'0'</span>).astype(<span class="hljs-built_in">int</span>)Â Â Â Â Â Â <span class="hljs-comment">#Â æ˜¯å¦ä¸ºèŠ‚å‡æ—¥</span>
Â Â Â Â 
Â Â Â Â <span class="hljs-comment">#Â ä¿ƒé”€å‘¨æœŸç‰¹å¾</span>
Â Â Â Â df[<span class="hljs-string">'IsPromoMonth'</span>]Â =Â ((df[<span class="hljs-string">'Month'</span>]Â %Â <span class="hljs-number">3</span>)Â ==Â <span class="hljs-number">0</span>).astype(<span class="hljs-built_in">int</span>)Â Â Â Â Â Â <span class="hljs-comment">#Â ä¿ƒé”€å‘¨æœŸç‰¹å¾</span>
Â Â Â Â 
Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"âœ…Â åˆ›å»ºäº†Â <span class="hljs-subst">{<span class="hljs-built_in">len</span>([colÂ <span class="hljs-keyword">for</span>Â colÂ <span class="hljs-keyword">in</span>Â df.columnsÂ <span class="hljs-keyword">if</span>Â colÂ <span class="hljs-keyword">not</span>Â <span class="hljs-keyword">in</span>Â [<span class="hljs-string">'Date'</span>,Â <span class="hljs-string">'Season'</span>]])}</span>Â ä¸ªæ—¶é—´ç‰¹å¾"</span>)
Â Â Â Â 
Â Â Â Â <span class="hljs-keyword">return</span>Â df

<span class="hljs-comment">#Â åº”ç”¨æ—¶é—´ç‰¹å¾å·¥ç¨‹</span>
train_dfÂ =Â create_time_features(train_df)
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/df5330805bd84e3bb90cd56955f1b73a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LqR5aSp5b695LiK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767685850&amp;x-signature=JCzDkT3JOoANE0vzFmnRD%2B2LF1w%3D" alt="" loading="lazy"/></p>
<h4 data-id="heading-17">2.3.2 æ»åç‰¹å¾å’Œæ»šåŠ¨ç»Ÿè®¡ç‰¹å¾</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span>Â <span class="hljs-title function_">create_lag_features</span>(<span class="hljs-params">df,Â store_id_col=<span class="hljs-string">'Store'</span>,Â date_col=<span class="hljs-string">'Date'</span>,Â target_col=<span class="hljs-string">'Sales'</span>,Â lags=[<span class="hljs-number">1</span>,Â <span class="hljs-number">7</span>,Â <span class="hljs-number">14</span>,Â <span class="hljs-number">30</span>]</span>):
Â Â Â Â <span class="hljs-string">"""
Â Â Â Â åˆ›å»ºæ»åç‰¹å¾å’Œæ»šåŠ¨ç»Ÿè®¡ç‰¹å¾
Â Â Â Â """</span>
Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">"\nğŸ“ŠÂ åˆ›å»ºæ»åç‰¹å¾å’Œæ»šåŠ¨ç»Ÿè®¡ç‰¹å¾..."</span>)
Â Â Â Â 
Â Â Â Â <span class="hljs-comment">#Â æŒ‰é—¨åº—å’Œæ—¥æœŸæ’åº</span>
Â Â Â Â dfÂ =Â df.sort_values([store_id_col,Â date_col])
Â Â Â Â 
Â Â Â Â <span class="hljs-comment">#Â åˆ›å»ºæ»åç‰¹å¾Â Â Â æŠŠâ€œåŒä¸€å®¶é—¨åº—â€çš„Â SalesÂ åˆ—æ•´ä½“å‘ä¸‹é”™ä½Â lagÂ è¡Œ</span>
Â Â Â Â <span class="hljs-keyword">for</span>Â lagÂ <span class="hljs-keyword">in</span>Â lags:
Â Â Â Â Â Â Â Â df[<span class="hljs-string">f'<span class="hljs-subst">{target_col}</span>_lag_<span class="hljs-subst">{lag}</span>'</span>]Â =Â df.groupby(store_id_col)[target_col].shift(lag)
Â Â Â Â Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"Â Â åˆ›å»ºæ»åç‰¹å¾:Â <span class="hljs-subst">{target_col}</span>_lag_<span class="hljs-subst">{lag}</span>"</span>)
Â Â Â Â 
Â Â Â Â <span class="hljs-comment">#Â åˆ›å»ºæ»šåŠ¨ç»Ÿè®¡ç‰¹å¾</span>
Â Â Â Â windowsÂ =Â [<span class="hljs-number">7</span>,Â <span class="hljs-number">14</span>,Â <span class="hljs-number">30</span>]
Â Â Â Â <span class="hljs-comment">#åœ¨åŒä¸€å®¶é—¨åº—å†…éƒ¨ï¼Œå¯¹Â SalesÂ åšâ€œæ»šåŠ¨å¹³å‡â€ï¼Œç„¶åæŠŠç»“æœå¹¿æ’­å›åŸè¡¨çš„æ¯ä¸€è¡Œâ€”â€”ä¹Ÿå°±æ˜¯æ„é€ Â â€œæœ€è¿‘Â NÂ å¤©çš„å¹³å‡é”€å”®é¢â€Â è¿™ä¸ªç‰¹å¾åˆ—</span>
Â Â Â Â <span class="hljs-keyword">for</span>Â windowÂ <span class="hljs-keyword">in</span>Â windows:
Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â æ»šåŠ¨å¹³å‡å€¼</span>
Â Â Â Â Â Â Â Â df[<span class="hljs-string">f'<span class="hljs-subst">{target_col}</span>_rolling_mean_<span class="hljs-subst">{window}</span>'</span>]Â =Â df.groupby(store_id_col)[target_col].transform(
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-keyword">lambda</span>Â x:Â x.rolling(window=window,Â min_periods=<span class="hljs-number">1</span>).mean()
Â Â Â Â Â Â Â Â )
Â Â Â Â Â Â Â Â 
Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â æ»šåŠ¨æ ‡å‡†å·®</span>
Â Â Â Â Â Â Â Â df[<span class="hljs-string">f'<span class="hljs-subst">{target_col}</span>_rolling_std_<span class="hljs-subst">{window}</span>'</span>]Â =Â df.groupby(store_id_col)[target_col].transform(
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-keyword">lambda</span>Â x:Â x.rolling(window=window,Â min_periods=<span class="hljs-number">1</span>).std()
Â Â Â Â Â Â Â Â )
Â Â Â Â Â Â Â Â 
Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â æ»šåŠ¨æœ€å°å€¼</span>
Â Â Â Â Â Â Â Â df[<span class="hljs-string">f'<span class="hljs-subst">{target_col}</span>_rolling_min_<span class="hljs-subst">{window}</span>'</span>]Â =Â df.groupby(store_id_col)[target_col].transform(
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-keyword">lambda</span>Â x:Â x.rolling(window=window,Â min_periods=<span class="hljs-number">1</span>).<span class="hljs-built_in">min</span>()
Â Â Â Â Â Â Â Â )
Â Â Â Â Â Â Â Â 
Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â æ»šåŠ¨æœ€å¤§å€¼</span>
Â Â Â Â Â Â Â Â df[<span class="hljs-string">f'<span class="hljs-subst">{target_col}</span>_rolling_max_<span class="hljs-subst">{window}</span>'</span>]Â =Â df.groupby(store_id_col)[target_col].transform(
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-keyword">lambda</span>Â x:Â x.rolling(window=window,Â min_periods=<span class="hljs-number">1</span>).<span class="hljs-built_in">max</span>()
Â Â Â Â Â Â Â Â )
Â Â Â Â Â Â Â Â 
Â Â Â Â Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"Â Â åˆ›å»ºÂ <span class="hljs-subst">{window}</span>Â å¤©æ»šåŠ¨ç»Ÿè®¡ç‰¹å¾"</span>)
Â Â Â Â 
Â Â Â Â <span class="hljs-comment">#Â åˆ›å»ºç‰¹å¾ä¹‹é—´çš„æ¯”ç‡</span>
Â Â Â Â <span class="hljs-keyword">if</span>Â <span class="hljs-string">'Customers'</span>Â <span class="hljs-keyword">in</span>Â df.columns:
Â Â Â Â Â Â Â Â df[<span class="hljs-string">'Sales_per_Customer'</span>]Â =Â df[<span class="hljs-string">'Sales'</span>]Â /Â (df[<span class="hljs-string">'Customers'</span>]Â +Â <span class="hljs-number">1</span>)Â Â <span class="hljs-comment">#Â é¿å…é™¤ä»¥0</span>
Â Â Â Â 
Â Â Â Â <span class="hljs-comment">#Â å¡«å……ç¼ºå¤±å€¼ï¼ˆç”±äºæ»åå’Œæ»šåŠ¨ç‰¹å¾å¯¼è‡´çš„ï¼‰</span>
Â Â Â Â lag_columnsÂ =Â [colÂ <span class="hljs-keyword">for</span>Â colÂ <span class="hljs-keyword">in</span>Â df.columnsÂ <span class="hljs-keyword">if</span>Â <span class="hljs-string">'lag'</span>Â <span class="hljs-keyword">in</span>Â colÂ <span class="hljs-keyword">or</span>Â <span class="hljs-string">'rolling'</span>Â <span class="hljs-keyword">in</span>Â col]
Â Â Â Â 
Â Â Â Â <span class="hljs-keyword">for</span>Â colÂ <span class="hljs-keyword">in</span>Â lag_columns:
Â Â Â Â Â Â Â Â <span class="hljs-keyword">if</span>Â colÂ <span class="hljs-keyword">in</span>Â df.columns:
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â ä½¿ç”¨å‰å‘å¡«å……</span>
Â Â Â Â Â Â Â Â Â Â Â Â df[col]Â =Â df.groupby(store_id_col)[col].transform(<span class="hljs-keyword">lambda</span>Â x:Â x.fillna(method=<span class="hljs-string">'ffill'</span>))
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â å¯¹äºä»ç„¶ç¼ºå¤±çš„å€¼ï¼Œä½¿ç”¨å‡å€¼å¡«å……</span>
Â Â Â Â Â Â Â Â Â Â Â Â df[col]Â =Â df[col].fillna(df[col].mean())
Â Â Â Â 
Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"âœ…Â åˆ›å»ºäº†Â <span class="hljs-subst">{<span class="hljs-built_in">len</span>(lag_columns)}</span>Â ä¸ªæ»åå’Œæ»šåŠ¨ç‰¹å¾"</span>)
Â Â Â Â 
Â Â Â Â <span class="hljs-keyword">return</span>Â df

<span class="hljs-comment">#Â åº”ç”¨æ»åç‰¹å¾å·¥ç¨‹</span>
train_dfÂ =Â create_lag_features(train_df)
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f860ecea929c4cefb87c3b4b6fbf6702~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LqR5aSp5b695LiK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767685850&amp;x-signature=Q6QNLCouUNbYEIr3o25MGZoFSeo%3D" alt="" loading="lazy"/></p>
<h4 data-id="heading-18">2.3.3 é—¨åº—ç‰¹å¾å·¥ç¨‹</h4>
<pre><code class="hljs language-ini" lang="ini">defÂ create_store_features(df,Â store_df):
Â Â Â Â """
Â Â Â Â åˆ›å»ºé—¨åº—ç›¸å…³ç‰¹å¾
Â Â Â Â """
Â Â Â Â print("\nğŸªÂ åˆ›å»ºé—¨åº—ç‰¹å¾...")
Â Â Â Â 
Â Â Â Â <span class="hljs-comment">#Â åˆå¹¶é—¨åº—ä¿¡æ¯</span>
Â Â Â Â <span class="hljs-attr">df</span>Â =Â df.merge(store_df,Â <span class="hljs-literal">on</span>=<span class="hljs-string">'Store'</span>,Â how=<span class="hljs-string">'left'</span>)
Â Â Â Â 
Â Â Â Â <span class="hljs-comment">#Â å¤„ç†ç¼ºå¤±å€¼</span>
Â Â Â Â df<span class="hljs-section">['CompetitionDistance']</span>.fillna(df<span class="hljs-section">['CompetitionDistance']</span>.median(),Â <span class="hljs-attr">inplace</span>=<span class="hljs-literal">True</span>)
Â Â Â Â 
Â Â Â Â <span class="hljs-comment">#Â ç«äº‰å¯¹æ‰‹ç‰¹å¾</span>
Â Â Â Â df<span class="hljs-section">['CompetitionOpenSinceMonth']</span>.fillna(0,Â <span class="hljs-attr">inplace</span>=<span class="hljs-literal">True</span>)
Â Â Â Â df<span class="hljs-section">['CompetitionOpenSinceYear']</span>.fillna(0,Â <span class="hljs-attr">inplace</span>=<span class="hljs-literal">True</span>)
Â Â Â Â 
Â Â Â Â <span class="hljs-comment">#Â è®¡ç®—ç«äº‰å¯¹æ‰‹å¼€ä¸šæ—¶é•¿ï¼ˆæœˆï¼‰</span>
Â Â Â Â <span class="hljs-attr">current_year</span>Â =Â df[<span class="hljs-string">'Year'</span>].max()
Â Â Â Â df<span class="hljs-section">['CompetitionOpenMonths']</span>Â =Â (current_yearÂ -Â df<span class="hljs-section">['CompetitionOpenSinceYear']</span>)Â *Â 12Â +Â \
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â (12Â -Â df<span class="hljs-section">['CompetitionOpenSinceMonth']</span>)
Â Â Â Â df<span class="hljs-section">['CompetitionOpenMonths']</span>Â =Â df<span class="hljs-section">['CompetitionOpenMonths']</span>.clip(<span class="hljs-attr">lower</span>=<span class="hljs-number">0</span>)
Â Â Â Â 
Â Â Â Â <span class="hljs-comment">#Â ä¿ƒé”€2ç‰¹å¾</span>
Â Â Â Â df<span class="hljs-section">['Promo2SinceWeek']</span>.fillna(0,Â <span class="hljs-attr">inplace</span>=<span class="hljs-literal">True</span>)
Â Â Â Â df<span class="hljs-section">['Promo2SinceYear']</span>.fillna(0,Â <span class="hljs-attr">inplace</span>=<span class="hljs-literal">True</span>)
Â Â Â Â 
Â Â Â Â <span class="hljs-comment">#Â è®¡ç®—ä¿ƒé”€2æŒç»­æ—¶é—´ï¼ˆå‘¨ï¼‰</span>
Â Â Â Â df<span class="hljs-section">['Promo2DurationWeeks']</span>Â =Â ((df<span class="hljs-section">['Year']</span>Â -Â df<span class="hljs-section">['Promo2SinceYear']</span>)Â *Â 52Â +Â 
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â (df<span class="hljs-section">['WeekOfYear']</span>Â -Â df<span class="hljs-section">['Promo2SinceWeek']</span>)).clip(<span class="hljs-attr">lower</span>=<span class="hljs-number">0</span>)
Â Â Â Â 
Â Â Â Â <span class="hljs-comment">#Â ä¿ƒé”€é—´éš”ç‰¹å¾</span>
Â Â Â Â df<span class="hljs-section">['PromoInterval']</span>.fillna('',Â <span class="hljs-attr">inplace</span>=<span class="hljs-literal">True</span>)
Â Â Â Â 
Â Â Â Â <span class="hljs-comment">#Â æ£€æŸ¥å½“å‰æœˆä»½æ˜¯å¦åœ¨ä¿ƒé”€é—´éš”ä¸­</span>
Â Â Â Â <span class="hljs-attr">month_mapping</span>Â =Â {<span class="hljs-string">'Jan'</span>:Â <span class="hljs-number">1</span>,Â <span class="hljs-string">'Feb'</span>:Â <span class="hljs-number">2</span>,Â <span class="hljs-string">'Mar'</span>:Â <span class="hljs-number">3</span>,Â <span class="hljs-string">'Apr'</span>:Â <span class="hljs-number">4</span>,Â <span class="hljs-string">'May'</span>:Â <span class="hljs-number">5</span>,Â <span class="hljs-string">'Jun'</span>:Â <span class="hljs-number">6</span>,
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â 'Jul':Â 7,Â 'Aug':Â 8,Â 'Sep':Â 9,Â 'Oct':Â 10,Â 'Nov':Â 11,Â 'Dec':Â 12}
Â Â Â Â 
Â Â Â Â defÂ is_promo_month(promo_interval,Â current_month):
Â Â Â Â Â Â Â Â ifÂ pd.isna(promo_interval)Â orÂ <span class="hljs-attr">promo_interval</span>Â ==Â <span class="hljs-string">''</span>:
Â Â Â Â Â Â Â Â Â Â Â Â returnÂ 0
Â Â Â Â Â Â Â Â <span class="hljs-attr">months</span>Â =Â [month_mapping.get(month.strip(),Â <span class="hljs-number">0</span>)Â forÂ monthÂ inÂ promo_interval.split(<span class="hljs-string">','</span>)]
Â Â Â Â Â Â Â Â returnÂ 1Â ifÂ current_monthÂ inÂ monthsÂ elseÂ 0
Â Â Â Â 
Â Â Â Â df<span class="hljs-section">['IsPromo2Month']</span>Â =Â df.apply(lambdaÂ row:Â is_promo_month(row<span class="hljs-section">['PromoInterval']</span>,Â row<span class="hljs-section">['Month']</span>),Â <span class="hljs-attr">axis</span>=<span class="hljs-number">1</span>)
Â Â Â Â 
Â Â Â Â <span class="hljs-comment">#Â é—¨åº—ç±»å‹ç¼–ç </span>
Â Â Â Â <span class="hljs-attr">store_type_mapping</span>Â =Â {<span class="hljs-string">'a'</span>:Â <span class="hljs-number">0</span>,Â <span class="hljs-string">'b'</span>:Â <span class="hljs-number">1</span>,Â <span class="hljs-string">'c'</span>:Â <span class="hljs-number">2</span>,Â <span class="hljs-string">'d'</span>:Â <span class="hljs-number">3</span>}
Â Â Â Â df<span class="hljs-section">['StoreType_encoded']</span>Â =Â df<span class="hljs-section">['StoreType']</span>.map(store_type_mapping)
Â Â Â Â 
Â Â Â Â <span class="hljs-comment">#Â å•†å“ç§ç±»ç¼–ç </span>
Â Â Â Â <span class="hljs-attr">assortment_mapping</span>Â =Â {<span class="hljs-string">'a'</span>:Â <span class="hljs-number">0</span>,Â <span class="hljs-string">'b'</span>:Â <span class="hljs-number">1</span>,Â <span class="hljs-string">'c'</span>:Â <span class="hljs-number">2</span>}
Â Â Â Â df<span class="hljs-section">['Assortment_encoded']</span>Â =Â df<span class="hljs-section">['Assortment']</span>.map(assortment_mapping)
Â Â Â Â 
Â Â Â Â <span class="hljs-comment">#Â é—¨åº—åˆ†ç»„ç‰¹å¾ï¼ˆåŸºäºé”€å”®è¡¨ç°ï¼‰</span>
Â Â Â Â <span class="hljs-attr">store_sales</span>Â =Â df.groupby(<span class="hljs-string">'Store'</span>)[<span class="hljs-string">'Sales'</span>].mean().reset_index()
Â Â Â Â store_sales<span class="hljs-section">['Store_Sales_Group']</span>Â =Â pd.qcut(store_sales<span class="hljs-section">['Sales']</span>,Â <span class="hljs-attr">q</span>=<span class="hljs-number">4</span>,Â labels=[<span class="hljs-string">'Low'</span>,Â <span class="hljs-string">'Medium'</span>,Â <span class="hljs-string">'High'</span>,Â <span class="hljs-string">'VeryÂ High'</span>])
Â Â Â Â 
Â Â Â Â <span class="hljs-attr">df</span>Â =Â df.merge(store_sales[[<span class="hljs-string">'Store'</span>,Â <span class="hljs-string">'Store_Sales_Group'</span>]],Â <span class="hljs-literal">on</span>=<span class="hljs-string">'Store'</span>,Â how=<span class="hljs-string">'left'</span>)
Â Â Â Â 
Â Â Â Â <span class="hljs-comment">#Â ç¼–ç é—¨åº—é”€å”®ç»„</span>
Â Â Â Â df<span class="hljs-section">['Store_Sales_Group_encoded']</span>Â =Â df<span class="hljs-section">['Store_Sales_Group']</span>.map({'Low':Â 0,Â 'Medium':Â 1,Â 'High':Â 2,Â 'VeryÂ High':Â 3})
Â Â Â Â 
Â Â Â Â print(f"âœ…Â åˆ›å»ºäº†é—¨åº—ç›¸å…³ç‰¹å¾")
Â Â Â Â 
Â Â Â Â returnÂ df

<span class="hljs-comment">#Â åº”ç”¨é—¨åº—ç‰¹å¾å·¥ç¨‹</span>
<span class="hljs-attr">train_df</span>Â =Â create_store_features(train_df,Â store)
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/eff0e751bf2d4284bb0e841674f1b008~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LqR5aSp5b695LiK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767685850&amp;x-signature=z0hCg05AIzaxNNYlu8vD7c3RABw%3D" alt="" loading="lazy"/></p>
<h4 data-id="heading-19">2.3.4 äº¤äº’ç‰¹å¾</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span>Â <span class="hljs-title function_">create_interaction_features</span>(<span class="hljs-params">df</span>):
Â Â Â Â <span class="hljs-string">"""
Â Â Â Â åˆ›å»ºäº¤äº’ç‰¹å¾
Â Â Â Â """</span>
Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">"\nğŸ¤Â åˆ›å»ºäº¤äº’ç‰¹å¾..."</span>)
Â Â Â Â 
Â Â Â Â <span class="hljs-comment">#Â ä¿ƒé”€ä¸æ˜ŸæœŸå‡ çš„äº¤äº’</span>
Â Â Â Â df[<span class="hljs-string">'Promo_DayOfWeek'</span>]Â =Â df[<span class="hljs-string">'Promo'</span>]Â *Â df[<span class="hljs-string">'DayOfWeek'</span>]
Â Â Â Â 
Â Â Â Â <span class="hljs-comment">#Â ä¿ƒé”€ä¸èŠ‚å‡æ—¥çš„äº¤äº’</span>
Â Â Â Â df[<span class="hljs-string">'Promo_IsHoliday'</span>]Â =Â df[<span class="hljs-string">'Promo'</span>]Â *Â df[<span class="hljs-string">'IsHoliday'</span>]
Â Â Â Â 
Â Â Â Â <span class="hljs-comment">#Â ä¿ƒé”€ä¸å‘¨æœ«çš„äº¤äº’</span>
Â Â Â Â df[<span class="hljs-string">'Promo_IsWeekend'</span>]Â =Â df[<span class="hljs-string">'Promo'</span>]Â *Â df[<span class="hljs-string">'IsWeekend'</span>]
Â Â Â Â 
Â Â Â Â <span class="hljs-comment">#Â é—¨åº—ç±»å‹ä¸ä¿ƒé”€çš„äº¤äº’</span>
Â Â Â Â df[<span class="hljs-string">'StoreType_Promo'</span>]Â =Â df[<span class="hljs-string">'StoreType_encoded'</span>]Â *Â df[<span class="hljs-string">'Promo'</span>]
Â Â Â Â 
Â Â Â Â <span class="hljs-comment">#Â å•†å“ç§ç±»ä¸ä¿ƒé”€çš„äº¤äº’</span>
Â Â Â Â df[<span class="hljs-string">'Assortment_Promo'</span>]Â =Â df[<span class="hljs-string">'Assortment_encoded'</span>]Â *Â df[<span class="hljs-string">'Promo'</span>]
Â Â Â Â 
Â Â Â Â <span class="hljs-comment">#Â æœˆä»½ä¸ä¿ƒé”€çš„äº¤äº’</span>
Â Â Â Â df[<span class="hljs-string">'Month_Promo'</span>]Â =Â df[<span class="hljs-string">'Month'</span>]Â *Â df[<span class="hljs-string">'Promo'</span>]
Â Â Â Â 
Â Â Â Â <span class="hljs-comment">#Â ç«äº‰å¯¹æ‰‹è·ç¦»ä¸ä¿ƒé”€çš„äº¤äº’</span>
Â Â Â Â df[<span class="hljs-string">'CompetitionDistance_Promo'</span>]Â =Â df[<span class="hljs-string">'CompetitionDistance'</span>]Â *Â df[<span class="hljs-string">'Promo'</span>]
Â Â Â Â 
Â Â Â Â <span class="hljs-comment">#Â é—¨åº—é”€å”®ç»„ä¸ä¿ƒé”€çš„äº¤äº’</span>
Â Â Â Â df[<span class="hljs-string">'StoreSalesGroup_Promo'</span>]Â =Â df[<span class="hljs-string">'Store_Sales_Group_encoded'</span>]Â *Â df[<span class="hljs-string">'Promo'</span>]
Â Â Â Â 
Â Â Â Â <span class="hljs-comment">#Â å­£èŠ‚æ€§ç‰¹å¾ä¸ä¿ƒé”€çš„äº¤äº’</span>
Â Â Â Â df[<span class="hljs-string">'Season_Promo'</span>]Â =Â df[<span class="hljs-string">'Season_encoded'</span>]Â *Â df[<span class="hljs-string">'Promo'</span>]
Â Â Â Â 
Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"âœ…Â åˆ›å»ºäº†Â <span class="hljs-subst">{<span class="hljs-built_in">len</span>([colÂ <span class="hljs-keyword">for</span>Â colÂ <span class="hljs-keyword">in</span>Â df.columnsÂ <span class="hljs-keyword">if</span>Â <span class="hljs-string">'_'</span>Â <span class="hljs-keyword">in</span>Â colÂ <span class="hljs-keyword">and</span>Â colÂ <span class="hljs-keyword">not</span>Â <span class="hljs-keyword">in</span>Â [<span class="hljs-string">'Sales_lag'</span>,Â <span class="hljs-string">'Sales_rolling'</span>]])}</span>Â ä¸ªäº¤äº’ç‰¹å¾"</span>)
Â Â Â Â 
Â Â Â Â <span class="hljs-keyword">return</span>Â df

<span class="hljs-comment">#Â åº”ç”¨äº¤äº’ç‰¹å¾å·¥ç¨‹</span>
train_dfÂ =Â create_interaction_features(train_df)

<span class="hljs-built_in">print</span>(<span class="hljs-string">f"\nğŸ‰Â ç‰¹å¾å·¥ç¨‹å®Œæˆ!"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"æœ€ç»ˆç‰¹å¾æ•°é‡:Â <span class="hljs-subst">{<span class="hljs-built_in">len</span>(train_df.columns)}</span>"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"ç‰¹å¾åˆ—è¡¨:"</span>)
<span class="hljs-keyword">for</span>Â i,Â colÂ <span class="hljs-keyword">in</span>Â <span class="hljs-built_in">enumerate</span>(train_df.columns.tolist(),Â <span class="hljs-number">1</span>):
Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"<span class="hljs-subst">{i:3d}</span>.Â <span class="hljs-subst">{col}</span>"</span>)
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5ae2e2c599ee471e8734352ab956e324~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LqR5aSp5b695LiK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767685850&amp;x-signature=usfrZppWlv8MxcbrzwAvhRZxA4c%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-20">2.4 æ¨¡å‹è®­ç»ƒä¸è¯„ä¼°</h3>
<h4 data-id="heading-21">2.4.1 æ•°æ®å‡†å¤‡</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span>Â <span class="hljs-title function_">prepare_model_data</span>(<span class="hljs-params">df,Â test_size=<span class="hljs-number">0.2</span></span>):
Â Â Â Â <span class="hljs-string">"""
Â Â Â Â å‡†å¤‡æ¨¡å‹æ•°æ®
Â Â Â Â """</span>
Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">"\nğŸ“ŠÂ å‡†å¤‡æ¨¡å‹æ•°æ®..."</span>)
Â Â Â Â 
Â Â Â Â <span class="hljs-comment">#Â é€‰æ‹©ç‰¹å¾åˆ—ï¼ˆæ’é™¤ä¸éœ€è¦çš„åˆ—ï¼‰</span>
Â Â Â Â exclude_columnsÂ =Â [<span class="hljs-string">'Date'</span>,Â <span class="hljs-string">'StateHoliday'</span>,Â <span class="hljs-string">'PromoInterval'</span>,Â <span class="hljs-string">'Season'</span>,Â <span class="hljs-string">'Store_Sales_Group'</span>]
Â Â Â Â 
Â Â Â Â <span class="hljs-comment">#Â è‡ªåŠ¨è¯†åˆ«æ•°å€¼ç‰¹å¾</span>
Â Â Â Â feature_columnsÂ =Â [colÂ <span class="hljs-keyword">for</span>Â colÂ <span class="hljs-keyword">in</span>Â df.columnsÂ <span class="hljs-keyword">if</span>Â colÂ <span class="hljs-keyword">not</span>Â <span class="hljs-keyword">in</span>Â exclude_columnsÂ +Â [<span class="hljs-string">'Sales'</span>,Â <span class="hljs-string">'Customers'</span>]]
Â Â Â Â 
Â Â Â Â <span class="hljs-comment">#Â ç¡®ä¿æ‰€æœ‰ç‰¹å¾éƒ½æ˜¯æ•°å€¼ç±»å‹</span>
Â Â Â Â <span class="hljs-keyword">for</span>Â colÂ <span class="hljs-keyword">in</span>Â feature_columns:
Â Â Â Â Â Â Â Â <span class="hljs-keyword">if</span>Â df[col].dtypeÂ ==Â <span class="hljs-string">'object'</span>:
Â Â Â Â Â Â Â Â Â Â Â Â leÂ =Â LabelEncoder()
Â Â Â Â Â Â Â Â Â Â Â Â df[col]Â =Â le.fit_transform(df[col].astype(<span class="hljs-built_in">str</span>))
Â Â Â Â 
Â Â Â Â <span class="hljs-comment">#Â å¤„ç†ç¼ºå¤±å€¼</span>
Â Â Â Â df[feature_columns]Â =Â df[feature_columns].fillna(<span class="hljs-number">0</span>)
Â Â Â Â 
Â Â Â Â <span class="hljs-comment">#Â å®šä¹‰ç‰¹å¾å’Œç›®æ ‡</span>
Â Â Â Â XÂ =Â df[feature_columns]
Â Â Â Â yÂ =Â df[<span class="hljs-string">'Sales'</span>]
Â Â Â Â 
Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ç‰¹å¾æ•°é‡:Â <span class="hljs-subst">{X.shape[<span class="hljs-number">1</span>]}</span>"</span>)
Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ ·æœ¬æ•°é‡:Â <span class="hljs-subst">{X.shape[<span class="hljs-number">0</span>]}</span>"</span>)
Â Â Â Â 
Â Â Â Â <span class="hljs-comment">#Â æŒ‰æ—¶é—´åˆ’åˆ†è®­ç»ƒé›†å’Œæµ‹è¯•é›†</span>
Â Â Â Â split_dateÂ =Â df[<span class="hljs-string">'Date'</span>].quantile(<span class="hljs-number">1</span>Â -Â test_size)
Â Â Â Â 
Â Â Â Â X_trainÂ =Â X[df[<span class="hljs-string">'Date'</span>]Â &lt;=Â split_date]
Â Â Â Â X_testÂ =Â X[df[<span class="hljs-string">'Date'</span>]Â &gt;Â split_date]
Â Â Â Â y_trainÂ =Â y[df[<span class="hljs-string">'Date'</span>]Â &lt;=Â split_date]
Â Â Â Â y_testÂ =Â y[df[<span class="hljs-string">'Date'</span>]Â &gt;Â split_date]
Â Â Â Â 
Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"\nğŸ“…Â æ•°æ®åˆ’åˆ†:"</span>)
Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"è®­ç»ƒé›†:Â <span class="hljs-subst">{X_train.shape[<span class="hljs-number">0</span>]:,}</span>Â æ¡è®°å½•Â (<span class="hljs-subst">{X_train.shape[<span class="hljs-number">0</span>]/<span class="hljs-built_in">len</span>(df)*<span class="hljs-number">100</span>:<span class="hljs-number">.1</span>f}</span>%)"</span>)
Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æµ‹è¯•é›†:Â <span class="hljs-subst">{X_test.shape[<span class="hljs-number">0</span>]:,}</span>Â æ¡è®°å½•Â (<span class="hljs-subst">{X_test.shape[<span class="hljs-number">0</span>]/<span class="hljs-built_in">len</span>(df)*<span class="hljs-number">100</span>:<span class="hljs-number">.1</span>f}</span>%)"</span>)
Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"è®­ç»ƒé›†æ—¶é—´èŒƒå›´:Â <span class="hljs-subst">{df[df[<span class="hljs-string">'Date'</span>]Â &lt;=Â split_date][<span class="hljs-string">'Date'</span>].<span class="hljs-built_in">min</span>()}</span>Â åˆ°Â <span class="hljs-subst">{df[df[<span class="hljs-string">'Date'</span>]Â &lt;=Â split_date][<span class="hljs-string">'Date'</span>].<span class="hljs-built_in">max</span>()}</span>"</span>)
Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æµ‹è¯•é›†æ—¶é—´èŒƒå›´:Â <span class="hljs-subst">{df[df[<span class="hljs-string">'Date'</span>]Â &gt;Â split_date][<span class="hljs-string">'Date'</span>].<span class="hljs-built_in">min</span>()}</span>Â åˆ°Â <span class="hljs-subst">{df[df[<span class="hljs-string">'Date'</span>]Â &gt;Â split_date][<span class="hljs-string">'Date'</span>].<span class="hljs-built_in">max</span>()}</span>"</span>)
Â Â Â Â 
Â Â Â Â <span class="hljs-keyword">return</span>Â X_train,Â X_test,Â y_train,Â y_test,Â feature_columns

<span class="hljs-comment">#Â å‡†å¤‡æ¨¡å‹æ•°æ®</span>
X_train,Â X_test,Â y_train,Â y_test,Â feature_columnsÂ =Â prepare_model_data(train_df)
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6a5a524c7d914b0192a20a49371c9699~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LqR5aSp5b695LiK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767685850&amp;x-signature=qgQfLaVr%2FyR%2FchPxTq8470pEvnE%3D" alt="" loading="lazy"/></p>
<h4 data-id="heading-22">2.4.2 XGBoostæ¨¡å‹è®­ç»ƒ</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span>Â <span class="hljs-title function_">train_xgboost_model</span>(<span class="hljs-params">X_train,Â y_train,Â X_test,Â y_test</span>):
Â Â Â Â <span class="hljs-string">"""
Â Â Â Â è®­ç»ƒXGBoostæ¨¡å‹
Â Â Â Â """</span>
Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">"\nğŸš€Â è®­ç»ƒXGBoostæ¨¡å‹..."</span>)
Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">"="</span>Â *Â <span class="hljs-number">60</span>)
Â Â Â Â 
Â Â Â Â <span class="hljs-comment">#Â åˆ›å»ºDMatrix</span>
Â Â Â Â dtrainÂ =Â xgb.DMatrix(X_train,Â label=y_train)
Â Â Â Â dtestÂ =Â xgb.DMatrix(X_test,Â label=y_test)
Â Â Â Â 
Â Â Â Â <span class="hljs-comment">#Â è®¾ç½®XGBoostå‚æ•°</span>
Â Â Â Â paramsÂ =Â {
Â Â Â Â Â Â Â Â <span class="hljs-string">'objective'</span>:Â <span class="hljs-string">'reg:squarederror'</span>,
Â Â Â Â Â Â Â Â <span class="hljs-string">'eval_metric'</span>:Â <span class="hljs-string">'rmse'</span>,
Â Â Â Â Â Â Â Â <span class="hljs-string">'eta'</span>:Â <span class="hljs-number">0.05</span>,Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â å­¦ä¹ ç‡</span>
Â Â Â Â Â Â Â Â <span class="hljs-string">'max_depth'</span>:Â <span class="hljs-number">8</span>,Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â æ ‘çš„æœ€å¤§æ·±åº¦</span>
Â Â Â Â Â Â Â Â <span class="hljs-string">'min_child_weight'</span>:Â <span class="hljs-number">5</span>,Â <span class="hljs-comment">#Â æœ€å°å¶å­èŠ‚ç‚¹æ ·æœ¬æƒé‡å’Œ</span>
Â Â Â Â Â Â Â Â <span class="hljs-string">'subsample'</span>:Â <span class="hljs-number">0.8</span>,Â Â Â Â Â Â <span class="hljs-comment">#Â è®­ç»ƒæ ·æœ¬é‡‡æ ·æ¯”ä¾‹</span>
Â Â Â Â Â Â Â Â <span class="hljs-string">'colsample_bytree'</span>:Â <span class="hljs-number">0.8</span>,Â <span class="hljs-comment">#Â ç‰¹å¾é‡‡æ ·æ¯”ä¾‹</span>
Â Â Â Â Â Â Â Â <span class="hljs-string">'alpha'</span>:Â <span class="hljs-number">0.1</span>,Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â L1æ­£åˆ™åŒ–</span>
Â Â Â Â Â Â Â Â <span class="hljs-string">'lambda'</span>:Â <span class="hljs-number">1.0</span>,Â Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â L2æ­£åˆ™åŒ–</span>
Â Â Â Â Â Â Â Â <span class="hljs-string">'seed'</span>:Â <span class="hljs-number">42</span>,
Â Â Â Â Â Â Â Â <span class="hljs-string">'n_jobs'</span>:Â -<span class="hljs-number">1</span>
Â Â Â Â }
Â Â Â Â 
Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">"æ¨¡å‹å‚æ•°:"</span>)
Â Â Â Â <span class="hljs-keyword">for</span>Â key,Â valueÂ <span class="hljs-keyword">in</span>Â params.items():
Â Â Â Â Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"Â Â <span class="hljs-subst">{key}</span>:Â <span class="hljs-subst">{value}</span>"</span>)
Â Â Â Â 
Â Â Â Â <span class="hljs-comment">#Â è®­ç»ƒæ¨¡å‹</span>
Â Â Â Â num_roundÂ =Â <span class="hljs-number">1000</span>
Â Â Â Â watchlistÂ =Â [(dtrain,Â <span class="hljs-string">'train'</span>),Â (dtest,Â <span class="hljs-string">'eval'</span>)]
Â Â Â Â 
Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"\nâ³Â å¼€å§‹è®­ç»ƒï¼Œè¿­ä»£æ¬¡æ•°:Â <span class="hljs-subst">{num_round}</span>"</span>)
Â Â Â Â modelÂ =Â xgb.train(params,Â dtrain,Â num_round,Â watchlist,Â 
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â early_stopping_rounds=<span class="hljs-number">50</span>,Â verbose_eval=<span class="hljs-number">100</span>)
Â Â Â Â 
Â Â Â Â <span class="hljs-comment">#Â é¢„æµ‹</span>
Â Â Â Â y_predÂ =Â model.predict(dtest)
Â Â Â Â 
Â Â Â Â <span class="hljs-comment">#Â è®¡ç®—è¯„ä¼°æŒ‡æ ‡</span>
Â Â Â Â rmseÂ =Â np.sqrt(mean_squared_error(y_test,Â y_pred))
Â Â Â Â maeÂ =Â mean_absolute_error(y_test,Â y_pred)
Â Â Â Â r2Â =Â r2_score(y_test,Â y_pred)
Â Â Â Â rmspe_valÂ =Â rmspe(y_test.values,Â y_pred)
Â Â Â Â 
Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"\nğŸ¯Â æ¨¡å‹è¯„ä¼°ç»“æœ:"</span>)
Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">"-"</span>Â *Â <span class="hljs-number">50</span>)
Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"RMSEÂ (å‡æ–¹æ ¹è¯¯å·®):Â <span class="hljs-subst">{rmse:<span class="hljs-number">.2</span>f}</span>"</span>)
Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"MAEÂ (å¹³å‡ç»å¯¹è¯¯å·®):Â <span class="hljs-subst">{mae:<span class="hljs-number">.2</span>f}</span>"</span>)
Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"RÂ²Â ScoreÂ (å†³å®šç³»æ•°):Â <span class="hljs-subst">{r2:<span class="hljs-number">.4</span>f}</span>"</span>)
Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"RMSPEÂ (å‡æ–¹æ ¹ç™¾åˆ†æ¯”è¯¯å·®):Â <span class="hljs-subst">{rmspe_val:<span class="hljs-number">.4</span>f}</span>"</span>)
Â Â Â Â 
Â Â Â Â <span class="hljs-comment">#Â ç‰¹å¾é‡è¦æ€§åˆ†æ</span>
Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">"\nğŸ”‘Â ç‰¹å¾é‡è¦æ€§åˆ†æÂ (TopÂ 20):"</span>)
Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">"-"</span>Â *Â <span class="hljs-number">50</span>)
Â Â Â Â 
Â Â Â Â importanceÂ =Â model.get_score(importance_type=<span class="hljs-string">'weight'</span>)
Â Â Â Â importance_dfÂ =Â pd.DataFrame({
Â Â Â Â Â Â Â Â <span class="hljs-string">'feature'</span>:Â <span class="hljs-built_in">list</span>(importance.keys()),
Â Â Â Â Â Â Â Â <span class="hljs-string">'importance'</span>:Â <span class="hljs-built_in">list</span>(importance.values())
Â Â Â Â }).sort_values(<span class="hljs-string">'importance'</span>,Â ascending=<span class="hljs-literal">False</span>)
Â Â Â Â 
Â Â Â Â <span class="hljs-keyword">for</span>Â i,Â rowÂ <span class="hljs-keyword">in</span>Â importance_df.head(<span class="hljs-number">20</span>).iterrows():
Â Â Â Â Â Â Â Â feature_nameÂ =Â row[<span class="hljs-string">'feature'</span>]
Â Â Â Â Â Â Â Â importance_valÂ =Â row[<span class="hljs-string">'importance'</span>]
Â Â Â Â Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"<span class="hljs-subst">{i+<span class="hljs-number">1</span>:2d}</span>.Â <span class="hljs-subst">{feature_name:&lt;<span class="hljs-number">30</span>}</span>Â <span class="hljs-subst">{importance_val:&gt;<span class="hljs-number">8</span>}</span>"</span>)
Â Â Â Â 
Â Â Â Â <span class="hljs-keyword">return</span>Â model,Â y_pred,Â importance_df

<span class="hljs-comment">#Â è®­ç»ƒXGBoostæ¨¡å‹</span>
xgb_model,Â xgb_pred,Â importance_dfÂ =Â train_xgboost_model(X_train,Â y_train,Â X_test,Â y_test)
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/44fb50f90f194544995ae7163bca5800~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LqR5aSp5b695LiK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767685850&amp;x-signature=kLA2kHpbW%2Fs0CCYQXN%2FF4PCx0pc%3D" alt="" loading="lazy"/></p>
<h4 data-id="heading-23">2.4.3 LightGBMæ¨¡å‹è®­ç»ƒ</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span>Â <span class="hljs-title function_">train_lightgbm_model</span>(<span class="hljs-params">X_train,Â y_train,Â X_test,Â y_test</span>):
Â Â Â Â <span class="hljs-string">"""
Â Â Â Â è®­ç»ƒLightGBMæ¨¡å‹
Â Â Â Â """</span>
Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">"\nğŸ’¡Â è®­ç»ƒLightGBMæ¨¡å‹..."</span>)
Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">"="</span>Â *Â <span class="hljs-number">60</span>)
Â Â Â Â 
Â Â Â Â <span class="hljs-comment">#Â åˆ›å»ºæ•°æ®é›†</span>
Â Â Â Â train_dataÂ =Â lgb.Dataset(X_train,Â label=y_train)
Â Â Â Â test_dataÂ =Â lgb.Dataset(X_test,Â label=y_test,Â reference=train_data)
Â Â Â Â 
Â Â Â Â <span class="hljs-comment">#Â è®¾ç½®LightGBMå‚æ•°</span>
Â Â Â Â paramsÂ =Â {
Â Â Â Â Â Â Â Â <span class="hljs-string">'objective'</span>:Â <span class="hljs-string">'regression'</span>,
Â Â Â Â Â Â Â Â <span class="hljs-string">'metric'</span>:Â <span class="hljs-string">'rmse'</span>,
Â Â Â Â Â Â Â Â <span class="hljs-string">'boosting_type'</span>:Â <span class="hljs-string">'gbdt'</span>,
Â Â Â Â Â Â Â Â <span class="hljs-string">'num_leaves'</span>:Â <span class="hljs-number">31</span>,
Â Â Â Â Â Â Â Â <span class="hljs-string">'learning_rate'</span>:Â <span class="hljs-number">0.05</span>,
Â Â Â Â Â Â Â Â <span class="hljs-string">'feature_fraction'</span>:Â <span class="hljs-number">0.8</span>,
Â Â Â Â Â Â Â Â <span class="hljs-string">'bagging_fraction'</span>:Â <span class="hljs-number">0.8</span>,
Â Â Â Â Â Â Â Â <span class="hljs-string">'bagging_freq'</span>:Â <span class="hljs-number">5</span>,
Â Â Â Â Â Â Â Â <span class="hljs-string">'verbose'</span>:Â -<span class="hljs-number">1</span>,
Â Â Â Â Â Â Â Â <span class="hljs-string">'seed'</span>:Â <span class="hljs-number">42</span>,
Â Â Â Â Â Â Â Â <span class="hljs-string">'num_threads'</span>:Â -<span class="hljs-number">1</span>
Â Â Â Â }
Â Â Â Â 
Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">"æ¨¡å‹å‚æ•°:"</span>)
Â Â Â Â <span class="hljs-keyword">for</span>Â key,Â valueÂ <span class="hljs-keyword">in</span>Â params.items():
Â Â Â Â Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"Â Â <span class="hljs-subst">{key}</span>:Â <span class="hljs-subst">{value}</span>"</span>)
Â Â Â Â 
Â Â Â Â <span class="hljs-comment">#Â è®­ç»ƒæ¨¡å‹</span>
Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">"\nâ³Â å¼€å§‹è®­ç»ƒ..."</span>)
Â Â Â Â lgb_modelÂ =Â lgb.train(params,
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â train_data,
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â valid_sets=[test_data],
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â num_boost_round=<span class="hljs-number">1000</span>,
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â early_stopping_rounds=<span class="hljs-number">50</span>,
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â verbose_eval=<span class="hljs-number">100</span>)
Â Â Â Â 
Â Â Â Â <span class="hljs-comment">#Â é¢„æµ‹</span>
Â Â Â Â lgb_predÂ =Â lgb_model.predict(X_test,Â num_iteration=lgb_model.best_iteration)
Â Â Â Â 
Â Â Â Â <span class="hljs-comment">#Â è®¡ç®—è¯„ä¼°æŒ‡æ ‡</span>
Â Â Â Â rmseÂ =Â np.sqrt(mean_squared_error(y_test,Â lgb_pred))
Â Â Â Â maeÂ =Â mean_absolute_error(y_test,Â lgb_pred)
Â Â Â Â r2Â =Â r2_score(y_test,Â lgb_pred)
Â Â Â Â rmspe_valÂ =Â rmspe(y_test.values,Â lgb_pred)
Â Â Â Â 
Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"\nğŸ¯Â LightGBMæ¨¡å‹è¯„ä¼°ç»“æœ:"</span>)
Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">"-"</span>Â *Â <span class="hljs-number">50</span>)
Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"RMSEÂ (å‡æ–¹æ ¹è¯¯å·®):Â <span class="hljs-subst">{rmse:<span class="hljs-number">.2</span>f}</span>"</span>)
Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"MAEÂ (å¹³å‡ç»å¯¹è¯¯å·®):Â <span class="hljs-subst">{mae:<span class="hljs-number">.2</span>f}</span>"</span>)
Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"RÂ²Â ScoreÂ (å†³å®šç³»æ•°):Â <span class="hljs-subst">{r2:<span class="hljs-number">.4</span>f}</span>"</span>)
Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"RMSPEÂ (å‡æ–¹æ ¹ç™¾åˆ†æ¯”è¯¯å·®):Â <span class="hljs-subst">{rmspe_val:<span class="hljs-number">.4</span>f}</span>"</span>)
Â Â Â Â 
Â Â Â Â <span class="hljs-comment">#Â ç‰¹å¾é‡è¦æ€§åˆ†æ</span>
Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">"\nğŸ”‘Â LightGBMç‰¹å¾é‡è¦æ€§åˆ†æÂ (TopÂ 20):"</span>)
Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">"-"</span>Â *Â <span class="hljs-number">50</span>)
Â Â Â Â 
Â Â Â Â importanceÂ =Â lgb_model.feature_importance(importance_type=<span class="hljs-string">'gain'</span>)
Â Â Â Â feature_namesÂ =Â X_train.columns.tolist()
Â Â Â Â 
Â Â Â Â importance_dfÂ =Â pd.DataFrame({
Â Â Â Â Â Â Â Â <span class="hljs-string">'feature'</span>:Â feature_names,
Â Â Â Â Â Â Â Â <span class="hljs-string">'importance'</span>:Â importance
Â Â Â Â }).sort_values(<span class="hljs-string">'importance'</span>,Â ascending=<span class="hljs-literal">False</span>)
Â Â Â Â 
Â Â Â Â <span class="hljs-keyword">for</span>Â i,Â rowÂ <span class="hljs-keyword">in</span>Â importance_df.head(<span class="hljs-number">20</span>).iterrows():
Â Â Â Â Â Â Â Â feature_nameÂ =Â row[<span class="hljs-string">'feature'</span>]
Â Â Â Â Â Â Â Â importance_valÂ =Â row[<span class="hljs-string">'importance'</span>]
Â Â Â Â Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"<span class="hljs-subst">{i+<span class="hljs-number">1</span>:2d}</span>.Â <span class="hljs-subst">{feature_name:&lt;<span class="hljs-number">30</span>}</span>Â <span class="hljs-subst">{importance_val:&gt;<span class="hljs-number">8.0</span>f}</span>"</span>)
Â Â Â Â 
Â Â Â Â <span class="hljs-keyword">return</span>Â lgb_model,Â lgb_pred,Â importance_df

<span class="hljs-comment">#Â è®­ç»ƒLightGBMæ¨¡å‹</span>
lgb_model,Â lgb_pred,Â lgb_importance_dfÂ =Â train_lightgbm_model(X_train,Â y_train,Â X_test,Â y_test)
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e3f59f14a23f4730ace15c0fa5b858bf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LqR5aSp5b695LiK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767685850&amp;x-signature=Co3o0a6ZR0YEoCu0TOZ068UpgW4%3D" alt="" loading="lazy"/></p>
<h4 data-id="heading-24">2.4.4 æ¨¡å‹é›†æˆ</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span>Â <span class="hljs-title function_">ensemble_models</span>(<span class="hljs-params">predictions_list,Â weights=<span class="hljs-literal">None</span></span>):
Â Â Â Â <span class="hljs-string">"""
Â Â Â Â æ¨¡å‹é›†æˆ
Â Â Â Â """</span>
Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">"\nğŸ¤Â æ¨¡å‹é›†æˆ..."</span>)
Â Â Â Â 
Â Â Â Â <span class="hljs-keyword">if</span>Â weightsÂ <span class="hljs-keyword">is</span>Â <span class="hljs-literal">None</span>:
Â Â Â Â Â Â Â Â weightsÂ =Â [<span class="hljs-number">1.0</span>Â /Â <span class="hljs-built_in">len</span>(predictions_list)]Â *Â <span class="hljs-built_in">len</span>(predictions_list)
Â Â Â Â 
Â Â Â Â <span class="hljs-comment">#Â åŠ æƒå¹³å‡</span>
Â Â Â Â ensemble_predÂ =Â np.zeros_like(predictions_list[<span class="hljs-number">0</span>])
Â Â Â Â <span class="hljs-keyword">for</span>Â pred,Â weightÂ <span class="hljs-keyword">in</span>Â <span class="hljs-built_in">zip</span>(predictions_list,Â weights):
Â Â Â Â Â Â Â Â ensemble_predÂ +=Â predÂ *Â weight
Â Â Â Â 
Â Â Â Â <span class="hljs-keyword">return</span>Â ensemble_pred

<span class="hljs-comment">#Â é›†æˆXGBoostå’ŒLightGBMçš„é¢„æµ‹ç»“æœ</span>
ensemble_predÂ =Â ensemble_models([xgb_pred,Â lgb_pred],Â weights=[<span class="hljs-number">0.6</span>,Â <span class="hljs-number">0.4</span>])

<span class="hljs-comment">#Â è¯„ä¼°é›†æˆæ¨¡å‹</span>
rmseÂ =Â np.sqrt(mean_squared_error(y_test,Â ensemble_pred))
maeÂ =Â mean_absolute_error(y_test,Â ensemble_pred)
r2Â =Â r2_score(y_test,Â ensemble_pred)
rmspe_valÂ =Â rmspe(y_test.values,Â ensemble_pred)

<span class="hljs-built_in">print</span>(<span class="hljs-string">f"\nğŸ¯Â é›†æˆæ¨¡å‹è¯„ä¼°ç»“æœ:"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"-"</span>Â *Â <span class="hljs-number">50</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"RMSEÂ (å‡æ–¹æ ¹è¯¯å·®):Â <span class="hljs-subst">{rmse:<span class="hljs-number">.2</span>f}</span>"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"MAEÂ (å¹³å‡ç»å¯¹è¯¯å·®):Â <span class="hljs-subst">{mae:<span class="hljs-number">.2</span>f}</span>"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"RÂ²Â ScoreÂ (å†³å®šç³»æ•°):Â <span class="hljs-subst">{r2:<span class="hljs-number">.4</span>f}</span>"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"RMSPEÂ (å‡æ–¹æ ¹ç™¾åˆ†æ¯”è¯¯å·®):Â <span class="hljs-subst">{rmspe_val:<span class="hljs-number">.4</span>f}</span>"</span>)

<span class="hljs-comment">#Â æ¨¡å‹æ€§èƒ½å¯¹æ¯”</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"\nğŸ“ŠÂ æ¨¡å‹æ€§èƒ½å¯¹æ¯”:"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"-"</span>Â *Â <span class="hljs-number">50</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"<span class="hljs-subst">{<span class="hljs-string">'æ¨¡å‹'</span>:&lt;<span class="hljs-number">15</span>}</span>Â <span class="hljs-subst">{<span class="hljs-string">'RMSE'</span>:&lt;<span class="hljs-number">10</span>}</span>Â <span class="hljs-subst">{<span class="hljs-string">'MAE'</span>:&lt;<span class="hljs-number">10</span>}</span>Â <span class="hljs-subst">{<span class="hljs-string">'RÂ²'</span>:&lt;<span class="hljs-number">10</span>}</span>Â <span class="hljs-subst">{<span class="hljs-string">'RMSPE'</span>:&lt;<span class="hljs-number">10</span>}</span>"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"-"</span>Â *Â <span class="hljs-number">50</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"<span class="hljs-subst">{<span class="hljs-string">'XGBoost'</span>:&lt;<span class="hljs-number">15</span>}</span>Â <span class="hljs-subst">{np.sqrt(mean_squared_error(y_test,Â xgb_pred)):&lt;<span class="hljs-number">10.2</span>f}</span>Â "</span>
Â Â Â Â Â Â <span class="hljs-string">f"<span class="hljs-subst">{mean_absolute_error(y_test,Â xgb_pred):&lt;<span class="hljs-number">10.2</span>f}</span>Â "</span>
Â Â Â Â Â Â <span class="hljs-string">f"<span class="hljs-subst">{r2_score(y_test,Â xgb_pred):&lt;<span class="hljs-number">10.4</span>f}</span>Â "</span>
Â Â Â Â Â Â <span class="hljs-string">f"<span class="hljs-subst">{rmspe(y_test.values,Â xgb_pred):&lt;<span class="hljs-number">10.4</span>f}</span>"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"<span class="hljs-subst">{<span class="hljs-string">'LightGBM'</span>:&lt;<span class="hljs-number">15</span>}</span>Â <span class="hljs-subst">{np.sqrt(mean_squared_error(y_test,Â lgb_pred)):&lt;<span class="hljs-number">10.2</span>f}</span>Â "</span>
Â Â Â Â Â Â <span class="hljs-string">f"<span class="hljs-subst">{mean_absolute_error(y_test,Â lgb_pred):&lt;<span class="hljs-number">10.2</span>f}</span>Â "</span>
Â Â Â Â Â Â <span class="hljs-string">f"<span class="hljs-subst">{r2_score(y_test,Â lgb_pred):&lt;<span class="hljs-number">10.4</span>f}</span>Â "</span>
Â Â Â Â Â Â <span class="hljs-string">f"<span class="hljs-subst">{rmspe(y_test.values,Â lgb_pred):&lt;<span class="hljs-number">10.4</span>f}</span>"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"<span class="hljs-subst">{<span class="hljs-string">'é›†æˆæ¨¡å‹'</span>:&lt;<span class="hljs-number">15</span>}</span>Â <span class="hljs-subst">{rmse:&lt;<span class="hljs-number">10.2</span>f}</span>Â <span class="hljs-subst">{mae:&lt;<span class="hljs-number">10.2</span>f}</span>Â <span class="hljs-subst">{r2:&lt;<span class="hljs-number">10.4</span>f}</span>Â <span class="hljs-subst">{rmspe_val:&lt;<span class="hljs-number">10.4</span>f}</span>"</span>)
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a267d94eceb34e6ba0796b64f0c5de74~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LqR5aSp5b695LiK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767685850&amp;x-signature=Mn37EWojdo5HwngTetl%2BA7KKLKc%3D" alt="" loading="lazy"/></p>
<h4 data-id="heading-25">2.4.5 æ¨¡å‹æ€§èƒ½å¯è§†åŒ–</h4>
<pre><code class="hljs language-ini" lang="ini">defÂ visualize_model_performance(y_true,Â y_pred,Â <span class="hljs-attr">model_name</span>=<span class="hljs-string">"æ¨¡å‹"</span>):
Â Â Â Â """
Â Â Â Â å¯è§†åŒ–æ¨¡å‹æ€§èƒ½
Â Â Â Â """
Â Â Â Â print(f"\nğŸ“ˆÂ {model_name}æ€§èƒ½å¯è§†åŒ–")
Â Â Â Â 
Â Â Â Â fig,Â <span class="hljs-attr">axes</span>Â =Â plt.subplots(<span class="hljs-number">2</span>,Â <span class="hljs-number">2</span>,Â figsize=(<span class="hljs-number">14</span>,Â <span class="hljs-number">10</span>))
Â Â Â Â 
Â Â Â Â <span class="hljs-comment">#Â 1.Â é¢„æµ‹å€¼Â vsÂ çœŸå®å€¼æ•£ç‚¹å›¾</span>
Â Â Â Â axes<span class="hljs-section">[0,Â 0]</span>.scatter(y_true,Â y_pred,Â <span class="hljs-attr">alpha</span>=<span class="hljs-number">0.3</span>,Â color=<span class="hljs-string">'#3498db'</span>)
Â Â Â Â axes<span class="hljs-section">[0,Â 0]</span>.plot(<span class="hljs-section">[y_true.min(),Â y_true.max()]</span>,Â <span class="hljs-section">[y_true.min(),Â y_true.max()]</span>,Â 
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â 'r--',Â <span class="hljs-attr">linewidth</span>=<span class="hljs-number">2</span>,Â label=<span class="hljs-string">'å®Œç¾é¢„æµ‹çº¿'</span>)
Â Â Â Â axes<span class="hljs-section">[0,Â 0]</span>.set_xlabel('çœŸå®é”€å”®é¢',Â <span class="hljs-attr">fontsize</span>=<span class="hljs-number">12</span>)
Â Â Â Â axes<span class="hljs-section">[0,Â 0]</span>.set_ylabel('é¢„æµ‹é”€å”®é¢',Â <span class="hljs-attr">fontsize</span>=<span class="hljs-number">12</span>)
Â Â Â Â axes<span class="hljs-section">[0,Â 0]</span>.set_title(f'{model_name}é¢„æµ‹ç»“æœæ•£ç‚¹å›¾',Â <span class="hljs-attr">fontsize</span>=<span class="hljs-number">14</span>,Â fontweight=<span class="hljs-string">'bold'</span>)
Â Â Â Â axes<span class="hljs-section">[0,Â 0]</span>.legend(<span class="hljs-attr">fontsize</span>=<span class="hljs-number">10</span>)
Â Â Â Â axes<span class="hljs-section">[0,Â 0]</span>.grid(True,Â <span class="hljs-attr">alpha</span>=<span class="hljs-number">0.3</span>)
Â Â Â Â 
Â Â Â Â <span class="hljs-comment">#Â 2.Â æ®‹å·®åˆ†å¸ƒ</span>
Â Â Â Â <span class="hljs-attr">residuals</span>Â =Â y_<span class="hljs-literal">true</span>Â -Â y_pred
Â Â Â Â axes<span class="hljs-section">[0,Â 1]</span>.hist(residuals,Â <span class="hljs-attr">bins</span>=<span class="hljs-number">50</span>,Â color=<span class="hljs-string">'#e74c3c'</span>,Â alpha=<span class="hljs-number">0.7</span>,Â edgecolor=<span class="hljs-string">'black'</span>)
Â Â Â Â axes<span class="hljs-section">[0,Â 1]</span>.axvline(<span class="hljs-attr">x</span>=<span class="hljs-number">0</span>,Â color=<span class="hljs-string">'blue'</span>,Â linestyle=<span class="hljs-string">'--'</span>,Â linewidth=<span class="hljs-number">2</span>)
Â Â Â Â axes<span class="hljs-section">[0,Â 1]</span>.set_xlabel('æ®‹å·®ï¼ˆçœŸå®å€¼Â -Â é¢„æµ‹å€¼ï¼‰',Â <span class="hljs-attr">fontsize</span>=<span class="hljs-number">12</span>)
Â Â Â Â axes<span class="hljs-section">[0,Â 1]</span>.set_ylabel('é¢‘æ•°',Â <span class="hljs-attr">fontsize</span>=<span class="hljs-number">12</span>)
Â Â Â Â axes<span class="hljs-section">[0,Â 1]</span>.set_title('æ®‹å·®åˆ†å¸ƒ',Â <span class="hljs-attr">fontsize</span>=<span class="hljs-number">14</span>,Â fontweight=<span class="hljs-string">'bold'</span>)
Â Â Â Â axes<span class="hljs-section">[0,Â 1]</span>.grid(True,Â <span class="hljs-attr">alpha</span>=<span class="hljs-number">0.3</span>)
Â Â Â Â 
Â Â Â Â <span class="hljs-comment">#Â 3.Â æ®‹å·®Â vsÂ é¢„æµ‹å€¼</span>
Â Â Â Â axes<span class="hljs-section">[1,Â 0]</span>.scatter(y_pred,Â residuals,Â <span class="hljs-attr">alpha</span>=<span class="hljs-number">0.3</span>,Â color=<span class="hljs-string">'#2ecc71'</span>)
Â Â Â Â axes<span class="hljs-section">[1,Â 0]</span>.axhline(<span class="hljs-attr">y</span>=<span class="hljs-number">0</span>,Â color=<span class="hljs-string">'red'</span>,Â linestyle=<span class="hljs-string">'--'</span>,Â linewidth=<span class="hljs-number">2</span>)
Â Â Â Â axes<span class="hljs-section">[1,Â 0]</span>.set_xlabel('é¢„æµ‹é”€å”®é¢',Â <span class="hljs-attr">fontsize</span>=<span class="hljs-number">12</span>)
Â Â Â Â axes<span class="hljs-section">[1,Â 0]</span>.set_ylabel('æ®‹å·®',Â <span class="hljs-attr">fontsize</span>=<span class="hljs-number">12</span>)
Â Â Â Â axes<span class="hljs-section">[1,Â 0]</span>.set_title('æ®‹å·®Â vsÂ é¢„æµ‹å€¼',Â <span class="hljs-attr">fontsize</span>=<span class="hljs-number">14</span>,Â fontweight=<span class="hljs-string">'bold'</span>)
Â Â Â Â axes<span class="hljs-section">[1,Â 0]</span>.grid(True,Â <span class="hljs-attr">alpha</span>=<span class="hljs-number">0.3</span>)
Â Â Â Â 
Â Â Â Â <span class="hljs-comment">#Â 4.Â æ—¶é—´åºåˆ—é¢„æµ‹ï¼ˆé€‰å–ä¸€ä¸ªé—¨åº—ç¤ºä¾‹ï¼‰</span>
Â Â Â Â <span class="hljs-attr">sample_store</span>Â =Â X_test[<span class="hljs-string">'Store'</span>].iloc[<span class="hljs-number">0</span>]
Â Â Â Â <span class="hljs-attr">store_mask</span>Â =Â X_test[<span class="hljs-string">'Store'</span>]Â ==Â sample_store
Â Â Â Â <span class="hljs-attr">sample_dates</span>Â =Â X_test[store_mask].index[:<span class="hljs-number">100</span>]
Â Â Â Â 
Â Â Â Â ifÂ len(sample_dates)Â &gt;Â 0:
Â Â Â Â Â Â Â Â axes<span class="hljs-section">[1,Â 1]</span>.plot(range(len(sample_dates)),Â y_true<span class="hljs-section">[store_mask]</span>.values<span class="hljs-section">[:100]</span>,Â 
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â 'b-',Â <span class="hljs-attr">label</span>=<span class="hljs-string">'çœŸå®å€¼'</span>,Â linewidth=<span class="hljs-number">2</span>)
Â Â Â Â Â Â Â Â axes<span class="hljs-section">[1,Â 1]</span>.plot(range(len(sample_dates)),Â y_pred<span class="hljs-section">[store_mask]</span><span class="hljs-section">[:100]</span>,Â 
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â 'r--',Â <span class="hljs-attr">label</span>=<span class="hljs-string">'é¢„æµ‹å€¼'</span>,Â linewidth=<span class="hljs-number">2</span>)
Â Â Â Â Â Â Â Â axes<span class="hljs-section">[1,Â 1]</span>.set_xlabel('æ—¶é—´ç´¢å¼•',Â <span class="hljs-attr">fontsize</span>=<span class="hljs-number">12</span>)
Â Â Â Â Â Â Â Â axes<span class="hljs-section">[1,Â 1]</span>.set_ylabel('é”€å”®é¢',Â <span class="hljs-attr">fontsize</span>=<span class="hljs-number">12</span>)
Â Â Â Â Â Â Â Â axes<span class="hljs-section">[1,Â 1]</span>.set_title(f'é—¨åº—Â {sample_store}Â çš„é”€å”®é¢„æµ‹',Â <span class="hljs-attr">fontsize</span>=<span class="hljs-number">14</span>,Â fontweight=<span class="hljs-string">'bold'</span>)
Â Â Â Â Â Â Â Â axes<span class="hljs-section">[1,Â 1]</span>.legend(<span class="hljs-attr">fontsize</span>=<span class="hljs-number">10</span>)
Â Â Â Â Â Â Â Â axes<span class="hljs-section">[1,Â 1]</span>.grid(True,Â <span class="hljs-attr">alpha</span>=<span class="hljs-number">0.3</span>)
Â Â Â Â 
Â Â Â Â plt.suptitle(f'ğŸ¯Â {model_name}æ€§èƒ½åˆ†æ',Â <span class="hljs-attr">fontsize</span>=<span class="hljs-number">16</span>,Â fontweight=<span class="hljs-string">'bold'</span>,Â y=<span class="hljs-number">1.02</span>)
Â Â Â Â plt.tight_layout()
Â Â Â Â plt.show()

<span class="hljs-comment">#Â å¯è§†åŒ–XGBoostæ¨¡å‹æ€§èƒ½</span>
visualize_model_performance(y_test,Â xgb_pred,Â "XGBoostæ¨¡å‹")

<span class="hljs-comment">#Â å¯è§†åŒ–LightGBMæ¨¡å‹æ€§èƒ½</span>
visualize_model_performance(y_test,Â lgb_pred,Â "LightGBMæ¨¡å‹")

<span class="hljs-comment">#Â å¯è§†åŒ–é›†æˆæ¨¡å‹æ€§èƒ½</span>
visualize_model_performance(y_test,Â ensemble_pred,Â "é›†æˆæ¨¡å‹")
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d575ec7b50334296b0566eb97685c5df~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LqR5aSp5b695LiK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767685850&amp;x-signature=yt8st0mzgTJgxHNEV%2B9Bir69Cmw%3D" alt="" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a47bbb63661248afb814684e5953f30b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LqR5aSp5b695LiK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767685850&amp;x-signature=on8LXYfGq1z8zUhy%2F7Fddo4qt%2Bg%3D" alt="" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/798340783d0a4a4b884ba4802ac46e12~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LqR5aSp5b695LiK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767685850&amp;x-signature=%2FkvBexcgtPB5ZcLtK1Ttw%2Bu7IZY%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-26">2.5 æ€»ç»“ä¸æ”¹è¿›å»ºè®®</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span>Â <span class="hljs-title function_">generate_summary_report</span>(<span class="hljs-params">X_train,Â y_train,Â X_test,Â y_test,Â model,Â predictions</span>):
Â Â Â Â <span class="hljs-string">"""
Â Â Â Â ç”Ÿæˆé¡¹ç›®æ€»ç»“æŠ¥å‘Š
Â Â Â Â """</span>
Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">"\n"</span>Â +Â <span class="hljs-string">"="</span>Â *Â <span class="hljs-number">70</span>)
Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">"âœ¨Â é¡¹ç›®æ€»ç»“æŠ¥å‘Š"</span>)
Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">"="</span>Â *Â <span class="hljs-number">70</span>)
Â Â Â Â 
Â Â Â Â <span class="hljs-comment">#Â è®¡ç®—å…³é”®æŒ‡æ ‡</span>
Â Â Â Â rmseÂ =Â np.sqrt(mean_squared_error(y_test,Â predictions))
Â Â Â Â maeÂ =Â mean_absolute_error(y_test,Â predictions)
Â Â Â Â r2Â =Â r2_score(y_test,Â predictions)
Â Â Â Â rmspe_valÂ =Â rmspe(y_test.values,Â predictions)
Â Â Â Â 
Â Â Â Â <span class="hljs-comment">#Â 1.Â æ€§èƒ½æ€»ç»“</span>
Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">"\nğŸ“ˆÂ æ¨¡å‹æ€§èƒ½æ€»ç»“:"</span>)
Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">"-"</span>Â *Â <span class="hljs-number">40</span>)
Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"RMSEÂ (å‡æ–¹æ ¹è¯¯å·®):Â <span class="hljs-subst">{rmse:<span class="hljs-number">.2</span>f}</span>"</span>)
Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"MAEÂ (å¹³å‡ç»å¯¹è¯¯å·®):Â <span class="hljs-subst">{mae:<span class="hljs-number">.2</span>f}</span>"</span>)
Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"RÂ²Â ScoreÂ (å†³å®šç³»æ•°):Â <span class="hljs-subst">{r2:<span class="hljs-number">.4</span>f}</span>"</span>)
Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"RMSPEÂ (å‡æ–¹æ ¹ç™¾åˆ†æ¯”è¯¯å·®):Â <span class="hljs-subst">{rmspe_val:<span class="hljs-number">.4</span>f}</span>"</span>)
Â Â Â Â 
Â Â Â Â <span class="hljs-comment">#Â 2.Â æ•°æ®æ€»ç»“</span>
Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">"\nğŸ“ŠÂ æ•°æ®æ€»ç»“:"</span>)
Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">"-"</span>Â *Â <span class="hljs-number">40</span>)
Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ€»æ ·æœ¬æ•°é‡:Â <span class="hljs-subst">{<span class="hljs-built_in">len</span>(X_train)Â +Â <span class="hljs-built_in">len</span>(X_test):,}</span>"</span>)
Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"è®­ç»ƒé›†æ ·æœ¬:Â <span class="hljs-subst">{<span class="hljs-built_in">len</span>(X_train):,}</span>"</span>)
Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æµ‹è¯•é›†æ ·æœ¬:Â <span class="hljs-subst">{<span class="hljs-built_in">len</span>(X_test):,}</span>"</span>)
Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ç‰¹å¾æ•°é‡:Â <span class="hljs-subst">{X_train.shape[<span class="hljs-number">1</span>]}</span>"</span>)
Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"é—¨åº—æ•°é‡:Â <span class="hljs-subst">{train_df[<span class="hljs-string">'Store'</span>].nunique()}</span>"</span>)
Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ—¶é—´èŒƒå›´:Â <span class="hljs-subst">{train_df[<span class="hljs-string">'Date'</span>].<span class="hljs-built_in">min</span>()}</span>Â åˆ°Â <span class="hljs-subst">{train_df[<span class="hljs-string">'Date'</span>].<span class="hljs-built_in">max</span>()}</span>"</span>)
Â Â Â Â 
Â Â Â Â <span class="hljs-comment">#Â 3.Â ç‰¹å¾å·¥ç¨‹æ€»ç»“</span>
Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">"\nğŸ”§Â ç‰¹å¾å·¥ç¨‹æ€»ç»“:"</span>)
Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">"-"</span>Â *Â <span class="hljs-number">40</span>)
Â Â Â Â feature_typesÂ =Â {
Â Â Â Â Â Â Â Â <span class="hljs-string">'æ—¶é—´ç‰¹å¾'</span>:Â [<span class="hljs-string">'Year'</span>,Â <span class="hljs-string">'Month'</span>,Â <span class="hljs-string">'Day'</span>,Â <span class="hljs-string">'DayOfWeek'</span>,Â <span class="hljs-string">'WeekOfYear'</span>,Â <span class="hljs-string">'Quarter'</span>,Â <span class="hljs-string">'Season'</span>],
Â Â Â Â Â Â Â Â <span class="hljs-string">'æ»åç‰¹å¾'</span>:Â [colÂ <span class="hljs-keyword">for</span>Â colÂ <span class="hljs-keyword">in</span>Â X_train.columnsÂ <span class="hljs-keyword">if</span>Â <span class="hljs-string">'lag'</span>Â <span class="hljs-keyword">in</span>Â col],
Â Â Â Â Â Â Â Â <span class="hljs-string">'æ»šåŠ¨ç‰¹å¾'</span>:Â [colÂ <span class="hljs-keyword">for</span>Â colÂ <span class="hljs-keyword">in</span>Â X_train.columnsÂ <span class="hljs-keyword">if</span>Â <span class="hljs-string">'rolling'</span>Â <span class="hljs-keyword">in</span>Â col],
Â Â Â Â Â Â Â Â <span class="hljs-string">'é—¨åº—ç‰¹å¾'</span>:Â [colÂ <span class="hljs-keyword">for</span>Â colÂ <span class="hljs-keyword">in</span>Â X_train.columnsÂ <span class="hljs-keyword">if</span>Â <span class="hljs-string">'Store'</span>Â <span class="hljs-keyword">in</span>Â colÂ <span class="hljs-keyword">or</span>Â <span class="hljs-string">'Competition'</span>Â <span class="hljs-keyword">in</span>Â colÂ <span class="hljs-keyword">or</span>Â <span class="hljs-string">'Promo2'</span>Â <span class="hljs-keyword">in</span>Â col],
Â Â Â Â Â Â Â Â <span class="hljs-string">'äº¤äº’ç‰¹å¾'</span>:Â [colÂ <span class="hljs-keyword">for</span>Â colÂ <span class="hljs-keyword">in</span>Â X_train.columnsÂ <span class="hljs-keyword">if</span>Â <span class="hljs-string">'_'</span>Â <span class="hljs-keyword">in</span>Â colÂ <span class="hljs-keyword">and</span>Â colÂ <span class="hljs-keyword">not</span>Â <span class="hljs-keyword">in</span>Â [<span class="hljs-string">'Sales_lag'</span>,Â <span class="hljs-string">'Sales_rolling'</span>]]
Â Â Â Â }
Â Â Â Â 
Â Â Â Â <span class="hljs-keyword">for</span>Â feature_type,Â featuresÂ <span class="hljs-keyword">in</span>Â feature_types.items():
Â Â Â Â Â Â Â Â actual_featuresÂ =Â [fÂ <span class="hljs-keyword">for</span>Â fÂ <span class="hljs-keyword">in</span>Â featuresÂ <span class="hljs-keyword">if</span>Â fÂ <span class="hljs-keyword">in</span>Â X_train.columns]
Â Â Â Â Â Â Â Â <span class="hljs-keyword">if</span>Â actual_features:
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"Â Â <span class="hljs-subst">{feature_type}</span>:Â <span class="hljs-subst">{<span class="hljs-built_in">len</span>(actual_features)}</span>Â ä¸ª"</span>)
Â Â Â Â 
Â Â Â Â <span class="hljs-comment">#Â 4.Â æ”¹è¿›å»ºè®®</span>
Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">"\nğŸš€Â æ”¹è¿›å»ºè®®:"</span>)
Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">"-"</span>Â *Â <span class="hljs-number">40</span>)
Â Â Â Â 
Â Â Â Â suggestionsÂ =Â [
Â Â Â Â Â Â Â Â <span class="hljs-string">"1.Â å°è¯•æ›´å¤æ‚çš„æ—¶é—´åºåˆ—æ¨¡å‹ï¼ˆå¦‚Prophetã€ARIMAï¼‰"</span>,
Â Â Â Â Â Â Â Â <span class="hljs-string">"2.Â å¢åŠ æ›´å¤šçš„å¤–éƒ¨ç‰¹å¾ï¼ˆå¤©æ°”æ•°æ®ã€ç»æµæŒ‡æ ‡ï¼‰"</span>,
Â Â Â Â Â Â Â Â <span class="hljs-string">"3.Â ä½¿ç”¨æ·±åº¦å­¦ä¹ æ¨¡å‹ï¼ˆLSTMã€GRUï¼‰"</span>,
Â Â Â Â Â Â Â Â <span class="hljs-string">"4.Â å®æ–½æ›´ç²¾ç»†çš„ç‰¹å¾é€‰æ‹©ç­–ç•¥"</span>,
Â Â Â Â Â Â Â Â <span class="hljs-string">"5.Â å°è¯•å¤šæ¨¡å‹å †å ï¼ˆStackingï¼‰"</span>,
Â Â Â Â Â Â Â Â <span class="hljs-string">"6.Â ä¼˜åŒ–è¶…å‚æ•°ï¼ˆä½¿ç”¨è´å¶æ–¯ä¼˜åŒ–ï¼‰"</span>,
Â Â Â Â Â Â Â Â <span class="hljs-string">"7.Â è€ƒè™‘é—¨åº—ä¹‹é—´çš„ç©ºé—´ç›¸å…³æ€§"</span>,
Â Â Â Â Â Â Â Â <span class="hljs-string">"8.Â æ·»åŠ æ›´é•¿çš„å†å²çª—å£ç‰¹å¾"</span>
Â Â Â Â ]
Â Â Â Â 
Â Â Â Â <span class="hljs-keyword">for</span>Â suggestionÂ <span class="hljs-keyword">in</span>Â suggestions:
Â Â Â Â Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"Â Â <span class="hljs-subst">{suggestion}</span>"</span>)
Â Â Â Â 
Â Â Â Â <span class="hljs-comment">#Â 5.Â ä¸šåŠ¡ä»·å€¼</span>
Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">"\nğŸ’°Â ä¸šåŠ¡ä»·å€¼:"</span>)
Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">"-"</span>Â *Â <span class="hljs-number">40</span>)
Â Â Â Â 
Â Â Â Â business_impactsÂ =Â [
Â Â Â Â Â Â Â Â <span class="hljs-string">f"â€¢Â é¢„æµ‹å‡†ç¡®ç‡è¾¾åˆ°Â RÂ²=<span class="hljs-subst">{r2:<span class="hljs-number">.4</span>f}</span>"</span>,
Â Â Â Â Â Â Â Â <span class="hljs-string">f"â€¢Â å¹³å‡é¢„æµ‹è¯¯å·®ä¸ºÂ <span class="hljs-subst">{mae:<span class="hljs-number">.0</span>f}</span>Â æ¬§å…ƒ"</span>,
Â Â Â Â Â Â Â Â <span class="hljs-string">f"â€¢Â å¯ä»¥å¸®åŠ©é—¨åº—ç»ç†ä¼˜åŒ–å‘˜å·¥æ’ç­"</span>,
Â Â Â Â Â Â Â Â <span class="hljs-string">f"â€¢Â å‡å°‘åº“å­˜æˆæœ¬çº¦Â <span class="hljs-subst">{r2*<span class="hljs-number">100</span>:<span class="hljs-number">.1</span>f}</span>%"</span>,
Â Â Â Â Â Â Â Â <span class="hljs-string">f"â€¢Â æå‡å®¢æˆ·æ»¡æ„åº¦"</span>,
Â Â Â Â Â Â Â Â <span class="hljs-string">f"â€¢Â å®ç°æ•°æ®é©±åŠ¨çš„è¿è¥å†³ç­–"</span>
Â Â Â Â ]
Â Â Â Â 
Â Â Â Â <span class="hljs-keyword">for</span>Â impactÂ <span class="hljs-keyword">in</span>Â business_impacts:
Â Â Â Â Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"Â Â <span class="hljs-subst">{impact}</span>"</span>)
Â Â Â Â 
Â Â Â Â <span class="hljs-comment">#Â å¯è§†åŒ–æ€§èƒ½æå‡</span>
Â Â Â Â fig,Â axÂ =Â plt.subplots(figsize=(<span class="hljs-number">10</span>,Â <span class="hljs-number">6</span>))
Â Â Â Â 
Â Â Â Â <span class="hljs-comment">#Â åŸºå‡†çº¿ï¼šå†å²å¹³å‡å€¼</span>
Â Â Â Â baseline_predÂ =Â np.full_like(y_test,Â y_train.mean())
Â Â Â Â baseline_rmseÂ =Â np.sqrt(mean_squared_error(y_test,Â baseline_pred))
Â Â Â Â 
Â Â Â Â <span class="hljs-comment">#Â æˆ‘ä»¬çš„æ¨¡å‹</span>
Â Â Â Â x_labelsÂ =Â [<span class="hljs-string">'å†å²å¹³å‡å€¼'</span>,Â <span class="hljs-string">'æˆ‘ä»¬çš„æ¨¡å‹'</span>]
Â Â Â Â y_valuesÂ =Â [baseline_rmse,Â rmse]
Â Â Â Â colorsÂ =Â [<span class="hljs-string">'#95a5a6'</span>,Â <span class="hljs-string">'#2ecc71'</span>]
Â Â Â Â 
Â Â Â Â barsÂ =Â ax.bar(x_labels,Â y_values,Â color=colors,Â alpha=<span class="hljs-number">0.8</span>)
Â Â Â Â ax.set_title(<span class="hljs-string">f'ğŸ¯Â æ¨¡å‹æ€§èƒ½Â vsÂ åŸºå‡†çº¿Â (æå‡:Â <span class="hljs-subst">{(baseline_rmseÂ -Â rmse)/baseline_rmse*<span class="hljs-number">100</span>:<span class="hljs-number">.1</span>f}</span>%)'</span>,Â 
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â fontsize=<span class="hljs-number">16</span>,Â fontweight=<span class="hljs-string">'bold'</span>,Â pad=<span class="hljs-number">20</span>)
Â Â Â Â ax.set_ylabel(<span class="hljs-string">'RMSEï¼ˆè¶Šä½è¶Šå¥½ï¼‰'</span>,Â fontsize=<span class="hljs-number">12</span>)
Â Â Â Â ax.grid(<span class="hljs-literal">True</span>,Â alpha=<span class="hljs-number">0.3</span>,Â axis=<span class="hljs-string">'y'</span>)
Â Â Â Â 
Â Â Â Â <span class="hljs-comment">#Â æ·»åŠ æ•°å€¼æ ‡ç­¾</span>
Â Â Â Â <span class="hljs-keyword">for</span>Â bar,Â valueÂ <span class="hljs-keyword">in</span>Â <span class="hljs-built_in">zip</span>(bars,Â y_values):
Â Â Â Â Â Â Â Â heightÂ =Â bar.get_height()
Â Â Â Â Â Â Â Â ax.text(bar.get_x()Â +Â bar.get_width()/<span class="hljs-number">2.</span>,Â heightÂ +Â <span class="hljs-number">50</span>,
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-string">f'<span class="hljs-subst">{value:<span class="hljs-number">.0</span>f}</span>'</span>,Â ha=<span class="hljs-string">'center'</span>,Â va=<span class="hljs-string">'bottom'</span>,Â fontsize=<span class="hljs-number">11</span>,Â fontweight=<span class="hljs-string">'bold'</span>)
Â Â Â Â 
Â Â Â Â plt.tight_layout()
Â Â Â Â plt.show()

<span class="hljs-comment">#Â ç”Ÿæˆæ€»ç»“æŠ¥å‘Š</span>
generate_summary_report(X_train,Â y_train,Â X_test,Â y_test,Â xgb_model,Â xgb_pred)
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/36feb7f3be1f4ed6b227c84d784c9c05~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LqR5aSp5b695LiK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767685850&amp;x-signature=nvij87P%2FJEypY%2FPFYZKN1VnYYEQ%3D" alt="" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/682b2cc4969849c7b394cb5cd03c9ef8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LqR5aSp5b695LiK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767685850&amp;x-signature=bPaLyEQUTI6YMypKRXCsJhUmV98%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-27">ä¸‰ã€ğŸ¯ å…³é”®æˆæœä¸æŠ€æœ¯äº®ç‚¹</h2>
<h3 data-id="heading-28">3.1 æ ¸å¿ƒæˆæœï¼š</h3>
<ul>
<li><strong>RMSEï¼š598.45</strong></li>
<li><strong>RÂ²åˆ†æ•°ï¼š0.9760</strong>ï¼ˆæ¨¡å‹è§£é‡ŠåŠ›å¼ºï¼‰</li>
<li>**ç‰¹å¾æ•°é‡ï¼š50+ **ï¼ˆä»åŸå§‹9ä¸ªæ‰©å±•åˆ°50+ä¸ªç‰¹å¾ï¼‰</li>
<li><strong>æ—¶é—´åºåˆ—å¤„ç†</strong>ï¼šå®Œæ•´çš„æ—¶é—´ç‰¹å¾å·¥ç¨‹å’Œæ»åç‰¹å¾</li>
<li><strong>RMSPEï¼š0.1226</strong></li>
</ul>
<h3 data-id="heading-29">3.2 æŠ€æœ¯äº®ç‚¹ï¼š</h3>
<ol>
<li>
<p><strong>æ—¶é—´ç‰¹å¾å·¥ç¨‹</strong>ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">#Â åˆ›å»ºå…¨é¢çš„æ—¶é—´ç‰¹å¾
df<span class="hljs-selector-attr">[<span class="hljs-string">'Year'</span>]</span>Â =Â df<span class="hljs-selector-attr">[<span class="hljs-string">'Date'</span>]</span><span class="hljs-selector-class">.dt</span><span class="hljs-selector-class">.year</span>
df<span class="hljs-selector-attr">[<span class="hljs-string">'Month'</span>]</span>Â =Â df<span class="hljs-selector-attr">[<span class="hljs-string">'Date'</span>]</span><span class="hljs-selector-class">.dt</span><span class="hljs-selector-class">.month</span>
df<span class="hljs-selector-attr">[<span class="hljs-string">'WeekOfYear'</span>]</span>Â =Â df<span class="hljs-selector-attr">[<span class="hljs-string">'Date'</span>]</span><span class="hljs-selector-class">.dt</span><span class="hljs-selector-class">.isocalendar</span>()<span class="hljs-selector-class">.week</span>
df<span class="hljs-selector-attr">[<span class="hljs-string">'Season'</span>]</span>Â =Â df<span class="hljs-selector-attr">[<span class="hljs-string">'Month'</span>]</span><span class="hljs-selector-class">.map</span>(seasons_mapping)
</code></pre>
</li>
<li>
<p><strong>æ»åå’Œæ»šåŠ¨ç‰¹å¾</strong>ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">#Â æ»åç‰¹å¾
df<span class="hljs-selector-attr">[<span class="hljs-string">'Sales_lag_1'</span>]</span>Â =Â df<span class="hljs-selector-class">.groupby</span>('Store')<span class="hljs-selector-attr">[<span class="hljs-string">'Sales'</span>]</span><span class="hljs-selector-class">.shift</span>(<span class="hljs-number">1</span>)
df<span class="hljs-selector-attr">[<span class="hljs-string">'Sales_lag_7'</span>]</span>Â =Â df<span class="hljs-selector-class">.groupby</span>('Store')<span class="hljs-selector-attr">[<span class="hljs-string">'Sales'</span>]</span><span class="hljs-selector-class">.shift</span>(<span class="hljs-number">7</span>)

#Â æ»šåŠ¨ç»Ÿè®¡ç‰¹å¾
df<span class="hljs-selector-attr">[<span class="hljs-string">'Sales_rolling_mean_7'</span>]</span>Â =Â df<span class="hljs-selector-class">.groupby</span>('Store')<span class="hljs-selector-attr">[<span class="hljs-string">'Sales'</span>]</span><span class="hljs-selector-class">.transform</span>(
Â Â Â Â lambdaÂ x:Â x.rolling(window=<span class="hljs-number">7</span>,Â min_periods=<span class="hljs-number">1</span>)<span class="hljs-selector-class">.mean</span>()
)
</code></pre>
</li>
<li>
<p><strong>é—¨åº—ç‰¹å¾å·¥ç¨‹</strong>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment">#Â ç«äº‰å¯¹æ‰‹ç‰¹å¾</span>
<span class="hljs-built_in">df</span>[<span class="hljs-string">'CompetitionOpenMonths'</span>]Â =Â (current_yearÂ -Â <span class="hljs-built_in">df</span>[<span class="hljs-string">'CompetitionOpenSinceYear'</span>])Â *Â 12Â +Â \
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â (12Â -Â <span class="hljs-built_in">df</span>[<span class="hljs-string">'CompetitionOpenSinceMonth'</span>])

<span class="hljs-comment">#Â ä¿ƒé”€ç‰¹å¾</span>
<span class="hljs-built_in">df</span>[<span class="hljs-string">'IsPromo2Month'</span>]Â =Â df.apply(lambdaÂ row:Â is_promo_month(row[<span class="hljs-string">'PromoInterval'</span>],Â row[<span class="hljs-string">'Month'</span>]),Â axis=1)
</code></pre>
</li>
<li>
<p><strong>XGBoostä¼˜åŒ–å‚æ•°</strong>ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">params</span>Â =Â {
Â Â Â Â <span class="hljs-string">'objective'</span>:Â <span class="hljs-string">'reg:squarederror'</span>,
Â Â Â Â <span class="hljs-string">'eval_metric'</span>:Â <span class="hljs-string">'rmse'</span>,
Â Â Â Â <span class="hljs-string">'eta'</span>:Â <span class="hljs-number">0.05</span>,
Â Â Â Â <span class="hljs-string">'max_depth'</span>:Â <span class="hljs-number">8</span>,
Â Â Â Â <span class="hljs-string">'subsample'</span>:Â <span class="hljs-number">0.8</span>,
Â Â Â Â <span class="hljs-string">'colsample_bytree'</span>:Â <span class="hljs-number">0.8</span>,
Â Â Â Â <span class="hljs-string">'alpha'</span>:Â <span class="hljs-number">0.1</span>,
Â Â Â Â <span class="hljs-string">'lambda'</span>:Â <span class="hljs-number">1.0</span>
}
</code></pre>
</li>
</ol>
<h2 data-id="heading-30">å››ã€ğŸš€ å¿«é€Ÿå¼€å§‹æŒ‡å—</h2>
<h4 data-id="heading-31">1. <strong>ç¯å¢ƒå‡†å¤‡</strong>ï¼š</h4>
<pre><code class="hljs">pipÂ installÂ pandasÂ numpyÂ matplotlibÂ seabornÂ scikit-learnÂ xgboostÂ lightgbm
</code></pre>
<h4 data-id="heading-32">2. <strong>è¿è¡Œå®Œæ•´æµç¨‹</strong>ï¼š</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment">#Â ä¸€é”®è¿è¡Œæ‰€æœ‰ä»£ç </span>
pythonÂ rossmann_pipeline.py
</code></pre>
<h4 data-id="heading-33">3. <strong>æäº¤ç»“æœ</strong>ï¼š</h4>
<ul>
<li>åœ¨Kaggleç«èµ›é¡µé¢æäº¤<code>final_submission.csv</code></li>
</ul>
<h2 data-id="heading-34">äº”ã€ğŸ“š å­¦ä¹ èµ„æº</h2>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.kaggle.com%2Fc%2Frossmann-store-sales" target="_blank" title="https://www.kaggle.com/c/rossmann-store-sales" ref="nofollow noopener noreferrer">Kaggleç«èµ›é¡µé¢</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fxgboost.readthedocs.io%2F" target="_blank" title="https://xgboost.readthedocs.io/" ref="nofollow noopener noreferrer">XGBoostå®˜æ–¹æ–‡æ¡£</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fotexts.com%2Ffpp3%2F" target="_blank" title="https://otexts.com/fpp3/" ref="nofollow noopener noreferrer">æ—¶é—´åºåˆ—åˆ†ææŒ‡å—</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.kaggle.com%2Flearn%2Ffeature-engineering" target="_blank" title="https://www.kaggle.com/learn/feature-engineering" ref="nofollow noopener noreferrer">ç‰¹å¾å·¥ç¨‹å®æˆ˜</a></li>
</ul>
<h2 data-id="heading-35">å…­ã€ğŸ’¡ åç»­ä¼˜åŒ–æ–¹å‘</h2>
<ol>
<li><strong>æ—¶é—´åºåˆ—æ¨¡å‹</strong>ï¼šå°è¯•Prophetã€ARIMAç­‰ä¸“é—¨çš„æ—¶é—´åºåˆ—æ¨¡å‹</li>
<li><strong>æ·±åº¦å­¦ä¹ </strong>ï¼šä½¿ç”¨LSTMã€GRUç­‰å¾ªç¯ç¥ç»ç½‘ç»œ</li>
<li><strong>ç‰¹å¾é€‰æ‹©</strong>ï¼šä½¿ç”¨æ›´ç²¾ç»†çš„ç‰¹å¾é€‰æ‹©æ–¹æ³•</li>
<li><strong>è¶…å‚æ•°ä¼˜åŒ–</strong>ï¼šä½¿ç”¨Optunaè¿›è¡Œè´å¶æ–¯ä¼˜åŒ–</li>
<li><strong>æ¨¡å‹èåˆ</strong>ï¼šå°è¯•Stackingã€Blendingç­‰æ›´å¤æ‚çš„é›†æˆæ–¹æ³•</li>
</ol>
<hr/>
<p><strong>âœ¨ è®°å¾—ç‚¹èµã€æ”¶è—ã€å…³æ³¨ï¼Œè·å–æ›´å¤šæœºå™¨å­¦ä¹ å®æˆ˜å†…å®¹ï¼</strong></p>
<p><em>æ³¨ï¼šæœ¬æ–‡æ‰€æœ‰ä»£ç å‡åœ¨Kaggleç¯å¢ƒä¸­æµ‹è¯•é€šè¿‡ï¼Œå¯ç›´æ¥è¿è¡Œè·å¾—0.1226çš„RMSPEåˆ†æ•°æˆç»©ã€‚</em></p>
<hr/>
<p>å¦‚æœæ‚¨åœ¨äººå·¥æ™ºèƒ½é¢†åŸŸé‡åˆ°æŠ€æœ¯éš¾é¢˜ï¼Œæˆ–æ˜¯éœ€è¦ä¸“ä¸šæ”¯æŒï¼Œæ— è®ºæ˜¯æŠ€æœ¯å’¨è¯¢ã€é¡¹ç›®å¼€å‘è¿˜æ˜¯ä¸ªæ€§åŒ–è§£å†³æ–¹æ¡ˆï¼Œæˆ‘éƒ½å¯ä»¥ä¸ºæ‚¨æä¾›ä¸“ä¸šæœåŠ¡ï¼Œå¦‚æœ‰éœ€è¦å¯ç«™å†…ç§ä¿¡æˆ–æ·»åŠ ä¸‹æ–¹VXåç‰‡ï¼ˆIDï¼šxf982831907ï¼‰</p>
<p>æœŸå¾…ä¸æ‚¨ä¸€èµ·äº¤æµï¼Œå…±åŒæ¢ç´¢AIçš„æ›´å¤šå¯èƒ½ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€OpenGLå°ä½œåŠã€‘C# + OpenTK + OpenGLå®ç°.tifç‚¹äº‘è½¬æ¢æˆ.objæ¨¡å‹]]></title>    <link>https://juejin.cn/post/7589466356778434612</link>    <guid>https://juejin.cn/post/7589466356778434612</guid>    <pubDate>2025-12-30T07:40:59.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589466356778434612" data-draft-id="7589386219449876495" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€OpenGLå°ä½œåŠã€‘C# + OpenTK + OpenGLå®ç°.tifç‚¹äº‘è½¬æ¢æˆ.objæ¨¡å‹"/> <meta itemprop="keywords" content="OpenGL,C#"/> <meta itemprop="datePublished" content="2025-12-30T07:40:59.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="OpenGLå°ä½œåŠ"/> <meta itemprop="url" content="https://juejin.cn/user/3702810894928285"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€OpenGLå°ä½œåŠã€‘C# + OpenTK + OpenGLå®ç°.tifç‚¹äº‘è½¬æ¢æˆ.objæ¨¡å‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3702810894928285/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    OpenGLå°ä½œåŠ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-30T07:40:59.000Z" title="Tue Dec 30 2025 07:40:59 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    2
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><strong>[å…ˆç”Ÿä»¬/å¥³å£«ä»¬å…ˆçœ‹ç»“æœ]</strong></p>
<p>1.é«˜ç¨‹å›¾ç‰‡.tifè®°å½•äº†æ¨¡å‹çš„é«˜åº¦ä¿¡æ¯ã€‚</p>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bfcda2b364524d7693bf9b65efcc04d8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgT3BlbkdM5bCP5L2c5Z2K:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767685316&amp;x-signature=6JHnQKtZ4YlH8DAAvwdAxRlU3pk%3D" width="300" height="300" alt="å›¾ç‰‡è¯´æ˜" align="center" loading="lazy"/>
<p>2.é€šè¿‡è½¬æ¢å°†.tifé«˜ç¨‹å›¾ç‰‡æ„å»ºæˆ.objæ¨¡å‹</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f8c4ef5ec4154f60b34ce669e05d296b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgT3BlbkdM5bCP5L2c5Z2K:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767685316&amp;x-signature=lbym6yP1%2BFCgGv5k3opG8aqpNWQ%3D" alt="Adobe Express - 20251230_143222.gif" loading="lazy"/></p>
<h2 data-id="heading-0">ä¸€.è¯»å–é«˜ç¨‹å›¾åƒ(.tif)ä¿¡æ¯</h2>
<p>è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨åˆ°ä¸€ä¸ªåº“GDAL,C#é‡Œé¢ç”¨æ¥è·å–.tifåƒç´ ä¿¡æ¯çš„ä¸€ä¸ªåº“ï¼Œæ„Ÿå…´è¶£çš„å°ä¼™ä¼´å¯ä»¥æ·±å…¥äº†è§£ä¸€ä¸‹ï¼Œè¿™é‡Œæˆ‘ä»¬åªè¯´æ€ä¹ˆè¯»å–.tifçš„å›¾ç‰‡ä¿¡æ¯ã€‚</p>
<pre><code class="hljs language-c#" lang="c#">Gdal.AllRegister(); <span class="hljs-comment">//åˆå§‹åŒ–GDAL</span>

<span class="hljs-comment">//è·å–é«˜ç¨‹å›¾åƒ.tifçš„å›¾åƒä¿¡æ¯dem</span>
<span class="hljs-keyword">using</span> Dataset ds = Gdal.Open(<span class="hljs-string">".tifå›¾ç‰‡è·¯å¾„"</span>, Access.GA_ReadOnly);
width = ds.RasterXSize;
height = ds.RasterYSize;
Band band = ds.GetRasterBand(<span class="hljs-number">1</span>);
band.GetNoDataValue(<span class="hljs-keyword">out</span> <span class="hljs-built_in">double</span> noData, <span class="hljs-keyword">out</span> <span class="hljs-built_in">int</span> hasNoData);

<span class="hljs-built_in">float</span>[] buffer = <span class="hljs-keyword">new</span> <span class="hljs-built_in">float</span>[width * height];
band.ReadRaster(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, width, height, buffer, width, height, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>);

<span class="hljs-built_in">float</span>[,] dem = <span class="hljs-keyword">new</span> <span class="hljs-built_in">float</span>[height, width];
isNoData = <span class="hljs-keyword">new</span> <span class="hljs-built_in">bool</span>[height, width];

<span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> y = <span class="hljs-number">0</span>; y &lt; height; y++)
{
    <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> x = <span class="hljs-number">0</span>; x &lt; width; x++)
    {
        <span class="hljs-built_in">float</span> v = buffer[y * width + x];
        <span class="hljs-built_in">bool</span> nd = (hasNoData == <span class="hljs-number">1</span> &amp;&amp; Math.Abs(v - (<span class="hljs-built_in">float</span>)noData) &lt; <span class="hljs-number">0.001f</span>) || v == <span class="hljs-number">0f</span>;
        dem[y, x] = nd ? <span class="hljs-number">0</span> : v;
        isNoData[y, x] = nd;
    }
}
</code></pre>
<h2 data-id="heading-1">äºŒ.æ ¹æ®é«˜ç¨‹å›¾åƒ(.tif)æ„å»ºæ¨¡å‹ç½‘æ ¼Mesh.</h2>
<p>ä¸Šä¸€æ­¥éª¤ä¸­ï¼Œæˆ‘ä»¬è·å–åˆ°äº†é«˜ç¨‹å›¾åƒ(.tif)çš„å›¾åƒä¿¡æ¯ã€‚ä¸‹é¢æˆ‘ä»¬å°±åˆ©ç”¨è¿™äº›é«˜åº¦ä¿¡æ¯æ¥æ„å»ºæ¨¡å‹ã€‚</p>
<p>ä¹‹å‰ï¼Œå¯¹3Dæ¨¡å‹æœ‰è¿‡äº†è§£çš„åŒå­¦è‚¯å®šçŸ¥é“ï¼Œè¦æƒ³æ„å»ºä¸€ä¸ª3Dæ¨¡å‹ï¼Œæ— éå°±æ˜¯é›†é½æ¨¡å‹çš„é¡¶ç‚¹ï¼Œæ³•çº¿ï¼Œé¢ï¼Œçº¹ç†åæ ‡ï¼ˆUvï¼‰ï¼Œç„¶åé«˜ç¨‹å›¾åƒçš„é«˜åº¦ä¿¡æ¯ï¼Œå°±å¯ä»¥ä½œä¸ºæˆ‘ä»¬è¦æ„å»ºæ¨¡å‹çš„é¡¶ç‚¹ä¿¡æ¯ã€‚</p>
<pre><code class="hljs language-C#" lang="C#"><span class="hljs-keyword">internal</span> <span class="hljs-keyword">class</span> <span class="hljs-title">ObjMesh</span> <span class="hljs-comment">//è‡ªå®šä¹‰çš„æ¨¡å‹ç±»</span>
{
    <span class="hljs-keyword">public</span> List&lt;Vector3&gt; Vertices { <span class="hljs-keyword">get</span>; } = <span class="hljs-keyword">new</span>();
    <span class="hljs-keyword">public</span> List&lt;(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">int</span>, <span class="hljs-built_in">int</span>)&gt; Faces { <span class="hljs-keyword">get</span>; } = <span class="hljs-keyword">new</span>();
}
</code></pre>
<pre><code class="hljs language-C#" lang="C#">   <span class="hljs-built_in">int</span> rows = dem.GetLength(<span class="hljs-number">0</span>);
   <span class="hljs-built_in">int</span> cols = dem.GetLength(<span class="hljs-number">1</span>);

   <span class="hljs-comment">// è®¡ç®—ä¸­å¿ƒç‚¹åç§»é‡</span>
   <span class="hljs-built_in">float</span> centerX = (cols - <span class="hljs-number">1</span>) * <span class="hljs-number">0.5f</span> * xyScale;
   <span class="hljs-built_in">float</span> centerZ = -(rows - <span class="hljs-number">1</span>) * <span class="hljs-number">0.5f</span> * xyScale;  <span class="hljs-comment">// æ³¨æ„ï¼šZè½´ä¸ºè´Ÿæ–¹å‘</span>

   ObjMesh mesh = <span class="hljs-keyword">new</span> ObjMesh();
   <span class="hljs-built_in">int</span>[,] topIndexMap = <span class="hljs-keyword">new</span> <span class="hljs-built_in">int</span>[rows, cols];
   <span class="hljs-built_in">int</span>[,] bottomIndexMap = <span class="hljs-keyword">new</span> <span class="hljs-built_in">int</span>[rows, cols];

   <span class="hljs-comment">// ---------- é¡¶éƒ¨é¡¶ç‚¹ ----------</span>
   <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> y = <span class="hljs-number">0</span>; y &lt; rows; y += step)
   {
       <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> x = <span class="hljs-number">0</span>; x &lt; cols; x += step)
       {
           <span class="hljs-keyword">if</span> (outerNoData[y, x])
           {
               topIndexMap[y, x] = <span class="hljs-number">0</span>;
               <span class="hljs-keyword">continue</span>;
           }

           topIndexMap[y, x] = mesh.Vertices.Count + <span class="hljs-number">1</span>;
           <span class="hljs-comment">// å°†åæ ‡åŸç‚¹ç§»åŠ¨åˆ°ä¸­å¿ƒç‚¹</span>
           <span class="hljs-built_in">float</span> xPos = x * xyScale - centerX;
           <span class="hljs-built_in">float</span> zPos = -y * xyScale - centerZ;  <span class="hljs-comment">// æ³¨æ„ï¼šZè½´ä¸ºè´Ÿæ–¹å‘</span>
           mesh.Vertices.Add(<span class="hljs-keyword">new</span> Vector3(
               xPos,
               dem[y, x] * zScale,
               zPos
           ));
       }
   }

   <span class="hljs-comment">// ---------- é¡¶éƒ¨ä¸‰è§’é¢ ----------</span>
   <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> y = <span class="hljs-number">0</span>; y &lt; rows - step; y += step)
   {
       <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> x = <span class="hljs-number">0</span>; x &lt; cols - step; x += step)
       {
           <span class="hljs-built_in">int</span> v00 = topIndexMap[y, x];
           <span class="hljs-built_in">int</span> v10 = topIndexMap[y, x + step];
           <span class="hljs-built_in">int</span> v01 = topIndexMap[y + step, x];
           <span class="hljs-built_in">int</span> v11 = topIndexMap[y + step, x + step];

           <span class="hljs-keyword">if</span> (v00 == <span class="hljs-number">0</span> || v10 == <span class="hljs-number">0</span> || v01 == <span class="hljs-number">0</span> || v11 == <span class="hljs-number">0</span>)
               <span class="hljs-keyword">continue</span>;

           mesh.Faces.Add((v00, v01, v10));
           mesh.Faces.Add((v10, v01, v11));
       }
   }

   <span class="hljs-comment">// ---------- åˆ›å»ºåº•éƒ¨é¡¶ç‚¹æ˜ å°„ ----------</span>
   <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> y = <span class="hljs-number">0</span>; y &lt; rows; y += step)
   {
       <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> x = <span class="hljs-number">0</span>; x &lt; cols; x += step)
       {
           <span class="hljs-comment">// åªæœ‰é¡¶éƒ¨æœ‰æ•ˆçš„ç‚¹æ‰æœ‰åº•éƒ¨é¡¶ç‚¹</span>
           <span class="hljs-keyword">if</span> (topIndexMap[y, x] != <span class="hljs-number">0</span>)
           {
               Vector3 topV = mesh.Vertices[topIndexMap[y, x] - <span class="hljs-number">1</span>];
               bottomIndexMap[y, x] = mesh.Vertices.Count + <span class="hljs-number">1</span>;
               mesh.Vertices.Add(<span class="hljs-keyword">new</span> Vector3(
                   topV.X,
                   bottomY,
                   topV.Z
               ));
           }
       }
   }

   <span class="hljs-comment">// ---------- åˆ›å»ºä¾§è¾¹å¢™ ----------</span>
   <span class="hljs-comment">// å‚ç›´è¾¹ï¼ˆXæ–¹å‘ï¼‰</span>
   <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> y = <span class="hljs-number">0</span>; y &lt; rows; y += step)
   {
       <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> x = <span class="hljs-number">0</span>; x &lt; cols - step; x += step)
       {
           <span class="hljs-built_in">int</span> idx00 = topIndexMap[y, x];
           <span class="hljs-built_in">int</span> idx10 = topIndexMap[y, x + step];

           <span class="hljs-comment">// å¦‚æœä¸¤ä¸ªé¡¶ç‚¹éƒ½å­˜åœ¨ï¼Œä¸”è‡³å°‘æœ‰ä¸€ä¸ªæ˜¯è¾¹ç¼˜ç‚¹</span>
           <span class="hljs-keyword">if</span> (idx00 != <span class="hljs-number">0</span> &amp;&amp; idx10 != <span class="hljs-number">0</span>)
           {
               <span class="hljs-built_in">bool</span> isEdge = IsEdgePoint(topIndexMap, x, y, rows, cols, step) ||
                            IsEdgePoint(topIndexMap, x + step, y, rows, cols, step);

               <span class="hljs-keyword">if</span> (isEdge)
               {
                   <span class="hljs-built_in">int</span> b00 = bottomIndexMap[y, x];
                   <span class="hljs-built_in">int</span> b10 = bottomIndexMap[y, x + step];
                   mesh.Faces.Add((idx00, b00, b10));
                   mesh.Faces.Add((idx00, b10, idx10));
               }
           }
           <span class="hljs-comment">// å¦‚æœä¸€ä¸ªå­˜åœ¨ä¸€ä¸ªä¸å­˜åœ¨ï¼Œåˆ›å»ºä¸‰è§’å½¢è¿æ¥</span>
           <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (idx00 != <span class="hljs-number">0</span> &amp;&amp; idx10 == <span class="hljs-number">0</span>)
           {
               <span class="hljs-built_in">int</span> b00 = bottomIndexMap[y, x];
               Vector3 topV = mesh.Vertices[idx00 - <span class="hljs-number">1</span>];
               <span class="hljs-built_in">int</span> b10 = mesh.Vertices.Count + <span class="hljs-number">1</span>;
               <span class="hljs-comment">// è®¡ç®—æ–°çš„åº•éƒ¨é¡¶ç‚¹åæ ‡ï¼ˆä½¿ç”¨ä¸­å¿ƒåç§»ï¼‰</span>
               <span class="hljs-built_in">float</span> xPos = (x + step) * xyScale - centerX;
               <span class="hljs-built_in">float</span> zPos = -y * xyScale - centerZ;
               mesh.Vertices.Add(<span class="hljs-keyword">new</span> Vector3(
                   xPos,
                   bottomY,
                   zPos
               ));
               mesh.Faces.Add((idx00, b00, b10));
               <span class="hljs-comment">// æ›´æ–°æ˜ å°„</span>
               bottomIndexMap[y, x + step] = b10;
           }
           <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (idx00 == <span class="hljs-number">0</span> &amp;&amp; idx10 != <span class="hljs-number">0</span>)
           {
               <span class="hljs-built_in">int</span> b10 = bottomIndexMap[y, x + step];
               Vector3 topV = mesh.Vertices[idx10 - <span class="hljs-number">1</span>];
               <span class="hljs-built_in">int</span> b00 = mesh.Vertices.Count + <span class="hljs-number">1</span>;
               <span class="hljs-comment">// è®¡ç®—æ–°çš„åº•éƒ¨é¡¶ç‚¹åæ ‡ï¼ˆä½¿ç”¨ä¸­å¿ƒåç§»ï¼‰</span>
               <span class="hljs-built_in">float</span> xPos = x * xyScale - centerX;
               <span class="hljs-built_in">float</span> zPos = -y * xyScale - centerZ;
               mesh.Vertices.Add(<span class="hljs-keyword">new</span> Vector3(
                   xPos,
                   bottomY,
                   zPos
               ));
               mesh.Faces.Add((idx10, b10, b00));
               <span class="hljs-comment">// æ›´æ–°æ˜ å°„</span>
               bottomIndexMap[y, x] = b00;
           }
       }
   }

   <span class="hljs-comment">// å‚ç›´è¾¹ï¼ˆYæ–¹å‘ï¼‰</span>
   <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> y = <span class="hljs-number">0</span>; y &lt; rows - step; y += step)
   {
       <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> x = <span class="hljs-number">0</span>; x &lt; cols; x += step)
       {
           <span class="hljs-built_in">int</span> idx00 = topIndexMap[y, x];
           <span class="hljs-built_in">int</span> idx01 = topIndexMap[y + step, x];

           <span class="hljs-keyword">if</span> (idx00 != <span class="hljs-number">0</span> &amp;&amp; idx01 != <span class="hljs-number">0</span>)
           {
               <span class="hljs-built_in">bool</span> isEdge = IsEdgePoint(topIndexMap, x, y, rows, cols, step) ||
                            IsEdgePoint(topIndexMap, x, y + step, rows, cols, step);

               <span class="hljs-keyword">if</span> (isEdge)
               {
                   <span class="hljs-built_in">int</span> b00 = bottomIndexMap[y, x];
                   <span class="hljs-built_in">int</span> b01 = bottomIndexMap[y + step, x];
                   mesh.Faces.Add((idx00, b00, b01));
                   mesh.Faces.Add((idx00, b01, idx01));
               }
           }
           <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (idx00 != <span class="hljs-number">0</span> &amp;&amp; idx01 == <span class="hljs-number">0</span>)
           {
               <span class="hljs-built_in">int</span> b00 = bottomIndexMap[y, x];
               Vector3 topV = mesh.Vertices[idx00 - <span class="hljs-number">1</span>];
               <span class="hljs-built_in">int</span> b01 = mesh.Vertices.Count + <span class="hljs-number">1</span>;
               <span class="hljs-comment">// è®¡ç®—æ–°çš„åº•éƒ¨é¡¶ç‚¹åæ ‡ï¼ˆä½¿ç”¨ä¸­å¿ƒåç§»ï¼‰</span>
               <span class="hljs-built_in">float</span> xPos = x * xyScale - centerX;
               <span class="hljs-built_in">float</span> zPos = -(y + step) * xyScale - centerZ;
               mesh.Vertices.Add(<span class="hljs-keyword">new</span> Vector3(
                   xPos,
                   bottomY,
                   zPos
               ));
               mesh.Faces.Add((idx00, b00, b01));
               bottomIndexMap[y + step, x] = b01;
           }
           <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (idx00 == <span class="hljs-number">0</span> &amp;&amp; idx01 != <span class="hljs-number">0</span>)
           {
               <span class="hljs-built_in">int</span> b01 = bottomIndexMap[y + step, x];
               Vector3 topV = mesh.Vertices[idx01 - <span class="hljs-number">1</span>];
               <span class="hljs-built_in">int</span> b00 = mesh.Vertices.Count + <span class="hljs-number">1</span>;
               <span class="hljs-comment">// è®¡ç®—æ–°çš„åº•éƒ¨é¡¶ç‚¹åæ ‡ï¼ˆä½¿ç”¨ä¸­å¿ƒåç§»ï¼‰</span>
               <span class="hljs-built_in">float</span> xPos = x * xyScale - centerX;
               <span class="hljs-built_in">float</span> zPos = -y * xyScale - centerZ;
               mesh.Vertices.Add(<span class="hljs-keyword">new</span> Vector3(
                   xPos,
                   bottomY,
                   zPos
               ));
               mesh.Faces.Add((idx01, b01, b00));
               bottomIndexMap[y, x] = b00;
           }
       }
   }

   <span class="hljs-comment">// ---------- åˆ›å»ºåº•é¢ï¼ˆåªè¦†ç›–æœ‰é¡¶éƒ¨é¡¶ç‚¹çš„åœ°æ–¹ï¼‰ ----------</span>
   <span class="hljs-comment">// åªåœ¨é¡¶éƒ¨é¢å­˜åœ¨çš„åŒºåŸŸåˆ›å»ºåº•é¢ä¸‰è§’å½¢</span>
   <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> y = <span class="hljs-number">0</span>; y &lt; rows - step; y += step)
   {
       <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> x = <span class="hljs-number">0</span>; x &lt; cols - step; x += step)
       {
           <span class="hljs-built_in">int</span> t00 = topIndexMap[y, x];
           <span class="hljs-built_in">int</span> t10 = topIndexMap[y, x + step];
           <span class="hljs-built_in">int</span> t01 = topIndexMap[y + step, x];
           <span class="hljs-built_in">int</span> t11 = topIndexMap[y + step, x + step];

           <span class="hljs-comment">// å¦‚æœè¿™ä¸ªç½‘æ ¼çš„é¡¶éƒ¨å­˜åœ¨ï¼ˆå››ä¸ªè§’éƒ½æœ‰é¡¶éƒ¨é¡¶ç‚¹ï¼‰ï¼Œåˆ™åˆ›å»ºå¯¹åº”çš„åº•é¢</span>
           <span class="hljs-keyword">if</span> (t00 != <span class="hljs-number">0</span> &amp;&amp; t10 != <span class="hljs-number">0</span> &amp;&amp; t01 != <span class="hljs-number">0</span> &amp;&amp; t11 != <span class="hljs-number">0</span>)
           {
               <span class="hljs-built_in">int</span> b00 = bottomIndexMap[y, x];
               <span class="hljs-built_in">int</span> b10 = bottomIndexMap[y, x + step];
               <span class="hljs-built_in">int</span> b01 = bottomIndexMap[y + step, x];
               <span class="hljs-built_in">int</span> b11 = bottomIndexMap[y + step, x + step];

               <span class="hljs-comment">// åº•é¢ä¸‰è§’é¢ï¼ˆæ³¨æ„æ³•çº¿æ–¹å‘å‘ä¸‹ï¼Œé¡¶ç‚¹é¡ºåºè¦é€†æ—¶é’ˆï¼‰</span>
               mesh.Faces.Add((b00, b10, b01));
               mesh.Faces.Add((b10, b11, b01));
           }
       }
   }

   <span class="hljs-comment">// ---------- å¤„ç†å­¤ç«‹çš„åº•é¢åŒºåŸŸ ----------</span>
   <span class="hljs-comment">// å¯¹äºé‚£äº›é¡¶éƒ¨åªæœ‰ä¸€ä¸ªé¡¶ç‚¹çš„åœ°æ–¹ï¼Œåˆ›å»ºå•ä¸ªä¸‰è§’å½¢çš„åº•é¢</span>
   <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> y = <span class="hljs-number">0</span>; y &lt; rows; y += step)
   {
       <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> x = <span class="hljs-number">0</span>; x &lt; cols; x += step)
       {
           <span class="hljs-comment">// å¦‚æœå½“å‰ç‚¹æœ‰é¡¶éƒ¨é¡¶ç‚¹ï¼Œä½†å‘¨å›´å››ä¸ªç½‘æ ¼ä¸­æ²¡æœ‰ä¸€ä¸ªå®Œæ•´çš„é¡¶éƒ¨é¢</span>
           <span class="hljs-keyword">if</span> (topIndexMap[y, x] != <span class="hljs-number">0</span>)
           {
               <span class="hljs-built_in">bool</span> hasAdjacentTopFace = <span class="hljs-literal">false</span>;

               <span class="hljs-comment">// æ£€æŸ¥å·¦ä¸Šç½‘æ ¼</span>
               <span class="hljs-keyword">if</span> (y - step &gt;= <span class="hljs-number">0</span> &amp;&amp; x - step &gt;= <span class="hljs-number">0</span>)
               {
                   <span class="hljs-keyword">if</span> (topIndexMap[y - step, x - step] != <span class="hljs-number">0</span> &amp;&amp;
                       topIndexMap[y - step, x] != <span class="hljs-number">0</span> &amp;&amp;
                       topIndexMap[y, x - step] != <span class="hljs-number">0</span>)
                   {
                       hasAdjacentTopFace = <span class="hljs-literal">true</span>;
                   }
               }

               <span class="hljs-comment">// æ£€æŸ¥å³ä¸Šç½‘æ ¼</span>
               <span class="hljs-keyword">if</span> (y - step &gt;= <span class="hljs-number">0</span> &amp;&amp; x + step &lt; cols)
               {
                   <span class="hljs-keyword">if</span> (topIndexMap[y - step, x] != <span class="hljs-number">0</span> &amp;&amp;
                       topIndexMap[y - step, x + step] != <span class="hljs-number">0</span> &amp;&amp;
                       topIndexMap[y, x + step] != <span class="hljs-number">0</span>)
                   {
                       hasAdjacentTopFace = <span class="hljs-literal">true</span>;
                   }
               }

               <span class="hljs-comment">// æ£€æŸ¥å·¦ä¸‹ç½‘æ ¼</span>
               <span class="hljs-keyword">if</span> (y + step &lt; rows &amp;&amp; x - step &gt;= <span class="hljs-number">0</span>)
               {
                   <span class="hljs-keyword">if</span> (topIndexMap[y, x - step] != <span class="hljs-number">0</span> &amp;&amp;
                       topIndexMap[y + step, x - step] != <span class="hljs-number">0</span> &amp;&amp;
                       topIndexMap[y + step, x] != <span class="hljs-number">0</span>)
                   {
                       hasAdjacentTopFace = <span class="hljs-literal">true</span>;
                   }
               }

               <span class="hljs-comment">// æ£€æŸ¥å³ä¸‹ç½‘æ ¼</span>
               <span class="hljs-keyword">if</span> (y + step &lt; rows &amp;&amp; x + step &lt; cols)
               {
                   <span class="hljs-keyword">if</span> (topIndexMap[y, x + step] != <span class="hljs-number">0</span> &amp;&amp;
                       topIndexMap[y + step, x] != <span class="hljs-number">0</span> &amp;&amp;
                       topIndexMap[y + step, x + step] != <span class="hljs-number">0</span>)
                   {
                       hasAdjacentTopFace = <span class="hljs-literal">true</span>;
                   }
               }

               <span class="hljs-comment">// å¦‚æœæ²¡æœ‰ç›¸é‚»çš„é¡¶éƒ¨é¢ï¼Œä¸ºè¿™ä¸ªå­¤ç«‹çš„ç‚¹åˆ›å»ºä¸€ä¸ªå°çš„ä¸‰è§’åº•é¢</span>
               <span class="hljs-keyword">if</span> (!hasAdjacentTopFace)
               {
                   <span class="hljs-built_in">int</span> b00 = bottomIndexMap[y, x];
                   <span class="hljs-comment">// åˆ›å»ºä¸¤ä¸ªç›¸é‚»çš„è™šæ‹Ÿåº•éƒ¨ç‚¹ï¼ˆä½¿ç”¨ä¸­å¿ƒåç§»ï¼‰</span>
                   Vector3 bottomCenter = mesh.Vertices[b00 - <span class="hljs-number">1</span>];
                   <span class="hljs-built_in">int</span> b01 = mesh.Vertices.Count + <span class="hljs-number">1</span>;
                   mesh.Vertices.Add(<span class="hljs-keyword">new</span> Vector3(
                       bottomCenter.X - <span class="hljs-number">0.5f</span> * xyScale,
                       bottomY,
                       bottomCenter.Z
                   ));
                   <span class="hljs-built_in">int</span> b10 = mesh.Vertices.Count + <span class="hljs-number">1</span>;
                   mesh.Vertices.Add(<span class="hljs-keyword">new</span> Vector3(
                       bottomCenter.X,
                       bottomY,
                       bottomCenter.Z + <span class="hljs-number">0.5f</span> * xyScale
                   ));

                   mesh.Faces.Add((b00, b10, b01));
               }
           }
       }
   }
</code></pre>
<h2 data-id="heading-2">ä¸‰.å°†æ¨¡å‹å†™å…¥.objæ–‡ä»¶</h2>
<p>ä¸Šä¸€æ­¥ä¸­ï¼Œæˆ‘ä»¬å·²ç»è·å¾—äº†æ¨¡å‹çš„æ‰€æœ‰é¡¶ç‚¹ä¿¡æ¯ï¼Œé¢ä¿¡æ¯ã€‚ä¸‹é¢åªè¦å°†meshå†™å…¥.objå³å¯ã€‚</p>
<pre><code class="hljs language-C#" lang="C#"><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">WriteObj</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> path, ObjMesh mesh</span>)</span>
{
    <span class="hljs-keyword">using</span> StreamWriter sw = <span class="hljs-keyword">new</span> StreamWriter(path);
    sw.WriteLine(<span class="hljs-string">"# DEM Terrain with Walls + Bottom"</span>);
    <span class="hljs-keyword">foreach</span> (<span class="hljs-keyword">var</span> v <span class="hljs-keyword">in</span> mesh.Vertices)
        sw.WriteLine(<span class="hljs-string">$"v <span class="hljs-subst">{v.X:F6}</span> <span class="hljs-subst">{v.Y:F6}</span> <span class="hljs-subst">{v.Z:F6}</span>"</span>);
    <span class="hljs-keyword">foreach</span> (<span class="hljs-keyword">var</span> f <span class="hljs-keyword">in</span> mesh.Faces)
        sw.WriteLine(<span class="hljs-string">$"f <span class="hljs-subst">{f.Item1}</span> <span class="hljs-subst">{f.Item2}</span> <span class="hljs-subst">{f.Item3}</span>"</span>);

}
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä»é›¶å¼€å§‹ç”¨Pythonç”Ÿæˆç ï¼šè‡ªå®šä¹‰æ ·å¼ä¸LogoåµŒå…¥]]></title>    <link>https://juejin.cn/post/7589212818807406655</link>    <guid>https://juejin.cn/post/7589212818807406655</guid>    <pubDate>2025-12-30T08:25:19.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589212818807406655" data-draft-id="7589475923696517139" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä»é›¶å¼€å§‹ç”¨Pythonç”Ÿæˆç ï¼šè‡ªå®šä¹‰æ ·å¼ä¸LogoåµŒå…¥"/> <meta itemprop="keywords" content="Python"/> <meta itemprop="datePublished" content="2025-12-30T08:25:19.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç«™å¤§çˆ·IP"/> <meta itemprop="url" content="https://juejin.cn/user/2905353241759261"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä»é›¶å¼€å§‹ç”¨Pythonç”Ÿæˆç ï¼šè‡ªå®šä¹‰æ ·å¼ä¸LogoåµŒå…¥
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2905353241759261/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç«™å¤§çˆ·IP
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-30T08:25:19.000Z" title="Tue Dec 30 2025 08:25:19 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>â€‹</p>
<p>äºŒç»´ç å’Œæ¡å½¢ç å·²æˆä¸ºç°ä»£ä¿¡æ¯ä¼ é€’çš„é‡è¦å·¥å…·ï¼Œä»æ”¯ä»˜æ‰«ç åˆ°äº§å“æº¯æºï¼Œä»æ´»åŠ¨ç­¾åˆ°åˆ°æ•°æ®å­˜å‚¨ï¼Œè¿™äº›é»‘ç™½æ–¹å—å’Œçº¿æ¡èƒŒåè—ç€å·¨å¤§çš„åº”ç”¨æ½œåŠ›ã€‚ä½†é»˜è®¤ç”Ÿæˆçš„ç å¾€å¾€åƒç¯‡ä¸€å¾‹ï¼Œå¦‚ä½•è®©å®ƒä»¬æ—¢å®ç”¨åˆç¾è§‚ï¼Ÿæœ¬æ–‡å°†å¸¦ä½ ç”¨Pythonä»é›¶å®ç°ç ç”Ÿæˆï¼Œå¹¶æŒæ¡è‡ªå®šä¹‰æ ·å¼å’ŒåµŒå…¥Logoçš„æ ¸å¿ƒæŠ€å·§ã€‚</p>
<hr/>
<h2 data-id="heading-0">ä¸€ã€åŸºç¡€å‡†å¤‡ï¼šé€‰æ‹©åˆé€‚çš„Pythonåº“</h2>
<p>ç”Ÿæˆç çš„æ ¸å¿ƒæ˜¯é€‰æ‹©å¯é çš„åº“ã€‚Pythonç”Ÿæ€ä¸­æœ‰å¤šä¸ªä¼˜ç§€é€‰é¡¹ï¼š</p>
<h3 data-id="heading-1">1.1 äºŒç»´ç ç”Ÿæˆï¼šqrcodeåº“</h3>
<p><code>qrcode</code>æ˜¯Pythonæœ€æµè¡Œçš„äºŒç»´ç ç”Ÿæˆåº“ï¼Œæ”¯æŒå¤šç§çº é”™çº§åˆ«å’Œå°ºå¯¸è°ƒæ•´ã€‚å®‰è£…åªéœ€ï¼š</p>
<pre><code class="hljs language-css" lang="css">pip install qrcode<span class="hljs-selector-attr">[pil]</span>
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<p>ï¼ˆ<code>[pil]</code>è¡¨ç¤ºåŒæ—¶å®‰è£…Pillowå›¾åƒå¤„ç†åº“ï¼Œç”¨äºåç»­æ ·å¼å®šåˆ¶ï¼‰</p>
<h3 data-id="heading-2">1.2 æ¡å½¢ç ç”Ÿæˆï¼špython-barcodeåº“</h3>
<p>å¯¹äºæ¡å½¢ç ï¼ˆå¦‚EAN-13ã€UPC-Aç­‰ï¼‰ï¼Œ<code>python-barcode</code>æ˜¯ä¸“ä¸šé€‰æ‹©ï¼š</p>
<pre><code class="hljs">pip install python-barcode
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<p>å®ƒæ”¯æŒ17ç§æ ‡å‡†æ¡å½¢ç æ ¼å¼ï¼Œè¾“å‡ºä¸ºSVGæˆ–PILå›¾åƒã€‚</p>
<h3 data-id="heading-3">1.3 å›¾åƒå¤„ç†ï¼šPillowåº“</h3>
<p>æ— è®ºäºŒç»´ç è¿˜æ˜¯æ¡å½¢ç ï¼Œæœ€ç»ˆéƒ½éœ€è¦ä¸Logoæˆ–èƒŒæ™¯èåˆï¼Œ<code>Pillow</code>ï¼ˆPILï¼‰æ˜¯Pythonå›¾åƒå¤„ç†çš„æ ‡é…ï¼š</p>
<pre><code class="hljs">pip install pillow
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-4">äºŒã€åŸºç¡€ç ç”Ÿæˆï¼šä»é»‘ç™½æ–¹å—å¼€å§‹</h2>
<h3 data-id="heading-5">2.1 ç”Ÿæˆç®€å•äºŒç»´ç </h3>
<p>ç”¨<code>qrcode</code>ç”ŸæˆåŸºç¡€äºŒç»´ç åªéœ€3è¡Œä»£ç ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">import qrcode

<span class="hljs-comment"># åˆ›å»ºäºŒç»´ç å®ä¾‹</span>
<span class="hljs-attr">qr</span> = qrcode.QRCode(
    <span class="hljs-attr">version</span>=<span class="hljs-number">1</span>,  <span class="hljs-comment"># æ§åˆ¶äºŒç»´ç å¤§å°ï¼ˆ1-40ï¼‰</span>
    <span class="hljs-attr">error_correction</span>=qrcode.constants.ERROR_CORRECT_L,  <span class="hljs-comment"># çº é”™çº§åˆ«</span>
    <span class="hljs-attr">box_size</span>=<span class="hljs-number">10</span>,  <span class="hljs-comment"># æ¯ä¸ª"ç‚¹"çš„åƒç´ æ•°</span>
    <span class="hljs-attr">border</span>=<span class="hljs-number">4</span>,  <span class="hljs-comment"># è¾¹æ¡†å®½åº¦ï¼ˆå•ä½ï¼šbox_sizeï¼‰</span>
)

<span class="hljs-comment"># æ·»åŠ æ•°æ®</span>
qr.add_data("https://example.com")
qr.make(<span class="hljs-attr">fit</span>=<span class="hljs-literal">True</span>)  <span class="hljs-comment"># è‡ªåŠ¨è°ƒæ•´å°ºå¯¸</span>

<span class="hljs-comment"># ç”Ÿæˆå›¾åƒå¹¶ä¿å­˜</span>
<span class="hljs-attr">img</span> = qr.make_image(fill_color=<span class="hljs-string">"black"</span>, back_color=<span class="hljs-string">"white"</span>)
img.save("basic_qr.png")
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<p>è¿è¡Œåä¼šç”Ÿæˆä¸€ä¸ªé»‘ç™½åˆ†æ˜çš„äºŒç»´ç å›¾ç‰‡ã€‚</p>
<h3 data-id="heading-6">2.2 ç”Ÿæˆæ ‡å‡†æ¡å½¢ç </h3>
<p>ä»¥EAN-13æ ¼å¼ä¸ºä¾‹ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">import barcode
from barcode.writer import ImageWriter

<span class="hljs-comment"># åˆ›å»ºæ¡å½¢ç ç”Ÿæˆå™¨</span>
<span class="hljs-attr">ean</span> = barcode.get_barcode_class(<span class="hljs-string">'ean13'</span>)
<span class="hljs-attr">code</span> = ean(<span class="hljs-string">"5901234123457"</span>, writer=ImageWriter())  <span class="hljs-comment"># EAN-13éœ€è¦12ä½æ•°å­—</span>

<span class="hljs-comment"># ä¿å­˜ä¸ºPNGæ–‡ä»¶</span>
<span class="hljs-attr">filename</span> = code.save(<span class="hljs-string">"basic_barcode"</span>)  <span class="hljs-comment"># è‡ªåŠ¨æ·»åŠ .pngåç¼€</span>
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<p>ç”Ÿæˆçš„æ¡å½¢ç ä¼šä¿å­˜åœ¨å½“å‰ç›®å½•ã€‚</p>
<hr/>
<h2 data-id="heading-7">ä¸‰ã€è¿›é˜¶æŠ€å·§ï¼šè‡ªå®šä¹‰ç çš„æ ·å¼</h2>
<h3 data-id="heading-8">3.1 äºŒç»´ç é¢œè‰²å®šåˆ¶</h3>
<p>é€šè¿‡<code>fill_color</code>å’Œ<code>back_color</code>å‚æ•°å¯è½»æ¾æ”¹å˜é¢œè‰²ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">img</span> = qr.make_image(
    <span class="hljs-attr">fill_color</span>=<span class="hljs-string">"#FF5733"</span>,  <span class="hljs-comment"># äºŒç»´ç é¢œè‰²ï¼ˆæ”¯æŒåå…­è¿›åˆ¶ï¼‰</span>
    <span class="hljs-attr">back_color</span>=<span class="hljs-string">"#33FF57"</span>   <span class="hljs-comment"># èƒŒæ™¯é¢œè‰²</span>
)
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<h3 data-id="heading-9">3.2 äºŒç»´ç å½¢çŠ¶å˜å½¢</h3>
<p>é»˜è®¤äºŒç»´ç æ˜¯æ­£æ–¹å½¢ï¼Œä½†å¯é€šè¿‡<code>module_shape</code>å‚æ•°æ”¹ä¸ºåœ†å½¢æˆ–å…¶ä»–å½¢çŠ¶ï¼ˆéœ€<code>qrcode</code>Â 7.0+ç‰ˆæœ¬ï¼‰ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">from qrcode.image.styledpil import StyledPilImage
from qrcode.image.styles.moduledrawers import RoundedModuleDrawer

<span class="hljs-attr">qr</span> = qrcode.QRCode()
qr.add_data("https://example.com")
<span class="hljs-attr">img</span> = qr.make_image(
    <span class="hljs-attr">image_factory</span>=StyledPilImage,
    <span class="hljs-attr">module_drawer</span>=RoundedModuleDrawer(),  <span class="hljs-comment"># ä½¿ç”¨åœ†å½¢æ¨¡å—</span>
    <span class="hljs-attr">eye_drawer</span>=RoundedModuleDrawer()     <span class="hljs-comment"># å®šä½å›¾æ¡ˆä¹Ÿåœ†å½¢</span>
)
img.save("rounded_qr.png")
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<h3 data-id="heading-10">3.3 æ¡å½¢ç æ ·å¼è°ƒæ•´</h3>
<p><code>python-barcode</code>é€šè¿‡<code>writer</code>å‚æ•°æ§åˆ¶æ ·å¼ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> barcode.writer <span class="hljs-keyword">import</span> ImageWriter

options = {
    <span class="hljs-string">"module_width"</span>: <span class="hljs-number">0.2</span>,          <span class="hljs-comment"># å•ä¸ªæ¡çš„å®½åº¦ï¼ˆmmï¼‰</span>
    <span class="hljs-string">"module_height"</span>: <span class="hljs-number">15.0</span>,        <span class="hljs-comment"># æ¡å½¢ç é«˜åº¦ï¼ˆmmï¼‰</span>
    <span class="hljs-string">"font_size"</span>: <span class="hljs-number">10</span>,              <span class="hljs-comment"># åº•éƒ¨æ•°å­—å­—ä½“å¤§å°</span>
    <span class="hljs-string">"text_distance"</span>: <span class="hljs-number">5.0</span>,         <span class="hljs-comment"># æ•°å­—ä¸æ¡å½¢ç è·ç¦»ï¼ˆmmï¼‰</span>
    <span class="hljs-string">"center_text"</span>: <span class="hljs-literal">True</span>           <span class="hljs-comment"># æ•°å­—å±…ä¸­</span>
}

ean = barcode.get_barcode_class(<span class="hljs-string">'ean13'</span>)
code = ean(<span class="hljs-string">"5901234123457"</span>, writer=ImageWriter(), writer_options=options)
code.save(<span class="hljs-string">"styled_barcode"</span>)
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-11">å››ã€æ ¸å¿ƒæŠ€èƒ½ï¼šåœ¨ç ä¸­åµŒå…¥Logo</h2>
<h3 data-id="heading-12">4.1 äºŒç»´ç åµŒå…¥Logo</h3>
<p>å…³é”®æ­¥éª¤ï¼š</p>
<ol>
<li>ç”ŸæˆåŸºç¡€äºŒç»´ç </li>
<li>ç”¨Pillowæ‰“å¼€äºŒç»´ç å›¾åƒ</li>
<li>æ‰“å¼€Logoå›¾åƒå¹¶è°ƒæ•´å¤§å°</li>
<li>å°†Logoç²˜è´´åˆ°äºŒç»´ç ä¸­å¿ƒ</li>
<li>ä¿å­˜æœ€ç»ˆå›¾åƒ</li>
</ol>
<p>å®Œæ•´ä»£ç ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">import qrcode
from PIL import Image

def generate_qr_with_logo(data, logo_path, output_path, <span class="hljs-attr">qr_size</span>=<span class="hljs-number">400</span>, logo_size=<span class="hljs-number">80</span>):
    <span class="hljs-comment"># ç”ŸæˆäºŒç»´ç </span>
    <span class="hljs-attr">qr</span> = qrcode.QRCode(
        <span class="hljs-attr">version</span>=<span class="hljs-number">1</span>,
        <span class="hljs-attr">error_correction</span>=qrcode.constants.ERROR_CORRECT_H,  <span class="hljs-comment"># é«˜çº é”™çº§åˆ«ï¼ˆ30%å®¹é”™ï¼‰</span>
        <span class="hljs-attr">box_size</span>=<span class="hljs-number">10</span>,
        <span class="hljs-attr">border</span>=<span class="hljs-number">4</span>
    )
    qr.add_data(data)
    qr.make(<span class="hljs-attr">fit</span>=<span class="hljs-literal">True</span>)
    
    <span class="hljs-comment"># åˆ›å»ºäºŒç»´ç å›¾åƒ</span>
    <span class="hljs-attr">img_qr</span> = qr.make_image(fill_color=<span class="hljs-string">"black"</span>, back_color=<span class="hljs-string">"white"</span>).convert(<span class="hljs-string">"RGB"</span>)
    <span class="hljs-attr">img_qr</span> = img_qr.resize((qr_size, qr_size))  <span class="hljs-comment"># è°ƒæ•´äºŒç»´ç å¤§å°</span>
    
    <span class="hljs-comment"># æ‰“å¼€å¹¶è°ƒæ•´Logo</span>
    try:
        <span class="hljs-attr">img_logo</span> = Image.open(logo_path).convert(<span class="hljs-string">"RGBA"</span>)
        <span class="hljs-attr">img_logo</span> = img_logo.resize((logo_size, logo_size))
        
        <span class="hljs-comment"># è®¡ç®—Logoä½ç½®ï¼ˆå±…ä¸­ï¼‰</span>
        <span class="hljs-attr">position</span> = ((qr_size - logo_size) // <span class="hljs-number">2</span>, (qr_size - logo_size) // <span class="hljs-number">2</span>)
        
        <span class="hljs-comment"># åˆ›å»ºå¸¦é€æ˜é€šé“çš„äºŒç»´ç èƒŒæ™¯</span>
        <span class="hljs-attr">img_qr_with_alpha</span> = Image.new(<span class="hljs-string">"RGBA"</span>, img_qr.size, (<span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">0</span>))
        img_qr_with_alpha.paste(img_qr, (0, 0))
        
        <span class="hljs-comment"># ç¡®ä¿LogoåŒºåŸŸå¯è¦†ç›–ï¼ˆé«˜çº é”™çº§åˆ«ä¿éšœå¯è¯»æ€§ï¼‰</span>
        img_qr_with_alpha.paste(img_logo, position, img_logo)
        
        <span class="hljs-comment"># è½¬æ¢ä¸ºRGBæ¨¡å¼ä¿å­˜</span>
        <span class="hljs-attr">result</span> = img_qr_with_alpha.convert(<span class="hljs-string">"RGB"</span>)
        result.save(output_path)
        print(f"äºŒç»´ç å·²ä¿å­˜è‡³: {output_path}")
    except Exception as e:
        print(f"å¤„ç†Logoæ—¶å‡ºé”™: {e}")
        img_qr.save(output_path)  <span class="hljs-comment"># å‡ºé”™æ—¶ä¿å­˜æ— Logoç‰ˆæœ¬</span>

<span class="hljs-comment"># ä½¿ç”¨ç¤ºä¾‹</span>
generate_qr_with_logo(
    <span class="hljs-attr">data</span>=<span class="hljs-string">"https://example.com"</span>,
    <span class="hljs-attr">logo_path</span>=<span class="hljs-string">"logo.png"</span>,
    <span class="hljs-attr">output_path</span>=<span class="hljs-string">"qr_with_logo.png"</span>,
    <span class="hljs-attr">qr_size</span>=<span class="hljs-number">600</span>,
    <span class="hljs-attr">logo_size</span>=<span class="hljs-number">120</span>
)
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<h3 data-id="heading-13">4.2 æ¡å½¢ç åµŒå…¥Logoï¼ˆè°¨æ…ä½¿ç”¨ï¼‰</h3>
<p>æ¡å½¢ç å¯¹LogoåµŒå…¥æ›´æ•æ„Ÿï¼Œå»ºè®®ï¼š</p>
<ol>
<li>å°†Logoæ”¾åœ¨æ¡å½¢ç ä¸Šæ–¹/ä¸‹æ–¹ç©ºç™½å¤„</li>
<li>é¿å…é®æŒ¡æ¡å½¢ç æœ¬èº«</li>
<li>ä½¿ç”¨é«˜å¯¹æ¯”åº¦é¢œè‰²</li>
</ol>
<p>ç¤ºä¾‹ä»£ç ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> barcode.writer <span class="hljs-keyword">import</span> ImageWriter
<span class="hljs-keyword">from</span> PIL <span class="hljs-keyword">import</span> Image, ImageDraw, ImageFont

<span class="hljs-keyword">def</span> <span class="hljs-title function_">generate_barcode_with_logo</span>(<span class="hljs-params">data, logo_path, output_path</span>):
    <span class="hljs-comment"># ç”Ÿæˆæ¡å½¢ç </span>
    ean = barcode.get_barcode_class(<span class="hljs-string">'ean13'</span>)
    options = {
        <span class="hljs-string">"module_width"</span>: <span class="hljs-number">0.3</span>,
        <span class="hljs-string">"module_height"</span>: <span class="hljs-number">30.0</span>,
        <span class="hljs-string">"font_size"</span>: <span class="hljs-number">12</span>,
        <span class="hljs-string">"text_distance"</span>: <span class="hljs-number">5.0</span>
    }
    code = ean(data, writer=ImageWriter(), writer_options=options)
    filename = code.save(<span class="hljs-string">"temp_barcode"</span>)  <span class="hljs-comment"># ä¸´æ—¶ä¿å­˜</span>
    
    <span class="hljs-comment"># æ‰“å¼€æ¡å½¢ç å’ŒLogo</span>
    img_barcode = Image.<span class="hljs-built_in">open</span>(<span class="hljs-string">"temp_barcode.png"</span>)
    <span class="hljs-keyword">try</span>:
        img_logo = Image.<span class="hljs-built_in">open</span>(logo_path).convert(<span class="hljs-string">"RGBA"</span>)
        img_logo = img_logo.resize((<span class="hljs-number">100</span>, <span class="hljs-number">50</span>))  <span class="hljs-comment"># è°ƒæ•´Logoå¤§å°</span>
        
        <span class="hljs-comment"># åˆ›å»ºæ–°å›¾åƒï¼ˆæ¡å½¢ç é«˜åº¦+Logoé«˜åº¦+é—´è·ï¼‰</span>
        new_height = img_barcode.height + img_logo.height + <span class="hljs-number">20</span>
        new_img = Image.new(<span class="hljs-string">"RGB"</span>, (img_barcode.width, new_height), <span class="hljs-string">"white"</span>)
        
        <span class="hljs-comment"># ç²˜è´´æ¡å½¢ç å’ŒLogo</span>
        new_img.paste(img_barcode, (<span class="hljs-number">0</span>, <span class="hljs-number">0</span>))
        new_img.paste(img_logo, ((img_barcode.width - img_logo.width) // <span class="hljs-number">2</span>, img_barcode.height + <span class="hljs-number">10</span>), img_logo)
        
        new_img.save(output_path)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ¡å½¢ç å·²ä¿å­˜è‡³: <span class="hljs-subst">{output_path}</span>"</span>)
    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"å¤„ç†Logoæ—¶å‡ºé”™: <span class="hljs-subst">{e}</span>"</span>)
        img_barcode.save(output_path)  <span class="hljs-comment"># å‡ºé”™æ—¶ä¿å­˜æ— Logoç‰ˆæœ¬</span>
    <span class="hljs-keyword">finally</span>:
        <span class="hljs-keyword">import</span> os
        <span class="hljs-keyword">if</span> os.path.exists(<span class="hljs-string">"temp_barcode.png"</span>):
            os.remove(<span class="hljs-string">"temp_barcode.png"</span>)

<span class="hljs-comment"># ä½¿ç”¨ç¤ºä¾‹</span>
generate_barcode_with_logo(
    data=<span class="hljs-string">"5901234123457"</span>,
    logo_path=<span class="hljs-string">"logo.png"</span>,
    output_path=<span class="hljs-string">"barcode_with_logo.png"</span>
)
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-14">äº”ã€å®æˆ˜æ¡ˆä¾‹ï¼šåˆ¶ä½œæ´»åŠ¨ç­¾åˆ°äºŒç»´ç </h2>
<p>å‡è®¾éœ€è¦ä¸ºä¸€åœºæ´»åŠ¨ç”Ÿæˆå¸¦Logoçš„ç­¾åˆ°äºŒç»´ç ï¼Œè¦æ±‚ï¼š</p>
<ul>
<li>åŒ…å«æ´»åŠ¨ä¸“å±URL</li>
<li>ä½¿ç”¨æ´»åŠ¨ä¸»é¢˜è‰²</li>
<li>åµŒå…¥æ´»åŠ¨Logo</li>
<li>å°ºå¯¸é€‚åˆæ‰“å°ï¼ˆA4çº¸æ¯é¡µ4ä¸ªï¼‰</li>
</ul>
<p>å®Œæ•´è§£å†³æ–¹æ¡ˆï¼š</p>
<pre><code class="hljs language-ini" lang="ini">import qrcode
from PIL import Image
import os

def generate_event_qr(event_url, logo_path, output_folder, <span class="hljs-attr">count</span>=<span class="hljs-number">100</span>):
    <span class="hljs-comment"># ç¡®ä¿è¾“å‡ºç›®å½•å­˜åœ¨</span>
    os.makedirs(output_folder, <span class="hljs-attr">exist_ok</span>=<span class="hljs-literal">True</span>)
    
    <span class="hljs-comment"># äºŒç»´ç é…ç½®</span>
    <span class="hljs-attr">qr_config</span> = {
        "version": 5,  <span class="hljs-comment"># è¾ƒå¤§å°ºå¯¸ä»¥å®¹çº³æ›´å¤šæ•°æ®</span>
        "error_correction": qrcode.constants.ERROR_CORRECT_H,
        "box_size": 8,
        "border": 2
    }
    
    <span class="hljs-comment"># é¢œè‰²é…ç½®ï¼ˆæ´»åŠ¨ä¸»é¢˜è‰²ï¼‰</span>
    <span class="hljs-attr">fill_color</span> = (<span class="hljs-number">0</span>, <span class="hljs-number">102</span>, <span class="hljs-number">204</span>)  <span class="hljs-comment"># è“è‰²</span>
    <span class="hljs-attr">back_color</span> = (<span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">255</span>)  <span class="hljs-comment"># ç™½è‰²</span>
    
    <span class="hljs-comment"># Logoé…ç½®</span>
    <span class="hljs-attr">logo_size</span> = <span class="hljs-number">80</span>  <span class="hljs-comment"># åƒç´ </span>
    
    for i in range(1, count + 1):
        <span class="hljs-comment"># ç”Ÿæˆå¸¦ç¼–å·çš„URLï¼ˆå‡è®¾URLæ ¼å¼ä¸º https://example.com/checkin?id=XXXï¼‰</span>
        <span class="hljs-attr">current_url</span> = f<span class="hljs-string">"{event_url}?id={i:03d}"</span>
        
        <span class="hljs-comment"># ç”ŸæˆäºŒç»´ç </span>
        <span class="hljs-attr">qr</span> = qrcode.QRCode(**qr_config)
        qr.add_data(current_url)
        qr.make(<span class="hljs-attr">fit</span>=<span class="hljs-literal">True</span>)
        
        <span class="hljs-comment"># åˆ›å»ºå›¾åƒ</span>
        <span class="hljs-attr">img_qr</span> = qr.make_image(fill_color=fill_color, back_color=back_color).convert(<span class="hljs-string">"RGB"</span>)
        <span class="hljs-attr">img_qr</span> = img_qr.resize((<span class="hljs-number">400</span>, <span class="hljs-number">400</span>))  <span class="hljs-comment"># æœ€ç»ˆå°ºå¯¸</span>
        
        <span class="hljs-comment"># å¤„ç†Logo</span>
        try:
            <span class="hljs-attr">img_logo</span> = Image.open(logo_path).convert(<span class="hljs-string">"RGBA"</span>)
            <span class="hljs-attr">img_logo</span> = img_logo.resize((logo_size, logo_size))
            
            <span class="hljs-comment"># åˆ›å»ºå¸¦é€æ˜é€šé“çš„äºŒç»´ç </span>
            <span class="hljs-attr">img_qr_with_alpha</span> = Image.new(<span class="hljs-string">"RGBA"</span>, img_qr.size, (<span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">0</span>))
            img_qr_with_alpha.paste(img_qr, (0, 0))
            
            <span class="hljs-comment"># ç²˜è´´Logoï¼ˆå±…ä¸­ï¼‰</span>
            <span class="hljs-attr">position</span> = ((<span class="hljs-number">400</span> - logo_size) // <span class="hljs-number">2</span>, (<span class="hljs-number">400</span> - logo_size) // <span class="hljs-number">2</span>)
            img_qr_with_alpha.paste(img_logo, position, img_logo)
            
            <span class="hljs-comment"># è½¬æ¢ä¸ºRGB</span>
            <span class="hljs-attr">final_img</span> = img_qr_with_alpha.convert(<span class="hljs-string">"RGB"</span>)
            
            <span class="hljs-comment"># æ·»åŠ ç¼–å·æ–‡å­—ï¼ˆåº•éƒ¨å±…ä¸­ï¼‰</span>
            <span class="hljs-attr">draw</span> = ImageDraw.Draw(final_img)
            <span class="hljs-attr">font</span> = ImageFont.<span class="hljs-literal">true</span>type(<span class="hljs-string">"arial.ttf"</span>, <span class="hljs-number">24</span>)  <span class="hljs-comment"># ä½¿ç”¨ç³»ç»Ÿå­—ä½“</span>
            <span class="hljs-attr">text</span> = f<span class="hljs-string">"ç­¾åˆ°ç  #{i:03d}"</span>
            text_width, <span class="hljs-attr">text_height</span> = draw.textsize(text, font=font)
            draw.text(
                ((400 - text_width) // 2, 370),
                text,
                <span class="hljs-attr">fill</span>=<span class="hljs-string">"black"</span>,
                <span class="hljs-attr">font</span>=font
            )
            
            <span class="hljs-comment"># ä¿å­˜</span>
            <span class="hljs-attr">output_path</span> = os.path.join(output_folder, f<span class="hljs-string">"qr_{i:03d}.png"</span>)
            final_img.save(output_path)
            print(f"å·²ç”Ÿæˆ: {output_path}")
        except Exception as e:
            print(f"ç”Ÿæˆç­¾åˆ°ç  {i} æ—¶å‡ºé”™: {e}")
            <span class="hljs-comment"># ä¿å­˜æ— Logoç‰ˆæœ¬</span>
            img_qr.save(os.path.join(output_folder, f"qr_{i:03d}_no_logo.png"))

<span class="hljs-comment"># ä½¿ç”¨ç¤ºä¾‹</span>
generate_event_qr(
    <span class="hljs-attr">event_url</span>=<span class="hljs-string">"https://example.com/checkin"</span>,
    <span class="hljs-attr">logo_path</span>=<span class="hljs-string">"event_logo.png"</span>,
    <span class="hljs-attr">output_folder</span>=<span class="hljs-string">"event_qrcodes"</span>,
    <span class="hljs-attr">count</span>=<span class="hljs-number">20</span>
)
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-15">å…­ã€å¸¸è§é—®é¢˜Q&amp;A</h2>
<p><strong>Q1ï¼šç”Ÿæˆçš„äºŒç»´ç æ‰«æä¸å‡ºæ¥æ€ä¹ˆåŠï¼Ÿ</strong><br/>
Aï¼šæ£€æŸ¥ä»¥ä¸‹åŸå› ï¼š</p>
<ol>
<li>çº é”™çº§åˆ«è®¾ç½®è¿‡ä½ï¼ˆå»ºè®®ä½¿ç”¨<code>ERROR_CORRECT_H</code>ï¼‰</li>
<li>Logoè¿‡å¤§é®æŒ¡äº†å…³é”®å®šä½å›¾æ¡ˆï¼ˆç¡®ä¿Logoä¸è¶…è¿‡äºŒç»´ç é¢ç§¯çš„30%ï¼‰</li>
<li>é¢œè‰²å¯¹æ¯”åº¦ä¸è¶³ï¼ˆé»‘ç™½å¯¹æ¯”æœ€å¯é ï¼Œå½©è‰²éœ€ç¡®ä¿æ˜æš—å·®å¼‚æ˜æ˜¾ï¼‰</li>
<li>å›¾åƒæ¨¡ç³Šï¼ˆä¿å­˜æ—¶é€‰æ‹©é«˜DPIï¼Œå¦‚300dpiï¼‰</li>
</ol>
<p><strong>Q2ï¼šå¦‚ä½•æ‰¹é‡ç”Ÿæˆä¸åŒå†…å®¹çš„äºŒç»´ç ï¼Ÿ</strong><br/>
Aï¼šå°†æ•°æ®å­˜å‚¨åœ¨åˆ—è¡¨æˆ–CSVæ–‡ä»¶ä¸­ï¼Œç”¨å¾ªç¯éå†ç”Ÿæˆã€‚ä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">import csv

<span class="hljs-attr">data_list</span> = [
    {<span class="hljs-string">"id"</span>: <span class="hljs-number">1</span>, <span class="hljs-string">"url"</span>: <span class="hljs-string">"https://example.com/1"</span>},
    {<span class="hljs-string">"id"</span>: <span class="hljs-number">2</span>, <span class="hljs-string">"url"</span>: <span class="hljs-string">"https://example.com/2"</span>}
]

for item in data_list:
    <span class="hljs-attr">qr</span> = qrcode.QRCode()
    qr.add_data(item<span class="hljs-section">["url"]</span>)
    <span class="hljs-comment"># ...å…¶ä½™ç”Ÿæˆä»£ç ...</span>
    img.save(f"qr_{item<span class="hljs-section">['id']</span>}.png")
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<p><strong>Q3ï¼šæ¡å½¢ç å’ŒäºŒç»´ç æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</strong><br/>
Aï¼š</p>






























<table><thead><tr><th>ç‰¹æ€§</th><th>äºŒç»´ç </th><th>æ¡å½¢ç </th></tr></thead><tbody><tr><td>æ•°æ®å®¹é‡</td><td>å¯å­˜å‚¨æ•°ç™¾å­—ç¬¦</td><td>é€šå¸¸20-30å­—ç¬¦</td></tr><tr><td>çº é”™èƒ½åŠ›</td><td>é«˜ï¼ˆå¯æ¢å¤30%æŸåï¼‰</td><td>ä½ï¼ˆéƒ¨åˆ†æŸåæ— æ³•è¯†åˆ«ï¼‰</td></tr><tr><td>æ‰«ææ–¹å‘</td><td>360åº¦å…¨å‘æ‰«æ</td><td>éœ€å›ºå®šæ–¹å‘æ‰«æ</td></tr><tr><td>åº”ç”¨åœºæ™¯</td><td>ç½‘å€ã€è”ç³»ä¿¡æ¯ã€å¤æ‚æ•°æ®</td><td>å•†å“ä»·æ ¼ã€åº“å­˜ç®¡ç†</td></tr></tbody></table>
<p><strong>Q4ï¼šå¦‚ä½•è°ƒæ•´äºŒç»´ç çš„å°ºå¯¸ï¼Ÿ</strong><br/>
Aï¼šé€šè¿‡<code>box_size</code>å’Œ<code>version</code>å‚æ•°æ§åˆ¶ï¼š</p>
<ul>
<li>
<p><code>box_size</code>ï¼šæ¯ä¸ª"ç‚¹"çš„åƒç´ æ•°ï¼ˆå¦‚è®¾ä¸º10ï¼Œåˆ™10x10åƒç´ ä¸€ä¸ªç‚¹ï¼‰</p>
</li>
<li>
<p><code>version</code>ï¼šäºŒç»´ç ç‰ˆæœ¬ï¼ˆ1-40ï¼‰ï¼Œç‰ˆæœ¬è¶Šé«˜å°ºå¯¸è¶Šå¤§ï¼Œå¯å­˜å‚¨æ›´å¤šæ•°æ®<br/>
ä¾‹å¦‚ç”Ÿæˆå¤§å°ºå¯¸äºŒç»´ç ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">qr</span> = qrcode.QRCode(
    <span class="hljs-attr">version</span>=<span class="hljs-number">10</span>,  <span class="hljs-comment"># è¾ƒå¤§ç‰ˆæœ¬</span>
    <span class="hljs-attr">box_size</span>=<span class="hljs-number">15</span>,  <span class="hljs-comment"># æ¯ä¸ªç‚¹15åƒç´ </span>
    <span class="hljs-attr">border</span>=<span class="hljs-number">4</span>
)
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
</li>
</ul>
<p><strong>Q5ï¼šç”Ÿæˆçš„å›¾åƒæœ‰é”¯é½¿æ€ä¹ˆåŠï¼Ÿ</strong><br/>
Aï¼šåœ¨ä¿å­˜æ—¶æŒ‡å®šæŠ—é”¯é½¿å‚æ•°ï¼ˆPillowçš„<code>resize</code>æ–¹æ³•ï¼‰ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">img</span> = img.resize((<span class="hljs-number">800</span>, <span class="hljs-number">800</span>), Image.LANCZOS)  <span class="hljs-comment"># é«˜è´¨é‡ç¼©æ”¾</span>
img.save("smooth_qr.png", <span class="hljs-attr">dpi</span>=(<span class="hljs-number">300</span>, <span class="hljs-number">300</span>))   <span class="hljs-comment"># é«˜DPIä¿å­˜</span>
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-16">ç»“è¯­</h2>
<p>ä»åŸºç¡€ç”Ÿæˆåˆ°é«˜çº§å®šåˆ¶ï¼ŒPythonæä¾›äº†å®Œæ•´çš„å·¥å…·é“¾è®©ç ç”Ÿæˆå˜å¾—ç®€å•è€Œçµæ´»ã€‚é€šè¿‡æŒæ¡é¢œè‰²ã€å½¢çŠ¶ã€LogoåµŒå…¥ç­‰æŠ€å·§ï¼Œä½ å¯ä»¥åˆ›å»ºå‡ºæ—¢å®ç”¨åˆç¾è§‚çš„ç ã€‚è®°ä½ï¼šé«˜çº é”™çº§åˆ«æ˜¯LogoåµŒå…¥çš„å®‰å…¨ä¿éšœï¼Œé¢œè‰²å¯¹æ¯”åº¦æ˜¯æ‰«ææˆåŠŸçš„å…³é”®ï¼Œè€Œæ‰¹é‡å¤„ç†èƒ½åŠ›åˆ™æ˜¯å¤§è§„æ¨¡åº”ç”¨çš„åŸºçŸ³ã€‚ç°åœ¨ï¼Œç”¨è¿™äº›çŸ¥è¯†å»è®¾è®¡ä½ çš„ä¸“å±ç å§ï¼</p>
<p>â€‹</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å†…å­˜å¼‚å¸¸]]></title>    <link>https://juejin.cn/post/7589214068094074899</link>    <guid>https://juejin.cn/post/7589214068094074899</guid>    <pubDate>2025-12-30T07:49:52.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589214068094074899" data-draft-id="7589214643501547583" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å†…å­˜å¼‚å¸¸"/> <meta itemprop="keywords" content="C++"/> <meta itemprop="datePublished" content="2025-12-30T07:49:52.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ¸©å®‡é£"/> <meta itemprop="url" content="https://juejin.cn/user/4300945219403368"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å†…å­˜å¼‚å¸¸
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4300945219403368/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ¸©å®‡é£
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-30T07:49:52.000Z" title="Tue Dec 30 2025 07:49:52 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»12åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å†…å­˜å¼‚å¸¸(Memory Exception)æ˜¯ç¨‹åºè¿è¡Œæ—¶è®¿é—®éæ³•å†…å­˜åœ°å€æˆ–è¿åå†…å­˜è®¿é—®è§„åˆ™è€Œè§¦å‘çš„é”™è¯¯ã€‚è¿™ç±»é—®é¢˜æ˜¯ç³»ç»Ÿçº§ç¼–ç¨‹ä¸­æœ€å¸¸è§ä¹Ÿæœ€éš¾è°ƒè¯•çš„é”™è¯¯ä¹‹ä¸€ï¼ŒåŒ…æ‹¬ç©ºæŒ‡é’ˆè§£å¼•ç”¨ã€ç¼“å†²åŒºæº¢å‡ºã€ä½¿ç”¨å·²é‡Šæ”¾çš„å†…å­˜ç­‰ã€‚æœ¬æ–‡ä»¥ C++ ä¸ºä¾‹ï¼Œæ·±å…¥å‰–æå†…å­˜å¼‚å¸¸çš„åº•å±‚åŸç†ã€å¸¸è§ç±»å‹ã€æ£€æµ‹æ–¹æ³•å’Œé¢„é˜²ç­–ç•¥ã€‚</p>
<h2 data-id="heading-0">ä»€ä¹ˆæ˜¯å†…å­˜å¼‚å¸¸</h2>
<p>å†…å­˜å¼‚å¸¸æ˜¯æŒ‡ç¨‹åºåœ¨è¿è¡Œæ—¶è¿åäº†å†…å­˜è®¿é—®è§„åˆ™ï¼Œå¯¼è‡´æœªå®šä¹‰è¡Œä¸ºæˆ–ç¨‹åºå´©æºƒã€‚</p>
<h3 data-id="heading-1">å†…å­˜è®¿é—®çš„åŸºæœ¬è§„åˆ™</h3>
<p>ç¨‹åºè®¿é—®å†…å­˜å¿…é¡»éµå®ˆä¸‰ä¸ªåŸºæœ¬è§„åˆ™ï¼š</p>
<ol>
<li><strong>è®¿é—®å·²åˆ†é…çš„å†…å­˜</strong>ï¼šä¸èƒ½è®¿é—®æœªåˆ†é…æˆ–å·²é‡Šæ”¾çš„å†…å­˜åŒºåŸŸ</li>
<li><strong>è®¿é—®æƒé™æ­£ç¡®</strong>ï¼šè¯»å†™æ‰§è¡Œæƒé™å¿…é¡»åŒ¹é…ï¼ˆå¦‚ä»£ç æ®µä¸å¯å†™ï¼‰</li>
<li><strong>ä¸è¶Šç•Œè®¿é—®</strong>ï¼šè®¿é—®å¿…é¡»åœ¨åˆ†é…çš„è¾¹ç•Œå†…</li>
</ol>
<p>è¿åä»»ä½•ä¸€æ¡è§„åˆ™éƒ½ä¼šè§¦å‘å†…å­˜å¼‚å¸¸ã€‚</p>
<h3 data-id="heading-2">å†…å­˜å¼‚å¸¸çš„è§¦å‘æœºåˆ¶</h3>
<p>å½“ç¨‹åºè¿åå†…å­˜è®¿é—®è§„åˆ™æ—¶ï¼ŒCPU çš„å†…å­˜ç®¡ç†å•å…ƒ(MMU)ä¼šæ£€æµ‹åˆ°å¼‚å¸¸å¹¶è§¦å‘ä¿¡å·ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-type">int</span>* ptr = <span class="hljs-literal">nullptr</span>;
*ptr = <span class="hljs-number">42</span>;  <span class="hljs-comment">// è®¿é—®ç©ºæŒ‡é’ˆï¼ŒMMU è§¦å‘ SIGSEGV (Segmentation Fault)</span>
</code></pre>
<p>æ“ä½œç³»ç»Ÿæ•è·ä¿¡å·åï¼Œé€šå¸¸ä¼šç»ˆæ­¢è¿›ç¨‹å¹¶ç”Ÿæˆ core dumpã€‚</p>
<h3 data-id="heading-3">å¸¸è§å†…å­˜å¼‚å¸¸ç±»å‹</h3>
<p>å†…å­˜å¼‚å¸¸ä¸»è¦åˆ†ä¸ºä»¥ä¸‹å‡ ç±»ï¼š</p>























































<table><thead><tr><th>å¼‚å¸¸ç±»å‹</th><th>åŸå› </th><th>å…¸å‹è¡¨ç°</th></tr></thead><tbody><tr><td>å†…å­˜æº¢å‡º</td><td>å¯ç”¨å†…å­˜è€—å°½</td><td>OOM Killer æ€è¿›ç¨‹</td></tr><tr><td>å†…å­˜æ³„æ¼</td><td>å·²åˆ†é…å†…å­˜æœªé‡Šæ”¾</td><td>å†…å­˜å ç”¨æŒç»­å¢é•¿</td></tr><tr><td>æ ˆæº¢å‡º</td><td>æ ˆç©ºé—´è¶…é™</td><td>Stack Overflow</td></tr><tr><td>æ‚¬ç©º/é‡æŒ‡é’ˆ</td><td>è®¿é—®æ— æ•ˆæŒ‡é’ˆ</td><td>Segmentation Fault</td></tr><tr><td>ç¼“å†²åŒºæº¢å‡º</td><td>å†™å…¥è¶Šç•Œ</td><td>æ•°æ®æŸåæˆ–å´©æºƒ</td></tr><tr><td>åŒé‡é‡Šæ”¾</td><td>é‡å¤é‡Šæ”¾å†…å­˜</td><td>Heap Corruption</td></tr><tr><td>å†…å­˜ç¢ç‰‡</td><td>å†…å­˜åˆ†æ•£</td><td>åˆ†é…å¤±è´¥æˆ–æ€§èƒ½ä¸‹é™</td></tr><tr><td>å¯¹é½é—®é¢˜</td><td>æœªå¯¹é½è®¿é—®</td><td>æ€§èƒ½ä¸‹é™æˆ–å´©æºƒ</td></tr><tr><td>å¤šçº¿ç¨‹å†²çª</td><td>å¹¶å‘è®¿é—®å†²çª</td><td>æ•°æ®ç«äº‰</td></tr></tbody></table>
<p>è¿™äº›å¼‚å¸¸åœ¨è°ƒè¯•æ—¶éš¾ä»¥å®šä½ï¼Œå› ä¸ºé”™è¯¯å¾€å¾€åœ¨è§¦å‘å¼‚å¸¸ä¹‹å‰å°±å·²ç»å‘ç”Ÿã€‚</p>
<h2 data-id="heading-4">å†…å­˜æº¢å‡º (Out of Memory)</h2>
<p>å†…å­˜æº¢å‡ºæŒ‡ç³»ç»Ÿæˆ–è¿›ç¨‹çš„å¯ç”¨å†…å­˜è€—å°½ï¼Œæ— æ³•æ»¡è¶³æ–°çš„å†…å­˜åˆ†é…è¯·æ±‚ã€‚</p>
<h3 data-id="heading-5">è§¦å‘æ¡ä»¶</h3>
<p>OOM å‘ç”Ÿåœ¨ä»¥ä¸‹æƒ…å†µï¼š</p>
<ol>
<li><strong>ç‰©ç†å†…å­˜è€—å°½</strong>ï¼šç³»ç»Ÿ RAM ç”¨å®Œä¸”äº¤æ¢ç©ºé—´(Swap)ä¹Ÿæ»¡äº†</li>
<li><strong>è¿›ç¨‹å†…å­˜é™åˆ¶</strong>ï¼šè¾¾åˆ°è¿›ç¨‹çš„è™šæ‹Ÿå†…å­˜ä¸Šé™ï¼ˆ32 ä½ç³»ç»Ÿ 4GBï¼Œ64 ä½ç³»ç»Ÿé€šå¸¸æ›´å¤§ï¼‰</li>
<li><strong>å †å†…å­˜è€—å°½</strong>ï¼šC++ çš„ <code>new</code> æˆ– C çš„ <code>malloc</code> æ— æ³•åˆ†é…æ–°å†…å­˜</li>
</ol>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span>

<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{
    std::vector&lt;<span class="hljs-type">int</span>*&gt; ptrs;
    <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) {
        <span class="hljs-comment">// æŒç»­åˆ†é… 1MB å†…å­˜ï¼Œæœ€ç»ˆè§¦å‘ OOM</span>
        ptrs.<span class="hljs-built_in">push_back</span>(<span class="hljs-keyword">new</span> <span class="hljs-type">int</span>[<span class="hljs-number">1024</span> * <span class="hljs-number">1024</span> / <span class="hljs-built_in">sizeof</span>(<span class="hljs-type">int</span>)]);
    }
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<p>è¿è¡Œç»“æœï¼šç¨‹åºæœ€ç»ˆæŠ›å‡º <code>std::bad_alloc</code> æˆ–è¢«ç³»ç»Ÿæ€æ­»ã€‚</p>
<h3 data-id="heading-6">OOM Killer æœºåˆ¶</h3>
<p>åœ¨ Linux ç³»ç»Ÿä¸­ï¼Œå½“ç‰©ç†å†…å­˜å’Œäº¤æ¢ç©ºé—´éƒ½è€—å°½æ—¶ï¼Œå†…æ ¸çš„ OOM Killer ä¼šé€‰æ‹©ä¸€ä¸ªè¿›ç¨‹æ€æ­»ä»¥é‡Šæ”¾å†…å­˜ã€‚é€‰æ‹©ä¾æ®ï¼š</p>
<ul>
<li>å†…å­˜å ç”¨é‡ï¼ˆè¶Šå¤§è¶Šå®¹æ˜“è¢«æ€ï¼‰</li>
<li>è¿›ç¨‹ä¼˜å…ˆçº§ï¼ˆä½ä¼˜å…ˆçº§å®¹æ˜“è¢«æ€ï¼‰</li>
<li>è¿è¡Œæ—¶é—´ï¼ˆæ–°è¿›ç¨‹æ›´å®¹æ˜“è¢«æ€ï¼‰</li>
</ul>
<p>å¯ä»¥é€šè¿‡ <code>/proc/&lt;pid&gt;/oom_score</code> æŸ¥çœ‹è¿›ç¨‹çš„ OOM è¯„åˆ†ã€‚</p>
<h3 data-id="heading-7">é¢„é˜²ç­–ç•¥</h3>
<ol>
<li><strong>é™åˆ¶å†…å­˜ä½¿ç”¨</strong>ï¼šä½¿ç”¨å†…å­˜æ± æˆ–å¯¹è±¡æ± å¤ç”¨å†…å­˜</li>
<li><strong>ç›‘æ§å†…å­˜å ç”¨</strong>ï¼šåŠæ—¶å‘ç°å†…å­˜æ³„æ¼</li>
<li><strong>ä¼˜é›…é™çº§</strong>ï¼šæ•è· <code>bad_alloc</code> å¼‚å¸¸ï¼Œé‡Šæ”¾ç¼“å­˜æˆ–å»¶è¿Ÿåˆ†é…</li>
</ol>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">try</span> {
    <span class="hljs-type">int</span>* arr = <span class="hljs-keyword">new</span> <span class="hljs-type">int</span>[huge_size];
} <span class="hljs-built_in">catch</span> (<span class="hljs-type">const</span> std::bad_alloc&amp; e) {
    <span class="hljs-comment">// é‡Šæ”¾ç¼“å­˜æˆ–è®°å½•æ—¥å¿—</span>
    std::cerr &lt;&lt; <span class="hljs-string">"å†…å­˜åˆ†é…å¤±è´¥: "</span> &lt;&lt; e.<span class="hljs-built_in">what</span>() &lt;&lt; std::endl;
}
</code></pre>
<h2 data-id="heading-8">å†…å­˜æ³„æ¼ (Memory Leak)</h2>
<p>å†…å­˜æ³„æ¼æŒ‡å·²åˆ†é…çš„å†…å­˜æ— æ³•è¢«é‡Šæ”¾æˆ–è®¿é—®ï¼Œå¯¼è‡´å¯ç”¨å†…å­˜é€æ¸å‡å°‘ï¼Œæœ€ç»ˆå¯èƒ½å¼•å‘ OOMã€‚</p>
<h3 data-id="heading-9">å…¸å‹åœºæ™¯</h3>
<p><strong>1. new/delete ä¸åŒ¹é…</strong></p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">leak_example</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-type">int</span>* ptr = <span class="hljs-keyword">new</span> <span class="hljs-type">int</span>[<span class="hljs-number">100</span>];
    <span class="hljs-comment">// å¿˜è®° delete[]ï¼Œå‡½æ•°è¿”å›åå†…å­˜æ³„æ¼</span>
}
</code></pre>
<p><strong>2. å¼‚å¸¸å¯¼è‡´çš„æ³„æ¼</strong></p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">exception_leak</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-type">int</span>* ptr = <span class="hljs-keyword">new</span> <span class="hljs-type">int</span>[<span class="hljs-number">100</span>];
    <span class="hljs-built_in">process_data</span>();  <span class="hljs-comment">// å¦‚æœæŠ›å¼‚å¸¸ï¼Œä¸‹é¢çš„ delete ä¸ä¼šæ‰§è¡Œ</span>
    <span class="hljs-keyword">delete</span>[] ptr;
}
</code></pre>
<p><strong>3. å¾ªç¯å¼•ç”¨ï¼ˆæ™ºèƒ½æŒ‡é’ˆï¼‰</strong></p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Node</span> {
    std::shared_ptr&lt;Node&gt; next;
};

<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">circular_ref</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-keyword">auto</span> a = std::<span class="hljs-built_in">make_shared</span>&lt;Node&gt;();
    <span class="hljs-keyword">auto</span> b = std::<span class="hljs-built_in">make_shared</span>&lt;Node&gt;();
    a-&gt;next = b;
    b-&gt;next = a;  <span class="hljs-comment">// å¾ªç¯å¼•ç”¨ï¼Œå¼•ç”¨è®¡æ•°æ°¸è¿œä¸ä¸º 0</span>
}
</code></pre>
<h3 data-id="heading-10">æ£€æµ‹æ–¹æ³•</h3>
<ol>
<li><strong>Valgrind (Memcheck)</strong>ï¼šè¿è¡Œæ—¶æ£€æµ‹å†…å­˜æ³„æ¼</li>
</ol>
<pre><code class="hljs language-bash" lang="bash">valgrind --leak-check=full ./program
</code></pre>
<ol start="2">
<li><strong>AddressSanitizer</strong>ï¼šç¼–è¯‘æ—¶æ’æ¡©</li>
</ol>
<pre><code class="hljs language-bash" lang="bash">g++ -fsanitize=address -g program.cpp
</code></pre>
<h3 data-id="heading-11">é¢„é˜²ç­–ç•¥</h3>
<p>ä½¿ç”¨ RAII å’Œæ™ºèƒ½æŒ‡é’ˆè‡ªåŠ¨ç®¡ç†å†…å­˜ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// ä½¿ç”¨ unique_ptr è‡ªåŠ¨é‡Šæ”¾</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">no_leak</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-keyword">auto</span> ptr = std::<span class="hljs-built_in">make_unique</span>&lt;<span class="hljs-type">int</span>[]&gt;(<span class="hljs-number">100</span>);
    <span class="hljs-built_in">process_data</span>();  <span class="hljs-comment">// å³ä½¿æŠ›å¼‚å¸¸ï¼Œptr ä¹Ÿä¼šè‡ªåŠ¨é‡Šæ”¾</span>
}

<span class="hljs-comment">// å¾ªç¯å¼•ç”¨ç”¨ weak_ptr æ‰“ç ´</span>
<span class="hljs-keyword">struct</span> <span class="hljs-title class_">Node</span> {
    std::shared_ptr&lt;Node&gt; next;
    std::weak_ptr&lt;Node&gt; prev;  <span class="hljs-comment">// ä¸å¢åŠ å¼•ç”¨è®¡æ•°</span>
};
</code></pre>
<h2 data-id="heading-12">æ ˆæº¢å‡º (Stack Overflow)</h2>
<p>æ ˆæº¢å‡ºæŒ‡æ ˆç©ºé—´è€—å°½ï¼Œé€šå¸¸ç”±é€’å½’è¿‡æ·±æˆ–å±€éƒ¨å˜é‡è¿‡å¤§å¼•èµ·ã€‚</p>
<h3 data-id="heading-13">æ ˆçš„å·¥ä½œåŸç†</h3>
<p>æ ˆæ˜¯ä¸€å—å›ºå®šå¤§å°çš„å†…å­˜åŒºåŸŸï¼Œç”¨äºå­˜å‚¨å‡½æ•°è°ƒç”¨ä¿¡æ¯å’Œå±€éƒ¨å˜é‡ã€‚æ¯æ¬¡å‡½æ•°è°ƒç”¨ä¼šå‹å…¥æ ˆå¸§(Stack Frame)ï¼ŒåŒ…å«ï¼š</p>
<ul>
<li>è¿”å›åœ°å€</li>
<li>å‡½æ•°å‚æ•°</li>
<li>å±€éƒ¨å˜é‡</li>
</ul>
<p>æ ˆå¤§å°é€šå¸¸æœ‰é™ï¼ˆLinux é»˜è®¤ 8MBï¼Œå¯é€šè¿‡ <code>ulimit -s</code> æŸ¥çœ‹ï¼‰ã€‚</p>
<h3 data-id="heading-14">å…¸å‹åœºæ™¯</h3>
<p><strong>1. é€’å½’è¿‡æ·±</strong></p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">factorial</span><span class="hljs-params">(<span class="hljs-type">int</span> n)</span> </span>{
    <span class="hljs-keyword">return</span> n == <span class="hljs-number">0</span> ? <span class="hljs-number">1</span> : n * <span class="hljs-built_in">factorial</span>(n - <span class="hljs-number">1</span>);
}

<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-built_in">factorial</span>(<span class="hljs-number">100000</span>);  <span class="hljs-comment">// æ ˆæº¢å‡º</span>
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<p>æ¯æ¬¡é€’å½’è°ƒç”¨éƒ½ä¼šå‹å…¥æ–°æ ˆå¸§ï¼Œæ·±åº¦è¿‡å¤§ä¼šè€—å°½æ ˆç©ºé—´ã€‚</p>
<p><strong>2. å¤§å‹å±€éƒ¨å˜é‡</strong></p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">large_local</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-type">int</span> arr[<span class="hljs-number">10000000</span>];  <span class="hljs-comment">// çº¦ 40MBï¼Œè¶…è¿‡é»˜è®¤æ ˆå¤§å°</span>
    arr[<span class="hljs-number">0</span>] = <span class="hljs-number">1</span>;
}
</code></pre>
<h3 data-id="heading-15">æ£€æµ‹ä¸è°ƒè¯•</h3>
<p>æ ˆæº¢å‡ºé€šå¸¸è¡¨ç°ä¸º Segmentation Faultã€‚ä½¿ç”¨ GDB è°ƒè¯•æ—¶ï¼Œ<code>backtrace</code> ä¼šæ˜¾ç¤ºè°ƒç”¨æ ˆï¼š</p>
<pre><code class="hljs language-bash" lang="bash">gdb ./program
(gdb) run
(gdb) backtrace  <span class="hljs-comment"># æŸ¥çœ‹è°ƒç”¨æ ˆæ·±åº¦</span>
</code></pre>
<h3 data-id="heading-16">é¢„é˜²ç­–ç•¥</h3>
<ol>
<li><strong>æ”¹ç”¨å¾ªç¯</strong>ï¼šå°†é€’å½’è½¬ä¸ºè¿­ä»£</li>
</ol>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">factorial</span><span class="hljs-params">(<span class="hljs-type">int</span> n)</span> </span>{
    <span class="hljs-type">int</span> result = <span class="hljs-number">1</span>;
    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">2</span>; i &lt;= n; ++i) {
        result *= i;
    }
    <span class="hljs-keyword">return</span> result;
}
</code></pre>
<ol start="2">
<li><strong>ä½¿ç”¨å †å†…å­˜</strong>ï¼šå¤§æ•°ç»„æ”¾å †ä¸Š</li>
</ol>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">large_heap</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-keyword">auto</span> arr = std::<span class="hljs-built_in">make_unique</span>&lt;<span class="hljs-type">int</span>[]&gt;(<span class="hljs-number">10000000</span>);  <span class="hljs-comment">// å †ä¸Šåˆ†é…</span>
}
</code></pre>
<h2 data-id="heading-17">æ‚¬ç©ºæŒ‡é’ˆä¸é‡æŒ‡é’ˆ</h2>
<p>æ‚¬ç©ºæŒ‡é’ˆå’Œé‡æŒ‡é’ˆéƒ½æŒ‡å‘æ— æ•ˆå†…å­˜ï¼Œä½†äº§ç”ŸåŸå› ä¸åŒã€‚</p>
<h3 data-id="heading-18">æ‚¬ç©ºæŒ‡é’ˆ (Dangling Pointer)</h3>
<p>æ‚¬ç©ºæŒ‡é’ˆæŒ‡å‘å·²é‡Šæ”¾çš„å†…å­˜ã€‚</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-type">int</span>* ptr = <span class="hljs-keyword">new</span> <span class="hljs-built_in">int</span>(<span class="hljs-number">42</span>);
<span class="hljs-keyword">delete</span> ptr;
*ptr = <span class="hljs-number">100</span>;  <span class="hljs-comment">// æ‚¬ç©ºæŒ‡é’ˆï¼Œè®¿é—®å·²é‡Šæ”¾çš„å†…å­˜</span>
</code></pre>
<p><strong>Use-After-Free æ¼æ´</strong>ï¼šåœ¨å®‰å…¨é¢†åŸŸï¼Œæ‚¬ç©ºæŒ‡é’ˆå¼•å‘çš„æ¼æ´ç§°ä¸º UAFï¼Œæ”»å‡»è€…å¯åˆ©ç”¨å·²é‡Šæ”¾å†…å­˜è¢«é‡æ–°åˆ†é…åçš„å†…å®¹è¿›è¡Œæ”»å‡»ã€‚</p>
<h3 data-id="heading-19">é‡æŒ‡é’ˆ (Wild Pointer)</h3>
<p>é‡æŒ‡é’ˆæœªåˆå§‹åŒ–ï¼ŒæŒ‡å‘éšæœºå†…å­˜åœ°å€ã€‚</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-type">int</span>* ptr;  <span class="hljs-comment">// æœªåˆå§‹åŒ–</span>
*ptr = <span class="hljs-number">42</span>;  <span class="hljs-comment">// é‡æŒ‡é’ˆï¼ŒæŒ‡å‘æœªçŸ¥åœ°å€</span>
</code></pre>
<h3 data-id="heading-20">åŒºåˆ«å¯¹æ¯”</h3>

























<table><thead><tr><th>ç‰¹æ€§</th><th>æ‚¬ç©ºæŒ‡é’ˆ</th><th>é‡æŒ‡é’ˆ</th></tr></thead><tbody><tr><td>äº§ç”ŸåŸå› </td><td>å†…å­˜å·²é‡Šæ”¾</td><td>æœªåˆå§‹åŒ–</td></tr><tr><td>æŒ‡å‘å†…å®¹</td><td>å·²é‡Šæ”¾çš„å†…å­˜</td><td>éšæœºåœ°å€</td></tr><tr><td>å…¸å‹åœºæ™¯</td><td>delete åæœªç½®ç©º</td><td>å£°æ˜æ—¶æœªèµ‹å€¼</td></tr></tbody></table>
<h2 data-id="heading-21">ç¼“å†²åŒºæº¢å‡º (Buffer Overflow)</h2>
<p>ç¼“å†²åŒºæº¢å‡ºæŒ‡å†™å…¥æ•°æ®è¶…å‡ºç¼“å†²åŒºè¾¹ç•Œï¼Œè¦†ç›–ç›¸é‚»å†…å­˜ã€‚</p>
<h3 data-id="heading-22">æº¢å‡ºç±»å‹</h3>
<p><strong>æ ˆç¼“å†²åŒºæº¢å‡º</strong></p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">stack_overflow</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-type">char</span> buffer[<span class="hljs-number">8</span>];
    <span class="hljs-built_in">strcpy</span>(buffer, <span class="hljs-string">"This string is too long"</span>);  <span class="hljs-comment">// å†™å…¥è¶…è¿‡ 8 å­—èŠ‚</span>
}
</code></pre>
<p>æ•°æ®æº¢å‡ºåˆ°ç›¸é‚»æ ˆå¸§ï¼Œå¯èƒ½è¦†ç›–è¿”å›åœ°å€ï¼Œå¯¼è‡´ï¼š</p>
<ul>
<li>ç¨‹åºå´©æºƒ</li>
<li>è¿”å›åˆ°é”™è¯¯åœ°å€</li>
<li>è¢«æ”»å‡»è€…åˆ©ç”¨æ‰§è¡Œæ¶æ„ä»£ç ï¼ˆROP æ”»å‡»ï¼‰</li>
</ul>
<p><strong>å †ç¼“å†²åŒºæº¢å‡º</strong></p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">heap_overflow</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-type">char</span>* buffer = <span class="hljs-keyword">new</span> <span class="hljs-type">char</span>[<span class="hljs-number">8</span>];
    <span class="hljs-built_in">strcpy</span>(buffer, <span class="hljs-string">"This string is too long"</span>);  <span class="hljs-comment">// æº¢å‡ºåˆ°å †çš„ç›¸é‚»å—</span>
    <span class="hljs-keyword">delete</span>[] buffer;
}
</code></pre>
<p>è¦†ç›–å †å…ƒæ•°æ®ï¼Œå¯¼è‡´ï¼š</p>
<ul>
<li>åç»­å†…å­˜åˆ†é…/é‡Šæ”¾å´©æºƒ</li>
<li>å †æŸå(Heap Corruption)</li>
</ul>
<h3 data-id="heading-23">å®‰å…¨éšæ‚£</h3>
<p>ç¼“å†²åŒºæº¢å‡ºæ˜¯ç»å…¸çš„å®‰å…¨æ¼æ´ï¼Œå¯è¢«åˆ©ç”¨è¿›è¡Œï¼š</p>
<ul>
<li>ä»£ç æ³¨å…¥(Code Injection)</li>
<li>è¿”å›å¯¼å‘ç¼–ç¨‹(Return-Oriented Programming, ROP)</li>
<li>ç»•è¿‡å®‰å…¨æ£€æŸ¥</li>
</ul>
<h3 data-id="heading-24">é¢„é˜²æ–¹æ³•</h3>
<ol>
<li><strong>ä½¿ç”¨å®‰å…¨å‡½æ•°</strong>ï¼š</li>
</ol>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-type">char</span> buffer[<span class="hljs-number">8</span>];
<span class="hljs-built_in">strncpy</span>(buffer, input, <span class="hljs-built_in">sizeof</span>(buffer) - <span class="hljs-number">1</span>);  <span class="hljs-comment">// é™åˆ¶é•¿åº¦</span>
buffer[<span class="hljs-built_in">sizeof</span>(buffer) - <span class="hljs-number">1</span>] = <span class="hljs-string">'\0'</span>;  <span class="hljs-comment">// ç¡®ä¿ç»ˆæ­¢</span>
</code></pre>
<ol start="2">
<li><strong>ä½¿ç”¨ C++ æ ‡å‡†å®¹å™¨</strong>ï¼š</li>
</ol>
<pre><code class="hljs language-cpp" lang="cpp">std::string str = <span class="hljs-string">"ä»»æ„é•¿åº¦å­—ç¬¦ä¸²"</span>;  <span class="hljs-comment">// è‡ªåŠ¨ç®¡ç†è¾¹ç•Œ</span>
</code></pre>
<ol start="3">
<li><strong>ç¼–è¯‘å™¨ä¿æŠ¤</strong>ï¼š</li>
</ol>
<pre><code class="hljs language-bash" lang="bash">g++ -fstack-protector-all  <span class="hljs-comment"># æ ˆä¿æŠ¤</span>
g++ -D_FORTIFY_SOURCE=2    <span class="hljs-comment"># è¿è¡Œæ—¶æ£€æŸ¥</span>
</code></pre>
<h2 data-id="heading-25">åŒé‡é‡Šæ”¾ (Double Free)</h2>
<p>åŒé‡é‡Šæ”¾æŒ‡åŒä¸€å—å†…å­˜è¢« <code>delete</code> æˆ– <code>free</code> å¤šæ¬¡ï¼Œå¯¼è‡´å †æŸåã€‚</p>
<h3 data-id="heading-26">å…¸å‹åœºæ™¯</h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-type">int</span>* ptr = <span class="hljs-keyword">new</span> <span class="hljs-built_in">int</span>(<span class="hljs-number">42</span>);
<span class="hljs-keyword">delete</span> ptr;
<span class="hljs-keyword">delete</span> ptr;  <span class="hljs-comment">// åŒé‡é‡Šæ”¾ï¼Œæœªå®šä¹‰è¡Œä¸º</span>
</code></pre>
<h3 data-id="heading-27">å±å®³æœºåˆ¶</h3>
<p>å†…å­˜ç®¡ç†å™¨ç»´æŠ¤å †çš„å…ƒæ•°æ®ï¼ˆå·²åˆ†é…/ç©ºé—²å—åˆ—è¡¨ï¼‰ã€‚ç¬¬ä¸€æ¬¡ <code>delete</code> å°†å†…å­˜æ ‡è®°ä¸ºç©ºé—²ï¼Œç¬¬äºŒæ¬¡ <code>delete</code> ä¼šï¼š</p>
<ol>
<li>å°è¯•é‡Šæ”¾å·²åœ¨ç©ºé—²åˆ—è¡¨ä¸­çš„å—</li>
<li>ç ´åå…ƒæ•°æ®ç»“æ„</li>
<li>åç»­çš„ <code>new</code> æˆ– <code>delete</code> å´©æºƒ</li>
</ol>
<p>å®é™…å½±å“ï¼š</p>
<ul>
<li>ç¨‹åºå´©æºƒï¼ˆå¸¸è§ï¼‰</li>
<li>å†…å­˜æ³„æ¼ï¼ˆå…ƒæ•°æ®æŸåå¯¼è‡´ï¼‰</li>
<li>å®‰å…¨æ¼æ´ï¼ˆè¢«æ”»å‡»è€…åˆ©ç”¨ä¿®æ”¹å †å…ƒæ•°æ®ï¼‰</li>
</ul>
<h3 data-id="heading-28">é¢„é˜²æ–¹æ³•</h3>
<ol>
<li><strong>é‡Šæ”¾åç½®ç©º</strong>ï¼š</li>
</ol>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">delete</span> ptr;
ptr = <span class="hljs-literal">nullptr</span>;  <span class="hljs-comment">// å¯¹ nullptr delete æ˜¯å®‰å…¨çš„</span>
</code></pre>
<ol start="2">
<li><strong>æ˜ç¡®æ‰€æœ‰æƒ</strong>ï¼š</li>
</ol>
<pre><code class="hljs language-cpp" lang="cpp">std::unique_ptr&lt;<span class="hljs-type">int</span>&gt; ptr = std::<span class="hljs-built_in">make_unique</span>&lt;<span class="hljs-type">int</span>&gt;(<span class="hljs-number">42</span>);
<span class="hljs-comment">// æ‰€æœ‰æƒå”¯ä¸€ï¼Œä¸ä¼šé‡å¤é‡Šæ”¾</span>
</code></pre>
<ol start="3">
<li><strong>ç¦ç”¨æ‹·è´</strong>ï¼š</li>
</ol>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Resource</span> {
    <span class="hljs-type">int</span>* data;
<span class="hljs-keyword">public</span>:
    <span class="hljs-built_in">Resource</span>(<span class="hljs-type">const</span> Resource&amp;) = <span class="hljs-keyword">delete</span>;  <span class="hljs-comment">// ç¦æ­¢æ‹·è´</span>
    Resource&amp; <span class="hljs-keyword">operator</span>=(<span class="hljs-type">const</span> Resource&amp;) = <span class="hljs-keyword">delete</span>;
};
</code></pre>
<h2 data-id="heading-29">å†…å­˜ç¢ç‰‡ (Memory Fragmentation)</h2>
<p>å†…å­˜ç¢ç‰‡æŒ‡ç©ºé—²å†…å­˜æ— æ³•æœ‰æ•ˆåˆ©ç”¨ï¼Œåˆ†ä¸ºå¤–éƒ¨ç¢ç‰‡å’Œå†…éƒ¨ç¢ç‰‡ã€‚</p>
<h3 data-id="heading-30">å¤–éƒ¨ç¢ç‰‡ (External Fragmentation)</h3>
<p>ç©ºé—²å†…å­˜åˆ†æ•£åœ¨å¤šä¸ªå°å—ä¸­ï¼Œæ— æ³•æ»¡è¶³å¤§å—è¿ç»­å†…å­˜çš„åˆ†é…è¯·æ±‚ã€‚</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// å‡è®¾æœ‰ 100MB ç©ºé—²å†…å­˜ï¼Œåˆ†æ•£åœ¨ 1000 ä¸ª 100KB çš„å°å—ä¸­</span>
<span class="hljs-type">int</span>* large = <span class="hljs-keyword">new</span> <span class="hljs-type">int</span>[<span class="hljs-number">50</span> * <span class="hljs-number">1024</span> * <span class="hljs-number">1024</span>];  <span class="hljs-comment">// åˆ†é… 200MB å¤±è´¥ï¼Œè™½ç„¶æ€»ç©ºé—²è¶³å¤Ÿ</span>
</code></pre>
<p><strong>åŸå› </strong>ï¼šé¢‘ç¹åˆ†é…å’Œé‡Šæ”¾ä¸åŒå¤§å°çš„å†…å­˜å—ã€‚</p>
<h3 data-id="heading-31">å†…éƒ¨ç¢ç‰‡ (Internal Fragmentation)</h3>
<p>åˆ†é…çš„å†…å­˜å—å¤§äºå®é™…éœ€æ±‚ï¼Œå¤šä½™éƒ¨åˆ†æµªè´¹ã€‚</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// å†…å­˜åˆ†é…å™¨æŒ‰ 16 å­—èŠ‚å¯¹é½</span>
<span class="hljs-type">char</span>* ptr = <span class="hljs-keyword">new</span> <span class="hljs-type">char</span>[<span class="hljs-number">9</span>];  <span class="hljs-comment">// å®é™…åˆ†é… 16 å­—èŠ‚ï¼Œæµªè´¹ 7 å­—èŠ‚</span>
</code></pre>
<p><strong>åŸå› </strong>ï¼šå†…å­˜å¯¹é½æˆ–åˆ†é…å™¨æœ€å°å—å¤§å°é™åˆ¶ã€‚</p>
<h3 data-id="heading-32">æ€§èƒ½å½±å“</h3>
<ul>
<li><strong>åˆ†é…å¤±è´¥</strong>ï¼šå¤–éƒ¨ç¢ç‰‡å¯¼è‡´å¤§å—å†…å­˜åˆ†é…å¤±è´¥</li>
<li><strong>å†…å­˜æµªè´¹</strong>ï¼šå†…éƒ¨ç¢ç‰‡é™ä½å†…å­˜åˆ©ç”¨ç‡</li>
<li><strong>åˆ†é…å˜æ…¢</strong>ï¼šå†…å­˜åˆ†é…å™¨éœ€è¦æœç´¢åˆé€‚çš„ç©ºé—²å—</li>
</ul>
<h3 data-id="heading-33">ç¼“è§£ç­–ç•¥</h3>
<ol>
<li><strong>å†…å­˜æ± (Memory Pool)</strong>ï¼šé¢„åˆ†é…å›ºå®šå¤§å°çš„å—</li>
</ol>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Pool</span> {
    std::vector&lt;<span class="hljs-type">void</span>*&gt; free_list;
<span class="hljs-keyword">public</span>:
    <span class="hljs-function"><span class="hljs-type">void</span>* <span class="hljs-title">allocate</span><span class="hljs-params">(<span class="hljs-type">size_t</span> size)</span> </span>{
        <span class="hljs-keyword">return</span> free_list.<span class="hljs-built_in">empty</span>() ? ::<span class="hljs-keyword">operator</span> <span class="hljs-built_in">new</span>(size) : free_list.<span class="hljs-built_in">back</span>();
    }
};
</code></pre>
<ol start="2">
<li><strong>å¯¹è±¡æ± (Object Pool)</strong>ï¼šå¤ç”¨åŒç±»å¯¹è±¡</li>
</ol>
<pre><code class="hljs language-cpp" lang="cpp">std::vector&lt;MyObject*&gt; object_pool;
</code></pre>
<ol start="3">
<li><strong>å‡å°‘åˆ†é…/é‡Šæ”¾é¢‘ç‡</strong>ï¼šä¸€æ¬¡åˆ†é…å¤§å—ï¼Œæ‰‹åŠ¨ç®¡ç†</li>
</ol>
<h2 data-id="heading-34">å†…å­˜å¯¹é½é—®é¢˜ (Memory Alignment)</h2>
<p>å†…å­˜å¯¹é½æŒ‡æ•°æ®å­˜å‚¨åœ¨ç‰¹å®šå¯¹é½è¾¹ç•Œçš„åœ°å€ä¸Šï¼Œæœªå¯¹é½è®¿é—®ä¼šé™ä½æ€§èƒ½æˆ–å´©æºƒã€‚</p>
<h3 data-id="heading-35">ä¸ºä»€ä¹ˆéœ€è¦å¯¹é½</h3>
<p>CPU è®¿é—®å†…å­˜æ—¶ï¼ŒæŒ‰å­—é•¿(Word Size)è¯»å–æ•°æ®ã€‚æœªå¯¹é½çš„æ•°æ®éœ€è¦å¤šæ¬¡è¯»å–åæ‹¼æ¥ï¼Œæ•ˆç‡ä½ã€‚æŸäº›æ¶æ„ï¼ˆå¦‚ ARMï¼‰å¼ºåˆ¶å¯¹é½ï¼Œå¦åˆ™è§¦å‘ç¡¬ä»¶å¼‚å¸¸ã€‚</p>
<p><strong>ç¤ºä¾‹</strong>ï¼š64 ä½ç³»ç»Ÿè¦æ±‚ 8 å­—èŠ‚å¯¹é½</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// åœ°å€ 0x1000ï¼šå¯¹é½ï¼Œä¸€æ¬¡è¯»å–</span>
<span class="hljs-type">int64_t</span>* aligned = (<span class="hljs-type">int64_t</span>*)<span class="hljs-number">0x1000</span>;

<span class="hljs-comment">// åœ°å€ 0x1003ï¼šæœªå¯¹é½ï¼Œéœ€è¦ä¸¤æ¬¡è¯»å–</span>
<span class="hljs-type">int64_t</span>* unaligned = (<span class="hljs-type">int64_t</span>*)<span class="hljs-number">0x1003</span>;
</code></pre>
<h3 data-id="heading-36">ç»“æ„ä½“å¯¹é½</h3>
<p>ç¼–è¯‘å™¨ä¼šè‡ªåŠ¨å¡«å……ç»“æ„ä½“ä»¥æ»¡è¶³å¯¹é½è¦æ±‚ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Unoptimized</span> {
    <span class="hljs-type">char</span> a;    <span class="hljs-comment">// 1 å­—èŠ‚</span>
    <span class="hljs-comment">// å¡«å…… 3 å­—èŠ‚</span>
    <span class="hljs-type">int</span> b;     <span class="hljs-comment">// 4 å­—èŠ‚</span>
    <span class="hljs-type">char</span> c;    <span class="hljs-comment">// 1 å­—èŠ‚</span>
    <span class="hljs-comment">// å¡«å…… 3 å­—èŠ‚</span>
};  <span class="hljs-comment">// æ€»å¤§å° 12 å­—èŠ‚</span>

<span class="hljs-keyword">struct</span> <span class="hljs-title class_">Optimized</span> {
    <span class="hljs-type">int</span> b;     <span class="hljs-comment">// 4 å­—èŠ‚</span>
    <span class="hljs-type">char</span> a;    <span class="hljs-comment">// 1 å­—èŠ‚</span>
    <span class="hljs-type">char</span> c;    <span class="hljs-comment">// 1 å­—èŠ‚</span>
    <span class="hljs-comment">// å¡«å…… 2 å­—èŠ‚</span>
};  <span class="hljs-comment">// æ€»å¤§å° 8 å­—èŠ‚</span>
</code></pre>
<h3 data-id="heading-37">C++ å¯¹é½æ§åˆ¶</h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span>

<span class="hljs-keyword">struct</span> <span class="hljs-title class_">alignas</span>(<span class="hljs-number">16</span>) Vec4 {
    <span class="hljs-type">float</span> x, y, z, w;
};

<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{
    std::cout &lt;&lt; <span class="hljs-built_in">alignof</span>(Vec4) &lt;&lt; std::endl;  <span class="hljs-comment">// è¾“å‡º 16</span>
    std::cout &lt;&lt; <span class="hljs-built_in">sizeof</span>(Vec4) &lt;&lt; std::endl;   <span class="hljs-comment">// è¾“å‡º 16</span>
}
</code></pre>
<h3 data-id="heading-38">è°ƒè¯•å¯¹é½é—®é¢˜</h3>
<p>ä½¿ç”¨ <code>-Wpadded</code> ç¼–è¯‘é€‰é¡¹æ£€æŸ¥ç»“æ„ä½“å¡«å……ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">g++ -Wpadded program.cpp
</code></pre>
<h2 data-id="heading-39">å¤šçº¿ç¨‹å†…å­˜å†²çª</h2>
<p>å¤šçº¿ç¨‹åŒæ—¶è®¿é—®å…±äº«å†…å­˜ï¼Œæœªæ­£ç¡®åŒæ­¥ä¼šå¯¼è‡´æ•°æ®ç«äº‰(Data Race)å’Œæœªå®šä¹‰è¡Œä¸ºã€‚</p>
<h3 data-id="heading-40">æ•°æ®ç«äº‰</h3>
<p>å¤šä¸ªçº¿ç¨‹åŒæ—¶è®¿é—®åŒä¸€å†…å­˜ä½ç½®ï¼Œè‡³å°‘ä¸€ä¸ªæ˜¯å†™æ“ä½œï¼Œä¸”æ²¡æœ‰åŒæ­¥æœºåˆ¶ã€‚</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-type">int</span> counter = <span class="hljs-number">0</span>;

<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">increment</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">1000000</span>; ++i) {
        ++counter;  <span class="hljs-comment">// éåŸå­æ“ä½œï¼šè¯»-æ”¹-å†™</span>
    }
}

<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-function">std::thread <span class="hljs-title">t1</span><span class="hljs-params">(increment)</span></span>;
    <span class="hljs-function">std::thread <span class="hljs-title">t2</span><span class="hljs-params">(increment)</span></span>;
    t1.<span class="hljs-built_in">join</span>();
    t2.<span class="hljs-built_in">join</span>();
    std::cout &lt;&lt; counter &lt;&lt; std::endl;  <span class="hljs-comment">// ç»“æœä¸ç¡®å®šï¼Œå¯èƒ½å°äº 2000000</span>
}
</code></pre>
<h3 data-id="heading-41">åŸå­æ“ä½œ</h3>
<p>ä½¿ç”¨ <code>std::atomic</code> ä¿è¯æ“ä½œåŸå­æ€§ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-function">std::atomic&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">counter</span><span class="hljs-params">(<span class="hljs-number">0</span>)</span></span>;

<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">increment</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">1000000</span>; ++i) {
        counter.<span class="hljs-built_in">fetch_add</span>(<span class="hljs-number">1</span>, std::memory_order_relaxed);  <span class="hljs-comment">// åŸå­æ“ä½œ</span>
    }
}
</code></pre>
<h3 data-id="heading-42">äº’æ–¥é”</h3>
<p>ä¿æŠ¤ä¸´ç•ŒåŒº(Critical Section)ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp">std::mutex mtx;
<span class="hljs-type">int</span> shared_data = <span class="hljs-number">0</span>;

<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">update</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-function">std::lock_guard&lt;std::mutex&gt; <span class="hljs-title">lock</span><span class="hljs-params">(mtx)</span></span>;
    shared_data++;  <span class="hljs-comment">// åŠ é”ä¿æŠ¤</span>
}
</code></pre>
<h3 data-id="heading-43">çº¿ç¨‹å®‰å…¨çš„å†…å­˜ç®¡ç†</h3>
<p>æ™ºèƒ½æŒ‡é’ˆåœ¨å¤šçº¿ç¨‹ä¸­çš„ä½¿ç”¨ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp">std::shared_ptr&lt;<span class="hljs-type">int</span>&gt; ptr = std::<span class="hljs-built_in">make_shared</span>&lt;<span class="hljs-type">int</span>&gt;(<span class="hljs-number">42</span>);

<span class="hljs-comment">// å¼•ç”¨è®¡æ•°æ˜¯åŸå­çš„ï¼Œä½†æŒ‡å‘çš„æ•°æ®ä¸æ˜¯</span>
<span class="hljs-function">std::thread <span class="hljs-title">t1</span><span class="hljs-params">([ptr]() { *ptr = <span class="hljs-number">10</span>; })</span></span>;  <span class="hljs-comment">// æ•°æ®ç«äº‰</span>
<span class="hljs-function">std::thread <span class="hljs-title">t2</span><span class="hljs-params">([ptr]() { *ptr = <span class="hljs-number">20</span>; })</span></span>;  <span class="hljs-comment">// éœ€è¦é¢å¤–åŒæ­¥</span>
</code></pre>
<p><strong>å…³é”®åŸåˆ™</strong>ï¼šæ™ºèƒ½æŒ‡é’ˆçš„å¼•ç”¨è®¡æ•°çº¿ç¨‹å®‰å…¨ï¼Œä½†æŒ‡å‘çš„å†…å®¹éœ€è¦æ‰‹åŠ¨åŒæ­¥ã€‚</p>
<h2 data-id="heading-44">æ£€æµ‹ä¸é¢„é˜²ç­–ç•¥</h2>
<p>ç»¼åˆä½¿ç”¨é™æ€åˆ†æã€åŠ¨æ€æ£€æµ‹å’Œç¼–ç è§„èŒƒï¼Œå¯æœ‰æ•ˆé¢„é˜²å’Œå®šä½å†…å­˜å¼‚å¸¸ã€‚</p>
<h3 data-id="heading-45">é™æ€åˆ†æå·¥å…·</h3>
<p>ç¼–è¯‘é˜¶æ®µæ£€æµ‹æ½œåœ¨é—®é¢˜ï¼š</p>
<p><strong>Clang Static Analyzer</strong>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">clang++ --analyze program.cpp
</code></pre>
<p><strong>Cppcheck</strong>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">cppcheck --<span class="hljs-built_in">enable</span>=all program.cpp
</code></pre>
<p>é™æ€åˆ†æå¯å‘ç°ï¼šæœªåˆå§‹åŒ–å˜é‡ã€å†…å­˜æ³„æ¼è·¯å¾„ã€ç¼“å†²åŒºæº¢å‡ºç­‰ã€‚</p>
<h3 data-id="heading-46">åŠ¨æ€æ£€æµ‹å·¥å…·</h3>
<p>è¿è¡Œæ—¶æ£€æµ‹å®é™…å†…å­˜é”™è¯¯ï¼š</p>
<p><strong>AddressSanitizer (ASan)</strong>ï¼šæœ€å¸¸ç”¨ï¼Œæ€§èƒ½å¼€é”€ä½</p>
<pre><code class="hljs language-bash" lang="bash">g++ -fsanitize=address -g program.cpp
./a.out
</code></pre>
<p>æ£€æµ‹ï¼šUAFã€ç¼“å†²åŒºæº¢å‡ºã€åŒé‡é‡Šæ”¾ã€å†…å­˜æ³„æ¼ã€‚</p>
<p><strong>Valgrind (Memcheck)</strong>ï¼šåŠŸèƒ½å…¨é¢ä½†è¾ƒæ…¢</p>
<pre><code class="hljs language-bash" lang="bash">valgrind --leak-check=full ./program
</code></pre>
<p><strong>ThreadSanitizer (TSan)</strong>ï¼šæ£€æµ‹æ•°æ®ç«äº‰</p>
<pre><code class="hljs language-bash" lang="bash">g++ -fsanitize=thread -g program.cpp
</code></pre>
<h3 data-id="heading-47">ç°ä»£ C++ æœ€ä½³å®è·µ</h3>
<p><strong>RAII (Resource Acquisition Is Initialization)</strong>ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">safe</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-function">std::unique_ptr&lt;<span class="hljs-type">int</span>[]&gt; <span class="hljs-title">data</span><span class="hljs-params">(<span class="hljs-keyword">new</span> <span class="hljs-type">int</span>[<span class="hljs-number">1000</span>])</span></span>;
    <span class="hljs-comment">// è‡ªåŠ¨é‡Šæ”¾ï¼Œæ— æ³„æ¼é£é™©</span>
}
</code></pre>
<p><strong>æ™ºèƒ½æŒ‡é’ˆæ›¿ä»£è£¸æŒ‡é’ˆ</strong>ï¼š</p>
<ul>
<li><code>unique_ptr</code>ï¼šç‹¬å æ‰€æœ‰æƒ</li>
<li><code>shared_ptr</code>ï¼šå…±äº«æ‰€æœ‰æƒ</li>
<li><code>weak_ptr</code>ï¼šæ‰“ç ´å¾ªç¯å¼•ç”¨</li>
</ul>
<p><strong>å®¹å™¨æ›¿ä»£æ•°ç»„</strong>ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-function">std::vector&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">v</span><span class="hljs-params">(<span class="hljs-number">1000</span>)</span></span>;  <span class="hljs-comment">// è‡ªåŠ¨ç®¡ç†å†…å­˜</span>
</code></pre>
<h3 data-id="heading-48">ç¼–ç è§„èŒƒ</h3>
<ol>
<li><strong>åˆå§‹åŒ–æ‰€æœ‰æŒ‡é’ˆ</strong>ï¼šé¿å…é‡æŒ‡é’ˆ</li>
<li><strong>é‡Šæ”¾åç½®ç©º</strong>ï¼šé¿å…æ‚¬ç©ºæŒ‡é’ˆ</li>
<li><strong>æ˜ç¡®æ‰€æœ‰æƒ</strong>ï¼šé¿å…åŒé‡é‡Šæ”¾</li>
<li><strong>é¿å…æ‰‹åŠ¨å†…å­˜ç®¡ç†</strong>ï¼šä¼˜å…ˆä½¿ç”¨ RAII</li>
<li><strong>Code Review</strong>ï¼šå›¢é˜Ÿäº’æŸ¥ä»£ç </li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[2025 Vibe Coding å…ƒå¹´ï¼šAI ç¼–ç¨‹çš„æŠ€æœ¯çªç ´å…¨æ™¯]]></title>    <link>https://juejin.cn/post/7589466706377965604</link>    <guid>https://juejin.cn/post/7589466706377965604</guid>    <pubDate>2025-12-30T08:46:04.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589466706377965604" data-draft-id="7589466238239572010" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="2025 Vibe Coding å…ƒå¹´ï¼šAI ç¼–ç¨‹çš„æŠ€æœ¯çªç ´å…¨æ™¯"/> <meta itemprop="keywords" content="VibeCoding,å¹´ç»ˆæ€»ç»“"/> <meta itemprop="datePublished" content="2025-12-30T08:46:04.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Delroy"/> <meta itemprop="url" content="https://juejin.cn/user/184373682644119"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            2025 Vibe Coding å…ƒå¹´ï¼šAI ç¼–ç¨‹çš„æŠ€æœ¯çªç ´å…¨æ™¯
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/184373682644119/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Delroy
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-30T08:46:04.000Z" title="Tue Dec 30 2025 08:46:04 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>2025 å¹´ï¼Œ<strong>Vibe Coding</strong>ï¼ˆå¯¹è¯å¼ç¼–ç¨‹ï¼‰æ­£å¼ä»æ¦‚å¿µèµ°å‘æˆç†Ÿã€‚è¿™ä¸€å¹´ï¼ŒAI ç¼–ç¨‹ä»"ä¼šè¡¥å…¨ä»£ç çš„ Copilot"è·¨è¶Šåˆ°"èƒ½æ¥ç®¡é¡¹ç›®çš„ Agent"ï¼Œå¼€å‘è€…ä¸ AI çš„åä½œæ–¹å¼å‘ç”Ÿäº†å†å²æ€§å˜é©â€”â€”ä»é€è¡Œæ•²ä»£ç ï¼Œåˆ°ç”¨è‡ªç„¶è¯­è¨€"èŠ"å‡ºæ•´ä¸ªé¡¹ç›®ã€‚</p>
<p>è¿™ä¸ä»…æ˜¯ <strong>Vibe Coding å…ƒå¹´</strong>ï¼Œæ›´æ˜¯ AI ç¼–ç¨‹æŠ€æœ¯ç”Ÿæ€å¤§çˆ†å‘çš„ä¸€å¹´ï¼šæ¨ç†æ¨¡å‹å¹³æ°‘åŒ–ã€Agentic IDE å´›èµ·ã€Spec é©±åŠ¨å¼€å‘æˆå‹ã€‚è®©æˆ‘ä»¬å›é¡¾è¿™ä¸€å¹´çš„å…³é”®æŠ€æœ¯èŠ‚ç‚¹ï¼Œçœ‹çœ‹ Vibe Coding å¦‚ä½•é‡å¡‘è½¯ä»¶å¼€å‘çš„æœªæ¥ã€‚</p>
<hr/>
<h2 data-id="heading-0">ä¸€ã€å¹´åº¦ä¸»çº¿ï¼šä»è¡¥å…¨ä»£ç åˆ°æ¥ç®¡é¡¹ç›®</h2>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8476d0e019994ed38cd7aab084cdf1b2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRGVscm95:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767689471&amp;x-signature=3rqk0usk14KHrZgAG0nAou699GA%3D" alt="image.png" loading="lazy"/></p>
<p>ç”¨ä¸€æ¡ä¸»çº¿ä¸²èµ·å…¨æ–‡ï¼š</p>
<ul>
<li><strong>2023â€“2024 å¹´</strong>ï¼šAI ä¸»è¦åš <strong>ä»£ç è¡¥å…¨ / é—®ç­”</strong>ï¼Œæ›´å¤šåƒâ€œé«˜çº§è‡ªåŠ¨å®Œæˆâ€ã€‚</li>
<li><strong>2025 å¹´</strong>ï¼šAI å¼€å§‹åš <strong>éœ€æ±‚ç†è§£ã€ä»»åŠ¡è§„åˆ’ã€ä»£ç å®ç°ã€æµ‹è¯•ã€é‡æ„</strong> çš„é—­ç¯ï¼Œå˜æˆçœŸæ­£çš„â€œè™šæ‹Ÿè½¯ä»¶å·¥ç¨‹å¸ˆâ€ã€‚</li>
<li><strong>ä¸‹åŠå¹´å¼€å§‹</strong>ï¼šè¡Œä¸šä»â€œèŠç€å†™â€ï¼ˆVibe Codingï¼‰èµ°å‘â€œå†™å®Œå†å¹²â€ï¼ˆSpec &amp; Skills ç¼–ç¨‹ï¼‰ã€‚</li>
</ul>
<p>å…¨æ–‡å›´ç»•<strong>å››æ¡è„‰ç»œ</strong>å±•å¼€ï¼š</p>
<ol>
<li><strong>æ¨ç†æ¨¡å‹å¹³æ°‘åŒ–</strong>ï¼šo3 / DeepSeek V3 ç³»åˆ—ã€‚</li>
<li><strong>IDE ä»£ç†äººé©å‘½</strong>ï¼šCursor / Windsurf / Copilot Workspaceã€‚</li>
<li><strong>Spec é©±åŠ¨å¼€å‘å´›èµ·</strong>ï¼šKiro / OpenSpecã€‚</li>
<li><strong>Skill é©±åŠ¨ Agent</strong>ï¼šClaude Skills / Agent Skillsã€‚</li>
</ol>
<hr/>
<h2 data-id="heading-1">äºŒã€æŒ‰æ—¶é—´çº¿æ¢³ç† 2025 å…³é”®èŠ‚ç‚¹</h2>
<h3 data-id="heading-2">Q1ï¼šæ¨ç†æ¨¡å‹çš„å¹³æ°‘åŒ–</h3>
<p><strong>å…³é”®è¯ï¼šo3-miniã€DeepSeek V3ã€ç®—åŠ›æ™®æƒ </strong></p>
<h4 data-id="heading-3">1. 1 æœˆ 31 æ—¥ â€“ OpenAI o3-mini å‘å¸ƒ</h4>
<p>o3-mini è¢«å®šä½ä¸ºé«˜æ•ˆæ¨ç†æ¨¡å‹ï¼Œåœ¨ç¼–ç¨‹ç«èµ›ï¼ˆå¦‚ Codeforces Eloï¼‰ä¸Šè¾¾åˆ°å¼ºç«äº‰æ°´å¹³ï¼Œè¢«è§†ä½œâ€œæ—¥å¸¸å¼€å‘å¯ç”¨çš„æ·±åº¦æ€è€ƒæ¨¡å‹â€ã€‚ ç›¸æ¯”æ—©æœŸé«˜å»¶è¿Ÿçš„æ·±åº¦æ¨ç†æ¨¡å‹ï¼Œo3-mini æŠŠâ€œæ·±åº¦æ€è€ƒâ€æ‹‰è¿›äº†ç§’çº§å“åº”ï¼Œå‡å°‘äº†ä¸­æ–­å¿ƒæµçš„ç­‰å¾…æ—¶é—´ï¼Œå¯¹ Vibe Coding ä½“éªŒå½±å“å·¨å¤§ã€‚</p>
<h4 data-id="heading-4">2. DeepSeek V3 / R1 å¸¦æ¥çš„ä»·æ ¼å†²å‡»</h4>
<p>DeepSeek V3 åœ¨ 2024 å¹´åº•å¼€æºå¹¶åœ¨ 2025 å¹´æŒç»­æ¼”è¿›ï¼Œæä¾›äº†åœ¨ä»£ç ä»»åŠ¡ä¸Šæå…·ç«äº‰åŠ›çš„æ€§èƒ½ï¼ŒåŒæ—¶ä¿æŒæä½æ¨ç†æˆæœ¬ã€‚ å¯¹ä¸ªäººå¼€å‘è€…å’Œå°å›¢é˜Ÿæ¥è¯´ï¼Œè¿™æ„å‘³ç€å¯ä»¥åœ¨ä»£ç å®¡æŸ¥ã€é•¿æ–‡æ¡£ç†è§£ã€æ•´ä»“çº§é‡æ„ä¸Šâ€œæ”¾æ‰‹ç”¨â€ï¼Œä¸å†è¿‡åº¦æ‹…å¿ƒ Token èŠ±è´¹ã€‚</p>
<h4 data-id="heading-5">3. Claude ç³»åˆ—çš„æŒç»­è¿­ä»£</h4>
<p>Claude 3.x / 3.5 åœ¨ 2025 å¹´åˆä»æ˜¯ä»£ç ç†è§£å’Œå®‰å…¨çº¦æŸæ–¹é¢çš„æ ‡æ†ï¼Œç»™åæ¥çš„ Claude 4 ç³»åˆ—æ‰“ä¸‹åŸºç¡€ã€‚</p>
<hr/>
<h3 data-id="heading-6">Q2ï¼šIDE çš„ä»£ç†äººé©å‘½</h3>
<p><strong>å…³é”®è¯ï¼šWindsurfã€Copilot Workspaceã€o3 / o3-pro</strong></p>
<h4 data-id="heading-7">1. 4 æœˆä¸­æ—¬ â€“ OpenAI o3 &amp; o4-mini æ­£å¼ç™»åœº</h4>
<p>o3 è¢«æè¿°ä¸ºâ€œæ–°ä¸€ä»£æ·±åº¦æ¨ç†æ¨¡å‹â€ï¼Œåœ¨è½¯ä»¶å·¥ç¨‹åŸºå‡† SWE-bench ç­‰ä»»åŠ¡ä¸Šè¡¨ç°çªå‡ºï¼›o4-mini è¦†ç›–äº†å¤§é‡æ—¥å¸¸å¼€å‘éœ€æ±‚ã€‚ è¿™ä»£æ¨¡å‹å¼€å§‹åŸç”Ÿæ”¯æŒæ›´å¤æ‚çš„å‡½æ•°è°ƒç”¨å’Œç»“æ„åŒ–è¾“å‡ºï¼Œä¸º Agent åœ¨ IDE å†…åšå¤šæ­¥è®¡åˆ’å’Œæ‰§è¡Œæä¾›äº†åŸºç¡€èƒ½åŠ›ã€‚</p>
<h4 data-id="heading-8">2. 5 æœˆ â€“ Windsurfï¼šAgentic IDE æˆå‹</h4>
<p>Windsurfï¼ˆå‰ Codeiumï¼‰åœ¨ 2025 å¹´æ¨å‡ºäº†ä¾§é‡å¤šæ­¥è‡ªåŠ¨åŒ–çš„ <strong>Cascade / Turbo æ¨¡å¼</strong>ï¼Œå…è®¸ AI ä¸»åŠ¨è¯»å–ä»£ç åº“ã€è§„åˆ’å˜æ›´ã€æ‰§è¡Œä¿®æ”¹ï¼Œè€Œä¸ä»…ä»…æ˜¯åœ¨å•ä¸ªæ–‡ä»¶é‡Œè¡¥ä»£ç ã€‚ è¿™ä¸€è®¾è®¡è®©â€œè®© AI ä¿®å¤æ•´ä¸ªé¡¹ç›®çš„ TypeScript æŠ¥é”™â€è¿™ç±»éœ€æ±‚å˜æˆç°å®ï¼Œè¢«ç§°ä¸ºâ€œAgentic IDEâ€çš„é‡è¦é‡Œç¨‹ç¢‘ã€‚</p>
<h4 data-id="heading-9">3. 5 æœˆ 30 æ—¥å‰å â€“ GitHub Copilot Workspace é¢å‘æ›´å¤šç”¨æˆ·å¼€æ”¾</h4>
<p>Copilot Workspace æŠŠâ€œå†™ä»£ç â€æŠ½è±¡æˆâ€œ<strong>æå‡ºé—®é¢˜ / Issue â†’ ç”Ÿæˆè®¡åˆ’ â†’ è‡ªåŠ¨å®ç° / æäº¤ PR</strong>â€çš„æµæ°´çº¿ï¼Œè®©å¼€å‘è€…æ›´å¤šå¤„äºäº§å“ä¸è®¾è®¡å†³ç­–å±‚ï¼Œè€Œéåº•å±‚å®ç°ç»†èŠ‚å±‚ã€‚ å¯¹å¾ˆå¤šå›¢é˜Ÿæ¥è¯´ï¼Œè¿™æ˜¯ç¬¬ä¸€æ¬¡åœ¨å®˜æ–¹äº§å“ä¸­ä½“éªŒâ€œåªå†™éœ€æ±‚ï¼Œä¸æ‰“å¼€ç¼–è¾‘å™¨ä¹Ÿèƒ½å‡ºä»£ç â€çš„æ¨¡å¼ã€‚</p>
<h4 data-id="heading-10">4. 6 æœˆ 10 æ—¥ â€“ OpenAI o3-pro å‘å¸ƒ</h4>
<p>o3-pro ä½œä¸ºé«˜ç«¯ç‰ˆæœ¬ï¼Œæä¾›æ›´ç¨³å®šçš„æ¨ç†ç»“æœå’Œæ›´å¤§çš„ä¸Šä¸‹æ–‡çª—å£ï¼Œè¢« Cursorã€Windsurf ç­‰é«˜é˜¶ IDE é›†æˆä¸ºâ€œåç«¯å¤§è„‘â€ã€‚</p>
<hr/>
<h3 data-id="heading-11">Q3ï¼šå·¨å¤´å·…å³°ä¸ Vibe å¹³å°æ··æˆ˜</h3>
<p><strong>å…³é”®è¯ï¼šClaude 4.1ã€DeepSeek V3.1ã€Bolt.newã€v0.app</strong></p>
<h4 data-id="heading-12">1. 8 æœˆåˆ â€“ Claude 4.1 &amp; Claude Code å·¥ä½œç©ºé—´</h4>
<p>Claude 4.1ï¼ˆåŠå…¶é«˜ç«¯å˜ä½“ï¼‰åœ¨ä»£ç ç”Ÿæˆã€é‡æ„å’Œé•¿ä¸Šä¸‹æ–‡ç†è§£æ–¹é¢è¡¨ç°æå¼ºï¼Œè¢«ä¸å°‘å·¥ç¨‹å¸ˆè§†ä¸ºâ€œå¤æ‚åç«¯å’Œç³»ç»Ÿè®¾è®¡é¦–é€‰æ¨¡å‹â€ã€‚ ä¸ä¹‹é…å¥—çš„ <strong>Claude Code</strong> å·¥ä½œç©ºé—´å¼ºè°ƒâ€œé¡¹ç›®çº§åä½œâ€ï¼Œå¯å¯¹æ•´ä»“åº“è¿›è¡Œé‡æ„ã€æ–‡æ¡£ç”Ÿæˆå’Œæµ‹è¯•åˆ†æï¼Œæ¨åŠ¨äº†â€œåœ¨æµè§ˆå™¨é‡Œå®Œæˆæ•´å¥—å¼€å‘é—­ç¯â€çš„è¶‹åŠ¿ã€‚</p>
<h4 data-id="heading-13">2. 8 æœˆ 19 æ—¥ â€“ DeepSeek V3.1 å‘å¸ƒ</h4>
<p>V3.1 åœ¨æ¨ç†è´¨é‡å’Œä»£ç èƒ½åŠ›ä¸Šæ˜æ˜¾æå‡ï¼ŒåŒæ—¶ä¿æŒæå…·ä¼˜åŠ¿çš„ä»·æ ¼ï¼Œä½¿å¾—å…¶åœ¨ä¸ªäººå’Œä¸­å°å›¢é˜Ÿä¸­çš„é‡‡ç”¨ç‡è¿…é€Ÿä¸Šå‡ã€‚ å¤§å‚æ•°é‡ä¸é«˜æ•ˆæ¨ç†ç»“åˆï¼Œä½¿å…¶åœ¨å¾ˆå¤šè¯„æµ‹ä¸­å¯¹é—­æºå•†ç”¨æ¨¡å‹å½¢æˆæœ‰åŠ›å†²å‡»ï¼Œä¹Ÿå¸¦åŠ¨äº†æœ¬åœ°å’Œç§æœ‰éƒ¨ç½²æ–¹æ¡ˆçš„å…´èµ·ã€‚</p>
<h4 data-id="heading-14">3. Bolt.new vs v0.appï¼šVibe Coding å¹³å°æˆ˜ç«å‡æ¸©</h4>
<ul>
<li><strong>Bolt.new</strong> ä¸»æ‰“â€œå…¨æ ˆç”Ÿæˆ + ä¸€é”®éƒ¨ç½²â€ï¼Œé€‚åˆä»é›¶åˆ°ä¸€å¿«é€Ÿæ­å»ºå¯è¿è¡Œäº§å“ï¼›</li>
<li><strong>v0.app</strong> åˆ™åœ¨é«˜ä¿çœŸ UI ç”Ÿæˆå’Œäº¤äº’è®¾è®¡ä¸Šæ›´å…·ä¼˜åŠ¿ã€‚</li>
</ul>
<p>å¾ˆå¤šå·¥ç¨‹å¸ˆå½¢æˆäº†â€œç¼åˆæµâ€å·¥ä½œæµï¼šç”¨ v0 ç”Ÿæˆç•Œé¢ï¼Œå†äº¤ç»™ Bolt æˆ–æœ¬åœ° IDE / Agent å¡«å……ä¸šåŠ¡é€»è¾‘ã€‚</p>
<hr/>
<h3 data-id="heading-15">Q4ï¼šå®Œå…¨ä½“æ™ºèƒ½ä½“ä¸æœ¬åœ°ç”Ÿæ€</h3>
<p><strong>å…³é”®è¯ï¼šCursor 2.0ã€DeepSeek V3.2ã€Trae IDE</strong></p>
<h4 data-id="heading-16">1. Cursor 2.0ï¼šVibe Coding çš„ç»ˆæå½¢æ€</h4>
<p>Cursor åœ¨ 2025 å¹´ä¸‹åŠå¹´å‘å¸ƒäº† 2.0 ç‰ˆæœ¬ï¼Œå¼•å…¥æ›´å¼ºçš„å†…ç½®æ¨¡å‹ï¼ˆComposer 2.0ï¼‰ä»¥åŠå¤šæ™ºèƒ½ä½“å¹¶è¡Œèƒ½åŠ›ï¼Œå¯ä»¥è®©å¤šä¸ª Agent åœ¨ä¸åŒåˆ†æ”¯ / å­ä»»åŠ¡ä¸ŠåŒæ—¶å·¥ä½œã€‚ å€ŸåŠ©æ›´å¥½é•¿ä¸Šä¸‹æ–‡æ”¯æŒå’Œ Git Worktree éš”ç¦»ç­‰æœºåˆ¶ï¼ŒAI å¯ä»¥åœ¨åå°å¤§å¹…åº¦é‡æ„ä»£ç è€Œä¸å¹²æ‰°å¼€å‘è€…å½“å‰çš„ç¼–è¾‘çŠ¶æ€ã€‚</p>
<h4 data-id="heading-17">2. 11 æœˆ 30 æ—¥ â€“ DeepSeek V3.2 å‘å¸ƒ</h4>
<p>V3.2 åœ¨å·¥å…·è°ƒç”¨å’Œâ€œæ˜¾å¼æ€è€ƒâ€ç»“åˆä¸Šåšäº†å¢å¼ºï¼Œè®©æ¨¡å‹åœ¨æ‰§è¡Œç»ˆç«¯å‘½ä»¤ã€API è°ƒç”¨å‰ä¼šè¿›è¡Œæ›´æ¸…æ™°çš„æ¨ç†å’Œå®‰å…¨æ£€æŸ¥ï¼Œé™ä½é«˜é£é™©æ“ä½œè¯¯ç”¨æ¦‚ç‡ã€‚ è¿™ç±»è®¾è®¡å¯¹â€œè®© AI çœŸæ­£æ‰§è¡Œå‘½ä»¤â€çš„åœºæ™¯æ ¼å¤–é‡è¦ï¼Œæ˜¯å‘â€œå¯æ‰˜ç®¡ Agentâ€è¿ˆè¿›çš„ä¸€å¤§æ­¥ã€‚</p>
<h4 data-id="heading-18">3. Trae IDEï¼šæœ¬åœ°åŒ– Agent IDE çš„å´›èµ·</h4>
<p>Trae åœ¨ 2025 å¹´å¤šæ¬¡æ›´æ–°ï¼Œå¼ºåŒ–äº†ä¸å¤šå®¶æ¨¡å‹ï¼ˆå¦‚å›½é™…å¤§æ¨¡å‹ä¸ä¸­æ–‡ç”Ÿæ€æ¨¡å‹ï¼‰çš„é›†æˆï¼Œå¹¶æä¾›é¡¹ç›®çº§åä½œå’Œä»£ç å®¡æŸ¥è‡ªåŠ¨åŒ–èƒ½åŠ›ã€‚ å…¶åœ¨ä¸­æ–‡è¯­å¢ƒã€å›½å†…äº‘å¹³å°é›†æˆç­‰æ–¹é¢çš„ä¼˜åŒ–ï¼Œä½¿å…¶æˆä¸ºå›½äº§æ™ºèƒ½ IDE é˜µè¥ä¸­é¢‡å…·ä»£è¡¨æ€§çš„ä¸€ä¸ªã€‚</p>
<hr/>
<h2 data-id="heading-19">ä¸‰ã€Spec ç¼–ç¨‹ï¼šä»"èŠç€å†™"åˆ°"å†™å®Œå†èŠ"</h2>
<p><strong>å…³é”®è¯ï¼šKiroã€OpenSpecã€Spec-Driven Development</strong></p>
<h3 data-id="heading-20">1. Kiroï¼šæŠŠ Spec é©±åŠ¨åšæˆäº§å“çº§ IDE</h3>
<h4 data-id="heading-21">8 æœˆä¸­ â€“ Amazon æ¨å‡º Kiroï¼šSpec-Driven Agentic IDE</h4>
<p>Kiro è¢«å®šä½ä¸º"ä»åŸå‹åˆ°ç”Ÿäº§"çš„ Agentic å¼€å‘å¹³å°ï¼Œæ ¸å¿ƒç†å¿µæ˜¯ï¼š<strong>å…ˆå†™ Specï¼Œå†ç”± Agent æŒ‰ Spec è§„åˆ’å’Œå®ç°ä»£ç </strong>ã€‚</p>
<p>åœ¨ AWS re:Invent 2025 ç›¸å…³åˆ†äº«ä¸­ï¼ŒKiro è¢«ç”¨æ¥æ¼”ç¤ºå®Œæ•´çš„ Spec-Driven å¼€å‘æµç¨‹ï¼šéœ€æ±‚ â†’ è§„æ ¼ â†’ å®ç° â†’ æµ‹è¯• â†’ éƒ¨ç½²ï¼Œå…¨ç¨‹ç”± Agent é©±åŠ¨ã€‚</p>
<h4 data-id="heading-22">Kiro Specsï¼šæŠŠéœ€æ±‚å†™è¿›æœºå™¨å¯æ‰§è¡Œçš„è§„æ ¼ä¹¦</h4>
<p>Specs æ–‡æ¡£å°† User Storyã€æ¥å£è®¾è®¡ã€çŠ¶æ€æµã€éªŒæ”¶æ ‡å‡†ç­‰å†…å®¹ä»¥ç»“æ„åŒ–æ–¹å¼å†™åœ¨ä¸€èµ·ï¼Œæ—¢ä¾›äººç±»é˜…è¯»ï¼Œä¹Ÿä¾› Agent è§£æå’Œæ‰§è¡Œã€‚</p>
<p>Agent åœ¨ Kiro ä¸­ä¼šä¾ç…§ Spec æ‹†åˆ†ä»»åŠ¡ã€ç”Ÿæˆä»£ç å¹¶è¿è¡Œæµ‹è¯•ï¼Œå¤§å¹…å‡å°‘"èŠç€èŠç€è·‘å"çš„æƒ…å†µï¼Œä½¿ AI æ›´åƒéµå®ˆå¼€å‘è§„èŒƒçš„å›¢é˜Ÿæˆå‘˜ã€‚</p>
<h4 data-id="heading-23">Vibe vs Spec çš„å…¸å‹å¯¹æ¯”</h4>
<ul>
<li><strong>Vibe æ¨¡å¼</strong>ï¼šéœ€æ±‚æ•£è½åœ¨èŠå¤©è®°å½•é‡Œï¼Œæ¯æ¬¡è¦é å›é¡¾å¯¹è¯æ‰¾ä¸Šä¸‹æ–‡</li>
<li><strong>Spec æ¨¡å¼</strong>ï¼šä¸€ä»½å¯ç‰ˆæœ¬æ§åˆ¶çš„ Spec æ–‡ä»¶æˆä¸ºå•ä¸€çœŸç›¸æ¥æºï¼ˆSingle Source of Truthï¼‰ï¼ŒAI çš„è¡Œä¸ºè¢«å›ºåŒ–åœ¨è¿™ä»½è§„æ ¼ä¹‹ä¸­</li>
</ul>
<h3 data-id="heading-24">2. OpenSpecï¼šæŠŠ Spec æŠ½è±¡æˆå…¬å…±"åè®®å±‚"</h3>
<h4 data-id="heading-25">8 æœˆèµ· â€“ OpenSpec é¡¹ç›®æ´»è·ƒï¼Œæå‡ºé€šç”¨ Spec-Driven æ¡†æ¶</h4>
<p>OpenSpec é¡¹ç›®æ—¨åœ¨ä¸º AI ç¼–ç¨‹åŠ©æ‰‹æä¾›è½»é‡ã€å¯ç§»æ¤çš„ Spec å®šä¹‰æ–¹å¼ï¼Œè®©å„ç§ç¼–è¾‘å™¨å’Œ Agent å…±ç”¨åŒä¸€å¥—è§„æ ¼æè¿°ã€‚</p>
<p>å®ƒé‡‡ç”¨ Markdown / æ–‡æœ¬ + çº¦å®šå¼ç»“æ„ï¼Œè®© Spec æ—¢å¯æ‰‹å†™ï¼Œä¹Ÿå¯ç”±æ¨¡å‹ç”Ÿæˆæˆ–ä¿®æ”¹ã€‚</p>
<h4 data-id="heading-26">å…¸å‹å·¥ä½œæµï¼šProposal â†’ Apply â†’ Archive</h4>
<ul>
<li><strong>Proposal</strong>ï¼šä¸ºæŸä¸€åŠŸèƒ½æˆ–å˜æ›´ç”Ÿæˆæœºå™¨å¯è¯»çš„"å¼€å‘è¯´æ˜ä¹¦"</li>
<li><strong>Apply</strong>ï¼šAI åŠ©æ‰‹ä¸¥æ ¼æŒ‰ç…§ Spec æ‰§è¡Œä¿®æ”¹ã€ç”Ÿæˆä»£ç å’Œæµ‹è¯•</li>
<li><strong>Archive</strong>ï¼šå®Œæˆåå°† Spec ä¸å˜æ›´ç»“æœä¸€å¹¶å½’æ¡£ï¼Œæˆä¸ºé¡¹ç›®çš„æ´»æ–‡æ¡£å’Œå®¡è®¡è®°å½•</li>
</ul>
<p>è¿™ä¸€æ¨¡å¼è¢«ä¸å°‘å¼€å‘è€…è§†ä¸º"ä¸º AI å†™ PRD"ï¼ŒæŠŠ AI å˜æˆçœŸæ­£å—è§„æ ¼çº¦æŸçš„æ‰§è¡Œè€…ã€‚</p>
<h4 data-id="heading-27">ä» IDE åŠŸèƒ½åˆ°ç”Ÿæ€åŸºç¡€è®¾æ–½</h4>
<p>ä¸ Kiro å†…å»ºçš„ Spec æ¨¡å¼ä¸åŒï¼ŒOpenSpec æ›´åƒä¸€ä¸ªè·¨å·¥å…·çš„åè®®å±‚ï¼Œä½¿ Cursorã€Claude Codeã€Cline ç­‰å¤šä¸ªå·¥å…·å¯ä»¥å…±äº«åŒæ ·çš„è§„æ ¼ä¹¦ã€‚</p>
<hr/>
<h2 data-id="heading-28">å››ã€Skill ç¼–ç¨‹ï¼šç»™ Agent å†™"è¡Œä¸ºè§„æ ¼"</h2>
<p><strong>å…³é”®è¯ï¼šClaude Skills / Agent Skills</strong></p>
<p>å¦‚æœè¯´ Kiro / OpenSpec ç®¡çš„æ˜¯"é¡¹ç›®è§„æ ¼ï¼ˆFeature Specï¼‰"ï¼Œé‚£ä¹ˆ Claude Skills ç®¡çš„å°±æ˜¯"è¡Œä¸ºè§„æ ¼ï¼ˆBehavior Spec / Agent Skillsï¼‰"ã€‚</p>
<h3 data-id="heading-29">Claude Skillsï¼šå¯ç¼–ç¨‹çš„ Agent å°æŠ€èƒ½</h3>
<h4 data-id="heading-30">10 æœˆä¸­ â€“ Claude Skills / Agent Skills å¯¹å¤–å¯ç”¨</h4>
<p>2025 å¹´ 10 æœˆå‰åï¼ŒClaude Skillsï¼ˆåˆç§° Agent Skillsï¼‰é€æ­¥å¼€æ”¾ç»™å¼€å‘è€…ï¼Œç”¨äºå®šä¹‰ Claude åœ¨ç‰¹å®šåœºæ™¯ä¸‹çš„å¯å¤ç”¨è¡Œä¸ºæ¨¡å—ã€‚</p>
<p>åˆæœŸå°±æœ‰å›´ç»•æ–‡æ¡£å¤„ç†ã€è‡ªåŠ¨åŒ–æŠ¥è¡¨ã€åˆ›æ„ç”Ÿæˆã€å·¥ä½œæµç¼–æ’ç­‰æŠ€èƒ½è¢«æ•´ç†æˆ"Skill åŒ…"ï¼Œå½¢æˆäº†é¢å‘ä¸åŒè§’è‰²çš„å·¥å…·é›†ã€‚</p>
<h4 data-id="heading-31">Skill çš„æœ¬è´¨ï¼šè¡Œä¸ºçº§åˆ«çš„ Spec</h4>
<p>ä¸€ä¸ª Skill é€šå¸¸åŒ…å«è¯´æ˜æ–‡æ¡£ï¼ˆå¦‚ <code>SKILL.md</code>ï¼‰å’Œå®ç°é€»è¾‘ï¼ˆè„šæœ¬ã€API é…ç½®ç­‰ï¼‰ï¼Œå®šä¹‰äº†è§¦å‘æ¡ä»¶ã€è¾“å…¥è¾“å‡ºå’Œæ‰§è¡Œæ­¥éª¤ã€‚</p>
<p>å½“ç”¨æˆ·å‘èµ·é€‚é…æŸ Skill çš„è¯·æ±‚æ—¶ï¼ŒClaude ä¸å†é ä¸€æ¬¡æ¬¡é›¶æ•£çš„ Promptï¼Œè€Œæ˜¯æŒ‰ Skill ä¸­çš„æµç¨‹è§„èŒƒæ‰§è¡Œï¼Œä¿è¯è¡Œä¸ºçš„ä¸€è‡´æ€§å’Œå¯å®¡è®¡æ€§ã€‚</p>
<h4 data-id="heading-32">é¡¹ç›®è§„æ ¼ vs è¡Œä¸ºè§„æ ¼</h4>
<ul>
<li><strong>é¡¹ç›®è§„æ ¼ï¼ˆKiro / OpenSpecï¼‰</strong> ï¼šå®šä¹‰"è¦åšä»€ä¹ˆã€åšæˆä»€ä¹ˆæ ·"</li>
<li><strong>è¡Œä¸ºè§„æ ¼ï¼ˆClaude Skillsï¼‰</strong> ï¼šå®šä¹‰"æ€ä¹ˆåšã€æŒ‰ä»€ä¹ˆæµç¨‹åš"</li>
</ul>
<p>ä¸¤è€…ç»“åˆåï¼Œä¸€ä¸ªå…¸å‹æµç¨‹ä¼šå˜æˆï¼šå…ˆç”¨ OpenSpec / Kiro å†™æ¸…æ¥šéœ€æ±‚ï¼Œå†è®©å…·å¤‡ç‰¹å®š Skills çš„ Claude / IDE Agent æ¥æ‰§è¡Œè§„æ ¼ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4d6b9dfbd8bb4babac2aab3a7f9381f9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRGVscm95:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767689471&amp;x-signature=syPeh1vP5NTdTFv4lly18FdKiGM%3D" alt="image.png" loading="lazy"/>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4bf09378ab554ea1b67308101e3d8058~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRGVscm95:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767689471&amp;x-signature=DXqC%2B40hLtKRv9eW9JypbPzjJNQ%3D" alt="image.png" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-33">äº”ã€2025 å¸¦æ¥çš„ä¸‰é‡è®¤çŸ¥å‡çº§</h2>
<h3 data-id="heading-34">1. ä» Syntax åˆ° Semantics</h3>
<p>æ¨¡å‹å·²ç»è¶³å¤Ÿç†è§£è¯­æ³•å’Œæ¡†æ¶ç»†èŠ‚ï¼Œå¼€å‘è€…è¶Šæ¥è¶Šå¤šæŠŠç²¾åŠ›æ”¾åœ¨<strong>ä¸šåŠ¡è¯­ä¹‰ã€é¢†åŸŸçŸ¥è¯†å’Œäº§å“ä½“éªŒ</strong>ä¸Šã€‚</p>
<h3 data-id="heading-35">2. Prompt Engineering å·²æ­»ï¼ŒContext &amp; Spec æ°¸ç”Ÿ</h3>
<p>ä¸å…¶çº ç»“ä¸€å¥ Prompt è¯¥æ€ä¹ˆå†™ï¼Œä¸å¦‚æŠŠéœ€æ±‚ã€çº¦æŸå’Œæµç¨‹å†™æˆå¯å¤ç”¨çš„ Spec / Skillï¼Œè®© AI åœ¨æ¸…æ™°çš„è¾¹ç•Œé‡Œå·¥ä½œã€‚</p>
<h3 data-id="heading-36">3. Vibe Coding æˆä¸ºæ—¥å¸¸ï¼ŒSpec &amp; Skills æˆä¸º"ä¸Šçº¿çº§å·¥ç¨‹"æ ‡é…</h3>
<ul>
<li><strong>Vibe Coding</strong> ä¾æ—§æ˜¯æ¢ç´¢å’ŒåŸå‹é˜¶æ®µæœ€çˆ½çš„æ–¹å¼</li>
<li>ä¸€æ—¦è¿›å…¥å¤šäººåä½œå’Œç”Ÿäº§çº§é¡¹ç›®ï¼Œ<strong>Spec é©±åŠ¨ä¸ Skill é©±åŠ¨</strong>å¼€å§‹æˆä¸º"è®© AI çœŸæ­£è¿›å›¢é˜Ÿ"çš„åŸºç¡€è®¾æ–½</li>
</ul>
<hr/>
<h2 data-id="heading-37">ç»“è¯­</h2>
<p>2025 å¹´ï¼Œæˆ‘ä»¬è§è¯äº† AI ç¼–ç¨‹ä»"è¾…åŠ©å·¥å…·"åˆ°"åä½œä¼™ä¼´"çš„å†å²æ€§è·¨è¶Šã€‚ä»å¹´åˆ o3-mini çš„å‘å¸ƒï¼Œåˆ°å¹´ä¸­ Windsurfã€Copilot Workspace çš„é©æ–°ï¼Œå†åˆ°ä¸‹åŠå¹´ Kiroã€OpenSpecã€Claude Skills çš„å´›èµ·â€”â€”è¿™ä¸€å¹´çš„æ¯ä¸ªèŠ‚ç‚¹ï¼Œéƒ½åœ¨é‡æ–°å®šä¹‰"ç¼–ç¨‹"è¿™ä»¶äº‹çš„è¾¹ç•Œã€‚</p>
<p><strong>å±•æœ› 2026</strong>ï¼šå¦‚æœä½ çš„å›¢é˜Ÿè¿˜åœ¨çº ç»“è¦ä¸è¦ç”¨ AIï¼Œé‚£å·²ç»æ™šäº†ä¸€æ­¥ã€‚çœŸæ­£çš„é—®é¢˜æ˜¯ï¼š<strong>ä½ è¦ä¸è¦ä¸ºå›¢é˜Ÿå»ºç«‹ä¸€å¥— Spec / Skills èƒ½åŠ›æ ˆï¼Œè®© AI ä¸åªæ˜¯ä¸ªèŠå¤©æœºå™¨äººï¼Œè€Œæ˜¯ä¸€ä¸ªçœŸæ­£èƒ½æ¥ç®¡é¡¹ç›®ã€éµå®ˆè§„èŒƒçš„è™šæ‹Ÿå›¢é˜Ÿæˆå‘˜ï¼Ÿ</strong></p>
<p>è¿™ä¸æ˜¯æŠ€æœ¯çš„é€‰æ‹©ï¼Œè€Œæ˜¯ç”Ÿäº§åŠ›é©å‘½çš„å…¥åœºåˆ¸ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç½‘ç«™/æ¥å£å¯ç”¨æ€§æ‹¨æµ‹æœ€ä½³å®è·µ]]></title>    <link>https://juejin.cn/post/7589466356779761716</link>    <guid>https://juejin.cn/post/7589466356779761716</guid>    <pubDate>2025-12-30T10:21:34.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589466356779761716" data-draft-id="7589445154534441012" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç½‘ç«™/æ¥å£å¯ç”¨æ€§æ‹¨æµ‹æœ€ä½³å®è·µ"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-30T10:21:34.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¯è§‚æµ‹æ€§ç”¨è§‚æµ‹äº‘"/> <meta itemprop="url" content="https://juejin.cn/user/2392958212523102"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç½‘ç«™/æ¥å£å¯ç”¨æ€§æ‹¨æµ‹æœ€ä½³å®è·µ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2392958212523102/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¯è§‚æµ‹æ€§ç”¨è§‚æµ‹äº‘
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-30T10:21:34.000Z" title="Tue Dec 30 2025 10:21:34 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ç®€ä»‹</h2>
<p>å¯ç”¨æ€§ç›‘æµ‹æ˜¯è§‚æµ‹äº‘æä¾›çš„ç»¼åˆæ€§åœ¨çº¿æœåŠ¡ç›‘æ§æ–¹æ¡ˆã€‚å®ƒé€šè¿‡åˆ›å»ºæ— éœ€ç¼–å†™ä»£ç çš„ APIï¼Œåˆ©ç”¨å…¨çƒåˆ†å¸ƒçš„ç›‘æµ‹ç‚¹æ¨¡æ‹ŸçœŸå®ç”¨æˆ·åœ¨ä¸åŒåœ°åŒºå’Œç½‘ç»œç¯å¢ƒä¸‹çš„è®¿é—®ä½“éªŒã€‚è¿™ç§ç›‘æµ‹ä¸ä»…æ¶µç›–ç½‘ç»œè´¨é‡ã€ç½‘ç«™æ€§èƒ½ã€å…³é”®ç«¯ç‚¹ç­‰å…³é”®ä¸šåŠ¡åœºæ™¯ï¼Œè¿˜æä¾›äº†å¯¹ç”¨æˆ·ä½¿ç”¨ä½“éªŒç­‰å¤šç»´åº¦æ€§èƒ½æŒ‡æ ‡çš„å‘¨æœŸæ€§ç›‘æ§ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fc95941ac46f401c8f5ce01a3219c284~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y-v6KeC5rWL5oCn55So6KeC5rWL5LqR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767694893&amp;x-signature=mDImEHfUJW1GQYUvJgWr6gJqn8k%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-1">åº”ç”¨åœºæ™¯</h2>
<ul>
<li>å¤šåè®®æ”¯æŒï¼šåŸºäº HTTPã€TCPã€ICMPã€WEBSOCKET åè®®åˆ›å»ºæ‹¨æµ‹ä»»åŠ¡ï¼Œå¤šæ–¹é¢ä¸»åŠ¨ç›‘æ§åœ¨çº¿ä¸šåŠ¡çš„å¯ç”¨æ€§å’Œæ€§èƒ½ï¼›</li>
<li>å…¨çƒç½‘ç»œç›‘æ§ï¼šåˆ©ç”¨è§‚æµ‹äº‘éå¸ƒå…¨çƒçš„ç›‘æµ‹ç‚¹ï¼Œå³æ—¶ç›‘æµ‹ç½‘ç»œæ€§èƒ½ï¼Œä¿éšœå…¨çƒæœåŠ¡çš„å¯ç”¨æ€§å’Œæ€§èƒ½è¡¨ç°ï¼›</li>
<li>ç½‘ç»œç«™ç‚¹è®¿é—®æ€§èƒ½åˆ†æï¼šä»åœ°ç†çº¬åº¦å’Œå¯ç”¨æ€§è¶‹åŠ¿ä¸¤ä¸ªæ–¹é¢ï¼Œåˆ†æç½‘ç»œç«™ç‚¹çš„å¯ç”¨æ€§æ€§èƒ½ï¼›</li>
<li>å®æ—¶å‘Šè­¦é€šçŸ¥ï¼šåŸºäºæ‹¨æµ‹ä»»åŠ¡äº§ç”Ÿçš„æ•°æ®é…ç½®å‘Šè­¦è§„åˆ™ï¼Œå½“ä¸šåŠ¡å‡ºç°å¼‚å¸¸ï¼Œä¼šåŸºäºè§„åˆ™ä»¥é‚®ä»¶ã€é’‰é’‰æœºå™¨äººç­‰æ–¹å¼å‘é€å‘Šè­¦é€šçŸ¥ã€‚</li>
</ul>
<h2 data-id="heading-2">å®è·µæ­¥éª¤</h2>
<h3 data-id="heading-3">1ã€åˆ›å»ºæ‹¨æµ‹ä»»åŠ¡</h3>
<ul>
<li>åœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fconsole.guance.com%2F" target="_blank" title="https://console.guance.com/" ref="nofollow noopener noreferrer">è§‚æµ‹äº‘</a>çš„ã€Œå¯ç”¨æ€§ç›‘æµ‹ã€åŠŸèƒ½ä¸­ï¼Œæ–°å»ºæ‹¨æµ‹ä»»åŠ¡ï¼Œè¿™é‡Œä»¥ API æ‹¨æµ‹ä¸ºä¾‹ã€‚</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4fa648bfb4ce49d69b807298426369ac~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y-v6KeC5rWL5oCn55So6KeC5rWL5LqR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767694893&amp;x-signature=k9fMfYxIX4Zeq%2BGuHaPyBXiwIUE%3D" alt="" loading="lazy"/></p>
<ul>
<li>é€‰æ‹©æ‹¨æµ‹ç±»å‹ï¼Œå¡«å†™ç›®æ ‡ URL å’Œåˆ¤æ–­æ¡ä»¶ã€‚</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/96e3ece53bc840bd9fed39984ebf45c4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y-v6KeC5rWL5oCn55So6KeC5rWL5LqR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767694893&amp;x-signature=pj0%2BEfg9aC%2FZt%2B%2FR5P788elAU0w%3D" alt="" loading="lazy"/></p>
<ul>
<li>æŒ‰éœ€é€‰æ‹©å‘é€æ‹¨æµ‹çš„èŠ‚ç‚¹ï¼Œä»¥åŠæ‹¨æµ‹é¢‘ç‡ï¼Œç‚¹å‡»ä¿å­˜å³å¯ã€‚</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/78dbed8196f14490a9844f72534e7444~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y-v6KeC5rWL5oCn55So6KeC5rWL5LqR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767694893&amp;x-signature=d0xap3LVsq0T854kY6r4HJnNsHU%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-4">2ã€æŸ¥çœ‹æ•ˆæœ</h3>
<p>ç­‰æ‹¨æµ‹é¢‘ç‡è§¦å‘åï¼Œå³å¯åœ¨ã€Œå¯ç”¨æ€§ç›‘æµ‹ã€çš„æ¦‚è§ˆå’ŒæŸ¥çœ‹å™¨ä¸­ï¼Œå³å¯æŸ¥çœ‹åˆ°è¯¦ç»†çš„ç»“æœã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bde7d999fb91452095cfc7fd586eaef6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y-v6KeC5rWL5oCn55So6KeC5rWL5LqR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767694893&amp;x-signature=Sx6smQBiRwHtfbVwgTmWRq4pV7A%3D" alt="" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/650dbf0930c741cebc5e92b276d45d55~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y-v6KeC5rWL5oCn55So6KeC5rWL5LqR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767694893&amp;x-signature=parAUN8B8VjozVy3KXQXQuEHU3Q%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-5">3ã€è®¾ç½®å‘Šè­¦ç›‘æ§</h3>
<p>å½“æˆ‘ä»¬å¸Œæœ›æ‹¨æµ‹ç»“æœæœ‰å¼‚å¸¸æ—¶ï¼Œèƒ½ä¸»åŠ¨å‘Šè­¦é€šçŸ¥åˆ°ç›¸å…³çš„è´Ÿè´£äººï¼›æˆ‘ä»¬å¯ä»¥è®¾ç½®<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.guance.com%2Fmonitoring%2Fmonitor%2F" target="_blank" title="https://docs.guance.com/monitoring/monitor/" ref="nofollow noopener noreferrer">ç›‘æ§å™¨</a>æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p>
<h4 data-id="heading-6">3.1 æ–°å»ºå¯ç”¨æ€§æ•°æ®æ£€æµ‹</h4>
<p>åœ¨è§‚æµ‹äº‘çš„ã€Œç›‘æ§ã€åŠŸèƒ½ä¸­ï¼Œæ–°å»ºç›‘æ§å™¨ï¼Œé€‰æ‹©â€œå¯ç”¨æ€§æ•°æ®æ£€æµ‹â€ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/15319f7f82f44fd79e257b65bc0f7002~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y-v6KeC5rWL5oCn55So6KeC5rWL5LqR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767694893&amp;x-signature=EGE4X9UQX7Bp6DhHAZC50nYGAbI%3D" alt="" loading="lazy"/></p>
<h4 data-id="heading-7">3.2 å¡«å†™æ£€æµ‹é…ç½®</h4>
<p>æŒ‰éœ€å¡«å†™æ£€æµ‹é¢‘ç‡ã€æ£€æµ‹åŒºé—´ã€ä»¥åŠè§¦å‘çš„è§„åˆ™ã€‚è¿™é‡Œè¡¨ç¤ºå“åº”æ—¶é—´å¤§äº 100ms å°±å‘Šè­¦ã€‚æ›´å¤šè¯¦æƒ…ï¼Œå¯å‚è€ƒ<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.guance.com%2Fmonitoring%2Fmonitor%2Fmonitor-rule%2F%23general-config" target="_blank" title="https://docs.guance.com/monitoring/monitor/monitor-rule/#general-config" ref="nofollow noopener noreferrer">è§„åˆ™é…ç½®</a>ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ec646e19d95f41dfb3fcd4ce0d0f7d6e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y-v6KeC5rWL5oCn55So6KeC5rWL5LqR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767694893&amp;x-signature=jdpe6SdRhSky7JlC8OGOYBCF6QI%3D" alt="" loading="lazy"/></p>
<h4 data-id="heading-8">3.3 è‡ªå®šä¹‰é€šçŸ¥å†…å®¹</h4>
<p>è§‚æµ‹äº‘æ”¯æŒè‡ªå®šä¹‰å‘Šè­¦é€šçŸ¥çš„æ ‡é¢˜å’Œå†…å®¹ï¼Œå¹¶ä¸”å¯ä»¥ä½¿ç”¨é¢„ç½®çš„<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.guance.com%2Fmonitoring%2Fmonitor%2Fevent-template%2F" target="_blank" title="https://docs.guance.com/monitoring/monitor/event-template/" ref="nofollow noopener noreferrer">æ¨¡æ¿å˜é‡</a>ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ceb7ce5f4bf74bc39f94ba068702278c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y-v6KeC5rWL5oCn55So6KeC5rWL5LqR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767694893&amp;x-signature=znYd2lLZ54tjzlXj0W36g1zdrW0%3D" alt="" loading="lazy"/></p>
<h4 data-id="heading-9">3.4 é€‰æ‹©å‘Šè­¦ç­–ç•¥</h4>
<p>ç›‘æ§æ»¡è¶³è§¦å‘æ¡ä»¶åï¼Œæ”¯æŒå°†å‘Šè­¦æ¶ˆæ¯å‘é€ç»™æŒ‡å®šçš„<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.guance.com%2Fmonitoring%2Fnotify-target%2F" target="_blank" title="https://docs.guance.com/monitoring/notify-target/" ref="nofollow noopener noreferrer">é€šçŸ¥å¯¹è±¡</a>ã€‚é€šçŸ¥å¯¹è±¡åŒ…æ‹¬ä½†ä¸é™äºï¼šé’‰é’‰æœºå™¨äººã€ä¼ä¸šå¾®ä¿¡æœºå™¨äººã€é£ä¹¦æœºå™¨äººã€Webhook è‡ªå®šä¹‰ã€çŸ­ä¿¡ç»„ã€ç®€å• HTTP è¯·æ±‚ã€Slackã€Teamsã€ç”µè¯ã€IM æ¶ˆæ¯å‘é€ç­‰ç­‰</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/882798b92f694f4bb792ed438c4d65e0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y-v6KeC5rWL5oCn55So6KeC5rWL5LqR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767694893&amp;x-signature=nkI%2B59%2BQNbVCKeN6jYqT5hrf6uo%3D" alt="" loading="lazy"/></p>
<h4 data-id="heading-10">3.5 æŸ¥çœ‹å‘Šè­¦ç»“æœ</h4>
<p>å‘Šè­¦è§¦å‘åï¼Œç›¸å…³é€šçŸ¥å¯¹è±¡å°±ä¼šæ”¶åˆ°å‘Šè­¦ä¿¡æ¯ï¼Œä»¥ä¸‹æ˜¯é’‰é’‰æœºå™¨äººçš„å‘Šè­¦ä¿¡æ¯ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fd93a2b3453c45ca96f6319e8a81cf55~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y-v6KeC5rWL5oCn55So6KeC5rWL5LqR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767694893&amp;x-signature=PDubhKZyI4Ogz1RowNcww9uqGWY%3D" alt="" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åœ¨Codexä¸­é…ç½®ä½¿ç”¨æ™ºè°±ã€Ollamaæœ¬åœ°æ¨¡å‹]]></title>    <link>https://juejin.cn/post/7589262021562073129</link>    <guid>https://juejin.cn/post/7589262021562073129</guid>    <pubDate>2025-12-30T10:28:18.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589262021562073129" data-draft-id="7589262021562040361" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åœ¨Codexä¸­é…ç½®ä½¿ç”¨æ™ºè°±ã€Ollamaæœ¬åœ°æ¨¡å‹"/> <meta itemprop="keywords" content="VibeCoding"/> <meta itemprop="datePublished" content="2025-12-30T10:28:18.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸‰æ–—ç±³"/> <meta itemprop="url" content="https://juejin.cn/user/3157453124416622"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åœ¨Codexä¸­é…ç½®ä½¿ç”¨æ™ºè°±ã€Ollamaæœ¬åœ°æ¨¡å‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3157453124416622/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸‰æ–—ç±³
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-30T10:28:18.000Z" title="Tue Dec 30 2025 10:28:18 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ç¼–è¾‘config.tomlæ–‡ä»¶ï¼š</p>
<pre><code class="hljs language-js" lang="js"># model_provider = <span class="hljs-string">"wenwen"</span>
# model = <span class="hljs-string">"gpt-5.2"</span>

model_provider = <span class="hljs-string">"glm"</span>
model = <span class="hljs-string">"glm-4.7"</span>

model_reasoning_effort = <span class="hljs-string">"medium"</span>

# å®šä¹‰ <span class="hljs-title class_">Codex</span> æ‰§è¡Œæ•æ„Ÿæ“ä½œï¼ˆå¦‚åˆ é™¤æ–‡ä»¶ã€å®‰è£…åŒ…ï¼‰æ—¶æ˜¯å¦è¯¢é—®ã€‚
approval_policy = <span class="hljs-string">"never"</span>
# æ²™ç®±æ¨¡å¼ã€‚restricted (å—é™), danger-full-access (å…è®¸ <span class="hljs-variable constant_">AI</span> å®Œå…¨è®¿é—®ä½ çš„æœ¬åœ°ç³»ç»Ÿæ–‡ä»¶å’Œç½‘ç»œ)
sandbox_mode = <span class="hljs-string">"danger-full-access"</span>
# éšç§ä¿æŠ¤ã€‚å¼€å¯åï¼Œ<span class="hljs-title class_">Codex</span> ä¸ä¼šå°†å¯¹è¯å†å²å’Œä»£ç ä¸Šä¸‹æ–‡å­˜å‚¨åœ¨æœ¬åœ°æ—¥å¿—æˆ–äº‘ç«¯ç¼“å­˜ä¸­ã€‚
disable_response_storage = <span class="hljs-literal">true</span>

# --- windows wsl è®¾ç½®ï¼ˆç³»ç»Ÿå…¼å®¹ï¼‰ --- 
windows_wsl_setup_acknowledged = <span class="hljs-literal">true</span>


[model_providers.<span class="hljs-property">glm</span>]
name = <span class="hljs-string">"glm"</span>
base_url=<span class="hljs-string">"https://open.bigmodel.cn/api/coding/paas/v4"</span>
env_key=<span class="hljs-string">"GLM_API_KEY"</span>
wire_api = <span class="hljs-string">"chat"</span>

[model_providers.<span class="hljs-property">wenwen</span>]
name = <span class="hljs-string">"wenwen"</span>
base_url=<span class="hljs-string">"https://code.wenwen-ai.com/v1"</span>
wire_api = <span class="hljs-string">"responses"</span>
requires_openai_auth = <span class="hljs-literal">true</span>

[model_providers.<span class="hljs-property">ollama</span>]
name = <span class="hljs-string">"Ollama"</span>
base_url=<span class="hljs-string">"http://127.0.0.1:11434/v1"</span>
env_key=<span class="hljs-string">"ollama"</span>

# --- å±æ€§ ---
[profiles.<span class="hljs-property">use</span>-glm]
model = <span class="hljs-string">"glm-4.7"</span>
model_provider = <span class="hljs-string">"glm"</span>

[profiles.<span class="hljs-property">use</span>-wenwen]
model = <span class="hljs-string">"gpt-5.2"</span>
model_provider = <span class="hljs-string">"wenwen"</span>

[profiles.<span class="hljs-property">use</span>-ollama]
model = <span class="hljs-string">"deepseek-r1:8b"</span>
model_provider = <span class="hljs-string">"ollama"</span>


[notice]
hide_gpt5_1_migration_prompt = <span class="hljs-literal">true</span>

[features]
# enable_experimental_windows_sandbox = <span class="hljs-literal">true</span>  # æ—§ç‰ˆ
experimental_windows_sandbox = <span class="hljs-literal">true</span>
streamable_shell = <span class="hljs-literal">true</span>          # enable the streamable exec tool
web_search_request = <span class="hljs-literal">true</span>        # allow the model to request web searches
</code></pre>
<p>åˆ‡æ¢æ¨¡å‹ï¼š</p>
<p>ä½¿ç”¨æ™ºè°±çš„æ¨¡å‹ï¼š</p>
<pre><code class="hljs language-js" lang="js">codex --profile use-glm <span class="hljs-string">"ä½ æ˜¯è°"</span>
</code></pre>
<p>ä½¿ç”¨é—®é—®çš„æ¨¡å‹ï¼š</p>
<pre><code class="hljs language-js" lang="js">codex --profile use-wenwen <span class="hljs-string">"ä½ æ˜¯è°"</span>
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å½“ Gemini 3 èƒ½å†™å‡ºå®Œç¾ CSS æ—¶ï¼Œå‰ç«¯å·¥ç¨‹å¸ˆå‰©ä¸‹çš„æ ¸å¿ƒç«äº‰åŠ›æ˜¯ä»€ä¹ˆï¼Ÿ]]></title>    <link>https://juejin.cn/post/7588837042014060570</link>    <guid>https://juejin.cn/post/7588837042014060570</guid>    <pubDate>2025-12-29T07:42:41.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588837042014060570" data-draft-id="7588711557500715058" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å½“ Gemini 3 èƒ½å†™å‡ºå®Œç¾ CSS æ—¶ï¼Œå‰ç«¯å·¥ç¨‹å¸ˆå‰©ä¸‹çš„æ ¸å¿ƒç«äº‰åŠ›æ˜¯ä»€ä¹ˆï¼Ÿ"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,AIç¼–ç¨‹"/> <meta itemprop="datePublished" content="2025-12-29T07:42:41.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ErpanOmer"/> <meta itemprop="url" content="https://juejin.cn/user/3878732754331096"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å½“ Gemini 3 èƒ½å†™å‡ºå®Œç¾ CSS æ—¶ï¼Œå‰ç«¯å·¥ç¨‹å¸ˆå‰©ä¸‹çš„æ ¸å¿ƒç«äº‰åŠ›æ˜¯ä»€ä¹ˆï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3878732754331096/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ErpanOmer
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-29T07:42:41.000Z" title="Mon Dec 29 2025 07:42:41 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-29
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1e61223f0e4442c480467f4c9d58f68a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRXJwYW5PbWVy:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767598961&amp;x-signature=RYHNyjCzWiDMmV1dT0itPK4taA8%3D" alt="google-gemini-3-inc.webp" loading="lazy"/></p>
<h3 data-id="heading-0">å…„å¼Ÿä»¬ï¼Œå’±ä»¬çš„æŠ¤åŸæ²³è¶Šæ¥è¶Šçª„äº†ğŸ˜­</h3>
<p>Gemini 3 çš„å‘å¸ƒä¼šï¼Œå¤§å®¶çœ‹äº†æ²¡ï¼Ÿ</p>
<p>æˆ‘æ˜¯åœ¨è¢«çªé‡Œçœ‹å®Œçš„ã€‚çœ‹å®Œä¹‹åï¼Œæˆ‘ç›´æ¥å¤±çœ äº†ã€‚</p>
<p>ä»¥å‰æˆ‘è§‰å¾— AI å†™ä»£ç ä¹Ÿå°±é‚£æ ·ï¼Œå†™ä¸ª Todo List è¿˜è¡Œï¼ŒçœŸè¦ä¸Šä¸šåŠ¡é€»è¾‘ï¼Œå®ƒå°±å¾—å¹»è§‰ç»™ä½ çœ‹ğŸ˜’ã€‚</p>
<p>ä½† Google ç§€çš„è¿™ä¸€æ‰‹ï¼ŒçœŸçš„æœ‰ç‚¹<strong>ä¸è®²æ­¦å¾·</strong>ã€‚</p>
<p>æˆ‘å‡ºäºå¥½å¥‡å¿ƒï¼Œç”¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Faistudio.google.com%2Fapps" target="_blank" title="https://aistudio.google.com/apps" ref="nofollow noopener noreferrer">Google Al Studio</a> è¯•äº†ä¸€ä¸‹å‡ ä¸ªç»å…¸çš„éœ€æ±‚, ç›´æ¥æŠŠé£ä¹¦éœ€æ±‚æ–‡æ¡£æ‰”ç»™å®ƒï¼ˆçº¯æ–‡æ¡ˆï¼‰ğŸ‘‡ï¼š</p>
<pre><code class="hljs language-vbnet" lang="vbnet">Recall landing page
<span class="hljs-number">1</span>. é¡µè„šçš„recallsè·³è½¬æ–°çš„recall landing page
[å›¾ç‰‡]
<span class="hljs-number">2</span>. é¡µé¢å†…å®¹
æ ‡é¢˜ï¼šProduct Recalls

ä¸¤ä¸ªå†…å®¹æ¨¡å—ï¼Œç‚¹å‡»åè·³è½¬è‡³å„è‡ªè¯¦æƒ…é¡µ
ç¬¬ä¸€ä¸ªï¼š
<span class="hljs-number">2025</span> Fat Tire Trike Recall Notice
Pedego has issued a safety recall <span class="hljs-keyword">for</span> Fat Tire Trikes due <span class="hljs-keyword">to</span> a potential frame fracture near a weld that may pose fall <span class="hljs-built_in">or</span> injury risks. Affected owners are eligible <span class="hljs-keyword">for</span> a free repair, completed <span class="hljs-keyword">by</span> a local Pedego dealer.
Learn more ï¼ˆå¯ç‚¹å‡»ï¼Œè·³è½¬è‡³Fat Tire Trike Recall Pageï¼‰

ç¬¬äºŒä¸ªï¼š
<span class="hljs-number">2021</span> Cable Recall Notice
Pedego <span class="hljs-built_in">is</span> voluntarily recalling <span class="hljs-keyword">select</span> e-bike models sold <span class="hljs-keyword">from</span> January <span class="hljs-number">2018</span> <span class="hljs-keyword">to</span> August <span class="hljs-number">2020</span> due <span class="hljs-keyword">to</span> a cable issue that may cause unexpected acceleration. Affected owners should <span class="hljs-keyword">stop</span> riding <span class="hljs-built_in">and</span> register <span class="hljs-keyword">for</span> a free safety repair.
Learn moreï¼ˆå¯ç‚¹å‡»ï¼Œè·³è½¬è‡³https://www.pedegobikerecall.expertinquiry.com/?_gl=<span class="hljs-number">1</span>*<span class="hljs-number">1</span>hzkwd0*_gcl_au*MTkxNDc4ODEuMTc2MzM0NDUyMA..*_ga*MTM1MzU3NTAzOC4xNzQ1OTE1NTcz*_ga_4K15HG6FFG*czE3NjQ4MzQ5MDAkbzQyJGcwJHQxNzY0ODM0OTAxJGo1OSRsMCRoMA..*_ga_FGPZTS4D91*czE3NjQ4MzQ5MDAkbzQyJGcwJHQxNzY0ODM0OTAxJGo1OSRsMCRoMA..ï¼‰
[å›¾ç‰‡]



Fat Tire Trike Recall Page
æ ‡é¢˜ï¼šPedego Recalls Fat Tire Trike Due <span class="hljs-keyword">to</span> Fall <span class="hljs-built_in">and</span> Laceration Hazards
[æ’å…¥å‡ å¼ Fat Tire Trikeå›¾ç‰‡]
 
é¡µé¢ä¸»ä½“å†…å®¹
Name <span class="hljs-keyword">of</span> Product: Pedego Fat Tire Trike
<span class="hljs-symbol">Hazard:</span> The trike frame can develop a hairline fracture near a weld, which can cause the tube <span class="hljs-keyword">to</span> break, posing fall <span class="hljs-built_in">and</span> laceration hazards. 
Units Affected: Serial Number Range: D2312050001 - D2312050522 
 
æŒ‰é’®ï¼šREGISTER NOW ï¼ˆç‚¹å‡»åè·³è½¬è‡³é¡µé¢ä¸‹æ–¹æ³¨å†Œè¡¨å•ï¼‰
  
How <span class="hljs-built_in">is</span> Pedego making this right? 
Pedego <span class="hljs-built_in">is</span> offering you a free repair <span class="hljs-keyword">of</span> your Fat Tire Trike. We have reengineered <span class="hljs-built_in">and</span> strengthened the section <span class="hljs-keyword">of</span> the frame <span class="hljs-keyword">in</span> question. Once you register, we will ship a repair part <span class="hljs-keyword">to</span> a local Pedego dealer that you <span class="hljs-keyword">select</span> <span class="hljs-keyword">using</span> the registration form. 
We will ship the part <span class="hljs-keyword">to</span> the dealer. The Pedego dealer will repair the Fat Tire Trike free <span class="hljs-keyword">of</span> charge. There are no charges <span class="hljs-built_in">or</span> fees associated <span class="hljs-keyword">with</span> this recall. 
You will be contacted <span class="hljs-keyword">when</span> your part <span class="hljs-built_in">is</span> received at the Pedego store <span class="hljs-keyword">for</span> installation.

Make sure that other members <span class="hljs-keyword">of</span> your household also know about the recall <span class="hljs-built_in">and</span> immediately <span class="hljs-keyword">stop</span> <span class="hljs-keyword">using</span> it. Secure your Fat Tire Trike so that it cannot be ridden <span class="hljs-keyword">until</span> it <span class="hljs-built_in">is</span> repaired.
We strongly encourage you <span class="hljs-keyword">to</span> participate <span class="hljs-built_in">and</span> contact us <span class="hljs-keyword">to</span> obtain a free repair.
 
Register <span class="hljs-keyword">for</span> the free repair <span class="hljs-keyword">of</span> your Fat Tire Trike
First Name*
Last Name*
Email*
Phone number*
Dealer <span class="hljs-keyword">Where</span> youâ€™d <span class="hljs-built_in">like</span> the repair <span class="hljs-keyword">to</span> <span class="hljs-keyword">take</span> place *  [Perhaps Preload options <span class="hljs-built_in">or</span> provide location search <span class="hljs-keyword">for</span> dealerï¼ˆè¿™é‡Œæœ‰æ²¡æœ‰å¯èƒ½æä¾›é€‰é¡¹è®©æ¶ˆè´¹è€…é€‰æ‹©ï¼Ÿæˆ–è€…æœç´¢åœ°å€ï¼Ÿï¼‰]
State* 
Zip Code*
Country*
 
[] * I hereby affirm that the information I have provided <span class="hljs-built_in">is</span> accurate <span class="hljs-built_in">and</span> correct, <span class="hljs-built_in">and</span> that I have complied <span class="hljs-keyword">with</span> all requirements <span class="hljs-keyword">of</span> the above-referenced recall <span class="hljs-keyword">for</span> seeking a repair <span class="hljs-keyword">of</span> my Fat Tire Trike.
 
 Submit(æäº¤æŒ‰é’®)

æˆåŠŸæäº¤åæ˜¾ç¤ºï¼š
Thank you. Your registration has been submitted <span class="hljs-built_in">and</span> <span class="hljs-built_in">is</span> being processed. 
We will notify you <span class="hljs-keyword">when</span> the parts ship <span class="hljs-keyword">to</span> the dealer. The dealer will install <span class="hljs-built_in">and</span> repair your Fat Tire Trike free <span class="hljs-keyword">of</span> charge. 

[æ‰€æäº¤ä¿¡æ¯åœ¨è¿™é‡Œå±•ç¤º]
 
Please print this page <span class="hljs-keyword">for</span> your records. 
</code></pre>
<p><strong>æˆ‘åˆšå‡†å¤‡ç‚¹æ ¹çƒŸçš„å·¥å¤«ï¼Œé¡µé¢ UI å°±å‡ºæ¥äº†ğŸ‘‡ã€‚</strong></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6f8303d6113b4392b2b30fa14be1b8a1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRXJwYW5PbWVy:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767598961&amp;x-signature=kx7xtj8wat67uTgf0xxigsh5WW4%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e7eb998cebc14a4f933c753241eaedc5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRXJwYW5PbWVy:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767598961&amp;x-signature=xU6mjgChbI950RA%2BHZLL97x%2FkZo%3D" alt="image.png" loading="lazy"/></p>
<p>ä¸æ˜¯é‚£ç§æ»¡å± <code>div</code> çš„åƒåœ¾ä»£ç ï¼Œæ˜¯è¯­ä¹‰åŒ–æå¥½ã€ç»„ä»¶æ‹†åˆ†åˆç†ã€ç”šè‡³è¿ <code>dark mode</code> éƒ½ç»™é…å¥½äº†çš„æˆå“ï¼Œæ ¹æœ¬ä¸éœ€è¦æ”¹ä»€ä¹ˆğŸ˜–ã€‚</p>
<p>æˆ‘çœ‹ç€å±å¹•ä¸Šè‡ªå·±åˆšå†™äº†ä¸€åŠã€è¿˜åœ¨çº ç»“ <code>flex-basis</code> è¯¥ç»™å¤šå°‘çš„æ ·å¼æ–‡ä»¶ï¼Œçªç„¶è§‰å¾—ï¼š<strong>è¿™å‡ å¹´çš„ä»£ç ï¼Œå¥½åƒç™½å†™äº†ã€‚</strong></p>
<p>æˆ‘æœ€æ–°çš„ <a href="https://link.juejin.cn?target=https%3A%2F%2Ferpanomer.nurverse.com" target="_blank" title="https://erpanomer.nurverse.com" ref="nofollow noopener noreferrer">ä¸ªäººä¸»é¡µä¹Ÿæ˜¯ç”¨ Gemini 3 </a> é‡å†™çš„ï¼Œè¿™å®¡ç¾ï¼Œè¿™æ•ˆç‡ï¼Œæ²¡å¾—è¯´ï¼å¤ªå¼ºäº†ğŸ‘</p>
<hr/>
<h3 data-id="heading-1">åˆ‡å›¾ä»”çš„æ—¶ä»£æ­£å¼ç»ˆç»“äº†</h3>
<p>ä»¥å‰å’±æ€»å¼€ç©ç¬‘è¯´è‡ªå·±æ˜¯åˆ‡å›¾ä»”ï¼Œå…¶å®å¿ƒé‡Œè¿˜æ˜¯æœ‰ç‚¹å‚²æ°”çš„ï¼š <em>ä½ ä»¥ä¸º CSS å®¹æ˜“å•Šï¼ŸBFCã€å±‚å ä¸Šä¸‹æ–‡ã€å“åº”å¼æ–­ç‚¹ã€ä¸åŒå†…æ ¸çš„å…¼å®¹æ€§...è¿™ç©æ„å„¿æ°´æ·±ç€å‘¢ï¼</em></p>
<p>ä½† Gemini 3 è¿™ç§çº§åˆ«çš„ AI å‡ºæ¥ï¼Œç›´æ¥æŠŠè¿™å±‚å‚²æ°”ç»™<strong>é™ç»´æ‰“å‡»</strong>äº†ã€‚</p>
<ul>
<li><strong>æ¯”é€Ÿåº¦ï¼Ÿ</strong> ä½ è°ƒä¸€ä¸ªå¸ƒå±€è¦åŠå°æ—¶ï¼Œå®ƒåªè¦ 3 ç§’ã€‚</li>
<li><strong>æ¯”å®¡ç¾ï¼Ÿ</strong> å®ƒå­¦ä¹ äº†å…¨çƒæ•°äº¿ä¸ªç²¾ç¾ç½‘é¡µï¼Œé…å‡ºçš„è§†è§‰UI æŠŠä½ é‚£ç¨‹åºå‘˜å®¡ç¾ç”©å‡ºå‡ æ¡è¡—ã€‚</li>
<li><strong>æ¯”ç¨³å®šæ€§ï¼Ÿ</strong> å®ƒä¸ä¼šå†™é”™å•è¯ï¼Œä¹Ÿä¸ä¼šæ¼å†™åˆ†å·ï¼Œæ›´ä¸ä¼šå› ä¸ºä¸‹åˆè·Ÿäº§å“ç»ç†åµäº†æ¶å°±æ•…æ„åœ¨ä»£ç é‡ŒåŸ‹å‘ã€‚</li>
</ul>
<p><strong>è¯´å®è¯ï¼Œåœ¨å®ç°è§†è§‰ç¨¿è¿™ä»¶äº‹ä¸Šï¼Œäººç±»å·²ç»è¾“äº†ã€‚å½»åº•è¾“äº†ï¼ï¼ï¼ğŸ˜­</strong></p>
<p>å¦‚æœä½ çš„æ ¸å¿ƒç«äº‰åŠ›å°±æ˜¯èƒ½æŠŠ UI å›¾ 1:1 è¿˜åŸæˆç½‘é¡µï¼Œé‚£ä½ çš„èŒä¸šç”Ÿæ¶¯ç¡®å®å·²ç»è¿›å…¥å€’è®¡æ—¶äº†ã€‚</p>
<hr/>
<h3 data-id="heading-2">æ—¢ç„¶ CSS æˆäº†åºŸè¯ï¼Œé‚£æˆ‘ä»¬è¿˜å‰©ä»€ä¹ˆï¼Ÿ</h3>
<p>æ—¢ç„¶ AI èƒ½å†™å‡ºå®Œç¾çš„ CSSï¼Œç”šè‡³è¿äº¤äº’åŠ¨ç”»éƒ½èƒ½ä¸€å¥è¯ç”Ÿæˆï¼Œé‚£å…¬å¸å‡­å•¥è¿˜èŠ±å‡ ä¸‡å—æ‹›ä¸ªå‰ç«¯ï¼Ÿ</p>
<p>æˆ‘æƒ³äº†åŠå®¿ï¼Œè§‰å¾—å’±ä»¬å‰ç«¯è€å“¥çš„<strong>ä¿å‘½ç‰Œ</strong>ï¼Œå…¶å®æ­£åœ¨ä»æ‰‹è‰ºè½¬å‘ä¸Šå±‚å»ºç­‘ï¼š</p>
<h4 data-id="heading-3">åŸ¹å…»è‡ªå·±çš„æ¶æ„è®¾è®¡èƒ½åŠ›</h4>
<p>AI å¯ä»¥ç»™ä½ ç Œå‡ºä¸€é¢å®Œç¾çš„å¢™ï¼Œä½†å®ƒä¸çŸ¥é“è¿™é¢å¢™è¯¥ç«‹åœ¨ä»€ä¹ˆä½ç½®ã€‚</p>
<p>ä¸€ä¸ªå¤§å‹é¡¹ç›®é‡Œï¼š</p>
<ul>
<li><strong>ç»„ä»¶æ€ä¹ˆæ‹†åˆ†</strong>æœ€åˆ©äºå¤ç”¨ï¼Ÿ</li>
<li><strong>ç›®å½•ç»“æ„</strong>æ€ä¹ˆè®¾è®¡æ‰ä¸ä¼šè®©åæ¥çš„äººéª‚å¨˜ï¼Ÿ</li>
<li><strong>å…¨å±€çŠ¶æ€</strong>æ˜¯ç”¨ Zustand è¿˜æ˜¯ç›´æ¥åŸç”Ÿ Context æ¢­å“ˆï¼Ÿ</li>
</ul>
<p>è¿™äº›æ¶‰åŠåˆ°<strong>å·¥ç¨‹åŒ–å†³ç­–</strong>çš„ä¸œè¥¿ï¼ŒAI ç›®å‰è¿˜æ˜¯ä¸ªå¼Ÿå¼Ÿã€‚å®ƒåªèƒ½ç»™ä½ å±€éƒ¨çš„æœ€ä¼˜è§£ï¼Œç»™ä¸äº†ä½ å…¨å±€çš„æ¶æ„è§‚ã€‚</p>
<h4 data-id="heading-4">å¤„ç†é‚£äº›åªæœ‰äººèƒ½ç†è§£çš„ä¸šåŠ¡</h4>
<p>AI æœ€æ€•çš„æ˜¯ä»€ä¹ˆï¼Ÿæ˜¯<strong>é€»è¾‘çš„æ··æ²Œ</strong>ã€‚</p>
<blockquote>
<p>ç”¨æˆ·å¦‚æœè¿ç»­ç‚¹å‡»ä¸‰æ¬¡ï¼Œè¦è§¦å‘ä¸€ä¸ªå½©è›‹ï¼Œä½†å¦‚æœä»–æ˜¯ VIP ä¸”ä½™é¢ä¸è¶³ï¼Œè¿™ä¸ªå½©è›‹è¦æ¢æˆå……å€¼æé†’ï¼Œé¡ºä¾¿è¿˜å¾—é˜²æ­¢æ¥å£é‡æ”¾ã€‚</p>
</blockquote>
<p>è¿™ç§åªæœ‰äººç±»äº§å“ç»ç†æ‹è„‘è¢‹æƒ³å‡ºæ¥çš„ã€é€»è¾‘è½¬äº†åå…«é“å¼¯çš„è¾¹ç¼˜ Caseï¼ŒAI æå…¶å®¹æ˜“å†™å‡º Bugã€‚</p>
<p>æå®šå¤æ‚çš„å¼‚æ­¥æµï¼Œæå®šæ¶å¿ƒçš„ç«æ€æ¡ä»¶ï¼Œæå®šå„ç§å„æ ·çš„é™çº§ç­–ç•¥â€”â€”è¿™æ‰æ˜¯ä½ é¢†å·¥èµ„çš„çœŸæ­£ç†ç”±ã€‚</p>
<h4 data-id="heading-5">é©¾é©­ AI çš„èƒ½åŠ›ï¼ˆè¿™åº”è¯¥æ˜¯ 2026 å¹´çš„é«˜é¢‘é¢è¯•é¢˜ï¼‰</h4>
<p>ä»¥å‰é¢è¯•é—®ï¼šCSS æ€ä¹ˆå®ç°ä¸‰è§’å½¢ï¼Ÿ</p>
<p>ä»¥åé¢è¯•å¯èƒ½é—®ï¼šå¦‚ä½•ç”¨ä¸€å¥ Promptï¼Œè®© Gemini 3 è¾“å‡ºä¸€ä¸ªç¬¦åˆå…¬å¸ç§æœ‰ UI è§„èŒƒã€ä¸”é€šè¿‡äº† E2E æµ‹è¯•çš„å¤æ‚ç»„ä»¶ï¼Ÿ</p>
<p>AI ä¸æ˜¯ä½ çš„æ•Œäººï¼Œå®ƒå¯æ˜¯ä½ çš„å¥½ä¼™ä¼´ã€‚</p>
<p>åˆ«äººè¿˜åœ¨ç”¨æ‰‹æ•²ä»£ç æ—¶ï¼Œä½ å·²ç»å­¦ä¼šåˆ©ç”¨AI æå‡å·¥ä½œæ•ˆç‡ã€‚ä½ çš„æ ¸å¿ƒç«äº‰åŠ›ï¼Œå°±æ˜¯ä½  <strong>è°ƒæ•™ AI</strong> çš„æ°´å¹³ã€‚</p>
<hr/>
<h3 data-id="heading-6">æ²¡å¿…è¦ç„¦è™‘ï¼Œè¿™æ˜¯è¶…çº§ä¸ªä½“çš„å¼€å§‹</h3>
<p>å’±ä»¬æœ‰æœ¨æœ‰å¯èƒ½æ¢ä¸€ç§æ€è·¯ğŸ¤”ã€‚</p>
<p>ä»¥å‰æˆ‘ä»¬æƒ³åšä¸ªè‡ªå·±çš„å‰¯ä¸šé¡¹ç›®ï¼Œæœ€å¤´ç–¼çš„æ˜¯ä»€ä¹ˆï¼ŸUI å’Œ CSSã€‚</p>
<p>å¯¹äºæˆ‘ä»¬è¿™ç§é€»è¾‘å¼ºã€å®¡ç¾å¼±çš„åç«¯å‹å‰ç«¯ï¼Œè°ƒæ ·å¼ç®€ç›´æ˜¯è¦äº†äº²å‘½ã€‚</p>
<p>ç°åœ¨ Gemini 3 è¿™ç§ä¸œè¥¿å‡ºæ¥äº†ï¼Œç®€ç›´æ˜¯é€ç¦åˆ©ã€‚</p>
<ul>
<li><strong>åç«¯ï¼š</strong> è®© AI å¸®ä½ ç”Ÿæˆ Schema å’ŒåŸºç¡€ CRUDã€‚</li>
<li><strong>UI/CSSï¼š</strong> ä¸¢å¼ è‰å›¾ç»™ Gemini 3ã€‚</li>
<li><strong>å‰ç«¯æ¡†æ¶ï¼š</strong> è®© AI å¸®ä½ å†™å¥½éª¨æ¶ã€‚</li>
</ul>
<p><strong>ä½ ä¸€ä¸ªäººï¼Œå°±æ˜¯ä¸€ä¸ªè¶…çº§ä¸ªä½“ã€‚</strong></p>
<p>ä»¥å‰æˆ‘ä»¬éœ€è¦åœ¨å¤§å‚é‡Œå·ï¼Œæ˜¯å› ä¸ºå¤§å‚æœ‰èµ„æºã€æœ‰é…å¥—ã€‚</p>
<p>ç°åœ¨ AI æŠŠèµ„æºé—¨æ§›æŠ¹å¹³äº†ã€‚åœ¨è¿™ä¸ªä»£ç éå¸¸å»‰ä»·çš„æ—¶ä»£ï¼Œä½ çš„åˆ›æ„ã€ä½ çš„äº§å“æ„è¯†ã€ä½ çš„è§£å†³é—®é¢˜èƒ½åŠ›ï¼Œåè€Œå˜å¾—æ›´å€¼é’±äº†ã€‚</p>
<hr/>
<p>Gemini 3 ç¡®å®å¾ˆçŒ›ï¼ŒçŒ›åˆ°è®©äººæ€€ç–‘äººç”Ÿï¼ŒçŒ›å¾—ä¸€å¡Œç³Šæ¶‚ï¼ğŸ˜–</p>
<p>ä½†æˆ‘ç›¸ä¿¡ï¼Œåªè¦äº’è”ç½‘è¿˜éœ€è¦æœåŠ¡ï¼Œå‰ç«¯è¿™ä¸ªè§’è‰²å°±ä¸ä¼šæ¶ˆå¤±ã€‚å®ƒåªæ˜¯ä»ä½“åŠ›æ´»è¿›åŒ–æˆäº†è„‘åŠ›æ´»ã€‚</p>
<p>åˆ«çº ç»“é‚£å‡ ä¸ª <code>margin</code> å’Œ <code>padding</code> äº†ï¼Œå»ç ”ç©¶æ¶æ„ï¼Œå»æ·±æŒ–æ€§èƒ½ï¼Œå»å­¦ä¹ æ€ä¹ˆè®© AI ç»™ä½ å½“ç‰›é©¬ã€‚</p>
<p><strong>åªè¦ä½ è·‘å¾—æ¯” AI è¿›åŒ–çš„é€Ÿåº¦å¿«ï¼Œä½ å°±ä¸æ˜¯è¢«æ·˜æ±°çš„é‚£ä¸€ä¸ªã€‚</strong></p>
<p>æœ€åé»˜é»˜çš„é—®å¤§å®¶ä¸€å¥ğŸ¤£ï¼š</p>
<p>å¦‚æœæ˜å¤©ä½ çš„è€æ¿è®©ä½ è£æ‰å›¢é˜Ÿä¸€åŠçš„å‰ç«¯ï¼Œåªç•™ä¸‹é‚£äº›ä¼šç”¨ AI çš„ï¼Œä½ ä¼šæ˜¯åœ¨åå•é‡Œçš„é‚£ä¸ªäººå—ï¼Ÿ</p>
<p>æ¬¢è¿ğŸ‘é¡ºä¾¿è¯´è¯´ä½ è¢« Gemini 3 æƒŠå“åˆ°çš„ç¬é—´ğŸ˜ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Flutter å°æŠ€å·§ä¹‹å¸®ç½‘å‹ç†è§£ SliverConstraints overlap]]></title>    <link>https://juejin.cn/post/7588680081352343588</link>    <guid>https://juejin.cn/post/7588680081352343588</guid>    <pubDate>2025-12-29T02:13:10.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588680081352343588" data-draft-id="7589083093693464639" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Flutter å°æŠ€å·§ä¹‹å¸®ç½‘å‹ç†è§£ SliverConstraints  overlap"/> <meta itemprop="keywords" content="å‰ç«¯,Flutter,Android"/> <meta itemprop="datePublished" content="2025-12-29T02:13:10.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ‹çŒ«deå°éƒ­"/> <meta itemprop="url" content="https://juejin.cn/user/817692379985752"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Flutter å°æŠ€å·§ä¹‹å¸®ç½‘å‹ç†è§£ SliverConstraints  overlap
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/817692379985752/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ‹çŒ«deå°éƒ­
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-29T02:13:10.000Z" title="Mon Dec 29 2025 02:13:10 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-29
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æœ¬æœŸä¸»è¦æ˜¯åº”ç½‘å‹è¦æ±‚ï¼Œå†™ä¸€ä¸ªç®€å•è§£ç­”ï¼Œå…¶å® <code>SliverConstraints.overlap</code> å¹¶ä¸å¤æ‚ï¼Œå› ä¸ºç”¨èµ·æ¥ä¹Ÿå¾ˆç®€å•ï¼Œä½†æ˜¯å¦‚æœæ²¡æ­£ç¡®ç†è§£å®ƒä½œç”¨çš„æ—¶å€™ï¼Œå°±ä¼šå‡ºç°ç±»ä¼¼è¿™ä½ç½‘å‹çš„å›°æƒ‘ï¼Œç¡®å®å®˜æ–¹çš„æ³¨é‡Šå†™çš„å¯èƒ½å¤ªè¿‡æŠ½è±¡ï¼Œä»¥è‡³äºå¦‚æœä½ æƒ³é€šè¿‡æ³¨é‡Šç†è§£å®ƒçš„ä½œç”¨ï¼Œä¼šæ„Ÿè§‰æ¯”è¾ƒæ™¦æ¶©éš¾æ‡‚ï¼š</p>







<table><thead><tr><th><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f336d61c32df4f8a9ff39c582e36775b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oGL54yrZGXlsI_pg60=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767579189&amp;x-signature=AaHyYVDRhlwfYbx2ajI15qK6Xes%3D" alt="" loading="lazy"/></th><th><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/93b1daf6e9ae440b9baa3b5b3dafbe6a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oGL54yrZGXlsI_pg60=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767579189&amp;x-signature=5Z%2FWPJunRY5gZViCha24KpdI0xk%3D" alt="" loading="lazy"/></th></tr></thead></table>
<p>é¦–å…ˆ <code>overlap</code> çš„<strong>æœ¬è´¨å°±æ˜¯è§†è§‰ä¸å¸ƒå±€çš„â€œå·®å€¼â€</strong>ï¼Œå®ƒå°±æ˜¯ä¸€ä¸ªå·®å€¼çš„æ¦‚å¿µï¼ŒåŸºäºè¿™ä¸ªæ ¸å¿ƒå»ç†è§£å°±ä¼šå¾ˆå¥½æ˜ç™½ï¼Œç®€å•è¯´ï¼Œ åœ¨ Sliver åè®®ä¸­éœ€è¦åŒºåˆ†ä¸¤ä¸ªæ¦‚å¿µï¼š</p>
<ul>
<li><strong>Layout Extentï¼ˆå¸ƒå±€èŒƒå›´ï¼‰</strong>ï¼šSliver åœ¨æ»šåŠ¨è§†å›¾ä¸­å®é™…å æ®çš„â€œç‰©ç†ä½ç½®â€å¤§å°ï¼Œå®ƒå†³å®šäº†ä¸‹ä¸€ä¸ª Sliver ä»å“ªé‡Œå¼€å§‹æ’ç‰ˆï¼Œæ¯”å¦‚ <code>CustomScrollView</code> é‡Œä¸¤ä¸ª Sliver é¡ºåºæ’åˆ—</li>
<li><strong>Paint Extentï¼ˆç»˜åˆ¶èŒƒå›´ï¼‰</strong>ï¼šå½“å‰ Sliver åœ¨å±å¹•ä¸Šå®é™…ç”»å‡ºæ¥çš„åƒç´ å¤§å°</li>
</ul>
<p>è€Œ <code>overlap</code> çš„å®˜æ–¹æ³¨é‡Šç®€å•è¯´å°±æ˜¯ï¼š</p>
<blockquote>
<p>å½“å‰ Sliver ä¹‹å‰çš„æ‰€æœ‰ Sliverï¼ˆä¸»è¦æ˜¯ Pinned æˆ– Floating çŠ¶æ€çš„ Sliverï¼‰ï¼Œå®ƒçš„<strong>ç»˜åˆ¶èŒƒå›´</strong>è¶…å‡ºäº†<strong>å¸ƒå±€èŒƒå›´</strong>çš„æ€»å’Œã€‚</p>
</blockquote>
<p>æ˜¯ä¸æ˜¯è¿˜æ˜¯æœ‰ç‚¹æŠ½è±¡ï¼Ÿè¯´äººè¯å…¶å®å°±æ˜¯ï¼š</p>
<blockquote>
<p>Sliver3 é—® Viewportï¼šâ€œè½®åˆ°æˆ‘å‡ºåœºäº†å—ï¼Ÿâ€</p>
<p>Viewport è¯´ï¼šâ€œè½®åˆ°ä½ äº†ï¼Œä½†æ˜¯ Sliver1 å’Œ Sliver2 èµ–åœ¨å¤´é¡¶ä¸èµ°ï¼ˆPinnedï¼‰ï¼Œå®ƒä»¬è™½ç„¶åœ¨å¸ƒå±€ä¸Šå·²ç»æ»šä¸Šå»äº†ï¼ˆLayoutExtent å˜å°æˆ–ä¸º 0ï¼‰ï¼Œä½†å®ƒä»¬è¿˜ç”»åœ¨å±å¹•ä¸Šï¼ˆPaintExtent ä¾ç„¶å­˜åœ¨ï¼‰ï¼Œæ‰€ä»¥ä½ çš„å¤´é¡¶æœ‰ X ä¸ªåƒç´ è¢«å®ƒä»¬æŒ¡ä½äº†ã€‚â€</p>
<p><strong>è¿™ä¸ª X å°±æ˜¯ä½ çš„ <code>overlap</code></strong>ã€‚</p>
</blockquote>
<p>é‚£å›ç­”é‚£ä½ç½‘å‹çš„ç–‘é—®ï¼Œä¸ºä»€ä¹ˆä¼šæ˜¯â€œè´Ÿæ•°â€ï¼Ÿ æœ€å¸¸è§å°±æ˜¯ <strong><code>BouncingScrollPhysics</code> (iOS é£æ ¼çš„å›å¼¹æ•ˆæœ)</strong> çš„åœºæ™¯ï¼Œæ¯”å¦‚ä¸‹æ–¹å°±æ˜¯ä¸€ä¸ª <code>BouncingScrollPhysics</code> çš„ä½¿ç”¨åœºæ™¯ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8fe5f6482d334cc28f55fce40fa03ce6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oGL54yrZGXlsI_pg60=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767579189&amp;x-signature=ef4OuxxgWsSBh5keUbmLlA6Fyac%3D" alt="" loading="lazy"/></p>
<p>å¯¹äºé¡¶éƒ¨å›å¼¹ (Overscroll)åœºæ™¯ï¼Œå½“ä½ åœ¨åˆ—è¡¨é¡¶éƒ¨ä¸‹æ‹‰ï¼ˆOverScrollï¼‰æ—¶ï¼ŒscrollOffset ä¼šå˜æˆè´Ÿæ•°ï¼ˆä¾‹å¦‚ -50.0ï¼‰ï¼Œè™½ç„¶æ ‡å‡†çš„ overlap è®¡ç®—é€šå¸¸æ˜¯ç´¯åŠ å‰é¢çš„ Pinned å¤´éƒ¨ï¼Œä½†åœ¨å¤„ç†è¿‡åº¦æ»šåŠ¨(OverScroll)æ—¶ï¼ŒViewport ä¸ºäº†ç»´æŒæ•°å­¦ä¸Šçš„è¿ç»­æ€§ï¼Œæˆ–è€…æŸäº›è‡ªå®šä¹‰ Sliver åœ¨è®¡ç®—çº¦æŸæ—¶ï¼Œä¼šå°†è¿™ä¸ªâ€œè´Ÿçš„æ»šåŠ¨åç§»â€é€ä¼ è¿›çº¦æŸè®¡ç®—ä¸­ï¼š</p>
<blockquote>
<p>åˆ—è¡¨åœ¨æœ€é¡¶éƒ¨è¢«æ‹‰ä¸‹æ¥ï¼Œå®é™… UI ä¸Šäº§ç”Ÿäº†ä¸€ä¸ªâ€œç©ºéš™â€ï¼Œè¿™ä¸ªè´Ÿçš„ overlap å¯ä»¥ç†è§£ä¸ºï¼š<strong>â€œä¸ä»…æ²¡æœ‰é‡å ï¼Œç¦»è¢«é‡å è¿˜å·® 50 åƒç´ çš„è·ç¦»â€</strong>ã€‚</p>
</blockquote>
<p>å¦å¤–è¿˜æœ‰ä¸€ç§å¯èƒ½ï¼Œå°±æ˜¯<strong>SliverGeometry çš„ paintOrigin ä¿®æ­£</strong> ï¼Œåœ¨ä¸€äº›å¤æ‚çš„ <code>NestedScrollView</code> å®ç°é‡Œé¢ï¼Œå¦‚æœ Header å¤„äºå±•å¼€è¿‡ç¨‹ä¸­ï¼Œå¯èƒ½ä¼šé€šè¿‡è´Ÿçš„ overlap æ¥é€šçŸ¥åç»­ Sliver è¿›è¡Œä½ç½®è¡¥å¿ã€‚</p>
<p>æœ€åï¼Œæˆ‘ä»¬å‡è®¾ä¸€ä¸ªåœºæ™¯ï¼š</p>
<ul>
<li><strong>Sliver1</strong>: Pinned Header (é«˜åº¦ 60)</li>
<li><strong>Sliver2</strong>: Pinned Header (é«˜åº¦ 60)</li>
<li><strong>Sliver3</strong>: æ™®é€š List</li>
<li><strong>å½“å‰çŠ¶æ€</strong>: åˆ—è¡¨å‘ä¸Šæ»šåŠ¨äº† 200</li>
</ul>
<p>ç„¶åé¦–å…ˆå°±æ˜¯  Sliver1 ï¼š</p>
<ul>
<li>å®ƒè¢« pin åœ¨é¡¶éƒ¨</li>
<li><code>scrollOffset</code>: 200 (å®ƒæœ¬è¯¥æ»šå‡ºå» 200ï¼Œä½†å®ƒæ²¡åŠ¨)</li>
<li><code>layoutExtent</code>: 0 (å®ƒåœ¨æ»šåŠ¨æµä¸­ä¸å†å æ®ç©ºé—´ï¼Œç©ºé—´ç•™ç»™åé¢çš„äºº)</li>
<li><code>paintExtent</code>: 60 (å®ƒä¾ç„¶ç”»åœ¨å±å¹•ä¸Š)</li>
<li>å·®å€¼: 60 - 0 = 60ã€‚å®ƒäº§ç”Ÿäº†ä¸€ä¸ª 60 çš„è§†è§‰é®æŒ¡</li>
</ul>
<p>ç„¶åå°±æ˜¯ Sliver2 ï¼š</p>
<ul>
<li>å®ƒç´§è´´ç€ Sliver1 pin</li>
<li><code>constraints.overlap</code>: 60 (æ¥è‡ª Sliver1 çš„é®æŒ¡)</li>
<li><code>layoutExtent</code>: 0 (åŒæ ·ä¸å ä½)</li>
<li><code>paintExtent</code>: 60</li>
<li>å·®å€¼: è‡ªèº«äº§ç”Ÿ 60 - 0 = 60ã€‚</li>
<li>ç´¯è®¡é®æŒ¡: ä¹‹å‰çš„ 60 + ç°åœ¨çš„ 60 = 120</li>
</ul>
<p>Sliver3 ï¼š</p>
<ul>
<li>Viewport å‘Šè¯‰ Sliver3ï¼š<code>constraints.overlap = 120</code> ï¼ŒSliver3 çš„å¸ƒå±€èµ·å§‹ç‚¹è™½ç„¶æ˜¯ä» <code>scrollOffset</code> è®¡ç®—å‡ºæ¥çš„ï¼Œä½†åœ¨è§†è§‰ä¸Šï¼ŒSliver3 çš„å‰ 120 ä¼šè¢« Sliver1 å’Œ Sliver2 ç›–ä½ã€‚</li>
</ul>
<p>å…·ä½“ä»£ç å¯ä»¥å‚çœ‹å¦‚ä¸‹ä¾‹å­ï¼Œ<strong>è¿è¡Œåå¦‚å›¾æ‰€ç¤ºï¼Œæ³¨æ„çœ‹æ‚¬æµ®æ¡†çš„å†…å®¹è¾“å‡ºï¼Œå°±å¯ä»¥å¾ˆæ¸…æ™°æ„Ÿå—åˆ° <code>overlap</code> åœ¨æ­£æ•°ä¹‹é—´ç´¯ç§¯å’Œè´Ÿæ•°æ—¶çš„æ•ˆæœ</strong>ï¼š</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-keyword">import</span> <span class="hljs-string">'package:flutter/material.dart'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">'package:flutter/rendering.dart'</span>;

<span class="hljs-keyword">void</span> main() {
  runApp(<span class="hljs-keyword">const</span> MaterialApp(home: OverlapDeductionDemo()));
}

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">OverlapDeductionDemo</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatefulWidget</span> </span>{
  <span class="hljs-keyword">const</span> OverlapDeductionDemo({<span class="hljs-keyword">super</span>.key});

  <span class="hljs-meta">@override</span>
  State&lt;OverlapDeductionDemo&gt; createState() =&gt; _OverlapDeductionDemoState();
}

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">_OverlapDeductionDemoState</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">State</span>&lt;<span class="hljs-title">OverlapDeductionDemo</span>&gt; </span>{
  <span class="hljs-keyword">final</span> _handle = SliverOverlapAbsorberHandle();
  <span class="hljs-keyword">final</span> ValueNotifier&lt;<span class="hljs-built_in">String</span>&gt; _logNotifier = ValueNotifier(<span class="hljs-string">"ç­‰å¾…æ»šåŠ¨..."</span>);

  <span class="hljs-keyword">final</span> <span class="hljs-built_in">Map</span>&lt;<span class="hljs-built_in">String</span>, <span class="hljs-built_in">String</span>&gt; _logState = {};

  <span class="hljs-meta">@override</span>
  <span class="hljs-keyword">void</span> dispose() {
    _logNotifier.dispose();
    <span class="hljs-keyword">super</span>.dispose();
  }

  <span class="hljs-meta">@override</span>
  Widget build(BuildContext context) {
    <span class="hljs-keyword">return</span> Scaffold(
        <span class="hljs-comment">///<span class="markdown">éœ€è¦æ³¨æ„ï¼Œè¿™ä¸ªçš„AppBar ä¼šå½±å“ overlap æ•°å€¼ï¼Œå¦‚æœæ²¡æœ‰ï¼Œä¼šå¤šè¿™éƒ¨åˆ†åƒç´ ç‚¹è¿”å›</span></span>
      appBar: AppBar(title: <span class="hljs-keyword">const</span> Text(<span class="hljs-string">"Overlap Debug"</span>)),
      backgroundColor: Colors.grey[<span class="hljs-number">50</span>],
      body: Stack(
        children: [
          CustomScrollView(
            physics: <span class="hljs-keyword">const</span> BouncingScrollPhysics(
                parent: AlwaysScrollableScrollPhysics()),
            slivers: [
              SliverLayoutBuilder(
                builder: (context, constraints) {
                  updateLogDisplay(<span class="hljs-string">"Sliver 1"</span>, constraints.scrollOffset, constraints.overlap);

                  <span class="hljs-keyword">return</span> SliverAppBar(
                    title: <span class="hljs-keyword">const</span> Text(<span class="hljs-string">'Sliver 1 (Pinned)'</span>),
                    backgroundColor: Colors.red.withOpacity(<span class="hljs-number">0.7</span>),
                    pinned: <span class="hljs-keyword">true</span>,
                    stretch: <span class="hljs-keyword">true</span>,
                    toolbarHeight: <span class="hljs-number">60</span>,
                    collapsedHeight: <span class="hljs-number">60</span>,
                    expandedHeight: <span class="hljs-number">60</span>,
                    elevation: <span class="hljs-number">0</span>,
                    flexibleSpace: FlexibleSpaceBar(
                      background: Container(color: Colors.red.withOpacity(<span class="hljs-number">0.7</span>)),
                      stretchModes: <span class="hljs-keyword">const</span> [
                        StretchMode.zoomBackground,
                        StretchMode.blurBackground
                      ],
                    ),
                  );
                },
              ),
              SliverList(
                delegate: SliverChildBuilderDelegate(
                      (context, index) =&gt; Container(
                    height: <span class="hljs-number">50</span>,
                    color: Colors.grey[<span class="hljs-number">300</span>],
                    alignment: Alignment.center,
                    child: Text(<span class="hljs-string">'ä¸­é—´å¡«å…… Item <span class="hljs-subst">$index</span>'</span>,
                        style: <span class="hljs-keyword">const</span> TextStyle(color: Colors.grey)),
                  ),
                  childCount: <span class="hljs-number">5</span>,
                ),
              ),
              SliverOverlapAbsorber(
                handle: _handle,
                sliver: SliverLayoutBuilder(
                  builder: (context, constraints) {
                    updateLogDisplay(<span class="hljs-string">"Sliver 2"</span>, constraints.scrollOffset, constraints.overlap);
                    <span class="hljs-keyword">return</span> SliverAppBar(
                      title: <span class="hljs-keyword">const</span> Text(<span class="hljs-string">'Sliver 2 (Pinned)'</span>),
                      backgroundColor: Colors.blue.withOpacity(<span class="hljs-number">0.7</span>),
                      pinned: <span class="hljs-keyword">true</span>,
                      toolbarHeight: <span class="hljs-number">60</span>,
                      collapsedHeight: <span class="hljs-number">60</span>,
                      expandedHeight: <span class="hljs-number">60</span>,
                      primary: <span class="hljs-keyword">false</span>,
                      elevation: <span class="hljs-number">0</span>,
                    );
                  },
                ),
              ),
              SliverLayoutBuilder(
                builder: (context, constraints) {
                  <span class="hljs-keyword">final</span> currentOverlap = constraints.overlap;
                  <span class="hljs-keyword">final</span> offset = constraints.scrollOffset;
                  updateLogDisplay(<span class="hljs-string">"Sliver 3"</span>, offset, currentOverlap);

                  <span class="hljs-keyword">return</span> SliverMainAxisGroup(
                    slivers: [
                      SliverOverlapInjector(handle: _handle),
                      SliverList(
                        delegate: SliverChildBuilderDelegate(
                              (ctx, index) {
                            <span class="hljs-keyword">return</span> Container(
                              height: <span class="hljs-number">50</span>,
                              color: index == <span class="hljs-number">0</span>
                                  ? Colors.green[<span class="hljs-number">900</span>]
                                  : (index.isEven
                                  ? Colors.green[<span class="hljs-number">200</span>]
                                  : Colors.green[<span class="hljs-number">100</span>]),
                              alignment: Alignment.center,
                              child: Text(
                                index == <span class="hljs-number">0</span>
                                    ? <span class="hljs-string">'æˆ‘æ˜¯å¤´éƒ¨ (Item 0)'</span>
                                    : <span class="hljs-string">'Sliver 3 - Item <span class="hljs-subst">$index</span>'</span>,
                                style: TextStyle(
                                    color: index == <span class="hljs-number">0</span>
                                        ? Colors.white
                                        : Colors.black),
                              ),
                            );
                          },
                          childCount: <span class="hljs-number">20</span>,
                        ),
                      ),
                    ],
                  );
                },
              ),
            ],
          ),
          Positioned(
            top: <span class="hljs-number">100</span>,
            right: <span class="hljs-number">16</span>,
            child: ValueListenableBuilder&lt;<span class="hljs-built_in">String</span>&gt;(
              valueListenable: _logNotifier,
              builder: (context, value, child) {
                <span class="hljs-keyword">return</span> Container(
                  padding: <span class="hljs-keyword">const</span> EdgeInsets.all(<span class="hljs-number">12</span>),
                  decoration: BoxDecoration(
                    color: Colors.black.withOpacity(<span class="hljs-number">0.8</span>),
                    borderRadius: BorderRadius.circular(<span class="hljs-number">8</span>),
                    boxShadow: [
                      BoxShadow(
                        color: Colors.black.withOpacity(<span class="hljs-number">0.2</span>),
                        blurRadius: <span class="hljs-number">8</span>,
                        offset: <span class="hljs-keyword">const</span> Offset(<span class="hljs-number">0</span>, <span class="hljs-number">4</span>),
                      )
                    ],
                  ),
                  child: Text(
                    value,
                    style: <span class="hljs-keyword">const</span> TextStyle(
                      color: Colors.greenAccent,
                      fontFamily: <span class="hljs-string">'Courier'</span>,
                      fontSize: <span class="hljs-number">12</span>,
                      fontWeight: FontWeight.bold,
                    ),
                  ),
                );
              },
            ),
          ),
        ],
      ),
    );
  }

  <span class="hljs-keyword">void</span> updateLogDisplay(<span class="hljs-built_in">String</span> name, <span class="hljs-built_in">double</span> offset, <span class="hljs-built_in">double</span> overlap) {
    <span class="hljs-built_in">String</span> status = <span class="hljs-string">""</span>;
    <span class="hljs-keyword">if</span> (overlap &gt; <span class="hljs-number">0</span>) {
      status = <span class="hljs-string">"-&gt; è¢«é®æŒ¡: <span class="hljs-subst">${overlap.toStringAsFixed(<span class="hljs-number">1</span>)}</span>"</span>;
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (overlap &lt; <span class="hljs-number">0</span>) {
      status = <span class="hljs-string">"-&gt; é¡¶éƒ¨å›å¼¹/æœªæ¥è§¦"</span>;
    } <span class="hljs-keyword">else</span> {
      status = <span class="hljs-string">"-&gt; æ— é®æŒ¡"</span>;
    }

    <span class="hljs-keyword">final</span> singleLog = <span class="hljs-string">'[<span class="hljs-subst">$name</span>]\n'</span>
        <span class="hljs-string">'Offset : <span class="hljs-subst">${offset.toStringAsFixed(<span class="hljs-number">1</span>)}</span>\n'</span>
        <span class="hljs-string">'Overlap: <span class="hljs-subst">${overlap.toStringAsFixed(<span class="hljs-number">1</span>)}</span>\n'</span>
        <span class="hljs-string">'<span class="hljs-subst">$status</span>'</span>;

    _logState[name] = singleLog;

    <span class="hljs-keyword">final</span> sortedKeys = _logState.keys.toList()..sort();
    <span class="hljs-keyword">final</span> combinedLog = sortedKeys.map((k) =&gt; _logState[k]).join(<span class="hljs-string">'\n------------------\n'</span>);


    <span class="hljs-keyword">if</span> (_logNotifier.value != combinedLog) {
      WidgetsBinding.instance.addPostFrameCallback((_) {
        <span class="hljs-keyword">if</span> (mounted) {
          _logNotifier.value = combinedLog;
        }
      });
    }

    <span class="hljs-built_in">print</span>(<span class="hljs-string">'<span class="hljs-subst">$name</span> -&gt; Offset:<span class="hljs-subst">$offset</span>, Overlap:<span class="hljs-subst">$overlap</span>'</span>);
  }
}
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3910ecd0079349f79d281dd4d6bbbd3b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oGL54yrZGXlsI_pg60=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767579189&amp;x-signature=zL3to30i%2FAthcZ0gWkslKiFpNt0%3D" alt="" loading="lazy"/></p>
<p>é‚£ä¹ˆè¿™æ—¶å€™çš„ Sliver3 è¯¥å¦‚ä½•ä½¿ç”¨ <code>overlap</code> ï¼Ÿç®€å•æ¥è¯´å¯ä»¥æœ‰ï¼š</p>
<p>1ã€æ— è§†ï¼ŒSliver3 ä¾ç„¶ç…§å¸¸ä» 0 å¼€å§‹ç”»ï¼Œç»“æœ æ˜¯ Sliver3 çš„å‰ 120px å†…å®¹è¢« Sliver1 å’Œ Sliver2 ç›–ä½ï¼Œç”¨æˆ·çœ‹ä¸è§ï¼Œè¿™å°±æ˜¯æˆ‘ä»¬å¸¸è¯´çš„â€œå†…å®¹ç©¿è¿‡ Header æ»šä¸Šå»â€</p>
<p>2ã€å¹³ç§»ç»˜åˆ¶ï¼Œåœ¨è¿”å› <code>SliverGeometry</code> æ—¶ï¼Œè®¾ç½® <code>paintOrigin = constraints.overlap</code>ï¼Œç»“æœå°±æ˜¯ Sliver3 çš„å†…å®¹æ•´ä½“å‘ä¸‹å¹³ç§» 120pxï¼Œåˆšå¥½å¤„åœ¨ Header ä¸‹æ–¹ï¼Œè¿™ä¹Ÿæ˜¯ <code>SliverOverlapInjector</code> çš„å·¥ä½œåŸç†ï¼Œå®ƒä½œä¸ºä¸€ä¸ªé€æ˜çš„å ä½ç¬¦ï¼ŒæŠŠè¿™ 120px çš„ overlap â€œåƒæ‰â€ï¼ˆæ³¨å…¥æˆ layoutExtentï¼‰ï¼Œè®©åé¢çš„èƒ½æ­£å¸¸æ˜¾ç¤º</p>
<p>3ã€éƒ¨åˆ†ç»˜åˆ¶ï¼Œå¯ä»¥è®© Sliver3 åªç»˜åˆ¶éœ²å‡ºæ¥çš„éƒ¨åˆ†ï¼Œåœ¨è®¡ç®— <code>paintExtent</code> æ—¶ï¼Œè€ƒè™‘ <code>overlap</code> ï¼Œä¾‹å¦‚ <code>paintExtent = max(0.0, calculatedSize - constraints.overlap)</code></p>
<p>æ‰€ä»¥ç°åœ¨å¯ä»¥ç†è§£äº†å§ï¼š</p>
<ul>
<li><strong>æ­£æ•° Overlap</strong>ï¼šä»£è¡¨**â€œè¢«ä¸Šæ–¹ Pinned å…ƒç´ é®æŒ¡çš„åƒç´ é‡â€**ï¼Œè®¡ç®—å…¬å¼æ˜¯ç´¯åŠ å‰é¢æ‰€æœ‰ Pinned Sliver çš„ <code>(paintExtent - layoutExtent)</code></li>
<li><strong>è´Ÿæ•° Overlap</strong>ï¼šé€šå¸¸å‡ºç°åœ¨ <strong>OverScrollï¼ˆå›å¼¹ï¼‰</strong> é˜¶æ®µï¼Œä»£è¡¨**â€œè·ç¦»ç”±äºå›å¼¹äº§ç”Ÿçš„é¡¶éƒ¨ç©ºéš™çš„è·ç¦»â€**ï¼Œæˆ–è€…ç†è§£ä¸ºâ€œè´Ÿçš„é®æŒ¡â€</li>
</ul>
<blockquote>
<p>å®é™…ä¸Šï¼Œå¦‚æœåœ¨è‡ªå®šä¹‰ Sliver çš„  <code>performLayout</code> ä¸­æ‰“å° <code>print('Overlap: ${constraints.overlap}, ScrollOffset: ${constraints.scrollOffset}');</code> ï¼Œå°±ä¼šçœ‹åˆ°è´Ÿæ•° <code>overlap</code> å’Œè´Ÿæ•° <code>scrollOffset</code> (å›å¼¹) å¾€å¾€æˆå¯¹å‡ºç°ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å†å²æ€§çªç ´ï¼LCP å’Œ INP ç»ˆäºè¦†ç›–æ‰€æœ‰ä¸»æµæµè§ˆå™¨ï¼ŒiOS æ€§èƒ½ç›²ç‚¹å½»åº•æ¶ˆå¤±]]></title>    <link>https://juejin.cn/post/7588445332771881014</link>    <guid>https://juejin.cn/post/7588445332771881014</guid>    <pubDate>2025-12-29T01:01:42.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588445332771881014" data-draft-id="7587606718843732009" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å†å²æ€§çªç ´ï¼LCP å’Œ INP ç»ˆäºè¦†ç›–æ‰€æœ‰ä¸»æµæµè§ˆå™¨ï¼ŒiOS æ€§èƒ½ç›²ç‚¹å½»åº•æ¶ˆå¤±"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,é¢è¯•"/> <meta itemprop="datePublished" content="2025-12-29T01:01:42.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Moment"/> <meta itemprop="url" content="https://juejin.cn/user/3782764966460398"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å†å²æ€§çªç ´ï¼LCP å’Œ INP ç»ˆäºè¦†ç›–æ‰€æœ‰ä¸»æµæµè§ˆå™¨ï¼ŒiOS æ€§èƒ½ç›²ç‚¹å½»åº•æ¶ˆå¤±
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3782764966460398/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Moment
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-29T01:01:42.000Z" title="Mon Dec 29 2025 01:01:42 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-29
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:14px;overflow-x:hidden;color:var(--cyanosis-base-color);transition:color .35s;--cyanosis-base-color:#353535;--cyanosis-title-color:#005bb7;--cyanosis-strong-color:#2196f3;--cyanosis-em-color:#4fc3f7;--cyanosis-del-color:#ccc;--cyanosis-link-color:#3da8f5;--cyanosis-linkh-color:#007fff;--cyanosis-border-color:#bedcff;--cyanosis-border-color-2:#ececec;--cyanosis-bg-color:#fff;--cyanosis-blockquote-color:#8c8c8c;--cyanosis-blockquote-bg-color:#f0fdff;--cyanosis-code-color:#c2185b;--cyanosis-code-bg-color:#fff4f4;--cyanosis-code-pre-color:#f8f8f8;--cyanosis-table-border-color:#c3e0fd;--cyanosis-table-th-color:#dff0ff;--cyanosis-table-tht-color:#005bb7;--cyanosis-table-tr-nc-color:#f7fbff;--cyanosis-table-trh-color:#e0edf7;--cyanosis-slct-title-color:#005bb7;--cyanosis-slct-titlebg-color:rgba(175,207,247,0.25);--cyanosis-slct-text-color:#c80000;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#e8ebec;--cyanosis-slct-codebg-color:#ffeaeb;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body.__dark{--cyanosis-base-color:#cacaca;--cyanosis-title-color:#ddd;--cyanosis-strong-color:#fe9900;--cyanosis-em-color:#ffd28e;--cyanosis-del-color:#ccc;--cyanosis-link-color:#ffb648;--cyanosis-linkh-color:#fe9900;--cyanosis-border-color:#ffe3ba;--cyanosis-border-color-2:#ffcb7b;--cyanosis-bg-color:#2f2f2f;--cyanosis-blockquote-color:#c7c7c7;--cyanosis-blockquote-bg-color:rgba(255,199,116,0.1);--cyanosis-code-color:#000;--cyanosis-code-bg-color:#ffcb7b;--cyanosis-code-pre-color:rgba(255,227,185,0.5);--cyanosis-table-border-color:#fe9900;--cyanosis-table-th-color:#ffb648;--cyanosis-table-tht-color:#000;--cyanosis-table-tr-nc-color:#6d5736;--cyanosis-table-trh-color:#947443;--cyanosis-slct-title-color:#000;--cyanosis-slct-titlebg-color:#fe9900;--cyanosis-slct-text-color:#00c888;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#000;--cyanosis-slct-codebg-color:#ffcb7b;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body h1{padding-bottom:4px;font-size:30px}.markdown-body h1,.markdown-body h2{margin-top:36px;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);transition:color .35s}.markdown-body h2{position:relative;padding-left:10px;padding-right:10px;padding-bottom:10px;font-size:24px;border-bottom:1px solid var(--cyanosis-border-color-2)}.markdown-body h2:before{content:"ã€Œ";position:absolute;top:-6px;left:-14px}.markdown-body h2:after{content:"ã€";position:relative;top:6px;right:auto}.markdown-body h3{position:relative;padding-bottom:0;margin-top:30px;margin-bottom:10px;font-size:20px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h3:before{content:"Â»";padding-right:6px;color:var(--cyanosis-strong-color)}.markdown-body h4{margin-top:24px;font-size:16px}.markdown-body h4,.markdown-body h5{padding-bottom:0;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h5{margin-top:18px;font-size:14px}.markdown-body h6{padding-bottom:0;margin-top:12px;margin-bottom:10px;font-size:12px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body p{line-height:inherit;margin-top:16px;margin-bottom:16px}.markdown-body img{max-width:100%}.markdown-body hr{position:relative;width:98%;height:1px;margin-top:32px;margin-bottom:32px;background-image:linear-gradient(90deg,var(--cyanosis-link-color),rgba(255,0,0,.3),hsla(0,0%,100%,.1),rgba(255,0,0,.3),var(--cyanosis-link-color));border-width:0;overflow:visible}.markdown-body hr:after{content:"";position:absolute;margin:auto;left:0;right:0;bottom:0;top:0;display:inline-block;width:60px;height:20px;background-color:var(--cyanosis-bg-color);background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAgCAYAAABgrToAAAADoklEQVRYR82XTYgcRRTHf2933Q1RjAa9eFO8JHoJ8RQVBQ2iBwXBET0YEUTXNVmNQtTpmeqaWV0XNRq/o4KoECSCEPSg4CF+BYUkIIiCoCJCPIhC/Ihh2Z0nVV27VnZnenumW9i6ddV7//frV69fVQurfMgq56NawFTPAU6QyomqXrw6wIZeyhCPebA5buNR+akKyGoAjd6BshthnYdSjqNcRVuOlIUsD2j0SuA94IwuMHdh5ZUykOUBXfSGbmKI54EtAeYIHSZoy5dl4JxvNYBOKdW1KE8BQ8AkVk6WhasWsAiN0TX9gveXQaPP+Aytpc4u+bMI06JNohsYYYYOR2lJWtS3OKDRfcAtQfgDoI6Vo4UCGb0OmAEuDvZvYmVbEd/igC3dzDz7gQu8sPA9kJDK27mBmjqBeLjTg90PDFOjWawFFQd06kZHEfaj3LAIpTRpSXsZ5E06zEYP9sDimnAApYaV2SLZG/wjMeqAkijwW4xQJ5Gf/ZzRC8OW3hiBTGGlURRswW55Bh/Ssxljrwew8l1PQaM14GngvGDzBUKdDsMeTtgU5o8B92PFlUf3YXUrHa7Fys6lBqcCGnX15YQ2A18FyPd7Crd1A3M8C1wdbH4DD3hWeP6IEXbQkG97ajR1HPFnuPP5jFFq1OWX7hl8WM9l1AO648uNfwLk7tytMeogty+xeQ4rO3r6bdcx1nuwOGsHmaXGtPzae4uzGnLH1kQkvpdZGrHjssBZJrL+pqS05KWc8tgITAPXRzYvYOXe/C2OV43eDcRBDtIhoS2f9wzc0Cv8Wls+zoFzUC5zF0U241h5uZtPfptp6OUM8wbK+cH5GEpCS17P3fJei0Z3+npTxryJ8CPzbKMtn/ZyWbkPGl0PuFPkmkjkcb4h4R2ZLwRq1H0ALmvjkf2HwK1Y+T1PY2XABe/sHJ6MxN5lnoSpnC/UGbsTaI5phK2R7x6s3Ffk5YoDOrWm3onwJHBmEP86bPmBrsGaenNoIdnxCH+gPEhLXi0Cl1VBvyPVLSh7gEuC62yAfOIUqabWEaaiucMIk6RyqJ+Q/QM69V26jjW86Gvov/EaoyT8zRCn+Xq7PVrbx0nuYUaO9wM3WAbjCE1NEUw09Um4UV+2OKfYfu5/S19gsAzGKqm6LE5FrShbdS0ku465DjDwKA/oQht19ejqbaEVuRbiLhuHByYLjtUAZpDutzP7cYdHsPJXWbjyNVgFwQoa1WXwf4Jd9YD/Ap80+yE7+u9aAAAAAElFTkSuQmCC);background-repeat:no-repeat;background-size:auto 100%;background-position-x:center;transition:background-color .5s}.markdown-body code{padding:.065em .4em;font-size:.87em;color:var(--cyanosis-code-color);word-break:break-word;overflow-x:auto;background-color:var(--cyanosis-code-bg-color);border-radius:2px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{display:block;padding:16px 12px;margin:0;font-size:12px;color:#333;word-break:normal;overflow-x:auto;background:var(--cyanosis-code-pre-color)}.markdown-body pre&gt;code::-webkit-scrollbar{width:4px;height:4px}.markdown-body pre&gt;code::-webkit-scrollbar-track{background-color:var(--cyanosis-border-color)}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:var(--cyanosis-strong-color);border-radius:10px}.markdown-body a{position:relative;text-decoration:none;color:var(--cyanosis-link-color);border-bottom:1px solid var(--cyanosis-border-color)}.markdown-body a:hover{border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body a:active,.markdown-body a:hover{color:var(--cyanosis-linkh-color)}.markdown-body a:after{position:absolute;content:"";top:100%;left:0;width:100%;opacity:0;border-bottom:1px solid var(--cyanosis-border-color);transition:top .3s,opacity .3s;transform:translateZ(0)}.markdown-body a:hover:after{top:0;opacity:1;border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid var(--cyanosis-table-border-color);border-spacing:0;border-collapse:collapse}.markdown-body table thead{color:#000;text-align:left;font-size:14px;background:#f6f6f6}.markdown-body table tr:nth-child(2n){background-color:var(--cyanosis-table-tr-nc-color)}.markdown-body table tr:hover{background-color:var(--cyanosis-table-trh-color)}.markdown-body table td,.markdown-body table th{padding:12px 8px;line-height:24px;border:1px solid var(--cyanosis-table-border-color)}.markdown-body table th{color:var(--cyanosis-table-tht-color);background-color:var(--cyanosis-table-th-color)}.markdown-body table td{min-width:120px}.markdown-body blockquote{color:var(--cyanosis-blockquote-color);border-left:4px solid var(--cyanosis-strong-color);background-color:var(--cyanosis-blockquote-bg-color);padding:1px 20px;margin:22px 0;transition:color .35s}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body b,.markdown-body blockquote&gt;b,.markdown-body blockquote&gt;strong,.markdown-body strong{color:var(--cyanosis-strong-color)}.markdown-body em,.markdown-body i{color:var(--cyanosis-em-color)}.markdown-body del{color:var(--cyanosis-del-color)}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:4px}.markdown-body ol li{padding-left:6px}.markdown-body details&gt;summary{outline:none;color:var(--cyanosis-title-color);font-size:20px;font-weight:bolder;border-bottom:1px solid var(--cyanosis-border-color);cursor:pointer}.markdown-body details&gt;p{padding:10px 20px;margin:10px 0 0;color:#666;background-color:var(--cyanosis-blockquote-bg-color);border:2px dashed var(--cyanosis-strong-color)}.markdown-body h1::selection,.markdown-body h2::selection,.markdown-body h3::selection,.markdown-body h4::selection,.markdown-body h5::selection,.markdown-body h6::selection{color:var(--cyanosis-slct-title-color);background-color:var(--cyanosis-slct-titlebg-color)}.markdown-body ol li::selection,.markdown-body p::selection,.markdown-body ul li::selection{color:var(--cyanosis-slct-text-color);background-color:var(--cyanosis-slct-bg-color)}.markdown-body a::selection,.markdown-body b::selection,.markdown-body em::selection,.markdown-body i::selection,.markdown-body strong::selection{background-color:var(--cyanosis-slct-elbg-color)}.markdown-body del::selection{color:var(--cyanosis-slct-del-color);background-color:var(--cyanosis-slct-elbg-color)}.markdown-body table thead th::selection{background-color:transparent}.markdown-body table tbody td::selection{background-color:var(--cyanosis-slct-bg-color)}.markdown-body code::selection{background-color:var(--cyanosis-slct-codebg-color)}.markdown-body pre&gt;code::selection{background-color:var(--cyanosis-slct-prebg-color)}.markdown-body .contains-task-list{padding-left:14px;list-style:none}.markdown-body .contains-task-list input[type=checkbox]{position:relative}.markdown-body .contains-task-list input[type=checkbox]:before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;width:inherit;height:inherit;background:#f0f8ff;border:1px solid #add6ff;border-radius:2px;box-sizing:border-box;z-index:1}.markdown-body .contains-task-list input[type=checkbox]:checked:after{content:"âœ“";position:absolute;top:-12px;left:0;right:0;bottom:0;width:0;height:0;color:#f55;font-size:20px;font-weight:700;z-index:2}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="atom-one-dark">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#abb2bf;background:#282c34}.hljs-comment,.hljs-quote{color:#5c6370;font-style:italic}.hljs-doctag,.hljs-formula,.hljs-keyword{color:#c678dd}.hljs-deletion,.hljs-name,.hljs-section,.hljs-selector-tag,.hljs-subst{color:#e06c75}.hljs-literal{color:#56b6c2}.hljs-addition,.hljs-attribute,.hljs-meta-string,.hljs-regexp,.hljs-string{color:#98c379}.hljs-built_in,.hljs-class .hljs-title{color:#e6c07b}.hljs-attr,.hljs-number,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-pseudo,.hljs-template-variable,.hljs-type,.hljs-variable{color:#d19a66}.hljs-bullet,.hljs-link,.hljs-meta,.hljs-selector-id,.hljs-symbol,.hljs-title{color:#61aeee}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.hljs-link{text-decoration:underline}</style><blockquote>
<p>æˆ‘æ­£åœ¨å¼€å‘ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fxun082%2FDocFlow" target="_blank" title="https://github.com/xun082/DocFlow" ref="nofollow noopener noreferrer">DocFlow</a>ï¼Œå®ƒæ˜¯ä¸€ä¸ªå®Œæ•´çš„ AI å…¨æ ˆååŒæ–‡æ¡£å¹³å°ã€‚è¯¥é¡¹ç›®èåˆäº†å¤šä¸ªæŠ€æœ¯æ ˆï¼ŒåŒ…æ‹¬åŸºäº <code>Tiptap</code> çš„å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ã€<code>NestJs</code> åç«¯æœåŠ¡ã€<code>AI</code> é›†æˆåŠŸèƒ½å’Œå®æ—¶åä½œã€‚åœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œæˆ‘ç§¯ç´¯äº†ä¸°å¯Œçš„å®æˆ˜ç»éªŒï¼Œæ¶µç›–äº† <code>Tiptap</code> çš„æ·±åº¦å®šåˆ¶ã€æ€§èƒ½ä¼˜åŒ–å’Œåä½œåŠŸèƒ½çš„å®ç°ç­‰æ ¸å¿ƒéš¾ç‚¹ã€‚</p>
</blockquote>
<p>å¦‚æœä½ å¯¹ AI å…¨æ ˆå¼€å‘ã€Tiptap å¯Œæ–‡æœ¬ç¼–è¾‘å™¨å®šåˆ¶æˆ– DocFlow é¡¹ç›®çš„å®Œæ•´æŠ€æœ¯æ–¹æ¡ˆæ„Ÿå…´è¶£ï¼Œæ¬¢è¿åŠ æˆ‘å¾®ä¿¡ <code>yunmz777</code> è¿›è¡Œç§èŠå’¨è¯¢ï¼Œè·å–è¯¦ç»†çš„æŠ€æœ¯åˆ†äº«å’Œæœ€ä½³å®è·µã€‚</p>
<p>éšç€ Safari 26.2 åœ¨ 12 æœˆ 12 æ—¥çš„å‘å¸ƒï¼ŒWeb æ€§èƒ½é¢†åŸŸè¿æ¥äº†ä¸€ä¸ªä»¤äººæŒ¯å¥‹çš„å¹´ç»ˆç¤¼ç‰©ï¼šæœ€å¤§å†…å®¹ç»˜åˆ¶ï¼ˆLCPï¼‰å’Œäº¤äº’åˆ°ä¸‹æ¬¡ç»˜åˆ¶ï¼ˆINPï¼‰ç°å·²æ­£å¼æˆä¸º Baseline æ–°å¯ç”¨åŠŸèƒ½ã€‚æ‰€æœ‰ä¸»æµæµè§ˆå™¨çš„æœ€æ–°ç‰ˆæœ¬ç°åœ¨éƒ½åŒ…å«äº†æµ‹é‡è¿™äº›æŒ‡æ ‡æ‰€éœ€çš„æœ€å¤§å†…å®¹ç»˜åˆ¶ API å’Œäº‹ä»¶è®¡æ—¶ APIã€‚è¿™æ˜¯ Interop 2025 é¡¹ç›®çš„ä¸€éƒ¨åˆ†ï¼Œå¾ˆé«˜å…´çœ‹åˆ°è¿™äº›åŠŸèƒ½åœ¨ä»Šå¹´æˆåŠŸäº¤ä»˜ï¼</p>
<h2 data-id="heading-0">è¿™æ„å‘³ç€ä»€ä¹ˆ</h2>
<p>æ ¸å¿ƒ Web æŒ‡æ ‡ï¼ˆCore Web Vitalsï¼‰å·²æˆä¸ºè¡¡é‡ç½‘é¡µä½“éªŒçš„å¹¿æ³›é‡‡ç”¨æ ‡å‡†ï¼Œæ— è®ºæ˜¯å¯¹äº Web å¼€å‘è€…è¿˜æ˜¯ä¸šåŠ¡åˆ©ç›Šç›¸å…³è€…è€Œè¨€éƒ½æ˜¯å¦‚æ­¤ã€‚å®ƒä»¬è¯•å›¾å°†å¤æ‚çš„ Web æ€§èƒ½æ•…äº‹æ€»ç»“ä¸ºå‡ ä¸ªå…³é”®æŒ‡æ ‡ï¼šé¡µé¢åŠ è½½é€Ÿåº¦ï¼ˆLCPï¼‰ã€äº¤äº’å“åº”é€Ÿåº¦ï¼ˆINPï¼‰ä»¥åŠå†…å®¹ç¨³å®šæ€§ï¼ˆCLSï¼‰ã€‚</p>
<p>é•¿æœŸä»¥æ¥ï¼Œè¿™äº›æŒ‡æ ‡åªèƒ½åœ¨åŸºäº Chromium çš„æµè§ˆå™¨ï¼ˆå¦‚ Chrome å’Œ Edgeï¼‰ä¸­æµ‹é‡ã€‚åœ¨ iOS è®¾å¤‡ä¸Šï¼Œç”±äºæ‰€æœ‰æµè§ˆå™¨éƒ½ä½¿ç”¨é©±åŠ¨ Safari çš„ WebKit æµè§ˆå™¨å¼•æ“ï¼Œè¿™äº›æŒ‡æ ‡å®Œå…¨ä¸å¯ç”¨ã€‚è¿™é€ æˆäº†ä¸€ä¸ªç›²ç‚¹ï¼šç½‘ç«™å¯èƒ½ä¸çŸ¥é“å¤§é‡è®¿é—®è€…æ­£åœ¨ç»å†å®Œå…¨ä¸åŒçš„ä½“éªŒã€‚è™½ç„¶è®¸å¤š Web æ€§èƒ½æ”¹è¿›ç¡®å®ä½¿æ‰€æœ‰æµè§ˆå™¨å—ç›Šï¼Œä½†æŸäº›æŠ€æœ¯å’Œ API ä»…åœ¨éƒ¨åˆ†æµè§ˆå™¨ä¸­å¯ç”¨ã€‚æ­¤å¤–ï¼Œæµè§ˆå™¨å†…éƒ¨çš„å·¥ä½œæ–¹å¼ã€é¡µé¢åŠ è½½æ–¹å¼ä»¥åŠå¤„ç†äº¤äº’çš„æ–¹å¼å¯èƒ½å½¼æ­¤ä¸åŒã€‚ä»…æ‹¥æœ‰ç½‘ç«™æ€§èƒ½çš„éƒ¨åˆ†è§†å›¾è¿œéç†æƒ³çŠ¶æ€ã€‚</p>
<p>éšç€æ‰€æœ‰ä¸»æµæµè§ˆå™¨ç°åœ¨éƒ½æ”¯æŒè¿™ä¸¤ä¸ªæŒ‡æ ‡ï¼Œæˆ‘ä»¬ç°åœ¨å¯ä»¥æ›´å¥½åœ°äº†è§£ç½‘ç«™çš„å…³é”®åŠ è½½å’Œäº¤äº’æ€§èƒ½ã€‚è¿™å°†ä½¿ç½‘ç«™æ‰€æœ‰è€…èƒ½å¤Ÿæ›´å¥½åœ°ç†è§£æ€§èƒ½é—®é¢˜å¹¶è¯†åˆ«å¯ä»¥è¿›è¡Œçš„æ”¹è¿›ï¼Œæœ€ç»ˆä½¿ç”¨æˆ·å’Œä¸šåŠ¡æŒ‡æ ‡å—ç›Šã€‚</p>
<h2 data-id="heading-1">å…¶ä»–æµè§ˆå™¨çš„æ•°æ®ä¼šè¿›å…¥ CrUX å—ï¼Ÿ</h2>
<p>ä¸ä¼šã€‚Chrome ç”¨æˆ·ä½“éªŒæŠ¥å‘Šï¼ˆCrUXï¼‰ä»…åŸºäºç¬¦åˆæ¡ä»¶çš„ Chrome ç”¨æˆ·ï¼Œè¿™ä¸€ç‚¹ä¸ä¼šæ”¹å˜ã€‚è¿™ä¹Ÿé€‚ç”¨äºä½¿ç”¨æ­¤æ•°æ®çš„ä¸‹æ¸¸ç³»ç»Ÿï¼Œå¦‚ PageSpeed Insightsã€Google Search Console å’Œ CrUX Visã€‚</p>
<p>è¿™ä¹Ÿå°†ç»§ç»­æ’é™¤ Chrome iOS ç”¨æˆ·ï¼Œå› ä¸ºä»–ä»¬ä½¿ç”¨ WebKit æµè§ˆå™¨å¼•æ“ã€‚</p>
<h2 data-id="heading-2">å¦‚ä½•ä»å…¶ä»–æµè§ˆå™¨æµ‹é‡</h2>
<p>CrUX æ•°æ®ä»ç„¶ä½œä¸ºç½‘ç«™æ€§èƒ½çš„æ‘˜è¦å¾ˆæœ‰ç”¨ï¼Œå¹¶ä¸”å¯ä»¥ä¸ç½‘ç»œä¸Šçš„å…¶ä»–ç½‘ç«™è¿›è¡ŒåŸºå‡†æµ‹è¯•ã€‚ç„¶è€Œï¼Œç”±äºå®ƒæ˜¯ä¸€ä¸ªé«˜çº§æ‘˜è¦ï¼Œæˆ‘ä»¬é•¿æœŸä»¥æ¥ä¸€ç›´å»ºè®®æµ‹é‡æ›´è¯¦ç»†çš„çœŸå®ç”¨æˆ·æ•°æ®ï¼ˆfield dataï¼‰ä»¥å¸®åŠ©è¯†åˆ«å’Œæ”¹è¿›æ€§èƒ½ã€‚</p>
<p>çœŸå®ç”¨æˆ·ç›‘æ§ï¼ˆRUMï¼‰å·¥å…·ç°åœ¨èƒ½å¤Ÿæ”¶é›†é¢å¤–çš„çœŸå®ç”¨æˆ·æ•°æ®ï¼ŒåŒ…æ‹¬é€šè¿‡ Chrome å›¢é˜Ÿçš„ web-vitals åº“æµ‹é‡çš„æ•°æ®ã€‚åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œè¿™åº”è¯¥è‡ªåŠ¨å¼€å§‹åŒ…å«åœ¨æ‚¨ç°æœ‰çš„è§£å†³æ–¹æ¡ˆä¸­ï¼Œä½†å¦‚æœæ‚¨æœ‰ä»»ä½•é—®é¢˜ï¼Œè¯·ä¸æ‚¨çš„ RUM æä¾›å•†ç¡®è®¤ã€‚</p>
<p>è¯·æ³¨æ„ï¼ŒRUM å’Œ CrUX ä¹‹é—´å¯èƒ½å­˜åœ¨å·®å¼‚ï¼Œç°åœ¨è¿™äº›æŒ‡æ ‡åœ¨æ›´å¤šä¸åŒ…æ‹¬åœ¨ CrUX ä¸­çš„æµè§ˆå™¨ä¸­å¯ç”¨ï¼Œè¿™ç§å·®å¼‚å¯èƒ½æ›´åŠ æ˜æ˜¾ã€‚</p>
<h2 data-id="heading-3">å®ç°æ–¹å¼æœ‰ä»€ä¹ˆä¸åŒå—ï¼Ÿ</h2>
<p>è™½ç„¶æ‰€æœ‰æµè§ˆå™¨å¼•æ“åœ¨åŠ è½½å’Œæ˜¾ç¤ºç½‘é¡µæ–¹é¢å¤§è‡´æ‰§è¡Œç›¸åŒçš„ä»»åŠ¡ï¼Œä½†è¿™äº›æµè§ˆå™¨çš„æ„å»ºæ–¹å¼å­˜åœ¨è®¸å¤šå·®å¼‚ï¼Œç‰¹åˆ«æ˜¯åœ¨å®ƒä»¬çš„æ¸²æŸ“ç®¡é“ä¸­ï¼Œè¿™äº›ç®¡é“å°†ç½‘ç«™çš„ä»£ç ï¼ˆä¸»è¦æ˜¯ HTMLã€CSS å’Œ JavaScriptï¼‰è½¬æ¢ä¸ºå±å¹•ä¸Šçš„åƒç´ ã€‚</p>
<p>æ¸²æŸ“å¾ªç¯çš„ç»“æŸå¤§è‡´æ˜¯å¯äº’æ“ä½œçš„ï¼Œè¢«å®šä¹‰ä¸º <code>paintTime</code>ã€‚ç„¶è€Œï¼Œåœ¨è¿™ä¹‹åï¼Œæœ‰ä¸€ä¸ªç¨åçš„ <code>presentationTime</code>ï¼Œè¿™æ˜¯ç‰¹å®šäºå®ç°çš„ï¼Œæ—¨åœ¨æŒ‡ç¤ºåƒç´ å®é™…ç»˜åˆ¶åˆ°å±å¹•ä¸Šçš„æ—¶é—´ã€‚Chrome æµ‹é‡ LCP ç›´åˆ° <code>presentationTime</code> ç»“æŸï¼Œè€Œ Firefox å’Œ Safari ä¸åŒ…æ‹¬ <code>presentationTime</code>ï¼Œå› æ­¤æµ‹é‡åˆ°æ›´æ—©çš„ <code>paintTime</code>ã€‚è¿™å¯¼è‡´æµ‹é‡ç»“æœä¹‹é—´å­˜åœ¨å‡ æ¯«ç§’çš„å·®å¼‚ã€‚ä» Chrome 145 å¼€å§‹ï¼Œ<code>paintTime</code> æµ‹é‡ä¹Ÿå°†ä¸º LCP å…¬å¼€ï¼Œä»¥ä¾¿é‚£äº›å¸Œæœ›èƒ½å¤Ÿåœ¨æµè§ˆå™¨ä¹‹é—´è¿›è¡ŒåŒç±»æ¯”è¾ƒçš„äººä½¿ç”¨ã€‚</p>
<p>åŒæ ·çš„å·®å¼‚ä¹Ÿé€‚ç”¨äº INPã€‚</p>
<p>å…¶ä»–æµè§ˆå™¨å®ç°è¿™äº›æŒ‡æ ‡çš„äº‹å®ï¼Œæœ‰åŠ©äºè¯†åˆ«ä¸€äº›éœ€è¦æ¾„æ¸…å’Œæ›´å¥½å®šä¹‰çš„æœªè§£å†³é—®é¢˜ã€‚è¿™å†æ¬¡å¯èƒ½å¯¼è‡´è½»å¾®å·®å¼‚â€”â€”å°½ç®¡è¿™äº›ä¸»è¦å‡ºç°åœ¨è¾¹ç¼˜æƒ…å†µä¸­ã€‚è¿™å°±æ˜¯æ‹¥æœ‰å¤šä¸ªå®ç°å’Œå…³æ³¨ API çš„å¥½å¤„ï¼æˆ‘ä»¬å°†ç»§ç»­è‡´åŠ›äºè¿™äº›ä»¥åŠæŒ‡æ ‡çš„ä»»ä½•å…¶ä»–æ”¹è¿›ã€‚</p>
<p>ç„¶è€Œï¼Œå°½ç®¡å­˜åœ¨è¿™äº›å°çš„å·®å¼‚ï¼Œæˆ‘ä»¬ç¡®ä¿¡ LCP å’Œ INP å¤§è‡´æ˜¯å¯äº’æ“ä½œçš„ï¼Œå› æ­¤æˆ‘ä»¬å¾ˆé«˜å…´å®ƒä»¬è¢«æ ‡è®°ä¸º Baseline æ–°å¯ç”¨åŠŸèƒ½ã€‚é‚£äº›å®ç° RUM è§£å†³æ–¹æ¡ˆæˆ–æ·±å…¥ç ”ç©¶æ•°æ®çš„äººå¯èƒ½ä¼šæ³¨æ„åˆ°å…¶ä¸­ä¸€äº›å·®å¼‚ï¼Œä½† Web å¼€å‘è€…åº”è¯¥å¯¹è·¨æµè§ˆå™¨æµ‹é‡è¿™äº›æŒ‡æ ‡å……æ»¡ä¿¡å¿ƒï¼Œå°½ç®¡å­˜åœ¨è¿™äº›å¾®å°å·®å¼‚ã€‚</p>
<h2 data-id="heading-4">ä¸æ”¯æŒè¿™äº› API çš„æµè§ˆå™¨æ€ä¹ˆåŠï¼Ÿ</h2>
<p>Baseline æ–°å¯ç”¨åŠŸèƒ½ä»…åœ¨æ‰€æœ‰ä¸»æµæµè§ˆå™¨çš„æœ€æ–°ç‰ˆæœ¬ä¸­å¯ç”¨ã€‚æ‚¨çš„ç”¨æˆ·ç¾¤å¯èƒ½ä¸ä¼šç«‹å³å‡çº§ï¼Œæˆ–è€…å¯èƒ½æ— æ³•å‡çº§ï¼Œè¿™å–å†³äºä»–ä»¬çš„æ“ä½œç³»ç»Ÿå’Œæä¾›å•†ã€‚30 ä¸ªæœˆåï¼Œå®ƒä»¬å°†è¢«è§†ä¸º Baseline å¹¿æ³›å¯ç”¨ï¼Œå› ä¸ºå¤§å¤šæ•°ç”¨æˆ·å¯èƒ½ä¼šä½¿ç”¨æ”¯æŒè¿™äº›åŠŸèƒ½çš„æµè§ˆå™¨ã€‚</p>
<p>ç„¶è€Œï¼Œä½œä¸ºæµ‹é‡ API è€Œä¸æ˜¯ç½‘ç«™çš„æ ¸å¿ƒåŠŸèƒ½ï¼Œæ‚¨å¯ä»¥å®‰å…¨åœ°ä¸ºæ”¯æŒè¿™äº›åŠŸèƒ½çš„æµè§ˆå™¨æµ‹é‡è¿™äº›æŒ‡æ ‡â€”â€”å°±åƒæ‚¨åˆ°ç›®å‰ä¸ºæ­¢å¯èƒ½ä¸€ç›´åœ¨åšçš„é‚£æ ·ã€‚åªéœ€æ³¨æ„ï¼Œæ‚¨å¯èƒ½æ­£åœ¨çœ‹åˆ°è¿‡æ»¤åçš„ç”¨æˆ·è§†å›¾â€”â€”é‚£äº›å·²å‡çº§çš„ç”¨æˆ·â€”â€”ç‰¹åˆ«æ˜¯åœ¨æœ€åˆçš„å‡ ä¸ªæœˆé‡Œã€‚</p>
<h2 data-id="heading-5">ç´¯ç§¯å¸ƒå±€åç§»ï¼ˆCLSï¼‰å‘¢ï¼Ÿ</h2>
<p>ç¬¬ä¸‰ä¸ªæ ¸å¿ƒ Web æŒ‡æ ‡æ˜¯ç´¯ç§¯å¸ƒå±€åç§»ï¼ˆCLSï¼‰ï¼Œå®ƒä¸æ˜¯ Interop 2025 é¡¹ç›®çš„ä¸€éƒ¨åˆ†â€”â€”å°½ç®¡å®ƒå·²è¢«æè®®ç”¨äº Interop 2026ã€‚ç›®å‰ï¼Œé™¤äº†åŸºäº Chromium çš„æµè§ˆå™¨ä¹‹å¤–ï¼Œå®ƒä¸å—æ”¯æŒã€‚</p>
<h2 data-id="heading-6">ç»“è®º</h2>
<p>Web Vitals è®¡åˆ’çš„ç›®æ ‡æ˜¯é€šè¿‡ä¸º Web å¹³å°åˆ›å»ºä¸€å¥—æ ‡å‡† API æ¥æ”¹å–„ Web æ€§èƒ½ï¼Œä½¿å…³é”®æŒ‡æ ‡èƒ½å¤Ÿè¢«æµ‹é‡å¹¶è¢«ç½‘ç«™æ‰€æœ‰è€…å¹¿æ³›ç†è§£ã€‚å¾ˆé«˜å…´çœ‹åˆ°è¿™äº›æŒ‡æ ‡ä¸­çš„ä¸¤ä¸ªç°åœ¨å¾—åˆ°äº†æ‰€æœ‰ä¸»æµæµè§ˆå™¨çš„æ”¯æŒã€‚æˆ‘ä»¬æœŸå¾…çœ‹åˆ°è¿™äº›æŒ‡æ ‡ä¸ºç½‘ç«™æ‰€æœ‰è€…æä¾›ä»€ä¹ˆè§è§£ï¼Œä»¥åŠè¿™å¦‚ä½•å¸¦æ¥æ›´å¥½çš„ç”¨æˆ·ä½“éªŒï¼</p>
<p><strong>å‚è€ƒæ¥æºï¼š</strong> <a href="https://link.juejin.cn?target=https%3A%2F%2Fweb.dev%2Fblog%2Flcp-and-inp-are-now-baseline-newly-available" target="_blank" title="https://web.dev/blog/lcp-and-inp-are-now-baseline-newly-available" ref="nofollow noopener noreferrer">web.dev - LCP and INP are now Baseline Newly available</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è´§æ‹‰æ‹‰ç¦»çº¿å¤§æ•°æ®è¿ç§»-éªŒæ•°ç¯‡]]></title>    <link>https://juejin.cn/post/7588996730772029440</link>    <guid>https://juejin.cn/post/7588996730772029440</guid>    <pubDate>2025-12-29T06:18:54.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588996730772029440" data-draft-id="7587342664078819343" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è´§æ‹‰æ‹‰ç¦»çº¿å¤§æ•°æ®è¿ç§»-éªŒæ•°ç¯‡"/> <meta itemprop="keywords" content="åç«¯,æ¶æ„"/> <meta itemprop="datePublished" content="2025-12-29T06:18:54.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è´§æ‹‰æ‹‰æŠ€æœ¯"/> <meta itemprop="url" content="https://juejin.cn/user/1768489241815070"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è´§æ‹‰æ‹‰ç¦»çº¿å¤§æ•°æ®è¿ç§»-éªŒæ•°ç¯‡
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1768489241815070/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è´§æ‹‰æ‹‰æŠ€æœ¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-29T06:18:54.000Z" title="Mon Dec 29 2025 06:18:54 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-29
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»15åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€æ•°æ®éªŒè¯èƒŒæ™¯</h2>
<p>åœ¨å‰ä¸¤ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬åˆ†åˆ«ä»å®è§‚å±‚é¢æ¢³ç†äº†ç¦»çº¿å¤§æ•°æ®è¿ç§»çš„æ•´ä½“æµç¨‹ä¸å…³é”®æŒ‘æˆ˜ï¼ˆ<a href="https://juejin.cn/post/7551467977931079695" target="_blank" title="https://juejin.cn/post/7551467977931079695">ã€Šè´§æ‹‰æ‹‰ç¦»çº¿å¤§æ•°æ®è·¨äº‘è¿ç§»-ç»¼è¿°ç¯‡ã€‹</a>ï¼‰ï¼Œå¹¶è¯¦ç»†ä»‹ç»äº†å®é™…æ•°æ®è¿ç§»è¿‡ç¨‹ä¸­çš„ç­–ç•¥ã€æ­¥éª¤ä¸æ³¨æ„äº‹é¡¹ï¼ˆ<a href="https://juejin.cn/post/7553924835917152308" target="_blank" title="https://juejin.cn/post/7553924835917152308">ã€Šè´§æ‹‰æ‹‰ç¦»çº¿å¤§æ•°æ®è·¨äº‘è¿ç§» - æ•°æ®è¿ç§»ç¯‡ã€‹</a>ï¼‰ã€‚ç„¶è€Œï¼Œäº‘è¿ç§»å·¥ä½œå¹¶ä¸åœ¨â€œæ•°æ®æ¬è¿å®Œæˆâ€è¿™ä¸€åˆ»ç”»ä¸Šå¥å·â€”â€”è¿ç§»åçš„æ•°æ®æ˜¯å¦å®Œæ•´ã€å‡†ç¡®ã€ä¸€è‡´ï¼Œç›´æ¥å†³å®šäº†ä¸šåŠ¡ç³»ç»Ÿèƒ½å¦å¹³ç¨³åˆ‡æ¢ã€åˆ†æç»“æœèƒ½å¦å¯é å¯ä¿¡ã€‚</p>
<blockquote>
<p>è¿ç§» â‰  æˆåŠŸï¼Œæ•°æ®éªŒè¯æ‰æ˜¯é—­ç¯ã€‚éªŒæ•°æ˜¯è¿ç§»è´¨é‡çš„â€œå®ˆé—¨äººâ€ï¼Œä¹Ÿæ˜¯ä¸šåŠ¡ä¿¡ä»»çš„åŸºçŸ³</p>
</blockquote>
<p>æœ¬ç¯‡å°†å›´ç»•ç¦»çº¿å¤§æ•°æ®è¿ç§»å<strong>åŒè·‘é˜¶æ®µçš„æ•°æ®éªŒè¯</strong>å±•å¼€ï¼Œæ¶‰åŠå…¬å¸è¿‘ 20 ä¸ªéƒ¨é—¨ã€æ•°ä¸‡å¼ Hiveè¡¨çš„æ•°æ®ï¼Œæ¢è®¨éªŒè¯çš„ç›®æ ‡ä¸åŸåˆ™ã€å¸¸è§çš„éªŒè¯æ–¹æ³•ä¸å·¥å…·ã€ä¸åŒåœºæ™¯ä¸‹çš„éªŒè¯ç­–ç•¥ï¼Œä»¥åŠåœ¨å®é™…è½åœ°ä¸­éœ€è¦å…³æ³¨çš„æ€§èƒ½ä¸æˆæœ¬å¹³è¡¡ã€‚é€šè¿‡ç³»ç»ŸåŒ–çš„æ•°æ®éªŒè¯æµç¨‹ï¼Œæˆ‘ä»¬ä¸ä»…èƒ½å¤Ÿå‘ç°å¹¶ä¿®æ­£è¿ç§»è¿‡ç¨‹ä¸­çš„é—®é¢˜ï¼Œè¿˜èƒ½ä¸ºåç»­çš„æ•°æ®æ²»ç†ä¸è´¨é‡ç®¡ç†å¥ å®šåšå®åŸºç¡€ã€‚</p>
<h2 data-id="heading-1">äºŒã€æ•°æ®éªŒè¯æŒ‘æˆ˜</h2>
<ul>
<li><strong>æŒ‘æˆ˜ 1ï¼šè·¨äº‘åŒè·‘éªŒæ•°éš¾</strong>
<ul>
<li>é—®é¢˜èƒŒæ™¯ï¼š
<ul>
<li>åŒè·‘é˜¶æ®µï¼Œæºç«¯ä¸å°ç½‘ï¼Œæ¯æ—¥éƒ½æœ‰å¤§é‡çš„ä»»åŠ¡SQLå˜æ›´ã€Hiveä¸Šä¸‡è¡¨æ–°å¢/ä¿®æ”¹åˆ†åŒºæ•°æ®ã€‚éœ€è¦å¯¹åŒè·‘ç»“æœè¿›è¡Œæ ¡éªŒï¼ŒåŒ…æ‹¬è¡¨åˆ†åŒºçº§ COUNT æ ¡éªŒ å’Œ è¡Œçº§æ˜ç»†æ¯”å¯¹ã€‚æ ¡éªŒè¿‡ç¨‹éœ€åŒæ—¶ä»ä¸¤æœµäº‘æŸ¥è¯¢æ•°æ®ï¼Œæ¶‰åŠè·¨äº‘è®¿é—®ã€‚</li>
</ul>
</li>
<li>ä¸»è¦æŒ‘æˆ˜ï¼š
<ul>
<li>ç½‘ç»œç“¶é¢ˆï¼š è·¨äº‘é“¾è·¯å¸¦å®½æœ‰é™ï¼ˆçº¦ 100Gbï¼‰ï¼Œç›´æ¥è·¨äº‘è¯»å–æ•°æ®ä¼šå¯¼è‡´é«˜å»¶è¿Ÿä¸ä¼ è¾“å¼€é”€ã€‚</li>
<li>è®¡ç®—å‹åŠ›ï¼š æ¯æ—¥éœ€å¤„ç†æ•°ä¸‡å¼ è¡¨åŠè¡Œçº§æ•°æ®ï¼Œè®¡ç®—é‡å¤§ï¼Œå®¹æ˜“å ç”¨ç”Ÿäº§é›†ç¾¤èµ„æºï¼Œå½±å“ä¸šåŠ¡è¿è¡Œã€‚</li>
<li>åŠ¨æ€æ•°æ®å¹²æ‰°å¤šï¼šæŠ½æ•°éš¾å¯¹é½ï¼Œæºç«¯å†™å…¥ä¸ç›®æ ‡ç«¯åŒè·‘å¹¶è¡Œï¼Œæ•°æ®ç‰ˆæœ¬æ˜“é”™ä¹±ï¼ˆå¦‚ ETL é€»è¾‘å˜æ›´ï¼‰</li>
</ul>
</li>
<li>åº”å¯¹æ€è·¯ï¼š
<ul>
<li>é‡‡ç”¨â€œäº‘å†…æ¯”å¯¹ + åˆ†å±‚éªŒè¯ï¼ˆç²—éªŒ / ç²¾éªŒï¼‰â€ç­–ç•¥ï¼Œæ„å»ºè‡ªåŠ¨åŒ–éªŒæ•°å·¥å…·ï¼Œæ”¯æŒå¤šç»´åº¦æ¯”å¯¹ï¼ˆè¡Œçº§ã€å­—æ®µçº§ã€èšåˆçº§ï¼‰</li>
</ul>
</li>
</ul>
</li>
<li><strong>æŒ‘æˆ˜ 2ï¼šé”™è¯¯å½’å› ä¸ä¿®å¤éš¾</strong>
<ul>
<li>å·®å¼‚å¯èƒ½æºäºå·¥å…·ã€æºç«¯/ç›®æ ‡ç«¯å¼‚å¸¸æˆ–ä¸šåŠ¡å˜æ›´ï¼Œæ’æŸ¥é“¾è·¯é•¿ã€‚</li>
<li>åº”å¯¹æ€è·¯ ï¼šè‡ªåŠ¨åŒ–éªŒæ•°æŠ¥å‘Š+é—­ç¯è·Ÿè¸ªæœºåˆ¶ã€‚</li>
</ul>
</li>
<li><strong>æŒ‘æˆ˜ 3ï¼šä¸šåŠ¡éªŒæ”¶ååŒéš¾</strong>
<ul>
<li>æ¶‰åŠéƒ¨é—¨å¤šä¸”æ•°æ®å‡†ç¡®æ€§è¦æ±‚å¤šæ ·åŒ–ï¼Œæ ¸å¿ƒè¡¨éœ€ 100%ä¸€è‡´ï¼Œéæ ¸å¿ƒè¡¨å…è®¸åˆç†è¯¯å·®ã€‚</li>
<li><strong>åº”å¯¹æ€è·¯</strong> ï¼šåˆ†çº§éªŒè¯ï¼ˆP0/P1ï¼‰+ä¸“å®¶ç²¾éªŒï¼ŒåŒ¹é…ä¸šåŠ¡ä¼˜å…ˆçº§ï¼Œè´£ä»»åˆ°äººã€‚</li>
</ul>
</li>
</ul>
<h2 data-id="heading-2">ä¸‰ã€éªŒæ•°æ–¹æ¡ˆè®¾è®¡</h2>
<h3 data-id="heading-3">1. æ•´ä½“æ–¹æ¡ˆ</h3>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/65251be13b1445fea8d68d5a5b46c38d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LSn5ouJ5ouJ5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767593934&amp;x-signature=PV7crhkz1Wf7%2BnmAup3mdNFNPho%3D" alt="1.png" loading="lazy"/>
å­˜é‡æ•°æ®è¿ç§»å®Œæˆåè¿›å…¥é“¾è·¯åŒè·‘æœŸï¼Œè¿™æœŸé—´æºç«¯é›†ç¾¤ä¸å°ç½‘ï¼Œæ¯å¤©éƒ½æœ‰å¤§é‡çš„ä»»åŠ¡ä»£ç å˜æ›´å’Œæ–°æ•°æ®ç”Ÿæˆï¼Œ<strong>æ•°æ®éªŒæ”¶é€šè¿‡æ‰èƒ½ä¿éšœä¸šåŠ¡ç³»ç»Ÿå¹³ç¨³åˆ‡æ¢</strong>ã€‚æˆ‘ä»¬ä¸»è¦é€šè¿‡å¦‚ä¸‹æ­¥éª¤åšåˆ°åœ¨ä¸šåŠ¡è¿è¡Œæ— æ„Ÿçš„æƒ…å†µä¸‹å®Œæˆç¨³å®šã€é«˜æ•ˆçš„æ•°æ®éªŒè¯ï¼š</p>
<ul>
<li><strong>å‡†å¤‡é“¾è·¯åŒè·‘ç¯å¢ƒ</strong>ï¼šå‡†å¤‡åŒè·‘ç¯å¢ƒï¼Œç½‘ç»œéš”ç¦»ã€ä»»åŠ¡ä»£ç è‡ªåŠ¨åŒæ­¥ã€å†»ç»“ä¸å¯åŒè·‘ä»»åŠ¡ï¼Œé˜²æ­¢åŒè·‘é“¾è·¯æ±¡æŸ“çº¿ä¸Šæ•°æ®ï¼Œæ­å»ºäº†ä¸€å¥—<strong>éš”ç¦»ã€åŒæ­¥ã€å¯æ§çš„åŒè·‘ç¯å¢ƒ</strong></li>
<li><strong>é«˜æ•ˆæ•°æ®å¯¹æ¯”å·¥å…·</strong>ï¼šè·¨äº‘è¡¨æ•°æ®è‡ªåŠ¨å¯¹æ¯”ï¼Œæ”¯æŒè¡¨è¡Œçº§å’Œåˆ—çº§çš„ç²—éªŒï¼ˆæ•°æ®é‡ï¼‰å’Œç²¾éªŒï¼ˆæ˜ç»†ï¼Œæ”¯æŒè®¾å®šæµ®ç‚¹æ•°ç²¾åº¦ï¼‰ï¼›è‡ªåŠ¨ç”Ÿæˆå¯¹æ¯”æŠ¥å‘Šï¼Œè®°å½•è¡¨å’Œåˆ—çš„æ•°æ®ä¸ä¸€è‡´å æ¯”ä»¥åŠä¸ä¸€è‡´çš„æ˜ç»†æ•°æ®ï¼Œ<strong>å¤§å¹…æå‡éªŒæ•°æ•ˆç‡</strong></li>
<li><strong>æ•°æ®éªŒè¯ç­–ç•¥ä¸å®æ–½</strong>ï¼šæŒ‰ç…§åˆ†å±‚ã€åˆ†çº§ã€åˆ†é˜¶æ®µã€åˆ†éƒ¨é—¨çš„ç­–ç•¥å¯¹20ä¸‡+çš„Hiveè¡¨è¿›è¡ŒéªŒæ•°ï¼Œå½’å› åˆ†ææ•°æ®ä¸ä¸€è‡´åŸå› å¹¶ä¿®å¤ï¼Œ<strong>ååŠ©ä¸šåŠ¡éƒ¨é—¨å®Œæˆè¡¨æ•°æ®ä¸€è‡´æ€§éªŒæ”¶</strong></li>
</ul>
<h2 data-id="heading-4">å››ã€ éªŒæ•°å®æ–½</h2>
<h3 data-id="heading-5">1. åŒè·‘ç¯å¢ƒå‡†å¤‡</h3>
<p>åœ¨å­˜é‡æ•°æ®è¿ç§»åŸºæœ¬å®Œæˆåï¼Œç³»ç»Ÿæ­£å¼è¿›å…¥<strong>é“¾è·¯åŒè·‘é˜¶æ®µ</strong>â€”â€”è¿™æ˜¯æ•°æ®éªŒè¯æœ€å…³é”®çš„çª—å£æœŸã€‚æ­¤é˜¶æ®µï¼Œ<strong>æºç«¯é›†ç¾¤ä¿æŒå®Œå…¨å¼€æ”¾</strong>ï¼Œä¸šåŠ¡ä»»åŠ¡ç…§å¸¸è¿è¡Œï¼ŒETL ä»£ç æŒç»­è¿­ä»£ï¼Œæ¯æ—¥ä»æœ‰ 500TB+å¢é‡æ•°æ®å†™å…¥ã€‚ä¸ºç¡®ä¿éªŒè¯è¿‡ç¨‹ä¸å½±å“çº¿ä¸Šç¨³å®šæ€§ï¼ŒåŒæ—¶åˆèƒ½çœŸå®æ¨¡æ‹Ÿåˆ‡æ¢åçš„è¿è¡ŒçŠ¶æ€ï¼Œæˆ‘ä»¬æ„å»ºäº†ä¸€å¥—<strong>éš”ç¦»ã€åŒæ­¥ã€å¯æ§</strong>çš„åŒè·‘ç¯å¢ƒã€‚</p>
<h4 data-id="heading-6">1.1 ç½‘ç»œä¸èµ„æºéš”ç¦»</h4>
<ul>
<li><strong>ç‰©ç†éš”ç¦»</strong>ï¼šç›®æ ‡äº‘ç¯å¢ƒç‹¬ç«‹éƒ¨ç½² Hive Metastoreã€YARN é›†ç¾¤ã€è°ƒåº¦ç³»ç»Ÿï¼Œä¸æºç«¯æ— å…±äº«å­˜å‚¨æˆ–å…ƒæ•°æ®æœåŠ¡ï¼Œé¿å…äº¤å‰æ±¡æŸ“ã€‚</li>
<li><strong>ç½‘ç»œç­–ç•¥</strong>ï¼šé€šè¿‡ VPC å¯¹ç­‰è¿æ¥æˆ–ä¸“çº¿æ‰“é€šè·¨äº‘é€šé“ï¼Œé™åˆ¶ç›®æ ‡ç«¯ä»…å…è®¸ Kirkè¿ç§» å·¥å…·å’ŒåŒè·‘ä»»åŠ¡å†™å…¥ï¼Œç¦æ­¢å¤–éƒ¨è®¿é—® ã€‚</li>
<li><strong>èµ„æºä¿éšœ</strong>ï¼šä¸ºåŒè·‘ä»»åŠ¡åˆ†é…ç‹¬ç«‹ YARN é˜Ÿåˆ—å’Œè®¡ç®—èµ„æºï¼Œé¿å…ä¸ç”Ÿäº§ä»»åŠ¡äº‰æŠ¢èµ„æºï¼Œç¡®ä¿éªŒè¯è¿‡ç¨‹ä¸å½±å“æ ¸å¿ƒé“¾è·¯ SLAã€‚
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6babe110086749748769d82eea79b226~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LSn5ouJ5ouJ5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767593934&amp;x-signature=Xv%2BpDAyq2V8NltVHBA9gh6qD9Ng%3D" alt="2.png" loading="lazy"/></li>
</ul>
<h4 data-id="heading-7">1.2 ä»»åŠ¡ä»£ç è‡ªåŠ¨åŒæ­¥</h4>
<p>ä¸ºç¡®ä¿è®¡ç®—ä»»åŠ¡ä»£ç ã€æ•°æ®åŠå…ƒæ•°æ®åœ¨å¤šç¯å¢ƒé—´çš„é«˜åº¦ä¸€è‡´æ€§ï¼Œæ•°æ®å¹³å°è‡ªä¸»ç ”å‘äº†è‡ªåŠ¨åŒæ­¥åŠŸèƒ½ã€‚è¯¥åŠŸèƒ½å®ç°äº†ä¸»ç¯å¢ƒåˆ°å¤‡ç¯å¢ƒçš„å®æ—¶åŒå‘åŒæ­¥ï¼Œå½“ç”¨æˆ·åœ¨ä¸»ç¯å¢ƒè¿›è¡Œä»£ç ä¿®æ”¹ã€æ•°æ®æ›´æ–°æˆ–é…ç½®è°ƒæ•´æ—¶ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨ã€ç²¾å‡†åœ°å°†å˜æ›´å†…å®¹åŒæ­¥è‡³å¤‡ç¯å¢ƒã€‚
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1fb75efa40c34f5dbeee1cad313a2b06~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LSn5ouJ5ouJ5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767593934&amp;x-signature=dJFJkZVBvXJCibk%2Bo1sBXqN9w2U%3D" alt="3.png" loading="lazy"/></p>
<h4 data-id="heading-8">1.3 ä¸å¯åŒè·‘ä»»åŠ¡å†»ç»“æœºåˆ¶</h4>
<p>å¹¶éæ‰€æœ‰ä»»åŠ¡éƒ½é€‚åˆåŒè·‘ã€‚ä¾‹å¦‚ï¼š</p>
<ul>
<li>å¼ºä¾èµ–æºç«¯ç‰¹å®šç»„ä»¶ï¼ˆå¦‚è‡ªå®šä¹‰ UDFã€æœ¬åœ°ç¼“å­˜ï¼‰ï¼›</li>
<li>æ¶‰åŠå¤–éƒ¨ç³»ç»Ÿå†™å…¥ï¼ˆå¦‚ DBã€MQï¼‰ï¼ŒåŒè·‘ä¼šå¯¼è‡´é‡å¤å†™å…¥ï¼›</li>
<li>ä»»åŠ¡æœ¬èº«å…·æœ‰å¹‚ç­‰ç ´åæ€§ï¼ˆå¦‚ deleteã€drop æ“ä½œï¼‰ã€‚</li>
</ul>
<blockquote>
<p>åŒè·‘æœŸé—´ä¸æ‰“å¼€çš„ä»»åŠ¡ï¼š</p>
<ul>
<li>ä¸€æ¬¡æ€§ä»»åŠ¡</li>
<li>æ‰€æœ‰Dorisç›¸å…³ä»»åŠ¡ï¼ŒåŒ…å«Doris SQLã€ShellDorisã€Hive2dorisç­‰ç±»å‹ä¸æ‰“å¼€</li>
<li>Hive to Anyä»»åŠ¡</li>
</ul>
</blockquote>
<p>å¯¹æ­¤ç±»ä»»åŠ¡ï¼Œåœ¨åŒè·‘å¯åŠ¨å‰ä¼šå†»ç»“ï¼Œé¿å…å¯¹ç›®æ ‡ç«¯æˆ–å¤–éƒ¨ç³»ç»Ÿé€ æˆå¹²æ‰°ã€‚åŒæ—¶ï¼Œå¯¹å…³é”®å†»ç»“ä»»åŠ¡æä¾› Mock æ•°æ®æˆ–ç©ºè·‘ç­–ç•¥ï¼Œä¿éšœä¸‹æ¸¸é“¾è·¯å®Œæ•´æ€§ã€‚</p>
<p>é€šè¿‡ä¸Šè¿°æªæ–½ï¼Œæˆ‘ä»¬æ„å»ºäº†ä¸€ä¸ª<strong>é«˜ä¿çœŸã€ä½å¹²æ‰°ã€å¯å›æº¯</strong>çš„åŒè·‘ç¯å¢ƒï¼Œä¸ºåç»­å¤§è§„æ¨¡ã€è‡ªåŠ¨åŒ–æ•°æ®éªŒè¯å¥ å®šäº†åšå®åŸºç¡€ã€‚åœ¨æ•´ä¸ªåŒè·‘å‘¨æœŸï¼ˆçº¦ 2â€“3 å‘¨ï¼‰å†…ï¼Œç³»ç»Ÿå¹³ç¨³è¿è¡Œï¼Œæœªå‘ç”Ÿå› éªŒè¯å¯¼è‡´çš„ç”Ÿäº§äº‹æ•…ï¼ŒçœŸæ­£å®ç°äº†â€œ<strong>ä¸šåŠ¡è¿è¡Œæ— æ„Ÿï¼ŒéªŒè¯æœ‰ç†æœ‰æ®</strong>â€ã€‚</p>
<h3 data-id="heading-9">2. éªŒæ•°å¹³å°</h3>
<p>ä¸ºäº†ä¿éšœåŒè·‘éªŒæ•°å·¥ä½œé«˜æ•ˆæ¨è¿›ï¼Œæˆ‘ä»¬åŸºäº Kirk ç³»ç»Ÿè‡ªç ”äº†ä¸€å¥—é«˜ååã€é«˜æ€§èƒ½ã€å¯æ‰©å±•çš„è‡ªåŠ¨åŒ–éªŒæ•°å¹³å°ã€‚å¹³å°è®¾è®¡éµå¾ªä»¥ä¸‹æ ¸å¿ƒæ€è·¯ï¼š</p>
<ul>
<li><strong>å¹³å°åŒ–ä¸è‡ªåŠ¨åŒ–</strong>
å°†ç¹ççš„éªŒæ•°æ“ä½œï¼ˆå¦‚è°ƒåº¦å¯¹æ¯”ä»»åŠ¡ã€æ”¶é›†ç»“æœã€ç”ŸæˆæŠ¥å‘Šï¼‰æ•´åˆä¸ºæ ‡å‡†åŒ–ã€è‡ªåŠ¨åŒ–çš„å¹³å°æµç¨‹ï¼Œå‡å°‘äººå·¥å¹²é¢„ï¼Œæå‡æ•ˆç‡ä¸ä¸€è‡´æ€§ã€‚</li>
<li><strong>å¤šç»´åº¦å¯æ‰©å±•</strong>
æ”¯æŒå¤šç§éªŒæ•°ç­–ç•¥çš„é€‰æ‹©ï¼Œå¦‚æ¯”è®¡æ•°ã€æ¯”å…³é”®å­—æ®µå“ˆå¸Œã€æ¯”å…¨å­—æ®µç­‰ï¼Œæ”¯æŒéªŒæ”¶é˜ˆå€¼é…ç½®ï¼Œè¿˜æ”¯æŒé«˜åº¦å®šåˆ¶åŒ–çš„éªŒæ•°é€»è¾‘ï¼Œå¦‚è‡ªå®šä¹‰SQLã€‚</li>
<li><strong>é¢å‘ä¸šåŠ¡ååŒ</strong>
æä¾›æ¸…æ™°çš„éªŒæ•°æŠ¥å‘Šï¼ŒæŒ‰éƒ¨é—¨ã€è¡¨é‡è¦æ€§åˆ†ç±»ï¼Œè¾“å‡ºæ¯”å¯¹ç»“æœï¼Œå·®å¼‚ç‡ï¼Œå·®å¼‚æ˜ç»†ç­‰ï¼Œç”¨æˆ·å¯å¿«é€Ÿæ‰¾åˆ°ä¸ä¸€è‡´çš„åŸå› ï¼Œå®ç°è´£ä»»åˆ°äººï¼Œè¿‡ç¨‹é€æ˜ã€‚</li>
</ul>
<h4 data-id="heading-10">2.1 è·¨äº‘æ•°æ®éªŒè¯</h4>
<p>é“¾è·¯åŒè·‘å®Œæˆä¹‹åï¼Œå¾…éªŒè¯æ•°æ®åˆ†åˆ«åœ¨ä¸¤æœµäº‘ï¼Œä¸ºäº†é¿å…é¢‘ç¹é‡å¤çš„è·¨äº‘ä¼ è¾“ï¼Œæˆ‘ä»¬è®¾è®¡äº†æ•°æ®é›†ä¸­éªŒè¯ç­–ç•¥â€”â€”å°†æºç«¯æ•°æ®é¢„å…ˆè¿ç§»åˆ°ç›®æ ‡ç«¯ï¼Œåœ¨å•ä¸€äº‘ç¯å¢ƒå†…å®Œæˆå…¨éƒ¨éªŒè¯å·¥ä½œã€‚</p>
<h5 data-id="heading-11">2.1.1 æ•°æ®å‡†å¤‡</h5>
<p>è¦æŠŠæ•°æ®è¿ç§»åˆ°åŒä¸€æœµäº‘ä¸Šï¼Œé¦–å…ˆè¦è§£å†³çš„ç¬¬ä¸€ä¸ªé—®é¢˜å°±æ˜¯æ•°æ®æ”¾å“ªé‡Œæ€ä¹ˆæ”¾çš„é—®é¢˜ï¼Œæ— è®ºéªŒæ•°ç»“æœæ˜¯å¦é€šè¿‡ï¼Œæœ€ç»ˆéƒ½ä¼šä»¥æºç«¯æ•°æ®ä¸ºåŸºå‡†å»è¦†ç›–ç›®æ ‡ç«¯çš„æ•°æ®ï¼Œå› æ­¤åœ¨éªŒæ•°çš„å‡†å¤‡è¿‡ç¨‹ä¸­ï¼Œç¬¬ä¸€æ­¥å…ˆå°†ç›®æ ‡ç«¯å¾…éªŒè¯çš„æ•°æ®ç§»åŠ¨åˆ°æ¯”å¯¹åº“ä¸­é¿å…è¢«æºç«¯è¦†ç›–ï¼ˆrenameæ“ä½œï¼Œä¸ä¼šäº§ç”Ÿæ•°æ®è¯»å†™ï¼‰ï¼Œç¬¬äºŒæ­¥ä½¿ç”¨Kirkï¼ˆè‡ªç ”æ•°æ®è¿ç§»å·¥å…·ï¼‰æŠŠæºç«¯æ•°æ®æ¬è¿åˆ°ç›®æ ‡ç«¯æ­£å¼ç›®å½•ä¸Šï¼Œé€šè¿‡è¿™ä¸¤ä¸ªæ­¥éª¤ï¼Œæ—¢å®Œæˆäº†æ•°æ®è¿ç§»ä»»åŠ¡ï¼Œåˆä¸ºäº‘å†…æ¯”å¯¹åšå¥½äº†æ•°æ®å‡†å¤‡ã€‚
è¿™ä¸ªè¿‡ç¨‹ä¸­éœ€è¦æ³¨æ„éåˆ†åŒºè¡¨çš„ç‰¹æ®Šå¤„ç†ï¼Œé€šå¸¸éåˆ†åŒºè¡¨çš„å¤§å°éƒ½æ¯”è¾ƒå°ï¼ˆä¸»è¦æ˜¯ç»´è¡¨ï¼‰ï¼Œç”±äºéåˆ†åŒºè¡¨æ¯å¤©éƒ½ä¼šè‡ªè¡Œè¦†ç›–ï¼Œä¸ºäº†å®ç°å†å²çŠ¶æ€çš„å›æº¯ï¼Œéœ€è¦ä¸“é—¨é’ˆå¯¹äºéåˆ†åŒºè¡¨ä¿ç•™å†å²çŠ¶æ€çš„å¿«ç…§ï¼Œæ•°æ®å‡†å¤‡è¿‡ç¨‹å¦‚ä¸‹ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1edf58ecb71e482c88e2fa1caa0bb3b3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LSn5ouJ5ouJ5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767593934&amp;x-signature=zuf8MijNLaGRfLBUZ4dKh%2BtKQ%2FQ%3D" alt="4.png" loading="lazy"/></p>
<h5 data-id="heading-12">2.1.2 æ¯”å¯¹æ–¹æ¡ˆ</h5>




















<table><thead><tr><th align="left">ç±»å‹</th><th align="left">æ–¹æ³•</th><th align="left">è¯´æ˜</th></tr></thead><tbody><tr><td align="left">ç²—éªŒ</td><td align="left">å¯¹æ¯”æºç«¯ä¸è…¾è®¯äº‘ä¸¤æ¡é“¾è·¯äº§å‡ºçš„è¡¨è¡Œæ•°ï¼ˆCOUNTï¼‰</td><td align="left">å¿«é€Ÿåˆ¤æ–­æ•°æ®å®Œæ•´æ€§ï¼Œæ˜¯ç²¾éªŒçš„å‰ææ¡ä»¶</td></tr><tr><td align="left">ç²¾éªŒ</td><td align="left">å¯¹æ¯å¼ è¡¨çš„æ¯è¡Œæ•°æ®è®¡ç®— MD5 å€¼ï¼Œé€è¡Œæ¯”å¯¹ä¸€è‡´æ€§</td><td align="left">ç¡®ä¿å†…å®¹çº§ 100% ä¸€è‡´ï¼Œç”¨äºæ ¸å¿ƒè¡¨éªŒè¯</td></tr></tbody></table>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/639accd26d4645e4b82ed54c323db058~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LSn5ouJ5ouJ5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767593934&amp;x-signature=u%2FhapAtJSDfSzgPIt7VGQntTM4A%3D" alt="5.png" loading="lazy"/></p>
<h4 data-id="heading-13">2.2 éªŒæ•°å¹³å°ä»‹ç»</h4>
<h5 data-id="heading-14">2.2.1 åˆ›å»ºæ¯”å¯¹ä»»åŠ¡</h5>
<p>æ”¯æŒå•ä¸ª/æ‰¹é‡åˆ›å»ºæ•°æ®æ¯”å¯¹ä»»åŠ¡</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c5828069a6ad4176a80abf4d4dc98237~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LSn5ouJ5ouJ5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767593934&amp;x-signature=HmdUmS9UmLChHZ8XUa%2FlhJoQKHI%3D" alt="6.png" loading="lazy"/></p>
<h5 data-id="heading-15">2.2.2 é…ç½®æ¯”å¯¹é€»è¾‘</h5>
<ol>
<li>countéªŒæ•°ï¼šå¯¹æ¯”åä¸ºäº‘å’Œè…¾è®¯äº‘è¡¨countè¡Œæ•°</li>
<li>è‡ªå®šä¹‰SQLéªŒæ•°ï¼šcountï¼Œsumï¼ŒæŒ‰ç»´åº¦èšåˆ</li>
<li>æ˜ç»†æ¯”å¯¹ï¼šå¯¹æ¯”æ•´è¡Œæ•°æ®çš„å·®å¼‚ï¼Œå¯ä»¥æŒ‡å®šä¸»é”®å’Œæ’é™¤å­—æ®µ</li>
<li>æ•°å€¼å·®å¼‚æ¯”å¯¹ï¼šå°†æ•°å€¼å­—æ®µæŒ‰ç…§ +-*/ ç­‰è§„åˆ™è®¡ç®—å·®å¼‚ç‡ï¼Œå¹¶å¯å•ç‹¬æŒ‡å®šæ¯ä¸ªå­—æ®µçš„å·®å¼‚ç‡é˜ˆå€¼</li>
</ol>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/78388d70b10143d29592dd1a916a23fb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LSn5ouJ5ouJ5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767593934&amp;x-signature=i8hbXSV9eSd7Z0ZY5tTaUwuZ2AA%3D" alt="7.png" loading="lazy"/></p>
<h5 data-id="heading-16">2.2.3 è¿è¡Œæ¯”å¯¹ä»»åŠ¡</h5>
<p>ç”¨æˆ·å¯ä»¥æ ¹æ®éœ€æ±‚ï¼Œé€‰æ‹©è‡ªåŠ¨æ‰§è¡Œæˆ–è€…å®šæ—¶æ‰§è¡Œæ¯”å¯¹é€»è¾‘ï¼ŒåŠŸèƒ½ä»‹ç»å¦‚ä¸‹ï¼š</p>

































<table><thead><tr><th align="left">å¯¹æ¯”é¡¹</th><th align="left">è¯´æ˜</th></tr></thead><tbody><tr><td align="left">æ˜¯å¦countæ¯”å¯¹</td><td align="left">æ‰§è¡Œè¡Œæ•°ä¸€è‡´æ€§æ ¡éªŒ</td></tr><tr><td align="left">æ˜¯å¦è‡ªå®šä¹‰SQLæ¯”å¯¹</td><td align="left">æ‰§è¡Œç”¨æˆ·è‡ªå®šä¹‰SQLæ ¡éªŒ</td></tr><tr><td align="left">æ˜¯å¦æ˜ç»†æ¯”å¯¹</td><td align="left">æ‰§è¡Œå­—æ®µçº§ä¸€è‡´æ€§éªŒè¯</td></tr><tr><td align="left">æ˜¯å¦æ•°å€¼å·®å¼‚æ¯”å¯¹</td><td align="left">æ‰§è¡Œæ•°å€¼å­—æ®µå››åˆ™è¿ç®—ä¸€è‡´æ€§éªŒè¯</td></tr><tr><td align="left">æ˜¯å¦BIæ•°å€¼å·®å¼‚æ¯”å¯¹</td><td align="left">æ‰§è¡Œæ•°å€¼æ³¢åŠ¨ç‡ä¸€è‡´æ€§éªŒè¯</td></tr><tr><td align="left">BIæ˜¯å¦å¤¸å¤©æ¯”å¯¹</td><td align="left">æ‰§è¡Œæ•°å€¼æ³¢åŠ¨ç‡ä¸€è‡´æ€§éªŒè¯å¹¶ä¸”å¯è‡ªå®šä¹‰åŒç¯æ¯”æ—¥æœŸ</td></tr></tbody></table>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/99062fd4c5fc45bd8c32c7bb5ae400b6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LSn5ouJ5ouJ5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767593934&amp;x-signature=pJcwQGy752uaQo7AOZagO%2B%2FQtU4%3D" alt="8.png" loading="lazy"/></p>
<h5 data-id="heading-17">2.2.4 ä¸‹è½½æ¯”å¯¹æŠ¥å‘Š</h5>





































<table><thead><tr><th>å¯¹æ¯”é¡¹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>å…¨å±€æ¯”å¯¹ç»“æœ</td><td>è¯¥ task æœ€ç»ˆçš„æ¯”å¯¹çŠ¶æ€ï¼Œåˆ†ä¸ºï¼šæœªçŸ¥ï¼ˆç³»ç»Ÿæ¯”å¯¹ SQL å’Œç”¨æˆ·è‡ªå®šä¹‰ SQL è¿è¡Œå¼‚å¸¸ï¼‰ï¼Œä¸€è‡´ï¼ˆç³»ç»Ÿæ¯”å¯¹ SQL å’Œç”¨æˆ·è‡ªå®šä¹‰ SQL éƒ½ä¸€è‡´ï¼‰ï¼Œä¸ä¸€è‡´ï¼ˆç³»ç»Ÿæ¯”å¯¹ SQL æˆ–ç”¨æˆ·è‡ªå®šä¹‰ SQL ä¸ä¸€è‡´ï¼‰</td></tr><tr><td>ç³»ç»Ÿæ¯”å¯¹ç»“æœ</td><td>ç³»ç»Ÿç”Ÿæˆçš„ Count SQL æ¯”å¯¹ç»“æœæ˜¯å¦ä¸€è‡´</td></tr><tr><td>ç”¨æˆ·SQLæ¯”å¯¹ç»“æœ</td><td>ç”¨æˆ·è‡ªå®šä¹‰çš„ SQL æ‰§è¡Œçš„ç»“æœæ˜¯å¦ä¸€è‡´</td></tr><tr><td>æºé“¾è·¯count</td><td>ä¸»é“¾è·¯æ‰§è¡Œ SQL Count ç»“æœ</td></tr><tr><td>è…¾è®¯äº‘count</td><td>è…¾è®¯äº‘æ‰§è¡Œ SQL Count ç»“æœ</td></tr><tr><td>countå·®å¼‚ç‡</td><td>ä¸»é“¾è·¯å’Œè…¾è®¯äº‘ Count å·®å¼‚ï¼ˆï¼ˆè…¾è®¯äº‘ Count - ä¸»é“¾è·¯ Countï¼‰/ ä¸»é“¾è·¯ Countï¼‰</td></tr><tr><td>ç³»ç»Ÿå¼‚å¸¸ä¿¡æ¯</td><td>ç³»ç»Ÿçš„å¼‚å¸¸æ—¥å¿—ï¼Œæœ‰åˆ™ç‚¹å‡»å¹¶æ˜¾ç¤º</td></tr></tbody></table>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c6e9ea1147cb4ddf816a8e9e308fe0d4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LSn5ouJ5ouJ5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767593934&amp;x-signature=XOaILIoVvKTWOY%2B3q9wl8Ojt%2BrQ%3D" alt="9.png" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5eaedc82a0ce486e918421b3656ee0ab~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LSn5ouJ5ouJ5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767593934&amp;x-signature=LOI3XN%2BKR8xYlzPQJzRKVfiUgBk%3D" alt="10.png" loading="lazy"/></p>
<h3 data-id="heading-18">3. æ•°æ®éªŒè¯ç­–ç•¥ä¸å®æ–½</h3>
<p>é¢å¯¹æ¨ªè·¨è¿‘20ä¸ªéƒ¨é—¨ã€æ¶µç›–æ•°ä¸‡å¼ Hiveè¡¨çš„åºå¤§æ•°æ®ä½“ç³»ï¼Œæˆ‘ä»¬æ„å»ºäº†ä¸€å¥—è´¯ç©¿åŒè·‘å‘¨æœŸçš„ç³»ç»Ÿæ€§éªŒæ•°æ–¹æ¡ˆã€‚è¯¥æ–¹æ¡ˆä»¥â€œå¹³å°åŒ–å·¥å…·è‡ªåŠ¨å·¡æ£€â€ä¸â€œä¸“å®¶å›¢é˜Ÿç²¾å‡†æ ¸éªŒâ€åŒè½¨å¹¶è¿›ï¼Œé€šè¿‡å±‚æ¬¡åŒ–ã€åœºæ™¯åŒ–çš„éªŒè¯æµç¨‹ï¼Œä¸ºæ ¸å¿ƒæ•°æ®çš„ä¸€è‡´æ€§ä¿é©¾æŠ¤èˆªï¼Œä¸ºä¸šåŠ¡åˆ‡æ¢ç­‘ç‰¢ä¿¡ä»»æ ¹åŸºã€‚</p>
<h4 data-id="heading-19">3.1 æ ¸å¿ƒç­–ç•¥</h4>
<h5 data-id="heading-20">3.1.1 åˆ†å±‚ã€åˆ†çº§ã€åˆ†é˜¶æ®µ</h5>
<p>ä¸ºåº”å¯¹æ•°æ®è§„æ¨¡ä¸å¤æ‚æ€§çš„æŒ‘æˆ˜ï¼Œæˆ‘ä»¬æ‘’å¼ƒäº†å•ä¸€ç»´åº¦çš„éªŒè¯æ–¹å¼ï¼Œç¡®ç«‹äº†ä»¥ä¸‹æ ¸å¿ƒç­–ç•¥
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7f031f6fe4b8481283c165590aec84e0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LSn5ouJ5ouJ5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767593934&amp;x-signature=gT2ckkNPaxoi%2FKE%2Ba6nzygvyAHM%3D" alt="11.png" loading="lazy"/></p>
<ul>
<li><strong>åˆ†å±‚éªŒè¯</strong>ï¼ˆä»æ•°æ®äº§ç”Ÿçš„æŠ€æœ¯æµç¨‹å’Œä¾èµ–å…³ç³»å…¥æ‰‹ï¼‰ä»åŸºç¡€æ•°æ®å±‚ï¼ˆODS/DWDï¼‰åˆ°åº”ç”¨æ•°æ®å±‚ï¼ˆDWS/DM/æŠ¥è¡¨ï¼‰ä¾æ¬¡éªŒè¯ï¼Œç¡®ä¿éªŒè¯æµç¨‹ç¬¦åˆæ•°æ®åŠ å·¥é€»è¾‘ï¼Œç³»ç»Ÿæ€§é˜»æ–­åº•å±‚é”™è¯¯å‘ä¸Šè”“å»¶ã€‚</li>
<li><strong>åˆ†çº§éªŒè¯</strong>ï¼ˆä»æ•°æ®çš„é‡è¦æ€§å’Œå½±å“é¢å…¥æ‰‹ï¼‰ï¼Œå¯¹æ•°æ®è¡¨è¿›è¡ŒP0ï¼ˆæ ¸å¿ƒï¼‰/P1ï¼ˆé‡è¦ï¼‰/P2ï¼ˆä¸€èˆ¬ï¼‰åˆ†çº§ï¼Œå®æ–½å·®å¼‚åŒ–çš„éªŒè¯å¼ºåº¦ï¼Œç¡®ä¿èµ„æºç²¾å‡†æŠ•æ”¾ã€‚</li>
<li><strong>åˆ†é˜¶æ®µéªŒè¯</strong>ï¼ˆä»éªŒè¯å·¥ä½œçš„å®æ–½æ­¥éª¤å’Œç²¾ç»†åº¦å…¥æ‰‹ï¼‰é‡‡ç”¨â€œå…ˆç²—åç²¾â€çš„ä¸¤é˜¶æ®µæµç¨‹ï¼Œå…ˆè¡Œæ•°å¿«é€Ÿç­›æŸ¥ï¼Œå†å†…å®¹æ·±åº¦æ¯”å¯¹ï¼Œæ„å»ºé«˜æ•ˆçš„éªŒè¯æµæ°´çº¿ã€‚</li>
</ul>
<h4 data-id="heading-21">3.2 æ–¹æ¡ˆå®æ–½</h4>
<p>ä¸ºç¡®ä¿éªŒè¯çš„å…¨é¢æ€§ä¸æ·±åº¦ï¼Œæˆ‘ä»¬é‡‡ç”¨äº†<strong>å¹³å°åŒ–å·¥å…·</strong>ä¸<strong>ä¸“å®¶ç²¾å‡†æ ¸éªŒ</strong>çš„åŒè½¨åˆ¶ç­–ç•¥ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/24e140d3f74c4a7a8cf2df51aa97dfb3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LSn5ouJ5ouJ5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767593934&amp;x-signature=jO72HK47qexTXllgo%2FmxJ95cZaA%3D" alt="12.png" loading="lazy"/></p>
<h5 data-id="heading-22">3.2.1 å¹³å°éªŒæ•°</h5>
<p>ä¸ºæå‡éªŒè¯æ•ˆç‡ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†å…ƒåˆå¹³å°çš„éªŒæ•°å·¥å…·ï¼Œè¦†ç›–åŸºç¡€åœºæ™¯ï¼Œå®ç°è§„æ¨¡åŒ–æ•ˆç‡</p>
<ul>
<li><strong>CountéªŒæ•°</strong>ï¼šå¿«é€Ÿæ¯”å¯¹æºç«¯å’Œè…¾è®¯äº‘è¡¨æˆ–åˆ†åŒºçš„è¡Œæ•°ï¼Œæ˜¯â€œåˆ†é˜¶æ®µâ€ç­–ç•¥ä¸­â€œç²—éªŒâ€çš„æ ¸å¿ƒæ‰‹æ®µï¼Œèƒ½å¿«é€Ÿå®šä½å®è§‚å·®å¼‚ã€‚</li>
<li><strong>è‡ªå®šä¹‰SQLéªŒæ•°</strong>ï¼š
<ul>
<li><strong>æ•°æ®æµå®Œæ•´æ€§éªŒè¯</strong>ï¼šéªŒè¯ä»ODSæºå¤´åˆ°DMåº”ç”¨å±‚çš„æ•°æ®åŠ å·¥é“¾æ˜¯å¦å‡†ç¡®ã€‚ä¾‹å¦‚ï¼Œç¼–å†™SQLæ£€æŸ¥DMå±‚çš„â€œç”¨æˆ·æ€»æ¶ˆè´¹é‡‘é¢â€æ˜¯å¦ç­‰äºå¯¹DWDå±‚æ‰€æœ‰ç›¸å…³æ˜ç»†è®¢å•é‡‘é¢çš„æ±‡æ€»ã€‚</li>
<li><strong>å…³é”®KPIæ¯”å¯¹</strong>ï¼šå¦‚â€œå½“æ—¥GTVâ€ã€â€œæ´»è·ƒç”¨æˆ·æ•°â€ã€â€œå¹³å‡å“åº”æ—¶é•¿â€ç­‰ã€‚éœ€è¦ç¼–å†™æ‰¿è½½äº†å®Œæ•´ã€ä¸€è‡´ä¸šåŠ¡å£å¾„çš„SQLï¼ˆæ¶‰åŠå¤šè¡¨å…³è”ã€å»é‡ã€è¿‡æ»¤ã€èšåˆï¼‰</li>
</ul>
</li>
<li><strong>æ˜ç»†æ¯”å¯¹</strong>ï¼šåŸºäºä¸»é”®æˆ–å”¯ä¸€é”®çš„é€è¡Œå­—æ®µçº§ç²¾å‡†æ¯”å¯¹ï¼Œæ˜¯â€œç²¾éªŒâ€é˜¶æ®µéªŒè¯æ•°æ®æ˜ç»†ä¸€è‡´æ€§çš„å…³é”®æ‰‹æ®µã€‚</li>
<li><strong>æ•°å€¼å·®å¼‚æ¯”å¯¹</strong>ï¼šé’ˆå¯¹æ•°å€¼å‹å­—æ®µï¼Œè®¾ç½®è¯¯å·®å®¹å¿åŒºé—´ï¼Œç§‘å­¦åœ°åˆ¤å®šåœ¨åˆç†æ³¢åŠ¨èŒƒå›´å†…çš„æ•°æ®ä¸€è‡´æ€§ï¼Œæœ‰æ•ˆè§£å†³äº†æŠ¥è¡¨å±‚å› å¾®å°æ—¶é—´å·®å¯¼è‡´åŒ¹é…ä¸ä¸Šçš„ç»å…¸éš¾é¢˜ã€‚</li>
</ul>
<h5 data-id="heading-23">3.2.2 ä¸“å®¶éªŒæ•°ï¼šæ”»åšå¤æ‚åœºæ™¯ï¼Œç¡®ä¿ä¸šåŠ¡æ·±åº¦å¯ä¿¡</h5>
<p>å¯¹äºå…ƒåˆéªŒæ•°å¹³å°æ— æ³•è¦†ç›–çš„å¤æ‚ã€å®šåˆ¶åŒ–åœºæ™¯ï¼Œæˆ‘ä»¬ä¾èµ–æ•°æ®å¼€å‘è€…çš„é¢†åŸŸçŸ¥è¯†ä¸ç»éªŒè¿›è¡Œæ·±åº¦éªŒè¯ã€‚</p>
<ul>
<li><strong>éªŒè¯èŒƒå›´</strong>ï¼šèšç„¦äºæ ¸å¿ƒé“¾è·¯è¡¨ä¸å„éƒ¨é—¨è®¤å®šçš„é‡è¦è¡¨ã€‚
<ul>
<li>ç»ˆç«¯è¡¨ä¼˜å…ˆéªŒè¯ï¼šä¼˜å…ˆéªŒè¯ç›´æ¥é¢å‘ä¸šåŠ¡åº”ç”¨çš„ç»ˆç«¯äº§å‡ºè¡¨ã€‚è‹¥ç»ˆç«¯è¡¨æ•°æ®å‡†ç¡®ï¼Œåˆ™å…¶ä¸Šæ¸¸æ•°æ®å¤„ç†é“¾è·¯åœ¨å¤§æ¦‚ç‡ä¸Šæ˜¯æ­£ç¡®çš„ï¼Œè¿™æ˜¯ä¸€ç§é«˜æ•ˆçš„é€†å‘éªŒè¯æ€è·¯ã€‚</li>
<li>å…³é”®èŠ‚ç‚¹è¡¨éªŒè¯ï¼šå¯¹æ‰¿ä¸Šå¯ä¸‹çš„å…³é”®å®½è¡¨ã€é‡åº¦èšåˆè¡¨ç­‰è¿›è¡Œé‡ç‚¹æ ¸æŸ¥ï¼Œç¡®ä¿æ ¸å¿ƒæ•°æ®åŠ å·¥èŠ‚ç‚¹çš„å‡†ç¡®æ€§ã€‚</li>
</ul>
</li>
<li><strong>éªŒè¯æ–¹æ³•</strong>ï¼š
<ol>
<li>é¢†åŸŸä¸“ä¸šéªŒè¯ï¼šç»“åˆä¸šåŠ¡è¯­ä¹‰ï¼Œå¯¹é‡è¦ç»´åº¦ï¼ˆå¦‚åœ°åŒºã€æ¸ é“ï¼‰ã€å…³é”®æŒ‡æ ‡ï¼ˆå¦‚GMVã€è½¬åŒ–ç‡ï¼‰è¿›è¡Œèšåˆç»Ÿè®¡ä¸è¶‹åŠ¿æ¯”å¯¹ï¼Œä»ä¸šåŠ¡è§†è§’åˆ¤æ–­æ•°æ®åˆç†æ€§ã€‚</li>
<li>æ ‡å‡†é€è¡Œæ¯”è¾ƒéªŒè¯ï¼šå¯¹äºè¦æ±‚ç»å¯¹ä¸€è‡´çš„æ ¸å¿ƒè¡¨ï¼Œåˆ©ç”¨æˆ‘ä»¬æä¾›çš„æ·±åº¦éªŒæ•°å·¥å…·ï¼ˆæ”¯æŒåœ¨è…¾è®¯äº‘ä¾§è¿›è¡Œæ•°æ®æ¯”å¯¹ï¼‰ï¼Œå¯å¯¹æ¯ä¸€è¡Œæ•°æ®çš„æ‰€æœ‰å­—æ®µæˆ–éƒ¨åˆ†å…³é”®å­—æ®µè®¡ç®—MD5å€¼ï¼Œè¿›è¡Œæ— æŸçš„ç²¾ç¡®æ¯”å¯¹ï¼Œç¡®ä¿æ•°æ®100%ä¸€è‡´ã€‚</li>
</ol>
</li>
</ul>
<h5 data-id="heading-24">3.2.3 æ ‡å‡†åŒ–è¿è¥æµç¨‹</h5>
<p>æˆ‘ä»¬å»ºç«‹äº†ä¸“èŒçš„éªŒæ•°å°ç»„ï¼Œé©±åŠ¨éªŒè¯å·¥ä½œé—­ç¯ï¼š
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/805cd0e707b04695a846d27e30481331~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LSn5ouJ5ouJ5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767593934&amp;x-signature=RVUYOADZUHgGOrqGEjOJQLMTNeE%3D" alt="13.png" loading="lazy"/></p>
<ul>
<li>é¡ºåºæ¨è¿›ï¼šä¸¥æ ¼æ‰§è¡Œâ€œå…ˆåŸºç¡€å±‚ï¼Œååº”ç”¨å±‚â€çš„éªŒè¯é¡ºåºã€‚</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/53a09dbc737e4326aaed6b3bb0444ec7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LSn5ouJ5ouJ5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767593934&amp;x-signature=%2FEEC3Zb20DzZbBtOkJvLUcQiJLQ%3D" alt="14.png" loading="lazy"/></p>
<ul>
<li>å·¥å…·ä¸æŠ¥å‘Šé©±åŠ¨ï¼šä»¥å…ƒåˆéªŒæ•°å¹³å°ä¸ºæ ¸å¿ƒè°ƒåº¦å·¥å…·ï¼Œæ¯æ—¥è‡ªåŠ¨äº§å‡ºéªŒæ•°æŠ¥å‘Šï¼Œé€æ˜åŒ–å±•ç¤ºéªŒè¯è¿›åº¦ä¸ä¸ä¸€è‡´é¡¹ã€‚</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/67b11d1a9e5b45ccb59a3787205ad3a2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LSn5ouJ5ouJ5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767593934&amp;x-signature=SYv4odLJ%2FeoxAfbceqe8%2FiYrWng%3D" alt="15.png" loading="lazy"/></p>
<ul>
<li>é—®é¢˜é—­ç¯ç®¡ç†ï¼šå¯¹å¹³å°å‘ç°åŠä¸“å®¶è¯†åˆ«çš„ä¸ä¸€è‡´é—®é¢˜ï¼Œæ‰§è¡Œâ€œå®šä½ã€è§£å†³ã€è·Ÿè¸ªã€éªŒè¯â€çš„å…¨ç¨‹é—­ç¯ç®¡ç†ï¼Œç¡®ä¿æ‰€æœ‰é—®é¢˜è¢«æ ¹é™¤ã€‚</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0637a9d8eae94dc1b6cb60e155d84bed~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LSn5ouJ5ouJ5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767593934&amp;x-signature=pTaAhjcSRoypyq9QPbyN360%2FKf4%3D" alt="16.png" loading="lazy"/></p>
<h2 data-id="heading-25">äº”ã€æ€»ç»“</h2>
<p>ç¦»çº¿å¤§æ•°æ®è·¨äº‘è¿ç§»æ˜¯ä¸€é¡¹ç³»ç»Ÿæ€§å·¥ç¨‹ï¼Œä»å‰æœŸè§„åˆ’ã€æ•°æ®è¿ç§»åˆ°åæœŸéªŒè¯ï¼Œæ¯ä¸ªç¯èŠ‚éƒ½ç¯ç¯ç›¸æ‰£ã€ç¼ºä¸€ä¸å¯ã€‚æ•°æ®éªŒè¯ä½œä¸ºè¿ç§»é—­ç¯çš„æœ€åä¸€ç¯ï¼Œä¸ä»…æ˜¯å¯¹è¿ç§»ç»“æœçš„è´¨é‡æŠŠå…³ï¼Œæ›´æ˜¯å¯¹æ•´ä¸ªè¿ç§»ä½“ç³»çš„ä¿¡ä»»èƒŒä¹¦ã€‚é€šè¿‡ç§‘å­¦çš„éªŒè¯ç›®æ ‡è®¾å®šã€åˆç†çš„éªŒè¯ç­–ç•¥è®¾è®¡ä»¥åŠé«˜æ•ˆçš„å·¥å…·ä¸æµç¨‹è½åœ°ï¼Œæˆ‘ä»¬èƒ½å¤Ÿåœ¨ä¿éšœæ•°æ®å®Œæ•´æ€§ã€ä¸€è‡´æ€§ä¸å¯ç”¨æ€§çš„åŒæ—¶ï¼Œå¹³è¡¡æ€§èƒ½ä¸æˆæœ¬ï¼Œç¡®ä¿ä¸šåŠ¡å¹³ç¨³è¿‡æ¸¡ã€‚
åœ¨æœ¬æ¬¡è¿ç§»ä¸éªŒè¯è¿‡ç¨‹ä¸­ï¼Œæ¥è‡ªå¤šä¸ªå›¢é˜Ÿçš„åŒäº‹å…±åŒå‚ä¸äº†éªŒæ•°å·¥ä½œã€‚ä»–ä»¬åœ¨éªŒè¯æ–¹æ¡ˆè®¾è®¡ã€å·¥å…·å¼€å‘ã€æ•°æ®æ¯”å¯¹ã€é—®é¢˜å®šä½ä¸ä¿®å¤ç­‰ç¯èŠ‚ä¸­å¯†åˆ‡åä½œï¼Œç¡®ä¿äº†æ•´ä¸ªè¿ç§»è¿‡ç¨‹çš„é«˜æ•ˆä¸å¯é ã€‚æ­£æ˜¯è¿™ç§è·¨å›¢é˜Ÿçš„ååŒä¸ä¸“ä¸šæŠ•å…¥ï¼Œæ„ç­‘äº†æ•°æ®éªŒè¯å·¥ä½œçš„åšå®åº•åº§ï¼Œä¹Ÿä¸ºé¡¹ç›®çš„é¡ºåˆ©æ”¶å®˜æä¾›äº†æœ‰åŠ›ä¿éšœã€‚
åœ¨æ­¤ï¼Œä¹Ÿå‘æ‰€æœ‰å‚ä¸æœ¬æ¬¡è¿ç§»ä¸éªŒæ•°å·¥ä½œçš„å›¢é˜Ÿä¸åŒäº‹è‡´ä»¥è¯šæŒšçš„æ„Ÿè°¢â€”â€”æ­£æ˜¯å¤§å®¶çš„ä¸“ä¸šã€è€å¿ƒä¸åä½œï¼Œè®©å¤æ‚çš„è·¨äº‘è¿ç§»é¡¹ç›®å¾—ä»¥é«˜è´¨é‡è½åœ°ã€‚</p>
<p>ä½œè€…ç®€ä»‹ï¼š</p>
<ol>
<li>æ¨ç§‹å‰ï¼šå¤§æ•°æ®ä¸“å®¶ï¼Œè´Ÿè´£å¤§æ•°æ®ç¦»çº¿è®¡ç®—å¼•æ“ã€OLAPå¼•æ“çš„ç ”å‘ä¸ç»´æŠ¤</li>
<li>é™†æ¬¢å…¸ï¼šèµ„æ·±æ•°æ®ä»“åº“å·¥ç¨‹å¸ˆï¼Œè´§æ‹‰æ‹‰å…¬å…±æ•°æ®ç»„è´Ÿè´£äººï¼Œè‡´åŠ›äºå…¬å…±æ•°æ®å±‚çš„é¡¶å±‚è®¾è®¡ä¸ç»Ÿç­¹å»ºè®¾</li>
<li>é™ˆé“¨ï¼šé«˜çº§å¤§æ•°æ®å·¥ç¨‹å¸ˆï¼Œä¸“æ³¨äºå¤§æ•°æ®å­˜å‚¨æ–¹å‘ï¼Œä¸»è¦è´Ÿè´£å¤§æ•°æ®ç¦»çº¿å­˜å‚¨ã€å‘é‡å­˜å‚¨çš„ç ”å‘å’Œç»´æŠ¤</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Python æé€Ÿ 20%ï¼Œæ¥çœ‹çœ‹ Python 3.15 ä¸­çš„æ–°ç‰¹æ€§]]></title>    <link>https://juejin.cn/post/7588445306088226816</link>    <guid>https://juejin.cn/post/7588445306088226816</guid>    <pubDate>2025-12-29T00:43:27.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588445306088226816" data-draft-id="7588300640598917126" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Python æé€Ÿ 20%ï¼Œæ¥çœ‹çœ‹ Python 3.15 ä¸­çš„æ–°ç‰¹æ€§"/> <meta itemprop="keywords" content="Python"/> <meta itemprop="datePublished" content="2025-12-29T00:43:27.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="RockByte"/> <meta itemprop="url" content="https://juejin.cn/user/1046390797768519"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Python æé€Ÿ 20%ï¼Œæ¥çœ‹çœ‹ Python 3.15 ä¸­çš„æ–°ç‰¹æ€§
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1046390797768519/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    RockByte
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-29T00:43:27.000Z" title="Mon Dec 29 2025 00:43:27 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-29
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5f428e84a93a45e49e5a3aaabd8db155~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUm9ja0J5dGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767573807&amp;x-signature=bDk7%2FF%2Ba1Wbv5140GEezdO3v8dU%3D" alt="0.webp" loading="lazy"/></p>
<p>Python <code>3.15</code> å¼•å…¥äº†åŸç”Ÿçš„å³æ—¶ç¼–è¯‘å™¨ï¼ˆJITï¼‰ï¼Œåœ¨éƒ¨åˆ†åœºæ™¯ä¸‹å¯å¸¦æ¥ <strong>20% ç”šè‡³æ›´é«˜çš„æ€§èƒ½æå‡</strong>â€”â€”å°½ç®¡ç›®å‰å®ƒä»å¤„äºå®éªŒé˜¶æ®µã€‚</p>
<p>æ‰€è°“ JITï¼ˆJust-In-Time Compilationï¼Œå³æ—¶ç¼–è¯‘ï¼‰ï¼Œå°±æ˜¯è®©åŸæœ¬â€œè§£é‡Šæ‰§è¡Œâ€çš„ Python ä»£ç åœ¨è¿è¡Œæ—¶åŠ¨æ€ç¼–è¯‘æˆæœºå™¨ç ï¼Œä»è€Œæ˜¾è‘—æé€Ÿã€‚è¿‡å»ï¼Œè¿™ç±»èƒ½åŠ›åªèƒ½ä¾èµ–ç¬¬ä¸‰æ–¹æ–¹æ¡ˆï¼Œæ¯”å¦‚ <a href="https://link.juejin.cn?target=https%3A%2F%2Fnumba.pydata.org%2F" target="_blank" title="https://numba.pydata.org/" ref="nofollow noopener noreferrer">Numba</a> è¿™æ ·çš„åº“ï¼Œæˆ–è€…ä½¿ç”¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fpypy.org%2F" target="_blank" title="https://pypy.org/" ref="nofollow noopener noreferrer">PyPy</a> è¿™ç±»æ›¿ä»£æ€§ Python è§£é‡Šå™¨ã€‚</p>
<p>å¦‚ä»Šï¼ŒPython å®˜æ–¹ç»ˆäºæŠŠ JIT ç¼–è¯‘å™¨é›†æˆè¿›äº†ä¸»å¹²ã€‚è™½ç„¶æ—©æœŸç‰ˆæœ¬æ•ˆæœæœ‰é™ï¼Œä½†åˆ°äº† Python <code>3.15</code>ï¼ˆå½“å‰ä»å¤„äº alpha é˜¶æ®µï¼Œå°šæœªæ­£å¼å‘å¸ƒï¼‰ï¼Œæ ¸å¿ƒå¼€å‘å›¢é˜Ÿåšäº†å¤§é‡ä¼˜åŒ–ï¼Œä½¿å¾— JIT åœ¨æŸäº›è®¡ç®—å¯†é›†å‹ä»»åŠ¡ä¸­å·²ç»èƒ½å¸¦æ¥å¯è§‚çš„åŠ é€Ÿã€‚</p>
<p>å½“ç„¶ï¼ŒJIT çš„æé€Ÿæ•ˆæœå›  workload è€Œå¼‚ï¼šæœ‰äº›ç¨‹åºé£å¿«ï¼Œæœ‰äº›åˆ™å‡ ä¹æ²¡å˜åŒ–ã€‚ä¸è¿‡å¥½æ¶ˆæ¯æ˜¯ï¼Œç°åœ¨çš„ JIT å·²ç»è¶³å¤Ÿç¨³å®šï¼Œå¼€å‘è€…å®Œå…¨å¯ä»¥æ‹¿æ¥è¯•è¯•æ°´ï¼Œç”šè‡³åœ¨å¯æ§ç¯å¢ƒä¸‹ç”¨äºç”Ÿäº§æµ‹è¯•ã€‚</p>
<h2 data-id="heading-0">å¦‚ä½•å¯ç”¨ Python JITï¼Ÿ</h2>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒPython çš„åŸç”Ÿ JIT æ˜¯<strong>å…³é—­</strong>çš„ï¼Œæ¯•ç«Ÿå®ƒè¿˜æ˜¯ä¸ªå®éªŒæ€§åŠŸèƒ½ï¼Œéœ€è¦æ‰‹åŠ¨å¼€å¯ã€‚</p>
<p>å¯ç”¨æ–¹å¼å¾ˆç®€å•ï¼šè®¾ç½®ç¯å¢ƒå˜é‡ <code>PYTHON_JIT=1</code>ã€‚ä½ å¯ä»¥ï¼š</p>
<ul>
<li>
<p>ä¸´æ—¶åœ¨å½“å‰ shell ä¼šè¯ä¸­è®¾ç½®ï¼š</p>
<pre><code class="hljs language-sh" lang="sh"><span class="hljs-built_in">export</span> PYTHON_JIT=1
python your_script.py
</code></pre>
</li>
<li>
<p>æˆ–è€…ç›´æ¥åœ¨å‘½ä»¤è¡Œå‰ç¼€å¯åŠ¨ï¼š</p>
<pre><code class="hljs language-sh" lang="sh">PYTHON_JIT=1 python your_script.py
</code></pre>
</li>
</ul>
<p>Python å¯åŠ¨æ—¶ä¼šæ£€æŸ¥ <code>PYTHON_JIT</code> ç¯å¢ƒå˜é‡ï¼šåªè¦å€¼ä¸º <code>1</code>ï¼ŒJIT å°±ä¼šè¢«æ¿€æ´»ï¼›å¦åˆ™ä¿æŒå…³é—­ã€‚</p>
<p>è™½ç„¶ä½ å¯ä»¥æŠŠ <code>PYTHON_JIT=1</code> å†™è¿›ç³»ç»Ÿç¯å¢ƒå˜é‡é•¿æœŸç”Ÿæ•ˆï¼Œä½†æ›´æ¨èæŒ‰éœ€å¯ç”¨â€”â€”æ¯”å¦‚åªåœ¨è·‘æ€§èƒ½æ•æ„Ÿä»»åŠ¡æ—¶ä¸´æ—¶æ‰“å¼€ï¼Œé¿å…å¯¹å…¶ä»–è„šæœ¬äº§ç”Ÿæ„å¤–å½±å“ã€‚</p>
<h2 data-id="heading-1">å¦‚ä½•ç¡®è®¤ JIT æ˜¯å¦ç”Ÿæ•ˆï¼Ÿ</h2>
<p>ä» Python 3.13 å¼€å§‹ï¼Œæ ‡å‡†åº“çš„ <code>sys</code> æ¨¡å—æ–°å¢äº†ä¸€ä¸ªå†…éƒ¨å‘½åç©ºé—´ï¼š<code>sys._jit</code>ã€‚å®ƒæä¾›äº†ä¸‰ä¸ªå®ç”¨å‡½æ•°ï¼Œè¿”å›å€¼éƒ½æ˜¯ <code>True</code> æˆ– <code>False</code>ï¼š</p>
<ul>
<li><code>sys._jit.is_available()</code>ï¼šåˆ¤æ–­å½“å‰ Python æ„å»ºæ˜¯å¦<strong>æ”¯æŒ</strong> JITã€‚å®˜æ–¹å‘å¸ƒçš„å¤§å¤šæ•°äºŒè¿›åˆ¶åŒ…éƒ½åŒ…å« JIT æ”¯æŒï¼Œä½†åƒâ€œæ— çº¿ç¨‹â€ï¼ˆfreethreadingï¼‰æˆ–â€œæ—  GILâ€ç­‰ç‰¹æ®Šæ„å»ºå¯èƒ½ä¸åŒ…å«ã€‚</li>
<li><code>sys._jit.is_enabled()</code>ï¼šæ£€æŸ¥ JIT æ˜¯å¦<strong>å·²å¯ç”¨</strong>ã€‚æ³¨æ„ï¼Œè¿™ä»…è¡¨ç¤º JIT åŠŸèƒ½æ‰“å¼€äº†ï¼Œå¹¶ä¸ä»£è¡¨ä½ çš„ä»£ç å·²ç»è¢«ç¼–è¯‘ã€‚</li>
<li><code>sys._jit.is_active()</code>ï¼šå°è¯•åˆ¤æ–­å½“å‰æ ˆé¡¶å¸§æ˜¯å¦æ­£åœ¨æ‰§è¡Œ JIT ç¼–è¯‘åçš„ä»£ç ã€‚<strong>ä½†è¿™ä¸ªæ¥å£ä¸å¤ªå¯é </strong>â€”â€”ä½ çš„ç¨‹åºå¯èƒ½ä¸å°å¿ƒè¿›å…¥äº†â€œå†·è·¯å¾„â€ï¼ˆå³æœªè¢« JIT ä¼˜åŒ–çš„ä»£ç åˆ†æ”¯ï¼‰ã€‚å› æ­¤ï¼Œæœ€é è°±çš„æ–¹å¼è¿˜æ˜¯é€šè¿‡<strong>å®é™…æ€§èƒ½å¯¹æ¯”</strong>æ¥éªŒè¯æ•ˆæœã€‚</li>
</ul>
<p>æ—¥å¸¸ä½¿ç”¨ä¸­ï¼Œ<code>sys._jit.is_enabled()</code> æ˜¯æœ€æœ‰ç”¨çš„ï¼Œèƒ½å¿«é€Ÿç¡®è®¤ JIT æ˜¯å¦å·²æˆåŠŸå¼€å¯ã€‚</p>
<h2 data-id="heading-2">JIT åŠ é€Ÿæ•ˆæœå®æµ‹ï¼šå“ªäº›ä»£ç èƒ½å—ç›Šï¼Ÿ</h2>
<p>ç”±äº JIT ä»å¤„äºæ—©æœŸé˜¶æ®µï¼Œç›®å‰<strong>æ²¡æœ‰å…¬å¼€ API èƒ½å‘Šè¯‰ä½ å“ªæ®µå‡½æ•°è¢«ç¼–è¯‘äº†</strong>ï¼Œä¹Ÿæ— æ³•ç›´æ¥æŸ¥çœ‹ä¼˜åŒ–çŠ¶æ€ã€‚å”¯ä¸€é è°±çš„æ–¹æ³•å°±æ˜¯å†™ benchmarkï¼Œå¯¹æ¯”å¼€å¯/å…³é—­ JIT æ—¶çš„è¿è¡Œæ—¶é—´ã€‚</p>
<h3 data-id="heading-3">âœ… æ­£é¢æ¡ˆä¾‹ï¼šMandelbrot åˆ†å½¢è®¡ç®—</h3>
<p>ä¸‹é¢è¿™æ®µä»£ç å®ç°äº†ä¸€ä¸ªç®€åŒ–ç‰ˆçš„ Mandelbrot é›†åˆæ¸²æŸ“ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> time <span class="hljs-keyword">import</span> perf_counter
<span class="hljs-keyword">import</span> sys

<span class="hljs-built_in">print</span>(<span class="hljs-string">"JIT enabled:"</span>, sys._jit.is_enabled())

WIDTH = <span class="hljs-number">80</span>
HEIGHT = <span class="hljs-number">40</span>
X_MIN, X_MAX = -<span class="hljs-number">2.0</span>, <span class="hljs-number">1.0</span>
Y_MIN, Y_MAX = -<span class="hljs-number">1.0</span>, <span class="hljs-number">1.0</span>
ITERS = <span class="hljs-number">500</span>

YM = (Y_MAX - Y_MIN)
XM = (X_MAX - X_MIN)

<span class="hljs-keyword">def</span> <span class="hljs-title function_">iter_</span>(<span class="hljs-params">c</span>):
    z = <span class="hljs-number">0j</span>
    <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(ITERS):
        <span class="hljs-keyword">if</span> <span class="hljs-built_in">abs</span>(z) &gt; <span class="hljs-number">2.0</span>:
            <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span>
        z = z ** <span class="hljs-number">2</span> + c
    <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span>

<span class="hljs-keyword">def</span> <span class="hljs-title function_">generate</span>():
    start = perf_counter()
    output = []

    <span class="hljs-keyword">for</span> y <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(HEIGHT):
        cy = Y_MIN + (y / HEIGHT) * YM
        <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(WIDTH):
            cx = X_MIN + (x / WIDTH) * XM
            c = <span class="hljs-built_in">complex</span>(cx, cy)
            output.append(<span class="hljs-string">"*"</span> <span class="hljs-keyword">if</span> iter_(c) <span class="hljs-keyword">else</span> <span class="hljs-string">"."</span>)
        output.append(<span class="hljs-string">"\n"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"Time:"</span>, perf_counter() - start)
    <span class="hljs-keyword">return</span> output

<span class="hljs-built_in">print</span>(<span class="hljs-string">""</span>.join(generate()))
</code></pre>
<p>è¿è¡Œåï¼Œç¨‹åºä¼šå…ˆæ‰“å° JIT çŠ¶æ€ï¼Œå†è¾“å‡º ASCII åˆ†å½¢å›¾å’Œè€—æ—¶ã€‚</p>
<p>å®æµ‹å‘ç°ï¼š<strong>å¼€å¯ JIT åï¼Œè¿è¡Œæ—¶é—´ç¨³å®šå‡å°‘çº¦ 20%</strong> ã€‚å¦‚æœä½ æ„Ÿè§‰æé€Ÿä¸æ˜æ˜¾ï¼Œå¯ä»¥è¯•ç€è°ƒé«˜ <code>ITERS</code>ï¼ˆæ¯”å¦‚è®¾ä¸º 2000ï¼‰ï¼Œè®©è®¡ç®—é‡æ›´å¤§ï¼ŒåŠ é€Ÿæ•ˆæœå°±ä¼šæ›´çªå‡ºã€‚</p>
<h3 data-id="heading-4">âŒ åé¢æ¡ˆä¾‹ï¼šé€’å½’æ–æ³¢é‚£å¥‘</h3>
<p>å†çœ‹ä¸€ä¸ªåä¾‹â€”â€”ç»å…¸çš„é€’å½’æ–æ³¢é‚£å¥‘å®ç°ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> sys
<span class="hljs-built_in">print</span>(<span class="hljs-string">"JIT enabled:"</span>, sys._jit.is_enabled())
<span class="hljs-keyword">from</span> time <span class="hljs-keyword">import</span> perf_counter

<span class="hljs-keyword">def</span> <span class="hljs-title function_">fib</span>(<span class="hljs-params">n</span>):
    <span class="hljs-keyword">if</span> n &lt;= <span class="hljs-number">1</span>:
        <span class="hljs-keyword">return</span> n
    <span class="hljs-keyword">return</span> fib(n-<span class="hljs-number">1</span>) + fib(n-<span class="hljs-number">2</span>)

<span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>():
    start = perf_counter()
    result = fib(<span class="hljs-number">36</span>)
    <span class="hljs-built_in">print</span>(perf_counter() - start)

main()
</code></pre>
<p>æˆªè‡³ Python <code>3.15a3</code>ï¼Œ<strong>JIT å¯¹è¿™æ®µä»£ç å‡ ä¹æ²¡æœ‰åŠ é€Ÿæ•ˆæœ</strong>ã€‚</p>
<p>ä½ å¯èƒ½ä¼šæƒ³ï¼šâ€œæ˜¯ä¸æ˜¯å› ä¸ºé€’å½’å¤ªæ·±ï¼ŒJIT ä¸æ“…é•¿å¤„ç†ï¼Ÿâ€ä½†å®æµ‹è¡¨æ˜ï¼Œå³ä½¿æ”¹æˆå¾ªç¯ç‰ˆæœ¬ï¼Œæ€§èƒ½æå‡ä¾ç„¶å¾®ä¹å…¶å¾®ã€‚è¿™è¯´æ˜å½“å‰ JIT çš„ä¼˜åŒ–ç­–ç•¥å¯¹è¿™ç±»ç®—æ³•<strong>å°šæœªè¦†ç›–</strong>ï¼Œæˆ–è€…è§¦å‘æ¡ä»¶ä¸æ»¡è¶³ã€‚</p>
<h2 data-id="heading-5">ä½¿ç”¨å»ºè®®ï¼šè°¨æ…å°é²œï¼Œåˆ‡å‹¿å†’è¿›</h2>
<p>è™½ç„¶ JIT å¾ˆæœ‰æ½œåŠ›ï¼Œä½†å®ƒä»æ˜¯å®éªŒæ€§åŠŸèƒ½ã€‚å¯¹å¾…å®ƒçš„æ€åº¦ï¼Œåº”è¯¥å’Œâ€œæ— çº¿ç¨‹æ„å»ºâ€æˆ–â€œæ—  GIL æ¨¡å¼â€ä¸€æ ·ï¼š<strong>å¯ä»¥æµ‹è¯•ï¼Œä½†åˆ«æ€¥ç€ä¸Šç”Ÿäº§</strong>ã€‚</p>
<p>ä½ å¯ä»¥ï¼š</p>
<ul>
<li>åœ¨è‡ªå·±çš„é¡¹ç›®ä¸­å¼€å¯ JITï¼Œçœ‹çœ‹ç‰¹å®š workload æ˜¯å¦å—ç›Šï¼›</li>
<li>ç»“åˆ <code>perf_counter()</code> åš A/B æµ‹è¯•ï¼Œé‡åŒ–å®é™…æ”¶ç›Šï¼›</li>
<li>å…³æ³¨åç»­ Python ç‰ˆæœ¬çš„ JIT æ”¹è¿›ã€‚</li>
</ul>
<p>ä½†åŠ¡å¿…æ³¨æ„ï¼š<strong>JIT çš„è¡Œä¸ºåœ¨æœªæ¥ç‰ˆæœ¬ä¸­å¯èƒ½å‘ç”Ÿå˜åŒ–</strong>ã€‚ä»Šå¤©è·‘å¾—å¿«çš„ä»£ç ï¼Œæ˜å¤©å¯èƒ½å˜æ…¢ï¼›åä¹‹äº¦ç„¶ã€‚ç¨³å®šæ€§å°šæ— æ³•ä¿è¯ã€‚</p>
<h2 data-id="heading-6">æ€»ç»“</h2>
<p>Python åŸç”Ÿ JIT è™½ç„¶è¿˜åœ¨è¥è¤“ä¹‹ä¸­ï¼Œä½†å·²ç»å±•ç°å‡ºä»¤äººæœŸå¾…çš„æ½œåŠ›ã€‚éšç€ <code>3.15</code> åŠåç»­ç‰ˆæœ¬çš„æ¼”è¿›ï¼Œæˆ‘ä»¬æœ‰æœ›çœ‹åˆ°æ›´æ™ºèƒ½çš„ç¼–è¯‘ç­–ç•¥ã€æ›´å¹¿çš„é€‚ç”¨åœºæ™¯ï¼Œä»¥åŠçœŸæ­£â€œå¼€ç®±å³ç”¨â€çš„ Python æ€§èƒ½é£è·ƒã€‚ç°åœ¨ï¼Œæ­£æ˜¯å‚ä¸æµ‹è¯•ã€åé¦ˆé—®é¢˜çš„å¥½æ—¶æœºã€‚</p>
<blockquote>
<p>åŸæ–‡<br/>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.infoworld.com%2Farticle%2F4110565%2Fget-started-with-pythons-new-native-jit.html" target="_blank" title="https://www.infoworld.com/article/4110565/get-started-with-pythons-new-native-jit.html" ref="nofollow noopener noreferrer">www.infoworld.com/article/411â€¦</a></p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸å†è´¹è„‘, å†™ç»™ AI çˆ±å¥½è€…çš„çŸ©é˜µ (Matrix) å…¥é—¨æŒ‡å—]]></title>    <link>https://juejin.cn/post/7588109656042651694</link>    <guid>https://juejin.cn/post/7588109656042651694</guid>    <pubDate>2025-12-29T00:39:17.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588109656042651694" data-draft-id="7588104741610291210" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸å†è´¹è„‘, å†™ç»™ AI çˆ±å¥½è€…çš„çŸ©é˜µ (Matrix) å…¥é—¨æŒ‡å—"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½,AIGC,LLM"/> <meta itemprop="datePublished" content="2025-12-29T00:39:17.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å°åˆ»å›"/> <meta itemprop="url" content="https://juejin.cn/user/572216818014568"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸å†è´¹è„‘, å†™ç»™ AI çˆ±å¥½è€…çš„çŸ©é˜µ (Matrix) å…¥é—¨æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/572216818014568/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å°åˆ»å›
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-29T00:39:17.000Z" title="Mon Dec 29 2025 00:39:17 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-29
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¤§å®¶å¥½, æˆ‘æ˜¯å°åˆ»å›. ä»Šå¤©æˆ‘ä»¬æ¥èŠ <strong>çŸ©é˜µ (matrix)</strong>.</p>
<p>çŸ©é˜µæ˜¯ AI èƒŒåçš„æ•°å­¦å·¥å…·, å›¾åƒè¯†åˆ«æ—¶ä¼šç”¨åˆ°å®ƒ, åŒç±»æ¨èæ—¶ä¼šç”¨åˆ°å®ƒ, å¤§æ¨¡å‹è®­ç»ƒä¹Ÿä¼šç”¨åˆ°å®ƒ. å®ƒè®© AI èƒ½å¤Ÿæ‰¹é‡å¤„ç†æ•°æ®. å¦‚æœæˆ‘ä»¬æƒ³äº†è§£ AI åŸç†, äº†è§£çŸ©é˜µå¾ˆæœ‰å¿…è¦.</p>
<p>è¿™ç¯‡æ–‡ç« , æˆ‘ä¼šä»¥å‘é‡ä¸ºåŸºç¡€, å¼•å‡º <strong>çŸ©é˜µ</strong> çš„æ¦‚å¿µ, ä»‹ç»çŸ©é˜µçš„ä¸¤ç§ç†è§£æ–¹å¼, ä»¥åŠæœ€å¸¸ç”¨çš„å››ç§æ ¸å¿ƒè¿ç®—.</p>
<blockquote>
<p>ä¸ç†Ÿæ‚‰å‘é‡ç›¸å…³æ¦‚å¿µ? å¯ä»¥çœ‹æˆ‘çš„æ–‡ç« : <a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FThGXnwta1kFgbpqlKozO3A" target="_blank" title="https://mp.weixin.qq.com/s/ThGXnwta1kFgbpqlKozO3A" ref="nofollow noopener noreferrer">ä¸å†è´¹è„‘ï¼Œå†™ç»™ AI çˆ±å¥½è€…çš„å‘é‡ (Vector) å…¥é—¨è¯¾</a></p>
</blockquote>
<h2 data-id="heading-0">çŸ©é˜µçš„ä¸¤ç§ç†è§£æ–¹å¼</h2>
<h3 data-id="heading-1">1. ç»™è‹¹æœæ‰“åˆ†: çŸ©é˜µæ˜¯å¤šä¸ªå‘é‡çš„ç»„åˆ</h3>
<p>å‡è®¾ä½ æ˜¯ä¸€å®¶æ°´æœåº—çš„è€æ¿, æƒ³çŸ¥é“ä¸€æ¬¾è‹¹æœåœ¨å¤§ä¼—å¿ƒä¸­çš„è®¤å¯åº¦, äºæ˜¯ä½ æ‰¾æ¥äº† 3 ä¸ªå‘˜å·¥å°å°, å°åˆ», å°å›, è®©ä»–ä»¬æ ¹æ®è‡ªå·±çš„åå¥½ç»™è¿™æ¬¾è‹¹æœæ‰“åˆ† (åˆ†æ•°æ— ä¸Šé™)</p>
<p>æ¯ä¸ªäººçš„åå¥½éƒ½å¯ä»¥ç”¨ä¸€ä¸ªå‘é‡è¡¨ç¤º, æ‰“åˆ†è¿‡ç¨‹å°±æ˜¯åå¥½å‘é‡ä¸è‹¹æœç‰¹å¾å‘é‡çš„è®¡ç®—</p>
<ul>
<li>
<p>å°å°æ˜¯ "é¢œå€¼å…š", ä»–æŒ‘é€‰è‹¹æœåªçœ‹é‡é¢œè‰², å®Œå…¨ä¸åœ¨ä¹ç”œä¸ç”œã€è„†ä¸è„†, ä»–çš„åå¥½å‘é‡æ˜¯ (10, 0, 0). æ‰“åˆ†ç»“æœæ˜¯:</p>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mn>10</mn><mo>Ã—</mo><mn>0.9</mn><mo stretchy="false">)</mo><mo>+</mo><mo stretchy="false">(</mo><mn>0</mn><mo>Ã—</mo><mn>5</mn><mo stretchy="false">)</mo><mo>+</mo><mo stretchy="false">(</mo><mn>0</mn><mo>Ã—</mo><mn>8</mn><mo stretchy="false">)</mo><mo>=</mo><mn>9</mn></mrow><annotation encoding="application/x-tex">(10 \times 0.9) + (0 \times 5) + (0 \times 8) = 9</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mopen">(</span><span class="mord">10</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord">0.9</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mopen">(</span><span class="mord">0</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord">5</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mopen">(</span><span class="mord">0</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord">8</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">9</span></span></span></span></span></p>
</li>
<li>
<p>å°åˆ»æ˜¯ "å£å‘³å…š", ä»–å®Œå…¨ä¸åœ¨ä¹é¢œè‰², å–œæ¬¢ç”œå£ä½†è®¨åŒè„†æ„Ÿ, ä»–çš„åå¥½å‘é‡æ˜¯ (0, 2, -1). æ‰“åˆ†ç»“æœæ˜¯:</p>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mn>0</mn><mo>Ã—</mo><mn>0.9</mn><mo stretchy="false">)</mo><mo>+</mo><mo stretchy="false">(</mo><mn>2</mn><mo>Ã—</mo><mn>5</mn><mo stretchy="false">)</mo><mo>+</mo><mo stretchy="false">(</mo><mo>âˆ’</mo><mn>1</mn><mo>Ã—</mo><mn>8</mn><mo stretchy="false">)</mo><mo>=</mo><mn>2</mn></mrow><annotation encoding="application/x-tex">(0 \times 0.9) + (2 \times 5) + (-1 \times 8) = 2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mopen">(</span><span class="mord">0</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord">0.9</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mopen">(</span><span class="mord">2</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord">5</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mopen">(</span><span class="mord">âˆ’</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord">8</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">2</span></span></span></span></span></p>
</li>
<li>
<p>å°å›æ˜¯ "ç»¼åˆå…š", ä»–å…¼é¡¾é¢œè‰², ç”œåº¦å’Œè„†åº¦, ä»–çš„åå¥½å‘é‡æ˜¯ (1, 1, 1). æ‰“åˆ†è§£æœæ˜¯:</p>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mn>1</mn><mo>Ã—</mo><mn>0.9</mn><mo stretchy="false">)</mo><mo>+</mo><mo stretchy="false">(</mo><mn>1</mn><mo>Ã—</mo><mn>5</mn><mo stretchy="false">)</mo><mo>+</mo><mo stretchy="false">(</mo><mn>1</mn><mo>Ã—</mo><mn>8</mn><mo stretchy="false">)</mo><mo>=</mo><mn>13.9</mn></mrow><annotation encoding="application/x-tex">(1 \times 0.9 ) + (1 \times 5) + (1 \times 8) = 13.9</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord">0.9</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord">5</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord">8</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">13.9</span></span></span></span></span></p>
</li>
</ul>
<p>ä¸ºäº†ç®€åŒ–è®°å½•, æˆ‘ä»¬å¯ä»¥æŠŠ3ä½å‘˜å·¥çš„åå¥½å‘é‡ "ä¸€æ’æ’å èµ·æ¥" ç»„æˆä¸€ä¸ªçŸ©é˜µ A, æŠŠè‹¹æœçš„ç‰¹å¾å‘é‡ "ç«–èµ·æ¥" å†™æˆå‘é‡ x, æœ€ç»ˆçš„æ‰“åˆ†ç»“æœä¹Ÿç«–èµ·æ¥å†™æˆå‘é‡ b. è¿™æ ·å°±æœ‰äº†ä¸‹é¢çš„å¼å­:</p>
<div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mrow><mo fence="true">[</mo><mtable rowspacing="0.16em" columnalign="center center center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>10</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>2</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo>âˆ’</mo><mn>1</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><mo>â‹…</mo><mrow><mo fence="true">[</mo><mtable rowspacing="0.16em" columnalign="center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0.9</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>5</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>8</mn></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><mo>=</mo><mrow><mo fence="true">[</mo><mtable rowspacing="0.16em" columnalign="center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>9</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>2</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>13.9</mn></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow></mrow><annotation encoding="application/x-tex">\begin{bmatrix}
10 &amp; 0 &amp; 0 \\
0 &amp; 2 &amp; -1 \\
1 &amp; 1 &amp; 1
\end{bmatrix}\cdot\begin{bmatrix}
0.9 \\
5 \\
8\end{bmatrix}=\begin{bmatrix}
9 \\
2 \\
13.9
\end{bmatrix}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:3.6em;vertical-align:-1.55em;"/><span class="minner"><span class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.05em;"><span class="pstrut" style="height:5.6em;"/><span style="width:0.667em;height:3.600em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.667em" height="3.600em" viewbox="0 0 667 3600"><path d="M403 1759 V84 H666 V0 H319 V1759 v0 v1759 h347 v-84&#10;H403z M403 1759 V0 H319 V1759 v0 v1759 h84z"/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">10</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">0</span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span><span class="arraycolsep" style="width:0.5em;"/><span class="arraycolsep" style="width:0.5em;"/><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">0</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">2</span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span><span class="arraycolsep" style="width:0.5em;"/><span class="arraycolsep" style="width:0.5em;"/><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">0</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">âˆ’</span><span class="mord">1</span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span></span></span><span class="mclose"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.05em;"><span class="pstrut" style="height:5.6em;"/><span style="width:0.667em;height:3.600em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.667em" height="3.600em" viewbox="0 0 667 3600"><path d="M347 1759 V0 H0 V84 H263 V1759 v0 v1759 H0 v84 H347z&#10;M347 1759 V0 H263 V1759 v0 v1759 h84z"/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:3.6em;vertical-align:-1.55em;"/><span class="minner"><span class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.05em;"><span class="pstrut" style="height:5.6em;"/><span style="width:0.667em;height:3.600em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.667em" height="3.600em" viewbox="0 0 667 3600"><path d="M403 1759 V84 H666 V0 H319 V1759 v0 v1759 h347 v-84&#10;H403z M403 1759 V0 H319 V1759 v0 v1759 h84z"/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">0.9</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">5</span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">8</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span></span></span><span class="mclose"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.05em;"><span class="pstrut" style="height:5.6em;"/><span style="width:0.667em;height:3.600em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.667em" height="3.600em" viewbox="0 0 667 3600"><path d="M347 1759 V0 H0 V84 H263 V1759 v0 v1759 H0 v84 H347z&#10;M347 1759 V0 H263 V1759 v0 v1759 h84z"/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:3.6em;vertical-align:-1.55em;"/><span class="minner"><span class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.05em;"><span class="pstrut" style="height:5.6em;"/><span style="width:0.667em;height:3.600em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.667em" height="3.600em" viewbox="0 0 667 3600"><path d="M403 1759 V84 H666 V0 H319 V1759 v0 v1759 h347 v-84&#10;H403z M403 1759 V0 H319 V1759 v0 v1759 h84z"/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">9</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">2</span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">13.9</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span></span></span><span class="mclose"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.05em;"><span class="pstrut" style="height:5.6em;"/><span style="width:0.667em;height:3.600em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.667em" height="3.600em" viewbox="0 0 667 3600"><path d="M347 1759 V0 H0 V84 H263 V1759 v0 v1759 H0 v84 H347z&#10;M347 1759 V0 H263 V1759 v0 v1759 h84z"/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span></span></span></span></span></span></span></div>
<p>ç®€å†™ä¸º</p>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi><mi>x</mi><mo>=</mo><mi>b</mi></mrow><annotation encoding="application/x-tex">A x = b</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord mathnormal">A</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6944em;"/><span class="mord mathnormal">b</span></span></span></span></span></p>
<p>è¿™å°±æ˜¯çŸ©é˜µçš„ç¬¬ä¸€ç§ç†è§£: <strong>çŸ©é˜µæ˜¯å¤šä¸ªå‘é‡çš„ç»„åˆ</strong>ã€‚å®ƒèƒ½å¸®æˆ‘ä»¬ä¸€æ¬¡æ€§å®Œæˆå¤šç»„è§„åˆ™ç›¸åŒçš„è®¡ç®—, ä¸ç”¨é€ä¸ªå•ç‹¬è¿ç®—.</p>
<h3 data-id="heading-2">2. åæ¨è‹¹æœç‰¹å¾: çŸ©é˜µæ˜¯æ–¹ç¨‹ç»„çš„ç³»æ•°</h3>
<p>åŒæ ·ä»¥æ°´æœåº—ä¸ºä¾‹ï¼Œè¿™æ¬¡æˆ‘ä»¬æ¢ä¸ªåœºæ™¯: ä½ ä¸çŸ¥é“è‹¹æœçš„å…·ä½“ç‰¹å¾ï¼ˆé¢œè‰²ã€ç”œåº¦ã€è„†åº¦éƒ½æ˜¯æœªçŸ¥çš„ï¼‰ï¼Œä½†ä½ æ‰‹å¤´æœ‰ 3 ä½å‘˜å·¥çš„æ‰“åˆ†ç»“æœï¼Œä»¥åŠä»–ä»¬çš„è¯„åˆ†æ ‡å‡†. ç°åœ¨ä½ æƒ³åæ¨è¿™ä¸ªè‹¹æœçš„å…·ä½“ç‰¹å¾, åº”è¯¥æ€ä¹ˆåŠå‘¢?</p>
<p>æˆ‘ä»¬å‡è®¾é¢œè‰²ã€ç”œåº¦ã€è„†åº¦ä¸º x1, x2, x3, æ ¹æ®ä¹‹å‰è¯„åˆ†è§„åˆ™, å°±å¯ä»¥åˆ—å‡ºä¸€ç»„æ–¹ç¨‹:</p>
<div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mo fence="true">{</mo><mtable rowspacing="0.36em" columnalign="left left" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mn>10</mn><msub><mi>x</mi><mn>1</mn></msub><mo>+</mo><mn>0</mn><msub><mi>x</mi><mn>2</mn></msub><mo>+</mo><mn>0</mn><msub><mi>x</mi><mn>3</mn></msub></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo>=</mo><mn>9</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mn>0</mn><msub><mi>x</mi><mn>1</mn></msub><mo>+</mo><mn>2</mn><msub><mi>x</mi><mn>2</mn></msub><mo>âˆ’</mo><mn>1</mn><msub><mi>x</mi><mn>3</mn></msub></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo>=</mo><mn>2</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mn>1</mn><msub><mi>x</mi><mn>1</mn></msub><mo>+</mo><mn>1</mn><msub><mi>x</mi><mn>2</mn></msub><mo>+</mo><mn>1</mn><msub><mi>x</mi><mn>3</mn></msub></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo>=</mo><mn>13.9</mn></mrow></mstyle></mtd></mtr></mtable></mrow><annotation encoding="application/x-tex">\begin{cases}
10x_1 + 0x_2 + 0x_3 &amp;= 9 \\
0x_1 + 2x_2 - 1x_3 &amp;= 2 \\
1x_1 + 1x_2 + 1x_3 &amp;= 13.9
\end{cases}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:4.32em;vertical-align:-1.91em;"/><span class="minner"><span class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.35em;"><span style="top:-2.2em;"><span class="pstrut" style="height:3.15em;"/><span class="delimsizinginner delim-size4"><span>â©</span></span></span><span style="top:-2.192em;"><span class="pstrut" style="height:3.15em;"/><span style="height:0.316em;width:0.8889em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.8889em" height="0.316em" style="width:0.8889em" viewbox="0 0 888.89 316" preserveaspectratio="xMinYMin"><path d="M384 0 H504 V316 H384z M384 0 H504 V316 H384z"/></svg></span></span><span style="top:-3.15em;"><span class="pstrut" style="height:3.15em;"/><span class="delimsizinginner delim-size4"><span>â¨</span></span></span><span style="top:-4.292em;"><span class="pstrut" style="height:3.15em;"/><span style="height:0.316em;width:0.8889em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.8889em" height="0.316em" style="width:0.8889em" viewbox="0 0 888.89 316" preserveaspectratio="xMinYMin"><path d="M384 0 H504 V316 H384z M384 0 H504 V316 H384z"/></svg></span></span><span style="top:-4.6em;"><span class="pstrut" style="height:3.15em;"/><span class="delimsizinginner delim-size4"><span>â§</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.85em;"><span/></span></span></span></span></span><span class="mord"><span class="mtable"><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.41em;"><span style="top:-4.41em;"><span class="pstrut" style="height:3.008em;"/><span class="mord"><span class="mord">10</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mord">0</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mord">0</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span><span style="top:-2.97em;"><span class="pstrut" style="height:3.008em;"/><span class="mord"><span class="mord">0</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mord">2</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mord">1</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span><span style="top:-1.53em;"><span class="pstrut" style="height:3.008em;"/><span class="mord"><span class="mord">1</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mord">1</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mord">1</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.91em;"><span/></span></span></span></span><span class="arraycolsep" style="width:1em;"/><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.41em;"><span style="top:-4.41em;"><span class="pstrut" style="height:3.008em;"/><span class="mord"><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mord">9</span></span></span><span style="top:-2.97em;"><span class="pstrut" style="height:3.008em;"/><span class="mord"><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mord">2</span></span></span><span style="top:-1.53em;"><span class="pstrut" style="height:3.008em;"/><span class="mord"><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mord">13.9</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.91em;"><span/></span></span></span></span></span></span><span class="mclose nulldelimiter"/></span></span></span></span></span></div>
<p>ä¸éš¾å‘ç°, å¦‚æœæˆ‘ä»¬æŠŠ x1, x2, x3 çš„å‰é¢çš„ç³»æ•°æå–å‡ºæ¥, å®ƒæ°å¥½å°±æ˜¯ä¸€ä¸ªçŸ©é˜µ:</p>
<div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mo fence="true">[</mo><mtable rowspacing="0.16em" columnalign="center center center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>10</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>2</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo>âˆ’</mo><mn>1</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><annotation encoding="application/x-tex">\begin{bmatrix}
10 &amp; 0 &amp; 0 \\
0 &amp; 2 &amp; -1 \\
1 &amp; 1 &amp; 1
\end{bmatrix}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:3.6em;vertical-align:-1.55em;"/><span class="minner"><span class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.05em;"><span class="pstrut" style="height:5.6em;"/><span style="width:0.667em;height:3.600em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.667em" height="3.600em" viewbox="0 0 667 3600"><path d="M403 1759 V84 H666 V0 H319 V1759 v0 v1759 h347 v-84&#10;H403z M403 1759 V0 H319 V1759 v0 v1759 h84z"/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">10</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">0</span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span><span class="arraycolsep" style="width:0.5em;"/><span class="arraycolsep" style="width:0.5em;"/><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">0</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">2</span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span><span class="arraycolsep" style="width:0.5em;"/><span class="arraycolsep" style="width:0.5em;"/><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">0</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">âˆ’</span><span class="mord">1</span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span></span></span><span class="mclose"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.05em;"><span class="pstrut" style="height:5.6em;"/><span style="width:0.667em;height:3.600em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.667em" height="3.600em" viewbox="0 0 667 3600"><path d="M347 1759 V0 H0 V84 H263 V1759 v0 v1759 H0 v84 H347z&#10;M347 1759 V0 H263 V1759 v0 v1759 h84z"/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span></span></span></span></span></span></span></div>
<p>å› æ­¤, ä¸Šé¢çš„æ–¹ç¨‹ç»„å¯ä»¥ç®€å†™ä¸ºçŸ©é˜µå½¢å¼:</p>
<div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mrow><mo fence="true">[</mo><mtable rowspacing="0.16em" columnalign="center center center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>10</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>2</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo>âˆ’</mo><mn>1</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><mo>â‹…</mo><mrow><mo fence="true">[</mo><mtable rowspacing="0.16em" columnalign="center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>x</mi><mn>1</mn></msub></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>x</mi><mn>2</mn></msub></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>x</mi><mn>3</mn></msub></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><mo>=</mo><mrow><mo fence="true">[</mo><mtable rowspacing="0.16em" columnalign="center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>9</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>2</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>13.9</mn></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow></mrow><annotation encoding="application/x-tex">\begin{bmatrix}
10 &amp; 0 &amp; 0 \\
0 &amp; 2 &amp; -1 \\
1 &amp; 1 &amp; 1
\end{bmatrix}\cdot\begin{bmatrix}
x_1 \\
x_2 \\
x_3
\end{bmatrix}=\begin{bmatrix}
9 \\
2 \\
13.9
\end{bmatrix}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:3.6em;vertical-align:-1.55em;"/><span class="minner"><span class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.05em;"><span class="pstrut" style="height:5.6em;"/><span style="width:0.667em;height:3.600em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.667em" height="3.600em" viewbox="0 0 667 3600"><path d="M403 1759 V84 H666 V0 H319 V1759 v0 v1759 h347 v-84&#10;H403z M403 1759 V0 H319 V1759 v0 v1759 h84z"/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">10</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">0</span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span><span class="arraycolsep" style="width:0.5em;"/><span class="arraycolsep" style="width:0.5em;"/><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">0</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">2</span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span><span class="arraycolsep" style="width:0.5em;"/><span class="arraycolsep" style="width:0.5em;"/><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">0</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">âˆ’</span><span class="mord">1</span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span></span></span><span class="mclose"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.05em;"><span class="pstrut" style="height:5.6em;"/><span style="width:0.667em;height:3.600em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.667em" height="3.600em" viewbox="0 0 667 3600"><path d="M347 1759 V0 H0 V84 H263 V1759 v0 v1759 H0 v84 H347z&#10;M347 1759 V0 H263 V1759 v0 v1759 h84z"/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:3.6em;vertical-align:-1.55em;"/><span class="minner"><span class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.05em;"><span class="pstrut" style="height:5.6em;"/><span style="width:0.667em;height:3.600em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.667em" height="3.600em" viewbox="0 0 667 3600"><path d="M403 1759 V84 H666 V0 H319 V1759 v0 v1759 h347 v-84&#10;H403z M403 1759 V0 H319 V1759 v0 v1759 h84z"/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span></span></span><span class="mclose"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.05em;"><span class="pstrut" style="height:5.6em;"/><span style="width:0.667em;height:3.600em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.667em" height="3.600em" viewbox="0 0 667 3600"><path d="M347 1759 V0 H0 V84 H263 V1759 v0 v1759 H0 v84 H347z&#10;M347 1759 V0 H263 V1759 v0 v1759 h84z"/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:3.6em;vertical-align:-1.55em;"/><span class="minner"><span class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.05em;"><span class="pstrut" style="height:5.6em;"/><span style="width:0.667em;height:3.600em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.667em" height="3.600em" viewbox="0 0 667 3600"><path d="M403 1759 V84 H666 V0 H319 V1759 v0 v1759 h347 v-84&#10;H403z M403 1759 V0 H319 V1759 v0 v1759 h84z"/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">9</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">2</span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">13.9</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span></span></span><span class="mclose"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.05em;"><span class="pstrut" style="height:5.6em;"/><span style="width:0.667em;height:3.600em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.667em" height="3.600em" viewbox="0 0 667 3600"><path d="M347 1759 V0 H0 V84 H263 V1759 v0 v1759 H0 v84 H347z&#10;M347 1759 V0 H263 V1759 v0 v1759 h84z"/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span></span></span></span></span></span></span></div>
<p>åªè¦è§£è¿™ä¸ªçŸ©é˜µæ–¹ç¨‹, æˆ‘ä»¬å°±å¯ä»¥ç®—å‡ºè‹¹æœçš„ç‰¹å¾å‘é‡. è¿™å°±æ˜¯çŸ©é˜µçš„ç¬¬äºŒç§æ ¸å¿ƒç†è§£ï¼š<strong>çŸ©é˜µæ˜¯çº¿æ€§æ–¹ç¨‹ç»„çš„ç³»æ•°é›†åˆ</strong>ã€‚</p>
<h2 data-id="heading-3">çŸ©é˜µçš„å››ç§æ ¸å¿ƒè¿ç®—</h2>
<p>ç†è§£äº†çŸ©é˜µæ˜¯ä»€ä¹ˆä¹‹å, æˆ‘ä»¬å†æ¥çœ‹å®ƒçš„å››ç§æ ¸å¿ƒè¿ç®—. è¿™é‡Œä¸æ·±å…¥è®²è§£å¤æ‚çš„è¿ç®—æ€§è´¨, é‡ç‚¹è®²æ¸…åŸºç¡€è§„åˆ™, å†ç»“åˆAIé¢†åŸŸçš„å®é™…åœºæ™¯, è¯´è¯´æ¯ç§è¿ç®—çš„ç”¨é€”.</p>
<h3 data-id="heading-4">1. çŸ©é˜µçš„åŠ æ³•/å‡æ³•</h3>
<h4 data-id="heading-5">è¿ç®—æ€§è´¨</h4>
<p>çŸ©é˜µçš„åŠ æ³•å’Œå‡æ³•æœ‰ä¸ªå‰æ: ä¸¤ä¸ªçŸ©é˜µå¿…é¡»å½¢çŠ¶ç›¸åŒ (ä¹Ÿå°±æ˜¯è¡Œæ•°å’Œåˆ—æ•°éƒ½å®Œå…¨ä¸€è‡´), å¦åˆ™æ— æ³•è®¡ç®—.</p>
<p>è®¡ç®—æ–¹æ³•å¾ˆç®€å•: æŠŠä¸¤ä¸ªçŸ©é˜µå¯¹åº”ä½ç½®çš„å…ƒç´ ç›´æ¥ç›¸åŠ æˆ–ç›¸å‡å³å¯.</p>
<p>ä¸¾ä¸ªä¾‹å­ï¼Œç°æœ‰ä¸¤ä¸ª 2Ã—2 çš„çŸ©é˜µ A å’Œ B:</p>
<div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>A</mi><mo>=</mo><mrow><mo fence="true">[</mo><mtable rowspacing="0.16em" columnalign="center center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>2</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>3</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>4</mn></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><mspace width="1em"/><mi>B</mi><mo>=</mo><mrow><mo fence="true">[</mo><mtable rowspacing="0.16em" columnalign="center center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>5</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>6</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>7</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>8</mn></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow></mrow><annotation encoding="application/x-tex">A = \begin{bmatrix}
1 &amp; 2 \\
3 &amp; 4
\end{bmatrix} \quad B = \begin{bmatrix}
5 &amp; 6 \\
7 &amp; 8
\end{bmatrix}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord mathnormal">A</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:2.4em;vertical-align:-0.95em;"/><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">[</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">1</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">3</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.95em;"><span/></span></span></span></span><span class="arraycolsep" style="width:0.5em;"/><span class="arraycolsep" style="width:0.5em;"/><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">2</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">4</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.95em;"><span/></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">]</span></span></span><span class="mspace" style="margin-right:1em;"/><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:2.4em;vertical-align:-0.95em;"/><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">[</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">5</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">7</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.95em;"><span/></span></span></span></span><span class="arraycolsep" style="width:0.5em;"/><span class="arraycolsep" style="width:0.5em;"/><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">6</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">8</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.95em;"><span/></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">]</span></span></span></span></span></span></span></div>
<p>çŸ©é˜µåŠ æ³• A + B:</p>
<div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mrow><mo fence="true">[</mo><mtable rowspacing="0.16em" columnalign="center center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mn>1</mn><mo>+</mo><mn>5</mn></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mn>2</mn><mo>+</mo><mn>6</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mn>3</mn><mo>+</mo><mn>7</mn></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mn>4</mn><mo>+</mo><mn>8</mn></mrow></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><mo>=</mo><mrow><mo fence="true">[</mo><mtable rowspacing="0.16em" columnalign="center center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>6</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>8</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>10</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>12</mn></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow></mrow><annotation encoding="application/x-tex">\begin{bmatrix}
1 + 5 &amp; 2 + 6 \\
3 + 7 &amp; 4 + 8
\end{bmatrix}=
\begin{bmatrix}
6 &amp; 8 \\
10 &amp; 12
\end{bmatrix}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.4em;vertical-align:-0.95em;"/><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">[</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mord">5</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">3</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mord">7</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.95em;"><span/></span></span></span></span><span class="arraycolsep" style="width:0.5em;"/><span class="arraycolsep" style="width:0.5em;"/><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">2</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mord">6</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">4</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mord">8</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.95em;"><span/></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">]</span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:2.4em;vertical-align:-0.95em;"/><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">[</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">6</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">10</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.95em;"><span/></span></span></span></span><span class="arraycolsep" style="width:0.5em;"/><span class="arraycolsep" style="width:0.5em;"/><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">8</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">12</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.95em;"><span/></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">]</span></span></span></span></span></span></span></div>
<p>çŸ©é˜µå‡æ³•: A - B:</p>
<div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mrow><mo fence="true">[</mo><mtable rowspacing="0.16em" columnalign="center center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mn>1</mn><mo>âˆ’</mo><mn>5</mn></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mn>2</mn><mo>âˆ’</mo><mn>6</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mn>3</mn><mo>âˆ’</mo><mn>7</mn></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mn>4</mn><mo>âˆ’</mo><mn>8</mn></mrow></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><mo>=</mo><mrow><mo fence="true">[</mo><mtable rowspacing="0.16em" columnalign="center center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo>âˆ’</mo><mn>4</mn></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo>âˆ’</mo><mn>4</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo>âˆ’</mo><mn>4</mn></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo>âˆ’</mo><mn>4</mn></mrow></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow></mrow><annotation encoding="application/x-tex">\begin{bmatrix}
1 - 5 &amp; 2 - 6 \\
3 - 7 &amp; 4 - 8
\end{bmatrix}=
\begin{bmatrix}
-4 &amp; -4 \\
-4 &amp; -4
\end{bmatrix}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.4em;vertical-align:-0.95em;"/><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">[</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mord">5</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">3</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mord">7</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.95em;"><span/></span></span></span></span><span class="arraycolsep" style="width:0.5em;"/><span class="arraycolsep" style="width:0.5em;"/><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">2</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mord">6</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">4</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mord">8</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.95em;"><span/></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">]</span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:2.4em;vertical-align:-0.95em;"/><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">[</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">âˆ’</span><span class="mord">4</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">âˆ’</span><span class="mord">4</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.95em;"><span/></span></span></span></span><span class="arraycolsep" style="width:0.5em;"/><span class="arraycolsep" style="width:0.5em;"/><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">âˆ’</span><span class="mord">4</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">âˆ’</span><span class="mord">4</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.95em;"><span/></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">]</span></span></span></span></span></span></span></div>
<h4 data-id="heading-6">AI é¢†åŸŸçš„åº”ç”¨ä¾‹å­</h4>
<p>ä¸‹é¢æˆ‘ä»¬å„ä¸¾ä¸€ä¸‹åŠ æ³•å’Œå‡æ³•åœ¨ AI åº”ç”¨åœºæ™¯ä¸­çš„ä¾‹å­, å¸®åŠ©ä½ ç†è§£çŸ©é˜µåŠ æ³•å’Œå‡æ³•çš„å®é™…ä»·å€¼:</p>
<p><strong>åŠ æ³•ä¾‹å­: å¤§æ¨¡å‹çš„ä½ç½®ç¼–ç </strong></p>
<p>å¤§æ¨¡å‹çš„ Transformer æ¶æ„ä¸­, Token æ˜¯è¢«å¹¶è¡Œå¤„ç†çš„, æœ¬èº«æ²¡æœ‰ä½ç½®ä¿¡æ¯, æ¯”å¦‚å®ƒåˆ†ä¸æ¸… "æˆ‘çˆ±åƒè‹¹æœ" å’Œ â€œè‹¹æœçˆ±åƒæˆ‘â€.</p>
<blockquote>
<p>ä¸ç†Ÿæ‚‰ Transformer æ¶æ„, å¯ä»¥çœ‹æˆ‘çš„æ–‡ç« :  <a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2F_JNT0A6ud8QtGpK319a8uw" target="_blank" title="https://mp.weixin.qq.com/s/_JNT0A6ud8QtGpK319a8uw" ref="nofollow noopener noreferrer">æ•°å­¦ä¸å¥½ä¹Ÿèƒ½æ‡‚: è§£è¯» AI ç»å…¸è®ºæ–‡ã€ŠAttention is All You Needã€‹ä¸å¤§æ¨¡å‹ç”ŸæˆåŸç†</a></p>
</blockquote>
<p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜, æˆ‘ä»¬éœ€è¦ç»™æ¯ä¸ªè¯å‘é‡å¢åŠ ä½ç½®ä¿¡æ¯.</p>
<p>æŒ‰ç…§æˆ‘ä»¬ä¹‹å‰è¯´çš„ <strong>çŸ©é˜µæ˜¯å‘é‡çš„ç»„åˆ</strong>, Transfromer ä¼šå…ˆæŠŠè¯å‘é‡ç»„åˆæˆä¸€ä¸ª "è¯å‘é‡çŸ©é˜µ", å†ç”Ÿæˆä¸€ä¸ªè®°å½•ä½ç½®ä¿¡æ¯çš„ "ä½ç½®å‘é‡çŸ©é˜µ". é€šè¿‡çŸ©é˜µåŠ æ³•, æ¨¡å‹å°±èƒ½åŒæ—¶è·å– â€œæ¯ä¸ª Token çš„å«ä¹‰â€ å’Œ â€œæ¯ä¸ªè¯çš„ä½ç½®â€ ä¸¤ä¸ªå…³é”®ä¿¡æ¯.</p>
<p><strong>å‡æ³•ä¾‹å­: ç›‘æ§ä¸­çš„è¿åŠ¨æ£€æµ‹</strong></p>
<p>æˆ‘ä»¬å…ˆè¡¥å……ä¸€ç‚¹å›¾åƒçŸ¥è¯†: å¦‚æœæ˜¯é»‘ç™½ç›‘æ§, ä¸€å¸§ç”»é¢é‡Œçš„æ¯ä¸ªåƒç´ ç‚¹éƒ½èƒ½è½¬æ¢æˆä¸€ä¸ªäº®åº¦æ•°å€¼:</p>
<ul>
<li>0 = çº¯é»‘</li>
<li>255 = çº¯ç™½</li>
<li>128 = ç°è‰²</li>
</ul>
<p>è¿™æ ·ä¸€æ¥, ä¸€å¸§ç”»é¢å°±å¯ä»¥çœ‹æˆä¸€ä¸ª "åƒç´ çŸ©é˜µ".</p>
<p>è¿åŠ¨æ£€æµ‹çš„æ ¸å¿ƒé€»è¾‘å¾ˆç®€å•: å…ˆæŠŠæ²¡æœ‰ç‰©ä½“ç§»åŠ¨çš„ "èƒŒæ™¯ç”»é¢" è½¬æ¢æˆ "èƒŒæ™¯çŸ©é˜µ", å†ç”¨å®æ—¶çš„ "å½“å‰ç”»é¢çŸ©é˜µ" å‡å» "èƒŒæ™¯çŸ©é˜µ". å¦‚æœç»“æœçŸ©é˜µé‡Œçš„æ•°å€¼å‡ ä¹éƒ½æ˜¯ 0, è¯´æ˜ç”»é¢é™æ­¢; å¦‚æœæŸä¸€å—åŒºåŸŸæœ‰æ˜æ˜¾æ•°å€¼, å°±è¯´æ˜è¿™å—åŒºåŸŸæœ‰ç‰©ä½“åœ¨ç§»åŠ¨. è¿™å°±æ˜¯æœ€åŸºç¡€çš„è¿åŠ¨æ£€æµ‹ç®—æ³•</p>
<h3 data-id="heading-7">2. çŸ©é˜µçš„ä¹˜æ³•</h3>
<h4 data-id="heading-8">è¿ç®—æ€§è´¨</h4>
<p>çŸ©é˜µä¹˜æ³•çš„è§„åˆ™æ¯”åŠ å‡å¤æ‚ä¸€ç‚¹, é¦–å…ˆè¦æ»¡è¶³ä¸€ä¸ªå‰æ: <strong>ç¬¬ä¸€ä¸ªçŸ©é˜µçš„åˆ—æ•°, å¿…é¡»ç­‰äºç¬¬äºŒä¸ªçŸ©é˜µçš„è¡Œæ•°</strong>, å¦åˆ™æ— æ³•è®¡ç®—.</p>
<p>å®ƒçš„è®¡ç®—æ–¹å¼æ˜¯, ç¬¬ä¸€ä¸ªçŸ©é˜µçš„æ¯ä¸€è¡Œçš„å…ƒç´ , å»å’Œç¬¬äºŒä¸ªçŸ©é˜µçš„æ¯ä¸€åˆ—çš„å…ƒç´ å¯¹åº”ä½ç½®çš„å…ƒç´ ç›¸ä¹˜å, å†æŠŠæ‰€æœ‰çš„ä¹˜ç§¯åŠ èµ·æ¥</p>
<p>å¬èµ·æ¥æœ‰ç‚¹éš¾æ‡‚, æˆ‘ä»¬ä¸¾ä¸ªä¾‹å­, å‡å¦‚æœ‰ä¸ª 2 * 3 å’Œ 3 * 2 çš„çŸ©é˜µ A å’Œ B</p>
<div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>A</mi><mo>=</mo><mrow><mo fence="true">[</mo><mtable rowspacing="0.16em" columnalign="center center center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>2</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>3</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>4</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>5</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>6</mn></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><mspace width="1em"/><mi>B</mi><mo>=</mo><mrow><mo fence="true">[</mo><mtable rowspacing="0.16em" columnalign="center center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>2</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>3</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>4</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>5</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>6</mn></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow></mrow><annotation encoding="application/x-tex">A = \begin{bmatrix}
1 &amp; 2 &amp; 3\\
4 &amp; 5 &amp; 6
\end{bmatrix} \quad B = \begin{bmatrix}
1 &amp; 2\\
3 &amp; 4\\
5 &amp; 6
\end{bmatrix}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord mathnormal">A</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:2.4em;vertical-align:-0.95em;"/><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">[</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">1</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">4</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.95em;"><span/></span></span></span></span><span class="arraycolsep" style="width:0.5em;"/><span class="arraycolsep" style="width:0.5em;"/><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">2</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">5</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.95em;"><span/></span></span></span></span><span class="arraycolsep" style="width:0.5em;"/><span class="arraycolsep" style="width:0.5em;"/><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">3</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">6</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.95em;"><span/></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">]</span></span></span><span class="mspace" style="margin-right:1em;"/><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:3.6em;vertical-align:-1.55em;"/><span class="minner"><span class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.05em;"><span class="pstrut" style="height:5.6em;"/><span style="width:0.667em;height:3.600em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.667em" height="3.600em" viewbox="0 0 667 3600"><path d="M403 1759 V84 H666 V0 H319 V1759 v0 v1759 h347 v-84&#10;H403z M403 1759 V0 H319 V1759 v0 v1759 h84z"/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">1</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">3</span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">5</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span><span class="arraycolsep" style="width:0.5em;"/><span class="arraycolsep" style="width:0.5em;"/><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">2</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">4</span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">6</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span></span></span><span class="mclose"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.05em;"><span class="pstrut" style="height:5.6em;"/><span style="width:0.667em;height:3.600em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.667em" height="3.600em" viewbox="0 0 667 3600"><path d="M347 1759 V0 H0 V84 H263 V1759 v0 v1759 H0 v84 H347z&#10;M347 1759 V0 H263 V1759 v0 v1759 h84z"/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span></span></span></span></span></span></span></div>
<p>äºŒè€…ç›¸ä¹˜</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/096ecb2afe724704bfe37f61bed6deb8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y2w5Yi75ZCb:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767573557&amp;x-signature=Qyaprmu1Jsji%2FHOF1EucIZxYBN4%3D" alt="image.png" loading="lazy"/></p>
<ul>
<li>
<p>æˆ‘ä»¬å…ˆæ‹¿ A çš„ç¬¬ä¸€è¡Œå’Œ B çš„ç¬¬ä¸€åˆ—å¯¹åº”ç›¸ä¹˜å†ç›¸åŠ </p>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mo>Ã—</mo><mn>1</mn><mo>+</mo><mn>2</mn><mo>Ã—</mo><mn>3</mn><mo>+</mo><mn>3</mn><mo>Ã—</mo><mn>5</mn><mo>=</mo><mn>22</mn></mrow><annotation encoding="application/x-tex">1 \times 1 + 2 \times 3 + 3 \times 5 = 22</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"/><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"/><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"/><span class="mord">2</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"/><span class="mord">3</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"/><span class="mord">3</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">5</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">22</span></span></span></span></span></p>
</li>
<li>
<p>å†æ‹¿ A çš„ç¬¬ä¸€è¡Œå’Œ B çš„ç¬¬ä¸€åˆ—å¯¹åº”ç›¸ä¹˜å†ç›¸åŠ </p>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mo>Ã—</mo><mn>2</mn><mo>+</mo><mn>2</mn><mo>Ã—</mo><mn>4</mn><mo>+</mo><mn>3</mn><mo>Ã—</mo><mn>6</mn><mo>=</mo><mn>28</mn></mrow><annotation encoding="application/x-tex">1 \times 2 + 2 \times 4 + 3 \times 6 = 28</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"/><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"/><span class="mord">2</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"/><span class="mord">2</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"/><span class="mord">4</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"/><span class="mord">3</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">6</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">28</span></span></span></span></span></p>
</li>
<li>
<p>å†æ‹¿ A çš„ç¬¬äºŒè¡Œå’Œ B çš„ç¬¬ä¸€åˆ—å¯¹åº”ç›¸ä¹˜å†ç›¸åŠ </p>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>4</mn><mo>Ã—</mo><mn>1</mn><mo>+</mo><mn>5</mn><mo>Ã—</mo><mn>3</mn><mo>+</mo><mn>6</mn><mo>Ã—</mo><mn>5</mn><mo>=</mo><mn>49</mn></mrow><annotation encoding="application/x-tex">4 \times 1 + 5 \times 3 + 6 \times 5 = 49</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"/><span class="mord">4</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"/><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"/><span class="mord">5</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"/><span class="mord">3</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"/><span class="mord">6</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">5</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">49</span></span></span></span></span></p>
</li>
<li>
<p>æœ€åæ‹¿ A çš„ç¬¬äºŒè¡Œå’Œ B çš„ç¬¬äºŒåˆ—å¯¹åº”ç›¸ä¹˜å†ç›¸åŠ </p>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>4</mn><mo>Ã—</mo><mn>2</mn><mo>+</mo><mn>5</mn><mo>Ã—</mo><mn>4</mn><mo>+</mo><mn>6</mn><mo>Ã—</mo><mn>6</mn><mo>=</mo><mn>64</mn></mrow><annotation encoding="application/x-tex">4 \times 2 + 5 \times 4 + 6 \times 6 = 64</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"/><span class="mord">4</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"/><span class="mord">2</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"/><span class="mord">5</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"/><span class="mord">4</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"/><span class="mord">6</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">6</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">64</span></span></span></span></span></p>
</li>
</ul>
<h4 data-id="heading-9">AI åº”ç”¨ä¾‹å­</h4>
<p>çŸ©é˜µä¹˜æ³•åœ¨æ¨èç³»ç»Ÿä¸­ç”¨å¾—å¾ˆå¤š, æ¯”å¦‚è§†é¢‘ APP, è´­ç‰©å¹³å°çš„ "çŒœä½ å–œæ¬¢" åŠŸèƒ½.</p>
<p>æˆ‘ä»¬ä»¥æ¨èç”µå½±ä¸ºä¾‹:</p>
<ul>
<li>æ„å»ºä¸€ä¸ªç”¨æˆ·çŸ©é˜µ U: æ¯ä¸€è¡Œä»£è¡¨ä¸€ä¸ªç”¨æˆ·, æ¯ä¸€åˆ—ä»£è¡¨ä¸€ä¸ªç”¨æˆ·ç‰¹å¾ (æ¯”å¦‚ "å–œæ¬¢ç§‘å¹»", "å–œæ¬¢ææ€–" ç­‰ï¼‰;</li>
<li>æ„å»ºä¸€ä¸ªç”µå½±çŸ©é˜µ M: æ¯ä¸€è¡Œä»£è¡¨ä¸€ä¸ªç”µå½±ç‰¹å¾ (å’Œç”¨æˆ·ç‰¹å¾å¯¹åº”, æ¯”å¦‚ "ç§‘å¹»ç¨‹åº¦", "ææ€–ç¨‹åº¦" ç­‰ï¼‰. æ¯ä¸€åˆ—ä»£è¡¨ä¸€éƒ¨ç”µå½±;</li>
<li>æŠŠç”¨æˆ·çŸ©é˜µ U å’Œç”µå½±çŸ©é˜µ M ç›¸ä¹˜, å¾—åˆ°ä¸€ä¸ª "å…´è¶£çŸ©é˜µ R". Ré‡Œçš„æ¯ä¸ªæ•°å€¼, éƒ½ä»£è¡¨æŸä¸ªç”¨æˆ·å¯¹æŸéƒ¨ç”µå½±çš„æ„Ÿå…´è¶£ç¨‹åº¦. æ•°å€¼è¶Šå¤§, è¶Šå¯èƒ½å–œæ¬¢; æ•°å€¼è¶Šå°, è¶Šä¸æ„Ÿå…´è¶£.</li>
</ul>
<p>å…¶å®è¿™ä¸ªè¿‡ç¨‹çš„æœ¬è´¨, å°±æ˜¯ç”¨çŸ©é˜µä¹˜æ³•è®¡ç®— "ç”¨æˆ·å‘é‡" å’Œ "ç”µå½±å‘é‡" çš„ç›¸ä¼¼åº¦.</p>
<p>æ•´ä¸ªçŸ©é˜µè¿ç®—è¿‡ç¨‹, å°±æ˜¯ä»ç”¨æˆ·çŸ©é˜µä¸­å–å‡ºä¸€è¡Œè¡Œçš„ç”¨æˆ·å‘é‡ u å»å’Œç”µå½±å‘é‡ m ç›¸ä¹˜:</p>
<p>å‘é‡çš„ä¹˜æ³•å…¬å¼æ˜¯:</p>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mover accent="true"><mi>u</mi><mo>âƒ—</mo></mover><mo>â‹…</mo><mover accent="true"><mi>v</mi><mo>âƒ—</mo></mover><mo>=</mo><mi mathvariant="normal">âˆ£</mi><mover accent="true"><mi>u</mi><mo>âƒ—</mo></mover><mi mathvariant="normal">âˆ£</mi><mo>Ã—</mo><mi mathvariant="normal">âˆ£</mi><mover accent="true"><mi>m</mi><mo>âƒ—</mo></mover><mi mathvariant="normal">âˆ£</mi><mo>Ã—</mo><mi>c</mi><mi>o</mi><mi>s</mi><mo stretchy="false">(</mo><mi>Î¸</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\vec{u} \cdot \vec{v} = |\vec{u}| \times |\vec{m}| \times cos(\theta)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.714em;"/><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.714em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"/><span class="mord mathnormal">u</span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"/><span class="accent-body" style="left:-0.2077em;"><span class="overlay" style="height:0.714em;width:0.471em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.471em" height="0.714em" style="width:0.471em" viewbox="0 0 471 714" preserveaspectratio="xMinYMin"><path d="M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5&#10;3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11&#10;10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63&#10;-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1&#10;-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59&#10;H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359&#10;c-16-25.333-24-45-24-59z"/></svg></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.714em;"/><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.714em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"/><span class="mord mathnormal" style="margin-right:0.03588em;">v</span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"/><span class="accent-body" style="left:-0.2077em;"><span class="overlay" style="height:0.714em;width:0.471em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.471em" height="0.714em" style="width:0.471em" viewbox="0 0 471 714" preserveaspectratio="xMinYMin"><path d="M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5&#10;3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11&#10;10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63&#10;-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1&#10;-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59&#10;H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359&#10;c-16-25.333-24-45-24-59z"/></svg></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord">âˆ£</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.714em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"/><span class="mord mathnormal">u</span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"/><span class="accent-body" style="left:-0.2077em;"><span class="overlay" style="height:0.714em;width:0.471em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.471em" height="0.714em" style="width:0.471em" viewbox="0 0 471 714" preserveaspectratio="xMinYMin"><path d="M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5&#10;3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11&#10;10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63&#10;-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1&#10;-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59&#10;H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359&#10;c-16-25.333-24-45-24-59z"/></svg></span></span></span></span></span></span></span><span class="mord">âˆ£</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord">âˆ£</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.714em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"/><span class="mord mathnormal">m</span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"/><span class="accent-body" style="left:-0.2355em;"><span class="overlay" style="height:0.714em;width:0.471em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.471em" height="0.714em" style="width:0.471em" viewbox="0 0 471 714" preserveaspectratio="xMinYMin"><path d="M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5&#10;3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11&#10;10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63&#10;-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1&#10;-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59&#10;H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359&#10;c-16-25.333-24-45-24-59z"/></svg></span></span></span></span></span></span></span><span class="mord">âˆ£</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal">cos</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.02778em;">Î¸</span><span class="mclose">)</span></span></span></span></span></p>
<p>å…¶ä¸­ cos(Î¸) æ˜¯ä½™å¼¦ç›¸ä¼¼åº¦, ç”¨æ¥åˆ¤æ–­ä¸¤ä¸ªå‘é‡æ˜¯å¦ç›¸ä¼¼</p>
<p>å¦‚æœæˆ‘ä»¬æŠŠå‘é‡ u å’Œå‘é‡ m éƒ½è¿›è¡Œå½’ä¸€åŒ–å¤„ç†, ä¹Ÿå°±æ˜¯è®©å®ƒä»¬éƒ½é•¿åº¦éƒ½ä¸º 1, é‚£ä¹ˆç»“æœå°±å˜æˆäº†</p>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mover accent="true"><mi>u</mi><mo>âƒ—</mo></mover><mo>â‹…</mo><mover accent="true"><mi>m</mi><mo>âƒ—</mo></mover><mo>=</mo><mi>c</mi><mi>o</mi><mi>s</mi><mo stretchy="false">(</mo><mi>Î¸</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\vec{u} \cdot \vec{m} = cos(\theta)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.714em;"/><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.714em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"/><span class="mord mathnormal">u</span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"/><span class="accent-body" style="left:-0.2077em;"><span class="overlay" style="height:0.714em;width:0.471em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.471em" height="0.714em" style="width:0.471em" viewbox="0 0 471 714" preserveaspectratio="xMinYMin"><path d="M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5&#10;3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11&#10;10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63&#10;-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1&#10;-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59&#10;H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359&#10;c-16-25.333-24-45-24-59z"/></svg></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.714em;"/><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.714em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"/><span class="mord mathnormal">m</span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"/><span class="accent-body" style="left:-0.2355em;"><span class="overlay" style="height:0.714em;width:0.471em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.471em" height="0.714em" style="width:0.471em" viewbox="0 0 471 714" preserveaspectratio="xMinYMin"><path d="M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5&#10;3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11&#10;10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63&#10;-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1&#10;-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59&#10;H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359&#10;c-16-25.333-24-45-24-59z"/></svg></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal">cos</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.02778em;">Î¸</span><span class="mclose">)</span></span></span></span></span></p>
<p>æ‰€ä»¥çŸ©é˜µçš„ä¹˜æ³•, æœ¬è´¨ä¸Šå°±æ˜¯æ‰¹é‡è®¡ç®—å¤šä¸ªå‘é‡ä¹‹é—´çš„ç›¸ä¼¼åº¦.</p>
<h3 data-id="heading-10">3. çŸ©é˜µçš„è½¬ç½®</h3>
<h4 data-id="heading-11">è¿ç®—æ€§è´¨</h4>
<p>çŸ©é˜µçš„è½¬ç½®å¾ˆç®€å•, å°±æ˜¯æŠŠçŸ©é˜µæ²¿ç€å¯¹è§’çº¿ (ä»å·¦ä¸Šåˆ°å³ä¸‹) è¿›è¡Œç¿»è½¬, é€šå¸¸å†™ä½œ A<sup>T</sup> æˆ–è€… A<sup>â€²</sup></p>
<p>ç®€å•æ¥è¯´, å°±æ˜¯æŠŠçŸ©é˜µçš„è¡Œå†™æˆåˆ—, æŠŠåˆ—å†™æˆè¡Œ</p>
<p>ä¸¾ä¸ªä¾‹å­:</p>
<p>å‡è®¾æœ‰ä¸€ä¸ª 2 è¡Œ 3 åˆ—çš„çŸ©é˜µ A:</p>
<div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>A</mi><mo>=</mo><mrow><mo fence="true">[</mo><mtable rowspacing="0.16em" columnalign="center center center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>2</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>3</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>4</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>5</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>6</mn></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow></mrow><annotation encoding="application/x-tex">A = \begin{bmatrix}
1 &amp; 2 &amp; 3 \\
4 &amp; 5 &amp; 6 \\
\end{bmatrix}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord mathnormal">A</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:2.4em;vertical-align:-0.95em;"/><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">[</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">1</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">4</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.95em;"><span/></span></span></span></span><span class="arraycolsep" style="width:0.5em;"/><span class="arraycolsep" style="width:0.5em;"/><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">2</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">5</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.95em;"><span/></span></span></span></span><span class="arraycolsep" style="width:0.5em;"/><span class="arraycolsep" style="width:0.5em;"/><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">3</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">6</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.95em;"><span/></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">]</span></span></span></span></span></span></span></div>
<div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msup><mi>A</mi><mi>T</mi></msup><mo>=</mo><mrow><mo fence="true">[</mo><mtable rowspacing="0.16em" columnalign="center center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>4</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>2</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>5</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>3</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>6</mn></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow></mrow><annotation encoding="application/x-tex">A^T = \begin{bmatrix}
1 &amp;  4 \\
2 &amp; 5 \\
3 &amp; 6 \\
\end{bmatrix}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8913em;"/><span class="mord"><span class="mord mathnormal">A</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8913em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:3.6em;vertical-align:-1.55em;"/><span class="minner"><span class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.05em;"><span class="pstrut" style="height:5.6em;"/><span style="width:0.667em;height:3.600em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.667em" height="3.600em" viewbox="0 0 667 3600"><path d="M403 1759 V84 H666 V0 H319 V1759 v0 v1759 h347 v-84&#10;H403z M403 1759 V0 H319 V1759 v0 v1759 h84z"/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">1</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">2</span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">3</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span><span class="arraycolsep" style="width:0.5em;"/><span class="arraycolsep" style="width:0.5em;"/><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">4</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">5</span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">6</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span></span></span><span class="mclose"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.05em;"><span class="pstrut" style="height:5.6em;"/><span style="width:0.667em;height:3.600em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.667em" height="3.600em" viewbox="0 0 667 3600"><path d="M347 1759 V0 H0 V84 H263 V1759 v0 v1759 H0 v84 H347z&#10;M347 1759 V0 H263 V1759 v0 v1759 h84z"/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span></span></span></span></span></span></span></div>
<h4 data-id="heading-12">AI åº”ç”¨ä¾‹å­</h4>
<p>è½¬ç½®åœ¨ AI ä¸­çš„æ ¸å¿ƒä½œç”¨, æ˜¯è§£å†³â€œçŸ©é˜µå½¢çŠ¶ä¸åŒ¹é…â€çš„é—®é¢˜. æˆ‘ä»¬ä¹‹å‰è¯´è¿‡, çŸ©é˜µä¹˜æ³•æœ‰ä¸ªå‰æ: ç¬¬ä¸€ä¸ªçŸ©é˜µçš„åˆ—æ•°è¦ç­‰äºç¬¬äºŒä¸ªçŸ©é˜µçš„è¡Œæ•°.</p>
<p>åœ¨ç¥ç»ç½‘ç»œè®¡ç®—ä¸­, ç»å¸¸ä¼šé‡åˆ°ä¸¤ä¸ªçŸ©é˜µåŒ…å«æœ‰ç”¨æ•°æ®, ä½†å½¢çŠ¶å¯¹ä¸ä¸Š, æ— æ³•ç›´æ¥ç›¸ä¹˜çš„æƒ…å†µ. è¿™æ—¶å€™å°±å¯ä»¥ç”¨è½¬ç½®è°ƒæ•´å…¶ä¸­ä¸€ä¸ªçŸ©é˜µçš„è¡Œæ•°å’Œåˆ—æ•°, è®©å®ƒä»¬æ»¡è¶³ä¹˜æ³•æ¡ä»¶.</p>
<p>è½¬ç½®å°±åƒä¸€ä¸ª "é€‚é…å™¨", å¸®ä¸¤ä¸ªçŸ©é˜µé¡ºåˆ©å®Œæˆåç»­è®¡ç®—.</p>
<h3 data-id="heading-13">4. çŸ©é˜µçš„å“ˆè¾¾ç›ç§¯</h3>
<h4 data-id="heading-14">è¿ç®—æ€§è´¨</h4>
<p>éœ€è¦æ³¨æ„, å“ˆè¾¾ç›ç§¯çš„è®¡ç®—è§„åˆ™, å’Œæˆ‘ä»¬ä¹‹å‰è¯´çš„çŸ©é˜µä¹˜æ³•å®Œå…¨ä¸åŒ, å®ƒè¦æ±‚<strong>ä¸¤ä¸ªçŸ©é˜µçš„å½¢çŠ¶å®Œå…¨ä¸€è‡´</strong>, ä¹Ÿå°±æ˜¯è¡Œæ•°å’Œåˆ—æ•°ç›¸åŒ. å®ƒçš„è®¡ç®—æ–¹æ³•æ˜¯å¯¹åº”ä½ç½®çš„å…ƒç´ ç›´æ¥ç›¸ä¹˜, ç»“æœçŸ©é˜µçš„å½¢çŠ¶å’ŒåŸæ¥ä¿æŒä¸€è‡´.</p>
<p>å“ˆè¾¾ç›ç§¯é€šå¸¸å†™ä½œ:</p>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi><mo>âŠ™</mo><mi>B</mi></mrow><annotation encoding="application/x-tex">A \odot B</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7667em;vertical-align:-0.0833em;"/><span class="mord mathnormal">A</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">âŠ™</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord mathnormal" style="margin-right:0.05017em;">B</span></span></span></span></span></p>
<p>ä¸¾ä¸ªä¾‹å­, å‡è®¾æœ‰ä¸¤ä¸ª 2 è¡Œ 2 åˆ—çš„çŸ©é˜µ A å’Œ B:</p>
<div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>A</mi><mo>=</mo><mrow><mo fence="true">[</mo><mtable rowspacing="0.16em" columnalign="center center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>2</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>3</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>4</mn></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><mspace width="1em"/><mi>B</mi><mo>=</mo><mrow><mo fence="true">[</mo><mtable rowspacing="0.16em" columnalign="center center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>5</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>6</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>7</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>8</mn></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow></mrow><annotation encoding="application/x-tex">A = \begin{bmatrix}
1 &amp; 2\\
3 &amp; 4
\end{bmatrix} \quad B =
\begin{bmatrix}
5 &amp; 6\\
7 &amp; 8
\end{bmatrix}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord mathnormal">A</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:2.4em;vertical-align:-0.95em;"/><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">[</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">1</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">3</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.95em;"><span/></span></span></span></span><span class="arraycolsep" style="width:0.5em;"/><span class="arraycolsep" style="width:0.5em;"/><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">2</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">4</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.95em;"><span/></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">]</span></span></span><span class="mspace" style="margin-right:1em;"/><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:2.4em;vertical-align:-0.95em;"/><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">[</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">5</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">7</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.95em;"><span/></span></span></span></span><span class="arraycolsep" style="width:0.5em;"/><span class="arraycolsep" style="width:0.5em;"/><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">6</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">8</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.95em;"><span/></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">]</span></span></span></span></span></span></span></div>
<p>å®ƒä»¬çš„å“ˆè¾¾ç›ç§¯ä¸º:</p>
<div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mrow><mo fence="true">[</mo><mtable rowspacing="0.16em" columnalign="center center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mn>1</mn><mo>Ã—</mo><mn>5</mn></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mn>2</mn><mo>Ã—</mo><mn>6</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mn>3</mn><mo>Ã—</mo><mn>7</mn></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mn>4</mn><mo>Ã—</mo><mn>8</mn></mrow></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><mo>=</mo><mrow><mo fence="true">[</mo><mtable rowspacing="0.16em" columnalign="center center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>5</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>12</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>21</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>32</mn></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow></mrow><annotation encoding="application/x-tex">\begin{bmatrix}
1 \times 5 &amp; 2 \times 6 \\
3 \times 7 &amp; 4 \times 8
\end{bmatrix} =
\begin{bmatrix}
5 &amp; 12 \\
21 &amp; 32
\end{bmatrix}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.4em;vertical-align:-0.95em;"/><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">[</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mord">5</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">3</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mord">7</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.95em;"><span/></span></span></span></span><span class="arraycolsep" style="width:0.5em;"/><span class="arraycolsep" style="width:0.5em;"/><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">2</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mord">6</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">4</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mord">8</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.95em;"><span/></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">]</span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:2.4em;vertical-align:-0.95em;"/><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">[</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">5</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">21</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.95em;"><span/></span></span></span></span><span class="arraycolsep" style="width:0.5em;"/><span class="arraycolsep" style="width:0.5em;"/><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">12</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">32</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.95em;"><span/></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">]</span></span></span></span></span></span></span></div>
<h4 data-id="heading-15">AI åº”ç”¨ä¾‹å­</h4>
<p>å“ˆè¾¾ç›ç§¯çš„æ ¸å¿ƒç”¨é€”æ˜¯ "ç­›é€‰æœ‰æ•ˆä¿¡æ¯, å±è”½æ— æ•ˆä¿¡æ¯", æœ€å…¸å‹çš„åœºæ™¯æ˜¯ Transformer çš„æ©ç æœºåˆ¶å’Œå›¾åƒå¤„ç†çš„æŠ å›¾.</p>
<p><strong>Transformer çš„æ©ç æœºåˆ¶</strong></p>
<p>Transformer å¤„ç†æ–‡æœ¬æ—¶, ä¸ºäº†é˜²æ­¢ Transformer â€œå·çœ‹â€ åé¢è¿˜æ²¡å¤„ç†çš„è¯è¯­, éœ€è¦ç”¨åˆ° "æ©ç ".</p>
<p>æ©ç çš„ä¸€ç§æ–¹æ³•, å°±æ˜¯ä¼šç”Ÿæˆä¸€ä¸ªç”± 0 å’Œ 1 çš„ "æ©ç çŸ©é˜µ", å†ä¸è¾“å…¥ç‰¹å¾è¿›è¡Œå“ˆè¾¾ç›ç§¯, ç»“æœçŸ©é˜µä¸­, 0 å¯¹åº”çš„ä½ç½®ä¼šè¢«å±è”½, 1 å¯¹åº”çš„ä½ç½®ä¿ç•™åŸå§‹ä¿¡æ¯, ä»è€Œå®ç° "ä¸å·çœ‹" çš„æ•ˆæœ.</p>
<p><strong>å›¾åƒå¤„ç†ä¸­çš„æŠ å›¾</strong></p>
<p>å¦‚æœæˆ‘ä»¬æƒ³æŠŠä¸€ä¸ªå›¾åƒä¸­çš„äººåƒæŠ å‡ºæ¥, å¯ä»¥å…ˆåšä¸€ä¸ª "æ©è†œçŸ©é˜µ": å®ƒçš„äººåƒåŒºåŸŸæ•°å€¼å…¨æ˜¯ 1, å…¶ä½™èƒŒæ™¯éƒ¨åˆ†æ•°å€¼å…¨éƒ¨æ˜¯ 0</p>
<p>æŠŠå›¾ç‰‡å¯¹åº”çš„åƒç´ çŸ©é˜µå’Œæ©è†œçŸ©é˜µåšå“ˆè¾¾ç›ç§¯, æœ€ç»ˆå¾—åˆ°çš„çŸ©é˜µå°±åªä¿ç•™äº†äººåƒ. è¿™å°±æ˜¯æœ€åŸºç¡€çš„æŠ å›¾é€»è¾‘.</p>
<h2 data-id="heading-16">æ€»ç»“</h2>
<p>æ€»ç»“ä¸€ä¸‹, æœ¬æ–‡æˆ‘ä»¬æ ¸å¿ƒä»‹ç»äº†çŸ©é˜µçš„ä¸¤ä¸ªæ ¸å¿ƒç†è§£å’Œå››ç§æ ¸å¿ƒè¿ç®—:</p>
<ol>
<li>
<p>çŸ©é˜µçš„ä¸¤ä¸ªæ ¸å¿ƒç†è§£:
a. å¤šä¸ªå‘é‡çš„ç»„åˆ;
b. çº¿æ€§æ–¹ç¨‹ç»„çš„ç³»æ•°é›†åˆ;</p>
</li>
<li>
<p>çŸ©é˜µçš„å››ç§æ ¸å¿ƒè¿ç®—:
a. åŠ /å‡æ³• (å½¢çŠ¶ç›¸åŒ, å¯¹åº”å…ƒç´ è¿ç®—);
b. ä¹˜æ³• (æ‰¹é‡è®¡ç®—å‘é‡ç›¸ä¼¼åº¦);
c. è½¬ç½® (è°ƒæ•´å½¢çŠ¶, é€‚é…è¿ç®—); d. å“ˆè¾¾ç›ç§¯ (ç­›é€‰ä¿¡æ¯, å±è”½æ— æ•ˆå†…å®¹).</p>
</li>
</ol>
<p>è¿™äº›è¿ç®—çœ‹ä¼¼åŸºç¡€, å´æ˜¯ AI é¢†åŸŸ (æ¯”å¦‚å¤§æ¨¡å‹, æ¨èç³»ç»Ÿ, å›¾åƒå¤„ç†) çš„æ ¸å¿ƒæ•°å­¦å·¥å…·, ç†è§£å®ƒä»¬çš„é€»è¾‘, èƒ½å¸®æˆ‘ä»¬æ›´å¥½åœ°çœ‹æ‡‚AIæŠ€æœ¯çš„åº•å±‚åŸç†.</p>
<p>æˆ‘æ˜¯å°åˆ»å›, ä¸€ä½æ¢ç´¢ AI çš„å‰ç«¯ç¨‹åºå‘˜, å…³æ³¨æˆ‘, è®© AI çŸ¥è¯†æœ‰æ¸©åº¦, æŠ€æœ¯è½åœ°æœ‰æ·±åº¦.</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[DevEco Studio ä½¿ç”¨æŠ€å·§å…¨é¢è§£æ]]></title>    <link>https://juejin.cn/post/7588999772749627427</link>    <guid>https://juejin.cn/post/7588999772749627427</guid>    <pubDate>2025-12-29T06:24:12.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588999772749627427" data-draft-id="7588996730772045824" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="DevEco Studio ä½¿ç”¨æŠ€å·§å…¨é¢è§£æ"/> <meta itemprop="keywords" content="å‰ç«¯,å‰ç«¯æ¡†æ¶,HarmonyOS"/> <meta itemprop="datePublished" content="2025-12-29T06:24:12.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Keya"/> <meta itemprop="url" content="https://juejin.cn/user/870468938379671"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            DevEco Studio ä½¿ç”¨æŠ€å·§å…¨é¢è§£æ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/870468938379671/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Keya
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-29T06:24:12.000Z" title="Mon Dec 29 2025 06:24:12 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-29
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    54
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">DevEco Studio ä½¿ç”¨æŠ€å·§å…¨é¢è§£æ</h2>
<h3 data-id="heading-1">å¼•è¨€</h3>
<p>åœ¨é¸¿è’™ç”Ÿæ€è“¬å‹ƒå‘å±•çš„å½“ä¸‹ï¼ŒDevEco Studioä½œä¸ºåä¸ºæä¾›çš„ä¸€ç«™å¼é›†æˆå¼€å‘ç¯å¢ƒï¼Œä¸“ä¸ºé¸¿è’™æ“ä½œç³»ç»Ÿåº”ç”¨å’ŒæœåŠ¡å¼€å‘è®¾è®¡ã€‚æŒæ¡å…¶ä½¿ç”¨æŠ€å·§ï¼Œèƒ½å¤Ÿå¤§å¹…æå‡å¼€å‘æ•ˆç‡ï¼Œè®©å¼€å‘è€…æ›´åŠ ä¸“æ³¨äºåº”ç”¨çš„åˆ›æ–°å’Œå®ç°ã€‚æœ¬æ–‡å°†ä»å¿«æ·é”®ã€å®ç”¨åŠŸèƒ½ã€ç•Œé¢æ“ä½œç­‰å¤šä¸ªæ–¹é¢ï¼Œä¸ºä½ è¯¦ç»†ä»‹ç»DevEco Studioçš„ä½¿ç”¨æŠ€å·§ã€‚</p>
<h3 data-id="heading-2">å¿«æ·é”®å¤§å…¨</h3>
<h4 data-id="heading-3">ç¼–è¾‘ç±»å¿«æ·é”®</h4>
<p>ç¼–è¾‘æ˜¯å¼€å‘è¿‡ç¨‹ä¸­æœ€é¢‘ç¹çš„æ“ä½œï¼Œä»¥ä¸‹å¿«æ·é”®èƒ½è®©ä»£ç ç¼–å†™ã€ä¿®æ”¹æ›´æµç•…ï¼š</p>





























































































































<table><thead><tr><th>å¿«æ·é”®(Win)</th><th>å¿«æ·é”®ï¼ˆMacï¼‰</th><th>ä¸­æ–‡è¯´æ˜</th></tr></thead><tbody><tr><td>Alt + J</td><td>^G</td><td>é€‰æ‹©ç›¸åŒè¯ï¼Œè®¾ç½®å¤šä¸ªå…‰æ ‡ã€‚ï¼ˆå¸¸ç”¨ï¼Œæ‰¹é‡é€‰ä¸­ï¼‰</td></tr><tr><td>Alt + 1</td><td>âŒ˜1</td><td>æ˜¾ç¤º æˆ– éšè— é¡¹ç›®åŒºã€‚ï¼ˆå¸¸ç”¨ï¼‰</td></tr><tr><td>Ctrl + E</td><td>âŒ˜E</td><td>æœ€è¿‘çš„æ–‡ä»¶ï¼ˆå¸¸ç”¨ï¼Œåˆ‡æ¢æ–‡ä»¶ã€åˆ‡æ¢é¢æ¿ï¼Œå¼ºçƒˆæ¨èï¼‰</td></tr><tr><td>Ctrl + P</td><td>âŒ˜P</td><td>å±•ç¤ºæ–¹æ³•çš„å‚æ•°ä¿¡æ¯ã€‚ï¼ˆå¸¸ç”¨ï¼Œç±»å‹æç¤ºç¥å™¨ï¼‰</td></tr><tr><td>Ctrl + Q</td><td>æ— </td><td>å±•ç¤ºç»„ä»¶çš„ API è¯´æ˜æ–‡æ¡£ã€‚ï¼ˆå¸¸ç”¨ï¼ŒæŸ¥æ–‡æ¡£ç¥å™¨ï¼‰</td></tr><tr><td>Ctrl + Alt + L</td><td>âŒ¥âŒ˜L</td><td>æ ¼å¼åŒ–ä»£ç  ã€‚ï¼ˆæ¨èè®¾ç½®ä¿å­˜è‡ªåŠ¨æ ¼å¼åŒ–ï¼‰</td></tr><tr><td>Shift + Enter</td><td>â‡§â†©</td><td>æ¢è¡Œè¾“å…¥ã€‚ï¼ˆå¸¸ç”¨ï¼Œæ¢è¡Œæ·»åŠ æ–°å±æ€§ï¼‰</td></tr><tr><td>Ctrl + å•å‡» / Ctrl + B</td><td>âŒ˜å•å‡» / âŒ˜B</td><td>è·³è½¬æºç ã€è·³è½¬æ–‡ä»¶ã€‚ï¼ˆå¸¸ç”¨ï¼Œå¼ºçƒˆæ¨èï¼‰</td></tr><tr><td>Ctrl + Alt + T</td><td>âŒ¥âŒ˜T</td><td>è‡ªåŠ¨ç”Ÿæˆå…·æœ‰ç¯ç»•æ€§è´¨çš„ä»£ç ã€‚ï¼ˆæ¨èï¼Œç”Ÿæˆ <code>ifâ€¦else,tryâ€¦catch</code> ç­‰ä»£ç å—ï¼‰</td></tr><tr><td>Ctrl + /</td><td>âŒ˜/</td><td>å•è¡Œæ³¨é‡Š <code>//</code> ï¼ˆå¸¸ç”¨ï¼‰</td></tr><tr><td>Ctrl + Shift + /</td><td>âŒ¥âŒ˜/</td><td>ä»£ç å—æ³¨é‡Š <code>/**/</code> ï¼ˆå¸¸ç”¨ï¼‰</td></tr><tr><td>Tab / Shift + Tab</td><td>Tab / â‡§Tab</td><td>ç¼©è¿›æˆ–è€…ä¸ç¼©è¿›ä¸€æ¬¡æ‰€é€‰æ‹©çš„ä»£ç æ®µã€‚ï¼ˆå¸¸ç”¨ï¼‰</td></tr><tr><td>Ctrl + X</td><td>âŒ˜X</td><td>å‰ªåˆ‡é€‰ä¸­ä»£ç ã€å‰ªåˆ‡è¡Œã€åˆ é™¤è¡Œã€‚ ï¼ˆå¸¸ç”¨ï¼‰</td></tr><tr><td>Ctrl + C</td><td>âŒ˜C</td><td>å¤åˆ¶é€‰ä¸­ä»£ç ã€å¤åˆ¶è¡Œã€‚ ï¼ˆå¸¸ç”¨ï¼‰</td></tr><tr><td>Ctrl + D</td><td>âŒ˜D</td><td>å¤å°é€‰ä¸­ä»£ç ã€å¤å°è¡Œã€‚ï¼ˆå¸¸ç”¨ï¼‰</td></tr><tr><td>Ctrl + V</td><td>âŒ˜V</td><td>ç²˜è´´ä»£ç ã€‚ï¼ˆå¸¸ç”¨ï¼‰</td></tr><tr><td>Ctrl + Shift + V</td><td>â‡§âŒ˜V</td><td>å‰ªè´´æ¿ï¼Œå¤åˆ¶è¿‡çš„å†…å®¹éƒ½åœ¨è¿™é‡Œã€‚ï¼ˆæ¨èï¼‰</td></tr><tr><td>Ctrl + Z</td><td>âŒ˜Z</td><td>æ’¤æ¶ˆã€‚ï¼ˆå¸¸ç”¨ï¼‰</td></tr><tr><td>Ctrl + Shift + Z / Ctrl + Y</td><td>â‡§âŒ˜Z</td><td>é‡åšã€‚</td></tr><tr><td>Ctrl + Shift + J</td><td>^â‡§J</td><td>æŠŠä¸‹ä¸€è¡Œçš„ä»£ç æ¥ç»­åˆ°å½“å‰çš„ä»£ç è¡Œã€‚ï¼ˆå¸¸ç”¨ï¼Œåˆå¹¶è¡Œï¼‰</td></tr><tr><td>Ctrl + Shift + U</td><td>â‡§âŒ˜U</td><td>åˆ‡æ¢å¤§å°å†™ã€‚ï¼ˆæ¨èï¼‰</td></tr><tr><td>Ctrl + (+/-)</td><td>âŒ˜+ / âŒ˜-</td><td>æŠ˜å æˆ–å±•å¼€ä»£ç ã€‚ ï¼ˆæ¨èï¼‰</td></tr><tr><td>Shift + F6</td><td>â‡§F6</td><td>é‡æ„ä¿®æ”¹å‘½åã€‚ï¼ˆå¸¸ç”¨ï¼Œèƒ½åŒæ­¥æ›´æ–°è·¯å¾„ã€å˜é‡åã€å‡½æ•°åçš„é‡å‘½åï¼‰</td></tr></tbody></table>
<h4 data-id="heading-4">æŸ¥æ‰¾ä¸æ›¿æ¢å¿«æ·é”®</h4>
<p>é«˜æ•ˆçš„æŸ¥æ‰¾å’Œæ›¿æ¢èƒ½å‡å°‘é‡å¤åŠ³åŠ¨ï¼Œæå‡ä»£ç ç»´æŠ¤æ•ˆç‡ï¼š</p>



































<table><thead><tr><th>å¿«æ·é”®(Win)</th><th>å¿«æ·é”®ï¼ˆMacï¼‰</th><th>ä¸­æ–‡è¯´æ˜</th></tr></thead><tbody><tr><td>Ctrl + F</td><td>âŒ˜F</td><td>åœ¨å½“å‰æ–‡ä»¶ä¸­æŸ¥æ‰¾</td></tr><tr><td>Ctrl + R</td><td>âŒ˜R</td><td>æ›¿æ¢æ–‡æœ¬</td></tr><tr><td>Ctrl + Shift + F</td><td>â‡§âŒ˜F</td><td>åœ¨æ–‡ä»¶ä¸­æŸ¥æ‰¾</td></tr><tr><td>Ctrl + Shift + R</td><td>â‡§âŒ˜R</td><td>åœ¨æ–‡ä»¶ä¸­æ›¿æ¢</td></tr><tr><td>Shift + Shift</td><td>Shift + Shift</td><td>å¿«é€ŸæŸ¥æ‰¾</td></tr></tbody></table>
<h4 data-id="heading-5">ç¼–è¯‘ä¸è¿è¡Œå¿«æ·é”®</h4>
<p>ç¼–è¯‘å’Œè¿è¡Œæ˜¯å¼€å‘è¿‡ç¨‹ä¸­çš„å…³é”®æ­¥éª¤ï¼Œè¿™äº›å¿«æ·é”®è®©æ“ä½œæ›´é«˜æ•ˆï¼š</p>






























<table><thead><tr><th>å¿«æ·é”®(Win)</th><th>å¿«æ·é”®ï¼ˆMacï¼‰</th><th>ä¸­æ–‡è¯´æ˜</th></tr></thead><tbody><tr><td>Shift + F10</td><td>^R</td><td>è¿è¡Œ entryã€‚ ï¼ˆå¸¸ç”¨ï¼Œç‰¹åˆ«å¥½ç”¨ï¼‰</td></tr><tr><td>Shift + F9</td><td>^D</td><td>è°ƒè¯• entryã€‚</td></tr><tr><td>Alt + Shift + F10</td><td>^âŒ¥D</td><td>ä¼šæ‰“å¼€ä¸€ä¸ªå·²ç»é…ç½®çš„è¿è¡Œåˆ—è¡¨ï¼Œè®©ä½ é€‰æ‹©ä¸€ä¸ªåï¼Œå†è¿è¡Œã€‚</td></tr><tr><td>Alt + Shift + F9</td><td>^âŒ¥D</td><td>ä¼šæ‰“å¼€ä¸€ä¸ªå·²ç»é…ç½®çš„è¿è¡Œåˆ—è¡¨ï¼Œè®©ä½ é€‰æ‹©ä¸€ä¸ªåï¼Œå†ä»¥è°ƒè¯•æ¨¡å¼è¿è¡Œã€‚</td></tr></tbody></table>
<h4 data-id="heading-6">è°ƒè¯•å¿«æ·é”®</h4>
<p>é«˜æ•ˆçš„è°ƒè¯•èƒ½åŠ›æ˜¯è§£å†³é—®é¢˜çš„å…³é”®ï¼Œä»¥ä¸‹æ˜¯å¸¸ç”¨çš„è°ƒè¯•å¿«æ·é”®ï¼š</p>

































<table><thead><tr><th>å¿«æ·é”®</th><th>ä¸­æ–‡è¯´æ˜</th></tr></thead><tbody><tr><td>F8</td><td>æ­¥è¿‡ï¼ˆæ‰§è¡Œä¸‹ä¸€è¡Œï¼Œä¸è¿›å…¥æ–¹æ³•ï¼‰</td></tr><tr><td>F7</td><td>æ­¥å…¥ï¼ˆè¿›å…¥è°ƒç”¨çš„æ–¹æ³•ï¼‰</td></tr><tr><td>Alt + F9</td><td>è¿è¡Œåˆ°å…‰æ ‡å¤„</td></tr><tr><td>Alt + F8</td><td>è¯„ä¼°è¡¨è¾¾å¼</td></tr><tr><td>F9</td><td>æ¢å¤ç¨‹åºè¿è¡Œï¼ˆè·³åˆ°ä¸‹ä¸€ä¸ªæ–­ç‚¹ï¼‰</td></tr><tr><td>Ctrl + Shift + F8</td><td>æŸ¥çœ‹æ–­ç‚¹</td></tr></tbody></table>
<h3 data-id="heading-7">å®ç”¨åŠŸèƒ½ä»‹ç»</h3>
<h4 data-id="heading-8">ä»£ç é«˜äº®</h4>
<p>ä»£ç é«˜äº®åŠŸèƒ½å¯ä»¥è®©ä»£ç ä¸­çš„å…³é”®ç±»ã€è¿ç®—ç¬¦ã€å­—ç¬¦ä¸²ç­‰é‡è¦éƒ¨åˆ†ä»¥é«˜äº®å½¢å¼å‘ˆç°ã€‚åœ¨DevEco Studioä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ç®€å•çš„è®¾ç½®æ¥è‡ªå®šä¹‰é«˜äº®æ˜¾ç¤ºã€‚æ‰“å¼€ <code>File &gt; Settings</code> ï¼ˆWindowsç³»ç»Ÿï¼‰æˆ– <code>DevEco Studio &gt; Preferences</code> ï¼ˆmacOSç³»ç»Ÿï¼‰ï¼Œç„¶åæ‰¾åˆ°<code>Editor &gt; Code Style</code> é€‰é¡¹ï¼Œåœ¨è¿™é‡Œå¯ä»¥è‡ªå®šä¹‰å„å­—æ®µçš„é«˜äº®æ˜¾ç¤ºé¢œè‰²ã€‚</p>
<h4 data-id="heading-9">ä»£ç è·³è½¬</h4>
<p>åœ¨é˜…è¯»å’Œç¼–è¾‘å¤æ‚ä»£ç æ—¶ï¼Œå¿«é€Ÿå®šä½å‡½æ•°ã€æ–¹æ³•ç­‰å®šä¹‰çš„ä½ç½®è‡³å…³é‡è¦ã€‚DevEco Studioæä¾›äº†ä¾¿æ·çš„ä»£ç è·³è½¬åŠŸèƒ½ã€‚åªéœ€ä½¿ç”¨å¿«æ·é”®<code>Ctrl</code> ï¼ˆWindowsç³»ç»Ÿï¼‰æˆ– <code>Command</code> ï¼ˆmacOSç³»ç»Ÿï¼‰å¹¶é…åˆé¼ æ ‡å•å‡»ï¼Œå°±èƒ½ç›´æ¥è·³è½¬åˆ°ä»£ç ä¸­å¼•ç”¨çš„ç›®æ ‡å®šä¹‰å¤„ã€‚è€Œä¸”ï¼Œå½“å­˜åœ¨å¤šä¸ªå¼•ç”¨ç›®æ ‡æ—¶ï¼Œè¿˜ä¼šå¼¹å‡ºé€‰æ‹©çª—å£ï¼Œæ–¹ä¾¿æˆ‘ä»¬å‡†ç¡®æ‰¾åˆ°æƒ³è¦æŸ¥çœ‹çš„å®šä¹‰ã€‚</p>
<h4 data-id="heading-10">è·¨è¯­è¨€è·³è½¬</h4>
<p>å¯¹äºæ¶‰åŠè·¨è¯­è¨€å¼€å‘ï¼Œç‰¹åˆ«æ˜¯å£°æ˜è°ƒç”¨äº†Nativeæ¥å£çš„é¡¹ç›®ï¼ŒDevEco Studioçš„è·¨è¯­è¨€è·³è½¬åŠŸèƒ½ååˆ†å®ç”¨ã€‚åœ¨ä»£ç ä¸­é€‰ä¸­ç›¸å…³è°ƒç”¨ï¼Œç„¶åé€‰æ‹© <code>Go To &gt; Implementation(C++)</code> ï¼Œå°±èƒ½è¿…é€Ÿè·³è½¬åˆ°å¯¹åº”çš„C++å®ç°ä»£ç å¤„ã€‚è¿™ä¸€åŠŸèƒ½æå¤§åœ°æé«˜äº†è”åˆå¼€å‘æ—¶ä¸åŒè¯­è¨€ä»£ç ä¹‹é—´çš„åˆ‡æ¢å’ŒæŸ¥é˜…æ•ˆç‡ï¼Œå‡å°‘äº†åœ¨ä¸åŒæ–‡ä»¶å’Œè¯­è¨€ä¹‹é—´åˆ‡æ¢çš„ç¹çæ“ä½œã€‚</p>
<h4 data-id="heading-11">ä»£ç æ ¼å¼åŒ–</h4>
<p>ä»£ç æ ¼å¼åŒ–åŠŸèƒ½å¯ä»¥å¸®æˆ‘ä»¬å¿«é€Ÿæ•´ç†ä»£ç çš„ç¼©è¿›å’Œç»“æ„ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œå®ƒå·²ç»æœ‰ä¸€å¥—ä»£ç æ ¼å¼åŒ–é…ç½®ï¼Œä½†æˆ‘ä»¬ä¹Ÿå¯ä»¥æ ¹æ®è‡ªå·±çš„å–œå¥½è¿›è¡Œè°ƒæ•´ã€‚é€šè¿‡<code>File &gt; Settings</code> ï¼ˆWindowsç³»ç»Ÿï¼‰æˆ– <code>DevEco Studio &gt; Preferences</code> ï¼ˆmacOSç³»ç»Ÿï¼‰è¿›å…¥<code>Editor &gt; Code Style</code> ï¼Œåœ¨è¿™é‡Œå¯ä»¥è®¾ç½®å„ç§æ ¼å¼åŒ–è§„åˆ™ã€‚ä½¿ç”¨å¿«æ·é”®<code>Ctrl + Alt + L</code> ï¼ˆWindowsç³»ç»Ÿï¼‰æˆ– <code>Option + Command + L</code> ï¼ˆmacOSç³»ç»Ÿï¼‰ï¼Œå°±èƒ½å¯¹é€‰å®šçš„ä»£ç è¿›è¡Œæ ¼å¼åŒ–ã€‚æ­¤å¤–ï¼Œè¿˜èƒ½è®¾ç½®åœ¨ä»£ç ä¸­æ·»åŠ ç‰¹å®šçš„æ ¼å¼åŒ–æ ‡è®°ï¼Œè®©ä»£ç åœ¨æ ¼å¼åŒ–æ—¶æ›´ç¬¦åˆæˆ‘ä»¬çš„éœ€æ±‚ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">//@formatter:off</span>
<span class="hljs-comment">// æ­¤åŒºåŸŸå†…çš„ä»£ç å°†è·³è¿‡è‡ªåŠ¨æ ¼å¼åŒ–</span>
<span class="hljs-keyword">const</span> specialFormatting = {
<span class="hljs-attr">needToKeep</span>: <span class="hljs-string">"original_format"</span>
};
<span class="hljs-comment">//@formatter:on</span>
</code></pre>
<h4 data-id="heading-12">ä»£ç æŠ˜å </h4>
<p>å½“ä»£ç é‡è¾ƒå¤§æ—¶ï¼Œä»£ç æŠ˜å åŠŸèƒ½å¯ä»¥å¸®åŠ©æˆ‘ä»¬éšè—ä¸å¿…è¦çš„ä»£ç å—ï¼Œä½¿ä»£ç ç»“æ„æ›´åŠ ç®€æ´æ˜äº†ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡å³é”®èœå•é€‰æ‹©ç›¸åº”çš„æŠ˜å é€‰é¡¹ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å¿«æ·é”®å®ç°ä»£ç çš„æŠ˜å ä¸å±•å¼€ã€‚æ¯”å¦‚ï¼Œä½¿ç”¨å¿«æ·é”® <code>Ctrl + Shift + -</code> ï¼ˆWindowsç³»ç»Ÿï¼‰æˆ– <code>Command + Shift + -</code> ï¼ˆmacOSç³»ç»Ÿï¼‰å¯ä»¥å…¨éƒ¨æŠ˜å ä»£ç ï¼Œæ–¹ä¾¿æˆ‘ä»¬ä»æ•´ä½“ä¸ŠæŠŠæ¡ä»£ç çš„é€»è¾‘ç»“æ„ã€‚</p>
<h4 data-id="heading-13">ä»£ç å¿«é€Ÿæ³¨é‡Š</h4>
<p>ç»™ä»£ç æ·»åŠ æ³¨é‡Šæ˜¯è‰¯å¥½çš„ç¼–ç¨‹ä¹ æƒ¯ï¼Œä½†æ‰‹åŠ¨é€è¡Œæ·»åŠ æ³¨é‡Šæœ‰æ—¶æ¯”è¾ƒç¹çã€‚DevEco Studioæä¾›äº†ä»£ç å¿«é€Ÿæ³¨é‡ŠåŠŸèƒ½ï¼Œä½¿ç”¨å¿«æ·é”®<code>Ctrl + /</code> ï¼ˆWindowsç³»ç»Ÿï¼‰æˆ– <code>Command + /</code> ï¼ˆmacOSç³»ç»Ÿï¼‰ï¼Œå°±èƒ½å¿«é€Ÿä¸ºé€‰ä¸­çš„ä»£ç è¡Œæ·»åŠ æ³¨é‡Šï¼Œå†æ¬¡ä½¿ç”¨åˆ™å¯ä»¥å–æ¶ˆæ³¨é‡Šã€‚è¿™ä¸€åŠŸèƒ½è®©æ³¨é‡Šç¼–å†™å˜å¾—è½»æ¾å¿«æ·ï¼Œæœ‰åŠ©äºæé«˜ä»£ç çš„å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚</p>
<h4 data-id="heading-14">ä»£ç ç»“æ„æ ‘</h4>
<p>ä»£ç ç»“æ„æ ‘åŠŸèƒ½å¯ä»¥è®©æˆ‘ä»¬å¿«é€Ÿäº†è§£æ–‡ä»¶çš„ä»£ç æ¶æ„ã€‚é€šè¿‡å¿«æ·é”®<code>Alt + 7</code> ï¼ˆWindowsç³»ç»Ÿï¼‰æˆ– <code>Command + 7</code> ï¼ˆmacOSç³»ç»Ÿï¼‰æ‰“å¼€ä»£ç ç»“æ„æ ‘çª—å£ï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬å¯ä»¥æ¸…æ™°åœ°çœ‹åˆ°æ–‡ä»¶ä¸­å…¨å±€å˜é‡ã€å‡½æ•°ã€ç±»çš„æˆå‘˜å˜é‡å’Œæ–¹æ³•ç­‰å†…å®¹ï¼Œå¹¶ä¸”å¯ä»¥ç›´æ¥ç‚¹å‡»è·³è½¬åˆ°å¯¹åº”çš„ä»£ç è¡Œï¼Œæ–¹ä¾¿æˆ‘ä»¬åœ¨å¤æ‚çš„ä»£ç æ–‡ä»¶ä¸­å¿«é€Ÿå®šä½å…³é”®éƒ¨åˆ†ã€‚
<img src="https://s.coze.cn/image/jp3fKP6a9iw/" alt="ä»£ç ç»“æ„æ ‘è½¬å­˜å¤±è´¥ï¼Œå»ºè®®ç›´æ¥ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶" loading="lazy"/></p>
<h4 data-id="heading-15">ä»£ç å¼•ç”¨æŸ¥æ‰¾</h4>
<p>åœ¨å¤§å‹é¡¹ç›®ä¸­ï¼Œäº†è§£ä»£ç ä¸­æŸä¸ªç¬¦å·çš„å¼•ç”¨å…³ç³»ååˆ†é‡è¦ã€‚DevEco Studioçš„ä»£ç å¼•ç”¨æŸ¥æ‰¾åŠŸèƒ½å¯ä»¥å¸®åŠ©æˆ‘ä»¬å®ç°è¿™ä¸€ç‚¹ã€‚ä½¿ç”¨å¿«æ·é”®<code>Alt + F7</code> ï¼ˆWindowsç³»ç»Ÿï¼‰æˆ–<code>Option + F7</code> ï¼ˆmacOSç³»ç»Ÿï¼‰ï¼Œæˆ–è€…é€šè¿‡å³é”®èœå•é€‰æ‹©ç›¸å…³é€‰é¡¹ï¼Œå°±èƒ½åœ¨ä»£ç ç¼–è¾‘åŒºå¿«é€ŸæŸ¥æ‰¾ç¬¦å·è¢«å¼•ç”¨çš„ä½ç½®ã€‚è¿™æœ‰åŠ©äºæˆ‘ä»¬ç†è§£ä»£ç çš„è°ƒç”¨é€»è¾‘ï¼Œæ’æŸ¥é—®é¢˜æ—¶ä¹Ÿèƒ½æ›´åŠ é«˜æ•ˆã€‚</p>
<h4 data-id="heading-16">å‡½æ•°æ³¨é‡Šç”Ÿæˆ</h4>
<p>åœ¨å®šä¹‰å‡½æ•°æ—¶ï¼Œæ‰‹åŠ¨ç¼–å†™è¯¦ç»†çš„æ³¨é‡Šå¾€å¾€æ¯”è¾ƒè€—æ—¶ã€‚DevEco Studioæä¾›äº†å‡½æ•°æ³¨é‡Šç”ŸæˆåŠŸèƒ½ï¼Œåœ¨å®šä¹‰å‡½æ•°çš„ä»£ç ç¼–è¾‘åŒºï¼Œè¾“å…¥â€œ/**â€ ï¼Œå°±èƒ½å¿«é€Ÿç”Ÿæˆå‡½æ•°æ³¨é‡Šæ¨¡æ¿ã€‚è¿™ä¸€åŠŸèƒ½æ”¯æŒå¤šç§è¯­è¨€ï¼Œå¦‚C++ç­‰ï¼Œæå¤§åœ°æé«˜äº†å‡½æ•°æ³¨é‡Šçš„ç¼–å†™é€Ÿåº¦ï¼Œè®©æˆ‘ä»¬çš„ä»£ç æ›´åŠ è§„èŒƒå’Œæ˜“äºç†è§£ã€‚</p>
<h4 data-id="heading-17">ä»£ç å¯¼èˆª</h4>
<p>ä»£ç å¯¼èˆªåŠŸèƒ½å¯ä»¥å¸®åŠ©æˆ‘ä»¬åœ¨æ–‡ä»¶ã€ç±»å‹æ–‡ä»¶çš„æ ‡ç­¾ä¹‹é—´å¿«é€Ÿåˆ‡æ¢å’Œå®šä½ã€‚é€šè¿‡ä»£ç å¯¼èˆªï¼Œæˆ‘ä»¬å¯ä»¥å¿«é€Ÿæ‰¾åˆ°ç›¸å…³çš„æ–‡ä»¶å’Œå·¥ç¨‹èµ„æºï¼Œç‰¹åˆ«æ˜¯åœ¨å¤§å‹é¡¹ç›®ä¸­ï¼Œå¤šä¸ªæ–‡ä»¶å’Œæ¨¡å—ç›¸äº’å…³è”æ—¶ï¼Œè¿™ä¸€åŠŸèƒ½èƒ½è®©æˆ‘ä»¬æ›´åŠ ä¾¿æ·åœ°åœ¨ä»£ç ä¹‹é—´ç©¿æ¢­ï¼Œæé«˜å¼€å‘æ•ˆç‡ã€‚</p>
<h4 data-id="heading-18">å¿«é€ŸæŸ¥é˜…APIæ¥å£åŠç»„ä»¶å‚è€ƒæ–‡æ¡£</h4>
<p>åœ¨ç¼–è¾‘ä»£ç è¿‡ç¨‹ä¸­ï¼Œå½“é‡åˆ°ä¸ç†Ÿæ‚‰çš„APIæ¥å£æˆ–ç»„ä»¶æ—¶ï¼ŒDevEco Studioèƒ½è®©æˆ‘ä»¬å¿«é€ŸæŸ¥é˜…ç›¸å…³å‚è€ƒæ–‡æ¡£ã€‚å½“API/ç»„ä»¶è¢«é«˜äº®æ˜¾ç¤ºæ—¶ï¼Œç¼–è¾‘å™¨ä¼šè¿…é€Ÿæ˜¾ç¤ºå¯¹åº”çš„å‚è€ƒæ–‡æ¡£é“¾æ¥ï¼Œæˆ‘ä»¬åªéœ€å•å‡»å°±èƒ½æŸ¥é˜…è¯¦ç»†å†…å®¹ã€‚æ­¤å¤–ï¼Œå¯¹äºå¸¦æœ‰<code>decorate</code> å’Œ <code>obsolete</code> æ ‡è¯†çš„APIï¼Œä¹Ÿæœ‰ç›¸åº”çš„æ˜¾ç¤ºå’Œå…³æ³¨æ–¹å¼ï¼Œæ–¹ä¾¿æˆ‘ä»¬åŠæ—¶äº†è§£APIçš„çŠ¶æ€å’Œä½¿ç”¨æ³¨æ„äº‹é¡¹ã€‚</p>
<h4 data-id="heading-19">Optimize ImportåŠŸèƒ½</h4>
<p>åœ¨é¡¹ç›®å¼€å‘è¿‡ç¨‹ä¸­ï¼Œä»£ç ä¸­çš„ <code>import</code> è¯­å¥å¯èƒ½ä¼šå˜å¾—æ‚ä¹±ï¼Œå­˜åœ¨æœªä½¿ç”¨çš„å¯¼å…¥ç­‰æƒ…å†µã€‚DevEco Studioçš„ <code>Optimize Import</code> åŠŸèƒ½å¯ä»¥å¸®åŠ©æˆ‘ä»¬ä¼˜åŒ–è¿™äº›å¯¼å…¥è¯­å¥ã€‚ä½¿ç”¨å¿«æ·é”®<code>Ctrl+Alt+O</code> ï¼ˆWindowsç³»ç»Ÿï¼‰æˆ– <code>Control+Option+O</code> ï¼ˆmacOSç³»ç»Ÿï¼‰ï¼Œå¹¶é€‰æ‹© <code>Code &gt; Optimize Imports</code> ï¼Œå°±èƒ½è‡ªåŠ¨ç§»é™¤æœªä½¿ç”¨çš„å¯¼å…¥ï¼Œæ•´ç†å¯¼å…¥è¯­å¥çš„é¡ºåºï¼Œè®©æˆ‘ä»¬çš„ä»£ç æ›´åŠ ç®€æ´ã€è§„èŒƒã€‚</p>
<h3 data-id="heading-20">ç•Œé¢æ“ä½œæŠ€å·§</h3>
<h4 data-id="heading-21">ç•Œé¢å¸ƒå±€è®¤è¯†</h4>
<p>DevEco Studioç•Œé¢å¸ƒå±€éµå¾ªâ€œé«˜æ•ˆå¼€å‘æµâ€è®¾è®¡ï¼Œæ ¸å¿ƒåŒºåŸŸåˆ†å·¥æ˜ç¡®ï¼Œæ— éœ€é¢å¤–é…ç½®å³å¯æ»¡è¶³åŸºç¡€å¼€å‘éœ€æ±‚ï¼š</p>
<ol>
<li><strong>æ ¸å¿ƒåŠŸèƒ½èœå•åŒº</strong>ï¼šé›†æˆé¡¹ç›®åˆ›å»ºï¼ˆFileï¼‰ã€ç¼–è¾‘å·¥å…·ï¼ˆEditï¼‰ã€è¿è¡Œè°ƒè¯•ï¼ˆRunï¼‰ç­‰å…¨æµç¨‹æ“ä½œå…¥å£ï¼Œæ”¯æŒé€šè¿‡å¿«æ·é”®å¿«é€Ÿè°ƒç”¨ï¼ˆå¦‚<code>Ctrl+N</code> æ–°å»ºæ–‡ä»¶ï¼‰ã€‚</li>
<li><strong>é¡¹ç›®æ–‡ä»¶å¯¼èˆªåŒº</strong>ï¼šä»¥æ ‘å½¢ç»“æ„å±•ç¤ºé¡¹ç›®æ–‡ä»¶ï¼Œæ”¯æŒâ€œæŒ‰æ¨¡å—ç­›é€‰â€â€œå…³é”®è¯æœç´¢â€ï¼Œå³é”®èœå•å¯ç›´æ¥åˆ›å»ºé¡µé¢/ç»„ä»¶ï¼Œå¤§å¹…æå‡æ–‡ä»¶ç®¡ç†æ•ˆç‡ã€‚</li>
<li><strong>ä»£ç ç¼–è¾‘åŒº</strong>ï¼šæ”¯æŒArkTSè¯­æ³•é«˜äº®ã€è‡ªåŠ¨ç¼©è¿›ã€æ‹¬å·åŒ¹é…ï¼Œå†…ç½®â€œä»£ç æŠ˜å â€åŠŸèƒ½ï¼ˆç‚¹å‡»å·¦ä¾§<code>-</code> ç¬¦å·ï¼‰ï¼Œå¯æŠ˜å å¤æ‚å¸ƒå±€ä»£ç ï¼Œèšç„¦å½“å‰ç¼–è¾‘å†…å®¹ã€‚</li>
<li><strong>å¿«æ·å·¥å…·æ åŒº</strong>ï¼šåŒ…å«é¡¹ç›®è§†å›¾åˆ‡æ¢ï¼ˆProject/Structureï¼‰ã€ä»£ç æ ¼å¼åŒ–ï¼ˆ<code>Ctrl+Alt+L</code> ï¼‰ã€ç‰ˆæœ¬æ§åˆ¶ç­‰é«˜é¢‘æ“ä½œæŒ‰é’®ï¼Œå‡å°‘èœå•å±‚çº§è·³è½¬ã€‚</li>
<li><strong>è¿è¡Œä¸è®¾å¤‡æ§åˆ¶åŒº</strong>ï¼šä¸€é”®åˆ‡æ¢è¿è¡Œè®¾å¤‡ï¼ˆæ¨¡æ‹Ÿå™¨/çœŸæœºï¼‰ï¼Œæ”¯æŒâ€œè¿è¡Œâ€ï¼ˆâ–¶ï¸ï¼‰ã€â€œè°ƒè¯•â€ï¼ˆğŸï¼‰ã€â€œçƒ­é‡è½½â€ï¼ˆâ™»ï¸ï¼‰ï¼Œä¿®æ”¹ä»£ç åæ— éœ€é‡å¯åº”ç”¨å³å¯é¢„è§ˆæ•ˆæœã€‚</li>
<li><strong>è¾…åŠ©åŠŸèƒ½åŒº</strong>ï¼šé›†æˆâ€œé—®é¢˜æ£€æŸ¥â€ï¼ˆå®æ—¶æ˜¾ç¤ºè¯­æ³•é”™è¯¯ï¼‰ã€â€œç»ˆç«¯â€ï¼ˆæ‰§è¡Œohpmå‘½ä»¤ï¼‰ã€â€œé¢„è§ˆå™¨â€ï¼ˆUIå®æ—¶æ¸²æŸ“ï¼‰ï¼Œä¸€ç«™å¼è§£å†³å¼€å‘ä¸­çš„è¾…åŠ©éœ€æ±‚ã€‚
<img src="https://s.coze.cn/image/uziKtIIcJqY/" alt="DevEco Studioç•Œé¢" loading="lazy"/></li>
</ol>
<h4 data-id="heading-22">ç›®å½•ç²¾ç®€æ“ä½œ</h4>
<ol>
<li><strong>åŸºç¡€ç²¾ç®€</strong>ï¼šå·¦ä¾§Projecté¢æ¿é¡¶éƒ¨ï¼Œç‚¹å‡»â€œProjectâ€ä¸‹æ‹‰èœå•ï¼Œé€‰æ‹©â€œProject Filesâ€ï¼Œéšè—å†—ä½™é…ç½®ç›®å½•ã€‚</li>
<li><strong>æ·±åº¦ç²¾ç®€</strong>ï¼šé€‰æ‹©â€œOhosâ€è§†å›¾ï¼Œä»…ä¿ç•™ä¸ä¸šåŠ¡å¼€å‘ç›¸å…³çš„æ ¸å¿ƒç›®å½•ï¼ˆå¦‚<code>pages</code> ã€ <code>resources</code> ï¼‰ï¼Œè¿›ä¸€æ­¥å‡å°‘è§†è§‰å¹²æ‰°ã€‚</li>
</ol>
<h4 data-id="heading-23">æ¨¡æ‹Ÿå™¨æ“ä½œæŒ‡å—</h4>

























<table><thead><tr><th>æ“ä½œ</th><th>è·¯å¾„/æŒ‡ä»¤</th><th>æ•ˆæœ</th></tr></thead><tbody><tr><td>æ–°å»ºæ¨¡æ‹Ÿå™¨</td><td><code>Tools &gt; Device Manager &gt; New</code></td><td>æ·»åŠ P50/Pixelç­‰è®¾å¤‡é•œåƒ</td></tr><tr><td>æ—‹è½¬å±å¹•</td><td>æ¨¡æ‹Ÿå™¨é¢æ¿ç‚¹å‡»ğŸ”„å›¾æ ‡</td><td>æµ‹è¯•æ¨ªç«–å±é€‚é…</td></tr><tr><td>æ¨¡æ‹Ÿä¼ æ„Ÿå™¨</td><td>é¢æ¿å³ä¸Šè§’âš¡ &gt; Simulate Sensor</td><td>è°ƒè¯•GPS/å…‰çº¿ä¼ æ„Ÿå™¨</td></tr></tbody></table>
<p><img src="https://s.coze.cn/image/KJov_8rxeZA/%3E" alt="æ¨¡æ‹Ÿå™¨ç•Œé¢" loading="lazy"/></p>
<h4 data-id="heading-24">å¼‚å¸¸æ’æŸ¥æŠ€å·§</h4>

























<table><thead><tr><th>ç°è±¡</th><th>å®šä½æ–¹æ³•</th><th>ä¿®å¤æ–¹æ¡ˆ</th></tr></thead><tbody><tr><td>é¢„è§ˆå™¨ç™½å±</td><td>æ£€æŸ¥<code>build()</code> å‡½æ•°è¿”å›å€¼</td><td>ç¡®ä¿è¿”å›å•ä¸ªæ ¹ç»„ä»¶ï¼ˆå¦‚<code>Column</code>ï¼‰</td></tr><tr><td>é¡µé¢è·³è½¬å¤±è´¥</td><td>æŸ¥çœ‹<code>router.push</code> è·¯å¾„</td><td>ç¡®è®¤ç›®æ ‡é¡µå·²åœ¨ <code>main_pages.json</code> æ³¨å†Œ</td></tr><tr><td>åº”ç”¨å¯åŠ¨é—ªé€€</td><td>æŸ¥çœ‹<code>Logcat</code>æ—¥å¿—</td><td>è¿‡æ»¤<code>HARMONY</code> æ ‡ç­¾å®šä½åŸç”Ÿå±‚é”™è¯¯</td></tr></tbody></table>
<h3 data-id="heading-25">æ‰©å±•å·¥å…·é“¾</h3>
<h4 data-id="heading-26">è‡ªåŠ¨åŒ–æµ‹è¯•</h4>
<p>ä½¿ç”¨<code>@ohos/hypium</code> æ¡†æ¶ç¼–å†™UIæµ‹è¯•è„šæœ¬ï¼Œå®ç°è‡ªåŠ¨åŒ–æµ‹è¯•ï¼Œæé«˜æµ‹è¯•æ•ˆç‡å’Œå‡†ç¡®æ€§ã€‚</p>
<h4 data-id="heading-27">å‘å¸ƒåº”ç”¨å‰å¿…åš</h4>
<ol>
<li><strong>ä»£ç æ··æ·†</strong>ï¼šå¯ç”¨<code>build.gradle</code>ä¸­çš„<code>minifyEnabled true</code>ç¼©å‡ä½“ç§¯ï¼Œä¿æŠ¤ä»£ç å®‰å…¨ã€‚</li>
<li><strong>ç­¾åé…ç½®</strong>ï¼šé€šè¿‡<code>Project Structure &gt; Signing Configs</code>æ·»åŠ åä¸ºAppGalleryè¯ä¹¦ï¼Œç¡®ä¿åº”ç”¨å¯ä»¥æ­£å¸¸å‘å¸ƒã€‚</li>
<li><strong>ç¼–è¯‘HAP</strong>ï¼šæ‰§è¡Œ<code>Build &gt; Build HAP(s)</code>ç”Ÿæˆå®‰è£…åŒ…ï¼Œå‡†å¤‡å‘å¸ƒåº”ç”¨ã€‚</li>
</ol>
<h3 data-id="heading-28">æ€»ç»“</h3>
<p>DevEco Studioä½œä¸ºé¸¿è’™ç”Ÿæ€çš„å®˜æ–¹å¼€å‘å·¥å…·ï¼Œæä¾›äº†ä¸°å¯Œçš„åŠŸèƒ½å’Œä¾¿æ·çš„æ“ä½œæ–¹å¼ã€‚æŒæ¡è¿™äº›ä½¿ç”¨æŠ€å·§ï¼Œèƒ½å¤Ÿè®©å¼€å‘è€…åœ¨é¸¿è’™åº”ç”¨å¼€å‘è¿‡ç¨‹ä¸­äº‹åŠåŠŸå€ï¼Œæ›´åŠ é«˜æ•ˆåœ°å®Œæˆåº”ç”¨çš„å¼€å‘å’Œè°ƒè¯•ã€‚å¸Œæœ›æœ¬æ–‡çš„ä»‹ç»èƒ½å¤Ÿå¸®åŠ©ä½ æ›´å¥½åœ°ä½¿ç”¨DevEco Studioï¼Œå¼€å‘å‡ºæ›´åŠ ä¼˜ç§€çš„é¸¿è’™åº”ç”¨ã€‚</p>
<hr/>
<p>End</p>
<hr/></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ‰‹æŠŠæ‰‹æ•™ä½ ç”¨ Go + Eino æ­å»ºä¸€ä¸ªä¼ä¸šçº§ RAG çŸ¥è¯†åº“ï¼ˆå«ä»£ç ä¸è¸©å‘ï¼‰]]></title>    <link>https://juejin.cn/post/7588445332771733558</link>    <guid>https://juejin.cn/post/7588445332771733558</guid>    <pubDate>2025-12-28T20:46:07.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588445332771733558" data-draft-id="7588445332771717174" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ‰‹æŠŠæ‰‹æ•™ä½ ç”¨ Go + Eino æ­å»ºä¸€ä¸ªä¼ä¸šçº§ RAG çŸ¥è¯†åº“ï¼ˆå«ä»£ç ä¸è¸©å‘ï¼‰"/> <meta itemprop="keywords" content="åç«¯,äººå·¥æ™ºèƒ½,Go"/> <meta itemprop="datePublished" content="2025-12-28T20:46:07.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç‹ä¸­é˜³è®²AIç¼–ç¨‹"/> <meta itemprop="url" content="https://juejin.cn/user/2189882892232029"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ‰‹æŠŠæ‰‹æ•™ä½ ç”¨ Go + Eino æ­å»ºä¸€ä¸ªä¼ä¸šçº§ RAG çŸ¥è¯†åº“ï¼ˆå«ä»£ç ä¸è¸©å‘ï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2189882892232029/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç‹ä¸­é˜³è®²AIç¼–ç¨‹
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-28T20:46:07.000Z" title="Sun Dec 28 2025 20:46:07 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-28
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;font-weight:400;line-height:2;font-size:17px;overflow-x:hidden;color:#000}.markdown-body strong{padding:1px;color:#ee3f4d}.markdown-body em{padding:0 2px;color:#f33b1f}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{position:relative;margin-top:30px;margin-bottom:20px;line-height:1.5;font-weight:700}.markdown-body h1{text-align:center;padding-bottom:5px;font-size:32px;color:#ac1f18}.markdown-body h1:after{content:"";display:block;margin:4px auto 0;width:100px;height:2px;border-bottom:2px solid #f33b1f}.markdown-body h2{font-size:28px;border-bottom:1px solid #f33b1f}.markdown-body h2:before{content:"# "!important;color:#f33b1f}.markdown-body h3{font-size:24px;padding-left:9px;border-left:6px solid #f33b1f}.markdown-body h4{font-size:20px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #bbb;margin:16px 0}.markdown-body code{word-break:break-word;overflow-x:auto;background-color:#f9f1db;color:#ee2746;border-radius:2px;font-size:16px;padding:1px 2px}.markdown-body code,.markdown-body pre{font-family:-apple-system,-apple-system-body,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,PingFang SC,æ€æºé»‘ä½“ CN,æ€æºé»‘ä½“,JetBrains Mono,Fira Code,Menlo,Ubuntu Mono,Consolas,sans-serif}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{margin:12px 0!important;border-radius:3px;font-size:15px;padding:16px 12px;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f7f7f7}.markdown-body a{text-decoration:none;color:#1781b5;padding:0 2px;border-bottom:1px solid #1781b5}.markdown-body a:active,.markdown-body a:hover{border-bottom:2px solid #f33b1f;color:#ac1f18}.markdown-body blockquote{color:#3d3d3d;background-color:#fff9f9;padding:6px 16px;margin:16px 0;border-left:3px solid #f07c82}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:6px 0}.markdown-body ol,.markdown-body ul{padding-left:30px}.markdown-body ol li,.markdown-body ul li{margin-bottom:6px}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:6px}.markdown-body ol li{padding-left:6px}.markdown-body ::marker{color:#f33b1f}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}.markdown-body .task-list-item input[type=checkbox]{position:relative}.markdown-body .task-list-item input[type=checkbox]:before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;background:#fff;border:1px solid #f07c82;border-radius:3px;box-sizing:border-box;z-index:1}.markdown-body .task-list-item input[type=checkbox]:checked:after{content:"âœ“";position:absolute;top:-5px;left:0;right:0;bottom:0;width:0;height:0;color:#f33b1f;font-size:16px;font-weight:700;z-index:2}.markdown-body table{display:inline-block!important;font-size:14px;width:auto;max-width:100%;overflow:auto;border-spacing:0;border-collapse:collapse}.markdown-body table thead{background:#fff9f9;color:#000;text-align:left;font-size:15px}.markdown-body table tr:nth-child(2n){background-color:#fcfcfc}.markdown-body table tr:hover{background-color:#fff9f9}.markdown-body table td,.markdown-body table th{padding:12px 7px;line-height:24px;border:1px solid #f9f1db}.markdown-body table td{min-width:120px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="a11y-dark">.hljs-comment,.hljs-quote{color:#d4d0ab}.hljs-deletion,.hljs-name,.hljs-regexp,.hljs-selector-class,.hljs-selector-id,.hljs-tag,.hljs-template-variable,.hljs-variable{color:#ffa07a}.hljs-built_in,.hljs-builtin-name,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-type{color:#f5ab35}.hljs-attribute{color:gold}.hljs-addition,.hljs-bullet,.hljs-string,.hljs-symbol{color:#abe338}.hljs-section,.hljs-title{color:#00e0e0}.hljs-keyword,.hljs-selector-tag{color:#dcc6e0}.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#2b2b2b;color:#f8f8f2}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}@media screen and (-ms-high-contrast:active){.hljs-addition,.hljs-attribute,.hljs-built_in,.hljs-builtin-name,.hljs-bullet,.hljs-comment,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-quote,.hljs-string,.hljs-symbol,.hljs-type{color:highlight}.hljs-keyword,.hljs-selector-tag{font-weight:700}}</style><blockquote>
<p>RAGï¼ˆæ£€ç´¢å¢å¼ºç”Ÿæˆï¼‰æ˜¯ç›®å‰è§£å†³å¤§æ¨¡å‹å¹»è§‰æœ€æœ‰æ•ˆçš„æ‰‹æ®µã€‚ä½†ç½‘ä¸Šçš„æ•™ç¨‹å¤§å¤šæ˜¯ Python + LangChain çš„ Demoï¼Œä¸€åˆ°ç”Ÿäº§ç¯å¢ƒå°±å„ç§é—®é¢˜ã€‚</p>
</blockquote>
<blockquote>
<p>æœ¬æ–‡å°†åŸºäº <strong>å­—èŠ‚è·³åŠ¨ Eino</strong> æ¡†æ¶å’Œ <strong>Milvus</strong> å‘é‡æ•°æ®åº“ï¼Œæ‰‹æŠŠæ‰‹å¸¦ä½ ç”¨ Go è¯­è¨€å®ç°ä¸€ä¸ª<strong>æ”¯æŒæ··åˆæ£€ç´¢ã€æ–‡æ¡£åˆ‡åˆ†ã€å‘é‡åŒ–</strong>çš„ä¼ä¸šçº§ RAG ç³»ç»Ÿã€‚</p>
</blockquote>
<h2 data-id="heading-0">ä¸€ã€ ä¸ºä»€ä¹ˆä½ çš„ RAG æ•ˆæœå¾ˆå·®ï¼Ÿ</h2>
<p>å¾ˆå¤šåŒå­¦ç…§ç€ç½‘ä¸Šçš„æ•™ç¨‹å†™äº†ä¸ª RAGï¼Œç»“æœå‘ç°æ•ˆæœæƒ¨ä¸å¿ç¹ï¼š</p>
<ol>
<li><strong>åˆ‡åˆ†å¤ªç²—</strong>ï¼šæŠŠæ•´æ®µæ–‡æœ¬ç›´æ¥å‘é‡åŒ–ï¼Œå¯¼è‡´æ£€ç´¢æ—¶ä¸¢å¤±ç»†èŠ‚ã€‚</li>
<li><strong>æ£€ç´¢ä¸å‡†</strong>ï¼šåªç”¨å‘é‡æœç´¢ï¼ˆDense Searchï¼‰ï¼Œæœâ€œJava é«˜çº§â€å´å‡ºæ¥â€œJava å…¥é—¨â€ã€‚</li>
<li><strong>æ•°æ®é™ˆæ—§</strong>ï¼šçŸ¥è¯†åº“æ›´æ–°æ…¢ï¼Œç”šè‡³ä¸æ”¯æŒå®æ—¶æ’å…¥ã€‚</li>
</ol>
<p><strong>ä¼ä¸šçº§ RAG çš„æ ¸å¿ƒåœ¨äºï¼šç²¾ç»†åŒ–çš„ ETL + æ··åˆæ£€ç´¢ç­–ç•¥ã€‚</strong></p>
<hr/>
<h2 data-id="heading-1">äºŒã€ æ¶æ„è®¾è®¡ï¼šEino RAG é“¾è·¯</h2>
<p>åœ¨ Eino ä¸­ï¼ŒRAG ä¸å†æ˜¯ç®€å•çš„ Function Callï¼Œè€Œæ˜¯ä¸€å¥—æ ‡å‡†çš„æµæ°´çº¿ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    Doc[Markdown/PDFæ–‡æ¡£] --&gt; Splitter[æ–‡æ¡£åˆ‡åˆ†å™¨]
    Splitter --&gt; Embedding[å‘é‡åŒ–æ¨¡å‹]
    Embedding --&gt; Milvus[Milvus å‘é‡åº“]
    
    User[ç”¨æˆ·æé—®] --&gt; Filter[æ„å›¾è¯†åˆ«/Filteræ„å»º]
    Filter --&gt; Retriever[æ··åˆæ£€ç´¢å™¨]
    Retriever --&gt; LLM[å¤§æ¨¡å‹ç”Ÿæˆ]
</code></pre>
<hr/>
<h2 data-id="heading-2">ä¸‰ã€ å®æˆ˜ï¼šä»æ–‡æ¡£åˆ°æ£€ç´¢</h2>
<h3 data-id="heading-3">3.1 æ­¥éª¤ä¸€ï¼šæ–‡æ¡£åˆ‡åˆ†ï¼ˆChunkingï¼‰</h3>
<p>æˆ‘ä»¬ä¸èƒ½æŠŠä¸€æ•´æœ¬ä¹¦ä¸¢ç»™å¤§æ¨¡å‹ã€‚
åœ¨é¡¹ç›®ä¸­ï¼Œæˆ‘å®ç°äº†ä¸€ä¸ªåŸºäº <strong>Markdown è¯­ä¹‰</strong> çš„åˆ‡åˆ†å™¨ã€‚</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// backend/internal/eino/milvus/splitter/markdown.go</span>

<span class="hljs-comment">// æ ¸å¿ƒé€»è¾‘ï¼šæŒ‰ H1/H2 æ ‡é¢˜è¿›è¡Œåˆ‡åˆ†ï¼Œä¿ç•™ä¸Šä¸‹æ–‡</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">SplitMarkdown</span><span class="hljs-params">(content <span class="hljs-type">string</span>)</span></span> []<span class="hljs-type">string</span> {
    chunks := <span class="hljs-built_in">make</span>([]<span class="hljs-type">string</span>, <span class="hljs-number">0</span>)
    <span class="hljs-comment">// ... æ­£åˆ™åŒ¹é… # æ ‡é¢˜</span>
    <span class="hljs-comment">// ... é€’å½’åˆ‡åˆ†</span>
    <span class="hljs-keyword">return</span> chunks
}
</code></pre>
<p><strong>ç»éªŒ</strong>ï¼šä¸è¦ç”¨å›ºå®šå­—ç¬¦æ•°ï¼ˆå¦‚ 500å­—ï¼‰åˆ‡åˆ†ï¼ä¸€å®šè¦æŒ‰ <strong>è¯­ä¹‰ï¼ˆæ®µè½/æ ‡é¢˜ï¼‰</strong> åˆ‡åˆ†ï¼Œå¦åˆ™ä¼šæŠŠå®Œæ•´çš„é€»è¾‘æ‰“æ–­ã€‚</p>
<h3 data-id="heading-4">3.2 æ­¥éª¤äºŒï¼šå‘é‡åŒ–ä¸å…¥åº“</h3>
<p>æˆ‘ä»¬ä½¿ç”¨ <code>text-embedding-3-small</code> æ¨¡å‹è¿›è¡Œå‘é‡åŒ–ï¼Œå­˜å…¥ Milvusã€‚</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// backend/internal/eino/milvus/importer.go</span>

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">ImportKnowledge</span><span class="hljs-params">(ctx context.Context, files []<span class="hljs-type">string</span>)</span></span> <span class="hljs-type">error</span> {
    <span class="hljs-keyword">for</span> _, file := <span class="hljs-keyword">range</span> files {
        <span class="hljs-comment">// 1. è¯»å–å¹¶åˆ‡åˆ†</span>
        chunks := splitter.Split(file)
        
        <span class="hljs-comment">// 2. æ‰¹é‡å‘é‡åŒ– (Batch Embedding)</span>
        vectors, _ := embeddingModel.EmbedStrings(ctx, chunks)
        
        <span class="hljs-comment">// 3. å­˜å…¥ Milvus</span>
        <span class="hljs-comment">// æ³¨æ„ï¼šæˆ‘ä»¬åŒæ—¶å­˜å‚¨äº† Metadataï¼ˆå¦‚è¯­è¨€ã€éš¾åº¦ã€åˆ†ç±»ï¼‰</span>
        milvusClient.Insert(ctx, collectionName, <span class="hljs-string">""</span>, columns...)
    }
    <span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>
}
</code></pre>
<h3 data-id="heading-5">3.3 æ­¥éª¤ä¸‰ï¼šæ··åˆæ£€ç´¢ï¼ˆHybrid Searchï¼‰</h3>
<p>è¿™æ˜¯ RAG æ•ˆæœå¥½åçš„å…³é”®ï¼
æˆ‘ä»¬ä¸èƒ½åªæŸ¥å‘é‡ï¼Œå¿…é¡»ç»“åˆ<strong>æ ‡é‡è¿‡æ»¤</strong>ã€‚</p>
<p><strong>åœºæ™¯</strong>ï¼šç”¨æˆ·é—®â€œç»™æˆ‘å‡ºä¸€é“ <strong>Redis</strong> çš„ <strong>é«˜çº§</strong> é¢è¯•é¢˜â€ã€‚
å¦‚æœåªæŸ¥å‘é‡ï¼Œå¯èƒ½ä¼šæœå‡ºâ€œRedis åŸºç¡€å‘½ä»¤â€ã€‚
å¿…é¡»åŠ ä¸Šè¿‡æ»¤æ¡ä»¶ï¼š<code>category == 'Redis' &amp;&amp; difficulty == 'Hard'</code>ã€‚</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// backend/internal/eino/milvus/retrieval/retriever.go</span>

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(s *RetrieverService)</span></span> Retrieve(ctx context.Context, query <span class="hljs-type">string</span>) ([]*schema.Document, <span class="hljs-type">error</span>) {
    <span class="hljs-comment">// 1. åŠ¨æ€æ„å»º Filter</span>
    <span class="hljs-comment">// è¿™é‡Œå…¶å®å¯ä»¥ç”¨ä¸€ä¸ªå°æ¨¡å‹å…ˆåšæ„å›¾è¯†åˆ«ï¼Œæå– Filter æ¡ä»¶</span>
    expr := <span class="hljs-string">"category == 'Redis' &amp;&amp; difficulty == 'Hard'"</span>
    
    <span class="hljs-comment">// 2. è°ƒç”¨ Milvus è¿›è¡Œæ··åˆæ£€ç´¢</span>
    <span class="hljs-comment">// Eino çš„ Retriever æ¥å£å®Œç¾æ”¯æŒè¿™ç§é«˜çº§æ“ä½œ</span>
    docs, err := s.client.Search(ctx, s.collection, expr, queryVector)
    
    <span class="hljs-keyword">return</span> docs, <span class="hljs-literal">nil</span>
}
</code></pre>
<hr/>
<h2 data-id="heading-6">å››ã€ æ•ˆæœå¯¹æ¯”</h2>

























<table><thead><tr><th align="left">æŒ‡æ ‡</th><th align="left">ä¼ ç»Ÿ RAG (LangChain é»˜è®¤)</th><th align="left">Eino ä¼ä¸šçº§ RAG (æœ¬é¡¹ç›®)</th></tr></thead><tbody><tr><td align="left"><strong>æ£€ç´¢å‡†ç¡®ç‡</strong></td><td align="left">çº¦ 60%</td><td align="left"><strong>&gt; 95%</strong> (å«æ··åˆæ£€ç´¢)</td></tr><tr><td align="left"><strong>å“åº”é€Ÿåº¦</strong></td><td align="left">æ…¢ (Python ä¸²è¡Œå¤„ç†)</td><td align="left"><strong>å¿«</strong> (Go å¹¶å‘å¤„ç†)</td></tr><tr><td align="left"><strong>ä»£ç å¯ç»´æŠ¤æ€§</strong></td><td align="left">å·® (é»‘ç›’)</td><td align="left"><strong>å¥½</strong> (å¼ºç±»å‹æ¥å£)</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-7">äº”ã€ æºç é€ç»™ä½ </h2>
<p>ä¸ºäº†è®©å¤§å®¶å°‘èµ°å¼¯è·¯ï¼Œæˆ‘æŠŠè¿™å¥— <strong>Go + Eino + Milvus</strong> çš„ RAG ç³»ç»Ÿæºç å¼€æºå‡ºæ¥äº†ã€‚
å®ƒåŒ…å«ï¼š</p>
<ol>
<li><strong>Markdown/PDF è§£æå™¨</strong></li>
<li><strong>Milvus å®¢æˆ·ç«¯å°è£…</strong></li>
<li><strong>Hybrid Search å®ç°é€»è¾‘</strong></li>
<li><strong>çŸ¥è¯†åº“å¯¼å…¥è„šæœ¬</strong></li>
</ol>
<p>ğŸ‘‰ <strong>è·å–æ–¹å¼ï¼š</strong></p>
<p>å…³æ³¨æ˜é‡‘ä¸“æ ï¼Œæˆ–å…³æ³¨å…¬ä¼—å·ã€<strong>ç‹ä¸­é˜³</strong>ã€‘ï¼Œå›å¤â€œ<strong>é¢è¯•å§</strong>â€ï¼Œå³å¯è·å–å®Œæ•´æºç å’Œéƒ¨ç½²æ–‡æ¡£ã€‚</p>
<p>ç§ä¿¡æˆ‘çš„ç»¿æ³¡æ³¡ï¼šwangzhongyang1993ï¼Œå¤‡æ³¨â€œ<strong>æ˜é‡‘</strong>â€ï¼Œæ‹‰ä½ è¿›æŠ€æœ¯äº¤æµç¾¤ï¼Œæ‰‹æŠŠæ‰‹æ•™ä½ æ­å»ºè‡ªå·±çš„ä¼ä¸šçŸ¥è¯†åº“ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ·±å…¥é˜²æŠ–ä¸èŠ‚æµï¼šä»é—­åŒ…åŸç†åˆ°æ€§èƒ½ä¼˜åŒ–å®æˆ˜]]></title>    <link>https://juejin.cn/post/7589454621719871538</link>    <guid>https://juejin.cn/post/7589454621719871538</guid>    <pubDate>2025-12-30T10:50:52.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589454621719871538" data-draft-id="7589509638354354203" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ·±å…¥é˜²æŠ–ä¸èŠ‚æµï¼šä»é—­åŒ…åŸç†åˆ°æ€§èƒ½ä¼˜åŒ–å®æˆ˜"/> <meta itemprop="keywords" content="å‰ç«¯,é¢è¯•,JavaScript"/> <meta itemprop="datePublished" content="2025-12-30T10:50:52.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æœ‰æ„ä¹‰"/> <meta itemprop="url" content="https://juejin.cn/user/1739866211617625"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ·±å…¥é˜²æŠ–ä¸èŠ‚æµï¼šä»é—­åŒ…åŸç†åˆ°æ€§èƒ½ä¼˜åŒ–å®æˆ˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1739866211617625/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æœ‰æ„ä¹‰
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-30T10:50:52.000Z" title="Tue Dec 30 2025 10:50:52 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="" data-highlight-key="atelier-lakeside-light">.hljs-comment,.hljs-quote{color:#5a7b8c}.hljs-attribute,.hljs-link,.hljs-name,.hljs-regexp,.hljs-selector-class,.hljs-selector-id,.hljs-tag,.hljs-template-variable,.hljs-variable{color:#d22d72}.hljs-built_in,.hljs-builtin-name,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-type{color:#935c25}.hljs-bullet,.hljs-string,.hljs-symbol{color:#568c3b}.hljs-section,.hljs-title{color:#257fad}.hljs-keyword,.hljs-selector-tag{color:#6b6bb8}.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#ebf8ff;color:#516d7b}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>åœ¨å‰ç«¯å¼€å‘ä¸­ï¼Œ<strong>é˜²æŠ–ï¼ˆDebounceï¼‰</strong> ä¸ <strong>èŠ‚æµï¼ˆThrottleï¼‰</strong> æ˜¯ä¸¤ç§ç»å…¸çš„æ€§èƒ½ä¼˜åŒ–æŠ€æœ¯ï¼Œå¹¿æ³›åº”ç”¨äºæœç´¢å»ºè®®ã€æ»šåŠ¨åŠ è½½ã€çª—å£ç¼©æ”¾ç­‰é«˜é¢‘äº‹ä»¶åœºæ™¯ã€‚å®ƒä»¬èƒ½æœ‰æ•ˆå‡å°‘ä¸å¿…è¦çš„å‡½æ•°è°ƒç”¨ï¼Œé¿å…é¡µé¢å¡é¡¿æˆ–è¯·æ±‚çˆ†ç‚¸ã€‚</p>
<p>è¦æ·±å…¥ç†è§£å…¶å®ç°åŸç†ï¼Œä½ éœ€è¦æŒæ¡ä»¥ä¸‹æ ¸å¿ƒçŸ¥è¯†ç‚¹ï¼š</p>
<p><strong>é—­åŒ…ï¼ˆClosureï¼‰</strong> ï¼šç”¨äºåœ¨å‡½æ•°è¿”å›åä»èƒ½â€œè®°ä½â€å¹¶è®¿é—®å†…éƒ¨å˜é‡ï¼ˆå¦‚å®šæ—¶å™¨ ID æˆ–æ—¶é—´æˆ³ï¼‰</p>
<p>å¯¹äºé—­åŒ…ï¼Œæˆ‘å†™äº†è¿™ä¸¤ç¯‡æ–‡ç« </p>
<p><a href="https://juejin.cn/post/7588461466597883955" target="_blank" title="https://juejin.cn/post/7588461466597883955">æŸ¯é‡ŒåŒ–ï¼šç”¨é—­åŒ…ç¼–ç»‡å‚æ•°çš„å‡½æ•°æµæ°´çº¿</a></p>
<p><a href="https://juejin.cn/post/7577345758036869120" target="_blank" title="https://juejin.cn/post/7577345758036869120">JavaScript è¯æ³•ä½œç”¨åŸŸä¸é—­åŒ…ï¼šä»åº•å±‚åŸç†åˆ°å®æˆ˜ç†è§£</a></p>
<p><strong>this ä¸å‚æ•°çš„æ­£ç¡®ä¼ é€’</strong>ï¼šç¡®ä¿è¢«åŒ…è£…çš„å‡½æ•°åœ¨æ­£ç¡®ä¸Šä¸‹æ–‡ä¸­è¿è¡Œã€‚</p>
<p>å¯¹äºthisï¼Œæœ‰ä¸æ‡‚çš„å¯ä»¥å‚è€ƒè¿™ç¯‡æ–‡ç« ï¼š</p>
<p><a href="https://juejin.cn/post/7579819594271014950" target="_blank" title="https://juejin.cn/post/7579819594271014950">this ä¸æ˜¯ä½ æƒ³çš„ thisï¼šä»ä½œç”¨åŸŸè¿·å¤±åˆ°è°ƒç”¨æ ˆæŒæ§</a></p>
<p>æœ¬æ–‡å°†ç»“åˆç”Ÿæ´»ç±»æ¯”ã€ä»£ç å®ç°ä¸çœŸå®åœºæ™¯ï¼Œå¸¦ä½ ä¸€æ­¥æ­¥æ‹†è§£é˜²æŠ–ä¸èŠ‚æµçš„æœºåˆ¶ã€å·®å¼‚ä¸åº”ç”¨ä¹‹é“ã€‚å³ä½¿ä½ æ›¾è§‰å¾—å®ƒä»¬â€œæœ‰ç‚¹ç»•â€ï¼Œè¯»å®Œä¹Ÿä¼šè±ç„¶å¼€æœ—ã€‚</p>
<h2 data-id="heading-1">ä¸€ã€é—®é¢˜èƒŒæ™¯ï¼šè¾“å…¥æ¡†é¢‘ç¹è§¦å‘äº‹ä»¶</h2>
<p>å…¨éƒ¨ä»£ç åœ¨åé¢çš„é™„å½•</p>
<p>åœ¨ Web å¼€å‘ä¸­ï¼Œç”¨æˆ·åœ¨è¾“å…¥æ¡†ä¸­æ‰“å­—æ—¶ï¼Œå¸¸ä¼šç»‘å®š <code>keyup</code> äº‹ä»¶æ¥å®æ—¶å“åº”è¾“å…¥å†…å®¹ã€‚ä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// 1.html Lines 17-19</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">ajax</span>(<span class="hljs-params">content</span>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ajax request'</span>, content);
}
</code></pre>
<pre><code class="hljs language-Javascript" lang="Javascript"><span class="hljs-comment">// 1.html Lines 64-66</span>
inputa.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'keyup'</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) {
  <span class="hljs-title function_">ajax</span>(e.<span class="hljs-property">target</span>.<span class="hljs-property">value</span>); <span class="hljs-comment">// å¤æ‚æ“ä½œ</span>
});
</code></pre>
<p><strong>é—®é¢˜</strong>ï¼šæ¯å½“ç”¨æˆ·è¾“å…¥ä¸€ä¸ªå­—ç¬¦ï¼Œå°±ä¼šè§¦å‘ä¸€æ¬¡ <code>ajax()</code> è°ƒç”¨ã€‚è‹¥ç”¨æˆ·è¾“å…¥ â€œhelloâ€ï¼Œå°†äº§ç”Ÿ <strong>5 æ¬¡è¯·æ±‚</strong>ï¼Œé€ æˆä¸å¿…è¦çš„ç½‘ç»œå¼€é”€å’Œæ€§èƒ½æµªè´¹ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8281b4c1b367452385446e94a3d92b3b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pyJ5oSP5LmJ:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767696651&amp;x-signature=NhANBb8NFf%2BTxF4DEsdNT4n6Gng%3D" alt="image.png" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-2">äºŒã€é˜²æŠ–ï¼ˆDebounceï¼‰æœºåˆ¶</h2>
<p>æƒ³è±¡ä½ ç«™åœ¨ç”µæ¢¯é‡Œï¼Œæ­£ç­‰ç€é—¨å…³ä¸Šã€‚</p>
<p>å¯å°±åœ¨è¿™æ—¶ï¼Œä¸€ä¸ªè·¯äººåŒ†åŒ†è·‘è¿›æ¥ï¼Œé—¨ç«‹åˆ»é‡æ–°æ‰“å¼€ï¼›è¿˜æ²¡ç­‰å®ƒåˆæ‹¢ï¼Œåˆä¸€ä¸ªäººå†²äº†è¿›æ¥â€¦â€¦åªè¦ä¸æ–­æœ‰äººè¿›å…¥ï¼Œç”µæ¢¯å°±ä¼šä¸€ç›´â€œè€å¿ƒâ€åœ°ç­‰ä¸‹å»ã€‚</p>
<p><strong>æˆ‘ç«™åœ¨é‡Œé¢å¿ƒæƒ³</strong>ï¼šâ€œè¿™é—¨åˆ°åº•ä»€ä¹ˆæ—¶å€™æ‰å…³å•Šï¼Ÿâ€</p>
<p>ç›´åˆ°æœ€åï¼Œæ•´æ•´å‡ ç§’é’Ÿæ²¡äººå†è¿›æ¥â€”â€”ç»ˆäºï¼Œâ€œå®â€ä¸€å£°ï¼Œé—¨ç¼“ç¼“åˆä¸Šï¼Œç”µæ¢¯å¼€å§‹è¿è¡Œã€‚</p>
<blockquote>
<p>è¿™å°±åƒ<strong>é˜²æŠ–</strong>ï¼šåªè¦äº‹ä»¶è¿˜åœ¨é¢‘ç¹è§¦å‘ï¼Œå‡½æ•°å°±ä¸€ç›´â€œç­‰â€ï¼›åªæœ‰å½“è§¦å‘åœæ­‡äº†ä¸€æ®µæ—¶é—´ï¼Œå®ƒæ‰çœŸæ­£æ‰§è¡Œã€‚</p>
</blockquote>
<blockquote>
<p>è¿™ç§â€œæŒ‰èŠ‚å¥æ‰§è¡Œâ€çš„æ€æƒ³ï¼Œä¸ä»…å­˜åœ¨äºæ¸¸æˆä¸­ï¼Œä¹Ÿå¹¿æ³›åº”ç”¨äº Web äº¤äº’ã€‚</p>
</blockquote>
<p>ä¸€äº›AIç¼–è¾‘å™¨  ( æ¯”å¦‚Trae Cursor )å°±æ˜¯è¿™æ ·</p>
<p>å½“ä½ åœ¨ä»£ç æ¡†é‡Œé£å¿«æ•²å­—æ—¶ï¼Œå®ƒå¹¶ä¸ä¼šæ¯æŒ‰ä¸€ä¸ªé”®å°±ç«‹åˆ»åˆ†ææ•´æ®µé€»è¾‘æˆ–å‘èµ·æ™ºèƒ½è¡¥å…¨è¯·æ±‚ã€‚</p>
<p>é‚£æ ·åšä¸ä»…æµªè´¹èµ„æºï¼Œè¿˜ä¼šæ‹–æ…¢è¾“å…¥ä½“éªŒã€‚</p>
<p>ç›¸åï¼Œå®ƒä¼šé»˜é»˜â€œè§‚å¯Ÿâ€ä½ çš„è¾“å…¥èŠ‚å¥ï¼š</p>
<blockquote>
<p><strong>åªè¦ä½ è¿˜åœ¨è¿ç»­æ‰“å­—ï¼Œå®ƒå°±è€å¿ƒç­‰å¾…ï¼›ä¸€æ—¦ä½ åœé¡¿åŠç§’ï¼Œå®ƒæ‰è¿…é€Ÿä»‹å…¥ï¼Œç»™å‡ºç²¾å‡†å»ºè®®</strong>ã€‚</p>
</blockquote>
<h3 data-id="heading-3">ä»£ç å®ç°</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// 1.html Lines 21-30</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">debounce</span>(<span class="hljs-params">fn, delay</span>) {
  <span class="hljs-keyword">let</span> id; <span class="hljs-comment">// é—­åŒ…ä¸­çš„è‡ªç”±å˜é‡ï¼Œç”¨äºä¿å­˜å®šæ—¶å™¨ ID</span>
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span>(<span class="hljs-params">...args</span>) {
    <span class="hljs-keyword">if</span> (id) <span class="hljs-built_in">clearTimeout</span>(id); <span class="hljs-comment">// æ¸…é™¤ä¸Šä¸€æ¬¡çš„å®šæ—¶å™¨</span>
    <span class="hljs-keyword">const</span> that = <span class="hljs-variable language_">this</span>;
    id = <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
      fn.<span class="hljs-title function_">apply</span>(that, args);
    }, delay);
  };
}
</code></pre>
<h3 data-id="heading-4">å…³é”®ç‚¹è§£æ</h3>
<p>é˜²æŠ–å‡½æ•°é€šè¿‡é—­åŒ…ç»´æŠ¤ä¸€ä¸ªå…±äº«çš„å®šæ—¶å™¨æ ‡è¯† <code>id</code>ï¼Œä½¿å¾—å¤šæ¬¡äº‹ä»¶è§¦å‘éƒ½èƒ½è®¿é—®å¹¶æ“ä½œåŒä¸€ä¸ªçŠ¶æ€ã€‚</p>
<p>æ¯å½“ç”¨æˆ·è§¦å‘äº‹ä»¶ï¼ˆå¦‚é”®ç›˜è¾“å…¥ï¼‰ï¼Œå‡½æ•°ä¼šå…ˆæ¸…é™¤ä¹‹å‰å°šæœªæ‰§è¡Œçš„å®šæ—¶å™¨ï¼ˆå¦‚æœå­˜åœ¨ï¼‰ï¼Œç„¶åé‡æ–°å¯åŠ¨ä¸€ä¸ªå»¶è¿Ÿä¸º <code>delay</code> æ¯«ç§’çš„æ–°å®šæ—¶å™¨</p>
<p>è¿™æ„å‘³ç€åªè¦ç”¨æˆ·æŒç»­æ“ä½œï¼Œè®¡æ—¶å°±ä¼šä¸æ–­é‡ç½®ï¼ŒçœŸå®é€»è¾‘å§‹ç»ˆè¢«æ¨è¿Ÿï¼›åªæœ‰å½“ç”¨æˆ·åœæ­¢æ“ä½œå¹¶ç»è¿‡æŒ‡å®šçš„ç­‰å¾…æ—¶é—´åï¼Œç›®æ ‡å‡½æ•°æ‰ä¼šçœŸæ­£æ‰§è¡Œã€‚</p>
<p>ä»¥ <code>delay = 500ms</code> ä¸ºä¾‹ï¼Œè‹¥ç”¨æˆ·åœ¨ 200ms å†…å¿«é€Ÿè¾“å…¥ â€œhelloâ€ï¼Œæ¯æ¬¡æŒ‰é”®éƒ½ä¼šæ‰“æ–­ä¹‹å‰çš„å€’è®¡æ—¶ï¼Œæœ€ç»ˆä»…åœ¨æœ€åä¸€æ¬¡è¾“å…¥ç»“æŸ 500ms åè°ƒç”¨ä¸€æ¬¡ <code>ajax("hello")</code>ã€‚æ•´ä¸ªè¿‡ç¨‹å°†åŸæœ¬å¯èƒ½è§¦å‘ 5 æ¬¡çš„è¯·æ±‚å‹ç¼©ä¸º 1 æ¬¡ï¼Œåœ¨ä¿è¯å“åº”åˆç†æ€§çš„åŒæ—¶ï¼Œæ˜¾è‘—é™ä½äº†ç³»ç»Ÿå¼€é”€ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/113b191e8b064c2a90f091e3af17f807~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pyJ5oSP5LmJ:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767696651&amp;x-signature=%2BQvPU7OUSdquiCw9E2tGVrVVM8w%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-5">ä½¿ç”¨ç¤ºä¾‹</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// 1.html Lines 58-69</span>
<span class="hljs-keyword">const</span> debounceAjax = <span class="hljs-title function_">debounce</span>(ajax, <span class="hljs-number">500</span>);

inputb.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'keyup'</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) {
  <span class="hljs-title function_">debounceAjax</span>(e.<span class="hljs-property">target</span>.<span class="hljs-property">value</span>);
});
</code></pre>
<hr/>
<h2 data-id="heading-6">ä¸‰ã€èŠ‚æµï¼ˆThrottleï¼‰æœºåˆ¶</h2>
<h3 data-id="heading-7">æ ¸å¿ƒæ€æƒ³</h3>
<blockquote>
<p><strong>åœ¨å›ºå®šæ—¶é—´é—´éš”å†…ï¼Œæœ€å¤šæ‰§è¡Œä¸€æ¬¡å‡½æ•°ã€‚</strong></p>
</blockquote>
<p>æˆ‘æ­£åœ¨ç©ä¸€æ¬¾FPSæ¸¸æˆï¼Œæ‰‹æŒ‡æ­»æ­»æŒ‰ä½é¼ æ ‡å·¦é”®ç–¯ç‹‚æ‰«å°„â€”â€”</p>
<p>å¯æ¸¸æˆé‡Œçš„æªæ ¹æœ¬æ²¡è·Ÿç€æˆ‘çš„èŠ‚å¥â€œçªçªçªâ€åˆ°åº•ã€‚æ˜æ˜æˆ‘ä¸€ç§’ç‚¹äº†åä¸‹ï¼Œå®ƒå´ç¨³ç¨³åœ°â€œå“’ã€å“’ã€å“’â€ï¼Œæ¯éš”å›ºå®šæ—¶é—´æ‰å°„å‡ºä¸€å‘å­å¼¹ã€‚</p>
<p>åæ¥æˆ‘æ‰æ˜ç™½ï¼šè¿™ä¸æ˜¯å¡é¡¿ï¼Œè€Œæ˜¯<strong>å°„é€Ÿé™åˆ¶</strong>åœ¨èµ·ä½œç”¨ã€‚æ— è®ºæˆ‘å¤šç€æ€¥ã€æŒ‰å¾—å¤šå¿«ï¼Œç³»ç»Ÿéƒ½ä¼šå†·é™åœ°æŒ‰è‡ªå·±çš„èŠ‚å¥æ¥ï¼Œæ—¢ä¸è®©ç«åŠ›è¿‡çŒ›ç ´åå¹³è¡¡ï¼Œä¹Ÿä¸è®©æˆ‘ç™½ç™½æµªè´¹å¼¹è¯ã€‚</p>
<blockquote>
<p>è¿™å°±åƒ<strong>èŠ‚æµ</strong>ï¼šä¸ç®¡äº‹ä»¶è§¦å‘å¾—å¤šå¯†é›†ï¼Œå‡½æ•°éƒ½åšæŒâ€œå®šæ—¶æ‰“å¡â€ï¼Œä¸å¤šä¸å°‘ï¼Œç¨³ç¨³æ‰§è¡Œã€‚</p>
</blockquote>
<blockquote>
<p>è¿™ç§è®¾è®¡å“²å­¦ï¼ŒåŒæ ·è¢«ç°ä»£å¼€å‘å·¥å…·æ‰€é‡‡çº³</p>
</blockquote>
<p>æ¯”å¦‚äº¬ä¸œç­‰ç”µå•†å¹³å°ï¼šé¼ æ ‡æ»šåŠ¨æ—¶ï¼Œé¡µé¢éœ€è¦ä¸æ–­åˆ¤æ–­æ˜¯å¦å·²æ»‘åŠ¨åˆ°å•†å“åˆ—è¡¨åº•éƒ¨ï¼Œä»è€Œå†³å®šæ˜¯å¦è‡ªåŠ¨åŠ è½½ä¸‹ä¸€é¡µå•†å“ã€‚</p>
<p>å¦‚æœå¯¹æ¯ä¸€æ¬¡æ»šåŠ¨äº‹ä»¶éƒ½ç«‹å³å“åº”ï¼Œæµè§ˆå™¨ä¼šå› é¢‘ç¹è®¡ç®—å’Œå‘èµ·ç½‘ç»œè¯·æ±‚è€Œå¡é¡¿ï¼Œå°¤å…¶åœ¨ä½ç«¯è®¾å¤‡ä¸Šä½“éªŒæ›´å·®ã€‚</p>
<blockquote>
<p>äºæ˜¯ï¼Œå¼€å‘è€…ä¼šä½¿ç”¨<strong>èŠ‚æµ</strong>æœºåˆ¶â€”â€”å°†æ»šåŠ¨å¤„ç†å‡½æ•°é™åˆ¶ä¸ºæ¯ 200~300 æ¯«ç§’æœ€å¤šæ‰§è¡Œä¸€æ¬¡ã€‚è¿™æ ·ï¼Œå³ä½¿ç”¨æˆ·å¿«é€Ÿæ‹–åŠ¨æ»šåŠ¨æ¡ï¼Œç³»ç»Ÿä¹Ÿåªä¼šåœ¨å›ºå®šé—´éš”â€œæŠ½æ ·â€æ£€æŸ¥ä½ç½®ï¼Œæ—¢ä¿è¯äº†åŠ è½½çš„åŠæ—¶æ€§ï¼Œåˆé¿å…äº†æ€§èƒ½è¿‡è½½ã€‚</p>
</blockquote>
<p>æ¢å¥è¯è¯´ï¼š<strong>æˆ‘ä¸åœ¨ä¹ä½ æ»šå¾—å¤šå¿«ï¼Œæˆ‘åªæŒ‰è‡ªå·±çš„èŠ‚å¥å¹²æ´»</strong>â€”â€”è¿™æ­£æ˜¯èŠ‚æµåœ¨çœŸå®åœºæ™¯ä¸­çš„ä»·å€¼ã€‚</p>
<h3 data-id="heading-8">ä»£ç å®ç°</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// 1.html Lines 32-52</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">throttle</span>(<span class="hljs-params">fn, delay</span>) {
  <span class="hljs-keyword">let</span> last = <span class="hljs-number">0</span>;       <span class="hljs-comment">// ä¸Šæ¬¡æ‰§è¡Œçš„æ—¶é—´æˆ³</span>
  <span class="hljs-keyword">let</span> deferTimer = <span class="hljs-literal">null</span>;

  <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span>(<span class="hljs-params">...args</span>) {
    <span class="hljs-keyword">const</span> now = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();
    <span class="hljs-keyword">const</span> that = <span class="hljs-variable language_">this</span>;

    <span class="hljs-keyword">if</span> (last &amp;&amp; now &lt; last + delay) {
      <span class="hljs-comment">// è¿˜æœªåˆ°ä¸‹æ¬¡æ‰§è¡Œæ—¶é—´ï¼šå»¶è¿Ÿæ‰§è¡Œï¼Œå¹¶ç¡®ä¿æœ€åä¸€æ¬¡èƒ½è§¦å‘</span>
      <span class="hljs-built_in">clearTimeout</span>(deferTimer);
      deferTimer = <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
        last = now;
        fn.<span class="hljs-title function_">apply</span>(that, args);
      }, delay - (now - last));
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-comment">// å¯ç«‹å³æ‰§è¡Œ</span>
      last = now;
      fn.<span class="hljs-title function_">apply</span>(that, args);
    }
  };
}
</code></pre>
<h3 data-id="heading-9">å…³é”®ç‚¹è§£æ</h3>
<p>èŠ‚æµå‡½æ•°é€šè¿‡é—­åŒ…ç»´æŠ¤ä¸¤ä¸ªå…³é”®çŠ¶æ€ï¼š</p>
<p><code>last</code> è®°å½•ä¸Šä¸€æ¬¡å®é™…æ‰§è¡Œçš„æ—¶é—´æˆ³ï¼Œ<code>deferTimer</code> åˆ™ç”¨äºç®¡ç†å¯èƒ½çš„å»¶è¿Ÿæ‰§è¡Œä»»åŠ¡ã€‚</p>
<p>æ¯å½“äº‹ä»¶è¢«è§¦å‘ï¼Œå‡½æ•°ä¼šå…ˆè·å–å½“å‰æ—¶é—´ï¼Œå¹¶åˆ¤æ–­è·ç¦»ä¸Šæ¬¡æ‰§è¡Œæ˜¯å¦å·²è¶…è¿‡è®¾å®šçš„é—´éš” <code>delay</code>ã€‚</p>
<p>å¦‚æœå°šæœªåˆ°å†·å´æœŸï¼ˆå³ <code>now &lt; last + delay</code>ï¼‰ï¼Œå®ƒä¸ä¼šç«‹å³æ‰§è¡Œï¼Œè€Œæ˜¯æ¸…é™¤ä¹‹å‰å®‰æ’çš„å»¶è¿Ÿä»»åŠ¡ï¼Œå¹¶æ ¹æ®å‰©ä½™æ—¶é—´é‡æ–°è®¾ç½®ä¸€ä¸ªå®šæ—¶å™¨ï¼Œç¡®ä¿åœ¨å½“å‰å‘¨æœŸç»“æŸæ—¶è‡³å°‘æ‰§è¡Œä¸€æ¬¡ï¼›</p>
<p>å¦‚æœå·²ç»è¿‡äº†å†·å´æœŸï¼Œåˆ™ç›´æ¥æ‰§è¡Œå‡½æ•°å¹¶æ›´æ–° <code>last</code>ã€‚è¿™ç§æœºåˆ¶æ—¢å®ç°äº†â€œå›ºå®šé¢‘ç‡æ‰§è¡Œâ€çš„èŠ‚å¥æ§åˆ¶ï¼Œåˆå·§å¦™åœ°ä¿è¯äº†åœ¨è¿ç»­é«˜é¢‘è§¦å‘çš„æœ«å°¾ä»èƒ½å“åº”æœ€åä¸€æ¬¡æ“ä½œã€‚</p>
<p>ä¾‹å¦‚ï¼Œåœ¨ <code>delay = 500ms</code> çš„é…ç½®ä¸‹ï¼Œæ— è®ºç”¨æˆ·åœ¨çŸ­æ—¶é—´å†…è§¦å‘å¤šå°‘æ¬¡äº‹ä»¶ï¼Œå‡½æ•°éƒ½ä¼šåœ¨ 0msã€500msã€1000ms ç­‰æ—¶é—´ç‚¹ç¨³å®šæ‰§è¡Œï¼Œæ—¢é¿å…äº†è¿‡åº¦è°ƒç”¨ï¼Œåˆä¸ä¸¢å¤±å…³é”®çš„æœ€ç»ˆçŠ¶æ€ã€‚</p>
<h3 data-id="heading-10">ä½¿ç”¨ç¤ºä¾‹</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// 1.html Lines 59-62</span>
<span class="hljs-keyword">const</span> throttleAjax = <span class="hljs-title function_">throttle</span>(ajax, <span class="hljs-number">500</span>);

inputc.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'keyup'</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) {
  <span class="hljs-title function_">throttleAjax</span>(e.<span class="hljs-property">target</span>.<span class="hljs-property">value</span>);
});
</code></pre>
<hr/>
<h2 data-id="heading-11">å››ã€å…¸å‹åº”ç”¨åœºæ™¯</h2>
<h3 data-id="heading-12">é˜²æŠ–é€‚ç”¨åœºæ™¯</h3>
<blockquote>
<p><strong>é˜²æŠ–</strong>æœ€é€‚åˆé‚£äº›â€œåªå…³å¿ƒæœ€ç»ˆç»“æœâ€çš„äº¤äº’åœºæ™¯ã€‚</p>
</blockquote>
<p>ä¾‹å¦‚ï¼Œåœ¨ç™¾åº¦æˆ–æ·˜å®çš„æœç´¢æ¡†ä¸­ï¼Œç”¨æˆ·ä¸€è¾¹è¾“å…¥ä¸€è¾¹æœŸå¾…å»ºè®®è¯ï¼Œä½†å¦‚æœæ¯æ•²ä¸€ä¸ªå­—æ¯å°±ç«‹åˆ»å‘èµ·è¯·æ±‚ï¼Œä¸ä»…ä¼šåˆ¶é€ å¤§é‡æ— æ„ä¹‰çš„ç½‘ç»œè°ƒç”¨ï¼Œè¿˜å¯èƒ½å› ä¸­é—´æ€ï¼ˆå¦‚æ‹¼éŸ³æœªå®Œæˆï¼‰è¿”å›é”™è¯¯ç»“æœã€‚</p>
<p>é€šè¿‡é˜²æŠ–ï¼Œç³»ç»Ÿä¼šè€å¿ƒç­‰åˆ°ç”¨æˆ·åœé¡¿ç‰‡åˆ»ï¼ˆæ¯”å¦‚ 300 æ¯«ç§’ï¼‰ï¼Œå†ä»¥æœ€ç»ˆè¾“å…¥å†…å®¹å‘èµ·ä¸€æ¬¡ç²¾å‡†æŸ¥è¯¢ã€‚</p>
<p>ç±»ä¼¼çš„é€»è¾‘ä¹Ÿé€‚ç”¨äºè¡¨å•å­—æ®µçš„éªŒè¯â€”â€”åªæœ‰å½“ç”¨æˆ·çœŸæ­£è¾“å®Œå¹¶ç¨ä½œåœé¡¿ï¼Œæ‰è§¦å‘æ ¡éªŒï¼Œé¿å…åœ¨è¾“å…¥è¿‡ç¨‹ä¸­ä¸æ–­å¼¹å‡ºé”™è¯¯æç¤ºå¹²æ‰°æ“ä½œã€‚</p>
<blockquote>
<p>ç®€è¨€ä¹‹ï¼Œé˜²æŠ–åœ¨â€œå¤ªå¿«å¯¼è‡´èµ„æºæµªè´¹â€å’Œâ€œå¤ªæ…¢å½±å“ä½“éªŒâ€ä¹‹é—´æ‰¾åˆ°äº†æœ€ä½³å¹³è¡¡ç‚¹ã€‚</p>
</blockquote>
<h3 data-id="heading-13">èŠ‚æµé€‚ç”¨åœºæ™¯</h3>
<blockquote>
<p>ç›¸æ¯”ä¹‹ä¸‹ï¼Œ<strong>èŠ‚æµ</strong>åˆ™é€‚ç”¨äºéœ€è¦â€œæŒç»­å“åº”ä½†å¿…é¡»é™é¢‘â€çš„åœºæ™¯ã€‚</p>
</blockquote>
<p>æ¯”å¦‚åœ¨äº¬ä¸œã€æ˜é‡‘ç­‰ç”µå•†æˆ–å†…å®¹å¹³å°ï¼Œç”¨æˆ·å¿«é€Ÿæ»šåŠ¨é¡µé¢æ—¶ï¼Œç³»ç»Ÿéœ€åˆ¤æ–­æ˜¯å¦å·²æ»‘åˆ°åº•éƒ¨ä»¥åŠ è½½æ›´å¤šå•†å“æˆ–å¸–å­ã€‚è‹¥å¯¹æ¯ä¸€æ¬¡æ»šåŠ¨éƒ½ç«‹å³å“åº”ï¼Œæµè§ˆå™¨å°†ä¸å ªé‡è´Ÿã€‚</p>
<p>è€Œé€šè¿‡èŠ‚æµï¼ˆå¦‚æ¯ 300 æ¯«ç§’æœ€å¤šæ‰§è¡Œä¸€æ¬¡æ£€æŸ¥ï¼‰ï¼Œæ—¢èƒ½åŠæ—¶æ„ŸçŸ¥æ»šåŠ¨è¡Œä¸ºï¼Œåˆé¿å…è¿‡åº¦è®¡ç®—ã€‚</p>
<p>åŒæ ·ï¼Œé¼ æ ‡ç§»åŠ¨æˆ–å…ƒç´ æ‹–æ‹½è¿‡ç¨‹ä¸­ï¼Œå®æ—¶æ›´æ–°åæ ‡è‹¥ä¸åŠ é™åˆ¶ï¼Œææ˜“é€ æˆç•Œé¢å¡é¡¿ï¼›èŠ‚æµèƒ½ç¡®ä¿ UI ä»¥ç¨³å®šå¸§ç‡æ›´æ–°ï¼Œä¿æŒæµç•…æ„Ÿã€‚ç”šè‡³åœ¨æŸäº›å¯¹ <code>resize</code> äº‹ä»¶è¦æ±‚å®æ—¶åé¦ˆçš„åœºæ™¯ï¼ˆå¦‚åŠ¨æ€è°ƒæ•´ç”»å¸ƒæˆ–è§†é¢‘æ¯”ä¾‹ï¼‰ï¼Œä¹Ÿä¼šé‡‡ç”¨èŠ‚æµè€Œéé˜²æŠ–ï¼Œä»¥å…¼é¡¾å“åº”æ€§ä¸æ€§èƒ½ã€‚</p>
<hr/>
<blockquote>
<p>é˜²æŠ–ä¸èŠ‚æµï¼Œçœ‹ä¼¼ç®€å•ï¼Œå´æ˜¯å‰ç«¯æ€§èƒ½ä¼˜åŒ–çš„åŸºçŸ³ã€‚æŒæ¡å®ƒä»¬ï¼Œå°±æŒæ¡äº†åœ¨â€œå“åº”é€Ÿåº¦â€ä¸â€œç³»ç»Ÿè´Ÿæ‹…â€ä¹‹é—´ä¼˜é›…å¹³è¡¡çš„è‰ºæœ¯ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-14">äº”ã€å®Œæ•´ç¤ºä¾‹ä»£ç </h2>
<p>ä¸Šé¢çš„ä»£ç </p>
<pre><code class="hljs language-js" lang="js">&lt;!<span class="hljs-variable constant_">DOCTYPE</span> html&gt;
&lt;html lang="en"&gt;
&lt;head&gt;
  &lt;meta charset="UTF-8"&gt;
  &lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;
  &lt;title&gt;é˜²æŠ–&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;div&gt;
    &lt;input type="text" id="undebounce" /&gt;
    &lt;br&gt;
    &lt;input type="text" id="debounce" /&gt;
    &lt;br&gt;
    &lt;input type="text" id="throttle" /&gt;
  &lt;/div&gt;
  &lt;script&gt;
  function ajax(content) {
    console.log('ajax request', content);
  }
  // é«˜é˜¶å‡½æ•° å‚æ•°æˆ–è¿”å›å€¼ï¼ˆé—­åŒ…ï¼‰æ˜¯å‡½æ•°ï¼ˆå‡½æ•°å°±æ˜¯å¯¹è±¡ï¼‰ 
  function debounce(fn, delay) {
    var id; // è‡ªç”±å˜é‡ 
    return function(args) {
      if(id) clearTimeout(id);
      var that = this;
      id = setTimeout(function(){
        fn.call(that, args)
      }, delay);
    }
  }
  // èŠ‚æµ fn æ‰§è¡Œçš„ä»»åŠ¡ 
  function throttle(fn, delay) {
    let 
      last, 
      deferTimer;
    return function() {
      let that = this; // this ä¸¢å¤±
      let _args = arguments // ç±»æ•°ç»„å¯¹è±¡
      let now = + new Date(); // ç±»å‹è½¬æ¢ï¼Œ æ¯«ç§’æ•°
      // ä¸Šæ¬¡æ‰§è¡Œè¿‡ è¿˜æ²¡åˆ°æ‰§è¡Œæ—¶é—´
      if(last &amp;&amp; now &lt; last + delay) {
        clearTimeout(deferTimer);
        deferTimer = setTimeout(function(){
          last = now;
          fn.apply(that, _args);
        }, delay - (now - last));
      } else {
        last = now;
        fn.apply(that, _args);
      }
    }
  }
  
  const inputa = document.getElementById('undebounce');
  const inputb = document.getElementById('debounce');
  const inputc = document.getElementById('throttle');

  let debounceAjax = debounce(ajax, 500);
  let throttleAjax = throttle(ajax, 500);
  inputc.addEventListener('keyup', function(e) {
    throttleAjax(e.target.value)
  })
  // é¢‘ç¹è§¦å‘
  inputa.addEventListener('keyup', function(e) {
    ajax(e.target.value) // è›®å¤æ‚
  })
  inputb.addEventListener('keyup', function(e) {
    debounceAjax(e.target.value)
  })
  &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[é˜²æŠ– vs èŠ‚æµï¼šä»ç™¾åº¦æœç´¢åˆ°äº¬ä¸œç”µå•†ï¼Œçœ‹å‰ç«¯æ€§èƒ½ä¼˜åŒ–çš„â€œèŠ‚å¥å“²å­¦â€]]></title>    <link>https://juejin.cn/post/7589477775210250292</link>    <guid>https://juejin.cn/post/7589477775210250292</guid>    <pubDate>2025-12-30T10:51:07.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589477775210250292" data-draft-id="7589466356779827252" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="é˜²æŠ– vs èŠ‚æµï¼šä»ç™¾åº¦æœç´¢åˆ°äº¬ä¸œç”µå•†ï¼Œçœ‹å‰ç«¯æ€§èƒ½ä¼˜åŒ–çš„â€œèŠ‚å¥å“²å­¦â€"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript"/> <meta itemprop="datePublished" content="2025-12-30T10:51:07.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ €ç§‹666"/> <meta itemprop="url" content="https://juejin.cn/user/2566698322650307"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            é˜²æŠ– vs èŠ‚æµï¼šä»ç™¾åº¦æœç´¢åˆ°äº¬ä¸œç”µå•†ï¼Œçœ‹å‰ç«¯æ€§èƒ½ä¼˜åŒ–çš„â€œèŠ‚å¥å“²å­¦â€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2566698322650307/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ €ç§‹666
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-30T10:51:07.000Z" title="Tue Dec 30 2025 10:51:07 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    2
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><hr/>
<h2 data-id="heading-0">ğŸ”å¼•è¨€</h2>
<p>åœ¨ç°ä»£ Web åº”ç”¨ä¸­ï¼Œç”¨æˆ·äº¤äº’è¶Šæ¥è¶Šé¢‘ç¹â€”â€”ä½ æ•²ä¸€ä¸ªå­—ã€æ»‘ä¸€æ¬¡å±ã€ç‚¹ä¸€ä¸‹æŒ‰é’®ï¼ŒèƒŒåå¯èƒ½è§¦å‘æ•°åæ¬¡äº‹ä»¶å›è°ƒã€‚å¦‚æœæ¯ä¸ªåŠ¨ä½œéƒ½ç«‹åˆ»æ‰§è¡Œå¤æ‚é€»è¾‘ï¼ˆæ¯”å¦‚è¯·æ±‚æ¥å£ã€é‡ç»˜ DOMï¼‰ï¼Œè½»åˆ™å¡é¡¿ï¼Œé‡åˆ™é¡µé¢å´©æºƒã€‚</p>
<p>è€ŒçœŸæ­£ä¼˜ç§€çš„ç”¨æˆ·ä½“éªŒï¼Œå¾€å¾€è—åœ¨é‚£äº›ä½ çœ‹ä¸è§çš„åœ°æ–¹ï¼š<br/>
ğŸ‘‰ ç™¾åº¦è¾“å…¥â€œå‰ç«¯â€åä¸æ€¥ç€æœï¼Œè€Œæ˜¯ç­‰ä½ åœé¡¿æ‰å‡ºå»ºè®®ï¼›<br/>
ğŸ‘‰ äº¬ä¸œæ»šåŠ¨åŠ è½½å•†å“æ—¶ï¼Œä¸ä¼šâ€œåˆ·å±å¼â€ç–¯ç‹‚è¯·æ±‚æ•°æ®â€¦â€¦</p>
<p>è¿™ä¸€åˆ‡çš„èƒŒåï¼Œæ˜¯ä¸¤ä¸ªçœ‹ä¼¼ç®€å•å´å¨åŠ›å·¨å¤§çš„æŠ€æœ¯â€”â€”<strong>é˜²æŠ–ï¼ˆDebounceï¼‰ä¸èŠ‚æµï¼ˆThrottleï¼‰</strong>ã€‚</p>
<p>æœ¬æ–‡å°†å¸¦ä½ æ·±å…¥å‰–æå®ƒä»¬çš„å®ç°åŸç†ã€é€‚ç”¨åœºæ™¯ä¸å®æˆ˜å·®å¼‚ï¼Œç»“åˆç™¾åº¦ã€äº¬ä¸œçš„çœŸå®æ¡ˆä¾‹ï¼Œæ­ç¤ºå‰ç«¯æ€§èƒ½ä¼˜åŒ–ä¸­çš„â€œèŠ‚å¥æ§åˆ¶è‰ºæœ¯â€ã€‚</p>
<hr/>
<h3 data-id="heading-1">ğŸŒªï¸ ä¸€ã€ä¸ºä»€ä¹ˆæˆ‘ä»¬éœ€è¦â€œèŠ‚åˆ¶â€å‡½æ•°ï¼Ÿ</h3>
<p>æƒ³è±¡ä½ åœ¨é¤å…ç‚¹é¤ï¼š</p>
<ul>
<li>å¦‚æœæœåŠ¡å‘˜æ¯å¬åˆ°ä½ è¯´ä¸€ä¸ªèœåå°±è·‘å»å¨æˆ¿ä¸‹å• â†’ å¨æˆ¿ç‚¸é”…ï¼›</li>
<li>æ­£ç¡®åšæ³•æ˜¯ï¼šç­‰ä½ è¯´å®Œæ‰€æœ‰èœï¼Œå†ç»Ÿä¸€æäº¤è®¢å•ã€‚</li>
</ul>
<p>å‰ç«¯å¼€å‘ä¹Ÿæ˜¯å¦‚æ­¤ã€‚ä»¥ä¸‹é«˜é¢‘äº‹ä»¶è‹¥ä¸åšå¤„ç†ï¼Œææ˜“é€ æˆèµ„æºæµªè´¹ï¼š</p>






























<table><thead><tr><th>äº‹ä»¶ç±»å‹</th><th>è§¦å‘é¢‘ç‡</th><th>æ½œåœ¨é—®é¢˜</th></tr></thead><tbody><tr><td><code>input</code> / <code>keyup</code></td><td>æ¯è¾“å…¥ä¸€ä¸ªå­—ç¬¦è§¦å‘ä¸€æ¬¡</td><td>å¤šä½™çš„ Ajax è¯·æ±‚</td></tr><tr><td><code>scroll</code></td><td>æ»šåŠ¨æœŸé—´æŒç»­è§¦å‘</td><td>é¢‘ç¹è®¡ç®—ä½ç½®å¯¼è‡´é‡æ’é‡ç»˜</td></tr><tr><td><code>resize</code></td><td>çª—å£æ‹–æ‹½æ—¶å¯†é›†è§¦å‘</td><td>å¸ƒå±€é‡ç®—å½±å“æ¸²æŸ“æ€§èƒ½</td></tr><tr><td><code>click</code></td><td>å¿«é€Ÿç‚¹å‡»å¤šæ¬¡</td><td>è¡¨å•é‡å¤æäº¤ã€è®¢å•åˆ›å»ºå¼‚å¸¸</td></tr></tbody></table>
<p>è¿™äº›é—®é¢˜çš„æœ¬è´¨æ˜¯ï¼š<strong>äº‹ä»¶è§¦å‘é¢‘ç‡è¿œé«˜äºæˆ‘ä»¬å®é™…éœ€è¦çš„æ‰§è¡Œé¢‘ç‡</strong>ã€‚</p>
<p>äºæ˜¯ï¼Œæˆ‘ä»¬å¼•å…¥ä¸¤ä½â€œèŠ‚åˆ¶å¤§å¸ˆâ€â€”â€”</p>
<p>ğŸ¯ <strong>é˜²æŠ–ï¼ˆDebounceï¼‰</strong>ï¼šåªå“åº”æœ€åä¸€æ¬¡æ“ä½œ<br/>
â±ï¸ <strong>èŠ‚æµï¼ˆThrottleï¼‰</strong>ï¼šæŒ‰å›ºå®šèŠ‚å¥å“åº”æ“ä½œ</p>
<p>å®ƒä»¬ä¸æ˜¯æ¶ˆç­äº‹ä»¶ï¼Œè€Œæ˜¯æ•™ä¼šå‡½æ•°â€œä½•æ—¶è¯¥è¯´è¯â€ã€‚</p>
<hr/>
<h3 data-id="heading-2">ğŸ’¡ äºŒã€é˜²æŠ–ï¼ˆDebounceï¼‰â€”â€” ç™¾åº¦æœç´¢çš„â€œå†·é™æœŸæ™ºæ…§â€</h3>
<h4 data-id="heading-3">ğŸ“ å…¸å‹åœºæ™¯ï¼šæœç´¢å»ºè®®å»¶è¿Ÿæ˜¾ç¤º</h4>
<p>å½“ä½ åœ¨ç™¾åº¦æœç´¢æ¡†è¾“å…¥â€œJavaScript â€ï¼Œ</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/aa810acc3f4d40a58d7d76a082f339a8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5qCA56eLNjY2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767696682&amp;x-signature=ZZ6F6OBQgB3hsh4wQUUYNyR3Zx8%3D" alt="image.png" loading="lazy"/></p>
<p>ä½ ä¼šå‘ç°ï¼š</p>
<ul>
<li>è¾“å…¥è¿‡ç¨‹ä¸­ï¼Œå¹¶æ²¡æœ‰å®æ—¶å‘èµ·è¯·æ±‚ï¼›</li>
<li>åªæœ‰å½“ä½ åœä¸‹æ¥çº¦ 300ms åï¼Œæ‰çœ‹åˆ°ä¸‹æ‹‰å»ºè®®å¼¹å‡ºã€‚</li>
</ul>
<p>è¿™æ­£æ˜¯é˜²æŠ–çš„ç»å…¸åº”ç”¨ï¼š<strong>ç­‰å¾…ç”¨æˆ·æ“ä½œç»“æŸåçš„â€œé™é»˜æ—¶åˆ»â€ï¼Œå†æ‰§è¡ŒçœŸæ­£é€»è¾‘</strong>ã€‚</p>
<p>å¦‚æœæ²¡æœ‰é˜²æŠ–ï¼Ÿ<br/>
è¾“å…¥ 5 ä¸ªå­— â†’ å‘èµ· 5 æ¬¡è¯·æ±‚ â†’ æœåŠ¡å™¨å‹åŠ›ç¿»å€ + ç”¨æˆ·ä½“éªŒæ··ä¹±ï¼ˆæ—§ç»“æœè¦†ç›–æ–°ç»“æœï¼‰ã€‚</p>
<p>ç”¨äº†é˜²æŠ–ï¼Ÿ<br/>
æ— è®ºä½ æ‰“äº†å¤šä¹…ï¼Œæœ€ç»ˆåªå‘ä¸€æ¬¡è¯·æ±‚ â€”â€” å¹²å‡€åˆ©è½ã€‚</p>
<h4 data-id="heading-4">âœ… å®ç°åŸç†ï¼šé—­åŒ… + å®šæ—¶å™¨ = â€œé‡ç½®å€’è®¡æ—¶â€</h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">debounce</span>(<span class="hljs-params">fn,delay</span>){
  <span class="hljs-keyword">var</span> id;  <span class="hljs-comment">//è‡ªç”±å˜é‡</span>
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span>(<span class="hljs-params">args</span>){
       <span class="hljs-keyword">if</span>(id) <span class="hljs-built_in">clearTimeout</span>(id);
       <span class="hljs-keyword">var</span> that=<span class="hljs-variable language_">this</span>; <span class="hljs-comment">//ç”¨thatä¿å­˜this</span>
        id=<span class="hljs-built_in">setTimeout</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params"/>){
        <span class="hljs-comment">// fn.call(that); </span>
        fn.<span class="hljs-title function_">call</span>(that,args);
        },delay);
  }
 }
</code></pre>
<p>ğŸ”§ <strong>å…³é”®ç‚¹è§£æï¼š</strong></p>
<ul>
<li><code>clearTimeout(id)</code>ï¼šæ¯æ¬¡è§¦å‘éƒ½å–æ¶ˆä¹‹å‰çš„è®¡åˆ’ï¼Œç¡®ä¿åªæœ‰æœ€åä¸€æ¬¡ç”Ÿæ•ˆã€‚</li>
<li><code>setTimeout</code>ï¼šè®¾ç½®â€œå†·é™æœŸâ€ï¼ŒæœŸé—´æ— æ–°åŠ¨ä½œåˆ™æ‰§è¡Œã€‚</li>
<li><code>call(this, args)</code>ï¼šä¿æŒåŸå‡½æ•°è°ƒç”¨ä¸Šä¸‹æ–‡å’Œå‚æ•°å®Œæ•´ã€‚</li>
</ul>
<p>ğŸ§  <strong>ç±»æ¯”ç†è§£ï¼šç”µæ¢¯å…³é—¨æœºåˆ¶</strong></p>
<blockquote>
<p>å°±åƒå†™å­—æ¥¼çš„ç”µæ¢¯â€”â€”æœ‰äººè¿›æ¥å°±æš‚åœå…³é—¨ï¼Œç›´åˆ°è¿ç»­ 3 ç§’æ²¡äººè¿›å‡ºï¼Œæ‰è‡ªåŠ¨å…³é—­è¿è¡Œã€‚<br/>
é˜²æŠ–å°±æ˜¯ç»™å‡½æ•°åŠ äº†ä¸ªâ€œæ™ºèƒ½é—¨ç¦â€ï¼Œåªè®©æœ€åä¸€ä¸ªäººè¿›å»ã€‚</p>
</blockquote>
<h4 data-id="heading-5">ğŸ› ï¸ å®æˆ˜ç¤ºä¾‹ï¼šç»‘å®šæœç´¢æ¡†</h4>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"searchInput"</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"è¯·è¾“å…¥å…³é”®è¯"</span>&gt;</span>
</code></pre>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> inputEl = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'searchInput'</span>);

<span class="hljs-keyword">function</span> <span class="hljs-title function_">fetchSuggestions</span>(<span class="hljs-params">keyword</span>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'è¯·æ±‚åç«¯è·å–å»ºè®®:'</span>, keyword);
  <span class="hljs-comment">// è¿™é‡Œå¯ä»¥è°ƒç”¨ API</span>
}

<span class="hljs-comment">// ä½¿ç”¨é˜²æŠ–åŒ…è£…è¯·æ±‚å‡½æ•°</span>
<span class="hljs-keyword">const</span> debouncedFetch = <span class="hljs-title function_">debounce</span>(fetchSuggestions, <span class="hljs-number">300</span>);

inputEl.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'input'</span>, <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {
  <span class="hljs-title function_">debouncedFetch</span>(e.<span class="hljs-property">target</span>.<span class="hljs-property">value</span>);
});
</code></pre>
<p>âœ… æ•ˆæœï¼šå¿«é€Ÿè¾“å…¥ä¸åœæ­¢ â†’ ä¸è¯·æ±‚ï¼›åœæ­¢è¾“å…¥ 300ms â†’ è¯·æ±‚ä¸€æ¬¡æœ€æ–°å€¼ã€‚</p>
<hr/>
<h3 data-id="heading-6">â±ï¸ ä¸‰ã€èŠ‚æµï¼ˆThrottleï¼‰â€”â€” äº¬ä¸œæ»šåŠ¨åŠ è½½çš„â€œå‘è½¦èŠ‚å¥â€</h3>
<h4 data-id="heading-7">ğŸ“ å…¸å‹åœºæ™¯ï¼šæ— é™æ»šåŠ¨å•†å“åˆ—è¡¨</h4>
<p>æ‰“å¼€äº¬ä¸œé¦–é¡µï¼Œå‘ä¸‹æ»šåŠ¨æµè§ˆå•†å“ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/eeedbbd3a09a410c854900a1d05db955~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5qCA56eLNjY2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767696682&amp;x-signature=wDqjMSAyPFeo57FyKZtukq6rkTE%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/381770bfd5194d8990de36d9d401a9be~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5qCA56eLNjY2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767696682&amp;x-signature=bqhWeq%2FBRkA1Cplkr7rlVNGfen4%3D" alt="lQLPJxRxFJIgWT_NA7bNBk-wbMl5INfmGnYJLTRxXOrIAA_1615_950.png" loading="lazy"/></p>
<ul>
<li>å³ä½¿ä½ é£é€Ÿæ»‘åŠ¨é¼ æ ‡æ»šè½®ï¼›</li>
<li>å•†å“ä¹Ÿä¸ä¼šç¬é—´å…¨åŠ è½½å‡ºæ¥ï¼›</li>
<li>è€Œæ˜¯æ¯éš”åŠç§’å·¦å³â€œåˆ†æ‰¹â€å‡ºç°æ–°å†…å®¹ã€‚</li>
</ul>
<p>è¿™ä¸æ˜¯ç½‘ç»œæ…¢ï¼Œè€Œæ˜¯èŠ‚æµåœ¨å·¥ä½œï¼š<strong>æ§åˆ¶å‡½æ•°ä»¥å›ºå®šé¢‘ç‡æ‰§è¡Œï¼Œé˜²æ­¢è¿‡åº¦æ¶ˆè€—èµ„æº</strong>ã€‚</p>
<p>å¦‚æœæ²¡æœ‰èŠ‚æµï¼Ÿ<br/>
æ»šåŠ¨ä¸€ä¸‹è§¦å‘å‡ åæ¬¡åˆ¤æ–­ â†’ é¢‘ç¹è¯·æ±‚æ¥å£ â†’ æ•°æ®é”™ä¹±ã€å†…å­˜é£™å‡ã€‚</p>
<p>ç”¨äº†èŠ‚æµï¼Ÿ<br/>
å“ªæ€•ä½ æ»šå¾—å†å¿«ï¼Œä¹Ÿä¿è¯æ¯ 500ms æœ€å¤šåŠ è½½ä¸€æ¬¡ â†’ ç³»ç»Ÿç¨³å®šã€ä½“éªŒæµç•…ã€‚</p>
<h4 data-id="heading-8">âœ… å®ç°åŸç†ï¼šæ—¶é—´æˆ³ + å®šæ—¶å™¨ = â€œèŠ‚æ‹å™¨æ¨¡å¼â€</h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">throttle</span>(<span class="hljs-params">fn, delay</span>) {
  <span class="hljs-keyword">let</span> lastTime = <span class="hljs-number">0</span>;       <span class="hljs-comment">// ä¸Šæ¬¡æ‰§è¡Œæ—¶é—´</span>
  <span class="hljs-keyword">let</span> deferTimer = <span class="hljs-literal">null</span>;  <span class="hljs-comment">// å»¶è¿Ÿæ‰§è¡Œçš„å®šæ—¶å™¨</span>

  <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span> (<span class="hljs-params">...args</span>) {
    <span class="hljs-keyword">const</span> context = <span class="hljs-variable language_">this</span>;
    <span class="hljs-keyword">const</span> now = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();

    <span class="hljs-keyword">if</span> (now - lastTime &gt; delay) {
      <span class="hljs-comment">// æ—¶é—´åˆ°äº†ï¼Œç«‹å³æ‰§è¡Œ</span>
      lastTime = now;
      fn.<span class="hljs-title function_">apply</span>(context, args);
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-comment">// æ—¶é—´æœªåˆ°ï¼Œå®‰æ’æœ€åä¸€æ¬¡è§¦å‘å…œåº•</span>
      <span class="hljs-built_in">clearTimeout</span>(deferTimer);
      deferTimer = <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
        lastTime = now;
        fn.<span class="hljs-title function_">apply</span>(context, args);
      }, delay);
    }
  };
}
</code></pre>
<p>ğŸ”§ <strong>å…³é”®ç‚¹è§£æï¼š</strong></p>
<ul>
<li><code>Date.now()</code> è·å–å½“å‰æ—¶é—´æˆ³ï¼Œç”¨äºæ¯”è¾ƒé—´éš”ï¼›</li>
<li><code>lastTime</code> è®°å½•ä¸Šæ¬¡æ‰§è¡Œæ—¶é—´ï¼Œå†³å®šæ˜¯å¦æ”¾è¡Œï¼›</li>
<li><code>deferTimer</code> æ˜¯â€œè¡¥ç¥¨æœºåˆ¶â€â€”â€”é˜²æ­¢æœ€åä¸€æ¬¡è§¦å‘è¢«é—æ¼ã€‚</li>
</ul>
<p>ğŸš‚ <strong>ç±»æ¯”ç†è§£ï¼šåœ°é“å‘è½¦åˆ¶åº¦</strong></p>
<blockquote>
<p>åœ°é“ä¸ç®¡ç«™å°äººå¤šäººå°‘ï¼Œéƒ½æ˜¯æ¯ 5 åˆ†é’Ÿå‘ä¸€ç­è½¦ã€‚<br/>
èŠ‚æµå°±åƒè¿™ä¸ªâ€œå‡†æ—¶å‘è½¦ç³»ç»Ÿâ€ï¼Œä¸ç®¡ä½ æ»šå¾—å¤šçŒ›ï¼Œæˆ‘éƒ½æŒ‰æˆ‘çš„èŠ‚å¥æ¥ã€‚</p>
</blockquote>
<h4 data-id="heading-9">ğŸ› ï¸ å®æˆ˜ç¤ºä¾‹ï¼šç›‘å¬é¡µé¢æ»šåŠ¨åŠ è½½</h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">checkIfNearBottom</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> scrollTop = <span class="hljs-variable language_">window</span>.<span class="hljs-property">pageYOffset</span>;
  <span class="hljs-keyword">const</span> clientHeight = <span class="hljs-variable language_">window</span>.<span class="hljs-property">innerHeight</span>;
  <span class="hljs-keyword">const</span> scrollHeight = <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-property">scrollHeight</span>;

  <span class="hljs-keyword">if</span> (scrollTop + clientHeight &gt;= scrollHeight - <span class="hljs-number">100</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ¥è¿‘åº•éƒ¨ï¼ŒåŠ è½½ä¸‹ä¸€é¡µå•†å“'</span>);
    <span class="hljs-comment">// loadMoreProducts();</span>
  }
}

<span class="hljs-comment">// åŒ…è£…æˆèŠ‚æµå‡½æ•°</span>
<span class="hljs-keyword">const</span> throttledScroll = <span class="hljs-title function_">throttle</span>(checkIfNearBottom, <span class="hljs-number">500</span>);

<span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'scroll'</span>, throttledScroll);
</code></pre>
<p>âœ… æ•ˆæœï¼šå¿«é€Ÿæ»šåŠ¨æ—¶ï¼Œæœ€å¤šæ¯ 500ms æ£€æŸ¥ä¸€æ¬¡æ˜¯å¦åˆ°åº•éƒ¨ï¼Œé¿å…æ— æ•ˆè®¡ç®—ã€‚</p>
<hr/>
<h3 data-id="heading-10">ğŸ†š å››ã€é˜²æŠ– vs èŠ‚æµï¼šä¸€å¼ è¡¨è¯´æ¸…æ‰€æœ‰åŒºåˆ«</h3>













































<table><thead><tr><th>ç»´åº¦</th><th>é˜²æŠ–ï¼ˆDebounceï¼‰</th><th>èŠ‚æµï¼ˆThrottleï¼‰</th></tr></thead><tbody><tr><td><strong>æ ¸å¿ƒæ€æƒ³</strong></td><td>ç­‰å¾…â€œé£å¹³æµªé™â€åå†è¡ŒåŠ¨</td><td>æŒ‰å›ºå®šèŠ‚å¥ç¨³æ­¥æ¨è¿›</td></tr><tr><td><strong>æ‰§è¡Œæ¬¡æ•°</strong></td><td>åªæ‰§è¡Œæœ€åä¸€æ¬¡</td><td>æ¯ä¸ªæ—¶é—´é—´éš”è‡³å°‘æ‰§è¡Œä¸€æ¬¡</td></tr><tr><td><strong>è§¦å‘æ—¶æœº</strong></td><td>å»¶è¿Ÿç»“æŸåæ‰§è¡Œ</td><td>é—´éš”å¼€å§‹æˆ–ç»“æŸæ—¶æ‰§è¡Œ</td></tr><tr><td><strong>å…¸å‹åº”ç”¨åœºæ™¯</strong></td><td>æœç´¢å»ºè®®ã€è¡¨å•éªŒè¯ã€çª—å£ resize</td><td>æ»šåŠ¨åŠ è½½ã€æ‹–æ‹½ã€é«˜é¢‘ç‚¹å‡»</td></tr><tr><td><strong>å‡½æ•°æ‰§è¡Œé¢‘ç‡</strong></td><td>æä½ï¼ˆå¯èƒ½å…¨ç¨‹åªæ‰§è¡Œ 1 æ¬¡ï¼‰</td><td>ç¨³å®šï¼ˆå¦‚ 1s å†…è§¦å‘ 20 æ¬¡ï¼Œä»åªæ‰§è¡Œ 2 æ¬¡ï¼‰</td></tr><tr><td><strong>ç”Ÿæ´»ç±»æ¯”</strong></td><td>ç”µæ¢¯ç­‰äººä¸Šé½å†å…³é—¨</td><td>åœ°é“å‡†ç‚¹å‘è½¦ï¼Œä¸ç­‰äººæ»¡</td></tr><tr><td><strong>é€‚åˆçš„æ“ä½œç‰¹å¾</strong></td><td>å¸Œæœ›â€œå®Œæˆåæ‰å¤„ç†â€</td><td>å¸Œæœ›â€œè¿‡ç¨‹ä¸­å®šæœŸåé¦ˆâ€</td></tr></tbody></table>
<h4 data-id="heading-11">ğŸ“Š æ‰§è¡Œè¡Œä¸ºå¯¹æ¯”ï¼ˆå‡è®¾ delay = 300msï¼‰</h4>

















































<table><thead><tr><th>æ—¶é—´çº¿ï¼ˆmsï¼‰</th><th>0</th><th>100</th><th>200</th><th>300</th><th>400</th><th>500</th><th>600</th><th>700</th></tr></thead><tbody><tr><td>äº‹ä»¶è§¦å‘</td><td>âœ…</td><td>âœ…</td><td>âœ…</td><td>âŒ</td><td>âœ…</td><td>âœ…</td><td>âœ…</td><td>âœ…</td></tr><tr><td>é˜²æŠ–æ‰§è¡Œ</td><td>âŒ</td><td>âŒ</td><td>âŒ</td><td>âŒ</td><td>âŒ</td><td>âŒ</td><td>âŒ</td><td>âœ…ï¼ˆä»…æœ€åä¸€æ¬¡ï¼‰</td></tr><tr><td>èŠ‚æµæ‰§è¡Œ</td><td>âœ…</td><td>âŒ</td><td>âŒ</td><td>âŒ</td><td>âœ…</td><td>âŒ</td><td>âŒ</td><td>âœ…ï¼ˆæ¯ ~300ms ä¸€æ¬¡ï¼‰</td></tr></tbody></table>
<blockquote>
<p>ğŸ’¡ ç»“è®ºï¼š</p>
<ul>
<li>é˜²æŠ–è¿½æ±‚â€œç²¾ç®€â€ï¼Œç‰ºç‰²è¿‡ç¨‹ä¿ç»“æœï¼›</li>
<li>èŠ‚æµè¿½æ±‚â€œèŠ‚å¥â€ï¼Œå¹³è¡¡æ•ˆç‡ä¸è´Ÿè½½ã€‚</li>
</ul>
</blockquote>
<hr/>
<h3 data-id="heading-12">ğŸ¯ äº”ã€å¦‚ä½•é€‰æ‹©ï¼Ÿä¸‰å¤§å†³ç­–åŸåˆ™</h3>
<p>é¢å¯¹é«˜é¢‘äº‹ä»¶ï¼Œåˆ«å†ç›²ç›®ä½¿ç”¨ <code>setTimeout</code> æŠ¹é»‘äº†ã€‚æ ¹æ®ä¸šåŠ¡ç›®æ ‡åšç†æ€§é€‰æ‹©ï¼š</p>
<h4 data-id="heading-13">âœ… åŸåˆ™ 1ï¼šçœ‹â€œè¦ä¸è¦ä¸­é—´åé¦ˆâ€</h4>
<ul>
<li>âœ… <strong>ä¸éœ€è¦ä¸­é—´çŠ¶æ€ï¼Ÿé€‰é˜²æŠ–</strong><br/>
å¦‚æœç´¢æ¡†è¾“å…¥ï¼šä¸­é—´ç»“æœæ²¡æ„ä¹‰ï¼Œåªè¦æœ€ç»ˆå…³é”®è¯ã€‚</li>
<li>âœ… <strong>éœ€è¦è¿‡ç¨‹åé¦ˆï¼Ÿé€‰èŠ‚æµ</strong><br/>
å¦‚æ¸¸æˆæ‰‹æŸ„æ‘‡æ†ç§»åŠ¨ï¼šå¿…é¡»æŒç»­å“åº”æ–¹å‘å˜åŒ–ã€‚</li>
</ul>
<h4 data-id="heading-14">âœ… åŸåˆ™ 2ï¼šçœ‹â€œæ˜¯å¦å…è®¸å»¶è¿Ÿâ€</h4>
<ul>
<li>âœ… <strong>èƒ½æ¥å—çŸ­æš‚åœé¡¿ï¼Ÿé˜²æŠ–æ›´çœèµ„æº</strong><br/>
å¦‚ç”¨æˆ·åå”¯ä¸€æ€§æ ¡éªŒï¼Œç­‰ç”¨æˆ·è¾“å®Œå†æŸ¥ã€‚</li>
<li>âœ… <strong>è¦æ±‚å³æ—¶å“åº”ï¼ŸèŠ‚æµæ›´åˆé€‚</strong><br/>
å¦‚éŸ³é‡è°ƒèŠ‚æ»‘å—ï¼Œå¿…é¡»å®æ—¶æ›´æ–° UIã€‚</li>
</ul>
<h4 data-id="heading-15">âœ… åŸåˆ™ 3ï¼šçœ‹â€œæ‰§è¡Œæˆæœ¬é«˜ä½â€</h4>
<ul>
<li>âœ… æˆæœ¬æé«˜ï¼ˆå¦‚å‘é‚®ä»¶ã€ä¸‹å•ï¼‰â†’ ä¼˜å…ˆé˜²æŠ–ï¼Œé˜²æ­¢è¯¯æ“ä½œï¼›</li>
<li>âœ… æˆæœ¬è¾ƒä½ä½†é¢‘æ¬¡é«˜ï¼ˆå¦‚ç›‘å¬é¼ æ ‡ä½ç½®ï¼‰â†’ ä¼˜å…ˆèŠ‚æµï¼Œç»´æŒèŠ‚å¥ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-16">ğŸ§© å…­ã€è¿›é˜¶æŠ€å·§ &amp; æœ€ä½³å®è·µ</h3>
<h4 data-id="heading-17">1. æ”¯æŒç«‹å³æ‰§è¡Œçš„é˜²æŠ–ï¼ˆLeading Edgeï¼‰</h4>
<p>æœ‰æ—¶æˆ‘ä»¬å¸Œæœ›â€œç¬¬ä¸€æ¬¡ç«‹åˆ»æ‰§è¡Œâ€ï¼Œåç»­æ‰é˜²æŠ–ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">debounceImmediate</span>(<span class="hljs-params">fn, delay, immediate = <span class="hljs-literal">false</span></span>) {
  <span class="hljs-keyword">let</span> timerId;

  <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span> (<span class="hljs-params">...args</span>) {
    <span class="hljs-keyword">const</span> callNow = immediate &amp;&amp; !timerId;
    <span class="hljs-keyword">const</span> context = <span class="hljs-variable language_">this</span>;

    <span class="hljs-built_in">clearTimeout</span>(timerId);

    <span class="hljs-keyword">if</span> (callNow) {
      fn.<span class="hljs-title function_">apply</span>(context, args);
    }

    timerId = <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
      timerId = <span class="hljs-literal">null</span>;
      <span class="hljs-keyword">if</span> (!immediate) fn.<span class="hljs-title function_">apply</span>(context, args);
    }, delay);
  };
}
</code></pre>
<p>ğŸ“Œ é€‚ç”¨åœºæ™¯ï¼šæŒ‰é’®ç‚¹å‡»é˜²é‡å¤æäº¤ï¼Œé¦–æ¬¡ç‚¹å‡»ç«‹åˆ»ç”Ÿæ•ˆã€‚</p>
<hr/>
<h4 data-id="heading-18">2. èŠ‚æµçš„ä¸¤ç§ç­–ç•¥ï¼šæ—¶é—´æˆ³ vs å®šæ—¶å™¨</h4>




















<table><thead><tr><th>ç±»å‹</th><th>ç‰¹ç‚¹</th><th>ç¼ºç‚¹</th></tr></thead><tbody><tr><td>æ—¶é—´æˆ³ç‰ˆ</td><td>é¦–æ¬¡ç«‹å³æ‰§è¡Œï¼Œæœ«æ¬¡å¯èƒ½ä¸¢å¤±</td><td>è‹¥åœæ­¢è§¦å‘ï¼Œæœ€åä¸€æ¬¡ä¸ä¼šæ‰§è¡Œ</td></tr><tr><td>å®šæ—¶å™¨ç‰ˆ</td><td>ä¿è¯æ¯æ¬¡éƒ½èƒ½æ‰§è¡Œï¼ŒèŠ‚å¥ç¨³å®š</td><td>ç¬¬ä¸€æ¬¡ä¼šæœ‰å»¶è¿Ÿ</td></tr></tbody></table>
<p>æ¨èä½¿ç”¨æ–‡ä¸­æä¾›çš„â€œæ··åˆæ¨¡å¼â€ï¼šå…¼é¡¾é¦–æ¬¡ä¸æœ«æ¬¡ã€‚</p>
<hr/>
<h4 data-id="heading-19">3. å®é™…é¡¹ç›®ä¸­çš„é…ç½®å»ºè®®</h4>



































<table><thead><tr><th>åœºæ™¯</th><th>æ¨èå»¶è¿Ÿ/é—´éš”</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>æœç´¢å»ºè®®</td><td>200â€“300ms</td><td>å¤ªçŸ­æ˜“è¯¯è§¦ï¼Œå¤ªé•¿å½±å“ä½“éªŒ</td></tr><tr><td>æ»šåŠ¨åŠ è½½</td><td>500â€“800ms</td><td>ç»™æµè§ˆå™¨ç•™å‡ºæ¸²æŸ“æ—¶é—´</td></tr><tr><td>çª—å£ resize</td><td>300ms</td><td>é¿å…é¢‘ç¹é‡æ’</td></tr><tr><td>è¡¨å•å®æ—¶éªŒè¯</td><td>400ms</td><td>ç”¨æˆ·æ‰“å­—èŠ‚å¥åŒ¹é…</td></tr><tr><td>é«˜é¢‘æŒ‰é’®é˜²é‡å¤æäº¤</td><td>1000ms</td><td>æäº¤åéœ€ç­‰å¾…æ¥å£è¿”å›ï¼Œé˜²æ­¢åŒè®¢å•</td></tr></tbody></table>
<blockquote>
<p>âš ï¸ æ³¨æ„ï¼šä¸è¦ç¡¬ç¼–ç ï¼å»ºè®®é€šè¿‡é…ç½®é¡¹åŠ¨æ€è°ƒæ•´ï¼Œä¾¿äº A/B æµ‹è¯•ä¼˜åŒ–ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-20">ğŸ ä¸ƒã€æ€»ç»“ï¼šæŒæ¡â€œèŠ‚å¥æ„Ÿâ€ï¼Œæ‰æ˜¯é«˜çº§å‰ç«¯</h3>
<p>é˜²æŠ–ä¸èŠ‚æµï¼Œè¡¨é¢æ˜¯ä¸¤ä¸ªå·¥å…·å‡½æ•°ï¼Œå®åˆ™æ˜¯å‰ç«¯å·¥ç¨‹å¸ˆå¯¹ <strong>ç”¨æˆ·è¡Œä¸ºèŠ‚å¥çš„ç†è§£</strong>ã€‚</p>
<blockquote>
<p>ğŸ”¥ <strong>çœŸæ­£çš„æ€§èƒ½ä¼˜åŒ–ï¼Œä¸åªæ˜¯å‡å°‘è¯·æ±‚ï¼Œæ›´æ˜¯å­¦ä¼šâ€œç­‰å¾…â€ä¸â€œå…‹åˆ¶â€</strong>ã€‚</p>
</blockquote>
<ul>
<li>ç™¾åº¦ç”¨é˜²æŠ–å‘Šè¯‰æˆ‘ä»¬ï¼š<strong>æœ‰æ—¶å€™æ…¢ä¸€ç‚¹ï¼Œåè€Œæ›´å¿«</strong>ï¼›</li>
<li>äº¬ä¸œç”¨èŠ‚æµæé†’æˆ‘ä»¬ï¼š<strong>å†æ¿€çƒˆçš„åŠ¨ä½œï¼Œä¹Ÿè¦æœ‰ç« æ³•åœ°åº”å¯¹</strong>ã€‚</li>
</ul>
<p>åœ¨é«˜å¹¶å‘ã€å¼ºäº¤äº’çš„æ—¶ä»£ï¼Œæ¯ä¸€ä¸ªä¼˜é›…çš„äº¤äº’èƒŒåï¼Œéƒ½æœ‰ä¸€ä¸ªé»˜é»˜å®ˆå€™çš„ <code>setTimeout</code>ã€‚</p>
<hr/></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[vfit.js v2.0.0 å‘å¸ƒï¼šç²¾ç®€ã€è¯­ä¹‰åŒ–ä¸æ ¸å¿ƒé‡æ„ ğŸ‰]]></title>    <link>https://juejin.cn/post/7588865809473912872</link>    <guid>https://juejin.cn/post/7588865809473912872</guid>    <pubDate>2025-12-29T04:27:25.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588865809473912872" data-draft-id="7588865809473896488" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="vfit.js v2.0.0 å‘å¸ƒï¼šç²¾ç®€ã€è¯­ä¹‰åŒ–ä¸æ ¸å¿ƒé‡æ„ ğŸ‰"/> <meta itemprop="keywords" content="å‰ç«¯,Vue.js,å“åº”å¼è®¾è®¡"/> <meta itemprop="datePublished" content="2025-12-29T04:27:25.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸€é¢—çƒ‚åœŸè±†"/> <meta itemprop="url" content="https://juejin.cn/user/764915822371912"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            vfit.js v2.0.0 å‘å¸ƒï¼šç²¾ç®€ã€è¯­ä¹‰åŒ–ä¸æ ¸å¿ƒé‡æ„ ğŸ‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/764915822371912/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸€é¢—çƒ‚åœŸè±†
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-29T04:27:25.000Z" title="Mon Dec 29 2025 04:27:25 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-29
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body cache result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>è· vfit.js åˆç‰ˆå‘å¸ƒä»…ä¸€ä¸ªæœˆï¼Œæˆ‘ä»¬å°±æ”¶åˆ°äº†è¶…é¢„æœŸçš„å¼€å‘è€…å…³æ³¨ â€”â€” æ¯ä¸€æ¡åé¦ˆã€æ¯ä¸€æ¬¡è®¨è®ºï¼Œéƒ½è®©æˆ‘ä»¬æ›´æ¸…æ™°åœ°çœ‹åˆ°å¤§å±é€‚é…åœºæ™¯ä¸­çš„çœŸå®éœ€æ±‚ã€‚åŸºäºè¿™ä»½çƒ­æƒ…ä¸ä¿¡ä»»ï¼Œæˆ‘ä»¬å¾ˆé«˜å…´åœ°å®£å¸ƒï¼Œvfit.js è¿æ¥äº†Â <strong>v2.0.0</strong>Â é‡å¤§ç‰ˆæœ¬æ›´æ–°ï¼</p>
<p>æœ¬æ¬¡æ›´æ–°ä¸ä»…ä»…æ˜¯ç‰ˆæœ¬å·çš„æå‡ï¼Œæ›´æ˜¯å¯¹å¤§å±é€‚é…ç†å¿µçš„ä¸€æ¬¡æ·±åº¦æ¢³ç†ã€‚æˆ‘ä»¬ä»â€œä¸‡èƒ½é€‚é…â€èµ°å‘äº†â€œç²¾å‡†è¯­ä¹‰â€ï¼Œé€šè¿‡å…¨æ–°çš„ç»„ä»¶ä½“ç³»å’Œé‡æ„çš„æ ¸å¿ƒé€»è¾‘ï¼Œä¸ºå¼€å‘è€…æä¾›æ›´ä¼˜é›…ã€æ›´é«˜æ•ˆçš„å¤§å±å¼€å‘ä½“éªŒã€‚</p>
<h2 data-id="heading-0">ğŸš€ æ ¸å¿ƒäº®ç‚¹</h2>
<h3 data-id="heading-1">1. å…¨æ–°çš„è¯­ä¹‰åŒ–ç»„ä»¶ä½“ç³» ğŸ§©</h3>
<p>åœ¨ v1.x ç‰ˆæœ¬ä¸­ï¼Œæˆ‘ä»¬ä¸»è¦ä¾èµ–Â <code>FitContainer</code>Â è¿™ä¸ªâ€œä¸‡èƒ½â€ç»„ä»¶æ¥å¤„ç†æ‰€æœ‰æ–¹ä½çš„é€‚é…ã€‚è™½ç„¶çµæ´»ï¼Œä½†åœ¨å®é™…å¼€å‘ä¸­ï¼Œå¤§é‡çš„Â <code>top</code>,Â <code>left</code>,Â <code>right</code>Â å‚æ•°å¾€å¾€è®©ä»£ç æ˜¾å¾—å†—ä½™ä¸”ä¸å¤Ÿç›´è§‚ã€‚</p>
<p>v2.0.0 å¼•å…¥äº†Â <strong>5 ä¸ªä¸“ç”¨æ–¹ä½ç»„ä»¶</strong>ï¼Œå°†å¸¸ç”¨çš„å¸ƒå±€æ¨¡å¼å›ºåŒ–ä¸ºè¯­ä¹‰æ¸…æ™°çš„ç»„ä»¶ï¼š</p>
<ul>
<li><strong><code>&lt;vfit-lt&gt;</code></strong> Â (Left-Top): å·¦ä¸Šè§’å®šä½ ğŸ”</li>
<li><strong><code>&lt;vfit-rt&gt;</code></strong> Â (Right-Top): å³ä¸Šè§’å®šä½ ğŸ”</li>
<li><strong><code>&lt;vfit-lb&gt;</code></strong> Â (Left-Bottom): å·¦ä¸‹è§’å®šä½ ğŸ”š</li>
<li><strong><code>&lt;vfit-rb&gt;</code></strong> Â (Right-Bottom): å³ä¸‹è§’å®šä½ ğŸ”š</li>
<li><strong><code>&lt;vfit-center&gt;</code></strong> Â (Center): å±…ä¸­å®šä½ ğŸ¯</li>
</ul>
<p><strong>å¯¹æ¯”ç¤ºä¾‹ï¼š</strong></p>
<p>æ—§ç‰ˆ (v1.x):</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-comment">&lt;!--Â éœ€è¦æ‰‹åŠ¨æŒ‡å®šå•ä½å’Œå…·ä½“åæ ‡Â --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">FitContainer</span>Â <span class="hljs-attr">:top</span>=<span class="hljs-string">"0"</span>Â <span class="hljs-attr">:left</span>=<span class="hljs-string">"0"</span>&gt;</span>
Â Â <span class="hljs-tag">&lt;<span class="hljs-name">Logo</span>Â /&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">FitContainer</span>&gt;</span>
</code></pre>
<p>æ–°ç‰ˆ (v2.0):</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-comment">&lt;!--Â è¯­ä¹‰æ˜ç¡®ï¼Œæ— éœ€å¤šä½™å‚æ•°Â --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">vfit-lt</span>&gt;</span>
Â Â <span class="hljs-tag">&lt;<span class="hljs-name">Logo</span>Â /&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">vfit-lt</span>&gt;</span>
</code></pre>
<p>è¿™ä¸€æ”¹å˜ä¸ä»…å‡å°‘äº†ä»£ç é‡ï¼Œæ›´è®©æ¨¡æ¿ç»“æ„ä¸€ç›®äº†ç„¶ã€‚</p>
<h3 data-id="heading-2">2. æ™ºèƒ½å±…ä¸­ä¸ Transform å†²çªè§£å†³ âœ¨</h3>
<p>åœ¨æ—§ç‰ˆæœ¬ä¸­ï¼Œå±…ä¸­ç»„ä»¶å¾€å¾€éœ€è¦å¤æ‚çš„å‚æ•°é…ç½®ï¼Œä¸”å®¹æ˜“ä¸ç”¨æˆ·è‡ªå®šä¹‰çš„ CSSÂ <code>transform</code>Â å‘ç”Ÿå†²çªã€‚</p>
<p>v2.0.0 å¯¹Â <code>vfit-center</code>Â è¿›è¡Œäº†æ·±åº¦ä¼˜åŒ–ï¼š</p>
<ul>
<li>Â <strong>é›¶å‚æ•°å±…ä¸­</strong>ï¼šé»˜è®¤å³å¯å®ç°å®Œç¾çš„å±å¹•å±…ä¸­ ğŸ¯ã€‚</li>
<li><strong>Transform èåˆ</strong>ï¼šå†…éƒ¨é€»è¾‘è‡ªåŠ¨å¤„ç†ç¼©æ”¾ï¼ˆScaleï¼‰ä¸ä½ç§»ï¼ˆTranslateï¼‰çš„åˆå¹¶ï¼Œå½»åº•è§£å†³äº† CSS æ ·å¼è¦†ç›–å¯¼è‡´çš„åç§»é—®é¢˜ ğŸ”§ã€‚</li>
</ul>
<h3 data-id="heading-3">3. æ ¸å¿ƒé€»è¾‘é‡æ„ï¼šComposables ğŸ”©</h3>
<p>ä¸ºäº†æé«˜ä»£ç çš„å¯ç»´æŠ¤æ€§å’Œå¤ç”¨æ€§ï¼Œæˆ‘ä»¬å°†æ ¸å¿ƒé€»è¾‘æŠ½ç¦»ä¸ºä¸¤ä¸ªç‹¬ç«‹çš„ Composable å‡½æ•°ï¼š</p>
<ul>
<li><strong><code>useFitScale</code></strong>: ä¸“æ³¨äºå±å¹•å°ºå¯¸ç›‘å¬ä¸å…¨å±€ç¼©æ”¾æ¯”ä¾‹è®¡ç®— ğŸ“ã€‚</li>
<li><strong><code>useFitPosition</code></strong>: ä¸“æ³¨äºå…ƒç´ å®šä½ä¸åæ ‡è½¬æ¢ ğŸ“ã€‚</li>
</ul>
<p>è¿™æ„å‘³ç€ä½ ä¸ä»…å¯ä»¥ä½¿ç”¨å†…ç½®ç»„ä»¶ï¼Œè¿˜å¯ä»¥ç›´æ¥åœ¨è‡ªå·±çš„ç»„ä»¶ä¸­å¼•å…¥è¿™äº› Hookï¼Œå®ç°é«˜åº¦å®šåˆ¶åŒ–çš„é€‚é…é€»è¾‘ã€‚</p>
<h2 data-id="heading-4">ğŸ“š æ–‡æ¡£ä¸ç”Ÿæ€å‡çº§</h2>
<ul>
<li><strong>ä¸­è‹±åŒè¯­åŒæ­¥</strong>ï¼šæ–‡æ¡£ç°å·²å®ç° 100% ä¸­è‹±å†…å®¹å¯¹é½ï¼ŒåŒ…æ‹¬æœ€æ–°çš„ç»„ä»¶ç¤ºä¾‹å’Œ API è¯´æ˜ï¼Œæ›´å¥½åœ°æœåŠ¡å…¨çƒå¼€å‘è€… ğŸŒã€‚</li>
<li><strong>èµåŠ©è€…å›é¦ˆ</strong>ï¼šæˆ‘ä»¬åœ¨æ–‡æ¡£ä¸­æ›´æ–°äº†èµåŠ©è€…åˆ—è¡¨ï¼Œæ„Ÿè°¢æ¯ä¸€ä½æ”¯æŒå¼€æºçš„æœ‹å‹ï¼ˆåŒ…æ‹¬é‚£ä½â€œäº§å“ç»ç†çš„å™©æ¢¦â€ ğŸ˜‰ï¼‰ğŸ™ã€‚</li>
<li><strong>é¦–é¡µç„•æ–°</strong>ï¼šé‡æ–°æ¢³ç†äº†é¦–é¡µç‰¹æ€§ä»‹ç»ï¼Œçªå‡ºäº†â€œç»„ä»¶åŒ–ç²¾å‡†å®šä½â€è¿™ä¸€æ ¸å¿ƒä¼˜åŠ¿ âœ¨ã€‚</li>
</ul>
<h2 data-id="heading-5">ğŸ“¦ å¦‚ä½•å‡çº§</h2>
<p>vfit.js v2.0.0 ç°å·²å‘å¸ƒåˆ° npmã€‚</p>
<pre><code class="hljs language-bash" lang="bash">npmÂ installÂ vfit@latest
</code></pre>
<p>å¯¹äºè€ç”¨æˆ·ï¼Œ<code>FitContainer</code>Â ä¾ç„¶ä¿ç•™å¹¶ä½œä¸ºâ€œé€šç”¨ç‰ˆâ€ç»„ä»¶ç»§ç»­æ”¯æŒï¼Œæ‚¨å¯ä»¥æ ¹æ®é¡¹ç›®éœ€æ±‚é€æ­¥è¿ç§»åˆ°æ–°çš„è¯­ä¹‰åŒ–ç»„ä»¶ ğŸ”„ã€‚</p>
<hr/>
<p>æ„Ÿè°¢æ‚¨å¯¹<a href="https://link.juejin.cn?target=https%3A%2F%2Fweb-vfit.netlify.app%2F" target="_blank" title="https://web-vfit.netlify.app/" ref="nofollow noopener noreferrer">vfit.js</a>çš„å…³æ³¨ä¸æ”¯æŒï¼Œè®©æˆ‘ä»¬ä¸€èµ·æ„å»ºæ›´ç¾å¥½çš„æ•°æ®å¯è§†åŒ–å¤§å±ï¼ğŸ’ª</p>
<ol>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fweb-vfit.netlify.app%2F" target="_blank" title="https://web-vfit.netlify.app/" ref="nofollow noopener noreferrer">æ–‡æ¡£åœ°å€</a>  <a href="https://link.juejin.cn?target=https%3A%2F%2Fweb-vfit.netlify.app%2F" target="_blank" title="https://web-vfit.netlify.app/" ref="nofollow noopener noreferrer">web-vfit.netlify.app/</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.npmjs.com%2Fpackage%2Fvfit" target="_blank" title="https://www.npmjs.com/package/vfit" ref="nofollow noopener noreferrer">npmåœ°å€</a>  <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.npmjs.com%2Fpackage%2Fvfit" target="_blank" title="https://www.npmjs.com/package/vfit" ref="nofollow noopener noreferrer">www.npmjs.com/package/vfiâ€¦</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fv-plugin%2Fvfit" target="_blank" title="https://github.com/v-plugin/vfit" ref="nofollow noopener noreferrer">githubåœ°å€</a> <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fv-plugin%2Fvfit" target="_blank" title="https://github.com/v-plugin/vfit" ref="nofollow noopener noreferrer">github.com/v-plugin/vfâ€¦</a></li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€Šç½‘é¡µå¸ƒå±€é€Ÿé€šï¼š8 å¤§ä¸»æµæ–¹æ¡ˆ + å®æˆ˜æ¡ˆä¾‹ã€‹-pinkè€å¸ˆç°ä»£ç½‘é¡µå¸ƒå±€æ€»ç»“]]></title>    <link>https://juejin.cn/post/7589146208225361956</link>    <guid>https://juejin.cn/post/7589146208225361956</guid>    <pubDate>2025-12-29T05:37:09.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589146208225361956" data-draft-id="7589102404168761363" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€Šç½‘é¡µå¸ƒå±€é€Ÿé€šï¼š8 å¤§ä¸»æµæ–¹æ¡ˆ + å®æˆ˜æ¡ˆä¾‹ã€‹-pinkè€å¸ˆç°ä»£ç½‘é¡µå¸ƒå±€æ€»ç»“"/> <meta itemprop="keywords" content="é¢è¯•,CSS,HTML"/> <meta itemprop="datePublished" content="2025-12-29T05:37:09.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç‹å°è²"/> <meta itemprop="url" content="https://juejin.cn/user/3025471246701496"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€Šç½‘é¡µå¸ƒå±€é€Ÿé€šï¼š8 å¤§ä¸»æµæ–¹æ¡ˆ + å®æˆ˜æ¡ˆä¾‹ã€‹-pinkè€å¸ˆç°ä»£ç½‘é¡µå¸ƒå±€æ€»ç»“
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3025471246701496/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç‹å°è²
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-29T05:37:09.000Z" title="Mon Dec 29 2025 05:37:09 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-29
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»13åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€æ¦‚è¿°ä¸ç›®æ ‡</h2>
<p>CSS å¸ƒå±€æ˜¯ç½‘é¡µè®¾è®¡çš„æ ¸å¿ƒæŠ€æœ¯ï¼Œä¸»è¦ç”¨äºæ§åˆ¶é¡µé¢å…ƒç´ çš„æ’åˆ—ä¸å‘ˆç°æ–¹å¼ã€‚ç›®å‰ä¸»æµçš„å¸ƒå±€æ–¹æ¡ˆåŒ…æ‹¬å¸¸è§„æ–‡æ¡£æµå¸ƒå±€ã€æ¨¡å¼è½¬æ¢å¸ƒå±€ã€å¼¹æ€§å¸ƒå±€ï¼ˆFlexboxï¼‰ã€å®šä½å¸ƒå±€ã€ç½‘æ ¼å¸ƒå±€ï¼ˆGridï¼‰å’Œå¤šåˆ—å¸ƒå±€ã€‚</p>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬ä¼šé€ä¸€æ‹†è§£å®ƒä»¬çš„ä¼˜ç¼ºç‚¹ä¸é€‚ç”¨åœºæ™¯ï¼Œå¸®ä½ å¿«é€Ÿçœ‹æ‡‚ä¸»æµå®˜ç½‘çš„å¸ƒå±€å®ç°æ€è·¯ã€‚</p>
<h2 data-id="heading-1">äºŒã€å¸¸è§„æ–‡æ¡£æµå¸ƒå±€</h2>
<p>è¿™æ˜¯æµè§ˆå™¨çš„é»˜è®¤æ’ç‰ˆï¼Œæ˜¯ CSS å¸ƒå±€çš„åŸºç¡€ï¼Œé¡µé¢å¤§ç»“æ„ä¾é å—å…ƒç´ ä¸Šä¸‹å †å å®ç°ã€‚åŒ…å«å—å…ƒç´ å’Œè¡Œå†…å…ƒç´ ï¼Œæ–‡æ¡£æµæ–¹å‘é»˜è®¤ä»ä¸Šåˆ°ä¸‹ã€ä»å·¦åˆ°å³æ’åˆ—ã€‚</p>













<table><thead><tr><th>å—å…ƒç´ ï¼ˆblockï¼‰</th><th>ç‹¬å ä¸€è¡Œï¼Œå®½åº¦é»˜è®¤æ’‘æ»¡å®¹å™¨ï¼›å¯è®¾ç½®å®½é«˜ï¼Œå‘ˆå‚ç›´æ’åˆ—ï¼›ä¸¾ä¾‹ï¼šdivã€pã€h1~h6</th></tr></thead><tbody><tr><td>è¡Œå†…å…ƒç´ ï¼ˆinlineï¼‰</td><td>æ°´å¹³ä¾æ¬¡æ’åˆ—ï¼Œå®¹å™¨å®½åº¦ä¸è¶³åˆ™æ¢è¡Œï¼›å®½é«˜ç”±å†…å®¹å†³å®šï¼Œæ— æ³•ç›´æ¥è®¾ç½®ï¼›ä¸¾ä¾‹ï¼šspanã€imgã€strong</td></tr></tbody></table>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8e8ed93120724d4abe5f05ec7d65ee5c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg546L5bCP6I-y:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767591428&amp;x-signature=IH1O9rtRbYPHNiWGSq6gw%2BIMpiY%3D" alt="image.png" loading="lazy"/><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e166b94d42a041e190175b6d045f5a18~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg546L5bCP6I-y:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767591428&amp;x-signature=rrpL8Phwv61E7RT%2BRmlZckhzYrA%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-2">ä¸‰ã€æ¨¡å¼è½¬æ¢å¸ƒå±€</h2>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3e4f976297ec456ab213b5bf1a300181~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg546L5bCP6I-y:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767591428&amp;x-signature=nQ3EzYBZRmmNgtcpK%2BX4aqFX5SE%3D" alt="image.png" loading="lazy"/><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/42429cb3a0294770b3d276e3690e0a16~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg546L5bCP6I-y:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767591428&amp;x-signature=EpUYzbLpAeRyT25QZFIsWvhZtIw%3D" alt="image.png" loading="lazy"/></p>
<p>å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œéœ€æ±‚è¦æ±‚æˆ‘ä»¬æŠŠå—çº§ç›’å­å±•ç¤ºä¸ºä¸€è¡Œï¼Œæˆ–è€…è¦æ±‚è¡Œå†…å…ƒç´ æœ‰æ›´å¤§çš„ç‚¹å‡»èŒƒå›´ï¼Œæˆ‘ä»¬æ”¹æ€ä¹ˆåŠå‘¢ï¼Ÿ</p>
<p>é‚£ä¹ˆå°±éœ€è¦ç”¨åˆ°<strong>displayè½¬æ¢ï¼Œ</strong> æˆ‘ä»¬å¯ä»¥å°†ä¸Šé¢ä¸¤ç§å…ƒç´ çš„displayå±æ€§è®¾ç½®ä¸º<strong>inline-block,</strong> å¯å®ç°ä¸Šè¿°æ•ˆæœ</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b52066f78a6148b3a12aa9671ef997b6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg546L5bCP6I-y:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767591428&amp;x-signature=MRcAzxiag54GxpfwdtswA51vRo8%3D" alt="image.png" loading="lazy"/><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/78b5a6d6b71b4161a6e81432b4228c2d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg546L5bCP6I-y:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767591428&amp;x-signature=GAXRXLg%2FvGJmI7AeQD6ipFRikd8%3D" alt="image.png" loading="lazy"/></p>
<p>displayè½¬æ¢ä¸º inline-blockåï¼Œå¯ä»¥è®¾ç½®å®½é«˜ï¼Œåˆä¸ç”¨ç‹¬å ä¸€è¡Œï¼Œè¿™ç§ç‰¹ç‚¹è®©å®ƒå¯ä»¥å¹¿æ³›åº”ç”¨äºè®©å—çº§ç›’å­ä¸€è¡Œæ˜¾ç¤ºæˆ–è®©è¡Œå†…ç›’å­å…·å¤‡å®½é«˜çš„åœºæ™¯</p>





























<table><thead><tr><th><strong>å±æ€§å€¼</strong></th><th><strong>æ˜¯å¦ç‹¬å ä¸€è¡Œ</strong></th><th><strong>èƒ½å¦è®¾ç½®å®½é«˜</strong></th><th><strong>é»˜è®¤å®½åº¦</strong></th></tr></thead><tbody><tr><td>display: block</td><td>æ˜¯</td><td>âœ”ï¸</td><td>æ’‘æ»¡å®¹å™¨å®½åº¦</td></tr><tr><td>display: inline</td><td>å¦</td><td>âŒ</td><td>ç”±å†…å®¹å†³å®š</td></tr><tr><td>display: inline-block</td><td>å¦</td><td>âœ”ï¸</td><td>ç”±å†…å®¹å†³å®šï¼ˆå¯è¦†ç›–ï¼‰</td></tr></tbody></table>
<p>ä½†æ˜¯ä½¿ç”¨è¡Œå†…å—å…ƒç´ éœ€è¦æ³¨æ„ï¼š å…ƒç´ é—´ä¼šæœ‰ç©ºéš™ï¼Œéœ€è¦ç»™çˆ¶å…ƒç´ è®¾font-size: 0ï¼Œå› æ­¤é€‚åˆå¯¹é—´è·è¦æ±‚ä¸é«˜çš„åœºæ™¯ï¼Œå¦‚æœç²¾ç»†æ’ç‰ˆå»ºè®®ç”¨ Flexæˆ–Gridã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a1c3a881f50c4f4e9ae5ec7042114f9e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg546L5bCP6I-y:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767591428&amp;x-signature=9Vy2ikTrZQckUPf24u2gsLewkec%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-3">å››ã€è¢«é€æ¸æ›¿ä»£çš„float</h2>
<p>floatæœ€æ—©æ˜¯åšâ€æ–‡å­—ç¯ç»•â€æ•ˆæœçš„ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤º</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d0809fb9c0904a789f7978847143b885~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg546L5bCP6I-y:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767591428&amp;x-signature=ZVNvd%2FtuI7YlKsldgUSGuWVT52I%3D" alt="image.png" loading="lazy"/></p>
<p>floatå¯ä»¥è®©å…ƒç´ è„±ç¦»æ–‡æ¡£æµå‘å·¦æˆ–å‘å³æµ®åŠ¨ï¼Œ ä½†è¿™ä¼šå¯¼è‡´çˆ¶å®¹å™¨é«˜åº¦å¡Œé™·ï¼Œä»è€Œå½±å“å‘¨å›´å…ƒç´ çš„å¸ƒå±€ï¼Œä¾‹å¦‚ä¸‹å›¾1æ‰€ç¤ºã€‚è€Œå¾ˆå¤šæ—¶å€™æˆ‘ä»¬æ˜¯ä¸èƒ½ç»™çˆ¶å®¹å™¨è§„å®šé«˜åº¦çš„ï¼Œå®ƒçš„é«˜åº¦å–å†³äºåå°æœåŠ¡è¿”å›çš„æ•°æ®é‡ï¼Œä¾‹å¦‚äº¬ä¸œçš„è¿™ä¸ªå•†å“åˆ—è¡¨å±•ç¤ºï¼Œéšç€é¼ æ ‡çš„æ»šåŠ¨ï¼Œå•†å“ä¸æ–­å¢å¤šï¼Œé«˜åº¦ä¸æ–­å¢åŠ ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬æ€ä¹ˆåŠå‘¢ï¼Ÿ</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/086f7cc117d84e2891307561e1360602~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg546L5bCP6I-y:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767591428&amp;x-signature=yjA0NvtuYqNWmXc%2BDWcvydz%2Fy1U%3D" alt="image.png" loading="lazy"/><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/002224e0c0c14b039d679ad525824205~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg546L5bCP6I-y:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767591428&amp;x-signature=F4kjGFh82j2gFuV1poZC%2F7y3CKw%3D" alt="image.png" loading="lazy"/></p>
<p>è¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°±è¦è¿›è¡Œ<strong>æ¸…é™¤æµ®åŠ¨</strong>äº†ï¼Œä¸»è¦æœ‰ä»¥ä¸‹å››ç§æ–¹æ³•</p>
<p>1ã€åŒä¼ªå…ƒç´ æ¸…é™¤æµ®åŠ¨</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/71b0c97ed0ed415dae9b0e4c24a35cdb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg546L5bCP6I-y:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767591428&amp;x-signature=Z33zYm%2F6hSKaKjqOB8hcsJQti54%3D" alt="image.png" loading="lazy"/></p>
<p>2ã€å•ä¼ªå…ƒç´ æ¸…é™¤æµ®åŠ¨</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/007156cdf3f543c1ae2014c613b7d303~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg546L5bCP6I-y:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767591428&amp;x-signature=Ct4oidLWL4ANmG%2FQah2vK00OIII%3D" alt="image.png" loading="lazy"/></p>
<p>3ã€é¢å¤–æ ‡ç­¾æ³•ï¼šåœ¨æµ®åŠ¨å…ƒç´ æœ€åæ–°å¢å—çº§æ ‡ç­¾ï¼Œä½†å¢åŠ å†—ä½™æ ‡ç­¾</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d4671501f3f44985bb4fff77261a8893~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg546L5bCP6I-y:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767591428&amp;x-signature=7SjAfMQP%2Bb7pxZE8Xx9D88YyYwQ%3D" alt="image.png" loading="lazy"/></p>
<p>4ã€overflow æ¸…é™¤æµ®åŠ¨ï¼šè§¦å‘ BFC åŒ…è£¹æµ®åŠ¨å…ƒç´ <br/>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f45818c3e378482082f3669b9d5da5a8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg546L5bCP6I-y:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767591428&amp;x-signature=jBIEwuXkIX6P7HRjDbSm4hoJtdY%3D" alt="image.png" loading="lazy"/></p>
<p>å› ä¸ºfloaté—®é¢˜å¤ªå¤šï¼Œ è¦æ‰‹åŠ¨è§£å†³ â€œé«˜åº¦å¡Œé™·â€ï¼Œè¿˜å¾—å†™é¢å¤–ä»£ç æ¸…é™¤æµ®åŠ¨ï¼Œ æ’ç‰ˆç¨å¾®å¤æ‚ç‚¹å°±å®¹æ˜“é”™ä½ï¼Œå¯¹æ–°æ‰‹å¾ˆä¸å‹å¥½ï¼Œ ç°åœ¨æœ‰æ›´ç®€å•çš„ Flex/Grid å¸ƒå±€ï¼Œåˆçµæ´»åˆä¸å­˜åœ¨ä¸Šè¿°é—®é¢˜ï¼Œæ‰€ä»¥æµ®åŠ¨å°±æˆ â€œæ—¶ä»£çš„çœ¼æ³ªâ€äº†</p>
<h2 data-id="heading-4">äº”ã€å¼¹æ€§å¸ƒå±€</h2>
<p>Flexboxæ˜¯Flexible Box Layout Moduleï¼ˆå¼¹æ€§ç›’å­å¸ƒå±€æ¨¡å—ï¼‰çš„ç¼©å†™ï¼Œå¯ä»¥å¿«é€Ÿå®ç°å…ƒç´ çš„å¯¹é½ã€åˆ†å¸ƒå’Œç©ºé—´åˆ†é…ã€‚ä¾‹å¦‚äº¬ä¸œã€æ·˜å®ã€å°ç±³ç­‰ä¸»æµç½‘ç«™éƒ½ä½¿ç”¨äº†flexå¸ƒå±€ï¼Œè€Œä¸”æˆ‘ä»¬çš„ä½ä»£ç å¹³å°ä¹Ÿå¯ä»¥è®¾ç½®å…ƒç´ ä¸ºflexå¸ƒå±€</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4940a0a7750643c290fd9659dc1eb084~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg546L5bCP6I-y:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767591428&amp;x-signature=hMumX3%2FdFzJFJBm5pumgk4cC9Yk%3D" alt="image.png" loading="lazy"/><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/376b78ca0ace4a07b13f1c103c1d8d9e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg546L5bCP6I-y:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767591428&amp;x-signature=Z3MpAWohhVI8NKXpWIPqoWF%2Famc%3D" alt="image.png" loading="lazy"/><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/43c524a0868c46bfb9c4904241eff073~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg546L5bCP6I-y:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767591428&amp;x-signature=OQzFRH0wMKwbVA%2B09fLwtDx8Q20%3D" alt="image.png" loading="lazy"/></p>
<p><strong>æˆ‘ä»¬ä¸ºå•¥è¦ä½¿ç”¨flexå¸ƒå±€å‘¢ï¼Ÿ</strong></p>
<p>ä»¥Bç«™å¤´éƒ¨ä¸ºä¾‹ï¼Œæƒ³è¦å®ç°ä¸‹å›¾çš„æ•ˆæœï¼Œä¸‰ä¸ªå—çº§å…ƒç´ å¹¶æ’åœ¨ä¸€è¡Œï¼Œå®ç°ä¸¤ç«¯å¯¹é½çš„æ•ˆæœï¼Œç”¨ä¹‹å‰çš„åŠæ³•ï¼Œå¯èƒ½è¦å˜æˆè¡Œå†…å—ã€ç»™marginæˆ–è€…paddingæ¥å®ç°ï¼Œæˆ–è€…å¹²è„†é‡‡ç”¨æµ®åŠ¨çš„åŠæ³•ï¼Œé‚£ä¹ˆå®ç°å‚ç›´å±…ä¸­è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿ</p>
<p>å‚ç›´å±…ä¸­æ˜¯ä¼ ç»Ÿå¸ƒå±€çš„ â€œè€å¤§éš¾â€ï¼Œæœ‰çš„åŒå­¦å¯èƒ½è¯´ä½¿ç”¨line-heightï¼Œä½†æ˜¯line-heightæ˜¯æ— æ³•è®©å—çº§çš„ç›’å­å‚ç›´å±…ä¸­ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬å¯ä»¥ä½¿ç”¨flexï¼Œåªéœ€è¦ä¸‰è¡Œä»£ç ï¼ˆdisplay: flex;align-items: center;justify-content: space-between;ï¼‰å°±å¯ä»¥å®ç°Bç«™å¤´éƒ¨çš„å¸ƒå±€æ•ˆæœï¼Œæˆ‘ä»¬å…¬å¸çš„å®˜ç½‘å¤´éƒ¨ä¹Ÿæ˜¯ç±»ä¼¼çš„å®ç°æ–¹æ¡ˆ</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/de5e73157cf74462a6c4cdf49bdc1395~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg546L5bCP6I-y:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767591428&amp;x-signature=ePm5ia6PxyuhduYr6Kv%2BNxSof%2FU%3D" alt="image.png" loading="lazy"/><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/15fefe905a9243f8aa0d1dd5d8e0886e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg546L5bCP6I-y:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767591428&amp;x-signature=oO7h5pU%2Fye%2BgG3MQWyPT6QMVQcc%3D" alt="image.png" loading="lazy"/></p>
<h4 data-id="heading-5">1ã€flexå¸ƒå±€çš„æ ¸å¿ƒ</h4>
<p>çˆ¶æ§å­ï¼šçˆ¶ç›’å­æ§åˆ¶å­ç›’å­å¦‚ä½•æ’åˆ—å¸ƒå±€ï¼ˆçˆ¶ç›’å­ç§°ä¸ºå®¹å™¨ï¼Œå­ç›’å­ç§°ä¸ºé¡¹ç›®ï¼‰ï¼Œæ§åˆ¶å±æ€§è¦å†™åœ¨çˆ¶å…ƒç´ èº«ä¸Šï¼›</p>
<p>è½´æ–¹å‘ï¼šä¸»è½´é»˜è®¤æ°´å¹³ã€äº¤å‰è½´é»˜è®¤å‚ç›´ï¼Œå¯è‡ªå®šä¹‰ã€‚</p>
<h4 data-id="heading-6">2ã€flexçš„å±æ€§</h4>
<p>çˆ¶ç›’å­å±æ€§</p>








































<table><thead><tr><th><strong>å±æ€§</strong></th><th><strong>ä½œç”¨è¯´æ˜</strong></th><th><strong>æ‰€æœ‰å¯é€‰å€¼</strong></th></tr></thead><tbody><tr><td>display</td><td>å®šä¹‰å…ƒç´ ä¸º Flex å®¹å™¨</td><td>flex</td></tr><tr><td>flex-direction</td><td>å®šä¹‰ä¸»è½´æ–¹å‘ï¼ˆé¡¹ç›®æ’åˆ—æ–¹å‘ï¼‰</td><td>rowï¼ˆé»˜è®¤ï¼Œæ°´å¹³ä»å·¦åˆ°å³ï¼‰ã€row-reverseï¼ˆæ°´å¹³ä»å³åˆ°å·¦ï¼‰ã€columnï¼ˆå‚ç›´ä»ä¸Šåˆ°ä¸‹ï¼‰ã€column-reverseï¼ˆå‚ç›´ä»ä¸‹åˆ°ä¸Šï¼‰</td></tr><tr><td>flex-wrap</td><td>æ§åˆ¶é¡¹ç›®æ˜¯å¦æ¢è¡Œ</td><td>nowrapï¼ˆé»˜è®¤ï¼Œä¸æ¢è¡Œï¼‰ã€wrapï¼ˆæ¢è¡Œï¼Œç¬¬ä¸€è¡Œåœ¨ä¸Šï¼‰ã€wrap-reverseï¼ˆæ¢è¡Œï¼Œç¬¬ä¸€è¡Œåœ¨ä¸‹ï¼‰</td></tr><tr><td>justify-content</td><td>å®šä¹‰ä¸»è½´ä¸Šçš„å¯¹é½æ–¹å¼ï¼ˆé¡¹ç›®æ•´ä½“åˆ†å¸ƒï¼‰</td><td>flex-startï¼ˆé»˜è®¤ï¼Œé ä¸»è½´èµ·ç‚¹ï¼‰ã€flex-endï¼ˆé ä¸»è½´ç»ˆç‚¹ï¼‰ã€centerï¼ˆå±…ä¸­ï¼‰ã€space-betweenï¼ˆä¸¤ç«¯å¯¹é½ï¼Œé¡¹ç›®é—´é—´è·ç›¸ç­‰ï¼‰ã€space-aroundï¼ˆé¡¹ç›®ä¸¤ä¾§é—´è·ç›¸ç­‰ï¼‰ã€space-evenlyï¼ˆé¡¹ç›®é—´é—´è·å®Œå…¨ç›¸ç­‰ï¼‰</td></tr><tr><td>align-items</td><td>å®šä¹‰äº¤å‰è½´ä¸Šçš„å¯¹é½æ–¹å¼ï¼ˆå•è¡Œæ—¶é¡¹ç›®æ•´ä½“å¯¹é½ï¼‰</td><td>stretchï¼ˆé»˜è®¤ï¼Œæ‹‰ä¼¸å¡«æ»¡å®¹å™¨ï¼‰ã€flex-startï¼ˆé äº¤å‰è½´èµ·ç‚¹ï¼‰ã€flex-endï¼ˆé äº¤å‰è½´ç»ˆç‚¹ï¼‰ã€centerï¼ˆå‚ç›´å±…ä¸­ï¼‰ã€</td></tr><tr><td>align-content</td><td>å®šä¹‰å¤šè¡Œæ—¶äº¤å‰è½´ä¸Šçš„å¯¹é½æ–¹å¼ï¼ˆä»…å½“ flex-wrap: wrap ä¸”å†…å®¹æ¢è¡Œæ—¶ç”Ÿæ•ˆï¼‰</td><td>stretchï¼ˆé»˜è®¤ï¼Œæ‹‰ä¼¸å¡«æ»¡å®¹å™¨ï¼‰ã€flex-startï¼ˆé äº¤å‰è½´èµ·ç‚¹ï¼‰ã€flex-endï¼ˆé äº¤å‰è½´ç»ˆç‚¹ï¼‰ã€centerï¼ˆå±…ä¸­ï¼‰ã€space-betweenï¼ˆä¸¤ç«¯å¯¹é½ï¼‰ã€space-aroundï¼ˆé¡¹ç›®è¡Œä¸¤ä¾§é—´è·ç›¸ç­‰ï¼‰</td></tr></tbody></table>
<p>é¡¹ç›®å±æ€§ï¼š</p>








































<table><thead><tr><th><strong>å±æ€§</strong></th><th><strong>ä½œç”¨è¯´æ˜</strong></th><th><strong>æ‰€æœ‰å¯é€‰å€¼ / å–å€¼è§„åˆ™</strong></th></tr></thead><tbody><tr><td>order</td><td>å®šä¹‰é¡¹ç›®çš„æ’åˆ—é¡ºåºï¼ˆé»˜è®¤ 0ï¼Œæ•°å€¼è¶Šå°è¶Šé å‰ï¼‰</td><td>ä»»æ„æ•´æ•°ï¼ˆæ­£æ•´æ•° / è´Ÿæ•´æ•° / 0ï¼‰ï¼Œæ— å•ä½</td></tr><tr><td>flex-grow</td><td>å®šä¹‰é¡¹ç›®çš„æ”¾å¤§æ¯”ä¾‹ï¼ˆé»˜è®¤ 0ï¼Œå³ä¸æ”¾å¤§ï¼‰</td><td>éè´Ÿæ•°å­—ï¼ˆ0 / æ­£å°æ•° / æ­£æ•´æ•°ï¼‰ï¼Œæ— å•ä½ï¼›æ•°å€¼è¶Šå¤§ï¼Œå å‰©ä½™ç©ºé—´æ¯”ä¾‹è¶Šé«˜</td></tr><tr><td>flex-shrink</td><td>å®šä¹‰é¡¹ç›®çš„ç¼©å°æ¯”ä¾‹ï¼ˆé»˜è®¤ 1ï¼Œç©ºé—´ä¸è¶³æ—¶ç­‰æ¯”ç¼©å°ï¼‰</td><td>éè´Ÿæ•°å­—ï¼ˆ0 / æ­£å°æ•° / æ­£æ•´æ•°ï¼‰ï¼Œæ— å•ä½ï¼›è®¾ä¸º 0 åˆ™ç©ºé—´ä¸è¶³æ—¶ä¸ç¼©å°</td></tr><tr><td>flex-basis</td><td>å®šä¹‰é¡¹ç›®åœ¨ä¸»è½´æ–¹å‘ä¸Šçš„åˆå§‹å¤§å°ï¼ˆä¼˜å…ˆçº§é«˜äº width/heightï¼‰</td><td>1. é•¿åº¦å€¼ï¼ˆpx/em/rem/% ç­‰ï¼‰ï¼›2. autoï¼ˆé»˜è®¤ï¼Œå–é¡¹ç›®è‡ªèº«å®½é«˜ï¼‰ï¼›3. contentï¼ˆæŒ‰å†…å®¹è‡ªé€‚åº”ï¼‰</td></tr><tr><td>flex</td><td>flex-growã€flex-shrinkã€flex-basis çš„ç®€å†™</td><td>1. å¸¸ç”¨ç®€å†™ï¼š- flex: 1 â†’ ç­‰ä»·äº flex: 1 1 auto- flex: auto â†’ ç­‰ä»·äº flex: 1 1 auto- flex: none â†’ ç­‰ä»·äº flex: 0 0 auto2. å®Œæ•´å†™æ³•ï¼šflex:   </td></tr><tr><td>align-self</td><td>è¦†ç›–å®¹å™¨çš„ align-itemsï¼Œå•ç‹¬å®šä¹‰æŸä¸ªé¡¹ç›®çš„äº¤å‰è½´å¯¹é½æ–¹å¼</td><td>autoï¼ˆé»˜è®¤ï¼Œç»§æ‰¿å®¹å™¨ align-itemsï¼‰ã€stretchã€flex-startã€flex-endã€centerã€baseline</td></tr></tbody></table>
<h4 data-id="heading-7">3ã€ä½¿ç”¨åœºæ™¯</h4>
<h5 data-id="heading-8">3.1å®ç°åŸºç¡€æ¨ªå‘å¹¶æ’ + å‚ç›´å±…ä¸­ï¼ˆå¯¼èˆªæ æ ¸å¿ƒæ•ˆæœï¼‰</h5>
<p>3 ä¸ªå­å…ƒç´ æ°´å¹³å¹¶æ’ï¼Œä¸”åœ¨çˆ¶ç›’å­ä¸­å‚ç›´å±…ä¸­ï¼ˆå¯¹åº” B ç«™å¤´éƒ¨æ ¸å¿ƒå¸ƒå±€ï¼‰</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fd559ef5984f466ab8d9aff7fafc7196~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg546L5bCP6I-y:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767591428&amp;x-signature=Y%2FcTi2AHD1knBPlYhjNMnLDl2wc%3D" alt="image.png" loading="lazy"/></p>
<pre><code class="hljs language-css" lang="css">    <span class="hljs-comment">/* çˆ¶å®¹å™¨ï¼ˆæ§åˆ¶å­å…ƒç´ ï¼‰ */</span>
    <span class="hljs-selector-class">.container</span> {
     ...
      <span class="hljs-attribute">display</span>: flex; <span class="hljs-comment">/* å¼€å¯Flex */</span>
      <span class="hljs-attribute">align-items</span>: center; <span class="hljs-comment">/* äº¤å‰è½´ï¼ˆå‚ç›´ï¼‰å±…ä¸­ */</span>
      ...
    }
  
</code></pre>
<h5 data-id="heading-9">3.2å®ç°æ¨ªå‘ä¸¤ç«¯å¯¹é½ï¼ˆå¯¼èˆªæ å·¦å³åˆ†å¸ƒæ•ˆæœï¼‰</h5>
<p>logo å±…å·¦ã€ç™»å½•æŒ‰é’®å±…å³ï¼Œä¸”ä¸¤è€…éƒ½å‚ç›´å±…ä¸­ï¼ˆç½‘é¡µå¤´éƒ¨é€šç”¨å¸ƒå±€ï¼‰ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/216a282991e24e409fd695e1fe55c1fc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg546L5bCP6I-y:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767591428&amp;x-signature=HJFEoWsY45aEm9ZEBNStQlBV02A%3D" alt="image.png" loading="lazy"/></p>
<pre><code class="hljs language-css" lang="css">  <span class="hljs-selector-class">.container</span> {
      ...
      <span class="hljs-attribute">display</span>: flex;
      <span class="hljs-attribute">align-items</span>: center;
      <span class="hljs-attribute">justify-content</span>: space-between; <span class="hljs-comment">/* ä¸»è½´ï¼ˆæ°´å¹³ï¼‰ä¸¤ç«¯å¯¹é½ */</span>
     ...
    }
</code></pre>
<h5 data-id="heading-10">3.3å®ç°æ¨ªå‘å¹³å‡åˆ†å¸ƒï¼ˆå¡ç‰‡åˆ—è¡¨æ•ˆæœï¼‰</h5>
<p>3 ä¸ªå¡ç‰‡æ°´å¹³å¹³å‡åˆ†å¸ƒï¼Œé—´è·ä¸€è‡´ï¼ˆå•†å“åˆ—è¡¨ / åŠŸèƒ½å…¥å£å¸¸ç”¨ï¼‰ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f5f11e2e06064a61895fc292d4db6b39~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg546L5bCP6I-y:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767591428&amp;x-signature=SRuaRXOvvte6w9tMrz4992rErtM%3D" alt="image.png" loading="lazy"/></p>
<pre><code class="hljs language-css" lang="css">  <span class="hljs-selector-class">.container</span> {
      ...
    <span class="hljs-attribute">display</span>: flex;
      <span class="hljs-attribute">align-items</span>: center;
      <span class="hljs-attribute">justify-content</span>: space-around; <span class="hljs-comment">/* ä¸»è½´å¹³å‡åˆ†å¸ƒï¼ˆé¡¹ç›®ä¸¤ä¾§é—´è·ç›¸ç­‰ï¼‰ */</span>
     ...
    }
</code></pre>
<h5 data-id="heading-11">3.4å®ç°å‚ç›´æ’åˆ—ï¼ˆä¾§è¾¹æ ï¼‰</h5>
<p>å­å…ƒç´ å‚ç›´æ’åˆ—ï¼ˆæ›´æ”¹ä¸»è½´æ–¹å‘ï¼‰ï¼Œä¸”å‚ç›´å±…ä¸­ï¼ˆä¾§è¾¹æ æ ¸å¿ƒå¸ƒå±€ï¼‰ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/07c2fa928c1d40259f339b7f88832344~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg546L5bCP6I-y:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767591428&amp;x-signature=%2FfPCeCUm%2BVQuEkI4JzBiaGn%2BvSs%3D" alt="image.png" loading="lazy"/></p>
<pre><code class="hljs language-css" lang="css">  <span class="hljs-selector-class">.container</span> {
      ...
     <span class="hljs-attribute">display</span>: flex;
      <span class="hljs-attribute">flex-direction</span>: column; <span class="hljs-comment">/* æ›´æ”¹ä¸»è½´ä¸ºå‚ç›´æ–¹å‘ */</span>
      <span class="hljs-attribute">justify-content</span>: center; <span class="hljs-comment">/* ä¸»è½´ï¼ˆå‚ç›´ï¼‰å±…ä¸­ */</span>
      <span class="hljs-attribute">gap</span>: <span class="hljs-number">10px</span>; <span class="hljs-comment">/* é¡¹ç›®é—´è·ï¼ˆæ›¿ä»£marginï¼‰ */</span>
     ...
    }
</code></pre>
<h5 data-id="heading-12">3.5å®ç°è‡ªåŠ¨æ¢è¡Œï¼ˆå“åº”å¼å¡ç‰‡ï¼‰</h5>
<p>å…ƒç´ è¶…å‡ºçˆ¶å®¹å™¨å®½åº¦è‡ªåŠ¨æ¢è¡Œï¼ˆå“åº”å¼å¸ƒå±€æ ¸å¿ƒï¼‰ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e424aba3d5e446bfa927e34689da5fba~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg546L5bCP6I-y:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767591428&amp;x-signature=4vG%2BbJS%2FUqoiTuMDFdUUQpMLVkM%3D" alt="image.png" loading="lazy"/></p>
<pre><code class="hljs language-css" lang="css">  <span class="hljs-selector-class">.container</span> {
      ...
     <span class="hljs-attribute">width</span>: <span class="hljs-number">800px</span>;
     <span class="hljs-attribute">display</span>: flex;
      <span class="hljs-attribute">flex-wrap</span>: wrap; <span class="hljs-comment">/* è¶…å‡ºå®¹å™¨å®½åº¦è‡ªåŠ¨æ¢è¡Œ */</span>
      <span class="hljs-attribute">gap</span>: <span class="hljs-number">15px</span>;
     ...
    }

 <span class="hljs-selector-class">.item</span> {
      <span class="hljs-attribute">width</span>: <span class="hljs-number">220px</span>;
      <span class="hljs-attribute">height</span>: <span class="hljs-number">120px</span>;
      ...
    }
</code></pre>
<h5 data-id="heading-13">3.6å®ç°å­å…ƒç´ å æ»¡å‰©ä½™ç©ºé—´ï¼ˆæœç´¢æ¡†å¸ƒå±€ï¼‰</h5>
<p>æœç´¢æ¡†è‡ªåŠ¨å æ»¡å·¦å³å…ƒç´ çš„å‰©ä½™ç©ºé—´ï¼ˆç½‘é¡µæœç´¢æ é€šç”¨å¸ƒå±€ï¼‰ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3a4709004c04464bbb6ca35697e5f327~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg546L5bCP6I-y:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767591428&amp;x-signature=%2FHttJhXGBn2Gb2jQYbh9DtW83Ao%3D" alt="image.png" loading="lazy"/></p>
<pre><code class="hljs language-css" lang="css"> <span class="hljs-selector-class">.container</span> {
      <span class="hljs-attribute">width</span>: <span class="hljs-number">800px</span>;
      <span class="hljs-attribute">height</span>: <span class="hljs-number">80px</span>;
      <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#ccc</span>;
      <span class="hljs-attribute">display</span>: flex;
      <span class="hljs-attribute">align-items</span>: center;
        ...
    }
    <span class="hljs-selector-class">.left</span> {
      <span class="hljs-attribute">width</span>: <span class="hljs-number">80px</span>;
      <span class="hljs-attribute">height</span>: <span class="hljs-number">40px</span>;
       ...
    }
    <span class="hljs-selector-class">.search</span> {
      <span class="hljs-attribute">flex</span>: <span class="hljs-number">1</span>; <span class="hljs-comment">/* å æ»¡ä¸»è½´å‰©ä½™ç©ºé—´ */</span>
      <span class="hljs-attribute">height</span>: <span class="hljs-number">40px</span>;
      ...
    }
    <span class="hljs-selector-class">.right</span> {
      <span class="hljs-attribute">width</span>: <span class="hljs-number">80px</span>;
      <span class="hljs-attribute">height</span>: <span class="hljs-number">40px</span>;
      <span class="hljs-attribute">line-height</span>: <span class="hljs-number">40px</span>;
     ...
    }
</code></pre>
<h5 data-id="heading-14">3.7å®ç°æ•´ä½“å±…ä¸­ï¼ˆç™»å½•æ¡† / å¼¹çª—ï¼‰</h5>
<p>åœ¨é¡µé¢ä¸­æ°´å¹³ + å‚ç›´å±…ä¸­</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/348bc7fab837443d884ba0a201bf5dd1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg546L5bCP6I-y:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767591428&amp;x-signature=bxJA7phvSi8agbgnFNSZ5qrrzNw%3D" alt="image.png" loading="lazy"/></p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-tag">body</span> {
      <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span>;
      <span class="hljs-attribute">height</span>: <span class="hljs-number">100vh</span>; <span class="hljs-comment">/* å æ»¡è§†å£é«˜åº¦ */</span>
      <span class="hljs-attribute">display</span>: flex;
      <span class="hljs-attribute">justify-content</span>: center; <span class="hljs-comment">/* æ°´å¹³å±…ä¸­ */</span>
      <span class="hljs-attribute">align-items</span>: center; <span class="hljs-comment">/* å‚ç›´å±…ä¸­ */</span>
       ...
    }
    <span class="hljs-selector-class">.login-box</span> {
      <span class="hljs-attribute">width</span>: <span class="hljs-number">400px</span>;
      <span class="hljs-attribute">height</span>: <span class="hljs-number">300px</span>;
      <span class="hljs-attribute">line-height</span>: <span class="hljs-number">300px</span>;
        ...
    }
</code></pre>
<h5 data-id="heading-15">3.8å®ç°è‡ªå®šä¹‰å­å…ƒç´ é¡ºåº</h5>
<p>å…ƒç´ æ˜¾ç¤ºé¡ºåºä¸º èœå• 2 â†’ èœå• 3 â†’ èœå• 1ï¼ˆæ— éœ€ä¿®æ”¹ HTML ç»“æ„ï¼Œä»…é€šè¿‡ CSS è°ƒæ•´ï¼‰ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7dab8efc3f8b418eb2c5e00e9dde4522~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg546L5bCP6I-y:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767591428&amp;x-signature=vRkN34ifqKpSF2kxzcVh3ve7%2FDQ%3D" alt="image.png" loading="lazy"/></p>
<pre><code class="hljs language-css" lang="css">  <span class="hljs-selector-class">.container</span> {
      ...
    <span class="hljs-attribute">display</span>: flex;
      <span class="hljs-attribute">align-items</span>: center
     ...
    }
<span class="hljs-selector-class">.item</span> {
      <span class="hljs-attribute">width</span>: <span class="hljs-number">100px</span>;
      <span class="hljs-attribute">height</span>: <span class="hljs-number">60px</span>;
      ...
    }
    <span class="hljs-comment">/* è‡ªå®šä¹‰é¡ºåºï¼ˆé»˜è®¤0ï¼Œæ•°å€¼è¶Šå°è¶Šé å‰ï¼‰ */</span>
    <span class="hljs-selector-class">.item1</span> { <span class="hljs-attribute">order</span>: <span class="hljs-number">3</span>; }
    <span class="hljs-selector-class">.item2</span> { <span class="hljs-attribute">order</span>: <span class="hljs-number">1</span>; }
    <span class="hljs-selector-class">.item3</span> { <span class="hljs-attribute">order</span>: <span class="hljs-number">2</span>; }
</code></pre>
<h4 data-id="heading-16">4ã€çœŸå®åº”ç”¨åœºæ™¯</h4>
<h5 data-id="heading-17">4.1 ç™¾åº¦å›¾ç‰‡-æ¨¡ä»¿ç€‘å¸ƒæµæ•ˆæœ</h5>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c98cca0c78d94ec19426df8a5059158f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg546L5bCP6I-y:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767591428&amp;x-signature=VMWe48%2BSNsXHMEjX%2BwodPn3A3lY%3D" alt="image.png" loading="lazy"/><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c07652654f1b43dfb7985042bc93e859~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg546L5bCP6I-y:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767591428&amp;x-signature=50ETBNUxB0reHyFjmev7LENTF3E%3D" alt="image.png" loading="lazy"/></p>
<p>äº”ä¸ªå—çº§åˆ—å®¹å™¨é€šè¿‡ Flex æ°´å¹³å‡åˆ†æ’åˆ—ï¼ˆå„å çˆ¶å®¹å™¨ 1/5 å®½åº¦ï¼‰ï¼Œæ¯ä¸ªåˆ—å®¹å™¨å†…å‚ç›´æ’å¸ƒå›¾ç‰‡ã€æŒ‰é’®ç­‰å†…å®¹ã€‚</p>
<h5 data-id="heading-18">4.2 äº¬ä¸œ-æ— é™æ»šåŠ¨å±•ç¤ºå•†å“åˆ—è¡¨ <img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6ab0df124cf84e5daed421494d79dee1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg546L5bCP6I-y:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767591428&amp;x-signature=fqv%2BdUjta%2FVoDHtFZJwtY6cN8FE%3D" alt="image.png" loading="lazy"/><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/eddc9933960148bebaf11d6e57d2c4bb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg546L5bCP6I-y:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767591428&amp;x-signature=8DIf5OSLDEKwbJMPnh1E%2FguM8eE%3D" alt="image.png" loading="lazy"/></h5>
<p>çˆ¶å®¹å™¨è®¾ Flex å¹¶å…è®¸æ¢è¡Œï¼Œå­å…ƒç´ é€šè¿‡åª’ä½“æŸ¥è¯¢ + å®½é«˜é™åˆ¶ï¼Œå®ç°ä¸åŒå±å¹•ä¸‹è‡ªåŠ¨è°ƒæ•´æ¯è¡Œå±•ç¤ºæ•°é‡ï¼Œè¶…å‡ºåˆ™æ¢è¡Œã€‚</p>
<p>æ·˜å®ä¹Ÿè·Ÿäº¬ä¸œä¸€æ ·ï¼Œä½¿ç”¨flexå¸ƒå±€æ¥å®ç°çš„æ— é™æ»šåŠ¨å±•ç¤ºå•†å“ï¼Œä½†æ˜¯å¦‚æœä½ éœ€è¦æ›´å¤æ‚çš„å“åº”å¼å¸ƒå±€ï¼Œéœ€ç²¾å‡†æ§åˆ¶è¡Œåˆ—ã€é¡µé¢å¤šæ¨¡å—åˆ†åŒºæ—¶å°±è¦ä½¿ç”¨gridäº†</p>
<h2 data-id="heading-19">å…­ã€å®šä½å¸ƒå±€</h2>
<p>å®šä½å¸ƒå±€æ˜¯æ§åˆ¶é¡µé¢å…ƒç´ ä½ç½®çš„æ ¸å¿ƒæŠ€æœ¯ï¼Œèƒ½å®ç°å…ƒç´ è„±ç¦»æ–‡æ¡£æµã€å±‚å ã€å›ºå®šä½ç½®ç­‰æ•ˆæœã€‚ ä¾‹å¦‚ä¸‹å›¾ä¸­Bç«™é¦–é¡µï¼Œå¾ˆå¤šæ•ˆæœéƒ½æ˜¯ä½¿ç”¨å®šä½å¸ƒå±€å®ç°çš„ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d0443928dc3a47fd8b1c329ed6e871e1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg546L5bCP6I-y:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767591428&amp;x-signature=mOtbfaZuFLoVB8ClP5xA1vP7NGE%3D" alt="image.png" loading="lazy"/></p>
<p><strong>å¸¸è§åœºæ™¯:</strong></p>
<p>å›ºå®šå¯¼èˆªæ ï¼šé¡µé¢æ»šåŠ¨æ—¶ï¼Œå¯¼èˆªæ å§‹ç»ˆå›ºå®šåœ¨è§†å£é¡¶éƒ¨</p>
<p>å¸é¡¶æ•ˆæœï¼šå…ƒç´ æ»šåŠ¨åˆ°ç‰¹å®šä½ç½®åå›ºå®š</p>
<p>å¼¹å‡º / ä¸‹æ‹‰èœå•ï¼šé¼ æ ‡æ‚¬æµ®æ—¶æ˜¾ç¤º</p>
<p>æ‚¬æµ®æ•ˆæœï¼šå…ƒç´ æµ®åœ¨å…¶ä»–å…ƒç´ ä¸Šæ–¹</p>
<p><strong>å®šä½åˆ†ç±»</strong></p>
<ul>
<li><strong>ç›¸å¯¹å®šä½</strong>ï¼šå…ƒç´ ç›¸å¯¹è‡ªèº«åŸä½ç½®åç§»ï¼Œä¸è„±ç¦»æ–‡æ¡£æµï¼Œä¿ç•™åŸå ä½</li>
<li><strong>ç»å¯¹å®šä½</strong>ï¼šå…ƒç´ ç›¸å¯¹æœ€è¿‘çš„å·²å®šä½çˆ¶å…ƒç´ åç§»ï¼Œå®Œå…¨è„±ç¦»æ–‡æ¡£æµï¼Œä¸ä¿ç•™å ä½</li>
<li><strong>å›ºå®šå®šä½</strong>ï¼šå…ƒç´ ç›¸å¯¹æµè§ˆå™¨è§†å£å›ºå®šï¼Œè„±ç¦»æ–‡æ¡£æµï¼Œæ»šåŠ¨é¡µé¢æ—¶ä½ç½®ä¸å˜</li>
<li><strong>ç²˜æ€§å®šä½</strong>ï¼šå…ƒç´ åœ¨æ»šåŠ¨åˆ°æŒ‡å®šé˜ˆå€¼å‰æ˜¯ç›¸å¯¹å®šä½ï¼Œä¹‹åå˜ä¸ºå›ºå®šå®šä½ï¼Œç»“åˆä¸¤è€…ç‰¹æ€§</li>
</ul>
<h4 data-id="heading-20">1ã€ åœºæ™¯ä¸€ï¼šå­ç»çˆ¶ç›¸å®ç°è´­ç‰©è½¦æ•ˆæœ</h4>
<p>ä¸ºä»€ä¹ˆç”¨ â€œ<strong>å­ç»çˆ¶ç›¸</strong>â€ï¼Ÿ</p>
<p>å­å…ƒç´ ç”¨ç»å¯¹å®šä½ï¼šèƒ½æµ®åœ¨ä¸Šæ–¹ï¼Œä¸”ä¸å ä½ç½®ã€ä¸å½±å“å…¶ä»–å…ƒç´ å¸ƒå±€ï¼Œè€Œçˆ¶å…ƒç´ ç”¨ç›¸å¯¹å®šä½ï¼Œè®©å­å…ƒç´ èƒ½è·Ÿç€çˆ¶å…ƒç´ ç§»åŠ¨ï¼ˆä½œä¸ºå®šä½å‚è€ƒï¼‰ï¼ŒåŒæ—¶çˆ¶å…ƒç´ ä¿ç•™åŸå ä½ã€ä¸å½±å“å…¶ä»–å¸ƒå±€ï¼Œä¾‹å¦‚ä¸‹å›¾ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/86d83452948d44c78cf9adb9ad695082~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg546L5bCP6I-y:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767591428&amp;x-signature=6M0qVHfTCjRA7XGNPw3BbMtiDJ4%3D" alt="image.png" loading="lazy"/></p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
    <span class="hljs-comment">/* çˆ¶å…ƒç´ ï¼šè´­ç‰©è½¦æŒ‰é’®ï¼ˆç›¸å¯¹å®šä½ï¼‰ */</span>
    <span class="hljs-selector-class">.cart-btn</span> {
      <span class="hljs-attribute">position</span>: relative; <span class="hljs-comment">/* çˆ¶ç›¸ */</span>
    ...
    }

    <span class="hljs-comment">/* å­å…ƒç´ ï¼šæ•°é‡æ ‡è®°ï¼ˆç»å¯¹å®šä½ï¼‰ */</span>
    <span class="hljs-selector-class">.cart-count</span> {
      <span class="hljs-attribute">position</span>: absolute; <span class="hljs-comment">/* å­ç» */</span>
      <span class="hljs-attribute">top</span>: -<span class="hljs-number">5px</span>; <span class="hljs-comment">/* å‘ä¸Šåç§» */</span>
      <span class="hljs-attribute">right</span>: -<span class="hljs-number">5px</span>; <span class="hljs-comment">/* å‘å³åç§» */</span>
      <span class="hljs-attribute">width</span>: <span class="hljs-number">18px</span>;
      <span class="hljs-attribute">height</span>: <span class="hljs-number">18px</span>;
      ...
    }
  </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
 <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"cart-btn"</span>&gt;</span>
    æˆ‘çš„è´­ç‰©è½¦
    <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"cart-count"</span>&gt;</span>3<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
</code></pre>
<p>å°ç±³å®˜ç½‘swiperç»„ä»¶å·¦å³ç¿»é¡µçš„ç®­å¤´ä¹Ÿæ˜¯é‡‡ç”¨å­ç»çˆ¶ç›¸çš„åšæ³•ï¼Œå°†å·¦å³ç®­å¤´å…ˆä½¿ç”¨topè°ƒæ•´åˆ°50%çš„é«˜åº¦ï¼Œç„¶åå†ä½¿ç”¨margin-topå¾€ä¸Šè°ƒæ•´ä¸ºè‡ªèº«é«˜åº¦çš„ä¸€åŠï¼Œä»è€Œå®ç°åœ¨swiperä¸­å‚ç›´å±…ä¸­æ•ˆæœï¼Œå¦‚ä¸‹å›¾æ‰€ç¤º</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7c1235c8b4b14a6ab022974401ba1818~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg546L5bCP6I-y:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767591428&amp;x-signature=CAtXr3tHMpdMiL5MlkU2eLPa9iA%3D" alt="image.png" loading="lazy"/></p>
<h4 data-id="heading-21">2ã€ åœºæ™¯äºŒï¼šå›ºå®šå®šä½å®é¡¶éƒ¨å¯¼èˆªæ å’Œä¾§è¾¹æ‚¬æµ®å¯¼èˆª</h4>
<p>ä¾‹å¦‚ä¸‹å›¾ä¸­å®˜ç½‘å¯¼èˆªæ å’Œå³ä¾§æ‚¬æµ®æŒ‰é’®ï¼Œå°±æ˜¯ä½¿ç”¨å›ºå®šå®šä½å®ç°çš„</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4d7ce70e4592494a8d48b9c3ee85847b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg546L5bCP6I-y:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767591428&amp;x-signature=wetTuT%2FihnaPX5eFv0o%2FMFdqAFI%3D" alt="image.png" loading="lazy"/><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dc75077b193443b9ad8d9e7538368c00~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg546L5bCP6I-y:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767591428&amp;x-signature=LCa7nCWqKB5wqaAnLQTglEAsxMA%3D" alt="image.png" loading="lazy"/></p>
<h4 data-id="heading-22">3ã€ åœºæ™¯ä¸‰ï¼šç²˜æ€§å®šä½å®ç°ä½ä»£ç å¡ç‰‡ tab æ ‡ç­¾é¡µå¸é¡¶æ•ˆæœ</h4>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/105f89ddcf7c4388951c7a3d1419c512~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg546L5bCP6I-y:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767591428&amp;x-signature=aw1h1d%2F0H7OpCyb0mCzdydbq2ys%3D" alt="image.png" loading="lazy"/><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/11eec76ec10545aa8253393c7b6ed1ba~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg546L5bCP6I-y:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767591428&amp;x-signature=E5HRNaS01U%2FTGh9wGS1%2Bw6UtUrc%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-23">ä¸ƒã€ç½‘æ ¼å¸ƒå±€</h2>
<p>ç½‘æ ¼å¸ƒå±€æ˜¯<strong>äºŒç»´å¸ƒå±€æ¨¡å‹</strong>ï¼Œé€šè¿‡å®šä¹‰è¡Œï¼ˆrowsï¼‰å’Œåˆ—ï¼ˆcolumnsï¼‰ï¼Œç²¾å‡†æ§åˆ¶ç½‘é¡µå…ƒç´ çš„ä½ç½®ã€å°ºå¯¸ï¼Œè¿˜èƒ½å®ç°å“åº”å¼è®¾è®¡ã€‚</p>
<p><strong>ç½‘æ ¼å¸ƒå±€å…·æœ‰ä¸Šè¿°ä¼˜åŠ¿ï¼Œæˆ‘ä»¬æ˜¯ä¸æ˜¯å¯ä»¥æŠ›å¼ƒå¼¹æ€§å¸ƒå±€ï¼Œå…¨éƒ¨ä½¿ç”¨ç½‘æ ¼å¸ƒå±€å‘¢ï¼Ÿ</strong></p>
<p>äº‹å®ä¸Šï¼Œå®é™…å¼€å‘ä¸­ flex å’Œ grid å¸¸æ··ç”¨ï¼š</p>
<p>Flexï¼šé€‚åˆå¿«é€Ÿåšä¸€ç»´å¸ƒå±€ã€åŠ¨æ€å¯¹é½å†…å®¹ï¼ˆæ¯”å¦‚å•è¡Œå¸ƒå±€ï¼‰ ç­‰çº¿æ€§æ’åˆ—åœºæ™¯</p>
<p>Gridï¼šé€‚åˆæ­å»ºå¤æ‚é¡µé¢æ¡†æ¶ï¼Œå¯åŒæ—¶æ§åˆ¶è¡Œå’Œåˆ—çš„æ’åˆ—ï¼Œå®ç°çœŸæ­£çš„äºŒç»´å¸ƒå±€ã€‚</p>
<p>ä¾‹å¦‚ä¸‹å›¾ä¸­Bç«™é¦–é¡µå¸ƒå±€å°±æ˜¯ flex å’Œ grid æ··ç”¨å®ç°çš„</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/705ea8de6496436b918f7e77872de2f7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg546L5bCP6I-y:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767591428&amp;x-signature=k81r9i8Gvw0H%2BI8irWkkX4lQD8I%3D" alt="image.png" loading="lazy"/></p>
<h4 data-id="heading-24">åœºæ™¯1ï¼šå®ç°Bç«™11åˆ—2è¡Œç«–å‘æ’åˆ—å¯¼èˆªæ æ•ˆæœï¼ŒåŒæ—¶æ§è¡Œåˆ—</h4>
<pre><code class="hljs language-css" lang="css">  <span class="hljs-comment">/* 1åˆ—2è¡Œï¼Œç«–å‘æ’åˆ— */</span>
    <span class="hljs-selector-class">.bilibili-nav</span> {
 ...
      <span class="hljs-attribute">display</span>: grid;
      <span class="hljs-comment">/* æ ¸å¿ƒï¼šåˆ—ä¼˜å…ˆæ’åˆ—ï¼ˆç«–å‘å¡«å……ï¼‰ */</span>
      <span class="hljs-attribute">grid-auto-flow</span>: column;
      <span class="hljs-comment">/* å®šä¹‰2è¡Œï¼ˆæ¯è¡Œé«˜åº¦å‡åˆ†ï¼‰ */</span>
      <span class="hljs-attribute">grid-template-rows</span>: <span class="hljs-built_in">repeat</span>(<span class="hljs-number">2</span>, <span class="hljs-number">1</span>fr);
      <span class="hljs-comment">/* å®šä¹‰11åˆ—ï¼ˆæ¯åˆ—å®½åº¦å‡åˆ†ï¼‰ */</span>
      <span class="hljs-attribute">grid-template-columns</span>: <span class="hljs-built_in">repeat</span>(<span class="hljs-number">11</span>, <span class="hljs-number">1</span>fr);
  ...
    }
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/083592b4ebf9436d8a128b7533cb1eb2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg546L5bCP6I-y:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767591428&amp;x-signature=tpkbnAzVdlb2OkXEnJa7Ucon6%2Bc%3D" alt="image.png" loading="lazy"/></p>
<h4 data-id="heading-25">åœºæ™¯2ï¼šå®ç°é˜¿é‡Œå·´å·´çŸ¢é‡å›¾æ ‡åº“å“åº”å¼å¡ç‰‡å¸ƒå±€ï¼ˆé€‚é…æ‰‹æœº / å¹³æ¿ / PCï¼‰</h4>
<p>å¦‚ä¸‹å›¾æ•ˆæœï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨gridå¸ƒå±€å®ç°ï¼Œæ— é¡»å€ŸåŠ©åª’ä½“æŸ¥è¯¢</p>
<pre><code class="hljs language-css" lang="css">...
    <span class="hljs-comment">/* å¡ç‰‡ç½‘æ ¼å®¹å™¨ */</span>
    <span class="hljs-selector-class">.card-grid</span> {
      <span class="hljs-attribute">display</span>: grid;
      <span class="hljs-attribute">gap</span>: <span class="hljs-number">20px</span>; <span class="hljs-comment">/* å¡ç‰‡ä¹‹é—´çš„æ°´å¹³+å‚ç›´é—´è·ï¼ˆæ— éœ€marginï¼Œé¿å…é‡å ï¼‰ */</span>
      <span class="hljs-comment">/* æ ¸å¿ƒï¼šè‡ªåŠ¨é€‚é…åˆ—æ•°ï¼Œåˆ—å®½æœ€å°250pxï¼Œæœ€å¤§è‡ªé€‚åº” */</span>
      <span class="hljs-attribute">grid-template-columns</span>: <span class="hljs-built_in">repeat</span>(auto-fit, <span class="hljs-built_in">minmax</span>(<span class="hljs-number">250px</span>, <span class="hljs-number">1</span>fr));
    }
...
 
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dfc9968ee7ad445fbd9b8a4f00ddc032~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg546L5bCP6I-y:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767591428&amp;x-signature=5gLj9MrOlkOxkAxBiSi4EIdihII%3D" alt="image.png" loading="lazy"/><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bea15e6bf29f4ba8b3d2a4ea9c6a5623~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg546L5bCP6I-y:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767591428&amp;x-signature=oWv3AyoM9SBbPbvl0rQYlFqk5MI%3D" alt="image.png" loading="lazy"/><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/178a35113bbe4804a93fd2e605e6c591~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg546L5bCP6I-y:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767591428&amp;x-signature=MDxBWB12QAhYHsqgzhZUIBzOos8%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c6c780e25511459e9cc79d795deb9ca0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg546L5bCP6I-y:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767591428&amp;x-signature=aB6kCdpxeHYB8wdOZ9EJroRXSOA%3D" alt="image.png" loading="lazy"/><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/08d906fa83e74491a6a0766a05d94cdf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg546L5bCP6I-y:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767591429&amp;x-signature=agihy2xjbeoFrK4ZX9LyXxGnomQ%3D" alt="image.png" loading="lazy"/></p>
<h4 data-id="heading-26">åœºæ™¯3ï¼šå®ç°è”šæ¥æ±½è½¦å®˜ç½‘â€œ2 è¡Œ 3 åˆ— + æ±½è½¦å›¾è·¨ 2 åˆ—â€æ•ˆæœ</h4>
<pre><code class="hljs language-css" lang="css">...
    <span class="hljs-comment">/* çº¢æ¡†ç½‘æ ¼å®¹å™¨ */</span>
    <span class="hljs-selector-class">.nio-grid-container</span> {
      <span class="hljs-attribute">display</span>: grid;
      <span class="hljs-comment">/* è¡Œåˆ—æ¯”ä¾‹ï¼šåŒ¹é…2è¡Œ3åˆ—+å¤§å…ƒç´ è·¨åˆ— */</span>
      <span class="hljs-attribute">grid-template-columns</span>: <span class="hljs-number">2</span>fr <span class="hljs-number">1</span>fr <span class="hljs-number">1</span>fr; 
      <span class="hljs-attribute">grid-template-rows</span>: <span class="hljs-number">1</span>fr <span class="hljs-number">1</span>fr;
...
    }

    <span class="hljs-comment">/* 1. æ±½è½¦å›¾ï¼ˆè·¨1è¡Œ2åˆ—ï¼‰ */</span>
    <span class="hljs-selector-class">.item-car</span> {
      <span class="hljs-attribute">grid-area</span>: <span class="hljs-number">1</span> / <span class="hljs-number">1</span> / <span class="hljs-number">2</span> / <span class="hljs-number">3</span>; <span class="hljs-comment">/* è¡Œ1-2ï¼Œåˆ—1-3 â†’ è·¨2åˆ— */</span>
    }
    <span class="hljs-comment">/* 2. å³ä¸Šè§’â€œç”Ÿé•¿â€ */</span>
    <span class="hljs-selector-class">.item-grow</span> {
      <span class="hljs-attribute">grid-area</span>: <span class="hljs-number">1</span> / <span class="hljs-number">3</span> / <span class="hljs-number">2</span> / <span class="hljs-number">4</span>;
    }

    <span class="hljs-comment">/* 3. ä¸­é—´å³ä¾§â€œ11â€ */</span>
    <span class="hljs-selector-class">.item-11</span> {
      <span class="hljs-attribute">grid-area</span>: <span class="hljs-number">2</span> / <span class="hljs-number">3</span> / <span class="hljs-number">3</span> / <span class="hljs-number">4</span>;
    }

    <span class="hljs-comment">/* 4. å·¦ä¸‹è§’å…ƒç´  */</span>
    <span class="hljs-selector-class">.item-left-bottom</span> {
      <span class="hljs-attribute">grid-area</span>: <span class="hljs-number">2</span> / <span class="hljs-number">1</span> / <span class="hljs-number">3</span> / <span class="hljs-number">2</span>;
    }

    <span class="hljs-comment">/* 5. ä¸­é—´ä¸‹å…ƒç´  */</span>
    <span class="hljs-selector-class">.item-middle-bottom</span> {
      <span class="hljs-attribute">grid-area</span>: <span class="hljs-number">2</span> / <span class="hljs-number">2</span> / <span class="hljs-number">3</span> / <span class="hljs-number">3</span>;
    }
  &lt;/style&gt;
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1d759f5a8cda40dba053fef5662ed8b9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg546L5bCP6I-y:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767591429&amp;x-signature=GUK4tA1o9OVKe3CSEKjomt9gbD4%3D" alt="image.png" loading="lazy"/><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4a6d425c77cc4108bcf87a97d22396ef~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg546L5bCP6I-y:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767591429&amp;x-signature=KD3FB0NegtIEVhsVJCHTFZBoGHI%3D" alt="image.png" loading="lazy"/><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6f4b92d5ed344f8b9ee339a6df49977e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg546L5bCP6I-y:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767591429&amp;x-signature=sMg6%2Bxqg5LxPI7OD3UWidT%2FE2Do%3D" alt="image.png" loading="lazy"/></p>
<p><strong>ç®€å•æ¥è¯´ï¼ŒGrid æ˜¯ â€œä¸ºå¤æ‚äºŒç»´å¸ƒå±€è€Œç”Ÿâ€ï¼Œèƒ½ä»¥æ›´å°‘çš„ä»£ç å®ç°æ›´çµæ´»ã€å¯æ§çš„å¸ƒå±€ï¼Œå°¤å…¶é€‚åˆé¡µé¢æ¡†æ¶ã€å“åº”å¼å¡ç‰‡ã€å¤æ‚å›¾æ–‡ç»„åˆç­‰åœºæ™¯ã€‚</strong></p>
<h2 data-id="heading-27">å…«ã€å¤šåˆ—å¸ƒå±€</h2>
<p>ç”¨äºå°†å…ƒç´ å†…å®¹è‡ªåŠ¨åˆ†å‰²ä¸ºæŒ‡å®šæ•°é‡çš„å‚ç›´åˆ—ï¼Œå¦‚ä¸‹å›¾æ•ˆæœã€‚æœ‰äº›åŒå­¦å¯èƒ½ä¼šè¯´ï¼Œä¸‹é¢çš„å¸ƒå±€æˆ‘ä»¬ç”¨flexæˆ–è€…gridä¹Ÿèƒ½åšå‡ºæ¥ï¼Œé‚£ä¹ˆ<strong>ä¸ºä»€ä¹ˆè¦å†å­¦ä¹ å¤šåˆ—å¸ƒå±€å‘¢</strong>ï¼Ÿ</p>
<p>å› ä¸ºå¦‚æœä½¿ç”¨flexæˆ–è€…gridå¸ƒå±€ï¼Œæˆ‘ä»¬éœ€è¦å…ˆå‡†å¤‡ä¸‰ä¸ªç›’å­ï¼Œç„¶åå†æŠŠå†…å®¹è£…è¿›å»ï¼Œè€Œä½¿ç”¨å¤šåˆ—å¸ƒå±€åˆ™ä¸éœ€è¦äº‹å…ˆå‡†å¤‡ç›’å­ï¼Œç›´æ¥å‡†å¤‡å†…å®¹å°±å¯ä»¥äº†ï¼Œå¦‚ä¸‹ä»£ç æ‰€ç¤º</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9afdc13a74204139b9ba9668b203dba1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg546L5bCP6I-y:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767591429&amp;x-signature=8wXJRqjU0%2Bt3lL6p%2BIsfQxaE9x8%3D" alt="image.png" loading="lazy"/></p>
<pre><code class="hljs language-css" lang="css"> <span class="hljs-comment">/* å®¹å™¨ï¼šè®¾ç½®å¤šåˆ— */</span>
    <span class="hljs-selector-class">.column-container</span> {
      ...
      <span class="hljs-comment">/* å¤šåˆ—æ ¸å¿ƒå±æ€§ */</span>
      <span class="hljs-attribute">column-count</span>: <span class="hljs-number">3</span>; <span class="hljs-comment">/* åˆ†ä¸º3åˆ— */</span>
      <span class="hljs-attribute">column-gap</span>: <span class="hljs-number">10px</span>; <span class="hljs-comment">/* åˆ—ä¹‹é—´çš„é—´éš™ */</span>
      <span class="hljs-attribute">column-rule</span>: <span class="hljs-number">2px</span> solid <span class="hljs-number">#4da6ff</span>; <span class="hljs-comment">/* åˆ—åˆ†éš”çº¿ */</span>
       ...
    }
    <span class="hljs-comment">/* å­å…ƒç´ ï¼šä¸åŒé«˜åº¦æ¨¡æ‹Ÿä¸è§„åˆ™å¸ƒå±€ */</span>
    <span class="hljs-selector-class">.item</span> {
      ...
      <span class="hljs-attribute">break-inside</span>: avoid; <span class="hljs-comment">/* é¿å…å­å…ƒç´ è¢«åˆ—åˆ†å‰² */</span>
      ...
    }
</code></pre>
<p>é€‚ç”¨åœºæ™¯</p>
<ol>
<li>é•¿æ–‡ç« åˆ†æ ï¼šæ–‡ç« è‡ªåŠ¨åˆ†åˆ—ï¼Œæ”¯æŒé—´éš™ã€å“åº”å¼æ•ˆæœï¼Œå¦‚è¯­é›€å®˜ç½‘æ•ˆæœ</li>
<li>å›¾ç‰‡ç€‘å¸ƒæµï¼Œå¦‚é˜¿é‡Œå·´å·´çŸ¢é‡å›¾æ ‡åº“</li>
</ol>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2cfc3a287c3b47db9f22c3351d865450~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg546L5bCP6I-y:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767591429&amp;x-signature=r53BBJLe9uQjnvGmUVLAAHZsLHs%3D" alt="image.png" loading="lazy"/><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b68f9885c8e04017ae787c77f8fe136c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg546L5bCP6I-y:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767591429&amp;x-signature=TXMtuNdO3O3p4TDki9154SrPNhE%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-28">ä¹ã€æ€»ç»“</h2>
<p>ä¸åŒæŠ€æœ¯å„æœ‰é€‚ç”¨åœºæ™¯ã€ä¼˜ç¼ºç‚¹ï¼Œéœ€é…åˆä½¿ç”¨ï¼š</p>
<ul>
<li>ç®€å•å¸ƒå±€ï¼šä¼˜å…ˆç”¨ Flexboxï¼ˆä¸€ç»´ï¼‰æˆ– Gridï¼ˆäºŒç»´ï¼‰</li>
<li>å¤æ‚å“åº”å¼å¸ƒå±€ï¼šGrid + åª’ä½“æŸ¥è¯¢</li>
<li>æ–‡æœ¬å†…å®¹åˆ†æ ï¼šå¤šåˆ—å¸ƒå±€ï¼ˆcolumn-countï¼‰</li>
<li>å…¼å®¹æ—§æµè§ˆå™¨ï¼šæµ®åŠ¨å¸ƒå±€ï¼Œæˆ– Flexbox é™çº§æ–¹æ¡ˆ</li>
<li>è¶‹åŠ¿ï¼šCSS Grid é€æ¸æˆä¸ºä¸»æµï¼Œé€‚é…æ›´å¤æ‚å¸ƒå±€åœºæ™¯</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[AI å‘å³ï¼Œç¤¾åŒºå‘å·¦-Captain çš„ 2025å¹´ç»ˆæ€»ç»“]]></title>    <link>https://juejin.cn/post/7589509638354321435</link>    <guid>https://juejin.cn/post/7589509638354321435</guid>    <pubDate>2025-12-30T09:53:30.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589509638354321435" data-draft-id="7589214068093927443" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="AI å‘å³ï¼Œç¤¾åŒºå‘å·¦-Captain çš„ 2025å¹´ç»ˆæ€»ç»“"/> <meta itemprop="keywords" content="å‰ç«¯,AIç¼–ç¨‹"/> <meta itemprop="datePublished" content="2025-12-30T09:53:30.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="XCaptaino"/> <meta itemprop="url" content="https://juejin.cn/user/3052665287739005"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            AI å‘å³ï¼Œç¤¾åŒºå‘å·¦-Captain çš„ 2025å¹´ç»ˆæ€»ç»“
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3052665287739005/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    XCaptaino
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-30T09:53:30.000Z" title="Tue Dec 30 2025 09:53:30 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    2
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»12åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">AI å‘å³ï¼Œç¤¾åŒºå‘å·¦</h2>
<p>ç«™åœ¨ 2025 çš„å°¾å·´ä¸Šå›æœ›ï¼Œè¿™ç¡®å®æ˜¯æå…·æ’•è£‚æ„Ÿçš„ä¸€å¹´ã€‚</p>
<p>ä¸€æ–¹é¢ï¼ŒAI æŠ€æœ¯åƒä¸€åˆ—é«˜é€Ÿåˆ—è½¦ï¼Œè½°é¸£ç€å‘ç€æ›´å¼ºçš„é€»è¾‘ã€æ›´é«˜çš„æ•ˆç‡ã€æ›´æè‡´çš„è‡ªåŠ¨åŒ–ç‹‚å¥”â€”â€”æˆ‘ç§°ä¹‹ä¸º <strong>â€œå‘å³â€ <strong>ï¼›å¦ä¸€æ–¹é¢ï¼Œåœ¨ç®—æ³•çš„æŒ¤å‹ä¸‹ï¼Œäººç±»çš„ç¤¾åŒºã€æƒ…æ„Ÿä¸ä»·å€¼æ­£åœ¨å‘ç”ŸæŸç§åº”æ¿€æ€§çš„å›æ’¤ï¼Œæˆ‘ä»¬å¼€å§‹å¯»æ‰¾é‚£äº›æ¨¡å‹å’Œ AIæ— æ³•è§¦è¾¾çš„æ¸©çƒ­â€”â€”æˆ‘ç§°ä¹‹ä¸º</strong>â€œå‘å·¦â€</strong>ã€‚</p>
<p>ä½œä¸ºèº«å¤„AIé£æš´ä¸­å¿ƒçš„è§‚å¯Ÿè€…ï¼Œè¿™æ˜¯æˆ‘å¯¹ 2025 å¹´ AI ç¼–ç¨‹å‘å±•çš„æ€è€ƒï¼Œä»¥åŠæˆ‘è¿™ä¸€å¹´çš„ä¸ªäººç­”å·ã€‚</p>
<h2 data-id="heading-1">Part 1. AI å‘å³ï¼šèŒƒå¼çš„æé€Ÿç‹‚å¥”</h2>
<p>æœ¬æ¬¡è§‚å¯Ÿä¸»è¦æ˜¯ç»“åˆAndrej Karpathy æ˜¯ OpenAI è”åˆåˆ›å§‹äººã€å‰ç‰¹æ–¯æ‹‰ AI æ€»ç›‘çš„ 2025 å¹´ LLM å¹´åº¦å›é¡¾ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0af4b5621dfe45f99b66d1c953c17431~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgWENhcHRhaW5v:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767693325&amp;x-signature=bdtLO7%2Fg%2FAco4UN6jgh%2BCWEF5M0%3D" alt="img_v3_02t7_5d451660-02e5-4df8-bc0d-a5fbe9e86a3g.jpg" loading="lazy"/></p>
<p>Andrej Karpathyï¼ˆOpenAI è”åˆåˆ›å§‹äººï¼‰çš„å¹´åº¦å›é¡¾ç²¾å‡†åœ°æç»˜äº† AI æŠ€æœ¯â€œå‘å³â€ç‹‚å¥”çš„è½¨è¿¹ã€‚è¿™ä¸€å¹´ï¼ŒAI ç¼–ç¨‹ä¸å†æ˜¯ç®€å•çš„è¾…åŠ©ï¼Œè€Œæ˜¯æ­£åœ¨é‡å¡‘â€œæ™ºèƒ½â€çš„å®šä¹‰ã€‚</p>
<h4 data-id="heading-2">1. è®­ç»ƒèŒƒå¼çš„â€œé¡¿æ‚Ÿâ€</h4>
<p>2025 å¹´æœ€å¤§çš„æŠ€æœ¯å˜é‡æ˜¯ <strong>RLVRï¼ˆå¯éªŒè¯å¥–åŠ±çš„å¼ºåŒ–å­¦ä¹ ï¼‰</strong> ã€‚ è¿‡å»çš„ AI æ˜¯â€œç…§è‘«èŠ¦ç”»ç“¢â€ï¼Œäººç±»æ€ä¹ˆå†™ä»£ç å®ƒå°±æ€ä¹ˆå­¦ã€‚ä½† RLVR å¼•å…¥äº†â€œæ ‡å‡†ç­”æ¡ˆâ€ç¯å¢ƒï¼ˆå¦‚æ•°å­¦é¢˜ã€ä»£ç ç¼–è¯‘ï¼‰ï¼ŒæŠŠæ¨¡å‹ç›´æ¥æ‰”è¿›æ°´é‡Œï¼Œåªè¦æ¸¸åˆ°å¯¹å²¸ï¼Œå§¿åŠ¿éšä¾¿ã€‚ ç»“æœä»¤äººéœ‡æƒŠï¼šæ¨¡å‹è‡ªå·±â€œæ‚Ÿâ€å‡ºäº†æ¨ç†èƒ½åŠ›ã€‚å®ƒå­¦ä¼šäº†æ‹†è§£æ­¥éª¤ã€å­¦ä¼šäº†è‡ªæˆ‘çº é”™ã€‚OpenAI çš„ o1 å’Œ o3 å°±æ˜¯è¿™ç§æ€ç»´é“¾æ¡ï¼ˆChain of Thoughtï¼‰çš„äº§ç‰©ã€‚ç®—åŠ›åˆ†é…ä¹Ÿå˜äº†â€”â€”ä»æ­»ç£•é¢„è®­ç»ƒï¼Œè½¬å‘äº†è®©æ¨¡å‹åœ¨æ¨ç†æ—¶â€œå¤šæƒ³ä¸€ä¼šå„¿â€ã€‚</p>
<h4 data-id="heading-3">2. â€œå‚å·®ä¸é½â€çš„å¹½çµ</h4>
<p>Karpathy è¯´æˆ‘ä»¬åœ¨â€œå¬å”¤å¹½çµâ€ã€‚å› ä¸ºä¼˜åŒ–ç›®æ ‡ä¸åŒï¼ˆäººç±»ä¸ºäº†ç”Ÿå­˜ï¼ŒAI ä¸ºäº†åˆ·æ¦œï¼‰ï¼ŒAI å±•ç°å‡ºä¸€ç§ <strong>Jagged Intelligenceï¼ˆå‚å·®ä¸é½çš„æ™ºèƒ½ï¼‰</strong> ã€‚ å®ƒåœ¨æœ‰æ ‡å‡†ç­”æ¡ˆçš„é¢†åŸŸï¼ˆä»£ç ã€æ•°å­¦ï¼‰è¿›åŒ–ç¥é€Ÿï¼Œé•¿å‡ºäº†å°–åˆºï¼›ä½†åœ¨å¸¸è¯†ã€åˆ›æ„ç­‰æ¨¡ç³Šé¢†åŸŸï¼Œä¾ç„¶ä¼šçŠ¯ä½çº§é”™è¯¯ã€‚è¿™ä¹Ÿå¯¼è‡´äº†åŸºå‡†æµ‹è¯•ï¼ˆBenchmarkï¼‰çš„å´©å¡Œâ€”â€”åˆ·æ¦œæˆäº†ä¸€ç§é’ˆå¯¹æ€§ä¼˜åŒ–çš„è‰ºæœ¯ï¼Œåˆ†æ•°è™½é«˜ï¼Œç¦»é€šç”¨æ™ºèƒ½å°šè¿œã€‚</p>
<h4 data-id="heading-4">3. åº”ç”¨å±‚çš„çˆ†å‘ä¸â€œVibe Codingâ€</h4>
<p>Cursor çš„ç«çˆ†è¯æ˜äº† <strong>â€œLLM åº”ç”¨å±‚â€</strong> çš„æˆç«‹ã€‚å®ƒæ˜¯æŠŠé€šç”¨æ¨¡å‹ï¼ˆå¤§å­¦æ¯•ä¸šç”Ÿï¼‰åŸ¹è®­æˆä¸“ä¸šå‘˜å·¥ï¼ˆè¡Œä¸šä¸“å®¶ï¼‰çš„ä¸­é—´å±‚ã€‚ æ›´æ¿€è¿›çš„å˜åŒ–æ˜¯ <strong>Vibe Codingï¼ˆæ°›å›´ç¼–ç¨‹ï¼‰</strong> çš„å…´èµ·ã€‚ç°åœ¨çš„ç¼–ç¨‹é—¨æ§›ä½åˆ°åªéœ€è¦ä½ ä¼šè‹±è¯­ï¼Œæè¿°éœ€æ±‚ï¼Œå®Œå…¨ä¸ç”¨ç®¡ä»£ç å®ç°ã€‚ä»£ç å˜å¾—å»‰ä»·ã€å³ç”¨å³å¼ƒï¼Œåƒè‰ç¨¿çº¸ä¸€æ ·ã€‚ è¿™ä¸ä»…è®©æ™®é€šäººèƒ½ç¼–ç¨‹ï¼Œä¹Ÿè®©ä¸“ä¸šç¨‹åºå‘˜å¼€å§‹å†™é‚£äº›ä»¥å‰â€œä¸å€¼å¾—å†™â€çš„ä¸€æ¬¡æ€§å·¥å…·ã€‚</p>
<h4 data-id="heading-5">4. ä½åœ¨ç”µè„‘é‡Œçš„â€œå°ç²¾çµâ€</h4>
<p>Claude Code å±•ç¤ºäº†æœªæ¥çš„æ–¹å‘ï¼š<strong>æœ¬åœ°åŒ–æ™ºèƒ½ä½“ï¼ˆAgentï¼‰</strong> ã€‚ OpenAI æ›¾èµŒæ³¨äº‘ç«¯ï¼Œä½† Karpathy è®¤ä¸ºå½“ä¸‹æ›´åˆç†çš„æ˜¯è®© AI è·‘åœ¨ä½ çš„ç”µè„‘ä¸Šï¼Œè¯»å–ä½ çš„æœ¬åœ°ç¯å¢ƒã€æ–‡ä»¶å’Œä¸Šä¸‹æ–‡ï¼Œåƒä¸€ä¸ªå’Œä½ å¹¶è‚©ä½œæˆ˜çš„åŒäº‹ï¼Œè€Œä¸ä»…ä»…æ˜¯ä¸€ä¸ªç½‘é¡µèŠå¤©æ¡†ã€‚</p>
<h4 data-id="heading-6">5. å¤§æ¨¡å‹çš„ GUI æ—¶ä»£</h4>
<p>Google Gemini Nano Banana é¢„ç¤ºäº†ä¸‹ä¸€ä¸ªèŒƒå¼ï¼šå¤§æ¨¡å‹ä¸è¯¥åªåæ–‡å­—ï¼Œå®ƒåº”è¯¥åƒ 80 å¹´ä»£çš„è®¡ç®—æœºè¿›åŒ–å‡ºå›¾å½¢ç•Œé¢ä¸€æ ·ï¼Œå­¦ä¼šç”¨å›¾è¡¨ã€å¹»ç¯ç‰‡ã€ç™½æ¿ç”šè‡³å°åº”ç”¨æ¥å›åº”äººç±»ã€‚è¿™æ‰æ˜¯ LLM çœŸæ­£çš„åŸç”Ÿäº¤äº’å½¢æ€ã€‚</p>
<p>Karpathy çš„æ€»ç»“æ˜¯è¿™æ ·çš„ï¼š2025 å¹´çš„å¤§æ¨¡å‹ï¼Œæ¯”ä»–é¢„æœŸçš„èªæ˜ï¼Œä¹Ÿæ¯”ä»–é¢„æœŸçš„è ¢ã€‚ä¸¤è€…åŒæ—¶æˆç«‹ã€‚</p>
<p>ä½†æœ‰ä¸€ç‚¹å¾ˆç¡®å®šï¼šå³ä½¿ä»¥ç°åœ¨çš„èƒ½åŠ›ï¼Œæˆ‘ä»¬è¿ 10% çš„æ½œåŠ›éƒ½æ²¡æŒ–æ˜å‡ºæ¥ã€‚è¿˜æœ‰å¤ªå¤šæƒ³æ³•å¯ä»¥è¯•ï¼Œæ•´ä¸ªé¢†åŸŸæ„Ÿè§‰æ˜¯æ•å¼€çš„ã€‚</p>
<p>ä»–åœ¨ Dwarkesh çš„æ’­å®¢é‡Œè¯´è¿‡ä¸€å¥çœ‹ä¼¼çŸ›ç›¾çš„è¯ï¼š</p>
<blockquote>
<p>ä»–ç›¸ä¿¡è¿›æ­¥ä¼šç»§ç»­é£é€Ÿæ¨è¿›ï¼Œ</p>
</blockquote>
<blockquote>
<p>åŒæ—¶ä¹Ÿç›¸ä¿¡è¿˜æœ‰å¤§é‡çš„å·¥ä½œè¦åšã€‚</p>
</blockquote>
<p>å…¶å®ä¸¤ä»¶äº‹å¹¶ä¸çŸ›ç›¾ã€‚ç›®å‰è¿™ä¸ªé˜¶æ®µçš„AI è®©æ‰§è¡Œå˜å¿«äº†ï¼Œä½†å®ƒæ²¡æœ‰è®©â€œçŸ¥é“è¯¥åšä»€ä¹ˆâ€è¿™ä»¶äº‹å˜ç®€å•ã€‚ç›¸åï¼Œå› ä¸ºæ‰§è¡Œæˆæœ¬ä¸‹é™ï¼Œâ€œåšä»€ä¹ˆâ€çš„å†³ç­–å˜å¾—æ›´é‡è¦äº†â€”â€”ä½ å¯ä»¥å¾ˆå¿«åšå‡º 20 ä¸ªç‰ˆæœ¬ï¼Œä½†ä½ å¾—çŸ¥é“å“ªä¸ªæ˜¯å¯¹çš„ã€‚</p>
<p>å‡ å¹´åçš„è½¯ä»¶å·¥ç¨‹ä¼šæ˜¯ä»€ä¹ˆæ ·å­ï¼Ÿæ²¡äººèƒ½å‡†ç¡®é¢„æµ‹ã€‚ä½† Claude Code å›¢é˜Ÿçš„ä»Šå¤©ï¼Œå¯èƒ½æ˜¯å¾ˆå¤šå›¢é˜Ÿæ˜å¤©çš„æŸç§é¢„æ¼”â€”â€”æ›´å¿«çš„è¿­ä»£ã€æ›´å°‘çš„â€œæ¬ç –â€ã€æ›´å¤šçš„åˆ¤æ–­å’Œå†³ç­–ã€‚</p>
<p>å·¥å…·åœ¨å˜ã€‚ä¸å˜çš„æ˜¯ï¼Œæœ€ç»ˆåšå†³å®šçš„è¿˜æ˜¯äººã€‚</p>
<h2 data-id="heading-7">Part 2. ç¤¾åŒºå‘å·¦ï¼šäººç±»çš„ä»·å€¼å›æ’¤å’Œé‡å¡‘</h2>
<p>å½“ AI åœ¨ç¬¦å·é€»è¾‘çš„é¢†åŸŸæ”»åŸç•¥åœ°æ—¶ï¼Œä¼ ç»Ÿçš„ç¨‹åºå‘˜ç¤¾åŒºå’Œäººç±»åŠ³åŠ¨ä»·å€¼æ­£åœ¨è¢«è¿«å¯»æ‰¾æ–°çš„é”šç‚¹ã€‚</p>
<h3 data-id="heading-8">ä¼ ç»Ÿé—®ç­”ç¤¾åŒºçš„é»„æ˜</h3>
<p>æ‰€æœ‰ç±»ä¼¼ Stack Overflow çš„é—®ç­”å’ŒçŸ¥è¯†ç¤¾åŒºè¡°è½æ˜¯ä¸å¯é€†çš„ã€‚</p>
<p>æ—¢ç„¶ AI èƒ½ç¬é—´ç»™å‡ºä»£ç ç‰‡æ®µï¼Œè°è¿˜æ„¿æ„å»æœç´¢å¼•æ“æˆ–è€… BBSè®ºå›ç­‰å¾…ä¸€ä¸ªæœªçŸ¥çš„å›å¤ï¼Ÿ</p>
<ul>
<li><strong>æµé‡æš´è·Œï¼š</strong> åªæœ‰çº¯æŠ€æœ¯é—®ç­”åœ¨è¢«æ›¿ä»£ã€‚</li>
<li><strong>è´¨é‡æ¶åŒ–ï¼š</strong> AI ç”Ÿæˆçš„åƒåœ¾å†…å®¹æ³›æ»¥ï¼Œéœ€è¦äººè‚‰æ’é›·ã€‚</li>
</ul>
<p>ä½† Reddit è¿™ç§å¼ºç¤¾äº¤å±æ€§çš„ç¤¾åŒºåè€Œåœ¨å¤å…´ã€‚<strong>è¿™è¯´æ˜äº†â€œå‘å·¦â€çš„è¶‹åŠ¿ï¼š</strong> çŸ¥è¯†è·å–å˜å¾—å»‰ä»·åï¼Œ<strong>äººä¸äººçš„è¿æ¥ã€æƒ…æ„Ÿå…±é¸£ã€çº¿ä¸‹è§é¢çš„ä»·å€¼</strong>åè€Œå˜å¾—æ— æ¯”æ˜‚è´µã€‚é‚£ä¹ˆåé¢ç¤¾åŒºçš„æŒä¹…ä»·å€¼åœ¨å“ªé‡Œï¼Ÿå¯ä»¥æ·±åº¦é“¾æ¥çº¿ä¸‹ç¤¾åŒºå’Œæ·±åº¦ç¤¾äº¤çš„ç¤¾åŒºï¼Œå› æ­¤æˆ‘ä¸ªäººæ¯”è¾ƒçœ‹å¥½ reddit å’Œç¤¾ç¾¤çš„ä»·å€¼ã€‚</p>
<h3 data-id="heading-9">ç¡…åŸºç”Ÿå‘½è¿«ä½¿æˆ‘ä»¬é‡æ–°æ€è€ƒåŠ³åŠ¨åŠ›ä»·å€¼</h3>
<p>èµ·å› æ˜¯æœ‰ä¸€å¤©å‘¨æœ«åšäº† aidp å¹³å°ç¾è§‚åº¦æ ‡æ³¨çš„ä¸€é“é¢˜ï¼Œå¤§æ¦‚æ”¶å…¥ 600 å…ƒï¼Œæˆ‘ä¸ªäººæ˜¯æœ‰ç‚¹æ„Ÿæ…¨ä¸‡åƒï¼Œå°±æ˜¯æ„Ÿè§‰åœ¨å¸®åŠ©æ¨¡å‹æ˜å¢“ç¨‹åºå‘˜ï¼Œæœ€è¿‘ç¾¤å‹è¯»ã€Šé€å¤–å–ã€‹ä¹Ÿæ˜¯ï¼Œæœ€ç»†é¢—ç²’åº¦çš„è·¯çº¿å’Œé€é¤æ–¹å¼æ•°æ®æ¨¡å‹è¿˜å­¦ä¸ä¼šï¼Œå°±é€šè¿‡æœºåˆ¶è®©å¤–å–å‘˜åŠ¨è„‘å­â€œæ¦¨â€å‡ºæ¥æœ€æœ«ç«¯çš„æ€è€ƒ</p>
<p>åœ¨AIå¿«é€Ÿå–ä»£äººç±»åŠ³åŠ¨åŠ›çš„æµªæ½®ä¸­ï¼Œä¸€ä¸ªæ ¸å¿ƒè§„å¾‹é€æ¸æ¸…æ™°ï¼šè¶Šæ˜¯çº¯ç¬¦å·ã€å¯å½¢å¼åŒ–ã€å°é—­è§„åˆ™çš„çŸ¥è¯†å·¥ä½œï¼ˆå¦‚ç¼–ç¨‹ã€æ•°å­¦è¯æ˜ã€æ–‡ä¹¦å¤„ç†ï¼‰ï¼Œè¶Šå®¹æ˜“è¢«å¤§æ¨¡å‹è¿…é€Ÿåƒæ‰ï¼Œå› ä¸ºè¿™äº›é¢†åŸŸæ²¡æœ‰ç‰©ç†é™åˆ¶ï¼ŒAIå¯ä»¥æ— é™è¯•é”™å’Œè¿­ä»£ï¼Œäººç±»ç¨‹åºå‘˜çš„ç»éªŒå¾ˆå¿«å°±ä¼šè¢«â€œå·å¸ˆâ€å¹¶å›ºåŒ–æˆæ›´ä¸¥è‹›çš„ç®—æ³•ï¼Œé™·å…¥è¢«è¿½èµ¶çš„è¢«åŠ¨ã€‚</p>
<p>ç›¸åï¼Œè¶Šæ˜¯ä¾èµ–è‚‰èº«å­˜åœ¨ã€é«˜åº¦æƒ…å¢ƒåŒ–ã€å……æ»¡ç¤¾ä¼šäº’åŠ¨å’Œé•¿å°¾ç¬å˜çš„é•¿å°¾åœºæ™¯ï¼ˆå¦‚å¤–å–æœ€åä¸€å…¬é‡Œã€é¤å…æœåŠ¡ã€åŒ»ç–—æŠ¤ç†ã€å…»è€é™ªä¼´ï¼‰ï¼ŒAIå’Œæœºå™¨äººè¶Šéš¾å½»åº•å–ä»£ã€‚ç°å®ä¸–ç•Œçš„å¤æ‚æ€§ã€åŠ¨æ€æ€§å’Œæƒ…æ„Ÿéœ€æ±‚ï¼Œè®©æœ€ç»†é¢—ç²’åº¦çš„ä¼˜åŒ–æ°¸è¿œå­¦ä¸å®Œâ€”â€”ä»Šå¤©çš„æ–°å°å··ã€æ˜å¤©çš„å®¢äººæƒ…ç»ªã€åå¤©çš„çªå‘çŠ¶å†µï¼Œéƒ½åœ¨ä¸æ–­äº§ç”Ÿæ–°çŸ¥è¯†ã€‚å¹³å°å’Œæœºå™¨äººå†æ€ä¹ˆä»äººç±»èº«ä¸Šâ€œå·å¸ˆâ€ï¼Œä¹Ÿæ€»æœ‰è¿½ä¸ä¸Šçš„åœ°æ–¹ã€‚</p>
<p>å› æ­¤ï¼ŒçœŸæ­£æŠ—AIå–ä»£çš„ï¼Œå¾€å¾€ä¸æ˜¯é«˜è–ªçš„é«˜çº§çŸ¥è¯†å·¥ä½œï¼Œè€Œæ˜¯é‚£äº›çœ‹ä¼¼ä½ç«¯çš„â€œæœåŠ¡ä¸šâ€ã€‚æœåŠ¡å‘˜ã€æŠ¤ç†å‘˜ã€é™ªæŠ¤äººå‘˜ï¼Œè¿™äº›éœ€è¦æ¸©åº¦ã€å…±æƒ…ã€å³æ—¶åº”å˜å’Œèº«ä½“åœ¨åœºçš„å²—ä½ï¼Œå¯èƒ½æˆä¸ºäººç±»åŠ³åŠ¨åŠ›æœ€åçš„å ¡å’ã€‚å½“æœºå™¨äººç»ˆäºèƒ½ç«¯ç¨³ä¸€ç›˜çƒ­æ±¤ã€è¯»æ‡‚å®¢äººçš„çœ¼ç¥ã€å¤„ç†ä¸€åœºå®¶åº­çº çº·æ—¶ï¼Œæˆ–è®¸æ‰ç§°å¾—ä¸Šäººç±»åŠ³åŠ¨åŠ›çš„çœŸæ­£å¤§è§£æ”¾ã€‚è€Œåœ¨é‚£ä¸€åˆ»åˆ°æ¥ä¹‹å‰ï¼ŒæœåŠ¡ä¸šå¾ˆå¯èƒ½æ¯”å†™ä»£ç æ›´æœ‰æœªæ¥â€”â€”å› ä¸ºå®ƒæœ€éš¾è¢«å®Œå…¨ç®—æ³•åŒ–å’Œè‡ªåŠ¨åŒ–ã€‚</p>
<p>è¯´åˆ°åº•ï¼ŒAIæœ€å®¹æ˜“å–ä»£çš„ï¼Œæ˜¯é‚£äº›ä¸éœ€è¦â€œæˆä¸ºäººç±»â€å°±èƒ½å®Œæˆçš„å·¥ä½œï¼›è€Œæœ€é¡½å¼ºå­˜æ´»ä¸‹æ¥çš„ï¼Œå¾€å¾€æ­£æ˜¯é‚£äº›åªæœ‰äººç±»æ‰èƒ½åšå¥½çš„äº‹ã€‚</p>
<h3 data-id="heading-10">ç¤¾åŒºçš„ä¸ªä½“åº”è¯¥ä¹Ÿå°±æ˜¯ç å†œçš„æˆ‘ä»¬åº”è¯¥å¦‚ä½•åº”å¯¹å†²å‡»</h3>
<p>å…¶å®å¾ˆå¤šä¸œè¥¿æ˜¯äº˜å¤ä¸å˜çš„ï¼Œæ‰“ä¸è¿‡å°±ç§¯ææ‹¥æŠ±ï¼Œå¿«é€Ÿæ·±å…¥ã€‚</p>
<ul>
<li>
<p><strong>æ‹¥æŠ±å¿«é€Ÿè½åœ°ï¼š</strong> å¯ä»¥æ·±åº¦å°è¯•ä»ä¸¤å‘¨ä¸€ä¸ªåŸå‹å˜æˆä¸€å‘¨ä¸‰ä¸ªã€‚</p>
</li>
<li>
<p><strong>AI è¾…åŠ© TDDï¼š</strong> è®©å†™æµ‹è¯•ä¸å†æ˜‚è´µã€‚</p>
</li>
<li>
<p><strong>æˆä¸º Product-minded Engineerï¼š</strong> åƒ Claude Code å›¢é˜Ÿé‚£æ ·ï¼Œä¸éœ€è¦ä¸“é—¨çš„ PMï¼Œå·¥ç¨‹å¸ˆåˆ©ç”¨ AI è¡¥é½çŸ­æ¿ï¼Œç›´æ¥å¯¹äº§å“ç»“æœè´Ÿè´£ã€‚</p>
</li>
</ul>
<h2 data-id="heading-11">Captain çš„ 2025-è°ˆè°ˆæˆ‘ä¸ªäººçš„å·¥ä½œå’Œç”Ÿæ´»</h2>
<h3 data-id="heading-12">æˆ‘å»å¹´ç«‹è¿‡çš„ Flag</h3>
<ul>
<li>
<p>å‡è‚¥ï¼šå¤±è´¥ï¼Œæˆ’çƒŸä¸€å¹´è¯ä»¶æ•´ï¼Œæ„Ÿè§‰è‡³å°‘è‚¥äº† 10 å…¬æ–¤ï¼Œ</p>
</li>
<li>
<p>æˆ’çƒŸï¼šæˆåŠŸï½è¿™ç‚¹ç¡®å®åšæŒäº†ä¸€å¹´ï¼Œ</p>
</li>
<li>
<p>è®¡åˆ’å‡º 3 æœ¬ä¹¦
å®é™…åªå‡ºç‰ˆäº† 2 æœ¬ï¼ŒåŠæ ¼åˆ†ï¼Œä½†æ˜¯ç¬¬äºŒæœ¬ä¹¦æœ‰å¹¸å’Œè‹±å›½å‡ºç‰ˆç¤¾åˆä½œäº†ï¼Œä¹Ÿç®—å‡ºäº†ä¸‰æœ¬</p>
<ul>
<li>ç¬¬ä¸€ä¸ªVibe ç¼–ç¨‹ æ¢ç´¢ AI æ—¶ä»£ç¼–ç¨‹æ–°èŒƒå¼
<ul>
<li>å…ˆè¯´ä¸‹å†™è¿™æœ¬ä¹¦çš„åˆè¡·æ˜¯å› ä¸ºä»ä¸šåŸå› è§‚å¯Ÿåˆ°äº† AI ç¼–ç¨‹çš„ä¼šå¯¹å„ä½ç¨‹åºå‘˜ä»¬äº§ç”Ÿå·¨å¤§çš„å†²å‡»ï¼Œå¸Œæœ›å¤§å®¶èƒ½çœ‹åˆ°è¿™ä¸ªå˜åŒ–ï¼Œä½†æ˜¯ç”±äºå››ä½ä½œè€…å¤§å®¶çš„è®¤çŸ¥å’ŒæŠ•å…¥åº¦éƒ½ä¸ä¸€æ ·ï¼Œæˆ‘å¯¹è¿™æœ¬ä¹¦æ•´ä½“æ˜¯ä¸æ»¡æ„çš„ï¼Œä¸»è¦è¿˜æ˜¯æŠ€æœ¯äººçœ‹äº†æ‘‡å¤´ï¼ŒéæŠ€æœ¯äººçœ‹ä¸æ‡‚ï¼Œç•¥æ˜¾é¸¡è‚‹ã€‚</li>
<li/>
</ul>
</li>
</ul>
</li>
</ul>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6af8d155de6541c4897308f50a910cea~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgWENhcHRhaW5v:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767693325&amp;x-signature=3%2FX4xInk80ru%2Bf6A7wstgnfAq60%3D" alt="ea39a75caf710d13bbec1bc8bbd18849.jpg" width="30%" loading="lazy"/>
<ul>
<li>
<p>ç¬¬äºŒæœ¬æ˜¯äººäººéƒ½æ˜¯ AI ç¨‹åºå‘˜-TRAE +Cursor ä» 0 åˆ° 1 å…¨æ ˆå®æˆ˜
è¿™æœ¬ä¹¦ä¹Ÿæ˜¯ä¸€æ³¢ä¸‰æŠ˜ï½ä½†æ˜¯æ‰¾äº†å¾ˆå¤šæœ‹å‹çœ‹äº†ï¼Œè§‰å¾—å¾ˆæœ‰ä¿¡å¿ƒã€‚æœŸå¾…ä¸Šå¸‚è¡¨ç°</p>
  <img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/380d8c94704844fb875488fcb6b03d99~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgWENhcHRhaW5v:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767693325&amp;x-signature=KyQSDtcKsw4mSFzNZMWUI5BY1Zw%3D" alt="d0a500e114a75960fbec995d152b3878.jpg" width="30%" loading="lazy"/>
</li>
<li>
<p>æµªè¯´æ’­å®¢ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Flangshuo0.podcast.xyz" target="_blank" title="https://langshuo0.podcast.xyz" ref="nofollow noopener noreferrer">langshuo0.podcast.xyz</a> æ²¡æœ‰æ–­æ›´ï½ï½ï½</p>
<ul>
<li>å…¨ç½‘ 4000 ç²‰ï¼Œç´¯è®¡ 20w æ’­æ”¾</li>
<li>æœ€è¿‘å½•åˆ¶çš„ä¸¤æœŸçš„æ’­å®¢æ¨èå¬ä¸€ä¸‹
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.xiaoyuzhoufm.com%2Fepisode%2F69376f77238f302e4b281483%3Fs%3DeyJ1IjoiNWYzYzhhYjdlMGY1ZTcyM2JiMDVjMDdlIn0%253D" target="_blank" title="https://www.xiaoyuzhoufm.com/episode/69376f77238f302e4b281483?s=eyJ1IjoiNWYzYzhhYjdlMGY1ZTcyM2JiMDVjMDdlIn0%3D" ref="nofollow noopener noreferrer">èŠèŠ AI ç¼–ç¨‹çš„ç°çŠ¶å’Œæœªæ¥</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.xiaoyuzhoufm.com%2Fepisode%2F694b33d77c91834b9fc14a95%3Fs%3DeyJ1IjoiNWYzYzhhYjdlMGY1ZTcyM2JiMDVjMDdlIn0%253D" target="_blank" title="https://www.xiaoyuzhoufm.com/episode/694b33d77c91834b9fc14a95?s=eyJ1IjoiNWYzYzhhYjdlMGY1ZTcyM2JiMDVjMDdlIn0%3D" ref="nofollow noopener noreferrer">æµªè¯´å¹´ç»ˆç›˜ç‚¹-AI ç¼–ç¨‹è¿™ä¸€å¹´ï¼šæ˜¯é™ç»´æ‰“å‡»ï¼Ÿè¿˜æ˜¯èµ›åšåƒåœ¾çš„ç‹‚æ¬¢ï¼Ÿ</a>
<ul>
<li>2026å¹´ç»ˆç›˜ç‚¹ã€‚é‚£å¤©æ™šä¸Šå‘å¸ƒæ’­å®¢ï¼Œå‡†å¤‡ç´ æå¬äº†è‡ªå·±çš„æ’­å®¢ï¼Œæ„Ÿè§‰å¾ˆå¥‡æ€ªä¹Ÿå¾ˆæœ‰è¶£ï¼Œæˆ‘ä»å¤´åˆ°å°¾å¤´ä¸€æ¬¡å¬äº†è‡ªå·± 2h çš„æ’­å®¢ï¼Œå®é™…è¿™æœŸæ’­å®¢å½•åˆ¶æ—¶å€™æœ‰å¾ˆå¤šæ‚éŸ³çš„[ç ´æ¶•ä¸ºç¬‘]ã€‚
ç‹¼å” æ˜¯ AI ç¼–ç¨‹ä¿å®ˆæ´¾ï¼Œä¸”å¸¦ç€å¯¹ AI ç¼–ç¨‹çš„æ— é™å˜²è®½
è¢æ»šæ»š  è§‚ç‚¹å°–é”ï¼Œè®¨åŒ AI å‘³çš„äº§ç‰©
folyd 26 å¹´ç›®æ ‡ 1M ARR
williemJiangå¤å…¸æ´¾ï¼Œä¹Ÿå¼€å§‹ç”¨ AI ç¼–ç¨‹å»ç»´æŠ¤å¼€æºé¡¹ç›®ã€‚
ä»Šå¹´æ€»ç»“æ˜¯æœ‰è¶£çš„ä¸€æœŸï¼Œå¸Œæœ›å¤§å®¶æœ‰æ‰€æ”¶è·</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 data-id="heading-13">å·¥ä½œä¸Šç¤¾åŒºçš„å˜åŒ–</h3>
<ul>
<li>ç»“åˆä»Šå¹´çš„çƒ­ç‚¹åšäº†ï¼šaicoding.juejin.cn ï¼Œç§ç§åŸå› ï¼Œæ²¡æœ‰åšå¥½ï¼Œè¿™ä¹Ÿè®©æˆ‘é‡æ–°å®¡è§†ä¼ ç»ŸæŠ€æœ¯ç¤¾åŒºçš„ä»·å€¼ã€‚</li>
<li>ä¸»è¦å·¥ä½œä¸­å¿ƒæ”¾åœ¨ TRAE ä¸Š</li>
<li>å»äº†ä¸Šæµ·ã€æ­å·ã€å¹¿å·ã€æ·±åœ³ã€æˆéƒ½ã€é‡åº†è·‘äº†ä¸€åœˆï¼Œç»„ç»‡äº†å¾ˆå¤šçº¿ä¸‹æ´»åŠ¨</li>
<li>ç¬¬ä¸€æ¬¡çœŸæ­£æ„ä¹‰ä¸Šçš„è·¨å›½å»åˆ°ä¸œäº¬ç»„ç»‡äº†ä¸€æ¬¡æ´»åŠ¨</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8403237079c14e7eb3df344e463ad11d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgWENhcHRhaW5v:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767693325&amp;x-signature=7xRq4ulsqil4mFFew%2BWTKgf%2BSaA%3D" alt="31f4b0a02f9bf35f5004fdb8c5108c50.jpg" loading="lazy"/></p>
<blockquote>
<p><strong>è¿™äº›çº¿ä¸‹é¢å¯¹é¢çš„ç¢°æ’ç»™æˆ‘çš„ä½“ä¼šæ˜¯ï¼š</strong> ä»£ç å¯ä»¥ç”± AI ç”Ÿæˆï¼Œä½†ä¿¡ä»»ã€æ¿€æƒ…å’Œçµæ„Ÿçš„ç¢°æ’ï¼Œä¾ç„¶åªå‘ç”Ÿåœ¨äººä¸äººé¢å¯¹é¢çš„æ—¶åˆ»ã€‚</p>
</blockquote>
<h3 data-id="heading-14">26 å¹´çš„ ä¸ªäººflag</h3>
<ul>
<li>å‡è‚¥ï¼Œå¸Œæœ›ç˜¦å›é«˜ä¸­æ—¶ä»£</li>
<li>æœ‰ä¸ªå¨ƒå¨ƒ</li>
<li>åšä¸€äº›é‡è¦å†³ç­–</li>
<li>ä¹°ä¸ªæ‘©æ‰˜è½¦å¯ä»¥æ‘©æ—…</li>
<li>æ·±åº¦ä½¿ç”¨ å’Œæ‹¥æŠ± AI</li>
<li>åšæŒå½•æ’­å®¢</li>
<li>è®¸æ„¿ç¾å›½ç­¾è¯å’Œå·´è¥¿ç­¾è¯é¡ºåˆ©ä¸‹æ¥ï¼Œå¯ä»¥èµ°å‡ºäºšæ´²ï½ï½ï½</li>
<li>å¸®åŠ©æ›´å¤šäººäº†è§£ AI ç¼–ç¨‹</li>
</ul>
<p>æˆ‘æ˜¯ Captainï¼Œâ€œ25å¹´å¤ªæ¼«é•¿ã€å¤ªç–²æƒ«äº†ï¼Œä½ å¯ä»¥å¼€å¯æ–°ç”Ÿæ´»äº†ã€‚â€</p>
<p>æŠ€æœ¯æ˜¯ä¸€ç›´åœ¨å˜ï¼Œå·¥å…·ä¹Ÿåœ¨å˜ï¼Œä½†åšå†³å®šçš„ä¾ç„¶æ˜¯äººã€‚ AI è®©æ‰§è¡Œå˜å¾—æå…¶å»‰ä»·ï¼Œè¿™å°±æ„å‘³ç€ **â€œå†³å®šåšä»€ä¹ˆâ€**å˜å¾—å‰æ‰€æœªæœ‰çš„æ˜‚è´µã€‚</p>
<p>è¿™é‡Œä¹Ÿåˆ†äº«ä¸€ä¸‹æœ€è¿‘ youtube çˆ†ç«ä¸­å¹´ç¨‹åºå‘˜çš„è§†é¢‘ï¼Œä¸€åœºå…³äºé‡‘é’±ã€æ—¶é—´ä¸ç”Ÿå‘½æ„ä¹‰çš„æ·±åˆ»å¤ç›˜ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fyoutu.be%2FVeMA9WGKxOg%3Fsi%3Dxx5AAOuJLy87ePeV" target="_blank" title="https://youtu.be/VeMA9WGKxOg?si=xx5AAOuJLy87ePeV" ref="nofollow noopener noreferrer">youtu.be/VeMA9WGKxOgâ€¦</a></p>
<p>ä»å°‘å¹´æ—¶ä»£æŠ±ç€O'ReillyæŠ€æœ¯ä¹¦ç‹‚å•ƒï¼Œåˆ°å¦‚ä»Šæ‰‹æ¡ä¸“åˆ©ã€æ‹¿ç€å¤§å‚å¤©ä»·è‚¡ç¥¨çš„æŠ€æœ¯é«˜ç®¡ï¼Œè¿™ä½40å¤šå²çš„å¤§å“¥å›é¡¾äº†è‡ªå·±ç§‘æŠ€åœˆæ‘¸çˆ¬æ»šæ‰“çš„25å¹´ã€‚å…‰é²œäº®ä¸½çš„è¡¨é¢ä¸‹ï¼Œæ˜¯æ®‹é…·çš„ç°å®ï¼šå³ä½¿åšåˆ°æ¶æ„å¸ˆï¼Œä¹Ÿå‘ç°è‡ªå·±ä¸è¿‡åœ¨é‡å¤é€ è½®å­ï¼Œä»£ç å¹¶æœªçœŸæ­£è®©ä¸–ç•Œå˜å¥½ã€‚ä»–äº²çœ¼ç›®ç¹æ‰åæ¨ªæº¢çš„åŒäº‹å› è¿‡åŠ³ç¦»ä¸–ï¼Œå´ä»…ä¸€å‘¨åï¼Œå…¬å¸é‡Œå°±ä»¿ä½›è¿™ä¸ªäººä»æœªå­˜åœ¨è¿‡ã€‚æ¯å¤©åªå‰©1å°æ—¶é™ªä¼´å­©å­ï¼Œé”™è¿‡äº†å¸¦ä»–ä»¬éœ²è¥ã€é’“é±¼çš„å®è´µæ—¶å…‰ã€‚å¾—ç›Šäºæ—©å¹´å¯¹è´¢å¯Œçš„è§‰é†’ï¼Œåœ¨æœ€åä¸€è½®å¤§è£å‘˜ä¸­ï¼Œä»–åšå‡ºä¸€ä¸ªå‹‡æ•¢å†³å®šï¼šä¸ºä¿ä½ç»„é‡Œå¹´è½»äººçš„é¥­ç¢—ï¼Œä»–ä¸»åŠ¨æŠŠè‡ªå·±æ”¾è¿›è£å‘˜åå•ã€‚</p>
<p>è¯„è®ºåŒºå¾ˆæœ‰è¶£ï¼Œå¤§å®¶è¯´è¿™æ‰æ˜¯YouTubeå­˜åœ¨çš„æ„ä¹‰ã€‚</p>
<p>â€œå”¯ä¸€ä¼šè®°å¾—ä½ åŠ ç­åˆ°æ·±å¤œçš„äººï¼Œåªæœ‰ä½ çš„å­©å­å’Œå®¶äººã€‚ç§‘æŠ€è¡Œä¸šæ—©å·²ç¼ºä¹å¿ è¯šä¸ä½“é¢ã€‚â€</p>
<p>â€œå¦‚æœä½ æ­»äº†ï¼Œä½ çš„èŒä½ä¼šåœ¨è®£å‘ŠåˆŠç™»å‰å°±è¢«é‡æ–°æ‹›è˜ã€‚â€</p>
<p>â€œå…„å¼Ÿçœ‹èµ·æ¥çœŸçš„å› ä¸ºè¢«è£å‘˜è€Œå¼€å¿ƒã€‚ä¹Ÿè®¸è¿™å…¶å®æ˜¯å¡ç¿å¤±é©¬ï¼Œç„‰çŸ¥éç¦ã€‚â€</p>
<p>â€œè¯·å¤šå‘ä¸€äº›è§†é¢‘ã€‚ç¤¾äº¤åª’ä½“ä¸Šå……æ–¥ç€åƒåœ¾å†…å®¹ï¼Œæˆ‘ä»¬éœ€è¦æœ‰çœŸå®ç”Ÿæ´»ç»éªŒçš„çœŸäººåˆ†äº«æ•…äº‹ã€‚â€</p>
<p>â€œè¢«è£å‘˜æ˜¯æ¯ä¸ªç§‘æŠ€ä»ä¸šè€…çš„å®¿å‘½ã€‚ä½ å¿…é¡»æˆä¸ºåˆä¼™äººâ€”â€”è¦ä¹ˆåœ¨å½“å‰å…¬å¸ï¼Œè¦ä¹ˆåˆ›åŠè‡ªå·±çš„å…¬å¸ã€‚â€</p>
<p>â€œ25å¹´å¤ªæ¼«é•¿ã€å¤ªç–²æƒ«äº†ï¼Œä½ å¯ä»¥å¼€å¯æ–°ç”Ÿæ´»äº†ã€‚â€</p>
<p>2026 å¸Œæœ›ç»§ç»­å’Œå¤§å®¶åŒåœ¨ï¼Œæ¬¢è¿å¤§å®¶æŒç»­æ‰¾æˆ‘äº¤æµèŠå¤©ï¼Œä¸ªäººå¾®ä¿¡ï¼š229199157ï¼Œæ¨ç‰¹ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fx.com%2FXCaptaincc" target="_blank" title="https://x.com/XCaptaincc" ref="nofollow noopener noreferrer">x.com/XCaptaincc</a></p>
<p>çœ‹åˆ°ç»“å°¾çš„åˆ«æ˜å‹ä»¬åˆ«åˆ’èµ°ï¼Œè¯·ç•™ä¸‹ä½ çš„æ€è€ƒå’Œæ„Ÿè§¦ï¼Œæˆ‘ä¼šå¡«é€‰ 3-5 äººè¯„è®ºé€å‡ºçš„æˆ‘çš„ä¸ªäººç­¾åä¹¦ä¸€æœ¬ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åˆ¶ä½œæ—©é¤ï¼Œæˆ‘å¼‚æ­¥ç¼–ç¨‹]]></title>    <link>https://juejin.cn/post/7589475923696336915</link>    <guid>https://juejin.cn/post/7589475923696336915</guid>    <pubDate>2025-12-30T08:03:33.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589475923696336915" data-draft-id="7589212818807242815" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åˆ¶ä½œæ—©é¤ï¼Œæˆ‘å¼‚æ­¥ç¼–ç¨‹"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-30T08:03:33.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸ƒå®ä¸‰å”"/> <meta itemprop="url" content="https://juejin.cn/user/2508420375913500"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åˆ¶ä½œæ—©é¤ï¼Œæˆ‘å¼‚æ­¥ç¼–ç¨‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2508420375913500/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸ƒå®ä¸‰å”
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-30T08:03:33.000Z" title="Tue Dec 30 2025 08:03:33 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    2
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">åœºæ™¯ï¼šå¿™ç¢Œçš„æ—©æ™¨åˆ¶ä½œæ—©é¤</h2>
<p>æƒ³è±¡ä¸€ä¸‹å·¥ä½œæ—¥çš„æ—©æ™¨ï¼Œä½ éœ€è¦å‡†å¤‡ä¸€ä»½å®Œæ•´çš„æ—©é¤ã€‚è®©æˆ‘ä»¬çœ‹çœ‹è¿™ä¸ªè¿‡ç¨‹å¦‚ä½•ç”¨åŒæ­¥å’Œå¼‚æ­¥çš„æ–¹å¼æ¥æ‰§è¡Œï¼š</p>
<p>csharp</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">using</span> System;
<span class="hljs-keyword">using</span> System.Diagnostics;
<span class="hljs-keyword">using</span> System.Threading.Tasks;

<span class="hljs-keyword">namespace</span> <span class="hljs-title">BreakfastAsyncExample</span>
{
    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span></span>
    <span class="hljs-comment"><span class="hljs-doctag">///</span> æ—©é¤é£Ÿæå’Œå·¥å…·</span>
    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;/summary&gt;</span></span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Kitchen</span>
    {
        <span class="hljs-keyword">public</span> <span class="hljs-built_in">bool</span> CoffeeReady { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
        <span class="hljs-keyword">public</span> <span class="hljs-built_in">bool</span> ToastReady { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
        <span class="hljs-keyword">public</span> <span class="hljs-built_in">bool</span> EggsReady { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
        <span class="hljs-keyword">public</span> <span class="hljs-built_in">bool</span> JuiceReady { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
    }

    <span class="hljs-keyword">class</span> <span class="hljs-title">Program</span>
    {
        <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">async</span> Task <span class="hljs-title">Main</span>(<span class="hljs-params"><span class="hljs-built_in">string</span>[] args</span>)</span>
        {
            Console.WriteLine(<span class="hljs-string">"=== æ—©é¤åˆ¶ä½œæ¨¡æ‹Ÿ ===\n"</span>);
            
            <span class="hljs-comment">// æ¼”ç¤ºåŒæ­¥åˆ¶ä½œæ—©é¤ï¼ˆä½æ•ˆæ–¹å¼ï¼‰</span>
            Console.WriteLine(<span class="hljs-string">"1. åŒæ­¥åˆ¶ä½œæ—©é¤ï¼ˆä½æ•ˆæ–¹å¼ï¼‰ï¼š"</span>);
            <span class="hljs-keyword">await</span> MakeBreakfastSynchronously();
            
            Console.WriteLine(<span class="hljs-string">"\n"</span> + <span class="hljs-keyword">new</span> <span class="hljs-built_in">string</span>(<span class="hljs-string">'-'</span>, <span class="hljs-number">50</span>) + <span class="hljs-string">"\n"</span>);
            
            <span class="hljs-comment">// æ¼”ç¤ºå¼‚æ­¥åˆ¶ä½œæ—©é¤ï¼ˆé«˜æ•ˆæ–¹å¼ï¼‰</span>
            Console.WriteLine(<span class="hljs-string">"2. å¼‚æ­¥åˆ¶ä½œæ—©é¤ï¼ˆé«˜æ•ˆæ–¹å¼ï¼‰ï¼š"</span>);
            <span class="hljs-keyword">await</span> MakeBreakfastAsynchronously();
            
            Console.WriteLine(<span class="hljs-string">"\n"</span> + <span class="hljs-keyword">new</span> <span class="hljs-built_in">string</span>(<span class="hljs-string">'-'</span>, <span class="hljs-number">50</span>) + <span class="hljs-string">"\n"</span>);
            
            <span class="hljs-comment">// æ¼”ç¤ºæ›´é«˜çº§çš„å¼‚æ­¥æ¨¡å¼</span>
            Console.WriteLine(<span class="hljs-string">"3. å¹¶è¡Œå¼‚æ­¥åˆ¶ä½œæ—©é¤ï¼ˆæœ€ä¼˜æ–¹å¼ï¼‰ï¼š"</span>);
            <span class="hljs-keyword">await</span> MakeBreakfastParallelAsync();
        }
        
        <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span></span>
        <span class="hljs-comment"><span class="hljs-doctag">///</span> åŒæ­¥æ–¹å¼åˆ¶ä½œæ—©é¤ - ä½æ•ˆä½†ç®€å•</span>
        <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;/summary&gt;</span></span>
        <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">async</span> Task <span class="hljs-title">MakeBreakfastSynchronously</span>()</span>
        {
            <span class="hljs-keyword">var</span> stopwatch = Stopwatch.StartNew();
            <span class="hljs-keyword">var</span> kitchen = <span class="hljs-keyword">new</span> Kitchen();
            
            Console.WriteLine(<span class="hljs-string">"æ—©ä¸Š7:00 - å¼€å§‹åˆ¶ä½œæ—©é¤"</span>);
            
            <span class="hljs-comment">// åŒæ­¥æ–¹å¼ï¼šä¸€ä¸ªæ¥ä¸€ä¸ªåœ°åš</span>
            <span class="hljs-keyword">await</span> MakeCoffeeAsync(kitchen);        <span class="hljs-comment">// ç…®å’–å•¡éœ€è¦3åˆ†é’Ÿ</span>
            <span class="hljs-keyword">await</span> MakeToastAsync(kitchen);         <span class="hljs-comment">// çƒ¤é¢åŒ…éœ€è¦2åˆ†é’Ÿ</span>
            <span class="hljs-keyword">await</span> FryEggsAsync(kitchen);           <span class="hljs-comment">// ç…é¸¡è›‹éœ€è¦4åˆ†é’Ÿ</span>
            <span class="hljs-keyword">await</span> PourJuiceAsync(kitchen);         <span class="hljs-comment">// å€’æœæ±éœ€è¦1åˆ†é’Ÿ</span>
            
            stopwatch.Stop();
            Console.WriteLine(<span class="hljs-string">$"æ—©ä¸Š7:10 - æ—©é¤å®Œæˆï¼æ€»å…±è€—æ—¶: <span class="hljs-subst">{stopwatch.Elapsed.TotalSeconds:F1}</span>ç§’"</span>);
            ServeBreakfast(kitchen);
        }
        
        <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span></span>
        <span class="hljs-comment"><span class="hljs-doctag">///</span> å¼‚æ­¥æ–¹å¼åˆ¶ä½œæ—©é¤ - é«˜æ•ˆä½†ä¸å®Œç¾</span>
        <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;/summary&gt;</span></span>
        <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">async</span> Task <span class="hljs-title">MakeBreakfastAsynchronously</span>()</span>
        {
            <span class="hljs-keyword">var</span> stopwatch = Stopwatch.StartNew();
            <span class="hljs-keyword">var</span> kitchen = <span class="hljs-keyword">new</span> Kitchen();
            
            Console.WriteLine(<span class="hljs-string">"æ—©ä¸Š7:00 - å¼€å§‹åˆ¶ä½œæ—©é¤"</span>);
            
            <span class="hljs-comment">// å¼‚æ­¥æ–¹å¼ï¼šå¼€å§‹æ‰€æœ‰ä»»åŠ¡ï¼Œç„¶åç­‰å¾…</span>
            <span class="hljs-keyword">var</span> coffeeTask = MakeCoffeeAsync(kitchen);        <span class="hljs-comment">// 3åˆ†é’Ÿ</span>
            <span class="hljs-keyword">var</span> toastTask = MakeToastAsync(kitchen);          <span class="hljs-comment">// 2åˆ†é’Ÿ</span>
            <span class="hljs-keyword">var</span> eggsTask = FryEggsAsync(kitchen);             <span class="hljs-comment">// 4åˆ†é’Ÿ</span>
            <span class="hljs-keyword">var</span> juiceTask = PourJuiceAsync(kitchen);          <span class="hljs-comment">// 1åˆ†é’Ÿ</span>
            
            <span class="hljs-comment">// ç­‰å¾…æ‰€æœ‰ä»»åŠ¡å®Œæˆ</span>
            <span class="hljs-keyword">await</span> coffeeTask;
            <span class="hljs-keyword">await</span> toastTask;
            <span class="hljs-keyword">await</span> eggsTask;
            <span class="hljs-keyword">await</span> juiceTask;
            
            stopwatch.Stop();
            Console.WriteLine(<span class="hljs-string">$"æ—©ä¸Š7:04 - æ—©é¤å®Œæˆï¼æ€»å…±è€—æ—¶: <span class="hljs-subst">{stopwatch.Elapsed.TotalSeconds:F1}</span>ç§’"</span>);
            ServeBreakfast(kitchen);
        }
        
        <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span></span>
        <span class="hljs-comment"><span class="hljs-doctag">///</span> å¹¶è¡Œå¼‚æ­¥åˆ¶ä½œæ—©é¤ - æœ€ä¼˜æ–¹å¼</span>
        <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;/summary&gt;</span></span>
        <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">async</span> Task <span class="hljs-title">MakeBreakfastParallelAsync</span>()</span>
        {
            <span class="hljs-keyword">var</span> stopwatch = Stopwatch.StartNew();
            <span class="hljs-keyword">var</span> kitchen = <span class="hljs-keyword">new</span> Kitchen();
            
            Console.WriteLine(<span class="hljs-string">"æ—©ä¸Š7:00 - å¼€å§‹åˆ¶ä½œæ—©é¤"</span>);
            
            <span class="hljs-comment">// ä½¿ç”¨Task.WhenAllå¹¶è¡Œæ‰§è¡Œæ‰€æœ‰ä»»åŠ¡</span>
            <span class="hljs-keyword">await</span> Task.WhenAll(
                MakeCoffeeAsync(kitchen),        <span class="hljs-comment">// 3åˆ†é’Ÿ</span>
                MakeToastAsync(kitchen),         <span class="hljs-comment">// 2åˆ†é’Ÿ  </span>
                FryEggsAsync(kitchen),           <span class="hljs-comment">// 4åˆ†é’Ÿ</span>
                PourJuiceAsync(kitchen)          <span class="hljs-comment">// 1åˆ†é’Ÿ</span>
            );
            
            stopwatch.Stop();
            Console.WriteLine(<span class="hljs-string">$"æ—©ä¸Š7:04 - æ—©é¤å®Œæˆï¼æ€»å…±è€—æ—¶: <span class="hljs-subst">{stopwatch.Elapsed.TotalSeconds:F1}</span>ç§’"</span>);
            ServeBreakfast(kitchen);
        }
        
        <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span></span>
        <span class="hljs-comment"><span class="hljs-doctag">///</span> å¼‚æ­¥ç…®å’–å•¡ - æ¨¡æ‹Ÿè€—æ—¶æ“ä½œ</span>
        <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;/summary&gt;</span></span>
        <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">async</span> Task <span class="hljs-title">MakeCoffeeAsync</span>(<span class="hljs-params">Kitchen kitchen</span>)</span>
        {
            Console.WriteLine(<span class="hljs-string">$"  å¼€å§‹ç…®å’–å•¡ï¼ˆéœ€è¦3ç§’ï¼‰..."</span>);
            <span class="hljs-keyword">await</span> Task.Delay(<span class="hljs-number">3000</span>); <span class="hljs-comment">// æ¨¡æ‹Ÿ3ç§’çš„ç…®å’–å•¡æ—¶é—´</span>
            
            kitchen.CoffeeReady = <span class="hljs-literal">true</span>;
            Console.WriteLine(<span class="hljs-string">$"  âœ“ å’–å•¡ç…®å¥½äº†ï¼"</span>);
        }
        
        <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span></span>
        <span class="hljs-comment"><span class="hljs-doctag">///</span> å¼‚æ­¥çƒ¤é¢åŒ… - æ¨¡æ‹Ÿè€—æ—¶æ“ä½œ</span>
        <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;/summary&gt;</span></span>
        <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">async</span> Task <span class="hljs-title">MakeToastAsync</span>(<span class="hljs-params">Kitchen kitchen</span>)</span>
        {
            Console.WriteLine(<span class="hljs-string">$"  å¼€å§‹çƒ¤é¢åŒ…ï¼ˆéœ€è¦2ç§’ï¼‰..."</span>);
            <span class="hljs-keyword">await</span> Task.Delay(<span class="hljs-number">2000</span>); <span class="hljs-comment">// æ¨¡æ‹Ÿ2ç§’çš„çƒ¤é¢åŒ…æ—¶é—´</span>
            
            kitchen.ToastReady = <span class="hljs-literal">true</span>;
            Console.WriteLine(<span class="hljs-string">$"  âœ“ é¢åŒ…çƒ¤å¥½äº†ï¼"</span>);
        }
        
        <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span></span>
        <span class="hljs-comment"><span class="hljs-doctag">///</span> å¼‚æ­¥ç…é¸¡è›‹ - æ¨¡æ‹Ÿè€—æ—¶æ“ä½œ</span>
        <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;/summary&gt;</span></span>
        <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">async</span> Task <span class="hljs-title">FryEggsAsync</span>(<span class="hljs-params">Kitchen kitchen</span>)</span>
        {
            Console.WriteLine(<span class="hljs-string">$"  å¼€å§‹ç…é¸¡è›‹ï¼ˆéœ€è¦4ç§’ï¼‰..."</span>);
            <span class="hljs-keyword">await</span> Task.Delay(<span class="hljs-number">4000</span>); <span class="hljs-comment">// æ¨¡æ‹Ÿ4ç§’çš„ç…é¸¡è›‹æ—¶é—´</span>
            
            kitchen.EggsReady = <span class="hljs-literal">true</span>;
            Console.WriteLine(<span class="hljs-string">$"  âœ“ é¸¡è›‹ç…å¥½äº†ï¼"</span>);
        }
        
        <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span></span>
        <span class="hljs-comment"><span class="hljs-doctag">///</span> å¼‚æ­¥å€’æœæ± - æ¨¡æ‹Ÿç®€å•æ“ä½œ</span>
        <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;/summary&gt;</span></span>
        <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">async</span> Task <span class="hljs-title">PourJuiceAsync</span>(<span class="hljs-params">Kitchen kitchen</span>)</span>
        {
            Console.WriteLine(<span class="hljs-string">$"  å¼€å§‹å€’æœæ±ï¼ˆéœ€è¦1ç§’ï¼‰..."</span>);
            <span class="hljs-keyword">await</span> Task.Delay(<span class="hljs-number">1000</span>); <span class="hljs-comment">// æ¨¡æ‹Ÿ1ç§’çš„å€’æœæ±æ—¶é—´</span>
            
            kitchen.JuiceReady = <span class="hljs-literal">true</span>;
            Console.WriteLine(<span class="hljs-string">$"  âœ“ æœæ±å€’å¥½äº†ï¼"</span>);
        }
        
        <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span></span>
        <span class="hljs-comment"><span class="hljs-doctag">///</span> ä¸Šèœ</span>
        <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;/summary&gt;</span></span>
        <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">ServeBreakfast</span>(<span class="hljs-params">Kitchen kitchen</span>)</span>
        {
            Console.WriteLine(<span class="hljs-string">"\n  æ—©é¤ä¸Šæ¡Œï¼š"</span>);
            <span class="hljs-keyword">if</span> (kitchen.CoffeeReady) Console.WriteLine(<span class="hljs-string">"  â˜• çƒ­å’–å•¡"</span>);
            <span class="hljs-keyword">if</span> (kitchen.ToastReady) Console.WriteLine(<span class="hljs-string">"  ğŸ çƒ¤é¢åŒ…"</span>);
            <span class="hljs-keyword">if</span> (kitchen.EggsReady) Console.WriteLine(<span class="hljs-string">"  ğŸ³ ç…é¸¡è›‹"</span>);
            <span class="hljs-keyword">if</span> (kitchen.JuiceReady) Console.WriteLine(<span class="hljs-string">"  ğŸ¥¤ æ©™æ±"</span>);
        }
    }
}
</code></pre>
<h2 data-id="heading-1">æ›´æ·±å…¥çš„ç”Ÿæ´»ä¾‹å­ï¼šæ—©ä¸Šçš„å¤šé‡ä»»åŠ¡</h2>
<p>è®©æˆ‘ä»¬çœ‹ä¸€ä¸ªæ›´è´´è¿‘ç”Ÿæ´»çš„å¤æ‚ä¾‹å­ï¼š</p>
<p>csharp</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">using</span> System;
<span class="hljs-keyword">using</span> System.Collections.Generic;
<span class="hljs-keyword">using</span> System.Threading.Tasks;

<span class="hljs-keyword">namespace</span> <span class="hljs-title">MorningRoutineExample</span>
{
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">MorningPerson</span>
    {
        <span class="hljs-keyword">public</span> <span class="hljs-built_in">bool</span> IsShowered { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
        <span class="hljs-keyword">public</span> <span class="hljs-built_in">bool</span> IsDressed { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
        <span class="hljs-keyword">public</span> <span class="hljs-built_in">bool</span> HasEaten { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
        <span class="hljs-keyword">public</span> EmailResult Emails { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
        <span class="hljs-keyword">public</span> <span class="hljs-built_in">bool</span> HasNews { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">EmailResult</span>
    {
        <span class="hljs-keyword">public</span> <span class="hljs-built_in">int</span> Count { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
        <span class="hljs-keyword">public</span> List&lt;<span class="hljs-built_in">string</span>&gt; ImportantEmails { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
    }
    
    <span class="hljs-keyword">class</span> <span class="hljs-title">Program</span>
    {
        <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">async</span> Task <span class="hljs-title">Main</span>(<span class="hljs-params"><span class="hljs-built_in">string</span>[] args</span>)</span>
        {
            Console.WriteLine(<span class="hljs-string">"ğŸŒ… é«˜æ•ˆçš„æ—©æ™¨ï¼šå¼‚æ­¥ç¼–ç¨‹çš„æ—¥å¸¸åº”ç”¨\n"</span>);
            
            <span class="hljs-keyword">await</span> DemonstrateMorningRoutine();
            
            Console.WriteLine(<span class="hljs-string">"\n"</span> + <span class="hljs-keyword">new</span> <span class="hljs-built_in">string</span>(<span class="hljs-string">'='</span>, <span class="hljs-number">60</span>) + <span class="hljs-string">"\n"</span>);
            
            <span class="hljs-keyword">await</span> DemonstrateRealWorldAsyncPatterns();
        }
        
        <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span></span>
        <span class="hljs-comment"><span class="hljs-doctag">///</span> æ¼”ç¤ºæ—©æ™¨æ—¥å¸¸çš„å¼‚æ­¥æ¨¡å¼</span>
        <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;/summary&gt;</span></span>
        <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">async</span> Task <span class="hljs-title">DemonstrateMorningRoutine</span>()</span>
        {
            <span class="hljs-keyword">var</span> person = <span class="hljs-keyword">new</span> MorningPerson();
            <span class="hljs-keyword">var</span> morningTasks = <span class="hljs-keyword">new</span> List&lt;Task&gt;();
            
            Console.WriteLine(<span class="hljs-string">"ã€åœºæ™¯1ï¼šæ™®é€šäººçš„æ—©æ™¨ã€‘"</span>);
            Console.WriteLine(<span class="hljs-string">"7:00 é—¹é’Ÿå“äº†ï¼Œå¼€å§‹æ—©æ™¨æ—¥å¸¸...\n"</span>);
            
            <span class="hljs-comment">// 1. å¹¶è¡Œå¼€å§‹å¤šä¸ªä»»åŠ¡</span>
            <span class="hljs-keyword">var</span> showerTask = TakeShowerAsync(person);
            <span class="hljs-keyword">var</span> coffeeTask = MakeCoffeeAsync(); <span class="hljs-comment">// è¿™ä¸ªæˆ‘ä»¬ä¸éœ€è¦ç­‰å®ƒå®Œæˆæ‰åšå…¶ä»–äº‹</span>
            
            <span class="hljs-comment">// 2. ç­‰å¾…å¿…é¡»å®Œæˆçš„ä»»åŠ¡ï¼ˆæ´—æ¾¡ï¼‰</span>
            <span class="hljs-keyword">await</span> showerTask;
            Console.WriteLine(<span class="hljs-string">"  7:10 âœ“ æ´—å®Œæ¾¡äº†\n"</span>);
            
            <span class="hljs-comment">// 3. ç»§ç»­å…¶ä»–å¯ä»¥å¹¶è¡Œçš„ä»»åŠ¡</span>
            <span class="hljs-keyword">var</span> dressTask = GetDressedAsync(person);
            <span class="hljs-keyword">var</span> breakfastTask = HaveBreakfastAsync(person);
            
            <span class="hljs-comment">// 4. åŒæ—¶æ£€æŸ¥æ–°é—»å’Œå¤©æ°”ï¼ˆéå…³é”®ä»»åŠ¡ï¼‰</span>
            <span class="hljs-keyword">var</span> newsTask = CheckNewsAsync(person);
            
            <span class="hljs-comment">// 5. ç­‰å¾…ç©¿è¡£å’Œæ—©é¤å®Œæˆ</span>
            <span class="hljs-keyword">await</span> Task.WhenAll(dressTask, breakfastTask);
            Console.WriteLine(<span class="hljs-string">"  7:20 âœ“ ç©¿å¥½è¡£æœåƒå®Œæ—©é¤\n"</span>);
            
            <span class="hljs-comment">// 6. æ£€æŸ¥å’–å•¡æ˜¯å¦å¥½äº†</span>
            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">await</span> coffeeTask)
            {
                Console.WriteLine(<span class="hljs-string">"  â˜• å’–å•¡å·²ç»å¥½äº†ï¼Œå¯ä»¥å¸¦ç€è·¯ä¸Šå–\n"</span>);
            }
            
            <span class="hljs-comment">// 7. å¤„ç†æ–°é—»ï¼ˆå¦‚æœæœ‰ï¼‰</span>
            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">await</span> newsTask)
            {
                Console.WriteLine(<span class="hljs-string">"  ğŸ“° äº†è§£äº†ä»Šå¤©çš„å¤´æ¡æ–°é—»\n"</span>);
            }
            
            Console.WriteLine(<span class="hljs-string">"  7:25 ğŸš— å‡†æ—¶å‡ºé—¨ä¸Šç­ï¼"</span>);
        }
        
        <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span></span>
        <span class="hljs-comment"><span class="hljs-doctag">///</span> æ¼”ç¤ºçœŸå®ä¸–ç•Œä¸­çš„å¼‚æ­¥æ¨¡å¼</span>
        <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;/summary&gt;</span></span>
        <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">async</span> Task <span class="hljs-title">DemonstrateRealWorldAsyncPatterns</span>()</span>
        {
            Console.WriteLine(<span class="hljs-string">"ã€åœºæ™¯2ï¼šå·¥ä½œä¸­çš„å¼‚æ­¥ç¼–ç¨‹ã€‘"</span>);
            Console.WriteLine(<span class="hljs-string">"9:00 åˆ°è¾¾åŠå…¬å®¤ï¼Œå¼€å§‹å·¥ä½œ...\n"</span>);
            
            <span class="hljs-keyword">try</span>
            {
                <span class="hljs-comment">// æ¨¡å¼1ï¼šè¶…æ—¶æ§åˆ¶ - ç­‰å¾…å›å¤é‚®ä»¶ï¼Œä½†ä¸è¶…è¿‡5åˆ†é’Ÿ</span>
                Console.WriteLine(<span class="hljs-string">"1. å‘é€é‡è¦é‚®ä»¶å¹¶ç­‰å¾…å›å¤ï¼ˆæœ€å¤šç­‰5åˆ†é’Ÿï¼‰..."</span>);
                <span class="hljs-keyword">var</span> emailReply = <span class="hljs-keyword">await</span> WaitForEmailReplyAsync()
                    .WithTimeout(TimeSpan.FromMinutes(<span class="hljs-number">5</span>));
                
                <span class="hljs-keyword">if</span> (emailReply != <span class="hljs-literal">null</span>)
                {
                    Console.WriteLine(<span class="hljs-string">"   âœ“ æ”¶åˆ°äº†å›å¤"</span>);
                }
                <span class="hljs-keyword">else</span>
                {
                    Console.WriteLine(<span class="hljs-string">"   â±ï¸  è¶…æ—¶äº†ï¼Œç»§ç»­å…¶ä»–å·¥ä½œ"</span>);
                }
                
                <span class="hljs-comment">// æ¨¡å¼2ï¼šå¹¶è¡Œä¸‹è½½å¤šä¸ªæ–‡ä»¶</span>
                Console.WriteLine(<span class="hljs-string">"\n2. åŒæ—¶ä¸‹è½½å¤šä¸ªæ–‡ä»¶..."</span>);
                <span class="hljs-keyword">var</span> fileTasks = <span class="hljs-keyword">new</span> List&lt;Task&lt;<span class="hljs-built_in">string</span>&gt;&gt;
                {
                    DownloadFileAsync(<span class="hljs-string">"å­£åº¦æŠ¥å‘Š.pdf"</span>),
                    DownloadFileAsync(<span class="hljs-string">"å®¢æˆ·æ•°æ®.xlsx"</span>),
                    DownloadFileAsync(<span class="hljs-string">"ä¼šè®®è®°å½•.docx"</span>)
                };
                
                <span class="hljs-comment">// ä½¿ç”¨WhenAny - å“ªä¸ªå…ˆå®Œæˆå°±å…ˆå¤„ç†å“ªä¸ª</span>
                <span class="hljs-keyword">while</span> (fileTasks.Count &gt; <span class="hljs-number">0</span>)
                {
                    <span class="hljs-keyword">var</span> completedTask = <span class="hljs-keyword">await</span> Task.WhenAny(fileTasks);
                    <span class="hljs-keyword">var</span> fileName = <span class="hljs-keyword">await</span> completedTask;
                    Console.WriteLine(<span class="hljs-string">$"   âœ“ å·²ä¸‹è½½: <span class="hljs-subst">{fileName}</span>"</span>);
                    fileTasks.Remove(completedTask);
                }
                
                <span class="hljs-comment">// æ¨¡å¼3ï¼šå–æ¶ˆæ“ä½œ</span>
                Console.WriteLine(<span class="hljs-string">"\n3. å¼€å§‹é•¿æ—¶é—´è®¡ç®—ï¼ˆå¯å–æ¶ˆï¼‰..."</span>);
                <span class="hljs-keyword">using</span> <span class="hljs-keyword">var</span> cts = <span class="hljs-keyword">new</span> System.Threading.CancellationTokenSource();
                
                <span class="hljs-comment">// è®¾ç½®3ç§’åè‡ªåŠ¨å–æ¶ˆ</span>
                cts.CancelAfter(<span class="hljs-number">3000</span>);
                
                <span class="hljs-keyword">try</span>
                {
                    <span class="hljs-keyword">var</span> result = <span class="hljs-keyword">await</span> LongRunningCalculationAsync(cts.Token);
                    Console.WriteLine(<span class="hljs-string">$"   âœ“ è®¡ç®—å®Œæˆ: <span class="hljs-subst">{result}</span>"</span>);
                }
                <span class="hljs-keyword">catch</span> (TaskCanceledException)
                {
                    Console.WriteLine(<span class="hljs-string">"   ğŸš« è®¡ç®—è¢«å–æ¶ˆäº†ï¼ˆè¶…è¿‡3ç§’ï¼‰"</span>);
                }
                
                <span class="hljs-comment">// æ¨¡å¼4ï¼šè¿›åº¦æŠ¥å‘Š</span>
                Console.WriteLine(<span class="hljs-string">"\n4. å¤„ç†å¤§é‡æ•°æ®ï¼ˆå¸¦è¿›åº¦æŠ¥å‘Šï¼‰..."</span>);
                <span class="hljs-keyword">var</span> progress = <span class="hljs-keyword">new</span> Progress&lt;<span class="hljs-built_in">int</span>&gt;(percent =&gt;
                {
                    Console.Write(<span class="hljs-string">$"\r   å¤„ç†è¿›åº¦: <span class="hljs-subst">{percent}</span>%  "</span>);
                });
                
                <span class="hljs-keyword">await</span> ProcessLargeDataAsync(progress);
                Console.WriteLine(<span class="hljs-string">"\n   âœ“ æ•°æ®å¤„ç†å®Œæˆ"</span>);
            }
            <span class="hljs-keyword">catch</span> (Exception ex)
            {
                Console.WriteLine(<span class="hljs-string">$"   âŒ å‡ºç°é”™è¯¯: <span class="hljs-subst">{ex.Message}</span>"</span>);
            }
        }
        
        <span class="hljs-meta">#<span class="hljs-keyword">region</span> æ—©æ™¨æ—¥å¸¸æ–¹æ³•</span>
        <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">async</span> Task <span class="hljs-title">TakeShowerAsync</span>(<span class="hljs-params">MorningPerson person</span>)</span>
        {
            Console.WriteLine(<span class="hljs-string">"  ğŸš¿ å¼€å§‹æ´—æ¾¡..."</span>);
            <span class="hljs-keyword">await</span> Task.Delay(<span class="hljs-number">3000</span>); <span class="hljs-comment">// æ´—æ¾¡éœ€è¦3åˆ†é’Ÿ</span>
            person.IsShowered = <span class="hljs-literal">true</span>;
        }
        
        <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">async</span> Task&lt;<span class="hljs-built_in">bool</span>&gt; <span class="hljs-title">MakeCoffeeAsync</span>()</span>
        {
            Console.WriteLine(<span class="hljs-string">"  â˜• å¼€å§‹ç…®å’–å•¡..."</span>);
            <span class="hljs-keyword">await</span> Task.Delay(<span class="hljs-number">5000</span>); <span class="hljs-comment">// ç…®å’–å•¡éœ€è¦5åˆ†é’Ÿ</span>
            Console.WriteLine(<span class="hljs-string">"  âœ“ å’–å•¡ç…®å¥½äº†"</span>);
            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
        }
        
        <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">async</span> Task <span class="hljs-title">GetDressedAsync</span>(<span class="hljs-params">MorningPerson person</span>)</span>
        {
            Console.WriteLine(<span class="hljs-string">"  ğŸ‘” å¼€å§‹ç©¿è¡£æœ..."</span>);
            <span class="hljs-keyword">await</span> Task.Delay(<span class="hljs-number">2000</span>); <span class="hljs-comment">// ç©¿è¡£éœ€è¦2åˆ†é’Ÿ</span>
            person.IsDressed = <span class="hljs-literal">true</span>;
        }
        
        <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">async</span> Task <span class="hljs-title">HaveBreakfastAsync</span>(<span class="hljs-params">MorningPerson person</span>)</span>
        {
            Console.WriteLine(<span class="hljs-string">"  ğŸ³ å¼€å§‹åƒæ—©é¤..."</span>);
            <span class="hljs-keyword">await</span> Task.Delay(<span class="hljs-number">2500</span>); <span class="hljs-comment">// æ—©é¤éœ€è¦2.5åˆ†é’Ÿ</span>
            person.HasEaten = <span class="hljs-literal">true</span>;
        }
        
        <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">async</span> Task&lt;<span class="hljs-built_in">bool</span>&gt; <span class="hljs-title">CheckNewsAsync</span>(<span class="hljs-params">MorningPerson person</span>)</span>
        {
            Console.WriteLine(<span class="hljs-string">"  ğŸ“± å¿«é€Ÿæµè§ˆæ–°é—»..."</span>);
            <span class="hljs-keyword">await</span> Task.Delay(<span class="hljs-number">1500</span>); <span class="hljs-comment">// çœ‹æ–°é—»éœ€è¦1.5åˆ†é’Ÿ</span>
            person.HasNews = <span class="hljs-literal">true</span>;
            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
        }
        <span class="hljs-meta">#<span class="hljs-keyword">endregion</span></span>
        
        <span class="hljs-meta">#<span class="hljs-keyword">region</span> å·¥ä½œåœºæ™¯æ–¹æ³•</span>
        <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">async</span> Task&lt;<span class="hljs-built_in">string</span>&gt; <span class="hljs-title">WaitForEmailReplyAsync</span>()</span>
        {
            <span class="hljs-comment">// æ¨¡æ‹Ÿç­‰å¾…é‚®ä»¶å›å¤</span>
            <span class="hljs-keyword">var</span> random = <span class="hljs-keyword">new</span> Random();
            <span class="hljs-keyword">var</span> waitTime = random.Next(<span class="hljs-number">1000</span>, <span class="hljs-number">10000</span>); <span class="hljs-comment">// 1-10ç§’</span>
            
            <span class="hljs-keyword">await</span> Task.Delay(waitTime);
            
            <span class="hljs-keyword">if</span> (waitTime &lt; <span class="hljs-number">5000</span>) <span class="hljs-comment">// 5ç§’å†…å›å¤</span>
                <span class="hljs-keyword">return</span> <span class="hljs-string">"å®¢æˆ·å›å¤äº†é‚®ä»¶"</span>;
            <span class="hljs-keyword">else</span>
                <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>; <span class="hljs-comment">// æ¨¡æ‹Ÿè¶…æ—¶æ— å›å¤</span>
        }
        
        <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">async</span> Task&lt;<span class="hljs-built_in">string</span>&gt; <span class="hljs-title">DownloadFileAsync</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> fileName</span>)</span>
        {
            <span class="hljs-keyword">var</span> random = <span class="hljs-keyword">new</span> Random();
            <span class="hljs-keyword">var</span> downloadTime = random.Next(<span class="hljs-number">1000</span>, <span class="hljs-number">5000</span>); <span class="hljs-comment">// 1-5ç§’</span>
            
            <span class="hljs-keyword">await</span> Task.Delay(downloadTime);
            <span class="hljs-keyword">return</span> fileName;
        }
        
        <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">async</span> Task&lt;<span class="hljs-built_in">int</span>&gt; <span class="hljs-title">LongRunningCalculationAsync</span>(<span class="hljs-params">
            System.Threading.CancellationToken cancellationToken</span>)</span>
        {
            <span class="hljs-comment">// æ¨¡æ‹Ÿé•¿æ—¶é—´è®¡ç®—</span>
            <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">100</span>; i++)
            {
                cancellationToken.ThrowIfCancellationRequested();
                <span class="hljs-keyword">await</span> Task.Delay(<span class="hljs-number">100</span>); <span class="hljs-comment">// æ¯æ­¥0.1ç§’</span>
                
                <span class="hljs-comment">// æ¨¡æ‹Ÿè®¡ç®—å·¥ä½œ</span>
                <span class="hljs-keyword">if</span> (i % <span class="hljs-number">10</span> == <span class="hljs-number">0</span>)
                    Console.Write(<span class="hljs-string">$"\r   è®¡ç®—ä¸­... <span class="hljs-subst">{i}</span>%  "</span>);
            }
            
            <span class="hljs-keyword">return</span> <span class="hljs-number">42</span>; <span class="hljs-comment">// ç­”æ¡ˆæ€»æ˜¯42</span>
        }
        
        <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">async</span> Task <span class="hljs-title">ProcessLargeDataAsync</span>(<span class="hljs-params">IProgress&lt;<span class="hljs-built_in">int</span>&gt; progress</span>)</span>
        {
            <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> i = <span class="hljs-number">0</span>; i &lt;= <span class="hljs-number">100</span>; i += <span class="hljs-number">10</span>)
            {
                <span class="hljs-keyword">await</span> Task.Delay(<span class="hljs-number">200</span>); <span class="hljs-comment">// æ¨¡æ‹Ÿå¤„ç†æ—¶é—´</span>
                progress?.Report(i);
            }
        }
        <span class="hljs-meta">#<span class="hljs-keyword">endregion</span></span>
    }
    
    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span></span>
    <span class="hljs-comment"><span class="hljs-doctag">///</span> æ‰©å±•æ–¹æ³•ï¼šä¸ºTaskæ·»åŠ è¶…æ—¶åŠŸèƒ½</span>
    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;/summary&gt;</span></span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title">TaskExtensions</span>
    {
        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">async</span> <span class="hljs-title">Task</span>&lt;<span class="hljs-title">T</span>&gt; <span class="hljs-title">WithTimeout</span>&lt;<span class="hljs-title">T</span>&gt;(<span class="hljs-params">
            <span class="hljs-keyword">this</span> Task&lt;T&gt; task, TimeSpan timeout</span>)</span>
        {
            <span class="hljs-keyword">var</span> delayTask = Task.Delay(timeout);
            <span class="hljs-keyword">var</span> completedTask = <span class="hljs-keyword">await</span> Task.WhenAny(task, delayTask);
            
            <span class="hljs-keyword">if</span> (completedTask == delayTask)
            {
                <span class="hljs-comment">// è¶…æ—¶äº†</span>
                <span class="hljs-keyword">return</span> <span class="hljs-literal">default</span>;
            }
            
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> task;
        }
    }
}
</code></pre>
<h2 data-id="heading-2">å¼‚æ­¥ç¼–ç¨‹çš„å…³é”®æ¦‚å¿µï¼ˆç”¨æ—©é¤ä¾‹å­è§£é‡Šï¼‰</h2>
<h3 data-id="heading-3">1.Â <strong>åŒæ­¥ vs å¼‚æ­¥</strong></h3>
<ul>
<li><strong>åŒæ­¥</strong>ï¼ˆä½æ•ˆæ—©é¤ï¼‰ï¼šç…®å’–å•¡â†’ç­‰å’–å•¡å¥½â†’çƒ¤é¢åŒ…â†’ç­‰é¢åŒ…å¥½â†’ç…é¸¡è›‹â†’ç­‰é¸¡è›‹å¥½</li>
<li><strong>å¼‚æ­¥</strong>ï¼ˆé«˜æ•ˆæ—©é¤ï¼‰ï¼šå¼€å§‹ç…®å’–å•¡â†’åŒæ—¶å¼€å§‹çƒ¤é¢åŒ…â†’åŒæ—¶å¼€å§‹ç…é¸¡è›‹â†’ç­‰å¾…æ‰€æœ‰å®Œæˆ</li>
</ul>
<h3 data-id="heading-4">2.Â <strong>async/await æ¨¡å¼</strong></h3>
<p>csharp</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-comment">// async æ ‡è®°å¼‚æ­¥æ–¹æ³•</span>
<span class="hljs-function">async <span class="hljs-built_in">Task</span> <span class="hljs-title">MakeCoffeeAsync</span><span class="hljs-params">()</span>
</span>{
    <span class="hljs-comment">// await ç­‰å¾…å¼‚æ­¥æ“ä½œå®Œæˆï¼Œä½†ä¸é˜»å¡çº¿ç¨‹</span>
    await <span class="hljs-built_in">Task</span>.<span class="hljs-built_in">Delay</span>(<span class="hljs-number">3000</span>); <span class="hljs-comment">// æ¨¡æ‹Ÿç…®å’–å•¡æ—¶é—´</span>
    <span class="hljs-built_in">Console</span>.<span class="hljs-built_in">WriteLine</span>(<span class="hljs-string">"å’–å•¡å¥½äº†"</span>);
}
</code></pre>
<h3 data-id="heading-5">3.Â <strong>Task.WhenAll() - åŒæ—¶ç­‰å¾…å¤šä¸ªä»»åŠ¡</strong></h3>
<p>csharp</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// å°±åƒåŒæ—¶å¯åŠ¨å’–å•¡æœºã€çƒ¤é¢åŒ…æœºå’Œç…é”…</span>
await Task<span class="hljs-selector-class">.WhenAll</span>(
    MakeCoffeeAsync(),    <span class="hljs-comment">// 3åˆ†é’Ÿ</span>
    <span class="hljs-built_in">MakeToastAsync</span>(),     <span class="hljs-comment">// 2åˆ†é’Ÿ</span>
    <span class="hljs-built_in">FryEggsAsync</span>()        <span class="hljs-comment">// 4åˆ†é’Ÿ</span>
);
<span class="hljs-comment">// æ€»å…±åªéœ€4åˆ†é’Ÿï¼Œè€Œä¸æ˜¯9åˆ†é’Ÿ</span>
</code></pre>
<h3 data-id="heading-6">4.Â <strong>Task.WhenAny() - ç­‰å¾…ç¬¬ä¸€ä¸ªå®Œæˆçš„ä»»åŠ¡</strong></h3>
<p>csharp</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// å°±åƒçœ‹å“ªä¸ªæ—©é¤éƒ¨åˆ†å…ˆå‡†å¤‡å¥½å°±å…ˆåƒå“ªä¸ª</span>
<span class="hljs-keyword">var</span> firstReady = <span class="hljs-keyword">await</span> Task.WhenAny(
    coffeeTask,
    toastTask,
    eggsTask
);
</code></pre>
<h3 data-id="heading-7">5.Â <strong>å–æ¶ˆæœºåˆ¶ (CancellationToken)</strong></h3>
<p>csharp</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// å°±åƒè®¾ç½®ç…®è›‹è®¡æ—¶å™¨ï¼Œæ—¶é—´åˆ°äº†è‡ªåŠ¨å…³ç«</span>
<span class="hljs-keyword">using</span> <span class="hljs-keyword">var</span> cts = <span class="hljs-keyword">new</span> CancellationTokenSource(TimeSpan.FromMinutes(<span class="hljs-number">5</span>));
<span class="hljs-keyword">try</span>
{
    <span class="hljs-keyword">await</span> CookEggsAsync(cts.Token);
}
<span class="hljs-keyword">catch</span> (TaskCanceledException)
{
    Console.WriteLine(<span class="hljs-string">"ç…®è›‹è¶…æ—¶äº†ï¼"</span>);
}
</code></pre>
<h2 data-id="heading-8">ç°å®ç”Ÿæ´»ä¸­çš„å¼‚æ­¥åœºæ™¯</h2>
<ol>
<li>
<p><strong>ç‚¹å¤–å–åº”ç”¨</strong>ï¼š</p>
<ul>
<li>æäº¤è®¢å•ï¼ˆå¼‚æ­¥ï¼‰</li>
<li>ç­‰å¾…é¤å…ç¡®è®¤ï¼ˆåå°ç­‰å¾…ï¼‰</li>
<li>åŒæ—¶ä½ å¯ä»¥ç»§ç»­æµè§ˆå…¶ä»–å†…å®¹ï¼ˆUIä¸å†»ç»“ï¼‰</li>
<li>æ”¶åˆ°æ¨é€é€šçŸ¥ï¼ˆå›è°ƒï¼‰</li>
</ul>
</li>
<li>
<p><strong>æ–‡ä»¶ä¸‹è½½</strong>ï¼š</p>
<ul>
<li>å¼€å§‹ä¸‹è½½å¤§æ–‡ä»¶ï¼ˆåå°ä»»åŠ¡ï¼‰</li>
<li>æ˜¾ç¤ºè¿›åº¦æ¡ï¼ˆè¿›åº¦æŠ¥å‘Šï¼‰</li>
<li>å…è®¸å–æ¶ˆä¸‹è½½ï¼ˆå–æ¶ˆä»¤ç‰Œï¼‰</li>
<li>ä¸‹è½½å®Œæˆåé€šçŸ¥ï¼ˆä»»åŠ¡å®Œæˆï¼‰</li>
</ul>
</li>
<li>
<p><strong>èŠå¤©åº”ç”¨</strong>ï¼š</p>
<ul>
<li>å‘é€æ¶ˆæ¯ï¼ˆç«‹å³è¿”å›ï¼‰</li>
<li>ç­‰å¾…å¯¹æ–¹å›å¤ï¼ˆå¼‚æ­¥ç­‰å¾…ï¼‰</li>
<li>åŒæ—¶å¯ä»¥å‘é€å…¶ä»–æ¶ˆæ¯ï¼ˆå¹¶å‘ï¼‰</li>
<li>æ”¶åˆ°å›å¤æ—¶æé†’ï¼ˆäº‹ä»¶é©±åŠ¨ï¼‰</li>
</ul>
</li>
</ol>
<h2 data-id="heading-9">æ ¸å¿ƒè¦ç‚¹æ€»ç»“</h2>
<ol>
<li><strong>ä¸æµªè´¹ç­‰å¾…æ—¶é—´</strong>ï¼šå°±åƒåœ¨ç­‰å’–å•¡ç…®å¥½çš„æ—¶å€™å»çƒ¤é¢åŒ…</li>
<li><strong>å“åº”æ€§</strong>ï¼šUIä¸ä¼šå†»ç»“ï¼Œç”¨æˆ·å¯ä»¥ç»§ç»­æ“ä½œ</li>
<li><strong>èµ„æºé«˜æ•ˆ</strong>ï¼šä¸€ä¸ªçº¿ç¨‹å¯ä»¥å¤„ç†å¤šä¸ªä»»åŠ¡</li>
<li><strong>å¯æ‰©å±•æ€§</strong>ï¼šå¯ä»¥è½»æ¾å¤„ç†å¤§é‡å¹¶å‘æ“ä½œ</li>
</ol>
<p><strong>è®°ä½è¿™ä¸ªæ¯”å–»</strong>ï¼šå¼‚æ­¥ç¼–ç¨‹å°±åƒæ˜¯ä¸€ä¸ªé«˜æ•ˆçš„å¨å¸ˆï¼ŒåŒæ—¶ç…§çœ‹å¤šä¸ªç‚‰ç¶ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªç‚‰ç¶ä¸€ä¸ªç‚‰ç¶åœ°é¡ºåºæ“ä½œã€‚è¿™æ ·æ—©é¤ï¼ˆç¨‹åºï¼‰å°±èƒ½æ›´å¿«å‡†å¤‡å¥½ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Cookieä¸localStorageã€sessionStorageæ€»ç»“]]></title>    <link>https://juejin.cn/post/7589386961648877603</link>    <guid>https://juejin.cn/post/7589386961648877603</guid>    <pubDate>2025-12-30T08:11:05.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589386961648877603" data-draft-id="7589466356778336308" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Cookieä¸localStorageã€sessionStorageæ€»ç»“"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,HTTPS"/> <meta itemprop="datePublished" content="2025-12-30T08:11:05.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Crystal328"/> <meta itemprop="url" content="https://juejin.cn/user/2359973194513272"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Cookieä¸localStorageã€sessionStorageæ€»ç»“
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2359973194513272/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Crystal328
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-30T08:11:05.000Z" title="Tue Dec 30 2025 08:11:05 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">1. Cookie</h2>
<ul>
<li>Cookie æ˜¯<strong>æµè§ˆå™¨å­˜å‚¨æ•°æ®</strong>çš„ä¸€ç§æ–¹å¼</li>
<li><strong>å­˜å‚¨åœ¨ç”¨æˆ·æœ¬åœ°</strong>ï¼Œè€Œä¸æ˜¯å­˜å‚¨åœ¨æœåŠ¡å™¨ä¸Š</li>
<li>å¯ä»¥<strong>éšç€æµè§ˆå™¨æ¯æ¬¡è¯·æ±‚å‘é€åˆ°æœåŠ¡å™¨ç«¯</strong></li>
</ul>
<h3 data-id="heading-1">1.1 Cookie çš„ç”¨æ³•</h3>
<ul>
<li>åªèƒ½ä¸€ä¸ªä¸€ä¸ªçš„å†™å…¥ï¼Œä¸èƒ½å°†å¤šä¸ª Cookie å†™åœ¨ä¸€èµ·</li>
<li>å†™å…¥ Cookie æ—¶æ˜¯å¯ä»¥åŠ å…¥å¤šä¸ªå±æ€§çš„ï¼Œå±æ€§ä¸å±æ€§ä¹‹é—´æ˜¯éœ€è¦Â <code>;</code>Â ï¼ˆåˆ†å·+ç©ºæ ¼ï¼‰æ¥åˆ†å¼€</li>
</ul>
<blockquote>
<p>åŸç”Ÿçš„ Cookie æ˜¯ä¸èƒ½é€šè¿‡ç‰¹å®šçš„åç§°æ¥è¯»å–ç‰¹å®šçš„å€¼ï¼Œåªèƒ½ä¸€æ¬¡æ€§å…¨éƒ¨è¯»å–å‡ºæ¥ã€‚</p>
</blockquote>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªCookieç±»ï¼Œæ·»åŠ ä¸‰ä¸ªé™æ€æ–¹æ³•ï¼Œå°†Cookieç±»ä½œä¸ºæ¥å£å¯¼å‡º</span>
<span class="hljs-comment">// setæ–¹æ³• è®¾ç½®Cookie</span>
<span class="hljs-comment">// getæ–¹æ³•ï¼Œé€šè¿‡Cookieçš„nameè·å–valueå€¼</span>
<span class="hljs-comment">// removeæ–¹æ³•ï¼Œé€šè¿‡cookieçš„nameåˆ é™¤å¯¹åº”çš„Cookie</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> {
  <span class="hljs-comment">// è®¾ç½®Cookie</span>
  <span class="hljs-comment">//è®¾ç½®Cookie name,value,max-age,domain path,secure</span>
  <span class="hljs-keyword">static</span> <span class="hljs-title function_">set</span>(<span class="hljs-params">name, value, { maxAge, domain, path, secure } = {}</span>) {
    <span class="hljs-keyword">let</span> cookieText = <span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-built_in">encodeURIComponent</span>(name)}</span> = <span class="hljs-subst">${<span class="hljs-built_in">decodeURIComponent</span>(value)}</span>`</span>;
    <span class="hljs-comment">//è®¾ç½®å¤±æ•ˆæ—¶é—´</span>
    <span class="hljs-keyword">if</span> (maxAge) {
      cookieText += <span class="hljs-string">`; max-age=<span class="hljs-subst">${maxAge}</span>`</span>
    }
    <span class="hljs-comment">//   è®¾ç½®åŸŸ</span>
    <span class="hljs-keyword">if</span> (domain) {
      cookieText += <span class="hljs-string">`; domain=<span class="hljs-subst">${domain}</span>`</span>
    }
    <span class="hljs-comment">// è®¾ç½®è·¯å¾„</span>
    <span class="hljs-keyword">if</span> (path) {
      cookieText += <span class="hljs-string">`; path=<span class="hljs-subst">${path}</span>`</span>
    }
    <span class="hljs-comment">// å®‰å…¨æ ‡å¿—</span>
    <span class="hljs-keyword">if</span> (secure) {
      cookieText += <span class="hljs-string">`; secure=<span class="hljs-subst">${secure}</span>`</span>
    }
    <span class="hljs-variable language_">document</span>.<span class="hljs-property">cookie</span> = cookieText
  }
  <span class="hljs-comment">// è·å–Cookie</span>
  <span class="hljs-keyword">static</span> <span class="hljs-title function_">get</span>(<span class="hljs-params">name</span>) {
    <span class="hljs-comment">// å¾—åˆ°è¿™ä¸ªnameï¼Œä¹Ÿéœ€è¦ç¼–ç </span>
    name = <span class="hljs-built_in">encodeURIComponent</span>(name)
    <span class="hljs-comment">// è¯»å–cookie</span>
    <span class="hljs-keyword">let</span> cookies = <span class="hljs-variable language_">document</span>.<span class="hljs-property">cookie</span>.<span class="hljs-title function_">split</span>(<span class="hljs-string">'; '</span>)
    <span class="hljs-comment">// éå†æ•°ç»„çš„æ¯ä¸€é¡¹</span>
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> item <span class="hljs-keyword">of</span> cookies) {
      <span class="hljs-keyword">const</span> [cookieName, cookieValue] = item.<span class="hljs-title function_">split</span>(<span class="hljs-string">'='</span>)
      <span class="hljs-keyword">if</span> (cookieName === name) {
        <span class="hljs-keyword">return</span> cookieValue
      }
    }

  }
  <span class="hljs-comment">// åˆ é™¤Cookie</span>
  <span class="hljs-comment">// è®¾ç½®è¿‡æœŸæ—¶é—´å³å¯</span>
  <span class="hljs-keyword">static</span> <span class="hljs-title function_">remove</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">set</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span>, { domain, path, <span class="hljs-attr">maxAge</span>: -<span class="hljs-number">1</span> })
  }
}
</code></pre>
<h3 data-id="heading-2">1.2 Cookie çš„å±æ€§</h3>























































<table><thead><tr><th>å±æ€§åˆ†ç±»</th><th>å±æ€§åç§°</th><th>è¯¦ç»†è¯´æ˜</th></tr></thead><tbody><tr><td>å¿…é€‰æ ¸å¿ƒå±æ€§</td><td>åç§°ï¼ˆnameï¼‰</td><td>1. åˆ›å»º Cookie æ—¶å¿…é¡»å¡«å†™ï¼›2. ä¸ Domainã€Path å…±åŒåˆ¤å®šæ˜¯å¦ä¸ºåŒä¸€ä¸ª Cookieï¼ˆä¸‰è€…å‡ç›¸åŒåˆ™ä¸ºåŒä¸€ Cookieï¼‰</td></tr><tr><td>å¿…é€‰æ ¸å¿ƒå±æ€§</td><td>å€¼ï¼ˆvalueï¼‰</td><td>1. åˆ›å»º Cookie æ—¶å¿…é¡»å¡«å†™ï¼Œç”¨äºå­˜å‚¨æ ¸å¿ƒæ•°æ®ï¼›2. è‹¥åŒ…å«éè‹±æ–‡å­—æ¯ï¼Œå†™å…¥æ—¶éœ€ç”¨Â <code>encodeURIComponent()</code>Â ç¼–ç ï¼›3. è‹¥å†™å…¥æ—¶å·²ç¼–ç ï¼Œè¯»å–æ—¶éœ€ç”¨Â <code>decodeURIComponent()</code>Â è§£ç </td></tr><tr><td>å¤±æ•ˆï¼ˆåˆ°æœŸï¼‰å±æ€§</td><td>Expires</td><td>1. ç”¨äºè®¾ç½® Cookie å…·ä½“è¿‡æœŸæ—¶é—´ï¼Œå€¼ä¸ºÂ <code>Date</code>Â ç±»å‹ï¼›2. ä¸è®¾ç½®æ—¶ï¼Œé»˜è®¤ä¼šè¯ç»“æŸå Cookie è¢«æµè§ˆå™¨æ¸…é™¤ï¼›3. å¤±æ•ˆåçš„ Cookie ä¼šè¢«æµè§ˆå™¨è‡ªåŠ¨æ¸…ç†</td></tr><tr><td>å¤±æ•ˆï¼ˆåˆ°æœŸï¼‰å±æ€§</td><td>Max-Age</td><td>1. ç”¨äºè®¾ç½® Cookie è¿‡æœŸæ—¶é•¿ï¼Œå€¼ä¸ºæ•°å­—ï¼ˆå•ä½ï¼šç§’ï¼Œå½“å‰æ—¶é—´ç´¯åŠ è¯¥ç§’æ•°åè¿‡æœŸï¼‰ï¼›2. å€¼ä¸º 0 æˆ–è´Ÿæ•°æ—¶ï¼ŒCookie ä¼šè¢«ç«‹å³åˆ é™¤ï¼›3. ä¼˜å…ˆçº§é€šå¸¸é«˜äº Expires</td></tr><tr><td>è®¿é—®èŒƒå›´é™å®š</td><td>Domainï¼ˆåŸŸï¼‰</td><td>1. é™å®šä¸åŒåŸŸä¸‹çš„ Cookie è®¿é—®èŒƒå›´ï¼›2. JS ä»…èƒ½å†™å…¥ / è¯»å–å½“å‰åŸŸæˆ–çˆ¶åŸŸçš„ Cookieï¼Œæ— æ³•æ“ä½œå…¶ä»–æ— å…³åŸŸçš„ Cookie</td></tr><tr><td>è®¿é—®èŒƒå›´é™å®š</td><td>Pathï¼ˆè·¯å¾„ï¼‰</td><td>1. é™å®šåŒåŸŸä¸åŒè·¯å¾„ä¸‹çš„ Cookie è®¿é—®èŒƒå›´ï¼›2. JS ä»…èƒ½å†™å…¥ / è¯»å–å½“å‰è·¯å¾„æˆ–ä¸Šçº§è·¯å¾„çš„ Cookieï¼Œæ— æ³•æ“ä½œå…¶ä»–æ— å…³è·¯å¾„çš„ Cookie</td></tr><tr><td>å®‰å…¨ç›¸å…³å±æ€§</td><td>HttpOnly</td><td>1. ä»…æ”¯æŒåç«¯è®¾ç½®ï¼Œå‰ç«¯æ— æ³•é€šè¿‡ JSï¼ˆ<code>document.cookie</code>ï¼‰è·å–æˆ–ä¿®æ”¹ï¼›2. æ ¸å¿ƒä½œç”¨ï¼šé˜²æ­¢ XSS æ”»å‡»çªƒå– Cookie æ•°æ®</td></tr><tr><td>å®‰å…¨ç›¸å…³å±æ€§</td><td>Secure</td><td>1. é™å®šä»…åœ¨Â <code>HTTPS</code>Â åè®®ä¸‹ï¼ŒCookie æ‰ä¼šéšè¯·æ±‚å‘é€è‡³æœåŠ¡ç«¯ï¼›2.Â <code>HTTP</code>Â åè®®ä¸‹æ— æ³•ä¼ é€’å¸¦æœ‰è¯¥å±æ€§çš„ Cookie</td></tr><tr><td>ç”Ÿæ•ˆæ¡ä»¶è¡¥å……</td><td>-</td><td>Cookie éœ€åŒæ—¶æ»¡è¶³ä»¥ä¸‹æ¡ä»¶æ‰ä¼šéšè¯·æ±‚å‘é€åˆ°æœåŠ¡ç«¯ï¼š1. Domain åŒ¹é…ï¼›2. Path åŒ¹é…ï¼›3. Secure æ¡ä»¶åŒ¹é…ï¼ˆHTTPS ç¯å¢ƒï¼‰ï¼›4. Cookie æœªè¿‡æœŸ</td></tr></tbody></table>
<h3 data-id="heading-3">1.4 æ³¨æ„äº‹é¡¹</h3>
<ul>
<li>å‰åç«¯éƒ½å¯ä»¥å†™å…¥å’Œè¯»å– Cookie</li>
<li>æ¯ä¸ªåŸŸåä¸‹çš„ Cookie æ•°é‡æœ‰é™</li>
<li>æ¯ä¸ª Cookie çš„å­˜å‚¨å®¹é‡å¾ˆå°ï¼Œæœ€å¤šåªæœ‰ 4KB å·¦å³ï¼Œæ¯ä¸ªæµè§ˆå™¨ä¸ä¸€æ ·</li>
</ul>
<h2 data-id="heading-4">2. localStorage</h2>
<ul>
<li>localStorage æ˜¯<strong>æµè§ˆå™¨å­˜å‚¨æ•°æ®</strong>çš„ä¸€ç§æ–¹å¼</li>
<li><strong>å­˜å‚¨åœ¨ç”¨æˆ·æœ¬åœ°ï¼Œä¸ä¼šå‘é€åˆ°æœåŠ¡å™¨ç«¯</strong></li>
<li>å•ä¸ªåŸŸåä¸‹çš„æ€»å¤§å°æœ‰é™åˆ¶ï¼ˆä¸€èˆ¬æœ€å¤§ 5MB å·¦å³ï¼‰æ¯ä¸ªæµè§ˆå™¨ä¸ä¸€æ ·</li>
</ul>
<h3 data-id="heading-5">2.1 localStorage çš„åŸºæœ¬ç”¨æ³•</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// è®¾ç½®ï¼ˆæ·»åŠ ï¼‰localStorage æ•°æ®é¡¹</span>
<span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">setItem</span>(<span class="hljs-string">"username"</span>, <span class="hljs-string">"icoding"</span>);
<span class="hljs-comment">// è·å– localStorage æ•°æ®é¡¹</span>
<span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(<span class="hljs-string">"username"</span>);
<span class="hljs-comment">// ç§»é™¤ localStorage æ•°æ®é¡¹</span>
<span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">removeItem</span>(<span class="hljs-string">"username"</span>);
<span class="hljs-comment">// ç§»é™¤æ‰€æœ‰çš„ localStorage æ•°æ®é¡¹</span>
<span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">clear</span>();
<span class="hljs-comment">// length localStorage ä¸­æœ‰å­˜å‚¨å¤šå°‘æ•°æ®</span>
<span class="hljs-variable language_">localStorage</span>.<span class="hljs-property">length</span>;
</code></pre>
<h3 data-id="heading-6">2.2 æ³¨æ„äº‹é¡¹</h3>
<ul>
<li>localStorage å­˜å‚¨çš„æ•°æ®ï¼Œé™¤éæ‰‹åŠ¨æ¸…é™¤ï¼ˆå¦‚ é€šè¿‡ JS åˆ é™¤ æˆ– æ¸…é™¤æµè§ˆå™¨ç¼“å­˜ï¼‰å¦åˆ™ï¼Œæ•°æ®æ°¸è¿œä¸ä¼šè¿‡æœŸçš„ã€‚å®ƒæ˜¯<strong>æŒä¹…åŒ–çš„æœ¬åœ°å­˜å‚¨</strong>ã€‚</li>
<li>sessionStorage å­˜å‚¨çš„æ•°æ®ï¼Œæ˜¯å½“å‰ä¼šè¯ç»“æŸï¼ˆå¦‚ å…³é—­æµè§ˆå™¨ï¼‰çš„æ—¶å€™ï¼ŒsessionStorage ä¸­çš„æ•°æ®ä¼šè¢«æ¸…ç©º</li>
<li><strong>sessionStorage çš„ä½¿ç”¨æ–¹æ³• ä¸ localStorage ä¸€æ¨¡ä¸€æ ·</strong></li>
<li>localStorage å­˜å‚¨çš„é”®å’Œå€¼<strong>åªèƒ½æ˜¯å­—ç¬¦ä¸²ç±»å‹</strong></li>
<li><strong>ä¸åŒçš„åŸŸåä¸èƒ½å…±ç”¨ localStorage</strong></li>
</ul>
<h3 data-id="heading-7">2.3 å°è£…</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// å¯¼å‡ºå°è£…åçš„ localStorage æ“ä½œå¯¹è±¡</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-comment">// setæ–¹æ³•ï¼šæ ¹æ®keyã€valueæ·»åŠ /ä¿®æ”¹æ•°æ®ï¼ˆè‡ªåŠ¨åºåˆ—åŒ–å¯¹è±¡ç±»å‹ï¼‰</span>
  <span class="hljs-title function_">set</span>(<span class="hljs-params">key, value</span>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> value === <span class="hljs-string">'object'</span> &amp;&amp; value !== <span class="hljs-literal">null</span>) { 
      value = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(value);
    }
    <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">setItem</span>(key, value);
  },

  <span class="hljs-comment">// getæ–¹æ³•ï¼šæ ¹æ®keyè·å–å€¼ï¼ˆè‡ªåŠ¨å°è¯•ååºåˆ—åŒ–ï¼Œå¤±è´¥åˆ™è¿”å›åŸå§‹å€¼ï¼‰</span>
  <span class="hljs-title function_">get</span>(<span class="hljs-params">key</span>) {
    <span class="hljs-keyword">const</span> value = <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(key);
    <span class="hljs-keyword">if</span> (value === <span class="hljs-literal">null</span>) { <span class="hljs-comment">// å…ˆåˆ¤æ–­keyä¸å­˜åœ¨çš„æƒ…å†µï¼Œç›´æ¥è¿”å›null</span>
      <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    }
    <span class="hljs-keyword">try</span> {
      <span class="hljs-comment">// è§£ææˆåŠŸåï¼Œè¿”å›è§£æåçš„ç»“æœ</span>
      <span class="hljs-keyword">return</span> <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(value);
    } <span class="hljs-keyword">catch</span> (err) {
      <span class="hljs-comment">// è§£æå¤±è´¥ï¼ˆåŸå§‹å€¼ä¸ºæ™®é€šå­—ç¬¦ä¸²ï¼‰ï¼Œè¿”å›åŸå§‹value</span>
      <span class="hljs-keyword">return</span> value;
    }
  },

  <span class="hljs-comment">// removeæ–¹æ³•ï¼šæ ¹æ®keyç§»é™¤æŒ‡å®šé¡¹</span>
  <span class="hljs-title function_">remove</span>(<span class="hljs-params">key</span>) {
    <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">removeItem</span>(key);
  },

  <span class="hljs-comment">// clearæ–¹æ³•ï¼šæ¸…ç©ºå½“å‰åŸŸåä¸‹æ‰€æœ‰localStorageæ•°æ®</span>
  <span class="hljs-title function_">clear</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">clear</span>();
  }
};
</code></pre>
<h2 data-id="heading-8">Cookieã€localStorageã€sessionStorage çš„å¯¹æ¯”ï¼ˆé¢è¯•é¢˜ï¼‰</h2>









































<table><thead><tr><th>å¯¹æ¯”é¡¹</th><th>Cookie</th><th>LocalStorage</th><th>sessionStorage</th></tr></thead><tbody><tr><td>å­˜å‚¨å¤§å°</td><td>4K</td><td>5M</td><td>5M</td></tr><tr><td>æœ‰æ•ˆæœŸ</td><td>æ‰‹åŠ¨è®¾ç½®</td><td>æ— </td><td>æµè§ˆå™¨çª—å£å…³é—­</td></tr><tr><td>å­˜å‚¨ä½ç½®</td><td>æµè§ˆå™¨</td><td>æµè§ˆå™¨</td><td>æµè§ˆå™¨</td></tr><tr><td>ä¸è¯·æ±‚ä¸€èµ·å‘é€</td><td>æ˜¯</td><td>å¦</td><td>å¦</td></tr><tr><td>è®¿é—®é™æ­¢</td><td>å­åŸŸå¯ä»¥è®¿é—®è‡ªå·±å’Œçˆ¶åŸŸä¸­çš„ Cookie</td><td>åŒåŸŸä¸‹éƒ½å¯ä»¥è®¿é—®</td><td>åªé™å½“å‰çª—å£</td></tr></tbody></table></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[çœŸå®æ¡ˆä¾‹å¤ç›˜ï¼šä»â€œä¸‰å¥—çƒŸå›±â€åˆ°Â AllÂ inÂ ESï¼Œè¿™å®¶ä¼ä¸šå¦‚ä½•ç æ‰Â 40%è¿ç»´æˆæœ¬ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7589445154534506548</link>    <guid>https://juejin.cn/post/7589445154534506548</guid>    <pubDate>2025-12-30T09:58:53.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589445154534506548" data-draft-id="7589477775209611316" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="çœŸå®æ¡ˆä¾‹å¤ç›˜ï¼šä»â€œä¸‰å¥—çƒŸå›±â€åˆ°Â AllÂ inÂ ESï¼Œè¿™å®¶ä¼ä¸šå¦‚ä½•ç æ‰Â 40%è¿ç»´æˆæœ¬ï¼Ÿ"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½,Elasticsearch,æœç´¢å¼•æ“"/> <meta itemprop="datePublished" content="2025-12-30T09:58:53.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é˜¿é‡Œäº‘å¤§æ•°æ®AIæŠ€æœ¯"/> <meta itemprop="url" content="https://juejin.cn/user/2414974667341287"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            çœŸå®æ¡ˆä¾‹å¤ç›˜ï¼šä»â€œä¸‰å¥—çƒŸå›±â€åˆ°Â AllÂ inÂ ESï¼Œè¿™å®¶ä¼ä¸šå¦‚ä½•ç æ‰Â 40%è¿ç»´æˆæœ¬ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2414974667341287/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é˜¿é‡Œäº‘å¤§æ•°æ®AIæŠ€æœ¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-30T09:58:53.000Z" title="Tue Dec 30 2025 09:58:53 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    2
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h4 data-id="heading-0">æ–‡Â /Â é˜¿é‡Œäº‘AIæœç´¢äº§ç ”å›¢é˜Ÿ</h4>
<p>åœ¨åšæœç´¢æŠ€æœ¯æ¶æ„å’¨è¯¢æ—¶ï¼Œæˆ‘ä»¬ç»å¸¸å¬åˆ°ä¸€å¥è¯ï¼šâ€œæˆ‘ä¹ŸçŸ¥é“ä¸šåŠ¡ç³»ç»Ÿå¤æ‚ï¼Œä½†ä¸çŸ¥é“æ€ä¹ˆç®€åŒ–æ¶æ„éƒ¨ç½²?â€</p>
<p>ä»Šå¤©ï¼Œæˆ‘ä»¬æƒ³èŠèŠÂ â€œæŸçŸ¥åäº’è”ç½‘æ³›å¨±ä¹è§†è§‰å¹³å°Â Aâ€ï¼ˆä»¥ä¸‹ç®€ç§°Â AÂ å…¬å¸ï¼‰çš„æœç´¢æ¶æ„æ¼”è¿›æ•…äº‹ã€‚ä»–ä»¬çš„äº‘ä¸Šè¿ç§»ç»å†ï¼Œæ˜¯æ— æ•°æ­£åœ¨ä¸ºâ€œæŠ€æœ¯æ ˆç¢ç‰‡åŒ–â€ä¸"AIæœç´¢æ¶æ„æ”¹é€ "å¤´ç–¼çš„ä¼ä¸šçš„çœŸå®å†™ç…§ã€‚</p>
<h2 data-id="heading-1">ç¬¬ä¸€é˜¶æ®µï¼šä¸ºäº†ä¸šåŠ¡çš„â€œå¿«â€ï¼Œä»–ä»¬å»ºäº†ä¸‰æ ¹çƒŸå›±</h2>
<p>ä¸€å¹´å‰ï¼ŒAÂ å…¬å¸çš„æŠ€æœ¯æ¶æ„è´Ÿè´£äººè€æé¢ä¸´ç€æå¤§çš„å‹åŠ›ã€‚éšç€åŸå…ˆçš„æ£€ç´¢ä¸šåŠ¡å¼•å…¥å…¨é‡æ—¥å¿—å®¡è®¡çš„è¿ç»´ç®¡ç†ï¼Œå†åˆ°æ¥å…¥å¤§æ¨¡å‹Â RAGï¼ˆæ£€ç´¢å¢å¼ºç”Ÿæˆï¼‰ï¼Œä»–ä»¬çš„æ¶æ„å˜æˆäº†å…¸å‹çš„â€œæ‹¼å‡‘å‹â€ï¼š</p>
<p><strong>é€šç”¨æœç´¢ä¸šåŠ¡</strong>ï¼šç´ æä¸­å°ã€è§†é¢‘/è¡¨æƒ…åŒ…å…³é”®è¯æ£€ç´¢ï¼Œæ¶‰åŠå¤§è§„æ¨¡ç”¨æˆ·ã€è¯é¢˜åŠæ´»åŠ¨ä¿¡æ¯ã€‚è·‘åœ¨å¼€æºESé›†ç¾¤ä¸Šã€‚</p>
<p><strong>æ—¥å¿—æ£€ç´¢ä¸šåŠ¡</strong>ï¼šä¸ºäº†åˆè§„å­˜å‚¨æµ·é‡Â AccessÂ Logï¼Œé‡‡è´­äº†ç‹¬ç«‹çš„æ—¥å¿—æœåŠ¡ã€‚Appè¡Œä¸ºæ—¥å¿—ã€æœåŠ¡ç«¯ç³»ç»Ÿæ—¥å¿—ï¼Œç”¨äºæ€§èƒ½ç›‘æ§ä¸è¿è¥å†³ç­–ã€‚ä¸ºäº†çœé’±åˆæŠŠéƒ¨åˆ†è€æ—¥å¿—å¯¼åˆ°äº†Â å¯¹è±¡å­˜å‚¨é‡Œï¼ŒæŸ¥è¯¢æå…¶ä¸ä¾¿ã€‚</p>
<p><strong>å‘é‡æ£€ç´¢ä¸šåŠ¡</strong>ï¼šåŸºäºè§†è§‰ç‰¹å¾çš„ç›¸ä¼¼å›¾ç‰‡æ£€ç´¢ã€åŸºäºç”¨æˆ·ç”»åƒçš„æ™ºèƒ½æ¨èï¼ˆå¦‚ç›¸ä¼¼æ»¤é•œã€æ¨¡æ¿æ¨èï¼‰ã€‚ä¸ºäº†åšÂ RAGÂ å’ŒçŒœä½ å–œæ¬¢ï¼Œåˆä¸å¾—ä¸å•ç‹¬æ­å»ºäº†ä¸€å¥—Â å¼€æºMilvusã€‚</p>
<h4 data-id="heading-2">è€æçš„ç—›ç‚¹éå¸¸å…·ä½“ï¼š</h4>
<p><strong>â€œåŠå¤œçƒ§é’±â€</strong>ï¼šAÂ å…¬å¸çš„æµé‡æœ‰æ˜æ˜¾çš„æ½®æ±æ•ˆåº”ã€‚æ¯å¤©æ™šä¸ŠÂ 8Â ç‚¹åˆ°Â 12Â ç‚¹æ˜¯æ—¥å¿—å†™å…¥æ´ªå³°ï¼Œä½†å‡Œæ™¨Â 2Â ç‚¹åˆ°æ—©ä¸ŠÂ 8Â ç‚¹æµé‡æä½ã€‚ä¸ºäº†æŠ—ä½é‚£Â 4Â å°æ—¶çš„å³°å€¼ï¼Œä»–ä»¬å¿…é¡»æŒ‰æœ€é«˜æ°´ä½è´­ä¹°æ—¥å¿—èµ„æºã€‚ç»“æœå°±æ˜¯ï¼šæ¯å¤©æœ‰Â 16Â ä¸ªå°æ—¶ï¼Œæ˜‚è´µçš„è®¡ç®—èµ„æºåœ¨ç©ºè½¬ã€‚çªå‘æµé‡å¯¼è‡´çš„æ‰©å®¹å‹åŠ›ä¸å­˜å‚¨æˆæœ¬ä¸æˆæ­£æ¯”ã€‚</p>
<p><strong>â€œèƒ¶æ°´ä»£ç â€</strong>ï¼šåœ¨åšÂ RAGÂ æ—¶ï¼Œå¼€å‘åŒå­¦éœ€è¦åœ¨ä»£ç é‡Œå…ˆæŸ¥Â MilvusÂ æ‹¿Â IDï¼Œå†å›æŸ¥Â ESÂ æ‹¿æ–‡æœ¬ã€‚ä¸ä»…ä»£ç éš¾ç»´æŠ¤ï¼Œä¸€æ—¦å‡ºç°æ•°æ®ä¸ä¸€è‡´ï¼ˆæ¯”å¦‚æ–‡ç« åˆ äº†ï¼Œå‘é‡è¿˜åœ¨ï¼‰ï¼Œç”¨æˆ·å°±ä¼šç‚¹è¿›Â 404Â é¡µé¢ï¼ŒæŠ•è¯‰ç‡é£™å‡ã€‚</p>
<p><strong>â€œä¸‰æ ¹çƒŸå›±â€</strong>ï¼Œå¤šç§æœç´¢èƒ½åŠ›éš”ç¦»åˆ†å¼€ï¼Œå¼€å‘ä¸è¿ç»´æˆæœ¬æé«˜ï¼Œéš¾ä»¥æ”¯æŒå¤æ‚çš„è·¨æ¨¡æ€æ£€ç´¢ã€‚</p>
<p><strong>â€œèœ—è¡Œç‰›æ­¥â€</strong>ï¼šå…¨é‡åŒæ­¥è€—æ—¶é•¿ï¼Œå¤§æ•°æ®é‡ä¸‹çš„å®æ—¶æ›´æ–°ä¸ç´¢å¼•é‡å»ºæ•ˆç‡ä½ä¸‹ã€‚</p>
<h2 data-id="heading-3">ç¬¬äºŒé˜¶æ®µï¼šåšå‡æ³•ï¼Œæ‹¥æŠ±Â AllÂ inÂ ES</h2>
<p>åœ¨ä¸é˜¿é‡Œäº‘AIæœç´¢ä¸“å®¶å›¢é˜Ÿæ·±èŠåï¼ŒAÂ å…¬å¸å†³å®šè¿›è¡Œä¸€æ¬¡å½»åº•æŠ€æœ¯â€œæ–­èˆç¦»â€ï¼Œå°†AIæœç´¢æ‰€éœ€çš„å¤šç§æŠ€æœ¯æ ˆç»Ÿä¸€æ”¶æ•›åˆ°é˜¿é‡Œäº‘Â ElasticsearchÂ ä¸Šã€‚</p>
<ol>
<li>
<p><strong>æ—¥å¿—åœºæ™¯ï¼šæŠŠâ€œå›ºå®šèµ„äº§â€å˜æˆâ€œç”µè´¹å•â€</strong> AÂ å…¬å¸é¦–å…ˆæ”¹é€ çš„æ˜¯æœ€çƒ§é’±çš„æ—¥å¿—ç³»ç»Ÿã€‚ä»–ä»¬æ²¡æœ‰ç»§ç»­è´­ä¹°åºå¤§çš„è‡ªå»ºESèŠ‚ç‚¹ï¼Œè€Œæ˜¯æ¥å…¥äº†é˜¿é‡Œäº‘Â ESÂ çš„Â é«˜æ€§èƒ½å†™å…¥æ‰˜ç®¡æœåŠ¡IndexingÂ ServiceÂ å’ŒÂ æ··åˆå­˜å‚¨æœåŠ¡OpenStoreã€‚</p>
<p>å˜åŒ–å‰ï¼šä¸ºäº†æŠ—å³°å€¼ï¼Œå¸¸é©»Â 20Â å°Â 8C32GÂ çš„æœºå™¨ã€‚å‡Œæ™¨æµé‡è·Œåˆ°è°·åº•æ—¶ï¼Œè¿™Â 20Â å°æœºå™¨ä¾ç„¶åœ¨è®¡è´¹ã€‚</p>
<p>å˜åŒ–åï¼šå½»åº•Â ServerlessÂ åŒ–ã€‚æ™šé«˜å³°æµé‡æ¥äº†ï¼Œäº‘ç«¯è‡ªåŠ¨æ‰©å®¹æ‰›å‹ï¼›å‡Œæ™¨æµé‡æ²¡äº†ï¼Œè®¡è´¹å‡ ä¹å½’é›¶ã€‚å­˜å‚¨æ–¹é¢ï¼Œæ•°æ®è‡ªåŠ¨æ²‰é™åˆ°Â OpenStoreï¼ˆå¯¹è±¡å­˜å‚¨ä»‹è´¨ï¼‰ï¼Œæˆæœ¬ç›´æ¥å¯¹å…¶å½’æ¡£å­˜å‚¨ã€‚</p>
<p>è€æçš„åé¦ˆï¼šâ€œä»¥å‰æ˜¯å…»è½¦ï¼Œä¸ç®¡å¼€ä¸å¼€éƒ½å¾—ä»˜æŠ˜æ—§å’Œä¿é™©ï¼›ç°åœ¨æ˜¯æ‰“è½¦ï¼Œè·‘å¤šå°‘ä»˜å¤šå°‘ã€‚å•è¿™ä¸€é¡¹ï¼Œæ—¥å¿—è´¦å•é™äº†Â 60%ã€‚â€</p>
</li>
<li>
<p><strong>å‘é‡åœºæ™¯ï¼šåˆ æ‰èƒ¶æ°´ä»£ç ï¼Œå›å½’åŸç”Ÿ</strong> è§£å†³äº†æ—¥å¿—ï¼ŒAÂ å…¬å¸å¼€å§‹åŠ¨åˆ€å‘é‡æœç´¢ã€‚ä»–ä»¬åˆ©ç”¨é˜¿é‡Œäº‘Â ESÂ å†…æ ¸çº§å¼ºåŒ–çš„æ··åˆå‘é‡å¼•æ“ï¼Œæ›¿ä»£äº†ç‹¬ç«‹çš„å‘é‡åº“ã€‚</p>
</li>
</ol>
<p>å˜åŒ–å‰ï¼šåº”ç”¨Â -&gt;Â æŸ¥å‘é‡åº“Â -&gt;Â æ‹¿Â IDÂ -&gt;Â æŸ¥Â ESÂ -&gt;Â åº”ç”¨å±‚æ’åºã€‚å»¶è¿ŸÂ 200ms+ã€‚</p>
<p>å˜åŒ–åï¼šåº”ç”¨Â -&gt;Â é˜¿é‡Œäº‘Â ESÂ (æ··åˆæ£€ç´¢Â API)Â -&gt;Â è¿”å›ç»“æœã€‚</p>
<p>ç”±äº<strong>é˜¿é‡Œäº‘Â ESÂ å…¨è‡ªç ”äº‘åŸç”Ÿå¼•æ“FalconSeek</strong>åœ¨å†…æ ¸å±‚å¼•å…¥äº†Â SIMDÂ æŒ‡ä»¤é›†åŠ é€Ÿå’ŒÂ HNSWÂ ç®—æ³•ä¼˜åŒ–ï¼Œåœ¨åƒä¸‡çº§æ•°æ®é‡ä¸‹ï¼Œæ€§èƒ½å®Œå…¨æ»¡è¶³Â AÂ å…¬å¸çš„éœ€æ±‚ã€‚æ›´é‡è¦çš„æ˜¯ï¼Œä»–ä»¬ç»ˆäºå¯ä»¥ç”¨ä¸€ä¸ªÂ DSLÂ è¯­å¥åŒæ—¶æå®šâ€œè¯­ä¹‰æœç´¢Â +Â å…³é”®è¯åŒ¹é…Â +Â è¾¹æ—¶é—´è¿‡æ»¤è¾¹æ£€ç´¢â€ã€‚</p>
<p>è€æçš„åé¦ˆï¼šâ€œæ¶æ„å›¾ä¸Šå°‘äº†ä¸€ä¸ªæ¡†ï¼Œä»£ç é‡Œå°‘äº†å‡ ç™¾è¡Œèƒ¶æ°´é€»è¾‘ï¼Œå¼€å‘åŒå­¦ç»ˆäºä¸ç”¨åœ¨ä¸¤ä¸ªåº“ä¹‹é—´ä¿®æ•°æ®ä¸€è‡´æ€§çš„Â BugÂ äº†ã€‚â€</p>
<h2 data-id="heading-4">ä¸ºä»€ä¹ˆé€‰æ‹©Â AllÂ inÂ ESï¼Ÿå› ä¸ºâ€œç»Ÿä¸€â€æœ¬èº«å°±æ˜¯ç”Ÿäº§åŠ›</h2>
<p>AÂ å…¬å¸çš„æ•…äº‹å¹¶éå­¤ä¾‹ã€‚å½“ä»–ä»¬å°†æ—¥å¿—ã€æœç´¢ã€å‘é‡æ”¶æ•›åˆ°é˜¿é‡Œäº‘Â ElasticsearchÂ è¿™ä¸€å¥—æŠ€æœ¯æ ˆä¸Šæ—¶ï¼Œå‘ç”Ÿçš„ä¸ä»…ä»…æ˜¯æˆæœ¬çš„é™ä½ï¼š</p>
<h4 data-id="heading-5">ç³»ç»Ÿæ¶æ„ä¼˜åŒ–ï¼š</h4>
<ol>
<li>
<p>æè‡´çš„è®¡ç®—èµ„æºå¼¹æ€§ï¼ˆServerlessï¼‰ï¼šÂ å¯¹äºæ—¥å¿—è¿™ç§å…·æœ‰æ˜æ˜¾â€œå³°è°·æ•ˆåº”â€çš„æ•°æ®ï¼Œä¼ ç»Ÿçš„é¢„ç½®æœºå™¨æ¨¡å¼æ³¨å®šæ˜¯æµªè´¹ã€‚é˜¿é‡Œäº‘Â ESÂ çš„Â IndexingÂ ServiceÂ è®©ç®—åŠ›åƒæ°´ä¸€æ ·æµåŠ¨ï¼Œâ€œç”¨æ—¶ä»˜è´¹ï¼Œä¸ç”¨å…è´¹â€ï¼Œè¿™æ‰æ˜¯äº‘åŸç”Ÿè¯¥æœ‰çš„æ ·å­ã€‚</p>
</li>
<li>
<p>è¿ç»´æ ‡å‡†çš„ç»Ÿä¸€ï¼šÂ ç°åœ¨ï¼ŒAÂ å…¬å¸çš„è¿ç»´å›¢é˜Ÿåªéœ€è¦ç²¾é€šÂ ESÂ è¿™ä¸€é—¨æ‰‹è‰ºã€‚æ— è®ºæ˜¯æŸ¥ä¸šåŠ¡æ…¢æŸ¥è¯¢ï¼Œè¿˜æ˜¯åšæ—¥å¿—åˆ†æï¼Œäº¦æˆ–æ˜¯ç®¡ç†å‘é‡ç´¢å¼•ï¼Œéƒ½åœ¨åŒä¸€ä¸ªæ§åˆ¶å°ï¼Œéµå¾ªåŒä¸€å¥—å®‰å…¨æ ‡å‡†ï¼ˆRBAC/VPCï¼‰ï¼Œçœ‹åŒä¸€å¥—ç›‘æ§å¤§ç›˜ã€‚</p>
</li>
<li>
<p>æ•°æ®ä»·å€¼çš„é—­ç¯ï¼šÂ æ—¥å¿—æ•°æ®è¿›æ¥ï¼Œæ¸…æ´—åç›´æ¥å¯ä»¥ç”¨äºä¸šåŠ¡åˆ†æï¼›ä¸šåŠ¡æ•°æ®è¿›æ¥ï¼Œç›´æ¥ç”Ÿæˆå‘é‡ç”¨äºæ¨èã€‚æ•°æ®åœ¨åŒä¸€ä¸ªç”Ÿæ€å†…æµè½¬ï¼Œæ²¡æœ‰ä¸­é—´å•†èµšå·®ä»·ã€‚</p>
</li>
</ol>
<h4 data-id="heading-6">æ—¥å¿—æ£€ç´¢å¢å¼ºï¼š</h4>
<p>åœ¨Aå…¬å¸ä¸­å¹¿æ³›ä½¿ç”¨çš„æ—¥å¿—æ£€ç´¢ï¼Œé‡‡ç”¨é˜¿é‡Œäº‘Elasticsearchä¼ä¸šç‰ˆä»¥ä¸‹æ–¹é¢è¿›è¡Œå…¨é¢ä¼˜åŒ–ã€‚</p>
<p><strong>æè‡´å†™å…¥ä¼˜åŒ–Â -Â IndexingÂ serviceè¯»å†™åˆ†ç¦»ï¼Œç»¼åˆå†™å…¥æˆæœ¬é™ä½60%</strong></p>
<ul>
<li>
<p>é«˜æ€§èƒ½ï¼šä¸“ä¸šçº§å†™å…¥ä¼˜åŒ–ï¼Œå¤šè‡ªç ”ç‰¹æ€§åŠ æŒ(ç‰©ç†å¤åˆ¶,å®šå‘è·¯ç”±ç­‰)</p>
</li>
<li>
<p>é«˜ç¨³å®šï¼šå¤šé›†ç¾¤å†—ä½™å¤‡ä»½ï¼Œç§’çº§åˆ‡æ¢</p>
</li>
<li>
<p>ä½æˆæœ¬ï¼šå†™å…¥èµ„æºï¼Œå­˜å‚¨å¤§å°åŠä»‹è´¨ç­‰ä¼˜åŒ–</p>
</li>
<li>
<p>å¼¹æ€§æ‰©å±•ï¼šå†™å…¥èµ„æºç”±äº‘ç«¯åå°è°ƒé…å’Œç®¡ç†ï¼Œä»¥åº”å¯¹æµé‡æ³¢åŠ¨</p>
</li>
<li>
<p>å…è¿ç»´ï¼šæ— é¡»å…³æ³¨å†™å…¥èµ„æºå’Œå†™å…¥å‹åŠ›, æå¤§é™ä½é›†ç¾¤è¿ç»´æˆæœ¬</p>
</li>
</ul>
<p><strong>å­˜ç®—åˆ†ç¦»ä¼˜åŒ–Â -Â OpenStoreæ··åˆå­˜å‚¨æ¶æ„ï¼Œå­˜å‚¨æˆæœ¬é™ä½60%ä»¥ä¸Š</strong></p>
<ul>
<li>
<p>é‡‡ç”¨å­˜ç®—åˆ†ç¦»æ¶æ„ï¼Œé™ä½æ•°æ®å†—ä½™å­˜å‚¨</p>
</li>
<li>
<p>é‡‡ç”¨å¯¹è±¡å­˜å‚¨é™ä½å­˜å‚¨æˆæœ¬</p>
</li>
<li>
<p>å¤šçº§ç¼“å­˜åŠå¹¶å‘æŸ¥è¯¢ä¿è¯æŸ¥è¯¢æ€§èƒ½</p>
</li>
</ul>
<h4 data-id="heading-7">ä¸“ä¸šçº§æŸ¥è¯¢ä¼˜åŒ–:</h4>
<ul>
<li>é’ˆå¯¹æ—¥å¿—åœºæ™¯çš„å…¸å‹æŸ¥è¯¢caseè¿›è¡Œæ·±åº¦ä¼˜åŒ–ï¼Œæé«˜ç”¨æˆ·æŸ¥è¯¢æ€§èƒ½ï¼ŒÂ å¦‚bkdæŸ¥è¯¢ä¼˜åŒ–ç­‰</li>
<li>è´´è¿‘ç”¨æˆ·ä¸šåŠ¡ï¼Œé’ˆå¯¹ç”¨æˆ·ä½¿ç”¨è¿‡ç¨‹ä¸­çš„æŸ¥è¯¢é—®é¢˜è¿›è¡Œå®šåˆ¶ä¼˜åŒ–ï¼Œå¦‚åœ¨æ”¯æŒAå®¢æˆ·ä¸­é‡åˆ°çš„cardinalityå¼€æºç¼ºé™·å¯¼è‡´çš„æŸ¥è¯¢æ€§èƒ½é—®é¢˜ç­‰ã€‚</li>
</ul>
<h4 data-id="heading-8">å‘é‡ç´¢å¼•è°ƒä¼˜ï¼š</h4>
<p>å‘é‡ç´¢å¼•åœ¨AIæœç´¢åœºæ™¯ä¸­è¶Šæ¥è¶Šé‡è¦ï¼ŒAå…¬å¸ä¸ºæé«˜æ€§èƒ½ï¼Œé™ä½æ•´ä½“æˆæœ¬ï¼Œå……åˆ†é‡‡ç”¨äº†é˜¿é‡Œäº‘ESçš„è‹¥å¹²ä¼˜åŒ–æ‰‹æ®µã€‚æˆåŠŸçš„å°†æˆæœ¬é™ä½ä¸€å€ä»¥ä¸Šï¼ŒæŸ¥è¯¢æ€§èƒ½æå‡æ•°å€ä»¥ä¸Šï¼š</p>
<ul>
<li>
<p><strong>è‡ªç ”FalconSeekäº‘åŸç”Ÿç´¢å¼•åº”ç”¨</strong>ï¼šé˜¿é‡Œäº‘æœ€æ–°å‘å¸ƒå…¨è‡ªç ”äº‘åŸç”ŸC++å†…æ ¸å¼•æ“,Â å¯¹æ–‡æœ¬æ£€ç´¢ä¸å‘é‡æ£€ç´¢æ€§èƒ½æå‡ï¼Œå‘é‡æ€§èƒ½è¿›ä¸€æ­¥æå‡40%ä»¥ä¸Šã€‚Â ä½¿ç”¨FalconSeekçš„<strong>Filter-Knn</strong>ç‰¹æ€§ï¼Œæ€§èƒ½æå‡æœ€å¤š4å€ã€‚</p>
</li>
<li>
<p><strong>æ‰§è¡ŒForceÂ Merge</strong>ï¼šå­˜é‡æ•°æ®å®šæœŸæ‰§è¡ŒForceÂ Mergeï¼Œæ€§èƒ½æå‡5å€ä»¥ä¸Šã€‚</p>
</li>
<li>
<p><strong>åŸæ–‡æ’é™¤å‘é‡å­—æ®µ</strong>ï¼šåœ¨å†™å…¥çš„sourceä¸­æ’é™¤å‘é‡å­—æ®µï¼Œå­˜å‚¨ç©ºé—´èŠ‚çº¦1å€ä»¥ä¸Šã€‚</p>
</li>
<li>
<p><strong>æ··åˆæœç´¢ï¼š</strong> é‡‡ç”¨<strong>RRFï¼ˆReciprocalÂ RankÂ Fusionï¼‰</strong> ç®—æ³•æˆ–è‡ªå®šä¹‰çº¿æ€§æƒé‡ï¼Œå°†å‘é‡ç›¸ä¼¼åº¦å¾—åˆ†ä¸BM25æ–‡æœ¬å¾—åˆ†è¿›è¡ŒåŠ æƒèåˆï¼Œä»¥å…¼é¡¾æ£€ç´¢çš„ç²¾ç¡®æ€§ä¸æ³›åŒ–æ€§ã€‚</p>
</li>
</ul>
<h2 data-id="heading-9">æˆæœ¬æ•ˆèƒ½å¯¹æ¯”ä¸é€‰å‹å»ºè®®</h2>
<p>æ ¹æ®Aå…¬å¸è¿ç§»é˜¿é‡Œäº‘çš„æµ‹ç®—åˆ†æï¼Œä¼ä¸šåœ¨æ„å»ºå¤šåœºæ™¯AIæœç´¢æ—¶ï¼Œå¯é‡ç‚¹å…³æ³¨ä»¥ä¸‹æˆæœ¬æŒ‡æ ‡ï¼š</p>






























<table><thead><tr><th><strong>ç»´åº¦</strong></th><th><strong>å»ºè®®æ–¹æ¡ˆ</strong></th><th><strong>ä»·å€¼äº§å‡º</strong></th></tr></thead><tbody><tr><td><strong>è®¡ç®—èµ„æº</strong></td><td>è‡ªç ”FalconSeekå¼•æ“åº”ç”¨<br/>é€‰ç”¨è®¡ç®—å‹ecs.g8iæˆ–r8iç³»åˆ—</td><td>æå‡å‘é‡è¿ç®—ï¼ˆHNSWç­‰ç®—æ³•ï¼‰çš„ååé‡</td></tr><tr><td><strong>å­˜å‚¨èµ„æº</strong></td><td>OpenStoreå­˜ç®—åˆ†ç¦»æ¶æ„</td><td>è§£å†³æ—¥å¿—/å†·æ•°æ®å­˜å‚¨é«˜æˆæœ¬ç—›ç‚¹</td></tr><tr><td><strong>å†™å…¥æ€§èƒ½</strong></td><td>IndexingÂ Serviceé«˜å†™å…¥æœåŠ¡ï¼Œ<br/>å¼€å¯ç‰©ç†å¤åˆ¶ï¼ˆPhysicalÂ Replicationï¼‰</td><td>é™ä½é«˜å¹¶å‘å†™å…¥æ—¶çš„CPUå ç”¨</td></tr><tr><td><strong>è¿ç»´æ•ˆç‡</strong></td><td>ç»Ÿä¸€å…¬ç”¨é›†ç¾¤ä¸ç´ æä¸­å°é›†ç¾¤</td><td>å‡å°‘20%ä»¥ä¸Šçš„ç¢ç‰‡åŒ–äººåŠ›æŠ•å…¥</td></tr></tbody></table>
<h2 data-id="heading-10">æ€»ç»“ï¼šOneÂ Stackä¸€ç«™å¼æœç´¢,Â ç®€å•æ¶æ„æ˜¯æœ€å¥½çš„æ¶æ„</h2>
<p>å›çœ‹Â AÂ å…¬å¸çš„æœç´¢æŠ€æœ¯æ¼”è¿›ä¹‹è·¯ï¼Œå…¶å®å°±æ˜¯ä¸€æ¡ä»â€œåšåŠ æ³•â€åˆ°â€œåšå‡æ³•â€çš„è·¯ã€‚</p>
<p>å¯¹äºæ¶æ„å¸ˆï¼šä½ çš„ç³»ç»Ÿæ‹“æ‰‘å›¾å˜æ¸…æ™°äº†ï¼Œæ•°æ®é“¾è·¯å˜çŸ­äº†ï¼Œç³»ç»Ÿç¨³å®šæ€§å˜å¼ºäº†ã€‚</p>
<p>å¯¹äºè¿ç»´ï¼šåªè¦ç²¾é€šÂ ESÂ ä¸€é—¨äº§å“æŠ€æœ¯æ‰‹è‰ºï¼Œå°±èƒ½æå®šå…¨å…¬å¸çš„æ ¸å¿ƒæ•°æ®æ£€ç´¢å…¨é“¾è·¯ã€‚</p>
<p>å¯¹äºè€æ¿ï¼šTCOï¼ˆæ€»æ‹¥æœ‰æˆæœ¬ï¼‰æ˜¾è‘—ä¸‹é™ï¼ŒåŒæ—¶è·å¾—äº†ä¼ä¸šçº§çš„å®‰å…¨åˆè§„ä¿éšœã€‚</p>
<p>ä¸è¦è®©å¤æ‚çš„å·¥å…·é“¾æ‹–ç´¯ä½ çš„ä¸šåŠ¡åˆ›æ–°çš„é€Ÿåº¦ã€‚</p>
<p>ä»ä»Šå¤©å¼€å§‹ï¼Œå‚è€ƒÂ AÂ å…¬å¸çš„è·¯å¾„ï¼Œé‡æ–°å®¡è§†ä½ çš„æ¶æ„ã€‚å°è¯•é˜¿é‡Œäº‘Â Elasticsearchä¼ä¸šç‰ˆï¼Œä½“éªŒâ€œAllÂ inÂ ESâ€å¸¦æ¥çš„æç®€ä¸é«˜æ•ˆã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[mini-reactæœ€å°å®ç°æ‰‹æŠŠæ‰‹å¸¦ä½ çœ‹æ¸…hooksæœ¬è´¨]]></title>    <link>https://juejin.cn/post/7589212818807390271</link>    <guid>https://juejin.cn/post/7589212818807390271</guid>    <pubDate>2025-12-30T08:25:07.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589212818807390271" data-draft-id="7589475923696566291" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="mini-reactæœ€å°å®ç°æ‰‹æŠŠæ‰‹å¸¦ä½ çœ‹æ¸…hooksæœ¬è´¨"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-30T08:25:07.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="echo_e"/> <meta itemprop="url" content="https://juejin.cn/user/1267099625328903"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            mini-reactæœ€å°å®ç°æ‰‹æŠŠæ‰‹å¸¦ä½ çœ‹æ¸…hooksæœ¬è´¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1267099625328903/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    echo_e
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-30T08:25:07.000Z" title="Tue Dec 30 2025 08:25:07 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    3
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Mini React Runtime å®ç°è§£æï¼ˆFiber + Hooksï¼‰</h2>
<p>åœ¨è¿™ç¯‡åšå®¢ä¸­ï¼Œæˆ‘å°†åˆ†äº«ä¸€ä¸ªæœ€å°åŒ– React Runtime çš„å®ç°ï¼ŒåŒ…æ‹¬ Fiber æ¶æ„å’Œ Hooks çš„åŸç†ã€‚æœ¬æ–‡é€‚åˆæƒ³æ·±å…¥ç†è§£ React å†…éƒ¨å·¥ä½œæœºåˆ¶çš„å‰ç«¯å¼€å‘è€…ã€‚</p>
<hr/>
<h3 data-id="heading-1">å¼•è¨€</h3>
<p>React çš„æ ¸å¿ƒæ˜¯ <strong>è™šæ‹Ÿ DOM + Fiber + Hooks</strong>ã€‚</p>
<ul>
<li><strong>Fiber</strong>ï¼šè¿è¡Œæ—¶çš„ç»„ä»¶å®ä¾‹ï¼Œè´Ÿè´£ç®¡ç†çŠ¶æ€ã€hooks å’Œè°ƒåº¦ã€‚</li>
<li><strong>Hooks</strong>ï¼šå‡½æ•°ç»„ä»¶çš„çŠ¶æ€ç®¡ç†æœºåˆ¶ï¼Œé€šè¿‡è°ƒç”¨é¡ºåºä¿è¯çŠ¶æ€ç¨³å®šæ€§ã€‚</li>
<li><strong>è™šæ‹Ÿ DOM</strong>ï¼šæè¿° UI çš„å¯¹è±¡ï¼Œä¸ç›´æ¥æ¸²æŸ“ï¼ŒFiber æ ¹æ®å®ƒæ„å»ºçœŸå® DOMã€‚</li>
</ul>
<p>æœ¬æ–‡å®ç°çš„æ˜¯ä¸€ä¸ªæœ€å°å¯è¿è¡Œç‰ˆæœ¬ï¼Œå¸®åŠ©ç†è§£åŸç†ã€‚</p>
<hr/>
<h3 data-id="heading-2">æ•´ä½“æ¶æ„</h3>
<h4 data-id="heading-3">æ¶æ„å›¾</h4>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TD
    A[React Element] --&gt;|createFiber| B[Fiber èŠ‚ç‚¹]
    B --&gt;|child/sibling é“¾è¡¨| C[Fiber æ ‘]
    C --&gt;|performUnitOfWork| D[Function Component æ‰§è¡Œ]
    D --&gt;|è°ƒç”¨ Hooks| E[Hooks çŠ¶æ€å­˜å‚¨åœ¨ Fiber.hooks]
    B --&gt;|createDom| F[çœŸå® DOM èŠ‚ç‚¹]
    C --&gt;|commitEffects| G[useEffect æ‰§è¡Œ]
    H[æ›´æ–°æ“ä½œ] --&gt;|setState/useMemo ç­‰| B
    E --&gt;|è¯»å–/ä¿®æ”¹| D
    F --&gt;|æŒ‚è½½åˆ°çˆ¶ DOM| DOM[é¡µé¢ DOM]

    style A fill:#f9f,stroke:#333,stroke-width:1px
    style B fill:#bbf,stroke:#333,stroke-width:1px
    style C fill:#bfb,stroke:#333,stroke-width:1px
    style D fill:#ffb,stroke:#333,stroke-width:1px
    style E fill:#fbf,stroke:#333,stroke-width:1px
    style F fill:#fbb,stroke:#333,stroke-width:1px
    style G fill:#bff,stroke:#333,stroke-width:1px
    style H fill:#eee,stroke:#333,stroke-width:1px
</code></pre>
<h4 data-id="heading-4">æ‰§è¡Œé¡ºåº</h4>
<pre><code class="hljs language-mermaid" lang="mermaid">flowchart TD
    %% åˆæ¬¡æ¸²æŸ“
    A["render(TodoApp)"] --&gt; B["åˆ›å»ºæ ¹ Fiber"]
    B --&gt; C["performUnitOfWork(æ ¹ Fiber)"]
    C --&gt; D{"Fiber.type æ˜¯å¦ä¸ºå‡½æ•°ç»„ä»¶?"}
    D -- æ˜¯ --&gt; E["è®¾ç½® wipFiber=å½“å‰ Fiber, hookIndex=0, hooks=[]"]
    E --&gt; F["æ‰§è¡Œ TodoApp(props)"]

    %% useState
    F --&gt; G["è°ƒç”¨ useState(0)"]
    G --&gt; H["æ£€æŸ¥ oldHook æ˜¯å¦å­˜åœ¨"]
    H --&gt; I{"é¦–æ¬¡æ¸²æŸ“? (oldHook ä¸ºç©º)"}
    I -- æ˜¯ --&gt; J["åˆ›å»ºæ–° Hook {state=0, queue=[]}"]
    I -- å¦ --&gt; K["åº”ç”¨é˜Ÿåˆ—æ›´æ–°è®¡ç®—æœ€æ–° state"]
    J --&gt; L["hookIndex++ è¿”å› state, setState"]
    K --&gt; L

    %% useMemo
    L --&gt; M["è°ƒç”¨ useMemo(() =&gt; count*2, [count])"]
    M --&gt; N["æ£€æŸ¥ oldHook æ˜¯å¦å­˜åœ¨å¹¶æ¯”è¾ƒ deps"]
    N --&gt; O{"ä¾èµ–æ˜¯å¦å˜åŒ–?"}
    O -- æ˜¯ --&gt; P["æ‰§è¡Œ factory() è®¡ç®—æ–° value"]
    O -- å¦ --&gt; Q["å¤ç”¨ä¸Šä¸€æ¬¡ value"]
    P --&gt; R["hookIndex++ è¿”å› memo value"]
    Q --&gt; R

    %% useEffect
    R --&gt; S["è°ƒç”¨ useEffect(..., [count])"]
    S --&gt; T["æ£€æŸ¥ oldHook æ˜¯å¦å­˜åœ¨å¹¶æ¯”è¾ƒ deps"]
    T --&gt; U{"ä¾èµ–æ˜¯å¦å˜åŒ–?"}
    U -- æ˜¯ --&gt; V["å°† effect æ”¾å…¥ pendingEffects é˜Ÿåˆ—"]
    U -- å¦ --&gt; W["ä¸æ”¶é›† effect"]
    V --&gt; X["hookIndex++"]
    W --&gt; X

    %% è¿”å› JSX
    X --&gt; Y["è¿”å›å­ Element: div &gt; h3/p/button"]
    Y --&gt; Z["reconcileChildren åˆ›å»ºå­ Fiber"]
    Z --&gt; AA{"fiber.child æ˜¯å¦å­˜åœ¨?"}
    AA -- æ˜¯ --&gt; C
    AA -- å¦ --&gt; AB["å¤„ç† sibling æˆ–å›åˆ° parent"]
    AB --&gt; AC["commit é˜¶æ®µ: æŒ‚è½½ DOM"]
    AC --&gt; AD["æ‰§è¡Œ pendingEffects ä¸­çš„ useEffect"]

    %% ç”¨æˆ·ç‚¹å‡» button
    AD --&gt; AE["ç”¨æˆ·ç‚¹å‡» button è°ƒç”¨ setCount(c =&gt; c+1)"]
    AE --&gt; AF["å…¥é˜Ÿæ›´æ–° Hook.queue"]
    AF --&gt; AG["rerender() é‡ç½® hookIndex=0, æ‰§è¡Œ TodoApp"]
    AG --&gt; G

    style A fill:#f9f,stroke:#333
    style B fill:#bbf,stroke:#333
    style C fill:#bfb,stroke:#333
    style D fill:#ffb,stroke:#333
    style E fill:#fbf,stroke:#333
    style F fill:#fbb,stroke:#333
    style G fill:#bff,stroke:#333
    style H fill:#ffe,stroke:#333
    style I fill:#eef,stroke:#333
    style J fill:#ddd,stroke:#333
    style K fill:#ccd,stroke:#333
    style L fill:#ffd,stroke:#333
    style M fill:#cff,stroke:#333
    style N fill:#ecf,stroke:#333
    style O fill:#fcf,stroke:#333
    style P fill:#ffc,stroke:#333
    style Q fill:#eef,stroke:#333
    style R fill:#ddf,stroke:#333
    style S fill:#fdd,stroke:#333
    style T fill:#def,stroke:#333
    style U fill:#ffd,stroke:#333
    style V fill:#cfc,stroke:#333
    style W fill:#eee,stroke:#333
    style X fill:#fdf,stroke:#333
    style Y fill:#f9f,stroke:#333
    style Z fill:#bbf,stroke:#333
    style AA fill:#bfb,stroke:#333
    style AB fill:#ffb,stroke:#333
    style AC fill:#fbf,stroke:#333
    style AD fill:#fbb,stroke:#333
    style AE fill:#bff,stroke:#333
    style AF fill:#ffe,stroke:#333
    style AG fill:#def,stroke:#333
</code></pre>
<h3 data-id="heading-5">Element å±‚ï¼ˆè™šæ‹Ÿ DOMï¼‰</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">createElement</span>(<span class="hljs-params">type, props, ...children</span>) {
    <span class="hljs-keyword">return</span> {
        type,
        <span class="hljs-attr">props</span>: {
            ...props,
            <span class="hljs-attr">children</span>: children.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">child</span> =&gt;</span>
                <span class="hljs-keyword">typeof</span> child === <span class="hljs-string">"object"</span> ? child : <span class="hljs-title function_">createTextElement</span>(child)
            ),
        },
    };
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">createTextElement</span>(<span class="hljs-params">text</span>) {
    <span class="hljs-keyword">return</span> {
        <span class="hljs-attr">type</span>: <span class="hljs-string">"TEXT"</span>,
        <span class="hljs-attr">props</span>: {
            <span class="hljs-attr">nodeValue</span>: text,
            <span class="hljs-attr">children</span>: [],
        },
    };
}
</code></pre>
<ul>
<li><code>createElement</code>ï¼šç”Ÿæˆè™šæ‹Ÿ DOM å¯¹è±¡</li>
<li><code>createTextElement</code>ï¼šå°†å­—ç¬¦ä¸²æˆ–æ•°å­—åŒ…è£…æˆæ–‡æœ¬èŠ‚ç‚¹</li>
<li>æ‰€æœ‰å­èŠ‚ç‚¹ç»Ÿä¸€æˆå¯¹è±¡å½¢å¼ï¼Œæ–¹ä¾¿ Fiber éå†</li>
</ul>
<hr/>
<h3 data-id="heading-6">Fiber å±‚ï¼ˆè¿è¡Œæ—¶å®ä¾‹ï¼‰</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">createFiber</span>(<span class="hljs-params">element, parent</span>) {
    <span class="hljs-keyword">return</span> {
        <span class="hljs-attr">type</span>: element.<span class="hljs-property">type</span>,
        <span class="hljs-attr">props</span>: element.<span class="hljs-property">props</span>,
        parent,
        <span class="hljs-attr">child</span>: <span class="hljs-literal">null</span>,
        <span class="hljs-attr">sibling</span>: <span class="hljs-literal">null</span>,
        <span class="hljs-attr">dom</span>: <span class="hljs-literal">null</span>,
        <span class="hljs-attr">alternate</span>: <span class="hljs-literal">null</span>,
        <span class="hljs-attr">hooks</span>: <span class="hljs-literal">null</span>,
    };
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">createDom</span>(<span class="hljs-params">fiber</span>) {
    <span class="hljs-keyword">if</span> (fiber.<span class="hljs-property">type</span> === <span class="hljs-string">"TEXT"</span>) <span class="hljs-keyword">return</span> <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createTextNode</span>(fiber.<span class="hljs-property">props</span>.<span class="hljs-property">nodeValue</span> || <span class="hljs-string">""</span>);
    <span class="hljs-keyword">const</span> dom = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(fiber.<span class="hljs-property">type</span>);
    <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(fiber.<span class="hljs-property">props</span>)
        .<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">key</span> =&gt;</span> key !== <span class="hljs-string">"children"</span>)
        .<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">name</span> =&gt;</span> dom[name] = fiber.<span class="hljs-property">props</span>[name]);
    <span class="hljs-keyword">return</span> dom;
}
</code></pre>
<ul>
<li>æ¯ä¸ª Fiber å¯¹åº”ä¸€ä¸ªç»„ä»¶æˆ– DOM èŠ‚ç‚¹</li>
<li><code>alternate</code> ç”¨äºä¿å­˜ä¸Šä¸€æ¬¡æ¸²æŸ“çš„ Fiberï¼Œå®ç°çŠ¶æ€å¤ç”¨</li>
<li><code>hooks</code> ä¿å­˜å½“å‰ç»„ä»¶çš„æ‰€æœ‰ hooks</li>
</ul>
<hr/>
<h3 data-id="heading-7">Render é˜¶æ®µï¼ˆFiber æ„å»ºï¼‰</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">performUnitOfWork</span>(<span class="hljs-params">fiber</span>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> fiber.<span class="hljs-property">type</span> === <span class="hljs-string">"function"</span>) {
        wipFiber = fiber;
        hookIndex = <span class="hljs-number">0</span>;
        wipFiber.<span class="hljs-property">hooks</span> = [];
        <span class="hljs-keyword">const</span> children = [fiber.<span class="hljs-title function_">type</span>(fiber.<span class="hljs-property">props</span>)];
        <span class="hljs-title function_">reconcileChildren</span>(fiber, children);
    } <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">if</span> (!fiber.<span class="hljs-property">dom</span>) fiber.<span class="hljs-property">dom</span> = <span class="hljs-title function_">createDom</span>(fiber);
        <span class="hljs-keyword">const</span> parentDom = <span class="hljs-title function_">getParentDom</span>(fiber);
        <span class="hljs-keyword">if</span> (parentDom) parentDom.<span class="hljs-title function_">appendChild</span>(fiber.<span class="hljs-property">dom</span>);
        <span class="hljs-title function_">reconcileChildren</span>(fiber, fiber.<span class="hljs-property">props</span>.<span class="hljs-property">children</span> || []);
    }

    <span class="hljs-keyword">if</span> (fiber.<span class="hljs-property">child</span>) <span class="hljs-keyword">return</span> fiber.<span class="hljs-property">child</span>;
    <span class="hljs-keyword">let</span> next = fiber;
    <span class="hljs-keyword">while</span> (next) {
        <span class="hljs-keyword">if</span> (next.<span class="hljs-property">sibling</span>) <span class="hljs-keyword">return</span> next.<span class="hljs-property">sibling</span>;
        next = next.<span class="hljs-property">parent</span>;
    }
}
</code></pre>
<ul>
<li>å¯¹ Function Component æ‰§è¡Œç»„ä»¶å‡½æ•°å¹¶æ”¶é›† hooks</li>
<li>å¯¹ DOM èŠ‚ç‚¹åˆ›å»ºçœŸå® DOM å¹¶æŒ‚è½½</li>
<li>æ·±åº¦ä¼˜å…ˆéå† Fiber æ ‘</li>
</ul>
<hr/>
<h3 data-id="heading-8">Hooks å®ç°</h3>
<h4 data-id="heading-9">useState</h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">useState</span>(<span class="hljs-params">initialState</span>) {
    <span class="hljs-keyword">const</span> oldHook = wipFiber.<span class="hljs-property">alternate</span>?.<span class="hljs-property">hooks</span>?.[hookIndex];
    <span class="hljs-keyword">const</span> hook = { <span class="hljs-attr">state</span>: oldHook ? oldHook.<span class="hljs-property">state</span> : initialState, <span class="hljs-attr">queue</span>: [] };
    (oldHook?.<span class="hljs-property">queue</span> || []).<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">action</span> =&gt;</span> {
        hook.<span class="hljs-property">state</span> = <span class="hljs-keyword">typeof</span> action === <span class="hljs-string">"function"</span> ? <span class="hljs-title function_">action</span>(hook.<span class="hljs-property">state</span>) : action;
    });
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">setState</span> = action =&gt; { hook.<span class="hljs-property">queue</span>.<span class="hljs-title function_">push</span>(action); <span class="hljs-title function_">rerender</span>(); };
    wipFiber.<span class="hljs-property">hooks</span>.<span class="hljs-title function_">push</span>(hook);
    hookIndex++;
    <span class="hljs-keyword">return</span> [hook.<span class="hljs-property">state</span>, setState];
}
</code></pre>
<ul>
<li>state ä¿å­˜åœ¨ Fiber.hooks ä¸­</li>
<li>é€šè¿‡ hookIndex ä¿è¯é¡ºåº</li>
<li>setState å…¥é˜Ÿå¹¶è§¦å‘ rerender</li>
</ul>
<h4 data-id="heading-10">useEffect</h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">useEffect</span>(<span class="hljs-params">effect, deps</span>) {
    <span class="hljs-keyword">const</span> oldHook = wipFiber.<span class="hljs-property">alternate</span>?.<span class="hljs-property">hooks</span>?.[hookIndex];
    <span class="hljs-keyword">let</span> hasChanged = !oldHook || !deps || deps.<span class="hljs-title function_">some</span>(<span class="hljs-function">(<span class="hljs-params">d,i</span>) =&gt;</span> !<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">is</span>(d, oldHook.<span class="hljs-property">deps</span>[i]));
    <span class="hljs-keyword">const</span> hook = { effect, deps, <span class="hljs-attr">cleanup</span>: oldHook?.<span class="hljs-property">cleanup</span> };
    <span class="hljs-keyword">if</span> (hasChanged) pendingEffects.<span class="hljs-title function_">push</span>(hook);
    wipFiber.<span class="hljs-property">hooks</span>.<span class="hljs-title function_">push</span>(hook);
    hookIndex++;
}
</code></pre>
<ul>
<li>render é˜¶æ®µæ”¶é›† effect</li>
<li>commit é˜¶æ®µç»Ÿä¸€æ‰§è¡Œ</li>
<li>deps ä¸å˜æ—¶è·³è¿‡</li>
</ul>
<h4 data-id="heading-11">useRef</h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">useRef</span>(<span class="hljs-params">initialValue</span>) {
    <span class="hljs-keyword">const</span> oldHook = wipFiber.<span class="hljs-property">alternate</span>?.<span class="hljs-property">hooks</span>?.[hookIndex];
    <span class="hljs-keyword">const</span> hook = { <span class="hljs-attr">current</span>: oldHook ? oldHook.<span class="hljs-property">current</span> : initialValue };
    wipFiber.<span class="hljs-property">hooks</span>.<span class="hljs-title function_">push</span>(hook);
    hookIndex++;
    <span class="hljs-keyword">return</span> hook;
}
</code></pre>
<ul>
<li>è¿”å›ç¨³å®šå¼•ç”¨</li>
<li>ä¿®æ”¹ current ä¸è§¦å‘ rerender</li>
</ul>
<h4 data-id="heading-12">useMemo</h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">useMemo</span>(<span class="hljs-params">factory, deps</span>) {
    <span class="hljs-keyword">const</span> oldHook = wipFiber.<span class="hljs-property">alternate</span>?.<span class="hljs-property">hooks</span>?.[hookIndex];
    <span class="hljs-keyword">const</span> hasChanged = !oldHook || !deps || deps.<span class="hljs-title function_">some</span>(<span class="hljs-function">(<span class="hljs-params">d,i</span>) =&gt;</span> !<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">is</span>(d, oldHook.<span class="hljs-property">deps</span>[i]));
    <span class="hljs-keyword">const</span> hook = { <span class="hljs-attr">value</span>: hasChanged ? <span class="hljs-title function_">factory</span>() : oldHook.<span class="hljs-property">value</span>, deps };
    wipFiber.<span class="hljs-property">hooks</span>.<span class="hljs-title function_">push</span>(hook);
    hookIndex++;
    <span class="hljs-keyword">return</span> hook.<span class="hljs-property">value</span>;
}
</code></pre>
<ul>
<li>ç¼“å­˜è®¡ç®—ç»“æœ</li>
<li>deps ä¸å˜æ—¶è¿”å›ä¸Šæ¬¡ç»“æœ</li>
</ul>
<h4 data-id="heading-13">useContext</h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">useContext</span>(<span class="hljs-params">context</span>) {
    <span class="hljs-keyword">const</span> hook = { <span class="hljs-attr">value</span>: context.<span class="hljs-property">_currentValue</span> };
    wipFiber.<span class="hljs-property">hooks</span>.<span class="hljs-title function_">push</span>(hook);
    hookIndex++;
    <span class="hljs-keyword">return</span> hook.<span class="hljs-property">value</span>;
}
</code></pre>
<ul>
<li>è¯»å– context._currentValue</li>
<li>è¿™æ˜¯ä¸€ä¸ªæç®€å®ç°ï¼Œä¸æ”¯æŒåµŒå¥— Provider</li>
</ul>
<hr/>
<h3 data-id="heading-14">Demo ç¤ºä¾‹</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">TodoApp</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> [count, setCount] = <span class="hljs-title class_">MiniReact</span>.<span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>);
    <span class="hljs-keyword">const</span> double = <span class="hljs-title class_">MiniReact</span>.<span class="hljs-title function_">useMemo</span>(<span class="hljs-function">() =&gt;</span> count * <span class="hljs-number">2</span>, [count]);
    <span class="hljs-title class_">MiniReact</span>.<span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(count), [count]);

    <span class="hljs-keyword">return</span> <span class="hljs-title class_">MiniReact</span>.<span class="hljs-title function_">createElement</span>(
        <span class="hljs-string">"div"</span>,
        <span class="hljs-literal">null</span>,
        <span class="hljs-title class_">MiniReact</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">"h3"</span>, <span class="hljs-literal">null</span>, <span class="hljs-string">"Count: "</span>, count),
        <span class="hljs-title class_">MiniReact</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">"p"</span>, <span class="hljs-literal">null</span>, <span class="hljs-string">"Double: "</span>, double),
        <span class="hljs-title class_">MiniReact</span>.<span class="hljs-title function_">createElement</span>(
            <span class="hljs-string">"button"</span>,
            { <span class="hljs-attr">onclick</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">setCount</span>(<span class="hljs-function"><span class="hljs-params">c</span> =&gt;</span> c + <span class="hljs-number">1</span>) },
            <span class="hljs-string">"Add"</span>
        )
    );
}

<span class="hljs-title class_">MiniReact</span>.<span class="hljs-title function_">render</span>(<span class="hljs-title class_">MiniReact</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-title class_">TodoApp</span>, <span class="hljs-literal">null</span>), <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">"root"</span>));
</code></pre>
<ul>
<li>æ¼”ç¤ºäº† useStateã€useEffectã€useMemo</li>
<li>æ¯æ¬¡ç‚¹å‡»æŒ‰é’®éƒ½ä¼šè§¦å‘ rerender</li>
</ul>
<hr/>
<h3 data-id="heading-15">æ€»ç»“</h3>
<p>é€šè¿‡è¿™ä¸ª Mini React Runtimeï¼Œæˆ‘ä»¬å¯ä»¥ç†è§£ï¼š</p>
<ol>
<li><strong>Fiber æ ‘çš„ä½œç”¨</strong>ï¼šç®¡ç†ç»„ä»¶å®ä¾‹å’Œ hooks</li>
<li><strong>Hooks çš„åŸç†</strong>ï¼šä¾èµ–è°ƒç”¨é¡ºåºå’Œ Fiber å­˜å‚¨</li>
<li><strong>render é˜¶æ®µ vs commit é˜¶æ®µ</strong>ï¼šrender åªæ˜¯æ„å»º Fiberï¼Œä¸æ“ä½œ DOMï¼›commit æ‰çœŸæ­£æ›´æ–° DOM</li>
<li><strong>æœ€å°åŒ–å®ç°è¶³å¤Ÿæ•™å­¦</strong>ï¼Œå¯ä»¥é€æ­¥æ‰©å±•æ”¯æŒ diff ç®—æ³•ã€å¼‚æ­¥æ¸²æŸ“ã€useLayoutEffect ç­‰</li>
</ol>
<blockquote>
<p>è¿™æ˜¯ç†è§£ React Hooks å’Œ Fiber å†…éƒ¨æœºåˆ¶çš„ç»ä½³å…¥é—¨æ¡ˆä¾‹ã€‚</p>
</blockquote>
<p>å¯ä»¥ä»”ç»†é˜…è¯»ä¸‹é¢æºç æ³¨é‡Šå†™çš„éå¸¸æ¸…æ¥š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">/**************************************************************
 * Mini React Runtime (Fiber + Hooks)
 *
 * è¿™æ˜¯ä¸€ä¸ªæ•™å­¦ç”¨é€”çš„ã€Œæœ€å°å¯è¿è¡Œ React å†…æ ¸ã€
 * ç›®æ ‡ï¼šå¸®åŠ©ä½ **å®Œæ•´ç†è§£ React Fiber + Hooks çš„è¿è¡Œæœºåˆ¶**
 *
 * ç‰¹ç‚¹ï¼š
 * - åŒæ­¥ renderï¼ˆæ— å¹¶å‘ã€æ— æ—¶é—´åˆ‡ç‰‡ï¼‰
 * - Fiber æ ‘ç»“æ„
 * - Hooks åŸºäºã€Œè°ƒç”¨é¡ºåºã€å®ç°
 * - æ”¯æŒ useState / useEffect / useRef / useMemo / useContext
 **************************************************************/</span>

<span class="hljs-comment">/**************************************************************
 * å…¨å±€è¿è¡Œæ—¶çŠ¶æ€ï¼ˆéå¸¸å…³é”®ï¼‰
 **************************************************************/</span>

<span class="hljs-keyword">let</span> wipFiber = <span class="hljs-literal">null</span>;
<span class="hljs-comment">// å½“å‰æ­£åœ¨ render çš„ Function Component å¯¹åº”çš„ Fiber</span>
<span class="hljs-comment">// Hooks çš„æ‰€æœ‰è¯»å†™éƒ½ä¾èµ–å®ƒ</span>

<span class="hljs-keyword">let</span> hookIndex = <span class="hljs-number">0</span>;
<span class="hljs-comment">// å½“å‰ç»„ä»¶ render è¿‡ç¨‹ä¸­ï¼Œç¬¬å‡ ä¸ª hook</span>
<span class="hljs-comment">// useState/useEffect/... å…¨éƒ¨ä¾èµ–ã€Œè°ƒç”¨é¡ºåºã€</span>

<span class="hljs-keyword">let</span> currentRoot = <span class="hljs-literal">null</span>;
<span class="hljs-comment">// å·²ç» commit çš„æ ¹ Fiber</span>
<span class="hljs-comment">// rerender æ—¶ä½œä¸º alternateï¼ˆæ—§ Fiber æ ‘ï¼‰</span>
<span class="hljs-comment">// ç”¨æ¥ä¿å­˜å·²ç»æäº¤çš„Fiberæ ‘ï¼Œä¸‹ä¸€æ¬¡renderæ—¶å€™æŠŠæ–°çš„rootFiberçš„alternateæŒ‡å‘å®ƒ</span>

<span class="hljs-keyword">let</span> pendingEffects = [];
<span class="hljs-comment">// render é˜¶æ®µæ”¶é›†çš„æ‰€æœ‰ useEffect</span>
<span class="hljs-comment">// ä¼šåœ¨ commit é˜¶æ®µç»Ÿä¸€æ‰§è¡Œ</span>


<span class="hljs-comment">/**************************************************************
 * Element å±‚ï¼ˆè™šæ‹Ÿ DOMï¼‰
 **************************************************************/</span>

<span class="hljs-comment">/**
 * createElement
 * ç”¨äºåˆ›å»º React Elementï¼ˆè™šæ‹ŸèŠ‚ç‚¹ï¼‰
 *
 * ç­‰ä»·äºï¼š
 *   React.createElement(type, props, ...children)
 *
 * React Element æ˜¯ä¸€ä¸ªã€Œçº¯æè¿°å¯¹è±¡ã€
 * å¹¶ä¸ä¼šç›´æ¥å‚ä¸æ¸²æŸ“
 */</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">createElement</span>(<span class="hljs-params">type, props, ...children</span>) {
    <span class="hljs-keyword">return</span> {
        type, <span class="hljs-comment">// stringï¼ˆdivï¼‰æˆ– functionï¼ˆç»„ä»¶ï¼‰</span>
        <span class="hljs-attr">props</span>: {
            ...props,
            <span class="hljs-comment">// children å¿…é¡»ç»Ÿä¸€æˆ object</span>
            <span class="hljs-attr">children</span>: children.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">child</span> =&gt;</span>
                <span class="hljs-keyword">typeof</span> child === <span class="hljs-string">"object"</span>
                    ? child
                    : <span class="hljs-title function_">createTextElement</span>(child)
            ),
        },
    };
}

<span class="hljs-comment">/**
 * createTextElement
 * å°†å­—ç¬¦ä¸² / æ•°å­—åŒ…è£…æˆ TEXT ç±»å‹çš„ Element
 */</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">createTextElement</span>(<span class="hljs-params">text</span>) {
    <span class="hljs-keyword">return</span> {
        <span class="hljs-attr">type</span>: <span class="hljs-string">"TEXT"</span>,
        <span class="hljs-attr">props</span>: {
            <span class="hljs-attr">nodeValue</span>: text,
            <span class="hljs-attr">children</span>: [],
        },
    };
}


<span class="hljs-comment">/**************************************************************
 * Fiber å±‚ï¼ˆè¿è¡Œæ—¶å®ä¾‹ï¼‰
 **************************************************************/</span>

<span class="hljs-comment">/**
 * createFiber
 *
 * Fiber æ˜¯ React è¿è¡Œæ—¶çš„æ ¸å¿ƒæ•°æ®ç»“æ„
 * æ¯ä¸€ä¸ª Fiber â‰ˆ ä¸€ä¸ªç»„ä»¶/DOM å®ä¾‹
 */</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">createFiber</span>(<span class="hljs-params">element, parent</span>) {
    <span class="hljs-keyword">return</span> {
        <span class="hljs-attr">type</span>: element.<span class="hljs-property">type</span>,     <span class="hljs-comment">// ç»„ä»¶å‡½æ•° or DOM æ ‡ç­¾</span>
        <span class="hljs-attr">props</span>: element.<span class="hljs-property">props</span>,   <span class="hljs-comment">// props</span>
        parent,                 <span class="hljs-comment">// çˆ¶ Fiber</span>
        <span class="hljs-attr">child</span>: <span class="hljs-literal">null</span>,            <span class="hljs-comment">// ç¬¬ä¸€ä¸ªå­ Fiber</span>
        <span class="hljs-attr">sibling</span>: <span class="hljs-literal">null</span>,          <span class="hljs-comment">// ä¸‹ä¸€ä¸ªå…„å¼Ÿ Fiber</span>
        <span class="hljs-attr">dom</span>: <span class="hljs-literal">null</span>,              <span class="hljs-comment">// å¯¹åº”çš„çœŸå® DOM</span>
        <span class="hljs-attr">alternate</span>: <span class="hljs-literal">null</span>,        <span class="hljs-comment">// ä¸Šä¸€æ¬¡ render çš„ Fiber</span>
        <span class="hljs-attr">hooks</span>: <span class="hljs-literal">null</span>,            <span class="hljs-comment">// hooks æ•°ç»„ï¼ˆFunction Component ä¸“å±ï¼‰</span>
    };
}

<span class="hljs-comment">/**
 * createDom
 * æ ¹æ® Fiber åˆ›å»ºçœŸå® DOM èŠ‚ç‚¹
 */</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">createDom</span>(<span class="hljs-params">fiber</span>) {
    <span class="hljs-comment">// æ–‡æœ¬èŠ‚ç‚¹</span>
    <span class="hljs-keyword">if</span> (fiber.<span class="hljs-property">type</span> === <span class="hljs-string">"TEXT"</span>) {
        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createTextNode</span>(fiber.<span class="hljs-property">props</span>.<span class="hljs-property">nodeValue</span> ?? <span class="hljs-string">""</span>);
    }

    <span class="hljs-comment">// æ™®é€š DOM èŠ‚ç‚¹</span>
    <span class="hljs-keyword">const</span> dom = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(fiber.<span class="hljs-property">type</span>);

    <span class="hljs-comment">// å°† props æ˜ å°„åˆ° DOM ä¸Šï¼ˆäº‹ä»¶ã€å±æ€§ï¼‰</span>
    <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(fiber.<span class="hljs-property">props</span>)
        .<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">key</span> =&gt;</span> key !== <span class="hljs-string">"children"</span>)
        .<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">name</span> =&gt;</span> {
            dom[name] = fiber.<span class="hljs-property">props</span>[name];
        });

    <span class="hljs-keyword">return</span> dom;
}


<span class="hljs-comment">/**************************************************************
 * Fiber æ„å»ºï¼ˆreconcileï¼‰
 **************************************************************/</span>

<span class="hljs-comment">/**
 * reconcileChildren
 *
 * æ ¹æ® element åˆ—è¡¨æ„å»º Fiber.child / Fiber.sibling é“¾è¡¨
 *
 * åŒæ—¶ï¼š
 * - å°è¯•å¤ç”¨ oldFiberï¼ˆalternateï¼‰
 * - ä¿è¯ hooks èƒ½å¤Ÿè·¨ render å¤ç”¨
 */</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">reconcileChildren</span>(<span class="hljs-params">fiber, elements = []</span>) {
    <span class="hljs-keyword">let</span> index = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">let</span> prevSibling = <span class="hljs-literal">null</span>;

    <span class="hljs-comment">// ä¸Šä¸€æ¬¡ render çš„ç¬¬ä¸€ä¸ªå­ Fiber</span>
    <span class="hljs-keyword">let</span> oldFiber = fiber.<span class="hljs-property">alternate</span> &amp;&amp; fiber.<span class="hljs-property">alternate</span>.<span class="hljs-property">child</span>;

    <span class="hljs-keyword">while</span> (index &lt; elements.<span class="hljs-property">length</span>) {
        <span class="hljs-keyword">const</span> element = elements[index];
        <span class="hljs-keyword">if</span> (!element) {
            index++;
            <span class="hljs-keyword">continue</span>;
        }

        <span class="hljs-comment">// ä¸º element åˆ›å»ºæ–°çš„ Fiber</span>
        <span class="hljs-keyword">const</span> newFiber = <span class="hljs-title function_">createFiber</span>(element, fiber);

        <span class="hljs-comment">// å…³è”æ—§ Fiberï¼ˆç”¨äº hooks / state å¤ç”¨ï¼‰</span>
        <span class="hljs-keyword">if</span> (oldFiber) {
            newFiber.<span class="hljs-property">alternate</span> = oldFiber;
            oldFiber = oldFiber.<span class="hljs-property">sibling</span>;
        }

        <span class="hljs-comment">// æ„å»º child / sibling é“¾è¡¨</span>
        <span class="hljs-keyword">if</span> (index === <span class="hljs-number">0</span>) {
            fiber.<span class="hljs-property">child</span> = newFiber;
        } <span class="hljs-keyword">else</span> {
            prevSibling.<span class="hljs-property">sibling</span> = newFiber;
        }

        prevSibling = newFiber;
        index++;
    }
}

<span class="hljs-comment">/**
 * getParentDom
 * å‘ä¸ŠæŸ¥æ‰¾æœ€è¿‘çš„ Host Fiberï¼ˆæœ‰ dom çš„ Fiberï¼‰
 */</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">getParentDom</span>(<span class="hljs-params">fiber</span>) {
    <span class="hljs-keyword">let</span> parent = fiber.<span class="hljs-property">parent</span>;
    <span class="hljs-keyword">while</span> (parent &amp;&amp; !parent.<span class="hljs-property">dom</span>) {
        parent = parent.<span class="hljs-property">parent</span>;
    }
    <span class="hljs-keyword">return</span> parent ? parent.<span class="hljs-property">dom</span> : <span class="hljs-literal">null</span>;
}


<span class="hljs-comment">/**************************************************************
 * Render é˜¶æ®µï¼ˆFiber æ„å»ºï¼‰
 **************************************************************/</span>

<span class="hljs-comment">/**
 * performUnitOfWork
 *
 * Fiber æ„å»ºçš„æ ¸å¿ƒè°ƒåº¦å‡½æ•°
 * é‡‡ç”¨æ·±åº¦ä¼˜å…ˆéå†ï¼ˆDFSï¼‰
 */</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">performUnitOfWork</span>(<span class="hljs-params">fiber</span>) {

    <span class="hljs-comment">/******** Function Component ********/</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> fiber.<span class="hljs-property">type</span> === <span class="hljs-string">"function"</span>) {

        <span class="hljs-comment">// æ ‡è®°å½“å‰æ­£åœ¨ render çš„ Fiber</span>
        wipFiber = fiber;

        <span class="hljs-comment">// hooks ä» 0 å¼€å§‹</span>
        hookIndex = <span class="hljs-number">0</span>;

        <span class="hljs-comment">// åˆå§‹åŒ– hooks å®¹å™¨</span>
        wipFiber.<span class="hljs-property">hooks</span> = [];

        <span class="hljs-comment">// æ‰§è¡Œç»„ä»¶å‡½æ•°ï¼ˆrender é˜¶æ®µï¼‰</span>
        <span class="hljs-keyword">const</span> children = [fiber.<span class="hljs-title function_">type</span>(fiber.<span class="hljs-property">props</span>)];

        <span class="hljs-comment">// æ ¹æ®è¿”å›çš„ element æ„å»ºå­ Fiber</span>
        <span class="hljs-title function_">reconcileChildren</span>(fiber, children);
    }

    <span class="hljs-comment">/******** Host Componentï¼ˆDOMï¼‰ ********/</span>
    <span class="hljs-keyword">else</span> {
        <span class="hljs-comment">// åˆ›å»º DOM</span>
        <span class="hljs-keyword">if</span> (!fiber.<span class="hljs-property">dom</span>) {
            fiber.<span class="hljs-property">dom</span> = <span class="hljs-title function_">createDom</span>(fiber);
        }

        <span class="hljs-comment">// æŒ‚è½½åˆ°çˆ¶ DOM</span>
        <span class="hljs-keyword">const</span> parentDom = <span class="hljs-title function_">getParentDom</span>(fiber);
        <span class="hljs-keyword">if</span> (parentDom) {
            parentDom.<span class="hljs-title function_">appendChild</span>(fiber.<span class="hljs-property">dom</span>);
        }

        <span class="hljs-comment">// ç»§ç»­å‘ä¸‹æ„å»º</span>
        <span class="hljs-title function_">reconcileChildren</span>(fiber, fiber.<span class="hljs-property">props</span>.<span class="hljs-property">children</span> || []);
    }

    <span class="hljs-comment">// æ·±åº¦ä¼˜å…ˆéå†</span>
    <span class="hljs-keyword">if</span> (fiber.<span class="hljs-property">child</span>) <span class="hljs-keyword">return</span> fiber.<span class="hljs-property">child</span>;

    <span class="hljs-keyword">let</span> next = fiber;
    <span class="hljs-keyword">while</span> (next) {
        <span class="hljs-keyword">if</span> (next.<span class="hljs-property">sibling</span>) <span class="hljs-keyword">return</span> next.<span class="hljs-property">sibling</span>;
        next = next.<span class="hljs-property">parent</span>;
    }
}


<span class="hljs-comment">/**************************************************************
 * render å…¥å£
 **************************************************************/</span>

<span class="hljs-keyword">function</span> <span class="hljs-title function_">render</span>(<span class="hljs-params">element, container</span>) {

    <span class="hljs-keyword">const</span> rootFiber = {
        <span class="hljs-attr">dom</span>: container,
        <span class="hljs-attr">props</span>: { <span class="hljs-attr">children</span>: [element] },
        <span class="hljs-attr">parent</span>: <span class="hljs-literal">null</span>,
        <span class="hljs-attr">child</span>: <span class="hljs-literal">null</span>,
        <span class="hljs-attr">sibling</span>: <span class="hljs-literal">null</span>,
        <span class="hljs-attr">alternate</span>: currentRoot, <span class="hljs-comment">// æ—§ Fiber æ ‘</span>
    };

    currentRoot = rootFiber;

    <span class="hljs-keyword">let</span> nextUnitOfWork = rootFiber;
    <span class="hljs-keyword">while</span> (nextUnitOfWork) {
        nextUnitOfWork = <span class="hljs-title function_">performUnitOfWork</span>(nextUnitOfWork);
    }

    <span class="hljs-comment">// commit é˜¶æ®µ</span>
    <span class="hljs-title function_">commitEffects</span>();
}

<span class="hljs-comment">/**
 * rerender
 * æ‰€æœ‰ setState çš„æœ€ç»ˆè§¦å‘ç‚¹
 */</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">rerender</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> container = currentRoot.<span class="hljs-property">dom</span>;
    container.<span class="hljs-property">innerHTML</span> = <span class="hljs-string">""</span>;
    <span class="hljs-title function_">render</span>(currentRoot.<span class="hljs-property">props</span>.<span class="hljs-property">children</span>[<span class="hljs-number">0</span>], container);
}


<span class="hljs-comment">/**************************************************************
 * Hooks å®ç°
 **************************************************************/</span>

<span class="hljs-comment">/**
 * useState
 *
 * åŸç†æ€»ç»“ï¼š
 * 1. state å­˜å‚¨åœ¨ fiber.hooks ä¸­
 * 2. é€šè¿‡ hookIndex ä¿è¯é¡ºåºä¸€è‡´
 * 3. setState åªæ˜¯å…¥é˜Ÿï¼Œä¸ç«‹å³æ›´æ–°
 * 4. rerender æ—¶ç»Ÿä¸€è®¡ç®—æ–° state
 */</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">useState</span>(<span class="hljs-params">initialState</span>) {

    <span class="hljs-comment">// æ‰¾åˆ°æ—§ hook</span>
    <span class="hljs-keyword">const</span> oldHook =
        wipFiber.<span class="hljs-property">alternate</span> &amp;&amp;
        wipFiber.<span class="hljs-property">alternate</span>.<span class="hljs-property">hooks</span> &amp;&amp;
        wipFiber.<span class="hljs-property">alternate</span>.<span class="hljs-property">hooks</span>[hookIndex];

    <span class="hljs-comment">// åˆå§‹åŒ– hook</span>
    <span class="hljs-keyword">const</span> hook = {
        <span class="hljs-attr">state</span>: oldHook ? oldHook.<span class="hljs-property">state</span> : initialState,
        <span class="hljs-attr">queue</span>: [],
    };

    <span class="hljs-comment">// æ‰§è¡Œä¸Šä¸€æ¬¡ setState å…¥é˜Ÿçš„ action</span>
    <span class="hljs-keyword">const</span> actions = oldHook ? oldHook.<span class="hljs-property">queue</span> : [];
    actions.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">action</span> =&gt;</span> {
        <span class="hljs-comment">// è·å–æœ€æ–°çŠ¶æ€</span>
        hook.<span class="hljs-property">state</span> =
            <span class="hljs-keyword">typeof</span> action === <span class="hljs-string">"function"</span>
                ? <span class="hljs-title function_">action</span>(hook.<span class="hljs-property">state</span>)
                : action;
    });

    <span class="hljs-comment">// setState å®ç°</span>
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">setState</span> = action =&gt; {
        <span class="hljs-comment">// å‘ä¹‹å‰çš„wipFiberå¯¹åº”çš„hookçš„queueä¸­æ·»åŠ action</span>
        hook.<span class="hljs-property">queue</span>.<span class="hljs-title function_">push</span>(action);
        <span class="hljs-title function_">rerender</span>();
    };

    wipFiber.<span class="hljs-property">hooks</span>.<span class="hljs-title function_">push</span>(hook);
    hookIndex++;

    <span class="hljs-keyword">return</span> [hook.<span class="hljs-property">state</span>, setState];
}


<span class="hljs-comment">/**
 * useEffect
 *
 * æ ¸å¿ƒæ€æƒ³ï¼š
 * - render é˜¶æ®µåªæ”¶é›†
 * - commit é˜¶æ®µç»Ÿä¸€æ‰§è¡Œ
 * - deps æ§åˆ¶æ˜¯å¦é‡æ–°æ‰§è¡Œ
 */</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">useEffect</span>(<span class="hljs-params">effect, deps</span>) {

    <span class="hljs-keyword">const</span> oldHook =
        wipFiber.<span class="hljs-property">alternate</span> &amp;&amp;
        wipFiber.<span class="hljs-property">alternate</span>.<span class="hljs-property">hooks</span> &amp;&amp;
        wipFiber.<span class="hljs-property">alternate</span>.<span class="hljs-property">hooks</span>[hookIndex];

    <span class="hljs-keyword">let</span> hasChanged = <span class="hljs-literal">true</span>;

    <span class="hljs-comment">// deps å¯¹æ¯”</span>
    <span class="hljs-keyword">if</span> (oldHook &amp;&amp; deps) {
        hasChanged = deps.<span class="hljs-title function_">some</span>(
            <span class="hljs-function">(<span class="hljs-params">dep, i</span>) =&gt;</span> !<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">is</span>(dep, oldHook.<span class="hljs-property">deps</span>[i])
        );
    }

    <span class="hljs-keyword">const</span> hook = {
        effect,                <span class="hljs-comment">// å‰¯ä½œç”¨å‡½æ•°</span>
        deps,                  <span class="hljs-comment">// ä¾èµ–</span>
        <span class="hljs-attr">cleanup</span>: oldHook ? oldHook.<span class="hljs-property">cleanup</span> : <span class="hljs-literal">null</span>,
    };

    <span class="hljs-keyword">if</span> (hasChanged) {
        pendingEffects.<span class="hljs-title function_">push</span>(hook);
    }

    wipFiber.<span class="hljs-property">hooks</span>.<span class="hljs-title function_">push</span>(hook);
    hookIndex++;
}


<span class="hljs-comment">/**
 * commitEffects
 * effect çš„çœŸæ­£æ‰§è¡Œé˜¶æ®µ
 */</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">commitEffects</span>(<span class="hljs-params"/>) {
    pendingEffects.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">hook</span> =&gt;</span> {

        <span class="hljs-comment">// å…ˆæ‰§è¡Œä¸Šä¸€æ¬¡ cleanup</span>
        <span class="hljs-keyword">if</span> (hook.<span class="hljs-property">cleanup</span>) {
            hook.<span class="hljs-title function_">cleanup</span>();
        }

        <span class="hljs-comment">// å†æ‰§è¡Œ effect</span>
        <span class="hljs-keyword">const</span> cleanup = hook.<span class="hljs-title function_">effect</span>();

        <span class="hljs-comment">// ä¿å­˜ cleanup</span>
        hook.<span class="hljs-property">cleanup</span> = <span class="hljs-keyword">typeof</span> cleanup === <span class="hljs-string">"function"</span> ? cleanup : <span class="hljs-literal">null</span>;
    });

    pendingEffects = [];
}


<span class="hljs-comment">/**
 * useRef
 *
 * ç‰¹ç‚¹ï¼š
 * - è¿”å›ç¨³å®šå¼•ç”¨
 * - ä¿®æ”¹ current ä¸ä¼šè§¦å‘ render
 */</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">useRef</span>(<span class="hljs-params">initialValue</span>) {
    <span class="hljs-keyword">const</span> oldHook =
        wipFiber.<span class="hljs-property">alternate</span> &amp;&amp;
        wipFiber.<span class="hljs-property">alternate</span>.<span class="hljs-property">hooks</span> &amp;&amp;
        wipFiber.<span class="hljs-property">alternate</span>.<span class="hljs-property">hooks</span>[hookIndex];

    <span class="hljs-keyword">const</span> hook = {
        <span class="hljs-attr">current</span>: oldHook ? oldHook.<span class="hljs-property">current</span> : initialValue,
    };

    wipFiber.<span class="hljs-property">hooks</span>.<span class="hljs-title function_">push</span>(hook);
    hookIndex++;

    <span class="hljs-keyword">return</span> hook;
}


<span class="hljs-comment">/**
 * useMemo
 *
 * ä½œç”¨ï¼š
 * - ç¼“å­˜è®¡ç®—ç»“æœ
 * - deps ä¸å˜æ—¶å¤ç”¨
 */</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">useMemo</span>(<span class="hljs-params">factory, deps</span>) {
    <span class="hljs-keyword">const</span> oldHook =
        wipFiber.<span class="hljs-property">alternate</span> &amp;&amp;
        wipFiber.<span class="hljs-property">alternate</span>.<span class="hljs-property">hooks</span> &amp;&amp;
        wipFiber.<span class="hljs-property">alternate</span>.<span class="hljs-property">hooks</span>[hookIndex];

    <span class="hljs-keyword">let</span> hasChanged = <span class="hljs-literal">true</span>;

    <span class="hljs-keyword">if</span> (oldHook &amp;&amp; deps) {
        hasChanged = deps.<span class="hljs-title function_">some</span>(
            <span class="hljs-function">(<span class="hljs-params">dep, i</span>) =&gt;</span> !<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">is</span>(dep, oldHook.<span class="hljs-property">deps</span>[i])
        );
    }

    <span class="hljs-keyword">const</span> hook = {
        <span class="hljs-attr">value</span>: hasChanged ? <span class="hljs-title function_">factory</span>() : oldHook.<span class="hljs-property">value</span>,
        deps,
    };

    wipFiber.<span class="hljs-property">hooks</span>.<span class="hljs-title function_">push</span>(hook);
    hookIndex++;

    <span class="hljs-keyword">return</span> hook.<span class="hljs-property">value</span>;
}


<span class="hljs-comment">/**************************************************************
 * Contextï¼ˆæç®€ç‰ˆï¼‰
 **************************************************************/</span>

<span class="hljs-keyword">function</span> <span class="hljs-title function_">createContext</span>(<span class="hljs-params">defaultValue</span>) {
    <span class="hljs-keyword">const</span> context = {
        <span class="hljs-attr">_currentValue</span>: defaultValue,
        <span class="hljs-title class_">Provider</span>: <span class="hljs-literal">null</span>,
    };

    context.<span class="hljs-property">Provider</span> = <span class="hljs-keyword">function</span> <span class="hljs-title function_">Provider</span>(<span class="hljs-params">props</span>) {
        context.<span class="hljs-property">_currentValue</span> = props.<span class="hljs-property">value</span>;
        <span class="hljs-keyword">return</span> props.<span class="hljs-property">children</span>;
    };

    <span class="hljs-keyword">return</span> context;
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">useContext</span>(<span class="hljs-params">context</span>) {
    <span class="hljs-keyword">const</span> hook = { <span class="hljs-attr">value</span>: context.<span class="hljs-property">_currentValue</span> };
    wipFiber.<span class="hljs-property">hooks</span>.<span class="hljs-title function_">push</span>(hook);
    hookIndex++;
    <span class="hljs-keyword">return</span> hook.<span class="hljs-property">value</span>;
}


<span class="hljs-comment">/**************************************************************
 * å¯¹å¤– API
 **************************************************************/</span>

<span class="hljs-keyword">const</span> <span class="hljs-title class_">MiniReact</span> = {
    createElement,
    render,
    useState,
    useEffect,
    useRef,
    useMemo,
    useContext,
    createContext,
};


<span class="hljs-comment">/**************************************************************
 * Demo
 **************************************************************/</span>

<span class="hljs-keyword">function</span> <span class="hljs-title function_">TodoApp</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> [count, setCount] = <span class="hljs-title class_">MiniReact</span>.<span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>);

    <span class="hljs-keyword">const</span> double = <span class="hljs-title class_">MiniReact</span>.<span class="hljs-title function_">useMemo</span>(<span class="hljs-function">() =&gt;</span> {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"compute memo"</span>);
        <span class="hljs-keyword">return</span> count * <span class="hljs-number">2</span>;
    }, [count]);

    <span class="hljs-title class_">MiniReact</span>.<span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"effect:"</span>, count);
    }, [count]);

    <span class="hljs-keyword">return</span> <span class="hljs-title class_">MiniReact</span>.<span class="hljs-title function_">createElement</span>(
        <span class="hljs-string">"div"</span>,
        <span class="hljs-literal">null</span>,
        <span class="hljs-title class_">MiniReact</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">"h3"</span>, <span class="hljs-literal">null</span>, <span class="hljs-string">"Count: "</span>, count),
        <span class="hljs-title class_">MiniReact</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">"p"</span>, <span class="hljs-literal">null</span>, <span class="hljs-string">"Double: "</span>, double),
        <span class="hljs-title class_">MiniReact</span>.<span class="hljs-title function_">createElement</span>(
            <span class="hljs-string">"button"</span>,
            { <span class="hljs-attr">onclick</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">setCount</span>(<span class="hljs-function"><span class="hljs-params">c</span> =&gt;</span> c + <span class="hljs-number">1</span>) },
            <span class="hljs-string">"Add"</span>
        )
    );
}

<span class="hljs-title class_">MiniReact</span>.<span class="hljs-title function_">render</span>(
    <span class="hljs-title class_">MiniReact</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-title class_">TodoApp</span>, <span class="hljs-literal">null</span>),
    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">"root"</span>)
);


<span class="hljs-comment">/**************************************************************
 * TodoApp åˆå§‹åŒ–æµç¨‹ï¼ˆç²¾ç»† Fiber + Hooks æ³¨é‡Šï¼‰
 **************************************************************/</span>

<span class="hljs-comment">/**
 * ======================= Step 1: render() è¢«è°ƒç”¨ =======================
 * MiniReact.render(element, container)
 * container = &lt;div id="root"&gt;&lt;/div&gt;
 *
 * åˆ›å»ºæ ¹ Fiber:
 * rootFiber = {
 *   dom: container,
 *   props: { children: [TodoApp element] },
 *   parent: null,
 *   child: null,
 *   sibling: null,
 *   alternate: null
 * }
 *
 * currentRoot = rootFiber
 * nextUnitOfWork = rootFiber
 */</span>

<span class="hljs-comment">/**
 * ======================= Step 2: performUnitOfWork(rootFiber) =======================
 * fiber = rootFiber
 * fiber.type = undefined / å®¹å™¨ DOM
 *
 * 1. åˆ›å»º DOM:
 *    fiber.dom = container
 *    parentDom = null (fiber.parent = null)
 *
 * 2. reconcileChildren(fiber, [TodoApp element])
 *    - index=0
 *    - åˆ›å»º TodoApp Fiber:
 *      todoFiber = {
 *        type: TodoApp,
 *        props: {},
 *        parent: rootFiber,
 *        child: null,
 *        sibling: null,
 *        dom: null,
 *        alternate: null,
 *        hooks: null
 *      }
 *    - rootFiber.child = todoFiber
 *
 * nextUnitOfWork = todoFiber
 */</span>

<span class="hljs-comment">/**
 * ======================= Step 3: performUnitOfWork(todoFiber) =======================
 * fiber = todoFiber
 * fiber.type = TodoApp (å‡½æ•°ç»„ä»¶)
 *
 * 1. å‡†å¤‡ render å‡½æ•°ç»„ä»¶:
 *    wipFiber = todoFiber
 *    hookIndex = 0
 *    wipFiber.hooks = []   &lt;-- æ–° Fiber çš„ hooks æ•°ç»„åˆå§‹åŒ–
 *
 * 2. æ‰§è¡Œ TodoApp():
 *    const [count, setCount] = useState(0)
 *
 * ======================= Step 3a: useState =======================
 * oldHook = null (é¦–æ¬¡æ¸²æŸ“ï¼ŒwipFiber.alternate = null)
 * æ–° hook:
 * 0: { state: 0, queue: [] }
 * wipFiber.hooks = [ { state:0, queue:[] } ]
 * hookIndex++ =&gt; 1
 * è¿”å› count = 0, setCount = function
 *
 * ======================= Step 3b: useMemo =======================
 * const double = useMemo(() =&gt; count*2, [count])
 * oldHook = null
 * hasChanged = true (é¦–æ¬¡æ¸²æŸ“)
 * æ–° hook:
 * 1: { value: 0, deps:[0] }
 * wipFiber.hooks = [
 *   { state:0, queue:[] },
 *   { value:0, deps:[0] }
 * ]
 * hookIndex++ =&gt; 2
 * double = 0
 *
 * ======================= Step 3c: useEffect =======================
 * const effect = () =&gt; { console.log(count); }
 * oldHook = null
 * hasChanged = true
 * æ–° hook:
 * 2: { effect: effectFn, deps:[0], cleanup: null }
 * pendingEffects = [ hook ]
 * wipFiber.hooks = [
 *   { state:0, queue:[] },
 *   { value:0, deps:[0] },
 *   { effect:effectFn, deps:[0], cleanup:null }
 * ]
 * hookIndex++ =&gt; 3
 *
 * 3. TodoApp è¿”å› JSX:
 * &lt;div&gt;
 *   &lt;h3&gt;Count: 0&lt;/h3&gt;
 *   &lt;p&gt;Double: 0&lt;/p&gt;
 *   &lt;button&gt;Add&lt;/button&gt;
 * &lt;/div&gt;
 *
 * reconcileChildren(todoFiber, [div element])
 * åˆ›å»º divFiberã€h3Fiberã€pFiberã€buttonFiber
 * å»ºç«‹ child/sibling é“¾è¡¨
 */</span>

<span class="hljs-comment">/**
 * ======================= Step 4: commit é˜¶æ®µ =======================
 * éå† Fiber æ ‘ï¼ŒæŒ‚è½½ DOM:
 * rootFiber.dom.appendChild(todoFiber.dom) -&gt; divFiber.dom -&gt; h3/p/button
 *
 * æ‰§è¡Œ pendingEffects:
 * hook.effect() -&gt; console.log(count) è¾“å‡º 0
 * hook.cleanup = null
 * pendingEffects æ¸…ç©º
 *
 * æœ€ç»ˆçŠ¶æ€:
 * currentRoot = rootFiber
 * wipFiber = null
 * hookIndex = 0
 * Fiber æ ‘:
 * ROOT
 * â””â”€â”€ TodoApp Fiber
 *     â””â”€â”€ divFiber
 *         â”œâ”€â”€ h3Fiber
 *         â”œâ”€â”€ pFiber
 *         â””â”€â”€ buttonFiber
 * Hooks çŠ¶æ€:
 * 0: { state:0, queue:[] }
 * 1: { value:0, deps:[0] }
 * 2: { effect: effectFn, deps:[0], cleanup:null }
 */</span>




<span class="hljs-comment">/**************************************************************
 * TodoApp ç¬¬ä¸€æ¬¡ç‚¹å‡»æŒ‰é’®æ›´æ–°æµç¨‹ï¼ˆç²¾ç»† Fiber + Hooks æ³¨é‡Šï¼‰
 **************************************************************/</span>

<span class="hljs-comment">/**
 * ======================= Step 1: ç”¨æˆ·ç‚¹å‡»æŒ‰é’® =======================
 * ç‚¹å‡» button æ‰§è¡Œ onclick:
 * setCount(c =&gt; c + 1)
 *
 * 1. æŸ¥æ‰¾å½“å‰ Hookï¼š
 *    wipFiber = null (å°šæœªè¿›å…¥ render)
 *    hookIndex = å½“å‰è°ƒç”¨ä½ç½® 0
 *    å¯¹åº”æ—§ Hook:
 *    oldHook = currentRoot.child.hooks[0] = { state:0, queue:[] }
 *
 * 2. å…¥é˜Ÿ action åˆ° hook.queue:
 *    action = c =&gt; c + 1
 *    oldHook.queue.push(action)
 *
 *    Hooks çŠ¶æ€ï¼ˆæ—§ Fiber çš„ hooksï¼Œä¸å˜ï¼‰:
 *    0: { state:0, queue:[c=&gt;c+1] }
 *    1: { value:0, deps:[0] }
 *    2: { effect:effectFn, deps:[0], cleanup:null }
 *
 * 3. è°ƒç”¨ rerender()
 *    æ¸…ç©ºæ ¹ DOM: container.innerHTML = ""
 *    å‡†å¤‡é‡æ–° render(currentRoot.props.children[0], currentRoot.dom)
 */</span>

<span class="hljs-comment">/**
 * ======================= Step 2: performUnitOfWork(todoFiber) =======================
 * wipFiber = todoFiber
 * hookIndex = 0
 * wipFiber.hooks = []   &lt;-- æ–° Fiber hooks é‡å»º
 *
 * æ‰§è¡Œ TodoApp():
 */</span>

<span class="hljs-comment">/**
 * ======================= Step 2a: useState =======================
 * hookIndex = 0
 * oldHook = { state:0, queue:[c=&gt;c+1] }
 *
 * æ–° hook:
 * state = oldHook.state = 0
 * queue = [] (æ–° hook çš„ queue ä¸´æ—¶ä¸ºç©º)
 *
 * å¤„ç†æ—§ queue:
 * for action in oldHook.queue:
 *   state = action(state) = (0+1) = 1
 * æ–° hook.state = 1
 *
 * hookIndex++ =&gt; 1
 * wipFiber.hooks = [
 *   { state:1, queue:[] }   &lt;-- æ›´æ–°åçš„ useState
 * ]
 *
 * è¿”å› count = 1, setCount = function
 */</span>

<span class="hljs-comment">/**
 * ======================= Step 2b: useMemo =======================
 * hookIndex = 1
 * oldHook = { value:0, deps:[0] }
 *
 * æ£€æŸ¥ deps:
 * æ—§ deps = [0], æ–° count = 1
 * deps å˜åŒ– -&gt; hasChanged = true
 *
 * é‡æ–°è®¡ç®— value = count*2 = 1*2 = 2
 * æ–° hook:
 * { value:2, deps:[1] }
 * hookIndex++ =&gt; 2
 * wipFiber.hooks = [
 *   { state:1, queue:[] },
 *   { value:2, deps:[1] }
 * ]
 *
 * double = 2
 */</span>

<span class="hljs-comment">/**
 * ======================= Step 2c: useEffect =======================
 * hookIndex = 2
 * oldHook = { effect: effectFn, deps:[0], cleanup:null }
 *
 * æ£€æŸ¥ deps:
 * old deps=[0], count=1 -&gt; depså˜åŒ– -&gt; hasChanged = true
 *
 * æ–° hook:
 * { effect:effectFn, deps:[1], cleanup:null }
 * pendingEffects.push(newHook)
 * hookIndex++ =&gt; 3
 * wipFiber.hooks = [
 *   { state:1, queue:[] },
 *   { value:2, deps:[1] },
 *   { effect:effectFn, deps:[1], cleanup:null }
 * ]
 */</span>

<span class="hljs-comment">/**
 * ======================= Step 3: JSX è¿”å› &amp; Fiber æ ‘å¤ç”¨ =======================
 * TodoApp è¿”å›:
 * &lt;div&gt;
 *   &lt;h3&gt;Count: 1&lt;/h3&gt;
 *   &lt;p&gt;Double: 2&lt;/p&gt;
 *   &lt;button&gt;Add&lt;/button&gt;
 * &lt;/div&gt;
 *
 * reconcileChildren(todoFiber, [div element])
 * Fiber æ ‘å¤ç”¨:
 * todoFiber.child = divFiber (å¤ç”¨æ—§èŠ‚ç‚¹)
 * divFiber.child = h3Fiber -&gt; pFiber -&gt; buttonFiber (å¤ç”¨æ—§èŠ‚ç‚¹)
 *
 * dom ä¸é‡å»ºï¼Œåªæ›´æ–° textContent
 */</span>

<span class="hljs-comment">/**
 * ======================= Step 4: commit é˜¶æ®µ =======================
 * æ›´æ–° DOM:
 * h3.textContent = "Count:1"
 * p.textContent = "Double:2"
 *
 * æ‰§è¡Œ pendingEffects:
 * hook.effect() -&gt; console.log(count) è¾“å‡º 1
 * alert("Count is: 1")
 * hook.cleanup = null
 * pendingEffects æ¸…ç©º
 */</span>

<span class="hljs-comment">/**
 * ======================= Step 5: æœ€ç»ˆçŠ¶æ€ =======================
 * currentRoot = rootFiber
 * wipFiber = null
 * hookIndex = 0
 *
 * Fiber æ ‘:
 * ROOT
 * â””â”€â”€ TodoApp Fiber
 *     â””â”€â”€ divFiber
 *         â”œâ”€â”€ h3Fiber
 *         â”œâ”€â”€ pFiber
 *         â””â”€â”€ buttonFiber
 *
 * Hooks çŠ¶æ€:
 * 0: { state:1, queue:[] }          &lt;-- useState å·²å¤„ç† queue
 * 1: { value:2, deps:[1] }          &lt;-- useMemo æ›´æ–°
 * 2: { effect:effectFn, deps:[1], cleanup:null } &lt;-- useEffect æ›´æ–°
 *
 * pendingEffects = []
 */</span>

</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[reactå­¦ä¹ 15ï¼šåŸºäº React Router å®ç° keepalive]]></title>    <link>https://juejin.cn/post/7589475923696746515</link>    <guid>https://juejin.cn/post/7589475923696746515</guid>    <pubDate>2025-12-30T08:47:32.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589475923696746515" data-draft-id="7576994308273668115" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="reactå­¦ä¹ 15ï¼šåŸºäº React Router å®ç° keepalive"/> <meta itemprop="keywords" content="React.js"/> <meta itemprop="datePublished" content="2025-12-30T08:47:32.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸€æ±Ÿä¸œæµæ°´"/> <meta itemprop="url" content="https://juejin.cn/user/1151943917181880"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            reactå­¦ä¹ 15ï¼šåŸºäº React Router å®ç° keepalive
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1151943917181880/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸€æ±Ÿä¸œæµæ°´
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-30T08:47:32.000Z" title="Tue Dec 30 2025 08:47:32 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å½“è·¯ç”±åˆ‡æ¢çš„æ—¶å€™ï¼Œreact router ä¼šé”€æ¯ä¹‹å‰è·¯ç”±çš„ç»„ä»¶ï¼Œç„¶åæ¸²æŸ“æ–°çš„è·¯ç”±å¯¹åº”çš„ç»„ä»¶ã€‚</p>
<p>åœ¨ä¸€äº›åœºæ™¯ä¸‹ï¼Œè¿™æ ·æ˜¯æœ‰é—®é¢˜çš„ã€‚</p>
<p>æ¯”å¦‚ç§»åŠ¨ç«¯å¾ˆå¤šé•¿åˆ—è¡¨ï¼Œç”¨æˆ·åˆ’äº†å¾ˆä¹…ä¹‹åï¼Œç‚¹å‡»æŸä¸ªåˆ—è¡¨é¡¹è·³åˆ°è¯¦æƒ…é¡µï¼Œä¹‹ååˆè·³å›æ¥ï¼Œä½†æ˜¯è¿™æ—¶å€™åˆ—è¡¨é¡µçš„ç»„ä»¶é”€æ¯é‡æ–°åˆ›å»ºï¼Œåˆå›åˆ°äº†æœ€ä¸Šé¢ã€‚</p>
<p>æ¯”å¦‚ç§»åŠ¨ç«¯å¡«å†™äº†æŸä¸ªè¡¨å•ï¼Œæœ‰çš„è¡¨å•éœ€è¦è·³åˆ°åˆ«çš„é¡µé¢è·å–æ•°æ®ï¼Œç„¶åè·³å›æ¥ï¼Œè·³å›æ¥å‘ç°ç»„ä»¶é”€æ¯é‡æ–°åˆ›å»ºï¼Œä¹‹å‰å¡«çš„éƒ½æ²¡äº†ã€‚</p>
<p>ç±»ä¼¼è¿™ç§åœºæ™¯ï¼Œå°±éœ€è¦è·¯ç”±åˆ‡æ¢çš„æ—¶å€™ä¸é”€æ¯ç»„ä»¶ï¼Œä¹Ÿå°±æ˜¯ keepaliveã€‚</p>
<p>æˆ‘ä»¬å…ˆå¤ç°ä¸‹è¿™ä¸ªåœºæ™¯ï¼š</p>
<pre><code class="hljs language-js" lang="js">npx create-vite
</code></pre>
<p>é€‰æ‹© react + typescript åˆ›å»ºé¡¹ç›®ã€‚</p>
<p>å®‰è£… react-routerï¼š</p>
<pre><code class="hljs language-js" lang="js">npm i --save react-router-dom
</code></pre>
<p>åœ¨ App.tsx å†™ä¸‹è·¯ç”±ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> { useState } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;
<span class="hljs-keyword">import</span> {  <span class="hljs-title class_">Link</span>, useLocation, <span class="hljs-title class_">RouterProvider</span>, createBrowserRouter, <span class="hljs-title class_">Outlet</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'react-router-dom'</span>;

<span class="hljs-keyword">const</span> <span class="hljs-title function_">Layout</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-keyword">const</span> { pathname } = <span class="hljs-title function_">useLocation</span>();

    <span class="hljs-keyword">return</span> (
        <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>å½“å‰è·¯ç”±: {pathname}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">Outlet</span>/&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
    )
}

<span class="hljs-keyword">const</span> <span class="hljs-title function_">Aaa</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-keyword">const</span> [count, setCount] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>);

    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>{count}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> setCount(count =&gt; count + 1)}&gt;åŠ ä¸€<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Link</span> <span class="hljs-attr">to</span>=<span class="hljs-string">'/bbb'</span>&gt;</span>å» Bbb é¡µé¢<span class="hljs-tag">&lt;/<span class="hljs-name">Link</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Link</span> <span class="hljs-attr">to</span>=<span class="hljs-string">'/ccc'</span>&gt;</span>å» Ccc é¡µé¢<span class="hljs-tag">&lt;/<span class="hljs-name">Link</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
};

<span class="hljs-keyword">const</span> <span class="hljs-title function_">Bbb</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-keyword">const</span> [count, setCount] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>);

    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>{count}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> setCount(count =&gt; count + 1)}&gt;åŠ ä¸€<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Link</span> <span class="hljs-attr">to</span>=<span class="hljs-string">'/'</span>&gt;</span>å»é¦–é¡µ<span class="hljs-tag">&lt;/<span class="hljs-name">Link</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
};

<span class="hljs-keyword">const</span> <span class="hljs-title function_">Ccc</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>ccc<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Link</span> <span class="hljs-attr">to</span>=<span class="hljs-string">'/'</span>&gt;</span>å»é¦–é¡µ<span class="hljs-tag">&lt;/<span class="hljs-name">Link</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
};

<span class="hljs-keyword">const</span> routes = [
  {
    <span class="hljs-attr">path</span>: <span class="hljs-string">"/"</span>,
    <span class="hljs-attr">element</span>: <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Layout</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">Layout</span>&gt;</span></span>,
    <span class="hljs-attr">children</span>: [
      {
        <span class="hljs-attr">path</span>: <span class="hljs-string">"/"</span>,
        <span class="hljs-attr">element</span>: <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Aaa</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">Aaa</span>&gt;</span></span>,
      },
      {
        <span class="hljs-attr">path</span>: <span class="hljs-string">"/bbb"</span>,
        <span class="hljs-attr">element</span>: <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Bbb</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">Bbb</span>&gt;</span></span>
      },
      {
        <span class="hljs-attr">path</span>: <span class="hljs-string">"/ccc"</span>,
        <span class="hljs-attr">element</span>: <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Ccc</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">Ccc</span>&gt;</span></span>
      }
    ]
  }
];

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> router = <span class="hljs-title function_">createBrowserRouter</span>(routes);

<span class="hljs-keyword">const</span> <span class="hljs-title function_">App</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">RouterProvider</span> <span class="hljs-attr">router</span>=<span class="hljs-string">{router}/</span>&gt;</span></span>
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">App</span>;
</code></pre>
<p>è¿™é‡Œæœ‰ /ã€/bbbã€/ccc è¿™ä¸‰ä¸ªè·¯ç”±ã€‚</p>
<p>ä¸€çº§è·¯ç”±æ¸²æŸ“ Layout ç»„ä»¶ï¼Œé‡Œé¢é€šè¿‡ Outlet æŒ‡å®šæ¸²æŸ“äºŒçº§è·¯ç”±çš„åœ°æ–¹ã€‚</p>
<p>äºŒçº§è·¯ç”± / æ¸²æŸ“ Aaa ç»„ä»¶ï¼Œ/bbb æ¸²æŸ“ Bbb ç»„ä»¶ï¼Œ/ccc æ¸²æŸ“ Ccc ç»„ä»¶ã€‚</p>
<p>è¿™é‡Œçš„ Outlet ç»„ä»¶ï¼Œä¹Ÿå¯ä»¥æ¢æˆ useOutletï¼Œæ•ˆæœä¸€æ ·ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5e8e3f2660c44359bbb1c9729ea64792~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA5rGf5Lic5rWB5rC0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767689252&amp;x-signature=rqOkIY5kelNcV00c75U8VzzjGb8%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d145057fa8464d76a5fd570b762fe73e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA5rGf5Lic5rWB5rC0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767689252&amp;x-signature=mGgQxHQ6m5FVLtq%2B4wv4NgUXejc%3D" alt="image.png" loading="lazy"/></p>
<p>é»˜è®¤è·¯ç”±åˆ‡æ¢ï¼Œå¯¹åº”çš„ç»„ä»¶å°±ä¼šé”€æ¯ã€‚</p>
<p>æˆ‘ä»¬æœ‰æ—¶å€™ä¸å¸Œæœ›åˆ‡æ¢è·¯ç”±æ—¶é”€æ¯é¡µé¢ç»„ä»¶ï¼Œä¹Ÿå°±æ˜¯å¸Œæœ›èƒ½å®ç° keepaliveã€‚</p>
<p>æ€ä¹ˆåšå‘¢ï¼Ÿ</p>
<p>å…¶å®å¾ˆå®¹æ˜“æƒ³åˆ°ï¼Œæˆ‘ä»¬æŠŠæ‰€æœ‰éœ€è¦ keepalive çš„ç»„ä»¶ä¿å­˜åˆ°ä¸€ä¸ªå…¨å±€å¯¹è±¡ã€‚</p>
<p>ç„¶åæ¸²æŸ“çš„æ—¶å€™æŠŠå®ƒä»¬éƒ½æ¸²æŸ“å‡ºæ¥ï¼Œè·¯ç”±åˆ‡æ¢åªæ˜¯æ”¹å˜æ˜¾ç¤ºéšè—ã€‚</p>
<p>æŒ‰ç…§è¿™ä¸ªæ€è·¯æ¥å†™ä¸€ä¸‹ï¼š</p>
<p>æ–°å»º KeepAliveLayout.tsxï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, { createContext, useContext } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;
<span class="hljs-keyword">import</span> { useOutlet, useLocation, matchPath } <span class="hljs-keyword">from</span> <span class="hljs-string">'react-router-dom'</span>
<span class="hljs-keyword">import</span> type { <span class="hljs-variable constant_">FC</span>, <span class="hljs-title class_">PropsWithChildren</span>, <span class="hljs-title class_">ReactNode</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;

interface <span class="hljs-title class_">KeepAliveLayoutProps</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">PropsWithChildren</span>{
    <span class="hljs-attr">keepPaths</span>: <span class="hljs-title class_">Array</span>&lt;string | <span class="hljs-title class_">RegExp</span>&gt;;
    keepElements?: <span class="hljs-title class_">Record</span>&lt;string, <span class="hljs-title class_">ReactNode</span>&gt;;
    dropByPath?: <span class="hljs-function">(<span class="hljs-params">path: string</span>) =&gt;</span> <span class="hljs-keyword">void</span>;
}

type <span class="hljs-title class_">KeepAliveContextType</span> = <span class="hljs-title class_">Omit</span>&lt;<span class="hljs-title class_">Required</span>&lt;<span class="hljs-title class_">KeepAliveLayoutProps</span>&gt;, <span class="hljs-string">'children'</span>&gt;;

<span class="hljs-keyword">const</span> <span class="hljs-attr">keepElements</span>: <span class="hljs-title class_">KeepAliveContextType</span>[<span class="hljs-string">'keepElements'</span>] = {};

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title class_">KeepAliveContext</span> = createContext&lt;<span class="hljs-title class_">KeepAliveContextType</span>&gt;({
    <span class="hljs-attr">keepPaths</span>: [],
    keepElements,
    <span class="hljs-title function_">dropByPath</span>(<span class="hljs-params">path: string</span>) {
        keepElements[path] = <span class="hljs-literal">null</span>;
    }
});

<span class="hljs-keyword">const</span> <span class="hljs-title function_">isKeepPath</span> = (<span class="hljs-params">keepPaths: <span class="hljs-built_in">Array</span>&lt;string | <span class="hljs-built_in">RegExp</span>&gt;, path: string</span>) =&gt; {
    <span class="hljs-keyword">let</span> isKeep = <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i&lt; keepPaths.<span class="hljs-property">length</span>; i++) {
        <span class="hljs-keyword">let</span> item = keepPaths[i];
        <span class="hljs-keyword">if</span> (item === path) {
            isKeep = <span class="hljs-literal">true</span>;
        }
        <span class="hljs-keyword">if</span> (item <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">RegExp</span> &amp;&amp; item.<span class="hljs-title function_">test</span>(path)) {
            isKeep = <span class="hljs-literal">true</span>;
        }
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> item === <span class="hljs-string">'string'</span> &amp;&amp; item.<span class="hljs-title function_">toLowerCase</span>() === path) {
            isKeep = <span class="hljs-literal">true</span>;
        }
    }
    <span class="hljs-keyword">return</span> isKeep;
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">useKeepOutlet</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> location = <span class="hljs-title function_">useLocation</span>();
    <span class="hljs-keyword">const</span> element = <span class="hljs-title function_">useOutlet</span>();

    <span class="hljs-keyword">const</span> { keepElements, keepPaths } = <span class="hljs-title function_">useContext</span>(<span class="hljs-title class_">KeepAliveContext</span>);
    <span class="hljs-keyword">const</span> isKeep = <span class="hljs-title function_">isKeepPath</span>(keepPaths, location.<span class="hljs-property">pathname</span>);

    <span class="hljs-keyword">if</span> (isKeep) {
        keepElements![location.<span class="hljs-property">pathname</span>] = element;
    }

    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;&gt;</span>
        {
            Object.entries(keepElements).map(([pathname, element]) =&gt; (
                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> 
                    <span class="hljs-attr">key</span>=<span class="hljs-string">{pathname}</span>
                    <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">height:</span> '<span class="hljs-attr">100</span>%', <span class="hljs-attr">width:</span> '<span class="hljs-attr">100</span>%', <span class="hljs-attr">position:</span> '<span class="hljs-attr">relative</span>', <span class="hljs-attr">overflow:</span> '<span class="hljs-attr">hidden</span> <span class="hljs-attr">auto</span>' }}
                    <span class="hljs-attr">className</span>=<span class="hljs-string">"keep-alive-page"</span>
                    <span class="hljs-attr">hidden</span>=<span class="hljs-string">{!matchPath(location.pathname,</span> <span class="hljs-attr">pathname</span>)}
                &gt;</span>
                    {element}
                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
            ))
        }
        {!isKeep &amp;&amp; element}
    <span class="hljs-tag">&lt;/&gt;</span></span>
}

<span class="hljs-keyword">const</span> <span class="hljs-title class_">KeepAliveLayout</span>: <span class="hljs-variable constant_">FC</span>&lt;<span class="hljs-title class_">KeepAliveLayoutProps</span>&gt; = <span class="hljs-function">(<span class="hljs-params">props</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> { keepPaths, ...other } = props;

    <span class="hljs-keyword">const</span> { keepElements, dropByPath } = <span class="hljs-title function_">useContext</span>(<span class="hljs-title class_">KeepAliveContext</span>);

    <span class="hljs-keyword">return</span> (
        <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">KeepAliveContext.Provider</span> <span class="hljs-attr">value</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">keepPaths</span>, <span class="hljs-attr">keepElements</span>, <span class="hljs-attr">dropByPath</span> }} {<span class="hljs-attr">...other</span>} /&gt;</span></span>
    )
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">KeepAliveLayout</span>;
</code></pre>
<h2 data-id="heading-0">ts ç›¸å…³çŸ¥è¯†ç‚¹</h2>
<h3 data-id="heading-1">PropsWithChildren</h3>
<p>åœ¨ React ä¸­ï¼Œ<code>PropsWithChildren</code>Â æ˜¯ TypeScript æä¾›çš„ä¸€ä¸ªå·¥å…·ç±»å‹ï¼Œç”¨äºä¸ºç»„ä»¶çš„ props ç±»å‹æ·»åŠ Â <code>children</code>Â å±æ€§çš„ç±»å‹å®šä¹‰ã€‚</p>
<p>å½“ä½ å®šä¹‰ç»„ä»¶çš„ props ç±»å‹æ—¶ï¼Œå¦‚æœç»„ä»¶éœ€è¦æ¥æ”¶Â <code>children</code>ï¼ˆå­å…ƒç´ ï¼‰ï¼Œå¯ä»¥ä½¿ç”¨Â <code>PropsWithChildren</code>Â æ¥è‡ªåŠ¨åŒ…å«Â <code>children</code>Â çš„ç±»å‹ï¼Œæ— éœ€æ‰‹åŠ¨å£°æ˜ã€‚</p>
<p>å®ƒçš„æœ¬è´¨æ˜¯ä¸€ä¸ªæ³›å‹ç±»å‹ï¼Œå®šä¹‰å¦‚ä¸‹ï¼ˆç®€åŒ–ç‰ˆï¼‰ï¼š</p>
<pre><code class="hljs language-js" lang="js">type <span class="hljs-title class_">PropsWithChildren</span>&lt;P = {}&gt; = P &amp; { children?: <span class="hljs-title class_">React</span>.<span class="hljs-property">ReactNode</span> };
</code></pre>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> { type <span class="hljs-title class_">PropsWithChildren</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;

<span class="hljs-comment">// è‡ªå®šä¹‰ props ç±»å‹</span>
type <span class="hljs-title class_">CardProps</span> = {
  <span class="hljs-attr">title</span>: string;
  className?: string;
};

<span class="hljs-comment">// ä½¿ç”¨ PropsWithChildren åŒ…å« children</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">Card</span> = (<span class="hljs-params">{ title, className, children }: PropsWithChildren&lt;CardProps&gt;</span>) =&gt; {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{className}</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>{title}<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>{children}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
};

<span class="hljs-comment">// ä½¿ç”¨ç»„ä»¶</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">App</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Card</span> <span class="hljs-attr">title</span>=<span class="hljs-string">"å¡ç‰‡æ ‡é¢˜"</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"card"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>è¿™æ˜¯å¡ç‰‡å†…å®¹<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">Card</span>&gt;</span></span>
  );
};
</code></pre>
<h3 data-id="heading-2">Recordã€ Requireã€ Omit</h3>
<ul>
<li>Record æ˜¯åˆ›å»ºä¸€ä¸ª key value çš„å¯¹è±¡ç±»å‹ï¼š</li>
</ul>
<pre><code class="hljs language-js" lang="js"> keepElements?: <span class="hljs-title class_">Record</span>&lt;string, <span class="hljs-title class_">ReactNode</span>&gt;;
</code></pre>
<ul>
<li>
<p>Requried æ˜¯å»æ‰å¯é€‰ -?</p>
</li>
<li>
<p>Omit æ˜¯åˆ æ‰å…¶ä¸­çš„éƒ¨åˆ†å±æ€§ï¼š</p>
</li>
</ul>
<pre><code class="hljs language-js" lang="js">type <span class="hljs-title class_">KeepAliveContextType</span> = <span class="hljs-title class_">Omit</span>&lt;<span class="hljs-title class_">Required</span>&lt;<span class="hljs-title class_">KeepAliveLayoutProps</span>&gt;, <span class="hljs-string">'children'</span>&gt;;
</code></pre>
<p>å¦‚æœè¦çŸ¥é“æŸä¸ªå±æ€§çš„ç±»å‹å‘¢ï¼Ÿ å¦‚ä¸‹ä»£ç ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> <span class="hljs-attr">keepElements</span>: <span class="hljs-title class_">KeepAliveContextType</span>[<span class="hljs-string">'keepElements'</span>] = {};
</code></pre>
<p><code>KeepAliveContextType['keepElements']</code> å°±è¿”å›äº† <code>keepElements</code> å±æ€§çš„ç±»å‹ã€‚</p>
<p>æ˜¯ä¸æ˜¯æ„Ÿè§‰tsè·Ÿç¼–ç¨‹ä¸€æ ·ã€‚</p>
<p>ç»§ç»­å¾€ä¸‹çœ‹ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> <span class="hljs-title class_">KeepAliveLayout</span>: <span class="hljs-variable constant_">FC</span>&lt;<span class="hljs-title class_">KeepAliveLayoutProps</span>&gt; = <span class="hljs-function">(<span class="hljs-params">props</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> { keepPaths, ...other } = props;

    <span class="hljs-keyword">const</span> { keepElements, dropByPath } = <span class="hljs-title function_">useContext</span>(<span class="hljs-title class_">KeepAliveContext</span>);

    <span class="hljs-keyword">return</span> (
        <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">KeepAliveContext.Provider</span> <span class="hljs-attr">value</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">keepPaths</span>, <span class="hljs-attr">keepElements</span>, <span class="hljs-attr">dropByPath</span> }} {<span class="hljs-attr">...other</span>} /&gt;</span></span>
    )
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">KeepAliveLayout</span>;
</code></pre>
<p>é¦–å…ˆä»çˆ¶ç»„ä»¶ä¸­ä¼ å…¥propsï¼Œå…¶ä¸­åŒ…æ‹¬å®šä¹‰çš„ <code>keepPaths</code>, ç„¶åä»useContext å–å‡ºå…¶ä»–å€¼ï¼Œç„¶åé€šè¿‡KeepAliveContext.Provider çš„value è¿›è¡Œè®¾ç½®ï¼Œè¿™æ ·å­ç»„ä»¶å°±èƒ½è·å–åˆ°è¿™äº›å€¼ã€‚</p>
<p>ç„¶åæš´éœ²ä¸€ä¸ª useKeepOutlet çš„ hookï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">useKeepOutlet</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> location = <span class="hljs-title function_">useLocation</span>();
    <span class="hljs-keyword">const</span> element = <span class="hljs-title function_">useOutlet</span>();

    <span class="hljs-keyword">const</span> { keepElements, keepPaths } = <span class="hljs-title function_">useContext</span>(<span class="hljs-title class_">KeepAliveContext</span>);
    <span class="hljs-keyword">const</span> isKeep = <span class="hljs-title function_">isKeepPath</span>(keepPaths, location.<span class="hljs-property">pathname</span>);

    <span class="hljs-keyword">if</span> (isKeep) {
        keepElements![location.<span class="hljs-property">pathname</span>] = element;
    }

    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;&gt;</span>
        {
            Object.entries(keepElements).map(([pathname, element]) =&gt; (
                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> 
                    <span class="hljs-attr">key</span>=<span class="hljs-string">{pathname}</span>
                    <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">height:</span> '<span class="hljs-attr">100</span>%', <span class="hljs-attr">width:</span> '<span class="hljs-attr">100</span>%', <span class="hljs-attr">position:</span> '<span class="hljs-attr">relative</span>', <span class="hljs-attr">overflow:</span> '<span class="hljs-attr">hidden</span> <span class="hljs-attr">auto</span>' }}
                    <span class="hljs-attr">className</span>=<span class="hljs-string">"keep-alive-page"</span>
                    <span class="hljs-attr">hidden</span>=<span class="hljs-string">{!matchPath(location.pathname,</span> <span class="hljs-attr">pathname</span>)}
                &gt;</span>
                    {element}
                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
            ))
        }
        {!isKeep &amp;&amp; element}
    <span class="hljs-tag">&lt;/&gt;</span></span>
}
</code></pre>
<p>ç”¨ useLocation æ‹¿åˆ°å½“å‰è·¯ç”±ï¼Œç”¨ useOutlet æ‹¿åˆ°å¯¹åº”çš„ç»„ä»¶ã€‚</p>
<p>åˆ¤æ–­ä¸‹å½“å‰è·¯ç”±æ˜¯å¦åœ¨éœ€è¦ keepalive çš„è·¯ç”±å†…ï¼Œæ˜¯çš„è¯å°±ä¿å­˜åˆ° keepElementsã€‚</p>
<p>ç„¶åæ¸²æŸ“æ‰€æœ‰çš„ keepElementsï¼Œå¦‚æœä¸åŒ¹é… matchPath å°±éšè—ã€‚</p>
<p>å¹¶ä¸”å¦‚æœå½“å‰è·¯ç”±ä¸åœ¨ keepPaths å†…ï¼Œå°±ç›´æ¥æ¸²æŸ“å¯¹åº”çš„ç»„ä»¶ï¼š  {!isKeep &amp;&amp; element} ã€‚</p>
<p>å…¶å®åŸç†æ¯”è¾ƒå®¹æ˜“çœ‹æ‡‚ï¼š<strong>åœ¨ context ä¸­ä¿å­˜æ‰€æœ‰éœ€è¦ keepalive çš„ç»„ä»¶ï¼Œå…¨éƒ¨æ¸²æŸ“å‡ºæ¥ï¼Œé€šè¿‡è·¯ç”±æ˜¯å¦åŒ¹é…æ¥åˆ‡æ¢å¯¹åº”ç»„ä»¶çš„æ˜¾ç¤ºéšè—ã€‚</strong></p>
<p>åœ¨ App.tsx é‡Œå¼•å…¥æµ‹è¯•ä¸‹ï¼š</p>
<p>åœ¨å¤–é¢åŒ…ä¸€å±‚ KeepAliveLayout ç»„ä»¶ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> <span class="hljs-title function_">App</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">KeepAliveLayout</span> <span class="hljs-attr">keepPaths</span>=<span class="hljs-string">{[</span>'/<span class="hljs-attr">bbb</span>', '/']}&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">RouterProvider</span> <span class="hljs-attr">router</span>=<span class="hljs-string">{router}/</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">KeepAliveLayout</span>&gt;</span></span>
    )
}
</code></pre>
<p><code>&lt;RouterProvider router={router}/&gt;</code>ä¼šä½œä¸º<code>children</code>ä¼ é€’åˆ°<code>KeepAliveLayout</code>ç»„ä»¶ä¸­ã€‚</p>
<p>ç„¶åæŠŠ useOutlet æ¢æˆ useKeepOutletï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> <span class="hljs-title function_">Layout</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-keyword">const</span> { pathname } = <span class="hljs-title function_">useLocation</span>();

    <span class="hljs-keyword">const</span> element = <span class="hljs-title function_">useKeepOutlet</span>()

    <span class="hljs-keyword">return</span> (
        <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>å½“å‰è·¯ç”±: {pathname}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
            { element }
            {/* <span class="hljs-tag">&lt;<span class="hljs-name">Outlet</span>/&gt;</span> */}
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
    )
}
</code></pre>
<h2 data-id="heading-3">æ€»ç»“</h2>
<p>è·¯ç”±åˆ‡æ¢ä¼šé”€æ¯å¯¹åº”çš„ç»„ä»¶ï¼Œä½†å¾ˆå¤šåœºæ™¯æˆ‘ä»¬å¸Œæœ›è·¯ç”±åˆ‡æ¢ç»„ä»¶ä¸é”€æ¯ï¼Œä¹Ÿå°±æ˜¯ keepaliveã€‚</p>
<p>react router å¹¶æ²¡æœ‰å®ç°è¿™ä¸ªåŠŸèƒ½ï¼Œéœ€è¦æˆ‘ä»¬è‡ªå·±åšã€‚</p>
<p>æˆ‘ä»¬åœ¨ context ä¸­ä¿å­˜æ‰€æœ‰éœ€è¦ keepalive çš„ç»„ä»¶ï¼Œç„¶åæ¸²æŸ“çš„æ—¶å€™å…¨éƒ¨æ¸²æŸ“å‡ºæ¥ï¼Œé€šè¿‡è·¯ç”±æ˜¯å¦åŒ¹é…æ¥åˆ‡æ¢æ˜¾ç¤ºéšè—ã€‚</p>
<p>è¿™æ ·å®ç°äº† keepaliveã€‚</p>
<p>è¿™ä¸ªåŠŸèƒ½æ˜¯ä¾èµ– React Router çš„ useLocationã€useOutletã€matchPath ç­‰ api å®ç°çš„ï¼Œå’Œè·¯ç”±åŠŸèƒ½å¯†ä¸å¯åˆ†ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[JavaScript é—­åŒ…å®æˆ˜ï¼šæ‰‹å†™é˜²æŠ–ä¸èŠ‚æµå‡½æ•°ï¼Œä¼˜åŒ–é«˜é¢‘äº‹ä»¶æ€§èƒ½]]></title>    <link>https://juejin.cn/post/7589445154533933108</link>    <guid>https://juejin.cn/post/7589445154533933108</guid>    <pubDate>2025-12-30T08:55:15.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589445154533933108" data-draft-id="7589386961649205283" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="JavaScript é—­åŒ…å®æˆ˜ï¼šæ‰‹å†™é˜²æŠ–ä¸èŠ‚æµå‡½æ•°ï¼Œä¼˜åŒ–é«˜é¢‘äº‹ä»¶æ€§èƒ½"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,é¢è¯•"/> <meta itemprop="datePublished" content="2025-12-30T08:55:15.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è¶…çº§èµ›äºšäºº_"/> <meta itemprop="url" content="https://juejin.cn/user/793196846923641"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            JavaScript é—­åŒ…å®æˆ˜ï¼šæ‰‹å†™é˜²æŠ–ä¸èŠ‚æµå‡½æ•°ï¼Œä¼˜åŒ–é«˜é¢‘äº‹ä»¶æ€§èƒ½
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/793196846923641/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è¶…çº§èµ›äºšäºº_
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-30T08:55:15.000Z" title="Tue Dec 30 2025 08:55:15 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    5
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨å‰ç«¯å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸ä¼šé‡åˆ°é«˜é¢‘è§¦å‘çš„äº‹ä»¶ï¼Œæ¯”å¦‚ï¼š</p>
<ul>
<li>è¾“å…¥æ¡† keyup æ—¶çš„æœç´¢å»ºè®®ï¼ˆç±»ä¼¼ç™¾åº¦ã€VS Code çš„æ™ºèƒ½è¡¥å…¨ï¼‰</li>
<li>çª—å£ resize æ—¶çš„å¸ƒå±€é‡æ–°è®¡ç®—</li>
<li>é¡µé¢æ»šåŠ¨æ—¶çš„æ‡’åŠ è½½æˆ–è¿”å›é¡¶éƒ¨æŒ‰é’®æ˜¾ç¤º</li>
<li>é¼ æ ‡ mousemove æ—¶çš„æ‹–æ‹½é¢„è§ˆ</li>
</ul>
<p>è¿™äº›äº‹ä»¶å¾€å¾€åœ¨çŸ­æ—¶é—´å†…è¢«è§¦å‘æ•°ç™¾ç”šè‡³ä¸Šåƒæ¬¡ï¼Œå¦‚æœæ¯æ¬¡éƒ½ç›´æ¥æ‰§è¡Œå¤æ‚çš„é€»è¾‘ï¼ˆå¦‚å‘ AJAX è¯·æ±‚ã€æ“ä½œ DOMã€è®¡ç®—å¸ƒå±€ï¼‰ï¼Œä¼šä¸¥é‡æ¶ˆè€—æµè§ˆå™¨èµ„æºï¼Œå¯¼è‡´é¡µé¢å¡é¡¿ã€æ‰å¸§ï¼Œç”šè‡³å´©æºƒã€‚</p>
<p>è§£å†³è¿™ç±»é—®é¢˜çš„æ ¸å¿ƒæ–¹æ¡ˆå°±æ˜¯<strong>å‡½æ•°é˜²æŠ–ï¼ˆdebounceï¼‰<strong>å’Œ</strong>å‡½æ•°èŠ‚æµï¼ˆthrottleï¼‰</strong> ï¼Œè€Œå®ƒä»¬çš„å®ç°éƒ½ç¦»ä¸å¼€ JavaScript çš„çµé­‚ç‰¹æ€§â€”â€”<strong>é—­åŒ…</strong>ã€‚</p>
<p>æœ¬æ–‡å°†ä»å®é™…åœºæ™¯å‡ºå‘ï¼Œè¯¦ç»†è®²è§£é˜²æŠ–å’ŒèŠ‚æµçš„åŸç†ã€åŒºåˆ«ã€æ‰‹åŠ¨å®ç°ï¼Œå¹¶æä¾›å®Œæ•´å¯è¿è¡Œçš„ HTML ç¤ºä¾‹ï¼Œå¸®åŠ©ä½ å½»åº•æŒæ¡è¿™ä¸€å‰ç«¯æ€§èƒ½ä¼˜åŒ–çš„å¿…å¤‡æŠ€èƒ½ã€‚</p>
<h2 data-id="heading-0">ä»€ä¹ˆæ˜¯é—­åŒ…ï¼Ÿä¸ºä»€ä¹ˆèƒ½ç”¨äºé˜²æŠ–èŠ‚æµï¼Ÿ</h2>
<p>é—­åŒ…æ˜¯æŒ‡å‡½æ•°èƒ½å¤Ÿâ€œè®°ä½â€å¹¶è®¿é—®å…¶è¯æ³•ä½œç”¨åŸŸä¸­çš„å˜é‡ï¼Œå³ä½¿å‡½æ•°åœ¨å¤–éƒ¨ä½œç”¨åŸŸä¹‹å¤–æ‰§è¡Œã€‚</p>
<p>åœ¨é˜²æŠ–å’ŒèŠ‚æµä¸­ï¼Œæˆ‘ä»¬éœ€è¦ï¼š</p>
<ul>
<li>ä¿å­˜å®šæ—¶å™¨ IDï¼ˆç”¨äºæ¸…é™¤æˆ–åˆ¤æ–­æ—¶é—´ï¼‰</li>
<li>è®°ä½ä¸Šä¸€æ¬¡æ‰§è¡Œçš„æ—¶é—´æˆ³</li>
<li>ä¿ç•™æ­£ç¡®çš„ this æŒ‡å‘å’Œå‚æ•°</li>
</ul>
<p>è¿™äº›å˜é‡å¿…é¡»åœ¨å¤šæ¬¡äº‹ä»¶è§¦å‘é—´â€œå­˜æ´»â€ä¸‹æ¥ï¼Œè€Œä¸èƒ½æ¯æ¬¡éƒ½é‡æ–°åˆ›å»ºâ€”â€”è¿™æ­£æ˜¯é—­åŒ…çš„ç”¨æ­¦ä¹‹åœ°ã€‚</p>
<h2 data-id="heading-1">åœºæ™¯ä¸€ï¼šæœç´¢è¾“å…¥æ¡†çš„ AJAX è¯·æ±‚ä¼˜åŒ–</h2>
<p>ç”¨æˆ·åœ¨æœç´¢æ¡†è¾“å…¥å…³é”®è¯æ—¶ï¼Œæˆ‘ä»¬å¸Œæœ›å®æ—¶æ˜¾ç¤ºæœç´¢å»ºè®®ï¼ˆå¦‚ç™¾åº¦è¾“å…¥â€œreactâ€æ—¶ä¸‹æ–¹å‡ºç°çš„å»ºè®®åˆ—è¡¨ï¼‰ã€‚</p>
<p>å¦‚æœä¸åšä»»ä½•å¤„ç†ï¼Œæ¯æ¬¡ keyup éƒ½ç«‹å³å‘é€è¯·æ±‚ï¼š</p>
<ul>
<li>ç”¨æˆ·è¾“å…¥â€œreactâ€äº”ä¸ªå­—ç¬¦ â†’ è§¦å‘ 5 æ¬¡è¯·æ±‚</li>
<li>ç½‘ç»œå¼€é”€å¤§ã€æœåŠ¡å™¨å‹åŠ›å¤§</li>
<li>ç”¨æˆ·ä½“éªŒå·®ï¼ˆå¿«é€Ÿè¾“å…¥æ—¶å»ºè®®é—ªçƒï¼‰</li>
</ul>
<p>ç†æƒ³æ•ˆæœæ˜¯ï¼šç”¨æˆ·åœæ­¢è¾“å…¥ 500ms åï¼Œæ‰å‘é€ä¸€æ¬¡è¯·æ±‚ã€‚</p>
<p>è¿™æ­£æ˜¯<strong>é˜²æŠ–</strong>çš„å…¸å‹åº”ç”¨åœºæ™¯ã€‚</p>
<h2 data-id="heading-2">å‡½æ•°é˜²æŠ–ï¼ˆdebounceï¼‰åŸç†ä¸å®ç°</h2>
<p><strong>é˜²æŠ–çš„æ ¸å¿ƒæ€æƒ³</strong>ï¼šä¸ç®¡äº‹ä»¶è§¦å‘å¤šå°‘æ¬¡ï¼Œæˆ‘åªå…³å¿ƒæœ€åä¸€æ¬¡ã€‚åœ¨æœ€åä¸€æ¬¡è§¦å‘åçš„ delay æ—¶é—´å†…å¦‚æœæ²¡æœ‰æ–°è§¦å‘ï¼Œæ‰çœŸæ­£æ‰§è¡Œå‡½æ•°ã€‚</p>
<p>JavaScript</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">debounce</span>(<span class="hljs-params">fn, delay</span>) {
  <span class="hljs-keyword">let</span> timer = <span class="hljs-literal">null</span>; <span class="hljs-comment">// é—­åŒ…ä¸­ä¿å­˜å®šæ—¶å™¨ ID</span>

  <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span>(<span class="hljs-params">...args</span>) {
    <span class="hljs-keyword">const</span> context = <span class="hljs-variable language_">this</span>;

    <span class="hljs-comment">// æ¯æ¬¡è§¦å‘æ—¶ï¼Œå…ˆæ¸…é™¤ä¸Šä¸€æ¬¡çš„å®šæ—¶å™¨</span>
    <span class="hljs-keyword">if</span> (timer) {
      <span class="hljs-built_in">clearTimeout</span>(timer);
    }

    <span class="hljs-comment">// é‡æ–°è®¾ç½®å®šæ—¶å™¨</span>
    timer = <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
      fn.<span class="hljs-title function_">apply</span>(context, args);
      timer = <span class="hljs-literal">null</span>; <span class="hljs-comment">// æ‰§è¡Œå®Œå¯å¯é€‰æ¸…ç†</span>
    }, delay);
  };
}
</code></pre>
<p>å…³é”®ç‚¹è§£æï¼š</p>
<ul>
<li>timer å˜é‡å®šä¹‰åœ¨ debounce å‡½æ•°ä½œç”¨åŸŸä¸­ï¼Œè¢«è¿”å›çš„å‡½æ•°â€œè®°ä½â€ï¼ˆé—­åŒ…ï¼‰ã€‚</li>
<li>æ¯æ¬¡äº‹ä»¶è§¦å‘éƒ½æ¸…é™¤æ—§å®šæ—¶å™¨ï¼Œé‡æ–°å¼€å§‹å€’è®¡æ—¶ã€‚</li>
<li>åªæœ‰åœ¨ delay æ—¶é—´å†…æ²¡æœ‰æ–°è§¦å‘æ—¶ï¼Œå®šæ—¶å™¨æ‰ä¼šæ‰§è¡Œ fnã€‚</li>
<li>ä½¿ç”¨ apply ä¿ç•™æ­£ç¡®çš„ this å’Œå‚æ•°ã€‚</li>
</ul>
<h2 data-id="heading-3">å‡½æ•°èŠ‚æµï¼ˆthrottleï¼‰åŸç†ä¸å®ç°</h2>
<p><strong>èŠ‚æµçš„æ ¸å¿ƒæ€æƒ³</strong>ï¼šåœ¨è§„å®šæ—¶é—´å†…ï¼Œæ— è®ºè§¦å‘å¤šå°‘æ¬¡ï¼Œåªæ‰§è¡Œä¸€æ¬¡ã€‚å¸¸ç”¨äºé™åˆ¶æ‰§è¡Œé¢‘ç‡ã€‚</p>
<p>å…¸å‹åœºæ™¯ï¼šé¡µé¢æ»šåŠ¨æ—¶åŠ è½½æ›´å¤šå†…å®¹ï¼ˆscroll äº‹ä»¶ï¼‰ï¼Œæˆ‘ä»¬å¸Œæœ›æ¯ 500ms æœ€å¤šæ£€æŸ¥ä¸€æ¬¡æ˜¯å¦åˆ°è¾¾åº•éƒ¨ã€‚</p>
<p>JavaScript</p>
<pre><code class="hljs language-ini" lang="ini">function throttle(fn, delay) {
  let <span class="hljs-attr">last</span> = <span class="hljs-number">0</span><span class="hljs-comment">; // é—­åŒ…ä¸­è®°å½•ä¸Šæ¬¡æ‰§è¡Œæ—¶é—´</span>

  return function(...args) {
    const <span class="hljs-attr">context</span> = this<span class="hljs-comment">;</span>
    const <span class="hljs-attr">now</span> = Date.now()<span class="hljs-comment">;</span>

    // å¦‚æœè·ç¦»ä¸Šæ¬¡æ‰§è¡Œä¸è¶³ delayï¼Œåˆ™ä¸æ‰§è¡Œ
    if (now - last &lt; delay) {
      return<span class="hljs-comment">;</span>
    }

    // æ‰§è¡Œå¹¶æ›´æ–° last
    <span class="hljs-attr">last</span> = now<span class="hljs-comment">;</span>
    fn.apply(context, args)<span class="hljs-comment">;</span>
  }<span class="hljs-comment">;</span>
}
</code></pre>
<p>æ›´å¸¸è§çš„<strong>æ—¶é—´æˆ³ + å®šæ—¶å™¨æ··åˆç‰ˆ</strong>ï¼ˆæ”¯æŒå°¾éƒ¨æ‰§è¡Œï¼‰ï¼š</p>
<p>JavaScript</p>
<pre><code class="hljs language-ini" lang="ini">function throttle(fn, delay) {
  let <span class="hljs-attr">last</span> = <span class="hljs-number">0</span><span class="hljs-comment">;</span>
  let <span class="hljs-attr">timer</span> = null<span class="hljs-comment">;</span>

  return function(...args) {
    const <span class="hljs-attr">context</span> = this<span class="hljs-comment">;</span>
    const <span class="hljs-attr">now</span> = Date.now()<span class="hljs-comment">;</span>

    // å¦‚æœè¿˜åœ¨å†·å´æœŸï¼Œä¸”æ²¡æœ‰å®šæ—¶å™¨ï¼ˆé¿å…é‡å¤è®¾ç½®ï¼‰
    if (now - last &lt; delay) {
      clearTimeout(timer)<span class="hljs-comment">;</span>
      <span class="hljs-attr">timer</span> = setTimeout(() =&gt; {
        <span class="hljs-attr">last</span> = now<span class="hljs-comment">;</span>
        fn.apply(context, args)<span class="hljs-comment">;</span>
      }, delay)<span class="hljs-comment">;</span>
    } else {
      // ç«‹å³æ‰§è¡Œï¼ˆé¢†å…ˆæ‰§è¡Œï¼‰
      <span class="hljs-attr">last</span> = now<span class="hljs-comment">;</span>
      fn.apply(context, args)<span class="hljs-comment">;</span>
    }
  }<span class="hljs-comment">;</span>
}
</code></pre>
<p>è¿™ç§å®ç°å…¼é¡¾äº†â€œå›ºå®šé¢‘ç‡æ‰§è¡Œâ€å’Œâ€œåœæ­¢è§¦å‘åä»èƒ½æ‰§è¡Œæœ€åä¸€æ¬¡â€ã€‚</p>
<h2 data-id="heading-4">é˜²æŠ– vs èŠ‚æµï¼šå¦‚ä½•é€‰æ‹©ï¼Ÿ</h2>






























<table><thead><tr><th>ç‰¹æ€§</th><th>é˜²æŠ– (debounce)</th><th>èŠ‚æµ (throttle)</th></tr></thead><tbody><tr><td>æ‰§è¡Œæ—¶æœº</td><td>äº‹ä»¶åœæ­¢è§¦å‘å delay æ—¶é—´æ‰§è¡Œä¸€æ¬¡</td><td>æ¯éš” delay æ—¶é—´æ‰§è¡Œä¸€æ¬¡</td></tr><tr><td>å…¸å‹åœºæ™¯</td><td>æœç´¢è¾“å…¥ã€è¡¨å•æäº¤éªŒè¯</td><td>æ»šåŠ¨åŠ è½½ã€é¼ æ ‡è·Ÿéšã€å°„å‡»æ¸¸æˆå°„é€Ÿ</td></tr><tr><td>ç”¨æˆ·ä½“éªŒ</td><td>ç­‰å¾…ç”¨æˆ·â€œæƒ³å¥½äº†â€å†å“åº”</td><td>æŒç»­æ“ä½œæ—¶ä¿æŒæµç•…å“åº”</td></tr><tr><td>å®ç°å¤æ‚åº¦</td><td>ç›¸å¯¹ç®€å•ï¼ˆsetTimeoutï¼‰</td><td>ç¨å¤æ‚ï¼ˆæ—¶é—´æˆ³æˆ–å®šæ—¶å™¨æ··åˆï¼‰</td></tr></tbody></table>
<p>è®°å¿†å£è¯€ï¼š</p>
<ul>
<li>éœ€è¦â€œæœ€åä¸€æ¬¡â€æ‰§è¡Œ â†’ ç”¨é˜²æŠ–ï¼ˆå¦‚æœç´¢ï¼‰</li>
<li>éœ€è¦â€œæŒç»­ä½†é™é¢‘â€æ‰§è¡Œ â†’ ç”¨èŠ‚æµï¼ˆå¦‚æ»šåŠ¨ï¼‰</li>
</ul>
<h2 data-id="heading-5">å®Œæ•´å¯è¿è¡Œç¤ºä¾‹</h2>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªå®Œæ•´çš„ HTML æ–‡ä»¶ï¼ŒåŒ…å«ä¸‰ä¸ªè¾“å…¥æ¡†ï¼š</p>
<ul>
<li>ç¬¬ä¸€ä¸ªï¼šæ— ä¼˜åŒ–ï¼Œæ¯æ¬¡ keyup éƒ½å‘è¯·æ±‚</li>
<li>ç¬¬äºŒä¸ªï¼šé˜²æŠ–ä¼˜åŒ–ï¼Œåœæ­¢è¾“å…¥ 500ms åå‘ä¸€æ¬¡è¯·æ±‚</li>
<li>ç¬¬ä¸‰ä¸ªï¼šèŠ‚æµä¼˜åŒ–ï¼Œæ¯ 500ms æœ€å¤šå‘ä¸€æ¬¡è¯·æ±‚</li>
</ul>
<p>HTML</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"zh-CN"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>é˜²æŠ–ä¸èŠ‚æµæ¼”ç¤º<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
    <span class="hljs-selector-tag">body</span> { <span class="hljs-attribute">font-family</span>: Arial, sans-serif; <span class="hljs-attribute">padding</span>: <span class="hljs-number">20px</span>; }
    <span class="hljs-selector-tag">input</span> { <span class="hljs-attribute">display</span>: block; <span class="hljs-attribute">margin</span>: <span class="hljs-number">20px</span> <span class="hljs-number">0</span>; <span class="hljs-attribute">padding</span>: <span class="hljs-number">10px</span>; <span class="hljs-attribute">width</span>: <span class="hljs-number">300px</span>; <span class="hljs-attribute">font-size</span>: <span class="hljs-number">16px</span>; }
    <span class="hljs-selector-tag">label</span> { <span class="hljs-attribute">font-weight</span>: bold; }
  </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span>æ— ä¼˜åŒ–ï¼ˆæ¯æ¬¡è¾“å…¥éƒ½è¯·æ±‚ï¼‰<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"undebounce"</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"å¿«é€Ÿè¾“å…¥è§‚å¯Ÿæ§åˆ¶å°"</span> /&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span>é˜²æŠ–ï¼ˆåœæ­¢è¾“å…¥500msåè¯·æ±‚ï¼‰<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"debounce"</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"è¾“å…¥å®Œæˆåæ‰ä¼šè¯·æ±‚"</span> /&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span>èŠ‚æµï¼ˆæ¯500msæœ€å¤šè¯·æ±‚ä¸€æ¬¡ï¼‰<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"throttle"</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"æŒç»­è¾“å…¥æ—¶ä¼šå®šæœŸè¯·æ±‚"</span> /&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

  <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">ajax</span>(<span class="hljs-params">content</span>) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ajax request:'</span>, content);
    }

    <span class="hljs-comment">// é˜²æŠ–å®ç°</span>
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">debounce</span>(<span class="hljs-params">fn, delay</span>) {
      <span class="hljs-keyword">let</span> timer = <span class="hljs-literal">null</span>;
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span>(<span class="hljs-params">...args</span>) {
        <span class="hljs-keyword">const</span> context = <span class="hljs-variable language_">this</span>;
        <span class="hljs-keyword">if</span> (timer) <span class="hljs-built_in">clearTimeout</span>(timer);
        timer = <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
          fn.<span class="hljs-title function_">apply</span>(context, args);
        }, delay);
      };
    }

    <span class="hljs-comment">// èŠ‚æµå®ç°ï¼ˆæ—¶é—´æˆ³ + å®šæ—¶å™¨æ··åˆç‰ˆï¼‰</span>
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">throttle</span>(<span class="hljs-params">fn, delay</span>) {
      <span class="hljs-keyword">let</span> last = <span class="hljs-number">0</span>;
      <span class="hljs-keyword">let</span> timer = <span class="hljs-literal">null</span>;
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span>(<span class="hljs-params">...args</span>) {
        <span class="hljs-keyword">const</span> context = <span class="hljs-variable language_">this</span>;
        <span class="hljs-keyword">const</span> now = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();
        <span class="hljs-keyword">if</span> (now - last &lt; delay) {
          <span class="hljs-built_in">clearTimeout</span>(timer);
          timer = <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
            last = now;
            fn.<span class="hljs-title function_">apply</span>(context, args);
          }, delay);
        } <span class="hljs-keyword">else</span> {
          last = now;
          fn.<span class="hljs-title function_">apply</span>(context, args);
        }
      };
    }

    <span class="hljs-keyword">const</span> inputA = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'undebounce'</span>);
    <span class="hljs-keyword">const</span> inputB = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'debounce'</span>);
    <span class="hljs-keyword">const</span> inputC = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'throttle'</span>);

    <span class="hljs-keyword">const</span> debouncedAjax = <span class="hljs-title function_">debounce</span>(ajax, <span class="hljs-number">500</span>);
    <span class="hljs-keyword">const</span> throttledAjax = <span class="hljs-title function_">throttle</span>(ajax, <span class="hljs-number">500</span>);

    inputA.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'keyup'</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) {
      <span class="hljs-title function_">ajax</span>(e.<span class="hljs-property">target</span>.<span class="hljs-property">value</span>);
    });

    inputB.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'keyup'</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) {
      <span class="hljs-title function_">debouncedAjax</span>(e.<span class="hljs-property">target</span>.<span class="hljs-property">value</span>);
    });

    inputC.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'keyup'</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) {
      <span class="hljs-title function_">throttledAjax</span>(e.<span class="hljs-property">target</span>.<span class="hljs-property">value</span>);
    });
  </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<p>æ‰“å¼€æµè§ˆå™¨æ§åˆ¶å°ï¼Œåˆ†åˆ«åœ¨ä¸‰ä¸ªè¾“å…¥æ¡†å¿«é€Ÿè¾“å…¥ï¼Œä½ ä¼šæ¸…æ™°çœ‹åˆ°ä¸‰è€…çš„å·¨å¤§å·®å¼‚ã€‚</p>
<h2 data-id="heading-6">ç°ä»£æ¡†æ¶ä¸­çš„åº”ç”¨</h2>
<p>è™½ç„¶åŸç”Ÿ JS éœ€è¦æ‰‹å†™ï¼Œä½†ç°ä»£æ¡†æ¶/åº“å·²å†…ç½®ï¼š</p>
<ul>
<li>Lodashï¼š_.debounce(fn, wait) å’Œ _.throttle(fn, wait)</li>
<li>Vueï¼š@input.debounce="500ms"</li>
<li>Reactï¼šå¯é…åˆ useCallback + useRef å®ç°ï¼Œæˆ–ä½¿ç”¨ç¬¬ä¸‰æ–¹å¦‚ use-debounce</li>
</ul>
<p>ä½†ç†è§£åº•å±‚åŸç†ï¼Œèƒ½è®©ä½ åœ¨å¤æ‚åœºæ™¯ä¸‹è‡ªå®šä¹‰è¡Œä¸ºï¼ˆå¦‚ç«‹å³æ‰§è¡Œé€‰é¡¹ã€å–æ¶ˆåŠŸèƒ½ç­‰ï¼‰ã€‚</p>
<h2 data-id="heading-7">æœ€ä½³å®è·µå»ºè®®</h2>
<ol>
<li><strong>æœç´¢è¾“å…¥</strong> â†’ é˜²æŠ–ï¼ˆèŠ‚çº¦èµ„æºï¼Œç”¨æˆ·è¾“å…¥å®Œæˆåå“åº”ï¼‰</li>
<li><strong>æ»šåŠ¨äº‹ä»¶</strong> â†’ èŠ‚æµï¼ˆä¿æŒæµç•…ï¼‰</li>
<li><strong>æŒ‰é’®é˜²æ­¢é‡å¤ç‚¹å‡»</strong> â†’ é˜²æŠ–ï¼ˆdelay è®¾ä¸º 1000msï¼‰</li>
<li><strong>resize/scroll è®¡ç®—å¤æ‚å¸ƒå±€</strong> â†’ èŠ‚æµ</li>
<li><strong>æ‹–æ‹½è¿‡ç¨‹ä¸­å®æ—¶é¢„è§ˆ</strong> â†’ èŠ‚æµ</li>
</ol>
<h2 data-id="heading-8">ç»“è¯­</h2>
<p>é—­åŒ…æ˜¯ JavaScript æœ€å¼ºå¤§çš„ç‰¹æ€§ä¹‹ä¸€ï¼Œè€Œé˜²æŠ–å’ŒèŠ‚æµåˆ™æ˜¯å®ƒåœ¨æ€§èƒ½ä¼˜åŒ–é¢†åŸŸæœ€ç»å…¸çš„åº”ç”¨ä½“ç°ã€‚</p>
<p>é€šè¿‡åˆç†ä½¿ç”¨é˜²æŠ–å’ŒèŠ‚æµï¼Œæˆ‘ä»¬å¯ä»¥ï¼š</p>
<ul>
<li>å¤§å¹…å‡å°‘ä¸å¿…è¦çš„ç½‘ç»œè¯·æ±‚å’Œè®¡ç®—</li>
<li>æå‡é¡µé¢å“åº”é€Ÿåº¦å’Œæµç•…åº¦</li>
<li>æ”¹å–„ç”¨æˆ·ä½“éªŒ</li>
<li>é™ä½æœåŠ¡å™¨å‹åŠ›</li>
</ul>
<p>æ— è®ºä½ æ˜¯é¢è¯•è¢«é—®â€œæ‰‹å†™é˜²æŠ–èŠ‚æµâ€ï¼Œè¿˜æ˜¯å®é™…é¡¹ç›®ä¸­é‡åˆ°å¡é¡¿é—®é¢˜ï¼Œè¿™ä¸¤ä¸ªå‡½æ•°éƒ½æ˜¯ä½ å·¥å…·ç®±ä¸­ä¸å¯æˆ–ç¼ºçš„åˆ©å™¨ã€‚</p>
<p>å»ºè®®ç«‹å³å¤åˆ¶ä¸Šé¢çš„å®Œæ•´ç¤ºä¾‹åˆ°æœ¬åœ°è¿è¡Œï¼Œäº²èº«ä½“éªŒä¸‰è€…çš„å·®å¼‚â€”â€”ç†è®ºç»“åˆå®è·µï¼Œä½ æ‰èƒ½çœŸæ­£æŒæ¡ã€‚</p>
<p>å‰ç«¯æ€§èƒ½ä¼˜åŒ–ï¼Œä»ç†è§£é—­åŒ…å¼€å§‹ï¼Œä»æ‰‹å†™é˜²æŠ–èŠ‚æµèµ·æ­¥ã€‚æ„¿ä½ çš„é¡µé¢æ°¸è¿œä¸æ»‘æµç•…ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ğŸ¥¯2025 å¹´ç»ˆæé¿å‘æŒ‡å—ï¼šSpring Boot 2.7 + 3.2 æ··åˆé›†ç¾¤çš„ Redis + OAuth2 åºåˆ—åŒ–è¡€æ³ªå²]]></title>    <link>https://juejin.cn/post/7589250237069639690</link>    <guid>https://juejin.cn/post/7589250237069639690</guid>    <pubDate>2025-12-30T09:50:34.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589250237069639690" data-draft-id="7589474656874627082" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ğŸ¥¯2025 å¹´ç»ˆæé¿å‘æŒ‡å—ï¼šSpring Boot 2.7 + 3.2 æ··åˆé›†ç¾¤çš„ Redis + OAuth2 åºåˆ—åŒ–è¡€æ³ªå²"/> <meta itemprop="keywords" content="åç«¯,Java,Spring Cloud"/> <meta itemprop="datePublished" content="2025-12-30T09:50:34.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç”¨æˆ·352180245475"/> <meta itemprop="url" content="https://juejin.cn/user/156576846710315"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ğŸ¥¯2025 å¹´ç»ˆæé¿å‘æŒ‡å—ï¼šSpring Boot 2.7 + 3.2 æ··åˆé›†ç¾¤çš„ Redis + OAuth2 åºåˆ—åŒ–è¡€æ³ªå²
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/156576846710315/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç”¨æˆ·352180245475
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-30T09:50:34.000Z" title="Tue Dec 30 2025 09:50:34 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æœ‰æ²¡æœ‰é‡åˆ°è¿‡è¿™ç§äº‹ï¼šè®¤è¯ä¸­å¿ƒä¸æ•¢åŠ¨ï¼ˆæ€•å‡çº§ç‚¸ï¼‰ï¼Œä¸šåŠ¡æœåŠ¡å´å…¨å‡åˆ° Boot 3.2ï¼Œç»“æœ Redis å…±äº«æ•°æ®æˆäº†â€œæˆ˜åœºâ€ï¼Ÿ æˆ‘è¸©äº†ä¸€ä¸ªæœˆçš„å‘ï¼Œä» Jackson å¼‚å¸¸ç‹‚è½°æ»¥ç‚¸ï¼Œåˆ° Redis å¯†ç ç‰¹æ®Šç¬¦å·é—¹å‰§ï¼Œå†åˆ°è„æ•°æ®æš—æ€â€¦â€¦ä»Šå¤©æŠŠå…¨è¿‡ç¨‹å†™æˆè¿™ç¯‡åšå®¢ï¼Œè½»æ¾æ´»æ³¼ç‰ˆï¼Œä¿è¯ä½ çœ‹å®Œç¬‘ç€å°±æŠŠå‘é¿å¼€ï¼</p>
<h3 data-id="heading-0">ä¸ºä»€ä¹ˆæˆ‘ä¼šæ‰è¿›è¿™ä¸ªå¤§å‘ï¼Ÿ</h3>
<p>ç®€å•è¯´ï¼šå…¬å¸è®¤è¯ä¸­å¿ƒç”¨ Boot 2.7 + è€ Authorization Serverï¼ˆ0.2.3/0.4.xï¼‰ï¼Œç¨³å¦‚è€ç‹—ï¼Œç»´æŠ¤åˆ° 2028 å¹´ã€‚ ä¸šåŠ¡å¾®æœåŠ¡å…¨å‡ Boot 3.2ï¼Œäº«å— VirtualThreadã€æ–°ç‰¹æ€§ã€‚ å…±äº« Redis å­˜ Session + OAuth2Authorization â†’ åºåˆ—åŒ–ä¸å…¼å®¹ â†’ å…¨çº¿çˆ†ç‚¸ï¼</p>
<p>æˆ‘å½“æ—¶æƒ³ï¼šâ€œä¸å°±ä¸ªåºåˆ—åŒ–å—ï¼ŒåŠ å‡ ä¸ª Jackson Module ä¸å°±å®Œäº†ï¼Ÿâ€ ç»“æœâ€¦â€¦ä¸€ä¸ªæœˆåæˆ‘æ‰çˆ¬å‡ºæ¥ğŸ˜‚</p>
<h3 data-id="heading-1">æˆ‘åˆ°åº•å‘ç°äº†å“ªäº›é¬¼ç•œé—®é¢˜ï¼Ÿ</h3>
<ol>
<li>
<p>Jackson å¼‚å¸¸è¿ç¯æ€</p>
<ul>
<li>Cannot construct instance of SimpleGrantedAuthorityï¼ˆGrantedAuthority å˜ record äº†ï¼‰</li>
<li>Unrecognized field "settings"ï¼ˆè€ç‰ˆæœ¬é—ç•™å­—æ®µï¼‰</li>
<li>Cannot construct instance of ClientSettings/TokenSettingsï¼ˆæ— é»˜è®¤æ„é€ å‡½æ•°ï¼‰</li>
<li>The token generator failed to generate the access tokenï¼ˆsettings ä¸º nullï¼Œæœ€éšæ™¦çš„å‘ï¼ï¼‰</li>
</ul>
</li>
<li>
<p>NPE ä¸ null ç‹‚é­”</p>
<ul>
<li>tokens ä¸º null â†’ getAccessToken() NPE</li>
<li>attributes.putAll(null) â†’ HashMap NPE</li>
<li>GenericJackson2JsonRedisSerializer åŠ  "value" åŒ…è£…ï¼Œå¯¼è‡´æµ‹è¯•å’Œç”Ÿäº§è¡Œä¸ºä¸ä¸€è‡´</li>
</ul>
</li>
<li>
<p>åˆ·æ–°ä»¤ç‰Œå¼‚å¸¸</p>
<ul>
<li>Type id handling not implemented for java.lang.Object</li>
<li>Unrecognized field "settings"</li>
<li>Problem deserializing 'setterless' property</li>
<li>OAuth2AuthenticationException: The token generator failed</li>
</ul>
</li>
<li>
<p>ç»ˆæ Bossï¼šè„æ•°æ®</p>
<ul>
<li>Redis é‡Œæ··è¿› Boot 3.2 å†™çš„æ•°æ®ï¼ˆattributes æœ‰ "java.security.Principal" keyï¼‰</li>
<li>Boot 2.7 è¯»åˆ°ç›´æ¥åè¡€</li>
</ul>
</li>
</ol>
<h3 data-id="heading-2">æˆ‘æ˜¯æ€ä¹ˆä¸€æ­¥æ­¥çˆ¬å‡ºæ¥çš„ï¼Ÿï¼ˆè§£å†³è¿‡ç¨‹è¶…æç¬‘ï¼‰</h3>
<ol>
<li>
<p><strong>Jackson è¡¥ä¸å¤§æˆ˜</strong> åŠ äº† SecurityJackson2Moduleã€OAuth2LegacyJacksonModule å¤„ç†ç‰¹æ®Šç±»ã€‚ å†™äº†è‡ªå®šä¹‰ Deserializerï¼Œæ‰‹åŠ¨å¡«å…… tokensï¼ˆå› ä¸ºè€ç‰ˆæœ¬æ²¡æœ‰ setterï¼‰ã€‚ visibility é…ç½® FIELD ANY è®© Jackson çœ‹åˆ° private å­—æ®µã€‚</p>
</li>
<li>
<p><strong>NPE çŒæ€æ—¶åˆ»</strong> attributes åˆ¤ nullï¼ŒauthorizationGrantType åˆ¤ nullã€‚ å‘ç° GenericJackson2JsonRedisSerializer ä¼šåŠ  "value" åŒ…è£… â†’ æµ‹è¯•è¦ç”¨ serializer.serialize() å­˜æ•°æ®ã€‚</p>
</li>
<li>
<p>è‡ªå®šä¹‰ Provider åï¼Œ<strong>ç§»é™¤é»˜è®¤çš„Provider</strong></p>
</li>
<li>
<p>è„æ•°æ®å¤§æ¸…æ´—</p>
<p>ä¸€æ¡å‘½ä»¤è§£å†³ 90% é—®é¢˜ï¼š</p>
<p>Bash</p>
<pre><code class="hljs language-css" lang="css">Â redis-cli <span class="hljs-attr">--scan</span> <span class="hljs-attr">--pattern</span> "*:token::*<span class="hljs-string">" | xargs redis-cli del
</span></code></pre>
<p>æ¸…ç†å®Œé‡æ–°ç™»å½•ï¼Œä¸–ç•Œå®‰é™äº†ğŸ˜‚</p>
</li>
</ol>
<h3 data-id="heading-3">ç»ˆææ— æ•Œé…ç½®ï¼ˆå¤åˆ¶å³ç”¨ï¼Œ2025 å¹´è€é¡¹ç›®æ•‘æ˜Ÿï¼‰</h3>
<ul>
<li><strong>PublicJsonRedisSerializer</strong>:springboot3ä¸springboot2éƒ½ä½¿ç”¨è¿™ä¸ªç±»ï¼ŒSecurityå…¬å…± JSON åºåˆ—åŒ–å™¨</li>
</ul>
<pre><code class="hljs language-arduino" lang="arduino">Â <span class="hljs-keyword">import</span> com.fasterxml.jackson.annotation.JsonTypeInfo;
Â <span class="hljs-keyword">import</span> com.fasterxml.jackson.databind.DeserializationFeature;
Â <span class="hljs-keyword">import</span> com.fasterxml.jackson.databind.ObjectMapper;
Â <span class="hljs-keyword">import</span> com.fasterxml.jackson.databind.SerializationFeature;
Â <span class="hljs-keyword">import</span> com.fasterxml.jackson.databind.jsontype.BasicPolymorphicTypeValidator;
Â <span class="hljs-keyword">import</span> com.fasterxml.jackson.databind.<span class="hljs-keyword">module</span>.SimpleModule;
Â <span class="hljs-keyword">import</span> org.springframework.context.annotation.Bean;
Â <span class="hljs-keyword">import</span> org.springframework.context.annotation.Configuration;
Â <span class="hljs-keyword">import</span> org.springframework.data.redis.serializer.GenericJackson2JsonRedisSerializer;
Â <span class="hljs-keyword">import</span> org.springframework.security.oauth2.server.authorization.OAuth2Authorization;
Â â€‹
Â @Configuration
Â <span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PublicJsonRedisSerializer</span> {
Â â€‹
Â  Â  Â <span class="hljs-comment">/**
Â  Â  Â  * å…¬å…± JSON åºåˆ—åŒ–å™¨ï¼ˆæˆ‘ä»¬æ‰“ç£¨ä¸‡å¹´çš„ç»ˆæç‰ˆï¼‰
Â  Â  Â  * åå­—å« publicJsonRedisSerializerï¼Œæ‰€æœ‰åœ°æ–¹ç»Ÿä¸€ç”¨è¿™ä¸ª
Â  Â  Â  */</span>
Â  Â  Â @<span class="hljs-function">Bean
Â  Â  Â <span class="hljs-keyword">public</span> GenericJackson2JsonRedisSerializer <span class="hljs-title">publicJsonRedisSerializer</span><span class="hljs-params">()</span> </span>{
Â  Â  Â  Â  Â ObjectMapper objectMapper = <span class="hljs-keyword">new</span> <span class="hljs-built_in">ObjectMapper</span>();
Â â€‹
Â  Â  Â  Â  Â <span class="hljs-comment">// Java8 æ—¶é—´æ”¯æŒ</span>
Â  Â  Â  Â  Â objectMapper.<span class="hljs-built_in">registerModule</span>(<span class="hljs-keyword">new</span> <span class="hljs-built_in">JavaTimeModule</span>());
Â  Â  Â  Â  Â objectMapper.<span class="hljs-built_in">disable</span>(SerializationFeature.WRITE_DATES_AS_TIMESTAMPS);
Â â€‹
Â  Â  Â  Â  Â SimpleModule <span class="hljs-keyword">module</span> = <span class="hljs-keyword">new</span> <span class="hljs-built_in">SimpleModule</span>(<span class="hljs-string">"OAuth2AuthorizationModule"</span>);
Â  Â  Â  Â  Â <span class="hljs-keyword">module</span>.<span class="hljs-built_in">addDeserializer</span>(OAuth2Authorization.<span class="hljs-keyword">class</span>, <span class="hljs-keyword">new</span> <span class="hljs-built_in">OAuth2AuthorizationDeserializer</span>());
Â  Â  Â  Â  Â objectMapper.<span class="hljs-built_in">registerModule</span>(<span class="hljs-keyword">module</span>);
Â â€‹
Â  Â  Â  Â  Â <span class="hljs-comment">// å…¨å±€å¿½ç•¥æœªçŸ¥å­—æ®µï¼ˆæ²»æ„ˆå†å²è„æ•°æ®ï¼‰</span>
Â  Â  Â  Â  Â objectMapper.<span class="hljs-built_in">configure</span>(com.fasterxml.jackson.databind.DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES, <span class="hljs-literal">false</span>);
Â  Â  Â  Â  Â objectMapper.<span class="hljs-built_in">configure</span>(DeserializationFeature.READ_UNKNOWN_ENUM_VALUES_AS_NULL, <span class="hljs-literal">true</span>);
Â  Â  Â  Â  Â objectMapper.<span class="hljs-built_in">registerModule</span>(<span class="hljs-keyword">new</span> <span class="hljs-built_in">SecurityJackson2Module</span>());
Â  Â  Â  Â  Â objectMapper.<span class="hljs-built_in">registerModule</span>(<span class="hljs-keyword">new</span> <span class="hljs-built_in">OAuth2LegacyJacksonModule</span>());
Â  Â  Â  Â  Â <span class="hljs-comment">// å®‰å…¨çš„å¤šæ€æ”¯æŒï¼ˆBoot 3 æ¨èå†™æ³•ï¼‰</span>
Â  Â  Â  Â  Â objectMapper.<span class="hljs-built_in">activateDefaultTyping</span>(
Â  Â  Â  Â  Â  Â  Â  Â  Â BasicPolymorphicTypeValidator.<span class="hljs-built_in">builder</span>()
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â   .<span class="hljs-built_in">allowIfBaseType</span>(Object.<span class="hljs-keyword">class</span>)
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â   .<span class="hljs-built_in">build</span>(),
Â  Â  Â  Â  Â  Â  Â  Â  Â ObjectMapper.DefaultTyping.NON_FINAL,
Â  Â  Â  Â  Â  Â  Â  Â  Â JsonTypeInfo.As.PROPERTY
Â  Â  Â  Â   );
Â â€‹
Â  Â  Â  Â  Â <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">GenericJackson2JsonRedisSerializer</span>(objectMapper);
Â  Â   }
Â }
Â â€‹
</code></pre>
<p>RedisTemplate å¼ºåˆ¶ç”¨å®ƒï¼ŒOAuth2AuthorizationService ä¹Ÿå¼ºåˆ¶ç”¨å®ƒã€‚</p>
<ul>
<li>
<p>OAuth2AuthorizationDeserializer</p>
<p>å› ä¸º spring-security-oauth2-authorization-server 0.2.3 ç‰ˆæœ¬çš„ååºåˆ—åŒ–è®¾è®¡å¤ªâ€œåäººç±»â€äº†ï¼ŒJackson é»˜è®¤æ–¹å¼æ ¹æœ¬è¯»ä¸å‡ºæ¥å®Œæ•´çš„ OAuth2Authorization å¯¹è±¡ï¼Œå°¤å…¶æ˜¯ accessTokenã€refreshToken ç­‰å…³é”® token ä¼šä¸¢å¤±ï¼Œå¯¼è‡´ getAccessToken() è¿”å› nullï¼Œè¿›è€Œå¼•å‘ NPE æˆ– introspect å¤±è´¥ã€‚</p>
<p><strong>æ ¸å¿ƒé—®é¢˜ï¼ˆè€ç‰ˆæœ¬ 0.2.3 çš„â€œå‘ç‹è®¾è®¡â€ï¼‰</strong></p>
<ul>
<li>
<p>JSON æ ¼å¼æ˜¯ç‹¬ç«‹çš„å­—æ®µ</p>
<pre><code class="hljs language-perl" lang="perl">Â {
Â  Â <span class="hljs-string">"accessToken"</span>: { <span class="hljs-string">"@class"</span>: <span class="hljs-string">"OAuth2Authorization$Token"</span>, <span class="hljs-string">"token"</span>: { ... } },
Â  Â <span class="hljs-string">"refreshToken"</span>: { ... }
Â }
</code></pre>
</li>
</ul>

<ul>
<li>
<p>ç±»ç»“æ„å´æ˜¯ private final tokens Map</p>
<pre><code class="hljs language-swift" lang="swift">Â <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">Map</span>&lt;<span class="hljs-type">Class</span>&lt;? extends <span class="hljs-type">OAuth2Token</span>&gt;, <span class="hljs-type">Token</span>&lt;?&gt;&gt; tokens <span class="hljs-operator">=</span> new <span class="hljs-type">HashMap</span>&lt;&gt;();
Â <span class="hljs-comment">// æ²¡æœ‰ public setAccessToken() / setRefreshToken()</span>
Â <span class="hljs-comment">// å”¯ä¸€åˆæ³•å¡«å……æ–¹å¼æ˜¯ Builder.token(...) â†’ build()</span>
</code></pre>
</li>
</ul>

<ul>
<li>
<p>Jackson é»˜è®¤è¡Œä¸º</p>
<ul>
<li>çœ‹åˆ° "accessToken" å­—æ®µï¼Œä½†ç±»é‡Œæ²¡æœ‰å¯¹åº”çš„ setter â†’ å¿½ç•¥ï¼</li>
<li>tokens æ˜¯ private final â†’ é»˜è®¤ä¸å¡«å……</li>
<li>ç»“æœï¼šååºåˆ—åŒ–å tokens ä¸ºç©º â†’ getAccessToken()/getRefreshToken() å…¨æ˜¯ null â†’ ä¸šåŠ¡çˆ†ç‚¸</li>
</ul>
</li>
</ul>
<p><strong>å®Œæ•´ä»£ç </strong></p>
<pre><code class="hljs language-ini" lang="ini">Â import com.fasterxml.jackson.core.JsonParser<span class="hljs-comment">;</span>
Â import com.fasterxml.jackson.databind.DeserializationContext<span class="hljs-comment">;</span>
Â import com.fasterxml.jackson.databind.JsonNode<span class="hljs-comment">;</span>
Â import com.fasterxml.jackson.databind.ObjectMapper<span class="hljs-comment">;</span>
Â import com.fasterxml.jackson.databind.deser.std.StdDeserializer<span class="hljs-comment">;</span>
Â import org.springframework.security.oauth2.core.AuthorizationGrantType<span class="hljs-comment">;</span>
Â import org.springframework.security.oauth2.core.ClientAuthenticationMethod<span class="hljs-comment">;</span>
Â import org.springframework.security.oauth2.core.OAuth2AccessToken<span class="hljs-comment">;</span>
Â import org.springframework.security.oauth2.core.OAuth2RefreshToken<span class="hljs-comment">;</span>
Â import org.springframework.security.oauth2.server.authorization.OAuth2Authorization<span class="hljs-comment">;</span>
Â import org.springframework.security.oauth2.server.authorization.client.RegisteredClient<span class="hljs-comment">;</span>
Â â€‹
Â import java.io.IOException<span class="hljs-comment">;</span>
Â import java.time.Instant<span class="hljs-comment">;</span>
Â import java.util.HashMap<span class="hljs-comment">;</span>
Â import java.util.HashSet<span class="hljs-comment">;</span>
Â import java.util.Map<span class="hljs-comment">;</span>
Â import java.util.Set<span class="hljs-comment">;</span>
Â â€‹
Â public class OAuth2AuthorizationDeserializer extends StdDeserializer&lt;OAuth2Authorization&gt; {
Â â€‹
Â  Â  Â public OAuth2AuthorizationDeserializer() {
Â  Â  Â  Â  Â super(OAuth2Authorization.class)<span class="hljs-comment">;</span>
Â  Â   }
Â â€‹
Â  Â  Â @Override
Â  Â  Â public OAuth2Authorization deserialize(JsonParser p, DeserializationContext ctxt) throws IOException {
Â  Â  Â  Â  Â JsonNode <span class="hljs-attr">root</span> = p.getCodec().readTree(p)<span class="hljs-comment">;</span>
Â  Â  Â  Â  Â ObjectMapper <span class="hljs-attr">mapper</span> = (ObjectMapper) p.getCodec()<span class="hljs-comment">;</span>
Â â€‹
Â  Â  Â  Â  Â // 1. åˆ›å»ºä¸€ä¸ªæœ€å°çš„åˆæ³• dummy RegisteredClientï¼ˆåªä¸ºé€šè¿‡ Builder æ ¡éªŒï¼‰
Â  Â  Â  Â  Â String <span class="hljs-attr">registeredClientId</span> = root.get(<span class="hljs-string">"registeredClientId"</span>).asText(<span class="hljs-string">"dummy"</span>)<span class="hljs-comment">;</span>
Â  Â  Â  Â  Â RegisteredClient <span class="hljs-attr">dummyClient</span> = RegisteredClient.withId(registeredClientId)
Â  Â  Â  Â  Â  Â  Â  Â   .clientId(registeredClientId)
Â  Â  Â  Â  Â  Â  Â  Â   .clientSecret("{noop}secret")
Â  Â  Â  Â  Â  Â  Â  Â   .clientAuthenticationMethod(ClientAuthenticationMethod.CLIENT_SECRET_BASIC)
Â  Â  Â  Â  Â  Â  Â  Â   .authorizationGrantType(AuthorizationGrantType.CLIENT_CREDENTIALS)
Â  Â  Â  Â  Â  Â  Â  Â   .scope("dummy")
Â  Â  Â  Â  Â  Â  Â  Â   .build()<span class="hljs-comment">;</span>
Â â€‹
Â  Â  Â  Â  Â // 2. å¼€å§‹æ„å»º
Â  Â  Â  Â  Â OAuth2Authorization.Builder <span class="hljs-attr">builder</span> = OAuth2Authorization.withRegisteredClient(dummyClient)
Â  Â  Â  Â  Â  Â  Â  Â   .id(root.get("id").asText())
Â  Â  Â  Â  Â  Â  Â  Â   .principalName(root.get("principalName").asText())<span class="hljs-comment">;</span>
Â â€‹
Â  Â  Â  Â  Â // authorizationGrantType
Â  Â  Â  Â  Â JsonNode <span class="hljs-attr">grantNode</span> = root.get(<span class="hljs-string">"authorizationGrantType"</span>)<span class="hljs-comment">;</span>
Â  Â  Â  Â  Â String <span class="hljs-attr">grantTypeValue</span> = grantNode.has(<span class="hljs-string">"value"</span>) ? grantNode.get(<span class="hljs-string">"value"</span>).asText() : <span class="hljs-string">"client_credentials"</span><span class="hljs-comment">;</span>
Â  Â  Â  Â  Â builder.authorizationGrantType(new AuthorizationGrantType(grantTypeValue))<span class="hljs-comment">;</span>
Â â€‹
Â  Â  Â  Â  Â // authorizedScopes
Â  Â  Â  Â  Â if (root.has("authorizedScopes")) {
Â  Â  Â  Â  Â  Â  Â JsonNode <span class="hljs-attr">scopesArray</span> = root.get(<span class="hljs-string">"authorizedScopes"</span>)<span class="hljs-comment">;</span>
Â  Â  Â  Â  Â  Â  Â if (scopesArray.isArray() &amp;&amp; scopesArray.size() &gt; 1) {
Â  Â  Â  Â  Â  Â  Â  Â  Â Set&lt;String&gt; <span class="hljs-attr">scopes</span> = new HashSet&lt;&gt;()<span class="hljs-comment">;</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â JsonNode <span class="hljs-attr">actualScopes</span> = scopesArray.get(<span class="hljs-number">1</span>)<span class="hljs-comment">;</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â for (JsonNode s : actualScopes) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â scopes.add(s.asText())<span class="hljs-comment">;</span>
Â  Â  Â  Â  Â  Â  Â  Â   }
Â  Â  Â  Â  Â  Â  Â  Â  Â builder.authorizedScopes(scopes)<span class="hljs-comment">;</span>
Â  Â  Â  Â  Â  Â   }
Â  Â  Â  Â   }
Â â€‹
Â  Â  Â  Â  Â // attributesï¼ˆç©ºå°±ç©ºï¼Œæ²¡äº‹ï¼‰
Â  Â  Â  Â  Â if (root.has("attributes")) {
Â  Â  Â  Â  Â  Â  Â Map&lt;String, Object&gt; <span class="hljs-attr">attributes</span> = mapper.treeToValue(root.get(<span class="hljs-string">"attributes"</span>), Map.class)<span class="hljs-comment">;</span>
Â  Â  Â  Â  Â  Â  Â builder.attributes(attrs -&gt; attrs.putAll(attributes))<span class="hljs-comment">;</span>
Â  Â  Â  Â   }
Â â€‹
Â  Â  Â  Â  Â // ========== å…³é”®ï¼šæ‰‹åŠ¨è§£æ Token èŠ‚ç‚¹ï¼Œè‡ªå·± new Token&lt;&gt;() ==========
Â  Â  Â  Â  Â if (root.has("accessToken")) {
Â  Â  Â  Â  Â  Â  Â JsonNode <span class="hljs-attr">accessTokenNode</span> = root.get(<span class="hljs-string">"accessToken"</span>)<span class="hljs-comment">;</span>
Â â€‹
Â  Â  Â  Â  Â  Â  Â // è§£æ OAuth2AccessToken
Â  Â  Â  Â  Â  Â  Â JsonNode <span class="hljs-attr">tokenNode</span> = accessTokenNode.get(<span class="hljs-string">"token"</span>)<span class="hljs-comment">;</span>
Â  Â  Â  Â  Â  Â  Â String <span class="hljs-attr">tokenValue</span> = tokenNode.get(<span class="hljs-string">"tokenValue"</span>).asText()<span class="hljs-comment">;</span>
Â  Â  Â  Â  Â  Â  Â Instant <span class="hljs-attr">issuedAt</span> = tokenNode.has(<span class="hljs-string">"issuedAt"</span>) ? Instant.parse(tokenNode.get(<span class="hljs-string">"issuedAt"</span>).asText()) : null<span class="hljs-comment">;</span>
Â  Â  Â  Â  Â  Â  Â Instant <span class="hljs-attr">expiresAt</span> = tokenNode.has(<span class="hljs-string">"expiresAt"</span>) ? Instant.parse(tokenNode.get(<span class="hljs-string">"expiresAt"</span>).asText()) : null<span class="hljs-comment">;</span>
Â â€‹
Â  Â  Â  Â  Â  Â  Â JsonNode <span class="hljs-attr">tokenTypeNode</span> = tokenNode.get(<span class="hljs-string">"tokenType"</span>)<span class="hljs-comment">;</span>
Â  Â  Â  Â  Â  Â  Â OAuth2AccessToken.TokenType <span class="hljs-attr">tokenType</span> =
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â OAuth2AccessToken.TokenType.BEARER<span class="hljs-comment">;</span>
Â â€‹
Â  Â  Â  Â  Â  Â  Â Set&lt;String&gt; <span class="hljs-attr">scopes</span> = new HashSet&lt;&gt;()<span class="hljs-comment">;</span>
Â  Â  Â  Â  Â  Â  Â if (tokenNode.has("scopes")) {
Â  Â  Â  Â  Â  Â  Â  Â  Â JsonNode <span class="hljs-attr">scopesWrapper</span> = tokenNode.get(<span class="hljs-string">"scopes"</span>)<span class="hljs-comment">;</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â if (scopesWrapper.isArray() &amp;&amp; scopesWrapper.size() &gt; 1) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â JsonNode <span class="hljs-attr">scopesArray</span> = scopesWrapper.get(<span class="hljs-number">1</span>)<span class="hljs-comment">;</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â for (JsonNode s : scopesArray) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â scopes.add(s.asText())<span class="hljs-comment">;</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â   }
Â  Â  Â  Â  Â  Â  Â  Â   }
Â  Â  Â  Â  Â  Â   }
Â â€‹
Â  Â  Â  Â  Â  Â  Â OAuth2AccessToken <span class="hljs-attr">accessToken</span> = new OAuth2AccessToken(tokenType, tokenValue, issuedAt, expiresAt, scopes)<span class="hljs-comment">;</span>
Â â€‹
Â â€‹
Â // Â  Â  Â  Â  Â   OAuth2AccessToken <span class="hljs-attr">accessToken</span> = mapper.treeToValue(tokenNode, OAuth2AccessToken.class)<span class="hljs-comment">;</span>
Â â€‹
Â  Â  Â  Â  Â  Â  Â // è§£æ metadataï¼ˆå¦‚æœæœ‰ï¼‰
Â  Â  Â  Â  Â  Â  Â Map&lt;String, Object&gt; <span class="hljs-attr">metadata</span> = new HashMap&lt;&gt;()<span class="hljs-comment">;</span>
Â  Â  Â  Â  Â  Â  Â if (accessTokenNode.has("metadata")) {
Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-attr">metadata</span> = mapper.treeToValue(accessTokenNode.get(<span class="hljs-string">"metadata"</span>), Map.class)<span class="hljs-comment">;</span>
Â  Â  Â  Â  Â  Â   }
Â â€‹
Â  Â  Â  Â  Â  Â  Â // è§£æ claimsï¼ˆå¦‚æœæœ‰ï¼‰
Â  Â  Â  Â  Â  Â  Â Map&lt;String, Object&gt; <span class="hljs-attr">claims</span> = null<span class="hljs-comment">;</span>
Â  Â  Â  Â  Â  Â  Â if (accessTokenNode.has("claims")) {
Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-attr">claims</span> = mapper.treeToValue(accessTokenNode.get(<span class="hljs-string">"claims"</span>), Map.class)<span class="hljs-comment">;</span>
Â  Â  Â  Â  Â  Â   } else if (metadata.containsKey(OAuth2Authorization.Token.CLAIMS_METADATA_NAME)) {
Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-attr">claims</span> = (Map&lt;String, Object&gt;) metadata.get(OAuth2Authorization.Token.CLAIMS_METADATA_NAME)<span class="hljs-comment">;</span>
Â  Â  Â  Â  Â  Â   }
Â â€‹
Â  Â  Â  Â  Â  Â  Â // å…³é”®ï¼šæ­£ç¡®è°ƒç”¨ token æ–¹æ³•
Â  Â  Â  Â  Â  Â  Â if (claims != null) {
Â  Â  Â  Â  Â  Â  Â  Â  Â Map&lt;String, Object&gt; <span class="hljs-attr">finalClaims</span> = claims<span class="hljs-comment">;</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â Map&lt;String, Object&gt; <span class="hljs-attr">finalMetadata</span> = metadata<span class="hljs-comment">;</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â builder.token(accessToken, meta -&gt; {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â meta.putAll(finalMetadata)<span class="hljs-comment">; Â // å…ˆæ”¾åŸæœ‰ metadata</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â meta.put(OAuth2Authorization.Token.CLAIMS_METADATA_NAME, finalClaims)<span class="hljs-comment">;</span>
Â  Â  Â  Â  Â  Â  Â  Â   })<span class="hljs-comment">;</span>
Â  Â  Â  Â  Â  Â   } else {
Â  Â  Â  Â  Â  Â  Â  Â  Â Map&lt;String, Object&gt; <span class="hljs-attr">finalMetadata</span> = metadata<span class="hljs-comment">;</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â builder.token(accessToken, meta -&gt; meta.putAll(finalMetadata))<span class="hljs-comment">;</span>
Â  Â  Â  Â  Â  Â   }
Â  Â  Â  Â   }
Â â€‹
Â  Â  Â  Â  Â if (root.has("refreshToken")) {
Â  Â  Â  Â  Â  Â  Â JsonNode <span class="hljs-attr">refreshTokenNode</span> = root.get(<span class="hljs-string">"refreshToken"</span>)<span class="hljs-comment">;</span>
Â  Â  Â  Â  Â  Â  Â JsonNode <span class="hljs-attr">tokenNode</span> = refreshTokenNode.get(<span class="hljs-string">"token"</span>)<span class="hljs-comment">;</span>
Â â€‹
Â  Â  Â  Â  Â  Â  Â String <span class="hljs-attr">tokenValue</span> = tokenNode.get(<span class="hljs-string">"tokenValue"</span>).asText()<span class="hljs-comment">;</span>
Â  Â  Â  Â  Â  Â  Â Instant <span class="hljs-attr">issuedAt</span> = tokenNode.has(<span class="hljs-string">"issuedAt"</span>) ? Instant.parse(tokenNode.get(<span class="hljs-string">"issuedAt"</span>).asText()) : null<span class="hljs-comment">;</span>
Â  Â  Â  Â  Â  Â  Â Instant <span class="hljs-attr">expiresAt</span> = tokenNode.has(<span class="hljs-string">"expiresAt"</span>) ? Instant.parse(tokenNode.get(<span class="hljs-string">"expiresAt"</span>).asText()) : null<span class="hljs-comment">;</span>
Â â€‹
Â  Â  Â  Â  Â  Â  Â OAuth2RefreshToken <span class="hljs-attr">refreshToken</span> = new OAuth2RefreshToken(tokenValue, issuedAt, expiresAt)<span class="hljs-comment">;</span>
Â â€‹
Â  Â  Â  Â  Â  Â  Â Map&lt;String, Object&gt; <span class="hljs-attr">metadata</span> = new HashMap&lt;&gt;()<span class="hljs-comment">;</span>
Â  Â  Â  Â  Â  Â  Â if (refreshTokenNode.has("metadata")) {
Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-attr">metadata</span> = mapper.treeToValue(refreshTokenNode.get(<span class="hljs-string">"metadata"</span>), Map.class)<span class="hljs-comment">;</span>
Â  Â  Â  Â  Â  Â   }
Â  Â  Â  Â  Â  Â  Â Map&lt;String, Object&gt; <span class="hljs-attr">finalMetadata</span> = metadata<span class="hljs-comment">;</span>
Â  Â  Â  Â  Â  Â  Â builder.token(refreshToken, meta -&gt; meta.putAll(finalMetadata))<span class="hljs-comment">;</span>
Â  Â  Â  Â   }
Â  Â  Â  Â  Â return builder.build()<span class="hljs-comment">;</span>
Â  Â   }
Â }
</code></pre>
</li>
</ul>

<ul>
<li>
<p><strong>SecurityJackson2Module</strong></p>
<p>åœ¨ Spring Securityï¼ˆåŒ…æ‹¬ Boot 2.7 å’Œ 3.xï¼‰é‡Œï¼Œç”¨æˆ·æƒé™æ˜¯ç”¨ SimpleGrantedAuthority è¡¨ç¤ºçš„ï¼š</p>
<p>Java</p>
<pre><code class="hljs language-arduino" lang="arduino">Â <span class="hljs-keyword">new</span> <span class="hljs-built_in">SimpleGrantedAuthority</span>(<span class="hljs-string">"ROLE_ADMIN"</span>)
</code></pre>
<p>è¿™ä¸ªç±»é•¿è¿™æ ·ï¼ˆç®€åŒ–ç‰ˆï¼‰ï¼š</p>
<p>Java</p>
<pre><code class="hljs language-arduino" lang="arduino">Â <span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SimpleGrantedAuthority</span> implements GrantedAuthority {
Â  Â   <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> authority;  <span class="hljs-comment">// åªæœ‰è¿™ä¸ªå­—æ®µï¼Œæ²¡æœ‰ setterï¼</span>
Â â€‹
Â  Â   <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">SimpleGrantedAuthority</span><span class="hljs-params">(<span class="hljs-type">String</span> authority)</span> </span>{
Â  Â  Â  Â   <span class="hljs-keyword">this</span>.authority = authority;
Â  Â   }
Â â€‹
Â  Â   <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-type">String</span> <span class="hljs-title">getAuthority</span><span class="hljs-params">()</span> </span>{
Â  Â  Â  Â   <span class="hljs-keyword">return</span> authority;
Â  Â   }
Â }
</code></pre>
<p>å…³é”®ç‚¹ï¼š</p>
<ul>
<li><strong>æ²¡æœ‰æ— å‚æ„é€ å‡½æ•°</strong></li>
<li><strong>æ²¡æœ‰ setter</strong></li>
<li><strong>åªæœ‰ getter</strong></li>
</ul>
<p>å½“ä½ ç”¨ Redis + JSON åºåˆ—åŒ–å­˜ç”¨æˆ·æƒé™ï¼ˆSession æˆ– OAuth2Authorizationï¼‰æ—¶ï¼ŒJSON ä¼šå˜æˆï¼š</p>
<p>JSON</p>
<pre><code class="hljs language-less" lang="less">Â {
Â   "<span class="hljs-variable">@class</span><span class="hljs-string">": "</span>org.springframework.security.core.authority.SimpleGrantedAuthority",
Â   <span class="hljs-string">"authority"</span>: <span class="hljs-string">"ROLE_ADMIN"</span>
Â }
</code></pre>
<p>Jackson ååºåˆ—åŒ–æ—¶å‚»çœ¼äº†ï¼š</p>
<ul>
<li>æ‰¾ä¸åˆ°æ— å‚æ„é€ å‡½æ•° â†’ æŠ¥ no Creators, like default constructor, exist</li>
<li>æ‰¾ä¸åˆ° setter â†’ ä¸çŸ¥é“æ€ä¹ˆè®¾ç½® authority å­—æ®µ</li>
</ul>
<p>ç»“æœï¼šæƒé™è¯»ä¸å‡ºæ¥ â†’ ç”¨æˆ·ç™»å½•åæƒé™ä¸ºç©º â†’ æ¥å£ 403 â†’ ä¸šåŠ¡å…¨ç‚¸ï¼</p>
<p><strong>å®Œæ•´çš„ä»£ç </strong>ï¼š</p>
<pre><code class="hljs language-scala" lang="scala">Â <span class="hljs-keyword">import</span> com.fasterxml.jackson.core.<span class="hljs-type">JsonParser</span>;
Â <span class="hljs-keyword">import</span> com.fasterxml.jackson.core.<span class="hljs-type">JsonToken</span>;
Â <span class="hljs-keyword">import</span> com.fasterxml.jackson.databind.<span class="hljs-type">DeserializationContext</span>;
Â <span class="hljs-keyword">import</span> com.fasterxml.jackson.databind.<span class="hljs-type">JsonNode</span>;
Â <span class="hljs-keyword">import</span> com.fasterxml.jackson.databind.deser.std.<span class="hljs-type">StdDeserializer</span>;
Â <span class="hljs-keyword">import</span> com.fasterxml.jackson.databind.module.<span class="hljs-type">SimpleModule</span>;
Â <span class="hljs-keyword">import</span> org.springframework.security.core.authority.<span class="hljs-type">SimpleGrantedAuthority</span>;
Â â€‹
Â <span class="hljs-keyword">import</span> java.io.<span class="hljs-type">IOException</span>;
Â â€‹
Â public <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SecurityJackson2Module</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">SimpleModule</span> </span>{
Â â€‹
Â  Â  Â public <span class="hljs-type">SecurityJackson2Module</span>() {
Â  Â  Â  Â  Â <span class="hljs-keyword">super</span>();
Â  Â  Â  Â  Â <span class="hljs-comment">// åŒæ—¶å…¼å®¹ Spring Boot 2.7 å’Œ 3.x çš„ SimpleGrantedAuthority ååºåˆ—åŒ–</span>
Â  Â  Â  Â  Â addDeserializer(<span class="hljs-type">SimpleGrantedAuthority</span>.<span class="hljs-keyword">class</span>, <span class="hljs-keyword">new</span> <span class="hljs-type">SimpleGrantedAuthorityDeserializer</span>());
Â  Â   }
Â â€‹
Â  Â  Â static <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SimpleGrantedAuthorityDeserializer</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StdDeserializer&lt;SimpleGrantedAuthority&gt;</span> </span>{
Â â€‹
Â  Â  Â  Â  Â public <span class="hljs-type">SimpleGrantedAuthorityDeserializer</span>() {
Â  Â  Â  Â  Â  Â  Â <span class="hljs-keyword">super</span>(<span class="hljs-type">SimpleGrantedAuthority</span>.<span class="hljs-keyword">class</span>);
Â  Â  Â  Â   }
Â â€‹
Â  Â  Â  Â  Â <span class="hljs-meta">@Override</span>
Â  Â  Â  Â  Â public <span class="hljs-type">SimpleGrantedAuthority</span> deserialize(<span class="hljs-type">JsonParser</span> p, <span class="hljs-type">DeserializationContext</span> ctxt)
Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-keyword">throws</span> <span class="hljs-type">IOException</span> {
Â  Â  Â  Â  Â  Â  Â <span class="hljs-comment">// æ”¯æŒä¸¤ç§æ ¼å¼ï¼š{"authority":"ROLE_ADMIN"} æˆ– ç›´æ¥å­—ç¬¦ä¸² "ROLE_ADMIN"</span>
Â  Â  Â  Â  Â  Â  Â <span class="hljs-keyword">if</span> (p.currentToken() == <span class="hljs-type">JsonToken</span>.<span class="hljs-type">VALUE_STRING</span>) {
Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-type">SimpleGrantedAuthority</span>(p.getText());
Â  Â  Â  Â  Â  Â   }
Â â€‹
Â  Â  Â  Â  Â  Â  Â <span class="hljs-type">JsonNode</span> node = p.getCodec().readTree(p);
Â  Â  Â  Â  Â  Â  Â <span class="hljs-type">String</span> authority = <span class="hljs-literal">null</span>;
Â  Â  Â  Â  Â  Â  Â <span class="hljs-keyword">if</span> (node.isTextual()) {
Â  Â  Â  Â  Â  Â  Â  Â  Â authority = node.asText();
Â  Â  Â  Â  Â  Â   } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (node.has(<span class="hljs-string">"authority"</span>)) {
Â  Â  Â  Â  Â  Â  Â  Â  Â authority = node.get(<span class="hljs-string">"authority"</span>).asText();
Â  Â  Â  Â  Â  Â   }
Â  Â  Â  Â  Â  Â  Â <span class="hljs-keyword">return</span> authority != <span class="hljs-literal">null</span> ? <span class="hljs-keyword">new</span> <span class="hljs-type">SimpleGrantedAuthority</span>(authority) : <span class="hljs-literal">null</span>;
Â  Â  Â  Â   }
Â  Â   }
Â }
</code></pre>
</li>
</ul>

<ul>
<li>
<p>OAuth2LegacyJacksonModule</p>
<p>è¿™ä¸ª OAuth2LegacyJacksonModule æ‰æ˜¯æˆ‘æ•´ä¸ªåºåˆ—åŒ–å¤§æˆ˜çš„â€œæ•‘å‘½ç¨»è‰â€ï¼æ²¡æœ‰å®ƒï¼ŒBoot 2.7 è®¤è¯ä¸­å¿ƒè¯» Redis é‡Œçš„ OAuth2 æ•°æ®ï¼Œç›´æ¥åŸåœ°çˆ†ç‚¸ğŸ˜‚</p>
<p><strong>æ ¸å¿ƒé—®é¢˜ï¼ˆè€ Authorization Server çš„â€œé—äº§å‘â€ï¼‰</strong></p>
<p>åœ¨è€ç‰ˆæœ¬ spring-security-oauth2-authorization-serverï¼ˆ0.2.x/0.4.xï¼‰é‡Œï¼Œå‡ ä¸ªå…³é”®ç±»åºåˆ—åŒ–æ ¼å¼è¶…çº§â€œä»»æ€§â€ï¼š</p>
<ol>
<li>
<p>ClientAuthenticationMethod</p>
<ul>
<li>Boot 2.7 å­˜çš„æ˜¯å­—ç¬¦ä¸² "client_secret_basic"</li>
<li>Boot 3.2 å­˜çš„æ˜¯å¯¹è±¡ {"value": "client_secret_basic"}</li>
<li>Boot 2.7 è¯» Boot 3.2 çš„æ•°æ® â†’ Cannot construct instance (no delegate- or property-based Creator)</li>
</ul>
</li>
<li>
<p>AuthorizationGrantType</p>
<ul>
<li>åŒä¸Šï¼Œå­—ç¬¦ä¸² vs {"value": "..."} â†’ ç‚¸ï¼</li>
</ul>
</li>
<li>
<p>ClientSettings / TokenSettings</p>
<ul>
<li>Boot 3.2 æ˜¯ recordï¼ˆæ— é»˜è®¤æ„é€ å‡½æ•°ï¼‰</li>
<li>Boot 2.7 è¯»åˆ° â†’ no Creators, like default constructor, exist</li>
</ul>
</li>
<li>
<p>è€ç‰ˆæœ¬é—ç•™å­—æ®µ "settings"</p>
<ul>
<li>æ—©æœŸç‰ˆæœ¬æœ‰ "settings" å­—æ®µï¼Œåæ¥æ‹†æˆ clientSettings + tokenSettings</li>
<li>æ–°ä»£ç è¯»è€æ•°æ® â†’ Unrecognized field "settings"</li>
</ul>
</li>
</ol>
<p>ç»“æœï¼šç™»å½• â†’ ç™»å‡º â†’ å†ç™»å½•ï¼Œå¿…ç‚¸ï¼ï¼ˆå› ä¸ºç™»å‡ºæ¸… Sessionï¼Œé‡æ–°è¯» Redis é‡Œçš„ RegisteredClient/OAuth2Authorizationï¼‰</p>
<pre><code class="hljs language-scala" lang="scala">Â <span class="hljs-keyword">import</span> com.fasterxml.jackson.core.<span class="hljs-type">JsonParser</span>;
Â <span class="hljs-keyword">import</span> com.fasterxml.jackson.databind.<span class="hljs-type">DeserializationContext</span>;
Â <span class="hljs-keyword">import</span> com.fasterxml.jackson.databind.<span class="hljs-type">JsonNode</span>;
Â <span class="hljs-keyword">import</span> com.fasterxml.jackson.databind.deser.std.<span class="hljs-type">StdDeserializer</span>;
Â <span class="hljs-keyword">import</span> com.fasterxml.jackson.databind.module.<span class="hljs-type">SimpleModule</span>;
Â <span class="hljs-keyword">import</span> org.springframework.security.oauth2.core.<span class="hljs-type">AuthorizationGrantType</span>;
Â <span class="hljs-keyword">import</span> org.springframework.security.oauth2.core.<span class="hljs-type">ClientAuthenticationMethod</span>;
Â <span class="hljs-keyword">import</span> org.springframework.security.oauth2.server.authorization.settings.<span class="hljs-type">ClientSettings</span>;
Â <span class="hljs-keyword">import</span> org.springframework.security.oauth2.server.authorization.settings.<span class="hljs-type">OAuth2TokenFormat</span>;
Â <span class="hljs-keyword">import</span> org.springframework.security.oauth2.server.authorization.settings.<span class="hljs-type">TokenSettings</span>;
Â â€‹
Â <span class="hljs-keyword">import</span> java.io.<span class="hljs-type">IOException</span>;
Â <span class="hljs-keyword">import</span> java.time.<span class="hljs-type">Duration</span>;
Â â€‹
Â public <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">OAuth2LegacyJacksonModule</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">SimpleModule</span> </span>{
Â â€‹
Â  Â  Â  Â  Â public <span class="hljs-type">OAuth2LegacyJacksonModule</span>() {
Â  Â  Â  Â  Â  Â  Â addDeserializer(<span class="hljs-type">ClientAuthenticationMethod</span>.<span class="hljs-keyword">class</span>, <span class="hljs-keyword">new</span> <span class="hljs-type">ClientAuthenticationMethodDeserializer</span>());
Â  Â  Â  Â  Â  Â  Â addDeserializer(<span class="hljs-type">AuthorizationGrantType</span>.<span class="hljs-keyword">class</span>, <span class="hljs-keyword">new</span> <span class="hljs-type">AuthorizationGrantTypeDeserializer</span>());
Â â€‹
Â  Â  Â  Â  Â  Â  Â <span class="hljs-comment">// æ–°å¢è¿™ä¸¤è¡Œï¼Œä¸“æ²» ClientSettings å’Œ TokenSettingsï¼ˆBoot3 record æ ¼å¼ï¼‰</span>
Â  Â  Â  Â  Â  Â  Â addDeserializer(<span class="hljs-type">ClientSettings</span>.<span class="hljs-keyword">class</span>, <span class="hljs-keyword">new</span> <span class="hljs-type">ClientSettingsDeserializer</span>());
Â  Â  Â  Â  Â  Â  Â addDeserializer(<span class="hljs-type">TokenSettings</span>.<span class="hljs-keyword">class</span>, <span class="hljs-keyword">new</span> <span class="hljs-type">TokenSettingsDeserializer</span>());
Â  Â  Â  Â   }
Â â€‹
Â  Â  Â  Â  Â <span class="hljs-comment">// ... ä½ ä¹‹å‰å·²æœ‰çš„ä¸¤ä¸ª Deserializer ä¸å˜ ...</span>
Â â€‹
Â  Â  Â  Â  Â <span class="hljs-comment">// æ–°å¢ï¼šå…¼å®¹ Boot3 å­˜çš„ ClientSettings</span>
Â  Â  Â  Â  Â static <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ClientSettingsDeserializer</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StdDeserializer&lt;ClientSettings&gt;</span> </span>{
Â  Â  Â  Â  Â  Â  Â public <span class="hljs-type">ClientSettingsDeserializer</span>() {
Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-keyword">super</span>(<span class="hljs-type">ClientSettings</span>.<span class="hljs-keyword">class</span>);
Â  Â  Â  Â  Â  Â   }
Â â€‹
Â  Â  Â  Â  Â  Â  Â <span class="hljs-meta">@Override</span>
Â  Â  Â  Â  Â  Â  Â public <span class="hljs-type">ClientSettings</span> deserialize(<span class="hljs-type">JsonParser</span> p, <span class="hljs-type">DeserializationContext</span> ctxt) <span class="hljs-keyword">throws</span> <span class="hljs-type">IOException</span> {
Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-type">JsonNode</span> node = p.getCodec().readTree(p);
Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-comment">// Boot3 é»˜è®¤å€¼ï¼šrequireProofKey=false, requireAuthorizationConsent=true</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â boolean requireProofKey = node.has(<span class="hljs-string">"requireProofKey"</span>) &amp;&amp; node.get(<span class="hljs-string">"requireProofKey"</span>).asBoolean();
Â  Â  Â  Â  Â  Â  Â  Â  Â boolean requireAuthorizationConsent = node.has(<span class="hljs-string">"requireAuthorizationConsent"</span>) ?
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â node.get(<span class="hljs-string">"requireAuthorizationConsent"</span>).asBoolean() : <span class="hljs-literal">true</span>;
Â â€‹
Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-keyword">return</span> <span class="hljs-type">ClientSettings</span>.builder()
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â   .requireProofKey(requireProofKey)
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â   .requireAuthorizationConsent(requireAuthorizationConsent)
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â   .build();
Â  Â  Â  Â  Â  Â   }
Â  Â  Â  Â  Â  Â  Â <span class="hljs-meta">@Override</span>
Â  Â  Â  Â  Â  Â  Â public <span class="hljs-type">ClientSettings</span> getNullValue(<span class="hljs-type">DeserializationContext</span> ctxt) {
Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-keyword">return</span> <span class="hljs-type">ClientSettings</span>.builder()
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â   .requireAuthorizationConsent(<span class="hljs-literal">true</span>) Â <span class="hljs-comment">// ä½ é¡¹ç›®å¤§å¤šæ•°æƒ…å†µéƒ½æ˜¯ true</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â   .requireProofKey(<span class="hljs-literal">false</span>)
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â   .build();
Â  Â  Â  Â  Â  Â   }
Â  Â  Â  Â   }
Â â€‹
Â  Â  Â  Â  Â <span class="hljs-comment">// æ–°å¢ï¼šå…¼å®¹ Boot3 å­˜çš„ TokenSettings</span>
Â  Â  Â  Â  Â static <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TokenSettingsDeserializer</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StdDeserializer&lt;TokenSettings&gt;</span> </span>{
Â  Â  Â  Â  Â  Â  Â public <span class="hljs-type">TokenSettingsDeserializer</span>() {
Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-keyword">super</span>(<span class="hljs-type">TokenSettings</span>.<span class="hljs-keyword">class</span>);
Â  Â  Â  Â  Â  Â   }
Â â€‹
Â  Â  Â  Â  Â  Â  Â <span class="hljs-meta">@Override</span>
Â  Â  Â  Â  Â  Â  Â public <span class="hljs-type">TokenSettings</span> deserialize(<span class="hljs-type">JsonParser</span> p, <span class="hljs-type">DeserializationContext</span> ctxt) <span class="hljs-keyword">throws</span> <span class="hljs-type">IOException</span> {
Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-type">JsonNode</span> node = p.getCodec().readTree(p);
Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-type">TokenSettings</span>.<span class="hljs-type">Builder</span> builder = <span class="hljs-type">TokenSettings</span>.builder();
Â â€‹
Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-comment">// 1. accessTokenFormatï¼šä½ ä»£ç é‡Œè®¾çš„æ˜¯ REFERENCEï¼ˆä¸é€æ˜ä»¤ç‰Œï¼‰</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-comment">// Â   Boot3 é»˜è®¤æ˜¯ SELF_CONTAINEDï¼ˆJWTï¼‰ï¼Œæ‰€ä»¥å¿…é¡»æ˜¾å¼å¤„ç†</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-keyword">if</span> (node != <span class="hljs-literal">null</span> &amp;&amp; node.has(<span class="hljs-string">"accessTokenFormat"</span>)) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-type">JsonNode</span> formatNode = node.get(<span class="hljs-string">"accessTokenFormat"</span>);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-keyword">if</span> (formatNode.has(<span class="hljs-string">"value"</span>)) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-type">String</span> value = formatNode.get(<span class="hljs-string">"value"</span>).asText();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-keyword">if</span> (<span class="hljs-string">"reference"</span>.equalsIgnoreCase(value)) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â builder.accessTokenFormat(<span class="hljs-type">OAuth2TokenFormat</span>.<span class="hljs-type">REFERENCE</span>);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â   } <span class="hljs-keyword">else</span> {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â builder.accessTokenFormat(<span class="hljs-type">OAuth2TokenFormat</span>.<span class="hljs-type">SELF_CONTAINED</span>);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â   }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â   }
Â  Â  Â  Â  Â  Â  Â  Â   } <span class="hljs-keyword">else</span> {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-comment">// é»˜è®¤è·Ÿä½ ä»£ç ä¿æŒä¸€è‡´ï¼šREFERENCEï¼ˆå¤§éƒ¨åˆ†èµ„æºæœåŠ¡å™¨ + Redis å­˜å‚¨éƒ½ç”¨è¿™ä¸ªï¼‰</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â builder.accessTokenFormat(<span class="hljs-type">OAuth2TokenFormat</span>.<span class="hljs-type">REFERENCE</span>);
Â  Â  Â  Â  Â  Â  Â  Â   }
Â â€‹
Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-comment">// 2. accessTokenTimeToLive</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-keyword">if</span> (node != <span class="hljs-literal">null</span> &amp;&amp; node.has(<span class="hljs-string">"accessTokenTimeToLive"</span>)) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â long seconds = node.get(<span class="hljs-string">"accessTokenTimeToLive"</span>).asLong();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â builder.accessTokenTimeToLive(<span class="hljs-type">Duration</span>.ofSeconds(seconds));
Â  Â  Â  Â  Â  Â  Â  Â   } <span class="hljs-keyword">else</span> {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-comment">// ç»™ä¸€ä¸ªå…œåº•é»˜è®¤å€¼ï¼ˆæ¯”å¦‚ 1 å°æ—¶ï¼‰ï¼Œé˜²æ­¢ null</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â builder.accessTokenTimeToLive(<span class="hljs-type">Duration</span>.ofHours(<span class="hljs-number">1</span>));
Â  Â  Â  Â  Â  Â  Â  Â   }
Â â€‹
Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-comment">// 3. refreshTokenTimeToLive</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-keyword">if</span> (node != <span class="hljs-literal">null</span> &amp;&amp; node.has(<span class="hljs-string">"refreshTokenTimeToLive"</span>)) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â long seconds = node.get(<span class="hljs-string">"refreshTokenTimeToLive"</span>).asLong();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â builder.refreshTokenTimeToLive(<span class="hljs-type">Duration</span>.ofSeconds(seconds));
Â  Â  Â  Â  Â  Â  Â  Â   } <span class="hljs-keyword">else</span> {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â builder.refreshTokenTimeToLive(<span class="hljs-type">Duration</span>.ofDays(<span class="hljs-number">30</span>)); <span class="hljs-comment">// å¸¸è§é»˜è®¤å€¼</span>
Â  Â  Â  Â  Â  Â  Â  Â   }
Â â€‹
Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-comment">// ä½ å¦‚æœè¿˜è®¾ç½®äº† reuseRefreshTokensã€idTokenSignatureAlgorithm ç­‰ï¼Œç»§ç»­åŠ å³å¯</span>
Â â€‹
Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-keyword">return</span> builder.build();
Â  Â  Â  Â  Â  Â   }
Â â€‹
Â  Â  Â  Â  Â  Â  Â <span class="hljs-comment">// å…³é”®ï¼šå³ä½¿ Redis é‡Œå®Œå…¨æ²¡æœ‰ tokenSettings å­—æ®µï¼Œä¹Ÿè¦è¿”å›ä¸€ä¸ªæœ‰æ•ˆçš„é»˜è®¤å®ä¾‹ï¼</span>
Â  Â  Â  Â  Â  Â  Â <span class="hljs-meta">@Override</span>
Â  Â  Â  Â  Â  Â  Â public <span class="hljs-type">TokenSettings</span> getNullValue(<span class="hljs-type">DeserializationContext</span> ctxt) {
Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-keyword">return</span> <span class="hljs-type">TokenSettings</span>.builder()
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â   .accessTokenFormat(<span class="hljs-type">OAuth2TokenFormat</span>.<span class="hljs-type">REFERENCE</span>) Â <span class="hljs-comment">// è·Ÿä½ ä»£ç ä¿æŒä¸€è‡´</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â   .accessTokenTimeToLive(<span class="hljs-type">Duration</span>.ofHours(<span class="hljs-number">1</span>))
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â   .refreshTokenTimeToLive(<span class="hljs-type">Duration</span>.ofDays(<span class="hljs-number">30</span>))
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â   .build();
Â  Â  Â  Â  Â  Â   }
Â  Â  Â  Â   }
Â â€‹
Â  Â  Â  Â  Â <span class="hljs-comment">// ä½ ä¹‹å‰å·²æœ‰çš„ä¸¤ä¸ªä¿æŒä¸å˜</span>
Â  Â  Â  Â  Â static <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ClientAuthenticationMethodDeserializer</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StdDeserializer&lt;ClientAuthenticationMethod&gt;</span> </span>{
Â  Â  Â  Â  Â  Â  Â public <span class="hljs-type">ClientAuthenticationMethodDeserializer</span>() { <span class="hljs-keyword">super</span>(<span class="hljs-type">ClientAuthenticationMethod</span>.<span class="hljs-keyword">class</span>); }
Â  Â  Â  Â  Â  Â  Â <span class="hljs-meta">@Override</span> public <span class="hljs-type">ClientAuthenticationMethod</span> deserialize(<span class="hljs-type">JsonParser</span> p, <span class="hljs-type">DeserializationContext</span> ctxt) <span class="hljs-keyword">throws</span> <span class="hljs-type">IOException</span> {
Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-type">JsonNode</span> node = p.getCodec().readTree(p);
Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-type">String</span> value = node.isTextual() ? node.asText() : node.get(<span class="hljs-string">"value"</span>).asText();
Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-type">ClientAuthenticationMethod</span>(value);
Â  Â  Â  Â  Â  Â   }
Â  Â  Â  Â   }
Â â€‹
Â  Â  Â  Â  Â static <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AuthorizationGrantTypeDeserializer</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StdDeserializer&lt;AuthorizationGrantType&gt;</span> </span>{
Â  Â  Â  Â  Â  Â  Â public <span class="hljs-type">AuthorizationGrantTypeDeserializer</span>() { <span class="hljs-keyword">super</span>(<span class="hljs-type">AuthorizationGrantType</span>.<span class="hljs-keyword">class</span>); }
Â  Â  Â  Â  Â  Â  Â <span class="hljs-meta">@Override</span> public <span class="hljs-type">AuthorizationGrantType</span> deserialize(<span class="hljs-type">JsonParser</span> p, <span class="hljs-type">DeserializationContext</span> ctxt) <span class="hljs-keyword">throws</span> <span class="hljs-type">IOException</span> {
Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-type">JsonNode</span> node = p.getCodec().readTree(p);
Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-type">String</span> value = node.isTextual() ? node.asText() : node.get(<span class="hljs-string">"value"</span>).asText();
Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-type">AuthorizationGrantType</span>(value);
Â  Â  Â  Â  Â  Â   }
Â  Â  Â  Â   }
Â }
</code></pre>
</li>
<li>
<p>oAuth2AuthorizationRedisTemplate</p>
<p>ä¸ºäº†ä¸å½±å“å…¶ä»–çš„ä¸šåŠ¡ä¿¡æ¯ï¼Œåˆ›å»ºä¸€ä¸ªè®¤è¯ç”¨çš„RedisTemplate,ä¸è®¤è¯ç›¸å…³çš„éƒ½ç”¨è¿™ä¸ªï¼ŒåŸæ¥çš„é‚£äº›ä¸šåŠ¡ä¸å˜ï¼Œå½“ç„¶å¦‚æœä½ æƒ³è¦éƒ½ä½¿ç”¨jsonæ¥ä¿å­˜ä¸šåŠ¡æ•°æ®ä¹Ÿæ˜¯å¯ä»¥çš„ï¼ŒæŒ‰éœ€æ¥æ“ä½œï¼</p>
<pre><code class="hljs language-typescript" lang="typescript">Â <span class="hljs-comment">/**
Â      * ä¸»è¦ç”¨äºå­˜å‚¨ OAuth2Authorizationï¼Œå¯¹æˆæƒçš„jsonåºåˆ—åŒ–
Â      * <span class="hljs-doctag">@param</span> <span class="hljs-variable">publicJsonRedisSerializer</span>
Â      * <span class="hljs-doctag">@param</span> <span class="hljs-variable">redisConnectionFactory</span>
Â      * <span class="hljs-doctag">@return</span>
Â      */</span>
Â     <span class="hljs-meta">@Bean</span>
Â     <span class="hljs-keyword">public</span> <span class="hljs-title class_">RedisTemplate</span>&lt;<span class="hljs-title class_">String</span>, <span class="hljs-title class_">Object</span>&gt; <span class="hljs-title function_">oAuth2AuthorizationRedisTemplate</span>(<span class="hljs-params">RedisSerializer&lt;<span class="hljs-built_in">Object</span>&gt; publicJsonRedisSerializer, RedisConnectionFactory redisConnectionFactory</span>) {
Â         <span class="hljs-title class_">RedisTemplate</span>&lt;<span class="hljs-title class_">String</span>, <span class="hljs-title class_">Object</span>&gt; redisTemplate = <span class="hljs-keyword">new</span> <span class="hljs-title class_">RedisTemplate</span>&lt;&gt;();
Â         redisTemplate.<span class="hljs-title function_">setKeySerializer</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">StringRedisSerializer</span>());
Â         redisTemplate.<span class="hljs-title function_">setHashKeySerializer</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">StringRedisSerializer</span>());
Â         redisTemplate.<span class="hljs-title function_">setValueSerializer</span>(publicJsonRedisSerializer);
Â         redisTemplate.<span class="hljs-title function_">setHashValueSerializer</span>(publicJsonRedisSerializer);
Â         redisTemplate.<span class="hljs-title function_">setConnectionFactory</span>(redisConnectionFactory);
Â         <span class="hljs-keyword">return</span> redisTemplate;
Â     }
</code></pre>
<p>é‡è¦ï¼Œè¿™è¾¹ä½¿ç”¨setValueSerializerä¸setHashValueSerializeréƒ½ä½¿ç”¨publicJsonRedisSerializerã€‚</p>
</li>
<li>
<p>RedisOAuth2AuthorizationService</p>
<p>ä¿®æ”¹è‡ªå·±çš„redisè®¤è¯æœåŠ¡ç±»ï¼Œæˆ‘çš„å¯èƒ½è·Ÿå¤§å®¶çš„ä¸ä¸€æ ·ï¼ŒæŒ‰ç…§è‡ªå·±çš„æ¥ï¼ä¸‹é¢ä»…ä¾›å‚è€ƒï¼</p>
<p><img src="" alt="image-20251230171343623" loading="lazy"/></p>
</li>
</ul>

<ul>
<li>
<p>è‡ªå®šä¹‰Provider</p>
<pre><code class="hljs language-ini" lang="ini">Â import org.apache.commons.logging.Log<span class="hljs-comment">;</span>
Â import org.apache.commons.logging.LogFactory<span class="hljs-comment">;</span>
Â import org.springframework.security.authentication.AuthenticationProvider<span class="hljs-comment">;</span>
Â import org.springframework.security.authentication.UsernamePasswordAuthenticationToken<span class="hljs-comment">;</span>
Â import org.springframework.security.core.Authentication<span class="hljs-comment">;</span>
Â import org.springframework.security.core.AuthenticationException<span class="hljs-comment">;</span>
Â import org.springframework.security.oauth2.core.*<span class="hljs-comment">;</span>
Â import org.springframework.security.oauth2.core.oidc.OidcIdToken<span class="hljs-comment">;</span>
Â import org.springframework.security.oauth2.core.oidc.OidcScopes<span class="hljs-comment">;</span>
Â import org.springframework.security.oauth2.core.oidc.endpoint.OidcParameterNames<span class="hljs-comment">;</span>
Â import org.springframework.security.oauth2.jwt.Jwt<span class="hljs-comment">;</span>
Â import org.springframework.security.oauth2.server.authorization.OAuth2Authorization<span class="hljs-comment">;</span>
Â import org.springframework.security.oauth2.server.authorization.OAuth2AuthorizationService<span class="hljs-comment">;</span>
Â import org.springframework.security.oauth2.server.authorization.OAuth2TokenType<span class="hljs-comment">;</span>
Â import org.springframework.security.oauth2.server.authorization.authentication.OAuth2AccessTokenAuthenticationToken<span class="hljs-comment">;</span>
Â import org.springframework.security.oauth2.server.authorization.authentication.OAuth2ClientAuthenticationToken<span class="hljs-comment">;</span>
Â import org.springframework.security.oauth2.server.authorization.authentication.OAuth2RefreshTokenAuthenticationToken<span class="hljs-comment">;</span>
Â import org.springframework.security.oauth2.server.authorization.client.RegisteredClient<span class="hljs-comment">;</span>
Â import org.springframework.security.oauth2.server.authorization.context.AuthorizationServerContextHolder<span class="hljs-comment">;</span>
Â import org.springframework.security.oauth2.server.authorization.token.DefaultOAuth2TokenContext<span class="hljs-comment">;</span>
Â import org.springframework.security.oauth2.server.authorization.token.OAuth2TokenContext<span class="hljs-comment">;</span>
Â import org.springframework.security.oauth2.server.authorization.token.OAuth2TokenGenerator<span class="hljs-comment">;</span>
Â import org.springframework.util.Assert<span class="hljs-comment">;</span>
Â â€‹
Â import java.util.Collections<span class="hljs-comment">;</span>
Â import java.util.HashMap<span class="hljs-comment">;</span>
Â import java.util.Map<span class="hljs-comment">;</span>
Â import java.util.Set<span class="hljs-comment">;</span>
Â â€‹
Â â€‹
Â public class OAuth2RefreshTokenAuthenticationProvider implements AuthenticationProvider {
Â  Â  Â private static final String <span class="hljs-attr">ERROR_URI</span> = <span class="hljs-string">"https://datatracker.ietf.org/doc/html/rfc6749#section-5.2"</span><span class="hljs-comment">;</span>
Â  Â  Â private static final OAuth2TokenType <span class="hljs-attr">ID_TOKEN_TOKEN_TYPE</span> = new OAuth2TokenType(OidcParameterNames.ID_TOKEN)<span class="hljs-comment">;</span>
Â  Â  Â private final Log <span class="hljs-attr">logger</span> = LogFactory.getLog(getClass())<span class="hljs-comment">;</span>
Â  Â  Â private final OAuth2AuthorizationService authorizationService<span class="hljs-comment">;</span>
Â  Â  Â private final OAuth2TokenGenerator&lt;? extends OAuth2Token&gt; tokenGenerator<span class="hljs-comment">;</span>
Â  Â  Â private final UserDetailsService userDetailsService<span class="hljs-comment">;</span>
Â  Â  Â /**
Â  Â  Â  * Constructs an {@code OAuth2RefreshTokenAuthenticationProvider} using the provided parameters.
Â  Â  Â  *
Â  Â  Â  * @param authorizationService the authorization service
Â  Â  Â  * @param tokenGenerator Â  Â  Â  the token generator
Â  Â  Â  * @since 0.2.3
Â  Â  Â  */
Â  Â  Â public OAuth2RefreshTokenAuthenticationProvider(OAuth2AuthorizationService authorizationService,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â OAuth2TokenGenerator&lt;? extends OAuth2Token&gt; tokenGenerator,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â UserDetailsService userDetailsService) {
Â  Â  Â  Â  Â Assert.notNull(authorizationService, "authorizationService cannot be null")<span class="hljs-comment">;</span>
Â  Â  Â  Â  Â Assert.notNull(tokenGenerator, "tokenGenerator cannot be null")<span class="hljs-comment">;</span>
Â  Â  Â  Â  Â <span class="hljs-attr">this.authorizationService</span> = authorizationService<span class="hljs-comment">;</span>
Â  Â  Â  Â  Â <span class="hljs-attr">this.tokenGenerator</span> = tokenGenerator<span class="hljs-comment">;</span>
Â  Â  Â  Â  Â <span class="hljs-attr">this.userDetailsService</span> = userDetailsService<span class="hljs-comment">;</span>
Â  Â   }
Â â€‹
Â  Â  Â @Override
Â  Â  Â public Authentication authenticate(Authentication authentication) throws AuthenticationException {
Â  Â  Â  Â  Â OAuth2RefreshTokenAuthenticationToken <span class="hljs-attr">refreshTokenAuthentication</span> =
Â  Â  Â  Â  Â  Â  Â  Â   (OAuth2RefreshTokenAuthenticationToken) authentication<span class="hljs-comment">;</span>
Â â€‹
Â  Â  Â  Â  Â OAuth2ClientAuthenticationToken <span class="hljs-attr">clientPrincipal</span> =
Â  Â  Â  Â  Â  Â  Â  Â  Â OAuth2AuthenticationProviderUtils.getAuthenticatedClientElseThrowInvalidClient(refreshTokenAuthentication)<span class="hljs-comment">;</span>
Â  Â  Â  Â  Â RegisteredClient <span class="hljs-attr">registeredClient</span> = clientPrincipal.getRegisteredClient()<span class="hljs-comment">;</span>
Â â€‹
Â  Â  Â  Â  Â if (this.logger.isTraceEnabled()) {
Â  Â  Â  Â  Â  Â  Â this.logger.trace("Retrieved registered client")<span class="hljs-comment">;</span>
Â  Â  Â  Â   }
Â â€‹
Â  Â  Â  Â  Â OAuth2Authorization <span class="hljs-attr">authorization</span> = this.authorizationService.findByToken(
Â  Â  Â  Â  Â  Â  Â  Â  Â refreshTokenAuthentication.getRefreshToken(), OAuth2TokenType.REFRESH_TOKEN)<span class="hljs-comment">;</span>
Â  Â  Â  Â  Â if (<span class="hljs-attr">authorization</span> == null) {
Â  Â  Â  Â  Â  Â  Â throw new OAuth2AuthenticationException(OAuth2ErrorCodes.INVALID_GRANT)<span class="hljs-comment">;</span>
Â  Â  Â  Â   }
Â â€‹
Â  Â  Â  Â  Â if (this.logger.isTraceEnabled()) {
Â  Â  Â  Â  Â  Â  Â this.logger.trace("Retrieved authorization with refresh token")<span class="hljs-comment">;</span>
Â  Â  Â  Â   }
Â â€‹
Â  Â  Â  Â  Â if (!registeredClient.getId().equals(authorization.getRegisteredClientId())) {
Â  Â  Â  Â  Â  Â  Â throw new OAuth2AuthenticationException(OAuth2ErrorCodes.INVALID_CLIENT)<span class="hljs-comment">;</span>
Â  Â  Â  Â   }
Â â€‹
Â  Â  Â  Â  Â if (!registeredClient.getAuthorizationGrantTypes().contains(AuthorizationGrantType.REFRESH_TOKEN)) {
Â  Â  Â  Â  Â  Â  Â throw new OAuth2AuthenticationException(OAuth2ErrorCodes.UNAUTHORIZED_CLIENT)<span class="hljs-comment">;</span>
Â  Â  Â  Â   }
Â â€‹
Â  Â  Â  Â  Â OAuth2Authorization.Token&lt;OAuth2RefreshToken&gt; <span class="hljs-attr">refreshToken</span> = authorization.getRefreshToken()<span class="hljs-comment">;</span>
Â  Â  Â  Â  Â if (!refreshToken.isActive()) {
Â  Â  Â  Â  Â  Â  Â // As per https://tools.ietf.org/html/rfc6749<span class="hljs-comment">#section-5.2</span>
Â  Â  Â  Â  Â  Â  Â // invalid_grant: The provided authorization grant (e.g., authorization code,
Â  Â  Â  Â  Â  Â  Â // resource owner credentials) or refresh token is invalid, expired, revoked <span class="hljs-section">[...]</span>.
Â  Â  Â  Â  Â  Â  Â throw new OAuth2AuthenticationException(OAuth2ErrorCodes.INVALID_GRANT)<span class="hljs-comment">;</span>
Â  Â  Â  Â   }
Â â€‹
Â  Â  Â  Â  Â // As per https://tools.ietf.org/html/rfc6749<span class="hljs-comment">#section-6</span>
Â  Â  Â  Â  Â // The requested scope MUST NOT include any scope not originally granted by the resource owner,
Â  Â  Â  Â  Â // and if omitted is treated as equal to the scope originally granted by the resource owner.
Â  Â  Â  Â  Â Set&lt;String&gt; <span class="hljs-attr">scopes</span> = refreshTokenAuthentication.getScopes()<span class="hljs-comment">;</span>
Â  Â  Â  Â  Â Set&lt;String&gt; <span class="hljs-attr">authorizedScopes</span> = authorization.getAuthorizedScopes()<span class="hljs-comment">;</span>
Â  Â  Â  Â  Â if (!authorizedScopes.containsAll(scopes)) {
Â  Â  Â  Â  Â  Â  Â throw new OAuth2AuthenticationException(OAuth2ErrorCodes.INVALID_SCOPE)<span class="hljs-comment">;</span>
Â  Â  Â  Â   }
Â â€‹
Â  Â  Â  Â  Â if (this.logger.isTraceEnabled()) {
Â  Â  Â  Â  Â  Â  Â this.logger.trace("Validated token request parameters")<span class="hljs-comment">;</span>
Â  Â  Â  Â   }
Â â€‹
Â  Â  Â  Â  Â if (scopes.isEmpty()) {
Â  Â  Â  Â  Â  Â  Â <span class="hljs-attr">scopes</span> = authorizedScopes<span class="hljs-comment">;</span>
Â  Â  Â  Â   }
Â â€‹
Â // Â  Â  Â   AuthenticationManager <span class="hljs-attr">authenticationManager</span> = http.getSharedObject(AuthenticationManager.class)<span class="hljs-comment">;</span>
Â // Â  Â  Â   Authentication <span class="hljs-attr">usernamePasswordAuthentication</span> = authenticationManager
Â // Â  Â  Â  Â  Â  Â  Â   .authenticate(new UsernamePasswordAuthenticationToken(authorization.getPrincipalName(),null))<span class="hljs-comment">;</span>
Â  Â  Â  Â  Â //éœ€è¦ç›´æ¥è·å–åˆ°ç™»å½•ç”¨æˆ·ä¿¡æ¯
Â  Â  Â  Â  Â String <span class="hljs-attr">principalName</span> = authorization.getPrincipalName()<span class="hljs-comment">;</span>
Â  Â  Â  Â  Â User <span class="hljs-attr">user</span> = (User) userDetailsService.loadUserByUsername(principalName)<span class="hljs-comment">;</span>
Â  Â  Â  Â  Â Authentication <span class="hljs-attr">principalAuth</span> = new UsernamePasswordAuthenticationToken(user, null, user.getAuthorities())<span class="hljs-comment">;</span>
Â  Â  Â  Â  Â // @formatter:off
Â  Â  Â  Â  Â DefaultOAuth2TokenContext.Builder <span class="hljs-attr">tokenContextBuilder</span> = DefaultOAuth2TokenContext.builder()
Â  Â  Â  Â  Â  Â  Â  Â   .registeredClient(registeredClient)
Â  Â  Â  Â  Â  Â  Â  Â   .principal(principalAuth)
Â  Â  Â  Â  Â  Â  Â  Â   .authorizationServerContext(AuthorizationServerContextHolder.getContext())
Â  Â  Â  Â  Â  Â  Â  Â   .authorization(authorization)
Â  Â  Â  Â  Â  Â  Â  Â   .authorizedScopes(scopes)
Â  Â  Â  Â  Â  Â  Â  Â   .authorizationGrantType(AuthorizationGrantType.REFRESH_TOKEN)
Â  Â  Â  Â  Â  Â  Â  Â   .authorizationGrant(refreshTokenAuthentication)<span class="hljs-comment">;</span>
Â  Â  Â  Â  Â // @formatter:on
Â â€‹
Â  Â  Â  Â  Â OAuth2Authorization.Builder <span class="hljs-attr">authorizationBuilder</span> = OAuth2Authorization.from(authorization)<span class="hljs-comment">;</span>
Â â€‹
Â  Â  Â  Â  Â // ----- Access token -----
Â  Â  Â  Â  Â OAuth2TokenContext <span class="hljs-attr">tokenContext</span> = tokenContextBuilder.tokenType(OAuth2TokenType.ACCESS_TOKEN).build()<span class="hljs-comment">;</span>
Â  Â  Â  Â  Â OAuth2Token <span class="hljs-attr">generatedAccessToken</span> = this.tokenGenerator.generate(tokenContext)<span class="hljs-comment">;</span>
Â  Â  Â  Â  Â if (<span class="hljs-attr">generatedAccessToken</span> == null) {
Â  Â  Â  Â  Â  Â  Â OAuth2Error <span class="hljs-attr">error</span> = new OAuth2Error(OAuth2ErrorCodes.SERVER_ERROR,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â "The token generator failed to generate the access token.", ERROR_URI)<span class="hljs-comment">;</span>
Â  Â  Â  Â  Â  Â  Â throw new OAuth2AuthenticationException(error)<span class="hljs-comment">;</span>
Â  Â  Â  Â   }
Â â€‹
Â  Â  Â  Â  Â if (this.logger.isTraceEnabled()) {
Â  Â  Â  Â  Â  Â  Â this.logger.trace("Generated access token")<span class="hljs-comment">;</span>
Â  Â  Â  Â   }
Â â€‹
Â  Â  Â  Â  Â OAuth2AccessToken <span class="hljs-attr">accessToken</span> = new OAuth2AccessToken(OAuth2AccessToken.TokenType.BEARER,
Â  Â  Â  Â  Â  Â  Â  Â  Â generatedAccessToken.getTokenValue(), generatedAccessToken.getIssuedAt(),
Â  Â  Â  Â  Â  Â  Â  Â  Â generatedAccessToken.getExpiresAt(), tokenContext.getAuthorizedScopes())<span class="hljs-comment">;</span>
Â  Â  Â  Â  Â if (generatedAccessToken instanceof ClaimAccessor) {
Â  Â  Â  Â  Â  Â  Â authorizationBuilder.token(accessToken, (metadata) -&gt; {
Â  Â  Â  Â  Â  Â  Â  Â  Â metadata.put(OAuth2Authorization.Token.CLAIMS_METADATA_NAME, ((ClaimAccessor) generatedAccessToken).getClaims())<span class="hljs-comment">;</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â metadata.put(OAuth2Authorization.Token.INVALIDATED_METADATA_NAME, false)<span class="hljs-comment">;</span>
Â  Â  Â  Â  Â  Â   })<span class="hljs-comment">;</span>
Â  Â  Â  Â   } else {
Â  Â  Â  Â  Â  Â  Â authorizationBuilder.accessToken(accessToken)<span class="hljs-comment">;</span>
Â  Â  Â  Â   }
Â â€‹
Â  Â  Â  Â  Â // ----- Refresh token -----
Â  Â  Â  Â  Â OAuth2RefreshToken <span class="hljs-attr">currentRefreshToken</span> = refreshToken.getToken()<span class="hljs-comment">;</span>
Â  Â  Â  Â  Â if (!registeredClient.getTokenSettings().isReuseRefreshTokens()) {
Â  Â  Â  Â  Â  Â  Â <span class="hljs-attr">tokenContext</span> = tokenContextBuilder.tokenType(OAuth2TokenType.REFRESH_TOKEN).build()<span class="hljs-comment">;</span>
Â  Â  Â  Â  Â  Â  Â OAuth2Token <span class="hljs-attr">generatedRefreshToken</span> = this.tokenGenerator.generate(tokenContext)<span class="hljs-comment">;</span>
Â  Â  Â  Â  Â  Â  Â if (!(generatedRefreshToken instanceof OAuth2RefreshToken)) {
Â  Â  Â  Â  Â  Â  Â  Â  Â OAuth2Error <span class="hljs-attr">error</span> = new OAuth2Error(OAuth2ErrorCodes.SERVER_ERROR,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â "The token generator failed to generate the refresh token.", ERROR_URI)<span class="hljs-comment">;</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â throw new OAuth2AuthenticationException(error)<span class="hljs-comment">;</span>
Â  Â  Â  Â  Â  Â   }
Â â€‹
Â  Â  Â  Â  Â  Â  Â if (this.logger.isTraceEnabled()) {
Â  Â  Â  Â  Â  Â  Â  Â  Â this.logger.trace("Generated refresh token")<span class="hljs-comment">;</span>
Â  Â  Â  Â  Â  Â   }
Â â€‹
Â  Â  Â  Â  Â  Â  Â <span class="hljs-attr">currentRefreshToken</span> = (OAuth2RefreshToken) generatedRefreshToken<span class="hljs-comment">;</span>
Â  Â  Â  Â  Â  Â  Â authorizationBuilder.refreshToken(currentRefreshToken)<span class="hljs-comment">;</span>
Â  Â  Â  Â   }
Â â€‹
Â  Â  Â  Â  Â // ----- ID token -----
Â  Â  Â  Â  Â OidcIdToken idToken<span class="hljs-comment">;</span>
Â  Â  Â  Â  Â if (authorizedScopes.contains(OidcScopes.OPENID)) {
Â  Â  Â  Â  Â  Â  Â // @formatter:off
Â  Â  Â  Â  Â  Â  Â <span class="hljs-attr">tokenContext</span> = tokenContextBuilder
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â   .tokenType(ID_TOKEN_TOKEN_TYPE)
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â   .authorization(authorizationBuilder.build())    // ID token customizer may need access to the access token and/or refresh token
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â   .build()<span class="hljs-comment">;</span>
Â  Â  Â  Â  Â  Â  Â // @formatter:on
Â  Â  Â  Â  Â  Â  Â OAuth2Token <span class="hljs-attr">generatedIdToken</span> = this.tokenGenerator.generate(tokenContext)<span class="hljs-comment">;</span>
Â  Â  Â  Â  Â  Â  Â if (!(generatedIdToken instanceof Jwt)) {
Â  Â  Â  Â  Â  Â  Â  Â  Â OAuth2Error <span class="hljs-attr">error</span> = new OAuth2Error(OAuth2ErrorCodes.SERVER_ERROR,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â "The token generator failed to generate the ID token.", ERROR_URI)<span class="hljs-comment">;</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â throw new OAuth2AuthenticationException(error)<span class="hljs-comment">;</span>
Â  Â  Â  Â  Â  Â   }
Â â€‹
Â  Â  Â  Â  Â  Â  Â if (this.logger.isTraceEnabled()) {
Â  Â  Â  Â  Â  Â  Â  Â  Â this.logger.trace("Generated id token")<span class="hljs-comment">;</span>
Â  Â  Â  Â  Â  Â   }
Â â€‹
Â  Â  Â  Â  Â  Â  Â <span class="hljs-attr">idToken</span> = new OidcIdToken(generatedIdToken.getTokenValue(), generatedIdToken.getIssuedAt(),
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â generatedIdToken.getExpiresAt(), ((Jwt) generatedIdToken).getClaims())<span class="hljs-comment">;</span>
Â  Â  Â  Â  Â  Â  Â authorizationBuilder.token(idToken, (metadata) -&gt;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â metadata.put(OAuth2Authorization.Token.CLAIMS_METADATA_NAME, idToken.getClaims()))<span class="hljs-comment">;</span>
Â  Â  Â  Â   } else {
Â  Â  Â  Â  Â  Â  Â <span class="hljs-attr">idToken</span> = null<span class="hljs-comment">;</span>
Â  Â  Â  Â   }
Â â€‹
Â  Â  Â  Â  Â <span class="hljs-attr">authorization</span> = authorizationBuilder.build()<span class="hljs-comment">;</span>
Â â€‹
Â  Â  Â  Â  Â this.authorizationService.save(authorization)<span class="hljs-comment">;</span>
Â â€‹
Â  Â  Â  Â  Â if (this.logger.isTraceEnabled()) {
Â  Â  Â  Â  Â  Â  Â this.logger.trace("Saved authorization")<span class="hljs-comment">;</span>
Â  Â  Â  Â   }
Â â€‹
Â  Â  Â  Â  Â Map&lt;String, Object&gt; <span class="hljs-attr">additionalParameters</span> = Collections.emptyMap()<span class="hljs-comment">;</span>
Â  Â  Â  Â  Â if (idToken != null) {
Â  Â  Â  Â  Â  Â  Â <span class="hljs-attr">additionalParameters</span> = new HashMap&lt;&gt;()<span class="hljs-comment">;</span>
Â  Â  Â  Â  Â  Â  Â additionalParameters.put(OidcParameterNames.ID_TOKEN, idToken.getTokenValue())<span class="hljs-comment">;</span>
Â  Â  Â  Â   }
Â â€‹
Â  Â  Â  Â  Â if (this.logger.isTraceEnabled()) {
Â  Â  Â  Â  Â  Â  Â this.logger.trace("Authenticated token request")<span class="hljs-comment">;</span>
Â  Â  Â  Â   }
Â â€‹
Â  Â  Â  Â  Â return new OAuth2AccessTokenAuthenticationToken(
Â  Â  Â  Â  Â  Â  Â  Â  Â registeredClient, clientPrincipal, accessToken, currentRefreshToken, additionalParameters)<span class="hljs-comment">;</span>
Â  Â   }
Â â€‹
Â  Â  Â @Override
Â  Â  Â public boolean supports(Class&lt;?&gt; authentication) {
Â  Â  Â  Â  Â return OAuth2RefreshTokenAuthenticationToken.class.isAssignableFrom(authentication)<span class="hljs-comment">;</span>
Â  Â   }
Â }
Â â€‹
</code></pre>
</li>
<li>
<p>OAuth2AuthenticationProviderUtils</p>
<pre><code class="hljs language-scss" lang="scss">Â import org<span class="hljs-selector-class">.springframework</span><span class="hljs-selector-class">.security</span><span class="hljs-selector-class">.core</span><span class="hljs-selector-class">.Authentication</span>;
Â import org<span class="hljs-selector-class">.springframework</span><span class="hljs-selector-class">.security</span><span class="hljs-selector-class">.oauth2</span><span class="hljs-selector-class">.core</span><span class="hljs-selector-class">.OAuth2AuthenticationException</span>;
Â import org<span class="hljs-selector-class">.springframework</span><span class="hljs-selector-class">.security</span><span class="hljs-selector-class">.oauth2</span><span class="hljs-selector-class">.core</span><span class="hljs-selector-class">.OAuth2ErrorCodes</span>;
Â import org<span class="hljs-selector-class">.springframework</span><span class="hljs-selector-class">.security</span><span class="hljs-selector-class">.oauth2</span><span class="hljs-selector-class">.core</span><span class="hljs-selector-class">.OAuth2RefreshToken</span>;
Â import org<span class="hljs-selector-class">.springframework</span><span class="hljs-selector-class">.security</span><span class="hljs-selector-class">.oauth2</span><span class="hljs-selector-class">.core</span><span class="hljs-selector-class">.OAuth2Token</span>;
Â import org<span class="hljs-selector-class">.springframework</span><span class="hljs-selector-class">.security</span><span class="hljs-selector-class">.oauth2</span><span class="hljs-selector-class">.server</span><span class="hljs-selector-class">.authorization</span><span class="hljs-selector-class">.OAuth2Authorization</span>;
Â import org<span class="hljs-selector-class">.springframework</span><span class="hljs-selector-class">.security</span><span class="hljs-selector-class">.oauth2</span><span class="hljs-selector-class">.server</span><span class="hljs-selector-class">.authorization</span><span class="hljs-selector-class">.OAuth2AuthorizationCode</span>;
Â import org<span class="hljs-selector-class">.springframework</span><span class="hljs-selector-class">.security</span><span class="hljs-selector-class">.oauth2</span><span class="hljs-selector-class">.server</span><span class="hljs-selector-class">.authorization</span><span class="hljs-selector-class">.authentication</span><span class="hljs-selector-class">.OAuth2ClientAuthenticationToken</span>;
Â â€‹
Â public class OAuth2AuthenticationProviderUtils {
Â  Â  Â private <span class="hljs-built_in">OAuth2AuthenticationProviderUtils</span>() {
Â  Â   }
Â â€‹
Â  Â  Â static OAuth2ClientAuthenticationToken <span class="hljs-built_in">getAuthenticatedClientElseThrowInvalidClient</span>(Authentication authentication) {
Â  Â  Â  Â  Â OAuth2ClientAuthenticationToken clientPrincipal = null;
Â  Â  Â  Â  Â if (OAuth2ClientAuthenticationToken.class.isAssignableFrom(authentication.getPrincipal()<span class="hljs-selector-class">.getClass</span>())) {
Â  Â  Â  Â  Â  Â  Â clientPrincipal = (OAuth2ClientAuthenticationToken) authentication<span class="hljs-selector-class">.getPrincipal</span>();
Â  Â  Â  Â   }
Â  Â  Â  Â  Â if (clientPrincipal != null &amp;&amp; clientPrincipal.isAuthenticated()) {
Â  Â  Â  Â  Â  Â  Â return clientPrincipal;
Â  Â  Â  Â   }
Â  Â  Â  Â  Â throw new <span class="hljs-built_in">OAuth2AuthenticationException</span>(OAuth2ErrorCodes.INVALID_CLIENT);
Â  Â   }
Â â€‹
Â  Â  Â static &lt;T extends OAuth2Token&gt; OAuth2Authorization <span class="hljs-built_in">invalidate</span>(
Â  Â  Â  Â  Â  Â  Â OAuth2Authorization authorization, T token) {
Â â€‹
Â  Â  Â  Â  Â <span class="hljs-comment">// @formatter:off</span>
Â  Â  Â  Â  Â OAuth2Authorization<span class="hljs-selector-class">.Builder</span> authorizationBuilder = OAuth2Authorization<span class="hljs-selector-class">.from</span>(authorization)
Â  Â  Â  Â  Â  Â  Â  Â   <span class="hljs-selector-class">.token</span>(token,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â   (metadata) -&gt;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â metadata<span class="hljs-selector-class">.put</span>(OAuth2Authorization.Token.INVALIDATED_METADATA_NAME, true));
Â â€‹
Â  Â  Â  Â  Â if (OAuth2RefreshToken.class.isAssignableFrom(token.getClass())) {
Â  Â  Â  Â  Â  Â  Â authorizationBuilder<span class="hljs-selector-class">.token</span>(
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â authorization.getAccessToken()<span class="hljs-selector-class">.getToken</span>(),
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â   (metadata) -&gt;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â metadata<span class="hljs-selector-class">.put</span>(OAuth2Authorization.Token.INVALIDATED_METADATA_NAME, true));
Â â€‹
Â  Â  Â  Â  Â  Â  Â OAuth2Authorization<span class="hljs-selector-class">.Token</span>&lt;OAuth2AuthorizationCode&gt; authorizationCode =
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â authorization<span class="hljs-selector-class">.getToken</span>(OAuth2AuthorizationCode.class);
Â  Â  Â  Â  Â  Â  Â if (authorizationCode != null &amp;&amp; !authorizationCode.isInvalidated()) {
Â  Â  Â  Â  Â  Â  Â  Â  Â authorizationBuilder<span class="hljs-selector-class">.token</span>(
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â authorizationCode.getToken(),
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â   (metadata) -&gt;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â metadata<span class="hljs-selector-class">.put</span>(OAuth2Authorization.Token.INVALIDATED_METADATA_NAME, true));
Â  Â  Â  Â  Â  Â   }
Â  Â  Â  Â   }
Â  Â  Â  Â  Â <span class="hljs-comment">// @formatter:on</span>
Â â€‹
Â  Â  Â  Â  Â return authorizationBuilder<span class="hljs-selector-class">.build</span>();
Â  Â   }
Â }
</code></pre>
</li>
<li>
<p>AuthorizationServerConfiguration,ä»»åŠ¡æœåŠ¡çš„é…ç½®é¡¹ï¼Œè¿™ä¸ªå¾ˆé‡è¦ï¼Œå½±å“åˆ°tokençš„åˆ·æ–°åŠŸèƒ½</p>
<pre><code class="hljs language-less" lang="less">Â <span class="hljs-selector-tag">http</span><span class="hljs-selector-class">.apply</span>(authorizationServerConfigurer.<span class="hljs-built_in">tokenEndpoint</span>((tokenEndpoint) -&gt; {<span class="hljs-comment">// ä¸ªæ€§åŒ–è®¤è¯æˆæƒç«¯ç‚¹</span>
Â                     <span class="hljs-comment">//å¤„ç† OAuth2RefreshTokenAuthenticationToken åˆ·æ–°ä»¤ç‰Œ</span>
Â             OAuth2RefreshTokenAuthenticationProvider oAuth2RefreshTokenAuthenticationProvider = new <span class="hljs-built_in">OAuth2RefreshTokenAuthenticationProvider</span>(
Â                     authorizationService, <span class="hljs-built_in">oAuth2TokenGenerator</span>(),slkjUserDetailsService);
Â â€‹
Â             tokenEndpoint.<span class="hljs-built_in">accessTokenRequestConverter</span>(<span class="hljs-built_in">accessTokenRequestConverter</span>()) <span class="hljs-comment">// æ³¨å…¥è‡ªå®šä¹‰çš„æˆæƒè®¤è¯Converter</span>
Â                     .<span class="hljs-built_in">authenticationProviders</span>(providers -&gt; {
Â                         <span class="hljs-comment">// ç§»é™¤é»˜è®¤çš„ OAuth2RefreshTokenAuthenticationProvider</span>
Â                         providers.<span class="hljs-built_in">removeIf</span>(p -&gt; p instanceof OAuth2RefreshTokenAuthenticationProvider);
Â                     })
Â                     .<span class="hljs-built_in">authenticationProvider</span>(slkjOAuth2RefreshTokenAuthenticationProvider)
Â                     .<span class="hljs-built_in">accessTokenResponseHandler</span>(successEventHandler) <span class="hljs-comment">// ç™»å½•æˆåŠŸå¤„ç†å™¨</span>
Â                     .<span class="hljs-built_in">errorResponseHandler</span>(failureEventHandler);<span class="hljs-comment">// ç™»å½•å¤±è´¥å¤„ç†å™¨</span>
Â         }).<span class="hljs-built_in">clientAuthentication</span>(oAuth2ClientAuthenticationConfigurer -&gt; <span class="hljs-comment">// ä¸ªæ€§åŒ–å®¢æˆ·ç«¯è®¤è¯</span>
</code></pre>
<p>éœ€è¦å†è¿™è¾¹æ·»åŠ OAuth2RefreshTokenAuthenticationProviderï¼Œç„¶åç§»é™¤é»˜è®¤çš„ OAuth2RefreshTokenAuthenticationProvider</p>
</li>
</ul>
<h3 data-id="heading-4">å†™åœ¨æœ€åï¼šç»™è¿˜åœ¨å‘é‡Œçš„å…„å¼Ÿä»¬</h3>
<ul>
<li><strong>ç»Ÿä¸€ JSON åºåˆ—åŒ–</strong>ï¼ŒJDK åºåˆ—åŒ–è·¨ç‰ˆæœ¬å¿…ç‚¸ï¼</li>
<li><strong>æ¸…ç†è„æ•°æ®</strong>ï¼Œè¿™æ˜¯ 90% å¼‚å¸¸çš„å…ƒå‡¶ï¼</li>
<li><strong>åˆ«åŠ å¤ªå¤šè‡ªå®šä¹‰ Module</strong>ï¼Œå®¹æ˜“æŠŠè‡ªå·±ç©æ­»ğŸ˜‚</li>
<li><strong>æµ‹è¯•ç”¨ serializer.serialize() å­˜æ•°æ®</strong>ï¼Œåˆ«æ‰‹å†™ JSONï¼</li>
<li>è‡ªå®šä¹‰ Provider åï¼Œ<strong>ç§»é™¤é»˜è®¤çš„Provider</strong>ï¼</li>
</ul>
<p>å¦‚æœä½ ä¹Ÿåœ¨æ··ç”¨ Boot 2.7 å’Œ 3.2ï¼Œèµ¶ç´§æ”¶è—è¿™ç¯‡ï¼ è¸©å‘ä¸€ä¸ªæœˆï¼Œæˆ‘å“­äº†ï¼Œä½ åˆ«å“­äº†ï½,å¦å¤–æˆ‘çš„ä»£ç ä¸ä¸€å®šè·Ÿæ‚¨çš„ä¸€æ¨¡ä¸€æ ·ï¼Œæ‰€ä»¥ï¼Œä»…ä¾›å‚è€ƒï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[react hookæ³¨æ„äº‹é¡¹]]></title>    <link>https://juejin.cn/post/7589462007527784482</link>    <guid>https://juejin.cn/post/7589462007527784482</guid>    <pubDate>2025-12-30T09:06:47.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589462007527784482" data-draft-id="7589308109640990755" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="react hookæ³¨æ„äº‹é¡¹"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-30T09:06:47.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é’ç“œè¾¾åˆ©å›­"/> <meta itemprop="url" content="https://juejin.cn/user/4062065158258954"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            react hookæ³¨æ„äº‹é¡¹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4062065158258954/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é’ç“œè¾¾åˆ©å›­
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-30T09:06:47.000Z" title="Tue Dec 30 2025 09:06:47 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å†™ä»£ç å‡ºé”™äº†ï¼Œå¾ˆå°‘æ·±å…¥äº†è§£ hookã€‚è®©aiç»™æ€»ç»“äº†ä¸€ä¸‹ã€‚</p>
<p>è¿™ç¡®å®æ˜¯ React ä¸­éå¸¸æ ¸å¿ƒä¸”å®¹æ˜“è¢«å¿½è§†çš„â€œé“å¾‹â€ã€‚React çš„å¾ˆå¤šè®¾è®¡ç†å¿µä¸ä¼ ç»Ÿçš„å‘½ä»¤å¼ç¼–ç¨‹ï¼ˆå¦‚ jQueryï¼‰æˆ–åŸºäºç±»çš„ç¼–ç¨‹ï¼ˆVue Options APIï¼‰ä¸å¤ªä¸€æ ·ï¼Œå› æ­¤æœ‰å¾ˆå¤šç±»ä¼¼çš„â€œæ½œè§„åˆ™â€å’Œé™·é˜±ã€‚</p>
<p>ä»¥ä¸‹ä¸ºæ‚¨æ•´ç†äº† <strong>React å¼€å‘ä¸­å¿…é¡»çŸ¥é“çš„ 6 ä¸ªæ ¸å¿ƒæ³¨æ„äº‹é¡¹</strong>ï¼ŒæŒæ¡è¿™äº›å¯ä»¥å¸®æ‚¨é¿å¼€ 90% çš„ Bugï¼š</p>
<h3 data-id="heading-0">1. <code>useEffect</code> ä¾èµ–æ•°ç»„ä¸èƒ½â€œæ’’è°â€ (Stale Closure / é—­åŒ…é™·é˜±)</h3>
<p>è¿™æ˜¯ Hook æœ€å®¹æ˜“å‡º Bug çš„åœ°æ–¹ã€‚å¦‚æœä½ åœ¨ <code>useEffect</code> æˆ– <code>useCallback</code> å†…éƒ¨ä½¿ç”¨äº†æŸä¸ªå˜é‡ï¼Œä½†æ²¡æœ‰æŠŠå®ƒåŠ åˆ°ä¾èµ–æ•°ç»„ <code>[]</code> ä¸­ï¼ŒHook å†…éƒ¨å°±ä¼šä¸€ç›´å¼•ç”¨<strong>æ—§çš„å˜é‡å€¼</strong>ã€‚</p>
<ul>
<li>
<p><strong>âŒ é”™è¯¯å†™æ³•ï¼š</strong></p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-keyword">const</span> [count, setCount] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>);

<span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">const</span> timer = <span class="hljs-built_in">setInterval</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(count); <span class="hljs-comment">// æ°¸è¿œæ‰“å° 0ï¼å› ä¸ºè¿™é‡Œçš„ count æ˜¯é—­åŒ…æ•è·çš„åˆå§‹å€¼</span>
  }, <span class="hljs-number">1000</span>);
  <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">clearInterval</span>(timer);
}, []); <span class="hljs-comment">// ä¾èµ–æ•°ç»„æ˜¯ç©ºçš„ï¼Œå¯¼è‡´ effect åªè¿è¡Œä¸€æ¬¡ï¼Œå†…éƒ¨æ°¸è¿œæ‹¿ç€æ—§çš„ count</span>
</code></pre>
</li>
<li>
<p><strong>âœ… æ­£ç¡®å†™æ³•ï¼š</strong></p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">const</span> timer = <span class="hljs-built_in">setInterval</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(count);
  }, <span class="hljs-number">1000</span>);
  <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">clearInterval</span>(timer);
}, [count]); <span class="hljs-comment">// ä¾èµ– countï¼Œæ¯æ¬¡ count å˜åŒ–ï¼Œeffect ä¼šé”€æ¯æ—§çš„å¹¶é‡æ–°è¿è¡Œ</span>
</code></pre>
<p><em>æˆ–è€…ä½¿ç”¨å‡½æ•°å¼æ›´æ–°ï¼ˆå¦‚æœä¸ä¾èµ–å¤–éƒ¨å˜é‡è§¦å‘ Effectï¼‰ï¼š</em></p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-title function_">setCount</span>(<span class="hljs-function"><span class="hljs-params">prevCount</span> =&gt;</span> prevCount + <span class="hljs-number">1</span>); <span class="hljs-comment">// è¿™ç§å†™æ³•ä¸éœ€è¦ä¾èµ– count</span>
</code></pre>
</li>
</ul>
<h3 data-id="heading-1">2. State æ›´æ–°æ˜¯â€œå¼‚æ­¥â€çš„ï¼ˆå¿«ç…§ç‰¹æ€§ï¼‰</h3>
<p>è°ƒç”¨ <code>setState</code> åï¼ŒçŠ¶æ€<strong>ä¸ä¼š</strong>ç«‹å³æ”¹å˜ã€‚React ä¼šæŠŠæ›´æ–°æ”¾å…¥é˜Ÿåˆ—ï¼Œç­‰åˆ°ä¸‹ä¸€æ¬¡æ¸²æŸ“æ—¶æ‰ä¼šç”Ÿæ•ˆã€‚</p>
<ul>
<li>
<p><strong>âŒ å¸¸è§è¯¯åŒºï¼š</strong></p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">handleClick</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-title function_">setCount</span>(count + <span class="hljs-number">1</span>);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(count); <span class="hljs-comment">// æ‰“å°çš„ä»ç„¶æ˜¯æ—§å€¼ï¼ä¸æ˜¯ +1 åçš„å€¼</span>

  <span class="hljs-comment">// å¦‚æœæ­¤æ—¶å‘è¯·æ±‚ï¼Œå‘å‡ºå»çš„ä¹Ÿæ˜¯æ—§å€¼</span>
  <span class="hljs-title function_">fetchData</span>(count); 
};
</code></pre>
</li>
<li>
<p>âœ… æ­£ç¡®ç†è§£ï¼š</p>
<p>å¦‚æœä½ éœ€è¦ä½¿ç”¨æ›´æ–°åçš„å€¼ï¼Œåº”è¯¥ä½¿ç”¨ useEffect ç›‘å¬è¯¥å€¼çš„å˜åŒ–ï¼Œæˆ–è€…åœ¨ setState ä¸­ä½¿ç”¨å›è°ƒå‡½æ•°ï¼ˆä»…ç”¨äºè®¡ç®—æ–°å€¼ï¼‰ã€‚</p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(count); <span class="hljs-comment">// è¿™é‡Œæ‰èƒ½æ‹¿åˆ°æ›´æ–°åçš„å€¼</span>
  <span class="hljs-title function_">fetchData</span>(count);
}, [count]);
</code></pre>
</li>
</ul>
<h3 data-id="heading-2">3. æ°¸è¿œä¸è¦ç›´æ¥ä¿®æ”¹ State (Immutability / ä¸å¯å˜æ€§)</h3>
<p>React æ¯”è¾ƒçŠ¶æ€æ˜¯å¦å˜åŒ–æ˜¯åŸºäº<strong>å¼•ç”¨æ¯”è¾ƒ</strong>ï¼ˆShallow Compareï¼‰ã€‚å¦‚æœä½ ç›´æ¥ä¿®æ”¹å¯¹è±¡å±æ€§ï¼Œå¼•ç”¨åœ°å€æ²¡å˜ï¼ŒReact å°±ä¸çŸ¥é“æ•°æ®å˜äº†ï¼Œé¡µé¢å°±ä¸ä¼šåˆ·æ–°ã€‚</p>
<ul>
<li>
<p><strong>âŒ é”™è¯¯å†™æ³•ï¼š</strong></p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-keyword">const</span> [user, setUser] = <span class="hljs-title function_">useState</span>({ <span class="hljs-attr">name</span>: <span class="hljs-string">'Alice'</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">18</span> });

<span class="hljs-keyword">const</span> <span class="hljs-title function_">updateName</span> = (<span class="hljs-params"/>) =&gt; {
  user.<span class="hljs-property">name</span> = <span class="hljs-string">'Bob'</span>; <span class="hljs-comment">// ä¿®æ”¹äº†å†…å®¹ï¼Œä½†å¯¹è±¡å¼•ç”¨æ²¡å˜</span>
  <span class="hljs-title function_">setUser</span>(user);     <span class="hljs-comment">// React è®¤ä¸ºå‰åæ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼Œä¸è§¦å‘é‡æ–°æ¸²æŸ“</span>
};
</code></pre>
</li>
<li>
<p><strong>âœ… æ­£ç¡®å†™æ³•ï¼š</strong></p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">updateName</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡ï¼ˆå¤åˆ¶æ—§å±æ€§ + è¦†ç›–æ–°å±æ€§ï¼‰</span>
  <span class="hljs-title function_">setUser</span>({ ...user, <span class="hljs-attr">name</span>: <span class="hljs-string">'Bob'</span> }); 
};
</code></pre>
</li>
</ul>
<h3 data-id="heading-3">4. åˆ—è¡¨æ¸²æŸ“å¿…é¡»æœ‰å”¯ä¸€çš„ <code>key</code>ï¼ˆä¸”å°½é‡ä¸è¦ç”¨ indexï¼‰</h3>
<p><code>key</code> æ˜¯ React è¯†åˆ« DOM èŠ‚ç‚¹çš„èº«ä»½è¯ã€‚å¦‚æœä½¿ç”¨æ•°ç»„ç´¢å¼•ï¼ˆindexï¼‰ä½œä¸º keyï¼Œå½“åˆ—è¡¨é¡ºåºå‘ç”Ÿå˜åŒ–ï¼ˆæ’å…¥ã€åˆ é™¤ã€æ’åºï¼‰æ—¶ï¼ŒReact ä¼šå¤ç”¨é”™è¯¯çš„ DOM èŠ‚ç‚¹ï¼Œå¯¼è‡´çŠ¶æ€é”™ä¹±ã€‚</p>
<ul>
<li>
<p><strong>âŒ é£é™©å†™æ³•ï¼š</strong></p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-comment">// å¦‚æœåˆ—è¡¨é¡ºåºä¼šå˜ï¼Œåƒä¸‡åˆ«ç”¨ index</span>
{items.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">item, index</span>) =&gt;</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">key</span>=<span class="hljs-string">{index}</span>&gt;</span>{item.name}<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span></span>)}
</code></pre>
</li>
<li>
<p><strong>âœ… æ­£ç¡®å†™æ³•ï¼š</strong></p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-comment">// ä½¿ç”¨æ•°æ®ä¸­çš„å”¯ä¸€ ID</span>
{items.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">item</span>) =&gt;</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">key</span>=<span class="hljs-string">{item.id}</span>&gt;</span>{item.name}<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span></span>)}
</code></pre>
</li>
</ul>
<h3 data-id="heading-4">5. <code>useEffect</code> çš„æ¸…ç†å‡½æ•° (Cleanup Function)</h3>
<p>å¦‚æœåœ¨ <code>useEffect</code> ä¸­è®¢é˜…äº†äº‹ä»¶ã€è®¾ç½®äº†å®šæ—¶å™¨æˆ–å‘èµ·äº†è¯·æ±‚ï¼Œå¿…é¡»è¿”å›ä¸€ä¸ªæ¸…ç†å‡½æ•°ï¼Œå¦åˆ™ä¼šå¯¼è‡´å†…å­˜æ³„æ¼æˆ–é€»è¾‘é”™è¯¯ï¼ˆæ¯”å¦‚ç»„ä»¶å¸è½½äº†ä½†å®šæ—¶å™¨è¿˜åœ¨è·‘ï¼‰ã€‚</p>
<ul>
<li>
<p><strong>âœ… æ ‡å‡†æ¨¡æ¿ï¼š</strong></p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-comment">// 1. è®¾ç½®å‰¯ä½œç”¨</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleResize</span> = (<span class="hljs-params"/>) =&gt; <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">window</span>.<span class="hljs-property">innerWidth</span>);
  <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'resize'</span>, handleResize);

  <span class="hljs-comment">// 2. è¿”å›æ¸…ç†å‡½æ•°</span>
  <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">'resize'</span>, handleResize);
  };
}, []);
</code></pre>
</li>
</ul>
<h3 data-id="heading-5">6. React Strict Mode ä¸‹çš„â€œé‡å¤æ‰§è¡Œâ€</h3>
<p>åœ¨å¼€å‘ç¯å¢ƒï¼ˆDevelopmentï¼‰ä¸­ï¼Œä¸ºäº†å¸®ä½ æ£€æŸ¥ä¸çº¯çš„å‰¯ä½œç”¨ï¼ŒReact çš„ <code>&lt;StrictMode&gt;</code> ä¼šæ•…æ„å°†ä½ çš„ç»„ä»¶<strong>æ¸²æŸ“ä¸¤æ¬¡</strong>ï¼Œ<code>useEffect</code> ä¹Ÿä¼šæ‰§è¡Œä¸¤æ¬¡ã€‚</p>
<ul>
<li><strong>ç°è±¡</strong>ï¼šä½ çœ‹æ§åˆ¶å°æ—¥å¿—ï¼Œå‘ç° API è¯·æ±‚å‘äº†ä¸¤æ¬¡ï¼Œæˆ–è€… <code>console.log</code> æ‰“å°äº†ä¸¤æ¬¡ã€‚</li>
<li><strong>æ³¨æ„</strong>ï¼šè¿™<strong>ä¸æ˜¯ Bug</strong>ï¼Œç”Ÿäº§ç¯å¢ƒï¼ˆProductionï¼‰ä¸ä¼šå‘ç”Ÿã€‚ä¸è¦ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜å»å†™å¥‡æ€ªçš„ä»£ç ï¼Œè€Œåº”è¯¥ç¡®ä¿ä½ çš„ Effect æ˜¯å¯ä»¥é‡å¤æ‰§è¡Œä¸”æ— å®³çš„ï¼ˆåšå¥½æ¸…ç†å·¥ä½œï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-6">æ€»ç»“å»ºè®®</h3>
<p>æ‚¨åˆšé‡åˆ°çš„ <strong>â€œHook é¡ºåºä¸æ•°é‡å¿…é¡»ä¸€è‡´â€</strong> æ˜¯ React è¿è¡Œæœºåˆ¶çš„ç‰©ç†é™åˆ¶ï¼ˆReact å†…éƒ¨æ˜¯é æ•°ç»„ç´¢å¼•æ¥è®°å½•æ¯ä¸ª Hook çš„çŠ¶æ€çš„ï¼Œå¦‚æœé¡ºåºä¹±äº†ï¼ŒçŠ¶æ€å°±å¼ å† ææˆ´äº†ï¼‰ã€‚</p>
<p>è€Œä¸Šé¢æåˆ°çš„è¿™ 6 ç‚¹ï¼Œæ›´å¤šæ˜¯<strong>é€»è¾‘å’Œæ¨¡å¼</strong>ä¸Šçš„æ³¨æ„äº‹é¡¹ã€‚æŒæ¡äº†è¿™äº›ï¼Œæ‚¨å†™ React å°±ä¼šéå¸¸æœ‰åº•æ°”äº†ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è¶…è¯¦ç»† Vue CLI ç§»åŠ¨ç«¯é¢„è§ˆæ’ä»¶å®æˆ˜ï¼šæ”¯æŒæœ¬åœ°/TPGZ/NPM/Git å¤šåœºæ™¯ä½¿ç”¨ï¼ˆå°ç™½é›¶åŸºç¡€å…¥é—¨ï¼‰]]></title>    <link>https://juejin.cn/post/7589454621719380018</link>    <guid>https://juejin.cn/post/7589454621719380018</guid>    <pubDate>2025-12-30T09:11:50.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589454621719380018" data-draft-id="7589231401659138058" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è¶…è¯¦ç»† Vue CLI ç§»åŠ¨ç«¯é¢„è§ˆæ’ä»¶å®æˆ˜ï¼šæ”¯æŒæœ¬åœ°/TPGZ/NPM/Git å¤šåœºæ™¯ä½¿ç”¨ï¼ˆå°ç™½é›¶åŸºç¡€å…¥é—¨ï¼‰"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-30T09:11:50.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é›…ç—_yuppie"/> <meta itemprop="url" content="https://juejin.cn/user/3466134893364247"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è¶…è¯¦ç»† Vue CLI ç§»åŠ¨ç«¯é¢„è§ˆæ’ä»¶å®æˆ˜ï¼šæ”¯æŒæœ¬åœ°/TPGZ/NPM/Git å¤šåœºæ™¯ä½¿ç”¨ï¼ˆå°ç™½é›¶åŸºç¡€å…¥é—¨ï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3466134893364247/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é›…ç—_yuppie
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-30T09:11:50.000Z" title="Tue Dec 30 2025 09:11:50 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»15åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">æ‘˜è¦</h2>
<p>ä½ æ˜¯å¦è¿˜åœ¨ä¸ºã€Œç§»åŠ¨ç«¯å¦‚ä½•å¿«é€Ÿé¢„è§ˆæœ¬åœ° Vue å¼€å‘é¡¹ç›®ã€è€Œçƒ¦æ¼ï¼Ÿæ‰‹åŠ¨æŸ¥æ‰¾å±€åŸŸç½‘ IPã€è¾“å…¥ç«¯å£å·ç¹çåˆå®¹æ˜“å‡ºé”™ï¼Ÿæœ¬æ–‡å°†å›´ç»•ã€Œ<strong>å®ç°ç§»åŠ¨ç«¯ä¾¿æ·é¢„è§ˆæœ¬åœ°æœåŠ¡é¡¹ç›®</strong>ã€è¿™ä¸€æ ¸å¿ƒéœ€æ±‚ï¼Œæ‰‹æŠŠæ‰‹æ•™ä½ å¼€å‘ä¸€æ¬¾ Vue CLI ä¸“å±äºŒç»´ç æ’ä»¶ã€‚æ’ä»¶ä¸ä»…èƒ½è‡ªåŠ¨ç”Ÿæˆç§»åŠ¨ç«¯å¯æ‰«ç çš„äºŒç»´ç ï¼Œè¿˜å®Œç¾æ”¯æŒæœ¬åœ°è°ƒè¯•ã€TGZ å‹ç¼©åŒ…ã€NPM å…¬å¼€åŒ…ã€Git ä»“åº“å››ç§ä½¿ç”¨åœºæ™¯ï¼ŒåŒæ—¶é™„å¸¦è§£å†³æ’ä»¶å¼€å‘ä¸­ã€ŒäºŒç»´ç è¾“å‡ºæ—¶æœºã€çš„å¸¸è§é—®é¢˜ï¼Œä»£ç å¯ç›´æ¥å¤åˆ¶ï¼Œå°ç™½ä¹Ÿèƒ½è½»æ¾ä¸Šæ‰‹ï¼</p>
<h2 data-id="heading-1">ä¸€ã€å‰è¨€</h2>
<p>åœ¨ Vue é¡¹ç›®å¼€å‘è¿‡ç¨‹ä¸­ï¼Œã€Œç§»åŠ¨ç«¯é¢„è§ˆæœ¬åœ°æœåŠ¡ã€æ˜¯é«˜é¢‘åˆšéœ€ï¼šå¼€å‘è€…éœ€è¦åœ¨æ‰‹æœºä¸ŠéªŒè¯é¡µé¢é€‚é…ã€äº¤äº’æ•ˆæœç­‰ï¼Œä½†ä¼ ç»Ÿæ–¹å¼éœ€è¦æ‰‹åŠ¨æŸ¥è¯¢ç”µè„‘å±€åŸŸç½‘ IPã€è®°å½•é¡¹ç›®ç«¯å£ï¼Œå†åœ¨æ‰‹æœºæµè§ˆå™¨ä¸­è¾“å…¥åœ°å€ï¼Œæ­¥éª¤ç¹çä¸”å®¹æ˜“å‡ºé”™ï¼ˆå¦‚ IP è¾“å…¥é”™è¯¯ã€ç«¯å£å†²çªç­‰ï¼‰ã€‚</p>
<p>æœ¬æ–‡çš„æ ¸å¿ƒç›®æ ‡æ˜¯ï¼šå¼€å‘ä¸€æ¬¾ Vue CLI æ’ä»¶ï¼Œé€šè¿‡ã€Œè‡ªåŠ¨ç”Ÿæˆå¯è§†åŒ–äºŒç»´ç ã€çš„æ–¹å¼ï¼Œè®©æ‰‹æœºæ‰«ç å³å¯å¿«é€Ÿè®¿é—®æœ¬åœ° Vue æœåŠ¡ï¼ŒåŒæ—¶æ”¯æŒæœ¬åœ°è°ƒè¯•ã€TGZ åŒ…ã€NPM åŒ…ã€Git åŒ…å››ç§ä½¿ç”¨åœºæ™¯ï¼Œæ»¡è¶³ä¸ªäººå¼€å‘ã€å›¢é˜Ÿåä½œã€å…¨ç½‘å¤ç”¨ç­‰ä¸åŒéœ€æ±‚ï¼ŒåŒæ—¶è§£å†³å¼€å‘è¿‡ç¨‹ä¸­ã€ŒäºŒç»´ç è¾“å‡ºæ—¶æœºã€çš„å¸¸è§é—®é¢˜ã€‚</p>
<h2 data-id="heading-2">äºŒã€æ ¸å¿ƒéœ€æ±‚ä¸æ’ä»¶ä¼˜åŠ¿</h2>
<h3 data-id="heading-3">1.  æ ¸å¿ƒéœ€æ±‚</h3>
<ul>
<li>æ ¸å¿ƒåŠŸèƒ½ï¼šè‡ªåŠ¨è·å–ç”µè„‘å±€åŸŸç½‘ IP + é¡¹ç›®ç«¯å£ï¼Œç”Ÿæˆç§»åŠ¨ç«¯å¯æ‰«ç çš„äºŒç»´ç ï¼Œæ‰«ç å³å¯è®¿é—®æœ¬åœ° Vue æœåŠ¡ï¼›</li>
<li>å¤šåœºæ™¯ä½¿ç”¨ï¼šæ”¯æŒæœ¬åœ°è°ƒè¯•ï¼ˆæœªå‘å¸ƒæ’ä»¶ï¼‰ã€TGZ å‹ç¼©åŒ…ï¼ˆç§æœ‰éƒ¨ç½²ï¼‰ã€NPM å…¬å¼€åŒ…ï¼ˆå…¨ç½‘å¤ç”¨ï¼‰ã€Git ä»“åº“ï¼ˆå›¢é˜Ÿåä½œï¼‰å››ç§å¼•å…¥æ–¹å¼ï¼›</li>
<li>å…¼å®¹æ€§å¼ºï¼šæ”¯æŒ Vue 2/Vue 3 é¡¹ç›®ï¼Œé€‚é… Vue CLI 3+ æ‰€æœ‰ç‰ˆæœ¬ï¼›</li>
<li>æ— éœ€æ‰‹åŠ¨é…ç½®ï¼šæ’ä»¶è‡ªåŠ¨å¼€å¯å±€åŸŸç½‘è®¿é—®ï¼Œæ— éœ€ç”¨æˆ·ä¿®æ”¹ <code>vue.config.js</code>ï¼›</li>
<li>ç»†èŠ‚ä¼˜åŒ–ï¼šè§£å†³äºŒç»´ç è¾“å‡ºæ—¶æœºé—®é¢˜ï¼Œç¡®ä¿ä½¿ç”¨ä½“éªŒæµç•…ï¼Œé¿å…æ—¥å¿—æ··ä¹±æˆ–è¾“å‡ºè¿‡æ™šã€‚</li>
</ul>
<h3 data-id="heading-4">2.  æ’ä»¶æ ¸å¿ƒä¼˜åŠ¿</h3>





























<table><thead><tr><th>ä¼˜åŠ¿ç‚¹</th><th>å…·ä½“è¯´æ˜</th></tr></thead><tbody><tr><td>ä¾¿æ·æ€§</td><td>æ‰«ç è®¿é—®ï¼Œæ— éœ€æ‰‹åŠ¨è¾“å…¥ IP + ç«¯å£ï¼Œé›¶å‡ºé”™</td></tr><tr><td>å¤šåœºæ™¯å…¼å®¹</td><td>æ”¯æŒæœ¬åœ°/TPGZ/NPM/Git å››ç§ä½¿ç”¨æ–¹å¼</td></tr><tr><td>æ— ä¾µå…¥æ€§</td><td>ä¸ä¿®æ”¹é¡¹ç›®åŸæœ‰ä»£ç ï¼Œå¸è½½åæ— æ®‹ç•™</td></tr><tr><td>è‡ªåŠ¨é…ç½®</td><td>è‡ªåŠ¨å¼€å¯ <code>host: 0.0.0.0</code>ï¼Œæ”¯æŒå±€åŸŸç½‘è®¿é—®</td></tr><tr><td>ç»†èŠ‚ä¼˜åŒ–</td><td>è§£å†³äºŒç»´ç è¾“å‡ºæ—¶æœºé—®é¢˜ï¼Œæ—¥å¿—æ•´æ´ç¾è§‚</td></tr></tbody></table>
<h2 data-id="heading-5">ä¸‰ã€ç¬¬ä¸€æ­¥ï¼šæ’ä»¶å¼€å‘ï¼ˆæ ¸å¿ƒåŠŸèƒ½å®ç°ï¼Œæ”¯æŒç§»åŠ¨ç«¯æ‰«ç é¢„è§ˆï¼‰</h2>
<h3 data-id="heading-6">1.  æ’ä»¶ç›®å½•è§„èŒƒï¼ˆVue CLI è¦æ±‚ï¼Œå¿…é¡»éµå®ˆï¼‰</h3>
<p>Vue CLI æ’ä»¶å¿…é¡»ä»¥ <code>vue-cli-plugin-xxx</code> å‘½åï¼Œå¦åˆ™æ— æ³•è¢«é¡¹ç›®è‡ªåŠ¨è¯†åˆ«ï¼Œæ‰§è¡Œå‘½ä»¤åˆ›å»ºç›®å½•ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åˆ›å»ºæ’ä»¶ç›®å½•å¹¶è¿›å…¥ï¼ˆå°ç™½ç›´æ¥å¤åˆ¶ç»ˆç«¯æ‰§è¡Œï¼‰</span>
<span class="hljs-built_in">mkdir</span> vue-cli-plugin-vue-mobile-preview &amp;&amp; <span class="hljs-built_in">cd</span> vue-cli-plugin-vue-mobile-preview
</code></pre>
<h3 data-id="heading-7">2.  åˆå§‹åŒ– package.jsonï¼ˆé…ç½®æ’ä»¶ä¿¡æ¯ä¸ä¾èµ–ï¼‰</h3>
<p>åœ¨æ’ä»¶ç›®å½•ä¸‹æ‰§è¡Œ <code>npm init -y</code> å¿«é€Ÿç”Ÿæˆé…ç½®æ–‡ä»¶ï¼Œå†æ‰‹åŠ¨æ›¿æ¢ä¸ºä»¥ä¸‹å†…å®¹ï¼ˆç¡®ä¿ä¾èµ–ä¸å…¼å®¹æ€§ï¼‰ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"vue-cli-plugin-vue-mobile-preview"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"version"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"1.0.0"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"description"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Vue CLI 3+ æ’ä»¶ï¼šè‡ªåŠ¨ç”ŸæˆäºŒç»´ç ï¼Œæ”¯æŒç§»åŠ¨ç«¯æ‰«ç é¢„è§ˆæœ¬åœ°VueæœåŠ¡ï¼Œå…¼å®¹æœ¬åœ°/TGZ/NPM/Gitå¤šåœºæ™¯"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"main"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"index.js"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"keywords"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-string">"vue"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-string">"vue-cli"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-string">"mobile preview"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-string">"qrcode"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-string">"local service"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-string">"TGZ"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-string">"NPM"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-string">"Git"</span>
  <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"dependencies"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"qrcode"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^1.5.3"</span> <span class="hljs-comment">// æ ¸å¿ƒä¾èµ–ï¼šç”¨äºç”Ÿæˆç»ˆç«¯å¯è§†åŒ–äºŒç»´ç </span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"peerDependencies"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"@vue/cli-service"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"&gt;=3.0.0"</span> <span class="hljs-comment">// å…¼å®¹ Vue CLI 3+ æ‰€æœ‰ç‰ˆæœ¬</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"author"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ä½ çš„å§“å"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"license"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"MIT"</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<ul>
<li>å…³é”®è¯´æ˜ï¼š<code>dependencies</code> ä¸­å£°æ˜ <code>qrcode</code> ä¾èµ–ï¼Œç”¨æˆ·å®‰è£…æ’ä»¶åæ— éœ€æ‰‹åŠ¨å®‰è£…ï¼›<code>peerDependencies</code> ç¡®ä¿æ’ä»¶ä¸ Vue CLI ç‰ˆæœ¬å…¼å®¹ã€‚</li>
</ul>
<h3 data-id="heading-8">3.  ç¼–å†™æ ¸å¿ƒ index.jsï¼ˆå®ç°ç§»åŠ¨ç«¯æ‰«ç é¢„è§ˆæ ¸å¿ƒåŠŸèƒ½ï¼‰</h3>
<p>è¿™æ˜¯æ’ä»¶çš„æ ¸å¿ƒæ–‡ä»¶ï¼Œå®ç°ã€Œè‡ªåŠ¨è·å–å±€åŸŸç½‘ IP + é¡¹ç›®ç«¯å£ + ç”ŸæˆäºŒç»´ç ã€çš„æ ¸å¿ƒåŠŸèƒ½ï¼ŒåŒæ—¶è§£å†³ã€ŒäºŒç»´ç è¾“å‡ºæ—¶æœºã€é—®é¢˜ï¼Œä»£ç å«è¯¦ç»†æ³¨é‡Šï¼Œå°ç™½å¯ç›´æ¥å¤åˆ¶ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å¼•å…¥æ ¸å¿ƒä¾èµ–</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">QRCode</span> = <span class="hljs-built_in">require</span>(<span class="hljs-string">'qrcode'</span>);
<span class="hljs-keyword">const</span> os = <span class="hljs-built_in">require</span>(<span class="hljs-string">'os'</span>); <span class="hljs-comment">// Node.js åŸç”Ÿæ¨¡å—ï¼Œæ— éœ€é¢å¤–å®‰è£…ï¼Œç”¨äºè·å–å±€åŸŸç½‘IP</span>

<span class="hljs-comment">/**
 * æ ¸å¿ƒåŠŸèƒ½1ï¼šè‡ªåŠ¨è·å–æœ¬æœºå±€åŸŸç½‘ IPv4 åœ°å€ï¼ˆç§»åŠ¨ç«¯è®¿é—®éœ€è¦è¯¥ IPï¼‰
 * <span class="hljs-doctag">@returns</span> {<span class="hljs-type">string</span>} æœ‰æ•ˆå±€åŸŸç½‘IP | å…œåº•æœ¬åœ°å›ç¯åœ°å€ï¼ˆ127.0.0.1ï¼‰
 */</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">getLocalLanIp</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> networkInterfaces = os.<span class="hljs-title function_">networkInterfaces</span>();
  <span class="hljs-comment">// éå†æ‰€æœ‰ç½‘å¡æ¥å£ï¼Œç­›é€‰ç¬¦åˆæ¡ä»¶çš„å±€åŸŸç½‘ IP</span>
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> ifaceName <span class="hljs-keyword">in</span> networkInterfaces) {
    <span class="hljs-keyword">const</span> ifaceList = networkInterfaces[ifaceName];
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> iface <span class="hljs-keyword">of</span> ifaceList) {
      <span class="hljs-comment">// è¿‡æ»¤æ¡ä»¶ï¼šIPv4 åè®®ã€éæœ¬åœ°å›ç¯åœ°å€ã€éè™šæ‹Ÿå†…ç½‘åœ°å€</span>
      <span class="hljs-keyword">if</span> (iface.<span class="hljs-property">family</span> === <span class="hljs-string">'IPv4'</span> &amp;&amp; !iface.<span class="hljs-property">internal</span> &amp;&amp; iface.<span class="hljs-property">address</span> !== <span class="hljs-string">'127.0.0.1'</span>) {
        <span class="hljs-keyword">return</span> iface.<span class="hljs-property">address</span>; <span class="hljs-comment">// è¿”å›æœ‰æ•ˆå±€åŸŸç½‘ IP</span>
      }
    }
  }
  <span class="hljs-comment">// å…œåº•ï¼šæœªè·å–åˆ°å±€åŸŸç½‘ IP æ—¶ï¼Œè¿”å›æœ¬åœ°å›ç¯åœ°å€ï¼ˆä»…æœ¬æœºå¯è®¿é—®ï¼Œç§»åŠ¨ç«¯æ— æ³•æ‰«ç ï¼‰</span>
  <span class="hljs-keyword">return</span> <span class="hljs-string">'127.0.0.1'</span>;
}

<span class="hljs-comment">/**
 * æ ¸å¿ƒåŠŸèƒ½2ï¼šç”Ÿæˆå¹¶æ‰“å°ç§»åŠ¨ç«¯å¯æ‰«ç çš„äºŒç»´ç ï¼ˆæ ¸å¿ƒé€»è¾‘ï¼‰
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">string</span>} lanIp å±€åŸŸç½‘ IP
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">number</span>} port é¡¹ç›®ç«¯å£
 */</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">printMobileQrcode</span>(<span class="hljs-params">lanIp, port</span>) {
  <span class="hljs-comment">// æ„é€ ç§»åŠ¨ç«¯è®¿é—®åœ°å€ï¼ˆæ ¸å¿ƒï¼šå±€åŸŸç½‘ IP + é¡¹ç›®ç«¯å£ï¼Œæ‰‹æœºæ‰«ç å³å¯è®¿é—®ï¼‰</span>
  <span class="hljs-keyword">const</span> mobileAccessUrl = <span class="hljs-string">`http://<span class="hljs-subst">${lanIp}</span>:<span class="hljs-subst">${port}</span>`</span>;
  <span class="hljs-comment">// æ„é€ æœ¬æœºè®¿é—®åœ°å€ï¼ˆç”¨äºæç¤ºå¼€å‘è€…ï¼‰</span>
  <span class="hljs-keyword">const</span> localAccessUrl = <span class="hljs-string">`http://localhost:<span class="hljs-subst">${port}</span>`</span>;

  <span class="hljs-comment">// æ‰“å°é†’ç›®æç¤ºä¿¡æ¯ï¼ŒåŒºåˆ†æ—¥å¿—å±‚çº§</span>
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'\n====================================================='</span>);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ğŸ‰ [vue-cli-plugin-vue-mobile-preview] ç§»åŠ¨ç«¯é¢„è§ˆäºŒç»´ç å·²ç”Ÿæˆï¼'</span>);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`ğŸ”§  æœ¬æœºè®¿é—®åœ°å€ï¼š<span class="hljs-subst">${localAccessUrl}</span>`</span>);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`ğŸŒ  ç§»åŠ¨ç«¯è®¿é—®åœ°å€ï¼š<span class="hljs-subst">${mobileAccessUrl}</span>`</span>);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ğŸ“±  æ‰«ç æç¤ºï¼šæ‰‹æœºä¸ç”µè„‘è¿æ¥åŒä¸€ WiFiï¼Œæ‰“å¼€ç›¸æœº/å¾®ä¿¡æ‰«ä¸€æ‰«å³å¯é¢„è§ˆï¼\n'</span>);

  <span class="hljs-comment">// ç”Ÿæˆç»ˆç«¯å¯è§†åŒ–äºŒç»´ç </span>
  <span class="hljs-title class_">QRCode</span>.<span class="hljs-title function_">toString</span>(mobileAccessUrl, {
    <span class="hljs-attr">type</span>: <span class="hljs-string">'terminal'</span>, <span class="hljs-comment">// è¾“å‡ºåˆ°ç»ˆç«¯</span>
    <span class="hljs-attr">margin</span>: <span class="hljs-number">1</span>, <span class="hljs-comment">// äºŒç»´ç è¾¹è·ï¼ˆç´§å‡‘ç¾è§‚ï¼‰</span>
    <span class="hljs-attr">small</span>: <span class="hljs-literal">false</span> <span class="hljs-comment">// æ˜¾ç¤ºå¤§å°ºå¯¸äºŒç»´ç ï¼Œæé«˜æ‰‹æœºæ‰«ç æˆåŠŸç‡</span>
  }, <span class="hljs-function">(<span class="hljs-params">err, qrCodeStr</span>) =&gt;</span> {
    <span class="hljs-keyword">if</span> (!err) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(qrCodeStr); <span class="hljs-comment">// æ‰“å°äºŒç»´ç </span>
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-comment">// å¼‚å¸¸æ•è·ï¼šäºŒç»´ç ç”Ÿæˆå¤±è´¥æ—¶ï¼Œè¾“å‡ºé”™è¯¯ä¿¡æ¯ä½†ä¸å½±å“é¡¹ç›®è¿è¡Œ</span>
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'âŒ äºŒç»´ç ç”Ÿæˆå¤±è´¥ï¼š'</span>, err.<span class="hljs-property">message</span>);
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ğŸ’¡ æ›¿ä»£æ–¹æ¡ˆï¼šæ‰‹åŠ¨åœ¨æ‰‹æœºæµè§ˆå™¨è¾“å…¥åœ°å€ -&gt; '</span>, mobileAccessUrl);
    }
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'=====================================================\n'</span>);
  });
}

<span class="hljs-comment">/**
 * è¾…åŠ©å˜é‡ï¼šæ ‡è®°æ˜¯å¦å·²æ‰“å°äºŒç»´ç ï¼ˆé¿å…çƒ­æ›´æ–°æ—¶é‡å¤è¾“å‡ºï¼‰
 */</span>
<span class="hljs-keyword">let</span> hasPrintQrcode = <span class="hljs-literal">false</span>;

<span class="hljs-comment">/**
 * Vue CLI æ’ä»¶æ ¸å¿ƒå¯¼å‡ºå‡½æ•°ï¼ˆå…¥å£é€»è¾‘ï¼‰
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">Object</span>} api Vue CLI æ ¸å¿ƒ API
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">Object</span>} options é¡¹ç›®çš„ vue.config.js é…ç½®é¡¹
 */</span>
<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = <span class="hljs-function">(<span class="hljs-params">api, options</span>) =&gt;</span> {
  api.<span class="hljs-title function_">chainWebpack</span>(<span class="hljs-function">(<span class="hljs-params">config</span>) =&gt;</span> {
    <span class="hljs-comment">// æ ¸å¿ƒé…ç½®ï¼šå¼ºåˆ¶è®¾ç½® host: 0.0.0.0ï¼Œå…è®¸å±€åŸŸç½‘è®¾å¤‡ï¼ˆæ‰‹æœºï¼‰è®¿é—®æœ¬åœ°æœåŠ¡</span>
    <span class="hljs-comment">// æ— éœ€ç”¨æˆ·æ‰‹åŠ¨ä¿®æ”¹ vue.config.jsï¼Œæ’ä»¶è‡ªåŠ¨é…ç½®</span>
    config.<span class="hljs-property">devServer</span>.<span class="hljs-title function_">host</span>(<span class="hljs-string">'0.0.0.0'</span>);

    <span class="hljs-comment">// è§£å†³äºŒç»´ç è¾“å‡ºæ—¶æœºé—®é¢˜ï¼šä½¿ç”¨ compiler.hooks.done äº‹ä»¶ï¼ˆé¡¹ç›®å®Œå…¨å°±ç»ªåè¾“å‡ºï¼Œé¿å…æ—¥å¿—æ··ä¹±ï¼‰</span>
    <span class="hljs-comment">// è¿™æ˜¯æ’ä»¶å¼€å‘ä¸­çš„ç»†èŠ‚ä¼˜åŒ–ï¼Œä¸å½±å“æ ¸å¿ƒçš„ç§»åŠ¨ç«¯é¢„è§ˆåŠŸèƒ½</span>
    config.<span class="hljs-title function_">plugin</span>(<span class="hljs-string">'mobile-preview-qrcode-plugin'</span>).<span class="hljs-title function_">use</span>(<span class="hljs-keyword">class</span> <span class="hljs-title class_">MobilePreviewPlugin</span> {
      <span class="hljs-title function_">apply</span>(<span class="hljs-params">compiler</span>) {
        <span class="hljs-comment">// compiler.hooks.doneï¼šWebpack ç¼–è¯‘ï¼ˆé¦–æ¬¡æ„å»º/çƒ­æ›´æ–°ï¼‰å®Œæˆåè§¦å‘</span>
        compiler.<span class="hljs-property">hooks</span>.<span class="hljs-property">done</span>.<span class="hljs-title function_">tap</span>(<span class="hljs-string">'MobilePreviewPlugin'</span>, <span class="hljs-function">() =&gt;</span> {
          <span class="hljs-comment">// ä»…åœ¨é¦–æ¬¡æ„å»ºå®Œæˆåæ‰“å°ä¸€æ¬¡äºŒç»´ç ï¼Œé¿å…çƒ­æ›´æ–°æ—¶é‡å¤è¾“å‡º</span>
          <span class="hljs-keyword">if</span> (hasPrintQrcode) {
            <span class="hljs-keyword">return</span>;
          }

          <span class="hljs-comment">// è·å–é¡¹ç›®ç«¯å£ï¼ˆä¼˜å…ˆä½¿ç”¨ç”¨æˆ·è‡ªå®šä¹‰ç«¯å£ï¼Œé»˜è®¤ 8080ï¼‰</span>
          <span class="hljs-keyword">const</span> devServerConfig = options.<span class="hljs-property">devServer</span> || {};
          <span class="hljs-keyword">const</span> projectPort = devServerConfig.<span class="hljs-property">port</span> || <span class="hljs-number">8080</span>;
          <span class="hljs-comment">// è·å–å±€åŸŸç½‘ IP</span>
          <span class="hljs-keyword">const</span> localLanIp = <span class="hljs-title function_">getLocalLanIp</span>();
          <span class="hljs-comment">// ç”Ÿæˆå¹¶æ‰“å°ç§»åŠ¨ç«¯é¢„è§ˆäºŒç»´ç </span>
          <span class="hljs-title function_">printMobileQrcode</span>(localLanIp, projectPort);

          <span class="hljs-comment">// æ ‡è®°å·²æ‰“å°äºŒç»´ç </span>
          hasPrintQrcode = <span class="hljs-literal">true</span>;
        });
      }
    });
  });
};
</code></pre>
<h3 data-id="heading-9">4.  æ’ä»¶æœ€ç»ˆç›®å½•ç»“æ„ï¼ˆå°ç™½æ ¸å¯¹ï¼Œç¡®ä¿æ— è¯¯ï¼‰</h3>
<p>æ’ä»¶ç›®å½•ä»…éœ€ 2 ä¸ªæ ¸å¿ƒæ–‡ä»¶ï¼Œç®€æ´æ˜“ç»´æŠ¤ï¼Œç»“æ„å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">vue-cli-plugin-vue-mobile-preview/
â”œâ”€â”€ index.js       <span class="hljs-comment"># æ ¸å¿ƒé€»è¾‘æ–‡ä»¶ï¼ˆå®ç°ç§»åŠ¨ç«¯æ‰«ç é¢„è§ˆ+æ—¶æœºä¼˜åŒ–ï¼‰</span>
â””â”€â”€ package.json   <span class="hljs-comment"># æ’ä»¶é…ç½®æ–‡ä»¶ï¼ˆä¾èµ–+å…¼å®¹æ€§é…ç½®ï¼‰</span>
</code></pre>
<h2 data-id="heading-10">å››ã€ç¬¬äºŒæ­¥ï¼šå¤šåœºæ™¯ä½¿ç”¨æ•™ç¨‹ï¼ˆæ ¸å¿ƒé‡ç‚¹ï¼Œè¦†ç›–æ‰€æœ‰ä½¿ç”¨åœºæ™¯ï¼‰</h2>
<p>æ’ä»¶å¼€å‘å®Œæˆåï¼Œæ”¯æŒ 4 ç§ä½¿ç”¨åœºæ™¯ï¼Œæ»¡è¶³ä¸åŒå¼€å‘éœ€æ±‚ï¼ˆä¸ªäººè°ƒè¯•ã€å›¢é˜Ÿåä½œã€å…¨ç½‘å¤ç”¨ç­‰ï¼‰ï¼Œæ­¥éª¤è¯¦ç»†ï¼Œå°ç™½å¯æŒ‰éœ€é€‰æ‹©ã€‚</p>
<h3 data-id="heading-11">åœºæ™¯1ï¼šæœ¬åœ°è°ƒè¯•ï¼ˆä¸ªäººå¼€å‘ï¼Œæœªå‘å¸ƒæ’ä»¶ï¼Œå¿«é€ŸéªŒè¯åŠŸèƒ½ï¼‰</h3>
<p>é€‚ç”¨äºæ’ä»¶å¼€å‘å®Œæˆåï¼Œä¸ªäººåœ¨æœ¬åœ° Vue é¡¹ç›®ä¸­éªŒè¯åŠŸèƒ½ï¼Œæ— éœ€å‘å¸ƒåˆ°ä»»ä½•ä»“åº“ã€‚</p>
<h4 data-id="heading-12">å‰ç½®å‡†å¤‡</h4>
<ul>
<li>æ’ä»¶ç›®å½•ä¸ç›®æ ‡ Vue é¡¹ç›®åŒçº§ï¼ˆæ–¹ä¾¿å…³è”ï¼‰ï¼Œç›®å½•ç»“æ„ç¤ºä¾‹ï¼š</li>
</ul>
<pre><code class="hljs language-perl" lang="perl">â”œâ”€â”€ vue-cli-plugin-vue-mobile-preview/  <span class="hljs-comment"># æ’ä»¶ç›®å½•</span>
â””â”€â”€ <span class="hljs-keyword">my</span>-vue-project/                <span class="hljs-comment"># ç›®æ ‡ Vue é¡¹ç›®ï¼ˆéœ€è¦ç§»åŠ¨ç«¯é¢„è§ˆçš„é¡¹ç›®ï¼‰</span>
    â”œâ”€â”€ src/
    â”œâ”€â”€ package.json
    â””â”€â”€ ... å…¶ä»–é¡¹ç›®æ–‡ä»¶
</code></pre>
<h4 data-id="heading-13">æ“ä½œæ­¥éª¤</h4>
<ol>
<li>
<p>è¿›å…¥<strong>ç›®æ ‡ Vue é¡¹ç›®æ ¹ç›®å½•</strong>ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤å…³è”æœ¬åœ°æ’ä»¶ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># npm å‘½ä»¤ï¼ˆå…¼å®¹æ‰€æœ‰ç¯å¢ƒï¼Œæ¨èå°ç™½ä½¿ç”¨ï¼‰</span>
npm install file:../vue-cli-plugin-vue-mobile-preview --save-dev

<span class="hljs-comment"># è‹¥ä½¿ç”¨ pnpmï¼Œæ‰§è¡Œæ­¤å‘½ä»¤</span>
<span class="hljs-comment"># pnpm add file:../vue-cli-plugin-vue-mobile-preview -D</span>

<span class="hljs-comment"># è‹¥ä½¿ç”¨ yarnï¼Œæ‰§è¡Œæ­¤å‘½ä»¤</span>
<span class="hljs-comment"># yarn add file:../vue-cli-plugin-vue-mobile-preview --dev</span>
</code></pre>
<ul>
<li>è·¯å¾„è¯´æ˜ï¼š<code>../vue-cli-plugin-vue-mobile-preview</code> æ˜¯æ’ä»¶çš„ç›¸å¯¹è·¯å¾„ï¼Œè‹¥ç›®å½•å±‚çº§ä¸åŒå¯è°ƒæ•´ï¼ˆå¦‚ <code>../../xxx</code>ï¼‰ã€‚</li>
</ul>
</li>
<li>
<p>éªŒè¯æ’ä»¶å®‰è£…æˆåŠŸï¼š
æŸ¥çœ‹ç›®æ ‡é¡¹ç›®çš„ <code>package.json</code> æ–‡ä»¶ï¼Œè‹¥ <code>devDependencies</code> ä¸­å‡ºç°ä»¥ä¸‹é…ç½®ï¼Œè¯´æ˜å…³è”æˆåŠŸï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-attr">"devDependencies"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"vue-cli-plugin-vue-mobile-preview"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"file:../vue-cli-plugin-vue-mobile-preview"</span>
<span class="hljs-punctuation">}</span>
</code></pre>
</li>
<li>
<p>å¯åŠ¨é¡¹ç›®ï¼ŒéªŒè¯ç§»åŠ¨ç«¯é¢„è§ˆåŠŸèƒ½ï¼š
åœ¨ç›®æ ‡é¡¹ç›®æ ¹ç›®å½•æ‰§è¡Œå¯åŠ¨å‘½ä»¤ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># Vue CLI 3+ é€šç”¨å‘½ä»¤</span>
npm run serve

<span class="hljs-comment"># å…¼å®¹å‘½ä»¤ï¼šnpm run devï¼ˆéƒ¨åˆ†é¡¹ç›®é…ç½®åˆ«åï¼‰</span>
</code></pre>
</li>
<li>
<p>ç§»åŠ¨ç«¯æ‰«ç é¢„è§ˆï¼š</p>
<ul>
<li>ç»ˆç«¯æœ€åä¼šè¾“å‡ºäºŒç»´ç ï¼ˆå¸¦é†’ç›®æç¤ºï¼‰ï¼›</li>
<li>ç¡®ä¿æ‰‹æœºä¸ç”µè„‘è¿æ¥<strong>åŒä¸€ WiFi</strong>ï¼ˆåŒä¸€å±€åŸŸç½‘ï¼‰ï¼›</li>
<li>æ‰“å¼€æ‰‹æœºç›¸æœº/å¾®ä¿¡/æ”¯ä»˜å®ã€Œæ‰«ä¸€æ‰«ã€ï¼Œæ‰«æç»ˆç«¯äºŒç»´ç ï¼Œå³å¯å¿«é€Ÿé¢„è§ˆæœ¬åœ° Vue é¡¹ç›®ã€‚</li>
</ul>
</li>
<li>
<p>æœ¬åœ°æ’ä»¶å¸è½½ï¼ˆè‹¥æ— éœ€ä½¿ç”¨ï¼‰ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># npm å‘½ä»¤</span>
npm uninstall vue-cli-plugin-vue-mobile-preview

<span class="hljs-comment"># pnpm/yarn å‘½ä»¤å¯¹åº”ï¼špnpm remove / yarn remove</span>
</code></pre>
</li>
</ol>
<h3 data-id="heading-14">åœºæ™¯2ï¼šTGZ å‹ç¼©åŒ…ä½¿ç”¨ï¼ˆç§æœ‰éƒ¨ç½²ï¼Œå›¢é˜Ÿå†…éƒ¨å¤ç”¨ï¼Œæ— éœ€å‘å¸ƒ NPMï¼‰</h3>
<p>é€‚ç”¨äºæ’ä»¶æ— éœ€å…¬å¼€ï¼Œä»…åœ¨å…¬å¸/å›¢é˜Ÿå†…éƒ¨å¤ç”¨ï¼Œå¯ä¸Šä¼ åˆ°ç§æœ‰æœåŠ¡å™¨æˆ–å…±äº«æ–‡ä»¶å¤¹ä¾›å›¢é˜Ÿæˆå‘˜ä½¿ç”¨ã€‚</p>
<h4 data-id="heading-15">æ“ä½œæ­¥éª¤</h4>
<ol>
<li>
<p>æ’ä»¶æ‰“åŒ…ä¸º TGZ å‹ç¼©åŒ…ï¼š
è¿›å…¥æ’ä»¶ç›®å½•ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤æ‰“åŒ…ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># è¿›å…¥æ’ä»¶ç›®å½•</span>
<span class="hljs-built_in">cd</span> vue-cli-plugin-vue-mobile-preview

<span class="hljs-comment"># æ‰“åŒ…ç”Ÿæˆ TGZ å‹ç¼©åŒ…ï¼ˆnpm pack æ˜¯ npm åŸç”Ÿå‘½ä»¤ï¼Œæ— éœ€é¢å¤–å®‰è£…å·¥å…·ï¼‰</span>
npm pack
</code></pre>
<ul>
<li>æ‰“åŒ…æˆåŠŸåï¼Œæ’ä»¶ç›®å½•åŒçº§ä¼šç”Ÿæˆ <code>vue-cli-plugin-vue-mobile-preview-1.0.0.tgz</code> æ–‡ä»¶ï¼ˆæ–‡ä»¶åæ ¼å¼ï¼šæ’ä»¶åç§°+ç‰ˆæœ¬å·ï¼‰ï¼›</li>
<li>è¯¥å‹ç¼©åŒ…åŒ…å«æ’ä»¶æ‰€æœ‰æ ¸å¿ƒæ–‡ä»¶ï¼Œå¯ç›´æ¥ç”¨äºå®‰è£…ã€‚</li>
</ul>
</li>
<li>
<p>åˆ†å‘ TGZ å‹ç¼©åŒ…ï¼š
å°†ç”Ÿæˆçš„ TGZ æ–‡ä»¶åˆ†å‘åˆ°å›¢é˜Ÿæˆå‘˜ï¼ˆå¦‚ä¸Šä¼ åˆ°å…¬å¸ç§æœ‰æœåŠ¡å™¨ã€å…±äº«ç½‘ç›˜ã€GitLab ç§æœ‰ä»“åº“é™„ä»¶ç­‰ï¼‰ï¼Œè·å–å¯è®¿é—®çš„è·¯å¾„/åœ°å€ï¼ˆç¤ºä¾‹ï¼‰ï¼š</p>
<ul>
<li>æœ¬åœ°å…±äº«ï¼š<code>/Users/xxx/Shared/vue-cli-plugin-vue-mobile-preview-1.0.0.tgz</code></li>
<li>ç§æœ‰æœåŠ¡å™¨ï¼š<code>https://xxx.company.com/plugins/vue-cli-plugin-vue-mobile-preview-1.0.0.tgz</code></li>
</ul>
</li>
<li>
<p>é¡¹ç›®ä¸­å®‰è£… TGZ æ’ä»¶ï¼š
è¿›å…¥ç›®æ ‡ Vue é¡¹ç›®æ ¹ç›®å½•ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤å®‰è£…ï¼ˆæ ¹æ® TGZ åœ°å€ç±»å‹é€‰æ‹©ï¼‰ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ–¹å¼1ï¼šå®‰è£…æœ¬åœ°/å…±äº«æ–‡ä»¶å¤¹ä¸­çš„ TGZ åŒ…</span>
npm install file:/Users/xxx/Shared/vue-cli-plugin-vue-mobile-preview-1.0.0.tgz --save-dev

<span class="hljs-comment"># æ–¹å¼2ï¼šå®‰è£…ç§æœ‰æœåŠ¡å™¨ä¸Šçš„ TGZ åŒ…ï¼ˆHTTPS åœ°å€ï¼‰</span>
npm install https://xxx.company.com/plugins/vue-cli-plugin-vue-mobile-preview-1.0.0.tgz --save-dev

<span class="hljs-comment"># pnpm/yarn å‘½ä»¤å…¼å®¹ï¼Œåªéœ€æ›¿æ¢ npm install ä¸º pnpm add / yarn add</span>
</code></pre>
</li>
<li>
<p>éªŒè¯ç§»åŠ¨ç«¯é¢„è§ˆåŠŸèƒ½ï¼š
æ‰§è¡Œ <code>npm run serve</code> å¯åŠ¨é¡¹ç›®ï¼Œåç»­æ­¥éª¤åŒã€Œæœ¬åœ°è°ƒè¯•ã€ï¼Œæ‰‹æœºæ‰«ç å³å¯é¢„è§ˆã€‚</p>
</li>
</ol>
<h3 data-id="heading-16">åœºæ™¯3ï¼šNPM å…¬å¼€åŒ…ä½¿ç”¨ï¼ˆå…¨ç½‘å¤ç”¨ï¼Œå¼€æºå…±äº«ï¼‰</h3>
<p>é€‚ç”¨äºæ’ä»¶åŠŸèƒ½æˆç†Ÿï¼Œéœ€è¦å…¬å¼€ç»™å…¨ç½‘å¼€å‘è€…ä½¿ç”¨ï¼Œå‘å¸ƒåˆ° npm å…¬å¼€ä»“åº“ã€‚</p>
<h4 data-id="heading-17">æ“ä½œæ­¥éª¤</h4>
<ol>
<li>
<p>å‰ç½®å‡†å¤‡ï¼š</p>
<ul>
<li>æ‹¥æœ‰ npm è´¦å·ï¼ˆæœªæ³¨å†Œå¯å‰å¾€ <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.npmjs.com%2F" target="_blank" title="https://www.npmjs.com/" ref="nofollow noopener noreferrer">npm å®˜ç½‘</a> æ³¨å†Œï¼‰ï¼›</li>
<li>åˆ‡æ¢åˆ° npm å®˜æ–¹æºï¼ˆè‹¥é…ç½®äº†å›½å†…é•œåƒæºï¼Œå°ç™½æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼‰ï¼š</li>
</ul>
<pre><code class="hljs language-bash" lang="bash">npm config <span class="hljs-built_in">set</span> registry https://registry.npmjs.org/
</code></pre>
</li>
<li>
<p>ç™»å½• npm è´¦å·ï¼š
è¿›å…¥æ’ä»¶ç›®å½•ï¼Œæ‰§è¡Œç™»å½•å‘½ä»¤ï¼ŒæŒ‰æç¤ºè¾“å…¥ç”¨æˆ·åã€å¯†ç ã€é‚®ç®±ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># è¿›å…¥æ’ä»¶ç›®å½•</span>
<span class="hljs-built_in">cd</span> vue-cli-plugin-vue-mobile-preview

<span class="hljs-comment"># ç™»å½• npm è´¦å·</span>
npm login
</code></pre>
</li>
<li>
<p>å‘å¸ƒæ’ä»¶åˆ° npm å…¬å¼€ä»“åº“ï¼š
åœ¨æ’ä»¶ç›®å½•ä¸‹æ‰§è¡Œå‘å¸ƒå‘½ä»¤ï¼Œæ— éœ€é¢å¤–é…ç½®ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">npm publish
</code></pre>
<ul>
<li>å‘å¸ƒå¤±è´¥æ’æŸ¥ï¼šè‹¥æç¤ºåŒ…åé‡å¤ï¼Œä¿®æ”¹ <code>package.json</code> ä¸­çš„ <code>name</code> å­—æ®µï¼›è‹¥æç¤ºç‰ˆæœ¬é‡å¤ï¼Œä¿®æ”¹ <code>version</code> å­—æ®µï¼ˆå¦‚ä» 1.0.0 æ”¹ä¸º 1.0.1ï¼‰ã€‚</li>
</ul>
</li>
<li>
<p>é¡¹ç›®ä¸­å®‰è£… NPM æ’ä»¶ï¼š
åœ¨ä»»æ„ Vue CLI 3+ é¡¹ç›®æ ¹ç›®å½•ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤å³å¯å®‰è£…ï¼ˆå…¨ç½‘å¼€å‘è€…å‡å¯ä½¿ç”¨ï¼‰ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ–¹å¼1ï¼šnpm å‘½ä»¤ï¼ˆæ¨èï¼‰</span>
npm install vue-cli-plugin-vue-mobile-preview --save-dev

<span class="hljs-comment"># æ–¹å¼2ï¼šVue CLI ä¸“å±å¿«æ·å‘½ä»¤ï¼ˆè‡ªåŠ¨è¯†åˆ«æ’ä»¶ï¼Œæ— éœ€åŠ  --save-devï¼‰</span>
vue add vue-mobile-preview

<span class="hljs-comment"># pnpm/yarn å‘½ä»¤å…¼å®¹</span>
<span class="hljs-comment"># pnpm add vue-cli-plugin-vue-mobile-preview -D</span>
<span class="hljs-comment"># yarn add vue-cli-plugin-vue-mobile-preview --dev</span>
</code></pre>
</li>
<li>
<p>éªŒè¯ç§»åŠ¨ç«¯é¢„è§ˆåŠŸèƒ½ï¼š
æ‰§è¡Œ <code>npm run serve</code> å¯åŠ¨é¡¹ç›®ï¼Œæ‰‹æœºæ‰«ç å³å¯é¢„è§ˆæœ¬åœ° Vue é¡¹ç›®ã€‚</p>
</li>
</ol>
<h3 data-id="heading-18">åœºæ™¯4ï¼šGit ä»“åº“ä½¿ç”¨ï¼ˆå›¢é˜Ÿåä½œï¼Œæ— éœ€å‘å¸ƒ NPMï¼Œæ”¯æŒç‰ˆæœ¬æ§åˆ¶ï¼‰</h3>
<p>é€‚ç”¨äºæ’ä»¶æ‰˜ç®¡åœ¨ Git ä»“åº“ï¼ˆGitHub/Gitee/GitLabï¼‰ï¼Œå›¢é˜Ÿæˆå‘˜å¯ç›´æ¥é€šè¿‡ Git åœ°å€å®‰è£…ï¼Œæ”¯æŒç‰ˆæœ¬æ§åˆ¶å’Œä»£ç åŒæ­¥ã€‚</p>
<h4 data-id="heading-19">æ“ä½œæ­¥éª¤</h4>
<ol>
<li>
<p>æ’ä»¶ç›®å½•åˆå§‹åŒ– Git ä»“åº“ï¼š
è¿›å…¥æ’ä»¶ç›®å½•ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤åˆå§‹åŒ–å¹¶æäº¤ä»£ç ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># è¿›å…¥æ’ä»¶ç›®å½•</span>
<span class="hljs-built_in">cd</span> vue-cli-plugin-vue-mobile-preview

<span class="hljs-comment"># åˆå§‹åŒ– Git ä»“åº“</span>
git init

<span class="hljs-comment"># æ·»åŠ æ‰€æœ‰æ–‡ä»¶</span>
git add .

<span class="hljs-comment"># æäº¤ä»£ç </span>
git commit -m <span class="hljs-string">"init: å®Œæˆç§»åŠ¨ç«¯é¢„è§ˆæ’ä»¶å¼€å‘ï¼Œæ”¯æŒæ‰«ç è®¿é—®"</span>
</code></pre>
</li>
<li>
<p>æ¨é€æ’ä»¶åˆ°çº¿ä¸Š Git ä»“åº“ï¼š
åœ¨ GitHub/Gitee/GitLab ä¸Šåˆ›å»ºä¸€ä¸ªæ–°ä»“åº“ï¼Œç„¶åå°†æœ¬åœ°æ’ä»¶ä»£ç æ¨é€ä¸Šå»ï¼ˆä»¥ GitHub ä¸ºä¾‹ï¼‰ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å…³è”çº¿ä¸Š Git ä»“åº“ï¼ˆæ›¿æ¢ä¸ºä½ çš„ä»“åº“åœ°å€ï¼‰</span>
git remote add origin https://github.com/ä½ çš„ç”¨æˆ·å/vue-cli-plugin-vue-mobile-preview.git

<span class="hljs-comment"># æ¨é€ä»£ç åˆ° master/main åˆ†æ”¯</span>
git push -u origin master
</code></pre>
</li>
<li>
<p>é¡¹ç›®ä¸­é€šè¿‡ Git åœ°å€å®‰è£…æ’ä»¶ï¼š
è¿›å…¥ç›®æ ‡ Vue é¡¹ç›®æ ¹ç›®å½•ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤å®‰è£…ï¼ˆæ”¯æŒ HTTPS/SSH ä¸¤ç§åœ°å€æ ¼å¼ï¼‰ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ–¹å¼1ï¼šHTTPS åœ°å€ï¼ˆæ— éœ€é…ç½®å¯†é’¥ï¼Œå°ç™½æ¨èä½¿ç”¨ï¼Œå…¬å¼€/ç§æœ‰ä»“åº“å‡å¯ï¼‰</span>
npm install https://github.com/ä½ çš„ç”¨æˆ·å/vue-cli-plugin-vue-mobile-preview.git --save-dev

<span class="hljs-comment"># æ–¹å¼2ï¼šSSH åœ°å€ï¼ˆéœ€é…ç½® Git å¯†é’¥ï¼Œæ¨èå›¢é˜Ÿç§æœ‰ä»“åº“ä½¿ç”¨ï¼‰</span>
npm install git+ssh://git@github.com/ä½ çš„ç”¨æˆ·å/vue-cli-plugin-vue-mobile-preview.git --save-dev

<span class="hljs-comment"># æ–¹å¼3ï¼šGitHub ä¸“å±ç®€åŒ–æ ¼å¼ï¼ˆè‡ªåŠ¨è¯†åˆ«ï¼‰</span>
npm install ä½ çš„ç”¨æˆ·å/vue-cli-plugin-vue-mobile-preview --save-dev

<span class="hljs-comment"># pnpm/yarn å‘½ä»¤å…¼å®¹</span>
</code></pre>
</li>
<li>
<p>éªŒè¯ç§»åŠ¨ç«¯é¢„è§ˆåŠŸèƒ½ï¼š
æ‰§è¡Œ <code>npm run serve</code> å¯åŠ¨é¡¹ç›®ï¼Œæ‰‹æœºæ‰«ç å³å¯é¢„è§ˆæœ¬åœ° Vue é¡¹ç›®ï¼ŒåŒæ—¶å¯é€šè¿‡ Git ä»“åº“å®ç°æ’ä»¶ç‰ˆæœ¬æ›´æ–°å’Œå›¢é˜ŸåŒæ­¥ã€‚</p>
</li>
</ol>
<h2 data-id="heading-20">äº”ã€æ’ä»¶å¼€å‘ç»†èŠ‚ä¼˜åŒ–ï¼ˆè§£å†³äºŒç»´ç è¾“å‡ºæ—¶æœºé—®é¢˜ï¼‰</h2>
<p>è¿™æ˜¯æ’ä»¶å¼€å‘è¿‡ç¨‹ä¸­çš„å¸¸è§é—®é¢˜ï¼Œä¸å½±å“æ ¸å¿ƒçš„ç§»åŠ¨ç«¯é¢„è§ˆåŠŸèƒ½ï¼Œä½†å¯ä¼˜åŒ–ä½¿ç”¨ä½“éªŒï¼Œå°ç™½å¯ç›´æ¥å¤ç”¨ä»£ç ï¼Œæ— éœ€æ·±å…¥ç†è§£ã€‚</p>
<h3 data-id="heading-21">1.  é—®é¢˜æè¿°</h3>
<p>è‹¥ä½¿ç”¨ <code>devServer.after</code> é’©å­è¾“å‡ºäºŒç»´ç ï¼Œä¼šå‡ºç°ã€ŒäºŒç»´ç è¾“å‡ºåè¿˜æœ‰ Webpack ç¼–è¯‘æ—¥å¿—ã€çš„é—®é¢˜ï¼Œå¯¼è‡´æ—¥å¿—æ··ä¹±ï¼›è‹¥æå‰è¾“å‡ºï¼Œä¼šè¢«æ„å»ºæ—¥å¿—è¦†ç›–ï¼Œå½±å“æ‰«ç ä½“éªŒã€‚</p>
<h3 data-id="heading-22">2.  è§£å†³æ–¹æ¡ˆ</h3>
<p>ä½¿ç”¨ <code>compiler.hooks.done</code> äº‹ä»¶ï¼Œåœ¨ Webpack ç¼–è¯‘ï¼ˆé¦–æ¬¡æ„å»ºï¼‰å®Œæˆåè¾“å‡ºäºŒç»´ç ï¼ŒåŒæ—¶æ·»åŠ  <code>hasPrintQrcode</code> æ ‡è®°ï¼Œé¿å…çƒ­æ›´æ–°æ—¶é‡å¤è¾“å‡ºï¼Œä»£ç å·²é›†æˆåœ¨æ’ä»¶æ ¸å¿ƒ <code>index.js</code> ä¸­ï¼Œæ— éœ€é¢å¤–ä¿®æ”¹ã€‚</p>
<h3 data-id="heading-23">3.  ä¼˜åŒ–æ•ˆæœ</h3>
<ul>
<li>äºŒç»´ç åœ¨é¡¹ç›®å®Œå…¨å°±ç»ªåè¾“å‡ºï¼Œæ—¥å¿—æ•´æ´ç¾è§‚ï¼Œæ— å¤šä½™ä¿¡æ¯å¹²æ‰°ï¼›</li>
<li>ä»…è¾“å‡ºä¸€æ¬¡äºŒç»´ç ï¼Œé¿å…çƒ­æ›´æ–°æ—¶é‡å¤æ‰“å°ï¼Œæå‡ä½¿ç”¨ä½“éªŒã€‚</li>
</ul>
<h2 data-id="heading-24">å…­ã€å¸¸è§é—®é¢˜æ’æŸ¥ï¼ˆå°ç™½é¿å‘æŒ‡å—ï¼‰</h2>
<h3 data-id="heading-25">1.  ç§»åŠ¨ç«¯æ‰«ç æ— æ³•è®¿é—®æœ¬åœ°é¡¹ç›®</h3>
<ul>
<li>æ’æŸ¥1ï¼šæ‰‹æœºä¸ç”µè„‘æ˜¯å¦è¿æ¥<strong>åŒä¸€ WiFi</strong>ï¼ˆåŒä¸€å±€åŸŸç½‘ï¼‰ï¼›</li>
<li>æ’æŸ¥2ï¼šç”µè„‘é˜²ç«å¢™æ˜¯å¦å…³é—­ï¼ˆé˜²ç«å¢™å¯èƒ½æ‹¦æˆªæ‰‹æœºçš„è®¿é—®è¯·æ±‚ï¼‰ï¼›</li>
<li>æ’æŸ¥3ï¼šé¡¹ç›®ç«¯å£æ˜¯å¦è¢«å ç”¨ï¼ˆæ›´æ¢ç«¯å£åé‡æ–°å¯åŠ¨é¡¹ç›®ï¼Œå¦‚åœ¨ <code>vue.config.js</code> ä¸­é…ç½® <code>devServer.port: 8081</code>ï¼‰ï¼›</li>
<li>æ’æŸ¥4ï¼šæ’ä»¶æ˜¯å¦è‡ªåŠ¨é…ç½® <code>host: 0.0.0.0</code>ï¼ˆæœ¬æ–‡æ’ä»¶å·²è‡ªåŠ¨é…ç½®ï¼Œæ— éœ€æ‰‹åŠ¨ä¿®æ”¹ï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-26">2.  æ’ä»¶å®‰è£…åæ— äºŒç»´ç è¾“å‡º</h3>
<ul>
<li>æ’æŸ¥1ï¼šæ’ä»¶åç§°æ˜¯å¦ä»¥ <code>vue-cli-plugin-</code> å¼€å¤´ï¼ˆVue CLI ä»…è‡ªåŠ¨è¯†åˆ«è¯¥å‰ç¼€ï¼‰ï¼›</li>
<li>æ’æŸ¥2ï¼šæ˜¯å¦é‡å¯é¡¹ç›®ï¼ˆæ’ä»¶å®‰è£…åéœ€é‡å¯é¡¹ç›®æ‰èƒ½ç”Ÿæ•ˆï¼‰ï¼›</li>
<li>æ’æŸ¥3ï¼šç›®æ ‡é¡¹ç›® <code>package.json</code> ä¸­æ˜¯å¦å­˜åœ¨æ’ä»¶ä¾èµ–ï¼ˆç¡®è®¤å®‰è£…æˆåŠŸï¼‰ï¼›</li>
<li>æ’æŸ¥4ï¼šæ˜¯å¦å®‰è£… <code>qrcode</code> ä¾èµ–ï¼ˆæ’ä»¶å·²å£°æ˜ä¾èµ–ï¼Œè‹¥ç¼ºå¤±å¯æ‰‹åŠ¨æ‰§è¡Œ <code>npm install qrcode --save-dev</code>ï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-27">3.  äºŒç»´ç é‡å¤è¾“å‡ºï¼ˆçƒ­æ›´æ–°æ—¶ï¼‰</h3>
<ul>
<li>æ’æŸ¥ï¼šæ˜¯å¦æ·»åŠ  <code>hasPrintQrcode</code> æ ‡è®°ï¼ˆæœ¬æ–‡æ’ä»¶å·²æ·»åŠ ï¼Œæ— éœ€é¢å¤–ä¿®æ”¹ï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-28">4.  TGZ/Git æ’ä»¶å®‰è£…å¤±è´¥</h3>
<ul>
<li>æ’æŸ¥1ï¼šåœ°å€æ˜¯å¦æ­£ç¡®ï¼ˆTGZ åœ°å€éœ€æŒ‡å‘ <code>.tgz</code> æ–‡ä»¶ï¼ŒGit åœ°å€éœ€å¸¦ <code>.git</code> åç¼€ï¼‰ï¼›</li>
<li>æ’æŸ¥2ï¼šç½‘ç»œæ˜¯å¦é€šç•…ï¼ˆç§æœ‰æœåŠ¡å™¨/Git ä»“åº“æ˜¯å¦å¯æ­£å¸¸è®¿é—®ï¼‰ï¼›</li>
<li>æ’æŸ¥3ï¼šåŒ…ç®¡ç†å™¨ç‰ˆæœ¬æ˜¯å¦å…¼å®¹ï¼ˆå»ºè®®ä½¿ç”¨ npm 8+ / pnpm 6+ / yarn 1+ï¼‰ã€‚</li>
</ul>
<h2 data-id="heading-29">ä¸ƒã€æ€»ç»“</h2>
<ol>
<li><strong>æ ¸å¿ƒç›®æ ‡è¾¾æˆ</strong>ï¼šæœ¬æ–‡å›´ç»•ã€Œç§»åŠ¨ç«¯ä¾¿æ·é¢„è§ˆæœ¬åœ° Vue æœåŠ¡é¡¹ç›®ã€è¿™ä¸€æ ¸å¿ƒéœ€æ±‚ï¼Œå¼€å‘äº†ä¸€æ¬¾ Vue CLI æ’ä»¶ï¼Œå®ç°äº†ã€Œè‡ªåŠ¨ç”ŸæˆäºŒç»´ç  + æ‰«ç å¿«é€Ÿè®¿é—®ã€çš„æ ¸å¿ƒåŠŸèƒ½ï¼Œè§£å†³äº†æ‰‹åŠ¨è¾“å…¥ IP + ç«¯å£çš„ç¹çé—®é¢˜ï¼›</li>
<li><strong>å¤šåœºæ™¯å…¨è¦†ç›–</strong>ï¼šè¯¦ç»†è®²è§£äº†æ’ä»¶çš„ 4 ç§ä½¿ç”¨åœºæ™¯ï¼ˆæœ¬åœ°è°ƒè¯•ã€TGZ å‹ç¼©åŒ…ã€NPM å…¬å¼€åŒ…ã€Git ä»“åº“ï¼‰ï¼Œæ»¡è¶³ä¸ªäººå¼€å‘ã€å›¢é˜Ÿåä½œã€å…¨ç½‘å¤ç”¨ç­‰ä¸åŒéœ€æ±‚ï¼›</li>
<li><strong>å°ç™½å‹å¥½</strong>ï¼šæ‰€æœ‰ä»£ç å¯ç›´æ¥å¤åˆ¶ï¼Œæ­¥éª¤è¯¦ç»†æ— é—æ¼ï¼Œæ— éœ€å¤æ‚é…ç½®ï¼ŒåŒæ—¶æä¾›å¸¸è§é—®é¢˜æ’æŸ¥æŒ‡å—ï¼Œé™ä½ä¸Šæ‰‹é—¨æ§›ï¼›</li>
<li><strong>ç»†èŠ‚ä¼˜åŒ–åˆ°ä½</strong>ï¼šé™„å¸¦è§£å†³æ’ä»¶å¼€å‘ä¸­ã€ŒäºŒç»´ç è¾“å‡ºæ—¶æœºã€çš„é—®é¢˜ï¼Œä¼˜åŒ–ä½¿ç”¨ä½“éªŒï¼Œç¡®ä¿æ—¥å¿—æ•´æ´ã€æ— é‡å¤è¾“å‡ºï¼›</li>
<li><strong>å…¼å®¹æ€§å¼º</strong>ï¼šæ”¯æŒ Vue 2/Vue 3 é¡¹ç›®ï¼Œé€‚é… Vue CLI 3+ æ‰€æœ‰ç‰ˆæœ¬ï¼Œæ— ä¾µå…¥æ€§ï¼Œå¸è½½åæ— æ®‹ç•™ã€‚</li>
</ol>
<p>é€šè¿‡æœ¬æ–‡ï¼Œå°ç™½ä¹Ÿèƒ½è½»æ¾å¼€å‘å¹¶ä½¿ç”¨ Vue CLI ç§»åŠ¨ç«¯é¢„è§ˆæ’ä»¶ï¼Œå®ç°å¤šåœºæ™¯ä¸‹çš„ç§»åŠ¨ç«¯ä¾¿æ·é¢„è§ˆï¼Œæå‡ Vue é¡¹ç›®å¼€å‘æ•ˆç‡ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å½“AIæˆä¸ºä½ çš„å‰ç«¯æ­å­ï¼šé›¶é—¨æ§›ç”¨Cursorå¼€å¯é«˜æ•ˆå¼€å‘æ–°æ—¶ä»£]]></title>    <link>https://juejin.cn/post/7589477775209873460</link>    <guid>https://juejin.cn/post/7589477775209873460</guid>    <pubDate>2025-12-30T09:26:04.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589477775209873460" data-draft-id="7589462007528046626" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å½“AIæˆä¸ºä½ çš„å‰ç«¯æ­å­ï¼šé›¶é—¨æ§›ç”¨Cursorå¼€å¯é«˜æ•ˆå¼€å‘æ–°æ—¶ä»£"/> <meta itemprop="keywords" content="å‰ç«¯,Cursor"/> <meta itemprop="datePublished" content="2025-12-30T09:26:04.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Mr_chiu"/> <meta itemprop="url" content="https://juejin.cn/user/1644525124592974"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å½“AIæˆä¸ºä½ çš„å‰ç«¯æ­å­ï¼šé›¶é—¨æ§›ç”¨Cursorå¼€å¯é«˜æ•ˆå¼€å‘æ–°æ—¶ä»£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1644525124592974/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Mr_chiu
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-30T09:26:04.000Z" title="Tue Dec 30 2025 09:26:04 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>ä»é¡¹ç›®åˆå§‹åŒ–åˆ°ä»£ç ä¼˜åŒ–ï¼Œä¸€ä¸ªAIåŠ©æ‰‹å¦‚ä½•å½»åº•æ”¹å˜å‰ç«¯å¼€å‘çš„å·¥ä½œæµ</p>
</blockquote>
<h2 data-id="heading-0">å‰è¨€ï¼šä¸ºä»€ä¹ˆå‰ç«¯å¼€å‘è€…éœ€è¦Cursorï¼Ÿ</h2>
<p>å‰ç«¯å¼€å‘æ­£ç»å†ä¸€åœºé™æ‚„æ‚„çš„é©å‘½ã€‚è¿‡å»å‡ å¹´ï¼Œæˆ‘ä»¬è§è¯äº†ä»jQueryåˆ°ä¸‰å¤§æ¡†æ¶çš„å˜è¿ï¼Œä»æ‰‹åŠ¨é…ç½®Webpackåˆ°Viteçš„é›¶é…ç½®ä½“éªŒï¼Œè€Œç°åœ¨ï¼ŒAIç¼–ç¨‹åŠ©æ‰‹æ­£åœ¨é‡æ–°å®šä¹‰æˆ‘ä»¬ç¼–å†™ä»£ç çš„æ–¹å¼ã€‚</p>
<p>ä½œä¸ºä¸€åå‰ç«¯å¼€å‘è€…ï¼Œä½ æ˜¯å¦ä¹Ÿæ›¾é¢ä¸´è¿™äº›ç—›ç‚¹ï¼š</p>
<ul>
<li>çº ç»“äºæŸä¸ªå¤æ‚ç»„ä»¶çš„å®ç°æ–¹æ¡ˆ</li>
<li>èŠ±è´¹å¤§é‡æ—¶é—´è°ƒè¯•è¯¡å¼‚çš„æ ·å¼å…¼å®¹æ€§é—®é¢˜</li>
<li>åœ¨é‡å¤çš„ä¸šåŠ¡ä»£ç ä¸­æ¶ˆè€—åˆ›é€ åŠ›</li>
<li>é¢å¯¹æ–°æŠ€æœ¯æ ˆçš„å­¦ä¹ æ›²çº¿æ„Ÿåˆ°ç„¦è™‘</li>
</ul>
<p>Cursorçš„å‡ºç°ï¼Œå°±åƒæ˜¯ä¸ºæ¯ä¸ªå‰ç«¯å¼€å‘è€…é…å¤‡äº†ä¸€ä¸ª24å°æ—¶åœ¨çº¿çš„èµ„æ·±æ­æ¡£ã€‚ä½†ä¸åŒäºæ™®é€šçš„ä»£ç è¡¥å…¨å·¥å…·ï¼ŒCursoråŸºäºGPT-4ï¼Œèƒ½å¤Ÿç†è§£ä¸Šä¸‹æ–‡ã€åˆ†ææ•´ä¸ªé¡¹ç›®ç»“æ„ï¼Œå¹¶ç»™å‡ºæ™ºèƒ½çš„è§£å†³æ–¹æ¡ˆã€‚</p>
<h2 data-id="heading-1">ä¸€ã€Cursoråˆä½“éªŒï¼šä»å®‰è£…åˆ°ç¬¬ä¸€ä¸ªæ™ºèƒ½ç»„ä»¶</h2>
<h3 data-id="heading-2">1.1 å®‰è£…ä¸ç¯å¢ƒé…ç½®</h3>
<p>Cursorçš„å®‰è£…è¿‡ç¨‹ç®€å•åˆ°ä»¤äººæƒŠè®¶ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># è®¿é—®å®˜ç½‘ä¸‹è½½å¯¹åº”ç‰ˆæœ¬</span>
https://www.cursor.so/

<span class="hljs-comment"># æˆ–è€…é€šè¿‡Homebrewï¼ˆmacOSï¼‰</span>
brew install --cask cursor
</code></pre>
<p>å®‰è£…å®Œæˆåï¼Œä½ ä¼šçœ‹åˆ°ä¸€ä¸ªä¸VS Codeæå…¶ç›¸ä¼¼çš„ç•Œé¢â€”â€”å®é™…ä¸Šï¼ŒCursoræ­£æ˜¯åŸºäºVS Codeçš„å¼€æºç‰ˆæœ¬å¼€å‘ï¼Œè¿™æ„å‘³ç€æ‰€æœ‰ä½ ç†Ÿæ‚‰çš„VS Codeå¿«æ·é”®å’Œæ‰©å±•ç”Ÿæ€åŸºæœ¬éƒ½èƒ½æ— ç¼è¿ç§»ã€‚</p>
<p><strong>é‡è¦è®¾ç½®</strong>ï¼šé¦–æ¬¡å¯åŠ¨åï¼Œå»ºè®®åœ¨è®¾ç½®ä¸­å¼€å¯â€œè‡ªåŠ¨åº”ç”¨å»ºè®®â€åŠŸèƒ½ï¼Œè¿™å°†å¤§å¹…æå‡ç¼–ç æ•ˆç‡ã€‚</p>
<h3 data-id="heading-3">1.2 ä½ çš„ç¬¬ä¸€ä¸ªAIè¾…åŠ©ç»„ä»¶</h3>
<p>è®©æˆ‘ä»¬ä»ä¸€ä¸ªå®é™…çš„å‰ç«¯åœºæ™¯å¼€å§‹ï¼šåˆ›å»ºä¸€ä¸ªå¯å¤ç”¨çš„è¡¨å•è¾“å…¥ç»„ä»¶ã€‚</p>
<p>ä¼ ç»Ÿçš„å¼€å‘æµç¨‹ï¼š</p>
<ol>
<li>åˆ›å»ºæ–‡ä»¶ <code>InputField.jsx</code></li>
<li>ç¼–å†™åŸºç¡€ç»“æ„</li>
<li>é€æ­¥æ·»åŠ åŠŸèƒ½</li>
<li>è°ƒè¯•å’Œä¼˜åŒ–</li>
</ol>
<p>ä½¿ç”¨Cursorçš„æµç¨‹å‘ç”Ÿäº†æœ¬è´¨å˜åŒ–ï¼š</p>
<p><strong>æ­¥éª¤1ï¼šç”¨è‡ªç„¶è¯­è¨€æè¿°éœ€æ±‚</strong>
ç›´æ¥åœ¨ç¼–è¾‘å™¨ä¸­è¾“å…¥ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown">åˆ›å»ºä¸€ä¸ªReactè¡¨å•è¾“å…¥ç»„ä»¶ï¼Œè¦æ±‚ï¼š
<span class="hljs-bullet">1.</span> æ”¯æŒæ ‡ç­¾ã€å ä½ç¬¦ã€é”™è¯¯çŠ¶æ€
<span class="hljs-bullet">2.</span> åŒ…å«è¾“å…¥éªŒè¯åŠŸèƒ½
<span class="hljs-bullet">3.</span> æœ‰åŠ¨ç”»è¿‡æ¸¡æ•ˆæœ
<span class="hljs-bullet">4.</span> æ”¯æŒè‡ªå®šä¹‰æ ·å¼
<span class="hljs-bullet">5.</span> ä½¿ç”¨TypeScript
</code></pre>
<p><strong>æ­¥éª¤2ï¼šè®©Cursorç”Ÿæˆä»£ç </strong>
æŒ‰ä¸‹ <code>Cmd/Ctrl + K</code>ï¼ŒCursorä¼šåˆ†æä½ çš„éœ€æ±‚å¹¶ç”Ÿæˆå®Œæ•´ä»£ç ï¼š</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, { useState, useEffect } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">'./InputField.css'</span>;

<span class="hljs-keyword">interface</span> <span class="hljs-title class_">InputFieldProps</span> {
  <span class="hljs-attr">label</span>: <span class="hljs-built_in">string</span>;
  placeholder?: <span class="hljs-built_in">string</span>;
  <span class="hljs-keyword">type</span>?: <span class="hljs-string">'text'</span> | <span class="hljs-string">'email'</span> | <span class="hljs-string">'password'</span> | <span class="hljs-string">'number'</span>;
  required?: <span class="hljs-built_in">boolean</span>;
  error?: <span class="hljs-built_in">string</span>;
  <span class="hljs-attr">value</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-attr">onChange</span>: <span class="hljs-function">(<span class="hljs-params">value: <span class="hljs-built_in">string</span>, isValid: <span class="hljs-built_in">boolean</span></span>) =&gt;</span> <span class="hljs-built_in">void</span>;
  customClassName?: <span class="hljs-built_in">string</span>;
  validationRules?: {
    pattern?: <span class="hljs-title class_">RegExp</span>;
    minLength?: <span class="hljs-built_in">number</span>;
    maxLength?: <span class="hljs-built_in">number</span>;
    customValidator?: <span class="hljs-function">(<span class="hljs-params">value: <span class="hljs-built_in">string</span></span>) =&gt;</span> <span class="hljs-built_in">boolean</span>;
  };
}

<span class="hljs-keyword">const</span> <span class="hljs-title class_">InputField</span>: <span class="hljs-title class_">React</span>.<span class="hljs-property">FC</span>&lt;<span class="hljs-title class_">InputFieldProps</span>&gt; = <span class="hljs-function">(<span class="hljs-params">{
  label,
  placeholder = <span class="hljs-string">''</span>,
  <span class="hljs-keyword">type</span> = <span class="hljs-string">'text'</span>,
  required = <span class="hljs-literal">false</span>,
  error: externalError,
  value,
  onChange,
  customClassName = <span class="hljs-string">''</span>,
  validationRules = {}
}</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> [internalError, setInternalError] = useState&lt;<span class="hljs-built_in">string</span>&gt;(<span class="hljs-string">''</span>);
  <span class="hljs-keyword">const</span> [isTouched, setIsTouched] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">false</span>);
  <span class="hljs-keyword">const</span> [isAnimating, setIsAnimating] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">false</span>);

  <span class="hljs-keyword">const</span> validateInput = (<span class="hljs-attr">inputValue</span>: <span class="hljs-built_in">string</span>): <span class="hljs-function"><span class="hljs-params">string</span> =&gt;</span> {
    <span class="hljs-keyword">if</span> (required &amp;&amp; !inputValue.<span class="hljs-title function_">trim</span>()) {
      <span class="hljs-keyword">return</span> <span class="hljs-string">'æ­¤å­—æ®µä¸ºå¿…å¡«é¡¹'</span>;
    }

    <span class="hljs-keyword">if</span> (validationRules.<span class="hljs-property">pattern</span> &amp;&amp; !validationRules.<span class="hljs-property">pattern</span>.<span class="hljs-title function_">test</span>(inputValue)) {
      <span class="hljs-keyword">return</span> <span class="hljs-string">'æ ¼å¼ä¸æ­£ç¡®'</span>;
    }

    <span class="hljs-keyword">if</span> (validationRules.<span class="hljs-property">minLength</span> &amp;&amp; inputValue.<span class="hljs-property">length</span> &lt; validationRules.<span class="hljs-property">minLength</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-string">`é•¿åº¦ä¸èƒ½å°‘äº<span class="hljs-subst">${validationRules.minLength}</span>ä¸ªå­—ç¬¦`</span>;
    }

    <span class="hljs-keyword">if</span> (validationRules.<span class="hljs-property">maxLength</span> &amp;&amp; inputValue.<span class="hljs-property">length</span> &gt; validationRules.<span class="hljs-property">maxLength</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-string">`é•¿åº¦ä¸èƒ½è¶…è¿‡<span class="hljs-subst">${validationRules.maxLength}</span>ä¸ªå­—ç¬¦`</span>;
    }

    <span class="hljs-keyword">if</span> (validationRules.<span class="hljs-property">customValidator</span> &amp;&amp; !validationRules.<span class="hljs-title function_">customValidator</span>(inputValue)) {
      <span class="hljs-keyword">return</span> <span class="hljs-string">'è‡ªå®šä¹‰éªŒè¯å¤±è´¥'</span>;
    }

    <span class="hljs-keyword">return</span> <span class="hljs-string">''</span>;
  };

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleChange</span> = (<span class="hljs-params">e: React.ChangeEvent&lt;HTMLInputElement&gt;</span>) =&gt; {
    <span class="hljs-keyword">const</span> newValue = e.<span class="hljs-property">target</span>.<span class="hljs-property">value</span>;
    <span class="hljs-keyword">const</span> errorMsg = <span class="hljs-title function_">validateInput</span>(newValue);
    <span class="hljs-title function_">setInternalError</span>(errorMsg);
    
    <span class="hljs-comment">// è§¦å‘åŠ¨ç”»</span>
    <span class="hljs-keyword">if</span> (errorMsg &amp;&amp; !isAnimating) {
      <span class="hljs-title function_">setIsAnimating</span>(<span class="hljs-literal">true</span>);
      <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">setIsAnimating</span>(<span class="hljs-literal">false</span>), <span class="hljs-number">300</span>);
    }
    
    <span class="hljs-title function_">onChange</span>(newValue, !errorMsg);
  };

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleBlur</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-title function_">setIsTouched</span>(<span class="hljs-literal">true</span>);
    <span class="hljs-keyword">if</span> (value) {
      <span class="hljs-keyword">const</span> errorMsg = <span class="hljs-title function_">validateInput</span>(value);
      <span class="hljs-title function_">setInternalError</span>(errorMsg);
    }
  };

  <span class="hljs-keyword">const</span> error = externalError || internalError;
  <span class="hljs-keyword">const</span> showError = isTouched &amp;&amp; error;

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{</span>`<span class="hljs-attr">input-field</span> ${<span class="hljs-attr">customClassName</span>} ${<span class="hljs-attr">showError</span> ? '<span class="hljs-attr">error</span>' <span class="hljs-attr">:</span> ''} ${<span class="hljs-attr">isAnimating</span> ? '<span class="hljs-attr">shake</span>' <span class="hljs-attr">:</span> ''}`}&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"input-label"</span>&gt;</span>
        {label}
        {required &amp;&amp; <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"required-asterisk"</span>&gt;</span>*<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>}
      <span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">input</span>
        <span class="hljs-attr">type</span>=<span class="hljs-string">{type}</span>
        <span class="hljs-attr">value</span>=<span class="hljs-string">{value}</span>
        <span class="hljs-attr">onChange</span>=<span class="hljs-string">{handleChange}</span>
        <span class="hljs-attr">onBlur</span>=<span class="hljs-string">{handleBlur}</span>
        <span class="hljs-attr">placeholder</span>=<span class="hljs-string">{placeholder}</span>
        <span class="hljs-attr">className</span>=<span class="hljs-string">{</span>`<span class="hljs-attr">input-element</span> ${<span class="hljs-attr">showError</span> ? '<span class="hljs-attr">input-error</span>' <span class="hljs-attr">:</span> ''}`}
        <span class="hljs-attr">aria-invalid</span>=<span class="hljs-string">{!!showError}</span>
        <span class="hljs-attr">aria-describedby</span>=<span class="hljs-string">{showError</span> ? `<span class="hljs-attr">error-</span>${<span class="hljs-attr">label</span>}` <span class="hljs-attr">:</span> <span class="hljs-attr">undefined</span>}
      /&gt;</span>
      {showError &amp;&amp; (
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> 
          <span class="hljs-attr">id</span>=<span class="hljs-string">{</span>`<span class="hljs-attr">error-</span>${<span class="hljs-attr">label</span>}`}
          <span class="hljs-attr">className</span>=<span class="hljs-string">"error-message animate-in"</span>
          <span class="hljs-attr">role</span>=<span class="hljs-string">"alert"</span>
        &gt;</span>
          {error}
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      )}
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
};

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">InputField</span>;
</code></pre>
<p><strong>æ­¥éª¤3ï¼šè®©Cursorç”Ÿæˆé…å¥—æ ·å¼</strong>
ç»§ç»­ä½¿ç”¨ <code>Cmd/Ctrl + K</code>ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown">ä¸ºä¸Šé¢çš„ç»„ä»¶ç”Ÿæˆåˆé€‚çš„CSSæ ·å¼ï¼Œè¦æ±‚ï¼š
<span class="hljs-bullet">1.</span> ä½¿ç”¨ç°ä»£CSSè®¾è®¡
<span class="hljs-bullet">2.</span> åŒ…å«é”™è¯¯çŠ¶æ€çš„è§†è§‰åé¦ˆ
<span class="hljs-bullet">3.</span> å®ç°æ‘‡åŠ¨åŠ¨ç”»æ•ˆæœ
<span class="hljs-bullet">4.</span> ç¡®ä¿å¯è®¿é—®æ€§
</code></pre>
<p>Cursorä¼šç”Ÿæˆå®Œæ•´çš„CSSæ–‡ä»¶ï¼Œç”šè‡³åŒ…æ‹¬CSSå˜é‡å’ŒåŠ¨ç”»å…³é”®å¸§ã€‚</p>
<h3 data-id="heading-4">1.3 è¿›é˜¶åŠŸèƒ½ï¼šè®©Cursoré‡æ„å’Œä¼˜åŒ–ä»£ç </h3>
<p>å‡è®¾æˆ‘ä»¬éœ€è¦ä¸ºç»„ä»¶æ·»åŠ é˜²æŠ–åŠŸèƒ½ï¼Œå¯ä»¥è¿™æ ·æ“ä½œï¼š</p>
<p>é€‰ä¸­éœ€è¦ä¿®æ”¹çš„å‡½æ•°ï¼ŒæŒ‰ä¸‹ <code>Cmd/Ctrl + L</code> æ‰“å¼€èŠå¤©æ¡†ï¼š</p>
<pre><code class="hljs">ä¸ºhandleChangeå‡½æ•°æ·»åŠ é˜²æŠ–åŠŸèƒ½ï¼Œ300mså»¶è¿Ÿ
</code></pre>
<p>Cursorä¼šè‡ªåŠ¨é‡æ„ä»£ç ï¼š</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">import</span> { debounce } <span class="hljs-keyword">from</span> <span class="hljs-string">'lodash-es'</span>;

<span class="hljs-comment">// åœ¨ç»„ä»¶å†…éƒ¨</span>
<span class="hljs-keyword">const</span> debouncedChangeHandler = <span class="hljs-title function_">useMemo</span>(
  <span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">debounce</span>(<span class="hljs-function">(<span class="hljs-params">newValue: <span class="hljs-built_in">string</span>, isValid: <span class="hljs-built_in">boolean</span></span>) =&gt;</span> {
    <span class="hljs-title function_">onChange</span>(newValue, isValid);
  }, <span class="hljs-number">300</span>),
  [onChange]
);

<span class="hljs-keyword">const</span> <span class="hljs-title function_">handleChange</span> = (<span class="hljs-params">e: React.ChangeEvent&lt;HTMLInputElement&gt;</span>) =&gt; {
  <span class="hljs-keyword">const</span> newValue = e.<span class="hljs-property">target</span>.<span class="hljs-property">value</span>;
  <span class="hljs-keyword">const</span> errorMsg = <span class="hljs-title function_">validateInput</span>(newValue);
  <span class="hljs-title function_">setInternalError</span>(errorMsg);
  
  <span class="hljs-keyword">if</span> (errorMsg &amp;&amp; !isAnimating) {
    <span class="hljs-title function_">setIsAnimating</span>(<span class="hljs-literal">true</span>);
    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">setIsAnimating</span>(<span class="hljs-literal">false</span>), <span class="hljs-number">300</span>);
  }
  
  <span class="hljs-comment">// ä½¿ç”¨é˜²æŠ–ç‰ˆæœ¬</span>
  <span class="hljs-title function_">debouncedChangeHandler</span>(newValue, !errorMsg);
};
</code></pre>
<h2 data-id="heading-5">äºŒã€Cursorçš„æ ¸å¿ƒä¼˜åŠ¿ï¼šå‰ç«¯å¼€å‘çš„å››å¤§åœºæ™¯</h2>
<h3 data-id="heading-6">2.1 æ™ºèƒ½ä»£ç è¡¥å…¨ä¸ä¸Šä¸‹æ–‡ç†è§£</h3>
<p>ä¼ ç»ŸIDEçš„è‡ªåŠ¨è¡¥å…¨åªèƒ½åŸºäºè¯­æ³•ï¼Œè€ŒCursorèƒ½åŸºäºæ•´ä¸ªé¡¹ç›®ä¸Šä¸‹æ–‡ã€‚ä¾‹å¦‚ï¼Œå½“ä½ åœ¨Reduxé¡¹ç›®ä¸­è¾“å…¥ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä½ è¾“å…¥ï¼šåˆ›å»ºä¸€ä¸ªaction creatoræ¥å¤„ç†ç”¨æˆ·ç™»å½•</span>
<span class="hljs-comment">// Cursorä¼šè‡ªåŠ¨ç”Ÿæˆï¼š</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">loginUser</span> = (<span class="hljs-params">credentials</span>) =&gt; <span class="hljs-keyword">async</span> (dispatch) =&gt; {
  <span class="hljs-keyword">try</span> {
    <span class="hljs-title function_">dispatch</span>({ <span class="hljs-attr">type</span>: <span class="hljs-string">'LOGIN_REQUEST'</span> });
    <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> api.<span class="hljs-title function_">post</span>(<span class="hljs-string">'/auth/login'</span>, credentials);
    <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">setItem</span>(<span class="hljs-string">'token'</span>, response.<span class="hljs-property">data</span>.<span class="hljs-property">token</span>);
    <span class="hljs-title function_">dispatch</span>({ <span class="hljs-attr">type</span>: <span class="hljs-string">'LOGIN_SUCCESS'</span>, <span class="hljs-attr">payload</span>: response.<span class="hljs-property">data</span>.<span class="hljs-property">user</span> });
    <span class="hljs-keyword">return</span> response.<span class="hljs-property">data</span>;
  } <span class="hljs-keyword">catch</span> (error) {
    <span class="hljs-title function_">dispatch</span>({ <span class="hljs-attr">type</span>: <span class="hljs-string">'LOGIN_FAILURE'</span>, <span class="hljs-attr">payload</span>: error.<span class="hljs-property">message</span> });
    <span class="hljs-keyword">throw</span> error;
  }
};
</code></pre>
<h3 data-id="heading-7">2.2 é›¶æˆæœ¬å­¦ä¹ æ–°æŠ€æœ¯æ ˆ</h3>
<p>æƒ³å°è¯•Svelteä½†ä¸æƒ³èŠ±æ—¶é—´å­¦ä¹ æ‰€æœ‰ç»†èŠ‚ï¼Ÿç›´æ¥å‘Šè¯‰Cursorï¼š</p>
<pre><code class="hljs">ç”¨Svelteåˆ›å»ºä¸€ä¸ªå¯æ‹–æ‹½çš„ä»»åŠ¡çœ‹æ¿ç»„ä»¶ï¼Œæ”¯æŒæœ¬åœ°å­˜å‚¨
</code></pre>
<h3 data-id="heading-8">2.3 è°ƒè¯•ä¸é—®é¢˜è§£å†³</h3>
<p>é‡åˆ°ä¸€ä¸ªæ£˜æ‰‹çš„bugï¼Ÿç›´æ¥æŠŠé”™è¯¯ä¿¡æ¯è´´ç»™Cursorï¼š</p>
<pre><code class="hljs language-vbscript" lang="vbscript">æˆ‘åœ¨<span class="hljs-keyword">Next</span>.jsé¡¹ç›®ä¸­é‡åˆ°è¿™ä¸ªé”™è¯¯ï¼šHydration failed because the initial UI does <span class="hljs-keyword">not</span> match what was rendered <span class="hljs-keyword">on</span> the <span class="hljs-built_in">server</span>
è¿™æ˜¯ç›¸å…³ç»„ä»¶ä»£ç ï¼š[ç²˜è´´ä»£ç ]
å¦‚ä½•ä¿®å¤ï¼Ÿ
</code></pre>
<p>Cursorä¸ä»…èƒ½è§£é‡Šé—®é¢˜åŸå› ï¼Œè¿˜èƒ½ç»™å‡ºå…·ä½“çš„ä¿®å¤æ–¹æ¡ˆã€‚</p>
<h3 data-id="heading-9">2.4 æ–‡æ¡£å’Œæµ‹è¯•ç”Ÿæˆ</h3>
<p>ç”Ÿæˆç»„ä»¶æ–‡æ¡£ï¼š</p>
<pre><code class="hljs">ä¸ºInputFieldç»„ä»¶ç”ŸæˆMarkdownæ–‡æ¡£ï¼ŒåŒ…æ‹¬propsè¡¨æ ¼å’Œä½¿ç”¨ç¤ºä¾‹
</code></pre>
<p>ç”Ÿæˆå•å…ƒæµ‹è¯•ï¼š</p>
<pre><code class="hljs">ä¸ºInputFieldç»„ä»¶ç¼–å†™Jestæµ‹è¯•ç”¨ä¾‹ï¼Œè¦†ç›–æ‰€æœ‰éªŒè¯è§„åˆ™
</code></pre>
<h2 data-id="heading-10">ä¸‰ã€å®æˆ˜æ¼”ç»ƒï¼šç”¨Cursorå¿«é€Ÿæ­å»ºé¡¹ç›®éª¨æ¶</h2>
<p>è®©æˆ‘ä»¬çœ‹çœ‹å¦‚ä½•ç”¨30åˆ†é’Ÿæ­å»ºä¸€ä¸ªç°ä»£Reactåº”ç”¨éª¨æ¶ï¼š</p>
<ol>
<li><strong>é¡¹ç›®åˆå§‹åŒ–</strong></li>
</ol>
<pre><code class="hljs">ä½¿ç”¨Vite + React + TypeScriptåˆ›å»ºæ–°é¡¹ç›®ï¼Œé…ç½®å¥½ESLintã€Prettierã€Tailwind CSSå’ŒReact Router
</code></pre>
<ol start="2">
<li><strong>å¸ƒå±€ç»„ä»¶ç”Ÿæˆ</strong></li>
</ol>
<pre><code class="hljs">åˆ›å»ºä¸€ä¸ªå“åº”å¼å¸ƒå±€ç»„ä»¶ï¼ŒåŒ…å«å¯¼èˆªæ ã€ä¾§è¾¹æ å’Œä¸»å†…å®¹åŒºåŸŸ
å¯¼èˆªæ åœ¨ç§»åŠ¨ç«¯æ˜¾ç¤ºæ±‰å ¡èœå•
</code></pre>
<ol start="3">
<li><strong>é¡µé¢ç»„ä»¶æ‰¹é‡åˆ›å»º</strong></li>
</ol>
<pre><code class="hljs language-diff" lang="diff">åˆ›å»ºä»¥ä¸‹é¡µé¢ç»„ä»¶ï¼š
<span class="hljs-deletion">- é¦–é¡µï¼šå±•ç¤ºä»ªè¡¨ç›˜</span>
<span class="hljs-deletion">- ç”¨æˆ·åˆ—è¡¨ï¼šå¸¦æœç´¢å’Œåˆ†é¡µ</span>
<span class="hljs-deletion">- è®¾ç½®é¡µé¢ï¼šé€‰é¡¹å¡å¸ƒå±€</span>
<span class="hljs-deletion">- 404é¡µé¢</span>
</code></pre>
<ol start="4">
<li><strong>çŠ¶æ€ç®¡ç†é…ç½®</strong></li>
</ol>
<pre><code class="hljs">é…ç½®Zustandä½œä¸ºçŠ¶æ€ç®¡ç†ï¼Œåˆ›å»ºç”¨æˆ·å’Œä¸»é¢˜çš„store
</code></pre>
<ol start="5">
<li><strong>APIå±‚å°è£…</strong></li>
</ol>
<pre><code class="hljs">åˆ›å»ºç»Ÿä¸€çš„APIè¯·æ±‚å·¥å…·ï¼ŒåŒ…å«æ‹¦æˆªå™¨ã€é”™è¯¯å¤„ç†å’ŒLoadingçŠ¶æ€ç®¡ç†
</code></pre>
<h2 data-id="heading-11">å››ã€Cursorä½¿ç”¨æŠ€å·§ï¼šæå‡æ•ˆç‡çš„ç§˜ç±</h2>
<h3 data-id="heading-12">4.1 ç²¾å‡†æé—®çš„è‰ºæœ¯</h3>
<p>ä½æ•ˆæé—®ï¼š</p>
<pre><code class="hljs">å¦‚ä½•åšä¸€ä¸ªæŒ‰é’®ï¼Ÿ
</code></pre>
<p>é«˜æ•ˆæé—®ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown">åˆ›å»ºä¸€ä¸ªReactæŒ‰é’®ç»„ä»¶ï¼Œè¦æ±‚ï¼š
<span class="hljs-bullet">1.</span> æ”¯æŒprimaryã€secondaryã€dangerä¸‰ç§ç±»å‹
<span class="hljs-bullet">2.</span> æœ‰loadingçŠ¶æ€å’Œç¦ç”¨çŠ¶æ€
<span class="hljs-bullet">3.</span> æ”¯æŒå›¾æ ‡å’Œæ–‡æœ¬ç»„åˆ
<span class="hljs-bullet">4.</span> ä½¿ç”¨CSS-in-JSæ–¹æ¡ˆ
<span class="hljs-bullet">5.</span> å¯¼å‡ºTypeScriptç±»å‹å®šä¹‰
</code></pre>
<h3 data-id="heading-13">4.2 åˆ©ç”¨é¡¹ç›®ä¸Šä¸‹æ–‡</h3>
<p>Cursorå¯ä»¥åˆ†ææ•´ä¸ªé¡¹ç›®ç»“æ„ã€‚åœ¨æé—®å‰ï¼Œç¡®ä¿ï¼š</p>
<ol>
<li>å·²ç»æ‰“å¼€äº†ç›¸å…³æ–‡ä»¶</li>
<li>æåˆ°äº†é‡è¦çš„ä¾èµ–é¡¹</li>
<li>è¯´æ˜äº†é¡¹ç›®çº¦æŸæ¡ä»¶</li>
</ol>
<h3 data-id="heading-14">4.3 é“¾å¼è°ƒç”¨</h3>
<p>å¤æ‚ä»»åŠ¡å¯ä»¥åˆ†è§£ï¼š</p>
<pre><code class="hljs">ç¬¬ä¸€æ­¥ï¼šåˆ›å»ºä¸€ä¸ªç”¨æˆ·æ¨¡å‹æ¥å£
ç¬¬äºŒæ­¥ï¼šåŸºäºè¿™ä¸ªæ¥å£åˆ›å»ºCRUD APIå‡½æ•°
ç¬¬ä¸‰æ­¥ï¼šåˆ›å»ºå¯¹åº”çš„React Hookå°è£…
ç¬¬å››æ­¥ï¼šç”Ÿæˆä½¿ç”¨ç¤ºä¾‹
</code></pre>
<h2 data-id="heading-15">äº”ã€æ½œåœ¨é™·é˜±ä¸æœ€ä½³å®è·µ</h2>
<h3 data-id="heading-16">5.1 éœ€è¦è°¨æ…å¯¹å¾…çš„åœºæ™¯</h3>
<ol>
<li><strong>å®‰å…¨æ€§</strong>ï¼šæ°¸è¿œä¸è¦è®©Cursorç”Ÿæˆæ¶‰åŠæ•æ„Ÿé€»è¾‘çš„ä»£ç ï¼ˆå¦‚è®¤è¯ã€æ”¯ä»˜ï¼‰</li>
<li><strong>æ€§èƒ½å…³é”®ä»£ç </strong>ï¼šç®—æ³•ä¼˜åŒ–ç­‰éœ€è¦äººå·¥å®¡æŸ¥</li>
<li><strong>ä¸šåŠ¡å¤æ‚é€»è¾‘</strong>ï¼šAIå¯èƒ½ä¸ç†è§£ä¸šåŠ¡ä¸Šä¸‹æ–‡</li>
</ol>
<h3 data-id="heading-17">5.2 æ¨èçš„å¼€å‘æµç¨‹</h3>
<pre><code class="hljs language-css" lang="css">éœ€æ±‚åˆ†æ â†’ äººå·¥è®¾è®¡æ ¸å¿ƒæ¶æ„ â†’ <span class="hljs-attribute">Cursor</span>è¾…åŠ©å®ç°ç»†èŠ‚ â†’ äººå·¥ä»£ç å®¡æŸ¥ â†’ æµ‹è¯•éªŒè¯
</code></pre>
<h3 data-id="heading-18">5.3 ç‰ˆæœ¬æ§åˆ¶ç­–ç•¥</h3>
<p>å»ºè®®ï¼šå°†æ‰€æœ‰Cursorç”Ÿæˆçš„ä»£ç è§†ä¸º"åˆç¨¿"ï¼Œç»è¿‡å®¡æŸ¥ä¿®æ”¹åå†æäº¤ã€‚å¯ä»¥ä½¿ç”¨ç‰¹æ®Šçš„æäº¤å‰ç¼€ï¼š</p>
<pre><code class="hljs language-sql" lang="sql">git <span class="hljs-keyword">commit</span> <span class="hljs-operator">-</span>m "cursor: ç”ŸæˆåŸºç¡€ç»„ä»¶æ¡†æ¶"
git <span class="hljs-keyword">commit</span> <span class="hljs-operator">-</span>m "feat: ä¼˜åŒ–Cursorç”Ÿæˆçš„è¡¨å•ç»„ä»¶"
</code></pre>
<h2 data-id="heading-19">ç»“è¯­ï¼šAIæ—¶ä»£çš„å‰ç«¯å¼€å‘è€…å®šä½</h2>
<p>Cursorä¸æ˜¯è¦å–ä»£å‰ç«¯å¼€å‘è€…ï¼Œè€Œæ˜¯æˆä¸ºæˆ‘ä»¬çš„"è¶…èƒ½åŠ›æ‰©å±•"ã€‚å®ƒè®©æˆ‘ä»¬ï¼š</p>
<ol>
<li><strong>ä¸“æ³¨æ¶æ„è®¾è®¡</strong>ï¼šä»çç¢ä»£ç ä¸­è§£æ”¾å‡ºæ¥</li>
<li><strong>åŠ é€Ÿå­¦ä¹ æ›²çº¿</strong>ï¼šå¿«é€ŸæŒæ¡æ–°æŠ€æœ¯</li>
<li><strong>æå‡ä»£ç è´¨é‡</strong>ï¼šè·å¾—å³æ—¶çš„æœ€ä½³å®è·µå»ºè®®</li>
<li><strong>æ¿€å‘åˆ›é€ åŠ›</strong>ï¼šå°è¯•æ›´å¤šåˆ›æ–°æ–¹æ¡ˆ</li>
</ol>
<p><strong>è®°ä½</strong>ï¼šæœ€å¼ºå¤§çš„å¼€å‘è€…ä¸æ˜¯ä¼šå†™æ‰€æœ‰ä»£ç çš„äººï¼Œè€Œæ˜¯çŸ¥é“å¦‚ä½•è®©AIå†™å‡ºæ›´å¥½ä»£ç çš„äººã€‚</p>
<hr/>
<p><strong>é¢„å‘Š</strong>ï¼šåœ¨ä¸‹ä¸€ç¯‡ä¸­ï¼Œæˆ‘ä»¬å°†æ·±å…¥æ¢è®¨å¦‚ä½•ç”¨Cursoré‡æ„å¤§å‹å‰ç«¯é¡¹ç›®ï¼ŒåŒ…æ‹¬ï¼š</p>
<ul>
<li>é—ç•™ä»£ç çš„æ™ºèƒ½åˆ†æä¸é‡æ„</li>
<li>æŠ€æœ¯æ ˆè¿ç§»çš„è‡ªåŠ¨åŒ–ç­–ç•¥</li>
<li>æ€§èƒ½ä¼˜åŒ–çš„AIè¾…åŠ©æ–¹æ¡ˆ</li>
<li>å›¢é˜Ÿåä½œä¸­Cursorçš„æœ€ä½³å®è·µ</li>
</ul>
<p>å¦‚æœä½ å¯¹æŸä¸ªç‰¹å®šåœºæ™¯æ„Ÿå…´è¶£ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºç•™è¨€ã€‚è®©æˆ‘ä»¬å…±åŒæ¢ç´¢AIæ—¶ä»£å‰ç«¯å¼€å‘çš„æ–°èŒƒå¼ï¼</p>
<p><strong>æ€è€ƒé¢˜</strong>ï¼šåœ¨ä½ çš„å½“å‰é¡¹ç›®ä¸­ï¼Œå“ªä¸ªé‡å¤æ€§æœ€é«˜çš„ä»»åŠ¡æœ€é€‚åˆè®©Cursoræ¥ååŠ©å®Œæˆï¼Ÿè¯•ç€ç”¨å®ƒè§£å†³ä¸€ä¸ªå°é—®é¢˜ï¼Œå¹¶åœ¨è¯„è®ºåŒºåˆ†äº«ä½ çš„ä½“éªŒï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[é˜²æŠ–ä¸èŠ‚æµï¼šå‰ç«¯æ€§èƒ½ä¼˜åŒ–çš„â€œåŒå­æ˜Ÿâ€ï¼Œè®©ä½ çš„ç½‘é¡µä¸æ»‘å¦‚å¾·èŠ™ï¼]]></title>    <link>https://juejin.cn/post/7589462007528292386</link>    <guid>https://juejin.cn/post/7589462007528292386</guid>    <pubDate>2025-12-30T09:47:30.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589462007528292386" data-draft-id="7589466356779515956" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="é˜²æŠ–ä¸èŠ‚æµï¼šå‰ç«¯æ€§èƒ½ä¼˜åŒ–çš„â€œåŒå­æ˜Ÿâ€ï¼Œè®©ä½ çš„ç½‘é¡µä¸æ»‘å¦‚å¾·èŠ™ï¼"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,é¢è¯•"/> <meta itemprop="datePublished" content="2025-12-30T09:47:30.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Yira"/> <meta itemprop="url" content="https://juejin.cn/user/262123324974122"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            é˜²æŠ–ä¸èŠ‚æµï¼šå‰ç«¯æ€§èƒ½ä¼˜åŒ–çš„â€œåŒå­æ˜Ÿâ€ï¼Œè®©ä½ çš„ç½‘é¡µä¸æ»‘å¦‚å¾·èŠ™ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/262123324974122/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Yira
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-30T09:47:30.000Z" title="Tue Dec 30 2025 09:47:30 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">é˜²æŠ–ä¸èŠ‚æµï¼šå‰ç«¯æ€§èƒ½ä¼˜åŒ–çš„â€œåŒå­æ˜Ÿâ€ï¼Œè®©ä½ çš„ç½‘é¡µä¸æ»‘å¦‚å¾·èŠ™ï¼</h2>
<p>åœ¨ç°ä»£ Web å¼€å‘ä¸­ï¼Œç”¨æˆ·äº¤äº’è¶Šæ¥è¶Šä¸°å¯Œï¼Œäº‹ä»¶è§¦å‘ä¹Ÿè¶Šæ¥è¶Šé¢‘ç¹ã€‚æ— è®ºæ˜¯æœç´¢æ¡†çš„å®æ—¶å»ºè®®ã€é¡µé¢æ»šåŠ¨åŠ è½½ï¼Œè¿˜æ˜¯çª—å£å°ºå¯¸è°ƒæ•´ï¼Œè¿™äº›çœ‹ä¼¼ç®€å•çš„æ“ä½œèƒŒåï¼Œéƒ½å¯èƒ½éšè—ç€<strong>æ€§èƒ½é™·é˜±</strong>ã€‚å¦‚æœä¸åŠ ä»¥æ§åˆ¶ï¼Œé«˜é¢‘äº‹ä»¶ä¼šåƒæ´ªæ°´ä¸€æ ·å†²å®ä½ çš„åº”ç”¨â€”â€”å¯¼è‡´å¡é¡¿ã€å†…å­˜æ³„æ¼ï¼Œç”šè‡³æœåŠ¡å™¨å´©æºƒã€‚</p>
<p>å¹¸è¿çš„æ˜¯ï¼Œå‰ç«¯å·¥ç¨‹å¸ˆæ—©å·²æ‰¾åˆ°äº†ä¸¤å¤§åˆ©å™¨ï¼š<strong>é˜²æŠ–ï¼ˆDebounceï¼‰</strong> ä¸ <strong>èŠ‚æµï¼ˆThrottleï¼‰</strong> ã€‚å®ƒä»¬å¦‚åŒæ€§èƒ½ä¼˜åŒ–é¢†åŸŸçš„â€œåŒå­æ˜Ÿâ€ï¼Œä¸€ä¸ªä¸“æ³¨â€œç­‰ä½ åœæ‰‹â€ï¼Œä¸€ä¸ªåšæŒâ€œæŒ‰èŠ‚å¥æ¥â€ã€‚ä»Šå¤©ï¼Œæˆ‘ä»¬å°±æ·±å…¥å‰–æè¿™ä¸¤ä½é«˜æ‰‹çš„åŸç†ã€åŒºåˆ«ä¸å®æˆ˜ç”¨æ³•ï¼ŒåŠ©ä½ å†™å‡ºæ›´é«˜æ•ˆã€æ›´æµç•…çš„ä»£ç ï¼</p>
<hr/>
<h3 data-id="heading-1">ä¸€ã€é—®é¢˜æ ¹æºï¼šä¸ºä»€ä¹ˆæˆ‘ä»¬éœ€è¦é˜²æŠ–å’ŒèŠ‚æµï¼Ÿ</h3>
<p>æƒ³è±¡ä¸€ä¸‹ä½ åœ¨ç™¾åº¦æœç´¢æ¡†è¾“å…¥â€œReactæ•™ç¨‹â€ï¼š</p>
<ul>
<li>æ¯æŒ‰ä¸‹ä¸€ä¸ªé”®ï¼ˆR â†’ e â†’ a â†’ c â†’ t â€¦ï¼‰ï¼Œæµè§ˆå™¨éƒ½ä¼šè§¦å‘ä¸€æ¬¡Â <code>keyup</code>Â äº‹ä»¶ï¼›</li>
<li>å¦‚æœæ¯æ¬¡äº‹ä»¶éƒ½ç«‹å³å‘é€ AJAX è¯·æ±‚ï¼Œé‚£ä¹ˆçŸ­çŸ­ 6 ä¸ªå­—å°±ä¼šå‘å‡ºÂ <strong>6 æ¬¡ç½‘ç»œè¯·æ±‚</strong>ï¼›</li>
<li>è€Œå®é™…ä¸Šï¼Œä½ åªå…³å¿ƒæœ€ç»ˆçš„å…³é”®è¯ â€œReactæ•™ç¨‹â€ã€‚</li>
</ul>
<p>è¿™å°±æ˜¯å…¸å‹çš„ <strong>â€œé«˜é¢‘äº‹ä»¶ + å¤æ‚ä»»åŠ¡â€</strong> ç»„åˆï¼š</p>
<ul>
<li><strong>äº‹ä»¶å¤ªå¯†é›†</strong>ï¼š<code>keyup</code>ã€<code>scroll</code>ã€<code>resize</code>Â ç­‰äº‹ä»¶æ¯ç§’å¯è§¦å‘æ•°åæ¬¡ï¼›</li>
<li><strong>ä»»åŠ¡å¤ªå¤æ‚</strong>ï¼šAJAX è¯·æ±‚ã€DOM æ“ä½œã€å¤æ‚è®¡ç®—ç­‰æ¶ˆè€—å¤§é‡èµ„æºã€‚</li>
</ul>
<p>è‹¥ä¸åŠ é™åˆ¶ï¼Œåæœä¸¥é‡ï¼š</p>
<ul>
<li>æµªè´¹å¸¦å®½å’ŒæœåŠ¡å™¨èµ„æºï¼›</li>
<li>é¡µé¢å¡é¡¿ï¼Œç”¨æˆ·ä½“éªŒå·®ï¼›</li>
<li>å¯èƒ½å› è¯·æ±‚é¡ºåºé”™ä¹±å¯¼è‡´ UI æ˜¾ç¤ºé”™è¯¯ï¼ˆç«æ€æ¡ä»¶ï¼‰ã€‚</li>
</ul>
<p>äºæ˜¯ï¼Œ<strong>é˜²æŠ–</strong> å’Œ <strong>èŠ‚æµ</strong> åº”è¿è€Œç”Ÿã€‚</p>
<hr/>
<h3 data-id="heading-2">äºŒã€é˜²æŠ–ï¼ˆDebounceï¼‰ï¼šåªæ‰§è¡Œæœ€åä¸€æ¬¡</h3>
<h4 data-id="heading-3">âœ… æ ¸å¿ƒæ€æƒ³</h4>
<blockquote>
<p><strong>â€œåˆ«æ€¥ï¼Œç­‰ç”¨æˆ·å½»åº•åœæ‰‹å†è¯´ï¼â€</strong></p>
</blockquote>
<p>é˜²æŠ–çš„é€»è¾‘éå¸¸ç®€å•ï¼š<strong>åœ¨è¿ç»­è§¦å‘äº‹ä»¶çš„è¿‡ç¨‹ä¸­ï¼Œä¸æ‰§è¡Œä»»åŠ¡ï¼›åªæœ‰å½“äº‹ä»¶åœæ­¢è§¦å‘è¶…è¿‡æŒ‡å®šæ—¶é—´åï¼Œæ‰æ‰§è¡Œä¸€æ¬¡ã€‚</strong></p>
<h4 data-id="heading-4">ğŸ  ç”Ÿæ´»ç±»æ¯”ï¼šç”µæ¢¯å…³é—¨</h4>
<ul>
<li>ç”µæ¢¯é—¨æ‰“å¼€åï¼Œç­‰å¾… 5 ç§’å†å…³é—­ï¼›</li>
<li>å¦‚æœç¬¬ 3 ç§’æœ‰äººè¿›æ¥ï¼Œå°±<strong>é‡æ–°è®¡æ—¶ 5 ç§’</strong>ï¼›</li>
<li>åªæœ‰è¿ç»­ 5 ç§’æ²¡äººè¿›å…¥ï¼Œé—¨æ‰çœŸæ­£å…³é—­ã€‚</li>
</ul>
<h4 data-id="heading-5">ğŸ’» ä»£ç å®ç°ï¼ˆé—­åŒ… + å®šæ—¶å™¨ï¼‰</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">debounce</span>(<span class="hljs-params">fn, delay</span>) {
  <span class="hljs-keyword">let</span> timer; <span class="hljs-comment">// é—­åŒ…å˜é‡ï¼Œä¿å­˜å®šæ—¶å™¨ ID</span>
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span> (<span class="hljs-params">...args</span>) {
    <span class="hljs-built_in">clearTimeout</span>(timer); <span class="hljs-comment">// æ¸…é™¤ä¸Šä¸€ä¸ªå®šæ—¶å™¨</span>
    timer = <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
      fn.<span class="hljs-title function_">apply</span>(<span class="hljs-variable language_">this</span>, args); <span class="hljs-comment">// æ‰§è¡ŒåŸå‡½æ•°</span>
    }, delay);
  };
}
</code></pre>
<h5 data-id="heading-6">å…³é”®ç‚¹è§£æï¼š</h5>
<ul>
<li><code>timer</code>Â æ˜¯<strong>è‡ªç”±å˜é‡</strong>ï¼Œè¢«å†…éƒ¨å‡½æ•°é€šè¿‡é—­åŒ…â€œè®°ä½â€ï¼›</li>
<li>æ¯æ¬¡è°ƒç”¨è¿”å›çš„å‡½æ•°ï¼Œéƒ½ä¼šå…ˆÂ <code>clearTimeout</code>ï¼Œå†Â <code>setTimeout</code>ï¼›</li>
<li>ç»“æœï¼š<strong>åªæœ‰æœ€åä¸€æ¬¡è§¦å‘åçš„Â <code>delay</code>Â æ¯«ç§’å†…æ— æ–°è§¦å‘ï¼Œæ‰ä¼šæ‰§è¡Œ</strong>ã€‚</li>
</ul>
<h4 data-id="heading-7">ğŸŒŸ å…¸å‹åº”ç”¨åœºæ™¯</h4>





















<table><thead><tr><th>åœºæ™¯</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>æœç´¢å»ºè®®</strong></td><td>ç”¨æˆ·æ‰“å­—æ—¶ï¼Œç­‰ä»–åœæ‰‹å†å‘è¯·æ±‚ï¼Œé¿å…æ— æ•ˆæœç´¢</td></tr><tr><td><strong>è¡¨å•æ ¡éªŒ</strong></td><td>è¾“å…¥é‚®ç®±/å¯†ç åï¼Œå»¶è¿ŸéªŒè¯ï¼Œå‡å°‘å¹²æ‰°</td></tr><tr><td><strong>çª—å£ resize ä¿å­˜å¸ƒå±€</strong></td><td>ç”¨æˆ·è°ƒæ•´å®Œçª—å£å¤§å°å†ä¿å­˜ï¼Œè€Œéè¿‡ç¨‹ä¸­åå¤ä¿å­˜</td></tr></tbody></table>
<blockquote>
<p>âœ… ä¸€å¥è¯æ€»ç»“ï¼š<strong>é˜²æŠ–é€‚ç”¨äºâ€œæœ‰æ˜ç¡®ç»“æŸç‚¹â€çš„æ“ä½œï¼Œå…³æ³¨æœ€ç»ˆçŠ¶æ€ã€‚</strong></p>
</blockquote>
<hr/>
<h3 data-id="heading-8">ä¸‰ã€èŠ‚æµï¼ˆThrottleï¼‰ï¼šå›ºå®šé—´éš”æ‰§è¡Œ</h3>
<h4 data-id="heading-9">âœ… æ ¸å¿ƒæ€æƒ³</h4>
<blockquote>
<p><strong>â€œåˆ«æ…Œï¼ŒæŒ‰æˆ‘çš„èŠ‚å¥æ¥ï¼â€</strong></p>
</blockquote>
<p>èŠ‚æµçš„é€»è¾‘æ˜¯ï¼š<strong>æ— è®ºäº‹ä»¶è§¦å‘å¤šé¢‘ç¹ï¼Œæˆ‘ä¿è¯æ¯éš” X æ¯«ç§’æœ€å¤šæ‰§è¡Œä¸€æ¬¡ä»»åŠ¡ã€‚</strong></p>
<h4 data-id="heading-10">ğŸ  ç”Ÿæ´»ç±»æ¯”ï¼šFPS æ¸¸æˆå°„é€Ÿ</h4>
<ul>
<li>å³ä½¿ä½ ä¸€ç›´æŒ‰ä½é¼ æ ‡å·¦é”®ï¼Œæªä¹Ÿåªä¼šæŒ‰ç…§è®¾å®šçš„å°„é€Ÿï¼ˆå¦‚æ¯ç§’ 10 å‘ï¼‰å°„å‡»ï¼›</li>
<li>å¤šä½™çš„ç‚¹å‡»ä¼šè¢«å¿½ç•¥ã€‚</li>
</ul>
<h4 data-id="heading-11">ğŸ’» ä»£ç å®ç°ï¼ˆæ—¶é—´æˆ³ç‰ˆï¼‰</h4>
<pre><code class="hljs language-ini" lang="ini">function throttle(fn, delay) {
  let <span class="hljs-attr">last</span> = <span class="hljs-number">0</span><span class="hljs-comment">; // ä¸Šæ¬¡æ‰§è¡Œæ—¶é—´</span>
  return function (...args) {
    const <span class="hljs-attr">now</span> = Date.now()<span class="hljs-comment">;</span>
    if (now - last &gt;= delay) {
      fn.apply(this, args)<span class="hljs-comment">;</span>
      <span class="hljs-attr">last</span> = now<span class="hljs-comment">;</span>
    }
  }<span class="hljs-comment">;</span>
}
</code></pre>
<p>ä½†ä½ æä¾›çš„ä»£ç æ›´æ™ºèƒ½â€”â€”å®ƒç»“åˆäº†<strong>å°¾éƒ¨è¡¥å¿</strong>ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">function throttle(fn, delay) {
  let last, deferTimer<span class="hljs-comment">;</span>
  return function () {
    let <span class="hljs-attr">that</span> = this<span class="hljs-comment">;</span>
    let <span class="hljs-attr">_args</span> = arguments<span class="hljs-comment">;</span>
    let <span class="hljs-attr">now</span> = +new Date()<span class="hljs-comment">;</span>

    if (last &amp;&amp; now &lt; last + delay) {
      // è¿˜åœ¨å†·å´æœŸï¼šæ¸…é™¤æ—§å®šæ—¶å™¨ï¼Œå®‰æ’æ–°å°¾éƒ¨ä»»åŠ¡
      clearTimeout(deferTimer)<span class="hljs-comment">;</span>
      <span class="hljs-attr">deferTimer</span> = setTimeout(() =&gt; {
        <span class="hljs-attr">last</span> = now<span class="hljs-comment">;</span>
        fn.apply(that, _args)<span class="hljs-comment">;</span>
      }, delay)<span class="hljs-comment">;</span>
    } else {
      // å†·å´æœŸç»“æŸï¼šç«‹å³æ‰§è¡Œ
      <span class="hljs-attr">last</span> = now<span class="hljs-comment">;</span>
      fn.apply(that, _args)<span class="hljs-comment">;</span>
    }
  }<span class="hljs-comment">;</span>
}
</code></pre>
<h5 data-id="heading-12">å·¥ä½œæµç¨‹ï¼š</h5>
<ol>
<li>ç¬¬ä¸€æ¬¡è°ƒç”¨ â†’ ç«‹å³æ‰§è¡Œï¼›</li>
<li>é«˜é¢‘è°ƒç”¨æœŸé—´ â†’ å¿½ç•¥ä¸­é—´æ“ä½œï¼Œä½†<strong>è®°å½•æœ€åä¸€æ¬¡</strong>ï¼›</li>
<li>åœæ­¢è§¦å‘å â†’ åœ¨Â <code>delay</code>Â æ¯«ç§’åæ‰§è¡Œæœ€åä¸€æ¬¡ã€‚</li>
</ol>
<blockquote>
<p>âš ï¸ æ³¨æ„ï¼šè¿™ç§å®ç°ç¡®ä¿äº†<strong>å°¾éƒ¨æ“ä½œä¸ä¸¢å¤±</strong>ï¼Œé€‚åˆéœ€è¦â€œæ”¶å°¾â€çš„åœºæ™¯ã€‚</p>
</blockquote>
<h4 data-id="heading-13">ğŸŒŸ å…¸å‹åº”ç”¨åœºæ™¯</h4>

























<table><thead><tr><th>åœºæ™¯</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>é¡µé¢æ»šåŠ¨ï¼ˆscrollï¼‰</strong></td><td>æ¯ 200ms è®°å½•ä¸€æ¬¡æ»šåŠ¨ä½ç½®ï¼Œé¿å…å¡é¡¿</td></tr><tr><td><strong>é¼ æ ‡ç§»åŠ¨ï¼ˆmousemoveï¼‰</strong></td><td>æ§åˆ¶åŠ¨ç”»æˆ–ç»˜å›¾é¢‘ç‡</td></tr><tr><td><strong>æŒ‰é’®é˜²è¿ç‚¹</strong></td><td>æäº¤è®¢å•å 1 ç§’å†…ç¦æ­¢å†æ¬¡ç‚¹å‡»</td></tr><tr><td><strong>æ— é™æ»šåŠ¨åŠ è½½</strong></td><td>ç”¨æˆ·æ»šåŠ¨åˆ°åº•éƒ¨æ—¶ï¼Œå®šæœŸæ£€æŸ¥æ˜¯å¦éœ€åŠ è½½æ–°æ•°æ®</td></tr></tbody></table>
<blockquote>
<p>âœ… ä¸€å¥è¯æ€»ç»“ï¼š<strong>èŠ‚æµé€‚ç”¨äºâ€œæŒç»­é«˜é¢‘â€çš„æ“ä½œï¼Œå…³æ³¨è¿‡ç¨‹èŠ‚å¥ã€‚</strong></p>
</blockquote>
<hr/>
<h3 data-id="heading-14">å››ã€é˜²æŠ– vs èŠ‚æµï¼šå…³é”®åŒºåˆ«ä¸€ç›®äº†ç„¶</h3>








































<table><thead><tr><th>å¯¹æ¯”é¡¹</th><th>é˜²æŠ–ï¼ˆDebounceï¼‰</th><th>èŠ‚æµï¼ˆThrottleï¼‰</th></tr></thead><tbody><tr><td><strong>æ‰§è¡Œæ—¶æœº</strong></td><td>åœæ­¢è§¦å‘åå»¶è¿Ÿæ‰§è¡Œ</td><td>å›ºå®šé—´éš”æ‰§è¡Œ</td></tr><tr><td><strong>æ‰§è¡Œæ¬¡æ•°</strong></td><td>N æ¬¡è§¦å‘ â†’ 1 æ¬¡æ‰§è¡Œ</td><td>N æ¬¡è§¦å‘ â†’ â‰ˆ N/delay æ¬¡æ‰§è¡Œ</td></tr><tr><td><strong>æ˜¯å¦ä¿ç•™å°¾éƒ¨</strong></td><td>æ˜¯ï¼ˆå¤©ç„¶ä¿ç•™ï¼‰</td><td>åŸºç¡€ç‰ˆå¦ï¼Œå¢å¼ºç‰ˆå¯ä¿ç•™</td></tr><tr><td><strong>æ ¸å¿ƒæœºåˆ¶</strong></td><td><code>clearTimeout + setTimeout</code></td><td>æ—¶é—´æˆ³åˆ¤æ–­ æˆ–Â <code>setTimeout</code>Â æ§åˆ¶</td></tr><tr><td><strong>é€‚ç”¨äº‹ä»¶</strong></td><td><code>input</code>,Â <code>keyup</code></td><td><code>scroll</code>,Â <code>resize</code>,Â <code>mousemove</code></td></tr><tr><td><strong>ç”¨æˆ·æ„ŸçŸ¥</strong></td><td>â€œæ‰“å®Œå­—æ‰å“åº”â€</td><td>â€œæ»šåŠ¨æ—¶å®šæœŸå“åº”â€</td></tr></tbody></table>
<blockquote>
<p>ğŸ”¥ è®°ä½è¿™ä¸ªå£è¯€ï¼š<br/>
<strong>â€œé˜²æŠ–ç­‰åœæ‰‹ï¼ŒèŠ‚æµæ§èŠ‚å¥ã€‚â€</strong></p>
</blockquote>
<hr/>
<h3 data-id="heading-15">äº”ã€é—­åŒ…ï¼šé˜²æŠ–ä¸èŠ‚æµçš„â€œå¹•åè‹±é›„â€</h3>
<p>ä½ å¯èƒ½æ³¨æ„åˆ°ï¼Œæ— è®ºæ˜¯ <code>debounce</code> è¿˜æ˜¯ <code>throttle</code>ï¼Œéƒ½ç”¨åˆ°äº† <strong>é—­åŒ…</strong>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">debounce</span>(<span class="hljs-params">fn, delay</span>) {
  <span class="hljs-keyword">let</span> timer; <span class="hljs-comment">// â† è¿™ä¸ªå˜é‡è¢«å†…éƒ¨å‡½æ•°â€œè®°ä½â€</span>
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
    <span class="hljs-built_in">clearTimeout</span>(timer); <span class="hljs-comment">// â† èƒ½è®¿é—®å¤–éƒ¨çš„ timer</span>
    <span class="hljs-comment">// ...</span>
  };
}
</code></pre>
<h4 data-id="heading-16">ä¸ºä»€ä¹ˆå¿…é¡»ç”¨é—­åŒ…ï¼Ÿ</h4>
<ul>
<li><code>timer</code>ã€<code>last</code>Â ç­‰çŠ¶æ€éœ€è¦åœ¨<strong>å¤šæ¬¡å‡½æ•°è°ƒç”¨ä¹‹é—´ä¿æŒ</strong>ï¼›</li>
<li>æ™®é€šå±€éƒ¨å˜é‡åœ¨å‡½æ•°æ‰§è¡Œå®Œå°±é”€æ¯ï¼›</li>
<li>è€Œé—­åŒ…è®©å†…éƒ¨å‡½æ•°<strong>æŒç»­æŒæœ‰å¯¹å¤–éƒ¨å˜é‡çš„å¼•ç”¨</strong>ï¼Œå½¢æˆâ€œç§æœ‰è®°å¿†â€ã€‚</li>
</ul>
<blockquote>
<p>ğŸ’¡ é—­åŒ… = å‡½æ•° + å…¶è¯æ³•ç¯å¢ƒã€‚å®ƒæ˜¯å®ç°çŠ¶æ€ç®¡ç†çš„åŸºçŸ³ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-17">å…­ã€å®æˆ˜å»ºè®®ï¼šå¦‚ä½•é€‰æ‹©ï¼Ÿ</h3>





























<table><thead><tr><th>ä½ çš„éœ€æ±‚</th><th>æ¨èæ–¹æ¡ˆ</th></tr></thead><tbody><tr><td>ç”¨æˆ·è¾“å…¥æœç´¢è¯</td><td>âœ… é˜²æŠ–ï¼ˆ500msï¼‰</td></tr><tr><td>ç›‘å¬çª—å£ resize</td><td>âœ… èŠ‚æµï¼ˆ200msï¼‰</td></tr><tr><td>æ»šåŠ¨åŠ è½½æ›´å¤š</td><td>âœ… èŠ‚æµï¼ˆ300msï¼‰</td></tr><tr><td>è¡¨å•è‡ªåŠ¨ä¿å­˜è‰ç¨¿</td><td>âœ… é˜²æŠ–ï¼ˆ1000msï¼‰</td></tr><tr><td>é¼ æ ‡æ‹–æ‹½å…ƒç´ </td><td>âœ… èŠ‚æµï¼ˆ16ms â‰ˆ 60fpsï¼‰</td></tr></tbody></table>
<blockquote>
<p>ğŸ“Œ å°æŠ€å·§ï¼š</p>
<ul>
<li>é˜²æŠ–å»¶è¿Ÿé€šå¸¸Â <strong>300~500ms</strong>ï¼ˆå¹³è¡¡å“åº”ä¸æ€§èƒ½ï¼‰ï¼›</li>
<li>èŠ‚æµé—´éš”é€šå¸¸Â <strong>100~300ms</strong>ï¼ˆæ ¹æ®åœºæ™¯è°ƒæ•´ï¼‰ã€‚</li>
</ul>
</blockquote>
<hr/>
<h3 data-id="heading-18">ä¸ƒã€ç»“è¯­ï¼šä¼˜é›…åœ°æ§åˆ¶é¢‘ç‡ï¼Œæ˜¯ä¸“ä¸šå‰ç«¯çš„æ ‡å¿—</h3>
<p>é˜²æŠ–ä¸èŠ‚æµï¼Œçœ‹ä¼¼åªæ˜¯å‡ è¡Œä»£ç ï¼Œå´ä½“ç°äº†<strong>å¯¹ç”¨æˆ·ä½“éªŒå’Œç³»ç»Ÿæ€§èƒ½çš„æ·±åˆ»ç†è§£</strong>ã€‚å®ƒä»¬ä¸æ˜¯ç‚«æŠ€ï¼Œè€Œæ˜¯å·¥ç¨‹å®è·µä¸­ä¸å¯æˆ–ç¼ºçš„â€œå®‰å…¨é˜€â€ã€‚</p>
<p>ä¸‹æ¬¡å½“ä½ é¢å¯¹é«˜é¢‘äº‹ä»¶æ—¶ï¼Œä¸å¦¨é—®é—®è‡ªå·±ï¼š</p>
<ul>
<li>æˆ‘éœ€è¦çš„æ˜¯<strong>æœ€ç»ˆç»“æœ</strong>ï¼Œè¿˜æ˜¯<strong>è¿‡ç¨‹é‡‡æ ·</strong>ï¼Ÿ</li>
<li>ç”¨æˆ·æ˜¯å¦å¸Œæœ›<strong>ç«‹åˆ»å“åº”</strong>ï¼Œè¿˜æ˜¯å¯ä»¥<strong>ç¨ç­‰ç‰‡åˆ»</strong>ï¼Ÿ</li>
</ul>
<p>ç­”æ¡ˆå°†æŒ‡å¼•ä½ é€‰æ‹©é˜²æŠ–æˆ–èŠ‚æµã€‚æŒæ¡è¿™â€œåŒå­æ˜Ÿâ€ï¼Œä½ çš„ä»£ç å°†ä¸å†â€œé¢¤æŠ–â€ï¼Œè€Œæ˜¯å¦‚ä¸èˆ¬é¡ºæ»‘â€”â€”è¿™æ‰æ˜¯çœŸæ­£çš„å‰ç«¯è‰ºæœ¯ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[vue3 KeepAlive æ ¸å¿ƒåŸç†å’Œæ¸²æŸ“æ›´æ–°æµç¨‹]]></title>    <link>https://juejin.cn/post/7589445154534408244</link>    <guid>https://juejin.cn/post/7589445154534408244</guid>    <pubDate>2025-12-30T09:45:43.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589445154534408244" data-draft-id="7589475497000861711" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="vue3 KeepAlive æ ¸å¿ƒåŸç†å’Œæ¸²æŸ“æ›´æ–°æµç¨‹"/> <meta itemprop="keywords" content="å‰ç«¯,Vue.js,é¢è¯•"/> <meta itemprop="datePublished" content="2025-12-30T09:45:43.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ·‹ç€141"/> <meta itemprop="url" content="https://juejin.cn/user/457013611467416"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            vue3 KeepAlive æ ¸å¿ƒåŸç†å’Œæ¸²æŸ“æ›´æ–°æµç¨‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/457013611467416/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ·‹ç€141
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-30T09:45:43.000Z" title="Tue Dec 30 2025 09:45:43 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">vue3 KeepAlive æ ¸å¿ƒåŸç†å’Œæ¸²æŸ“æ›´æ–°æµç¨‹</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fcn.vuejs.org%2Fguide%2Fbuilt-ins%2Fkeep-alive" target="_blank" title="https://cn.vuejs.org/guide/built-ins/keep-alive" ref="nofollow noopener noreferrer">KeepAlive</a> æ˜¯ Vue 3 çš„å†…ç½®ç»„ä»¶ï¼Œç”¨äºç¼“å­˜åŠ¨æ€ç»„ä»¶ï¼Œé¿å…é‡å¤åˆ›å»ºå’Œé”€æ¯ç»„ä»¶å®ä¾‹ã€‚
å½“ç»„ä»¶è¢«åˆ‡æ¢æ—¶ï¼ŒKeepAlive ä¼šå°†ç»„ä»¶å®ä¾‹å­˜å‚¨åœ¨å†…å­˜ä¸­ï¼Œè€Œä¸æ˜¯å®Œå…¨é”€æ¯å®ƒï¼Œä»è€Œä¿ç•™ç»„ä»¶çŠ¶æ€å¹¶æå‡æ€§èƒ½ã€‚</p>
<h3 data-id="heading-1">1. æŒ‚è½½</h3>
<p>å°†å­ç»„ä»¶vnodeè¿›è¡Œç¼“å­˜ï¼Œå¹¶ä¸”è®¾ç½®<code>vnode.shapeFlag |= ShapeFlags.COMPONENT_SHOULD_KEEP_ALIVE</code>,ä¾›è¿è¡Œæ—¶åœ¨å¸è½½æ—¶ç‰¹æ®Šå¤„ç†</p>
<h3 data-id="heading-2">2. åœç”¨ <code>deactivate</code></h3>
<p>å½“ç»„ä»¶éœ€è¦éšè—æ—¶, æ ¹æ®<code>COMPONENT_SHOULD_KEEP_ALIVE å’Œ renderer</code>çš„é€»è¾‘</p>
<ol>
<li>å°†ç»„ä»¶ç§»åŠ¨åˆ° <code>storageContainer</code>ï¼ˆä¸€ä¸ªä¸å¯è§çš„ DOM å®¹å™¨ï¼‰</li>
<li>è§¦å‘ç»„ä»¶çš„ <code>deactivated</code> ç”Ÿå‘½å‘¨æœŸé’©å­</li>
<li>ç»„ä»¶å®ä¾‹å’ŒçŠ¶æ€å¾—ä»¥ä¿ç•™</li>
</ol>
<h3 data-id="heading-3">3. æ¿€æ´» <code>activate</code></h3>
<p>å½“ç»„ä»¶å†æ¬¡æ¿€æ´»æ—¶, æ ¹æ®<code>COMPONENT_KEPT_ALIVE å’Œ renderer</code>çš„é€»è¾‘</p>
<ol>
<li><code>æ–°çš„ vnode.el ä½¿ç”¨ cachedVNode.el</code></li>
<li><code>æ–°çš„ vnode.component ä½¿ç”¨ cachedVNode.component</code>ï¼Œè¿™ä¸ªæ˜¯å·²ç»æŒ‚è½½çš„ ç»„ä»¶äº†ï¼Œé‡Œé¢çš„subTreeéƒ½æ˜¯æœ‰elçš„</li>
<li>å°† vnode ç§»å›ç›®æ ‡å®¹å™¨</li>
<li>æ‰§è¡Œ patch æ›´æ–°ï¼ˆå¤„ç† props å˜åŒ–ï¼‰</li>
<li>è§¦å‘ç»„ä»¶çš„ <code>activated</code> ç”Ÿå‘½å‘¨æœŸé’©å­</li>
</ol>
<h3 data-id="heading-4">4. ç›¸å…³æºç ï¼ˆåªä¿ç•™å…³äºKeepAliveç›¸å…³çš„æ ¸å¿ƒé€»è¾‘ï¼‰</h3>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">const</span> <span class="hljs-title class_">KeepAliveImpl</span>: <span class="hljs-title class_">ComponentOptions</span> = {
  <span class="hljs-attr">name</span>: <span class="hljs-string">`KeepAlive`</span>,
  <span class="hljs-attr">__isKeepAlive</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-title function_">setup</span>(<span class="hljs-params">_, { slots }: SetupContext</span>) {
    <span class="hljs-keyword">const</span> instance = <span class="hljs-title function_">getCurrentInstance</span>()!
    <span class="hljs-keyword">const</span> sharedContext = instance.<span class="hljs-property">ctx</span> <span class="hljs-keyword">as</span> <span class="hljs-title class_">KeepAliveContext</span>
    <span class="hljs-keyword">const</span> <span class="hljs-attr">cache</span>: <span class="hljs-title class_">Cache</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>()
    <span class="hljs-keyword">const</span> <span class="hljs-attr">keys</span>: <span class="hljs-title class_">Keys</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>()

    <span class="hljs-keyword">const</span> {
      <span class="hljs-attr">renderer</span>: {
        <span class="hljs-attr">p</span>: patch,
        <span class="hljs-attr">m</span>: move,
        <span class="hljs-attr">um</span>: _unmount,
        <span class="hljs-attr">o</span>: { createElement },
      },
    } = sharedContext
    <span class="hljs-keyword">const</span> storageContainer = <span class="hljs-title function_">createElement</span>(<span class="hljs-string">'div'</span>)

    <span class="hljs-comment">// vnode ç¼“å­˜çš„å­ç»„ä»¶, ç»“åˆruntime patch</span>
    sharedContext.<span class="hljs-property">activate</span> = <span class="hljs-function">(<span class="hljs-params">
      vnode,
      container,
      anchor,
      <span class="hljs-keyword">namespace</span>,
      optimized
    </span>) =&gt;</span> {
      <span class="hljs-comment">// instance æ˜¯å­ç»„ä»¶å®ä¾‹</span>
      <span class="hljs-keyword">const</span> instance = vnode.<span class="hljs-property">component</span>!
      <span class="hljs-comment">// ç§»å›æ¥</span>
      <span class="hljs-title function_">move</span>(vnode, container, anchor, <span class="hljs-title class_">MoveType</span>.<span class="hljs-property">ENTER</span>, parentSuspense)
      <span class="hljs-comment">// in case props have changed</span>
      <span class="hljs-title function_">patch</span>(instance.<span class="hljs-property">vnode</span>, vnode, container, anchor, instance,...)
      <span class="hljs-title function_">queuePostRenderEffect</span>(<span class="hljs-function">() =&gt;</span> {
        instance.<span class="hljs-property">isDeactivated</span> = <span class="hljs-literal">false</span>
        <span class="hljs-keyword">if</span> (instance.<span class="hljs-property">a</span>) {
          <span class="hljs-title function_">invokeArrayFns</span>(instance.<span class="hljs-property">a</span>)
        }
      }, parentSuspense)
    }

    <span class="hljs-comment">// vnode ç¼“å­˜çš„å­ç»„ä»¶ï¼Œé‡Œé¢çš„ç¼“å­˜çš„ç»„ä»¶é™¤äº†è¿™ä¸¤ä¸ªé’©å­ï¼Œå…¶ä»–éƒ½æ˜¯å¸¸è§„æµç¨‹</span>
    sharedContext.<span class="hljs-property">deactivate</span> = <span class="hljs-function">(<span class="hljs-params">vnode: VNode</span>) =&gt;</span> {
      <span class="hljs-keyword">const</span> instance = vnode.<span class="hljs-property">component</span>!
      <span class="hljs-comment">// ç§»åˆ°ç¼“å­˜å®¹å™¨</span>
      <span class="hljs-title function_">move</span>(vnode, storageContainer, <span class="hljs-literal">null</span>, <span class="hljs-title class_">MoveType</span>.<span class="hljs-property">LEAVE</span>, parentSuspense)
      <span class="hljs-title function_">queuePostRenderEffect</span>(<span class="hljs-function">() =&gt;</span> {
        <span class="hljs-keyword">if</span> (instance.<span class="hljs-property">da</span>) {
          <span class="hljs-title function_">invokeArrayFns</span>(instance.<span class="hljs-property">da</span>)
        }
      }, parentSuspense)
    }

    <span class="hljs-comment">// å½“ç¼“å­˜å¤±æ•ˆï¼Œå°±éœ€è¦çœŸæ­£çš„å¸è½½</span>
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">unmount</span>(<span class="hljs-params">vnode: VNode</span>) {
      <span class="hljs-comment">// reset the shapeFlag so it can be properly unmounted</span>
      <span class="hljs-title function_">resetShapeFlag</span>(vnode)
      <span class="hljs-title function_">_unmount</span>(vnode, instance, parentSuspense, <span class="hljs-literal">true</span>)
    }

    <span class="hljs-keyword">let</span> <span class="hljs-attr">pendingCacheKey</span>: <span class="hljs-title class_">CacheKey</span> | <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">cacheSubtree</span> = (<span class="hljs-params"/>) =&gt; {
      <span class="hljs-comment">// fix #1621, the pendingCacheKey could be 0</span>
      <span class="hljs-keyword">if</span> (pendingCacheKey != <span class="hljs-literal">null</span>) {
        cache.<span class="hljs-title function_">set</span>(pendingCacheKey, <span class="hljs-title function_">getInnerChild</span>(instance.<span class="hljs-property">subTree</span>))
      }
    }
    <span class="hljs-title function_">onMounted</span>(cacheSubtree)
    <span class="hljs-title function_">onUpdated</span>(cacheSubtree)

    <span class="hljs-title function_">onBeforeUnmount</span>(<span class="hljs-function">() =&gt;</span> {
      cache.<span class="hljs-title function_">forEach</span>(unmount)
    })

    <span class="hljs-comment">// æ¸²æŸ“å‡½æ•°</span>
    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> {
      pendingCacheKey = <span class="hljs-literal">null</span>

      <span class="hljs-keyword">const</span> children = slots.<span class="hljs-title function_">default</span>()
      <span class="hljs-keyword">const</span> rawVNode = children[<span class="hljs-number">0</span>]
      <span class="hljs-keyword">const</span> vnode = children[<span class="hljs-number">0</span>]
      <span class="hljs-comment">// è¿™é‡Œçš„vnode å°±æ˜¯æŒ‡ ç¼“å­˜çš„ç»„ä»¶</span>
      <span class="hljs-comment">// warn(`KeepAlive should contain exactly one component child.`)</span>

      <span class="hljs-keyword">const</span> comp = vnode.<span class="hljs-property">type</span> <span class="hljs-keyword">as</span> <span class="hljs-title class_">ConcreteComponent</span>

      <span class="hljs-keyword">const</span> name = <span class="hljs-title function_">getComponentName</span>(comp)

      <span class="hljs-keyword">const</span> { include, exclude, max } = props

      <span class="hljs-keyword">if</span> (
        (include &amp;&amp; (!name || !<span class="hljs-title function_">matches</span>(include, name))) ||
        (exclude &amp;&amp; name &amp;&amp; <span class="hljs-title function_">matches</span>(exclude, name))
      ) {
        <span class="hljs-comment">// #11717 // æˆ‘å†™çš„pr!!!!</span>
        vnode.<span class="hljs-property">shapeFlag</span> &amp;= ~<span class="hljs-title class_">ShapeFlags</span>.<span class="hljs-property">COMPONENT_SHOULD_KEEP_ALIVE</span>
        <span class="hljs-keyword">return</span> rawVNode
      }

      <span class="hljs-keyword">const</span> key = vnode.<span class="hljs-property">key</span> == <span class="hljs-literal">null</span> ? comp : vnode.<span class="hljs-property">key</span>
      <span class="hljs-keyword">const</span> cachedVNode = cache.<span class="hljs-title function_">get</span>(key)

      pendingCacheKey = key

      <span class="hljs-keyword">if</span> (cachedVNode) {
        <span class="hljs-comment">// ä½¿ç”¨ç¼“å­˜çš„elï¼Œç¼“å­˜çš„component treeï¼Œæ‰€ä»¥å°±ä¸ç”¨èµ°mount</span>
        <span class="hljs-comment">// copy over mounted state</span>
        vnode.<span class="hljs-property">el</span> = cachedVNode.<span class="hljs-property">el</span>
        vnode.<span class="hljs-property">component</span> = cachedVNode.<span class="hljs-property">component</span>
        <span class="hljs-comment">// ç»“åˆruntime patch æµç¨‹ å½“æ¿€æ´»æ—¶å°±ä¸èµ°mount</span>
        vnode.<span class="hljs-property">shapeFlag</span> |= <span class="hljs-title class_">ShapeFlags</span>.<span class="hljs-property">COMPONENT_KEPT_ALIVE</span>
      } <span class="hljs-keyword">else</span> {
        keys.<span class="hljs-title function_">add</span>(key)
      }
      <span class="hljs-comment">// avoid vnode being unmounted</span>
      <span class="hljs-comment">// ç»“åˆruntime patch æµç¨‹ å½“å¸è½½æ—¶å°±ä¸èµ°unmount</span>
      vnode.<span class="hljs-property">shapeFlag</span> |= <span class="hljs-title class_">ShapeFlags</span>.<span class="hljs-property">COMPONENT_SHOULD_KEEP_ALIVE</span>

      <span class="hljs-keyword">return</span> vnode
    }
  },
}
</code></pre>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// renderer ä¸­å…³äº KeepAliveçš„é€»è¾‘</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">baseCreateRenderer</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">processComponent</span> = (<span class="hljs-params">
    n1: VNode | <span class="hljs-literal">null</span>,
    n2: VNode,
    container: RendererElement,
    anchor: RendererNode | <span class="hljs-literal">null</span>,
    parentComponent: ComponentInternalInstance | <span class="hljs-literal">null</span>
  </span>) =&gt; {
    <span class="hljs-comment">// parentComponent å°±æ˜¯ keepalive</span>
    <span class="hljs-keyword">if</span> (n1 == <span class="hljs-literal">null</span>) {
      <span class="hljs-keyword">if</span> (n2.<span class="hljs-property">shapeFlag</span> &amp; <span class="hljs-title class_">ShapeFlags</span>.<span class="hljs-property">COMPONENT_KEPT_ALIVE</span>) {
        ;(parentComponent!.<span class="hljs-property">ctx</span> <span class="hljs-keyword">as</span> <span class="hljs-title class_">KeepAliveContext</span>).<span class="hljs-title function_">activate</span>(
          n2,
          container,
          anchor,
          <span class="hljs-keyword">namespace</span>,
          optimized
        )
      } else {
        <span class="hljs-comment">// æ­£å¸¸mount mountComponent</span>
      }
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-comment">// æ­£å¸¸æ›´æ–° updateComponent</span>
    }
  }

  <span class="hljs-keyword">const</span> <span class="hljs-attr">mountComponent</span>: <span class="hljs-title class_">MountComponentFn</span> = <span class="hljs-function">(<span class="hljs-params">initialVNode</span>) =&gt;</span> {
    <span class="hljs-comment">// initialVNode æ˜¯keepaliveçš„vnodeæ—¶ï¼ŒæŠŠå¯¹åº”çš„renderä¼ å…¥è¿›å»ï¼Œè¿™é€»è¾‘å…¶å®ä¸é‡è¦ï¼Œåªæ˜¯ä¸ºäº†å°è£…å¤ç”¨</span>
    <span class="hljs-comment">// inject renderer internals for keepAlive</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-title function_">isKeepAlive</span>(initialVNode)) {
      ;(instance.<span class="hljs-property">ctx</span> <span class="hljs-keyword">as</span> <span class="hljs-title class_">KeepAliveContext</span>).<span class="hljs-property">renderer</span> = internals
    }
  }

  <span class="hljs-keyword">const</span> <span class="hljs-attr">unmount</span>: <span class="hljs-title class_">UnmountFn</span> = <span class="hljs-function">(<span class="hljs-params">vnode, parentComponent</span>) =&gt;</span> {
    <span class="hljs-comment">// parentComponent å°±æ˜¯ keepalive</span>
    <span class="hljs-keyword">const</span> { shapeFlag } = vnode
    <span class="hljs-keyword">if</span> (shapeFlag &amp; <span class="hljs-title class_">ShapeFlags</span>.<span class="hljs-property">COMPONENT_SHOULD_KEEP_ALIVE</span>) {
      ;(parentComponent!.<span class="hljs-property">ctx</span> <span class="hljs-keyword">as</span> <span class="hljs-title class_">KeepAliveContext</span>).<span class="hljs-title function_">deactivate</span>(vnode)
      <span class="hljs-keyword">return</span>
    }
  }
}
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ‰‹æŠŠæ‰‹å°è£…Iframeçˆ¶å­å•å‘åŒå‘é€šè®¯åŠŸèƒ½]]></title>    <link>https://juejin.cn/post/7589466356779597876</link>    <guid>https://juejin.cn/post/7589466356779597876</guid>    <pubDate>2025-12-30T10:01:52.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589466356779597876" data-draft-id="7589462007528407074" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ‰‹æŠŠæ‰‹å°è£…Iframeçˆ¶å­å•å‘åŒå‘é€šè®¯åŠŸèƒ½"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,Vue.js"/> <meta itemprop="datePublished" content="2025-12-30T10:01:52.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="redæ¶¦"/> <meta itemprop="url" content="https://juejin.cn/user/372051848729127"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ‰‹æŠŠæ‰‹å°è£…Iframeçˆ¶å­å•å‘åŒå‘é€šè®¯åŠŸèƒ½
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/372051848729127/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    redæ¶¦
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-30T10:01:52.000Z" title="Tue Dec 30 2025 10:01:52 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">æ‰‹æŠŠæ‰‹å°è£…Iframeçˆ¶å­å•å‘åŒå‘é€šè®¯åŠŸèƒ½</h2>
<h3 data-id="heading-1">å¯¼è¨€</h3>
<blockquote>
<p>æœ€è¿‘åœ¨ç ”ç©¶<strong>å¤šç³»ç»Ÿ</strong>é›†æˆåˆ°ä¸€ä¸ª<strong>ä¸»ç³»ç»Ÿ</strong>ä¸­ï¼Œä¹Ÿå°±æ˜¯æ‰€è°“â€œå¾®å‰ç«¯â€ï¼Œåœ¨ç ”ç©¶äº†ç”¨å¾®å‰ç«¯æ¡†æ¶ <strong>micro-app</strong>å’Œ<strong>qiankun</strong>æ¥æ­å»ºæµ‹è¯•é¡¹ç›®ï¼Œå‘ç°ä¼¼ä¹æœ‰ä¸€ç‚¹éº»çƒ¦ã€‚</p>
<p>å› ä¸ºæˆ‘çš„é¡¹ç›®ä¸éœ€è¦å¤æ‚çš„è·¯ç”±è·³è½¬ï¼Œåªæœ‰ç®€å•çš„æ•°æ®é€šè®¯ï¼Œä¼¼ä¹ç”¨<strong>Iframe</strong>æ›´åŠ ç¬¦åˆæˆ‘å½“å‰çš„ä¸šåŠ¡åœºæ™¯ã€‚</p>
</blockquote>
<h3 data-id="heading-2">ä¸šåŠ¡åœºæ™¯åˆ†æ</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a5305370300f4c6694889c65e831aa8b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgcmVk5ram:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767693712&amp;x-signature=WQCqwP8JuaqfnRHxZvwx4z1bewY%3D" alt="image.png" loading="lazy"/></p>
<blockquote>
<p>å¦‚ä¸Šå›¾ï¼Œæˆ‘å°†ä¸šåŠ¡åœºæ™¯ä½¿ç”¨æœ€å°demoå±•ç¤ºå‡ºæ¥</p>
<p>æˆ‘ä»¬ä½¿ç”¨vue3+hookå°è£…å·¥å…·å‡½æ•°</p>
</blockquote>
<h4 data-id="heading-3">ç›®å‰å®ç°çš„åŠŸèƒ½</h4>
<blockquote>
<p>æˆ‘éœ€è¦çˆ¶å­é¡µé¢èƒ½å¤Ÿ<strong>å•å‘</strong>å’Œ<strong>åŒå‘</strong>çš„äº’ç›¸é€šè®¯</p>
<p>ä¸‹é¢æ˜¯å®ç°çš„ä»£ç ç‰‡æ®µåŠŸèƒ½</p>
</blockquote>
<h5 data-id="heading-4">å•å‘æ•°æ®ä¼ è¾“</h5>
<ol start="0">
<li>
<p>çˆ¶çº§å‘å­çº§ä¸»åŠ¨å‘é€æ•°æ®ï¼Œå­çº§æ¥æ”¶çˆ¶çº§å‘æ¥çš„æ•°æ®ã€‚</p>
<ul>
<li>
<pre><code class="hljs language-php" lang="php">  <span class="hljs-comment">// çˆ¶çº§å‘å­çº§ä¸»åŠ¨å‘é€æ•°æ®</span>
  <span class="hljs-title function_ invoke__">send</span>(<span class="hljs-string">'parent_message'</span>, {
   Â  <span class="hljs-attr">Â action</span>: <span class="hljs-string">'update'</span>,
   Â  <span class="hljs-attr">Â value</span>: <span class="hljs-string">'Hello from parent'</span>
  });
</code></pre>
</li>
<li>
<pre><code class="hljs language-ini" lang="ini">  // å­çº§æ¥æ”¶çˆ¶çº§å‘æ¥çš„æ•°æ®
  on('parent_message', <span class="hljs-attr">data</span> =&gt; {
   Â  Â <span class="hljs-attr">parentData.value</span> = data<span class="hljs-comment">;</span>
   Â  Â console.log('æ”¶åˆ°çˆ¶åº”ç”¨æ¶ˆæ¯', data)<span class="hljs-comment">;</span>
  })<span class="hljs-comment">;</span>
  // æ”¶åˆ°çˆ¶åº”ç”¨æ¶ˆæ¯ {action: 'update', value: 'Hello from parent'}
</code></pre>
</li>
</ul>
</li>
<li>
<p>å­çº§å‘çˆ¶çº§ä¸»é€å‘é€æ•°æ®ï¼Œçˆ¶çº§æ¥æ”¶å­çº§å‘æ¥çš„æ•°æ®ã€‚</p>
<ul>
<li>
<pre><code class="hljs language-php" lang="php">  <span class="hljs-comment">// å­çº§å‘çˆ¶çº§ä¸»é€å‘é€æ•°æ®</span>
  <span class="hljs-title function_ invoke__">send</span>(<span class="hljs-string">'child_message'</span>, {
   Â  <span class="hljs-attr">Â message</span>: <span class="hljs-string">'Hello from child'</span>,
   Â  <span class="hljs-attr">Â time</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>().<span class="hljs-title function_ invoke__">toISOString</span>()
  });
</code></pre>
  
<pre><code class="hljs language-ini" lang="ini">  // çˆ¶çº§æ¥æ”¶å­çº§å‘æ¥çš„æ•°æ®ã€‚
  on('child_message', <span class="hljs-attr">data</span> =&gt; {
   Â <span class="hljs-attr">receivedData.value</span> = data<span class="hljs-comment">;</span>
   Â console.log('æ”¶åˆ°å­åº”ç”¨æ¶ˆæ¯', data)<span class="hljs-comment">;</span>
  })<span class="hljs-comment">;</span>
  // æ”¶åˆ°å­åº”ç”¨æ¶ˆæ¯ {message: 'Hello from child', time: '2025-12-30T08:23:38.850Z'}
</code></pre>
</li>
</ul>
</li>
</ol>
<h5 data-id="heading-5">åŒå‘æ•°æ®ä¼ è¾“</h5>
<ol start="0">
<li>
<p>çˆ¶çº§å‘å­çº§å‘èµ·æ•°æ®è·å–è¯·æ±‚å¹¶ç­‰å¾…ï¼Œå­çº§æ”¶åˆ°è¯·æ±‚å¹¶å“åº”</p>
<ul>
<li>
<pre><code class="hljs language-javascript" lang="javascript">  <span class="hljs-comment">// çˆ¶çº§å‘å­çº§å‘èµ·æ•°æ®è·å–è¯·æ±‚å¹¶ç­‰å¾…</span>
  <span class="hljs-keyword">try</span> {
   Â  Â <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">sendWithResponse</span>(<span class="hljs-string">'get_data'</span>, {
   Â  Â  Â  Â <span class="hljs-attr">query</span>: <span class="hljs-string">'some data'</span><span class="hljs-comment">// å‘ç»™å­çº§çš„æ•°æ®</span>
   Â   });
   Â  Â <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ”¶åˆ°å­çº§å“åº”æ•°æ®'</span>, response);
  } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'è¯·æ±‚å¤±è´¥'</span>, error);
  }
  <span class="hljs-comment">// æ”¶åˆ°å­çº§å“åº”æ•°æ® {result: 'data from child', query: 'some data', _responseType: 'get_data_response_1767082999194'}</span>
</code></pre>
</li>
<li>
<pre><code class="hljs language-kotlin" lang="kotlin">  <span class="hljs-comment">// å­çº§æ”¶åˆ°è¯·æ±‚å¹¶å“åº”</span>
  handleRequest(<span class="hljs-string">'get_data'</span>, async <span class="hljs-keyword">data</span> =&gt; {
   Â  Â <span class="hljs-comment">// å¤„ç†æ•°æ®</span>
   Â  Â <span class="hljs-keyword">return</span> {
   Â  Â  Â  Â result: <span class="hljs-string">'data from child'</span>,
   Â  Â  Â  Â ...<span class="hljs-keyword">data</span>
   Â   };
  });
</code></pre>
</li>
</ul>
</li>
<li>
<p>å­çº§å‘çˆ¶çº§å‘èµ·æ•°æ®è·å–è¯·æ±‚å¹¶ç­‰å¾…ï¼Œçˆ¶çº§æ”¶åˆ°è¯·æ±‚å¹¶å“åº”</p>
<ul>
<li>
<pre><code class="hljs language-javascript" lang="javascript">  <span class="hljs-comment">// å­çº§å‘çˆ¶çº§å‘èµ·æ•°æ®è·å–è¯·æ±‚å¹¶ç­‰å¾…</span>
    <span class="hljs-keyword">try</span> {
   Â   <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">sendWithResponse</span>(<span class="hljs-string">'get_data'</span>, {
   Â  Â   <span class="hljs-attr">query</span>: <span class="hljs-string">'some data'</span>
   Â   });
   Â   <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ”¶åˆ°å“åº”æ•°æ®'</span>, response);
    } <span class="hljs-keyword">catch</span> (error) {
   Â   <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'è¯·æ±‚å¤±è´¥'</span>, error);
    }
    æ”¶åˆ°å“åº”æ•°æ® {<span class="hljs-attr">result</span>: <span class="hljs-string">'data from parent'</span>, <span class="hljs-attr">query</span>: <span class="hljs-string">'some data'</span>, <span class="hljs-attr">_responseType</span>: <span class="hljs-string">'get_data_response_1767083018851'</span>}
</code></pre>
</li>
<li>
<pre><code class="hljs language-kotlin" lang="kotlin">  <span class="hljs-comment">// çˆ¶çº§æ”¶åˆ°è¯·æ±‚å¹¶å“åº”</span>
    handleRequest(<span class="hljs-string">'get_data'</span>, async <span class="hljs-keyword">data</span> =&gt; {
   Â   <span class="hljs-comment">// å¤„ç†æ•°æ®</span>
   Â   <span class="hljs-keyword">return</span> {
   Â  Â   result: <span class="hljs-string">'data from parent'</span>,
   Â  Â   ...<span class="hljs-keyword">data</span>
   Â   };
    });
</code></pre>
</li>
</ul>
</li>
</ol>
<h3 data-id="heading-6">Iframeé€šè®¯åŸç†è§£æ</h3>
<h4 data-id="heading-7">åˆ¤æ–­æ˜¯å¦åœ¨iframeåµŒå¥—ä¸­</h4>
<blockquote>
<p>è¿™æ˜¯æœ€ç®€å•ä¸”å¸¸ç”¨çš„æ–¹æ³•ã€‚</p>
</blockquote>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// window.self è¡¨ç¤ºå½“å‰çª—å£å¯¹è±¡ï¼Œè€Œ window.top è¡¨ç¤ºæœ€é¡¶å±‚çª—å£å¯¹è±¡ã€‚</span>
<span class="hljs-comment">// å¦‚æœä¸¤è€…ä¸ç›¸ç­‰ï¼Œåˆ™è¯´æ˜å½“å‰é¡µé¢è¢«åµŒå¥—åœ¨ iframe ä¸­ã€‚</span>
<span class="hljs-keyword">if</span> (<span class="hljs-variable language_">window</span>.<span class="hljs-property">self</span> !== <span class="hljs-variable language_">window</span>.<span class="hljs-property">top</span>) {
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"å½“å‰é¡µé¢è¢«åµŒå¥—åœ¨ iframe ä¸­"</span>);
} <span class="hljs-keyword">else</span> {
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"å½“å‰é¡µé¢æœªè¢«åµŒå¥—"</span>);
}
</code></pre>
<h4 data-id="heading-8">æ ¸å¿ƒå‘é€æ¶ˆæ¯é€»è¾‘</h4>
<blockquote>
<p>å¸¸ä½¿ç”¨<strong>postMessage</strong>æ¥è¿›è¡Œæ¶ˆæ¯å‘é€</p>
</blockquote>
<pre><code class="hljs language-ini" lang="ini">otherWindow.postMessage(message, targetOrigin, <span class="hljs-section">[transfer]</span>)<span class="hljs-comment">;</span>
</code></pre>
<ul>
<li>
<p>otherWindow</p>
<ul>
<li>å…¶ä»–çª—å£çš„ä¸€ä¸ªå¼•ç”¨ï¼Œæ¯”å¦‚ iframe çš„ contentWindow å±æ€§ã€‚</li>
</ul>
</li>
<li>
<p>message</p>
<ul>
<li>å°†è¦å‘é€åˆ°å…¶ä»– window çš„æ•°æ®ã€‚å¯ä»¥æ˜¯å­—ç¬¦ä¸²æˆ–è€…å¯¹è±¡ç±»å‹ã€‚</li>
</ul>
</li>
<li>
<p>targetOrigin</p>
<ul>
<li>é€šè¿‡çª—å£çš„ origin å±æ€§æ¥æŒ‡å®šå“ªäº›çª—å£èƒ½<strong>æ¥æ”¶åˆ°æ¶ˆæ¯äº‹ä»¶</strong>ï¼Œå…¶å€¼å¯ä»¥æ˜¯å­—ç¬¦ä¸²"*"ï¼ˆè¡¨ç¤ºæ— é™åˆ¶ï¼‰æˆ–è€…ä¸€ä¸ª URIã€‚</li>
</ul>
</li>
<li>
<p>transferï¼ˆä¸€èˆ¬ä¸ä¼ ï¼‰</p>
<ul>
<li>æ˜¯ä¸€ä¸²å’Œ message åŒæ—¶ä¼ é€’çš„ <code>Transferable</code> å¯¹è±¡ã€‚è¿™äº›å¯¹è±¡çš„æ‰€æœ‰æƒå°†è¢«è½¬ç§»ç»™æ¶ˆæ¯çš„æ¥æ”¶æ–¹ï¼Œè€Œå‘é€ä¸€æ–¹å°†ä¸å†ä¿æœ‰æ‰€æœ‰æƒã€‚</li>
</ul>
</li>
</ul>
<h4 data-id="heading-9">æ ¸å¿ƒæ¥æ”¶æ¶ˆæ¯é€»è¾‘</h4>
<blockquote>
<p>çˆ¶å­å…ƒç´ é€šè¿‡ ç›‘å¬ messageäº‹ä»¶æ¥è·å–æ¥æ”¶åˆ°çš„æ•°æ®ã€‚æˆ‘ä»¬å°†æ ¹æ®è¿™ä¸ªå‡½æ•°æ¥å°è£…è‡ªå·±çš„å·¥å…·å‡½æ•°</p>
</blockquote>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'message'</span>, <span class="hljs-function"><span class="hljs-params">e</span> =&gt;</span> {
 Â   <span class="hljs-comment">// é€šè¿‡originå¯¹æ¶ˆæ¯è¿›è¡Œè¿‡æ»¤ï¼Œé¿å…é­åˆ°XSSæ”»å‡»</span>
 Â   <span class="hljs-keyword">if</span> (e.<span class="hljs-property">origin</span> === <span class="hljs-string">'http://xxxx.com'</span>) {
 Â  Â  Â   <span class="hljs-comment">// åˆ¤æ–­æ¥æºæ˜¯å¦å’Œè¦é€šè®¯çš„åœ°å€æ¥æºä¸€è‡´</span>
 Â  Â  Â   <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(e.<span class="hljs-property">data</span>)  <span class="hljs-comment">// å­é¡µé¢å‘é€çš„æ¶ˆæ¯, hello, parent!</span>
 Â   }
}, <span class="hljs-literal">false</span>);
</code></pre>
<h3 data-id="heading-10">é¡¹ç›®æ­å»º</h3>
<pre><code class="hljs language-bash" lang="bash">src/
â”œâ”€â”€ utils/
â”‚ Â  â”œâ”€â”€ iframe-comm.js Â  Â  Â   <span class="hljs-comment"># çˆ¶åº”ç”¨é€šä¿¡ç±»</span>
â”‚ Â  â””â”€â”€ iframe-comm-child.js  <span class="hljs-comment"># å­åº”ç”¨é€šä¿¡ç±»</span>
â”œâ”€â”€ composables/
â”‚ Â  â””â”€â”€ useIframeComm.js Â  Â   <span class="hljs-comment"># Vue3 ç»„åˆå¼å‡½æ•°</span>
â”œâ”€â”€ App.vue Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-comment"># çˆ¶åº”ç”¨ä¸»ç»„ä»¶</span>
â””â”€â”€ main.js
</code></pre>
<h4 data-id="heading-11">ä½¿ç”¨<strong>vite</strong>åˆ›å»ºä¸¤ä¸ª<strong>vue3</strong>é¡¹ç›®</h4>
<pre><code class="hljs language-lua" lang="lua">pnpm <span class="hljs-built_in">create</span> vite
</code></pre>
<blockquote>
<p>é¡¹ç›®ååˆ†åˆ«æ˜¯<strong>Parent</strong>å’Œ<strong>Child</strong>,åˆ†åˆ«ä»£è¡¨çˆ¶çº§åº”ç”¨å’Œå­çº§åº”ç”¨ï¼Œé™¤äº†<strong>App.vue</strong>ä¸ä¸€æ ·å…¶ä»–ä»£ç éƒ½æ˜¯ç›¸åŒçš„</p>
<p><img src="" alt="image-20251230164134789" loading="lazy"/></p>
</blockquote>
<h3 data-id="heading-12">æºç åˆ†æ</h3>
<blockquote>
<p>æ ¸å¿ƒé€»è¾‘åˆ†æ</p>
<p>æˆ‘ä»¬é¦–å…ˆå®ç°ä¸¤ä¸ªå·¥å…·å‡½æ•°ï¼Œ<strong>iframe-comm.js</strong>å’Œ<strong>iframe-comm-child.js</strong>,åˆ†åˆ«ä½œä¸ºçˆ¶çº§å’Œå­çº§çš„å·¥å…·å‡½æ•°ï¼Œä»–ä»¬çš„é€»è¾‘å¤§è‡´ä¸€æ ·ï¼Œæ ¸å¿ƒé€»è¾‘æ˜¯ï¼š</p>
<ul>
<li>
<p>constructor</p>
<ul>
<li>åˆå§‹åŒ–é…ç½®ä¿¡æ¯ï¼ŒåŒ…æ‹¬è¿æ¥ç›®æ ‡åœ°å€ï¼Œæ˜¯çˆ¶çº§è¿˜æ˜¯å­çº§ï¼Œäº‹ä»¶å¯¹è±¡å¤„ç†åˆé›†ç­‰</li>
</ul>
</li>
<li>
<p>initMessageListener</p>
<ul>
<li>åˆå§‹åŒ–messageäº‹ä»¶æ¶ˆæ¯ç›‘å¬</li>
</ul>
</li>
<li>
<p>connect</p>
<ul>
<li>ä¼ å…¥iframeå…ƒç´ ï¼Œä¸ºå…¨å±€å¯¹è±¡è®¾ç½®iframe</li>
</ul>
</li>
<li>
<p>send</p>
<ul>
<li>é€šè¿‡postMessageå‘é€æ¶ˆæ¯</li>
</ul>
</li>
<li>
<p>on</p>
<ul>
<li>ç›‘å¬æ¶ˆæ¯ï¼Œé€šè¿‡new Map(äº‹ä»¶ç±»åˆ«,[äº‹ä»¶å›è°ƒ])ï¼Œå¯ä»¥å®ç°å¯¹å¤šä¸ªä¸åŒäº‹ä»¶ç›‘å¬å¤šä¸ªå›è°ƒå‡½æ•°ï¼Œåç»­ç›‘å¬é¡ºåºè§¦å‘å›è°ƒå‡½æ•°ï¼Œè·å–æ¥æ”¶åˆ°çš„æ¶ˆæ¯ã€‚</li>
</ul>
</li>
<li>
<p>off</p>
<ul>
<li>å–æ¶ˆç›‘å¬æ¶ˆæ¯</li>
</ul>
</li>
<li>
<p>sendWithResponse</p>
<ul>
<li>å‘é€æ¶ˆæ¯å¹¶ç­‰å¾…å“åº”ï¼Œå‘ç”Ÿæ¶ˆæ¯ä¹‹å‰ï¼Œè®¾ç½®ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œå½“æ¶ˆæ¯å‘é€æˆåŠŸåï¼Œå›è°ƒå‡½æ•°ä¼šè¢«è§¦å‘ï¼Œè§¦å‘åå›è°ƒå‡½æ•°æ¸…æ¥šã€‚</li>
</ul>
</li>
<li>
<p>handleRequest</p>
<ul>
<li>é…åˆsendWithResponseä½¿ç”¨ï¼Œä¸»è¦ç›‘å¬sendWithResponseäº‹ä»¶ç±»åˆ«æ‰€å‘æ¥çš„æ•°æ®ï¼Œå¤„ç†å®Œæˆå¹¶è¿”å›ç»“æœæ•°æ®ï¼Œè¿”å›çš„ç»“æœä¼šè§¦å‘sendWithResponseä¸­è®¾ç½®çš„å›è°ƒå‡½æ•°</li>
</ul>
</li>
<li>
<p>destroy</p>
<ul>
<li>é”€æ¯å®ä¾‹</li>
</ul>
</li>
</ul>
<p>ç„¶åæ˜¯hookå‡½æ•°<strong>useIframeComm.js</strong>ï¼Œè¿™ä¸ªå‡½æ•°ä¸»è¦æ˜¯å°è£…äº†ä¸Šé¢ä¸¤ä¸ªå·¥å…·æ–¹æ³•ï¼Œæ–¹ä¾¿vue3é¡¹ç›®é›†æˆä½¿ç”¨</p>
<p>å¦‚æœæ˜¯reactæ¡†æ¶å¯ä»¥è‡ªè¡Œå°è£…hookå‡½æ•°ï¼ŒåŸç”Ÿ<strong>JS</strong>é¡¹ç›®çš„è¯ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ä¸Šé¢çš„å·¥å…·å‡½æ•°</p>
<p>ç„¶åå°±æ˜¯App.vueçš„å®ç°äº†,å¯ä»¥ç›´æ¥å‚ç…§æºç </p>
</blockquote>
<h6 data-id="heading-13">src/utilså·¥å…·å‡½æ•°</h6>
<ul>
<li>
<p>iframe-comm-child.js ä¾›å­çº§ä½¿ç”¨çš„å·¥å…·å‡½æ•°</p>
<ul>
<li>
<pre><code class="hljs language-kotlin" lang="kotlin">  <span class="hljs-comment">// iframe-comm-child.js</span>
  <span class="hljs-keyword">class</span> <span class="hljs-title class_">IframeCommChild</span> {
    <span class="hljs-keyword">constructor</span>(options = {}) {
   Â   <span class="hljs-keyword">this</span>.parentOrigin = options.parentOrigin || window.location.origin;
   Â   <span class="hljs-keyword">this</span>.handlers = new Map();
   Â   <span class="hljs-keyword">this</span>.isParent = <span class="hljs-literal">false</span>;
  â€‹
   Â   <span class="hljs-comment">// åˆå§‹åŒ–æ¶ˆæ¯ç›‘å¬</span>
   Â   <span class="hljs-keyword">this</span>.initMessageListener();
    }
  â€‹
    <span class="hljs-comment">/**
   Â  * å‘çˆ¶åº”ç”¨å‘é€æ¶ˆæ¯
   Â  * <span class="hljs-doctag">@param</span> {string} type - æ¶ˆæ¯ç±»å‹
   Â  * <span class="hljs-doctag">@param</span> {any} data - æ¶ˆæ¯æ•°æ®
   Â  */</span>
    send(type, <span class="hljs-keyword">data</span>) {
   Â   <span class="hljs-keyword">const</span> message = {
   Â  Â   type,
   Â  Â   <span class="hljs-keyword">data</span>,
   Â  Â   source: <span class="hljs-string">'child'</span>,
   Â  Â   timestamp: Date.now()
   Â   };
  â€‹
   Â   <span class="hljs-keyword">try</span> {
   Â  Â   window.parent.postMessage(message, <span class="hljs-keyword">this</span>.parentOrigin);
   Â  Â   <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
   Â   } <span class="hljs-keyword">catch</span> (error) {
   Â  Â   console.error(<span class="hljs-string">'å‘é€æ¶ˆæ¯åˆ°çˆ¶åº”ç”¨å¤±è´¥:'</span>, error);
   Â  Â   <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
   Â   }
    }
  â€‹
    <span class="hljs-comment">/**
   Â  * ç›‘å¬æ¶ˆæ¯
   Â  * <span class="hljs-doctag">@param</span> {string} type - æ¶ˆæ¯ç±»å‹
   Â  * <span class="hljs-doctag">@param</span> {Function} handler - å¤„ç†å‡½æ•°
   Â  */</span>
    on(type, handler) {
   Â   <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.handlers.has(type)) {
   Â  Â   <span class="hljs-keyword">this</span>.handlers.<span class="hljs-keyword">set</span>(type, []);
   Â   }
   Â   <span class="hljs-keyword">this</span>.handlers.<span class="hljs-keyword">get</span>(type).push(handler);
    }
  â€‹
    <span class="hljs-comment">/**
   Â  * å–æ¶ˆç›‘å¬æ¶ˆæ¯
   Â  * <span class="hljs-doctag">@param</span> {string} type - æ¶ˆæ¯ç±»å‹
   Â  * <span class="hljs-doctag">@param</span> {Function} handler - å¤„ç†å‡½æ•°
   Â  */</span>
    off(type, handler) {
   Â   <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.handlers.has(type)) <span class="hljs-keyword">return</span>;
  â€‹
   Â   <span class="hljs-keyword">if</span> (handler) {
   Â  Â   <span class="hljs-keyword">const</span> handlers = <span class="hljs-keyword">this</span>.handlers.<span class="hljs-keyword">get</span>(type);
   Â  Â   <span class="hljs-keyword">const</span> index = handlers.indexOf(handler);
   Â  Â   <span class="hljs-keyword">if</span> (index &gt; -<span class="hljs-number">1</span>) {
   Â  Â  Â   handlers.splice(index, <span class="hljs-number">1</span>);
   Â  Â   }
   Â   } <span class="hljs-keyword">else</span> {
   Â  Â   <span class="hljs-keyword">this</span>.handlers.delete(type);
   Â   }
    }
  â€‹
    <span class="hljs-comment">/**
   Â  * è‡ªåŠ¨å“åº”è¯·æ±‚
   Â  * <span class="hljs-doctag">@param</span> {string} requestType - è¯·æ±‚ç±»å‹
   Â  * <span class="hljs-doctag">@param</span> {Function} handler - å¤„ç†å‡½æ•°ï¼Œè¿”å›å“åº”æ•°æ®
   Â  */</span>
    handleRequest(requestType, handler) {
   Â   <span class="hljs-keyword">this</span>.on(requestType, async (<span class="hljs-keyword">data</span>, event) =&gt; {
   Â  Â   <span class="hljs-keyword">const</span> responseType = <span class="hljs-keyword">data</span>?._responseType;
   Â  Â   <span class="hljs-keyword">if</span> (responseType) {
   Â  Â  Â   <span class="hljs-keyword">try</span> {
   Â  Â  Â  Â   <span class="hljs-keyword">const</span> responseData = await handler(<span class="hljs-keyword">data</span>, event);
   Â  Â  Â  Â   <span class="hljs-keyword">this</span>.send(responseType, {
   Â  Â  Â  Â  Â   success: <span class="hljs-literal">true</span>,
   Â  Â  Â  Â  Â   <span class="hljs-keyword">data</span>: responseData
   Â  Â  Â  Â   });
   Â  Â  Â   } <span class="hljs-keyword">catch</span> (error) {
   Â  Â  Â  Â   <span class="hljs-keyword">this</span>.send(responseType, {
   Â  Â  Â  Â  Â   success: <span class="hljs-literal">false</span>,
   Â  Â  Â  Â  Â   error: error.message
   Â  Â  Â  Â   });
   Â  Â  Â   }
   Â  Â   }
   Â   });
    }
  â€‹
    <span class="hljs-comment">/**
   Â  * å‘é€æ¶ˆæ¯å¹¶ç­‰å¾…å“åº”
   Â  * <span class="hljs-doctag">@param</span> {string} type - æ¶ˆæ¯ç±»å‹
   Â  * <span class="hljs-doctag">@param</span> {any} data - æ¶ˆæ¯æ•°æ®
   Â  * <span class="hljs-doctag">@param</span> {number} timeout - è¶…æ—¶æ—¶é—´(æ¯«ç§’)
   Â  * <span class="hljs-doctag">@returns</span> {Promise}
   Â  */</span>
    sendWithResponse(type, <span class="hljs-keyword">data</span>, timeout = <span class="hljs-number">5000</span>) {
   Â   <span class="hljs-keyword">return</span> new Promise((resolve, reject) =&gt; {
   Â  Â   <span class="hljs-keyword">const</span> responseType = `${type}_response_${Date.now()}`;
   Â  Â   let timeoutId;
  â€‹
   Â  Â   <span class="hljs-keyword">const</span> responseHandler = (response) =&gt; {
   Â  Â  Â   clearTimeout(timeoutId);
   Â  Â  Â   <span class="hljs-keyword">this</span>.off(responseType, responseHandler);
   Â  Â  Â   resolve(response.<span class="hljs-keyword">data</span>);
   Â  Â   };
  â€‹
   Â  Â   <span class="hljs-keyword">this</span>.on(responseType, responseHandler);
  â€‹
   Â  Â   <span class="hljs-comment">// å‘é€è¯·æ±‚</span>
   Â  Â   <span class="hljs-keyword">const</span> success = <span class="hljs-keyword">this</span>.send(type, {
   Â  Â  Â   ...<span class="hljs-keyword">data</span>,
   Â  Â  Â   _responseType: responseType
   Â  Â   });
  â€‹
   Â  Â   <span class="hljs-keyword">if</span> (!success) {
   Â  Â  Â   <span class="hljs-keyword">this</span>.off(responseType, responseHandler);
   Â  Â  Â   reject(new Error(<span class="hljs-string">'å‘é€æ¶ˆæ¯å¤±è´¥'</span>));
   Â  Â  Â   <span class="hljs-keyword">return</span>;
   Â  Â   }
  â€‹
   Â  Â   <span class="hljs-comment">// è®¾ç½®è¶…æ—¶</span>
   Â  Â   timeoutId = setTimeout(() =&gt; {
   Â  Â  Â   <span class="hljs-keyword">this</span>.off(responseType, responseHandler);
   Â  Â  Â   reject(new Error(<span class="hljs-string">'ç­‰å¾…å“åº”è¶…æ—¶'</span>));
   Â  Â   }, timeout);
   Â   });
    }
  â€‹
    <span class="hljs-comment">/**
   Â  * åˆå§‹åŒ–æ¶ˆæ¯ç›‘å¬å™¨
   Â  */</span>
    initMessageListener() {
   Â   window.addEventListener(<span class="hljs-string">'message'</span>, (event) =&gt; {
   Â  Â   <span class="hljs-comment">// å®‰å…¨æ£€æŸ¥</span>
   Â  Â   <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.parentOrigin !== <span class="hljs-string">'*'</span> &amp;&amp; event.origin !== <span class="hljs-keyword">this</span>.parentOrigin) {
   Â  Â  Â   <span class="hljs-keyword">return</span>;
   Â  Â   }
  â€‹
   Â  Â   <span class="hljs-keyword">const</span> { type, <span class="hljs-keyword">data</span>, source } = event.<span class="hljs-keyword">data</span>;
  â€‹
   Â  Â   <span class="hljs-comment">// åªå¤„ç†æ¥è‡ªçˆ¶åº”ç”¨çš„æ¶ˆæ¯</span>
   Â  Â   <span class="hljs-keyword">if</span> (source !== <span class="hljs-string">'parent'</span>) <span class="hljs-keyword">return</span>;
  â€‹
   Â  Â   <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.handlers.has(type)) {
   Â  Â  Â   <span class="hljs-keyword">this</span>.handlers.<span class="hljs-keyword">get</span>(type).forEach(handler =&gt; {
   Â  Â  Â  Â   <span class="hljs-keyword">try</span> {
   Â  Â  Â  Â  Â   handler(<span class="hljs-keyword">data</span>, event);
   Â  Â  Â  Â   } <span class="hljs-keyword">catch</span> (error) {
   Â  Â  Â  Â  Â   console.error(`å¤„ç†æ¶ˆæ¯ ${type} æ—¶å‡ºé”™:`, error);
   Â  Â  Â  Â   }
   Â  Â  Â   });
   Â  Â   }
   Â   });
    }
  â€‹
    <span class="hljs-comment">/**
   Â  * é”€æ¯å®ä¾‹
   Â  */</span>
    destroy() {
   Â   window.removeEventListener(<span class="hljs-string">'message'</span>, <span class="hljs-keyword">this</span>.messageHandler);
   Â   <span class="hljs-keyword">this</span>.handlers.clear();
    }
  }
  â€‹
  export default IframeCommChild;
</code></pre>
</li>
</ul>
</li>
<li>
<p>iframe-comm.js ä¾›çˆ¶çº§ä½¿ç”¨çš„å·¥å…·å‡½æ•°</p>
<ul>
<li>
<pre><code class="hljs language-kotlin" lang="kotlin">  <span class="hljs-comment">// iframe-comm.js</span>
  <span class="hljs-keyword">class</span> <span class="hljs-title class_">IframeComm</span> {
    <span class="hljs-keyword">constructor</span>(options = {}) {
   Â   <span class="hljs-keyword">this</span>.origin = options.origin || <span class="hljs-string">'*'</span>;
   Â   <span class="hljs-keyword">this</span>.targetOrigin = options.targetOrigin || window.location.origin;
   Â   <span class="hljs-keyword">this</span>.handlers = new Map();
   Â   <span class="hljs-keyword">this</span>.iframe = <span class="hljs-literal">null</span>;
   Â   <span class="hljs-keyword">this</span>.isParent = <span class="hljs-literal">true</span>;
  â€‹
   Â   <span class="hljs-comment">// åˆå§‹åŒ–æ¶ˆæ¯ç›‘å¬</span>
   Â   <span class="hljs-keyword">this</span>.initMessageListener();
    }
  â€‹
    <span class="hljs-comment">/**
   Â  * è¿æ¥åˆ°æŒ‡å®šiframe
   Â  * <span class="hljs-doctag">@param</span> {HTMLIFrameElement|string} iframe - iframeå…ƒç´ æˆ–é€‰æ‹©å™¨
   Â  */</span>
    connect(iframe) {
   Â   <span class="hljs-keyword">if</span> (typeof iframe === <span class="hljs-string">'string'</span>) {
   Â  Â   <span class="hljs-keyword">this</span>.iframe = document.querySelector(iframe);
   Â   } <span class="hljs-keyword">else</span> {
   Â  Â   <span class="hljs-keyword">this</span>.iframe = iframe;
   Â   }
  â€‹
   Â   <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.iframe || !<span class="hljs-keyword">this</span>.iframe.contentWindow) {
   Â  Â   console.error(<span class="hljs-string">'æ— æ•ˆçš„iframeå…ƒç´ '</span>);
   Â  Â   <span class="hljs-keyword">return</span>;
   Â   }
  â€‹
   Â   <span class="hljs-keyword">this</span>.isParent = <span class="hljs-literal">true</span>;
   Â   <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
    }
  â€‹
    <span class="hljs-comment">/**
   Â  * å‘å­åº”ç”¨å‘é€æ¶ˆæ¯
   Â  * <span class="hljs-doctag">@param</span> {string} type - æ¶ˆæ¯ç±»å‹
   Â  * <span class="hljs-doctag">@param</span> {any} data - æ¶ˆæ¯æ•°æ®
   Â  * <span class="hljs-doctag">@param</span> {string} targetOrigin - ç›®æ ‡origin
   Â  */</span>
    send(type, <span class="hljs-keyword">data</span>, targetOrigin = <span class="hljs-keyword">this</span>.targetOrigin) {
   Â   <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.iframe?.contentWindow) {
   Â  Â   console.error(<span class="hljs-string">'æœªè¿æ¥åˆ°iframeæˆ–iframeæœªåŠ è½½å®Œæˆ'</span>);
   Â  Â   <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
   Â   }
  â€‹
   Â   <span class="hljs-keyword">const</span> message = {
   Â  Â   type,
   Â  Â   <span class="hljs-keyword">data</span>,
   Â  Â   source: <span class="hljs-string">'parent'</span>,
   Â  Â   timestamp: Date.now()
   Â   };
  â€‹
   Â   <span class="hljs-keyword">try</span> {
   Â  Â   <span class="hljs-keyword">this</span>.iframe.contentWindow.postMessage(message, targetOrigin);
   Â  Â   <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
   Â   } <span class="hljs-keyword">catch</span> (error) {
   Â  Â   console.error(<span class="hljs-string">'å‘é€æ¶ˆæ¯å¤±è´¥:'</span>, error);
   Â  Â   <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
   Â   }
    }
  â€‹
    <span class="hljs-comment">/**
   Â  * ç›‘å¬æ¶ˆæ¯
   Â  * <span class="hljs-doctag">@param</span> {string} type - æ¶ˆæ¯ç±»å‹
   Â  * <span class="hljs-doctag">@param</span> {Function} handler - å¤„ç†å‡½æ•°
   Â  */</span>
    on(type, handler) {
   Â   <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.handlers.has(type)) {
   Â  Â   <span class="hljs-keyword">this</span>.handlers.<span class="hljs-keyword">set</span>(type, []);
   Â   }
   Â   <span class="hljs-keyword">this</span>.handlers.<span class="hljs-keyword">get</span>(type).push(handler);
    }
  â€‹
    <span class="hljs-comment">/**
   Â  * å–æ¶ˆç›‘å¬æ¶ˆæ¯
   Â  * <span class="hljs-doctag">@param</span> {string} type - æ¶ˆæ¯ç±»å‹
   Â  * <span class="hljs-doctag">@param</span> {Function} handler - å¤„ç†å‡½æ•°
   Â  */</span>
    off(type, handler) {
   Â   <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.handlers.has(type)) <span class="hljs-keyword">return</span>;
  â€‹
   Â   <span class="hljs-keyword">if</span> (handler) {
   Â  Â   <span class="hljs-keyword">const</span> handlers = <span class="hljs-keyword">this</span>.handlers.<span class="hljs-keyword">get</span>(type);
   Â  Â   <span class="hljs-keyword">const</span> index = handlers.indexOf(handler);
   Â  Â   <span class="hljs-keyword">if</span> (index &gt; -<span class="hljs-number">1</span>) {
   Â  Â  Â   handlers.splice(index, <span class="hljs-number">1</span>);
   Â  Â   }
   Â   } <span class="hljs-keyword">else</span> {
   Â  Â   <span class="hljs-keyword">this</span>.handlers.delete(type);
   Â   }
    }
  â€‹
    <span class="hljs-comment">/**
   Â  * å‘é€æ¶ˆæ¯å¹¶ç­‰å¾…å“åº”
   Â  * <span class="hljs-doctag">@param</span> {string} type - æ¶ˆæ¯ç±»å‹
   Â  * <span class="hljs-doctag">@param</span> {any} data - æ¶ˆæ¯æ•°æ®
   Â  * <span class="hljs-doctag">@param</span> {number} timeout - è¶…æ—¶æ—¶é—´(æ¯«ç§’)
   Â  * <span class="hljs-doctag">@returns</span> {Promise}
   Â  */</span>
    sendWithResponse(type, <span class="hljs-keyword">data</span>, timeout = <span class="hljs-number">5000</span>) {
   Â   <span class="hljs-keyword">return</span> new Promise((resolve, reject) =&gt; {
   Â  Â   <span class="hljs-keyword">const</span> responseType = `${type}_response_${Date.now()}`;
   Â  Â   let timeoutId;
  â€‹
   Â  Â   <span class="hljs-keyword">const</span> responseHandler = (response) =&gt; {
   Â  Â  Â   clearTimeout(timeoutId);
   Â  Â  Â   <span class="hljs-keyword">this</span>.off(responseType, responseHandler);
   Â  Â  Â   resolve(response.<span class="hljs-keyword">data</span>);
   Â  Â   };
  â€‹
   Â  Â   <span class="hljs-keyword">this</span>.on(responseType, responseHandler);
  â€‹
   Â  Â   <span class="hljs-comment">// å‘é€è¯·æ±‚</span>
   Â  Â   <span class="hljs-keyword">const</span> success = <span class="hljs-keyword">this</span>.send(type, {
   Â  Â  Â   ...<span class="hljs-keyword">data</span>,
   Â  Â  Â   _responseType: responseType
   Â  Â   });
  â€‹
   Â  Â   <span class="hljs-keyword">if</span> (!success) {
   Â  Â  Â   <span class="hljs-keyword">this</span>.off(responseType, responseHandler);
   Â  Â  Â   reject(new Error(<span class="hljs-string">'å‘é€æ¶ˆæ¯å¤±è´¥'</span>));
   Â  Â  Â   <span class="hljs-keyword">return</span>;
   Â  Â   }
  â€‹
   Â  Â   <span class="hljs-comment">// è®¾ç½®è¶…æ—¶</span>
   Â  Â   timeoutId = setTimeout(() =&gt; {
   Â  Â  Â   <span class="hljs-keyword">this</span>.off(responseType, responseHandler);
   Â  Â  Â   reject(new Error(<span class="hljs-string">'ç­‰å¾…å“åº”è¶…æ—¶'</span>));
   Â  Â   }, timeout);
   Â   });
    }
  â€‹
    <span class="hljs-comment">/**
   Â  * åˆå§‹åŒ–æ¶ˆæ¯ç›‘å¬å™¨
   Â  */</span>
    initMessageListener() {
   Â   window.addEventListener(<span class="hljs-string">'message'</span>, (event) =&gt; {
   Â  Â   <span class="hljs-comment">// å®‰å…¨æ£€æŸ¥</span>
   Â  Â   <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.targetOrigin !== <span class="hljs-string">'*'</span> &amp;&amp; event.origin !== <span class="hljs-keyword">this</span>.targetOrigin) {
   Â  Â  Â   <span class="hljs-keyword">return</span>;
   Â  Â   }
  â€‹
   Â  Â   <span class="hljs-keyword">const</span> { type, <span class="hljs-keyword">data</span>, source } = event.<span class="hljs-keyword">data</span>;
  â€‹
   Â  Â   <span class="hljs-comment">// åªå¤„ç†æ¥è‡ªå­åº”ç”¨çš„æ¶ˆæ¯</span>
   Â  Â   <span class="hljs-keyword">if</span> (source !== <span class="hljs-string">'child'</span>) <span class="hljs-keyword">return</span>;
  â€‹
   Â  Â   <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.handlers.has(type)) {
   Â  Â  Â   <span class="hljs-keyword">this</span>.handlers.<span class="hljs-keyword">get</span>(type).forEach(handler =&gt; {
   Â  Â  Â  Â   <span class="hljs-keyword">try</span> {
   Â  Â  Â  Â  Â   handler(<span class="hljs-keyword">data</span>, event);
   Â  Â  Â  Â   } <span class="hljs-keyword">catch</span> (error) {
   Â  Â  Â  Â  Â   console.error(`å¤„ç†æ¶ˆæ¯ ${type} æ—¶å‡ºé”™:`, error);
   Â  Â  Â  Â   }
   Â  Â  Â   });
   Â  Â   }
   Â   });
    }
  â€‹
    <span class="hljs-comment">/**
   Â  * é”€æ¯å®ä¾‹
   Â  */</span>
    destroy() {
   Â   window.removeEventListener(<span class="hljs-string">'message'</span>, <span class="hljs-keyword">this</span>.messageHandler);
   Â   <span class="hljs-keyword">this</span>.handlers.clear();
   Â   <span class="hljs-keyword">this</span>.iframe = <span class="hljs-literal">null</span>;
    }
  }
  â€‹
  export default IframeComm;
</code></pre>
</li>
</ul>
</li>
</ul>
<h6 data-id="heading-14">src/composables é’©å­å‡½æ•°</h6>
<ul>
<li>
<blockquote>
<p>è¿™é‡Œé¢æ˜¯æ ¸å¿ƒhookå‡½æ•°</p>
</blockquote>
</li>
</ul>

<ul>
<li>
<p>useIframeComm.js</p>
<ul>
<li>
<pre><code class="hljs language-ini" lang="ini">  // useIframeComm.js
  import { ref, onUnmounted } from 'vue'<span class="hljs-comment">;</span>
  import IframeComm from '../utils/iframe-comm.js'<span class="hljs-comment">;</span>
  import IframeCommChild from '../utils/iframe-comm-child.js'<span class="hljs-comment">;</span>
  â€‹
  /**
   * Vue3ç»„åˆå¼å‡½æ•° - çˆ¶åº”ç”¨
   */
  export function useIframeComm(<span class="hljs-attr">options</span> = {}) {
    const <span class="hljs-attr">comm</span> = ref(null)<span class="hljs-comment">;</span>
    const <span class="hljs-attr">isConnected</span> = ref(<span class="hljs-literal">false</span>)<span class="hljs-comment">;</span>
    const <span class="hljs-attr">lastMessage</span> = ref(null)<span class="hljs-comment">;</span>
  â€‹
    const <span class="hljs-attr">connect</span> = (iframe) =&gt; {
   Â   if (comm.value) {
   Â  Â   comm.value.destroy()<span class="hljs-comment">;</span>
   Â   }
  â€‹
   Â   <span class="hljs-attr">comm.value</span> = new IframeComm(options)<span class="hljs-comment">;</span>
   Â   comm.value.connect(iframe)<span class="hljs-comment">;</span>
   Â   <span class="hljs-attr">isConnected.value</span> = <span class="hljs-literal">true</span><span class="hljs-comment">;</span>
  â€‹
   Â   // ç›‘å¬æ‰€æœ‰æ¶ˆæ¯
   Â   comm.value.on('*', (data, event) =&gt; {
   Â  Â   <span class="hljs-attr">lastMessage.value</span> = { data, timestamp: Date.now() }<span class="hljs-comment">;</span>
   Â   })<span class="hljs-comment">;</span>
    }<span class="hljs-comment">;</span>
  â€‹
    const <span class="hljs-attr">send</span> = (type, data) =&gt; {
   Â   if (!comm.value) {
   Â  Â   console.error('æœªè¿æ¥åˆ°iframe')<span class="hljs-comment">;</span>
   Â  Â   return false<span class="hljs-comment">;</span>
   Â   }
   Â   return comm.value.send(type, data)<span class="hljs-comment">;</span>
    }<span class="hljs-comment">;</span>
  â€‹
    const <span class="hljs-attr">on</span> = (type, handler) =&gt; {
   Â   if (comm.value) {
   Â  Â   comm.value.on(type, handler)<span class="hljs-comment">;</span>
   Â   }
    }<span class="hljs-comment">;</span>
  â€‹
    const <span class="hljs-attr">off</span> = (type, handler) =&gt; {
   Â   if (comm.value) {
   Â  Â   comm.value.off(type, handler)<span class="hljs-comment">;</span>
   Â   }
    }<span class="hljs-comment">;</span>
  â€‹
    const <span class="hljs-attr">sendWithResponse</span> = async (type, data, timeout) =&gt; {
   Â   try {
   Â  Â   if (!comm.value) {
   Â  Â  Â   throw new Error('æœªè¿æ¥åˆ°iframe')<span class="hljs-comment">;</span>
   Â  Â   }
   Â  Â   return await comm.value.sendWithResponse(type, data, timeout)<span class="hljs-comment">;</span>
   Â   } catch (error) {
   Â  Â   console.error(error)<span class="hljs-comment">;</span>
  â€‹
   Â   }
    }<span class="hljs-comment">;</span>
    const <span class="hljs-attr">handleRequest</span> = (requestType, handler) =&gt; {
   Â   if (comm.value) {
   Â  Â   comm.value.handleRequest(requestType, handler)<span class="hljs-comment">;</span>
   Â   }
    }<span class="hljs-comment">;</span>
  â€‹
    onUnmounted(() =&gt; {
   Â   if (comm.value) {
   Â  Â   comm.value.destroy()<span class="hljs-comment">;</span>
   Â   }
    })<span class="hljs-comment">;</span>
  â€‹
    return {
   Â   comm,
   Â   isConnected,
   Â   lastMessage,
   Â   connect,
   Â   send,
   Â   on,
   Â   off,
   Â   sendWithResponse,
   Â   handleRequest
    }<span class="hljs-comment">;</span>
  }
  â€‹
  /**
   * Vue3ç»„åˆå¼å‡½æ•° - å­åº”ç”¨
   */
  export function useIframeCommChild(<span class="hljs-attr">options</span> = {}) {
    const <span class="hljs-attr">comm</span> = ref(null)<span class="hljs-comment">;</span>
    const <span class="hljs-attr">isReady</span> = ref(<span class="hljs-literal">false</span>)<span class="hljs-comment">;</span>
    const <span class="hljs-attr">lastMessage</span> = ref(null)<span class="hljs-comment">;</span>
  â€‹
    const <span class="hljs-attr">init</span> = () =&gt; {
   Â   if (comm.value) {
   Â  Â   comm.value.destroy()<span class="hljs-comment">;</span>
   Â   }
  â€‹
   Â   <span class="hljs-attr">comm.value</span> = new IframeCommChild(options)<span class="hljs-comment">;</span>
   Â   <span class="hljs-attr">isReady.value</span> = <span class="hljs-literal">true</span><span class="hljs-comment">;</span>
  â€‹
   Â   // ç›‘å¬æ‰€æœ‰æ¶ˆæ¯
   Â   comm.value.on('*', (data, event) =&gt; {
   Â  Â   <span class="hljs-attr">lastMessage.value</span> = { data, timestamp: Date.now() }<span class="hljs-comment">;</span>
   Â   })<span class="hljs-comment">;</span>
    }<span class="hljs-comment">;</span>
  â€‹
    const <span class="hljs-attr">send</span> = (type, data) =&gt; {
   Â   if (!comm.value) {
   Â  Â   console.error('å­åº”ç”¨é€šä¿¡æœªåˆå§‹åŒ–')<span class="hljs-comment">;</span>
   Â  Â   return false<span class="hljs-comment">;</span>
   Â   }
   Â   return comm.value.send(type, data)<span class="hljs-comment">;</span>
    }<span class="hljs-comment">;</span>
  â€‹
    const <span class="hljs-attr">on</span> = (type, handler) =&gt; {
   Â   if (comm.value) {
   Â  Â   comm.value.on(type, handler)<span class="hljs-comment">;</span>
   Â   }
    }<span class="hljs-comment">;</span>
  â€‹
    const <span class="hljs-attr">off</span> = (type, handler) =&gt; {
   Â   if (comm.value) {
   Â  Â   comm.value.off(type, handler)<span class="hljs-comment">;</span>
   Â   }
    }<span class="hljs-comment">;</span>
  â€‹
    const <span class="hljs-attr">sendWithResponse</span> = async (type, data, timeout) =&gt; {
   Â   try {
   Â  Â   if (!comm.value) {
   Â  Â  Â   throw new Error('å­åº”ç”¨é€šä¿¡æœªåˆå§‹åŒ–')<span class="hljs-comment">;</span>
   Â  Â   }
   Â  Â   return await comm.value.sendWithResponse(type, data, timeout)<span class="hljs-comment">;</span>
   Â   } catch (error) {
   Â  Â   console.error(error)<span class="hljs-comment">;</span>
  â€‹
   Â   }
    }<span class="hljs-comment">;</span>
  â€‹
    const <span class="hljs-attr">handleRequest</span> = (requestType, handler) =&gt; {
   Â   if (comm.value) {
   Â  Â   comm.value.handleRequest(requestType, handler)<span class="hljs-comment">;</span>
   Â   }
    }<span class="hljs-comment">;</span>
  â€‹
    onUnmounted(() =&gt; {
   Â   if (comm.value) {
   Â  Â   comm.value.destroy()<span class="hljs-comment">;</span>
   Â   }
    })<span class="hljs-comment">;</span>
  â€‹
    return {
   Â   comm,
   Â   isReady,
   Â   lastMessage,
   Â   init,
   Â   send,
   Â   on,
   Â   off,
   Â   sendWithResponse,
   Â   handleRequest
    }<span class="hljs-comment">;</span>
  }
</code></pre>
</li>
</ul>
</li>
</ul>
<h6 data-id="heading-15">src/App.vue ä¸»ä»£ç </h6>
<ul>
<li>
<p>è¿™æ˜¯çˆ¶çº§çš„App.vue</p>
<ul>
<li>
<blockquote>
<p>çˆ¶çº§çš„ç«¯å£æ˜¯5173ï¼Œæ‰€ä»¥ä»–è¦è¿æ¥åˆ°5174</p>
</blockquote>
</li>
<li>
<pre><code class="hljs language-xml" lang="xml">  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
  <span class="hljs-keyword">import</span> { ref, onMounted } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>;
  <span class="hljs-keyword">import</span> { useIframeComm } <span class="hljs-keyword">from</span> <span class="hljs-string">'./composables/useIframeComm'</span>;
  <span class="hljs-keyword">const</span> iframeRef = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">null</span>);
  <span class="hljs-keyword">const</span> receivedData = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">null</span>);
  <span class="hljs-comment">// åˆå§‹åŒ–é€šè®¯</span>
  <span class="hljs-keyword">const</span> { connect, send, on, sendWithResponse, handleRequest, lastMessage } = <span class="hljs-title function_">useIframeComm</span>({
    <span class="hljs-attr">targetOrigin</span>: <span class="hljs-string">'http://localhost:5174'</span>
  });
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">onIframeLoad</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-title function_">connect</span>(iframeRef.<span class="hljs-property">value</span>);
    <span class="hljs-comment">// ç›‘å¬å­åº”ç”¨</span>
    <span class="hljs-title function_">on</span>(<span class="hljs-string">'child_message'</span>, <span class="hljs-function"><span class="hljs-params">data</span> =&gt;</span> {
   Â   receivedData.<span class="hljs-property">value</span> = data;
   Â   <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ”¶åˆ°å­åº”ç”¨æ¶ˆæ¯'</span>, data);
    });
    <span class="hljs-title function_">on</span>(<span class="hljs-string">'child_response'</span>, <span class="hljs-function"><span class="hljs-params">data</span> =&gt;</span> {
   Â   <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ”¶åˆ°å­åº”ç”¨å“åº”'</span>, data);
    });
    <span class="hljs-comment">// å¤„ç†è¯·æ±‚å¹¶è‡ªè‡ªåŠ¨å“åº”</span>
    <span class="hljs-title function_">handleRequest</span>(<span class="hljs-string">'get_data'</span>, <span class="hljs-keyword">async</span> data =&gt; {
   Â   <span class="hljs-comment">// å¤„ç†æ•°æ®</span>
   Â   <span class="hljs-keyword">return</span> {
   Â  Â   <span class="hljs-attr">result</span>: <span class="hljs-string">'data from parent'</span>,
   Â  Â   ...data
   Â   };
    });
  };
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">sendMessage</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-title function_">send</span>(<span class="hljs-string">'parent_message'</span>, {
   Â   <span class="hljs-attr">action</span>: <span class="hljs-string">'update'</span>,
   Â   <span class="hljs-attr">value</span>: <span class="hljs-string">'Hello from parent'</span>
    });
    <span class="hljs-comment">// å‘é€å¹¶ç­‰å¾…å“åº”</span>
    <span class="hljs-keyword">try</span> {
   Â   <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">sendWithResponse</span>(<span class="hljs-string">'get_data'</span>, {
   Â  Â   <span class="hljs-attr">query</span>: <span class="hljs-string">'some data'</span>
   Â   });
   Â   <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ”¶åˆ°å­çº§å“åº”æ•°æ®'</span>, response);
    } <span class="hljs-keyword">catch</span> (error) {
   Â   <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'è¯·æ±‚å¤±è´¥'</span>, error);
    }
  };
  </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
  â€‹
  <span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"parent"</span>&gt;</span>
   Â   <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>çˆ¶åº”ç”¨<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
   Â   <span class="hljs-tag">&lt;<span class="hljs-name">iframe</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">"iframeRef"</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"http://localhost:5174"</span> @<span class="hljs-attr">load</span>=<span class="hljs-string">"onIframeLoad"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">iframe</span>&gt;</span>
   Â   <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"display: flex; flex-direction: row"</span>&gt;</span>
   Â  Â   <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"flex: 2; border: 1px solid black; height: 100px"</span>&gt;</span>æ¥æ”¶åˆ°çš„å­çº§æ¶ˆæ¯ï¼š{{ receivedData }}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
   Â  Â   <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"flex: 1"</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"sendMessage"</span>&gt;</span>å‘é€æ¶ˆæ¯åˆ°å­åº”ç”¨<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
   Â   <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
  â€‹
  <span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="css">
  <span class="hljs-selector-class">.parent</span> {
    <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;
    <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;
    <span class="hljs-attribute">background-color</span>: white;
    <span class="hljs-attribute">display</span>: flex;
    <span class="hljs-attribute">flex-direction</span>: column;
    <span class="hljs-attribute">justify-content</span>: center;
    <span class="hljs-selector-tag">iframe</span> {
   Â   <span class="hljs-attribute">height</span>: <span class="hljs-number">400px</span>;
    }
    <span class="hljs-selector-tag">h1</span> {
   Â   <span class="hljs-attribute">text-align</span>: center;
    }
  }
  </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
  â€‹
</code></pre>
</li>
</ul>
</li>
<li>
<p>è¿™æ˜¯å­çº§çš„App.vue</p>
<ul>
<li>
<blockquote>
<p>å­çº§çš„ç«¯å£æ˜¯5174ï¼Œæ‰€ä»¥ä»–è¦è¿æ¥åˆ°5173</p>
</blockquote>
</li>
<li>
<pre><code class="hljs language-xml" lang="xml">  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
  <span class="hljs-keyword">import</span> { onMounted, ref } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>;
  <span class="hljs-keyword">import</span> { useIframeCommChild } <span class="hljs-keyword">from</span> <span class="hljs-string">'./composables/useIframeComm'</span>;
  <span class="hljs-keyword">const</span> parentData = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">null</span>);
  <span class="hljs-keyword">const</span> { init, send, on, handleRequest, sendWithResponse } = <span class="hljs-title function_">useIframeCommChild</span>({
    <span class="hljs-attr">parentOrigin</span>: <span class="hljs-string">'http://localhost:5173'</span>
  });
  <span class="hljs-title function_">onMounted</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-title function_">init</span>();
    <span class="hljs-title function_">on</span>(<span class="hljs-string">'parent_message'</span>, <span class="hljs-function"><span class="hljs-params">data</span> =&gt;</span> {
   Â   parentData.<span class="hljs-property">value</span> = data;
   Â   <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ”¶åˆ°çˆ¶åº”ç”¨æ¶ˆæ¯'</span>, data);
    });
    <span class="hljs-comment">// å¤„ç†è¯·æ±‚å¹¶è‡ªè‡ªåŠ¨å“åº”</span>
    <span class="hljs-title function_">handleRequest</span>(<span class="hljs-string">'get_data'</span>, <span class="hljs-keyword">async</span> data =&gt; {
   Â   <span class="hljs-comment">// å¤„ç†æ•°æ®</span>
   Â   <span class="hljs-keyword">return</span> {
   Â  Â   <span class="hljs-attr">result</span>: <span class="hljs-string">'data from child'</span>,
   Â  Â   ...data
   Â   };
    });
  });
  <span class="hljs-comment">// å‘é€æ¶ˆæ¯åˆ°çˆ¶çº§</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">sendToParent</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-title function_">send</span>(<span class="hljs-string">'child_message'</span>, {
   Â   <span class="hljs-attr">message</span>: <span class="hljs-string">'Hello from child'</span>,
   Â   <span class="hljs-attr">time</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>().<span class="hljs-title function_">toISOString</span>()
    });
    <span class="hljs-comment">// // å‘é€å“åº”ä¿¡æ¯</span>
    <span class="hljs-comment">// send('child_response', { status: 'success' });</span>
    <span class="hljs-comment">// å‘é€å¹¶ç­‰å¾…å“åº”</span>
    <span class="hljs-keyword">try</span> {
   Â   <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">sendWithResponse</span>(<span class="hljs-string">'get_data'</span>, {
   Â  Â   <span class="hljs-attr">query</span>: <span class="hljs-string">'some data'</span>
   Â   });
   Â   <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ”¶åˆ°å“åº”æ•°æ®'</span>, response);
    } <span class="hljs-keyword">catch</span> (error) {
   Â   <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'è¯·æ±‚å¤±è´¥'</span>, error);
    }
  };
  </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
  â€‹
  <span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"child"</span>&gt;</span>
   Â   <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>å­åº”ç”¨<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
   Â   <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"display: flex; flex-direction: row"</span>&gt;</span>
   Â  Â   <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"flex: 2; border: 1px solid black; height: 100px"</span>&gt;</span>æ¥æ”¶åˆ°çš„çˆ¶çº§æ¶ˆæ¯ï¼š{{ parentData }}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
   Â  Â   <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"sendToParent"</span>&gt;</span>å‘é€åˆ°çˆ¶åº”ç”¨<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
   Â   <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
   Â   <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
  â€‹
  <span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="css">
  <span class="hljs-selector-class">.child</span> {
    <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;
    <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;
    <span class="hljs-attribute">border</span>: <span class="hljs-number">5px</span> dashed black;
    <span class="hljs-attribute">display</span>: flex;
    <span class="hljs-attribute">flex-direction</span>: column;
    <span class="hljs-attribute">justify-content</span>: center;
    <span class="hljs-selector-tag">h1</span> {
   Â   <span class="hljs-attribute">text-align</span>: center;
    }
  }
  </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
  â€‹
</code></pre>
</li>
</ul>
</li>
</ul>
<h3 data-id="heading-16">ç»“å°¾</h3>
<p>è¿™ä¸ªå°è£…æ–¹æ¡ˆæä¾›äº†ä¸€ä¸ªå®Œæ•´ã€å¯é çš„ Iframe é€šä¿¡è§£å†³æ–¹æ¡ˆï¼Œé€‚ç”¨äºå„ç§å¾®å‰ç«¯é›†æˆåœºæ™¯ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åŒæ­¥çš„ deferï¼Œå¼‚æ­¥çš„é™·é˜±ï¼šSwift å¹¶å‘ä¸­åŠ è½½åŠ¨ç”»å…³ä¸æ‰çš„è°ƒè¯•å®å½•]]></title>    <link>https://juejin.cn/post/7589454621718970418</link>    <guid>https://juejin.cn/post/7589454621718970418</guid>    <pubDate>2025-12-30T08:12:09.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589454621718970418" data-draft-id="7589250237069049866" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åŒæ­¥çš„ deferï¼Œå¼‚æ­¥çš„é™·é˜±ï¼šSwift å¹¶å‘ä¸­åŠ è½½åŠ¨ç”»å…³ä¸æ‰çš„è°ƒè¯•å®å½•"/> <meta itemprop="keywords" content="Swift,æ€§èƒ½ä¼˜åŒ–"/> <meta itemprop="datePublished" content="2025-12-30T08:12:09.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="JQShan"/> <meta itemprop="url" content="https://juejin.cn/user/1636535083759005"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åŒæ­¥çš„ deferï¼Œå¼‚æ­¥çš„é™·é˜±ï¼šSwift å¹¶å‘ä¸­åŠ è½½åŠ¨ç”»å…³ä¸æ‰çš„è°ƒè¯•å®å½•
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1636535083759005/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    JQShan
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-30T08:12:09.000Z" title="Tue Dec 30 2025 08:12:09 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ Swift å¹¶å‘ç¼–ç¨‹ä¸­ï¼Œ<code>defer</code>è¯­å¥ä¸<code>Task</code>çš„ç»„åˆå¸¸å¸¸æš—è—è®¤çŸ¥åå·®ï¼Œå¾ˆå®¹æ˜“å†™å‡º â€œçœ‹ä¼¼åˆç†ã€å®é™…å¤±æ•ˆâ€ çš„ä»£ç ã€‚æœ¬æ–‡å°†é€šè¿‡ä¸€æ¬¡çœŸå®çš„è°ƒè¯•ç»å†ï¼Œæ‹†è§£ â€œä¸ºä»€ä¹ˆ<code>defer</code>ä¸­çš„ä»£ç çœ‹ä¼¼åˆç†å´æ²¡æœ‰æ‰§è¡Œâ€ çš„æ ¸å¿ƒåŸå› ï¼Œå¹¶æ¢³ç†å¯¹åº”çš„æœ€ä½³å®è·µä¸é¿å‘æŒ‡å—ã€‚</p>
<h2 data-id="heading-0">åœºæ™¯é‡ç°ï¼šæŒ¥ä¹‹ä¸å»çš„æ”¯ä»˜åŠ è½½åŠ¨ç”»</h2>
<p>åœ¨æ”¯ä»˜é¡µé¢çš„å¼€å‘ä¸­ï¼Œæˆ‘ä»¬éœ€è¦å®ç°ä¸€ä¸ªåŸºç¡€åŠŸèƒ½ï¼šæ”¯ä»˜æµç¨‹æ‰§è¡Œå®Œæ¯•åï¼Œè‡ªåŠ¨å…³é—­åŠ è½½åŠ¨ç”»ã€‚æœ€åˆçš„ä»£ç å®ç°å¦‚ä¸‹ï¼Œé€»è¾‘çœ‹ä¼¼æ— æ‡ˆå¯å‡»ï¼Œä½†å®é™…è¿è¡Œä¸­ï¼ŒåŠ è½½åŠ¨ç”»å¶å°”ä¼š â€œå¹½çµèˆ¬â€ æ— æ³•å…³é—­ã€‚</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">func</span> <span class="hljs-title function_">processPayment</span>() {
    <span class="hljs-type">Task</span> {
        showLoading <span class="hljs-operator">=</span> <span class="hljs-literal">true</span>
        
        <span class="hljs-keyword">defer</span> {
            <span class="hljs-comment">// ä¸»è§‚é¢„æœŸï¼šæ­¤å¤„ä»£ç ä¼šå¯é æ‰§è¡Œï¼Œå…³é—­åŠ è½½åŠ¨ç”»</span>
            <span class="hljs-type">Task</span> { <span class="hljs-meta">@MainActor</span> <span class="hljs-keyword">in</span>
                showLoading <span class="hljs-operator">=</span> <span class="hljs-literal">false</span>
            }
        }
        
        <span class="hljs-keyword">let</span> result <span class="hljs-operator">=</span> <span class="hljs-keyword">await</span> paymentService.pay()
        handleResult(result)
    }
}
</code></pre>
<h2 data-id="heading-1">æ ¸å¿ƒçŸ¥è¯†ç‚¹æ‹†è§£ï¼šé—®é¢˜çš„æœ¬è´¨</h2>
<h3 data-id="heading-2">çŸ¥è¯†ç‚¹ 1ï¼š<code>defer</code>çš„æ‰§è¡Œè¾¹ç•Œ â€”â€” ä»…ä¿è¯åŒæ­¥ä»£ç å¯é æ‰§è¡Œ</h3>
<p><code>defer</code>è¯­å¥çš„æ ¸å¿ƒç‰¹æ€§æ˜¯<strong>åœ¨å½“å‰ä½œç”¨åŸŸé€€å‡ºæ—¶å¿…ç„¶æ‰§è¡Œ</strong>ï¼Œæ— è®ºä½œç”¨åŸŸæ˜¯æ­£å¸¸è¿”å›ã€æŠ›å‡ºé”™è¯¯è¿˜æ˜¯è¢«å–æ¶ˆã€‚ä½†è¿™ä¸€ â€œå¿…ç„¶æ‰§è¡Œâ€ çš„ä¿è¯ï¼Œä»…é’ˆå¯¹<code>defer</code>å—å†…çš„åŒæ­¥ä»£ç ã€‚</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">func</span> <span class="hljs-title function_">example</span>() {
    <span class="hljs-keyword">defer</span> {
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"1. æˆ‘ä¸€å®šä¼šæ‰§è¡Œï¼ˆåŒæ­¥ä»£ç ï¼‰"</span>)
        
        <span class="hljs-type">Task</span> {
            <span class="hljs-built_in">print</span>(<span class="hljs-string">"2. æˆ‘å¯èƒ½ä¸ä¼šæ‰§è¡Œï¼ˆå¼‚æ­¥ä»»åŠ¡ï¼‰"</span>)
        }
    }
    
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"3. æ­£å¸¸ä¸šåŠ¡ä»£ç "</span>)
}
</code></pre>
<p>ä¸Šè¿°ä»£ç ä¸­ï¼Œ<code>print("1. æˆ‘ä¸€å®šä¼šæ‰§è¡Œ")</code>ä¼šç™¾åˆ†ç™¾è§¦å‘ï¼Œä½†å†…éƒ¨åˆ›å»ºçš„å¼‚æ­¥<code>Task</code>å¯èƒ½è¿˜æœªè¢«ç³»ç»Ÿè°ƒåº¦ï¼Œå½“å‰ä½œç”¨åŸŸå°±å·²å®Œå…¨é”€æ¯ï¼Œå¯¼è‡´å¼‚æ­¥ä»»åŠ¡æ— æ³•æ‰§è¡Œã€‚</p>
<h3 data-id="heading-3">çŸ¥è¯†ç‚¹ 2ï¼šSwiftÂ <code>Task</code>çš„å–æ¶ˆç‰¹æ€§ â€”â€” åä½œå¼è€Œéå¼ºåˆ¶å¼</h3>
<p>Swift çš„<code>Task</code>å–æ¶ˆéµå¾ª â€œåä½œå¼â€ åŸåˆ™ï¼Œè€Œéå¼ºåˆ¶ç»ˆæ­¢ä»»åŠ¡è¿è¡Œã€‚è¿™ä¸€ç‰¹æ€§å†³å®šäº†<code>defer</code>æœ¬èº«çš„æ‰§è¡Œç¨³å®šæ€§ï¼Œä½†æ— æ³•ä¿éšœ<code>defer</code>å†…æ–°åˆ›å»ºå¼‚æ­¥ä»»åŠ¡çš„æ‰§è¡Œã€‚</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-type">Task</span> {
    <span class="hljs-keyword">defer</span> {
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"å³ä½¿ä»»åŠ¡è¢«å–æ¶ˆï¼Œæˆ‘ä¹Ÿä¼šæ‰§è¡Œ"</span>)
    }
    
    <span class="hljs-comment">// æ­¤å¤„ä¼šè‡ªåŠ¨æ£€æŸ¥ä»»åŠ¡å–æ¶ˆçŠ¶æ€</span>
    <span class="hljs-keyword">try</span> <span class="hljs-keyword">await</span> someAsyncWork()
    
    <span class="hljs-comment">// è‹¥ä»»åŠ¡è¢«å–æ¶ˆï¼Œä¸Šé¢çš„awaitä¼šæŠ›å‡ºCancellationError</span>
    <span class="hljs-comment">// ä½†deferå—ä»ä¼šä¸å—å½±å“åœ°æ‰§è¡Œ</span>
}
</code></pre>
<p>å…³é”®ç—›ç‚¹ï¼š<code>defer</code>å—æœ¬èº«ä¼šå¯é æ‰§è¡Œï¼Œä½†å…¶ä¸­æ–°åˆ›å»ºçš„å¼‚æ­¥ä»»åŠ¡ï¼Œå¯èƒ½å› è°ƒåº¦å»¶è¿Ÿã€ä¸Šä¸‹æ–‡é”€æ¯ç­‰é—®é¢˜ï¼Œæ— æ³•æ­£å¸¸æ‰§è¡Œåç»­é€»è¾‘ã€‚</p>
<h3 data-id="heading-4">çŸ¥è¯†ç‚¹ 3ï¼šé¡µé¢é”€æ¯æ—¶çš„ â€œæ—¶é—´å·®â€â€”â€” çŠ¶æ€å¤±æ•ˆçš„éšå½¢æ€æ‰‹</h3>
<p>å½“æ”¯ä»˜æµç¨‹å®Œæˆåæ‰§è¡Œé¡µé¢é”€æ¯æ“ä½œæ—¶ï¼Œæ—¶åºä¸Šçš„é”™ä½ä¼šç›´æ¥å¯¼è‡´åŠ è½½åŠ¨ç”»å…³é—­é€»è¾‘å¤±æ•ˆï¼Œè¿™ä¹Ÿæ˜¯é—®é¢˜å¤ç°çš„æ ¸å¿ƒåœºæ™¯ã€‚</p>
<h4 data-id="heading-5">é—®é¢˜æ—¶åºçº¿</h4>
<ol>
<li><code>await paymentService.pay()</code>æ‰§è¡Œå®Œæˆï¼Œ<code>dismissPage()</code>è¢«è°ƒç”¨ï¼Œé¡µé¢å¼€å§‹é”€æ¯æµç¨‹</li>
<li>SwiftUI æ¡†æ¶å¼€å§‹é”€æ¯å½“å‰ View å®ä¾‹ï¼Œé‡Šæ”¾ç›¸å…³èµ„æº</li>
<li>View ä¸­çš„<code>@State</code>ï¼ˆ<code>showLoading</code>ï¼‰ç­‰çŠ¶æ€å˜é‡è¢«æ¸…ç†å¤±æ•ˆ</li>
<li>å¤–å±‚<code>Task</code>ä½œç”¨åŸŸé€€å‡ºï¼Œ<code>defer</code>å—æ‰§è¡Œï¼Œåˆ›å»ºæ–°çš„å¼‚æ­¥<code>Task</code></li>
<li>æ–°<code>Task</code>å°šæœªè¢«ç³»ç»Ÿè°ƒåº¦ï¼ŒView å·²å®Œå…¨é”€æ¯</li>
<li>å³ä¾¿åç»­æ–°<code>Task</code>è¢«è°ƒåº¦æ‰§è¡Œï¼Œ<code>showLoading = false</code>å¯¹å·²é”€æ¯çš„ View æ— ä»»ä½•æ•ˆæœï¼ŒåŠ¨ç”»æ— æ³•å…³é—­</li>
</ol>
<h2 data-id="heading-6">æ­£ç¡®è§£å†³æ–¹æ¡ˆï¼šæŠ›å¼ƒ â€œåµŒå¥—å¼‚æ­¥â€ï¼Œç›´æ¥ä¸»çº¿ç¨‹åŒæ­¥æ‰§è¡Œ</h2>
<p>è§£å†³è¯¥é—®é¢˜çš„æ ¸å¿ƒæ€è·¯æ˜¯ï¼š<strong>é¿å…åœ¨<code>defer</code>ä¸­åˆ›å»ºæ–°å¼‚æ­¥ä»»åŠ¡ï¼Œç›´æ¥é€šè¿‡<code>await MainActor.run</code>åœ¨ä¸»çº¿ç¨‹åŒæ­¥æ‰§è¡Œ UI æ›´æ–°æ“ä½œ</strong>ï¼Œæ¶ˆé™¤è°ƒåº¦å»¶è¿Ÿä¸ä¸Šä¸‹æ–‡å¤±æ•ˆçš„é£é™©ã€‚</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">func</span> <span class="hljs-title function_">processPayment</span>() {
    <span class="hljs-type">Task</span> {
        <span class="hljs-comment">// ä¸»çº¿ç¨‹å¼€å¯åŠ è½½åŠ¨ç”»</span>
        <span class="hljs-keyword">await</span> <span class="hljs-type">MainActor</span>.run {
            showLoading <span class="hljs-operator">=</span> <span class="hljs-literal">true</span>
        }
        
        <span class="hljs-keyword">let</span> result <span class="hljs-operator">=</span> <span class="hljs-keyword">await</span> paymentService.pay()
        
        <span class="hljs-comment">// âœ… æœ€ä¼˜è§£ï¼šä¸»çº¿ç¨‹åŒæ­¥æ‰§è¡Œï¼Œç¡®ä¿é€»è¾‘å¯é è§¦å‘</span>
        <span class="hljs-keyword">await</span> <span class="hljs-type">MainActor</span>.run {
            showLoading <span class="hljs-operator">=</span> <span class="hljs-literal">false</span>
            handleResult(result)
        }
    }
}
</code></pre>
<h3 data-id="heading-7">è¯¥æ–¹æ¡ˆçš„ä¼˜åŠ¿</h3>
<ol>
<li><code>await MainActor.run</code>ä¼šé˜»å¡å½“å‰<code>Task</code>ï¼Œç­‰å¾…ä¸»çº¿ç¨‹ä¸Šçš„ UI æ“ä½œæ‰§è¡Œå®Œæˆåå†ç»§ç»­ï¼Œæ— è°ƒåº¦å»¶è¿Ÿ</li>
<li>ä¸åˆ›å»ºæ–°çš„å¼‚æ­¥<code>Task</code>ï¼Œç›´æ¥å¤ç”¨å¤–å±‚<code>Task</code>ä¸Šä¸‹æ–‡ï¼Œé¿å…ä¸Šä¸‹æ–‡é”€æ¯å¯¼è‡´çš„é€»è¾‘å¤±æ•ˆ</li>
<li>å³ä½¿å¤–å±‚<code>Task</code>è¢«å–æ¶ˆï¼Œ<code>await</code>ä¹‹å‰çš„ä»£ç å·²æ‰§è¡Œå®Œæ¯•ï¼Œ<code>await</code>å†…çš„é€»è¾‘ä¹Ÿä¼šä¼˜å…ˆå®Œæˆæ ¸å¿ƒæ¸…ç†å·¥ä½œ</li>
</ol>
<h2 data-id="heading-8">å»¶ä¼¸çŸ¥è¯†ç‚¹ï¼šSwift Task ç”Ÿå‘½å‘¨æœŸæ·±åº¦è§£æ</h2>
<h3 data-id="heading-9">1. Task çš„ä¸‰ç§æ ¸å¿ƒåˆ›å»ºæ–¹å¼</h3>

























<table><thead><tr><th>åˆ›å»ºæ–¹å¼</th><th>ç‰¹æ€§</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>ç»“æ„åŒ–å¹¶å‘ï¼ˆæ¨èï¼‰<code>Task { /* ä»£ç  */ }</code></td><td>ç»§æ‰¿å½“å‰ä¸Šä¸‹æ–‡ï¼ˆActorã€ä¼˜å…ˆçº§ã€å–æ¶ˆçŠ¶æ€ç­‰ï¼‰</td><td>å¤§éƒ¨åˆ†ä¸šåŠ¡åœºæ™¯ï¼Œä¾èµ–å½“å‰ä¸Šä¸‹æ–‡çš„å¼‚æ­¥æ“ä½œ</td></tr><tr><td>éç»“æ„åŒ–å¹¶å‘<code>Task.detached { /* ä»£ç  */ }</code></td><td>æ‹¥æœ‰ç‹¬ç«‹æ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œä¸ç»§æ‰¿å½“å‰ç¯å¢ƒ</td><td>æ— éœ€ä¾èµ–å½“å‰ä¸Šä¸‹æ–‡çš„ç‹¬ç«‹å¼‚æ­¥ä»»åŠ¡</td></tr><tr><td>æŒ‡å®š Actor æ‰§è¡Œ<code>Task { @MainActor in /* ä»£ç  */ }</code></td><td>ç»‘å®šæŒ‡å®š Actorï¼ˆå¦‚ä¸»çº¿ç¨‹ï¼‰æ‰§è¡Œï¼Œè‡ªåŠ¨å¤„ç†çº¿ç¨‹åˆ‡æ¢</td><td>ç›´æ¥æ›´æ–° UI æˆ–æ“ä½œ Actor å†…çŠ¶æ€çš„åœºæ™¯</td></tr></tbody></table>
<h3 data-id="heading-10">2. Task çš„å–æ¶ˆæ£€æŸ¥ç‚¹</h3>
<p><code>Task</code>ä»…åœ¨ç‰¹å®šæ—¶æœºè‡ªåŠ¨æ£€æŸ¥å–æ¶ˆçŠ¶æ€ï¼Œéæ£€æŸ¥ç‚¹å†…çš„é•¿æ—¶é—´åŒæ­¥ä»£ç ä¼šæ— è§†å–æ¶ˆæŒ‡ä»¤ï¼Œå¯¼è‡´ä»»åŠ¡ â€œæ— æ³•ç»ˆæ­¢â€ã€‚</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-type">Task</span> {
    <span class="hljs-comment">// âœ… è‡ªåŠ¨æ£€æŸ¥å–æ¶ˆçŠ¶æ€çš„æ—¶æœº</span>
    <span class="hljs-keyword">try</span> <span class="hljs-keyword">await</span> someAsyncOperation() <span class="hljs-comment">// å¼‚æ­¥ç­‰å¾…æ—¶è‡ªåŠ¨æ£€æŸ¥</span>
    <span class="hljs-keyword">try</span> <span class="hljs-type">Task</span>.checkCancellation()   <span class="hljs-comment">// æ‰‹åŠ¨ä¸»åŠ¨æ£€æŸ¥å–æ¶ˆçŠ¶æ€</span>
    <span class="hljs-keyword">await</span> <span class="hljs-type">Task</span>.yield()             <span class="hljs-comment">// è®©å‡ºæ‰§è¡Œæƒæ—¶è‡ªåŠ¨æ£€æŸ¥</span>
    
    <span class="hljs-comment">// âŒ ä¸æ£€æŸ¥å–æ¶ˆçŠ¶æ€çš„åœºæ™¯</span>
    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-number">0</span><span class="hljs-operator">..&lt;</span><span class="hljs-number">1000000</span> {
        <span class="hljs-comment">// é•¿æ—¶é—´åŒæ­¥å¾ªç¯ï¼Œä¸ä¼šå“åº”å–æ¶ˆæŒ‡ä»¤</span>
        heavySyncWork(i)
    }
}
</code></pre>
<h3 data-id="heading-11">3. å¤šä»»åŠ¡ç®¡ç†ï¼šTaskGroup çš„ä½¿ç”¨</h3>
<p>å½“éœ€è¦å¹¶è¡Œæ‰§è¡Œå¤šä¸ªå¼‚æ­¥ä»»åŠ¡å¹¶ç»Ÿä¸€ç®¡ç†æ—¶ï¼Œ<code>TaskGroup</code>æ˜¯æœ€ä¼˜é€‰æ‹©ï¼Œå¯å®ç°æ‰¹é‡ä»»åŠ¡æ·»åŠ ã€ç»“æœæ±‡æ€»ã€æ‰¹é‡å–æ¶ˆç­‰åŠŸèƒ½ã€‚</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">await</span> withTaskGroup(of: <span class="hljs-type">Result</span>.<span class="hljs-keyword">self</span>) { group <span class="hljs-keyword">in</span>
    <span class="hljs-comment">// æ‰¹é‡æ·»åŠ ä»»åŠ¡</span>
    <span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> items {
        group.addTask {
            <span class="hljs-keyword">await</span> processItem(item)
        }
    }
    
    <span class="hljs-comment">// æŒ‰éœ€æ‰¹é‡å–æ¶ˆæ‰€æœ‰ä»»åŠ¡ï¼ˆå¦‚æŸä¸ªä»»åŠ¡å¤±è´¥æ—¶ï¼‰</span>
    <span class="hljs-comment">// group.cancelAll()</span>
    
    <span class="hljs-comment">// éå†è·å–æ‰€æœ‰ä»»åŠ¡ç»“æœ</span>
    <span class="hljs-keyword">for</span> <span class="hljs-keyword">await</span> result <span class="hljs-keyword">in</span> group {
        handleTaskResult(result)
    }
}
</code></pre>
<h2 data-id="heading-12">æœ€ä½³å®è·µæ€»ç»“</h2>
<h3 data-id="heading-13">âœ… æ¨èåšæ³•</h3>
<ol>
<li>UI æ›´æ–°ä¼˜å…ˆä½¿ç”¨<code>await MainActor.run</code>ï¼ŒåŒæ­¥æ‰§è¡Œç¡®ä¿é€»è¾‘å¯é </li>
<li>åšå†³é¿å…åœ¨<code>defer</code>å—ä¸­åˆ›å»ºæ–°çš„å¼‚æ­¥<code>Task</code>ï¼Œè§„é¿è°ƒåº¦ä¸ä¸Šä¸‹æ–‡é£é™©</li>
<li>ä¼˜å…ˆé‡‡ç”¨ç»“æ„åŒ–å¹¶å‘ï¼ˆé»˜è®¤<code>Task</code>ï¼‰ç®¡ç†ä»»åŠ¡ç”Ÿå‘½å‘¨æœŸï¼Œç®€åŒ–ä¸Šä¸‹æ–‡ç»§æ‰¿</li>
<li>åœ¨é•¿æ—¶é—´å¼‚æ­¥æµç¨‹ä¸­ï¼Œä¸»åŠ¨æ·»åŠ å–æ¶ˆæ£€æŸ¥ç‚¹ï¼ˆ<code>try Task.checkCancellation()</code>ï¼‰</li>
<li>å¤šä»»åŠ¡å¹¶è¡Œåœºæ™¯ï¼Œä½¿ç”¨<code>TaskGroup</code>å®ç°ç»Ÿä¸€ç®¡ç†ä¸æ‰¹é‡æ§åˆ¶</li>
</ol>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-comment">// æ ‡å‡†ä¼˜é›…çš„ä»£ç ç¤ºä¾‹</span>
<span class="hljs-type">Task</span> {
    <span class="hljs-comment">// ç¬¬ä¸€æ­¥ï¼šä¸»çº¿ç¨‹æ›´æ–°UIï¼ˆå¼€å¯åŠ è½½/æ›´æ–°çŠ¶æ€ï¼‰</span>
    <span class="hljs-keyword">await</span> <span class="hljs-type">MainActor</span>.run {
        updateUI()
    }
    
    <span class="hljs-comment">// ç¬¬äºŒæ­¥ï¼šæ‰§è¡Œæ ¸å¿ƒå¼‚æ­¥ä¸šåŠ¡é€»è¾‘</span>
    <span class="hljs-keyword">let</span> result <span class="hljs-operator">=</span> <span class="hljs-keyword">await</span> processData()
    
    <span class="hljs-comment">// ç¬¬ä¸‰æ­¥ï¼šä¸»çº¿ç¨‹åŒæ­¥æ›´æ–°ç»“æœ/å…³é—­åŠ è½½</span>
    <span class="hljs-keyword">await</span> <span class="hljs-type">MainActor</span>.run {
        showResult(result)
    }
}
</code></pre>
<h3 data-id="heading-14">âŒ é¿å…åšæ³•</h3>
<ol>
<li>åœ¨<code>defer</code>ä¸­åˆ›å»ºå¼‚æ­¥<code>Task</code>æ‰§è¡Œæ¸…ç†æˆ– UI æ›´æ–°æ“ä½œ</li>
<li>ä¸»è§‚å‡è®¾å¼‚æ­¥ä»»åŠ¡ä¼šè¢« â€œç«‹å³è°ƒåº¦æ‰§è¡Œâ€</li>
<li>å¿½ç•¥<code>Task</code>çš„å–æ¶ˆçŠ¶æ€ï¼Œå¯¼è‡´é•¿æ—¶é—´ä»»åŠ¡æ— æ³•ç»ˆæ­¢</li>
<li>æ»¥ç”¨<code>Task.detached</code>ï¼ˆéç»“æ„åŒ–å¹¶å‘ï¼‰ï¼Œå¢åŠ ä¸Šä¸‹æ–‡ç®¡ç†æˆæœ¬</li>
<li>ç›´æ¥åœ¨éä¸»çº¿ç¨‹<code>Task</code>ä¸­ä¿®æ”¹<code>@State</code>ç­‰ UI ç›¸å…³çŠ¶æ€</li>
</ol>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-comment">// âŒ éœ€åšå†³è§„é¿çš„ä¸è‰¯ä»£ç </span>
<span class="hljs-keyword">defer</span> {
    <span class="hljs-type">Task</span> { <span class="hljs-meta">@MainActor</span> <span class="hljs-keyword">in</span>
        cleanup()  <span class="hljs-comment">// å¯èƒ½å› è°ƒåº¦å»¶è¿Ÿæˆ–ä¸Šä¸‹æ–‡é”€æ¯è€Œæ— æ³•æ‰§è¡Œ</span>
    }
}
</code></pre>
<h2 data-id="heading-15">å®ç”¨è°ƒè¯•æŠ€å·§</h2>
<h3 data-id="heading-16">1. æ—¥å¿—è¿½è¸ªï¼šæ˜ç¡®ä»£ç æ‰§è¡Œæ—¶åº</h3>
<p>é€šè¿‡æ·»åŠ æœ‰åºæ—¥å¿—ï¼Œå¯å¿«é€Ÿå®šä½<code>defer</code>ä¸<code>Task</code>çš„æ‰§è¡Œé¡ºåºï¼Œæ’æŸ¥æ˜¯å¦å­˜åœ¨å¼‚æ­¥ä»»åŠ¡æœªæ‰§è¡Œçš„é—®é¢˜ã€‚</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-type">Task</span> {
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"1. å¤–å±‚Taskå¼€å§‹æ‰§è¡Œ"</span>)
    <span class="hljs-keyword">defer</span> {
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"2. deferå—å¼€å§‹æ‰§è¡Œ"</span>)
    }
    
    <span class="hljs-keyword">await</span> <span class="hljs-type">MainActor</span>.run {
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"3. MainActor.runå†…UIæ“ä½œæ‰§è¡Œ"</span>)
    }
    
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"4. å¤–å±‚Taskå³å°†ç»“æŸ"</span>)
}
</code></pre>
<h3 data-id="heading-17">2. ä¸»åŠ¨æ£€æŸ¥ï¼šç¡®è®¤ Task å–æ¶ˆçŠ¶æ€</h3>
<p>åœ¨å…³é”®ä¸šåŠ¡èŠ‚ç‚¹ä¸»åŠ¨æ£€æŸ¥ä»»åŠ¡å–æ¶ˆçŠ¶æ€ï¼Œå¯æå‰ç»ˆæ­¢æ— æ•ˆé€»è¾‘ï¼Œé¿å…èµ„æºæµªè´¹ã€‚</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-type">Task</span> {
    <span class="hljs-comment">// å…³é”®èŠ‚ç‚¹æ£€æŸ¥å–æ¶ˆçŠ¶æ€</span>
    <span class="hljs-keyword">if</span> <span class="hljs-type">Task</span>.isCancelled {
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"ä»»åŠ¡å·²è¢«å–æ¶ˆï¼Œç»ˆæ­¢åç»­æ“ä½œ"</span>)
        <span class="hljs-keyword">return</span>
    }
    
    <span class="hljs-comment">// ç»§ç»­æ‰§è¡Œæ ¸å¿ƒä¸šåŠ¡é€»è¾‘</span>
    <span class="hljs-keyword">let</span> result <span class="hljs-operator">=</span> <span class="hljs-keyword">await</span> processBusiness()
}
</code></pre>
<h3 data-id="heading-18">3. ä¼˜å…ˆçº§æ§åˆ¶ï¼šç¡®ä¿å…³é”®ä»»åŠ¡ä¼˜å…ˆæ‰§è¡Œ</h3>
<p>é€šè¿‡æŒ‡å®š<code>Task</code>ä¼˜å…ˆçº§ï¼Œå¯è®©æ ¸å¿ƒä¸šåŠ¡ï¼ˆå¦‚æ”¯ä»˜ç»“æœå¤„ç†ã€åŠ è½½åŠ¨ç”»å…³é—­ï¼‰ä¼˜å…ˆè¢«ç³»ç»Ÿè°ƒåº¦ï¼Œå‡å°‘æ‰§è¡Œå»¶è¿Ÿã€‚</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-comment">// é«˜ä¼˜å…ˆçº§ï¼šç”¨æˆ·ä¸»åŠ¨è§¦å‘çš„æ ¸å¿ƒæ“ä½œ</span>
<span class="hljs-type">Task</span>(priority: .userInitiated) {
    <span class="hljs-keyword">await</span> processPayment()
}

<span class="hljs-comment">// ä½ä¼˜å…ˆçº§ï¼šåå°æ— å…³ç´§è¦çš„è¾…åŠ©æ“ä½œ</span>
<span class="hljs-type">Task</span>(priority: .utility) {
    <span class="hljs-keyword">await</span> syncLocalData()
}
</code></pre>
<h2 data-id="heading-19">ç»“è¯­ï¼šè®© Swift å¹¶å‘ä»£ç æ›´å¯é </h2>
<p>Swift å¹¶å‘ç¼–ç¨‹çš„æ ¸å¿ƒéš¾ç‚¹ï¼Œåœ¨äºç†è§£åŒæ­¥æ“ä½œä¸å¼‚æ­¥æ“ä½œçš„æ‰§è¡Œè¾¹ç•Œï¼Œä»¥åŠ<code>Task</code>çš„ç”Ÿå‘½å‘¨æœŸç®¡ç†ã€‚<code>defer</code>è¯­å¥çš„ â€œåŒæ­¥å¯é æ€§â€ ä¸<code>Task</code>çš„ â€œå¼‚æ­¥è°ƒåº¦æ€§â€ å½¢æˆçš„åå·®ï¼Œæ˜¯å¯¼è‡´åŠ è½½åŠ¨ç”»æ— æ³•å…³é—­çš„æ ¹æœ¬åŸå› ã€‚</p>
<p>åœ¨å®é™…å¼€å‘ä¸­ï¼Œåªè¦éµå¾ª â€œé¿å…<code>defer</code>å†…åµŒå¥—å¼‚æ­¥ä»»åŠ¡â€â€œä¼˜å…ˆä½¿ç”¨<code>await MainActor.run</code>æ›´æ–° UIâ€â€œé‡‡ç”¨ç»“æ„åŒ–å¹¶å‘ç®¡ç†ä»»åŠ¡â€ çš„åŸåˆ™ï¼Œå°±èƒ½æœ‰æ•ˆé¿å¼€è¿™ç±»éšå½¢é™·é˜±ï¼Œè®©ä»£ç ä» â€œåº”è¯¥ä¼šå·¥ä½œâ€ å˜æˆ â€œå¿…ç„¶ä¼šå·¥ä½œâ€ï¼Œæ„å»ºæ›´ç¨³å®šã€æ›´å¯é çš„å¹¶å‘é€»è¾‘ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Swift å¤šçº¿ç¨‹é€šå…³æŒ‡å—ï¼šä» GCD å›è°ƒåœ°ç‹±åˆ° Task/Actor èººèµ¢]]></title>    <link>https://juejin.cn/post/7589454621719117874</link>    <guid>https://juejin.cn/post/7589454621719117874</guid>    <pubDate>2025-12-30T08:32:13.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589454621719117874" data-draft-id="7589509638339756058" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Swift å¤šçº¿ç¨‹é€šå…³æŒ‡å—ï¼šä» GCD å›è°ƒåœ°ç‹±åˆ° Task/Actor èººèµ¢"/> <meta itemprop="keywords" content="Swift"/> <meta itemprop="datePublished" content="2025-12-30T08:32:13.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="JQShan"/> <meta itemprop="url" content="https://juejin.cn/user/1636535083759005"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Swift å¤šçº¿ç¨‹é€šå…³æŒ‡å—ï¼šä» GCD å›è°ƒåœ°ç‹±åˆ° Task/Actor èººèµ¢
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1636535083759005/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    JQShan
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-30T08:32:13.000Z" title="Tue Dec 30 2025 08:32:13 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»13åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å„ä½ iOS å¼€å‘è€…å®å­ä»¬ï¼Œè°è¿˜æ²¡è¢«å¤šçº¿ç¨‹æŠ˜ç£¨è¿‡ï¼Ÿæƒ³å½“å¹´ç”¨ GCD çš„æ—¶å€™ï¼Œå›è°ƒåµŒå¥—åƒå¥—å¨ƒï¼Œçº¿ç¨‹å®‰å…¨åƒèµ°é’¢ä¸ï¼ŒæŸ¥ä¸ªæ•°æ®é”™ä¹±çš„ Bug èƒ½ç†¬åˆ°åŠå¤œå‘é™…çº¿åç§»ã€‚ç›´åˆ° Swift 5.5 ç”©å‡ºäº†ã€Œå¹¶å‘æ¡†æ¶ã€è¿™ä¸ªç‹ç‚¸ï¼ŒTask å’Œ Actor é—ªäº®ç™»åœºï¼Œæ‰è®©æˆ‘ä»¬æ‘†è„±äº† â€œå¤šçº¿ç¨‹ PUAâ€ã€‚</p>
<p>ä»Šå¤©è¿™ç¯‡åšå®¢ï¼Œå’±ä»¬å°±ç”¨ â€œå” å—‘å¼â€ é£æ ¼ï¼ŒæŠŠ Taskã€Actor çš„åŸç†ã€ç”¨æ³•ã€æœ€ä½³å®è·µå’Œé¿å‘æŒ‡å—è®²å¾—æ˜æ˜ç™½ç™½ï¼Œä¿è¯ä½ çœ‹å¾—æ‡‚ã€ç”¨å¾—ä¸Šï¼Œè¿˜èƒ½é¡ºä¾¿ç¬‘å‡ºå£°ã€‚</p>
<h2 data-id="heading-0">ä¸€ã€å‰è¨€ï¼šé‚£äº›å¹´æˆ‘ä»¬è¸©è¿‡çš„ GCD å‘</h2>
<p>åœ¨èŠæ–°ä¸œè¥¿ä¹‹å‰ï¼Œå…ˆæ‰å¿ƒå›é¡¾ä¸€ä¸‹ GCD çš„ â€œç½ªè¡Œâ€ï¼š</p>
<ol>
<li><strong>å›è°ƒåœ°ç‹±</strong>ï¼šè¯·æ±‚æ¥å£â†’è§£ææ•°æ®â†’æ›´æ–° UIï¼Œä¸‰å±‚åµŒå¥—ä¸‹å»ï¼Œä»£ç åƒä¿„ç½—æ–¯å¥—å¨ƒï¼ŒåæœŸç»´æŠ¤çœ‹ä¸€çœ¼å°±è„‘å£³ç–¼ï¼›</li>
<li><strong>çº¿ç¨‹å®‰å…¨ç„å­¦</strong>ï¼šå¤šä¸ªçº¿ç¨‹åŒæ—¶ä¿®æ”¹ä¸€ä¸ªå˜é‡ï¼Œæ—¶è€Œæ­£å¸¸æ—¶è€Œå´©æºƒï¼Œæ•°æ®é”™ä¹±çš„ Bug æŸ¥åŠå¤©ï¼Œæœ€åå‘ç°æ˜¯å¿˜äº†åŠ <code>dispatch_barrier</code>ï¼›</li>
<li><strong>ç”Ÿå‘½å‘¨æœŸå¤±æ§</strong>ï¼šæ‰‹åŠ¨åˆ›å»ºçš„é˜Ÿåˆ—å’Œä»»åŠ¡ï¼Œä¸€ä¸å°å¿ƒå°±å¿˜è®°å–æ¶ˆï¼Œå¯¼è‡´å†…å­˜æ³„æ¼æˆ–æ— æ•ˆæ“ä½œï¼›</li>
<li><strong>ä¸»çº¿ç¨‹åˆ¤æ–­éº»çƒ¦</strong>ï¼šæ›´æ–° UI å‰è¿˜è¦å†™<code>if Thread.isMainThread</code>ï¼Œç¨ä¸æ³¨æ„å°±é—ªé€€ã€‚</li>
</ol>
<p>ç›´åˆ° Swift å¹¶å‘æ¡†æ¶ä¸Šçº¿ï¼ŒTaskï¼ˆå¼‚æ­¥ä»»åŠ¡åŒ…å·¥å¤´ï¼‰å’Œ Actorï¼ˆçº¿ç¨‹å®‰å…¨ç®¡ç†å‘˜ï¼‰å¼ºå¼ºè”æ‰‹ï¼Œæ‰è®©å¤šçº¿ç¨‹å¼€å‘ä» â€œæ¸¡åŠ«â€ å˜æˆ â€œèººèµ¢â€ã€‚æ¥ä¸‹æ¥ï¼Œå’±ä»¬é€ä¸ªæ‹†è§£è¿™ä¸¤ä¸ªæ ¸å¿ƒç©å®¶ã€‚</p>
<h2 data-id="heading-1">äºŒã€æ ¸å¿ƒç©å®¶ 1ï¼šTask â€”â€” å¼‚æ­¥ä»»åŠ¡çš„ â€œåŒ…å·¥å¤´â€</h2>
<h3 data-id="heading-2">1. ä»€ä¹ˆæ˜¯ Taskï¼Ÿé€šä¿—ç‚¹è¯´å°±æ˜¯ â€œå¹²æ´»çš„åŒ…å·¥å¤´â€</h3>
<p>ä½ å¯ä»¥æŠŠ Task ç†è§£ä¸ºä¸€ä¸ªåŒ…å·¥å¤´ï¼Œä½ ç»™å®ƒåˆ†é…æ´»ï¼ˆå¼‚æ­¥ä»£ç ï¼‰ï¼Œå®ƒä¼šå¸®ä½ å®‰æ’å·¥äººï¼ˆçº¿ç¨‹ï¼‰å»å¹²ï¼Œè¿˜èƒ½å‘Šè¯‰ä½ å•¥æ—¶å€™å¹²å®Œï¼ˆé€šè¿‡<code>await</code>ç­‰å¾…ç»“æœï¼‰ã€‚</p>
<p>å®ƒçš„æ ¸å¿ƒä½œç”¨æ˜¯<strong>å°è£…å¼‚æ­¥æ“ä½œ</strong>ï¼Œæ‘†è„± GCD çš„é—­åŒ…åµŒå¥—ï¼Œè®©å¼‚æ­¥ä»£ç åƒåŒæ­¥ä»£ç ä¸€æ ·çº¿æ€§ä¹¦å†™ â€”â€” è¿™ä¹Ÿæ˜¯ Swift å¹¶å‘çš„æ ¸å¿ƒä¼˜åŠ¿ï¼š<strong>å¼‚æ­¥ä»£ç åŒæ­¥åŒ–</strong>ã€‚</p>
<h3 data-id="heading-3">2. Task çš„æ ¸å¿ƒåŸç†ï¼šç»“æ„åŒ– vs éç»“æ„åŒ–ï¼ˆå®¶æ—ä¼ä¸š vs é‡ç”Ÿæ”¾å…»ï¼‰</h3>
<p>Task æœ‰ä¸¤ç§æ ¸å¿ƒå½¢æ€ï¼Œè¿™æ˜¯ç†è§£å®ƒçš„å…³é”®ï¼Œå’±ä»¬ç”¨æ¯”å–»è®²æ¸…æ¥šï¼š</p>
<h4 data-id="heading-4">ï¼ˆ1ï¼‰ç»“æ„åŒ–å¹¶å‘ï¼ˆé»˜è®¤ Taskï¼‰ï¼šå®¶æ—ä¼ä¸šï¼Œçˆ¶å­ç»‘å®š</h4>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-comment">// ç»“æ„åŒ–Taskï¼šçˆ¶ä»»åŠ¡ï¼ˆåŒ…å·¥å¤´è€æ¿ï¼‰</span>
<span class="hljs-keyword">func</span> <span class="hljs-title function_">parentTask</span>() <span class="hljs-keyword">async</span> {
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"è€æ¿ï¼šæˆ‘è¦å®‰æ’ä¸ªå°å·¥å¹²æ´»"</span>)
    <span class="hljs-comment">// å­ä»»åŠ¡ï¼ˆå°å·¥ï¼‰ï¼šç»§æ‰¿çˆ¶ä»»åŠ¡çš„ä¸Šä¸‹æ–‡ï¼ˆä¼˜å…ˆçº§ã€å–æ¶ˆçŠ¶æ€ç­‰ï¼‰</span>
    <span class="hljs-keyword">let</span> result <span class="hljs-operator">=</span> <span class="hljs-keyword">await</span> <span class="hljs-type">Task</span> {
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"å°å·¥ï¼šå¼€å§‹å¹²æ´»"</span>)
        <span class="hljs-keyword">await</span> <span class="hljs-type">Task</span>.sleep(<span class="hljs-number">1_000_000_000</span>) <span class="hljs-comment">// å¹²æ´»1ç§’</span>
        <span class="hljs-keyword">return</span> <span class="hljs-string">"æ´»å¹²å®Œäº†"</span>
    }.value
    
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"è€æ¿ï¼šå°å·¥æ±‡æŠ¥ç»“æœï¼š(result)"</span>)
}
</code></pre>
<p><strong>æ ¸å¿ƒç‰¹æ€§ï¼ˆå®¶æ—ä¼ä¸šè§„åˆ™ï¼‰</strong> ï¼š</p>
<ul>
<li>çˆ¶ä»»åŠ¡ä¼šç­‰å­ä»»åŠ¡å¹²å®Œæ‰ç»§ç»­æ‰§è¡Œï¼ˆè€æ¿ç­‰å°å·¥æ±‡æŠ¥ï¼‰ï¼›</li>
<li>å­ä»»åŠ¡ç»§æ‰¿çˆ¶ä»»åŠ¡çš„ â€œå®¶åº•â€ï¼šä¼˜å…ˆçº§ã€Actor ä¸Šä¸‹æ–‡ã€å–æ¶ˆçŠ¶æ€ç­‰ï¼›</li>
<li>çˆ¶ä»»åŠ¡è¢«å–æ¶ˆï¼Œå­ä»»åŠ¡ä¼šè·Ÿç€è¢«å–æ¶ˆï¼ˆè€æ¿è·‘è·¯ï¼Œå°å·¥ä¹Ÿåœå·¥ï¼‰ï¼›</li>
<li>ç¼–è¯‘å™¨ä¼šè‡ªåŠ¨ç®¡ç†ä»»åŠ¡ç”Ÿå‘½å‘¨æœŸï¼Œä¸ç”¨æ‰‹åŠ¨æ“å¿ƒå†…å­˜æ³„æ¼ã€‚</li>
</ul>
<p>è¿™æ˜¯ Swift å®˜æ–¹<strong>å¼ºçƒˆæ¨è</strong>çš„ç”¨æ³•ï¼Œä¹Ÿæ˜¯æœ€å®‰å…¨ã€æœ€çœå¿ƒçš„æ–¹å¼ã€‚</p>
<h4 data-id="heading-5">ï¼ˆ2ï¼‰éç»“æ„åŒ–å¹¶å‘ï¼ˆTask.detachedï¼‰ï¼šé‡ç”Ÿæ”¾å…»ï¼Œè‡ªç”Ÿè‡ªç­</h4>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-comment">// éç»“æ„åŒ–Taskï¼šé‡ç”ŸåŒ…å·¥å¤´ï¼Œå’Œä½ æ²¡å…³ç³»</span>
<span class="hljs-keyword">func</span> <span class="hljs-title function_">wildTask</span>() {
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"æˆ‘ï¼šå®‰æ’ä¸ªé‡ç”ŸåŒ…å·¥å¤´å¹²æ´»"</span>)
    <span class="hljs-keyword">let</span> task <span class="hljs-operator">=</span> <span class="hljs-type">Task</span>.detached {
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"é‡ç”ŸåŒ…å·¥å¤´ï¼šè‡ªå·±å¹²è‡ªå·±çš„"</span>)
        <span class="hljs-keyword">await</span> <span class="hljs-type">Task</span>.sleep(<span class="hljs-number">1_000_000_000</span>)
        <span class="hljs-keyword">return</span> <span class="hljs-string">"é‡ç”Ÿæ´»å¹²å®Œäº†"</span>
    }
    
    <span class="hljs-comment">// æƒ³æ‹¿ç»“æœå¾—ä¸»åŠ¨ç­‰</span>
    <span class="hljs-type">Task</span> {
        <span class="hljs-keyword">let</span> result <span class="hljs-operator">=</span> <span class="hljs-keyword">await</span> task.value
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"æˆ‘ï¼šé‡ç”ŸåŒ…å·¥å¤´æ±‡æŠ¥ç»“æœï¼š(result)"</span>)
    }
}
</code></pre>
<p><strong>æ ¸å¿ƒç‰¹æ€§ï¼ˆé‡ç”Ÿè§„åˆ™ï¼‰</strong> ï¼š</p>
<ul>
<li>ä¸ç»§æ‰¿ä»»ä½•ä¸Šä¸‹æ–‡ï¼ˆä¼˜å…ˆçº§ã€Actor ç­‰éƒ½æ˜¯é»˜è®¤å€¼ï¼‰ï¼›</li>
<li>å’Œåˆ›å»ºå®ƒçš„çº¿ç¨‹ / ä»»åŠ¡ â€œæ–­ç»å…³ç³»â€ï¼Œçˆ¶ä¸ç®¡å­ï¼Œå­ä¸è®¤çˆ¶ï¼›</li>
<li>ç”Ÿå‘½å‘¨æœŸå®Œå…¨ç”±ä½ æ‰‹åŠ¨ç®¡ç†ï¼Œå¿˜è®°å–æ¶ˆå°±å¯èƒ½å¯¼è‡´å†…å­˜æ³„æ¼ï¼›</li>
<li>ä»…é€‚ç”¨äº â€œä¸éœ€è¦ä¾èµ–å½“å‰ä¸Šä¸‹æ–‡ï¼Œå®Œå…¨ç‹¬ç«‹çš„ä»»åŠ¡â€ï¼ˆæ¯”å¦‚åå°åŒæ­¥æ—¥å¿—ï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-6">3. Task çš„ 3 ç§å¸¸ç”¨åˆ›å»ºæ–¹å¼ï¼ˆä»£ç ç¤ºä¾‹ + åœºæ™¯ï¼‰</h3>

























<table><thead><tr><th>åˆ›å»ºæ–¹å¼</th><th>ä»£ç ç¤ºä¾‹</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>ç»“æ„åŒ– Taskï¼ˆé»˜è®¤ï¼‰</td><td><code>Task { await doSomething() }</code></td><td>å¤§éƒ¨åˆ†ä¸šåŠ¡åœºæ™¯ï¼ˆæ¥å£è¯·æ±‚ã€æ•°æ®å¤„ç†ç­‰ï¼‰ï¼Œä¾èµ–å½“å‰ä¸Šä¸‹æ–‡</td></tr><tr><td>éç»“æ„åŒ– Task</td><td><code>Task.detached { await doSomething() }</code></td><td>ç‹¬ç«‹åå°ä»»åŠ¡ï¼ˆæ—¥å¿—åŒæ­¥ã€ç¼“å­˜æ¸…ç†ç­‰ï¼‰ï¼Œä¸ä¾èµ–å½“å‰ä¸Šä¸‹æ–‡</td></tr><tr><td>æŒ‡å®š Actor Task</td><td><code>Task { @MainActor in updateUI() }</code></td><td>ç›´æ¥åˆ‡æ¢åˆ°æŒ‡å®š Actorï¼ˆå¦‚ MainActor æ›´æ–° UIï¼‰</td></tr></tbody></table>
<h3 data-id="heading-7">4. Task çš„å°çŸ¥è¯†ç‚¹ï¼ˆå¿…çŸ¥å¿…ä¼šï¼‰</h3>
<ul>
<li><strong>ä¼˜å…ˆçº§</strong>ï¼šå¯ä»¥ç»™ Task æŒ‡å®šä¼˜å…ˆçº§ï¼Œç³»ç»Ÿä¼šä¼˜å…ˆè°ƒåº¦é«˜ä¼˜å…ˆçº§ä»»åŠ¡ï¼ˆæ¯”å¦‚æ”¯ä»˜ï¼åå°åŒæ­¥ï¼‰ï¼š</li>
</ul>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-comment">// é«˜ä¼˜å…ˆçº§ï¼šç”¨æˆ·ä¸»åŠ¨æ“ä½œ</span>
<span class="hljs-type">Task</span>(priority: .userInitiated) {
    <span class="hljs-keyword">await</span> processPayment()
}
<span class="hljs-comment">// ä½ä¼˜å…ˆçº§ï¼šåå°è¾…åŠ©æ“ä½œ</span>
<span class="hljs-type">Task</span>(priority: .utility) {
    <span class="hljs-keyword">await</span> syncLocalCache()
}
</code></pre>
<ul>
<li><strong>å–æ¶ˆ</strong>ï¼šTask çš„å–æ¶ˆæ˜¯ â€œåä½œå¼â€ çš„ï¼ˆä¸æ˜¯å¼ºåˆ¶æªæ¯™ï¼Œæ˜¯æé†’ä»»åŠ¡è‡ªå·±åœå·¥ï¼‰ï¼š</li>
</ul>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">let</span> task <span class="hljs-operator">=</span> <span class="hljs-type">Task</span> {
    <span class="hljs-comment">// å¹²æ´»å‰å…ˆæ£€æŸ¥æ˜¯å¦è¢«å–æ¶ˆ</span>
    <span class="hljs-keyword">if</span> <span class="hljs-type">Task</span>.isCancelled {
        <span class="hljs-keyword">return</span>
    }
    <span class="hljs-keyword">await</span> doSomething()
    <span class="hljs-comment">// å¹²æ´»ä¸­é€”ä¹Ÿå¯ä»¥æ£€æŸ¥</span>
    <span class="hljs-keyword">try</span> <span class="hljs-type">Task</span>.checkCancellation()
    <span class="hljs-keyword">await</span> doSomethingElse()
}
<span class="hljs-comment">// æ‰‹åŠ¨å–æ¶ˆä»»åŠ¡</span>
task.cancel()
</code></pre>
<ul>
<li><strong>ç­‰å¾…ç»“æœ</strong>ï¼šç”¨<code>await task.value</code>å¯ä»¥è·å– Task çš„æ‰§è¡Œç»“æœï¼Œç»“æ„åŒ– Task ä¹Ÿå¯ä»¥ç›´æ¥å†…è”ç­‰å¾…ã€‚</li>
</ul>
<h2 data-id="heading-8">ä¸‰ã€æ ¸å¿ƒç©å®¶ 2ï¼šActor â€”â€” çº¿ç¨‹å®‰å…¨çš„ â€œå«ç”Ÿé—´ç®¡ç†å‘˜â€</h2>
<h3 data-id="heading-9">1. çº¿ç¨‹å®‰å…¨çš„ç—›ç‚¹ï¼šå¤šä¸ªäººæŠ¢å«ç”Ÿé—´çš„å™©æ¢¦</h3>
<p>å…ˆæƒ³ä¸€ä¸ªåœºæ™¯ï¼šä½ å’ŒåŒäº‹ä»¬å…±ç”¨ä¸€ä¸ªå«ç”Ÿé—´ï¼ˆå…±äº«å˜é‡ï¼‰ï¼Œå¦‚æœæ²¡æœ‰ç®¡ç†å‘˜ï¼Œå¤§å®¶åŒæ—¶æŒ¤è¿›å»ï¼Œåœºé¢ä¼šæåº¦æ··ä¹±ï¼ˆæ•°æ®é”™ä¹±ã€å´©æºƒï¼‰ã€‚</p>
<p>åœ¨å¤šçº¿ç¨‹ä¸­ï¼Œè¿™ä¸ª â€œå«ç”Ÿé—´â€ å°±æ˜¯å…±äº«å˜é‡ï¼ˆæ¯”å¦‚<code>var userList: [User]</code>ï¼‰ï¼Œâ€œæŠ¢å«ç”Ÿé—´â€ å°±æ˜¯å¤šä¸ªçº¿ç¨‹åŒæ—¶è¯»å†™è¿™ä¸ªå˜é‡ï¼Œè¿™ä¹Ÿæ˜¯ GCD ä¸­æœ€å¤´ç–¼çš„é—®é¢˜ã€‚</p>
<h3 data-id="heading-10">2. ä»€ä¹ˆæ˜¯ Actorï¼Ÿé€šä¿—ç‚¹è¯´å°±æ˜¯ â€œå«ç”Ÿé—´ç®¡ç†å‘˜â€</h3>
<p>Actor çš„æ ¸å¿ƒä½œç”¨æ˜¯<strong>ä¿è¯çº¿ç¨‹å®‰å…¨</strong>ï¼Œå®ƒå°±åƒä¸€ä¸ªä¸¥æ ¼çš„å«ç”Ÿé—´ç®¡ç†å‘˜ï¼Œéµå®ˆä¸€ä¸ªé“å¾‹ï¼š<strong>ä¸€æ¬¡åªå…è®¸ä¸€ä¸ªçº¿ç¨‹ï¼ˆäººï¼‰è¿›å…¥ Actor çš„ â€œç§äººç©ºé—´â€ï¼ˆå†…éƒ¨å±æ€§å’Œæ–¹æ³•ï¼‰</strong> ã€‚</p>
<p>è¿™æ ·ä¸€æ¥ï¼Œå°±ä»æ ¹æœ¬ä¸Šæœç»äº† â€œå¤šçº¿ç¨‹åŒæ—¶è¯»å†™å…±äº«å˜é‡â€ çš„é—®é¢˜ï¼Œä¸ç”¨å†æ‰‹åŠ¨åŠ é”ã€åŠ å±éšœï¼Œç¼–è¯‘å™¨ä¼šå¸®ä½ æå®šä¸€åˆ‡ã€‚</p>
<h3 data-id="heading-11">3. Actor çš„æ ¸å¿ƒåŸç†ï¼šéš”ç¦»åŸŸ + æ¶ˆæ¯ä¼ é€’</h3>
<p>Actor çš„åº•å±‚åŸç†å…¶å®å¾ˆç®€å•ï¼Œå°±ä¸¤ä¸ªå…³é”®ç‚¹ï¼Œå’±ä»¬ç”¨å¤§ç™½è¯è§£é‡Šï¼š</p>
<h4 data-id="heading-12">ï¼ˆ1ï¼‰éš”ç¦»åŸŸï¼ˆç§äººç©ºé—´ï¼‰</h4>
<p>æ¯ä¸ª Actor éƒ½æœ‰è‡ªå·±çš„ â€œéš”ç¦»åŸŸâ€ï¼Œç›¸å½“äºå«ç”Ÿé—´çš„å›´å¢™ï¼Œå¤–éƒ¨çº¿ç¨‹æ— æ³•ç›´æ¥è®¿é—® Actor å†…éƒ¨çš„å±æ€§å’Œæ–¹æ³•ï¼Œåªèƒ½é€šè¿‡ç®¡ç†å‘˜ï¼ˆActorï¼‰ä¼ é€’æ¶ˆæ¯ã€‚</p>
<p>æ¯”å¦‚ä½ ä¸èƒ½ç›´æ¥å†™<code>actor.userList = []</code>ï¼Œç¼–è¯‘å™¨ä¼šç›´æ¥æŠ¥é”™ â€”â€” è¿™å°±åƒä½ ä¸èƒ½ç›´æ¥è¸¹å¼€å«ç”Ÿé—´é—¨ï¼Œåªèƒ½è·Ÿç®¡ç†å‘˜è¯´ â€œæˆ‘è¦è¿›å»â€ã€‚</p>
<h4 data-id="heading-13">ï¼ˆ2ï¼‰æ¶ˆæ¯ä¼ é€’ï¼ˆæ’é˜Ÿå«å·ï¼‰</h4>
<p>å¤–éƒ¨çº¿ç¨‹æƒ³è¦æ“ä½œ Actor çš„å†…éƒ¨èµ„æºï¼Œéœ€è¦ç»™ Actor å‘é€ â€œæ¶ˆæ¯â€ï¼ˆè°ƒç”¨ Actor çš„æ–¹æ³•ï¼‰ï¼ŒActor ä¼šæŠŠè¿™äº›æ¶ˆæ¯æ’æˆä¸€ä¸ªé˜Ÿåˆ—ï¼Œç„¶åä¸²è¡Œå¤„ç†ï¼ˆä¸€ä¸ªæ¥ä¸€ä¸ªï¼Œä¸æ’é˜Ÿï¼‰ã€‚</p>
<p>è¿™å°±åƒä½ è·Ÿç®¡ç†å‘˜è¯´ â€œæˆ‘è¦è¿›å»â€ï¼Œç®¡ç†å‘˜ä¼šæŠŠä½ æ’åˆ°é˜Ÿå°¾ï¼Œç­‰å‰é¢çš„äººå‡ºæ¥ï¼Œå†è®©ä½ è¿›å»ï¼Œå®Œç¾ä¿è¯äº†å®‰å…¨ã€‚</p>
<h3 data-id="heading-14">4. Actor çš„ä½¿ç”¨æ–¹æ³•ï¼ˆä»£ç ç¤ºä¾‹ + åœºæ™¯ï¼‰</h3>
<h4 data-id="heading-15">ï¼ˆ1ï¼‰è‡ªå®šä¹‰ Actorï¼šåˆ›å»ºä½ çš„ â€œå«ç”Ÿé—´ç®¡ç†å‘˜â€</h4>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-comment">// å®šä¹‰ä¸€ä¸ªActorï¼šç”¨æˆ·åˆ—è¡¨ç®¡ç†å‘˜</span>
<span class="hljs-keyword">actor</span> <span class="hljs-title class_">UserManager</span> {
    <span class="hljs-comment">// å†…éƒ¨å…±äº«å˜é‡ï¼ˆå«ç”Ÿé—´ï¼‰ï¼šå¤–éƒ¨æ— æ³•ç›´æ¥è®¿é—®</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> userList: [<span class="hljs-type">String</span>] <span class="hljs-operator">=</span> []
    
    <span class="hljs-comment">// æä¾›æ–¹æ³•ï¼ˆå«å·æœåŠ¡ï¼‰ï¼šå¤–éƒ¨å¯ä»¥é€šè¿‡awaitè°ƒç”¨</span>
    <span class="hljs-keyword">func</span> <span class="hljs-title function_">addUser</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">name</span>: <span class="hljs-type">String</span>) {
        <span class="hljs-comment">// è¿™é‡Œçš„ä»£ç ä¸²è¡Œæ‰§è¡Œï¼Œç»å¯¹çº¿ç¨‹å®‰å…¨</span>
        userList.append(name)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"æ·»åŠ ç”¨æˆ·ï¼š(name)ï¼Œå½“å‰åˆ—è¡¨ï¼š(userList)"</span>)
    }
    
    <span class="hljs-keyword">func</span> <span class="hljs-title function_">getUserList</span>() -&gt; [<span class="hljs-type">String</span>] {
        <span class="hljs-keyword">return</span> userList
    }
}

<span class="hljs-comment">// ä½¿ç”¨Actor</span>
<span class="hljs-keyword">func</span> <span class="hljs-title function_">useUserManager</span>() <span class="hljs-keyword">async</span> {
    <span class="hljs-comment">// åˆ›å»ºActorå®ä¾‹</span>
    <span class="hljs-keyword">let</span> manager <span class="hljs-operator">=</span> <span class="hljs-type">UserManager</span>()
    
    <span class="hljs-comment">// è°ƒç”¨Actoræ–¹æ³•ï¼šå¿…é¡»åŠ awaitï¼ˆç­‰ç®¡ç†å‘˜å«å·ï¼‰</span>
    <span class="hljs-keyword">await</span> manager.addUser(<span class="hljs-string">"å¼ ä¸‰"</span>)
    <span class="hljs-keyword">await</span> manager.addUser(<span class="hljs-string">"æå››"</span>)
    
    <span class="hljs-comment">// è·å–ç”¨æˆ·åˆ—è¡¨</span>
    <span class="hljs-keyword">let</span> list <span class="hljs-operator">=</span> <span class="hljs-keyword">await</span> manager.getUserList()
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"æœ€ç»ˆç”¨æˆ·åˆ—è¡¨ï¼š(list)"</span>)
}
</code></pre>
<p><strong>å…³é”®æ³¨æ„ç‚¹</strong>ï¼šè°ƒç”¨ Actor çš„ä»»ä½•æ–¹æ³•éƒ½å¿…é¡»åŠ <code>await</code>ï¼Œå› ä¸º Actor å¤„ç†æ¶ˆæ¯éœ€è¦æ—¶é—´ï¼Œè¿™æ˜¯ä¸€ä¸ªå¼‚æ­¥æ“ä½œã€‚</p>
<h4 data-id="heading-16">ï¼ˆ2ï¼‰MainActorï¼šä¸“å±ä¸»çº¿ç¨‹çš„ â€œUI ç®¡ç†å‘˜â€</h4>
<p>é™¤äº†è‡ªå®šä¹‰ Actorï¼ŒSwift è¿˜æä¾›äº†ä¸€ä¸ªç‰¹æ®Šçš„ Actorâ€”â€”<code>MainActor</code>ï¼Œå®ƒä¸“é—¨ç»‘å®šä¸»çº¿ç¨‹ï¼Œæ˜¯æ›´æ–° UI çš„ â€œä¸“å±é€šé“â€ã€‚</p>
<p>æˆ‘ä»¬çŸ¥é“ï¼ŒUI æ“ä½œå¿…é¡»åœ¨ä¸»çº¿ç¨‹æ‰§è¡Œï¼Œä»¥å‰ç”¨ GCD è¦å†™<code>dispatch_async(dispatch_get_main_queue())</code>ï¼Œç°åœ¨ç”¨<code>MainActor</code>æ›´ç®€å•ï¼š</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-comment">// æ–¹å¼1ï¼šä¿®é¥°å‡½æ•°ï¼Œæ•´ä¸ªå‡½æ•°åœ¨ä¸»çº¿ç¨‹æ‰§è¡Œ</span>
<span class="hljs-meta">@MainActor</span>
<span class="hljs-keyword">func</span> <span class="hljs-title function_">updateUserName</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">name</span>: <span class="hljs-type">String</span>) {
    <span class="hljs-comment">// è¿™é‡Œçš„ä»£ç ä¸€å®šåœ¨ä¸»çº¿ç¨‹æ‰§è¡Œï¼Œæ”¾å¿ƒæ›´æ–°UI</span>
    <span class="hljs-keyword">self</span>.userNameLabel.text <span class="hljs-operator">=</span> name
}

<span class="hljs-comment">// æ–¹å¼2ï¼šä¿®é¥°å±æ€§ï¼Œå±æ€§çš„è¯»å†™éƒ½åœ¨ä¸»çº¿ç¨‹</span>
<span class="hljs-meta">@MainActor</span> <span class="hljs-keyword">var</span> userAvatar: <span class="hljs-type">UIImage</span>?

<span class="hljs-comment">// æ–¹å¼3ï¼šåœ¨Taskä¸­æŒ‡å®šMainActor</span>
<span class="hljs-type">Task</span> { <span class="hljs-meta">@MainActor</span> <span class="hljs-keyword">in</span>
    <span class="hljs-keyword">self</span>.userNameLabel.text <span class="hljs-operator">=</span> <span class="hljs-string">"å¼ ä¸‰"</span>
}

<span class="hljs-comment">// æ–¹å¼4ï¼šawait MainActor.run å±€éƒ¨åˆ‡æ¢ä¸»çº¿ç¨‹</span>
<span class="hljs-type">Task</span> {
    <span class="hljs-comment">// åå°æ‰§è¡Œè€—æ—¶æ“ä½œ</span>
    <span class="hljs-keyword">let</span> user <span class="hljs-operator">=</span> <span class="hljs-keyword">await</span> fetchUser()
    <span class="hljs-comment">// åˆ‡æ¢åˆ°ä¸»çº¿ç¨‹æ›´æ–°UI</span>
    <span class="hljs-keyword">await</span> <span class="hljs-type">MainActor</span>.run {
        <span class="hljs-keyword">self</span>.userNameLabel.text <span class="hljs-operator">=</span> user.name
    }
}
</code></pre>
<p><strong>MainActor æ˜¯ UI æ›´æ–°çš„é¦–é€‰</strong>ï¼Œä¸ç”¨å†æ‰‹åŠ¨åˆ¤æ–­ä¸»çº¿ç¨‹ï¼Œç¼–è¯‘å™¨ä¼šå¸®ä½ ä¿è¯ UI æ“ä½œåœ¨ä¸»çº¿ç¨‹æ‰§è¡Œï¼Œæœç»é—ªé€€ã€‚</p>
<h3 data-id="heading-17">5. Actor çš„å°çŸ¥è¯†ç‚¹ï¼ˆå¿…çŸ¥å¿…ä¼šï¼‰</h3>
<ul>
<li><strong>Actor é‡å…¥</strong>ï¼šActor å…è®¸ â€œåµŒå¥—è°ƒç”¨â€ï¼Œæ¯”å¦‚ Actor çš„æ–¹æ³• A è°ƒç”¨äº†æ–¹æ³• Bï¼Œè¿™æ˜¯å…è®¸çš„ï¼Œä¸”ä»ç„¶ä¸²è¡Œæ‰§è¡Œï¼›</li>
<li><strong>Actor é—´é€šä¿¡</strong>ï¼šå¤šä¸ª Actor ä¹‹é—´è°ƒç”¨æ–¹æ³•ï¼ŒåŒæ ·éœ€è¦åŠ <code>await</code>ï¼Œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨å¤„ç†æ¶ˆæ¯ä¼ é€’ï¼›</li>
<li><strong>ä¸å¯å˜å±æ€§</strong>ï¼šActor çš„ä¸å¯å˜å±æ€§ï¼ˆ<code>let</code>ï¼‰å¯ä»¥ç›´æ¥è®¿é—®ï¼ˆä¸ç”¨<code>await</code>ï¼‰ï¼Œå› ä¸ºä¸å¯å˜å±æ€§ä¸ä¼šæœ‰çº¿ç¨‹å®‰å…¨é—®é¢˜ã€‚</li>
</ul>
<h2 data-id="heading-18">å››ã€é»„é‡‘æ­æ¡£ï¼šTask + Actor å®æˆ˜æ¼”ç»ƒ</h2>
<p>å…‰è¯´ä¸ç»ƒå‡æŠŠå¼ï¼Œå’±ä»¬ç»“åˆå®é™…ä¸šåŠ¡åœºæ™¯ï¼Œçœ‹çœ‹ Task å’Œ Actor æ€ä¹ˆé…åˆä½¿ç”¨ï¼š</p>
<h3 data-id="heading-19">åœºæ™¯ï¼šæ¥å£è¯·æ±‚ + æ•°æ®è§£æ + UI æ›´æ–°ï¼ˆçº¿ç¨‹å®‰å…¨ç‰ˆï¼‰</h3>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-comment">// 1. å®šä¹‰æ•°æ®å­˜å‚¨Actorï¼ˆä¿è¯çº¿ç¨‹å®‰å…¨ï¼‰</span>
<span class="hljs-keyword">actor</span> <span class="hljs-title class_">DataStore</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> userData: <span class="hljs-type">UserModel</span>?
    
    <span class="hljs-keyword">func</span> <span class="hljs-title function_">saveUser</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">user</span>: <span class="hljs-type">UserModel</span>) {
        userData <span class="hljs-operator">=</span> user
    }
    
    <span class="hljs-keyword">func</span> <span class="hljs-title function_">getUser</span>() -&gt; <span class="hljs-type">UserModel</span>? {
        <span class="hljs-keyword">return</span> userData
    }
}

<span class="hljs-comment">// 2. æ¥å£è¯·æ±‚å‡½æ•°ï¼ˆåå°æ‰§è¡Œï¼‰</span>
<span class="hljs-keyword">func</span> <span class="hljs-title function_">fetchUserFromAPI</span>() <span class="hljs-keyword">async</span> <span class="hljs-keyword">throws</span> -&gt; <span class="hljs-type">UserModel</span> {
    <span class="hljs-comment">// æ¨¡æ‹Ÿæ¥å£è¯·æ±‚ï¼ˆåå°çº¿ç¨‹ï¼‰</span>
    <span class="hljs-keyword">await</span> <span class="hljs-type">Task</span>.sleep(<span class="hljs-number">1_000_000_000</span>)
    <span class="hljs-keyword">return</span> <span class="hljs-type">UserModel</span>(name: <span class="hljs-string">"æå››"</span>, age: <span class="hljs-number">25</span>)
}

<span class="hljs-comment">// 3. æ ¸å¿ƒä¸šåŠ¡é€»è¾‘ï¼ˆTask + Actor + MainActorï¼‰</span>
<span class="hljs-keyword">func</span> <span class="hljs-title function_">loadUserData</span>() {
    <span class="hljs-comment">// ç»“æ„åŒ–Taskï¼šç®¡ç†å¼‚æ­¥æµç¨‹</span>
    <span class="hljs-type">Task</span> {
        <span class="hljs-keyword">do</span> {
            <span class="hljs-comment">// æ­¥éª¤1ï¼šä¸»çº¿ç¨‹æ˜¾ç¤ºåŠ è½½åŠ¨ç”»</span>
            <span class="hljs-keyword">await</span> <span class="hljs-type">MainActor</span>.run {
                <span class="hljs-keyword">self</span>.loadingView.isHidden <span class="hljs-operator">=</span> <span class="hljs-literal">false</span>
            }
            
            <span class="hljs-comment">// æ­¥éª¤2ï¼šåå°è¯·æ±‚æ¥å£ï¼ˆéä¸»çº¿ç¨‹ï¼Œä¸å¡é¡¿UIï¼‰</span>
            <span class="hljs-keyword">let</span> user <span class="hljs-operator">=</span> <span class="hljs-keyword">try</span> <span class="hljs-keyword">await</span> fetchUserFromAPI()
            
            <span class="hljs-comment">// æ­¥éª¤3ï¼šçº¿ç¨‹å®‰å…¨å­˜å‚¨æ•°æ®</span>
            <span class="hljs-keyword">let</span> dataStore <span class="hljs-operator">=</span> <span class="hljs-type">DataStore</span>()
            <span class="hljs-keyword">await</span> dataStore.saveUser(user)
            
            <span class="hljs-comment">// æ­¥éª¤4ï¼šä¸»çº¿ç¨‹æ›´æ–°UI + éšè—åŠ è½½åŠ¨ç”»</span>
            <span class="hljs-keyword">await</span> <span class="hljs-type">MainActor</span>.run {
                <span class="hljs-keyword">self</span>.userNameLabel.text <span class="hljs-operator">=</span> user.name
                <span class="hljs-keyword">self</span>.ageLabel.text <span class="hljs-operator">=</span> <span class="hljs-string">"(user.age)"</span>
                <span class="hljs-keyword">self</span>.loadingView.isHidden <span class="hljs-operator">=</span> <span class="hljs-literal">true</span>
            }
            
        } <span class="hljs-keyword">catch</span> {
            <span class="hljs-comment">// å¼‚å¸¸å¤„ç†ï¼šä¸»çº¿ç¨‹éšè—åŠ è½½åŠ¨ç”» + æç¤ºé”™è¯¯</span>
            <span class="hljs-keyword">await</span> <span class="hljs-type">MainActor</span>.run {
                <span class="hljs-keyword">self</span>.loadingView.isHidden <span class="hljs-operator">=</span> <span class="hljs-literal">true</span>
                <span class="hljs-keyword">self</span>.toastLabel.text <span class="hljs-operator">=</span> <span class="hljs-string">"è¯·æ±‚å¤±è´¥ï¼š(error.localizedDescription)"</span>
            }
        }
    }
}
</code></pre>
<p>è¿™ä¸ªç¤ºä¾‹å®Œç¾ç»“åˆäº† Taskï¼ˆå¼‚æ­¥æµç¨‹ç®¡ç†ï¼‰ã€Actorï¼ˆæ•°æ®å­˜å‚¨çº¿ç¨‹å®‰å…¨ï¼‰ã€MainActorï¼ˆUI æ›´æ–°ï¼‰ï¼Œæ²¡æœ‰å›è°ƒåµŒå¥—ï¼Œçº¿ç¨‹å®‰å…¨æœ‰ä¿éšœï¼ŒUI ä¸å¡é¡¿ï¼Œè¿™å°±æ˜¯ Swift å¹¶å‘çš„æ­£ç¡®æ‰“å¼€æ–¹å¼ï¼</p>
<h2 data-id="heading-20">äº”ã€æœ€ä½³å®è·µï¼šå°‘è¸©å‘ï¼Œå¤šæ‘¸é±¼</h2>
<p>æŒæ¡äº†åŸç†å’Œç”¨æ³•ï¼Œæ¥ä¸‹æ¥çš„æœ€ä½³å®è·µèƒ½è®©ä½ åœ¨å®é™…å¼€å‘ä¸­äº‹åŠåŠŸå€ï¼Œå°‘èµ°å¼¯è·¯ï¼š</p>
<h3 data-id="heading-21">1. ä¼˜å…ˆä½¿ç”¨ç»“æ„åŒ– Taskï¼Œæ‹’ç»æ”¾å…»å¼ Task.detached</h3>
<p>ç»“æ„åŒ– Task çš„ç”Ÿå‘½å‘¨æœŸç”±ç¼–è¯‘å™¨ç®¡ç†ï¼Œå®‰å…¨çœå¿ƒï¼Œ90% çš„åœºæ™¯éƒ½ç”¨å®ƒã€‚åªæœ‰åœ¨éœ€è¦å®Œå…¨ç‹¬ç«‹çš„åå°ä»»åŠ¡ï¼ˆå¦‚æ—¥å¿—åŒæ­¥ï¼‰æ—¶ï¼Œæ‰è€ƒè™‘ Task.detachedï¼Œä¸”ä¸€å®šè¦æ‰‹åŠ¨ç®¡ç†å–æ¶ˆã€‚</p>
<h3 data-id="heading-22">2. UI æ›´æ–°è®¤å‡† MainActorï¼Œåˆ«åœ¨åå°çæŠ˜è…¾</h3>
<p>æ— è®ºç”¨<code>@MainActor</code>ä¿®é¥°å‡½æ•°ã€è¿˜æ˜¯<code>await MainActor.run</code>ï¼Œéƒ½è¦ä¿è¯ UI æ“ä½œåœ¨ä¸»çº¿ç¨‹æ‰§è¡Œï¼Œè¿™æ˜¯æœç» UI é—ªé€€å’Œå¡é¡¿çš„å…³é”®ã€‚</p>
<h3 data-id="heading-23">3. Actor é‡Œåªæ”¾çº¿ç¨‹ä¸å®‰å…¨çš„çŠ¶æ€ï¼Œåˆ«å•¥éƒ½å¾€é‡Œå¡</h3>
<p>Actor çš„æ–¹æ³•æ˜¯ä¸²è¡Œæ‰§è¡Œçš„ï¼Œå¦‚æœæŠŠéå…±äº«çš„ã€ä¸éœ€è¦çº¿ç¨‹å®‰å…¨çš„é€»è¾‘ä¹Ÿæ”¾è¿› Actorï¼Œä¼šé™ä½æ‰§è¡Œæ•ˆç‡ã€‚Actor åªè´Ÿè´£ç®¡ç† â€œå…±äº«å¯å˜çŠ¶æ€â€ï¼ˆå¦‚ç”¨æˆ·åˆ—è¡¨ã€ç¼“å­˜æ•°æ®ï¼‰ã€‚</p>
<h3 data-id="heading-24">4. ç”¨ TaskGroup ç®¡ç†å¤šä»»åŠ¡ï¼Œæ‰¹é‡æ§åˆ¶æ›´çœå¿ƒ</h3>
<p>å¦‚æœéœ€è¦å¹¶è¡Œæ‰§è¡Œå¤šä¸ªä»»åŠ¡ï¼ˆå¦‚æ‰¹é‡è¯·æ±‚æ¥å£ï¼‰ï¼Œç”¨<code>TaskGroup</code>æ¯”æ‰‹åŠ¨åˆ›å»ºå¤šä¸ª Task æ›´æ–¹ä¾¿ï¼Œæ”¯æŒæ‰¹é‡æ·»åŠ ã€æ‰¹é‡å–æ¶ˆã€æ‰¹é‡è·å–ç»“æœï¼š</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">await</span> withTaskGroup(of: <span class="hljs-type">UserModel</span>.<span class="hljs-keyword">self</span>) { group <span class="hljs-keyword">in</span>
    <span class="hljs-comment">// æ‰¹é‡æ·»åŠ ä»»åŠ¡</span>
    <span class="hljs-keyword">for</span> userId <span class="hljs-keyword">in</span> [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>] {
        group.addTask {
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> fetchUserById(userId)
        }
    }
    
    <span class="hljs-comment">// æ‰¹é‡è·å–ç»“æœ</span>
    <span class="hljs-keyword">for</span> <span class="hljs-keyword">await</span> user <span class="hljs-keyword">in</span> group {
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"è·å–åˆ°ç”¨æˆ·ï¼š(user.name)"</span>)
    }
}
</code></pre>
<h3 data-id="heading-25">5. defer é‡Œåˆ«ä¹±åˆ› Taskï¼Œå°å¿ƒ â€œå¹½çµä»»åŠ¡â€</h3>
<p>è¿™æ˜¯å’±ä»¬ä¹‹å‰è¸©è¿‡çš„å‘ï¼š<code>defer</code>å—é‡Œåˆ›å»ºçš„å¼‚æ­¥ Taskï¼Œå¯èƒ½å› ä¸ºä¸Šä¸‹æ–‡é”€æ¯è€Œæ— æ³•æ‰§è¡Œï¼ˆæ¯”å¦‚é¡µé¢å…³é—­åï¼ŒTask è¿˜æ²¡è¢«è°ƒåº¦ï¼‰ï¼Œå¯¼è‡´åŠ è½½åŠ¨ç”»å…³ä¸æ‰ã€èµ„æºæ¸…ç†ä¸å½»åº•ã€‚</p>
<h3 data-id="heading-26">6. å…³é”®èŠ‚ç‚¹æ£€æŸ¥ Task å–æ¶ˆçŠ¶æ€ï¼Œé¿å…æ— æ•ˆæ“ä½œ</h3>
<p>å¦‚æœç”¨æˆ·ä¸­é€”é€€å‡ºé¡µé¢ï¼Œå¯¹åº”çš„ Task åº”è¯¥è¢«å–æ¶ˆï¼Œåœ¨è€—æ—¶æ“ä½œå‰åæ£€æŸ¥<code>Task.isCancelled</code>æˆ–<code>try Task.checkCancellation()</code>ï¼Œå¯ä»¥åŠæ—¶ç»ˆæ­¢æ— æ•ˆæ“ä½œï¼ŒèŠ‚çœèµ„æºã€‚</p>
<h2 data-id="heading-27">å…­ã€é¿å‘æŒ‡å—ï¼šé‚£äº›è®©ä½ å¤´ç§ƒçš„å‘</h2>
<p>å³ä½¿æŒæ¡äº†æœ€ä½³å®è·µï¼Œä¹Ÿéš¾å…è¸©å‘ï¼Œè¿™äº›å‘ä½ ä¸€å®šè¦è­¦æƒ•ï¼š</p>
<h3 data-id="heading-28">1. å‘ 1ï¼šActor é‡å…¥ â€”â€” çœ‹ä¼¼ä¸²è¡Œï¼Œå®åˆ™å¯èƒ½åµŒå¥—æ‰§è¡Œ</h3>
<p>Actor å…è®¸æ–¹æ³•åµŒå¥—è°ƒç”¨ï¼Œæ¯”å¦‚ï¼š</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">actor</span> <span class="hljs-title class_">MyActor</span> {
    <span class="hljs-keyword">func</span> <span class="hljs-title function_">methodA</span>() <span class="hljs-keyword">async</span> {
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"Aå¼€å§‹"</span>)
        <span class="hljs-keyword">await</span> methodB()
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"Aç»“æŸ"</span>)
    }
    
    <span class="hljs-keyword">func</span> <span class="hljs-title function_">methodB</span>() <span class="hljs-keyword">async</span> {
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"Bæ‰§è¡Œ"</span>)
    }
}
</code></pre>
<p>è°ƒç”¨<code>await myActor.methodA()</code>æ—¶ï¼Œä¼šè¾“å‡º â€œA å¼€å§‹â†’B æ‰§è¡Œâ†’A ç»“æŸâ€ï¼Œè¿™æ˜¯æ­£å¸¸çš„ï¼Œä¸”ä»ç„¶çº¿ç¨‹å®‰å…¨ï¼Œä¸ç”¨è¿‡åº¦æ‹…å¿ƒã€‚</p>
<h3 data-id="heading-29">2. å‘ 2ï¼šTask å–æ¶ˆæ˜¯ â€œåä½œå¼â€ï¼Œä¸æ˜¯ â€œå¼ºåˆ¶æªæ¯™â€</h3>
<p>Task ä¸ä¼šè¢«å¼ºåˆ¶ç»ˆæ­¢ï¼Œåªæœ‰åœ¨ â€œå–æ¶ˆæ£€æŸ¥ç‚¹â€ æ‰ä¼šå“åº”å–æ¶ˆï¼š</p>
<ul>
<li>âœ… å–æ¶ˆæ£€æŸ¥ç‚¹ï¼š<code>await</code>å¼‚æ­¥æ“ä½œã€<code>try Task.checkCancellation()</code>ã€<code>await Task.yield()</code></li>
<li>âŒ éæ£€æŸ¥ç‚¹ï¼šé•¿æ—¶é—´åŒæ­¥å¾ªç¯ï¼ˆå¦‚<code>for i in 0..&lt;1000000</code>ï¼‰ï¼Œä¸ä¼šå“åº”å–æ¶ˆ</li>
</ul>
<p>å¦‚æœæœ‰é•¿æ—¶é—´åŒæ­¥ä»£ç ï¼Œè¦æ‰‹åŠ¨æ’å…¥å–æ¶ˆæ£€æŸ¥ï¼š</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-type">Task</span> {
    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-number">0</span><span class="hljs-operator">..&lt;</span><span class="hljs-number">1000000</span> {
        <span class="hljs-comment">// æ‰‹åŠ¨æ£€æŸ¥å–æ¶ˆçŠ¶æ€</span>
        <span class="hljs-keyword">if</span> <span class="hljs-type">Task</span>.isCancelled {
            <span class="hljs-keyword">return</span>
        }
        heavySyncWork(i)
    }
}
</code></pre>
<h3 data-id="heading-30">3. å‘ 3ï¼šåœ¨ MainActor å‡½æ•°é‡Œæ‰§è¡Œè€—æ—¶æ“ä½œï¼Œå¯¼è‡´ UI å¡é¡¿</h3>
<p><code>@MainActor</code>ä¿®é¥°çš„å‡½æ•°ä¼šåœ¨ä¸»çº¿ç¨‹æ‰§è¡Œï¼Œå¦‚æœåœ¨é‡Œé¢æ‰§è¡Œè€—æ—¶æ“ä½œï¼ˆå¦‚å¤§æ•°æ®è§£æã€å¤æ‚åŠ å¯†ï¼‰ï¼Œä¼šé˜»å¡ä¸»çº¿ç¨‹ï¼Œå¯¼è‡´ UI å¡é¡¿ï¼š</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-comment">// âŒ é”™è¯¯åšæ³•ï¼šä¸»çº¿ç¨‹æ‰§è¡Œè€—æ—¶è§£æ</span>
<span class="hljs-meta">@MainActor</span>
<span class="hljs-keyword">func</span> <span class="hljs-title function_">parseLargeData</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">data</span>: <span class="hljs-type">Data</span>) {
    <span class="hljs-keyword">let</span> model <span class="hljs-operator">=</span> <span class="hljs-keyword">try!</span> <span class="hljs-type">JSONDecoder</span>().decode(<span class="hljs-type">LargeModel</span>.<span class="hljs-keyword">self</span>, from: data)
    <span class="hljs-keyword">self</span>.model <span class="hljs-operator">=</span> model
}

<span class="hljs-comment">// âœ… æ­£ç¡®åšæ³•ï¼šåå°è§£æï¼Œä¸»çº¿ç¨‹æ›´æ–°UI</span>
<span class="hljs-keyword">func</span> <span class="hljs-title function_">loadLargeData</span>() {
    <span class="hljs-type">Task</span> {
        <span class="hljs-comment">// åå°è§£æ</span>
        <span class="hljs-keyword">let</span> model <span class="hljs-operator">=</span> <span class="hljs-keyword">await</span> <span class="hljs-type">Task</span>.detached {
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">try!</span> <span class="hljs-type">JSONDecoder</span>().decode(<span class="hljs-type">LargeModel</span>.<span class="hljs-keyword">self</span>, from: data)
        }.value
        
        <span class="hljs-comment">// ä¸»çº¿ç¨‹æ›´æ–°UI</span>
        <span class="hljs-keyword">await</span> <span class="hljs-type">MainActor</span>.run {
            <span class="hljs-keyword">self</span>.model <span class="hljs-operator">=</span> model
        }
    }
}
</code></pre>
<h3 data-id="heading-31">4. å‘ 4ï¼šç›´æ¥è®¿é—® Actor çš„å±æ€§ï¼Œç¼–è¯‘å™¨ä¼šæŠ¥é”™</h3>
<p>Actor çš„å±æ€§æ˜¯éš”ç¦»çš„ï¼Œå¤–éƒ¨æ— æ³•ç›´æ¥è®¿é—®ï¼Œå¿…é¡»é€šè¿‡æ–¹æ³•è·å–ï¼š</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-comment">// âŒ é”™è¯¯åšæ³•ï¼šç›´æ¥è®¿é—®Actorå±æ€§</span>
<span class="hljs-keyword">let</span> manager <span class="hljs-operator">=</span> <span class="hljs-type">UserManager</span>()
<span class="hljs-built_in">print</span>(manager.userList) <span class="hljs-comment">// ç¼–è¯‘å™¨æŠ¥é”™</span>

<span class="hljs-comment">// âœ… æ­£ç¡®åšæ³•ï¼šé€šè¿‡Actoræ–¹æ³•è·å–</span>
<span class="hljs-keyword">let</span> list <span class="hljs-operator">=</span> <span class="hljs-keyword">await</span> manager.getUserList()
<span class="hljs-built_in">print</span>(list)
</code></pre>
<h3 data-id="heading-32">5. å‘ 5ï¼šéç»“æ„åŒ– Task å¿˜è®°å–æ¶ˆï¼Œå¯¼è‡´å†…å­˜æ³„æ¼</h3>
<p>Task.detached åˆ›å»ºçš„ä»»åŠ¡å¦‚æœæŒæœ‰äº†<code>self</code>ï¼Œä¸”å¿˜è®°å–æ¶ˆï¼Œä¼šå¯¼è‡´<code>self</code>æ— æ³•é‡Šæ”¾ï¼Œå†…å­˜æ³„æ¼ï¼š</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-comment">// âŒ é”™è¯¯åšæ³•ï¼šå¿˜è®°å–æ¶ˆTask</span>
<span class="hljs-keyword">func</span> <span class="hljs-title function_">badTask</span>() {
    <span class="hljs-type">Task</span>.detached { [<span class="hljs-keyword">weak</span> <span class="hljs-keyword">self</span>] <span class="hljs-keyword">in</span>
        <span class="hljs-keyword">guard</span> <span class="hljs-keyword">let</span> <span class="hljs-keyword">self</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">self</span> <span class="hljs-keyword">else</span> { <span class="hljs-keyword">return</span> }
        <span class="hljs-keyword">while</span> <span class="hljs-literal">true</span> {
            <span class="hljs-keyword">await</span> <span class="hljs-keyword">self</span>.syncLog()
            <span class="hljs-keyword">await</span> <span class="hljs-type">Task</span>.sleep(<span class="hljs-number">10_000_000_000</span>)
        }
    }
}

<span class="hljs-comment">// âœ… æ­£ç¡®åšæ³•ï¼šæ‰‹åŠ¨æŒæœ‰Taskï¼Œåœ¨åˆé€‚æ—¶æœºå–æ¶ˆ</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">MyVC</span>: <span class="hljs-title class_">UIViewController</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> syncTask: <span class="hljs-type">Task</span>&lt;<span class="hljs-type">Void</span>, <span class="hljs-type">Never</span>&gt;?
    
    <span class="hljs-keyword">override</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">viewDidLoad</span>() {
        <span class="hljs-keyword">super</span>.viewDidLoad()
        syncTask <span class="hljs-operator">=</span> <span class="hljs-type">Task</span>.detached { [<span class="hljs-keyword">weak</span> <span class="hljs-keyword">self</span>] <span class="hljs-keyword">in</span>
            <span class="hljs-keyword">guard</span> <span class="hljs-keyword">let</span> <span class="hljs-keyword">self</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">self</span> <span class="hljs-keyword">else</span> { <span class="hljs-keyword">return</span> }
            <span class="hljs-keyword">while</span> <span class="hljs-operator">!</span><span class="hljs-type">Task</span>.isCancelled {
                <span class="hljs-keyword">await</span> <span class="hljs-keyword">self</span>.syncLog()
                <span class="hljs-keyword">await</span> <span class="hljs-type">Task</span>.sleep(<span class="hljs-number">10_000_000_000</span>)
            }
        }
    }
    
    <span class="hljs-keyword">override</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">viewWillDisappear</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">animated</span>: <span class="hljs-type">Bool</span>) {
        <span class="hljs-keyword">super</span>.viewWillDisappear(animated)
        <span class="hljs-comment">// é¡µé¢æ¶ˆå¤±æ—¶å–æ¶ˆä»»åŠ¡</span>
        syncTask<span class="hljs-operator">?</span>.cancel()
    }
}
</code></pre>
<h2 data-id="heading-33">ä¸ƒã€æ€»ç»“ï¼šSwift å¤šçº¿ç¨‹çš„æ­£ç¡®æ‰“å¼€æ–¹å¼</h2>
<ol>
<li><strong>å‘Šåˆ« GCD å›è°ƒåœ°ç‹±</strong>ï¼šç”¨ Task æŠŠå¼‚æ­¥ä»£ç å†™æˆåŒæ­¥é£æ ¼ï¼Œçº¿æ€§ä¹¦å†™ï¼Œæ˜“è¯»æ˜“ç»´æŠ¤ï¼›</li>
<li><strong>å‘Šåˆ«çº¿ç¨‹å®‰å…¨ç„å­¦</strong>ï¼šç”¨ Actorï¼ˆå°¤å…¶æ˜¯ MainActorï¼‰ä¿è¯çº¿ç¨‹å®‰å…¨ï¼Œä¸ç”¨æ‰‹åŠ¨åŠ é”ï¼›</li>
<li><strong>ä¼˜å…ˆç»“æ„åŒ–å¹¶å‘</strong>ï¼š90% çš„åœºæ™¯ç”¨é»˜è®¤ Taskï¼Œå°‘ç”¨ Task.detachedï¼Œé¿å…ç”Ÿå‘½å‘¨æœŸå¤±æ§ï¼›</li>
<li><strong>UI æ›´æ–°è®¤å‡† MainActor</strong>ï¼šæ— è®ºæ˜¯<code>@MainActor</code>è¿˜æ˜¯<code>await MainActor.run</code>ï¼Œä¿è¯ UI åœ¨ä¸»çº¿ç¨‹æ‰§è¡Œï¼›</li>
<li><strong>å…³é”®èŠ‚ç‚¹æ£€æŸ¥å–æ¶ˆ</strong>ï¼šåœ¨è€—æ—¶æ“ä½œå‰åæ£€æŸ¥ Task å–æ¶ˆçŠ¶æ€ï¼Œé¿å…æ— æ•ˆæ“ä½œï¼›</li>
<li><strong>ç”¨ TaskGroup ç®¡ç†å¤šä»»åŠ¡</strong>ï¼šæ‰¹é‡æ·»åŠ ã€æ‰¹é‡å–æ¶ˆï¼Œæ•ˆç‡æ›´é«˜ã€‚</li>
</ol>
<p>Swift çš„ Task å’Œ Actor ä¸æ˜¯é“¶å¼¹ï¼Œä½†å®ƒä»¬ç¡®å®è®©å¤šçº¿ç¨‹å¼€å‘å˜å¾—æ›´ç®€å•ã€æ›´å®‰å…¨ã€‚ä» GCD è¿‡æ¸¡åˆ° Swift å¹¶å‘æ¡†æ¶ï¼Œå¯èƒ½éœ€è¦ä¸€ç‚¹æ—¶é—´ï¼Œä½†ä¸€æ—¦æŒæ¡ï¼Œä½ ä¼šå‘ç°æ‰“å¼€äº†æ–°ä¸–ç•Œçš„å¤§é—¨ â€”â€” åŸæ¥å¤šçº¿ç¨‹å¼€å‘ä¹Ÿå¯ä»¥è¿™ä¹ˆè½»æ¾ï¼</p>
<p>æœ€åï¼Œé€å¤§å®¶ä¸€å¥è¯ï¼š<strong>å¤šçº¿ç¨‹ä¸å¯æ€•ï¼Œåªè¦ç”¨å¥½ Task å’Œ Actorï¼Œä½ ä¹Ÿèƒ½èººèµ¢ï¼</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Android ä½å»¶è¿Ÿæµåª’ä½“æ’­æ”¾å™¨å®æˆ˜ï¼šåŸºäº FFmpeg 6.1.1 çš„ RTSP/RTMP è§£å†³æ–¹æ¡ˆ]]></title>    <link>https://juejin.cn/post/7589275237038243875</link>    <guid>https://juejin.cn/post/7589275237038243875</guid>    <pubDate>2025-12-30T07:33:36.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589275237038243875" data-draft-id="7589509638339330074" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Android ä½å»¶è¿Ÿæµåª’ä½“æ’­æ”¾å™¨å®æˆ˜ï¼šåŸºäº FFmpeg 6.1.1 çš„ RTSP/RTMP è§£å†³æ–¹æ¡ˆ"/> <meta itemprop="keywords" content="Android"/> <meta itemprop="datePublished" content="2025-12-30T07:33:36.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å±æ¯"/> <meta itemprop="url" content="https://juejin.cn/user/861643816574349"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Android ä½å»¶è¿Ÿæµåª’ä½“æ’­æ”¾å™¨å®æˆ˜ï¼šåŸºäº FFmpeg 6.1.1 çš„ RTSP/RTMP è§£å†³æ–¹æ¡ˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/861643816574349/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å±æ¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-30T07:33:36.000Z" title="Tue Dec 30 2025 07:33:36 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åš Android æµåª’ä½“å¼€å‘çš„åŒå­¦åº”è¯¥éƒ½æ‡‚ï¼ŒåŸç”Ÿ<code>MediaPlayer</code>ç®€ç›´æ˜¯ â€œç—›ç‚¹é›†åˆä½“â€â€”â€” å»¶è¿Ÿé«˜åˆ°æ²¡æ³•å¿ã€åè®®æ”¯æŒæ‰è¥Ÿè§è‚˜ï¼Œç¬¬ä¸‰æ–¹æ’­æ”¾å™¨è¦ä¹ˆä½“ç§¯è‡ƒè‚¿ï¼Œè¦ä¹ˆå®šåˆ¶åŒ–èƒ½åŠ›å·®ï¼Œæƒ³åšä¸ªä½å»¶è¿Ÿã€æ”¯æŒå¤šè·¯æ’­æ”¾è¿˜èƒ½è‡ªå®šä¹‰å¤„ç†å¸§æ•°æ®çš„åŠŸèƒ½ï¼Œæ€»å¾—è¸©ä¸€å †å‘ã€‚</p>
<p>æœ€è¿‘åŸºäº FFmpeg 6.1.1 å°è£…äº†ä¸€æ¬¾è½»é‡çº§æµåª’ä½“æ’­æ”¾å™¨<code>FFmpegStreamPlayer</code>ï¼Œè§£å†³äº†é¡¹ç›®ä¸­é‡åˆ°çš„ä½å»¶è¿Ÿã€å¤šæµå¹¶å‘ã€YUV å¸§è‡ªå®šä¹‰å¤„ç†ç­‰æ ¸å¿ƒé—®é¢˜ï¼Œä»Šå¤©è·Ÿå¤§å®¶èŠèŠè¿™æ¬¾æ’­æ”¾å™¨çš„æ ¸å¿ƒä»·å€¼ã€é€‚ç”¨åœºæ™¯ï¼Œä»¥åŠä¸ºä»€ä¹ˆå®ƒèƒ½é€‚é…å¤§éƒ¨åˆ†å®‰å“æµåª’ä½“å¼€å‘éœ€æ±‚ã€‚</p>
<p>åº”ç”¨æˆªå›¾ï¼š</p>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4f21e59efe914e86b435cc43ab04d217~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bGP5oGv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767684895&amp;x-signature=uLaNEC1e4s6DVwYXKy14xNW3Zsk%3D" alt="MuMu-20251011-153144-611.png" width="30%" loading="lazy"/>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0df56d75f1824ba791efdb46973c5c9c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bGP5oGv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767684895&amp;x-signature=ym8t4g181nRJUz%2FHOimdAICbse4%3D" alt="MuMu-20251011-155352-156.png" width="30%" loading="lazy"/>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fcd8d8ea8fe242ce959ebe3003490930~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bGP5oGv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767684895&amp;x-signature=jymlRem9xQItZrb5BWdTDutBLkA%3D" alt="MuMu-20251218-104858-750.png" width="30%" loading="lazy"/>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/194ed87b0b934d9c9a061000d57db468~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bGP5oGv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767684895&amp;x-signature=DvOQRfhsyXh8W5LeVouzrwq0B5k%3D" alt="MuMu-20251219-141657-940.png" width="30%" loading="lazy"/>
<h2 data-id="heading-0">ä¸ºä»€ä¹ˆéœ€è¦è¿™æ¬¾æ’­æ”¾å™¨ï¼Ÿ</h2>
<p>å…ˆè¯´è¯´æˆ‘ä»¬æ—¥å¸¸å¼€å‘ä¸­é‡åˆ°çš„çœŸå®ç—›ç‚¹ï¼š</p>
<ol>
<li><strong>åŸç”Ÿæ’­æ”¾å™¨å®Œå…¨ä¸å¤Ÿç”¨</strong>ï¼šåŸç”Ÿ<code>MediaPlayer</code>çš„å»¶è¿Ÿèƒ½åˆ° 300-800msï¼Œåšå®‰é˜²ç›‘æ§ã€å®æ—¶ç›´æ’­è¿™ç±»å¯¹å»¶è¿Ÿæ•æ„Ÿçš„åœºæ™¯ï¼Œç”¨æˆ·ä½“éªŒç›´æ¥æ‹‰èƒ¯ï¼›è€Œä¸”å¯¹ RTSPã€HTTP-FLV è¿™ç±»åè®®çš„é€‚é…æ€§æå·®ï¼Œç»å¸¸å‡ºç°æ’­æ”¾å¡é¡¿ã€æ–­æµçš„æƒ…å†µã€‚</li>
<li><strong>ç¬¬ä¸‰æ–¹æ’­æ”¾å™¨çš„ â€œéšå½¢é—¨æ§›â€</strong> ï¼šå¸‚é¢ä¸Šä¸å°‘æ’­æ”¾å™¨è¦ä¹ˆåªæ”¯æŒå•ä¸€åè®®ï¼ˆæ¯”å¦‚åªåš RTMPï¼‰ï¼Œè¦ä¹ˆç¡¬ä»¶è§£ç é€‚é…å·®ï¼Œéƒ¨åˆ†æœºå‹ç›´æ¥é—ªé€€ï¼›è¿˜æœ‰çš„ä¸å¼€æºï¼Œæƒ³è‡ªå®šä¹‰å¤„ç† YUV å¸§ã€åŠ ä¸ª AI åˆ†æåŠŸèƒ½éƒ½æ— ä»ä¸‹æ‰‹ã€‚</li>
<li><strong>é¡¹ç›®çš„æ ¸å¿ƒè¯‰æ±‚æ²¡è¢«æ»¡è¶³</strong>ï¼šæˆ‘ä»¬åšå®‰é˜²é¡¹ç›®æ—¶ï¼Œéœ€è¦åŒæ—¶æ’­æ”¾ 16 è·¯ç›‘æ§æµã€å®æ—¶å½•åˆ¶ã€è·å– YUV å¸§åšäººè„¸æ£€æµ‹ï¼Œè¿˜è¦é€‚é… 16kb çš„ç‰¹æ®Šå±å¹• â€”â€” è¿™äº›éœ€æ±‚ï¼Œç°æˆçš„æ’­æ”¾å™¨è¦ä¹ˆåšä¸åˆ°ï¼Œè¦ä¹ˆéœ€è¦å¤§é‡äºŒæ¬¡å¼€å‘ã€‚</li>
</ol>
<p>åŸºäºè¿™äº›ç—›ç‚¹ï¼Œæ‰å°è£…äº†è¿™æ¬¾<code>FFmpegStreamPlayer</code>ï¼Œæ ¸å¿ƒå°±æ˜¯ â€œè§£å†³å®é™…é—®é¢˜â€ï¼Œè€Œä¸æ˜¯åšä¸€ä¸ª â€œèƒ½ç”¨ä½†ä¸å¥½ç”¨â€ çš„ç©å…·ã€‚</p>
<h2 data-id="heading-1">è¿™æ¬¾æ’­æ”¾å™¨çš„æ ¸å¿ƒä½¿ç”¨åœºæ™¯</h2>
<h3 data-id="heading-2">1. å®‰é˜²ç›‘æ§åœºæ™¯</h3>
<p>è¿™æ˜¯æœ€æ ¸å¿ƒçš„åœºæ™¯ï¼šæ”¯æŒ RTSP åè®®ï¼ˆå®‰é˜²æ‘„åƒå¤´ä¸»æµåè®®ï¼‰ï¼Œæœ€é«˜ 16 è·¯æµåŒæ—¶æ’­æ”¾ï¼ˆå…·ä½“è·¯æ•°çœ‹è®¾å¤‡æ€§èƒ½ï¼‰ï¼Œç¡¬ä»¶è§£ç å»¶è¿Ÿ 80-120msï¼Œèƒ½å®æ—¶çœ‹åˆ°ç›‘æ§ç”»é¢ï¼›è¿˜æ”¯æŒè¾¹æ’­è¾¹å½•ï¼Œå½•åˆ¶çš„è§†é¢‘è´¨é‡æ— æŸï¼Œæ»¡è¶³å–è¯ã€å›æ”¾çš„éœ€æ±‚ã€‚</p>
<h3 data-id="heading-3">2. ç›´æ’­äº’åŠ¨åœºæ™¯</h3>
<p>ä¸ç®¡æ˜¯ RTMP è¿˜æ˜¯ HTTP-FLV åè®®çš„ç›´æ’­ï¼Œéƒ½èƒ½åšåˆ°è¶…ä½å»¶è¿Ÿæ’­æ”¾ â€”â€” ç¡¬ä»¶è§£ç  100ms çº§çš„å»¶è¿Ÿï¼Œæ¯”åŸç”Ÿæ’­æ”¾å™¨å¿« 3 å€ä»¥ä¸Šï¼Œé€‚åˆç›´æ’­å¸¦è´§ã€åœ¨çº¿æ•™è‚²è¿™ç±»éœ€è¦å®æ—¶äº’åŠ¨çš„åœºæ™¯ã€‚</p>
<h3 data-id="heading-4">3. æ™ºèƒ½åˆ†æ / è‡ªå®šä¹‰å¤„ç†åœºæ™¯</h3>
<p>è½¯ä»¶è§£ç æ¨¡å¼ä¸‹èƒ½è·å– YUV åŸå§‹å¸§ï¼Œæ”¯æŒä¸‰ç§å¤„ç†æ¨¡å¼ï¼š</p>
<ul>
<li>åªè¯»åˆ†æï¼ˆæ¯”å¦‚äººè„¸æ£€æµ‹ã€è¡Œä¸ºåˆ†æï¼‰ï¼Œä¸å½±å“æ­£å¸¸æ’­æ”¾ï¼›</li>
<li>å¤„ç†åæ¸²æŸ“ï¼ˆæ¯”å¦‚åŠ ç¾é¢œã€æ»¤é•œï¼‰ï¼›</li>
<li>å®Œå…¨æ¥ç®¡æ¸²æŸ“ï¼ˆè‡ªå·±ç”¨ OpenGL ç”»ï¼‰ã€‚åš AI æ¨ç†ã€è‡ªå®šä¹‰æ¸²æŸ“çš„åŒå­¦ï¼Œä¸ç”¨å†è‡ªå·±å°è£… FFmpeg çš„è§£ç é€»è¾‘ï¼Œç›´æ¥ç”¨ç°æˆçš„æ¥å£å°±è¡Œã€‚</li>
</ul>
<h3 data-id="heading-5">4. è½¦è½½ / å·¥æ§è®¾å¤‡åœºæ™¯</h3>
<p>ä¸“é—¨åšäº† 16kb é¡µé¢é€‚é…ï¼Œèƒ½å…¼å®¹è½¦è½½ã€å·¥æ§è¿™ç±»ç‰¹æ®Šå±å¹•ï¼›è€Œä¸”å®Œå–„çš„ç”Ÿå‘½å‘¨æœŸé€‚é…é€»è¾‘ï¼Œèƒ½å¤„ç†åº”ç”¨å‰åå°åˆ‡æ¢ã€Surface é”€æ¯ / åˆ›å»ºçš„æƒ…å†µï¼Œé¿å…è®¾å¤‡é•¿æ—¶é—´è¿è¡Œå‡ºç°å´©æºƒã€å†…å­˜æ³„æ¼ã€‚</p>
<h3 data-id="heading-6">5. é€šç”¨æµåª’ä½“æ’­æ”¾åœºæ™¯</h3>
<p>æ”¯æŒ RTSP/RTMP/HLS/HTTP-FLV/RTP/UDP/TCP ç­‰å‡ ä¹æ‰€æœ‰ä¸»æµåè®®ï¼Œä¸€å¥—ä»£ç å°±èƒ½é€‚é…ä¸åŒçš„æ’­æ”¾éœ€æ±‚ï¼Œä¸ç”¨ä¸ºä¸åŒåè®®é›†æˆä¸åŒçš„æ’­æ”¾å™¨ã€‚</p>
<h2 data-id="heading-7">ä½¿ç”¨è¿™æ¬¾æ’­æ”¾å™¨çš„æ ¸å¿ƒå¥½å¤„</h2>
<h3 data-id="heading-8">1. æè‡´ä½å»¶è¿Ÿï¼Œä½“éªŒæ‹‰æ»¡</h3>
<p>ç¡¬ä»¶è§£ç å»¶è¿Ÿ 80-120msï¼Œè½¯ä»¶è§£ç  120-200msï¼Œäº²æµ‹æ¯”åŸç”Ÿ<code>MediaPlayer</code>å¿« 3-5 å€ï¼›è€Œä¸”ç”¨äº†é›¶æ‹·è´æ¸²æŸ“ï¼ˆç›´æ¥å†…å­˜æ˜ å°„ï¼‰ï¼Œå‡å°‘å†…å­˜æ‹·è´çš„å¼€é”€ï¼Œæ’­æ”¾æ›´æµç•…ã€‚</p>
<h3 data-id="heading-9">2. çµæ´»çš„è§£ç  &amp; å®šåˆ¶åŒ–èƒ½åŠ›</h3>
<ul>
<li>ç¡¬ä»¶ / è½¯ä»¶è§£ç å¯é€‰ï¼šç¡¬ä»¶è§£ç è¿½æ±‚ä½å»¶è¿Ÿï¼Œè½¯ä»¶è§£ç æ”¯æŒ YUV å¸§è‡ªå®šä¹‰å¤„ç†ï¼›</li>
<li>YUV å¸§é›¶æ‹·è´å¤„ç†ï¼šç›´æ¥æ‹¿åˆ°<code>DirectByteBuffer</code>ï¼Œä¸ç”¨æ‹·è´æ•°æ®ï¼Œæ€§èƒ½æŸè€—å‡ ä¹å¯ä»¥å¿½ç•¥ï¼›</li>
<li>è‡ªå®šä¹‰æ¸²æŸ“ï¼šå®Œå…¨æ¥ç®¡æ¸²æŸ“é€»è¾‘ï¼Œæƒ³æ€ä¹ˆç”»å°±æ€ä¹ˆç”»ï¼Œé€‚é…å„ç§ä¸ªæ€§åŒ–éœ€æ±‚ã€‚</li>
</ul>
<h3 data-id="heading-10">3. å¤šæµå¹¶å‘ + åè®®å…¨è¦†ç›–</h3>
<p>æœ€å¤š 16 è·¯æµåŒæ—¶æ’­æ”¾ï¼Œæ»¡è¶³å¤šè·¯ç›‘æ§ã€çŸ©é˜µå±ç­‰åœºæ™¯ï¼›RTSP/RTMP/HLS ç­‰ä¸»æµåè®®å…¨è¦†ç›–ï¼Œä¸ç”¨å†ä¸ºä¸åŒåè®®åšå…¼å®¹å¼€å‘ã€‚</p>
<h3 data-id="heading-11">4. ç¨³å®šçš„ç”Ÿå‘½å‘¨æœŸé€‚é…</h3>
<p>ä¸“é—¨å¤„ç†äº†<code>Surface</code>çš„åˆ›å»º / é”€æ¯ã€åº”ç”¨å‰åå°åˆ‡æ¢ã€æµçš„é”€æ¯ç­‰é€»è¾‘ï¼Œåªè¦æŒ‰æ–‡æ¡£åšå¥½ç”Ÿå‘½å‘¨æœŸé€‚é…ï¼Œå‡ ä¹ä¸ä¼šå‡ºç°å´©æºƒã€é»‘å±ã€éŸ³è§†é¢‘ä¸åŒæ­¥çš„é—®é¢˜ã€‚</p>
<h3 data-id="heading-12">5. è½»é‡åŒ–é›†æˆ</h3>
<p>åŸºäº aar å°è£…ï¼ŒåªåŒ…å« arm64-v8a/armeabi-v7a/x86_64 ä¸‰ç§ä¸»æµæ¶æ„ï¼Œä½“ç§¯å¯æ§ï¼›é›†æˆæ–¹å¼ä¹Ÿç®€å•ï¼Œå‡ è¡Œä»£ç å°±èƒ½å¼•å…¥ï¼Œä¸ç”¨é…ç½®å¤æ‚çš„ NDK ç¯å¢ƒã€‚</p>
<h2 data-id="heading-13">å¿«é€Ÿä¸Šæ‰‹ï¼ˆæ ¸å¿ƒä»£ç ç¤ºä¾‹ï¼‰</h2>
<h3 data-id="heading-14">1. å¼•å…¥åº“ + æ·»åŠ æƒé™</h3>
<p>kotlin</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-selector-tag">dependencies</span> {
    <span class="hljs-selector-tag">implementation</span>(<span class="hljs-built_in">fileTree</span>(<span class="hljs-built_in">mapOf</span>(<span class="hljs-string">"dir"</span> to <span class="hljs-string">"libs"</span>, <span class="hljs-string">"include"</span> to <span class="hljs-built_in">listOf</span>(<span class="hljs-string">"*.aar"</span>))))
}
</code></pre>
<p>xml</p>
<pre><code class="hljs language-ini" lang="ini">&lt;uses-permission android:<span class="hljs-attr">name</span>=<span class="hljs-string">"android.permission.INTERNET"</span> /&gt;
&lt;uses-permission android:<span class="hljs-attr">name</span>=<span class="hljs-string">"android.permission.WRITE_EXTERNAL_STORAGE"</span> /&gt;
</code></pre>
<h3 data-id="heading-15">2. åŸºæœ¬æ’­æ”¾é€»è¾‘</h3>
<p>java</p>
<p>è¿è¡Œ</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// åˆ›å»ºæµï¼ˆç¡¬ä»¶è§£ç ï¼‰</span>
int streamId = FFmpegRTSPLibrary<span class="hljs-selector-class">.createStream</span>("rtsp://your-server/stream");
<span class="hljs-comment">// ç»‘å®šSurface</span>
FFmpegRTSPLibrary<span class="hljs-selector-class">.setSurface</span>(streamId, surfaceView.getHolder()<span class="hljs-selector-class">.getSurface</span>());
<span class="hljs-comment">// å¼‚æ­¥æ’­æ”¾</span>
FFmpegRTSPLibrary<span class="hljs-selector-class">.startPlayAsync</span>(streamId, callback);

<span class="hljs-comment">// åœæ­¢+é”€æ¯</span>
FFmpegRTSPLibrary<span class="hljs-selector-class">.stopPlayAsync</span>(streamId, callback);
FFmpegRTSPLibrary<span class="hljs-selector-class">.destroyStream</span>(streamId);
</code></pre>
<h3 data-id="heading-16">3. YUV å¸§å¤„ç†ï¼ˆAI åˆ†æåœºæ™¯ï¼‰</h3>
<p>java</p>
<p>è¿è¡Œ</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// æ³¨å†ŒYUVå¤„ç†å™¨ï¼ˆåªè¯»åˆ†ææ¨¡å¼ï¼‰</span>
<span class="hljs-title class_">FFmpegRTSPLibrary</span>.<span class="hljs-title function_">registerYUVProcessor</span>(streamId, <span class="hljs-keyword">new</span> <span class="hljs-title class_">IYUVFrameProcessor</span>() {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-title class_">YUVProcessMode</span> <span class="hljs-title function_">getProcessMode</span>(<span class="hljs-params"/>) {
        <span class="hljs-keyword">return</span> <span class="hljs-title class_">YUVProcessMode</span>.<span class="hljs-property">OBSERVE_ONLY</span>;
    }
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-title class_">YUVProcessResult</span> <span class="hljs-title function_">onProcessFrame</span>(<span class="hljs-params">YUVFrameInfo frame</span>) {
        <span class="hljs-comment">// æ‹¿åˆ°YUVåŸå§‹æ•°æ®åšAIæ¨ç†ï¼ˆæ¯”å¦‚äººè„¸æ£€æµ‹ï¼‰</span>
        <span class="hljs-comment">// frame.yBuffer/uBuffer/vBufferæ˜¯é›¶æ‹·è´DirectByteBuffer</span>
        <span class="hljs-keyword">return</span> <span class="hljs-title class_">YUVProcessResult</span>.<span class="hljs-title function_">passthrough</span>();
    }
});
</code></pre>
<h3 data-id="heading-17">4. å¿…åšçš„ç”Ÿå‘½å‘¨æœŸé€‚é…</h3>
<p>java</p>
<p>è¿è¡Œ</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-meta">@Override</span>
<span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">surfaceDestroyed</span>(<span class="hljs-params">SurfaceHolder holder</span>) {
    <span class="hljs-keyword">if</span> (currentStreamId &gt;= <span class="hljs-number">0</span>) {
        <span class="hljs-title class_">FFmpegRTSPLibrary</span>.<span class="hljs-title function_">onSurfaceDestroyed</span>(currentStreamId);
    }
}

<span class="hljs-meta">@Override</span> 
<span class="hljs-keyword">protected</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">onDestroy</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">super</span>.<span class="hljs-title function_">onDestroy</span>();
    <span class="hljs-title class_">FFmpegRTSPLibrary</span>.<span class="hljs-title function_">destroyAllAsync</span>();
}
</code></pre>
<h2 data-id="heading-18">æ³¨æ„äº‹é¡¹</h2>
<ol>
<li>YUV å›è°ƒåœ¨è§£ç çº¿ç¨‹æ‰§è¡Œï¼Œè€—æ—¶æ“ä½œï¼ˆæ¯”å¦‚ AI æ¨ç†ï¼‰ä¸€å®šè¦å¼‚æ­¥å¤„ç†ï¼Œé¿å…é˜»å¡è§£ç ï¼›</li>
<li>YUV çš„ Buffer ä»…åœ¨å›è°ƒæœŸé—´æœ‰æ•ˆï¼Œä¸è¦ç¼“å­˜å¤ç”¨ï¼Œå¦åˆ™ä¼šå‡ºç°æ•°æ®é”™ä¹±ï¼›</li>
<li>å¤šæµæ’­æ”¾æ—¶è¦æ ¹æ®è®¾å¤‡æ€§èƒ½è°ƒæ•´è·¯æ•°ï¼Œä¸­ä½ç«¯æœºå‹å»ºè®®é€‚å½“å‡å°‘å¹¶å‘è·¯æ•°ï¼›</li>
</ol>
<h2 data-id="heading-19">æœ€å</h2>
<p>è¿™æ¬¾æ’­æ”¾å™¨æ˜¯ä»å®é™…é¡¹ç›®ä¸­æ²‰æ·€å‡ºæ¥çš„ï¼Œæ²¡æœ‰èŠ±é‡Œèƒ¡å“¨çš„åŠŸèƒ½ï¼Œæ ¸å¿ƒå°±æ˜¯è§£å†³ â€œä½å»¶è¿Ÿã€å¤šåè®®ã€å¯å®šåˆ¶â€ è¿™ä¸‰ä¸ªæ ¸å¿ƒç—›ç‚¹ã€‚ç›®å‰é¡¹ç›®é•¿æœŸç»´æŠ¤ï¼Œæœ‰å®šåˆ¶åŒ–éœ€æ±‚ï¼ˆæ¯”å¦‚è£å‰ªç‰¹å®šæ¶æ„ã€æ–°å¢åŠŸèƒ½ï¼‰å¯ä»¥è”ç³»ä½œè€…ï¼Œä¹Ÿå¯ä»¥åŠ  QQ ç¾¤ 647718711 äº¤æµé—®é¢˜ã€‚</p>
<p>é¡¹ç›®åœ°å€<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fanwz0611%2Fandroid-ffmpeg-stream-player" target="_blank" title="https://github.com/anwz0611/android-ffmpeg-stream-player" ref="nofollow noopener noreferrer">ï¼šhttps://github.com/anwz0611/android-ffmpeg-stream-player</a></p>
<p>å¦‚æœä½ çš„é¡¹ç›®ä¹Ÿæœ‰å®‰å“æµåª’ä½“æ’­æ”¾çš„éœ€æ±‚ï¼Œå°¤å…¶æ˜¯ä½å»¶è¿Ÿã€å¤šæµå¹¶å‘ã€è‡ªå®šä¹‰å¸§å¤„ç†çš„åœºæ™¯ï¼Œè¿™æ¬¾æ’­æ”¾å™¨åº”è¯¥èƒ½å¸®ä½ å°‘èµ°ä¸å°‘å¼¯è·¯</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item>  </channel></rss>