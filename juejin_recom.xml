<?xml version="1.0" encoding="UTF-8"?><rss version="2.0">  <channel>      <title>æ˜é‡‘æ–‡ç« æ¨è</title>      <link>https://juejin.cn/recommended?sort=newest</link>      <description>ä¸€ä¸ªå¸®åŠ©å¼€å‘è€…æˆé•¿çš„ç¤¾åŒº</description>      <generator>python juejin_recom.py @Pi20</generator>      <item>    <title><![CDATA[ä¸ºä»€ä¹ˆæ˜¾ç¤ºå™¨åˆ†è¾¨ç‡è¶Šé«˜è¶Šæ¸…æ™°ï¼Ÿâ€”â€”ä»åƒç´ åˆ° 4K/8K çš„è§†è§‰é©å‘½]]></title>    <link>https://juejin.cn/post/7584760031835815970</link>    <guid>https://juejin.cn/post/7584760031835815970</guid>    <pubDate>2025-12-18T06:41:30.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7584760031835815970" data-draft-id="7584780417103495208" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸ºä»€ä¹ˆæ˜¾ç¤ºå™¨åˆ†è¾¨ç‡è¶Šé«˜è¶Šæ¸…æ™°ï¼Ÿâ€”â€”ä»åƒç´ åˆ° 4K/8K çš„è§†è§‰é©å‘½"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-18T06:41:30.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ— é™å¤§6"/> <meta itemprop="url" content="https://juejin.cn/user/2865758605422890"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸ºä»€ä¹ˆæ˜¾ç¤ºå™¨åˆ†è¾¨ç‡è¶Šé«˜è¶Šæ¸…æ™°ï¼Ÿâ€”â€”ä»åƒç´ åˆ° 4K/8K çš„è§†è§‰é©å‘½
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2865758605422890/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ— é™å¤§6
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-18T06:41:30.000Z" title="Thu Dec 18 2025 06:41:30 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-18
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    14
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ğŸ–¥ï¸ ä¸ºä»€ä¹ˆæ˜¾ç¤ºå™¨åˆ†è¾¨ç‡è¶Šé«˜è¶Šæ¸…æ™°ï¼Ÿâ€”â€”ä»åƒç´ åˆ° 4K/8K çš„è§†è§‰é©å‘½ ğŸ‘ï¸</h2>
<blockquote>
<p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯æ— é™å¤§ï¼Œæ¬¢è¿æ”¶çœ‹åä¸‡ä¸ªä¸ºä»€ä¹ˆç³»åˆ—æ–‡ç« </p>
</blockquote>
<p>ä»Šå¤©å’±ä»¬æ¥èŠèŠæ˜¾ç¤ºå™¨è¿™ä¸ª"ç”µè„‘çš„è„¸"ï¼ä»æ¨¡ç³Šçš„è€å¼æ˜¾ç¤ºå™¨åˆ°å¦‚ä»Šçš„4K/8Ké«˜æ¸…å±ï¼Œæ˜¾ç¤ºå™¨çš„å‘å±•å¯è°“æ—¥æ–°æœˆå¼‚ã€‚å¸Œæœ›ä»Šå¤©çš„å†…å®¹èƒ½è®©ä½ å¯¹æ˜¾ç¤ºå™¨æœ‰æ›´æ·±å…¥çš„äº†è§£</p>
<p>æƒ³è±¡ä¸€ä¸‹ï¼Œä½ æ­£åœ¨çœ‹ä¸€æœ¬æ‚å¿—ï¼š</p>
<ul>
<li>ç”¨æ”¾å¤§é•œçœ‹ï¼Œå‘ç°æ¯ä¸ªå›¾ç‰‡éƒ½æ˜¯ç”±æ— æ•°ä¸ªå°ç‚¹ç»„æˆçš„</li>
<li>ç¦»è¿œçœ‹ï¼Œè¿™äº›å°ç‚¹å°±èåˆæˆäº†æ¸…æ™°çš„ç”»é¢</li>
</ul>
<p>æ˜¾ç¤ºå™¨çš„åŸç†å…¶å®å’Œæ‚å¿—ä¸€æ ·ï¼æ¯ä¸ªå°ç‚¹å°±æ˜¯ä¸€ä¸ª"åƒç´ "ï¼Œåˆ†è¾¨ç‡è¶Šé«˜ï¼Œåƒç´ è¶Šå¤šï¼Œç”»é¢å°±è¶Šæ¸…æ™°ã€‚ä»Šå¤©å’±ä»¬å°±æ¥æ­å¼€æ˜¾ç¤ºå™¨åˆ†è¾¨ç‡çš„ç¥ç§˜é¢çº±ï¼</p>
<h3 data-id="heading-1">ğŸ¤” æ ¸å¿ƒé—®é¢˜ï¼šåˆ†è¾¨ç‡ã€åˆ·æ–°ç‡ã€è‰²åŸŸåˆ°åº•æ˜¯ä»€ä¹ˆå…³ç³»ï¼Ÿ</h3>
<p>å¾ˆå¤šäººä¹°æ˜¾ç¤ºå™¨æ—¶ä¼šè¢«è¿™äº›æœ¯è¯­ææ™•ï¼š</p>
<ul>
<li>åˆ†è¾¨ç‡ï¼š1080Pã€2Kã€4Kã€8K</li>
<li>åˆ·æ–°ç‡ï¼š60Hzã€144Hzã€240Hz</li>
<li>è‰²åŸŸï¼šsRGBã€DCI-P3ã€Adobe RGB</li>
</ul>
<p>è¿™ä¸‰ä¸ªå‚æ•°å°±åƒæ˜¾ç¤ºå™¨çš„"ä¸‰å›´"ï¼Œå…±åŒå†³å®šäº†æ˜¾ç¤ºæ•ˆæœã€‚å’±ä»¬ä»Šå¤©é‡ç‚¹èŠèŠåˆ†è¾¨ç‡è¿™ä¸ª"èº«é«˜"å‚æ•°ï¼</p>
<h3 data-id="heading-2">ğŸ“œ æ˜¾ç¤ºå™¨çš„"è¿›åŒ–å²"ï¼šä»æ¨¡ç³Šåˆ°æ¸…æ™°çš„é©å‘½</h3>
<h4 data-id="heading-3">1. ğŸ“º VGAæ—¶ä»£ï¼š"èƒ½çœ‹å°±è¡Œ"</h4>
<p>1987å¹´ï¼ŒIBMæ¨å‡ºäº†VGAï¼ˆVideo Graphics Arrayï¼‰æ ‡å‡†ï¼Œåˆ†è¾¨ç‡ä¸º<strong>640x480</strong>ã€‚é‚£æ—¶å€™çš„æ˜¾ç¤ºå™¨å°±åƒè€èŠ±é•œï¼Œç”»é¢æ¨¡ç³Šå¾—åƒæ‰“äº†é©¬èµ›å…‹ã€‚</p>
<p>æƒ³è±¡ä¸€ä¸‹ï¼Œç”¨VGAæ˜¾ç¤ºå™¨çœ‹ç”µå½±ï¼Œäººç‰©çš„è„¸éƒ½æ˜¯é”¯é½¿çŠ¶çš„ï¼Œæ–‡å­—è¾¹ç¼˜ä¹Ÿæ¯›æ¯›ç³™ç³™çš„ã€‚è¿™å°±æ˜¯20ä¸–çºª90å¹´ä»£çš„æ˜¾ç¤ºæ•ˆæœï¼Œæ˜¯ä¸æ˜¯å¾ˆæ„Ÿäººï¼ŸğŸ˜‚</p>
<h4 data-id="heading-4">2. ğŸš€ HDæ—¶ä»£ï¼š"é«˜æ¸…æ¥äº†"</h4>
<p>2000å¹´å·¦å³ï¼ŒHDï¼ˆHigh Definitionï¼‰æ ‡å‡†å‡ºç°ï¼Œåˆ†è¾¨ç‡ä¸º<strong>1280x720</strong>ï¼ˆ720Pï¼‰ã€‚è¿™æ—¶å€™çš„ç”»é¢å¼€å§‹å˜å¾—æ¸…æ™°ï¼Œé”¯é½¿ä¹Ÿå‡å°‘äº†ã€‚</p>
<p>2009å¹´ï¼Œ<strong>1920x1080</strong>ï¼ˆ1080Pï¼‰æˆä¸ºä¸»æµã€‚è¿™æ—¶å€™çš„æ˜¾ç¤ºå™¨ç»ˆäºèƒ½çœ‹æ¸…ç»†èŠ‚äº†ï¼Œæ–‡å­—ä¹Ÿå˜å¾—é”åˆ©èµ·æ¥ã€‚</p>
<h4 data-id="heading-5">3. ğŸ’ 4Kæ—¶ä»£ï¼š"è§†ç½‘è†œå±"</h4>
<p>2012å¹´ï¼Œè‹¹æœæ¨å‡ºäº†Retinaæ˜¾ç¤ºå±ï¼Œåˆ†è¾¨ç‡è¾¾åˆ°äº†<strong>2560x1440</strong>ï¼ˆ2Kï¼‰ã€‚2014å¹´ï¼Œ4Kæ˜¾ç¤ºå™¨å¼€å§‹æ™®åŠï¼Œåˆ†è¾¨ç‡ä¸º<strong>3840x2160</strong>ã€‚</p>
<p>4Kæ˜¾ç¤ºå™¨çš„åƒç´ æ•°é‡æ˜¯1080Pçš„4å€ï¼Œç”»é¢ç»†è…»å¾—åƒç…§ç‰‡ä¸€æ ·ã€‚ä½ ç”šè‡³éœ€è¦ç”¨æ”¾å¤§é•œæ‰èƒ½çœ‹åˆ°åƒç´ ç‚¹ï¼</p>
<h4 data-id="heading-6">4. ğŸŒŸ 8Kæ—¶ä»£ï¼š"æœªæ¥å·²æ¥"</h4>
<p>2020å¹´ï¼Œ8Kæ˜¾ç¤ºå™¨å¼€å§‹è¿›å…¥å¸‚åœºï¼Œåˆ†è¾¨ç‡ä¸º<strong>7680x4320</strong>ã€‚8Kæ˜¾ç¤ºå™¨æœ‰3300ä¸‡åƒç´ ï¼Œæ˜¯1080Pçš„16å€ï¼</p>
<p>æƒ³è±¡ä¸€ä¸‹ï¼Œç”¨8Kæ˜¾ç¤ºå™¨çœ‹é£æ™¯ç…§ç‰‡ï¼Œè¿æ ‘å¶çš„è„‰ç»œéƒ½èƒ½çœ‹å¾—æ¸…æ¸…æ¥šæ¥šã€‚è¿™å°±æ˜¯æœªæ¥çš„æ˜¾ç¤ºæ•ˆæœï¼</p>
<h3 data-id="heading-7">ğŸ”§ æŠ€æœ¯åŸç†ï¼šåˆ†è¾¨ç‡çš„ç§˜å¯†</h3>
<h4 data-id="heading-8">1. ğŸ“ åƒç´ å¯†åº¦ï¼ˆPPIï¼‰ï¼šç”»é¢æ¸…æ™°çš„å…³é”®</h4>
<p>åƒç´ å¯†åº¦æ˜¯æŒ‡æ¯è‹±å¯¸å±å¹•ä¸Šçš„åƒç´ æ•°é‡ï¼Œå•ä½æ˜¯PPIï¼ˆPixels Per Inchï¼‰ã€‚PPIè¶Šé«˜ï¼Œç”»é¢è¶Šæ¸…æ™°ã€‚</p>
<p>è®¡ç®—PPIçš„å…¬å¼å¾ˆç®€å•ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">PPI</span> = âˆš(å®½åº¦åƒç´ Â² + é«˜åº¦åƒç´ Â²) / å±å¹•å°ºå¯¸ï¼ˆè‹±å¯¸ï¼‰
</code></pre>
<p><strong>ä»£ç å®ä¾‹</strong>ï¼šç”¨Pythonè®¡ç®—ä¸åŒåˆ†è¾¨ç‡çš„PPI</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">calculate_ppi</span>(<span class="hljs-params">width_px, height_px, screen_size</span>):
    <span class="hljs-string">"""è®¡ç®—æ˜¾ç¤ºå™¨çš„PPI"""</span>
    diagonal_px = (width_px ** <span class="hljs-number">2</span> + height_px ** <span class="hljs-number">2</span>) ** <span class="hljs-number">0.5</span>
    ppi = diagonal_px / screen_size
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">round</span>(ppi, <span class="hljs-number">2</span>)

<span class="hljs-comment"># å¸¸è§åˆ†è¾¨ç‡çš„PPIè®¡ç®—</span>
screen_size = <span class="hljs-number">27</span>  <span class="hljs-comment"># 27è‹±å¯¸æ˜¾ç¤ºå™¨</span>

resolutions = [
    (<span class="hljs-number">640</span>, <span class="hljs-number">480</span>, <span class="hljs-string">"VGA"</span>),
    (<span class="hljs-number">1280</span>, <span class="hljs-number">720</span>, <span class="hljs-string">"720P"</span>),
    (<span class="hljs-number">1920</span>, <span class="hljs-number">1080</span>, <span class="hljs-string">"1080P"</span>),
    (<span class="hljs-number">2560</span>, <span class="hljs-number">1440</span>, <span class="hljs-string">"2K"</span>),
    (<span class="hljs-number">3840</span>, <span class="hljs-number">2160</span>, <span class="hljs-string">"4K"</span>),
    (<span class="hljs-number">7680</span>, <span class="hljs-number">4320</span>, <span class="hljs-string">"8K"</span>)
]

<span class="hljs-built_in">print</span>(<span class="hljs-string">f"<span class="hljs-subst">{screen_size}</span>è‹±å¯¸æ˜¾ç¤ºå™¨ä¸åŒåˆ†è¾¨ç‡çš„PPIï¼š"</span>)
<span class="hljs-keyword">for</span> width, height, name <span class="hljs-keyword">in</span> resolutions:
    ppi = calculate_ppi(width, height, screen_size)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"<span class="hljs-subst">{name}</span> (<span class="hljs-subst">{width}</span>x<span class="hljs-subst">{height}</span>)ï¼š<span class="hljs-subst">{ppi}</span> PPI"</span>)
</code></pre>
<p><strong>è¿è¡Œç»“æœ</strong>ï¼š</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-number">27</span>è‹±å¯¸æ˜¾ç¤ºå™¨ä¸åŒåˆ†è¾¨ç‡çš„PPIï¼š
VGA (<span class="hljs-number">640</span>x480)ï¼š<span class="hljs-number">30.0</span> PPI
<span class="hljs-number">720</span>P (<span class="hljs-number">1280</span>x720)ï¼š<span class="hljs-number">58.84</span> PPI
<span class="hljs-number">1080</span>P (<span class="hljs-number">1920</span>x1080)ï¼š<span class="hljs-number">88.28</span> PPI
<span class="hljs-number">2</span>K (<span class="hljs-number">2560</span>x1440)ï¼š<span class="hljs-number">117.71</span> PPI
<span class="hljs-number">4</span>K (<span class="hljs-number">3840</span>x2160)ï¼š<span class="hljs-number">176.57</span> PPI
<span class="hljs-number">8</span>K (<span class="hljs-number">7680</span>x4320)ï¼š<span class="hljs-number">353.14</span> PPI
</code></pre>
<h4 data-id="heading-9">2. âš¡ åˆ·æ–°ç‡ï¼ˆHzï¼‰ï¼šæµç•…åº¦çš„å…³é”®</h4>
<p>åˆ·æ–°ç‡æ˜¯æŒ‡æ˜¾ç¤ºå™¨æ¯ç§’åˆ·æ–°ç”»é¢çš„æ¬¡æ•°ï¼Œå•ä½æ˜¯Hzã€‚åˆ·æ–°ç‡è¶Šé«˜ï¼Œç”»é¢è¶Šæµç•…ã€‚</p>
<ul>
<li><strong>60Hz</strong>ï¼šæ—¥å¸¸åŠå…¬è¶³å¤Ÿï¼Œçœ‹è§†é¢‘æµç•…</li>
<li><strong>144Hz</strong>ï¼šæ¸¸æˆç©å®¶çš„æœ€çˆ±ï¼Œç”»é¢ä¸æ»‘</li>
<li><strong>240Hz</strong>ï¼šèŒä¸šé€‰æ‰‹çš„é€‰æ‹©ï¼Œæè‡´æµç•…</li>
</ul>
<p><strong>æ•°æ®æ”¯æ’‘</strong>ï¼š144Hzåˆ·æ–°ç‡æ¯”60Hzæµç•…åº¦æå‡140%ï¼</p>
<h4 data-id="heading-10">3. ğŸ¨ è‰²åŸŸï¼šè‰²å½©ä¸°å¯Œåº¦çš„å…³é”®</h4>
<p>è‰²åŸŸæ˜¯æŒ‡æ˜¾ç¤ºå™¨èƒ½æ˜¾ç¤ºçš„é¢œè‰²èŒƒå›´ã€‚å¸¸è§çš„è‰²åŸŸæ ‡å‡†æœ‰ï¼š</p>
<ul>
<li><strong>sRGB</strong>ï¼šæ ‡å‡†è‰²åŸŸï¼Œè¦†ç›–çº¦1677ä¸‡ç§é¢œè‰²</li>
<li><strong>DCI-P3</strong>ï¼šç”µå½±è‰²åŸŸï¼Œè¦†ç›–çº¦10.7äº¿ç§é¢œè‰²</li>
<li><strong>Adobe RGB</strong>ï¼šè®¾è®¡è‰²åŸŸï¼Œé€‚åˆä¸“ä¸šè®¾è®¡</li>
</ul>
<p>è‰²åŸŸè¶Šå¹¿ï¼Œé¢œè‰²è¶Šé²œè‰³ï¼Œç”»é¢è¶Šé€¼çœŸã€‚</p>
<h3 data-id="heading-11">ğŸ“Š è¶£å‘³å¯¹æ¯”ï¼šä¸åŒåˆ†è¾¨ç‡çš„è§†è§‰æ•ˆæœ</h3>






















































<table><thead><tr><th>åˆ†è¾¨ç‡</th><th>åƒç´ æ•°é‡</th><th>27è‹±å¯¸PPI</th><th>è§†è§‰æ•ˆæœ</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>VGA (640x480)</td><td>30.7ä¸‡</td><td>30</td><td>é©¬èµ›å…‹</td><td>å†å²åšç‰©é¦†</td></tr><tr><td>720P (1280x720)</td><td>92.2ä¸‡</td><td>58.8</td><td>æ¨¡ç³Š</td><td>è€æ—§è®¾å¤‡</td></tr><tr><td>1080P (1920x1080)</td><td>207.3ä¸‡</td><td>88.3</td><td>æ¸…æ™°</td><td>æ—¥å¸¸åŠå…¬</td></tr><tr><td>2K (2560x1440)</td><td>368.6ä¸‡</td><td>117.7</td><td>éå¸¸æ¸…æ™°</td><td>æ¸¸æˆã€è®¾è®¡</td></tr><tr><td>4K (3840x2160)</td><td>829.4ä¸‡</td><td>176.6</td><td>è§†ç½‘è†œå±</td><td>ä¸“ä¸šè®¾è®¡ã€ç”µå½±</td></tr><tr><td>8K (7680x4320)</td><td>3317.7ä¸‡</td><td>353.1</td><td>æè‡´æ¸…æ™°</td><td>æœªæ¥å½±é™¢</td></tr></tbody></table>
<p><strong>è¶£å‘³è§‚å¯Ÿ</strong>ï¼š</p>
<ul>
<li>8Kçš„åƒç´ æ•°é‡æ˜¯1080Pçš„16å€ï¼Œç›¸å½“äºæŠŠ16ä¸ª1080På±å¹•æ‹¼åœ¨ä¸€èµ·</li>
<li>4Kæ˜¾ç¤ºå™¨åœ¨27è‹±å¯¸ä¸‹çš„PPIè¾¾åˆ°176.6ï¼Œè¶…è¿‡äº†äººçœ¼çš„åˆ†è¾¨æé™ï¼ˆçº¦150PPIï¼‰</li>
</ul>
<h3 data-id="heading-12">ğŸ® æ¸¸æˆä¸­çš„åˆ†è¾¨ç‡å·®å¼‚</h3>
<p>ç©æ¸¸æˆæ—¶ï¼Œåˆ†è¾¨ç‡å¯¹ä½“éªŒçš„å½±å“éå¸¸æ˜æ˜¾ï¼š</p>
<h4 data-id="heading-13">1080P vs 4Kæ¸¸æˆå¯¹æ¯”ï¼š</h4>
<ul>
<li><strong>1080P</strong>ï¼šèƒ½çœ‹æ¸…æ•Œäººï¼Œä½†è¿œå¤„çš„ç»†èŠ‚æ¨¡ç³Šï¼Œæ–‡å­—è¾¹ç¼˜æœ‰é”¯é½¿</li>
<li><strong>4K</strong>ï¼šèƒ½çœ‹æ¸…æ•Œäººçš„è¡¨æƒ…ï¼Œè¿œå¤„çš„è‰å¶ä¹Ÿæ¸…æ™°å¯è§ï¼Œæ–‡å­—é”åˆ©å¦‚åˆ€</li>
</ul>
<p><strong>æ•°æ®æ”¯æ’‘</strong>ï¼š</p>
<ul>
<li>ç©ã€Šèµ›åšæœ‹å…‹2077ã€‹ï¼Œ1080Pä¸‹èƒ½çœ‹åˆ°100ç±³å†…çš„æ•Œäºº</li>
<li>4Kä¸‹èƒ½çœ‹åˆ°200ç±³å¤–çš„æ•Œäººï¼Œç”šè‡³èƒ½çœ‹æ¸…æ•Œäººçš„è£…å¤‡ç»†èŠ‚</li>
</ul>
<h3 data-id="heading-14">ğŸ–¥ï¸ å¦‚ä½•é€‰æ‹©åˆé€‚çš„åˆ†è¾¨ç‡ï¼Ÿ</h3>
<p>å¾ˆå¤šäººçº ç»“ï¼šåˆ°åº•è¯¥ä¹°1080Pã€2Kè¿˜æ˜¯4Kæ˜¾ç¤ºå™¨ï¼Ÿ</p>
<h4 data-id="heading-15">é€‰æ‹©å»ºè®®ï¼š</h4>
<ol>
<li><strong>å±å¹•å°ºå¯¸</strong>ï¼š24è‹±å¯¸ä»¥ä¸‹é€‰1080Pï¼Œ27è‹±å¯¸é€‰2Kï¼Œ32è‹±å¯¸ä»¥ä¸Šé€‰4K</li>
<li><strong>ä½¿ç”¨åœºæ™¯</strong>ï¼šåŠå…¬é€‰1080P/2Kï¼Œæ¸¸æˆé€‰2K/4Kï¼Œè®¾è®¡é€‰4K</li>
<li><strong>ç”µè„‘æ€§èƒ½</strong>ï¼šæ˜¾å¡è‡³å°‘è¦GTX 1660æ‰èƒ½æµç•…ç©2Kæ¸¸æˆï¼ŒRTX 3070æ‰èƒ½æµç•…ç©4Kæ¸¸æˆ</li>
<li><strong>é¢„ç®—</strong>ï¼š1080Pæœ€åˆ’ç®—ï¼Œ2Kæ€§ä»·æ¯”æœ€é«˜ï¼Œ4Kæœ€è´µ</li>
</ol>
<h3 data-id="heading-16">âš ï¸ å¸¸è§è¯¯åŒºçº æ­£</h3>
<h4 data-id="heading-17">1. "åˆ†è¾¨ç‡è¶Šé«˜è¶Šå¥½ï¼Ÿ"</h4>
<p>ä¸ä¸€å®šï¼å¦‚æœå±å¹•å¤ªå°ï¼Œé«˜åˆ†è¾¨ç‡ä¼šå¯¼è‡´æ–‡å­—å¤ªå°ï¼Œåè€Œä¼¤çœ¼ç›ã€‚æ¯”å¦‚24è‹±å¯¸æ˜¾ç¤ºå™¨ç”¨4Kï¼Œæ–‡å­—ä¼šå°å¾—åƒèš‚èšã€‚</p>
<h4 data-id="heading-18">2. "åˆ·æ–°ç‡æ¯”åˆ†è¾¨ç‡é‡è¦ï¼Ÿ"</h4>
<p>çœ‹ç”¨é€”ï¼åŠå…¬å’Œçœ‹è§†é¢‘ï¼Œåˆ†è¾¨ç‡æ›´é‡è¦ï¼›ç©æ¸¸æˆï¼Œåˆ·æ–°ç‡æ›´é‡è¦ã€‚</p>
<h4 data-id="heading-19">3. "è‰²åŸŸè¶Šå¹¿è¶Šå¥½ï¼Ÿ"</h4>
<p>ä¸ä¸€å®šï¼å¦‚æœä¸åšä¸“ä¸šè®¾è®¡ï¼Œå¹¿è‰²åŸŸå¯èƒ½å¯¼è‡´é¢œè‰²è¿‡é¥±å’Œï¼Œåè€Œä¸èˆ’æœã€‚</p>
<h3 data-id="heading-20">ğŸ”® æœªæ¥å±•æœ›ï¼šæ˜¾ç¤ºå™¨çš„å‘å±•è¶‹åŠ¿</h3>
<h4 data-id="heading-21">1. ğŸš€ 8Kæ™®åŠ</h4>
<p>2025å¹´ï¼Œ8Kæ˜¾ç¤ºå™¨ä»·æ ¼é¢„è®¡ä¼šé™åˆ°3000å…ƒå·¦å³ï¼Œå¼€å§‹è¿›å…¥æ™®é€šå®¶åº­ã€‚</p>
<h4 data-id="heading-22">2. ğŸ’¡ HDRæŠ€æœ¯</h4>
<p>HDRï¼ˆé«˜åŠ¨æ€èŒƒå›´ï¼‰èƒ½è®©ç”»é¢çš„æ˜æš—å¯¹æ¯”æ›´å¼ºçƒˆï¼Œæš—éƒ¨ç»†èŠ‚æ›´æ¸…æ™°ï¼Œäº®éƒ¨æ›´åˆºçœ¼ï¼ˆè¤’ä¹‰ï¼‰ã€‚</p>
<h4 data-id="heading-23">3. ğŸ–ï¸ è§¦æ§æ˜¾ç¤ºå™¨</h4>
<p>è§¦æ§åŠŸèƒ½ä¼šæˆä¸ºæ˜¾ç¤ºå™¨çš„æ ‡é…ï¼Œé€‚åˆç»˜ç”»ã€æ•™è‚²ç­‰åœºæ™¯ã€‚</p>
<h4 data-id="heading-24">4. ğŸ§ é›†æˆéŸ³å“</h4>
<p>æ˜¾ç¤ºå™¨ä¼šé›†æˆæ›´å¥½çš„éŸ³å“ï¼Œç”šè‡³æ”¯æŒ3DéŸ³æ•ˆï¼Œå‡å°‘æ¡Œé¢æ‚ä¹±ã€‚</p>
<h3 data-id="heading-25">ğŸ“ äº’åŠ¨å°æµ‹éªŒï¼šä½ ç­”å¯¹äº†å—ï¼Ÿ</h3>



































<table><thead><tr><th>é—®é¢˜</th><th>ç­”æ¡ˆ</th><th>ä½ ç­”å¯¹äº†å—ï¼Ÿ</th></tr></thead><tbody><tr><td>4Kåˆ†è¾¨ç‡çš„åƒç´ æ•°é‡æ˜¯1080Pçš„å¤šå°‘å€ï¼Ÿ</td><td>4å€</td><td>âœ…/âŒ</td></tr><tr><td>äººçœ¼çš„åˆ†è¾¨æé™å¤§çº¦æ˜¯å¤šå°‘PPIï¼Ÿ</td><td>150PPI</td><td>âœ…/âŒ</td></tr><tr><td>144Hzæ¯”60Hzæµç•…åº¦æå‡å¤šå°‘ï¼Ÿ</td><td>140%</td><td>âœ…/âŒ</td></tr><tr><td>DCI-P3æ˜¯å“ªç§è‰²åŸŸæ ‡å‡†ï¼Ÿ</td><td>ç”µå½±è‰²åŸŸ</td><td>âœ…/âŒ</td></tr><tr><td>8Kæ˜¾ç¤ºå™¨çš„åƒç´ æ•°é‡å¤§çº¦æ˜¯å¤šå°‘ï¼Ÿ</td><td>3300ä¸‡</td><td>âœ…/âŒ</td></tr></tbody></table>
<h3 data-id="heading-26">ğŸ¯ ç»“è¯­ï¼šåˆ†è¾¨ç‡çš„é©å‘½</h3>
<p>æ˜¾ç¤ºå™¨åˆ†è¾¨ç‡çš„å‘å±•ï¼Œå°±æ˜¯äººç±»è¿½æ±‚æ¸…æ™°ç”»é¢çš„å†å²ã€‚ä»æ¨¡ç³Šçš„VGAåˆ°æ¸…æ™°çš„4Kï¼Œå†åˆ°æè‡´çš„8Kï¼Œæ¯ä¸€æ¬¡è¿›æ­¥éƒ½è®©æˆ‘ä»¬çœ‹åˆ°æ›´çœŸå®çš„ä¸–ç•Œã€‚</p>
<p>ä¸‹æ¬¡ä½¿ç”¨æ˜¾ç¤ºå™¨æ—¶ï¼Œä¸å¦¨çœ‹çœ‹å®ƒçš„åˆ†è¾¨ç‡ï¼Œæƒ³æƒ³èƒŒåçš„åƒç´ æ•…äº‹ã€‚åˆ†è¾¨ç‡è¶Šé«˜ï¼Œçœ‹åˆ°çš„ä¸–ç•Œè¶Šæ¸…æ™°ï¼</p>
<hr/>
<h3 data-id="heading-27">ğŸ’¬ äº’åŠ¨è¯é¢˜</h3>
<ol>
<li>ä½ ç°åœ¨ç”¨çš„æ˜¯ä»€ä¹ˆåˆ†è¾¨ç‡çš„æ˜¾ç¤ºå™¨ï¼Ÿæ»¡æ„å—ï¼Ÿ</li>
<li>ä½ è§‰å¾—4Kæ˜¾ç¤ºå™¨çœŸçš„æ¯”1080Pæ¸…æ™°å¾ˆå¤šå—ï¼Ÿ</li>
<li>ä½ ä¼šä¸ºäº†æ¸¸æˆä¹°144Hzä»¥ä¸Šçš„æ˜¾ç¤ºå™¨å—ï¼Ÿ</li>
</ol>
<p>å¿«æ¥è¯„è®ºåŒºèŠèŠä½ çš„æƒ³æ³•ï¼ğŸ’¬ ç‚¹èµæ”¶è—ä¸è¿·è·¯ï¼Œå’±ä»¬ä¸‹æœŸç»§ç»­æ¢ç´¢è®¡ç®—æœºçš„"åä¸‡ä¸ªä¸ºä»€ä¹ˆ"ï¼ğŸ‰</p>
<hr/>
<p><strong>å…³æ³¨æˆ‘</strong>ï¼Œä¸‹æœŸå¸¦ä½ è§£é”æ›´å¤šè®¡ç®—æœºçš„"å¥‡è‘©å†·çŸ¥è¯†"ï¼ğŸ¤“</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å…³äºViteåå°é¡¹ç›®çš„æ‰“åŒ…ä¼˜åŒ–(é¦–å±åŠ è½½)]]></title>    <link>https://juejin.cn/post/7584834746061586466</link>    <guid>https://juejin.cn/post/7584834746061586466</guid>    <pubDate>2025-12-18T06:58:30.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7584834746061586466" data-draft-id="7584780417103380520" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å…³äºViteåå°é¡¹ç›®çš„æ‰“åŒ…ä¼˜åŒ–(é¦–å±åŠ è½½)"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-18T06:58:30.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ™´è½¬å¤šäº‘543"/> <meta itemprop="url" content="https://juejin.cn/user/1449619894573673"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å…³äºViteåå°é¡¹ç›®çš„æ‰“åŒ…ä¼˜åŒ–(é¦–å±åŠ è½½)
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1449619894573673/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ™´è½¬å¤šäº‘543
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-18T06:58:30.000Z" title="Thu Dec 18 2025 06:58:30 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-18
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>ä¸»è¦åº”è¯¥æ˜¯åå°ä½¿ç”¨ åå°åŠŸèƒ½å¤šäº†ä½“ç§¯ä¼šè¶Šæ¥è¶Šå¤§</p>
<h2 data-id="heading-1">ä»£ç å±‚é¢çš„ä¼˜åŒ–</h2>
<ul>
<li>åˆç†ä½¿ç”¨treeShaking</li>
</ul>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// è¿™æ ·å¯ä»¥åˆ©ç”¨treeshaking</span>
<span class="hljs-keyword">import</span> { someField } <span class="hljs-keyword">from</span> <span class="hljs-string">'xxx.json'</span>;

<span class="hljs-comment">// è¿™æ ·æ˜¯ä¸ä¼šæœ‰treeShaking</span>
<span class="hljs-keyword">import</span> allData <span class="hljs-keyword">from</span> <span class="hljs-string">'xxx.json'</span>;
allData.<span class="hljs-property">someField</span>;
</code></pre>
<ul>
<li>åŠ¨æ€import(æ‡’åŠ è½½)</li>
</ul>

<pre><code class="hljs language-scss" lang="scss">() =&gt; <span class="hljs-built_in">import</span>('/xxxxx.vue')
<span class="hljs-built_in">defineAsyncComponment</span>(xxxx)

<span class="hljs-comment">//react</span>
React<span class="hljs-selector-class">.lazy</span>(() =&gt; <span class="hljs-built_in">import</span>('xxxx.tsx'))
</code></pre>
<p>ä¸å¤šèµ˜è¿°  è¿™æ ·ä¼šå•ç‹¬æ‰“åŒ…å‡ºæ¥ä¸€ä¸ªæ–‡ä»¶</p>
<h2 data-id="heading-2">buildé…ç½®</h2>
<p>è¿™é‡Œä½¿ç”¨çœŸå®é¡¹ç›®æ¥é…ç½®  <a href="https://link.juejin.cn?target=https%3A%2F%2Fgitee.com%2Fdapppp%2Fruoyi-plus-vben5" target="_blank" title="https://gitee.com/dapppp/ruoyi-plus-vben5" ref="nofollow noopener noreferrer">gitee.com/dapppp/ruoyâ€¦</a></p>
<p>é¦–å…ˆæ˜¯gzip è¿™ä¸ªè‚¯å®šè¦åŠ </p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// æ”¯æŒgzipå‹ç¼©</span>
<span class="hljs-keyword">import</span> viteCompression <span class="hljs-keyword">from</span> <span class="hljs-string">'vite-plugin-compression'</span>;

<span class="hljs-title function_">viteCompression</span>({
  <span class="hljs-attr">verbose</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">disable</span>: <span class="hljs-literal">false</span>,
  <span class="hljs-attr">threshold</span>: <span class="hljs-number">10240</span>,
  <span class="hljs-attr">algorithm</span>: <span class="hljs-string">'gzip'</span>,
  <span class="hljs-attr">ext</span>: <span class="hljs-string">'.gz'</span>,
}),
</code></pre>
<p>å‹ç¼©å®Œä½“ç§¯è¿˜æ˜¯æŒºå¯è§‚çš„</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7e9c6b8bf5ee47b2b686811be96fb34e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm06L2s5aSa5LqRNTQz:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766645909&amp;x-signature=Q4J%2F6pa0hDUtHsqUx3v4SLQ1dPU%3D" alt="image.png" loading="lazy"/></p>
<p>ç„¶åæ˜¯rollupOptionsé…ç½®äº†</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-attr">output</span>: {
  <span class="hljs-attr">assetFileNames</span>: <span class="hljs-string">'[ext]/[name]-[hash].[ext]'</span>,
  <span class="hljs-attr">chunkFileNames</span>: <span class="hljs-string">'js/[name]-[hash].js'</span>,
  <span class="hljs-attr">entryFileNames</span>: <span class="hljs-string">'jse/index-[name]-[hash].js'</span>,
},
</code></pre>
<p>è¿™é‡Œå…¶å®å¯¹ä½“ç§¯æ²¡æœ‰å½±å“ åªæ˜¯ä¼šæ‰“åŒ…åˆ°å›ºå®šçš„ç›®å½•</p>
<p>ä½¿ç”¨ <strong>åœç”¨ç¼“å­˜+4G</strong>  æ¥æ¨¡æ‹Ÿçº¿ä¸Šç¬¬ä¸€æ¬¡æ‰“å¼€</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ef25984e12dc455cb975af6c5ac77030~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm06L2s5aSa5LqRNTQz:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766645909&amp;x-signature=fWE9kStgYU9MqKtE%2B8a%2Fio4iSDc%3D" alt="image.png" loading="lazy"/></p>
<p><code>è¯·æ±‚48  é¦–å±2.6Mèµ„æº   4.4S</code></p>
<p>è¿˜æœ‰ä¼˜åŒ–ç©ºé—´å—  é€šè¿‡å¯¹ç½‘ç»œè¯·æ±‚çš„åˆ†æ  å‘ç°<code>æœ‰å¾ˆå¤šç¢ç‰‡æ–‡ä»¶</code></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dfd8d8956b6947faa274b7850049722e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm06L2s5aSa5LqRNTQz:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766645909&amp;x-signature=t1JiniOnG5h1UYFtIN53nqkMOGU%3D" alt="image.png" loading="lazy"/></p>
<p>æµè§ˆå™¨ä¸å¯èƒ½ä¸€æ¬¡è·å– è€Œä¸”æ¨¡å—ä¹‹é—´ä¹Ÿæœ‰ä¾èµ–å…³ç³»  è¿™äº›ç¢ç‰‡æ–‡ä»¶å ç”¨äº†è¿æ¥æ•° æ€ä¹ˆä¼˜åŒ–å‘¢</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-attr">output</span>: {
  <span class="hljs-attr">assetFileNames</span>: <span class="hljs-string">'[ext]/[name]-[hash].[ext]'</span>,
  <span class="hljs-attr">chunkFileNames</span>: <span class="hljs-string">'js/[name]-[hash].js'</span>,
  <span class="hljs-attr">entryFileNames</span>: <span class="hljs-string">'jse/index-[name]-[hash].js'</span>,
  <span class="hljs-attr">experimentalMinChunkSize</span>: <span class="hljs-number">20</span> * <span class="hljs-number">1024</span>,
},
</code></pre>
<p>ä½¿ç”¨è¿™ä¸ªé…ç½®<code>experimentalMinChunkSize</code>   å°½å¯èƒ½å°†ç¢ç‰‡æ–‡ä»¶æ‰“åŒ…åœ¨ä¸€èµ·   <a href="https://link.juejin.cn?target=https%3A%2F%2Fcn.rollupjs.org%2Fconfiguration-options%2F%23output-experimentalminchunksize" target="_blank" title="https://cn.rollupjs.org/configuration-options/#output-experimentalminchunksize" ref="nofollow noopener noreferrer">rollup - experimentalMinChunkSize</a></p>
<p>ä¸ºä»€ä¹ˆè¯´æ˜¯å°½å¯èƒ½å‘¢  å› ä¸ºæ–‡æ¡£æŒ‡å‡º åŒ…å«å‰¯ä½œç”¨æ¨¡å—æ˜¯ä¸ä¼šæ‰“åŒ…åœ¨ä¸€èµ·çš„  åƒä¸Šé¢çš„åŠ¨æ€importæ–‡ä»¶å°½ç®¡æ–‡ä»¶å¾ˆå°‘  ä¹Ÿä¸ä¼šè¢«æ‰“åŒ…</p>
<p>å†æ¬¡æ‰“åŒ…çœ‹çœ‹</p>
<p><code>è¯·æ±‚æ•° 48 - 30</code></p>
<p><code>èµ„æº  2.6 - 2.8 (å› ä¸ºä¸€äº›é¢å¤–çš„ä¹Ÿæ‰“åŒ…è¿›æ¥äº†)</code></p>
<p><code>åŠ è½½æ—¶é—´  4.4S - 2.5S</code>  èµ·é£!</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5ec7279ea8db42079f0189063cdc0c0b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm06L2s5aSa5LqRNTQz:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766645909&amp;x-signature=ipduHsXIBv41QqdXy1Od7V%2BVUJ4%3D" alt="image.png" loading="lazy"/></p>
<p>å¯ä»¥çœ‹åˆ°è™½ç„¶ä½“ç§¯å¢åŠ äº†  åŠ è½½é€Ÿåº¦è¿˜æ›´å¿«äº†</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[nginxéƒ¨ç½²è¸©å‘]]></title>    <link>https://juejin.cn/post/7584807992030707754</link>    <guid>https://juejin.cn/post/7584807992030707754</guid>    <pubDate>2025-12-18T07:06:20.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7584807992030707754" data-draft-id="7584724634173947967" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="nginxéƒ¨ç½²è¸©å‘"/> <meta itemprop="keywords" content="åç«¯,å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-18T07:06:20.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="zue"/> <meta itemprop="url" content="https://juejin.cn/user/3773179638323342"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            nginxéƒ¨ç½²è¸©å‘
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3773179638323342/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    zue
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-18T07:06:20.000Z" title="Thu Dec 18 2025 07:06:20 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-18
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">éƒ¨ç½²éœ€æ±‚</h2>
<ol>
<li>ï¼ˆIPä¸º10ï¼‰å†…ç½‘å‰ç«¯åº”ç”¨è¢«ä»£ç†åˆ°å¦å¤–ä¸€å°è·³æ¿æœºï¼ˆIPä¸º20ï¼‰ã€‚æœ¬åœ°æµè§ˆå™¨IPä¸º30</li>
<li>20è·³æ¿æœºç¦æ­¢è®¿é—®æ ¹ç›®å½•ï¼Œå³ç¦/</li>
<li>å‰ç«¯è·¯ç”±è·¯å¾„ä¸ºqttï¼Œèµ„æºè·¯å¾„ä¹Ÿä¸ºqtt</li>
</ol>
<h2 data-id="heading-1">é—®é¢˜</h2>
<p>1.èµ„æºä¹Ÿè¢«ç¦ç”¨
2.è®¿é—®x.x.x.20/qtt?token=xxxã€‚æ¥æ”¶ä¸åˆ°tokenå‚æ•°ï¼Œå‰ç«¯ç›´æ¥è·³è½¬åˆ°é¦–é¡µã€‚</p>
<pre><code class="hljs language-ini" lang="ini">//20æœåŠ¡å™¨çš„nginxé…ç½®å¦‚ä¸‹ï¼š
upstream qtt {
    ip hash<span class="hljs-comment">;</span>
    keepalive 100<span class="hljs-comment">;</span>
    keepalive timeout 300s<span class="hljs-comment">;</span>
    server x.x.x.10<span class="hljs-comment">;</span>
}
server {
    listen 80<span class="hljs-comment">;</span>
    server name localhost<span class="hljs-comment">;</span>
    server tokens off<span class="hljs-comment">;</span>
    port in redirect off<span class="hljs-comment">;</span>
 
    location /qtt {
        proxy_set header host $host<span class="hljs-comment">;</span>
        proxy_set header X-forwarded-for $proxy add x forwarded for<span class="hljs-comment">;</span>
        proxy set header X-real-ip $remote addr<span class="hljs-comment">;</span>
        proxy_pass http://qtt<span class="hljs-comment">;</span>
        proxy_connect timeout 308s<span class="hljs-comment">;</span>
        proxy_read timeout 300sï¼›
    }
  }
  //10æœåŠ¡å™¨nignxé…ç½®å¦‚ä¸‹
    server {
        listen 80<span class="hljs-comment">;</span>
        server_name _<span class="hljs-comment">;</span>
         
       
       location / {
            root /usr/local/web/dist-ai<span class="hljs-comment">;</span>
            index index.html<span class="hljs-comment">;</span>
            try_files $uri $uri/ /qtt/index.html<span class="hljs-comment">;</span>
       } 
       
 
    }

</code></pre>
<h2 data-id="heading-2">è§£å†³é—®é¢˜</h2>
<p>1.å‰ç«¯è®¾ç½®baseè·¯å¾„qttï¼Œæ–°å»ºqttæ–‡ä»¶ï¼Œå°†assetsç­‰æ–‡ä»¶å¤åˆ¶åˆ°qttæ–‡ä»¶ä¸­ã€‚</p>
<p>2.æ ¹æ®nignxæ—¥å¿—æ˜¾ç¤ºè®¿é—®x.x.x.20/qtt?token=xxxæ—¶</p>
<pre><code class="hljs language-bash" lang="bash">è·¯å¾„è¢«é‡å®šå‘ä¸ºx.x.x.20/qtt/?token=xxxã€‚
å› ä¸ºtry_files  <span class="hljs-variable">$uri</span>/ä¼šåˆ¤æ–­x.x.x.20/qtt?token=xxxæ˜¯å¦æ–‡ä»¶å¦‚æœæ˜¯æ–‡ä»¶å¤¹å°†ä¼šå¢åŠ /æŒ‡å‘qttæ–‡ä»¶ã€‚
è®¾ç½®try_files <span class="hljs-variable">$uri</span> <span class="hljs-variable">$uri</span>/index.html /qtt/index.html; æ­¤æ—¶try_files  <span class="hljs-variable">$uri</span>/index.html å› ä¸ºqqt/index.htmlå­˜åœ¨ï¼Œç›´æ¥è¿”å›index.html
</code></pre>
<pre><code class="hljs language-bash" lang="bash">//è®¿é—®æµç¨‹
è®¿é—®ï¼šx.x.x.10/qtt
â†“
Nginx è¿”å› /qtt/index.html
â†“
æµè§ˆå™¨åŠ è½½ index.htmlï¼Œè¿è¡Œå‰ç«¯ JavaScript
â†“
å‰ç«¯è·¯ç”±æ£€æµ‹åˆ° URL ä¸­çš„ `/about`
â†“
**è‡ªåŠ¨åˆ‡æ¢åˆ°å…³äºé¡µé¢**
</code></pre>
<p>å…¶å®å°±æ˜¯qttè¢«nginxå½“ç›®å½•è·¯å¾„äº§ç”Ÿäº†é‡å®šå‘ï¼Œå•é¡µåº”ç”¨å› ä¸ºé‡å®šå‘åè·¯ç”±ä¸º/qtt/ï¼Ÿtoken=xxï¼Œæ‰¾ä¸åˆ°è·¯ç”±,å‰ç«¯ç›´æ¥è·³è½¬åˆ°/ï¼Œæ‰€æœ‰æ‰ä¼šå‡ºç°å‚æ•°ä¸¢å¤±çš„ç°è±¡ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[A2UIï¼šè®© AI Agent è‡ªä¸»æ„å»ºç”¨æˆ·ç•Œé¢çš„æ–°èŒƒå¼]]></title>    <link>https://juejin.cn/post/7584817405228285993</link>    <guid>https://juejin.cn/post/7584817405228285993</guid>    <pubDate>2025-12-18T07:01:54.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7584817405228285993" data-draft-id="7584810656382795785" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="A2UIï¼šè®© AI Agent è‡ªä¸»æ„å»ºç”¨æˆ·ç•Œé¢çš„æ–°èŒƒå¼"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½,AIGC,å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-18T07:01:54.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å‡ºæ¥å§çš®å¡ä¸˜"/> <meta itemprop="url" content="https://juejin.cn/user/4212984288647271"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            A2UIï¼šè®© AI Agent è‡ªä¸»æ„å»ºç”¨æˆ·ç•Œé¢çš„æ–°èŒƒå¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4212984288647271/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å‡ºæ¥å§çš®å¡ä¸˜
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-18T07:01:54.000Z" title="Thu Dec 18 2025 07:01:54 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-18
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    3
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»13åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>ä¸€å¥è¯å®šä¹‰ï¼šA2UIï¼ˆAgent-to-User Interfaceï¼‰æ˜¯ä¸€ä¸ªå¼€æ”¾åè®®ï¼Œå…è®¸ AI Agent é€šè¿‡ç»“æ„åŒ–æ•°æ®æè¿°äº¤äº’æ„å›¾ï¼Œç”±å‰ç«¯æ¡†æ¶åŠ¨æ€æ¸²æŸ“ UIï¼Œå®ç°â€œAI é©±åŠ¨ç•Œé¢â€ã€‚</p>
</blockquote>
<h2 data-id="heading-0">ä¸€ã€A2UI æ˜¯ä»€ä¹ˆ</h2>
<p>A2UI ä¸æ˜¯ UI æ¡†æ¶ï¼Œè€Œæ˜¯è°·æ­Œäº 2025 å¹´ 12 æœˆæ¨å‡ºä¸€å¥—å£°æ˜å¼æ¥å£åè®®ã€‚<a href="https://link.juejin.cn?target=https%3A%2F%2Fa2ui.org%2F" target="_blank" title="https://a2ui.org/" ref="nofollow noopener noreferrer">a2ui.org/</a></p>
<p>AI Agent åœ¨æ‰§è¡Œä»»åŠ¡æ—¶ï¼Œå¯ç”Ÿæˆç¬¦åˆ A2UI Schema çš„ JSON å¯¹è±¡ï¼Œæè¿°å½“å‰éœ€è¦ç”¨æˆ·çœ‹åˆ°ä»€ä¹ˆã€è¾“å…¥ä»€ä¹ˆã€æ“ä½œä»€ä¹ˆã€‚å‰ç«¯è¿è¡Œæ—¶ï¼ˆå¦‚ Web Appï¼‰æ¥æ”¶è¯¥ç»“æ„å¹¶åŠ¨æ€æ¸²æŸ“æˆçœŸå® UIã€‚</p>
<p>è¿™ç±»ä¼¼äºâ€œAI ç‰ˆæœ¬çš„ Virtual DOMâ€â€”â€”Agent å£°æ˜æ„å›¾ï¼Œç³»ç»Ÿè´Ÿè´£å®ç°ã€‚</p>
<p>ä»¥ä¸‹æ˜¯ A2UI æ¸²æŸ“å¡ç‰‡çš„ç¤ºä¾‹ï¼Œå±•ç¤ºäº† A2UI å¯ä»¥å®ç°çš„å„ç§ UI ç»„åˆã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cd2e52afb4754b45838ed7748832e023~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Ye65p2l5ZCn55qu5Y2h5LiY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766646623&amp;x-signature=gmVyTpnQFpcbdCVnbR0vuEjbAvM%3D" alt="" loading="lazy"/></p>
<p>åœ¨çº¿æ•ˆæœé¢„è§ˆï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fa2ui-editor.ag-ui.com%2F" target="_blank" title="https://a2ui-editor.ag-ui.com/" ref="nofollow noopener noreferrer">a2ui-editor.ag-ui.com/</a></p>
<h2 data-id="heading-1">äºŒã€A2UI è§£å†³ä»€ä¹ˆé—®é¢˜</h2>
<p>æƒ³è±¡ä¸€ä¸‹ï¼Œæœ‰ä¸€ä¸ªAgentå¯ä»¥å¸®åŠ©ä½ é¢„è®¢é¤å…åº§ä½ã€‚å¦‚æœåªè¿›è¡Œæ–‡å­—äº¤æµï¼Œå¯èƒ½ä¼šå‡ºç°ç¬¨æ‹™çš„æ¥å›æ²Ÿé€šï¼š</p>
<p><strong>ç”¨æˆ·ï¼šï¼ˆ</strong> æ­£åœ¨è¾“å…¥ï¼‰â€œé¢„è®¢ä¸€å¼ ä¸¤äººæ¡Œã€‚â€</p>
<p><strong>Agentï¼š</strong> â€œå¥½çš„ï¼Œå“ªä¸€å¤©ï¼Ÿâ€</p>
<p><strong>ç”¨æˆ·ï¼šï¼ˆ</strong> æ­£åœ¨è¾“å…¥ï¼‰â€œæ˜å¤©ã€‚â€</p>
<p><strong>Agentï¼š</strong> â€œå‡ ç‚¹ï¼Ÿâ€</p>
<p><strong>ç”¨æˆ·ï¼šï¼ˆ</strong> è¾“å…¥ï¼‰â€œå¤§æ¦‚7ç‚¹â€</p>
<p><strong>Agentï¼š</strong> â€œæˆ‘ä»¬é‚£æ—¶æ²¡æœ‰ç©ºæˆ¿äº†ï¼Œè¿˜æœ‰å…¶ä»–æ—¶é—´å—ï¼Ÿâ€</p>
<p><strong>ç”¨æˆ·ï¼šï¼ˆ</strong> æ­£åœ¨è¾“å…¥ï¼‰â€œä½ ä»¬ä»€ä¹ˆæ—¶å€™æœ‰é¢„è®¢ï¼Ÿâ€</p>
<p><strong>Agentï¼š</strong> â€œæˆ‘ä»¬æœ‰ 5:00ã€5:30ã€6:00ã€8:30ã€9:00ã€9:30 å’Œ 10:00 çš„ç©ºä½ï¼Œè¿™äº›æ—¶é—´æ‚¨æ–¹ä¾¿å—ï¼Ÿâ€</p>
<p>è¿™å¯èƒ½æ—¢ç¼“æ…¢åˆä½æ•ˆã€‚æ›´å¥½çš„ä½“éªŒæ˜¯è®©<strong>Agentå¿«é€Ÿç”Ÿæˆæˆ–ä½¿ç”¨</strong>åŒ…å«æ—¥æœŸé€‰æ‹©å™¨ã€æ—¶é—´é€‰æ‹©å™¨å’Œæäº¤æŒ‰é’®çš„ç®€å•è¡¨å•ã€‚å€ŸåŠ© A2UIï¼ŒLLM å¯ä»¥ä»ç»„ä»¶åº“ä¸­æ„å»ºå®šåˆ¶çš„ç”¨æˆ·ç•Œé¢ï¼Œä»è€Œä¸ºå½“å‰ä»»åŠ¡æä¾›ç¾è§‚ã€æ˜“ç”¨ä¸”å›¾å½¢åŒ–çš„ç•Œé¢ã€‚</p>
<p>ä¾‹å¦‚ï¼Œé™¤äº†ä¸Šè¿°åŸºäºæ–‡æœ¬çš„æ¥å›èŠå¤©ä¹‹å¤–ï¼Œæ‚¨è¿˜å¯ä»¥ä½¿ç”¨ A2UI æ¥æ„å»ºæ­¤é¢„è®¢ç•Œé¢ã€‚ä¸‹å›¾å±•ç¤ºäº† A2UI å‘ˆç°çš„é¤å…é¢„è®¢ç•Œé¢çš„ä¸€ç§å¯èƒ½æ•ˆæœï¼ŒA2UI çš„è®¾è®¡èµ‹äºˆå‰ç«¯åº”ç”¨ç¨‹åºå¯¹æ ·å¼çš„é«˜åº¦æ§åˆ¶æƒï¼Œå› æ­¤è¿˜æœ‰è®¸å¤šå…¶ä»–å¯èƒ½æ€§ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8c00ba77cce6462f9943a30d2232243a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Ye65p2l5ZCn55qu5Y2h5LiY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766646623&amp;x-signature=OQ5SuQLkAExqixlj2%2FCv8Apu5fE%3D" alt="" loading="lazy"/></p>
<p>å½“å‰ AI åº”ç”¨çš„äº¤äº’ç“¶é¢ˆä¸»è¦é›†ä¸­åœ¨ â€œæ•ˆç‡ä½â€ å’Œ â€œä¸å®‰å…¨â€ ä¸¤å¤§å±‚é¢ï¼ŒA2UI çš„è®¾è®¡æ°å¥½é’ˆå¯¹æ€§ç ´å±€ï¼š</p>






























<table><thead><tr><th>ç—›ç‚¹åœºæ™¯</th><th>ä¼ ç»Ÿæ–‡æœ¬äº¤äº’æ¨¡å¼</th><th>A2UI è§£å†³æ–¹æ¡ˆ</th></tr></thead><tbody><tr><td>ä¿¡æ¯é‡‡é›†æ•ˆç‡ä½</td><td>è®¢åº§éœ€å¤šè½®é—®ç­”ï¼ˆâ€œå‡ ä½ï¼Ÿå‡ ç‚¹ï¼Ÿå¿Œå£ï¼Ÿâ€ï¼‰</td><td>ç›´æ¥ç”Ÿæˆå«äººæ•°é€‰æ‹©å™¨ã€æ—¥å†ã€ä¸‹æ‹‰æ¡†çš„è¡¨å•ï¼Œç”¨æˆ·ä¸€é”®ç¡®è®¤</td></tr><tr><td>ç•Œé¢å®‰å…¨æ€§å·®</td><td>AI ç”Ÿæˆ HTML å¯èƒ½åŒ…å«æ¶æ„ä»£ç ï¼Œå­˜åœ¨æ³¨å…¥é£é™©</td><td>å®¢æˆ·ç«¯ä»…ç”¨é¢„æ‰¹å‡†ç»„ä»¶åº“æ¸²æŸ“ï¼ŒAI æ— æ³•æ§åˆ¶åƒç´ æˆ–æ‰§è¡Œä»£ç </td></tr><tr><td>è·¨ç«¯ä½“éªŒå‰²è£‚</td><td>ä¸º Webã€iOSã€Android åˆ†åˆ«å¼€å‘ç•Œé¢ï¼Œæˆæœ¬é«˜</td><td>ä¸€å¥— A2UI æè¿°è‡ªåŠ¨é€‚é…å¤šç«¯åŸç”Ÿç»„ä»¶ï¼Œæ— éœ€é‡å¤å¼€å‘</td></tr><tr><td>ç­‰å¾…ä½“éªŒå·®</td><td>éœ€ç­‰å¾… AI ç”Ÿæˆå®Œæ•´å“åº”åæ‰æ˜¾ç¤ºç•Œé¢</td><td>æµå¼è¾“å‡ºç•Œé¢ç‰‡æ®µï¼Œå®æ—¶æ¸²æŸ“ï¼Œå‡å°‘ç­‰å¾…ç„¦è™‘</td></tr></tbody></table>
<h2 data-id="heading-2">ä¸‰ã€A2UI æ ¸å¿ƒæ¦‚å¿µ</h2>
<h3 data-id="heading-3">ç»„ä»¶ç»“æ„ï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fa2ui.org%2Fconcepts%2Fcomponents%2F" target="_blank" title="https://a2ui.org/concepts/components/" ref="nofollow noopener noreferrer">Component Structure</a>ï¼‰</h3>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"id"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"welcome"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"component"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"Text"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
            <span class="hljs-attr">"text"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
                <span class="hljs-attr">"literalString"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Hello"</span>
            <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"usageHint"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"h1"</span>
        <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>æ¯ä¸ªç»„ä»¶éƒ½å…·æœ‰ï¼š</p>
<ol>
<li>
<p><strong>ID</strong>ï¼šå”¯ä¸€æ ‡è¯†ç¬¦ï¼ˆ<code>"root"</code>ï¼‰</p>
</li>
<li>
<p><strong>ç±»å‹</strong>ï¼šç»„ä»¶ç±»å‹ï¼ˆ<code>Text</code>ï¼Œ<code>Button</code>ï¼‰</p>
</li>
<li>
<p><strong>å±æ€§</strong>ï¼šç‰¹å®šäºè¯¥ç±»å‹çš„é…ç½®</p>
</li>
</ol>
<p><strong>ç»„ä»¶æ•°æ®å®šä¹‰æœ€ä½³å®è·µï¼š</strong> ä½¿ç”¨è¯­ä¹‰æç¤ºï¼Œè€Œéè§†è§‰å±æ€§ã€‚åº”è¯¥æä¾›è¯­ä¹‰æç¤ºï¼ˆ<code>usageHint</code>ï¼‰ï¼Œè€Œä¸æ˜¯è§†è§‰æ ·å¼ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-comment">// âœ… Good: Semantic hint</span>
<span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"component"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"Text"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"text"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-attr">"literalString"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Welcome"</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"usageHint"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"h1"</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>

<span class="hljs-comment">// âŒ Bad: Visual properties (not supported)</span>
<span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"component"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"Text"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"text"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-attr">"literalString"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Welcome"</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"fontSize"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">24</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"color"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"#FF0000"</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h3 data-id="heading-4">æ¶ˆæ¯ç±»å‹ï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fa2ui.org%2Freference%2Fmessages%2F" target="_blank" title="https://a2ui.org/reference/messages/" ref="nofollow noopener noreferrer">Message Types</a>ï¼‰</h3>
<p><strong>æœåŠ¡å™¨â†’å®¢æˆ·ç«¯æ¶ˆæ¯</strong></p>
<ul>
<li><strong>surfaceUpdate</strong>ï¼šå®šä¹‰æˆ–ä¿®æ”¹æŒ‡å®š Surface ä¸­çš„ UI ç»„ä»¶ï¼Œæ˜¯æ„å»º UI ç»“æ„çš„æ ¸å¿ƒæ¶ˆæ¯ã€‚</li>
<li><strong>dataModelUpdate</strong>ï¼šä¿®æ”¹æŒ‡å®š Surface çš„æ•°æ®æ¨¡å‹ï¼Œç»„ä»¶é€šè¿‡æ•°æ®ç»‘å®šè‡ªåŠ¨åŒæ­¥æ›´æ–°ï¼Œæ— éœ€é‡å‘ UI ç»“æ„ã€‚</li>
<li><strong>beginRendering</strong>ï¼šå‘å®¢æˆ·ç«¯å‘é€æ¸²æŸ“ä¿¡å·ï¼Œå‘ŠçŸ¥å·²æ¥æ”¶è¶³å¤Ÿåˆå§‹åŒ–ä¿¡æ¯ï¼Œå¯å¯åŠ¨æŒ‡å®š Surface çš„ UI æ¸²æŸ“ã€‚</li>
<li><strong>deleteSurface</strong>ï¼šç§»é™¤æŒ‡å®š Surface åŠå…¶æ‰€æœ‰ç»„ä»¶ã€æ•°æ®æ¨¡å‹ï¼Œé€‚ç”¨äºå…³é—­å¼¹çª—ã€é¡µé¢å¯¼èˆªç­‰åœºæ™¯ã€‚</li>
</ul>
<p><strong>å®¢æˆ·ç«¯â†’æœåŠ¡å™¨æ¶ˆæ¯</strong></p>
<ul>
<li><strong>userAction</strong>ï¼šç”¨æˆ·äº¤äº’äº‹ä»¶ï¼ŒåŒ…å«åŠ¨ä½œåç§°ã€<code>surfaceId</code>ã€è§¦å‘ç»„ä»¶ IDã€æ—¶é—´æˆ³å’Œè§£æåçš„ä¸Šä¸‹æ–‡æ•°æ®ã€‚</li>
<li><strong>error</strong>ï¼šå®¢æˆ·ç«¯é”™è¯¯åé¦ˆï¼Œå¯è‡ªå®šä¹‰é”™è¯¯ä¿¡æ¯å†…å®¹ï¼Œç”¨äºæœåŠ¡å™¨è°ƒè¯•ã€‚</li>
</ul>
<p>å®Œæ•´æµç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-perl" lang="perl">{<span class="hljs-string">"surfaceUpdate"</span>: {<span class="hljs-string">"components"</span>: [{<span class="hljs-string">"id"</span>: <span class="hljs-string">"root"</span>, <span class="hljs-string">"component"</span>: {<span class="hljs-string">"Column"</span>: {<span class="hljs-string">"children"</span>: {<span class="hljs-string">"explicitList"</span>: [<span class="hljs-string">"profile_card"</span>]}}}}]}}
{<span class="hljs-string">"surfaceUpdate"</span>: {<span class="hljs-string">"components"</span>: [{<span class="hljs-string">"id"</span>: <span class="hljs-string">"profile_card"</span>, <span class="hljs-string">"component"</span>: {<span class="hljs-string">"Card"</span>: {<span class="hljs-string">"child"</span>: <span class="hljs-string">"card_content"</span>}}}]}}
{<span class="hljs-string">"surfaceUpdate"</span>: {<span class="hljs-string">"components"</span>: [{<span class="hljs-string">"id"</span>: <span class="hljs-string">"card_content"</span>, <span class="hljs-string">"component"</span>: {<span class="hljs-string">"Column"</span>: {<span class="hljs-string">"children"</span>: {<span class="hljs-string">"explicitList"</span>: [<span class="hljs-string">"header_row"</span>, <span class="hljs-string">"bio_text"</span>]}}}}]}}
{<span class="hljs-string">"surfaceUpdate"</span>: {<span class="hljs-string">"components"</span>: [{<span class="hljs-string">"id"</span>: <span class="hljs-string">"header_row"</span>, <span class="hljs-string">"component"</span>: {<span class="hljs-string">"Row"</span>: {<span class="hljs-string">"alignment"</span>: <span class="hljs-string">"center"</span>, <span class="hljs-string">"children"</span>: {<span class="hljs-string">"explicitList"</span>: [<span class="hljs-string">"avatar"</span>, <span class="hljs-string">"name_column"</span>]}}}}]}}
{<span class="hljs-string">"surfaceUpdate"</span>: {<span class="hljs-string">"components"</span>: [{<span class="hljs-string">"id"</span>: <span class="hljs-string">"avatar"</span>, <span class="hljs-string">"component"</span>: {<span class="hljs-string">"Image"</span>: {<span class="hljs-string">"url"</span>: {<span class="hljs-string">"literalString"</span>: <span class="hljs-string">"https://www.example.com/profile.jpg"</span>}}}}]}}
{<span class="hljs-string">"surfaceUpdate"</span>: {<span class="hljs-string">"components"</span>: [{<span class="hljs-string">"id"</span>: <span class="hljs-string">"name_column"</span>, <span class="hljs-string">"component"</span>: {<span class="hljs-string">"Column"</span>: {<span class="hljs-string">"alignment"</span>: <span class="hljs-string">"start"</span>, <span class="hljs-string">"children"</span>: {<span class="hljs-string">"explicitList"</span>: [<span class="hljs-string">"name_text"</span>, <span class="hljs-string">"handle_text"</span>]}}}}]}}
{<span class="hljs-string">"surfaceUpdate"</span>: {<span class="hljs-string">"components"</span>: [{<span class="hljs-string">"id"</span>: <span class="hljs-string">"name_text"</span>, <span class="hljs-string">"component"</span>: {<span class="hljs-string">"Text"</span>: {<span class="hljs-string">"usageHint"</span>: <span class="hljs-string">"h3"</span>, <span class="hljs-string">"text"</span>: {<span class="hljs-string">"literalString"</span>: <span class="hljs-string">"A2A Fan"</span>}}}}]}}
{<span class="hljs-string">"surfaceUpdate"</span>: {<span class="hljs-string">"components"</span>: [{<span class="hljs-string">"id"</span>: <span class="hljs-string">"handle_text"</span>, <span class="hljs-string">"component"</span>: {<span class="hljs-string">"Text"</span>: {<span class="hljs-string">"text"</span>: {<span class="hljs-string">"literalString"</span>: <span class="hljs-string">"@a2a_fan"</span>}}}}]}}
{<span class="hljs-string">"surfaceUpdate"</span>: {<span class="hljs-string">"components"</span>: [{<span class="hljs-string">"id"</span>: <span class="hljs-string">"bio_text"</span>, <span class="hljs-string">"component"</span>: {<span class="hljs-string">"Text"</span>: {<span class="hljs-string">"text"</span>: {<span class="hljs-string">"literalString"</span>: <span class="hljs-string">"Building beautiful apps from a single codebase."</span>}}}}]}}
{<span class="hljs-string">"dataModelUpdate"</span>: {<span class="hljs-string">"contents"</span>: {}}}
{<span class="hljs-string">"beginRendering"</span>: {<span class="hljs-string">"root"</span>: <span class="hljs-string">"root"</span>}}
</code></pre>
<h3 data-id="heading-5">æ•°æ®ç»‘å®šï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fa2ui.org%2Fconcepts%2Fdata-binding%2F" target="_blank" title="https://a2ui.org/concepts/data-binding/" ref="nofollow noopener noreferrer">Data Binding</a>ï¼‰</h3>
<h4 data-id="heading-6">æ•°æ®ç»‘å®šçš„ä¸¤ç§æ–¹å¼</h4>
<ol>
<li>å­—é¢é‡å€¼ï¼ˆé™æ€ç»‘å®šï¼‰</li>
</ol>
<p>ç›´æ¥æŒ‡å®šå›ºå®šå€¼ï¼Œæ— éœ€å…³è”æ•°æ®æ¨¡å‹ï¼Œé€‚ç”¨äºé™æ€å†…å®¹ï¼ˆå¦‚æ ‡é¢˜ã€å›ºå®šæç¤ºæ–‡æœ¬ï¼‰ã€‚ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span><span class="hljs-attr">"id"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"title"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"component"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-attr">"Text"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-attr">"text"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-attr">"literalString"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Welcome"</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">}</span>
</code></pre>
<p>2.  è·¯å¾„å€¼ï¼ˆåŠ¨æ€ç»‘å®šï¼‰</p>
<p>é€šè¿‡ <code>path</code> å…³è”æ•°æ®æ¨¡å‹ä¸­çš„å…·ä½“è·¯å¾„ï¼Œæ•°æ®å˜åŒ–æ—¶ç»„ä»¶è‡ªåŠ¨æ›´æ–°ï¼Œå®ç°å“åº”å¼æ•ˆæœã€‚ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span><span class="hljs-attr">"id"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"username"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"component"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-attr">"Text"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-attr">"text"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-attr">"path"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"/user/name"</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">}</span>
</code></pre>
<p>å½“æœåŠ¡å™¨é€šè¿‡ <code>dataModelUpdate</code> æ¶ˆæ¯æ›´æ–°æ•°æ®æ—¶ï¼Œç»„ä»¶è‡ªåŠ¨åˆ·æ–°å±•ç¤ºå†…å®¹ã€‚ä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span><span class="hljs-attr">"dataModelUpdate"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-attr">"path"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"/user"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"contents"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">{</span><span class="hljs-attr">"key"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"name"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"valueString"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Alice"</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">}</span>
</code></pre>
<h4 data-id="heading-7">å“åº”å¼æ›´æ–°ä¸åŠ¨æ€åœºæ™¯</h4>
<ol>
<li>å“åº”å¼æ›´æ–°</li>
</ol>
<p>ç»‘å®šæ•°æ®è·¯å¾„çš„ç»„ä»¶ä¼šç›‘å¬å¯¹åº”æ•°æ®çš„å˜åŒ–ï¼Œå½“æœåŠ¡å™¨é€šè¿‡ <code>dataModelUpdate</code> æ¶ˆæ¯æ›´æ–°æ•°æ®æ—¶ï¼Œç»„ä»¶è‡ªåŠ¨åˆ·æ–°å±•ç¤ºå†…å®¹ã€‚ä¾‹å¦‚ï¼š</p>
<ul>
<li>åˆå§‹æ•°æ® <code>/order/status</code> ä¸º "Processing..."ï¼Œç»„ä»¶æ˜¾ç¤º "Processing..."ï¼›</li>
<li>æœåŠ¡å™¨å‘é€æ•°æ®æ›´æ–°æ¶ˆæ¯ï¼Œå°† <code>/order/status</code> æ”¹ä¸º "Shipped"ï¼Œç»„ä»¶æ— éœ€é¢å¤–é…ç½®å³è‡ªåŠ¨æ˜¾ç¤º "Shipped"ã€‚</li>
</ul>
<ol start="2">
<li>åŠ¨æ€åˆ—è¡¨æ¸²æŸ“</li>
</ol>
<p>é€šè¿‡ <code>template</code> å®ç°æ•°ç»„æ•°æ®çš„æ‰¹é‡æ¸²æŸ“ï¼Œæ ¸å¿ƒé…ç½®åŒ…å«ï¼š</p>
<ul>
<li><code>dataBinding</code>ï¼šæŒ‡å®šæ•°æ®æ¨¡å‹ä¸­çš„æ•°ç»„è·¯å¾„ï¼ˆå¦‚ <code>/products</code>ï¼‰ï¼›</li>
<li><code>componentId</code>ï¼šæŒ‡å®šåˆ—è¡¨é¡¹çš„æ¨¡æ¿ç»„ä»¶ IDã€‚ç¤ºä¾‹ï¼š</li>
</ul>

<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"id"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"product-list"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"component"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"Column"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"children"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-attr">"template"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-attr">"dataBinding"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"/products"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"componentId"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"product-card"</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>å½“æ•°æ®æ¨¡å‹ä¸­ <code>/products</code> æ•°ç»„æ–°å¢ã€åˆ é™¤æˆ–ä¿®æ”¹å…ƒç´ æ—¶ï¼Œå®¢æˆ·ç«¯ä¼šè‡ªåŠ¨åŒæ­¥æ›´æ–°åˆ—è¡¨æ¸²æŸ“ç»“æœã€‚</p>
<h3 data-id="heading-8">æ•°æ®æµï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fa2ui.org%2Fconcepts%2Fdata-flow%2F" target="_blank" title="https://a2ui.org/concepts/data-flow/" ref="nofollow noopener noreferrer">Data Flow</a>ï¼‰</h3>

<ol>
<li>ç”¨æˆ·éœ€æ±‚ï¼šâ€œé¢„è®¢æ˜å¤©æ™šä¸Š 7 ç‚¹çš„ 2 äººé¤æ¡Œâ€</li>
<li>æœåŠ¡å™¨é€šè¿‡ SSE å»ºç«‹ JSONL æµè¿æ¥ï¼ŒæŒç»­å‘é€åè®®æ¶ˆæ¯ï¼›</li>
<li>æœåŠ¡å™¨å‘é€ <code>surfaceUpdate</code> æ¶ˆæ¯ï¼Œå®šä¹‰é¢„è®¢è¡¨å•çš„ UI ç»“æ„ï¼ˆå«æ ‡é¢˜ã€å®¢äººæ•°é‡è¾“å…¥æ¡†ã€ç¡®è®¤æŒ‰é’®ç­‰ç»„ä»¶ï¼‰ï¼›</li>
</ol>

<pre><code class="hljs language-css" lang="css">{"surfaceUpdate": {"surfaceId": <span class="hljs-string">"booking"</span>, <span class="hljs-string">"components"</span>: [
  {"id": <span class="hljs-string">"root"</span>, <span class="hljs-string">"component"</span>: {"Column": {"children": {"explicitList": [<span class="hljs-string">"header"</span>, <span class="hljs-string">"guests-field"</span>, <span class="hljs-string">"submit-btn"</span>]}}}},
  {"id": <span class="hljs-string">"header"</span>, <span class="hljs-string">"component"</span>: {"Text": {"text": {"literalString": <span class="hljs-string">"Confirm Reservation"</span>}, "usageHint": <span class="hljs-string">"h1"</span>}}},
  {"id": <span class="hljs-string">"guests-field"</span>, <span class="hljs-string">"component"</span>: {"TextField": {"<span class="hljs-selector-tag">label</span>": {"literalString": <span class="hljs-string">"Guests"</span>}, "text": {"path": <span class="hljs-string">"/reservation/guests"</span>}}}},
  {"id": <span class="hljs-string">"submit-btn"</span>, <span class="hljs-string">"component"</span>: {"<span class="hljs-selector-tag">Button</span>": {"child": <span class="hljs-string">"submit-text"</span>, <span class="hljs-string">"action"</span>: {"name": <span class="hljs-string">"confirm"</span>, <span class="hljs-string">"context"</span>: [{"key": <span class="hljs-string">"details"</span>, <span class="hljs-string">"value"</span>: {"path": <span class="hljs-string">"/reservation"</span>}}]}}}}
]}}
</code></pre>
<p>4.  æœåŠ¡å™¨å‘é€ <code>dataModelUpdate</code> æ¶ˆæ¯ï¼Œåˆå§‹åŒ–æ•°æ®ï¼ˆæ—¥æœŸæ—¶é—´ï¼š2025-12-16T19:00:00Zï¼Œå®¢äººæ•°é‡ï¼š2ï¼‰ï¼›</p>

<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span><span class="hljs-attr">"dataModelUpdate"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-attr">"surfaceId"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"booking"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"path"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"/reservation"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"contents"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
  <span class="hljs-punctuation">{</span><span class="hljs-attr">"key"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"datetime"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"valueString"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"2025-12-16T19:00:00Z"</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-punctuation">{</span><span class="hljs-attr">"key"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"guests"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"valueString"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"2"</span><span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">]</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">}</span>
</code></pre>
<p>5.  æœåŠ¡å™¨å‘é€ <code>beginRendering</code> æ¶ˆæ¯ï¼ˆæŒ‡å®šæ ¹ç»„ä»¶ ID å’Œç›®å½• IDï¼‰ï¼Œå®¢æˆ·ç«¯æ¸²æŸ“é¢„è®¢è¡¨å•ï¼›</p>

<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"beginRendering"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"surfaceId"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"booking"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"root"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"root"</span>
    <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>6.  å®¢æˆ·ç«¯ä»æ ¹ç»„ä»¶å¼€å§‹ï¼Œé€’å½’é€šè¿‡ ID æŸ¥æ‰¾ç»„ä»¶ï¼Œè§£ææ•°æ®ç»‘å®šï¼Œè°ƒç”¨ç»„ä»¶ç›®å½•ç”ŸæˆåŸç”Ÿ UIï¼›
7.  ç”¨æˆ·ä¿®æ”¹å®¢äººæ•°é‡ä¸º 3ï¼ˆå®¢æˆ·ç«¯æœ¬åœ°æ›´æ–°æ•°æ®æ¨¡å‹ï¼Œæ— éœ€ç«‹å³é€šçŸ¥æœåŠ¡å™¨ï¼‰</p>
<ol start="8">
<li>ç”¨æˆ·ç‚¹å‡» â€œç¡®è®¤â€ï¼Œå®¢æˆ·ç«¯å‘é€ <code>userAction</code> æ¶ˆæ¯ï¼Œæºå¸¦æ›´æ–°åçš„é¢„è®¢è¯¦æƒ…ï¼›</li>
</ol>

<pre><code class="hljs language-css" lang="css">{
    "userAction": {
        "name": <span class="hljs-string">"confirm"</span>,
        <span class="hljs-string">"surfaceId"</span>: <span class="hljs-string">"booking"</span>,
        <span class="hljs-string">"context"</span>: {
            "<span class="hljs-selector-tag">details</span>": {
                "datetime": <span class="hljs-string">"2025-12-16T19:00:00Z"</span>,
                <span class="hljs-string">"guests"</span>: <span class="hljs-string">"3"</span>
            }
        }
    }
}
</code></pre>
<p>9.  æœåŠ¡å™¨å¤„ç†åï¼Œé€šè¿‡ SSE æµå‘é€<code>surfaceUpdate</code>/<code>dataModelUpdate</code>æˆ– <code>deleteSurface</code> æ¶ˆæ¯åˆ é™¤é¢„è®¢è¡¨å• UIï¼Œå®¢æˆ·ç«¯æ›´æ–°ç¼“å†²å¹¶é‡æ–°æ¸²æŸ“ã€‚</p>

<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span><span class="hljs-attr">"deleteSurface"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-attr">"surfaceId"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"booking"</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">}</span>
</code></pre>
<p>æ•°æ®æµæµç¨‹å›¾ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">Agent (LLM) â†’ A2UI Generator â†’ Transport (SSE/WS/A2A)
                                      â†“
Client (Stream Reader) â†’ Message Parser â†’ Renderer â†’ Native UI
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d6ea77cd24e94ff085e75cc943281e42~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Ye65p2l5ZCn55qu5Y2h5LiY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766646623&amp;x-signature=EfxYEBWSjX2I6SWvcUi6z%2Fpf5zw%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-9">å››ã€A2UI vs AI ç”Ÿæˆ HTML</h2>
<p>å¾ˆå¤šäººä¼šç–‘æƒ‘ â€œä¸ºä»€ä¹ˆä¸ç›´æ¥è®© AI ç”Ÿæˆ HTMLï¼Ÿâ€ï¼Œä¸¤è€…çš„æœ¬è´¨å·®å¼‚åœ¨äº â€œå®‰å…¨å¯æ§æ€§â€ å’Œ â€œè·¨ç«¯é€‚é…æ€§â€ï¼Œå…·ä½“å¯¹æ¯”å¦‚ä¸‹ï¼š</p>





























<table><thead><tr><th>å¯¹æ¯”ç»´åº¦</th><th>A2UI</th><th>AI ç›´æ¥ç”Ÿæˆ HTML</th></tr></thead><tbody><tr><td>å®‰å…¨æ€§</td><td>ä»…ç”¨é¢„æ‰¹å‡†ç»„ä»¶åº“ï¼Œæ— ä»£ç æ‰§è¡Œé£é™©ï¼Œé˜²æ³¨å…¥æ”»å‡»</td><td>å¯èƒ½åŒ…å«æ¶æ„è„šæœ¬ï¼ˆå¦‚
</td></tr><tr><td>è·¨ç«¯å…¼å®¹æ€§</td><td>è‡ªåŠ¨é€‚é… Web / ç§»åŠ¨ç«¯ / æ¡Œé¢ç«¯åŸç”Ÿç»„ä»¶ï¼Œä½“éªŒä¸€è‡´</td><td>HTML éœ€é¢å¤–é€‚é…ä¸åŒè®¾å¤‡ï¼Œæ˜“å‡ºç°æ ·å¼é”™ä¹±</td></tr><tr><td>ç»´æŠ¤æˆæœ¬</td><td>ç»„ä»¶ç»Ÿä¸€ç®¡ç†ï¼Œæ›´æ–°åªéœ€ä¿®æ”¹å®¢æˆ·ç«¯åº“</td><td>æ¯ä¸ª HTML ç•Œé¢éœ€å•ç‹¬è°ƒè¯•ï¼Œå…¼å®¹æ€§é—®é¢˜å¤š</td></tr><tr><td>LLM å‹å¥½æ€§</td><td>æ‰å¹³ JSON ç»“æ„ï¼Œæ”¯æŒå¢é‡ç”Ÿæˆï¼Œé™ä½ LLM è´Ÿæ‹…</td><td>éœ€ç”Ÿæˆå®Œæ•´ HTML ç»“æ„ï¼Œæ˜“å‡ºç°è¯­æ³•é”™è¯¯ï¼ˆå¦‚æ ‡ç­¾æœªé—­åˆï¼‰</td></tr></tbody></table>
<p><strong>A2UI çš„æ ¸å¿ƒé€‚ç”¨åœºæ™¯ï¼š</strong></p>






























<table><thead><tr><th>åœºæ™¯ç±»å‹</th><th>å…·ä½“ç¤ºä¾‹</th><th>é€‰æ‹© A2UI çš„æ ¸å¿ƒåŸå› </th></tr></thead><tbody><tr><td>ä¼ä¸šçº§å·¥å…·</td><td>å‘˜å·¥æŠ¥é”€è¡¨å•ã€å®¢æˆ·ä¿¡æ¯å½•å…¥ç•Œé¢</td><td>ç»Ÿä¸€å¤šç«¯ä½“éªŒï¼Œè§„é¿ HTML ä»£ç æ³¨å…¥é£é™©ï¼Œç¬¦åˆä¼ä¸šå®‰å…¨è§„èŒƒ</td></tr><tr><td>ç”Ÿæ´»æœåŠ¡äº¤äº’</td><td>æœºç¥¨é¢„è®¢ã€é¤å…è®¢åº§ã€é…’åº—é€‰æˆ¿</td><td>æ ‡å‡†åŒ–ç»„ä»¶ï¼ˆæ—¥å†ã€ä¸‹æ‹‰æ¡†ã€æ•°å­—è¾“å…¥ï¼‰ï¼Œæµå¼æ¸²æŸ“å‡å°‘ç­‰å¾…</td></tr><tr><td>æ™ºèƒ½åŠ©æ‰‹ç•Œé¢</td><td>è¯­éŸ³åŠ©æ‰‹çš„å¯è§†åŒ–äº¤äº’ï¼ˆå¦‚æ™ºèƒ½å®¶å±…æ§åˆ¶ï¼‰</td><td>å¢é‡æ›´æ–°ç•Œé¢ï¼Œé€‚é…æ‰‹æœº / æ™ºèƒ½éŸ³ç®±å± / è½¦è½½å±ç­‰å¤šç»ˆç«¯</td></tr><tr><td>ä½ä»£ç å¹³å°</td><td>AI é©±åŠ¨çš„å¿«é€Ÿè¡¨å•ç”Ÿæˆå·¥å…·</td><td>ç»„ä»¶å¯å¤ç”¨ï¼Œæ— éœ€è°ƒè¯• HTML å…¼å®¹æ€§ï¼Œé™ä½å¼€å‘æˆæœ¬</td></tr></tbody></table>
<p><strong>AI ç”Ÿæˆ HTML çš„æ ¸å¿ƒé€‚ç”¨åœºæ™¯ï¼š</strong></p>






























<table><thead><tr><th>åœºæ™¯ç±»å‹</th><th>å…·ä½“ç¤ºä¾‹</th><th>é€‰æ‹© AI ç”Ÿæˆ HTML çš„æ ¸å¿ƒåŸå› </th></tr></thead><tbody><tr><td>é™æ€å†…å®¹å±•ç¤º</td><td>ä¸ªäººåšå®¢æ–‡ç« ã€äº§å“ä»‹ç»é¡µã€æ´»åŠ¨æµ·æŠ¥é¡µ</td><td>å¿«é€Ÿç”Ÿæˆå¯Œæ–‡æœ¬æ’ç‰ˆï¼Œæ”¯æŒè‡ªå®šä¹‰ CSS æ ·å¼ï¼Œæ— éœ€è·¨ç«¯</td></tr><tr><td>ä¸´æ—¶åŸå‹éªŒè¯</td><td>äº§å“ç»ç†å¿«é€Ÿåˆ¶ä½œ Web ç•Œé¢åŸå‹</td><td>æ— éœ€å­¦ä¹  A2UI åè®®ï¼Œç›´æ¥ç”Ÿæˆå¯é¢„è§ˆçš„ HTMLï¼Œè¿­ä»£å¿«</td></tr><tr><td>ç®€å•è¥é”€é¡µé¢</td><td>é™æ—¶ä¼˜æƒ å¼¹çª—ã€é—®å·æ˜Ÿæ ·å¼è¡¨å•ï¼ˆä»… Webï¼‰</td><td>å®šåˆ¶åŒ–æ ·å¼ï¼ˆå¦‚æ¸å˜æŒ‰é’®ã€åŠ¨æ€æ–‡å­—ï¼‰ï¼Œé€‚é… Web ç«¯è§†è§‰éœ€æ±‚</td></tr><tr><td>å°ä½“é‡ä¸ªäººé¡¹ç›®</td><td>ä¸ªäººç®€å†é¡µã€æ”¶è—å¤¹é¡µé¢</td><td>å¼€å‘æˆæœ¬ä½ï¼Œæ— éœ€é›†æˆ A2UI æ¸²æŸ“å™¨ï¼Œç›´æ¥éƒ¨ç½²å³å¯</td></tr></tbody></table>
<p><strong>é€‰å‹å†³ç­–åŸåˆ™ï¼š</strong></p>
<ol>
<li><strong>ç»ˆç«¯èŒƒå›´</strong>ï¼šéœ€è·¨ç«¯ï¼ˆWeb / ç§»åŠ¨ç«¯ / æ¡Œé¢ç«¯ï¼‰â†’ é€‰ A2UIï¼›ä»… Web ç«¯ â†’ å¯è€ƒè™‘ HTMLï¼›</li>
<li><strong>å®‰å…¨ä¸åˆè§„</strong>ï¼šä¼ä¸šçº§åº”ç”¨ / é¢å‘å…¬ç½‘ â†’ é€‰ A2UIï¼›ä¸ªäººé¡¹ç›® / å†…éƒ¨ä¸´æ—¶é¡µé¢ â†’ å¯ HTMLï¼›</li>
<li><strong>äº¤äº’ç±»å‹</strong>ï¼šæ ‡å‡†åŒ–è¡¨å• / é€‰æ‹©äº¤äº’ â†’ é€‰ A2UIï¼›å®šåˆ¶åŒ–å±•ç¤º / ç®€å•æ’ç‰ˆ â†’ å¯ HTMLã€‚</li>
</ol>
<h2 data-id="heading-10">äº”ã€A2UI çš„ä¼˜ç¼ºç‚¹</h2>
<p><strong>ä¼˜åŠ¿ï¼š</strong></p>
<ol>
<li><strong>LLMå‹å¥½ï¼Œå¼€å‘é«˜æ•ˆ</strong>ï¼šå£°æ˜å¼ç»“æ„+æ‰å¹³ç»„ä»¶åˆ—è¡¨ï¼Œé€‚é…LLMæµå¼ç”Ÿæˆï¼Œé™ä½UIå®šä¹‰ç¼–å†™ä¸AIç”Ÿæˆéš¾åº¦ã€‚</li>
<li><strong>å®‰å…¨ä¼˜å…ˆ</strong>ï¼šå£°æ˜å¼è®¾è®¡ä»æ ¹æºè§„é¿ä»£ç æ‰§è¡Œé£é™©ï¼Œé€‚åˆä¼ä¸šçº§åº”ç”¨ï¼›</li>
<li><strong>è·¨å¹³å°å…¼å®¹</strong>ï¼šæŠ½è±¡ç»„ä»¶ä¸åŸç”Ÿå®ç°è§£è€¦ï¼Œä¸€å¥—æœåŠ¡ç«¯é€»è¾‘å¯é€‚é…Webã€Flutterç­‰å¤šå¹³å°ï¼Œå¤ç”¨æ€§å¼ºã€‚</li>
<li><strong>æ¸²æŸ“ä½“éªŒæµç•…</strong>ï¼šJSONL/SSEæµå¼ä¼ è¾“æ”¯æŒæ¸è¿›å¼æ¸²æŸ“ï¼Œæ— éœ€ç­‰å¾…å®Œæ•´å“åº”ï¼Œå‡å°‘åŠ è½½ç­‰å¾…æ„Ÿã€‚</li>
<li><strong>æ›´æ–°è½»é‡åŒ–</strong>ï¼šUIç»“æ„ä¸æ•°æ®åˆ†ç¦»ï¼Œåç»­ä»…éœ€å‘é€æ•°æ®æ›´æ–°æ¶ˆæ¯ï¼Œæ— éœ€å…¨é‡é‡å‘ç»„ä»¶ï¼Œä¼ è¾“é«˜æ•ˆã€‚</li>
<li><strong>é€šä¿¡ç¨³å¥</strong>ï¼šå•å‘ä¸»æ•°æ®æµ+ç‹¬ç«‹äº¤äº’åé¦ˆï¼Œå•æ¡æ¶ˆæ¯é”™è¯¯ä¸å½±å“æ•´ä½“ï¼Œæ”¯æŒç½‘ç»œé‡è¿ä¸çº é”™ã€‚</li>
</ol>
<p><strong>ä¸è¶³ï¼š</strong></p>
<ol>
<li><strong>å®¢æˆ·ç«¯å¼€å‘æˆæœ¬é«˜</strong>ï¼šéœ€å®ç°åè®®è§£æã€ç»„ä»¶æ˜ å°„ã€æ•°æ®ç»‘å®šç­‰æ ¸å¿ƒå¼•æ“ï¼Œè·¨å¹³å°é€‚é…ç»†èŠ‚å¤æ‚ã€‚</li>
<li><strong>çµæ´»åº¦å—é™</strong>ï¼šç»„ä»¶ä¸æ•°æ®æ ¼å¼ä¸¥æ ¼éµå¾ªç›®å½•è§„èŒƒï¼Œè‡ªå®šä¹‰ç»„ä»¶éœ€æå‰åå•†ï¼Œéæ ‡UIè¿­ä»£ä¸ä¾¿ã€‚</li>
<li><strong>ä¼ è¾“ä¾èµ–å¼º</strong>ï¼šä¾èµ–SSE/WebSocketæµå¼é€šé“ï¼Œæ¶ˆæ¯é¡ºåºå½±å“æ¸²æŸ“æ•ˆæœï¼Œéœ€å¤„ç†ä¹±åºã€ä¸¢åŒ…é—®é¢˜ã€‚</li>
<li><strong>å¤æ‚åœºæ™¯é€‚é…ä¸è¶³</strong>ï¼šå¯¹æ‹–æ‹½ã€å®æ—¶åä½œç­‰å¤æ‚äº¤äº’ï¼ŒåŠæ¯«ç§’çº§é«˜é¢‘æ›´æ–°ï¼ˆå¦‚å®æ—¶å›¾è¡¨ï¼‰æ”¯æŒæœ‰é™ã€‚</li>
<li><strong>è°ƒè¯•éš¾åº¦å¤§</strong>ï¼šæµå¼æ¶ˆæ¯åˆ†æ•£ï¼Œé—®é¢˜å¯èƒ½æ¶‰åŠLLMç”Ÿæˆã€æœåŠ¡ç«¯å‘é€ã€å®¢æˆ·ç«¯è§£æç­‰å¤šç¯èŠ‚ï¼Œå®šä½å¤æ‚ã€‚</li>
<li><strong>å¤„äºæ—©æœŸé˜¶æ®µ</strong>ï¼šéƒ¨åˆ†åŠŸèƒ½ï¼ˆå¦‚å¤æ‚æ•°æ®ç»‘å®šï¼‰å¯èƒ½ä¸å®Œå–„ã€‚</li>
</ol>
<h2 data-id="heading-11">ä¸ƒã€é€‚ç”¨åœºæ™¯</h2>
<p>A2UI åè®®çš„æ ¸å¿ƒä¼˜åŠ¿é›†ä¸­åœ¨ <strong>LLM é©±åŠ¨çš„æµå¼ UI ç”Ÿæˆã€è·¨å¹³å°å¤ç”¨ã€æ¸è¿›å¼æ¸²æŸ“</strong> åœºæ™¯ï¼Œç‰¹åˆ«é€‚åˆï¼š</p>
<ul>
<li>åŸºäº AI ç”Ÿæˆçš„åŠ¨æ€ç•Œé¢ï¼ˆå¦‚ AI åŠ©æ‰‹ç”Ÿæˆçš„è¡¨å•ã€æŠ¥å‘Šã€ä¸ªæ€§åŒ–é¡µé¢ï¼‰ï¼›</li>
<li>å¤šå¹³å°åŒæ­¥çš„è½»é‡åŒ–åº”ç”¨ï¼ˆå¦‚è·¨ç«¯å·¥å…·ç±» Appã€ç®€å•æ•°æ®å±•ç¤ºç•Œé¢ï¼‰ï¼›</li>
<li>å¯¹åŠ è½½ä½“éªŒè¦æ±‚é«˜ã€æ— éœ€å¤æ‚äº¤äº’çš„åœºæ™¯ï¼ˆå¦‚å†…å®¹æµè§ˆã€è¡¨å•æäº¤ã€æŸ¥è¯¢ç»“æœå±•ç¤ºï¼‰ã€‚</li>
</ul>
<p>è€Œåœ¨ä»¥ä¸‹åœºæ™¯ä¸­éœ€è°¨æ…é€‰æ‹©ï¼š</p>
<ul>
<li>å¤æ‚äº¤äº’å¯†é›†å‹åº”ç”¨ï¼ˆå¦‚æ¸¸æˆã€è§†é¢‘ç¼–è¾‘ã€å¯è§†åŒ–è®¾è®¡å·¥å…·ï¼‰ï¼›</li>
<li>å¿«é€Ÿè¿­ä»£çš„éæ ‡ UI åœºæ™¯ï¼ˆå¦‚é«˜é¢‘æ›´æ–°çš„è¥é”€æ´»åŠ¨é¡µé¢ï¼‰ï¼›</li>
<li>å®¢æˆ·ç«¯å¼€å‘èµ„æºæœ‰é™ã€æ— æ³•æ‰¿æ‹…åè®®è§£æå¼•æ“å¼€å‘çš„é¡¹ç›®ã€‚</li>
</ul>
<h2 data-id="heading-12">å…«ã€ç¤¾åŒºæ´»è·ƒåº¦ä¸æ”¯æŒ</h2>
<p>å‰ç«¯æ¸²æŸ“å™¨æ”¯æŒï¼š
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fd4dbe56d9ff4916b9c0264efa92ad39~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Ye65p2l5ZCn55qu5Y2h5LiY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766646623&amp;x-signature=jHu2p9io5vuheYmtg33xaWlC3%2FU%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-13">ä¸ƒã€æœªæ¥å±•æœ›ï¼šA2UI å°†å¦‚ä½•æ”¹å˜ AI äº¤äº’ï¼Ÿ</h2>
<ol>
<li><strong>â€œå³æ—¶åº”ç”¨â€ æˆä¸ºå¯èƒ½</strong>ï¼šæ— éœ€ä¸‹è½½ Appï¼ŒAI å¯æ ¹æ®éœ€æ±‚å®æ—¶ç”Ÿæˆè½»é‡çº§ç•Œé¢ï¼ˆå¦‚ä¸´æ—¶æŠ¥é”€è¡¨å•ã€è¡Œç¨‹è§„åˆ’é¡µï¼‰ï¼Œå®ç° â€œç”¨å®Œå³èµ°â€ï¼›</li>
<li><strong>Skill+A2UI çš„ç»„åˆèŒƒå¼</strong>ï¼šåç«¯ç”¨ â€œSkillâ€ï¼ˆåŠŸèƒ½æ ‡å‡†åŒ–å°è£…ï¼‰ï¼Œå‰ç«¯ç”¨ A2UI ç”Ÿæˆç•Œé¢ï¼Œå¼€å‘è€…åªéœ€èšç„¦æ ¸å¿ƒé€»è¾‘ï¼Œæ— éœ€å…³æ³¨ç•Œé¢å®ç°ï¼›</li>
<li><strong>è¡¥é½ AI äº¤äº’çŸ­æ¿ï¼š</strong> è§£å†³ä¼ ç»Ÿ Agent ä»…é æ–‡æœ¬ â€œå‚»èŠâ€ çš„ä½æ•ˆé—®é¢˜ï¼Œè®© AI èƒ½åŠ¨æ€ç”Ÿæˆå›¾å½¢ç•Œé¢ï¼ˆå¦‚è®¢åº§è¡¨å•ã€ç¡®è®¤å¡ç‰‡ï¼‰ï¼Œå®ç° â€œé«˜å¸¦å®½â€ äº¤äº’ï¼Œä» â€œäººé€‚åº”æœºå™¨â€ è½¬å‘ â€œæœºå™¨é€‚åº”äººâ€ <strong>ã€‚</strong></li>
<li><strong>ç”Ÿæ€æ•´åˆæ·±åŒ–</strong>ï¼šä¸ A2Aï¼ˆAgent-to-Agentï¼‰åè®®è”åŠ¨ï¼Œå®ç° â€œä»£ç†åä½œç”Ÿæˆç•Œé¢â€ï¼ˆå¦‚æ—…è¡Œä»£ç†è°ƒç”¨èˆªç­ä»£ç†çš„ Skillï¼ŒåŒæ—¶ç”Ÿæˆç»Ÿä¸€é¢„è®¢ç•Œé¢ï¼‰ã€‚</li>
</ol>
<h2 data-id="heading-14">æ€»ç»“ï¼šA2UI çš„æ ¸å¿ƒä»·å€¼ â€”â€” è®© AI ä» â€œä¼šèŠâ€ åˆ° â€œä¼šåšâ€</h2>
<p>A2UI çš„æœ¬è´¨ä¸æ˜¯é¢ è¦†ç°æœ‰å›¾å½¢ç•Œé¢ï¼Œè€Œæ˜¯ç”¨ AI èµ‹èƒ½äº¤äº’ â€”â€” è®©ç•Œé¢ä» â€œå†™æ­»çš„ä»£ç â€ å˜æˆ â€œåŠ¨æ€å“åº”éœ€æ±‚çš„å·¥å…·â€ã€‚å¯¹äºæ™®é€šç”¨æˆ·ï¼Œå®ƒæ„å‘³ç€ â€œå°‘æ‰“å­—ã€å¤šç¡®è®¤â€ çš„é«˜æ•ˆä½“éªŒï¼›å¯¹äºå¼€å‘è€…ï¼Œå®ƒä»£è¡¨ â€œä¸€æ¬¡é€»è¾‘å¼€å‘ï¼Œå¤šç«¯ç•Œé¢å¤ç”¨â€ çš„æ•ˆç‡é©å‘½ã€‚æœªæ¥çš„ AI ä¸ä»…èƒ½ç†è§£ä½ çš„éœ€æ±‚ï¼Œæ›´èƒ½ç›´æ¥é€’ä¸Š â€œæœ€è¶æ‰‹çš„å·¥å…·ç•Œé¢â€ï¼Œè¿™æˆ–è®¸å°±æ˜¯ â€œæœºå™¨é€‚åº”äººâ€ çš„äº¤äº’ç»ˆæå½¢æ€ä¹‹ä¸€ã€‚</p>
<p>å¯¹äºæ­£åœ¨æ„å»º Agent çš„å·¥ç¨‹å¸ˆæ¥è¯´ï¼Œè¿™æ˜¯ä¸€ä¸ªé‡è¦çš„æ¶æ„å‚è€ƒã€‚è¿™ç§è§£è€¦è®©å‰ç«¯èƒ½æŒæ¡è§†è§‰é£æ ¼ï¼Œåç«¯ä¸“æ³¨é€»è¾‘ï¼Œå½»åº•å‘Šåˆ«è®© LLM ç²—æš´ç”Ÿæˆ HTML çš„è‰è½æ—¶ä»£ã€‚ä½œä¸ºå¼€å‘è€…å¯ä»¥å…³æ³¨ A2UI çš„æ¼”è¿›ï¼Œè¿™æ˜¯æœªæ¥ AI åŸç”Ÿåº”ç”¨çš„æ ‡å‡†é…ç½®ã€‚</p>
<p>ç›¸å…³èµ„æ–™ï¼š</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdevelopers.googleblog.com%2Fintroducing-a2ui-an-open-project-for-agent-driven-interfaces%2F" target="_blank" title="https://developers.googleblog.com/introducing-a2ui-an-open-project-for-agent-driven-interfaces/" ref="nofollow noopener noreferrer">developers.googleblog.com/introducingâ€¦</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fgoogle%2FA2UI%3Ftab%3Dreadme-ov-file" target="_blank" title="https://github.com/google/A2UI?tab=readme-ov-file" ref="nofollow noopener noreferrer">github.com/google/A2UIâ€¦</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€2026ç‰ˆã€‘Spring Booté¢è¯•é¢˜]]></title>    <link>https://juejin.cn/post/7584780417103675432</link>    <guid>https://juejin.cn/post/7584780417103675432</guid>    <pubDate>2025-12-18T07:03:55.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7584780417103675432" data-draft-id="7584761090669871104" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€2026ç‰ˆã€‘Spring Booté¢è¯•é¢˜"/> <meta itemprop="keywords" content="åç«¯,MySQL,é¢è¯•"/> <meta itemprop="datePublished" content="2025-12-18T07:03:55.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Javaæ°´è§£"/> <meta itemprop="url" content="https://juejin.cn/user/2441349519143037"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€2026ç‰ˆã€‘Spring Booté¢è¯•é¢˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2441349519143037/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Javaæ°´è§£
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-18T07:03:55.000Z" title="Thu Dec 18 2025 07:03:55 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-18
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    5
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»22åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>è¿™ç¯‡æ–‡ç« æ¶µç›–äº†Spring Bootçš„æ ¸å¿ƒæ¦‚å¿µå’Œé«˜çº§ä¸»é¢˜ï¼ŒåŒ…æ‹¬[è‡ªåŠ¨é…ç½®]ã€å¤šæ•°æ®æºã€Actuatorã€ç¼“å­˜ã€AOPã€å¼‚æ­¥ç¼–ç¨‹ã€äº‹åŠ¡ç®¡ç†ã€å®‰å…¨æ€§ã€æ¶ˆæ¯é˜Ÿåˆ—å’Œå¾®æœåŠ¡æ¶æ„ã€‚è¿™äº›é—®é¢˜å¯ä»¥å¸®åŠ©æ‚¨è¯„ä¼°å€™é€‰äººçš„æŠ€èƒ½å’Œç»éªŒï¼ŒåŒæ—¶ä¹Ÿæ˜¯æé«˜è‡ªå·±Spring BootæŠ€èƒ½çš„å¥½æ–¹æ³•ã€‚</p>
<h5 data-id="heading-0"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>1.Â Spring Bootä¸­çš„è‡ªåŠ¨é…ç½®æ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿ</h5>
<p>Spring Bootä¸­çš„è‡ªåŠ¨é…ç½®æ˜¯é€šè¿‡Spring Bootçš„è‡ªåŠ¨é…ç½®æœºåˆ¶å®ç°çš„ã€‚è‡ªåŠ¨é…ç½®æ˜¯ä¸€ç§åŸºäºçº¦å®šå¤§äºé…ç½®çš„æ–¹æ³•ï¼Œå®ƒå¯ä»¥æ ¹æ®[ç±»è·¯å¾„]ä¸­çš„ä¾èµ–é¡¹è‡ªåŠ¨é…ç½®Springåº”ç”¨ç¨‹åºã€‚è¿™æ„å‘³ç€ï¼Œå½“æ‚¨æ·»åŠ æŸäº›ä¾èµ–é¡¹æ—¶ï¼ŒSpring Bootä¼šè‡ªåŠ¨é…ç½®åº”ç”¨ç¨‹åºï¼Œè€Œæ— éœ€æ‰‹åŠ¨é…ç½®ã€‚è‡ªåŠ¨é…ç½®æ˜¯é€šè¿‡ç±»è·¯å¾„ä¸Šçš„Spring Boot Starterä¾èµ–é¡¹æ¥å®ç°çš„ï¼Œè¿™äº›ä¾èµ–é¡¹åŒ…å«äº†ä¸€ç»„é¢„å®šä¹‰çš„é…ç½®ç±»ï¼Œè¿™äº›ç±»å¯ä»¥æ ¹æ®åº”ç”¨ç¨‹åºçš„éœ€æ±‚æ¥è‡ªåŠ¨é…ç½®Springåº”ç”¨ç¨‹åºã€‚å¦‚æœæ‚¨éœ€è¦ä¿®æ”¹è‡ªåŠ¨é…ç½®çš„è¡Œä¸ºï¼Œå¯ä»¥ä½¿ç”¨Spring Bootæä¾›çš„å„ç§é…ç½®é€‰é¡¹æ¥è¦†ç›–é»˜è®¤é…ç½®ã€‚é€šè¿‡è¿™ç§æ–¹å¼ï¼ŒSpring Bootå¯ä»¥å¤§å¤§ç®€åŒ–Springåº”ç”¨ç¨‹åºçš„é…ç½®å’Œéƒ¨ç½²è¿‡ç¨‹ï¼Œä»è€Œæé«˜å¼€å‘æ•ˆç‡å’Œç”Ÿäº§åŠ›ã€‚</p>
<p>Spring Bootçš„è‡ªåŠ¨é…ç½®æœºåˆ¶åŸºäºSpringæ¡†æ¶ä¸­çš„æ¡ä»¶åŒ–é…ç½®æœºåˆ¶ï¼Œå®ƒä½¿ç”¨æ¡ä»¶æ³¨è§£æ¥æ ¹æ®åº”ç”¨ç¨‹åºçš„éœ€æ±‚è‡ªåŠ¨é…ç½®Springåº”ç”¨ç¨‹åºã€‚æ¡ä»¶æ³¨è§£æ˜¯ä¸€ç§ç‰¹æ®Šçš„æ³¨è§£ï¼Œå®ƒå¯ä»¥æ ¹æ®æŸäº›æ¡ä»¶æ¥æ§åˆ¶æ˜¯å¦åº”è¯¥åŠ è½½æŸä¸ªç±»æˆ–é…ç½®ã€‚Spring Bootä¸­çš„è‡ªåŠ¨é…ç½®ç±»é€šå¸¸ä½¿ç”¨@Conditionalæ³¨è§£æ¥å®ç°æ¡ä»¶åŒ–é…ç½®ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæ‚¨åœ¨åº”ç”¨ç¨‹åºçš„ç±»è·¯å¾„ä¸­åŒ…å«äº†Spring DataÂ JPAçš„ä¾èµ–é¡¹ï¼ŒSpring Bootä¼šè‡ªåŠ¨é…ç½®JPAç›¸å…³çš„beanã€‚è¿™æ˜¯é€šè¿‡åœ¨Spring Bootçš„è‡ªåŠ¨é…ç½®ç±»ä¸­ä½¿ç”¨@ConditionalOnClassæ³¨è§£æ¥å®ç°çš„ï¼Œè¯¥æ³¨è§£è¡¨ç¤ºåªæœ‰åœ¨ç±»è·¯å¾„ä¸­å­˜åœ¨æŒ‡å®šçš„ç±»æ—¶æ‰ä¼šåŠ è½½è¯¥é…ç½®ç±»ã€‚</p>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„Spring Bootè‡ªåŠ¨é…ç½®ç¤ºä¾‹ï¼Œå®ƒæ¼”ç¤ºäº†å¦‚ä½•è‡ªåŠ¨é…ç½®ä¸€ä¸ªæ•°æ®æºï¼š</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-variable">@Configuration</span>
<span class="hljs-variable">@ConditionalOnClass</span>(DataSource.class)
<span class="hljs-variable">@EnableConfigurationProperties</span>(DatabaseProperties.class)
public class DatabaseAutoConfiguration {
     <span class="hljs-variable">@Autowired</span>
    private DatabaseProperties properties;
     <span class="hljs-variable">@Bean</span>
    <span class="hljs-variable">@ConfigurationProperties</span>(prefix = <span class="hljs-string">"spring.datasource"</span>)
    public DataSource <span class="hljs-built_in">dataSource</span>() {
        <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">DataSourceBuilder</span><span class="hljs-selector-class">.create</span>()
                <span class="hljs-selector-class">.url</span>(properties.<span class="hljs-built_in">getUrl</span>())
                <span class="hljs-selector-class">.username</span>(properties.<span class="hljs-built_in">getUsername</span>())
                <span class="hljs-selector-class">.password</span>(properties.<span class="hljs-built_in">getPassword</span>())
                <span class="hljs-selector-class">.build</span>();
    }
}
ä¸€é”®è·å–å®Œæ•´é¡¹ç›®ä»£ç 
</code></pre>
<p>ä¸€é”®è·å–å®Œæ•´é¡¹ç›®ä»£ç java</p>
<p>åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œ@Configurationæ³¨è§£è¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªé…ç½®ç±»ï¼Œ@ConditionalOnClassæ³¨è§£è¡¨ç¤ºåªæœ‰åœ¨ç±»è·¯å¾„ä¸­å­˜åœ¨DataSourceç±»æ—¶æ‰ä¼šåŠ è½½è¯¥é…ç½®ç±»ï¼Œ@Enable[ConfigurationPropertiesæ³¨è§£]è¡¨ç¤ºè¯¥é…ç½®ç±»ä½¿ç”¨äº†ä¸€ä¸ªåä¸ºDatabasePropertiesçš„å±æ€§ç±»ã€‚åœ¨è¯¥é…ç½®ç±»ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨@ConfigurationPropertiesæ³¨è§£å°†å‰ç¼€ä¸º"spring.datasource"çš„å±æ€§æ˜ å°„åˆ°DataSourceBuilderä¸­ï¼Œå¹¶ä½¿ç”¨è¯¥å±æ€§æ¥åˆ›å»ºä¸€ä¸ªæ•°æ®æºbeanã€‚è¿™ä¸ªç¤ºä¾‹æ¼”ç¤ºäº†å¦‚ä½•ä½¿ç”¨Spring Bootè‡ªåŠ¨é…ç½®æ¥è‡ªåŠ¨é…ç½®ä¸€ä¸ªæ•°æ®æºbeanï¼Œå¹¶ä½¿ç”¨@ConfigurationPropertiesæ³¨è§£å°†å±æ€§æ˜ å°„åˆ°beanä¸­ã€‚</p>
<p>æ€»çš„æ¥è¯´ï¼ŒSpring Bootçš„è‡ªåŠ¨é…ç½®æœºåˆ¶æ˜¯ä¸€ç§éå¸¸å¼ºå¤§å’Œæ–¹ä¾¿çš„æ–¹å¼æ¥è‡ªåŠ¨é…ç½®Springåº”ç”¨ç¨‹åºã€‚é€šè¿‡ä½¿ç”¨Spring Bootçš„è‡ªåŠ¨é…ç½®æœºåˆ¶ï¼Œæˆ‘ä»¬å¯ä»¥å¤§å¤§ç®€åŒ–Springåº”ç”¨ç¨‹åºçš„é…ç½®å’Œéƒ¨ç½²è¿‡ç¨‹ï¼Œä»è€Œæé«˜å¼€å‘æ•ˆç‡å’Œç”Ÿäº§åŠ›ã€‚</p>
<blockquote>
<blockquote>
<p><strong>ç¯‡å¹…é™åˆ¶ä¸‹é¢å°±åªèƒ½ç»™å¤§å®¶å±•ç¤ºå°å†Œéƒ¨åˆ†å†…å®¹äº†ã€‚æ•´ç†äº†ä¸€ä»½æ ¸å¿ƒé¢è¯•ç¬”è®°åŒ…æ‹¬äº†ï¼šJavaé¢è¯•ã€Springã€JVMã€MyBatisã€Redisã€MySQLã€å¹¶å‘ç¼–ç¨‹ã€å¾®æœåŠ¡ã€Linuxã€Springbootã€SpringCloudã€MQã€Kafka é¢è¯•ä¸“é¢˜</strong></p>
<blockquote>
</blockquote>
<p><strong>éœ€è¦å…¨å¥—é¢è¯•ç¬”è®°åŠç­”æ¡ˆã€æ‰«ä¸€æ‰«ã€‘</strong> Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â å³å¯å…è´¹è·å–**</p>
</blockquote>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/acd2b3226ab24f67ab90fc0e9834bd1a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2YeawtOinow==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766648018&amp;x-signature=p3Ng5S3NnQCV1zccGuIcpXlRito%3D" alt="8fbf1ef8b61e2dbbb33b7690a41d12e.png" loading="lazy"/></p>
</blockquote>
<h5 data-id="heading-1"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>2. å¦‚ä½•åœ¨Spring Bootä¸­ä½¿ç”¨å¤šä¸ªæ•°æ®æºï¼Ÿ</h5>
<p>åœ¨Spring Bootä¸­ä½¿ç”¨å¤šä¸ªæ•°æ®æºå¯ä»¥é€šè¿‡é…ç½®å¤šä¸ªæ•°æ®æºbeanæ¥å®ç°ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªä½¿ç”¨ä¸¤ä¸ªæ•°æ®æºçš„ç¤ºä¾‹ï¼š</p>
<ol>
<li>é…ç½®å¤šä¸ªæ•°æ®æº</li>
</ol>

<pre><code class="hljs language-less" lang="less"><span class="hljs-variable">@Configuration</span>
public class DataSourceConfig {
     <span class="hljs-variable">@Bean</span>
    <span class="hljs-variable">@Primary</span>
    <span class="hljs-variable">@ConfigurationProperties</span>(prefix = <span class="hljs-string">"spring.datasource.primary"</span>)
    public DataSource <span class="hljs-built_in">primaryDataSource</span>() {
        <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">DataSourceBuilder</span><span class="hljs-selector-class">.create</span>()<span class="hljs-selector-class">.build</span>();
    }
     @<span class="hljs-selector-tag">Bean</span>
    @<span class="hljs-selector-tag">ConfigurationProperties</span>(prefix = <span class="hljs-string">"spring.datasource.secondary"</span>)
    <span class="hljs-selector-tag">public</span> <span class="hljs-selector-tag">DataSource</span> <span class="hljs-selector-tag">secondaryDataSource</span>() {
        <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">DataSourceBuilder</span><span class="hljs-selector-class">.create</span>()<span class="hljs-selector-class">.build</span>();
    }
 }
ä¸€é”®è·å–å®Œæ•´é¡¹ç›®ä»£ç 
</code></pre>
<p>ä¸€é”®è·å–å®Œæ•´é¡¹ç›®ä»£ç java</p>
<p>åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸¤ä¸ªæ•°æ®æºbeanï¼Œä¸€ä¸ªæ˜¯ä¸»æ•°æ®æºï¼ˆprimaryDataSourceï¼‰ï¼Œå¦ä¸€ä¸ªæ˜¯æ¬¡è¦æ•°æ®æºï¼ˆsecondaryDataSourceï¼‰ã€‚è¿™ä¸¤ä¸ªbeanéƒ½ä½¿ç”¨@ConfigurationPropertiesæ³¨è§£æ¥å°†é…ç½®å±æ€§æ˜ å°„åˆ°æ•°æ®æºbeanä¸­ã€‚<br/>
2. é…ç½®JdbcTemplate</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-variable">@Configuration</span>
public class JdbcTemplateConfig {
     <span class="hljs-variable">@Bean</span>
    public JdbcTemplate <span class="hljs-built_in">primaryJdbcTemplate</span>(<span class="hljs-variable">@Qualifier</span>(<span class="hljs-string">"primaryDataSource"</span>) DataSource dataSource) {
        <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">new</span> <span class="hljs-selector-tag">JdbcTemplate</span>(dataSource);
    }
     @<span class="hljs-selector-tag">Bean</span>
    <span class="hljs-selector-tag">public</span> <span class="hljs-selector-tag">JdbcTemplate</span> <span class="hljs-selector-tag">secondaryJdbcTemplate</span>(<span class="hljs-variable">@Qualifier</span>(<span class="hljs-string">"secondaryDataSource"</span>) DataSource dataSource) {
        <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">new</span> <span class="hljs-selector-tag">JdbcTemplate</span>(dataSource);
    }
 }
ä¸€é”®è·å–å®Œæ•´é¡¹ç›®ä»£ç 
</code></pre>
<p>ä¸€é”®è·å–å®Œæ•´é¡¹ç›®ä»£ç java</p>
<p>åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸¤ä¸ªJdbcTemplate beanï¼Œä¸€ä¸ªæ˜¯ä¸»JdbcTemplateï¼ˆprimaryJdbcTemplateï¼‰ï¼Œå¦ä¸€ä¸ªæ˜¯æ¬¡è¦JdbcTemplateï¼ˆsecondaryJdbcTemplateï¼‰ã€‚è¿™ä¸¤ä¸ªbeanéƒ½ä½¿ç”¨@Qualifieræ³¨è§£æ¥æŒ‡å®šå®ƒä»¬æ‰€ä½¿ç”¨çš„æ•°æ®æºbeanã€‚<br/>
3. é…ç½®å®ä½“ç®¡ç†å™¨å·¥å‚</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-variable">@Configuration</span>
<span class="hljs-variable">@EnableJpaRepositories</span>(
        basePackages = <span class="hljs-string">"com.example.primary.repository"</span>,
        entityManagerFactoryRef = <span class="hljs-string">"primaryEntityManagerFactory"</span>,
        transactionManagerRef = <span class="hljs-string">"primaryTransactionManager"</span>)
public class PrimaryDataSourceConfig {
     <span class="hljs-variable">@Primary</span>
    <span class="hljs-variable">@Bean</span>
    <span class="hljs-variable">@ConfigurationProperties</span>(prefix = <span class="hljs-string">"spring.datasource.primary"</span>)
    public DataSource <span class="hljs-built_in">primaryDataSource</span>() {
        <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">DataSourceBuilder</span><span class="hljs-selector-class">.create</span>()<span class="hljs-selector-class">.build</span>();
    }
     @<span class="hljs-selector-tag">Primary</span>
    @<span class="hljs-selector-tag">Bean</span>
    <span class="hljs-selector-tag">public</span> <span class="hljs-selector-tag">LocalContainerEntityManagerFactoryBean</span> <span class="hljs-selector-tag">primaryEntityManagerFactory</span>(EntityManagerFactoryBuilder builder,
                                                                                <span class="hljs-variable">@Qualifier</span>(<span class="hljs-string">"primaryDataSource"</span>) DataSource dataSource) {
        <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">builder</span>
                <span class="hljs-selector-class">.dataSource</span>(dataSource)
                <span class="hljs-selector-class">.packages</span>(<span class="hljs-string">"com.example.primary.entity"</span>)
                <span class="hljs-selector-class">.persistenceUnit</span>(<span class="hljs-string">"primary"</span>)
                <span class="hljs-selector-class">.build</span>();
    }
     @<span class="hljs-selector-tag">Primary</span>
    @<span class="hljs-selector-tag">Bean</span>
    <span class="hljs-selector-tag">public</span> <span class="hljs-selector-tag">PlatformTransactionManager</span> <span class="hljs-selector-tag">primaryTransactionManager</span>(
            <span class="hljs-variable">@Qualifier</span>(<span class="hljs-string">"primaryEntityManagerFactory"</span>) EntityManagerFactory entityManagerFactory) {
        <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">new</span> <span class="hljs-selector-tag">JpaTransactionManager</span>(entityManagerFactory);
    }
}
ä¸€é”®è·å–å®Œæ•´é¡¹ç›®ä»£ç 
</code></pre>
<p>ä¸€é”®è·å–å®Œæ•´é¡¹ç›®ä»£ç java</p>
<p>åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªåä¸ºPrimaryDataSourceConfigçš„é…ç½®ç±»ï¼Œå®ƒé…ç½®äº†ä¸»æ•°æ®æºçš„å®ä½“ç®¡ç†å™¨å·¥å‚å’Œäº‹åŠ¡ç®¡ç†å™¨ã€‚æˆ‘ä»¬ä½¿ç”¨@EnableJpaRepositoriesæ³¨è§£æ¥å¯ç”¨JPAä»“åº“ï¼Œå¹¶ä½¿ç”¨basePackageså±æ€§æ¥æŒ‡å®šJPAä»“åº“çš„åŒ…è·¯å¾„ã€‚æˆ‘ä»¬è¿˜ä½¿ç”¨entityManagerFactoryRefå±æ€§å’ŒtransactionManagerRefå±æ€§æ¥æŒ‡å®šå®ä½“ç®¡ç†å™¨å·¥å‚å’Œäº‹åŠ¡ç®¡ç†å™¨çš„beanåç§°ã€‚</p>
<ol start="4">
<li>é…ç½®äº‹åŠ¡ç®¡ç†å™¨</li>
</ol>

<pre><code class="hljs language-less" lang="less"><span class="hljs-variable">@Configuration</span>
<span class="hljs-variable">@EnableTransactionManagement</span>
public class TransactionManagerConfig {
     <span class="hljs-variable">@Bean</span>
    public PlatformTransactionManager <span class="hljs-built_in">primaryTransactionManager</span>(<span class="hljs-variable">@Qualifier</span>(<span class="hljs-string">"primaryEntityManagerFactory"</span>) EntityManagerFactory entityManagerFactory) {
        <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">new</span> <span class="hljs-selector-tag">JpaTransactionManager</span>(entityManagerFactory);
    }
     @<span class="hljs-selector-tag">Bean</span>
    <span class="hljs-selector-tag">public</span> <span class="hljs-selector-tag">PlatformTransactionManager</span> <span class="hljs-selector-tag">secondaryTransactionManager</span>(<span class="hljs-variable">@Qualifier</span>(<span class="hljs-string">"secondaryEntityManagerFactory"</span>) EntityManagerFactory entityManagerFactory) {
        <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">new</span> <span class="hljs-selector-tag">JpaTransactionManager</span>(entityManagerFactory);
    }
 }
ä¸€é”®è·å–å®Œæ•´é¡¹ç›®ä»£ç 
</code></pre>
<p>ä¸€é”®è·å–å®Œæ•´é¡¹ç›®ä»£ç java</p>
<p>åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸¤ä¸ªäº‹åŠ¡ç®¡ç†å™¨beanï¼Œä¸€ä¸ªæ˜¯ä¸»äº‹åŠ¡ç®¡ç†å™¨ï¼ˆprimaryTransactionManagerï¼‰ï¼Œå¦ä¸€ä¸ªæ˜¯æ¬¡è¦äº‹åŠ¡ç®¡ç†å™¨ï¼ˆsecondaryTransactionManagerï¼‰ã€‚è¿™ä¸¤ä¸ªbeanéƒ½ä½¿ç”¨@Qualifieræ³¨è§£æ¥æŒ‡å®šå®ƒä»¬æ‰€ä½¿ç”¨çš„å®ä½“ç®¡ç†å™¨å·¥å‚beanã€‚<br/>
æ€»çš„æ¥è¯´ï¼ŒSpring Bootä¸­ä½¿ç”¨å¤šä¸ªæ•°æ®æºéœ€è¦é…ç½®å¤šä¸ªæ•°æ®æºbeanå’Œç›¸å…³çš„JdbcTemplateã€å®ä½“ç®¡ç†å™¨å·¥å‚å’Œäº‹åŠ¡ç®¡ç†å™¨ç­‰ç»„ä»¶ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨@ConfigurationPropertiesæ³¨è§£å°†é…ç½®å±æ€§æ˜ å°„åˆ°æ•°æ®æºbeanä¸­ï¼Œä½¿ç”¨@Qualifieræ³¨è§£æ¥æŒ‡å®šæ‰€ä½¿ç”¨çš„beanï¼Œä»è€Œå®ç°å¤šä¸ªæ•°æ®æºçš„é…ç½®ã€‚</p>
<h5 data-id="heading-2"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>3. Spring Bootä¸­çš„[Actuator]æ˜¯ä»€ä¹ˆï¼Ÿå®ƒçš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ</h5>
<p>Actuatoræ˜¯Spring Bootæä¾›çš„ä¸€ä¸ªç®¡ç†å’Œç›‘æ§åº”ç”¨ç¨‹åºçš„æ¡†æ¶ã€‚å®ƒå¯ä»¥å¸®åŠ©æˆ‘ä»¬æ›´å¥½åœ°äº†è§£åº”ç”¨ç¨‹åºçš„è¿è¡ŒçŠ¶å†µï¼Œå¹¶æä¾›ä¸€äº›æœ‰ç”¨çš„ç«¯ç‚¹æ¥æ£€æŸ¥å’Œç®¡ç†åº”ç”¨ç¨‹åºã€‚Actuatorå¯ä»¥æä¾›ä»¥ä¸‹åŠŸèƒ½ï¼š</p>
<ol>
<li>å¥åº·æ£€æŸ¥ï¼šActuatoræä¾›äº†ä¸€ä¸ª/healthç«¯ç‚¹ï¼Œç”¨äºæ£€æŸ¥åº”ç”¨ç¨‹åºçš„å¥åº·çŠ¶å†µã€‚è¿™ä¸ªç«¯ç‚¹å¯ä»¥å‘Šè¯‰æˆ‘ä»¬åº”ç”¨ç¨‹åºæ˜¯å¦æ­£å¸¸è¿è¡Œï¼Œå¹¶æä¾›ä¸€äº›æœ‰ç”¨çš„ä¿¡æ¯ï¼Œä¾‹å¦‚å†…å­˜ä½¿ç”¨æƒ…å†µã€æ•°æ®åº“è¿æ¥çŠ¶æ€ç­‰ã€‚</li>
<li>ç›‘æ§æŒ‡æ ‡ï¼šActuatoræä¾›äº†ä¸€ä¸ª/metricsç«¯ç‚¹ï¼Œç”¨äºç›‘æ§åº”ç”¨ç¨‹åºçš„æŒ‡æ ‡ã€‚è¿™ä¸ªç«¯ç‚¹å¯ä»¥å‘Šè¯‰æˆ‘ä»¬åº”ç”¨ç¨‹åºçš„å„ç§æŒ‡æ ‡ï¼Œä¾‹å¦‚è¯·æ±‚æ•°ã€å“åº”æ—¶é—´ã€é”™è¯¯ç‡ç­‰ã€‚</li>
<li>ç¯å¢ƒé…ç½®ï¼šActuatoræä¾›äº†ä¸€ä¸ª/envç«¯ç‚¹ï¼Œç”¨äºæŸ¥çœ‹åº”ç”¨ç¨‹åºçš„ç¯å¢ƒé…ç½®ã€‚è¿™ä¸ªç«¯ç‚¹å¯ä»¥å‘Šè¯‰æˆ‘ä»¬åº”ç”¨ç¨‹åºçš„å„ç§é…ç½®ä¿¡æ¯ï¼Œä¾‹å¦‚æ•°æ®åº“è¿æ¥ä¿¡æ¯ã€æ—¥å¿—çº§åˆ«ç­‰ã€‚</li>
<li>æ—¥å¿—ç®¡ç†ï¼šActuatoræä¾›äº†ä¸€ä¸ª/loggersç«¯ç‚¹ï¼Œç”¨äºç®¡ç†åº”ç”¨ç¨‹åºçš„æ—¥å¿—ã€‚è¿™ä¸ªç«¯ç‚¹å¯ä»¥å‘Šè¯‰æˆ‘ä»¬åº”ç”¨ç¨‹åºçš„å„ç§æ—¥å¿—ä¿¡æ¯ï¼Œä¾‹å¦‚æ—¥å¿—çº§åˆ«ã€æ—¥å¿—è¾“å‡ºä½ç½®ç­‰ã€‚</li>
<li>çº¿ç¨‹ç®¡ç†ï¼šActuatoræä¾›äº†ä¸€ä¸ª/threaddumpç«¯ç‚¹ï¼Œç”¨äºæŸ¥çœ‹åº”ç”¨ç¨‹åºçš„çº¿ç¨‹ä¿¡æ¯ã€‚è¿™ä¸ªç«¯ç‚¹å¯ä»¥å‘Šè¯‰æˆ‘ä»¬åº”ç”¨ç¨‹åºçš„çº¿ç¨‹çŠ¶æ€ã€å †æ ˆä¿¡æ¯ç­‰ã€‚<br/>
Actuatorçš„åŸç†æ˜¯é€šè¿‡åœ¨åº”ç”¨ç¨‹åºä¸­æ·»åŠ ä¸€äº›ç«¯ç‚¹æ¥å®ç°çš„ã€‚è¿™äº›ç«¯ç‚¹å¯ä»¥é€šè¿‡HTTPè¯·æ±‚æ¥è®¿é—®ï¼Œå¹¶è¿”å›ä¸€äº›æœ‰ç”¨çš„ä¿¡æ¯ã€‚Spring Bootä½¿ç”¨äº†ä¸€äº›å†…ç½®çš„ç«¯ç‚¹ï¼Œä¾‹å¦‚/healthã€/metricsç­‰ï¼Œå¹¶å…è®¸æˆ‘ä»¬æ·»åŠ è‡ªå®šä¹‰çš„ç«¯ç‚¹ã€‚<br/>
ä¸‹é¢æ˜¯ä¸€ä¸ªä½¿ç”¨Actuatorçš„ç¤ºä¾‹ï¼š</li>
<li>æ·»åŠ Actuatorä¾èµ–<br/>
åœ¨pom.xmlæ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹ä¾èµ–ï¼š<br/>
xml</li>
</ol>

<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-actuator<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
&lt;/dependency
ä¸€é”®è·å–å®Œæ•´é¡¹ç›®ä»£ç 
</code></pre>
<p>ä¸€é”®è·å–å®Œæ•´é¡¹ç›®ä»£ç java</p>
<ul>
<li>1</li>
<li>2</li>
<li>3</li>
<li>4</li>
</ul>
<blockquote>
</blockquote>
<ol>
<li>é…ç½®Actuatorç«¯ç‚¹<br/>
åœ¨application.propertiesæ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹é…ç½®ï¼š<br/>
properties</li>
</ol>

<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">management.endpoints.web.exposure.include</span>=*

ä¸€é”®è·å–å®Œæ•´é¡¹ç›®ä»£ç 
</code></pre>
<p>ä¸€é”®è·å–å®Œæ•´é¡¹ç›®ä»£ç java</p>
<ul>
<li>1</li>
</ul>

<pre><code class="hljs language-less" lang="less"><span class="hljs-variable">@Component</span>
<span class="hljs-variable">@Endpoint</span>(id = <span class="hljs-string">"version"</span>)
public class VersionEndpoint {
    <span class="hljs-variable">@ReadOperation</span>
    public String <span class="hljs-built_in">getVersion</span>() {
        <span class="hljs-selector-tag">return</span> "<span class="hljs-number">1.0</span><span class="hljs-selector-class">.0</span>";
    }
}
ä¸€é”®è·å–å®Œæ•´é¡¹ç›®ä»£ç 
</code></pre>
<p>ä¸€é”®è·å–å®Œæ•´é¡¹ç›®ä»£ç java</p>
<p>åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªåä¸ºVersionEndpointçš„ç»„ä»¶ï¼Œå¹¶ä½¿ç”¨@Endpointæ³¨è§£æ¥æ ‡è®°å®ƒæ˜¯ä¸€ä¸ªActuatorç«¯ç‚¹ã€‚æˆ‘ä»¬è¿˜ä½¿ç”¨@ReadOperationæ³¨è§£æ¥æŒ‡å®šè¿™ä¸ªç«¯ç‚¹çš„æ“ä½œç±»å‹ä¸ºè¯»å–æ“ä½œã€‚æœ€åï¼Œæˆ‘ä»¬å®ç°äº†ä¸€ä¸ªåä¸ºgetVersionçš„æ–¹æ³•ï¼Œç”¨äºè¿”å›åº”ç”¨ç¨‹åºçš„ç‰ˆæœ¬ä¿¡æ¯ã€‚<br/>
å¯åŠ¨åº”ç”¨ç¨‹åºåï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä»¥ä¸‹URLè®¿é—®è‡ªå®šä¹‰çš„ç«¯ç‚¹ï¼š</p>
<pre><code class="hljs">æ€»çš„æ¥è¯´ï¼ŒActuatoræ˜¯Spring Bootæä¾›çš„ä¸€ä¸ªç®¡ç†å’Œç›‘æ§åº”ç”¨ç¨‹åºçš„æ¡†æ¶ï¼Œå®ƒå¯ä»¥å¸®åŠ©æˆ‘ä»¬æ›´å¥½åœ°äº†è§£åº”ç”¨ç¨‹åºçš„è¿è¡ŒçŠ¶å†µï¼Œå¹¶æä¾›ä¸€äº›æœ‰ç”¨çš„ç«¯ç‚¹æ¥æ£€æŸ¥å’Œç®¡ç†åº”ç”¨ç¨‹åºã€‚
</code></pre>
<h5 data-id="heading-3"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>4. å¦‚ä½•åœ¨Spring Bootä¸­å®ç°ç¼“å­˜ï¼Ÿ</h5>
<p>åœ¨Spring Bootä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨Spring Cacheæ¥å®ç°ç¼“å­˜ã€‚Spring Cacheæ˜¯Springæ¡†æ¶æä¾›çš„ä¸€ä¸ªç¼“å­˜æŠ½è±¡å±‚ï¼Œå®ƒå¯ä»¥ä¸å¤šç§ç¼“å­˜å®ç°è¿›è¡Œé›†æˆï¼Œä¾‹å¦‚Ehcacheã€Redisã€Memcachedç­‰ã€‚<br/>
Spring Cacheçš„åŸç†æ˜¯é€šè¿‡åœ¨æ–¹æ³•ä¸Šæ·»åŠ ç¼“å­˜æ³¨è§£æ¥å®ç°çš„ã€‚å½“æˆ‘ä»¬è°ƒç”¨å¸¦æœ‰ç¼“å­˜æ³¨è§£çš„æ–¹æ³•æ—¶ï¼ŒSpring Cacheä¼šè‡ªåŠ¨ä»ç¼“å­˜ä¸­è·å–æ•°æ®ï¼Œå¦‚æœç¼“å­˜ä¸­ä¸å­˜åœ¨æ•°æ®ï¼Œåˆ™ä¼šæ‰§è¡Œæ–¹æ³•å¹¶å°†ç»“æœå­˜å…¥ç¼“å­˜ä¸­ã€‚<br/>
ä¸‹é¢æ˜¯ä¸€ä¸ªä½¿ç”¨Spring Cacheçš„ç¤ºä¾‹ï¼š</p>
<ol>
<li>æ·»åŠ Spring Cacheä¾èµ–<br/>
åœ¨pom.xmlæ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹ä¾èµ–ï¼š<br/>
xml</li>
</ol>

<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-cache<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
ä¸€é”®è·å–å®Œæ•´é¡¹ç›®ä»£ç 
</code></pre>
<p>ä¸€é”®è·å–å®Œæ•´é¡¹ç›®ä»£ç java</p>
<ol>
<li>é…ç½®ç¼“å­˜<br/>
åœ¨application.propertiesæ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹é…ç½®ï¼š<br/>
properties</li>
</ol>

<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">spring.cache.type</span>=ehcache

ä¸€é”®è·å–å®Œæ•´é¡¹ç›®ä»£ç 
</code></pre>
<p>ä¸€é”®è·å–å®Œæ•´é¡¹ç›®ä»£ç java</p>
<ul>
<li>1</li>
</ul>
<p>è¿™ä¸ªé…ç½®å°†ä½¿ç”¨Ehcacheä½œä¸ºç¼“å­˜å®ç°ã€‚<br/>
3. æ·»åŠ ç¼“å­˜æ³¨è§£<br/>
åœ¨æˆ‘ä»¬éœ€è¦ç¼“å­˜çš„æ–¹æ³•ä¸Šæ·»åŠ ç¼“å­˜æ³¨è§£ï¼Œä¾‹å¦‚@Cacheableã€@CachePutã€@CacheEvictç­‰ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªä½¿ç”¨@Cacheableæ³¨è§£çš„ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserService</span> {
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> UserRepository userRepository;
     <span class="hljs-meta">@Cacheable(<span class="hljs-string">"users"</span>)</span>
    <span class="hljs-keyword">public</span> List&lt;User&gt; getAllUsers() {
        <span class="hljs-keyword">return</span> userRepository.findAll();
    }
}
ä¸€é”®è·å–å®Œæ•´é¡¹ç›®ä»£ç 
</code></pre>
<p>ä¸€é”®è·å–å®Œæ•´é¡¹ç›®ä»£ç java</p>
<p>åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬åœ¨getAllUsersæ–¹æ³•ä¸Šæ·»åŠ äº†@Cacheableæ³¨è§£ï¼Œå¹¶æŒ‡å®šäº†ç¼“å­˜åç§°ä¸º"users"ã€‚å½“æˆ‘ä»¬è°ƒç”¨getAllUsersæ–¹æ³•æ—¶ï¼ŒSpring Cacheä¼šè‡ªåŠ¨ä»ç¼“å­˜ä¸­è·å–æ•°æ®ï¼Œå¦‚æœç¼“å­˜ä¸­ä¸å­˜åœ¨æ•°æ®ï¼Œåˆ™ä¼šæ‰§è¡Œæ–¹æ³•å¹¶å°†ç»“æœå­˜å…¥ç¼“å­˜ä¸­ã€‚<br/>
4. ä½¿ç”¨ç¼“å­˜<br/>
åœ¨å…¶ä»–åœ°æ–¹è°ƒç”¨getAllUsersæ–¹æ³•æ—¶ï¼ŒSpring Cacheä¼šè‡ªåŠ¨ä»ç¼“å­˜ä¸­è·å–æ•°æ®ï¼Œå¦‚æœç¼“å­˜ä¸­ä¸å­˜åœ¨æ•°æ®ï¼Œåˆ™ä¼šæ‰§è¡Œæ–¹æ³•å¹¶å°†ç»“æœå­˜å…¥ç¼“å­˜ä¸­ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªä½¿ç”¨getAllUsersæ–¹æ³•çš„ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-meta">@RestController</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserController</span> {
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> UserService userService;
     <span class="hljs-meta">@GetMapping(<span class="hljs-string">"/users"</span>)</span>
    <span class="hljs-keyword">public</span> List&lt;User&gt; getAllUsers() {
        <span class="hljs-keyword">return</span> userService.getAllUsers();
    }
}
ä¸€é”®è·å–å®Œæ•´é¡¹ç›®ä»£ç 
</code></pre>
<p>ä¸€é”®è·å–å®Œæ•´é¡¹ç›®ä»£ç java</p>
<p>åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬åœ¨UserControllerä¸­æ³¨å…¥äº†UserServiceï¼Œå¹¶è°ƒç”¨äº†getAllUsersæ–¹æ³•ï¼ŒSpring Cacheä¼šè‡ªåŠ¨ä»ç¼“å­˜ä¸­è·å–æ•°æ®ï¼Œå¦‚æœç¼“å­˜ä¸­ä¸å­˜åœ¨æ•°æ®ï¼Œåˆ™ä¼šæ‰§è¡Œæ–¹æ³•å¹¶å°†ç»“æœå­˜å…¥ç¼“å­˜ä¸­ã€‚<br/>
æ€»çš„æ¥è¯´ï¼Œä½¿ç”¨Spring Cacheå¯ä»¥æ–¹ä¾¿åœ°å®ç°ç¼“å­˜ï¼Œåªéœ€è¦åœ¨æ–¹æ³•ä¸Šæ·»åŠ ç¼“å­˜æ³¨è§£å³å¯ã€‚åŒæ—¶ï¼ŒSpring Cacheè¿˜æä¾›äº†å¤šç§ç¼“å­˜å®ç°çš„é›†æˆï¼Œå¯ä»¥æ ¹æ®å…·ä½“éœ€æ±‚é€‰æ‹©åˆé€‚çš„ç¼“å­˜å®ç°ã€‚</p>
<blockquote>
<blockquote>
<p><strong>ç¯‡å¹…é™åˆ¶ä¸‹é¢å°±åªèƒ½ç»™å¤§å®¶å±•ç¤ºå°å†Œéƒ¨åˆ†å†…å®¹äº†ã€‚æ•´ç†äº†ä¸€ä»½æ ¸å¿ƒé¢è¯•ç¬”è®°åŒ…æ‹¬äº†ï¼šJavaé¢è¯•ã€Springã€JVMã€MyBatisã€Redisã€MySQLã€å¹¶å‘ç¼–ç¨‹ã€å¾®æœåŠ¡ã€Linuxã€Springbootã€SpringCloudã€MQã€Kafka é¢è¯•ä¸“é¢˜</strong></p>
<blockquote>
</blockquote>
<p><strong>éœ€è¦å…¨å¥—é¢è¯•ç¬”è®°åŠç­”æ¡ˆã€æ‰«ä¸€æ‰«ã€‘</strong> Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â å³å¯å…è´¹è·å–**</p>
</blockquote>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/acd2b3226ab24f67ab90fc0e9834bd1a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2YeawtOinow==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766648018&amp;x-signature=p3Ng5S3NnQCV1zccGuIcpXlRito%3D" alt="8fbf1ef8b61e2dbbb33b7690a41d12e.png" loading="lazy"/></p>
</blockquote>
<h5 data-id="heading-4"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>5. Spring Bootä¸­çš„AOPæ˜¯ä»€ä¹ˆï¼Ÿå®ƒçš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ</h5>
<p>AOPï¼ˆé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼‰æ˜¯Springæ¡†æ¶çš„ä¸€ä¸ªé‡è¦ç‰¹æ€§ï¼Œå¯ä»¥åœ¨åº”ç”¨ç¨‹åºä¸­æ–¹ä¾¿åœ°å®ç°æ¨ªåˆ‡å…³æ³¨ç‚¹ï¼ˆCross-cutting Concernsï¼‰çš„æ¨¡å—åŒ–ã€‚Spring Bootä¸­çš„AOPæ˜¯åŸºäºSpringæ¡†æ¶å®ç°çš„ï¼Œæä¾›äº†ä¸€ç§ä¾¿æ·çš„æ–¹å¼æ¥ç®¡ç†å’Œä½¿ç”¨AOPã€‚<br/>
AOPçš„ä½œç”¨æ˜¯å°†åº”ç”¨ç¨‹åºçš„ä¸šåŠ¡é€»è¾‘ä¸æ¨ªåˆ‡å…³æ³¨ç‚¹åˆ†ç¦»ï¼Œä»è€Œæé«˜åº”ç”¨ç¨‹åºçš„å¯ç»´æŠ¤æ€§å’Œå¯é‡ç”¨æ€§ã€‚ä¾‹å¦‚ï¼Œæ—¥å¿—ã€äº‹åŠ¡ã€å®‰å…¨ç­‰éƒ½æ˜¯æ¨ªåˆ‡å…³æ³¨ç‚¹ï¼Œå¯ä»¥ä½¿ç”¨AOPå°†å®ƒä»¬æ¨¡å—åŒ–ï¼Œä»è€Œä½¿å¾—åº”ç”¨ç¨‹åºçš„ä¸šåŠ¡é€»è¾‘æ›´åŠ æ¸…æ™°å’Œç®€æ´ã€‚<br/>
åœ¨Spring Bootä¸­ï¼Œå¯ä»¥ä½¿ç”¨@Aspectæ³¨è§£æ¥å®šä¹‰åˆ‡é¢ï¼Œä½¿ç”¨@Pointcutæ³¨è§£æ¥å®šä¹‰åˆ‡ç‚¹ï¼Œä½¿ç”¨@Beforeã€@Afterã€@Aroundç­‰æ³¨è§£æ¥å®šä¹‰é€šçŸ¥ï¼ˆAdviceï¼‰ï¼Œä»è€Œå®ç°AOPçš„åŠŸèƒ½ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªä½¿ç”¨Spring Boot AOPçš„ç¤ºä¾‹ï¼š</p>
<ol>
<li>æ·»åŠ Spring Boot AOPä¾èµ–<br/>
åœ¨pom.xmlæ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹ä¾èµ–ï¼š<br/>
xml</li>
</ol>

<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-aop<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
ä¸€é”®è·å–å®Œæ•´é¡¹ç›®ä»£ç 
</code></pre>
<p>ä¸€é”®è·å–å®Œæ•´é¡¹ç›®ä»£ç java</p>
<ol>
<li>å®šä¹‰åˆ‡é¢<br/>
å®šä¹‰ä¸€ä¸ªåˆ‡é¢ç±»ï¼Œå¹¶ä½¿ç”¨@Aspectæ³¨è§£æ¥æ ‡è¯†å®ƒæ˜¯ä¸€ä¸ªåˆ‡é¢ï¼š</li>
</ol>

<pre><code class="hljs language-less" lang="less"><span class="hljs-variable">@Aspect</span>
<span class="hljs-variable">@Component</span>
public class LogAspect {
    <span class="hljs-variable">@Pointcut</span>(<span class="hljs-string">"execution(* com.example.demo.service.UserService.*(..))"</span>)
    public void <span class="hljs-built_in">pointcut</span>() {}
     <span class="hljs-variable">@Before</span>(<span class="hljs-string">"pointcut()"</span>)
    public void <span class="hljs-built_in">before</span>() {
        <span class="hljs-selector-tag">System</span><span class="hljs-selector-class">.out</span><span class="hljs-selector-class">.println</span>(<span class="hljs-string">"before method..."</span>);
    }
     @<span class="hljs-selector-tag">After</span>(<span class="hljs-string">"pointcut()"</span>)
    <span class="hljs-selector-tag">public</span> <span class="hljs-selector-tag">void</span> <span class="hljs-selector-tag">after</span>() {
        <span class="hljs-selector-tag">System</span><span class="hljs-selector-class">.out</span><span class="hljs-selector-class">.println</span>(<span class="hljs-string">"after method..."</span>);
    }
}
ä¸€é”®è·å–å®Œæ•´é¡¹ç›®ä»£ç 
</code></pre>
<p>ä¸€é”®è·å–å®Œæ•´é¡¹ç›®ä»£ç java</p>
<p>åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªåˆ‡é¢ç±»LogAspectï¼Œå¹¶ä½¿ç”¨@Aspectæ³¨è§£æ¥æ ‡è¯†å®ƒæ˜¯ä¸€ä¸ªåˆ‡é¢ã€‚æˆ‘ä»¬ä½¿ç”¨@Pointcutæ³¨è§£æ¥å®šä¹‰åˆ‡ç‚¹ï¼ŒæŒ‡å®šäº†UserServiceç±»ä¸­çš„æ‰€æœ‰æ–¹æ³•éƒ½æ˜¯åˆ‡ç‚¹ã€‚æˆ‘ä»¬ä½¿ç”¨@Beforeæ³¨è§£æ¥å®šä¹‰å‰ç½®é€šçŸ¥ï¼Œåœ¨åˆ‡ç‚¹æ–¹æ³•æ‰§è¡Œå‰è¾“å‡ºä¸€æ¡æ—¥å¿—ï¼›ä½¿ç”¨@Afteræ³¨è§£æ¥å®šä¹‰åç½®é€šçŸ¥ï¼Œåœ¨åˆ‡ç‚¹æ–¹æ³•æ‰§è¡Œåè¾“å‡ºä¸€æ¡æ—¥å¿—ã€‚<br/>
3. ä½¿ç”¨åˆ‡é¢<br/>
åœ¨éœ€è¦ä½¿ç”¨åˆ‡é¢çš„ç±»ä¸­æ³¨å…¥LogAspectå³å¯ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserService</span> {
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> <span class="hljs-title class_">LogAspect</span> logAspect;
     <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">addUser</span>(<span class="hljs-params">User user</span>) {
        logAspect.<span class="hljs-title function_">before</span>();
        <span class="hljs-comment">// add user</span>
        logAspect.<span class="hljs-title function_">after</span>();
    }
}
ä¸€é”®è·å–å®Œæ•´é¡¹ç›®ä»£ç 
</code></pre>
<p>ä¸€é”®è·å–å®Œæ•´é¡¹ç›®ä»£ç java</p>
<p>åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬åœ¨UserServiceç±»ä¸­æ³¨å…¥äº†LogAspectï¼Œå¹¶åœ¨addUseræ–¹æ³•ä¸­è°ƒç”¨äº†LogAspectçš„beforeå’Œafteræ–¹æ³•ã€‚</p>
<p>æ€»çš„æ¥è¯´ï¼ŒSpring Boot AOPæä¾›äº†ä¸€ç§æ–¹ä¾¿çš„æ–¹å¼æ¥ç®¡ç†å’Œä½¿ç”¨AOPï¼Œå¯ä»¥æ–¹ä¾¿åœ°å®ç°æ¨ªåˆ‡å…³æ³¨ç‚¹çš„æ¨¡å—åŒ–ã€‚ä½¿ç”¨Spring Boot AOPï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å®šä¹‰åˆ‡é¢ã€åˆ‡ç‚¹å’Œé€šçŸ¥æ¥å®ç°AOPçš„åŠŸèƒ½ã€‚</p>
<h5 data-id="heading-5"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>6. å¦‚ä½•åœ¨Spring Bootä¸­å®ç°å¼‚æ­¥ç¼–ç¨‹ï¼Ÿ</h5>
<p>åœ¨Spring Bootä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å¼‚æ­¥ç¼–ç¨‹æ¥æé«˜åº”ç”¨ç¨‹åºçš„æ€§èƒ½å’Œååé‡ã€‚Spring Bootæä¾›äº†å¤šç§æ–¹å¼æ¥å®ç°å¼‚æ­¥ç¼–ç¨‹ï¼ŒåŒ…æ‹¬ä½¿ç”¨çº¿ç¨‹æ± ã€ä½¿ç”¨æ¶ˆæ¯é˜Ÿåˆ—ç­‰ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªä½¿ç”¨çº¿ç¨‹æ± å®ç°å¼‚æ­¥ç¼–ç¨‹çš„ç¤ºä¾‹ï¼š</p>
<ol>
<li>æ·»åŠ Spring Bootå¼‚æ­¥ç¼–ç¨‹ä¾èµ–<br/>
åœ¨pom.xmlæ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹ä¾èµ–ï¼š<br/>
xml</li>
</ol>

<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
ä¸€é”®è·å–å®Œæ•´é¡¹ç›®ä»£ç 
</code></pre>
<p>ä¸€é”®è·å–å®Œæ•´é¡¹ç›®ä»£ç java</p>
<ol>
<li>å¯ç”¨å¼‚æ­¥æ”¯æŒ<br/>
åœ¨Spring Bootåº”ç”¨ç¨‹åºçš„ä¸»ç±»ä¸­æ·»åŠ @EnableAsyncæ³¨è§£æ¥å¯ç”¨å¼‚æ­¥æ”¯æŒï¼š</li>
</ol>

<pre><code class="hljs language-less" lang="less"><span class="hljs-variable">@SpringBootApplication</span>
<span class="hljs-variable">@EnableAsync</span>
public class Application {
    <span class="hljs-selector-tag">public</span> <span class="hljs-selector-tag">static</span> <span class="hljs-selector-tag">void</span> <span class="hljs-selector-tag">main</span>(String[] args) {
        <span class="hljs-selector-tag">SpringApplication</span><span class="hljs-selector-class">.run</span>(Application.class, args);
    }
}
ä¸€é”®è·å–å®Œæ•´é¡¹ç›®ä»£ç 
</code></pre>
<p>ä¸€é”®è·å–å®Œæ•´é¡¹ç›®ä»£ç java</p>
<ol>
<li>å®šä¹‰å¼‚æ­¥æ–¹æ³•<br/>
åœ¨éœ€è¦å¼‚æ­¥æ‰§è¡Œçš„æ–¹æ³•ä¸Šæ·»åŠ @Asyncæ³¨è§£ï¼Œå¹¶æŒ‡å®šçº¿ç¨‹æ± åç§°ï¼š</li>
</ol>

<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserService</span> {
    <span class="hljs-meta">@Async</span>(<span class="hljs-string">"asyncExecutor"</span>)
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">addUser</span>(<span class="hljs-params">User user</span>) {
        <span class="hljs-comment">// add user</span>
    }
}
ä¸€é”®è·å–å®Œæ•´é¡¹ç›®ä»£ç 
</code></pre>
<p>ä¸€é”®è·å–å®Œæ•´é¡¹ç›®ä»£ç java</p>
<p>åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬åœ¨UserServiceç±»ä¸­å®šä¹‰äº†ä¸€ä¸ªaddUseræ–¹æ³•ï¼Œå¹¶åœ¨æ–¹æ³•ä¸Šæ·»åŠ äº†@Asyncæ³¨è§£ï¼ŒæŒ‡å®šäº†çº¿ç¨‹æ± åç§°ä¸º"asyncExecutor"ã€‚è¿™æ ·ï¼Œå½“è°ƒç”¨addUseræ–¹æ³•æ—¶ï¼ŒSpringä¼šå°†è¯¥æ–¹æ³•çš„æ‰§è¡Œæ”¾å…¥çº¿ç¨‹æ± ä¸­å¼‚æ­¥æ‰§è¡Œã€‚<br/>
4. é…ç½®çº¿ç¨‹æ± <br/>
åœ¨Spring Bootçš„é…ç½®æ–‡ä»¶application.propertiesä¸­æ·»åŠ ä»¥ä¸‹é…ç½®ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">properties
<span class="hljs-attr">spring.task.execution.pool.core-size</span>=<span class="hljs-number">5</span>
<span class="hljs-attr">spring.task.execution.pool.max-size</span>=<span class="hljs-number">10</span>
<span class="hljs-attr">spring.task.execution.pool.queue-capacity</span>=<span class="hljs-number">100</span>
ä¸€é”®è·å–å®Œæ•´é¡¹ç›®ä»£ç 
</code></pre>
<p>ä¸€é”®è·å–å®Œæ•´é¡¹ç›®ä»£ç java</p>
<ul>
<li>1</li>
<li>2</li>
<li>3</li>
<li>4</li>
</ul>
<p>åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬é…ç½®äº†ä¸€ä¸ªåä¸º"asyncExecutor"çš„çº¿ç¨‹æ± ï¼Œæ ¸å¿ƒçº¿ç¨‹æ•°ä¸º5ï¼Œæœ€å¤§çº¿ç¨‹æ•°ä¸º10ï¼Œé˜Ÿåˆ—å®¹é‡ä¸º100ã€‚<br/>
æ€»çš„æ¥è¯´ï¼ŒSpring Bootæä¾›äº†å¤šç§æ–¹å¼æ¥å®ç°å¼‚æ­¥ç¼–ç¨‹ï¼ŒåŒ…æ‹¬ä½¿ç”¨çº¿ç¨‹æ± ã€ä½¿ç”¨æ¶ˆæ¯é˜Ÿåˆ—ç­‰ã€‚ä½¿ç”¨Spring Bootå¼‚æ­¥ç¼–ç¨‹ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æ·»åŠ @EnableAsyncæ³¨è§£æ¥å¯ç”¨å¼‚æ­¥æ”¯æŒï¼Œé€šè¿‡åœ¨æ–¹æ³•ä¸Šæ·»åŠ @Asyncæ³¨è§£æ¥æŒ‡å®šå¼‚æ­¥æ‰§è¡Œçš„æ–¹æ³•ï¼Œé€šè¿‡é…ç½®çº¿ç¨‹æ± æ¥æ§åˆ¶å¼‚æ­¥æ‰§è¡Œçš„çº¿ç¨‹æ•°å’Œé˜Ÿåˆ—å®¹é‡ã€‚</p>
<ol start="4">
<li>é…ç½®äº‹åŠ¡ç®¡ç†å™¨</li>
</ol>
<h5 data-id="heading-6"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>7. Spring Bootä¸­çš„äº‹åŠ¡ç®¡ç†æ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿ</h5>
<p>Spring Bootä¸­çš„äº‹åŠ¡ç®¡ç†æ˜¯é€šè¿‡Springæ¡†æ¶æä¾›çš„äº‹åŠ¡ç®¡ç†æœºåˆ¶å®ç°çš„ã€‚Springæ¡†æ¶æä¾›äº†ä¸€ç§å£°æ˜å¼äº‹åŠ¡ç®¡ç†çš„æ–¹å¼ï¼Œå³é€šè¿‡åœ¨æ–¹æ³•ä¸Šæ·»åŠ @Transactionalæ³¨è§£æ¥æŒ‡å®šäº‹åŠ¡çš„è¾¹ç•Œï¼Œä»è€Œå®ç°äº‹åŠ¡ç®¡ç†ã€‚<br/>
ä¸‹é¢æ˜¯ä¸€ä¸ªåœ¨Spring Bootä¸­ä½¿ç”¨äº‹åŠ¡ç®¡ç†çš„ç¤ºä¾‹ï¼š</p>
<ol>
<li>æ·»åŠ Spring Bootäº‹åŠ¡ç®¡ç†ä¾èµ–<br/>
åœ¨pom.xmlæ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹ä¾èµ–ï¼š<br/>
xml</li>
</ol>

<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-data-jpa<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
ä¸€é”®è·å–å®Œæ•´é¡¹ç›®ä»£ç 
</code></pre>
<p>ä¸€é”®è·å–å®Œæ•´é¡¹ç›®ä»£ç java</p>
<ul>
<li>1</li>
<li>2</li>
<li>3</li>
<li>4</li>
</ul>
<ol>
<li>å¯ç”¨äº‹åŠ¡ç®¡ç†<br/>
åœ¨Spring Bootåº”ç”¨ç¨‹åºçš„ä¸»ç±»ä¸­æ·»åŠ @EnableTransactionManagementæ³¨è§£æ¥å¯ç”¨äº‹åŠ¡ç®¡ç†ï¼š</li>
</ol>

<pre><code class="hljs language-less" lang="less"><span class="hljs-variable">@SpringBootApplication</span>
<span class="hljs-variable">@EnableTransactionManagement</span>
public class Application {
    <span class="hljs-selector-tag">public</span> <span class="hljs-selector-tag">static</span> <span class="hljs-selector-tag">void</span> <span class="hljs-selector-tag">main</span>(String[] args) {
        <span class="hljs-selector-tag">SpringApplication</span><span class="hljs-selector-class">.run</span>(Application.class, args);
    }
}
ä¸€é”®è·å–å®Œæ•´é¡¹ç›®ä»£ç 
</code></pre>
<p>ä¸€é”®è·å–å®Œæ•´é¡¹ç›®ä»£ç java</p>
<ol>
<li>å®šä¹‰äº‹åŠ¡æ–¹æ³•<br/>
åœ¨éœ€è¦è¿›è¡Œäº‹åŠ¡ç®¡ç†çš„æ–¹æ³•ä¸Šæ·»åŠ @Transactionalæ³¨è§£ï¼š</li>
</ol>

<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserService</span> {
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> <span class="hljs-title class_">UserRepository</span> userRepository;
     <span class="hljs-meta">@Transactional</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">addUser</span>(<span class="hljs-params">User user</span>) {
        userRepository.<span class="hljs-title function_">save</span>(user);
    }
}
ä¸€é”®è·å–å®Œæ•´é¡¹ç›®ä»£ç 
</code></pre>
<p>ä¸€é”®è·å–å®Œæ•´é¡¹ç›®ä»£ç java</p>
<p>åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬åœ¨UserServiceç±»ä¸­å®šä¹‰äº†ä¸€ä¸ªaddUseræ–¹æ³•ï¼Œå¹¶åœ¨æ–¹æ³•ä¸Šæ·»åŠ äº†@Transactionalæ³¨è§£ã€‚è¿™æ ·ï¼Œå½“è°ƒç”¨addUseræ–¹æ³•æ—¶ï¼ŒSpringä¼šè‡ªåŠ¨å¼€å¯ä¸€ä¸ªäº‹åŠ¡ï¼Œå¹¶åœ¨æ–¹æ³•æ‰§è¡Œå®Œæˆåæ ¹æ®æ–¹æ³•çš„æ‰§è¡Œç»“æœå†³å®šæ˜¯æäº¤äº‹åŠ¡è¿˜æ˜¯å›æ»šäº‹åŠ¡ã€‚<br/>
æ€»çš„æ¥è¯´ï¼ŒSpring Bootä¸­çš„äº‹åŠ¡ç®¡ç†æ˜¯é€šè¿‡Springæ¡†æ¶æä¾›çš„äº‹åŠ¡ç®¡ç†æœºåˆ¶å®ç°çš„ã€‚ä½¿ç”¨Spring Bootäº‹åŠ¡ç®¡ç†ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡åœ¨æ–¹æ³•ä¸Šæ·»åŠ @Transactionalæ³¨è§£æ¥æŒ‡å®šäº‹åŠ¡çš„è¾¹ç•Œï¼Œä»è€Œå®ç°äº‹åŠ¡ç®¡ç†ã€‚</p>
<h5 data-id="heading-7"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>8. å¦‚ä½•åœ¨Spring Bootä¸­å®ç°å®‰å…¨æ€§ï¼Ÿ</h5>
<p>åœ¨Spring Bootä¸­å®ç°å®‰å…¨æ€§é€šå¸¸æ˜¯é€šè¿‡Spring Securityæ¡†æ¶æ¥å®ç°çš„ã€‚Spring Securityæ˜¯ä¸€ä¸ªåŸºäºSpringæ¡†æ¶çš„å®‰å…¨æ€§æ¡†æ¶ï¼Œå®ƒæä¾›äº†ä¸€ç³»åˆ—çš„å®‰å…¨æ€§åŠŸèƒ½ï¼Œå¦‚èº«ä»½éªŒè¯ã€æˆæƒã€å¯†ç åŠ å¯†ç­‰ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªåœ¨Spring Bootä¸­ä½¿ç”¨Spring Securityå®ç°å®‰å…¨æ€§çš„ç¤ºä¾‹ï¼š</p>
<ol>
<li>æ·»åŠ Spring Bootå®‰å…¨æ€§ä¾èµ–<br/>
åœ¨pom.xmlæ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹ä¾èµ–ï¼š<br/>
xml</li>
</ol>

<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-security<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
ä¸€é”®è·å–å®Œæ•´é¡¹ç›®ä»£ç 
</code></pre>
<p>ä¸€é”®è·å–å®Œæ•´é¡¹ç›®ä»£ç java</p>
<ol>
<li>é…ç½®Spring Security<br/>
åœ¨Spring Bootåº”ç”¨ç¨‹åºçš„é…ç½®ç±»ä¸­æ·»åŠ ä»¥ä¸‹é…ç½®ï¼š</li>
</ol>

<pre><code class="hljs language-scala" lang="scala"><span class="hljs-meta">@Configuration</span>
<span class="hljs-meta">@EnableWebSecurity</span>
public <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SecurityConfig</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">WebSecurityConfigurerAdapter</span> </span>{
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">protected</span> void configure(<span class="hljs-type">HttpSecurity</span> http) <span class="hljs-keyword">throws</span> <span class="hljs-type">Exception</span> {
        http.authorizeRequests()
                .antMatchers(<span class="hljs-string">"/admin/**"</span>).hasRole(<span class="hljs-string">"ADMIN"</span>)
                .antMatchers(<span class="hljs-string">"/user/**"</span>).hasRole(<span class="hljs-string">"USER"</span>)
                .anyRequest().authenticated()
                .and()
                .formLogin()
                .and()
                .logout();
    }
    <span class="hljs-meta">@Autowired</span>
    public void configureGlobal(<span class="hljs-type">AuthenticationManagerBuilder</span> auth) <span class="hljs-keyword">throws</span> <span class="hljs-type">Exception</span> {
        auth.inMemoryAuthentication()
                .withUser(<span class="hljs-string">"admin"</span>).password(<span class="hljs-string">"{noop}admin"</span>).roles(<span class="hljs-string">"ADMIN"</span>)
                .and()
                .withUser(<span class="hljs-string">"user"</span>).password(<span class="hljs-string">"{noop}user"</span>).roles(<span class="hljs-string">"USER"</span>);
    }
}
ä¸€é”®è·å–å®Œæ•´é¡¹ç›®ä»£ç 
</code></pre>
<p>ä¸€é”®è·å–å®Œæ•´é¡¹ç›®ä»£ç java</p>
<p>åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªSecurityConfigç±»ï¼Œå¹¶é€šè¿‡@EnableWebSecurityæ³¨è§£å¯ç”¨äº†Spring Securityã€‚åœ¨configureæ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†è®¿é—®è·¯å¾„å’Œæ‰€éœ€çš„è§’è‰²ã€‚åœ¨configureGlobalæ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸¤ä¸ªç”¨æˆ·å’Œä»–ä»¬çš„è§’è‰²ã€‚<br/>
3. ä½¿ç”¨Spring Securityä¿æŠ¤REST API<br/>
åœ¨Spring Bootåº”ç”¨ç¨‹åºçš„æ§åˆ¶å™¨ç±»ä¸­æ·»åŠ ä»¥ä¸‹æ³¨è§£æ¥ä¿æŠ¤REST APIï¼š</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-variable">@RestController</span>
<span class="hljs-variable">@RequestMapping</span>(<span class="hljs-string">"/api"</span>)
public class ApiController {
    <span class="hljs-variable">@GetMapping</span>(<span class="hljs-string">"/hello"</span>)
    <span class="hljs-variable">@PreAuthorize</span>(<span class="hljs-string">"hasRole('USER')"</span>)
    public String <span class="hljs-built_in">hello</span>() {
        <span class="hljs-selector-tag">return</span> "<span class="hljs-selector-tag">Hello</span>, <span class="hljs-selector-tag">user</span>!";
    }
    @<span class="hljs-selector-tag">GetMapping</span>(<span class="hljs-string">"/admin"</span>)
    @<span class="hljs-selector-tag">PreAuthorize</span>(<span class="hljs-string">"hasRole('ADMIN')"</span>)
    <span class="hljs-selector-tag">public</span> <span class="hljs-selector-tag">String</span> <span class="hljs-selector-tag">admin</span>() {
        <span class="hljs-selector-tag">return</span> "<span class="hljs-selector-tag">Hello</span>, <span class="hljs-selector-tag">admin</span>!";
    }
}
ä¸€é”®è·å–å®Œæ•´é¡¹ç›®ä»£ç 
</code></pre>
<p>ä¸€é”®è·å–å®Œæ•´é¡¹ç›®ä»£ç java</p>
<p>åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªApiControllerç±»ï¼Œå¹¶åœ¨æ–¹æ³•ä¸Šæ·»åŠ äº†@PreAuthorizeæ³¨è§£æ¥é™åˆ¶è®¿é—®ã€‚åœ¨helloæ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬é™åˆ¶åªæœ‰æ‹¥æœ‰USERè§’è‰²çš„ç”¨æˆ·æ‰èƒ½è®¿é—®ã€‚åœ¨adminæ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬é™åˆ¶åªæœ‰æ‹¥æœ‰ADMINè§’è‰²çš„ç”¨æˆ·æ‰èƒ½è®¿é—®ã€‚<br/>
æ€»çš„æ¥è¯´ï¼ŒSpring Bootä¸­å®ç°å®‰å…¨æ€§é€šå¸¸æ˜¯é€šè¿‡Spring Securityæ¡†æ¶æ¥å®ç°çš„ã€‚ä½¿ç”¨Spring Securityï¼Œæˆ‘ä»¬å¯ä»¥è½»æ¾åœ°å®ç°èº«ä»½éªŒè¯ã€æˆæƒç­‰å®‰å…¨æ€§åŠŸèƒ½ã€‚</p>
<h5 data-id="heading-8"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>9. å¦‚ä½•åœ¨Spring Bootä¸­ä½¿ç”¨æ¶ˆæ¯é˜Ÿåˆ—ï¼Ÿ</h5>
<p>åœ¨Spring Bootä¸­ä½¿ç”¨æ¶ˆæ¯é˜Ÿåˆ—é€šå¸¸æ˜¯é€šè¿‡Spring Bootçš„é›†æˆæ¥å®ç°çš„ã€‚Spring Bootæä¾›äº†å¯¹å¤šç§æ¶ˆæ¯é˜Ÿåˆ—çš„æ”¯æŒï¼ŒåŒ…æ‹¬RabbitMQã€Kafkaå’ŒActiveMQç­‰ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªåœ¨Spring Bootä¸­ä½¿ç”¨RabbitMQæ¶ˆæ¯é˜Ÿåˆ—çš„ç¤ºä¾‹ï¼š</p>
<ol>
<li>æ·»åŠ Spring Boot RabbitMQä¾èµ–<br/>
åœ¨pom.xmlæ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹ä¾èµ–ï¼š<br/>
xml</li>
</ol>

<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-amqp<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
ä¸€é”®è·å–å®Œæ•´é¡¹ç›®ä»£ç 
</code></pre>
<p>ä¸€é”®è·å–å®Œæ•´é¡¹ç›®ä»£ç java</p>
<ul>
<li>1</li>
<li>2</li>
<li>3</li>
<li>4</li>
</ul>
<ol>
<li>é…ç½®RabbitMQè¿æ¥<br/>
åœ¨application.propertiesæ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹é…ç½®ï¼š<br/>
properties</li>
</ol>

<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">spring.rabbitmq.host</span>=localhost
<span class="hljs-attr">spring.rabbitmq.port</span>=<span class="hljs-number">5672</span>
<span class="hljs-attr">spring.rabbitmq.username</span>=guest
<span class="hljs-attr">spring.rabbitmq.password</span>=guest
ä¸€é”®è·å–å®Œæ•´é¡¹ç›®ä»£ç 
</code></pre>
<blockquote>
<blockquote>
<p><strong>ç¯‡å¹…é™åˆ¶ä¸‹é¢å°±åªèƒ½ç»™å¤§å®¶å±•ç¤ºå°å†Œéƒ¨åˆ†å†…å®¹äº†ã€‚æ•´ç†äº†ä¸€ä»½æ ¸å¿ƒé¢è¯•ç¬”è®°åŒ…æ‹¬äº†ï¼šJavaé¢è¯•ã€Springã€JVMã€MyBatisã€Redisã€MySQLã€å¹¶å‘ç¼–ç¨‹ã€å¾®æœåŠ¡ã€Linuxã€Springbootã€SpringCloudã€MQã€Kafka é¢è¯•ä¸“é¢˜</strong></p>
<blockquote>
</blockquote>
<p><strong>éœ€è¦å…¨å¥—é¢è¯•ç¬”è®°åŠç­”æ¡ˆã€æ‰«ä¸€æ‰«ã€‘</strong> Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â å³å¯å…è´¹è·å–**</p>
</blockquote>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/acd2b3226ab24f67ab90fc0e9834bd1a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2YeawtOinow==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766648018&amp;x-signature=p3Ng5S3NnQCV1zccGuIcpXlRito%3D" alt="8fbf1ef8b61e2dbbb33b7690a41d12e.png" loading="lazy"/>
ä¸€é”®è·å–å®Œæ•´é¡¹ç›®ä»£ç java</p>
</blockquote>
<p>åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†RabbitMQæœåŠ¡å™¨çš„ä¸»æœºåã€ç«¯å£å·ã€ç”¨æˆ·åå’Œå¯†ç ã€‚<br/>
3. å‘é€æ¶ˆæ¯åˆ°RabbitMQé˜Ÿåˆ—<br/>
åœ¨Spring Bootåº”ç”¨ç¨‹åºä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨RabbitTemplateç±»æ¥å‘é€æ¶ˆæ¯åˆ°RabbitMQé˜Ÿåˆ—ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-variable">@RestController</span>
<span class="hljs-variable">@RequestMapping</span>(<span class="hljs-string">"/api"</span>)
public class ApiController {
    <span class="hljs-variable">@Autowired</span>
    private RabbitTemplate rabbitTemplate;
    <span class="hljs-variable">@PostMapping</span>(<span class="hljs-string">"/message"</span>)
    public void <span class="hljs-built_in">sendMessage</span>(<span class="hljs-variable">@RequestBody</span> String message) {
        <span class="hljs-selector-tag">rabbitTemplate</span><span class="hljs-selector-class">.convertAndSend</span>(<span class="hljs-string">"myExchange"</span>, <span class="hljs-string">"myRoutingKey"</span>, message);
    }
}
ä¸€é”®è·å–å®Œæ•´é¡¹ç›®ä»£ç 
</code></pre>
<p>ä¸€é”®è·å–å®Œæ•´é¡¹ç›®ä»£ç java</p>
<p>åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªApiControllerç±»ï¼Œå¹¶åœ¨æ–¹æ³•ä¸Šæ·»åŠ äº†@PostMappingæ³¨è§£ã€‚åœ¨sendMessageæ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨RabbitTemplateç±»å°†æ¶ˆæ¯å‘é€åˆ°åä¸ºâ€œmyExchangeâ€çš„äº¤æ¢æœºï¼Œå¹¶ä½¿ç”¨åä¸ºâ€œmyRoutingKeyâ€çš„è·¯ç”±é”®å°†æ¶ˆæ¯è·¯ç”±åˆ°é˜Ÿåˆ—ã€‚<br/>
4. æ¥æ”¶RabbitMQé˜Ÿåˆ—ä¸­çš„æ¶ˆæ¯<br/>
åœ¨Spring Bootåº”ç”¨ç¨‹åºä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨@RabbitListeneræ³¨è§£æ¥æ¥æ”¶RabbitMQé˜Ÿåˆ—ä¸­çš„æ¶ˆæ¯ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MessageListener</span> {
    <span class="hljs-meta">@RabbitListener</span>(queues = <span class="hljs-string">"myQueue"</span>)
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">receiveMessage</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> message</span>) {
        <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">"Received message: "</span> + message);
    }
}
ä¸€é”®è·å–å®Œæ•´é¡¹ç›®ä»£ç 
</code></pre>
<p>ä¸€é”®è·å–å®Œæ•´é¡¹ç›®ä»£ç java</p>
<p>åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªMessageListenerç±»ï¼Œå¹¶ä½¿ç”¨@RabbitListeneræ³¨è§£æ¥æŒ‡å®šè¦ç›‘å¬çš„é˜Ÿåˆ—ã€‚åœ¨receiveMessageæ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬æ‰“å°å‡ºæ¥æ”¶åˆ°çš„æ¶ˆæ¯ã€‚<br/>
æ€»çš„æ¥è¯´ï¼Œåœ¨Spring Bootä¸­ä½¿ç”¨æ¶ˆæ¯é˜Ÿåˆ—é€šå¸¸æ˜¯é€šè¿‡Spring Bootçš„é›†æˆæ¥å®ç°çš„ã€‚ä½¿ç”¨æ¶ˆæ¯é˜Ÿåˆ—ï¼Œæˆ‘ä»¬å¯ä»¥è½»æ¾åœ°å®ç°å¼‚æ­¥é€šä¿¡ã€è§£è€¦å’Œè´Ÿè½½å‡è¡¡ç­‰åŠŸèƒ½ã€‚</p>
<ol start="4">
<li>é…ç½®äº‹åŠ¡ç®¡ç†å™¨</li>
</ol>
<h5 data-id="heading-9"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>10. Spring Bootä¸­çš„å¾®æœåŠ¡æ˜¯ä»€ä¹ˆï¼Ÿå¦‚ä½•å®ç°å¾®æœåŠ¡æ¶æ„ï¼Ÿ</h5>
<p>Spring Bootä¸­çš„å¾®æœåŠ¡æ˜¯æŒ‡å°†ä¸€ä¸ªå¤§å‹åº”ç”¨ç¨‹åºæ‹†åˆ†ä¸ºå¤šä¸ªå°å‹æœåŠ¡çš„æ¶æ„æ¨¡å¼ã€‚æ¯ä¸ªæœåŠ¡éƒ½è¿è¡Œåœ¨è‡ªå·±çš„è¿›ç¨‹ä¸­ï¼Œå¹¶é€šè¿‡è½»é‡çº§çš„åè®®ï¼ˆä¾‹å¦‚HTTPï¼‰è¿›è¡Œé€šä¿¡ã€‚æ¯ä¸ªæœåŠ¡éƒ½å¯ä»¥ç‹¬ç«‹åœ°è¿›è¡Œéƒ¨ç½²ã€æ‰©å±•å’Œç»´æŠ¤ï¼Œä»è€Œæé«˜äº†åº”ç”¨ç¨‹åºçš„å¯ä¼¸ç¼©æ€§å’Œå¯é æ€§ã€‚<br/>
ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„å¾®æœåŠ¡æ¶æ„ç¤ºä¾‹ï¼š</p>
<ul>
<li>æœåŠ¡æ³¨å†Œä¸­å¿ƒï¼šç”¨äºæ³¨å†Œå’Œå‘ç°æœåŠ¡çš„ä½ç½®ã€‚</li>
<li>ç½‘å…³æœåŠ¡ï¼šç”¨äºè·¯ç”±è¯·æ±‚åˆ°æ­£ç¡®çš„æœåŠ¡ã€‚</li>
<li>ä¸šåŠ¡æœåŠ¡ï¼šå®ç°åº”ç”¨ç¨‹åºçš„æ ¸å¿ƒä¸šåŠ¡é€»è¾‘ã€‚<br/>
åœ¨Spring Bootä¸­å®ç°å¾®æœåŠ¡æ¶æ„é€šå¸¸éœ€è¦ä»¥ä¸‹æ­¥éª¤ï¼š</li>
</ul>
<ol>
<li>åˆ›å»ºæœåŠ¡æ³¨å†Œä¸­å¿ƒï¼šä½¿ç”¨Eurekaæˆ–Consulç­‰æœåŠ¡æ³¨å†Œä¸­å¿ƒæ¥æ³¨å†Œå’Œå‘ç°æœåŠ¡ã€‚</li>
<li>åˆ›å»ºç½‘å…³æœåŠ¡ï¼šä½¿ç”¨Zuulæˆ–Spring Cloud Gatewayç­‰ç½‘å…³æœåŠ¡æ¥è·¯ç”±è¯·æ±‚åˆ°æ­£ç¡®çš„æœåŠ¡ã€‚</li>
<li>åˆ›å»ºä¸šåŠ¡æœåŠ¡ï¼šå°†åº”ç”¨ç¨‹åºæ‹†åˆ†ä¸ºå¤šä¸ªå°å‹æœåŠ¡ï¼Œå¹¶ä½¿ç”¨Spring Bootå’ŒSpring Cloudæ¥å®ç°æ¯ä¸ªæœåŠ¡ã€‚<br/>
ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„å¾®æœåŠ¡æ¶æ„ç¤ºä¾‹ï¼š</li>
<li>åˆ›å»ºæœåŠ¡æ³¨å†Œä¸­å¿ƒï¼šä½¿ç”¨Eurekaæ¥åˆ›å»ºæœåŠ¡æ³¨å†Œä¸­å¿ƒã€‚åœ¨pom.xmlæ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹ä¾èµ–ï¼š<br/>
xml</li>
</ol>

<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.cloud<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-cloud-starter-netflix-eureka-server<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
ä¸€é”®è·å–å®Œæ•´é¡¹ç›®ä»£ç 
</code></pre>
<p>ä¸€é”®è·å–å®Œæ•´é¡¹ç›®ä»£ç java</p>
<p>åœ¨å¯åŠ¨ç±»ä¸Šæ·»åŠ @EnableEurekaServeræ³¨è§£æ¥å¯ç”¨EurekaæœåŠ¡æ³¨å†Œä¸­å¿ƒã€‚<br/>
2. åˆ›å»ºç½‘å…³æœåŠ¡ï¼šä½¿ç”¨Zuulæ¥åˆ›å»ºç½‘å…³æœåŠ¡ã€‚åœ¨pom.xmlæ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹ä¾èµ–ï¼š<br/>
xml</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.cloud<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-cloud-starter-netflix-zuul<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
ä¸€é”®è·å–å®Œæ•´é¡¹ç›®ä»£ç 
</code></pre>
<p>ä¸€é”®è·å–å®Œæ•´é¡¹ç›®ä»£ç java</p>
<p>åœ¨å¯åŠ¨ç±»ä¸Šæ·»åŠ @EnableZuulProxyæ³¨è§£æ¥å¯ç”¨Zuulç½‘å…³æœåŠ¡ã€‚<br/>
3. åˆ›å»ºä¸šåŠ¡æœåŠ¡ï¼šå°†åº”ç”¨ç¨‹åºæ‹†åˆ†ä¸ºå¤šä¸ªå°å‹æœåŠ¡ï¼Œå¹¶ä½¿ç”¨Spring Bootå’ŒSpring Cloudæ¥å®ç°æ¯ä¸ªæœåŠ¡ã€‚<br/>
ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„ä¸šåŠ¡æœåŠ¡ç¤ºä¾‹ï¼š</p>
<ul>
<li>åˆ›å»ºä¸€ä¸ªåä¸ºâ€œuser-serviceâ€çš„Spring Bootåº”ç”¨ç¨‹åºã€‚</li>
<li>åœ¨pom.xmlæ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹ä¾èµ–ï¼š<br/>
xml</li>
</ul>

<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.cloud<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-cloud-starter-netflix-eureka-client<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
ä¸€é”®è·å–å®Œæ•´é¡¹ç›®ä»£ç 
</code></pre>
<p>ä¸€é”®è·å–å®Œæ•´é¡¹ç›®ä»£ç java</p>
<ul>
<li>åœ¨å¯åŠ¨ç±»ä¸Šæ·»åŠ @EnableDiscoveryClientæ³¨è§£æ¥å¯ç”¨æœåŠ¡å‘ç°ã€‚</li>
<li>åˆ›å»ºä¸€ä¸ªUserControllerç±»ï¼Œå¹¶åœ¨æ–¹æ³•ä¸Šæ·»åŠ @GetMappingæ³¨è§£ã€‚åœ¨getUseræ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬ä»æ•°æ®åº“ä¸­æ£€ç´¢ç”¨æˆ·æ•°æ®å¹¶è¿”å›å®ƒã€‚</li>
</ul>

<pre><code class="hljs language-less" lang="less"><span class="hljs-variable">@RestController</span>
<span class="hljs-variable">@RequestMapping</span>(<span class="hljs-string">"/api"</span>)
public class UserController {
    <span class="hljs-variable">@GetMapping</span>(<span class="hljs-string">"/user/{id}"</span>)
    public User <span class="hljs-built_in">getUser</span>(<span class="hljs-variable">@PathVariable</span> Long id) {
        <span class="hljs-comment">// retrieve user data from database</span>
        <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">user</span>;
    }
}
ä¸€é”®è·å–å®Œæ•´é¡¹ç›®ä»£ç 
</code></pre>
<p>ä¸€é”®è·å–å®Œæ•´é¡¹ç›®ä»£ç java</p>
<p>åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªåä¸ºâ€œuser-serviceâ€çš„ä¸šåŠ¡æœåŠ¡ï¼Œå¹¶ä½¿ç”¨Spring Bootå’ŒSpring Cloudæ¥å®ç°å®ƒã€‚æˆ‘ä»¬è¿˜ä½¿ç”¨äº†Eurekaæ¥æ³¨å†Œå’Œå‘ç°æœåŠ¡ï¼Œå¹¶ä½¿ç”¨Zuulæ¥è·¯ç”±è¯·æ±‚åˆ°æ­£ç¡®çš„æœåŠ¡ã€‚<br/>
æ€»çš„æ¥è¯´ï¼Œåœ¨Spring Bootä¸­å®ç°å¾®æœåŠ¡æ¶æ„é€šå¸¸éœ€è¦ä½¿ç”¨Spring Cloudæä¾›çš„ä¸€ç³»åˆ—ç»„ä»¶æ¥å®ç°ï¼ŒåŒ…æ‹¬æœåŠ¡æ³¨å†Œä¸­å¿ƒã€ç½‘å…³æœåŠ¡å’Œä¸šåŠ¡æœåŠ¡ã€‚ä½¿ç”¨å¾®æœåŠ¡æ¶æ„ï¼Œæˆ‘ä»¬å¯ä»¥è½»æ¾åœ°å®ç°åº”ç”¨ç¨‹åºçš„å¯ä¼¸ç¼©æ€§ã€å¯é æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚</p>
<h6 data-id="heading-10"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>æ€»ç»“ï¼š</h6>
<p>Spring Bootæ˜¯ç°ä»£åŒ–çš„Javaåº”ç”¨ç¨‹åºå¼€å‘æ¡†æ¶ï¼Œå…·æœ‰é«˜åº¦çš„çµæ´»æ€§å’Œå¯æ‰©å±•æ€§ã€‚æŒæ¡è¿™äº›Spring Booté«˜çº§é¢è¯•é¢˜å¯ä»¥å¸®åŠ©æ‚¨æ›´å¥½åœ°äº†è§£Spring Bootçš„æ ¸å¿ƒæ¦‚å¿µå’Œé«˜çº§ä¸»é¢˜ï¼Œæé«˜è‡ªå·±çš„æŠ€èƒ½æ°´å¹³ï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥å¸®åŠ©æ‚¨è¯„ä¼°å€™é€‰äººçš„æŠ€èƒ½å’Œç»éªŒã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸€ä¸ªJavaç¨‹åºå‘˜çš„é˜¿é‡Œé¢è¯•å¿ƒå¾—ï¼Œjavaé¢è¯•é—®é¡¹ç›®éƒ¨ç½²]]></title>    <link>https://juejin.cn/post/7584991956125253667</link>    <guid>https://juejin.cn/post/7584991956125253667</guid>    <pubDate>2025-12-18T07:14:32.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7584991956125253667" data-draft-id="7584780417103773736" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸€ä¸ªJavaç¨‹åºå‘˜çš„é˜¿é‡Œé¢è¯•å¿ƒå¾—ï¼Œjavaé¢è¯•é—®é¡¹ç›®éƒ¨ç½²"/> <meta itemprop="keywords" content="åç«¯,é¢è¯•"/> <meta itemprop="datePublished" content="2025-12-18T07:14:32.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Javaæ°´è§£"/> <meta itemprop="url" content="https://juejin.cn/user/2441349519143037"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸€ä¸ªJavaç¨‹åºå‘˜çš„é˜¿é‡Œé¢è¯•å¿ƒå¾—ï¼Œjavaé¢è¯•é—®é¡¹ç›®éƒ¨ç½²
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2441349519143037/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Javaæ°´è§£
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-18T07:14:32.000Z" title="Thu Dec 18 2025 07:14:32 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-18
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    7
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»15åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ç¬¬ä¸€ä¸ªï¼šAlibaba[æœç´¢æ¨è]</h2>
<blockquote>
<p>ä¸€é¢ï¼šç®—æ³•é¢˜:é•¿åº¦ä¸ºnçš„æ•°ç»„é‡Œæ”¾äº†n+1ä¸ªå¤§å°åœ¨[1,n]çš„æ•°ï¼Œå¿…ç„¶è‡³å°‘æœ‰ä¸€ä¸ªé‡å¤çš„æ•°ï¼Œæ‰¾å‡ºæ¥</p>
<p>äºŒé¢ï¼šæ¦‚ç‡é¢˜ï¼šæ±‚ä¸€æ ¹ç»³å­è¢«åˆ‡ä¸¤åˆ€èƒ½ç»„æˆä¸€ä¸ªä¸‰è§’å½¢çš„æ¦‚ç‡ã€‚</p>
<p>ä¸‰é¢ä¸»ç®¡é¢ï¼šFMæ¨å¯¼ï¼ŒdeepfmåŸç†ï¼Œgraph embeddingï¼Œé—®äº†ä¹‹å‰çš„ä¸€äº›é¡¹ç›®ã€‚</p>
<p>å››é¢äº¤å‰é¢ï¼šæ¨¡å‹ä¸Šçº¿æ—¶åº”è¯¥æ³¨æ„çš„äº‹ï¼Œå¦‚æœè¯·æ±‚è¿‡é«˜æ¨¡å‹æœåŠ¡æŒ‚äº†æ€ä¹ˆåŠï¼Œtensorflowå’Œtorchçš„åŒºåˆ«ï¼Œå¦‚ä½•é™ä½æ¨¡å‹å¤æ‚åº¦ã€‚</p>
</blockquote>
<h2 data-id="heading-1"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>ç¬¬äºŒä¸ªï¼šç™¾åº¦</h2>
<blockquote>
<p><strong>åŸç”Ÿå•†ä¸šæ¨å¹¿éƒ¨</strong></p>
<p>ä¸€é¢ï¼šç®—æ³•é¢˜ï¼šå¿«æ’éé€’å½’ï¼Œæ—‹è½¬æœ‰åºæ•°ç»„æ‰¾æŸä¸ªå€¼</p>
<p>äºŒé¢ï¼šç®—æ³•é¢˜ï¼šä¸€ä¸ªäºŒç»´æ•°ç»„ï¼Œä¸Šæœ‰0å’Œ1ï¼ŒæŠŠæ‰€æœ‰ç›¸é‚»çš„1ç»™è¿èµ·æ¥ï¼Œæ±‚æœ€ç»ˆæœ‰å‡ å—è¿èµ·æ¥çš„1ã€‚ L1å’ŒL2æ­£åˆ™åŒºåˆ«ï¼ŒsoftmaxæŸå¤±å‡½æ•°</p>
<p><strong>æ¨èæŠ€æœ¯å¹³å°éƒ¨</strong></p>
<p>ä¸€é¢ï¼šç®—æ³•é¢˜ï¼šbitmap</p>
<p>äºŒé¢ï¼šç®—æ³•é¢˜ï¼šé“¾è¡¨å»é‡ï¼Œæ‰©å±•ï¼šåˆ é™¤é“¾è¡¨ä¸­çš„æ‰€æœ‰é‡å¤å€¼</p>
</blockquote>
<h2 data-id="heading-2"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>ç¬¬ä¸‰ä¸ªï¼šGoogle</h2>
<blockquote>
<p>å¿ƒé…¸å‘ï¼Œä¹‹å‰ä¸€ç›´æƒ³å»æŠ•å²—è°·æ­Œï¼Œç»“æœå´å€’åœ¨äº†è¿™ä¹ˆä¸€é“å°å°çš„ç®—æ³•é¢˜ä¸Šâ€¦</p>
<p>ç®—æ³•é¢˜ï¼šè®¾è®¡ä¸€ä¸ªå¾ªç¯æœ‰åºé“¾è¡¨ï¼Œå®ç°å¢åˆ æ”¹æŸ¥å››ä¸ªå‡½æ•°ã€‚</p>
</blockquote>
<h2 data-id="heading-3"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>ç¬¬å››ä¸ªï¼šå­—èŠ‚è·³åŠ¨</h2>
<blockquote>
<p>å­—èŠ‚æœ€çˆ±ç®—æ³•â€¦</p>
<p>ç®—æ³•é¢˜ï¼šè›‡å½¢æ‰“å°äºŒå‰æ ‘ ç®—æ³•é¢˜ï¼šç»™å‡º[[1, 2], [3, 5], [8, 8], [15, 16], [32, 38]]ï¼Œæ±‚é—´éš”</p>
<p>ç®—æ³•é¢˜ï¼šç»™å‡ºä¸¤ä¸ªå‡åºæ•°ç»„Aã€Bå’Œé•¿åº¦mã€nï¼Œæ±‚ç¬¬kä¸ªå¤§çš„æ•°</p>
<p>ç®—æ³•é¢˜ï¼šç»™å‡ºæ•°ç»„Aï¼Œé•¿åº¦ä¸ºnï¼Œæ•°ç»„ä¸­å…ƒç´ çš„å€¼ä½äº[0, n - 1]ä¹‹é—´ï¼Œæ±‚æ˜¯å¦æœ‰é‡å¤å…ƒç´ </p>
<p>ç®—æ³•é¢˜ï¼šäºŒå‰æ ‘çš„å·¦è§†å›¾ ç®—æ³•é¢˜ï¼šé¢å€¼[1,3,4]çš„ç¡¬å¸ï¼Œè¾“å…¥nï¼Œè¾“å‡ºæœ€å°‘ç»„æˆnçš„ç¡¬å¸ä¸ªæ•°ä»¥åŠç»„æˆçš„ç¡¬å¸</p>
<p>ç®—æ³•é¢˜ï¼šç»™å®šæ­£æ•´æ•°nï¼Œé—®1-nç»„æˆçš„äºŒå‰æœç´¢æ ‘æœ‰å¤šå°‘</p>
</blockquote>
<blockquote>
<blockquote>
<p><strong>ç¯‡å¹…é™åˆ¶ä¸‹é¢å°±åªèƒ½ç»™å¤§å®¶å±•ç¤ºå°å†Œéƒ¨åˆ†å†…å®¹äº†ã€‚æ•´ç†äº†ä¸€ä»½æ ¸å¿ƒé¢è¯•ç¬”è®°åŒ…æ‹¬äº†ï¼šJavaé¢è¯•ã€Springã€JVMã€MyBatisã€Redisã€MySQLã€å¹¶å‘ç¼–ç¨‹ã€å¾®æœåŠ¡ã€Linuxã€Springbootã€SpringCloudã€MQã€Kafka é¢è¯•ä¸“é¢˜</strong></p>
<blockquote>
</blockquote>
<p><strong>éœ€è¦å…¨å¥—é¢è¯•ç¬”è®°åŠç­”æ¡ˆã€æ‰«ä¸€æ‰«ã€‘</strong> Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â å³å¯å…è´¹è·å–**</p>
</blockquote>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/485c73e5f50a446599f6580f3c93cc90~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2YeawtOinow==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766648354&amp;x-signature=M%2BZsA29smuGNla74p%2FirtAZeceM%3D" alt="8fbf1ef8b61e2dbbb33b7690a41d12e.png" loading="lazy"/></p>
</blockquote>
<h2 data-id="heading-4"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>ç¬¬äº”ä¸ªï¼šTencent</h2>
<blockquote>
<p>ç®—æ³•é¢˜ï¼šåˆå¹¶æœ‰åºé“¾è¡¨</p>
<p>ç®—æ³•é¢˜ï¼šæœ‰åºæ•´æ•°æ•°ç»„ï¼Œç»™å®šä¸€ä¸ªæ•°ï¼Œä»æ•°ç»„ä¸­æ‰¾å‡º2ä¸ªæ•°ç›¸åŠ ç­‰äºå®ƒã€‚è¦æ±‚O(n)æ—¶é—´å¤æ‚åº¦</p>
<p>ç®—æ³•é¢˜ï¼šä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå‡è®¾ç©ºè¶³å¤Ÿï¼Œå°†å…¶ä¸­æ‰€æœ‰ç©ºæ ¼æ›¿æ¢ä¸º"%20"ï¼Œè¦æ±‚ä¸å¼€è¾Ÿé¢å¤–æ–°ç©ºé—´</p>
<p>ç®—æ³•é¢˜ï¼šè¯´æ€è·¯ï¼Œ100å°æœºå™¨ï¼Œæ¯å°æœºå™¨ä¸Š10äº¿ä¸ªæ•°ï¼Œæ±‚é‡Œé¢æœ€å¤§çš„100ä¸ªæ•°</p>
<p>ç®—æ³•é¢˜ï¼šåˆ¤æ–­ä¸€ä¸ªäºŒå‰æ ‘æ˜¯å¦å­˜åœ¨ä¸€ä¸ªè·¯å¾„å’Œä¸ºæŒ‡å®šå€¼çš„è·¯å¾„ï¼ˆä¸ç”¨ä¸´æ—¶å˜é‡ï¼‰ ç®—æ³•é¢˜ï¼šå¤§æ•°ç›¸ä¹˜ï¼ˆç›´æ¥æ•²ä»£ç ï¼Œååˆ†é’Ÿåå›æ¥çœ‹ç»“æœï¼‰</p>
</blockquote>
<h2 data-id="heading-5"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>ç¬¬å…­ä¸ªï¼šç½‘æ˜“</h2>
<blockquote>
<p>ç®—æ³•é¢˜ï¼šç»™å®š0~9çš„è‹±æ–‡OneTwoThreeâ€¦è¿™ç§çš„å­—ç¬¦ä¸²ï¼Œå°†å…¶å®Œå…¨ä¹±åºï¼Œæ€ä¹ˆè¿˜åŸå…¶ä¸­çš„å„ä¸ªæ•°ï¼Ÿ</p>
<p>ç®—æ³•é¢˜ï¼šç»™å®šnä¸ªæ­£æ•´æ•°ï¼Œæ‰¾åˆ°aiå’Œajï¼Œä½¿å¾—ï¼ˆi,0ï¼‰(i,ai)ï¼ˆj,0ï¼‰æ„æˆçš„å½¢çŠ¶æœ€å¤§</p>
<p>ç®—æ³•é¢˜ï¼šæœ€å¤§å­åºå’Œ leetcode 53</p>
<p>ç®—æ³•é¢˜ï¼šå­—ç¬¦ä¸²æ’åº(åŒºåˆ†å¤§å°å†™)</p>
</blockquote>
<h2 data-id="heading-6"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>ç¬¬ä¸ƒä¸ªï¼š360æœç´¢</h2>
<blockquote>
<p>ä¸€é¢ï¼šç®—æ³•é¢˜ï¼šåœ¨å¤§é‡æ–‡æœ¬ä¸­åŒ¹é…è¯è¡¨</p>
<p>äºŒé¢ï¼šç®—æ³•é¢˜ï¼šå­—ç¬¦ä¸²ç¼–è¾‘è·ç¦»ï¼Œæ±‚ç¬¬nä¸ªä¸‘æ•°ï¼Œæœ€é•¿å…¬å…±å­ä¸²</p>
<p>ä¸‰é¢ï¼šç®—æ³•é¢˜ï¼šè®¾è®¡ä¸€ä¸ªhashmap ç®—æ³•</p>
<p>ç²¾è‹±åŠ é¢ä¸€é¢ï¼šç®—æ³•é¢˜ï¼šé•¿åº¦ä¸ºnçš„æ•°ç»„é‡Œæ”¾äº†n+1ä¸ªå¤§å°åœ¨[1,n]çš„æ•°ï¼Œå¿…ç„¶è‡³å°‘æœ‰ä¸€ä¸ªé‡å¤çš„æ•°ï¼Œæ‰¾å‡ºæ¥</p>
</blockquote>
<h2 data-id="heading-7"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>ç¬¬å…«ä¸ªï¼šæ‹¼å¤•å¤•</h2>
<blockquote>
<p>ä¸€é¢ï¼Œç®—æ³•é¢˜ï¼šé“¾è¡¨å¿«æ’</p>
<p>äºŒé¢ï¼Œæ™ºåŠ›é¢˜ï¼š100ä¸ªçƒï¼Œç”²ä¹™ä¸¤ä¸ªäººä¾æ¬¡æ‹¿çƒï¼Œæ¯æ¬¡åªèƒ½æ‹¿1-5ä¸ªï¼Œç”²å…ˆæ‹¿ï¼Œæ±‚ç”²å¿…èƒœçš„æ–¹æ¡ˆ</p>
</blockquote>
<h2 data-id="heading-8"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>ç¬¬ä¹ä¸ªï¼šç¾å›¢åŒ—æ–—</h2>
<blockquote>
<p>ä¸€é¢é—®äº†å®ä¹ é¡¹ç›®ï¼Œ</p>
<p>ç®—æ³•é¢˜ï¼šæ—‹è½¬æœ‰åºæ•°ç»„æ‰¾æŸä¸ªå€¼ äºŒé¢ä¹Ÿåé‡é¡¹ç›®ï¼Œ</p>
<p>ç®—æ³•é¢˜ï¼šä½¿ç”¨O(N)å¤æ‚åº¦å®ŒæˆGBDTåˆ†è£‚ ä¸‰é¢è¿˜æ˜¯é¡¹ç›®ï¼Œ</p>
<p>ç®—æ³•é¢˜ï¼šæ‰¾å‡ºæ— åºæ•°ç»„ä¸­ç›¸éš”è·ç¦»æœ€é•¿çš„é€†åºå¯¹</p>
</blockquote>
<h2 data-id="heading-9"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>ç¬¬åä¸ªï¼šå°ç±³æœç´¢</h2>
<blockquote>
<p>ä¸€é¢é—®äº†é¡¹ç›®ï¼Œ ç®—æ³•é¢˜ï¼šä¸€ä¸ªæ•°ç»„é‡Œåªæœ‰0å’Œ1ï¼ŒæŠŠ0æ¢åˆ°1å‰é¢ï¼Œä¸èƒ½ä½¿ç”¨ç»Ÿè®¡æ¬¡æ•°çš„æ–¹æ³•ã€‚ æ‰©å±•ï¼šå¦‚æœæœ‰0ï¼Œ1ï¼Œ2ä¸‰ä¸ªæ•°å’‹åŠï¼Ÿ</p>
<p>äºŒé¢é¡¹ç›®ï¼Œç®—æ³•é¢˜ï¼šæ— å‘å›¾çš„è¿ªæ°æ–¯ç‰¹æ‹‰ç®—æ³•å®ç°ã€‚</p>
</blockquote>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ff1c44d066eb4e7eb82eb223760d3eb1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2YeawtOinow==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766648354&amp;x-signature=LuJhQXMH4quPiL6%2BHl%2BnkHKF7MU%3D" alt="image" loading="lazy"/></p>
<h2 data-id="heading-10"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>ç®—æ³•å¤§å…¨ï¼šç¨‹åºå‘˜ä»£ç é¢è¯•æŒ‡å—ï¼ˆå·¦ç¨‹äº‘ï¼‰+é˜¿é‡Œäº‘ï¼š70+åˆ·é¢˜+è§£æç¬”è®°</h2>
<blockquote>
<p>ç›¸å…³çš„æ‰€æœ‰ç¬”è®°ç­‰éƒ½å·²æ”¶é›†æ•´ç†å¥½ï¼Œç®—æ³•å¤§å…¨ï¼šæ•°æ®ç»“æ„ä¸ç®—æ³•+é˜¿é‡Œäº‘70+ç®—æ³•é¢˜30ç§å¤§å‚ç¬”è¯•é«˜é¢‘çŸ¥è¯†ç‚¹+å·¦ç¨‹äº‘-ç¨‹åºå‘˜ä»£ç é¢è¯•æŒ‡å—+ç®—æ³•åˆ·é¢˜LeetCode+ç®—æ³•è§£æ-ç¬¬4ç‰ˆç­‰</p>
</blockquote>
<h3 data-id="heading-11"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>ç¬¬ä¸€ä¸ªï¼š&lt;ç®—æ³•-ç¬¬4ç‰ˆ&gt;</h3>
<blockquote>
<p>ä½œä¸ºç®—æ³•é¢†åŸŸç»å…¸çš„å‚è€ƒä¹¦ï¼Œå…¨é¢ä»‹ç»äº†å…³äºç®—æ³•å’Œæ•°æ®ç»“æ„çš„å¿…å¤‡çŸ¥è¯†ï¼Œå¹¶ç‰¹åˆ«é’ˆå¯¹æ’åºã€æœç´¢ã€å›¾å¤„ç†å’Œå­—ç¬¦ä¸²å¤„ç†è¿›è¡Œäº†è®ºè¿°ã€‚ç¬¬ 4 ç‰ˆå…·ä½“ç»™å‡ºäº†æ¯ä½ç¨‹åºå‘˜åº”çŸ¥åº”ä¼šçš„ 50 ä¸ªç®—æ³•ï¼Œæä¾›äº†å®é™…ä»£ç ï¼Œè€Œä¸”è¿™äº› Java ä»£ç å®ç°é‡‡ç”¨äº†æ¨¡å—åŒ–çš„ç¼–ç¨‹é£æ ¼ï¼Œè¯»è€…å¯ä»¥æ–¹ä¾¿åœ°åŠ ä»¥æ”¹é€ </p>
</blockquote>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f3db7b4d10f843bca7ae90ff4a67f0f1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2YeawtOinow==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766648354&amp;x-signature=FUz8sQTuxzuHWQV4gHno4WXaLHc%3D" alt="image" loading="lazy"/><br/>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6de9b77c07d04fbf9876b86c9dfc2683~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2YeawtOinow==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766648354&amp;x-signature=x1Ay%2BZ%2BG7WQ4fSW5h9nn9M50kXU%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ef16ab5878164382afa56b6420bb0511~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2YeawtOinow==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766648354&amp;x-signature=PwqDtQQj2plpJLUVtGjwLLQjcfs%3D" alt="image" loading="lazy"/></p>
<h3 data-id="heading-12"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>ç¬¬äºŒä¸ªï¼š&lt;ç¨‹åºå‘˜ä»£ç é¢è¯•æŒ‡å—-ITåä¼ç®—æ³•ä¸æ•°æ®ç»“æ„é¢˜ç›®æœ€ä¼˜è§£&gt;</h3>
<blockquote>
<p>å·¦ç¨‹äº‘ï¼ˆå·¦ç¥ï¼‰çš„&lt;ç¨‹åºå‘˜ä»£ç é¢è¯•æŒ‡å—-ITåä¼ç®—æ³•ä¸æ•°æ®ç»“æ„é¢˜ç›®æœ€ä¼˜è§£&gt;åŒ…å«äº†è¿‘200é“çœŸå®å‡ºç°è¿‡çš„ç»å…¸ä»£ç é¢è¯•é¢˜ï¼ˆä¸”æ¯ä¸ªéƒ½æœ‰æ ‡æ˜éš¾åº¦ç­‰çº§å°æ˜Ÿæ˜Ÿï¼‰ï¼Œåˆ†ä¸ºä»¥ä¸‹ä¹ä¸ªéƒ¨åˆ†ï¼š</p>
<p>ä¸€ã€æ ˆå’Œé˜Ÿåˆ—éƒ¨åˆ†ï¼ˆ10ï¼‰</p>
<p>äºŒã€é“¾è¡¨é—®é¢˜ï¼ˆ20ï¼‰</p>
<p>ä¸‰ã€äºŒå‰æ ‘é—®é¢˜ï¼ˆ24ï¼‰</p>
<p>å››ã€é€’å½’å’ŒåŠ¨æ€è§„åˆ’ï¼ˆ17ï¼‰</p>
<p>äº”ã€å­—ç¬¦ä¸²é—®é¢˜ï¼ˆ23ï¼‰</p>
<p>å…­ã€å¤§æ•°æ®å’Œç©ºé—´é™åˆ¶ï¼ˆ6ï¼‰</p>
<p>ä¸ƒã€ä½è¿ç®—ï¼ˆ6ï¼‰</p>
<p>å…«ã€æ•°ç»„å’ŒçŸ©é˜µé—®é¢˜ï¼ˆ26ï¼‰</p>
<p>ä¹ã€å…¶ä»–é—®é¢˜ï¼ˆ34ï¼‰</p>
</blockquote>
<p><strong>ç¨‹åºå‘˜ä»£ç é¢è¯•æŒ‡å—-ITåä¼ç®—æ³•ä¸æ•°æ®ç»“æ„é¢˜ç›®æœ€ä¼˜è§£ï¼šæ ˆå’Œé˜Ÿåˆ—éƒ¨åˆ†ï¼ˆ10ï¼‰</strong></p>
<ul>
<li>
<ol>
<li>è®¾è®¡ä¸€ä¸ªæœ‰getMinåŠŸèƒ½çš„æ ˆï¼ˆå£«â˜…â˜†â˜†â˜†ï¼‰</li>
</ol>
</li>
<li>
<ol start="2">
<li>ç”±ä¸¤ä¸ªæ ˆç»„æˆçš„é˜Ÿåˆ—ï¼ˆå°‰â˜…â˜…â˜†â˜†ï¼‰</li>
</ol>
</li>
<li>
<ol start="3">
<li>å¦‚ä½•ä»…ç”¨é€’å½’å‡½æ•°å’Œæ ˆæ“ä½œé€†åºä¸€ä¸ªæ ˆï¼ˆå°‰â˜…â˜…â˜†â˜†ï¼‰</li>
</ol>
</li>
<li>
<ol start="4">
<li>çŒ«ç‹—é˜Ÿåˆ—ï¼ˆå£«â˜…â˜†â˜†â˜†ï¼‰</li>
</ol>
</li>
<li>
<ol start="5">
<li>ç”¨ä¸€ä¸ªæ ˆå®ç°å¦ä¸€ä¸ªæ ˆçš„æ’åºï¼ˆå£«â˜…â˜†â˜†â˜†ï¼‰</li>
</ol>
</li>
<li>
<ol start="6">
<li>ç”¨æ ˆæ¥æ±‚è§£æ±‰è¯ºå¡”é—®é¢˜ï¼ˆæ ¡â˜…â˜…â˜…â˜†ï¼‰</li>
</ol>
</li>
<li>
<ol start="7">
<li>ç”Ÿæˆçª—å£æœ€å¤§å€¼æ•°ç»„ï¼ˆå°‰â˜…â˜…â˜†â˜†ï¼‰</li>
</ol>
</li>
<li>
<ol start="8">
<li>æ„é€ æ•°ç»„çš„MaxTreeï¼ˆæ ¡â˜…â˜…â˜…â˜†ï¼‰</li>
</ol>
</li>
<li>
<ol start="9">
<li>æ±‚æœ€å¤§å­çŸ©é˜µçš„å¤§å°ï¼ˆæ ¡â˜…â˜…â˜…â˜†ï¼‰</li>
</ol>
</li>
<li>
<ol start="10">
<li>æœ€å¤§å€¼å‡å»æœ€å°å€¼å°äºæˆ–ç­‰äºnumçš„å­æ•°ç»„æ•°é‡ï¼ˆæ ¡â˜…â˜…â˜…â˜†ï¼‰</li>
</ol>
</li>
</ul>
<p><strong>ç¨‹åºå‘˜ä»£ç é¢è¯•æŒ‡å—-ITåä¼ç®—æ³•ä¸æ•°æ®ç»“æ„é¢˜ç›®æœ€ä¼˜è§£ï¼šé“¾è¡¨é—®é¢˜ï¼ˆ20ï¼‰</strong></p>
<ul>
<li>
<ol>
<li>æ‰“å°ä¸¤ä¸ªæœ‰åºé“¾è¡¨çš„å…¬å…±éƒ¨åˆ†ï¼ˆå£«â˜…â˜†â˜†â˜†ï¼‰</li>
</ol>
</li>
<li>
<ol start="2">
<li>åœ¨å•é“¾è¡¨å’ŒåŒé“¾è¡¨ä¸­åˆ é™¤å€’æ•°ç¬¬K ä¸ªèŠ‚ç‚¹ï¼ˆå£«â˜…â˜†â˜†â˜†ï¼‰</li>
</ol>
</li>
<li>
<ol start="3">
<li>åˆ é™¤é“¾è¡¨çš„ä¸­é—´èŠ‚ç‚¹å’Œa/b å¤„çš„èŠ‚ç‚¹ï¼ˆå£«â˜…â˜†â˜†â˜†ï¼‰</li>
</ol>
</li>
<li>
<ol start="4">
<li>åè½¬å•å‘å’ŒåŒå‘é“¾è¡¨ï¼ˆå£«â˜…â˜†â˜†â˜†ï¼‰</li>
</ol>
</li>
<li>
<ol start="5">
<li>åè½¬éƒ¨åˆ†å•å‘é“¾è¡¨ï¼ˆå£«â˜…â˜†â˜†â˜†ï¼‰</li>
</ol>
</li>
<li>
<ol start="6">
<li>ç¯å½¢å•é“¾è¡¨çš„çº¦ç‘Ÿå¤«é—®é¢˜ï¼ˆåŸé—®é¢˜ï¼šå£«â˜…â˜†â˜†â˜†è¿›é˜¶ï¼šæ ¡â˜…â˜…â˜…â˜†ï¼‰</li>
</ol>
</li>
<li>
<ol start="7">
<li>åˆ¤æ–­ä¸€ä¸ªé“¾è¡¨æ˜¯å¦ä¸ºå›æ–‡ç»“æ„ï¼ˆæ™®é€šè§£æ³•å£«â˜…â˜†â˜†â˜†ï¼‰ï¼ˆè¿›é˜¶è§£æ³•å°‰â˜…â˜…â˜†â˜†ï¼‰</li>
</ol>
</li>
<li>
<ol start="8">
<li>å°†å•å‘é“¾è¡¨æŒ‰æŸå€¼åˆ’åˆ†æˆå·¦è¾¹å°ã€ä¸­é—´ç›¸ç­‰ã€å³è¾¹å¤§çš„å½¢å¼ï¼ˆå°‰â˜…â˜…â˜†â˜†ï¼‰</li>
</ol>
</li>
<li>
<ol start="9">
<li>å¤åˆ¶å«æœ‰éšæœºæŒ‡é’ˆèŠ‚ç‚¹çš„é“¾è¡¨ï¼ˆå°‰â˜…â˜…â˜†â˜†ï¼‰</li>
</ol>
</li>
<li>
<ol start="10">
<li>ä¸¤ä¸ªå•é“¾è¡¨ç”Ÿæˆç›¸åŠ é“¾è¡¨ï¼ˆå£«â˜…â˜†â˜†â˜†ï¼‰</li>
</ol>
</li>
<li>
<ol start="11">
<li>ä¸¤ä¸ªå•é“¾è¡¨ç›¸äº¤çš„ä¸€ç³»åˆ—é—®é¢˜ï¼ˆå°†â˜…â˜…â˜…â˜…ï¼‰</li>
</ol>
</li>
<li>
<ol start="12">
<li>å°†å•é“¾è¡¨çš„æ¯Kä¸ªèŠ‚ç‚¹ä¹‹é—´é€†åºï¼ˆå°‰â˜…â˜…â˜†â˜†ï¼‰</li>
</ol>
</li>
<li>
<ol start="13">
<li>åˆ é™¤æ— åºå•é“¾è¡¨ä¸­å€¼é‡å¤å‡ºç°çš„èŠ‚ç‚¹ï¼ˆå£«â˜…â˜†â˜†â˜†ï¼‰</li>
</ol>
</li>
<li>
<ol start="14">
<li>åœ¨å•é“¾è¡¨ä¸­åˆ é™¤æŒ‡å®šå€¼çš„èŠ‚ç‚¹ï¼ˆå£«â˜…â˜†â˜†â˜†ï¼‰</li>
</ol>
</li>
<li>
<ol start="15">
<li>å°†æœç´¢äºŒå‰æ ‘è½¬æ¢æˆåŒå‘é“¾è¡¨ï¼ˆå°‰â˜…â˜…â˜†â˜†ï¼‰</li>
</ol>
</li>
<li>
<ol start="16">
<li>å•é“¾è¡¨çš„é€‰æ‹©æ’åºï¼ˆå£«â˜…â˜†â˜†â˜†ï¼‰</li>
</ol>
</li>
<li>
<ol start="17">
<li>ä¸€ç§æ€ªå¼‚çš„èŠ‚ç‚¹åˆ é™¤æ–¹å¼ï¼ˆå£«â˜…â˜†â˜†â˜†ï¼‰</li>
</ol>
</li>
<li>
<ol start="18">
<li>å‘æœ‰åºçš„ç¯å½¢å•é“¾è¡¨ä¸­æ’å…¥æ–°èŠ‚ç‚¹ï¼ˆå£«â˜…â˜†â˜†â˜†ï¼‰</li>
</ol>
</li>
<li>
<ol start="19">
<li>åˆå¹¶ä¸¤ä¸ªæœ‰åºçš„å•é“¾è¡¨ï¼ˆå£«â˜…â˜†â˜†â˜†ï¼‰</li>
</ol>
</li>
<li>
<ol start="20">
<li>æŒ‰ç…§å·¦å³åŠåŒºçš„æ–¹å¼é‡æ–°ç»„åˆå•é“¾è¡¨ï¼ˆå£«â˜…â˜†â˜†â˜†ï¼‰</li>
</ol>
</li>
</ul>
<blockquote>
<blockquote>
<p><strong>ç¯‡å¹…é™åˆ¶ä¸‹é¢å°±åªèƒ½ç»™å¤§å®¶å±•ç¤ºå°å†Œéƒ¨åˆ†å†…å®¹äº†ã€‚æ•´ç†äº†ä¸€ä»½æ ¸å¿ƒé¢è¯•ç¬”è®°åŒ…æ‹¬äº†ï¼šJavaé¢è¯•ã€Springã€JVMã€MyBatisã€Redisã€MySQLã€å¹¶å‘ç¼–ç¨‹ã€å¾®æœåŠ¡ã€Linuxã€Springbootã€SpringCloudã€MQã€Kafka é¢è¯•ä¸“é¢˜</strong></p>
<blockquote>
</blockquote>
<p><strong>éœ€è¦å…¨å¥—é¢è¯•ç¬”è®°åŠç­”æ¡ˆã€æ‰«ä¸€æ‰«ã€‘</strong> Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â å³å¯å…è´¹è·å–**</p>
</blockquote>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/485c73e5f50a446599f6580f3c93cc90~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2YeawtOinow==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766648354&amp;x-signature=M%2BZsA29smuGNla74p%2FirtAZeceM%3D" alt="8fbf1ef8b61e2dbbb33b7690a41d12e.png" loading="lazy"/></p>
</blockquote>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/412f91fae9064e49b1d41bb91a928ea1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2YeawtOinow==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766648354&amp;x-signature=7nyjxqSyVVQxLM5%2FzmeeTzmowFE%3D" alt="image" loading="lazy"/></p>
<p><strong>ç¨‹åºå‘˜ä»£ç é¢è¯•æŒ‡å—-ITåä¼ç®—æ³•ä¸æ•°æ®ç»“æ„é¢˜ç›®æœ€ä¼˜è§£ï¼šäºŒå‰æ ‘é—®é¢˜ï¼ˆ24ï¼‰</strong></p>
<ul>
<li>
<ol>
<li>åˆ†åˆ«ç”¨é€’å½’å’Œéé€’å½’æ–¹å¼å®ç°äºŒå‰æ ‘å…ˆåºã€ä¸­åºå’Œååºéå†ï¼ˆæ ¡â˜…â˜…â˜…â˜†ï¼‰</li>
</ol>
</li>
<li>
<ol start="2">
<li>æ‰“å°äºŒå‰æ ‘çš„è¾¹ç•ŒèŠ‚ç‚¹ï¼ˆå°‰â˜…â˜…â˜†â˜†ï¼‰</li>
</ol>
</li>
<li>
<ol start="3">
<li>å¦‚ä½•è¾ƒä¸ºç›´è§‚åœ°æ‰“å°äºŒå‰æ ‘ï¼ˆå°‰â˜…â˜…â˜†â˜†ï¼‰</li>
</ol>
</li>
<li>
<ol start="4">
<li>äºŒå‰æ ‘çš„åºåˆ—åŒ–å’Œååºåˆ—åŒ–ï¼ˆå£«â˜…â˜†â˜†â˜†ï¼‰</li>
</ol>
</li>
<li>
<ol start="5">
<li>éå†äºŒå‰æ ‘çš„ç¥çº§æ–¹æ³•ï¼ˆå°†â˜…â˜…â˜…â˜…ï¼‰</li>
</ol>
</li>
<li>
<ol start="6">
<li>åœ¨äºŒå‰æ ‘ä¸­æ‰¾åˆ°ç´¯åŠ å’Œä¸ºæŒ‡å®šå€¼çš„æœ€é•¿è·¯å¾„é•¿åº¦ï¼ˆå°‰â˜…â˜…â˜†â˜†ï¼‰</li>
</ol>
</li>
<li>
<ol start="7">
<li>æ‰¾åˆ°äºŒå‰æ ‘ä¸­çš„æœ€å¤§æœç´¢äºŒå‰å­æ ‘ï¼ˆå°‰â˜…â˜…â˜†â˜†ï¼‰</li>
</ol>
</li>
<li>
<ol start="8">
<li>æ‰¾åˆ°äºŒå‰æ ‘ä¸­ç¬¦åˆæœç´¢äºŒå‰æ ‘æ¡ä»¶çš„æœ€å¤§æ‹“æ‰‘ç»“æ„ï¼ˆæ ¡â˜…â˜…â˜…â˜†ï¼‰</li>
</ol>
</li>
<li>
<ol start="9">
<li>äºŒå‰æ ‘çš„æŒ‰å±‚æ‰“å°ä¸ZigZagæ‰“å°ï¼ˆå°‰â˜…â˜…â˜†â˜†ï¼‰</li>
</ol>
</li>
<li>
<ol start="10">
<li>è°ƒæ•´æœç´¢äºŒå‰æ ‘ä¸­ä¸¤ä¸ªé”™è¯¯çš„èŠ‚ç‚¹ï¼ˆåŸé—®é¢˜ï¼šå°‰â˜…â˜…â˜†â˜†ï¼‰ï¼ˆè¿›é˜¶é—®é¢˜ï¼šå°†â˜…â˜…â˜…â˜…ï¼‰</li>
</ol>
</li>
<li>
<ol start="11">
<li>åˆ¤æ–­t1 æ ‘æ˜¯å¦åŒ…å«t2 æ ‘å…¨éƒ¨çš„æ‹“æ‰‘ç»“æ„ï¼ˆå£«â˜…â˜†â˜†â˜†ï¼‰</li>
</ol>
</li>
<li>
<ol start="12">
<li>åˆ¤æ–­t1 æ ‘ä¸­æ˜¯å¦æœ‰ä¸t2 æ ‘æ‹“æ‰‘ç»“æ„å®Œå…¨ç›¸åŒçš„å­æ ‘ï¼ˆæ ¡â˜…â˜…â˜…â˜†ï¼‰</li>
</ol>
</li>
<li>
<ol start="13">
<li>åˆ¤æ–­äºŒå‰æ ‘æ˜¯å¦ä¸ºå¹³è¡¡äºŒå‰æ ‘ï¼ˆå£«â˜…â˜†â˜†â˜†ï¼‰</li>
</ol>
</li>
<li>
<ol start="14">
<li>æ ¹æ®ååºæ•°ç»„é‡å»ºæœç´¢äºŒå‰æ ‘ï¼ˆå£«â˜…â˜†â˜†â˜†ï¼‰</li>
</ol>
</li>
<li>
<ol start="15">
<li>åˆ¤æ–­ä¸€æ£µäºŒå‰æ ‘æ˜¯å¦ä¸ºæœç´¢äºŒå‰æ ‘å’Œå®Œå…¨äºŒå‰æ ‘ï¼ˆå£«â˜…â˜†â˜†â˜†ï¼‰</li>
</ol>
</li>
<li>
<ol start="16">
<li>é€šè¿‡æœ‰åºæ•°ç»„ç”Ÿæˆå¹³è¡¡æœç´¢äºŒå‰æ ‘ï¼ˆå£«â˜…â˜†â˜†â˜†ï¼‰</li>
</ol>
</li>
<li>
<ol start="17">
<li>åœ¨äºŒå‰æ ‘ä¸­æ‰¾åˆ°ä¸€ä¸ªèŠ‚ç‚¹çš„åç»§èŠ‚ç‚¹ï¼ˆå°‰â˜…â˜…â˜†â˜†ï¼‰</li>
</ol>
</li>
<li>
<ol start="18">
<li>åœ¨äºŒå‰æ ‘ä¸­æ‰¾åˆ°ä¸¤ä¸ªèŠ‚ç‚¹çš„æœ€è¿‘å…¬å…±ç¥–å…ˆï¼ˆåŸé—®é¢˜ï¼šå£«â˜…â˜†â˜†â˜†</li>
</ol>
</li>
<li>
<ol start="19">
<li>Tarjanç®—æ³•ä¸å¹¶æŸ¥é›†è§£å†³äºŒå‰æ ‘èŠ‚ç‚¹é—´æœ€è¿‘å…¬å…±ç¥–å…ˆçš„æ‰¹é‡æŸ¥è¯¢é—®é¢˜ï¼ˆæ ¡â˜…â˜…â˜…â˜†ï¼‰</li>
</ol>
</li>
<li>
<ol start="20">
<li>äºŒå‰æ ‘èŠ‚ç‚¹é—´çš„æœ€å¤§è·ç¦»é—®é¢˜ï¼ˆå°‰â˜…â˜…â˜†â˜†ï¼‰</li>
</ol>
</li>
<li>
<ol start="21">
<li>å…ˆåºã€ä¸­åºå’Œååºæ•°ç»„ä¸¤ä¸¤ç»“åˆé‡æ„äºŒå‰æ ‘ï¼ˆå…ˆåºä¸ä¸­åºç»“åˆå£«â˜…â˜†â˜†â˜†ï¼‰ï¼ˆ</li>
</ol>
</li>
<li>
<ol start="22">
<li>é€šè¿‡å…ˆåºå’Œä¸­åºæ•°ç»„ç”Ÿæˆååºæ•°ç»„ï¼ˆå£«â˜…â˜†â˜†â˜†ï¼‰</li>
</ol>
</li>
<li>
<ol start="23">
<li>ç»Ÿè®¡å’Œç”Ÿæˆæ‰€æœ‰ä¸åŒçš„äºŒå‰æ ‘ï¼ˆå°‰â˜…â˜…â˜†â˜†ï¼‰</li>
</ol>
</li>
<li>
<ol start="24">
<li>ç»Ÿè®¡å®Œå…¨äºŒå‰æ ‘çš„èŠ‚ç‚¹æ•°ï¼ˆå°‰â˜…â˜…â˜†</li>
</ol>
</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c32aae5d0a8b46e0bbaedb63b5f4fdba~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2YeawtOinow==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766648354&amp;x-signature=J4K09ZNU4FBFov4LQVPkzI1M16w%3D" alt="image" loading="lazy"/></p>
<p><strong>ç¨‹åºå‘˜ä»£ç é¢è¯•æŒ‡å—-ITåä¼ç®—æ³•ä¸æ•°æ®ç»“æ„é¢˜ç›®æœ€ä¼˜è§£ï¼šé€’å½’å’ŒåŠ¨æ€è§„åˆ’ï¼ˆ17ï¼‰</strong></p>
<ul>
<li>
<ol>
<li>æ–æ³¢é‚£å¥‘ç³»åˆ—é—®é¢˜çš„é€’å½’å’ŒåŠ¨æ€è§„åˆ’ï¼ˆå°†â˜…â˜…â˜…â˜…ï¼‰</li>
</ol>
</li>
<li>
<ol start="2">
<li>çŸ©é˜µçš„æœ€å°è·¯å¾„å’Œï¼ˆå°‰â˜…â˜…â˜†â˜†ï¼‰</li>
</ol>
</li>
<li>
<ol start="3">
<li>æ¢é’±çš„æœ€å°‘è´§å¸æ•°ï¼ˆå°‰â˜…â˜…â˜†â˜†ï¼‰</li>
</ol>
</li>
<li>
<ol start="4">
<li>æ¢é’±çš„æ–¹æ³•æ•°ï¼ˆå°‰â˜…â˜…â˜†â˜†ï¼‰</li>
</ol>
</li>
<li>
<ol start="5">
<li>æœ€é•¿é€’å¢å­åºåˆ—ï¼ˆæ ¡â˜…â˜…â˜…â˜†ï¼‰</li>
</ol>
</li>
<li>
<ol start="6">
<li>æ±‰è¯ºå¡”é—®é¢˜ï¼ˆæ ¡â˜…â˜…â˜…â˜†ï¼‰</li>
</ol>
</li>
<li>
<ol start="7">
<li>æœ€é•¿å…¬å…±å­åºåˆ—é—®é¢˜ï¼ˆå°‰â˜…â˜…â˜†â˜†ï¼‰</li>
</ol>
</li>
<li>
<ol start="8">
<li>æœ€é•¿å…¬å…±å­ä¸²é—®é¢˜ï¼ˆæ ¡â˜…â˜…â˜…â˜†ï¼‰</li>
</ol>
</li>
<li>
<ol start="9">
<li>æœ€å°ç¼–è¾‘ä»£ä»·ï¼ˆæ ¡â˜…â˜…â˜…â˜†ï¼‰</li>
</ol>
</li>
<li>
<ol start="10">
<li>å­—ç¬¦ä¸²çš„äº¤é”™ç»„æˆï¼ˆæ ¡â˜…â˜…â˜…â˜†ï¼‰</li>
</ol>
</li>
<li>
<ol start="11">
<li>é¾™ä¸åœ°ä¸‹åŸæ¸¸æˆé—®é¢˜ï¼ˆå°‰â˜…â˜…â˜†â˜†ï¼‰</li>
</ol>
</li>
<li>
<ol start="12">
<li>æ•°å­—å­—ç¬¦ä¸²è½¬æ¢ä¸ºå­—æ¯ç»„åˆçš„ç§æ•°ï¼ˆå°‰â˜…â˜…â˜†â˜†ï¼‰</li>
</ol>
</li>
<li>
<ol start="13">
<li>è¡¨è¾¾å¼å¾—åˆ°æœŸæœ›ç»“æœçš„ç»„æˆç§æ•°ï¼ˆæ ¡â˜…â˜…â˜…â˜†ï¼‰</li>
</ol>
</li>
<li>
<ol start="14">
<li>æ’æˆä¸€æ¡çº¿çš„çº¸ç‰Œåšå¼ˆé—®é¢˜ï¼ˆå°‰â˜…â˜…â˜†â˜†ï¼‰</li>
</ol>
</li>
<li>
<ol start="15">
<li>è·³è·ƒæ¸¸æˆï¼ˆå£«â˜…â˜†â˜†â˜†ï¼‰</li>
</ol>
</li>
<li>
<ol start="16">
<li>æ•°ç»„ä¸­çš„æœ€é•¿è¿ç»­åºåˆ—ï¼ˆå°‰â˜…â˜…â˜†â˜†ï¼‰</li>
</ol>
</li>
<li>
<ol start="17">
<li>Nçš‡åé—®é¢˜ï¼ˆæ ¡â˜…â˜…â˜…â˜†ï¼‰</li>
</ol>
</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ded77986fa7740e1966ef1bccbef7ae5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2YeawtOinow==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766648354&amp;x-signature=h%2FbnEv90SZjisZtirovLssjhv7M%3D" alt="image" loading="lazy"/></p>
<p><strong>ç¨‹åºå‘˜ä»£ç é¢è¯•æŒ‡å—-ITåä¼ç®—æ³•ä¸æ•°æ®ç»“æ„é¢˜ç›®æœ€ä¼˜è§£ï¼šå­—ç¬¦ä¸²é—®é¢˜ï¼ˆ23ï¼‰</strong></p>
<ul>
<li>
<ol>
<li>åˆ¤æ–­ä¸¤ä¸ªå­—ç¬¦ä¸²æ˜¯å¦äº’ä¸ºå˜å½¢è¯ï¼ˆå£«â˜…â˜†â˜†â˜†ï¼‰</li>
</ol>
</li>
<li>
<ol start="2">
<li>å­—ç¬¦ä¸²ä¸­æ•°å­—å­ä¸²çš„æ±‚å’Œï¼ˆå£«â˜…â˜†â˜†â˜†ï¼‰</li>
</ol>
</li>
<li>
<ol start="3">
<li>å»æ‰å­—ç¬¦ä¸²ä¸­è¿ç»­å‡ºç°k ä¸ª0 çš„å­ä¸²ï¼ˆå£«â˜…â˜†â˜†â˜†ï¼‰</li>
</ol>
</li>
<li>
<ol start="4">
<li>åˆ¤æ–­ä¸¤ä¸ªå­—ç¬¦ä¸²æ˜¯å¦äº’ä¸ºæ—‹è½¬è¯ï¼ˆå£«â˜…â˜†â˜†â˜†ï¼‰</li>
</ol>
</li>
<li>
<ol start="5">
<li>å°†æ•´æ•°å­—ç¬¦ä¸²è½¬æˆæ•´æ•°å€¼ï¼ˆå°‰â˜…â˜…â˜†â˜†ï¼‰</li>
</ol>
</li>
<li>
<ol start="6">
<li>æ›¿æ¢å­—ç¬¦ä¸²ä¸­è¿ç»­å‡ºç°çš„æŒ‡å®šå­—ç¬¦ä¸²ï¼ˆå£«â˜…â˜†â˜†â˜†ï¼‰</li>
</ol>
</li>
<li>
<ol start="7">
<li>å­—ç¬¦ä¸²çš„ç»Ÿè®¡å­—ç¬¦ä¸²ï¼ˆå£«â˜…â˜†â˜†â˜†ï¼‰</li>
</ol>
</li>
<li>
<ol start="8">
<li>åˆ¤æ–­å­—ç¬¦æ•°ç»„ä¸­æ˜¯å¦æ‰€æœ‰çš„å­—ç¬¦éƒ½åªå‡ºç°è¿‡ä¸€æ¬¡ï¼ˆæŒ‰è¦æ±‚1 å®ç°çš„æ–¹æ³•å£«â˜…â˜†â˜†â˜†ï¼‰ï¼ˆæŒ‰è¦æ±‚2 å®ç°çš„æ–¹æ³•å°‰â˜…â˜…â˜†â˜†ï¼‰</li>
</ol>
</li>
<li>
<ol start="9">
<li>åœ¨æœ‰åºä½†å«æœ‰ç©ºçš„æ•°ç»„ä¸­æŸ¥æ‰¾å­—ç¬¦ä¸²ï¼ˆå°‰â˜…â˜…â˜†â˜†ï¼‰</li>
</ol>
</li>
<li>
<ol start="10">
<li>å­—ç¬¦ä¸²çš„è°ƒæ•´ä¸æ›¿æ¢ï¼ˆå£«â˜…â˜†â˜†â˜†ï¼‰</li>
</ol>
</li>
<li>
<ol start="11">
<li>ç¿»è½¬å­—ç¬¦ä¸²ï¼ˆå£«â˜…â˜†â˜†â˜†ï¼‰</li>
</ol>
</li>
<li>
<ol start="12">
<li>æ•°ç»„ä¸­ä¸¤ä¸ªå­—ç¬¦ä¸²çš„æœ€å°è·ç¦»ï¼ˆå°‰â˜…â˜…â˜†â˜†ï¼‰</li>
</ol>
</li>
<li>
<ol start="13">
<li>æ·»åŠ æœ€å°‘å­—ç¬¦ä½¿å­—ç¬¦ä¸²æ•´ä½“éƒ½æ˜¯å›æ–‡å­—ç¬¦ä¸²ï¼ˆæ ¡â˜…â˜…â˜…â˜†ï¼‰</li>
</ol>
</li>
<li>
<ol start="14">
<li>æ‹¬å·å­—ç¬¦ä¸²çš„æœ‰æ•ˆæ€§å’Œæœ€é•¿æœ‰æ•ˆé•¿åº¦ï¼ˆåŸé—®é¢˜å£«â˜…â˜†â˜†â˜†</li>
</ol>
</li>
<li>15.å…¬å¼å­—ç¬¦ä¸²æ±‚å€¼ï¼ˆæ ¡â˜…â˜…â˜…â˜†ï¼‰</li>
<li>
<ol start="16">
<li>0 å·¦è¾¹å¿…æœ‰1 çš„äºŒè¿›åˆ¶å­—ç¬¦ä¸²æ•°é‡ï¼ˆæ ¡â˜…â˜…â˜…â˜†ï¼‰</li>
</ol>
</li>
<li>
<ol start="17">
<li>æ‹¼æ¥æ‰€æœ‰å­—ç¬¦ä¸²äº§ç”Ÿå­—å…¸é¡ºåºæœ€å°çš„å¤§å†™å­—ç¬¦ä¸²ï¼ˆæ ¡â˜…â˜…â˜…â˜†ï¼‰</li>
</ol>
</li>
<li>
<ol start="18">
<li>æ‰¾åˆ°å­—ç¬¦ä¸²çš„æœ€é•¿æ— é‡å¤å­—ç¬¦å­ä¸²ï¼ˆå°‰â˜…â˜…â˜†â˜†ï¼‰</li>
</ol>
</li>
<li>
<ol start="19">
<li>æ‰¾åˆ°è¢«æŒ‡çš„æ–°ç±»å‹å­—ç¬¦ï¼ˆå£«â˜…â˜†â˜†â˜†ï¼‰</li>
</ol>
</li>
<li>
<ol start="20">
<li>æœ€å°åŒ…å«å­ä¸²çš„é•¿åº¦ï¼ˆæ ¡â˜…â˜…â˜…â˜†ï¼‰</li>
</ol>
</li>
<li>
<ol start="21">
<li>å›æ–‡æœ€å°‘åˆ†å‰²æ•°ï¼ˆå°‰â˜…â˜…â˜…â˜†ï¼‰</li>
</ol>
</li>
<li>
<ol start="22">
<li>å­—ç¬¦ä¸²åŒ¹é…é—®é¢˜ï¼ˆæ ¡â˜…â˜…â˜…â˜†ï¼‰</li>
</ol>
</li>
<li>
<ol start="23">
<li>å­—å…¸æ ‘ï¼ˆå‰ç¼€æ ‘ï¼‰çš„å®ç°ï¼ˆå°‰â˜…â˜…â˜†â˜†ï¼‰</li>
</ol>
</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/aa4379c615f44c4da67d65ce944533ca~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2YeawtOinow==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766648354&amp;x-signature=z7%2Fohd%2Fl67vRHuXsp%2Fu4HWs%2BJMc%3D" alt="image" loading="lazy"/></p>
<p><strong>ç¨‹åºå‘˜ä»£ç é¢è¯•æŒ‡å—-ITåä¼ç®—æ³•ä¸æ•°æ®ç»“æ„é¢˜ç›®æœ€ä¼˜è§£ï¼šå¤§æ•°æ®å’Œç©ºé—´é™åˆ¶ï¼ˆ6ï¼‰</strong></p>
<ul>
<li>
<ol>
<li>è®¤è¯†å¸ƒéš†è¿‡æ»¤å™¨ï¼ˆå°‰â˜…â˜…â˜†â˜†ï¼‰</li>
</ol>
</li>
<li>
<ol start="2">
<li>åªç”¨2 GB å†…å­˜åœ¨20 äº¿ä¸ªæ•´æ•°ä¸­æ‰¾åˆ°å‡ºç°æ¬¡æ•°æœ€å¤šçš„æ•°ï¼ˆå£«â˜…â˜†â˜†â˜†ï¼‰</li>
</ol>
</li>
<li>
<ol start="3">
<li>40 äº¿ä¸ªéè´Ÿæ•´æ•°ä¸­æ‰¾åˆ°æ²¡å‡ºç°çš„æ•°ï¼ˆå°‰â˜…â˜…â˜†â˜†ï¼‰</li>
</ol>
</li>
<li>
<ol start="4">
<li>æ‰¾åˆ°100 äº¿ä¸ªURL ä¸­é‡å¤çš„URL ä»¥åŠæœç´¢è¯æ±‡çš„top K é—®é¢˜ï¼ˆå£«â˜…â˜†â˜†â˜†ï¼‰</li>
</ol>
</li>
<li>
<ol start="5">
<li>40 äº¿ä¸ªéè´Ÿæ•´æ•°ä¸­æ‰¾åˆ°å‡ºç°ä¸¤æ¬¡çš„æ•°å’Œæ‰€æœ‰æ•°çš„ä¸­ä½æ•°ï¼ˆå°‰â˜…â˜…â˜†â˜†ï¼‰</li>
</ol>
</li>
<li>
<ol start="6">
<li>ä¸€è‡´æ€§å“ˆå¸Œç®—æ³•çš„åŸºæœ¬åŸç†ï¼ˆå°‰â˜…â˜…â˜†â˜†ï¼‰</li>
</ol>
</li>
</ul>
<p><strong>ç¨‹åºå‘˜ä»£ç é¢è¯•æŒ‡å—-ITåä¼ç®—æ³•ä¸æ•°æ®ç»“æ„é¢˜ç›®æœ€ä¼˜è§£ï¼šä½è¿ç®—ï¼ˆ6ï¼‰</strong></p>
<ul>
<li>
<ol>
<li>ä¸ç”¨é¢å¤–å˜é‡äº¤æ¢ä¸¤ä¸ªæ•´æ•°çš„å€¼ï¼ˆå£«â˜…â˜†â˜†â˜†ï¼‰</li>
</ol>
</li>
<li>
<ol start="2">
<li>ä¸ç”¨ä»»ä½•æ¯”è¾ƒåˆ¤æ–­æ‰¾å‡ºä¸¤ä¸ªæ•°ä¸­è¾ƒå¤§çš„æ•°ï¼ˆæ ¡â˜…â˜…â˜…â˜†ï¼‰</li>
</ol>
</li>
<li>
<ol start="3">
<li>åªç”¨ä½è¿ç®—ä¸ç”¨ç®—æœ¯è¿ç®—å®ç°æ•´æ•°çš„åŠ å‡ä¹˜é™¤è¿ç®—ï¼ˆå°‰â˜…â˜…â˜†â˜†ï¼‰</li>
</ol>
</li>
<li>
<ol start="4">
<li>æ•´æ•°çš„äºŒè¿›åˆ¶è¡¨è¾¾ä¸­æœ‰å¤šå°‘ä¸ª1 ï¼ˆå°‰â˜…â˜…â˜†â˜†ï¼‰</li>
</ol>
</li>
<li>
<ol start="5">
<li>åœ¨å…¶ä»–æ•°éƒ½å‡ºç°å¶æ•°æ¬¡çš„æ•°ç»„ä¸­æ‰¾åˆ°å‡ºç°å¥‡æ•°æ¬¡çš„æ•°ï¼ˆå°‰â˜…â˜…â˜†â˜†ï¼‰</li>
</ol>
</li>
<li>
<ol start="6">
<li>åœ¨å…¶ä»–æ•°éƒ½å‡ºç°k æ¬¡çš„æ•°ç»„ä¸­æ‰¾åˆ°åªå‡ºç°ä¸€æ¬¡çš„æ•°ï¼ˆå°‰â˜…â˜…â˜†â˜†ï¼‰</li>
</ol>
</li>
</ul>
<p><strong>ç¨‹åºå‘˜ä»£ç é¢è¯•æŒ‡å—-ITåä¼ç®—æ³•ä¸æ•°æ®ç»“æ„é¢˜ç›®æœ€ä¼˜è§£ï¼šæ•°ç»„å’ŒçŸ©é˜µé—®é¢˜ï¼ˆ26ï¼‰</strong></p>
<ul>
<li>
<ol>
<li>è½¬åœˆæ‰“å°çŸ©é˜µï¼ˆå£«â˜…â˜†â˜†â˜†ï¼‰</li>
</ol>
</li>
<li>
<ol start="2">
<li>å°†æ­£æ–¹å½¢çŸ©é˜µé¡ºæ—¶é’ˆè½¬åŠ¨90 Â°ï¼ˆå£«â˜…â˜†â˜†â˜†ï¼‰</li>
</ol>
</li>
<li>
<ol start="3">
<li>"ä¹‹"å­—å½¢æ‰“å°çŸ©é˜µï¼ˆå£«â˜…â˜†â˜†â˜†ï¼‰</li>
</ol>
</li>
<li>
<ol start="4">
<li>æ‰¾åˆ°æ— åºæ•°ç»„ä¸­æœ€å°çš„k ä¸ªæ•°ï¼ˆO(Nlogk)çš„æ–¹æ³•å°‰â˜…â˜…â˜†â˜†ï¼‰ï¼ˆO(N)çš„æ–¹æ³•å°†â˜…â˜…â˜…â˜…ï¼‰</li>
</ol>
</li>
<li>
<ol start="5">
<li>éœ€è¦æ’åºçš„æœ€çŸ­å­æ•°ç»„é•¿åº¦ï¼ˆå£«â˜…â˜†â˜†â˜†ï¼‰</li>
</ol>
</li>
<li>
<ol start="6">
<li>åœ¨æ•°ç»„ä¸­æ‰¾åˆ°å‡ºç°æ¬¡æ•°å¤§äºN/K çš„æ•°ï¼ˆæ ¡â˜…â˜…â˜…â˜†ï¼‰</li>
</ol>
</li>
<li>
<ol start="7">
<li>åœ¨è¡Œåˆ—éƒ½æ’å¥½åºçš„çŸ©é˜µä¸­æ‰¾æ•°ï¼ˆå£«â˜…â˜†â˜†â˜†ï¼‰</li>
</ol>
</li>
<li>
<ol start="8">
<li>æœ€é•¿çš„å¯æ•´åˆå­æ•°ç»„çš„é•¿åº¦ï¼ˆå°‰â˜…â˜…â˜†â˜†ï¼‰</li>
</ol>
</li>
<li>
<ol start="9">
<li>ä¸é‡å¤æ‰“å°æ’åºæ•°ç»„ä¸­ç›¸åŠ å’Œä¸ºç»™å®šå€¼çš„æ‰€æœ‰äºŒå…ƒç»„å’Œä¸‰å…ƒç»„ï¼ˆå°‰â˜…â˜…â˜†â˜†ï¼‰</li>
</ol>
</li>
<li>
<ol start="10">
<li>æœªæ’åºæ­£æ•°æ•°ç»„ä¸­ç´¯åŠ å’Œä¸ºç»™å®šå€¼çš„æœ€é•¿å­æ•°ç»„é•¿åº¦ï¼ˆå°‰â˜…â˜…â˜†â˜†ï¼‰</li>
</ol>
</li>
<li>
<ol start="11">
<li>æœªæ’åºæ•°ç»„ä¸­ç´¯åŠ å’Œä¸ºç»™å®šå€¼çš„æœ€é•¿å­æ•°ç»„ç³»åˆ—é—®é¢˜ï¼ˆå°‰â˜…â˜…â˜†â˜†ï¼‰</li>
</ol>
</li>
<li>
<ol start="12">
<li>æœªæ’åºæ•°ç»„ä¸­ç´¯åŠ å’Œå°äºæˆ–ç­‰äºç»™å®šå€¼çš„æœ€é•¿å­æ•°ç»„é•¿åº¦ï¼ˆæ ¡â˜…â˜…â˜…â˜†ï¼‰</li>
</ol>
</li>
<li>
<ol start="13">
<li>è®¡ç®—æ•°ç»„çš„å°å’Œï¼ˆæ ¡â˜…â˜…â˜…â˜†ï¼‰</li>
</ol>
</li>
<li>
<ol start="14">
<li>è‡ªç„¶æ•°æ•°ç»„çš„æ’åºï¼ˆå£«â˜…â˜†â˜†â˜†ï¼‰</li>
</ol>
</li>
<li>
<ol start="15">
<li>å¥‡æ•°ä¸‹æ ‡éƒ½æ˜¯å¥‡æ•°æˆ–è€…å¶æ•°ä¸‹æ ‡éƒ½æ˜¯å¶æ•°ï¼ˆå£«â˜…â˜†â˜†â˜†ï¼‰</li>
</ol>
</li>
<li>
<ol start="16">
<li>å­æ•°ç»„çš„æœ€å¤§ç´¯åŠ å’Œé—®é¢˜ï¼ˆå£«â˜…â˜†â˜†â˜†ï¼‰</li>
</ol>
</li>
<li>
<ol start="17">
<li>å­çŸ©é˜µçš„æœ€å¤§ç´¯åŠ å’Œé—®é¢˜ï¼ˆå°‰â˜…â˜…â˜†â˜†ï¼‰</li>
</ol>
</li>
<li>
<ol start="18">
<li>åœ¨æ•°ç»„ä¸­æ‰¾åˆ°ä¸€ä¸ªå±€éƒ¨æœ€å°çš„ä½ç½®ï¼ˆå°‰â˜…â˜…â˜†â˜†ï¼‰</li>
</ol>
</li>
<li>
<ol start="19">
<li>æ•°ç»„ä¸­å­æ•°ç»„çš„æœ€å¤§ç´¯ä¹˜ç§¯ï¼ˆå°‰â˜…â˜…â˜†â˜†ï¼‰</li>
</ol>
</li>
<li>
<ol start="20">
<li>æ‰“å°N ä¸ªæ•°ç»„æ•´ä½“æœ€å¤§çš„Top Kï¼ˆå°‰â˜…â˜…â˜†â˜†ï¼‰</li>
</ol>
</li>
<li>
<ol start="21">
<li>è¾¹ç•Œéƒ½æ˜¯1 çš„æœ€å¤§æ­£æ–¹å½¢å¤§å°ï¼ˆå°‰â˜…â˜…â˜†â˜†ï¼‰</li>
</ol>
</li>
<li>
<ol start="22">
<li>ä¸åŒ…å«æœ¬ä½ç½®å€¼çš„ç´¯ä¹˜æ•°ç»„ï¼ˆå£«â˜…â˜†â˜†â˜†ï¼‰</li>
</ol>
</li>
<li>
<ol start="23">
<li>æ•°ç»„çš„partition è°ƒæ•´ï¼ˆå£«â˜…â˜†â˜†â˜†ï¼‰</li>
</ol>
</li>
<li>
<ol start="24">
<li>æ±‚æœ€çŸ­é€šè·¯å€¼ï¼ˆå°‰â˜…â˜…â˜†â˜†ï¼‰</li>
</ol>
</li>
<li>
<ol start="25">
<li>æ•°ç»„ä¸­æœªå‡ºç°çš„æœ€å°æ­£æ•´æ•°ï¼ˆå°‰â˜…â˜…â˜†â˜†ï¼‰</li>
</ol>
</li>
<li>
<ol start="26">
<li>æ•°ç»„æ’åºä¹‹åç›¸é‚»æ•°çš„æœ€å¤§å·®å€¼ï¼ˆå°‰â˜…â˜…â˜†â˜†ï¼‰</li>
</ol>
</li>
</ul>
<p><strong>ç¨‹åºå‘˜ä»£ç é¢è¯•æŒ‡å—-ITåä¼ç®—æ³•ä¸æ•°æ®ç»“æ„é¢˜ç›®æœ€ä¼˜è§£ï¼šå…¶ä»–é—®é¢˜ï¼ˆ34ï¼‰</strong></p>
<ul>
<li>
<ol>
<li>ä»5 éšæœºåˆ°7 éšæœºåŠå…¶æ‰©å±•ï¼ˆåŸé—®é¢˜å°‰â˜…â˜…â˜†â˜†è¡¥å……é—®é¢˜å°‰â˜…â˜…â˜†â˜†ï¼‰ï¼ˆè¿›é˜¶é—®é¢˜æ ¡â˜…â˜…â˜…â˜†ï¼‰</li>
</ol>
</li>
<li>
<ol start="2">
<li>ä¸€è¡Œä»£ç æ±‚ä¸¤ä¸ªæ•°çš„æœ€å¤§å…¬çº¦æ•°ï¼ˆå£«â˜…â˜…â˜†â˜†ï¼‰</li>
</ol>
</li>
<li>
<ol start="3">
<li>æœ‰å…³é˜¶ä¹˜çš„ä¸¤ä¸ªé—®é¢˜ï¼ˆåŸé—®é¢˜å°‰â˜…â˜…â˜†â˜†è¿›é˜¶é—®é¢˜æ ¡â˜…â˜…â˜…â˜†ï¼‰</li>
</ol>
</li>
<li>
<ol start="4">
<li>åˆ¤æ–­ä¸€ä¸ªç‚¹æ˜¯å¦åœ¨çŸ©å½¢å†…éƒ¨ï¼ˆå°‰â˜…â˜…â˜†â˜†ï¼‰</li>
</ol>
</li>
<li>
<ol start="5">
<li>åˆ¤æ–­ä¸€ä¸ªç‚¹æ˜¯å¦åœ¨ä¸‰è§’å½¢å†…éƒ¨ï¼ˆå°‰â˜…â˜…â˜†â˜†ï¼‰</li>
</ol>
</li>
<li>
<ol start="6">
<li>æŠ˜çº¸é—®é¢˜ï¼ˆå°‰â˜…â˜…â˜†â˜†ï¼‰</li>
</ol>
</li>
<li>
<ol start="7">
<li>è“„æ°´æ± ç®—æ³•ï¼ˆå°‰â˜…â˜…â˜†â˜†ï¼‰</li>
</ol>
</li>
<li>
<ol start="8">
<li>è®¾è®¡æœ‰setAllåŠŸèƒ½çš„å“ˆå¸Œè¡¨ï¼ˆå£«â˜…â˜†â˜†â˜†ï¼‰</li>
</ol>
</li>
<li>
<ol start="9">
<li>æœ€å¤§çš„leftMaxä¸rightMaxä¹‹å·®çš„ç»å¯¹å€¼ï¼ˆæ ¡â˜…â˜…â˜…â˜†ï¼‰</li>
</ol>
</li>
<li>
<ol start="10">
<li>è®¾è®¡å¯ä»¥å˜æ›´çš„ç¼“å­˜ç»“æ„ï¼ˆå°‰â˜…â˜…â˜†â˜†ï¼‰</li>
</ol>
</li>
<li>
<ol start="11">
<li>è®¾è®¡RandomPoolç»“æ„ï¼ˆå°‰â˜…â˜…â˜†â˜†ï¼‰</li>
</ol>
</li>
<li>
<ol start="12">
<li>è°ƒæ•´[0 ,x)åŒºé—´ä¸Šçš„æ•°å‡ºç°çš„æ¦‚ç‡ï¼ˆå£«â˜…â˜†â˜†â˜†ï¼‰</li>
</ol>
</li>
<li>
<ol start="13">
<li>è·¯å¾„æ•°ç»„å˜ä¸ºç»Ÿè®¡æ•°ç»„ï¼ˆæ ¡â˜…â˜…â˜…â˜†ï¼‰</li>
</ol>
</li>
<li>
<ol start="14">
<li>æ­£æ•°æ•°ç»„çš„æœ€å°ä¸å¯ç»„æˆå’Œï¼ˆå°‰â˜…â˜…â˜†â˜†ï¼‰</li>
</ol>
</li>
<li>
<ol start="15">
<li>ä¸€ç§å­—ç¬¦ä¸²å’Œæ•°å­—çš„å¯¹åº”å…³ç³»ï¼ˆæ ¡â˜…â˜…â˜…â˜†ï¼‰</li>
</ol>
</li>
<li>
<ol start="16">
<li>1 åˆ°n ä¸­1 å‡ºç°çš„æ¬¡æ•°ï¼ˆæ ¡â˜…â˜…â˜…â˜†ï¼‰</li>
</ol>
</li>
<li>
<ol start="17">
<li>ä»N ä¸ªæ•°ä¸­ç­‰æ¦‚ç‡æ‰“å°M ä¸ªæ•°ï¼ˆå£«â˜…â˜†â˜†â˜†ï¼‰</li>
</ol>
</li>
<li>
<ol start="18">
<li>åˆ¤æ–­ä¸€ä¸ªæ•°æ˜¯å¦æ˜¯å›æ–‡æ•°ï¼ˆå£«â˜…â˜†â˜†â˜†ï¼‰</li>
</ol>
</li>
<li>
<ol start="19">
<li>åœ¨æœ‰åºæ—‹è½¬æ•°ç»„ä¸­æ‰¾åˆ°æœ€å°å€¼ï¼ˆå°‰â˜…â˜…â˜†â˜†ï¼‰</li>
</ol>
</li>
<li>
<ol start="20">
<li>åœ¨æœ‰åºæ—‹è½¬æ•°ç»„ä¸­æ‰¾åˆ°ä¸€ä¸ªæ•°ï¼ˆå°‰â˜…â˜…â˜†â˜†ï¼‰</li>
</ol>
</li>
<li>
<ol start="21">
<li>æ•°å­—çš„è‹±æ–‡è¡¨è¾¾å’Œä¸­æ–‡è¡¨è¾¾ï¼ˆæ ¡â˜…â˜…â˜…â˜†ï¼‰</li>
</ol>
</li>
<li>
<ol start="22">
<li>åˆ†ç³–æœé—®é¢˜ï¼ˆæ ¡â˜…â˜…â˜…â˜†ï¼‰</li>
</ol>
</li>
<li>
<ol start="23">
<li>ä¸€ç§æ¶ˆæ¯æ¥æ”¶å¹¶æ‰“å°çš„ç»“æ„è®¾è®¡ï¼ˆå°‰â˜…â˜…â˜†â˜†ï¼‰</li>
</ol>
</li>
<li>
<ol start="24">
<li>è®¾è®¡ä¸€ä¸ªæ²¡æœ‰æ‰©å®¹è´Ÿæ‹…çš„å †ç»“æ„ï¼ˆå°†â˜…â˜…â˜…â˜…ï¼‰</li>
</ol>
</li>
<li>
<ol start="25">
<li>éšæ—¶æ‰¾åˆ°æ•°æ®æµçš„ä¸­ä½æ•°ï¼ˆå°†â˜…â˜…â˜…â˜…ï¼‰</li>
</ol>
</li>
<li>
<ol start="26">
<li>åœ¨ä¸¤ä¸ªé•¿åº¦ç›¸ç­‰çš„æ’åºæ•°ç»„ä¸­æ‰¾åˆ°ä¸Šä¸­ä½æ•°ï¼ˆå°‰â˜…â˜…â˜†â˜†ï¼‰</li>
</ol>
</li>
<li>
<ol start="27">
<li>åœ¨ä¸¤ä¸ªæ’åºæ•°ç»„ä¸­æ‰¾åˆ°ç¬¬K å°çš„æ•°ï¼ˆå°†â˜…â˜…â˜…â˜…ï¼‰</li>
</ol>
</li>
<li>
<ol start="28">
<li>ä¸¤ä¸ªæœ‰åºæ•°ç»„é—´ç›¸åŠ å’Œçš„TOP K é—®é¢˜ï¼ˆå°‰â˜…â˜…â˜†â˜†ï¼‰</li>
</ol>
</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b5ef6231dc44415c90f9cdd82916092b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2YeawtOinow==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766648354&amp;x-signature=rRcqrn5j8KQQvpFVBoi1iRrQzqI%3D" alt="image" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¼ä¸šçº§ HTTP å®¢æˆ·ç«¯æ¶æ„æ¼”è¿›ä¸è®¾è®¡]]></title>    <link>https://juejin.cn/post/7584834746061668386</link>    <guid>https://juejin.cn/post/7584834746061668386</guid>    <pubDate>2025-12-18T07:08:15.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7584834746061668386" data-draft-id="7584780417103560744" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¼ä¸šçº§ HTTP å®¢æˆ·ç«¯æ¶æ„æ¼”è¿›ä¸è®¾è®¡"/> <meta itemprop="keywords" content="å‰ç«¯,æ¶æ„"/> <meta itemprop="datePublished" content="2025-12-18T07:08:15.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤§è±¡çš„é¼»å­é‚£ä¹ˆé•¿"/> <meta itemprop="url" content="https://juejin.cn/user/2277843821926871"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¼ä¸šçº§ HTTP å®¢æˆ·ç«¯æ¶æ„æ¼”è¿›ä¸è®¾è®¡
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2277843821926871/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤§è±¡çš„é¼»å­é‚£ä¹ˆé•¿
  </span> <!----> <!----> <div class="vip-level" data-v-cd7d0a50="" data-v-292f6e48=""><span class="tooltip" data-v-cd7d0a50=""><div class="byte-tooltip byte-tooltip--dark" style="display:none;">
        VIP.4 èä¼šè´¯é€š
      </div><span class="byte-tooltip__wrapper"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8AQMAAAAAMksxAAAAA1BMVEUAAACnej3aAAAAAXRSTlMAQObYZgAAAA5JREFUKM9jGAWjAAcAAAIcAAE27nY6AAAAAElFTkSuQmCC" alt="VIP.4 èä¼šè´¯é€š" title="VIP.4 èä¼šè´¯é€š" class="lazy" style="aspect-ratio:NaN;" data-v-5244ef91="" data-v-cd7d0a50=""/></span></span></div> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-18T07:08:15.000Z" title="Thu Dec 18 2025 07:08:15 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-18
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p><strong>æ‘˜è¦</strong>ï¼šæœ¬æ–‡æ¡£æ—¨åœ¨é˜è¿°å°† HTTP ç½‘ç»œå±‚ä»â€œå·¥å…·å‡½æ•°çº§â€å‡çº§ä¸ºâ€œä¼ä¸šåŸºç¡€è®¾æ–½çº§â€çš„æ¶æ„è®¾è®¡æ€è·¯ã€‚é€šè¿‡å¼•å…¥ä¾èµ–å€’ç½®ã€é¢å‘åˆ‡é¢ç¼–ç¨‹åŠé¢†åŸŸé©±åŠ¨è®¾è®¡æ€æƒ³ï¼Œæ„å»ºäº†ä¸€å¥—é«˜å†…èšã€ä½è€¦åˆã€å¯è§‚æµ‹çš„ç½‘ç»œè¯·æ±‚æ¡†æ¶ï¼Œä¸ºä¸šåŠ¡çš„é•¿æœŸè¿­ä»£æä¾›ç¨³å›ºæ”¯æ’‘ã€‚</p>
</blockquote>
<h2 data-id="heading-0">ä¸€ã€ èƒŒæ™¯ä¸æˆ˜ç•¥åŠ¨å› </h2>
<p>åœ¨åˆ†å¸ƒå¼å¾®æœåŠ¡æ¶æ„ä¸‹ï¼Œå‰ç«¯ç½‘ç»œå±‚ä¸å†ä»…ä»…æ˜¯â€œå‘é€è¯·æ±‚â€çš„å·¥å…·ï¼Œè€Œæ˜¯è¿æ¥ç”¨æˆ·ä¸æœåŠ¡çš„æ ¸å¿ƒæ¢çº½ã€‚åŸæœ‰çš„ Axios ç®€å•å°è£…é¢ä¸´ä»¥ä¸‹æˆ˜ç•¥æ€§æŒ‘æˆ˜ï¼š</p>
<ol>
<li><strong>ç¨³å®šæ€§é£é™©</strong>ï¼šç¼ºä¹ç»Ÿä¸€çš„ç†”æ–­ä¸é‡è¯•æœºåˆ¶ï¼Œå¼±ç½‘ç¯å¢ƒä¸‹ç”¨æˆ·ä½“éªŒå—æŸã€‚</li>
<li><strong>ç»´æŠ¤æˆæœ¬é«˜æ˜‚</strong>ï¼šä¸šåŠ¡é€»è¾‘ï¼ˆå¦‚ Token åˆ·æ–°ã€æŠ¥é”™æç¤ºï¼‰ä¸ç½‘ç»œåŸºç¡€è®¾æ–½å¼ºè€¦åˆï¼Œç‰µä¸€å‘è€ŒåŠ¨å…¨èº«ã€‚</li>
<li><strong>æ ‡å‡†åŒ–ç¼ºå¤±</strong>ï¼šå„ä¸šåŠ¡çº¿å¯¹é”™è¯¯ç å¤„ç†ä¸ä¸€è‡´ï¼Œå¯¼è‡´çº¿ä¸Šé—®é¢˜æ’æŸ¥å›°éš¾ã€‚</li>
<li><strong>èµ„äº§å¤ç”¨ç‡ä½</strong>ï¼šç´§è€¦åˆäºç‰¹å®š Store/Router å®ç°ï¼Œéš¾ä»¥æ²‰æ·€ä¸ºå…¬å¸çº§é€šç”¨ç»„ä»¶åº“ã€‚</li>
</ol>
<p>åŸºäºæ­¤ï¼Œæˆ‘ä»¬å‘èµ·æœ¬æ¬¡æ¶æ„é‡æ„ï¼Œæ—¨åœ¨æ‰“é€ ç¬¦åˆ<strong>å·¥ä¸šçº§æ ‡å‡†</strong>çš„ç½‘ç»œåŸºç¡€è®¾æ–½ã€‚</p>
<h2 data-id="heading-1">äºŒã€ æ€»ä½“æ¶æ„è®¾è®¡</h2>
<p>æˆ‘ä»¬é‡‡ç”¨ <strong>åˆ†å±‚æ¶æ„ (Layered Architecture)</strong> ä¸ <strong>ä¾èµ–å€’ç½® (DIP)</strong> ç›¸ç»“åˆçš„è®¾è®¡æ¨¡å¼ã€‚</p>
<h3 data-id="heading-2">2.1 æ¶æ„åˆ†å±‚è§†å›¾</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TD
    subgraph "åº”ç”¨å±‚ (Application Layer)"
        A1["ä¸šåŠ¡ Service"] --&gt; A2["Axios Instance"]
        A3["Store/Pinia"] -."æ³¨å…¥ Token".-&gt; A4["Configuration"]
        A5["Router"] -."æ³¨å…¥è·³è½¬é€»è¾‘".-&gt; A4
    end

    subgraph "é€‚é…å±‚ (Adapter Layer)"
        B1["Axios Service Factory"] -- "ç»„è£…" --&gt; A2
        B1 -- "è¯»å–" --&gt; A4
        B1 -- "ç»‘å®š" --&gt; C1
    end

    subgraph "æ ¸å¿ƒåŸºç¡€è®¾æ–½å±‚ (Core Infrastructure Layer)"
        C1["Client Factory"]
        C2["Interceptor Pipeline"]
        C3["Retry Strategy"]
        C4["Error Normalization"]
        C5["Blob Handler"]
    end

    A1 --&gt;|"è°ƒç”¨"| B1
    C1 --&gt;|"ä¾èµ–æŠ½è±¡"| A4
</code></pre>
<h3 data-id="heading-3">2.2 æ ¸å¿ƒè®¾è®¡åŸåˆ™</h3>
<ul>
<li><strong>ä¾èµ–å€’ç½®åŸåˆ™ (DIP)</strong>ï¼šæ ¸å¿ƒå±‚ï¼ˆ<code>utils/http/client.ts</code>ï¼‰ä¸ä¾èµ–å…·ä½“å®ç°ï¼ˆå¦‚ Piniaã€LocalStorageï¼‰ï¼Œè€Œæ˜¯å®šä¹‰æ ‡å‡†æ¥å£ <code>AxiosClientOptions</code>ï¼Œç”±ä¸Šå±‚æ³¨å…¥å®ç°ã€‚è¿™ä½¿å¾—æ ¸å¿ƒå±‚çº¯å‡€ã€å¯ç§»æ¤ã€æ˜“æµ‹è¯•ã€‚</li>
<li><strong>å•ä¸€èŒè´£åŸåˆ™ (SRP)</strong>ï¼šå°†æ‹¦æˆªå™¨æ‹†åˆ†ä¸º <code>RequestInterceptor</code>ã€<code>ResponseSuccessInterceptor</code>ã€<code>ResponseErrorInterceptor</code>ï¼Œæ¯å±‚ç®¡é“åªå¤„ç†å•ä¸€é€»è¾‘ã€‚</li>
<li><strong>å¼€é—­åŸåˆ™ (OCP)</strong>ï¼šé€šè¿‡ <code>Module Augmentation</code> æ‰©å±• Axios é…ç½®ï¼Œæ— éœ€ä¿®æ”¹æºç å³å¯æ”¯æŒâ€œå•ä¸ªè¯·æ±‚ç¦ç”¨å…¨å±€æŠ¥é”™â€ç­‰æ–°ç‰¹æ€§ã€‚</li>
</ul>
<h2 data-id="heading-4">ä¸‰ã€ æ ¸å¿ƒæµç¨‹ä¸æœºåˆ¶è¯¦è§£ï¼ˆé™„æ ¸å¿ƒä»£ç ï¼‰</h2>
<h3 data-id="heading-5">3.1 è¯·æ±‚å¤„ç†ç®¡é“æµè½¬å›¾</h3>
<p>ç½‘ç»œè¯·æ±‚çš„å…¨ç”Ÿå‘½å‘¨æœŸç®¡ç†ï¼Œé‡‡ç”¨äº†ç»å…¸çš„ <strong>ç®¡é“-è¿‡æ»¤å™¨ (Pipeline-Filter)</strong> æ¨¡å¼ã€‚</p>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant App as ä¸šåŠ¡ä»£ç 
    participant ReqInt as è¯·æ±‚æ‹¦æˆªå™¨
    participant Net as ç½‘ç»œå±‚
    participant ResInt as å“åº”æ‹¦æˆªå™¨
    participant ErrHandler as é”™è¯¯å¤„ç†å™¨
    participant Retry as é‡è¯•ç­–ç•¥

    App-&gt;&gt;ReqInt: å‘èµ·è¯·æ±‚ (Request)
    ReqInt-&gt;&gt;ReqInt: 1. æ³¨å…¥ Token/TraceId/Timezone
    ReqInt-&gt;&gt;Net: å‘é€ HTTP è¯·æ±‚
    
    alt è¯·æ±‚æˆåŠŸ
        Net-&gt;&gt;ResInt: è¿”å›å“åº” (Response)
        ResInt-&gt;&gt;ResInt: 3. Blob æ™ºèƒ½è§£æ (JSONç©¿é€)
        ResInt-&gt;&gt;ResInt: 4. ä¸šåŠ¡çŠ¶æ€ç æ ¡éªŒ (Code=0?)
        alt ä¸šåŠ¡æˆåŠŸ
            ResInt-&gt;&gt;App: è¿”å› Data
        else ä¸šåŠ¡å¤±è´¥ (Code!=0)
            ResInt-&gt;&gt;ErrHandler: æŠ›å‡º BusinessError
            ErrHandler-&gt;&gt;App: ç»Ÿä¸€æŠ¥é”™/é™é»˜å¤±è´¥
        end
    else ç½‘ç»œ/HTTPå¤±è´¥
        Net-&gt;&gt;Retry: è§¦å‘é”™è¯¯ (Error)
        Retry-&gt;&gt;Retry: 5. åˆ¤å®šæ˜¯å¦é‡è¯• (å¹‚ç­‰æ€§/çŠ¶æ€ç )
        alt æ»¡è¶³é‡è¯•æ¡ä»¶
            Retry-&gt;&gt;Net: æŒ‡æ•°é€€é¿é‡è¯• (Backoff)
        else é‡è¯•è€—å°½/ä¸å¯é‡è¯•
            Retry-&gt;&gt;ErrHandler: æŠ›å‡º NetworkError
            ErrHandler-&gt;&gt;App: ç»Ÿä¸€æŠ¥é”™
        end
    end
</code></pre>
<h4 data-id="heading-6">æ ¸å¿ƒå®ç°ï¼šæ‹¦æˆªå™¨ç®¡é“ç»„è£… (<code>src/utils/http/client.ts</code>)</h4>
<p>æˆ‘ä»¬é€šè¿‡å‡½æ•°å¼ç¼–ç¨‹çš„æ–¹å¼ç»„è£…æ‹¦æˆªå™¨ï¼Œæ¸…æ™°åœ°å±•ç¤ºäº†æ•°æ®æµå‘ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">createAxiosClient</span>(<span class="hljs-params">options: AxiosClientOptions</span>): <span class="hljs-title class_">AxiosInstance</span> {
  <span class="hljs-comment">// 1. åˆ›å»ºå®ä¾‹</span>
  <span class="hljs-keyword">const</span> instance = axios.<span class="hljs-title function_">create</span>({ ... })

  <span class="hljs-comment">// 2. æŒ‚è½½è¯·æ±‚æ‹¦æˆªå™¨ (Tokenæ³¨å…¥ã€å‚æ•°åºåˆ—åŒ–)</span>
  instance.<span class="hljs-property">interceptors</span>.<span class="hljs-property">request</span>.<span class="hljs-title function_">use</span>(<span class="hljs-title function_">createRequestInterceptor</span>(options), ...)

  <span class="hljs-comment">// 3. æŒ‚è½½å“åº”æ‹¦æˆªå™¨ (ç®¡é“å¼å¤„ç†)</span>
  <span class="hljs-keyword">const</span> success = <span class="hljs-title function_">createResponseSuccessInterceptor</span>(options)
  <span class="hljs-keyword">const</span> error = <span class="hljs-title function_">createResponseErrorInterceptor</span>(options, instance)
  
  instance.<span class="hljs-property">interceptors</span>.<span class="hljs-property">response</span>.<span class="hljs-title function_">use</span>(
    <span class="hljs-keyword">async</span> (response) =&gt; {
      <span class="hljs-comment">// æ³¨å…¥å®ä¾‹å¼•ç”¨ï¼Œä¾›åç»­é‡è¯•é€»è¾‘ä½¿ç”¨</span>
      ;(response <span class="hljs-keyword">as</span> <span class="hljs-built_in">any</span>).<span class="hljs-property">__axiosInstance</span> = instance
      <span class="hljs-keyword">return</span> <span class="hljs-title function_">success</span>(response)
    },
    error,
  )

  <span class="hljs-keyword">return</span> instance
}
</code></pre>
<h3 data-id="heading-7">3.2 æ™ºèƒ½é‡è¯•ç­–ç•¥ (Smart Retry Strategy)</h3>
<p>æˆ‘ä»¬å¼•å…¥äº†åŸºäº <strong>æŒ‡æ•°é€€é¿ (Exponential Backoff)</strong> çš„é‡è¯•ç®—æ³•ï¼Œä»¥è§£å†³ç½‘ç»œæŠ–åŠ¨é—®é¢˜ã€‚</p>
<h4 data-id="heading-8">æ ¸å¿ƒå®ç°ï¼šæŒ‡æ•°é€€é¿ç®—æ³• (<code>src/utils/http/client.ts</code>)</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">/**
 * è®¡ç®—é‡è¯•å»¶è¿Ÿæ—¶é—´
 * ç®—æ³•æ¨¡å‹ï¼šDelay = Base * 2^RetryCount + Jitter(éšæœºæ‰°åŠ¨)
 * <span class="hljs-doctag">@param</span> retryCount å½“å‰é‡è¯•æ¬¡æ•°
 * <span class="hljs-doctag">@param</span> baseDelay åŸºç¡€å»¶è¿Ÿ(ms)
 */</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">calculateRetryDelay</span>(<span class="hljs-params">retryCount: <span class="hljs-built_in">number</span>, baseDelay: <span class="hljs-built_in">number</span></span>): <span class="hljs-built_in">number</span> {
  <span class="hljs-keyword">return</span> baseDelay * <span class="hljs-number">2</span> ** retryCount + <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() * <span class="hljs-number">100</span>
}
</code></pre>
<h4 data-id="heading-9">æ ¸å¿ƒå®ç°ï¼šé‡è¯•åˆ¤å®šé€»è¾‘</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">shouldRetry</span>(<span class="hljs-params">
  error: AxiosError,
  config: InternalAxiosRequestConfig,
  retryConfig: ...
</span>): <span class="hljs-built_in">boolean</span> {
  <span class="hljs-comment">// 1. æ¬¡æ•°æ£€æŸ¥</span>
  <span class="hljs-keyword">if</span> ((config <span class="hljs-keyword">as</span> <span class="hljs-built_in">any</span>).<span class="hljs-property">retryCount</span> &gt;= retryConfig.<span class="hljs-property">retries</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>

  <span class="hljs-comment">// 2. çŠ¶æ€ç è¿‡æ»¤ (ä»…é‡è¯• 429, 500-504)</span>
  <span class="hljs-keyword">if</span> (
    <span class="hljs-keyword">typeof</span> error.<span class="hljs-property">response</span>?.<span class="hljs-property">status</span> === <span class="hljs-string">'number'</span>
    &amp;&amp; !retryConfig.<span class="hljs-property">retryStatusCodes</span>.<span class="hljs-title function_">includes</span>(error.<span class="hljs-property">response</span>.<span class="hljs-property">status</span>)
  ) {
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
  }

  <span class="hljs-comment">// 3. å¹‚ç­‰æ€§æ£€æŸ¥ (é»˜è®¤ä»…é‡è¯• GET/HEAD/PUT/DELETE)</span>
  <span class="hljs-keyword">const</span> method = config.<span class="hljs-property">method</span>?.<span class="hljs-title function_">toLowerCase</span>() ?? <span class="hljs-string">''</span>
  <span class="hljs-keyword">const</span> isIdempotent = [<span class="hljs-string">'get'</span>, <span class="hljs-string">'head'</span>, <span class="hljs-string">'put'</span>, <span class="hljs-string">'delete'</span>, ...].<span class="hljs-title function_">includes</span>(method)
  <span class="hljs-keyword">return</span> isIdempotent || retryConfig.<span class="hljs-property">allowNonIdempotent</span> === <span class="hljs-literal">true</span>
}
</code></pre>
<h3 data-id="heading-10">3.3 Blob å¼‚å¸¸ç©¿é€ (Blob Penetration)</h3>
<p>è§£å†³äº†â€œä¸‹è½½æ–‡ä»¶å¤±è´¥æ—¶ï¼Œåç«¯è¿”å› JSON æŠ¥é”™ï¼Œå‰ç«¯å´æ”¶åˆ°ä¸€ä¸ªæ— æ³•è§£æçš„ Blob å¯¹è±¡â€çš„è¡Œä¸šç—›ç‚¹ã€‚</p>
<h4 data-id="heading-11">æ ¸å¿ƒå®ç°ï¼šBlob æ™ºèƒ½è§£æ (<code>src/utils/http/blob-helper.ts</code>)</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">handleBlobResponse</span>(<span class="hljs-params">response: AxiosResponse</span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">AxiosResponse</span>&gt; {
  <span class="hljs-comment">// ä»…å¤„ç† Blob/ArrayBuffer ç±»å‹å“åº”</span>
  <span class="hljs-keyword">if</span> (response.<span class="hljs-property">config</span>.<span class="hljs-property">responseType</span> === <span class="hljs-string">'blob'</span> || response.<span class="hljs-property">config</span>.<span class="hljs-property">responseType</span> === <span class="hljs-string">'arraybuffer'</span>) {
    <span class="hljs-comment">// 1. å—…æ¢ Content-Typeï¼Œå¦‚æœæ˜¯ application/jsonï¼Œè¯´æ˜æ˜¯æŠ¥é”™ä¿¡æ¯</span>
    <span class="hljs-keyword">const</span> contentType = (response.<span class="hljs-property">data</span> <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Blob</span> ? response.<span class="hljs-property">data</span>.<span class="hljs-property">type</span> : response.<span class="hljs-property">headers</span>[<span class="hljs-string">'content-type'</span>]) || <span class="hljs-string">''</span>
    
    <span class="hljs-keyword">if</span> (contentType.<span class="hljs-title function_">toLowerCase</span>().<span class="hljs-title function_">includes</span>(<span class="hljs-string">'application/json'</span>)) {
      <span class="hljs-comment">// 2. å°† Blob è½¬å›æ–‡æœ¬</span>
      <span class="hljs-keyword">let</span> text = <span class="hljs-string">''</span>
      <span class="hljs-keyword">if</span> (response.<span class="hljs-property">data</span> <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Blob</span>) {
        text = <span class="hljs-keyword">await</span> response.<span class="hljs-property">data</span>.<span class="hljs-title function_">text</span>()
      }
      <span class="hljs-comment">// ... ArrayBuffer å¤„ç†é€»è¾‘</span>

      <span class="hljs-comment">// 3. è¿˜åŸä¸º JSON å¯¹è±¡ï¼Œæ›¿æ¢åŸæœ‰çš„ Blob æ•°æ®</span>
      <span class="hljs-comment">// åç»­æ‹¦æˆªå™¨ä¼šè¯†åˆ«åˆ°è¿™ä¸ª JSON å¯¹è±¡ï¼Œä»è€Œè¿›å…¥ä¸šåŠ¡é”™è¯¯å¤„ç†æµç¨‹</span>
      <span class="hljs-keyword">if</span> (text) {
        <span class="hljs-keyword">const</span> jsonData = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(text)
        <span class="hljs-keyword">if</span> (jsonData &amp;&amp; <span class="hljs-keyword">typeof</span> jsonData === <span class="hljs-string">'object'</span>) {
          response.<span class="hljs-property">data</span> = jsonData
          <span class="hljs-keyword">return</span> response
        }
      }
    }
  }
  <span class="hljs-keyword">return</span> response
}
</code></pre>
<h3 data-id="heading-12">3.4 ä¾èµ–å€’ç½®ä¸èƒ½åŠ›æ³¨å…¥ (DIP Implementation)</h3>
<p>ä¸ºäº†ä¿è¯æ ¸å¿ƒåº“çš„çº¯å‡€ï¼ˆä¸ä¾èµ– Pinia/Vueï¼‰ï¼Œæˆ‘ä»¬é€šè¿‡é…ç½®å¯¹è±¡æ³¨å…¥å¤–éƒ¨èƒ½åŠ›ã€‚</p>
<h4 data-id="heading-13">æ ¸å¿ƒå®ç°ï¼šèƒ½åŠ›æ³¨å…¥ (<code>src/axios.service.ts</code>)</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// åœ¨åº”ç”¨å±‚ç»„è£… Client</span>
<span class="hljs-keyword">const</span> instance = <span class="hljs-title function_">createAxiosClient</span>({
  <span class="hljs-attr">baseURL</span>: <span class="hljs-keyword">import</span>.<span class="hljs-property">meta</span>.<span class="hljs-property">env</span>.<span class="hljs-property">VITE_API_URL</span>,
  
  <span class="hljs-comment">// ä¾èµ–æ³¨å…¥ï¼šå°† SessionStorage çš„æ“ä½œèƒ½åŠ›æ³¨å…¥</span>
  <span class="hljs-comment">// æ ¸å¿ƒåº“åªç®¡è°ƒç”¨ getAccessToken()ï¼Œä¸å…³å¿ƒ Token å­˜åœ¨å“ªé‡Œ</span>
  <span class="hljs-attr">getAccessToken</span>: <span class="hljs-function">() =&gt;</span> sessionCache.<span class="hljs-title function_">get</span>(<span class="hljs-title class_">AccessTokenKey</span>) <span class="hljs-keyword">as</span> <span class="hljs-built_in">string</span>,
  
  <span class="hljs-comment">// ä¾èµ–æ³¨å…¥ï¼šToken åˆ·æ–°é€»è¾‘</span>
  <span class="hljs-attr">setAccessToken</span>: <span class="hljs-function"><span class="hljs-params">accessToken</span> =&gt;</span> sessionCache.<span class="hljs-title function_">set</span>(<span class="hljs-title class_">AccessTokenKey</span>, accessToken),
  
  <span class="hljs-comment">// ä¾èµ–æ³¨å…¥ï¼šç™»å½•è¿‡æœŸå›è°ƒ</span>
  <span class="hljs-attr">onLoginExpired</span>: handleLoginExpired,
})
</code></pre>
<h2 data-id="heading-14">å››ã€ ä»·å€¼è¯„ä¼°ä¸æ€è€ƒ</h2>
<h3 data-id="heading-15">4.1 æŠ€æœ¯ä»·å€¼</h3>
<ol>
<li><strong>æµ‹è¯•è¦†ç›–ç‡æå‡ (0% -&gt; 90%)</strong>ï¼š
<ul>
<li>ç”±äºè§£è€¦äº†å…¨å±€çŠ¶æ€ï¼Œæˆ‘ä»¬é¦–æ¬¡å®ç°äº†å¯¹ç½‘ç»œå±‚çš„ 100% å•å…ƒæµ‹è¯•è¦†ç›–ï¼ˆä½¿ç”¨ Vitestï¼‰ã€‚</li>
<li><strong>ä»·å€¼</strong>ï¼šé‡æ„ä¸å†ç•æ‰‹ç•è„šï¼Œæ ¸å¿ƒé€»è¾‘å˜æ›´å¯ç”± CI æµæ°´çº¿è‡ªåŠ¨ä¿éšœã€‚</li>
</ul>
</li>
<li><strong>ç±»å‹ç³»ç»Ÿçš„å®Œå¤‡æ€§</strong>ï¼š
<ul>
<li>æä¾›äº†å®Œæ•´çš„æ³›å‹æ”¯æŒï¼ŒAPI è¿”å›å€¼ç±»å‹å¯è‡ªåŠ¨æ¨å¯¼ã€‚</li>
<li><strong>ä»·å€¼</strong>ï¼šå¤§å¹…å‡å°‘ <code>any</code> å¸¦æ¥çš„è¿è¡Œæ—¶é”™è¯¯ï¼Œæå‡å¼€å‘ä½“éªŒã€‚</li>
</ul>
</li>
<li><strong>å¯ç§»æ¤æ€§ (Portability)</strong>ï¼š
<ul>
<li>æ ¸å¿ƒä»£ç ä¸ä¾èµ– Vue/ElementUIï¼Œå¯ç›´æ¥å¤ç”¨äº React é¡¹ç›®ã€Node.js BFF å±‚æˆ– Electron åº”ç”¨ã€‚</li>
<li><strong>ä»·å€¼</strong>ï¼šä¸ºæ„å»ºå…¬å¸çº§å‰ç«¯åŸºå»ºåº“ (Internal SDK) å¥ å®šåŸºç¡€ã€‚</li>
</ul>
</li>
</ol>
<h3 data-id="heading-16">4.2 ä¸šåŠ¡ä»·å€¼</h3>
<ol>
<li><strong>ç”¨æˆ·ä½“éªŒè´¨çš„é£è·ƒ</strong>ï¼š
<ul>
<li><strong>å¼±ç½‘å¯¹æŠ—</strong>ï¼šè‡ªåŠ¨é‡è¯•æœºåˆ¶å¯æŒ½å›çº¦ 3%-5% çš„å› ç½‘ç»œæŠ–åŠ¨å¯¼è‡´çš„è¯·æ±‚å¤±è´¥ï¼Œç›´æ¥æå‡ä¸šåŠ¡è½¬åŒ–ç‡ã€‚</li>
<li><strong>é”™è¯¯åé¦ˆ</strong>ï¼šç»Ÿä¸€çš„é”™è¯¯ç æ˜ å°„æœºåˆ¶ï¼Œè®©ç”¨æˆ·ä¸å†çœ‹åˆ°â€œNetwork Errorâ€ï¼Œè€Œæ˜¯â€œç³»ç»Ÿç¹å¿™ï¼Œè¯·ç¨åé‡è¯•(503)â€ã€‚</li>
</ul>
</li>
<li><strong>æ•…éšœæ’æŸ¥æ•ˆç‡æå‡</strong>ï¼š
<ul>
<li>æ ‡å‡†åŒ–çš„ <code>TraceId</code> æ³¨å…¥å’Œæ—¥å¿—æ ¼å¼ï¼Œä½¿å¾—å‰åç«¯è”è°ƒå’Œçº¿ä¸Šé—®é¢˜å®šä½æ—¶é—´ç¼©çŸ­ 50% ä»¥ä¸Šã€‚</li>
</ul>
</li>
<li><strong>ç ”å‘æ•ˆç‡ (Time-to-Market)</strong>ï¼š
<ul>
<li>ç»Ÿä¸€æ‹¦æˆªå™¨å¤„ç†äº† 90% çš„é€šç”¨é€»è¾‘ï¼ˆTokenã€æŠ¥é”™ã€å‚æ•°å¤„ç†ï¼‰ï¼Œä¸šåŠ¡å¼€å‘åªéœ€å…³æ³¨ DTO å®šä¹‰ã€‚</li>
</ul>
</li>
</ol>
<h2 data-id="heading-17">äº”ã€ èµ„æºæŠ•å…¥ä¸é£é™©è¯„ä¼° (æ¶æ„å¸ˆè§†è§’)</h2>
<h3 data-id="heading-18">5.1 èµ„æºæŠ•å…¥ä¼°ç®—</h3>








































<table><thead><tr><th align="left">é˜¶æ®µ</th><th align="left">äº‹é¡¹</th><th align="center">é¢„ä¼°äººåŠ› (äººå¤©)</th><th align="left">æ¶‰åŠè§’è‰²</th><th align="left">è¯´æ˜</th></tr></thead><tbody><tr><td align="left"><strong>P1</strong></td><td align="left">æ ¸å¿ƒåº“é‡æ„ä¸å•å…ƒæµ‹è¯•</td><td align="center">3</td><td align="left">é«˜çº§å‰ç«¯</td><td align="left">å·²å®Œæˆï¼ŒåŒ…å« Client å°è£…ä¸ Vitest æµ‹è¯•</td></tr><tr><td align="left"><strong>P2</strong></td><td align="left">å­˜é‡ä¸šåŠ¡è¿ç§»ä¸é€‚é…</td><td align="center">5-10</td><td align="left">ä¸šåŠ¡å‰ç«¯</td><td align="left">éœ€æ’æŸ¥æ‰€æœ‰ API è°ƒç”¨ï¼Œç¡®ä¿å…¼å®¹æ€§</td></tr><tr><td align="left"><strong>P3</strong></td><td align="left">åç«¯é”™è¯¯ç å¯¹é½</td><td align="center">2</td><td align="left">å‰ç«¯æ¶æ„ + åç«¯æ¶æ„</td><td align="left">éœ€åˆ¶å®šç»Ÿä¸€çš„ Error Code è§„èŒƒæ–‡æ¡£</td></tr><tr><td align="left"><strong>P4</strong></td><td align="left">ç›‘æ§åŸ‹ç‚¹æ¥å…¥</td><td align="center">3</td><td align="left">å‰ç«¯ + è¿ç»´</td><td align="left">æ¥å…¥ Sentry æˆ–è‡ªç ”ç›‘æ§å¹³å°</td></tr></tbody></table>
<h3 data-id="heading-19">5.2 è·¨éƒ¨é—¨åä½œéœ€æ±‚</h3>
<ol>
<li><strong>åç«¯ (Backend)</strong>ï¼š
<ul>
<li><strong>éœ€æ±‚</strong>ï¼šè§„èŒƒ HTTP çŠ¶æ€ç ä¸ä¸šåŠ¡ Code çš„è¯­ä¹‰ã€‚ä¾‹å¦‚ï¼ŒToken è¿‡æœŸåº”ç»Ÿä¸€è¿”å› 401ï¼Œè€Œé 200 + code:401ï¼Œä»¥ä¾¿æ‹¦æˆªå™¨ç»Ÿä¸€å¤„ç†ã€‚</li>
<li><strong>åä½œç‚¹</strong>ï¼šæ¥å£æ–‡æ¡£éœ€æ˜ç¡®ç”± Swagger/YApi è‡ªåŠ¨ç”Ÿæˆï¼Œå‡å°‘å‰ç«¯æ‰‹åŠ¨å®šä¹‰ TS ç±»å‹çš„å·¥ä½œé‡ã€‚</li>
</ul>
</li>
<li><strong>æµ‹è¯• (QA)</strong>ï¼š
<ul>
<li><strong>éœ€æ±‚</strong>ï¼šæ–°å¢å¼±ç½‘æµ‹è¯•ä¸“é¡¹ï¼ŒéªŒè¯é‡è¯•æœºåˆ¶çš„æœ‰æ•ˆæ€§ã€‚</li>
<li><strong>åä½œç‚¹</strong>ï¼šæä¾› Mock æ–¹æ¡ˆï¼Œè¾…åŠ© QA æ„é€  Blob å¤±è´¥ç­‰è¾¹ç¼˜åœºæ™¯ã€‚</li>
</ul>
</li>
</ol>
<h3 data-id="heading-20">5.3 é£é™©ä¸åº”å¯¹ç­–ç•¥</h3>
<ul>
<li><strong>é£é™©</strong>ï¼šå­˜é‡éæ ‡å‡†æ¥å£ï¼ˆå¦‚è¿”å› HTMLã€éæ ‡å‡† JSONï¼‰å¯èƒ½åœ¨ç»Ÿä¸€æ‹¦æˆªå™¨ä¸­è§£æå¤±è´¥ã€‚
<ul>
<li><strong>åº”å¯¹</strong>ï¼šæä¾› <code>skipUnifiedHandling</code> é…ç½®é¡¹ï¼Œå…è®¸ç‰¹å®šæ¥å£è·³è¿‡ç»Ÿä¸€å¤„ç†ï¼›åœ¨è¿ç§»æœŸä¿æŒåŒ Client å¹¶è¡Œè¿è¡Œã€‚</li>
</ul>
</li>
<li><strong>é£é™©</strong>ï¼šé‡è¯•æœºåˆ¶å¯¼è‡´éå¹‚ç­‰è¯·æ±‚ï¼ˆå¦‚ POST åˆ›å»ºè®¢å•ï¼‰é‡å¤æäº¤ã€‚
<ul>
<li><strong>åº”å¯¹</strong>ï¼šä¸¥æ ¼é™åˆ¶é»˜è®¤åªé‡è¯• GET è¯·æ±‚ï¼›POST è¯·æ±‚é‡è¯•éœ€ç”±ä¸šåŠ¡æ–¹æ˜¾å¼å¼€å¯ï¼Œå¹¶é…åˆåç«¯çš„ <code>Idempotency-Key</code> æœºåˆ¶ã€‚</li>
</ul>
</li>
</ul>
<h2 data-id="heading-21">å…­ã€ ç°åº¦å‘å¸ƒæ–¹æ¡ˆå†³ç­– (Architecture Decision)</h2>
<p>åœ¨æ¶æ„å‡çº§è¿‡ç¨‹ä¸­ï¼Œå¦‚ä½•å¹³ç¨³åœ°å°†æ—§ç‰ˆ Axios è¿ç§»è‡³æ–°ç‰ˆæ¶æ„ï¼Œæˆ‘ä»¬å¯¹æ¯”äº†ä¸‰ç§ä¸»æµçš„ç°åº¦æ–¹æ¡ˆï¼Œå¹¶åŸºäº<strong>æˆæœ¬</strong>ã€<strong>é£é™©</strong>ã€<strong>çµæ´»æ€§</strong>ä¸‰ä¸ªç»´åº¦åšå‡ºäº†å†³ç­–ã€‚</p>
<h3 data-id="heading-22">6.1 æ–¹æ¡ˆé€‰å‹å¯¹æ¯” (Trade-off Analysis)</h3>

































<table><thead><tr><th align="left">æ–¹æ¡ˆ</th><th align="left">åŸç†</th><th align="left">ä¼˜ç‚¹</th><th align="left">ç¼ºç‚¹</th><th align="left">é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td align="left"><strong>A. ç‰¹æ€§å¼€å…³ (Feature Flags)</strong></td><td align="left">å‰ç«¯é›†æˆé…ç½®ä¸­å¿ƒ SDK (å¦‚ LaunchDarkly/è‡ªç ”)ï¼ŒåŠ¨æ€ä¸‹å‘é…ç½®æ§åˆ¶å®ä¾‹åˆ‡æ¢</td><td align="left">1. ç²’åº¦æœ€ç»† (å¯æŒ‰ UserID/Region) <br/> 2. å®æ—¶ç”Ÿæ•ˆï¼Œç§’çº§å›æ»š <br/> 3. æ— éœ€é‡æ–°éƒ¨ç½²</td><td align="left">1. å¼•å…¥é¢å¤–çš„ SDK ä¾èµ– <br/> 2. ä»£ç ä¸­å­˜åœ¨ <code>if/else</code> é€»è¾‘åˆ†æ”¯</td><td align="left"><strong>æ¨è</strong> <br/> é€‚åˆä¸šåŠ¡é€»è¾‘é‡æ„ï¼Œéœ€ç²¾ç»†åŒ–æ§åˆ¶æµé‡</td></tr><tr><td align="left"><strong>B. ç½‘å…³å±‚è·¯ç”± (Gateway Routing)</strong></td><td align="left">Nginx/Ingress æ ¹æ® Header å°†æµé‡è½¬å‘è‡³ä¸åŒç‰ˆæœ¬çš„æœåŠ¡é›†ç¾¤</td><td align="left">1. å¯¹å‰ç«¯ä»£ç é›¶ä¾µå…¥ <br/> 2. æ¶æ„æœ€å¹²å‡€</td><td align="left">1. ä»…é€‚ç”¨äºâ€œæ•´ç«™é‡æ„â€ <br/> 2. æ— æ³•æ§åˆ¶å‰ç«¯å†…éƒ¨é€»è¾‘ (å¦‚ Blob è§£æ)</td><td align="left">é€‚åˆåç«¯æ¥å£å‡çº§æˆ–å¾®æœåŠ¡æ‹†åˆ†</td></tr><tr><td align="left"><strong>C. æ„å»ºæ—¶åˆ†åŒ… (Build-Time Splitting)</strong></td><td align="left">CI æµæ°´çº¿æ„å»º Stable/Canary ä¸¤ä¸ª Docker é•œåƒï¼Œé€šè¿‡ K8s æƒé‡åˆ†æµ</td><td align="left">1. è¿ç»´ä¾§å®Œå…¨å¯æ§ <br/> 2. ç‰©ç†éš”ç¦»ï¼Œé£é™©æœ€ä½</td><td align="left">1. ç°åº¦å‘¨æœŸé•¿ (éœ€å‘ç‰ˆ) <br/> 2. æ— æ³•é’ˆå¯¹ç‰¹å®šç”¨æˆ·ç°åº¦</td><td align="left">é€‚åˆåº•å±‚åŸºç¡€è®¾æ–½å¤§è§„æ¨¡å‡çº§</td></tr></tbody></table>
<h3 data-id="heading-23">6.2 æœ€ç»ˆå†³ç­–ï¼šæ–¹æ¡ˆ A (Feature Flags Lite)</h3>
<h3 data-id="heading-24">6.2 æœ€ç»ˆå†³ç­–ï¼šæ–¹æ¡ˆ A (Feature Flags Lite)</h3>
<p>è€ƒè™‘åˆ°æœ¬æ¬¡ä»…ä¸º<strong>å‰ç«¯å†…éƒ¨é‡æ„</strong>ï¼Œä¸”å¸Œæœ›å°½é‡å‡å°‘å¯¹åç«¯çš„ä¾èµ–ï¼Œæˆ‘ä»¬å†³å®šé‡‡ç”¨ <strong>çº¯å‰ç«¯ç‰¹æ€§çš„è½»é‡çº§å¼€å…³</strong> æ–¹æ¡ˆã€‚</p>
<p><strong>å®ç°ç­–ç•¥</strong>ï¼š</p>
<ol>
<li><strong>é…ç½®å­˜å‚¨</strong>ï¼šåˆ©ç”¨ <code>localStorage</code> æ¨¡æ‹Ÿé…ç½®ä¸­å¿ƒï¼ŒKey ä¸º <code>AXIOS_FEATURE_FLAGS</code>ã€‚</li>
<li><strong>å·¥å‚æ¨¡å¼</strong>ï¼š<code>axios.service.ts</code> æ”¹é€ ä¸ºä»£ç†å·¥å‚ï¼Œæ ¹æ®é…ç½®åŠ¨æ€è¿”å› <code>NewClient</code> æˆ– <code>LegacyClient</code>ã€‚</li>
<li><strong>åˆ†æµç­–ç•¥</strong>ï¼šæ”¯æŒ <strong>å…¨å±€å¼€å…³</strong>ã€<strong>URLç™½åå•</strong>ã€<strong>éšæœºé‡‡æ ·ç‡</strong> ä¸‰ç§ç»´åº¦çš„æµé‡æ§åˆ¶ã€‚</li>
</ol>
<h4 data-id="heading-25">æ ¸å¿ƒä»£ç ï¼šç‰¹æ€§å¼€å…³å®ç° (<code>src/axios.service.ts</code>)</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ç‰¹æ€§å¼€å…³é…ç½®å®šä¹‰</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">FeatureFlags</span> {
  <span class="hljs-attr">enableNewAxios</span>: <span class="hljs-built_in">boolean</span>;  <span class="hljs-comment">// æ€»å¼€å…³</span>
  <span class="hljs-attr">whitelist</span>: <span class="hljs-built_in">string</span>[];      <span class="hljs-comment">// æ¥å£ç™½åå•</span>
  <span class="hljs-attr">sampleRate</span>: <span class="hljs-built_in">number</span>;       <span class="hljs-comment">// éšæœºé‡‡æ ·ç‡ (0-1)</span>
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">shouldUseNew</span>(<span class="hljs-params">config: AxiosRequestConfig | <span class="hljs-built_in">string</span></span>): <span class="hljs-built_in">boolean</span> {
  <span class="hljs-keyword">const</span> flags = <span class="hljs-title function_">getFeatureFlags</span>() <span class="hljs-comment">// ä» localStorage è¯»å–</span>
  
  <span class="hljs-keyword">if</span> (!flags.<span class="hljs-property">enableNewAxios</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
  
  <span class="hljs-keyword">const</span> url = <span class="hljs-keyword">typeof</span> config === <span class="hljs-string">'string'</span> ? config : config.<span class="hljs-property">url</span> || <span class="hljs-string">''</span>
  
  <span class="hljs-comment">// ç­–ç•¥1ï¼šç™½åå•ä¼˜å…ˆ</span>
  <span class="hljs-keyword">if</span> (flags.<span class="hljs-property">whitelist</span>.<span class="hljs-title function_">some</span>(<span class="hljs-function"><span class="hljs-params">path</span> =&gt;</span> url.<span class="hljs-title function_">includes</span>(path))) <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>
  
  <span class="hljs-comment">// ç­–ç•¥2ï¼šéšæœºé‡‡æ ·</span>
  <span class="hljs-keyword">if</span> (flags.<span class="hljs-property">sampleRate</span> &gt; <span class="hljs-number">0</span> &amp;&amp; <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() &lt; flags.<span class="hljs-property">sampleRate</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>
  
  <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
}

<span class="hljs-comment">// ä½¿ç”¨ Proxy åŠ¨æ€ä»£ç†</span>
<span class="hljs-keyword">const</span> proxy = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Proxy</span>(legacyInstance, {
  <span class="hljs-title function_">get</span>(<span class="hljs-params">target, prop</span>) {
    <span class="hljs-keyword">if</span> ([<span class="hljs-string">'request'</span>, <span class="hljs-string">'get'</span>, <span class="hljs-string">'post'</span>, ...].<span class="hljs-title function_">includes</span>(prop)) {
      <span class="hljs-keyword">return</span> <span class="hljs-function">(<span class="hljs-params">...args</span>) =&gt;</span> {
        <span class="hljs-comment">// è¿è¡Œæ—¶åˆ¤æ–­èµ°æ–°ç‰ˆè¿˜æ˜¯æ—§ç‰ˆ</span>
        <span class="hljs-keyword">if</span> (<span class="hljs-title function_">shouldUseNew</span>(args[<span class="hljs-number">0</span>])) <span class="hljs-keyword">return</span> newInstance[prop](...args)
        <span class="hljs-keyword">return</span> target[prop](...args)
      }
    }
    <span class="hljs-keyword">return</span> target[prop]
  }
})
</code></pre>
<h4 data-id="heading-26">æ“ä½œæŒ‡å—ï¼šå¦‚ä½•å¼€å¯ç°åº¦</h4>
<p>åœ¨æµè§ˆå™¨æ§åˆ¶å° (Console) æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å³å¯å®æ—¶æ§åˆ¶ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åœºæ™¯ 1ï¼šä»…å¼€å¯ /system/user æ¥å£çš„ç°åº¦</span>
<span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">setItem</span>(<span class="hljs-string">'AXIOS_FEATURE_FLAGS'</span>, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({
  <span class="hljs-attr">enableNewAxios</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">whitelist</span>: [<span class="hljs-string">'/system/user'</span>],
  <span class="hljs-attr">sampleRate</span>: <span class="hljs-number">0</span>
}))

<span class="hljs-comment">// åœºæ™¯ 2ï¼šå¼€å¯ 20% çš„å…¨å±€éšæœºæµé‡</span>
<span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">setItem</span>(<span class="hljs-string">'AXIOS_FEATURE_FLAGS'</span>, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({
  <span class="hljs-attr">enableNewAxios</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">whitelist</span>: [],
  <span class="hljs-attr">sampleRate</span>: <span class="hljs-number">0.2</span>
}))

<span class="hljs-comment">// åœºæ™¯ 3ï¼šç´§æ€¥å›æ»š (ä¸€é”®åˆ‡å›æ—§ç‰ˆ)</span>
<span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">removeItem</span>(<span class="hljs-string">'AXIOS_FEATURE_FLAGS'</span>)
</code></pre>
<h2 data-id="heading-27">ä¸ƒã€ é£é™©è¯„ä¼°ä¸å›å½’æµ‹è¯•ç­–ç•¥</h2>
<h3 data-id="heading-28">7.1 æ ¸å¿ƒé£é™©çŸ©é˜µ</h3>





























<table><thead><tr><th align="left">é£é™©ç‚¹</th><th align="left">å½±å“é¢</th><th align="center">ä¸¥é‡ç­‰çº§</th><th align="left">åº”å¯¹æªæ–½</th></tr></thead><tbody><tr><td align="left"><strong>éæ ‡å‡†æ¥å£å…¼å®¹æ€§</strong></td><td align="left">éƒ¨åˆ†è€æ¥å£è¿”å› <code>code: 200</code> (é 0)</td><td align="center">High</td><td align="left">1. å»ºç«‹ç™½åå•æœºåˆ¶ï¼Œè€æ¥å£å¼ºåˆ¶èµ°æ—§é€»è¾‘ <br/> 2. æ‹¦æˆªå™¨å¢åŠ  <code>skipUnifiedHandling</code> é…ç½®</td></tr><tr><td align="left"><strong>Blob ä¸‹è½½ç±»å‹è¯¯åˆ¤</strong></td><td align="left">åç«¯è¿”å›æ–‡ä»¶æµä½† Header ä¸º <code>application/json</code></td><td align="center">Medium</td><td align="left">1. å¢åŠ  Content-Type ä¸¥æ ¼æ ¡éªŒ <br/> 2. æä¾› <code>responseType</code> å¼ºåˆ¶è¦†å†™èƒ½åŠ›</td></tr><tr><td align="left"><strong>é‡è¯•é£æš´</strong></td><td align="left">POST è¯·æ±‚è¢«é”™è¯¯é‡è¯•å¯¼è‡´æ•°æ®é‡å¤</td><td align="center">High</td><td align="left">1. é»˜è®¤ä»…å…è®¸ GET/PUT/DELETE é‡è¯• <br/> 2. å¼ºåˆ¶è¦æ±‚éå¹‚ç­‰è¯·æ±‚æ˜¾å¼å¼€å¯ <code>allowNonIdempotent</code></td></tr></tbody></table>
<h3 data-id="heading-29">7.2 å›å½’æµ‹è¯•èŒƒå›´ (Regression Scope)</h3>
<p>ä¸ºç¡®ä¿ 0 æ•…éšœä¸Šçº¿ï¼ŒQA éœ€æ‰§è¡Œä»¥ä¸‹å›å½’ç­–ç•¥ï¼š</p>
<ol>
<li>
<p><strong>P0 çº§æ ¸å¿ƒæµç¨‹ (100% å›å½’)</strong>ï¼š</p>
<ul>
<li>ç™»å½•/ç™»å‡º/Token è¿‡æœŸè‡ªåŠ¨è·³è½¬ã€‚</li>
<li>æ ¸å¿ƒä¸šåŠ¡å•æ®çš„å¢åˆ æ”¹æŸ¥ (CRUD)ã€‚</li>
<li>æ–‡ä»¶ä¸Šä¼ /ä¸‹è½½ (Excel/PDF)ã€‚</li>
</ul>
</li>
<li>
<p><strong>å¼±ç½‘/å¼‚å¸¸åœºæ™¯ä¸“é¡¹æµ‹è¯•</strong>ï¼š</p>
<ul>
<li><strong>æ¨¡æ‹Ÿ 500/502</strong>ï¼šéªŒè¯æ˜¯å¦è§¦å‘ 3 æ¬¡é‡è¯•ï¼Œä¸”æœ€ç»ˆæŠ¥é”™æç¤ºæ­£ç¡®ã€‚</li>
<li><strong>æ¨¡æ‹Ÿæ–­ç½‘</strong>ï¼šéªŒè¯æ˜¯å¦æ•è· Network Error å¹¶æç¤ºå‹å¥½ä¿¡æ¯ã€‚</li>
<li><strong>æ…¢é€Ÿç½‘ç»œ (3G)</strong>ï¼šéªŒè¯è¶…æ—¶è®¾ç½® (<code>timeout</code>) æ˜¯å¦ç”Ÿæ•ˆã€‚</li>
</ul>
</li>
<li>
<p><strong>å…¼å®¹æ€§æµ‹è¯•</strong>ï¼š</p>
<ul>
<li>éªŒè¯è€æ—§æµè§ˆå™¨ (Chrome &lt; 80) ä¸‹ <code>Blob.text()</code> ç­‰æ–° API çš„ Polyfill æ˜¯å¦ç”Ÿæ•ˆã€‚</li>
</ul>
</li>
</ol>
<h2 data-id="heading-30">å…«ã€ æœªæ¥æ¼”è¿›è§„åˆ’</h2>
<ol>
<li><strong>BFF (Backend for Frontend) èåˆ</strong>ï¼š
<ul>
<li>å°†éƒ¨åˆ†æ•°æ®èšåˆé€»è¾‘ä¸‹æ²‰è‡³ Node.js å±‚ï¼Œå¤ç”¨æœ¬å¥— HTTP Client æ ¸å¿ƒä»£ç ã€‚</li>
</ul>
</li>
<li><strong>å…¨é“¾è·¯ç›‘æ§ (Observability)</strong>ï¼š
<ul>
<li>é›†æˆ OpenTelemetryï¼Œè‡ªåŠ¨æ”¶é›†è¯·æ±‚è€—æ—¶ã€æˆåŠŸç‡æŒ‡æ ‡ï¼Œå®ç°ç«¯åˆ°ç«¯çš„å¯è§‚æµ‹æ€§ã€‚</li>
</ul>
</li>
<li><strong>Mock å¹³å°æ‰“é€š</strong>ï¼š
<ul>
<li>æ‹¦æˆªå™¨å±‚ç›´æ¥é›†æˆ Mock.js æˆ–æœ¬åœ°ä»£ç†ï¼Œå®ç°æ— åç«¯æƒ…å†µä¸‹çš„é›¶æˆæœ¬å¼€å‘ã€‚</li>
</ul>
</li>
</ol>
<hr/>
<p><em>æ–‡æ¡£ç‰ˆæœ¬ï¼šv2.1.0 | æ¶æ„è®¾è®¡ï¼šå‰ç«¯æ¶æ„ç»„ | æ›´æ–°æ—¥æœŸï¼š2025-12-18</em></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[reactç»„ä»¶(4)---é«˜é˜¶ä½¿ç”¨åŠé—­å‘æŒ‡å—]]></title>    <link>https://juejin.cn/post/7584780417103822888</link>    <guid>https://juejin.cn/post/7584780417103822888</guid>    <pubDate>2025-12-18T07:15:28.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7584780417103822888" data-draft-id="7584909732612620323" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="reactç»„ä»¶(4)---é«˜é˜¶ä½¿ç”¨åŠé—­å‘æŒ‡å—"/> <meta itemprop="keywords" content="å‰ç«¯,React.js"/> <meta itemprop="datePublished" content="2025-12-18T07:15:28.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å‰ç«¯æ— æ¶¯"/> <meta itemprop="url" content="https://juejin.cn/user/3967483738859639"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            reactç»„ä»¶(4)---é«˜é˜¶ä½¿ç”¨åŠé—­å‘æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3967483738859639/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å‰ç«¯æ— æ¶¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-18T07:15:28.000Z" title="Thu Dec 18 2025 07:15:28 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-18
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>â€‹</p>
<h2 data-id="heading-0">ä¸€ã€ç»„ä»¶çš„å¤ç”¨ï¼šé¿å…é‡å¤ä»£ç çš„æœ€ä½³å®è·µ</h2>
<p>åœ¨å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸ä¼šé‡åˆ°å¤šä¸ªç»„ä»¶æ‹¥æœ‰ç›¸åŒçš„é€»è¾‘ï¼ˆå¦‚è¯·æ±‚æ•°æ®ã€å¤„ç†è¡¨å•ã€ç›‘å¬äº‹ä»¶ï¼‰ï¼Œæ­¤æ—¶éœ€è¦å°†è¿™äº›é€»è¾‘æŠ½ç¦»å‡ºæ¥ï¼Œå®ç°å¤ç”¨ã€‚ä»¥ä¸‹æ˜¯ React ä¸­å¸¸ç”¨çš„ç»„ä»¶å¤ç”¨æ–¹å¼ã€‚</p>
<h3 data-id="heading-1">1. è‡ªå®šä¹‰ Hooksï¼ˆæ¨èï¼‰</h3>
<p>è‡ªå®šä¹‰ Hooks æ˜¯ React 16.8 + æ¨å‡ºçš„å¤ç”¨é€»è¾‘çš„æœ€ä½³æ–¹å¼ï¼Œå®ƒæ˜¯ä¸€ä¸ªä»¥<code>use</code>å¼€å¤´çš„å‡½æ•°ï¼Œå¯ä»¥è°ƒç”¨å…¶ä»– Hooksï¼Œå°†ç»„ä»¶çš„é€»è¾‘æŠ½ç¦»ä¸ºç‹¬ç«‹çš„å‡½æ•°ã€‚</p>
<h4 data-id="heading-2">ç¤ºä¾‹ 1ï¼šè‡ªå®šä¹‰ Hook å®ç°æ•°æ®è¯·æ±‚</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { useState, useEffect } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;

<span class="hljs-comment">// è‡ªå®šä¹‰Hookï¼šå¤„ç†æ•°æ®è¯·æ±‚</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">useFetch</span> = (<span class="hljs-params">url</span>) =&gt; {
  <span class="hljs-keyword">const</span> [data, setData] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">null</span>);
  <span class="hljs-keyword">const</span> [loading, setLoading] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">true</span>);
  <span class="hljs-keyword">const</span> [error, setError] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">null</span>);

  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-comment">// å–æ¶ˆè¯·æ±‚çš„æ§åˆ¶å™¨</span>
    <span class="hljs-keyword">const</span> controller = <span class="hljs-keyword">new</span> <span class="hljs-title class_">AbortController</span>();

    <span class="hljs-keyword">const</span> <span class="hljs-title function_">fetchData</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
      <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(url, { <span class="hljs-attr">signal</span>: controller.<span class="hljs-property">signal</span> });
        <span class="hljs-keyword">if</span> (!response.<span class="hljs-property">ok</span>) {
          <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'è¯·æ±‚å¤±è´¥'</span>);
        }
        <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> response.<span class="hljs-title function_">json</span>();
        <span class="hljs-title function_">setData</span>(result);
        <span class="hljs-title function_">setError</span>(<span class="hljs-literal">null</span>);
      } <span class="hljs-keyword">catch</span> (err) {
        <span class="hljs-keyword">if</span> (err.<span class="hljs-property">name</span> !== <span class="hljs-string">'AbortError'</span>) {
          <span class="hljs-title function_">setError</span>(err.<span class="hljs-property">message</span>);
          <span class="hljs-title function_">setData</span>(<span class="hljs-literal">null</span>);
        }
      } <span class="hljs-keyword">finally</span> {
        <span class="hljs-title function_">setLoading</span>(<span class="hljs-literal">false</span>);
      }
    };

    <span class="hljs-title function_">fetchData</span>();

    <span class="hljs-comment">// ç»„ä»¶å¸è½½æ—¶å–æ¶ˆè¯·æ±‚</span>
    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> {
      controller.<span class="hljs-title function_">abort</span>();
    };
  }, [url]);

  <span class="hljs-keyword">return</span> { data, loading, error };
};

<span class="hljs-comment">// ä½¿ç”¨è‡ªå®šä¹‰Hookçš„ç»„ä»¶</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">DataList</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">const</span> { data, loading, error } = <span class="hljs-title function_">useFetch</span>(<span class="hljs-string">'https://api.example.com/data'</span>);

  <span class="hljs-keyword">if</span> (loading) <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>åŠ è½½ä¸­...<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span>;
  <span class="hljs-keyword">if</span> (error) <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>é”™è¯¯ï¼š{error}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span>;

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span>
      {data.map((item) =&gt; (
        <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">key</span>=<span class="hljs-string">{item.id}</span>&gt;</span>{item.name}<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
      ))}
    <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span></span>
  );
};
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<h4 data-id="heading-3">ç¤ºä¾‹ 2ï¼šè‡ªå®šä¹‰ Hook å®ç°æœ¬åœ°å­˜å‚¨</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { useState, useEffect } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;

<span class="hljs-comment">// è‡ªå®šä¹‰Hookï¼šå¤„ç†localStorage</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">useLocalStorage</span> = (<span class="hljs-params">key, initialValue</span>) =&gt; {
  <span class="hljs-comment">// ä»æœ¬åœ°å­˜å‚¨ä¸­è·å–åˆå§‹å€¼</span>
  <span class="hljs-keyword">const</span> [value, setValue] = <span class="hljs-title function_">useState</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">const</span> storedValue = <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(key);
      <span class="hljs-keyword">return</span> storedValue ? <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(storedValue) : initialValue;
    } <span class="hljs-keyword">catch</span> (err) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'è¯»å–æœ¬åœ°å­˜å‚¨å¤±è´¥ï¼š'</span>, err);
      <span class="hljs-keyword">return</span> initialValue;
    }
  });

  <span class="hljs-comment">// å½“valueå˜åŒ–æ—¶ï¼Œæ›´æ–°æœ¬åœ°å­˜å‚¨</span>
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">setItem</span>(key, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(value));
    } <span class="hljs-keyword">catch</span> (err) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'å†™å…¥æœ¬åœ°å­˜å‚¨å¤±è´¥ï¼š'</span>, err);
    }
  }, [key, value]);

  <span class="hljs-keyword">return</span> [value, setValue];
};

<span class="hljs-comment">// ä½¿ç”¨è‡ªå®šä¹‰Hookçš„ç»„ä»¶</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">LocalStorageDemo</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">const</span> [name, setName] = <span class="hljs-title function_">useLocalStorage</span>(<span class="hljs-string">'name'</span>, <span class="hljs-string">'æ¸¸å®¢'</span>);

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">input</span>
        <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span>
        <span class="hljs-attr">value</span>=<span class="hljs-string">{name}</span>
        <span class="hljs-attr">onChange</span>=<span class="hljs-string">{(e)</span> =&gt;</span> setName(e.target.value)}
        placeholder="è¯·è¾“å…¥å§“å"
      /&gt;
      <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>ä½ å¥½ï¼Œ{name}ï¼<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
};
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<h3 data-id="heading-4">2. é«˜é˜¶ç»„ä»¶ï¼ˆHOCï¼‰</h3>
<p>é«˜é˜¶ç»„ä»¶æ˜¯ä¸€ä¸ªæ¥æ”¶ç»„ä»¶å¹¶è¿”å›æ–°ç»„ä»¶çš„å‡½æ•°ï¼Œç”¨äºå¤ç”¨ç»„ä»¶é€»è¾‘ã€‚å®ƒæ˜¯ Hooks å‡ºç°ä¹‹å‰çš„ä¸»è¦å¤ç”¨æ–¹å¼ï¼Œç°åœ¨é€æ¸è¢«è‡ªå®šä¹‰ Hooks æ›¿ä»£ã€‚</p>
<h4 data-id="heading-5">ç¤ºä¾‹ï¼šé«˜é˜¶ç»„ä»¶å®ç°åŠ è½½çŠ¶æ€</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// é«˜é˜¶ç»„ä»¶ï¼šwithLoading</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">withLoading</span> = (<span class="hljs-params">WrappedComponent</span>) =&gt; {
  <span class="hljs-keyword">return</span> <span class="hljs-function">(<span class="hljs-params">{ loading, ...props }</span>) =&gt;</span> {
    <span class="hljs-keyword">if</span> (loading) {
      <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>åŠ è½½ä¸­...<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span>;
    }
    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">WrappedComponent</span> {<span class="hljs-attr">...props</span>} /&gt;</span></span>;
  };
};

<span class="hljs-comment">// åŸå§‹ç»„ä»¶</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">DataList</span> = (<span class="hljs-params">{ data }</span>) =&gt; {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span>
      {data.map((item) =&gt; (
        <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">key</span>=<span class="hljs-string">{item.id}</span>&gt;</span>{item.name}<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
      ))}
    <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span></span>
  );
};

<span class="hljs-comment">// å¢å¼ºåçš„ç»„ä»¶</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">DataListWithLoading</span> = <span class="hljs-title function_">withLoading</span>(<span class="hljs-title class_">DataList</span>);

<span class="hljs-comment">// ä½¿ç”¨å¢å¼ºåçš„ç»„ä»¶</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">App</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">const</span> [loading, setLoading] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">true</span>);
  <span class="hljs-keyword">const</span> [data, setData] = <span class="hljs-title function_">useState</span>([]);

  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
      <span class="hljs-title function_">setData</span>([{ <span class="hljs-attr">id</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'React'</span> }, { <span class="hljs-attr">id</span>: <span class="hljs-number">2</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'Vue'</span> }]);
      <span class="hljs-title function_">setLoading</span>(<span class="hljs-literal">false</span>);
    }, <span class="hljs-number">1000</span>);
  }, []);

  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">DataListWithLoading</span> <span class="hljs-attr">loading</span>=<span class="hljs-string">{loading}</span> <span class="hljs-attr">data</span>=<span class="hljs-string">{data}</span> /&gt;</span></span>;
};
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<h3 data-id="heading-6">3. Render Props</h3>
<p>Render Props æ˜¯æŒ‡ç»„ä»¶é€šè¿‡ä¸€ä¸ªåä¸º<code>render</code>çš„ Props æ¥æ”¶ä¸€ä¸ªå‡½æ•°ï¼Œè¯¥å‡½æ•°è¿”å› JSXï¼Œä»è€Œå®ç°é€»è¾‘å¤ç”¨ã€‚å®ƒä¹Ÿæ˜¯ Hooks å‡ºç°ä¹‹å‰çš„å¤ç”¨æ–¹å¼ï¼Œç°åœ¨ä½¿ç”¨è¾ƒå°‘ã€‚</p>
<h4 data-id="heading-7">ç¤ºä¾‹ï¼šRender Props å®ç°é¼ æ ‡ä½ç½®è·Ÿè¸ª</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// Render Propsç»„ä»¶ï¼šè·Ÿè¸ªé¼ æ ‡ä½ç½®</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">MouseTracker</span> = (<span class="hljs-params">{ render }</span>) =&gt; {
  <span class="hljs-keyword">const</span> [position, setPosition] = <span class="hljs-title function_">useState</span>({ <span class="hljs-attr">x</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">0</span> });

  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleMouseMove</span> = (<span class="hljs-params">e</span>) =&gt; {
      <span class="hljs-title function_">setPosition</span>({ <span class="hljs-attr">x</span>: e.<span class="hljs-property">clientX</span>, <span class="hljs-attr">y</span>: e.<span class="hljs-property">clientY</span> });
    };

    <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'mousemove'</span>, handleMouseMove);
    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">'mousemove'</span>, handleMouseMove);
    };
  }, []);

  <span class="hljs-comment">// è°ƒç”¨renderå‡½æ•°ï¼Œä¼ é€’é¼ æ ‡ä½ç½®</span>
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">render</span>(position);
};

<span class="hljs-comment">// ä½¿ç”¨Render Propsç»„ä»¶</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">App</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">MouseTracker</span>
      <span class="hljs-attr">render</span>=<span class="hljs-string">{(position)</span> =&gt;</span> (
        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>
          é¼ æ ‡ä½ç½®ï¼šX={position.x}ï¼ŒY={position.y}
        <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
      )}
    /&gt;</span>
  );
};
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<h2 data-id="heading-8">äºŒã€ç»„ä»¶çš„æ€§èƒ½ä¼˜åŒ–ï¼šè®©ç»„ä»¶æ›´é«˜æ•ˆ</h2>
<p>React ç»„ä»¶é»˜è®¤ä¼šåœ¨ Props æˆ– State å˜åŒ–æ—¶é‡æ–°æ¸²æŸ“ï¼Œä½†æœ‰æ—¶ä¼šå‡ºç°ä¸å¿…è¦çš„é‡æ¸²æŸ“ï¼Œå¯¼è‡´æ€§èƒ½ä¸‹é™ã€‚ä»¥ä¸‹æ˜¯å¸¸ç”¨çš„ç»„ä»¶æ€§èƒ½ä¼˜åŒ–æ–¹æ³•ã€‚</p>
<h3 data-id="heading-9">1. ä½¿ç”¨ React.memo ç¼“å­˜å‡½æ•°ç»„ä»¶</h3>
<p><code>React.memo</code>æ˜¯ä¸€ä¸ªé«˜é˜¶ç»„ä»¶ï¼Œç”¨äºç¼“å­˜å‡½æ•°ç»„ä»¶çš„æ¸²æŸ“ç»“æœï¼Œåªæœ‰å½“ç»„ä»¶çš„ Props å‘ç”Ÿå˜åŒ–æ—¶ï¼Œæ‰ä¼šé‡æ–°æ¸²æŸ“ç»„ä»¶ï¼ˆæµ…æ¯”è¾ƒ Propsï¼‰ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { memo } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;

<span class="hljs-comment">// æ™®é€šç»„ä»¶ï¼šæ¯æ¬¡çˆ¶ç»„ä»¶æ¸²æŸ“ï¼Œè¯¥ç»„ä»¶éƒ½ä¼šé‡æ–°æ¸²æŸ“</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">Child</span> = (<span class="hljs-params">{ name }</span>) =&gt; {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Childç»„ä»¶æ¸²æŸ“äº†'</span>);
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>{name}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span>;
};

<span class="hljs-comment">// ç¼“å­˜ç»„ä»¶ï¼šåªæœ‰nameå˜åŒ–æ—¶æ‰ä¼šé‡æ–°æ¸²æŸ“</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">MemoizedChild</span> = <span class="hljs-title function_">memo</span>(<span class="hljs-title class_">Child</span>);

<span class="hljs-comment">// çˆ¶ç»„ä»¶</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">Parent</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">const</span> [count, setCount] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>);

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>è®¡æ•°ï¼š{count}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> setCount(count + 1)}&gt;+1<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
      {/* ä½¿ç”¨ç¼“å­˜åçš„ç»„ä»¶ */}
      <span class="hljs-tag">&lt;<span class="hljs-name">MemoizedChild</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"React"</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
};
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<h3 data-id="heading-10">2. ä½¿ç”¨ useMemo ç¼“å­˜è®¡ç®—ç»“æœ</h3>
<p><code>useMemo</code>ç”¨äºç¼“å­˜å¤æ‚è®¡ç®—çš„ç»“æœï¼Œé¿å…æ¯æ¬¡æ¸²æŸ“éƒ½é‡æ–°è®¡ç®—ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { useState, useMemo } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;

<span class="hljs-comment">// å¤æ‚è®¡ç®—å‡½æ•°</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">calculateTotal</span> = (<span class="hljs-params">list</span>) =&gt; {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ‰§è¡Œå¤æ‚è®¡ç®—'</span>);
  <span class="hljs-keyword">return</span> list.<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">total, item</span>) =&gt;</span> total + item, <span class="hljs-number">0</span>);
};

<span class="hljs-keyword">const</span> <span class="hljs-title function_">App</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">const</span> [list, setList] = <span class="hljs-title function_">useState</span>([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>]);
  <span class="hljs-keyword">const</span> [count, setCount] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>);

  <span class="hljs-comment">// ç¼“å­˜è®¡ç®—ç»“æœï¼šåªæœ‰listå˜åŒ–æ—¶æ‰ä¼šé‡æ–°è®¡ç®—</span>
  <span class="hljs-keyword">const</span> total = <span class="hljs-title function_">useMemo</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">calculateTotal</span>(list), [list]);

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>æ€»å’Œï¼š{total}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>è®¡æ•°ï¼š{count}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> setCount(count + 1)}&gt;+1<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> setList([...list, 6])}&gt;æ·»åŠ æ•°å­—<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
};
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<h3 data-id="heading-11">3. ä½¿ç”¨ useCallback ç¼“å­˜å‡½æ•°</h3>
<p><code>useCallback</code>ç”¨äºç¼“å­˜å‡½æ•°çš„å¼•ç”¨ï¼Œé¿å…æ¯æ¬¡æ¸²æŸ“éƒ½åˆ›å»ºæ–°çš„å‡½æ•°ï¼Œä»è€Œé˜²æ­¢å­ç»„ä»¶å›  Props å˜åŒ–è€Œä¸å¿…è¦çš„é‡æ¸²æŸ“ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { useState, useCallback, memo } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;

<span class="hljs-keyword">const</span> <span class="hljs-title class_">Child</span> = <span class="hljs-title function_">memo</span>(<span class="hljs-function">(<span class="hljs-params">{ onButtonClick }</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Childç»„ä»¶æ¸²æŸ“äº†'</span>);
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{onButtonClick}</span>&gt;</span>ç‚¹å‡»æˆ‘<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span>;
});

<span class="hljs-keyword">const</span> <span class="hljs-title function_">Parent</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">const</span> [count, setCount] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>);

  <span class="hljs-comment">// ç¼“å­˜å‡½æ•°ï¼šæ¯æ¬¡æ¸²æŸ“è¿”å›ç›¸åŒçš„å‡½æ•°å¼•ç”¨</span>
  <span class="hljs-keyword">const</span> handleClick = <span class="hljs-title function_">useCallback</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æŒ‰é’®è¢«ç‚¹å‡»äº†'</span>);
  }, []); <span class="hljs-comment">// ç©ºä¾èµ–æ•°ç»„ï¼šä»…åˆ›å»ºä¸€æ¬¡</span>

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>è®¡æ•°ï¼š{count}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> setCount(count + 1)}&gt;+1<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Child</span> <span class="hljs-attr">onButtonClick</span>=<span class="hljs-string">{handleClick}</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
};
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<h3 data-id="heading-12">4. åˆ—è¡¨æ¸²æŸ“ä¼˜åŒ–ï¼šä½¿ç”¨å”¯ä¸€çš„ key</h3>
<p>åˆ—è¡¨æ¸²æŸ“æ—¶ï¼Œä¸ºæ¯ä¸ªåˆ—è¡¨é¡¹æ·»åŠ å”¯ä¸€çš„<code>key</code>å±æ€§ï¼Œå¸®åŠ© React è¯†åˆ«åˆ—è¡¨é¡¹çš„å˜åŒ–ï¼Œé¿å…ä¸å¿…è¦çš„ DOM æ“ä½œã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">TodoList</span> = (<span class="hljs-params">{ todos }</span>) =&gt; {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span>
      {todos.map((todo) =&gt; (
        // ä½¿ç”¨å”¯ä¸€çš„idä½œä¸ºkeyï¼Œä¸è¦ä½¿ç”¨ç´¢å¼•
        <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">key</span>=<span class="hljs-string">{todo.id}</span>&gt;</span>{todo.text}<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
      ))}
    <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span></span>
  );
};
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<h3 data-id="heading-13">5. æ‡’åŠ è½½ç»„ä»¶ï¼šReact.lazy ä¸ Suspense</h3>
<p>ä½¿ç”¨<code>React.lazy</code>å’Œ<code>Suspense</code>å®ç°ç»„ä»¶çš„æŒ‰éœ€åŠ è½½ï¼Œå‡å°‘åˆå§‹åŠ è½½çš„ä»£ç ä½“ç§¯ï¼Œæå‡é¡µé¢åŠ è½½é€Ÿåº¦ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { lazy, <span class="hljs-title class_">Suspense</span>, useState } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;

<span class="hljs-comment">// æ‡’åŠ è½½ç»„ä»¶ï¼šåªæœ‰å½“ç»„ä»¶è¢«æ¸²æŸ“æ—¶æ‰ä¼šåŠ è½½</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">LazyComponent</span> = <span class="hljs-title function_">lazy</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'./LazyComponent'</span>));

<span class="hljs-keyword">const</span> <span class="hljs-title function_">App</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">const</span> [showLazy, setShowLazy] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">false</span>);

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> setShowLazy(true)}&gt;æ˜¾ç¤ºæ‡’åŠ è½½ç»„ä»¶<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
      {showLazy &amp;&amp; (
        // Suspenseï¼šæŒ‡å®šåŠ è½½ä¸­çš„å ä½ç¬¦
        <span class="hljs-tag">&lt;<span class="hljs-name">Suspense</span> <span class="hljs-attr">fallback</span>=<span class="hljs-string">{</span>&lt;<span class="hljs-attr">p</span>&gt;</span>åŠ è½½ä¸­...<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>}&gt;
          <span class="hljs-tag">&lt;<span class="hljs-name">LazyComponent</span> /&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">Suspense</span>&gt;</span>
      )}
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
};
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<h2 data-id="heading-14">ä¸‰ã€ç»„ä»¶çš„æœ€ä½³å®è·µä¸é¿å‘æŒ‡å—</h2>
<p>æŒæ¡ä»¥ä¸‹æœ€ä½³å®è·µï¼Œå¯ä»¥è®©ä½ çš„ç»„ä»¶æ›´æ˜“ç»´æŠ¤ã€æ›´å¥å£®ã€‚</p>
<h3 data-id="heading-15">1. ç»„ä»¶çš„å•ä¸€èŒè´£</h3>
<p>ä¸€ä¸ªç»„ä»¶åªè´Ÿè´£ä¸€ä¸ªåŠŸèƒ½ï¼Œé¿å…åˆ›å»ºè¿‡äºåºå¤§çš„ç»„ä»¶ã€‚å¦‚æœç»„ä»¶åŠŸèƒ½è¿‡å¤šï¼Œåº”å°†å…¶æ‹†åˆ†ä¸ºå¤šä¸ªå­ç»„ä»¶ã€‚</p>
<h3 data-id="heading-16">2. ç»„ä»¶å‘½åè§„èŒƒ</h3>
<ul>
<li>ç»„ä»¶åä½¿ç”¨<strong>å¤§é©¼å³°å‘½åæ³•</strong>ï¼ˆPascalCaseï¼‰ï¼Œå¦‚<code>TodoList</code>ã€<code>Button</code>ï¼›</li>
<li>ç»„ä»¶æ–‡ä»¶åä¸ºç»„ä»¶åï¼Œå¦‚<code>TodoList.jsx</code>ã€<code>Button.tsx</code>ï¼›</li>
<li>é¿å…ä½¿ç”¨é€šç”¨åç§°ï¼Œå¦‚<code>Component</code>ã€<code>Box</code>ï¼Œåº”ä½¿ç”¨è¯­ä¹‰åŒ–åç§°ã€‚</li>
</ul>
<h3 data-id="heading-17">3. åˆç†æ‹†åˆ†ç»„ä»¶</h3>
<p>æŒ‰åŠŸèƒ½æˆ– UI ç»“æ„æ‹†åˆ†ç»„ä»¶ï¼Œä¾‹å¦‚ï¼š</p>
<ul>
<li>é¡µé¢çº§ç»„ä»¶ï¼š<code>HomePage</code>ã€<code>UserPage</code>ï¼›</li>
<li>å¸ƒå±€ç»„ä»¶ï¼š<code>Header</code>ã€<code>Footer</code>ã€<code>Sidebar</code>ï¼›</li>
<li>ä¸šåŠ¡ç»„ä»¶ï¼š<code>TodoList</code>ã€<code>UserCard</code>ï¼›</li>
<li>é€šç”¨ç»„ä»¶ï¼š<code>Button</code>ã€<code>Input</code>ã€<code>Modal</code>ã€‚</li>
</ul>
<h3 data-id="heading-18">4. é¿å…åœ¨æ¸²æŸ“æ—¶åˆ›å»ºå‡½æ•°æˆ–å¯¹è±¡</h3>
<p>åœ¨æ¸²æŸ“æ—¶åˆ›å»ºå‡½æ•°æˆ–å¯¹è±¡ä¼šå¯¼è‡´æ¯æ¬¡æ¸²æŸ“çš„å¼•ç”¨ä¸åŒï¼Œè§¦å‘å­ç»„ä»¶çš„ä¸å¿…è¦é‡æ¸²æŸ“ï¼Œåº”å°†å…¶æå–åˆ°ç»„ä»¶å¤–éƒ¨æˆ–ä½¿ç”¨<code>useCallback</code>/<code>useMemo</code>ç¼“å­˜ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">// é”™è¯¯ï¼šæ¯æ¬¡æ¸²æŸ“éƒ½ä¼šåˆ›å»ºæ–°çš„å‡½æ•°å’Œå¯¹è±¡
const <span class="hljs-attr">Child</span> = memo(({ <span class="hljs-literal">on</span>Click, style }) =&gt; { /* ... */ })<span class="hljs-comment">;</span>
const <span class="hljs-attr">Parent</span> = () =&gt; {
  return (
    &lt;Child
      <span class="hljs-attr">onClick</span>={() =&gt; console.log(<span class="hljs-string">'ç‚¹å‡»'</span>)}
      <span class="hljs-attr">style</span>={{ color: <span class="hljs-string">'red'</span> }}
    /&gt;
  )<span class="hljs-comment">;</span>
}<span class="hljs-comment">;</span>

// æ­£ç¡®ï¼šç¼“å­˜å‡½æ•°å’Œå¯¹è±¡
const <span class="hljs-attr">Parent</span> = () =&gt; {
  const <span class="hljs-attr">handleClick</span> = useCallback(() =&gt; console.log(<span class="hljs-string">'ç‚¹å‡»'</span>), [])<span class="hljs-comment">;</span>
  const <span class="hljs-attr">style</span> = useMemo(() =&gt; ({ color: <span class="hljs-string">'red'</span> }), [])<span class="hljs-comment">;</span>
  return &lt;Child <span class="hljs-attr">onClick</span>={handleClick} style={style} /&gt;<span class="hljs-comment">;</span>
}<span class="hljs-comment">;</span>
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<h3 data-id="heading-19">5. ä¸è¦ç›´æ¥ä¿®æ”¹ Props æˆ– State</h3>
<p>Props æ˜¯åªè¯»çš„ï¼ŒState æ˜¯ä¸å¯å˜çš„ï¼Œç›´æ¥ä¿®æ”¹ä¼šå¯¼è‡´ React æ— æ³•æ£€æµ‹åˆ°å˜åŒ–ï¼Œå¼•å‘æ¸²æŸ“å¼‚å¸¸ã€‚åº”ä½¿ç”¨ setState æˆ–ä¸å¯å˜æ–¹æ³•ï¼ˆå¦‚<code>concat</code>ã€<code>map</code>ã€æ‰©å±•è¿ç®—ç¬¦ï¼‰åˆ›å»ºæ–°çš„çŠ¶æ€ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">// é”™è¯¯ï¼šç›´æ¥ä¿®æ”¹State
const <span class="hljs-section">[list, setList]</span> = useState(<span class="hljs-section">[1, 2, 3]</span>)<span class="hljs-comment">;</span>
const <span class="hljs-attr">handleAdd</span> = () =&gt; {
  list.push(4)<span class="hljs-comment">; // ç›´æ¥ä¿®æ”¹æ•°ç»„</span>
  setList(list)<span class="hljs-comment">;</span>
}<span class="hljs-comment">;</span>

// æ­£ç¡®ï¼šåˆ›å»ºæ–°çš„æ•°ç»„
const <span class="hljs-attr">handleAdd</span> = () =&gt; {
  setList(<span class="hljs-section">[...list, 4]</span>)<span class="hljs-comment">; // æ‰©å±•è¿ç®—ç¬¦</span>
  // æˆ–
  // setList(<span class="hljs-attr">prev</span> =&gt; [...prev, <span class="hljs-number">4</span>])<span class="hljs-comment">;</span>
}<span class="hljs-comment">;</span>
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<h3 data-id="heading-20">6. æ­£ç¡®å¤„ç†å¼‚æ­¥æ“ä½œ</h3>
<p>åœ¨ç»„ä»¶ä¸­æ‰§è¡Œå¼‚æ­¥æ“ä½œï¼ˆå¦‚è¯·æ±‚æ•°æ®ï¼‰æ—¶ï¼Œåº”åœ¨ç»„ä»¶å¸è½½å‰å–æ¶ˆæ“ä½œï¼Œé¿å…å†…å­˜æ³„æ¼ã€‚</p>
<h3 data-id="heading-21">7. ä½¿ç”¨ TypeScript å¢å¼ºç±»å‹å®‰å…¨</h3>
<p>ä½¿ç”¨ TypeScript ç¼–å†™ç»„ä»¶ï¼Œå¯ä»¥ä¸º Propsã€State æ·»åŠ ç±»å‹æ³¨è§£ï¼Œæå‰å‘ç°ç±»å‹é”™è¯¯ï¼Œæå‡ä»£ç çš„å¯ç»´æŠ¤æ€§ã€‚</p>
<h2 data-id="heading-22">å››ã€æ€»ç»“</h2>
<p>ç»„ä»¶æ˜¯ React çš„æ ¸å¿ƒï¼ŒæŒæ¡ç»„ä»¶çš„åˆ›å»ºã€æ ¸å¿ƒç‰¹æ€§ã€é€šä¿¡ã€å¤ç”¨å’Œæ€§èƒ½ä¼˜åŒ–ï¼Œæ˜¯ç¼–å†™é«˜è´¨é‡ React åº”ç”¨çš„å…³é”®ã€‚ä»å‡½æ•°ç»„ä»¶ + Hooks çš„åŸºç¡€ä½¿ç”¨ï¼Œåˆ° Context API å’ŒçŠ¶æ€ç®¡ç†åº“çš„è·¨ç»„ä»¶é€šä¿¡ï¼Œå†åˆ°è‡ªå®šä¹‰ Hooks çš„é€»è¾‘å¤ç”¨å’Œæ€§èƒ½ä¼˜åŒ–ï¼Œæ¯ä¸€æ­¥éƒ½ä½“ç°äº† React çš„è®¾è®¡æ€æƒ³ï¼š<strong>ç»„ä»¶åŒ–ã€å•å‘æ•°æ®æµã€ä¸å¯å˜æ€§</strong>ã€‚</p>
<p>éšç€ React çš„å‘å±•ï¼Œå‡½æ•°ç»„ä»¶ + Hooks å·²ç»æˆä¸ºä¸»æµå¼€å‘æ¨¡å¼ï¼Œè‡ªå®šä¹‰ Hooks å–ä»£äº†é«˜é˜¶ç»„ä»¶å’Œ Render Propsï¼Œæˆä¸ºé€»è¾‘å¤ç”¨çš„æœ€ä½³æ–¹å¼ã€‚åœ¨å®é™…å¼€å‘ä¸­ï¼Œåº”éµå¾ªç»„ä»¶çš„å•ä¸€èŒè´£åŸåˆ™ï¼Œåˆç†æ‹†åˆ†å’Œå¤ç”¨ç»„ä»¶ï¼ŒåŒæ—¶æ³¨é‡æ€§èƒ½ä¼˜åŒ–å’Œä»£ç è§„èŒƒï¼Œè®©ä½ çš„ React åº”ç”¨æ›´é«˜æ•ˆã€æ›´æ˜“ç»´æŠ¤ã€‚</p>
<p>â€‹</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€Windows Hostã€‘ hostsé…ç½®å¢åŠ è®¿é—®githubæµç•…åº¦]]></title>    <link>https://juejin.cn/post/7584831190730260506</link>    <guid>https://juejin.cn/post/7584831190730260506</guid>    <pubDate>2025-12-18T07:12:10.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7584831190730260506" data-draft-id="7584810656382828553" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€Windows Hostã€‘ hostsé…ç½®å¢åŠ è®¿é—®githubæµç•…åº¦"/> <meta itemprop="keywords" content="GitHub,äººå·¥æ™ºèƒ½,Git"/> <meta itemprop="datePublished" content="2025-12-18T07:12:10.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="DKNG"/> <meta itemprop="url" content="https://juejin.cn/user/3659642848425655"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€Windows Hostã€‘ hostsé…ç½®å¢åŠ è®¿é—®githubæµç•…åº¦
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3659642848425655/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    DKNG
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-18T07:12:10.000Z" title="Thu Dec 18 2025 07:12:10 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-18
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{font-family:-apple-system,system-ui,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial;color:#00325e}.markdown-body ::selection{background-color:#00325e;color:#fff}.markdown-body blockquote{padding:10px 20px;background-color:#fffaf0;box-shadow:0 3px 10px 0 rgba(255,172,194,.24);border:1px solid #f3ca8e;transition:all .2s;margin:1em 0;border-radius:5px}.markdown-body blockquote p{font-size:14px;line-height:25px;color:#795548}.markdown-body blockquote p:last-child{margin:0}.markdown-body blockquote:hover{border-color:#ff9800;background-color:#fff8e0;box-shadow:0 6px 10px -5px rgba(225,173,98,.3803921569)}.markdown-body blockquote code{color:#ff502c}.markdown-body pre{border:1px solid #8cc0f3;box-shadow:0 3px 10px 0 rgba(255,198,198,.28);border-radius:5px;transition:all .2s;overflow-x:auto;white-space:pre-wrap}.markdown-body pre:hover{border-color:#6d9dce}.markdown-body pre&gt;code{padding:10px 20px;color:#00325e;background:#f0f8ff;font-size:12px;line-height:1.6;display:block}.markdown-body code{background:#f6fbff;color:#0b5393;padding:2px 4px;border-radius:4px;font-size:12px}.markdown-body p{font-size:14px;line-height:28px;text-align:justify;margin-bottom:17px;color:#595959}.markdown-body a{color:#00325e;text-decoration:none}.markdown-body a:after{content:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAAXNSR0IArs4c6QAAAQdJREFUKFNt0DtLA0EUBeBzZle0Eks7rcUfEfBRCha7NorYa6NmVJzgyi4smUgKtdZGCJktLMVH4Y8QeztLWyE7VyLEuNFbXj4Oh0P8c8mZm+uJrEN4BJFTeP/MUVe3bnocfALwkOlo1zS7iZAzf6Cx7oXgbaqjxiDEWCcVaGyxQ8pSWo9XhqhoQ/xUFbaKjhe5V+CmR7mnSplEEF6GSmJ+F/d0KHvbCIIJCLc85U6BC5mONgbJNM3uFag++sX7z8O8MzsWBucifMx0dDGE1kmm458KDVukAlnNdDz/exEeW3dNkbfsYC0xtmgDWP6ELLZ0/F6BJu/UoFQN5AkoeUjeJPvx6+i+X5Sjah4tA6gYAAAAAElFTkSuQmCC);margin-left:2px}.markdown-body a:hover{box-shadow:0 1px}.markdown-body table{max-width:100%;border-collapse:collapse;border-spacing:0;box-shadow:0 3px 10px 0 rgba(255,238,172,.24);transition:all .2s}.markdown-body table:hover{box-shadow:0 3px 10px 0 rgba(185,169,103,.24)}.markdown-body table tr th{border:1px solid #8cc0f3;background-color:#f0f8ff;padding:12px 15px}.markdown-body table tr td{border:1px solid rgba(243,202,142,.4);padding:12px 15px}.markdown-body table tbody tr{transition:all .2s}.markdown-body table tbody tr:hover td{border-color:#f3ca8e;background-color:#fff8e0;z-index:1}.markdown-body img{max-width:100%}.markdown-body h1{font-size:20px;margin-top:30px;margin-bottom:10px;padding-left:30px;position:relative}.markdown-body h1&gt;code{font-size:20px}.markdown-body h1:before{content:"ğŸº";display:block;font-size:18px;width:18px;height:18px;left:0;position:absolute}.markdown-body h2{font-size:18px;margin-top:30px;margin-bottom:10px;padding-left:28px;position:relative}.markdown-body h2&gt;code{font-size:18px}.markdown-body h2:before{content:"ğŸ»";display:block;font-size:16px;width:16px;height:16px;left:0;position:absolute}.markdown-body h3{font-size:16px;margin-top:30px;margin-bottom:10px;padding-left:26px;position:relative}.markdown-body h3&gt;code{font-size:16px}.markdown-body h3:before{content:"ğŸ¥‚";display:block;font-size:14px;width:14px;height:14px;left:0;position:absolute}.markdown-body h4{font-size:14px;margin-top:30px;margin-bottom:10px;padding-left:24px;position:relative}.markdown-body h4&gt;code{font-size:14px}.markdown-body h4:before{content:"ğŸ¥ƒ";display:block;font-size:12px;width:12px;height:12px;left:0;position:absolute}.markdown-body h5{font-size:12px;margin-top:30px;margin-bottom:10px}.markdown-body h5&gt;code{font-size:12px}.markdown-body h6{font-size:10px;margin-top:30px;margin-bottom:10px}.markdown-body h6&gt;code{font-size:10px}.markdown-body h1,.markdown-body h2{color:#ff502c}.markdown-body hr{height:4px;border:none;margin-top:32px;margin-bottom:32px;background-size:4px 1px;background-image:linear-gradient(270deg,#6d9dce,#8cc0f3 25%,transparent 50%)}.markdown-body hr:nth-child(2n){background-image:linear-gradient(270deg,#ff9800,#fff8e0 25%,transparent 50%)}.markdown-body ul{padding-inline-start:20px}.markdown-body ul li{list-style-type:"ğŸ”¸"}.markdown-body ul li li{list-style-type:"â—»ï¸"}.markdown-body ul li li li{list-style-type:"â–«ï¸"}.markdown-body ol{padding-inline-start:20px}.markdown-body ol ::marker{color:#ff9800}.markdown-body ol,.markdown-body ul{line-height:2em}.markdown-body li{padding-inline-start:1ch}.markdown-body li.task-list-item{list-style:none;padding-inline-start:0}.markdown-body li input{padding-right:2px}.markdown-body li input[type=checkbox i]{appearance:none}.markdown-body li input:before{content:"ğŸŸ©";display:block;width:13px;height:13px}.markdown-body li input:checked:before{content:"âœ…"}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="atelier-sulphurpool-light">.hljs-comment,.hljs-quote{color:#6b7394}.hljs-attribute,.hljs-link,.hljs-name,.hljs-regexp,.hljs-selector-class,.hljs-selector-id,.hljs-tag,.hljs-template-variable,.hljs-variable{color:#c94922}.hljs-built_in,.hljs-builtin-name,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-type{color:#c76b29}.hljs-bullet,.hljs-string,.hljs-symbol{color:#ac9739}.hljs-section,.hljs-title{color:#3d8fd1}.hljs-keyword,.hljs-selector-tag{color:#6679cc}.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#f5f7ff;color:#5e6687}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>githubå¡é¡¿ï¼Œæ‰“ä¸å¼€æˆ–è€…å¾ˆæ…¢å¯ä»¥è¯•è¯•ä»¥ä¸‹æ–¹æ³•ï¼š</p>
</blockquote>
<p><strong>1.åœ¨çº¿DNSè§£æ</strong></p>
<p>1). github.com<br/>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.ip33.com%2Fdns.html" target="_blank" title="https://www.ip33.com/dns.html" ref="nofollow noopener noreferrer">www.ip33.com/dns.html</a></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e1636f0003bb47fe8dbf99b815525e42~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgREtORw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766646730&amp;x-signature=qoW6G3RVIjvWHZlRSg48UXsyrIE%3D" alt="image.png" loading="lazy"/></p>
<p>2). github.global.ssl.fastly.net</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/943f5a53162044e0bccce72c74dbb21a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgREtORw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766646730&amp;x-signature=Bm7zoinfwrI%2BkSVvb5NUhhAjgFA%3D" alt="image.png" loading="lazy"/></p>
<p><strong>2.æ‰¾åˆ° Hostsæ–‡ä»¶</strong></p>
<ul>
<li>Windows:Â <code>C:\Windows\System32\drivers\etc\hosts</code></li>
<li>Mac/Linux:Â <code>/etc/hosts</code></li>
</ul>
<p><strong>3.å°†Dyn Dnså¯¹åº”çš„IPå–å‡ºï¼Œé…ç½®åˆ° windows Hostsæ–‡ä»¶ä¸­</strong></p>
<pre><code class="hljs language-java" lang="java">#è®¿é—® github
<span class="hljs-number">140.82</span><span class="hljs-number">.116</span><span class="hljs-number">.4</span>  github.com
<span class="hljs-number">74.86</span><span class="hljs-number">.142</span><span class="hljs-number">.55</span>  github.global.ssl.fastly.net

</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2dcdc7d7173d4fc5ab42547c3f76cdc8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgREtORw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766646730&amp;x-signature=pf8mKM7E2kuwwhADkKfQ4xXdlbA%3D" alt="image.png" loading="lazy"/></p>
<p><strong>4.æ¸…é™¤DNSç¼“å­˜(ä¿®æ”¹å®Œhostsæ–‡ä»¶åå¿…é¡»åˆ·æ–°æ‰èƒ½ç”Ÿæ•ˆ)</strong></p>
<ul>
<li>Windowsç³»ç»Ÿä½¿ç”¨å‘½ä»¤:cmd</li>
</ul>
<pre><code class="hljs language-cmd" lang="cmd">ipconfig /flushdns

</code></pre>
<ul>
<li>Linuxç³»ç»Ÿæ‰§è¡Œï¼šbash</li>
</ul>
<pre><code class="hljs language-bash" lang="bash">sudo systemd-resolve --flush-caches

</code></pre>
<ul>
<li>MacOSä½¿ç”¨ï¼š</li>
</ul>
<pre><code class="hljs language-bash" lang="bash">sudo dscacheutil -flushcache sudo killall -HUP mDNSResponder
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æµè§ˆå™¨ç½‘ç»œè¯·æ±‚ APIï¼šå…¨é¢è§£æä¸é«˜çº§å°è£…(1)]]></title>    <link>https://juejin.cn/post/7584861353804070948</link>    <guid>https://juejin.cn/post/7584861353804070948</guid>    <pubDate>2025-12-18T07:42:40.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7584861353804070948" data-draft-id="7584759201073102889" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æµè§ˆå™¨ç½‘ç»œè¯·æ±‚ APIï¼šå…¨é¢è§£æä¸é«˜çº§å°è£…(1)"/> <meta itemprop="keywords" content="å‰ç«¯,WebSocket,axios"/> <meta itemprop="datePublished" content="2025-12-18T07:42:40.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="1024è‚¥å®…"/> <meta itemprop="url" content="https://juejin.cn/user/588993964030574"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æµè§ˆå™¨ç½‘ç»œè¯·æ±‚ APIï¼šå…¨é¢è§£æä¸é«˜çº§å°è£…(1)
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/588993964030574/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    1024è‚¥å®…
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-18T07:42:40.000Z" title="Thu Dec 18 2025 07:42:40 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-18
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»14åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h4 data-id="heading-0">å¼•è¨€</h4>
<p>åœ¨ç°ä»£Webå¼€å‘ä¸­ï¼Œç½‘ç»œè¯·æ±‚æ˜¯å®ç°å‰åç«¯æ•°æ®äº¤äº’çš„æ ¸å¿ƒæŠ€æœ¯ã€‚ä»åŸºç¡€çš„XMLHttpRequeståˆ°ç°ä»£çš„Fetch APIï¼Œå†åˆ°åŠŸèƒ½ä¸°å¯Œçš„WebSocketï¼Œæµè§ˆå™¨æä¾›äº†å¤šç§ç½‘ç»œé€šä¿¡æœºåˆ¶ã€‚æœ¬æ–‡å°†å…¨é¢æ·±å…¥æ¢è®¨æµè§ˆå™¨ç½‘ç»œè¯·æ±‚ç›¸å…³çš„APIï¼Œæä¾›é«˜çº§å°è£…æ–¹æ¡ˆï¼Œå¹¶æ¶µç›–å®é™…å¼€å‘ä¸­çš„å„ç§å¤æ‚åœºæ™¯ã€‚</p>
<h4 data-id="heading-1">ä¸€ã€ç°ä»£ç½‘ç»œè¯·æ±‚APIæ¦‚è§ˆ</h4>
<h5 data-id="heading-2">1.1 ä»XMLHttpRequeståˆ°Fetch API</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">NetworkAPIEvolution</span> {
  <span class="hljs-comment">// ä¼ ç»Ÿçš„XMLHttpRequestå®ç°</span>
  <span class="hljs-keyword">static</span> <span class="hljs-title function_">xhrRequest</span>(<span class="hljs-params">url, options = {}</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
      <span class="hljs-keyword">const</span> xhr = <span class="hljs-keyword">new</span> <span class="hljs-title class_">XMLHttpRequest</span>();
      <span class="hljs-keyword">const</span> {
        method = <span class="hljs-string">'GET'</span>,
        headers = {},
        data = <span class="hljs-literal">null</span>,
        timeout = <span class="hljs-number">0</span>,
        responseType = <span class="hljs-string">''</span>
      } = options;
      
      xhr.<span class="hljs-title function_">open</span>(method, url, <span class="hljs-literal">true</span>);
      
      <span class="hljs-comment">// è®¾ç½®è¯·æ±‚å¤´</span>
      <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">entries</span>(headers).<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">[key, value]</span>) =&gt;</span> {
        xhr.<span class="hljs-title function_">setRequestHeader</span>(key, value);
      });
      
      <span class="hljs-comment">// è®¾ç½®å“åº”ç±»å‹</span>
      <span class="hljs-keyword">if</span> (responseType) {
        xhr.<span class="hljs-property">responseType</span> = responseType;
      }
      
      <span class="hljs-comment">// è®¾ç½®è¶…æ—¶</span>
      xhr.<span class="hljs-property">timeout</span> = timeout;
      
      <span class="hljs-comment">// äº‹ä»¶å¤„ç†</span>
      xhr.<span class="hljs-property">onload</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
        <span class="hljs-keyword">if</span> (xhr.<span class="hljs-property">status</span> &gt;= <span class="hljs-number">200</span> &amp;&amp; xhr.<span class="hljs-property">status</span> &lt; <span class="hljs-number">300</span>) {
          <span class="hljs-keyword">let</span> response;
          
          <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">if</span> (xhr.<span class="hljs-property">responseType</span> === <span class="hljs-string">'json'</span>) {
              response = xhr.<span class="hljs-property">response</span>;
            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (xhr.<span class="hljs-property">responseType</span> === <span class="hljs-string">'blob'</span>) {
              response = xhr.<span class="hljs-property">response</span>;
            } <span class="hljs-keyword">else</span> {
              response = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(xhr.<span class="hljs-property">responseText</span>);
            }
          } <span class="hljs-keyword">catch</span> (e) {
            response = xhr.<span class="hljs-property">responseText</span>;
          }
          
          <span class="hljs-title function_">resolve</span>({
            <span class="hljs-attr">data</span>: response,
            <span class="hljs-attr">status</span>: xhr.<span class="hljs-property">status</span>,
            <span class="hljs-attr">statusText</span>: xhr.<span class="hljs-property">statusText</span>,
            <span class="hljs-attr">headers</span>: xhr.<span class="hljs-title function_">getAllResponseHeaders</span>()
          });
        } <span class="hljs-keyword">else</span> {
          <span class="hljs-title function_">reject</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">`HTTP <span class="hljs-subst">${xhr.status}</span>: <span class="hljs-subst">${xhr.statusText}</span>`</span>));
        }
      };
      
      xhr.<span class="hljs-property">onerror</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
        <span class="hljs-title function_">reject</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'Network error'</span>));
      };
      
      xhr.<span class="hljs-property">ontimeout</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
        <span class="hljs-title function_">reject</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'Request timeout'</span>));
      };
      
      xhr.<span class="hljs-property">onprogress</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) {
        <span class="hljs-keyword">if</span> (event.<span class="hljs-property">lengthComputable</span>) {
          <span class="hljs-keyword">const</span> percentComplete = (event.<span class="hljs-property">loaded</span> / event.<span class="hljs-property">total</span>) * <span class="hljs-number">100</span>;
          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Upload progress: <span class="hljs-subst">${percentComplete.toFixed(<span class="hljs-number">2</span>)}</span>%`</span>);
        }
      };
      
      xhr.<span class="hljs-title function_">send</span>(data);
    });
  }
  
  <span class="hljs-comment">// Fetch APIåŸºç¡€å®ç°</span>
  <span class="hljs-keyword">static</span> <span class="hljs-keyword">async</span> <span class="hljs-title function_">fetchRequest</span>(<span class="hljs-params">url, options = {}</span>) {
    <span class="hljs-keyword">const</span> {
      method = <span class="hljs-string">'GET'</span>,
      headers = {},
      body = <span class="hljs-literal">null</span>,
      timeout = <span class="hljs-number">30000</span>,
      credentials = <span class="hljs-string">'same-origin'</span>,
      mode = <span class="hljs-string">'cors'</span>,
      cache = <span class="hljs-string">'default'</span>,
      redirect = <span class="hljs-string">'follow'</span>,
      referrer = <span class="hljs-string">'client'</span>
    } = options;
    
    <span class="hljs-comment">// åˆ›å»ºAbortControllerç”¨äºè¶…æ—¶æ§åˆ¶</span>
    <span class="hljs-keyword">const</span> controller = <span class="hljs-keyword">new</span> <span class="hljs-title class_">AbortController</span>();
    <span class="hljs-keyword">const</span> signal = controller.<span class="hljs-property">signal</span>;
    
    <span class="hljs-comment">// è®¾ç½®è¶…æ—¶</span>
    <span class="hljs-keyword">const</span> timeoutId = <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
      controller.<span class="hljs-title function_">abort</span>();
    }, timeout);
    
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(url, {
        method,
        headers,
        body,
        credentials,
        mode,
        cache,
        redirect,
        referrer,
        signal
      });
      
      <span class="hljs-built_in">clearTimeout</span>(timeoutId);
      
      <span class="hljs-comment">// æ£€æŸ¥å“åº”çŠ¶æ€</span>
      <span class="hljs-keyword">if</span> (!response.<span class="hljs-property">ok</span>) {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">`HTTP <span class="hljs-subst">${response.status}</span>: <span class="hljs-subst">${response.statusText}</span>`</span>);
      }
      
      <span class="hljs-comment">// æ ¹æ®Content-Typeè§£æå“åº”</span>
      <span class="hljs-keyword">const</span> contentType = response.<span class="hljs-property">headers</span>.<span class="hljs-title function_">get</span>(<span class="hljs-string">'content-type'</span>);
      <span class="hljs-keyword">let</span> data;
      
      <span class="hljs-keyword">if</span> (contentType &amp;&amp; contentType.<span class="hljs-title function_">includes</span>(<span class="hljs-string">'application/json'</span>)) {
        data = <span class="hljs-keyword">await</span> response.<span class="hljs-title function_">json</span>();
      } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (contentType &amp;&amp; contentType.<span class="hljs-title function_">includes</span>(<span class="hljs-string">'text/'</span>)) {
        data = <span class="hljs-keyword">await</span> response.<span class="hljs-title function_">text</span>();
      } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (contentType &amp;&amp; contentType.<span class="hljs-title function_">includes</span>(<span class="hljs-string">'multipart/form-data'</span>)) {
        data = <span class="hljs-keyword">await</span> response.<span class="hljs-title function_">formData</span>();
      } <span class="hljs-keyword">else</span> {
        data = <span class="hljs-keyword">await</span> response.<span class="hljs-title function_">blob</span>();
      }
      
      <span class="hljs-keyword">return</span> {
        data,
        <span class="hljs-attr">status</span>: response.<span class="hljs-property">status</span>,
        <span class="hljs-attr">statusText</span>: response.<span class="hljs-property">statusText</span>,
        <span class="hljs-attr">headers</span>: response.<span class="hljs-property">headers</span>,
        response
      };
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-built_in">clearTimeout</span>(timeoutId);
      
      <span class="hljs-keyword">if</span> (error.<span class="hljs-property">name</span> === <span class="hljs-string">'AbortError'</span>) {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'Request timeout'</span>);
      }
      
      <span class="hljs-keyword">throw</span> error;
    }
  }
  
  <span class="hljs-comment">// æ€§èƒ½å¯¹æ¯”</span>
  <span class="hljs-keyword">static</span> <span class="hljs-keyword">async</span> <span class="hljs-title function_">performanceComparison</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> testUrl = <span class="hljs-string">'https://jsonplaceholder.typicode.com/posts/1'</span>;
    <span class="hljs-keyword">const</span> iterations = <span class="hljs-number">10</span>;
    <span class="hljs-keyword">const</span> results = {
      <span class="hljs-attr">xhr</span>: { <span class="hljs-attr">times</span>: [], <span class="hljs-attr">avg</span>: <span class="hljs-number">0</span> },
      <span class="hljs-attr">fetch</span>: { <span class="hljs-attr">times</span>: [], <span class="hljs-attr">avg</span>: <span class="hljs-number">0</span> }
    };
    
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Starting performance comparison...'</span>);
    
    <span class="hljs-comment">// æµ‹è¯•XHR</span>
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; iterations; i++) {
      <span class="hljs-keyword">const</span> start = performance.<span class="hljs-title function_">now</span>();
      <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">xhrRequest</span>(testUrl);
      <span class="hljs-keyword">const</span> end = performance.<span class="hljs-title function_">now</span>();
      results.<span class="hljs-property">xhr</span>.<span class="hljs-property">times</span>.<span class="hljs-title function_">push</span>(end - start);
    }
    
    <span class="hljs-comment">// æµ‹è¯•Fetch</span>
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; iterations; i++) {
      <span class="hljs-keyword">const</span> start = performance.<span class="hljs-title function_">now</span>();
      <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">fetchRequest</span>(testUrl);
      <span class="hljs-keyword">const</span> end = performance.<span class="hljs-title function_">now</span>();
      results.<span class="hljs-property">fetch</span>.<span class="hljs-property">times</span>.<span class="hljs-title function_">push</span>(end - start);
    }
    
    <span class="hljs-comment">// è®¡ç®—å¹³å‡å€¼</span>
    results.<span class="hljs-property">xhr</span>.<span class="hljs-property">avg</span> = results.<span class="hljs-property">xhr</span>.<span class="hljs-property">times</span>.<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> a + b, <span class="hljs-number">0</span>) / iterations;
    results.<span class="hljs-property">fetch</span>.<span class="hljs-property">avg</span> = results.<span class="hljs-property">fetch</span>.<span class="hljs-property">times</span>.<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> a + b, <span class="hljs-number">0</span>) / iterations;
    
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Performance results:'</span>, results);
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`XHR average: <span class="hljs-subst">${results.xhr.avg.toFixed(<span class="hljs-number">2</span>)}</span>ms`</span>);
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Fetch average: <span class="hljs-subst">${results.fetch.avg.toFixed(<span class="hljs-number">2</span>)}</span>ms`</span>);
    
    <span class="hljs-keyword">return</span> results;
  }
}
</code></pre>
<h5 data-id="heading-3">1.2 Fetch APIçš„å±€é™æ€§åŠè§£å†³æ–¹æ¡ˆ</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">FetchLimitations</span> {
  <span class="hljs-comment">// å¤„ç†Fetchä¸æ”¯æŒçš„ç‰¹æ€§</span>
  <span class="hljs-keyword">static</span> <span class="hljs-title function_">getFetchPolyfills</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> polyfills = {};
    
    <span class="hljs-comment">// 1. è¿›åº¦ç›‘æ§</span>
    <span class="hljs-keyword">if</span> (!(<span class="hljs-string">'upload'</span> <span class="hljs-keyword">in</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Request</span>(<span class="hljs-string">''</span>))) {
      polyfills.<span class="hljs-property">progress</span> = <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span>(<span class="hljs-params">url, options = {}</span>) {
        <span class="hljs-keyword">const</span> { onProgress, ...fetchOptions } = options;
        
        <span class="hljs-comment">// ä½¿ç”¨XHRæ¥è·å–è¿›åº¦</span>
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
          <span class="hljs-keyword">const</span> xhr = <span class="hljs-keyword">new</span> <span class="hljs-title class_">XMLHttpRequest</span>();
          
          xhr.<span class="hljs-title function_">open</span>(options.<span class="hljs-property">method</span> || <span class="hljs-string">'GET'</span>, url);
          
          <span class="hljs-comment">// è®¾ç½®è¯·æ±‚å¤´</span>
          <span class="hljs-keyword">if</span> (options.<span class="hljs-property">headers</span>) {
            <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">entries</span>(options.<span class="hljs-property">headers</span>).<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">[key, value]</span>) =&gt;</span> {
              xhr.<span class="hljs-title function_">setRequestHeader</span>(key, value);
            });
          }
          
          <span class="hljs-comment">// è¿›åº¦äº‹ä»¶</span>
          <span class="hljs-keyword">if</span> (onProgress) {
            xhr.<span class="hljs-property">upload</span>.<span class="hljs-property">onprogress</span> = onProgress;
            xhr.<span class="hljs-property">onprogress</span> = onProgress;
          }
          
          xhr.<span class="hljs-property">onload</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
            <span class="hljs-keyword">if</span> (xhr.<span class="hljs-property">status</span> &gt;= <span class="hljs-number">200</span> &amp;&amp; xhr.<span class="hljs-property">status</span> &lt; <span class="hljs-number">300</span>) {
              <span class="hljs-keyword">let</span> data;
              
              <span class="hljs-keyword">try</span> {
                data = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(xhr.<span class="hljs-property">responseText</span>);
              } <span class="hljs-keyword">catch</span> {
                data = xhr.<span class="hljs-property">responseText</span>;
              }
              
              <span class="hljs-title function_">resolve</span>({
                data,
                <span class="hljs-attr">status</span>: xhr.<span class="hljs-property">status</span>,
                <span class="hljs-attr">statusText</span>: xhr.<span class="hljs-property">statusText</span>
              });
            } <span class="hljs-keyword">else</span> {
              <span class="hljs-title function_">reject</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">`HTTP <span class="hljs-subst">${xhr.status}</span>`</span>));
            }
          };
          
          xhr.<span class="hljs-property">onerror</span> = reject;
          xhr.<span class="hljs-property">ontimeout</span> = reject;
          
          xhr.<span class="hljs-title function_">send</span>(options.<span class="hljs-property">body</span>);
        });
      };
    }
    
    <span class="hljs-comment">// 2. è¶…æ—¶å¤„ç†</span>
    <span class="hljs-keyword">if</span> (!(<span class="hljs-string">'timeout'</span> <span class="hljs-keyword">in</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Request</span>(<span class="hljs-string">''</span>))) {
      polyfills.<span class="hljs-property">timeout</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">url, options = {}</span>) {
        <span class="hljs-keyword">const</span> { timeout = <span class="hljs-number">30000</span>, ...fetchOptions } = options;
        <span class="hljs-keyword">const</span> controller = <span class="hljs-keyword">new</span> <span class="hljs-title class_">AbortController</span>();
        <span class="hljs-keyword">const</span> timeoutId = <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> controller.<span class="hljs-title function_">abort</span>(), timeout);
        
        <span class="hljs-keyword">return</span> <span class="hljs-title function_">fetch</span>(url, { ...fetchOptions, <span class="hljs-attr">signal</span>: controller.<span class="hljs-property">signal</span> })
          .<span class="hljs-title function_">finally</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">clearTimeout</span>(timeoutId));
      };
    }
    
    <span class="hljs-comment">// 3. è¯·æ±‚å–æ¶ˆ</span>
    polyfills.<span class="hljs-property">cancelable</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">url, options = {}</span>) {
      <span class="hljs-keyword">const</span> controller = <span class="hljs-keyword">new</span> <span class="hljs-title class_">AbortController</span>();
      <span class="hljs-keyword">const</span> promise = <span class="hljs-title function_">fetch</span>(url, { ...options, <span class="hljs-attr">signal</span>: controller.<span class="hljs-property">signal</span> });
      
      <span class="hljs-keyword">return</span> {
        promise,
        <span class="hljs-attr">cancel</span>: <span class="hljs-function">() =&gt;</span> controller.<span class="hljs-title function_">abort</span>()
      };
    };
    
    <span class="hljs-keyword">return</span> polyfills;
  }
  
  <span class="hljs-comment">// å¤„ç†æµå¼å“åº”</span>
  <span class="hljs-keyword">static</span> <span class="hljs-keyword">async</span> <span class="hljs-title function_">handleStreamResponse</span>(<span class="hljs-params">url, onChunk, onComplete</span>) {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(url);
      <span class="hljs-keyword">const</span> reader = response.<span class="hljs-property">body</span>.<span class="hljs-title function_">getReader</span>();
      <span class="hljs-keyword">const</span> decoder = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TextDecoder</span>();
      <span class="hljs-keyword">let</span> result = <span class="hljs-string">''</span>;
      
      <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) {
        <span class="hljs-keyword">const</span> { done, value } = <span class="hljs-keyword">await</span> reader.<span class="hljs-title function_">read</span>();
        
        <span class="hljs-keyword">if</span> (done) {
          <span class="hljs-keyword">if</span> (onComplete) <span class="hljs-title function_">onComplete</span>(result);
          <span class="hljs-keyword">break</span>;
        }
        
        <span class="hljs-comment">// å¤„ç†chunk</span>
        <span class="hljs-keyword">const</span> chunk = decoder.<span class="hljs-title function_">decode</span>(value, { <span class="hljs-attr">stream</span>: <span class="hljs-literal">true</span> });
        result += chunk;
        
        <span class="hljs-keyword">if</span> (onChunk) <span class="hljs-title function_">onChunk</span>(chunk, result);
      }
      
      <span class="hljs-keyword">return</span> result;
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-keyword">throw</span> error;
    }
  }
  
  <span class="hljs-comment">// å¤„ç†å¤§æ–‡ä»¶ä¸Šä¼ </span>
  <span class="hljs-keyword">static</span> <span class="hljs-keyword">async</span> <span class="hljs-title function_">uploadLargeFile</span>(<span class="hljs-params">url, file, options = {}</span>) {
    <span class="hljs-keyword">const</span> {
      chunkSize = <span class="hljs-number">1024</span> * <span class="hljs-number">1024</span>, <span class="hljs-comment">// 1MB chunks</span>
      onProgress,
      onComplete,
      onError
    } = options;
    
    <span class="hljs-comment">// åˆ›å»ºFormData</span>
    <span class="hljs-keyword">const</span> formData = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FormData</span>();
    formData.<span class="hljs-title function_">append</span>(<span class="hljs-string">'file'</span>, file);
    formData.<span class="hljs-title function_">append</span>(<span class="hljs-string">'fileName'</span>, file.<span class="hljs-property">name</span>);
    formData.<span class="hljs-title function_">append</span>(<span class="hljs-string">'fileSize'</span>, file.<span class="hljs-property">size</span>);
    formData.<span class="hljs-title function_">append</span>(<span class="hljs-string">'chunkSize'</span>, chunkSize);
    formData.<span class="hljs-title function_">append</span>(<span class="hljs-string">'totalChunks'</span>, <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">ceil</span>(file.<span class="hljs-property">size</span> / chunkSize));
    
    <span class="hljs-comment">// å¦‚æœæ–‡ä»¶å¾ˆå¤§ï¼Œä½¿ç”¨åˆ†ç‰‡ä¸Šä¼ </span>
    <span class="hljs-keyword">if</span> (file.<span class="hljs-property">size</span> &gt; chunkSize) {
      <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">uploadInChunks</span>(url, file, {
        chunkSize,
        onProgress,
        onComplete,
        onError
      });
    }
    
    <span class="hljs-comment">// æ™®é€šä¸Šä¼ </span>
    <span class="hljs-keyword">return</span> <span class="hljs-title function_">fetch</span>(url, {
      <span class="hljs-attr">method</span>: <span class="hljs-string">'POST'</span>,
      <span class="hljs-attr">body</span>: formData
    });
  }
  
  <span class="hljs-keyword">static</span> <span class="hljs-keyword">async</span> <span class="hljs-title function_">uploadInChunks</span>(<span class="hljs-params">url, file, options</span>) {
    <span class="hljs-keyword">const</span> {
      chunkSize = <span class="hljs-number">1024</span> * <span class="hljs-number">1024</span>,
      onProgress,
      onComplete,
      onError
    } = options;
    
    <span class="hljs-keyword">const</span> totalChunks = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">ceil</span>(file.<span class="hljs-property">size</span> / chunkSize);
    <span class="hljs-keyword">const</span> fileId = <span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-built_in">Date</span>.now()}</span>-<span class="hljs-subst">${<span class="hljs-built_in">Math</span>.random().toString(<span class="hljs-number">36</span>).substr(<span class="hljs-number">2</span>)}</span>`</span>;
    <span class="hljs-keyword">let</span> uploadedChunks = <span class="hljs-number">0</span>;
    
    <span class="hljs-comment">// ä¸Šä¼ æ¯ä¸ªåˆ†ç‰‡</span>
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> chunkIndex = <span class="hljs-number">0</span>; chunkIndex &lt; totalChunks; chunkIndex++) {
      <span class="hljs-keyword">const</span> start = chunkIndex * chunkSize;
      <span class="hljs-keyword">const</span> end = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(start + chunkSize, file.<span class="hljs-property">size</span>);
      <span class="hljs-keyword">const</span> chunk = file.<span class="hljs-title function_">slice</span>(start, end);
      
      <span class="hljs-keyword">const</span> formData = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FormData</span>();
      formData.<span class="hljs-title function_">append</span>(<span class="hljs-string">'fileId'</span>, fileId);
      formData.<span class="hljs-title function_">append</span>(<span class="hljs-string">'chunk'</span>, chunk);
      formData.<span class="hljs-title function_">append</span>(<span class="hljs-string">'chunkIndex'</span>, chunkIndex);
      formData.<span class="hljs-title function_">append</span>(<span class="hljs-string">'totalChunks'</span>, totalChunks);
      formData.<span class="hljs-title function_">append</span>(<span class="hljs-string">'fileName'</span>, file.<span class="hljs-property">name</span>);
      formData.<span class="hljs-title function_">append</span>(<span class="hljs-string">'fileSize'</span>, file.<span class="hljs-property">size</span>);
      
      <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">`<span class="hljs-subst">${url}</span>/chunk`</span>, {
          <span class="hljs-attr">method</span>: <span class="hljs-string">'POST'</span>,
          <span class="hljs-attr">body</span>: formData
        });
        
        <span class="hljs-keyword">if</span> (!response.<span class="hljs-property">ok</span>) {
          <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">`Chunk <span class="hljs-subst">${chunkIndex}</span> upload failed`</span>);
        }
        
        uploadedChunks++;
        
        <span class="hljs-comment">// æŠ¥å‘Šè¿›åº¦</span>
        <span class="hljs-keyword">if</span> (onProgress) {
          <span class="hljs-keyword">const</span> progress = (uploadedChunks / totalChunks) * <span class="hljs-number">100</span>;
          <span class="hljs-title function_">onProgress</span>(progress, chunkIndex, totalChunks);
        }
      } <span class="hljs-keyword">catch</span> (error) {
        <span class="hljs-keyword">if</span> (onError) <span class="hljs-title function_">onError</span>(error, chunkIndex);
        <span class="hljs-keyword">throw</span> error;
      }
    }
    
    <span class="hljs-comment">// æ‰€æœ‰åˆ†ç‰‡ä¸Šä¼ å®Œæˆï¼Œåˆå¹¶æ–‡ä»¶</span>
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">`<span class="hljs-subst">${url}</span>/merge`</span>, {
        <span class="hljs-attr">method</span>: <span class="hljs-string">'POST'</span>,
        <span class="hljs-attr">headers</span>: {
          <span class="hljs-string">'Content-Type'</span>: <span class="hljs-string">'application/json'</span>
        },
        <span class="hljs-attr">body</span>: <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({
          fileId,
          <span class="hljs-attr">fileName</span>: file.<span class="hljs-property">name</span>,
          totalChunks
        })
      });
      
      <span class="hljs-keyword">if</span> (onComplete) <span class="hljs-title function_">onComplete</span>(response);
      <span class="hljs-keyword">return</span> response;
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-keyword">if</span> (onError) <span class="hljs-title function_">onError</span>(error);
      <span class="hljs-keyword">throw</span> error;
    }
  }
}
</code></pre>
<h4 data-id="heading-4">äºŒã€å¢å¼ºå‹Fetchå°è£…</h4>
<h5 data-id="heading-5">2.1 å®Œæ•´çš„HTTPå®¢æˆ·ç«¯å®ç°</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">HttpClient</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">baseURL = <span class="hljs-string">''</span>, defaultOptions = {}</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">baseURL</span> = baseURL;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">defaultOptions</span> = {
      <span class="hljs-attr">headers</span>: {
        <span class="hljs-string">'Content-Type'</span>: <span class="hljs-string">'application/json'</span>,
        ...defaultOptions.<span class="hljs-property">headers</span>
      },
      <span class="hljs-attr">timeout</span>: <span class="hljs-number">30000</span>,
      <span class="hljs-attr">credentials</span>: <span class="hljs-string">'include'</span>,
      <span class="hljs-attr">mode</span>: <span class="hljs-string">'cors'</span>,
      ...defaultOptions
    };
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">interceptors</span> = {
      <span class="hljs-attr">request</span>: [],
      <span class="hljs-attr">response</span>: [],
      <span class="hljs-attr">error</span>: []
    };
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">pendingRequests</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">cache</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">retryConfig</span> = {
      <span class="hljs-attr">maxRetries</span>: <span class="hljs-number">3</span>,
      <span class="hljs-attr">retryDelay</span>: <span class="hljs-number">1000</span>,
      <span class="hljs-attr">retryOn</span>: [<span class="hljs-number">408</span>, <span class="hljs-number">429</span>, <span class="hljs-number">500</span>, <span class="hljs-number">502</span>, <span class="hljs-number">503</span>, <span class="hljs-number">504</span>]
    };
    
    <span class="hljs-comment">// åˆå§‹åŒ–è¯·æ±‚é˜Ÿåˆ—</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">requestQueue</span> = [];
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">maxConcurrent</span> = <span class="hljs-number">6</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">activeRequests</span> = <span class="hljs-number">0</span>;
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">init</span>();
  }
  
  <span class="hljs-title function_">init</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// æ·»åŠ é»˜è®¤æ‹¦æˆªå™¨</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">addDefaultInterceptors</span>();
  }
  
  <span class="hljs-title function_">addDefaultInterceptors</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// è¯·æ±‚æ‹¦æˆªå™¨ï¼šæ·»åŠ è®¤è¯token</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">interceptors</span>.<span class="hljs-property">request</span>.<span class="hljs-title function_">use</span>(
      <span class="hljs-keyword">async</span> (config) =&gt; {
        <span class="hljs-comment">// ä»localStorageæˆ–cookieè·å–token</span>
        <span class="hljs-keyword">const</span> token = <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(<span class="hljs-string">'auth_token'</span>) || 
                      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getCookie</span>(<span class="hljs-string">'auth_token'</span>);
        
        <span class="hljs-keyword">if</span> (token) {
          config.<span class="hljs-property">headers</span> = {
            ...config.<span class="hljs-property">headers</span>,
            <span class="hljs-string">'Authorization'</span>: <span class="hljs-string">`Bearer <span class="hljs-subst">${token}</span>`</span>
          };
        }
        
        <span class="hljs-comment">// æ·»åŠ è¯·æ±‚æ—¶é—´æˆ³é˜²æ­¢ç¼“å­˜</span>
        <span class="hljs-keyword">if</span> (config.<span class="hljs-property">method</span>?.<span class="hljs-title function_">toLowerCase</span>() === <span class="hljs-string">'get'</span>) {
          <span class="hljs-keyword">const</span> url = <span class="hljs-keyword">new</span> <span class="hljs-title function_">URL</span>(config.<span class="hljs-property">url</span>, <span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span>.<span class="hljs-property">origin</span>);
          url.<span class="hljs-property">searchParams</span>.<span class="hljs-title function_">set</span>(<span class="hljs-string">'_t'</span>, <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>());
          config.<span class="hljs-property">url</span> = url.<span class="hljs-title function_">toString</span>();
        }
        
        <span class="hljs-keyword">return</span> config;
      }
    );
    
    <span class="hljs-comment">// å“åº”æ‹¦æˆªå™¨ï¼šå¤„ç†é€šç”¨é”™è¯¯</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">interceptors</span>.<span class="hljs-property">response</span>.<span class="hljs-title function_">use</span>(
      <span class="hljs-function">(<span class="hljs-params">response</span>) =&gt;</span> response,
      <span class="hljs-keyword">async</span> (error) =&gt; {
        <span class="hljs-comment">// å¤„ç†è®¤è¯å¤±è´¥</span>
        <span class="hljs-keyword">if</span> (error.<span class="hljs-property">status</span> === <span class="hljs-number">401</span>) {
          <span class="hljs-comment">// åˆ·æ–°tokenæˆ–è·³è½¬åˆ°ç™»å½•é¡µ</span>
          <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">handleUnauthorized</span>();
        }
        
        <span class="hljs-comment">// å¤„ç†æœåŠ¡å™¨é”™è¯¯</span>
        <span class="hljs-keyword">if</span> (error.<span class="hljs-property">status</span> &gt;= <span class="hljs-number">500</span>) {
          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Server error:'</span>, error);
        }
        
        <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(error);
      }
    );
  }
  
  <span class="hljs-comment">// æ ¸å¿ƒè¯·æ±‚æ–¹æ³•</span>
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">request</span>(<span class="hljs-params">url, options = {}</span>) {
    <span class="hljs-keyword">const</span> requestId = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">generateRequestId</span>(url, options);
    
    <span class="hljs-comment">// æ£€æŸ¥æ˜¯å¦å·²æœ‰ç›¸åŒçš„è¯·æ±‚åœ¨å¤„ç†ä¸­</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">pendingRequests</span>.<span class="hljs-title function_">has</span>(requestId)) {
      <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">pendingRequests</span>.<span class="hljs-title function_">get</span>(requestId);
    }
    
    <span class="hljs-comment">// åˆå¹¶é…ç½®</span>
    <span class="hljs-keyword">const</span> config = {
      <span class="hljs-attr">url</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">baseURL</span> ? <span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.baseURL}</span><span class="hljs-subst">${url}</span>`</span> : url,
      ...<span class="hljs-variable language_">this</span>.<span class="hljs-property">defaultOptions</span>,
      ...options
    };
    
    <span class="hljs-comment">// æ‰§è¡Œè¯·æ±‚æ‹¦æˆªå™¨</span>
    <span class="hljs-keyword">let</span> processedConfig = config;
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> interceptor <span class="hljs-keyword">of</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">interceptors</span>.<span class="hljs-property">request</span>) {
      processedConfig = <span class="hljs-keyword">await</span> <span class="hljs-title function_">interceptor</span>(processedConfig);
    }
    
    <span class="hljs-comment">// åˆ›å»ºè¯·æ±‚Promise</span>
    <span class="hljs-keyword">const</span> requestPromise = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">executeRequest</span>(processedConfig, requestId);
    
    <span class="hljs-comment">// å­˜å‚¨pendingè¯·æ±‚</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">pendingRequests</span>.<span class="hljs-title function_">set</span>(requestId, requestPromise);
    
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> requestPromise;
      
      <span class="hljs-comment">// æ‰§è¡Œå“åº”æ‹¦æˆªå™¨</span>
      <span class="hljs-keyword">let</span> processedResponse = response;
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> interceptor <span class="hljs-keyword">of</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">interceptors</span>.<span class="hljs-property">response</span>) {
        processedResponse = <span class="hljs-keyword">await</span> <span class="hljs-title function_">interceptor</span>(processedResponse);
      }
      
      <span class="hljs-keyword">return</span> processedResponse;
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-comment">// æ‰§è¡Œé”™è¯¯æ‹¦æˆªå™¨</span>
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> interceptor <span class="hljs-keyword">of</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">interceptors</span>.<span class="hljs-property">error</span>) {
        <span class="hljs-keyword">await</span> <span class="hljs-title function_">interceptor</span>(error, processedConfig);
      }
      
      <span class="hljs-keyword">throw</span> error;
    } <span class="hljs-keyword">finally</span> {
      <span class="hljs-comment">// æ¸…ç†pendingè¯·æ±‚</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">pendingRequests</span>.<span class="hljs-title function_">delete</span>(requestId);
    }
  }
  
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">executeRequest</span>(<span class="hljs-params">config, requestId</span>) {
    <span class="hljs-keyword">const</span> {
      url,
      method = <span class="hljs-string">'GET'</span>,
      headers,
      body,
      timeout,
      signal,
      <span class="hljs-attr">cache</span>: cacheOption,
      ...restOptions
    } = config;
    
    <span class="hljs-comment">// æ£€æŸ¥ç¼“å­˜</span>
    <span class="hljs-keyword">if</span> (method.<span class="hljs-title function_">toUpperCase</span>() === <span class="hljs-string">'GET'</span> &amp;&amp; cacheOption) {
      <span class="hljs-keyword">const</span> cached = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getFromCache</span>(url, cacheOption);
      <span class="hljs-keyword">if</span> (cached) {
        <span class="hljs-keyword">return</span> cached;
      }
    }
    
    <span class="hljs-comment">// åˆ›å»ºAbortControllerç”¨äºè¶…æ—¶æ§åˆ¶</span>
    <span class="hljs-keyword">const</span> controller = <span class="hljs-keyword">new</span> <span class="hljs-title class_">AbortController</span>();
    <span class="hljs-keyword">const</span> abortSignal = signal || controller.<span class="hljs-property">signal</span>;
    
    <span class="hljs-comment">// è®¾ç½®è¶…æ—¶</span>
    <span class="hljs-keyword">const</span> timeoutId = timeout ? <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
      controller.<span class="hljs-title function_">abort</span>();
    }, timeout) : <span class="hljs-literal">null</span>;
    
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">const</span> fetchOptions = {
        method,
        headers,
        <span class="hljs-attr">signal</span>: abortSignal,
        ...restOptions
      };
      
      <span class="hljs-comment">// å¤„ç†è¯·æ±‚ä½“</span>
      <span class="hljs-keyword">if</span> (body) {
        <span class="hljs-keyword">if</span> (body <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">FormData</span> || body <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">URLSearchParams</span>) {
          fetchOptions.<span class="hljs-property">body</span> = body;
          <span class="hljs-comment">// FormDataä¼šè‡ªå·±è®¾ç½®Content-Type</span>
          <span class="hljs-keyword">if</span> (fetchOptions.<span class="hljs-property">headers</span> &amp;&amp; fetchOptions.<span class="hljs-property">headers</span>[<span class="hljs-string">'Content-Type'</span>]) {
            <span class="hljs-keyword">delete</span> fetchOptions.<span class="hljs-property">headers</span>[<span class="hljs-string">'Content-Type'</span>];
          }
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> body === <span class="hljs-string">'object'</span>) {
          fetchOptions.<span class="hljs-property">body</span> = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(body);
        } <span class="hljs-keyword">else</span> {
          fetchOptions.<span class="hljs-property">body</span> = body;
        }
      }
      
      <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(url, fetchOptions);
      
      <span class="hljs-comment">// æ¸…é™¤è¶…æ—¶å®šæ—¶å™¨</span>
      <span class="hljs-keyword">if</span> (timeoutId) <span class="hljs-built_in">clearTimeout</span>(timeoutId);
      
      <span class="hljs-comment">// è§£æå“åº”</span>
      <span class="hljs-keyword">const</span> contentType = response.<span class="hljs-property">headers</span>.<span class="hljs-title function_">get</span>(<span class="hljs-string">'content-type'</span>);
      <span class="hljs-keyword">let</span> data;
      
      <span class="hljs-keyword">if</span> (contentType &amp;&amp; contentType.<span class="hljs-title function_">includes</span>(<span class="hljs-string">'application/json'</span>)) {
        data = <span class="hljs-keyword">await</span> response.<span class="hljs-title function_">json</span>();
      } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (contentType &amp;&amp; contentType.<span class="hljs-title function_">includes</span>(<span class="hljs-string">'text/'</span>)) {
        data = <span class="hljs-keyword">await</span> response.<span class="hljs-title function_">text</span>();
      } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (contentType &amp;&amp; contentType.<span class="hljs-title function_">includes</span>(<span class="hljs-string">'multipart/form-data'</span>)) {
        data = <span class="hljs-keyword">await</span> response.<span class="hljs-title function_">formData</span>();
      } <span class="hljs-keyword">else</span> {
        data = <span class="hljs-keyword">await</span> response.<span class="hljs-title function_">blob</span>();
      }
      
      <span class="hljs-keyword">const</span> result = {
        data,
        <span class="hljs-attr">status</span>: response.<span class="hljs-property">status</span>,
        <span class="hljs-attr">statusText</span>: response.<span class="hljs-property">statusText</span>,
        <span class="hljs-attr">headers</span>: response.<span class="hljs-property">headers</span>,
        config,
        requestId
      };
      
      <span class="hljs-comment">// ç¼“å­˜å“åº”</span>
      <span class="hljs-keyword">if</span> (method.<span class="hljs-title function_">toUpperCase</span>() === <span class="hljs-string">'GET'</span> &amp;&amp; cacheOption &amp;&amp; response.<span class="hljs-property">ok</span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setCache</span>(url, result, cacheOption);
      }
      
      <span class="hljs-keyword">if</span> (!response.<span class="hljs-property">ok</span>) {
        <span class="hljs-keyword">throw</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">createError</span>(response, data, config);
      }
      
      <span class="hljs-keyword">return</span> result;
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-comment">// æ¸…é™¤è¶…æ—¶å®šæ—¶å™¨</span>
      <span class="hljs-keyword">if</span> (timeoutId) <span class="hljs-built_in">clearTimeout</span>(timeoutId);
      
      <span class="hljs-keyword">if</span> (error.<span class="hljs-property">name</span> === <span class="hljs-string">'AbortError'</span>) {
        <span class="hljs-keyword">throw</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">createError</span>(<span class="hljs-literal">null</span>, <span class="hljs-string">'Request timeout'</span>, config);
      }
      
      <span class="hljs-keyword">throw</span> error;
    }
  }
  
  <span class="hljs-comment">// åˆ›å»ºé”™è¯¯å¯¹è±¡</span>
  <span class="hljs-title function_">createError</span>(<span class="hljs-params">response, data, config</span>) {
    <span class="hljs-keyword">const</span> error = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(
      response ? <span class="hljs-string">`HTTP <span class="hljs-subst">${response.status}</span>: <span class="hljs-subst">${response.statusText}</span>`</span> : <span class="hljs-string">'Network Error'</span>
    );
    
    <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>(error, {
      config,
      <span class="hljs-attr">response</span>: response ? {
        data,
        <span class="hljs-attr">status</span>: response.<span class="hljs-property">status</span>,
        <span class="hljs-attr">statusText</span>: response.<span class="hljs-property">statusText</span>,
        <span class="hljs-attr">headers</span>: response.<span class="hljs-property">headers</span>
      } : <span class="hljs-literal">null</span>,
      <span class="hljs-attr">isHttpError</span>: <span class="hljs-literal">true</span>
    });
    
    <span class="hljs-keyword">return</span> error;
  }
  
  <span class="hljs-comment">// ç”Ÿæˆè¯·æ±‚ID</span>
  <span class="hljs-title function_">generateRequestId</span>(<span class="hljs-params">url, options</span>) {
    <span class="hljs-keyword">const</span> { method = <span class="hljs-string">'GET'</span>, body } = options;
    <span class="hljs-keyword">const</span> timestamp = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();
    <span class="hljs-keyword">const</span> bodyHash = body ? <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">hashString</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(body)) : <span class="hljs-string">''</span>;
    
    <span class="hljs-keyword">return</span> <span class="hljs-string">`<span class="hljs-subst">${method}</span>_<span class="hljs-subst">${url}</span>_<span class="hljs-subst">${bodyHash}</span>_<span class="hljs-subst">${timestamp}</span>`</span>;
  }
  
  <span class="hljs-comment">// ç®€å•çš„å­—ç¬¦ä¸²å“ˆå¸Œ</span>
  <span class="hljs-title function_">hashString</span>(<span class="hljs-params">str</span>) {
    <span class="hljs-keyword">let</span> hash = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; str.<span class="hljs-property">length</span>; i++) {
      <span class="hljs-keyword">const</span> char = str.<span class="hljs-title function_">charCodeAt</span>(i);
      hash = ((hash &lt;&lt; <span class="hljs-number">5</span>) - hash) + char;
      hash = hash &amp; hash;
    }
    <span class="hljs-keyword">return</span> hash.<span class="hljs-title function_">toString</span>(<span class="hljs-number">36</span>);
  }
  
  <span class="hljs-comment">// HTTPæ–¹æ³•å¿«æ·æ–¹å¼</span>
  <span class="hljs-title function_">get</span>(<span class="hljs-params">url, options = {}</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">request</span>(url, { ...options, <span class="hljs-attr">method</span>: <span class="hljs-string">'GET'</span> });
  }
  
  <span class="hljs-title function_">post</span>(<span class="hljs-params">url, data, options = {}</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">request</span>(url, { ...options, <span class="hljs-attr">method</span>: <span class="hljs-string">'POST'</span>, <span class="hljs-attr">body</span>: data });
  }
  
  <span class="hljs-title function_">put</span>(<span class="hljs-params">url, data, options = {}</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">request</span>(url, { ...options, <span class="hljs-attr">method</span>: <span class="hljs-string">'PUT'</span>, <span class="hljs-attr">body</span>: data });
  }
  
  <span class="hljs-title function_">patch</span>(<span class="hljs-params">url, data, options = {}</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">request</span>(url, { ...options, <span class="hljs-attr">method</span>: <span class="hljs-string">'PATCH'</span>, <span class="hljs-attr">body</span>: data });
  }
  
  <span class="hljs-title function_">delete</span>(<span class="hljs-params">url, options = {}</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">request</span>(url, { ...options, <span class="hljs-attr">method</span>: <span class="hljs-string">'DELETE'</span> });
  }
  
  <span class="hljs-title function_">head</span>(<span class="hljs-params">url, options = {}</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">request</span>(url, { ...options, <span class="hljs-attr">method</span>: <span class="hljs-string">'HEAD'</span> });
  }
  
  <span class="hljs-title function_">options</span>(<span class="hljs-params">url, options = {}</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">request</span>(url, { ...options, <span class="hljs-attr">method</span>: <span class="hljs-string">'OPTIONS'</span> });
  }
  
  <span class="hljs-comment">// æ‹¦æˆªå™¨ç®¡ç†</span>
  interceptors = {
    <span class="hljs-attr">request</span>: {
      <span class="hljs-attr">handlers</span>: [],
      <span class="hljs-title function_">use</span>(<span class="hljs-params">handler</span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">handlers</span>.<span class="hljs-title function_">push</span>(handler);
        <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> {
          <span class="hljs-keyword">const</span> index = <span class="hljs-variable language_">this</span>.<span class="hljs-property">handlers</span>.<span class="hljs-title function_">indexOf</span>(handler);
          <span class="hljs-keyword">if</span> (index &gt; -<span class="hljs-number">1</span>) <span class="hljs-variable language_">this</span>.<span class="hljs-property">handlers</span>.<span class="hljs-title function_">splice</span>(index, <span class="hljs-number">1</span>);
        };
      },
      <span class="hljs-title function_">eject</span>(<span class="hljs-params">handler</span>) {
        <span class="hljs-keyword">const</span> index = <span class="hljs-variable language_">this</span>.<span class="hljs-property">handlers</span>.<span class="hljs-title function_">indexOf</span>(handler);
        <span class="hljs-keyword">if</span> (index &gt; -<span class="hljs-number">1</span>) <span class="hljs-variable language_">this</span>.<span class="hljs-property">handlers</span>.<span class="hljs-title function_">splice</span>(index, <span class="hljs-number">1</span>);
      }
    },
    <span class="hljs-attr">response</span>: {
      <span class="hljs-attr">handlers</span>: [],
      <span class="hljs-title function_">use</span>(<span class="hljs-params">onFulfilled, onRejected</span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">handlers</span>.<span class="hljs-title function_">push</span>({ onFulfilled, onRejected });
        <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> {
          <span class="hljs-keyword">const</span> index = <span class="hljs-variable language_">this</span>.<span class="hljs-property">handlers</span>.<span class="hljs-title function_">findIndex</span>(<span class="hljs-function"><span class="hljs-params">h</span> =&gt;</span> 
            h.<span class="hljs-property">onFulfilled</span> === onFulfilled &amp;&amp; h.<span class="hljs-property">onRejected</span> === onRejected
          );
          <span class="hljs-keyword">if</span> (index &gt; -<span class="hljs-number">1</span>) <span class="hljs-variable language_">this</span>.<span class="hljs-property">handlers</span>.<span class="hljs-title function_">splice</span>(index, <span class="hljs-number">1</span>);
        };
      },
      <span class="hljs-title function_">eject</span>(<span class="hljs-params">handler</span>) {
        <span class="hljs-keyword">const</span> index = <span class="hljs-variable language_">this</span>.<span class="hljs-property">handlers</span>.<span class="hljs-title function_">findIndex</span>(<span class="hljs-function"><span class="hljs-params">h</span> =&gt;</span> 
          h.<span class="hljs-property">onFulfilled</span> === handler.<span class="hljs-property">onFulfilled</span> &amp;&amp; 
          h.<span class="hljs-property">onRejected</span> === handler.<span class="hljs-property">onRejected</span>
        );
        <span class="hljs-keyword">if</span> (index &gt; -<span class="hljs-number">1</span>) <span class="hljs-variable language_">this</span>.<span class="hljs-property">handlers</span>.<span class="hljs-title function_">splice</span>(index, <span class="hljs-number">1</span>);
      }
    },
    <span class="hljs-attr">error</span>: {
      <span class="hljs-attr">handlers</span>: [],
      <span class="hljs-title function_">use</span>(<span class="hljs-params">handler</span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">handlers</span>.<span class="hljs-title function_">push</span>(handler);
        <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> {
          <span class="hljs-keyword">const</span> index = <span class="hljs-variable language_">this</span>.<span class="hljs-property">handlers</span>.<span class="hljs-title function_">indexOf</span>(handler);
          <span class="hljs-keyword">if</span> (index &gt; -<span class="hljs-number">1</span>) <span class="hljs-variable language_">this</span>.<span class="hljs-property">handlers</span>.<span class="hljs-title function_">splice</span>(index, <span class="hljs-number">1</span>);
        };
      },
      <span class="hljs-title function_">eject</span>(<span class="hljs-params">handler</span>) {
        <span class="hljs-keyword">const</span> index = <span class="hljs-variable language_">this</span>.<span class="hljs-property">handlers</span>.<span class="hljs-title function_">indexOf</span>(handler);
        <span class="hljs-keyword">if</span> (index &gt; -<span class="hljs-number">1</span>) <span class="hljs-variable language_">this</span>.<span class="hljs-property">handlers</span>.<span class="hljs-title function_">splice</span>(index, <span class="hljs-number">1</span>);
      }
    }
  };
  
  <span class="hljs-comment">// ç¼“å­˜ç®¡ç†</span>
  <span class="hljs-title function_">getFromCache</span>(<span class="hljs-params">url, cacheOption</span>) {
    <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">cache</span>.<span class="hljs-title function_">has</span>(url)) <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    
    <span class="hljs-keyword">const</span> cached = <span class="hljs-variable language_">this</span>.<span class="hljs-property">cache</span>.<span class="hljs-title function_">get</span>(url);
    <span class="hljs-keyword">const</span> now = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();
    
    <span class="hljs-comment">// æ£€æŸ¥æ˜¯å¦è¿‡æœŸ</span>
    <span class="hljs-keyword">if</span> (cacheOption === <span class="hljs-string">'no-cache'</span> || 
        (cached.<span class="hljs-property">expiry</span> &amp;&amp; cached.<span class="hljs-property">expiry</span> &lt; now)) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">cache</span>.<span class="hljs-title function_">delete</span>(url);
      <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    }
    
    <span class="hljs-keyword">return</span> cached.<span class="hljs-property">data</span>;
  }
  
  <span class="hljs-title function_">setCache</span>(<span class="hljs-params">url, data, cacheOption</span>) {
    <span class="hljs-keyword">let</span> expiry = <span class="hljs-literal">null</span>;
    
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> cacheOption === <span class="hljs-string">'number'</span>) {
      expiry = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>() + cacheOption; <span class="hljs-comment">// æ¯«ç§’</span>
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (cacheOption === <span class="hljs-string">'short'</span>) {
      expiry = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>() + (<span class="hljs-number">5</span> * <span class="hljs-number">60</span> * <span class="hljs-number">1000</span>); <span class="hljs-comment">// 5åˆ†é’Ÿ</span>
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (cacheOption === <span class="hljs-string">'long'</span>) {
      expiry = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>() + (<span class="hljs-number">60</span> * <span class="hljs-number">60</span> * <span class="hljs-number">1000</span>); <span class="hljs-comment">// 1å°æ—¶</span>
    }
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">cache</span>.<span class="hljs-title function_">set</span>(url, { data, expiry });
    
    <span class="hljs-comment">// æ¸…ç†è¿‡æœŸç¼“å­˜</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">cleanupCache</span>();
  }
  
  <span class="hljs-title function_">cleanupCache</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> now = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> [url, cached] <span class="hljs-keyword">of</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">cache</span>.<span class="hljs-title function_">entries</span>()) {
      <span class="hljs-keyword">if</span> (cached.<span class="hljs-property">expiry</span> &amp;&amp; cached.<span class="hljs-property">expiry</span> &lt; now) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">cache</span>.<span class="hljs-title function_">delete</span>(url);
      }
    }
  }
  
  <span class="hljs-comment">// æ¸…é™¤ç¼“å­˜</span>
  <span class="hljs-title function_">clearCache</span>(<span class="hljs-params">url = <span class="hljs-literal">null</span></span>) {
    <span class="hljs-keyword">if</span> (url) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">cache</span>.<span class="hljs-title function_">delete</span>(url);
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">cache</span>.<span class="hljs-title function_">clear</span>();
    }
  }
  
  <span class="hljs-comment">// ä»cookieè·å–å€¼</span>
  <span class="hljs-title function_">getCookie</span>(<span class="hljs-params">name</span>) {
    <span class="hljs-keyword">const</span> match = <span class="hljs-variable language_">document</span>.<span class="hljs-property">cookie</span>.<span class="hljs-title function_">match</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">RegExp</span>(<span class="hljs-string">'(^| )'</span> + name + <span class="hljs-string">'=([^;]+)'</span>));
    <span class="hljs-keyword">return</span> match ? <span class="hljs-built_in">decodeURIComponent</span>(match[<span class="hljs-number">2</span>]) : <span class="hljs-literal">null</span>;
  }
  
  <span class="hljs-comment">// å¤„ç†æœªæˆæƒ</span>
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">handleUnauthorized</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// å°è¯•åˆ·æ–°token</span>
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">const</span> refreshToken = <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(<span class="hljs-string">'refresh_token'</span>);
      <span class="hljs-keyword">if</span> (refreshToken) {
        <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">post</span>(<span class="hljs-string">'/auth/refresh'</span>, {
          <span class="hljs-attr">refresh_token</span>: refreshToken
        });
        
        <span class="hljs-keyword">if</span> (response.<span class="hljs-property">data</span>.<span class="hljs-property">access_token</span>) {
          <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">setItem</span>(<span class="hljs-string">'auth_token'</span>, response.<span class="hljs-property">data</span>.<span class="hljs-property">access_token</span>);
          <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
        }
      }
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-comment">// åˆ·æ–°å¤±è´¥ï¼Œæ¸…é™¤æœ¬åœ°è®¤è¯ä¿¡æ¯</span>
      <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">removeItem</span>(<span class="hljs-string">'auth_token'</span>);
      <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">removeItem</span>(<span class="hljs-string">'refresh_token'</span>);
      
      <span class="hljs-comment">// è·³è½¬åˆ°ç™»å½•é¡µ</span>
      <span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span>.<span class="hljs-property">href</span> = <span class="hljs-string">'/login'</span>;
    }
    
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
  }
  
  <span class="hljs-comment">// æ‰¹é‡è¯·æ±‚</span>
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">all</span>(<span class="hljs-params">requests</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">all</span>(requests);
  }
  
  <span class="hljs-comment">// è¯·æ±‚å¹¶å‘æ§åˆ¶</span>
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">spread</span>(<span class="hljs-params">requests, maxConcurrent = <span class="hljs-variable language_">this</span>.maxConcurrent</span>) {
    <span class="hljs-keyword">const</span> results = [];
    <span class="hljs-keyword">let</span> index = <span class="hljs-number">0</span>;
    
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">runNext</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
      <span class="hljs-keyword">if</span> (index &gt;= requests.<span class="hljs-property">length</span>) <span class="hljs-keyword">return</span>;
      
      <span class="hljs-keyword">const</span> currentIndex = index++;
      <span class="hljs-keyword">const</span> request = requests[currentIndex];
      
      <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> <span class="hljs-title function_">request</span>();
        results[currentIndex] = { <span class="hljs-attr">status</span>: <span class="hljs-string">'fulfilled'</span>, <span class="hljs-attr">value</span>: result };
      } <span class="hljs-keyword">catch</span> (error) {
        results[currentIndex] = { <span class="hljs-attr">status</span>: <span class="hljs-string">'rejected'</span>, <span class="hljs-attr">reason</span>: error };
      }
      
      <span class="hljs-comment">// é€’å½’æ‰§è¡Œä¸‹ä¸€ä¸ª</span>
      <span class="hljs-keyword">await</span> <span class="hljs-title function_">runNext</span>();
    };
    
    <span class="hljs-comment">// åˆ›å»ºå¹¶å‘æ‰§è¡Œå™¨</span>
    <span class="hljs-keyword">const</span> concurrentPromises = [];
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(maxConcurrent, requests.<span class="hljs-property">length</span>); i++) {
      concurrentPromises.<span class="hljs-title function_">push</span>(<span class="hljs-title function_">runNext</span>());
    }
    
    <span class="hljs-keyword">await</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">all</span>(concurrentPromises);
    <span class="hljs-keyword">return</span> results;
  }
}
</code></pre>
<h5 data-id="heading-6">2.2 è¯·æ±‚æ‹¦æˆªå™¨çš„é«˜çº§å®ç°</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">AdvancedInterceptor</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">httpClient</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">httpClient</span> = httpClient;
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setupAdvancedInterceptors</span>();
  }
  
  <span class="hljs-title function_">setupAdvancedInterceptors</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// 1. è¯·æ±‚èŠ‚æµ/é˜²æŠ–æ‹¦æˆªå™¨</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">addThrottleInterceptor</span>();
    
    <span class="hljs-comment">// 2. è¯·æ±‚åˆå¹¶æ‹¦æˆªå™¨</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">addBatchInterceptor</span>();
    
    <span class="hljs-comment">// 3. è¯·æ±‚é‡è¯•æ‹¦æˆªå™¨</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">addRetryInterceptor</span>();
    
    <span class="hljs-comment">// 4. è¯·æ±‚ç¼“å­˜æ‹¦æˆªå™¨</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">addCacheInterceptor</span>();
    
    <span class="hljs-comment">// 5. è¯·æ±‚æ—¥å¿—æ‹¦æˆªå™¨</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">addLoggingInterceptor</span>();
    
    <span class="hljs-comment">// 6. æ€§èƒ½ç›‘æ§æ‹¦æˆªå™¨</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">addPerformanceInterceptor</span>();
  }
  
  <span class="hljs-title function_">addThrottleInterceptor</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> requestTimestamps = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>();
    <span class="hljs-keyword">const</span> requestQueue = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>();
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">httpClient</span>.<span class="hljs-property">interceptors</span>.<span class="hljs-property">request</span>.<span class="hljs-title function_">use</span>(
      <span class="hljs-keyword">async</span> (config) =&gt; {
        <span class="hljs-keyword">const</span> { throttle = <span class="hljs-literal">false</span>, debounce = <span class="hljs-literal">false</span>, delay = <span class="hljs-number">1000</span> } = config;
        
        <span class="hljs-keyword">if</span> (!throttle &amp;&amp; !debounce) <span class="hljs-keyword">return</span> config;
        
        <span class="hljs-keyword">const</span> requestKey = <span class="hljs-string">`<span class="hljs-subst">${config.method}</span>_<span class="hljs-subst">${config.url}</span>`</span>;
        
        <span class="hljs-comment">// èŠ‚æµå¤„ç†</span>
        <span class="hljs-keyword">if</span> (throttle) {
          <span class="hljs-keyword">const</span> lastRequestTime = requestTimestamps.<span class="hljs-title function_">get</span>(requestKey) || <span class="hljs-number">0</span>;
          <span class="hljs-keyword">const</span> now = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();
          
          <span class="hljs-keyword">if</span> (now - lastRequestTime &lt; delay) {
            <span class="hljs-comment">// ä»åœ¨èŠ‚æµæœŸå†…ï¼Œå»¶è¿Ÿè¯·æ±‚</span>
            <span class="hljs-keyword">await</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function"><span class="hljs-params">resolve</span> =&gt;</span> {
              <span class="hljs-built_in">setTimeout</span>(resolve, delay - (now - lastRequestTime));
            });
          }
          
          requestTimestamps.<span class="hljs-title function_">set</span>(requestKey, <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>());
        }
        
        <span class="hljs-comment">// é˜²æŠ–å¤„ç†</span>
        <span class="hljs-keyword">if</span> (debounce) {
          <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =&gt;</span> {
            <span class="hljs-comment">// æ¸…é™¤ä¹‹å‰çš„å®šæ—¶å™¨</span>
            <span class="hljs-keyword">if</span> (requestQueue.<span class="hljs-title function_">has</span>(requestKey)) {
              <span class="hljs-built_in">clearTimeout</span>(requestQueue.<span class="hljs-title function_">get</span>(requestKey));
            }
            
            <span class="hljs-comment">// è®¾ç½®æ–°çš„å®šæ—¶å™¨</span>
            <span class="hljs-keyword">const</span> timerId = <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
              requestQueue.<span class="hljs-title function_">delete</span>(requestKey);
              <span class="hljs-title function_">resolve</span>(config);
            }, delay);
            
            requestQueue.<span class="hljs-title function_">set</span>(requestKey, timerId);
          });
        }
        
        <span class="hljs-keyword">return</span> config;
      }
    );
  }
  
  <span class="hljs-title function_">addBatchInterceptor</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> batchRequests = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>();
    <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">BATCH_DELAY</span> = <span class="hljs-number">100</span>; <span class="hljs-comment">// 100msæ‰¹å¤„ç†çª—å£</span>
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">httpClient</span>.<span class="hljs-property">interceptors</span>.<span class="hljs-property">request</span>.<span class="hljs-title function_">use</span>(
      <span class="hljs-function">(<span class="hljs-params">config</span>) =&gt;</span> {
        <span class="hljs-keyword">const</span> { batch = <span class="hljs-literal">false</span>, batchKey } = config;
        
        <span class="hljs-keyword">if</span> (!batch) <span class="hljs-keyword">return</span> config;
        
        <span class="hljs-keyword">const</span> key = batchKey || config.<span class="hljs-property">url</span>.<span class="hljs-title function_">split</span>(<span class="hljs-string">'?'</span>)[<span class="hljs-number">0</span>];
        
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =&gt;</span> {
          <span class="hljs-keyword">if</span> (!batchRequests.<span class="hljs-title function_">has</span>(key)) {
            batchRequests.<span class="hljs-title function_">set</span>(key, {
              <span class="hljs-attr">timer</span>: <span class="hljs-literal">null</span>,
              <span class="hljs-attr">requests</span>: []
            });
          }
          
          <span class="hljs-keyword">const</span> batchInfo = batchRequests.<span class="hljs-title function_">get</span>(key);
          batchInfo.<span class="hljs-property">requests</span>.<span class="hljs-title function_">push</span>({ config, resolve });
          
          <span class="hljs-comment">// æ¸…é™¤ä¹‹å‰çš„å®šæ—¶å™¨</span>
          <span class="hljs-keyword">if</span> (batchInfo.<span class="hljs-property">timer</span>) {
            <span class="hljs-built_in">clearTimeout</span>(batchInfo.<span class="hljs-property">timer</span>);
          }
          
          <span class="hljs-comment">// è®¾ç½®æ–°çš„å®šæ—¶å™¨</span>
          batchInfo.<span class="hljs-property">timer</span> = <span class="hljs-built_in">setTimeout</span>(<span class="hljs-keyword">async</span> () =&gt; {
            <span class="hljs-keyword">const</span> requests = batchInfo.<span class="hljs-property">requests</span>;
            batchRequests.<span class="hljs-title function_">delete</span>(key);
            
            <span class="hljs-comment">// åˆå¹¶è¯·æ±‚</span>
            <span class="hljs-keyword">const</span> mergedConfig = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">mergeBatchRequests</span>(requests);
            <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">httpClient</span>.<span class="hljs-title function_">request</span>(mergedConfig.<span class="hljs-property">url</span>, mergedConfig);
            
            <span class="hljs-comment">// åˆ†å‘å“åº”</span>
            <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">distributeBatchResponse</span>(requests, response);
          }, <span class="hljs-variable constant_">BATCH_DELAY</span>);
        });
      }
    );
  }
  
  <span class="hljs-title function_">mergeBatchRequests</span>(<span class="hljs-params">requests</span>) {
    <span class="hljs-comment">// ç®€å•ç¤ºä¾‹ï¼šåˆå¹¶GETè¯·æ±‚å‚æ•°</span>
    <span class="hljs-keyword">const</span> firstConfig = requests[<span class="hljs-number">0</span>].<span class="hljs-property">config</span>;
    <span class="hljs-keyword">const</span> url = <span class="hljs-keyword">new</span> <span class="hljs-title function_">URL</span>(firstConfig.<span class="hljs-property">url</span>, <span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span>.<span class="hljs-property">origin</span>);
    
    <span class="hljs-comment">// æ”¶é›†æ‰€æœ‰è¯·æ±‚çš„å‚æ•°</span>
    <span class="hljs-keyword">const</span> allParams = [];
    requests.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">{ config }</span>) =&gt;</span> {
      <span class="hljs-keyword">const</span> requestUrl = <span class="hljs-keyword">new</span> <span class="hljs-title function_">URL</span>(config.<span class="hljs-property">url</span>, <span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span>.<span class="hljs-property">origin</span>);
      <span class="hljs-keyword">const</span> params = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">fromEntries</span>(requestUrl.<span class="hljs-property">searchParams</span>.<span class="hljs-title function_">entries</span>());
      allParams.<span class="hljs-title function_">push</span>(params);
    });
    
    <span class="hljs-comment">// è®¾ç½®æ‰¹å¤„ç†å‚æ•°</span>
    url.<span class="hljs-property">searchParams</span>.<span class="hljs-title function_">set</span>(<span class="hljs-string">'batch'</span>, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(allParams));
    
    <span class="hljs-keyword">return</span> {
      ...firstConfig,
      <span class="hljs-attr">url</span>: url.<span class="hljs-title function_">toString</span>(),
      <span class="hljs-attr">batch</span>: <span class="hljs-literal">false</span> <span class="hljs-comment">// é˜²æ­¢é€’å½’</span>
    };
  }
  
  <span class="hljs-title function_">distributeBatchResponse</span>(<span class="hljs-params">requests, batchResponse</span>) {
    <span class="hljs-comment">// è¿™é‡Œéœ€è¦æ ¹æ®å®é™…APIçš„æ‰¹å¤„ç†å“åº”æ ¼å¼æ¥åˆ†å‘</span>
    <span class="hljs-comment">// å‡è®¾APIè¿”å›æ•°ç»„ï¼Œé¡ºåºå¯¹åº”è¯·æ±‚é¡ºåº</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-title class_">Array</span>.<span class="hljs-title function_">isArray</span>(batchResponse.<span class="hljs-property">data</span>)) {
      requests.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">{ resolve }, index</span>) =&gt;</span> {
        <span class="hljs-keyword">const</span> individualResponse = {
          ...batchResponse,
          <span class="hljs-attr">data</span>: batchResponse.<span class="hljs-property">data</span>[index]
        };
        <span class="hljs-title function_">resolve</span>(individualResponse);
      });
    }
  }
  
  <span class="hljs-title function_">addRetryInterceptor</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">httpClient</span>.<span class="hljs-property">interceptors</span>.<span class="hljs-property">response</span>.<span class="hljs-title function_">use</span>(
      <span class="hljs-function">(<span class="hljs-params">response</span>) =&gt;</span> response,
      <span class="hljs-keyword">async</span> (error) =&gt; {
        <span class="hljs-keyword">const</span> config = error.<span class="hljs-property">config</span> || {};
        <span class="hljs-keyword">const</span> { retry = <span class="hljs-variable language_">this</span>.<span class="hljs-property">httpClient</span>.<span class="hljs-property">retryConfig</span>, __retryCount = <span class="hljs-number">0</span> } = config;
        
        <span class="hljs-comment">// æ£€æŸ¥æ˜¯å¦åº”è¯¥é‡è¯•</span>
        <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">shouldRetry</span>(error, retry, __retryCount)) {
          <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(error);
        }
        
        <span class="hljs-comment">// å¢åŠ é‡è¯•è®¡æ•°</span>
        config.<span class="hljs-property">__retryCount</span> = __retryCount + <span class="hljs-number">1</span>;
        
        <span class="hljs-comment">// è®¡ç®—å»¶è¿Ÿæ—¶é—´ï¼ˆæŒ‡æ•°é€€é¿ï¼‰</span>
        <span class="hljs-keyword">const</span> delay = retry.<span class="hljs-property">retryDelay</span> * <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">pow</span>(<span class="hljs-number">2</span>, __retryCount);
        
        <span class="hljs-comment">// ç­‰å¾…å»¶è¿Ÿæ—¶é—´</span>
        <span class="hljs-keyword">await</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function"><span class="hljs-params">resolve</span> =&gt;</span> <span class="hljs-built_in">setTimeout</span>(resolve, delay));
        
        <span class="hljs-comment">// é‡è¯•è¯·æ±‚</span>
        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">httpClient</span>.<span class="hljs-title function_">request</span>(config.<span class="hljs-property">url</span>, config);
      }
    );
  }
  
  <span class="hljs-title function_">shouldRetry</span>(<span class="hljs-params">error, retryConfig, retryCount</span>) {
    <span class="hljs-comment">// æ£€æŸ¥æœ€å¤§é‡è¯•æ¬¡æ•°</span>
    <span class="hljs-keyword">if</span> (retryCount &gt;= retryConfig.<span class="hljs-property">maxRetries</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    
    <span class="hljs-comment">// æ£€æŸ¥é”™è¯¯ç±»å‹</span>
    <span class="hljs-keyword">if</span> (!error.<span class="hljs-property">response</span>) {
      <span class="hljs-comment">// ç½‘ç»œé”™è¯¯åº”è¯¥é‡è¯•</span>
      <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    }
    
    <span class="hljs-comment">// æ£€æŸ¥çŠ¶æ€ç </span>
    <span class="hljs-keyword">const</span> status = error.<span class="hljs-property">response</span>.<span class="hljs-property">status</span>;
    <span class="hljs-keyword">return</span> retryConfig.<span class="hljs-property">retryOn</span>.<span class="hljs-title function_">includes</span>(status);
  }
  
  <span class="hljs-title function_">addCacheInterceptor</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">httpClient</span>.<span class="hljs-property">interceptors</span>.<span class="hljs-property">request</span>.<span class="hljs-title function_">use</span>(
      <span class="hljs-function">(<span class="hljs-params">config</span>) =&gt;</span> {
        <span class="hljs-keyword">const</span> { cache = <span class="hljs-literal">false</span>, forceRefresh = <span class="hljs-literal">false</span> } = config;
        
        <span class="hljs-keyword">if</span> (!cache || forceRefresh) <span class="hljs-keyword">return</span> config;
        
        <span class="hljs-comment">// æ£€æŸ¥å†…å­˜ç¼“å­˜</span>
        <span class="hljs-keyword">const</span> cached = <span class="hljs-variable language_">this</span>.<span class="hljs-property">httpClient</span>.<span class="hljs-title function_">getFromCache</span>(config.<span class="hljs-property">url</span>, cache);
        <span class="hljs-keyword">if</span> (cached) {
          <span class="hljs-comment">// è¿”å›ç¼“å­˜çš„å“åº”ï¼Œä¸å†å‘é€è¯·æ±‚</span>
          <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>({
            config,
            <span class="hljs-attr">response</span>: cached,
            <span class="hljs-attr">isCacheHit</span>: <span class="hljs-literal">true</span>
          });
        }
        
        <span class="hljs-keyword">return</span> config;
      }
    );
    
    <span class="hljs-comment">// å¤„ç†ç¼“å­˜å‘½ä¸­</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">httpClient</span>.<span class="hljs-property">interceptors</span>.<span class="hljs-property">response</span>.<span class="hljs-title function_">use</span>(
      <span class="hljs-function">(<span class="hljs-params">response</span>) =&gt;</span> response,
      <span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> {
        <span class="hljs-keyword">if</span> (error.<span class="hljs-property">isCacheHit</span>) {
          <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>(error.<span class="hljs-property">response</span>);
        }
        <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(error);
      }
    );
  }
  
  <span class="hljs-title function_">addLoggingInterceptor</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// è¯·æ±‚æ—¥å¿—</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">httpClient</span>.<span class="hljs-property">interceptors</span>.<span class="hljs-property">request</span>.<span class="hljs-title function_">use</span>(
      <span class="hljs-function">(<span class="hljs-params">config</span>) =&gt;</span> {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">group</span>(<span class="hljs-string">`ğŸŒ Request: <span class="hljs-subst">${config.method}</span> <span class="hljs-subst">${config.url}</span>`</span>);
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Config:'</span>, config);
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">groupEnd</span>();
        
        <span class="hljs-comment">// æ·»åŠ è¯·æ±‚æ—¶é—´æˆ³</span>
        config.<span class="hljs-property">__startTime</span> = performance.<span class="hljs-title function_">now</span>();
        
        <span class="hljs-keyword">return</span> config;
      }
    );
    
    <span class="hljs-comment">// å“åº”æ—¥å¿—</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">httpClient</span>.<span class="hljs-property">interceptors</span>.<span class="hljs-property">response</span>.<span class="hljs-title function_">use</span>(
      <span class="hljs-function">(<span class="hljs-params">response</span>) =&gt;</span> {
        <span class="hljs-keyword">const</span> duration = performance.<span class="hljs-title function_">now</span>() - response.<span class="hljs-property">config</span>.<span class="hljs-property">__startTime</span>;
        
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">group</span>(<span class="hljs-string">`âœ… Response: <span class="hljs-subst">${response.status}</span> <span class="hljs-subst">${response.config.url}</span>`</span>);
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Response:'</span>, response);
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Duration: <span class="hljs-subst">${duration.toFixed(<span class="hljs-number">2</span>)}</span>ms`</span>);
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">groupEnd</span>();
        
        <span class="hljs-comment">// å‘é€æ€§èƒ½æ•°æ®åˆ°ç›‘æ§ç³»ç»Ÿ</span>
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">sendMetrics</span>({
          <span class="hljs-attr">url</span>: response.<span class="hljs-property">config</span>.<span class="hljs-property">url</span>,
          <span class="hljs-attr">method</span>: response.<span class="hljs-property">config</span>.<span class="hljs-property">method</span>,
          <span class="hljs-attr">status</span>: response.<span class="hljs-property">status</span>,
          duration,
          <span class="hljs-attr">timestamp</span>: <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>()
        });
        
        <span class="hljs-keyword">return</span> response;
      },
      <span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> {
        <span class="hljs-keyword">const</span> duration = error.<span class="hljs-property">config</span> ? 
          performance.<span class="hljs-title function_">now</span>() - error.<span class="hljs-property">config</span>.<span class="hljs-property">__startTime</span> : <span class="hljs-number">0</span>;
        
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">group</span>(<span class="hljs-string">`âŒ Error: <span class="hljs-subst">${error.config?.url}</span>`</span>);
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Error:'</span>, error);
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Duration: <span class="hljs-subst">${duration.toFixed(<span class="hljs-number">2</span>)}</span>ms`</span>);
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">groupEnd</span>();
        
        <span class="hljs-comment">// å‘é€é”™è¯¯æ•°æ®åˆ°ç›‘æ§ç³»ç»Ÿ</span>
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">sendErrorMetrics</span>({
          <span class="hljs-attr">url</span>: error.<span class="hljs-property">config</span>?.<span class="hljs-property">url</span>,
          <span class="hljs-attr">method</span>: error.<span class="hljs-property">config</span>?.<span class="hljs-property">method</span>,
          <span class="hljs-attr">status</span>: error.<span class="hljs-property">response</span>?.<span class="hljs-property">status</span>,
          duration,
          <span class="hljs-attr">error</span>: error.<span class="hljs-property">message</span>,
          <span class="hljs-attr">timestamp</span>: <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>()
        });
        
        <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(error);
      }
    );
  }
  
  <span class="hljs-title function_">addPerformanceInterceptor</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> performanceData = [];
    <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">MAX_PERFORMANCE_ENTRIES</span> = <span class="hljs-number">100</span>;
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">httpClient</span>.<span class="hljs-property">interceptors</span>.<span class="hljs-property">request</span>.<span class="hljs-title function_">use</span>(
      <span class="hljs-function">(<span class="hljs-params">config</span>) =&gt;</span> {
        <span class="hljs-comment">// ä½¿ç”¨Performance APIæ ‡è®°è¯·æ±‚å¼€å§‹</span>
        <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">window</span>.<span class="hljs-property">performance</span> &amp;&amp; <span class="hljs-variable language_">window</span>.<span class="hljs-property">performance</span>.<span class="hljs-property">mark</span>) {
          <span class="hljs-keyword">const</span> markName = <span class="hljs-string">`request_start_<span class="hljs-subst">${config.url.replace(/[^a-z0-<span class="hljs-number">9</span>]/gi, <span class="hljs-string">'_'</span>)}</span>`</span>;
          <span class="hljs-variable language_">window</span>.<span class="hljs-property">performance</span>.<span class="hljs-title function_">mark</span>(markName);
          config.<span class="hljs-property">__performanceMark</span> = markName;
        }
        
        <span class="hljs-keyword">return</span> config;
      }
    );
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">httpClient</span>.<span class="hljs-property">interceptors</span>.<span class="hljs-property">response</span>.<span class="hljs-title function_">use</span>(
      <span class="hljs-function">(<span class="hljs-params">response</span>) =&gt;</span> {
        <span class="hljs-comment">// æµ‹é‡è¯·æ±‚æ€§èƒ½</span>
        <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">window</span>.<span class="hljs-property">performance</span> &amp;&amp; response.<span class="hljs-property">config</span>.<span class="hljs-property">__performanceMark</span>) {
          <span class="hljs-keyword">const</span> markName = response.<span class="hljs-property">config</span>.<span class="hljs-property">__performanceMark</span>;
          <span class="hljs-keyword">const</span> measureName = <span class="hljs-string">`request_<span class="hljs-subst">${response.config.url.replace(/[^a-z0-<span class="hljs-number">9</span>]/gi, <span class="hljs-string">'_'</span>)}</span>`</span>;
          
          <span class="hljs-variable language_">window</span>.<span class="hljs-property">performance</span>.<span class="hljs-title function_">mark</span>(<span class="hljs-string">`<span class="hljs-subst">${markName}</span>_end`</span>);
          <span class="hljs-variable language_">window</span>.<span class="hljs-property">performance</span>.<span class="hljs-title function_">measure</span>(
            measureName,
            markName,
            <span class="hljs-string">`<span class="hljs-subst">${markName}</span>_end`</span>
          );
          
          <span class="hljs-comment">// è·å–æµ‹é‡ç»“æœ</span>
          <span class="hljs-keyword">const</span> measures = <span class="hljs-variable language_">window</span>.<span class="hljs-property">performance</span>.<span class="hljs-title function_">getEntriesByName</span>(measureName);
          <span class="hljs-keyword">if</span> (measures.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span>) {
            <span class="hljs-keyword">const</span> measure = measures[<span class="hljs-number">0</span>];
            
            performanceData.<span class="hljs-title function_">push</span>({
              <span class="hljs-attr">url</span>: response.<span class="hljs-property">config</span>.<span class="hljs-property">url</span>,
              <span class="hljs-attr">duration</span>: measure.<span class="hljs-property">duration</span>,
              <span class="hljs-attr">startTime</span>: measure.<span class="hljs-property">startTime</span>,
              <span class="hljs-attr">timestamp</span>: <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>()
            });
            
            <span class="hljs-comment">// é™åˆ¶æ•°æ®å¤§å°</span>
            <span class="hljs-keyword">if</span> (performanceData.<span class="hljs-property">length</span> &gt; <span class="hljs-variable constant_">MAX_PERFORMANCE_ENTRIES</span>) {
              performanceData.<span class="hljs-title function_">shift</span>();
            }
          }
        }
        
        <span class="hljs-keyword">return</span> response;
      }
    );
  }
  
  <span class="hljs-title function_">sendMetrics</span>(<span class="hljs-params">metric</span>) {
    <span class="hljs-comment">// å‘é€åˆ°ç›‘æ§ç³»ç»Ÿï¼ˆä¾‹å¦‚ï¼šGoogle Analyticsï¼Œè‡ªå»ºç›‘æ§ç­‰ï¼‰</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">window</span>.<span class="hljs-property">gtag</span>) {
      <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">gtag</span>(<span class="hljs-string">'event'</span>, <span class="hljs-string">'request_completed'</span>, metric);
    }
    
    <span class="hljs-comment">// æˆ–è€…å‘é€åˆ°åç«¯</span>
    <span class="hljs-keyword">if</span> (navigator.<span class="hljs-property">sendBeacon</span>) {
      <span class="hljs-keyword">const</span> data = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Blob</span>([<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(metric)], { <span class="hljs-attr">type</span>: <span class="hljs-string">'application/json'</span> });
      navigator.<span class="hljs-title function_">sendBeacon</span>(<span class="hljs-string">'/api/metrics'</span>, data);
    }
  }
  
  <span class="hljs-title function_">sendErrorMetrics</span>(<span class="hljs-params">errorMetric</span>) {
    <span class="hljs-comment">// å‘é€é”™è¯¯ç›‘æ§</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">window</span>.<span class="hljs-property">Rollbar</span>) {
      <span class="hljs-variable language_">window</span>.<span class="hljs-property">Rollbar</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'HTTP Request Error'</span>, errorMetric);
    }
    
    <span class="hljs-comment">// å‘é€åˆ°åç«¯</span>
    <span class="hljs-keyword">if</span> (navigator.<span class="hljs-property">sendBeacon</span>) {
      <span class="hljs-keyword">const</span> data = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Blob</span>([<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(errorMetric)], { <span class="hljs-attr">type</span>: <span class="hljs-string">'application/json'</span> });
      navigator.<span class="hljs-title function_">sendBeacon</span>(<span class="hljs-string">'/api/errors'</span>, data);
    }
  }
  
  <span class="hljs-comment">// è·å–æ€§èƒ½æŠ¥å‘Š</span>
  <span class="hljs-title function_">getPerformanceReport</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> totalRequests = performanceData.<span class="hljs-property">length</span>;
    
    <span class="hljs-keyword">if</span> (totalRequests === <span class="hljs-number">0</span>) {
      <span class="hljs-keyword">return</span> { <span class="hljs-attr">averageDuration</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">totalRequests</span>: <span class="hljs-number">0</span> };
    }
    
    <span class="hljs-keyword">const</span> totalDuration = performanceData.<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">sum, entry</span>) =&gt;</span> sum + entry.<span class="hljs-property">duration</span>, <span class="hljs-number">0</span>);
    <span class="hljs-keyword">const</span> averageDuration = totalDuration / totalRequests;
    
    <span class="hljs-comment">// æŒ‰URLåˆ†ç»„</span>
    <span class="hljs-keyword">const</span> urlStats = {};
    performanceData.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">entry</span> =&gt;</span> {
      <span class="hljs-keyword">if</span> (!urlStats[entry.<span class="hljs-property">url</span>]) {
        urlStats[entry.<span class="hljs-property">url</span>] = {
          <span class="hljs-attr">count</span>: <span class="hljs-number">0</span>,
          <span class="hljs-attr">totalDuration</span>: <span class="hljs-number">0</span>,
          <span class="hljs-attr">durations</span>: []
        };
      }
      
      urlStats[entry.<span class="hljs-property">url</span>].<span class="hljs-property">count</span>++;
      urlStats[entry.<span class="hljs-property">url</span>].<span class="hljs-property">totalDuration</span> += entry.<span class="hljs-property">duration</span>;
      urlStats[entry.<span class="hljs-property">url</span>].<span class="hljs-property">durations</span>.<span class="hljs-title function_">push</span>(entry.<span class="hljs-property">duration</span>);
    });
    
    <span class="hljs-comment">// è®¡ç®—æ¯ä¸ªURLçš„å¹³å‡å€¼</span>
    <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(urlStats).<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">url</span> =&gt;</span> {
      <span class="hljs-keyword">const</span> stats = urlStats[url];
      stats.<span class="hljs-property">averageDuration</span> = stats.<span class="hljs-property">totalDuration</span> / stats.<span class="hljs-property">count</span>;
      
      <span class="hljs-comment">// è®¡ç®—p95</span>
      stats.<span class="hljs-property">durations</span>.<span class="hljs-title function_">sort</span>(<span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> a - b);
      <span class="hljs-keyword">const</span> p95Index = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(stats.<span class="hljs-property">durations</span>.<span class="hljs-property">length</span> * <span class="hljs-number">0.95</span>);
      stats.<span class="hljs-property">p95</span> = stats.<span class="hljs-property">durations</span>[p95Index];
    });
    
    <span class="hljs-keyword">return</span> {
      totalRequests,
      averageDuration,
      urlStats,
      <span class="hljs-attr">recentRequests</span>: performanceData.<span class="hljs-title function_">slice</span>(-<span class="hljs-number">10</span>)
    };
  }
}
</code></pre>
<h4 data-id="heading-7">ä¸‰ã€è¯·æ±‚å–æ¶ˆä¸å¹¶å‘æ§åˆ¶</h4>
<h5 data-id="heading-8">3.1 é«˜çº§è¯·æ±‚å–æ¶ˆæœºåˆ¶</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">RequestCancellation</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">cancelTokens</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">cancelSources</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">requestGroups</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>();
  }
  
  <span class="hljs-comment">// åˆ›å»ºå–æ¶ˆä»¤ç‰Œ</span>
  <span class="hljs-title function_">createCancelToken</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> source = {
      <span class="hljs-attr">token</span>: <span class="hljs-literal">null</span>,
      <span class="hljs-attr">cancel</span>: <span class="hljs-literal">null</span>
    };
    
    <span class="hljs-keyword">const</span> token = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
      source.<span class="hljs-property">cancel</span> = <span class="hljs-function">(<span class="hljs-params">reason</span>) =&gt;</span> {
        <span class="hljs-title function_">reject</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">RequestCancellationError</span>(reason || <span class="hljs-string">'Request cancelled'</span>));
      };
    });
    
    source.<span class="hljs-property">token</span> = token;
    <span class="hljs-keyword">const</span> tokenId = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">generateTokenId</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">cancelSources</span>.<span class="hljs-title function_">set</span>(tokenId, source);
    
    <span class="hljs-keyword">return</span> {
      token,
      <span class="hljs-attr">cancel</span>: source.<span class="hljs-property">cancel</span>,
      tokenId
    };
  }
  
  <span class="hljs-comment">// ä¸ºè¯·æ±‚æ·»åŠ å–æ¶ˆæ”¯æŒ</span>
  <span class="hljs-title function_">withCancellation</span>(<span class="hljs-params">requestPromise, cancelToken, requestId</span>) {
    <span class="hljs-keyword">if</span> (!cancelToken) <span class="hljs-keyword">return</span> requestPromise;
    
    <span class="hljs-keyword">const</span> abortController = <span class="hljs-keyword">new</span> <span class="hljs-title class_">AbortController</span>();
    <span class="hljs-keyword">const</span> signal = abortController.<span class="hljs-property">signal</span>;
    
    <span class="hljs-comment">// åŒ…è£…è¯·æ±‚ä»¥æ”¯æŒå–æ¶ˆ</span>
    <span class="hljs-keyword">const</span> wrappedPromise = <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">race</span>([
      requestPromise,
      cancelToken.<span class="hljs-title function_">then</span>(
        <span class="hljs-function">() =&gt;</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">RequestCancellationError</span>(<span class="hljs-string">'Request cancelled by token'</span>))),
      <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">_, reject</span>) =&gt;</span> {
        signal.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'abort'</span>, <span class="hljs-function">() =&gt;</span> {
          <span class="hljs-title function_">reject</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">RequestCancellationError</span>(<span class="hljs-string">'Request aborted'</span>));
        });
      })
    ]);
    
    <span class="hljs-comment">// å­˜å‚¨å–æ¶ˆæ§åˆ¶å™¨</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">cancelTokens</span>.<span class="hljs-title function_">set</span>(requestId, abortController);
    
    <span class="hljs-comment">// æ¸…ç†å‡½æ•°</span>
    wrappedPromise.<span class="hljs-title function_">finally</span>(<span class="hljs-function">() =&gt;</span> {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">cancelTokens</span>.<span class="hljs-title function_">delete</span>(requestId);
    });
    
    <span class="hljs-keyword">return</span> wrappedPromise;
  }
  
  <span class="hljs-comment">// å–æ¶ˆç‰¹å®šè¯·æ±‚</span>
  <span class="hljs-title function_">cancelRequest</span>(<span class="hljs-params">requestId, reason</span>) {
    <span class="hljs-keyword">const</span> controller = <span class="hljs-variable language_">this</span>.<span class="hljs-property">cancelTokens</span>.<span class="hljs-title function_">get</span>(requestId);
    <span class="hljs-keyword">if</span> (controller) {
      controller.<span class="hljs-title function_">abort</span>(reason);
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">cancelTokens</span>.<span class="hljs-title function_">delete</span>(requestId);
      <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    }
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
  }
  
  <span class="hljs-comment">// å–æ¶ˆä¸€ç»„è¯·æ±‚</span>
  <span class="hljs-title function_">cancelGroup</span>(<span class="hljs-params">groupId, reason</span>) {
    <span class="hljs-keyword">const</span> group = <span class="hljs-variable language_">this</span>.<span class="hljs-property">requestGroups</span>.<span class="hljs-title function_">get</span>(groupId);
    <span class="hljs-keyword">if</span> (!group) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    
    group.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">requestId</span> =&gt;</span> {
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">cancelRequest</span>(requestId, reason);
    });
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">requestGroups</span>.<span class="hljs-title function_">delete</span>(groupId);
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
  }
  
  <span class="hljs-comment">// å–æ¶ˆæ‰€æœ‰è¯·æ±‚</span>
  <span class="hljs-title function_">cancelAll</span>(<span class="hljs-params">reason</span>) {
    <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">from</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">cancelTokens</span>.<span class="hljs-title function_">keys</span>()).<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">requestId</span> =&gt;</span> {
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">cancelRequest</span>(requestId, reason);
    });
    
    <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">from</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">requestGroups</span>.<span class="hljs-title function_">keys</span>()).<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">groupId</span> =&gt;</span> {
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">cancelGroup</span>(groupId, reason);
    });
    
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
  }
  
  <span class="hljs-comment">// å°†è¯·æ±‚æ·»åŠ åˆ°ç»„</span>
  <span class="hljs-title function_">addToGroup</span>(<span class="hljs-params">requestId, groupId</span>) {
    <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">requestGroups</span>.<span class="hljs-title function_">has</span>(groupId)) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">requestGroups</span>.<span class="hljs-title function_">set</span>(groupId, <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>());
    }
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">requestGroups</span>.<span class="hljs-title function_">get</span>(groupId).<span class="hljs-title function_">add</span>(requestId);
    
    <span class="hljs-comment">// è¿”å›ç§»é™¤å‡½æ•°</span>
    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-keyword">const</span> group = <span class="hljs-variable language_">this</span>.<span class="hljs-property">requestGroups</span>.<span class="hljs-title function_">get</span>(groupId);
      <span class="hljs-keyword">if</span> (group) {
        group.<span class="hljs-title function_">delete</span>(requestId);
        <span class="hljs-keyword">if</span> (group.<span class="hljs-property">size</span> === <span class="hljs-number">0</span>) {
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">requestGroups</span>.<span class="hljs-title function_">delete</span>(groupId);
        }
      }
    };
  }
  
  <span class="hljs-comment">// ç”Ÿæˆä»¤ç‰ŒID</span>
  <span class="hljs-title function_">generateTokenId</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="hljs-string">`token_<span class="hljs-subst">${<span class="hljs-built_in">Date</span>.now()}</span>_<span class="hljs-subst">${<span class="hljs-built_in">Math</span>.random().toString(<span class="hljs-number">36</span>).substr(<span class="hljs-number">2</span>, <span class="hljs-number">9</span>)}</span>`</span>;
  }
  
  <span class="hljs-comment">// åˆ›å»ºç«é€Ÿè¯·æ±‚ï¼ˆç¬¬ä¸€ä¸ªæˆåŠŸæˆ–å…¨éƒ¨å¤±è´¥ï¼‰</span>
  <span class="hljs-title function_">createRace</span>(<span class="hljs-params">requests, options = {}</span>) {
    <span class="hljs-keyword">const</span> {
      cancelPrevious = <span class="hljs-literal">true</span>,
      groupId = <span class="hljs-string">`race_<span class="hljs-subst">${<span class="hljs-built_in">Date</span>.now()}</span>`</span>
    } = options;
    
    <span class="hljs-comment">// å¦‚æœå–æ¶ˆä¹‹å‰çš„è¯·æ±‚</span>
    <span class="hljs-keyword">if</span> (cancelPrevious) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">cancelGroup</span>(groupId, <span class="hljs-string">'Superseded by new request'</span>);
    }
    
    <span class="hljs-keyword">const</span> racePromise = <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">race</span>(requests);
    
    <span class="hljs-comment">// ä¸ºæ¯ä¸ªè¯·æ±‚æ·»åŠ åˆ°ç»„</span>
    requests.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">request, index</span>) =&gt;</span> {
      <span class="hljs-keyword">const</span> requestId = <span class="hljs-string">`<span class="hljs-subst">${groupId}</span>_<span class="hljs-subst">${index}</span>`</span>;
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">addToGroup</span>(requestId, groupId);
      
      <span class="hljs-comment">// è¯·æ±‚å®Œæˆåä»ç»„ä¸­ç§»é™¤</span>
      request.<span class="hljs-title function_">then</span>(
        <span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">removeFromGroup</span>(requestId, groupId),
        <span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">removeFromGroup</span>(requestId, groupId)
      );
    });
    
    <span class="hljs-keyword">return</span> racePromise;
  }
  
  <span class="hljs-comment">// ä»ç»„ä¸­ç§»é™¤è¯·æ±‚</span>
  <span class="hljs-title function_">removeFromGroup</span>(<span class="hljs-params">requestId, groupId</span>) {
    <span class="hljs-keyword">const</span> group = <span class="hljs-variable language_">this</span>.<span class="hljs-property">requestGroups</span>.<span class="hljs-title function_">get</span>(groupId);
    <span class="hljs-keyword">if</span> (group) {
      group.<span class="hljs-title function_">delete</span>(requestId);
      <span class="hljs-keyword">if</span> (group.<span class="hljs-property">size</span> === <span class="hljs-number">0</span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">requestGroups</span>.<span class="hljs-title function_">delete</span>(groupId);
      }
    }
  }
  
  <span class="hljs-comment">// åˆ›å»ºè¯·æ±‚æ± </span>
  <span class="hljs-title function_">createRequestPool</span>(<span class="hljs-params">maxConcurrent = <span class="hljs-number">5</span></span>) {
    <span class="hljs-keyword">const</span> queue = [];
    <span class="hljs-keyword">let</span> activeCount = <span class="hljs-number">0</span>;
    
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">runNext</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
      <span class="hljs-keyword">if</span> (activeCount &gt;= maxConcurrent || queue.<span class="hljs-property">length</span> === <span class="hljs-number">0</span>) {
        <span class="hljs-keyword">return</span>;
      }
      
      activeCount++;
      <span class="hljs-keyword">const</span> { request, resolve, reject } = queue.<span class="hljs-title function_">shift</span>();
      
      <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> <span class="hljs-title function_">request</span>();
        <span class="hljs-title function_">resolve</span>(result);
      } <span class="hljs-keyword">catch</span> (error) {
        <span class="hljs-title function_">reject</span>(error);
      } <span class="hljs-keyword">finally</span> {
        activeCount--;
        <span class="hljs-title function_">runNext</span>();
      }
    };
    
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">enqueue</span> = (<span class="hljs-params">request</span>) =&gt; {
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
        queue.<span class="hljs-title function_">push</span>({ request, resolve, reject });
        <span class="hljs-title function_">runNext</span>();
      });
    };
    
    <span class="hljs-keyword">return</span> {
      enqueue,
      <span class="hljs-attr">getQueueSize</span>: <span class="hljs-function">() =&gt;</span> queue.<span class="hljs-property">length</span>,
      <span class="hljs-attr">getActiveCount</span>: <span class="hljs-function">() =&gt;</span> activeCount
    };
  }
  
  <span class="hljs-comment">// æ‰¹é‡è¯·æ±‚çš„å¹¶å‘æ§åˆ¶</span>
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">batchWithConcurrency</span>(<span class="hljs-params">requests, concurrency = <span class="hljs-number">3</span></span>) {
    <span class="hljs-keyword">const</span> results = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Array</span>(requests.<span class="hljs-property">length</span>);
    <span class="hljs-keyword">let</span> currentIndex = <span class="hljs-number">0</span>;
    
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">executeNext</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
      <span class="hljs-keyword">if</span> (currentIndex &gt;= requests.<span class="hljs-property">length</span>) <span class="hljs-keyword">return</span>;
      
      <span class="hljs-keyword">const</span> index = currentIndex++;
      <span class="hljs-keyword">const</span> request = requests[index];
      
      <span class="hljs-keyword">try</span> {
        results[index] = <span class="hljs-keyword">await</span> <span class="hljs-title function_">request</span>();
      } <span class="hljs-keyword">catch</span> (error) {
        results[index] = error;
      }
      
      <span class="hljs-comment">// æ‰§è¡Œä¸‹ä¸€ä¸ª</span>
      <span class="hljs-keyword">await</span> <span class="hljs-title function_">executeNext</span>();
    };
    
    <span class="hljs-comment">// åˆ›å»ºå¹¶å‘çš„æ‰§è¡Œå™¨</span>
    <span class="hljs-keyword">const</span> concurrentPromises = [];
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(concurrency, requests.<span class="hljs-property">length</span>); i++) {
      concurrentPromises.<span class="hljs-title function_">push</span>(<span class="hljs-title function_">executeNext</span>());
    }
    
    <span class="hljs-keyword">await</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">all</span>(concurrentPromises);
    <span class="hljs-keyword">return</span> results;
  }
}

<span class="hljs-comment">// è‡ªå®šä¹‰å–æ¶ˆé”™è¯¯</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">RequestCancellationError</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Error</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">message = <span class="hljs-string">'Request cancelled'</span></span>) {
    <span class="hljs-variable language_">super</span>(message);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = <span class="hljs-string">'RequestCancellationError'</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">isCancelled</span> = <span class="hljs-literal">true</span>;
  }
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">CancellationExample</span> {
  <span class="hljs-keyword">static</span> <span class="hljs-keyword">async</span> <span class="hljs-title function_">demonstrate</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> cancellation = <span class="hljs-keyword">new</span> <span class="hljs-title class_">RequestCancellation</span>();
    
    <span class="hljs-comment">// åˆ›å»ºå–æ¶ˆä»¤ç‰Œ</span>
    <span class="hljs-keyword">const</span> { <span class="hljs-attr">token</span>: cancelToken, cancel } = cancellation.<span class="hljs-title function_">createCancelToken</span>();
    
    <span class="hljs-comment">// åˆ›å»ºè¯·æ±‚</span>
    <span class="hljs-keyword">const</span> request1 = <span class="hljs-title function_">fetch</span>(<span class="hljs-string">'https://api.example.com/data1'</span>);
    <span class="hljs-keyword">const</span> request2 = <span class="hljs-title function_">fetch</span>(<span class="hljs-string">'https://api.example.com/data2'</span>);
    
    <span class="hljs-comment">// åŒ…è£…è¯·æ±‚ä»¥æ”¯æŒå–æ¶ˆ</span>
    <span class="hljs-keyword">const</span> cancellableRequest1 = cancellation.<span class="hljs-title function_">withCancellation</span>(
      request1,
      cancelToken,
      <span class="hljs-string">'request_1'</span>
    );
    
    <span class="hljs-keyword">const</span> cancellableRequest2 = cancellation.<span class="hljs-title function_">withCancellation</span>(
      request2,
      cancelToken,
      <span class="hljs-string">'request_2'</span>
    );
    
    <span class="hljs-comment">// å°†è¯·æ±‚æ·»åŠ åˆ°ç»„</span>
    cancellation.<span class="hljs-title function_">addToGroup</span>(<span class="hljs-string">'request_1'</span>, <span class="hljs-string">'data_fetch_group'</span>);
    cancellation.<span class="hljs-title function_">addToGroup</span>(<span class="hljs-string">'request_2'</span>, <span class="hljs-string">'data_fetch_group'</span>);
    
    <span class="hljs-comment">// æ¨¡æ‹Ÿ3ç§’åå–æ¶ˆæ‰€æœ‰è¯·æ±‚</span>
    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
      cancellation.<span class="hljs-title function_">cancelGroup</span>(<span class="hljs-string">'data_fetch_group'</span>, <span class="hljs-string">'User cancelled'</span>);
    }, <span class="hljs-number">3000</span>);
    
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">const</span> results = <span class="hljs-keyword">await</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">all</span>([
        cancellableRequest1,
        cancellableRequest2
      ]);
      
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Requests completed:'</span>, results);
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-keyword">if</span> (error.<span class="hljs-property">isCancelled</span>) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Requests were cancelled:'</span>, error.<span class="hljs-property">message</span>);
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Request failed:'</span>, error);
      }
    }
    
    <span class="hljs-comment">// ä½¿ç”¨è¯·æ±‚æ± </span>
    <span class="hljs-keyword">const</span> pool = cancellation.<span class="hljs-title function_">createRequestPool</span>(<span class="hljs-number">2</span>);
    
    <span class="hljs-keyword">const</span> requests = [
      <span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">'https://api.example.com/item/1'</span>),
      <span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">'https://api.example.com/item/2'</span>),
      <span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">'https://api.example.com/item/3'</span>),
      <span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">'https://api.example.com/item/4'</span>),
      <span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">'https://api.example.com/item/5'</span>)
    ];
    
    <span class="hljs-keyword">const</span> poolResults = <span class="hljs-keyword">await</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">all</span>(
      requests.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">request</span> =&gt;</span> pool.<span class="hljs-title function_">enqueue</span>(request))
    );
    
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Pool results:'</span>, poolResults);
  }
}
</code></pre>
<h5 data-id="heading-9">3.2 æ™ºèƒ½è¯·æ±‚è°ƒåº¦å™¨</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">IntelligentRequestScheduler</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">options = {}</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span> = {
      <span class="hljs-attr">maxConcurrent</span>: <span class="hljs-number">6</span>,
      <span class="hljs-attr">priorityLevels</span>: [<span class="hljs-string">'high'</span>, <span class="hljs-string">'normal'</span>, <span class="hljs-string">'low'</span>],
      <span class="hljs-attr">retryEnabled</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">cacheEnabled</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">offlineQueueEnabled</span>: <span class="hljs-literal">true</span>,
      ...options
    };
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">queues</span> = {
      <span class="hljs-attr">high</span>: [],
      <span class="hljs-attr">normal</span>: [],
      <span class="hljs-attr">low</span>: []
    };
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">activeRequests</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">requestCache</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">offlineQueue</span> = [];
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">isOnline</span> = navigator.<span class="hljs-property">onLine</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">retryStrategies</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">requestStats</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>();
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">init</span>();
  }
  
  <span class="hljs-title function_">init</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// ç›‘å¬ç½‘ç»œçŠ¶æ€</span>
    <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'online'</span>, <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">isOnline</span> = <span class="hljs-literal">true</span>;
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">processOfflineQueue</span>();
    });
    
    <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'offline'</span>, <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">isOnline</span> = <span class="hljs-literal">false</span>;
    });
    
    <span class="hljs-comment">// å¯åŠ¨è°ƒåº¦å™¨</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">startScheduler</span>();
    
    <span class="hljs-comment">// åˆå§‹åŒ–é‡è¯•ç­–ç•¥</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">initRetryStrategies</span>();
  }
  
  <span class="hljs-title function_">startScheduler</span>(<span class="hljs-params"/>) {
    <span class="hljs-built_in">setInterval</span>(<span class="hljs-function">() =&gt;</span> {
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">processQueues</span>();
    }, <span class="hljs-number">100</span>); <span class="hljs-comment">// æ¯100mså¤„ç†ä¸€æ¬¡é˜Ÿåˆ—</span>
  }
  
  <span class="hljs-title function_">initRetryStrategies</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// é»˜è®¤é‡è¯•ç­–ç•¥</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">retryStrategies</span>.<span class="hljs-title function_">set</span>(<span class="hljs-string">'default'</span>, {
      <span class="hljs-attr">maxRetries</span>: <span class="hljs-number">3</span>,
      <span class="hljs-attr">baseDelay</span>: <span class="hljs-number">1000</span>,
      <span class="hljs-attr">maxDelay</span>: <span class="hljs-number">10000</span>,
      <span class="hljs-attr">backoffMultiplier</span>: <span class="hljs-number">2</span>,
      <span class="hljs-attr">retryableStatuses</span>: [<span class="hljs-number">408</span>, <span class="hljs-number">429</span>, <span class="hljs-number">500</span>, <span class="hljs-number">502</span>, <span class="hljs-number">503</span>, <span class="hljs-number">504</span>],
      <span class="hljs-attr">retryableErrors</span>: [<span class="hljs-string">'ECONNABORTED'</span>, <span class="hljs-string">'ETIMEDOUT'</span>, <span class="hljs-string">'NETWORK_ERROR'</span>]
    });
    
    <span class="hljs-comment">// å…³é”®è¯·æ±‚çš„é‡è¯•ç­–ç•¥</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">retryStrategies</span>.<span class="hljs-title function_">set</span>(<span class="hljs-string">'critical'</span>, {
      <span class="hljs-attr">maxRetries</span>: <span class="hljs-number">5</span>,
      <span class="hljs-attr">baseDelay</span>: <span class="hljs-number">500</span>,
      <span class="hljs-attr">maxDelay</span>: <span class="hljs-number">30000</span>,
      <span class="hljs-attr">backoffMultiplier</span>: <span class="hljs-number">1.5</span>,
      <span class="hljs-attr">retryableStatuses</span>: [<span class="hljs-number">408</span>, <span class="hljs-number">429</span>, <span class="hljs-number">500</span>, <span class="hljs-number">502</span>, <span class="hljs-number">503</span>, <span class="hljs-number">504</span>, <span class="hljs-number">502</span>],
      <span class="hljs-attr">retryableErrors</span>: [<span class="hljs-string">'ECONNABORTED'</span>, <span class="hljs-string">'ETIMEDOUT'</span>, <span class="hljs-string">'NETWORK_ERROR'</span>]
    });
    
    <span class="hljs-comment">// éå…³é”®è¯·æ±‚çš„é‡è¯•ç­–ç•¥</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">retryStrategies</span>.<span class="hljs-title function_">set</span>(<span class="hljs-string">'non-critical'</span>, {
      <span class="hljs-attr">maxRetries</span>: <span class="hljs-number">1</span>,
      <span class="hljs-attr">baseDelay</span>: <span class="hljs-number">2000</span>,
      <span class="hljs-attr">maxDelay</span>: <span class="hljs-number">5000</span>,
      <span class="hljs-attr">backoffMultiplier</span>: <span class="hljs-number">2</span>,
      <span class="hljs-attr">retryableStatuses</span>: [<span class="hljs-number">500</span>, <span class="hljs-number">502</span>, <span class="hljs-number">503</span>, <span class="hljs-number">504</span>],
      <span class="hljs-attr">retryableErrors</span>: [<span class="hljs-string">'NETWORK_ERROR'</span>]
    });
  }
  
  <span class="hljs-comment">// è°ƒåº¦è¯·æ±‚</span>
  <span class="hljs-title function_">schedule</span>(<span class="hljs-params">request, options = {}</span>) {
    <span class="hljs-keyword">const</span> {
      priority = <span class="hljs-string">'normal'</span>,
      retryStrategy = <span class="hljs-string">'default'</span>,
      cacheKey = <span class="hljs-literal">null</span>,
      offlineFallback = <span class="hljs-literal">false</span>,
      timeout = <span class="hljs-number">30000</span>,
      group = <span class="hljs-literal">null</span>
    } = options;
    
    <span class="hljs-keyword">const</span> requestId = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">generateRequestId</span>(request, options);
    <span class="hljs-keyword">const</span> requestInfo = {
      <span class="hljs-attr">id</span>: requestId,
      request,
      options,
      priority,
      retryStrategy,
      cacheKey,
      offlineFallback,
      timeout,
      group,
      <span class="hljs-attr">status</span>: <span class="hljs-string">'pending'</span>,
      <span class="hljs-attr">retryCount</span>: <span class="hljs-number">0</span>,
      <span class="hljs-attr">createdAt</span>: <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>(),
      <span class="hljs-attr">scheduledAt</span>: <span class="hljs-literal">null</span>,
      <span class="hljs-attr">completedAt</span>: <span class="hljs-literal">null</span>
    };
    
    <span class="hljs-comment">// æ£€æŸ¥ç¼“å­˜</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span>.<span class="hljs-property">cacheEnabled</span> &amp;&amp; cacheKey) {
      <span class="hljs-keyword">const</span> cached = <span class="hljs-variable language_">this</span>.<span class="hljs-property">requestCache</span>.<span class="hljs-title function_">get</span>(cacheKey);
      <span class="hljs-keyword">if</span> (cached &amp;&amp; !<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">isCacheExpired</span>(cached)) {
        requestInfo.<span class="hljs-property">status</span> = <span class="hljs-string">'cached'</span>;
        requestInfo.<span class="hljs-property">result</span> = cached.<span class="hljs-property">data</span>;
        <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>(cached.<span class="hljs-property">data</span>);
      }
    }
    
    <span class="hljs-comment">// æ·»åŠ åˆ°ç›¸åº”ä¼˜å…ˆçº§çš„é˜Ÿåˆ—</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">queues</span>[priority].<span class="hljs-title function_">push</span>(requestInfo);
    
    <span class="hljs-comment">// å¦‚æœæ˜¯ç¦»çº¿çŠ¶æ€ä¸”å¯ç”¨äº†ç¦»çº¿é˜Ÿåˆ—</span>
    <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">isOnline</span> &amp;&amp; <span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span>.<span class="hljs-property">offlineQueueEnabled</span> &amp;&amp; offlineFallback) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">offlineQueue</span>.<span class="hljs-title function_">push</span>(requestInfo);
      <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'Offline - request queued'</span>));
    }
    
    <span class="hljs-comment">// è¿”å›Promise</span>
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
      requestInfo.<span class="hljs-property">resolve</span> = resolve;
      requestInfo.<span class="hljs-property">reject</span> = reject;
      
      <span class="hljs-comment">// è®°å½•è¯·æ±‚ç»Ÿè®¡</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">recordRequestStat</span>(requestInfo);
    });
  }
  
  <span class="hljs-comment">// å¤„ç†é˜Ÿåˆ—</span>
  <span class="hljs-title function_">processQueues</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// æ£€æŸ¥æ˜¯å¦æœ‰ç©ºé—²æ§½ä½</span>
    <span class="hljs-keyword">const</span> availableSlots = <span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span>.<span class="hljs-property">maxConcurrent</span> - <span class="hljs-variable language_">this</span>.<span class="hljs-property">activeRequests</span>.<span class="hljs-property">size</span>;
    <span class="hljs-keyword">if</span> (availableSlots &lt;= <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span>;
    
    <span class="hljs-comment">// æŒ‰ä¼˜å…ˆçº§å¤„ç†é˜Ÿåˆ—</span>
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> priority <span class="hljs-keyword">of</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span>.<span class="hljs-property">priorityLevels</span>) {
      <span class="hljs-keyword">const</span> queue = <span class="hljs-variable language_">this</span>.<span class="hljs-property">queues</span>[priority];
      
      <span class="hljs-keyword">while</span> (queue.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span> &amp;&amp; availableSlots &gt; <span class="hljs-number">0</span>) {
        <span class="hljs-keyword">const</span> requestInfo = queue.<span class="hljs-title function_">shift</span>();
        
        <span class="hljs-comment">// è·³è¿‡å·²å–æ¶ˆçš„è¯·æ±‚</span>
        <span class="hljs-keyword">if</span> (requestInfo.<span class="hljs-property">status</span> === <span class="hljs-string">'cancelled'</span>) <span class="hljs-keyword">continue</span>;
        
        <span class="hljs-comment">// æ ‡è®°ä¸ºè°ƒåº¦ä¸­</span>
        requestInfo.<span class="hljs-property">status</span> = <span class="hljs-string">'scheduled'</span>;
        requestInfo.<span class="hljs-property">scheduledAt</span> = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();
        
        <span class="hljs-comment">// æ‰§è¡Œè¯·æ±‚</span>
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">executeRequest</span>(requestInfo);
      }
    }
  }
  
  <span class="hljs-comment">// æ‰§è¡Œè¯·æ±‚</span>
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">executeRequest</span>(<span class="hljs-params">requestInfo</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">activeRequests</span>.<span class="hljs-title function_">add</span>(requestInfo.<span class="hljs-property">id</span>);
    
    <span class="hljs-keyword">try</span> {
      <span class="hljs-comment">// è®¾ç½®è¶…æ—¶</span>
      <span class="hljs-keyword">const</span> timeoutPromise = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">_, reject</span>) =&gt;</span> {
        <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
          <span class="hljs-title function_">reject</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">`Request timeout after <span class="hljs-subst">${requestInfo.timeout}</span>ms`</span>));
        }, requestInfo.<span class="hljs-property">timeout</span>);
      });
      
      <span class="hljs-comment">// æ‰§è¡Œè¯·æ±‚</span>
      <span class="hljs-keyword">const</span> requestPromise = requestInfo.<span class="hljs-title function_">request</span>();
      <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">race</span>([requestPromise, timeoutPromise]);
      
      <span class="hljs-comment">// è¯·æ±‚æˆåŠŸ</span>
      requestInfo.<span class="hljs-property">status</span> = <span class="hljs-string">'completed'</span>;
      requestInfo.<span class="hljs-property">completedAt</span> = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();
      requestInfo.<span class="hljs-property">result</span> = result;
      
      <span class="hljs-comment">// ç¼“å­˜ç»“æœ</span>
      <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span>.<span class="hljs-property">cacheEnabled</span> &amp;&amp; requestInfo.<span class="hljs-property">cacheKey</span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">requestCache</span>.<span class="hljs-title function_">set</span>(requestInfo.<span class="hljs-property">cacheKey</span>, {
          <span class="hljs-attr">data</span>: result,
          <span class="hljs-attr">timestamp</span>: <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>(),
          <span class="hljs-attr">ttl</span>: requestInfo.<span class="hljs-property">options</span>.<span class="hljs-property">cacheTTL</span> || <span class="hljs-number">300000</span> <span class="hljs-comment">// é»˜è®¤5åˆ†é’Ÿ</span>
        });
      }
      
      <span class="hljs-comment">// è§£æPromise</span>
      <span class="hljs-keyword">if</span> (requestInfo.<span class="hljs-property">resolve</span>) {
        requestInfo.<span class="hljs-title function_">resolve</span>(result);
      }
      
      <span class="hljs-comment">// æ¸…ç†</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">cleanupRequest</span>(requestInfo);
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-comment">// å¤„ç†é”™è¯¯</span>
      <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">handleRequestError</span>(requestInfo, error);
    } <span class="hljs-keyword">finally</span> {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">activeRequests</span>.<span class="hljs-title function_">delete</span>(requestInfo.<span class="hljs-property">id</span>);
    }
  }
  
  <span class="hljs-comment">// å¤„ç†è¯·æ±‚é”™è¯¯</span>
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">handleRequestError</span>(<span class="hljs-params">requestInfo, error</span>) {
    requestInfo.<span class="hljs-property">lastError</span> = error;
    
    <span class="hljs-comment">// æ£€æŸ¥æ˜¯å¦éœ€è¦é‡è¯•</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span>.<span class="hljs-property">retryEnabled</span> &amp;&amp; <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">shouldRetry</span>(requestInfo, error)) {
      requestInfo.<span class="hljs-property">retryCount</span>++;
      requestInfo.<span class="hljs-property">status</span> = <span class="hljs-string">'retrying'</span>;
      
      <span class="hljs-comment">// è®¡ç®—é‡è¯•å»¶è¿Ÿ</span>
      <span class="hljs-keyword">const</span> delay = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">calculateRetryDelay</span>(requestInfo);
      
      <span class="hljs-comment">// å»¶è¿Ÿåé‡æ–°åŠ å…¥é˜Ÿåˆ—</span>
      <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
        requestInfo.<span class="hljs-property">status</span> = <span class="hljs-string">'pending'</span>;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">queues</span>[requestInfo.<span class="hljs-property">priority</span>].<span class="hljs-title function_">push</span>(requestInfo);
      }, delay);
      
      <span class="hljs-keyword">return</span>;
    }
    
    <span class="hljs-comment">// é‡è¯•æ¬¡æ•°ç”¨å®Œæˆ–ä¸éœ€è¦é‡è¯•</span>
    requestInfo.<span class="hljs-property">status</span> = <span class="hljs-string">'failed'</span>;
    requestInfo.<span class="hljs-property">completedAt</span> = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();
    
    <span class="hljs-comment">// å¦‚æœæ˜¯ç¦»çº¿ç›¸å…³é”™è¯¯ï¼ŒåŠ å…¥ç¦»çº¿é˜Ÿåˆ—</span>
    <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">isOnline</span> &amp;&amp; requestInfo.<span class="hljs-property">offlineFallback</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">offlineQueue</span>.<span class="hljs-title function_">push</span>(requestInfo);
    }
    
    <span class="hljs-comment">// æ‹’ç»Promise</span>
    <span class="hljs-keyword">if</span> (requestInfo.<span class="hljs-property">reject</span>) {
      requestInfo.<span class="hljs-title function_">reject</span>(error);
    }
    
    <span class="hljs-comment">// æ¸…ç†</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">cleanupRequest</span>(requestInfo);
  }
  
  <span class="hljs-comment">// æ£€æŸ¥æ˜¯å¦éœ€è¦é‡è¯•</span>
  <span class="hljs-title function_">shouldRetry</span>(<span class="hljs-params">requestInfo, error</span>) {
    <span class="hljs-keyword">const</span> strategy = <span class="hljs-variable language_">this</span>.<span class="hljs-property">retryStrategies</span>.<span class="hljs-title function_">get</span>(requestInfo.<span class="hljs-property">retryStrategy</span>) || 
                    <span class="hljs-variable language_">this</span>.<span class="hljs-property">retryStrategies</span>.<span class="hljs-title function_">get</span>(<span class="hljs-string">'default'</span>);
    
    <span class="hljs-comment">// æ£€æŸ¥é‡è¯•æ¬¡æ•°</span>
    <span class="hljs-keyword">if</span> (requestInfo.<span class="hljs-property">retryCount</span> &gt;= strategy.<span class="hljs-property">maxRetries</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }
    
    <span class="hljs-comment">// æ£€æŸ¥é”™è¯¯ç±»å‹</span>
    <span class="hljs-keyword">const</span> errorType = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getErrorType</span>(error);
    
    <span class="hljs-keyword">if</span> (strategy.<span class="hljs-property">retryableErrors</span>.<span class="hljs-title function_">includes</span>(errorType)) {
      <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    }
    
    <span class="hljs-comment">// æ£€æŸ¥HTTPçŠ¶æ€ç </span>
    <span class="hljs-keyword">if</span> (error.<span class="hljs-property">response</span> &amp;&amp; error.<span class="hljs-property">response</span>.<span class="hljs-property">status</span>) {
      <span class="hljs-keyword">return</span> strategy.<span class="hljs-property">retryableStatuses</span>.<span class="hljs-title function_">includes</span>(error.<span class="hljs-property">response</span>.<span class="hljs-property">status</span>);
    }
    
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
  }
  
  <span class="hljs-comment">// è®¡ç®—é‡è¯•å»¶è¿Ÿï¼ˆæŒ‡æ•°é€€é¿ï¼‰</span>
  <span class="hljs-title function_">calculateRetryDelay</span>(<span class="hljs-params">requestInfo</span>) {
    <span class="hljs-keyword">const</span> strategy = <span class="hljs-variable language_">this</span>.<span class="hljs-property">retryStrategies</span>.<span class="hljs-title function_">get</span>(requestInfo.<span class="hljs-property">retryStrategy</span>) || 
                    <span class="hljs-variable language_">this</span>.<span class="hljs-property">retryStrategies</span>.<span class="hljs-title function_">get</span>(<span class="hljs-string">'default'</span>);
    
    <span class="hljs-keyword">const</span> baseDelay = strategy.<span class="hljs-property">baseDelay</span>;
    <span class="hljs-keyword">const</span> multiplier = strategy.<span class="hljs-property">backoffMultiplier</span>;
    <span class="hljs-keyword">const</span> maxDelay = strategy.<span class="hljs-property">maxDelay</span>;
    
    <span class="hljs-keyword">const</span> delay = baseDelay * <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">pow</span>(multiplier, requestInfo.<span class="hljs-property">retryCount</span> - <span class="hljs-number">1</span>);
    
    <span class="hljs-comment">// æ·»åŠ éšæœºæŠ–åŠ¨ï¼ˆé˜²æ­¢æƒŠç¾¤æ•ˆåº”ï¼‰</span>
    <span class="hljs-keyword">const</span> jitter = delay * <span class="hljs-number">0.1</span> * (<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() * <span class="hljs-number">2</span> - <span class="hljs-number">1</span>);
    
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(delay + jitter, maxDelay);
  }
  
  <span class="hljs-comment">// å¤„ç†ç¦»çº¿é˜Ÿåˆ—</span>
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">processOfflineQueue</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">isOnline</span> || <span class="hljs-variable language_">this</span>.<span class="hljs-property">offlineQueue</span>.<span class="hljs-property">length</span> === <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span>;
    
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Processing <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.offlineQueue.length}</span> queued offline requests`</span>);
    
    <span class="hljs-comment">// å¤åˆ¶é˜Ÿåˆ—å¹¶æ¸…ç©ºåŸé˜Ÿåˆ—</span>
    <span class="hljs-keyword">const</span> queueToProcess = [...<span class="hljs-variable language_">this</span>.<span class="hljs-property">offlineQueue</span>];
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">offlineQueue</span> = [];
    
    <span class="hljs-comment">// å¤„ç†é˜Ÿåˆ—ä¸­çš„è¯·æ±‚</span>
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> requestInfo <span class="hljs-keyword">of</span> queueToProcess) {
      requestInfo.<span class="hljs-property">status</span> = <span class="hljs-string">'pending'</span>;
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">queues</span>[requestInfo.<span class="hljs-property">priority</span>].<span class="hljs-title function_">push</span>(requestInfo);
    }
  }
  
  <span class="hljs-comment">// æ¸…ç†è¯·æ±‚</span>
  <span class="hljs-title function_">cleanupRequest</span>(<span class="hljs-params">requestInfo</span>) {
    <span class="hljs-comment">// æ›´æ–°ç»Ÿè®¡ä¿¡æ¯</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">updateRequestStats</span>(requestInfo);
    
    <span class="hljs-comment">// ä»ç»Ÿè®¡ä¸­ç§»é™¤æ—§è®°å½•</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">cleanupOldStats</span>();
  }
  
  <span class="hljs-comment">// è®°å½•è¯·æ±‚ç»Ÿè®¡</span>
  <span class="hljs-title function_">recordRequestStat</span>(<span class="hljs-params">requestInfo</span>) {
    <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">requestStats</span>.<span class="hljs-title function_">has</span>(requestInfo.<span class="hljs-property">id</span>)) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">requestStats</span>.<span class="hljs-title function_">set</span>(requestInfo.<span class="hljs-property">id</span>, {
        <span class="hljs-attr">id</span>: requestInfo.<span class="hljs-property">id</span>,
        <span class="hljs-attr">priority</span>: requestInfo.<span class="hljs-property">priority</span>,
        <span class="hljs-attr">createdAt</span>: requestInfo.<span class="hljs-property">createdAt</span>,
        <span class="hljs-attr">completedAt</span>: <span class="hljs-literal">null</span>,
        <span class="hljs-attr">duration</span>: <span class="hljs-literal">null</span>,
        <span class="hljs-attr">status</span>: <span class="hljs-string">'pending'</span>,
        <span class="hljs-attr">retryCount</span>: <span class="hljs-number">0</span>,
        <span class="hljs-attr">group</span>: requestInfo.<span class="hljs-property">group</span>
      });
    }
  }
  
  <span class="hljs-comment">// æ›´æ–°è¯·æ±‚ç»Ÿè®¡</span>
  <span class="hljs-title function_">updateRequestStats</span>(<span class="hljs-params">requestInfo</span>) {
    <span class="hljs-keyword">const</span> stat = <span class="hljs-variable language_">this</span>.<span class="hljs-property">requestStats</span>.<span class="hljs-title function_">get</span>(requestInfo.<span class="hljs-property">id</span>);
    <span class="hljs-keyword">if</span> (stat) {
      stat.<span class="hljs-property">status</span> = requestInfo.<span class="hljs-property">status</span>;
      stat.<span class="hljs-property">retryCount</span> = requestInfo.<span class="hljs-property">retryCount</span>;
      stat.<span class="hljs-property">completedAt</span> = requestInfo.<span class="hljs-property">completedAt</span>;
      
      <span class="hljs-keyword">if</span> (requestInfo.<span class="hljs-property">completedAt</span> &amp;&amp; requestInfo.<span class="hljs-property">createdAt</span>) {
        stat.<span class="hljs-property">duration</span> = requestInfo.<span class="hljs-property">completedAt</span> - requestInfo.<span class="hljs-property">createdAt</span>;
      }
    }
  }
  
  <span class="hljs-comment">// æ¸…ç†æ—§ç»Ÿè®¡</span>
  <span class="hljs-title function_">cleanupOldStats</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> oneHourAgo = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>() - (<span class="hljs-number">60</span> * <span class="hljs-number">60</span> * <span class="hljs-number">1000</span>);
    
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> [id, stat] <span class="hljs-keyword">of</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">requestStats</span>.<span class="hljs-title function_">entries</span>()) {
      <span class="hljs-keyword">if</span> (stat.<span class="hljs-property">createdAt</span> &lt; oneHourAgo) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">requestStats</span>.<span class="hljs-title function_">delete</span>(id);
      }
    }
  }
  
  <span class="hljs-comment">// ç”Ÿæˆè¯·æ±‚ID</span>
  <span class="hljs-title function_">generateRequestId</span>(<span class="hljs-params">request, options</span>) {
    <span class="hljs-keyword">const</span> requestString = request.<span class="hljs-title function_">toString</span>();
    <span class="hljs-keyword">const</span> optionsString = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(options);
    
    <span class="hljs-keyword">return</span> <span class="hljs-string">`req_<span class="hljs-subst">${<span class="hljs-built_in">Date</span>.now()}</span>_<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.hashString(requestString + optionsString)}</span>`</span>;
  }
  
  <span class="hljs-comment">// ç®€å•çš„å“ˆå¸Œå‡½æ•°</span>
  <span class="hljs-title function_">hashString</span>(<span class="hljs-params">str</span>) {
    <span class="hljs-keyword">let</span> hash = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; str.<span class="hljs-property">length</span>; i++) {
      <span class="hljs-keyword">const</span> char = str.<span class="hljs-title function_">charCodeAt</span>(i);
      hash = ((hash &lt;&lt; <span class="hljs-number">5</span>) - hash) + char;
      hash = hash &amp; hash;
    }
    <span class="hljs-keyword">return</span> hash.<span class="hljs-title function_">toString</span>(<span class="hljs-number">36</span>);
  }
  
  <span class="hljs-comment">// è·å–é”™è¯¯ç±»å‹</span>
  <span class="hljs-title function_">getErrorType</span>(<span class="hljs-params">error</span>) {
    <span class="hljs-keyword">if</span> (error.<span class="hljs-property">code</span>) <span class="hljs-keyword">return</span> error.<span class="hljs-property">code</span>;
    <span class="hljs-keyword">if</span> (error.<span class="hljs-property">name</span>) <span class="hljs-keyword">return</span> error.<span class="hljs-property">name</span>;
    <span class="hljs-keyword">if</span> (error.<span class="hljs-property">message</span> &amp;&amp; error.<span class="hljs-property">message</span>.<span class="hljs-title function_">includes</span>(<span class="hljs-string">'timeout'</span>)) <span class="hljs-keyword">return</span> <span class="hljs-string">'ETIMEDOUT'</span>;
    <span class="hljs-keyword">if</span> (error.<span class="hljs-property">message</span> &amp;&amp; error.<span class="hljs-property">message</span>.<span class="hljs-title function_">includes</span>(<span class="hljs-string">'network'</span>)) <span class="hljs-keyword">return</span> <span class="hljs-string">'NETWORK_ERROR'</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-string">'UNKNOWN_ERROR'</span>;
  }
  
  <span class="hljs-comment">// æ£€æŸ¥ç¼“å­˜æ˜¯å¦è¿‡æœŸ</span>
  <span class="hljs-title function_">isCacheExpired</span>(<span class="hljs-params">cacheEntry</span>) {
    <span class="hljs-keyword">if</span> (!cacheEntry.<span class="hljs-property">ttl</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>() &gt; cacheEntry.<span class="hljs-property">timestamp</span> + cacheEntry.<span class="hljs-property">ttl</span>;
  }
  
  <span class="hljs-comment">// è·å–è°ƒåº¦å™¨çŠ¶æ€</span>
  <span class="hljs-title function_">getStatus</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> pendingRequests = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">values</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">queues</span>)
      .<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">sum, queue</span>) =&gt;</span> sum + queue.<span class="hljs-property">length</span>, <span class="hljs-number">0</span>);
    
    <span class="hljs-keyword">const</span> stats = <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">from</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">requestStats</span>.<span class="hljs-title function_">values</span>());
    
    <span class="hljs-keyword">const</span> successCount = stats.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">s</span> =&gt;</span> s.<span class="hljs-property">status</span> === <span class="hljs-string">'completed'</span>).<span class="hljs-property">length</span>;
    <span class="hljs-keyword">const</span> failedCount = stats.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">s</span> =&gt;</span> s.<span class="hljs-property">status</span> === <span class="hljs-string">'failed'</span>).<span class="hljs-property">length</span>;
    <span class="hljs-keyword">const</span> retryCount = stats.<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">sum, s</span>) =&gt;</span> sum + s.<span class="hljs-property">retryCount</span>, <span class="hljs-number">0</span>);
    <span class="hljs-keyword">const</span> avgDuration = stats
      .<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">s</span> =&gt;</span> s.<span class="hljs-property">duration</span>)
      .<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">sum, s</span>) =&gt;</span> sum + s.<span class="hljs-property">duration</span>, <span class="hljs-number">0</span>) / 
      <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(<span class="hljs-number">1</span>, stats.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">s</span> =&gt;</span> s.<span class="hljs-property">duration</span>).<span class="hljs-property">length</span>);
    
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">isOnline</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">isOnline</span>,
      <span class="hljs-attr">activeRequests</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">activeRequests</span>.<span class="hljs-property">size</span>,
      pendingRequests,
      <span class="hljs-attr">offlineQueue</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">offlineQueue</span>.<span class="hljs-property">length</span>,
      <span class="hljs-attr">cacheSize</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">requestCache</span>.<span class="hljs-property">size</span>,
      <span class="hljs-attr">totalProcessed</span>: stats.<span class="hljs-property">length</span>,
      <span class="hljs-attr">successRate</span>: stats.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span> ? (successCount / stats.<span class="hljs-property">length</span>) * <span class="hljs-number">100</span> : <span class="hljs-number">0</span>,
      <span class="hljs-attr">averageRetries</span>: stats.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span> ? (retryCount / stats.<span class="hljs-property">length</span>) : <span class="hljs-number">0</span>,
      <span class="hljs-attr">averageDuration</span>: avgDuration,
      <span class="hljs-attr">queueSizes</span>: {
        <span class="hljs-attr">high</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">queues</span>.<span class="hljs-property">high</span>.<span class="hljs-property">length</span>,
        <span class="hljs-attr">normal</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">queues</span>.<span class="hljs-property">normal</span>.<span class="hljs-property">length</span>,
        <span class="hljs-attr">low</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">queues</span>.<span class="hljs-property">low</span>.<span class="hljs-property">length</span>
      }
    };
  }
  
  <span class="hljs-comment">// å–æ¶ˆè¯·æ±‚</span>
  <span class="hljs-title function_">cancelRequest</span>(<span class="hljs-params">requestId</span>) {
    <span class="hljs-comment">// æŸ¥æ‰¾å¹¶æ ‡è®°è¯·æ±‚ä¸ºå–æ¶ˆçŠ¶æ€</span>
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> priority <span class="hljs-keyword">of</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span>.<span class="hljs-property">priorityLevels</span>) {
      <span class="hljs-keyword">const</span> queue = <span class="hljs-variable language_">this</span>.<span class="hljs-property">queues</span>[priority];
      <span class="hljs-keyword">const</span> index = queue.<span class="hljs-title function_">findIndex</span>(<span class="hljs-function"><span class="hljs-params">req</span> =&gt;</span> req.<span class="hljs-property">id</span> === requestId);
      
      <span class="hljs-keyword">if</span> (index !== -<span class="hljs-number">1</span>) {
        <span class="hljs-keyword">const</span> requestInfo = queue[index];
        requestInfo.<span class="hljs-property">status</span> = <span class="hljs-string">'cancelled'</span>;
        
        <span class="hljs-keyword">if</span> (requestInfo.<span class="hljs-property">reject</span>) {
          requestInfo.<span class="hljs-title function_">reject</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">RequestCancellationError</span>(<span class="hljs-string">'Request cancelled'</span>));
        }
        
        queue.<span class="hljs-title function_">splice</span>(index, <span class="hljs-number">1</span>);
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
      }
    }
    
    <span class="hljs-comment">// æ£€æŸ¥ç¦»çº¿é˜Ÿåˆ—</span>
    <span class="hljs-keyword">const</span> offlineIndex = <span class="hljs-variable language_">this</span>.<span class="hljs-property">offlineQueue</span>.<span class="hljs-title function_">findIndex</span>(<span class="hljs-function"><span class="hljs-params">req</span> =&gt;</span> req.<span class="hljs-property">id</span> === requestId);
    <span class="hljs-keyword">if</span> (offlineIndex !== -<span class="hljs-number">1</span>) {
      <span class="hljs-keyword">const</span> requestInfo = <span class="hljs-variable language_">this</span>.<span class="hljs-property">offlineQueue</span>[offlineIndex];
      requestInfo.<span class="hljs-property">status</span> = <span class="hljs-string">'cancelled'</span>;
      
      <span class="hljs-keyword">if</span> (requestInfo.<span class="hljs-property">reject</span>) {
        requestInfo.<span class="hljs-title function_">reject</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">RequestCancellationError</span>(<span class="hljs-string">'Request cancelled'</span>));
      }
      
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">offlineQueue</span>.<span class="hljs-title function_">splice</span>(offlineIndex, <span class="hljs-number">1</span>);
      <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    }
    
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
  }
  
  <span class="hljs-comment">// æ¸…ç©ºç¼“å­˜</span>
  <span class="hljs-title function_">clearCache</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">requestCache</span>.<span class="hljs-title function_">clear</span>();
  }
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">SchedulerExample</span> {
  <span class="hljs-keyword">static</span> <span class="hljs-keyword">async</span> <span class="hljs-title function_">demonstrate</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> scheduler = <span class="hljs-keyword">new</span> <span class="hljs-title class_">IntelligentRequestScheduler</span>({
      <span class="hljs-attr">maxConcurrent</span>: <span class="hljs-number">3</span>,
      <span class="hljs-attr">priorityLevels</span>: [<span class="hljs-string">'high'</span>, <span class="hljs-string">'normal'</span>, <span class="hljs-string">'low'</span>]
    });
    
    <span class="hljs-comment">// åˆ›å»ºä¸€äº›è¯·æ±‚å‡½æ•°</span>
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">createRequest</span> = (<span class="hljs-params">id, delay = <span class="hljs-number">1000</span></span>) =&gt; <span class="hljs-keyword">async</span> () =&gt; {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Starting request <span class="hljs-subst">${id}</span>`</span>);
      <span class="hljs-keyword">await</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function"><span class="hljs-params">resolve</span> =&gt;</span> <span class="hljs-built_in">setTimeout</span>(resolve, delay));
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Completed request <span class="hljs-subst">${id}</span>`</span>);
      <span class="hljs-keyword">return</span> { id, <span class="hljs-attr">data</span>: <span class="hljs-string">`Result from request <span class="hljs-subst">${id}</span>`</span> };
    };
    
    <span class="hljs-comment">// è°ƒåº¦ä¸åŒä¼˜å…ˆçº§çš„è¯·æ±‚</span>
    <span class="hljs-keyword">const</span> requests = [
      scheduler.<span class="hljs-title function_">schedule</span>(<span class="hljs-title function_">createRequest</span>(<span class="hljs-string">'high_1'</span>, <span class="hljs-number">500</span>), {
        <span class="hljs-attr">priority</span>: <span class="hljs-string">'high'</span>,
        <span class="hljs-attr">retryStrategy</span>: <span class="hljs-string">'critical'</span>,
        <span class="hljs-attr">cacheKey</span>: <span class="hljs-string">'request_high_1'</span>
      }),
      
      scheduler.<span class="hljs-title function_">schedule</span>(<span class="hljs-title function_">createRequest</span>(<span class="hljs-string">'normal_1'</span>, <span class="hljs-number">1000</span>), {
        <span class="hljs-attr">priority</span>: <span class="hljs-string">'normal'</span>,
        <span class="hljs-attr">cacheKey</span>: <span class="hljs-string">'request_normal_1'</span>
      }),
      
      scheduler.<span class="hljs-title function_">schedule</span>(<span class="hljs-title function_">createRequest</span>(<span class="hljs-string">'low_1'</span>, <span class="hljs-number">1500</span>), {
        <span class="hljs-attr">priority</span>: <span class="hljs-string">'low'</span>,
        <span class="hljs-attr">retryStrategy</span>: <span class="hljs-string">'non-critical'</span>
      }),
      
      scheduler.<span class="hljs-title function_">schedule</span>(<span class="hljs-title function_">createRequest</span>(<span class="hljs-string">'high_2'</span>, <span class="hljs-number">200</span>), {
        <span class="hljs-attr">priority</span>: <span class="hljs-string">'high'</span>,
        <span class="hljs-attr">offlineFallback</span>: <span class="hljs-literal">true</span>
      })
    ];
    
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">const</span> results = <span class="hljs-keyword">await</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">all</span>(requests);
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'All requests completed:'</span>, results);
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Some requests failed:'</span>, error);
    }
    
    <span class="hljs-comment">// è·å–è°ƒåº¦å™¨çŠ¶æ€</span>
    <span class="hljs-keyword">const</span> status = scheduler.<span class="hljs-title function_">getStatus</span>();
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Scheduler status:'</span>, status);
    
    <span class="hljs-keyword">return</span> scheduler;
  }
}
</code></pre>
<h4 data-id="heading-10">å››ã€WebSocketé«˜çº§å°è£…</h4>
<h5 data-id="heading-11">4.1 å®Œæ•´çš„WebSocketå®¢æˆ·ç«¯</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">WebSocketClient</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">url, options = {}</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">url</span> = url;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span> = {
      <span class="hljs-attr">protocols</span>: [],
      <span class="hljs-attr">reconnect</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">maxReconnectAttempts</span>: <span class="hljs-number">5</span>,
      <span class="hljs-attr">reconnectDelay</span>: <span class="hljs-number">1000</span>,
      <span class="hljs-attr">heartbeatEnabled</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">heartbeatInterval</span>: <span class="hljs-number">30000</span>,
      <span class="hljs-attr">autoConnect</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">binaryType</span>: <span class="hljs-string">'blob'</span>,
      ...options
    };
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">socket</span> = <span class="hljs-literal">null</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">reconnectAttempts</span> = <span class="hljs-number">0</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">messageQueue</span> = [];
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">listeners</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">heartbeatInterval</span> = <span class="hljs-literal">null</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">reconnectTimeout</span> = <span class="hljs-literal">null</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">isConnected</span> = <span class="hljs-literal">false</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">isConnecting</span> = <span class="hljs-literal">false</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">connectionId</span> = <span class="hljs-literal">null</span>;
    
    <span class="hljs-comment">// äº‹ä»¶ç±»å‹</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">EVENTS</span> = {
      <span class="hljs-attr">OPEN</span>: <span class="hljs-string">'open'</span>,
      <span class="hljs-attr">CLOSE</span>: <span class="hljs-string">'close'</span>,
      <span class="hljs-attr">MESSAGE</span>: <span class="hljs-string">'message'</span>,
      <span class="hljs-attr">ERROR</span>: <span class="hljs-string">'error'</span>,
      <span class="hljs-attr">RECONNECT</span>: <span class="hljs-string">'reconnect'</span>,
      <span class="hljs-attr">HEARTBEAT</span>: <span class="hljs-string">'heartbeat'</span>
    };
    
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span>.<span class="hljs-property">autoConnect</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">connect</span>();
    }
  }
  
  <span class="hljs-comment">// è¿æ¥WebSocket</span>
  <span class="hljs-title function_">connect</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">isConnected</span> || <span class="hljs-variable language_">this</span>.<span class="hljs-property">isConnecting</span>) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(<span class="hljs-string">'WebSocket is already connected or connecting'</span>);
      <span class="hljs-keyword">return</span>;
    }
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">isConnecting</span> = <span class="hljs-literal">true</span>;
    
    <span class="hljs-keyword">try</span> {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">socket</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">WebSocket</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">url</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span>.<span class="hljs-property">protocols</span>);
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">socket</span>.<span class="hljs-property">binaryType</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span>.<span class="hljs-property">binaryType</span>;
      
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setupEventListeners</span>();
      
      <span class="hljs-comment">// è®¾ç½®è¿æ¥è¶…æ—¶</span>
      <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
        <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">isConnecting</span> &amp;&amp; !<span class="hljs-variable language_">this</span>.<span class="hljs-property">isConnected</span>) {
          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(<span class="hljs-string">'WebSocket connection timeout'</span>);
          <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">handleConnectionError</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'Connection timeout'</span>));
        }
      }, <span class="hljs-number">10000</span>);
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">handleConnectionError</span>(error);
    }
  }
  
  <span class="hljs-comment">// è®¾ç½®äº‹ä»¶ç›‘å¬å™¨</span>
  <span class="hljs-title function_">setupEventListeners</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">socket</span>.<span class="hljs-property">onopen</span> = <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">isConnected</span> = <span class="hljs-literal">true</span>;
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">isConnecting</span> = <span class="hljs-literal">false</span>;
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">reconnectAttempts</span> = <span class="hljs-number">0</span>;
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">connectionId</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">generateConnectionId</span>();
      
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`WebSocket connected: <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.url}</span>`</span>);
      
      <span class="hljs-comment">// è§¦å‘openäº‹ä»¶</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">emit</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">EVENTS</span>.<span class="hljs-property">OPEN</span>, {
        <span class="hljs-attr">connectionId</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">connectionId</span>,
        event
      });
      
      <span class="hljs-comment">// å¯åŠ¨å¿ƒè·³æ£€æµ‹</span>
      <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span>.<span class="hljs-property">heartbeatEnabled</span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">startHeartbeat</span>();
      }
      
      <span class="hljs-comment">// å‘é€é˜Ÿåˆ—ä¸­çš„æ¶ˆæ¯</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">flushMessageQueue</span>();
    };
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">socket</span>.<span class="hljs-property">onclose</span> = <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">isConnected</span> = <span class="hljs-literal">false</span>;
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">isConnecting</span> = <span class="hljs-literal">false</span>;
      
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`WebSocket closed: <span class="hljs-subst">${event.code}</span> <span class="hljs-subst">${event.reason}</span>`</span>);
      
      <span class="hljs-comment">// è§¦å‘closeäº‹ä»¶</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">emit</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">EVENTS</span>.<span class="hljs-property">CLOSE</span>, {
        <span class="hljs-attr">code</span>: event.<span class="hljs-property">code</span>,
        <span class="hljs-attr">reason</span>: event.<span class="hljs-property">reason</span>,
        <span class="hljs-attr">wasClean</span>: event.<span class="hljs-property">wasClean</span>,
        <span class="hljs-attr">connectionId</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">connectionId</span>
      });
      
      <span class="hljs-comment">// åœæ­¢å¿ƒè·³æ£€æµ‹</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">stopHeartbeat</span>();
      
      <span class="hljs-comment">// å°è¯•é‡è¿</span>
      <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span>.<span class="hljs-property">reconnect</span> &amp;&amp; !event.<span class="hljs-property">wasClean</span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">attemptReconnect</span>();
      }
    };
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">socket</span>.<span class="hljs-property">onmessage</span> = <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {
      <span class="hljs-comment">// å¤„ç†å¿ƒè·³å“åº”</span>
      <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">isHeartbeatMessage</span>(event.<span class="hljs-property">data</span>)) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">emit</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">EVENTS</span>.<span class="hljs-property">HEARTBEAT</span>, { <span class="hljs-attr">timestamp</span>: <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>() });
        <span class="hljs-keyword">return</span>;
      }
      
      <span class="hljs-comment">// è§¦å‘messageäº‹ä»¶</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">emit</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">EVENTS</span>.<span class="hljs-property">MESSAGE</span>, {
        <span class="hljs-attr">data</span>: event.<span class="hljs-property">data</span>,
        <span class="hljs-attr">origin</span>: event.<span class="hljs-property">origin</span>,
        <span class="hljs-attr">connectionId</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">connectionId</span>,
        <span class="hljs-attr">timestamp</span>: <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>()
      });
    };
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">socket</span>.<span class="hljs-property">onerror</span> = <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'WebSocket error:'</span>, event);
      
      <span class="hljs-comment">// è§¦å‘erroräº‹ä»¶</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">emit</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">EVENTS</span>.<span class="hljs-property">ERROR</span>, {
        <span class="hljs-attr">error</span>: event,
        <span class="hljs-attr">connectionId</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">connectionId</span>
      });
      
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">handleConnectionError</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'WebSocket error'</span>));
    };
  }
  
  <span class="hljs-comment">// å‘é€æ¶ˆæ¯</span>
  <span class="hljs-title function_">send</span>(<span class="hljs-params">data, options = {}</span>) {
    <span class="hljs-keyword">const</span> {
      queueIfNotConnected = <span class="hljs-literal">true</span>,
      retry = <span class="hljs-literal">false</span>,
      maxRetries = <span class="hljs-number">3</span>,
      retryDelay = <span class="hljs-number">1000</span>
    } = options;
    
    <span class="hljs-comment">// å¦‚æœæœªè¿æ¥ä¸”å…è®¸æ’é˜Ÿ</span>
    <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">isConnected</span> &amp;&amp; queueIfNotConnected) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">messageQueue</span>.<span class="hljs-title function_">push</span>({ data, options, <span class="hljs-attr">retryCount</span>: <span class="hljs-number">0</span> });
      <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'WebSocket not connected, message queued'</span>));
    }
    
    <span class="hljs-comment">// å¦‚æœæœªè¿æ¥ä¸”ä¸å…è®¸æ’é˜Ÿ</span>
    <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">isConnected</span> &amp;&amp; !queueIfNotConnected) {
      <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'WebSocket not connected'</span>));
    }
    
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
      <span class="hljs-keyword">try</span> {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">socket</span>.<span class="hljs-title function_">send</span>(data);
        <span class="hljs-title function_">resolve</span>();
      } <span class="hljs-keyword">catch</span> (error) {
        <span class="hljs-keyword">if</span> (retry &amp;&amp; (options.<span class="hljs-property">retryCount</span> || <span class="hljs-number">0</span>) &lt; maxRetries) {
          <span class="hljs-keyword">const</span> retryCount = (options.<span class="hljs-property">retryCount</span> || <span class="hljs-number">0</span>) + <span class="hljs-number">1</span>;
          
          <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
            <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">send</span>(data, { ...options, retryCount })
              .<span class="hljs-title function_">then</span>(resolve)
              .<span class="hljs-title function_">catch</span>(reject);
          }, retryDelay);
        } <span class="hljs-keyword">else</span> {
          <span class="hljs-title function_">reject</span>(error);
        }
      }
    });
  }
  
  <span class="hljs-comment">// å‘é€JSONæ¶ˆæ¯</span>
  <span class="hljs-title function_">sendJson</span>(<span class="hljs-params">data, options = {}</span>) {
    <span class="hljs-keyword">const</span> jsonString = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(data);
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">send</span>(jsonString, options);
  }
  
  <span class="hljs-comment">// å‘é€å¸¦è¯·æ±‚-å“åº”æ¨¡å¼çš„æ¶ˆæ¯</span>
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">sendWithResponse</span>(<span class="hljs-params">data, options = {}</span>) {
    <span class="hljs-keyword">const</span> {
      timeout = <span class="hljs-number">30000</span>,
      responseType = <span class="hljs-string">'json'</span>
    } = options;
    
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
      <span class="hljs-comment">// ç”Ÿæˆå”¯ä¸€çš„æ¶ˆæ¯ID</span>
      <span class="hljs-keyword">const</span> messageId = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">generateMessageId</span>();
      
      <span class="hljs-comment">// åˆ›å»ºè¶…æ—¶å®šæ—¶å™¨</span>
      <span class="hljs-keyword">const</span> timeoutId = <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">off</span>(messageId);
        <span class="hljs-title function_">reject</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'Response timeout'</span>));
      }, timeout);
      
      <span class="hljs-comment">// ç›‘å¬ç‰¹å®šæ¶ˆæ¯IDçš„å“åº”</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">once</span>(messageId, <span class="hljs-function">(<span class="hljs-params">response</span>) =&gt;</span> {
        <span class="hljs-built_in">clearTimeout</span>(timeoutId);
        
        <span class="hljs-comment">// æ ¹æ®ç±»å‹è§£æå“åº”</span>
        <span class="hljs-keyword">let</span> parsedResponse;
        <span class="hljs-keyword">try</span> {
          <span class="hljs-keyword">if</span> (responseType === <span class="hljs-string">'json'</span>) {
            parsedResponse = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(response.<span class="hljs-property">data</span>);
          } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (responseType === <span class="hljs-string">'text'</span>) {
            parsedResponse = response.<span class="hljs-property">data</span>;
          } <span class="hljs-keyword">else</span> {
            parsedResponse = response.<span class="hljs-property">data</span>;
          }
          
          <span class="hljs-title function_">resolve</span>(parsedResponse);
        } <span class="hljs-keyword">catch</span> (error) {
          <span class="hljs-title function_">reject</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">`Failed to parse response: <span class="hljs-subst">${error.message}</span>`</span>));
        }
      });
      
      <span class="hljs-comment">// å‘é€æ¶ˆæ¯ï¼ˆåŒ…å«æ¶ˆæ¯IDï¼‰</span>
      <span class="hljs-keyword">const</span> message = {
        <span class="hljs-attr">id</span>: messageId,
        data,
        <span class="hljs-attr">timestamp</span>: <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>()
      };
      
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">sendJson</span>(message).<span class="hljs-title function_">catch</span>(reject);
    });
  }
  
  <span class="hljs-comment">// å‘é€RPCè°ƒç”¨</span>
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">call</span>(<span class="hljs-params">method, params, options = {}</span>) {
    <span class="hljs-keyword">const</span> rpcRequest = {
      <span class="hljs-attr">jsonrpc</span>: <span class="hljs-string">'2.0'</span>,
      method,
      params,
      <span class="hljs-attr">id</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">generateMessageId</span>()
    };
    
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">sendWithResponse</span>(rpcRequest, options);
  }
  
  <span class="hljs-comment">// å‘é€äºŒè¿›åˆ¶æ•°æ®</span>
  <span class="hljs-title function_">sendBinary</span>(<span class="hljs-params">data, options = {}</span>) {
    <span class="hljs-keyword">let</span> binaryData;
    
    <span class="hljs-keyword">if</span> (data <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">ArrayBuffer</span>) {
      binaryData = data;
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (data <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Blob</span>) {
      binaryData = data;
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-title class_">ArrayBuffer</span>.<span class="hljs-title function_">isView</span>(data)) {
      binaryData = data.<span class="hljs-property">buffer</span>;
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'Unsupported binary data type'</span>);
    }
    
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">send</span>(binaryData, options);
  }
  
  <span class="hljs-comment">// å¤„ç†è¿æ¥é”™è¯¯</span>
  <span class="hljs-title function_">handleConnectionError</span>(<span class="hljs-params">error</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">isConnecting</span> = <span class="hljs-literal">false</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">isConnected</span> = <span class="hljs-literal">false</span>;
    
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'WebSocket connection error:'</span>, error);
    
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span>.<span class="hljs-property">reconnect</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">attemptReconnect</span>();
    }
  }
  
  <span class="hljs-comment">// å°è¯•é‡è¿</span>
  <span class="hljs-title function_">attemptReconnect</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">reconnectAttempts</span> &gt;= <span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span>.<span class="hljs-property">maxReconnectAttempts</span>) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Max reconnection attempts reached'</span>);
      <span class="hljs-keyword">return</span>;
    }
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">reconnectAttempts</span>++;
    
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Attempting to reconnect (<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.reconnectAttempts}</span>/<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.options.maxReconnectAttempts}</span>)...`</span>);
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">emit</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">EVENTS</span>.<span class="hljs-property">RECONNECT</span>, {
      <span class="hljs-attr">attempt</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">reconnectAttempts</span>,
      <span class="hljs-attr">maxAttempts</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span>.<span class="hljs-property">maxReconnectAttempts</span>
    });
    
    <span class="hljs-comment">// è®¡ç®—é‡è¿å»¶è¿Ÿï¼ˆæŒ‡æ•°é€€é¿ï¼‰</span>
    <span class="hljs-keyword">const</span> delay = <span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span>.<span class="hljs-property">reconnectDelay</span> * <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">pow</span>(<span class="hljs-number">2</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">reconnectAttempts</span> - <span class="hljs-number">1</span>);
    
    <span class="hljs-comment">// æ·»åŠ éšæœºæŠ–åŠ¨</span>
    <span class="hljs-keyword">const</span> jitter = delay * <span class="hljs-number">0.1</span> * (<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() * <span class="hljs-number">2</span> - <span class="hljs-number">1</span>);
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">reconnectTimeout</span> = <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">connect</span>();
    }, delay + jitter);
  }
  
  <span class="hljs-comment">// å¯åŠ¨å¿ƒè·³æ£€æµ‹</span>
  <span class="hljs-title function_">startHeartbeat</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">heartbeatInterval</span>) {
      <span class="hljs-built_in">clearInterval</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">heartbeatInterval</span>);
    }
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">heartbeatInterval</span> = <span class="hljs-built_in">setInterval</span>(<span class="hljs-function">() =&gt;</span> {
      <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">isConnected</span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">send</span>(<span class="hljs-string">'__HEARTBEAT__'</span>).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> {
          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(<span class="hljs-string">'Heartbeat failed:'</span>, error);
          <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">handleConnectionError</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'Heartbeat failed'</span>));
        });
      }
    }, <span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span>.<span class="hljs-property">heartbeatInterval</span>);
  }
  
  <span class="hljs-comment">// åœæ­¢å¿ƒè·³æ£€æµ‹</span>
  <span class="hljs-title function_">stopHeartbeat</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">heartbeatInterval</span>) {
      <span class="hljs-built_in">clearInterval</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">heartbeatInterval</span>);
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">heartbeatInterval</span> = <span class="hljs-literal">null</span>;
    }
  }
  
  <span class="hljs-comment">// æ£€æŸ¥æ˜¯å¦æ˜¯å¿ƒè·³æ¶ˆæ¯</span>
  <span class="hljs-title function_">isHeartbeatMessage</span>(<span class="hljs-params">data</span>) {
    <span class="hljs-keyword">return</span> data === <span class="hljs-string">'__HEARTBEAT__'</span> || data === <span class="hljs-string">'__HEARTBEAT_RESPONSE__'</span>;
  }
  
  <span class="hljs-comment">// æ¸…ç©ºæ¶ˆæ¯é˜Ÿåˆ—</span>
  <span class="hljs-title function_">flushMessageQueue</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">while</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">messageQueue</span>.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span>) {
      <span class="hljs-keyword">const</span> { data, options, retryCount } = <span class="hljs-variable language_">this</span>.<span class="hljs-property">messageQueue</span>.<span class="hljs-title function_">shift</span>();
      
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">send</span>(data, { ...options, retryCount }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(<span class="hljs-string">'Failed to send queued message:'</span>, error);
      });
    }
  }
  
  <span class="hljs-comment">// æ–­å¼€è¿æ¥</span>
  <span class="hljs-title function_">disconnect</span>(<span class="hljs-params">code = <span class="hljs-number">1000</span>, reason = <span class="hljs-string">'Normal closure'</span></span>) {
    <span class="hljs-comment">// æ¸…é™¤é‡è¿å®šæ—¶å™¨</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">reconnectTimeout</span>) {
      <span class="hljs-built_in">clearTimeout</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">reconnectTimeout</span>);
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">reconnectTimeout</span> = <span class="hljs-literal">null</span>;
    }
    
    <span class="hljs-comment">// åœæ­¢å¿ƒè·³æ£€æµ‹</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">stopHeartbeat</span>();
    
    <span class="hljs-comment">// å…³é—­WebSocket</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">socket</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">socket</span>.<span class="hljs-title function_">close</span>(code, reason);
    }
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">isConnected</span> = <span class="hljs-literal">false</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">isConnecting</span> = <span class="hljs-literal">false</span>;
  }
  
  <span class="hljs-comment">// äº‹ä»¶ç›‘å¬</span>
  <span class="hljs-title function_">on</span>(<span class="hljs-params">event, listener</span>) {
    <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">listeners</span>.<span class="hljs-title function_">has</span>(event)) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">listeners</span>.<span class="hljs-title function_">set</span>(event, <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>());
    }
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">listeners</span>.<span class="hljs-title function_">get</span>(event).<span class="hljs-title function_">add</span>(listener);
    
    <span class="hljs-comment">// è¿”å›å–æ¶ˆç›‘å¬çš„å‡½æ•°</span>
    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">off</span>(event, listener);
  }
  
  <span class="hljs-comment">// ä¸€æ¬¡æ€§äº‹ä»¶ç›‘å¬</span>
  <span class="hljs-title function_">once</span>(<span class="hljs-params">event, listener</span>) {
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">onceListener</span> = (<span class="hljs-params">...args</span>) =&gt; {
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">off</span>(event, onceListener);
      <span class="hljs-title function_">listener</span>(...args);
    };
    
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">on</span>(event, onceListener);
  }
  
  <span class="hljs-comment">// ç§»é™¤äº‹ä»¶ç›‘å¬</span>
  <span class="hljs-title function_">off</span>(<span class="hljs-params">event, listener</span>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">listeners</span>.<span class="hljs-title function_">has</span>(event)) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">listeners</span>.<span class="hljs-title function_">get</span>(event).<span class="hljs-title function_">delete</span>(listener);
      
      <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">listeners</span>.<span class="hljs-title function_">get</span>(event).<span class="hljs-property">size</span> === <span class="hljs-number">0</span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">listeners</span>.<span class="hljs-title function_">delete</span>(event);
      }
    }
  }
  
  <span class="hljs-comment">// è§¦å‘äº‹ä»¶</span>
  <span class="hljs-title function_">emit</span>(<span class="hljs-params">event, data</span>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">listeners</span>.<span class="hljs-title function_">has</span>(event)) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">listeners</span>.<span class="hljs-title function_">get</span>(event).<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">listener</span> =&gt;</span> {
        <span class="hljs-keyword">try</span> {
          <span class="hljs-title function_">listener</span>(data);
        } <span class="hljs-keyword">catch</span> (error) {
          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Error in event listener for "<span class="hljs-subst">${event}</span>":`</span>, error);
        }
      });
    }
    
    <span class="hljs-comment">// è§¦å‘é€šé…ç¬¦ç›‘å¬å™¨</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">listeners</span>.<span class="hljs-title function_">has</span>(<span class="hljs-string">'*'</span>)) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">listeners</span>.<span class="hljs-title function_">get</span>(<span class="hljs-string">'*'</span>).<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">listener</span> =&gt;</span> {
        <span class="hljs-keyword">try</span> {
          <span class="hljs-title function_">listener</span>(event, data);
        } <span class="hljs-keyword">catch</span> (error) {
          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Error in wildcard event listener:'</span>, error);
        }
      });
    }
  }
  
  <span class="hljs-comment">// ç”Ÿæˆè¿æ¥ID</span>
  <span class="hljs-title function_">generateConnectionId</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="hljs-string">`conn_<span class="hljs-subst">${<span class="hljs-built_in">Date</span>.now()}</span>_<span class="hljs-subst">${<span class="hljs-built_in">Math</span>.random().toString(<span class="hljs-number">36</span>).substr(<span class="hljs-number">2</span>, <span class="hljs-number">9</span>)}</span>`</span>;
  }
  
  <span class="hljs-comment">// ç”Ÿæˆæ¶ˆæ¯ID</span>
  <span class="hljs-title function_">generateMessageId</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="hljs-string">`msg_<span class="hljs-subst">${<span class="hljs-built_in">Date</span>.now()}</span>_<span class="hljs-subst">${<span class="hljs-built_in">Math</span>.random().toString(<span class="hljs-number">36</span>).substr(<span class="hljs-number">2</span>, <span class="hljs-number">9</span>)}</span>`</span>;
  }
  
  <span class="hljs-comment">// è·å–è¿æ¥çŠ¶æ€</span>
  <span class="hljs-title function_">getStatus</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">url</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">url</span>,
      <span class="hljs-attr">isConnected</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">isConnected</span>,
      <span class="hljs-attr">isConnecting</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">isConnecting</span>,
      <span class="hljs-attr">connectionId</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">connectionId</span>,
      <span class="hljs-attr">reconnectAttempts</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">reconnectAttempts</span>,
      <span class="hljs-attr">maxReconnectAttempts</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span>.<span class="hljs-property">maxReconnectAttempts</span>,
      <span class="hljs-attr">queuedMessages</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">messageQueue</span>.<span class="hljs-property">length</span>,
      <span class="hljs-attr">binaryType</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span>.<span class="hljs-property">binaryType</span>
    };
  }
  
  <span class="hljs-comment">// è®¾ç½®äºŒè¿›åˆ¶ç±»å‹</span>
  <span class="hljs-title function_">setBinaryType</span>(<span class="hljs-params">binaryType</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span>.<span class="hljs-property">binaryType</span> = binaryType;
    
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">socket</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">socket</span>.<span class="hljs-property">binaryType</span> = binaryType;
    }
  }
}

<span class="hljs-comment">// WebSocketç®¡ç†ç±»ï¼ˆå¤šè¿æ¥ç®¡ç†ï¼‰</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">WebSocketManager</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">connections</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">defaultOptions</span> = {
      <span class="hljs-attr">reconnect</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">maxReconnectAttempts</span>: <span class="hljs-number">3</span>,
      <span class="hljs-attr">reconnectDelay</span>: <span class="hljs-number">1000</span>,
      <span class="hljs-attr">heartbeatEnabled</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">heartbeatInterval</span>: <span class="hljs-number">30000</span>
    };
  }
  
  <span class="hljs-comment">// åˆ›å»ºè¿æ¥</span>
  <span class="hljs-title function_">createConnection</span>(<span class="hljs-params">url, options = {}</span>) {
    <span class="hljs-keyword">const</span> connectionId = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">generateConnectionId</span>(url);
    
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">connections</span>.<span class="hljs-title function_">has</span>(connectionId)) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(<span class="hljs-string">`Connection already exists: <span class="hljs-subst">${connectionId}</span>`</span>);
      <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">connections</span>.<span class="hljs-title function_">get</span>(connectionId);
    }
    
    <span class="hljs-keyword">const</span> mergedOptions = { ...<span class="hljs-variable language_">this</span>.<span class="hljs-property">defaultOptions</span>, ...options };
    <span class="hljs-keyword">const</span> client = <span class="hljs-keyword">new</span> <span class="hljs-title class_">WebSocketClient</span>(url, mergedOptions);
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">connections</span>.<span class="hljs-title function_">set</span>(connectionId, client);
    
    <span class="hljs-comment">// ç›‘å¬è¿æ¥å…³é—­äº‹ä»¶ä»¥æ¸…ç†</span>
    client.<span class="hljs-title function_">on</span>(<span class="hljs-string">'close'</span>, <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-comment">// å¯ä»¥åœ¨è¿™é‡Œæ‰§è¡Œæ¸…ç†æ“ä½œ</span>
    });
    
    <span class="hljs-keyword">return</span> client;
  }
  
  <span class="hljs-comment">// è·å–è¿æ¥</span>
  <span class="hljs-title function_">getConnection</span>(<span class="hljs-params">connectionId</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">connections</span>.<span class="hljs-title function_">get</span>(connectionId);
  }
  
  <span class="hljs-comment">// å…³é—­è¿æ¥</span>
  <span class="hljs-title function_">closeConnection</span>(<span class="hljs-params">connectionId, code = <span class="hljs-number">1000</span>, reason = <span class="hljs-string">'Normal closure'</span></span>) {
    <span class="hljs-keyword">const</span> client = <span class="hljs-variable language_">this</span>.<span class="hljs-property">connections</span>.<span class="hljs-title function_">get</span>(connectionId);
    
    <span class="hljs-keyword">if</span> (client) {
      client.<span class="hljs-title function_">disconnect</span>(code, reason);
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">connections</span>.<span class="hljs-title function_">delete</span>(connectionId);
      <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    }
    
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
  }
  
  <span class="hljs-comment">// å…³é—­æ‰€æœ‰è¿æ¥</span>
  <span class="hljs-title function_">closeAllConnections</span>(<span class="hljs-params">code = <span class="hljs-number">1000</span>, reason = <span class="hljs-string">'Normal closure'</span></span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">connections</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">client, connectionId</span>) =&gt;</span> {
      client.<span class="hljs-title function_">disconnect</span>(code, reason);
    });
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">connections</span>.<span class="hljs-title function_">clear</span>();
  }
  
  <span class="hljs-comment">// å¹¿æ’­æ¶ˆæ¯åˆ°æ‰€æœ‰è¿æ¥</span>
  <span class="hljs-title function_">broadcast</span>(<span class="hljs-params">data, options = {}</span>) {
    <span class="hljs-keyword">const</span> promises = [];
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">connections</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">client</span> =&gt;</span> {
      <span class="hljs-keyword">if</span> (client.<span class="hljs-property">isConnected</span>) {
        promises.<span class="hljs-title function_">push</span>(client.<span class="hljs-title function_">send</span>(data, options));
      }
    });
    
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">allSettled</span>(promises);
  }
  
  <span class="hljs-comment">// ç”Ÿæˆè¿æ¥ID</span>
  <span class="hljs-title function_">generateConnectionId</span>(<span class="hljs-params">url</span>) {
    <span class="hljs-keyword">const</span> urlObj = <span class="hljs-keyword">new</span> <span class="hljs-title function_">URL</span>(url);
    <span class="hljs-keyword">const</span> host = urlObj.<span class="hljs-property">host</span>;
    <span class="hljs-keyword">const</span> path = urlObj.<span class="hljs-property">pathname</span>;
    
    <span class="hljs-keyword">return</span> <span class="hljs-string">`<span class="hljs-subst">${host}</span><span class="hljs-subst">${path}</span>`</span>.<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/[^a-z0-9]/gi</span>, <span class="hljs-string">'_'</span>);
  }
  
  <span class="hljs-comment">// è·å–è¿æ¥çŠ¶æ€</span>
  <span class="hljs-title function_">getStatus</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> status = {
      <span class="hljs-attr">totalConnections</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">connections</span>.<span class="hljs-property">size</span>,
      <span class="hljs-attr">connectedConnections</span>: <span class="hljs-number">0</span>,
      <span class="hljs-attr">connectingConnections</span>: <span class="hljs-number">0</span>,
      <span class="hljs-attr">connections</span>: []
    };
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">connections</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">client, connectionId</span>) =&gt;</span> {
      <span class="hljs-keyword">const</span> clientStatus = client.<span class="hljs-title function_">getStatus</span>();
      
      <span class="hljs-keyword">if</span> (clientStatus.<span class="hljs-property">isConnected</span>) {
        status.<span class="hljs-property">connectedConnections</span>++;
      } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (clientStatus.<span class="hljs-property">isConnecting</span>) {
        status.<span class="hljs-property">connectingConnections</span>++;
      }
      
      status.<span class="hljs-property">connections</span>.<span class="hljs-title function_">push</span>({
        connectionId,
        ...clientStatus
      });
    });
    
    <span class="hljs-keyword">return</span> status;
  }
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">WebSocketExample</span> {
  <span class="hljs-keyword">static</span> <span class="hljs-title function_">demonstrate</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// åˆ›å»ºWebSocketå®¢æˆ·ç«¯</span>
    <span class="hljs-keyword">const</span> wsClient = <span class="hljs-keyword">new</span> <span class="hljs-title class_">WebSocketClient</span>(<span class="hljs-string">'wss://echo.websocket.org'</span>, {
      <span class="hljs-attr">reconnect</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">maxReconnectAttempts</span>: <span class="hljs-number">3</span>,
      <span class="hljs-attr">heartbeatEnabled</span>: <span class="hljs-literal">true</span>
    });
    
    <span class="hljs-comment">// ç›‘å¬äº‹ä»¶</span>
    wsClient.<span class="hljs-title function_">on</span>(<span class="hljs-string">'open'</span>, <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'WebSocket opened:'</span>, event.<span class="hljs-property">connectionId</span>);
      
      <span class="hljs-comment">// å‘é€æ¶ˆæ¯</span>
      wsClient.<span class="hljs-title function_">sendJson</span>({ <span class="hljs-attr">type</span>: <span class="hljs-string">'greeting'</span>, <span class="hljs-attr">message</span>: <span class="hljs-string">'Hello WebSocket!'</span> });
    });
    
    wsClient.<span class="hljs-title function_">on</span>(<span class="hljs-string">'message'</span>, <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Received message:'</span>, event.<span class="hljs-property">data</span>);
    });
    
    wsClient.<span class="hljs-title function_">on</span>(<span class="hljs-string">'close'</span>, <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'WebSocket closed:'</span>, event.<span class="hljs-property">code</span>, event.<span class="hljs-property">reason</span>);
    });
    
    wsClient.<span class="hljs-title function_">on</span>(<span class="hljs-string">'error'</span>, <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'WebSocket error:'</span>, event.<span class="hljs-property">error</span>);
    });
    
    <span class="hljs-comment">// å‘é€è¯·æ±‚-å“åº”æ¨¡å¼çš„æ¶ˆæ¯</span>
    wsClient.<span class="hljs-title function_">sendWithResponse</span>({ <span class="hljs-attr">type</span>: <span class="hljs-string">'ping'</span> })
      .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">response</span> =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Response:'</span>, response))
      .<span class="hljs-title function_">catch</span>(<span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Request failed:'</span>, error));
    
    <span class="hljs-comment">// è·å–çŠ¶æ€</span>
    <span class="hljs-keyword">const</span> status = wsClient.<span class="hljs-title function_">getStatus</span>();
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'WebSocket status:'</span>, status);
    
    <span class="hljs-keyword">return</span> wsClient;
  }
}
</code></pre>
<h5 data-id="heading-12">4.2 WebSocketé‡è¿ä¸æ¶ˆæ¯å¯é æ€§</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">ReliableWebSocket</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">WebSocketClient</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">url, options = {}</span>) {
    <span class="hljs-keyword">const</span> defaultOptions = {
      <span class="hljs-attr">messageRetention</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">maxMessageQueueSize</span>: <span class="hljs-number">1000</span>,
      <span class="hljs-attr">messageExpiry</span>: <span class="hljs-number">5</span> * <span class="hljs-number">60</span> * <span class="hljs-number">1000</span>, <span class="hljs-comment">// 5åˆ†é’Ÿ</span>
      <span class="hljs-attr">deliveryGuarantee</span>: <span class="hljs-string">'at-least-once'</span>, <span class="hljs-comment">// 'at-most-once', 'at-least-once', 'exactly-once'</span>
      <span class="hljs-attr">requireAcknowledgement</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">acknowledgementTimeout</span>: <span class="hljs-number">5000</span>,
      ...options
    };
    
    <span class="hljs-variable language_">super</span>(url, defaultOptions);
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">pendingMessages</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">acknowledgedMessages</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">messageSequence</span> = <span class="hljs-number">0</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">lastAcknowledgedSequence</span> = <span class="hljs-number">0</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">acknowledgementTimeouts</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>();
    
    <span class="hljs-comment">// è®¾ç½®æ¶ˆæ¯ç¡®è®¤ç›‘å¬</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setupAcknowledgementListener</span>();
  }
  
  <span class="hljs-comment">// å‘é€å¯é æ¶ˆæ¯</span>
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">sendReliable</span>(<span class="hljs-params">data, options = {}</span>) {
    <span class="hljs-keyword">const</span> {
      requireAcknowledgement = <span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span>.<span class="hljs-property">requireAcknowledgement</span>,
      acknowledgementTimeout = <span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span>.<span class="hljs-property">acknowledgementTimeout</span>,
      maxRetries = <span class="hljs-number">3</span>,
      retryDelay = <span class="hljs-number">1000</span>
    } = options;
    
    <span class="hljs-comment">// ç”Ÿæˆæ¶ˆæ¯IDå’Œåºåˆ—å·</span>
    <span class="hljs-keyword">const</span> messageId = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">generateMessageId</span>();
    <span class="hljs-keyword">const</span> sequenceNumber = <span class="hljs-variable language_">this</span>.<span class="hljs-property">messageSequence</span>++;
    
    <span class="hljs-comment">// åˆ›å»ºæ¶ˆæ¯å¯¹è±¡</span>
    <span class="hljs-keyword">const</span> message = {
      <span class="hljs-attr">id</span>: messageId,
      <span class="hljs-attr">seq</span>: sequenceNumber,
      data,
      <span class="hljs-attr">timestamp</span>: <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>(),
      <span class="hljs-attr">retryCount</span>: <span class="hljs-number">0</span>,
      <span class="hljs-attr">status</span>: <span class="hljs-string">'pending'</span>
    };
    
    <span class="hljs-comment">// å¦‚æœéœ€è¦ç¡®è®¤ï¼Œæ·»åŠ åˆ°å¾…å¤„ç†æ¶ˆæ¯åˆ—è¡¨</span>
    <span class="hljs-keyword">if</span> (requireAcknowledgement) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">pendingMessages</span>.<span class="hljs-title function_">set</span>(messageId, message);
      
      <span class="hljs-comment">// è®¾ç½®ç¡®è®¤è¶…æ—¶</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setAcknowledgementTimeout</span>(messageId, acknowledgementTimeout);
    }
    
    <span class="hljs-comment">// å°è£…å‘é€çš„æ¶ˆæ¯</span>
    <span class="hljs-keyword">const</span> wrappedMessage = {
      <span class="hljs-attr">type</span>: <span class="hljs-string">'data'</span>,
      <span class="hljs-attr">reliable</span>: requireAcknowledgement,
      messageId,
      sequenceNumber,
      data
    };
    
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">sendJson</span>(wrappedMessage);
      message.<span class="hljs-property">status</span> = <span class="hljs-string">'sent'</span>;
      
      <span class="hljs-comment">// å¦‚æœéœ€è¦ç¡®è®¤ï¼Œç­‰å¾…ç¡®è®¤</span>
      <span class="hljs-keyword">if</span> (requireAcknowledgement) {
        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">waitForAcknowledgement</span>(messageId, acknowledgementTimeout);
      }
      
      <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>({ messageId, <span class="hljs-attr">status</span>: <span class="hljs-string">'sent'</span> });
    } <span class="hljs-keyword">catch</span> (error) {
      message.<span class="hljs-property">status</span> = <span class="hljs-string">'failed'</span>;
      message.<span class="hljs-property">error</span> = error;
      
      <span class="hljs-comment">// é‡è¯•é€»è¾‘</span>
      <span class="hljs-keyword">if</span> (maxRetries &gt; <span class="hljs-number">0</span>) {
        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">retrySendReliable</span>(message, {
          maxRetries,
          retryDelay,
          requireAcknowledgement
        });
      }
      
      <span class="hljs-keyword">throw</span> error;
    }
  }
  
  <span class="hljs-comment">// ç­‰å¾…æ¶ˆæ¯ç¡®è®¤</span>
  <span class="hljs-title function_">waitForAcknowledgement</span>(<span class="hljs-params">messageId, timeout</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
      <span class="hljs-comment">// æ£€æŸ¥æ˜¯å¦å·²ç»ç¡®è®¤</span>
      <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">acknowledgedMessages</span>.<span class="hljs-title function_">has</span>(messageId)) {
        <span class="hljs-title function_">resolve</span>({ messageId, <span class="hljs-attr">status</span>: <span class="hljs-string">'acknowledged'</span> });
        <span class="hljs-keyword">return</span>;
      }
      
      <span class="hljs-comment">// è®¾ç½®è¶…æ—¶</span>
      <span class="hljs-keyword">const</span> timeoutId = <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
        <span class="hljs-keyword">const</span> message = <span class="hljs-variable language_">this</span>.<span class="hljs-property">pendingMessages</span>.<span class="hljs-title function_">get</span>(messageId);
        
        <span class="hljs-keyword">if</span> (message) {
          message.<span class="hljs-property">status</span> = <span class="hljs-string">'timeout'</span>;
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">pendingMessages</span>.<span class="hljs-title function_">delete</span>(messageId);
        }
        
        <span class="hljs-title function_">reject</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">`Acknowledgement timeout for message <span class="hljs-subst">${messageId}</span>`</span>));
      }, timeout);
      
      <span class="hljs-comment">// ç›‘å¬ç¡®è®¤äº‹ä»¶</span>
      <span class="hljs-keyword">const</span> <span class="hljs-title function_">acknowledgementListener</span> = (<span class="hljs-params">ack</span>) =&gt; {
        <span class="hljs-keyword">if</span> (ack.<span class="hljs-property">messageId</span> === messageId) {
          <span class="hljs-built_in">clearTimeout</span>(timeoutId);
          <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">off</span>(<span class="hljs-string">'acknowledgement'</span>, acknowledgementListener);
          <span class="hljs-title function_">resolve</span>({ messageId, <span class="hljs-attr">status</span>: <span class="hljs-string">'acknowledged'</span> });
        }
      };
      
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">on</span>(<span class="hljs-string">'acknowledgement'</span>, acknowledgementListener);
    });
  }
  
  <span class="hljs-comment">// é‡è¯•å‘é€å¯é æ¶ˆæ¯</span>
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">retrySendReliable</span>(<span class="hljs-params">message, options</span>) {
    <span class="hljs-keyword">const</span> {
      maxRetries,
      retryDelay,
      requireAcknowledgement
    } = options;
    
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> attempt = <span class="hljs-number">1</span>; attempt &lt;= maxRetries; attempt++) {
      message.<span class="hljs-property">retryCount</span> = attempt;
      message.<span class="hljs-property">status</span> = <span class="hljs-string">'retrying'</span>;
      
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Retrying message <span class="hljs-subst">${message.id}</span> (attempt <span class="hljs-subst">${attempt}</span>/<span class="hljs-subst">${maxRetries}</span>)`</span>);
      
      <span class="hljs-comment">// ç­‰å¾…é‡è¯•å»¶è¿Ÿ</span>
      <span class="hljs-keyword">await</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function"><span class="hljs-params">resolve</span> =&gt;</span> <span class="hljs-built_in">setTimeout</span>(resolve, retryDelay * attempt));
      
      <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">const</span> wrappedMessage = {
          <span class="hljs-attr">type</span>: <span class="hljs-string">'data'</span>,
          <span class="hljs-attr">reliable</span>: requireAcknowledgement,
          <span class="hljs-attr">messageId</span>: message.<span class="hljs-property">id</span>,
          <span class="hljs-attr">sequenceNumber</span>: message.<span class="hljs-property">seq</span>,
          <span class="hljs-attr">data</span>: message.<span class="hljs-property">data</span>,
          <span class="hljs-attr">retry</span>: attempt
        };
        
        <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">sendJson</span>(wrappedMessage);
        message.<span class="hljs-property">status</span> = <span class="hljs-string">'sent'</span>;
        
        <span class="hljs-comment">// å¦‚æœéœ€è¦ç¡®è®¤ï¼Œç­‰å¾…ç¡®è®¤</span>
        <span class="hljs-keyword">if</span> (requireAcknowledgement) {
          <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">waitForAcknowledgement</span>(
            message.<span class="hljs-property">id</span>,
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span>.<span class="hljs-property">acknowledgementTimeout</span>
          );
          
          <span class="hljs-keyword">return</span> result;
        }
        
        <span class="hljs-keyword">return</span> { <span class="hljs-attr">messageId</span>: message.<span class="hljs-property">id</span>, <span class="hljs-attr">status</span>: <span class="hljs-string">'sent'</span> };
      } <span class="hljs-keyword">catch</span> (error) {
        message.<span class="hljs-property">status</span> = <span class="hljs-string">'failed'</span>;
        message.<span class="hljs-property">error</span> = error;
        
        <span class="hljs-keyword">if</span> (attempt === maxRetries) {
          <span class="hljs-keyword">throw</span> error;
        }
      }
    }
    
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">`Failed to send message after <span class="hljs-subst">${maxRetries}</span> retries`</span>);
  }
  
  <span class="hljs-comment">// è®¾ç½®ç¡®è®¤è¶…æ—¶</span>
  <span class="hljs-title function_">setAcknowledgementTimeout</span>(<span class="hljs-params">messageId, timeout</span>) {
    <span class="hljs-keyword">const</span> timeoutId = <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
      <span class="hljs-keyword">const</span> message = <span class="hljs-variable language_">this</span>.<span class="hljs-property">pendingMessages</span>.<span class="hljs-title function_">get</span>(messageId);
      
      <span class="hljs-keyword">if</span> (message &amp;&amp; message.<span class="hljs-property">status</span> !== <span class="hljs-string">'acknowledged'</span>) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(<span class="hljs-string">`Acknowledgement timeout for message <span class="hljs-subst">${messageId}</span>`</span>);
        
        <span class="hljs-comment">// è§¦å‘è¶…æ—¶äº‹ä»¶</span>
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">emit</span>(<span class="hljs-string">'acknowledgement_timeout'</span>, {
          messageId,
          message,
          <span class="hljs-attr">timestamp</span>: <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>()
        });
        
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">pendingMessages</span>.<span class="hljs-title function_">delete</span>(messageId);
      }
      
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">acknowledgementTimeouts</span>.<span class="hljs-title function_">delete</span>(messageId);
    }, timeout);
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">acknowledgementTimeouts</span>.<span class="hljs-title function_">set</span>(messageId, timeoutId);
  }
  
  <span class="hljs-comment">// æ¸…ç†ç¡®è®¤è¶…æ—¶</span>
  <span class="hljs-title function_">clearAcknowledgementTimeout</span>(<span class="hljs-params">messageId</span>) {
    <span class="hljs-keyword">const</span> timeoutId = <span class="hljs-variable language_">this</span>.<span class="hljs-property">acknowledgementTimeouts</span>.<span class="hljs-title function_">get</span>(messageId);
    
    <span class="hljs-keyword">if</span> (timeoutId) {
      <span class="hljs-built_in">clearTimeout</span>(timeoutId);
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">acknowledgementTimeouts</span>.<span class="hljs-title function_">delete</span>(messageId);
    }
  }
  
  <span class="hljs-comment">// è®¾ç½®æ¶ˆæ¯ç¡®è®¤ç›‘å¬å™¨</span>
  <span class="hljs-title function_">setupAcknowledgementListener</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// ç›‘å¬ç¡®è®¤æ¶ˆæ¯</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">on</span>(<span class="hljs-string">'message'</span>, <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {
      <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">const</span> message = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(event.<span class="hljs-property">data</span>);
        
        <span class="hljs-keyword">if</span> (message.<span class="hljs-property">type</span> === <span class="hljs-string">'acknowledgement'</span>) {
          <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">handleAcknowledgement</span>(message);
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (message.<span class="hljs-property">type</span> === <span class="hljs-string">'data'</span> &amp;&amp; message.<span class="hljs-property">reliable</span>) {
          <span class="hljs-comment">// æ”¶åˆ°å¯é æ¶ˆæ¯ï¼Œå‘é€ç¡®è®¤</span>
          <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">sendAcknowledgement</span>(message.<span class="hljs-property">messageId</span>, message.<span class="hljs-property">sequenceNumber</span>);
        }
      } <span class="hljs-keyword">catch</span> (error) {
        <span class="hljs-comment">// ä¸æ˜¯JSONæ¶ˆæ¯ï¼Œå¿½ç•¥</span>
      }
    });
    
    <span class="hljs-comment">// ç›‘å¬è¿æ¥æ‰“å¼€äº‹ä»¶ï¼Œé‡æ–°å‘é€æœªç¡®è®¤çš„æ¶ˆæ¯</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">on</span>(<span class="hljs-string">'open'</span>, <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">resendUnacknowledgedMessages</span>();
    });
  }
  
  <span class="hljs-comment">// å¤„ç†ç¡®è®¤æ¶ˆæ¯</span>
  <span class="hljs-title function_">handleAcknowledgement</span>(<span class="hljs-params">ackMessage</span>) {
    <span class="hljs-keyword">const</span> { messageId, sequenceNumber } = ackMessage;
    
    <span class="hljs-comment">// æ¸…ç†ç¡®è®¤è¶…æ—¶</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">clearAcknowledgementTimeout</span>(messageId);
    
    <span class="hljs-comment">// æ›´æ–°æœ€åç¡®è®¤çš„åºåˆ—å·</span>
    <span class="hljs-keyword">if</span> (sequenceNumber &gt; <span class="hljs-variable language_">this</span>.<span class="hljs-property">lastAcknowledgedSequence</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">lastAcknowledgedSequence</span> = sequenceNumber;
    }
    
    <span class="hljs-comment">// ä»å¾…å¤„ç†æ¶ˆæ¯ä¸­ç§»é™¤</span>
    <span class="hljs-keyword">const</span> message = <span class="hljs-variable language_">this</span>.<span class="hljs-property">pendingMessages</span>.<span class="hljs-title function_">get</span>(messageId);
    <span class="hljs-keyword">if</span> (message) {
      message.<span class="hljs-property">status</span> = <span class="hljs-string">'acknowledged'</span>;
      message.<span class="hljs-property">acknowledgedAt</span> = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">pendingMessages</span>.<span class="hljs-title function_">delete</span>(messageId);
    }
    
    <span class="hljs-comment">// æ·»åŠ åˆ°å·²ç¡®è®¤æ¶ˆæ¯é›†åˆ</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">acknowledgedMessages</span>.<span class="hljs-title function_">add</span>(messageId);
    
    <span class="hljs-comment">// è§¦å‘ç¡®è®¤äº‹ä»¶</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">emit</span>(<span class="hljs-string">'acknowledgement'</span>, {
      messageId,
      sequenceNumber,
      <span class="hljs-attr">timestamp</span>: <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>(),
      message
    });
    
    <span class="hljs-comment">// æ¸…ç†è¿‡æœŸçš„å·²ç¡®è®¤æ¶ˆæ¯</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">cleanupAcknowledgedMessages</span>();
  }
  
  <span class="hljs-comment">// å‘é€ç¡®è®¤æ¶ˆæ¯</span>
  <span class="hljs-title function_">sendAcknowledgement</span>(<span class="hljs-params">messageId, sequenceNumber</span>) {
    <span class="hljs-keyword">const</span> ackMessage = {
      <span class="hljs-attr">type</span>: <span class="hljs-string">'acknowledgement'</span>,
      messageId,
      sequenceNumber,
      <span class="hljs-attr">timestamp</span>: <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>()
    };
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">sendJson</span>(ackMessage).<span class="hljs-title function_">catch</span>(<span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(<span class="hljs-string">'Failed to send acknowledgement:'</span>, error);
    });
  }
  
  <span class="hljs-comment">// é‡æ–°å‘é€æœªç¡®è®¤çš„æ¶ˆæ¯</span>
  <span class="hljs-title function_">resendUnacknowledgedMessages</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> now = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();
    <span class="hljs-keyword">const</span> unacknowledged = [];
    
    <span class="hljs-comment">// æ”¶é›†æœªç¡®è®¤çš„æ¶ˆæ¯</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">pendingMessages</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">message, messageId</span>) =&gt;</span> {
      <span class="hljs-comment">// æ£€æŸ¥æ¶ˆæ¯æ˜¯å¦è¿‡æœŸ</span>
      <span class="hljs-keyword">if</span> (now - message.<span class="hljs-property">timestamp</span> &gt; <span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span>.<span class="hljs-property">messageExpiry</span>) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Message <span class="hljs-subst">${messageId}</span> expired, removing`</span>);
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">pendingMessages</span>.<span class="hljs-title function_">delete</span>(messageId);
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">clearAcknowledgementTimeout</span>(messageId);
        <span class="hljs-keyword">return</span>;
      }
      
      <span class="hljs-comment">// æ£€æŸ¥æ¶ˆæ¯æ˜¯å¦éœ€è¦é‡å‘</span>
      <span class="hljs-keyword">if</span> (message.<span class="hljs-property">status</span> === <span class="hljs-string">'sent'</span> || message.<span class="hljs-property">status</span> === <span class="hljs-string">'pending'</span>) {
        unacknowledged.<span class="hljs-title function_">push</span>(message);
      }
    });
    
    <span class="hljs-comment">// é‡æ–°å‘é€æœªç¡®è®¤çš„æ¶ˆæ¯</span>
    unacknowledged.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">message</span> =&gt;</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Resending unacknowledged message <span class="hljs-subst">${message.id}</span>`</span>);
      
      <span class="hljs-keyword">const</span> wrappedMessage = {
        <span class="hljs-attr">type</span>: <span class="hljs-string">'data'</span>,
        <span class="hljs-attr">reliable</span>: <span class="hljs-literal">true</span>,
        <span class="hljs-attr">messageId</span>: message.<span class="hljs-property">id</span>,
        <span class="hljs-attr">sequenceNumber</span>: message.<span class="hljs-property">seq</span>,
        <span class="hljs-attr">data</span>: message.<span class="hljs-property">data</span>,
        <span class="hljs-attr">resent</span>: <span class="hljs-literal">true</span>
      };
      
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">sendJson</span>(wrappedMessage).<span class="hljs-title function_">catch</span>(<span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(<span class="hljs-string">`Failed to resend message <span class="hljs-subst">${message.id}</span>:`</span>, error);
      });
    });
  }
  
  <span class="hljs-comment">// æ¸…ç†å·²ç¡®è®¤çš„æ¶ˆæ¯</span>
  <span class="hljs-title function_">cleanupAcknowledgedMessages</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> maxSize = <span class="hljs-number">1000</span>; <span class="hljs-comment">// æœ€å¤šä¿ç•™1000ä¸ªå·²ç¡®è®¤æ¶ˆæ¯</span>
    
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">acknowledgedMessages</span>.<span class="hljs-property">size</span> &gt; maxSize) {
      <span class="hljs-comment">// è½¬æ¢ä¸ºæ•°ç»„ï¼Œæ’åºï¼Œåˆ é™¤æœ€æ—§çš„</span>
      <span class="hljs-keyword">const</span> sorted = <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">from</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">acknowledgedMessages</span>)
        .<span class="hljs-title function_">slice</span>(-maxSize);
      
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">acknowledgedMessages</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>(sorted);
    }
  }
  
  <span class="hljs-comment">// è¦†ç›–çˆ¶ç±»çš„sendæ–¹æ³•ï¼Œæ·»åŠ å¯é æ€§æ”¯æŒ</span>
  <span class="hljs-title function_">send</span>(<span class="hljs-params">data, options = {}</span>) {
    <span class="hljs-keyword">const</span> { reliable = <span class="hljs-literal">false</span>, ...sendOptions } = options;
    
    <span class="hljs-keyword">if</span> (reliable) {
      <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">sendReliable</span>(data, sendOptions);
    }
    
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">super</span>.<span class="hljs-title function_">send</span>(data, sendOptions);
  }
  
  <span class="hljs-comment">// è¦†ç›–çˆ¶ç±»çš„sendJsonæ–¹æ³•</span>
  <span class="hljs-title function_">sendJson</span>(<span class="hljs-params">data, options = {}</span>) {
    <span class="hljs-keyword">const</span> { reliable = <span class="hljs-literal">false</span>, ...sendOptions } = options;
    
    <span class="hljs-keyword">if</span> (reliable) {
      <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">sendReliable</span>(data, sendOptions);
    }
    
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">super</span>.<span class="hljs-title function_">sendJson</span>(data, sendOptions);
  }
  
  <span class="hljs-comment">// è·å–å¯é æ¶ˆæ¯ç»Ÿè®¡</span>
  <span class="hljs-title function_">getReliabilityStats</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> now = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();
    <span class="hljs-keyword">let</span> pendingCount = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">let</span> acknowledgedCount = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">let</span> failedCount = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">let</span> expiredCount = <span class="hljs-number">0</span>;
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">pendingMessages</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">message</span> =&gt;</span> {
      <span class="hljs-keyword">if</span> (now - message.<span class="hljs-property">timestamp</span> &gt; <span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span>.<span class="hljs-property">messageExpiry</span>) {
        expiredCount++;
      } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (message.<span class="hljs-property">status</span> === <span class="hljs-string">'acknowledged'</span>) {
        acknowledgedCount++;
      } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (message.<span class="hljs-property">status</span> === <span class="hljs-string">'failed'</span>) {
        failedCount++;
      } <span class="hljs-keyword">else</span> {
        pendingCount++;
      }
    });
    
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">pendingMessages</span>: pendingCount,
      <span class="hljs-attr">acknowledgedMessages</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">acknowledgedMessages</span>.<span class="hljs-property">size</span>,
      <span class="hljs-attr">failedMessages</span>: failedCount,
      <span class="hljs-attr">expiredMessages</span>: expiredCount,
      <span class="hljs-attr">totalSentMessages</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">messageSequence</span>,
      <span class="hljs-attr">lastAcknowledgedSequence</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">lastAcknowledgedSequence</span>,
      <span class="hljs-attr">messageQueueSize</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">messageQueue</span>.<span class="hljs-property">length</span>,
      <span class="hljs-attr">acknowledgementTimeouts</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">acknowledgementTimeouts</span>.<span class="hljs-property">size</span>
    };
  }
  
  <span class="hljs-comment">// æ¸…ç†æ‰€æœ‰å¾…å¤„ç†æ¶ˆæ¯</span>
  <span class="hljs-title function_">cleanupAllMessages</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">pendingMessages</span>.<span class="hljs-title function_">clear</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">acknowledgedMessages</span>.<span class="hljs-title function_">clear</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">messageQueue</span> = [];
    
    <span class="hljs-comment">// æ¸…ç†æ‰€æœ‰è¶…æ—¶å®šæ—¶å™¨</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">acknowledgementTimeouts</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">timeoutId</span> =&gt;</span> {
      <span class="hljs-built_in">clearTimeout</span>(timeoutId);
    });
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">acknowledgementTimeouts</span>.<span class="hljs-title function_">clear</span>();
  }
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">ReliableWebSocketExample</span> {
  <span class="hljs-keyword">static</span> <span class="hljs-title function_">demonstrate</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// åˆ›å»ºå¯é WebSocketå®¢æˆ·ç«¯</span>
    <span class="hljs-keyword">const</span> reliableWs = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ReliableWebSocket</span>(<span class="hljs-string">'wss://echo.websocket.org'</span>, {
      <span class="hljs-attr">requireAcknowledgement</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">acknowledgementTimeout</span>: <span class="hljs-number">3000</span>,
      <span class="hljs-attr">messageExpiry</span>: <span class="hljs-number">60000</span>, <span class="hljs-comment">// 1åˆ†é’Ÿ</span>
      <span class="hljs-attr">reconnect</span>: <span class="hljs-literal">true</span>
    });
    
    <span class="hljs-comment">// ç›‘å¬ç¡®è®¤äº‹ä»¶</span>
    reliableWs.<span class="hljs-title function_">on</span>(<span class="hljs-string">'acknowledgement'</span>, <span class="hljs-function">(<span class="hljs-params">ack</span>) =&gt;</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Message acknowledged:'</span>, ack.<span class="hljs-property">messageId</span>);
    });
    
    reliableWs.<span class="hljs-title function_">on</span>(<span class="hljs-string">'acknowledgement_timeout'</span>, <span class="hljs-function">(<span class="hljs-params">timeout</span>) =&gt;</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(<span class="hljs-string">'Acknowledgement timeout:'</span>, timeout.<span class="hljs-property">messageId</span>);
    });
    
    <span class="hljs-comment">// å‘é€å¯é æ¶ˆæ¯</span>
    reliableWs.<span class="hljs-title function_">sendReliable</span>({ <span class="hljs-attr">type</span>: <span class="hljs-string">'test'</span>, <span class="hljs-attr">data</span>: <span class="hljs-string">'Hello reliable WebSocket!'</span> })
      .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">result</span> =&gt;</span> {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Reliable message sent and acknowledged:'</span>, result);
      })
      .<span class="hljs-title function_">catch</span>(<span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Failed to send reliable message:'</span>, error);
      });
    
    <span class="hljs-comment">// è·å–å¯é æ€§ç»Ÿè®¡</span>
    <span class="hljs-keyword">const</span> stats = reliableWs.<span class="hljs-title function_">getReliabilityStats</span>();
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Reliability stats:'</span>, stats);
    
    <span class="hljs-keyword">return</span> reliableWs;
  }
}
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æµè§ˆå™¨ç½‘ç»œè¯·æ±‚ APIï¼šå…¨é¢è§£æä¸é«˜çº§å°è£…(2)]]></title>    <link>https://juejin.cn/post/7584807992031051818</link>    <guid>https://juejin.cn/post/7584807992031051818</guid>    <pubDate>2025-12-18T07:45:25.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7584807992031051818" data-draft-id="7584817405228679209" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æµè§ˆå™¨ç½‘ç»œè¯·æ±‚ APIï¼šå…¨é¢è§£æä¸é«˜çº§å°è£…(2)"/> <meta itemprop="keywords" content="å‰ç«¯,axios,WebSocket"/> <meta itemprop="datePublished" content="2025-12-18T07:45:25.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="1024è‚¥å®…"/> <meta itemprop="url" content="https://juejin.cn/user/588993964030574"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æµè§ˆå™¨ç½‘ç»œè¯·æ±‚ APIï¼šå…¨é¢è§£æä¸é«˜çº§å°è£…(2)
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/588993964030574/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    1024è‚¥å®…
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-18T07:45:25.000Z" title="Thu Dec 18 2025 07:45:25 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-18
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æœ¬æ–‡æ¥ä¸Šä¸€ç¯‡ <a href="https://juejin.cn/spost/7584861353804070948" target="_blank" title="https://juejin.cn/spost/7584861353804070948">æµè§ˆå™¨ç½‘ç»œè¯·æ±‚ APIï¼šå…¨é¢è§£æä¸é«˜çº§å°è£…(1)</a></p>
<h4 data-id="heading-0">äº”ã€ç½‘ç»œè¯·æ±‚ç›‘æ§ä¸è°ƒè¯•</h4>
<h5 data-id="heading-1">5.1 ç½‘ç»œè¯·æ±‚ç›‘æ§å™¨</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">NetworkRequestMonitor</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">options = {}</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span> = {
      <span class="hljs-attr">enabled</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">logLevel</span>: <span class="hljs-string">'info'</span>, <span class="hljs-comment">// 'debug', 'info', 'warn', 'error'</span>
      <span class="hljs-attr">capturePerformance</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">captureHeaders</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">captureBody</span>: <span class="hljs-literal">false</span>, <span class="hljs-comment">// æ³¨æ„ï¼šæ•æ„Ÿæ•°æ®ï¼</span>
      <span class="hljs-attr">maxEntries</span>: <span class="hljs-number">1000</span>,
      <span class="hljs-attr">autoExport</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">exportInterval</span>: <span class="hljs-number">60000</span>, <span class="hljs-comment">// 1åˆ†é’Ÿ</span>
      ...options
    };
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">requests</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">performanceEntries</span> = [];
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">eventListeners</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">stats</span> = {
      <span class="hljs-attr">totalRequests</span>: <span class="hljs-number">0</span>,
      <span class="hljs-attr">successfulRequests</span>: <span class="hljs-number">0</span>,
      <span class="hljs-attr">failedRequests</span>: <span class="hljs-number">0</span>,
      <span class="hljs-attr">averageResponseTime</span>: <span class="hljs-number">0</span>,
      <span class="hljs-attr">totalDataTransferred</span>: <span class="hljs-number">0</span>
    };
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">init</span>();
  }
  
  <span class="hljs-title function_">init</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span>.<span class="hljs-property">enabled</span>) <span class="hljs-keyword">return</span>;
    
    <span class="hljs-comment">// ç›‘å¬æ‰€æœ‰Fetchè¯·æ±‚</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">interceptFetch</span>();
    
    <span class="hljs-comment">// ç›‘å¬æ‰€æœ‰XMLHttpRequestè¯·æ±‚</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">interceptXHR</span>();
    
    <span class="hljs-comment">// ç›‘å¬WebSocketè¿æ¥</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">interceptWebSocket</span>();
    
    <span class="hljs-comment">// è®¾ç½®è‡ªåŠ¨å¯¼å‡º</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span>.<span class="hljs-property">autoExport</span>) {
      <span class="hljs-built_in">setInterval</span>(<span class="hljs-function">() =&gt;</span> {
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">exportData</span>();
      }, <span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span>.<span class="hljs-property">exportInterval</span>);
    }
  }
  
  <span class="hljs-title function_">interceptFetch</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> originalFetch = <span class="hljs-variable language_">window</span>.<span class="hljs-property">fetch</span>;
    
    <span class="hljs-variable language_">window</span>.<span class="hljs-property">fetch</span> = <span class="hljs-keyword">async</span> (...args) =&gt; {
      <span class="hljs-keyword">const</span> [url, options = {}] = args;
      <span class="hljs-keyword">const</span> requestId = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">generateRequestId</span>(<span class="hljs-string">'fetch'</span>, url, options);
      
      <span class="hljs-comment">// è®°å½•è¯·æ±‚å¼€å§‹</span>
      <span class="hljs-keyword">const</span> requestInfo = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">recordRequestStart</span>(requestId, {
        <span class="hljs-attr">type</span>: <span class="hljs-string">'fetch'</span>,
        url,
        <span class="hljs-attr">method</span>: options.<span class="hljs-property">method</span> || <span class="hljs-string">'GET'</span>,
        <span class="hljs-attr">headers</span>: options.<span class="hljs-property">headers</span> || {},
        <span class="hljs-attr">body</span>: options.<span class="hljs-property">body</span>,
        <span class="hljs-attr">timestamp</span>: <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>()
      });
      
      <span class="hljs-keyword">try</span> {
        <span class="hljs-comment">// æ·»åŠ æ€§èƒ½æ ‡è®°</span>
        <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span>.<span class="hljs-property">capturePerformance</span>) {
          performance.<span class="hljs-title function_">mark</span>(<span class="hljs-string">`fetch_start_<span class="hljs-subst">${requestId}</span>`</span>);
        }
        
        <span class="hljs-comment">// æ‰§è¡ŒåŸå§‹fetch</span>
        <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> originalFetch.<span class="hljs-title function_">apply</span>(<span class="hljs-variable language_">window</span>, args);
        
        <span class="hljs-comment">// å…‹éš†å“åº”ä»¥è¯»å–æ•°æ®</span>
        <span class="hljs-keyword">const</span> clonedResponse = response.<span class="hljs-title function_">clone</span>();
        
        <span class="hljs-comment">// è®°å½•è¯·æ±‚æˆåŠŸ</span>
        <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">recordRequestSuccess</span>(requestId, clonedResponse, requestInfo);
        
        <span class="hljs-keyword">return</span> response;
      } <span class="hljs-keyword">catch</span> (error) {
        <span class="hljs-comment">// è®°å½•è¯·æ±‚å¤±è´¥</span>
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">recordRequestFailure</span>(requestId, error, requestInfo);
        <span class="hljs-keyword">throw</span> error;
      }
    };
  }
  
  <span class="hljs-title function_">interceptXHR</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> originalXHR = <span class="hljs-variable language_">window</span>.<span class="hljs-property">XMLHttpRequest</span>;
    
    <span class="hljs-keyword">const</span> <span class="hljs-title class_">XHRMonitor</span> = <span class="hljs-keyword">class</span> <span class="hljs-title class_">extends</span> originalXHR {
      <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
        <span class="hljs-variable language_">super</span>();
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">_monitorRequestId</span> = <span class="hljs-literal">null</span>;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">_monitorStartTime</span> = <span class="hljs-literal">null</span>;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">_monitorRequestInfo</span> = <span class="hljs-literal">null</span>;
        
        <span class="hljs-comment">// é‡å†™openæ–¹æ³•</span>
        <span class="hljs-keyword">const</span> originalOpen = <span class="hljs-variable language_">this</span>.<span class="hljs-property">open</span>;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">open</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">method, url, ...rest</span>) {
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">_monitorRequestId</span> = <span class="hljs-title class_">NetworkRequestMonitor</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-title function_">generateRequestId</span>(
            <span class="hljs-string">'xhr'</span>, url, { method }
          );
          
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">_monitorStartTime</span> = performance.<span class="hljs-title function_">now</span>();
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">_monitorRequestInfo</span> = <span class="hljs-title class_">NetworkRequestMonitor</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-title function_">recordRequestStart</span>(
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">_monitorRequestId</span>,
            {
              <span class="hljs-attr">type</span>: <span class="hljs-string">'xhr'</span>,
              url,
              method,
              <span class="hljs-attr">timestamp</span>: <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>()
            }
          );
          
          <span class="hljs-keyword">return</span> originalOpen.<span class="hljs-title function_">apply</span>(<span class="hljs-variable language_">this</span>, [method, url, ...rest]);
        };
        
        <span class="hljs-comment">// é‡å†™sendæ–¹æ³•</span>
        <span class="hljs-keyword">const</span> originalSend = <span class="hljs-variable language_">this</span>.<span class="hljs-property">send</span>;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">send</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">body</span>) {
          <span class="hljs-keyword">if</span> (body) {
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">_monitorRequestInfo</span>.<span class="hljs-property">body</span> = body;
          }
          
          <span class="hljs-comment">// ç›‘å¬äº‹ä»¶</span>
          <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'load'</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
            <span class="hljs-title class_">NetworkRequestMonitor</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-title function_">recordXHRSuccess</span>(
              <span class="hljs-variable language_">this</span>.<span class="hljs-property">_monitorRequestId</span>,
              <span class="hljs-variable language_">this</span>,
              <span class="hljs-variable language_">this</span>.<span class="hljs-property">_monitorRequestInfo</span>
            );
          });
          
          <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'error'</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
            <span class="hljs-title class_">NetworkRequestMonitor</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-title function_">recordXHRFailure</span>(
              <span class="hljs-variable language_">this</span>.<span class="hljs-property">_monitorRequestId</span>,
              <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'XHR request failed'</span>),
              <span class="hljs-variable language_">this</span>.<span class="hljs-property">_monitorRequestInfo</span>
            );
          });
          
          <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'timeout'</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
            <span class="hljs-title class_">NetworkRequestMonitor</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-title function_">recordXHRFailure</span>(
              <span class="hljs-variable language_">this</span>.<span class="hljs-property">_monitorRequestId</span>,
              <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'XHR request timeout'</span>),
              <span class="hljs-variable language_">this</span>.<span class="hljs-property">_monitorRequestInfo</span>
            );
          });
          
          <span class="hljs-keyword">return</span> originalSend.<span class="hljs-title function_">apply</span>(<span class="hljs-variable language_">this</span>, <span class="hljs-variable language_">arguments</span>);
        };
      }
    };
    
    <span class="hljs-variable language_">window</span>.<span class="hljs-property">XMLHttpRequest</span> = <span class="hljs-title class_">XHRMonitor</span>;
  }
  
  <span class="hljs-title function_">interceptWebSocket</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> originalWebSocket = <span class="hljs-variable language_">window</span>.<span class="hljs-property">WebSocket</span>;
    
    <span class="hljs-keyword">const</span> <span class="hljs-title class_">WebSocketMonitor</span> = <span class="hljs-keyword">class</span> <span class="hljs-title class_">extends</span> originalWebSocket {
      <span class="hljs-title function_">constructor</span>(<span class="hljs-params">url, protocols</span>) {
        <span class="hljs-variable language_">super</span>(url, protocols);
        
        <span class="hljs-keyword">const</span> connectionId = <span class="hljs-title class_">NetworkRequestMonitor</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-title function_">generateRequestId</span>(
          <span class="hljs-string">'websocket'</span>, url, { protocols }
        );
        
        <span class="hljs-comment">// è®°å½•WebSocketè¿æ¥</span>
        <span class="hljs-keyword">const</span> connectionInfo = <span class="hljs-title class_">NetworkRequestMonitor</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-title function_">recordWebSocketConnection</span>(
          connectionId,
          {
            url,
            protocols,
            <span class="hljs-attr">timestamp</span>: <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>()
          }
        );
        
        <span class="hljs-comment">// ç›‘å¬WebSocketäº‹ä»¶</span>
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'open'</span>, <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {
          <span class="hljs-title class_">NetworkRequestMonitor</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-title function_">recordWebSocketEvent</span>(
            connectionId,
            <span class="hljs-string">'open'</span>,
            event,
            connectionInfo
          );
        });
        
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'message'</span>, <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {
          <span class="hljs-title class_">NetworkRequestMonitor</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-title function_">recordWebSocketMessage</span>(
            connectionId,
            event.<span class="hljs-property">data</span>,
            connectionInfo
          );
        });
        
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'error'</span>, <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {
          <span class="hljs-title class_">NetworkRequestMonitor</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-title function_">recordWebSocketEvent</span>(
            connectionId,
            <span class="hljs-string">'error'</span>,
            event,
            connectionInfo
          );
        });
        
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'close'</span>, <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {
          <span class="hljs-title class_">NetworkRequestMonitor</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-title function_">recordWebSocketEvent</span>(
            connectionId,
            <span class="hljs-string">'close'</span>,
            event,
            connectionInfo
          );
        });
        
        <span class="hljs-comment">// é‡å†™sendæ–¹æ³•ä»¥ç›‘æ§å‘é€çš„æ¶ˆæ¯</span>
        <span class="hljs-keyword">const</span> originalSend = <span class="hljs-variable language_">this</span>.<span class="hljs-property">send</span>;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">send</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">data</span>) {
          <span class="hljs-title class_">NetworkRequestMonitor</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-title function_">recordWebSocketSend</span>(
            connectionId,
            data,
            connectionInfo
          );
          
          <span class="hljs-keyword">return</span> originalSend.<span class="hljs-title function_">apply</span>(<span class="hljs-variable language_">this</span>, <span class="hljs-variable language_">arguments</span>);
        };
      }
    };
    
    <span class="hljs-variable language_">window</span>.<span class="hljs-property">WebSocket</span> = <span class="hljs-title class_">WebSocketMonitor</span>;
  }
  
  <span class="hljs-comment">// è®°å½•è¯·æ±‚å¼€å§‹</span>
  <span class="hljs-title function_">recordRequestStart</span>(<span class="hljs-params">requestId, info</span>) {
    <span class="hljs-keyword">const</span> requestInfo = {
      <span class="hljs-attr">id</span>: requestId,
      ...info,
      <span class="hljs-attr">startTime</span>: <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>(),
      <span class="hljs-attr">status</span>: <span class="hljs-string">'pending'</span>,
      <span class="hljs-attr">performanceMark</span>: <span class="hljs-string">`request_start_<span class="hljs-subst">${requestId}</span>`</span>
    };
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">requests</span>.<span class="hljs-title function_">set</span>(requestId, requestInfo);
    
    <span class="hljs-comment">// è§¦å‘äº‹ä»¶</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">emit</span>(<span class="hljs-string">'requestStart'</span>, requestInfo);
    
    <span class="hljs-comment">// æ€§èƒ½æ ‡è®°</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span>.<span class="hljs-property">capturePerformance</span>) {
      performance.<span class="hljs-title function_">mark</span>(requestInfo.<span class="hljs-property">performanceMark</span>);
    }
    
    <span class="hljs-keyword">return</span> requestInfo;
  }
  
  <span class="hljs-comment">// è®°å½•è¯·æ±‚æˆåŠŸ</span>
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">recordRequestSuccess</span>(<span class="hljs-params">requestId, response, requestInfo</span>) {
    <span class="hljs-keyword">const</span> endTime = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();
    <span class="hljs-keyword">const</span> duration = endTime - requestInfo.<span class="hljs-property">startTime</span>;
    
    <span class="hljs-comment">// è¯»å–å“åº”æ•°æ®</span>
    <span class="hljs-keyword">let</span> responseBody = <span class="hljs-literal">null</span>;
    <span class="hljs-keyword">let</span> responseSize = <span class="hljs-number">0</span>;
    
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span>.<span class="hljs-property">captureBody</span>) {
      <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">if</span> (response.<span class="hljs-property">headers</span>.<span class="hljs-title function_">get</span>(<span class="hljs-string">'content-type'</span>)?.<span class="hljs-title function_">includes</span>(<span class="hljs-string">'application/json'</span>)) {
          responseBody = <span class="hljs-keyword">await</span> response.<span class="hljs-title function_">json</span>();
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (response.<span class="hljs-property">headers</span>.<span class="hljs-title function_">get</span>(<span class="hljs-string">'content-type'</span>)?.<span class="hljs-title function_">includes</span>(<span class="hljs-string">'text/'</span>)) {
          responseBody = <span class="hljs-keyword">await</span> response.<span class="hljs-title function_">text</span>();
        }
        
        <span class="hljs-comment">// è®¡ç®—å“åº”å¤§å°</span>
        <span class="hljs-keyword">if</span> (responseBody) {
          responseSize = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Blob</span>([<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(responseBody)]).<span class="hljs-property">size</span>;
        }
      } <span class="hljs-keyword">catch</span> (error) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(<span class="hljs-string">'Failed to read response body:'</span>, error);
      }
    }
    
    <span class="hljs-comment">// æ›´æ–°è¯·æ±‚ä¿¡æ¯</span>
    requestInfo.<span class="hljs-property">status</span> = <span class="hljs-string">'success'</span>;
    requestInfo.<span class="hljs-property">endTime</span> = endTime;
    requestInfo.<span class="hljs-property">duration</span> = duration;
    requestInfo.<span class="hljs-property">response</span> = {
      <span class="hljs-attr">status</span>: response.<span class="hljs-property">status</span>,
      <span class="hljs-attr">statusText</span>: response.<span class="hljs-property">statusText</span>,
      <span class="hljs-attr">headers</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span>.<span class="hljs-property">captureHeaders</span> ? 
        <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">fromEntries</span>(response.<span class="hljs-property">headers</span>.<span class="hljs-title function_">entries</span>()) : {},
      <span class="hljs-attr">body</span>: responseBody,
      <span class="hljs-attr">size</span>: responseSize
    };
    
    <span class="hljs-comment">// æ›´æ–°ç»Ÿè®¡ä¿¡æ¯</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">updateStats</span>({
      <span class="hljs-attr">successful</span>: <span class="hljs-literal">true</span>,
      duration,
      <span class="hljs-attr">size</span>: responseSize
    });
    
    <span class="hljs-comment">// æ€§èƒ½æµ‹é‡</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span>.<span class="hljs-property">capturePerformance</span>) {
      performance.<span class="hljs-title function_">mark</span>(<span class="hljs-string">`request_end_<span class="hljs-subst">${requestId}</span>`</span>);
      performance.<span class="hljs-title function_">measure</span>(
        <span class="hljs-string">`request_<span class="hljs-subst">${requestId}</span>`</span>,
        requestInfo.<span class="hljs-property">performanceMark</span>,
        <span class="hljs-string">`request_end_<span class="hljs-subst">${requestId}</span>`</span>
      );
      
      <span class="hljs-comment">// ä¿å­˜æ€§èƒ½æ¡ç›®</span>
      <span class="hljs-keyword">const</span> measures = performance.<span class="hljs-title function_">getEntriesByName</span>(<span class="hljs-string">`request_<span class="hljs-subst">${requestId}</span>`</span>);
      <span class="hljs-keyword">if</span> (measures.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">performanceEntries</span>.<span class="hljs-title function_">push</span>(measures[<span class="hljs-number">0</span>]);
      }
    }
    
    <span class="hljs-comment">// è§¦å‘äº‹ä»¶</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">emit</span>(<span class="hljs-string">'requestSuccess'</span>, requestInfo);
    
    <span class="hljs-comment">// æ¸…ç†æ—§æ¡ç›®</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">cleanupOldEntries</span>();
  }
  
  <span class="hljs-comment">// è®°å½•XHRè¯·æ±‚æˆåŠŸ</span>
  <span class="hljs-title function_">recordXHRSuccess</span>(<span class="hljs-params">requestId, xhr, requestInfo</span>) {
    <span class="hljs-keyword">const</span> endTime = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();
    <span class="hljs-keyword">const</span> duration = endTime - requestInfo.<span class="hljs-property">startTime</span>;
    
    <span class="hljs-keyword">let</span> responseBody = <span class="hljs-literal">null</span>;
    <span class="hljs-keyword">let</span> responseSize = <span class="hljs-number">0</span>;
    
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span>.<span class="hljs-property">captureBody</span>) {
      <span class="hljs-keyword">try</span> {
        responseBody = xhr.<span class="hljs-property">responseText</span> || xhr.<span class="hljs-property">response</span>;
        
        <span class="hljs-keyword">if</span> (responseBody) {
          responseSize = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Blob</span>([responseBody]).<span class="hljs-property">size</span>;
        }
      } <span class="hljs-keyword">catch</span> (error) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(<span class="hljs-string">'Failed to read XHR response:'</span>, error);
      }
    }
    
    <span class="hljs-comment">// æ›´æ–°è¯·æ±‚ä¿¡æ¯</span>
    requestInfo.<span class="hljs-property">status</span> = <span class="hljs-string">'success'</span>;
    requestInfo.<span class="hljs-property">endTime</span> = endTime;
    requestInfo.<span class="hljs-property">duration</span> = duration;
    requestInfo.<span class="hljs-property">response</span> = {
      <span class="hljs-attr">status</span>: xhr.<span class="hljs-property">status</span>,
      <span class="hljs-attr">statusText</span>: xhr.<span class="hljs-property">statusText</span>,
      <span class="hljs-attr">headers</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span>.<span class="hljs-property">captureHeaders</span> ? 
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">parseXHRHeaders</span>(xhr.<span class="hljs-title function_">getAllResponseHeaders</span>()) : {},
      <span class="hljs-attr">body</span>: responseBody,
      <span class="hljs-attr">size</span>: responseSize
    };
    
    <span class="hljs-comment">// æ›´æ–°ç»Ÿè®¡ä¿¡æ¯</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">updateStats</span>({
      <span class="hljs-attr">successful</span>: <span class="hljs-literal">true</span>,
      duration,
      <span class="hljs-attr">size</span>: responseSize
    });
    
    <span class="hljs-comment">// è§¦å‘äº‹ä»¶</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">emit</span>(<span class="hljs-string">'requestSuccess'</span>, requestInfo);
    
    <span class="hljs-comment">// æ¸…ç†æ—§æ¡ç›®</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">cleanupOldEntries</span>();
  }
  
  <span class="hljs-comment">// è§£æXHRå“åº”å¤´</span>
  <span class="hljs-title function_">parseXHRHeaders</span>(<span class="hljs-params">headersString</span>) {
    <span class="hljs-keyword">const</span> headers = {};
    <span class="hljs-keyword">const</span> lines = headersString.<span class="hljs-title function_">trim</span>().<span class="hljs-title function_">split</span>(<span class="hljs-regexp">/[\r\n]+/</span>);
    
    lines.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">line</span> =&gt;</span> {
      <span class="hljs-keyword">const</span> parts = line.<span class="hljs-title function_">split</span>(<span class="hljs-string">': '</span>);
      <span class="hljs-keyword">const</span> header = parts.<span class="hljs-title function_">shift</span>();
      <span class="hljs-keyword">const</span> value = parts.<span class="hljs-title function_">join</span>(<span class="hljs-string">': '</span>);
      headers[header] = value;
    });
    
    <span class="hljs-keyword">return</span> headers;
  }
  
  <span class="hljs-comment">// è®°å½•è¯·æ±‚å¤±è´¥</span>
  <span class="hljs-title function_">recordRequestFailure</span>(<span class="hljs-params">requestId, error, requestInfo</span>) {
    <span class="hljs-keyword">const</span> endTime = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();
    <span class="hljs-keyword">const</span> duration = endTime - requestInfo.<span class="hljs-property">startTime</span>;
    
    requestInfo.<span class="hljs-property">status</span> = <span class="hljs-string">'error'</span>;
    requestInfo.<span class="hljs-property">endTime</span> = endTime;
    requestInfo.<span class="hljs-property">duration</span> = duration;
    requestInfo.<span class="hljs-property">error</span> = {
      <span class="hljs-attr">message</span>: error.<span class="hljs-property">message</span>,
      <span class="hljs-attr">name</span>: error.<span class="hljs-property">name</span>,
      <span class="hljs-attr">stack</span>: error.<span class="hljs-property">stack</span>
    };
    
    <span class="hljs-comment">// æ›´æ–°ç»Ÿè®¡ä¿¡æ¯</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">updateStats</span>({
      <span class="hljs-attr">successful</span>: <span class="hljs-literal">false</span>,
      duration
    });
    
    <span class="hljs-comment">// è§¦å‘äº‹ä»¶</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">emit</span>(<span class="hljs-string">'requestError'</span>, requestInfo);
    
    <span class="hljs-comment">// æ¸…ç†æ—§æ¡ç›®</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">cleanupOldEntries</span>();
  }
  
  <span class="hljs-comment">// è®°å½•XHRè¯·æ±‚å¤±è´¥</span>
  <span class="hljs-title function_">recordXHRFailure</span>(<span class="hljs-params">requestId, error, requestInfo</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">recordRequestFailure</span>(requestId, error, requestInfo);
  }
  
  <span class="hljs-comment">// è®°å½•WebSocketè¿æ¥</span>
  <span class="hljs-title function_">recordWebSocketConnection</span>(<span class="hljs-params">connectionId, info</span>) {
    <span class="hljs-keyword">const</span> connectionInfo = {
      <span class="hljs-attr">id</span>: connectionId,
      ...info,
      <span class="hljs-attr">connectedAt</span>: <span class="hljs-literal">null</span>,
      <span class="hljs-attr">disconnectedAt</span>: <span class="hljs-literal">null</span>,
      <span class="hljs-attr">messagesSent</span>: [],
      <span class="hljs-attr">messagesReceived</span>: [],
      <span class="hljs-attr">status</span>: <span class="hljs-string">'connecting'</span>
    };
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">requests</span>.<span class="hljs-title function_">set</span>(connectionId, connectionInfo);
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">emit</span>(<span class="hljs-string">'websocketConnection'</span>, connectionInfo);
    
    <span class="hljs-keyword">return</span> connectionInfo;
  }
  
  <span class="hljs-comment">// è®°å½•WebSocketäº‹ä»¶</span>
  <span class="hljs-title function_">recordWebSocketEvent</span>(<span class="hljs-params">connectionId, eventType, event, connectionInfo</span>) {
    <span class="hljs-keyword">if</span> (!connectionInfo) {
      connectionInfo = <span class="hljs-variable language_">this</span>.<span class="hljs-property">requests</span>.<span class="hljs-title function_">get</span>(connectionId);
      <span class="hljs-keyword">if</span> (!connectionInfo) <span class="hljs-keyword">return</span>;
    }
    
    <span class="hljs-keyword">const</span> eventInfo = {
      <span class="hljs-attr">type</span>: eventType,
      <span class="hljs-attr">timestamp</span>: <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>(),
      event
    };
    
    <span class="hljs-keyword">if</span> (eventType === <span class="hljs-string">'open'</span>) {
      connectionInfo.<span class="hljs-property">status</span> = <span class="hljs-string">'connected'</span>;
      connectionInfo.<span class="hljs-property">connectedAt</span> = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (eventType === <span class="hljs-string">'close'</span>) {
      connectionInfo.<span class="hljs-property">status</span> = <span class="hljs-string">'disconnected'</span>;
      connectionInfo.<span class="hljs-property">disconnectedAt</span> = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();
      connectionInfo.<span class="hljs-property">closeCode</span> = event.<span class="hljs-property">code</span>;
      connectionInfo.<span class="hljs-property">closeReason</span> = event.<span class="hljs-property">reason</span>;
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (eventType === <span class="hljs-string">'error'</span>) {
      connectionInfo.<span class="hljs-property">lastError</span> = event;
    }
    
    connectionInfo.<span class="hljs-property">events</span> = connectionInfo.<span class="hljs-property">events</span> || [];
    connectionInfo.<span class="hljs-property">events</span>.<span class="hljs-title function_">push</span>(eventInfo);
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">emit</span>(<span class="hljs-string">'websocketEvent'</span>, { connectionId, eventType, eventInfo, connectionInfo });
  }
  
  <span class="hljs-comment">// è®°å½•WebSocketæ¶ˆæ¯å‘é€</span>
  <span class="hljs-title function_">recordWebSocketSend</span>(<span class="hljs-params">connectionId, data, connectionInfo</span>) {
    <span class="hljs-keyword">if</span> (!connectionInfo) {
      connectionInfo = <span class="hljs-variable language_">this</span>.<span class="hljs-property">requests</span>.<span class="hljs-title function_">get</span>(connectionId);
      <span class="hljs-keyword">if</span> (!connectionInfo) <span class="hljs-keyword">return</span>;
    }
    
    <span class="hljs-keyword">const</span> messageInfo = {
      <span class="hljs-attr">type</span>: <span class="hljs-string">'sent'</span>,
      data,
      <span class="hljs-attr">timestamp</span>: <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>(),
      <span class="hljs-attr">size</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Blob</span>([data]).<span class="hljs-property">size</span>
    };
    
    connectionInfo.<span class="hljs-property">messagesSent</span>.<span class="hljs-title function_">push</span>(messageInfo);
    
    <span class="hljs-comment">// æ›´æ–°ç»Ÿè®¡ä¿¡æ¯</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">updateStats</span>({
      <span class="hljs-attr">size</span>: messageInfo.<span class="hljs-property">size</span>
    });
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">emit</span>(<span class="hljs-string">'websocketMessage'</span>, { connectionId, messageInfo, connectionInfo });
  }
  
  <span class="hljs-comment">// è®°å½•WebSocketæ¶ˆæ¯æ¥æ”¶</span>
  <span class="hljs-title function_">recordWebSocketMessage</span>(<span class="hljs-params">connectionId, data, connectionInfo</span>) {
    <span class="hljs-keyword">if</span> (!connectionInfo) {
      connectionInfo = <span class="hljs-variable language_">this</span>.<span class="hljs-property">requests</span>.<span class="hljs-title function_">get</span>(connectionId);
      <span class="hljs-keyword">if</span> (!connectionInfo) <span class="hljs-keyword">return</span>;
    }
    
    <span class="hljs-keyword">const</span> messageInfo = {
      <span class="hljs-attr">type</span>: <span class="hljs-string">'received'</span>,
      data,
      <span class="hljs-attr">timestamp</span>: <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>(),
      <span class="hljs-attr">size</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Blob</span>([data]).<span class="hljs-property">size</span>
    };
    
    connectionInfo.<span class="hljs-property">messagesReceived</span>.<span class="hljs-title function_">push</span>(messageInfo);
    
    <span class="hljs-comment">// æ›´æ–°ç»Ÿè®¡ä¿¡æ¯</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">updateStats</span>({
      <span class="hljs-attr">size</span>: messageInfo.<span class="hljs-property">size</span>
    });
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">emit</span>(<span class="hljs-string">'websocketMessage'</span>, { connectionId, messageInfo, connectionInfo });
  }
  
  <span class="hljs-comment">// æ›´æ–°ç»Ÿè®¡ä¿¡æ¯</span>
  <span class="hljs-title function_">updateStats</span>(<span class="hljs-params">{ successful, duration, size }</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">stats</span>.<span class="hljs-property">totalRequests</span>++;
    
    <span class="hljs-keyword">if</span> (successful !== <span class="hljs-literal">undefined</span>) {
      <span class="hljs-keyword">if</span> (successful) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">stats</span>.<span class="hljs-property">successfulRequests</span>++;
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">stats</span>.<span class="hljs-property">failedRequests</span>++;
      }
    }
    
    <span class="hljs-keyword">if</span> (duration !== <span class="hljs-literal">undefined</span>) {
      <span class="hljs-keyword">const</span> totalDuration = <span class="hljs-variable language_">this</span>.<span class="hljs-property">stats</span>.<span class="hljs-property">averageResponseTime</span> * 
        (<span class="hljs-variable language_">this</span>.<span class="hljs-property">stats</span>.<span class="hljs-property">successfulRequests</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">stats</span>.<span class="hljs-property">failedRequests</span> - <span class="hljs-number">1</span>) + duration;
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">stats</span>.<span class="hljs-property">averageResponseTime</span> = totalDuration / 
        (<span class="hljs-variable language_">this</span>.<span class="hljs-property">stats</span>.<span class="hljs-property">successfulRequests</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">stats</span>.<span class="hljs-property">failedRequests</span>);
    }
    
    <span class="hljs-keyword">if</span> (size !== <span class="hljs-literal">undefined</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">stats</span>.<span class="hljs-property">totalDataTransferred</span> += size;
    }
  }
  
  <span class="hljs-comment">// ç”Ÿæˆè¯·æ±‚ID</span>
  <span class="hljs-title function_">generateRequestId</span>(<span class="hljs-params">type, url, options</span>) {
    <span class="hljs-keyword">const</span> timestamp = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();
    <span class="hljs-keyword">const</span> random = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>().<span class="hljs-title function_">toString</span>(<span class="hljs-number">36</span>).<span class="hljs-title function_">substr</span>(<span class="hljs-number">2</span>, <span class="hljs-number">9</span>);
    <span class="hljs-keyword">const</span> hash = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">hashString</span>(<span class="hljs-string">`<span class="hljs-subst">${type}</span>_<span class="hljs-subst">${url}</span>_<span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(options)}</span>`</span>);
    
    <span class="hljs-keyword">return</span> <span class="hljs-string">`<span class="hljs-subst">${type}</span>_<span class="hljs-subst">${hash}</span>_<span class="hljs-subst">${timestamp}</span>_<span class="hljs-subst">${random}</span>`</span>;
  }
  
  <span class="hljs-comment">// å“ˆå¸Œå‡½æ•°</span>
  <span class="hljs-title function_">hashString</span>(<span class="hljs-params">str</span>) {
    <span class="hljs-keyword">let</span> hash = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; str.<span class="hljs-property">length</span>; i++) {
      <span class="hljs-keyword">const</span> char = str.<span class="hljs-title function_">charCodeAt</span>(i);
      hash = ((hash &lt;&lt; <span class="hljs-number">5</span>) - hash) + char;
      hash = hash &amp; hash;
    }
    <span class="hljs-keyword">return</span> hash.<span class="hljs-title function_">toString</span>(<span class="hljs-number">36</span>);
  }
  
  <span class="hljs-comment">// æ¸…ç†æ—§æ¡ç›®</span>
  <span class="hljs-title function_">cleanupOldEntries</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">requests</span>.<span class="hljs-property">size</span> &lt;= <span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span>.<span class="hljs-property">maxEntries</span>) <span class="hljs-keyword">return</span>;
    
    <span class="hljs-comment">// è½¬æ¢ä¸ºæ•°ç»„å¹¶æ’åº</span>
    <span class="hljs-keyword">const</span> entries = <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">from</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">requests</span>.<span class="hljs-title function_">entries</span>())
      .<span class="hljs-title function_">sort</span>(<span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> a[<span class="hljs-number">1</span>].<span class="hljs-property">startTime</span> - b[<span class="hljs-number">1</span>].<span class="hljs-property">startTime</span>);
    
    <span class="hljs-comment">// åˆ é™¤æœ€æ—§çš„æ¡ç›®</span>
    <span class="hljs-keyword">const</span> toRemove = entries.<span class="hljs-property">length</span> - <span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span>.<span class="hljs-property">maxEntries</span>;
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; toRemove; i++) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">requests</span>.<span class="hljs-title function_">delete</span>(entries[i][<span class="hljs-number">0</span>]);
    }
  }
  
  <span class="hljs-comment">// äº‹ä»¶ç›‘å¬</span>
  <span class="hljs-title function_">on</span>(<span class="hljs-params">event, listener</span>) {
    <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">eventListeners</span>.<span class="hljs-title function_">has</span>(event)) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">eventListeners</span>.<span class="hljs-title function_">set</span>(event, <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>());
    }
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">eventListeners</span>.<span class="hljs-title function_">get</span>(event).<span class="hljs-title function_">add</span>(listener);
  }
  
  <span class="hljs-title function_">off</span>(<span class="hljs-params">event, listener</span>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">eventListeners</span>.<span class="hljs-title function_">has</span>(event)) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">eventListeners</span>.<span class="hljs-title function_">get</span>(event).<span class="hljs-title function_">delete</span>(listener);
      
      <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">eventListeners</span>.<span class="hljs-title function_">get</span>(event).<span class="hljs-property">size</span> === <span class="hljs-number">0</span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">eventListeners</span>.<span class="hljs-title function_">delete</span>(event);
      }
    }
  }
  
  <span class="hljs-comment">// è§¦å‘äº‹ä»¶</span>
  <span class="hljs-title function_">emit</span>(<span class="hljs-params">event, data</span>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">eventListeners</span>.<span class="hljs-title function_">has</span>(event)) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">eventListeners</span>.<span class="hljs-title function_">get</span>(event).<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">listener</span> =&gt;</span> {
        <span class="hljs-keyword">try</span> {
          <span class="hljs-title function_">listener</span>(data);
        } <span class="hljs-keyword">catch</span> (error) {
          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Error in event listener for "<span class="hljs-subst">${event}</span>":`</span>, error);
        }
      });
    }
  }
  
  <span class="hljs-comment">// è·å–æ‰€æœ‰è¯·æ±‚</span>
  <span class="hljs-title function_">getRequests</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">from</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">requests</span>.<span class="hljs-title function_">values</span>());
  }
  
  <span class="hljs-comment">// è·å–ç»Ÿè®¡ä¿¡æ¯</span>
  <span class="hljs-title function_">getStats</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> {
      ...<span class="hljs-variable language_">this</span>.<span class="hljs-property">stats</span>,
      <span class="hljs-attr">successRate</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">stats</span>.<span class="hljs-property">totalRequests</span> &gt; <span class="hljs-number">0</span> ? 
        (<span class="hljs-variable language_">this</span>.<span class="hljs-property">stats</span>.<span class="hljs-property">successfulRequests</span> / <span class="hljs-variable language_">this</span>.<span class="hljs-property">stats</span>.<span class="hljs-property">totalRequests</span>) * <span class="hljs-number">100</span> : <span class="hljs-number">0</span>,
      <span class="hljs-attr">failureRate</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">stats</span>.<span class="hljs-property">totalRequests</span> &gt; <span class="hljs-number">0</span> ? 
        (<span class="hljs-variable language_">this</span>.<span class="hljs-property">stats</span>.<span class="hljs-property">failedRequests</span> / <span class="hljs-variable language_">this</span>.<span class="hljs-property">stats</span>.<span class="hljs-property">totalRequests</span>) * <span class="hljs-number">100</span> : <span class="hljs-number">0</span>,
      <span class="hljs-attr">activeRequests</span>: <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">from</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">requests</span>.<span class="hljs-title function_">values</span>())
        .<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">req</span> =&gt;</span> req.<span class="hljs-property">status</span> === <span class="hljs-string">'pending'</span>).<span class="hljs-property">length</span>,
      <span class="hljs-attr">totalWebSocketConnections</span>: <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">from</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">requests</span>.<span class="hljs-title function_">values</span>())
        .<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">req</span> =&gt;</span> req.<span class="hljs-property">type</span> === <span class="hljs-string">'websocket'</span>).<span class="hljs-property">length</span>
    };
  }
  
  <span class="hljs-comment">// è·å–æ€§èƒ½åˆ†æ</span>
  <span class="hljs-title function_">getPerformanceAnalysis</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">performanceEntries</span>.<span class="hljs-property">length</span> === <span class="hljs-number">0</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    }
    
    <span class="hljs-keyword">const</span> durations = <span class="hljs-variable language_">this</span>.<span class="hljs-property">performanceEntries</span>.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">entry</span> =&gt;</span> entry.<span class="hljs-property">duration</span>);
    durations.<span class="hljs-title function_">sort</span>(<span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> a - b);
    
    <span class="hljs-keyword">const</span> avg = durations.<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> a + b, <span class="hljs-number">0</span>) / durations.<span class="hljs-property">length</span>;
    <span class="hljs-keyword">const</span> p50 = durations[<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(durations.<span class="hljs-property">length</span> * <span class="hljs-number">0.5</span>)];
    <span class="hljs-keyword">const</span> p95 = durations[<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(durations.<span class="hljs-property">length</span> * <span class="hljs-number">0.95</span>)];
    <span class="hljs-keyword">const</span> p99 = durations[<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(durations.<span class="hljs-property">length</span> * <span class="hljs-number">0.99</span>)];
    
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">count</span>: durations.<span class="hljs-property">length</span>,
      <span class="hljs-attr">average</span>: avg,
      <span class="hljs-attr">min</span>: durations[<span class="hljs-number">0</span>],
      <span class="hljs-attr">max</span>: durations[durations.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>],
      p50,
      p95,
      p99,
      <span class="hljs-attr">distribution</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">calculateDistribution</span>(durations)
    };
  }
  
  <span class="hljs-comment">// è®¡ç®—åˆ†å¸ƒ</span>
  <span class="hljs-title function_">calculateDistribution</span>(<span class="hljs-params">durations</span>) {
    <span class="hljs-keyword">const</span> ranges = [
      { <span class="hljs-attr">min</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">max</span>: <span class="hljs-number">100</span>, <span class="hljs-attr">count</span>: <span class="hljs-number">0</span> },
      { <span class="hljs-attr">min</span>: <span class="hljs-number">100</span>, <span class="hljs-attr">max</span>: <span class="hljs-number">500</span>, <span class="hljs-attr">count</span>: <span class="hljs-number">0</span> },
      { <span class="hljs-attr">min</span>: <span class="hljs-number">500</span>, <span class="hljs-attr">max</span>: <span class="hljs-number">1000</span>, <span class="hljs-attr">count</span>: <span class="hljs-number">0</span> },
      { <span class="hljs-attr">min</span>: <span class="hljs-number">1000</span>, <span class="hljs-attr">max</span>: <span class="hljs-number">5000</span>, <span class="hljs-attr">count</span>: <span class="hljs-number">0</span> },
      { <span class="hljs-attr">min</span>: <span class="hljs-number">5000</span>, <span class="hljs-attr">max</span>: <span class="hljs-title class_">Infinity</span>, <span class="hljs-attr">count</span>: <span class="hljs-number">0</span> }
    ];
    
    durations.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">duration</span> =&gt;</span> {
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> range <span class="hljs-keyword">of</span> ranges) {
        <span class="hljs-keyword">if</span> (duration &gt;= range.<span class="hljs-property">min</span> &amp;&amp; duration &lt; range.<span class="hljs-property">max</span>) {
          range.<span class="hljs-property">count</span>++;
          <span class="hljs-keyword">break</span>;
        }
      }
    });
    
    <span class="hljs-keyword">return</span> ranges.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">range</span> =&gt;</span> ({
      ...range,
      <span class="hljs-attr">percentage</span>: (range.<span class="hljs-property">count</span> / durations.<span class="hljs-property">length</span>) * <span class="hljs-number">100</span>
    }));
  }
  
  <span class="hljs-comment">// å¯¼å‡ºæ•°æ®</span>
  <span class="hljs-title function_">exportData</span>(<span class="hljs-params">format = <span class="hljs-string">'json'</span></span>) {
    <span class="hljs-keyword">const</span> data = {
      <span class="hljs-attr">timestamp</span>: <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>(),
      <span class="hljs-attr">stats</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getStats</span>(),
      <span class="hljs-attr">requests</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getRequests</span>(),
      <span class="hljs-attr">performance</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getPerformanceAnalysis</span>()
    };
    
    <span class="hljs-keyword">switch</span> (format) {
      <span class="hljs-keyword">case</span> <span class="hljs-string">'json'</span>:
        <span class="hljs-keyword">return</span> <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(data, <span class="hljs-literal">null</span>, <span class="hljs-number">2</span>);
      <span class="hljs-keyword">case</span> <span class="hljs-string">'csv'</span>:
        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">convertToCSV</span>(data);
      <span class="hljs-attr">default</span>:
        <span class="hljs-keyword">return</span> data;
    }
  }
  
  <span class="hljs-comment">// è½¬æ¢ä¸ºCSV</span>
  <span class="hljs-title function_">convertToCSV</span>(<span class="hljs-params">data</span>) {
    <span class="hljs-keyword">const</span> rows = [];
    
    <span class="hljs-comment">// æ·»åŠ ç»Ÿè®¡ä¿¡æ¯</span>
    rows.<span class="hljs-title function_">push</span>(<span class="hljs-string">'Category,Key,Value'</span>);
    <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">entries</span>(data.<span class="hljs-property">stats</span>).<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">[key, value]</span>) =&gt;</span> {
      rows.<span class="hljs-title function_">push</span>(<span class="hljs-string">`Stats,<span class="hljs-subst">${key}</span>,<span class="hljs-subst">${value}</span>`</span>);
    });
    
    <span class="hljs-comment">// æ·»åŠ è¯·æ±‚ä¿¡æ¯</span>
    rows.<span class="hljs-title function_">push</span>(<span class="hljs-string">'\nRequests'</span>);
    rows.<span class="hljs-title function_">push</span>(<span class="hljs-string">'ID,Type,Method,URL,Status,Duration(ms),Size(bytes)'</span>);
    
    data.<span class="hljs-property">requests</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">request</span> =&gt;</span> {
      <span class="hljs-keyword">const</span> size = request.<span class="hljs-property">response</span>?.<span class="hljs-property">size</span> || <span class="hljs-number">0</span>;
      rows.<span class="hljs-title function_">push</span>(
        <span class="hljs-string">`<span class="hljs-subst">${request.id}</span>,<span class="hljs-subst">${request.type}</span>,<span class="hljs-subst">${request.method || <span class="hljs-string">'N/A'</span>}</span>,`</span> +
        <span class="hljs-string">`<span class="hljs-subst">${request.url}</span>,<span class="hljs-subst">${request.status}</span>,<span class="hljs-subst">${request.duration || <span class="hljs-number">0</span>}</span>,<span class="hljs-subst">${size}</span>`</span>
      );
    });
    
    <span class="hljs-keyword">return</span> rows.<span class="hljs-title function_">join</span>(<span class="hljs-string">'\n'</span>);
  }
  
  <span class="hljs-comment">// æ¸…é™¤æ•°æ®</span>
  <span class="hljs-title function_">clearData</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">requests</span>.<span class="hljs-title function_">clear</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">performanceEntries</span> = [];
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">stats</span> = {
      <span class="hljs-attr">totalRequests</span>: <span class="hljs-number">0</span>,
      <span class="hljs-attr">successfulRequests</span>: <span class="hljs-number">0</span>,
      <span class="hljs-attr">failedRequests</span>: <span class="hljs-number">0</span>,
      <span class="hljs-attr">averageResponseTime</span>: <span class="hljs-number">0</span>,
      <span class="hljs-attr">totalDataTransferred</span>: <span class="hljs-number">0</span>
    };
  }
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">NetworkMonitorExample</span> {
  <span class="hljs-keyword">static</span> <span class="hljs-title function_">demonstrate</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// åˆ›å»ºç½‘ç»œè¯·æ±‚ç›‘æ§å™¨</span>
    <span class="hljs-keyword">const</span> monitor = <span class="hljs-keyword">new</span> <span class="hljs-title class_">NetworkRequestMonitor</span>({
      <span class="hljs-attr">enabled</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">logLevel</span>: <span class="hljs-string">'info'</span>,
      <span class="hljs-attr">capturePerformance</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">captureHeaders</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">maxEntries</span>: <span class="hljs-number">500</span>
    });
    
    <span class="hljs-comment">// ç›‘å¬è¯·æ±‚äº‹ä»¶</span>
    monitor.<span class="hljs-title function_">on</span>(<span class="hljs-string">'requestStart'</span>, <span class="hljs-function">(<span class="hljs-params">request</span>) =&gt;</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Request started: <span class="hljs-subst">${request.method}</span> <span class="hljs-subst">${request.url}</span>`</span>);
    });
    
    monitor.<span class="hljs-title function_">on</span>(<span class="hljs-string">'requestSuccess'</span>, <span class="hljs-function">(<span class="hljs-params">request</span>) =&gt;</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Request completed: <span class="hljs-subst">${request.status}</span> in <span class="hljs-subst">${request.duration}</span>ms`</span>);
    });
    
    monitor.<span class="hljs-title function_">on</span>(<span class="hljs-string">'requestError'</span>, <span class="hljs-function">(<span class="hljs-params">request</span>) =&gt;</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Request failed: <span class="hljs-subst">${request.error?.message}</span>`</span>);
    });
    
    <span class="hljs-comment">// æ‰§è¡Œä¸€äº›ç½‘ç»œè¯·æ±‚</span>
    <span class="hljs-title function_">fetch</span>(<span class="hljs-string">'https://jsonplaceholder.typicode.com/posts/1'</span>)
      .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">response</span> =&gt;</span> response.<span class="hljs-title function_">json</span>())
      .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">data</span> =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Fetch response:'</span>, data));
    
    <span class="hljs-comment">// è·å–ç›‘æ§æ•°æ®</span>
    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
      <span class="hljs-keyword">const</span> stats = monitor.<span class="hljs-title function_">getStats</span>();
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Network stats:'</span>, stats);
      
      <span class="hljs-keyword">const</span> performance = monitor.<span class="hljs-title function_">getPerformanceAnalysis</span>();
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Performance analysis:'</span>, performance);
      
      <span class="hljs-comment">// å¯¼å‡ºæ•°æ®</span>
      <span class="hljs-keyword">const</span> exportData = monitor.<span class="hljs-title function_">exportData</span>(<span class="hljs-string">'json'</span>);
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Exported data:'</span>, exportData);
    }, <span class="hljs-number">3000</span>);
    
    <span class="hljs-keyword">return</span> monitor;
  }
}
</code></pre>
<h4 data-id="heading-2">æ€»ç»“</h4>
<p>æœ¬æ–‡å…¨é¢æ¢è®¨äº†æµè§ˆå™¨ç½‘ç»œè¯·æ±‚ç›¸å…³çš„APIå’ŒæŠ€æœ¯ï¼Œæ¶µç›–ï¼š</p>
<h5 data-id="heading-3">1. æ ¸å¿ƒè¯·æ±‚æŠ€æœ¯ï¼š</h5>
<ul>
<li>XMLHttpRequestä¸ç°ä»£Fetch APIçš„å¯¹æ¯”</li>
<li>Fetch APIçš„é«˜çº§ç‰¹æ€§å’Œå±€é™æ€§è§£å†³æ–¹æ¡ˆ</li>
</ul>
<h5 data-id="heading-4">2. å¢å¼ºå‹HTTPå®¢æˆ·ç«¯ï¼š</h5>
<ul>
<li>å®Œæ•´çš„HttpClientå®ç°ï¼Œæ”¯æŒæ‹¦æˆªå™¨ã€ç¼“å­˜ã€é‡è¯•</li>
<li>æ™ºèƒ½è¯·æ±‚è°ƒåº¦å™¨ï¼Œæ”¯æŒä¼˜å…ˆçº§ã€ç¦»çº¿é˜Ÿåˆ—ã€å¹¶å‘æ§åˆ¶</li>
</ul>
<h5 data-id="heading-5">3. è¯·æ±‚å–æ¶ˆä¸å¹¶å‘æ§åˆ¶ï¼š</h5>
<ul>
<li>é«˜çº§å–æ¶ˆä»¤ç‰Œæœºåˆ¶</li>
<li>è¯·æ±‚æ± å’Œç«é€Ÿè¯·æ±‚å®ç°</li>
<li>æ™ºèƒ½è¯·æ±‚è°ƒåº¦å’Œé‡è¯•ç­–ç•¥</li>
</ul>
<h5 data-id="heading-6">4. WebSocketé«˜çº§å°è£…ï¼š</h5>
<ul>
<li>å®Œæ•´çš„WebSocketå®¢æˆ·ç«¯ï¼Œæ”¯æŒé‡è¿ã€å¿ƒè·³ã€æ¶ˆæ¯é˜Ÿåˆ—</li>
<li>å¯é WebSocketå®ç°ï¼Œæ”¯æŒæ¶ˆæ¯ç¡®è®¤å’Œé‡ä¼ </li>
<li>å¤šè¿æ¥ç®¡ç†å’Œå¹¿æ’­åŠŸèƒ½</li>
</ul>
<h5 data-id="heading-7">5. ç½‘ç»œè¯·æ±‚ç›‘æ§ï¼š</h5>
<ul>
<li>è¯·æ±‚æ‹¦æˆªå’Œæ€§èƒ½ç›‘æ§</li>
<li>è¯¦ç»†çš„ç»Ÿè®¡åˆ†æå’Œæ€§èƒ½æŠ¥å‘Š</li>
<li>æ•°æ®å¯¼å‡ºå’Œè°ƒè¯•æ”¯æŒ</li>
</ul>
<h5 data-id="heading-8">6. å®é™…åº”ç”¨åœºæ™¯ï¼š</h5>
<ul>
<li>å¤§æ–‡ä»¶åˆ†ç‰‡ä¸Šä¼ </li>
<li>æµå¼å“åº”å¤„ç†</li>
<li>ç¦»çº¿è¯·æ±‚é˜Ÿåˆ—</li>
<li>è¯·æ±‚åˆå¹¶å’Œæ‰¹å¤„ç†</li>
</ul>
<h5 data-id="heading-9">å…³é”®è¦ç‚¹ï¼š</h5>
<ol>
<li><strong>é€‰æ‹©åˆé€‚çš„è¯·æ±‚æŠ€æœ¯:</strong> æ ¹æ®éœ€æ±‚é€‰æ‹©Fetchã€XHRæˆ–WebSocket</li>
<li><strong>å®ç°å®Œæ•´çš„é”™è¯¯å¤„ç†:</strong> ç½‘ç»œé”™è¯¯ã€è¶…æ—¶ã€é‡è¯•ã€é™çº§</li>
<li><strong>ä¼˜åŒ–ç”¨æˆ·ä½“éªŒ:</strong> è¯·æ±‚å–æ¶ˆã€è¿›åº¦æ˜¾ç¤ºã€ç¦»çº¿æ”¯æŒ</li>
<li><strong>ç¡®ä¿æ•°æ®å¯é æ€§:</strong> æ¶ˆæ¯ç¡®è®¤ã€é‡ä¼ æœºåˆ¶ã€æ•°æ®ä¸€è‡´æ€§</li>
<li><strong>ç›‘æ§å’Œåˆ†æ:</strong> æ€§èƒ½ç›‘æ§ã€é”™è¯¯è¿½è¸ªã€ä½¿ç”¨ç»Ÿè®¡</li>
</ol>
<h5 data-id="heading-10">æœ€ä½³å®è·µï¼š</h5>
<ol>
<li><strong>ä½¿ç”¨æ‹¦æˆªå™¨:</strong> é›†ä¸­å¤„ç†è®¤è¯ã€é”™è¯¯ã€æ—¥å¿—</li>
<li><strong>å®ç°æ™ºèƒ½é‡è¯•:</strong> æŒ‡æ•°é€€é¿ã€æ¡ä»¶é‡è¯•</li>
<li><strong>ç®¡ç†è¯·æ±‚ç”Ÿå‘½å‘¨æœŸ:</strong> å–æ¶ˆã€æ¸…ç†ã€èµ„æºé‡Šæ”¾</li>
<li><strong>ä¼˜åŒ–ç½‘ç»œä½¿ç”¨:</strong> è¯·æ±‚åˆå¹¶ã€ç¼“å­˜ã€ä¼˜å…ˆçº§</li>
<li><strong>ç¡®ä¿å®‰å…¨æ€§:</strong> HTTPSã€è®¤è¯ã€æ•°æ®éªŒè¯</li>
</ol>
<p>é€šè¿‡è¿™äº›æŠ€æœ¯å’Œç­–ç•¥ï¼Œå¼€å‘è€…å¯ä»¥æ„å»ºå‡ºå¼ºå¤§ã€å¯é ã€é«˜æ€§èƒ½çš„ç½‘ç»œè¯·æ±‚ç³»ç»Ÿï¼Œä¸ºç°ä»£Webåº”ç”¨æä¾›åšå®çš„åŸºç¡€è®¾æ–½æ”¯æŒã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Volo æ–°èƒ½åŠ›ï¼šé¢å‘æ˜“ç”¨æ€§ä¸æ€§èƒ½çš„ HTTP & RPC æ¡†æ¶è¿­ä»£]]></title>    <link>https://juejin.cn/post/7584810656383156233</link>    <guid>https://juejin.cn/post/7584810656383156233</guid>    <pubDate>2025-12-18T07:46:52.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7584810656383156233" data-draft-id="7584987267293020206" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Volo æ–°èƒ½åŠ›ï¼šé¢å‘æ˜“ç”¨æ€§ä¸æ€§èƒ½çš„ HTTP &amp; RPC æ¡†æ¶è¿­ä»£"/> <meta itemprop="keywords" content="æ¶æ„"/> <meta itemprop="datePublished" content="2025-12-18T07:46:52.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="CloudWeGo"/> <meta itemprop="url" content="https://juejin.cn/user/3998273922407624"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Volo æ–°èƒ½åŠ›ï¼šé¢å‘æ˜“ç”¨æ€§ä¸æ€§èƒ½çš„ HTTP &amp; RPC æ¡†æ¶è¿­ä»£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3998273922407624/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    CloudWeGo
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-18T07:46:52.000Z" title="Thu Dec 18 2025 07:46:52 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-18
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>éšç€å¾®æœåŠ¡æ¶æ„çš„å¹¿æ³›åº”ç”¨ï¼Œé«˜æ€§èƒ½ã€æ˜“ç”¨æ€§çš„å¾®æœåŠ¡æ¡†æ¶æˆä¸ºå¼€å‘è€…çš„æ ¸å¿ƒéœ€æ±‚ã€‚Volo ä½œä¸ºä¸“æ³¨äº Rust å¾®æœåŠ¡ç”Ÿæ€çš„é«˜æ€§èƒ½æ¡†æ¶ï¼Œåœ¨è¿½æ±‚æè‡´æ€§èƒ½çš„åŒæ—¶ï¼ŒæŒç»­ä¼˜åŒ–å·¥ç¨‹åŒ–æ˜“ç”¨æ€§ä¸å¯æ‰©å±•æ€§ã€‚</p>
<p><strong>æœ¬æ–‡åŸºäºå­—èŠ‚è·³åŠ¨æœåŠ¡æ¡†æ¶å›¢é˜Ÿç ”å‘å·¥ç¨‹å¸ˆã€Volo/Pilota é¡¹ç›® Maintainer ç‹æ°åœ¨ CloudWeGo å››å‘¨å¹´æŠ€æœ¯æ²™é¾™ä¸Šçš„æ¼”è®²å†…å®¹æ•´ç†ï¼Œèšç„¦ Volo æ¡†æ¶çš„é‡è¦è¿­ä»£ï¼Œæ·±å…¥è§£è¯»å…¶åœ¨ RPC ç”Ÿæˆä»£ç èƒ½åŠ›åŠ HTTP æ–°èƒ½åŠ›ä¸Šçš„ä¼˜åŒ–å‡çº§ã€‚</strong></p>
<p>ç‚¹å‡»é“¾æ¥å¯æŸ¥çœ‹æœ¬æ¬¡åˆ†äº«å›æ”¾ğŸ‘‰ğŸ»<a href="https://link.juejin.cn?target=https%3A%2F%2Fb23.tv%2FpB7YAKl" target="_blank" title="https://b23.tv/pB7YAKl" ref="nofollow noopener noreferrer">b23.tv/pB7YAKl</a></p>
<h4 data-id="heading-0">ä¸€ã€Voloæ¡†æ¶æ¦‚è¿°</h4>
<p>Volo çš„æ ¸å¿ƒå®šä½æ˜¯æ„å»ºä¸“æ³¨äº Rust å¾®æœåŠ¡ç”Ÿæ€çš„é«˜æ€§èƒ½æ¡†æ¶ï¼Œè®¾è®¡ä¸Šå…¼é¡¾æè‡´æ€§èƒ½ä¸å·¥ç¨‹åŒ–æ˜“ç”¨æ€§ã€å¯æ‰©å±•æ€§ï¼Œé€šè¿‡ç»Ÿä¸€æŠ½è±¡æ¶æ„å®ç°"åè®®ã€æ²»ç†ã€ä¼ è¾“"çš„åˆ†å±‚è§£è€¦ï¼Œè¡ç”Ÿå‡ºä¸‰å¤§åè®®æ¡†æ¶------volo-thriftã€volo-grpcã€volo-httpï¼Œä¸‰è€…å…±äº«åŒä¸€å¥—æ ¸å¿ƒæŠ½è±¡ï¼Œç¡®ä¿å¼€å‘ä½“éªŒä¸€è‡´ï¼ŒåŒæ—¶æ”¯æŒä¸­é—´ä»¶èƒ½åŠ›çš„å¤ç”¨ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/acc5bd5239074b86af9cb0e60edb5c63~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ2xvdWRXZUdv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766648812&amp;x-signature=jLL7A5c5NL9BCrPmqWJ7F0pXPUw%3D" alt="" loading="lazy"/></p>
<p>Volo ç”Ÿæ€å›´ç»•æ ¸å¿ƒæ¡†æ¶æ„å»ºäº†å®Œå–„çš„è¾…åŠ©å·¥å…·ä¸æ¨¡å—ï¼Œé™ä½å¼€å‘é—¨æ§›ï¼š</p>
<ul>
<li>
<p><strong>ä¸­é—´ä»¶ç³»ç»Ÿ</strong> ï¼šå®ç°äº†æœåŠ¡æ²»ç†é“¾ï¼Œæä¾›å¯è§‚æµ‹æ€§ä¸‰ä»¶å¥—ã€è¶…æ—¶é‡è¯•ç­‰æ ¸å¿ƒèƒ½åŠ›ï¼Œå¹¶ä»¥ <code>service/layer</code> çš„å½¢å¼æ”¯æŒç”¨æˆ·è‡ªç”±ç»„åˆã€‚</p>
</li>
<li>
<p><strong>ä¼ è¾“å±‚ä¸è¿è¡Œæ—¶</strong>ï¼šæä¾›äº† TCP/TLS å®ç°ï¼Œå¹¶åŸºäº Tokio Runtime æ„å»ºäº†å¼‚æ­¥ç”Ÿæ€ã€‚åŒæ—¶ï¼Œå°è£…äº†ç»Ÿä¸€çš„ Client/Server æ¥å£ï¼Œä¾¿äºç”¨æˆ·å¿«é€Ÿä¸Šæ‰‹ã€‚</p>
</li>
<li>
<p><strong>Pilota</strong>ï¼šä½œä¸ºæ ¸å¿ƒä»£ç ç”Ÿæˆå·¥å…·ï¼Œæ”¯æŒ Thrift ä¸ Protobuf çš„ç¼–è§£ç ï¼Œæ˜¯æœ¬æ¬¡è¿­ä»£çš„æ ¸å¿ƒè½½ä½“ã€‚</p>
</li>
<li>
<p><strong>Metainfo</strong>ï¼šè´Ÿè´£è°ƒç”¨å…ƒä¿¡æ¯çš„é€ä¼ ï¼Œä¿éšœäº†å¾®æœåŠ¡é“¾è·¯çš„å¯è¿½è¸ªæ€§ã€‚</p>
</li>
<li>
<p><strong>volo-cli</strong> ï¼šå‘½ä»¤è¡Œå·¥å…·ï¼Œæ”¯æŒä¸€é”®åˆ›å»ºé¡¹ç›®ã€æ‹‰å–è¿œç«¯ IDLï¼Œå¹¶é…åˆ <code>volo.yml</code> é…ç½®æ–‡ä»¶å®ç° IDL ç®¡ç†ä¸åŠŸèƒ½å¼€å…³æ§åˆ¶ã€‚</p>
</li>
</ul>
<p>ç›®å‰ï¼ŒVolo å·²åœ¨å­—èŠ‚è·³åŠ¨å†…éƒ¨å¤šä¸ªä¸šåŠ¡çº¿çš„å¤§é‡æœåŠ¡ä¸­è½åœ°åº”ç”¨ï¼Œå¹¶æ ¹æ®ä¸šåŠ¡å‘å±•éœ€æ±‚æŒç»­è¿›è¡Œè¿­ä»£ä¼˜åŒ–ã€‚</p>
<h4 data-id="heading-1">äºŒã€RPCç”Ÿæˆä»£ç èƒ½åŠ›çš„æ˜“ç”¨æ€§ä¸æ€§èƒ½ä¼˜åŒ–</h4>
<p>Volo çš„è¿­ä»£é‡ç‚¹èšç„¦äº RPC æ¡†æ¶çš„ç”Ÿæ€å®Œå–„ï¼Œé’ˆå¯¹å¾®æœåŠ¡ä¸šåŠ¡ä¸­çš„å¸¸è§éœ€æ±‚ï¼Œå¦‚ä¸ºå­—æ®µé€ä¼ ã€ç¼–è§£ç æ§åˆ¶ã€æ•°æ®è£å‰ªç­‰æä¾›äº†è§£å†³æ–¹æ¡ˆã€‚
æ ¸å¿ƒè¿­ä»£é›†ä¸­åœ¨ä»£ç ç”Ÿæˆå·¥å…· <strong>Pilota</strong> ä¸­ï¼Œé€šè¿‡ <code>volo.yml</code> é…ç½®æ–‡ä»¶å®ç°äº† IDL çº§åˆ«çš„åŠŸèƒ½å¼€å…³æ§åˆ¶ã€‚è¿™ç§æ–¹å¼ä¸ºç”¨æˆ·æä¾›äº†ä½ä¾µå…¥å¼çš„åŠŸèƒ½æ¥å…¥ä½“éªŒ------æ‰€æœ‰æ–°å¢èƒ½åŠ›éƒ½é›†æˆäºç”Ÿæˆä»£ç ä¸­ï¼Œå¹¶æä¾›äº†æ ‡å‡†åŒ–çš„ç»“æ„ä¸æ–¹æ³•ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f2bc5e3f7a9f4eed81b467c36d35e38e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ2xvdWRXZUdv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766648812&amp;x-signature=Y4PhzZi%2FVVBEdh2SgfbiHtURz7Y%3D" alt="" loading="lazy"/></p>
<h5 data-id="heading-2">2.1 Protobuf Unknown Fieldsï¼šæœªå®šä¹‰å­—æ®µçš„å¯é ä¿ç•™ä¸é€ä¼ </h5>
<p>æ ¹æ® Protobuf çš„å®˜æ–¹å®šä¹‰ï¼Œunknown fields èƒ½åŠ›çš„æ ¸å¿ƒæ˜¯<strong>ä¿ç•™å¹¶ä¼ è¾“ proto æ–‡ä»¶ä¸­æœªå®šä¹‰çš„å­—æ®µ</strong>ï¼Œä»¥è§£å†³è·¨ç‰ˆæœ¬ã€è·¨æœåŠ¡äº¤äº’ä¸­å› å­—æ®µæœªå®šä¹‰è€Œå¯¼è‡´æ•°æ®ä¸¢å¤±çš„é—®é¢˜ã€‚</p>
<h5 data-id="heading-3">2.1.1 å¿«é€Ÿæ¥å…¥ï¼šé…ç½®é©±åŠ¨çš„ä½é—¨æ§›ä½¿ç”¨</h5>
<p>ç”¨æˆ·åªéœ€é€šè¿‡ç®€å•çš„é…ç½®å³å¯å¼€å¯è¯¥åŠŸèƒ½ï¼š</p>
<ol>
<li>
<p>ä½¿ç”¨ <code>volo-cli</code> çš„ <code>init</code> å‘½ä»¤åˆ›å»ºé¡¹ç›®ã€‚</p>
</li>
<li>
<p>åœ¨é¡¹ç›®ä¸­çš„ <code>volo.yml</code> é…ç½®æ–‡ä»¶ä¸­æ·»åŠ  <code>unknown_fields</code> ç›¸å…³é…ç½®ï¼ˆé»˜è®¤å…³é—­ï¼‰ã€‚è¯¥é…ç½®æ”¯æŒæŒ‰ IDL çº§åˆ«è¿›è¡Œç²¾ç»†åŒ–æ§åˆ¶ã€‚</p>
</li>
</ol>
<p>é…ç½®å®Œæˆåï¼Œç”Ÿæˆä»£ç ä¼šè‡ªåŠ¨é›†æˆ unknown fields çš„èƒ½åŠ›ï¼Œæ— éœ€æ‰‹åŠ¨ä¿®æ”¹ä¸šåŠ¡ä»£ç ã€‚</p>
<h5 data-id="heading-4">2.1.2 è®¾è®¡å®ç°ï¼šé›¶æ‹·è´çš„é«˜æ€§èƒ½é€ä¼ æ–¹æ¡ˆ</h5>
<p>å¼€å¯è¯¥åŠŸèƒ½åï¼Œç”Ÿæˆçš„ç»“æ„ä½“æœ«å°¾ä¼šæ–°å¢ä¸€ä¸ª <code>_unknown_fields</code> å­—æ®µï¼Œä¸“é—¨ç”¨äºé€ä¼ æ‰€æœ‰æœªè¯†åˆ«çš„å­—æ®µã€‚è¯¥å­—æ®µçš„ç±»å‹ä¸º Pilota ä¸­å®šä¹‰çš„ <code>BytesVec</code>ï¼Œç”±ä¸€ä¸ª bytes é˜Ÿåˆ—å’Œè®°å½•å…¨é•¿çš„ size ç»„æˆã€‚é€‰æ‹©è¯¥æ•°æ®ç»“æ„çš„æ ¸å¿ƒç›®æ ‡æ˜¯<strong>é™ä½ç¼–è§£ç å¼€é”€</strong>ã€‚
åœ¨è§£ç ï¼ˆdecodeï¼‰è¿‡ç¨‹ä¸­ï¼Œæ ¸å¿ƒé€»è¾‘å¦‚ä¸‹ï¼š</p>
<ol>
<li>
<p>å°†äºŒè¿›åˆ¶æ•°æ®è¯»å…¥ç¼“å†²åŒºã€‚</p>
</li>
<li>
<p>è§£æ Protobuf åè®®çš„ tagï¼Œåˆ¤æ–­å­—æ®µæ˜¯å¦ä¸ºå·²çŸ¥å­—æ®µã€‚</p>
</li>
<li>
<p>è‹¥ä¸ºæœªçŸ¥å­—æ®µï¼Œåˆ™æŒ‰ Protobuf äºŒè¿›åˆ¶åè®®å®Œæ•´è·³è¿‡è¯¥å­—æ®µï¼Œè®¡ç®—è·³è¿‡çš„é•¿åº¦ï¼Œå¹¶å°†å¯¹åº”çš„æ•°æ®åˆ‡ç‰‡å­˜å…¥ unknown fields åˆ—è¡¨ã€‚</p>
</li>
</ol>
<p>æ­¤è¿‡ç¨‹çš„æ ¸å¿ƒå¼€é”€åœ¨äºæ•°æ®å†™å…¥ã€‚å› æ­¤ï¼ŒVolo é‡‡ç”¨äº†<strong>é›¶æ‹·è´ç»“æ„</strong> <strong><code>Bytes</code></strong> ï¼Œé€šè¿‡å¤ç”¨ç¼“å†²åŒºä¸­çš„åŸæœ‰æ•°æ®ï¼Œå¤§å¹…é™ä½äº†æ€§èƒ½æŸè€—ã€‚
<strong>åç»­ä¼˜åŒ–æ–¹å‘</strong> ï¼šå¼•å…¥çŸ­è·¯ä¼˜åŒ–ã€‚å¦‚æœåˆ¤æ–­æ‰€æœ‰å·²çŸ¥å­—æ®µéƒ½å·²è§£æå®Œæˆï¼Œå¯å°†å‰©ä½™çš„å­—èŠ‚ä¸€æ¬¡æ€§è½½å…¥ unknown fields åˆ—è¡¨ã€‚ä½†è¯¥ä¼˜åŒ–å— Protobuf å®˜æ–¹å®šä¹‰çš„é™åˆ¶------<code>repeated</code> å­—æ®µçš„å…ƒç´ æ— éœ€å¼ºåˆ¶è¿ç»­å‡ºç°ï¼Œè¿™å¯¼è‡´éš¾ä»¥ç²¾å‡†åˆ¤æ–­è§£æçš„ç»ˆç‚¹ã€‚ç›®å‰è¯¥ä¼˜åŒ–ä»åœ¨æ”¹è¿›ä¸­ã€‚å½“å‰å»ºè®®å°†æ–°å¢çš„é€ä¼ å­—æ®µç½®äºç»“æ„ä½“çš„æœ«å°¾ï¼Œä»¥æå‡è§£ææ•ˆç‡ã€‚</p>
<h5 data-id="heading-5">2.2 Protobuf Optionsï¼šæ³¨è§£é©±åŠ¨çš„ç¼–è§£ç æ§åˆ¶ä¸ä¸šåŠ¡é…ç½®</h5>
<p>Volo åŸºäº Google Protobuf å®˜æ–¹çš„æ³¨è§£è¯­æ³•ï¼Œæ‰©å±•å®ç°äº† <code>pb options</code> èƒ½åŠ›ï¼Œä»¥æ”¯æŒä¸¤ç±»æ ¸å¿ƒåœºæ™¯ï¼š</p>
<ol>
<li>
<p>é€šè¿‡ <strong>Pilota æ³¨è§£</strong>æ§åˆ¶ç¼–è§£ç è¡Œä¸ºã€‚</p>
</li>
<li>
<p>é€šè¿‡<strong>ç”¨æˆ·è‡ªå®šä¹‰æ³¨è§£</strong>é…ç½®ä¸šåŠ¡ç›¸å…³æ•°æ®ã€‚</p>
</li>
</ol>
<p>è¯¥åŠŸèƒ½åŒæ ·é€šè¿‡ <code>volo.yml</code> çš„å¼€å…³å¼€å¯ï¼Œæ¥å…¥æˆæœ¬ä½ã€‚</p>
<h5 data-id="heading-6">2.2.1 Pilota æ³¨è§£ï¼šè§£å†³æ€§èƒ½ä¸å·¥ç¨‹åŒ–ç—›ç‚¹</h5>
<p>ä½¿ç”¨ Pilota æ³¨è§£éœ€è¦å…ˆå¼•å…¥ <code>pilota.proto</code> æ–‡ä»¶ã€‚Volo é‡‡ç”¨ <strong>well-known types</strong> çš„æ–¹å¼æ¥ç®€åŒ–æ¥å…¥ï¼Œé™ä½äº†ç»´æŠ¤æˆæœ¬ã€‚
<strong>å…¸å‹åº”ç”¨ï¼š</strong> <code>rust_wrapper_arc_all</code> æ³¨è§£ã€‚é’ˆå¯¹å¤§é‡æ ˆæ‹·è´å¯¼è‡´çš„å†…å­˜å¸¦å®½è¿‡é«˜é—®é¢˜ï¼Œè¯¥æ³¨è§£å¯ä»¥ä½¿ç”Ÿæˆçš„ Server lib æ¨¡æ¿ä»£ç ä¸­ï¼Œrequest å’Œ response ç»“æ„ä½“è‡ªåŠ¨æ·»åŠ  <code>Arc</code> wrapperï¼Œä»è€Œå‡å°‘æ‹·è´å¼€é”€ã€‚æ­¤å¤–ï¼ŒVolo è¿˜æä¾›äº†å¤šç§å…¶ä»– Pilota æ³¨è§£ï¼Œä»¥è¦†ç›–ç¼–è§£ç æµç¨‹çš„ç²¾ç»†åŒ–æ§åˆ¶éœ€æ±‚ã€‚</p>
<h5 data-id="heading-7">2.2.2 è‡ªå®šä¹‰æ³¨è§£ï¼šçµæ´»é€‚é…ä¸šåŠ¡é…ç½®éœ€æ±‚</h5>
<p>ç”¨æˆ·å¯ä»¥æŒ‰ç…§ Google çš„å®˜æ–¹è¯­æ³•å®šä¹‰è‡ªå®šä¹‰æ³¨è§£ã€‚é€šè¿‡ç”Ÿæˆä»£ç æä¾›çš„ <code>file_descriptor</code> æ–¹æ³•ï¼Œå¯ä»¥è·å–å…¶æŠ½è±¡è¯­æ³•æ ‘ï¼Œç„¶åéå†æ‰¾åˆ°ç›®æ ‡ç»“æ„ä½“ï¼ˆåŒ¹é…æ—¶éœ€ä½¿ç”¨ IDL ä¸­å®šä¹‰çš„åç§°ï¼‰ï¼Œå†é€šè¿‡ <code>get</code> æ–¹æ³•ç›´æ¥è·å–æ³¨è§£çš„å€¼ã€‚
å®è·µä¸­å‘ç°ï¼Œç”¨æˆ·åœ¨ä½¿ç”¨ struct æè¿°æ—¶éœ€è¦éå†æ•´ä¸ª file descriptorï¼Œæ“ä½œè¾ƒä¸ºç¹çã€‚å› æ­¤ï¼ŒVolo åœ¨åç»­çš„è¿­ä»£ä¸­è®¡åˆ’å¢åŠ æ˜“ç”¨æ€§æ–¹æ³•ï¼Œè¿™ä¸€ä¼˜åŒ–å·²åœ¨ <code>thrift field mask</code> åŠŸèƒ½ä¸­å¾—åˆ°äº†è½åœ°éªŒè¯ã€‚</p>
<p><strong>åç»­å‘å±•æ–¹å‘</strong>ï¼š</p>
<ul>
<li>
<p>æå‡è‡ªå®šä¹‰æ³¨è§£çš„æ€§èƒ½ä¸å¯æ‰©å±•æ€§ï¼Œå¹¶å®Œå–„æ˜“ç”¨æ€§æ–¹æ³•ã€‚</p>
</li>
<li>
<p>ä¼˜åŒ–æ„å»ºæ€§èƒ½ï¼Œè§£å†³ <code>pb custom options</code> å¼€å¯ <code>touch_all</code> æ—¶å¯¼è‡´çš„ build å˜æ…¢ã€ä»£ç ä½“ç§¯å¢å¤§çš„é—®é¢˜ã€‚è®¡åˆ’é€šè¿‡"æŒ‰éœ€ç”Ÿæˆæ³¨è§£"çš„æœºåˆ¶è¿›è¡Œä¼˜åŒ–ï¼Œå¹¶åœ¨ Pilota ä¸­æä¾›æ›´å¤šçš„ hook ç‚¹ã€‚</p>
</li>
</ul>
<h5 data-id="heading-8">2.3 Thrift Field Maskï¼šè¿è¡Œæ—¶åŠ¨æ€è£å‰ªçš„é«˜æ•ˆè§£å†³æ–¹æ¡ˆ</h5>
<p>åœ¨å­—èŠ‚å†…éƒ¨å¤§é‡ä½¿ç”¨ Thrift åè®®çš„ä¸šåŠ¡åœºæ™¯ä¸­ï¼Œå­˜åœ¨ä¸‰ç±»æ ¸å¿ƒéœ€æ±‚ï¼š</p>
<ol>
<li>
<p>åœ¨ç»Ÿä¸€ IDL çš„åœºæ™¯ä¸‹ï¼Œå‡å°‘ä¼ è¾“å¸¦å®½å’Œç¼–è§£ç å¼€é”€ã€‚</p>
</li>
<li>
<p>Gateway/Proxy æœåŠ¡çš„æ¥å£å¤ç”¨ä¸åˆ†å‘ã€‚</p>
</li>
<li>
<p>å­—æ®µæƒé™æ§åˆ¶ã€‚</p>
</li>
</ol>
<p>è¿™äº›éœ€æ±‚çš„æœ¬è´¨æ˜¯"è¿è¡Œæ—¶åŠ¨æ€è£å‰ªç¼–ç å­—æ®µ"ã€‚ä¸ºæ­¤ï¼ŒVolo å¼•å…¥äº† <strong>thrift field mask</strong> èƒ½åŠ›ï¼Œå³é€šè¿‡ä¸€ä¸ªæ©ç åˆ—è¡¨æ¥æŒ‡å®šéœ€è¦ä¿ç•™çš„å­—æ®µï¼Œä»è€Œå®ç°æ•°æ®çš„ç²¾å‡†è£å‰ªã€‚è¯¥èƒ½åŠ›å·²åœ¨ Kitex æ¡†æ¶ä¸­å¾—åˆ°éªŒè¯å’Œè½åœ°ï¼Œç›®å‰å·²é€‚é… Volo æ¡†æ¶ã€‚
ä»¥ Client ç«¯è£å‰ª request ä¸ºä¾‹ï¼Œä½¿ç”¨ thrift field mask éœ€è¦ä¸¤æ­¥æ“ä½œï¼š</p>
<ol>
<li>
<p><strong>æŒ‡å®š</strong> <strong><code>thrift path</code></strong> <strong>ä½œä¸ºæ©ç åˆ—è¡¨</strong>ï¼ˆæ”¯æŒé»‘ç™½åå•é…ç½®ï¼Œé»˜è®¤ä¸ºç™½åå•ï¼Œå³æŒ‡å®šéœ€è¦ä¿ç•™çš„å­—æ®µï¼‰ã€‚</p>
</li>
<li>
<p><strong>ä¼ å…¥</strong> <strong><code>struct descriptor</code></strong>ã€‚</p>
</li>
</ol>
<p>ä¸ºé™ä½æ€§èƒ½æŸè€—ï¼Œå»ºè®®ä½¿ç”¨<strong>å…¨å±€ç¼“å­˜</strong>æ¥å‡å°‘ field mask æ„å»ºå¼€é”€å¯¹ä¸»é“¾è·¯çš„å½±å“ã€‚</p>
<p>ä¸ºä¿éšœç”Ÿæ€çš„å…¼å®¹æ€§ï¼ŒVolo é‡‡ç”¨äº†ä¸ Kitex ä¸€è‡´çš„ <code>thrift path</code> å®šä¹‰ï¼ŒKitex ç”¨æˆ·å¯ä»¥æ— ç¼å¤ç”¨å…¶è·¯å¾„å®šä¹‰ï¼Œæ— éœ€é¢å¤–é€‚é…ã€‚<code>struct descriptor</code> å¯ä»¥é€šè¿‡ç”Ÿæˆä»£ç ä¸­ç»“æ„ä½“çš„å†…ç½®æ–¹æ³•è·å–ï¼Œè¿™ä¸€è®¾è®¡ä¹Ÿä¸º <code>pb descriptor</code> çš„åç»­è¿­ä»£æŒ‡æ˜äº†æ–¹å‘ã€‚</p>
<p>åœ¨ç”¨æˆ·å±‚é¢ï¼Œåªéœ€ä¸º request è®¾ç½® <code>fieldmask</code>ï¼Œç”Ÿæˆä»£ç ä¾¿ä¼šè‡ªåŠ¨å®ŒæˆåŠ¨æ€è£å‰ªçš„é€»è¾‘ã€‚æ­¤å¤–ï¼ŒVolo è¿˜æä¾›äº†å¤šä¸ª API æ¥å£æ¥ç®€åŒ– <code>fieldmask</code> çš„æ“ä½œã€‚
<strong>åç»­è§„åˆ’</strong> ï¼šæ”¯æŒ <code>fieldmask</code> è‡ªèº«çš„åºåˆ—åŒ–ä¸ä¼ é€’ï¼Œä»¥æ»¡è¶³"é€šçŸ¥å¯¹ç«¯æœåŠ¡å±è”½ç‰¹å®šå­—æ®µ"çš„åœºæ™¯éœ€æ±‚ã€‚</p>
<h4 data-id="heading-9">ä¸‰ã€volo-http 0.4 åŠ Rust ç”Ÿæ€ç»„ä»¶æ›´æ–°</h4>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0a237bfcfec249b4babaa67103c643ca~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ2xvdWRXZUdv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766648812&amp;x-signature=WnK5xA07OTMNHYJ2cKVmAv1hD6c%3D" alt="" loading="lazy"/>
é™¤ RPC æ¡†æ¶è¿­ä»£å¤–ï¼ŒVolo è¿˜æ¨è¿›äº† HTTP èƒ½åŠ›å‡çº§ä¸ Rust ç”Ÿæ€ç»„ä»¶ä¼˜åŒ–ï¼š</p>
<ul>
<li>
<p><strong>volo-http 0.4 å‡çº§</strong> ï¼šæ–°å¢äº†å¯¹ <strong>HTTP/2</strong> çš„æ”¯æŒå’Œè¿æ¥æ± ä¼˜åŒ–ï¼ŒåŒæ—¶æ”¹è¿›äº† trace èƒ½åŠ›ï¼Œæå‡äº† HTTP æœåŠ¡çš„æ€§èƒ½ä¸å¯è§‚æµ‹æ€§ã€‚</p>
</li>
<li>
<p><strong>sonic-rs 0.5 å‡çº§</strong> ï¼šå®Œå–„äº†å¤šæ¶æ„æ”¯æŒï¼Œä¸º ARM æ¶æ„æ–°å¢äº† <code>sort_keys</code>ã€<code>utf8-lossy</code> ç­‰ç‰¹æ€§ï¼Œæå‡äº† object ç±»å‹çš„æŸ¥è¯¢æ€§èƒ½ï¼Œå¹¶ä¸º <code>faststr</code> å®ç°äº† GDB/LLDB è°ƒè¯•æ’ä»¶ï¼Œä»¥é™ä½è°ƒè¯•æˆæœ¬ã€‚</p>
</li>
<li>
<p><strong>linkedbytes å‡çº§</strong> ï¼šæ”¯æŒ <code>io slice</code>ï¼Œå¹¶æä¾›äº† <code>concat</code> æ¥å£ç”¨äºè·å–å®Œæ•´çš„ bytesï¼Œæå‡äº†æ•°æ®æ“ä½œçš„çµæ´»æ€§ä¸æ•ˆç‡ã€‚</p>
</li>
</ul>
<p>ä½œä¸º CloudWeGo ç”Ÿæ€ä¸­ Rust æ–¹å‘çš„æ ¸å¿ƒç»´æŠ¤è€…ï¼Œå›¢é˜Ÿå°†æŒç»­èšç„¦äºæ€§èƒ½ä¸æ˜“ç”¨æ€§ï¼Œè‡´åŠ›äºè¾“å‡ºæ›´å¤šé«˜è´¨é‡çš„ Rust å¾®æœåŠ¡ç»„ä»¶ã€‚</p>
<h4 data-id="heading-10">å››ã€æœªæ¥è§„åˆ’ï¼šæŒç»­å®Œå–„ Rust å¾®æœåŠ¡ç”Ÿæ€</h4>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ecf9250d555f4318b44e5169300264e5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ2xvdWRXZUdv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766648812&amp;x-signature=ywrq7M7TKrH%2Fp%2FapUpbR%2BTyVi6s%3D" alt="" loading="lazy"/></p>
<p>åç»­ï¼ŒVolo å°†å›´ç»• <strong>RPC æ¡†æ¶å‡çº§</strong> å’Œ <strong>Rust ç”Ÿæ€å®Œå–„</strong>ä¸¤å¤§æ–¹å‘æ¥æ¨è¿›è¿­ä»£ã€‚</p>
<ul>
<li>
<p><strong>RPC æ¡†æ¶å±‚é¢</strong></p>
<ul>
<li>
<p><strong>åè®®æ‰©å±•</strong> ï¼šå®ç° <code>thriftMultiService</code> ä¸ <code>Thrift Streaming</code>ã€‚</p>
</li>
<li>
<p><strong>æ€§èƒ½ä¼˜åŒ–</strong> ï¼šæ¥å…¥ <code>shmipc</code> å¹¶å®Œæˆ Volo é€‚é…ï¼Œä»¥è§£å†³ç”¨æˆ·è¿›ç¨‹ä¸ Sidecar ä¹‹é—´çš„ RPC é€šä¿¡å¼€é”€ã€‚</p>
</li>
<li>
<p><strong>æ˜“ç”¨æ€§æå‡</strong>ï¼šé‡æ„ç”Ÿæˆä»£ç çš„é”™è¯¯å¤„ç†é€»è¾‘ï¼Œå®Œå–„æœåŠ¡å‘ç°ä¸æœåŠ¡æ²»ç†ç»„ä»¶ï¼Œå¹¶å¼ºåŒ–ç”Ÿæ€çš„å¯è§‚æµ‹æ€§ã€‚</p>
</li>
</ul>
</li>
<li>
<p><strong>Rust ç”Ÿæ€å±‚é¢</strong></p>
<ul>
<li>
<p>ä¼˜åŒ– <code>faststr</code> çš„å†…å­˜å ç”¨ã€‚</p>
</li>
<li>
<p>æŒç»­å®Œå–„ <code>sonic-rs</code>ã€<code>linkedbytes</code> ç­‰ç»„ä»¶çš„æ€§èƒ½ä¸åŠŸèƒ½è¦†ç›–ï¼Œæ„å»ºæ›´å®Œæ•´çš„ Rust å¾®æœåŠ¡å·¥å…·é“¾ã€‚</p>
</li>
</ul>
</li>
</ul>
<h4 data-id="heading-11">äº”ã€æ€»ç»“</h4>
<p>Volo æ¡†æ¶çš„è¿­ä»£å§‹ç»ˆå›´ç»•"æ˜“ç”¨æ€§"ä¸"æ€§èƒ½"ä¸¤å¤§æ ¸å¿ƒç›®æ ‡ã€‚é€šè¿‡ <code>pb unknown fields</code>ã€<code>pb options</code>ã€<code>thrift field mask</code> ä¸‰å¤§æ ¸å¿ƒåŠŸèƒ½çš„è½åœ°ï¼Œç²¾å‡†è§£å†³äº†å¾®æœåŠ¡ä¸šåŠ¡ä¸­å­—æ®µé€ä¼ ã€ç¼–è§£ç æ§åˆ¶ã€æ•°æ®è£å‰ªç­‰ç—›ç‚¹ã€‚æ‰€æœ‰è¿­ä»£éƒ½åŸºäºç°æœ‰çš„ç”Ÿæ€æ¶æ„ï¼Œé€šè¿‡ Pilota å·¥å…·å’Œ <code>volo.yml</code> é…ç½®å®ç°äº†ä½ä¾µå…¥å¼çš„æ¥å…¥ï¼Œä¿éšœäº†å¼€å‘ä½“éªŒçš„ä¸€è‡´æ€§ã€‚</p>
<p>æœªæ¥ï¼Œéšç€ RPC åè®®ä¸æ–­æ‰©å±•ã€æ€§èƒ½æŒç»­ä¼˜åŒ–ä»¥åŠç”Ÿæ€ç»„ä»¶é€æ­¥å®Œå–„ï¼ŒVolo ä¼šè¿›ä¸€æ­¥é™ä½ä½¿ç”¨ Rust å¼€å‘å¾®æœåŠ¡çš„éš¾åº¦ï¼Œå‘æŒ¥ Rust è¯­è¨€é«˜æ€§èƒ½çš„ä¼˜åŠ¿ï¼Œä¸ºå¾®æœåŠ¡æ¶æ„çš„å‘å±•æä¾›æ›´é«˜æ•ˆçš„æŠ€æœ¯æ”¯æŒã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Jenkins æ‰“åŒ…å´©äº†ï¼Ÿç½ªé­æ˜¯ package.json é‡Œçš„ ^]]></title>    <link>https://juejin.cn/post/7584817405228744745</link>    <guid>https://juejin.cn/post/7584817405228744745</guid>    <pubDate>2025-12-18T08:00:28.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7584817405228744745" data-draft-id="7584824891595702308" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Jenkins æ‰“åŒ…å´©äº†ï¼Ÿç½ªé­æ˜¯ package.json é‡Œçš„ ^"/> <meta itemprop="keywords" content="å‰ç«¯,Jenkins"/> <meta itemprop="datePublished" content="2025-12-18T08:00:28.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸‰åªèŒæ–°"/> <meta itemprop="url" content="https://juejin.cn/user/360295544400973"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Jenkins æ‰“åŒ…å´©äº†ï¼Ÿç½ªé­æ˜¯ package.json é‡Œçš„ ^
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/360295544400973/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸‰åªèŒæ–°
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-18T08:00:28.000Z" title="Thu Dec 18 2025 08:00:28 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-18
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">äº‹æ•…æè¿°</h2>
<p>æµ‹è¯•åé¦ˆé¡¹ç›®åœ¨Jenkinsç¯å¢ƒæ‰“åŒ…å¤±è´¥ï¼Œåˆæ­¥æ ¸æŸ¥å‘ç°ï¼ŒæŠ¥é”™æ¥è‡ªé¡¹ç›®ä¾èµ–çš„å†…éƒ¨ graph åº“ï¼Œå…·ä½“æŠ¥é”™åŸå› æ˜¯ç±»å‹å®šä¹‰ä¸åŒ¹é…ã€‚æœ‰æ„æ€çš„æ˜¯ï¼Œæœ¬åœ°å¼€å‘ç¯å¢ƒç¼–è¯‘ã€è¿è¡Œéƒ½æ­£å¸¸ï¼Œé—®é¢˜åªåœ¨CIæ„å»ºæ—¶å‡ºç°ï¼Œæ‰€ä»¥æ’æŸ¥é‡ç‚¹æ”¾åœ¨äº†ç¯å¢ƒä¾èµ–ç®¡ç†çš„å·®å¼‚ä¸Šã€‚</p>
<p>æ ¹æ®æŠ¥é”™ä¿¡æ¯å®šä½åˆ° graph åº“çš„ä»£ç æ–‡ä»¶åï¼Œå‘ç°æœ¬åœ°çš„ä»£ç é€»è¾‘å’ŒJenkinsæ‰“åŒ…æ—¥å¿—é‡Œçš„æŠ¥é”™ä»£ç å®Œå…¨å¯¹ä¸ä¸Šã€‚è¿™æ˜¯å› ä¸ºgraphåº“åˆ†å®šåˆ¶åˆ†æ”¯å’Œä¸»çº¿åˆ†æ”¯ï¼Œæˆ‘ä»¬é¡¹ç›®ç”¨çš„å®šåˆ¶åˆ†æ”¯ä¼šåœ¨ç‰ˆæœ¬å·ååŠ â€œ-xxxâ€æ ‡è¯†ï¼Œè¿˜åŒ…å«ä¸“å±é€‚é…é€»è¾‘ï¼Œä¸ä¼šåˆå¹¶åˆ°ä¸»çº¿ã€‚è¿™ç§ä»£ç å·®å¼‚ï¼ŒåŸºæœ¬å¯ä»¥ç¡®å®šæ˜¯ä¾èµ–ç‰ˆæœ¬æ‹‰å–å‡ºäº†é—®é¢˜ã€‚</p>
<p>è¿›ä¸€æ­¥æŸ¥ç‰ˆæœ¬ä¿¡æ¯ï¼Œpackage.jsoné‡Œgraphåº“å†™çš„æ˜¯â€œ^0.2.667-xxxâ€ï¼Œä½†Jenkinså®é™…æ‹‰å–çš„æ˜¯ä¸»çº¿æœ€æ–°ç‰ˆâ€œ0.2.682â€ã€‚æ›´å¥‡æ€ªçš„æ˜¯ï¼Œé¡¹ç›®çš„yarn.lockæ–‡ä»¶æ˜æ˜é”å®šäº†â€œ0.2.667-xxxâ€ï¼ŒæŒ‰è¯´yarnä¼šä¸¥æ ¼æŒ‰lockæ–‡ä»¶æ‹‰å–ä¾èµ–ï¼Œä¸è¯¥å‡ºç°è¿™ç§åå·®ã€‚</p>
<p>æœ€åæŸ¥å†…éƒ¨npmæœåŠ¡å™¨è®°å½•ï¼Œæ‰æ‰¾åˆ°æ ¹æºï¼šgraphåº“çš„â€œ0.2.667-xxxâ€ç‰ˆæœ¬æ ¹æœ¬æ²¡å‘å¸ƒæˆåŠŸã€‚yarnåœ¨ä»“åº“é‡Œæ‰¾ä¸åˆ°é”å®šçš„ç‰ˆæœ¬ï¼Œå°±è‡ªåŠ¨æŒ‰package.jsoné‡Œâ€œ^â€çš„è§„åˆ™æ¥ï¼Œæ‹‰å–äº†0.2.xä¸»ç‰ˆæœ¬ä¸‹çš„æœ€æ–°å¯ç”¨ç‰ˆ0.2.682ã€‚è€Œä¸»çº¿ç‰ˆæœ¬æ²¡æœ‰é¡¹ç›®éœ€è¦çš„å®šåˆ¶é€»è¾‘ï¼Œç±»å‹å®šä¹‰ä¸å…¼å®¹ï¼Œç›´æ¥å¯¼è‡´äº†æ‰“åŒ…å¤±è´¥ã€‚</p>
<h3 data-id="heading-1">æµç¨‹è¯´æ˜</h3>
<p>å°†ä¸Šé¢æµç¨‹é€šè¿‡åºåˆ—å›¾è¯´æ˜å¦‚ä¸‹ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/83c738fb749342929f5cfb5981835a87~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiJ5Y-q6JCM5paw:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766649628&amp;x-signature=UWlAn9QF4uhEznwCfDa4x6ID4fk%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-2">è§£å†³æ–¹æ¡ˆ</h3>
<p>é’ˆå¯¹ä¸Šè¿°é—®é¢˜ï¼Œæˆ‘ä»¬é‡‡å–äº†ä¸¤é¡¹æ ¸å¿ƒè§£å†³æªæ–½ï¼Œä»æ ¹æºä¸Šé¿å…åŒç±»é—®é¢˜å¤ç°ã€‚</p>
<p>é¦–å…ˆï¼Œä¼˜å…ˆå®Œæˆgraphåº“â€œ0.2.667-xxxâ€å®šåˆ¶ç‰ˆæœ¬çš„å‘å¸ƒå·¥ä½œï¼Œç¡®ä¿å†…éƒ¨npmæœåŠ¡å™¨ä¸Šèƒ½æ­£å¸¸è·å–è¯¥ç‰ˆæœ¬ã€‚è¿™ä¸€æ­¥è§£å†³äº†â€œä¾èµ–ç‰ˆæœ¬ç¼ºå¤±â€çš„ç›´æ¥é—®é¢˜ï¼Œè®©yarnå¯ä»¥æ‹‰å–åˆ°é¡¹ç›®å®é™…éœ€è¦çš„å®šåˆ¶åŒ–ä»£ç ã€‚</p>
<p>å…¶æ¬¡ï¼Œå¯¹package.jsonä¸­graphåº“çš„ç‰ˆæœ¬å®šä¹‰è¿›è¡Œè°ƒæ•´â€”â€”å»é™¤ç‰ˆæœ¬å·å‰çš„â€œ^â€ç¬¦å·ï¼Œå°†ç‰ˆæœ¬é”å®šä¸ºâ€œ0.2.667-xxxâ€ã€‚</p>
<p>åŸæœ¬çš„â€œ^â€ç¬¦å·ä¼šå…è®¸yarnåœ¨ä¸»ç‰ˆæœ¬ä¸å˜çš„æƒ…å†µä¸‹æ‹‰å–æœ€æ–°æ¬¡ç‰ˆæœ¬ï¼Œè€Œå»é™¤è¯¥ç¬¦å·åï¼Œä¾èµ–ç‰ˆæœ¬å°†è¢«ä¸¥æ ¼é™å®šï¼šä¸€æ–¹é¢ï¼Œå³ä½¿åç»­ä¸»çº¿å‘å¸ƒæ›´é«˜ç‰ˆæœ¬ï¼ˆå¦‚0.2.683ã€0.2.684ç­‰ï¼‰ï¼Œyarnä¹Ÿä¼šå§‹ç»ˆæ‹‰å–â€œ0.2.667-xxxâ€è¿™ä¸€æŒ‡å®šç‰ˆæœ¬ï¼Œå½»åº•æœç»â€œè‡ªåŠ¨å‡çº§å¼•å‘é€‚é…é—®é¢˜â€çš„é£é™©ï¼›</p>
<p>å¦ä¸€æ–¹é¢ï¼Œè‹¥è¯¥æŒ‡å®šç‰ˆæœ¬æœªåœ¨å†…éƒ¨æœåŠ¡å™¨å‘å¸ƒï¼Œyarnä¼šç›´æ¥æŠ›å‡ºâ€œä¾èµ–ä¸å­˜åœ¨â€çš„æ˜ç¡®é”™è¯¯ï¼Œè€Œéè‡ªåŠ¨åŒ¹é…å…¶ä»–ç‰ˆæœ¬ï¼Œè¿™ç§æŠ¥é”™æ–¹å¼èƒ½å¸®åŠ©æˆ‘ä»¬ç¬¬ä¸€æ—¶é—´å®šä½åˆ°â€œç‰ˆæœ¬æœªå‘å¸ƒâ€çš„æ ¸å¿ƒé—®é¢˜ï¼Œé¿å…é™·å…¥ä¾èµ–ç‰ˆæœ¬æ··ä¹±çš„æ’æŸ¥è¯¯åŒºã€‚</p>
<p>ç»è¿‡è¿™ä¸¤æ­¥æ“ä½œåï¼Œé‡æ–°è§¦å‘Jenkinsæ„å»ºï¼Œé¡¹ç›®é¡ºåˆ©æ‰“åŒ…æˆåŠŸï¼Œç±»å‹æŠ¥é”™é—®é¢˜å®Œå…¨è§£å†³ã€‚</p>
<p>é”å®šåŒ…ç‰ˆæœ¬ä»¥åå¦‚é‡åˆ°æŒ‡å®šåŒ…æœªå‘å¸ƒæ—¶ï¼Œåœ¨jenkinsä¸Šæ„å»ºåº”ç”¨æ—¶å°±ä¼šç›´æ¥æŠ›å‡ºé—®é¢˜æ–¹ä¾¿å¿«é€Ÿå®šä½é—®é¢˜ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/49c7da5e65ec44b5adefee384c108f9e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiJ5Y-q6JCM5paw:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766649628&amp;x-signature=bApg3zrsFhJfRagYakAH%2FXasHKw%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-3">yarn install ä¸‰ç§åœºæ™¯åˆ†æ</h2>
<ul>
<li><strong>åœºæ™¯ 1</strong>ï¼š<code>package.json</code> èŒƒå›´å‡çº§ï¼ˆ<code>^0.2.673</code> â†’ <code>^0.2.674</code>ï¼‰ï¼Œè§£æå‡ºæ›´é«˜ç‰ˆæœ¬ <code>0.2.682</code>ï¼Œè§¦å‘ <strong>ä¾èµ–æ›´æ–° + node_modules å˜æ›´</strong><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e4825426089d4c909ab58fc9ed6e3a59~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiJ5Y-q6JCM5paw:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766649628&amp;x-signature=Aa1h%2BTO7IYEB0jz%2BDEyAkk7%2Baj0%3D" alt="" loading="lazy"/></li>
</ul>
<p align="center">åœºæ™¯1åºåˆ—å›¾ </p>  
<ul>
<li><strong>åœºæ™¯ 2</strong>ï¼š<code>package.json</code> ä»ç²¾ç¡®ç‰ˆæœ¬ <code>0.2.673</code> æ”¹ä¸º <code>0.2.674</code>ï¼Œå¼ºåˆ¶å®‰è£…æ–°ç‰ˆæœ¬ï¼Œè§¦å‘ <strong>ä¾èµ–æ›´æ–° + node_modules å˜æ›´</strong><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4046054d9bb342a48f4c733f8577f9f0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiJ5Y-q6JCM5paw:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766649628&amp;x-signature=Gv09w5L4UChkfQl0XMg%2FIRY5PYI%3D" alt="" loading="lazy"/></li>
</ul>
<p align="center">åœºæ™¯2åºåˆ—å›¾ </p>  
<ul>
<li><strong>åœºæ™¯ 3</strong> <code>package.json</code> <strong>çš„ç‰ˆæœ¬èŒƒå›´è¢«æ›´æ–°</strong> çš„æƒ…å†µã€‚ç”±äºå®é™…å·²å®‰è£…çš„ç‰ˆæœ¬ï¼ˆ<code>0.2.682</code>ï¼‰ä»ç„¶ç¬¦åˆæ–°çš„èŒƒå›´ï¼ˆ<code>^0.2.674</code>ï¼‰ï¼Œå› æ­¤ä¸ä¼šé‡æ–°ä¸‹è½½åŒ…ï¼Œ<strong>åªä¼šæ›´æ–°</strong> <code>yarn.lock</code> <strong>ä¸­çš„â€œè¯·æ±‚æ ‡è¯†â€</strong> ã€‚</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4a65f0fd360746c2ab9b815fca4e75cf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiJ5Y-q6JCM5paw:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766649628&amp;x-signature=JO3sJ7mc%2FNSQeiRXuWRiBaHz0%2Bc%3D" alt="" loading="lazy"/></p>
<p align="center">åœºæ™¯3åºåˆ—å›¾ </p>  









































<table><thead><tr><th>åœºæ™¯</th><th>åˆå§‹çŠ¶æ€ï¼ˆä¿®æ”¹ <code>package.json</code>å‰ï¼‰</th><th>ä¿®æ”¹åçš„ <code>package.json</code></th><th>è§£æå‡ºçš„æ–°ç‰ˆæœ¬</th><th><code>yarn.lock</code>æ˜¯å¦æ›´æ–°ï¼Ÿ</th><th><code>node_modules</code>æ˜¯å¦æ›´æ–°ï¼Ÿ</th><th>å…³é”®è¯´æ˜</th></tr></thead><tbody><tr><td><strong>1</strong></td><td>â€¢ <code>node_modules/graph/package.json#version</code>: <code>0.2.673</code>â€¢ <code>package.json</code>****<strong>ä¸­å£°æ˜</strong>: <code>"graph": "^0.2.673"</code>â€¢ <code>yarn.lock</code>****<strong>ä¸­è®°å½•</strong>: <code>graph@^0.2.673:``version "0.2.673"``integrity sha512-...</code></td><td><code>"graph": "^0.2.674"</code></td><td><code>0.2.682</code></td><td>âœ… æ˜¯ ï¼ˆkey æ”¹ä¸º <code>graph@^0.2.674</code>ï¼Œversion â†’ <code>0.2.682</code>ï¼‰</td><td>âœ… æ˜¯</td><td>å½“å‰å®‰è£…çš„æ˜¯æ—§ç‰ˆ <code>0.2.673</code>ï¼Œæ–°èŒƒå›´å¯å‡çº§åˆ° <code>0.2.682</code>â†’ å…¨é‡æ›´æ–°ã€‚</td></tr><tr><td><strong>2</strong></td><td>â€¢ <code>node_modules/graph/package.json#v</code>: <code>0.2.673</code>â€¢ <code>package.json</code>****<strong>ä¸­å£°æ˜</strong>: <code>"graph": "0.2.673"</code>â€¢ <code>yarn.lock</code>****<strong>ä¸­è®°å½•</strong>: <code>graph@0.2.673:``version "0.2.673"``integrity sha512-...</code></td><td><code>"graph": "0.2.674"</code></td><td><code>0.2.674</code></td><td>âœ… æ˜¯ ï¼ˆkey â†’ <code>graph@0.2.674</code>ï¼Œversion â†’ <code>0.2.674</code>ï¼‰</td><td>âœ… æ˜¯</td><td>ç²¾ç¡®ç‰ˆæœ¬å˜æ›´ï¼Œå¼ºåˆ¶å®‰è£…æ–°ç‰ˆæœ¬ï¼ˆå‡è®¾å­˜åœ¨ï¼‰ã€‚</td></tr><tr><td><strong>3</strong></td><td>â€¢ <code>node_modules/graph/package.json#v</code>: <code>0.2.682</code>â€¢ <code>package.json</code>****<strong>ä¸­å£°æ˜</strong>: <code>"graph": "^0.2.673"</code>â€¢ <code>yarn.lock</code>****<strong>ä¸­è®°å½•</strong>: <code>graph@^0.2.673:``version "0.2.682"``integrity sha512-...</code></td><td><code>"graph": "^0.2.674"</code></td><td><code>0.2.682</code></td><td>âœ… æ˜¯ ï¼ˆä»… key æ”¹ä¸º <code>graph@^0.2.674</code>ï¼Œversion ä¸å˜ï¼‰</td><td>âŒ å¦</td><td>å®é™…å·²å®‰è£…æœ€æ–°ç‰ˆ <code>0.2.682</code>ï¼Œæ–°èŒƒå›´ä»å…¼å®¹ â†’ ä»…æ›´æ–° lock çš„â€œè¯·æ±‚æ ‡è¯†â€ã€‚</td></tr></tbody></table>
<h2 data-id="heading-4">yarn.lock</h2>
<h3 data-id="heading-5">ä½œç”¨</h3>
<p>yarn.lock çš„æ ¸å¿ƒä»·å€¼ï¼Œæ˜¯è§£å†³â€œä¾èµ–ç‰ˆæœ¬ä¸ä¸€è‡´â€é—®é¢˜ï¼Œå…¶åŸç†æ˜¯ï¼šç²¾å‡†è®°å½•é¡¹ç›®ä¸­æ¯ä¸ªä¾èµ–â€œåœ¨ package.json é‡Œå£°æ˜çš„ç‰ˆæœ¬èŒƒå›´â€ï¼Œä¸â€œå®é™…ä¸‹è½½å®‰è£…çš„ç²¾ç¡®ç‰ˆæœ¬â€ä¹‹é—´çš„å¯¹åº”å…³ç³»ã€‚</p>
<p>è¿™æ ·ä¸€æ¥ï¼Œæ— è®ºè°åœ¨ä»€ä¹ˆç¯å¢ƒä¸‹æ‰§è¡Œ <code>yarn install</code>ï¼ŒYarn éƒ½ä¸ä¼šé‡æ–°å»ç½‘ä¸ŠæŸ¥â€œå½“å‰æœ€æ–°ç‰ˆæœ¬æ˜¯ä»€ä¹ˆâ€ï¼Œè€Œæ˜¯ç›´æ¥å‚ç…§è¿™ä»½é”æ–‡ä»¶ï¼Œä¸‹è½½é‡Œé¢è®°å½•çš„ç²¾ç¡®ç‰ˆæœ¬ï¼Œä»è€Œç¡®ä¿æ‰€æœ‰äººæ‹¿åˆ°çš„ä¾èµ–æ ‘å®Œå…¨ä¸€æ ·ã€‚è¿™å¹¶éç²—æš´é”æ­»ç‰ˆæœ¬ï¼ˆæ¯”å¦‚å¼ºåˆ¶ä¸è®©å‡çº§ï¼‰ï¼Œè€Œæ˜¯é”å®šâ€œç‰ˆæœ¬è§£æç»“æœâ€â€”â€”æ—¢éµå¾ª package.json é‡Œâ€œå…è®¸å‡çº§åˆ°æŸä¸ªèŒƒå›´â€çš„è¯­ä¹‰ï¼ˆå¦‚ ^1.0.0 å…è®¸å‡çº§åˆ° 1.x.x ç³»åˆ—æœ€æ–°ç‰ˆï¼‰ï¼Œåˆé€šè¿‡å›ºåŒ–é¦–æ¬¡è§£æåçš„ç²¾ç¡®ç‰ˆæœ¬ï¼Œå®ç°â€œæ„å»ºç»“æœå¯ç¡®å®šâ€çš„ä¿éšœã€‚</p>
<p>yarn.lock æ˜¯â€œä¸Šæ¬¡æˆåŠŸæ„å»ºæ—¶ï¼Œä¾èµ–èŒƒå›´ä¸å…·ä½“ç‰ˆæœ¬å¯¹åº”å…³ç³»â€çš„å¿«ç…§ï¼Œè®© <code>yarn install</code> ä»â€œåŠ¨æ€è§£æâ€å˜ä¸ºâ€œç¡®å®šæ€§è¿˜åŸâ€ï¼Œæ˜¯é¡¹ç›®ç¨³å®šçš„æ ¸å¿ƒä¿éšœã€‚</p>
<h3 data-id="heading-6">yarn.lock æ¡ç›®å«ä¹‰</h3>
<p>ä»¥ä¸‹ä¸ºå…¸å‹æ¡ç›®ç»“æ„ï¼Œæ¸…æ™°å‘ˆç°â€œæŸ¥è¯¢æ¡ä»¶â†’è§£æç»“æœâ€çš„å¯¹åº”å…³ç³»ï¼š</p>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-comment"># é”®ï¼ˆkeyï¼‰ï¼špackage.json ä¸­çš„ä¾èµ–å£°æ˜ï¼ˆæŸ¥è¯¢æ¡ä»¶ï¼‰</span>
<span class="hljs-section">graph@^0.2.670:</span>
  <span class="hljs-comment"># å€¼ï¼ˆvalueï¼‰ï¼šå®é™…å®‰è£…çš„ä¾èµ–ä¿¡æ¯ï¼ˆè§£æç»“æœï¼‰</span>
  version <span class="hljs-string">"0.2.680"</span>        <span class="hljs-comment"># æœ€ç»ˆè½åœ°çš„ç²¾ç¡®ç‰ˆæœ¬ï¼Œä¸å— registry åç»­æ›´æ–°å½±å“</span>
  resolved <span class="hljs-string">"http://registry/graph-0.2.680.tgz"</span>  <span class="hljs-comment"># ä¾èµ–åŒ…ä¸‹è½½åœ°å€</span>
  integrity sha512-AbcDefG...==  <span class="hljs-comment"># å†…å®¹å“ˆå¸Œï¼Œæ ¡éªŒæ–‡ä»¶å®Œæ•´æ€§ä»¥é˜²ç¯¡æ”¹</span>
  <span class="hljs-comment"># ï¼ˆå¯é€‰ï¼‰dependenciesï¼šè¯¥ç‰ˆæœ¬è‡ªèº«çš„ä¾èµ–åˆ—è¡¨</span>
</code></pre>
<h3 data-id="heading-7"><code>yarn.lock</code> æ–‡ä»¶å˜æ›´çš„åœºæ™¯</h3>
<p>ä»…å½“ä¾èµ–å£°æ˜æˆ–ç‰ˆæœ¬éœ€æ±‚å˜åŒ–æ—¶ï¼Œyarn.lock æ‰ä¼šè‡ªåŠ¨æ›´æ–°ï¼Œå…·ä½“åŒ…æ‹¬ï¼š</p>













































<table><thead><tr><th>åœºæ™¯</th><th>è§¦å‘æ“ä½œ</th><th>åŸå› è¯´æ˜</th></tr></thead><tbody><tr><td><strong>1. æ–°å¢ä¾èµ–</strong></td><td><code>yarn add foo</code></td><td>éœ€è¦è®°å½•æ–°åŒ…åŠå…¶å®Œæ•´ä¾èµ–æ ‘</td></tr><tr><td><strong>2. ç§»é™¤ä¾èµ–</strong></td><td><code>yarn remove foo</code></td><td>åˆ é™¤è¯¥åŒ…åŠä¸å†è¢«å¼•ç”¨çš„å­ä¾èµ–</td></tr><tr><td><strong>3. å‡çº§ä¾èµ–</strong></td><td><code>yarn upgrade foo</code>æˆ–ä¿®æ”¹ <code>package.json</code>å <code>yarn install</code></td><td>è§£æå‡ºæ–°ç‰ˆæœ¬ï¼ˆæˆ–å³ä½¿ç‰ˆæœ¬ä¸å˜ä½†è¯·æ±‚èŒƒå›´å˜äº†ï¼‰</td></tr><tr><td><strong>4. ä¿®æ”¹</strong> ****<code>package.json</code>****<strong>ä¸­çš„ç‰ˆæœ¬èŒƒå›´</strong></td><td>æ‰‹åŠ¨æ”¹ <code>"foo": "^1.0.0"</code>â†’ <code>"^1.1.0"</code>ï¼Œç„¶å <code>yarn install</code></td><td>Yarn å¿…é¡»æ›´æ–° lock ä¸­çš„ <strong>è¯·æ±‚æ ‡è¯†ï¼ˆkeyï¼‰</strong> ä»¥åŒ¹é…æ–°èŒƒå›´ï¼ˆå³ä½¿å®é™…å®‰è£…ç‰ˆæœ¬æœªå˜ï¼‰</td></tr><tr><td><strong>5. é¦–æ¬¡ç”Ÿæˆ lock æ–‡ä»¶</strong></td><td>é¡¹ç›®ä¸­æ²¡æœ‰ <code>yarn.lock</code>æ—¶è¿è¡Œ <code>yarn install</code></td><td>è‡ªåŠ¨ç”Ÿæˆå®Œæ•´ä¾èµ–å¿«ç…§</td></tr><tr><td><strong>6. ä¾èµ–çš„ä¼ é€’ä¾èµ–å‘ç”Ÿå˜åŒ–</strong></td><td>æŸä¸ªé—´æ¥ä¾èµ–å‘å¸ƒäº†æ–°ç‰ˆæœ¬ï¼Œä¸”æ»¡è¶³ SemVer èŒƒå›´</td><td>æ•´ä¸ªä¾èµ–æ ‘é‡æ–°è§£æï¼Œlock æ›´æ–°</td></tr><tr><td><strong>7. æ‰‹åŠ¨ç¼–è¾‘åè¿è¡Œ</strong> ****<code>yarn install</code></td><td>ä¿®æ”¹äº† <code>yarn.lock</code>å†…å®¹</td><td>Yarn ä¼šä»¥ <code>package.json</code>ä¸ºå‡†ï¼Œ<strong>è¦†ç›–ä½ çš„æ‰‹åŠ¨ä¿®æ”¹</strong></td></tr></tbody></table>
<h3 data-id="heading-8"><code>yarn.lock</code> æ–‡ä»¶ä¸ä¼šå˜æ›´çš„åœºæ™¯</h3>

























<table><thead><tr><th>åœºæ™¯</th><th>è§¦å‘æ“ä½œ</th><th>åŸå› è¯´æ˜</th></tr></thead><tbody><tr><td><strong>1. ä»…è¿è¡Œ</strong> ****<code>yarn install</code><strong>ï¼Œä¸”</strong> ****<code>package.json</code>****<strong>æœªå˜</strong></td><td><code>yarn install</code>ï¼ˆæ— å…¶ä»–æ”¹åŠ¨ï¼‰</td><td>Yarn å®Œå…¨ä¿¡ä»»ç°æœ‰ lock æ–‡ä»¶ï¼Œè·³è¿‡è§£æé˜¶æ®µ</td></tr><tr><td><strong>2. ä»…åˆ é™¤/ä¿®æ”¹</strong> ****<code>node_modules</code></td><td><code>rm -rf node_modules &amp;&amp; yarn install</code></td><td>Yarn ä¼šæŒ‰ <code>yarn.lock</code><strong>åŸæ ·è¿˜åŸ</strong>ï¼Œä¸æ”¹å˜ lock å†…å®¹</td></tr><tr><td><strong>3. ä½¿ç”¨</strong> ****<code>--frozen-lockfile</code>****<strong>ä¸” lock æœ‰æ•ˆ</strong></td><td><code>yarn install --frozen-lockfile</code></td><td>æ˜ç¡®ç¦æ­¢ä»»ä½• lock å˜æ›´ï¼Œåªå…è®¸æŒ‰ç°æœ‰ lock å®‰è£…</td></tr></tbody></table>
<h2 data-id="heading-9">å…¶ä»–æ¦‚å¿µ</h2>
<h3 data-id="heading-10"><code>version</code> ä¸ <code>integrity</code>ç­‰å…ƒæ•°æ®</h3>
<p>å…ƒæ•°æ®å°±æ˜¯ä¸“é—¨æè¿°â€œåŒ…â€è¿™ä¸€å®ä½“çš„ä¿¡æ¯é›†åˆï¼Œæ¯”å¦‚åŒ…çš„åç§°ã€ç‰ˆæœ¬ã€ä¸‹è½½åœ°å€ç­‰ï¼Œç›¸å½“äºåŒ…çš„â€œèº«ä»½è¯+è¯´æ˜ä¹¦â€ã€‚</p>
<p>å…ƒæ•°æ®çš„æ ¸å¿ƒä»·å€¼æ˜¯è§£å†³â€œåŒ…çš„é«˜æ•ˆç®¡ç†ä¸å®‰å…¨ä½¿ç”¨â€é—®é¢˜ï¼Œå…·ä½“ä½“ç°åœ¨ä¸‰ä¸ªå±‚é¢ï¼š</p>
<ol>
<li>å®šä½å±‚é¢ï¼šè®©åŒ…ç®¡ç†å·¥å…·ï¼ˆYarn/npmï¼‰èƒ½å¿«é€Ÿæ‰¾åˆ°åŒ…çš„å­˜å‚¨ä½ç½®ï¼ˆé€šè¿‡ dist.tarballï¼‰ï¼Œæ— éœ€éå†å…¨ç½‘ï¼›</li>
<li>åŒ¹é…å±‚é¢ï¼šé€šè¿‡ version å’Œ dependencies å®ç°â€œéœ€æ±‚ç‰ˆæœ¬â€ä¸â€œå®é™…ç‰ˆæœ¬â€çš„ç²¾å‡†åŒ¹é…ï¼Œé¿å…ä¾èµ–æ··ä¹±ï¼›</li>
<li>å®‰å…¨å±‚é¢ï¼šå€ŸåŠ© integrity ç­‰å“ˆå¸Œä¿¡æ¯ï¼Œç¡®ä¿ä¸‹è½½çš„åŒ…æœªè¢«ç¯¡æ”¹ï¼Œä¿éšœé¡¹ç›®å®‰å…¨ã€‚ç®€å•æ¥è¯´ï¼Œæ²¡æœ‰å…ƒæ•°æ®ï¼ŒåŒ…ç®¡ç†å·¥å…·å°±æ— æ³•è¯†åˆ«ã€è·å–å’Œæ ¡éªŒåŒ…ï¼Œä¾èµ–å®‰è£…ä¼šé™·å…¥â€œæ— æ®å¯ä¾â€çš„æ··ä¹±çŠ¶æ€ã€‚</li>
</ol>













































<table><thead><tr><th>å­—æ®µ</th><th>æ˜¯å¦å…ƒæ•°æ®</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>name</code></td><td>âœ… æ˜¯</td><td>åŒ…å</td></tr><tr><td><code>version</code></td><td>âœ… æ˜¯</td><td>è¯­ä¹‰åŒ–ç‰ˆæœ¬å·</td></tr><tr><td><code>dependencies</code></td><td>âœ… æ˜¯</td><td>ä¾èµ–å£°æ˜</td></tr><tr><td><code>dist.tarball</code></td><td>âœ… æ˜¯</td><td>ä¸‹è½½åœ°å€ï¼ˆURLï¼‰</td></tr><tr><td><code>dist.integrity</code></td><td>âœ… æ˜¯</td><td>å†…å®¹å“ˆå¸Œï¼ˆç”¨äºæ ¡éªŒï¼‰</td></tr><tr><td><code>dist.shasum</code></td><td>âœ… æ˜¯</td><td>SHA-1 å“ˆå¸Œï¼ˆæ—§ç‰ˆå…¼å®¹ï¼‰</td></tr><tr><td><code>.tgz</code>æ–‡ä»¶å†…å®¹</td><td>âŒ å¦</td><td>å®é™…ä»£ç /èµ„æºï¼Œå±äºâ€œåˆ¶å“ï¼ˆartifactï¼‰â€</td></tr></tbody></table>
<h4 data-id="heading-11">ğŸ”¹ 1. <code>version</code>ï¼ˆç‰ˆæœ¬å·ï¼‰çš„ä½œç”¨</h4>
<ul>
<li><strong>ä½œç”¨</strong>ï¼šæ ‡è¯†åŒ…çš„è¯­ä¹‰åŒ–ç‰ˆæœ¬ï¼ˆå¦‚ <code>0.2.682</code>ï¼‰ï¼Œç”¨äº SemVer èŒƒå›´åŒ¹é…ã€‚</li>
<li><strong>æ¥æº</strong>ï¼š</li>
</ul>

<ul>
<li>
<ul>
<li>æ¥è‡ªåŒ…çš„ <code>package.json</code> ä¸­çš„ <code>"version"</code> å­—æ®µã€‚</li>
<li>åœ¨å‘å¸ƒæ—¶ç”±å¼€å‘è€…å®šä¹‰ï¼Œ<strong>åœ¨ registry ä¸­å­˜å‚¨</strong>ã€‚</li>
</ul>
</li>
</ul>

<ul>
<li><strong>å›¾ä¸­ä½“ç°</strong>ï¼š</li>
</ul>

<ul>
<li>
<ul>
<li>Yarn ä» registry è·å–ç‰ˆæœ¬åˆ—è¡¨ â†’ <code>[0.2.680, 0.2.681, 0.2.682]</code></li>
<li>æ ¹æ® <code>^0.2.673</code> è§£æå‡ºæœ€é«˜å…¼å®¹ç‰ˆæœ¬ â†’ <code>0.2.682</code></li>
</ul>
</li>
</ul>
<p>ğŸ’¡ <code>version</code> æ˜¯â€œ<strong>æˆ‘æƒ³è¦å“ªä¸ªç‰ˆæœ¬</strong>â€çš„ä¾æ®ã€‚</p>
<hr/>
<h4 data-id="heading-12">ğŸ”¹ 2. <code>integrity</code>ï¼ˆå®Œæ•´æ€§å“ˆå¸Œï¼‰çš„ä½œç”¨</h4>
<ul>
<li><strong>ä½œç”¨</strong>ï¼šç¡®ä¿ä¸‹è½½çš„ <code>.tgz</code> æ–‡ä»¶å†…å®¹æœªè¢«ç¯¡æ”¹æˆ–æŸåï¼Œå®ç°å®‰å…¨æ ¡éªŒã€‚</li>
<li><strong>ç”Ÿæˆæ–¹å¼</strong>ï¼š</li>
</ul>

<ul>
<li>
<ul>
<li>å‘å¸ƒæ—¶ï¼Œnpm CLI è®¡ç®— <code>.tgz</code> æ–‡ä»¶çš„ <strong>SHA-512 å“ˆå¸Œå€¼</strong>ï¼Œå¹¶è½¬ä¸º Base64 ç¼–ç ã€‚</li>
<li>æ ¼å¼ï¼š<code>sha512-Abc123...==</code></li>
</ul>
</li>
</ul>

<ul>
<li><strong>å›¾ä¸­ä½“ç°</strong>ï¼š</li>
</ul>

<ul>
<li>
<ul>
<li>Yarn ä¸‹è½½ <code>graph-0.2.682.tgz</code> åï¼Œæœ¬åœ°è®¡ç®—å…¶ <code>integrity</code></li>
<li>ä¸ registry æä¾›çš„ <code>integrity</code> æ¯”å¯¹ â†’ è‹¥ä¸€è‡´åˆ™é€šè¿‡</li>
</ul>
</li>
</ul>
<h3 data-id="heading-13">Registry <strong>æœåŠ¡</strong></h3>
<p><strong>Registry æ˜¯ä¸€ä¸ªç¬¦åˆ npm åè®®çš„ HTTP æœåŠ¡</strong>ï¼Œä¸»è¦åŠŸèƒ½åŒ…æ‹¬ï¼š</p>
<ol>
<li><strong>å­˜å‚¨åŒ…çš„å…ƒæ•°æ®</strong></li>
</ol>
<ul>
<li>
<ul>
<li>åŒ…åã€ç‰ˆæœ¬åˆ—è¡¨ã€ä¾èµ–å…³ç³»ã€<code>integrity</code>ã€tarball åœ°å€ç­‰</li>
</ul>
</li>
</ul>
<ol start="2">
<li><strong>å­˜å‚¨æˆ–ä»£ç†åŒ…çš„å®é™…å†…å®¹ï¼ˆ.tgz æ–‡ä»¶ï¼‰</strong></li>
</ol>
<ul>
<li>
<ul>
<li>æœ‰äº› registry è‡ªå·±å­˜ï¼ˆå¦‚ Verdaccioï¼‰ï¼Œæœ‰äº›åªä»£ç†ï¼ˆå¦‚ Nexus proxyï¼‰</li>
</ul>
</li>
</ul>
<ol start="3">
<li><strong>æä¾›æ ‡å‡† API æ¥å£</strong></li>
</ol>
<ul>
<li>
<ul>
<li><code>GET /&lt;package&gt;</code> â†’ è¿”å›å…ƒæ•°æ®</li>
<li><code>GET /&lt;package&gt;/-/&lt;package&gt;-&lt;version&gt;.tgz</code> â†’ è¿”å›åŒ…å†…å®¹</li>
</ul>
</li>
</ul>
<p>ç›´æ¥é€šè¿‡ HTTP è®¿é—® registry çš„å…ƒæ•°æ®æ¥å£ï¼Œè·å–åº“æ‰€æœ‰ç‰ˆæœ¬çš„ä¿¡æ¯ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d7b0932cf488465ebf90a7386554fe78~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiJ5Y-q6JCM5paw:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766649628&amp;x-signature=NE0wvTcOHBeF3MMrRC4%2B%2BDLFLms%3D" alt="" loading="lazy"/></p>
<p>å±•å¼€å…¶ä¸­ä¸€ä¸ªç‰ˆæœ¬æŸ¥çœ‹ dist å­—æ®µ</p>



































<table><thead><tr><th>å­—æ®µ</th><th>ç±»å‹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>name</code></td><td>string</td><td>åŒ…åï¼Œå”¯ä¸€æ ‡è¯†ã€‚ä¾‹å¦‚ï¼š<code>"m-design-graph"</code></td></tr><tr><td><code>version</code></td><td>string</td><td>å½“å‰ç‰ˆæœ¬å·ï¼Œå¦‚ <code>"0.2.667"</code>ã€‚ç”¨äº SemVer è§£æå’Œä¾èµ–åŒ¹é…ã€‚</td></tr><tr><td><code>dist.integrity</code></td><td>string</td><td><strong>å®‰å…¨æ ¡éªŒæ ¸å¿ƒ</strong>ã€‚ æ ¼å¼ï¼š<code>sha512-Abc...==</code>ç”±å‘å¸ƒæ—¶ <code>.tgz</code>æ–‡ä»¶çš„ SHA-512 å“ˆå¸Œç”Ÿæˆï¼ŒYarn/npm ç”¨å®ƒéªŒè¯ä¸‹è½½å†…å®¹æ˜¯å¦è¢«ç¯¡æ”¹ã€‚</td></tr><tr><td><code>dist.tarball</code></td><td>string</td><td><strong>åŒ…çš„å®é™…ä¸‹è½½åœ°å€</strong>ã€‚ ä¾‹å¦‚ï¼š <code>http://192.168.123.33:8081/repository/npm-public/m-design-graph/-/m-design-graph-0.2.667.tgz</code>Yarn ä¼šä»è¿™é‡Œä¸‹è½½ <code>.tgz</code>æ–‡ä»¶ã€‚</td></tr><tr><td><code>dist.shasum</code></td><td>string</td><td>æ—§ç‰ˆå“ˆå¸Œï¼ˆSHA-1ï¼‰ï¼Œç”¨äºå…¼å®¹è€ç‰ˆæœ¬å·¥å…·ã€‚ ç°åœ¨ä¼˜å…ˆä½¿ç”¨ <code>integrity</code>ã€‚</td></tr></tbody></table>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1018a1b572a245a1aba8e390a4a02b88~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiJ5Y-q6JCM5paw:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766649628&amp;x-signature=cl7vznqYHVsJ7EjqDm5CYsxzShM%3D" alt="" loading="lazy"/></p>



































<table><thead><tr><th>å­—æ®µ</th><th>ç±»å‹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>name</code></td><td>string</td><td>åŒ…åï¼Œå”¯ä¸€æ ‡è¯†ã€‚ä¾‹å¦‚ï¼š<code>"m-design-graph"</code></td></tr><tr><td><code>version</code></td><td>string</td><td>å½“å‰ç‰ˆæœ¬å·ï¼Œå¦‚ <code>"0.2.667"</code>ã€‚ç”¨äº SemVer è§£æå’Œä¾èµ–åŒ¹é…ã€‚</td></tr><tr><td><code>dist.integrity</code></td><td>string</td><td><strong>å®‰å…¨æ ¡éªŒæ ¸å¿ƒ</strong>ã€‚ æ ¼å¼ï¼š<code>sha512-Abc...==</code>ç”±å‘å¸ƒæ—¶ <code>.tgz</code>æ–‡ä»¶çš„ SHA-512 å“ˆå¸Œç”Ÿæˆï¼ŒYarn/npm ç”¨å®ƒéªŒè¯ä¸‹è½½å†…å®¹æ˜¯å¦è¢«ç¯¡æ”¹ã€‚</td></tr><tr><td><code>dist.tarball</code></td><td>string</td><td><strong>åŒ…çš„å®é™…ä¸‹è½½åœ°å€</strong>ã€‚ ä¾‹å¦‚ï¼š <code>http://192.168.123.33:8081/repository/npm-public/m-design-graph/-/m-design-graph-0.2.667.tgz</code>Yarn ä¼šä»è¿™é‡Œä¸‹è½½ <code>.tgz</code>æ–‡ä»¶ã€‚</td></tr><tr><td><code>dist.shasum</code></td><td>string</td><td>æ—§ç‰ˆå“ˆå¸Œï¼ˆSHA-1ï¼‰ï¼Œç”¨äºå…¼å®¹è€ç‰ˆæœ¬å·¥å…·ã€‚ ç°åœ¨ä¼˜å…ˆä½¿ç”¨ <code>integrity</code>ã€‚</td></tr></tbody></table>
<h2 data-id="heading-14">ä»æ•…éšœæ’æŸ¥åˆ°ä¾èµ–ç®¡ç†çš„è®¤çŸ¥æå‡</h2>
<p>æœ¬æ¬¡Jenkinsæ‰“åŒ…æ•…éšœçš„æ ¸å¿ƒåŸå› å¯å½’ç»“ä¸ºä¸¤ç‚¹ï¼š</p>
<ul>
<li>ä¸€æ˜¯ç‰ˆæœ¬å£°æ˜çš„â€œéšæ€§é£é™©â€â€”â€”<code>package.json</code>ä¸­<code>^</code>ç¬¦å·çš„å…¼å®¹å‡çº§è¯­ä¹‰ï¼Œåœ¨â€œå®šåˆ¶ç‰ˆæœ¬æœªå‘å¸ƒâ€çš„å¼‚å¸¸åœºæ™¯ä¸‹ï¼Œè§¦å‘äº†yarnçš„ç‰ˆæœ¬å…œåº•æœºåˆ¶ï¼Œå¯¼è‡´éé¢„æœŸçš„ä¸»çº¿ç‰ˆæœ¬è¢«æ‹‰å–ï¼›</li>
<li>äºŒæ˜¯å‘å¸ƒæµç¨‹çš„â€œæ ¡éªŒç¼ºå¤±â€â€”â€”graphåº“â€œ0.2.667-xxxâ€å®šåˆ¶ç‰ˆæœ¬æœªæˆåŠŸå‘å¸ƒè‡³å†…éƒ¨ä»“åº“ï¼Œå´æœªè¢«åŠæ—¶å‘ç°ï¼Œå½¢æˆäº†â€œå£°æ˜ç‰ˆæœ¬ä¸å¯è·å–ç‰ˆæœ¬ä¸ä¸€è‡´â€çš„åº•å±‚æ¼æ´ã€‚</li>
</ul>
<p>ä¸¤è€…å åŠ ï¼Œæœ€ç»ˆå› ä¸»çº¿ç‰ˆæœ¬ä¸å®šåˆ¶åŒ–ä»£ç çš„ç±»å‹ä¸å…¼å®¹ï¼Œå¼•å‘æ„å»ºå¤±è´¥ã€‚</p>
<p>è€Œæ¯”è§£å†³æ•…éšœæ›´æœ‰ä»·å€¼çš„ï¼Œæ˜¯æ­¤æ¬¡æ’æŸ¥è¿‡ç¨‹å¸¦æ¥çš„ä¾èµ–ç®¡ç†è®¤çŸ¥å‡çº§ã€‚æ­¤å‰å¯¹<code>package.json</code>ç‰ˆæœ¬ç¬¦å·ã€<code>yarn.lock</code>é”å®šæœºåˆ¶çš„ç†è§£å¤šåœç•™åœ¨â€œè¡¨é¢ä½¿ç”¨â€å±‚é¢ï¼Œé€šè¿‡æœ¬æ¬¡é—®é¢˜çš„æ·±æŒ–ï¼Œæˆ‘ä»¬æ¸…æ™°æŒæ¡äº†yarnä»â€œè§£æç‰ˆæœ¬èŒƒå›´â€åˆ°â€œåŒ¹é…ä»“åº“èµ„æºâ€çš„å®Œæ•´é€»è¾‘ï¼Œæ˜ç¡®äº†<code>yarn.lock</code>â€œå¿«ç…§ä¾èµ–è§£æç»“æœâ€çš„æ ¸å¿ƒä»·å€¼ï¼Œè¿™äº›è®¤çŸ¥ä¸å†æ˜¯æ–‡æ¡£ä¸­çš„æŠ½è±¡æ¦‚å¿µï¼Œè€Œæ˜¯ç»è¿‡æ•…éšœéªŒè¯çš„å®è·µå‡†åˆ™ã€‚</p>
<p>æœ€ç»ˆæ²‰æ·€çš„å®è·µè§„èŒƒâ€”â€”å®šåˆ¶åŒ–ä¾èµ–é‡‡ç”¨ç²¾ç¡®ç‰ˆæœ¬å£°æ˜ã€å‘å¸ƒåæ ¡éªŒç‰ˆæœ¬æœ‰æ•ˆæ€§ã€CIç¯å¢ƒå¼ºåˆ¶é”å®šlockæ–‡ä»¶â€”â€”æ—¢æ˜¯å¯¹æœ¬æ¬¡æ•…éšœçš„è§„é¿ï¼Œæ›´æ˜¯å°†è®¤çŸ¥å‡çº§è½¬åŒ–ä¸ºå¯è½åœ°çš„æµç¨‹ä¿éšœï¼Œè®©ä¾èµ–ç®¡ç†çœŸæ­£æˆä¸ºé¡¹ç›®é«˜æ•ˆäº¤ä»˜çš„æ”¯æ’‘ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å‰ç«¯å¯ä»¥è½¬å‹AIå·¥ç¨‹å¸ˆå—ï¼Ÿé‚£å¯å¤ªèƒ½äº†...]]></title>    <link>https://juejin.cn/post/7584987267292413998</link>    <guid>https://juejin.cn/post/7584987267292413998</guid>    <pubDate>2025-12-18T06:08:03.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7584987267292413998" data-draft-id="7584725529877545010" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å‰ç«¯å¯ä»¥è½¬å‹AIå·¥ç¨‹å¸ˆå—ï¼Ÿé‚£å¯å¤ªèƒ½äº†..."/> <meta itemprop="keywords" content="å‰ç«¯,Agent,LLM"/> <meta itemprop="datePublished" content="2025-12-18T06:08:03.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤§æ¨¡å‹æ•™ç¨‹"/> <meta itemprop="url" content="https://juejin.cn/user/1145012233707299"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å‰ç«¯å¯ä»¥è½¬å‹AIå·¥ç¨‹å¸ˆå—ï¼Ÿé‚£å¯å¤ªèƒ½äº†...
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1145012233707299/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤§æ¨¡å‹æ•™ç¨‹
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-18T06:08:03.000Z" title="Thu Dec 18 2025 06:08:03 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-18
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»14åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#383838;font-size:15px;line-height:30px;letter-spacing:2px;word-break:break-word;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;scroll-behavior:smooth;background-image:linear-gradient(0deg,transparent 24%,rgba(201,195,195,.329) 25%,hsla(0,8%,80.4%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent),linear-gradient(90deg,transparent 24%,rgba(204,196,196,.226) 25%,hsla(0,4%,66.1%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent);background-color:#fff;background-size:50px 50px;padding-bottom:60px}.markdown-body ::selection{color:#fff;background-color:#a862ea}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin:24px 0 12px;color:#a862ea}.markdown-body h1{line-height:2;font-size:1.4em}.markdown-body h1~p:first-of-type:first-letter{color:#a862ea;float:left;font-size:2em;margin-right:.4em;font-weight:bolder}.markdown-body h2{font-size:1.2em}.markdown-body h3{font-size:1.1em}.markdown-body ol,.markdown-body ul{padding-left:2em}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;padding-left:.2em}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#a862ea}.markdown-body ol li.task-list-item,.markdown-body ul li.task-list-item{list-style:none}.markdown-body ol li.task-list-item ol,.markdown-body ol li.task-list-item ul,.markdown-body ul li.task-list-item ol,.markdown-body ul li.task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:10px}.markdown-body a,.markdown-body code,.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6,.markdown-body li,.markdown-body p{opacity:.85;vertical-align:baseline;transition:all .1s ease}.markdown-body a:hover,.markdown-body code:hover,.markdown-body h1:hover,.markdown-body h2:hover,.markdown-body h3:hover,.markdown-body h4:hover,.markdown-body h5:hover,.markdown-body h6:hover,.markdown-body li:hover,.markdown-body p:hover{opacity:1}.markdown-body a{display:inline-block;color:#a862ea;cursor:pointer;text-decoration:none;position:relative}.markdown-body a:after{content:"";position:absolute;width:98%;height:1px;bottom:0;left:0;transform:scaleX(0);background-color:#a862ea;transform-origin:bottom right;transition:transform .3s ease-in-out}.markdown-body a:hover:after{transform:scaleX(1);transform-origin:bottom left}.markdown-body a:active,.markdown-body a:link{color:#a862ea}.markdown-body img{max-width:100%;user-select:none;margin:1em 0;transition:transform .2s ease 0s;background-color:#f8f5ff;box-shadow:0 0 10px #e7daff}.markdown-body img:hover{opacity:1;box-shadow:0 0 20px #e7daff;transform:translateY(-1px)}.markdown-body blockquote{padding:.5em 1em;margin:12px 0;border-top-left-radius:2px;border-bottom-left-radius:2px;border-left:3px solid #a862ea;background-color:#f8f5ff}.markdown-body blockquote&gt;p{margin:0}.markdown-body .math{font-style:italic;margin:12px 0;padding:.5em 1em;background-color:#f8f5ff}.markdown-body .math&gt;p{margin:0}.markdown-body code{padding:2px .4em;overflow-x:auto;color:#a862ea;font-weight:700;word-break:break-word;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;background-color:#f8f5ff}.markdown-body pre{margin:2em 0}.markdown-body pre&gt;code{display:block;padding:1.5em;word-break:normal;font-size:.9em;font-style:normal;font-weight:400;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;line-height:18px;color:#383838;border-radius:2px;scroll-behavior:smooth;box-shadow:0 0 10px #e7daff}.markdown-body pre&gt;code:hover{box-shadow:0 0 20px #e7daff}.markdown-body pre&gt;code::-webkit-scrollbar{height:6px;background-color:#f8f5ff}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:#e7daff;border-bottom-left-radius:3px;border-bottom-right-radius:3px}.markdown-body hr{margin:2em 0;border-top:1px solid #a862ea}.markdown-body table{width:100%;font-size:12px;max-width:100%;overflow:auto;border-collapse:collapse}.markdown-body thead{color:#a862ea;background:#f8f5ff}.markdown-body td,.markdown-body th{padding:.5em;border:1px solid #e7daff}.markdown-body tr{background-color:#f8f5ff}@media (max-width:720px){.markdown-body{font-size:12px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>æœ¬æ–‡è¾ƒé•¿ï¼Œå»ºè®®ç‚¹èµæ”¶è—ã€‚æ›´å¤šAIå¤§æ¨¡å‹åº”ç”¨å¼€å‘å­¦ä¹ è§†é¢‘åŠèµ„æ–™ï¼Œåœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fgitcode.com%2FEnjoyEDU%2FLLM" target="_blank" title="https://gitcode.com/EnjoyEDU/LLM" ref="nofollow noopener noreferrer">è¿™é‡Œ</a>ã€‚</p>
</blockquote>
<p>è¿‘æ¥ç²‰ä¸é‡Œé¢æœ‰å‡ ä¸ªå‰ç«¯Leaderï¼Œä»–ä»¬ç•¥æ˜¾ç„¦è™‘çš„æ„Ÿæ…¨<strong>AIå¯¹ç¼–ç¨‹é¢†åŸŸçš„å†²å‡»å¤ªå¤§ï¼Œå°¤å…¶æ˜¯å‰ç«¯ï¼Œè¿™è®©ä»–ä»¬æ„Ÿå—åˆ°äº†ä¸å°çš„å‹åŠ›</strong>ã€‚</p>
<p>äºæ˜¯ï¼Œ<strong>ä»–ä»¬æƒ³å’¨è¯¢å‰ç«¯æ˜¯ä¸æ˜¯èƒ½å¤Ÿè½¬AIï¼Œå¹¶ç–‘æƒ‘å‰ç«¯èƒ½åœ¨AIè¿™ä¸ªèµ›é“èµ°å¤šè¿œ</strong>ï¼Ÿ</p>
<p>åªè¯´åº”ç”¨å±‚çš„AIèµ›é“ï¼Œå‰ç«¯æ˜¯<strong>éå¸¸é€‚åˆè½¬AIçš„</strong>ï¼Œç›®æ ‡å²—ä½å¯ä»¥æ˜¯<strong>AIå·¥ç¨‹å¸ˆ/AIäº§å“ç»ç†</strong>ï¼Œåšå¾—å¥½çš„å¯ä»¥å¹²åˆ°AIè´Ÿè´£äººï¼Œå¹¶ä¸”æˆ‘èº«è¾¹å·²ç»æœ‰å¾ˆå¤šé²œæ´»çš„æ¡ˆä¾‹ï¼Œæ‰€ä»¥å¤§å®¶ä¸å¿…ç„¦è™‘ã€‚</p>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬è¿›ä¸€æ­¥åˆ†è§£è¿™ä¸¤ä¸ªé—®é¢˜ï¼Œç¬¬ä¸€ä¸ªæ˜¯ä¸ºä»€ä¹ˆå‰ç«¯ç‰¹åˆ«ç„¦è™‘ï¼›ç¬¬äºŒä¸ªæ˜¯ä¸ºä»€ä¹ˆå‰ç«¯é€‚åˆè½¬AIï¼Ÿ</p>
<h2 data-id="heading-0">AIç¼–ç¨‹ä¸å‰ç«¯</h2>
<p>ä»ChatGPTè¯ç”Ÿåˆ°DeepSeekçˆ†å‘è¿‘3å¹´çš„æ—¶é—´ï¼Œæ–‡å­—ç±»åŒ…æ‹¬AIäº§å“ï¼Œæˆ–è€…åœ¨ç¨³å®šæ¶ˆè€—ç®—åŠ›tokençš„åªæœ‰ä¸‰ç±»åº”ç”¨ï¼š</p>
<ol>
<li>ChatGPT/DeepSeekå®˜ç½‘ç›´æ¥èŠå¤©ï¼›</li>
<li>ç®€å•AIå®¢æœï¼›</li>
<li>AIç¼–ç¨‹å¦‚Cursorã€Claude Codeï¼›</li>
</ol>
<p>å…¶ä»–è¿˜æœ‰äº›å·¥ä½œæµç±»çš„é¡¹ç›®ï¼Œå¯¹ç®—åŠ›æ¶ˆè€—çš„é‡å¾ˆå°ã€‚æŠ›å¼€ChatGPTä¸è¯´ï¼Œä¸ºä»€ä¹ˆAIå®¢æœæˆ–è€…AIç¼–ç¨‹ä¼šæˆä¸ºé¦–å…ˆçš„çˆ†æ¬¾å‘¢ï¼Ÿ</p>
<p>åŸå› å¾ˆç®€å•ï¼š</p>
<p><strong>AIå®¢æœéœ€è¦çš„æ•°æ®å¾ˆç®€å•ï¼Œå½“å‰çš„å¡ç‚¹å¤šæ•°æ¥æºäºå‡†ç¡®ç‡ï¼Œæ¯”å¦‚å¦‚ä½•ä»95%æå‡åˆ°98%è¿™ç§</strong>ï¼›</p>
<p>è€ŒAIç¼–ç¨‹è¿™ä¸ªå“ç±»èƒ½çˆ†å‘çš„æ ¸å¿ƒåŸå› ä¾æ—§æ˜¯<strong>ç¨‹åºå‘˜å–œæ¬¢ä½œæ­»ï¼Œå¼€æºç”Ÿæ€çš„ç¹è£ä¸ºä»£ç é¢†åŸŸçš„AIçªç ´æä¾›äº†å¤§é‡è¯­æ–™</strong>ï¼</p>
<p>GitHubä¸Šæœ‰è¶…è¿‡2äº¿ä¸ªå¼€æºä»“åº“ï¼Œæ¶µç›–å‡ ä¹æ‰€æœ‰ç¼–ç¨‹è¯­è¨€å’ŒæŠ€æœ¯æ ˆï¼Œè¿™ç§ç»“æ„åŒ–ã€æ ‡æ³¨æ¸…æ™°ï¼ˆé€šè¿‡ä»£ç é€»è¾‘éšå¼æ ‡æ³¨ï¼‰çš„æ–‡æœ¬æ•°æ®æ˜¯è®­ç»ƒä»£ç æ¨¡å‹çš„ç†æƒ³ç´ æã€‚</p>
<p>å°†è§†è§’æ‹‰è¿‘åˆ°å‰ç«¯ï¼Œæƒ…å†µå°±æ›´å¤æ‚äº†ï¼Œæˆ‘ä»¬ä¸å¾—ä¸æ‰¿è®¤ä¸€ä¸ªäº‹å®ï¼š</p>
<p><strong>å‰ç«¯çš„ä¸šåŠ¡é€»è¾‘ç›¸å¯¹ç®€å•ï¼Œå¹¶ä¸”å·²ç»åœ¨GitHubè¢«å®Œå…¨ç©·ä¸¾äº†ï¼Œæ¢å¥è¯è¯´ï¼Œè®­ç»ƒä¸€ä¸ªå‰ç«¯AIåˆ†èº«çš„æ•°æ®æ˜¯å®Œå…¨è¶³å¤Ÿçš„äº†ï¼</strong></p>
<p>å†å°†è§†è§’åˆ‡æ¢åˆ°åç«¯é¢†åŸŸï¼Œå¢åˆ æŸ¥æ”¹ç±»ä¸šåŠ¡å¯¹AIæ˜¯å°èœä¸€ç¢Ÿï¼Œä½†å¾ˆå¤šå…¬å¸ä¾æ—§æœ‰ä¸€äº›æ ¸å¿ƒçš„ä»£ç æ˜¯ä¸ä¼šä¸Šä¼ çš„ï¼Œå› ä¸ºæ”¾å‡ºæ¥ç›¸å½“äºå†…è£¤æ²¡äº†ï¼Œ<strong>æ‰€ä»¥åç«¯çš„è¯­æ–™æ˜¯ç¨å¾®å·®ç‚¹</strong>ï¼›</p>
<p>æœ€åï¼Œæˆ‘è¿˜è®¤è¯†å‡ ä¸ªåšèŠ¯ç‰‡å¼€å‘çš„åŒå­¦ï¼Œ<strong>AIè¾…åŠ©ç¼–ç¨‹å¯¹ä»–ä»¬æ¥è¯´ç­‰äºå‡ ä¹æ²¡æœ‰ï¼Œå› ä¸ºGitHubä¸Šæ ¹æœ¬æ²¡æœ‰ç›¸å…³è¯­æ–™</strong>ã€‚</p>
<p>ç»¼ä¸Šï¼Œå‰ç«¯çš„ä¸šåŠ¡é€»è¾‘ç®€å•ã€GitHubä¸Šçš„è¯­æ–™ä¸°å¯Œï¼Œè¿™ç›´æ¥é€ æˆäº†AIåœ¨å‰ç«¯è¿™ä¸ªé¢†åŸŸå·²ç»è¶³å¤Ÿçš„ä¼˜ç§€äº†ï¼ä¸¾ä¸ªä¾‹å­ï¼š</p>
<h2 data-id="heading-1">100%ææ•ˆï¼Ÿ</h2>
<p>åœ¨è®¸å¤š Cursor çš„å®£ä¼ æ¡ˆä¾‹ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸çœ‹åˆ°è¿™æ ·çš„â½°ä¾‹ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">è¾“â¼Šæâ½°è¯ï¼š<span class="hljs-string">"å¸®æˆ‘å®ç°â¼€ä¸ªæ•°ç‹¬æ¸¸æˆï¼Œä½¿â½¤ JavaScript å®ç°ã€‚"</span>
</code></pre>
<p>â¼¤çº¦ 30 ç§’åï¼ŒCursor å³å¯å®Œæˆä»éœ€æ±‚åˆ†æã€é—®é¢˜æ‹†è§£ã€ç¼–ç å®ç°åˆ°æ•ˆæœé¢„è§ˆçš„å®Œæ•´æµç¨‹ã€‚â½°ä¾‹æ•ˆæœï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/986a60728ec74035a284ee7aca68bd49~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L5pWZ56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766642883&amp;x-signature=D%2FpLkanq2ySvXP%2BpO8aEVP0F6jQ%3D" alt="" loading="lazy"/></p>
<p>è¿™ä¸ªæ•°ç‹¬æ¸¸æˆä¸ä»…å®ç°å®Œæ•´ï¼Œè¿˜â½€æŒå“åº”å¼å¸ƒå±€ã€‚å¦‚æœè®©å¼€å‘è€…â¼¿åŠ¨ç¼–ç å®ç°ï¼Œâ¼¤çº¦éœ€è¦ 4-8 â¼©æ—¶ï¼Œâ½½ Cursor ä»…éœ€ 30 ç§’ï¼Œæå‡çš„æ•ˆç‡ä½•â½Œ 10 å€ï¼Ÿç”šâ¾„ 100 å€ã€‚</p>
<p>è¿™ç±»åœºæ™¯çš„ç¡®å®¹æ˜“è®©â¼ˆè®¤ä¸º AI å…·å¤‡é¢ è¦†æ€§çš„æ•ˆç‡æå‡ã€‚ä½†æˆ‘ä»¬éœ€è¦æ‹†è§£è¿™äº›æ¡ˆä¾‹çš„ç‰¹ç‚¹ï¼š</p>
<ol>
<li><strong>éœ€æ±‚æ¸…æ™°ã€ä»»åŠ¡ç®€å•ï¼š</strong> æ•°ç‹¬æ¸¸æˆçš„è§„åˆ™å›ºå®šï¼ŒAI åªéœ€åŸºäºå·²æœ‰çš„è®­ç»ƒæ•°æ®â½£æˆä»£ç ï¼Œâ½½ä¸éœ€è¦é¢å¤–çš„ä¸Šä¸‹â½‚ç†è§£ï¼›</li>
<li><strong>ä»£ç è´¨é‡ä¸é‡è¦ï¼š</strong> åœ¨å±•â½°â€œAI é€Ÿåº¦â€çš„åœºæ™¯ä¸­ï¼Œä»£ç çš„å¥å£®æ€§ã€å¯ç»´æŠ¤æ€§å¾€å¾€è¢«å¿½ç•¥ã€‚å“ªæ€•â½£æˆçš„ä»£ç ä¸ç¬¦åˆå›¢é˜Ÿè§„èŒƒã€ä¸æ˜“æ‰©å±•ï¼Œä¹Ÿä¸ä¼šå½±å“å±•â½°æ•ˆæœï¼›</li>
<li><strong>æç«¯åœºæ™¯çš„æ”¾â¼¤ï¼š</strong> â¼€äº›æ¼”â½°è§†é¢‘å¯èƒ½ä¼šæŒ‘é€‰ AI è¡¨ç°æœ€ä¼˜çš„æ—¶åˆ»ï¼Œâ½½å¿½ç•¥å®ƒçŠ¯é”™çš„æƒ…å†µã€‚ä¾‹å¦‚ï¼Œåœ¨ Cursor â½£æˆ UI ä»£ç æ—¶ï¼Œå¯èƒ½ä¼šé—æ¼å¤æ‚äº¤äº’çš„ç»†èŠ‚ï¼Œå¯¼è‡´å®é™…ä½¿â½¤æ—¶éœ€è¦â¼¤é‡ä¿®æ”¹ï¼›</li>
</ol>
<blockquote>
<p>è¿™ç§èƒ½â¼’å¯¹äºâ¾®ä¸“ä¸šå¼€å‘è€…ã€åˆåˆ›å›¢é˜Ÿæˆ–éœ€è¦å¿«é€ŸéªŒè¯ MVPã€çŸ­å¹³å¿«çš„åŸå‹å¼€å‘ã€ç®€å•â¼¯å…·ç¼–å†™çš„åœºæ™¯â¾®å¸¸æœ‰å¸®åŠ©ï¼Œè®©æŠ€æœ¯â»”æ§›â¼¤å¹…é™ä½ã€‚</p>
</blockquote>
<p>ç„¶â½½ï¼Œè¿™ä»…ä»…æ˜¯ç†æƒ³åŒ–çš„åœºæ™¯ï¼Œç°å®ä¸­çš„ä¸šåŠ¡å¼€å‘å´è¿œâ½è¿™ä¸ªå¤æ‚å¾—å¤šã€‚</p>
<h2 data-id="heading-2">çœŸå®å‰ç«¯ææ•ˆ</h2>
<p>ä¸ºäº†åˆ†æ Cursor åœ¨ä¸šåŠ¡å¼€å‘ä¸­çš„å®é™…ææ•ˆï¼Œæˆ‘ä»¬å…ˆæ‹†è§£å‰ç«¯å¼€å‘çš„å…¸å‹æµç¨‹ï¼Œä»¥åŠå„ç¯èŠ‚çš„â¼¤è‡´æ—¶é—´å â½ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e61f367a58714afd9aa1c6dd395b329b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L5pWZ56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766642883&amp;x-signature=wtNSA6nkOLtVxYyl1FsFZWUfTRo%3D" alt="" loading="lazy"/></p>













































<table><thead><tr><th>å¼€å‘ç¯èŠ‚</th><th>æ—¶é—´å æ¯”</th></tr></thead><tbody><tr><td>éœ€æ±‚åˆ†æ</td><td>10%</td></tr><tr><td>æŠ€æœ¯æ–¹æ¡ˆè®¾è®¡</td><td>5%</td></tr><tr><td>UI è®¾è®¡ä¸ç»„ä»¶å¼€å‘</td><td>20%</td></tr><tr><td>ä¸šåŠ¡é€»è¾‘ä¸çŠ¶æ€ç®¡ç†</td><td>20%</td></tr><tr><td>API é›†æˆ</td><td>15%</td></tr><tr><td>è·¯ç”±ä¸æƒé™æ§åˆ¶</td><td>5%</td></tr><tr><td>æµ‹è¯•ä¸è°ƒè¯•</td><td>15%</td></tr><tr><td>æ„å»ºä¸éƒ¨ç½²</td><td>5%</td></tr><tr><td>å…¶ä»–</td><td>5%</td></tr></tbody></table>
<p>ä»è¡¨æ ¼å¯ä»¥çœ‹å‡ºï¼Œå æ®å¼€å‘è€…è¾ƒå¤šæ—¶é—´çš„ç¯èŠ‚ä¸»è¦æ˜¯ï¼š</p>
<ol>
<li>éœ€æ±‚åˆ†æ</li>
<li>UI è¿˜åŸä¸ç»„ä»¶å¼€å‘</li>
<li>ä¸šåŠ¡é€»è¾‘å®ç°</li>
<li>API é›†æˆä¸è°ƒè¯•</li>
</ol>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬åˆ†æ Cursor åœ¨è¿™äº›ç¯èŠ‚ä¸­çš„å®é™…è¡¨ç°ï¼š</p>
<h3 data-id="heading-3">éœ€æ±‚åˆ†æï¼šCursor ä»‹â¼Šéš¾åº¦æâ¼¤</h3>
<p>åŸå› å¾ˆç®€å•ï¼š</p>
<ol>
<li>éœ€æ±‚åˆ†ææ¶‰åŠä¸šåŠ¡èƒŒæ™¯ã€ä¸Šä¸‹â½‚ç†è§£ã€åˆ©ç›Šå–èˆï¼Œéœ€è¦â¼¤é‡ä¸»è§‚åˆ¤æ–­ã€‚</li>
<li>éœ€æ±‚å˜æ›´é¢‘ç¹ï¼ŒAI å¾ˆéš¾â¾¼æ•ˆå¤„ç†åŠ¨æ€å˜åŒ–ã€‚</li>
<li>è®¸å¤šéœ€æ±‚éš¾ä»¥â½¤â¾ƒç„¶è¯­â¾”å‡†ç¡®æè¿°ï¼Œå¯¼è‡´ AI â½£æˆçš„å†…å®¹ä¸å¤Ÿç²¾å‡†ã€‚</li>
</ol>
<p>ç»“è®ºï¼š<strong>Cursor åœ¨éœ€æ±‚åˆ†æç¯èŠ‚â¼ä¹â½†æ³•å‘æŒ¥ä½œâ½¤ã€‚</strong></p>
<h3 data-id="heading-4">UI è¿˜åŸï¼šèƒ½â¼’æœ‰é™ï¼Œä»éœ€â¼¤é‡â¼ˆâ¼¯è°ƒæ•´</h3>
<p>å½“å‰ Cursor å¯ä»¥åŸºäº Figma è®¾è®¡ç¨¿æˆ–æˆªå›¾â½£æˆ UI ä»£ç ï¼Œä½†ä»ç„¶å­˜åœ¨è¾ƒå¤šé—®é¢˜ï¼š</p>
<ol>
<li>â¼¤å¤šäº§å“UIâ»›æ ¼å®šåˆ¶åŒ–ç¨‹åº¦â¾¼ï¼ŒAI éš¾ä»¥ç²¾å‡†é€‚é…ã€‚</li>
<li>è§£æå›¾â½šæ—¶å®¹æ˜“ä¸¢å¤±ä¿¡æ¯ï¼Œå¯¼è‡´ä»£ç åå·®è¾ƒâ¼¤ã€‚</li>
<li>â½†æ³•æŠ½ç¦»å…¬å…±ç»„ä»¶ï¼Œå¯¼è‡´ä»£ç å†—ä½™ï¼Œå¤â½¤æ€§å·®ã€‚</li>
<li>â½†æ³•ç›´æ¥ä¸ç°æœ‰ç»„ä»¶åº“ï¼ˆå¦‚ Ant Designã€Material-UIã€å†…éƒ¨â¾ƒå®šä¹‰ç»„ä»¶åº“ï¼‰â½†ç¼å¯¹æ¥ã€‚</li>
</ol>
<p>ç»“è®ºï¼š<strong>è¿˜åŸæ•ˆæœä¸ç¨³å®šï¼Œä»éœ€â¼¿åŠ¨è°ƒæ•´ï¼Œä¸å¦‚â¾ƒâ¼°ç¼–ç å®ç°ã€‚</strong></p>
<h3 data-id="heading-5">ä¸šåŠ¡é€»è¾‘å®ç°ï¼šCursor ææ•ˆæœ€æ˜æ˜¾çš„ç¯èŠ‚</h3>
<p>å¦‚æœæˆ‘ä»¬èƒ½å¤ŸæŠŠåŠŸèƒ½æ¨¡å—æ‹†è§£æ¸…æ¥šï¼Œæä¾›â¾œå¤Ÿçš„ä¸Šä¸‹â½‚ï¼Œæ¸…æ™°è¡¨è¾¾è¦åšä»€ä¹ˆäº‹æƒ…ï¼ŒCursor ç¡®å®èƒ½å¤Ÿâ¼¤å¹…æå‡å¼€å‘æ•ˆç‡ã€‚é€‚â½¤åœºæ™¯ï¼š</p>
<ol>
<li>â½£æˆ CRUD ä»£ç ï¼ˆå¢åˆ æ”¹æŸ¥ï¼‰</li>
<li>â½£æˆç®—æ³•å®ç°ï¼ˆå¦‚æ’åºã€è§£æç­‰ï¼‰</li>
<li>â½£æˆâ¼¯å…·å‡½æ•°</li>
<li>ä»£ç é‡æ„ä¸ä¼˜åŒ–</li>
<li>ä»£ç â¾ƒåŠ¨è¡¥å…¨ä¸â½‚æ¡£â½£æˆ</li>
<li>å•å…ƒæµ‹è¯•â½¤ä¾‹çš„â½£æˆ</li>
<li>å†å²ä»£ç çš„é˜…è¯»ç†è§£</li>
<li>æ½œåœ¨çš„bugåˆ†æ</li>
</ol>
<p>ç»“è®ºï¼š<strong>Cursor åœ¨è¿™â¼€ç¯èŠ‚èƒ½å¸¦æ¥ 30% å·¦å³çš„ææ•ˆ</strong>ã€‚</p>
<h3 data-id="heading-6">API é›†æˆä¸è°ƒè¯•ï¼šä»‹â¼Šéš¾åº¦â¾¼</h3>
<p>è¿™é‡Œçš„æŒ‘æˆ˜æ˜¯ï¼š</p>
<ol>
<li>å‰åç«¯é¡¹â½¬åˆ†ç¦»ï¼ŒAIå¯¹äºåç«¯é¡¹â½¬â½†æ„ŸçŸ¥ï¼Œâ½†æ³•ååŒ</li>
<li>æ¥â¼å­—æ®µå¯¹æ¥ç¹çï¼Œéšæ€§ä½¿â½¤æ¡ä»¶å¤šï¼Œéš¾ä»¥â½¤â¾ƒç„¶è¯­â¾”æè¿°å®Œæ•´</li>
</ol>
<p>ç»“è®ºï¼š<strong>Cursor åœ¨ API é›†æˆç¯èŠ‚çš„ä½œâ½¤æœ‰é™ï¼Œè°ƒè¯•ç¯èŠ‚â¼ä¹â½†èƒ½ä¸ºâ¼’ã€‚</strong></p>
<p>ç»¼ä¸Šæ‰€è¿°ï¼Œåœ¨å®Œæ•´çš„å‰ç«¯å¼€å‘æµç¨‹ä¸­ï¼ŒCursor èƒ½çœŸæ­£å¸¦æ¥æ˜¾è‘—ææ•ˆçš„ç¯èŠ‚ä¸»è¦æ˜¯ä¸šåŠ¡é€»è¾‘ç¼–ç å®ç°ï¼Œåœ¨å…¶ä»–ç¯èŠ‚çš„ä½œâ½¤â¾®å¸¸å—é™ã€‚</p>
<p>æ•´ä½“æ¥çœ‹ï¼š<strong>Cursor å®é™…å¸¦æ¥çš„ææ•ˆçº¦ä¸º 20%-30%ï¼Œ</strong> é‚£ä¹ˆï¼Œæ˜¯å¦æ„å‘³ç€æˆ‘ä»¬åªèƒ½æ¥å—è¿™ä¸ªä¸Šé™ï¼Ÿ</p>
<p>å¹¶ä¸â¼€å®šï¼Œåœ¨<strong>å‰ç«¯å·¥ä½œSOPæ¯”è¾ƒå¥½çš„å›¢é˜Ÿï¼Œå·²ç»å®ç°äº†60%+çš„ææ•ˆ</strong>ï¼Œæ‰€ä»¥è¿™é‡Œå¯ä»¥æŒ–æ˜çš„ç‚¹è¿˜å¾ˆå¤šã€‚</p>
<p>æœ€ç»ˆçš„ç»“è®ºï¼š<strong>AIå®Œå…¨æ›¿æ¢å‰ç«¯è¿˜ä¸ºæ—¶å°šæ—©ï¼Œä½†æ•´ä½“è¿›ç¨‹æ­£åœ¨æŒç»­æ¨è¿›ï¼Œå¦‚æœå‰ç«¯æƒ³è½¬å‹ï¼Œç°åœ¨æ­£æ˜¯å¥½æ—¶å€™</strong>ã€‚</p>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æ¥å›ç­”ç¬¬äºŒä¸ªé—®é¢˜ï¼šä¸ºä»€ä¹ˆå‰ç«¯é€‚åˆè½¬åº”ç”¨å±‚AIï¼Ÿ</p>
<h2 data-id="heading-7">å‰ç«¯é€‚åˆAIï¼Ÿ</h2>
<p>æ ¹æ®è¿›æ¥å„ä¸ªå…¬å¸äº§ç ”çš„å®é™…æ•°å­—åé¦ˆï¼Œæ¥ä¸‹æ¥ä¸šå†…æ•´ä½“çš„å°±ä¸šæ•°å­—å¤§æ¦‚ç‡ä¼šèç¼©ï¼Œæƒ³è¦åšåˆ°ç»´æŒéƒ½å¾ˆéš¾ï¼</p>
<p>æˆ‘çœŸå®çœ‹åˆ°çš„æ˜¯<strong>æŸå›¢é˜Ÿ</strong>å› ä¸ºAIææ•ˆï¼Œå·²ç»è£æ‰äº†1/3çš„å¤–åŒ…å›¢é˜Ÿï¼Œæ®ä»–ä»¬æ¿å—è´Ÿè´£äººæ‰€è¿°ï¼Œè¿™ä¸€æ•°å­—å¦‚æœä¸æ˜¯æµ·å¤–ä¸šåŠ¡å‘å±•ï¼Œå¯èƒ½è¿˜è¦åŠ å¤§ï¼</p>
<p>æ‰€ä»¥ï¼Œä¸åªæ˜¯å‰ç«¯ï¼Œæ¥ä¸‹æ¥ä¸€æ®µæ—¶é—´å¯èƒ½æ•´ä¸ªäº§ç ”ä½“ç³»éƒ½ä¼šå—åˆ°å½±å“ï¼ŒåŒ…æ‹¬äº§å“ã€å‰ç«¯ã€åç«¯ã€æµ‹è¯•ã€‚</p>
<p>ä½†æ˜¯ï¼Œåº”ç”¨å±‚AIä¹Ÿä¸æ˜¯ä»€ä¹ˆé«˜é—¨æ§›é¡¹ç›®ï¼Œå®é™…å®æ–½çš„ä¾æ—§æ˜¯è¿™æ‰¹äººï¼Œæ‰€ä»¥è¦ä¿ä½è‡ªå·±é¥­ç¢—ã€ç”šè‡³è¿˜æƒ³æ›´å‰ä¸€æ­¥çš„è¯ï¼Œå°±è¦çœ‹è‡ªå·±åœ¨è¿™æ³¢AIæµªæ½®é‡Œé¢æ˜¯ä¸ªä»€ä¹ˆè§’è‰²äº†ï¼Œæ‰€ä»¥è¿™é‡Œé—®é¢˜å˜æˆäº†ï¼š</p>
<p><strong>åœ¨è½¬å‹åº”ç”¨å±‚AIè¿™ä¸ªèµ›é“ä¸Šï¼Œå‰ç«¯æ¯”ä¹‹äº§å“ã€åç«¯çš„ä¼˜åŠ¿æ˜¯ä»€ä¹ˆï¼Ÿ</strong></p>
<p>åœ¨å›ç­”è¿™ä¸ªé—®é¢˜å‰ï¼Œå…¨å±€æ‹‰å¼€ä¸€ä¸ªç›¸å¯¹å®Œæ•´å¤§å‹AIé¡¹ç›®çš„å…·ä½“å·¥ä½œæ¸…å•ï¼š</p>
<ol>
<li><strong>æ¨¡å‹å…¨è®­ç»ƒ</strong>ï¼Œæ¨¡å‹å…¨è®­ç»ƒåŒ…æ‹¬é¢„è®­ç»ƒã€å¾®è°ƒã€å¼ºåŒ–å­¦ä¹ ç­‰æ­¥éª¤ï¼Œç›®æ ‡æ˜¯ä¸ä¾èµ–å¤–éƒ¨å¤§æ¨¡å‹ï¼Œå®Œå…¨è‡ªç»™è‡ªè¶³ï¼Œä¸€èˆ¬å…¬å¸å‡ ä¹ä¸ä¼šæ¶‰åŠï¼ˆå› ä¸ºæˆæœ¬æé«˜ï¼‰ï¼Œä½†ä¸ºæ¡†æ¶å®Œæ•´æ€§ï¼Œè¿™é‡Œä¹Ÿä¿ç•™ï¼›</li>
<li><strong>æ•´ä½“æ¶æ„è®¾è®¡</strong>ï¼ŒåŒ…æ‹¬AIå·¥ç¨‹ã€æ•°æ®å·¥ç¨‹ã€é‡ç‚¹æ˜¯AIä¸æ•°æ®çš„åè°ƒï¼Œåœ¨è¿™é‡Œè¦ç¡®å®šåŸºç¡€çš„çŸ¥è¯†åº“ç»“æ„ä¸å·¥ç¨‹æ¶æ„ï¼Œæ˜¯<strong>å…¬å¸çŸ¥è¯†äº§æƒå’Œå£å’æ‰€åœ¨</strong>ï¼›</li>
<li><strong>æ¨¡å‹è°ƒä¼˜</strong>ï¼Œä¼šæ¶‰åŠåˆ°åè®­ç»ƒã€RAGç­‰æŠ€æœ¯æ·±åº¦åº”ç”¨ï¼Œå¾€å¾€æ˜¯é¡¹ç›®æ ¸å¿ƒç­–ç•¥ï¼Œåœ¨æ¶æ„ä¹‹ä¸‹çš„å·¥å…·æŠ€æœ¯å±‚é¢çš„æ“ä½œï¼Œ<strong>é¢è¯•é¢˜é‡ç¾åŒº</strong>ï¼›</li>
<li><strong>æç¤ºè¯å·¥ç¨‹</strong>ï¼Œä¼šè¯¦ç»†åˆ°å„ä¸ªä¸šåŠ¡æ¨¡å—çš„SOPç¼–å†™ï¼Œ<strong>å…¬å¸ä¸šåŠ¡å…·è±¡åŒ–å±•ç°</strong>ï¼›</li>
<li><strong>æ•°æ®å·¥ç¨‹å…·ä½“ä½œä¸š</strong>ï¼ŒæŸä¸ªæ¿å—è¯¦ç»†çš„æ•°æ®éªŒæ”¶ï¼Œè¿™ä¸ªä¸€èˆ¬æ˜¯åŸºæœ¬æ¶æ„éªŒè¯ç»“æŸï¼Œéœ€è¦ä¸å„ä¸ªä¸“ä¸šäººå‘˜åä½œæ”¶é›†AIå·¥ç¨‹æ‰€éœ€æ•°æ®ï¼Œ<strong>å…¬å¸æ•°æ®å£å’æ‰€åœ¨</strong>ï¼›</li>
<li><strong>æ¨¡å‹æµ‹è¯„</strong>ï¼Œä¼šæ¶‰åŠè¡Œä¸šAIåº”ç”¨è¯„æµ‹æ ‡å‡†æ‰§è¡Œï¼ˆ<strong>æ–¹æ¡ˆæ˜¯æ•´ä½“æ¶æ„çš„äº‹ï¼Œè¿™é‡Œæ˜¯å…·ä½“æ‰§è¡Œ</strong>ï¼‰ï¼Œæµ‹è¯•æ•°æ®é›†å‡†å¤‡ã€ç«å“è°ƒç ”ã€è·³å‡ºSOPæ•°æ®æ”¶é›†ç­‰ï¼›</li>
<li><strong>è®ºæ–‡ã€PRç›¸å…³</strong>ï¼Œå°±æ˜¯å¹ç‰›ç›¸å…³äº†ï¼Œä¸€èˆ¬äººå‘˜ä¹Ÿæ¶‰åŠä¸åˆ°ï¼›</li>
<li><strong>ç®€å•å·¥å…·é€‰å‹</strong>ï¼Œä¼šæ¶‰åŠä¸€äº›å¸¸ç”¨å·¥å…·é€‰å‹ï¼ŒåŒ…æ‹¬å‘é‡åº“è°ƒç ”ã€Agentå¹³å°ï¼ˆCozeã€Difyã€n8nã€Langchainï¼‰ç­‰ï¼›</li>
<li><strong>é™æœ¬å¢æ•ˆå·¥å…·</strong>ï¼Œæ¯”å¦‚æ•°æ®çŸ¥è¯†åº“åå°åº”ç”¨ï¼ˆçŸ¥è¯†åº“å­˜å‚¨å¹³å°ï¼‰ï¼Œæç¤ºè¯ç®¡ç†åå°ï¼ˆæç¤ºè¯æ•°åä¸‡åéœ€è¦ç®¡ç†åå°ï¼‰ï¼Œ<strong>è¿™ä¸ªäº‹æƒ…å«é‡‘é‡ä½ä½†æ˜¯æƒé™è¦æ§åˆ¶å¥½ï¼Œä¸ç„¶å…¬å¸æœºå¯†å®¹æ˜“æ³„éœ²</strong>ï¼›</li>
<li><strong>å®æ–½å›¢é˜Ÿ</strong>ï¼Œå¦‚æœæ˜¯åš2B AIå·¥å…·çš„å›¢é˜Ÿå¯èƒ½è¿˜æœ‰ä¸ªå®æ–½å›¢é˜Ÿï¼Œè¦ä¹ˆåšå·¥å…·å”®å‰ï¼Œè¦ä¹ˆåšå®é™…è¡Œä¸šå®æ–½ï¼Œå±äºå›¢é˜Ÿè€—æï¼›</li>
<li>æœ€åè¿˜æœ‰å…¶ä»–è¾¹è§’æ–™ï¼Œå¦‚èµ„æ–™å‡†å¤‡ã€æ•°æ®ç¡®è®¤ï¼›</li>
</ol>
<p>ä¸¥æ ¼æ¥è¯´ï¼Œ<strong>æ²¡æœ‰å‰ç«¯ä¸€å®šä¸èƒ½åšçš„äº‹é¡¹</strong>ï¼Œåªä¸è¿‡æ­£å„¿å…«ç»è¦è¯´è°æ›´åˆé€‚ä¸Šé¢çš„å·¥ä½œï¼Ÿç­”æ¡ˆå¯èƒ½æ˜¯ï¼š<strong>ç ”å‘ï¼ˆå‰ç«¯æˆ–è€…åç«¯ï¼‰+äº§å“</strong>æ›´ä¸ºé€‚åˆã€‚</p>
<h2 data-id="heading-8">å‰ç«¯ï¼Œå¾€å‰åŠæ­¥</h2>
<p>é€šè¿‡ä¸Šä¸€éƒ¨åˆ†çš„è®ºè¿°ï¼Œæˆ‘ä»¬æ¸…æ™°åœ°çœ‹åˆ°ï¼šA<strong>Iå®Œå…¨æ›¿ä»£å‰ç«¯ä¸ºæ—¶å°šæ—©ï¼Œä½†AIæ­£åœ¨é‡å¡‘å‰ç«¯çš„å·¥ä½œä»·å€¼é“¾æ¡ã€‚</strong> å•çº¯åŸ‹å¤´å®ç°UIå’Œäº¤äº’çš„â€œæ‰§è¡Œè€…â€è§’è‰²ï¼Œå…¶ä»·å€¼ä¼šå› AIå·¥å…·çš„ææ•ˆè€Œé€æ¸ç¨€é‡Šã€‚</p>
<p>é‚£ä¹ˆï¼Œå‰ç«¯å¦‚ä½•åœ¨AIæµªæ½®ä¸­ä¸é€€åè¿›å‘¢ï¼Ÿç­”æ¡ˆæ˜¯ï¼šå°†è‡ªå·±çš„èº«ä½å¾€å‰èµ°åŠæ­¥ï¼Œæˆä¸º<strong>åŠä¸ªäº§å“</strong>ï¼Œå½“å‰çš„äº§å“ä¹Ÿæ˜¯ä¸€æ ·ï¼Œå¦‚æœæƒ³æ›´å¥½çš„å‘å±•ï¼Œå°±è¦å¾€åé€€åŠä¸ªèº«ä½ï¼ŒæŒæ¡åŸºæœ¬çš„å¼€å‘èƒ½åŠ›ï¼Œæ¯”å¦‚ç†Ÿæ‚‰Cozeçš„ä½¿ç”¨ã€‚</p>
<p>åŸå› å¾ˆç®€å•ï¼Œæˆ‘ä¹‹å‰å»æ‹†å¼€æŸå¤§å‹AIé¡¹ç›®æ¥çœ‹ï¼Œ<strong>å…¶ä¸­æç¤ºè¯å·²ç»è¶…è¿‡äº†ä¸€ç™¾ä¸‡è¡Œï¼</strong> è¿™è¯´æ˜ï¼Œå½“å‰é¡¹ç›®çš„å·¥ä½œé‡å·²ç»é€æ¸ç”±ä»£ç è½¬å‘äº†æç¤ºè¯ï¼Œæ‰€ä»¥<strong>è°èƒ½æŠ“ä½æç¤ºè¯ï¼Œè°å°±æ˜¯æœªæ¥çš„å·¥ä½œä¹‹ç‹ï¼</strong></p>
<blockquote>
<p>è€ŒAIæ—¶ä»£çš„åº”ç”¨æ ¸å¿ƒæ˜¯æ•°æ®ï¼Œè€Œæ•°æ®çš„æœ¬è´¨ï¼Œæ˜¯ä¸šåŠ¡èƒŒåçš„KnowHowï¼Œè¿™äº›å°±æ˜¯ç¼–å†™æç¤ºè¯çš„åŸºç¡€äº†ï¼</p>
</blockquote>
<p>ç»¼ä¸Šï¼Œå¦‚æœç°åœ¨è¿˜ä¸æƒ³äº†è§£ä¸šåŠ¡çš„åŒå­¦ï¼Œåœ¨æœªæ¥æ˜¯ä¸å¯èƒ½å†™å‡ºè´´åˆ‡çš„æç¤ºè¯çš„ï¼Œé‚£ä¹ˆå¥½çš„æœºä¼šè‚¯å®šæ²¡ä»–çš„ä»½äº†...</p>
<p>ç°åœ¨ï¼Œè®©æˆ‘ä»¬æŠŠé•œå¤´æ‹‰å›åˆ°ç„¦è™‘çš„å‰ç«¯Leaderä»¬èº«ä¸Šã€‚å¦‚æœæˆ‘ä»¬æ·±å…¥å‰–æï¼Œä¼šå‘ç°ä¸€ä¸ªå·¨å¤§çš„æœºé‡ï¼šå‰ç«¯ï¼Œæ°æ°æ˜¯ç¦»AIä»·å€¼æ ¸å¿ƒ<strong>æ•°æ®ä¸KnowHow</strong>æœ€è¿‘çš„ä½ç½®ä¹‹ä¸€ã€‚</p>
<p>åœ¨ä¼ ç»Ÿç ”å‘æ¨¡å¼ä¸­ï¼Œå‰ç«¯å¾€å¾€å¤„äºä»·å€¼é“¾çš„æœ«ç«¯ã€‚äº§å“ç»ç†æ¶ˆåŒ–ä¸šåŠ¡éœ€æ±‚åï¼Œè¾“å‡ºPRDï¼›å‰ç«¯å·¥ç¨‹å¸ˆçš„æ ¸å¿ƒä»»åŠ¡æ˜¯â€œç²¾å‡†è¿˜åŸâ€UIå’Œäº¤äº’ã€‚è¿™ç§æ¨¡å¼ä¸‹çš„æœ€å¤§é—®é¢˜æ˜¯ï¼š<strong>å‰ç«¯è¢«æœ‰æ„æ— æ„åœ°éš”ç»åœ¨æ·±åšçš„ä¸šåŠ¡KnowHowä¹‹å¤–ã€‚</strong></p>
<p>æ¯”å¦‚ï¼Œä»–ä»¬ä¸éœ€è¦æ·±ç©¶ï¼š</p>
<ol>
<li>è¿™ä¸ªåŠŸèƒ½ä¸ºä½•èƒ½æå‡è½¬åŒ–ç‡ï¼Ÿ</li>
<li>ç”¨æˆ·åœ¨è¿™ä¸ªé¡µé¢æµå¤±çš„çœŸå®åŸå› æ˜¯ä»€ä¹ˆï¼Ÿ</li>
<li>åå°é…ç½®çš„å¤æ‚è§„åˆ™èƒŒåï¼Œä½“ç°äº†æ€æ ·çš„è¿è¥ç­–ç•¥ï¼Ÿ</li>
</ol>
<p>è¿™ç§â€œä¸éœ€è¦æ·±ç©¶â€ï¼Œåœ¨è¿‡å»è¢«è§†ä¸ºåˆ†å·¥æ˜ç¡®ï¼Œä½†åœ¨AIæ—¶ä»£ï¼Œå´æˆäº†å‰ç«¯æœ€å¤§çš„èŒä¸šé£é™©ã€‚å› ä¸ºå½“AIèƒ½å¿«é€Ÿç”ŸæˆUIä»£ç æ—¶ï¼Œç¨‹åºå‘˜ä»¬éƒ½éœ€è¦æä¾›é¢å¤–çš„ä»·å€¼ï¼Œæ‰€ä»¥è½¬å‹æ˜¯å¿…ä¸å¯åçš„ã€‚</p>
<p>ä½†ï¼Œæ‰€è°“è½¬å‹ä¹Ÿä¸æ˜¯è¦å‰ç«¯ç«‹åˆ»å˜æˆä¸å†™ä»£ç çš„äº§å“ç»ç†ï¼Œè€Œæ˜¯è¦ä½ æŠ€æœ¯èƒ½åŠ›ä¸ä¸šåŠ¡æ€ç»´è¿›è¡Œå åŠ ï¼Œè¿™é‡Œçš„æ ¸å¿ƒæ˜¯ï¼š<strong>æˆä¸ºåŠä¸ªä¸“å®¶ï¼Œè·å–KnowHowã€‚</strong></p>
<p>è¿™é‡Œçš„KnowHowï¼Œä¸æ˜¯ä»€ä¹ˆç„ä¹çš„æ¦‚å¿µï¼Œå°±æ˜¯æœ€å®åœ¨çš„ä¸œè¥¿ï¼š</p>
<ol>
<li>ä¸€ä¸ªHRæ˜¯æ€ä¹ˆç­›ç®€å†çš„ï¼›</li>
<li>ä¸€ä¸ªè´¢åŠ¡æ˜¯æ€ä¹ˆå®¡å‘ç¥¨çš„ï¼›</li>
<li>ä¸€ä¸ªåŒ»ç”Ÿæ˜¯å¦‚ä½•é—®è¯Šçš„ï¼›</li>
</ol>
<p>æ‰€æœ‰è¿™ä¸€åˆ‡éƒ½ä¼šå½¢æˆä¸€ä¸ªä¸ªå®Œæ•´çš„å·¥ä½œæµç¨‹ï¼ˆSOPï¼‰ï¼ŒAIäº§å“ç»ç†çš„å·¥ä½œï¼Œå°±æ˜¯æŠŠè¿™äº›SOPâ€œåƒé€â€ï¼Œç„¶åæ–‡æ¡£åŒ–ï¼Œæœ€ç»ˆç¿»è¯‘æˆAIèƒ½ç†è§£çš„æç¤ºè¯ã€‚</p>
<p>é‚£ä¹ˆï¼Œè¿™ä¸ªå…³é”®è§’è‰²ï¼Œä¸ºä»€ä¹ˆä¸€å®šè¦æ˜¯äº§å“ç»ç†ï¼Ÿ<strong>å‰ç«¯ï¼Œæ‰æ˜¯è¿™ä¸ªä½ç½®ä¸Šæ›´å…·æ€ä¼¤åŠ›çš„äººé€‰ã€‚</strong> å‰ç«¯è½¬å‹çš„æœ€å¤§æœºé‡ï¼Œå°±åœ¨äºä¸»åŠ¨å‡ºå‡»ï¼Œ<strong>å¤ºè¿‡â€œæç¤ºè¯â€çš„è®¾è®¡æƒï¼Œæˆä¸ºæ–°æ—¶ä»£ä¸šåŠ¡SOPçš„æ„å»ºè€…ã€‚</strong></p>
<p>å¹¶ä¸”ï¼Œä¸€èˆ¬çš„äº§å“å¤©ç”Ÿç»“æ„åŒ–èƒ½åŠ›ä¸å¦‚ç¨‹åºå‘˜ï¼Œåœ¨è¿™ä¸ªçª—å£æœŸï¼Œä¸€å®šè¦æŠ“ä½æœºä¼šï¼ä»¥ä¸‹æ˜¯ä¸€äº›å…·ä½“å®æ–½ç­–ç•¥ï¼Œè¿™å—å¤§å®¶çœ‹çœ‹å°±å¥½ï¼š</p>
<ol>
<li><strong>ç¬¬ä¸€æ­¥ï¼šä¸»åŠ¨å•ƒä¸šåŠ¡æ–‡æ¡£</strong>ã€‚ä¸»åŠ¨å»è¯»äº§å“çš„éœ€æ±‚èƒŒæ™¯ã€ç«å“åˆ†æã€ç”šè‡³ç›´æ¥æ‹‰ç€ä¸šåŠ¡æ–¹ï¼ˆå¦‚HRã€è¿è¥ï¼‰èŠå¤©ï¼Œæˆä¸ºåŠä¸ªé¢†åŸŸä¸“å®¶ï¼›</li>
<li><strong>ç¬¬äºŒæ­¥ï¼šå°†æç¤ºè¯è§†ä¸ºâ€œä»£ç â€æ¥å¼€å‘</strong>ã€‚ç”¨å·¥ç¨‹å¸ˆçš„æ€ç»´å¯¹å¾…æç¤ºè¯ï¼Œå¹¶ä¸”å®é™…æ‰§è¡Œæ˜¯ï¼Œä½ ä¼šå‘ç°ä¸è¿™æ ·æ˜¯éš¾ä»¥ç»´æŠ¤æ•°åä¸‡è¡Œæç¤ºè¯çš„ï¼›</li>
<li><strong>ç¬¬ä¸‰æ­¥ï¼šç”¨å·¥å…·è¯æ˜ä»·å€¼</strong>ã€‚åœ¨äº§å“è¿˜åœ¨å†™æ–‡æ¡£çš„æ—¶å€™ï¼Œå‰ç«¯å¿«é€Ÿæ­å‡ºä¸€ä¸ªå¯è¿è¡Œçš„AIå·¥ä½œæµåŸå‹ã€‚ä¸€ä¸ªå¯ä»¥äº¤äº’æ¼”ç¤ºçš„åŸå‹ï¼Œè¿™æ¯”100é¡µçš„æ–‡æ¡£æ›´æœ‰è¯´æœåŠ›ã€‚è¿™ç§æ‰§è¡ŒåŠ›å°†å½»åº•æ”¹å˜ä½ åœ¨å›¢é˜Ÿä¸­çš„è§’è‰²ã€‚</li>
</ol>
<h2 data-id="heading-9">ç»“è¯­</h2>
<p>æ—¶ä»£çš„æµªæ½®ä»æœªåœæ­‡ï¼Œä»äº’è”ç½‘åˆ°ç§»åŠ¨ç«¯ï¼Œå†åˆ°å¦‚ä»Šçš„AIï¼Œæ¯ä¸€æ¬¡æŠ€æœ¯èŒƒå¼è½¬ç§»ï¼Œéƒ½ä¸ä»…ä»…æ˜¯å·¥å…·çš„è¿­ä»£ï¼Œæ›´æ˜¯ä¸€æ¬¡ä»·å€¼çš„é‡æ–°æ´—ç‰Œä¸èŒä¸šè§’è‰²çš„æ·±åˆ»é‡å¡‘ã€‚</p>
<p>å½“å‰çš„ç„¦è™‘ï¼Œæ­£æ˜¯èº«å¤„å˜é©ä¸­å¿ƒçš„æ­£å¸¸ååº”ï¼Œä½†å®ƒæ›´æ˜¯ä¸€ä¸ªæ¸…æ™°çš„ä¿¡å·ï¼š<strong>æŠ˜è…¾æ­»è¿˜æ˜¯ç­‰æ­»ï¼Œæ€»å¾—é€‰ä¸€ä¸ªã€‚</strong></p>
<p>AIè¦æ›¿ä»£çš„ï¼Œä»æ¥ä¸æ˜¯å“ªä¸ªå…·ä½“çš„å²—ä½ï¼Œè€Œæ˜¯é‚£äº›å¯ä»¥è¢«æ ‡å‡†åŒ–ã€è¢«æ•°æ®ç©·ä¸¾çš„â€œäººäº‹ç‰©â€ã€‚</p>
<p>å¦‚æœè¦è·³å‡ºè¢«æ›¿ä»£çš„éƒ¨åˆ†ï¼Œé‚£å°±è¦è¦å»å¾ˆå¤šéæ ‡å‡†åŒ–çš„äº‹ï¼Œè€Œè¿™å…¶å®å¯¹å„ä½å‰ç«¯å…¶å®ä¸éš¾ï¼Œå•çœ‹å„ä½æƒ³ä¸æƒ³ç½¢äº†...</p>
<h2 data-id="heading-10">å­¦ä¹ èµ„æºæ¨è</h2>
<p>å¦‚æœä½ æƒ³æ›´æ·±å…¥åœ°å­¦ä¹ å¤§æ¨¡å‹ï¼Œä»¥ä¸‹æ˜¯ä¸€äº›éå¸¸æœ‰ä»·å€¼çš„å­¦ä¹ èµ„æºï¼Œè¿™äº›èµ„æºå°†å¸®åŠ©ä½ ä»ä¸åŒè§’åº¦å­¦ä¹ å¤§æ¨¡å‹ï¼Œæå‡ä½ çš„å®è·µèƒ½åŠ›ã€‚</p>
<blockquote>
<p>æœ¬æ–‡è¾ƒé•¿ï¼Œå»ºè®®ç‚¹èµæ”¶è—ã€‚æ›´å¤šAIå¤§æ¨¡å‹åº”ç”¨å¼€å‘å­¦ä¹ è§†é¢‘åŠèµ„æ–™ï¼Œåœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fgitcode.com%2FEnjoyEDU%2FLLM" target="_blank" title="https://gitcode.com/EnjoyEDU/LLM" ref="nofollow noopener noreferrer">è¿™é‡Œ</a>ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å…¬å¸æ˜¯å¦å› ä¸ºAIæ­£åœ¨ä»â€œä»¥äººä¸ºæœ¬â€èµ°å‘â€œä»¥æ ¸å¿ƒæ•°æ®é›†ä¸ºæœ¬â€ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7584719268044718114</link>    <guid>https://juejin.cn/post/7584719268044718114</guid>    <pubDate>2025-12-18T06:07:47.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7584719268044718114" data-draft-id="7584719268044685346" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å…¬å¸æ˜¯å¦å› ä¸ºAIæ­£åœ¨ä»â€œä»¥äººä¸ºæœ¬â€èµ°å‘â€œä»¥æ ¸å¿ƒæ•°æ®é›†ä¸ºæœ¬â€ï¼Ÿ"/> <meta itemprop="keywords" content="AIGC,æ¶æ„"/> <meta itemprop="datePublished" content="2025-12-18T06:07:47.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Yooå‰ç«¯"/> <meta itemprop="url" content="https://juejin.cn/user/2791012486624116"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å…¬å¸æ˜¯å¦å› ä¸ºAIæ­£åœ¨ä»â€œä»¥äººä¸ºæœ¬â€èµ°å‘â€œä»¥æ ¸å¿ƒæ•°æ®é›†ä¸ºæœ¬â€ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2791012486624116/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Yooå‰ç«¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-18T06:07:47.000Z" title="Thu Dec 18 2025 06:07:47 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-18
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å½“ AI è¿›å…¥ä¼ä¸šæ ¸å¿ƒï¼š</h2>
<h3 data-id="heading-1">å…¬å¸æ˜¯å¦æ­£åœ¨ä»â€œä»¥äººä¸ºæœ¬â€èµ°å‘â€œä»¥æ ¸å¿ƒæ•°æ®é›†ä¸ºæœ¬â€ï¼Ÿ</h3>
<p>åœ¨å¾ˆé•¿ä¸€æ®µæ—¶é—´é‡Œï¼Œä¼ä¸šçš„æ ¸å¿ƒç«äº‰åŠ›é«˜åº¦ä¾èµ–<strong>å…³é”®äººæ‰</strong>ã€‚</p>
<p>ä¸šåŠ¡ä¸“å®¶æŒæ¡éšæ€§ç»éªŒï¼ŒæŠ€æœ¯ä¸“å®¶æŒæ¡ç³»ç»ŸçœŸç›¸â€”â€”ä»–ä»¬ä¸ä»…æ˜¯å‘˜å·¥ï¼Œæ›´æ˜¯<strong>èƒ½åŠ›æœ¬èº«çš„è½½ä½“</strong>ã€‚å› æ­¤ï¼Œä¸€æ—¦å…³é”®äººå‘˜æµå¤±ï¼Œä¼ä¸šæ‰¿å—çš„å¾€å¾€ä¸æ˜¯æ‹›è˜æˆæœ¬ï¼Œè€Œæ˜¯<strong>å†³ç­–èƒ½åŠ›ä¸ç»„ç»‡è®°å¿†çš„æ–­è£‚</strong>ã€‚</p>
<p>è€Œéšç€å¤§æ¨¡å‹æ·±å…¥å‚ç›´é¢†åŸŸï¼Œä¸€ä¸ªé—®é¢˜å¼€å§‹å˜å¾—æ— æ³•å›é¿ï¼š</p>
<blockquote>
<p><strong>å½“ AI èƒ½å¤Ÿç†è§£ä¸šåŠ¡ã€è°ƒç”¨å†å²ç»éªŒå¹¶å‚ä¸å†³ç­–æ—¶ï¼Œä¼ä¸šæ˜¯å¦å¯ä»¥ä¸å†é‚£ä¹ˆâ€œå®³æ€•â€å…³é”®äººå‘˜æµå¤±ï¼Ÿ<br/>
ä¼ä¸šçš„æ ¹æœ¬ï¼Œæ˜¯å¦æ­£åœ¨ä»â€œä»¥äººä¸ºæœ¬â€ï¼Œè½¬å‘â€œä»¥æ ¸å¿ƒæ•°æ®é›†ä¸ºæœ¬â€ï¼Ÿ</strong></p>
</blockquote>
<p>æœ¬æ–‡å°è¯•ä» <strong>RAGï¼ˆRetrieval-Augmented Generationï¼‰æ¶æ„</strong>çš„è§†è§’ï¼Œå¯¹è¿™ä¸€è½¬å˜è¿›è¡Œç³»ç»Ÿæ€§è®ºè¯ã€‚</p>
<hr/>
<h3 data-id="heading-2">ä¸€ã€ä¼ ç»Ÿä¼ä¸šä¸ºä½•å¯¹â€œå…³é”®äººæ‰â€é«˜åº¦æ•æ„Ÿ</h3>
<p>åœ¨ AI ä»‹å…¥ä¹‹å‰ï¼Œä¼ä¸šå†…éƒ¨æœ€æœ‰ä»·å€¼çš„èµ„äº§å¹¶ä¸å®Œå…¨å­˜åœ¨äºç³»ç»Ÿä¸­ï¼Œè€Œæ˜¯å­˜åœ¨äº<strong>äººçš„å¤§è„‘é‡Œ</strong>ã€‚</p>
<p>è¿™äº›çŸ¥è¯†å¾€å¾€å…·æœ‰å…¸å‹ç‰¹å¾ï¼š</p>
<ul>
<li>å¼ºç»éªŒæ€§ã€å¼±ç»“æ„åŒ–</li>
<li>é«˜ä¸Šä¸‹æ–‡ä¾èµ–</li>
<li>ä¸ä¸ªäººé•¿æœŸå®è·µæ·±åº¦ç»‘å®š</li>
</ul>
<p>ä¾‹å¦‚ï¼š</p>
<ul>
<li>ä¸ºä»€ä¹ˆè¿™ä¸ªå®¢æˆ·è¦è¿™æ ·è°ˆï¼Ÿ</li>
<li>ä¸ºä»€ä¹ˆç³»ç»Ÿå½“å¹´è¿™ä¹ˆè®¾è®¡ï¼Ÿ</li>
<li>å“ªäº›å‘å·²ç»è¸©è¿‡ï¼Œå“ªäº›çº¢çº¿ä¸èƒ½ç¢°ï¼Ÿ</li>
</ul>
<p>è¿™äº›ä¿¡æ¯éš¾ä»¥å®Œæ•´å†™è¿›æ–‡æ¡£ï¼Œå´å†³å®šäº†ä¼ä¸šçš„çœŸå®è¿è½¬æ–¹å¼ã€‚</p>
<p>å› æ­¤ï¼Œä¼ ç»Ÿä¼ä¸šçš„æœ¬è´¨æ˜¯ï¼š</p>
<blockquote>
<p><strong>â€œä¸“å®¶å³ç³»ç»Ÿï¼Œäººæ‰å³èƒ½åŠ›ã€‚â€</strong></p>
</blockquote>
<p>ä¸€æ—¦ä¸“å®¶ç¦»å¼€ï¼Œèƒ½åŠ›å°±éšä¹‹æµå¤±ï¼Œç—›æ„Ÿæå¼ºã€‚</p>
<hr/>
<h3 data-id="heading-3">äºŒã€å¤§æ¨¡å‹ + RAG å¸¦æ¥çš„æœ¬è´¨å˜åŒ–</h3>
<p>RAG å¹¶ä¸æ˜¯ç®€å•åœ°â€œè®©æ¨¡å‹æ›´èªæ˜â€ï¼Œè€Œæ˜¯<strong>é‡æ„ä¼ä¸šçŸ¥è¯†çš„å­˜åœ¨æ–¹å¼ä¸è°ƒç”¨æ–¹å¼</strong>ã€‚</p>
<p>åœ¨æ¶æ„å±‚é¢ï¼ŒRAG ä¸ºä¼ä¸šå¼•å…¥äº†ä¸€ä¸ªæ–°çš„èƒ½åŠ›ä¸­æ¢ï¼š</p>
<blockquote>
<p><strong>ä¸€ä¸ªå¯è¢«æ¨¡å‹å®æ—¶æ£€ç´¢ã€æ¨ç†ã€ç»„åˆçš„ä¼ä¸šçº§çŸ¥è¯†ç³»ç»Ÿã€‚</strong></p>
</blockquote>
<p>è¿™ä¸€å˜åŒ–è‡³å°‘ä½“ç°åœ¨ä¸‰ä¸ªå±‚é¢ã€‚</p>
<hr/>
<h4 data-id="heading-4">1. éšæ€§çŸ¥è¯†å¼€å§‹è¢«â€œå·¥ç¨‹åŒ–â€</h4>
<p>RAG å¹¶ä¸è¦æ±‚çŸ¥è¯†é«˜åº¦ç»“æ„åŒ–ï¼Œè¿™æ˜¯å®ƒæå…¶é‡è¦çš„ä»·å€¼æ‰€åœ¨ã€‚</p>
<p>é€šè¿‡æŒç»­æ²‰æ·€ï¼š</p>
<ul>
<li>æ–‡æ¡£</li>
<li>ä¼šè®®çºªè¦</li>
<li>å†³ç­–è®°å½•</li>
<li>PRDã€è®¾è®¡è¯„å®¡</li>
<li>å®¢æˆ·æ²Ÿé€šä¸ä¸šåŠ¡å¤ç›˜</li>
</ul>
<p>åŸæœ¬é™„ç€åœ¨ä¸ªäººç»éªŒä¸­çš„åˆ¤æ–­ï¼Œè¢«é€æ­¥è½¬åŒ–ä¸ºï¼š</p>
<ul>
<li>å¯ç´¢å¼•</li>
<li>å¯æ£€ç´¢</li>
<li>å¯ç»„åˆ</li>
<li>å¯è¢«æ¨¡å‹æ¨ç†</li>
</ul>
<p>çŸ¥è¯†ä¸å†å¿…é¡»â€œå®Œç¾â€ï¼Œä½†å¼€å§‹<strong>å¯è¢«ç³»ç»Ÿæ€§åˆ©ç”¨</strong>ã€‚</p>
<hr/>
<h4 data-id="heading-5">2. å†³ç­–èƒ½åŠ›ä»â€œä¸ªäººâ€è¿ç§»åˆ°â€œç³»ç»Ÿâ€</h4>
<p>åœ¨ RAG æ¶æ„ä¸‹ï¼Œå‘˜å·¥çš„å·¥ä½œæ–¹å¼å‘ç”Ÿäº†å˜åŒ–ï¼š</p>
<ul>
<li>ä¸å†ä»é›¶å¼€å§‹æ€è€ƒ</li>
<li>è€Œæ˜¯åœ¨ç»„ç»‡å†å²ã€æ—¢æœ‰åˆ¤æ–­ä¸æœ€ä½³å®è·µä¹‹ä¸Šåšå†³ç­–</li>
</ul>
<p>è¿™æ„å‘³ç€ï¼š</p>
<ul>
<li>æ–°äººå¯ä»¥è°ƒç”¨å‰ä»»ä¸“å®¶çš„åˆ¤æ–­è·¯å¾„</li>
<li>å†³ç­–é€»è¾‘å¯ä»¥è·¨æ—¶é—´å¤ç”¨</li>
<li>èƒ½åŠ›ä¸å†ä¾èµ–â€œæŸä¸ªäººæ˜¯å¦è¿˜åœ¨å…¬å¸â€</li>
</ul>
<p><strong>ä¼ä¸šçš„å¯å†³ç­–æ€§ï¼Œå¼€å§‹ç‹¬ç«‹äºä¸ªä½“å­˜åœ¨ã€‚</strong></p>
<hr/>
<h4 data-id="heading-6">3. æ ¸å¿ƒèƒ½åŠ›çš„è½½ä½“å‘ç”Ÿè¿ç§»</h4>
<p>ä¼ä¸šæ ¸å¿ƒèƒ½åŠ›é€æ¸ä»ï¼š</p>
<blockquote>
<p>äºº â†’ äºº + æ–‡æ¡£ â†’ æ•°æ®é›† + æ¨ç†ç³»ç»Ÿ</p>
</blockquote>
<p>è½¬å˜ä¸ºï¼š</p>
<blockquote>
<p><strong>é«˜è´¨é‡ç§æœ‰æ•°æ®é›† Ã— å¤§æ¨¡å‹æ¨ç†èƒ½åŠ› Ã— ä¸šåŠ¡ä¸Šä¸‹æ–‡ç¼–æ’</strong></p>
</blockquote>
<p>è¿™æ­£æ˜¯â€œä»¥æ ¸å¿ƒæ•°æ®é›†ä¸ºæœ¬â€çš„æŠ€æœ¯åŸºç¡€ã€‚</p>
<hr/>
<h3 data-id="heading-7">ä¸‰ã€RAG æ˜¯å¦èƒ½è®©ä¼ä¸šâ€œä¸å†é‚£ä¹ˆç—›â€</h3>
<p>ä¸€ä¸ªç›´æ¥çš„é—®é¢˜æ˜¯ï¼š<br/>
<strong>å½“å…³é”®äººå‘˜æµå¤±æ—¶ï¼ŒRAG èƒ½å¦æ˜¾è‘—é™ä½ä¼ä¸šçš„ç—›æ„Ÿï¼Ÿ</strong></p>
<p>ç»“è®ºæ˜¯ï¼š</p>
<blockquote>
<p><strong>å¯ä»¥æ˜¾è‘—ç¼“è§£ï¼Œä½†æ— æ³•å®Œå…¨æ¶ˆé™¤ã€‚</strong></p>
</blockquote>
<hr/>
<h4 data-id="heading-8">1. RAG èƒ½å‰Šå¼±çš„ç—›æ„Ÿ</h4>
<p><strong>ï¼ˆ1ï¼‰ä¸šåŠ¡è¿ç»­æ€§é£é™©</strong></p>
<ul>
<li>ä¸“å®¶ç¦»èŒï¼ŒçŸ¥è¯†ä»åœ¨</li>
<li>å†å²åˆ¤æ–­å¯è¿½æº¯</li>
<li>å†³ç­–é€»è¾‘å¯å¤ç”¨</li>
</ul>
<p><strong>ï¼ˆ2ï¼‰ç»„ç»‡å­¦ä¹ æˆæœ¬</strong></p>
<ul>
<li>æ–°äººä¸å†ä¾èµ–â€œå¸ˆå¾’åˆ¶â€</li>
<li>AI æˆä¸ºç»„ç»‡çº§å¯¼å¸ˆ</li>
</ul>
<p><strong>ï¼ˆ3ï¼‰èƒ½åŠ›çš„è§„æ¨¡åŒ–å¤åˆ¶</strong></p>
<ul>
<li>ä¸€ä¸ªä¸“å®¶çš„ç»éªŒ</li>
<li>è¢«æ”¾å¤§ä¸ºå…¨ç»„ç»‡çš„è®¤çŸ¥åº•åº§</li>
</ul>
<hr/>
<h4 data-id="heading-9">2. RAG æ— æ³•æ›¿ä»£çš„éƒ¨åˆ†</h4>
<p>åŒæ ·å¿…é¡»æ­£è§†å…¶è¾¹ç•Œã€‚</p>
<p><strong>ï¼ˆ1ï¼‰åˆ›æ–°æ€§ä¸èŒƒå¼çªç ´</strong><br/>
RAG æœ¬è´¨æ˜¯åœ¨æ—¢æœ‰çŸ¥è¯†ç©ºé—´ä¸­ç»„åˆæœ€ä¼˜è§£ï¼Œ<br/>
è€Œéåœ¨æœªçŸ¥ç©ºé—´ä¸­åˆ›é€ æ–°èŒƒå¼ã€‚</p>
<p><strong>ï¼ˆ2ï¼‰ä»·å€¼åˆ¤æ–­ä¸è´£ä»»æ‰¿æ‹…</strong><br/>
AI å¯ä»¥ç»™å»ºè®®ï¼Œä½†æ— æ³•æ‰¿æ‹…æˆ˜ç•¥åæœã€‚</p>
<p><strong>ï¼ˆ3ï¼‰å¤æ‚åšå¼ˆä¸ç»„ç»‡æ”¿æ²»</strong><br/>
å®¢æˆ·å…³ç³»ã€éç†æ€§ååŒã€éšæ€§æƒåŠ›ç»“æ„ï¼Œä»é«˜åº¦ä¾èµ–äººã€‚</p>
<hr/>
<h3 data-id="heading-10">å››ã€çœŸæ­£çš„è½¬å˜ä¸æ˜¯â€œå»äººåŒ–â€ï¼Œè€Œæ˜¯â€œå»å•ç‚¹åŒ–â€</h3>
<p>ä¸€ä¸ªå¸¸è§è¯¯è§£æ˜¯ï¼š</p>
<blockquote>
<p>â€œæ—¢ç„¶æœ‰äº† RAGï¼Œæ˜¯ä¸æ˜¯ä¸éœ€è¦ä¸“å®¶äº†ï¼Ÿâ€</p>
</blockquote>
<p>æ°æ°ç›¸åã€‚</p>
<p>çœŸæ­£å‘ç”Ÿçš„è½¬å˜æ˜¯ï¼š</p>
<blockquote>
<p><strong>ä»â€œä¸“å®¶å³ç³»ç»Ÿâ€ï¼Œèµ°å‘â€œä¸“å®¶å‚ä¸ç³»ç»Ÿæ„å»ºâ€ã€‚</strong></p>
</blockquote>
<p>ä¸“å®¶çš„è§’è‰²å‘ç”Ÿè¿ç§»ï¼š</p>
<ul>
<li>
<p>ä»å”¯ä¸€çŸ¥è¯†æº</p>
</li>
<li>
<p>å˜æˆï¼š</p>
<ul>
<li>çŸ¥è¯†ä½“ç³»è®¾è®¡è€…</li>
<li>åˆ¤æ–­è§„åˆ™åˆ¶å®šè€…</li>
<li>æ•°æ®é›†è´¨é‡è´Ÿè´£äºº</li>
</ul>
</li>
</ul>
<p><strong>äººä¸å†æ˜¯å•ç‚¹é£é™©ï¼Œè€Œæ˜¯ç³»ç»Ÿçš„ä¸€éƒ¨åˆ†ã€‚</strong></p>
<hr/>
<h3 data-id="heading-11">äº”ã€RAG é©±åŠ¨ä¸‹çš„ä¼ä¸šæ–°å½¢æ€</h3>
<p>åœ¨æˆç†Ÿçš„ RAG é©±åŠ¨å‹ç»„ç»‡ä¸­ï¼Œå¾€å¾€ä¼šå‡ºç°ä»¥ä¸‹ç‰¹å¾ï¼š</p>
<ol>
<li>æ ¸å¿ƒæ•°æ®é›†æˆä¸ºæˆ˜ç•¥èµ„äº§</li>
<li>ä¸“å®¶è¢«è¦æ±‚â€œå¯è¢« AI å¤ç”¨â€</li>
<li>å²—ä½èƒ½åŠ›ä¸ä¸ªäººå¼ºè§£è€¦</li>
<li>ä¼ä¸šå¯¹äººå‘˜æµåŠ¨çš„æŠ—å†²å‡»èƒ½åŠ›æ˜¾è‘—å¢å¼º</li>
</ol>
<hr/>
<h3 data-id="heading-12">å…­ã€ç»“è¯­ï¼šä¼ä¸šçš„â€œæ ¹æœ¬â€æ­£åœ¨è¿ç§»</h3>
<p>RAG å¹¶ä¸èƒ½è®©ä¼ä¸šæ‘†è„±å¯¹â€œäººâ€çš„ä¾èµ–ï¼Œä½†å®ƒå¯ä»¥ï¼š</p>
<blockquote>
<p><strong>è®©ä¼ä¸šæ‘†è„±å¯¹â€œæŸä¸€ä¸ªäººâ€çš„ä¾èµ–ã€‚</strong></p>
</blockquote>
<p>åœ¨è¿™ä¸ªæ„ä¹‰ä¸Šï¼Œä¼ä¸šçš„æ ¹æœ¬æ­£åœ¨ä»ï¼š</p>
<ul>
<li>å…³é”®äººæ‰</li>
</ul>
<p>è½¬å‘ï¼š</p>
<ul>
<li>é«˜è´¨é‡ç§æœ‰æ•°æ®é›†</li>
<li>å¯æ¼”è¿›çš„çŸ¥è¯†ç³»ç»Ÿ</li>
<li>äººæœºååŒçš„å†³ç­–æ¶æ„</li>
</ul>
<p>è¿™ä¸æ˜¯â€œç”¨æ•°æ®å–ä»£äººâ€ï¼Œè€Œæ˜¯ï¼š</p>
<blockquote>
<p><strong>ç”¨ç³»ç»Ÿå’Œæ•°æ®ï¼ŒæŠŠäººçš„ä»·å€¼ä»è„†å¼±æ€§ä¸­è§£æ”¾å‡ºæ¥ã€‚</strong></p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Java è®¾è®¡æ¨¡å¼ï¼šåŸç†ã€æ¡†æ¶åº”ç”¨ä¸å®æˆ˜å…¨è§£æï½œå¾—ç‰©æŠ€æœ¯]]></title>    <link>https://juejin.cn/post/7584725529877577778</link>    <guid>https://juejin.cn/post/7584725529877577778</guid>    <pubDate>2025-12-18T06:03:48.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7584725529877577778" data-draft-id="7584725529876906034" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Java è®¾è®¡æ¨¡å¼ï¼šåŸç†ã€æ¡†æ¶åº”ç”¨ä¸å®æˆ˜å…¨è§£æï½œå¾—ç‰©æŠ€æœ¯"/> <meta itemprop="keywords" content="Java"/> <meta itemprop="datePublished" content="2025-12-18T06:03:48.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¾—ç‰©æŠ€æœ¯"/> <meta itemprop="url" content="https://juejin.cn/user/2392954206960247"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Java è®¾è®¡æ¨¡å¼ï¼šåŸç†ã€æ¡†æ¶åº”ç”¨ä¸å®æˆ˜å…¨è§£æï½œå¾—ç‰©æŠ€æœ¯
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2392954206960247/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¾—ç‰©æŠ€æœ¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-18T06:03:48.000Z" title="Thu Dec 18 2025 06:03:48 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-18
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»29åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€æ¦‚è¿°</h2>
<h3 data-id="heading-1">ç®€ä»‹</h3>
<p>è®¾è®¡æ¨¡å¼ï¼ˆDesign Patternï¼‰æ˜¯å‰è¾ˆä»¬å¯¹ä»£ç å¼€å‘ç»éªŒçš„æ€»ç»“ï¼Œå®ƒä¸æ˜¯è¯­æ³•è§„å®šï¼Œæ˜¯è§£å†³ç‰¹å®šé—®é¢˜çš„ä¸€ç³»åˆ—æ€æƒ³ï¼Œ<strong>æ˜¯é¢å‘å¯¹è±¡è®¾è®¡åŸåˆ™çš„å…·è±¡åŒ–å®ç°ï¼Œ</strong> æ˜¯è§£å†³ â€œéœ€æ±‚å˜æ›´â€ ä¸ â€œç³»ç»Ÿå¤æ‚åº¦â€ çŸ›ç›¾çš„æ ‡å‡†åŒ–æ–¹æ¡ˆ â€”â€” å¹¶éå­¤ç«‹çš„ â€œä»£ç æ¨¡æ¿â€ï¼Œè€Œæ˜¯ â€œé«˜å†…èšã€ä½è€¦åˆâ€ æ€æƒ³çš„è½åœ°å·¥å…·ã€‚å…¶æ ¸å¿ƒä»·å€¼åœ¨äºæå‡ä»£ç çš„å¯å¤ç”¨æ€§ã€å¯ç»´æŠ¤æ€§ã€å¯è¯»æ€§ã€ç¨³å¥æ€§åŠå®‰å…¨æ€§ã€‚</p>
<p>1994 å¹´ï¼ŒGoFï¼ˆGang of Fourï¼šErich Gammaã€Richard Helmã€Ralph Johnsonã€John Vlissidesï¼‰åˆè‘—çš„ã€ŠDesign Patterns - Elements of Reusable Object-Oriented Softwareã€‹ï¼ˆä¸­æ–‡è¯‘åã€Šè®¾è®¡æ¨¡å¼ - å¯å¤ç”¨çš„é¢å‘å¯¹è±¡è½¯ä»¶å…ƒç´ ã€‹ï¼‰å‡ºç‰ˆï¼Œæ”¶å½• 23 ç§ç»å…¸è®¾è®¡æ¨¡å¼ï¼Œå¥ å®šè¯¥é¢†åŸŸçš„è¡Œä¸šæ ‡å‡†ï¼Œå³ â€œGoF è®¾è®¡æ¨¡å¼â€ã€‚</p>
<h3 data-id="heading-2">æ ¸å¿ƒæ€æƒ³</h3>
<ul>
<li>å¯¹æ¥å£ç¼–ç¨‹ï¼Œè€Œéå¯¹å®ç°ç¼–ç¨‹</li>
<li>ä¼˜å…ˆä½¿ç”¨å¯¹è±¡ç»„åˆï¼Œè€Œéç»§æ‰¿</li>
<li>çµæ´»é€‚é…éœ€æ±‚ï¼šç®€å•ç¨‹åºæ— éœ€è¿‡åº¦è®¾è®¡ï¼Œå¤§å‹é¡¹ç›® / æ¡†æ¶å¿…é¡»å€ŸåŠ©æ¨¡å¼ä¼˜åŒ–æ¶æ„</li>
</ul>
<h3 data-id="heading-3">ç»„ä»¶ç”Ÿå‘½å‘¨æœŸ</h3>





























<table><thead><tr><th><strong>æ¨¡å¼ç±»å‹</strong></th><th><strong>æ ¸å¿ƒå…³æ³¨ç‚¹</strong></th><th><strong>ç”Ÿå‘½å‘¨æœŸé˜¶æ®µ</strong></th><th><strong>ä»£è¡¨æ¨¡å¼</strong></th></tr></thead><tbody><tr><td>åˆ›å»ºå‹æ¨¡å¼</td><td>å¯¹è±¡åˆ›å»ºæœºåˆ¶ ï¼ˆè§£è€¦åˆ›å»ºä¸ä½¿ç”¨ï¼‰</td><td>ç»„ä»¶çš„åˆ›å»º</td><td>å•ä¾‹ã€å·¥å‚æ–¹æ³•ã€æŠ½è±¡å·¥å‚ã€åŸå‹ã€å»ºé€ è€…</td></tr><tr><td>ç»“æ„å‹æ¨¡å¼</td><td>å¯¹è±¡ / ç±»çš„ç»„åˆæ–¹å¼</td><td>ç»„ä»¶çš„ä½¿ç”¨</td><td>ä»£ç†ã€é€‚é…å™¨ã€è£…é¥°å™¨ã€å¤–è§‚ã€äº«å…ƒã€æ¡¥æ¥ã€ç»„åˆã€è¿‡æ»¤å™¨</td></tr><tr><td>è¡Œä¸ºå‹æ¨¡å¼</td><td>å¯¹è±¡ / ç±»çš„è¿è¡Œæ—¶åä½œæµç¨‹</td><td>ç»„ä»¶çš„äº¤äº’ä¸é”€æ¯</td><td>ç­–ç•¥ã€è§‚å¯Ÿè€…ã€è´£ä»»é“¾ã€æ¨¡æ¿æ–¹æ³•ã€å‘½ä»¤ã€çŠ¶æ€ã€ä¸­ä»‹è€…ã€è¿­ä»£å™¨ã€è®¿é—®è€…ã€å¤‡å¿˜å½•ã€è§£é‡Šå™¨</td></tr></tbody></table>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/af4158221f664294943aba5ed8aaaa84~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6X54mp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766642627&amp;x-signature=6NQAZoWD3DUHTYbFCn4KPjmFmXg%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<h3 data-id="heading-4">ä¸ƒå¤§è®¾è®¡åŸåˆ™</h3>





















































<table><thead><tr><th>åŸåˆ™åç§°</th><th>æ ¸å¿ƒå®šä¹‰</th><th>å…³è”æ¨¡å¼</th><th>å®é™…å¼€å‘å†³ç­–é€»è¾‘</th></tr></thead><tbody><tr><td>å¼€é—­åŸåˆ™ï¼ˆOCPï¼‰</td><td>å¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å…³é—­ ï¼ˆæ–°å¢åŠŸèƒ½é€šè¿‡æ‰©å±•ç±»å®ç°ï¼Œä¸ä¿®æ”¹åŸæœ‰ä»£ç ï¼‰</td><td>æ‰€æœ‰æ¨¡å¼çš„ç»ˆæç›®æ ‡</td><td>æ–°å¢éœ€æ±‚ä¼˜å…ˆè€ƒè™‘ â€œåŠ ç±»â€ï¼Œè€Œé â€œæ”¹ç±»â€</td></tr><tr><td>ä¾èµ–å€’è½¬åŸåˆ™ï¼ˆDIPï¼‰</td><td>ä¾èµ–æŠ½è±¡è€Œéå…·ä½“å®ç° ï¼ˆé¢å‘æ¥å£ç¼–ç¨‹ï¼Œä¸ä¾èµ–å…·ä½“ç±»ï¼‰</td><td>å·¥å‚ã€ç­–ç•¥ã€æ¡¥æ¥</td><td>ç±»çš„ä¾èµ–é€šè¿‡æ¥å£æ³¨å…¥ï¼Œè€Œéç›´æ¥ new å…·ä½“ç±»</td></tr><tr><td>åˆæˆå¤ç”¨åŸåˆ™ï¼ˆCRPï¼‰</td><td>ä¼˜å…ˆä½¿ç”¨ç»„åˆ / èšåˆï¼Œè€Œéç»§æ‰¿ ï¼ˆé™ä½è€¦åˆï¼Œæå‡çµæ´»æ€§ï¼‰</td><td>è£…é¥°å™¨ã€ç»„åˆã€æ¡¥æ¥</td><td>å¤ç”¨åŠŸèƒ½æ—¶ï¼Œå…ˆè€ƒè™‘ â€œç»„åˆâ€ï¼Œå†è€ƒè™‘ â€œç»§æ‰¿â€</td></tr><tr><td>å•ä¸€èŒè´£åŸåˆ™ï¼ˆSRPï¼‰</td><td>ä¸€ä¸ªç±»ä»…è´Ÿè´£ä¸€é¡¹æ ¸å¿ƒèŒè´£ ï¼ˆé¿å… â€œä¸‡èƒ½ç±»â€ï¼‰</td><td>ç­–ç•¥ã€é€‚é…å™¨ã€è£…é¥°å™¨</td><td>å½“ä¸€ä¸ªç±»æœ‰å¤šä¸ªä¿®æ”¹åŸå› æ—¶ï¼Œç«‹å³æ‹†åˆ†</td></tr><tr><td>æ¥å£éš”ç¦»åŸåˆ™ï¼ˆISPï¼‰</td><td>ä½¿ç”¨å¤šä¸ªä¸“ç”¨æ¥å£æ›¿ä»£å•ä¸€ä¸‡èƒ½æ¥å£ ï¼ˆé™ä½ç±»ä¸æ¥å£çš„è€¦åˆï¼‰</td><td>é€‚é…å™¨ã€ä»£ç†</td><td>æ¥å£æ–¹æ³•æ‹†åˆ†åˆ° â€œæœ€å°ç²’åº¦â€ï¼Œé¿å…å®ç°ç±»å†—ä½™</td></tr><tr><td>é‡Œæ°ä»£æ¢åŸåˆ™ï¼ˆLSPï¼‰</td><td>å­ç±»å¯æ›¿æ¢çˆ¶ç±»ï¼Œä¸”ä¸ç ´ååŸæœ‰é€»è¾‘ ï¼ˆç»§æ‰¿å¤ç”¨çš„æ ¸å¿ƒå‰æï¼‰</td><td>æ¨¡æ¿æ–¹æ³•ã€ç­–ç•¥</td><td>å­ç±»é‡å†™çˆ¶ç±»æ–¹æ³•æ—¶ï¼Œä¸èƒ½æ”¹å˜çˆ¶ç±»å¥‘çº¦</td></tr><tr><td>è¿ªç±³ç‰¹æ³•åˆ™ï¼ˆLODï¼‰</td><td>å®ä½“åº”å°½é‡å°‘ä¸å…¶ä»–å®ä½“ç›´æ¥äº¤äº’ ï¼ˆé€šè¿‡ä¸­é—´è€…è§£è€¦ï¼‰</td><td>ä¸­ä»‹è€…ã€å¤–è§‚ã€è´£ä»»é“¾</td><td>ä¸¤ä¸ªæ— ç›´æ¥å…³è”çš„ç±»ï¼Œé€šè¿‡ç¬¬ä¸‰æ–¹é—´æ¥äº¤äº’</td></tr></tbody></table>
<h2 data-id="heading-5">äºŒã€åŸç†ä¸æ¡†æ¶åº”ç”¨</h2>
<h3 data-id="heading-6">åˆ›å»ºå‹æ¨¡å¼</h3>
<p><strong>ä¸ºä»€ä¹ˆç”¨åˆ›å»ºå‹æ¨¡å¼ï¼Ÿ</strong></p>
<ul>
<li>åˆ›å»ºå‹æ¨¡å¼å…³æ³¨ç‚¹â€œæ€æ ·åˆ›å»ºå‡ºå¯¹è±¡ï¼Ÿâ€â€œå°†å¯¹è±¡çš„åˆ›å»ºä¸ä½¿ç”¨åˆ†ç¦»â€</li>
<li>é™ä½ç³»ç»Ÿçš„è€¦åˆåº¦</li>
<li>ä½¿ç”¨è€…æ— éœ€å…³æ³¨å¯¹è±¡çš„åˆ›å»ºç»†èŠ‚</li>
</ul>

<ul>
<li>å¯¹è±¡çš„åˆ›å»ºç”±ç›¸å…³çš„å·¥å‚æ¥å®Œæˆï¼›ï¼ˆå„ç§å·¥å‚æ¨¡å¼ï¼‰</li>
<li>å¯¹è±¡çš„åˆ›å»ºç”±ä¸€ä¸ªå»ºé€ è€…æ¥å®Œæˆï¼›ï¼ˆå»ºé€ è€…æ¨¡å¼ï¼‰</li>
<li>å¯¹è±¡çš„åˆ›å»ºç”±åŸæ¥å¯¹è±¡å…‹éš†å®Œæˆï¼›ï¼ˆåŸå‹æ¨¡å¼ï¼‰</li>
<li>å¯¹è±¡å§‹ç»ˆåœ¨ç³»ç»Ÿä¸­åªæœ‰ä¸€ä¸ªå®ä¾‹ï¼›ï¼ˆå•ä¾‹æ¨¡å¼ï¼‰</li>
</ul>
<p><strong>åˆ›å»ºå‹æ¨¡å¼ä¹‹å•ä¾‹æ¨¡å¼</strong></p>
<p>å•ä¾‹æ¨¡å¼ï¼ˆSingleton Patternï¼‰æ˜¯ Java ä¸­æœ€ç®€å•çš„è®¾è®¡æ¨¡å¼ä¹‹ä¸€ï¼Œæä¾›äº†ä¸€ç§åˆ›å»ºå¯¹è±¡çš„æœ€ä½³æ–¹å¼ã€‚è¿™ç§æ¨¡å¼æ¶‰åŠåˆ°ä¸€ä¸ªå•ä¸€çš„ç±»ï¼Œè¯¥ç±»è´Ÿè´£åˆ›å»ºè‡ªå·±çš„å¯¹è±¡ï¼ŒåŒæ—¶ç¡®ä¿åªæœ‰å•ä¸ªå¯¹è±¡è¢«åˆ›å»ºã€‚è¿™ä¸ªç±»æä¾›äº†ä¸€ç§è®¿é—®å…¶å”¯ä¸€çš„å¯¹è±¡çš„æ–¹å¼ï¼Œå¯ä»¥ç›´æ¥è®¿é—®ï¼Œä¸éœ€è¦å®ä¾‹åŒ–è¯¥ç±»çš„å¯¹è±¡ã€‚</p>
<p><strong>æ„å›¾ï¼š</strong> ä¿è¯ä¸€ä¸ªç±»ä»…æœ‰ä¸€ä¸ªå®ä¾‹ï¼Œå¹¶æä¾›ä¸€ä¸ªè®¿é—®å®ƒçš„å…¨å±€è®¿é—®ç‚¹ã€‚</p>
<p><strong>ä¸»è¦è§£å†³ï¼š</strong> ä¸€ä¸ªå…¨å±€ä½¿ç”¨çš„ç±»é¢‘ç¹åœ°åˆ›å»ºä¸é”€æ¯ã€‚</p>
<p><strong>ä½•æ—¶ä½¿ç”¨ï¼š</strong> å½“æ‚¨æƒ³æ§åˆ¶å®ä¾‹æ•°ç›®ï¼ŒèŠ‚çœç³»ç»Ÿèµ„æºçš„æ—¶å€™ã€‚</p>
<p><strong>å¦‚ä½•è§£å†³ï¼š</strong> åˆ¤æ–­ç³»ç»Ÿæ˜¯å¦å·²ç»æœ‰è¿™ä¸ªå•ä¾‹ï¼Œå¦‚æœæœ‰åˆ™è¿”å›ï¼Œå¦‚æœæ²¡æœ‰åˆ™åˆ›å»ºã€‚</p>
<p><strong>ä¼˜ç‚¹ï¼š</strong></p>
<p>1ã€åœ¨å†…å­˜é‡Œåªæœ‰ä¸€ä¸ªå®ä¾‹ï¼Œå‡å°‘äº†å†…å­˜çš„å¼€é”€ï¼Œå°¤å…¶æ˜¯é¢‘ç¹çš„åˆ›å»ºå’Œé”€æ¯å®ä¾‹ï¼ˆæ¯”å¦‚é¦–é¡µé¡µé¢ç¼“å­˜ï¼‰ã€‚</p>
<p>2ã€é¿å…å¯¹èµ„æºçš„å¤šé‡å ç”¨ï¼ˆæ¯”å¦‚å†™æ–‡ä»¶æ“ä½œï¼‰ã€‚</p>
<p><strong>ç¼ºç‚¹ï¼š</strong></p>
<p>æ²¡æœ‰æ¥å£ï¼Œä¸èƒ½ç»§æ‰¿ï¼Œä¸å•ä¸€èŒè´£åŸåˆ™å†²çªï¼Œä¸€ä¸ªç±»åº”è¯¥åªå…³å¿ƒå†…éƒ¨é€»è¾‘ï¼Œè€Œä¸å…³å¿ƒå¤–é¢æ€ä¹ˆæ ·æ¥å®ä¾‹åŒ–ã€‚</p>
<p><strong>ä½¿ç”¨åœºæ™¯ï¼š</strong></p>
<p>1ã€è¦æ±‚ç”Ÿäº§å”¯ä¸€åºåˆ—å·ã€‚</p>
<p>2ã€å¤šçº¿ç¨‹ä¸­çš„çº¿ç¨‹æ± ã€‚</p>
<p>3ã€åˆ›å»ºçš„ä¸€ä¸ªå¯¹è±¡éœ€è¦æ¶ˆè€—çš„èµ„æºè¿‡å¤šï¼Œæ¯”å¦‚ I/O ä¸æ•°æ®åº“çš„è¿æ¥ç­‰ã€‚</p>
<p>4ã€ç³»ç»Ÿç¯å¢ƒä¿¡æ¯ï¼ˆSystem.getProperties()ï¼‰ã€‚</p>
<p><strong>å•ä¾‹æ¨¡å¼å››ç§å®ç°æ–¹æ¡ˆ</strong></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0ccbd3fa17724d3c888429fa7204f20b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6X54mp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766642627&amp;x-signature=St5CM%2FnUauoqzDTSodwRPS1eSc8%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p><strong>é¥¿æ±‰å¼</strong></p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-keyword">import</span>Â org.slf4j.Logger;
<span class="hljs-keyword">import</span>Â org.slf4j.LoggerFactory;
<span class="hljs-comment">/**
Â * é¥¿æ±‰å¼å•ä¾‹ï¼ˆçº¿ç¨‹å®‰å…¨ï¼‰
Â * æ ¸å¿ƒåŸç†ï¼šä¾èµ–ç±»åŠ è½½æœºåˆ¶ï¼ˆJVMä¿è¯ç±»åˆå§‹åŒ–æ—¶çº¿ç¨‹å®‰å…¨ï¼‰
Â * é€‚ç”¨åœºæ™¯ï¼šå®ä¾‹å ç”¨èµ„æºå°ã€å¯åŠ¨æ—¶åˆå§‹åŒ–å¯æ¥å—çš„åœºæ™¯
Â */</span>
<span class="hljs-keyword">public</span>Â <span class="hljs-keyword">class</span>Â <span class="hljs-title class_">LibifuTestSingleton</span>Â {
Â  Â Â <span class="hljs-keyword">private</span>Â <span class="hljs-type">static</span>Â <span class="hljs-keyword">final</span>Â Logger log = LoggerFactory.<span class="hljs-built_in">getLogger</span>(LibifuTestSingleton.<span class="hljs-keyword">class</span>);


Â  Â Â <span class="hljs-comment">// ç±»åŠ è½½æ—¶ç›´æ¥åˆå§‹åŒ–å®ä¾‹ï¼ˆæ— å»¶è¿ŸåŠ è½½ï¼‰</span>
Â  Â Â <span class="hljs-keyword">private</span>Â <span class="hljs-type">static</span>Â <span class="hljs-keyword">final</span>Â LibifuTestSingleton INSTANCE =Â <span class="hljs-keyword">new</span>Â <span class="hljs-built_in">LibifuTestSingleton</span>();
Â  Â Â <span class="hljs-comment">// ç§æœ‰æ„é€ å™¨ï¼ˆç¦æ­¢å¤–éƒ¨å®ä¾‹åŒ–ï¼‰</span>
Â  Â Â <span class="hljs-function"><span class="hljs-keyword">private</span>Â <span class="hljs-title">LibifuTestSingleton</span><span class="hljs-params">()</span>Â </span>{
Â  Â  Â  Â  log.<span class="hljs-built_in">info</span>(<span class="hljs-string">"LibifuTestSingleton å®ä¾‹åˆå§‹åŒ–å®Œæˆ"</span>);
Â  Â  }
Â  Â Â <span class="hljs-comment">// å…¨å±€è®¿é—®ç‚¹ï¼ˆæ— é”ï¼Œé«˜æ•ˆï¼‰</span>
Â  Â Â <span class="hljs-function"><span class="hljs-keyword">public</span>Â <span class="hljs-type">static</span>Â LibifuTestSingletonÂ <span class="hljs-title">getInstance</span><span class="hljs-params">()</span>Â </span>{
Â  Â  Â  Â Â <span class="hljs-keyword">return</span>Â INSTANCE;
Â  Â  }
Â  Â Â <span class="hljs-comment">// ä¸šåŠ¡æ–¹æ³•ç¤ºä¾‹</span>
Â  Â Â <span class="hljs-function"><span class="hljs-keyword">public</span>Â <span class="hljs-type">void</span>Â <span class="hljs-title">doBusiness</span><span class="hljs-params">()</span>Â </span>{
Â  Â  Â  Â  log.<span class="hljs-built_in">info</span>(<span class="hljs-string">"é¥¿æ±‰å¼å•ä¾‹ï¼ˆLibifuTestSingletonï¼‰æ‰§è¡Œä¸šåŠ¡é€»è¾‘"</span>);
Â  Â  }
}
</code></pre>
<p><strong>æ‡’æ±‰å¼</strong></p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-keyword">import</span> org.slf4j.Logger;
<span class="hljs-keyword">import</span> org.slf4j.LoggerFactory;
<span class="hljs-comment">/**
Â * æ‡’æ±‰å¼å•ä¾‹ï¼ˆçº¿ç¨‹å®‰å…¨ï¼‰
Â * æ ¸å¿ƒåŸç†ï¼šç¬¬ä¸€æ¬¡è°ƒç”¨æ—¶åˆå§‹åŒ–ï¼Œsynchronizedä¿è¯çº¿ç¨‹å®‰å…¨
Â * é€‚ç”¨åœºæ™¯ï¼šå®ä¾‹ä½¿ç”¨é¢‘ç‡æä½ã€æ— æ€§èƒ½è¦æ±‚çš„åœºæ™¯
Â */</span>
<span class="hljs-keyword">public</span>Â <span class="hljs-keyword">class</span>Â <span class="hljs-title class_">LibifuTestLazySingleton</span>Â {
Â  Â Â <span class="hljs-keyword">private</span>Â <span class="hljs-type">static</span>Â <span class="hljs-keyword">final</span> Logger log = LoggerFactory.<span class="hljs-built_in">getLogger</span>(LibifuTestLazySingleton.<span class="hljs-keyword">class</span>);


Â  Â Â <span class="hljs-comment">// ç§æœ‰é™æ€å®ä¾‹ï¼ˆåˆå§‹ä¸ºnullï¼Œå»¶è¿ŸåŠ è½½ï¼‰</span>
Â  Â Â <span class="hljs-keyword">private</span>Â <span class="hljs-type">static</span>Â LibifuTestLazySingleton instance;
Â  Â Â <span class="hljs-comment">// ç§æœ‰æ„é€ å™¨ï¼ˆç¦æ­¢å¤–éƒ¨å®ä¾‹åŒ–ï¼‰</span>
Â  Â Â <span class="hljs-function"><span class="hljs-keyword">private</span>Â <span class="hljs-title">LibifuTestLazySingleton</span><span class="hljs-params">()</span>Â </span>{
Â  Â  Â  Â  log.<span class="hljs-built_in">info</span>(<span class="hljs-string">"LibifuTestLazySingleton å®ä¾‹åˆå§‹åŒ–å®Œæˆ"</span>);
Â  Â  }
Â  Â Â <span class="hljs-comment">// åŒæ­¥æ–¹æ³•ï¼ˆä¿è¯å¤šçº¿ç¨‹ä¸‹å”¯ä¸€å®ä¾‹ï¼‰</span>
Â  Â Â <span class="hljs-function"><span class="hljs-keyword">public</span>Â <span class="hljs-type">static</span>Â <span class="hljs-keyword">synchronized</span> LibifuTestLazySingletonÂ <span class="hljs-title">getInstance</span><span class="hljs-params">()</span>Â </span>{
Â  Â  Â  Â Â <span class="hljs-keyword">if</span>Â (instance ==Â null) {
Â  Â  Â  Â  Â  Â  instance =Â <span class="hljs-keyword">new</span>Â <span class="hljs-built_in">LibifuTestLazySingleton</span>();
Â  Â  Â  Â  }
Â  Â  Â  Â Â <span class="hljs-keyword">return</span>Â instance;
Â  Â  }
Â  Â Â <span class="hljs-comment">// ä¸šåŠ¡æ–¹æ³•ç¤ºä¾‹</span>
Â  Â Â <span class="hljs-function"><span class="hljs-keyword">public</span>Â <span class="hljs-type">void</span>Â <span class="hljs-title">doBusiness</span><span class="hljs-params">()</span>Â </span>{
Â  Â  Â  Â  log.<span class="hljs-built_in">info</span>(<span class="hljs-string">"æ‡’æ±‰å¼å•ä¾‹ï¼ˆLibifuTestLazySingletonï¼‰æ‰§è¡Œä¸šåŠ¡é€»è¾‘"</span>);
Â  Â  }
}
</code></pre>
<p><strong>åŒæ£€é” ï¼ˆDCLï¼ŒJDK1.5+ï¼‰</strong></p>
<pre><code class="hljs language-csharp" lang="csharp">import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
<span class="hljs-comment">/**
Â * åŒæ£€é”å•ä¾‹ï¼ˆçº¿ç¨‹å®‰å…¨ï¼Œé«˜æ•ˆï¼‰
Â * æ ¸å¿ƒåŸç†ï¼švolatileç¦æ­¢æŒ‡ä»¤é‡æ’åºï¼ŒåŒé‡æ ¡éªŒ+ç±»é”ä¿è¯å”¯ä¸€æ€§
Â * é€‚ç”¨åœºæ™¯ï¼šå¤§å¤šæ•°é«˜å¹¶å‘åœºæ™¯
Â */</span>
<span class="hljs-keyword">public</span>Â <span class="hljs-keyword">class</span>Â <span class="hljs-title">LibifuTestDclSingleton</span>Â {
Â  Â Â <span class="hljs-keyword">private</span>Â <span class="hljs-keyword">static</span>Â final Logger log = LoggerFactory.getLogger(LibifuTestDclSingleton.<span class="hljs-keyword">class</span>);


Â  Â Â <span class="hljs-comment">// volatileå…³é”®å­—ï¼šç¦æ­¢instance = new LibifuTestDclSingleton()æŒ‡ä»¤é‡æ’åº</span>
Â  Â Â <span class="hljs-keyword">private</span>Â <span class="hljs-keyword">volatile</span>Â <span class="hljs-keyword">static</span>Â LibifuTestDclSingleton instance;
Â  Â Â <span class="hljs-comment">// ç§æœ‰æ„é€ å™¨ï¼ˆç¦æ­¢å¤–éƒ¨å®ä¾‹åŒ–ï¼Œå«é˜²åå°„æ”»å‡»ï¼‰</span>
Â  Â Â <span class="hljs-function"><span class="hljs-keyword">private</span>Â <span class="hljs-title">LibifuTestDclSingleton</span>()</span>Â {
Â  Â  Â  Â  log.info(<span class="hljs-string">"LibifuTestDclSingleton å®ä¾‹åˆå§‹åŒ–å®Œæˆ"</span>);
Â  Â  Â  Â Â <span class="hljs-comment">// é˜²åå°„æ”»å‡»ï¼šè‹¥å®ä¾‹å·²å­˜åœ¨ï¼Œç›´æ¥æŠ›å‡ºå¼‚å¸¸</span>
Â  Â  Â  Â Â <span class="hljs-keyword">if</span>Â (instance !=Â <span class="hljs-literal">null</span>) {
Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">throw</span>Â <span class="hljs-keyword">new</span>Â IllegalStateException(<span class="hljs-string">"å•ä¾‹å®ä¾‹å·²å­˜åœ¨ï¼Œç¦æ­¢é‡å¤åˆ›å»º"</span>);
Â  Â  Â  Â  }
Â  Â  }
Â  Â Â <span class="hljs-comment">// å…¨å±€è®¿é—®ç‚¹ï¼ˆåŒé‡æ ¡éªŒ+ç±»é”ï¼Œå…¼é¡¾çº¿ç¨‹å®‰å…¨ä¸æ•ˆç‡ï¼‰</span>
Â  Â Â <span class="hljs-function"><span class="hljs-keyword">public</span>Â <span class="hljs-keyword">static</span>Â LibifuTestDclSingletonÂ <span class="hljs-title">getInstance</span>()</span>Â {
Â  Â  Â  Â Â <span class="hljs-comment">// ç¬¬ä¸€æ¬¡æ ¡éªŒï¼šé¿å…é¢‘ç¹åŠ é”ï¼ˆæé«˜æ•ˆç‡ï¼‰</span>
Â  Â  Â  Â Â <span class="hljs-keyword">if</span>Â (instance ==Â <span class="hljs-literal">null</span>) {
Â  Â  Â  Â  Â  Â Â <span class="hljs-comment">// ç±»é”ï¼šä¿è¯åŒä¸€æ—¶åˆ»åªæœ‰ä¸€ä¸ªçº¿ç¨‹è¿›å…¥å®ä¾‹åˆ›å»ºé€»è¾‘</span>
Â  Â  Â  Â  Â  Â  synchronized (LibifuTestDclSingleton.<span class="hljs-keyword">class</span>) {
Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-comment">// ç¬¬äºŒæ¬¡æ ¡éªŒï¼šç¡®ä¿å”¯ä¸€å®ä¾‹ï¼ˆé˜²æ­¢å¤šçº¿ç¨‹å¹¶å‘ç»•è¿‡ç¬¬ä¸€æ¬¡æ ¡éªŒï¼‰</span>
Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">if</span>Â (instance ==Â <span class="hljs-literal">null</span>) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  instance =Â <span class="hljs-keyword">new</span>Â LibifuTestDclSingleton();
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }
Â  Â  Â  Â Â <span class="hljs-keyword">return</span>Â instance;
Â  Â  }
Â  Â Â <span class="hljs-comment">// é˜²åºåˆ—åŒ–æ¼æ´ï¼šååºåˆ—åŒ–æ—¶è¿”å›å·²æœ‰å®ä¾‹ï¼ˆè€Œéåˆ›å»ºæ–°å®ä¾‹ï¼‰</span>
Â  Â Â <span class="hljs-function"><span class="hljs-keyword">private</span>Â ObjectÂ <span class="hljs-title">readResolve</span>()</span>Â {
Â  Â  Â  Â Â <span class="hljs-keyword">return</span>Â getInstance();
Â  Â  }
Â  Â Â <span class="hljs-comment">// ä¸šåŠ¡æ–¹æ³•ç¤ºä¾‹</span>
Â  Â Â <span class="hljs-function"><span class="hljs-keyword">public</span>Â <span class="hljs-keyword">void</span>Â <span class="hljs-title">doBusiness</span>()</span>Â {
Â  Â  Â  Â  log.info(<span class="hljs-string">"åŒæ£€é”å•ä¾‹ï¼ˆLibifuTestDclSingletonï¼‰æ‰§è¡Œä¸šåŠ¡é€»è¾‘"</span>);
Â  Â  }
}
</code></pre>
<p><strong>æšä¸¾å•ä¾‹ï¼ˆJDK1.5+ï¼‰</strong></p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-keyword">import</span>Â org.slf4j.Logger;
<span class="hljs-keyword">import</span>Â org.slf4j.LoggerFactory;
<span class="hljs-comment">/**
Â * æšä¸¾å•ä¾‹ï¼ˆå¤©ç„¶çº¿ç¨‹å®‰å…¨ã€é˜²åå°„ã€é˜²åºåˆ—åŒ–ï¼‰
Â * æ ¸å¿ƒåŸç†ï¼šæšä¸¾ç±»çš„å®ä¾‹ç”±JVMç®¡ç†ï¼Œå¤©ç„¶å”¯ä¸€
Â * é€‚ç”¨åœºæ™¯ï¼šå®‰å…¨æ€§è¦æ±‚æé«˜çš„åœºæ™¯ï¼ˆå¦‚é…ç½®ä¸­å¿ƒã€åŠ å¯†å·¥å…·ç±»ï¼‰
Â */</span>
<span class="hljs-keyword">public</span>Â <span class="hljs-keyword">enum</span>Â <span class="hljs-title class_">LibifuTestEnumSingleton</span>Â {
Â  Â  INSTANCE;
Â  Â Â <span class="hljs-keyword">private</span>Â <span class="hljs-type">static</span>Â <span class="hljs-keyword">final</span>Â Logger log = LoggerFactory.<span class="hljs-built_in">getLogger</span>(LibifuTestEnumSingleton.<span class="hljs-keyword">class</span>);
Â  Â Â <span class="hljs-comment">// æšä¸¾æ„é€ å™¨ï¼ˆé»˜è®¤ç§æœ‰ï¼Œæ— éœ€æ˜¾å¼å£°æ˜ï¼‰</span>
Â  Â Â <span class="hljs-built_in">LibifuTestEnumSingleton</span>() {
Â  Â  Â  Â  log.<span class="hljs-built_in">info</span>(<span class="hljs-string">"LibifuTestEnumSingleton å®ä¾‹åˆå§‹åŒ–å®Œæˆ"</span>);
Â  Â  }
Â  Â Â <span class="hljs-comment">// ä¸šåŠ¡æ–¹æ³•ç¤ºä¾‹</span>
Â  Â Â <span class="hljs-function"><span class="hljs-keyword">public</span>Â <span class="hljs-type">void</span>Â <span class="hljs-title">doBusiness</span><span class="hljs-params">()</span>Â </span>{
Â  Â  Â  Â  log.<span class="hljs-built_in">info</span>(<span class="hljs-string">"æšä¸¾å•ä¾‹ï¼ˆLibifuTestEnumSingletonï¼‰æ‰§è¡Œä¸šåŠ¡é€»è¾‘"</span>);
Â  Â  }
}
</code></pre>
<p><strong>æ¡†æ¶åº”ç”¨</strong></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d5f8e392e1354eda82c781a68e57146a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6X54mp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766642627&amp;x-signature=vA0JNPCdAeQrgq%2FotgOd0Tn5NGg%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p>Spring æ¡†æ¶ä¸­ Bean é»˜è®¤ä½œç”¨åŸŸä¸ºsingletonï¼ˆå•ä¾‹ï¼‰ï¼Œæ ¸å¿ƒé€šè¿‡AbstractBeanFactoryç±»çš„ç¼“å­˜æœºåˆ¶ + å•ä¾‹åˆ›å»ºé€»è¾‘å®ç° â€”â€” ç¡®ä¿æ¯ä¸ª Bean åœ¨ Spring å®¹å™¨ä¸­ä»…å­˜åœ¨ä¸€ä¸ªå®ä¾‹ï¼Œä¸”ç”±å®¹å™¨ç»Ÿä¸€ç®¡ç†åˆ›å»ºã€ç¼“å­˜ä¸é”€æ¯ï¼Œé™ä½å¯¹è±¡é¢‘ç¹åˆ›å»ºé”€æ¯çš„èµ„æºå¼€é”€ï¼Œå¥‘åˆå•ä¾‹æ¨¡å¼ â€œå”¯ä¸€å®ä¾‹ + å…¨å±€è®¿é—®â€ çš„æ ¸å¿ƒæ€æƒ³ã€‚</p>
<p>æ ¸å¿ƒé€»è¾‘ï¼šBean åˆ›å»ºåå­˜å…¥singletonObjectsï¼ˆå•ä¾‹ç¼“å­˜æ± ï¼‰ï¼Œåç»­è·å–æ—¶ä¼˜å…ˆä»ç¼“å­˜è¯»å–ï¼Œæœªå‘½ä¸­åˆ™è§¦å‘åˆ›å»ºæµç¨‹ï¼ŒåŒæ—¶é€šè¿‡åŒæ­¥æœºåˆ¶ä¿è¯å¤šçº¿ç¨‹å®‰å…¨ã€‚</p>
<p>ä»¥ä¸‹é€‰å–AbstractBeanFactoryä¸­å®ç°å•ä¾‹ Bean è·å–çš„æ ¸å¿ƒä»£ç ç‰‡æ®µï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// 1. å¯¹å¤–æš´éœ²çš„è·å–Beançš„å…¬å…±æ¥å£ï¼Œæ¥æ”¶Beanåç§°å‚æ•°</span>
<span class="hljs-meta">@Override</span>
<span class="hljs-keyword">public</span>Â ObjectÂ getBean(StringÂ name) throwsÂ BeansExceptionÂ {
Â  Â Â <span class="hljs-comment">// 2. å§”æ‰˜doGetBeanæ–¹æ³•å®ç°å…·ä½“é€»è¾‘ï¼Œå‚æ•°åˆ†åˆ«ä¸ºï¼šBeanåç§°ã€æ‰€éœ€ç±»å‹ï¼ˆnullè¡¨ç¤ºä¸æŒ‡å®šï¼‰ã€æ„é€ å‚æ•°ï¼ˆnullï¼‰ã€æ˜¯å¦ä»…ç±»å‹æ£€æŸ¥ï¼ˆfalseï¼‰</span>
Â  Â Â <span class="hljs-keyword">return</span>Â doGetBean(name,Â <span class="hljs-literal">null</span>,Â <span class="hljs-literal">null</span>,Â <span class="hljs-literal">false</span>);
}
<span class="hljs-comment">// 3. æ ¸å¿ƒè·å–Beançš„å®ç°æ–¹æ³•ï¼Œæ³›å‹Tä¿è¯ç±»å‹å®‰å…¨</span>
<span class="hljs-meta">@SuppressWarnings(<span class="hljs-string">"unchecked"</span>)</span>
<span class="hljs-keyword">protected</span>Â &lt;T&gt; TÂ doGetBean(
Â  Â  Â  Â Â StringÂ name,Â Class&lt;T&gt; requiredType,Â Object[] args,Â booleanÂ typeCheckOnly) throwsÂ BeansExceptionÂ {
Â  Â Â <span class="hljs-comment">// 4. å¤„ç†Beanåç§°ï¼šè½¬æ¢åˆ«åã€å»é™¤FactoryBeanå‰ç¼€ï¼ˆå¦‚&amp;ï¼‰ï¼Œå¾—åˆ°åŸå§‹Beanåç§°</span>
Â  Â Â StringÂ beanName =Â transformedBeanName(name);
Â  Â Â <span class="hljs-comment">// 5. ä»å•ä¾‹ç¼“å­˜ä¸­è·å–Beanå®ä¾‹ï¼ˆæ ¸å¿ƒï¼šä¼˜å…ˆå¤ç”¨å·²æœ‰å®ä¾‹ï¼‰</span>
Â  Â Â ObjectÂ sharedInstance =Â getSingleton(beanName);
Â  Â Â <span class="hljs-comment">// 6. ç¼“å­˜å‘½ä¸­ï¼ˆå­˜åœ¨å•ä¾‹å®ä¾‹ï¼‰ä¸”æ— æ„é€ å‚æ•°ï¼ˆæ— éœ€é‡æ–°åˆ›å»ºï¼‰</span>
Â  Â Â <span class="hljs-keyword">if</span>Â (sharedInstance !=Â <span class="hljs-literal">null</span>Â &amp;&amp; args ==Â <span class="hljs-literal">null</span>) {
Â  Â  Â  Â Â <span class="hljs-comment">// 7. å¤„ç†ç‰¹æ®ŠBeanï¼ˆå¦‚FactoryBeanï¼‰ï¼šå¦‚æœæ˜¯FactoryBeanï¼Œè¿”å›å…¶getObject()åˆ›å»ºçš„å®ä¾‹ï¼Œè€ŒéFactoryBeanæœ¬èº«</span>
Â  Â  Â  Â  T bean = (T)Â getObjectForBeanInstance(sharedInstance, name, beanName,Â <span class="hljs-literal">null</span>);
Â  Â  }Â <span class="hljs-keyword">else</span>Â {
Â  Â  Â  Â Â <span class="hljs-comment">// 8. ç¼“å­˜æœªå‘½ä¸­æˆ–éœ€åˆ›å»ºæ–°å®ä¾‹ï¼ˆéå•ä¾‹ã€åŸå‹ç­‰ä½œç”¨åŸŸï¼‰çš„é€»è¾‘ï¼ˆæ­¤å¤„çœç•¥ï¼Œèšç„¦å•ä¾‹ï¼‰</span>
Â  Â  }
Â  Â Â <span class="hljs-comment">// 9. è¿”å›æœ€ç»ˆçš„Beanå®ä¾‹ï¼ˆç±»å‹è½¬æ¢åï¼‰</span>
Â  Â Â <span class="hljs-keyword">return</span>Â (T) bean;
}
<span class="hljs-comment">// 10. ä»å•ä¾‹ç¼“å­˜ä¸­è·å–å®ä¾‹çš„æ ¸å¿ƒæ–¹æ³•ï¼ŒallowEarlyReferenceè¡¨ç¤ºæ˜¯å¦å…è®¸æ—©æœŸå¼•ç”¨ï¼ˆå¾ªç¯ä¾èµ–åœºæ™¯ï¼‰</span>
<span class="hljs-keyword">protected</span>Â ObjectÂ getSingleton(StringÂ beanName,Â booleanÂ allowEarlyReference) {
Â  Â Â <span class="hljs-comment">// 11. ä»ä¸€çº§ç¼“å­˜ï¼ˆsingletonObjectsï¼‰è·å–å·²å®Œå…¨åˆå§‹åŒ–çš„å•ä¾‹å®ä¾‹ï¼ˆkey=Beanåç§°ï¼Œvalue=Beanå®ä¾‹ï¼‰</span>
Â  Â Â ObjectÂ singletonObject =Â <span class="hljs-keyword">this</span>.singletonObjects.<span class="hljs-keyword">get</span>(beanName);


Â  Â Â <span class="hljs-comment">// 12. ç¼“å­˜æœªå‘½ä¸­ï¼Œä¸”å½“å‰Beanæ­£åœ¨åˆ›å»ºä¸­ï¼ˆè§£å†³å¾ªç¯ä¾èµ–ï¼‰</span>
Â  Â Â <span class="hljs-keyword">if</span>Â (singletonObject ==Â <span class="hljs-literal">null</span>Â &amp;&amp;Â isSingletonCurrentlyInCreation(beanName)) {
Â  Â  Â  Â Â <span class="hljs-comment">// 13. å¯¹ä¸€çº§ç¼“å­˜åŠ é”ï¼Œä¿è¯å¤šçº¿ç¨‹å®‰å…¨ï¼ˆé¿å…å¹¶å‘åˆ›å»ºå¤šä¸ªå®ä¾‹ï¼‰</span>
Â  Â  Â  Â Â synchronizedÂ (<span class="hljs-keyword">this</span>.singletonObjects) {
Â  Â  Â  Â  Â  Â Â <span class="hljs-comment">// 14. ä»äºŒçº§ç¼“å­˜ï¼ˆearlySingletonObjectsï¼‰è·å–æ—©æœŸæš´éœ²çš„å®ä¾‹ï¼ˆæœªå®Œå…¨åˆå§‹åŒ–ï¼Œä»…è§£å†³å¾ªç¯ä¾èµ–ï¼‰</span>
Â  Â  Â  Â  Â  Â  singletonObject =Â <span class="hljs-keyword">this</span>.earlySingletonObjects.<span class="hljs-keyword">get</span>(beanName);


Â  Â  Â  Â  Â  Â Â <span class="hljs-comment">// 15. äºŒçº§ç¼“å­˜æœªå‘½ä¸­ï¼Œä¸”å…è®¸æ—©æœŸå¼•ç”¨</span>
Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">if</span>Â (singletonObject ==Â <span class="hljs-literal">null</span>Â &amp;&amp; allowEarlyReference) {
Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-comment">// 16. ä»ä¸‰çº§ç¼“å­˜ï¼ˆsingletonFactoriesï¼‰è·å–Beançš„å·¥å‚å¯¹è±¡ï¼ˆç”¨äºåˆ›å»ºæ—©æœŸå®ä¾‹ï¼‰</span>
Â  Â  Â  Â  Â  Â  Â  Â Â ObjectFactory&lt;?&gt; singletonFactory =Â <span class="hljs-keyword">this</span>.singletonFactories.<span class="hljs-keyword">get</span>(beanName);


Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-comment">// 17. å·¥å‚å¯¹è±¡å­˜åœ¨ï¼Œé€šè¿‡å·¥å‚åˆ›å»ºæ—©æœŸå®ä¾‹</span>
Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">if</span>Â (singletonFactory !=Â <span class="hljs-literal">null</span>) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  singletonObject = singletonFactory.getObject();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-comment">// 18. å°†æ—©æœŸå®ä¾‹å­˜å…¥äºŒçº§ç¼“å­˜ï¼ŒåŒæ—¶ç§»é™¤ä¸‰çº§ç¼“å­˜ï¼ˆé¿å…é‡å¤åˆ›å»ºï¼‰</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">this</span>.earlySingletonObjects.put(beanName, singletonObject);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">this</span>.singletonFactories.remove(beanName);
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }
Â  Â  }
Â  Â Â <span class="hljs-comment">// 19. è¿”å›å•ä¾‹å®ä¾‹ï¼ˆå¯èƒ½æ˜¯å®Œå…¨åˆå§‹åŒ–çš„ï¼Œä¹Ÿå¯èƒ½æ˜¯æ—©æœŸå®ä¾‹ï¼‰</span>
Â  Â Â <span class="hljs-keyword">return</span>Â singletonObject;
}
</code></pre>
<p><strong>å…¥å£ï¼š</strong> getBean(String name)æ˜¯è·å– Bean çš„å…¥å£ï¼Œå§”æ‰˜doGetBeanå®ç°ç»†èŠ‚ï¼›</p>
<p><strong>åç§°å¤„ç†ï¼š</strong> transformedBeanNameç»Ÿä¸€ Bean åç§°æ ¼å¼ï¼Œé¿å…åˆ«åã€FactoryBean å‰ç¼€å¯¼è‡´çš„è¯†åˆ«é—®é¢˜ï¼›</p>
<p><strong>ç¼“å­˜ä¼˜å…ˆï¼š</strong> é€šè¿‡getSingletonä»ä¸‰çº§ç¼“å­˜ï¼ˆsingletonObjectsâ†’earlySingletonObjectsâ†’singletonFactoriesï¼‰è·å–å®ä¾‹ï¼Œä¼˜å…ˆå¤ç”¨å·²æœ‰å®ä¾‹ï¼Œå¥‘åˆå•ä¾‹æ¨¡å¼æ ¸å¿ƒï¼›</p>
<p><strong>çº¿ç¨‹å®‰å…¨ï¼š</strong> å¯¹å•ä¾‹ç¼“å­˜åŠ é”ï¼Œé˜²æ­¢å¤šçº¿ç¨‹å¹¶å‘åˆ›å»ºå¤šä¸ªå®ä¾‹ï¼›</p>
<p><strong>ç‰¹æ®Šå¤„ç†ï¼š</strong> getObjectForBeanInstanceåŒºåˆ†æ™®é€š Bean å’Œ FactoryBeanï¼Œç¡®ä¿è¿”å›ç”¨æˆ·é¢„æœŸçš„å®ä¾‹ã€‚</p>
<p>æ•´ä¸ªæµç¨‹å›´ç»• â€œç¼“å­˜å¤ç”¨ + å®‰å…¨åˆ›å»ºâ€ å®ç° Spring å•ä¾‹ Bean çš„ç®¡ç†ï¼Œæ˜¯å•ä¾‹æ¨¡å¼åœ¨æ¡†æ¶çº§çš„ç»å…¸è½åœ°ã€‚</p>
<h3 data-id="heading-7">ç»“æ„å‹æ¨¡å¼</h3>
<p><strong>ä¸ºä»€ä¹ˆç”¨ç»“æ„å‹æ¨¡å¼ï¼Ÿ</strong></p>
<ul>
<li>ç»“æ„å‹æ¨¡å¼å…³æ³¨ç‚¹â€œæ€æ ·ç»„åˆå¯¹è±¡/ç±»â€</li>
<li>ç±»ç»“æ„å‹æ¨¡å¼å…³å¿ƒç±»çš„ç»„åˆï¼Œç”±å¤šä¸ªç±»å¯ä»¥ç»„åˆæˆä¸€ä¸ªæ›´å¤§çš„ï¼ˆç»§æ‰¿ï¼‰</li>
<li>å¯¹è±¡ç»“æ„å‹æ¨¡å¼å…³å¿ƒç±»ä¸å¯¹è±¡çš„ç»„åˆï¼Œé€šè¿‡å…³è”å…³ç³»åœ¨ä¸€ä¸ªç±»ä¸­å®šä¹‰å¦ä¸€ä¸ªç±»çš„å®ä¾‹å¯¹è±¡ï¼ˆç»„åˆï¼‰æ ¹æ®â€œåˆæˆå¤ç”¨åŸåˆ™â€ï¼Œåœ¨ç³»ç»Ÿä¸­å°½é‡ä½¿ç”¨å…³è”å…³ç³»æ¥æ›¿ä»£ç»§æ‰¿å…³ç³»ï¼Œå› æ­¤å¤§éƒ¨åˆ†ç»“æ„å‹æ¨¡å¼éƒ½æ˜¯å¯¹è±¡ç»“æ„å‹æ¨¡å¼ã€‚</li>
</ul>

<ul>
<li>é€‚é…å™¨æ¨¡å¼ï¼ˆAdapter Patternï¼‰ï¼šä¸¤ä¸ªä¸å…¼å®¹æ¥å£ä¹‹é—´é€‚é…çš„æ¡¥æ¢</li>
<li>æ¡¥æ¥æ¨¡å¼ï¼ˆBridge Patternï¼‰ï¼šç›¸åŒåŠŸèƒ½æŠ½è±¡åŒ–ä¸å®ç°åŒ–è§£è€¦ï¼ŒæŠ½è±¡ä¸å®ç°å¯ä»¥ç‹¬ç«‹å‡çº§</li>
<li>è¿‡æ»¤å™¨æ¨¡å¼ï¼ˆFilterã€Criteria Patternï¼‰ï¼šä½¿ç”¨ä¸åŒçš„æ ‡å‡†æ¥è¿‡æ»¤ä¸€ç»„å¯¹è±¡</li>
<li>ç»„åˆæ¨¡å¼ï¼ˆComposite Patternï¼‰ï¼šç›¸ä¼¼å¯¹è±¡è¿›è¡Œç»„åˆï¼Œå½¢æˆæ ‘å½¢ç»“æ„</li>
<li>è£…é¥°å™¨æ¨¡å¼ï¼ˆDecorator Patternï¼‰ï¼šå‘ä¸€ä¸ªç°æœ‰çš„å¯¹è±¡æ·»åŠ æ–°çš„åŠŸèƒ½ï¼ŒåŒæ—¶åˆä¸æ”¹å˜å…¶ç»“æ„</li>
<li>å¤–è§‚æ¨¡å¼ï¼ˆFacade Patternï¼‰ï¼šå‘ç°æœ‰çš„ç³»ç»Ÿæ·»åŠ ä¸€ä¸ªæ¥å£ï¼Œå®¢æˆ·ç«¯è®¿é—®æ­¤æ¥å£æ¥éšè—ç³»ç»Ÿçš„å¤æ‚æ€§</li>
<li>äº«å…ƒæ¨¡å¼ï¼ˆFlyweight Patternï¼‰ï¼šå°è¯•é‡ç”¨ç°æœ‰çš„åŒç±»å¯¹è±¡ï¼Œå¦‚æœæœªæ‰¾åˆ°åŒ¹é…çš„å¯¹è±¡ï¼Œåˆ™åˆ›å»ºæ–°å¯¹è±¡</li>
<li>ä»£ç†æ¨¡å¼ï¼ˆProxy Patternï¼‰ï¼šä¸€ä¸ªç±»ä»£è¡¨å¦ä¸€ä¸ªç±»çš„åŠŸèƒ½</li>
</ul>
<p><strong>ç»“æ„å‹æ¨¡å¼ä¹‹å¤–è§‚æ¨¡å¼</strong></p>
<p>å¤–è§‚æ¨¡å¼ï¼ˆFacade Patternï¼‰ä¸ºå¤æ‚å­ç³»ç»Ÿæä¾›ç»Ÿä¸€é«˜å±‚æ¥å£ï¼Œéšè—å†…éƒ¨å¤æ‚æ€§ï¼Œç®€åŒ–å®¢æˆ·ç«¯è°ƒç”¨ã€‚è¿™ç§æ¨¡å¼æ¶‰åŠåˆ°ä¸€ä¸ªå•ä¸€çš„ç±»ï¼Œè¯¥ç±»æä¾›äº†å®¢æˆ·ç«¯è¯·æ±‚çš„ç®€åŒ–æ–¹æ³•å’Œå¯¹ç°æœ‰ç³»ç»Ÿç±»æ–¹æ³•çš„å§”æ‰˜è°ƒç”¨ã€‚</p>
<p><strong>æ„å›¾ï¼š</strong> ä¸ºå­ç³»ç»Ÿä¸­çš„ä¸€ç»„æ¥å£æä¾›ä¸€ä¸ªä¸€è‡´çš„ç•Œé¢ï¼Œå¤–è§‚æ¨¡å¼å®šä¹‰äº†ä¸€ä¸ªé«˜å±‚æ¥å£ï¼Œè¿™ä¸ªæ¥å£ä½¿å¾—è¿™ä¸€å­ç³»ç»Ÿæ›´åŠ å®¹æ˜“ä½¿ç”¨ã€‚</p>
<p><strong>ä¸»è¦è§£å†³ï¼š</strong> é™ä½è®¿é—®å¤æ‚ç³»ç»Ÿçš„å†…éƒ¨å­ç³»ç»Ÿæ—¶çš„å¤æ‚åº¦ï¼Œç®€åŒ–å®¢æˆ·ç«¯ä¹‹é—´çš„æ¥å£ã€‚</p>
<p><strong>ä½•æ—¶ä½¿ç”¨ï¼š</strong></p>
<p>1ã€å®¢æˆ·ç«¯ä¸éœ€è¦çŸ¥é“ç³»ç»Ÿå†…éƒ¨çš„å¤æ‚è”ç³»ï¼Œæ•´ä¸ªç³»ç»Ÿåªéœ€æä¾›ä¸€ä¸ª"æ¥å¾…å‘˜"å³å¯ã€‚</p>
<p>2ã€å®šä¹‰ç³»ç»Ÿçš„å…¥å£ã€‚</p>
<p><strong>å¦‚ä½•è§£å†³ï¼š</strong> å®¢æˆ·ç«¯ä¸ä¸ç³»ç»Ÿè€¦åˆï¼Œå¤–è§‚ç±»ä¸ç³»ç»Ÿè€¦åˆã€‚</p>
<p><strong>ä¼˜ç‚¹ï¼š</strong></p>
<p>1ã€å‡å°‘ç³»ç»Ÿç›¸äº’ä¾èµ–ã€‚</p>
<p>2ã€æé«˜çµæ´»æ€§ã€‚</p>
<p>3ã€æé«˜äº†å®‰å…¨æ€§ã€‚</p>
<p><strong>ç¼ºç‚¹ï¼š</strong></p>
<p>ä¸ç¬¦åˆå¼€é—­åŸåˆ™ï¼Œå¦‚æœè¦æ”¹ä¸œè¥¿å¾ˆéº»çƒ¦ï¼Œç»§æ‰¿é‡å†™éƒ½ä¸åˆé€‚ã€‚</p>
<p><strong>ä½¿ç”¨åœºæ™¯ï¼š</strong></p>
<p>1ã€JAVA çš„ä¸‰å±‚å¼€å‘æ¨¡å¼</p>
<p>2ã€åˆ†å¸ƒå¼ç³»ç»Ÿçš„ç½‘å…³</p>
<p><strong>å¤–è§‚æ¨¡å¼ç®€å•åº”ç”¨</strong></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b5cdc72aae354e0d85251887f57fa61f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6X54mp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766642627&amp;x-signature=C8a%2BvtsMXBsr2TnztlqwRXdcmxI%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p>ç¨‹åºå‘˜è¿™è¡Œï¼Œä¸»æ‰“ä¸€ä¸ª â€œä»£ç è™æˆ‘åƒç™¾éï¼Œæˆ‘å¾…é”®ç›˜å¦‚åˆæ‹â€â€”â€” ç™½å¤© debug ï¼Œæ·±å¤œæ”¹ Bug ï¼Œå…ç–«åŠ›å ªæ¯”æœªåŠ  try-catch çš„ä»£ç ï¼Œè¯´å´©å°±å´©ã€‚ç°åœ¨åŒ»é™¢å°±è¯Šï¼ˆæŒ‚å·ã€ç¼´è´¹ã€å–è¯ç­‰å­ç³»ç»Ÿï¼‰éƒ½æ˜¯é€šè¿‡ â€œå¾®ä¿¡è‡ªåŠ©ç¨‹åºâ€æ¥ç»Ÿä¸€å…¥å£ï¼Œä¸‹é¢å°±ä½¿ç”¨å¤–è§‚æ¨¡å¼ç®€å•å®ç°ï¼š</p>
<p><strong>å­ç³»ç»Ÿç»„ä»¶ï¼ˆå°±è¯Šå„çª—å£ï¼‰</strong></p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-keyword">import</span>Â org.slf4j.Logger;
<span class="hljs-keyword">import</span>Â org.slf4j.LoggerFactory;
<span class="hljs-comment">/**
Â * å­ç³»ç»Ÿ1ï¼šæŒ‚å·çª—å£
Â */</span>
<span class="hljs-keyword">public</span>Â <span class="hljs-keyword">class</span>Â <span class="hljs-title class_">LibifuTestRegisterWindow</span>Â {
Â  Â Â <span class="hljs-keyword">private</span>Â <span class="hljs-type">static</span>Â <span class="hljs-keyword">final</span>Â LoggerÂ log =Â LoggerFactory.<span class="hljs-built_in">getLogger</span>(LibifuTestRegisterWindow.<span class="hljs-keyword">class</span>);
Â  Â Â <span class="hljs-comment">/**
Â  Â  Â * æŒ‚å·ä¸šåŠ¡é€»è¾‘
Â  Â  Â *Â @paramÂ name æ‚£è€…å§“å
Â  Â  Â *Â @paramÂ department å°±è¯Šç§‘å®¤
Â  Â  Â */</span>
Â  Â Â <span class="hljs-function"><span class="hljs-keyword">public</span>Â <span class="hljs-type">void</span>Â <span class="hljs-title">register</span><span class="hljs-params">(<span class="hljs-type">String</span>Â name,Â <span class="hljs-type">String</span>Â department)</span> </span>{
Â  Â  Â  Â  log.<span class="hljs-built_in">info</span>(<span class="hljs-string">" {} å·²å®Œæˆ{}æŒ‚å·ï¼ŒæŒ‚å·æˆåŠŸ"</span>, name, department);
Â  Â  }
}
<span class="hljs-comment">/**
Â * å­ç³»ç»Ÿ2ï¼šåŒ»ä¿ç¼´è´¹çª—å£
Â */</span>
<span class="hljs-keyword">public</span>Â <span class="hljs-keyword">class</span>Â <span class="hljs-title class_">LibifuTestPaymentWindow</span>Â {
Â  Â Â <span class="hljs-keyword">private</span>Â <span class="hljs-type">static</span>Â <span class="hljs-keyword">final</span>Â LoggerÂ log =Â LoggerFactory.<span class="hljs-built_in">getLogger</span>(LibifuTestPaymentWindow.<span class="hljs-keyword">class</span>);
Â  Â Â <span class="hljs-comment">/**
Â  Â  Â * åŒ»ä¿ç»“ç®—ä¸šåŠ¡é€»è¾‘
Â  Â  Â *Â @paramÂ name æ‚£è€…å§“å
Â  Â  Â *Â @paramÂ amount ç¼´è´¹é‡‘é¢ï¼ˆå…ƒï¼‰
Â  Â  Â */</span>
Â  Â Â <span class="hljs-function"><span class="hljs-keyword">public</span>Â <span class="hljs-type">void</span>Â <span class="hljs-title">socialInsuranceSettlement</span><span class="hljs-params">(<span class="hljs-type">String</span>Â name, <span class="hljs-type">double</span> amount)</span> </span>{
Â  Â  Â  Â  log.<span class="hljs-built_in">info</span>(<span class="hljs-string">"{} åŒ»ä¿ç»“ç®—å®Œæˆï¼Œç¼´è´¹é‡‘é¢ï¼š{}å…ƒ"</span>, name, amount);
Â  Â  }
}
<span class="hljs-comment">/**
Â * å­ç³»ç»Ÿ3ï¼šå–è¯çª—å£
Â */</span>
<span class="hljs-keyword">public</span>Â <span class="hljs-keyword">class</span>Â <span class="hljs-title class_">LibifuTestDrugWindow</span>Â {
Â  Â Â <span class="hljs-keyword">private</span>Â <span class="hljs-type">static</span>Â <span class="hljs-keyword">final</span>Â LoggerÂ log =Â LoggerFactory.<span class="hljs-built_in">getLogger</span>(LibifuTestDrugWindow.<span class="hljs-keyword">class</span>);
Â  Â Â <span class="hljs-comment">/**
Â  Â  Â * å–è¯ä¸šåŠ¡é€»è¾‘
Â  Â  Â *Â @paramÂ name æ‚£è€…å§“å
Â  Â  Â *Â @paramÂ drugNames è¯å“åç§°åˆ—è¡¨
Â  Â  Â */</span>
Â  Â Â <span class="hljs-function"><span class="hljs-keyword">public</span>Â <span class="hljs-type">void</span>Â <span class="hljs-title">takeDrug</span><span class="hljs-params">(<span class="hljs-type">String</span>Â name,Â <span class="hljs-type">String</span>... drugNames)</span> </span>{
Â  Â  Â  Â Â <span class="hljs-type">String</span>Â drugs =Â <span class="hljs-type">String</span>.<span class="hljs-built_in">join</span>(<span class="hljs-string">"ã€"</span>, drugNames);
Â  Â  Â  Â  log.<span class="hljs-built_in">info</span>(<span class="hljs-string">"{} å·²é¢†å–è¯å“ï¼š{}ï¼Œå–è¯å®Œæˆ"</span>, name, drugs);
Â  Â  }
}
</code></pre>
<p><strong>å¤–è§‚ç±»ï¼ˆå¾®ä¿¡è‡ªåŠ©ç¨‹åºï¼‰</strong></p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-keyword">import</span>Â org.slf4j.Logger;
<span class="hljs-keyword">import</span>Â org.slf4j.LoggerFactory;
<span class="hljs-comment">/**
Â * å¤–è§‚ç±»ï¼šå¾®ä¿¡è‡ªåŠ©ç¨‹åºï¼ˆç»Ÿä¸€å°±è¯Šå…¥å£ï¼‰
Â */</span>
<span class="hljs-keyword">public</span>Â <span class="hljs-keyword">class</span>Â <span class="hljs-title class_">LibifuTestWeixinHospitalFacade</span>Â {
Â  Â Â <span class="hljs-keyword">private</span>Â <span class="hljs-type">static</span>Â <span class="hljs-keyword">final</span>Â LoggerÂ logÂ =Â LoggerFactory.<span class="hljs-built_in">getLogger</span>(LibifuTestWeixinHospitalFacade.<span class="hljs-keyword">class</span>);
Â  Â Â <span class="hljs-comment">// ä¾èµ–å­ç³»ç»Ÿç»„ä»¶ï¼ˆå¤–è§‚ç±»ä¸å­ç³»ç»Ÿè€¦åˆï¼Œå®¢æˆ·ç«¯ä¸å­ç³»ç»Ÿè§£è€¦ï¼‰</span>
Â  Â Â <span class="hljs-keyword">private</span>Â <span class="hljs-keyword">final</span>Â LibifuTestRegisterWindow registerWindow;
Â  Â Â <span class="hljs-keyword">private</span>Â <span class="hljs-keyword">final</span>Â LibifuTestPaymentWindow paymentWindow;
Â  Â Â <span class="hljs-keyword">private</span>Â <span class="hljs-keyword">final</span>Â LibifuTestDrugWindow drugWindow;
Â  Â Â <span class="hljs-comment">// æ„é€ å™¨åˆå§‹åŒ–å­ç³»ç»Ÿï¼ˆä¹Ÿå¯é€šè¿‡ä¾èµ–æ³¨å…¥å®ç°ï¼‰</span>
Â  Â Â <span class="hljs-function"><span class="hljs-keyword">public</span>Â <span class="hljs-title">LibifuTestWeixinHospitalFacade</span><span class="hljs-params">()</span>Â </span>{
Â  Â  Â  Â Â <span class="hljs-keyword">this</span>.registerWindow =Â <span class="hljs-keyword">new</span>Â <span class="hljs-built_in">LibifuTestRegisterWindow</span>();
Â  Â  Â  Â Â <span class="hljs-keyword">this</span>.paymentWindow =Â <span class="hljs-keyword">new</span>Â <span class="hljs-built_in">LibifuTestPaymentWindow</span>();
Â  Â  Â  Â Â <span class="hljs-keyword">this</span>.drugWindow =Â <span class="hljs-keyword">new</span>Â <span class="hljs-built_in">LibifuTestDrugWindow</span>();
Â  Â  }
Â  Â Â <span class="hljs-comment">/**
Â  Â  Â * ç»Ÿä¸€å°±è¯Šæµç¨‹ï¼ˆå°è£…å­ç³»ç»Ÿè°ƒç”¨ï¼Œå¯¹å¤–æš´éœ²å•ä¸€æ¥å£ï¼‰
Â  Â  Â *Â @paramÂ name æ‚£è€…å§“å
Â  Â  Â *Â @paramÂ department å°±è¯Šç§‘å®¤
Â  Â  Â *Â @paramÂ amount ç¼´è´¹é‡‘é¢
Â  Â  Â *Â @paramÂ drugNames è¯å“åç§°
Â  Â  Â */</span>
Â  Â Â <span class="hljs-function"><span class="hljs-keyword">public</span>Â <span class="hljs-type">void</span>Â <span class="hljs-title">processMedicalService</span><span class="hljs-params">(<span class="hljs-type">String</span> name, <span class="hljs-type">String</span> department,Â <span class="hljs-type">double</span>Â amount, <span class="hljs-type">String</span>... drugNames)</span>Â </span>{
Â  Â  Â  Â  log.<span class="hljs-built_in">info</span>(<span class="hljs-string">"\n===== {} å‘èµ·å¾®ä¿¡è‡ªåŠ©å°±è¯Šæµç¨‹ ====="</span>, name);
Â  Â  Â  Â Â <span class="hljs-keyword">try</span>Â {
Â  Â  Â  Â  Â  Â Â <span class="hljs-comment">// 1. è°ƒç”¨æŒ‚å·å­ç³»ç»Ÿ</span>
Â  Â  Â  Â  Â  Â  registerWindow.<span class="hljs-built_in">register</span>(name, department);
Â  Â  Â  Â  Â  Â Â <span class="hljs-comment">// 2. è°ƒç”¨åŒ»ä¿ç¼´è´¹å­ç³»ç»Ÿ</span>
Â  Â  Â  Â  Â  Â  paymentWindow.<span class="hljs-built_in">socialInsuranceSettlement</span>(name, amount);
Â  Â  Â  Â  Â  Â Â <span class="hljs-comment">// 3. è°ƒç”¨å–è¯å­ç³»ç»Ÿ</span>
Â  Â  Â  Â  Â  Â  drugWindow.<span class="hljs-built_in">takeDrug</span>(name, drugNames);
Â  Â  Â  Â  Â  Â  log.<span class="hljs-built_in">info</span>(<span class="hljs-string">"===== {} å°±è¯Šæµç¨‹å…¨éƒ¨å®Œæˆ ====="</span>, name);
Â  Â  Â  Â  }Â <span class="hljs-built_in">catch</span>Â (Exception e) {
Â  Â  Â  Â  Â  Â  log.<span class="hljs-built_in">error</span>(<span class="hljs-string">"===== {} å°±è¯Šæµç¨‹å¤±è´¥ ====="</span>, name, e);
Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">throw</span>Â <span class="hljs-keyword">new</span>Â <span class="hljs-built_in">RuntimeException</span>(<span class="hljs-string">"å°±è¯Šæµç¨‹å¼‚å¸¸ï¼Œè¯·é‡è¯•"</span>, e);
Â  Â  Â  Â  }
Â  Â  }
}
</code></pre>
<p><strong>æµ‹è¯•ç±»</strong></p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-comment">/**
Â * å®¢æˆ·ç«¯ï¼šæµ‹è¯•å¤–è§‚æ¨¡å¼è°ƒç”¨
Â */</span>
<span class="hljs-keyword">public</span>Â <span class="hljs-keyword">class</span>Â <span class="hljs-title class_">LibifuTestFacadeClient</span>Â {
Â  Â Â <span class="hljs-function"><span class="hljs-keyword">public</span>Â <span class="hljs-type">static</span>Â <span class="hljs-type">void</span>Â <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-type">String</span>[]Â args)</span>Â </span>{
Â  Â  Â  Â Â <span class="hljs-comment">// 1. è·å–å¤–è§‚ç±»å®ä¾‹ï¼ˆä»…éœ€ä¸å¤–è§‚ç±»äº¤äº’ï¼‰</span>
Â  Â  Â  Â  LibifuTestWeixinHospitalFacade weixinFacade =Â <span class="hljs-keyword">new</span>Â <span class="hljs-built_in">LibifuTestWeixinHospitalFacade</span>();
Â  Â  Â  Â Â <span class="hljs-comment">// 2. è°ƒç”¨ç»Ÿä¸€æ¥å£ï¼Œå®Œæˆå°±è¯Šå…¨æµç¨‹ï¼ˆæ— éœ€å…³æ³¨å­ç³»ç»Ÿç»†èŠ‚ï¼‰</span>
Â  Â  Â  Â  weixinFacade.<span class="hljs-built_in">processMedicalService</span>(
Â  Â  Â  Â  Â  Â Â <span class="hljs-string">"libifu"</span>,Â 
Â  Â  Â  Â  Â  Â Â <span class="hljs-string">"å‘¼å¸å†…ç§‘"</span>,Â 
Â  Â  Â  Â  Â  Â Â <span class="hljs-number">198.5</span>,Â 
Â  Â  Â  Â  Â  Â Â <span class="hljs-string">"å¸ƒæ´›èŠ¬ç¼“é‡Šèƒ¶å›Š"</span>,Â <span class="hljs-string">"æ„Ÿå†’çµé¢—ç²’"</span>
Â  Â  Â  Â  );
Â  Â  }
}
</code></pre>
<p><strong>è¿è¡Œç»“æœ</strong></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/15bb4f1057c94756a6d7de60eeab8d5e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6X54mp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766642627&amp;x-signature=6uEjbramv1XFw3JXwOVsCnagAdA%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p><strong>æ¡†æ¶åº”ç”¨</strong></p>
<p>Spring æ¡†æ¶ä¸­å¤–è§‚æ¨¡å¼ï¼ˆFacade Patternï¼‰ æœ€ç»å…¸çš„è½åœ°æ˜¯Â ApplicationContextÂ æ¥å£åŠå…¶å®ç°ç±»ã€‚</p>
<p>ApplicationContextÂ ä½œä¸ºã€Œå¤–è§‚ç±»ã€ï¼Œå°è£…äº†åº•å±‚å¤šä¸ªå¤æ‚å­ç³»ç»Ÿï¼š</p>
<ul>
<li>BeanFactoryï¼ˆBean åˆ›å»º / ç®¡ç†æ ¸å¿ƒï¼‰ï¼›</li>
<li>ResourceLoaderï¼ˆé…ç½®æ–‡ä»¶ / èµ„æºåŠ è½½ï¼‰ï¼›</li>
<li>ApplicationEventPublisherï¼ˆäº‹ä»¶å‘å¸ƒï¼‰ï¼›</li>
<li>MessageSourceï¼ˆå›½é™…åŒ–æ¶ˆæ¯å¤„ç†ï¼‰ï¼›</li>
<li>EnvironmentCapableï¼ˆç¯å¢ƒå˜é‡ / é…ç½®è§£æï¼‰ã€‚</li>
</ul>
<p>å¼€å‘è€…æ— éœ€å…³æ³¨è¿™äº›å­ç³»ç»Ÿçš„äº¤äº’ç»†èŠ‚ï¼Œä»…é€šè¿‡Â ApplicationContextÂ æä¾›çš„ç»Ÿä¸€æ¥å£ï¼ˆå¦‚Â getBean()ã€publishEvent()ï¼‰å³å¯å®Œæˆ Spring å®¹å™¨çš„æ‰€æœ‰æ ¸å¿ƒæ“ä½œ â€”â€” å°±åƒç¨‹åºå‘˜é€šè¿‡ã€Œå¾®ä¿¡è‡ªåŠ©ç¨‹åºã€çœ‹ç—…ï¼Œä¸ç”¨å…³å¿ƒåŒ»é™¢å†…éƒ¨æŒ‚å· / ç¼´è´¹ / å–è¯çš„æµç¨‹ï¼Œåªè°ƒç”¨ç»Ÿä¸€å…¥å£å³å¯ï¼Œè¿™æ­£æ˜¯å¤–è§‚æ¨¡å¼ã€Œç®€åŒ–å¤æ‚ç³»ç»Ÿäº¤äº’ã€çš„æ ¸å¿ƒä»·å€¼ã€‚</p>
<p>ä»¥ä¸‹é€‰å–ApplicationContextÂ ã€AbstractApplicationContextæ ¸å¿ƒä»£ç ç‰‡æ®µï¼Œå±•ç¤ºå¤–è§‚æ¨¡å¼çš„è½åœ°é€»è¾‘ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3cd5341fdbb94c3da72fef4580a4c3d0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6X54mp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766642627&amp;x-signature=vg5RVwC1keTNbC4hzaUgQ694kZc%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<pre><code class="hljs language-arduino" lang="arduino">packageÂ org.springframework.context;
<span class="hljs-keyword">import</span>Â org.springframework.beans.factory.HierarchicalBeanFactory;
<span class="hljs-keyword">import</span>Â org.springframework.beans.factory.ListableBeanFactory;
<span class="hljs-keyword">import</span>Â org.springframework.beans.factory.config.AutowireCapableBeanFactory;
<span class="hljs-keyword">import</span>Â org.springframework.core.env.EnvironmentCapable;
<span class="hljs-keyword">import</span>Â org.springframework.core.io.support.ResourcePatternResolver;
<span class="hljs-comment">/**
Â * å¤–è§‚æ¥å£ï¼šæ•´åˆå¤šä¸ªå­ç³»ç»Ÿæ¥å£ï¼Œæä¾›ç»Ÿä¸€çš„å®¹å™¨æ“ä½œå…¥å£
Â */</span>
<span class="hljs-keyword">public</span>Â interfaceÂ ApplicationContextÂ extendsÂ EnvironmentCapable, ListableBeanFactory,Â 
Â  Â  Â  Â  HierarchicalBeanFactory, MessageSource, ApplicationEventPublisher, ResourcePatternResolver {
Â  Â Â <span class="hljs-comment">// 1. è·å–åº”ç”¨ä¸Šä¸‹æ–‡å”¯ä¸€IDï¼ˆå°è£…åº•å±‚æ— ï¼Œä»…ç»Ÿä¸€æš´éœ²ï¼‰</span>
Â  Â  <span class="hljs-function"><span class="hljs-type">String</span>Â <span class="hljs-title">getId</span><span class="hljs-params">()</span></span>;
Â  Â Â <span class="hljs-comment">// 2. è·å–åº”ç”¨åç§°ï¼ˆç»Ÿä¸€æ¥å£ï¼‰</span>
Â  Â  <span class="hljs-function"><span class="hljs-type">String</span>Â <span class="hljs-title">getApplicationName</span><span class="hljs-params">()</span></span>;
Â  Â Â <span class="hljs-comment">// 3. è·å–ä¸Šä¸‹æ–‡æ˜¾ç¤ºåç§°ï¼ˆç»Ÿä¸€æ¥å£ï¼‰</span>
Â  Â  <span class="hljs-function"><span class="hljs-type">String</span>Â <span class="hljs-title">getDisplayName</span><span class="hljs-params">()</span></span>;
Â  Â Â <span class="hljs-comment">// 4. è·å–ä¸Šä¸‹æ–‡é¦–æ¬¡åŠ è½½çš„æ—¶é—´æˆ³ï¼ˆç»Ÿä¸€æ¥å£ï¼‰</span>
Â  Â Â <span class="hljs-function"><span class="hljs-type">long</span>Â <span class="hljs-title">getStartupDate</span><span class="hljs-params">()</span></span>;
Â  Â Â <span class="hljs-comment">// 5. è·å–çˆ¶ä¸Šä¸‹æ–‡ï¼ˆå°è£…å±‚çº§BeanFactoryçš„çˆ¶å®¹å™¨é€»è¾‘ï¼‰</span>
Â  Â  <span class="hljs-function">ApplicationContextÂ <span class="hljs-title">getParent</span><span class="hljs-params">()</span></span>;
Â  Â Â <span class="hljs-comment">// 6. è·å–è‡ªåŠ¨è£…é…BeanFactoryï¼ˆå°è£…åº•å±‚BeanFactoryçš„è‡ªåŠ¨è£…é…èƒ½åŠ›ï¼Œæ ¸å¿ƒå­ç³»ç»Ÿå…¥å£ï¼‰</span>
Â  Â  <span class="hljs-function">AutowireCapableBeanFactoryÂ <span class="hljs-title">getAutowireCapableBeanFactory</span><span class="hljs-params">()</span>Â throwsÂ IllegalStateException</span>;
}
</code></pre>

<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span>Â org.springframework.context.support;
<span class="hljs-keyword">import</span>Â org.springframework.beans.BeansException;
<span class="hljs-keyword">import</span>Â org.springframework.beans.factory.config.ConfigurableListableBeanFactory;
<span class="hljs-keyword">import</span>Â org.springframework.context.ConfigurableApplicationContext;
<span class="hljs-keyword">import</span>Â java.util.concurrent.atomic.AtomicBoolean;
<span class="hljs-keyword">public</span>Â <span class="hljs-keyword">abstract</span>Â <span class="hljs-keyword">class</span>Â <span class="hljs-title class_">AbstractApplicationContext</span>Â <span class="hljs-keyword">extends</span>Â <span class="hljs-title class_">DefaultResourceLoader</span>
Â  Â  Â  Â Â <span class="hljs-keyword">implements</span>Â <span class="hljs-title class_">ConfigurableApplicationContext</span>Â {
Â  Â Â <span class="hljs-comment">// ========== æ ¸å¿ƒ1ï¼šrefresh() - å°è£…æ‰€æœ‰å­ç³»ç»Ÿçš„åˆå§‹åŒ–é€»è¾‘ ==========</span>
Â  Â Â <span class="hljs-meta">@Override</span>
Â  Â Â <span class="hljs-keyword">public</span>Â <span class="hljs-keyword">void</span>Â <span class="hljs-title function_">refresh</span><span class="hljs-params">()</span>Â <span class="hljs-keyword">throws</span>Â BeansException, IllegalStateException {
Â  Â  Â  Â Â <span class="hljs-keyword">synchronized</span>Â (<span class="hljs-built_in">this</span>.startupShutdownMonitor) {
Â  Â  Â  Â  Â  Â Â <span class="hljs-comment">// 1. å°è£…å­ç³»ç»Ÿåˆå§‹åŒ–å‰ç½®æ£€æŸ¥</span>
Â  Â  Â  Â  Â  Â  prepareRefresh();
Â  Â  Â  Â  Â  Â Â <span class="hljs-comment">// 2. å°è£…BeanFactoryå­ç³»ç»Ÿçš„åˆ›å»º/åˆ·æ–°ï¼ˆå­ç±»å®ç°å…·ä½“BeanFactoryï¼Œå¦‚DefaultListableBeanFactoryï¼‰</span>
Â  Â  Â  Â  Â  Â Â <span class="hljs-type">ConfigurableListableBeanFactory</span>Â <span class="hljs-variable">beanFactory</span>Â <span class="hljs-operator">=</span>Â obtainFreshBeanFactory();
Â  Â  Â  Â  Â  Â Â <span class="hljs-comment">// 3. å°è£…BeanFactoryå­ç³»ç»Ÿçš„åŸºç¡€é…ç½®</span>
Â  Â  Â  Â  Â  Â  prepareBeanFactory(beanFactory);
Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">try</span>Â {
Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-comment">// xxx å…¶ä»–æºç çœç•¥</span>
Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-comment">// 4. å°è£…BeanFactoryåç½®å¤„ç†å™¨æ‰§è¡Œã€äº‹ä»¶ç³»ç»Ÿåˆå§‹åŒ–ã€å•ä¾‹Beanåˆå§‹åŒ–ç­‰æ‰€æœ‰å­ç³»ç»Ÿé€»è¾‘</span>
Â  Â  Â  Â  Â  Â  Â  Â  finishBeanFactoryInitialization(beanFactory);
Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-comment">// 5. å°è£…å®¹å™¨æ¿€æ´»ã€åˆ·æ–°å®Œæˆäº‹ä»¶å‘å¸ƒï¼ˆå­ç³»ç»Ÿæ”¶å°¾ï¼‰</span>
Â  Â  Â  Â  Â  Â  Â  Â  finishRefresh();
Â  Â  Â  Â  Â  Â  }Â <span class="hljs-keyword">catch</span>Â (BeansException ex) {
Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-comment">// 6. å°è£…å­ç³»ç»Ÿåˆå§‹åŒ–å¤±è´¥çš„å›æ»šé€»è¾‘</span>
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }
Â  Â  }
Â  Â Â <span class="hljs-comment">// ========== æ ¸å¿ƒ2ï¼šgetBean() - å°è£…BeanFactoryå­ç³»ç»Ÿçš„è°ƒç”¨ + çŠ¶æ€æ£€æŸ¥ ==========</span>
Â  Â Â <span class="hljs-meta">@Override</span>
Â  Â Â <span class="hljs-keyword">public</span>Â &lt;T&gt; TÂ <span class="hljs-title function_">getBean</span><span class="hljs-params">(Class&lt;T&gt; requiredType)</span>Â <span class="hljs-keyword">throws</span>Â BeansException {
Â  Â  Â  Â Â <span class="hljs-comment">// å¤–è§‚å±‚å°è£…ï¼šå­ç³»ç»ŸçŠ¶æ€æ£€æŸ¥ï¼ˆå®¢æˆ·ç«¯æ— éœ€å…³æ³¨BeanFactoryæ˜¯å¦æ´»è·ƒï¼‰</span>
Â  Â  Â  Â  assertBeanFactoryActive();
Â  Â  Â  Â Â <span class="hljs-comment">// å¤–è§‚å±‚å§”æ‰˜ï¼šè°ƒç”¨åº•å±‚BeanFactoryå­ç³»ç»Ÿçš„getBeanï¼Œå®¢æˆ·ç«¯æ— éœ€å…³æ³¨BeanFactoryå…·ä½“å®ç°</span>
Â  Â  Â  Â Â <span class="hljs-keyword">return</span>Â getBeanFactory().getBean(requiredType);
Â  Â  }
Â  Â Â <span class="hljs-comment">// ========== æŠ½è±¡æ–¹æ³•ï¼šå§”æ‰˜å­ç±»å®ç°å…·ä½“BeanFactoryè·å–ï¼ˆå±è”½å­ç³»ç»Ÿå®ç°ï¼‰ ==========</span>
Â  Â Â <span class="hljs-keyword">public</span>Â <span class="hljs-keyword">abstract</span>Â ConfigurableListableBeanFactoryÂ <span class="hljs-title function_">getBeanFactory</span><span class="hljs-params">()</span>Â <span class="hljs-keyword">throws</span>Â IllegalStateException;
}
</code></pre>
<p>Spring é€šè¿‡Â ApplicationContextï¼ˆå¤–è§‚æ¥å£ï¼‰å’ŒÂ AbstractApplicationContextï¼ˆå¤–è§‚å®ç°ï¼‰å°è£…äº†å…¶ä»–å­ç³»ç»Ÿçš„å¤æ‚é€»è¾‘ï¼š</p>
<ul>
<li>å®¢æˆ·ç«¯åªéœ€è°ƒç”¨Â ApplicationContext.getBean()Â å³å¯è·å– Beanï¼Œæ— éœ€å…³æ³¨åº•å±‚ Bean çš„ç¼“å­˜ã€å®ä¾‹åŒ–ã€çŠ¶æ€æ£€æŸ¥ç­‰ç»†èŠ‚ï¼›</li>
<li>å¤–è§‚ç±»å±è”½äº†å­ç³»ç»Ÿçš„å¤æ‚åº¦ï¼Œé™ä½äº†å®¢æˆ·ç«¯ä¸åº•å±‚ BeanFactory çš„è€¦åˆï¼Œç¬¦åˆå¤–è§‚æ¨¡å¼çš„è®¾è®¡æ€æƒ³ã€‚</li>
</ul>
<h3 data-id="heading-8">è¡Œä¸ºå‹æ¨¡å¼</h3>
<p><strong>ä¸ºä»€ä¹ˆç”¨è¡Œä¸ºå‹æ¨¡å¼ï¼Ÿ</strong></p>
<ul>
<li>è¡Œä¸ºå‹æ¨¡å¼å…³æ³¨ç‚¹â€œæ€æ ·è¿è¡Œå¯¹è±¡/ç±»â€å…³æ³¨ç±»/å¯¹è±¡çš„è¿è¡Œæ—¶æµç¨‹æ§åˆ¶ã€‚</li>
<li>è¡Œä¸ºå‹æ¨¡å¼ç”¨äºæè¿°ç¨‹åºåœ¨è¿è¡Œæ—¶å¤æ‚çš„æµç¨‹æ§åˆ¶ï¼Œæè¿°å¤šä¸ªç±»æˆ–å¯¹è±¡ä¹‹é—´æ€æ ·ç›¸äº’åä½œå…±åŒå®Œæˆå•ä¸ªå¯¹è±¡éƒ½æ— æ³•å•ç‹¬å®Œæˆçš„ä»»åŠ¡ï¼Œå®ƒæ¶‰åŠç®—æ³•ä¸å¯¹è±¡é—´èŒè´£çš„åˆ†é…ã€‚</li>
<li>è¡Œä¸ºå‹æ¨¡å¼åˆ†ä¸ºç±»è¡Œä¸ºæ¨¡å¼å’Œå¯¹è±¡è¡Œä¸ºæ¨¡å¼ï¼Œå‰è€…é‡‡ç”¨ç»§æ‰¿æœºåˆ¶æ¥åœ¨ç±»é—´åˆ†æ´¾è¡Œä¸ºåè€…é‡‡ç”¨ç»„åˆæˆ–èšåˆåœ¨å¯¹è±¡é—´åˆ†é…è¡Œä¸ºã€‚ç”±äºç»„åˆå…³ç³»æˆ–èšåˆå…³ç³»æ¯”ç»§æ‰¿å…³ç³»è€¦åˆåº¦ä½ï¼Œæ»¡è¶³â€œåˆæˆå¤ç”¨åŸåˆ™â€ï¼Œæ‰€ä»¥å¯¹è±¡è¡Œä¸ºæ¨¡å¼æ¯”ç±»è¡Œä¸ºæ¨¡å¼å…·æœ‰æ›´å¤§çš„çµæ´»æ€§ã€‚</li>
</ul>

<ul>
<li>æ¨¡æ¿æ–¹æ³•ï¼ˆTemplate Methodï¼‰æ¨¡å¼ï¼šçˆ¶ç±»å®šä¹‰ç®—æ³•éª¨æ¶ï¼ŒæŸäº›å®ç°æ”¾åœ¨å­ç±»</li>
<li>ç­–ç•¥ï¼ˆStrategyï¼‰æ¨¡å¼ï¼šæ¯ç§ç®—æ³•ç‹¬ç«‹å°è£…ï¼Œæ ¹æ®ä¸åŒæƒ…å†µä½¿ç”¨ä¸åŒç®—æ³•ç­–ç•¥</li>
<li>çŠ¶æ€ï¼ˆStateï¼‰æ¨¡å¼ï¼šæ¯ç§çŠ¶æ€ç‹¬ç«‹å°è£…ï¼Œä¸åŒçŠ¶æ€å†…éƒ¨å°è£…äº†ä¸åŒè¡Œä¸º</li>
<li>å‘½ä»¤ï¼ˆCommandï¼‰æ¨¡å¼ï¼šå°†ä¸€ä¸ªè¯·æ±‚å°è£…ä¸ºä¸€ä¸ªå¯¹è±¡ï¼Œä½¿å‘å‡ºè¯·æ±‚çš„è´£ä»»å’Œæ‰§è¡Œè¯·æ±‚çš„è´£ä»»åˆ†å‰²å¼€</li>
<li>è´£ä»»é“¾ï¼ˆChain of Responsibilityï¼‰æ¨¡å¼ï¼šæ‰€æœ‰å¤„ç†è€…å°è£…ä¸ºé“¾å¼ç»“æ„ï¼Œä¾æ¬¡è°ƒç”¨</li>
<li>å¤‡å¿˜å½•ï¼ˆMementoï¼‰æ¨¡å¼ï¼šæŠŠæ ¸å¿ƒä¿¡æ¯æŠ½å–å‡ºæ¥ï¼Œå¯ä»¥è¿›è¡Œä¿å­˜</li>
<li>è§£é‡Šå™¨ï¼ˆInterpreterï¼‰æ¨¡å¼ï¼šå®šä¹‰è¯­æ³•è§£æè§„åˆ™</li>
<li>è§‚å¯Ÿè€…ï¼ˆObserverï¼‰æ¨¡å¼ï¼šç»´æŠ¤å¤šä¸ªè§‚å¯Ÿè€…ä¾èµ–ï¼ŒçŠ¶æ€å˜åŒ–é€šçŸ¥æ‰€æœ‰è§‚å¯Ÿè€…</li>
<li>ä¸­ä»‹è€…ï¼ˆMediatorï¼‰æ¨¡å¼ï¼šå–æ¶ˆç±»/å¯¹è±¡çš„ç›´æ¥è°ƒç”¨å…³ç³»ï¼Œä½¿ç”¨ä¸­ä»‹è€…ç»´æŠ¤</li>
<li>è¿­ä»£å™¨ï¼ˆIteratorï¼‰æ¨¡å¼ï¼šå®šä¹‰é›†åˆæ•°æ®çš„éå†è§„åˆ™</li>
<li>è®¿é—®è€…ï¼ˆVisitorï¼‰æ¨¡å¼ï¼šåˆ†ç¦»å¯¹è±¡ç»“æ„ï¼Œä¸å…ƒç´ çš„æ‰§è¡Œç®—æ³•</li>
</ul>
<p>é™¤äº†æ¨¡æ¿æ–¹æ³•æ¨¡å¼å’Œè§£é‡Šå™¨æ¨¡å¼æ˜¯ç±»è¡Œä¸ºå‹æ¨¡å¼ï¼Œå…¶ä»–çš„å…¨éƒ¨å±äºå¯¹è±¡è¡Œä¸ºå‹æ¨¡å¼ã€‚</p>
<p><strong>è¡Œä¸ºå‹æ¨¡å¼ä¹‹ç­–ç•¥æ¨¡å¼</strong></p>
<p>ç­–ç•¥æ¨¡å¼ï¼ˆStrategy Patternï¼‰æŒ‡çš„æ˜¯ä¸€ä¸ªç±»çš„è¡Œä¸ºæˆ–å…¶ç®—æ³•å¯ä»¥åœ¨è¿è¡Œæ—¶æ›´æ”¹ï¼Œåœ¨ç­–ç•¥æ¨¡å¼ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºè¡¨ç¤ºå„ç§ç­–ç•¥çš„å¯¹è±¡å’Œä¸€ä¸ªè¡Œä¸ºéšç€ç­–ç•¥å¯¹è±¡æ”¹å˜è€Œæ”¹å˜çš„ context å¯¹è±¡ï¼Œç­–ç•¥å¯¹è±¡æ”¹å˜ context å¯¹è±¡çš„æ‰§è¡Œç®—æ³•ã€‚</p>
<p><strong>æ„å›¾ï¼š</strong> å®šä¹‰ä¸€ç³»åˆ—çš„ç®—æ³•,æŠŠå®ƒä»¬ä¸€ä¸ªä¸ªå°è£…èµ·æ¥, å¹¶ä¸”ä½¿å®ƒä»¬å¯ç›¸äº’æ›¿æ¢ã€‚</p>
<p><strong>ä¸»è¦è§£å†³ï¼š</strong> åœ¨æœ‰å¤šç§ç®—æ³•ç›¸ä¼¼çš„æƒ…å†µä¸‹ï¼Œä½¿ç”¨ if...else æ‰€å¸¦æ¥çš„å¤æ‚å’Œéš¾ä»¥ç»´æŠ¤ã€‚</p>
<p><strong>ä½•æ—¶ä½¿ç”¨ï¼š</strong> ä¸€ä¸ªç³»ç»Ÿæœ‰è®¸å¤šè®¸å¤šç±»ï¼Œè€ŒåŒºåˆ†å®ƒä»¬çš„åªæ˜¯å®ƒä»¬ä¹‹é—´çš„è¡Œä¸ºã€‚</p>
<p><strong>å¦‚ä½•è§£å†³ï¼š</strong> å°†è¿™äº›ç®—æ³•å°è£…æˆä¸€ä¸ªä¸€ä¸ªçš„ç±»ï¼Œä»»æ„åœ°æ›¿æ¢ã€‚</p>
<p><strong>ä¼˜ç‚¹ï¼š</strong></p>
<p>1ã€ç®—æ³•å¯ä»¥è‡ªç”±åˆ‡æ¢ã€‚</p>
<p>2ã€é¿å…ä½¿ç”¨å¤šé‡æ¡ä»¶åˆ¤æ–­ã€‚</p>
<p>3ã€æ‰©å±•æ€§è‰¯å¥½ã€‚</p>
<p><strong>ç¼ºç‚¹ï¼š</strong></p>
<p>1ã€ç­–ç•¥ç±»ä¼šå¢å¤šã€‚</p>
<p>2ã€æ‰€æœ‰ç­–ç•¥ç±»éƒ½éœ€è¦å¯¹å¤–æš´éœ²ã€‚</p>
<p><strong>ä½¿ç”¨åœºæ™¯ï¼š</strong></p>
<p>1ã€å¦‚æœåœ¨ä¸€ä¸ªç³»ç»Ÿé‡Œé¢æœ‰è®¸å¤šç±»ï¼Œå®ƒä»¬ä¹‹é—´çš„åŒºåˆ«ä»…åœ¨äºå®ƒä»¬çš„è¡Œä¸ºï¼Œé‚£ä¹ˆä½¿ç”¨ç­–ç•¥æ¨¡å¼å¯ä»¥</p>
<p>åŠ¨æ€åœ°è®©ä¸€ä¸ªå¯¹è±¡åœ¨è®¸å¤šè¡Œä¸ºä¸­é€‰æ‹©ä¸€ç§è¡Œä¸ºã€‚</p>
<p>2ã€ä¸€ä¸ªç³»ç»Ÿéœ€è¦åŠ¨æ€åœ°åœ¨å‡ ç§ç®—æ³•ä¸­é€‰æ‹©ä¸€ç§ã€‚</p>
<p>3ã€çº¿ç¨‹æ± æ‹’ç»ç­–ç•¥ã€‚</p>
<p><strong>ç­–ç•¥æ¨¡å¼ç®€å•åº”ç”¨</strong></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7c4e16f685b64a8083ce64aa178a2f27~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6X54mp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766642627&amp;x-signature=Labv9sjW7dYP0JRvXrDPN8XCPYI%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p>åœ¨ç”µå•†æ”¯ä»˜ç³»ç»Ÿä¸­ï¼Œéƒ½ä¼šæ”¯æŒå¤šç§æ”¯ä»˜æ–¹å¼ï¼ˆå¾®ä¿¡ã€æ”¯ä»˜å®ã€é“¶è”ï¼‰ï¼Œæ¯ç§æ”¯ä»˜æ–¹å¼å¯¹åº”ä¸€ç§ â€œæ”¯ä»˜ç­–ç•¥â€ï¼Œå®¢æˆ·ç«¯å¯æ ¹æ®ç”¨æˆ·é€‰æ‹©åŠ¨æ€åˆ‡æ¢ç­–ç•¥ï¼Œæ— éœ€ä¿®æ”¹æ”¯ä»˜æ ¸å¿ƒé€»è¾‘ï¼Œä¸‹é¢å°±ä½¿ç”¨ç­–ç•¥æ¨¡å¼ç®€å•å®ç°ï¼š</p>
<p><strong>ç­–ç•¥æ¥å£ï¼ˆå®šä¹‰ç»Ÿä¸€ç®—æ³•è§„èŒƒï¼‰</strong></p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-comment">/**
Â * ç­–ç•¥æ¥å£ï¼šæ”¯ä»˜ç­–ç•¥ï¼ˆå®šä¹‰æ‰€æœ‰æ”¯ä»˜æ–¹å¼çš„ç»Ÿä¸€è§„èŒƒï¼‰
Â */</span>
<span class="hljs-keyword">public</span>Â <span class="hljs-class"><span class="hljs-keyword">interface</span>Â <span class="hljs-title">LibifuTestPaymentStrategy</span>Â </span>{
Â  Â Â <span class="hljs-comment">/**
Â  Â  Â * æ‰§è¡Œæ”¯ä»˜é€»è¾‘
Â  Â  Â *Â <span class="hljs-doctag">@param</span>Â amount æ”¯ä»˜é‡‘é¢ï¼ˆå…ƒï¼‰
Â  Â  Â *Â <span class="hljs-doctag">@param</span>Â orderId è®¢å•ID
Â  Â  Â *Â <span class="hljs-doctag">@return</span>Â æ”¯ä»˜ç»“æœï¼ˆæˆåŠŸ/å¤±è´¥ï¼‰
Â  Â  Â */</span>
Â  Â Â String <span class="hljs-title function_ invoke__">pay</span>(<span class="hljs-keyword">double</span>Â amount, String orderId);
}
</code></pre>
<p><strong>å…·ä½“ç­–ç•¥ç±» 1ï¼šå¾®ä¿¡æ”¯ä»˜</strong></p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-keyword">import</span>Â org.slf4j.Logger;
<span class="hljs-keyword">import</span>Â org.slf4j.LoggerFactory;
<span class="hljs-comment">/**
Â * å…·ä½“ç­–ç•¥ï¼šå¾®ä¿¡æ”¯ä»˜ï¼ˆå®ç°æ”¯ä»˜ç­–ç•¥æ¥å£ï¼‰
Â */</span>
<span class="hljs-keyword">public</span>Â <span class="hljs-keyword">class</span>Â <span class="hljs-title class_">LibifuTestWechatPayStrategy</span>Â implementsÂ LibifuTestPaymentStrategyÂ {
Â  Â Â <span class="hljs-keyword">private</span>Â <span class="hljs-type">static</span>Â <span class="hljs-keyword">final</span>Â LoggerÂ log =Â LoggerFactory.<span class="hljs-built_in">getLogger</span>(LibifuTestWechatPayStrategy.<span class="hljs-keyword">class</span>);
Â  Â Â @<span class="hljs-function">Override
Â  Â Â <span class="hljs-keyword">public</span>Â <span class="hljs-type">String</span>Â <span class="hljs-title">pay</span><span class="hljs-params">(<span class="hljs-type">double</span> amount,Â <span class="hljs-type">String</span>Â orderId)</span> </span>{
Â  Â  Â  Â  log.<span class="hljs-built_in">info</span>(<span class="hljs-string">"ã€å¾®ä¿¡æ”¯ä»˜ã€‘å¼€å§‹å¤„ç†è®¢å•ï¼š{}ï¼Œé‡‘é¢ï¼š{}å…ƒ"</span>, orderId, amount);
Â  Â  Â  Â Â <span class="hljs-comment">// æ¨¡æ‹Ÿå¾®ä¿¡æ”¯ä»˜æ ¸å¿ƒé€»è¾‘ï¼ˆç­¾åã€è°ƒç”¨å¾®ä¿¡æ¥å£ç­‰ï¼‰</span>
Â  Â  Â  Â Â <span class="hljs-type">boolean</span>Â isSuccess =Â <span class="hljs-literal">true</span>;Â <span class="hljs-comment">// æ¨¡æ‹Ÿæ”¯ä»˜æˆåŠŸ</span>
Â  Â  Â  Â Â <span class="hljs-keyword">if</span>Â (isSuccess) {
Â  Â  Â  Â  Â  Â Â <span class="hljs-type">String</span>Â result =Â <span class="hljs-type">String</span>.format(<span class="hljs-string">"ã€å¾®ä¿¡æ”¯ä»˜ã€‘è®¢å•%sæ”¯ä»˜æˆåŠŸï¼Œé‡‘é¢ï¼š%.2få…ƒ"</span>, orderId, amount);
Â  Â  Â  Â  Â  Â  log.<span class="hljs-built_in">info</span>(result);
Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">return</span>Â result;
Â  Â  Â  Â  }Â <span class="hljs-keyword">else</span>Â {
Â  Â  Â  Â  Â  Â Â <span class="hljs-type">String</span>Â result =Â <span class="hljs-type">String</span>.format(<span class="hljs-string">"ã€å¾®ä¿¡æ”¯ä»˜ã€‘è®¢å•%sæ”¯ä»˜å¤±è´¥"</span>, orderId);
Â  Â  Â  Â  Â  Â  log.<span class="hljs-built_in">error</span>(result);
Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">return</span>Â result;
Â  Â  Â  Â  }
Â  Â  }
}
</code></pre>
<p><strong>å…·ä½“ç­–ç•¥ç±» 2ï¼šæ”¯ä»˜å®æ”¯ä»˜</strong></p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-keyword">import</span>Â org.slf4j.Logger;
<span class="hljs-keyword">import</span>Â org.slf4j.LoggerFactory;
<span class="hljs-comment">/**
Â * å…·ä½“ç­–ç•¥ï¼šæ”¯ä»˜å®æ”¯ä»˜ï¼ˆå®ç°æ”¯ä»˜ç­–ç•¥æ¥å£ï¼‰
Â */</span>
<span class="hljs-keyword">public</span>Â <span class="hljs-keyword">class</span>Â <span class="hljs-title class_">LibifuTestAlipayStrategy</span>Â implementsÂ LibifuTestPaymentStrategyÂ {
Â  Â Â <span class="hljs-keyword">private</span>Â <span class="hljs-type">static</span>Â <span class="hljs-keyword">final</span>Â LoggerÂ log =Â LoggerFactory.<span class="hljs-built_in">getLogger</span>(LibifuTestAlipayStrategy.<span class="hljs-keyword">class</span>);
Â  Â Â @<span class="hljs-function">Override
Â  Â Â <span class="hljs-keyword">public</span>Â <span class="hljs-type">String</span>Â <span class="hljs-title">pay</span><span class="hljs-params">(<span class="hljs-type">double</span> amount,Â <span class="hljs-type">String</span>Â orderId)</span> </span>{
Â  Â  Â  Â  log.<span class="hljs-built_in">info</span>(<span class="hljs-string">"ã€æ”¯ä»˜å®æ”¯ä»˜ã€‘å¼€å§‹å¤„ç†è®¢å•ï¼š{}ï¼Œé‡‘é¢ï¼š{}å…ƒ"</span>, orderId, amount);
Â  Â  Â  Â Â <span class="hljs-comment">// æ¨¡æ‹Ÿæ”¯ä»˜å®æ”¯ä»˜æ ¸å¿ƒé€»è¾‘ï¼ˆéªŒç­¾ã€è°ƒç”¨æ”¯ä»˜å®æ¥å£ç­‰ï¼‰</span>
Â  Â  Â  Â Â <span class="hljs-type">boolean</span>Â isSuccess =Â <span class="hljs-literal">true</span>;Â <span class="hljs-comment">// æ¨¡æ‹Ÿæ”¯ä»˜æˆåŠŸ</span>
Â  Â  Â  Â Â <span class="hljs-keyword">if</span>Â (isSuccess) {
Â  Â  Â  Â  Â  Â Â <span class="hljs-type">String</span>Â result =Â <span class="hljs-type">String</span>.format(<span class="hljs-string">"ã€æ”¯ä»˜å®æ”¯ä»˜ã€‘è®¢å•%sæ”¯ä»˜æˆåŠŸï¼Œé‡‘é¢ï¼š%.2få…ƒ"</span>, orderId, amount);
Â  Â  Â  Â  Â  Â  log.<span class="hljs-built_in">info</span>(result);
Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">return</span>Â result;
Â  Â  Â  Â  }Â <span class="hljs-keyword">else</span>Â {
Â  Â  Â  Â  Â  Â Â <span class="hljs-type">String</span>Â result =Â <span class="hljs-type">String</span>.format(<span class="hljs-string">"ã€æ”¯ä»˜å®æ”¯ä»˜ã€‘è®¢å•%sæ”¯ä»˜å¤±è´¥"</span>, orderId);
Â  Â  Â  Â  Â  Â  log.<span class="hljs-built_in">error</span>(result);
Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">return</span>Â result;
Â  Â  Â  Â  }
Â  Â  }
}
</code></pre>
<p><strong>å…·ä½“ç­–ç•¥ç±» 3ï¼šé“¶è”æ”¯ä»˜</strong></p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-keyword">import</span>Â org.slf4j.Logger;
<span class="hljs-keyword">import</span>Â org.slf4j.LoggerFactory;
<span class="hljs-comment">/**
Â * å…·ä½“ç­–ç•¥ï¼šé“¶è”æ”¯ä»˜ï¼ˆå®ç°æ”¯ä»˜ç­–ç•¥æ¥å£ï¼‰
Â */</span>
<span class="hljs-keyword">public</span>Â <span class="hljs-keyword">class</span>Â <span class="hljs-title class_">LibifuTestUnionPayStrategy</span>Â implementsÂ LibifuTestPaymentStrategyÂ {
Â  Â Â <span class="hljs-keyword">private</span>Â <span class="hljs-type">static</span>Â <span class="hljs-keyword">final</span>Â LoggerÂ log =Â LoggerFactory.<span class="hljs-built_in">getLogger</span>(LibifuTestUnionPayStrategy.<span class="hljs-keyword">class</span>);
Â  Â Â @<span class="hljs-function">Override
Â  Â Â <span class="hljs-keyword">public</span>Â <span class="hljs-type">String</span>Â <span class="hljs-title">pay</span><span class="hljs-params">(<span class="hljs-type">double</span> amount,Â <span class="hljs-type">String</span>Â orderId)</span> </span>{
Â  Â  Â  Â  log.<span class="hljs-built_in">info</span>(<span class="hljs-string">"ã€é“¶è”æ”¯ä»˜ã€‘å¼€å§‹å¤„ç†è®¢å•ï¼š{}ï¼Œé‡‘é¢ï¼š{}å…ƒ"</span>, orderId, amount);
Â  Â  Â  Â Â <span class="hljs-comment">// æ¨¡æ‹Ÿé“¶è”æ”¯ä»˜æ ¸å¿ƒé€»è¾‘ï¼ˆåŠ å¯†ã€è°ƒç”¨é“¶è”æ¥å£ç­‰ï¼‰</span>
Â  Â  Â  Â Â <span class="hljs-type">boolean</span>Â isSuccess =Â <span class="hljs-literal">true</span>;Â <span class="hljs-comment">// æ¨¡æ‹Ÿæ”¯ä»˜æˆåŠŸ</span>
Â  Â  Â  Â Â <span class="hljs-keyword">if</span>Â (isSuccess) {
Â  Â  Â  Â  Â  Â Â <span class="hljs-type">String</span>Â result =Â <span class="hljs-type">String</span>.format(<span class="hljs-string">"ã€é“¶è”æ”¯ä»˜ã€‘è®¢å•%sæ”¯ä»˜æˆåŠŸï¼Œé‡‘é¢ï¼š%.2få…ƒ"</span>, orderId, amount);
Â  Â  Â  Â  Â  Â  log.<span class="hljs-built_in">info</span>(result);
Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">return</span>Â result;
Â  Â  Â  Â  }Â <span class="hljs-keyword">else</span>Â {
Â  Â  Â  Â  Â  Â Â <span class="hljs-type">String</span>Â result =Â <span class="hljs-type">String</span>.format(<span class="hljs-string">"ã€é“¶è”æ”¯ä»˜ã€‘è®¢å•%sæ”¯ä»˜å¤±è´¥"</span>, orderId);
Â  Â  Â  Â  Â  Â  log.<span class="hljs-built_in">error</span>(result);
Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">return</span>Â result;
Â  Â  Â  Â  }
Â  Â  }
}
</code></pre>
<p><strong>ä¸Šä¸‹æ–‡ç±»ï¼ˆå°è£…ç­–ç•¥è°ƒç”¨ï¼Œå±è”½ç®—æ³•ç»†èŠ‚ï¼‰</strong></p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-keyword">import</span>Â org.slf4j.Logger;
<span class="hljs-keyword">import</span>Â org.slf4j.LoggerFactory;
<span class="hljs-comment">/**
Â * ä¸Šä¸‹æ–‡ç±»ï¼šæ”¯ä»˜ä¸Šä¸‹æ–‡ï¼ˆæŒæœ‰ç­–ç•¥å¯¹è±¡ï¼Œæä¾›ç»Ÿä¸€è°ƒç”¨å…¥å£ï¼‰
Â * ä½œç”¨ï¼šå®¢æˆ·ç«¯ä»…ä¸ä¸Šä¸‹æ–‡äº¤äº’ï¼Œæ— éœ€ç›´æ¥æ“ä½œå…·ä½“ç­–ç•¥
Â */</span>
<span class="hljs-keyword">public</span>Â <span class="hljs-keyword">class</span>Â <span class="hljs-title class_">LibifuTestPaymentContext</span>Â {
Â  Â Â <span class="hljs-keyword">private</span>Â <span class="hljs-type">static</span>Â <span class="hljs-keyword">final</span>Â LoggerÂ log =Â LoggerFactory.<span class="hljs-built_in">getLogger</span>(LibifuTestPaymentContext.<span class="hljs-keyword">class</span>);
Â  Â Â <span class="hljs-comment">// æŒæœ‰ç­–ç•¥å¯¹è±¡ï¼ˆå¯åŠ¨æ€æ›¿æ¢ï¼‰</span>
Â  Â Â <span class="hljs-keyword">private</span>Â LibifuTestPaymentStrategyÂ paymentStrategy;
Â  Â Â <span class="hljs-comment">/**
Â  Â  Â * æ„é€ å™¨ï¼šåˆå§‹åŒ–æ”¯ä»˜ç­–ç•¥
Â  Â  Â *Â @paramÂ paymentStrategy å…·ä½“æ”¯ä»˜ç­–ç•¥
Â  Â  Â */</span>
Â  Â Â <span class="hljs-function"><span class="hljs-keyword">public</span>Â <span class="hljs-title">LibifuTestPaymentContext</span><span class="hljs-params">(LibifuTestPaymentStrategyÂ paymentStrategy)</span> </span>{
Â  Â  Â  Â Â <span class="hljs-keyword">this</span>.paymentStrategyÂ = paymentStrategy;
Â  Â  }
Â  Â Â <span class="hljs-comment">/**
Â  Â  Â * åŠ¨æ€åˆ‡æ¢æ”¯ä»˜ç­–ç•¥
Â  Â  Â *Â @paramÂ paymentStrategy æ–°çš„æ”¯ä»˜ç­–ç•¥
Â  Â  Â */</span>
Â  Â Â <span class="hljs-function"><span class="hljs-keyword">public</span>Â <span class="hljs-type">void</span>Â <span class="hljs-title">setPaymentStrategy</span><span class="hljs-params">(LibifuTestPaymentStrategyÂ paymentStrategy)</span> </span>{
Â  Â  Â  Â  log.<span class="hljs-built_in">info</span>(<span class="hljs-string">"ã€æ”¯ä»˜ä¸Šä¸‹æ–‡ã€‘åˆ‡æ¢æ”¯ä»˜ç­–ç•¥ï¼š{}"</span>, paymentStrategy.<span class="hljs-built_in">getClass</span>().<span class="hljs-built_in">getSimpleName</span>());
Â  Â  Â  Â Â <span class="hljs-keyword">this</span>.paymentStrategyÂ = paymentStrategy;
Â  Â  }
Â  Â Â <span class="hljs-comment">/**
Â  Â  Â * ç»Ÿä¸€æ”¯ä»˜å…¥å£ï¼ˆå±è”½ç­–ç•¥ç»†èŠ‚ï¼Œå¯¹å¤–æš´éœ²ç®€æ´æ–¹æ³•ï¼‰
Â  Â  Â *Â @paramÂ amount æ”¯ä»˜é‡‘é¢
Â  Â  Â *Â @paramÂ orderId è®¢å•ID
Â  Â  Â *Â @returnÂ æ”¯ä»˜ç»“æœ
Â  Â  Â */</span>
Â  Â Â <span class="hljs-function"><span class="hljs-keyword">public</span>Â <span class="hljs-type">String</span>Â <span class="hljs-title">executePay</span><span class="hljs-params">(<span class="hljs-type">double</span> amount,Â <span class="hljs-type">String</span>Â orderId)</span> </span>{
Â  Â  Â  Â  log.<span class="hljs-built_in">info</span>(<span class="hljs-string">"ã€æ”¯ä»˜ä¸Šä¸‹æ–‡ã€‘å¼€å§‹å¤„ç†è®¢å•{}çš„æ”¯ä»˜è¯·æ±‚"</span>, orderId);
Â  Â  Â  Â Â <span class="hljs-keyword">return</span>Â paymentStrategy.<span class="hljs-built_in">pay</span>(amount, orderId);
Â  Â  }
}
</code></pre>
<p><strong>æµ‹è¯•ç±»</strong></p>
<pre><code class="hljs language-ini" lang="ini">/**
Â * å®¢æˆ·ç«¯ï¼šæµ‹è¯•ç­–ç•¥æ¨¡å¼ï¼ˆåŠ¨æ€åˆ‡æ¢æ”¯ä»˜æ–¹å¼ï¼‰
Â */
publicÂ classÂ LibifuTestStrategyClientÂ {
Â  Â Â publicÂ staticÂ voidÂ main(String<span class="hljs-section">[]</span>Â args)Â {
Â  Â  Â  Â Â // 1. è®¢å•ä¿¡æ¯
Â  Â  Â  Â  String <span class="hljs-attr">orderId</span> =Â <span class="hljs-string">"ORDER_20251213_001"</span><span class="hljs-comment">;</span>
Â  Â  Â  Â Â doubleÂ <span class="hljs-attr">amount</span> =Â <span class="hljs-number">199.99</span><span class="hljs-comment">;</span>
Â  Â  Â  Â Â // 2. é€‰æ‹©å¾®ä¿¡æ”¯ä»˜ç­–ç•¥
Â  Â  Â  Â  LibifuTestPaymentContext <span class="hljs-attr">paymentContext</span> =Â newÂ LibifuTestPaymentContext(newÂ LibifuTestWechatPayStrategy())<span class="hljs-comment">;</span>
Â  Â  Â  Â  String <span class="hljs-attr">wechatResult</span> = paymentContext.executePay(amount, orderId)<span class="hljs-comment">;</span>
Â  Â  Â  Â  System.out.println(wechatResult)<span class="hljs-comment">;</span>
Â  Â  Â  Â Â // 3. åŠ¨æ€åˆ‡æ¢ä¸ºæ”¯ä»˜å®æ”¯ä»˜ç­–ç•¥
Â  Â  Â  Â  paymentContext.setPaymentStrategy(newÂ LibifuTestAlipayStrategy())<span class="hljs-comment">;</span>
Â  Â  Â  Â  String <span class="hljs-attr">alipayResult</span> = paymentContext.executePay(amount, orderId)<span class="hljs-comment">;</span>
Â  Â  Â  Â  System.out.println(alipayResult)<span class="hljs-comment">;</span>
Â  Â  Â  Â Â // 4. åŠ¨æ€åˆ‡æ¢ä¸ºé“¶è”æ”¯ä»˜ç­–ç•¥
Â  Â  Â  Â  paymentContext.setPaymentStrategy(newÂ LibifuTestUnionPayStrategy())<span class="hljs-comment">;</span>
Â  Â  Â  Â  String <span class="hljs-attr">unionPayResult</span> = paymentContext.executePay(amount, orderId)<span class="hljs-comment">;</span>
Â  Â  Â  Â  System.out.println(unionPayResult)<span class="hljs-comment">;</span>
Â  Â  }
}
</code></pre>
<p><strong>è¿è¡Œç»“æœ</strong></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3790259f842847d789f3fd0f39d7233e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6X54mp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766642627&amp;x-signature=IhPC2Bc%2FnOz19IvFBS3i%2BjW28O0%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p><strong>æ¡†æ¶åº”ç”¨</strong></p>
<p>åœ¨Spring ä¸­ ï¼ŒResourceLoaderÂ æ¥å£åŠå®ç°ç±»æ˜¯ç­–ç•¥æ¨¡å¼çš„å…¸å‹è½åœ°ï¼š</p>
<ul>
<li>ç­–ç•¥æ¥å£ï¼šResourceLoaderï¼ˆå®šä¹‰ â€œåŠ è½½èµ„æºâ€ çš„ç»Ÿä¸€è§„èŒƒï¼‰ï¼›</li>
<li>å…·ä½“ç­–ç•¥ï¼šDefaultResourceLoaderï¼ˆé»˜è®¤èµ„æºåŠ è½½ï¼‰ã€FileSystemResourceLoaderï¼ˆæ–‡ä»¶ç³»ç»ŸåŠ è½½ï¼‰ã€ClassPathXmlApplicationContextï¼ˆç±»è·¯å¾„åŠ è½½ï¼‰ç­‰ï¼›</li>
<li>æ ¸å¿ƒä»·å€¼ï¼šä¸åŒèµ„æºï¼ˆç±»è·¯å¾„ã€æ–‡ä»¶ç³»ç»Ÿã€URLï¼‰çš„åŠ è½½é€»è¾‘å°è£…ä¸ºç‹¬ç«‹ç­–ç•¥ï¼Œå¯çµæ´»åˆ‡æ¢ä¸”ä¸å½±å“è°ƒç”¨æ–¹ã€‚</li>
<li>ä»¥ä¸‹é€‰å–ResourceLoaderÂ ã€FileSystemResourceLoaderæ ¸å¿ƒä»£ç ç‰‡æ®µï¼Œå±•ç¤ºç­–ç•¥æ¨¡å¼çš„è½åœ°é€»è¾‘ï¼š</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8fab89343704410d93e4a08333b942a5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6X54mp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766642627&amp;x-signature=MAlIuw%2BeyR6DU%2BgtqcY0E6Gzbp0%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span>Â org.springframework.core.io;
<span class="hljs-keyword">import</span>Â org.springframework.lang.Nullable;
<span class="hljs-comment">/**
Â * ç­–ç•¥æ¥å£ï¼šå®šä¹‰èµ„æºåŠ è½½çš„ç»Ÿä¸€è§„èŒƒï¼ˆç­–ç•¥æ¨¡å¼æ ¸å¿ƒæ¥å£ï¼‰
Â */</span>
<span class="hljs-keyword">public</span>Â <span class="hljs-keyword">interface</span>Â <span class="hljs-title class_">ResourceLoader</span>Â {
Â  Â Â <span class="hljs-comment">// ç±»è·¯å¾„èµ„æºå‰ç¼€ï¼ˆå¸¸é‡ï¼Œå­ç³»ç»Ÿç»†èŠ‚ï¼‰</span>
Â  Â Â <span class="hljs-type">String</span>Â <span class="hljs-variable">CLASSPATH_URL_PREFIX</span>Â <span class="hljs-operator">=</span>Â <span class="hljs-string">"classpath:"</span>;
Â  Â Â <span class="hljs-comment">/**
Â  Â  Â * ç­–ç•¥æ ¸å¿ƒæ–¹æ³•ï¼šæ ¹æ®èµ„æºè·¯å¾„åŠ è½½Resourceï¼ˆæ‰€æœ‰å…·ä½“ç­–ç•¥éœ€å®ç°æ­¤æ–¹æ³•ï¼‰
Â  Â  Â *Â <span class="hljs-doctag">@param</span>Â location èµ„æºè·¯å¾„ï¼ˆå¦‚classpath:application.xmlã€file:/data/config.xmlï¼‰
Â  Â  Â *Â <span class="hljs-doctag">@return</span>Â å°è£…åçš„Resourceå¯¹è±¡
Â  Â  Â */</span>
Â  Â  ResourceÂ <span class="hljs-title function_">getResource</span><span class="hljs-params">(String location)</span>;
Â  Â Â <span class="hljs-comment">/**
Â  Â  Â * è¾…åŠ©æ–¹æ³•ï¼šè·å–ç±»åŠ è½½å™¨ï¼ˆç­–ç•¥å®ç°æ—¶ä¾èµ–ï¼‰
Â  Â  Â */</span>
Â  Â Â <span class="hljs-meta">@Nullable</span>
Â  Â  ClassLoaderÂ <span class="hljs-title function_">getClassLoader</span><span class="hljs-params">()</span>;
}
</code></pre>

<pre><code class="hljs language-arduino" lang="arduino">packageÂ org.springframework.core.io;
<span class="hljs-comment">/**
Â * å…·ä½“ç­–ç•¥ï¼šæ–‡ä»¶ç³»ç»Ÿèµ„æºåŠ è½½å™¨ï¼ˆè¦†ç›–æ‰©å±•ç‚¹å®ç°æ–‡ä»¶ç³»ç»ŸåŠ è½½ï¼‰
Â */</span>
<span class="hljs-keyword">public</span>Â <span class="hljs-keyword">class</span>Â <span class="hljs-title class_">FileSystemResourceLoader</span>Â extendsÂ DefaultResourceLoaderÂ {
Â  Â Â <span class="hljs-comment">/**
Â  Â  Â * è¦†ç›–ç­–ç•¥æ‰©å±•ç‚¹ï¼šå®ç°æ–‡ä»¶ç³»ç»Ÿè·¯å¾„åŠ è½½
Â  Â  Â */</span>
Â  Â Â @<span class="hljs-function">Override
Â  Â Â <span class="hljs-keyword">protected</span>Â ResourceÂ <span class="hljs-title">getResourceByPath</span><span class="hljs-params">(<span class="hljs-type">String</span> path)</span>Â </span>{
Â  Â  Â  Â Â <span class="hljs-comment">// è‹¥è·¯å¾„ä¸ºç»å¯¹è·¯å¾„ï¼Œç›´æ¥åˆ›å»ºFileSystemResource</span>
Â  Â  Â  Â Â <span class="hljs-keyword">if</span>Â (path.<span class="hljs-built_in">startsWith</span>(<span class="hljs-string">"/"</span>)) {
Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">return</span>Â <span class="hljs-keyword">new</span>Â <span class="hljs-built_in">FileSystemResource</span>(path);
Â  Â  Â  Â  }
Â  Â  Â  Â Â <span class="hljs-comment">// å¦åˆ™åˆ›å»ºæ–‡ä»¶ç³»ç»Ÿä¸Šä¸‹æ–‡èµ„æºï¼ˆæ”¯æŒç›¸å¯¹è·¯å¾„ï¼‰</span>
Â  Â  Â  Â Â <span class="hljs-keyword">else</span>Â {
Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">return</span>Â <span class="hljs-keyword">new</span>Â <span class="hljs-built_in">FileSystemContextResource</span>(path);
Â  Â  Â  Â  }
Â  Â  }
Â  Â Â <span class="hljs-comment">/**
Â  Â  Â * å†…éƒ¨ç±»ï¼šæ–‡ä»¶ç³»ç»Ÿä¸Šä¸‹æ–‡èµ„æºï¼ˆç­–ç•¥è¾…åŠ©å®ç°ï¼‰
Â  Â  Â */</span>
Â  Â Â <span class="hljs-keyword">private</span>Â <span class="hljs-type">static</span>Â <span class="hljs-keyword">class</span>Â <span class="hljs-title class_">FileSystemContextResource</span>Â extendsÂ FileSystemResourceÂ {
Â  Â  Â  Â Â <span class="hljs-function"><span class="hljs-keyword">public</span>Â <span class="hljs-title">FileSystemContextResource</span><span class="hljs-params">(<span class="hljs-type">String</span> path)</span>Â </span>{
Â  Â  Â  Â  Â  Â Â <span class="hljs-built_in">super</span>(path);
Â  Â  Â  Â  }
Â  Â  Â  Â Â <span class="hljs-comment">// xxx</span>
Â  Â  }
}
</code></pre>






























<table><thead><tr><th>è§’è‰²</th><th>ç±» / æ¥å£</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>ç­–ç•¥æ¥å£</td><td>ResourceLoader</td><td>å®šä¹‰getResourceç»Ÿä¸€åŠ è½½è§„èŒƒï¼Œå±è”½ä¸åŒèµ„æºåŠ è½½çš„ç»†èŠ‚</td></tr><tr><td>æŠ½è±¡ç­–ç•¥</td><td>DefaultResourceLoader</td><td>å®ç°é€šç”¨åŠ è½½é€»è¾‘ï¼ˆç±»è·¯å¾„ã€URLï¼‰ï¼Œæä¾›æ‰©å±•ç‚¹getResourceByPath</td></tr><tr><td>å…·ä½“ç­–ç•¥</td><td>FileSystemResourceLoader</td><td>è¦†ç›–æ‰©å±•ç‚¹ï¼Œå®ç°æ–‡ä»¶ç³»ç»Ÿèµ„æºåŠ è½½çš„ä¸“å±é€»è¾‘</td></tr><tr><td>è°ƒç”¨æ–¹</td><td>ApplicationContextï¼ˆå¦‚ClassPathXmlApplicationContextï¼‰</td><td>ä¾èµ–ResourceLoaderæ¥å£ï¼Œæ— éœ€å…³æ³¨å…·ä½“åŠ è½½ç­–ç•¥ï¼Œå¯çµæ´»åˆ‡æ¢</td></tr></tbody></table>
<h2 data-id="heading-9">ä¸‰ã€å®æˆ˜</h2>
<h3 data-id="heading-10">èƒŒæ™¯</h3>
<p>é™¤äº†å¤§å®¶ç†Ÿæ‚‰çš„"å‡ºä»·è¿˜ä»·"åˆ—è¡¨å¤–ï¼Œç°åœ¨è®¢å•åˆ—è¡¨ã€"æƒ³è¦"æ”¶è—åˆ—è¡¨ç­‰åœºæ™¯ä¹Ÿèƒ½çœ‹åˆ°å¿ƒä»ªå•†å“çš„è¿˜ä»·ä¿¡æ¯â€”â€”è¿˜ä»·åŠŸèƒ½ï¼Œåœ¨ç”¨æˆ·ä½“éªŒä¸Šé€æ­¥ä»å•ä¸€åœºæ™¯å‘å¤šåœºæ™¯æŒç»­æ¼”è¿›ã€‚</p>
<p><strong>1.0 ç‰ˆæœ¬ï¼š</strong></p>
<p>åœ¨åŠŸèƒ½åˆæœŸï¼Œæˆ‘ä»¬é‡‡ç”¨è½»é‡çº§çš„è®¾è®¡æ€è·¯ï¼š</p>
<ul>
<li>èšç„¦æ ¸å¿ƒåœºæ™¯ï¼šä»…åœ¨è¿˜ä»·åˆ—è¡¨é¡µæä¾›ç²¾ç®€é«˜æ•ˆçš„è¿˜ä»·æœåŠ¡</li>
<li>æç®€æŠ€æœ¯å®ç°ï¼šé€šè¿‡çº¿æ€§è°ƒç”¨å•†å“/åº“å­˜/è®¢å•ç­‰ç­‰æœåŠ¡ï¼Œç¡®ä¿åŠŸèƒ½ç¨³å®šäº¤ä»˜</li>
<li>æ™ºèƒ½å¼•å¯¼ç­–ç•¥ï¼šå†…ç½®è¿˜ä»·ä¼˜å…ˆçº§ç®—æ³•ï¼Œå¸®åŠ©ç”¨æˆ·å¿«é€Ÿå†³ç­–</li>
</ul>
<p><strong>2.0 ç‰ˆæœ¬ï¼š</strong></p>
<p>ä½†éšç€å¾—ç‰©è¿˜ä»·åŠŸèƒ½ä¸æ–­åŠ å¼ºï¼Œç³»ç»Ÿé¢ä¸´äº†ä¸€äº›çƒ¦æ¼ï¼š</p>
<ul>
<li>åœºæ™¯ç»´åº¦ï¼šè®¢å•åˆ—è¡¨ã€æƒ³è¦&lt;æ”¶è—&gt;åˆ—è¡¨ç­‰æ–°åœºæ™¯æ¥å…¥</li>
<li>æµé‡ç»´åº¦ï¼šéƒ¨åˆ†é¡µé¢çš„è®¿é—®é‡å‘ˆæŒ‡æ•°çº§å¢é•¿ï¼Œå³°å€¼è¾ƒåˆæœŸä¸Šå‡æ˜æ˜¾</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b7baa53edad44791b7633bcd0eb60d10~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6X54mp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766642627&amp;x-signature=sP3rtJsutwHqcsyaTriYXwKLnhc%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p>æˆ‘ä»¬å‘ç°åŸæœ‰è®¾è®¡é€æ¸æ˜¾ç°å‡ºä¸€äº›å±€é™æ€§ï¼š</p>
<ul>
<li>ç”¨æˆ·ä½“éªŒä¼˜åŒ–ï¼šéšç€ç”¨æˆ·è§„æ¨¡å¿«é€Ÿå¢é•¿ï¼Œå¦‚ä½•åœ¨é«˜å¹¶å‘åœºæ™¯ä¸‹ä¾ç„¶ä¿æŒä¸æ»‘æµç•…çš„è¿˜ä»·ä½“éªŒï¼Œæˆä¸ºé‡è¦å…³æ³¨ç‚¹</li>
<li>è¿­ä»£æ•ˆç‡ï¼šæ¯æ¬¡æ–°å¢ä¸šåŠ¡åœºæ™¯éƒ½éœ€è¦é‡å¤å¼€å‘ç›¸ä¼¼é€»è¾‘</li>
<li>åä½œæ•ˆç‡ï¼šåŠŸèƒ½è¿­ä»£çš„æ²Ÿé€šå’Œå¯¹æ¥æˆæœ¬å¢åŠ </li>
</ul>
<h3 data-id="heading-11">æ”¹é€ ç‚¹</h3>
<p>é’ˆå¯¹ä¸Šè¿°é—®é¢˜ï¼Œæˆ‘ä»¬é‡‡ç”¨ç­–ç•¥æ¨¡å¼è¿›è¡Œä»£ç ç»“æ„å‡çº§ï¼Œæ ¸å¿ƒæ”¹é€ ç‚¹åŒ…æ‹¬ï¼š</p>
<p><strong>æŠ½è±¡ç­–ç•¥æ¥å£</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span>Â <span class="hljs-keyword">interface</span>Â <span class="hljs-title class_">xxxQueryStrategy</span>Â {
Â  Â Â <span class="hljs-comment">/**
Â  Â  Â * ç­–ç•¥ç±»å‹
Â  Â  Â *
Â  Â  Â *Â <span class="hljs-doctag">@return</span>Â ç­–ç•¥ç±»å‹
Â  Â  Â */</span>
Â  Â  StringÂ <span class="hljs-title function_">matchType</span><span class="hljs-params">()</span>;
Â  Â Â <span class="hljs-comment">/**
Â  Â  Â * å‰ç½®æ ¡éªŒ
Â  Â  Â *
Â  Â  Â *Â <span class="hljs-doctag">@param</span>Â ctx xxxä¸Šä¸‹æ–‡
Â  Â  Â *Â <span class="hljs-doctag">@return</span>Â true-æ ¡éªŒé€šè¿‡;false-æ ¡éªŒæœªé€šè¿‡
Â  Â  Â */</span>
Â  Â Â <span class="hljs-type">boolean</span>Â <span class="hljs-title function_">beforeProcess</span><span class="hljs-params">(xxxCtx ctx)</span>;
Â  Â Â <span class="hljs-comment">/**
Â  Â  Â * æ‰§è¡Œç­–ç•¥
Â  Â  Â *
Â  Â  Â *Â <span class="hljs-doctag">@param</span>Â ctx xxxä¸Šä¸‹æ–‡
Â  Â  Â *Â <span class="hljs-doctag">@return</span>Â xxxdto
Â  Â  Â */</span>
Â  Â  xxxQueryDTOÂ <span class="hljs-title function_">handle</span><span class="hljs-params">(xxxtx ctx)</span>;
Â  Â Â <span class="hljs-comment">/**
Â  Â  Â * åç½®å¤„ç†
Â  Â  Â *
Â  Â  Â *Â <span class="hljs-doctag">@param</span>Â ctx xxxä¸Šä¸‹æ–‡
Â  Â  Â */</span>
Â  Â Â <span class="hljs-keyword">void</span>Â <span class="hljs-title function_">afterProcess</span><span class="hljs-params">(xxxCtx ctx)</span>;
}
</code></pre>
<p><strong>æŠ½è±¡åŸºç±» ï¼šå°è£…å…¬å…±æ•°æ®æŸ¥è¯¢é€»è¾‘</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Slf4j</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span>Â <span class="hljs-keyword">abstract</span>Â <span class="hljs-keyword">class</span>Â <span class="hljs-title class_">AbstractxxxStrategy</span>Â {
Â  Â  Â  Â Â <span class="hljs-comment">/**
Â  Â  Â  Â  Â * æ‰§è¡Œç­–ç•¥
Â  Â  Â  Â  Â *
Â  Â  Â  Â  Â *Â <span class="hljs-doctag">@param</span>Â ctx xxxä¸Šä¸‹æ–‡
Â  Â  Â  Â  Â */</span>
Â  Â  Â  Â Â <span class="hljs-keyword">public</span>Â <span class="hljs-keyword">void</span>Â <span class="hljs-title function_">doHandler</span><span class="hljs-params">(xxxCtx ctx)</span>Â {
Â  Â  Â  Â  Â  Â Â <span class="hljs-comment">// åˆå§‹åŒ–xxxæ•°æ®</span>
Â  Â  Â  Â  Â  Â  initxxx(ctx);
Â  Â  Â  Â  Â  Â Â <span class="hljs-comment">// å¼‚æ­¥æŸ¥è¯¢ç›¸å…³ä¿¡æ¯</span>
Â  Â  Â  Â  Â  Â  supplyAsync(ctx);
Â  Â  Â  Â  Â  Â Â <span class="hljs-comment">// åˆå§‹åŒ–xxxä¸Šä¸‹æ–‡</span>
Â  Â  Â  Â  Â  Â  initxxxCtx(ctx);
Â  Â  Â  Â  Â  Â Â <span class="hljs-comment">// æŸ¥è¯¢xxxxç­–ç•¥</span>
Â  Â  Â  Â  Â  Â  queryxxxGuide(ctx);
Â  Â  Â  Â  Â  Â Â <span class="hljs-comment">// æŸ¥è¯¢xxxåº•éƒ¨ç­–ç•¥</span>
Â  Â  Â  Â  Â  Â  queryxxxBottomGuide(ctx);
Â  Â  Â  Â  }
Â  Â  Â  Â Â <span class="hljs-comment">/**
Â  Â  Â  Â  Â * åˆå§‹åŒ–xxxæ•°æ®
Â  Â  Â  Â  Â *
Â  Â  Â  Â  Â *Â <span class="hljs-doctag">@param</span>Â ctx xxxä¸Šä¸‹æ–‡
Â  Â  Â  Â  Â */</span>
Â  Â  Â  Â Â <span class="hljs-keyword">protected</span>Â <span class="hljs-keyword">abstract</span>Â <span class="hljs-keyword">void</span>Â <span class="hljs-title function_">initxxx</span><span class="hljs-params">(xxxCtx ctx)</span>;




Â  Â  Â  Â Â <span class="hljs-comment">/**
Â  Â  Â  Â  Â * å¼‚æ­¥æŸ¥è¯¢ç›¸å…³ä¿¡æ¯
Â  Â  Â  Â  Â *
Â  Â  Â  Â  Â *Â <span class="hljs-doctag">@param</span>Â ctx xxxä¸Šä¸‹æ–‡
Â  Â  Â  Â  Â */</span>
Â  Â  Â  Â Â <span class="hljs-keyword">protected</span>Â <span class="hljs-keyword">abstract</span>Â <span class="hljs-keyword">void</span>Â <span class="hljs-title function_">supplyAsync</span><span class="hljs-params">(xxxCtx ctx)</span>;


Â  Â  Â  Â Â <span class="hljs-comment">/**
Â  Â  Â  Â  Â * åˆå§‹åŒ–xxxä¸Šä¸‹æ–‡
Â  Â  Â  Â  Â *
Â  Â  Â  Â  Â *Â <span class="hljs-doctag">@param</span>Â ctx xxxä¸Šä¸‹æ–‡
Â  Â  Â  Â  Â */</span>
Â  Â  Â  Â Â <span class="hljs-keyword">protected</span>Â <span class="hljs-keyword">abstract</span>Â <span class="hljs-keyword">void</span>Â <span class="hljs-title function_">initxxxCtx</span><span class="hljs-params">(xxxCtx ctx)</span>;


Â  Â  Â  Â Â <span class="hljs-comment">/**
Â  Â  Â  Â  Â * æŸ¥è¯¢xxxç­–ç•¥
Â  Â  Â  Â  Â *
Â  Â  Â  Â  Â *Â <span class="hljs-doctag">@param</span>Â ctx xxxä¸Šä¸‹æ–‡
Â  Â  Â  Â  Â */</span>
Â  Â  Â  Â Â <span class="hljs-keyword">protected</span>Â <span class="hljs-keyword">abstract</span>Â <span class="hljs-keyword">void</span>Â <span class="hljs-title function_">queryxxxGuide</span><span class="hljs-params">(xxxCtx ctx)</span>;


Â  Â  Â  Â Â <span class="hljs-comment">/**
Â  Â  Â  Â  Â * æŸ¥è¯¢xxxåº•éƒ¨ç­–ç•¥
Â  Â  Â  Â  Â *
Â  Â  Â  Â  Â *Â <span class="hljs-doctag">@param</span>Â ctx xxxä¸Šä¸‹æ–‡
Â  Â  Â  Â  Â */</span>
Â  Â  Â  Â Â <span class="hljs-keyword">protected</span>Â <span class="hljs-keyword">abstract</span>Â <span class="hljs-keyword">void</span>Â <span class="hljs-title function_">queryxxxBottomGuide</span><span class="hljs-params">(xxxCtx ctx)</span>;


Â  Â  Â  Â Â <span class="hljs-comment">/**
Â  Â  Â  Â  Â * æ„å»ºå‡ºå‚
Â  Â  Â  Â  Â *
Â  Â  Â  Â  Â *Â <span class="hljs-doctag">@param</span>Â ctx xxxä¸Šä¸‹æ–‡
Â  Â  Â  Â  Â */</span>
Â  Â  Â  Â Â <span class="hljs-keyword">protected</span>Â <span class="hljs-keyword">abstract</span>Â <span class="hljs-keyword">void</span>Â <span class="hljs-title function_">buildXXX</span><span class="hljs-params">(xxxCtx ctx)</span>;
}
</code></pre>
<p><strong>å…·ä½“ç­–ç•¥ ï¼šå®ç°åœºæ™¯ç‰¹æœ‰é€»è¾‘</strong></p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-selector-tag">public</span>Â <span class="hljs-selector-tag">class</span>Â <span class="hljs-selector-tag">xxxStrategy</span>Â <span class="hljs-selector-tag">extends</span>Â <span class="hljs-selector-tag">AbstractxxxxStrategy</span>Â <span class="hljs-selector-tag">implements</span>Â <span class="hljs-selector-tag">xxxStrategy</span> {
Â  Â Â <span class="hljs-comment">/**
Â  Â  Â * ç­–ç•¥ç±»å‹
Â  Â  Â *
Â  Â  Â *Â @returnÂ ç­–ç•¥ç±»å‹
Â  Â  Â */</span>
Â  Â Â <span class="hljs-variable">@Override</span>
Â  Â Â publicÂ StringÂ <span class="hljs-built_in">matchType</span>() {
Â  Â  Â  Â Â <span class="hljs-comment">// XXX</span>
Â  Â  }


Â  Â Â <span class="hljs-comment">/**
Â  Â  Â * å‰ç½®æ ¡éªŒ
Â  Â  Â *
Â  Â  Â *Â @paramÂ ctx xxxä¸Šä¸‹æ–‡
Â  Â  Â *Â @returnÂ true-æ ¡éªŒé€šè¿‡;false-æ ¡éªŒæœªé€šè¿‡
Â  Â  Â */</span>
Â  Â Â <span class="hljs-variable">@Override</span>
Â  Â Â publicÂ booleanÂ <span class="hljs-built_in">beforeProcess</span>(xxxCtx ctx) {
Â  Â  Â  Â Â <span class="hljs-comment">// XXX</span>
Â  Â  }


Â  Â Â <span class="hljs-comment">/**
Â  Â  Â * æ‰§è¡Œç­–ç•¥
Â  Â  Â *
Â  Â  Â *Â @paramÂ ctx Â xxxä¸Šä¸‹æ–‡
Â  Â  Â *Â @returnÂ å…¬å…±å‡ºå‚
Â  Â  Â */</span>
Â  Â Â <span class="hljs-variable">@Override</span>
Â  Â Â publicÂ BuyerBiddingQueryDTOÂ <span class="hljs-built_in">handle</span>(xxxCtx ctx) {
Â  Â  Â  Â Â <span class="hljs-selector-tag">super</span><span class="hljs-selector-class">.doHandler</span>(ctx);
Â  Â  Â  Â Â <span class="hljs-comment">// XXX</span>
Â  Â  }


Â  Â Â <span class="hljs-comment">/**
Â  Â  Â * åç½®å¤„ç†
Â  Â  Â *
Â  Â  Â *Â @paramÂ ctx xxxä¸Šä¸‹æ–‡
Â  Â  Â */</span>
Â  Â Â @<span class="hljs-selector-tag">Override</span>
Â  Â Â <span class="hljs-selector-tag">public</span>Â <span class="hljs-selector-tag">void</span>Â <span class="hljs-selector-tag">afterProcess</span>(xxxCtx ctx) {
Â  Â  Â  Â <span class="hljs-comment">// XXX</span>
Â  Â  }


Â  Â Â <span class="hljs-comment">/**
Â  Â  Â * åˆå§‹åŒ–xxxæ•°æ®
Â  Â  Â *
Â  Â  Â *Â @paramÂ ctx xxxä¸Šä¸‹æ–‡
Â  Â  Â */</span>
Â  Â Â <span class="hljs-variable">@Override</span>
Â  Â Â protectedÂ voidÂ <span class="hljs-built_in">initxxx</span>(xxxCtx ctx) {
Â  Â  Â  Â Â <span class="hljs-comment">// XXX</span>
Â  Â  }


Â  Â Â <span class="hljs-comment">/**
Â  Â  Â * å¼‚æ­¥æŸ¥è¯¢ç›¸å…³ä¿¡æ¯
Â  Â  Â *
Â  Â  Â *Â @paramÂ ctx Â XXXä¸Šä¸‹æ–‡
Â  Â  Â */</span>
Â  Â Â <span class="hljs-variable">@Override</span>
Â  Â Â protectedÂ voidÂ <span class="hljs-built_in">supplyAsync</span>(xxxCtx ctx) {
Â  Â  Â  Â Â <span class="hljs-comment">// å‰ç½®å¼‚æ­¥æŸ¥è¯¢</span>
Â  Â  Â  Â Â <span class="hljs-selector-tag">super</span><span class="hljs-selector-class">.preBatchAsyncxxx</span>(ctx);
Â  Â  Â  Â Â <span class="hljs-comment">// ç­–ç•¥å®šåˆ¶ä¸šåŠ¡</span>
Â  Â  Â  Â Â <span class="hljs-comment">// XXX</span>
Â  Â  }


Â  Â Â <span class="hljs-comment">/**
Â  Â  Â * åˆå§‹åŒ–XXXä¸Šä¸‹æ–‡
Â  Â  Â *
Â  Â  Â *Â @paramÂ ctx XXXä¸Šä¸‹æ–‡
Â  Â  Â */</span>
Â  Â Â @<span class="hljs-selector-tag">Override</span>
Â  Â Â <span class="hljs-selector-tag">protected</span>Â <span class="hljs-selector-tag">void</span>Â <span class="hljs-selector-tag">initGuideCtx</span>(xxxCtx ctx) {
Â  Â  Â  Â Â <span class="hljs-comment">// XXX</span>
Â  Â  }


Â  Â Â <span class="hljs-comment">/**
Â  Â  Â * æŸ¥è¯¢XXXç­–ç•¥
Â  Â  Â *
Â  Â  Â *Â @paramÂ ctx XXXä¸Šä¸‹æ–‡
Â  Â  Â */</span>
Â  Â Â <span class="hljs-variable">@Override</span>
Â  Â Â protectedÂ voidÂ <span class="hljs-built_in">queryXXXGuide</span>(xxxCtx ctx) {
Â  Â  Â  Â Â <span class="hljs-comment">// XXX</span>
Â  Â  }


Â  Â Â <span class="hljs-comment">/**
Â  Â  Â * æŸ¥è¯¢XXXç­–ç•¥
Â  Â  Â *
Â  Â  Â *Â @paramÂ ctx XXXä¸Šä¸‹æ–‡
Â  Â  Â */</span>
Â  Â Â <span class="hljs-variable">@Override</span>
Â  Â Â protectedÂ voidÂ <span class="hljs-built_in">queryXXXBottomGuide</span>(XXXCtxÂ ctx) {
Â  Â  Â  Â Â <span class="hljs-comment">// XXX</span>
Â  Â  }


Â  Â Â <span class="hljs-comment">/**
Â  Â  Â * æ„å»ºå‡ºå‚
Â  Â  Â *
Â  Â  Â *Â @paramÂ ctx XXXä¸Šä¸‹æ–‡
Â  Â  Â */</span>
Â  Â Â <span class="hljs-variable">@Override</span>
Â  Â Â protectedÂ voidÂ <span class="hljs-built_in">buildXXX</span>(XXXCtxÂ ctx) {
Â  Â  Â  Â Â <span class="hljs-comment">// XXX</span>
Â  Â  }
}
</code></pre>
<p><strong>è¿è¡Œæ—¶ç­–ç•¥è·¯ç”±</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-meta">@Component</span>
<span class="hljs-meta">@RequiredArgsConstructor</span>
<span class="hljs-keyword">public</span>Â <span class="hljs-keyword">class</span>Â <span class="hljs-title class_">xxxStrategyFactory</span>Â {
Â  Â Â <span class="hljs-keyword">private</span>Â finalÂ <span class="hljs-title class_">List</span>&lt;xxxStrategy&gt; xxxStrategyList;


Â  Â Â <span class="hljs-keyword">private</span>Â finalÂ <span class="hljs-title class_">Map</span>&lt;<span class="hljs-title class_">String</span>, xxxStrategy&gt; strategyMap =Â <span class="hljs-keyword">new</span>Â <span class="hljs-title class_">HashMap</span>&lt;&gt;();


Â  Â Â <span class="hljs-meta">@PostConstruct</span>
Â  Â Â <span class="hljs-keyword">public</span>Â <span class="hljs-built_in">void</span>Â <span class="hljs-title function_">init</span>(<span class="hljs-params"/>) {
Â  Â  Â  Â Â <span class="hljs-title class_">CollectionUtils</span>.<span class="hljs-title function_">emptyIfNull</span>(xxxStrategyList)
Â  Â  Â  Â  Â  Â  Â  Â  .<span class="hljs-title function_">stream</span>()
Â  Â  Â  Â  Â  Â  Â  Â  .<span class="hljs-title function_">filter</span>(<span class="hljs-title class_">Objects</span>::nonNull)
Â  Â  Â  Â  Â  Â  Â  Â  .<span class="hljs-title function_">forEach</span>(strategy -&gt; strategyMap.<span class="hljs-title function_">put</span>(strategy.<span class="hljs-title function_">matchType</span>(), strategy));
Â  Â  }


Â  Â Â <span class="hljs-keyword">public</span>Â xxxStrategyÂ <span class="hljs-title function_">select</span>(<span class="hljs-params"><span class="hljs-built_in">String</span>Â scene</span>) {
Â  Â  Â  Â Â <span class="hljs-keyword">return</span>Â strategyMap.<span class="hljs-title function_">get</span>(scene);Â 
Â  Â  }
}
</code></pre>
<h3 data-id="heading-12">å‡çº§æ”¶ç›Š</h3>
<p>1.æ€§èƒ½æå‡ ï¼š</p>
<ul>
<li>åŒæ­¥è°ƒç”¨æ”¹ä¸ºCompletableFutureå¼‚æ­¥ç¼–æ’</li>
<li>å¹¶è¡ŒåŒ–ç‹¬ç«‹IOæ“ä½œï¼Œé™ä½æ•´ä½“å“åº”æ—¶é—´</li>
</ul>
<p>2.æ‰©å±•æ€§å¢å¼º ï¼š</p>
<ul>
<li>æ–°å¢åœºæ™¯åªéœ€å®ç°æ–°çš„Strategyç±»</li>
<li>ç¬¦åˆå¼€é—­åŸåˆ™ï¼ˆå¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å…³é—­ï¼‰</li>
</ul>
<p>3.å¯ç»´æŠ¤æ€§æ”¹å–„ ï¼š</p>
<ul>
<li>ä¸šåŠ¡é€»è¾‘æŒ‰åœºæ™¯å‚ç›´æ‹†åˆ†</li>
<li>å…¬å…±é€»è¾‘ä¸‹æ²‰åˆ°æŠ½è±¡åŸºç±»</li>
<li>æ¶ˆé™¤å¤æ‚çš„æ¡ä»¶åˆ†æ”¯åˆ¤æ–­</li>
</ul>
<p>4.æ¶æ„æ¸…æ™°åº¦ ï¼š</p>
<ul>
<li>æ˜ç¡®çš„ç­–ç•¥æ¥å£å®šä¹‰</li>
<li>å„ç­–ç•¥å®ç°ç±»èŒè´£å•ä¸€</li>
</ul>
<p>è¿™ç§æ¶æ„æ”¹é€ ä½“ç°äº†ç»„åˆä¼˜äºç»§æ‰¿ ã€é¢å‘æ¥å£ç¼–ç¨‹ç­‰è®¾è®¡åŸåˆ™ï¼Œé€šè¿‡ç­–ç•¥æ¨¡å¼å°†åŸæœ¬å¤æ‚çš„å•ä½“å¼ç»“æ„æ‹†åˆ†ä¸ºå¯æ’æ‹”çš„ç»„ä»¶ï¼Œä¸ºåç»­ä¸šåŠ¡è¿­ä»£æä¾›äº†è‰¯å¥½çš„æ‰©å±•åŸºç¡€ã€‚</p>
<h2 data-id="heading-13">å››ã€æ€»ç»“</h2>
<p>åœ¨è½¯ä»¶å¼€å‘ä¸­ï¼Œè®¾è®¡æ¨¡å¼æ˜¯ä¸€ç§è§£å†³ç‰¹å®šåœºæ™¯é—®é¢˜çš„é€šç”¨æ–¹æ³•è®ºï¼Œæ—¨åœ¨æå‡ä»£ç çš„å¯è¯»æ€§ã€å¯ç»´æŠ¤æ€§å’Œå¯å¤ç”¨æ€§ã€‚å…¶æ ¸å¿ƒä¼˜åŠ¿åœ¨äºæ¸…æ™°çš„èŒè´£åˆ†ç¦»ç†å¿µã€çµæ´»çš„è¡Œä¸ºæŠ½è±¡èƒ½åŠ›ä»¥åŠå¯¹ç³»ç»Ÿç»“æ„çš„ä¼˜åŒ–è®¾è®¡ã€‚ç»“åˆä¸°å¯Œçš„å®è·µç»éªŒï¼Œè®¾è®¡æ¨¡å¼å·²ç»æˆä¸ºå¼€å‘è€…åº”å¯¹å¤æ‚ä¸šåŠ¡éœ€æ±‚ã€æ„å»ºé«˜è´¨é‡è½¯ä»¶ç³»ç»Ÿçš„é‡è¦æŒ‡å¯¼åŸåˆ™ã€‚</p>
<p>æœ¬æ–‡é€šè¿‡è§£æä¸€äº›ç»å…¸è®¾è®¡æ¨¡å¼çš„åŸç†ã€æ¡†æ¶åº”ç”¨ä¸å®æˆ˜æ¡ˆä¾‹ï¼Œæ·±å…¥æ¢è®¨äº†è®¾è®¡æ¨¡å¼åœ¨å®é™…å¼€å‘ä¸­çš„ä»·å€¼ä¸ä½œç”¨ã€‚ä½œä¸ºä»£ç ä¼˜åŒ–çš„å·¥å…·ï¼Œæ›´ä½œä¸ºä¸€ç§å¼€å‘å“²å­¦ï¼Œè®¾è®¡æ¨¡å¼ä»¥ç®€æ´ä¼˜é›…çš„æ–¹å¼è§£å†³å¤æ‚é—®é¢˜ï¼Œæ¨åŠ¨ç³»ç»Ÿçš„é«˜æ•ˆä¸ç¨³å¥ã€‚</p>
<p>å½“ç„¶äº†ï¼Œåœ¨å®é™…çš„è½¯ä»¶å¼€å‘ä¸­ï¼Œæˆ‘ä»¬åº”æ ¹æ®å®é™…éœ€æ±‚åˆç†é€‰æ‹©å’Œåº”ç”¨è®¾è®¡æ¨¡å¼ï¼Œé¿å…è¿‡åº¦è®¾è®¡ï¼ŒåŒæ—¶æ·±å…¥ç†è§£å…¶èƒŒåçš„ç†å¿µï¼Œæœ€ç»ˆå®ç°æ›´åŠ é«˜æ•ˆã€å¥å£®çš„ä»£ç ä¸ç³»ç»Ÿæ¶æ„ã€‚</p>
<h3 data-id="heading-14">å¾€æœŸå›é¡¾</h3>
<p>1.ä»0åˆ°1æ­å»ºä¸€ä¸ªæ™ºèƒ½åˆ†æOBSåŸ‹ç‚¹æ•°æ®çš„AI Agentï½œå¾—ç‰©æŠ€æœ¯</p>
<p>2.æ•°æ®åº“AIæ–¹å‘æ¢ç´¢-MCPåŸç†è§£æ&amp;DBæ–¹å‘å®æˆ˜ï½œå¾—ç‰©æŠ€æœ¯</p>
<p>3.é¡¹ç›®æ€§èƒ½ä¼˜åŒ–å®è·µï¼šæ·±å…¥FMPç®—æ³•åŸç†æ¢ç´¢ï½œå¾—ç‰©æŠ€æœ¯</p>
<p>4.Dragonboatç»Ÿä¸€å­˜å‚¨LogDBå®ç°åˆ†æï½œå¾—ç‰©æŠ€æœ¯</p>
<p>5.ä»æ•°å­—åˆ°ç‰ˆé¢ï¼šå¾—ç‰©æ•°æ®äº§å“é‡Œæ•°å­—æ ¼å¼åŒ–çš„é‚£äº›äº‹</p>
<h3 data-id="heading-15">æ–‡ /å¿˜å·</h3>
<p>å…³æ³¨å¾—ç‰©æŠ€æœ¯ï¼Œæ¯å‘¨æ›´æ–°æŠ€æœ¯å¹²è´§</p>
<p>è¦æ˜¯è§‰å¾—æ–‡ç« å¯¹ä½ æœ‰å¸®åŠ©çš„è¯ï¼Œæ¬¢è¿è¯„è®ºè½¬å‘ç‚¹èµï½</p>
<p>æœªç»å¾—ç‰©æŠ€æœ¯è®¸å¯ä¸¥ç¦è½¬è½½ï¼Œå¦åˆ™ä¾æ³•è¿½ç©¶æ³•å¾‹è´£ä»»ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[6000å­—æŠ€æœ¯å‘æ‹†è§£ â€œå¤§æ™“æœºå™¨äººâ€æºæ‰‹ç«å±±å¼•æ“å¤šæ¨¡æ€æ•°æ®æ¹–æ¢ç´¢è§†é¢‘å¤„ç†æ–°è·¯å¾„]]></title>    <link>https://juejin.cn/post/7584817405227843625</link>    <guid>https://juejin.cn/post/7584817405227843625</guid>    <pubDate>2025-12-18T06:19:07.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7584817405227843625" data-draft-id="7584724634173898815" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="6000å­—æŠ€æœ¯å‘æ‹†è§£ â€œå¤§æ™“æœºå™¨äººâ€æºæ‰‹ç«å±±å¼•æ“å¤šæ¨¡æ€æ•°æ®æ¹–æ¢ç´¢è§†é¢‘å¤„ç†æ–°è·¯å¾„"/> <meta itemprop="keywords" content="å¤§æ•°æ®"/> <meta itemprop="datePublished" content="2025-12-18T06:19:07.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å­—èŠ‚è·³åŠ¨æ•°æ®å¹³å°"/> <meta itemprop="url" content="https://juejin.cn/user/2159881542179624"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            6000å­—æŠ€æœ¯å‘æ‹†è§£ â€œå¤§æ™“æœºå™¨äººâ€æºæ‰‹ç«å±±å¼•æ“å¤šæ¨¡æ€æ•°æ®æ¹–æ¢ç´¢è§†é¢‘å¤„ç†æ–°è·¯å¾„
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2159881542179624/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å­—èŠ‚è·³åŠ¨æ•°æ®å¹³å°
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-18T06:19:07.000Z" title="Thu Dec 18 2025 06:19:07 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-18
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»19åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¼•è¨€</h2>
<p>å›½å†…å…·èº«æ™ºèƒ½é¢†åŸŸåˆè¿æ¥é‡ç£…æ¶ˆæ¯ã€‚</p>
<p>12æœˆ18æ—¥ï¼Œâ€œå¤§æ™“æœºå™¨äººâ€æ­£å¼äº®ç›¸ï¼Œä½œä¸ºè¡Œä¸šçº§â€œå…·èº«è¶…çº§å¤§è„‘â€ï¼Œâ€œå¤§æ™“æœºå™¨äººâ€å°†ä»¥å…¨æ–°ç ”å‘èŒƒå¼ã€å…¨æ–°æ•°æ®é‡‡é›†èŒƒå¼ï¼Œä»¥åŠæ€§èƒ½é¢†å…ˆå…¨çƒçš„â€œå¼€æ‚Ÿâ€ä¸–ç•Œæ¨¡å‹3.0ï¼ˆKairos 3.0ï¼‰ï¼Œç²¾å‡†å‰–æå¹¶å“åº”å½“å‰é˜¶æ®µè¡Œä¸šåœ¨æŠ€æœ¯çªç ´å’Œå•†ä¸šè½åœ°çš„åŒé‡è¯‰æ±‚ï¼Œå°†å‰æ²¿æŠ€æœ¯è½¬åŒ–ä¸ºå¯è½åœ°ã€å¯å¤ç”¨çš„è§£å†³æ–¹æ¡ˆã€‚</p>
<p>åŒæ­¥å‘å¸ƒçš„è¿˜æœ‰â€œå…·èº«è¶…çº§å¤§è„‘æ¨¡ç»„A1â€ï¼Œé€šè¿‡æ­è½½é¦–åˆ›çº¯è§†è§‰æ— å›¾ç«¯åˆ°ç«¯VLAå…·èº«æ™ºèƒ½æ¨¡å‹ï¼Œè®©å…·èº«æ™ºèƒ½æ‘†è„±äº†é¢„å…ˆåœ°å›¾é‡‡é›†çš„ä¾èµ–ï¼Œèƒ½å¤Ÿå¿«é€Ÿé€‚åº”å¤æ‚çš„é™Œç”Ÿç¯å¢ƒâ€”â€”åŸºäºè¿™é¡¹èƒ½åŠ›ï¼Œâ€œå¤§æ™“æœºå™¨äººâ€å°†ä¸å›½å†…é¢†å…ˆçš„æ™ºèƒ½ä¼ä¸šè¾¾æˆæˆ˜ç•¥åˆä½œï¼Œåœ¨å®‰é˜²ã€å·¡æ£€ç­‰å·¥ä¸šåœºæ™¯ç‡å…ˆéƒ¨ç½²æœºå™¨ç‹—ã€‚</p>
<p>â€œå¤§æ™“æœºå™¨äººâ€å°†å‰æ²¿é«˜æ–°æŠ€æœ¯è½¬åŒ–ä¸ºå¯è¢«ä¼ä¸šã€è¡Œä¸šå¿«é€Ÿè½åœ°ä¸”æ˜“äº å¤ç”¨çš„é€šç”¨èƒ½åŠ›ï¼ŒåŠ©åŠ›ä¼ä¸šã€è¡Œä¸šåœ¨AIæ—¶ä»£æŒç»­ç¹è£ã€‚</p>
<p>åŒæ—¶ï¼Œâ€œå¤§æ™“æœºå™¨äººâ€ä¹Ÿä»¥ç§¯ææ€åº¦æ‹¥æŠ±è¡Œä¸šåˆä½œï¼Œä¸ç«å±±å¼•æ“å¼€å±•è”åˆæ¢ç´¢ï¼Œè¿›ä¸€æ­¥æå‡åœ¨å¤§æ¨¡å‹é¢†åŸŸçš„åˆ›æ–°åŠ›ï¼šå¦‚ç»“åˆäº†ç«å±±å¼•æ“å¤šæ¨¡æ€æ•°æ®æ¹–è§£å†³æ–¹æ¡ˆçš„å¼€æ‚Ÿä¸–ç•Œæ¨¡å‹3.0ï¼Œå¯ä»¥æœ‰æ•ˆè§£å†³ä¼ ç»Ÿå•æœºå¤šè„šæœ¬æ¨¡å¼çš„é“¾è·¯åˆ†æ•£ã€I/Oè´Ÿè½½é‡ã€èµ„æºåˆ©ç”¨ç‡ä½ã€ç¨³å®šæ€§å·®ã€æ‰©å±•ä¸è¶³ç­‰é—®é¢˜ã€‚</p>
<p>æœ¬æ–‡å°†æ ¸å¿ƒæ¢è®¨â€œå¤§æ™“æœºå™¨äººâ€ä¸ç«å±±å¼•æ“ï¼Œèšç„¦åƒä¸‡å°æ—¶çº§çš„è§†é¢‘æ•°æ®å¤„ç†åœºæ™¯ï¼Œå¦‚ä½•é€šè¿‡å¤šæ¨¡æ€æ•°æ®æ¹–è§£å†³æ–¹æ¡ˆä¸­çš„LAS AIæ•°æ®æ¹–äº§å“ï¼Œè·‘é€šæœ€ä½³å®è·µå…¨é“¾è·¯ï¼Œå®ç°å¼€å‘æŠ•å…¥ä¾§å’Œèµ„æºåˆ©ç”¨ä¾§çš„åŒé‡ææ•ˆã€‚</p>
<h2 data-id="heading-1">èƒŒæ™¯</h2>
<p>å›¾ç‰‡éšç€å…·èº«æ™ºèƒ½çš„è¿›ä¸€æ­¥å‘å±•ï¼Œè§†é¢‘æ•°æ®æ­£åœ¨è¿›å…¥â€œåƒä¸‡å°æ—¶â€æ—¶ä»£ï¼Œè€Œæ•°æ®å¤„ç†è§„æ¨¡çš„å˜å¤§å¸¦æ¥æ˜¯å¤„ç†æ¡†æ¶çš„å‡çº§ã€‚</p>
<p>ä»¥å…·èº«æ™ºèƒ½æœºå™¨ç‹—çš„å·¥ä¸šå·¡æ£€åœºæ™¯ä¸ºä¾‹ï¼Œä¸€å°æœºå™¨ç‹—é€šå¸¸æ­è½½å¤šè·¯å…¨æ™¯æ‘„åƒå¤´ä¸æ·±åº¦ç›¸æœºï¼Œåœ¨æŒç»­æ‰§è¡Œå·¡æ£€ä»»åŠ¡æ—¶ï¼Œå•å¤©äº§ç”Ÿçš„è§†é¢‘æ•°æ®é‡å³å¯è¾¾åˆ°æ•°ç™¾GBã€‚åœ¨è§„æ¨¡åŒ–éƒ¨ç½²æœºå™¨ç‹—é›†ç¾¤çš„èƒŒæ™¯ä¸‹ï¼Œæ¯æœˆç§¯ç´¯çš„è§†é¢‘æ•°æ®ç”šè‡³èƒ½çªç ´åƒä¸‡å°æ—¶ã€‚</p>
<p>é¢å¯¹å¦‚æ­¤æµ·é‡çš„æ•°æ®ï¼Œä¼ ç»Ÿå•æœºã€è„šæœ¬å¼çš„å¤„ç†æµç¨‹å·²ç»éš¾ä»¥ä¸ºç»§ï¼Œåƒä¸‡å°æ—¶è§†é¢‘ä¸æ˜¯â€œå¤šåŠ å‡ å°æœºå™¨â€å°±èƒ½å¤„ç†å¥½çš„é—®é¢˜ã€‚</p>
<p>é‚£å¦‚ä½•åœ¨ä¿è¯ç¨³å®šæ€§ã€å¯æ‰©å±•æ€§çš„å‰æä¸‹ï¼Œé«˜æ•ˆå¤„ç†åƒä¸‡å°æ—¶çš„è§†é¢‘æ•°æ®ï¼Ÿåœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬åˆ†äº«å¦‚ä½•åˆ©ç”¨Daft@ç«å±±å¼•æ“AIæ•°æ®æ¹–-Las æ­å»ºå¤§è§„æ¨¡çš„åˆ†å¸ƒå¼è§†é¢‘å¤„ç† Pipelineã€‚</p>
<h2 data-id="heading-2">LAS AI æ•°æ®æ¹–</h2>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a13de838537345e8a119016abd802ca4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2X6IqC6Lez5Yqo5pWw5o2u5bmz5Y-w:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766643547&amp;x-signature=oQDuahdIvfJ3GTARMqBrWIfaTnw%3D" alt="" loading="lazy"/></p>
<p>LAS AI æ•°æ®æ¹–äº§å“æ˜¯ç«å±±å¼•æ“ä¸ºä¼ä¸šé€‚åº”AI Agentæ—¶ä»£æ¨å‡ºçš„æ–°ä¸€ä»£å¤šæ¨¡æ€åœºæ™¯è§£å†³æ–¹æ¡ˆï¼Œå­µåŒ–äºå­—èŠ‚è·³åŠ¨å¤§æ¨¡å‹è®­ç»ƒåœºæ™¯ï¼Œé¢å‘å¤šæ¨¡æ€æ•°æ®åœºæ™¯ï¼Œæä¾›æ¹–å­˜å‚¨ã€æ¹–ç®¡ç†ã€æ¹–è®¡ç®—ä¸‰å¤§èƒ½åŠ›ã€é€šè¿‡â€œæ¹–å­˜å‚¨Lance+æ¹–è®¡ç®—Daftâ€ä¸ºæ ¸å¿ƒè¦ç´ ï¼Œé’ˆå¯¹æ€§è§£å†³è§†é¢‘ã€å›¾ç‰‡ç­‰éç»“æ„åŒ–æ•°æ®å¤„ç†çš„ç—›ç‚¹ã€‚</p>
<h2 data-id="heading-3">ä¸šåŠ¡åœºæ™¯</h2>
<p>ä»¥å…¸å‹ã€å…·èº«åœºæ™¯ã€‘çš„è§†é¢‘å¤„ç†é“¾è·¯å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c4b0fe63550a4583823c361532de176c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2X6IqC6Lez5Yqo5pWw5o2u5bmz5Y-w:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766643547&amp;x-signature=xTQI8YXcpjG%2B5qjSyYSuxJz2%2FN4%3D" alt="" loading="lazy"/></p>
<p>è¿™æ˜¯ä¸€æ¡å…¸å‹çš„å¤šé˜¶æ®µè§†é¢‘ ETL å¤„ç†é“¾è·¯ï¼Œæ¯ä¸ªç¯èŠ‚éƒ½ä¼´éšç€å¼‚æ„èµ„æºä½¿ç”¨ã€I/O å‹åŠ›ä¸æ•°æ®ä¾èµ–ã€‚</p>
<h2 data-id="heading-4">æ¶æ„å‡çº§</h2>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5f6d755010174863829e00222c79bfec~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2X6IqC6Lez5Yqo5pWw5o2u5bmz5Y-w:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766643547&amp;x-signature=%2BREZKg%2F0EPO0NVx3eK3lIShrIhg%3D" alt="" loading="lazy"/></p>
<p>å‡çº§å‰åçš„æ”¶ç›Šå¯¹æ¯”</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/38654ee2964b4516b635c79911cccae3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2X6IqC6Lez5Yqo5pWw5o2u5bmz5Y-w:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766643547&amp;x-signature=ei9hhtUYrYhDS%2FpX1EMfYUFU%2BH4%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-5">å®ç°ç»†èŠ‚</h2>
<p>å›¾ç‰‡åœ¨å†å²æ–¹æ¡ˆä¸­ï¼Œå•æœºå¤šè„šæœ¬é€šè¿‡ä¸­é—´æ–‡ä»¶è¡”æ¥çš„æ–¹å¼ï¼Œç“¶é¢ˆæ˜æ˜¾ï¼š</p>
<p>é“¾è·¯åˆ†æ•£ï¼šåˆ†é•œã€è§†é¢‘è§£ç &amp;æŠ½å¸§ã€è¿‡æ»¤ã€captionç”Ÿäº§ç­‰æ­¥éª¤å¾€å¾€ç”±ä¸åŒè„šæœ¬å®ç°ï¼Œéš¾ä»¥ç»Ÿä¸€ç®¡ç†</p>
<p>I/O è´Ÿè½½æ²‰é‡ï¼šæ¯ä¸ªæ­¥éª¤éƒ½å¯èƒ½äº§ç”Ÿå¤§é‡ä¸­é—´æ–‡ä»¶ï¼ˆä¸´æ—¶è§†é¢‘ã€å¸§å›¾åƒã€æ—¥å¿—ç­‰ï¼‰ï¼Œç£ç›˜ä¸ç½‘ç»œç»å¸¸æˆä¸ºç“¶é¢ˆ</p>
<p>èµ„æºåˆ©ç”¨ç‡å·®ï¼šè„šæœ¬é€šå¸¸æ˜¯å•è§†é¢‘ä¸²è¡Œå¤„ç†ï¼Œå¾ˆéš¾å……åˆ†åˆ©ç”¨å¤šæ ¸æˆ–å¤šæœºèµ„æºï¼Œæ›´æ— æ³•çµæ´»æŒ‰éœ€åˆ†é…èµ„æº</p>
<p>ç¨³å®šæ€§å·®ï¼šæ­¥éª¤ä¹‹é—´ç¼ºä¹æ˜ç¡®çš„ä¾èµ–ç®¡ç†æœºåˆ¶ï¼Œä¸€æ—¦æŸä¸€ç¯å‡ºç°å¼‚å¸¸ï¼Œæ•´ä¸ª Pipeline å¯èƒ½æ— æ³•æ¢å¤</p>
<p>éš¾ä»¥æ‰©å±•ï¼šå½“æ•°æ®è§„æ¨¡ä»â€œå‡ ç™¾å°æ—¶â€çªç„¶å¢é•¿åˆ°â€œå‡ ä¸‡ã€å‡ åä¸‡å°æ—¶â€æ—¶ï¼Œé“¾è·¯é€šå¸¸è¦è¢«â€œæ¨å€’é‡æ¥â€</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/01e76700163a4d0e8702b22f44ee8412~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2X6IqC6Lez5Yqo5pWw5o2u5bmz5Y-w:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766643547&amp;x-signature=puL3ERdA4u3Vdcy%2FJN7v7ORQrRk%3D" alt="" loading="lazy"/></p>
<p>è€Œæˆ‘ä»¬åŸºäºLAS AIæ•°æ®æ¹–äº§å“ä¸­å†…ç½®çš„è®¡ç®—æ¡†æ¶Daftï¼Œå°†æ•´ä¸ªæµç¨‹ç»Ÿä¸€æŠ½è±¡ä¸ºä¸€æ¡ DataFrame è®¡ç®—é“¾è·¯ï¼Œé…åˆ Ray ç­‰æ‰§è¡Œåç«¯å®ç° æ‰¹é‡å¹¶è¡Œã€èµ„æºå……åˆ†åˆ©ç”¨çš„æ‰§è¡Œæ–¹å¼ï¼Œæ—¢ä¿ç•™äº† Python å†™æ³•çš„çµæ´»æ€§ï¼Œåˆå…¼é¡¾äº†å·¥ç¨‹ä¸Šçš„å¯æ‰©å±•æ€§ã€‚</p>
<ul>
<li>ä»TOSè¯»å–åƒä¸‡å°æ—¶çš„è§†é¢‘æ•°æ®</li>
<li>ä½¿ç”¨PySceneDetectåšåœºæ™¯æ£€æµ‹ï¼Œå†ä½¿ç”¨FFmpegåšè§†é¢‘åˆ†å‰²ï¼Œå¾—åˆ°åˆ†é•œåè§†é¢‘ç‰‡æ®µ</li>
<li>å¯¹æ¯ä¸ªè§†é¢‘ç‰‡æ®µåšè§£ç å’ŒæŠ½å¸§ï¼Œå¾—åˆ°å¯ä»¥ç›´æ¥è¾“å…¥æ¨¡å‹çš„clipæ•°æ®</li>
<li>è°ƒç”¨æ¨¡å‹å¯¹è§†é¢‘åšæ¨¡ç³Šåº¦ã€ç¾å­¦ç­‰æ‰“åˆ†ï¼Œè¿‡æ»¤ä¸ç¬¦åˆæ¡ä»¶çš„è§†é¢‘</li>
<li>å¯¹è¿‡æ»¤åçš„è§†é¢‘ï¼Œè°ƒç”¨VLMç”ŸæˆCaption</li>
</ul>
<h2 data-id="heading-6">å‡†å¤‡å·¥ä½œ</h2>
<p>å®‰è£…ä¾èµ–åŒ…</p>
<pre><code class="hljs language-arduino" lang="arduino">pip install <span class="hljs-string">"daft[ray]"</span> scenedetect torch torchvision ray PIL transformers vllm qwen_vl_utils
</code></pre>
<h2 data-id="heading-7">æ­¥éª¤1ï¼šè§†é¢‘åˆ†é•œ</h2>
<h3 data-id="heading-8">åœºæ™¯æ£€æµ‹</h3>
<p>åœ¨å…·èº«æ™ºèƒ½æœºå™¨ç‹—çš„å·¥ä¸šå·¡æ£€åœºæ™¯ä¸­ï¼ŒåŸå§‹è§†é¢‘é€šå¸¸æ˜¯é•¿æ—¶é—´è¿ç»­å½•åˆ¶çš„ï¼Œå…¶ä¸­åŒ…å«å¤§é‡è¯­ä¹‰ä¸åŒçš„ç‰‡æ®µï¼šä¾‹å¦‚æ£€æŸ¥ç®¡é“é˜€é—¨çŠ¶æ€ã€ç»è¿‡è½¦é—´èµ°å»Šã€ä¸Šä¸‹æ¥¼æ¢¯ã€è¯†åˆ«è®¾å¤‡æŒ‡ç¤ºç¯å¼‚å¸¸ã€é‡åˆ°åœ°é¢éšœç¢ç‰©ï¼ˆå¦‚å·¥å…·ç®±ï¼‰ã€é€šè¿‡ç‹­çª„é€šé“ç­‰ã€‚</p>
<p>ä¸ºäº†è®©åç»­çš„æŠ½å¸§ã€æ»¤æ³¢ã€Caption ç­‰å¤„ç†æ›´åŠ å‡†ç¡®å’Œé«˜æ•ˆï¼Œæˆ‘ä»¬é¦–å…ˆå¯¹è§†é¢‘è¿›è¡Œ åœºæ™¯æ£€æµ‹ï¼ˆShot Detectionï¼‰ï¼Œå°†é•¿è§†é¢‘åˆ’åˆ†æˆè‹¥å¹²è¯­ä¹‰ç›¸å¯¹å®Œæ•´çš„åˆ†é•œç‰‡æ®µã€‚</p>
<p>æˆ‘ä»¬ä½¿ç”¨ PySceneDetect å¯¹è§†é¢‘å†…å®¹å˜åŒ–è¿›è¡Œæ£€æµ‹ï¼Œå®ƒé€šè¿‡ä»¥ä¸‹æ–¹å¼æ¥åˆ¤æ–­åœºæ™¯åˆ‡æ¢çš„ä½ç½®ï¼š</p>
<p>äº®åº¦ç›´æ–¹å›¾å˜æ¢</p>
<p>é€å¸§å†…å®¹å·®å¼‚ï¼ˆContent Differenceï¼‰</p>
<p>é˜ˆå€¼è·³å˜ï¼ˆThreshold Detectorï¼‰</p>
<p>é€šè¿‡è¯†åˆ«è¿™äº›è¾¹ç•Œï¼Œæˆ‘ä»¬èƒ½å¤Ÿå°†åŸå§‹è§†é¢‘ç²¾å‡†åˆ‡å‰²æˆå¤šä¸ªåˆ†é•œï¼ˆSceneï¼‰ã€‚æ¯ä¸ªåˆ†é•œéƒ½æ›´çŸ­ã€æ›´ç‹¬ç«‹ï¼Œä¹Ÿæ›´é€‚åˆä½œä¸ºåç»­æ¨¡å‹çš„è¾“å…¥å•å…ƒã€‚</p>
<pre><code class="hljs language-scss" lang="scss">def <span class="hljs-built_in">detect_scenes</span>(self, video_path):
    # æ£€æµ‹åœºæ™¯
    video = <span class="hljs-built_in">open_video</span>(video_path)
    scene_manager.<span class="hljs-built_in">detect_scenes</span>(video)
    scenes = []
    for start, end in scene_manager.<span class="hljs-built_in">get_scene_list</span>():
        scenes.<span class="hljs-built_in">append</span>((start.<span class="hljs-built_in">get_seconds</span>(), end.<span class="hljs-built_in">get_seconds</span>())
    return scenes
</code></pre>
<h3 data-id="heading-9">è¿‡æ»¤è¿‡çŸ­ç‰‡æ®µ</h3>
<p>åœ¨å®Œæˆåœºæ™¯æ£€æµ‹åï¼Œæˆ‘ä»¬ä¼šå¯¹æ£€æµ‹åˆ°çš„åˆ†é•œè¿›è¡Œä¸€æ¬¡è´¨é‡è¿‡æ»¤ï¼Œä¸¢å¼ƒæ—¶é•¿ä¸è¶³ 4 ç§’çš„ç‰‡æ®µã€‚ ä¹‹æ‰€ä»¥è¿›è¡Œè¿™ä¸€æ­¥ï¼Œæ˜¯å› ä¸ºè¿‡çŸ­çš„åœºæ™¯å¾€å¾€å­˜åœ¨ä»¥ä¸‹é—®é¢˜ï¼š</p>
<ul>
<li>å†…å®¹ä¸ç¨³å®šï¼šå¯èƒ½æ˜¯ç¬æ—¶æ›å…‰å˜åŒ–ã€æŠ–åŠ¨ã€çŸ­æš‚é®æŒ¡å¯¼è‡´çš„è¯¯æ£€</li>
<li>è¯­ä¹‰ä¸å®Œæ•´ï¼šä¸è¶³ä»¥å½¢æˆä¸€ä¸ªå¯ç†è§£çš„è§†é¢‘è¯­ä¹‰å•å…ƒ</li>
<li>æ¨¡å‹è¾“å…¥è´¨é‡å·®ï¼šæŠ½å¸§æ•°é‡ä¸è¶³ä¼šå½±å“æ¨¡ç³Šåº¦åˆ¤å®šã€ç¾å­¦è¯„ä¼°ã€Caption æ•ˆæœ</li>
<li>ä¼šé™ä½ Pipeline ååï¼šå¤§é‡çŸ­åœºæ™¯ä¼šå¯¼è‡´é¢‘ç¹çš„è§£ç ä¸ FFmpeg è°ƒç”¨ï¼Œåè€Œå¢åŠ  overhead</li>
</ul>
<p>å› æ­¤ï¼ŒåŸºäºç»éªŒä¸å®éªŒï¼Œæˆ‘ä»¬é€‰æ‹©å°† æ—¶é•¿å°äº 4 ç§’çš„åœºæ™¯è¿‡æ»¤æ‰ï¼Œåªä¿ç•™å…·æœ‰å®Œæ•´è¯­ä¹‰ä¸è¶³å¤Ÿå¸§æ•°çš„æœ‰æ•ˆç‰‡æ®µï¼Œä½¿åç»­å¤„ç†æ›´åŠ ç¨³å®šã€å¯æ§ï¼Œä¹Ÿèƒ½æ˜¾è‘—æå‡æ¨¡å‹æ¨ç†è´¨é‡ã€‚</p>
<h3 data-id="heading-10">åœºæ™¯åˆ‡åˆ†</h3>
<p>åœ¨å®Œæˆ PySceneDetect çš„åœºæ™¯æ£€æµ‹åï¼Œæˆ‘ä»¬ä¼šå¾—åˆ°æ¯ä¸ªåˆ†é•œçš„èµ·æ­¢æ—¶é—´ï¼ˆtimecodeï¼‰ã€‚æ¥ä¸‹æ¥ï¼Œéœ€è¦æ ¹æ®è¿™äº›æ—¶é—´æ®µå°†åŸå§‹è§†é¢‘æ‹†åˆ†æˆå¤šä¸ªç‹¬ç«‹çš„ clipã€‚</p>
<p>è¿™ä¸€æ­¥æˆ‘ä»¬ä½¿ç”¨ FFmpeg è¿›è¡Œåˆ‡åˆ†ï¼Œå®ƒçš„ä¼˜åŠ¿æ˜¯ï¼š</p>
<ul>
<li>åˆ‡åˆ†ç²¾å‡†ï¼šå¯æŒ‰ç²¾ç¡®æ—¶é—´æˆ³ï¼ˆ-ss / -toï¼‰æˆªå–ç‰‡æ®µ</li>
<li>æ— æŸå¤„ç†ï¼šé€šè¿‡ -c:v copy ç›´æ¥æ‹·è´è§†é¢‘æµï¼Œæ— éœ€é‡æ–°ç¼–ç </li>
<li>é€Ÿåº¦æå¿«ï¼šI/O é€Ÿåº¦è¿œå¤§äºç¼–ç é€Ÿåº¦ï¼Œå‡ ä¹å¯ä»¥çº¿æ€§æ‰©å±•åˆ°å¤šè¿›ç¨‹</li>
<li>ç¨³å®šå¯é ï¼šFFmpeg å¯¹å„ç§ç¼–ç æ ¼å¼ï¼ˆH264/H265/MPEG4ï¼‰å…¼å®¹æ€§æœ€å¥½</li>
</ul>
<p>åˆ‡åˆ†åçš„æ¯ä¸ª clip éƒ½æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„è§†é¢‘æ–‡ä»¶ï¼Œå…·æœ‰æ¸…æ™°çš„è¯­ä¹‰è¾¹ç•Œï¼Œä¹Ÿæˆä¸ºåç»­â€œè§£ç æŠ½å¸§ â†’ è´¨é‡è¿‡æ»¤ â†’ Captionâ€çš„åŸºç¡€è¾“å…¥å•å…ƒã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">_split_and_save_scene</span>(<span class="hljs-params">self, scene, video_path, output_dir</span>):
    cmd = [
        <span class="hljs-string">"ffmpeg"</span>,
        <span class="hljs-string">"-loglevel"</span>, <span class="hljs-string">"error"</span>,
        <span class="hljs-string">"-ss"</span>, <span class="hljs-built_in">str</span>(start_sec),
        <span class="hljs-string">"-to"</span>, <span class="hljs-built_in">str</span>(end_sec),
        <span class="hljs-string">"-i"</span>, video_path,
        <span class="hljs-string">"-c"</span>, <span class="hljs-string">"copy"</span>,
        clip_path
    ]
    
    <span class="hljs-keyword">return</span> clip_path
</code></pre>
<h3 data-id="heading-11">Daft Explode å¢å¤§å¹¶å‘ç²’åº¦</h3>
<p>ä¸€ä¸ªé•¿è§†é¢‘åœ¨ç»è¿‡åœºæ™¯æ£€æµ‹åå¾€å¾€ä¼šè¢«åˆ‡åˆ†æˆå¤šä¸ªåœºæ™¯ç‰‡æ®µã€‚ä¸ºæå‡æ•´ä½“ååä¸èµ„æºåˆ©ç”¨ç‡ï¼Œæˆ‘ä»¬å°†â€œåœºæ™¯æ£€æµ‹â€å’Œâ€œè§†é¢‘åˆ‡åˆ†â€æ‹†åˆ†ä¸ºä¸¤ä¸ªç‹¬ç«‹çš„ UDFã€‚</p>
<p>åœ¨åœºæ™¯æ£€æµ‹é˜¶æ®µï¼Œæˆ‘ä»¬å°†åŸå§‹çš„è§†é¢‘çº§æ•°æ®å±•å¼€ä¸ºåœºæ™¯ç‰‡æ®µçº§çš„æ•°æ®ï¼Œä½¿æ¯ä¸ªåœºæ™¯ç‰‡æ®µéƒ½æˆä¸ºç‹¬ç«‹çš„æ•°æ®è¡Œã€‚éšåï¼Œå€ŸåŠ© Daft çš„åˆ†å¸ƒå¼ä»»åŠ¡è°ƒåº¦å’Œå¹¶å‘æ‰§è¡Œèƒ½åŠ›ï¼Œå®ç°å¤§è§„æ¨¡çš„å¹¶è¡Œè§†é¢‘åˆ‡åˆ†æ“ä½œã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b782d950721c42ee9f2cd10c0098567f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2X6IqC6Lez5Yqo5pWw5o2u5bmz5Y-w:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766643547&amp;x-signature=I0SKmHDS9qIfAbAyHkebNEbISoA%3D" alt="" loading="lazy"/><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2223947b6e944e19a6480978a3740c5b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2X6IqC6Lez5Yqo5pWw5o2u5bmz5Y-w:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766643547&amp;x-signature=Lisns0lFpbbwUFJx7%2BAi54xtTnw%3D" alt="" loading="lazy"/></p>
<p>å›¾ç‰‡è¿™ç§è®¾è®¡èƒ½å¤Ÿå……åˆ†åˆ©ç”¨å¤šæ ¸ CPU çš„å¹¶è¡Œèƒ½åŠ›ï¼Œæ˜¾è‘—æå‡é•¿è§†é¢‘å¤„ç†æ•ˆç‡ï¼ŒåŒæ—¶é¿å…å› ä¸ªåˆ«è¶…é•¿è§†é¢‘å¯¼è‡´çš„æ•°æ®å€¾æ–œé—®é¢˜ï¼Œä»è€Œç¡®ä¿æ•´ä½“ä½œä¸šåœ¨å¤§è§„æ¨¡æ•°æ®é›†ä¸Šä¹Ÿèƒ½ä¿æŒç¨³å®šçš„å¤„ç†æ€§èƒ½ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> daft

<span class="hljs-meta">@daft.udf(<span class="hljs-params">return_dtype=daft.DataType.<span class="hljs-built_in">list</span>(<span class="hljs-params">daft.DataType.<span class="hljs-built_in">list</span>(<span class="hljs-params">daft.DataType.float64(<span class="hljs-params"/>)</span>)</span>)</span>)</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">SceneDetectionUDF</span>:
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init</span>(<span class="hljs-params">self, min_duration=<span class="hljs-number">4</span></span>):
        self.min_duration = min_duration

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__call__</span>(<span class="hljs-params">self, video_path_series</span>):
        results = []
        video_paths = video_path_series.to_pylist()
        <span class="hljs-keyword">for</span> video_path <span class="hljs-keyword">in</span> video_paths:
            scenes = self.detect_scenes(video_path)
            scenes = self.filter_scenes(scenes, self.min_duration)
            results.append(scenes)
        <span class="hljs-keyword">return</span> results
</code></pre>

<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> daft

<span class="hljs-meta">@daft.udf(<span class="hljs-params">return_dtype=daft.DataType.string(<span class="hljs-params"/>)</span>)</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">VideoSplitUDF</span>:
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, output_dir: <span class="hljs-built_in">str</span></span>):
        self.output_dir = output_dir
        os.makedirs(output_dir, exist_ok=<span class="hljs-literal">True</span>)

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__call__</span>(<span class="hljs-params">self, video_path_series, scene_series</span>):
        results = []
        <span class="hljs-keyword">for</span> video_path, scene <span class="hljs-keyword">in</span> <span class="hljs-built_in">zip</span>(video_path_series.to_pylist(), scene_series.to_pylist()):
            <span class="hljs-comment"># é•œå¤´åˆ‡åˆ†</span>
            clip_path = self._split_and_save_scene(video_path, scene, self.output_dir)
            results.append(clip_path)
        <span class="hljs-keyword">return</span> results
</code></pre>
<h2 data-id="heading-12">æ­¥éª¤2:è§†é¢‘æ»¤æ³¢</h2>
<p>åœ¨å®Œæˆè§†é¢‘åˆ†é•œä¹‹åï¼Œæˆ‘ä»¬å·²ç»å°†é•¿æ—¶é—´è¿ç»­å½•åˆ¶çš„è§†é¢‘æ‹†åˆ†ä¸ºç»“æ„æ›´æ¸…æ™°ã€è¯­ä¹‰æ›´åŠ ç‹¬ç«‹çš„ clipã€‚ç„¶è€Œï¼Œå…·èº«åœºæ™¯ä¸­æµ·é‡çš„åŸå§‹è§†é¢‘ä»ç„¶å­˜åœ¨å¤§é‡æ— æ•ˆæˆ–è´¨é‡è¾ƒå·®çš„ç‰‡æ®µï¼Œä¾‹å¦‚ï¼š</p>
<ul>
<li>æ¨¡ç³ŠæŠ–åŠ¨å¯¼è‡´çš„ä¸å¯ç”¨ç”»é¢</li>
<li>å¼ºå…‰/é€†å…‰é€ æˆçš„è¿‡æ›ã€æ¬ æ›</li>
<li>æ— ä¸»ä½“çš„ç©ºæ™¯ï¼ˆç©ºè¡çš„è½¦é—´èµ°å»Šã€æ— äººå€¼å®ˆçš„è®¾å¤‡å¾…æœºåŒºåŸŸã€æœªæ”¾ç½®ä»»ä½•ç‰©å“çš„ç©ºæ—·ä»“åº“é€šé“ï¼‰</li>
<li>ç”»è´¨æä½ã€å™ªç‚¹ä¸¥é‡çš„ç‰‡æ®µ</li>
<li>åœºæ™¯è¿‡æš—æˆ–å®Œå…¨é»‘å±</li>
</ul>
<p>å¦‚æœå°†è¿™äº›ä½è´¨é‡æ•°æ®ç›´æ¥é€å…¥åç»­æ¨¡å‹ï¼ˆä¾‹å¦‚ Captionã€åœºæ™¯ç†è§£æˆ–è®­ç»ƒæ•°æ®é›†ï¼‰ï¼Œä¸ä»…ä¼šæµªè´¹å¤§é‡ GPU èµ„æºï¼Œä¹Ÿä¼šå½±å“æ¨¡å‹è¡¨ç°ã€‚å› æ­¤ï¼Œåœ¨å¤§è§„æ¨¡è§†é¢‘å¤„ç† Pipeline ä¸­ï¼Œâ€œè§†é¢‘æ»¤æ³¢â€æ˜¯ç¡®ä¿æ•°æ®è´¨é‡çš„å…³é”®æ­¥éª¤ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/21c87f1f5f4b46e1adf38233b223ac9f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2X6IqC6Lez5Yqo5pWw5o2u5bmz5Y-w:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766643547&amp;x-signature=5hCJAYWbJXoDTbp4tm4UaV27lZA%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-13">å›¾ç‰‡è§£ç æŠ½å¸§</h3>
<p>åœ¨å¯¹è§†é¢‘è¾“å…¥æ¨¡å‹è¿›è¡Œæ¨ç†ä¹‹å‰ï¼Œæˆ‘ä»¬é¦–å…ˆéœ€è¦å°†è§†é¢‘å†…å®¹ä»å‹ç¼©ç¼–ç æ ¼å¼è½¬æ¢ä¸ºå¯ä¾›æ¨¡å‹å¤„ç†çš„å›¾ç‰‡å¸§ã€‚ è¿™ä¸€æ­¥ç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼šè§£ç ï¼ˆDecodeï¼‰å’ŒæŠ½å¸§ï¼ˆSamplingï¼‰ï¼Œæ˜¯æ•´ä¸ªè§†é¢‘å¤„ç†æœ€å…³é”®çš„åŸºç¡€æ“ä½œã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> daft

<span class="hljs-meta">@daft.udf(<span class="hljs-params">return_dtype=daft.DataType.struct(<span class="hljs-params">{
    <span class="hljs-string">"clip_path"</span>: daft.DataType.string(<span class="hljs-params"/>),
    <span class="hljs-string">"frame_paths"</span>: daft.DataType.<span class="hljs-built_in">list</span>(<span class="hljs-params">daft.DataType.string(<span class="hljs-params"/>)</span>)
}</span>), num_cpus=<span class="hljs-number">10</span>, concurrency=<span class="hljs-number">100</span></span>)</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">FrameSamplerUDF</span>:
    <span class="hljs-string">"""
    å¸§é‡‡æ ·UDF, ä»è§†é¢‘clipä¸­é‡‡æ ·å¸§å¹¶ä¿å­˜
    """</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, max_frames: <span class="hljs-built_in">int</span> = <span class="hljs-number">8</span>, output_dir: <span class="hljs-built_in">str</span> = <span class="hljs-string">"./frames"</span></span>):
        self.max_frames = max_frames
        self.output_dir = output_dir
        os.makedirs(output_dir, exist_ok=<span class="hljs-literal">True</span>)

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__call__</span>(<span class="hljs-params">self, clip_path_series</span>):
        results = []
        <span class="hljs-keyword">for</span> clip_path <span class="hljs-keyword">in</span> clip_path_series.to_pylist():
            <span class="hljs-comment"># é‡‡æ ·å¸§</span>
            frame_paths = self._sample_frames(clip_path)
            results.append({<span class="hljs-string">"clip_path"</span>: clip_path,<span class="hljs-string">"frame_paths"</span>: frame_paths})
        <span class="hljs-keyword">return</span> results
</code></pre>
<h3 data-id="heading-14">è§†é¢‘æ‰“åˆ†&amp;è¿‡æ»¤</h3>
<p>åœ¨å®Œæˆâ€œè§£ç æŠ½å¸§â€åï¼Œæˆ‘ä»¬ä¼šå¾—åˆ° clip çš„ä¸€ç³»åˆ—ä»£è¡¨æ€§å¸§ã€‚æ¥ä¸‹æ¥ï¼Œéœ€è¦åˆ©ç”¨æ¨¡å‹å¯¹è¿™äº›å¸§è¿›è¡Œè´¨é‡è¯„ä¼°ï¼Œä»¥åˆ¤æ–­è¯¥è§†é¢‘ç‰‡æ®µæ˜¯å¦å€¼å¾—è¿›å…¥åç»­é«˜æˆæœ¬çš„ Caption æˆ–è®­ç»ƒæ•°æ®æ„å»ºé˜¶æ®µã€‚</p>
<p>è¿™ä¸€ç¯èŠ‚å°±æ˜¯ è§†é¢‘æ»¤æ³¢çš„æ ¸å¿ƒ â€”â€” åŸºäºæ¨¡å‹çš„è´¨é‡è¯„åˆ†ï¼ˆScoringï¼‰ä¸è¿‡æ»¤ï¼ˆFilteringï¼‰ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> daft

<span class="hljs-meta">@daft.udf(<span class="hljs-params">return_dtype=daft.DataType.struct(<span class="hljs-params">{<span class="hljs-string">"clip_path"</span>: daft.DataType.string(<span class="hljs-params"/>), <span class="hljs-string">"passed"</span>: daft.DataType.<span class="hljs-built_in">bool</span>(<span class="hljs-params"/>), <span class="hljs-string">"scores"</span>: daft.DataType.python(<span class="hljs-params"/>)}</span>), num_gpus=<span class="hljs-number">0.2</span>, num_cpus=<span class="hljs-number">10</span>, concurrency=<span class="hljs-number">200</span></span>)</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">FrameFilterUDF</span>:
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, target_size: <span class="hljs-built_in">tuple</span> = (<span class="hljs-params"><span class="hljs-number">320</span>, <span class="hljs-number">320</span></span>), threshold: <span class="hljs-built_in">float</span> = <span class="hljs-number">100.0</span></span>):
        ...
        <span class="hljs-comment"># åŠ è½½æ¨¡å‹</span>
        self.model = self._load_model()
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__call__</span>(<span class="hljs-params">self, frames_data_series</span>):
        results = []
        <span class="hljs-keyword">for</span> frames_data <span class="hljs-keyword">in</span> frames_data_series.to_pylist():
            result = self._score_predict(frame_data)
            results.append(result)
        <span class="hljs-keyword">return</span> results
</code></pre>
<h2 data-id="heading-15">æ­¥éª¤3ï¼šè§†é¢‘ç†è§£&amp;Caption</h2>
<p>å›¾ç‰‡åœ¨ç»å†ã€Œåˆ†é•œ â†’ è§£ç æŠ½å¸§ â†’ è´¨é‡è¿‡æ»¤ã€ä¹‹åï¼Œæˆ‘ä»¬æœ€ç»ˆä¿ç•™ä¸‹æ¥çš„ clip éƒ½æ˜¯ è¯­ä¹‰ç¨³å®šã€ç”»è´¨åˆæ ¼ã€å¯è¯»æ€§å¼ºçš„é«˜è´¨é‡è§†é¢‘ç‰‡æ®µã€‚è¿™äº›ç‰‡æ®µå°†è¿›å…¥æ•´ä¸ª Pipeline çš„ç¬¬ä¸‰ä¸ªæ ¸å¿ƒé˜¶æ®µï¼šè§†é¢‘ç†è§£ä¸ Caption ç”Ÿæˆã€‚</p>
<p>Caption ç”Ÿæˆçš„ç›®æ ‡ï¼Œæ˜¯è®©æ¨¡å‹èƒ½å¤Ÿè‡ªåŠ¨ä¸ºæ¯ä¸ªè§†é¢‘ç‰‡æ®µç”Ÿæˆä¸€æ®µè‡ªç„¶è¯­è¨€æè¿°ï¼Œä½¿è§†é¢‘ä»â€œæœªç»“æ„åŒ–è§†è§‰æ•°æ®â€å˜æˆâ€œå¯æ£€ç´¢ã€å¯ç´¢å¼•ã€å¯è®­ç»ƒçš„è¯­ä¹‰æ•°æ®â€ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cd6c45bcf95942e68a85a70b1d609d1f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2X6IqC6Lez5Yqo5pWw5o2u5bmz5Y-w:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766643547&amp;x-signature=eXRqQedeD%2BcRhXgw9RL%2F9g42h%2B0%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-16">Captionå¼ºåŒ–</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> daft

<span class="hljs-meta">@daft.udf(<span class="hljs-params">return_dtype=daft.DataType.string(<span class="hljs-params"/>), num_gpus=<span class="hljs-number">1</span>, num_cpus=<span class="hljs-number">20</span>, concurrency=<span class="hljs-number">800</span></span>)</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">VideoCaptionUDF</span>:
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, model_path</span>):
        self.model = self._load_caption_model(model_path)
        self.prompt = <span class="hljs-string">"""åŸºäºä¸Šè¿°ç†è§£ï¼Œç”¨ä¸€æ®µç®€æ´è‡ªç„¶çš„è¯­è¨€æè¿°å½“å‰è§†é¢‘åœºæ™¯ã€‚ä¸è¦åŠ å…¥æ— æ³•ä»è§†é¢‘åˆ¤æ–­çš„å†…å®¹ã€‚è¯·å…ˆç†è§£è§†é¢‘ç‰‡æ®µçš„å…·èº«æ™ºèƒ½å·¡æ£€åœºæ™¯ï¼Œå†ç”Ÿæˆä¸€æ®µå®¢è§‚å‡†ç¡®çš„è¯´æ˜ã€‚åˆ†æå†…å®¹åŒ…æ‹¬ï¼š
  - ç¯å¢ƒç±»å‹ä¸ç»“æ„ï¼ˆå¦‚è½¦é—´/ä»“åº“/ç®¡é“åŒºã€ç©ºé—´ç»“æ„æ˜¯å¦ä¸ºç‹­çª„é€šé“/æ¥¼æ¢¯ã€è®¾æ–½å¸ƒå±€ï¼‰
  - å‘¨å›´å¯¹è±¡ï¼ˆè®¾å¤‡ã€éšœç¢ç‰©ã€ç¯å¢ƒå…ƒç´ ï¼‰çš„ç›¸å¯¹ä½ç½®å’ŒçŠ¶æ€ï¼ˆå¦‚é˜€é—¨å¼€å…³çŠ¶æ€ã€æŒ‡ç¤ºç¯é¢œè‰²ã€åœ°é¢æ‚ç‰©ä½ç½®ï¼‰
  - å…³é”®æ ‡è¯†ä¸å¼‚å¸¸ï¼ˆå¦‚è®¾å¤‡çŠ¶æ€æ ‡è¯†ã€å®‰å…¨è­¦ç¤ºæ ‡è¯†ã€è®¾æ–½å¼‚å¸¸æƒ…å†µï¼‰
  - ç¯å¢ƒæ¡ä»¶ï¼ˆå…‰ç…§ã€åœ°é¢çŠ¶å†µã€ç©ºé—´çº¦æŸï¼‰
  - é‡è¦åŠ¨æ€å˜åŒ–æˆ–æ½œåœ¨é£é™©ï¼ˆå¦‚è®¾å¤‡çŠ¶æ€å˜åŒ–ã€æ–°å‡ºç°çš„éšœç¢ç‰©ã€æœºå™¨ç‹—è‡ªèº«å§¿æ€å˜åŒ–ï¼‰
åŸºäºä¸Šè¿°ç†è§£ï¼Œç”¨ä¸€æ®µç®€æ´è‡ªç„¶çš„è¯­è¨€æè¿°å½“å‰è§†é¢‘åœºæ™¯ã€‚ä¸è¦åŠ å…¥æ— æ³•ä»è§†é¢‘åˆ¤æ–­çš„å†…å®¹ã€‚"""</span>
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__call__</span>(<span class="hljs-params">self, frames_data_series</span>):
        frames_data_list = frames_data_series.to_pylist()

        <span class="hljs-keyword">for</span> frame_data <span class="hljs-keyword">in</span> frames_data_list:
            <span class="hljs-comment"># ç”Ÿæˆæè¿°</span>
            caption = self._generate_caption(frame_data)
            results.append(caption)
        <span class="hljs-keyword">return</span> results
</code></pre>
<h2 data-id="heading-17">æ­¥éª¤4ï¼šDaftçš„Pipelineæµå¼è°ƒåº¦</h2>
<p>å›¾ç‰‡åœ¨å‰é¢çš„ä¸‰ä¸ªæ­¥éª¤ï¼ˆåˆ†é•œã€æ»¤æ³¢ã€Captionï¼‰ä¸­ï¼Œæˆ‘ä»¬å·²ç»æ‹†è§£äº†åƒä¸‡å°æ—¶è§†é¢‘å¤„ç†çš„ä¸‰ä¸ªå…³é”®èƒ½åŠ›ã€‚ä½†çœŸæ­£è®©æ•´ä¸ªç³»ç»Ÿå…·å¤‡â€œå·¥ç¨‹è½åœ°èƒ½åŠ›â€çš„ï¼Œæ˜¯æœ€åä¸€æ­¥ â€”â€” é€šè¿‡ Daft on Ray å°†æ‰€æœ‰æ­¥éª¤ä¸²è”æˆä¸€æ¡é«˜ååã€å¯æ‰©å±•çš„æµå¼å¤„ç† Pipelineã€‚</p>
<ul>
<li>åˆå§‹åŒ–Ray Cluster</li>
<li>é…ç½® Daft ä½¿ç”¨ Ray ä½œä¸ºæ‰§è¡Œå¼•æ“</li>
</ul>

<pre><code class="hljs language-ini" lang="ini">import daft

def main():
    """å®Œæ•´è§†é¢‘å¤„ç†Pipeline"""  
    daft.context.set_runner_ray()
    
    <span class="hljs-comment"># ä»TOSæ‰«æ.mp4è§†é¢‘æ–‡ä»¶</span>
    <span class="hljs-attr">io_config</span> = IOConfig(s3=S3Config(...))
    <span class="hljs-attr">s3_path</span> = <span class="hljs-string">"s3://bucket/test_path/**/*.mp4"</span>
    <span class="hljs-attr">output_s3_path</span> = <span class="hljs-string">"s3://bucket/output/parquet/"</span>
    <span class="hljs-attr">df</span> = daft.from_glob_path(s3_path, io_config=io_config).select(<span class="hljs-string">'path'</span>).with_column_renamed(<span class="hljs-string">'path'</span>, <span class="hljs-string">'video_path'</span>)
    <span class="hljs-comment"># æ­¥éª¤1: åœºæ™¯æ£€æµ‹</span>
    <span class="hljs-attr">df</span> = df.with_column(<span class="hljs-string">"scene_list"</span>, scene_detect_udf(col(<span class="hljs-string">"video_path"</span>)))
    <span class="hljs-comment"># å°†æ•°æ®ä»è§†é¢‘ç»´åº¦å±•å¼€åˆ°é•œå¤´ç»´åº¦</span>
    <span class="hljs-attr">df</span> = df.explode(col(<span class="hljs-string">"scene_list"</span>))
    <span class="hljs-attr">df</span> = df.with_column(<span class="hljs-string">"clip_path"</span>, video_split_udf(col(<span class="hljs-string">"video_path"</span>), col(<span class="hljs-string">"scene_list"</span>))) <span class="hljs-comment"># æ­¥éª¤2ï¼šè§†é¢‘åˆ‡åˆ†</span>
    <span class="hljs-attr">df</span> = df.with_column(<span class="hljs-string">"frames"</span>, frame_sampler_udf(col(<span class="hljs-string">"clip_path"</span>))) <span class="hljs-comment"># æ­¥éª¤3: å¸§é‡‡æ ·</span>
    <span class="hljs-attr">df</span> = df.with_column(<span class="hljs-string">"filtered"</span>, frame_filter_udf(col(<span class="hljs-string">"frames"</span>))) <span class="hljs-comment"># æ­¥éª¤4: è§†é¢‘æ»¤æ³¢</span>
    <span class="hljs-attr">df</span> = df.with_column(<span class="hljs-string">"caption"</span>, caption_udf(col(<span class="hljs-string">'frames'</span>))) <span class="hljs-comment"># æ­¥éª¤5: è§†é¢‘æè¿°ç”Ÿæˆ</span>
    <span class="hljs-comment"># ç»“æœä¿å­˜åˆ°parquetï¼Œä¸Šä¼ åˆ°TOS</span>
    df.write_parquet(output_s3_path, <span class="hljs-attr">io_config</span>=io_config)
</code></pre>
<h2 data-id="heading-18">æ­¥éª¤5ï¼šGPUä»»åŠ¡çš„Checkpoint</h2>
<p>å›¾ç‰‡åœ¨å¤§è§„æ¨¡åˆ†å¸ƒå¼è§†é¢‘å¤„ç†åœºæ™¯ä¸­ï¼Œå•æ¬¡ Pipeline è¿è¡Œå¾€å¾€æŒç»­æ•°å¤©ç”šè‡³æ•°å‘¨ï¼›é“¾è·¯ä¸­åŒ…å«å¤§é‡ GPU æ¨ç†ã€è§†é¢‘è§£ç ä¸åˆ†å¸ƒå¼å†™å…¥æ“ä½œï¼Œè¿è¡Œæ—¶é—´æœ¬èº«å³å…·æœ‰ é•¿å‘¨æœŸã€é˜¶æ®µæ€§ç´¯ç§¯ çš„ç‰¹ç‚¹ã€‚åŒæ—¶ï¼Œå·¥ç¨‹ä¸­ä¸å¯é¿å…ä¼šå‡ºç°ä»¥ä¸‹æƒ…å†µï¼š</p>
<ul>
<li>è¿è¡Œæ—¶é—´è¿‡é•¿ï¼Œéœ€è¦äººå·¥â€œæš‚åœ / æ ¡å‡† / è°ƒå‚â€</li>
<li>ä¸­é€”éœ€è¦è¿›è¡Œé›†ç¾¤æ‰©å®¹ / ç¼©å®¹ / å‡çº§</li>
<li>æ¨¡å‹ç‰ˆæœ¬å˜æ›´ï¼Œéœ€è¦ä»æŸä¸ª stage é‡æ–°å¼€å§‹</li>
<li>è°ƒåº¦ç­–ç•¥éœ€è¦åŠ¨æ€è°ƒæ•´ï¼ˆbatch sizeã€å¹¶è¡Œåº¦ã€concurrencyï¼‰</li>
<li>èµ„æºæˆæœ¬è¿‡é«˜ï¼Œéœ€è¦ä¸­æ–­ä»¥åˆ‡æ¢åˆ°ä½å³°æ—¶æ®µè¿è¡Œ</li>
</ul>
<p>å› æ­¤ï¼Œè¯¥ç³»ç»Ÿçš„ Pipeline å¿…é¡»å…·å¤‡ å¯æ§ä¸­æ–­ â†’ å¯æ¢å¤æ‰§è¡Œ çš„èƒ½åŠ›ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬åŸºäºParquet append-only è®¾è®¡äº†Checkpoint æœºåˆ¶ï¼Œå¹¶åœ¨æ¯ä¸ªé˜¶æ®µå¯åŠ¨æ—¶é€šè¿‡ Anti Join è‡ªåŠ¨è¿‡æ»¤å·²å®Œæˆä»»åŠ¡ã€‚</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-function">def <span class="hljs-title">generate_resume_result_daft</span>(<span class="hljs-params">input_df, processed_df, join_key</span>):
    <span class="hljs-keyword">if</span> processed_df <span class="hljs-keyword">is</span> None:
        <span class="hljs-keyword">return</span> input_df
    
    <span class="hljs-keyword">if</span> join_key <span class="hljs-keyword">is</span> None:
        <span class="hljs-keyword">return</span> input_df
    
    processed_df</span> = processed_df.<span class="hljs-keyword">select</span>(join_key).distinct()
    filtered_df = input_df.<span class="hljs-keyword">join</span>(processed_df, <span class="hljs-keyword">on</span>=join_key, how=<span class="hljs-string">'anti'</span>)
    <span class="hljs-keyword">return</span> filtered_df
</code></pre>
<h2 data-id="heading-19">Daftä¼˜åŒ–å®è·µ</h2>
<h3 data-id="heading-20">å®è·µ1ï¼šCPUä½¿ç”¨è¶…100%çš„æƒ…å†µï¼ŒDaftä¸ºä½•è¿˜èƒ½åŠ é€Ÿ</h3>
<p>å‰æœŸåœ¨ä½¿ç”¨è§†é¢‘åˆ†é•œåœºæ™¯ä¸­CPUåˆ©ç”¨ç‡å·²ç»åˆ°äº†100%ï¼Œä½†æ˜¯é›†æˆäº†Daftä¹‹åç«¯åˆ°ç«¯çš„å¤„ç†ä¾ç„¶æ”¶è·äº†20%çš„æ”¶ç›Šã€‚</p>
<p>è¿™é‡Œä¸»è¦çš„åŸå› æ˜¯ OMP_NUM_THREADS ç¯å¢ƒå˜é‡çš„éš”ç¦»å¸¦æ¥çš„å½±å“</p>
<p>åœ¨å¤„ç†æˆ–è€…æ¨ç†è¿‡ç¨‹ä¸­ï¼Œç»å¸¸ä¼šç”¨åˆ°Pytorch æˆ–è€…Numpyçš„åº“ï¼Œå†…ç½®ä¼šç”¨OMP_NUM_THREADSæ¥æ§åˆ¶çº¿ç¨‹æ± çš„å¤§å°ï¼Œå¦‚æœæ²¡æœ‰æ˜¾ç¤ºæ§åˆ¶è¯¥ç¯å¢ƒå˜é‡ï¼Œé»˜è®¤æ¯ä¸ªè¿›ç¨‹éƒ½ä¼šåˆ©ç”¨èŠ‚ç‚¹ä¸Šçš„æ‰€æœ‰çš„coresï¼Œä¼šå¸¦æ¥èµ„æºäº‰æŠ¢ï¼Œå¸¦æ¥çº¿ç¨‹ä¸Šä¸‹æ–‡åˆ‡æ¢æˆæœ¬æ¯”è¾ƒé«˜</p>
<p>æ‰€ä»¥è¿™é‡Œè®¾ç½®çš„num_cpusçš„ä¸ºä¸€ä¸ªåˆç†å€¼å°±æ˜¾å¾—æ¯”è¾ƒé‡è¦</p>
<p>å¦‚æœ actor å†…éƒ¨ä½¿ç”¨å¤šçº¿ç¨‹åº“ï¼ˆå¦‚ numpyã€PyTorchï¼‰ï¼šé…ç½® num_cpus=30 ä¼šè®©è¿™äº›åº“ä½¿ç”¨æ›´å¤šçº¿ç¨‹ï¼ˆOMP_NUM_THREADS=30ï¼‰ï¼Œå¯èƒ½æé«˜å•ä¸ª actor çš„æ€§èƒ½ï¼Œä½†ä¹Ÿå¯èƒ½å¯¼è‡´çº¿ç¨‹ç«äº‰ã€‚</p>
<p>å¦‚æœ actor æ˜¯å•çº¿ç¨‹æˆ– I/O å¯†é›†å‹ï¼šé…ç½® num_cpus=1 æˆ– num_cpus=10 å¯¹å®é™…æ€§èƒ½å½±å“ä¸å¤§ï¼Œä½† num_cpus=1 å¯ä»¥è®©æ›´å¤š actor å¹¶å‘è¿è¡Œï¼Œæé«˜æ•´ä½“ååé‡ã€‚</p>
<h3 data-id="heading-21">å®è·µ2ï¼šè§†é¢‘ç±»å‹å¦‚ä½•èƒ½å¤Ÿåšåˆ°ZeroCopy</h3>
<p>Daftä½¿ç”¨çš„Arrowç±»å‹ä½œä¸ºç®—å­é—´çš„ä¼ é€’å½¢å¼ï¼ŒArrowå¯ä»¥å®ç°ZeroCopyèƒ½åŠ›ï¼Œå‡å°‘æ•°æ®åœ¨ä¸åŒç®—å­ä¹‹é—´çš„ä¼ é€’æˆæœ¬ï¼Œä½†æ˜¯Arrowåªæ˜¯æ”¯æŒå›ºå®šç±»å‹çš„Typeï¼Œå¦‚æœæ˜¯ä¸€ä¸ªPythonçš„å¤æ‚ç±»å‹è¿˜æ˜¯éœ€è¦é¢ä¸´ç€æ‹·è´ï¼Œæ‰€ä»¥åœ¨è¿™é‡Œå°†è§†é¢‘çš„æ•°æ®å†…å®¹è½¬æ¢ä¸ºäº†Tensorç±»å‹ï¼ŒTensorç±»å‹æ˜¯åŸç”Ÿå¯æ”¯æŒçš„Arrowç±»å‹ï¼ˆå‰ææ˜¯sizeæ¯”è¾ƒå°çš„è§†é¢‘æˆ–è€…å›¾ç‰‡ï¼‰</p>
<p>Noteï¼šè¿™é‡Œæœ‰ä¸ªTradeoffï¼Œå¦‚æœæ˜¯æ¯”è¾ƒå°è§†é¢‘ï¼Œå¦‚æœæƒ³è¾¾æˆåŒä¸€ä¸ªè§†é¢‘ä¼šåŒæ—¶è¢«å¤šä¸ªæ•°æ®æµç®—å­å¤„ç†ï¼Œåˆ™éœ€è¦è¢«æ˜¾ç¤ºçš„æ‹·è´åˆ°ä¸åŒçš„ç®—å­ä¸­ï¼Œå°½é‡å¢å¤§å¤„ç†å¹¶å‘ï¼Œ å¦‚æœæ˜¯å¤§è§†é¢‘ï¼Œåˆ™å°½é‡å°†ç®—å­Fusionï¼Œç„¶åå‡å°‘è§†é¢‘çš„å¤šæ¬¡æ‹·è´</p>
<h3 data-id="heading-22">å®è·µ3ï¼šåœ¨Daftåœºæ™¯ä¸­å¦‚ä½•å¢å¤§åå</h3>
<p>Daftæ‰§è¡Œä¾§åœ¨ç®—å­é—´ä¼ é€’æ•°æ®æ—¶æ”¯æŒæœ‰åºå’Œæ— åºä¸¤ç§</p>
<p>æ— åºæ›´æœ‰åˆ©äºé«˜ååçš„åœºæ™¯ï¼Œä¾‹å¦‚æ•°æ®å¤„ç†åŒæ—¶å†™å›æŸä¸ªæ•°æ®æºä¸­ã€‚</p>
<p>æœ‰åºåˆ™ä¼šå‘ç”Ÿåœ¨showè¿™ç§å°æ•°æ®é‡æ•°æ®æ¢æŸ¥çš„ åœºæ™¯ä»¥åŠæœ¬èº«ç®—å­è¦æ±‚æœ‰åºçš„åœºæ™¯ä¾‹å¦‚ TopNï¼ŒOrderç­‰ç®—å­</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9434178ad9a4495d97504f9a6b2715a2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2X6IqC6Lez5Yqo5pWw5o2u5bmz5Y-w:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766643547&amp;x-signature=gyqKCQmpogQm4wSv5bvt9oy36C0%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-23">å®è·µ4ï¼šè§†é¢‘åˆ†é•œæ­¥éª¤çš„åˆ†å¸ƒå¼åŠ é€Ÿ</h3>
<p>åœ¨åƒä¸‡å°æ—¶è§†é¢‘å¤„ç†ä¸­ï¼Œåˆ†é•œï¼ˆåœºæ™¯åˆ‡åˆ†ï¼‰ æ˜¯éå¸¸å…³é”®çš„å‰ç½®æ­¥éª¤ï¼Œä¼šç›´æ¥å½±å“åç»­è§£ç ã€æŠ½å¸§ã€è¿‡æ»¤ã€Caption çš„å¤„ç†æˆæœ¬ã€‚ä¸€ä¸ªé•¿è§†é¢‘å¾€å¾€æœ‰å¤šä¸ªåœºæ™¯ï¼Œéœ€è¦åˆ‡åˆ†ä¸ºå¤šä¸ªè§†é¢‘ç‰‡æ®µï¼Œå•è¿›ç¨‹ä¸²è¡Œå¤„ç†ä¼šæˆä¸ºæ•´ä¸ª Pipeline çš„ç¬¬ä¸€é“æ€§èƒ½ç“¶é¢ˆã€‚åœ¨å¤§è§„æ¨¡æ•°æ®ä¸‹ï¼Œå¤„ç†é€Ÿåº¦ä¼šè¿…é€Ÿè·Œå…¥ä¸å¯æ¥å—çš„èŒƒå›´ã€‚</p>
<p>ä¸ºæå‡æ•´ä½“ååï¼Œæˆ‘ä»¬å°†åˆ†é•œæµç¨‹æ‹†åˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µï¼Œå¹¶é€šè¿‡ æ•°æ®æ‰“æ•£ï¼ˆDaftçš„explodeå‡½æ•°ï¼‰+ åˆ†å¸ƒå¼å¹¶å‘ å®ç°åŠ é€Ÿï¼š</p>
<p>åœ¨åœºæ™¯æ£€æµ‹é˜¶æ®µï¼Œæˆ‘ä»¬å°†åŸå§‹çš„è§†é¢‘çº§æ•°æ®å±•å¼€ä¸ºåœºæ™¯ç‰‡æ®µçº§çš„æ•°æ®ï¼Œä½¿æ¯ä¸ªåœºæ™¯ç‰‡æ®µéƒ½æˆä¸ºç‹¬ç«‹çš„æ•°æ®è¡Œ</p>
<p>éšåï¼Œå€ŸåŠ© Daft çš„åˆ†å¸ƒå¼ä»»åŠ¡è°ƒåº¦å’Œå¹¶å‘æ‰§è¡Œèƒ½åŠ›ï¼Œå®ç°å¤§è§„æ¨¡çš„å¹¶è¡Œè§†é¢‘åˆ‡åˆ†æ“ä½œ</p>
<p>è¿™ç§æ¨¡å¼å°†å¤„ç†ç²’åº¦ä»â€œè§†é¢‘çº§â€æå‡åˆ°â€œåœºæ™¯çº§â€ï¼Œæœ‰æ•ˆæ¶ˆé™¤é•¿è§†é¢‘å¸¦æ¥çš„æ•°æ®å€¾æ–œé—®é¢˜ï¼Œä½¿åˆ‡åˆ†ååé‡éšå¯ç”¨ CPU æ ¸æ•°è¿‘ä¼¼çº¿æ€§å¢é•¿ï¼Œå¤§å¹…æå‡æ•´ä½“è§†é¢‘å¤„ç† Pipeline çš„æ€§èƒ½ä¸ç¨³å®šæ€§ã€‚</p>
<h3 data-id="heading-24">å®è·µ5ï¼šåŸºäºDaftè§£è€¦è§£ç /æŠ½å¸§ä¸ GPU æ¨ç†ï¼Œæ„å»ºå¼‚æ­¥æµæ°´çº¿æå‡GPUä½¿ç”¨ç‡</h3>
<p>åœ¨å¤§è§„æ¨¡è§†é¢‘å¤„ç†ä¸­ï¼Œä¸€ä¸ªå¸¸è§çš„æ€§èƒ½ç“¶é¢ˆæ¥è‡ªäº è§£ç /æŠ½å¸§ä¸ GPU æ¨ç†å¼ºè€¦åˆã€‚</p>
<p>å¦‚æœæŒ‰ç…§ä¼ ç»Ÿæ–¹å¼æ‰§è¡Œï¼š</p>
<ul>
<li>è§£ç ä¸€æ®µè§†é¢‘</li>
<li>æŠ½å¸§</li>
<li>æŠŠå¸§é€å…¥ GPU åšæ¨¡å‹æ¨ç†</li>
<li>å†è¿”å› CPU ç­‰ä¸‹ä¸€æ®µè§£ç </li>
</ul>
<p>è¿™å°†å¯¼è‡´ GPU å¾ˆé•¿æ—¶é—´å¤„äºâ€œç­‰å¾… CPU å‡†å¤‡æ•°æ®â€çŠ¶æ€ï¼Œè€Œä¸æ˜¯æŒç»­æ¨ç†ã€‚ åœ¨åƒä¸‡å°æ—¶è§†é¢‘è§„æ¨¡ä¸‹ï¼Œè¿™ç§ä¸²è¡Œæ–¹å¼ä¼šè®© GPU å®é™…åˆ©ç”¨ç‡è·Œåˆ° 20%â€“40%ï¼Œæå¤§æµªè´¹ç®—åŠ›èµ„æºã€‚</p>
<p>å› æ­¤ï¼Œæˆ‘ä»¬å°†è§£ç /æŠ½å¸§çš„ä»»åŠ¡å•ç‹¬æŠ½æˆä¸€ä¸ªUDFï¼Œä¸ä¸‹æ¸¸çš„æ»¤æ³¢å’ŒCaptionç”Ÿæˆçš„GPUæ¨ç†ä»»åŠ¡è§£è€¦å¼€ï¼Œé€šè¿‡Daftçš„æµå¼è°ƒåº¦èƒ½åŠ›ï¼Œæ¶ˆé™¤äº†ä¸²è¡Œåœºæ™¯ä¸‹ IO/CPUå¤„ç† ä¸ GPUæ¨ç† çš„ç­‰å¾…å…³ç³»ï¼Œä½¿å¾—GPUç®—å­èƒ½å¤Ÿæºæºä¸æ–­çš„è·å–æ•°æ®è¿›è¡Œæ¨ç†ã€‚</p>
<h2 data-id="heading-25">æœ€ç»ˆæ•ˆæœ</h2>
<p>å›¾ç‰‡ç»è¿‡ä»¥ä¸Šä¼˜åŒ–ï¼ŒCPUå’ŒGPUçš„èµ„æºä½¿ç”¨ç‡éƒ½æœ‰æ˜¾è‘—æå‡</p>
<p>CPU åˆ©ç”¨ç‡æ˜¾è‘—æå‡ï¼šç”±åŸå…ˆçš„ 40%~60% æ³¢åŠ¨çŠ¶æ€æå‡è‡³ ç¨³å®šæ»¡è½½ï¼ˆ100%ï¼‰è¿è¡Œ</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1ee6f4a2f98241e0b89d8165a1d98a04~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2X6IqC6Lez5Yqo5pWw5o2u5bmz5Y-w:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766643547&amp;x-signature=Ft3QI8wiaAnG3zoq2aU2snR7GkM%3D" alt="" loading="lazy"/><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/58a68dae633d4df3be14f3a8093f732f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2X6IqC6Lez5Yqo5pWw5o2u5bmz5Y-w:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766643547&amp;x-signature=3hU0TwbZ2UR4tnqbYJLbPYdruEE%3D" alt="" loading="lazy"/></p>
<p>GPU åˆ©ç”¨ç‡æ˜¾è‘—æå‡ï¼šç”±åŸå…ˆå› ç­‰å¾… I/O è€Œé•¿æœŸå¤„äºä½è´Ÿè½½çŠ¶æ€ï¼Œæå‡è‡³ ç¨³å®š 90%+ çš„é«˜åˆ©ç”¨ç‡åŒºé—´</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c1aae8bc9e5f4451ac52833634a90e96~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2X6IqC6Lez5Yqo5pWw5o2u5bmz5Y-w:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766643547&amp;x-signature=dn9dp7dBrYKXWgS0K8BJ1PMExgA%3D" alt="" loading="lazy"/><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cb558c6cc0d44275a81b1822f92108fd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2X6IqC6Lez5Yqo5pWw5o2u5bmz5Y-w:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766643547&amp;x-signature=jZy7uqQQjxFV3ZLQosFMlJK6ajI%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-26">æ€»ç»“</h2>
<p>å›¾ç‰‡å›¾ç‰‡åœ¨æœ¬æ¬¡åˆä½œä¸­ï¼Œâ€œå¤§æ™“æœºå™¨äººâ€ä¾æ‰˜ä¸“ä¸šæŠ€æœ¯æ²‰æ·€ï¼Œä¸“æ³¨äºä¸–ç•Œæ¨¡å‹å·¥å…·é“¾çš„æ„å»ºä¸åº”ç”¨ï¼Œå…¶æŠ€æœ¯èŒƒå›´æ¶µç›–ç‰©ç†AIæ•°æ®é—­ç¯ã€ç”Ÿæˆå¼ä¸–ç•Œå¼•æ“åŠé—­ç¯ä»¿çœŸç­‰ç­‰ï¼›ç«å±±å¼•æ“å¤šæ¨¡æ€æ•°æ®æ¹–è§£å†³æ–¹æ¡ˆåˆ™åŸºäºLAS AIæ•°æ®æ¹–äº§å“ï¼Œå……åˆ†å‘æŒ¥åœ¨å¤šæ¨¡æ€æ•°æ®é¢„å¤„ç†é¢†åŸŸçš„ä¼˜åŠ¿ï¼Œä¸ºâ€œå¤§æ™“æœºå™¨äººâ€çš„æ•´ä¸ªç ”å‘ä½“ç³»æ„å»ºäº†åšå®çš„æŠ€æœ¯åŸºåº§ã€‚</p>
<p>é€šè¿‡â€œäº‘+æ¨¡å‹â€çš„æ·±åº¦ååŒï¼Œâ€œå¤§æ™“æœºå™¨äººâ€æºæ‰‹ç«å±±å¼•æ“å·²ç»è·‘é€šä¼ ç»Ÿè„šæœ¬å¼å¤„ç†åœ¨æ‰©å±•æ€§ã€ç¨³å®šæ€§ã€ååä¸Šçš„æ”»å…‹è·¯å¾„ï¼Œä¸ºä¼ä¸šå’Œè¡Œä¸šå¸¦æ¥é¢å‘æµ·é‡è§†é¢‘æ•°æ®çš„â€œé€šç”¨åŸºç¡€è®¾æ–½â€è§£å†³æ–¹æ¡ˆï¼Œå¸®åŠ©åŒ…æ‹¬å…·èº«æ™ºèƒ½ã€æ™ºèƒ½é©¾é©¶ç­‰åœ¨å†…çš„å¤šä¸ªæ¶‰åŠè§†é¢‘å¤„ç†çš„æŠ€æœ¯é¢†åŸŸï¼Œå®ç°ç ”å‘å’Œèµ„æºåŒé‡ææ•ˆã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Kiroå°åº”ç”¨å¼€å‘ï¼šè®¾è®¡å’Œå®ç°éšç§å·ç ]]></title>    <link>https://juejin.cn/post/7584759201072381993</link>    <guid>https://juejin.cn/post/7584759201072381993</guid>    <pubDate>2025-12-18T06:23:52.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7584759201072381993" data-draft-id="7584729714340577299" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Kiroå°åº”ç”¨å¼€å‘ï¼šè®¾è®¡å’Œå®ç°éšç§å·ç "/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-12-18T06:23:52.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="äºšé©¬é€Šäº‘å¼€å‘è€…"/> <meta itemprop="url" content="https://juejin.cn/user/2850395271209496"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Kiroå°åº”ç”¨å¼€å‘ï¼šè®¾è®¡å’Œå®ç°éšç§å·ç 
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2850395271209496/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    äºšé©¬é€Šäº‘å¼€å‘è€…
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-18T06:23:52.000Z" title="Thu Dec 18 2025 06:23:52 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-18
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    2
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»13åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å»å¹´ç¬”è€…æ›¾ç»è®¾è®¡è¿‡éšç§å·ç ã€éšç§é‚®ç®±ã€ç½‘å€çŸ­é“¾ä¸‰ä¸ªå°åº”ç”¨ï¼Œä½¿ç”¨äºšé©¬é€Šäº‘ç§‘æŠ€çš„Amazon Connectï¼ŒDynamoDBï¼ŒAmazon SESï¼ŒLambdaï¼ŒCloudFrontç­‰æœåŠ¡æ„å»ºã€‚åœ¨è®¾è®¡æ–¹æ¡ˆæ—¶ï¼Œæˆ‘æŸ¥æ‰¾äº†ä¸å°‘æ–‡æ¡£å’Œç½‘ä¸Šèµ„æ–™ï¼Œæ¥é€‰æ‹©åˆé€‚çš„æœåŠ¡ï¼Œå®Œå–„æ¶æ„ã€‚åœ¨å°†æ–¹æ¡ˆè®¾è®¡å¥½åï¼Œç”±ClaudeååŠ©å®ŒæˆLambdaä»£ç ï¼ˆå½“æ—¶æ˜¯Claude 3 Sonnetï¼‰ï¼Œå¹¶æ‰‹åŠ¨å®Œæˆå…¶å®ƒçš„æœåŠ¡çš„é…ç½®ã€‚æ–¹æ¡ˆä½¿ç”¨ä¸Šè¿°çš„ServerlessæœåŠ¡ï¼Œæœ‰æˆæœ¬å¯æ§å’Œè¿ç»´å‹åŠ›å°çš„ä¼˜ç‚¹ï¼Œåœ¨æŸä¸ªç”µå•†å®¢æˆ·éƒ¨ç½²åå¾—åˆ°å¥½è¯„ã€‚</p>
<p>åœ¨Kiroæ¨å‡ºåï¼Œå…¶Specsæ¨¡å¼ä»¤äººå°è±¡æ·±åˆ»ã€‚éœ€æ±‚åˆ†è§£ï¼Œæ–¹æ¡ˆè®¾è®¡ï¼Œç”šè‡³æ˜¯åº”ç”¨éƒ¨ç½²ï¼Œè¿™äº›åŸæ¥éœ€è¦äººæ¥ä¸»å¯¼çš„å·¥ä½œï¼Œç°åœ¨æ˜¯å¦å¯ä»¥ç”±Kiroæ¥å®Œæˆï¼Ÿè¿™é‡Œæˆ‘å°†ä½¿ç”¨Kiroæ¥é‡æ–°å¼€å‘éšç§å·ç é¡¹ç›®ï¼Œçœ‹çœ‹åœ¨SpecsåŠ æŒä¸‹èƒ½å¦å°†æ‰€æœ‰çš„å·¥ä½œéƒ½ç”±Kiroæ¥å®Œæˆã€‚</p>
<blockquote>
<p>ğŸ”¥ æƒ³åˆ©ç”¨ç”Ÿæˆå¼AIå¼€å‘å·¥å…·è§£æ”¾åŒæ‰‹ï¼Œå´è‹¦äºåº”ç”¨æ•ˆæœä¸å¤Ÿå®Œå–„ã€æµç¨‹ä¸å¤Ÿè§„èŒƒï¼Ÿ</p>
<p>âœ¨ äºšé©¬é€Šäº‘ç§‘æŠ€ Kiro ç™»åœºï¼é‡‡ç”¨â€œè§„èŒƒé©±åŠ¨â€å¼€å‘ç†å¿µï¼Œç»“åˆ Agent Hooks è‡ªåŠ¨åŒ–ç³»ç»Ÿï¼Œ1å°æ—¶è®©å°ç™½å˜èº«ç”Ÿäº§çº§æ¸¸æˆåˆ¶ä½œäººï¼</p>
<p>ğŸ”› é€Ÿæ¥äº‘ä¸Šæ¢ç´¢å®éªŒå®¤ï¼Œä½“éªŒ Kiro å¼€å‘ç‹¬ç«‹æ¸¸æˆï¼Œä»éœ€æ±‚åˆ°éƒ¨ç½²å…¨æŒæ¡ï¼</p>
<p>ğŸ‘‰ <a href="https://link.juejin.cn?target=https%3A%2F%2Fevents.amazoncloud.cn%2Flabs%2Fcloudlab-kiro-cloudgames-static-website%3Fvisitfrom%3D3P_Juejinhead_1218%26sc_medium%3Downed%26sc_campaign%3Dcloudlab%26sc_channel%3D3P_Juejinhead_1218" target="_blank" title="https://events.amazoncloud.cn/labs/cloudlab-kiro-cloudgames-static-website?visitfrom=3P_Juejinhead_1218&amp;sc_medium=owned&amp;sc_campaign=cloudlab&amp;sc_channel=3P_Juejinhead_1218" ref="nofollow noopener noreferrer">ç‚¹å‡»è¿™é‡Œ</a>ï¼Œå³åˆ»å¼€å¯ AI å¼€å‘ä¹‹æ—…ï¼</p>
</blockquote>
<h2 data-id="heading-0">1.ä»€ä¹ˆæ˜¯è™šæ‹Ÿå·ç ï¼Ÿ</h2>
<p>è™šæ‹Ÿå·ç ä½¿ç”¨å•ç‹¬åˆ›å»ºçš„å·ç æ¥ä»£æ›¿çœŸå®å·ç ï¼Œä¸ºç”¨æˆ·æä¾›ä¸€ä¸ªé¢å¤–çš„èº«ä»½ï¼Œèƒ½å¤Ÿæœ‰æ•ˆçš„ä¿æŠ¤çœŸå®è”ç³»ä¿¡æ¯ï¼š</p>
<ol>
<li>ä¿æŠ¤éšç§ï¼šåœ¨ä¸æš´éœ²ä¸ªäººçœŸå®è”ç³»æ–¹å¼çš„æƒ…å†µä¸‹ä¸ç¬¬ä¸‰æ–¹æ²Ÿé€šã€‚</li>
<li>èº«ä»½ç®¡ç†ï¼šä¸ºä¸åŒçš„èº«ä»½æˆ–æ´»åŠ¨ä½¿ç”¨ä¸åŒçš„è”ç³»æ–¹å¼ã€‚</li>
<li>å®‰å…¨æ€§ï¼šé™ä½ä¸ªäººä¿¡æ¯è¢«æ³„éœ²æˆ–æ»¥ç”¨çš„é£é™©ã€‚</li>
</ol>
<p>è™šæ‹Ÿå·ç å¯ä»¥æœ‰ä¸åŒçš„å½¢æ€ï¼š</p>
<ol>
<li>æ­£å¸¸æ™®é€šå·ç ï¼ˆä¸æ™®é€šå·ç ä¸€æ ·ï¼Œè¿è¥å•†é¢„ç•™çš„ä¸“ç”¨å·æ®µï¼‰ã€‚å½“å‘¼å«è¿™ä¸ªå·ç æ—¶ï¼Œè‡ªåŠ¨è½¬æ¥åˆ°ç»‘å®šçš„çœŸå®å·ç ã€‚è¿™ç§æ–¹å¼åœ¨ç½‘çº¦è½¦ã€å¤–å–ç­‰åœºæ™¯æœ‰å¹¿æ³›çš„ä½¿ç”¨ã€‚å› ä¸ºå·æ®µèµ„æºæ˜¯æœ‰é™çš„ï¼Œè¿™ç§è™šæ‹Ÿå·ç ä¸€èˆ¬æœ‰æ—¶æ•ˆé™åˆ¶ï¼Œåœ¨æœåŠ¡å®Œæˆåä¸€æ®µæ—¶é—´ä¼šè§£é™¤è¯¥è™šæ‹Ÿå·ç ä¸çœŸå®å·ç çš„ç»‘å®šã€‚</li>
<li>æŒ‡å®šå·ç å‘¼å«+è¾“å…¥çŸ­å·ï¼ˆåˆ†æœºå·ï¼‰ã€‚æŒ‡å®šå·ç æ˜¯æ­£å¸¸æ™®é€šå·ç ã€‚å½“å‘¼å«æŒ‡å®šå·ç åï¼Œä¼šè‡ªåŠ¨æ¥é€šå¹¶æ”¶åˆ°è¾“å…¥çŸ­å·/åˆ†æœºå·çš„æç¤ºï¼Œè¾“å…¥çŸ­å·åå†è½¬æ¥åˆ°çœŸå®çš„å·ç ã€‚è¿™ç§æ–¹å¼åªéœ€è¦å°‘é‡çš„æ™®é€šå·ç ï¼Œé€šè¿‡ç”Ÿæˆä¸åŒçš„çŸ­å·å…³è”åˆ°ä¸åŒçš„çœŸå®å·ç ï¼Œèƒ½å¤ŸæŒä¹…çš„ä½¿ç”¨æˆ–æ ¹æ®éœ€æ±‚è‡ªå®šä¹‰ä»»æ„çš„æœ‰æ•ˆæ—¶é—´ã€‚</li>
</ol>
<p>åœ¨æ¥ä¸‹æ¥çš„å†…å®¹ä¸­ï¼Œæˆ‘å°†æµ‹è¯•ç”±Kiroæ¥å®Œæˆæ•´ä¸ªçŸ­å·æ–¹æ¡ˆçš„éœ€æ±‚åˆ†è§£ã€æ–¹æ¡ˆè®¾è®¡ã€å¼€å‘ã€å’Œéƒ¨ç½²ã€‚</p>
<h2 data-id="heading-1">2.ä½“éªŒKiro SPECæ¨¡å¼çš„é­…åŠ›</h2>
<p>Kiroå…·ä½“çš„ä»‹ç»å¯ä»¥å‚è€ƒå®˜ç½‘ï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fkiro.dev%2F" target="_blank" title="https://kiro.dev/" ref="nofollow noopener noreferrer">kiro.dev/</a>ï¼‰ï¼Œå¦å¤–æ¨èç”±ç¤¾åŒºæ•´ç†çš„<strong>Book of Kiro</strong>ï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fkiro-community.github.io%2Fbook-of-kiro%2F" target="_blank" title="https://kiro-community.github.io/book-of-kiro/" ref="nofollow noopener noreferrer">kiro-community.github.io/book-of-kirâ€¦</a>ï¼‰ã€‚</p>
<p>è¿›å…¥Kiroåï¼Œä½¿ç”¨SPECæ¨¡å¼ï¼Œè¾“å…¥å¦‚ä¸‹éœ€æ±‚ï¼š</p>
<pre><code class="hljs">æˆ‘æƒ³è®¾è®¡ä¸€ä¸ªè™šæ‹Ÿå·ç åº”ç”¨ï¼Œå½“ç”¨æˆ·æ‹¨æ‰“æŸä¸ªå·ç æ—¶ï¼Œä¼šè‡ªåŠ¨æ’­æŠ¥æç¤ºç”¨æˆ·è¾“å…¥çŸ­å·ã€‚è¾“å…¥çŸ­å·åï¼Œè‡ªåŠ¨è½¬æ¥åˆ°æ¥å¬æ–¹çœŸå®çš„å·ç ã€‚ä½¿ç”¨AWSçš„æœåŠ¡è®¾è®¡ä¸€ä¸ªè§£å†³æ–¹æ¡ˆï¼Œå°½å¯èƒ½ä½¿ç”¨ServerlessæœåŠ¡ã€‚
</code></pre>
<p>Kiroå¼€å§‹æ–¹æ¡ˆçš„è®¾è®¡ï¼Œç”Ÿæˆéœ€æ±‚æ–‡æ¡£requirements.mdï¼Œé’ˆå¯¹éœ€æ±‚å®Œæˆè®¾è®¡æ–‡æ¡£design.mdã€‚åœ¨ç¡®è®¤è®¾è®¡æ–¹æ¡ˆæ— è¯¯åï¼Œè¿›ä¸€æ­¥çš„ç”Ÿæˆå®æ–½è®¡åˆ’æ–‡æ¡£tasks.mdã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b5a3ceb28c164eb5a2e30c95bc82a301~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766644201&amp;x-signature=kU4kLNu99uQFQIxB279V96sjK%2Fg%3D" alt="kiro-app-development-design-and-implement-private-number-1.png" loading="lazy"/></p>
<p align="center">å›¾1 SPECæ¨¡å¼ä»åˆ›å»ºè§„èŒƒéœ€æ±‚å¼€å§‹</p>
<p>åœ¨ç”Ÿæˆè¿™å‡ ä¸ªSPECæ¨¡å¼çš„æ–‡æ¡£æ—¶ï¼Œéœ€æ±‚çš„æ€»ç»“å’Œæ–¹æ¡ˆçš„è®¾è®¡è®©æˆ‘çœ¼å‰ä¸€äº®ï¼Œè¾“å‡ºçš„å·¥ä½œæµç¨‹å’Œmermaidæµç¨‹å›¾ä¸åŸå…ˆæˆ‘è®¾è®¡çš„æ–¹æ¡ˆæ€è·¯å®Œå…¨ä¸€è‡´ï¼Œå¹¶é¢å¤–æœ‰ä¸€äº›æ˜“ç”¨æ€§å’Œå¯ç»´æŠ¤æ€§çš„å¢å¼ºï¼š</p>
<ol>
<li>è€ƒè™‘äº†é€šè¯è®°å½•å­˜å‚¨ã€æ—¥å¿—è®°å½•åŠŸèƒ½ã€‚æ–¹ä¾¿æŸ¥è¯¢é€šè¯ç»Ÿè®¡å’Œå¼‚å¸¸äº‹ä»¶</li>
<li>è®¾è®¡äº†å¢/åˆ /æŸ¥/æ”¹APIæ¥å£</li>
</ol>
<p>åŸæ¥æ–¹æ¡ˆåœ¨æ·»åŠ çŸ­å·-çœŸå®å·ç çš„æ˜ å°„å…³ç³»æ—¶ï¼Œéœ€è¦å°†æ˜ å°„è®°å½•æ‰‹åŠ¨å¯¼å…¥åˆ°DynamoDBï¼Œåˆ æŸ¥æ”¹ç­‰åŠŸèƒ½ä¹Ÿæ˜¯ç›´æ¥åˆ°æ•°æ®åº“ä¸­æ“ä½œï¼Œåªé€‚åˆå¼€å‘äººå‘˜ä½¿ç”¨ã€‚è€ŒKiroçš„è®¾è®¡æ›´åƒä¸€ä¸ªå®Œæ•´çš„æ–¹ä¾¿æ˜“ç”¨çš„ç”Ÿäº§ç³»ç»Ÿï¼Œæ·»åŠ è¿™äº›è¿ç»´æ¥å£åï¼Œä»»åŠ¡äººå‘˜éƒ½å¯ä»¥é€šè¿‡Webç•Œé¢ç›´è§‚çš„ç»´æŠ¤ã€‚ç›¸å…³çš„è®°å½•å’Œæ—¥å¿—åŠŸèƒ½ï¼Œä¹Ÿä¸ºè¿›ä¸€æ­¥æ‹“å±•ä¸šåŠ¡åœºæ™¯æ‰“ä¸‹äº†åŸºç¡€ã€‚</p>
<p>Kiroè®¾è®¡æ–‡æ¡£æ¯”è¾ƒå®Œæ•´çš„ä»‹ç»äº†å·¥ä½œæµç¨‹å’Œæ¶æ„ï¼ŒèŠ‚é€‰éƒ¨åˆ†å†…å®¹å’ŒåŠ æ¶æ„å›¾å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-sql" lang="sql">è™šæ‹Ÿå·ç è·¯ç”±åº”ç”¨é‡‡ç”¨AWS Serverlessæ¶æ„ï¼Œä»¥Amazon <span class="hljs-keyword">Connect</span>ä¸ºæ ¸å¿ƒçš„ç”µè¯æœåŠ¡å¹³å°ï¼Œç»“åˆLambdaå‡½æ•°å¤„ç†ä¸šåŠ¡é€»è¾‘ï¼ŒDynamoDBå­˜å‚¨é…ç½®æ•°æ®ï¼Œå®ç°é«˜å¯ç”¨ã€è‡ªåŠ¨æ‰©å±•çš„ç”µè¯è½¬æ¥æœåŠ¡ã€‚

ç³»ç»Ÿçš„æ ¸å¿ƒå·¥ä½œæµç¨‹ï¼šç”¨æˆ·æ‹¨æ‰“è™šæ‹Ÿå·ç  â†’ <span class="hljs-keyword">Connect</span>æ¥å¬å¹¶æ’­æ”¾æç¤ºéŸ³ â†’ æ”¶é›†ç”¨æˆ·è¾“å…¥çš„çŸ­å· â†’ LambdaæŸ¥è¯¢æ˜ å°„å…³ç³» â†’ å‘èµ·è½¬æ¥åˆ°çœŸå®å·ç  â†’ å»ºç«‹é€šè¯æ¡¥æ¥ã€‚
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9259ea16d253434eb8f98db717c18d2b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766644201&amp;x-signature=dS2ohXlmoRpjB242iRW%2Bmwa82Lo%3D" alt="kiro-app-development-design-and-implement-private-number-2.png" loading="lazy"/></p>
<p align="center">å›¾2 è®¾è®¡æ–‡æ¡£åœ¨design.mdä¸­çš„æµç¨‹å›¾</p>
<p>Kiro SPECæ¨¡å¼é€šè¿‡Requirement-Design-Taskè¿™ä¸ªæµç¨‹ï¼Œåˆ©ç”¨AIå°†ä¸€å¥ç®€çŸ­çš„æ¨¡ç³Šéœ€æ±‚ï¼Œå˜æˆä¸€ä»½ç»“æ„æ¸…æ™°ã€æ¡ç†æ¸…æ¥šçš„è§„èŒƒæ–‡æ¡£ã€‚é€šè¿‡Requirementsæ˜ç¡®è¦åšä»€ä¹ˆï¼Œé€šè¿‡Designè§„åˆ’å¦‚ä½•å®ç°ï¼Œé€šè¿‡Implementationå°†æ•´ä¸ªé¡¹ç›®åˆ†è§£ä¸ºå¯æ‰§è¡Œçš„å¼€å‘ä»»åŠ¡ï¼ŒæŒ‡å¯¼LLMä¸åç¦»ä¸å¤±æ§ã€‚</p>
<p>åœ¨ç”Ÿæˆåˆå§‹Designè®¾è®¡æ–‡æ¡£åï¼Œæˆ‘æ·»åŠ äº†ä¸€ä¸ªâ€œæ”¯æŒCDKéƒ¨ç½²â€éœ€æ±‚ï¼ŒKiroæ›´æ–°äº†éœ€æ±‚æ–‡æ¡£å’Œè®¾è®¡æ–‡æ¡£ï¼Œä¹‹åè½¬åˆ°å®æ–½è®¡åˆ’é˜¶æ®µï¼Œç”Ÿæˆå¼€å‘ä»»åŠ¡</p>
<p>å®æ–½è®¡åˆ’å‡ºç‚‰åï¼ŒKiroæœ€ç»ˆçš„æ€»ç»“è¾“å‡ºèŠ‚é€‰å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown">å®Œç¾ï¼è™šæ‹Ÿå·ç è·¯ç”±åº”ç”¨çš„è§„æ ¼è¯´æ˜ç°åœ¨å·²ç»å®Œæˆã€‚æˆ‘ä»¬å·²ç»æˆåŠŸåˆ›å»ºäº†ï¼š

âœ… éœ€æ±‚æ–‡æ¡£ - åŒ…å«7ä¸ªè¯¦ç»†éœ€æ±‚ï¼Œæ¶µç›–è¯­éŸ³æç¤ºã€çŸ­å·è¾“å…¥ã€è‡ªåŠ¨è½¬æ¥ã€ç®¡ç†åŠŸèƒ½ã€ç›‘æ§æ—¥å¿—ã€å¯æ‰©å±•æ€§å’ŒCDKéƒ¨ç½²

âœ… è®¾è®¡æ–‡æ¡£ - å®Œæ•´çš„AWS Serverlessæ¶æ„è®¾è®¡ï¼ŒåŒ…æ‹¬Amazon Connectã€Lambdaã€DynamoDBã€API Gatewayå’ŒCloudWatchçš„é›†æˆæ–¹æ¡ˆ

âœ… å®æ–½è®¡åˆ’ - 15ä¸ªæ¸è¿›å¼å¼€å‘ä»»åŠ¡ï¼Œä»åŸºç¡€è®¾æ–½æ­å»ºåˆ°æœ€ç»ˆéƒ¨ç½²éªŒè¯

ç°åœ¨ä½ å¯ä»¥å¼€å§‹æ‰§è¡Œè¿™äº›ä»»åŠ¡äº†ã€‚ä½ å¯ä»¥ï¼š
<span class="hljs-bullet">1.</span>	æ‰“å¼€tasks.mdæ–‡ä»¶ï¼Œç‚¹å‡»ä»»åŠ¡æ—è¾¹çš„"Start task"æŒ‰é’®å¼€å§‹æ‰§è¡Œ
<span class="hljs-bullet">2.</span>	ä»ä»»åŠ¡1å¼€å§‹ï¼ŒæŒ‰é¡ºåºé€æ­¥å®ç°æ•´ä¸ªç³»ç»Ÿ
<span class="hljs-bullet">3.</span>	æ¯å®Œæˆä¸€ä¸ªä»»åŠ¡ï¼Œæˆ‘å»ºè®®å…ˆæµ‹è¯•éªŒè¯å†ç»§ç»­ä¸‹ä¸€ä¸ª

è¿™ä¸ªè§„æ ¼è¯´æ˜ä¸ºä½ æä¾›äº†ä¸€ä¸ªå®Œæ•´çš„ã€åŸºäºAWS ServerlessæœåŠ¡çš„è™šæ‹Ÿå·ç è·¯ç”±è§£å†³æ–¹æ¡ˆçš„å®ç°è·¯å¾„ã€‚æ•´ä¸ªç³»ç»Ÿå°†å…·å¤‡é«˜å¯ç”¨æ€§ã€è‡ªåŠ¨æ‰©å±•èƒ½åŠ›ï¼Œå¹¶ä¸”æ”¯æŒCDKè‡ªåŠ¨åŒ–éƒ¨ç½²ã€‚
</code></pre>
<p>åœ¨è¿›å…¥ä»»åŠ¡æ‰§è¡Œå‰ï¼Œæˆ‘è®©Kiro ç»“åˆSpecsä¸‰ä¸ªæ–‡æ¡£ï¼ˆrequirements.md, design.md, tasks.mdï¼‰ï¼Œæ›´æ–°äº†Steeringã€‚</p>
<h2 data-id="heading-2">3.å®Œå–„çš„ä¸Šä¸‹æ–‡ç®¡ç†Steering</h2>
<p>ç®€å•çš„ç†è§£Steeringï¼Œå°±æ˜¯æ¯ä¸ªTaskæ‰§è¡Œæ—¶éƒ½ä¼šæ³¨å…¥çš„ä¸Šä¸‹æ–‡å†…å®¹ã€‚ç»Ÿä¸€çš„ä¸Šä¸‹æ–‡ï¼Œèƒ½å¤Ÿæ§åˆ¶LLMåœ¨æ‰§è¡Œä¸åŒTaskå¼€å‘ä»»åŠ¡æ—¶å§‹ç»ˆéµå¾ªç›¸åŒçš„æ¨¡å¼ã€åº“å’Œæ ‡å‡†ã€‚</p>
<p>Streeringæ–‡ä»¶å¯ä»¥è‡ªå®šä¹‰æ‰‹åŠ¨åˆ›å»ºï¼Œåœ¨Kiroé¢æ¿ä¸­Steeringéƒ¨åˆ†åˆ›å»º.mdæ–‡ä»¶å³å¯ï¼Œä½¿ç”¨æ ‡å‡†çš„markdownè¯­æ³•ç¼–å†™ã€‚åœ¨æœ¬é¡¹ç›®å¼€å‘ä¸­ï¼Œæˆ‘è®©Kiroè‡ªå·±è°ƒç”¨LLMï¼Œç»“åˆSpecsæ–‡æ¡£æ¥å®Œå–„ã€‚å®ƒè‡ªåŠ¨åˆ›å»ºäº†ä¸‰ä¸ªæ–‡æ¡£ï¼Œåˆ†åˆ«æ˜¯ï¼š</p>
<ul>
<li>äº§å“æ¦‚è¿° (product.md) â€“ å®šä¹‰äº§å“çš„ç›®çš„ã€ç›®æ ‡ç”¨æˆ·ã€å…³é”®åŠŸèƒ½å’Œä¸šåŠ¡ç›®æ ‡ã€‚è¿™å¸®åŠ© Kiro ç†è§£æŠ€æœ¯å†³ç­–èƒŒåçš„â€ä¸ºä»€ä¹ˆâ€ï¼Œå¹¶å»ºè®®ä¸æ‚¨äº§å“ç›®æ ‡ä¸€è‡´çš„è§£å†³æ–¹æ¡ˆã€‚</li>
<li>æŠ€æœ¯æ ˆ (tech.md) â€“ è®°å½•é€‰æ‹©çš„æ¡†æ¶ã€åº“ã€å¼€å‘å·¥å…·å’ŒæŠ€æœ¯çº¦æŸã€‚å½“ Kiro å»ºè®®å®ç°æ–¹æ¡ˆæ—¶ï¼Œå®ƒä¼šéµä»è¿™äº›é€‰æ‹©ã€‚</li>
<li>é¡¹ç›®ç»“æ„ (structure.md) â€“ æ¦‚è¿°æ–‡ä»¶ç»„ç»‡ã€å‘½åçº¦å®šã€å¯¼å…¥æ¨¡å¼å’Œæ¶æ„å†³ç­–ã€‚</li>
</ul>
<p>èŠ‚é€‰Kiroè‡ªå·±è¾“å‡ºçš„Steeringå†…å®¹æ€»ç»“ï¼š</p>
<pre><code class="hljs language-python" lang="python">product.md æ›´æ–°
â€¢	æ·»åŠ äº†ä¸­æ–‡äº§å“æè¿°ï¼Œä½“ç°é¡¹ç›®çš„ä¸­æ–‡ä¸šåŠ¡èƒŒæ™¯
â€¢	è¯¦ç»†æè¿°äº†é€šè¯æµç¨‹åŠŸèƒ½ï¼ˆè¯­éŸ³æç¤ºã€DTMFè¾“å…¥ã€æ™ºèƒ½è½¬æ¥ç­‰ï¼‰
â€¢	è¡¥å……äº†ç®¡ç†åŠŸèƒ½ï¼ˆçŸ­å·æ˜ å°„ç®¡ç†ã€é€šè¯è®°å½•è¿½è¸ªã€å®æ—¶ç›‘æ§ç­‰ï¼‰
â€¢	æ˜ç¡®äº†æŠ€æœ¯ç‰¹æ€§ï¼ˆè‡ªåŠ¨æ‰©å±•ã€å¤šè¯­è¨€æ”¯æŒã€åŸºç¡€è®¾æ–½å³ä»£ç ï¼‰
â€¢	æ·»åŠ äº†æ•°æ®æµæ¶æ„å’Œéƒ¨ç½²æ¶æ„è¯´æ˜

tech.md æ›´æ–°
â€¢	è¯¦ç»†æè¿°äº†AWSæœåŠ¡æ¶æ„ï¼ˆConnectã€Lambdaã€DynamoDBç­‰ï¼‰
â€¢	æ·»åŠ äº†Lambdaå‡½æ•°çš„å…·ä½“åŠŸèƒ½å’Œé…ç½®
â€¢	è¡¥å……äº†DynamoDBè¡¨ç»“æ„å’Œè®¾è®¡
â€¢	æ‰©å±•äº†æµ‹è¯•ç­–ç•¥ï¼ŒåŒ…æ‹¬æ€§èƒ½æµ‹è¯•å’Œç›‘æ§æµ‹è¯•
â€¢	æ˜ç¡®äº†æ€§èƒ½è¦æ±‚ï¼ˆ<span class="hljs-number">99</span>%æˆåŠŸç‡ã€<span class="hljs-number">2</span>ç§’å“åº”æ—¶é—´ã€<span class="hljs-number">1000</span>å¹¶å‘ç­‰ï¼‰
â€¢	æ·»åŠ äº†å¤šè¯­è¨€æ”¯æŒçš„å…·ä½“å®è·µ

structure.md æ›´æ–°
â€¢	æ‰©å±•äº†ç›®å½•ç»“æ„ï¼ŒåŒ…æ‹¬è®¡åˆ’ä¸­çš„stacksã€constructsã€<span class="hljs-keyword">lambda</span>ç›®å½•
â€¢	æ·»åŠ äº†å¤šå †æ ˆæ¶æ„æ¨¡å¼çš„è¯¦ç»†è¯´æ˜
â€¢	è¡¥å……äº†Lambdaå‡½æ•°çš„ç»„ç»‡ç»“æ„å’Œå‘½åè§„èŒƒ
â€¢	æ˜ç¡®äº†å¼€å‘å·¥ä½œæµç¨‹å’Œå®æ–½é¡ºåº
â€¢	æ·»åŠ äº†ä»£ç å®¡æŸ¥æ ‡å‡†å’Œè´¨é‡è¦æ±‚
â€¢	å¼ºè°ƒäº†ä¸­è‹±æ–‡æ··åˆçš„æ–‡æ¡£å’Œæ³¨é‡Šè§„èŒƒ

è¿™äº›æ›´æ–°çš„steeringæ–‡æ¡£ç°åœ¨èƒ½å¤Ÿä¸ºAIåŠ©æ‰‹æä¾›æ›´å‡†ç¡®å’Œè¯¦ç»†çš„é¡¹ç›®æŒ‡å¯¼ï¼Œç‰¹åˆ«æ˜¯ï¼š
â€¢	æ˜ç¡®äº†é¡¹ç›®çš„ä¸­æ–‡ä¸šåŠ¡èƒŒæ™¯å’Œå¤šè¯­è¨€ç‰¹æ€§
â€¢	è¯¦ç»†çš„AWSæ¶æ„å’ŒæœåŠ¡é…ç½®è¦æ±‚
â€¢	å…·ä½“çš„æ€§èƒ½æŒ‡æ ‡å’Œè´¨é‡æ ‡å‡†
â€¢	æ¸…æ™°çš„å¼€å‘æµç¨‹å’Œä»£ç ç»„ç»‡è§„èŒƒ
</code></pre>
<p>è¿™ä¸‰ä¸ª.mdæ–‡æ¡£ï¼Œä¼šåœ¨æ¯ä¸ªTaskä»»åŠ¡æ‰§è¡Œå¼€å§‹æ—¶æ³¨å…¥åˆ°ä¸Šä¸‹æ–‡ä¸­ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/148d6d3eb39b4f66b2d06f7373bc622c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766644201&amp;x-signature=j88iJBqvlIau2R63hu%2BlUOkHXBU%3D" alt="kiro-app-development-design-and-implement-private-number-3.png" loading="lazy"/></p>
<p align="center">å›¾3 Taskæ‰§è¡Œæ—¶å°†Steeringæ–‡æ¡£æ³¨å…¥ä¸Šä¸‹æ–‡</p>
<h2 data-id="heading-3">4.ä¸æ»‘çš„å¼€å‘ä»»åŠ¡æ‰§è¡Œ</h2>
<p>Kiroåœ¨è¿™ä¸ªé¡¹ç›®çš„å®æ–½è®¡åˆ’ä¸­åˆ†è§£äº†15ä¸ªå¼€å‘ä»»åŠ¡ã€‚è¿™äº›å¼€å‘ä»»åŠ¡çš„å¯åŠ¨éå¸¸ç®€å•ï¼Œåœ¨tasks.mdæ–‡ä»¶ä¸­ç‚¹å‡»ä»»åŠ¡æ—è¾¹çš„â€Start taskâ€æŒ‰é’®ï¼Œæˆ–è€…ç›´æ¥åœ¨å¯¹è¯æ¡†è¾“å…¥â€œå¼€å§‹ä»»åŠ¡â€å³å¯ã€‚</p>
<p>è¿™é‡Œæˆ‘ç›´æ¥å°†æ‰€æœ‰ä»»åŠ¡çš„å¼€å§‹æŒ‰é’®ä¸€èµ·ç‚¹å‡»äº†ï¼ŒKiroä¼šå¯åŠ¨ç¬¬1ä¸ªä»»åŠ¡ï¼Œå¹¶æ’é˜Ÿåé¢çš„14ä¸ªä»»åŠ¡ã€‚æ•´ä¸ªä»£ç å¼€å‘æŒç»­äº†çº¦ä¸‰ä¸ªå°æ—¶ï¼Œé™¤ä»»åŠ¡1ä¸­éœ€è¦å®‰è£…ä¸€äº›ä¾èµ–ï¼Œæˆæƒåˆ›å»ºä¸€äº›å·¥å…·è¿è¡Œå¤–ï¼ŒåŸºæœ¬å®ç°äº†æ— äººå€¼å®ˆï¼Œç”±Kiroè°ƒç”¨LLMè‡ªä¸»å®Œæˆäº†ä»£ç å¼€å‘ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9f8715f9a7f14bf0a3e297fe61103fd0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766644201&amp;x-signature=GdLBwp3X9QpvUh2w%2Fc9GJJatS%2F8%3D" alt="kiro-app-development-design-and-implement-private-number-4-1.png" loading="lazy"/></p>
<p align="center">å›¾4 Taskä»»åŠ¡åˆ—è¡¨ç¤ºä¾‹ï¼ˆå·²å®ŒæˆçŠ¶æ€ï¼‰</p>
<h2 data-id="heading-4">5.è‡ªåŠ¨çº é”™çš„æ–¹æ¡ˆéƒ¨ç½²</h2>
<p>æ•´ä¸ªé¡¹ç›®æ”¯æŒCDKä¸€é”®éƒ¨ç½²åˆ°äº‘ã€‚åœ¨å¼€å‘å®Œæˆåï¼Œç›´æ¥æœ¬åœ°è¿è¡ŒCDKéƒ¨ç½²å‘½ä»¤å³å¯ã€‚è€Œä½¿ç”¨Kiroï¼Œå¯ä»¥è®©å®ƒæ¥è¿è¡Œéƒ¨ç½²å‘½ä»¤ï¼Œç”±äºæ˜¯é›†æˆçš„IDEç¯å¢ƒï¼ŒKiroå¯ä»¥ç›‘æ§éƒ¨ç½²è¿‡ç¨‹ï¼Œé‡åˆ°é”™è¯¯æ—¶ä¼šè‡ªåŠ¨å®šä½é—®é¢˜ï¼Œä¿®å¤ä»£ç ï¼Œå†é‡è¯•éƒ¨ç½²ã€‚</p>
<p>åœ¨é¡¹ç›®éƒ¨ç½²ä¸­ï¼Œé‡åˆ°äº†éƒ¨ç½²ä½¿ç”¨çš„profileæƒé™ä¸è¶³ã€éƒ¨ç½²åŒºåŸŸä¸æ­£ç¡®ã€éƒ¨ç½²å¤±è´¥å†æ¬¡éƒ¨ç½²æ—¶èµ„æºåå†²çªã€Lambdaå‡½æ•°æ²¡æœ‰è‡ªåŠ¨å…³è”åˆ°Amazon Connectå®ä¾‹ã€Contact Flow IVRæµæ ¼å¼ä¸å¯¹ç­‰é—®é¢˜ï¼Œä½†åŸºæœ¬éƒ½èƒ½å¿«é€Ÿå®šä½åŸå› å¹¶ä¿®å¤ã€‚</p>
<p>åœ¨æ­¤è¿‡ç¨‹ä¸­ï¼Œä¸€ä¸ªå°æŠ€å·§æ˜¯é€šè¿‡æç¤ºè¯å¼•å¯¼Kiroä½¿ç”¨aws-documentation MCP Serveræ¥æŸ¥è¯¢äºšé©¬é€Šäº‘ç§‘æŠ€æ–‡æ¡£ï¼Œè¾…åŠ©åšæ•…éšœå®šä½å’ŒåŸå› åˆ†æã€‚ç›¸å…³çš„Amazon MCP Serverå¯å‚è€ƒ <a href="https://link.juejin.cn?target=https%3A%2F%2Fawslabs.github.io%2Fmcp%2F" target="_blank" title="https://awslabs.github.io/mcp/" ref="nofollow noopener noreferrer">awslabs.github.io/mcp/</a></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f007544cf7ae4e7cad2208a04c40adda~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766644201&amp;x-signature=IP7sj6WUOlHmsWeFS4D3jSwEj8I%3D" alt="kiro-app-development-design-and-implement-private-number-5.png" loading="lazy"/></p>
<p align="center">å›¾5 é—®é¢˜ä¿®å¤ç¤ºä¾‹ï¼ˆå¼€å‘-éƒ¨ç½²-é—®é¢˜å®šä½-ä¿®å¤-éƒ¨ç½²çš„é—­ç¯ï¼‰</p>
<h2 data-id="heading-5">6.æ€»ç»“</h2>
<p>åœ¨è™šæ‹Ÿå·ç å¼€å‘çš„è¿‡ç¨‹ä¸­ï¼ŒKiroçš„è¡¨ç°å¯ä»¥ç”¨â€œæƒŠè‰³â€æ¥å½¢å®¹ã€‚</p>
<ol>
<li>SPECæ¨¡å¼ç›¸è¾ƒäºä¹‹å‰çš„ä¸Šä¸‹æ–‡ç®¡ç†æ›´è¿›ä¸€æ­¥ï¼Œé€šè¿‡å…·ä½“çš„éœ€æ±‚åˆ†æ-æ–¹æ¡ˆè®¾è®¡-æ‰§è¡Œè®¡åˆ’è¿™å‡ æ­¥è®¾è®¡ï¼Œä»æ ¹æœ¬ä¸Šç»™LLMçš„å‘æŒ¥æå‰æŒ‡å¥½äº†æ–¹å‘ã€‚å¹¶é€šè¿‡Steeringä¸Šä¸‹æ–‡ç®¡ç†ï¼Œä»¥åŠæœ¬æ–‡æ²¡æœ‰å…·ä½“æåŠçš„Agent Hooksï¼ŒMCPæ”¯æŒç­‰ç‰¹æ€§ï¼Œå°†Agentic IDEå¸¦åˆ°äº†ä¸€ä¸ªæ–°çš„é«˜åº¦ã€‚SPECæ¨¡å¼çš„ç†å¿µï¼Œæå¤§çš„å½±å“äº†å…¶å®ƒCodingå·¥å…·çš„æ¼”è¿›ï¼Œä¸ºAI Codingæ‹“å±•äº†æ–°çš„æ–¹å‘ã€‚</li>
<li>è™šæ‹Ÿå·ç çš„æ–¹æ¡ˆï¼Œä¸åŸæ¥ç¬”è€…è®¾è®¡çš„æ–¹æ¡ˆé«˜åº¦ä¸€è‡´ï¼Œéƒ½ä½¿ç”¨äº†ServerlessæœåŠ¡æ¥æ„å»ºï¼Œå…·æœ‰é¡¹ç›®æ•´ä½“æˆæœ¬ä½ã€å…è¿ç»´çš„ç‰¹ç‚¹ã€‚Kiroçš„è®¾è®¡ï¼Œåœ¨é¡¹ç›®çš„å®Œæ•´æ€§ã€æ˜“ç”¨æ€§ã€å¯æ‹“å±•æ€§ä¸Šæ›´å¥½ï¼Œå¯ä»¥ä½œä¸ºç”Ÿäº§çº§åº”ç”¨ç›´æ¥éƒ¨ç½²ã€‚</li>
<li>ç›¸è¾ƒäºåŸæ¥è®©LLMå•çº¯ç¼–å†™ä»£ç çš„å®šä½ï¼ŒKiroåœ¨éœ€æ±‚åˆ†è§£ã€æ–¹æ¡ˆè®¾è®¡ã€åº”ç”¨éƒ¨ç½²ç­‰åŸæ¥ä¾èµ–äººå·¥çš„ç¯èŠ‚èƒ½å¤Ÿæœ‰æ›´å¤§çš„å‘æŒ¥ã€‚å½“ç„¶è¿™é‡Œå¹¶ä¸æ˜¯è¯´Kiroèƒ½å¤Ÿå®Œå…¨ä»£æ›¿äººçš„ä½œç”¨ï¼Œäººå’Œç”Ÿæˆå¼AIçš„é…åˆï¼Œå°±åƒæ˜¯â€œè®¾è®¡å¸ˆâ€å’Œâ€œæ–½å·¥é˜Ÿâ€ï¼šè®¾è®¡å¸ˆç»˜ç”»è“å›¾ï¼Œè¯´æ˜ä½œå“çš„æ¨¡æ ·å’Œå…·ä½“çš„é£æ ¼ï¼›æ–½å·¥é˜Ÿè´Ÿè´£è½å®ï¼Œå®Œæˆç»†èŠ‚è®¾è®¡å¹¶ä¸è®¾è®¡å¸ˆç¡®è®¤ï¼Œå†åˆ©ç”¨å„ç±»å·¥å…·æ­å»ºå®Œæˆã€‚å¥½çš„â€œè®¾è®¡å¸ˆâ€ï¼Œèƒ½å¤Ÿæ›´å¥½çš„å‘æŒ¥â€œæ–½å·¥é˜Ÿâ€çš„èƒ½åŠ›ã€‚</li>
</ol>
<p>éœ€è¦æ”¹è¿›çš„åœ°æ–¹ï¼š</p>
<ol>
<li>ä¼šè¯Contextçš„ç®¡ç†éœ€è¦ä¼˜åŒ–æå‡ã€‚åœ¨ä½¿ç”¨ä¸­ä¼šé‡åˆ°å½“å‰ä¼šè¯Contextè¿‡å¤§çš„æƒ…å†µï¼Œç‰¹åˆ«æ˜¯ä½¿ç”¨MCP å·¥å…·å¯èƒ½å¼•å…¥å¤§é‡ä¸Šä¸‹æ–‡å†…å®¹ã€‚Kiroæ­¤æ—¶ä¼šè‡ªåŠ¨æ€»ç»“å‹ç¼©å†…å®¹å¹¶å¯åŠ¨æ–°çš„ä¼šè¯ï¼Œç›®å‰å­˜åœ¨ä¸¤ä¸ªé—®é¢˜ï¼š</li>
</ol>
<ul>
<li>åœ¨æˆ‘æµ‹è¯•çš„æ—¶é—´ï¼Œç›®å‰è¿˜ä¸èƒ½ç›´è§‚çš„æŸ¥çœ‹å½“å‰Context Tokenæ¶ˆè€—æƒ…å†µï¼Œä»¥åŠå½“å‰æ¨¡å‹æ”¯æŒçš„Contextå¤§å°ï¼ˆå…¶ä¸­ä¸€äº›æ¨¡å‹åœ¨Bedrockä¸Šå·²ç»æä¾›1M Tokenç‰ˆæœ¬ï¼Œä½†Kiroæ˜¯å¦ä½¿ç”¨æœªçŸ¥ï¼‰</li>
<li>åœ¨æ€»ç»“å‹ç¼©å†…å®¹å¹¶å¼€å¯æ–°ä¼šè¯åï¼Œå¯¹æ­£åœ¨è¿›è¡Œä¸­çš„ä»»åŠ¡çš„å»¶ç»­æ€§éœ€è¦æå‡ã€‚ç›®å‰å¼€å¯æ–°ä¼šè¯åï¼Œéœ€è¦æ‰‹åŠ¨è¾“å…¥ä¹‹å‰ç›¸å…³çš„å†…å®¹ï¼Œæ‰èƒ½ç»§ç»­ä»»åŠ¡</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2a5a253eac0b467da1487dbd944b734d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766644201&amp;x-signature=X%2Bo9%2BxPq44nkaSJ%2FtXrdo%2Fe1xF4%3D" alt="kiro-app-development-design-and-implement-private-number-6.png" loading="lazy"/></p>
<p align="center">å›¾6 ä¼šè¯è¶…å‡ºContextæ—¶è‡ªåŠ¨æ€»ç»“å¹¶å¼€å¯æ–°ä¼šè¯</p>
<ol start="2">
<li>å¯¹äºAmazon Connect Contact Flowè¿™ä¸€ç±»æ ¼å¼å¤æ‚ï¼Œå¯¹ä¸“ä¸šæ€§è¦æ±‚æ¯”è¾ƒé«˜çš„é…ç½®æ–‡ä»¶ï¼Œå¯¹LLMæ¥è¯´å¾ˆæœ‰æŒ‘æˆ˜ã€‚åœ¨æœ¬é¡¹ç›®ä¸­ï¼ŒKiroåœ¨å°è¯•å¤šæ¬¡å¤±è´¥åï¼Œæè®®åˆ°Connectæ§åˆ¶å°UIæ‰‹åŠ¨åˆ›å»ºIVRæµï¼Œä¸è¿‡å®ƒæä¾›äº†è¯¦ç»†çš„é…ç½®æ­¥éª¤å’ŒèŠ‚ç‚¹ç±»å‹é…ç½®ï¼Œå¹¶è¯´æ˜äº†å¦‚ä½•å¯¼å‡ºIVRæµé…ç½®æ–‡ä»¶åˆ°CDKé¡¹ç›®ä¸­ï¼Œæ–¹ä¾¿åç»­ç›´æ¥éƒ¨ç½²ã€‚</li>
</ol>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/534178696d084d25a7857585eef7d6cd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766644201&amp;x-signature=3tMdBwaYhJeKe583UeXfnMlDpuw%3D" alt="kiro-app-development-design-and-implement-private-number-7.png" loading="lazy"/></p>
<p align="center">å›¾7 Contact Flowçš„ä¸‹ä¸€æ­¥æ“ä½œæŒ‡å—</p>
<h2 data-id="heading-6">7.å‚è€ƒèµ„æ–™</h2>
<p>Book of Kiro ï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fkiro-community.github.io%2Fbook-of-kiro%2F" target="_blank" title="https://kiro-community.github.io/book-of-kiro/" ref="nofollow noopener noreferrer">kiro-community.github.io/book-of-kirâ€¦</a>ï¼‰</p>
<p>Amazon MCP Servers ï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fawslabs.github.io%2Fmcp%2F" target="_blank" title="https://awslabs.github.io/mcp/" ref="nofollow noopener noreferrer">awslabs.github.io/mcp/</a>ï¼‰</p>
<p>*<em>å‰è¿°ç‰¹å®šäºšé©¬é€Šäº‘ç§‘æŠ€ç”Ÿæˆå¼äººå·¥æ™ºèƒ½ç›¸å…³çš„æœåŠ¡ç›®å‰åœ¨äºšé©¬é€Šäº‘ç§‘æŠ€æµ·å¤–åŒºåŸŸå¯ç”¨ã€‚äºšé©¬é€Šäº‘ç§‘æŠ€ä¸­å›½åŒºåŸŸç›¸å…³äº‘æœåŠ¡ç”±è¥¿äº‘æ•°æ®å’Œå…‰ç¯æ–°ç½‘è¿è¥ï¼Œå…·ä½“ä¿¡æ¯ä»¥ä¸­å›½åŒºåŸŸå®˜ç½‘ä¸ºå‡†ã€‚</em></p>
<p><strong>æœ¬ç¯‡ä½œè€…</strong>
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7cc5dfc54309473588d7a51c08dcd521~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766644201&amp;x-signature=IejjkwVuYRsHuQx2Iv2LYwgvS3Y%3D" alt="image.png" loading="lazy"/></p>
<blockquote>
<p>ğŸ”¥ æƒ³åˆ©ç”¨ç”Ÿæˆå¼AIå¼€å‘å·¥å…·è§£æ”¾åŒæ‰‹ï¼Œå´è‹¦äºåº”ç”¨æ•ˆæœä¸å¤Ÿå®Œå–„ã€æµç¨‹ä¸å¤Ÿè§„èŒƒï¼Ÿ</p>
<p>âœ¨ äºšé©¬é€Šäº‘ç§‘æŠ€ Kiro ç™»åœºï¼é‡‡ç”¨â€œè§„èŒƒé©±åŠ¨â€å¼€å‘ç†å¿µï¼Œç»“åˆ Agent Hooks è‡ªåŠ¨åŒ–ç³»ç»Ÿï¼Œ1å°æ—¶è®©å°ç™½å˜èº«ç”Ÿäº§çº§æ¸¸æˆåˆ¶ä½œäººï¼</p>
<p>ğŸ”› é€Ÿæ¥äº‘ä¸Šæ¢ç´¢å®éªŒå®¤ï¼Œä½“éªŒ Kiro å¼€å‘ç‹¬ç«‹æ¸¸æˆï¼Œä»éœ€æ±‚åˆ°éƒ¨ç½²å…¨æŒæ¡ï¼</p>
<p>ğŸ‘‰ <a href="https://link.juejin.cn?target=https%3A%2F%2Fevents.amazoncloud.cn%2Flabs%2Fcloudlab-kiro-cloudgames-static-website%3Fvisitfrom%3D3P_Juejintail_1218%26sc_medium%3Downed%26sc_campaign%3Dcloudlab%26sc_channel%3D3P_Juejintail_1218" target="_blank" title="https://events.amazoncloud.cn/labs/cloudlab-kiro-cloudgames-static-website?visitfrom=3P_Juejintail_1218&amp;sc_medium=owned&amp;sc_campaign=cloudlab&amp;sc_channel=3P_Juejintail_1218" ref="nofollow noopener noreferrer">ç‚¹å‡»è¿™é‡Œ</a>ï¼Œå³åˆ»å¼€å¯ AI å¼€å‘ä¹‹æ—…ï¼</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Newtonsoft.Json ä¸ System.Text.Json å¤šæ€ååºåˆ—åŒ–çš„å®‰å…¨æ€§å·®å¼‚è§£æ]]></title>    <link>https://juejin.cn/post/7584824891595112484</link>    <guid>https://juejin.cn/post/7584824891595112484</guid>    <pubDate>2025-12-18T06:19:02.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7584824891595112484" data-draft-id="7584759201072316457" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Newtonsoft.Json ä¸ System.Text.Json å¤šæ€ååºåˆ—åŒ–çš„å®‰å…¨æ€§å·®å¼‚è§£æ "/> <meta itemprop="keywords" content=".NET,å®‰å…¨"/> <meta itemprop="datePublished" content="2025-12-18T06:19:02.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="MeteorSeed"/> <meta itemprop="url" content="https://juejin.cn/user/4188480893360907"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Newtonsoft.Json ä¸ System.Text.Json å¤šæ€ååºåˆ—åŒ–çš„å®‰å…¨æ€§å·®å¼‚è§£æ 
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4188480893360907/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    MeteorSeed
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-18T06:19:02.000Z" title="Thu Dec 18 2025 06:19:02 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-18
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ã€€ã€€å¤šæ€ååºåˆ—åŒ–æ˜¯å¤„ç†ç»§æ‰¿ç»“æ„å¯¹è±¡åºåˆ—åŒ–çš„å¸¸è§éœ€æ±‚ï¼Œä½†ä¸åŒ JSON åºåˆ—åŒ–åº“çš„å®ç°æœºåˆ¶å·®å¼‚ä¼šå¸¦æ¥æ˜¾è‘—çš„å®‰å…¨é£é™©ã€‚å¾®è½¯ CA2326 è§„åˆ™æ˜ç¡®è­¦ç¤ºï¼šé¿å…ä½¿ç”¨éå®‰å…¨çš„ JsonSerializerSettings é…ç½®ï¼ˆå¦‚ Newtonsoft.Json çš„ TypeNameHandling é None å€¼ï¼‰ï¼Œå¦åˆ™å¯èƒ½å¼•å‘ç±»å‹æ³¨å…¥æ”»å‡»ã€‚æœ¬æ–‡å°†å¯¹æ¯” Newtonsoft.Json ä¸ System.Text.Json åœ¨å¤šæ€ååºåˆ—åŒ–ä¸­çš„å®ç°å·®å¼‚ï¼Œé‡ç‚¹åˆ†æå®‰å…¨æ€§é—®é¢˜ï¼Œå¹¶é€šè¿‡ä»£ç å®ä¾‹éªŒè¯ä¸¤è€…çš„å®‰å…¨è¡¨ç°ã€‚</p>
<h2 data-id="heading-0">å¤šæ€ååºåˆ—åŒ–çš„å®ç°æœºåˆ¶å·®å¼‚</h2>
<h3 data-id="heading-1">Newtonsoft.Jsonï¼šåŸºäºTypeNameHandling çš„çµæ´»è®¾è®¡</h3>
<p>ã€€ã€€Newtonsoft.Json é€šè¿‡ TypeNameHandling é…ç½®é¡¹æ§åˆ¶æ˜¯å¦åœ¨ JSON ä¸­åµŒå…¥ç±»å‹å…ƒæ•°æ®ã€‚å½“è®¾ç½® TypeNameHandling æ”¯æŒå¤šæ€æ—¶ï¼ŒJSON ä¼šæºå¸¦ $type å­—æ®µï¼ˆåŒ…å«ç±»å‹çš„å®Œå…¨é™å®šåå’Œç¨‹åºé›†ä¿¡æ¯ï¼‰ï¼Œååºåˆ—åŒ–æ—¶ç›´æ¥æ ¹æ®è¯¥å­—æ®µå®ä¾‹åŒ–å¯¹åº”ç±»å‹ã€‚è¿™ç§è®¾è®¡è™½ç„¶çµæ´»æ”¯æŒå¤šæ€ï¼Œä½†ç¼ºä¹é»˜è®¤çš„ç±»å‹æ ¡éªŒæœºåˆ¶ï¼Œæ”»å‡»è€…å¯æ„é€ åŒ…å«æ¶æ„ç±»å‹çš„ JSONï¼Œè§¦å‘æ•æ„Ÿç±»å‹å®ä¾‹åŒ–ã€‚</p>
<h3 data-id="heading-2">System.Text.Jsonï¼šå¤šæ€é…ç½®çš„å®‰å…¨è®¾è®¡</h3>
<p>Â  Â  System.Text.Json é»˜è®¤ä¸æ”¯æŒå¤šæ€ååºåˆ—åŒ–ï¼Œéœ€é€šè¿‡ [JsonDerivedType] ç‰¹æ€§æˆ– DerivedTypes æ˜¾å¼å£°æ˜å…è®¸çš„æ´¾ç”Ÿç±»å‹ã€‚ååºåˆ—åŒ–æ—¶ä»…å¤„ç†é…ç½®è¿‡çš„ç±»å‹ï¼Œæ‹’ç»æœªæˆæƒçš„ç±»å‹æ³¨å…¥ï¼Œä»æœºåˆ¶ä¸Šè§„é¿äº†å®‰å…¨é£é™©ã€‚</p>
<h2 data-id="heading-3">CA2326 è§„åˆ™çš„è­¦ç¤º</h2>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cd18af3ddefc46d5898f8a3ea5652ea6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWV0ZW9yU2VlZA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766643542&amp;x-signature=t1c5KCZjxOEduD4ESVyFj%2BC1D7I%3D" alt="20251218" loading="lazy"/></p>
<p>ã€€ã€€CA2326 è§„åˆ™çš„æ ¸å¿ƒæ˜¯ç¦æ­¢ä½¿ç”¨ TypeNameHandling é None å€¼çš„é…ç½® â€”â€” æ”»å‡»è€…å¯åˆ©ç”¨ $type å­—æ®µæ„é€ æ¶æ„ JSONï¼Œå®ä¾‹åŒ–å¦‚ ProcessStartInfoï¼ˆæ‰§è¡Œç³»ç»Ÿå‘½ä»¤ï¼‰ã€FileStreamï¼ˆè¯»å†™æ–‡ä»¶ï¼‰ç­‰æ•æ„Ÿç±»å‹ï¼Œå¼•å‘è¿œç¨‹ä»£ç æ‰§è¡Œæˆ–æ•°æ®æ³„éœ²ã€‚</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">using</span> Newtonsoft.Json;
<span class="hljs-keyword">using</span> Newtonsoft.Json.Serialization;
<span class="hljs-keyword">using</span> System.Diagnostics;
<span class="hljs-keyword">using</span> System.Text.Json;
<span class="hljs-keyword">using</span> System.Text.Json.Serialization;
<span class="hljs-keyword">using</span> System.Text.Json.Serialization.Metadata;

<span class="hljs-keyword">namespace</span> <span class="hljs-title">NewtonsoftSecurityDemo</span>
{
    [<span class="hljs-meta">JsonPolymorphic(TypeDiscriminatorPropertyName = <span class="hljs-string">"CustomerType"</span>)</span>]
    [<span class="hljs-meta">JsonDerivedType(typeof(PaymentCompletedEvent), <span class="hljs-string">"PaymentCompletedEvent"</span>)</span>]
    [<span class="hljs-meta">JsonDerivedType(typeof(OrderCreatedEvent), <span class="hljs-string">"OrderCreatedEvent"</span>)</span>]
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">TransactionEvent</span>
    {
        <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> EventId { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; } = Guid.NewGuid().ToString();

        <span class="hljs-keyword">public</span> DateTime EventTime { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; } = DateTime.Now;

        <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> OrderId { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }

        <span class="hljs-comment">// ä¸šåŠ¡æ‰©å±•å­—æ®µï¼ˆæ”»å‡»è€…åˆ©ç”¨çš„å…¥å£ï¼‰</span>
        <span class="hljs-keyword">public</span> <span class="hljs-built_in">object</span> ExtData { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">PaymentCompletedEvent</span> : <span class="hljs-title">TransactionEvent</span>
    {
        <span class="hljs-keyword">public</span> <span class="hljs-built_in">decimal</span> Amount { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
        <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> PaymentMethod { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">OrderCreatedEvent</span> : <span class="hljs-title">TransactionEvent</span>
    {
        <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> UserId { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
        <span class="hljs-keyword">public</span> <span class="hljs-built_in">int</span> ItemCount { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
    }


    <span class="hljs-comment">// Newtonsoft.Json å®‰å…¨ç»‘å®šå™¨ï¼ˆæ¼”ç¤ºç™½åå•æ ¡éªŒï¼‰</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">EventSerializationBinder</span> : <span class="hljs-title">ISerializationBinder</span>
    {
        <span class="hljs-comment">// ä»…å…è®¸çš„å®‰å…¨ç±»å‹ç™½åå•</span>
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> HashSet&lt;<span class="hljs-built_in">string</span>&gt; _allowedTypes = <span class="hljs-keyword">new</span>()
        {
            <span class="hljs-string">"NewtonsoftSecurityDemo.PaymentCompletedEvent"</span>,
            <span class="hljs-string">"NewtonsoftSecurityDemo.OrderCreatedEvent"</span>,
            <span class="hljs-comment">//"System.Diagnostics.ProcessStartInfo"</span>
        };

        <span class="hljs-function"><span class="hljs-keyword">public</span> Type <span class="hljs-title">BindToType</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> assemblyName, <span class="hljs-built_in">string</span> typeName</span>)</span>
        {
            <span class="hljs-comment">// ä»…å…è®¸ç™½åå•å†…çš„ç±»å‹</span>
            <span class="hljs-keyword">if</span> (!_allowedTypes.Contains(typeName))
            {
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> NotSupportedException(<span class="hljs-string">$"ç¦æ­¢ååºåˆ—åŒ–æœªæˆæƒç±»å‹ï¼š<span class="hljs-subst">{typeName}</span>"</span>);
            }
            <span class="hljs-keyword">return</span> Type.GetType(<span class="hljs-string">$"<span class="hljs-subst">{typeName}</span>, <span class="hljs-subst">{assemblyName}</span>"</span>) ?? <span class="hljs-keyword">typeof</span>(TransactionEvent);
        }

        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">BindToName</span>(<span class="hljs-params">Type serializedType, <span class="hljs-keyword">out</span> <span class="hljs-built_in">string</span>? assemblyName, <span class="hljs-keyword">out</span> <span class="hljs-built_in">string</span>? typeName</span>)</span>
        {
            assemblyName = serializedType.Assembly.FullName;
            typeName = serializedType.FullName;
        }
    }

    <span class="hljs-keyword">class</span> <span class="hljs-title">Program</span>
    {
        <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Main</span>(<span class="hljs-params"><span class="hljs-built_in">string</span>[] args</span>)</span>
        {
            Console.WriteLine(<span class="hljs-string">"=== Newtonsoft.Json å‘½ä»¤æ‰§è¡Œæ”»å‡»æ¼”ç¤º ==="</span>);
            Newtonsoft_Attack_ProcessStartInfo();

            Console.WriteLine(<span class="hljs-string">"\n=== Newtonsoft.Json æ–‡ä»¶è¯»å–æ”»å‡»æ¼”ç¤º ==="</span>);
            Newtonsoft_Attack_FileStream();

            Console.WriteLine(<span class="hljs-string">"\n=== Newtonsoft.Json å¯ç”¨ SerializationBinderï¼šå®‰å…¨é˜²æŠ¤æ¼”ç¤º ==="</span>);
            Newtonsoft_Secure_WithBinder();

            Console.WriteLine(<span class="hljs-string">"\n=== System.Text.Json å®‰å…¨é˜²æŠ¤æ¼”ç¤º ==="</span>);
            SystemTextJson_Defense();

            Console.ReadKey();
        }

        <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span></span>
        <span class="hljs-comment"><span class="hljs-doctag">///</span> æ¨¡æ‹Ÿï¼šæ³¨å…¥ProcessStartInfoæ‰§è¡Œç³»ç»Ÿå‘½ä»¤</span>
        <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;/summary&gt;</span></span>
        <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Newtonsoft_Attack_ProcessStartInfo</span>()</span>
        {
            <span class="hljs-built_in">string</span> maliciousCallbackJson = @<span class="hljs-string">$"
                {{
                    "</span><span class="hljs-string">"$type"</span><span class="hljs-string">": "</span><span class="hljs-string">"NewtonsoftSecurityDemo.PaymentCompletedEvent, NewtonsoftSecurityDemo"</span><span class="hljs-string">",
                    "</span><span class="hljs-string">"EventId"</span><span class="hljs-string">": "</span><span class="hljs-string">"{Guid.NewGuid()}"</span><span class="hljs-string">",
                    "</span><span class="hljs-string">"OrderId"</span><span class="hljs-string">": "</span><span class="hljs-string">"ORD_{new Random().Next(1000, 9999)}"</span><span class="hljs-string">",
                    "</span><span class="hljs-string">"Amount"</span><span class="hljs-string">": 999.00,
                    "</span><span class="hljs-string">"PaymentMethod"</span><span class="hljs-string">": "</span><span class="hljs-string">"Alipay"</span><span class="hljs-string">",
                    "</span><span class="hljs-string">"ExtData"</span><span class="hljs-string">": {{
                        "</span><span class="hljs-string">"$type"</span><span class="hljs-string">": "</span><span class="hljs-string">"System.Diagnostics.ProcessStartInfo,System.Diagnostics.Process"</span><span class="hljs-string">",
                        "</span><span class="hljs-string">"FileName"</span><span class="hljs-string">": "</span><span class="hljs-string">"cmd.exe"</span><span class="hljs-string">",
                        "</span><span class="hljs-string">"Arguments"</span><span class="hljs-string">": "</span><span class="hljs-string">"/c echo 'some scripts' &gt; C:\temp\attack_log.txt &amp;&amp; echo 'doing' &gt;&gt; C:\temp\attack_log.txt"</span><span class="hljs-string">",
                        "</span><span class="hljs-string">"UseShellExecute"</span><span class="hljs-string">": true
                    }}
                }}"</span>;

            <span class="hljs-keyword">var</span> settings = <span class="hljs-keyword">new</span> JsonSerializerSettings
            {
                TypeNameHandling = TypeNameHandling.Auto,
            };

            <span class="hljs-keyword">var</span> eventData = Newtonsoft.Json.JsonConvert.DeserializeObject&lt;TransactionEvent&gt;(maliciousCallbackJson, settings);
            Console.WriteLine(<span class="hljs-string">$"å¤„ç†è®¢å•äº‹ä»¶ï¼š<span class="hljs-subst">{eventData.OrderId}</span>"</span>);

            <span class="hljs-keyword">if</span> (eventData.ExtData <span class="hljs-keyword">is</span> ProcessStartInfo psi)
            {
                Directory.CreateDirectory(<span class="hljs-string">"C:\temp"</span>);
                Process.Start(psi);
                Console.WriteLine(<span class="hljs-string">$"  [æ”»å‡»æˆåŠŸ] æ‰§è¡Œå‘½ä»¤ï¼š<span class="hljs-subst">{psi.Arguments}</span>"</span>);
                Console.WriteLine(<span class="hljs-string">$"  [æ”»å‡»ç»“æœ] ç”Ÿæˆæ–‡ä»¶ï¼šC:\temp\attack_log.txt æ–‡ä»¶å†…å®¹ï¼š"</span>);
                <span class="hljs-keyword">if</span> (File.Exists(<span class="hljs-string">"C:\temp\attack_log.txt"</span>))
                {
                    <span class="hljs-built_in">string</span> content = File.ReadAllText(<span class="hljs-string">"C:\temp\attack_log.txt"</span>);
                    Console.WriteLine(<span class="hljs-string">$"<span class="hljs-subst">{content}</span>"</span>);
                }
            }
        }

        <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span></span>
        <span class="hljs-comment"><span class="hljs-doctag">///</span> æ¨¡æ‹Ÿï¼šæ³¨å…¥FileInfoè¯»å–æ•æ„Ÿæ–‡ä»¶</span>
        <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;/summary&gt;</span></span>
        <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Newtonsoft_Attack_FileStream</span>()</span>
        {
            <span class="hljs-built_in">string</span> targetFile = Path.Combine(Environment.GetFolderPath(Environment.SpecialFolder.Desktop), <span class="hljs-string">"appsettings.json"</span>);
            <span class="hljs-keyword">if</span> (!File.Exists(targetFile))
            {
                File.WriteAllText(targetFile, <span class="hljs-string">"ConnectionString: 123456"</span>);
            }

            <span class="hljs-built_in">string</span> maliciousExportJson = @<span class="hljs-string">$"
                {{
                    "</span><span class="hljs-string">"$type"</span><span class="hljs-string">": "</span><span class="hljs-string">"NewtonsoftSecurityDemo.OrderCreatedEvent, NewtonsoftSecurityDemo"</span><span class="hljs-string">",
                    "</span><span class="hljs-string">"OrderId"</span><span class="hljs-string">": "</span><span class="hljs-string">"ORD_{new Random().Next(1000, 9999)}"</span><span class="hljs-string">",
                    "</span><span class="hljs-string">"UserId"</span><span class="hljs-string">": "</span><span class="hljs-string">"user_{new Random().Next(100, 999)}"</span><span class="hljs-string">",
                    "</span><span class="hljs-string">"ExtData"</span><span class="hljs-string">": {{
                        "</span><span class="hljs-string">"$type"</span><span class="hljs-string">": "</span><span class="hljs-string">"System.IO.FileInfo"</span><span class="hljs-string">", 
                        "</span><span class="hljs-string">"FileName"</span><span class="hljs-string">": "</span><span class="hljs-string">"{targetFile.Replace("</span>\<span class="hljs-string">", "</span>\\<span class="hljs-string">")}"</span><span class="hljs-string">" 
                    }}
                }}"</span>;

            <span class="hljs-keyword">var</span> settings = <span class="hljs-keyword">new</span> JsonSerializerSettings
            {
                TypeNameHandling = TypeNameHandling.Auto
            };

            <span class="hljs-keyword">var</span> eventData = Newtonsoft.Json.JsonConvert.DeserializeObject&lt;TransactionEvent&gt;(maliciousExportJson, settings);
            Console.WriteLine(<span class="hljs-string">$"å¤„ç†è®¢å•å¯¼å‡ºï¼š<span class="hljs-subst">{eventData.OrderId}</span>"</span>);

            <span class="hljs-comment">// é€šè¿‡FileInfoè¯»å–æ–‡ä»¶å†…å®¹ï¼ˆæ¨¡æ‹Ÿæ”»å‡»é€»è¾‘ï¼‰</span>
            <span class="hljs-keyword">if</span> (eventData.ExtData <span class="hljs-keyword">is</span> FileInfo fileInfo)
            {
                <span class="hljs-keyword">using</span> (<span class="hljs-keyword">var</span> sr = <span class="hljs-keyword">new</span> StreamReader(fileInfo.OpenRead()))
                {
                    <span class="hljs-built_in">string</span> sensitiveContent = sr.ReadToEnd();
                    Console.WriteLine(<span class="hljs-string">$"  [æ”»å‡»æˆåŠŸ] è¯»å–æ•æ„Ÿæ–‡ä»¶å†…å®¹ï¼š\n<span class="hljs-subst">{sensitiveContent}</span>"</span>);
                }
            }
        }

        <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span></span>
        <span class="hljs-comment"><span class="hljs-doctag">///</span> Newtonsoft.Json å¯ç”¨SerializationBinderï¼šæ‹¦æˆªæ¶æ„ç±»å‹</span>
        <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;/summary&gt;</span></span>
        <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Newtonsoft_Secure_WithBinder</span>()</span>
        {
            <span class="hljs-built_in">string</span> maliciousCallbackJson = @<span class="hljs-string">$"
                {{
                    "</span><span class="hljs-string">"$type"</span><span class="hljs-string">": "</span><span class="hljs-string">"NewtonsoftSecurityDemo.PaymentCompletedEvent, NewtonsoftSecurityDemo"</span><span class="hljs-string">",
                    "</span><span class="hljs-string">"EventId"</span><span class="hljs-string">": "</span><span class="hljs-string">"{Guid.NewGuid()}"</span><span class="hljs-string">",
                    "</span><span class="hljs-string">"OrderId"</span><span class="hljs-string">": "</span><span class="hljs-string">"ORD_{new Random().Next(1000, 9999)}"</span><span class="hljs-string">",
                    "</span><span class="hljs-string">"Amount"</span><span class="hljs-string">": 999.00,
                    "</span><span class="hljs-string">"PaymentMethod"</span><span class="hljs-string">": "</span><span class="hljs-string">"Alipay"</span><span class="hljs-string">",
                    "</span><span class="hljs-string">"ExtData"</span><span class="hljs-string">": {{
                        "</span><span class="hljs-string">"$type"</span><span class="hljs-string">": "</span><span class="hljs-string">"System.Diagnostics.ProcessStartInfo,System.Diagnostics.Process"</span><span class="hljs-string">",
                        "</span><span class="hljs-string">"FileName"</span><span class="hljs-string">": "</span><span class="hljs-string">"cmd.exe"</span><span class="hljs-string">",
                        "</span><span class="hljs-string">"Arguments"</span><span class="hljs-string">": "</span><span class="hljs-string">"/c echo 'some scripts' &gt; C:\temp\attack_log.txt &amp;&amp; echo 'doing' &gt;&gt; C:\temp\attack_log.txt"</span><span class="hljs-string">",
                        "</span><span class="hljs-string">"UseShellExecute"</span><span class="hljs-string">": true
                    }}
                }}"</span>;

            <span class="hljs-keyword">var</span> settings = <span class="hljs-keyword">new</span> JsonSerializerSettings
            {
                TypeNameHandling = TypeNameHandling.Auto,
                SerializationBinder = <span class="hljs-keyword">new</span> EventSerializationBinder() <span class="hljs-comment">// å¯ç”¨ç™½åå•æ ¡éªŒ</span>
            };

            <span class="hljs-keyword">try</span>
            {
                <span class="hljs-keyword">var</span> eventData = Newtonsoft.Json.JsonConvert.DeserializeObject&lt;TransactionEvent&gt;(maliciousCallbackJson, settings);
                <span class="hljs-keyword">if</span> (eventData.ExtData <span class="hljs-keyword">is</span> ProcessStartInfo)
                {
                    Console.WriteLine(<span class="hljs-string">"  [é˜²æŠ¤å¤±æ•ˆ] æ¶æ„ç±»å‹æœªè¢«æ‹¦æˆªï¼ˆå¼‚å¸¸ï¼‰"</span>);
                }
            }
            <span class="hljs-keyword">catch</span> (Exception ex)
            {
                Console.WriteLine(<span class="hljs-string">$"  [é˜²æŠ¤æˆåŠŸ] æ‹¦æˆªæœªæˆæƒç±»å‹ï¼š<span class="hljs-subst">{ex.Message}</span>"</span>);
            }
        }

        <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span></span>
        <span class="hljs-comment"><span class="hljs-doctag">///</span> System.Text.Json å®‰å…¨é˜²æŠ¤éªŒè¯</span>
        <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;/summary&gt;</span></span>
        <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">SystemTextJson_Defense</span>()</span>
        {
            <span class="hljs-built_in">string</span> maliciousCallbackJson = @<span class="hljs-string">$"
                {{
                    "</span><span class="hljs-string">"CustomerType"</span><span class="hljs-string">": "</span><span class="hljs-string">"PaymentCompletedEvent"</span><span class="hljs-string">",
                    "</span><span class="hljs-string">"EventId"</span><span class="hljs-string">": "</span><span class="hljs-string">"{Guid.NewGuid()}"</span><span class="hljs-string">",
                    "</span><span class="hljs-string">"OrderId"</span><span class="hljs-string">": "</span><span class="hljs-string">"ORD_{new Random().Next(1000, 9999)}"</span><span class="hljs-string">",
                    "</span><span class="hljs-string">"Amount"</span><span class="hljs-string">": 999.00,
                    "</span><span class="hljs-string">"PaymentMethod"</span><span class="hljs-string">": "</span><span class="hljs-string">"Alipay"</span><span class="hljs-string">",
                    "</span><span class="hljs-string">"ExtData"</span><span class="hljs-string">": {{
                        "</span><span class="hljs-string">"$type"</span><span class="hljs-string">": "</span><span class="hljs-string">"System.Diagnostics.ProcessStartInfo,System.Diagnostics.Process"</span><span class="hljs-string">",
                        "</span><span class="hljs-string">"FileName"</span><span class="hljs-string">": "</span><span class="hljs-string">"cmd.exe"</span><span class="hljs-string">",
                        "</span><span class="hljs-string">"Arguments"</span><span class="hljs-string">": "</span><span class="hljs-string">"/c echo 'some scripts' &gt; C:\temp\attack_log.txt &amp;&amp; echo 'doing' &gt;&gt; C:\temp\attack_log.txt"</span><span class="hljs-string">",
                        "</span><span class="hljs-string">"UseShellExecute"</span><span class="hljs-string">": true
                    }}
                }}"</span>;

            <span class="hljs-keyword">var</span> eventData = System.Text.Json.JsonSerializer.Deserialize&lt;TransactionEvent&gt;(maliciousCallbackJson);

            Console.WriteLine(<span class="hljs-string">$"  ä¸»å¯¹è±¡ç±»å‹ï¼š<span class="hljs-subst">{eventData.GetType().FullName}</span>"</span>);
            Console.WriteLine(<span class="hljs-string">$"  ExtData å®é™…ç±»å‹ï¼š<span class="hljs-subst">{eventData.ExtData.GetType().FullName}</span>"</span>);

            <span class="hljs-keyword">if</span> (eventData.ExtData <span class="hljs-keyword">is</span> JsonElement)
            {
                Console.WriteLine(<span class="hljs-string">"  [é˜²æŠ¤æˆåŠŸ] æ¶æ„ç±»å‹ProcessStartInfoè¢«æ‹¦æˆªï¼ŒExtDataä»…ä¿ç•™åŸå§‹JSONç»“æ„ï¼Œæœªååºåˆ—åŒ–ä¸ºæ¶æ„å¯¹è±¡"</span>);
            }
            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (eventData.ExtData <span class="hljs-keyword">is</span> ProcessStartInfo)
            {
                Console.WriteLine(<span class="hljs-string">"  [é˜²æŠ¤å¤±æ•ˆ] æ¶æ„ç±»å‹è§£ææˆåŠŸ"</span>);
            }
            <span class="hljs-keyword">else</span>
            {
                Console.WriteLine(<span class="hljs-string">$"  [æ­£å¸¸ä¸šåŠ¡] è§£æåˆ°åˆæ³•ç±»å‹ï¼š<span class="hljs-subst">{eventData.ExtData.GetType().FullName}</span>"</span>);
            }

            Console.WriteLine(<span class="hljs-string">"\nå°è¯•è½¬æ¢ExtDataä¸ºProcessStartInfoï¼š"</span>);
            <span class="hljs-keyword">try</span>
            {
                <span class="hljs-keyword">var</span> psi = (ProcessStartInfo)eventData.ExtData;
                Console.WriteLine(<span class="hljs-string">"  [é˜²æŠ¤å¤±æ•ˆ] æ¶æ„ç±»å‹è§£ææˆåŠŸ"</span>);
            }
            <span class="hljs-keyword">catch</span> (InvalidCastException ex)
            {
                Console.WriteLine(<span class="hljs-string">$"  [é˜²æŠ¤æˆåŠŸ] å¼ºåˆ¶è½¬æ¢å¤±è´¥ï¼ŒåŸå› ï¼š<span class="hljs-subst">{ex.Message}</span>"</span>);
            }
        }
    }
}
</code></pre>
<p>Â  Â  è¿è¡Œç»“æœä¸ºï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e5597b888ca44c518d12a7fc53422b3a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWV0ZW9yU2VlZA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766643542&amp;x-signature=5AB%2FR1RB%2By5WvyrFvraMpGTcLcI%3D" alt="20251218" loading="lazy"/></p>
<p>ã€€ã€€é€šè¿‡ Demo å¯ä»¥å‘ç°ï¼š</p>
<p>ã€€ã€€- Newtonsoft æ— é˜²æŠ¤æ—¶æ”»å‡»æˆåŠŸï¼›</p>
<p>ã€€ã€€-Â NewtonsoftÂ å¯ç”¨ SerializationBinder åæ‹¦æˆªäº†æ¶æ„ç±»å‹ï¼›</p>
<p>ã€€ã€€- System.Text.Json å§‹ç»ˆæ‹¦æˆªæ¶æ„ç±»å‹ï¼ŒExtData ä¸º JsonElementï¼Œæ— æ³•è½¬æ¢ä¸º ProcessStartInfoã€‚</p>
<h2 data-id="heading-4">ä¸ºä»€ä¹ˆÂ Newtonsoft.Json å¯ç”¨ SerializationBinder å¯é™ä½é£é™©ï¼Ÿ</h2>
<p>ã€€ã€€å…ˆçœ‹ä»£ç ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">EventSerializationBinder</span> : <span class="hljs-title">ISerializationBinder</span>
{
    <span class="hljs-comment">// ä»…å…è®¸çš„å®‰å…¨ç±»å‹ç™½åå•</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> HashSet&lt;<span class="hljs-built_in">string</span>&gt; _allowedTypes = <span class="hljs-keyword">new</span>()
    {
        <span class="hljs-string">"NewtonsoftSecurityDemo.PaymentCompletedEvent"</span>,
        <span class="hljs-string">"NewtonsoftSecurityDemo.OrderCreatedEvent"</span>,
        <span class="hljs-comment">//"System.Diagnostics.ProcessStartInfo"</span>
    };

    <span class="hljs-function"><span class="hljs-keyword">public</span> Type <span class="hljs-title">BindToType</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> assemblyName, <span class="hljs-built_in">string</span> typeName</span>)</span>
    {
        <span class="hljs-comment">// ä»…å…è®¸ç™½åå•å†…çš„ç±»å‹</span>
        <span class="hljs-keyword">if</span> (!_allowedTypes.Contains(typeName))
        {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> NotSupportedException(<span class="hljs-string">$"ç¦æ­¢ååºåˆ—åŒ–æœªæˆæƒç±»å‹ï¼š<span class="hljs-subst">{typeName}</span>"</span>);
        }
        <span class="hljs-keyword">return</span> Type.GetType(<span class="hljs-string">$"<span class="hljs-subst">{typeName}</span>, <span class="hljs-subst">{assemblyName}</span>"</span>) ?? <span class="hljs-keyword">typeof</span>(TransactionEvent);
    }

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">BindToName</span>(<span class="hljs-params">Type serializedType, <span class="hljs-keyword">out</span> <span class="hljs-built_in">string</span>? assemblyName, <span class="hljs-keyword">out</span> <span class="hljs-built_in">string</span>? typeName</span>)</span>
    {
        assemblyName = serializedType.Assembly.FullName;
        typeName = serializedType.FullName;
    }
}
</code></pre>
<p>ã€€ã€€SerializationBinder çš„æ ¸å¿ƒä½œç”¨æ˜¯ï¼šæ¥ç®¡ä» JSON ä¸­çš„ $type å­—ç¬¦ä¸² åˆ°å®é™… Type ç±»å‹çš„æ˜ å°„è¿‡ç¨‹ï¼Œå¼ºåˆ¶æ ¡éªŒç±»å‹åˆæ³•æ€§ã€‚ç®€å•è¯´ï¼š</p>
<p>ã€€ã€€- æ—  SerializationBinderï¼šååºåˆ—åŒ–å™¨ä¼šæ— æ¡ä»¶åå°„åˆ›å»º $type æŒ‡å®šçš„ä»»æ„ç±»å‹ï¼ŒåŒ…æ‹¬å±é™©ç±»å‹ï¼›</p>
<p>ã€€ã€€- æœ‰ SerializationBinderï¼šååºåˆ—åŒ–å™¨å¿…é¡»ç»è¿‡ä½ çš„è‡ªå®šä¹‰æ ¡éªŒé€»è¾‘ï¼Œä»…å…è®¸ç™½åå•å†…çš„ç±»å‹è¢«å®ä¾‹åŒ–ï¼Œç›´æ¥é˜»æ–­æ¶æ„ç±»å‹çš„åˆ›å»ºã€‚</p>
<h2 data-id="heading-5">å°ç»“</h2>
<p>ã€€ã€€Newtonsoft.Json çš„ TypeNameHandling æœºåˆ¶è™½çµæ´»ï¼Œä½†æ˜“è¢«åˆ©ç”¨è§¦å‘å®‰å…¨æ¼æ´ï¼›System.Text.Json é€šè¿‡æ˜¾å¼å¤šæ€é…ç½®ç™½åå•çš„è®¾è®¡ï¼Œè§„é¿äº†ç±»å‹æ³¨å…¥é£é™©ã€‚</p>
<p>ã€€ã€€åœ¨å®é™…å¼€å‘ä¸­ï¼Œé’ˆå¯¹å¤šæ€åœºæ™¯ï¼Œå»ºè®®ä¼˜å…ˆä½¿ç”¨ System.Text.Jsonã€‚è‹¥å¿…é¡»ä½¿ç”¨ Newtonsoft.Jsonï¼Œéœ€éµå¾ªä»¥ä¸‹å®‰å…¨å®è·µï¼š</p>
<p>ã€€ã€€- é¿å…ä½¿ç”¨ TypeNameHandling é None å€¼ã€‚</p>
<p>ã€€ã€€- è‹¥å¿…é¡»å¯ç”¨ï¼Œéœ€ä¸¥æ ¼æ ¡éªŒ $type å­—æ®µç±»å‹çš„åˆæ³•æ€§ï¼Œä»…å…è®¸å®‰å…¨ç±»å‹ã€‚</p>
<p>Â </p>
<p>ã€€ã€€æˆ‘å¸Œæœ›æ‚¨å–œæ¬¢è¿™ç¯‡æ–‡ç« ï¼Œå¹¶ä¸€å¦‚æ—¢å¾€åœ°æ„Ÿè°¢æ‚¨é˜…è¯»å¹¶ä¸æœ‹å‹å’ŒåŒäº‹åˆ†äº«æˆ‘çš„æ–‡ç« ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ·±å…¥ç†è§£Linux IPIPéš§é“ï¼šåŸç†ã€é…ç½®ä¸å®æˆ˜]]></title>    <link>https://juejin.cn/post/7584761090669625344</link>    <guid>https://juejin.cn/post/7584761090669625344</guid>    <pubDate>2025-12-18T06:20:37.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7584761090669625344" data-draft-id="7584760031835684898" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ·±å…¥ç†è§£Linux IPIPéš§é“ï¼šåŸç†ã€é…ç½®ä¸å®æˆ˜"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-18T06:20:37.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¥å¥‡å°æ±¤åœ†"/> <meta itemprop="url" content="https://juejin.cn/user/1151943919285431"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ·±å…¥ç†è§£Linux IPIPéš§é“ï¼šåŸç†ã€é…ç½®ä¸å®æˆ˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1151943919285431/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¥å¥‡å°æ±¤åœ†
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-18T06:20:37.000Z" title="Thu Dec 18 2025 06:20:37 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-18
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¼•è¨€</h2>
<p>åœ¨Linuxç½‘ç»œè™šæ‹ŸåŒ–é¢†åŸŸï¼Œéš§é“æŠ€æœ¯æ˜¯å®ç°è·¨ç½‘ç»œé€šä¿¡çš„å…³é”®æŠ€æœ¯ä¹‹ä¸€ã€‚ç‰¹åˆ«æ˜¯åœ¨å®¹å™¨åŒ–å’ŒKubernetesç¯å¢ƒä¸­ï¼ŒFlannelç­‰ç½‘ç»œæ’ä»¶çš„æ—©æœŸç‰ˆæœ¬å¹¿æ³›ä½¿ç”¨IPIPéš§é“æ¥å®ç°Podé—´çš„è·¨èŠ‚ç‚¹é€šä¿¡ã€‚æœ¬æ–‡å°†æ·±å…¥æ¢è®¨IPIPéš§é“çš„å·¥ä½œåŸç†ã€é…ç½®æ–¹æ³•åŠå…¶åœ¨å®¹å™¨ç½‘ç»œä¸­çš„åº”ç”¨ã€‚</p>
<h2 data-id="heading-1">1.ä»€ä¹ˆæ˜¯IPIPéš§é“ï¼Ÿ</h2>
<p>IPIPéš§é“æ˜¯Linuxå†…æ ¸<strong>åŸç”Ÿæ”¯æŒçš„ä¸€ç§ä¸‰å±‚éš§é“åè®®ï¼Œå…¨ç§°ä¸ºIPv4 in IPv4ã€‚å…¶æ ¸å¿ƒåŸç†æ˜¯åœ¨åŸå§‹IPv4æŠ¥æ–‡çš„åŸºç¡€ä¸Šå†å°è£…ä¸€ä¸ªIPv4æŠ¥æ–‡å¤´</strong>ï¼Œä»è€Œå®ç°æŠ¥æ–‡åœ¨ä¸åŒç½‘ç»œé—´çš„é€æ˜ä¼ è¾“ã€‚<br/>
Linuxå†…æ ¸æ”¯æŒçš„äº”ç§ä¸»è¦L3éš§é“åè®®åŒ…æ‹¬ï¼š</p>
<ul>
<li>ipipï¼šIPv4 in IPv4ï¼Œåœ¨IPv4æŠ¥æ–‡å¤–å°è£…IPv4æŠ¥æ–‡ï¼›</li>
<li>GREï¼šé€šç”¨è·¯ç”±å°è£…ï¼Œæ”¯æŒå¤šç§ç½‘ç»œå±‚åè®®çš„å°è£…ï¼›</li>
<li>sitï¼šIPv6 over IPv4éš§é“ï¼Œç”¨äºIPv6æŠ¥æ–‡åœ¨IPv4ç½‘ç»œä¸­çš„ä¼ è¾“ï¼›</li>
<li>ISATAPï¼šç«™å†…è‡ªåŠ¨éš§é“å¯»å€åè®®ï¼Œä¸»è¦ç”¨äºIPv6è¿‡æ¸¡æŠ€æœ¯ï¼›</li>
<li>VTIï¼šè™šæ‹Ÿéš§é“æ¥å£ï¼Œä¸»è¦åº”ç”¨äºIPSec VPNåœºæ™¯ã€‚</li>
</ul>
<h2 data-id="heading-2">2.IPIPéš§é“çš„å·¥ä½œåŸç†</h2>
<h3 data-id="heading-3">2.1Â å†…æ ¸åŸç”Ÿå®ç°æœºåˆ¶</h3>
<p>IPIPéš§é“å®Œå…¨ç”±Linuxå†…æ ¸ç½‘ç»œæ ˆå®ç°ï¼Œé€šè¿‡ä¸“é—¨çš„å†…æ ¸æ¨¡å—ï¼ˆipip.koï¼‰æä¾›åŠŸèƒ½æ”¯æŒã€‚IPIPéš§é“çš„å·¥ä½œæœºåˆ¶å¯ä»¥æ¦‚æ‹¬ä¸ºä»¥ä¸‹å‡ ä¸ªæ­¥éª¤ï¼š</p>
<ol>
<li>
<p><strong>åŸå§‹æŠ¥æ–‡å‡†å¤‡</strong>ï¼šåº”ç”¨ç¨‹åºç”Ÿæˆéœ€è¦ä¼ è¾“çš„åŸå§‹IPæ•°æ®åŒ…ï¼›</p>
</li>
<li>
<p><strong>è·¯ç”±å†³ç­–</strong>ï¼šå†…æ ¸è·¯ç”±å­ç³»ç»Ÿæ ¹æ®ç›®æ ‡åœ°å€åˆ¤æ–­æ•°æ®åŒ…éœ€è¦é€šè¿‡IPIPéš§é“å‘é€ï¼›</p>
</li>
<li>
<p><strong>éš§é“å°è£…å¤„ç†</strong>ï¼šIPIPå†…æ ¸æ¨¡å—æ‰§è¡Œå°è£…æ“ä½œï¼š</p>
<ul>
<li>åœ¨åŸå§‹IPåŒ…å¤–å±‚æ·»åŠ æ–°çš„IPå¤´ï¼ˆå¤–å±‚IPå¤´ï¼‰ï¼›</li>
<li>è®¾ç½®å¤–å±‚IPå¤´çš„åè®®å­—æ®µä¸º4ï¼ˆè¡¨ç¤ºIPIPåè®®ï¼‰ï¼›</li>
<li>æºåœ°å€è®¾ç½®ä¸ºéš§é“æœ¬åœ°ç«¯ç‚¹åœ°å€ï¼›</li>
<li>ç›®çš„åœ°å€è®¾ç½®ä¸ºéš§é“è¿œç¨‹ç«¯ç‚¹åœ°å€ï¼›</li>
</ul>
</li>
<li>
<p><strong>ç‰©ç†ç½‘ç»œä¼ è¾“</strong>ï¼šå°è£…åçš„æ•°æ®åŒ…é€šè¿‡åº•å±‚ç‰©ç†ç½‘ç»œä¼ è¾“åˆ°å¯¹ç«¯èŠ‚ç‚¹ï¼›</p>
</li>
<li>
<p><strong>åè®®è¯†åˆ«ä¸è§£å°è£…</strong>ï¼šå¯¹ç«¯å†…æ ¸è¯†åˆ«IPIPåè®®åŒ…ï¼Œè¿›è¡Œè§£å°è£…å¤„ç†ï¼›</p>
</li>
<li>
<p><strong>æœ€ç»ˆäº¤ä»˜</strong>ï¼šåŸå§‹æŠ¥æ–‡è¢«æ­£ç¡®äº¤ä»˜åˆ°ç›®æ ‡åº”ç”¨ç¨‹åºã€‚</p>
</li>
</ol>
<p>æ•´ä¸ªè¿‡ç¨‹å°±åƒæ˜¯å°†ä¸€å°ä¿¡ï¼ˆåŸå§‹æ•°æ®åŒ…ï¼‰è£…å…¥å¦ä¸€ä¸ªä¿¡å°ï¼ˆå¤–å±‚IPå¤´ï¼‰è¿›è¡Œé‚®å¯„ã€‚</p>
<h3 data-id="heading-4">2.2 å°è£…æ ¼å¼è¯¦è§£</h3>
<p>åŸå§‹IPåŒ…ï¼ˆå†…å±‚ï¼‰ï¼š</p>







<table><thead><tr><th>1</th><th><code>[åŸå§‹IPå¤´][TCP/UDPå¤´][æ•°æ®è½½è·]</code></th></tr></thead></table>
<p>IPIPå°è£…åï¼ˆå¤–å±‚ï¼‰ï¼š</p>







<table><thead><tr><th>1</th><th><code>[å¤–å±‚IPå¤´(åè®®=4)][åŸå§‹IPå¤´][TCP/UDPå¤´][æ•°æ®è½½è·]</code></th></tr></thead></table>
<h2 data-id="heading-5">3.IPIPéš§é“ä¸TUNè®¾å¤‡å¯¹æ¯”ã€€</h2>
<h3 data-id="heading-6">3.1Â ç›¸åŒç‚¹ï¼šå°è£…ç†å¿µç›¸ä¼¼</h3>
<p>ä¸¤è€…éƒ½åŸºäº"å°è£…"çš„åŸºæœ¬ç†å¿µï¼Œä½†åœ¨å®ç°å±‚é¢æœ‰æœ¬è´¨åŒºåˆ«ï¼š</p>
<ul>
<li><strong>TUNè®¾å¤‡å°†å†…æ ¸çš„IPåŒ…ä¼ é€’ç»™ç”¨æˆ·ç©ºé—´ç¨‹åºè¿›è¡Œå°è£…å¤„ç†ï¼›</strong></li>
<li><strong>IPIPéš§é“åœ¨å†…æ ¸ç©ºé—´ç›´æ¥å®ŒæˆIP-in-IPçš„å°è£…ã€‚</strong></li>
</ul>
<h3 data-id="heading-7">3.2 æœ¬è´¨åŒºåˆ«</h3>
<p><strong>ï¼ˆ1ï¼‰TUNè®¾å¤‡çš„å·¥ä½œæœºåˆ¶ï¼š</strong></p>
<ul>
<li>æ˜¯ç”¨æˆ·ç©ºé—´ä¸å†…æ ¸ç©ºé—´ç½‘ç»œæ ˆçš„æ¡¥æ¢ï¼›</li>
<li>æ•°æ®åŒ…é€šè¿‡/dev/net/tunå­—ç¬¦è®¾å¤‡ä¼ é€’ï¼›</li>
<li>ç”¨æˆ·ç©ºé—´ç¨‹åºè´Ÿè´£å…·ä½“çš„å°è£…é€»è¾‘ï¼ˆå¦‚OpenVPNçš„SSLå°è£…ï¼‰ï¼›</li>
<li>æ¶‰åŠå†…æ ¸æ€ä¸ç”¨æˆ·æ€çš„æ•°æ®æ‹·è´ï¼Œæ€§èƒ½å¼€é”€è¾ƒå¤§ã€‚</li>
</ul>
<p><strong>ï¼ˆ2ï¼‰IPIPéš§é“çš„å·¥ä½œæœºåˆ¶ï¼š</strong></p>
<ul>
<li>å®Œå…¨åœ¨å†…æ ¸ç½‘ç»œæ ˆä¸­å¤„ç†ï¼Œä¸æ¶‰åŠç”¨æˆ·ç©ºé—´ï¼›</li>
<li>æ•°æ®å°è£…/è§£å°è£…ç”±å†…æ ¸IPIPæ¨¡å—ç›´æ¥å®Œæˆï¼›</li>
<li>æ— ç³»ç»Ÿè°ƒç”¨å’Œä¸Šä¸‹æ–‡åˆ‡æ¢å¼€é”€ï¼Œæ€§èƒ½æ›´é«˜ï¼›</li>
<li>å°è£…æ ¼å¼å›ºå®šä¸ºIP-in-IPï¼Œæ— æ³•è‡ªå®šä¹‰ã€‚</li>
</ul>
<h3 data-id="heading-8">3.3 æŠ€æœ¯å¯¹æ¯”æ€»ç»“</h3>



































<table><thead><tr><th>ç‰¹æ€§</th><th>IPIPéš§é“ï¼ˆå†…æ ¸ï¼‰</th><th>TUNè®¾å¤‡</th></tr></thead><tbody><tr><td><strong>å·¥ä½œå±‚é¢</strong>â€‹</td><td>å†…æ ¸ç½‘ç»œå±‚ï¼ˆL3ï¼‰</td><td>å†…æ ¸ç½‘ç»œå±‚ï¼ˆL3ï¼‰</td></tr><tr><td><strong>æ•°æ®å¤„ç†</strong>â€‹</td><td>å†…æ ¸IPIPæ¨¡å—å°è£…/è§£å°è£…</td><td>ç”¨æˆ·ç©ºé—´ç¨‹åºå¤„ç†</td></tr><tr><td><strong>æ€§èƒ½è¡¨ç°</strong>â€‹</td><td>é«˜ï¼ˆæ— ä¸Šä¸‹æ–‡åˆ‡æ¢ï¼‰</td><td>ç›¸å¯¹è¾ƒä½</td></tr><tr><td><strong>çµæ´»æ€§</strong>â€‹</td><td>ä½ï¼ˆå›ºå®šIPIPæ ¼å¼ï¼‰</td><td>é«˜ï¼ˆå¯è‡ªå®šä¹‰å°è£…ï¼‰</td></tr><tr><td><strong>ä½¿ç”¨åœºæ™¯</strong>â€‹</td><td>ç®€å•ç‚¹å¯¹ç‚¹éš§é“</td><td>å¤æ‚VPNã€è‡ªå®šä¹‰åè®®</td></tr></tbody></table>
<h2 data-id="heading-9">4.IPIPéš§é“çš„æ­£ç¡®é…ç½®æ–¹æ³•</h2>
<h3 data-id="heading-10">4.1 ç¯å¢ƒå‡†å¤‡ä¸å†…æ ¸æ”¯æŒÂ </h3>
<p>| 12345678 | <code># æ£€æŸ¥IPIPå†…æ ¸æ¨¡å—æ˜¯å¦å·²åŠ è½½``lsmod | grep ipip</code>Â <code># å¦‚æœªåŠ è½½ï¼Œæ‰‹åŠ¨åŠ è½½IPIPæ¨¡å—``sudo modprobe ipip</code>Â <code># éªŒè¯æ¨¡å—ä¿¡æ¯``sudo modinfo ipip</code> |
| -------- | ------------------------------------------------------------------------------------------------------------- |</p>
<h3 data-id="heading-11">4.2 åˆ›å»ºå’Œé…ç½®IPIPéš§é“</h3>
<p>æ ‡å‡†é…ç½®å‘½ä»¤æ ¼å¼ï¼š</p>







<table><thead><tr><th>12345678</th><th><code># åˆ›å»ºéš§é“è®¾å¤‡``sudo ip tunnel add &lt;éš§é“åç§°&gt; mode ipip remote &lt;å¯¹ç«¯IP&gt; local &lt;æœ¬ç«¯IP&gt; ttl 64</code>Â <code># å¯ç”¨éš§é“è®¾å¤‡``sudo ip link set &lt;éš§é“åç§°&gt; up</code>Â <code># ä¸ºéš§é“è®¾å¤‡åˆ†é…å†…ç½‘IPåœ°å€``sudo ip addr add &lt;å†…ç½‘IP/æ©ç &gt; dev &lt;éš§é“åç§°&gt;</code></th></tr></thead></table>
<p>å®Œæ•´é…ç½®ç¤ºä¾‹ï¼š</p>
<p>èŠ‚ç‚¹Aé…ç½®ï¼ˆæœåŠ¡å™¨IP: 192.168.10.2ï¼‰ï¼š</p>







<table><thead><tr><th>123</th><th><code>sudo ip tunnel add tun1 mode ipip remote 192.168.20.2 local 192.168.10.2``sudo ip link set tun1 up``sudo ip addr add 10.10.100.1/24 dev tun1</code></th></tr></thead></table>
<p>èŠ‚ç‚¹Bé…ç½®ï¼ˆæœåŠ¡å™¨IP: 192.168.20.2ï¼‰ï¼š</p>







<table><thead><tr><th>123</th><th><code>sudo ip tunnel add tun2 mode ipip remote 192.168.10.2 local 192.168.20.2``sudo ip link set tun2 up``sudo ip addr add 10.10.100.2/24 dev tun2</code></th></tr></thead></table>
<p>è¿é€šæ€§éªŒè¯ï¼š</p>







<table><thead><tr><th>123456</th><th><code># æµ‹è¯•éš§é“è¿é€šæ€§``ping 10.10.100.2</code>Â <code># æŸ¥çœ‹éš§é“æ¥å£çŠ¶æ€``ip link show tun1``ip addr show tun1</code></th></tr></thead></table>
<h2 data-id="heading-12">5.Kubernetesç½‘ç»œæ’ä»¶ä¸­çš„å®é™…åº”ç”¨</h2>
<p>åœ¨Kubernetesç½‘ç»œç”Ÿæ€ä¸­ï¼ŒFlannelç­‰ç½‘ç»œæ’ä»¶çš„æ—©æœŸç‰ˆæœ¬é‡‡ç”¨IPIPéš§é“å®ç°Podç½‘ç»œäº’é€šï¼Œå…¶æ ¸å¿ƒæ¶æ„ï¼š</p>
<p><strong>ï¼ˆ1ï¼‰ç½‘ç»œè§„åˆ’æœºåˆ¶ï¼š</strong></p>
<ul>
<li>æ¯ä¸ªKubernetesèŠ‚ç‚¹åˆ†é…ç‹¬ç«‹çš„Pod CIDRå­ç½‘ï¼›</li>
<li>èŠ‚ç‚¹é—´é€šè¿‡BGPæˆ–é™æ€è·¯ç”±åŒæ­¥ç½‘ç»œä¿¡æ¯ï¼›</li>
<li>IPIPéš§é“ç”¨äºå»ºç«‹èŠ‚ç‚¹é—´çš„è™šæ‹Ÿç½‘ç»œè¿æ¥ã€‚</li>
</ul>
<p><strong>ï¼ˆ2ï¼‰Flannel IPIPæ¨¡å¼å·¥ä½œæµç¨‹ï¼š</strong></p>
<ol>
<li><strong>èŠ‚ç‚¹æ³¨å†Œ</strong>ï¼šèŠ‚ç‚¹å¯åŠ¨æ—¶å‘etcdæ³¨å†Œå¹¶è·å–Podå­ç½‘åˆ†é…ï¼›</li>
<li><strong>éš§é“å»ºç«‹</strong>ï¼šæ ¹æ®é›†ç¾¤èŠ‚ç‚¹ä¿¡æ¯è‡ªåŠ¨åˆ›å»ºIPIPéš§é“ï¼›</li>
<li><strong>è·¯ç”±åŒæ­¥</strong>ï¼šé€šè¿‡è·¯ç”±è¡¨ç¡®ä¿æ•°æ®åŒ…æ­£ç¡®è½¬å‘ï¼›</li>
<li><strong>è·¨èŠ‚ç‚¹é€šä¿¡</strong>ï¼šPodé—´æµé‡é€šè¿‡IPIPéš§é“é€æ˜ä¼ è¾“ã€‚</li>
</ol>
<p><strong>ï¼ˆ3ï¼‰å®é™…é€šä¿¡æµç¨‹å®ä¾‹</strong></p>
<p>å½“Pod Aï¼ˆèŠ‚ç‚¹1ï¼ŒIP: 10.244.1.2ï¼‰ä¸Pod Bï¼ˆèŠ‚ç‚¹2ï¼ŒIP: 10.244.2.3ï¼‰é€šä¿¡æ—¶ï¼š</p>
<ol>
<li>
<p><strong>æºèŠ‚ç‚¹å¤„ç†</strong>ï¼š</p>
<ul>
<li>Pod Aå‘é€ç›®æ ‡ä¸º10.244.2.3çš„æ•°æ®åŒ…ï¼›</li>
<li>èŠ‚ç‚¹1è·¯ç”±è¡¨æŒ‡ç¤ºé€šè¿‡IPIPéš§é“å‘é€ï¼›</li>
<li>IPIPæ¨¡å—å°è£…æ•°æ®åŒ…ï¼Œå¤–å±‚æŒ‡å‘èŠ‚ç‚¹2æœåŠ¡å™¨IPã€‚</li>
</ul>
</li>
<li>
<p><strong>ç½‘ç»œä¼ è¾“</strong>ï¼š</p>
<ul>
<li>å°è£…åŒ…ç»ç‰©ç†ç½‘ç»œä¼ è¾“åˆ°èŠ‚ç‚¹2ï¼›</li>
<li>ä¸­é—´ç½‘ç»œè®¾å¤‡ä»…èƒ½çœ‹åˆ°å¤–å±‚IPå¤´ã€‚</li>
</ul>
</li>
<li>
<p><strong>ç›®æ ‡èŠ‚ç‚¹å¤„ç†</strong>ï¼š</p>
<ul>
<li>èŠ‚ç‚¹2å†…æ ¸è§£å°è£…ï¼Œæ¢å¤åŸå§‹Podé€šä¿¡åŒ…ï¼›</li>
<li>æ•°æ®åŒ…æœ€ç»ˆäº¤ä»˜ç»™Pod Bã€‚</li>
</ul>
</li>
</ol>
<h2 data-id="heading-13">6.IPIPéš§é“çš„ä¼˜ç¼ºç‚¹åˆ†æ</h2>
<h3 data-id="heading-14">6.1 ä¼˜åŠ¿ç‰¹æ€§</h3>
<ul>
<li><strong>å†…æ ¸åŸç”Ÿæ”¯æŒ</strong>ï¼šæ— éœ€é¢å¤–è½¯ä»¶ï¼Œç³»ç»Ÿç¨³å®šæ€§é«˜ï¼›</li>
<li><strong>é…ç½®ç®€å•ç›´è§‚</strong>ï¼šå‘½ä»¤è¡Œé…ç½®æ¸…æ™°ï¼Œè¿ç»´æˆæœ¬ä½ï¼›</li>
<li><strong>æ€§èƒ½è¡¨ç°ä¼˜å¼‚</strong>ï¼šå®Œå…¨å†…æ ¸å¤„ç†ï¼Œæ— ä¸Šä¸‹æ–‡åˆ‡æ¢å¼€é”€ï¼›</li>
<li><strong>åè®®é€æ˜æ€§å¥½</strong>ï¼šæ”¯æŒä¼ è¾“å„ç§IPåè®®æ•°æ®ï¼›</li>
<li><strong>èµ„æºæ¶ˆè€—ä½</strong>ï¼šå†…å­˜å’ŒCPUå ç”¨ç›¸å¯¹è¾ƒå°ã€‚</li>
</ul>
<h3 data-id="heading-15">6.2 å±€é™æ€§åˆ†æ</h3>
<ul>
<li><strong>å®‰å…¨æ€§ä¸è¶³</strong>ï¼šç¼ºä¹åŠ å¯†æœºåˆ¶ï¼Œæ•°æ®ä¼ è¾“ä¸ºæ˜æ–‡ï¼›</li>
<li><strong>NATæ”¯æŒå·®</strong>ï¼šåœ¨å¤æ‚NATç¯å¢ƒä¸­é…ç½®å›°éš¾ï¼›</li>
<li><strong>åŠŸèƒ½æ‰©å±•æ€§æœ‰é™</strong>ï¼šç›¸æ¯”VXLANç­‰åè®®åŠŸèƒ½å•ä¸€ï¼›</li>
<li><strong>IPv6æ”¯æŒæœ‰é™</strong>ï¼šä¸»è¦é’ˆå¯¹IPv4ç¯å¢ƒè®¾è®¡ï¼›</li>
<li><strong>MTUé—®é¢˜</strong>ï¼šå°è£…å¢å¤§åŒ…å°ºå¯¸ï¼Œå¯èƒ½å¼•å‘è·¯å¾„MTUé—®é¢˜ã€‚</li>
</ul>
<h2 data-id="heading-16">7.æ€»ç»“</h2>
<p>IPIPéš§é“ä½œä¸ºLinuxå†…æ ¸åŸç”Ÿçš„ç®€å•éš§é“åè®®ï¼Œå…¶æ ¸å¿ƒä»·å€¼åœ¨äºæ•™ä¼šæˆ‘ä»¬å¦‚ä½•åœ¨ç°æœ‰åŸºç¡€ç½‘ç»œï¼ˆUnderlay Networkï¼‰ä¹‹ä¸Šæ„å»ºé€»è¾‘ç‹¬ç«‹çš„è™šæ‹Ÿç½‘ç»œï¼ˆOverlay Networkï¼‰ã€‚è¿™ä¸€ç†å¿µæ­£æ˜¯ç°ä»£äº‘è®¡ç®—å’Œå®¹å™¨ç½‘ç»œçš„æ ¸å¿ƒæ¶æ„æ€æƒ³ã€‚</p>
<p><strong>ï¼ˆ1ï¼‰åœ¨Kubernetesç½‘ç»œä¸­çš„å®è·µæ„ä¹‰ï¼š</strong></p>
<ul>
<li>ä¸€ä¸ªKubernetesé›†ç¾¤å¯èƒ½åŒ…å«æˆåƒä¸Šä¸‡ä¸ªPodï¼Œåˆ†å¸ƒåœ¨ä¸åŒçš„ç‰©ç†èŠ‚ç‚¹ä¸Šï¼›</li>
<li>æ¯ä¸ªPodéƒ½éœ€è¦ç‹¬ç«‹çš„IPåœ°å€ï¼Œä¸”æ‰€æœ‰Podè¦èƒ½åœ¨æ‰å¹³ç½‘ç»œä¸­ç›´æ¥é€šä¿¡ï¼›</li>
<li>åº•å±‚ç‰©ç†ç½‘ç»œå¾€å¾€å­˜åœ¨å¤æ‚æ€§å’Œéš”ç¦»æ€§é™åˆ¶ï¼›</li>
<li>IPIPéš§é“ç­‰è¦†ç›–ç½‘ç»œæŠ€æœ¯å®Œç¾è§£å†³äº†è¿™äº›é—®é¢˜ã€‚</li>
</ul>
<p><strong>ï¼ˆ2ï¼‰æŠ€æœ¯æ¼”è¿›è§†è§’ï¼š</strong></p>
<p>è™½ç„¶ç°ä»£äº‘åŸç”Ÿç½‘ç»œé€æ¸è½¬å‘VXLANã€WireGuardç­‰æ›´å…ˆè¿›çš„æŠ€æœ¯ï¼Œä½†ç†è§£IPIPéš§é“çš„å·¥ä½œåŸç†ä»ç„¶æ˜¯æŒæ¡ç½‘ç»œè™šæ‹ŸåŒ–æŠ€æœ¯çš„é‡è¦åŸºç¡€ã€‚é€šè¿‡å­¦ä¹ IPIPéš§é“ï¼Œæˆ‘ä»¬èƒ½å¤Ÿï¼š</p>
<ol>
<li>ç†è§£è¦†ç›–ç½‘ç»œçš„åŸºæœ¬æ¦‚å¿µå’Œå·¥ä½œåŸç†ï¼›</li>
<li>æŒæ¡Linuxå†…æ ¸ç½‘ç»œæ ˆçš„éš§é“å®ç°æœºåˆ¶ï¼›</li>
<li>ä¸ºå­¦ä¹ æ›´å¤æ‚çš„ç½‘ç»œè™šæ‹ŸåŒ–æŠ€æœ¯å¥ å®šåŸºç¡€ï¼›</li>
<li>æ·±å…¥ç†è§£å®¹å™¨ç½‘ç»œæ’ä»¶çš„åº•å±‚å®ç°åŸç†ã€‚</li>
</ol>
<p>IPIPéš§é“è™½ç„¶åœ¨åŠŸèƒ½æ€§å’Œå®‰å…¨æ€§æ–¹é¢å­˜åœ¨å±€é™ï¼Œä½†å…¶ç®€å•é«˜æ•ˆçš„ç‰¹æ€§åœ¨ç‰¹å®šåœºæ™¯ä¸‹ä»å…·æœ‰å®ç”¨ä»·å€¼ï¼Œæ˜¯å­¦ä¹ Linuxç½‘ç»œæŠ€æœ¯ä¸å¯æˆ–ç¼ºçš„é‡è¦ä¸€ç¯ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Webpack æ„å»ºä¼˜åŒ–æŒ‡å—]]></title>    <link>https://juejin.cn/post/7584760031835734050</link>    <guid>https://juejin.cn/post/7584760031835734050</guid>    <pubDate>2025-12-18T06:30:49.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7584760031835734050" data-draft-id="7584909732612292643" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Webpack æ„å»ºä¼˜åŒ–æŒ‡å—"/> <meta itemprop="keywords" content="Webpack"/> <meta itemprop="datePublished" content="2025-12-18T06:30:49.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æœªæ¥å¯æœŸstruggle"/> <meta itemprop="url" content="https://juejin.cn/user/1468603266243576"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Webpack æ„å»ºä¼˜åŒ–æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1468603266243576/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æœªæ¥å¯æœŸstruggle
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-18T06:30:49.000Z" title="Thu Dec 18 2025 06:30:49 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-18
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">æ¦‚è¿°</h2>
<p>æœ¬æ–‡æ¡£æä¾›äº† webpack æ‰“åŒ…æ„å»ºé€Ÿåº¦ä¼˜åŒ–çš„å®Œæ•´æ–¹æ¡ˆï¼Œ<strong>æ˜ç¡®åŒºåˆ†å¼€å‘ç¯å¢ƒå’Œç”Ÿäº§ç¯å¢ƒçš„ä¼˜åŒ–ç­–ç•¥</strong>ã€‚</p>
<h2 data-id="heading-1">å¿«é€Ÿå‚è€ƒ</h2>

























































































<table><thead><tr><th>ä¼˜åŒ–æ–¹æ¡ˆ</th><th>å¼€å‘ç¯å¢ƒ</th><th>ç”Ÿäº§ç¯å¢ƒ</th><th>æ•ˆæœ</th><th>éš¾åº¦</th></tr></thead><tbody><tr><td>å¯ç”¨ç¼“å­˜</td><td>âœ…</td><td>âœ…</td><td>â­â­â­â­â­</td><td>ç®€å•</td></tr><tr><td>ä¼˜åŒ– Source Map</td><td>âœ…</td><td>âŒ</td><td>â­â­â­â­â­</td><td>ç®€å•</td></tr><tr><td>ç¦ç”¨ä»£ç å‹ç¼©</td><td>âœ…</td><td>âŒ</td><td>â­â­â­â­â­</td><td>ç®€å•</td></tr><tr><td>ä½¿ç”¨ thread-loader</td><td>âœ…</td><td>âœ…</td><td>â­â­â­â­</td><td>ç®€å•</td></tr><tr><td>ä¼˜åŒ– resolve é…ç½®</td><td>âœ…</td><td>âœ…</td><td>â­â­â­â­</td><td>ç®€å•</td></tr><tr><td>ç¦ç”¨ä»£ç åˆ†å‰²</td><td>âœ…</td><td>âŒ</td><td>â­â­â­</td><td>ç®€å•</td></tr><tr><td>ä½¿ç”¨ esbuild-loader</td><td>âœ…</td><td>âœ…</td><td>â­â­â­</td><td>ä¸­ç­‰</td></tr><tr><td>ä½¿ç”¨ DllPlugin</td><td>âœ…</td><td>âœ…</td><td>â­â­â­</td><td>å¤æ‚</td></tr><tr><td>ä¼˜åŒ– Terser é…ç½®</td><td>âŒ</td><td>âœ…</td><td>â­â­â­â­</td><td>ç®€å•</td></tr><tr><td>ä»£ç åˆ†å‰²</td><td>âŒ</td><td>âœ…</td><td>â­â­â­â­</td><td>ç®€å•</td></tr><tr><td>Tree Shaking</td><td>âŒ</td><td>âœ…</td><td>â­â­â­â­</td><td>ç®€å•ï¼ˆè‡ªåŠ¨ï¼‰</td></tr></tbody></table>
<h2 data-id="heading-2">ä¼˜åŒ–æ–¹æ¡ˆåˆ†ç±»</h2>
<ul>
<li>ğŸŸ¢ <strong>é€šç”¨ä¼˜åŒ–</strong>: å¼€å‘å’Œç”Ÿäº§ç¯å¢ƒéƒ½é€‚ç”¨</li>
<li>ğŸ”µ <strong>å¼€å‘ç¯å¢ƒä¼˜åŒ–</strong>: ä¸»è¦é’ˆå¯¹æœ¬åœ°å¼€å‘æ„å»ºé€Ÿåº¦</li>
<li>ğŸŸ  <strong>ç”Ÿäº§ç¯å¢ƒä¼˜åŒ–</strong>: ä¸»è¦é’ˆå¯¹ç”Ÿäº§æ„å»ºé€Ÿåº¦å’Œäº§ç‰©ä¼˜åŒ–</li>
</ul>
<hr/>
<h2 data-id="heading-3">ğŸŸ¢ é€šç”¨ä¼˜åŒ–æ–¹æ¡ˆï¼ˆå¼€å‘å’Œç”Ÿäº§éƒ½é€‚ç”¨ï¼‰</h2>
<h3 data-id="heading-4">1. å¯ç”¨ç¼“å­˜ï¼ˆæœ€é‡è¦ï¼Œæ•ˆæœæœ€æ˜æ˜¾ï¼‰</h3>
<p>webpack 5 å†…ç½®äº†æ–‡ä»¶ç³»ç»Ÿç¼“å­˜ï¼Œå¯ä»¥æ˜¾è‘—æå‡äºŒæ¬¡æ„å»ºé€Ÿåº¦ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// webpack.config.js</span>
<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
  <span class="hljs-attr">cache</span>: {
    <span class="hljs-attr">type</span>: <span class="hljs-string">'filesystem'</span>, <span class="hljs-comment">// ä½¿ç”¨æ–‡ä»¶ç³»ç»Ÿç¼“å­˜</span>
    <span class="hljs-attr">buildDependencies</span>: {
      <span class="hljs-attr">config</span>: [__filename], <span class="hljs-comment">// é…ç½®æ–‡ä»¶å˜åŒ–æ—¶é‡æ–°æ„å»ºç¼“å­˜</span>
    },
    <span class="hljs-attr">cacheDirectory</span>: path.<span class="hljs-title function_">resolve</span>(__dirname, <span class="hljs-string">'node_modules/.cache/webpack'</span>), <span class="hljs-comment">// ç¼“å­˜ç›®å½•</span>
  },
};
</code></pre>
<p><strong>æ•ˆæœ</strong>: äºŒæ¬¡æ„å»ºé€Ÿåº¦æå‡ 60-80%<br/>
<strong>é€‚ç”¨</strong>: âœ… å¼€å‘ç¯å¢ƒ âœ… ç”Ÿäº§ç¯å¢ƒ</p>
<hr/>
<h3 data-id="heading-5">2. ä½¿ç”¨å¤šçº¿ç¨‹/å¹¶è¡Œå¤„ç†</h3>
<p>ä½¿ç”¨ <code>thread-loader</code> å°†è€—æ—¶çš„ loader æ”¾åœ¨ç‹¬ç«‹çº¿ç¨‹ä¸­å¤„ç†ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> os = <span class="hljs-built_in">require</span>(<span class="hljs-string">'os'</span>);

<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
  <span class="hljs-attr">module</span>: {
    <span class="hljs-attr">rules</span>: [
      {
        <span class="hljs-attr">test</span>: <span class="hljs-regexp">/\.js$/</span>,
        <span class="hljs-attr">use</span>: [
          {
            <span class="hljs-attr">loader</span>: <span class="hljs-string">'thread-loader'</span>,
            <span class="hljs-attr">options</span>: {
              <span class="hljs-attr">workers</span>: os.<span class="hljs-title function_">cpus</span>().<span class="hljs-property">length</span> - <span class="hljs-number">1</span>, <span class="hljs-comment">// ä½¿ç”¨ CPU æ ¸å¿ƒæ•° - 1</span>
              <span class="hljs-attr">poolTimeout</span>: <span class="hljs-number">2000</span>, <span class="hljs-comment">// çº¿ç¨‹æ± è¶…æ—¶æ—¶é—´</span>
            },
          },
          <span class="hljs-string">'babel-loader'</span>,
        ],
      },
    ],
  },
};
</code></pre>
<p><strong>å®‰è£…</strong>: <code>npm install --save-dev thread-loader</code><br/>
<strong>æ•ˆæœ</strong>: æ„å»ºé€Ÿåº¦æå‡ 30-50%<br/>
<strong>é€‚ç”¨</strong>: âœ… å¼€å‘ç¯å¢ƒ âœ… ç”Ÿäº§ç¯å¢ƒ</p>
<hr/>
<h3 data-id="heading-6">3. ä¼˜åŒ– resolve é…ç½®</h3>
<p>å‡å°‘æ¨¡å—è§£ææ—¶é—´ï¼Œæ˜ç¡®æŒ‡å®šæŸ¥æ‰¾è·¯å¾„ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
  <span class="hljs-attr">resolve</span>: {
    <span class="hljs-comment">// æ˜ç¡®æŒ‡å®šæ‰©å±•åï¼Œå‡å°‘æ–‡ä»¶æŸ¥æ‰¾</span>
    <span class="hljs-attr">extensions</span>: [<span class="hljs-string">'.js'</span>, <span class="hljs-string">'.vue'</span>, <span class="hljs-string">'.json'</span>, <span class="hljs-string">'.ts'</span>],
    
    <span class="hljs-comment">// ä½¿ç”¨åˆ«åï¼Œé¿å…ç›¸å¯¹è·¯å¾„è§£æ</span>
    <span class="hljs-attr">alias</span>: {
      <span class="hljs-string">'@'</span>: path.<span class="hljs-title function_">resolve</span>(__dirname, <span class="hljs-string">'src'</span>),
      <span class="hljs-string">'@components'</span>: path.<span class="hljs-title function_">resolve</span>(__dirname, <span class="hljs-string">'src/components'</span>),
    },
    
    <span class="hljs-comment">// æ˜ç¡®æŒ‡å®š node_modules ä½ç½®</span>
    <span class="hljs-attr">modules</span>: [
      path.<span class="hljs-title function_">resolve</span>(__dirname, <span class="hljs-string">'node_modules'</span>),
      <span class="hljs-string">'node_modules'</span>,
    ],
    
    <span class="hljs-comment">// é¿å…è§£æç¬¦å·é“¾æ¥</span>
    <span class="hljs-attr">symlinks</span>: <span class="hljs-literal">false</span>,
    
    <span class="hljs-comment">// é¿å…è§£æä¸å¿…è¦çš„æ¨¡å—</span>
    <span class="hljs-attr">mainFields</span>: [<span class="hljs-string">'browser'</span>, <span class="hljs-string">'module'</span>, <span class="hljs-string">'main'</span>],
  },
};
</code></pre>
<p><strong>æ•ˆæœ</strong>: æ¨¡å—è§£æé€Ÿåº¦æå‡ 20-30%<br/>
<strong>é€‚ç”¨</strong>: âœ… å¼€å‘ç¯å¢ƒ âœ… ç”Ÿäº§ç¯å¢ƒ</p>
<hr/>
<h3 data-id="heading-7">4. å‡å°‘æ–‡ä»¶æœç´¢èŒƒå›´</h3>
<p>æ˜ç¡®æŒ‡å®šéœ€è¦å¤„ç†çš„æ–‡ä»¶èŒƒå›´ï¼Œæ’é™¤ä¸å¿…è¦çš„ç›®å½•ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
  <span class="hljs-attr">module</span>: {
    <span class="hljs-attr">rules</span>: [
      {
        <span class="hljs-attr">test</span>: <span class="hljs-regexp">/\.js$/</span>,
        <span class="hljs-attr">loader</span>: <span class="hljs-string">'babel-loader'</span>,
        <span class="hljs-comment">// åªå¤„ç† src ç›®å½•</span>
        <span class="hljs-attr">include</span>: path.<span class="hljs-title function_">resolve</span>(__dirname, <span class="hljs-string">'src'</span>),
        <span class="hljs-comment">// æ’é™¤ node_modules</span>
        <span class="hljs-attr">exclude</span>: <span class="hljs-regexp">/node_modules/</span>,
      },
    ],
  },
};
</code></pre>
<p><strong>æ•ˆæœ</strong>: å‡å°‘ä¸å¿…è¦çš„æ–‡ä»¶å¤„ç†<br/>
<strong>é€‚ç”¨</strong>: âœ… å¼€å‘ç¯å¢ƒ âœ… ç”Ÿäº§ç¯å¢ƒ</p>
<hr/>
<h3 data-id="heading-8">5. ä½¿ç”¨æ›´å¿«çš„ Loader æ›¿ä»£æ–¹æ¡ˆ</h3>
<p>ä½¿ç”¨ <code>esbuild-loader</code> æ›¿ä»£ <code>babel-loader</code>ï¼Œé€Ÿåº¦æå‡ 10-100 å€ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
  <span class="hljs-attr">module</span>: {
    <span class="hljs-attr">rules</span>: [
      {
        <span class="hljs-attr">test</span>: <span class="hljs-regexp">/\.js$/</span>,
        <span class="hljs-attr">loader</span>: <span class="hljs-string">'esbuild-loader'</span>,
        <span class="hljs-attr">options</span>: {
          <span class="hljs-attr">loader</span>: <span class="hljs-string">'jsx'</span>,
          <span class="hljs-attr">target</span>: <span class="hljs-string">'es2015'</span>,
        },
      },
      {
        <span class="hljs-attr">test</span>: <span class="hljs-regexp">/\.ts$/</span>,
        <span class="hljs-attr">loader</span>: <span class="hljs-string">'esbuild-loader'</span>,
        <span class="hljs-attr">options</span>: {
          <span class="hljs-attr">loader</span>: <span class="hljs-string">'ts'</span>,
          <span class="hljs-attr">target</span>: <span class="hljs-string">'es2015'</span>,
        },
      },
    ],
  },
};
</code></pre>
<p><strong>å®‰è£…</strong>: <code>npm install --save-dev esbuild-loader</code><br/>
<strong>æ•ˆæœ</strong>: æ„å»ºé€Ÿåº¦æå‡ 5-10 å€ï¼ˆé€‚åˆå¤§å‹é¡¹ç›®ï¼‰<br/>
<strong>é€‚ç”¨</strong>: âœ… å¼€å‘ç¯å¢ƒ âœ… ç”Ÿäº§ç¯å¢ƒ<br/>
<strong>æ³¨æ„</strong>: éœ€è¦ç¡®ä¿ esbuild-loader æ”¯æŒä½ çš„è¯­æ³•ç‰¹æ€§</p>
<hr/>
<h3 data-id="heading-9">6. ä½¿ç”¨ DllPluginï¼ˆé€‚åˆå¤§å‹é¡¹ç›®ï¼‰</h3>
<p>é¢„æ„å»ºç¬¬ä¸‰æ–¹åº“ï¼Œé¿å…æ¯æ¬¡éƒ½é‡æ–°ç¼–è¯‘ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// webpack.dll.config.js - é¢„æ„å»ºç¬¬ä¸‰æ–¹åº“</span>
<span class="hljs-keyword">const</span> path = <span class="hljs-built_in">require</span>(<span class="hljs-string">'path'</span>);
<span class="hljs-keyword">const</span> webpack = <span class="hljs-built_in">require</span>(<span class="hljs-string">'webpack'</span>);

<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
  <span class="hljs-attr">mode</span>: <span class="hljs-string">'production'</span>,
  <span class="hljs-attr">entry</span>: {
    <span class="hljs-attr">vendor</span>: [<span class="hljs-string">'vue'</span>, <span class="hljs-string">'vue-router'</span>, <span class="hljs-string">'axios'</span>, <span class="hljs-string">'lodash'</span>],
  },
  <span class="hljs-attr">output</span>: {
    <span class="hljs-attr">path</span>: path.<span class="hljs-title function_">resolve</span>(__dirname, <span class="hljs-string">'dll'</span>),
    <span class="hljs-attr">filename</span>: <span class="hljs-string">'[name].dll.js'</span>,
    <span class="hljs-attr">library</span>: <span class="hljs-string">'[name]_library'</span>,
  },
  <span class="hljs-attr">plugins</span>: [
    <span class="hljs-keyword">new</span> webpack.<span class="hljs-title class_">DllPlugin</span>({
      <span class="hljs-attr">path</span>: path.<span class="hljs-title function_">join</span>(__dirname, <span class="hljs-string">'dll'</span>, <span class="hljs-string">'[name]-manifest.json'</span>),
      <span class="hljs-attr">name</span>: <span class="hljs-string">'[name]_library'</span>,
    }),
  ],
};

<span class="hljs-comment">// webpack.config.js - ä¸»é…ç½®</span>
<span class="hljs-keyword">const</span> webpack = <span class="hljs-built_in">require</span>(<span class="hljs-string">'webpack'</span>);

<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
  <span class="hljs-attr">plugins</span>: [
    <span class="hljs-keyword">new</span> webpack.<span class="hljs-title class_">DllReferencePlugin</span>({
      <span class="hljs-attr">manifest</span>: <span class="hljs-built_in">require</span>(<span class="hljs-string">'./dll/vendor-manifest.json'</span>),
    }),
  ],
};
</code></pre>
<p><strong>æ•ˆæœ</strong>: é¦–æ¬¡æ„å»ºåï¼Œåç»­æ„å»ºé€Ÿåº¦æå‡ 50-80%<br/>
<strong>é€‚ç”¨</strong>: âœ… å¼€å‘ç¯å¢ƒ âœ… ç”Ÿäº§ç¯å¢ƒ<br/>
<strong>æ³¨æ„</strong>: é…ç½®ç›¸å¯¹å¤æ‚ï¼Œé€‚åˆå¤§å‹é¡¹ç›®</p>
<hr/>
<h2 data-id="heading-10">ğŸ”µ å¼€å‘ç¯å¢ƒä¼˜åŒ–æ–¹æ¡ˆï¼ˆä¸»è¦é’ˆå¯¹æœ¬åœ°å¼€å‘ï¼‰</h2>
<h3 data-id="heading-11">7. ä¼˜åŒ– Source Mapï¼ˆå¼€å‘ç¯å¢ƒï¼‰</h3>
<p>å¼€å‘ç¯å¢ƒä½¿ç”¨æ›´å¿«çš„ source map ç±»å‹ï¼Œç”Ÿäº§ç¯å¢ƒä½¿ç”¨å®Œæ•´ source mapã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
  <span class="hljs-comment">// å¼€å‘ç¯å¢ƒä½¿ç”¨æœ€å¿«çš„ source map</span>
  <span class="hljs-attr">devtool</span>: process.<span class="hljs-property">env</span>.<span class="hljs-property">NODE_ENV</span> === <span class="hljs-string">'production'</span> 
    ? <span class="hljs-string">'source-map'</span>           <span class="hljs-comment">// ç”Ÿäº§ç¯å¢ƒï¼šå®Œæ•´ source map</span>
    : <span class="hljs-string">'eval-cheap-module-source-map'</span>, <span class="hljs-comment">// å¼€å‘ç¯å¢ƒï¼šæœ€å¿«é€Ÿåº¦</span>
};
</code></pre>
<p><strong>Source Map ç±»å‹å¯¹æ¯”</strong>:</p>
<ul>
<li><code>eval-cheap-module-source-map</code>: âš¡ æœ€å¿«ï¼Œé€‚åˆå¼€å‘ç¯å¢ƒ</li>
<li><code>cheap-module-source-map</code>: è¾ƒå¿«ï¼Œé€‚åˆå¼€å‘ç¯å¢ƒ</li>
<li><code>source-map</code>: æœ€æ…¢ä½†æœ€å®Œæ•´ï¼Œé€‚åˆç”Ÿäº§ç¯å¢ƒ</li>
</ul>
<p><strong>æ•ˆæœ</strong>: å¼€å‘ç¯å¢ƒæ„å»ºé€Ÿåº¦æå‡ 50-70%<br/>
<strong>é€‚ç”¨</strong>: ğŸ”µ å¼€å‘ç¯å¢ƒï¼ˆç”Ÿäº§ç¯å¢ƒä½¿ç”¨å®Œæ•´ source mapï¼‰</p>
<hr/>
<h3 data-id="heading-12">8. å¼€å‘ç¯å¢ƒç¦ç”¨ä»£ç å‹ç¼©</h3>
<p>å¼€å‘ç¯å¢ƒä¸éœ€è¦å‹ç¼©ä»£ç ï¼Œå¯ä»¥æ˜¾è‘—æå‡æ„å»ºé€Ÿåº¦ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
  <span class="hljs-attr">optimization</span>: {
    <span class="hljs-attr">minimize</span>: process.<span class="hljs-property">env</span>.<span class="hljs-property">NODE_ENV</span> === <span class="hljs-string">'production'</span>, <span class="hljs-comment">// åªåœ¨ç”Ÿäº§ç¯å¢ƒå‹ç¼©</span>
  },
};
</code></pre>
<p><strong>æ•ˆæœ</strong>: å¼€å‘ç¯å¢ƒæ„å»ºé€Ÿåº¦æå‡ 40-60%<br/>
<strong>é€‚ç”¨</strong>: ğŸ”µ å¼€å‘ç¯å¢ƒ</p>
<hr/>
<h3 data-id="heading-13">9. å¼€å‘ç¯å¢ƒç¦ç”¨ä»£ç åˆ†å‰²</h3>
<p>å¼€å‘ç¯å¢ƒå¯ä»¥ç¦ç”¨ä»£ç åˆ†å‰²ï¼Œå‡å°‘æ„å»ºæ—¶é—´ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
  <span class="hljs-attr">optimization</span>: {
    <span class="hljs-attr">splitChunks</span>: process.<span class="hljs-property">env</span>.<span class="hljs-property">NODE_ENV</span> === <span class="hljs-string">'production'</span> ? {
      <span class="hljs-attr">chunks</span>: <span class="hljs-string">'all'</span>,
      <span class="hljs-attr">cacheGroups</span>: {
        <span class="hljs-attr">vendor</span>: {
          <span class="hljs-attr">test</span>: <span class="hljs-regexp">/[\\/]node_modules[\\/]/</span>,
          <span class="hljs-attr">name</span>: <span class="hljs-string">'vendors'</span>,
          <span class="hljs-attr">priority</span>: <span class="hljs-number">10</span>,
        },
      },
    } : <span class="hljs-literal">false</span>,
  },
};
</code></pre>
<p><strong>æ•ˆæœ</strong>: å¼€å‘ç¯å¢ƒæ„å»ºé€Ÿåº¦æå‡ 20-30%<br/>
<strong>é€‚ç”¨</strong>: ğŸ”µ å¼€å‘ç¯å¢ƒ</p>
<hr/>
<h3 data-id="heading-14">10. å¼€å‘ç¯å¢ƒä½¿ç”¨ watch æ¨¡å¼ä¼˜åŒ–</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
  <span class="hljs-attr">watchOptions</span>: {
    <span class="hljs-comment">// å¿½ç•¥ node_modules å˜åŒ–</span>
    <span class="hljs-attr">ignored</span>: <span class="hljs-regexp">/node_modules/</span>,
    <span class="hljs-comment">// èšåˆå»¶è¿Ÿ</span>
    <span class="hljs-attr">aggregateTimeout</span>: <span class="hljs-number">300</span>,
    <span class="hljs-comment">// è½®è¯¢é—´éš”</span>
    <span class="hljs-attr">poll</span>: <span class="hljs-number">1000</span>,
  },
};
</code></pre>
<p><strong>æ•ˆæœ</strong>: æ–‡ä»¶å˜åŒ–ç›‘å¬æ›´é«˜æ•ˆ<br/>
<strong>é€‚ç”¨</strong>: ğŸ”µ å¼€å‘ç¯å¢ƒ</p>
<hr/>
<h2 data-id="heading-15">ğŸŸ  ç”Ÿäº§ç¯å¢ƒä¼˜åŒ–æ–¹æ¡ˆï¼ˆä¸»è¦é’ˆå¯¹æ„å»ºé€Ÿåº¦å’Œäº§ç‰©ä¼˜åŒ–ï¼‰</h2>
<h3 data-id="heading-16">11. ä¼˜åŒ– Terser é…ç½®</h3>
<p>å¹¶è¡Œå‹ç¼©ï¼Œå¯ç”¨ç¼“å­˜ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> <span class="hljs-title class_">TerserPlugin</span> = <span class="hljs-built_in">require</span>(<span class="hljs-string">'terser-webpack-plugin'</span>);

<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
  <span class="hljs-attr">optimization</span>: {
    <span class="hljs-attr">minimizer</span>: [
      <span class="hljs-keyword">new</span> <span class="hljs-title class_">TerserPlugin</span>({
        <span class="hljs-attr">parallel</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// å¹¶è¡Œå‹ç¼©</span>
        <span class="hljs-attr">cache</span>: <span class="hljs-literal">true</span>,    <span class="hljs-comment">// å¯ç”¨ç¼“å­˜ï¼ˆwebpack 5 å·²åºŸå¼ƒï¼Œä½¿ç”¨æ–‡ä»¶ç³»ç»Ÿç¼“å­˜ï¼‰</span>
        <span class="hljs-attr">terserOptions</span>: {
          <span class="hljs-attr">compress</span>: {
            <span class="hljs-attr">drop_console</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// ç”Ÿäº§ç¯å¢ƒç§»é™¤ console</span>
            <span class="hljs-attr">drop_debugger</span>: <span class="hljs-literal">true</span>,
          },
        },
      }),
    ],
  },
};
</code></pre>
<p><strong>æ•ˆæœ</strong>: å‹ç¼©é€Ÿåº¦æå‡ 30-50%<br/>
<strong>é€‚ç”¨</strong>: ğŸŸ  ç”Ÿäº§ç¯å¢ƒ</p>
<hr/>
<h3 data-id="heading-17">12. ä»£ç åˆ†å‰²å’Œæ‡’åŠ è½½</h3>
<p>åˆç†åˆ†å‰²ä»£ç ï¼Œä¼˜åŒ–äº§ç‰©ä½“ç§¯å’ŒåŠ è½½é€Ÿåº¦ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
  <span class="hljs-attr">optimization</span>: {
    <span class="hljs-attr">splitChunks</span>: {
      <span class="hljs-attr">chunks</span>: <span class="hljs-string">'all'</span>,
      <span class="hljs-attr">cacheGroups</span>: {
        <span class="hljs-attr">vendor</span>: {
          <span class="hljs-attr">test</span>: <span class="hljs-regexp">/[\\/]node_modules[\\/]/</span>,
          <span class="hljs-attr">name</span>: <span class="hljs-string">'vendors'</span>,
          <span class="hljs-attr">priority</span>: <span class="hljs-number">10</span>,
          <span class="hljs-attr">reuseExistingChunk</span>: <span class="hljs-literal">true</span>,
        },
        <span class="hljs-attr">common</span>: {
          <span class="hljs-attr">name</span>: <span class="hljs-string">'common'</span>,
          <span class="hljs-attr">minChunks</span>: <span class="hljs-number">2</span>,
          <span class="hljs-attr">priority</span>: <span class="hljs-number">5</span>,
          <span class="hljs-attr">reuseExistingChunk</span>: <span class="hljs-literal">true</span>,
        },
      },
    },
  },
};
</code></pre>
<p><strong>æ•ˆæœ</strong>: ä¼˜åŒ–äº§ç‰©ä½“ç§¯ï¼Œæå‡åŠ è½½é€Ÿåº¦<br/>
<strong>é€‚ç”¨</strong>: ğŸŸ  ç”Ÿäº§ç¯å¢ƒ</p>
<hr/>
<h3 data-id="heading-18">13. ç”Ÿäº§ç¯å¢ƒä½¿ç”¨å®Œæ•´ Source Map</h3>
<p>ç”Ÿäº§ç¯å¢ƒéœ€è¦å®Œæ•´çš„ source map ç”¨äºé”™è¯¯è¿½è¸ªã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
  <span class="hljs-attr">devtool</span>: process.<span class="hljs-property">env</span>.<span class="hljs-property">NODE_ENV</span> === <span class="hljs-string">'production'</span> 
    ? <span class="hljs-string">'source-map'</span>  <span class="hljs-comment">// ç”Ÿäº§ç¯å¢ƒï¼šå®Œæ•´ source map</span>
    : <span class="hljs-string">'eval-cheap-module-source-map'</span>,
};
</code></pre>
<p><strong>é€‚ç”¨</strong>: ğŸŸ  ç”Ÿäº§ç¯å¢ƒ</p>
<hr/>
<h3 data-id="heading-19">14. ç”Ÿäº§ç¯å¢ƒå¯ç”¨ Tree Shaking</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
  <span class="hljs-attr">mode</span>: <span class="hljs-string">'production'</span>, <span class="hljs-comment">// production æ¨¡å¼è‡ªåŠ¨å¯ç”¨ tree shaking</span>
  <span class="hljs-attr">optimization</span>: {
    <span class="hljs-attr">usedExports</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// æ ‡è®°æœªä½¿ç”¨çš„å¯¼å‡º</span>
    <span class="hljs-attr">sideEffects</span>: <span class="hljs-literal">false</span>, <span class="hljs-comment">// æ ‡è®°æ— å‰¯ä½œç”¨çš„æ¨¡å—</span>
  },
};
</code></pre>
<p><strong>æ•ˆæœ</strong>: å‡å°‘æ‰“åŒ…ä½“ç§¯<br/>
<strong>é€‚ç”¨</strong>: ğŸŸ  ç”Ÿäº§ç¯å¢ƒ</p>
<hr/>
<h3 data-id="heading-20">15. ä½¿ç”¨ HardSourceWebpackPluginï¼ˆwebpack 4ï¼‰</h3>
<p>webpack 4 å¯ä»¥ä½¿ç”¨ HardSourceWebpackPlugin å®ç°ç¼“å­˜ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> <span class="hljs-title class_">HardSourceWebpackPlugin</span> = <span class="hljs-built_in">require</span>(<span class="hljs-string">'hard-source-webpack-plugin'</span>);

<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
  <span class="hljs-attr">plugins</span>: [
    <span class="hljs-keyword">new</span> <span class="hljs-title class_">HardSourceWebpackPlugin</span>({
      <span class="hljs-attr">cacheDirectory</span>: <span class="hljs-string">'node_modules/.cache/hard-source/[confighash]'</span>,
      <span class="hljs-attr">configHash</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params">webpackConfig</span>) {
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">require</span>(<span class="hljs-string">'node-object-hash'</span>)({<span class="hljs-attr">sort</span>: <span class="hljs-literal">false</span>}).<span class="hljs-title function_">hash</span>(webpackConfig);
      },
    }),
  ],
};
</code></pre>
<p><strong>æ³¨æ„</strong>: webpack 5 å·²å†…ç½®ç¼“å­˜ï¼Œä¸éœ€è¦æ­¤æ’ä»¶<br/>
<strong>é€‚ç”¨</strong>: ğŸŸ  webpack 4 é¡¹ç›®</p>
<h3 data-id="heading-21">1. å¯ç”¨ç¼“å­˜ï¼ˆæœ€é‡è¦ï¼Œæ•ˆæœæœ€æ˜æ˜¾ï¼‰</h3>
<p>webpack 5 å†…ç½®äº†æ–‡ä»¶ç³»ç»Ÿç¼“å­˜ï¼Œå¯ä»¥æ˜¾è‘—æå‡äºŒæ¬¡æ„å»ºé€Ÿåº¦ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// webpack.config.js</span>
<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
  <span class="hljs-attr">cache</span>: {
    <span class="hljs-attr">type</span>: <span class="hljs-string">'filesystem'</span>, <span class="hljs-comment">// ä½¿ç”¨æ–‡ä»¶ç³»ç»Ÿç¼“å­˜</span>
    <span class="hljs-attr">buildDependencies</span>: {
      <span class="hljs-attr">config</span>: [__filename], <span class="hljs-comment">// é…ç½®æ–‡ä»¶å˜åŒ–æ—¶é‡æ–°æ„å»ºç¼“å­˜</span>
    },
    <span class="hljs-attr">cacheDirectory</span>: path.<span class="hljs-title function_">resolve</span>(__dirname, <span class="hljs-string">'node_modules/.cache/webpack'</span>), <span class="hljs-comment">// ç¼“å­˜ç›®å½•</span>
  },
};
</code></pre>
<p><strong>æ•ˆæœ</strong>: äºŒæ¬¡æ„å»ºé€Ÿåº¦æå‡ 60-80%</p>
<hr/>
<h3 data-id="heading-22">2. ä½¿ç”¨å¤šçº¿ç¨‹/å¹¶è¡Œå¤„ç†</h3>
<p>ä½¿ç”¨ <code>thread-loader</code> å°†è€—æ—¶çš„ loader æ”¾åœ¨ç‹¬ç«‹çº¿ç¨‹ä¸­å¤„ç†ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> os = <span class="hljs-built_in">require</span>(<span class="hljs-string">'os'</span>);

<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
  <span class="hljs-attr">module</span>: {
    <span class="hljs-attr">rules</span>: [
      {
        <span class="hljs-attr">test</span>: <span class="hljs-regexp">/\.js$/</span>,
        <span class="hljs-attr">use</span>: [
          {
            <span class="hljs-attr">loader</span>: <span class="hljs-string">'thread-loader'</span>,
            <span class="hljs-attr">options</span>: {
              <span class="hljs-attr">workers</span>: os.<span class="hljs-title function_">cpus</span>().<span class="hljs-property">length</span> - <span class="hljs-number">1</span>, <span class="hljs-comment">// ä½¿ç”¨ CPU æ ¸å¿ƒæ•° - 1</span>
              <span class="hljs-attr">poolTimeout</span>: <span class="hljs-number">2000</span>, <span class="hljs-comment">// çº¿ç¨‹æ± è¶…æ—¶æ—¶é—´</span>
            },
          },
          <span class="hljs-string">'babel-loader'</span>,
        ],
      },
    ],
  },
};
</code></pre>
<p><strong>å®‰è£…</strong>: <code>npm install --save-dev thread-loader</code></p>
<p><strong>æ•ˆæœ</strong>: æ„å»ºé€Ÿåº¦æå‡ 30-50%</p>
<hr/>
<h3 data-id="heading-23">3. ä¼˜åŒ– resolve é…ç½®</h3>
<p>å‡å°‘æ¨¡å—è§£ææ—¶é—´ï¼Œæ˜ç¡®æŒ‡å®šæŸ¥æ‰¾è·¯å¾„ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
  <span class="hljs-attr">resolve</span>: {
    <span class="hljs-comment">// æ˜ç¡®æŒ‡å®šæ‰©å±•åï¼Œå‡å°‘æ–‡ä»¶æŸ¥æ‰¾</span>
    <span class="hljs-attr">extensions</span>: [<span class="hljs-string">'.js'</span>, <span class="hljs-string">'.vue'</span>, <span class="hljs-string">'.json'</span>, <span class="hljs-string">'.ts'</span>],
    
    <span class="hljs-comment">// ä½¿ç”¨åˆ«åï¼Œé¿å…ç›¸å¯¹è·¯å¾„è§£æ</span>
    <span class="hljs-attr">alias</span>: {
      <span class="hljs-string">'@'</span>: path.<span class="hljs-title function_">resolve</span>(__dirname, <span class="hljs-string">'src'</span>),
      <span class="hljs-string">'@components'</span>: path.<span class="hljs-title function_">resolve</span>(__dirname, <span class="hljs-string">'src/components'</span>),
    },
    
    <span class="hljs-comment">// æ˜ç¡®æŒ‡å®š node_modules ä½ç½®</span>
    <span class="hljs-attr">modules</span>: [
      path.<span class="hljs-title function_">resolve</span>(__dirname, <span class="hljs-string">'node_modules'</span>),
      <span class="hljs-string">'node_modules'</span>,
    ],
    
    <span class="hljs-comment">// é¿å…è§£æç¬¦å·é“¾æ¥</span>
    <span class="hljs-attr">symlinks</span>: <span class="hljs-literal">false</span>,
    
    <span class="hljs-comment">// é¿å…è§£æä¸å¿…è¦çš„æ¨¡å—</span>
    <span class="hljs-attr">mainFields</span>: [<span class="hljs-string">'browser'</span>, <span class="hljs-string">'module'</span>, <span class="hljs-string">'main'</span>],
  },
};
</code></pre>
<p><strong>æ•ˆæœ</strong>: æ¨¡å—è§£æé€Ÿåº¦æå‡ 20-30%</p>
<hr/>
<h3 data-id="heading-24">4. å‡å°‘æ–‡ä»¶æœç´¢èŒƒå›´</h3>
<p>æ˜ç¡®æŒ‡å®šéœ€è¦å¤„ç†çš„æ–‡ä»¶èŒƒå›´ï¼Œæ’é™¤ä¸å¿…è¦çš„ç›®å½•ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
  <span class="hljs-attr">module</span>: {
    <span class="hljs-attr">rules</span>: [
      {
        <span class="hljs-attr">test</span>: <span class="hljs-regexp">/\.js$/</span>,
        <span class="hljs-attr">loader</span>: <span class="hljs-string">'babel-loader'</span>,
        <span class="hljs-comment">// åªå¤„ç† src ç›®å½•</span>
        <span class="hljs-attr">include</span>: path.<span class="hljs-title function_">resolve</span>(__dirname, <span class="hljs-string">'src'</span>),
        <span class="hljs-comment">// æ’é™¤ node_modules</span>
        <span class="hljs-attr">exclude</span>: <span class="hljs-regexp">/node_modules/</span>,
      },
    ],
  },
};
</code></pre>
<p><strong>æ•ˆæœ</strong>: å‡å°‘ä¸å¿…è¦çš„æ–‡ä»¶å¤„ç†</p>
<hr/>
<h3 data-id="heading-25">5. ä½¿ç”¨æ›´å¿«çš„ Loader æ›¿ä»£æ–¹æ¡ˆ</h3>
<p>ä½¿ç”¨ <code>esbuild-loader</code> æ›¿ä»£ <code>babel-loader</code>ï¼Œé€Ÿåº¦æå‡ 10-100 å€ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
  <span class="hljs-attr">module</span>: {
    <span class="hljs-attr">rules</span>: [
      {
        <span class="hljs-attr">test</span>: <span class="hljs-regexp">/\.js$/</span>,
        <span class="hljs-attr">loader</span>: <span class="hljs-string">'esbuild-loader'</span>,
        <span class="hljs-attr">options</span>: {
          <span class="hljs-attr">loader</span>: <span class="hljs-string">'jsx'</span>,
          <span class="hljs-attr">target</span>: <span class="hljs-string">'es2015'</span>,
        },
      },
      {
        <span class="hljs-attr">test</span>: <span class="hljs-regexp">/\.ts$/</span>,
        <span class="hljs-attr">loader</span>: <span class="hljs-string">'esbuild-loader'</span>,
        <span class="hljs-attr">options</span>: {
          <span class="hljs-attr">loader</span>: <span class="hljs-string">'ts'</span>,
          <span class="hljs-attr">target</span>: <span class="hljs-string">'es2015'</span>,
        },
      },
    ],
  },
};
</code></pre>
<p><strong>å®‰è£…</strong>: <code>npm install --save-dev esbuild-loader</code></p>
<p><strong>æ•ˆæœ</strong>: æ„å»ºé€Ÿåº¦æå‡ 5-10 å€ï¼ˆé€‚åˆå¤§å‹é¡¹ç›®ï¼‰</p>
<hr/>
<h3 data-id="heading-26">6. ä¼˜åŒ– Source Map</h3>
<p>å¼€å‘ç¯å¢ƒä½¿ç”¨æ›´å¿«çš„ source map ç±»å‹ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
  <span class="hljs-comment">// å¼€å‘ç¯å¢ƒä½¿ç”¨æœ€å¿«çš„ source map</span>
  <span class="hljs-attr">devtool</span>: process.<span class="hljs-property">env</span>.<span class="hljs-property">NODE_ENV</span> === <span class="hljs-string">'production'</span> 
    ? <span class="hljs-string">'source-map'</span>           <span class="hljs-comment">// ç”Ÿäº§ç¯å¢ƒï¼šå®Œæ•´ source map</span>
    : <span class="hljs-string">'eval-cheap-module-source-map'</span>, <span class="hljs-comment">// å¼€å‘ç¯å¢ƒï¼šæœ€å¿«é€Ÿåº¦</span>
};
</code></pre>
<p><strong>Source Map ç±»å‹å¯¹æ¯”</strong>:</p>
<ul>
<li><code>eval-cheap-module-source-map</code>: æœ€å¿«ï¼Œé€‚åˆå¼€å‘ç¯å¢ƒ</li>
<li><code>cheap-module-source-map</code>: è¾ƒå¿«ï¼Œé€‚åˆå¼€å‘ç¯å¢ƒ</li>
<li><code>source-map</code>: æœ€æ…¢ä½†æœ€å®Œæ•´ï¼Œé€‚åˆç”Ÿäº§ç¯å¢ƒ</li>
</ul>
<p><strong>æ•ˆæœ</strong>: å¼€å‘ç¯å¢ƒæ„å»ºé€Ÿåº¦æå‡ 50-70%</p>
<hr/>
<h3 data-id="heading-27">7. ä½¿ç”¨ DllPluginï¼ˆé€‚åˆå¤§å‹é¡¹ç›®ï¼‰</h3>
<p>é¢„æ„å»ºç¬¬ä¸‰æ–¹åº“ï¼Œé¿å…æ¯æ¬¡éƒ½é‡æ–°ç¼–è¯‘ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// webpack.dll.config.js - é¢„æ„å»ºç¬¬ä¸‰æ–¹åº“</span>
<span class="hljs-keyword">const</span> path = <span class="hljs-built_in">require</span>(<span class="hljs-string">'path'</span>);
<span class="hljs-keyword">const</span> webpack = <span class="hljs-built_in">require</span>(<span class="hljs-string">'webpack'</span>);

<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
  <span class="hljs-attr">mode</span>: <span class="hljs-string">'production'</span>,
  <span class="hljs-attr">entry</span>: {
    <span class="hljs-attr">vendor</span>: [<span class="hljs-string">'vue'</span>, <span class="hljs-string">'vue-router'</span>, <span class="hljs-string">'axios'</span>, <span class="hljs-string">'lodash'</span>],
  },
  <span class="hljs-attr">output</span>: {
    <span class="hljs-attr">path</span>: path.<span class="hljs-title function_">resolve</span>(__dirname, <span class="hljs-string">'dll'</span>),
    <span class="hljs-attr">filename</span>: <span class="hljs-string">'[name].dll.js'</span>,
    <span class="hljs-attr">library</span>: <span class="hljs-string">'[name]_library'</span>,
  },
  <span class="hljs-attr">plugins</span>: [
    <span class="hljs-keyword">new</span> webpack.<span class="hljs-title class_">DllPlugin</span>({
      <span class="hljs-attr">path</span>: path.<span class="hljs-title function_">join</span>(__dirname, <span class="hljs-string">'dll'</span>, <span class="hljs-string">'[name]-manifest.json'</span>),
      <span class="hljs-attr">name</span>: <span class="hljs-string">'[name]_library'</span>,
    }),
  ],
};

<span class="hljs-comment">// webpack.config.js - ä¸»é…ç½®</span>
<span class="hljs-keyword">const</span> webpack = <span class="hljs-built_in">require</span>(<span class="hljs-string">'webpack'</span>);

<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
  <span class="hljs-attr">plugins</span>: [
    <span class="hljs-keyword">new</span> webpack.<span class="hljs-title class_">DllReferencePlugin</span>({
      <span class="hljs-attr">manifest</span>: <span class="hljs-built_in">require</span>(<span class="hljs-string">'./dll/vendor-manifest.json'</span>),
    }),
  ],
};
</code></pre>
<p><strong>æ•ˆæœ</strong>: é¦–æ¬¡æ„å»ºåï¼Œåç»­æ„å»ºé€Ÿåº¦æå‡ 50-80%</p>
<hr/>
<h3 data-id="heading-28">8. ä»£ç åˆ†å‰²å’Œæ‡’åŠ è½½</h3>
<p>åˆç†åˆ†å‰²ä»£ç ï¼Œå‡å°‘å•æ¬¡æ„å»ºçš„æ–‡ä»¶é‡ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
  <span class="hljs-attr">optimization</span>: {
    <span class="hljs-attr">splitChunks</span>: {
      <span class="hljs-attr">chunks</span>: <span class="hljs-string">'all'</span>,
      <span class="hljs-attr">cacheGroups</span>: {
        <span class="hljs-attr">vendor</span>: {
          <span class="hljs-attr">test</span>: <span class="hljs-regexp">/[\\/]node_modules[\\/]/</span>,
          <span class="hljs-attr">name</span>: <span class="hljs-string">'vendors'</span>,
          <span class="hljs-attr">priority</span>: <span class="hljs-number">10</span>,
          <span class="hljs-attr">reuseExistingChunk</span>: <span class="hljs-literal">true</span>,
        },
        <span class="hljs-attr">common</span>: {
          <span class="hljs-attr">name</span>: <span class="hljs-string">'common'</span>,
          <span class="hljs-attr">minChunks</span>: <span class="hljs-number">2</span>,
          <span class="hljs-attr">priority</span>: <span class="hljs-number">5</span>,
          <span class="hljs-attr">reuseExistingChunk</span>: <span class="hljs-literal">true</span>,
        },
      },
    },
  },
};
</code></pre>
<p><strong>æ•ˆæœ</strong>: å¢é‡æ„å»ºé€Ÿåº¦æå‡</p>
<hr/>
<h3 data-id="heading-29">9. å‡å°‘æ’ä»¶ä½¿ç”¨</h3>
<p>ç”Ÿäº§ç¯å¢ƒç¦ç”¨ä¸å¿…è¦çš„æ’ä»¶ï¼Œä½¿ç”¨ webpack çš„ mode è‡ªåŠ¨ä¼˜åŒ–ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
  <span class="hljs-attr">mode</span>: process.<span class="hljs-property">env</span>.<span class="hljs-property">NODE_ENV</span> === <span class="hljs-string">'production'</span> ? <span class="hljs-string">'production'</span> : <span class="hljs-string">'development'</span>,
  
  <span class="hljs-attr">plugins</span>: [
    <span class="hljs-comment">// åªåœ¨ç”Ÿäº§ç¯å¢ƒä½¿ç”¨</span>
    ...(process.<span class="hljs-property">env</span>.<span class="hljs-property">NODE_ENV</span> === <span class="hljs-string">'production'</span> 
      ? [<span class="hljs-keyword">new</span> <span class="hljs-title class_">SomeProductionPlugin</span>()] 
      : []),
  ],
};
</code></pre>
<hr/>
<h3 data-id="heading-30">10. ä¼˜åŒ– Terser é…ç½®</h3>
<p>å¹¶è¡Œå‹ç¼©ï¼Œå¯ç”¨ç¼“å­˜ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> <span class="hljs-title class_">TerserPlugin</span> = <span class="hljs-built_in">require</span>(<span class="hljs-string">'terser-webpack-plugin'</span>);

<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
  <span class="hljs-attr">optimization</span>: {
    <span class="hljs-attr">minimizer</span>: [
      <span class="hljs-keyword">new</span> <span class="hljs-title class_">TerserPlugin</span>({
        <span class="hljs-attr">parallel</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// å¹¶è¡Œå‹ç¼©</span>
        <span class="hljs-attr">cache</span>: <span class="hljs-literal">true</span>,    <span class="hljs-comment">// å¯ç”¨ç¼“å­˜</span>
        <span class="hljs-attr">terserOptions</span>: {
          <span class="hljs-attr">compress</span>: {
            <span class="hljs-attr">drop_console</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// ç”Ÿäº§ç¯å¢ƒç§»é™¤ console</span>
            <span class="hljs-attr">drop_debugger</span>: <span class="hljs-literal">true</span>,
          },
        },
      }),
    ],
  },
};
</code></pre>
<p><strong>æ•ˆæœ</strong>: å‹ç¼©é€Ÿåº¦æå‡ 30-50%</p>
<hr/>
<h3 data-id="heading-31">11. ä½¿ç”¨ HardSourceWebpackPluginï¼ˆwebpack 4ï¼‰</h3>
<p>webpack 4 å¯ä»¥ä½¿ç”¨ HardSourceWebpackPlugin å®ç°ç¼“å­˜ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> <span class="hljs-title class_">HardSourceWebpackPlugin</span> = <span class="hljs-built_in">require</span>(<span class="hljs-string">'hard-source-webpack-plugin'</span>);

<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
  <span class="hljs-attr">plugins</span>: [
    <span class="hljs-keyword">new</span> <span class="hljs-title class_">HardSourceWebpackPlugin</span>({
      <span class="hljs-attr">cacheDirectory</span>: <span class="hljs-string">'node_modules/.cache/hard-source/[confighash]'</span>,
      <span class="hljs-attr">configHash</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params">webpackConfig</span>) {
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">require</span>(<span class="hljs-string">'node-object-hash'</span>)({<span class="hljs-attr">sort</span>: <span class="hljs-literal">false</span>}).<span class="hljs-title function_">hash</span>(webpackConfig);
      },
    }),
  ],
};
</code></pre>
<p><strong>æ³¨æ„</strong>: webpack 5 å·²å†…ç½®ç¼“å­˜ï¼Œä¸éœ€è¦æ­¤æ’ä»¶</p>
<hr/>
<h2 data-id="heading-32">å®Œæ•´ä¼˜åŒ–é…ç½®ç¤ºä¾‹</h2>
<h3 data-id="heading-33">å¼€å‘ç¯å¢ƒé…ç½®</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> path = <span class="hljs-built_in">require</span>(<span class="hljs-string">'path'</span>);
<span class="hljs-keyword">const</span> os = <span class="hljs-built_in">require</span>(<span class="hljs-string">'os'</span>);

<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
  <span class="hljs-attr">mode</span>: <span class="hljs-string">'development'</span>,
  
  <span class="hljs-comment">// 1. å¯ç”¨ç¼“å­˜ï¼ˆé€šç”¨ï¼‰</span>
  <span class="hljs-attr">cache</span>: {
    <span class="hljs-attr">type</span>: <span class="hljs-string">'filesystem'</span>,
    <span class="hljs-attr">buildDependencies</span>: {
      <span class="hljs-attr">config</span>: [__filename],
    },
  },
  
  <span class="hljs-comment">// 2. ä¼˜åŒ– resolveï¼ˆé€šç”¨ï¼‰</span>
  <span class="hljs-attr">resolve</span>: {
    <span class="hljs-attr">extensions</span>: [<span class="hljs-string">'.js'</span>, <span class="hljs-string">'.vue'</span>, <span class="hljs-string">'.json'</span>, <span class="hljs-string">'.ts'</span>],
    <span class="hljs-attr">alias</span>: {
      <span class="hljs-string">'@'</span>: path.<span class="hljs-title function_">resolve</span>(__dirname, <span class="hljs-string">'src'</span>),
    },
    <span class="hljs-attr">modules</span>: [path.<span class="hljs-title function_">resolve</span>(__dirname, <span class="hljs-string">'node_modules'</span>)],
    <span class="hljs-attr">symlinks</span>: <span class="hljs-literal">false</span>,
  },
  
  <span class="hljs-comment">// 3. å¼€å‘ç¯å¢ƒï¼šä½¿ç”¨æœ€å¿«çš„ source map</span>
  <span class="hljs-attr">devtool</span>: <span class="hljs-string">'eval-cheap-module-source-map'</span>,
  
  <span class="hljs-comment">// 4. æ¨¡å—è§„åˆ™ï¼ˆé€šç”¨ï¼‰</span>
  <span class="hljs-attr">module</span>: {
    <span class="hljs-attr">rules</span>: [
      {
        <span class="hljs-attr">test</span>: <span class="hljs-regexp">/\.js$/</span>,
        <span class="hljs-attr">use</span>: [
          {
            <span class="hljs-attr">loader</span>: <span class="hljs-string">'thread-loader'</span>,
            <span class="hljs-attr">options</span>: {
              <span class="hljs-attr">workers</span>: os.<span class="hljs-title function_">cpus</span>().<span class="hljs-property">length</span> - <span class="hljs-number">1</span>,
            },
          },
          <span class="hljs-string">'babel-loader'</span>,
        ],
        <span class="hljs-attr">include</span>: path.<span class="hljs-title function_">resolve</span>(__dirname, <span class="hljs-string">'src'</span>),
        <span class="hljs-attr">exclude</span>: <span class="hljs-regexp">/node_modules/</span>,
      },
    ],
  },
  
  <span class="hljs-comment">// 5. å¼€å‘ç¯å¢ƒï¼šç¦ç”¨å‹ç¼©å’Œä»£ç åˆ†å‰²</span>
  <span class="hljs-attr">optimization</span>: {
    <span class="hljs-attr">minimize</span>: <span class="hljs-literal">false</span>, <span class="hljs-comment">// ä¸å‹ç¼©</span>
    <span class="hljs-attr">splitChunks</span>: <span class="hljs-literal">false</span>, <span class="hljs-comment">// ä¸åˆ†å‰²ä»£ç </span>
  },
  
  <span class="hljs-comment">// 6. å¼€å‘ç¯å¢ƒï¼šwatch æ¨¡å¼ä¼˜åŒ–</span>
  <span class="hljs-attr">watchOptions</span>: {
    <span class="hljs-attr">ignored</span>: <span class="hljs-regexp">/node_modules/</span>,
    <span class="hljs-attr">aggregateTimeout</span>: <span class="hljs-number">300</span>,
    <span class="hljs-attr">poll</span>: <span class="hljs-number">1000</span>,
  },
};
</code></pre>
<h3 data-id="heading-34">ç”Ÿäº§ç¯å¢ƒé…ç½®</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> path = <span class="hljs-built_in">require</span>(<span class="hljs-string">'path'</span>);
<span class="hljs-keyword">const</span> os = <span class="hljs-built_in">require</span>(<span class="hljs-string">'os'</span>);
<span class="hljs-keyword">const</span> <span class="hljs-title class_">TerserPlugin</span> = <span class="hljs-built_in">require</span>(<span class="hljs-string">'terser-webpack-plugin'</span>);

<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
  <span class="hljs-attr">mode</span>: <span class="hljs-string">'production'</span>,
  
  <span class="hljs-comment">// 1. å¯ç”¨ç¼“å­˜ï¼ˆé€šç”¨ï¼‰</span>
  <span class="hljs-attr">cache</span>: {
    <span class="hljs-attr">type</span>: <span class="hljs-string">'filesystem'</span>,
    <span class="hljs-attr">buildDependencies</span>: {
      <span class="hljs-attr">config</span>: [__filename],
    },
  },
  
  <span class="hljs-comment">// 2. ä¼˜åŒ– resolveï¼ˆé€šç”¨ï¼‰</span>
  <span class="hljs-attr">resolve</span>: {
    <span class="hljs-attr">extensions</span>: [<span class="hljs-string">'.js'</span>, <span class="hljs-string">'.vue'</span>, <span class="hljs-string">'.json'</span>, <span class="hljs-string">'.ts'</span>],
    <span class="hljs-attr">alias</span>: {
      <span class="hljs-string">'@'</span>: path.<span class="hljs-title function_">resolve</span>(__dirname, <span class="hljs-string">'src'</span>),
    },
    <span class="hljs-attr">modules</span>: [path.<span class="hljs-title function_">resolve</span>(__dirname, <span class="hljs-string">'node_modules'</span>)],
    <span class="hljs-attr">symlinks</span>: <span class="hljs-literal">false</span>,
  },
  
  <span class="hljs-comment">// 3. ç”Ÿäº§ç¯å¢ƒï¼šä½¿ç”¨å®Œæ•´ source map</span>
  <span class="hljs-attr">devtool</span>: <span class="hljs-string">'source-map'</span>,
  
  <span class="hljs-comment">// 4. æ¨¡å—è§„åˆ™ï¼ˆé€šç”¨ï¼‰</span>
  <span class="hljs-attr">module</span>: {
    <span class="hljs-attr">rules</span>: [
      {
        <span class="hljs-attr">test</span>: <span class="hljs-regexp">/\.js$/</span>,
        <span class="hljs-attr">use</span>: [
          {
            <span class="hljs-attr">loader</span>: <span class="hljs-string">'thread-loader'</span>,
            <span class="hljs-attr">options</span>: {
              <span class="hljs-attr">workers</span>: os.<span class="hljs-title function_">cpus</span>().<span class="hljs-property">length</span> - <span class="hljs-number">1</span>,
            },
          },
          <span class="hljs-string">'babel-loader'</span>,
        ],
        <span class="hljs-attr">include</span>: path.<span class="hljs-title function_">resolve</span>(__dirname, <span class="hljs-string">'src'</span>),
        <span class="hljs-attr">exclude</span>: <span class="hljs-regexp">/node_modules/</span>,
      },
    ],
  },
  
  <span class="hljs-comment">// 5. ç”Ÿäº§ç¯å¢ƒï¼šå¯ç”¨å‹ç¼©å’Œä»£ç åˆ†å‰²</span>
  <span class="hljs-attr">optimization</span>: {
    <span class="hljs-attr">minimize</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">minimizer</span>: [
      <span class="hljs-keyword">new</span> <span class="hljs-title class_">TerserPlugin</span>({
        <span class="hljs-attr">parallel</span>: <span class="hljs-literal">true</span>,
        <span class="hljs-attr">terserOptions</span>: {
          <span class="hljs-attr">compress</span>: {
            <span class="hljs-attr">drop_console</span>: <span class="hljs-literal">true</span>,
            <span class="hljs-attr">drop_debugger</span>: <span class="hljs-literal">true</span>,
          },
        },
      }),
    ],
    <span class="hljs-attr">splitChunks</span>: {
      <span class="hljs-attr">chunks</span>: <span class="hljs-string">'all'</span>,
      <span class="hljs-attr">cacheGroups</span>: {
        <span class="hljs-attr">vendor</span>: {
          <span class="hljs-attr">test</span>: <span class="hljs-regexp">/[\\/]node_modules[\\/]/</span>,
          <span class="hljs-attr">name</span>: <span class="hljs-string">'vendors'</span>,
          <span class="hljs-attr">priority</span>: <span class="hljs-number">10</span>,
          <span class="hljs-attr">reuseExistingChunk</span>: <span class="hljs-literal">true</span>,
        },
        <span class="hljs-attr">common</span>: {
          <span class="hljs-attr">name</span>: <span class="hljs-string">'common'</span>,
          <span class="hljs-attr">minChunks</span>: <span class="hljs-number">2</span>,
          <span class="hljs-attr">priority</span>: <span class="hljs-number">5</span>,
          <span class="hljs-attr">reuseExistingChunk</span>: <span class="hljs-literal">true</span>,
        },
      },
    },
    <span class="hljs-attr">usedExports</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// Tree shaking</span>
    <span class="hljs-attr">sideEffects</span>: <span class="hljs-literal">false</span>,
  },
};
</code></pre>
<hr/>
<h2 data-id="heading-35">æ€§èƒ½åˆ†æå·¥å…·</h2>
<h3 data-id="heading-36">1. speed-measure-webpack-plugin</h3>
<p>åˆ†æå„ä¸ªæ’ä»¶å’Œ loader çš„è€—æ—¶ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> <span class="hljs-title class_">SpeedMeasurePlugin</span> = <span class="hljs-built_in">require</span>(<span class="hljs-string">'speed-measure-webpack-plugin'</span>);
<span class="hljs-keyword">const</span> smp = <span class="hljs-keyword">new</span> <span class="hljs-title class_">SpeedMeasurePlugin</span>();

<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = smp.<span class="hljs-title function_">wrap</span>({
  <span class="hljs-comment">// webpack é…ç½®</span>
});
</code></pre>
<p><strong>å®‰è£…</strong>: <code>npm install --save-dev speed-measure-webpack-plugin</code></p>
<h3 data-id="heading-37">2. webpack-bundle-analyzer</h3>
<p>åˆ†ææ‰“åŒ…ä½“ç§¯ï¼Œæ‰¾å‡ºå¯ä»¥ä¼˜åŒ–çš„åœ°æ–¹ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> <span class="hljs-title class_">BundleAnalyzerPlugin</span> = <span class="hljs-built_in">require</span>(<span class="hljs-string">'webpack-bundle-analyzer'</span>).<span class="hljs-property">BundleAnalyzerPlugin</span>;

<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
  <span class="hljs-attr">plugins</span>: [
    <span class="hljs-keyword">new</span> <span class="hljs-title class_">BundleAnalyzerPlugin</span>({
      <span class="hljs-attr">analyzerMode</span>: <span class="hljs-string">'static'</span>,
      <span class="hljs-attr">openAnalyzer</span>: <span class="hljs-literal">false</span>,
    }),
  ],
};
</code></pre>
<p><strong>å®‰è£…</strong>: <code>npm install --save-dev webpack-bundle-analyzer</code></p>
<hr/>
<h2 data-id="heading-38">ä¼˜åŒ–ä¼˜å…ˆçº§å»ºè®®</h2>
<h3 data-id="heading-39">ğŸ”µ å¼€å‘ç¯å¢ƒä¼˜åŒ–ä¼˜å…ˆçº§</h3>
<p>æŒ‰æ•ˆæœå’Œå®ç°éš¾åº¦æ’åºï¼š</p>
<ol>
<li>
<p><strong>å¯ç”¨ç¼“å­˜</strong> â­â­â­â­â­</p>
<ul>
<li>æ•ˆæœæœ€æ˜æ˜¾ï¼Œå®ç°æœ€ç®€å•</li>
<li>äºŒæ¬¡æ„å»ºé€Ÿåº¦æå‡ 60-80%</li>
<li>âœ… é€šç”¨ä¼˜åŒ–</li>
</ul>
</li>
<li>
<p><strong>ä¼˜åŒ– Source Map</strong> â­â­â­â­â­</p>
<ul>
<li>å¼€å‘ç¯å¢ƒæ•ˆæœæ˜¾è‘—</li>
<li>æ„å»ºé€Ÿåº¦æå‡ 50-70%</li>
<li>ğŸ”µ å¼€å‘ç¯å¢ƒä¸“ç”¨</li>
</ul>
</li>
<li>
<p><strong>ç¦ç”¨ä»£ç å‹ç¼©</strong> â­â­â­â­â­</p>
<ul>
<li>å¼€å‘ç¯å¢ƒä¸éœ€è¦å‹ç¼©</li>
<li>æ„å»ºé€Ÿåº¦æå‡ 40-60%</li>
<li>ğŸ”µ å¼€å‘ç¯å¢ƒä¸“ç”¨</li>
</ul>
</li>
<li>
<p><strong>ä½¿ç”¨ thread-loader</strong> â­â­â­â­</p>
<ul>
<li>å¤šæ ¸ CPU æ•ˆæœæ˜æ˜¾</li>
<li>æ„å»ºé€Ÿåº¦æå‡ 30-50%</li>
<li>âœ… é€šç”¨ä¼˜åŒ–</li>
</ul>
</li>
<li>
<p><strong>ä¼˜åŒ– resolve é…ç½®</strong> â­â­â­â­</p>
<ul>
<li>å®ç°ç®€å•ï¼Œæ•ˆæœç¨³å®š</li>
<li>æ¨¡å—è§£æé€Ÿåº¦æå‡ 20-30%</li>
<li>âœ… é€šç”¨ä¼˜åŒ–</li>
</ul>
</li>
<li>
<p><strong>ç¦ç”¨ä»£ç åˆ†å‰²</strong> â­â­â­</p>
<ul>
<li>å¼€å‘ç¯å¢ƒä¸éœ€è¦åˆ†å‰²</li>
<li>æ„å»ºé€Ÿåº¦æå‡ 20-30%</li>
<li>ğŸ”µ å¼€å‘ç¯å¢ƒä¸“ç”¨</li>
</ul>
</li>
<li>
<p><strong>ä½¿ç”¨ esbuild-loader</strong> â­â­â­</p>
<ul>
<li>é€‚åˆå¤§å‹é¡¹ç›®</li>
<li>éœ€è¦æ›¿æ¢ç°æœ‰ loader</li>
<li>âœ… é€šç”¨ä¼˜åŒ–</li>
</ul>
</li>
<li>
<p><strong>ä½¿ç”¨ DllPlugin</strong> â­â­â­</p>
<ul>
<li>é€‚åˆå¤§å‹é¡¹ç›®</li>
<li>é…ç½®ç›¸å¯¹å¤æ‚</li>
<li>âœ… é€šç”¨ä¼˜åŒ–</li>
</ul>
</li>
</ol>
<h3 data-id="heading-40">ğŸŸ  ç”Ÿäº§ç¯å¢ƒä¼˜åŒ–ä¼˜å…ˆçº§</h3>
<ol>
<li>
<p><strong>å¯ç”¨ç¼“å­˜</strong> â­â­â­â­â­</p>
<ul>
<li>äºŒæ¬¡æ„å»ºé€Ÿåº¦æå‡ 60-80%</li>
<li>âœ… é€šç”¨ä¼˜åŒ–</li>
</ul>
</li>
<li>
<p><strong>ä¼˜åŒ– Terser é…ç½®</strong> â­â­â­â­</p>
<ul>
<li>å‹ç¼©é€Ÿåº¦æå‡ 30-50%</li>
<li>ğŸŸ  ç”Ÿäº§ç¯å¢ƒä¸“ç”¨</li>
</ul>
</li>
<li>
<p><strong>ä»£ç åˆ†å‰²</strong> â­â­â­â­</p>
<ul>
<li>ä¼˜åŒ–äº§ç‰©ä½“ç§¯å’ŒåŠ è½½é€Ÿåº¦</li>
<li>ğŸŸ  ç”Ÿäº§ç¯å¢ƒä¸“ç”¨</li>
</ul>
</li>
<li>
<p><strong>ä½¿ç”¨ thread-loader</strong> â­â­â­â­</p>
<ul>
<li>æ„å»ºé€Ÿåº¦æå‡ 30-50%</li>
<li>âœ… é€šç”¨ä¼˜åŒ–</li>
</ul>
</li>
<li>
<p><strong>ä¼˜åŒ– resolve é…ç½®</strong> â­â­â­â­</p>
<ul>
<li>æ¨¡å—è§£æé€Ÿåº¦æå‡ 20-30%</li>
<li>âœ… é€šç”¨ä¼˜åŒ–</li>
</ul>
</li>
<li>
<p><strong>Tree Shaking</strong> â­â­â­â­</p>
<ul>
<li>å‡å°‘æ‰“åŒ…ä½“ç§¯</li>
<li>ğŸŸ  ç”Ÿäº§ç¯å¢ƒä¸“ç”¨ï¼ˆproduction æ¨¡å¼è‡ªåŠ¨å¯ç”¨ï¼‰</li>
</ul>
</li>
</ol>
<hr/>
<h2 data-id="heading-41">å¿«é€Ÿè¯Šæ–­</h2>
<h3 data-id="heading-42">æ£€æŸ¥æ„å»ºç“¶é¢ˆ</h3>
<ol>
<li>ä½¿ç”¨ <code>speed-measure-webpack-plugin</code> æ‰¾å‡ºè€—æ—¶æœ€é•¿çš„æ­¥éª¤</li>
<li>ä½¿ç”¨ <code>webpack-bundle-analyzer</code> åˆ†ææ‰“åŒ…ä½“ç§¯</li>
<li>æ£€æŸ¥æ˜¯å¦æœ‰å¤§é‡å°æ–‡ä»¶æˆ–é‡å¤æ‰“åŒ…</li>
</ol>
<h3 data-id="heading-43">å¸¸è§é—®é¢˜</h3>
<ol>
<li>
<p><strong>æ„å»ºå¾ˆæ…¢ï¼Œä½†ä¸çŸ¥é“å“ªé‡Œæ…¢</strong></p>
<ul>
<li>ä½¿ç”¨ <code>speed-measure-webpack-plugin</code> åˆ†æ</li>
</ul>
</li>
<li>
<p><strong>äºŒæ¬¡æ„å»ºè¿˜æ˜¯å¾ˆæ…¢</strong></p>
<ul>
<li>æ£€æŸ¥æ˜¯å¦å¯ç”¨äº†ç¼“å­˜</li>
<li>æ£€æŸ¥ç¼“å­˜ç›®å½•æ˜¯å¦æœ‰å†™å…¥æƒé™</li>
</ul>
</li>
<li>
<p><strong>å†…å­˜å ç”¨è¿‡é«˜</strong></p>
<ul>
<li>å‡å°‘å¹¶è¡Œæ•°é‡</li>
<li>ä½¿ç”¨ <code>--max-old-space-size</code> å¢åŠ å†…å­˜é™åˆ¶</li>
</ul>
</li>
</ol>
<hr/>
<h2 data-id="heading-44">å‚è€ƒèµ„æº</h2>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwebpack.js.org%2Fguides%2Fperformance%2F" target="_blank" title="https://webpack.js.org/guides/performance/" ref="nofollow noopener noreferrer">Webpack å®˜æ–¹æ–‡æ¡£ - æ€§èƒ½ä¼˜åŒ–</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwebpack.js.org%2Fconfiguration%2Fcache%2F" target="_blank" title="https://webpack.js.org/configuration/cache/" ref="nofollow noopener noreferrer">Webpack å®˜æ–¹æ–‡æ¡£ - ç¼“å­˜</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fwebpack-contrib%2Fthread-loader" target="_blank" title="https://github.com/webpack-contrib/thread-loader" ref="nofollow noopener noreferrer">thread-loader æ–‡æ¡£</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fprivatenumber%2Fesbuild-loader" target="_blank" title="https://github.com/privatenumber/esbuild-loader" ref="nofollow noopener noreferrer">esbuild-loader æ–‡æ¡£</a></li>
</ul>
<hr/>
<h2 data-id="heading-45">æ›´æ–°æ—¥å¿—</h2>
<ul>
<li>2025-01-XX: åˆå§‹ç‰ˆæœ¬</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç”¨ Gemini3 Flash åšäº†å¤šåŠå¤©å¼€å‘ï¼Œæˆ‘ç¦»ä¸‹å²—åˆè¿‘äº†ä¸€æ­¥]]></title>    <link>https://juejin.cn/post/7584787119274147867</link>    <guid>https://juejin.cn/post/7584787119274147867</guid>    <pubDate>2025-12-18T06:34:41.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7584787119274147867" data-draft-id="7584831190730096666" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç”¨ Gemini3 Flash åšäº†å¤šåŠå¤©å¼€å‘ï¼Œæˆ‘ç¦»ä¸‹å²—åˆè¿‘äº†ä¸€æ­¥"/> <meta itemprop="keywords" content="Gemini,AIç¼–ç¨‹,Google"/> <meta itemprop="datePublished" content="2025-12-18T06:34:41.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è‰å¸½lufei"/> <meta itemprop="url" content="https://juejin.cn/user/501033035632093"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç”¨ Gemini3 Flash åšäº†å¤šåŠå¤©å¼€å‘ï¼Œæˆ‘ç¦»ä¸‹å²—åˆè¿‘äº†ä¸€æ­¥
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/501033035632093/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è‰å¸½lufei
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-18T06:34:41.000Z" title="Thu Dec 18 2025 06:34:41 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-18
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;color:#3c9dff}.markdown-body h1{font-size:30px;margin-bottom:5px;padding-bottom:8px;text-align:center}.markdown-body h2{font-size:24px;padding-bottom:6px}.markdown-body h2:before{content:"ğŸ‹"}.markdown-body h3{font-size:18px;padding-bottom:0}.markdown-body h3:before{content:"ğŸ“"}.markdown-body h4{font-size:16px}.markdown-body h4:before{content:"ğŸ‘"}.markdown-body h5{font-size:15px}.markdown-body h5:before{content:"ğŸ‰"}.markdown-body h6{margin-top:5px}.markdown-body h6:before{content:"ğŸ’"}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{display:block;margin:0 auto;max-width:100%;border-radius:4px;padding:1px;border:1px solid #d2e8ff}.markdown-body img:hover{box-shadow:0 1px 3px #5eaeff}.markdown-body hr{height:4px;margin:34px 0;background-size:4px 1px;background-image:linear-gradient(270deg,#5eaeff,#f3f9ff 25%,transparent 50%);border-style:none}.markdown-body code{word-break:break-word;border-radius:3px;overflow-x:auto;background-color:#d2e8ff;color:#3c9dff;font-size:.9em;padding:.1em .5em;margin:0 3px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace;transition:all .3s}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;border:1px solid #90c7ff;border-radius:4px}.markdown-body pre:hover{box-shadow:0 1px 10px #beddff}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#3c9dff;border-bottom:1px solid #90c7ff;transition:all .3s}.markdown-body a:hover{color:#007fff;border-bottom:2px solid #5eaeff}.markdown-body a[href]:not(:empty){padding-right:18px}.markdown-body a[href]:not(:empty):after{display:inline-block;width:16px;height:16px;margin-left:2px;content:"";background:url(data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTYiIGhlaWdodD0iMTYiPjxwYXRoIGQ9Ik0zODQgMTI4YTQ4IDQ4IDAgMDEyLjgxNiA5NS45MkwzODQgMjI0SDI1NmEzMiAzMiAwIDAwLTMxLjkyIDI5LjZMMjI0IDI1NnY1MTJhMzIgMzIgMCAwMDI5LjYgMzEuOTJsMi40LjA4aDUxMmEzMiAzMiAwIDAwMzEuOTItMjkuNmwuMDgtMi40VjY1NmE0OCA0OCAwIDAxOTUuOTItMi44MTZMODk2IDY1NnYxMTJhMTI4IDEyOCAwIDAxLTEyNCAxMjcuOTM2bC00IC4wNjRIMjU2YTEyOCAxMjggMCAwMS0xMjcuOTM2LTEyNGwtLjA2NC00VjI1NmExMjggMTI4IDAgMDExMjQtMTI3LjkzNmw0LS4wNjRoMTI4em0zODQgMGExMjggMTI4IDAgMDExMjcuOTM2IDEyNGwuMDY0IDR2MTYwYTQ4IDQ4IDAgMDEtOTUuOTIgMi44MTZMODAwIDQxNlYyOTEuODcybC0zODIuMDY0IDM4Mi4wOGE0OCA0OCAwIDAxLTcwLjAzMi02NS42bDIuMTYtMi4yODhMNzMyLjA5NiAyMjRINjA4YTQ4IDQ4IDAgMDEtMi44MTYtOTUuOTJMNjA4IDEyOGgxNjB6IiBmaWxsPSIjM2M5ZGZmIiBmaWxsLW9wYWNpdHk9Ii41NiIgZGF0YS1zcG0tYW5jaG9yLWlkPSJhMzEzeC5zZWFyY2hfaW5kZXguMC5pMC41Yzc1M2E4MTgwa2RKWCIgY2xhc3M9InNlbGVjdGVkIi8+PC9zdmc+);background-size:100%}.markdown-body table{margin:0 auto 10px;font-size:12px;width:auto;max-width:100%;overflow:auto;border-collapse:collapse;border:1px solid #3c9dff}.markdown-body thead{text-align:center}.markdown-body thead th{color:#fff;background-color:#5eaeff}.markdown-body tr{text-align:center}.markdown-body tbody tr:hover{background-color:#d2e8ff}.markdown-body tbody tr:hover code{background-color:#90c7ff}.markdown-body tr:nth-child(2n){background-color:#ecf5ff}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#5eaeff}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body b,.markdown-body strong{font-weight:900;padding:0 1px;font-size:17px}.markdown-body small{color:#cbcbcb;padding:0 1px;font-size:22px;zoom:.5}.markdown-body em{padding:0 1px}.markdown-body del{padding:0 1px;text-decoration-thickness:2px}.markdown-body blockquote{color:#1a1b1c;padding:1px 20px;margin:22px 0;border-radius:4px;border-left:4px solid rgba(60,157,255,.5);background-color:rgba(190,221,255,.3)}.markdown-body blockquote blockquote{margin:8px 0}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body details{margin:12px 0;padding:4px 10px;border:2px solid #3c9dff;border-radius:8px;background-color:#ecf5ff;transition:all .3s}.markdown-body details summary{cursor:pointer}.markdown-body input[type=checkbox]{position:relative;appearance:none;width:16px;height:16px;border-radius:2px;vertical-align:middle;transform:translateY(-2px);box-sizing:border-box;border:1px solid #beddff}.markdown-body input[type=checkbox]:checked{border:1px solid #5eaeff;background-color:#5eaeff}.markdown-body input[type=checkbox]:checked:before{position:absolute;top:3px;left:1px;width:11px;height:6px;background-color:transparent;border-left:2px solid #fff;border-bottom:2px solid #fff;transform:rotate(-45deg);content:"";box-sizing:border-box}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="a11y-dark">.hljs-comment,.hljs-quote{color:#d4d0ab}.hljs-deletion,.hljs-name,.hljs-regexp,.hljs-selector-class,.hljs-selector-id,.hljs-tag,.hljs-template-variable,.hljs-variable{color:#ffa07a}.hljs-built_in,.hljs-builtin-name,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-type{color:#f5ab35}.hljs-attribute{color:gold}.hljs-addition,.hljs-bullet,.hljs-string,.hljs-symbol{color:#abe338}.hljs-section,.hljs-title{color:#00e0e0}.hljs-keyword,.hljs-selector-tag{color:#dcc6e0}.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#2b2b2b;color:#f8f8f2}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}@media screen and (-ms-high-contrast:active){.hljs-addition,.hljs-attribute,.hljs-built_in,.hljs-builtin-name,.hljs-bullet,.hljs-comment,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-quote,.hljs-string,.hljs-symbol,.hljs-type{color:highlight}.hljs-keyword,.hljs-selector-tag{font-weight:700}}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>ä¸€è§‰é†’æ¥ï¼ŒGoogleæ¨¡å‹åˆæ›´æ–°äº†ï¼Œå‘å¸ƒäº†Gemini3 Flashæ¨¡å‹</p>
<p>æ—©ä¸Šæ¥å…¬å¸åæ‰“å¼€ç¼–è¾‘å™¨ï¼Œå‘ç°Google Antigravity æç¤º Gemini3 Pro è¾¾åˆ°é…é¢é™åˆ¶äº†</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5fce3a1d7b854305b17d535bb36a01b1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6I2J5bi9bHVmZWk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766644481&amp;x-signature=3D15LsPGqd3RV8tMOMKUuJPX%2BDQ%3D" alt="" loading="lazy"/></p>
<p>Googleæ˜¯æ˜¨å¤©æ™šä¸Šä¸Šçº¿äº†Gemini3 Flash æ¨¡å‹ï¼ŒAntigravityçš„æ¨¡å‹åŒºåŸŸè‡ªåŠ¨æ›´æ–°äº† Flash æ¨¡å‹ï¼Œå¹¶ä¸”é™åˆ¶äº† Pro æ¨¡å‹</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/347192ebf1d9408c959ffbb3b56d972c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6I2J5bi9bHVmZWk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766644481&amp;x-signature=2M1fO%2F1QNfcq6aZkAqXrBPzRZo4%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-1">Gemini3 Flashä»‹ç»</h2>
<p>Gemini 3 Flash æ˜¯ Google äº 2025 å¹´ 12 æœˆ 17 æ—¥å‘å¸ƒçš„ AI æ¨¡å‹ã€‚ å®ƒåœ¨ä¿æŒé«˜å“åº”é€Ÿåº¦å’Œä½æˆæœ¬çš„åŒæ—¶ï¼Œæä¾›äº†æ¥è¿‘ç”šè‡³åœ¨æŸäº›é¢†åŸŸè¶…è¿‡ Pro çº§æ¨¡å‹çš„æ™ºèƒ½æ°´å¹³ã€‚ å®ƒæ˜¯ Gemini åº”ç”¨å’Œ Google æœç´¢â€œAI æ¨¡å¼â€çš„é»˜è®¤æ¨¡å‹</p>
<p>ç®€å•è§£é‡Šå°±æ˜¯ç”±äºæˆæœ¬ä½ï¼Œæ•ˆæœå¥½ï¼Œæ¨èä½¿ç”¨ Flashï¼Œå¹¶ä¸”ç°åœ¨æ˜¯é»˜è®¤çš„æ¨¡å‹</p>
<p>Google AI Studio ä¹Ÿé»˜è®¤ Gemini3 Flash æ¨¡å‹äº†</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f4b63f7b99b842be8cb3de6ebbcd7416~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6I2J5bi9bHVmZWk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766644481&amp;x-signature=7JlEMFO15jeFe7OXc5vQT1tepwA%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-2">Gemini3 Flashæ¨¡å‹ä½¿ç”¨</h2>
<p>æ—¢ç„¶ä¸èƒ½ç”¨Proï¼Œé‚£ä¹ˆå°±ç”¨ç”¨Flashæ¨¡å‹ï¼Œåˆšå¥½çœ‹çœ‹æ•ˆæœ</p>
<p>è€è§„çŸ©ï¼Œç›´æ¥åœ¨ä¸šåŠ¡é¡¹ç›®é‡Œï¼ŒçœŸå®åœºæ™¯ä¸‹è§£å†³å®é™…é—®é¢˜ï¼Œé¡ºä¾¿æµ‹è¯•</p>
<h3 data-id="heading-3">æ ¹æ®æˆªå›¾è°ƒæ¥å£ç»‘æ•°æ®</h3>
<p>è¿™ä¸ªä¸€ä¸ªå¤§å±çš„æŸæ¨¡å—æˆªå›¾ï¼Œé‡Œé¢çš„æ˜¯é™æ€æ•°æ®</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/860c2cc0295e4d96bbec8d4e03ce8e4d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6I2J5bi9bHVmZWk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766644481&amp;x-signature=gz4Z2IzV3NHqjmDNFqqyHkwue4I%3D" alt="" loading="lazy"/></p>
<p>ç°åœ¨æ ¹æ®æˆªå›¾å†…å®¹ï¼Œæˆ‘æä¾›æ¥å£ï¼Œå‚æ•°å’Œè¿”å›çš„æ•°æ®æ ¼å¼ï¼Œè®©å®ƒè‡ªåŠ¨è°ƒç”¨æ¥å£ç»‘å®šæ•°æ®ï¼Œå¹¶åœ¨é¡µé¢åˆå§‹åŒ–æ—¶è·å–æ•°æ®ï¼Œtabæ åˆ‡æ¢æ—¶é‡æ–°è·å–æ•°æ®</p>
<p>è¿™ç§å‡†ç¡®çš„éœ€æ±‚å®ç°çš„éå¸¸è½»æ¾ï¼Œè‡ªåŠ¨è°ƒç”¨äº†æ¥å£ï¼Œå¹¶ä¸”ç»‘å®šæ•°æ®ï¼Œå¹¶å‡†ç¡®è·å–æ•°æ®</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1f26455749a74e4bac4dbcc10246a60d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6I2J5bi9bHVmZWk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766644481&amp;x-signature=4XKngA99HFSEWhB4sSAgFJnX470%3D" alt="" loading="lazy"/></p>
<p>ç”±äºæµ‹è¯•ç¯å¢ƒåªæœ‰ä¸€æ¡æ•°æ®ï¼Œç°åœ¨ç»“æœå¦‚ä¸‹</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7b615d38d77246c880880ba750070445~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6I2J5bi9bHVmZWk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766644481&amp;x-signature=nvbkvYvnTdoBzY6Fa%2By%2Bd9OGT%2Bw%3D" alt="" loading="lazy"/></p>
<p>æ•´ä¸ªè¿‡ç¨‹å¤§æ¦‚20ç§’å·¦å³ï¼Œé€Ÿåº¦ä¹Ÿéå¸¸å¿«</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0a072df31c484cc6a3f4c7f6fd981645~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6I2J5bi9bHVmZWk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766644481&amp;x-signature=BL4OlfoUEAKK4nWYUKxrECie0i4%3D" alt="" loading="lazy"/></p>
<p>è®©å®ƒæ·»åŠ å¦ä¸€ä¸ªtabæŒ‰é’®ç‚¹å‡»è°ƒç”¨æ¥å£ç»‘å®šæ•°æ®ï¼Œé€Ÿåº¦æ›´å¿«ï¼Œç›´æ¥5så·¦å³å°±å®ç°äº†</p>
<p><strong>åƒæƒŠ</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e07350a463874fb897a67e64be6cdbde~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6I2J5bi9bHVmZWk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766644481&amp;x-signature=iqJdRoB6HR2P1DvWRsH83i5I0wk%3D" alt="" loading="lazy"/></p>
<p>æç¤ºè¯æ›´å°‘äº†ï¼Œé€Ÿåº¦æ›´å¿«äº†ï¼Œæˆ‘è·ç¦»ä¸‹å²—æ›´è¿‘äº†</p>
<p>æˆ‘å‘†äº†ï¼Œæˆ‘ä¸€ä¸ªå¼€å‘åè¿™é‡Œå·²ç»ç‘Ÿç‘Ÿå‘æŠ–äº†</p>
<h3 data-id="heading-4">ä¼˜åŒ–æˆªå›¾åŒºåŸŸçš„å­—ä½“æ ·å¼</h3>
<p>ç”±äºå­—ä½“æ¯”è¾ƒå°ï¼Œç›´æ¥æˆªäº†åªæœ‰ä¸‰è§’å½¢çš„å›¾ï¼Œè®©å®ƒæŠŠä¸‰è§’å½¢ä¸‹é¢çš„å­—ä½“æ”¹å¤§ä¸€ç‚¹</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/97c8206c1f12414a8912109e83fb400e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6I2J5bi9bHVmZWk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766644481&amp;x-signature=3ZQHQxGIa1VXgNnWpMCb%2Brl5h%2Fw%3D" alt="" loading="lazy"/></p>
<p>é€Ÿåº¦ä¹Ÿæ˜¯å¿«çš„é£èµ·ï¼Œå¤§çº¦9ç§’å°±å®ç°äº†ï¼Œè€Œä¸”æ•ˆæœå‡†ç¡®</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/14f1ae6675784e419e4c7c74c7332d62~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6I2J5bi9bHVmZWk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766644481&amp;x-signature=XOrgNz7iRY7i8VpQtAP%2FRhyCuxk%3D" alt="" loading="lazy"/></p>
<p>è¿™ç§å°é—®é¢˜ä¼˜åŒ–ï¼Œç®€ç›´ä¸è¦å¤ªçˆ½</p>
<h3 data-id="heading-5">ç»™å•ç‹¬æ¥å£æ·»åŠ token</h3>
<p>æœ‰ä¸ªæ¥å£éœ€è¦å•ç‹¬ä¼ tokenï¼Œè¿™ä¸ªé¡µé¢çš„å…¶ä»–æ¥å£éƒ½ä¸ç”¨ï¼Œè®©å®ƒæŠŠAuthorizationå¤´å‚æ•°tokenåŠ ä¸Šï¼Œç»“æœä¹Ÿæ˜¯2så°±æå®šäº†ï¼Œé€Ÿåº¦è¶…å¿«</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/16c73b47a5b643af8734a275548ee815~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6I2J5bi9bHVmZWk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766644481&amp;x-signature=nEp0KJu5wY%2BPWGGWWj549k3WxSQ%3D" alt="" loading="lazy"/></p>
<p>è™½ç„¶æˆ‘çŸ¥é“é¡¹ç›®é‡Œç™»å½•åæ˜¯æœ‰tokençš„ï¼Œä½†æ˜¯æˆ‘å¹¶ä¸çŸ¥é“tokenè®¾ç½®å…·ä½“åœ¨å“ªä¸ªæ–‡ä»¶é‡Œï¼Œæˆ‘æ˜¯æ¥æ‰‹çš„é¡¹ç›®ï¼Œåœ¨é‡Œé¢åŠ æ–°ä¸œè¥¿æ”¹ä»£ç </p>
<p>å…³é”®å®ƒè¿˜æ˜¯ä»é¡¹ç›®é‡Œåˆ†æï¼Œtokenåœ¨/utils/auth.jsé‡Œï¼Œå¹¶åˆ†æäº†é€»è¾‘ï¼Œç›´æ¥åœ¨é‡Œé¢æ·»åŠ äº†token</p>
<p>Gemini3 Flashç°åœ¨è¡¨ç°çš„å·²ç»æ¯”æˆ‘æ›´æ‡‚é¡¹ç›®ç»“æ„å’Œä»£ç äº†</p>
<p><strong>åƒæƒŠ+1</strong></p>
<h2 data-id="heading-6">å°ç»“</h2>
<p>ç”¨Gemini3 Flashåšäº†å¤šåŠå¤©å¼€å‘ç›¸å…³å†…å®¹ï¼Œå¤¸AIæ¨¡å‹æ€ä¹ˆå‰å®³æ€ä¹ˆç‰›å°±ä¸è°ˆäº†ï¼Œæ›´å¤šçš„æ˜¯å¯¹æœªæ¥çš„ææƒ§</p>
<p>è¿™ä¹ˆç‰›å·¥å…·èƒ½è¿™ä¹ˆé«˜æ•ˆçš„äº§å‡ºï¼Œå¦‚æœè€æ¿ä¹Ÿçœ‹åˆ°ç›¸å…³æ–°é—»ï¼Œä¹ŸæŠ½ç©ºå»ä½“éªŒäº†ï¼Œä¹Ÿæ‹‰ç€é«˜ç®¡è®¨è®ºäº†ï¼Œä¸ºäº†é™æœ¬å¢æ•ˆï¼Œç»“æœä¼šæ€ä¹ˆæ ·ï¼Ÿ</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è®©è°·æ­Œç¿»èº«çš„Gemini 3ï¼Œä¸Šçº¿Flashç‰ˆ]]></title>    <link>https://juejin.cn/post/7584987267292594222</link>    <guid>https://juejin.cn/post/7584987267292594222</guid>    <pubDate>2025-12-18T06:45:25.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7584987267292594222" data-draft-id="7584787119274246171" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è®©è°·æ­Œç¿»èº«çš„Gemini 3ï¼Œä¸Šçº¿Flashç‰ˆ"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½,OpenAI"/> <meta itemprop="datePublished" content="2025-12-18T06:45:25.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æœºå™¨ä¹‹å¿ƒ"/> <meta itemprop="url" content="https://juejin.cn/user/1873223543167902"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è®©è°·æ­Œç¿»èº«çš„Gemini 3ï¼Œä¸Šçº¿Flashç‰ˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1873223543167902/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æœºå™¨ä¹‹å¿ƒ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-18T06:45:25.000Z" title="Thu Dec 18 2025 06:45:25 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-18
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>OpenAI è¿˜åœ¨å·è·‘åˆ†ï¼Œè°·æ­Œå·²ç»æ‰“ç©¿åº”ç”¨å±‚äº†ã€‚</p>
<p>åŒ—äº¬æ—¶é—´å‘¨å››é›¶ç‚¹ï¼ŒGoogle å‘å¸ƒäº†é«˜é€Ÿã€ä½æˆæœ¬æ¨¡å‹ Gemini 3 Flashï¼Œä½œä¸ºå…¶ä»Šå¹´å¤§æ¨¡å‹é¢†åŸŸçš„æ”¶å®˜ä¹‹ä½œã€‚</p>
<p>è¯¥æ¨¡å‹åŸºäºä¸Šä¸ªæœˆå‘å¸ƒçš„ Gemini 3ï¼Œæ˜æ˜¾å¸¦æœ‰æŠ¢ OpenAI é£å¤´çš„æ„å‘³ã€‚ä¸æ­¤åŒæ—¶ï¼ŒGoogle è¿˜å°† Gemini 3 Flash è®¾ä¸º Gemini åº”ç”¨å’Œæœç´¢ AI æ¨¡å¼ä¸­çš„é»˜è®¤æ¨¡å‹ã€‚</p>
<p>è¿™æ¬¾æ–°çš„ Flash æ¨¡å‹è·ç¦» Google å‘å¸ƒ Gemini 2.5 Flash ä»…è¿‡å»å…­ä¸ªæœˆï¼Œä½†åœ¨æ€§èƒ½ä¸Šå®ç°äº†æ˜¾è‘—è·ƒå‡ã€‚åŸºå‡†æµ‹è¯•æ˜¾ç¤ºï¼ŒGemini 3 Flash ç›¸æ¯”å‰ä»£æ¨¡å‹æœ‰å¤§å¹…æå‡ï¼Œå¹¶åœ¨éƒ¨åˆ†æŒ‡æ ‡ä¸Šè¾¾åˆ°äº† Gemini 3 Pro å’Œ GPT-5.2 ç­‰å‰æ²¿æ¨¡å‹çš„æ°´å¹³ã€‚</p>
<p>åœ¨æ™ºèƒ½ / æˆæœ¬ä¸Šï¼Œå®ƒæˆä¸ºäº†å…¨çƒæ€§ä»·æ¯”æœ€é«˜çš„æ¨¡å‹ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f0c8364c247a4b97a864d9fbdc2ab4df~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766645125&amp;x-signature=OJ%2FbDbvUPjRG0JMAT9B0JdPicTU%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ä¾‹å¦‚ï¼Œåœ¨ Humanityâ€™s Last Exam åŸºå‡†æµ‹è¯•ä¸­ï¼ˆè¯¥æµ‹è¯•æ—¨åœ¨è¯„ä¼°æ¨¡å‹åœ¨ä¸åŒä¸“ä¸šé¢†åŸŸçš„ç»¼åˆèƒ½åŠ›ï¼‰ï¼Œåœ¨ä¸ä½¿ç”¨å·¥å…·çš„æƒ…å†µä¸‹ï¼ŒGemini 3 Flash å–å¾—äº† 33.7% çš„æˆç»©ã€‚ä½œä¸ºå¯¹æ¯”ï¼ŒGemini 3 Pro çš„å¾—åˆ†ä¸º 37.5%ï¼ŒGemini 2.5 Flash ä¸º 11%ï¼Œè€Œæ–°å‘å¸ƒçš„ GPT-5.2 åˆ™ä¸º 34.5%ã€‚</p>
<p>ä¸æ­¤åŒæ—¶ï¼Œè°·æ­Œä¹Ÿå°†è¿™æ¬¾æ–°æ¨¡å‹åœ¨å…¨çƒèŒƒå›´å†…å‘æ•°ä»¥ç™¾ä¸‡è®¡çš„ç”¨æˆ·å¼€æ”¾ï¼Œè¦†ç›–ä»¥ä¸‹æ¸ é“ï¼š</p>
<ul>
<li>
<p>å¼€å‘è€…ï¼šé€šè¿‡ Google AI Studio ä¸­çš„ Gemini APIã€Gemini CLIï¼Œä»¥åŠå…¨æ–°çš„æ™ºèƒ½ä½“å¼€å‘å¹³å° Google Antigravity</p>
</li>
<li>
<p>æ‰€æœ‰ç”¨æˆ·ï¼šé€šè¿‡ Gemini åº”ç”¨ï¼Œä»¥åŠæœç´¢ä¸­çš„ AI æ¨¡å¼ï¼ˆAI Mode in Searchï¼‰</p>
</li>
<li>
<p>ä¼ä¸šç”¨æˆ·ï¼šé€šè¿‡ Vertex AI å’Œ Gemini Enterprise</p>
</li>
</ul>
<p>Gemini 3 Flash å‘å¸ƒåï¼Œå¤§å®¶ç¬¬ä¸€æ—¶é—´è¿›è¡Œäº†ä½¿ç”¨æµ‹è¯•ï¼Œå‘ç°è¿™ä¸ª AI å›ç­”é—®é¢˜çš„å“åº”é€Ÿåº¦åŸºæœ¬éƒ½åœ¨ 1 ç§’ä»¥å†…ï¼Œçš„ç¡®æ˜¯è·Ÿæœç´¢å¼•æ“ä¸€æ ·å¿«ã€‚è€Œä¸”å®ƒåœ¨å›ç­”é—®é¢˜çš„æ—¶å€™ç›¸æ¯”ä»¥å‰æ›´åŠ è¯¦ç»†ï¼ŒçŸ¥è¯†çš„è¦†ç›–é¢ã€å‡†ç¡®æ€§ä¹Ÿå¾ˆé«˜ï¼Œçœ‹èµ·æ¥åƒæ˜¯é»˜è®¤è”ç½‘çš„ã€‚</p>
<p>ç½‘å‹ä»¬çŒœæµ‹ï¼ŒGemini 3 Flash å¯ä»¥è¢«è°·æ­Œç”¨æ¥ä»£æ›¿æœç´¢å¼•æ“ï¼Œæˆ–æ˜¯é€æ¸ç§»æ¤åˆ°ç§»åŠ¨ç«¯ä¾§ã€‚ä¸è®ºå¦‚ä½•ï¼Œæ–°æ¨¡å‹éƒ½é¢„ç¤ºç€ AI æ¨¡å‹çš„æ–°æ—¶ä»£æ­£åœ¨åˆ°æ¥ã€‚</p>
<p>Gemini 3 Flashï¼šè§„æ¨¡åŒ–çš„å‰æ²¿æ™ºèƒ½Â </p>
<p>Gemini 3 Flash è¯æ˜äº†ï¼Œé€Ÿåº¦ä¸è§„æ¨¡å¹¶ä¸å¿…ç„¶ä»¥ç‰ºç‰²æ™ºèƒ½ä¸ºä»£ä»·ã€‚åœ¨å¤šé¡¹åšå£«çº§æ¨ç†ä¸çŸ¥è¯†åŸºå‡†æµ‹è¯•ä¸­ï¼Œä¾‹å¦‚ GPQA Diamondï¼ˆ90.4%ï¼‰ å’Œ Humanityâ€™s Last Examï¼ˆåœ¨ä¸ä½¿ç”¨å·¥å…·çš„æƒ…å†µä¸‹ä¸º 33.7%ï¼‰ï¼ŒGemini 3 Flash å‡å±•ç°å‡ºå‰æ²¿çº§æ€§èƒ½ï¼Œå¯ä¸æ›´å¤§è§„æ¨¡çš„å‰æ²¿æ¨¡å‹ç›¸åª²ç¾ï¼Œå¹¶åœ¨å¤šé¡¹åŸºå‡†æµ‹è¯•ä¸­æ˜¾è‘—è¶…è¶Šäº†æ­¤å‰æœ€å¼ºçš„ 2.5 ä»£æ¨¡å‹ â€”â€”Gemini 2.5 Proã€‚</p>
<p>åŒæ—¶ï¼Œåœ¨å¤šæ¨¡æ€æ¨ç†åŸºå‡† MMMU Pro ä¸Šï¼ŒGemini 3 Flash ä»¥ 81.2% çš„é«˜åˆ†è¾¾åˆ°äº†å½“å‰æœ€å…ˆè¿›æ°´å¹³ï¼Œå…¶è¡¨ç°ä¸ Gemini 3 Pro ä¸ç›¸ä¸Šä¸‹ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b5b1e7382ae04ee081ca2cbdb205b1d3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766645125&amp;x-signature=epeBai8lricgiFsAV%2BaVCscL1%2Fs%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ä»åŸºå‡†æµ‹è¯•ä¸Šå¯ä»¥çœ‹åˆ°ï¼ŒGemini 3 Flash æ€§èƒ½å¼ºå¤§ï¼Œåœ¨å„æ–¹é¢éƒ½è¶…è¶Šäº† Gemini 2.5 Proï¼Œç”šè‡³åœ¨ ARC-AGI-2 å’Œ SWE-Bench Verified æµ‹è¯•ä¸­èƒœè¿‡äº† Gemini 3 Proã€‚</p>
<p>ç°åœ¨ï¼Œç²¾ç®€åçš„æ¨¡å‹ï¼ˆä½“ç§¯ç¼©å° 3-4 å€ï¼‰å·²ç»è¶…è¶Šäº† 6 ä¸ªæœˆå‰çš„ã€Œå‰æ²¿ã€æ¨¡å‹ã€‚</p>
<p>é™¤äº†å…·å¤‡å‰æ²¿çº§çš„æ¨ç†èƒ½åŠ›å’Œå¤šæ¨¡æ€èƒ½åŠ›ä¹‹å¤–ï¼ŒGemini 3 Flash åœ¨è®¾è®¡ä¹‹åˆå°±ä»¥æé«˜çš„æ•ˆç‡ä¸ºç›®æ ‡ï¼Œè¿›ä¸€æ­¥æ¨åŠ¨äº†è´¨é‡ä¸æˆæœ¬ã€é€Ÿåº¦ä¹‹é—´çš„å¸•ç´¯æ‰˜å‰æ²¿ã€‚</p>
<p>åœ¨æœ€é«˜æ€è€ƒç­‰çº§ä¸‹è¿è¡Œæ—¶ï¼ŒGemini 3 Flash èƒ½å¤ŸåŠ¨æ€è°ƒèŠ‚è‡ªèº«çš„æ€è€ƒæ·±åº¦ï¼šé¢å¯¹æ›´å¤æ‚çš„ä½¿ç”¨åœºæ™¯ï¼Œå®ƒä¼šæŠ•å…¥æ›´é•¿æ—¶é—´è¿›è¡Œæ¨ç†ï¼›è€Œåœ¨å¤„ç†æ—¥å¸¸ä»»åŠ¡æ—¶ï¼Œåˆ™èƒ½ä»¥æ›´é«˜æ€§èƒ½å®Œæˆç›®æ ‡ï¼ŒåŒæ—¶åœ¨å…¸å‹ä¸šåŠ¡æµé‡ä¸‹ï¼Œå¹³å‡ä½¿ç”¨çš„ token æ•°é‡æ¯” Gemini 2.5 Pro å‡å°‘çº¦ 30%ã€‚</p>
<p>è¿™ä½¿å¾— Gemini 3 Flash èƒ½å¤Ÿåœ¨ä¿è¯å‡†ç¡®æ€§çš„åŒæ—¶ï¼Œä»¥æ›´ä½çš„æˆæœ¬å’Œæ›´é«˜çš„æ•ˆç‡å®Œæˆæ—¥å¸¸ä»»åŠ¡ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6230525d9ce54f72b54f3ff83ccb7360~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766645125&amp;x-signature=0MukeLDTQc6eGYpuhPQgxeIDT5Q%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>Jeff Dean è¡¨ç¤ºï¼šã€Œæˆ‘ä»¬å†æ¬¡çªç ´äº†æ•ˆç‡ä¸æ™ºèƒ½ä¹‹é—´çš„å¸•ç´¯æ‰˜è¾¹ç•Œã€‚ã€</p>
<p>Gemini 3 Flash çš„æ ¸å¿ƒä¼˜åŠ¿åœ¨äºå…¶æè‡´çš„åŸç”Ÿé€Ÿåº¦ï¼Œå»¶ç»­å¹¶å¼ºåŒ–äº†å¼€å‘è€…å’Œæ¶ˆè´¹è€…æ—©å·²é’ççš„ Flash ç³»åˆ—ç‰¹æ€§ã€‚æ ¹æ® Artificial Analysis çš„åŸºå‡†æµ‹è¯•ç»“æœï¼ŒGemini 3 Flash åœ¨æ€§èƒ½ä¸Šè¶…è¶Š Gemini 2.5 Pro çš„åŒæ—¶ï¼Œé€Ÿåº¦æå‡è¾¾åˆ° 3 å€ï¼Œè€Œæˆæœ¬ä»…ä¸ºå…¶ä¸€å°éƒ¨åˆ†ã€‚</p>
<p>åœ¨å®šä»·æ–¹é¢ï¼ŒGemini 3 Flash çš„è´¹ç”¨ä¸ºï¼š</p>
<ul>
<li>
<p>è¾“å…¥ï¼šæ¯ 100 ä¸‡ token æ”¶è´¹ 0.50 ç¾å…ƒ</p>
</li>
<li>
<p>è¾“å‡ºï¼šæ¯ 100 ä¸‡ token æ”¶è´¹ 3 ç¾å…ƒ</p>
</li>
<li>
<p>éŸ³é¢‘è¾“å…¥ï¼šä»ä¸ºæ¯ 100 ä¸‡ token æ”¶è´¹ 1 ç¾å…ƒ</p>
</li>
</ul>
<p>Gemini 3 Flash åœ¨é€Ÿåº¦å’Œæ•ˆç‡ä¸Šå‡æ˜¾è‘—ä¼˜äº Gemini 2.5 Proã€‚åœ¨ä¸Šä¸€ä»£æ¨¡å‹å°šæœªå®Œæˆå¤„ç†ä¹‹å‰ï¼ŒGemini 3 Flash å·²ç»ç”Ÿæˆäº†å¤æ‚å›¾å½¢ã€3D æ¨¡å‹ä»¥åŠä¸€ä¸ª Web åº”ç”¨ã€‚</p>
<p>é¢å‘å¼€å‘è€…ï¼šå§‹ç»ˆè·Ÿå¾—ä¸ŠèŠ‚å¥çš„æ™ºèƒ½Â </p>
<p>Gemini 3 Flash ä¸“ä¸ºé«˜é¢‘è¿­ä»£å¼€å‘è€Œæ‰“é€ ï¼Œåœ¨ä¿æŒä½å»¶è¿Ÿçš„åŒæ—¶ï¼Œæä¾› Gemini 3 Pro çº§åˆ«çš„ä»£ç èƒ½åŠ›ï¼Œèƒ½å¤Ÿåœ¨é«˜å¹¶å‘ã€å¿«èŠ‚å¥çš„å·¥ä½œæµä¸­è¿…é€Ÿè¿›è¡Œæ¨ç†å¹¶è§£å†³é—®é¢˜ã€‚</p>
<p>åœ¨ç”¨äºè¯„ä¼°ä»£ç æ™ºèƒ½ä½“èƒ½åŠ›çš„åŸºå‡†æµ‹è¯• SWE-bench Verified ä¸Šï¼ŒGemini 3 Flash å–å¾—äº† 78% çš„æˆç»©ï¼Œä¸ä»…è¶…è¶Šäº† 2.5 ç³»åˆ—æ¨¡å‹ï¼Œä¹Ÿä¼˜äº Gemini 3 Proã€‚</p>
<p>è¿™ä½¿ Gemini 3 Flash åœ¨æ™ºèƒ½ä½“ç¼–ç¨‹ï¼ˆagentic codingï¼‰ã€ç”Ÿäº§çº§ç³»ç»Ÿä»¥åŠé«˜å“åº”æ€§çš„äº¤äº’å¼åº”ç”¨åœºæ™¯ä¸­ï¼Œå®ç°äº†æ€§èƒ½ã€é€Ÿåº¦ä¸æˆæœ¬ä¹‹é—´çš„ç†æƒ³å¹³è¡¡ã€‚</p>
<p>Gemini 3 Flash åœ¨æ¨ç†èƒ½åŠ›ã€å·¥å…·ä½¿ç”¨ä»¥åŠå¤šæ¨¡æ€èƒ½åŠ›æ–¹é¢çš„å¼ºåŠ²è¡¨ç°ï¼Œä½¿å…¶éå¸¸é€‚åˆå¸Œæœ›å¼€å±•æ›´å¤æ‚çš„è§†é¢‘åˆ†æã€æ•°æ®æŠ½å–å’Œè§†è§‰é—®ç­”ï¼ˆVisual Q&amp;Aï¼‰ çš„å¼€å‘è€…ã€‚è¿™ä¹Ÿæ„å‘³ç€ï¼Œå®ƒèƒ½å¤Ÿæ”¯æ’‘æ›´å…·æ™ºèƒ½æ°´å¹³çš„åº”ç”¨åœºæ™¯ â€”â€” ä¾‹å¦‚æ¸¸æˆå†…åŠ©æ‰‹æˆ– A/B æµ‹è¯•å®éªŒï¼Œåœ¨è¿™äº›åœºæ™¯ä¸­ï¼Œæ—¢éœ€è¦å¿«é€Ÿå“åº”ï¼Œåˆè¦æ±‚æ·±åº¦æ¨ç†èƒ½åŠ›ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9069a9c1e9d14723978504a68a40e242~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766645125&amp;x-signature=Nsc%2BKZyJ4HG6nmza8aX5cW6NQWQ%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>Gemini 3 Flash åœ¨ä¸€æ¬¾æ‰‹åŠ¿è¿½è¸ªçš„æŠ•çƒè§£è°œæ¸¸æˆä¸­å®ç°äº†å¤šæ¨¡æ€æ¨ç†ï¼Œæä¾›äº†è¿‘ä¹å®æ—¶çš„ AI è¾…åŠ©ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8adfc34030c84ed2a63260ae86bb974a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766645125&amp;x-signature=AQOLtH78ipXhWMjp9KN20bWCV8Y%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>Gemini 3 Flash èƒ½å¤Ÿè¿‘ä¹å®æ—¶åœ°æ„å»ºå’Œè¿›è¡Œ A/B æµ‹è¯•æ–°çš„åŠ è½½æŒ‡ç¤ºå™¨è®¾è®¡ï¼Œä»è€Œç®€åŒ–äº†ä»è®¾è®¡åˆ°ç¼–ç çš„æµç¨‹ã€‚</p>
<p>é‡‡ç”¨ Gemini 3 Flash çš„ä¼ä¸šåé¦ˆéå¸¸ç§¯æã€‚åŒ…æ‹¬ JetBrainsã€Bridgewater Associates å’Œ Figma åœ¨å†…çš„å¤šå®¶å…¬å¸ï¼Œå·²ç»å¼€å§‹ä½¿ç”¨è¯¥æ¨¡å‹æ¨åŠ¨ä¸šåŠ¡è½¬å‹ï¼Œå¹¶è®¤å¯å…¶åœ¨æ¨ç†é€Ÿåº¦ã€æ•ˆç‡ä»¥åŠæ¨ç†èƒ½åŠ›æ–¹é¢çš„è¡¨ç°ï¼Œèƒ½å¤Ÿä¸æ›´å¤§è§„æ¨¡çš„æ¨¡å‹ç›¸åª²ç¾ã€‚</p>
<p>ç›®å‰ï¼ŒGemini 3 Flash å·²é€šè¿‡ Vertex AI å’Œ Gemini Enterprise æ­£å¼å‘ä¼ä¸šå®¢æˆ·å¼€æ”¾ã€‚</p>
<p>Cursor å¼€å‘è€…ä½“éªŒå‰¯æ€»è£è¡¨ç¤ºï¼Œä»–ä»¬çš„å·¥ç¨‹å¸ˆå‘ç°ï¼ŒGemini 3 Flash ä¸ Cursor çš„ Debug Mode é…åˆä½¿ç”¨æ•ˆæœéå¸¸å‡ºè‰²ã€‚è¯¥æ¨¡å‹åœ¨é—®é¢˜æ’æŸ¥å’Œå®šä½ Bug æ ¹æœ¬åŸå› æ–¹é¢è¡¨ç°å‡ºé€Ÿåº¦å¿«ã€å‡†ç¡®æ€§é«˜çš„ä¼˜åŠ¿ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/af98b7fbe3964b3ab27f840b876ac3d3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766645125&amp;x-signature=CvlaOYGXfBmyIqhaPLJLhMDjkZo%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>é¢å‘æ‰€æœ‰äººï¼šGemini 3 Flash å…¨çƒä¸Šçº¿</p>
<p>Gemini 3 Flash ç°å·²æˆä¸º Gemini åº”ç”¨çš„é»˜è®¤æ¨¡å‹ï¼Œå–ä»£äº† 2.5 Flashã€‚è¿™æ„å‘³ç€å…¨çƒ Gemini ç”¨æˆ·éƒ½å·²èƒ½å…è´¹ä½“éªŒ Gemini 3ï¼Œä»è€Œå¤§å¹…æå‡æ—¥å¸¸ä»»åŠ¡çš„å¤„ç†æ•ˆç‡ã€‚</p>
<p>å‡­å€Ÿ Gemini 3 Flash å“è¶Šçš„å¤šæ¨¡æ€æ¨ç†èƒ½åŠ›ï¼Œä½ å¯ä»¥åˆ©ç”¨å®ƒæ›´å¿«åœ°æŸ¥çœ‹ã€è†å¬å’Œç†è§£å„ç§ç±»å‹çš„ä¿¡æ¯ã€‚ä¾‹å¦‚ï¼Œä½ å¯ä»¥è®© Gemini ç†è§£è§†é¢‘å’Œå›¾åƒï¼Œå¹¶åœ¨çŸ­çŸ­å‡ ç§’é’Ÿå†…å°†è¿™äº›å†…å®¹è½¬åŒ–ä¸ºå®ç”¨ä¸”å¯è¡Œçš„è®¡åˆ’ã€‚</p>
<p>æˆ–è€…ï¼Œä½ æ— éœ€ä»»ä½•ç¼–ç¨‹çŸ¥è¯†ï¼Œå³å¯ä½¿ç”¨è¯­éŸ³å¿«é€Ÿä»é›¶å¼€å§‹æ„å»ºå®ç”¨çš„åº”ç”¨ç¨‹åºã€‚åªéœ€éšæ—¶éšåœ°å‘ Gemini å‘å‡ºè¯­éŸ³æŒ‡ä»¤ï¼Œå®ƒå°±èƒ½åœ¨å‡ åˆ†é’Ÿå†…å°†äººä»¬é›¶æ•£çš„æƒ³æ³•è½¬åŒ–ä¸ºåŠŸèƒ½å®Œå–„çš„åº”ç”¨ç¨‹åºã€‚</p>
<p>ä½¿ç”¨ Gemini 3 Flash æè¿°ä¸€ä¸ªæƒ³æ³•ï¼Œå¹¶åœ¨å‡ åˆ†é’Ÿå†…å°†å…¶è½¬åŒ–ä¸ºå¯è¡Œçš„åŸå‹ã€‚</p>
<p>Gemini 3 Flash ä¹Ÿæ­£åœ¨é€æ­¥æ¨å¹¿ï¼Œè°·æ­Œå¸Œæœ›å®ƒèƒ½æˆä¸ºå…¨çƒç”¨æˆ·ä½¿ç”¨çš„æœç´¢åŠŸèƒ½ä¸­ AI æ¨¡å¼çš„é»˜è®¤æ¨¡å‹ã€‚</p>
<p>åŸºäº Gemini 3 Pro çš„æ¨ç†èƒ½åŠ›ï¼Œæ­è½½ Gemini 3 Flash çš„ AI æ¨¡å¼èƒ½å¤Ÿæ›´æœ‰æ•ˆåœ°ç†è§£ä½ é—®é¢˜çš„ç»†å¾®ä¹‹å¤„ã€‚å®ƒä¼šè€ƒè™‘æŸ¥è¯¢çš„å„ä¸ªæ–¹é¢ï¼Œæä¾›å…¨é¢çš„å›å¤ï¼Œä»¥æ˜“äºç†è§£çš„æ–¹å¼å‘ˆç° â€”â€” ä»ç½‘ç»œä¸Šæå–å®æ—¶æœ¬åœ°ä¿¡æ¯å’Œæœ‰ç”¨çš„é“¾æ¥ã€‚æœ€ç»ˆç»“æœæœ‰æ•ˆåœ°å°†ç ”ç©¶ä¸å®é™…è¡ŒåŠ¨ç›¸ç»“åˆï¼šç”Ÿæˆæ¡ç†æ¸…æ™°çš„åˆ†æä»¥åŠå…·ä½“çš„å»ºè®®ã€‚æœ€åï¼Œä¸€åˆ‡éƒ½ä»¥æœç´¢çš„é€Ÿåº¦å®Œæˆã€‚</p>
<p>åœ¨å¤„ç†éœ€è¦è€ƒè™‘å¤šä¸ªå› ç´ çš„å¤æ‚ç›®æ ‡æ—¶ï¼Œä¾‹å¦‚è®¡åˆ’ä¸€æ¬¡è¯´èµ°å°±èµ°çš„æ—…è¡Œï¼Œæˆ–å¿«é€Ÿå­¦ä¹ å¤æ‚çš„æ•™è‚²æ¦‚å¿µï¼Œè¿™é¡¹åŠŸèƒ½å°¤å…¶å‡ºè‰²ã€‚</p>
<p>è°·æ­Œè¡¨ç¤ºï¼ŒGemini 3 Flash ç°å·²é€šè¿‡ Google AI Studioã€Google Antigravityã€Vertex AI å’Œ Gemini Enterprise ä¸­çš„ Gemini API æä¾›é¢„è§ˆç‰ˆã€‚ä½ è¿˜å¯ä»¥é€šè¿‡å…¶ä»–å¼€å‘è€…å·¥å…·ï¼ˆä¾‹å¦‚ Gemini CLI å’Œ Android Studioï¼‰è®¿é—®æ–°æ¨¡å‹ã€‚æ­¤å¤–ï¼Œå®ƒä¹Ÿå·²å¼€å§‹åœ¨ Gemini åº”ç”¨å’Œæœç´¢çš„ AI æ¨¡å¼ä¸­é¢å‘æ‰€æœ‰ç”¨æˆ·æ¨å‡ºã€‚</p>
<p>å‚è€ƒé“¾æ¥ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.google%2Fproducts%2Fgemini%2Fgemini-3-flash%2F" target="_blank" title="https://blog.google/products/gemini/gemini-3-flash/" ref="nofollow noopener noreferrer">blog.google/products/geâ€¦</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æˆ‘æŠŠå…¬ä¼—å·æ–‡ç« å¯¼å…¥äº†è…¾è®¯ imaï¼Œå¯ä»¥å¯¹è¯æ‰¾å¼€æºé¡¹ç›®äº†ã€‚]]></title>    <link>https://juejin.cn/post/7584817405228236841</link>    <guid>https://juejin.cn/post/7584817405228236841</guid>    <pubDate>2025-12-18T06:48:36.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7584817405228236841" data-draft-id="7584817405228171305" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æˆ‘æŠŠå…¬ä¼—å·æ–‡ç« å¯¼å…¥äº†è…¾è®¯ imaï¼Œå¯ä»¥å¯¹è¯æ‰¾å¼€æºé¡¹ç›®äº†ã€‚"/> <meta itemprop="keywords" content="GitHub,å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-18T06:48:36.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é€›é€›GitHub"/> <meta itemprop="url" content="https://juejin.cn/user/1442202996186093"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æˆ‘æŠŠå…¬ä¼—å·æ–‡ç« å¯¼å…¥äº†è…¾è®¯ imaï¼Œå¯ä»¥å¯¹è¯æ‰¾å¼€æºé¡¹ç›®äº†ã€‚
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1442202996186093/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é€›é€›GitHub
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-18T06:48:36.000Z" title="Thu Dec 18 2025 06:48:36 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-18
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>é€›é€› GitHub æ¨èè¿‡æˆåƒä¸Šä¸‡ä¸ªä¼˜è´¨å¼€æºé¡¹ç›®ã€‚ä½†ç»å¸¸æœ‰è¯»è€…åœ¨åå°é—®ï¼š</p>
<ul>
<li>é€›é€›ï¼Œå‰æ®µæ—¶é—´ä½ æ¨è¿‡ä¸€ä¸ª AI å¤§æ¨¡å‹å¼€æºè¯¾ç¨‹ï¼Œå«å•¥æ¥ç€ï¼Ÿ</li>
<li>æœ‰æ²¡æœ‰æŒ‡å¯¼æå‰¯ä¸šä¸€äººå…¬å¸çš„å¼€æºé¡¹ç›®ï¼Ÿè®°å¾—ä½ å‘è¿‡ã€‚</li>
</ul>
<p>æ–‡ç« å‘å¾—å¤ªå¤šï¼Œæœ‰æ—¶å€™è¿æˆ‘è‡ªå·±éƒ½æœä¸åˆ°ã€‚å¾®ä¿¡å…¬ä¼—å·è‡ªå¸¦çš„æœç´¢åŠŸèƒ½ï¼Œæ‡‚çš„éƒ½æ‡‚ï¼Œç»å¸¸æ˜¯å¤§æµ·æé’ˆã€‚</p>
<p>æœ€è¿‘ï¼Œæˆ‘åœ¨è…¾è®¯ ima åˆ›å»ºäº†ä¸€ä¸ªçŸ¥è¯†åº“ã€Œé€›é€›GitHubã€ï¼ŒæŠŠå…¬ä¼—å·ä¼˜è´¨æ–‡ç« éƒ½å¯¼å…¥åˆ° ima äº†ã€‚</p>
<p>è…¾è®¯ ima æ˜¯ä¸€æ¬¾ä»¥çŸ¥è¯†åº“ä¸ºåŸºç¡€çš„ AI å·¥ä½œå°ï¼Œèƒ½å¸®ä½ å®Œæˆé—®ç­”å’Œå†…å®¹åˆ›ä½œï¼Œè®©çŸ¥è¯†ç®¡ç†æ›´é«˜æ•ˆã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/482a04b22a2b4ff3a42ae0bd866fb74a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766645315&amp;x-signature=JSm4Ef1H5QKTChz%2F79XiqEl%2Borc%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å¦‚æœä½ æœ€è¿‘æƒ³äº†è§£æŸä¸€ä¸ªæ–¹å‘çš„å¼€æºé¡¹ç›®ï¼Œä¸æƒ³ä¸€ä¸ªä¸ªæ‰’æˆ‘çš„æ–‡ç« ã€‚å¯ä»¥ç›´æ¥æ‰“å¼€ ima è¿›å…¥çŸ¥è¯†åº“å¹¿åœºï¼Œæœç´¢ã€Œé€›é€›GitHubã€åŠ å…¥ç›´æ¥æé—®å°±è¡Œäº†ã€‚</p>
<p>è¿™ä¸ªçŸ¥è¯†åº“é‡Œæœ‰æˆ‘å†å²æ¨èçš„å¼€æºé¡¹ç›®åˆé›†ï¼ŒèŠä¸€èŠå°±åç»™ä½ å†å²ç›˜ç‚¹çš„é¡¹ç›®ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d20856fc69514085902e4b8ce3a5b750~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766645315&amp;x-signature=oT%2F79U8Lae4xHHgbGyd8pg%2BinaI%3D" alt="å›¾ç‰‡" loading="lazy"/><img src="" alt="" loading="lazy"/><img src="" alt="" loading="lazy"/><img src="" alt="" loading="lazy"/><img src="" alt="" loading="lazy"/></p>
<p>æ¯”å¦‚ï¼šæ¨èå‡ ä¸ª AI æ§åˆ¶æ‰‹æœºçš„ GitHub å¼€æºé¡¹ç›®ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/90c85c244d8a45508e9de2c62e279a15~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766645315&amp;x-signature=Rlk9BAL1FLpZtzJSuf6SgAkD%2B9k%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ima æŠŠå†å²ç§¯ç´¯çš„æ‰€æœ‰å¼€æºé¡¹ç›®æ–‡ç« éƒ½åƒäº†è¿›å»ï¼Œä½ æƒ³æ‰¾ä»€ä¹ˆï¼Œç›´æ¥é—®å®ƒï¼Œå®ƒå°±èƒ½åŸºäºæ‰€æœ‰å†å²æ–‡ç« å¿«é€Ÿç»™ä½ ç­”æ¡ˆã€‚</p>
<p>è¿™ä¸ªçŸ¥è¯†åº“å ªç§° Github å¼€æºå®è—åº“ã€‚</p>
<h2 data-id="heading-0">01ã€ç”¨ ima æ”¶è—çŸ¥è¯†ä¸åƒç°</h2>
<p>æˆ‘åœ¨åˆ›å»ºé€›é€› GitHub çŸ¥è¯†åº“çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘å‘ç°ä½¿ç”¨ ima å¾ˆé€‚åˆç®¡ç†è‡ªå·±çš„çŸ¥è¯†ã€‚</p>
<p>æˆ‘ä»¬ç¼ºçš„ä¸æ˜¯ä¿¡æ¯ï¼Œè€Œæ˜¯å¯¹ä¿¡æ¯çš„æ•´ç†å’Œæå–ï¼Œima å¾ˆå¥½è§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚</p>
<p>ä¸‡ç‰©çš†å¯å­˜ï¼Œçœ‹åˆ°å¥½çš„å…¬ä¼—å·æ–‡ç« ã€PDF è®ºæ–‡ã€æŠ€æœ¯æ–‡æ¡£ï¼Œç”šè‡³æ˜¯ç½‘é¡µé“¾æ¥ï¼Œä¸è¦åªæ”¾åœ¨æ”¶è—å¤¹é‡Œåƒç°ï¼Œå¯ä»¥ç›´æ¥æŠŠå®ƒä»¬ä¸¢è¿› imaã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/090f4f6fdf2942c994530ccf82357e1d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766645315&amp;x-signature=h5SzZ8UWBfDW0xdIjiDm9NlK4%2FI%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ä½ è¿˜å¯ä»¥æŠŠå¯¼å…¥çš„å†…å®¹æ‰“ä¸ªæ ‡ç­¾æ–¹ä¾¿åˆ†ç±»ã€‚åé¢ä½ å°±èƒ½åŸºäºä¸ªäººçŸ¥è¯†åº“æˆ–æ ‡ç­¾çš„å†…å®¹å›ç­”ï¼Œæ¸©æ•…è€ŒçŸ¥æ–°ã€‚</p>
<p>ä½ å¯ä»¥æŠŠ ima ç†è§£æˆä¸€ä¸ªæ™ºèƒ½æ–‡ä»¶å¤¹ï¼Œä»»ä½•ä½ æ„Ÿå…´è¶£çš„çŸ¥è¯†éƒ½å¯ä»¥å¾€é‡Œé¢æ€¼ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1038e9b4a3814e8f87fe6b325d1f9ae2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766645315&amp;x-signature=50qAIs62LHPje60gzt4B4zwCf1w%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h2 data-id="heading-1">02ã€å¯¼å…¥å†…å®¹</h2>
<p>ä¸ºäº†è®©ä½ æ–¹ä¾¿å¯¼å…¥ä½ çœ‹åˆ°çš„ä¿¡æ¯æˆ–è€…å†…å®¹ï¼Œima åœ¨å¾ˆå¤šåœºæ™¯ä¸‹éƒ½åšäº†é€‚é…ã€‚</p>
<p>é™¤äº†ç›´æ¥ä¸Šä¼  PDFã€DOCã€JPEGã€PNG ç­‰æ ¼å¼çš„å†…å®¹è‡³çŸ¥è¯†åº“ã€‚è¿˜æœ‰ä¸€ä¸ªå¾ˆæ–¹ä¾¿çš„å¯¼å…¥å†…å®¹æ–¹å¼ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0b879bd6aeb1488faa6562e5dbc91eec~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766645315&amp;x-signature=jIUcZX0mHXkAgEfGa%2F8QY9dJ5vg%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å¾®ä¿¡å…¬ä¼—å·æ–‡ç« å¿«é€Ÿå¯¼å…¥</p>
<p>ä¹‹å‰åˆ·åˆ°ä¸€ä¸ªä¼˜è´¨å…¬ä¼—å·æ–‡ç« ï¼Œä¸€èˆ¬ä½ ä¼šè½¬å‘ç»™å¾®ä¿¡ä¼ è¾“åŠ©æ‰‹æˆ–è€…æ”¶è—ä¸€ä¸‹ã€‚</p>
<p>ç°åœ¨ä½ å¯ä»¥ç›´æ¥é€šè¿‡å…¬ä¼—å·æ–‡ç« -å…¶å®ƒåº”ç”¨æ‰“å¼€è¿™ä¸ªå…¥å£ï¼Œå¯¼å…¥åˆ° ima çŸ¥è¯†åº“ã€‚</p>
<p>å¥½å¤„æ˜¯æ¯å¤©åƒä¸ªé¥­çš„é—´éš™ï¼Œå°±èƒ½æŠŠçœ‹çš„ä¼˜è´¨æ–‡ç« æ”¶é›†èµ·æ¥ï¼Œåé¢å¯ä»¥åœ¨ä¸€ä¸ªé›†ä¸­çš„åœ°æ–¹å»çœ‹ã€é—®ç­”ã€æœç´¢å†å²å¯¼å…¥çš„ä¼˜è´¨æ–‡ç« ã€‚</p>
<p>è¿™æ ·æ‰èƒ½è®©ä½ æ”¶è—çš„çŸ¥è¯†æ´»èµ·æ¥ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6683e2be23bc475a9685c6e992900354~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766645315&amp;x-signature=pw56FFfJ2NFxqq8jg5ZGKW%2B4thU%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h2 data-id="heading-2">03ã€AI æ’­å®¢</h2>
<p>è¿™ä¸ªæŒºé…·çš„ï¼Œima èƒ½æŠŠæ–‡ç« å†…å®¹æˆ–çŸ¥è¯†åº“ä¸­çš„çŸ¥è¯†è½¬åŒ–æˆä¸€æ®µåŒäººå¯¹è¯çš„éŸ³é¢‘æ’­å®¢ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/09096e7cb47e4685b9a84fa6344d1bd9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766645315&amp;x-signature=Jo5MGFcqRODKDBe2NaIOqIMTqsY%3D" alt="å›¾ç‰‡" loading="lazy"/><img src="" alt="" loading="lazy"/><img src="" alt="" loading="lazy"/><img src="" alt="" loading="lazy"/></p>
<p>æ¯”å¦‚ä½ ä»Šå¤©æƒ³ç ”ç©¶ç ”ç©¶ AI æ‰‹æœºç›¸å…³çš„è¡Œä¸šè¿›å±•ï¼Œä¸Šç­å‡ºå‘å‰ï¼Œå¯ä»¥è®© ima åŸºäºç›¸å…³è‚è£ç”Ÿæˆä¸€ä¸ªåŒäººæ’­å®¢ï¼Œåœ¨å¼€è½¦é€šå‹¤è·¯ä¸Šå¬ã€‚</p>
<p>åˆ°å…¬å¸äº†ï¼Œè¿™ä¸ªè¡Œä¸šã€å¼€æºç”Ÿæ€å•¥æƒ…å†µå°±å¾ˆæ¸…æ™°äº†ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/720994e2478241ee8a9025dcb68ebfbb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766645315&amp;x-signature=sE1%2BPDb5tl6NAe0tRv4sD8uqQvA%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æ¥å¬å¬æ•ˆæœï¼Œæ•ˆæœéå¸¸è‡ªç„¶ã€‚ï¼š</p>
<h2 data-id="heading-3">04ã€ç”ŸæˆæŠ¥å‘Š</h2>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/71bcc09c19b540488247569ba380ad78~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766645315&amp;x-signature=z7lymZyFiM5ku97Mc8vyco%2F1sQ4%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>è¿™ä¸ªå†…æµ‹åŠŸèƒ½ä¹ŸæŒºæœ‰æ„æ€çš„ï¼Œä½ å¯ä»¥åœ¨çŸ¥è¯†åº“é‡Œé€‰ä¸­äº† 20 ç¯‡å…³äº AI è¡Œä¸šå‘å±•çš„æ–‡ç« ï¼Œç„¶åç‚¹å‡» ç”ŸæˆæŠ¥å‘Šï¼Œåœ¨å¯¹è¯æ¡†è¾“å…¥ï¼šåŸºäºè¿™äº›èµ„æ–™ï¼Œå¸®æˆ‘ç”Ÿæˆä¸€ä»½ AI å‘å±•æŠ¥å‘Šã€‚</p>
<p><strong>ima ä¼šå¯åŠ¨</strong> <strong>DeepSeek æ·±åº¦æ€è€ƒæ¨¡å¼</strong>ï¼Œåƒä¸€ä¸ªçœŸæ­£çš„é«˜çº§ç ”ç©¶å‘˜ä¸€æ ·ï¼šç¬é—´è¯»å®Œè¿™ 20 ç¯‡æ–‡ç« ã€‚</p>
<p>è¯†åˆ«å‡ºå“ªäº›æ˜¯è¿‡æ—¶çš„æ—§ç‰ˆæœ¬ä¿¡æ¯ï¼Œå“ªäº›æ˜¯æœ€æ–°å¯ç”¨çš„ä»£ç ã€‚è¾“å‡ºä¸€ä»½<strong>ç»“æ„æ¸…æ™°çš„ç ”æŠ¥</strong></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/49143328be7a4d08977f48e5a64c3a1a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766645315&amp;x-signature=jwvO9whhj4y2wzwzG3kAD5247hU%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h2 data-id="heading-4">05ã€æ¨èå‡ ä¸ª ima çš„çŸ¥è¯†åº“</h2>
<p>å± é¾™ä¹‹æœ¯</p>
<p>è¿™ä¸ªæ˜¯æˆ‘ä¸€ç›´å¾ˆå–œæ¬¢å¬çš„æ’­å®¢ï¼Œåœ¨ ima æœ‰ä¸¤ä¸ªçŸ¥è¯†åº“ï¼Œæ•´ç†äº† AI æ–¹å‘ç›¸å…³çš„ææ–™å’Œè¡Œä¸šæŠ¥å‘Šã€‚</p>
<p>å± é¾™ä¹‹æœ¯æŠ¥å‘Šåº“ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/71e85b8972b14bfd905b2ed41b34b26a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766645315&amp;x-signature=FMa7g40Tyw6bn0K3MYcLLTiHAzQ%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å± é¾™ä¹‹æœ¯è‡ªåˆ¶PPT é›†åˆï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c933a4e99b0a4fc091e4e6c8f47a5dc0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766645315&amp;x-signature=skFr6E%2BbAvHYfbMOF72hvYSXqQ8%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4ec29f17736e44fe9966c6ba6ef1f08d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766645315&amp;x-signature=292TfQY2%2BMYWMWknsdFHmQ%2Byhq8%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æ‰“å·¥äººå¿…å¤‡ AI åŠå…¬å·¥å…·è¿™é‡Œé¢ä¼šæ”¶é›†å„ç§æœ‰æ„æ€çš„ AI å·¥å…·ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/21a1ac76be3d49c0a27eb66f2a196789~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766645315&amp;x-signature=Isr862QcEwAZkMj%2Bo5IRZxQchWs%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>Coze æ‰£å­æ™ºèƒ½ä½“ï¼š100 ä¸ªå®æˆ˜æ¡ˆä¾‹</p>
<p>è¿™ä¸ªçŸ¥è¯†åº“ç²¾é€‰ 100 ä¸ª Coze æ‰£å­æ™ºèƒ½ä½“å·¥ä½œæµå®æˆ˜æ¡ˆä¾‹ï¼Œè¿™äº›æ¡ˆä¾‹å‡æ¥è‡ªçœŸå®é¡¹ç›®å’Œå®è·µè€…åˆ†äº«ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/435732dc4d714a21add80bb46eb08ce8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766645315&amp;x-signature=UC57zQzDH9eSQKDr8kdczTfhPvg%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å¤©æ¶¯ç¥è´´!</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fp0-xtjj-private.juejin.cn%2Ftos-cn-i-73owjymdk6%2F34ad8e55550340bd8b67aa452ee2f4c0~tplv-73owjymdk6-jj-mark-v1%3A0%3A0%3A0%3A0%3A5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi%3Aq75.awebp%3Fpolicy%3DeyJ2bSI6MywidWlkIjoiMTQ0MjIwMjk5NjE4NjA5MyJ9%26rk3s%3De9ecf3d6%26x-orig-authkey%3Df32326d3454f2ac7e96d3d06cdbb035152127018%26x-orig-expires%3D1766126420%26x-orig-sign%3DkrS8YDlorbEEhCXAIDJRAKRUuqc%253D" target="_blank" title="https://p0-xtjj-private.juejin.cn/tos-cn-i-73owjymdk6/34ad8e55550340bd8b67aa452ee2f4c0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?policy=eyJ2bSI6MywidWlkIjoiMTQ0MjIwMjk5NjE4NjA5MyJ9&amp;rk3s=e9ecf3d6&amp;x-orig-authkey=f32326d3454f2ac7e96d3d06cdbb035152127018&amp;x-orig-expires=1766126420&amp;x-orig-sign=krS8YDlorbEEhCXAIDJRAKRUuqc%3D" ref="nofollow noopener noreferrer">å›¾ç‰‡</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[pdfmake ç”Ÿæˆå¹³é“ºå¼æ°´å°ï¼šæ ¸å¿ƒæ–¹æ³•ä¸ä¼˜åŒ–]]></title>    <link>https://juejin.cn/post/7584759201072594985</link>    <guid>https://juejin.cn/post/7584759201072594985</guid>    <pubDate>2025-12-18T06:54:10.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7584759201072594985" data-draft-id="7584724634173980735" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="pdfmake ç”Ÿæˆå¹³é“ºå¼æ°´å°ï¼šæ ¸å¿ƒæ–¹æ³•ä¸ä¼˜åŒ–"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-18T06:54:10.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å°æ—æ”»åŸç‹®"/> <meta itemprop="url" content="https://juejin.cn/user/4162081646979545"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            pdfmake ç”Ÿæˆå¹³é“ºå¼æ°´å°ï¼šæ ¸å¿ƒæ–¹æ³•ä¸ä¼˜åŒ–
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4162081646979545/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å°æ—æ”»åŸç‹®
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-18T06:54:10.000Z" title="Thu Dec 18 2025 06:54:10 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-18
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    6
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">éœ€æ±‚èƒŒæ™¯</h2>
<p>å…¬å¸äº§å“çš„é¡¹ç›®ä¸Šè¦æ±‚ç»™å¯¼å‡ºçš„ pdf æ–‡ä»¶æ·»åŠ å¹³é“ºå¼æ°´å°ï¼Œå½“å‰é¡¹ç›®ä½¿ç”¨çš„ pdf å¯¼å‡ºæ’ä»¶æ˜¯ <code>pdfmake</code> ï¼Œä½†æ˜¯è¯¥æ’ä»¶å¹¶æ²¡æœ‰å®ç°å¹³é“ºå¼æ°´å°ï¼Œå®˜æ–¹è‡ªå¸¦çš„æ°´å°æ•ˆæœæ— æ³•æ»¡è¶³é¡¹ç›®è¦æ±‚ï¼Œéœ€è¦è‡ªè¡Œç¼–å†™æ°´å°ç”Ÿæˆä»£ç </p>
<h2 data-id="heading-1">æºç åˆ†æ</h2>
<p>é€šè¿‡ç ”ç©¶ <code>pdfmake</code> æºç ä¸­çš„ <code>createpdf</code>ï¼Œå¯ä»¥å¾—çŸ¥å†…éƒ¨å®ç° pdf ç”Ÿæˆæ˜¯é€šè¿‡ <code>_createdoc</code> æ–¹æ³•åˆ›å»º <code>pdfkit</code> å®ä¾‹ï¼Œå¹¶ä½¿ç”¨è¯¥æ’ä»¶çš„ API å®Œæˆç›¸å…³çš„æ–‡æ¡£æ“ä½œï¼Œè¿›ä¸€æ­¥ç ”ç©¶å¾—çŸ¥ <code>_createdoc</code> æ–¹æ³•è¿˜æä¾›äº†ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œé€šè¿‡æ”¹å›è°ƒå‡½æ•°å¯ä»¥å¯¹æ–‡æ¡£è¿›è¡ŒäºŒæ¬¡äº¤äº’ï¼Œè¿›è€Œå¯ä»¥è€ƒè™‘åœ¨å›è°ƒå‡½æ•°ä¸­æ“ä½œæ–‡æ¡£ç”Ÿæˆå¹³é“ºå¼æ°´å°çš„æ€è·¯ï¼Œæœ€åé€šè¿‡å¯¹ <code>download</code> æºç çš„ç†è§£å®ç° <code>save</code> æ–¹æ³•å°†æ·»åŠ æ°´å°åçš„æ–‡æ¡£å¯¼å‡ºä¸º <code>pdf</code> æ–‡ä»¶</p>
<h3 data-id="heading-2">æºç å‚è€ƒ</h3>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fbpampuch%2Fpdfmake%2Fblob%2F0.2%2Fsrc%2Fbrowser-extensions%2FpdfMake.js%23L318" target="_blank" title="https://github.com/bpampuch/pdfmake/blob/0.2/src/browser-extensions/pdfMake.js#L318" ref="nofollow noopener noreferrer">pdfmake/src/browser-extensions/pdfMake.js#createPdf at 0.2 Â· bpampuch/pdfmake (github.com)</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fbpampuch%2Fpdfmake%2Fblob%2F0.2%2Fsrc%2Fbrowser-extensions%2FpdfMake.js%23L38" target="_blank" title="https://github.com/bpampuch/pdfmake/blob/0.2/src/browser-extensions/pdfMake.js#L38" ref="nofollow noopener noreferrer">pdfmake/src/browser-extensions/pdfMake.js#_createdoc at 0.2 Â· bpampuch/pdfmake (github.com)</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fbpampuch%2Fpdfmake%2Fblob%2F0.2%2Fsrc%2Fbrowser-extensions%2FpdfMake.js%23L244" target="_blank" title="https://github.com/bpampuch/pdfmake/blob/0.2/src/browser-extensions/pdfMake.js#L244" ref="nofollow noopener noreferrer">pdfmake/src/browser-extensions/pdfMake.js#download at 0.2 Â· bpampuch/pdfmake (github.com)</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fpdfmake.github.io%2Fdocs%2F0.1%2Fdocument-definition-object%2F" target="_blank" title="https://pdfmake.github.io/docs/0.1/document-definition-object/" ref="nofollow noopener noreferrer">pdfmake-document</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fpdfkit.org%2Fdocs%2Ftext.html" target="_blank" title="https://pdfkit.org/docs/text.html" ref="nofollow noopener noreferrer">Text in PDFKit</a></li>
</ul>
<h2 data-id="heading-3">å®ç°ä»£ç </h2>
<p>å®Œæ•´çš„å®ç°ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼Œè¯¥å®ç°ä¾èµ–äº <code>pdfmake": "^0.2.13"</code>ï¼Œè¯·è‡ªè¡Œå®‰è£…ç›¸å…³ä¾èµ–ï¼Œå…¶ä¸­ç”¨äºæ–‡ä»¶ä¿å­˜çš„ <code>FileSaver.js</code> å¯ä» github ä¸Šä¸‹è½½ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Feligrey%2FFileSaver.js%2Fblob%2Fmaster%2Fsrc%2FFileSaver.js" target="_blank" title="https://github.com/eligrey/FileSaver.js/blob/master/src/FileSaver.js" ref="nofollow noopener noreferrer">github.com/eligrey/Filâ€¦</a></p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">import</span> pdfMake, { createPdf } <span class="hljs-keyword">from</span> <span class="hljs-string">'pdfmake'</span> <span class="hljs-comment">// åŸºäº v0.2</span>
<span class="hljs-keyword">import</span> pdfFonts <span class="hljs-keyword">from</span> <span class="hljs-string">'pdfmake/build/vfs_fonts'</span>
<span class="hljs-keyword">import</span> saveAs <span class="hljs-keyword">from</span> <span class="hljs-string">'./FileSaver'</span>

pdfMake.<span class="hljs-property">vfs</span> = pdfFonts.<span class="hljs-property">pdfMake</span>.<span class="hljs-property">vfs</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PDFFile</span> {
  <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> <span class="hljs-attr">pdfDocument</span>: <span class="hljs-built_in">any</span> = <span class="hljs-literal">null</span>
  <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> <span class="hljs-attr">_docDefinition</span>: <span class="hljs-built_in">any</span> = {}
  <span class="hljs-comment">/**
   * Creates an instance of PDFFile.
   * <span class="hljs-doctag">@param</span> {<span class="hljs-type">*</span>} docDefinition reference to https://pdfmake.github.io/docs/0.1/document-definition-object/
   * <span class="hljs-doctag">@memberof</span> <span class="hljs-variable">PDFFile</span>
   */</span>
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">docDefinition: <span class="hljs-built_in">any</span></span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">_docDefinition</span> = docDefinition
    <span class="hljs-comment">// å¯¼å…¥è‡ªå®šä¹‰ä¸­æ–‡å­—ä½“åŒ…ï¼Œå¦‚æœä¸å¯¼å…¥çš„è¯ä½¿ç”¨ä¸­æ–‡å­—ä½“ä¼šæœ‰é—®é¢˜ï¼Œä¸­æ–‡å­—ä½“åŒ…è¯·è‡ªè¡Œä¸‹è½½</span>
    <span class="hljs-keyword">const</span> root = <span class="hljs-string">'/'</span>
    <span class="hljs-keyword">const</span> fonts = {
      <span class="hljs-attr">commonFont</span>: {
        <span class="hljs-attr">normal</span>: root + <span class="hljs-string">'fonts/SourceHanSansSC-Normal-2.otf'</span>,
        <span class="hljs-attr">bold</span>: root + <span class="hljs-string">'fonts/SourceHanSansSC-Medium-2.otf'</span>,
        <span class="hljs-attr">italics</span>: root + <span class="hljs-string">'fonts/SourceHanSansSC-Normal-2.otf'</span>,
        <span class="hljs-attr">bolditalics</span>: root + <span class="hljs-string">'fonts/SourceHanSansSC-Medium-2.otf'</span>,
      },
    }
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">pdfDocument</span> = <span class="hljs-title function_">createPdf</span>(
      {
        ...docDefinition,
        <span class="hljs-attr">watermark</span>: <span class="hljs-literal">undefined</span>, <span class="hljs-comment">// æ°´å°å¦å¤–å®ç°ï¼Œä¸”åªæ”¯æŒæ–‡æœ¬æ°´å°</span>
      },
      <span class="hljs-literal">null</span>,
      fonts
    )
  }

  <span class="hljs-comment">/**
   * ä¿å­˜æ–‡æ¡£
   *
   * <span class="hljs-doctag">@param</span> {<span class="hljs-type">boolean</span>} download æ˜¯å¦è‡ªåŠ¨ä¸‹è½½æ–‡æ¡£ï¼Œå¦‚æœä¸ºå¦åˆ™è¿”å›ä¸€ä¸ª blob å¯¹è±¡
   * <span class="hljs-doctag">@param</span> {<span class="hljs-type">string</span>} [fileName] æ–‡æ¡£åç§°åç§°
   * <span class="hljs-doctag">@return</span> {<span class="hljs-type">*</span>} 
   * <span class="hljs-doctag">@memberof</span> <span class="hljs-variable">PDFFile</span>
   */</span>
  <span class="hljs-keyword">public</span> <span class="hljs-title function_">save</span>(<span class="hljs-params">download: <span class="hljs-built_in">boolean</span>, fileName?: <span class="hljs-built_in">string</span></span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
      <span class="hljs-comment">// ä½¿ç”¨ pdfmake å†…éƒ¨çš„ _createDoc ä»¥è·å– pdfkit å®ä¾‹ç”¨äºç”Ÿæˆæ°´å°</span>
      <span class="hljs-comment">// doc options reference to https://pdfkit.org/docs/getting_started.html#switching_to_previous_pages</span>
      <span class="hljs-comment">// To use it, just pass bufferPages: true as an option to the PDFDocument constructor. </span>
      <span class="hljs-comment">// Then, you can call doc.switchToPage(pageNumber) to switch to a previous page (page numbers start at 0).</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">pdfDocument</span>.<span class="hljs-title function_">_createDoc</span>({ <span class="hljs-attr">bufferPages</span>: <span class="hljs-literal">true</span> }, <span class="hljs-function">(<span class="hljs-params">doc: <span class="hljs-built_in">any</span></span>) =&gt;</span> {
        <span class="hljs-comment">// console.log(this.pdfDocument, doc)</span>
        <span class="hljs-keyword">const</span> rejectTimeout = <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">reject</span>(<span class="hljs-string">'Timeout!'</span>), <span class="hljs-number">5000</span>) <span class="hljs-comment">// ç­‰å¾…è¶…æ—¶æœªèƒ½æ­£å¸¸å¯¼å‡ºåˆ¤å®šä¸ºå¤±è´¥</span>
        
        <span class="hljs-keyword">const</span> range = doc.<span class="hljs-title function_">bufferedPageRange</span>() <span class="hljs-comment">// { start: number, count: number }</span>

        <span class="hljs-comment">// loop throgh all pages</span>
        <span class="hljs-keyword">const</span> { text } = <span class="hljs-variable language_">this</span>.<span class="hljs-property">_docDefinition</span>.<span class="hljs-property">watermark</span>

        <span class="hljs-keyword">if</span> (text) {
          <span class="hljs-comment">// ç»™æ‰€æœ‰é¡µé¢æ·»åŠ å¹³é“ºå¼æ°´å°</span>
          <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; range.<span class="hljs-property">start</span> + range.<span class="hljs-property">count</span>; i++) {
            <span class="hljs-keyword">const</span> watermark = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>({
              <span class="hljs-attr">color</span>: <span class="hljs-string">'black'</span>,
              <span class="hljs-attr">opacity</span>: <span class="hljs-number">0.2</span>,
              <span class="hljs-attr">angle</span>: -<span class="hljs-number">50</span>,
              <span class="hljs-attr">fontSize</span>: <span class="hljs-number">14</span>
            }, <span class="hljs-variable language_">this</span>.<span class="hljs-property">_docDefinition</span>.<span class="hljs-property">watermark</span>)
            doc.<span class="hljs-title function_">switchToPage</span>(i)
            doc.<span class="hljs-title function_">fill</span>(watermark.<span class="hljs-property">color</span>)
            doc.<span class="hljs-title function_">opacity</span>(watermark.<span class="hljs-property">opacity</span>)
            doc.<span class="hljs-title function_">rotate</span>(watermark.<span class="hljs-property">angle</span>, { <span class="hljs-attr">origin</span>: [doc.<span class="hljs-property">page</span>.<span class="hljs-property">width</span> / <span class="hljs-number">2</span>, doc.<span class="hljs-property">page</span>.<span class="hljs-property">height</span> / <span class="hljs-number">2</span>] })
            doc.<span class="hljs-title function_">fontSize</span>(watermark.<span class="hljs-property">fontSize</span>)
            <span class="hljs-comment">// è·å–å½“å‰é¡µå®½é«˜</span>
            <span class="hljs-keyword">const</span> { width, height } = doc.<span class="hljs-property">page</span>
            <span class="hljs-keyword">const</span> margin = [<span class="hljs-number">200</span>, <span class="hljs-number">100</span>] <span class="hljs-comment">// æ°´å¹³/å‚ç›´é—´è·</span>
            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> ix = <span class="hljs-number">0</span>; ix &lt;= width + margin[<span class="hljs-number">0</span>] + <span class="hljs-number">70</span>; ix += margin[<span class="hljs-number">0</span>]) {
              <span class="hljs-comment">// æ°´å°æ¨ªå‘é—´éš”</span>
              <span class="hljs-keyword">let</span> lineNum = <span class="hljs-number">0</span>
              <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> iy = <span class="hljs-number">0</span>; iy &lt;= height; iy += margin[<span class="hljs-number">1</span>]) {
                <span class="hljs-comment">// æ°´å°çºµå‘é—´éš”</span>
                lineNum++
                <span class="hljs-keyword">const</span> pos = [lineNum &amp; <span class="hljs-number">1</span> ? ix - <span class="hljs-number">70</span> : ix, iy]
                <span class="hljs-comment">// console.log(pos)</span>
                doc.<span class="hljs-title function_">text</span>(text, pos[<span class="hljs-number">0</span>], pos[<span class="hljs-number">1</span>], { <span class="hljs-attr">lineBreak</span>: <span class="hljs-literal">false</span> })
              }
            }
          }
        }
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">pdfDocument</span>.<span class="hljs-title function_">_flushDoc</span>(doc, <span class="hljs-function">(<span class="hljs-params">buffer: <span class="hljs-built_in">any</span></span>) =&gt;</span> {
          <span class="hljs-comment">// get a blob you can do whatever you like with</span>
          <span class="hljs-keyword">const</span> blob = <span class="hljs-variable language_">this</span>.<span class="hljs-property">pdfDocument</span>.<span class="hljs-title function_">_bufferToBlob</span>(buffer)
          <span class="hljs-built_in">clearTimeout</span>(rejectTimeout)
          <span class="hljs-keyword">if</span> (download) {
            <span class="hljs-title function_">saveAs</span>(blob, fileName + <span class="hljs-string">'.pdf'</span>)
            <span class="hljs-title function_">resolve</span>(<span class="hljs-literal">true</span>)
          } <span class="hljs-keyword">else</span> {
            <span class="hljs-title function_">resolve</span>(blob)
          }
        })
      })
    })
  }
}
</code></pre>
<h2 data-id="heading-4">ä½¿ç”¨ç¤ºä¾‹</h2>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">const</span> watermark = {
     <span class="hljs-attr">text</span>: <span class="hljs-string">'your watermark text'</span>,
}
<span class="hljs-keyword">const</span> pdfFile = <span class="hljs-keyword">new</span> <span class="hljs-title class_">PDFFile</span>({
    <span class="hljs-comment">// è¿™é‡Œé™¤äº†å¢åŠ  watermark å±æ€§å¤–ï¼Œå…¶ä»–å±æ€§å’Œå®˜æ–¹æ–‡æ¡£å®Œå…¨ä¸€è‡´</span>
    watermark,
    <span class="hljs-attr">content</span>: pdfContent,
    <span class="hljs-attr">defaultStyle</span>: {
        <span class="hljs-attr">font</span>: <span class="hljs-string">'commonFont'</span>
    }
})
pdfFile.<span class="hljs-title function_">save</span>(<span class="hljs-literal">true</span>, <span class="hljs-string">'å¯¼å‡ºç¤ºä¾‹'</span>)
</code></pre>
<h2 data-id="heading-5">å®ç°æ•ˆæœ</h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e5046186b024407f8724a7a179933a6b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5p6X5pS75Z-O54uu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766646169&amp;x-signature=w7DhNyh%2BpxNLC6sBLn47qhuSa4w%3D" alt="image.png" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[WPFåŸºäºCanvasç»˜åˆ¶å¤šè¾¹å½¢ROI]]></title>    <link>https://juejin.cn/post/7584760031835914274</link>    <guid>https://juejin.cn/post/7584760031835914274</guid>    <pubDate>2025-12-18T06:54:52.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7584760031835914274" data-draft-id="7584810656382402569" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="WPFåŸºäºCanvasç»˜åˆ¶å¤šè¾¹å½¢ROI"/> <meta itemprop="keywords" content="C#"/> <meta itemprop="datePublished" content="2025-12-18T06:54:52.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Yuuuuuuu"/> <meta itemprop="url" content="https://juejin.cn/user/3352832886442698"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            WPFåŸºäºCanvasç»˜åˆ¶å¤šè¾¹å½¢ROI
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3352832886442698/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Yuuuuuuu
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-18T06:54:52.000Z" title="Thu Dec 18 2025 06:54:52 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-18
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ROIï¼ˆRegion of Interestï¼‰, æŒ‡çš„æ˜¯åœ¨ä¸€å¹…å›¾åƒæˆ–è§†é¢‘å¸§ä¸­ï¼Œä½ ç‰¹åˆ«å…³æ³¨ã€éœ€è¦è¿›ä¸€æ­¥å¤„ç†æˆ–åˆ†æçš„é‚£ä¸ªéƒ¨åˆ†ã€‚å®ƒé€šå¸¸æ˜¯å›¾åƒä¸­çš„ä¸€ä¸ª<strong>çŸ©å½¢åŒºåŸŸ</strong>ï¼ˆå½“ç„¶ä¹Ÿå¯ä»¥æ˜¯å…¶ä»–å½¢çŠ¶ï¼Œå¦‚å¤šè¾¹å½¢ã€åœ†å½¢ï¼Œæˆ–é€šè¿‡æ©ç å®šä¹‰çš„ä»»æ„å½¢çŠ¶ï¼‰ã€‚</p>
<p>æœ¬æ–‡åŸºäºWPFçš„Canvasç»˜åˆ¶å¤šè¾¹å½¢ROIã€‚æ•ˆæœå›¾å¦‚ä¸‹</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7505e6d6823442d79753f97fdfb3fa8c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgWXV1dXV1dXU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766645691&amp;x-signature=sEh%2FrtBwUS5EouvMVmyWXHM0ZIA%3D" alt="screenshots.gif" loading="lazy"/></p>
<p>é¦–å…ˆå®šä¹‰ä¸€ä¸ªç”¨æ¥ç»˜åˆ¶çš„å·¥å…·</p>
<pre><code class="hljs language-csharp" lang="csharp"> <span class="hljs-keyword">internal</span> <span class="hljs-keyword">class</span> <span class="hljs-title">PolygonROIDrawingVisual</span> : <span class="hljs-title">DrawingVisual</span>
{
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> <span class="hljs-built_in">double</span> _radius = <span class="hljs-number">5.0</span>;

    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span></span>
    <span class="hljs-comment"><span class="hljs-doctag">///</span> ç»˜åˆ¶å¤šè¾¹å½¢è¾¹æ¡†</span>
    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;/summary&gt;</span></span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Draw</span>(<span class="hljs-params">List&lt;Point&gt; points, Brush brushes = <span class="hljs-literal">null</span></span>)</span>
    {
        Pen _strokePen = <span class="hljs-keyword">new</span> Pen(brushes ?? Brushes.Red, <span class="hljs-number">2.0</span>);
        <span class="hljs-keyword">using</span> (DrawingContext dc = RenderOpen())
        {
            <span class="hljs-keyword">if</span> (points.Count == <span class="hljs-number">0</span>)
            {
                <span class="hljs-keyword">return</span>;
            }
            <span class="hljs-keyword">if</span> (points.Count == <span class="hljs-number">1</span>)
            {
                dc.DrawEllipse(brushes ?? Brushes.Red, _strokePen, points[<span class="hljs-number">0</span>], _radius, _radius);
                <span class="hljs-keyword">return</span>;
            }

            <span class="hljs-comment">// åˆ›å»ºå¤šè¾¹å½¢è¾¹æ¡†</span>
            StreamGeometry geometry = <span class="hljs-keyword">new</span> StreamGeometry();

            <span class="hljs-keyword">using</span> (StreamGeometryContext ctx = geometry.Open())
            {
                <span class="hljs-comment">// ç§»åŠ¨åˆ°ç¬¬ä¸€ä¸ªç‚¹</span>
                ctx.BeginFigure(points[<span class="hljs-number">0</span>], <span class="hljs-literal">false</span>, points.Count &gt;= <span class="hljs-number">3</span>); <span class="hljs-comment">// åªæœ‰3ä¸ªä»¥ä¸Šç‚¹æ‰é—­åˆ</span>

                <span class="hljs-comment">// ç»˜åˆ¶æ‰€æœ‰çº¿æ®µ</span>
                <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> i = <span class="hljs-number">1</span>; i &lt; points.Count; i++)
                {
                    ctx.LineTo(points[i], <span class="hljs-literal">true</span>, <span class="hljs-literal">false</span>);
                }
            }

            <span class="hljs-comment">// ç»˜åˆ¶è¾¹æ¡†</span>
            dc.DrawGeometry(<span class="hljs-literal">null</span>, _strokePen, geometry);

            <span class="hljs-comment">// ç»˜åˆ¶é¡¶ç‚¹</span>
            <span class="hljs-keyword">foreach</span> (Point point <span class="hljs-keyword">in</span> points)
            {
                dc.DrawEllipse(brushes ?? Brushes.Red, _strokePen, point, _radius, _radius);
            }
        }
    }
}
</code></pre>
<p>å®šä¹‰ç”»å¸ƒ Canvas</p>
<pre><code class="hljs language-csharp" lang="csharp">    <span class="hljs-keyword">public</span> <span class="hljs-built_in">enum</span> PolygonROIOperateType
    {
        None,
        ReadyToDraw,
        DrawDone,
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">PolygonROICanvas</span> : <span class="hljs-title">Canvas</span>
    {
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> <span class="hljs-built_in">int</span> _minGap = <span class="hljs-number">10</span>; <span class="hljs-comment">// ä¸¤é¡¶ç‚¹çš„æœ€å°è·ç¦»</span>

        <span class="hljs-keyword">private</span> Point lastPoint;
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> PolygonROIDrawingVisual roi;
        <span class="hljs-keyword">private</span> PolygonROIOperateType operate = PolygonROIOperateType.None;
        <span class="hljs-keyword">protected</span> <span class="hljs-keyword">override</span> <span class="hljs-built_in">int</span> VisualChildrenCount =&gt; <span class="hljs-number">1</span>;

        <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">override</span> Visual <span class="hljs-title">GetVisualChild</span>(<span class="hljs-params"><span class="hljs-built_in">int</span> index</span>)</span>
        {
            <span class="hljs-keyword">return</span> roi;
        }

        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">PolygonROICanvas</span>()</span>
        {
            roi = <span class="hljs-keyword">new</span> PolygonROIDrawingVisual();
            <span class="hljs-keyword">this</span>.AddLogicalChild(roi);
            <span class="hljs-keyword">this</span>.AddVisualChild(roi);
            Background = Brushes.Transparent;
            PointCollection = <span class="hljs-keyword">new</span> ObservableCollection&lt;Point&gt;();
        }

        <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span></span>
        <span class="hljs-comment"><span class="hljs-doctag">///</span> æ˜¯å¦å¯ä»¥å¼€å§‹ç»˜åˆ¶ROI</span>
        <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;/summary&gt;</span></span>
        <span class="hljs-keyword">public</span> <span class="hljs-built_in">bool</span> EnableDraw
        {
            <span class="hljs-keyword">get</span> { <span class="hljs-keyword">return</span> (<span class="hljs-built_in">bool</span>)GetValue(EnableDrawProperty); }
            <span class="hljs-keyword">set</span> { SetValue(EnableDrawProperty, <span class="hljs-keyword">value</span>); }
        }

        <span class="hljs-comment">// Using a DependencyProperty as the backing store for Enable.  This enables animation, styling, binding, etc...</span>
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">readonly</span> DependencyProperty EnableDrawProperty =
            DependencyProperty.Register(<span class="hljs-string">"EnableDraw"</span>,
                <span class="hljs-keyword">typeof</span>(<span class="hljs-built_in">bool</span>), <span class="hljs-keyword">typeof</span>(PolygonROICanvas),
                <span class="hljs-keyword">new</span> PropertyMetadata(<span class="hljs-literal">false</span>, OnEnableDrawPropertyChanged));

        <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">OnEnableDrawPropertyChanged</span>(<span class="hljs-params">DependencyObject d, DependencyPropertyChangedEventArgs e</span>)</span>
        {
            <span class="hljs-keyword">if</span> (d <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> PolygonROICanvas canvas)
                <span class="hljs-keyword">return</span>;
            <span class="hljs-keyword">if</span> (e.NewValue == e.OldValue)
            {
                <span class="hljs-keyword">return</span>;
            }
            <span class="hljs-keyword">if</span> (e.NewValue <span class="hljs-keyword">is</span> <span class="hljs-built_in">bool</span> enable &amp;&amp; enable == <span class="hljs-literal">true</span>)
            {
                canvas.operate = PolygonROIOperateType.ReadyToDraw;
                canvas.PointCollection.Clear();
            }
        }

        <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">readonly</span> DependencyProperty PointCollectionProperty =
           DependencyProperty.Register(
               <span class="hljs-keyword">nameof</span>(PointCollection),
               <span class="hljs-keyword">typeof</span>(ObservableCollection&lt;Point&gt;),
               <span class="hljs-keyword">typeof</span>(PolygonROICanvas),
               <span class="hljs-keyword">new</span> PropertyMetadata(<span class="hljs-literal">null</span>,
                  OnItemsPropertyChanged));

        <span class="hljs-keyword">public</span> ObservableCollection&lt;Point&gt; PointCollection
        {
            <span class="hljs-keyword">get</span> =&gt; (ObservableCollection&lt;Point&gt;)GetValue(PointCollectionProperty);
            <span class="hljs-keyword">set</span> =&gt; SetValue(PointCollectionProperty, <span class="hljs-keyword">value</span>);
        }

        <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">OnItemsPropertyChanged</span>(<span class="hljs-params">DependencyObject d, DependencyPropertyChangedEventArgs e</span>)</span>
        {
            <span class="hljs-keyword">if</span> (d <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> PolygonROICanvas canvas)
                <span class="hljs-keyword">return</span>;

            <span class="hljs-keyword">if</span> (e.OldValue <span class="hljs-keyword">is</span> ObservableCollection&lt;Point&gt; oldCollection)
            {
                oldCollection.CollectionChanged -= canvas.PointCollection_CollectionChanged;
            }

            <span class="hljs-keyword">if</span> (e.NewValue <span class="hljs-keyword">is</span> ObservableCollection&lt;Point&gt; newCollection)
            {
                newCollection.CollectionChanged += canvas.PointCollection_CollectionChanged;
            }

            <span class="hljs-comment">// åˆå§‹æ›´æ–°ï¼ˆåŒ…æ‹¬ newCollection == null çš„æƒ…å†µï¼‰</span>
            canvas.UpdateDrawing();
        }

        <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">PointCollection_CollectionChanged</span>(<span class="hljs-params"><span class="hljs-built_in">object</span>? sender, NotifyCollectionChangedEventArgs e</span>)</span>
        {
            UpdateDrawing();
        }

        <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">UpdateDrawing</span>()</span>
        {
            <span class="hljs-comment">// ç¡®ä¿åœ¨ UI çº¿ç¨‹æ‰§è¡Œç»˜åˆ¶</span>
            <span class="hljs-keyword">if</span> (!Dispatcher.CheckAccess())
            {
                Dispatcher.Invoke(UpdateDrawing);
                <span class="hljs-keyword">return</span>;
            }

            <span class="hljs-keyword">var</span> points = PointCollection?.ToList();
            <span class="hljs-keyword">if</span> (points == <span class="hljs-literal">null</span> || points.Count == <span class="hljs-number">0</span>)
            {
                <span class="hljs-comment">// æ¸…ç©ºç»˜åˆ¶ï¼ˆä¼ å…¥ç©ºåˆ—è¡¨ï¼‰</span>
                roi.Draw(<span class="hljs-keyword">new</span> List&lt;Point&gt;());
                <span class="hljs-keyword">return</span>;
            }

            roi.Draw(points);
        }
        .....
     }
</code></pre>
<p>ä¸»è¦çš„å±æ€§ EnableDraw ç”¨æ¥å¯åŠ¨ç»˜ç”»ï¼› PointCollection ç”¨æ¥å­˜æ”¾å¤šè¾¹å½¢çš„é¡¶ç‚¹ã€‚</p>
<p>ç»˜åˆ¶çš„é€»è¾‘ ä¸»è¦æ˜¯åœ¨Canvasçš„ MouseMove å’Œ MouseLeftButtonDownäº‹ä»¶ä¸­å¤„ç†ã€‚</p>
<p>MouseLeftButtonDown ä¸»è¦æ˜¯å•å‡»æ·»åŠ é¡¶ç‚¹ å’Œ åŒå‡»ç»“æŸç»˜ç”»</p>
<pre><code class="hljs language-arduino" lang="arduino">       <span class="hljs-keyword">private</span> DateTime _lastClickTime;
       <span class="hljs-keyword">private</span> <span class="hljs-type">const</span> <span class="hljs-type">int</span> DoubleClickThreshold = <span class="hljs-number">200</span>; <span class="hljs-comment">// åŒå‡»æ—¶é—´é—´éš”é˜ˆå€¼ï¼Œå•ä½ä¸ºæ¯«ç§’</span>

       <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">override</span> <span class="hljs-type">void</span> <span class="hljs-title">OnMouseLeftButtonDown</span><span class="hljs-params">(MouseButtonEventArgs e)</span>
       </span>{
           base.<span class="hljs-built_in">OnMouseLeftButtonDown</span>(e);
           <span class="hljs-comment">// åŒå‡»</span>
           <span class="hljs-keyword">if</span> ((DateTime.Now - _lastClickTime).TotalMilliseconds &lt; DoubleClickThreshold)
           {
               EnableDraw = <span class="hljs-literal">false</span>;
               operate = PolygonROIOperateType.DrawDone;
               e.Handled = <span class="hljs-literal">true</span>;
           }
           <span class="hljs-keyword">else</span> <span class="hljs-comment">// å•å‡»</span>
           {
               <span class="hljs-keyword">if</span> (operate == PolygonROIOperateType.ReadyToDraw)
               {
                   Point point = e.<span class="hljs-built_in">GetPosition</span>(<span class="hljs-keyword">this</span>);
                   <span class="hljs-keyword">if</span> (point.X &lt; <span class="hljs-number">0</span> || point.X &gt; <span class="hljs-keyword">this</span>.ActualWidth)
                   {
                       <span class="hljs-keyword">return</span>;
                   }
                   <span class="hljs-keyword">if</span> (point.Y &lt; <span class="hljs-number">0</span> || point.Y &gt; <span class="hljs-keyword">this</span>.ActualHeight)
                   {
                       <span class="hljs-keyword">return</span>;
                   }
                   <span class="hljs-keyword">if</span> (<span class="hljs-built_in">IsPointTooClose</span>(point, PointCollection?.<span class="hljs-built_in">ToList</span>()))
                   {
                       <span class="hljs-keyword">return</span>;
                   }
                   <span class="hljs-comment">// å•å‡»å¢åŠ ç‚¹</span>
                   PointCollection.<span class="hljs-built_in">Add</span>(point);
                   lastPoint = e.<span class="hljs-built_in">GetPosition</span>(<span class="hljs-keyword">this</span>);
               }
           }
           _lastClickTime = DateTime.Now;
       }

       <span class="hljs-comment">// åˆ¤æ–­æ–°ç‚¹æ˜¯å¦ä¸å·²æœ‰ç‚¹è¿‡è¿‘</span>
       <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-type">bool</span> <span class="hljs-title">IsPointTooClose</span><span class="hljs-params">(Point newPoint, List&lt;Point&gt; existingPoints)</span>
       </span>{
           <span class="hljs-keyword">if</span> (existingPoints == null || existingPoints.Count == <span class="hljs-number">0</span>)
           {
               <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
           }
           foreach (var point in existingPoints)
           {
               <span class="hljs-keyword">if</span> (<span class="hljs-built_in">GetDistance</span>(newPoint, point) &lt; _minGap)
                   <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
           }
           <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
       }

       <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-type">double</span> <span class="hljs-title">GetDistance</span><span class="hljs-params">(Point p1, Point p2)</span>
       </span>{
           <span class="hljs-type">double</span> dx = p1.X - p2.X;
           <span class="hljs-type">double</span> dy = p1.Y - p2.Y;
           <span class="hljs-keyword">return</span> System.Math.<span class="hljs-built_in">Sqrt</span>(dx * dx + dy * dy);
       }
</code></pre>
<p>æ·»åŠ é¡¶ç‚¹çš„æ—¶å€™è¦è€ƒè™‘è¾¹ç•Œé—®é¢˜ä»¥åŠç°æœ‰ç‚¹çš„é‡å¤é—®é¢˜ã€‚</p>
<p>MouseMoveäº‹ä»¶ä¸»è¦æ˜¯å¤„ç† ç»˜å›¾ä¸­çš„å®æ—¶ç»˜åˆ¶ ä»¥åŠ å¹³ç§»é¡¶ç‚¹å’Œæ•´ä¸ªå¤šè¾¹å½¢ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">     protected override void OnMouseMove(MouseEventArgs e)
     {
         Point <span class="hljs-attr">point</span> = e.GetPosition(this)<span class="hljs-comment">;</span>
         if (<span class="hljs-attr">operate</span> == PolygonROIOperateType.ReadyToDraw)
         {
             List&lt;Point&gt; <span class="hljs-attr">tempList</span> = PointCollection?.ToList()<span class="hljs-comment">;</span>
             if (<span class="hljs-attr">tempList</span> == null || tempList.Count == <span class="hljs-number">0</span>)
             {
                 return<span class="hljs-comment">;</span>
             }
             tempList.Add(point)<span class="hljs-comment">;</span>
             <span class="hljs-attr">tempList</span> = SortPointsForClosedPolygon(tempList)<span class="hljs-comment">;</span>
             roi.Draw(tempList)<span class="hljs-comment">;</span>
         }
         else if (<span class="hljs-attr">operate</span> == PolygonROIOperateType.DrawDone)
         {
             var <span class="hljs-attr">res</span> = GetNearestPoint(point, PointCollection?.ToList())<span class="hljs-comment">;</span>
             if (res.Item1 &gt;= 0 &amp;&amp; res.Item2 &lt;= 8) // æ˜¯å¦é€‰ä¸­ç‚¹
             {
                 <span class="hljs-attr">this.Cursor</span> = Cursors.Hand<span class="hljs-comment">;</span>
                 if (<span class="hljs-attr">Mouse.LeftButton</span> == MouseButtonState.Pressed)
                 {
                     double <span class="hljs-attr">x</span> = point.X<span class="hljs-comment">;</span>
                     double <span class="hljs-attr">y</span> = point.Y<span class="hljs-comment">;</span>
                     if (x &lt; 5)
                     {
                         <span class="hljs-attr">x</span> = <span class="hljs-number">5</span><span class="hljs-comment">;</span>
                     }
                     else if (x &gt; this.ActualWidth - 5)
                     {
                         <span class="hljs-attr">x</span> = this.ActualWidth - <span class="hljs-number">5</span><span class="hljs-comment">;</span>
                     }
                     if (y &lt; 5)
                     {
                         <span class="hljs-attr">y</span> = <span class="hljs-number">5</span><span class="hljs-comment">;</span>
                     }
                     else if (y &gt; this.ActualHeight - 5)
                     {
                         <span class="hljs-attr">y</span> = this.ActualHeight - <span class="hljs-number">5</span><span class="hljs-comment">;</span>
                     }
                     // ç§»åŠ¨ç‚¹
                     PointCollection<span class="hljs-section">[res.Item1]</span> = new Point(x, y)<span class="hljs-comment">;</span>
                     //å¯¹é›†åˆè¿›è¡Œé‡æ–°æ’åºï¼Œä¿è¯å¤šè¾¹å½¢é—­åˆä¸”ä¸è‡ªäº¤
                     <span class="hljs-attr">PointCollection</span> = new ObservableCollection&lt;Point&gt;(SortPointsForClosedPolygon(PointCollection?.ToList()))<span class="hljs-comment">;</span>
                     roi.Draw(PointCollection?.ToList())<span class="hljs-comment">;</span>
                 }
             }
             else if (IsPointInPolygon(point, PointCollection?.ToList())) // æ˜¯å¦åœ¨å¤šè¾¹å½¢å†…
             {
                 <span class="hljs-attr">this.Cursor</span> = Cursors.SizeAll<span class="hljs-comment">;</span>
                 if (<span class="hljs-attr">Mouse.LeftButton</span> == MouseButtonState.Pressed)
                 {
                     double <span class="hljs-attr">minX</span> = PointCollection.Min(p =&gt; p.X)<span class="hljs-comment">;</span>
                     double <span class="hljs-attr">minY</span> = PointCollection.Min(p =&gt; p.Y)<span class="hljs-comment">;</span>
                     double <span class="hljs-attr">maxX</span> = PointCollection.Max(p =&gt; p.X)<span class="hljs-comment">;</span>
                     double <span class="hljs-attr">maxY</span> = PointCollection.Max(p =&gt; p.Y)<span class="hljs-comment">;</span>
                     double <span class="hljs-attr">stepX</span> = point.X - lastPoint.X<span class="hljs-comment">;</span>
                     double <span class="hljs-attr">stepY</span> = point.Y - lastPoint.Y<span class="hljs-comment">;</span>
                     double <span class="hljs-attr">finalXStep</span> = stepX<span class="hljs-comment">;</span>
                     double <span class="hljs-attr">finalYStep</span> = stepY<span class="hljs-comment">;</span>
                     if (stepX &lt; 0) // å·¦ç§»
                     {
                         if (minX + stepX &lt; 5)
                         {
                             <span class="hljs-attr">finalXStep</span> = <span class="hljs-number">5</span> - minX<span class="hljs-comment">;</span>
                         }
                     }
                     else // å³
                     {
                         if (maxX + stepX &gt; this.ActualWidth - 5)
                         {
                             <span class="hljs-attr">finalXStep</span> = this.ActualWidth - <span class="hljs-number">5</span> - maxX<span class="hljs-comment">;</span>
                         }
                     }

                     if (stepY &lt; 0) // ä¸Š
                     {
                         if (minY + stepY &lt; 5)
                         {
                             <span class="hljs-attr">finalYStep</span> = <span class="hljs-number">5</span> - minY<span class="hljs-comment">;</span>
                         }
                     }
                     else // ä¸‹
                     {
                         if (maxY + stepY &gt; this.ActualHeight - 5)
                         {
                             <span class="hljs-attr">finalYStep</span> = this.ActualHeight - <span class="hljs-number">5</span> - maxY<span class="hljs-comment">;</span>
                         }
                     }

                     <span class="hljs-attr">PointCollection</span> = new ObservableCollection&lt;Point&gt;(
                         PointCollection.Select(<span class="hljs-attr">point</span> =&gt; new Point(point.X + finalXStep, point.Y + finalYStep)))<span class="hljs-comment">;</span>
                     roi.Draw(PointCollection?.ToList())<span class="hljs-comment">;</span>
                 }
             }
             else
             {
                 <span class="hljs-attr">this.Cursor</span> = Cursors.Arrow<span class="hljs-comment">;</span>
             }
         }
         <span class="hljs-attr">lastPoint</span> = point<span class="hljs-comment">;</span>
     }
</code></pre>
<p>å¹³ç§»é¡¶ç‚¹æ—¶è¦è€ƒè™‘è¾¹ç•Œé—®é¢˜ï¼Œä¸è¦å°†é¡¶ç‚¹ä»¥åŠå¤šè¾¹å½¢åŒºåŸŸç§»å‡ºcanvasåŒºåŸŸã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[é‡æ¸©UTF-8å’ŒUTF-16]]></title>    <link>https://juejin.cn/post/7584724634173669439</link>    <guid>https://juejin.cn/post/7584724634173669439</guid>    <pubDate>2025-12-18T05:37:22.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7584724634173669439" data-draft-id="7584740835368468534" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="é‡æ¸©UTF-8å’ŒUTF-16"/> <meta itemprop="keywords" content="å…¨æ ˆ"/> <meta itemprop="datePublished" content="2025-12-18T05:37:22.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="_é˜¿å—_"/> <meta itemprop="url" content="https://juejin.cn/user/3210229681759879"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            é‡æ¸©UTF-8å’ŒUTF-16
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3210229681759879/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    _é˜¿å—_
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-18T05:37:22.000Z" title="Thu Dec 18 2025 05:37:22 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-18
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€UTF-8</h2>
<p>UTF-8 çš„å…¨ç§°ä¸ºï¼š Unicode Transformation Format - 8 - bit</p>
<ul>
<li>Unicode ç»Ÿä¸€å­—ç¬¦é›†ï¼Œç»™ä¸–ç•Œä¸Šæ‰€æœ‰æ–‡å­—åˆ†é…å”¯ä¸€ç¼–å·</li>
<li>Transformation FormatÂ  è½¬æ¢æ ¼å¼</li>
<li>8-bitÂ  ä»¥8ä½ï¼ˆä¸€ä¸ªå­—èŠ‚ï¼‰ ä¸ºåŸºæœ¬å•ä½è¿›è¡Œç¼–ç </li>
</ul>
<p>UTF-8 æ˜¯ä¸€ç§æŠŠUnicodeå­—ç¬¦ç¼–ç æˆ<strong>1~4ä¸ªå­—èŠ‚</strong>çš„ç¼–ç æ–¹å¼</p>
<p>å˜é•¿ç¼–ç ï¼š</p>
<ol>
<li>è‹±æ–‡ï¼šÂ  1ä¸ªå­—èŠ‚</li>
<li>æ‹‰ä¸å­—æ¯ï¼š 2ä¸ªå­—èŠ‚ ï¼ˆæ‹‰ä¸å­—æ¯å’Œå¸Œè…Šå­—æ¯ï¼‰</li>
<li>ä¸­æ–‡ï¼š 3ä¸ªå­—èŠ‚ ï¼ˆå¤§å¤šæ•°å¸¸è§æ±‰å­—ï¼‰</li>
<li>Emojiï¼š 4å­—èŠ‚ ï¼ˆåŒ…æ‹¬ç”Ÿåƒ»å­—ç¬¦ï¼‰</li>
</ol>
<h3 data-id="heading-1">ç¼–ç è§„åˆ™ï¼š</h3>
<ol>
<li>å¯¹äºé•¿åº¦ä¸º1å­—èŠ‚çš„å­—ç¬¦ï¼Œå°†æœ€é«˜ä½è®¾ç½®ä¸º0.</li>
<li>å¯¹äºé•¿åº¦ä¸ºnå­—èŠ‚çš„å­—ç¬¦ï¼ˆn &gt; 1ï¼‰ï¼Œå°†é¦–ä¸ªå­—èŠ‚çš„é«˜nä½éƒ½è®¾ç½®ä¸º1ï¼Œç¬¬n+1ä½è®¾ç½®ä¸º0ï¼›ä»ç¬¬äºŒä¸ªå­—èŠ‚å¼€å§‹ï¼Œå°†æ¯ä¸ªå­—èŠ‚çš„é«˜2ä½éƒ½è®¾ç½®ä¸º10ï¼›</li>
</ol>
<p><strong>ç†è§£</strong>ï¼š å¦‚æœè¯»åˆ°ä¸€ä¸ªByteï¼Œé‚£ä¹ˆå°±å–ç¬¬ä¸€ä½ï¼Œå¦‚æœæ˜¯0ï¼Œé‚£ä¹ˆå°±æ˜¯Asciiç ã€‚å¦‚æœæ˜¯1ï¼Œé‚£ä¹ˆç»§ç»­å–å€¼ï¼Œç›´åˆ°0ï¼Œæœ‰å‡ ä¸ª1å°±æ˜¯å‡ ä¸ªå­—ç¬¦é•¿åº¦ã€‚è¯»å–åé¢å­—ç¬¦åï¼Œç»„è£…æˆä¸€ä¸ªæœ‰æ•ˆçš„Unicodeç ã€‚</p>
<p>ä¸¾ä¾‹ï¼š â€œç®—â€å­—çš„</p>
<p>Unicodeæ˜¯ U+7B97ï¼š</p>
<p>7Â  Â  Â  BÂ  Â  Â  9Â  Â  Â  7</p>
<p>0111 1011 1001 0111</p>
<p>UTF-8çš„ç¼–ç ä¸º 0xE7AE97</p>
<p>EÂ  Â  Â  Â  7Â  Â  Â  AÂ  Â  Â  EÂ  Â  Â  9Â  Â  Â  7</p>
<p>1110 0111 1010 1110 1001 0111</p>
<p>UTF-16çš„ç¼–ç ä¸º 0x7B97</p>
<p>7Â  Â  Â  BÂ  Â  Â  9Â  Â  Â  7</p>
<p>0111 1011 1001 0111</p>
<h2 data-id="heading-2">äºŒã€ UTF-16ç¼–ç ï¼š 2æˆ–4å­—èŠ‚</h2>
<ol>
<li><strong>2ä¸ªå­—èŠ‚</strong>ï¼š å½“ç ç‚¹åœ¨ U+0000 åˆ° U+FFFFï¼Œä¸åœ¨ä»£ç†åŒº U+D800 åˆ° U+FFFF</li>
<li><strong>4ä¸ªå­—èŠ‚</strong>ï¼šÂ  å½“ç ç‚¹åœ¨U+10000 åˆ° U+10FFFFæ—¶ï¼Œä½¿ç”¨ä»£ç†å¯¹è®¡ç®—</li>
</ol>
<h4 data-id="heading-3">ä»£ç†å¯¹è®¡ç®—è§„åˆ™ï¼š</h4>
<p>Unicodeæœ‰ä¸€æ®µç‰¹åˆ«çš„åŒºé—´ï¼šÂ  U+D800 åˆ° U+DFFFFÂ  ä¸æ˜¯å­—ç¬¦ï¼Œä»…ä»…æ˜¯UTF-16çš„ä»£ç†å¯¹ã€‚</p>
<p>å½“ç ç‚¹ &gt;= 0x10000 æ—¶ï¼š</p>
<ol>
<li>
<p>å‡å»0x10000Â  Â </p>
</li>
<li>
<ol>
<li>U = codePoint - 0x10000</li>
</ol>
</li>
<li>
<p>æ‹†æˆé«˜10ä½å’Œä½10ä½</p>
</li>
<li>
<ol>
<li>high = U &gt;&gt; 10</li>
<li>low = U &amp; 0x3FF</li>
</ol>
</li>
<li>
<p>åŠ ä¸Šä»£ç†åŸºå€¼</p>
</li>
<li>
<ol>
<li>é«˜ä»£ç† = 0xD800 + high</li>
<li>ä½ä»£ç† = 0xDC00 + low</li>
</ol>
</li>
<li>
<p>å¾—åˆ°4å­—èŠ‚çš„UTF-16ç¼–ç </p>
</li>
</ol>
<h4 data-id="heading-4">è§£æUTF-16é€»è¾‘ï¼š</h4>
<ol>
<li>å…ˆå–2ä¸ªå­—èŠ‚ï¼›</li>
<li>å¦‚æœè¯¥å€¼è½åœ¨0xD800åˆ°0xDBFFï¼Œè¯´æ˜è¿™æ˜¯é«˜ä»£ç†ï¼Œéœ€è¦å†å–2ä¸ªå­—èŠ‚ç»„æˆ4ä¸ªå­—èŠ‚å­—ç¬¦ã€‚</li>
<li>å†å–çš„2ä¸ªå­—èŠ‚åœ¨0xDC00åˆ°0xDFFFå†…ã€‚</li>
<li>å¦åˆ™è¯¥å­—ç¬¦å°±æ˜¯2å­—èŠ‚è¡¨ç¤ºã€‚</li>
</ol>
<h4 data-id="heading-5">ä¸¾ä¾‹ï¼š</h4>
<ol>
<li>è¯»å–åˆ° 0xD83D</li>
<li>å› ä¸º0xD83Dåœ¨ 0xD800åˆ°0xDBFFä¹‹é—´ï¼Œè¯´æ˜æ˜¯é«˜ä»£ç†Â  0xD83D - 0xD800 = 0x3D</li>
<li>å†è·å–2å­—èŠ‚ï¼Œè¯»å–åˆ°0xDE00</li>
<li>å› ä¸º0xDE00åœ¨0xDC00åˆ°0xDFFFFä¹‹é—´ï¼Œè¯´æ˜æ˜¯ä½ä»£ç† 0xDE00 - 0xDC00 = 0x200</li>
<li>è®¡ç®— 0x3D &lt;&lt; 10 + 0x200 + 0x10000 = 0xF400 + 0x10200 = <strong>0x1F600</strong></li>
</ol>
<p>ç»“æœä¸º 0xD83Dçš„Unicodeå€¼ä¸º ğŸ˜€ï¼ˆU+1F600ï¼‰</p>
<h4 data-id="heading-6">çŸ¥è¯†ç‚¹ï¼š</h4>
<ol>
<li>ä½¿ç”¨UTF-16ç¼–ç çš„è¯­è¨€æœ‰Javaã€JavaScriptã€TypeScriptå’ŒC#ã€‚</li>
<li>ç½‘ç»œä¼ è¾“æ—¶ä½¿ç”¨UTF-8æ ¼å¼ï¼Œä»¥è¾¾åˆ°æœ€ä¼˜çš„å…¼å®¹æ€§å’Œç©ºé—´æ•ˆç‡ã€‚</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Canalæ·±åº¦è§£æï¼šMySQLå¢é‡æ•°æ®è®¢é˜…ä¸æ¶ˆè´¹å®æˆ˜]]></title>    <link>https://juejin.cn/post/7584787119273476123</link>    <guid>https://juejin.cn/post/7584787119273476123</guid>    <pubDate>2025-12-18T03:44:54.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7584787119273476123" data-draft-id="7584987267291709486" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Canalæ·±åº¦è§£æï¼šMySQLå¢é‡æ•°æ®è®¢é˜…ä¸æ¶ˆè´¹å®æˆ˜"/> <meta itemprop="keywords" content="Java"/> <meta itemprop="datePublished" content="2025-12-18T03:44:54.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é›¨ä¸­é£˜è¡çš„è®°å¿†"/> <meta itemprop="url" content="https://juejin.cn/user/694547077666606"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Canalæ·±åº¦è§£æï¼šMySQLå¢é‡æ•°æ®è®¢é˜…ä¸æ¶ˆè´¹å®æˆ˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/694547077666606/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é›¨ä¸­é£˜è¡çš„è®°å¿†
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-18T03:44:54.000Z" title="Thu Dec 18 2025 03:44:54 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-18
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Canalæ·±åº¦è§£æï¼šMySQLå¢é‡æ•°æ®è®¢é˜…ä¸æ¶ˆè´¹å®æˆ˜</h2>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ffd04e681ed74f67bbd24ba438d13e1e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zuo5Lit6aOY6I2h55qE6K6w5b-G:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766634294&amp;x-signature=oD%2BfWt6prrQdPSg55VRIvZFK19w%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h3 data-id="heading-1">ä¸€ã€å¼•è¨€ï¼šä¸ºä»€ä¹ˆæˆ‘ä»¬éœ€è¦Canalï¼Ÿ</h3>
<p>ä½ çš„ç”µå•†ç³»ç»Ÿä¸­ï¼Œç”¨æˆ·ä¸‹å•åä¿®æ”¹äº†å•†å“åº“å­˜ï¼Œä½†æ˜¯Redisç¼“å­˜ä¸­çš„åº“å­˜æ•°æ®è¿˜æ˜¯æ—§çš„ï¼Œå¯¼è‡´è¶…å–é—®é¢˜ï¼›æˆ–è€…ä½ éœ€è¦å°†MySQLä¸­çš„æ•°æ®å®æ—¶åŒæ­¥åˆ°Elasticsearchä¸­ä¾›æœç´¢ä½¿ç”¨ï¼Œä¼ ç»Ÿçš„å®šæ—¶ä»»åŠ¡æ–¹å¼å»¶è¿Ÿé«˜ã€æ€§èƒ½å·®ã€‚</p>
<p>è¿™äº›é—®é¢˜çš„æ ¹æºåœ¨äºï¼š<strong>æ•°æ®åœ¨ä¸åŒç³»ç»Ÿé—´çš„å®æ—¶åŒæ­¥ç¼ºä¹ä¼˜é›…çš„è§£å†³æ–¹æ¡ˆ</strong>ã€‚</p>
<p>Canalåº”è¿è€Œç”Ÿã€‚å®ƒæ˜¯é˜¿é‡Œå·´å·´å¼€æºçš„åŸºäºMySQLæ•°æ®åº“binlogçš„å¢é‡è®¢é˜…&amp;æ¶ˆè´¹ç»„ä»¶ï¼Œèƒ½å¤Ÿå¸®åŠ©æˆ‘ä»¬å®ç°ï¼š</p>
<ul>
<li><strong>å®æ—¶æ€§é«˜</strong>ï¼šæ¯«ç§’çº§æ•°æ®åŒæ­¥</li>
<li><strong>ä¾µå…¥æ€§ä½</strong>ï¼šæ— éœ€ä¿®æ”¹ä¸šåŠ¡ä»£ç </li>
<li><strong>å¯é æ€§å¼º</strong>ï¼šåŸºäºMySQLä¸»ä»å¤åˆ¶åè®®</li>
<li><strong>æ‰©å±•æ€§å¥½</strong>ï¼šæ”¯æŒå¤šç§ä¸‹æ¸¸æ¶ˆè´¹åœºæ™¯</li>
</ul>
<h3 data-id="heading-2">äºŒã€Canalåº”ç”¨åœºæ™¯å…¨æ™¯</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8041624550f344af8a7bc5f93512ccd5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zuo5Lit6aOY6I2h55qE6K6w5b-G:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766634294&amp;x-signature=8ZnR1b3W9rrBhWiXj1k6eDaG1l0%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>Canalåœ¨å®é™…ç”Ÿäº§ç¯å¢ƒä¸­æœ‰ç€å¹¿æ³›çš„åº”ç”¨åœºæ™¯ï¼š</p>
<h4 data-id="heading-3">1. æ•°æ®åº“å®æ—¶å¤‡ä»½</h4>
<p>é€šè¿‡è®¢é˜…MySQLçš„binlogï¼Œå¯ä»¥å®æ—¶å°†æ•°æ®å˜æ›´åŒæ­¥åˆ°å¤‡ä»½åº“ï¼Œå®ç°æ•°æ®çš„å®æ—¶å®¹ç¾ã€‚ç›¸æ¯”ä¼ ç»Ÿçš„MySQLä¸»ä»å¤åˆ¶ï¼ŒCanalæä¾›äº†æ›´çµæ´»çš„æ§åˆ¶èƒ½åŠ›ã€‚</p>
<h4 data-id="heading-4">2. ç¼“å­˜åŒæ­¥</h4>
<p>è¿™æ˜¯æœ€å¸¸è§çš„åœºæ™¯ã€‚å½“MySQLä¸­çš„æ•°æ®å‘ç”Ÿå˜æ›´æ—¶ï¼Œé€šè¿‡Canalå®æ—¶æ•è·å˜æ›´äº‹ä»¶ï¼Œæ›´æ–°Redisã€Memcachedç­‰ç¼“å­˜ï¼Œä¿è¯ç¼“å­˜ä¸æ•°æ®åº“çš„ä¸€è‡´æ€§ã€‚</p>
<h4 data-id="heading-5">3. å®æ—¶æ•°æ®åˆ†æ</h4>
<p>å°†MySQLçš„æ•°æ®å˜æ›´å®æ—¶æ¨é€åˆ°Kafkaç­‰æ¶ˆæ¯é˜Ÿåˆ—ï¼Œä¾›ä¸‹æ¸¸çš„å®æ—¶è®¡ç®—ç³»ç»Ÿï¼ˆå¦‚Flinkã€Spark Streamingï¼‰æ¶ˆè´¹ï¼Œæ„å»ºå®æ—¶æ•°æ®ä»“åº“ã€‚</p>
<h4 data-id="heading-6">4. æ•°æ®å¼‚æ„è¿ç§»</h4>
<p>å°†å…³ç³»å‹æ•°æ®åº“MySQLä¸­çš„æ•°æ®å®æ—¶åŒæ­¥åˆ°NoSQLæ•°æ®åº“ï¼ˆå¦‚MongoDBã€HBaseï¼‰æˆ–æœç´¢å¼•æ“ï¼ˆå¦‚Elasticsearchï¼‰ï¼Œæ»¡è¶³ä¸åŒä¸šåŠ¡åœºæ™¯çš„æŸ¥è¯¢éœ€æ±‚ã€‚</p>
<h3 data-id="heading-7">ä¸‰ã€Canalå·¥ä½œåŸç†æ·±åº¦å‰–æ</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/954b5159fc6a465fa347f5f5174777df~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zuo5Lit6aOY6I2h55qE6K6w5b-G:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766634294&amp;x-signature=t9B4%2BBLtqrjHsJqZnD8snAkjG0I%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h4 data-id="heading-8">æ ¸å¿ƒåŸç†</h4>
<p>Canalçš„å·¥ä½œåŸç†åŸºäºMySQLçš„ä¸»ä»å¤åˆ¶åè®®ã€‚æˆ‘ä»¬çŸ¥é“ï¼ŒMySQLçš„ä¸»ä»å¤åˆ¶è¿‡ç¨‹å¦‚ä¸‹ï¼š</p>
<ol>
<li>Masterå°†æ•°æ®å˜æ›´å†™å…¥binlogï¼ˆäºŒè¿›åˆ¶æ—¥å¿—ï¼‰</li>
<li>Slaveçš„IOçº¿ç¨‹è¯»å–Masterçš„binlogå¹¶å†™å…¥relay logï¼ˆä¸­ç»§æ—¥å¿—ï¼‰</li>
<li>Slaveçš„SQLçº¿ç¨‹è¯»å–relay logå¹¶é‡æ”¾SQLï¼Œå®Œæˆæ•°æ®åŒæ­¥</li>
</ol>
<p><strong>Canalæ¨¡æ‹Ÿäº†MySQL Slaveçš„äº¤äº’åè®®</strong>ï¼ŒæŠŠè‡ªå·±ä¼ªè£…æˆMySQLçš„ä»åº“ï¼Œå‘MySQL Masterå‘é€dumpè¯·æ±‚ï¼ŒMySQLæ¨é€binlogç»™Canalï¼ŒCanalè§£æbinlogå¯¹è±¡ï¼ˆåŸå§‹ä¸ºbyteæµï¼‰ã€‚</p>
<h4 data-id="heading-9">å·¥ä½œæµç¨‹</h4>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-bullet">1.</span> Canalè¿æ¥MySQLï¼Œä¼ªè£…æˆSlave
<span class="hljs-bullet">2.</span> MySQLæ¨é€binlogç»™Canal
<span class="hljs-bullet">3.</span> Canalè§£æbinlogå†…å®¹
<span class="hljs-bullet">4.</span> Canalå°†è§£æåçš„æ•°æ®å‘é€ç»™å®¢æˆ·ç«¯
<span class="hljs-bullet">5.</span> å®¢æˆ·ç«¯å¤„ç†æ•°æ®ï¼ˆå†™å…¥ç¼“å­˜ã€MQç­‰ï¼‰
</code></pre>
<h3 data-id="heading-10">å››ã€Canalæ¶æ„è®¾è®¡</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/14128eb35bd8464c8979e7d63f139003~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zuo5Lit6aOY6I2h55qE6K6w5b-G:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766634294&amp;x-signature=Vkvpt4WZb6coxcdcpctMlTJMNWE%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>Canalçš„æ¶æ„è®¾è®¡éå¸¸ä¼˜é›…ï¼Œä¸»è¦åŒ…å«ä»¥ä¸‹æ ¸å¿ƒç»„ä»¶ï¼š</p>
<h4 data-id="heading-11">1. EventParserï¼ˆäº‹ä»¶è§£æå™¨ï¼‰</h4>
<p>è´Ÿè´£ä½œä¸ºMySQL Slaveä¸MySQL Masterå»ºç«‹è¿æ¥ï¼Œæ¨¡æ‹Ÿslaveåè®®ä¸MySQL Masterè¿›è¡Œäº¤äº’ï¼Œè¯·æ±‚å¹¶æ¥æ”¶binlogæµï¼Œå¹¶å°†å…¶è§£ææˆCanalå†…éƒ¨çš„æ•°æ®ç»“æ„ã€‚</p>
<p><strong>æ ¸å¿ƒèŒè´£ï¼š</strong></p>
<ul>
<li>è¿æ¥ç®¡ç†ï¼šå»ºç«‹ä¸MySQLçš„è¿æ¥</li>
<li>åè®®æ¨¡æ‹Ÿï¼šæ¨¡æ‹ŸMySQL Slaveåè®®</li>
<li>Binlogè·å–ï¼šä»MySQLè·å–binlogæµ</li>
<li>äº‹ä»¶è§£æï¼šå°†binlogè§£æä¸ºç»“æ„åŒ–äº‹ä»¶</li>
</ul>
<h4 data-id="heading-12">2. EventSinkï¼ˆäº‹ä»¶è¿‡æ»¤å™¨ï¼‰</h4>
<p>è´Ÿè´£å¯¹EventParserè§£æå‡ºæ¥çš„æ•°æ®è¿›è¡Œè¿‡æ»¤ã€åŠ å·¥ã€åˆ†å‘ã€‚å¯ä»¥æ ¹æ®æ­£åˆ™è¡¨è¾¾å¼é…ç½®ï¼Œè¿‡æ»¤å‡ºéœ€è¦çš„è¡¨ã€å­—æ®µç­‰ã€‚</p>
<p><strong>æ ¸å¿ƒèŒè´£ï¼š</strong></p>
<ul>
<li>æ•°æ®è¿‡æ»¤ï¼šæŒ‰è§„åˆ™è¿‡æ»¤æ•°æ®</li>
<li>æ•°æ®è½¬æ¢ï¼šæ ¼å¼è½¬æ¢å’ŒåŠ å·¥</li>
<li>äº‹ä»¶è·¯ç”±ï¼šå°†äº‹ä»¶è·¯ç”±åˆ°ä¸åŒçš„å¤„ç†å™¨</li>
</ul>
<h4 data-id="heading-13">3. EventStoreï¼ˆäº‹ä»¶å­˜å‚¨ï¼‰</h4>
<p>è´Ÿè´£å°†æ•°æ®å­˜å‚¨åˆ°æœ¬åœ°ï¼Œæä¾›æ¶ˆè´¹ç«¯è·å–æ•°æ®ã€‚é‡‡ç”¨ç¯å½¢é˜Ÿåˆ—ç»“æ„ï¼Œæ”¯æŒæ‰¹é‡æ¶ˆè´¹å’Œæ¶ˆè´¹ä½ç‚¹è®°å½•ã€‚</p>
<p><strong>æ ¸å¿ƒèŒè´£ï¼š</strong></p>
<ul>
<li>æ•°æ®å­˜å‚¨ï¼šæŒä¹…åŒ–äº‹ä»¶æ•°æ®</li>
<li>ä½ç‚¹ç®¡ç†ï¼šè®°å½•æ¶ˆè´¹ä½ç½®</li>
<li>æ•°æ®æä¾›ï¼šä¸ºæ¶ˆè´¹è€…æä¾›æ•°æ®</li>
</ul>
<h3 data-id="heading-14">äº”ã€MySQL Binlogæœºåˆ¶è¯¦è§£</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/953c466fc92744c6bd01a90b9221980c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zuo5Lit6aOY6I2h55qE6K6w5b-G:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766634294&amp;x-signature=Tx8lPmWMOWrvEFQtouecBvVwcRE%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>è¦æ·±å…¥ç†è§£Canalï¼Œå¿…é¡»å…ˆç†è§£MySQLçš„binlogæœºåˆ¶ã€‚</p>
<h4 data-id="heading-15">Binlogæ˜¯ä»€ä¹ˆï¼Ÿ</h4>
<p>Binlogï¼ˆBinary Logï¼‰æ˜¯MySQLçš„äºŒè¿›åˆ¶æ—¥å¿—ï¼Œè®°å½•äº†æ‰€æœ‰DDLå’ŒDMLè¯­å¥ï¼ˆä¸åŒ…æ‹¬SELECTå’ŒSHOWç­‰æŸ¥è¯¢è¯­å¥ï¼‰ï¼Œä»¥äº‹ä»¶çš„å½¢å¼è®°å½•ï¼Œå¹¶åŒ…å«è¯­å¥æ‰§è¡Œçš„æ—¶é—´ä¿¡æ¯ã€‚</p>
<h4 data-id="heading-16">Binlogçš„ä½œç”¨</h4>
<ol>
<li><strong>ä¸»ä»å¤åˆ¶</strong>ï¼šMasterå°†binlogå‘é€ç»™Slaveï¼ŒSlaveé‡æ”¾binlogå®ç°æ•°æ®åŒæ­¥</li>
<li><strong>æ•°æ®æ¢å¤</strong>ï¼šé€šè¿‡binlogå¯ä»¥è¿›è¡Œpoint-in-timeæ¢å¤</li>
<li><strong>å®¡è®¡</strong>ï¼šå¯ä»¥é€šè¿‡binlogå®¡è®¡æ•°æ®åº“çš„å˜æ›´å†å²</li>
</ol>
<h4 data-id="heading-17">Binlogæ ¼å¼</h4>
<p>MySQL binlogæœ‰ä¸‰ç§æ ¼å¼ï¼š</p>
<p><strong>1. Statementæ ¼å¼</strong></p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- è®°å½•SQLè¯­å¥</span>
<span class="hljs-keyword">UPDATE</span> users <span class="hljs-keyword">SET</span> age <span class="hljs-operator">=</span> age <span class="hljs-operator">+</span> <span class="hljs-number">1</span> <span class="hljs-keyword">WHERE</span> id <span class="hljs-operator">&lt;</span> <span class="hljs-number">100</span>;
</code></pre>
<p>ä¼˜ç‚¹ï¼šæ—¥å¿—é‡å°‘
ç¼ºç‚¹ï¼šæŸäº›å‡½æ•°å¦‚NOW()ã€UUID()ç­‰ä¼šå¯¼è‡´ä¸»ä»æ•°æ®ä¸ä¸€è‡´</p>
<p><strong>2. Rowæ ¼å¼</strong></p>
<pre><code class="hljs language-ini" lang="ini">-- è®°å½•æ¯ä¸€è¡Œçš„å®é™…å˜æ›´
<span class="hljs-section">[ROW]</span> <span class="hljs-attr">id</span>=<span class="hljs-number">1</span>, age: <span class="hljs-number">25</span> -&gt; <span class="hljs-number">26</span>
<span class="hljs-section">[ROW]</span> <span class="hljs-attr">id</span>=<span class="hljs-number">2</span>, age: <span class="hljs-number">30</span> -&gt; <span class="hljs-number">31</span>
...
</code></pre>
<p>ä¼˜ç‚¹ï¼šå‡†ç¡®è®°å½•æ¯ä¸€è¡Œçš„å˜æ›´ï¼Œä¿è¯ä¸»ä»ä¸€è‡´
ç¼ºç‚¹ï¼šæ—¥å¿—é‡å¤§</p>
<p><strong>3. Mixedæ ¼å¼</strong>
æ··åˆä½¿ç”¨Statementå’ŒRowæ ¼å¼ï¼ŒMySQLè‡ªåŠ¨åˆ¤æ–­ä½¿ç”¨å“ªç§æ ¼å¼ã€‚</p>
<p><strong>Canalè¦æ±‚ä½¿ç”¨Rowæ ¼å¼</strong>ï¼Œå› ä¸ºåªæœ‰Rowæ ¼å¼æ‰èƒ½å‡†ç¡®æ•è·æ¯ä¸€è¡Œçš„å˜æ›´è¯¦æƒ…ã€‚</p>
<h3 data-id="heading-18">å…­ã€Canalç¯å¢ƒæ­å»ºå®æˆ˜</h3>
<h4 data-id="heading-19">6.1 MySQLé…ç½®</h4>
<p>é¦–å…ˆéœ€è¦å¼€å¯MySQLçš„binlogåŠŸèƒ½ï¼Œå¹¶è®¾ç½®ä¸ºRowæ ¼å¼ã€‚</p>
<p>ç¼–è¾‘MySQLé…ç½®æ–‡ä»¶<code>my.cnf</code>ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-section">[mysqld]</span>
<span class="hljs-comment"># å¼€å¯binlog</span>
<span class="hljs-attr">log-bin</span>=mysql-bin
<span class="hljs-comment"># è®¾ç½®binlogæ ¼å¼ä¸ºROW</span>
<span class="hljs-attr">binlog-format</span>=ROW
<span class="hljs-comment"># è®¾ç½®server-idï¼ˆå¿…é¡»å”¯ä¸€ï¼‰</span>
<span class="hljs-attr">server-id</span>=<span class="hljs-number">1</span>
<span class="hljs-comment"># è®¾ç½®binlogè¿‡æœŸæ—¶é—´ï¼ˆå¤©ï¼‰</span>
<span class="hljs-attr">expire_logs_days</span>=<span class="hljs-number">7</span>
<span class="hljs-comment"># è®¾ç½®å•ä¸ªbinlogæ–‡ä»¶å¤§å°</span>
<span class="hljs-attr">max_binlog_size</span>=<span class="hljs-number">100</span>M
<span class="hljs-comment"># éœ€è¦åŒæ­¥çš„æ•°æ®åº“</span>
<span class="hljs-attr">binlog-do-db</span>=test_db
</code></pre>
<p>é‡å¯MySQLä½¿é…ç½®ç”Ÿæ•ˆï¼š</p>
<pre><code class="hljs language-bash" lang="bash">sudo systemctl restart mysql
</code></pre>
<p>åˆ›å»ºCanalç”¨æˆ·å¹¶æˆæƒï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">USER</span> <span class="hljs-string">'canal'</span>@<span class="hljs-string">'%'</span> IDENTIFIED <span class="hljs-keyword">BY</span> <span class="hljs-string">'canal@123'</span>;
<span class="hljs-keyword">GRANT</span> <span class="hljs-keyword">SELECT</span>, REPLICATION SLAVE, REPLICATION CLIENT <span class="hljs-keyword">ON</span> <span class="hljs-operator">*</span>.<span class="hljs-operator">*</span> <span class="hljs-keyword">TO</span> <span class="hljs-string">'canal'</span>@<span class="hljs-string">'%'</span>;
FLUSH PRIVILEGES;
</code></pre>
<p>éªŒè¯binlogæ˜¯å¦å¼€å¯ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">SHOW</span> VARIABLES <span class="hljs-keyword">LIKE</span> <span class="hljs-string">'log_bin'</span>;
<span class="hljs-keyword">SHOW</span> VARIABLES <span class="hljs-keyword">LIKE</span> <span class="hljs-string">'binlog_format'</span>;
<span class="hljs-keyword">SHOW</span> MASTER STATUS;
</code></pre>
<h4 data-id="heading-20">6.2 Canal Serveréƒ¨ç½²</h4>
<p>ä¸‹è½½Canal Serverï¼š</p>
<pre><code class="hljs language-bash" lang="bash">wget https://github.com/alibaba/canal/releases/download/canal-1.1.6/canal.deployer-1.1.6.tar.gz
<span class="hljs-built_in">mkdir</span> canal-server &amp;&amp; <span class="hljs-built_in">cd</span> canal-server
tar -zxvf canal.deployer-1.1.6.tar.gz
</code></pre>
<p>é…ç½®Canal Serverï¼Œç¼–è¾‘<code>conf/example/instance.properties</code>ï¼š</p>
<pre><code class="hljs language-properties" lang="properties"># MySQLè¿æ¥é…ç½®
canal.instance.master.address=127.0.0.1:3306
canal.instance.dbUsername=canal
canal.instance.dbPassword=canal@123
canal.instance.connectionCharset=UTF-8

# è®¢é˜…çš„binlogä½ç½®ï¼ˆé¦–æ¬¡å¯åŠ¨ä¼šä»æœ€æ–°ä½ç½®å¼€å§‹ï¼‰
canal.instance.master.journal.name=
canal.instance.master.position=
canal.instance.master.timestamp=

# è®¢é˜…çš„æ•°æ®åº“å’Œè¡¨ï¼ˆæ”¯æŒæ­£åˆ™ï¼‰
canal.instance.filter.regex=test_db\\..*
# é»‘åå•ï¼ˆä¸è®¢é˜…çš„è¡¨ï¼‰
canal.instance.filter.black.regex=

# å¯ç”¨äº‹åŠ¡æ”¯æŒ
canal.instance.tsdb.enable=true
</code></pre>
<p>å¯åŠ¨Canal Serverï¼š</p>
<pre><code class="hljs language-bash" lang="bash">sh bin/startup.sh
</code></pre>
<p>æŸ¥çœ‹æ—¥å¿—ç¡®è®¤å¯åŠ¨æˆåŠŸï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">tail</span> -f logs/canal/canal.log
<span class="hljs-built_in">tail</span> -f logs/example/example.log
</code></pre>
<h3 data-id="heading-21">ä¸ƒã€Canalå®¢æˆ·ç«¯å¼€å‘å®æˆ˜</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/72aa7a7c76dc48f4a7311f93f321b2ab~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zuo5Lit6aOY6I2h55qE6K6w5b-G:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766634294&amp;x-signature=2mhsGXIHDwv1WZKdOvOFGnCKcUI%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h4 data-id="heading-22">7.1 å¼•å…¥ä¾èµ–</h4>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.alibaba.otter<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>canal.client<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.1.6<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
</code></pre>
<h4 data-id="heading-23">7.2 ç®€å•å®¢æˆ·ç«¯å®ç°</h4>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªå®Œæ•´çš„Canalå®¢æˆ·ç«¯ç¤ºä¾‹ï¼Œæ¼”ç¤ºå¦‚ä½•è®¢é˜…MySQLå˜æ›´å¹¶å¤„ç†ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> com.alibaba.otter.canal.client.CanalConnector;
<span class="hljs-keyword">import</span> com.alibaba.otter.canal.client.CanalConnectors;
<span class="hljs-keyword">import</span> com.alibaba.otter.canal.protocol.CanalEntry;
<span class="hljs-keyword">import</span> com.alibaba.otter.canal.protocol.Message;
<span class="hljs-keyword">import</span> com.google.protobuf.InvalidProtocolBufferException;

<span class="hljs-keyword">import</span> java.net.InetSocketAddress;
<span class="hljs-keyword">import</span> java.util.List;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SimpleCanalClient</span> {

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-comment">// åˆ›å»ºè¿æ¥</span>
        <span class="hljs-type">CanalConnector</span> <span class="hljs-variable">connector</span> <span class="hljs-operator">=</span> CanalConnectors.newSingleConnector(
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">InetSocketAddress</span>(<span class="hljs-string">"127.0.0.1"</span>, <span class="hljs-number">11111</span>),
            <span class="hljs-string">"example"</span>,  <span class="hljs-comment">// destinationåç§°</span>
            <span class="hljs-string">""</span>,         <span class="hljs-comment">// ç”¨æˆ·åï¼ˆé»˜è®¤ä¸ºç©ºï¼‰</span>
            <span class="hljs-string">""</span>          <span class="hljs-comment">// å¯†ç ï¼ˆé»˜è®¤ä¸ºç©ºï¼‰</span>
        );

        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// è¿æ¥Canal Server</span>
            connector.connect();
            <span class="hljs-comment">// è®¢é˜…æ•°æ®åº“è¡¨</span>
            connector.subscribe(<span class="hljs-string">"test_db\\..*"</span>);
            <span class="hljs-comment">// å›æ»šåˆ°æœªæ¶ˆè´¹ä½ç½®</span>
            connector.rollback();

            <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) {
                <span class="hljs-comment">// è·å–æŒ‡å®šæ•°é‡çš„æ•°æ®</span>
                <span class="hljs-type">Message</span> <span class="hljs-variable">message</span> <span class="hljs-operator">=</span> connector.getWithoutAck(<span class="hljs-number">100</span>);
                <span class="hljs-type">long</span> <span class="hljs-variable">batchId</span> <span class="hljs-operator">=</span> message.getId();
                <span class="hljs-type">int</span> <span class="hljs-variable">size</span> <span class="hljs-operator">=</span> message.getEntries().size();

                <span class="hljs-keyword">if</span> (batchId == -<span class="hljs-number">1</span> || size == <span class="hljs-number">0</span>) {
                    <span class="hljs-keyword">try</span> {
                        Thread.sleep(<span class="hljs-number">1000</span>);
                    } <span class="hljs-keyword">catch</span> (InterruptedException e) {
                        e.printStackTrace();
                    }
                } <span class="hljs-keyword">else</span> {
                    printEntries(message.getEntries());
                }

                <span class="hljs-comment">// ç¡®è®¤æ¶ˆè´¹</span>
                connector.ack(batchId);
            }
        } <span class="hljs-keyword">finally</span> {
            connector.disconnect();
        }
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">printEntries</span><span class="hljs-params">(List&lt;CanalEntry.Entry&gt; entries)</span> {
        <span class="hljs-keyword">for</span> (CanalEntry.Entry entry : entries) {
            <span class="hljs-keyword">if</span> (entry.getEntryType() == CanalEntry.EntryType.TRANSACTIONBEGIN ||
                entry.getEntryType() == CanalEntry.EntryType.TRANSACTIONEND) {
                <span class="hljs-keyword">continue</span>;
            }

            CanalEntry.RowChange rowChange;
            <span class="hljs-keyword">try</span> {
                rowChange = CanalEntry.RowChange.parseFrom(entry.getStoreValue());
            } <span class="hljs-keyword">catch</span> (InvalidProtocolBufferException e) {
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">"è§£æbinlogå¤±è´¥"</span>, e);
            }

            CanalEntry.<span class="hljs-type">EventType</span> <span class="hljs-variable">eventType</span> <span class="hljs-operator">=</span> rowChange.getEventType();
            <span class="hljs-type">String</span> <span class="hljs-variable">tableName</span> <span class="hljs-operator">=</span> entry.getHeader().getTableName();
            <span class="hljs-type">String</span> <span class="hljs-variable">schemaName</span> <span class="hljs-operator">=</span> entry.getHeader().getSchemaName();

            System.out.println(String.format(<span class="hljs-string">"æ•°æ®åº“: %s, è¡¨: %s, äº‹ä»¶ç±»å‹: %s"</span>,
                schemaName, tableName, eventType));

            <span class="hljs-keyword">for</span> (CanalEntry.RowData rowData : rowChange.getRowDatasList()) {
                <span class="hljs-keyword">if</span> (eventType == CanalEntry.EventType.DELETE) {
                    printColumns(rowData.getBeforeColumnsList(), <span class="hljs-string">"åˆ é™¤"</span>);
                } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (eventType == CanalEntry.EventType.INSERT) {
                    printColumns(rowData.getAfterColumnsList(), <span class="hljs-string">"æ’å…¥"</span>);
                } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (eventType == CanalEntry.EventType.UPDATE) {
                    System.out.println(<span class="hljs-string">"------æ›´æ–°å‰------"</span>);
                    printColumns(rowData.getBeforeColumnsList(), <span class="hljs-string">""</span>);
                    System.out.println(<span class="hljs-string">"------æ›´æ–°å------"</span>);
                    printColumns(rowData.getAfterColumnsList(), <span class="hljs-string">""</span>);
                }
            }
        }
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">printColumns</span><span class="hljs-params">(List&lt;CanalEntry.Column&gt; columns, String operation)</span> {
        <span class="hljs-keyword">for</span> (CanalEntry.Column column : columns) {
            System.out.println(String.format(<span class="hljs-string">"%s: %s = %s (ç±»å‹: %s, æ˜¯å¦æ›´æ–°: %s)"</span>,
                operation,
                column.getName(),
                column.getValue(),
                column.getMysqlType(),
                column.getUpdated()));
        }
    }
}
</code></pre>
<h4 data-id="heading-24">7.3 å°è£…ä¼˜é›…çš„å®¢æˆ·ç«¯</h4>
<p>å®é™…é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬éœ€è¦å¯¹å®¢æˆ·ç«¯è¿›è¡Œå°è£…ï¼Œæä¾›æ›´æ˜“ç”¨çš„APIï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> com.alibaba.otter.canal.protocol.CanalEntry;
<span class="hljs-keyword">import</span> java.util.List;

<span class="hljs-comment">/**
 * Canaläº‹ä»¶ç›‘å¬å™¨æ¥å£
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">CanalEventListener</span> {

    <span class="hljs-comment">/**
     * å¤„ç†INSERTäº‹ä»¶
     */</span>
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">onInsert</span><span class="hljs-params">(String database, String table, List&lt;CanalEntry.Column&gt; data)</span>;

    <span class="hljs-comment">/**
     * å¤„ç†UPDATEäº‹ä»¶
     */</span>
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">onUpdate</span><span class="hljs-params">(String database, String table,
                  List&lt;CanalEntry.Column&gt; before,
                  List&lt;CanalEntry.Column&gt; after)</span>;

    <span class="hljs-comment">/**
     * å¤„ç†DELETEäº‹ä»¶
     */</span>
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">onDelete</span><span class="hljs-params">(String database, String table, List&lt;CanalEntry.Column&gt; data)</span>;
}
</code></pre>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> com.alibaba.otter.canal.client.CanalConnector;
<span class="hljs-keyword">import</span> com.alibaba.otter.canal.client.CanalConnectors;
<span class="hljs-keyword">import</span> com.alibaba.otter.canal.protocol.CanalEntry;
<span class="hljs-keyword">import</span> com.alibaba.otter.canal.protocol.Message;
<span class="hljs-keyword">import</span> org.slf4j.Logger;
<span class="hljs-keyword">import</span> org.slf4j.LoggerFactory;

<span class="hljs-keyword">import</span> java.net.InetSocketAddress;
<span class="hljs-keyword">import</span> java.util.List;
<span class="hljs-keyword">import</span> java.util.concurrent.TimeUnit;

<span class="hljs-comment">/**
 * Canalå®¢æˆ·ç«¯å°è£…
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CanalClient</span> {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">Logger</span> <span class="hljs-variable">logger</span> <span class="hljs-operator">=</span> LoggerFactory.getLogger(CanalClient.class);

    <span class="hljs-keyword">private</span> CanalConnector connector;
    <span class="hljs-keyword">private</span> String filter;
    <span class="hljs-keyword">private</span> CanalEventListener listener;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">volatile</span> <span class="hljs-type">boolean</span> <span class="hljs-variable">running</span> <span class="hljs-operator">=</span> <span class="hljs-literal">false</span>;

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">CanalClient</span><span class="hljs-params">(String host, <span class="hljs-type">int</span> port, String destination, String filter)</span> {
        <span class="hljs-built_in">this</span>.connector = CanalConnectors.newSingleConnector(
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">InetSocketAddress</span>(host, port),
            destination,
            <span class="hljs-string">""</span>,
            <span class="hljs-string">""</span>
        );
        <span class="hljs-built_in">this</span>.filter = filter;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setListener</span><span class="hljs-params">(CanalEventListener listener)</span> {
        <span class="hljs-built_in">this</span>.listener = listener;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">start</span><span class="hljs-params">()</span> {
        connector.connect();
        connector.subscribe(filter);
        connector.rollback();

        running = <span class="hljs-literal">true</span>;

        <span class="hljs-comment">// å¯åŠ¨æ¶ˆè´¹çº¿ç¨‹</span>
        <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(() -&gt; {
            <span class="hljs-keyword">while</span> (running) {
                <span class="hljs-keyword">try</span> {
                    <span class="hljs-type">Message</span> <span class="hljs-variable">message</span> <span class="hljs-operator">=</span> connector.getWithoutAck(<span class="hljs-number">100</span>);
                    <span class="hljs-type">long</span> <span class="hljs-variable">batchId</span> <span class="hljs-operator">=</span> message.getId();
                    <span class="hljs-type">int</span> <span class="hljs-variable">size</span> <span class="hljs-operator">=</span> message.getEntries().size();

                    <span class="hljs-keyword">if</span> (batchId != -<span class="hljs-number">1</span> &amp;&amp; size &gt; <span class="hljs-number">0</span>) {
                        processEntries(message.getEntries());
                        connector.ack(batchId);
                    } <span class="hljs-keyword">else</span> {
                        TimeUnit.SECONDS.sleep(<span class="hljs-number">1</span>);
                    }
                } <span class="hljs-keyword">catch</span> (Exception e) {
                    logger.error(<span class="hljs-string">"å¤„ç†Canalæ¶ˆæ¯å¼‚å¸¸"</span>, e);
                    connector.rollback();
                }
            }
        }, <span class="hljs-string">"canal-client-thread"</span>).start();

        logger.info(<span class="hljs-string">"Canalå®¢æˆ·ç«¯å¯åŠ¨æˆåŠŸ"</span>);
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">stop</span><span class="hljs-params">()</span> {
        running = <span class="hljs-literal">false</span>;
        connector.disconnect();
        logger.info(<span class="hljs-string">"Canalå®¢æˆ·ç«¯å·²åœæ­¢"</span>);
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">processEntries</span><span class="hljs-params">(List&lt;CanalEntry.Entry&gt; entries)</span> {
        <span class="hljs-keyword">for</span> (CanalEntry.Entry entry : entries) {
            <span class="hljs-keyword">if</span> (entry.getEntryType() != CanalEntry.EntryType.ROWDATA) {
                <span class="hljs-keyword">continue</span>;
            }

            <span class="hljs-keyword">try</span> {
                CanalEntry.<span class="hljs-type">RowChange</span> <span class="hljs-variable">rowChange</span> <span class="hljs-operator">=</span> CanalEntry.RowChange.parseFrom(entry.getStoreValue());
                <span class="hljs-type">String</span> <span class="hljs-variable">database</span> <span class="hljs-operator">=</span> entry.getHeader().getSchemaName();
                <span class="hljs-type">String</span> <span class="hljs-variable">table</span> <span class="hljs-operator">=</span> entry.getHeader().getTableName();
                CanalEntry.<span class="hljs-type">EventType</span> <span class="hljs-variable">eventType</span> <span class="hljs-operator">=</span> rowChange.getEventType();

                <span class="hljs-keyword">for</span> (CanalEntry.RowData rowData : rowChange.getRowDatasList()) {
                    <span class="hljs-keyword">if</span> (listener != <span class="hljs-literal">null</span>) {
                        <span class="hljs-keyword">switch</span> (eventType) {
                            <span class="hljs-keyword">case</span> INSERT:
                                listener.onInsert(database, table, rowData.getAfterColumnsList());
                                <span class="hljs-keyword">break</span>;
                            <span class="hljs-keyword">case</span> UPDATE:
                                listener.onUpdate(database, table,
                                    rowData.getBeforeColumnsList(),
                                    rowData.getAfterColumnsList());
                                <span class="hljs-keyword">break</span>;
                            <span class="hljs-keyword">case</span> DELETE:
                                listener.onDelete(database, table, rowData.getBeforeColumnsList());
                                <span class="hljs-keyword">break</span>;
                            <span class="hljs-keyword">default</span>:
                                <span class="hljs-keyword">break</span>;
                        }
                    }
                }
            } <span class="hljs-keyword">catch</span> (Exception e) {
                logger.error(<span class="hljs-string">"å¤„ç†Entryå¼‚å¸¸"</span>, e);
            }
        }
    }
}
</code></pre>
<h3 data-id="heading-25">å…«ã€ç”Ÿäº§å®æˆ˜æ¡ˆä¾‹ï¼šRedisç¼“å­˜åŒæ­¥</h3>
<h4 data-id="heading-26">åœºæ™¯æè¿°</h4>
<p>ç”µå•†ç³»ç»Ÿä¸­ï¼Œå•†å“ä¿¡æ¯å­˜å‚¨åœ¨MySQLä¸­ï¼Œä¸ºäº†æé«˜æŸ¥è¯¢æ€§èƒ½ï¼Œåœ¨Redisä¸­ç¼“å­˜äº†å•†å“æ•°æ®ã€‚å½“å•†å“ä¿¡æ¯åœ¨MySQLä¸­æ›´æ–°æ—¶ï¼Œéœ€è¦å®æ—¶åŒæ­¥æ›´æ–°Redisç¼“å­˜ã€‚</p>
<h4 data-id="heading-27">å®ç°æ–¹æ¡ˆ</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> com.alibaba.otter.canal.protocol.CanalEntry;
<span class="hljs-keyword">import</span> redis.clients.jedis.Jedis;
<span class="hljs-keyword">import</span> redis.clients.jedis.JedisPool;
<span class="hljs-keyword">import</span> com.fasterxml.jackson.databind.ObjectMapper;

<span class="hljs-keyword">import</span> java.util.HashMap;
<span class="hljs-keyword">import</span> java.util.List;
<span class="hljs-keyword">import</span> java.util.Map;

<span class="hljs-comment">/**
 * å•†å“ç¼“å­˜åŒæ­¥ç›‘å¬å™¨
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ProductCacheSyncListener</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">CanalEventListener</span> {

    <span class="hljs-keyword">private</span> JedisPool jedisPool;
    <span class="hljs-keyword">private</span> <span class="hljs-type">ObjectMapper</span> <span class="hljs-variable">objectMapper</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ObjectMapper</span>();

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">ProductCacheSyncListener</span><span class="hljs-params">(JedisPool jedisPool)</span> {
        <span class="hljs-built_in">this</span>.jedisPool = jedisPool;
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onInsert</span><span class="hljs-params">(String database, String table, List&lt;CanalEntry.Column&gt; data)</span> {
        <span class="hljs-keyword">if</span> (<span class="hljs-string">"product"</span>.equals(table)) {
            syncToRedis(data, <span class="hljs-string">"INSERT"</span>);
        }
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onUpdate</span><span class="hljs-params">(String database, String table,
                        List&lt;CanalEntry.Column&gt; before,
                        List&lt;CanalEntry.Column&gt; after)</span> {
        <span class="hljs-keyword">if</span> (<span class="hljs-string">"product"</span>.equals(table)) {
            syncToRedis(after, <span class="hljs-string">"UPDATE"</span>);
        }
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onDelete</span><span class="hljs-params">(String database, String table, List&lt;CanalEntry.Column&gt; data)</span> {
        <span class="hljs-keyword">if</span> (<span class="hljs-string">"product"</span>.equals(table)) {
            deleteFromRedis(data);
        }
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">syncToRedis</span><span class="hljs-params">(List&lt;CanalEntry.Column&gt; columns, String operation)</span> {
        <span class="hljs-keyword">try</span> (<span class="hljs-type">Jedis</span> <span class="hljs-variable">jedis</span> <span class="hljs-operator">=</span> jedisPool.getResource()) {
            Map&lt;String, String&gt; productMap = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
            <span class="hljs-type">String</span> <span class="hljs-variable">productId</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;

            <span class="hljs-keyword">for</span> (CanalEntry.Column column : columns) {
                <span class="hljs-keyword">if</span> (<span class="hljs-string">"id"</span>.equals(column.getName())) {
                    productId = column.getValue();
                }
                productMap.put(column.getName(), column.getValue());
            }

            <span class="hljs-keyword">if</span> (productId != <span class="hljs-literal">null</span>) {
                <span class="hljs-type">String</span> <span class="hljs-variable">key</span> <span class="hljs-operator">=</span> <span class="hljs-string">"product:"</span> + productId;
                <span class="hljs-type">String</span> <span class="hljs-variable">value</span> <span class="hljs-operator">=</span> objectMapper.writeValueAsString(productMap);
                jedis.setex(key, <span class="hljs-number">3600</span>, value);

                System.out.println(String.format(<span class="hljs-string">"ç¼“å­˜åŒæ­¥æˆåŠŸ [%s]: %s"</span>, operation, key));
            }
        } <span class="hljs-keyword">catch</span> (Exception e) {
            System.err.println(<span class="hljs-string">"åŒæ­¥åˆ°Rediså¤±è´¥: "</span> + e.getMessage());
        }
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">deleteFromRedis</span><span class="hljs-params">(List&lt;CanalEntry.Column&gt; columns)</span> {
        <span class="hljs-keyword">try</span> (<span class="hljs-type">Jedis</span> <span class="hljs-variable">jedis</span> <span class="hljs-operator">=</span> jedisPool.getResource()) {
            <span class="hljs-keyword">for</span> (CanalEntry.Column column : columns) {
                <span class="hljs-keyword">if</span> (<span class="hljs-string">"id"</span>.equals(column.getName())) {
                    <span class="hljs-type">String</span> <span class="hljs-variable">key</span> <span class="hljs-operator">=</span> <span class="hljs-string">"product:"</span> + column.getValue();
                    jedis.del(key);
                    System.out.println(<span class="hljs-string">"ç¼“å­˜åˆ é™¤æˆåŠŸ: "</span> + key);
                    <span class="hljs-keyword">break</span>;
                }
            }
        } <span class="hljs-keyword">catch</span> (Exception e) {
            System.err.println(<span class="hljs-string">"ä»Redisåˆ é™¤å¤±è´¥: "</span> + e.getMessage());
        }
    }
}
</code></pre>
<h4 data-id="heading-28">å¯åŠ¨åº”ç”¨</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> redis.clients.jedis.JedisPool;
<span class="hljs-keyword">import</span> redis.clients.jedis.JedisPoolConfig;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CacheSyncApplication</span> {

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-comment">// åˆ›å»ºRedisè¿æ¥æ± </span>
        <span class="hljs-type">JedisPoolConfig</span> <span class="hljs-variable">config</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JedisPoolConfig</span>();
        config.setMaxTotal(<span class="hljs-number">100</span>);
        config.setMaxIdle(<span class="hljs-number">20</span>);
        <span class="hljs-type">JedisPool</span> <span class="hljs-variable">jedisPool</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JedisPool</span>(config, <span class="hljs-string">"localhost"</span>, <span class="hljs-number">6379</span>);

        <span class="hljs-comment">// åˆ›å»ºCanalå®¢æˆ·ç«¯</span>
        <span class="hljs-type">CanalClient</span> <span class="hljs-variable">canalClient</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">CanalClient</span>(
            <span class="hljs-string">"localhost"</span>,
            <span class="hljs-number">11111</span>,
            <span class="hljs-string">"example"</span>,
            <span class="hljs-string">"test_db\\.product"</span>
        );

        <span class="hljs-comment">// è®¾ç½®ç›‘å¬å™¨</span>
        canalClient.setListener(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ProductCacheSyncListener</span>(jedisPool));

        <span class="hljs-comment">// å¯åŠ¨</span>
        canalClient.start();

        <span class="hljs-comment">// æ·»åŠ å…³é—­é’©å­</span>
        Runtime.getRuntime().addShutdownHook(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(() -&gt; {
            canalClient.stop();
            jedisPool.close();
        }));

        System.out.println(<span class="hljs-string">"å•†å“ç¼“å­˜åŒæ­¥æœåŠ¡å·²å¯åŠ¨..."</span>);
    }
}
</code></pre>
<h3 data-id="heading-29">ä¹ã€ä¸Spring Booté›†æˆ</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/342063f3313045d68525769f774ca482~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zuo5Lit6aOY6I2h55qE6K6w5b-G:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766634294&amp;x-signature=%2BaKSCBcpQiucLl5ydsi9F1OGvJA%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h4 data-id="heading-30">9.1 æ·»åŠ ä¾èµ–</h4>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.alibaba.otter<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>canal.client<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.1.6<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-data-redis<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span>
</code></pre>
<h4 data-id="heading-31">9.2 é…ç½®æ–‡ä»¶</h4>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># application.yml</span>
<span class="hljs-attr">spring:</span>
  <span class="hljs-attr">redis:</span>
    <span class="hljs-attr">host:</span> <span class="hljs-string">localhost</span>
    <span class="hljs-attr">port:</span> <span class="hljs-number">6379</span>
    <span class="hljs-attr">database:</span> <span class="hljs-number">0</span>

<span class="hljs-attr">canal:</span>
  <span class="hljs-attr">server:</span>
    <span class="hljs-attr">host:</span> <span class="hljs-string">localhost</span>
    <span class="hljs-attr">port:</span> <span class="hljs-number">11111</span>
  <span class="hljs-attr">destination:</span> <span class="hljs-string">example</span>
  <span class="hljs-attr">filter:</span> <span class="hljs-string">test_db\\..*</span>
  <span class="hljs-attr">batch-size:</span> <span class="hljs-number">100</span>
</code></pre>
<h4 data-id="heading-32">9.3 Canalé…ç½®ç±»</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.springframework.boot.context.properties.ConfigurationProperties;
<span class="hljs-keyword">import</span> org.springframework.stereotype.Component;

<span class="hljs-meta">@Component</span>
<span class="hljs-meta">@ConfigurationProperties(prefix = "canal")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CanalProperties</span> {

    <span class="hljs-keyword">private</span> <span class="hljs-type">Server</span> <span class="hljs-variable">server</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Server</span>();
    <span class="hljs-keyword">private</span> String destination;
    <span class="hljs-keyword">private</span> String filter;
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-variable">batchSize</span> <span class="hljs-operator">=</span> <span class="hljs-number">100</span>;

    <span class="hljs-comment">// Getters and Setters</span>

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Server</span> {
        <span class="hljs-keyword">private</span> String host;
        <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> port;

        <span class="hljs-comment">// Getters and Setters</span>
    }
}
</code></pre>
<h4 data-id="heading-33">9.4 Canalå¯åŠ¨å™¨</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> com.alibaba.otter.canal.client.CanalConnector;
<span class="hljs-keyword">import</span> com.alibaba.otter.canal.client.CanalConnectors;
<span class="hljs-keyword">import</span> com.alibaba.otter.canal.protocol.Message;
<span class="hljs-keyword">import</span> org.springframework.beans.factory.annotation.Autowired;
<span class="hljs-keyword">import</span> org.springframework.boot.CommandLineRunner;
<span class="hljs-keyword">import</span> org.springframework.stereotype.Component;

<span class="hljs-keyword">import</span> java.net.InetSocketAddress;
<span class="hljs-keyword">import</span> java.util.concurrent.TimeUnit;

<span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CanalStarter</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">CommandLineRunner</span> {

    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> CanalProperties canalProperties;

    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> CanalEventListener canalEventListener;

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">(String... args)</span> {
        <span class="hljs-type">CanalConnector</span> <span class="hljs-variable">connector</span> <span class="hljs-operator">=</span> CanalConnectors.newSingleConnector(
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">InetSocketAddress</span>(
                canalProperties.getServer().getHost(),
                canalProperties.getServer().getPort()
            ),
            canalProperties.getDestination(),
            <span class="hljs-string">""</span>,
            <span class="hljs-string">""</span>
        );

        connector.connect();
        connector.subscribe(canalProperties.getFilter());
        connector.rollback();

        <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(() -&gt; {
            <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) {
                <span class="hljs-keyword">try</span> {
                    <span class="hljs-type">Message</span> <span class="hljs-variable">message</span> <span class="hljs-operator">=</span> connector.getWithoutAck(canalProperties.getBatchSize());
                    <span class="hljs-type">long</span> <span class="hljs-variable">batchId</span> <span class="hljs-operator">=</span> message.getId();

                    <span class="hljs-keyword">if</span> (batchId != -<span class="hljs-number">1</span> &amp;&amp; !message.getEntries().isEmpty()) {
                        <span class="hljs-comment">// å¤„ç†æ¶ˆæ¯</span>
                        message.getEntries().forEach(entry -&gt; {
                            <span class="hljs-comment">// è°ƒç”¨ç›‘å¬å™¨å¤„ç†</span>
                        });
                        connector.ack(batchId);
                    } <span class="hljs-keyword">else</span> {
                        TimeUnit.SECONDS.sleep(<span class="hljs-number">1</span>);
                    }
                } <span class="hljs-keyword">catch</span> (Exception e) {
                    e.printStackTrace();
                    connector.rollback();
                }
            }
        }).start();
    }
}
</code></pre>
<h3 data-id="heading-34">åã€ç”Ÿäº§ç¯å¢ƒæœ€ä½³å®è·µ</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/13eca1eda7844339b875e12b3a92d559~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zuo5Lit6aOY6I2h55qE6K6w5b-G:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766634294&amp;x-signature=2BLYHduuGaDpBSrTWLAkBmyc53c%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h4 data-id="heading-35">1. é«˜å¯ç”¨éƒ¨ç½²</h4>
<p>ç”Ÿäº§ç¯å¢ƒå»ºè®®ä½¿ç”¨Canal HAæ¨¡å¼ï¼ŒåŸºäºZooKeeperå®ç°ï¼š</p>
<ul>
<li>éƒ¨ç½²å¤šä¸ªCanal Serverå®ä¾‹</li>
<li>ä½¿ç”¨ZooKeeperè¿›è¡Œåè°ƒå’Œfailover</li>
<li>å®¢æˆ·ç«¯è‡ªåŠ¨è¿æ¥åˆ°å¯ç”¨çš„Server</li>
</ul>
<h4 data-id="heading-36">2. æ€§èƒ½ä¼˜åŒ–</h4>
<p><strong>æ‰¹é‡æ¶ˆè´¹</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ä¸€æ¬¡è·å–å¤šæ¡æ¶ˆæ¯ï¼Œæé«˜ååé‡</span>
<span class="hljs-type">Message</span> <span class="hljs-variable">message</span> <span class="hljs-operator">=</span> connector.getWithoutAck(<span class="hljs-number">1000</span>);
</code></pre>
<p><strong>å¹¶è¡Œå¤„ç†</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">ExecutorService</span> <span class="hljs-variable">executor</span> <span class="hljs-operator">=</span> Executors.newFixedThreadPool(<span class="hljs-number">10</span>);
message.getEntries().forEach(entry -&gt; {
    executor.submit(() -&gt; processEntry(entry));
});
</code></pre>
<p><strong>åˆç†è®¾ç½®è¶…æ—¶æ—¶é—´</strong></p>
<pre><code class="hljs language-properties" lang="properties">canal.instance.network.receiveBufferSize = 16384
canal.instance.network.sendBufferSize = 16384
canal.instance.network.soTimeout = 30
</code></pre>
<h3 data-id="heading-37">åä¸€ã€æ€»ç»“</h3>
<p>Canalä½œä¸ºé˜¿é‡Œå¼€æºçš„MySQLå¢é‡æ•°æ®è®¢é˜…ç»„ä»¶ï¼Œå‡­å€Ÿå…¶é«˜æ€§èƒ½ã€ä½ä¾µå…¥ã€æ˜“æ‰©å±•çš„ç‰¹ç‚¹ï¼Œå·²ç»æˆä¸ºæ•°æ®åŒæ­¥é¢†åŸŸçš„æ ‡å‡†è§£å†³æ–¹æ¡ˆã€‚</p>
<p><strong>é€‚ç”¨åœºæ™¯ï¼š</strong></p>
<ul>
<li>æ•°æ®åº“å®æ—¶å¤‡ä»½</li>
<li>ç¼“å­˜å®æ—¶åŒæ­¥</li>
<li>æœç´¢å¼•æ“ç´¢å¼•æ„å»º</li>
<li>å®æ—¶æ•°æ®ä»“åº“</li>
<li>æ•°æ®å¼‚æ„è¿ç§»</li>
</ul>
<p>Canalè™½ç„¶å¼ºå¤§ï¼Œä½†å¹¶éé“¶å¼¹ã€‚åœ¨å®é™…ä½¿ç”¨ä¸­ï¼Œéœ€è¦æ ¹æ®ä¸šåŠ¡åœºæ™¯é€‰æ‹©åˆé€‚çš„binlogæ ¼å¼ã€éƒ¨ç½²æ¨¡å¼ã€æ¶ˆè´¹ç­–ç•¥ï¼Œå¹¶åšå¥½å¼‚å¸¸å¤„ç†å’Œç›‘æ§ï¼Œæ‰èƒ½çœŸæ­£å‘æŒ¥å…¶ä»·å€¼ã€‚</p>
<hr/></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Elasticsearchï¼šä½ æ˜¯è¯´ï¼Œç”¨äºæ··åˆæœç´¢ï¼ˆhybrid searchï¼‰]]></title>    <link>https://juejin.cn/post/7584729714340429843</link>    <guid>https://juejin.cn/post/7584729714340429843</guid>    <pubDate>2025-12-18T04:01:23.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7584729714340429843" data-draft-id="7584740835368665142" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Elasticsearchï¼šä½ æ˜¯è¯´ï¼Œç”¨äºæ··åˆæœç´¢ï¼ˆhybrid searchï¼‰"/> <meta itemprop="keywords" content="Elasticsearch"/> <meta itemprop="datePublished" content="2025-12-18T04:01:23.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Elasticsearch"/> <meta itemprop="url" content="https://juejin.cn/user/2612095360441448"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Elasticsearchï¼šä½ æ˜¯è¯´ï¼Œç”¨äºæ··åˆæœç´¢ï¼ˆhybrid searchï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2612095360441448/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Elasticsearch
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-18T04:01:23.000Z" title="Thu Dec 18 2025 04:01:23 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-18
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä½œè€…ï¼šæ¥è‡ª ElasticÂ <a href="https://link.juejin.cn?target=https%3A%2F%2Fdiscuss.elastic.co%2Fu%2Fkathleen_derusso" title="https://discuss.elastic.co/u/kathleen_derusso" target="_blank" ref="nofollow noopener noreferrer">Kathleen_DeRusso</a></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f848c7ae42d440bbb38636244b5feba3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRWxhc3RpY3NlYXJjaA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766635283&amp;x-signature=2Czmg77aZ%2FpcSf5m2V7CU8y4WZM%3D" alt="" loading="lazy"/></p>
<p>å¦‚æœä½ å°è¯•è¿‡æ­å»º <strong>æ··åˆæœç´¢ï¼ˆhybrid searchï¼‰</strong> ä½“éªŒï¼Œä½ å°±çŸ¥é“å­¦ä¹ æ›²çº¿å¯èƒ½å¾ˆé™¡å³­ã€‚å°¤å…¶æ˜¯å½“æ–‡æœ¬æœç´¢å’Œè¯­ä¹‰æœç´¢ç»“æœç»“åˆæ—¶ï¼Œæ¯ç§æœç´¢è¿”å›çš„å¾—åˆ†å¯èƒ½å·®å¼‚å¾ˆå¤§ï¼Œå¾ˆéš¾çŸ¥é“ä»å“ªé‡Œå¼€å§‹ï¼Œæ‰‹åŠ¨è°ƒä¼˜ç»“æœä¹Ÿå®¹æ˜“å‡ºé”™ã€‚å¥½æ¶ˆæ¯æ˜¯ï¼Œæˆ‘ä»¬è®©è¿™ä¸ªè¿‡ç¨‹å˜å¾—ç®€å•å¾—å¤šã€‚</p>
<p>æœ¬æ–‡å°†ä¾§é‡äºå¾ˆå¤šé»˜è®¤è®¾ç½®ï¼Œä½†å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œæˆ‘ä»¬ä¹Ÿå†…ç½®äº†å¤§é‡è‡ªå®šä¹‰åŠŸèƒ½ï¼Œå› æ­¤æ—¢æ”¯æŒç®€å•çš„ â€œé¡ºç•…è·¯å¾„â€ ç”¨ä¾‹ï¼Œä¹Ÿæ”¯æŒå¼ºå¤§ã€å¯å®šåˆ¶çš„ä¸“å®¶ç”¨ä¾‹ã€‚</p>
<h2 data-id="heading-0">ç´¢å¼•ä½ çš„æ•°æ®</h2>
<p>é¦–å…ˆï¼Œä» <strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.elastic.co%2Fdocs%2Freference%2Felasticsearch%2Fmapping-reference%2Fsemantic-text" title="https://www.elastic.co/docs/reference/elasticsearch/mapping-reference/semantic-text" target="_blank" ref="nofollow noopener noreferrer">semantic_text</a></strong> å­—æ®µå¼€å§‹ã€‚Semantic text è®¾è®¡å¾—åƒä¸€ä¸ªæ™®é€šæ–‡æœ¬å­—æ®µä¸€æ ·ä½¿ç”¨ï¼Œä½†å®ƒä¼šé€æ˜åœ°å¤„ç†åˆ†å—ã€æ¨ç†å’Œè¯­ä¹‰æœç´¢ã€‚è‡³å°‘ï¼Œä½ åªéœ€è¦ä¸ºä½ çš„å­—æ®µåˆ›å»ºæ˜ å°„ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown">`

<span class="hljs-bullet">1.</span>  PUT my-index
<span class="hljs-bullet">2.</span>  {
<span class="hljs-bullet">3.</span>    "mappings": {
<span class="hljs-bullet">4.</span>      "properties": {
<span class="hljs-bullet">5.</span>        "semantic<span class="hljs-emphasis">_title": {
6.          "type": "semantic_</span>text"
<span class="hljs-bullet">7.</span>        }
<span class="hljs-bullet">8.</span>      }
<span class="hljs-bullet">9.</span>    }
<span class="hljs-bullet">10.</span>  }

`AIå†™ä»£ç ![](<span class="hljs-link">https://csdnimg.cn/release/blogv2/dist/pc/img/runCode/icon-arrowwhite.png</span>)
</code></pre>
<p>è¿™ä¸ªæ˜ å°„ä¼šåˆ›å»ºé»˜è®¤è®¾ç½®ï¼Œä¾‹å¦‚é»˜è®¤ä½¿ç”¨æˆ‘ä»¬å†…éƒ¨çš„ ELSER æ¨¡å‹è¿›è¡Œæ¨ç†ã€‚æ— éœ€é…ç½®ç´¢å¼•ç®¡é“ï¼å¦‚æœä½ æ˜¯ç¬¬ä¸€æ¬¡å°è¯• <strong>semantic_text</strong>ï¼Œè¿™ä¸ª<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.elastic.co%2Fdocs%2Fsolutions%2Fsearch%2Fsemantic-search%2Fsemantic-search-semantic-text" title="https://www.elastic.co/docs/solutions/search/semantic-search/semantic-search-semantic-text" target="_blank" ref="nofollow noopener noreferrer">æ•™ç¨‹</a>æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„èµ·ç‚¹ã€‚</p>
<p>ä¸ºäº†ç¡®ä¿ <strong>semantic_text</strong> åƒæ™®é€šæ–‡æœ¬å­—æ®µä¸€æ ·å·¥ä½œï¼Œæˆ‘ä»¬å¢åŠ äº†<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.elastic.co%2Fsearch-labs%2Fblog%2Fsemantic-search-match-knn-sparse-vector" title="https://www.elastic.co/search-labs/blog/semantic-search-match-knn-sparse-vector" target="_blank" ref="nofollow noopener noreferrer">å¯¹åœ¨ semantic_text å­—æ®µä¸Šä½¿ç”¨ match æŸ¥è¯¢çš„æ”¯æŒ</a>ï¼Œè®©ä½ å¯ä»¥é€æ˜åœ°è¿›è¡Œè¯­ä¹‰æœç´¢ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">`

1.  POST my-index/_search
2.  {
3.    <span class="hljs-string">"query"</span>: {
4.      <span class="hljs-string">"match"</span>: {
5.        <span class="hljs-string">"semantic_title"</span>: <span class="hljs-string">"What is semantic search?"</span>
6.      }
7.    }
8.  }

`AIå†™ä»£ç 
</code></pre>
<h2 data-id="heading-1">ä½¿ç”¨æ£€ç´¢å™¨è¿›è¡Œæ··åˆæœç´¢</h2>
<p>æˆ‘ä»¬åœ¨å¾ˆå¤šæœç´¢ç”¨ä¾‹ä¸­å‘ç°ï¼Œ<strong>match</strong> æŸ¥è¯¢åŠå…¶ç›¸å…³æƒé‡å·²ç»èƒ½å¾ˆå¥½åœ°æ»¡è¶³éœ€æ±‚ã€‚è™½ç„¶æ£€ç´¢å™¨ï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.elastic.co%2Fdocs%2Freference%2Felasticsearch%2Frest-apis%2Fretrievers" title="https://www.elastic.co/docs/reference/elasticsearch/rest-apis/retrievers" target="_blank" ref="nofollow noopener noreferrer">retrievers</a>ï¼‰å·²ç»å­˜åœ¨ä¸€æ®µæ—¶é—´ï¼Œæä¾›äº†åƒ <strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.elastic.co%2Fdocs%2Freference%2Felasticsearch%2Frest-apis%2Freciprocal-rank-fusion" title="https://www.elastic.co/docs/reference/elasticsearch/rest-apis/reciprocal-rank-fusion" target="_blank" ref="nofollow noopener noreferrer">RRF</a></strong> è¿™æ ·çš„åŠŸèƒ½ï¼Œæˆ‘ä»¬ç®€åŒ–äº†è¯­æ³•ï¼Œä½¿å…¶å¯ä»¥æ— ç¼åœ°ä¸ä»»æ„ç»„åˆçš„ <strong>text</strong> å’Œ <strong>semantic_text</strong> å­—æ®µä¸€èµ·ä½¿ç”¨ï¼Œå¹¶è‡ªåŠ¨å®Œæˆå¾—åˆ†ç»„åˆå’Œå½’ä¸€åŒ–ã€‚</p>
<p>ä½ å¯ä»¥é˜…è¯»è¿™ç¯‡<a href="https://link.juejin.cn?target=https%3A%2F%2Felasticstack.blog.csdn.net%2Farticle%2Fdetails%2F155335155" title="https://elasticstack.blog.csdn.net/article/details/155335155" target="_blank" ref="nofollow noopener noreferrer">åšå®¢</a>ï¼Œäº†è§£è¿™ç§<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.elastic.co%2Fdocs%2Freference%2Felasticsearch%2Frest-apis%2Fretrievers%2Fretrievers-examples%23retrievers-examples-rrf-multi-field-query-format" title="https://www.elastic.co/docs/reference/elasticsearch/rest-apis/retrievers/retrievers-examples#retrievers-examples-rrf-multi-field-query-format" target="_blank" ref="nofollow noopener noreferrer">è¯­æ³•ç³–</a>çš„ç”±æ¥ã€‚ä¸‹é¢æ˜¯ä½¿ç”¨ <strong>RRF</strong> è¿›è¡Œæ··åˆæœç´¢çš„ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">`

1.  GET my-index/_search
2.  {
3.    <span class="hljs-string">"retriever"</span>: {
4.      <span class="hljs-string">"rrf"</span>: {
5.        <span class="hljs-string">"fields"</span>: [<span class="hljs-string">"title"</span>, <span class="hljs-string">"semantic_title"</span>],
6.        <span class="hljs-string">"query"</span>: <span class="hljs-string">"What is semantic search?"</span>
7.      }
8.    }
9.  }

`AIå†™ä»£ç 
</code></pre>
<p>ä»¥åŠä½¿ç”¨ <strong>linear retriever</strong> çš„ç±»ä¼¼ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">`

1.  GET my-index/_search{
2.    <span class="hljs-string">"retriever"</span>: {
3.      <span class="hljs-string">"linear"</span>: {
4.        <span class="hljs-string">"fields"</span>: [<span class="hljs-string">"title"</span>, <span class="hljs-string">"semantic_title^2"</span>],
5.        <span class="hljs-string">"query"</span>: <span class="hljs-string">"What is semantic search?"</span>,
6.        â€œnormalizerâ€: â€œl2_normâ€
7.      }
8.    }
9.  }

`AIå†™ä»£ç 
</code></pre>
<p>è¿™äº›å¯ä»¥ç›´æ¥æ¥å…¥åƒ <strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.elastic.co%2Fdocs%2Freference%2Felasticsearch%2Frest-apis%2Fretrievers%2Ftext-similarity-reranker-retriever" title="https://www.elastic.co/docs/reference/elasticsearch/rest-apis/retrievers/text-similarity-reranker-retriever" target="_blank" ref="nofollow noopener noreferrer">text_similarity_reranker retriever</a></strong> è¿™æ ·çš„æ£€ç´¢å™¨ï¼Œä»è€Œå¯¹æ··åˆæœç´¢ç»“æœè¿›è¡Œè¯­ä¹‰é‡æ’åºã€‚å¾ˆç®€å•ï¼Œå¯¹å§ï¼Ÿ</p>
<h2 data-id="heading-2">ä½¿ç”¨ ES|QL è¿›è¡Œæ··åˆæœç´¢</h2>
<p>è¯´åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬æ­£åœ¨å¼€å‘çš„ä¸€äº›æœ€ä»¤äººå…´å¥‹çš„åŠŸèƒ½ï¼Œæ˜¯ä½¿ç”¨æˆ‘ä»¬æ–°çš„ç®¡é“æŸ¥è¯¢è¯­è¨€ <strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.elastic.co%2Fdocs%2Freference%2Fquery-languages%2Fesql" title="https://www.elastic.co/docs/reference/query-languages/esql" target="_blank" ref="nofollow noopener noreferrer">ES|QL</a></strong>ï¼Œå®ƒå¯¹äºæ··åˆæœç´¢ç”¨ä¾‹éå¸¸å¼ºå¤§ã€‚å¦‚æœä½ å‚åŠ è¿‡ä»Šå¹´çš„ <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.elastic.co%2Fevents%2Felasticon" title="https://www.elastic.co/events/elasticon" target="_blank" ref="nofollow noopener noreferrer">Elastic{ON}</a> æ´»åŠ¨ï¼Œè¿™ä¸ªé¢„è§ˆå¯èƒ½çœ‹èµ·æ¥æœ‰ç‚¹ç†Ÿæ‚‰ã€‚</p>
<p>è®©æˆ‘ä»¬ä» <strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.elastic.co%2Fdocs%2Freference%2Fquery-languages%2Fesql%2Ffunctions-operators%2Fsearch-functions" title="https://www.elastic.co/docs/reference/query-languages/esql/functions-operators/search-functions" target="_blank" ref="nofollow noopener noreferrer">match</a></strong> å‡½æ•°å¼€å§‹ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ç›´æ¥å¼•ç”¨ <strong>match</strong> æ¥è¡¨ç¤ºï¼š</p>
<pre><code class="hljs language-sql" lang="sql">`

<span class="hljs-number">1.</span>  <span class="hljs-keyword">FROM</span> my<span class="hljs-operator">-</span>index METADATA _score
<span class="hljs-number">2.</span>  <span class="hljs-operator">|</span> <span class="hljs-keyword">WHERE</span> <span class="hljs-keyword">match</span>(title, "What is semantic search?")
<span class="hljs-number">3.</span>  <span class="hljs-operator">|</span> SORT _score <span class="hljs-keyword">DESC</span>

`AIå†™ä»£ç 
</code></pre>
<p>æˆ–è€…é€šè¿‡ç®€å†™è¯­æ³•ï¼š</p>
<pre><code class="hljs language-sql" lang="sql">`

<span class="hljs-number">1.</span>  <span class="hljs-keyword">FROM</span> my<span class="hljs-operator">-</span>index METADATA _score
<span class="hljs-number">2.</span>  <span class="hljs-operator">|</span> <span class="hljs-keyword">WHERE</span> title:"What is semantic search?"
<span class="hljs-number">3.</span>  <span class="hljs-operator">|</span> SORT _score <span class="hljs-keyword">DESC</span>

`AIå†™ä»£ç 
</code></pre>
<p>æœ€æ£’çš„æ˜¯ï¼Œå› ä¸ºæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯ <strong>match</strong>ï¼Œå°±åƒåœ¨ DSL ä¸­ä¸€æ ·ï¼Œ<strong>semantic_text</strong> å¼€ç®±å³ç”¨ï¼</p>
<p>ç°åœ¨ï¼Œå½“ä½ æƒ³ä½¿ç”¨ <strong>semantic_text</strong> ç»„åˆç»“æœæ—¶ï¼Œå¯ä»¥ä½¿ç”¨ <strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.elastic.co%2Fdocs%2Freference%2Fquery-languages%2Fesql%2Fcommands%2Ffork" title="https://www.elastic.co/docs/reference/query-languages/esql/commands/fork" target="_blank" ref="nofollow noopener noreferrer">FORK</a></strong> å‘½ä»¤ï¼Œåœ¨ä¸åŒçš„åˆ†æ”¯ä¸­æ‰§è¡Œæ¯ä¸ª match æŸ¥è¯¢ï¼Œå¹¶å°†å®ƒä»¬è¿”å›åœ¨åŒä¸€ä¸ªç»“æœä¸­ï¼š</p>
<pre><code class="hljs language-sql" lang="sql">`

<span class="hljs-number">1.</span>  <span class="hljs-keyword">FROM</span> my<span class="hljs-operator">-</span>index METADATA _score
<span class="hljs-number">2.</span>  <span class="hljs-operator">|</span> FORK 
<span class="hljs-number">3.</span>    (<span class="hljs-keyword">WHERE</span> semantic_title: "What is semantic search?" <span class="hljs-operator">|</span> SORT _score <span class="hljs-keyword">DESC</span>)
<span class="hljs-number">4.</span>    (<span class="hljs-keyword">WHERE</span> title:"What is semantic search?" <span class="hljs-operator">|</span> SORT _score <span class="hljs-keyword">DESC</span>)

`AIå†™ä»£ç 
</code></pre>
<p>ç„¶åï¼Œä½ å¯ä»¥ä½¿ç”¨ <strong>FUSE</strong> å‘½ä»¤ï¼Œä½¿ç”¨ <strong>RRF</strong> ç®—æ³•å°†è¿™äº›ç»“æœåˆå¹¶ï¼š</p>
<pre><code class="hljs language-sql" lang="sql">`

<span class="hljs-number">1.</span>  <span class="hljs-keyword">FROM</span> my<span class="hljs-operator">-</span>index METADATA _score
<span class="hljs-number">2.</span>  <span class="hljs-operator">|</span> FORK 
<span class="hljs-number">3.</span>    (<span class="hljs-keyword">WHERE</span> semantic_title: "What is semantic search?" <span class="hljs-operator">|</span> SORT _score <span class="hljs-keyword">DESC</span>)
<span class="hljs-number">4.</span>    (<span class="hljs-keyword">WHERE</span> title:"What is semantic search?" <span class="hljs-operator">|</span> SORT _score <span class="hljs-keyword">DESC</span>)
<span class="hljs-number">5.</span>  <span class="hljs-operator">|</span> FUSE
<span class="hljs-number">6.</span>  <span class="hljs-operator">|</span> SORT _score <span class="hljs-keyword">DESC</span>

`AIå†™ä»£ç 
</code></pre>
<p>ä½ ä¹Ÿå¯ä»¥å°†å…¶åº”ç”¨åˆ°å…¶ä»–ç”¨ä¾‹ï¼Œä¾‹å¦‚é‡æ’åºï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.elastic.co%2Fdocs%2Freference%2Fquery-languages%2Fesql%2Fcommands%2Frerank" title="https://www.elastic.co/docs/reference/query-languages/esql/commands/rerank" target="_blank" ref="nofollow noopener noreferrer">rerank</a>ï¼‰å’Œè¡¥å…¨ï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.elastic.co%2Fdocs%2Freference%2Fquery-languages%2Fesql%2Fcommands%2Fcompletion" title="https://www.elastic.co/docs/reference/query-languages/esql/commands/completion" target="_blank" ref="nofollow noopener noreferrer">completion</a>ï¼‰ã€‚</p>
<p>æœ€åï¼Œæœ‰æ—¶ä½ çš„ç”¨ä¾‹å¯èƒ½æ›´é€‚åˆä»…æ‰§è¡Œè¯æ±‡æœç´¢ï¼Œè€Œä¸æ˜¯è¯­ä¹‰æœç´¢ã€‚æˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨æŸ¥è¯¢æ—¶ä½¿ç”¨ <strong>fork</strong> æ¥å†³å®šæ‰§è¡Œè¯æ±‡æœç´¢è¿˜æ˜¯è¯­ä¹‰æœç´¢ â€”â€” ä¾‹å¦‚æ ¹æ®æŸ¥è¯¢ä¸­çš„è¯æ•°ï¼Œè¾ƒçŸ­çš„æŸ¥è¯¢åœ¨æŸäº›ç”¨ä¾‹ä¸­å¯èƒ½ä»è¯­ä¹‰æœç´¢ä¸­è·ç›Šä¸å¤§ã€‚</p>
<pre><code class="hljs language-sql" lang="sql">`

<span class="hljs-number">1.</span>  <span class="hljs-keyword">FROM</span> <span class="hljs-keyword">search</span><span class="hljs-operator">-</span>index METADATA _score
<span class="hljs-number">2.</span>  <span class="hljs-operator">|</span> EVAL lexical <span class="hljs-operator">=</span> MV_COUNT(SPLIT(?query, " ")) <span class="hljs-operator">&lt;=</span> <span class="hljs-number">3</span>
<span class="hljs-number">3.</span>  <span class="hljs-operator">|</span> FORK ( <span class="hljs-keyword">WHERE</span> lexical <span class="hljs-operator">|</span> <span class="hljs-keyword">WHERE</span> title:?query )
<span class="hljs-number">4.</span>         ( <span class="hljs-keyword">WHERE</span> <span class="hljs-keyword">NOT</span> lexical <span class="hljs-operator">|</span> <span class="hljs-keyword">WHERE</span> semantic_title:?query )
<span class="hljs-number">5.</span>  <span class="hljs-operator">|</span> SORT _score <span class="hljs-keyword">DESC</span>

`AIå†™ä»£ç 
</code></pre>
<p>è¿™åªæ˜¯æˆ‘ä»¬èƒ½åšçš„ä¸€ä¸ªç®€çŸ­ç¤ºä¾‹ï¼Œä½†å¦‚æœä½ æ·±å…¥é˜…è¯»æˆ‘ä»¬çš„æ–‡æ¡£ï¼Œä½ ä¼šå‘ç°è¿™äº›åŠŸèƒ½åŒæ ·éå¸¸å¼ºå¤§ä¸”å¯å®šåˆ¶ï¼è¯•ä¸€è¯•å§ï¼Œæˆ‘ä»¬æœŸå¾…å¬åˆ°ä½ çš„åé¦ˆï¼</p>
<p>åŸæ–‡ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fdiscuss.elastic.co%2Ft%2Fdec-5th-2025-en-you-know-for-hybrid-search%2F383218" title="https://discuss.elastic.co/t/dec-5th-2025-en-you-know-for-hybrid-search/383218" target="_blank" ref="nofollow noopener noreferrer">discuss.elastic.co/t/dec-5th-2â€¦</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Day32 | Java Streamæµå¼ç¼–ç¨‹è¯¦è§£]]></title>    <link>https://juejin.cn/post/7584758215700365350</link>    <guid>https://juejin.cn/post/7584758215700365350</guid>    <pubDate>2025-12-18T04:48:13.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7584758215700365350" data-draft-id="7584742635502452763" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Day32 | Java Streamæµå¼ç¼–ç¨‹è¯¦è§£"/> <meta itemprop="keywords" content="åç«¯,Java,Java EE"/> <meta itemprop="datePublished" content="2025-12-18T04:48:13.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ‡’æƒ°èœ—ç‰›"/> <meta itemprop="url" content="https://juejin.cn/user/615342556327752"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Day32 | Java Streamæµå¼ç¼–ç¨‹è¯¦è§£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/615342556327752/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ‡’æƒ°èœ—ç‰›
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-18T04:48:13.000Z" title="Thu Dec 18 2025 04:48:13 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-18
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨Java8ä¹‹å‰ï¼Œå¦‚æœæˆ‘ä»¬è¦å¤„ç†é›†åˆæ•°æ®é€šä¸€èˆ¬éƒ½æ˜¯ä½¿ç”¨forå¾ªç¯ã€whileå¾ªç¯å’Œè¿­ä»£å™¨ã€‚</p>
<p>è¿™ç§æ–¹å¼æˆ‘ä»¬å¯ä»¥å«ä»–å‘½ä»¤å¼ç¼–ç¨‹ï¼Œè¦æ˜ç¡®çš„å‘Šè¯‰ç¨‹åºæ€ä¹ˆåšï¼Œæ¯ä¸€æ­¥éƒ½è¦è‡ªå·±å®ç°ã€‚</p>
<p>è¿™æ˜¯Java8ä¹‹å‰çš„ä»£ç ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.lazy.snail.day32;

<span class="hljs-keyword">import</span> java.util.ArrayList;
<span class="hljs-keyword">import</span> java.util.Collections;
<span class="hljs-keyword">import</span> java.util.Comparator;
<span class="hljs-keyword">import</span> java.util.List;

<span class="hljs-comment">/**
 * <span class="hljs-doctag">@ClassName</span> Day32Demo
 * <span class="hljs-doctag">@Description</span> TODO
 * <span class="hljs-doctag">@Author</span> lazysnail
 * <span class="hljs-doctag">@Date</span> 2025/7/14 11:30
 * <span class="hljs-doctag">@Version</span> 1.0
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Day32Demo</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        List&lt;Transaction&gt; transactions = getTransactions();
        List&lt;Transaction&gt; filteredTransactions = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
        <span class="hljs-keyword">for</span> (Transaction t : transactions) {
            <span class="hljs-keyword">if</span> (t.getValue() &gt; <span class="hljs-number">500</span>) {
                filteredTransactions.add(t);
            }
        }
        Collections.sort(filteredTransactions, <span class="hljs-keyword">new</span> <span class="hljs-title class_">Comparator</span>&lt;Transaction&gt;() {
            <span class="hljs-meta">@Override</span>
            <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">compare</span><span class="hljs-params">(Transaction t1, Transaction t2)</span> {
                <span class="hljs-keyword">return</span> Double.compare(t2.getValue(), t1.getValue());
            }
        });
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> List&lt;Transaction&gt; <span class="hljs-title function_">getTransactions</span><span class="hljs-params">()</span> {
        List&lt;Transaction&gt; transactions = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
        transactions.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Transaction</span>(<span class="hljs-number">450.0</span>));
        transactions.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Transaction</span>(<span class="hljs-number">1200.50</span>));
        transactions.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Transaction</span>(<span class="hljs-number">300.0</span>));
        transactions.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Transaction</span>(<span class="hljs-number">890.75</span>));
        transactions.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Transaction</span>(<span class="hljs-number">500.0</span>));
        transactions.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Transaction</span>(<span class="hljs-number">620.0</span>));
        <span class="hljs-keyword">return</span> transactions;
    }

}
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Transaction</span> {
    <span class="hljs-type">double</span> value;

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Transaction</span><span class="hljs-params">(<span class="hljs-type">double</span> value)</span> {
        <span class="hljs-built_in">this</span>.value = value;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-type">double</span> <span class="hljs-title function_">getValue</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> value;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setValue</span><span class="hljs-params">(<span class="hljs-type">double</span> value)</span> {
        <span class="hljs-built_in">this</span>.value = value;
    }
}
</code></pre>
<p>ä»äº¤æ˜“æ•°æ®åˆ—è¡¨ä¸­ç­›é€‰å‡ºä»·æ ¼å¤§äº500çš„äº¤æ˜“ï¼Œå¹¶æŒ‰é‡‘é¢æ’åºã€‚</p>
<p>ç­›é€‰å’Œæ’åºçš„é€»è¾‘éƒ½è¦ä¸€æ­¥æ­¥çš„å†™å‡ºæ¥ã€‚</p>
<pre><code class="hljs language-java" lang="java">List&lt;Transaction&gt; sortedTransactions = transactions.stream()
    .filter(t -&gt; t.getValue() &gt; <span class="hljs-number">500</span>)
    .sorted(Comparator.comparing(Transaction::getValue).reversed())
    .toList();
</code></pre>
<p>ç°åœ¨ç”¨Streamæ–¹å¼ç›´æ¥è¿‡æ»¤æ’åºã€‚</p>
<p>Streamç”¨èµ·æ¥å°±åƒå¤„ç†æ•°æ®çš„å·¥å‚æµæ°´çº¿ï¼Œæ•°æ®åœ¨æµæ°´çº¿ä¸Šç»è¿‡ä¸€é“é“å·¥åºï¼ˆè¿‡æ»¤ã€æ˜ å°„ã€æ’åºç­‰ï¼‰ï¼Œæœ€ç»ˆäº§å‡ºæˆ‘ä»¬æƒ³è¦çš„ç»“æœã€‚</p>
<h2 data-id="heading-0">ä¸€ã€ä»€ä¹ˆæ˜¯Streamï¼Ÿ</h2>
<p>é¦–å…ˆï¼Œè¦æ˜ç¡®Streamä¸æ˜¯ä¸€ç§æ•°æ®ç»“æ„ã€‚å®ƒæ›´åƒä¸€ä¸ªé«˜çº§è¿­ä»£å™¨ï¼Œä»ä¸€ä¸ªæ•°æ®æºï¼ˆå¦‚é›†åˆã€æ•°ç»„ï¼‰è·å–å…ƒç´ ï¼Œå¹¶æ”¯æŒå¤æ‚çš„èšåˆæ“ä½œã€‚</p>
<p>ä»–æœ‰å‡ ä¸ªæ ¸å¿ƒçš„ç‰¹æ€§ï¼š</p>
<p>ä¸å­˜å‚¨æ•°æ®ï¼šæµæœ¬èº«ä¸å­˜å‚¨ä»»ä½•å…ƒç´ ã€‚å…ƒç´ å­˜å‚¨åœ¨åº•å±‚çš„æ•°æ®æºé‡Œã€‚</p>
<p>å‡½æ•°å¼æœ¬è´¨ï¼šå¯¹æµçš„æ“ä½œä¼šç”Ÿæˆä¸€ä¸ªæ–°çš„æµï¼Œè€Œä¸ä¼šä¿®æ”¹å®ƒåŸå§‹æ•°æ®æºã€‚æ¯”å¦‚filteræ“ä½œä¼šç”Ÿæˆä¸€ä¸ªåªåŒ…å«ç¬¦åˆæ¡ä»¶å…ƒç´ çš„æ–°æµã€‚</p>
<p>æƒ°æ€§æ±‚å€¼ï¼šæµçš„ä¸­é—´æ“ä½œï¼ˆæ¯”å¦‚å¦‚filter, mapï¼‰å¹¶ä¸ä¼šé©¬ä¸Šæ‰§è¡Œã€‚å®ƒä»¬åªæœ‰åœ¨é‡åˆ°ç»ˆç«¯æ“ä½œï¼ˆåƒforEach, collectï¼‰çš„æ—¶å€™ï¼Œæ‰ä¼šä¸€æ¬¡æ€§åœ°ã€ä»å¤´åˆ°å°¾åœ°æ‰§è¡Œæ•´ä¸ªæ“ä½œé“¾ã€‚</p>
<p>åªèƒ½æ¶ˆè´¹ä¸€æ¬¡ï¼šä¸€ä¸ªæµä¸€æ—¦è¢«ç»ˆç«¯æ“ä½œæ¶ˆè´¹è¿‡ï¼Œå°±ä¸èƒ½å†è¢«ä½¿ç”¨ã€‚å¦‚æœéœ€è¦å†æ¬¡å¤„ç†ï¼Œå¿…é¡»ä»æ•°æ®æºé‡æ–°åˆ›å»ºä¸€ä¸ªæ–°çš„æµã€‚</p>
<p>æ¯”å¦‚ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.lazy.snail.day32;

<span class="hljs-keyword">import</span> java.util.List;
<span class="hljs-keyword">import</span> java.util.stream.Stream;

<span class="hljs-comment">/**
 * <span class="hljs-doctag">@ClassName</span> Day32Demo2
 * <span class="hljs-doctag">@Description</span> TODO
 * <span class="hljs-doctag">@Author</span> lazysnail
 * <span class="hljs-doctag">@Date</span> 2025/7/14 14:02
 * <span class="hljs-doctag">@Version</span> 1.0
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Day32Demo2</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        List&lt;String&gt; list = List.of(<span class="hljs-string">"æ‡’æƒ°èœ—ç‰›"</span>, <span class="hljs-string">"lazysnail"</span>, <span class="hljs-string">"lazysnailstudio.com"</span>);
        Stream&lt;String&gt; stream = list.stream();
        stream.forEach(System.out::println);
        stream.forEach(System.out::println);
    }
}
</code></pre>
<p>å†æ¬¡æ¶ˆè´¹çš„æ—¶å€™å°±æŠ›å‡ºå¼‚å¸¸äº†ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b63d1309c2134215965bbd9095ea6939~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oeS5oOw6JyX54mb:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766638092&amp;x-signature=c97RrCntr6M54gEwXDqyAusWI6o%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-1">äºŒã€Streamçš„ç”Ÿå‘½å‘¨æœŸ</h2>
<p>ä¸€ä¸ªå®Œæ•´çš„Streamæ“ä½œé€šå¸¸åˆ†ä¸ºä¸‰ä¸ªæ­¥éª¤ï¼šåˆ›å»º -&gt; ä¸­é—´æ“ä½œ -&gt; ç»ˆç«¯æ“ä½œã€‚</p>
<h3 data-id="heading-2">2.1åˆ›å»ºæµ</h3>
<p>å¯ä»¥ä»å¤šç§æ•°æ®æºåˆ›å»ºæµï¼š</p>
<p>ä»é›†åˆåˆ›å»º: list.stream(), set.parallelStream() (å¹¶è¡Œæµ)</p>
<p>ä»æ•°ç»„åˆ›å»º: Arrays.stream(array)</p>
<p>ç”±å€¼åˆ›å»º: Stream.of("a", "b", "c")</p>
<p>ç”±å‡½æ•°åˆ›å»ºï¼ˆæ— é™æµï¼‰:</p>
<p>Stream.iterate(T seed, UnaryOperator&lt;T&gt; f): ä»ä¸€ä¸ªç§å­å€¼å¼€å§‹ï¼Œä¸æ–­åº”ç”¨å‡½æ•°fã€‚</p>
<p>Stream.generate(Supplier&lt;T&gt; s): ä¸æ–­è°ƒç”¨get()æ–¹æ³•æ¥ç”Ÿæˆå…ƒç´ ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.lazy.snail.day32;

<span class="hljs-keyword">import</span> java.util.Arrays;
<span class="hljs-keyword">import</span> java.util.List;
<span class="hljs-keyword">import</span> java.util.stream.Stream;

<span class="hljs-comment">/**
 * <span class="hljs-doctag">@ClassName</span> Day32Demo3
 * <span class="hljs-doctag">@Description</span> TODO
 * <span class="hljs-doctag">@Author</span> lazysnail
 * <span class="hljs-doctag">@Date</span> 2025/7/14 14:08
 * <span class="hljs-doctag">@Version</span> 1.0
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Day32Demo3</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-comment">// ä»é›†åˆåˆ›å»º</span>
        List&lt;String&gt; names = List.of(<span class="hljs-string">"æ‡’æƒ°èœ—ç‰›"</span>, <span class="hljs-string">"lazysnail"</span>);
        Stream&lt;String&gt; nameStream = names.stream();

        <span class="hljs-comment">// ä»æ•°ç»„åˆ›å»º</span>
        String[] array = {<span class="hljs-string">"æ‡’æƒ°èœ—ç‰›"</span>, <span class="hljs-string">"lazysnail"</span>, <span class="hljs-string">"lazysnailstudio.com"</span>};
        Stream&lt;String&gt; arrayStream = Arrays.stream(array);

        <span class="hljs-comment">// ç”±å€¼åˆ›å»º</span>
        Stream&lt;Integer&gt; numberStream = Stream.of(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>);

        <span class="hljs-comment">// iterate åˆ›å»ºæ— é™æµ: 0, 2, 4, 6... (éœ€è¦é…åˆlimitä½¿ç”¨)</span>
        Stream&lt;Integer&gt; infiniteStream = Stream.iterate(<span class="hljs-number">0</span>, n -&gt; n + <span class="hljs-number">2</span>);
    }
}
</code></pre>
<h3 data-id="heading-3">2.2ä¸­é—´æ“ä½œ</h3>
<p>ä¸­é—´æ“ä½œæ˜¯æµæ°´çº¿ä¸Šçš„åŠ å·¥ç«™ï¼Œæ¯ä¸ªæ“ä½œéƒ½ä¼šè¿”å›ä¸€ä¸ªæ–°çš„æµï¼Œå¯ä»¥é“¾å¼è°ƒç”¨ã€‚</p>
<p>å¸¸è§çš„ä¸­é—´æ“ä½œï¼š</p>
<p>è¿™ä¸ªä½œä¸ºè¢«æ“ä½œæ•°æ®æº</p>
<pre><code class="hljs language-java" lang="java">List&lt;Integer&gt; numbers = List.of(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">2</span>, <span class="hljs-number">4</span>, <span class="hljs-number">6</span>, <span class="hljs-number">8</span>);
</code></pre>
<p>ç­›é€‰ä¸åˆ‡ç‰‡</p>
<p>filter(Predicate&lt;T&gt; p): è¿‡æ»¤å‡ºæ»¡è¶³æ¡ä»¶çš„å…ƒç´ ã€‚</p>
<p>ç­›é€‰å‡ºæ‰€æœ‰çš„å¶æ•°</p>
<pre><code class="hljs language-java" lang="java">List&lt;Integer&gt; evenNumbers = numbers.stream()
                .filter(n -&gt; n % <span class="hljs-number">2</span> == <span class="hljs-number">0</span>)
                .toList();
</code></pre>
<p>distinct(): å»é™¤é‡å¤å…ƒç´ ï¼ˆåŸºäºequals()æ–¹æ³•ï¼‰ã€‚</p>
<p>å–å‡ºé‡å¤æ•°å­—</p>
<pre><code class="hljs language-java" lang="java">List&lt;Integer&gt; distinctNumbers = numbers.stream()
                .distinct()
                .toList();
</code></pre>
<p>limit(long n): æˆªæ–­æµï¼Œä½¿å…¶å…ƒç´ ä¸è¶…è¿‡ç»™å®šæ•°é‡ã€‚</p>
<p>skip(long n): è·³è¿‡å‰nä¸ªå…ƒç´ ã€‚</p>
<pre><code class="hljs language-java" lang="java">List&lt;Integer&gt; result = numbers.stream()
                .filter(n -&gt; n % <span class="hljs-number">2</span> == <span class="hljs-number">0</span>) 
                .distinct()             
                .skip(<span class="hljs-number">1</span>)               
                .limit(<span class="hljs-number">2</span>)               
                .toList();
</code></pre>
<p>ç»“åˆä¸Šé¢å››ä¸ªæ“ä½œï¼Œç­›é€‰å¶æ•° -&gt; å»é‡ -&gt; è·³è¿‡ç¬¬1ä¸ª -&gt; å–å‰2ä¸ª</p>
<p>æ˜ å°„</p>
<p>map(Function&lt;T, R&gt; f): å°†æ¯ä¸ªå…ƒç´ è½¬æ¢ä¸ºå¦ä¸€ä¸ªå…ƒç´ ã€‚</p>
<p>æŠŠæ¯ä¸ªå•è¯éƒ½è½¬æ¢æˆå¤§å†™ï¼Œæˆ–è€…è·å–é•¿åº¦ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.lazy.snail.day32;

<span class="hljs-keyword">import</span> java.util.List;

<span class="hljs-comment">/**
 * <span class="hljs-doctag">@ClassName</span> Day32Demo4
 * <span class="hljs-doctag">@Description</span> TODO
 * <span class="hljs-doctag">@Author</span> lazysnail
 * <span class="hljs-doctag">@Date</span> 2025/7/14 14:19
 * <span class="hljs-doctag">@Version</span> 1.0
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Day32Demo4</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        List&lt;String&gt; words = List.of(<span class="hljs-string">"lazy"</span>, <span class="hljs-string">"snail"</span>, <span class="hljs-string">"lazysnailstudio.com"</span>);

        List&lt;String&gt; upperCaseWords = words.stream()
                .map(String::toUpperCase)
                .toList();
        System.out.println(<span class="hljs-string">"å¤§å†™å•è¯: "</span> + upperCaseWords);

        List&lt;Integer&gt; wordLengths = words.stream()
                .map(String::length)
                .toList();
        System.out.println(<span class="hljs-string">"å•è¯é•¿åº¦: "</span> + wordLengths);
    }
}
</code></pre>
<p>flatMap(Function&lt;T, Stream&lt;R&gt;&gt; f): å°†æ¯ä¸ªå…ƒç´ è½¬æ¢ä¸ºä¸€ä¸ªæµï¼Œç„¶åå°†æ‰€æœ‰æµè¿æ¥æˆä¸€ä¸ªæµï¼ˆæ‰å¹³åŒ–ï¼‰ã€‚</p>
<p>æŠŠä¸€ä¸ªåŒ…å«å¤šä¸ªåˆ—è¡¨çš„åˆ—è¡¨ï¼Œå‹å¹³æˆä¸€ä¸ªå•ä¸€çš„åˆ—è¡¨ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.lazy.snail.day32;

<span class="hljs-keyword">import</span> java.util.List;

<span class="hljs-comment">/**
 * <span class="hljs-doctag">@ClassName</span> Day32Demo5
 * <span class="hljs-doctag">@Description</span> TODO
 * <span class="hljs-doctag">@Author</span> lazysnail
 * <span class="hljs-doctag">@Date</span> 2025/7/14 14:22
 * <span class="hljs-doctag">@Version</span> 1.0
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Day32Demo5</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        List&lt;List&lt;Integer&gt;&gt; listOfLists = List.of(
                List.of(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>),
                List.of(<span class="hljs-number">4</span>, <span class="hljs-number">5</span>)
        );

        List&lt;Integer&gt; flatList = listOfLists.stream()
                .flatMap(list -&gt; list.stream())
                .toList();

        System.out.println(<span class="hljs-string">"æ‰å¹³åŒ–åçš„åˆ—è¡¨: "</span> + flatList);
    }
}
</code></pre>
<p>listOfListsæ˜¯ä¸¤ä¸ªåˆ—è¡¨çš„åˆ—è¡¨ï¼Œæ¯ä¸ªlistå…ƒç´ è¢«è½¬æ¢æˆä¸€ä¸ªæ–°çš„streamï¼ŒflatMapæŠŠè¿™äº›streamè¿æ¥æˆä¸€ä¸ªã€‚</p>
<p>mapMulti(BiConsumer&lt;T, Consumer&lt;R&gt;&gt; mapper): (JDK 16+) flatMapçš„æ›¿ä»£æ–¹æ¡ˆï¼Œåœ¨æŸäº›åœºæ™¯ä¸‹æ›´é«˜æ•ˆã€‚å®ƒå°†æ¯ä¸ªå…ƒç´ æ›¿æ¢ä¸ºé›¶ä¸ªæˆ–å¤šä¸ªå…ƒç´ ã€‚</p>
<p>æŸäº›åœºæ™¯ä¸‹ï¼Œè¦ä½¿ç”¨åˆ°mapMultiï¼Œè¦ç¨å¾®æ¯”flatMapæ›´çµæ´»ä¸€ç‚¹ã€‚</p>
<p>æ¯”å¦‚ï¼ŒæŠŠæ¯ä¸ªå•è¯åŒæ—¶è½¬æ¢æˆå¤§å†™å’Œå°å†™ï¼Œç„¶åæ”¾åˆ°åŒä¸€ä¸ªè¾“å‡ºæµé‡Œã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.lazy.snail.day32;

<span class="hljs-keyword">import</span> java.util.List;

<span class="hljs-comment">/**
 * <span class="hljs-doctag">@ClassName</span> Day32Demo6
 * <span class="hljs-doctag">@Description</span> TODO
 * <span class="hljs-doctag">@Author</span> lazysnail
 * <span class="hljs-doctag">@Date</span> 2025/7/14 14:27
 * <span class="hljs-doctag">@Version</span> 1.0
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Day32Demo6</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        List&lt;String&gt; words = List.of(<span class="hljs-string">"lazy"</span>, <span class="hljs-string">"snail"</span>, <span class="hljs-string">"lazysnail"</span>);

        List&lt;String&gt; result = words.stream()
                .&lt;String&gt;mapMulti((word, consumer) -&gt; {
                    consumer.accept(word.toUpperCase());
                    consumer.accept(word.toLowerCase());
                })
                .toList();

        System.out.println(<span class="hljs-string">"ç»“æœ: "</span> + result);
    }
}
</code></pre>
<p>å¯¹æ¯ä¸ªå•è¯ï¼Œç”Ÿæˆä¸€ä¸ªå¤§å†™å’Œä¸€ä¸ªå°å†™ç‰ˆæœ¬ã€‚</p>
<p>æ’åº</p>
<p>ä»¥è¿™ä¸ªä½œä¸ºæ•°æ®æºï¼š</p>
<pre><code class="hljs language-java" lang="java">List&lt;String&gt; names = List.of(<span class="hljs-string">"lazysnail"</span>, <span class="hljs-string">"æ‡’æƒ°èœ—ç‰›"</span>, <span class="hljs-string">"lazysnailstudio"</span>, <span class="hljs-string">"lazysnailstudio.com"</span>);
</code></pre>
<p>sorted(): æŒ‰è‡ªç„¶é¡ºåºæ’åºã€‚</p>
<pre><code class="hljs language-java" lang="java">List&lt;String&gt; sortedNames = names.stream()
                .sorted()
                .toList();
        
System.out.println(<span class="hljs-string">"æŒ‰è‡ªç„¶é¡ºåºæ’åº: "</span> + sortedNames);
</code></pre>
<p>sorted(Comparator&lt;T&gt; c): æŒ‰è‡ªå®šä¹‰æ¯”è¾ƒå™¨æ’åºã€‚</p>
<pre><code class="hljs language-java" lang="java">List&lt;String&gt; sortedByLength = names.stream()
                .sorted(Comparator.comparingInt(String::length))
                .toList();
        
System.out.println(<span class="hljs-string">"æŒ‰é•¿åº¦æ’åº: "</span> + sortedByLength);

List&lt;String&gt; sortedByLengthDesc = names.stream()
                .sorted(Comparator.comparingInt(String::length).reversed())
                .toList();
                
System.out.println(<span class="hljs-string">"æŒ‰é•¿åº¦é™åºæ’åº: "</span> + sortedByLengthDesc);
</code></pre>
<h3 data-id="heading-4">2.3ç»ˆç«¯æ“ä½œ</h3>
<p>ç»ˆç«¯æ“ä½œæ˜¯æµæ°´çº¿çš„æ‰“åŒ…ç«™ï¼Œå®ƒä¼šè§¦å‘æ‰€æœ‰æƒ°æ€§æ“ä½œçš„æ‰§è¡Œï¼Œå¹¶å…³é—­æµã€‚</p>
<p>å¸¸ç”¨çš„ç»ˆç«¯æ“ä½œï¼š</p>
<p>å¾ªç¯ï¼š</p>
<p>forEach(Consumer&lt;T&gt; c)</p>
<pre><code class="hljs language-java" lang="java">List&lt;String&gt; names = List.of(<span class="hljs-string">"lazysnail"</span>, <span class="hljs-string">"æ‡’æƒ°èœ—ç‰›"</span>, <span class="hljs-string">"lazysnailstudio.com"</span>);
names.stream().forEach(System.out::println);
</code></pre>
<p>åŒ¹é…ï¼š</p>
<p>anyMatch(Predicate&lt;T&gt; p): æ˜¯å¦æœ‰è‡³å°‘ä¸€ä¸ªå…ƒç´ åŒ¹é…ã€‚</p>
<pre><code class="hljs language-java" lang="java">List&lt;String&gt; names = List.of(<span class="hljs-string">"lazysnail"</span>, <span class="hljs-string">"æ‡’æƒ°èœ—ç‰›"</span>, <span class="hljs-string">"lazysnailstudio.com"</span>);
System.out.println(names.stream().anyMatch(<span class="hljs-string">"lazysnail"</span>::equals));
</code></pre>
<p>allMatch(Predicate&lt;T&gt; p): æ˜¯å¦æ‰€æœ‰å…ƒç´ éƒ½åŒ¹é…ã€‚</p>
<pre><code class="hljs language-java" lang="java">List&lt;String&gt; names = List.of(<span class="hljs-string">"lazysnail"</span>, <span class="hljs-string">"æ‡’æƒ°èœ—ç‰›"</span>, <span class="hljs-string">"lazysnailstudio.com"</span>);
System.out.println(names.stream().allMatch(<span class="hljs-string">"lazysnail"</span>::equals));
</code></pre>
<p>noneMatch(Predicate&lt;T&gt; p): æ˜¯å¦æ²¡æœ‰å…ƒç´ åŒ¹é…ã€‚</p>
<pre><code class="hljs language-java" lang="java">List&lt;String&gt; names = List.of(<span class="hljs-string">"lazysnail"</span>, <span class="hljs-string">"æ‡’æƒ°èœ—ç‰›"</span>, <span class="hljs-string">"lazysnailstudio.com"</span>);
System.out.println(names.stream().noneMatch(<span class="hljs-string">"lazysnail"</span>::equals));
</code></pre>
<p>æŸ¥æ‰¾ï¼š</p>
<p>findFirst(): è¿”å›ç¬¬ä¸€ä¸ªå…ƒç´ ï¼ˆOptional&lt;T&gt;ï¼‰ã€‚</p>
<pre><code class="hljs language-java" lang="java">List&lt;String&gt; names = List.of(<span class="hljs-string">"lazysnail"</span>, <span class="hljs-string">"æ‡’æƒ°èœ—ç‰›"</span>, <span class="hljs-string">"lazysnailstudio.com"</span>);
        Optional&lt;String&gt; firstMatch = names.stream()
                .filter(name -&gt; name.contains(<span class="hljs-string">"snail"</span>))
                .findFirst();
        firstMatch.ifPresentOrElse(
            foundName -&gt; System.out.println(<span class="hljs-string">"æ‰¾åˆ°äº†ç¬¬ä¸€ä¸ªåŒ¹é…é¡¹: "</span> + foundName),
            () -&gt; System.out.println(<span class="hljs-string">"æ²¡æœ‰æ‰¾åˆ°ä»»ä½•åŒ¹é…é¡¹ã€‚"</span>)
        );
</code></pre>
<p>é€šè¿‡findFirstæ–¹æ³•æŸ¥æ‰¾ç¬¬ä¸€ä¸ªåŒ…å«snailçš„å­—ç¬¦ä¸²ã€‚</p>
<p>ç”¨Optionalçš„ifPresentOrElseæ¥å¤„ç†ç»“æœï¼Œå¦‚æœæ‰¾åˆ°äº†ï¼Œå°±æ‰§è¡Œç¬¬ä¸€ä¸ªLambdaï¼›å¦‚æœæ²¡æ‰¾åˆ°ï¼Œå°±æ‰§è¡Œç¬¬äºŒä¸ªã€‚</p>
<p>findAny(): è¿”å›ä»»æ„ä¸€ä¸ªå…ƒç´ ï¼ˆOptional&lt;T&gt;ï¼‰ï¼Œåœ¨å¹¶è¡Œæµä¸­æ›´é«˜æ•ˆã€‚</p>
<pre><code class="hljs language-java" lang="java">List&lt;String&gt; names = List.of(<span class="hljs-string">"lazysnail"</span>, <span class="hljs-string">"æ‡’æƒ°èœ—ç‰›"</span>, <span class="hljs-string">"lazysnailstudio.com"</span>);

Optional&lt;String&gt; anyMatch = names.stream()
                .filter(name -&gt; name.contains(<span class="hljs-string">"snail"</span>))
                .findAny();
<span class="hljs-type">String</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> anyMatch.orElse(<span class="hljs-string">"é»˜è®¤å€¼ï¼šæ²¡æ‰¾åˆ°"</span>);
        
System.out.println(<span class="hljs-string">"æŸ¥æ‰¾ç»“æœ: "</span> + result);
</code></pre>
<p>æŸ¥æ‰¾ä»»æ„ä¸€ä¸ªåŒ…å« snailçš„å­—ç¬¦ä¸²ï¼Œä½¿ç”¨Optionalçš„orElseæ¥å¤„ç†ç»“æœã€‚å¦‚æœæ‰¾åˆ°äº†ï¼Œå°±è¿”å›æ‰¾åˆ°çš„å€¼ï¼›å¦‚æœæ²¡æ‰¾åˆ°ï¼Œå°±è¿”å›ä¸€ä¸ªé»˜è®¤å€¼ã€‚</p>
<p>å½’çº¦ï¼š</p>
<p>count(): è¿”å›æµä¸­å…ƒç´ ä¸ªæ•°ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">long</span> <span class="hljs-variable">totalCount</span> <span class="hljs-operator">=</span> names.stream().count();
System.out.println(<span class="hljs-string">"åˆ—è¡¨ä¸­çš„å…ƒç´ æ€»æ•°æ˜¯: "</span> + totalCount);
</code></pre>
<p>reduce(T identity, BinaryOperator&lt;T&gt; accumulator): å°†æµä¸­å…ƒç´ åå¤ç»“åˆèµ·æ¥ï¼Œå¾—åˆ°ä¸€ä¸ªå€¼ã€‚</p>
<pre><code class="hljs language-java" lang="java">Optional&lt;String&gt; combinedString = names.stream()
                .reduce((accumulator, element) -&gt; accumulator + <span class="hljs-string">", "</span> + element);
        
        combinedString.ifPresent(
            result -&gt; System.out.println(<span class="hljs-string">"æ‹¼æ¥åçš„å­—ç¬¦ä¸²: "</span> + result)
        );
</code></pre>
<p>ç”¨reduceæŠŠæ‰€æœ‰å­—ç¬¦ä¸²æ‹¼æ¥èµ·æ¥ï¼Œreduceçš„è¿™ä¸ªé‡è½½ç‰ˆæœ¬ä¸æ¥å—åˆå§‹å€¼ï¼Œå› æ­¤è¿”å›ä¸€ä¸ªOptionalï¼Œé˜²æ­¢æµä¸ºç©ºã€‚</p>
<p>collect(Collector c): å°†æµè½¬æ¢ä¸ºå…¶ä»–å½¢å¼ï¼ˆå¦‚List, Set, Mapï¼‰ã€‚è¿™æ˜¯æœ€é‡è¦ã€æœ€å¼ºå¤§çš„ç»ˆç«¯æ“ä½œã€‚</p>
<pre><code class="hljs language-java" lang="java">Map&lt;String, Integer&gt; nameLengthMap = names.stream()
                .collect(Collectors.toMap(
                        name -&gt; name,        
                        String::length       
                ));
System.out.println(<span class="hljs-string">"è½¬æ¢åçš„Map: "</span> + nameLengthMap);
</code></pre>
<p>æŠŠæµè½¬æ¢æˆMap&lt;String, Integer&gt;ã€‚</p>
<h2 data-id="heading-5">ä¸‰ã€Collectors</h2>
<p>Collectorsæ˜¯ä¸€ä¸ªå·¥å…·ç±»ï¼Œé¢„åˆ¶äº†å¾ˆå¤šæ”¶é›†å™¨ï¼Œèƒ½æ»¡è¶³ç»å¤§éƒ¨åˆ†æ•°æ®å¤„ç†éœ€æ±‚ã€‚</p>
<h3 data-id="heading-6">3.1æ”¶é›†åˆ°é›†åˆ</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        List&lt;String&gt; names = List.of(<span class="hljs-string">"lazysnail"</span>, <span class="hljs-string">"æ‡’æƒ°èœ—ç‰›"</span>, <span class="hljs-string">"lazysnailstudio.com"</span>);

        List&lt;String&gt; nameList = names.stream().toList();

        Set&lt;String&gt; nameSet = names.stream().collect(Collectors.toSet());

        LinkedList&lt;String&gt; nameLinkedList = names.stream()
                .collect(Collectors.toCollection(LinkedList::<span class="hljs-keyword">new</span>));
    }
</code></pre>
<h3 data-id="heading-7">3.2èšåˆè®¡ç®—</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        List&lt;Integer&gt; intList = Arrays.asList(<span class="hljs-number">300</span>, <span class="hljs-number">420</span>, <span class="hljs-number">180</span>, <span class="hljs-number">600</span>, <span class="hljs-number">210</span>);

        <span class="hljs-type">int</span> <span class="hljs-variable">total</span> <span class="hljs-operator">=</span> intList.stream()
                .collect(Collectors.summingInt(Integer::intValue));

        <span class="hljs-type">double</span> <span class="hljs-variable">avg</span> <span class="hljs-operator">=</span> intList.stream()
                .collect(Collectors.averagingInt(Integer::intValue));

        <span class="hljs-type">IntSummaryStatistics</span> <span class="hljs-variable">statistics</span> <span class="hljs-operator">=</span> intList.stream()
                .collect(Collectors.summarizingInt(Integer::intValue));

        System.out.println(<span class="hljs-string">"å’Œ: "</span> + total);
        System.out.println(<span class="hljs-string">"å¹³å‡å€¼: "</span> + avg);
        System.out.println(<span class="hljs-string">"å®Œæ•´ç»Ÿè®¡:"</span>);
        System.out.println(<span class="hljs-string">"è®°å½•æ•°: "</span> + statistics.getCount());
        System.out.println(<span class="hljs-string">"æœ€å¤§: "</span> + statistics.getMax());
        System.out.println(<span class="hljs-string">"æœ€å°: "</span> + statistics.getMin());
        System.out.println(<span class="hljs-string">"æ€»å’Œ: "</span> + statistics.getSum());
        System.out.println(<span class="hljs-string">"å¹³å‡å€¼: "</span> + statistics.getAverage());
    }
</code></pre>
<h3 data-id="heading-8">3.3åˆ†ç»„ä¸åˆ†åŒº</h3>
<p>groupingBy(Function classifier): åˆ†ç»„ï¼Œç±»ä¼¼äºSQLçš„GROUP BYã€‚</p>
<p>partitioningBy(Predicate predicate): åˆ†åŒºï¼Œæ˜¯groupingByçš„ä¸€ç§ç‰¹æ®Šæƒ…å†µï¼Œé”®æ˜¯å¸ƒå°”å€¼ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.lazy.snail.day32;

<span class="hljs-keyword">import</span> java.util.Arrays;
<span class="hljs-keyword">import</span> java.util.List;
<span class="hljs-keyword">import</span> java.util.Map;
<span class="hljs-keyword">import</span> java.util.stream.Collectors;

<span class="hljs-comment">/**
 * <span class="hljs-doctag">@ClassName</span> Day32Demo8
 * <span class="hljs-doctag">@Description</span> TODO
 * <span class="hljs-doctag">@Author</span> lazysnail
 * <span class="hljs-doctag">@Date</span> 2025/7/14 15:47
 * <span class="hljs-doctag">@Version</span> 1.0
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Day32Demo8</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        List&lt;Student&gt; students = Arrays.asList(
                <span class="hljs-keyword">new</span> <span class="hljs-title class_">Student</span>(<span class="hljs-string">"æ‡’æƒ°èœ—ç‰›"</span>, <span class="hljs-string">"æ•°å­¦"</span>, <span class="hljs-number">85</span>),
                <span class="hljs-keyword">new</span> <span class="hljs-title class_">Student</span>(<span class="hljs-string">"äºŒè›‹"</span>, <span class="hljs-string">"æ•°å­¦"</span>, <span class="hljs-number">72</span>),
                <span class="hljs-keyword">new</span> <span class="hljs-title class_">Student</span>(<span class="hljs-string">"å°äºŒç‹—"</span>, <span class="hljs-string">"ç‰©ç†"</span>, <span class="hljs-number">92</span>),
                <span class="hljs-keyword">new</span> <span class="hljs-title class_">Student</span>(<span class="hljs-string">"äºŒç‹—å­"</span>, <span class="hljs-string">"ç‰©ç†"</span>, <span class="hljs-number">68</span>),
                <span class="hljs-keyword">new</span> <span class="hljs-title class_">Student</span>(<span class="hljs-string">"ç‹—è›‹"</span>, <span class="hljs-string">"æ•°å­¦"</span>, <span class="hljs-number">93</span>),
                <span class="hljs-keyword">new</span> <span class="hljs-title class_">Student</span>(<span class="hljs-string">"å°é˜¿ä¸‰"</span>, <span class="hljs-string">"åŒ–å­¦"</span>, <span class="hljs-number">78</span>)
        );

        Map&lt;String, List&lt;Student&gt;&gt; bySubject = students.stream()
                .collect(Collectors.groupingBy(Student::getSubject));

        bySubject.forEach((subject, list) -&gt; {
            System.out.println(subject + <span class="hljs-string">": "</span> +
                    list.stream().map(Student::getName).collect(Collectors.joining(<span class="hljs-string">", "</span>)));
        });

        Map&lt;String, List&lt;Student&gt;&gt; byGrade = students.stream()
                .collect(Collectors.groupingBy(student -&gt; {
                    <span class="hljs-type">int</span> <span class="hljs-variable">score</span> <span class="hljs-operator">=</span> student.getScore();
                    <span class="hljs-keyword">if</span> (score &gt;= <span class="hljs-number">90</span>) <span class="hljs-keyword">return</span> <span class="hljs-string">"A"</span>;
                    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (score &gt;= <span class="hljs-number">80</span>) <span class="hljs-keyword">return</span> <span class="hljs-string">"B"</span>;
                    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (score &gt;= <span class="hljs-number">70</span>) <span class="hljs-keyword">return</span> <span class="hljs-string">"C"</span>;
                    <span class="hljs-keyword">else</span> <span class="hljs-keyword">return</span> <span class="hljs-string">"D"</span>;
                }));

        byGrade.forEach((grade, list) -&gt; {
            System.out.println(grade + <span class="hljs-string">": "</span> +
                    list.stream().map(Student::getName).collect(Collectors.joining(<span class="hljs-string">", "</span>)));
        });

        Map&lt;Boolean, List&lt;Student&gt;&gt; passOrFail = students.stream()
                .collect(Collectors.partitioningBy(student -&gt; student.getScore() &gt;= <span class="hljs-number">60</span>));

        System.out.println(<span class="hljs-string">"åŠæ ¼å­¦ç”Ÿ: "</span> +
                passOrFail.get(<span class="hljs-literal">true</span>).stream().map(Student::getName).collect(Collectors.joining(<span class="hljs-string">", "</span>)));
        System.out.println(<span class="hljs-string">"ä¸åŠæ ¼å­¦ç”Ÿ: "</span> +
                passOrFail.get(<span class="hljs-literal">false</span>).stream().map(Student::getName).collect(Collectors.joining(<span class="hljs-string">", "</span>)));
    }
}
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Student</span> {
    <span class="hljs-keyword">private</span> String name;
    <span class="hljs-keyword">private</span> String subject;
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> score;

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Student</span><span class="hljs-params">(String name, String subject, <span class="hljs-type">int</span> score)</span> {
        <span class="hljs-built_in">this</span>.name = name;
        <span class="hljs-built_in">this</span>.subject = subject;
        <span class="hljs-built_in">this</span>.score = score;
    }

    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getName</span><span class="hljs-params">()</span> { <span class="hljs-keyword">return</span> name; }
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getSubject</span><span class="hljs-params">()</span> { <span class="hljs-keyword">return</span> subject; }
    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getScore</span><span class="hljs-params">()</span> { <span class="hljs-keyword">return</span> score; }
}
</code></pre>
<p>ç”¨groupingByåˆ†åˆ«è¿›è¡Œäº†æŒ‰ç…§å­¦ç§‘å’Œæˆç»©ç­‰çº§ï¼ˆè‡ªå®šä¹‰ï¼‰è¿›è¡Œäº†åˆ†ç»„ã€‚</p>
<p>ç”¨partitioningByæŒ‰ç…§æ˜¯å¦åŠæ ¼ï¼ˆ60åˆ†ï¼‰è¿›è¡Œäº†åˆ†åŒºã€‚</p>
<p>æ¡ˆä¾‹ä¸­ä½¿ç”¨åˆ°çš„Collectors.joiningæ–¹æ³•å°±æ˜¯æŠŠæµä¸­çš„å…ƒç´ æ‹¼æ¥æˆä¸€ä¸ªå­—ç¬¦ä¸²ã€‚</p>
<h2 data-id="heading-9">ç»“è¯­</h2>
<p>Stream APIæä¾›äº†ä¸°å¯Œçš„æµæ“ä½œï¼Œéå¸¸é€‚åˆå¤„ç†é›†åˆæ•°æ®ï¼Œè®©å¤„ç†è¿‡ç¨‹æ›´åŠ çš„ç®€æ´æ–¹ä¾¿ã€‚</p>
<p>è™½ç„¶çœ‹ç€å†…å®¹æ¯”è¾ƒå¤šï¼Œä½†æ˜¯å¤šå®æ“ä¸€ä¸‹ï¼Œä¸Šæ‰‹éå¸¸å¿«ã€‚</p>
<p>ä¹‹å‰é›†åˆä¸­çš„æ¡ˆä¾‹éƒ½å¯ä»¥å°è¯•ç”¨æµæ“ä½œé‡æ„ä¸‹ï¼Œæ„Ÿå—ä¸€ä¸‹æµæ“ä½œã€‚</p>
<p>ä¸‹ä¸€ç¯‡é¢„å‘Š</p>
<blockquote>
<p>Day33 | Javaä¸­çš„Optional</p>
</blockquote>
<p>å¦‚æœä½ è§‰å¾—è¿™ç³»åˆ—æ–‡ç« å¯¹ä½ æœ‰å¸®åŠ©ï¼Œæ¬¢è¿å…³æ³¨ä¸“æ ï¼Œæˆ‘ä»¬ä¸€èµ·åšæŒä¸‹å»ï¼</p>
<p><strong>æ›´å¤šæ–‡ç« è¯·å…³æ³¨æˆ‘çš„å…¬ä¼—å·ã€Šæ‡’æƒ°èœ—ç‰›å·¥åŠã€‹</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[JavaScriptåŸå‹é“¾ï¼šä¸€ä»½ä¼šâ€œé—ä¼ â€çš„å®¶æ—ä¼ å®¶å®]]></title>    <link>https://juejin.cn/post/7584724634173358143</link>    <guid>https://juejin.cn/post/7584724634173358143</guid>    <pubDate>2025-12-18T03:59:48.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7584724634173358143" data-draft-id="7584759201071841321" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="JavaScriptåŸå‹é“¾ï¼šä¸€ä»½ä¼šâ€œé—ä¼ â€çš„å®¶æ—ä¼ å®¶å®"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript"/> <meta itemprop="datePublished" content="2025-12-18T03:59:48.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="JS_Likers"/> <meta itemprop="url" content="https://juejin.cn/user/1377017277975032"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            JavaScriptåŸå‹é“¾ï¼šä¸€ä»½ä¼šâ€œé—ä¼ â€çš„å®¶æ—ä¼ å®¶å®
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1377017277975032/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    JS_Likers
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-18T03:59:48.000Z" title="Thu Dec 18 2025 03:59:48 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-18
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æ¬¢è¿ä½¿ç”¨æˆ‘çš„å°ç¨‹åºğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0d25c4001b1b4e6e902dc1f8863bcef2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSlNfTGlrZXJz:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766635187&amp;x-signature=H7WM0eoyAF2kWEnBwudPxVskG3M%3D" alt="small.png" loading="lazy"/></p>
<hr/>
<p>ä½ å¥½ï¼å¦‚æœä½ æ›¾è§‰å¾—JavaScriptçš„åŸå‹é“¾åƒé­”æ³•ä¸€æ ·ç¥ç§˜ï¼Œé‚£ä¹ˆä»Šå¤©æˆ‘è¦å‘Šè¯‰ä½ ä¸€ä¸ªç§˜å¯†ï¼šå®ƒå…¶å®å°±åƒä¸€ä»½å®¶æ—ä¼ å®¶å®ï¼Œä»£ä»£ç›¸ä¼ ï¼Œæ°¸è¿œä¸ä¼šä¸¢å¤±ï¼</p>
<h2 data-id="heading-0">ä¸€ä¸ªç¥å¥‡çš„ç°è±¡</h2>
<p>è®©æˆ‘ä»¬å…ˆæ¥çœ‹ä¸€æ®µä»£ç ï¼Œæ„Ÿå—ä¸€ä¸‹åŸå‹é“¾çš„ç¥å¥‡ä¹‹å¤„ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªç®€å•çš„å¯¹è±¡</span>
<span class="hljs-keyword">const</span> person = {
  <span class="hljs-attr">name</span>: <span class="hljs-string">'å°æ˜'</span>,
  <span class="hljs-attr">age</span>: <span class="hljs-number">25</span>
};

<span class="hljs-comment">// æˆ‘ä»¬ä»æ¥æ²¡æœ‰ç»™personæ·»åŠ è¿‡toStringæ–¹æ³•</span>
<span class="hljs-comment">// ä½†å®ƒå±…ç„¶èƒ½ç”¨ï¼</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(person.<span class="hljs-title function_">toString</span>()); <span class="hljs-comment">// è¾“å‡º: "[object Object]"</span>
</code></pre>
<p>æ˜¯ä¸æ˜¯å¾ˆç¥å¥‡ï¼Ÿæˆ‘ä»¬æ²¡æœ‰ç»™<code>person</code>å¯¹è±¡å®šä¹‰<code>toString</code>æ–¹æ³•ï¼Œä½†å®ƒå´å¯ä»¥è°ƒç”¨è¿™ä¸ªæ–¹æ³•ï¼è¿™å°±æ˜¯åŸå‹é“¾çš„é­”åŠ›ã€‚</p>
<h2 data-id="heading-1">æ­å¼€ç¥ç§˜é¢çº±ï¼šä»€ä¹ˆæ˜¯åŸå‹é“¾ï¼Ÿ</h2>
<p>æƒ³è±¡ä¸€ä¸‹ï¼Œä½ å®¶é‡Œæœ‰ä¸€ä»½â€œå®¶æ—ä¼ å®¶å®â€â€”â€”ä¸€æœ¬è®°å½•äº†æ‰€æœ‰å®¶æ—æˆå‘˜å…±åŒç‰¹å¾çš„æ—è°±ã€‚æ¯ä¸ªæ–°å‡ºç”Ÿçš„å­©å­éƒ½ä¼šè‡ªåŠ¨â€œç»§æ‰¿â€è¿™äº›å®¶æ—ç‰¹å¾ï¼Œæ¯”å¦‚å§“æ°ã€å®¶æ—ä¼ ç»Ÿç­‰ã€‚</p>
<p>åœ¨JavaScriptä¸­ï¼Œ<strong>æ¯ä¸ªå¯¹è±¡éƒ½æœ‰ä¸€ä¸ªéšè—çš„â€œæ—è°±â€</strong>ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºâ€œåŸå‹â€ï¼ˆprototypeï¼‰ã€‚å½“ä½ è®¿é—®ä¸€ä¸ªå¯¹è±¡çš„å±æ€§æˆ–æ–¹æ³•æ—¶ï¼Œå¦‚æœè¿™ä¸ªå¯¹è±¡è‡ªå·±æ²¡æœ‰ï¼ŒJavaScriptå°±ä¼šè‡ªåŠ¨å»å®ƒçš„â€œæ—è°±â€ï¼ˆåŸå‹ï¼‰é‡Œæ‰¾ï¼Œå¦‚æœè¿˜æ²¡æ‰¾åˆ°ï¼Œå°±ç»§ç»­å»åŸå‹çš„åŸå‹é‡Œæ‰¾...è¿™æ ·ä¸€çº§ä¸€çº§å¾€ä¸Šæ‰¾ï¼Œå°±åƒæ²¿ç€å®¶æ—æ ‘å¾€ä¸Šè¿½æº¯ï¼Œç›´åˆ°æ‰¾åˆ°ä¸ºæ­¢ï¼ˆæˆ–è€…ç›´åˆ°æœ€é¡¶å±‚ä¹Ÿæ²¡æ‰¾åˆ°ï¼Œè¿”å›undefinedï¼‰ã€‚</p>
<p>è¿™å°±æ˜¯<strong>åŸå‹é“¾</strong>ï¼</p>
<h2 data-id="heading-2">è®©æˆ‘ä»¬â€œå¯è§†åŒ–â€åŸå‹é“¾</h2>
<h3 data-id="heading-3">1. æ„é€ å‡½æ•°ï¼šå®¶æ—çš„â€œåˆ›å§‹ç¥–å…ˆâ€</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªâ€œå®¶æ—â€çš„è“å›¾</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">Person</span>(<span class="hljs-params">name, age</span>) {
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name;
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">age</span> = age;
}

<span class="hljs-comment">// ç»™è¿™ä¸ªå®¶æ—çš„æ‰€æœ‰æˆå‘˜æ·»åŠ ä¸€ä¸ªå…±åŒæŠ€èƒ½</span>
<span class="hljs-title class_">Person</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">sayHello</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`ä½ å¥½ï¼Œæˆ‘æ˜¯<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.name}</span>ï¼Œä»Šå¹´<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.age}</span>å²`</span>);
};
</code></pre>
<p>è¿™é‡Œï¼Œ<code>Person</code>å°±åƒä¸€ä¸ªå®¶æ—çš„åˆ›å§‹äººï¼Œè€Œ<code>Person.prototype</code>å°±æ˜¯å®¶æ—çš„â€œä¼ å®¶å®â€ï¼ˆæ—è°±ï¼‰ï¼Œè®°å½•äº†æ‰€æœ‰å®¶æ—æˆå‘˜å…±æœ‰çš„ç‰¹å¾å’Œæ–¹æ³•ã€‚</p>
<h3 data-id="heading-4">2. åˆ›å»ºå®¶æ—æˆå‘˜</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åˆ›å»ºä¸¤ä¸ªå®¶æ—æˆå‘˜</span>
<span class="hljs-keyword">const</span> xiaoming = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>(<span class="hljs-string">'å°æ˜'</span>, <span class="hljs-number">25</span>);
<span class="hljs-keyword">const</span> xiaohong = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>(<span class="hljs-string">'å°çº¢'</span>, <span class="hljs-number">23</span>);

<span class="hljs-comment">// ä»–ä»¬éƒ½æœ‰è‡ªå·±çš„ç‹¬ç‰¹å±æ€§</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(xiaoming.<span class="hljs-property">name</span>); <span class="hljs-comment">// å°æ˜</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(xiaohong.<span class="hljs-property">name</span>); <span class="hljs-comment">// å°çº¢</span>

<span class="hljs-comment">// ä½†ä»–ä»¬å…±äº«åŒä¸€ä¸ªâ€œä¼ å®¶å®â€ä¸­çš„æ–¹æ³•</span>
xiaoming.<span class="hljs-title function_">sayHello</span>(); <span class="hljs-comment">// ä½ å¥½ï¼Œæˆ‘æ˜¯å°æ˜ï¼Œä»Šå¹´25å²</span>
xiaohong.<span class="hljs-title function_">sayHello</span>(); <span class="hljs-comment">// ä½ å¥½ï¼Œæˆ‘æ˜¯å°çº¢ï¼Œä»Šå¹´23å²</span>
</code></pre>
<p>æœ‰è¶£çš„æ˜¯ï¼Œè™½ç„¶<code>sayHello</code>æ–¹æ³•ä¸åœ¨<code>xiaoming</code>å’Œ<code>xiaohong</code>è‡ªå·±èº«ä¸Šï¼Œä½†ä»–ä»¬éƒ½èƒ½é€šè¿‡â€œå®¶æ—ä¼ å®¶å®â€è®¿é—®åˆ°å®ƒï¼</p>
<h2 data-id="heading-5">çœ‹çœ‹åŸå‹é“¾æ˜¯å¦‚ä½•è¿æ¥çš„</h2>
<p>è®©æˆ‘ä»¬æ¥è¿½è¸ªä¸€ä¸‹è¿™ä¸ªå®¶æ—å…³ç³»ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// xiaomingè‡ªå·±çš„å±æ€§</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(xiaoming.<span class="hljs-title function_">hasOwnProperty</span>(<span class="hljs-string">'name'</span>)); <span class="hljs-comment">// true</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(xiaoming.<span class="hljs-title function_">hasOwnProperty</span>(<span class="hljs-string">'sayHello'</span>)); <span class="hljs-comment">// false</span>

<span class="hljs-comment">// ä½†sayHelloåœ¨å®ƒçš„åŸå‹ä¸Šï¼</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">Person</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-title function_">hasOwnProperty</span>(<span class="hljs-string">'sayHello'</span>)); <span class="hljs-comment">// true</span>

<span class="hljs-comment">// çœ‹çœ‹åŸå‹é“¾çš„è¿æ¥</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(xiaoming.<span class="hljs-property">__proto__</span> === <span class="hljs-title class_">Person</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>); <span class="hljs-comment">// true</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">Person</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">__proto__</span> === <span class="hljs-title class_">Object</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>); <span class="hljs-comment">// true</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">Object</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">__proto__</span>); <span class="hljs-comment">// null - åˆ°å¤´äº†ï¼</span>
</code></pre>
<h2 data-id="heading-6">å›¾è§£åŸå‹é“¾å®¶æ—æ ‘</h2>
<pre><code class="hljs language-javascript" lang="javascript">xiaoming
    â”‚
    â”œâ”€â”€ è‡ªå·±çš„å±æ€§: name, age
    â”‚
    â””â”€â”€ __proto__ â†’ <span class="hljs-title class_">Person</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>
            â”‚
            â”œâ”€â”€ å®¶æ—å…±äº«: <span class="hljs-title function_">sayHello</span>()
            â”‚
            â””â”€â”€ __proto__ â†’ <span class="hljs-title class_">Object</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>
                    â”‚
                    â”œâ”€â”€ å…¨å®‡å®™å…±äº«: <span class="hljs-title function_">toString</span>(), <span class="hljs-title function_">valueOf</span>()...
                    â”‚
                    â””â”€â”€ __proto__ â†’ <span class="hljs-literal">null</span> (å®‡å®™çš„å°½å¤´ï¼)
</code></pre>
<h2 data-id="heading-7">æœ‰è¶£çš„å®éªŒï¼šæ²¿ç€åŸå‹é“¾â€œå¯»å®â€</h2>
<p>è®©æˆ‘ä»¬ç©ä¸€ä¸ªæ¸¸æˆï¼Œçœ‹çœ‹JavaScriptå¦‚ä½•æ²¿ç€åŸå‹é“¾å¯»æ‰¾å±æ€§ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªâ€œå¯»å®åœ°å›¾â€</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">GrandParent</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">grandparentSecret</span> = <span class="hljs-string">"æˆ‘æ˜¯çˆ·çˆ·çš„ç§˜å¯†"</span>;
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">Parent</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">parentSecret</span> = <span class="hljs-string">"æˆ‘æ˜¯çˆ¸çˆ¸çš„ç§˜å¯†"</span>;
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">Child</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">childSecret</span> = <span class="hljs-string">"æˆ‘æ˜¯å­©å­çš„ç§˜å¯†"</span>;
}

<span class="hljs-comment">// å»ºç«‹å®¶æ—å…³ç³»</span>
<span class="hljs-title class_">Parent</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">GrandParent</span>();
<span class="hljs-title class_">Child</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Parent</span>();

<span class="hljs-keyword">const</span> child = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Child</span>();

<span class="hljs-comment">// å¼€å§‹å¯»å®ï¼</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(child.<span class="hljs-property">childSecret</span>);     <span class="hljs-comment">// 1. è‡ªå·±èº«ä¸Šæ‰¾åˆ° âœ“</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(child.<span class="hljs-property">parentSecret</span>);    <span class="hljs-comment">// 2. çˆ¸çˆ¸èº«ä¸Šæ‰¾åˆ° âœ“</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(child.<span class="hljs-property">grandparentSecret</span>); <span class="hljs-comment">// 3. çˆ·çˆ·èº«ä¸Šæ‰¾åˆ° âœ“</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(child.<span class="hljs-property">toString</span>);        <span class="hljs-comment">// 4. ç¥–ä¼ çš„toStringæ–¹æ³• âœ“</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(child.<span class="hljs-property">alienSecret</span>);     <span class="hljs-comment">// 5. undefined - æ²¡è¿™ä¸ªå®ç‰©ï¼</span>
</code></pre>
<h2 data-id="heading-8">ç°ä»£JavaScriptä¸­çš„åŸå‹é“¾</h2>
<p>ES6å¼•å…¥äº†<code>class</code>è¯­æ³•ï¼Œè®©åŸå‹é“¾çš„ä½¿ç”¨æ›´åŠ ç›´è§‚ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Animal</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">name</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name;
  }
  
  <span class="hljs-title function_">speak</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.name}</span> å‘å‡ºå£°éŸ³`</span>);
  }
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Dog</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Animal</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">name, breed</span>) {
    <span class="hljs-variable language_">super</span>(name);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">breed</span> = breed;
  }
  
  <span class="hljs-title function_">bark</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.name}</span>ï¼ˆ<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.breed}</span>ï¼‰æ±ªæ±ªå«ï¼`</span>);
  }
}

<span class="hljs-keyword">const</span> myDog = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Dog</span>(<span class="hljs-string">'æ—ºè´¢'</span>, <span class="hljs-string">'é‡‘æ¯›'</span>);
myDog.<span class="hljs-title function_">speak</span>(); <span class="hljs-comment">// ç»§æ‰¿è‡ªAnimal</span>
myDog.<span class="hljs-title function_">bark</span>();  <span class="hljs-comment">// è‡ªå·±çš„æ–¹æ³•</span>
</code></pre>
<p>è™½ç„¶è¯­æ³•å˜äº†ï¼Œä½†åº•å±‚è¿˜æ˜¯é‚£ä¸ªç†Ÿæ‚‰çš„åŸå‹é“¾ï¼</p>
<h2 data-id="heading-9">ä¸ºä»€ä¹ˆåŸå‹é“¾å¾ˆé‡è¦ï¼Ÿ</h2>
<ol>
<li><strong>å†…å­˜é«˜æ•ˆ</strong>ï¼šå…±äº«æ–¹æ³•åªéœ€è¦å­˜å‚¨ä¸€æ¬¡ï¼Œè€Œä¸æ˜¯æ¯ä¸ªå¯¹è±¡éƒ½å¤åˆ¶ä¸€ä»½</li>
<li><strong>ä»£ç å¤ç”¨</strong>ï¼šé€šè¿‡ç»§æ‰¿ï¼Œå¯ä»¥è½»æ¾æ‰©å±•å’Œé‡ç”¨ä»£ç </li>
<li><strong>åŠ¨æ€æ‰©å±•</strong>ï¼šå¯ä»¥åœ¨è¿è¡Œæ—¶ä¿®æ”¹åŸå‹ï¼Œæ‰€æœ‰å®ä¾‹éƒ½ä¼šè‡ªåŠ¨è·å¾—æ–°èƒ½åŠ›</li>
</ol>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ç»™æ‰€æœ‰æ•°ç»„æ·»åŠ ä¸€ä¸ªæœ‰è¶£çš„æ–¹æ³•</span>
<span class="hljs-title class_">Array</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">sayHello</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`æˆ‘æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œæˆ‘æœ‰<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.length}</span>ä¸ªå…ƒç´ `</span>);
};

[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>].<span class="hljs-title function_">sayHello</span>(); <span class="hljs-comment">// æˆ‘æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œæˆ‘æœ‰3ä¸ªå…ƒç´ </span>
</code></pre>
<p>ï¼ˆæ³¨æ„ï¼šåœ¨å®é™…é¡¹ç›®ä¸­ï¼Œä¿®æ”¹å†…ç½®å¯¹è±¡çš„åŸå‹é€šå¸¸ä¸æ˜¯å¥½ä¸»æ„ï¼Œè¿™åªæ˜¯ä¸€ä¸ªæ¼”ç¤ºï¼ï¼‰</p>
<h2 data-id="heading-10">æ€»ç»“</h2>
<p>JavaScriptçš„åŸå‹é“¾å°±åƒä¸€ä»½å®¶æ—ä¼ å®¶å®ï¼š</p>
<ul>
<li>æ¯ä¸ªå¯¹è±¡éƒ½æœ‰è‡ªå·±çš„å°ç§˜å¯†ï¼ˆå±æ€§ï¼‰</li>
<li>ä½†ä¹Ÿå…±äº«å®¶æ—çš„å…±åŒè´¢å¯Œï¼ˆåŸå‹æ–¹æ³•ï¼‰</li>
<li>å½“ä½ å¯»æ‰¾æŸä¸ªå±æ€§æ—¶ï¼ŒJavaScriptä¼šåƒå¯»å®ä¸€æ ·æ²¿ç€å®¶æ—æ ‘å‘ä¸Šæ‰¾</li>
<li>ç›´åˆ°æ‰¾åˆ°å®ç‰©ï¼Œæˆ–è€…åˆ°è¾¾å®¶æ—æ ‘çš„é¡¶ç«¯ï¼ˆnullï¼‰</li>
</ul>
<p>ç°åœ¨ï¼Œå½“æœ‰äººæåˆ°"åŸå‹é“¾"æ—¶ï¼Œä½ å¯ä»¥å¾®ç¬‘ç€è¯´ï¼š"å“¦ï¼Œå°±æ˜¯JavaScriptå¯¹è±¡çš„å®¶æ—ä¼ å®¶å®ç³»ç»Ÿå˜›ï¼"</p>
<p>å¸Œæœ›è¿™ä¸ªæ¯”å–»è®©ä½ å¯¹åŸå‹é“¾æœ‰äº†æ›´ç›´è§‚çš„ç†è§£ã€‚ä¸‹æ¬¡å†™JavaScriptæ—¶ï¼Œä¸å¦¨æƒ³æƒ³ä½ æ­£åœ¨å¤„ç†çš„å¯¹è±¡çš„"å®¶æ—å…³ç³»"å§ï¼</p>
<p><strong>è®°ä½ï¼šåœ¨JavaScriptçš„ä¸–ç•Œé‡Œï¼Œæ¯ä¸ªå¯¹è±¡éƒ½ä¸æ˜¯å­¤å²›ï¼Œå®ƒä»¬é€šè¿‡åŸå‹é“¾è¿æ¥æˆä¸€ä¸ªåºå¤§çš„å®¶æ—ç½‘ç»œï¼</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å½“JSæ‹·è´ç©èµ·äº†â€œä¿„ç½—æ–¯å¥—å¨ƒâ€ï¼šæ·±æ‹·è´ä¸æµ…æ‹·è´çš„è¶£å‘³å¯¹å†³]]></title>    <link>https://juejin.cn/post/7584724634173341759</link>    <guid>https://juejin.cn/post/7584724634173341759</guid>    <pubDate>2025-12-18T03:59:14.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7584724634173341759" data-draft-id="7584730804515242027" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å½“JSæ‹·è´ç©èµ·äº†â€œä¿„ç½—æ–¯å¥—å¨ƒâ€ï¼šæ·±æ‹·è´ä¸æµ…æ‹·è´çš„è¶£å‘³å¯¹å†³"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript"/> <meta itemprop="datePublished" content="2025-12-18T03:59:14.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="JS_Likers"/> <meta itemprop="url" content="https://juejin.cn/user/1377017277975032"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å½“JSæ‹·è´ç©èµ·äº†â€œä¿„ç½—æ–¯å¥—å¨ƒâ€ï¼šæ·±æ‹·è´ä¸æµ…æ‹·è´çš„è¶£å‘³å¯¹å†³
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1377017277975032/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    JS_Likers
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-18T03:59:14.000Z" title="Thu Dec 18 2025 03:59:14 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-18
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æ¬¢è¿ä½¿ç”¨æˆ‘çš„å°ç¨‹åºğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0d25c4001b1b4e6e902dc1f8863bcef2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSlNfTGlrZXJz:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766635153&amp;x-signature=Enu3BPRStlU5IdJX5w6qVPE%2FMno%3D" alt="small.png" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-0">ğŸ“š æ‹·è´ä¸åªæ˜¯å¤åˆ¶ç²˜è´´</h2>
<p>æƒ³è±¡ä¸€ä¸‹ï¼Œä½ æœ‰ä¸€æœ¬å¿ƒçˆ±çš„ç²¾è£…ä¹¦ï¼Œæœ‹å‹æƒ³å€Ÿå»é˜…è¯»ã€‚ä½ æœ‰ä¸¤ä¸ªé€‰æ‹©ï¼š</p>
<ol>
<li><strong>ç›´æ¥ç»™æœ‹å‹</strong> - ä½†ä¹¦å°±ä¸åœ¨ä½ æ‰‹ä¸Šäº†ï¼ˆåŸå§‹å¼•ç”¨ï¼‰</li>
<li><strong>å»å¤å°åº—å¤å°ä¸€æœ¬</strong> - æœ‹å‹æœ‰è‡ªå·±çš„å‰¯æœ¬ï¼Œä½ çš„åŸç‰ˆè¿˜åœ¨</li>
</ol>
<p>åœ¨JavaScriptçš„ä¸–ç•Œé‡Œï¼Œæ‹·è´æ•°æ®å°±åƒè¿™ä¸ªåœºæ™¯ï¼Œä½†æœ‰æ›´å¤šçš„â€œå¥—å¨ƒâ€æƒ…å†µï¼</p>
<h2 data-id="heading-1">ğŸ­ æµ…æ‹·è´ï¼šåªæ¬å®¶çš„â€œè¡¨é¢æœ‹å‹â€</h2>
<p>æµ…æ‹·è´å°±åƒåªæ¬èµ°äº†å®¶å…·ï¼Œä½†å¢™ä¸Šè¿˜æŒ‚ç€åŸæˆ¿å­çš„é’¥åŒ™ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åŸå§‹å¯¹è±¡ - ä¸€ä¸ªâ€œå¥—å¨ƒâ€å¯¹è±¡</span>
<span class="hljs-keyword">const</span> original = {
  <span class="hljs-attr">name</span>: <span class="hljs-string">"å°æ˜"</span>,
  <span class="hljs-attr">age</span>: <span class="hljs-number">25</span>,
  <span class="hljs-attr">hobbies</span>: [<span class="hljs-string">"ç¼–ç¨‹"</span>, <span class="hljs-string">"æ¸¸æˆ"</span>, <span class="hljs-string">"é˜…è¯»"</span>], <span class="hljs-comment">// æ³¨æ„è¿™ä¸ªæ•°ç»„ï¼</span>
  <span class="hljs-attr">address</span>: {
    <span class="hljs-attr">city</span>: <span class="hljs-string">"åŒ—äº¬"</span>,
    <span class="hljs-attr">district</span>: <span class="hljs-string">"æµ·æ·€åŒº"</span>
  }
};

<span class="hljs-comment">// æµ…æ‹·è´çš„å‡ ç§æ–¹å¼ï¼š</span>
<span class="hljs-keyword">const</span> shallowCopy1 = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>({}, original);
<span class="hljs-keyword">const</span> shallowCopy2 = { ...original }; <span class="hljs-comment">// æ‰©å±•è¿ç®—ç¬¦</span>
<span class="hljs-keyword">const</span> shallowCopy3 = original.<span class="hljs-property">slice</span>?.(); <span class="hljs-comment">// æ•°ç»„ä¸“ç”¨</span>

<span class="hljs-comment">// è¯•è¯•ä¿®æ”¹ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ</span>
shallowCopy1.<span class="hljs-property">name</span> = <span class="hljs-string">"å°çº¢"</span>; <span class="hljs-comment">// âœ… ä¸ä¼šå½±å“original</span>
shallowCopy1.<span class="hljs-property">hobbies</span>.<span class="hljs-title function_">push</span>(<span class="hljs-string">"æ‘„å½±"</span>); <span class="hljs-comment">// âš ï¸ ç³Ÿç³•ï¼originalçš„hobbiesä¹Ÿè¢«æ”¹äº†ï¼</span>
</code></pre>
<p><strong>æµ…æ‹·è´çš„ç‰¹ç‚¹ï¼š</strong></p>
<ul>
<li>åªå¤åˆ¶ç¬¬ä¸€å±‚å±æ€§</li>
<li>åµŒå¥—å¯¹è±¡/æ•°ç»„ä»ç„¶æ˜¯â€œå…±äº«â€çš„å¼•ç”¨</li>
<li>åƒåªæ¢äº†å¤–å£³ï¼ŒèŠ¯å­è¿˜æ˜¯åŒä¸€ä¸ª</li>
</ul>
<h2 data-id="heading-2">ğŸ§³ æ·±æ‹·è´ï¼šçœŸæ­£çš„â€œç‹¬ç«‹é—¨æˆ·â€</h2>
<p>æ·±æ‹·è´å°±åƒå¸¦ç€æ‰€æœ‰å®¶å½“æ¬åˆ°äº†å…¨æ–°çš„æˆ¿å­ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ·±æ‹·è´å®ç°æ–¹å¼å¤§æ¯”æ‹¼</span>

<span class="hljs-comment">// æ–¹æ³•1ï¼šJSONå¤§æ³•ï¼ˆæœ€ç®€å•ä½†æœ‰å±€é™ï¼‰</span>
<span class="hljs-keyword">const</span> deepCopy1 = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(original));

<span class="hljs-comment">// æ–¹æ³•2ï¼šé€’å½’å®ç°ï¼ˆè‡ªå·±åŠ¨æ‰‹ï¼Œä¸°è¡£è¶³é£Ÿï¼‰</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">deepClone</span>(<span class="hljs-params">obj</span>) {
  <span class="hljs-keyword">if</span> (obj === <span class="hljs-literal">null</span> || <span class="hljs-keyword">typeof</span> obj !== <span class="hljs-string">'object'</span>) <span class="hljs-keyword">return</span> obj;
  
  <span class="hljs-keyword">if</span> (obj <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Date</span>) <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(obj);
  <span class="hljs-keyword">if</span> (obj <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">RegExp</span>) <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RegExp</span>(obj);
  
  <span class="hljs-keyword">const</span> clone = <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">isArray</span>(obj) ? [] : {};
  
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> key <span class="hljs-keyword">in</span> obj) {
    <span class="hljs-keyword">if</span> (obj.<span class="hljs-title function_">hasOwnProperty</span>(key)) {
      clone[key] = <span class="hljs-title function_">deepClone</span>(obj[key]);
    }
  }
  
  <span class="hljs-keyword">return</span> clone;
}

<span class="hljs-keyword">const</span> deepCopy2 = <span class="hljs-title function_">deepClone</span>(original);

<span class="hljs-comment">// æ–¹æ³•3ï¼šä½¿ç”¨ç°æˆåº“ï¼ˆæœ€çœå¿ƒï¼‰</span>
<span class="hljs-comment">// const deepCopy3 = _.cloneDeep(original); // Lodash</span>
<span class="hljs-comment">// const deepCopy4 = structuredClone(original); // ç°ä»£JSåŸç”ŸAPI</span>
</code></pre>
<p>ç°åœ¨æ— è®ºæ€ä¹ˆä¿®æ”¹deepCopyï¼Œéƒ½ä¸ä¼šå½±å“originaläº†ï¼</p>
<h2 data-id="heading-3">ğŸ¯ ä»€ä¹ˆæ—¶å€™ç”¨ä»€ä¹ˆï¼Ÿ</h2>
<h3 data-id="heading-4">æµ…æ‹·è´é€‚ç”¨åœºæ™¯ï¼š</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åœºæ™¯1ï¼šé…ç½®åˆå¹¶</span>
<span class="hljs-keyword">const</span> defaultConfig = { <span class="hljs-attr">theme</span>: <span class="hljs-string">'light'</span>, <span class="hljs-attr">showTips</span>: <span class="hljs-literal">true</span> };
<span class="hljs-keyword">const</span> userConfig = { <span class="hljs-attr">theme</span>: <span class="hljs-string">'dark'</span> };
<span class="hljs-keyword">const</span> finalConfig = { ...defaultConfig, ...userConfig };

<span class="hljs-comment">// åœºæ™¯2ï¼šåˆ›å»ºå¯¹è±¡å‰¯æœ¬è¿›è¡Œç®€å•ä¿®æ”¹</span>
<span class="hljs-keyword">const</span> user = { <span class="hljs-attr">name</span>: <span class="hljs-string">'å¼ ä¸‰'</span>, <span class="hljs-attr">loggedIn</span>: <span class="hljs-literal">false</span> };
<span class="hljs-keyword">const</span> updatedUser = { ...user, <span class="hljs-attr">loggedIn</span>: <span class="hljs-literal">true</span> };
</code></pre>
<h3 data-id="heading-5">æ·±æ‹·è´é€‚ç”¨åœºæ™¯ï¼š</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åœºæ™¯1ï¼šçŠ¶æ€ç®¡ç†ï¼ˆå¦‚Redux reducerï¼‰</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">reducer</span>(<span class="hljs-params">state, action</span>) {
  <span class="hljs-keyword">switch</span>(action.<span class="hljs-property">type</span>) {
    <span class="hljs-keyword">case</span> <span class="hljs-string">'UPDATE_USER'</span>:
      <span class="hljs-keyword">return</span> {
        ...state,
        <span class="hljs-attr">user</span>: <span class="hljs-title function_">deepClone</span>(action.<span class="hljs-property">payload</span>) <span class="hljs-comment">// ç¡®ä¿å®Œå…¨ç‹¬ç«‹</span>
      };
  }
}

<span class="hljs-comment">// åœºæ™¯2ï¼šè¡¨å•æ•°æ®çš„åˆå§‹å‰¯æœ¬</span>
<span class="hljs-keyword">const</span> initialFormData = <span class="hljs-title function_">deepClone</span>(templateData);
<span class="hljs-keyword">const</span> formData = <span class="hljs-title function_">deepClone</span>(initialFormData); <span class="hljs-comment">// æ¯æ¬¡éƒ½æ˜¯æ–°çš„å¼€å§‹</span>
</code></pre>
<h2 data-id="heading-6">ğŸ§ª è¶£å‘³å®éªŒï¼šæ‹·è´çš„é™·é˜±</h2>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// é™·é˜±1ï¼šå¾ªç¯å¼•ç”¨ï¼ˆè‡ªå·±å¼•ç”¨è‡ªå·±ï¼‰</span>
<span class="hljs-keyword">const</span> narcissist = { <span class="hljs-attr">name</span>: <span class="hljs-string">"è‡ªæ‹å¯¹è±¡"</span> };
narcissist.<span class="hljs-property">self</span> = narcissist; <span class="hljs-comment">// æˆ‘å¼•ç”¨æˆ‘è‡ªå·±ï¼</span>

<span class="hljs-comment">// JSONå¤§æ³•ä¼šæŠ¥é”™ï¼</span>
<span class="hljs-comment">// JSON.parse(JSON.stringify(narcissist)); // TypeError!</span>

<span class="hljs-comment">// é™·é˜±2ï¼šç‰¹æ®Šå¯¹è±¡</span>
<span class="hljs-keyword">const</span> specialObj = {
  <span class="hljs-attr">date</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(),
  <span class="hljs-attr">regex</span>: <span class="hljs-regexp">/hello/gi</span>,
  <span class="hljs-attr">func</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) { <span class="hljs-keyword">return</span> <span class="hljs-string">"Hi"</span>; },
  <span class="hljs-attr">undefined</span>: <span class="hljs-literal">undefined</span>,
  <span class="hljs-attr">infinity</span>: <span class="hljs-title class_">Infinity</span>,
  <span class="hljs-attr">nan</span>: <span class="hljs-title class_">NaN</span>
};

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(specialObj)));
<span class="hljs-comment">// å‡½æ•°ã€undefinedä¸è§äº†ï¼æ—¥æœŸå˜æˆäº†å­—ç¬¦ä¸²...</span>
</code></pre>
<h2 data-id="heading-7">ğŸ“Š æ€§èƒ½å¯¹æ¯”ï¼šé€Ÿåº¦ä¸æ·±åº¦çš„åšå¼ˆ</h2>






















































<table><thead><tr><th>æ–¹æ³•</th><th>é€Ÿåº¦</th><th>æ·±åº¦</th><th>ç‰¹æ®Šç±»å‹æ”¯æŒ</th><th>å¾ªç¯å¼•ç”¨æ”¯æŒ</th></tr></thead><tbody><tr><td>æ‰©å±•è¿ç®—ç¬¦ <code>...</code></td><td>âš¡âš¡âš¡âš¡âš¡</td><td>æµ…</td><td>æœ‰é™</td><td>âŒ</td></tr><tr><td><code>Object.assign()</code></td><td>âš¡âš¡âš¡âš¡âš¡</td><td>æµ…</td><td>æœ‰é™</td><td>âŒ</td></tr><tr><td>JSONæ–¹æ³•</td><td>âš¡âš¡âš¡</td><td>æ·±</td><td>å·®</td><td>âŒ</td></tr><tr><td>é€’å½’å®ç°</td><td>âš¡âš¡</td><td>æ·±</td><td>å¥½</td><td>âŒ</td></tr><tr><td>Lodashçš„cloneDeep</td><td>âš¡âš¡</td><td>æ·±</td><td>å¾ˆå¥½</td><td>âœ…</td></tr><tr><td><code>structuredClone()</code></td><td>âš¡âš¡âš¡</td><td>æ·±</td><td>è¾ƒå¥½</td><td>âœ…</td></tr></tbody></table>
<h2 data-id="heading-8">ğŸ’¡ å®ç”¨å°è´´å£«</h2>
<ol>
<li>
<p><strong>â€œå…ˆé—®è¦ä¸è¦ï¼Œå†é—®æ€ä¹ˆåšâ€</strong> - å…ˆç¡®å®šæ˜¯å¦éœ€è¦æ·±æ‹·è´ï¼Œå¾ˆå¤šæƒ…å†µæµ…æ‹·è´å°±å¤Ÿç”¨äº†</p>
</li>
<li>
<p><strong>ç°ä»£JSçš„æ•‘æ˜Ÿ</strong>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æµè§ˆå™¨å’ŒNode.jsçš„æ–°å® </span>
<span class="hljs-keyword">const</span> cloned = <span class="hljs-title function_">structuredClone</span>(original); <span class="hljs-comment">// æ”¯æŒå¤§éƒ¨åˆ†ç±»å‹ï¼</span>
</code></pre>
</li>
<li>
<p><strong>Lodashæ˜¯ä½ çš„å¥½æœ‹å‹</strong>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { cloneDeep } <span class="hljs-keyword">from</span> <span class="hljs-string">'lodash-es'</span>; <span class="hljs-comment">// æŒ‰éœ€å¼•å…¥</span>
<span class="hljs-comment">// æˆ–è€…ç”¨ throttle çš„æ·±æ‹·è´å‡½æ•°</span>
</code></pre>
</li>
<li>
<p><strong>æ€§èƒ½æç¤º</strong>ï¼šå¯¹äºè¶…å¤§å¯¹è±¡ï¼Œè€ƒè™‘æ˜¯å¦éœ€è¦æ•´ä¸ªæ‹·è´ï¼Œä¹Ÿè®¸åªéœ€ä¿®æ”¹éƒ¨åˆ†</p>
</li>
</ol>
<h2 data-id="heading-9">ğŸ¬ å®æˆ˜æ¼”ç»ƒï¼šæ‹·è´åœ¨çœŸå®åœºæ™¯çš„åº”ç”¨</h2>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// è´­ç‰©è½¦åœºæ™¯</span>
<span class="hljs-keyword">const</span> shoppingCart = {
  <span class="hljs-attr">items</span>: [
    { <span class="hljs-attr">id</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">"JavaScripté«˜çº§ç¼–ç¨‹"</span>, <span class="hljs-attr">quantity</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">price</span>: <span class="hljs-number">99</span> },
    { <span class="hljs-attr">id</span>: <span class="hljs-number">2</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">"TypeScriptå…¥é—¨"</span>, <span class="hljs-attr">quantity</span>: <span class="hljs-number">2</span>, <span class="hljs-attr">price</span>: <span class="hljs-number">79</span> }
  ],
  <span class="hljs-attr">discount</span>: <span class="hljs-number">0.1</span>,
  <span class="hljs-title function_">getTotal</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>.<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">sum, item</span>) =&gt;</span> 
      sum + item.<span class="hljs-property">price</span> * item.<span class="hljs-property">quantity</span>, <span class="hljs-number">0</span>) * (<span class="hljs-number">1</span> - <span class="hljs-variable language_">this</span>.<span class="hljs-property">discount</span>);
  }
};

<span class="hljs-comment">// ç”¨æˆ·æƒ³â€œå¦‚æœè¿™æ ·ä¹°â€çš„è¯•ç®—åŠŸèƒ½</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">whatIfAddItem</span>(<span class="hljs-params">cart, newItem</span>) {
  <span class="hljs-keyword">const</span> hypotheticalCart = <span class="hljs-title function_">deepClone</span>(cart);
  hypotheticalCart.<span class="hljs-property">items</span>.<span class="hljs-title function_">push</span>(newItem);
  <span class="hljs-keyword">return</span> hypotheticalCart.<span class="hljs-title function_">getTotal</span>();
}

<span class="hljs-comment">// çœŸå®çš„è´­ç‰©è½¦ä¸å—å½±å“</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(shoppingCart.<span class="hljs-property">items</span>.<span class="hljs-property">length</span>); <span class="hljs-comment">// è¿˜æ˜¯2ä¸ª</span>
</code></pre>
<h2 data-id="heading-10">ğŸ“ æ€»ç»“ï¼šæ‹·è´é€‰æ‹©æŒ‡å—</h2>
<ol>
<li><strong>â€œæˆ‘åªæƒ³æ”¹æ”¹è¡¨é¢â€</strong> â†’ ç”¨æµ…æ‹·è´ï¼ˆ<code>...</code>æˆ–<code>Object.assign</code>ï¼‰</li>
<li><strong>â€œæˆ‘è¦å®Œå…¨ç‹¬ç«‹çš„æ–°å¯¹è±¡â€</strong> â†’ ç”¨æ·±æ‹·è´</li>
<li><strong>â€œæˆ‘æœ‰ç‰¹æ®Šç±»å‹æˆ–å¾ªç¯å¼•ç”¨â€</strong> â†’ ç”¨<code>structuredClone()</code>æˆ–Lodash</li>
<li><strong>â€œä¸ç¡®å®šæ·±æµ…â€</strong> â†’ é—®é—®è‡ªå·±ï¼šåµŒå¥—å¯¹è±¡éœ€è¦ç‹¬ç«‹å—ï¼Ÿ</li>
</ol>
<p>è®°ä½ï¼Œåœ¨JavaScriptçš„ä¸–ç•Œé‡Œï¼Œ<strong>â€œæ‹·è´â€ä¸æ˜¯ç®€å•çš„å¤åˆ¶ç²˜è´´ï¼Œè€Œæ˜¯å…³äºâ€œç‹¬ç«‹æ€§â€çš„å“²å­¦é€‰æ‹©</strong>ã€‚é€‰æ‹©æ­£ç¡®çš„æ‹·è´æ–¹å¼ï¼Œèƒ½è®©ä½ çš„ä»£ç æ›´å¥å£®ã€æ›´å¯é¢„æµ‹ï¼</p>
<p>ä¸‹æ¬¡å½“ä½ é¢å¯¹éœ€è¦æ‹·è´çš„åœºæ™¯æ—¶ï¼Œä¸å¦¨å…ˆæƒ³æƒ³ï¼šè¿™æ˜¯ä¸€ä¸ªéœ€è¦ç‹¬ç«‹é—¨æˆ·çš„æ·±æ‹·è´ï¼Œè¿˜æ˜¯ä¸€ä¸ªå¯ä»¥å…±äº«èŠ¯å­çš„æµ…æ‹·è´ï¼Ÿ</p>
<hr/>
<p>âœ¨ <strong>å°æµ‹éªŒ</strong>ï¼šä½ èƒ½çœ‹å‡ºä¸‹é¢ä»£ç çš„è¾“å‡ºå—ï¼Ÿ</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> obj = { <span class="hljs-attr">a</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">b</span>: { <span class="hljs-attr">c</span>: <span class="hljs-number">2</span> } };
<span class="hljs-keyword">const</span> shallow = { ...obj };
<span class="hljs-keyword">const</span> deep = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(obj));

shallow.<span class="hljs-property">b</span>.<span class="hljs-property">c</span> = <span class="hljs-number">999</span>;
deep.<span class="hljs-property">b</span>.<span class="hljs-property">c</span> = <span class="hljs-number">888</span>;

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(obj.<span class="hljs-property">b</span>.<span class="hljs-property">c</span>); <span class="hljs-comment">// æ˜¯å¤šå°‘ï¼Ÿ</span>
</code></pre>
<p><em>ç­”æ¡ˆï¼š999ï¼Œå› ä¸ºæµ…æ‹·è´å…±äº«äº†åµŒå¥—å¯¹è±¡ï¼</em></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¤šé˜¶æ®µåŠ¨æ•ˆå¦‚ä½•æ‘†è„±å›è°ƒåœ°ç‹±ï¼šä¸€ä¸ªåŸºäº ArkUI çš„ AnimationStepper è®¾è®¡]]></title>    <link>https://juejin.cn/post/7584740835368861750</link>    <guid>https://juejin.cn/post/7584740835368861750</guid>    <pubDate>2025-12-18T04:33:47.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7584740835368861750" data-draft-id="7584759201071923241" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¤šé˜¶æ®µåŠ¨æ•ˆå¦‚ä½•æ‘†è„±å›è°ƒåœ°ç‹±ï¼šä¸€ä¸ªåŸºäº ArkUI çš„ AnimationStepper è®¾è®¡"/> <meta itemprop="keywords" content="HarmonyOS"/> <meta itemprop="datePublished" content="2025-12-18T04:33:47.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Archilect"/> <meta itemprop="url" content="https://juejin.cn/user/1505660538979515"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¤šé˜¶æ®µåŠ¨æ•ˆå¦‚ä½•æ‘†è„±å›è°ƒåœ°ç‹±ï¼šä¸€ä¸ªåŸºäº ArkUI çš„ AnimationStepper è®¾è®¡
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1505660538979515/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Archilect
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-18T04:33:47.000Z" title="Thu Dec 18 2025 04:33:47 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-18
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¤šé˜¶æ®µåŠ¨æ•ˆå¦‚ä½•æ‘†è„±å›è°ƒåœ°ç‹±ï¼šä¸€ä¸ªåŸºäº ArkUI çš„ AnimationStepper è®¾è®¡</h2>
<blockquote>
<p>å…³é”®è¯ï¼šArkUIã€ETSã€å¤šé˜¶æ®µåŠ¨ç”»ã€å›è°ƒåœ°ç‹±ã€åŠ¨ç”»ç¼–æ’</p>
</blockquote>
<p><em>TL;DRï¼šå…ˆæŠŠæ¯ä¸€æ­¥åŠ¨ç”»å®šä¹‰æˆæ•°æ®ï¼Œå†ç”¨ä¸€ä¸ªç»Ÿä¸€é©±åŠ¨å™¨é¡ºåºæ‰§è¡Œï¼Œä½ å°±å†ä¹Ÿä¸ç”¨åœ¨ onFinish é‡Œæ‰‹åŠ¨æ¥åŠ›ã€‚</em></p>
<p>åœ¨å¤æ‚å¼¹çª—å…³é—­åŠ¨æ•ˆé‡Œï¼Œæˆ‘ä»¬ç»å¸¸ä¼šé‡åˆ°è¿™æ ·çš„éœ€æ±‚ï¼š</p>
<ul>
<li>å…ˆè½»å¾®æ”¾å¤§æç¤ºã€ŒåŠ¨æ•ˆå¼€å§‹ã€ï¼›</li>
<li>ç„¶åç¼©å°åˆ°ä¸€ä¸ªè¾ƒå°çš„å°ºå¯¸ï¼›</li>
<li>å†åˆ‡æ¢æˆå›¾æ ‡å½¢æ€ï¼Œåšä¸€æ®µæ¥å›æ™ƒåŠ¨ï¼›</li>
<li>æœ€åæ²¿ä¸€æ¡æ›²çº¿æŠ›æ·åˆ°æŸä¸ªç›®æ ‡å…¥å£ã€‚</li>
</ul>
<p>è¿™äº›é˜¶æ®µä¹‹é—´æœ‰ä¸¥æ ¼çš„å…ˆåé¡ºåºï¼Œè€Œä¸”æ¯ä¸ªé˜¶æ®µç”¨çš„åŠ¨ç”»å‚æ•°ï¼ˆæ—¶é•¿ã€æ›²çº¿ã€onFinishï¼‰éƒ½ä¸åŒã€‚<br/>
å¦‚æœä¸åŠ æŠ½è±¡ï¼Œä»£ç å¾ˆå®¹æ˜“å˜æˆä¸€ä¸²åµŒå¥—çš„ <code>animateTo</code> + <code>onFinish</code>ï¼Œç»´æŠ¤æˆæœ¬æé«˜ã€‚</p>
<p>æœ¬æ–‡åˆ†äº«ä¸€å¥—åœ¨ ArkUI/ETS ä¸‹çš„é€šç”¨åšæ³•ï¼š<strong>AnimationStepperï¼ˆåŠ¨ç”»æ­¥éª¤æœºï¼‰</strong>ï¼Œå®ƒæŠŠå¤šé˜¶æ®µåŠ¨ç”»æŠ½è±¡æˆã€Œä»»åŠ¡è¡¨ + ä»»åŠ¡é˜Ÿåˆ—ã€ï¼Œä»æºå¤´ä¸Šæ¶ˆç­å›è°ƒåœ°ç‹±ã€‚</p>
<hr/>
<h3 data-id="heading-1">ä¸€ã€å…¸å‹é—®é¢˜ï¼šå¤šé˜¶æ®µåŠ¨ç”»çš„å›è°ƒåœ°ç‹±</h3>
<p>å…ˆçœ‹ä¸€ä¸ªç®€åŒ–çš„åä¾‹ï¼ˆä¼ªä»£ç ï¼‰ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// ä¼ªä»£ç ç¤ºæ„ï¼šä¸è¦è¿™æ ·å†™</span>
uiCtx.<span class="hljs-title function_">animateTo</span>(step1Param, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-comment">// æ­¥éª¤1ï¼šæ”¾å¤§</span>
  popupScale = <span class="hljs-number">1.1</span>
}, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-comment">// onFinish1 -&gt; æ­¥éª¤2</span>
  uiCtx.<span class="hljs-title function_">animateTo</span>(step2Param, <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-comment">// æ­¥éª¤2ï¼šç¼©å°</span>
    popupScale = <span class="hljs-number">0.8</span>
  }, <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-comment">// onFinish2 -&gt; æ­¥éª¤3</span>
    uiCtx.<span class="hljs-title function_">animateTo</span>(step3Param, <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-comment">// æ­¥éª¤3ï¼šåˆ‡ icon</span>
      form = <span class="hljs-string">'icon'</span>
    }, <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-comment">// onFinish3 -&gt; æ­¥éª¤4</span>
      uiCtx.<span class="hljs-title function_">animateTo</span>(step4Param, <span class="hljs-function">() =&gt;</span> {
        <span class="hljs-comment">// æ­¥éª¤4ï¼šæ—‹è½¬</span>
        rotation = <span class="hljs-number">0</span>
      }, <span class="hljs-function">() =&gt;</span> {
        <span class="hljs-comment">// ...</span>
      })
    })
  })
})
</code></pre>
<blockquote>
<p>æ³¨ï¼šæ–‡ä¸­çš„ <code>popupScale</code>ã€<code>form</code> ç­‰å˜é‡ä»…ä¸ºç¤ºä¾‹ï¼Œä»£è¡¨ä½ åœ¨çœŸå®é¡¹ç›®é‡Œçš„æœ¬åœ° UI çŠ¶æ€ã€‚</p>
</blockquote>
<p>è¿™æ ·å†™çš„ç—›ç‚¹å¤§å®¶éƒ½å¾ˆç†Ÿæ‚‰ï¼š</p>
<ul>
<li><strong>å¯è¯»æ€§å·®</strong>ï¼šåŠ¨ç”»å‚æ•°å’Œä¸šåŠ¡é€»è¾‘å¤¹åœ¨ä¸€èµ·ï¼Œå¾ˆéš¾å¿«é€Ÿçœ‹å‡ºã€Œæ•´ä¸ªé—­ç¯æœ‰å‡ ä¸ªé˜¶æ®µã€é¡ºåºæ˜¯ä»€ä¹ˆã€ï¼›</li>
<li><strong>æ”¹åŠ¨æˆæœ¬é«˜</strong>ï¼šæƒ³åœ¨ä¸­é—´æ’å…¥/åˆ é™¤ä¸€ä¸ªæ­¥éª¤ï¼Œè¦åŒæ—¶æ”¹å¤šä¸ª <code>onFinish</code>ï¼Œéå¸¸å®¹æ˜“å¼•å…¥ bugï¼›</li>
<li><strong>éš¾ä»¥åŸ‹ç‚¹å’Œè°ƒè¯•</strong>ï¼šæ¯ä¸€æ­¥å¼€å§‹/ç»“æŸéƒ½æƒ³æ‰“æ—¥å¿—/åŸ‹ç‚¹æ—¶ï¼Œåªèƒ½åœ¨å„ä¸ª <code>onFinish</code> é‡Œæ‰‹åŠ¨åŠ ï¼›</li>
<li><strong>éš¾ä»¥å¤ç”¨</strong>ï¼šå¦ä¸€å¤„å¦‚æœä¹Ÿè¦åšç±»ä¼¼çš„å¤šé˜¶æ®µåŠ¨æ•ˆï¼Œåªèƒ½å†å¤åˆ¶ä¸€ä»½å›è°ƒåœ°ç‹±ã€‚</li>
</ul>
<p>æˆ‘ä»¬å¸Œæœ›æŠŠã€Œå¤šé˜¶æ®µåŠ¨ç”»ã€çš„æ—¶åºï¼Œå˜æˆä¸€å¼ ä¸€ç›®äº†ç„¶çš„ã€Œä»»åŠ¡åˆ—è¡¨ã€ï¼Œå¹¶ä¸”æœ‰ä¸€ä¸ªç»Ÿä¸€çš„é©±åŠ¨å™¨æ¥é¡ºåºæ‰§è¡Œè¿™äº›ä»»åŠ¡ã€‚</p>
<hr/>
<h3 data-id="heading-2">äºŒã€æ ¸å¿ƒæ€æƒ³ï¼šä»»åŠ¡è¡¨ + ä»»åŠ¡é˜Ÿåˆ— + ç»Ÿä¸€é©±åŠ¨</h3>
<p>æ€è·¯éå¸¸ç®€å•ï¼š</p>
<ul>
<li>ç”¨ä¸€ä¸ª <strong>ä»»åŠ¡è¡¨ï¼ˆTask Mapï¼‰</strong> æè¿°ã€Œæ¯ä¸ªä»»åŠ¡åå¯¹åº”çš„ä¸€æ®µåŠ¨ç”»ã€ï¼›</li>
<li>æ¯æ®µåŠ¨ç”»ç”±ä¸¤ä¸ªéƒ¨åˆ†ç»„æˆï¼š
<ul>
<li><code>change</code>ï¼šè¦ä¿®æ”¹çš„å±æ€§ï¼ˆscaleã€rotationã€form ç­‰ï¼‰ï¼›</li>
<li><code>animateParam</code>ï¼šè¿™æ¬¡åŠ¨ç”»çš„å‚æ•°ï¼ˆdurationã€curveã€delayã€onFinish ç­‰ï¼‰ï¼›</li>
</ul>
</li>
<li>ç”¨ä¸€ä¸ª <strong>ä»»åŠ¡é˜Ÿåˆ—ï¼ˆTask Queueï¼‰</strong> è¡¨ç¤ºã€Œè¿™ä¸€æ¬¡å…³é—­åŠ¨æ•ˆè¦èµ°å“ªäº›æ­¥éª¤ã€ï¼›</li>
<li>ç”¨ä¸€ä¸ªç»Ÿä¸€çš„ <strong>AnimationStepper</strong> é©±åŠ¨å™¨ï¼š
<ul>
<li>å–å‡ºé˜Ÿåˆ—å¤´éƒ¨ä»»åŠ¡ï¼›</li>
<li>è°ƒç”¨ <code>uiCtx.animateTo(animateParam, change)</code>ï¼›</li>
<li>åŠ¨ç”»ç»“æŸåï¼Œè‡ªåŠ¨æ¨è¿›åˆ°ä¸‹ä¸€ä¸ªä»»åŠ¡ï¼ˆé™¤éå½“å‰ä»»åŠ¡è‡ªå®šä¹‰äº† <code>onFinish</code>ï¼‰ã€‚</li>
</ul>
</li>
</ul>
<p>ç”¨ mermaid ç”»ä¸€ä¸ªç®€å•çš„æµç¨‹ç¤ºæ„ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
  participant Popup as PopupContainer
  participant Engine as CloseAnimationEngine
  participant Stepper as AnimationStepper
  participant UI as ArkUI Context

  Popup-&gt;&gt;Engine: onClose()
  Engine-&gt;&gt;Stepper: start([task1, task2, task3...])
  loop for each task
    Stepper-&gt;&gt;UI: animateTo(animateParam, change)
    UI--&gt;&gt;Stepper: onFinish()
    Stepper-&gt;&gt;Stepper: play next task (default)
  end
  Stepper--&gt;&gt;Engine: all tasks done
  Engine--&gt;&gt;Popup: emitCloseFinished()
</code></pre>
<blockquote>
<p>å¦‚æœå¹³å°ä¸æ”¯æŒ mermaidï¼Œå¯å¤åˆ¶ä»£ç å—åˆ° <a href="https://link.juejin.cn?target=https%3A%2F%2Fmermaid.live" target="_blank" title="https://mermaid.live" ref="nofollow noopener noreferrer">mermaid.live</a> æŸ¥çœ‹ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-3">ä¸‰ã€AnimationStepper çš„é€šç”¨æ¥å£è®¾è®¡</h3>
<p>åœ¨ ArkUI/ETS ä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠ AnimationStepper è®¾è®¡æˆä¸€ä¸ªä¸ä¸šåŠ¡å®Œå…¨è§£è€¦çš„ç±»ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// åŠ¨ç”»æ­¥éª¤çš„æè¿°</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">StepConfig</span> {
  <span class="hljs-attr">change</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">void</span>              <span class="hljs-comment">// è¿™ä¸€æ­¥è¦ä¿®æ”¹çš„å±æ€§</span>
  animateParam?: <span class="hljs-title class_">AnimateParam</span>     <span class="hljs-comment">// ArkUI animateTo çš„å‚æ•°ï¼ˆå¯é€‰ï¼‰</span>
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AnimationStepper</span> {
  <span class="hljs-keyword">private</span> <span class="hljs-attr">stepMap</span>: <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-title class_">StepConfig</span>&gt;
  <span class="hljs-keyword">private</span> <span class="hljs-attr">queue</span>: <span class="hljs-built_in">string</span>[] = []

  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">stepMap: Record&lt;<span class="hljs-built_in">string</span>, StepConfig&gt;</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">stepMap</span> = stepMap
  }

  <span class="hljs-title function_">start</span>(<span class="hljs-attr">taskList</span>: <span class="hljs-built_in">string</span>[]): <span class="hljs-built_in">void</span> {
    <span class="hljs-keyword">if</span> (!taskList || taskList.<span class="hljs-property">length</span> === <span class="hljs-number">0</span>) {
      <span class="hljs-keyword">return</span>
    }
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">queue</span> = [...taskList]  <span class="hljs-comment">// æ‹·è´ä¸€ä»½ï¼Œé¿å…å¤–éƒ¨ä¿®æ”¹</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">play</span>()
  }

  <span class="hljs-keyword">private</span> <span class="hljs-title function_">play</span>(): <span class="hljs-built_in">void</span> {
    <span class="hljs-keyword">const</span> taskName = <span class="hljs-variable language_">this</span>.<span class="hljs-property">queue</span>.<span class="hljs-title function_">shift</span>()
    <span class="hljs-keyword">if</span> (!taskName) {
      <span class="hljs-keyword">return</span>
    }

    <span class="hljs-keyword">const</span> step = <span class="hljs-variable language_">this</span>.<span class="hljs-property">stepMap</span>[taskName]
    <span class="hljs-keyword">if</span> (!step) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(<span class="hljs-string">`Unknown animation step: <span class="hljs-subst">${taskName}</span>`</span>)
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">play</span>()  <span class="hljs-comment">// è·³è¿‡éæ³•ä»»åŠ¡ï¼Œç»§ç»­ä¸‹ä¸€ä¸ª</span>
      <span class="hljs-keyword">return</span>
    }

    <span class="hljs-keyword">const</span> p = step.<span class="hljs-property">animateParam</span>
    <span class="hljs-keyword">const</span> <span class="hljs-attr">animParam</span>: <span class="hljs-title class_">AnimateParam</span> = {
      <span class="hljs-attr">duration</span>: p?.<span class="hljs-property">duration</span>,
      <span class="hljs-attr">curve</span>: p?.<span class="hljs-property">curve</span>,
      <span class="hljs-attr">delay</span>: p?.<span class="hljs-property">delay</span>,
      <span class="hljs-attr">iterations</span>: p?.<span class="hljs-property">iterations</span>,
      <span class="hljs-attr">playMode</span>: p?.<span class="hljs-property">playMode</span>,
      <span class="hljs-comment">// å¦‚æœæ²¡æœ‰è‡ªå®šä¹‰ onFinishï¼Œå°±è‡ªåŠ¨æ’­æ”¾ä¸‹ä¸€ä¸ªä»»åŠ¡</span>
      <span class="hljs-attr">onFinish</span>: p?.<span class="hljs-property">onFinish</span> ?? (<span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">play</span>()),
    }

    <span class="hljs-comment">// æ³¨æ„ï¼šè¿™é‡Œç”¨çš„æ˜¯å…¨å±€çš„æˆ–æ³¨å…¥çš„ uiContext</span>
    uiContext.<span class="hljs-title function_">animateTo</span>(animParam, step.<span class="hljs-property">change</span>)
  }
}
</code></pre>
<p>è¦ç‚¹ï¼š</p>
<ul>
<li><strong>ä»»åŠ¡è¡¨ stepMap</strong> é€šè¿‡æ„é€ å‡½æ•°æ³¨å…¥ï¼ŒAnimationStepper æœ¬èº«ä¸çŸ¥é“ã€Œä¸šåŠ¡æ˜¯ä»€ä¹ˆã€ï¼Œåªè´Ÿè´£è°ƒåº¦ï¼›</li>
<li><code>start()</code> åªæ¥æ”¶ä»»åŠ¡åæ•°ç»„ï¼Œå¤–éƒ¨å¯ä»¥é€šè¿‡ä¸åŒæ•°ç»„æ¥ç»„åˆä¸åŒé“¾è·¯ï¼›</li>
<li>é»˜è®¤ <code>onFinish</code> ä¼šè‡ªåŠ¨æ¨è¿› <code>play()</code>ï¼Œåªæœ‰åœ¨ä½ æ˜ç¡®å†™äº† <code>onFinish</code> æ—¶ï¼Œæ‰ä¼šè¦†ç›–è¿™ä¸ªè¡Œä¸ºã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-4">å››ã€æŠŠå…³é—­åŠ¨æ•ˆæ‹†æˆä»»åŠ¡ï¼šä¸¤ä¸ªé“¾è·¯çš„ä»»åŠ¡è¡¨è®¾è®¡</h3>
<p>ä»¥ä¸€ä¸ªé€šç”¨çš„å…³é—­åŠ¨æ•ˆä¸ºä¾‹ï¼Œæˆ‘ä»¬å¯ä»¥è®¾è®¡ä»¥ä¸‹å‡ ä¸ªä»»åŠ¡ï¼ˆåå­—èµ·å¾—è¯­ä¹‰åŒ–ä¸€ç‚¹ï¼Œä¾¿äºé˜…è¯»ï¼‰ï¼š</p>
<ul>
<li><code>centerScaleUp</code>ï¼šå±…ä¸­è½»å¾®æ”¾å¤§ï¼Œæ¯”å¦‚ 1.0 â†’ 1.1ï¼›</li>
<li><code>centerScaleDownToIcon</code>ï¼šä»åŸå§‹å°ºå¯¸ç¼©å°åˆ°æ¥è¿‘å›¾æ ‡å¤§å°ï¼›</li>
<li><code>switchToIcon</code>ï¼šåˆ‡æ¢åˆ° icon å½¢æ€ï¼›</li>
<li><code>wobbleIcon</code>ï¼šä½¿ç”¨å¼¹ç°§æ›²çº¿åšæ¥å›æ™ƒåŠ¨ï¼›</li>
<li><code>shrinkAndThrow</code>ï¼šç¼©å°å¹¶æ²¿è´å¡å°”æ›²çº¿æŠ›æ·åˆ°ç»ˆç‚¹ã€‚</li>
</ul>
<p>å¯¹äºã€Œæ— å›¾æ ‡æ¨¡å¼ã€ï¼Œä»»åŠ¡é“¾å¯ä»¥æ˜¯ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">const</span> tasksWithoutIcon = [<span class="hljs-string">'centerScaleUp'</span>]  <span class="hljs-comment">// onFinish é‡Œç›´æ¥æ¥ shrinkAndThrow</span>
</code></pre>
<p>å¯¹äºã€Œæœ‰å›¾æ ‡æ¨¡å¼ã€ï¼Œä»»åŠ¡é“¾å¯ä»¥æ˜¯ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">const</span> tasksWithIcon = [<span class="hljs-string">'centerScaleDownToIcon'</span>, <span class="hljs-string">'switchToIcon'</span>] <span class="hljs-comment">// switchToIcon çš„ onFinish å†èµ· wobble</span>
</code></pre>
<p>å¯¹åº”çš„ä»»åŠ¡è¡¨ç¤ºä¾‹ï¼ˆä¼ªä»£ç ï¼Œ<code>popupState</code>/<code>engine</code> å‡æŒ‡ä»£ä½ æŒæœ‰çš„æœ¬åœ° UI çŠ¶æ€ä¸åŠ¨æ•ˆå¼•æ“å®ä¾‹ï¼‰ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">const</span> <span class="hljs-attr">stepMap</span>: <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-title class_">StepConfig</span>&gt; = {
  <span class="hljs-attr">centerScaleUp</span>: {
    <span class="hljs-attr">change</span>: <span class="hljs-function">() =&gt;</span> {
      popupState.<span class="hljs-property">scale</span> = <span class="hljs-number">1.1</span>
    },
    <span class="hljs-attr">animateParam</span>: {
      <span class="hljs-attr">duration</span>: <span class="hljs-number">400</span>,
      <span class="hljs-attr">curve</span>: <span class="hljs-title class_">Curve</span>.<span class="hljs-property">EaseOut</span>,
      <span class="hljs-attr">onFinish</span>: <span class="hljs-function">() =&gt;</span> {
        <span class="hljs-comment">// æ—  icon æ¨¡å¼ä¸‹ï¼Œç›´æ¥è¿›å…¥æŠ›æ·</span>
        engine.<span class="hljs-title function_">startThrowAnimation</span>()
      },
    },
  },
  <span class="hljs-attr">centerScaleDownToIcon</span>: {
    <span class="hljs-attr">change</span>: <span class="hljs-function">() =&gt;</span> {
      popupState.<span class="hljs-property">scale</span> = engine.<span class="hljs-property">iconScale</span>
    },
    <span class="hljs-attr">animateParam</span>: { <span class="hljs-attr">duration</span>: <span class="hljs-number">300</span> },
  },
  <span class="hljs-attr">switchToIcon</span>: {
    <span class="hljs-attr">change</span>: <span class="hljs-function">() =&gt;</span> {
      popupState.<span class="hljs-property">form</span> = <span class="hljs-string">'icon'</span>
    },
    <span class="hljs-attr">animateParam</span>: {
      <span class="hljs-attr">duration</span>: <span class="hljs-number">100</span>,
      <span class="hljs-attr">onFinish</span>: <span class="hljs-function">() =&gt;</span> {
        <span class="hljs-comment">// åˆ‡ icon å®Œæˆåï¼Œå•ç‹¬å¼€ä¸€æ¡ wobble é“¾è·¯</span>
        stepper.<span class="hljs-title function_">start</span>([<span class="hljs-string">'wobbleIcon'</span>])
      },
    },
  },
  <span class="hljs-attr">wobbleIcon</span>: {
    <span class="hljs-attr">change</span>: <span class="hljs-function">() =&gt;</span> {
      popupState.<span class="hljs-property">rotation</span> = <span class="hljs-number">0</span>
    },
    <span class="hljs-attr">animateParam</span>: {
      <span class="hljs-attr">curve</span>: curves.<span class="hljs-title function_">springMotion</span>(<span class="hljs-number">0.125</span>, <span class="hljs-number">0.25</span>),
      <span class="hljs-attr">onFinish</span>: <span class="hljs-function">() =&gt;</span> {
        engine.<span class="hljs-title function_">startThrowAnimation</span>()
      },
    },
  },
}
</code></pre>
<p>è¿™æ ·ï¼Œæ•´ä¸ªåŠ¨æ•ˆçš„æ—¶é—´è½´å°±å˜æˆäº†ä¸¤éƒ¨åˆ†ï¼š</p>
<ul>
<li><strong>ã€Œä¸­å¿ƒç¼©æ”¾ + åˆ‡ icon + wobbleã€ç”± AnimationStepper ç®¡ç†</strong>ï¼›</li>
<li><strong>ã€Œç¼©å° + æŠ›æ· + å…‰åœˆã€ç”± CloseAnimationEngineï¼ˆåŠ¨æ•ˆå¼•æ“ï¼‰å®ç°</strong>ï¼Œè¢«å½“æˆä¸€ä¸ªæ›´ç²—ç²’åº¦çš„æ­¥éª¤ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-5">äº”ã€å’Œä¸šåŠ¡é€»è¾‘çš„åˆ†å±‚ï¼šStepper åªå…³å¿ƒã€Œæ€ä¹ˆåŠ¨ã€ï¼Œä¸å…³å¿ƒã€Œä¸ºä»€ä¹ˆåŠ¨ã€</h3>
<p>å®é™…é¡¹ç›®ä¸­ï¼Œå¾ˆå¤šäººä¼šä¸è‡ªè§‰åœ°æŠŠä¸šåŠ¡é€»è¾‘å†™è¿›åŠ¨ç”»æ­¥éª¤é‡Œï¼Œæ¯”å¦‚ï¼š</p>
<ul>
<li>åœ¨ <code>onFinish</code> é‡Œç›´æ¥åšç½‘ç»œè¯·æ±‚ï¼›</li>
<li>åœ¨ <code>change</code> é‡Œé¡ºå¸¦æ”¹ä¸šåŠ¡çŠ¶æ€ï¼›</li>
<li>åœ¨åŠ¨ç”»æ•°ç»„é‡Œæ··å…¥ä¸€å †åŸ‹ç‚¹é€»è¾‘ã€‚</li>
</ul>
<p>ä¸ºäº†ä¿æŒ AnimationStepper çš„å¯å¤ç”¨æ€§ï¼Œæˆ‘ä»¬å»ºè®®ï¼š</p>
<ul>
<li><strong>ä¸šåŠ¡é€»è¾‘æ”¾åœ¨ä¸Šå±‚ Engine é‡Œ</strong>ï¼š<br/>
æ¯”å¦‚ CloseAnimationEngine ä½œä¸ºåŠ¨æ•ˆå¼•æ“ï¼Œå†³å®šä»€ä¹ˆæ—¶å€™æ’­æ”¾å¤æ‚å…³é—­åŠ¨ç”»ã€ä»€ä¹ˆæ—¶å€™ç›´æ¥å…³é—­ã€ä»€ä¹ˆæ—¶å€™åªæ’­æ”¾éƒ¨åˆ†é“¾è·¯ï¼›</li>
<li><strong>Stepper åªæ¥æ”¶ã€Œè¦ä¿®æ”¹çš„çŠ¶æ€ã€å’Œã€ŒåŠ¨ç”»å‚æ•°ã€</strong>ï¼š<br/>
å®ƒåªè´Ÿè´£ã€Œåœ¨å¤šé•¿æ—¶é—´å†…ï¼ŒæŠŠ state ä» A è°ƒåˆ° Bã€ï¼›</li>
<li><strong>åŸ‹ç‚¹/æ—¥å¿—é€šè¿‡ Hook çš„æ–¹å¼æ³¨å…¥</strong>ï¼š<br/>
å¯ä»¥åœ¨ <code>onFinish</code> é‡Œè°ƒç”¨ä¸Šå±‚æ³¨å…¥çš„å›è°ƒï¼Œè€Œä¸æ˜¯ç›´æ¥å†™å…·ä½“åŸ‹ç‚¹ APIã€‚</li>
</ul>
<p>ä¸€ä¸ªå…¸å‹çš„åˆ†å±‚å†™æ³•æ˜¯ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">class</span> <span class="hljs-title class_">CloseAnimationEngine</span> {
  <span class="hljs-keyword">private</span> <span class="hljs-attr">stepper</span>: <span class="hljs-title class_">AnimationStepper</span>

  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">stepper</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">AnimationStepper</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">buildStepMap</span>())
  }

  <span class="hljs-title function_">startCloseAnimation</span>(<span class="hljs-params">options: { hasIcon: <span class="hljs-built_in">boolean</span> }</span>) {
    <span class="hljs-keyword">const</span> tasks = options.<span class="hljs-property">hasIcon</span>
      ? [<span class="hljs-string">'centerScaleDownToIcon'</span>, <span class="hljs-string">'switchToIcon'</span>]
      : [<span class="hljs-string">'centerScaleUp'</span>]
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">stepper</span>.<span class="hljs-title function_">start</span>(tasks)
  }

  <span class="hljs-keyword">private</span> <span class="hljs-title function_">buildStepMap</span>(): <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-title class_">StepConfig</span>&gt; {
    <span class="hljs-comment">// è¿™é‡Œç»„è£… stepMapï¼Œå†…éƒ¨å¯ä»¥è®¿é—® popupState ç­‰</span>
    <span class="hljs-comment">// ä½†ä¸è¦ç›´æ¥å†™å…·ä½“ä¸šåŠ¡åŸ‹ç‚¹</span>
    <span class="hljs-keyword">return</span> { <span class="hljs-comment">/* ... */</span> }
  }
}
</code></pre>
<p>è¿™æ ·ï¼ŒAnimationStepper å°±å¯ä»¥åœ¨å¤šä¸ªåŠ¨æ•ˆåœºæ™¯ï¼ˆä¸æ­¢å…³é—­åŠ¨æ•ˆï¼‰ä¸­è¢«å¤ç”¨ã€‚</p>
<hr/>
<h3 data-id="heading-6">å…­ã€å®æˆ˜ä¸­çš„å‡ ä¸ªç»éªŒå’Œå‘</h3>
<p>åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬åœ¨ä½¿ç”¨ AnimationStepper æ—¶è¸©è¿‡ä¸€äº›å‘ï¼Œä¹Ÿæœ‰ä¸€äº›å®è·µç»éªŒå¯ä»¥åˆ†äº«ï¼š</p>
<h4 data-id="heading-7">1. ç”¨è¯­ä¹‰åŒ–ä»»åŠ¡åï¼Œé¿å…ã€Œstep1/step2/step3ã€</h4>
<p>ä¸å…¶å†™ï¼š</p>
<pre><code class="hljs language-ts" lang="ts">[<span class="hljs-string">'step1'</span>, <span class="hljs-string">'step2'</span>, <span class="hljs-string">'step3'</span>]
</code></pre>
<p>ä¸å¦‚å†™æˆï¼š</p>
<pre><code class="hljs language-ts" lang="ts">[<span class="hljs-string">'centerScaleUp'</span>, <span class="hljs-string">'switchToIcon'</span>, <span class="hljs-string">'wobbleIcon'</span>]
</code></pre>
<p>è¿™æ ·å½“ä½ åœ¨æ—¥å¿—/åŸ‹ç‚¹é‡Œè®°å½•ä»»åŠ¡åæ—¶ï¼Œä¹Ÿèƒ½ä¸€çœ¼çœ‹æ‡‚ç°åœ¨è¿è¡Œåˆ°äº†å“ªä¸€æ­¥ã€‚</p>
<h4 data-id="heading-8">2. é»˜è®¤é€’å½’æ¨è¿› + è‡ªå®šä¹‰ onFinish</h4>
<p>é»˜è®¤çš„ç­–ç•¥æ˜¯ï¼šå¦‚æœæ²¡æœ‰å®šä¹‰ <code>onFinish</code>ï¼ŒStepper å°±è‡ªåŠ¨å»è·‘ä¸‹ä¸€ä¸ªä»»åŠ¡ã€‚<br/>
è¿™å·²ç»èƒ½è¦†ç›–å¤§éƒ¨åˆ†ã€Œçº¿æ€§å¤šé˜¶æ®µã€åœºæ™¯ã€‚</p>
<p>åªæœ‰å½“ä½ éœ€è¦æ‰“æ–­æµç¨‹ï¼ˆæ¯”å¦‚åœ¨æŸä¸€æ­¥é‡å¯ä¸€æ¡æ–°é“¾è·¯ï¼Œæˆ–åœ¨æŸä¸€æ­¥ç»“æŸæ•´ä¸ªåŠ¨æ•ˆï¼‰æ—¶ï¼Œæ‰å»è‡ªå®šä¹‰ <code>onFinish</code>ã€‚<br/>
ä¾‹å¦‚ä¸Šæ–‡çš„ <code>switchToIcon</code> å’Œ <code>wobbleIcon</code>ã€‚</p>
<h4 data-id="heading-9">3. æ³¨æ„å¼‚æ­¥é€»è¾‘ä¸å¤šæ¬¡ start</h4>
<p>å¦‚æœæŸä¸ªæ­¥éª¤é‡Œè¿˜åŒ…å«å¼‚æ­¥é€»è¾‘ï¼ˆä¾‹å¦‚ç­‰å¾…æŸä¸ªèµ„æº load å®Œæˆï¼‰ï¼Œè¦æ³¨æ„é˜²æ­¢ã€Œé‡å¤ startã€å¯¼è‡´é˜Ÿåˆ—è¢«è¦†ç›–æˆ–äº¤é”™ã€‚<br/>
å»ºè®®ï¼š</p>
<ul>
<li>æ¯æ¬¡ <code>start</code> å‰å†…éƒ¨æ¸…ç©ºé˜Ÿåˆ—ï¼›</li>
<li>å¯¹äºæ¶‰åŠå¼‚æ­¥çš„æ­¥éª¤ï¼Œé¢å¤–åœ¨ä¸Šå±‚ Engine åšçŠ¶æ€é˜²æŠ–ï¼ˆä¾‹å¦‚ã€ŒåŠ¨æ•ˆè¿è¡Œä¸­ã€æ ‡è®°ï¼‰ã€‚</li>
</ul>
<h4 data-id="heading-10">4. ç»™æ¯ä¸€æ­¥åŸ‹ç‚¹æˆ–æ‰“æ—¥å¿—</h4>
<p>AnimationStepper çš„ä¸€ä¸ªå·¨å¤§ä¼˜åŠ¿æ˜¯ï¼š<br/>
<strong>å®ƒä¸ºæ¯ä¸€æ­¥åŠ¨ç”»å¤©ç„¶æä¾›äº†ä¸€ä¸ªã€Œå”¯ä¸€ä»»åŠ¡åã€</strong>ï¼Œå¯ä»¥ç”¨æ¥åšåŸ‹ç‚¹æˆ–æ—¥å¿—ã€‚</p>
<p>æ¯”å¦‚åœ¨ <code>play()</code> é‡ŒåŠ ä¸€è¡Œï¼š</p>
<pre><code class="hljs language-ts" lang="ts">logger.<span class="hljs-title function_">info</span>(<span class="hljs-string">`[AnimationStepper] start task: <span class="hljs-subst">${taskName}</span>`</span>)
</code></pre>
<p>å†åœ¨ onFinish é‡ŒåŠ ä¸€ä¸ªç»“æŸæ—¶é—´æˆ³ï¼Œå°±å¯ä»¥å¾ˆå®¹æ˜“åœ°ç»Ÿè®¡å‡ºï¼š</p>
<ul>
<li>æ¯ä¸€æ­¥çš„å¹³å‡è€—æ—¶ï¼›</li>
<li>å“ªä¸€æ­¥æœ€å®¹æ˜“è¢«ç”¨æˆ·ä¸­æ–­ï¼›</li>
<li>ä¸åŒåŠ¨ç”»å‚æ•°å¯¹ç”¨æˆ·è¡Œä¸ºçš„å½±å“ã€‚</li>
</ul>
<h4 data-id="heading-11">5. HarmonyOS å…³é”®å¸§åŠ¨ç”»ä¸ motionPath çš„å‘</h4>
<ul>
<li><strong>å…³é”®å¸§æ¥å£ä¸‹çš„ motionPath å¤±æ•ˆ</strong>ï¼šå®æµ‹é¸¿è’™è‡ªå¸¦çš„å¤šæ­¥éª¤/å…³é”®å¸§åŠ¨ç”»æ¥å£ä¸­ï¼Œ<code>motionPath</code> ä¼šè¢«å¿½ç•¥ï¼Œè·¯å¾„æ®µç›´æ¥ä¸ç”Ÿæ•ˆï¼›ç›®å‰åªèƒ½ç”¨ <code>animateTo</code> ä¸²è”ï¼ˆæˆ–ç”¨ AnimationStepper è¿™ç±»æ­¥éª¤æœºï¼‰æ¥åˆ†æ®µæ§åˆ¶ã€‚</li>
<li><strong>ä¿®æ”¹ motionPath éœ€ä¼´éšå¸ƒå±€å±æ€§åˆ·æ–°</strong>ï¼šä»…æ›´æ–° <code>motionPath</code> å­—ç¬¦ä¸²ä¸ä¼šç«‹åˆ»ç”Ÿæ•ˆï¼Œé€šå¸¸éœ€è¦åŒæ—¶å˜æ›´ä¸€æ¬¡ä½ç½®/å¸ƒå±€å±æ€§ï¼ˆå¦‚ <code>position</code> / <code>offset</code>ï¼‰æ¥è§¦å‘é‡ç»˜ï¼Œè·¯å¾„åŠ¨ç”»æ‰ä¼šå¯åŠ¨ã€‚</li>
<li>å½“å‰ç‰ˆæœ¬å®æµ‹çš„é™åˆ¶/å¯èƒ½æ˜¯å¹³å°ç¼ºé™·ï¼Œæ¬¢è¿æœ‰è§£æ³•çš„è¯»è€…è¡¥å……</li>
</ul>
<hr/>
<h3 data-id="heading-12">ä¸ƒã€å°ç»“</h3>
<p>è¿™ä¸€ç¯‡æˆ‘ä»¬å›´ç»•ä¸€ä¸ªæ ¸å¿ƒé—®é¢˜å±•å¼€ï¼š<strong>å¦‚ä½•ä¼˜é›…åœ°ç¼–æ’å¤šé˜¶æ®µåŠ¨æ•ˆï¼Œè€Œä¸æ˜¯æ‰è¿›å›è°ƒåœ°ç‹±ã€‚</strong></p>
<p>é€šè¿‡ AnimationStepper è¿™ä¸ªè½»é‡æŠ½è±¡ï¼Œæˆ‘ä»¬æŠŠå¤šé˜¶æ®µåŠ¨ç”»æ‹†æˆä¸‰éƒ¨åˆ†ï¼š</p>
<ul>
<li>ä»»åŠ¡è¡¨ï¼šå®šä¹‰æ¯ä¸€æ­¥è¦æ”¹ä»€ä¹ˆã€æ€ä¹ˆåŠ¨ï¼›</li>
<li>ä»»åŠ¡é˜Ÿåˆ—ï¼šå®šä¹‰è¿™æ¬¡è¦æŒ‰ä»€ä¹ˆé¡ºåºèµ°å“ªäº›æ­¥éª¤ï¼›</li>
<li>ç»Ÿä¸€é©±åŠ¨å™¨ï¼šè´Ÿè´£æŒ‰é¡ºåºæ‰§è¡Œä»»åŠ¡ï¼Œé»˜è®¤å¸®åŠ©è¡”æ¥ä¸‹ä¸€æ­¥ã€‚</li>
</ul>
<p>è¿™å¥—æ¨¡å¼ä¸ä»…é€‚ç”¨äºå¼¹çª—å…³é—­åŠ¨æ•ˆï¼Œä»»ä½•ã€Œå¤šæ­¥éª¤ UI åŠ¨ç”»ã€åœºæ™¯éƒ½å¯ä»¥å‚è€ƒï¼š<br/>
æ¯”å¦‚å¡ç‰‡å±•å¼€/æ”¶èµ·ã€å¼•å¯¼æµç¨‹ã€Tab åˆ‡æ¢è¿‡æ¸¡ç­‰ã€‚</p>
<p>åœ¨ä¸‹ä¸€ç¯‡ä¸­ï¼Œæˆ‘ä»¬ä¼šæŠŠè§†è§’è½¬å‘ã€Œç©ºé—´ã€ï¼š<br/>
å¦‚ä½•åœ¨ ArkUI é‡Œç¨³å¥åœ°è®¡ç®—åŒå±‚å®¹å™¨çš„å°ºå¯¸å’Œä½ç½®ï¼Œä¿®æ­£ç¼©æ”¾å¸¦æ¥çš„è§†è§‰åç§»ï¼Œå¹¶ç”Ÿæˆæ—¢è‡ªç„¶åˆã€Œæ‰“å¾—å‡†ã€çš„æŠ›æ·è·¯å¾„ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è„šæ‰‹æ¶å¼€å‘å·¥å…·â€”â€”npmlog]]></title>    <link>https://juejin.cn/post/7584780417103167528</link>    <guid>https://juejin.cn/post/7584780417103167528</guid>    <pubDate>2025-12-18T05:10:32.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7584780417103167528" data-draft-id="7584731726733377551" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è„šæ‰‹æ¶å¼€å‘å·¥å…·â€”â€”npmlog"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-18T05:10:32.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="code_YuJun"/> <meta itemprop="url" content="https://juejin.cn/user/3615612462441358"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è„šæ‰‹æ¶å¼€å‘å·¥å…·â€”â€”npmlog
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3615612462441358/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    code_YuJun
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-18T05:10:32.000Z" title="Thu Dec 18 2025 05:10:32 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-18
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ç®€ä»‹</h2>
<p><code>npmlog</code>Â æ˜¯ npm å®˜æ–¹çš„æ—¥å¿—å·¥å…·ï¼Œæ”¯æŒé«˜åº¦å®šåˆ¶åŒ–ï¼ŒåŒ…æ‹¬æ—¥å¿—çº§åˆ«ã€è¾“å‡ºæ ¼å¼ã€å‰ç¼€ã€é¢œè‰²ã€è‡ªå®šä¹‰æ—¥å¿—ç±»å‹ã€æ–‡ä»¶è¾“å‡ºç­‰ã€‚</p>
<h4 data-id="heading-1">è°ƒæ•´æ—¥å¿—çº§åˆ«ï¼ˆè¿‡æ»¤è¾“å‡ºï¼‰</h4>
<p><code>npmlog</code>Â å†…ç½® 7 ä¸ªæ—¥å¿—çº§åˆ«ï¼ˆä¼˜å…ˆçº§ä»é«˜åˆ°ä½ï¼‰ï¼š<code>silent</code>Â â†’Â <code>error</code>Â â†’Â <code>warn</code>Â â†’Â <code>info</code>Â â†’Â <code>verbose</code>Â â†’Â <code>debug</code>Â â†’Â <code>silly</code>
é€šè¿‡Â <code>level</code>Â å±æ€§è®¾ç½®å½“å‰ç”Ÿæ•ˆçº§åˆ«ï¼Œä»…è¾“å‡º â‰¥ è¯¥çº§åˆ«çš„æ—¥å¿—ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> log = <span class="hljs-built_in">require</span>(<span class="hljs-string">'npmlog'</span>);
<span class="hljs-comment">// åŸºç¡€é…ç½®ï¼šè®¾ç½®æ—¥å¿—çº§åˆ«ï¼ˆé»˜è®¤ infoï¼‰</span>
log.<span class="hljs-property">level</span> = <span class="hljs-string">'verbose'</span>; <span class="hljs-comment">// æ­¤æ—¶ error/warn/info/verbose ä¼šè¾“å‡ºï¼Œdebug/silly è¢«è¿‡æ»¤</span>
<span class="hljs-comment">// log.level = 'silent'; // å…³é—­æ‰€æœ‰æ—¥å¿—è¾“å‡º</span>
<span class="hljs-comment">// æµ‹è¯•ä¸åŒçº§åˆ«</span>
log.<span class="hljs-title function_">error</span>(<span class="hljs-string">'err'</span>, <span class="hljs-string">'é”™è¯¯ä¿¡æ¯'</span>);   <span class="hljs-comment">// å§‹ç»ˆè¾“å‡ºï¼ˆçº§åˆ«æœ€é«˜ï¼‰</span>
log.<span class="hljs-title function_">warn</span>(<span class="hljs-string">'warn'</span>, <span class="hljs-string">'è­¦å‘Šä¿¡æ¯'</span>);   <span class="hljs-comment">// è¾“å‡º</span>
log.<span class="hljs-title function_">info</span>(<span class="hljs-string">'info'</span>, <span class="hljs-string">'æ™®é€šä¿¡æ¯'</span>);   <span class="hljs-comment">// è¾“å‡º</span>
log.<span class="hljs-title function_">verbose</span>(<span class="hljs-string">'verb'</span>, <span class="hljs-string">'è¯¦ç»†ä¿¡æ¯'</span>);<span class="hljs-comment">// è¾“å‡ºï¼ˆå›  level=verboseï¼‰</span>
log.<span class="hljs-title function_">debug</span>(<span class="hljs-string">'debug'</span>, <span class="hljs-string">'è°ƒè¯•ä¿¡æ¯'</span>); <span class="hljs-comment">// ä¸è¾“å‡º</span>
log.<span class="hljs-title function_">silly</span>(<span class="hljs-string">'silly'</span>, <span class="hljs-string">'å†—ä½™ä¿¡æ¯'</span>); <span class="hljs-comment">// ä¸è¾“å‡º</span>
</code></pre>
<h4 data-id="heading-2">å®šåˆ¶æ—¥å¿—æ ·å¼ï¼ˆé¢œè‰² / æ ¼å¼ï¼‰</h4>
<p><code>npmlog</code>Â åŸºäºÂ <code>ansi-styles</code>Â æ”¯æŒç»ˆç«¯é¢œè‰² / æ ·å¼å®šåˆ¶ï¼Œå¯é…ç½®ï¼š</p>
<ul>
<li><code>fg</code>ï¼šå‰æ™¯è‰²ï¼ˆblack/red/green/yellow/blue/magenta/cyan/white/grayï¼‰</li>
<li><code>bg</code>ï¼šèƒŒæ™¯è‰²ï¼ˆåŒä¸Šï¼ŒåŠ Â <code>Bg</code>Â å‰ç¼€ï¼Œå¦‚Â <code>bgRed</code>ï¼‰</li>
<li><code>bold/italic/underline/strikethrough</code>ï¼šæ–‡å­—æ ·å¼</li>
</ul>
<ol>
<li>è‡ªå®šä¹‰å†…ç½®çº§åˆ«æ ·å¼</li>
</ol>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// é‡å†™ error çº§åˆ«çš„æ ·å¼ï¼ˆçº¢è‰²èƒŒæ™¯+ç™½è‰²åŠ ç²—ï¼‰</span>
log.<span class="hljs-property">levels</span>.<span class="hljs-property">error</span> = {
  <span class="hljs-attr">color</span>: <span class="hljs-string">'white'</span>,
  <span class="hljs-attr">bg</span>: <span class="hljs-string">'red'</span>,
  <span class="hljs-attr">bold</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">level</span>: <span class="hljs-number">0</span> <span class="hljs-comment">// ä¼˜å…ˆçº§ï¼ˆ0 æœ€é«˜ï¼Œæ•°å­—è¶Šå¤§ä¼˜å…ˆçº§è¶Šä½ï¼‰</span>
};

<span class="hljs-comment">// é‡å†™ info çº§åˆ«çš„æ ·å¼ï¼ˆç»¿è‰²å‰æ™¯+åŠ ç²—ï¼‰</span>
log.<span class="hljs-property">levels</span>.<span class="hljs-property">info</span> = {
  <span class="hljs-attr">color</span>: <span class="hljs-string">'green'</span>,
  <span class="hljs-attr">bold</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">level</span>: <span class="hljs-number">2</span>
};

log.<span class="hljs-title function_">error</span>(<span class="hljs-string">'err'</span>, <span class="hljs-string">'è‡ªå®šä¹‰æ ·å¼çš„é”™è¯¯æ—¥å¿—'</span>);
log.<span class="hljs-title function_">info</span>(<span class="hljs-string">'info'</span>, <span class="hljs-string">'è‡ªå®šä¹‰æ ·å¼çš„ä¿¡æ¯æ—¥å¿—'</span>);
</code></pre>
<ol start="2">
<li>æ–°å¢è‡ªå®šä¹‰æ—¥å¿—çº§åˆ«
å¦‚æœå†…ç½®çº§åˆ«ä¸å¤Ÿï¼Œå¯æ‰©å±•è‡ªå®šä¹‰çº§åˆ«ï¼ˆå¦‚Â <code>success</code>/<code>trace</code>ï¼‰ï¼š</li>
</ol>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// æ­¥éª¤1ï¼šæ·»åŠ è‡ªå®šä¹‰çº§åˆ«ï¼ˆæŒ‡å®šä¼˜å…ˆçº§å’Œæ ·å¼ï¼‰</span>
log.<span class="hljs-title function_">addLevel</span>(<span class="hljs-string">'success'</span>, <span class="hljs-number">2</span>, { <span class="hljs-attr">fg</span>: <span class="hljs-string">'green'</span>, <span class="hljs-attr">bold</span>: <span class="hljs-literal">true</span> }); <span class="hljs-comment">// ä¼˜å…ˆçº§å’Œ info ç›¸åŒï¼ˆ2ï¼‰</span>
log.<span class="hljs-title function_">addLevel</span>(<span class="hljs-string">'trace'</span>, <span class="hljs-number">4</span>, { <span class="hljs-attr">fg</span>: <span class="hljs-string">'gray'</span>, <span class="hljs-attr">italic</span>: <span class="hljs-literal">true</span> });   <span class="hljs-comment">// ä¼˜å…ˆçº§ä½äº verboseï¼ˆ3ï¼‰</span>

<span class="hljs-comment">// æ­¥éª¤2ï¼šä½¿ç”¨è‡ªå®šä¹‰çº§åˆ«</span>
log.<span class="hljs-title function_">success</span>(<span class="hljs-string">'ok'</span>, <span class="hljs-string">'æ“ä½œæˆåŠŸï¼'</span>);
log.<span class="hljs-title function_">trace</span>(<span class="hljs-string">'trace'</span>, <span class="hljs-string">'è¿½è¸ªæ—¥å¿—...'</span>);
</code></pre>
<h4 data-id="heading-3">å®šåˆ¶è¾“å‡ºæ ¼å¼ï¼ˆè‡ªå®šä¹‰æ—¥å¿—æ¨¡æ¿ï¼‰</h4>
<p>é€šè¿‡Â <code>format</code>Â æ–¹æ³•è‡ªå®šä¹‰æ—¥å¿—çš„è¾“å‡ºæ¨¡æ¿ï¼Œæ”¯æŒä»¥ä¸‹å ä½ç¬¦ï¼š</p>
<ul>
<li><code>%l</code>ï¼šæ—¥å¿—çº§åˆ«ï¼ˆå¦‚ info/errorï¼‰</li>
<li><code>%p</code>ï¼šå‰ç¼€ï¼ˆheading + è‡ªå®šä¹‰å‰ç¼€ï¼‰</li>
<li><code>%m</code>ï¼šæ—¥å¿—æ¶ˆæ¯</li>
<li><code>%t</code>ï¼šæ—¶é—´æˆ³</li>
</ul>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// è‡ªå®šä¹‰è¾“å‡ºæ ¼å¼ï¼š[æ—¶é—´] [çº§åˆ«] [å‰ç¼€] æ¶ˆæ¯</span>
log.<span class="hljs-property">format</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">level, prefix, message</span>) {
  <span class="hljs-keyword">const</span> time = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>().<span class="hljs-title function_">toLocaleTimeString</span>(); <span class="hljs-comment">// æœ¬åœ°æ—¶é—´</span>
  <span class="hljs-keyword">return</span> <span class="hljs-string">`[<span class="hljs-subst">${time}</span>] [<span class="hljs-subst">${level.toUpperCase()}</span>] [<span class="hljs-subst">${prefix}</span>] <span class="hljs-subst">${message}</span>`</span>;
};

log.<span class="hljs-title function_">info</span>(<span class="hljs-string">'USER'</span>, <span class="hljs-string">'ç”¨æˆ·ç™»å½•æˆåŠŸ'</span>);
<span class="hljs-comment">// è¾“å‡ºç¤ºä¾‹ï¼š[14:25:30] [INFO] [MY_APP USER] ç”¨æˆ·ç™»å½•æˆåŠŸ</span>
</code></pre>
<h4 data-id="heading-4">é‡å®šå‘è¾“å‡ºï¼ˆæ–‡ä»¶ / è‡ªå®šä¹‰æµï¼‰</h4>
<p>é»˜è®¤æ—¥å¿—è¾“å‡ºåˆ°Â <code>process.stderr</code>ï¼Œå¯é€šè¿‡Â <code>stream</code>Â å±æ€§é‡å®šå‘åˆ°æ–‡ä»¶ / å…¶ä»–æµï¼š</p>
<ol>
<li>è¾“å‡ºåˆ°æ–‡ä»¶</li>
</ol>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">'fs'</span>);
<span class="hljs-comment">// è¿½åŠ æ¨¡å¼æ‰“å¼€æ–‡ä»¶æµ</span>
<span class="hljs-keyword">const</span> logFile = fs.<span class="hljs-title function_">createWriteStream</span>(<span class="hljs-string">'./app.log'</span>, { <span class="hljs-attr">flags</span>: <span class="hljs-string">'a'</span> });
log.<span class="hljs-property">stream</span> = logFile; <span class="hljs-comment">// é‡å®šå‘æ‰€æœ‰æ—¥å¿—åˆ°æ–‡ä»¶</span>

<span class="hljs-comment">// æµ‹è¯•ï¼šæ—¥å¿—ä¼šå†™å…¥ app.logï¼Œä¸å†è¾“å‡ºåˆ°ç»ˆç«¯</span>
log.<span class="hljs-title function_">info</span>(<span class="hljs-string">'file'</span>, <span class="hljs-string">'æ—¥å¿—å†™å…¥æ–‡ä»¶'</span>);
</code></pre>
<ol start="2">
<li>åŒæ—¶è¾“å‡ºåˆ°ç»ˆç«¯å’Œæ–‡ä»¶</li>
</ol>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// è‡ªå®šä¹‰æµï¼šåŒæ—¶å†™å…¥ stderr å’Œæ–‡ä»¶</span>
<span class="hljs-keyword">const</span> dualStream = {
  <span class="hljs-attr">write</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">message</span>) {
    process.<span class="hljs-property">stderr</span>.<span class="hljs-title function_">write</span>(message); <span class="hljs-comment">// ç»ˆç«¯è¾“å‡º</span>
    fs.<span class="hljs-title function_">appendFileSync</span>(<span class="hljs-string">'./app.log'</span>, message); <span class="hljs-comment">// æ–‡ä»¶è¿½åŠ </span>
  }
};

log.<span class="hljs-property">stream</span> = dualStream;
log.<span class="hljs-title function_">warn</span>(<span class="hljs-string">'dual'</span>, <span class="hljs-string">'åŒæ—¶è¾“å‡ºåˆ°ç»ˆç«¯å’Œæ–‡ä»¶'</span>);
</code></pre>
<h4 data-id="heading-5">å…¶ä»–å®ç”¨å®šåˆ¶</h4>
<ol>
<li>ç¦ç”¨é¢œè‰²ï¼ˆé€‚é…æ— ç»ˆç«¯ç¯å¢ƒï¼‰</li>
</ol>
<pre><code class="hljs language-js" lang="js">log.<span class="hljs-title function_">enableColor</span>(<span class="hljs-literal">false</span>); <span class="hljs-comment">// å…³é—­é¢œè‰²è¾“å‡º</span>
log.<span class="hljs-title function_">error</span>(<span class="hljs-string">'no-color'</span>, <span class="hljs-string">'æ— é¢œè‰²çš„é”™è¯¯æ—¥å¿—'</span>);
</code></pre>
<ol start="2">
<li>è‡ªå®šä¹‰å‰ç¼€åˆ†éš”ç¬¦</li>
</ol>
<pre><code class="hljs language-js" lang="js">log.<span class="hljs-property">headingSeparator</span> = <span class="hljs-string">' | '</span>; <span class="hljs-comment">// å…¨å±€å‰ç¼€å’Œè‡ªå®šä¹‰å‰ç¼€ä¹‹é—´çš„åˆ†éš”ç¬¦</span>
log.<span class="hljs-property">heading</span> = <span class="hljs-string">'APP'</span>;
log.<span class="hljs-title function_">info</span>(<span class="hljs-string">'USER'</span>, <span class="hljs-string">'ç”¨æˆ·æ“ä½œ'</span>); 
<span class="hljs-comment">// è¾“å‡ºï¼šAPP | USER  ç”¨æˆ·æ“ä½œï¼ˆé»˜è®¤åˆ†éš”ç¬¦æ˜¯ç©ºæ ¼ï¼‰</span>
</code></pre>
<ol start="3">
<li>æ¸…ç©ºæ—¥å¿—ç¼“å­˜ï¼ˆå¦‚éœ€æ‰‹åŠ¨æ§åˆ¶è¾“å‡ºï¼‰</li>
</ol>
<pre><code class="hljs language-js" lang="js">log.<span class="hljs-title function_">clear</span>(); <span class="hljs-comment">// æ¸…ç©ºæœªè¾“å‡ºçš„æ—¥å¿—ç¼“å­˜</span>
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä½¿ç”¨Traeå¼€å‘ä¸€ä¸ªè‡ªåŠ¨ç”ŸæˆTSç±»å‹å®šä¹‰çš„viteæ’ä»¶]]></title>    <link>https://juejin.cn/post/7584758215700496422</link>    <guid>https://juejin.cn/post/7584758215700496422</guid>    <pubDate>2025-12-18T05:25:11.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7584758215700496422" data-draft-id="7584730308753358898" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä½¿ç”¨Traeå¼€å‘ä¸€ä¸ªè‡ªåŠ¨ç”ŸæˆTSç±»å‹å®šä¹‰çš„viteæ’ä»¶"/> <meta itemprop="keywords" content="Vite"/> <meta itemprop="datePublished" content="2025-12-18T05:25:11.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="èœ—ç‰›é–å­"/> <meta itemprop="url" content="https://juejin.cn/user/1284661409481389"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä½¿ç”¨Traeå¼€å‘ä¸€ä¸ªè‡ªåŠ¨ç”ŸæˆTSç±»å‹å®šä¹‰çš„viteæ’ä»¶
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1284661409481389/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    èœ—ç‰›é–å­
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-18T05:25:11.000Z" title="Thu Dec 18 2025 05:25:11 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-18
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>ä½œä¸ºä¸€ä¸ªå‰ç«¯å¼€å‘ï¼Œä½ æ˜¯å¦ä¹Ÿç»å¸¸é‡åˆ°è¿™æ ·çš„çƒ¦æ¼ï¼š</p>
<ul>
<li>å¯¹æ¥åç«¯APIæ—¶ï¼Œéœ€è¦æ‰‹åŠ¨ç¼–å†™å¤§é‡TypeScriptç±»å‹å®šä¹‰</li>
<li>APIæ¥å£å˜æ›´æ—¶ï¼Œåˆè¦æ‰‹åŠ¨åŒæ­¥æ›´æ–°ç±»å‹å®šä¹‰</li>
<li>è°ƒè¯•æ—¶å› ä¸ºç±»å‹ä¸åŒ¹é…è€Œæµªè´¹å¤§é‡æ—¶é—´</li>
</ul>
<p>è¿™ä¸¤å¤©æˆ‘ç”¨Traeå¼€å‘äº†ä¸€ä¸ªViteæ’ä»¶â€”â€”<strong>vite-plugin-auto-api-types</strong>ï¼Œå®ƒèƒ½è‡ªåŠ¨å¸®æˆ‘ä»APIå“åº”ç”ŸæˆTypeScriptç±»å‹å®šä¹‰ï¼Œå½»åº•è§£å†³äº†è¿™äº›ç—›ç‚¹ï¼ä»Šå¤©å°±æ¥å’Œå¤§å®¶åˆ†äº«ä¸€ä¸‹è¿™ä¸ªæ’ä»¶</p>
<h2 data-id="heading-1">ä¸€ã€ä»€ä¹ˆæ˜¯vite-plugin-auto-api-typesï¼Ÿ</h2>
<p>vite-plugin-auto-api-typeså®ƒèƒ½åœ¨å¼€å‘è¿‡ç¨‹ä¸­è‡ªåŠ¨æ•è·APIè¯·æ±‚å’Œå“åº”ï¼Œç„¶åæ ¹æ®å“åº”æ•°æ®ç»“æ„ç”ŸæˆTypeScriptç±»å‹å®šä¹‰æ–‡ä»¶ã€‚</p>
<p>ç®€å•æ¥è¯´ï¼Œä½ åªéœ€è¦æ­£å¸¸è°ƒç”¨APIï¼Œæ’ä»¶å°±ä¼šè‡ªåŠ¨å¸®ä½ ç”Ÿæˆå¯¹åº”çš„ç±»å‹å®šä¹‰ï¼Œå†ä¹Ÿä¸ç”¨æ‰‹åŠ¨å†™é‚£äº›ç¹ççš„interfaceäº†ï¼</p>
<h2 data-id="heading-2">äºŒã€å¿«é€Ÿä¸Šæ‰‹</h2>
<h3 data-id="heading-3">1. å®‰è£…æ’ä»¶</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ä½¿ç”¨npm</span>
npm install vite-plugin-auto-api-types -D

<span class="hljs-comment"># ä½¿ç”¨yarn</span>
yarn add vite-plugin-auto-api-types -D

<span class="hljs-comment"># ä½¿ç”¨pnpm</span>
pnpm add vite-plugin-auto-api-types -D
</code></pre>
<h3 data-id="heading-4">2. é…ç½®æ’ä»¶</h3>
<p>åœ¨vite.config.tsä¸­æ·»åŠ æ’ä»¶é…ç½®ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { defineConfig } <span class="hljs-keyword">from</span> <span class="hljs-string">'vite'</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">AutoApiTypes</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'vite-plugin-auto-api-types'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineConfig</span>({
  <span class="hljs-attr">plugins</span>: [
    <span class="hljs-title class_">AutoApiTypes</span>({
      <span class="hljs-comment">// é…ç½®é¡¹</span>
      <span class="hljs-attr">outputDir</span>: <span class="hljs-string">'src/types'</span>,  <span class="hljs-comment">// ç±»å‹æ–‡ä»¶è¾“å‡ºç›®å½•</span>
      <span class="hljs-attr">cacheSize</span>: <span class="hljs-number">100</span>,         <span class="hljs-comment">// ç¼“å­˜å¤§å°</span>
      <span class="hljs-attr">moduleMap</span>: {
        <span class="hljs-comment">// æŒ‰URLå‰ç¼€åˆ†ç»„ç”Ÿæˆæ¨¡å—åŒ–ç±»å‹æ–‡ä»¶</span>
        <span class="hljs-string">'/api/user'</span>: <span class="hljs-string">'users'</span>,
        <span class="hljs-string">'/api/product'</span>: <span class="hljs-string">'products'</span>
      },
      <span class="hljs-attr">typeNameGenerator</span>: <span class="hljs-function">(<span class="hljs-params">url</span>) =&gt;</span> {
        <span class="hljs-comment">// è‡ªå®šä¹‰ç±»å‹åç§°ç”Ÿæˆè§„åˆ™</span>
        <span class="hljs-keyword">return</span> url.<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/\/|\./g</span>, <span class="hljs-string">'_'</span>)
      }
    })
  ]
})
</code></pre>
<h3 data-id="heading-5">3. ä½¿ç”¨æ’ä»¶</h3>
<p>é…ç½®å®Œæˆåï¼Œåªéœ€è¦æ­£å¸¸å‘èµ·APIè¯·æ±‚ï¼Œæ’ä»¶å°±ä¼šè‡ªåŠ¨ç”Ÿæˆç±»å‹å®šä¹‰æ–‡ä»¶ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// å‘èµ·APIè¯·æ±‚</span>
<span class="hljs-title function_">fetch</span>(<span class="hljs-string">'/api/user/list'</span>)
  .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> res.<span class="hljs-title function_">json</span>())
  .<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data: api_user_list</span>) =&gt;</span> {
    <span class="hljs-comment">// æ’ä»¶ä¼šè‡ªåŠ¨æ ¹æ®dataçš„ç»“æ„ç”Ÿæˆç±»å‹å®šä¹‰</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(data)
  })
</code></pre>
<h2 data-id="heading-6">ä¸‰ã€æ ¸å¿ƒç‰¹æ€§</h2>
<h3 data-id="heading-7">1. è‡ªåŠ¨ç±»å‹ç”Ÿæˆ</h3>
<p>æ’ä»¶ä¼šè‡ªåŠ¨æ•è·æ‰€æœ‰APIå“åº”ï¼Œå¹¶æ ¹æ®å“åº”æ•°æ®ç»“æ„ç”Ÿæˆå¯¹åº”çš„TypeScriptç±»å‹å®šä¹‰ã€‚æ”¯æŒå„ç§å¤æ‚çš„æ•°æ®ç»“æ„ï¼ŒåŒ…æ‹¬åµŒå¥—å¯¹è±¡ã€æ•°ç»„ã€æ ‘å½¢ç»“æ„ç­‰ã€‚</p>
<h3 data-id="heading-8">2. æ¨¡å—åŒ–ç±»å‹æ–‡ä»¶</h3>
<p>å¯ä»¥æ ¹æ®URLå‰ç¼€å°†APIç±»å‹åˆ†ç»„åˆ°ä¸åŒçš„æ¨¡å—æ–‡ä»¶ä¸­ï¼Œä¿æŒç±»å‹å®šä¹‰çš„æ•´æ´å’Œå¯ç»´æŠ¤æ€§ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// vite.config.ts</span>
<span class="hljs-title class_">AutoApiTypes</span>({
  <span class="hljs-attr">moduleMap</span>: {
    <span class="hljs-string">'/api/user'</span>: <span class="hljs-string">'users'</span>,
    <span class="hljs-string">'/api/product'</span>: <span class="hljs-string">'products'</span>,
    <span class="hljs-string">'/api/order'</span>: <span class="hljs-string">'orders'</span>
  }
})
</code></pre>
<p>è¿™æ ·é…ç½®åï¼Œæ’ä»¶ä¼šç”Ÿæˆä¸‰ä¸ªç±»å‹æ–‡ä»¶ï¼š<code>users.d.ts</code>ã€<code>products.d.ts</code>å’Œ<code>orders.d.ts</code>ã€‚</p>
<h3 data-id="heading-9">3. æ ‘å½¢ç»“æ„ç±»å‹æ”¯æŒ</h3>
<p>æ’ä»¶ç‰¹åˆ«ä¼˜åŒ–äº†å¯¹æ ‘å½¢ç»“æ„æ•°æ®çš„æ”¯æŒï¼Œä¼šè‡ªåŠ¨ç”Ÿæˆæ¸…æ™°çš„èŠ‚ç‚¹ç±»å‹å®šä¹‰ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// è‡ªåŠ¨ç”Ÿæˆçš„æ ‘å½¢ç»“æ„ç±»å‹</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">MenuTreeNode</span> {
  <span class="hljs-attr">id</span>: <span class="hljs-built_in">number</span>;
  <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-attr">path</span>: <span class="hljs-built_in">string</span>;
  children?: <span class="hljs-title class_">MenuTreeNode</span>[];
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">GetMenuListResponse</span> {
  <span class="hljs-attr">code</span>: <span class="hljs-built_in">number</span>;
  <span class="hljs-attr">message</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-attr">data</span>: <span class="hljs-title class_">MenuTreeNode</span>[];
}
</code></pre>
<h3 data-id="heading-10">4. è‡ªå®šä¹‰å“åº”è·¯å¾„</h3>
<p>æ”¯æŒä»APIå“åº”ä¸­æå–ç‰¹å®šéƒ¨åˆ†ç”Ÿæˆç±»å‹å®šä¹‰ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// vite.config.ts</span>
<span class="hljs-title class_">AutoApiTypes</span>({
  <span class="hljs-attr">responsePath</span>: <span class="hljs-string">'data.list'</span>  <span class="hljs-comment">// åªä»å“åº”çš„data.listéƒ¨åˆ†ç”Ÿæˆç±»å‹</span>
})
</code></pre>
<h3 data-id="heading-11">5. LRUç¼“å­˜æœºåˆ¶</h3>
<p>å†…ç½®LRUç¼“å­˜æœºåˆ¶ï¼Œä¼˜åŒ–å†…å­˜ä½¿ç”¨ï¼Œé¿å…é‡å¤ç”Ÿæˆç›¸åŒçš„ç±»å‹å®šä¹‰ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// vite.config.ts</span>
<span class="hljs-title class_">AutoApiTypes</span>({
  <span class="hljs-attr">cacheSize</span>: <span class="hljs-number">100</span>  <span class="hljs-comment">// è®¾ç½®ç¼“å­˜å¤§å°ä¸º100</span>
})
</code></pre>
<h2 data-id="heading-12">å››ã€å®é™…åº”ç”¨ä½“éªŒ</h2>
<h3 data-id="heading-13">1. å¼€å‘æ•ˆç‡æå‡</h3>
<p>ä»¥å‰å¯¹æ¥ä¸€ä¸ªAPIï¼Œéœ€è¦å…ˆçœ‹æ–‡æ¡£ï¼Œç„¶åæ‰‹åŠ¨ç¼–å†™ç±»å‹å®šä¹‰ï¼Œè‡³å°‘éœ€è¦10åˆ†é’Ÿã€‚ç°åœ¨åªéœ€è¦è°ƒç”¨ä¸€æ¬¡APIï¼Œæ’ä»¶å°±ä¼šè‡ªåŠ¨ç”Ÿæˆç±»å‹å®šä¹‰ï¼Œä¸åˆ°1åˆ†é’Ÿå°±èƒ½æå®šï¼</p>
<h3 data-id="heading-14">2. ç±»å‹å‡†ç¡®æ€§æé«˜</h3>
<p>æ‰‹åŠ¨ç¼–å†™ç±»å‹å®šä¹‰å¾ˆå®¹æ˜“å‡ºé”™ï¼Œç‰¹åˆ«æ˜¯å¯¹äºå¤æ‚çš„æ•°æ®ç»“æ„ã€‚ç°åœ¨ç”±æ’ä»¶è‡ªåŠ¨ç”Ÿæˆï¼Œå®Œå…¨åŸºäºå®é™…APIå“åº”ï¼Œç±»å‹å‡†ç¡®æ€§100%ï¼</p>
<h3 data-id="heading-15">3. æ¥å£å˜æ›´è‡ªåŠ¨åŒæ­¥</h3>
<p>å½“åç«¯APIæ¥å£å˜æ›´æ—¶ï¼Œåªéœ€è¦é‡æ–°è°ƒç”¨ä¸€æ¬¡APIï¼Œæ’ä»¶å°±ä¼šè‡ªåŠ¨æ›´æ–°ç±»å‹å®šä¹‰ï¼Œå†ä¹Ÿä¸ç”¨æ‰‹åŠ¨åŒæ­¥äº†ï¼</p>
<h2 data-id="heading-16">äº”ã€æ€»ç»“</h2>
<p>vite-plugin-auto-api-typesæ˜¯ä¸€ä¸ªéå¸¸å®ç”¨çš„Viteæ’ä»¶ï¼Œå®ƒèƒ½å¸®ä½ è‡ªåŠ¨ç”ŸæˆAPIç±»å‹å®šä¹‰ï¼Œå¤§å¤§æå‡å¼€å‘æ•ˆç‡ã€‚ä¸»è¦ä¼˜åŠ¿åŒ…æ‹¬ï¼š</p>
<ol>
<li><strong>è‡ªåŠ¨ç”Ÿæˆ</strong>ï¼šæ— éœ€æ‰‹åŠ¨ç¼–å†™ç±»å‹å®šä¹‰</li>
<li><strong>å‡†ç¡®å¯é </strong>ï¼šåŸºäºå®é™…APIå“åº”ç”Ÿæˆï¼Œç±»å‹å‡†ç¡®</li>
<li><strong>æ™ºèƒ½ä¼˜åŒ–</strong>ï¼šæ”¯æŒæ ‘å½¢ç»“æ„ã€æ¨¡å—åŒ–ã€ç¼“å­˜ç­‰é«˜çº§ç‰¹æ€§</li>
<li><strong>æ˜“äºé…ç½®</strong>ï¼šæä¾›ä¸°å¯Œçš„é…ç½®é¡¹ï¼Œæ»¡è¶³å„ç§éœ€æ±‚</li>
</ol>
<h2 data-id="heading-17">æœ€åçš„è¯</h2>
<p>æ„Ÿå…´è¶£çš„åŒå­¦å¯ä»¥å»GitHub <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Flegend402%2Fvite-plugin-auto-api-types" target="_blank" title="https://github.com/legend402/vite-plugin-auto-api-types" ref="nofollow noopener noreferrer">æŸ¥çœ‹æºç </a></p>
<p>ä¹Ÿå¯ä»¥ç›´æ¥åœ¨npmä¸Šå®‰è£…ä½¿ç”¨ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">npm install vite-plugin-auto-api-types -D
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æŒæ¡ :focus-withinï¼Œè®©ä½ çš„AIå¯¹è¯è¾“å…¥ä½“éªŒæ›´ä¸Šä¸€å±‚æ¥¼ï¼]]></title>    <link>https://juejin.cn/post/7584787119273705499</link>    <guid>https://juejin.cn/post/7584787119273705499</guid>    <pubDate>2025-12-18T04:50:23.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7584787119273705499" data-draft-id="7584729825385316390" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æŒæ¡ :focus-withinï¼Œè®©ä½ çš„AIå¯¹è¯è¾“å…¥ä½“éªŒæ›´ä¸Šä¸€å±‚æ¥¼ï¼"/> <meta itemprop="keywords" content="å‰ç«¯,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-12-18T04:50:23.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="donecoding"/> <meta itemprop="url" content="https://juejin.cn/user/3192637500430093"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æŒæ¡ :focus-withinï¼Œè®©ä½ çš„AIå¯¹è¯è¾“å…¥ä½“éªŒæ›´ä¸Šä¸€å±‚æ¥¼ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3192637500430093/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    donecoding
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-18T04:50:23.000Z" title="Thu Dec 18 2025 04:50:23 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-18
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    8
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>åœ¨æ™ºèƒ½å¯¹è¯æˆä¸ºæ ‡é…çš„ä»Šå¤©ï¼Œä¸€ä¸ªè¾“å…¥æ¡†æ‰¿è½½çš„å·²ä¸åªæ˜¯æ–‡å­—ã€‚æœ¬æ–‡å°†æ­ç¤ºå¦‚ä½•ç”¨ <code>:focus-within</code> ä¼ªç±»ï¼Œä¼˜é›…åœ°é©¾é©­AIè¾“å…¥æ¡†ä¸­å¤æ‚çš„äº¤äº’çŠ¶æ€ã€‚</p>
</blockquote>
<p>å¯¹äºAIå‰ç«¯å¼€å‘è€…è€Œè¨€ï¼Œæˆ‘ä»¬é¢å¯¹çš„æ—©å·²ä¸æ˜¯ç®€å•çš„æ–‡æœ¬è¾“å…¥æ¡†ã€‚ä¸€ä¸ªç°ä»£åŒ–çš„AIå¯¹è¯è¾“å…¥æ¡†ï¼Œæ˜¯é›†<strong>æ·±åº¦æ€è€ƒ</strong>è§¦å‘ã€<strong>è”ç½‘æœç´¢</strong>å¼€å…³ã€<strong>å¤šæ¨¡å‹åˆ‡æ¢</strong>ã€<strong>å¤šæ¨¡æ€å†…å®¹å‘é€</strong>äºä¸€ä½“çš„å¤æ‚äº¤äº’å®¹å™¨ã€‚å½“ç”¨æˆ·èšç„¦äºæ­¤ï¼Œæˆ‘ä»¬æœŸæœ›çš„äº¤äº’åé¦ˆæ˜¯ç«‹ä½“ä¸”å³æ—¶çš„ï¼šæ•´ä¸ªè¾“å…¥åŒºåŸŸéœ€è¦è¢«é«˜äº®ä»¥å¼ºåŒ–ç„¦ç‚¹ï¼Œç›¸å…³çš„æ“ä½œæŒ‰é’®ï¼ˆå¦‚æ¨¡å‹é€‰æ‹©å™¨ï¼‰åº”å˜å¾—æ›´ä¸ºé†’ç›®ï¼Œç”šè‡³éœ€è¦åŠ¨æ€å±•ç¤ºå‡ºéšè—çš„æ‰©å±•åŠŸèƒ½åŒºï¼ˆå¦‚æ–‡ä»¶ä¸Šä¼ æˆ–å¿«æ·æŒ‡ä»¤é¢æ¿ï¼‰ã€‚</p>
<p>ä¼ ç»Ÿä¸Šï¼Œå®ç°è¿™ç§â€œä¸€ç‚¹è§¦ï¼Œå…¨å±€åŠ¨â€çš„äº¤äº’ï¼Œéœ€è¦ç¼–å†™JavaScriptæ¥ç›‘å¬ç„¦ç‚¹äº‹ä»¶å¹¶æ‰‹åŠ¨ä¸ºçˆ¶å®¹å™¨æ·»åŠ ç±»åã€‚ä½†ç°åœ¨ï¼ŒCSSçš„ <code>:focus-within</code> ä¼ªç±»è®©æˆ‘ä»¬èƒ½å¤Ÿä»¥å£°æ˜å¼çš„çº¯CSSæ–¹æ¡ˆï¼Œä¼˜é›…åœ°è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p>
<h2 data-id="heading-0">ä¸€ã€:focus-within æ˜¯ä»€ä¹ˆï¼Ÿä¸ºä½•å®ƒç‰¹åˆ«é€‚åˆAIåœºæ™¯ï¼Ÿ</h2>
<p><strong>:focus-within</strong> æ˜¯ä¸€ä¸ªCSSä¼ªç±»ï¼Œå®ƒä¼šåŒ¹é…<strong>ä»»ä½•æ‹¥æœ‰è·å¾—ç„¦ç‚¹å­å…ƒç´ çš„å…ƒç´ </strong>ã€‚è¿™æ„å‘³ç€ï¼Œåªè¦è¾“å…¥æ¡†æœ¬èº«æˆ–å…¶å†…éƒ¨çš„ä»»ä½•ä¸€ä¸ªæŒ‰é’®ï¼ˆå¦‚â€œå‘é€â€æŒ‰é’®ï¼‰ã€å¼€å…³ï¼ˆå¦‚â€œè”ç½‘æœç´¢â€å¤é€‰æ¡†ï¼‰è·å¾—ç„¦ç‚¹ï¼Œå…¶å¤–å±‚çš„å®¹å™¨å…ƒç´ å°±ä¼šè¢«è¿™ä¸ªä¼ªç±»åŒ¹é…åˆ°ã€‚</p>
<p>è¿™ä¸æˆ‘ä»¬ç†ŸçŸ¥çš„ <code>:focus</code> ä¼ªç±»æœ‰æœ¬è´¨åŒºåˆ«ï¼š</p>
<ul>
<li><code>:focus</code>ï¼šåªä½œç”¨äº<strong>è·å¾—ç„¦ç‚¹çš„å…ƒç´ æœ¬èº«</strong>ï¼ˆä¾‹å¦‚ï¼Œä»…è®©è¾“å…¥æ¡†çš„è¾¹æ¡†å˜è‰²ï¼‰ã€‚</li>
<li><code>:focus-within</code>ï¼šä½œç”¨äº<strong>åŒ…å«ç„¦ç‚¹å…ƒç´ çš„çˆ¶å®¹å™¨</strong>ï¼ˆä¾‹å¦‚ï¼Œè®©åŒ…å«è¾“å…¥æ¡†ã€æ“ä½œæŒ‰é’®çš„æ•´ä¸ªå·¥å…·æ èƒŒæ™¯å˜è‰²ï¼‰ã€‚</li>
</ul>
<p>åœ¨AIå¯¹è¯ç•Œé¢ä¸­ï¼Œè¾“å…¥æ¡†ç»„ä»¶(å¦‚Ollamaçš„)é€šå¸¸æ˜¯ä¸€ä¸ªç”±è¾“å…¥åŸŸã€æ“ä½œæŒ‰é’®ã€é™„ä»¶ä¸Šä¼ ã€æ¨¡å‹é€‰æ‹©å™¨ç­‰å­ç»„ä»¶ç»„åˆè€Œæˆçš„å¤åˆå®¹å™¨ã€‚ä½¿ç”¨ <code>:focus-within</code>ï¼Œæˆ‘ä»¬å¯ä»¥è½»æ¾å®ç°â€œè¾“å…¥æ¡†æˆ–å…¶å†…éƒ¨ä»»ä¸€éƒ¨ä»¶è¢«æ¿€æ´»æ—¶ï¼Œæ•´ä¸ªç»„ä»¶è§†è§‰å‡çº§â€çš„æ•ˆæœï¼Œè¿™å®Œç¾å¥‘åˆäº†å¤æ‚äº¤äº’å®¹å™¨çš„è®¾è®¡éœ€æ±‚ã€‚</p>
<h2 data-id="heading-1">äºŒã€å®æˆ˜ï¼šèµ‹èƒ½AIå¯¹è¯è¾“å…¥æ¡†</h2>
<h3 data-id="heading-2">åœºæ™¯ä¸€ï¼šé«˜äº®æ™ºèƒ½è¾“å…¥å®¹å™¨ï¼Œæå‡ä¸“æ³¨æ„Ÿ</h3>
<p>ç°ä»£çš„AIè¾“å…¥æ¡†ï¼ˆå¦‚è±†åŒ…çš„ï¼‰é›†æˆäº†æ–‡æœ¬ã€é™„ä»¶ã€è¯­éŸ³ç­‰å¤šæ¨¡æ€è¾“å…¥æ–¹å¼ã€‚ä½¿ç”¨<code>:focus-within</code>å¯ä»¥åœ¨ç”¨æˆ·ä¸å…¶ä¸­ä»»ä½•éƒ¨åˆ†äº¤äº’æ—¶ï¼Œå¼ºåŒ–æ•´ä¸ªå®¹å™¨çš„è§†è§‰å­˜åœ¨æ„Ÿã€‚</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"ai-sender-container"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"model-selector"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">select</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">option</span>&gt;</span>DeepSeek<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">option</span>&gt;</span>GPT-4<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">textarea</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"å‘AIæé—®..."</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">textarea</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"actions"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn-attachment"</span> <span class="hljs-attr">title</span>=<span class="hljs-string">"ä¸Šä¼ æ–‡ä»¶"</span>&gt;</span>ğŸ“<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn-thinking"</span> <span class="hljs-attr">title</span>=<span class="hljs-string">"æ·±åº¦æ€è€ƒ"</span>&gt;</span>ğŸ§ <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn-send"</span> <span class="hljs-attr">title</span>=<span class="hljs-string">"å‘é€"</span>&gt;</span>å‘é€<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.ai-sender-container</span> {
  <span class="hljs-attribute">display</span>: flex;
  <span class="hljs-attribute">border</span>: <span class="hljs-number">2px</span> solid <span class="hljs-number">#e5e7eb</span>;
  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">12px</span>;
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">12px</span>;
  <span class="hljs-attribute">background</span>: <span class="hljs-number">#fff</span>;
  <span class="hljs-attribute">transition</span>: all <span class="hljs-number">0.3s</span> ease;
  <span class="hljs-comment">/* å…³é”®ï¼šä¸ºå®¹å™¨æœ¬èº«æ·»åŠ è½®å»“è¿‡æ¸¡ï¼Œè€Œéå­å…ƒç´  */</span>
}

<span class="hljs-comment">/* é­”æ³•å‘ç”Ÿåœ¨è¿™é‡Œï¼šä»»ä½•å­å…ƒç´ è·å¾—ç„¦ç‚¹ï¼Œå®¹å™¨æ ·å¼æ”¹å˜ */</span>
<span class="hljs-selector-class">.ai-sender-container</span><span class="hljs-selector-pseudo">:focus</span>-within {
  <span class="hljs-attribute">border-color</span>: <span class="hljs-number">#1890ff</span>; <span class="hljs-comment">/* ä¸»è‰²è°ƒè¾¹æ¡† */</span>
  <span class="hljs-attribute">box-shadow</span>: <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">3px</span> <span class="hljs-built_in">rgba</span>(<span class="hljs-number">24</span>, <span class="hljs-number">144</span>, <span class="hljs-number">255</span>, <span class="hljs-number">0.1</span>); <span class="hljs-comment">/* æŸ”å’Œçš„å…‰æ™• */</span>
  <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#fafafa</span>; <span class="hljs-comment">/* è½»å¾®èƒŒæ™¯è‰²å˜åŒ– */</span>
}

<span class="hljs-comment">/* åŒæ—¶ï¼Œå¯ä»¥æ”¹å˜å†…éƒ¨ç‰¹å®šå…ƒç´ çš„æ ·å¼ */</span>
<span class="hljs-selector-class">.ai-sender-container</span><span class="hljs-selector-pseudo">:focus</span>-within <span class="hljs-selector-class">.model-selector</span> {
  <span class="hljs-attribute">border-left-color</span>: <span class="hljs-number">#1890ff</span>;
}
<span class="hljs-selector-class">.ai-sender-container</span><span class="hljs-selector-pseudo">:focus</span>-within <span class="hljs-selector-class">.btn-send</span> {
  <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#1890ff</span>;
  <span class="hljs-attribute">color</span>: white;
}
</code></pre>
<h3 data-id="heading-3">åœºæ™¯äºŒï¼šåŠ¨æ€å±•ç¤ºæ‰©å±•åŠŸèƒ½åŒºï¼ˆå¿«æ·æ“ä½œæ /æŠ€èƒ½æ¨¡å¼ï¼‰</h3>
<p>è®¸å¤šAIäº§å“ä¼šåœ¨è¾“å…¥æ¡†ä¸Šæ–¹æˆ–ä¸‹æ–¹è®¾ç½®å¿«æ·æ“ä½œæ ï¼Œæä¾›å¸¸ç”¨æŠ€èƒ½æˆ–æŒ‡ä»¤ã€‚æˆ‘ä»¬å¯ä»¥åˆ©ç”¨<code>:focus-within</code>å®ç°â€œèšç„¦å³å±•å¼€â€çš„æµç•…ä½“éªŒã€‚</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"ai-chat-input-wrapper"</span>&gt;</span>
  <span class="hljs-comment">&lt;!-- å¿«æ·å‘½ä»¤æ ï¼Œé»˜è®¤éšè—æˆ–åŠé€æ˜ --&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"quick-command-bar"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span>&gt;</span>/help<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span>&gt;</span>/search<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span>&gt;</span>/creative<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-comment">&lt;!-- ä¸»è¾“å…¥åŒºåŸŸ --&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"input-core"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"è¾“å…¥ / å”¤èµ·å¿«æ·å‘½ä»¤..."</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn-web-toggle"</span> <span class="hljs-attr">title</span>=<span class="hljs-string">"è”ç½‘æœç´¢"</span>&gt;</span>ğŸŒ<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.quick-command-bar</span> {
  <span class="hljs-attribute">max-height</span>: <span class="hljs-number">0</span>;
  <span class="hljs-attribute">opacity</span>: <span class="hljs-number">0</span>;
  <span class="hljs-attribute">overflow</span>: hidden;
  <span class="hljs-attribute">transition</span>: all <span class="hljs-number">0.3s</span> ease;
  <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">0</span>;
}

<span class="hljs-comment">/* å½“.input-coreå†…çš„è¾“å…¥æ¡†æˆ–æŒ‰é’®è·å¾—ç„¦ç‚¹æ—¶ï¼Œå±•å¼€ä¸Šæ–¹çš„å¿«æ·å‘½ä»¤æ  */</span>
<span class="hljs-selector-class">.ai-chat-input-wrapper</span><span class="hljs-selector-pseudo">:focus</span>-within <span class="hljs-selector-class">.quick-command-bar</span> {
  <span class="hljs-attribute">max-height</span>: <span class="hljs-number">60px</span>;
  <span class="hljs-attribute">opacity</span>: <span class="hljs-number">1</span>;
  <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">8px</span>;
}
</code></pre>
<h3 data-id="heading-4">åœºæ™¯ä¸‰ï¼šå¢å¼ºå¯è®¿é—®æ€§ä¸çŠ¶æ€åé¦ˆï¼ˆç»“åˆ :focus-visibleï¼‰</h3>
<p>åœ¨AIå¯¹è¯ä¸­ï¼Œé”®ç›˜æ“ä½œæµè‡³å…³é‡è¦ã€‚æˆ‘ä»¬å¯ä»¥ç»“åˆ <code>:focus-visible</code> ä¼ªç±»ï¼Œä¸ºé”®ç›˜å¯¼èˆªç”¨æˆ·æä¾›æ›´æ˜ç¡®çš„è§†è§‰æŒ‡å¼•ï¼ŒåŒæ—¶é¿å…é¼ æ ‡ç‚¹å‡»æ—¶äº§ç”Ÿçªå…€çš„ç„¦ç‚¹ç¯ã€‚</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* ä¸ºé”®ç›˜å¯¼èˆªç”¨æˆ·æä¾›æ¸…æ™°çš„ç„¦ç‚¹æŒ‡ç¤º */</span>
<span class="hljs-selector-class">.ai-sender-container</span><span class="hljs-selector-pseudo">:focus</span>-within<span class="hljs-selector-pseudo">:has</span>(<span class="hljs-selector-tag">input</span><span class="hljs-selector-pseudo">:focus</span>-visible) {
  <span class="hljs-attribute">outline</span>: <span class="hljs-number">2px</span> solid <span class="hljs-number">#1890ff</span>;
  <span class="hljs-attribute">outline-offset</span>: <span class="hljs-number">2px</span>;
}

<span class="hljs-comment">/* å•ç‹¬è®¾ç½®æ¨¡å‹é€‰æ‹©å™¨åœ¨é”®ç›˜èšç„¦æ—¶çš„æ ·å¼ */</span>
<span class="hljs-selector-class">.model-selector</span> select<span class="hljs-selector-pseudo">:focus</span>-visible {
  <span class="hljs-attribute">outline</span>: <span class="hljs-number">2px</span> solid <span class="hljs-number">#52c41a</span>;
}
</code></pre>
<h2 data-id="heading-5">ä¸‰ã€ä¸ä¼ ç»Ÿè¾“å…¥æ¡†çš„å¯¹æ¯”</h2>
<p>è®©æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªè¡¨æ ¼ï¼Œæ¸…æ™°å¯¹æ¯” <code>:focus-within</code> åœ¨å¤„ç†ä¼ ç»Ÿè¡¨å•ä¸AIå¯¹è¯è¾“å…¥æ¡†æ—¶çš„ä¸åŒè®¾è®¡è€ƒé‡ï¼š</p>



































<table><thead><tr><th align="left">å¯¹æ¯”ç»´åº¦</th><th align="left">ä¼ ç»Ÿè¡¨å•è¾“å…¥æ¡†</th><th align="left">AIå¯¹è¯å¤åˆè¾“å…¥æ¡† (å¦‚ChatSender)</th></tr></thead><tbody><tr><td align="left"><strong>æ ¸å¿ƒå…ƒç´ </strong></td><td align="left">å•ä¸€æ—¥æ ‡ï¼š<code>&lt;input&gt;</code> æˆ– <code>&lt;textarea&gt;</code></td><td align="left">å¤šå…ƒç»„åˆï¼šè¾“å…¥åŸŸã€æ¨¡å‹åˆ‡æ¢ã€åŠŸèƒ½æŒ‰é’®ã€ä¸Šä¼ åŒº</td></tr><tr><td align="left"><strong>äº¤äº’åé¦ˆç›®æ ‡</strong></td><td align="left">èšç„¦å…ƒç´ æœ¬èº«ï¼ˆå¦‚è¾¹æ¡†å˜è‰²ï¼‰</td><td align="left"><strong>æ•´ä¸ªè¾“å…¥å®¹å™¨</strong>ï¼Œä»¥åŠå†…éƒ¨å…³è”å…ƒç´ çš„çŠ¶æ€åŒæ­¥</td></tr><tr><td align="left"><strong>å…¸å‹<code>:focus-within</code>åº”ç”¨</strong></td><td align="left">é«˜äº®åŒ…å«æ ‡ç­¾å’Œè¾“å…¥æ¡†çš„<code>.form-group</code></td><td align="left">é«˜äº®æ•´ä¸ªè¾“å…¥å®¹å™¨ï¼Œå¹¶åŒæ­¥æ§åˆ¶<strong>å¿«æ·å‘½ä»¤æ </strong>çš„æ˜¾éšã€<strong>æŒ‰é’®ç»„</strong>çš„æ´»æ€§</td></tr><tr><td align="left"><strong>çŠ¶æ€å…³è”å¤æ‚åº¦</strong></td><td align="left">ä½ï¼ˆé€šå¸¸åªå…³è”æ ‡ç­¾ï¼‰</td><td align="left"><strong>é«˜</strong>ï¼ˆéœ€å…³è”æ¨¡å‹é€‰æ‹©å™¨ã€æ€è€ƒå¼€å…³ã€è”ç½‘æœç´¢ç­‰ç‹¬ç«‹æ§ä»¶ï¼‰</td></tr><tr><td align="left"><strong>è®¾è®¡ç›®æ ‡</strong></td><td align="left">æ¸…æ™°ã€ç®€æ´çš„å¼•å¯¼</td><td align="left">è¥é€ æ²‰æµ¸ã€æ™ºèƒ½ä¸”åŠŸèƒ½ä¸°å¯Œçš„<strong>å¯¹è¯å‡†å¤‡ç¯å¢ƒ</strong></td></tr></tbody></table>
<h2 data-id="heading-6">å››ã€é«˜çº§åº”ç”¨ä¸æœ€ä½³å®è·µ</h2>
<ol>
<li>
<p><strong>ä¸â€œæ·±åº¦æ€è€ƒâ€çŠ¶æ€è”åŠ¨</strong>
ä¸€äº›AIç»„ä»¶æ”¯æŒå±•ç¤ºâ€œæ€è€ƒè¿‡ç¨‹â€ã€‚æˆ‘ä»¬å¯ä»¥ç”¨<code>:focus-within</code>åœ¨ç”¨æˆ·è¾“å…¥æ—¶ï¼Œé¢„æç¤ºè¯¥åŠŸèƒ½çš„å­˜åœ¨ã€‚</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* ç”¨æˆ·èšç„¦è¾“å…¥æ—¶ï¼Œæš—ç¤ºâ€œæ·±åº¦æ€è€ƒâ€åŠŸèƒ½å¯ç”¨ */</span>
<span class="hljs-selector-class">.ai-sender-container</span><span class="hljs-selector-pseudo">:focus</span>-within <span class="hljs-selector-class">.btn-thinking</span> {
  <span class="hljs-attribute">animation</span>: subtle-pulse <span class="hljs-number">2s</span> infinite;
  <span class="hljs-attribute">border-color</span>: <span class="hljs-number">#722ed1</span>; <span class="hljs-comment">/* ç´«è‰²é€šå¸¸ä»£è¡¨AIæ€è€ƒ */</span>
}
</code></pre>
</li>
<li>
<p><strong>åµŒå¥—å±‚çº§çš„ç²¾å‡†æ§åˆ¶</strong>
<code>:focus-within</code>çš„å½±å“ä¼šç©¿é€å¤šå±‚DOMã€‚åœ¨å¤æ‚å¸ƒå±€ä¸­ï¼Œå¯ä»¥é€šè¿‡æ›´å…·ä½“çš„é€‰æ‹©å™¨è¿›è¡Œç²¾å‡†æ§åˆ¶ã€‚</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* åªå½“ç›´æ¥å­è¾“å…¥æ¡†èšç„¦æ—¶æ”¹å˜å®¹å™¨èƒŒæ™¯ï¼Œå¿½ç•¥å†…éƒ¨æŒ‰é’®çš„èšç„¦ */</span>
<span class="hljs-selector-class">.ai-sender-container</span> &gt; <span class="hljs-selector-tag">textarea</span><span class="hljs-selector-pseudo">:focus</span>-within {
  <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#f6ffed</span>;
}
</code></pre>
</li>
<li>
<p><strong>æ€§èƒ½è€ƒé‡</strong>
å°½ç®¡<code>:focus-within</code>éå¸¸å¼ºå¤§ï¼Œä½†åº”é¿å…åœ¨å…¶è§„åˆ™ä¸­ç¼–å†™ä¼šè§¦å‘é‡æ’ï¼ˆå¦‚æ”¹å˜å®½åº¦ï¼‰æˆ–å¤æ‚åŠ¨ç”»çš„å±æ€§ï¼Œä»¥ä¿æŒäº¤äº’çš„æµç•…æ€§ã€‚</p>
</li>
</ol>
<h2 data-id="heading-7">äº”ã€æ€»ç»“</h2>
<p>å¯¹äºAIå‰ç«¯å¼€å‘è€…è€Œè¨€ï¼Œ<code>:focus-within</code> ä¸ä»…ä»…æ˜¯ä¸€ä¸ªCSSæŠ€å·§ï¼Œæ›´æ˜¯å¤„ç†<strong>å¤æ‚å¤åˆç»„ä»¶äº¤äº’çŠ¶æ€</strong>çš„æˆ˜ç•¥æ€§å·¥å…·ã€‚å®ƒå°†æˆ‘ä»¬ä»æ‰‹åŠ¨ç®¡ç†ç„¦ç‚¹çš„JavaScriptæ³¥æ½­ä¸­è§£æ”¾å‡ºæ¥ï¼Œä»¥å£°æ˜å¼çš„æ–¹å¼ï¼Œå®ç°äº†è¾“å…¥æ¡†ä¸å‘¨è¾¹æ‰©å±•åŠŸèƒ½åŒºã€çŠ¶æ€æŒ‡ç¤ºå™¨ä¹‹é—´çš„<strong>æ— ç¼çŠ¶æ€åŒæ­¥</strong>ã€‚</p>
<p>åœ¨è¿½æ±‚æ™ºèƒ½ã€æµç•…ã€æ²‰æµ¸å¼å¯¹è¯ä½“éªŒçš„ä»Šå¤©ï¼Œå–„ç”¨ <code>:focus-within</code> èƒ½å¤Ÿè®©ä½ çš„AIäº§å“è¾“å…¥ç•Œé¢ä¸ä»…åŠŸèƒ½å¼ºå¤§ï¼Œè€Œä¸”åœ¨äº¤äº’ç»†èŠ‚ä¸Šè„±é¢–è€Œå‡ºï¼Œä¸ºç”¨æˆ·å¸¦æ¥â€œå¿ƒæ„ç›¸é€šâ€èˆ¬é¡ºç•…è‡ªç„¶çš„ä½“éªŒã€‚</p>
<p><strong>æ€è€ƒä¸å®è·µ</strong>ï¼šå°è¯•åœ¨ä½ ä¸‹ä¸€ä¸ªAIé¡¹ç›®çš„<code>ChatSender</code>ç»„ä»¶ä¸­åº”ç”¨<code>:focus-within</code>ï¼Œå®ç°å½“ç”¨æˆ·èšç„¦è¾“å…¥æ¡†æ—¶ï¼Œ<strong>è‡ªåŠ¨å±•å¼€æ¨¡å‹é€‰æ‹©ä¸‹æ‹‰åˆ—è¡¨</strong>çš„æç¤ºï¼Œå¹¶è§‚å¯Ÿç”¨æˆ·å¯¹å‘ç°æ­¤åŠŸèƒ½çš„æƒŠå–œæ„Ÿã€‚</p>
<hr/>
<h3 data-id="heading-8"><strong>é™„å½•ä¸å‚è€ƒèµ„æ–™</strong></h3>
<ol>
<li><strong><code>:focus-within</code></strong>
<ul>
<li><strong>é“¾æ¥</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FWeb%2FCSS%2FReference%2FSelectors%2F%3Afocus-within" target="_blank" title="https://developer.mozilla.org/zh-CN/docs/Web/CSS/Reference/Selectors/:focus-within" ref="nofollow noopener noreferrer">developer.mozilla.org/zh-CN/docs/â€¦</a></li>
</ul>
</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä½¿ç”¨nrmç®¡ç†é•œåƒ]]></title>    <link>https://juejin.cn/post/7584719268044521506</link>    <guid>https://juejin.cn/post/7584719268044521506</guid>    <pubDate>2025-12-18T05:31:47.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7584719268044521506" data-draft-id="7584711683773759488" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä½¿ç”¨nrmç®¡ç†é•œåƒ"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-18T05:31:47.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¿«ä¹æ˜Ÿçƒå–‚"/> <meta itemprop="url" content="https://juejin.cn/user/662375936570116"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä½¿ç”¨nrmç®¡ç†é•œåƒ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/662375936570116/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¿«ä¹æ˜Ÿçƒå–‚
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-18T05:31:47.000Z" title="Thu Dec 18 2025 05:31:47 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-18
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">1ã€nrmç®¡ç†å’Œåˆ‡æ¢é•œåƒæº</h2>
<h4 data-id="heading-1">nrmï¼ˆnpm registry managerï¼‰æ˜¯ä¸€ä¸ªç”¨äºç®¡ç†å’Œåˆ‡æ¢ npm æºçš„å‘½ä»¤è¡Œå·¥å…·ã€‚</h4>
<h2 data-id="heading-2">2ã€å®‰è£…</h2>
<p>é€šè¿‡å‘½ä»¤è¡Œå®‰è£…</p>
<pre><code class="hljs language-js" lang="js">npm install -g nrm
</code></pre>
<p>å¸¸è§çš„å‘½ä»¤</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">//(1)åˆ—å‡ºå¯ç”¨çš„æºï¼šå½“å‰é…ç½®çš„æ‰€æœ‰å¯ç”¨ npm æºä»¥åŠå®ƒä»¬çš„åç§°å’Œ URLã€‚</span>
nrm ls
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b4dd44436fa247e489c6e6e44cf54c33~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b-r5LmQ5pif55CD5ZaC:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766640706&amp;x-signature=tizeF719f0GUVD9hgCf1VpKrjmE%3D" alt="image.png" loading="lazy"/></p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// (2)åˆ‡æ¢æºï¼šå°†å½“å‰çš„ npm æºåˆ‡æ¢ä¸ºæŒ‡å®šçš„æºã€‚å¯ä»¥ä½¿ç”¨æºçš„åç§°æˆ– URL ä½œä¸º å‚æ•°ã€‚</span>
nrm use npm
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1dece980aff94258a36d2b29e3c97e08~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b-r5LmQ5pif55CD5ZaC:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766640706&amp;x-signature=R1fif1Xt3o7AP0RDIXxnWXreIEs%3D" alt="image.png" loading="lazy"/></p>
<pre><code class="hljs language-js" lang="js">(<span class="hljs-number">3</span>)æ·»åŠ æºï¼šæ·»åŠ ä¸€ä¸ªæ–°çš„ npm æºå¹¶æŒ‡å®šå…¶åç§°å’Œ <span class="hljs-variable constant_">URL</span>ã€‚
nrm add myregistry <span class="hljs-attr">http</span>:<span class="hljs-comment">//localhost:8080/npm/</span>
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/11120da26515425399c532397fe3d3dc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b-r5LmQ5pif55CD5ZaC:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766640706&amp;x-signature=5YNls4BrQkrSsm8pQImCW1%2FkH%2FI%3D" alt="image.png" loading="lazy"/></p>
<pre><code class="hljs language-js" lang="js">(<span class="hljs-number">4</span>)æµ‹è¯•æºçš„é€Ÿåº¦ï¼šæµ‹è¯•æŒ‡å®šæºçš„å“åº”é€Ÿåº¦ï¼Œå¹¶æ˜¾ç¤ºæµ‹è¯•ç»“æœã€‚
nrm del myregistry
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a67bfa90eda643b7aecba8725e8d7849~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b-r5LmQ5pif55CD5ZaC:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766640706&amp;x-signature=ggG5RRPO%2BcXwi%2BhOGGLCTLPHQLo%3D" alt="image.png" loading="lazy"/></p>
<pre><code class="hljs language-js" lang="js">(<span class="hljs-number">5</span>)æµ‹è¯•æºçš„é€Ÿåº¦ï¼šæµ‹è¯•æŒ‡å®šæºçš„å“åº”é€Ÿåº¦ï¼Œå¹¶æ˜¾ç¤ºæµ‹è¯•ç»“æœã€‚
nrm test npm
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/93158026d6f8498586fdbf53a81d60a8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b-r5LmQ5pif55CD5ZaC:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766640706&amp;x-signature=Sgx7pdLC9SxXYTYSKT4knQrNzSg%3D" alt="image.png" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Tigriså¯¹è±¡å­˜å‚¨æ­£å¼å¼€æºMCP OIDCèº«ä»½æä¾›å•†]]></title>    <link>https://juejin.cn/post/7584725529877184562</link>    <guid>https://juejin.cn/post/7584725529877184562</guid>    <pubDate>2025-12-18T04:07:58.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7584725529877184562" data-draft-id="7584725529877151794" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Tigriså¯¹è±¡å­˜å‚¨æ­£å¼å¼€æºMCP OIDCèº«ä»½æä¾›å•†"/> <meta itemprop="keywords" content="å®‰å…¨,Redis,å¾®æœåŠ¡"/> <meta itemprop="datePublished" content="2025-12-18T04:07:58.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="äº‘äº‘ä¼—ç”Ÿs"/> <meta itemprop="url" content="https://juejin.cn/user/380845430158739"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Tigriså¯¹è±¡å­˜å‚¨æ­£å¼å¼€æºMCP OIDCèº«ä»½æä¾›å•†
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/380845430158739/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    äº‘äº‘ä¼—ç”Ÿs
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-18T04:07:58.000Z" title="Thu Dec 18 2025 04:07:58 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-18
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    5
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>mcp-oidc-provideræ˜¯ä¸“ä¸ºMCPæœåŠ¡å™¨è®¾è®¡çš„OIDCæä¾›å•†ï¼Œç®€åŒ–è®¤è¯æˆæƒï¼Œè¿æ¥å®¢æˆ·ç«¯ä¸ä¸Šæ¸¸IdPï¼Œæ”¯æŒOAuth/OIDCå‘ç°ï¼Œä¸”ä¸ä¾›åº”å•†æ— å…³ã€‚</p>
<blockquote>
<p>è¯‘è‡ªï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.tigrisdata.com%2Fblog%2Fmcp-oidc-provider%2F" target="_blank" title="https://www.tigrisdata.com/blog/mcp-oidc-provider/" ref="nofollow noopener noreferrer">We're open sourcing our MCP OIDC Provider | Tigris Object Storage</a></p>
<p>ä½œè€…ï¼šAbdullah Ibrahim</p>
</blockquote>
<p><strong>TLDR: åœ¨æ„å»ºè¿œç¨‹ MCP æœåŠ¡å™¨æ—¶ï¼Œä½ å¾ˆå¯èƒ½éœ€è¦åœ¨å®¢æˆ·ç«¯ï¼ˆå¦‚ Claudeã€Cursor ç­‰ï¼‰å’Œä¸Šæ¸¸ IdPï¼ˆå¦‚ Auth0ã€Clerk ç­‰ï¼‰ä¹‹é—´æ·»åŠ ä¸€ä¸ª OIDC å±‚ã€‚æˆ‘ä»¬ä¸ºä½ åˆ›å»ºäº†ä¸€ä¸ªå¼€ç®±å³ç”¨çš„è§£å†³æ–¹æ¡ˆï¼Œå®ƒä¸ä¾›åº”å•†æ— å…³ï¼šä½ å¯ä»¥ä½¿ç”¨ä»»ä½•ä½ æƒ³è¦çš„ IdPã€‚</strong></p>
<p>MCP æœåŠ¡å™¨éœ€è¦çœŸå®çš„èº«ä»½éªŒè¯å’Œæˆæƒã€‚å¿…é¡»é¢å‘ã€åˆ·æ–°ã€éªŒè¯ä»¤ç‰Œï¼Œå¹¶å°†å…¶ä¸ä¸Šæ¸¸èº«ä»½å…³è”ã€‚å®¢æˆ·ç«¯éœ€è¦ç™»å½•ã€è·å–å‡­æ®ï¼Œå¹¶å®‰å…¨åœ°è°ƒç”¨ä½ çš„ MCP æœåŠ¡å™¨ã€‚è¿™å¾ˆå¤æ‚ï¼Œå°¤å…¶å¦‚æœä½ ä¸æ˜¯ä¸€åå®‰å…¨å·¥ç¨‹å¸ˆã€‚ä½ ä¸åº”è¯¥è‡ªå·±å®ç°è®¤è¯ï¼Œä½†å¦‚æœç°æœ‰å·¥å…·æ— æ³•å¼€ç®±å³ç”¨ï¼Œä½ è¯¥æ€ä¹ˆåŠï¼Ÿ</p>
<p>å®ç°<a href="https://link.juejin.cn?target=https%3A%2F%2Fsupport.claude.com%2Fen%2Farticles%2F11503834-building-custom-connectors-via-remote-mcp-servers" target="_blank" title="https://support.claude.com/en/articles/11503834-building-custom-connectors-via-remote-mcp-servers" ref="nofollow noopener noreferrer">è¿œç¨‹æ‰˜ç®¡çš„ MCP æœåŠ¡å™¨</a>éœ€è¦å®ç°<a href="https://link.juejin.cn?target=https%3A%2F%2Fmodelcontextprotocol.io%2Fspecification%2Fdraft%2Fbasic%2Fauthorization" target="_blank" title="https://modelcontextprotocol.io/specification/draft/basic/authorization" ref="nofollow noopener noreferrer">MCP æˆæƒåè®®</a>ï¼Œè¯¥åè®®åŸºäº OAuth 2.1 (DRAFT)ã€‚ç†è®ºä¸Šï¼Œè¿™åº”è¯¥å¾ˆç®€å•ï¼Œå› ä¸ºç°ä»£åº”ç”¨ç¨‹åºè¦ä¹ˆè‡ªå·±å®ç° OAuth è§„èŒƒï¼Œè¦ä¹ˆä½¿ç”¨ç¬¦åˆ OAuth æ ‡å‡†çš„ IdPï¼Œå¦‚ Auth0 æˆ– Clerkã€‚æˆ‘è‡³å°‘æ˜¯è¿™æ ·è®¤ä¸ºçš„ï¼Œä½†å½“æˆ‘å¼€å§‹å®ç°æ—¶ï¼Œå´é‡åˆ°äº†é‡å¤§é—®é¢˜ã€‚</p>
<p>è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬æ„å»ºå¹¶å¼€æºäº† <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Ftigrisdata%2Fmcp-oidc-provider" target="_blank" title="https://github.com/tigrisdata/mcp-oidc-provider" ref="nofollow noopener noreferrer">mcp-oidc-provider</a>ï¼šä¸€ä¸ªä¸“é—¨ä¸º MCP å·¥ä½œæµè®¾è®¡çš„ã€æç®€çš„ã€ç”Ÿäº§å°±ç»ªçš„ OIDC providerã€‚</p>
<h3 data-id="heading-0">MCP åè®®éœ€è¦å‘ç° (OAuth æˆ– OIDC)<a href="#mcp-protocol-requires-discovery-oauth-or-oidc" title="#mcp-protocol-requires-discovery-oauth-or-oidc">â€‹</a></h3>
<p>MCP è§„èŒƒ (<a href="https://link.juejin.cn?target=https%3A%2F%2Fmodelcontextprotocol.io%2Fspecification%2F2025-11-25%2Fbasic%2Fauthorization%23protected-resource-metadata-discovery-requirements" target="_blank" title="https://modelcontextprotocol.io/specification/2025-11-25/basic/authorization#protected-resource-metadata-discovery-requirements" ref="nofollow noopener noreferrer">2025-11-25</a>) æ˜ç¡®è¦æ±‚ä½¿ç”¨ OAuthã€‚æ ¹æ®è§„èŒƒï¼š</p>
<ul>
<li>å—ä¿æŠ¤çš„ MCP æœåŠ¡å™¨ä½œä¸º OAuth 2.1 èµ„æºæœåŠ¡å™¨ï¼Œèƒ½å¤Ÿæ¥å—å¹¶ä½¿ç”¨è®¿é—®ä»¤ç‰Œå“åº”å—ä¿æŠ¤çš„èµ„æºè¯·æ±‚ã€‚</li>
<li>MCP å®¢æˆ·ç«¯ä½œä¸º OAuth 2.1 å®¢æˆ·ç«¯ï¼Œä»£è¡¨èµ„æºæ‰€æœ‰è€…å‘å‡ºå—ä¿æŠ¤çš„èµ„æºè¯·æ±‚ã€‚</li>
</ul>
<p>å¯¹äºå‘ç°æœºåˆ¶ï¼ŒMCP æˆæƒæœåŠ¡å™¨ï¼ˆæœ¬è½¯ä»¶åŒ…ç”¨äºæ­¤ç›®çš„ï¼‰å¿…é¡»æä¾›è‡³å°‘ä¸€ç§å‘ç°æœºåˆ¶ï¼š</p>
<ul>
<li>OAuth 2.0 æˆæƒæœåŠ¡å™¨å…ƒæ•°æ® (<a href="https://link.juejin.cn?target=https%3A%2F%2Fdatatracker.ietf.org%2Fdoc%2Fhtml%2Frfc8414" target="_blank" title="https://datatracker.ietf.org/doc/html/rfc8414" ref="nofollow noopener noreferrer">RFC8414</a>)</li>
<li>OpenID Connect Discovery 1.0</li>
</ul>
<p>OpenID Connect Discovery (OIDC) åœ¨æŠ€æœ¯ä¸Šæ˜¯å¯é€‰çš„ï¼Œä½†ä½ éœ€è¦ä¸€ä¸ªèº«ä»½å±‚æ¥å……åˆ†ä¿æŠ¤ä½ çš„ MCP æœåŠ¡å™¨ã€‚OAuth æä¾›äº†ä¸€ç§æ–¹å¼ï¼Œè®©å®¢æˆ·ç«¯å¯ä»¥è¯·æ±‚ä½ çš„ MCP æˆæƒæœåŠ¡å™¨å»è·å–èµ„æºæ‰€æœ‰è€…çš„æˆæƒã€‚å®ƒä¸éªŒè¯å®¢æˆ·ç«¯çš„èº«ä»½ã€‚OIDC ä¸ºä½ å¤„ç†èº«ä»½éƒ¨åˆ†ã€‚</p>
<p>å¦‚æœæ²¡æœ‰ OIDCï¼Œä½ å¿…é¡»ä¸ºæ¯ä¸ªæä¾›å•†æ„å»ºè‡ªå®šä¹‰é›†æˆæ¥éªŒè¯èº«ä»½ã€‚ä½ éœ€è¦å®ç°è‡ªå·±çš„ä»¤ç‰Œåˆ·æ–°é€»è¾‘ï¼ŒåŒ…æ‹¬ <code>offline_access</code> æ”¯æŒã€‚åƒ <code>mcp://cursor/auth</code> æˆ– <code>claude://oauth/callback</code> è¿™æ ·çš„é‡å®šå‘ URI ä¼šè¢«æ ‡å‡† IdP æ‹’ç»ï¼Œå› ä¸ºå®ƒä»¬ä¸æ˜¯ç½‘ç»œ URLï¼Œå¹¶ä¸”éœ€è¦æ˜ç¡®çš„ OIDC æ”¯æŒã€‚è€Œä¸”ä½ çš„ MCP æœåŠ¡å™¨æ— æ³•ä¸ Claude å’Œ Cursor ç­‰æ¡Œé¢å®¢æˆ·ç«¯é…åˆä½¿ç”¨ã€‚</p>
<p>ç›´æ¥ä½¿ç”¨ OIDC å§ã€‚å®ƒç®€å•å¾—å¤šã€‚</p>
<h4 data-id="heading-1">ä½ éœ€è¦ OAuth å’Œ OIDC ä¸¤è€…<a href="#you-need-both-oauth-and-oidc" title="#you-need-both-oauth-and-oidc">â€‹</a></h4>
<p>åœ¨è¿™ä¸ªè½¯ä»¶åŒ…ä¸­ï¼Œæˆ‘åŒæ—¶å®ç°äº† OAuth å’Œ OIDC å‘ç°ç«¯ç‚¹ï¼ŒåŸå› æ˜¯ä»€ä¹ˆï¼ŸMCP å®¢æˆ·ç«¯å¿…é¡»æ”¯æŒå°è¯•ä¸¤ç§å‘ç°æœºåˆ¶ï¼Œä½†å¹¶éæ‰€æœ‰å®¢æˆ·ç«¯éƒ½ç¬¦åˆè§„èŒƒã€‚å› æ­¤ï¼Œä¾‹å¦‚ï¼Œå¦‚æœå®ƒä»¬åªå®ç°äº† OpenID Connect Discovery 1.0 è¿›è¡Œå‘ç°ï¼Œ<code>mcp-oidc-provider</code> ä»ç„¶ä¼šå·¥ä½œã€‚</p>
<p>æˆ‘ä»¬ä¼—æ‰€å‘¨çŸ¥çš„ <a href="https://link.juejin.cn?target=https%3A%2F%2Fmcp.storage.dev%2F.well-known%2Fopenid-configuration" target="_blank" title="https://mcp.storage.dev/.well-known/openid-configuration" ref="nofollow noopener noreferrer">OIDC ç«¯ç‚¹</a>æ˜¯ OpenID å¼€ç®±å³ç”¨çš„ã€‚ä¸ºäº†æœ€å¤§ç¨‹åº¦çš„å…¼å®¹æ€§ï¼Œæˆ‘ä»¬å®ç°äº† OAuth ç«¯ç‚¹ï¼š</p>
<h3 data-id="heading-2">åŠ¨æ€å®¢æˆ·ç«¯æ³¨å†Œï¼šä»…é ä¸Šæ¸¸ IdP æ— æ³•è§£å†³æ­¤é—®é¢˜<a href="#dynamic-client-registration-upstream-idps-alone-dont-solve-this" title="#dynamic-client-registration-upstream-idps-alone-dont-solve-this">â€‹</a></h3>
<p>æ ¹æ® MCP è§„èŒƒï¼šâ€œæˆæƒæœåŠ¡å™¨å’Œ MCP å®¢æˆ·ç«¯<strong>åº”</strong>æ”¯æŒ OAuth 2.0 åŠ¨æ€å®¢æˆ·ç«¯æ³¨å†Œåè®® (<a href="https://link.juejin.cn?target=https%3A%2F%2Fdatatracker.ietf.org%2Fdoc%2Fhtml%2Frfc7591" target="_blank" title="https://datatracker.ietf.org/doc/html/rfc7591" ref="nofollow noopener noreferrer">RFC7591</a>)ã€‚â€ è¡¨é¢ä¸Šçœ‹ï¼Œè¿™ä¼¼ä¹åº”è¯¥è®©æ”¯æŒåŠ¨æ€å®¢æˆ·ç«¯æ³¨å†Œçš„ IdP å¯¹å¤§å¤šæ•° MCP å®¢æˆ·ç«¯éƒ½æœ‰æ•ˆã€‚</p>
<p>åœ¨ç¬¬ä¸€æ¬¡è¿­ä»£ä¸­ä½¿ç”¨ Auth0 æ—¶ï¼Œæˆ‘ä»¬å¯ç”¨äº†åŠ¨æ€å®¢æˆ·ç«¯æ³¨å†Œã€‚å®ƒåœ¨æŠ€æœ¯ä¸Šæ— éœ€ä»»ä½•ä¸­é—´ä»¶å³å¯æˆæƒ MCP å®¢æˆ·ç«¯ï¼Œä½†æ¯ä¸ªä¸´æ—¶å®¢æˆ·ç«¯éƒ½æ˜¾ç¤ºåœ¨é•¿æœŸå­˜åœ¨çš„ç¬¬ä¸‰æ–¹åº”ç”¨ç¨‹åºåˆ—è¡¨ä¸­ã€‚å› æ­¤ï¼Œå¯¹äºæ¯ä¸ªç”¨æˆ·ï¼Œæ¯ä¸ªä¼šè¯æˆ‘ä»¬éƒ½æœ‰ä¸€ä¸ªç¬¬ä¸‰æ–¹åº”ç”¨ç¨‹åºã€‚æ­£å¦‚ä½ æ‰€æƒ³è±¡çš„ï¼Œæˆ‘ä»¬ç‚¹å‡»é‚£ä¸ªåˆ—è¡¨ç‚¹å¾—æ‰‹éƒ½ç–¼äº†ã€‚è€Œä¸”ï¼Œä¸ºæ¯ä¸ªå®¢æˆ·ç«¯é¢å‘æœ‰èŒƒå›´çš„è®¿é—®ä»¤ç‰Œä¹Ÿå¾ˆç—›è‹¦ã€‚</p>
<p><img src="https://www.tigrisdata.com/blog/assets/images/oauth-clients-1f309154bab0cc028818e1d876ddb0e7.webp" alt="ä¸€å †åŠ¨æ€åˆ›å»ºçš„ OAuth å®¢æˆ·ç«¯æ·¹æ²¡äº†é™æ€å®šä¹‰çš„å®¢æˆ·ç«¯" loading="lazy"/></p>
<p>æˆ‘ä»¬éœ€è¦åˆ—è¡¨ä¸­åªæœ‰ä¸€ä¸ªç¬¬ä¸‰æ–¹åº”ç”¨ç¨‹åºï¼Œä¸€ä¸ªå°çš„ OIDC æä¾›å•†ï¼Œèƒ½å¤Ÿæ§åˆ¶æ‰€æœ‰ MCP å®¢æˆ·ç«¯çš„è®¿é—®ã€‚ä»¥å…æˆ‘ä»¬çš„çœ¼ç›è¢«ä»ªè¡¨æ¿çš„è‡ƒè‚¿æ‰€ä¼¤å®³ã€‚</p>
<h3 data-id="heading-3">ä»‹ç» mcp-oidc-provider</h3>
<p>ä¸€ä¸ªæç®€çš„ã€æœ‰ä¸»è§çš„ OIDC providerï¼Œä¸“ä¸º MCP æœåŠ¡å™¨æ„å»ºï¼Œä½ å¯ä»¥ä¸ä»»ä½•å…¼å®¹ OIDC çš„ IdP ä¸€èµ·ä½¿ç”¨ã€‚</p>
<p>ä½¿ç”¨å®ƒï¼Œä½ å°†è·å¾—è§„èŒƒä¸­æ˜ç¡®è¦æ±‚çš„åŠŸèƒ½ï¼š</p>
<ul>
<li>å—ä¿æŠ¤çš„ MCP æœåŠ¡å™¨ä½œä¸º OAuth 2.1 èµ„æºæœåŠ¡å™¨ï¼Œèƒ½å¤Ÿæ¥å—å¹¶ä½¿ç”¨è®¿é—®ä»¤ç‰Œå“åº”å—ä¿æŠ¤çš„èµ„æºè¯·æ±‚ã€‚</li>
<li>å®¢æˆ·ç«¯ä½œä¸º OAuth 2.1 å®¢æˆ·ç«¯ï¼Œä»£è¡¨èµ„æºæ‰€æœ‰è€…å‘å‡ºå—ä¿æŠ¤çš„èµ„æºè¯·æ±‚ã€‚</li>
</ul>
<p>æ­¤å¤–ï¼Œæˆ‘ä»¬å°†ä¼šè¯ã€ä»¤ç‰Œã€æˆæƒå’Œ OIDC é€‚é…å™¨æ•°æ®å­˜å‚¨åœ¨ä¸€ä¸ªé”®å€¼å­˜å‚¨ä¸­ã€‚ä½ å¯ä»¥åƒæˆ‘ä»¬ä¸€æ ·ä½¿ç”¨ Tigris ä½œä¸ºä½ çš„ KV å­˜å‚¨ï¼Œæˆ–è€…ä½¿ç”¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fjaredwray%2Fkeyv%2F" target="_blank" title="https://github.com/jaredwray/keyv/" ref="nofollow noopener noreferrer">Keyv</a> æ”¯æŒçš„ä»»ä½•å…¶ä»–å­˜å‚¨ï¼Œå¦‚ Redis æˆ– Postgresã€‚</p>
<p><img src="https://res.cloudinary.com/dkrpg71cx/image/upload/v1766030444/g6qfasopkxfpqzrbqkvl.png" alt="alt text" loading="lazy"/></p>
<h4 data-id="heading-4">ç”¨æ³•ï¼šå‚è€ƒç‹¬ç«‹å®ç°<a href="#usage-referencing-the-standalone-implementation" title="#usage-referencing-the-standalone-implementation">â€‹</a></h4>
<p>æœ€å¥½çš„èµ·ç‚¹æ˜¯<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Ftigrisdata%2Fmcp-oidc-provider%2Ftree%2Fmain%2Fexample%2Fstandalone-oidc" target="_blank" title="https://github.com/tigrisdata/mcp-oidc-provider/tree/main/example/standalone-oidc" ref="nofollow noopener noreferrer">ç‹¬ç«‹ OIDC provider</a>ã€‚å¦‚æœä½ å·²åœ¨ Express ä»¥å¤–çš„ä¸åŒæŠ€æœ¯æ ˆä¸­å®ç°äº† MCPï¼Œæˆ–è€…æƒ³å°†è®¤è¯ä½œä¸ºå¯ç‹¬ç«‹æ‰©å±•çš„ç‹¬ç«‹å¾®æœåŠ¡è¿è¡Œï¼Œè¯·ä½¿ç”¨å®ƒã€‚ä½ å¯ä»¥è®©ä½ çš„ MCP æœåŠ¡å™¨ä½¿ç”¨ NextJS æˆ–å…¶ä»–æ¡†æ¶ï¼Œç„¶åç‹¬ç«‹è¿è¡Œæ­¤æœåŠ¡å™¨ï¼Œå¹¶å°†è®¤è¯è¯·æ±‚ä»£ç†åˆ°æ­¤æœåŠ¡å™¨ã€‚</p>
<p>ç‹¬ç«‹ provider åŒ…å«ï¼š</p>
<ul>
<li>å¼•å¯¼æœåŠ¡å™¨ä»£ç </li>
<li>provider é…ç½®</li>
<li>ä¸Šæ¸¸ IdP è¿æ¥</li>
<li>è·¯ç”±è®¾ç½®</li>
<li>å­˜å‚¨é€‚é…å™¨ç¤ºä¾‹</li>
<li>å®Œæ•´çš„ OIDC ç«¯ç‚¹æ³¨å†Œ</li>
</ul>
<p>æ­¤å¤–ï¼Œä½ å¯ä»¥é€‰æ‹©ä½¿ç”¨ Tigris ä½œä¸ºä½ çš„é”®å€¼å­˜å‚¨ã€‚</p>
<p>å…‹éš†ä»“åº“å¹¶ä½¿ç”¨ <code>npm install</code> å®‰è£…ä¾èµ–åï¼Œè®¾ç½®ä½ çš„ç¯å¢ƒï¼š</p>
<pre><code class="hljs language-ini" lang="ini">cat .env  
<span class="hljs-comment"># configure your upstream IdP  </span>
<span class="hljs-attr">UPSTREAM_ISSUER</span>=https://YOUR_DOMAIN.auth0.com  
<span class="hljs-attr">UPSTREAM_CLIENT_ID</span>=...  
<span class="hljs-attr">UPSTREAM_CLIENT_SECRET</span>=...  
<span class="hljs-attr">UPSTREAM_REDIRECT_URI</span>=http://localhost:<span class="hljs-number">3000</span>/callback  
  
<span class="hljs-comment">#configure your own provider issuer  </span>
<span class="hljs-attr">OIDC_ISSUER</span>=http://localhost:<span class="hljs-number">4000</span>  
<span class="hljs-attr">OIDC_PORT</span>=<span class="hljs-number">4000</span>  
  
<span class="hljs-comment"># Tigris (for @tigrisdata/keyv-tigris)  </span>
<span class="hljs-attr">TIGRIS_STORAGE_ACCESS_KEY_ID</span>=tid_xxxxx  
<span class="hljs-attr">TIGRIS_STORAGE_SECRET_ACCESS_KEY</span>=tsec_yyyyy  
<span class="hljs-attr">TIGRIS_STORAGE_BUCKET</span>=my-kv-bucket  

</code></pre>
<p>MCP å®¢æˆ·ç«¯å°†è·å– <code>[http://localhost:4000/.well-known/openid-configuration](http://localhost:4000/.well-known/openid-configuration)</code> æ¥å‘ç° OAuth æµç¨‹æ‰€éœ€çš„ç«¯ç‚¹ã€‚</p>
<p>ä½ ä½¿ç”¨ <code>npm start</code> è¿è¡Œ providerã€‚ä½ å¯ä»¥å°†å…¶ä¸ä½ çš„ MCP æœåŠ¡å™¨ä¸€èµ·è¿è¡Œï¼Œè®¤è¯è¯·æ±‚å°†ä»£ç†åˆ°å®ƒã€‚</p>
<p>å°†ä½ çš„å®¢æˆ·ç«¯æŒ‡å‘ä½ çš„ OIDC issuerã€‚ä¾‹å¦‚ï¼ŒClaude Desktop æœŸæœ›ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>  
  <span class="hljs-attr">"auth"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>  
    <span class="hljs-attr">"issuer"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"http://localhost:4000"</span>  
  <span class="hljs-punctuation">}</span>  
<span class="hljs-punctuation">}</span>  

</code></pre>
<p>å½“ä½ çš„ MCP æœåŠ¡å™¨æ”¶åˆ°è¯·æ±‚æ—¶ï¼Œä½ ä½¿ç”¨ JWKS éªŒè¯ä»¤ç‰Œï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { createRemoteJWKSet, jwtVerify } <span class="hljs-keyword">from</span> <span class="hljs-string">"jose"</span>;  
  
<span class="hljs-keyword">const</span> jwks = <span class="hljs-title function_">createRemoteJWKSet</span>(<span class="hljs-keyword">new</span> <span class="hljs-title function_">URL</span>(<span class="hljs-string">"http://localhost:4000/jwks"</span>));  
  
<span class="hljs-keyword">const</span> { payload } = <span class="hljs-keyword">await</span> <span class="hljs-title function_">jwtVerify</span>(accessToken, jwks);  
  
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"User:"</span>, payload.<span class="hljs-property">sub</span>);  

</code></pre>
<p>å°±æ˜¯è¿™æ ·ã€‚ä½ æ‹¥æœ‰äº†ä¸€ä¸ªåŠŸèƒ½é½å…¨çš„åŸºäº OIDC çš„ MCP è®¤è¯æµç¨‹ã€‚</p>
<h4 data-id="heading-5">ç”¨æ³•ï¼šé›†æˆæ¨¡å¼ (Express + MCP)<a href="#usage-integrated-mode-express--mcp" title="#usage-integrated-mode-express--mcp">â€‹</a></h4>
<p>å¦‚æœä½ ä½¿ç”¨ Node / Express æ„å»º MCP æœåŠ¡å™¨ï¼Œè¿™æ˜¯æœ€ç®€å•çš„å…¥é—¨æ–¹å¼ã€‚åœ¨é›†æˆæ¨¡å¼ä¸‹ï¼Œä½ è¿è¡Œä¸€ä¸ª Express åº”ç”¨ç¨‹åºï¼Œå®ƒå°†ï¼š</p>
<ul>
<li>æ‰˜ç®¡ OIDC provider (/.well-known/openid-configuration, /authorize, /token, /jwks, /register)</li>
<li>æ‰˜ç®¡ä½ çš„ MCP ç«¯ç‚¹</li>
<li>ç«¯åˆ°ç«¯å¤„ç†æ‰€æœ‰ OAuth + OIDC æµç¨‹</li>
<li>æš´éœ²ä¸€ä¸ªå•ä¸€çš„ BASE_URLï¼Œä½ çš„ MCP å®¢æˆ·ç«¯å°†æŒ‡å‘å®ƒ</li>
</ul>
<p>é¦–å…ˆï¼Œå®‰è£…ä½ çš„ä¾èµ–é¡¹ï¼š</p>
<pre><code class="hljs">npm install mcp-oidc-provider keyv openid-client express  

</code></pre>
<p>å¦‚æœä½ ä½¿ç”¨ TSï¼Œä½ å¯èƒ½è¿˜éœ€è¦ <code>typescript</code>ã€<code>ts-node</code> ç­‰ï¼Œä½†é‚£æ˜¯æ ‡å‡†é…ç½®ã€‚</p>
<p>å…¶æ¬¡ï¼Œä¸€æ¬¡æ€§ç”Ÿæˆä½ çš„ JWKS ç­¾åå¯†é’¥ã€‚ä½ å°†å®ƒä»¬ä¿å­˜åˆ° <code>.env</code> æ–‡ä»¶ä¸­ã€‚</p>
<pre><code class="hljs language-css" lang="css">npx mcp-oidc-provider <span class="hljs-attr">--pretty</span>  

</code></pre>
<p>å¤åˆ¶æ‰“å°å‡ºçš„ JSON å¹¶å°†å…¶å­˜å‚¨åœ¨ä¸€ä¸ªå®‰å…¨ä½ç½®ï¼ˆä¾‹å¦‚å¯†é’¥ç®¡ç†å™¨ï¼‰ï¼Œç„¶åé€šè¿‡ JWKS ç¯å¢ƒå˜é‡æ³¨å…¥ã€‚</p>
<p>å¯¹äºå¼€å‘ç¯å¢ƒï¼Œä½ å¯ä»¥è·³è¿‡æ­¤æ­¥éª¤ï¼ˆå¯†é’¥ä¼šè‡ªåŠ¨ç”Ÿæˆï¼Œä½†ä»¤ç‰Œåœ¨é‡å¯åï¼Œä»¤ç‰Œç¼“å­˜è¿‡æœŸåä¼šå¤±æ•ˆï¼‰ã€‚</p>
<p>ç¬¬ä¸‰ï¼Œé…ç½®ä½ çš„ç¯å¢ƒï¼š</p>
<pre><code class="hljs language-ini" lang="ini">cat .env  
<span class="hljs-attr">BASE_URL</span>=http://localhost:<span class="hljs-number">3000</span>          <span class="hljs-comment"># Where this combined server runs  </span>
<span class="hljs-attr">OIDC_CLIENT_ID</span>=your-idp-client-id  
<span class="hljs-attr">OIDC_CLIENT_SECRET</span>=your-idp-client-secret  
<span class="hljs-attr">SESSION_SECRET</span>=some-long-random-string  
<span class="hljs-attr">JWKS</span>=...                                <span class="hljs-comment"># JSON from `npx mcp-oidc-provider --pretty` (prod only)  </span>

</code></pre>
<p>BASE_URL å¿…é¡»æ˜¯å®¢æˆ·ç«¯å°†ç”¨äºä»¥ä¸‹ç›®çš„çš„å…¬å…± URLï¼š</p>
<ul>
<li>OIDC å‘ç° (/.well-known/openid-configuration)</li>
<li>OAuth å›è°ƒ (/oauth/callback)</li>
<li>MCP ç«¯ç‚¹ï¼ˆä½ åœ¨æ­¤æœåŠ¡å™¨ä¸‹é€‰æ‹©çš„ä»»ä½•è·¯ç”±ï¼‰</li>
</ul>
<p>ç°åœ¨ï¼Œä½ å¯ä»¥é€šè¿‡ä½¿ç”¨ <code>setupMcpExpress()</code> å‡½æ•°å°† OIDC provider æ·»åŠ åˆ°ä½ çš„æœåŠ¡å™¨ã€‚å®ƒå°†ï¼š</p>
<ul>
<li>å°† OIDC provider è·¯ç”±æŒ‚è½½åˆ° Express åº”ç”¨ç¨‹åº</li>
<li>è¿æ¥ MCP è®¤è¯ï¼ˆBearer è®¤è¯ + ä»¤ç‰ŒéªŒè¯ï¼‰</li>
<li>è¿”å›ï¼š
<ul>
<li>appï¼šé…ç½®å¥½çš„ Express å®ä¾‹</li>
<li><code>handleMcpRequest(handler)</code>ï¼šä¸€ä¸ªå¸®åŠ©å‡½æ•°ï¼Œç”¨äºæ³¨å†Œä½ çš„ MCP è¯·æ±‚å¤„ç†å™¨ï¼Œå…¶ä¸­è®¤è¯ + ç”¨æˆ·å·²è§£æ</li>
</ul>
</li>
</ul>
<p>ä»¥ä¸‹æ˜¯å¦‚ä½•ä½¿ç”¨å®ƒçš„ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> express <span class="hljs-keyword">from</span> <span class="hljs-string">"express"</span>;  
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Keyv</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"keyv"</span>;  
<span class="hljs-keyword">import</span> { setupMcpExpress } <span class="hljs-keyword">from</span> <span class="hljs-string">"mcp-oidc-provider/mcp"</span>;  
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">OidcClient</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"mcp-oidc-provider/oidc"</span>;  
<span class="hljs-keyword">import</span> <span class="hljs-keyword">type</span> { <span class="hljs-variable constant_">JWKS</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"mcp-oidc-provider"</span>;  
  
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">main</span>(<span class="hljs-params"/>) {  
    
  <span class="hljs-keyword">const</span> <span class="hljs-attr">jwks</span>: <span class="hljs-variable constant_">JWKS</span> | <span class="hljs-literal">undefined</span> = process.<span class="hljs-property">env</span>.<span class="hljs-property">JWKS</span>  
    ? <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(process.<span class="hljs-property">env</span>.<span class="hljs-property">JWKS</span>)  
    : <span class="hljs-literal">undefined</span>;  
  
  <span class="hljs-keyword">if</span> (!process.<span class="hljs-property">env</span>.<span class="hljs-property">BASE_URL</span>) {  
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">"BASE_URL is required"</span>);  
  }  
  <span class="hljs-keyword">if</span> (!process.<span class="hljs-property">env</span>.<span class="hljs-property">OIDC_CLIENT_ID</span> || !process.<span class="hljs-property">env</span>.<span class="hljs-property">OIDC_CLIENT_SECRET</span>) {  
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">"OIDC_CLIENT_ID and OIDC_CLIENT_SECRET are required"</span>);  
  }  
  <span class="hljs-keyword">if</span> (!process.<span class="hljs-property">env</span>.<span class="hljs-property">SESSION_SECRET</span>) {  
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">"SESSION_SECRET is required"</span>);  
  }  
  
    
  <span class="hljs-keyword">const</span> idpClient = <span class="hljs-keyword">new</span> <span class="hljs-title class_">OidcClient</span>({  
    <span class="hljs-attr">issuer</span>: <span class="hljs-string">"https://your-tenant.auth0.com"</span>,   
    <span class="hljs-attr">clientId</span>: process.<span class="hljs-property">env</span>.<span class="hljs-property">OIDC_CLIENT_ID</span>,  
    <span class="hljs-attr">clientSecret</span>: process.<span class="hljs-property">env</span>.<span class="hljs-property">OIDC_CLIENT_SECRET</span>,  
    <span class="hljs-attr">redirectUri</span>: <span class="hljs-string">`<span class="hljs-subst">${process.env.BASE_URL}</span>/oauth/callback`</span>,  
      
  });  
  
    
  <span class="hljs-keyword">const</span> store = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Keyv</span>();   
  
    
    
    
    
  <span class="hljs-keyword">const</span> { app, handleMcpRequest } = <span class="hljs-title function_">setupMcpExpress</span>({  
    idpClient,  
    store,  
    <span class="hljs-attr">baseUrl</span>: process.<span class="hljs-property">env</span>.<span class="hljs-property">BASE_URL</span>,  
    <span class="hljs-attr">secret</span>: process.<span class="hljs-property">env</span>.<span class="hljs-property">SESSION_SECRET</span>,  
    jwks,  
  });  
  
    
    
  <span class="hljs-title function_">handleMcpRequest</span>(<span class="hljs-keyword">async</span> (req, res) =&gt; {  
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"Authenticated user:"</span>, req.<span class="hljs-property">user</span>);  
  
      
      
      
  
      
    res.<span class="hljs-title function_">json</span>({  
      <span class="hljs-attr">jsonrpc</span>: <span class="hljs-string">"2.0"</span>,  
      <span class="hljs-attr">id</span>: req.<span class="hljs-property">body</span>?.<span class="hljs-property">id</span> ?? <span class="hljs-literal">null</span>,  
      <span class="hljs-attr">result</span>: {  
        <span class="hljs-attr">message</span>: <span class="hljs-string">"Hello from integrated MCP + OIDC server!"</span>,  
        <span class="hljs-attr">user</span>: req.<span class="hljs-property">user</span>,  
      },  
    });  
  });  
  
  <span class="hljs-keyword">const</span> port = <span class="hljs-title class_">Number</span>(process.<span class="hljs-property">env</span>.<span class="hljs-property">PORT</span> ?? <span class="hljs-number">3000</span>);  
  app.<span class="hljs-title function_">listen</span>(port, <span class="hljs-function">() =&gt;</span> {  
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`MCP + OIDC server listening on <span class="hljs-subst">${port}</span>`</span>);  
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Base URL: <span class="hljs-subst">${process.env.BASE_URL}</span>`</span>);  
  });  
}  
  
<span class="hljs-title function_">main</span>().<span class="hljs-keyword">catch</span>(<span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {  
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(err);  
  process.<span class="hljs-title function_">exit</span>(<span class="hljs-number">1</span>);  
});  

</code></pre>
<p>æœ€åï¼Œä½ å¯ä»¥å°†å®¢æˆ·ç«¯æŒ‡å‘ä½ çš„ MCP æœåŠ¡å™¨ã€‚ä¾‹å¦‚ï¼ŒClaude Desktop æœŸæœ›ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>  
  <span class="hljs-attr">"auth"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>  
    <span class="hljs-attr">"issuer"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"http://localhost:4000"</span>  
  <span class="hljs-punctuation">}</span>  
<span class="hljs-punctuation">}</span>  

</code></pre>
<p>å®é™…çš„é…ç½®å½¢å¼å–å†³äºå®¢æˆ·ç«¯ï¼Œä½†æ¨¡å¼æ˜¯ï¼š</p>
<ul>
<li>Issuer = æ­¤æœåŠ¡å™¨çš„ BASE_URL</li>
<li>MCP endpoint = ä½ çš„é›†æˆæœåŠ¡å™¨æš´éœ²çš„ä»»ä½• MCP è·¯ç”±ï¼ˆç”± handleMcpRequest è¿æ¥çš„é‚£ä¸ªï¼‰</li>
</ul>
<p>é…ç½®å®Œæˆåï¼š</p>
<ul>
<li>å®¢æˆ·ç«¯è®¿é—®ä½ çš„æœåŠ¡å™¨ä¸Šçš„ <code>/.well-known/openid-configuration</code>ã€‚</li>
<li>å®ƒå¯¹ä½ çš„æœåŠ¡å™¨æ‰§è¡Œ <code>/.authorize</code> â†’ <code>/token</code> æµç¨‹ã€‚</li>
<li>ä½ çš„æœåŠ¡å™¨é€šè¿‡ OidcClient å°†ç™»å½•è”é‚¦åˆ°ä¸Šæ¸¸ IdPã€‚</li>
<li>ä½ çš„æœåŠ¡å™¨é¢å‘ MCP ç‰¹å®šä»¤ç‰Œå¹¶éªŒè¯ <code>/mcp</code> è¯·æ±‚ã€‚</li>
<li>ä½ çš„å¤„ç†å™¨æ¥æ”¶å·²å¡«å…… <code>req.user</code> çš„å·²è®¤è¯è¯·æ±‚ã€‚</li>
</ul>
<p>å°±æ˜¯è¿™æ ·ã€‚ä½ çš„æœåŠ¡å™¨ç°åœ¨æ˜¯ä¸€ä¸ªé›†æˆçš„ OIDC issuerã€ä»¤ç‰Œç«¯ç‚¹å’Œ MCP ç«¯ç‚¹ã€‚</p>
<h3 data-id="heading-6">åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä½¿ç”¨ mcp-oidc-provider<a href="#using-the-mcp-oidc-provider-in-production" title="#using-the-mcp-oidc-provider-in-production">â€‹</a></h3>
<p>æˆ‘ä»¬å°†å…¶ç”¨äºæˆ‘ä»¬æ‰˜ç®¡çš„ MCP æœåŠ¡å™¨ï¼Œå¹¶ä¸”æˆ‘ä»¬è¶³å¤Ÿä¿¡ä»»å®ƒï¼Œå› æ­¤å°†å…¶æä¾›ç»™ä½ ã€‚å®ƒä½¿ç”¨æ ‡å‡†åº“è¿›è¡Œèº«ä»½éªŒè¯å’Œæˆæƒã€‚è€Œä¸”ï¼Œå®ƒä¸ä¼šå°†ä½ é”å®šåˆ°ä»»ä½•ä¾›åº”å•†ã€‚</p>
<p>æˆ‘ä»¬å·²å°½å¯èƒ½åœ°å°† mcp-oidc-provider æ³›åŒ–ï¼ŒåŒ…æ‹¬æ·»åŠ é¢å¤–çš„é…ç½®æ¥å¢å¼ºä½ çš„ IdP æ‰€æä¾›çš„åŠŸèƒ½ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å…è®¸ä½ é…ç½® JWKS ç¼“å­˜è®¾ç½®ï¼Œä»¥é˜²ä½ çš„ IdP ä¸æä¾› <code>Cache-Control: max-age</code> å¤´ã€‚å¦‚æœä½ çš„å…¬å¸å¯¹å¯†é’¥è½®æ¢äº‹ä»¶æœ‰å®‰å…¨è¦æ±‚ï¼Œéœ€è¦å¯†é’¥åœ¨ä¸€å®šæ—¶é—´åè¿‡æœŸï¼Œè¿™å°†å¾ˆæœ‰å¸®åŠ©ã€‚</p>
<p>å¦‚æœä½ æ­£åœ¨ä½¿ç”¨ <code>jose.createRemoteJWKSet</code>ï¼Œä½ é€šå¸¸é€šè¿‡åœ¨åˆ›å»º JWKS fetcher æ—¶ä¼ é€’é€‰é¡¹æ¥æ§åˆ¶è¿‡æœŸï¼š</p>
<pre><code class="hljs language-ini" lang="ini">import { createRemoteJWKSet } from "jose"<span class="hljs-comment">;  </span>
  
const <span class="hljs-attr">jwksUri</span> = new URL(<span class="hljs-string">"https://your-issuer/.well-known/jwks.json"</span>)<span class="hljs-comment">;  </span>
  
const <span class="hljs-attr">jwks</span> = createRemoteJWKSet(jwksUri, {  
    
  cooldownDuration: 30_000,  
    
  cacheMaxAge: 600_000,  
})<span class="hljs-comment">;  </span>

</code></pre>
<p>å¦‚æœä½ éœ€è¦ä»»ä½•å…¶ä»–å®šåˆ¶ï¼Œè¯·è”ç³»æˆ‘ä»¬ï¼æˆ‘ä»¬éå¸¸ä¹æ„è®© mcp-oidc-provider é€‚é…ä½ çš„ MCP æœåŠ¡å™¨ã€‚</p>
<h2 data-id="heading-7">å°è¯• mcp-oidc-provider</h2>
<p>å‡†å¤‡å¥½æ„å»ºä¸€ä¸ªå®‰å…¨çš„ MCP æœåŠ¡å™¨äº†å—ï¼Ÿç«‹å³å¼€å§‹ä½¿ç”¨ mcp-oidc-providerï¼Œå¹¶ä½¿ç”¨ä½ æƒ³è¦çš„ä»»ä½•å…¼å®¹ OIDC çš„ IdPã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Vue3åŠ¨æ€æ ·å¼ç®¡ç†ï¼šå¦‚ä½•æ··åˆclass/styleç»‘å®šã€ç©¿é€scopedå¹¶ä¼˜åŒ–æ€§èƒ½ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7584760031835537442</link>    <guid>https://juejin.cn/post/7584760031835537442</guid>    <pubDate>2025-12-18T05:36:56.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7584760031835537442" data-draft-id="7584780417103216680" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Vue3åŠ¨æ€æ ·å¼ç®¡ç†ï¼šå¦‚ä½•æ··åˆclass/styleç»‘å®šã€ç©¿é€scopedå¹¶ä¼˜åŒ–æ€§èƒ½ï¼Ÿ    "/> <meta itemprop="keywords" content="å‰ç«¯,Trae,AIç¼–ç¨‹"/> <meta itemprop="datePublished" content="2025-12-18T05:36:56.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="kknone"/> <meta itemprop="url" content="https://juejin.cn/user/1366025597879930"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Vue3åŠ¨æ€æ ·å¼ç®¡ç†ï¼šå¦‚ä½•æ··åˆclass/styleç»‘å®šã€ç©¿é€scopedå¹¶ä¼˜åŒ–æ€§èƒ½ï¼Ÿ    
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1366025597879930/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    kknone
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-18T05:36:56.000Z" title="Thu Dec 18 2025 05:36:56 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-18
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»16åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">ä¸€ã€classä¸styleç»‘å®šçš„æ··åˆä½¿ç”¨è§„åˆ™</h3>
<p>åœ¨Vue 3ä¸­ï¼Œ<code>class</code>å’Œ<code>style</code>ç»‘å®šæ˜¯æˆ‘ä»¬æ§åˆ¶å…ƒç´ æ ·å¼çš„æ ¸å¿ƒæ‰‹æ®µã€‚å®ƒä»¬ä¸ä»…èƒ½å•ç‹¬ä½¿ç”¨ï¼Œè¿˜èƒ½<strong>æ··åˆæ­é…</strong>æ»¡è¶³å¤æ‚åœºæ™¯éœ€æ±‚ã€‚æˆ‘ä»¬å…ˆå›é¡¾åŸºç¡€è¯­æ³•ï¼Œå†çœ‹æ··åˆä½¿ç”¨çš„è§„åˆ™ã€‚</p>
<h4 data-id="heading-1">1.1 åŸºç¡€è¯­æ³•å¿«é€Ÿå›é¡¾</h4>
<ul>
<li><strong>classç»‘å®š</strong>ï¼šæ”¯æŒ<strong>å¯¹è±¡è¯­æ³•</strong>ï¼ˆæ ¹æ®æ¡ä»¶åˆ‡æ¢ç±»åï¼‰å’Œ<strong>æ•°ç»„è¯­æ³•</strong>ï¼ˆç»„åˆå¤šä¸ªç±»åï¼‰ã€‚
<pre><code class="hljs language-vue" lang="vue">&lt;!-- å¯¹è±¡è¯­æ³•ï¼šisActiveä¸ºtrueæ—¶æ·»åŠ activeç±» --&gt;
&lt;div :class="{ active: isActive }"&gt;&lt;/div&gt;
&lt;!-- æ•°ç»„è¯­æ³•ï¼šç»„åˆé™æ€å’ŒåŠ¨æ€ç±»å --&gt;
&lt;div :class="['static-class', { active: isActive }]"&gt;&lt;/div&gt;
</code></pre>
</li>
<li><strong>styleç»‘å®š</strong>ï¼šåŒæ ·æ”¯æŒå¯¹è±¡/æ•°ç»„è¯­æ³•ï¼Œå¸¸ç”¨äºåŠ¨æ€è®¾ç½®å†…è”æ ·å¼ã€‚
<pre><code class="hljs language-vue" lang="vue">&lt;!-- å¯¹è±¡è¯­æ³•ï¼šåŠ¨æ€è®¾ç½®é¢œè‰²å’Œå­—ä½“å¤§å° --&gt;
&lt;div :style="{ color: textColor, fontSize: '16px' }"&gt;&lt;/div&gt;
&lt;!-- æ•°ç»„è¯­æ³•ï¼šç»„åˆå¤šä¸ªæ ·å¼å¯¹è±¡ --&gt;
&lt;div :style="[baseStyle, dynamicStyle]"&gt;&lt;/div&gt;
</code></pre>
</li>
</ul>
<h4 data-id="heading-2">1.2 æ··åˆä½¿ç”¨çš„å¸¸è§åœºæ™¯</h4>
<p>å®é™…å¼€å‘ä¸­ï¼Œæˆ‘ä»¬å¸¸éœ€è¦<strong>é™æ€ç±»å+åŠ¨æ€ç±»å+åŠ¨æ€å†…è”æ ·å¼</strong>çš„ç»„åˆã€‚æ¯”å¦‚ä¸€ä¸ªâ€œå¯åˆ‡æ¢çŠ¶æ€çš„æŒ‰é’®â€ï¼š</p>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;button 
    class="btn"  &lt;!-- é™æ€ç±»å --&gt;
    :class="{ 'btn--active': isActive }"  &lt;!-- åŠ¨æ€ç±»å --&gt;
    :style="{ backgroundColor: btnColor }"  &lt;!-- åŠ¨æ€å†…è”æ ·å¼ --&gt;
    @click="isActive = !isActive"
  &gt;
    {{ isActive ? "æ¿€æ´»çŠ¶æ€" : "é»˜è®¤çŠ¶æ€" }}
  &lt;/button&gt;
&lt;/template&gt;

&lt;script setup&gt;
import { ref } from 'vue'
const isActive = ref(false)
const btnColor = ref('#409EFF')  // åˆå§‹è“è‰²
&lt;/script&gt;

&lt;style scoped&gt;
.btn {
  padding: 8px 16px;
  border: none;
  border-radius: 4px;
  color: white;
  cursor: pointer;
}
.btn--active {
  box-shadow: 0 0 8px rgba(64, 158, 255, 0.5);  /* æ¿€æ´»æ—¶çš„é˜´å½± */
}
&lt;/style&gt;
</code></pre>
<p>è¿™ä¸ªä¾‹å­ä¸­ï¼š</p>
<ul>
<li><code>class="btn"</code>æ˜¯<strong>é™æ€ç±»å</strong>ï¼Œè´Ÿè´£æŒ‰é’®çš„åŸºç¡€æ ·å¼ï¼›</li>
<li><code>:class="{ 'btn--active': isActive }"</code>æ˜¯<strong>åŠ¨æ€ç±»å</strong>ï¼Œæ ¹æ®<code>isActive</code>åˆ‡æ¢æ¿€æ´»çŠ¶æ€ï¼›</li>
<li><code>:style="{ backgroundColor: btnColor }"</code>æ˜¯<strong>åŠ¨æ€å†…è”æ ·å¼</strong>ï¼Œå¯ä»¥çµæ´»ä¿®æ”¹æŒ‰é’®èƒŒæ™¯è‰²ï¼ˆæ¯”å¦‚ä»æ¥å£è·å–ä¸»é¢˜è‰²ï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-3">äºŒã€åŠ¨æ€æ ·å¼ä¸ç»„ä»¶props/emitçš„ç»“åˆ</h3>
<p>ç»„ä»¶åŒ–å¼€å‘ä¸­ï¼Œæˆ‘ä»¬å¸¸éœ€è¦<strong>çˆ¶ç»„ä»¶ä¼ é€’æ ·å¼å‚æ•°ç»™å­ç»„ä»¶</strong>ï¼Œæˆ–<strong>å­ç»„ä»¶è§¦å‘äº‹ä»¶ä¿®æ”¹çˆ¶ç»„ä»¶çš„æ ·å¼çŠ¶æ€</strong>ã€‚è¿™éƒ¨åˆ†çš„æ ¸å¿ƒæ˜¯<code>props</code>ï¼ˆçˆ¶ä¼ å­ï¼‰å’Œ<code>emit</code>ï¼ˆå­ä¼ çˆ¶ï¼‰çš„é…åˆã€‚</p>
<h4 data-id="heading-4">2.1 ç”¨propsä¼ é€’åŠ¨æ€æ ·å¼</h4>
<p>æ¯”å¦‚æˆ‘ä»¬å†™ä¸€ä¸ª<strong>å¯å®šåˆ¶çš„Alertç»„ä»¶</strong>ï¼Œçˆ¶ç»„ä»¶å¯ä»¥ä¼ é€’<code>type</code>ï¼ˆæˆåŠŸ/é”™è¯¯ï¼‰æ¥æ§åˆ¶æ ·å¼ï¼š</p>
<pre><code class="hljs language-vue" lang="vue">&lt;!-- çˆ¶ç»„ä»¶ Parent.vue --&gt;
&lt;template&gt;
  &lt;Alert 
    type="success" 
    message="æ“ä½œæˆåŠŸï¼" 
    :show="isShow" 
    @close="isShow = false"
  /&gt;
  &lt;button @click="isShow = true"&gt;æ˜¾ç¤ºæˆåŠŸæç¤º&lt;/button&gt;
&lt;/template&gt;

&lt;script setup&gt;
import { ref } from 'vue'
import Alert from './Alert.vue'
const isShow = ref(true)
&lt;/script&gt;
</code></pre>
<pre><code class="hljs language-vue" lang="vue">&lt;!-- å­ç»„ä»¶ Alert.vue --&gt;
&lt;template&gt;
  &lt;div 
    class="alert"
    :class="`alert--${type}`"  &lt;!-- åŠ¨æ€ç±»åï¼šæ ¹æ®typeåˆ‡æ¢æ ·å¼ --&gt;
    v-if="show"
  &gt;
    {{ message }}
    &lt;button class="alert__close" @click="$emit('close')"&gt;Ã—&lt;/button&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script setup&gt;
// æ¥æ”¶çˆ¶ç»„ä»¶ä¼ é€’çš„props
defineProps({
  type: {
    type: String,
    default: 'info'  // é»˜è®¤infoç±»å‹
  },
  message: String,
  show: Boolean
})
// å£°æ˜è¦è§¦å‘çš„äº‹ä»¶ï¼ˆå‘Šè¯‰çˆ¶ç»„ä»¶â€œæˆ‘è¦å…³é—­äº†â€ï¼‰
defineEmits(['close'])
&lt;/script&gt;

&lt;style scoped&gt;
.alert {
  padding: 12px;
  border-radius: 4px;
  margin: 16px 0;
  position: relative;
}
/* ä¸åŒtypeå¯¹åº”çš„æ ·å¼ */
.alert--success { background-color: #d4edda; color: #155724; }
.alert--error { background-color: #f8d7da; color: #721c24; }
.alert--info { background-color: #e3f2fd; color: #004085; }
.alert__close {
  position: absolute;
  top: 8px;
  right: 8px;
  border: none;
  background: transparent;
  cursor: pointer;
  font-size: 18px;
}
&lt;/style&gt;
</code></pre>
<p><strong>å…³é”®é€»è¾‘</strong>ï¼š</p>
<ol>
<li>çˆ¶ç»„ä»¶é€šè¿‡<code>type="success"</code>å°†â€œæˆåŠŸâ€ç±»å‹ä¼ é€’ç»™å­ç»„ä»¶ï¼›</li>
<li>å­ç»„ä»¶ç”¨<code>:class="</code>alert--${type}<code>"</code>ç”ŸæˆåŠ¨æ€ç±»å<code>alert--success</code>ï¼›</li>
<li>å­ç»„ä»¶é€šè¿‡<code>$emit('close')</code>è§¦å‘å…³é—­äº‹ä»¶ï¼Œçˆ¶ç»„ä»¶æ¥æ”¶åä¿®æ”¹<code>isShow</code>éšè—Alertã€‚</li>
</ol>
<h4 data-id="heading-5">2.2 ç”¨emitåŒæ­¥æ ·å¼çŠ¶æ€</h4>
<p>æ¯”å¦‚ä¸€ä¸ª<strong>å¯æŠ˜å çš„é¢æ¿ç»„ä»¶</strong>ï¼Œç‚¹å‡»æ ‡é¢˜åˆ‡æ¢å±•å¼€/æŠ˜å çŠ¶æ€ï¼ŒåŒæ—¶ä¿®æ”¹ç®­å¤´çš„æ—‹è½¬æ ·å¼ï¼š</p>
<pre><code class="hljs language-vue" lang="vue">&lt;!-- Collapse.vue --&gt;
&lt;template&gt;
  &lt;div class="collapse"&gt;
    &lt;div class="collapse__header" @click="toggle"&gt;
      {{ title }}
      &lt;span class="collapse__arrow" :class="{ 'rotate': isOpen }"&gt;â†“&lt;/span&gt;
    &lt;/div&gt;
    &lt;div class="collapse__content" v-if="isOpen"&gt;
      {{ content }}
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script setup&gt;
import { ref } from 'vue'
const props = defineProps(['title', 'content'])
const isOpen = ref(false)
const emit = defineEmits(['toggle'])  // å£°æ˜è§¦å‘çš„äº‹ä»¶

const toggle = () =&gt; {
  isOpen.value = !isOpen.value
  emit('toggle', isOpen.value)  // ä¼ é€’å½“å‰çŠ¶æ€ç»™çˆ¶ç»„ä»¶
}
&lt;/script&gt;

&lt;style scoped&gt;
.collapse__header {
  padding: 12px;
  background-color: #f5f5f5;
  cursor: pointer;
  display: flex;
  justify-content: space-between;
  align-items: center;
}
.collapse__arrow {
  transition: transform 0.3s ease;  // è¿‡æ¸¡åŠ¨ç”»
}
.rotate {
  transform: rotate(180deg);  // å±•å¼€æ—¶æ—‹è½¬ç®­å¤´
}
.collapse__content {
  padding: 12px;
  border: 1px solid #f5f5f5;
  border-top: none;
}
&lt;/style&gt;
</code></pre>
<p>çˆ¶ç»„ä»¶ä½¿ç”¨æ—¶ï¼Œå¯ä»¥ç›‘å¬<code>toggle</code>äº‹ä»¶è·å–å±•å¼€çŠ¶æ€ï¼Œç”šè‡³ä¿®æ”¹å…¶ä»–ç»„ä»¶çš„æ ·å¼ï¼š</p>
<pre><code class="hljs language-vue" lang="vue">&lt;!-- çˆ¶ç»„ä»¶ --&gt;
&lt;template&gt;
  &lt;Collapse 
    title="é¢æ¿1" 
    content="é¢æ¿å†…å®¹..." 
    @toggle="handleToggle"
  /&gt;
  &lt;div :style="{ margin: isOpen ? '20px 0' : '0' }"&gt;
    é¢æ¿ä¸‹æ–¹çš„å†…å®¹
  &lt;/div&gt;
&lt;/template&gt;

&lt;script setup&gt;
import { ref } from 'vue'
import Collapse from './Collapse.vue'
const isOpen = ref(false)
const handleToggle = (status) =&gt; {
  isOpen.value = status  // åŒæ­¥å±•å¼€çŠ¶æ€
}
&lt;/script&gt;
</code></pre>
<h3 data-id="heading-6">ä¸‰ã€ä½œç”¨åŸŸæ ·å¼ï¼ˆscopedï¼‰å¯¹åŠ¨æ€ç±»åçš„å½±å“</h3>
<p>åœ¨Vueå•æ–‡ä»¶ç»„ä»¶ï¼ˆSFCï¼‰ä¸­ï¼Œ<code>style scoped</code>ä¼šç»™ç»„ä»¶çš„æ‰€æœ‰å…ƒç´ æ·»åŠ ä¸€ä¸ª<strong>å”¯ä¸€çš„å±æ€§</strong>ï¼ˆæ¯”å¦‚<code>data-v-123</code>ï¼‰ï¼Œç¡®ä¿æ ·å¼åªä½œç”¨äºå½“å‰ç»„ä»¶ï¼Œé¿å…æ ·å¼æ±¡æŸ“ã€‚ä½†åŠ¨æ€ç±»åä¼šä¸ä¼šå—å½±å“ï¼Ÿ</p>
<h4 data-id="heading-7">3.1 scopedçš„å·¥ä½œåŸç†</h4>
<p>æ¯”å¦‚å­ç»„ä»¶çš„<code>style scoped</code>ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* å­ç»„ä»¶çš„scopedæ ·å¼ */</span>
<span class="hljs-selector-class">.child</span> {
  <span class="hljs-attribute">color</span>: red;
}
</code></pre>
<p>ç¼–è¯‘åä¼šå˜æˆï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.child</span><span class="hljs-selector-attr">[data-v-123]</span> {
  <span class="hljs-attribute">color</span>: red;
}
</code></pre>
<p>è€Œå­ç»„ä»¶çš„å…ƒç´ ä¼šè¢«æ·»åŠ <code>data-v-123</code>å±æ€§ï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"child"</span> <span class="hljs-attr">data-v-123</span>&gt;</span>å­ç»„ä»¶å†…å®¹<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre>
<h4 data-id="heading-8">3.2 åŠ¨æ€ç±»åä¸scopedçš„å…¼å®¹é—®é¢˜</h4>
<p>åŠ¨æ€ç±»åï¼ˆæ¯”å¦‚<code>:class="{ active: isActive }"</code>ï¼‰æ˜¯åœ¨ç»„ä»¶å†…éƒ¨ç”Ÿæˆçš„ï¼Œæ‰€ä»¥scopedä¼šè‡ªåŠ¨ç»™åŠ¨æ€ç±»åæ·»åŠ å±æ€§é€‰æ‹©å™¨ã€‚ä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-vue" lang="vue">&lt;!-- å­ç»„ä»¶ --&gt;
&lt;template&gt;
  &lt;div :class="{ 'active': isActive }" class="child"&gt;...&lt;/div&gt;
&lt;/template&gt;

&lt;style scoped&gt;
.child { /* ç¼–è¯‘åå¸¦data-v-123 */ }
.active { /* ç¼–è¯‘åå˜æˆ.active[data-v-123] */ }
&lt;/style&gt;
</code></pre>
<p>è¿™ç§æƒ…å†µä¸‹ï¼ŒåŠ¨æ€ç±»å<code>active</code>ä¼šæ­£å¸¸ç”Ÿæ•ˆï¼Œå› ä¸ºå®ƒå’Œ<code>child</code>ç±»ä¸€æ ·ï¼Œéƒ½å¸¦æœ‰<code>data-v-123</code>å±æ€§ã€‚</p>
<h4 data-id="heading-9">3.3 çˆ¶ç»„ä»¶å¦‚ä½•ä¿®æ”¹å­ç»„ä»¶çš„åŠ¨æ€ç±»åï¼Ÿ</h4>
<p>å¦‚æœçˆ¶ç»„ä»¶æƒ³ä¿®æ”¹å­ç»„ä»¶çš„åŠ¨æ€ç±»åï¼ˆæ¯”å¦‚<code>active</code>ï¼‰ï¼Œç›´æ¥å†™æ ·å¼æ˜¯æ— æ•ˆçš„ï¼Œå› ä¸ºçˆ¶ç»„ä»¶çš„æ ·å¼æ²¡æœ‰å­ç»„ä»¶çš„<code>data-v-123</code>å±æ€§ã€‚è¿™æ—¶å€™éœ€è¦ç”¨<strong>æ·±åº¦é€‰æ‹©å™¨</strong><code>::v-deep</code>ï¼ˆæˆ–<code>/deep/</code>ã€<code>&gt;&gt;&gt;</code>ï¼Œä½†Vue3æ¨è<code>::v-deep</code>ï¼‰ã€‚</p>
<p>æ¯”å¦‚çˆ¶ç»„ä»¶æƒ³ä¿®æ”¹å­ç»„ä»¶çš„<code>active</code>ç±»ï¼š</p>
<pre><code class="hljs language-vue" lang="vue">&lt;!-- çˆ¶ç»„ä»¶çš„æ ·å¼ --&gt;
&lt;style scoped&gt;
/* æ— æ•ˆï¼šçˆ¶ç»„ä»¶çš„æ ·å¼æ²¡æœ‰å­ç»„ä»¶çš„data-v-123 */
.child .active {
  background-color: yellow;
}

/* æœ‰æ•ˆï¼šç”¨::v-deepç©¿é€scoped */
::v-deep .child .active {
  background-color: yellow;
}
&lt;/style&gt;
</code></pre>
<details>
<summary>å¾€æœŸæ–‡ç« å½’æ¡£</summary>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F1bab953e41f66ac53de099fa9fe76483%2F" target="_blank" title="https://blog.cmdragon.cn/posts/1bab953e41f66ac53de099fa9fe76483/" ref="nofollow noopener noreferrer">Vue3ä¸­åŠ¨æ€æ ·å¼æ•°ç»„çš„åé¡¹è¦†ç›–è§„åˆ™å¦‚ä½•ä¸è®¡ç®—å±æ€§ç»“åˆå®ç°å¤æ‚çŠ¶æ€æ ·å¼ç®¡ç†ï¼Ÿ</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fc85e1fe16a7ae45e965b4e2df4d9d2f4%2F" target="_blank" title="https://blog.cmdragon.cn/posts/c85e1fe16a7ae45e965b4e2df4d9d2f4/" ref="nofollow noopener noreferrer">Vueæµ…å“åº”å¼å¦‚ä½•è§£å†³æ·±å±‚å“åº”å¼çš„æ€§èƒ½é—®é¢˜ï¼Ÿé€‚ç”¨åœºæ™¯æœ‰å“ªäº›ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fbe04b02d2723994632de0d4ca22a3391%2F" target="_blank" title="https://blog.cmdragon.cn/posts/be04b02d2723994632de0d4ca22a3391/" ref="nofollow noopener noreferrer">Vue 3ç»„åˆå¼APIä¸­refä¸reactiveçš„æ ¸å¿ƒå“åº”å¼å·®å¼‚åŠä½¿ç”¨æœ€ä½³å®è·µæ˜¯ä»€ä¹ˆï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fbe04b02d2723994632de0d4ca22a3391%2F" target="_blank" title="https://blog.cmdragon.cn/posts/be04b02d2723994632de0d4ca22a3391/" ref="nofollow noopener noreferrer">Vue 3ç»„åˆå¼APIä¸­refä¸reactiveçš„æ ¸å¿ƒå“åº”å¼å·®å¼‚åŠä½¿ç”¨æœ€ä½³å®è·µæ˜¯ä»€ä¹ˆï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fa0af08dd60a37b9a890a9957f2cbfc9f%2F" target="_blank" title="https://blog.cmdragon.cn/posts/a0af08dd60a37b9a890a9957f2cbfc9f/" ref="nofollow noopener noreferrer">Vue3å“åº”å¼ç³»ç»Ÿä¸­ï¼Œå¯¹è±¡æ–°å¢å±æ€§ã€æ•°ç»„æ”¹ç´¢å¼•ã€åŸå§‹å€¼ä»£ç†çš„é—®é¢˜å¦‚ä½•è§£å†³ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fbc287e1e36287afd90750fd907eca85e%2F" target="_blank" title="https://blog.cmdragon.cn/posts/bc287e1e36287afd90750fd907eca85e/" ref="nofollow noopener noreferrer">Vue 3ä¸­watchä¾¦å¬å™¨çš„æ­£ç¡®ä½¿ç”¨å§¿åŠ¿ä½ æŒæ¡äº†å—ï¼Ÿæ·±åº¦ç›‘å¬ã€ä¸watchEffectçš„å·®å¼‚åŠå¸¸è§æŠ¥é”™è§£æ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F654b9447ef1ba7ec1126a1bc26a4726d%2F" target="_blank" title="https://blog.cmdragon.cn/posts/654b9447ef1ba7ec1126a1bc26a4726d/" ref="nofollow noopener noreferrer">Vueå“åº”å¼å£°æ˜çš„APIå·®å¼‚ã€åº•å±‚åŸç†ä¸å¸¸è§é™·é˜±ä½ éƒ½ææ‡‚äº†å— - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F654b9447ef1ba7ec1126a1bc26a4726d%2F" target="_blank" title="https://blog.cmdragon.cn/posts/654b9447ef1ba7ec1126a1bc26a4726d/" ref="nofollow noopener noreferrer">Vueå“åº”å¼å£°æ˜çš„APIå·®å¼‚ã€åº•å±‚åŸç†ä¸å¸¸è§é™·é˜±ä½ éƒ½ææ‡‚äº†å— - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fc405a8d9950af5b7c63b56c348ac36b6%2F" target="_blank" title="https://blog.cmdragon.cn/posts/c405a8d9950af5b7c63b56c348ac36b6/" ref="nofollow noopener noreferrer">ä¸ºä»€ä¹ˆVue 3éœ€è¦refå‡½æ•°ï¼Ÿå®ƒçš„å“åº”å¼åŸç†ä¸æ­£ç¡®ç”¨æ³•æ˜¯ä»€ä¹ˆï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fa7e9abb9691a81e4404d9facabe0f7c3%2F" target="_blank" title="https://blog.cmdragon.cn/posts/a7e9abb9691a81e4404d9facabe0f7c3/" ref="nofollow noopener noreferrer">Vue 3ä¸­reactiveå‡½æ•°å¦‚ä½•é€šè¿‡Proxyå®ç°å“åº”å¼ï¼Ÿä½¿ç”¨æ—¶è¦é¿å¼€å“ªäº›è¯¯åŒºï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fbd995ea45161727597fb85b62566c43d%2F" target="_blank" title="https://blog.cmdragon.cn/posts/bd995ea45161727597fb85b62566c43d/" ref="nofollow noopener noreferrer">Vue3å“åº”å¼ç³»ç»Ÿçš„åº•å±‚åŸç†ä¸å®è·µè¦ç‚¹ä½ çœŸçš„æ‡‚å—ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F53e3f270a80675df662c6857a3332c0f%2F" target="_blank" title="https://blog.cmdragon.cn/posts/53e3f270a80675df662c6857a3332c0f/" ref="nofollow noopener noreferrer">Vue 3æ¨¡æ¿å¦‚ä½•é€šè¿‡ç¼–è¯‘ä¸‰é˜¶æ®µå®ç°ä»å£°æ˜å¼è¯­æ³•åˆ°é«˜æ•ˆæ¸²æŸ“çš„è·¨è¶Š - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fddbce4f2a23aa72c96b1c0473900321e%2F" target="_blank" title="https://blog.cmdragon.cn/posts/ddbce4f2a23aa72c96b1c0473900321e/" ref="nofollow noopener noreferrer">å¿«é€Ÿå…¥é—¨Vueæ¨¡æ¿å¼•ç”¨ï¼šä»æ”¶DOMâ€œå¿«é€’â€åˆ°è°ƒå­ç»„ä»¶æ–¹æ³•ï¼Œä½ ç©æ˜ç™½äº†å—ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F23a2d5a334e15575277814c16e45df50%2F" target="_blank" title="https://blog.cmdragon.cn/posts/23a2d5a334e15575277814c16e45df50/" ref="nofollow noopener noreferrer">å¿«é€Ÿå…¥é—¨Vueæ¨¡æ¿é‡Œçš„JSè¡¨è¾¾å¼æœ‰å•¥ä¸èƒ½ç¢°ï¼Ÿè®¡ç®—å±æ€§ä¸ºå•¥æ¯”æ–¹æ³•æ›´èƒ½æ‰“ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F6be38de6382e31d282659b689c5b17f0%2F" target="_blank" title="https://blog.cmdragon.cn/posts/6be38de6382e31d282659b689c5b17f0/" ref="nofollow noopener noreferrer">å¿«é€Ÿå…¥é—¨Vueçš„v-modelè¡¨å•ç»‘å®šï¼šè¯­æ³•ç³–ã€åŠ¨æ€å€¼ã€ä¿®é¥°ç¬¦çš„å°æŠ€å·§ä½ éƒ½æŒæ¡äº†å—ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F60ce517684f4a418f453d66aa805606c%2F" target="_blank" title="https://blog.cmdragon.cn/posts/60ce517684f4a418f453d66aa805606c/" ref="nofollow noopener noreferrer">å¿«é€Ÿå…¥é—¨Vue3äº‹ä»¶å¤„ç†çš„æŒ‘æˆ˜é¢˜ï¼šv-onã€ä¿®é¥°ç¬¦ã€è‡ªå®šä¹‰äº‹ä»¶ä½ èƒ½é€šå…³å—ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fe4ae7d5e4a9205bb11b2baccb230c637%2F" target="_blank" title="https://blog.cmdragon.cn/posts/e4ae7d5e4a9205bb11b2baccb230c637/" ref="nofollow noopener noreferrer">å¿«é€Ÿå…¥é—¨Vue3çš„v-æŒ‡ä»¤ï¼šæ•°æ®å’ŒDOMçš„â€œç¿»è¯‘å®˜â€åˆ°åº•æœ‰å¤šå°‘æœ¬äº‹ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F999ce4fb32259ff4fbf4bf7bcb851654%2F" target="_blank" title="https://blog.cmdragon.cn/posts/999ce4fb32259ff4fbf4bf7bcb851654/" ref="nofollow noopener noreferrer">å¿«é€Ÿå…¥é—¨Vue3ï¼Œæ’å€¼ã€åŠ¨æ€ç»‘å®šå’Œé¿å‘æŠ€å·§ä½ éƒ½ææ‡‚äº†å—ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fa6997d81b49cd232b87e1cf603888ad1%2F" target="_blank" title="https://blog.cmdragon.cn/posts/a6997d81b49cd232b87e1cf603888ad1/" ref="nofollow noopener noreferrer">æƒ³è®©PostgreSQLå¿«åˆ°é£èµ·ï¼Ÿå…ˆæ‰¾å¥åº·å¯†ç è¿˜æ˜¯å…ˆæ¢å¼•æ“ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F1fee7afbb9abd4540b8aa9c141d6845d%2F" target="_blank" title="https://blog.cmdragon.cn/posts/1fee7afbb9abd4540b8aa9c141d6845d/" ref="nofollow noopener noreferrer">æƒ³è®©PostgreSQLæŸ¥è¯¢å¿«åˆ°é£èµ·ï¼Ÿåˆ†åŒºè¡¨ã€ç‰©åŒ–è§†å›¾ã€å¹¶è¡ŒæŸ¥è¯¢è¿™ä¸‰æ‹›çµä¸çµï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F79c590fbd87ece535b11a71c9667884f%2F" target="_blank" title="https://blog.cmdragon.cn/posts/79c590fbd87ece535b11a71c9667884f/" ref="nofollow noopener noreferrer">å­æŸ¥è¯¢æ€»æ‹–æ…¢æŸ¥è¯¢ï¼ŸæŠŠå®ƒå˜æˆè¿æ¥å°±èƒ½è§£å†³ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F748cdac2536008199abf8a8a2cd0ec85%2F" target="_blank" title="https://blog.cmdragon.cn/posts/748cdac2536008199abf8a8a2cd0ec85/" ref="nofollow noopener noreferrer">PostgreSQLå…¨è¡¨æ‰«ææ…¢åˆ°å´©æºƒï¼Ÿå»ºç´¢å¼•+æ”¹æŸ¥è¯¢+æ›´ç»Ÿè®¡ä¿¡æ¯ä¸‰æ‹›èƒ½ç ´ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F32ca943703226d317d4276a8fb53b0dd%2F" target="_blank" title="https://blog.cmdragon.cn/posts/32ca943703226d317d4276a8fb53b0dd/" ref="nofollow noopener noreferrer">å¤æ‚æŸ¥è¯¢æ€»æ‹–åè…¿ï¼ŸPostgreSQLå¤šåˆ—ç´¢å¼•+è¦†ç›–ç´¢å¼•çš„ç¥ä»™æŠ€å·§ä½ getæ²¡ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fca93f1d53aa910e7ba5ffd8df611c12b%2F" target="_blank" title="https://blog.cmdragon.cn/posts/ca93f1d53aa910e7ba5ffd8df611c12b/" ref="nofollow noopener noreferrer">åªç»™è¡¨å­é›†å»ºç´¢å¼•ï¼Ÿç”¨å‡½æ•°ç»“æœå»ºç´¢å¼•ï¼ŸPostgreSQLè¿™ä¿©æ“ä½œå‡­å•¥èƒ½çœç©ºé—´åˆåŠ é€Ÿï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Ff507856ebfddd592448813c510a53669%2F" target="_blank" title="https://blog.cmdragon.cn/posts/f507856ebfddd592448813c510a53669/" ref="nofollow noopener noreferrer">B-treeç´¢å¼•åƒå­—å…¸æŸ¥è¯ä¸€æ ·å·¥ä½œï¼Ÿé‚£å“ªäº›æ•°æ®åº“æŸ¥è¯¢å®ƒèƒ½åŠ é€Ÿï¼Œå“ªäº›ä¸èƒ½ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fb2213bfcb5b88a862f2138404c03d596%2F" target="_blank" title="https://blog.cmdragon.cn/posts/b2213bfcb5b88a862f2138404c03d596/" ref="nofollow noopener noreferrer">æƒ³æŠ“PostgreSQLé‡Œçš„æ…¢SQLï¼Ÿpg_stat_statementsåŸºç¡€é»‘åŒ£å­å’Œpg_stat_monitoræ—¶é—´çª—ï¼Œè°èƒ½å¸®ä½ æ›´å‡†æªå‡ºæ€§èƒ½å°å·ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F26614eb7da6c476dde41d367ad888d2f%2F" target="_blank" title="https://blog.cmdragon.cn/posts/26614eb7da6c476dde41d367ad888d2f/" ref="nofollow noopener noreferrer">PostgreSQLçš„â€œæ—¶å…‰æœºâ€MVCCå’Œé”æœºåˆ¶æ˜¯æ€ä¹ˆæå®šé«˜å¹¶å‘çš„ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F69f99bc6972a860d559c74aad7280da4%2F" target="_blank" title="https://blog.cmdragon.cn/posts/69f99bc6972a860d559c74aad7280da4/" ref="nofollow noopener noreferrer">PostgreSQLæ€§èƒ½æš´æ¶¨çš„å…³é”®ï¼Ÿå†…å­˜IOå¹¶å‘å‚æ•°å±…ç„¶è¦è¿™ä¹ˆè®¾ç½®ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F7b7053f392147a8b3b1a16bebeb08d0a%2F" target="_blank" title="https://blog.cmdragon.cn/posts/7b7053f392147a8b3b1a16bebeb08d0a/" ref="nofollow noopener noreferrer">å¤§è¡¨æŸ¥è¯¢æ…¢åˆ°ç¿»éæ•´ä¸ªä¹¦æ¶ï¼ŸPostgreSQLåˆ†åŒºè¡¨æ•™ä½ æ€ä¹ˆâ€œåˆ†ç±»â€æ‰é«˜æ•ˆ</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fc856e3cb073822349f3bf2d29995dcfc%2F" target="_blank" title="https://blog.cmdragon.cn/posts/c856e3cb073822349f3bf2d29995dcfc/" ref="nofollow noopener noreferrer">PostgreSQL æŸ¥è¯¢æ…¢ï¼Ÿæ˜¯ä¸æ˜¯å¿˜äº†ä¼˜åŒ– GROUP BYã€ORDER BY å’Œçª—å£å‡½æ•°ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fc096347d18e67b7431faacd2c4757093%2F" target="_blank" title="https://blog.cmdragon.cn/posts/c096347d18e67b7431faacd2c4757093/" ref="nofollow noopener noreferrer">PostgreSQLé‡Œçš„å­æŸ¥è¯¢å’ŒCTEå±…ç„¶åœ¨æ€§èƒ½ä¸Šâ€œææ¶â€ï¼Ÿåˆ°åº•è¯¥ç«™å“ªè¾¹ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F2eca89463454fd4250d7b66243b9fe5a%2F" target="_blank" title="https://blog.cmdragon.cn/posts/2eca89463454fd4250d7b66243b9fe5a/" ref="nofollow noopener noreferrer">PostgreSQLé€‰Joinç­–ç•¥æœ‰å•¥å°ä¹ä¹ï¼ŸNested Loop/Merge/Hashè°æ˜¯å®ƒçš„èœï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F068ecb772a87d7df20a8c9fb4b233f8e%2F" target="_blank" title="https://blog.cmdragon.cn/posts/068ecb772a87d7df20a8c9fb4b233f8e/" ref="nofollow noopener noreferrer">PostgreSQLæ–°æ‰‹SQLæ€»ç¿»è½¦ï¼Ÿè¿™7ä¸ªæ€§èƒ½é™·é˜±ä½ è¸©è¿‡æ²¡ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fd498f63cd0a2d5a77e445c688a8b88db%2F" target="_blank" title="https://blog.cmdragon.cn/posts/d498f63cd0a2d5a77e445c688a8b88db/" ref="nofollow noopener noreferrer">PostgreSQLç´¢å¼•é€‰B-Treeè¿˜æ˜¯GiSTï¼Ÿâ€œç‘å£«å†›åˆ€â€å’Œâ€œå¤šé¢æ‰‹â€çš„å·®åˆ«ä½ å±…ç„¶è¿˜ä¸çŸ¥é“ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F9101b75bdec6faea9b35d54f14e37f36%2F" target="_blank" title="https://blog.cmdragon.cn/posts/9101b75bdec6faea9b35d54f14e37f36/" ref="nofollow noopener noreferrer">æƒ³çŸ¥é“æ•°æ®åº“æ€ä¹ˆç»™æŸ¥è¯¢â€œç®—æˆæœ¬é€‰è·¯çº¿â€ï¼ŸEXPLAINèƒ½å¸®ä½ çœ‹æ˜ç™½ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fd527f8ebb6e3dae2c7dfe4c8d8979444%2F" target="_blank" title="https://blog.cmdragon.cn/posts/d527f8ebb6e3dae2c7dfe4c8d8979444/" ref="nofollow noopener noreferrer">PostgreSQLå¤„ç†SQLå±…ç„¶åƒåšè›‹ç³•ï¼Ÿè§£æåˆ°æ‰§è¡Œçš„4æ­¥é‡Œè—ç€å¤šå°‘æŸ¥è¯¢ä¼˜åŒ–çš„å°å¿ƒæœºï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F6bfdae84f313cf7ad0bb7045c4392347%2F" target="_blank" title="https://blog.cmdragon.cn/posts/6bfdae84f313cf7ad0bb7045c4392347/" ref="nofollow noopener noreferrer">PostgreSQLå¤‡ä»½ä¸æ˜¯å¤åˆ¶æ–‡ä»¶ï¼Ÿç‰©ç†vsé€»è¾‘å’‹é€‰ï¼Ÿè¯¯åˆ è¿˜èƒ½ç²¾å‡†æ¢å¤åˆ°1åˆ†é’Ÿå‰ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fde3672803de34dbad244d0a8d48b0eb5%2F" target="_blank" title="https://blog.cmdragon.cn/posts/de3672803de34dbad244d0a8d48b0eb5/" ref="nofollow noopener noreferrer">è½¬è´¦ä¸ç¿»è½¦ã€å¹¶å‘ä¸å¹²æ‰°ï¼ŒPostgreSQLçš„ACIDç‰¹æ€§åˆ°åº•æœ‰å•¥é­”æ³•ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fe463e8a2668abdf00a228c9b79324ded%2F" target="_blank" title="https://blog.cmdragon.cn/posts/e463e8a2668abdf00a228c9b79324ded/" ref="nofollow noopener noreferrer">é“¶è¡Œè½¬è´¦ä¸ç™½æ‰£é’±ã€ç”µå•†ä¸‹å•ä¸è¶…å–ï¼ŒPostgreSQLäº‹åŠ¡çš„è¯€çªæ˜¯å•¥ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F5c967e595058c4a1fc4474a68e64031d%2F" target="_blank" title="https://blog.cmdragon.cn/posts/5c967e595058c4a1fc4474a68e64031d/" ref="nofollow noopener noreferrer">PostgreSQLé‡Œçš„PL/pgSQLåˆ°åº•æ˜¯å•¥ï¼Ÿèƒ½è®©SQLä»â€œè¯´ç›®æ ‡â€å˜â€œè®²æ­¥éª¤â€ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F325047855e3e23b5ef82f7d2db134fbd%2F" target="_blank" title="https://blog.cmdragon.cn/posts/325047855e3e23b5ef82f7d2db134fbd/" ref="nofollow noopener noreferrer">PostgreSQLè§†å›¾ä¸å­˜æ•°æ®ï¼Ÿé‚£å®ƒæ€ä¹ˆç®€åŒ–æŸ¥è¯¢è¿˜èƒ½é€’å½’ç”Ÿæˆåºåˆ—å’Œæ§åˆ¶æƒé™ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fd2dba50bb6e4df7b27e735245a06a2a2%2F" target="_blank" title="https://blog.cmdragon.cn/posts/d2dba50bb6e4df7b27e735245a06a2a2/" ref="nofollow noopener noreferrer">PostgreSQLç´¢å¼•è¿™ä¹ˆç©ï¼Œæ‰èƒ½è®©ä½ çš„æŸ¥è¯¢çœŸçš„â€œé£â€èµ·æ¥ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F849ae5bab0f8c66e94c2f6ad1bb798e3%2F" target="_blank" title="https://blog.cmdragon.cn/posts/849ae5bab0f8c66e94c2f6ad1bb798e3/" ref="nofollow noopener noreferrer">PostgreSQLçš„è¡¨å…³ç³»å’Œçº¦æŸï¼Œå’‹å¸®ä½ æå®šç”¨æˆ·è®¢å•ä¸æ··ä¹±ã€å­¦ç”Ÿé€‰è¯¾ä¸é‡å¤ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fef4800975ffa84f1ca51976a70a1585b%2F" target="_blank" title="https://blog.cmdragon.cn/posts/ef4800975ffa84f1ca51976a70a1585b/" ref="nofollow noopener noreferrer">PostgreSQLæŸ¥è¯¢çš„ç­›å­ã€æ’åºã€èšåˆã€åˆ†ç»„ï¼Ÿä½ ä¼šç”¨å®ƒä»¬æå®šæ•°æ®å—ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fbf54711525c507c5eacfa7b0151c39d2%2F" target="_blank" title="https://blog.cmdragon.cn/posts/bf54711525c507c5eacfa7b0151c39d2/" ref="nofollow noopener noreferrer">PostgreSQLæ•°æ®ç±»å‹æ€ä¹ˆé€‰æ‰é«˜æ•ˆä¸è¸©å‘ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F887809b3e0375f5956873cd442f516d8%2F" target="_blank" title="https://blog.cmdragon.cn/posts/887809b3e0375f5956873cd442f516d8/" ref="nofollow noopener noreferrer">æƒ³è§£é”PostgreSQLæŸ¥è¯¢ä»åŸºç¡€åˆ°è¿›é˜¶çš„æ ¸å¿ƒçŸ¥è¯†ç‚¹ï¼Ÿä½ éƒ½getäº†å—ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F934be1203725e8be9d6f6e9104e5abcc%2F" target="_blank" title="https://blog.cmdragon.cn/posts/934be1203725e8be9d6f6e9104e5abcc/" ref="nofollow noopener noreferrer">PostgreSQL DELETEå±…ç„¶æœ‰è¿™äº›æ“ä½œï¼Ÿè¿”å›æ•°æ®ã€è¿è¡¨åˆ ä½ è¯•è¿‡æ²¡ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F0f0622e9b7402b599e618150d0596ffe%2F" target="_blank" title="https://blog.cmdragon.cn/posts/0f0622e9b7402b599e618150d0596ffe/" ref="nofollow noopener noreferrer">PostgreSQL UPDATEè¯­å¥æ€ä¹ˆç©ï¼Ÿä»æ”¹é‚®ç®±åˆ°æ‰¹é‡æ›´æ–°çš„é¿å‘æŠ€å·§ä½ éƒ½ä¼šå—ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F0e3bf7efc030b024ea67ee855a00f2de%2F" target="_blank" title="https://blog.cmdragon.cn/posts/0e3bf7efc030b024ea67ee855a00f2de/" ref="nofollow noopener noreferrer">PostgreSQLæ’å…¥æ•°æ®è¿˜åœ¨é€æ¡æ•²ï¼Ÿæ‰¹é‡ã€å†²çªå¤„ç†ã€è¿”å›è‡ªå¢IDçš„æŠ€å·§ä½ ä¼šå—ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fb6cd3c86da6aac26ed829e472d34078e%2F" target="_blank" title="https://blog.cmdragon.cn/posts/b6cd3c86da6aac26ed829e472d34078e/" ref="nofollow noopener noreferrer">PostgreSQLçš„â€œä»“åº“-æˆ¿é—´-è´§æ¶â€æ¸¸æˆï¼Œä½ èƒ½å»ºå‡ºç”µå•†æ•°æ®åº“å’Œè¡¨å—ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fba1f545a3410144552fbdbfcf31b5265%2F" target="_blank" title="https://blog.cmdragon.cn/posts/ba1f545a3410144552fbdbfcf31b5265/" ref="nofollow noopener noreferrer">PostgreSQL 17å®‰è£…æ€»ç¿»è½¦ï¼ŸWindows/macOS/Linuxé¿å‘æŒ‡å—å¸®ä½ æå®šï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fb5474d1480509c5072085abc80b3dd9f%2F" target="_blank" title="https://blog.cmdragon.cn/posts/b5474d1480509c5072085abc80b3dd9f/" ref="nofollow noopener noreferrer">èƒ½å½“å…³ç³»å‹æ•°æ®åº“è¿˜èƒ½ç©å¯¹è±¡ç‰¹æ€§ï¼Œèƒ½æ‹†å¤æ‚æŸ¥è¯¢è¿˜èƒ½è‡ªåŠ¨ç®¡åº“å­˜ï¼ŒPostgreSQLå‡­ä»€ä¹ˆè¿™ä¹ˆé¦™ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fcc098d8836e787baa8a4d92e4d56d5c5%2F" target="_blank" title="https://blog.cmdragon.cn/posts/cc098d8836e787baa8a4d92e4d56d5c5/" ref="nofollow noopener noreferrer">ç»™æ¥å£åŠ æ–°å­—æ®µåˆä¸æå´©è€å®¢æˆ·ç«¯ï¼ŸFastAPIçš„å¤šç‰ˆæœ¬APIé å“ªä¸‰æ‹›å®ç°ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F46d05151c5bd31cf37a7bcf0b8f5b0b8%2F" target="_blank" title="https://blog.cmdragon.cn/posts/46d05151c5bd31cf37a7bcf0b8f5b0b8/" ref="nofollow noopener noreferrer">æµé‡çªå¢è¦æå´©FastAPIï¼Ÿç†”æ–­æµ‹è¯•æ˜¯æ€ä¹ˆé˜²ç³»ç»Ÿé›ªå´©çš„ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F65ce343cc5df9faf3a8e2eeaab42ae45%2F" target="_blank" title="https://blog.cmdragon.cn/posts/65ce343cc5df9faf3a8e2eeaab42ae45/" ref="nofollow noopener noreferrer">FastAPIç§’æ€åº“å­˜æ€»å˜è´Ÿæ•°ï¼ŸRedisåˆ†å¸ƒå¼é”èƒ½å¸®ä½ å®ˆä½åº•çº¿å— - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Feed6cd8985d9be0a4b092a7da38b3e0c%2F" target="_blank" title="https://blog.cmdragon.cn/posts/eed6cd8985d9be0a4b092a7da38b3e0c/" ref="nofollow noopener noreferrer">FastAPIçš„CIæµæ°´çº¿æ€ä¹ˆè‡ªåŠ¨æµ‹ç«¯ç‚¹ï¼Œè¿˜èƒ½è®©AllureæŠ¥å‘Šç¾åˆ°çŠ¯è§„ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F6157d87338ce894d18c013c3c4777abb%2F" target="_blank" title="https://blog.cmdragon.cn/posts/6157d87338ce894d18c013c3c4777abb/" ref="nofollow noopener noreferrer">å¦‚ä½•ç”¨GitHub Actionsä¸ºFastAPIé¡¹ç›®æ‰“é€ è‡ªåŠ¨åŒ–æµ‹è¯•æµæ°´çº¿ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Ffc4ef84559e04693a620d0714cb30787%2F" target="_blank" title="https://blog.cmdragon.cn/posts/fc4ef84559e04693a620d0714cb30787/" ref="nofollow noopener noreferrer">å¦‚ä½•ç”¨Git Hookå’ŒCIæµæ°´çº¿ä¸ºFastAPIé¡¹ç›®ä¿é©¾æŠ¤èˆªï¼Ÿ - cmdragon's Blog</a></li>
</ul>
</details>
<details>
<summary>å…è´¹å¥½ç”¨çš„çƒ­é—¨åœ¨çº¿å·¥å…·</summary>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fraid-calculator" target="_blank" title="https://tools.cmdragon.cn/zh/apps/raid-calculator" ref="nofollow noopener noreferrer">RAID è®¡ç®—å™¨ - åº”ç”¨å•†åº— | By cmdragon</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fphotoshop-online" target="_blank" title="https://tools.cmdragon.cn/zh/apps/photoshop-online" ref="nofollow noopener noreferrer">åœ¨çº¿PS - åº”ç”¨å•†åº— | By cmdragon</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fmermaid-live-editor" target="_blank" title="https://tools.cmdragon.cn/zh/apps/mermaid-live-editor" ref="nofollow noopener noreferrer">Mermaid åœ¨çº¿ç¼–è¾‘å™¨ - åº”ç”¨å•†åº— | By cmdragon</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fmath-solver-calculator" target="_blank" title="https://tools.cmdragon.cn/zh/apps/math-solver-calculator" ref="nofollow noopener noreferrer">æ•°å­¦æ±‚è§£è®¡ç®—å™¨ - åº”ç”¨å•†åº— | By cmdragon</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fsmart-teleprompter" target="_blank" title="https://tools.cmdragon.cn/zh/apps/smart-teleprompter" ref="nofollow noopener noreferrer">æ™ºèƒ½æè¯å™¨ - åº”ç”¨å•†åº— | By cmdragon</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fmagic-resume" target="_blank" title="https://tools.cmdragon.cn/zh/apps/magic-resume" ref="nofollow noopener noreferrer">é­”æ³•ç®€å† - åº”ç”¨å•†åº— | By cmdragon</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fimage-puzzle-tool" target="_blank" title="https://tools.cmdragon.cn/zh/apps/image-puzzle-tool" ref="nofollow noopener noreferrer">Image Puzzle Tool - å›¾ç‰‡æ‹¼å›¾å·¥å…· | By cmdragon</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fsubtitle-downloader" target="_blank" title="https://tools.cmdragon.cn/zh/apps/subtitle-downloader" ref="nofollow noopener noreferrer">å­—å¹•ä¸‹è½½å·¥å…· - åº”ç”¨å•†åº— | By cmdragon</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Flyrics-generator" target="_blank" title="https://tools.cmdragon.cn/zh/apps/lyrics-generator" ref="nofollow noopener noreferrer">æ­Œè¯ç”Ÿæˆå·¥å…· - åº”ç”¨å•†åº— | By cmdragon</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fcloud-drive-search" target="_blank" title="https://tools.cmdragon.cn/zh/apps/cloud-drive-search" ref="nofollow noopener noreferrer">ç½‘ç›˜èµ„æºèšåˆæœç´¢ - åº”ç”¨å•†åº— | By cmdragon</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fascii-art-generator" target="_blank" title="https://tools.cmdragon.cn/zh/apps/ascii-art-generator" ref="nofollow noopener noreferrer">ASCIIå­—ç¬¦ç”»ç”Ÿæˆå™¨ - åº”ç”¨å•†åº— | By cmdragon</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fjwt-tool" target="_blank" title="https://tools.cmdragon.cn/zh/apps/jwt-tool" ref="nofollow noopener noreferrer">JSON Web Tokens å·¥å…· - åº”ç”¨å•†åº— | By cmdragon</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fbcrypt-tool" target="_blank" title="https://tools.cmdragon.cn/zh/apps/bcrypt-tool" ref="nofollow noopener noreferrer">Bcrypt å¯†ç å·¥å…· - åº”ç”¨å•†åº— | By cmdragon</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fgif-composer" target="_blank" title="https://tools.cmdragon.cn/zh/apps/gif-composer" ref="nofollow noopener noreferrer">GIF åˆæˆå™¨ - åº”ç”¨å•†åº— | By cmdragon</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fgif-decomposer" target="_blank" title="https://tools.cmdragon.cn/zh/apps/gif-decomposer" ref="nofollow noopener noreferrer">GIF åˆ†è§£å™¨ - åº”ç”¨å•†åº— | By cmdragon</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Ftext-steganography" target="_blank" title="https://tools.cmdragon.cn/zh/apps/text-steganography" ref="nofollow noopener noreferrer">æ–‡æœ¬éšå†™æœ¯ - åº”ç”¨å•†åº— | By cmdragon</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh" target="_blank" title="https://tools.cmdragon.cn/zh" ref="nofollow noopener noreferrer">CMDragon åœ¨çº¿å·¥å…· - é«˜çº§AIå·¥å…·ç®±ä¸å¼€å‘è€…å¥—ä»¶ | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%3Fcategory%3Dtrending" target="_blank" title="https://tools.cmdragon.cn/zh/apps?category=trending" ref="nofollow noopener noreferrer">åº”ç”¨å•†åº— - å‘ç°1000+æå‡æ•ˆç‡ä¸å¼€å‘çš„AIå·¥å…·å’Œå®ç”¨ç¨‹åº | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fchangelog" target="_blank" title="https://tools.cmdragon.cn/zh/changelog" ref="nofollow noopener noreferrer">CMDragon æ›´æ–°æ—¥å¿— - æœ€æ–°æ›´æ–°ã€åŠŸèƒ½ä¸æ”¹è¿› | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fsponsor" target="_blank" title="https://tools.cmdragon.cn/zh/sponsor" ref="nofollow noopener noreferrer">æ”¯æŒæˆ‘ä»¬ - æˆä¸ºèµåŠ©è€… | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Ftext-to-image-ai" target="_blank" title="https://tools.cmdragon.cn/zh/apps/text-to-image-ai" ref="nofollow noopener noreferrer">AIæ–‡æœ¬ç”Ÿæˆå›¾åƒ - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Ftemp-email" target="_blank" title="https://tools.cmdragon.cn/zh/apps/temp-email" ref="nofollow noopener noreferrer">ä¸´æ—¶é‚®ç®± - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fqrcode-parser" target="_blank" title="https://tools.cmdragon.cn/zh/apps/qrcode-parser" ref="nofollow noopener noreferrer">äºŒç»´ç è§£æå™¨ - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Ftext-to-mindmap" target="_blank" title="https://tools.cmdragon.cn/zh/apps/text-to-mindmap" ref="nofollow noopener noreferrer">æ–‡æœ¬è½¬æ€ç»´å¯¼å›¾ - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fregex-visualizer" target="_blank" title="https://tools.cmdragon.cn/zh/apps/regex-visualizer" ref="nofollow noopener noreferrer">æ­£åˆ™è¡¨è¾¾å¼å¯è§†åŒ–å·¥å…· - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fsteganography-tool" target="_blank" title="https://tools.cmdragon.cn/zh/apps/steganography-tool" ref="nofollow noopener noreferrer">æ–‡ä»¶éšå†™å·¥å…· - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fiptv-explorer" target="_blank" title="https://tools.cmdragon.cn/zh/apps/iptv-explorer" ref="nofollow noopener noreferrer">IPTV é¢‘é“æ¢ç´¢å™¨ - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fsnapdrop" target="_blank" title="https://tools.cmdragon.cn/zh/apps/snapdrop" ref="nofollow noopener noreferrer">å¿«ä¼  - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Flucky-draw" target="_blank" title="https://tools.cmdragon.cn/zh/apps/lucky-draw" ref="nofollow noopener noreferrer">éšæœºæŠ½å¥–å·¥å…· - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fanime-scene-finder" target="_blank" title="https://tools.cmdragon.cn/zh/apps/anime-scene-finder" ref="nofollow noopener noreferrer">åŠ¨æ¼«åœºæ™¯æŸ¥æ‰¾å™¨ - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Ftime-toolkit" target="_blank" title="https://tools.cmdragon.cn/zh/apps/time-toolkit" ref="nofollow noopener noreferrer">æ—¶é—´å·¥å…·ç®± - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fspeed-test" target="_blank" title="https://tools.cmdragon.cn/zh/apps/speed-test" ref="nofollow noopener noreferrer">ç½‘é€Ÿæµ‹è¯• - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fbackground-remover" target="_blank" title="https://tools.cmdragon.cn/zh/apps/background-remover" ref="nofollow noopener noreferrer">AI æ™ºèƒ½æŠ å›¾å·¥å…· - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fbackground-replacer" target="_blank" title="https://tools.cmdragon.cn/zh/apps/background-replacer" ref="nofollow noopener noreferrer">èƒŒæ™¯æ›¿æ¢å·¥å…· - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fartistic-qrcode" target="_blank" title="https://tools.cmdragon.cn/zh/apps/artistic-qrcode" ref="nofollow noopener noreferrer">è‰ºæœ¯äºŒç»´ç ç”Ÿæˆå™¨ - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fopen-graph-generator" target="_blank" title="https://tools.cmdragon.cn/zh/apps/open-graph-generator" ref="nofollow noopener noreferrer">Open Graph å…ƒæ ‡ç­¾ç”Ÿæˆå™¨ - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fimage-comparison" target="_blank" title="https://tools.cmdragon.cn/zh/apps/image-comparison" ref="nofollow noopener noreferrer">å›¾åƒå¯¹æ¯”å·¥å…· - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fimage-compressor" target="_blank" title="https://tools.cmdragon.cn/zh/apps/image-compressor" ref="nofollow noopener noreferrer">å›¾ç‰‡å‹ç¼©ä¸“ä¸šç‰ˆ - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fpassword-generator" target="_blank" title="https://tools.cmdragon.cn/zh/apps/password-generator" ref="nofollow noopener noreferrer">å¯†ç ç”Ÿæˆå™¨ - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fsvg-optimizer" target="_blank" title="https://tools.cmdragon.cn/zh/apps/svg-optimizer" ref="nofollow noopener noreferrer">SVGä¼˜åŒ–å™¨ - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fcolor-palette" target="_blank" title="https://tools.cmdragon.cn/zh/apps/color-palette" ref="nofollow noopener noreferrer">è°ƒè‰²æ¿ç”Ÿæˆå™¨ - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fonline-metronome" target="_blank" title="https://tools.cmdragon.cn/zh/apps/online-metronome" ref="nofollow noopener noreferrer">åœ¨çº¿èŠ‚æ‹å™¨ - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fip-geolocation" target="_blank" title="https://tools.cmdragon.cn/zh/apps/ip-geolocation" ref="nofollow noopener noreferrer">IPå½’å±åœ°æŸ¥è¯¢ - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fcss-grid-layout" target="_blank" title="https://tools.cmdragon.cn/zh/apps/css-grid-layout" ref="nofollow noopener noreferrer">CSSç½‘æ ¼å¸ƒå±€ç”Ÿæˆå™¨ - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Femail-validator" target="_blank" title="https://tools.cmdragon.cn/zh/apps/email-validator" ref="nofollow noopener noreferrer">é‚®ç®±éªŒè¯å·¥å…· - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fcalligraphy-practice" target="_blank" title="https://tools.cmdragon.cn/zh/apps/calligraphy-practice" ref="nofollow noopener noreferrer">ä¹¦æ³•ç»ƒä¹ å­—å¸– - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Ffinance-calculator-suite" target="_blank" title="https://tools.cmdragon.cn/zh/apps/finance-calculator-suite" ref="nofollow noopener noreferrer">é‡‘èè®¡ç®—å™¨å¥—ä»¶ - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fchinese-kinship-calculator" target="_blank" title="https://tools.cmdragon.cn/zh/apps/chinese-kinship-calculator" ref="nofollow noopener noreferrer">ä¸­å›½äº²æˆšå…³ç³»è®¡ç®—å™¨ - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fprotobuf-toolkit" target="_blank" title="https://tools.cmdragon.cn/zh/apps/protobuf-toolkit" ref="nofollow noopener noreferrer">Protocol Buffer å·¥å…·ç®± - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fip-geolocation" target="_blank" title="https://tools.cmdragon.cn/zh/apps/ip-geolocation" ref="nofollow noopener noreferrer">IPå½’å±åœ°æŸ¥è¯¢ - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fimage-upscaler" target="_blank" title="https://tools.cmdragon.cn/zh/apps/image-upscaler" ref="nofollow noopener noreferrer">å›¾ç‰‡æ— æŸæ”¾å¤§ - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Ftext-compare" target="_blank" title="https://tools.cmdragon.cn/zh/apps/text-compare" ref="nofollow noopener noreferrer">æ–‡æœ¬æ¯”è¾ƒå·¥å…· - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fip-batch-lookup" target="_blank" title="https://tools.cmdragon.cn/zh/apps/ip-batch-lookup" ref="nofollow noopener noreferrer">IPæ‰¹é‡æŸ¥è¯¢å·¥å…· - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fdomain-finder" target="_blank" title="https://tools.cmdragon.cn/zh/apps/domain-finder" ref="nofollow noopener noreferrer">åŸŸåæŸ¥è¯¢å·¥å…· - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fdns-toolkit" target="_blank" title="https://tools.cmdragon.cn/zh/apps/dns-toolkit" ref="nofollow noopener noreferrer">DNSå·¥å…·ç®± - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Ffavicon-generator" target="_blank" title="https://tools.cmdragon.cn/zh/apps/favicon-generator" ref="nofollow noopener noreferrer">ç½‘ç«™å›¾æ ‡ç”Ÿæˆå™¨ - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fsitemap_index.xml" target="_blank" title="https://tools.cmdragon.cn/sitemap_index.xml" ref="nofollow noopener noreferrer">XML Sitemap</a></li>
</ul>
</details>
<p><strong>æ³¨æ„</strong>ï¼šæ·±åº¦é€‰æ‹©å™¨ä¼šç©¿é€å½“å‰ç»„ä»¶çš„scopedï¼Œå½±å“æ‰€æœ‰å­ç»„ä»¶çš„å¯¹åº”ç±»åï¼Œæ‰€ä»¥è¦è°¨æ…ä½¿ç”¨ï¼ˆæ¯”å¦‚ç»™å­ç»„ä»¶åŠ ç‹¬ç‰¹çš„classå‰ç¼€ï¼‰ã€‚</p>
<h3 data-id="heading-10">å››ã€æ€§èƒ½ä¼˜åŒ–ï¼šé¿å…é¢‘ç¹åˆ‡æ¢æ ·å¼å¯¹è±¡</h3>
<p>Vueä¸­ï¼Œ<code>:style</code>ç»‘å®šçš„å¯¹è±¡å¦‚æœ<strong>é¢‘ç¹å˜åŒ–</strong>ï¼ˆæ¯”å¦‚æ¯ç§’åˆ‡æ¢ä¸€æ¬¡é¢œè‰²ï¼‰ï¼Œä¼šå¯¼è‡´Vueé¢‘ç¹é‡æ–°è®¡ç®—æ ·å¼ï¼Œå½±å“æ€§èƒ½ã€‚æˆ‘ä»¬éœ€è¦<strong>ç¼“å­˜æ ·å¼å¯¹è±¡</strong>ï¼Œå‡å°‘ä¸å¿…è¦çš„æ¸²æŸ“ã€‚</p>
<h4 data-id="heading-11">4.1 é—®é¢˜æ ¹æºï¼šå¯¹è±¡å¼•ç”¨å˜åŒ–</h4>
<p>æ¯”å¦‚ä¸‹é¢çš„å†™æ³•ï¼Œæ¯æ¬¡æ¸²æŸ“éƒ½ä¼šåˆ›å»ºä¸€ä¸ª<strong>æ–°çš„æ ·å¼å¯¹è±¡</strong>ï¼š</p>
<pre><code class="hljs language-vue" lang="vue">&lt;!-- ä¸å¥½çš„å†™æ³•ï¼šæ¯æ¬¡æ¸²æŸ“éƒ½ç”Ÿæˆæ–°å¯¹è±¡ --&gt;
&lt;template&gt;
  &lt;div :style="{ 
    color: isActive ? 'red' : 'blue', 
    fontSize: `${fontSize}px` 
  }"&gt;
    åŠ¨æ€æ ·å¼
  &lt;/div&gt;
&lt;/template&gt;
</code></pre>
<p>Vueä¼šè®¤ä¸ºâ€œæ ·å¼å¯¹è±¡å˜äº†â€ï¼Œå³ä½¿é‡Œé¢çš„å±æ€§å€¼æ²¡å˜åŒ–ï¼Œä¹Ÿä¼šé‡æ–°åº”ç”¨æ ·å¼ã€‚</p>
<h4 data-id="heading-12">4.2 ä¼˜åŒ–æ–¹æ¡ˆï¼šç”¨è®¡ç®—å±æ€§ç¼“å­˜</h4>
<p>è®¡ç®—å±æ€§ï¼ˆ<code>computed</code>ï¼‰ä¼šç¼“å­˜ç»“æœï¼Œåªæœ‰å½“ä¾èµ–çš„å“åº”å¼å˜é‡å˜åŒ–æ—¶ï¼Œæ‰ä¼šé‡æ–°è®¡ç®—ã€‚æ¯”å¦‚ï¼š</p>
<pre><code class="hljs language-vue" lang="vue">&lt;!-- å¥½çš„å†™æ³•ï¼šç”¨computedç¼“å­˜æ ·å¼å¯¹è±¡ --&gt;
&lt;template&gt;
  &lt;div :style="dynamicStyle"&gt;åŠ¨æ€æ ·å¼&lt;/div&gt;
&lt;/template&gt;

&lt;script setup&gt;
import { ref, computed } from 'vue'
const isActive = ref(false)
const fontSize = ref(16)

// è®¡ç®—å±æ€§ç¼“å­˜æ ·å¼å¯¹è±¡
const dynamicStyle = computed(() =&gt; ({
  color: isActive.value ? 'red' : 'blue',
  fontSize: `${fontSize.value}px`
}))
&lt;/script&gt;
</code></pre>
<p>è¿™æ ·ï¼Œåªæœ‰<code>isActive</code>æˆ–<code>fontSize</code>å˜åŒ–æ—¶ï¼Œ<code>dynamicStyle</code>æ‰ä¼šæ›´æ–°ï¼Œé¿å…äº†é¢‘ç¹åˆ›å»ºæ–°å¯¹è±¡ã€‚</p>
<h4 data-id="heading-13">4.3 æœ€ä½³å®è·µï¼šé™æ€ä¸åŠ¨æ€åˆ†ç¦»</h4>
<p>å¦‚æœæ ·å¼å¯¹è±¡ä¸­æœ‰<strong>é™æ€å±æ€§</strong>ï¼ˆä¸ä¼šå˜åŒ–çš„ï¼‰ï¼Œå¯ä»¥æŠŠå®ƒä»¬æ”¾åˆ°<code>computed</code>ä¹‹å¤–ï¼Œè¿›ä¸€æ­¥ä¼˜åŒ–ï¼š</p>
<pre><code class="hljs language-vue" lang="vue">&lt;script setup&gt;
const baseStyle = {
  padding: '16px',
  border: '1px solid #ccc'  // é™æ€æ ·å¼
}
const dynamicStyle = computed(() =&gt; ({
  ...baseStyle,  // åˆå¹¶é™æ€æ ·å¼
  color: isActive.value ? 'red' : 'blue'  // åŠ¨æ€æ ·å¼
}))
&lt;/script&gt;
</code></pre>
<h3 data-id="heading-14">è¯¾åQuizï¼šå·©å›ºä½ çš„çŸ¥è¯†</h3>
<h4 data-id="heading-15">é—®é¢˜1ï¼šå¦‚ä½•åœ¨Vue3ä¸­æ··åˆä½¿ç”¨classå’Œstyleç»‘å®šï¼Ÿ</h4>
<p><strong>ç­”æ¡ˆ</strong>ï¼šå¯ä»¥åŒæ—¶ä½¿ç”¨<code>class</code>ï¼ˆé™æ€/åŠ¨æ€ï¼‰å’Œ<code>:style</code>ï¼ˆåŠ¨æ€ï¼‰ç»‘å®šã€‚ä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-vue" lang="vue">&lt;div class="static-class" :class="{ active: isActive }" :style="{ color: textColor }"&gt;...&lt;/div&gt;
</code></pre>
<h4 data-id="heading-16">é—®é¢˜2ï¼šscopedæ ·å¼ä¸‹ï¼Œçˆ¶ç»„ä»¶å¦‚ä½•ä¿®æ”¹å­ç»„ä»¶çš„åŠ¨æ€ç±»åï¼Ÿ</h4>
<p><strong>ç­”æ¡ˆ</strong>ï¼šä½¿ç”¨æ·±åº¦é€‰æ‹©å™¨<code>::v-deep</code>ã€‚ä¾‹å¦‚çˆ¶ç»„ä»¶æƒ³ä¿®æ”¹å­ç»„ä»¶çš„<code>active</code>ç±»ï¼š</p>
<pre><code class="hljs language-css" lang="css">::v-deep .child-component .active {
  <span class="hljs-attribute">background-color</span>: yellow;
}
</code></pre>
<h4 data-id="heading-17">é—®é¢˜3ï¼šå¦‚ä½•ä¼˜åŒ–é¢‘ç¹åˆ‡æ¢æ ·å¼å¯¹è±¡çš„æ€§èƒ½ï¼Ÿ</h4>
<p><strong>ç­”æ¡ˆ</strong>ï¼šç”¨<code>computed</code>è®¡ç®—å±æ€§ç¼“å­˜æ ·å¼å¯¹è±¡ï¼Œé¿å…æ¯æ¬¡æ¸²æŸ“éƒ½åˆ›å»ºæ–°å¯¹è±¡ã€‚ä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-vue" lang="vue">const dynamicStyle = computed(() =&gt; ({
  color: isActive.value ? 'red' : 'blue'
}))
</code></pre>
<h3 data-id="heading-18">å¸¸è§æŠ¥é”™è§£å†³æ–¹æ¡ˆ</h3>
<h4 data-id="heading-19">1. åŠ¨æ€ç±»åä¸ç”Ÿæ•ˆ</h4>
<p><strong>åŸå› </strong>ï¼š</p>
<ul>
<li>ç±»åæ‹¼å†™é”™è¯¯ï¼ˆæ¯”å¦‚<code>btn--active</code>å†™æˆ<code>btn-active</code>ï¼‰ï¼›</li>
<li>scopedæ ·å¼å¯¼è‡´çˆ¶ç»„ä»¶çš„ç±»åæ— æ³•ä½œç”¨äºå­ç»„ä»¶ï¼›</li>
<li>åŠ¨æ€æ¡ä»¶é”™è¯¯ï¼ˆæ¯”å¦‚<code>isActive</code>å§‹ç»ˆä¸º<code>false</code>ï¼‰ã€‚</li>
</ul>
<p><strong>è§£å†³</strong>ï¼š</p>
<ul>
<li>æ£€æŸ¥ç±»åæ‹¼å†™ï¼›</li>
<li>ç”¨<code>console.log(isActive)</code>éªŒè¯åŠ¨æ€æ¡ä»¶ï¼›</li>
<li>çˆ¶ç»„ä»¶ä¿®æ”¹å­ç»„ä»¶æ ·å¼æ—¶ï¼Œç”¨<code>::v-deep</code>ã€‚</li>
</ul>
<h4 data-id="heading-20">2. æ ·å¼å¯¹è±¡é¢‘ç¹åˆ‡æ¢å¯¼è‡´å¡é¡¿</h4>
<p><strong>åŸå› </strong>ï¼š</p>
<ul>
<li>åœ¨<code>template</code>ä¸­ç›´æ¥å†™<code>:style="{ ... }"</code>ï¼Œæ¯æ¬¡æ¸²æŸ“éƒ½åˆ›å»ºæ–°å¯¹è±¡ã€‚</li>
</ul>
<p><strong>è§£å†³</strong>ï¼š</p>
<ul>
<li>ç”¨<code>computed</code>ç¼“å­˜æ ·å¼å¯¹è±¡ï¼›</li>
<li>æŠŠé™æ€æ ·å¼æ”¾åˆ°<code>computed</code>ä¹‹å¤–ï¼Œå‡å°‘è®¡ç®—é‡ã€‚</li>
</ul>
<h4 data-id="heading-21">3. çˆ¶ç»„ä»¶æ— æ³•ä¿®æ”¹å­ç»„ä»¶çš„scopedæ ·å¼</h4>
<p><strong>åŸå› </strong>ï¼š</p>
<ul>
<li>scopedæ ·å¼ç»™å­ç»„ä»¶å…ƒç´ æ·»åŠ äº†å”¯ä¸€å±æ€§ï¼Œçˆ¶ç»„ä»¶çš„æ ·å¼æ²¡æœ‰è¯¥å±æ€§ï¼Œæ— æ³•åŒ¹é…ã€‚</li>
</ul>
<p><strong>è§£å†³</strong>ï¼š</p>
<ul>
<li>ä½¿ç”¨æ·±åº¦é€‰æ‹©å™¨<code>::v-deep</code>ï¼›</li>
<li>å­ç»„ä»¶æš´éœ²<code>props</code>æ¥æ”¶çˆ¶ç»„ä»¶çš„æ ·å¼ï¼ˆæ¯”å¦‚<code>:custom-style="parentStyle"</code>ï¼‰ï¼›</li>
<li>å­ç»„ä»¶ä½¿ç”¨éscopedæ ·å¼ï¼ˆä¸æ¨èï¼Œå®¹æ˜“æ±¡æŸ“å…¨å±€ï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-22">å‚è€ƒé“¾æ¥</h3>
<ul>
<li>Vue classä¸styleç»‘å®šï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fvuejs.org%2Fguide%2Fessentials%2Fclass-and-style.html" target="_blank" title="https://vuejs.org/guide/essentials/class-and-style.html" ref="nofollow noopener noreferrer">vuejs.org/guide/essenâ€¦</a></li>
<li>Vue scopedæ ·å¼ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fvuejs.org%2Fapi%2Fsfc-css-features.html%23scoped-css" target="_blank" title="https://vuejs.org/api/sfc-css-features.html#scoped-css" ref="nofollow noopener noreferrer">vuejs.org/api/sfc-cssâ€¦</a></li>
<li>Vue è®¡ç®—å±æ€§ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fvuejs.org%2Fguide%2Fessentials%2Fcomputed.html" target="_blank" title="https://vuejs.org/guide/essentials/computed.html" ref="nofollow noopener noreferrer">vuejs.org/guide/essenâ€¦</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Go è¯­è¨€å…¥é—¨æ ¸å¿ƒæ¦‚å¿µæ€»ç»“]]></title>    <link>https://juejin.cn/post/7584810656382386185</link>    <guid>https://juejin.cn/post/7584810656382386185</guid>    <pubDate>2025-12-18T05:55:48.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7584810656382386185" data-draft-id="7584110439933952046" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Go è¯­è¨€å…¥é—¨æ ¸å¿ƒæ¦‚å¿µæ€»ç»“"/> <meta itemprop="keywords" content="Go"/> <meta itemprop="datePublished" content="2025-12-18T05:55:48.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¡å°”ç‰¹æ–¯"/> <meta itemprop="url" content="https://juejin.cn/user/4450440831840909"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Go è¯­è¨€å…¥é—¨æ ¸å¿ƒæ¦‚å¿µæ€»ç»“
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4450440831840909/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¡å°”ç‰¹æ–¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-18T05:55:48.000Z" title="Thu Dec 18 2025 05:55:48 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-18
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»24åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€å˜é‡ä¸å¸¸é‡å£°æ˜</h2>
<h3 data-id="heading-1">var - å˜é‡å£°æ˜</h3>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// var å£°æ˜å˜é‡ï¼ˆå¯åœ¨å‡½æ•°å†…å¤–ä½¿ç”¨ï¼‰</span>
<span class="hljs-keyword">var</span> name <span class="hljs-type">string</span> = <span class="hljs-string">"Go"</span>          <span class="hljs-comment">// æ˜¾å¼æŒ‡å®šç±»å‹ä¸ºstring</span>
<span class="hljs-keyword">var</span> age = <span class="hljs-number">25</span>                    <span class="hljs-comment">// ç¼–è¯‘å™¨è‡ªåŠ¨æ¨æ–­ç±»å‹ä¸ºint</span>
<span class="hljs-keyword">var</span> x, y <span class="hljs-type">int</span> = <span class="hljs-number">1</span>, <span class="hljs-number">2</span>             <span class="hljs-comment">// åŒæ—¶å£°æ˜å¤šä¸ªåŒç±»å‹å˜é‡ï¼Œåˆå§‹åŒ–ä¸ºæŒ‡å®šå€¼</span>

<span class="hljs-comment">// é›¶å€¼åˆå§‹åŒ–ï¼ˆæœªèµ‹å€¼çš„å˜é‡è‡ªåŠ¨åˆå§‹åŒ–ä¸ºé›¶å€¼ï¼‰</span>
<span class="hljs-keyword">var</span> count <span class="hljs-type">int</span>                   <span class="hljs-comment">// 0ï¼ˆintçš„é›¶å€¼ï¼‰</span>
<span class="hljs-keyword">var</span> price <span class="hljs-type">float64</span>               <span class="hljs-comment">// 0.0ï¼ˆfloat64çš„é›¶å€¼ï¼‰</span>
<span class="hljs-keyword">var</span> isReady <span class="hljs-type">bool</span>                <span class="hljs-comment">// falseï¼ˆboolçš„é›¶å€¼ï¼‰</span>
<span class="hljs-keyword">var</span> text <span class="hljs-type">string</span>                 <span class="hljs-comment">// ""ï¼ˆstringçš„é›¶å€¼ï¼‰</span>
<span class="hljs-keyword">var</span> numbers []<span class="hljs-type">int</span>               <span class="hljs-comment">// nilï¼ˆåˆ‡ç‰‡çš„é›¶å€¼ï¼‰</span>
<span class="hljs-keyword">var</span> data <span class="hljs-keyword">map</span>[<span class="hljs-type">string</span>]<span class="hljs-type">int</span>         <span class="hljs-comment">// nilï¼ˆæ˜ å°„çš„é›¶å€¼ï¼‰</span>
<span class="hljs-keyword">var</span> ptr *<span class="hljs-type">int</span>                    <span class="hljs-comment">// nilï¼ˆæŒ‡é’ˆçš„é›¶å€¼ï¼‰</span>
</code></pre>
<h3 data-id="heading-2">ç®€çŸ­å£°æ˜ :=</h3>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// := ç®€çŸ­å£°æ˜ï¼ˆåªèƒ½åœ¨å‡½æ•°å†…éƒ¨ä½¿ç”¨ï¼Œè‡ªåŠ¨æ¨æ–­ç±»å‹ï¼‰</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    name := <span class="hljs-string">"Alice"</span>             <span class="hljs-comment">// ç¼–è¯‘å™¨è‡ªåŠ¨æ¨æ–­ä¸ºstringç±»å‹</span>
    count := <span class="hljs-number">10</span>                 <span class="hljs-comment">// ç¼–è¯‘å™¨è‡ªåŠ¨æ¨æ–­ä¸ºintç±»å‹</span>
    a, b := <span class="hljs-number">1</span>, <span class="hljs-string">"hello"</span>          <span class="hljs-comment">// åŒæ—¶å£°æ˜ä¸åŒç±»å‹çš„å˜é‡</span>
    <span class="hljs-comment">// æ³¨æ„ï¼š:= å·¦ä¾§è‡³å°‘æœ‰ä¸€ä¸ªæ–°å˜é‡ï¼Œå¦åˆ™åº”ä½¿ç”¨ =</span>
}
</code></pre>
<h3 data-id="heading-3">const - å¸¸é‡å£°æ˜</h3>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// const å£°æ˜å¸¸é‡ï¼ˆå€¼ä¸å¯ä¿®æ”¹ï¼Œç¼–è¯‘æ—¶ç¡®å®šï¼‰</span>
<span class="hljs-keyword">const</span> Pi = <span class="hljs-number">3.14159</span>             <span class="hljs-comment">// å•å¸¸é‡å£°æ˜ï¼Œç±»å‹æ¨æ–­</span>
<span class="hljs-keyword">const</span> MaxUsers = <span class="hljs-number">1000</span>          <span class="hljs-comment">// å¸¸é‡å€¼åœ¨ç¼–è¯‘æ—¶ç¡®å®š</span>

<span class="hljs-comment">// å¸¸é‡ç»„ï¼ˆæ‰¹é‡å£°æ˜ï¼‰</span>
<span class="hljs-keyword">const</span> (
    StatusOK = <span class="hljs-number">200</span>             <span class="hljs-comment">// HTTPçŠ¶æ€ç ï¼šæˆåŠŸ</span>
    StatusNotFound = <span class="hljs-number">404</span>       <span class="hljs-comment">// HTTPçŠ¶æ€ç ï¼šæœªæ‰¾åˆ°</span>
    StatusServerError = <span class="hljs-number">500</span>    <span class="hljs-comment">// HTTPçŠ¶æ€ç ï¼šæœåŠ¡å™¨é”™è¯¯</span>
)

<span class="hljs-comment">// iota æšä¸¾ç”Ÿæˆå™¨ï¼ˆä»0å¼€å§‹ï¼Œæ¯è¡Œè‡ªåŠ¨é€’å¢1ï¼‰</span>
<span class="hljs-comment">// iota æ˜¯ä»€ä¹ˆï¼Ÿ</span>
<span class="hljs-comment">// iota æ˜¯ Go è¯­è¨€ä¸­çš„é¢„å®šä¹‰æ ‡è¯†ç¬¦ï¼Œåªèƒ½åœ¨å¸¸é‡å£°æ˜ä¸­ä½¿ç”¨</span>
<span class="hljs-comment">// å®ƒåœ¨æ¯ä¸ª const å—ä¸­ä» 0 å¼€å§‹ï¼Œæ¯è¡Œè‡ªåŠ¨é€’å¢ 1</span>
<span class="hljs-comment">// å¸¸ç”¨äºå®šä¹‰æšä¸¾å€¼æˆ–ç”Ÿæˆåºåˆ—å¸¸é‡</span>

<span class="hljs-keyword">const</span> (
    Monday = <span class="hljs-literal">iota</span> + <span class="hljs-number">1</span>  <span class="hljs-comment">// iota=0, Monday=1ï¼ˆä»1å¼€å§‹ï¼‰</span>
    Tuesday            <span class="hljs-comment">// iota=1, Tuesday=2ï¼ˆè‡ªåŠ¨ç»§æ‰¿è¡¨è¾¾å¼ï¼‰</span>
    Wednesday          <span class="hljs-comment">// iota=2, Wednesday=3</span>
    Thursday           <span class="hljs-comment">// iota=3, Thursday=4</span>
    Friday             <span class="hljs-comment">// iota=4, Friday=5</span>
)

<span class="hljs-comment">// iota ä½è¿ç®—ç¤ºä¾‹ï¼ˆå¸¸ç”¨äºå®šä¹‰æ–‡ä»¶å¤§å°å•ä½ï¼‰</span>
<span class="hljs-keyword">const</span> (
    _ = <span class="hljs-literal">iota</span>           <span class="hljs-comment">// ä½¿ç”¨ä¸‹åˆ’çº¿è·³è¿‡0å€¼</span>
    KB = <span class="hljs-number">1</span> &lt;&lt; (<span class="hljs-number">10</span> * <span class="hljs-literal">iota</span>)  <span class="hljs-comment">// 1å·¦ç§»10ä½ = 1024ï¼ˆ1KBï¼‰</span>
    MB                     <span class="hljs-comment">// 1å·¦ç§»20ä½ = 1,048,576ï¼ˆ1MBï¼‰</span>
    GB                     <span class="hljs-comment">// 1å·¦ç§»30ä½ = 1,073,741,824ï¼ˆ1GBï¼‰</span>
)

<span class="hljs-comment">// iota è¯¦ç»†ç¤ºä¾‹</span>
<span class="hljs-keyword">const</span> (
    <span class="hljs-comment">// ç¬¬ä¸€ä¸ªconstå—ï¼Œiotaä»0å¼€å§‹</span>
    Zero = <span class="hljs-literal">iota</span>    <span class="hljs-comment">// 0</span>
    One            <span class="hljs-comment">// 1</span>
    Two            <span class="hljs-comment">// 2</span>
)

<span class="hljs-keyword">const</span> (
    <span class="hljs-comment">// æ–°çš„constå—ï¼Œiotaé‡æ–°ä»0å¼€å§‹</span>
    Sunday = <span class="hljs-literal">iota</span>    <span class="hljs-comment">// 0</span>
    Monday2          <span class="hljs-comment">// 1</span>
    Tuesday2         <span class="hljs-comment">// 2</span>
)

<span class="hljs-comment">// iota åœ¨åŒä¸€è¡Œä¸­ä¼šé‡å¤ä½¿ç”¨ç›¸åŒçš„å€¼</span>
<span class="hljs-keyword">const</span> (
    A, B = <span class="hljs-literal">iota</span>, <span class="hljs-literal">iota</span> + <span class="hljs-number">1</span>  <span class="hljs-comment">// A=0, B=1ï¼ˆåŒä¸€è¡Œiotaç›¸åŒï¼‰</span>
    C, D                   <span class="hljs-comment">// C=1, D=2ï¼ˆiotaé€’å¢ï¼‰</span>
    E, F                   <span class="hljs-comment">// E=2, F=3</span>
)
</code></pre>
<h2 data-id="heading-4">äºŒã€make ä¸ new</h2>
<h3 data-id="heading-5">make - åˆ›å»ºå¹¶åˆå§‹åŒ–å¼•ç”¨ç±»å‹</h3>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// make ç”¨äºåˆ›å»ºåˆ‡ç‰‡ã€æ˜ å°„ã€ç®¡é“ç­‰å¼•ç”¨ç±»å‹ï¼Œè¿”å›å·²åˆå§‹åŒ–çš„å€¼</span>

<span class="hljs-comment">// åˆ‡ç‰‡ï¼šmake([]T, length, capacity)</span>
s1 := <span class="hljs-built_in">make</span>([]<span class="hljs-type">int</span>, <span class="hljs-number">5</span>)      <span class="hljs-comment">// åˆ›å»ºé•¿åº¦ä¸º5ï¼Œå®¹é‡ä¸º5çš„intåˆ‡ç‰‡ï¼Œæ‰€æœ‰å…ƒç´ åˆå§‹åŒ–ä¸º0</span>
s2 := <span class="hljs-built_in">make</span>([]<span class="hljs-type">int</span>, <span class="hljs-number">3</span>, <span class="hljs-number">10</span>)  <span class="hljs-comment">// é•¿åº¦3ï¼Œå®¹é‡10ï¼Œå®é™…åˆ†é…10ä¸ªå…ƒç´ çš„ç©ºé—´ï¼ˆå¯é¢„æ‰©å®¹ï¼‰</span>

<span class="hljs-comment">// æ˜ å°„ï¼šmake(map[K]V, initialCapacity)</span>
m1 := <span class="hljs-built_in">make</span>(<span class="hljs-keyword">map</span>[<span class="hljs-type">string</span>]<span class="hljs-type">int</span>)     <span class="hljs-comment">// åˆ›å»ºç©ºæ˜ å°„ï¼Œä½¿ç”¨é»˜è®¤å®¹é‡</span>
m2 := <span class="hljs-built_in">make</span>(<span class="hljs-keyword">map</span>[<span class="hljs-type">string</span>]<span class="hljs-type">int</span>, <span class="hljs-number">10</span>) <span class="hljs-comment">// åˆ›å»ºåˆå§‹å®¹é‡ä¸º10çš„æ˜ å°„ï¼ˆä¼˜åŒ–æ€§èƒ½ï¼Œå‡å°‘æ‰©å®¹ï¼‰</span>

<span class="hljs-comment">// ç®¡é“ï¼šmake(chan T, bufferSize)</span>
ch1 := <span class="hljs-built_in">make</span>(<span class="hljs-keyword">chan</span> <span class="hljs-type">int</span>)          <span class="hljs-comment">// æ— ç¼“å†²ç®¡é“ï¼Œå‘é€ä¼šé˜»å¡ç›´åˆ°æœ‰æ¥æ”¶è€…</span>
ch2 := <span class="hljs-built_in">make</span>(<span class="hljs-keyword">chan</span> <span class="hljs-type">int</span>, <span class="hljs-number">3</span>)       <span class="hljs-comment">// ç¼“å†²å¤§å°ä¸º3ï¼Œå¯æš‚å­˜3ä¸ªå…ƒç´ è€Œä¸é˜»å¡</span>
</code></pre>
<h3 data-id="heading-6">new - åˆ†é…å†…å­˜å¹¶è¿”å›æŒ‡é’ˆ</h3>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// new(T) åˆ†é…Tç±»å‹çš„å†…å­˜ï¼Œè¿”å›æŒ‡é’ˆ *Tï¼Œå€¼åˆå§‹åŒ–ä¸ºé›¶å€¼</span>
p := <span class="hljs-built_in">new</span>(<span class="hljs-type">int</span>)           <span class="hljs-comment">// pæ˜¯*intç±»å‹ï¼Œ*p = 0ï¼ˆintçš„é›¶å€¼ï¼‰</span>
*p = <span class="hljs-number">42</span>                 <span class="hljs-comment">// é€šè¿‡æŒ‡é’ˆä¿®æ”¹å€¼</span>

<span class="hljs-comment">// ç»“æ„ä½“</span>
<span class="hljs-keyword">type</span> Point <span class="hljs-keyword">struct</span> { X, Y <span class="hljs-type">int</span> }
pt := <span class="hljs-built_in">new</span>(Point)       <span class="hljs-comment">// ptæ˜¯*Pointç±»å‹ï¼ŒX:0, Y:0ï¼ˆç»“æ„ä½“é›¶å€¼ï¼‰</span>
pt.X = <span class="hljs-number">10</span>              <span class="hljs-comment">// é€šè¿‡æŒ‡é’ˆè®¿é—®ç»“æ„ä½“å­—æ®µï¼ˆè‡ªåŠ¨è§£å¼•ç”¨ï¼‰</span>
pt.Y = <span class="hljs-number">20</span>

<span class="hljs-comment">// æ³¨æ„ï¼šnewåªåˆ†é…å†…å­˜å¹¶è¿”å›æŒ‡é’ˆï¼Œmakeä¼šåˆå§‹åŒ–å¼•ç”¨ç±»å‹</span>
</code></pre>
<h3 data-id="heading-7">make vs new å¯¹æ¯”</h3>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// make ç”¨äºå¼•ç”¨ç±»å‹ï¼ˆåˆ‡ç‰‡ã€æ˜ å°„ã€ç®¡é“ï¼‰ï¼Œè¿”å›å·²åˆå§‹åŒ–çš„å€¼</span>
slice := <span class="hljs-built_in">make</span>([]<span class="hljs-type">int</span>, <span class="hljs-number">3</span>)  <span class="hljs-comment">// sliceæ˜¯[]intç±»å‹ï¼Œå€¼ä¸º[0 0 0]</span>

<span class="hljs-comment">// new ç”¨äºä»»ä½•ç±»å‹ï¼Œè¿”å›æŒ‡é’ˆï¼Œå¼•ç”¨ç±»å‹éœ€è¦å•ç‹¬åˆå§‹åŒ–</span>
ptr := <span class="hljs-built_in">new</span>([]<span class="hljs-type">int</span>)        <span class="hljs-comment">// ptræ˜¯*[]intç±»å‹ï¼Œ*ptræ˜¯nilåˆ‡ç‰‡</span>
*ptr = <span class="hljs-built_in">make</span>([]<span class="hljs-type">int</span>, <span class="hljs-number">3</span>)    <span class="hljs-comment">// éœ€è¦æ˜¾å¼åˆå§‹åŒ–æ‰èƒ½ä½¿ç”¨</span>

<span class="hljs-comment">// æ¨èï¼šåˆ‡ç‰‡ã€æ˜ å°„ã€ç®¡é“ä½¿ç”¨makeï¼Œç»“æ„ä½“æŒ‡é’ˆä½¿ç”¨newæˆ–&amp;</span>
</code></pre>
<h2 data-id="heading-8">ä¸‰ã€åŸºæœ¬æ•°æ®ç»“æ„</h2>
<h3 data-id="heading-9">æ•°ç»„ï¼ˆå›ºå®šé•¿åº¦ï¼‰</h3>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// æ•°ç»„æ˜¯å›ºå®šé•¿åº¦çš„å€¼ç±»å‹ï¼Œé•¿åº¦æ˜¯ç±»å‹çš„ä¸€éƒ¨åˆ†</span>
<span class="hljs-keyword">var</span> arr1 [<span class="hljs-number">3</span>]<span class="hljs-type">int</span>               <span class="hljs-comment">// å£°æ˜é•¿åº¦ä¸º3çš„intæ•°ç»„ï¼Œåˆå§‹åŒ–ä¸º[0 0 0]</span>
arr2 := [<span class="hljs-number">3</span>]<span class="hljs-type">int</span>{<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>}       <span class="hljs-comment">// æ˜¾å¼åˆå§‹åŒ–ï¼Œé•¿åº¦ä¸º3</span>
arr3 := [...]<span class="hljs-type">int</span>{<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>}  <span class="hljs-comment">// ç¼–è¯‘å™¨è‡ªåŠ¨è®¡ç®—é•¿åº¦ï¼Œé•¿åº¦ä¸º4</span>
arr4 := [<span class="hljs-number">2</span>][<span class="hljs-number">3</span>]<span class="hljs-type">int</span>{{<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>}, {<span class="hljs-number">4</span>,<span class="hljs-number">5</span>,<span class="hljs-number">6</span>}}  <span class="hljs-comment">// äºŒç»´æ•°ç»„</span>

<span class="hljs-comment">// æ•°ç»„æ“ä½œ</span>
arr2[<span class="hljs-number">0</span>] = <span class="hljs-number">10</span>                  <span class="hljs-comment">// ä¿®æ”¹å…ƒç´ </span>
fmt.Println(<span class="hljs-built_in">len</span>(arr2))        <span class="hljs-comment">// è·å–é•¿åº¦ï¼š3</span>
fmt.Println(arr2[<span class="hljs-number">1</span>])          <span class="hljs-comment">// è®¿é—®å…ƒç´ ï¼š2</span>

<span class="hljs-comment">// é‡è¦ï¼šå›ºå®šé•¿åº¦æ•°ç»„ä¸èƒ½æ–°å¢æˆ–åˆ é™¤å…ƒç´ </span>
<span class="hljs-comment">// æ•°ç»„é•¿åº¦åœ¨å£°æ˜æ—¶å°±ç¡®å®šäº†ï¼Œæ— æ³•åŠ¨æ€æ”¹å˜</span>
arr := [<span class="hljs-number">3</span>]<span class="hljs-type">int</span>{<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>}
<span class="hljs-comment">// arr = append(arr, 4)  // âŒ é”™è¯¯ï¼šæ•°ç»„ä¸æ”¯æŒappend</span>
<span class="hljs-comment">// å¦‚æœéœ€è¦åŠ¨æ€é•¿åº¦ï¼Œåº”è¯¥ä½¿ç”¨åˆ‡ç‰‡ï¼ˆsliceï¼‰</span>

<span class="hljs-comment">// æ£€æŸ¥æ•°ç»„æ˜¯å¦åŒ…å«æŸä¸ªå€¼ï¼ˆéœ€è¦æ‰‹åŠ¨éå†ï¼‰</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">contains</span><span class="hljs-params">(arr [3]<span class="hljs-type">int</span>, target <span class="hljs-type">int</span>)</span></span> <span class="hljs-type">bool</span> {
    <span class="hljs-keyword">for</span> _, v := <span class="hljs-keyword">range</span> arr {
        <span class="hljs-keyword">if</span> v == target {
            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>
        }
    }
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
}

arr := [<span class="hljs-number">3</span>]<span class="hljs-type">int</span>{<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>}
<span class="hljs-keyword">if</span> contains(arr, <span class="hljs-number">2</span>) {
    fmt.Println(<span class="hljs-string">"æ•°ç»„åŒ…å«2"</span>)
}

<span class="hljs-comment">// æˆ–è€…ä½¿ç”¨åˆ‡ç‰‡ï¼ˆæ›´çµæ´»ï¼‰</span>
slice := []<span class="hljs-type">int</span>{<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>}
<span class="hljs-comment">// åˆ‡ç‰‡å¯ä»¥ä½¿ç”¨æ ‡å‡†åº“çš„ slices.Containsï¼ˆGo 1.21+ï¼‰</span>
<span class="hljs-comment">// import "slices"</span>
<span class="hljs-comment">// if slices.Contains(slice, 2) {</span>
<span class="hljs-comment">//     fmt.Println("åˆ‡ç‰‡åŒ…å«2")</span>
<span class="hljs-comment">// }</span>
</code></pre>
<h3 data-id="heading-10">åˆ‡ç‰‡ï¼ˆåŠ¨æ€æ•°ç»„ï¼‰</h3>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// åˆ‡ç‰‡æ˜¯åŠ¨æ€æ•°ç»„ï¼Œæ˜¯å¯¹åº•å±‚æ•°ç»„çš„å¼•ç”¨</span>
slice1 := []<span class="hljs-type">int</span>{<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>}      <span class="hljs-comment">// å­—é¢é‡åˆ›å»ºåˆ‡ç‰‡</span>
slice2 := <span class="hljs-built_in">make</span>([]<span class="hljs-type">int</span>, <span class="hljs-number">5</span>)      <span class="hljs-comment">// makeåˆ›å»ºï¼Œé•¿åº¦ä¸º5ï¼Œå®¹é‡5</span>
<span class="hljs-keyword">var</span> slice3 []<span class="hljs-type">int</span>             <span class="hljs-comment">// nilåˆ‡ç‰‡ï¼ˆé›¶å€¼ï¼‰</span>

<span class="hljs-comment">// åˆ‡ç‰‡æ“ä½œ</span>
slice1 = <span class="hljs-built_in">append</span>(slice1, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>)  <span class="hljs-comment">// è¿½åŠ å…ƒç´ ï¼Œè¿”å›æ–°åˆ‡ç‰‡</span>
<span class="hljs-built_in">copy</span>(slice2, slice1)          <span class="hljs-comment">// å¤åˆ¶åˆ‡ç‰‡å…ƒç´ </span>
fmt.Println(<span class="hljs-built_in">len</span>(slice1))       <span class="hljs-comment">// é•¿åº¦ï¼š5</span>
fmt.Println(<span class="hljs-built_in">cap</span>(slice1))       <span class="hljs-comment">// å®¹é‡ï¼ˆå¯èƒ½å¤§äºé•¿åº¦ï¼‰</span>

<span class="hljs-comment">// åˆ‡ç‰‡è¡¨è¾¾å¼ï¼ˆä»æ•°ç»„æˆ–åˆ‡ç‰‡åˆ›å»ºæ–°åˆ‡ç‰‡ï¼‰</span>
arr := [<span class="hljs-number">5</span>]<span class="hljs-type">int</span>{<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>}
s1 := arr[<span class="hljs-number">1</span>:<span class="hljs-number">4</span>]              <span class="hljs-comment">// [2,3,4]ï¼Œå·¦é—­å³å¼€åŒºé—´</span>
s2 := arr[:<span class="hljs-number">3</span>]               <span class="hljs-comment">// [1,2,3]ï¼Œä»å¼€å§‹åˆ°ç´¢å¼•3</span>
s3 := arr[<span class="hljs-number">2</span>:]               <span class="hljs-comment">// [3,4,5]ï¼Œä»ç´¢å¼•2åˆ°ç»“æŸ</span>
</code></pre>
<h3 data-id="heading-11">æ˜ å°„ï¼ˆå­—å…¸ï¼‰</h3>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// æ˜ å°„æ˜¯é”®å€¼å¯¹é›†åˆï¼Œå¼•ç”¨ç±»å‹</span>
m1 := <span class="hljs-keyword">map</span>[<span class="hljs-type">string</span>]<span class="hljs-type">int</span>{<span class="hljs-string">"a"</span>: <span class="hljs-number">1</span>, <span class="hljs-string">"b"</span>: <span class="hljs-number">2</span>}  <span class="hljs-comment">// å­—é¢é‡åˆ›å»º</span>
m2 := <span class="hljs-built_in">make</span>(<span class="hljs-keyword">map</span>[<span class="hljs-type">string</span>]<span class="hljs-type">int</span>)            <span class="hljs-comment">// makeåˆ›å»ºç©ºæ˜ å°„</span>
<span class="hljs-keyword">var</span> m3 <span class="hljs-keyword">map</span>[<span class="hljs-type">string</span>]<span class="hljs-type">int</span>                 <span class="hljs-comment">// nilæ˜ å°„ï¼ˆä¸èƒ½ç›´æ¥ä½¿ç”¨ï¼‰</span>

<span class="hljs-comment">// æ˜ å°„æ“ä½œ</span>
m1[<span class="hljs-string">"c"</span>] = <span class="hljs-number">3</span>                 <span class="hljs-comment">// æ·»åŠ /ä¿®æ”¹é”®å€¼å¯¹</span>
val := m1[<span class="hljs-string">"a"</span>]              <span class="hljs-comment">// è¯»å–å€¼ï¼š1</span>
<span class="hljs-built_in">delete</span>(m1, <span class="hljs-string">"b"</span>)             <span class="hljs-comment">// åˆ é™¤é”®å€¼å¯¹</span>

<span class="hljs-comment">// æ˜ å°„å–å€¼çš„ä¸¤ç§æ–¹å¼ï¼š</span>

<span class="hljs-comment">// æ–¹å¼1ï¼šåªæ¥æ”¶ä¸€ä¸ªå€¼ï¼ˆé»˜è®¤è¿”å›valueï¼Œå¦‚æœé”®ä¸å­˜åœ¨è¿”å›é›¶å€¼ï¼‰</span>
val := m1[<span class="hljs-string">"a"</span>]              <span class="hljs-comment">// val = 1ï¼ˆé”®å­˜åœ¨ï¼‰</span>
val2 := m1[<span class="hljs-string">"x"</span>]             <span class="hljs-comment">// val2 = 0ï¼ˆé”®ä¸å­˜åœ¨ï¼Œè¿”å›intçš„é›¶å€¼ï¼‰</span>
<span class="hljs-comment">// é—®é¢˜ï¼šæ— æ³•åŒºåˆ†æ˜¯é”®ä¸å­˜åœ¨è¿˜æ˜¯å€¼æœ¬èº«å°±æ˜¯0</span>

<span class="hljs-comment">// æ–¹å¼2ï¼šæ¥æ”¶ä¸¤ä¸ªå€¼ï¼ˆvalue å’Œ existsï¼‰</span>
value, exists := m1[<span class="hljs-string">"x"</span>]    <span class="hljs-comment">// existsä¸ºfalseï¼Œvalueä¸º0ï¼ˆinté›¶å€¼ï¼‰</span>
<span class="hljs-comment">// exists æ˜¯ bool ç±»å‹ï¼Œè¡¨ç¤ºé”®æ˜¯å¦å­˜åœ¨</span>
<span class="hljs-comment">// value æ˜¯å€¼ç±»å‹ï¼Œå¦‚æœé”®å­˜åœ¨è¿”å›å®é™…å€¼ï¼Œä¸å­˜åœ¨è¿”å›é›¶å€¼</span>

<span class="hljs-comment">// æ£€æŸ¥é”®æ˜¯å¦å­˜åœ¨ï¼ˆæ¨èä½¿ç”¨æ–¹å¼2ï¼‰</span>
<span class="hljs-keyword">if</span> val, ok := m1[<span class="hljs-string">"a"</span>]; ok {
    <span class="hljs-comment">// ok ä¸º true è¡¨ç¤ºé”®å­˜åœ¨</span>
    fmt.Println(<span class="hljs-string">"é”®å­˜åœ¨ï¼Œå€¼ä¸º:"</span>, val)  <span class="hljs-comment">// å®‰å…¨è®¿é—®</span>
} <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// ok ä¸º false è¡¨ç¤ºé”®ä¸å­˜åœ¨</span>
    fmt.Println(<span class="hljs-string">"é”®ä¸å­˜åœ¨"</span>)
}

<span class="hljs-comment">// åˆ¤æ–­å­—å…¸æ˜¯å¦åŒ…å«æŸä¸ªkeyçš„å®Œæ•´ç¤ºä¾‹</span>
m := <span class="hljs-keyword">map</span>[<span class="hljs-type">string</span>]<span class="hljs-type">int</span>{<span class="hljs-string">"apple"</span>: <span class="hljs-number">5</span>, <span class="hljs-string">"banana"</span>: <span class="hljs-number">3</span>}

<span class="hljs-comment">// æ–¹æ³•1ï¼šä½¿ç”¨ä¸¤ä¸ªè¿”å›å€¼</span>
<span class="hljs-keyword">if</span> value, exists := m[<span class="hljs-string">"apple"</span>]; exists {
    fmt.Printf(<span class="hljs-string">"é”®'apple'å­˜åœ¨ï¼Œå€¼ä¸º: %d\n"</span>, value)
} <span class="hljs-keyword">else</span> {
    fmt.Println(<span class="hljs-string">"é”®'apple'ä¸å­˜åœ¨"</span>)
}

<span class="hljs-comment">// æ–¹æ³•2ï¼šåªæ£€æŸ¥æ˜¯å¦å­˜åœ¨ï¼ˆå¿½ç•¥å€¼ï¼‰</span>
<span class="hljs-keyword">if</span> _, exists := m[<span class="hljs-string">"orange"</span>]; exists {
    fmt.Println(<span class="hljs-string">"é”®'orange'å­˜åœ¨"</span>)
} <span class="hljs-keyword">else</span> {
    fmt.Println(<span class="hljs-string">"é”®'orange'ä¸å­˜åœ¨"</span>)
}

<span class="hljs-comment">// æ–¹æ³•3ï¼šé€šè¿‡é›¶å€¼åˆ¤æ–­ï¼ˆä¸æ¨èï¼Œå› ä¸ºæ— æ³•åŒºåˆ†é›¶å€¼å’Œä¸å­˜åœ¨ï¼‰</span>
<span class="hljs-keyword">if</span> m[<span class="hljs-string">"grape"</span>] != <span class="hljs-number">0</span> {
    fmt.Println(<span class="hljs-string">"é”®'grape'å­˜åœ¨ä¸”å€¼ä¸ä¸º0"</span>)
} <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// æ— æ³•ç¡®å®šæ˜¯é”®ä¸å­˜åœ¨è¿˜æ˜¯å€¼ä¸º0</span>
    fmt.Println(<span class="hljs-string">"é”®'grape'ä¸å­˜åœ¨æˆ–å€¼ä¸º0"</span>)
}
</code></pre>
<h3 data-id="heading-12">ç»“æ„ä½“</h3>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// ç»“æ„ä½“æ˜¯è‡ªå®šä¹‰å¤åˆç±»å‹ï¼Œå€¼ç±»å‹</span>
<span class="hljs-keyword">type</span> Person <span class="hljs-keyword">struct</span> {
    Name <span class="hljs-type">string</span>              <span class="hljs-comment">// å­—æ®µåé¦–å­—æ¯å¤§å†™è¡¨ç¤ºå…¬å¼€</span>
    Age  <span class="hljs-type">int</span>
    Contact <span class="hljs-keyword">struct</span> {         <span class="hljs-comment">// åµŒå¥—ç»“æ„ä½“</span>
        Phone <span class="hljs-type">string</span>
        Email <span class="hljs-type">string</span>
    }
}

<span class="hljs-comment">// åˆ›å»ºç»“æ„ä½“å®ä¾‹</span>
p1 := Person{Name: <span class="hljs-string">"Alice"</span>, Age: <span class="hljs-number">25</span>}  <span class="hljs-comment">// å­—æ®µååˆå§‹åŒ–ï¼ˆæ¨èï¼‰</span>
p2 := Person{<span class="hljs-string">"Bob"</span>, <span class="hljs-number">30</span>}               <span class="hljs-comment">// é¡ºåºåˆå§‹åŒ–ï¼ˆéœ€æŒ‰å­—æ®µé¡ºåºï¼‰</span>
p3 := &amp;Person{Name: <span class="hljs-string">"Charlie"</span>}        <span class="hljs-comment">// åˆ›å»ºæŒ‡é’ˆï¼ŒæœªæŒ‡å®šå­—æ®µä¸ºé›¶å€¼</span>

<span class="hljs-comment">// åŒ¿åç»“æ„ä½“ï¼ˆä¸´æ—¶ä½¿ç”¨ï¼‰</span>
temp := <span class="hljs-keyword">struct</span> {
    X, Y <span class="hljs-type">int</span>
}{<span class="hljs-number">10</span>, <span class="hljs-number">20</span>}  <span class="hljs-comment">// åˆ›å»ºå¹¶åˆå§‹åŒ–</span>
</code></pre>
<h2 data-id="heading-13">å››ã€æŒ‡é’ˆä¸æ–¹æ³•ï¼ˆé‡ç‚¹ï¼šå€¼æ˜¯å¦ä¼šå˜åŒ–ï¼‰</h2>
<h3 data-id="heading-14">æŒ‡é’ˆåŸºç¡€</h3>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// æŒ‡é’ˆå­˜å‚¨å˜é‡çš„å†…å­˜åœ°å€</span>
<span class="hljs-keyword">var</span> a <span class="hljs-type">int</span> = <span class="hljs-number">42</span>
<span class="hljs-keyword">var</span> p *<span class="hljs-type">int</span> = &amp;a          <span class="hljs-comment">// pæŒ‡å‘açš„åœ°å€ï¼ˆ&amp;å–åœ°å€æ“ä½œç¬¦ï¼‰</span>
fmt.Println(*p)          <span class="hljs-comment">// é€šè¿‡æŒ‡é’ˆè®¿é—®å€¼ï¼š42ï¼ˆ*è§£å¼•ç”¨æ“ä½œç¬¦ï¼‰</span>
*p = <span class="hljs-number">100</span>                 <span class="hljs-comment">// é€šè¿‡æŒ‡é’ˆä¿®æ”¹açš„å€¼</span>
fmt.Println(a)           <span class="hljs-comment">// aå˜ä¸º100</span>

<span class="hljs-comment">// ç»“æ„ä½“æŒ‡é’ˆ</span>
<span class="hljs-keyword">type</span> Circle <span class="hljs-keyword">struct</span> { Radius <span class="hljs-type">float64</span> }
c := &amp;Circle{Radius: <span class="hljs-number">5</span>}  <span class="hljs-comment">// åˆ›å»ºç»“æ„ä½“æŒ‡é’ˆ</span>
c.Radius = <span class="hljs-number">10</span>            <span class="hljs-comment">// è‡ªåŠ¨è§£å¼•ç”¨ï¼ˆGoè¯­æ³•ç³–ï¼‰</span>
(*c).Radius = <span class="hljs-number">15</span>         <span class="hljs-comment">// æ˜¾å¼è§£å¼•ç”¨ï¼ˆæ•ˆæœç›¸åŒï¼‰</span>
</code></pre>
<h3 data-id="heading-15">å€¼æ¥æ”¶è€… vs æŒ‡é’ˆæ¥æ”¶è€…ï¼ˆå…³é”®åŒºåˆ«ï¼‰</h3>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">type</span> Counter <span class="hljs-keyword">struct</span> {
    count <span class="hljs-type">int</span>
}

<span class="hljs-comment">// å€¼æ¥æ”¶è€…æ–¹æ³• - æ¥æ”¶ç»“æ„ä½“çš„å‰¯æœ¬ï¼Œä¸ä¿®æ”¹åŸå¯¹è±¡</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(c Counter)</span></span> IncrementByValue() {
    c.count++  <span class="hljs-comment">// ä¿®æ”¹çš„æ˜¯å‰¯æœ¬ï¼Œä¸å½±å“åŸå¯¹è±¡</span>
    fmt.Printf(<span class="hljs-string">"IncrementByValueå†…éƒ¨: count = %d\n"</span>, c.count)
    <span class="hljs-comment">// æ³¨æ„ï¼šæ–¹æ³•å†…çš„ä¿®æ”¹ä¸ä¼šå½±å“å¤–éƒ¨</span>
}

<span class="hljs-comment">// æŒ‡é’ˆæ¥æ”¶è€…æ–¹æ³• - æ¥æ”¶ç»“æ„ä½“çš„æŒ‡é’ˆï¼Œå¯ä¿®æ”¹åŸå¯¹è±¡</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(c *Counter)</span></span> IncrementByPointer() {
    c.count++  <span class="hljs-comment">// é€šè¿‡æŒ‡é’ˆä¿®æ”¹åŸå¯¹è±¡</span>
    fmt.Printf(<span class="hljs-string">"IncrementByPointerå†…éƒ¨: count = %d\n"</span>, c.count)
    <span class="hljs-comment">// æ³¨æ„ï¼šæ–¹æ³•å†…çš„ä¿®æ”¹ä¼šå½±å“å¤–éƒ¨</span>
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    counter := Counter{count: <span class="hljs-number">0</span>}
    
    fmt.Printf(<span class="hljs-string">"åˆå§‹å€¼: count = %d\n"</span>, counter.count)  <span class="hljs-comment">// è¾“å‡ºï¼š0</span>
    
    <span class="hljs-comment">// æµ‹è¯•å€¼æ¥æ”¶è€…æ–¹æ³•</span>
    counter.IncrementByValue()  <span class="hljs-comment">// å†…éƒ¨è¾“å‡ºï¼šcount = 1</span>
    fmt.Printf(<span class="hljs-string">"å€¼æ¥æ”¶è€…è°ƒç”¨å: count = %d\n"</span>, counter.count)  
    <span class="hljs-comment">// è¾“å‡ºï¼š0ï¼ˆæœªæ”¹å˜ï¼åŸå¯¹è±¡æœªè¢«ä¿®æ”¹ï¼‰</span>
    
    <span class="hljs-comment">// æµ‹è¯•æŒ‡é’ˆæ¥æ”¶è€…æ–¹æ³•  </span>
    counter.IncrementByPointer()  <span class="hljs-comment">// å†…éƒ¨è¾“å‡ºï¼šcount = 1</span>
    fmt.Printf(<span class="hljs-string">"æŒ‡é’ˆæ¥æ”¶è€…è°ƒç”¨å: count = %d\n"</span>, counter.count)  
    <span class="hljs-comment">// è¾“å‡ºï¼š1ï¼ˆå·²æ”¹å˜ï¼åŸå¯¹è±¡è¢«ä¿®æ”¹ï¼‰</span>
    
    <span class="hljs-comment">// ç»“è®ºï¼š</span>
    <span class="hljs-comment">// 1. å€¼æ¥æ”¶è€…æ–¹æ³•ï¼šå†…éƒ¨ä¿®æ”¹ä¸å½±å“å¤–éƒ¨ï¼ˆæ“ä½œçš„æ˜¯å‰¯æœ¬ï¼‰</span>
    <span class="hljs-comment">// 2. æŒ‡é’ˆæ¥æ”¶è€…æ–¹æ³•ï¼šå†…éƒ¨ä¿®æ”¹å½±å“å¤–éƒ¨ï¼ˆæ“ä½œçš„æ˜¯åŸå¯¹è±¡ï¼‰</span>
}
</code></pre>
<h3 data-id="heading-16">è‡ªåŠ¨è½¬æ¢æœºåˆ¶</h3>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">type</span> Circle <span class="hljs-keyword">struct</span> {
    Radius <span class="hljs-type">float64</span>
}

<span class="hljs-comment">// å€¼æ¥æ”¶è€…æ–¹æ³•ï¼ˆåªè¯»ï¼Œä¸ä¿®æ”¹ï¼‰</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(c Circle)</span></span> Area() <span class="hljs-type">float64</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-number">3.14</span> * c.Radius * c.Radius
}

<span class="hljs-comment">// æŒ‡é’ˆæ¥æ”¶è€…æ–¹æ³•ï¼ˆå¯ä¿®æ”¹ï¼‰</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(c *Circle)</span></span> Scale(factor <span class="hljs-type">float64</span>) {
    c.Radius *= factor
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    <span class="hljs-comment">// æƒ…å†µ1ï¼šå€¼ç±»å‹å˜é‡è°ƒç”¨æŒ‡é’ˆæ¥æ”¶è€…æ–¹æ³•</span>
    c1 := Circle{Radius: <span class="hljs-number">5</span>}
    c1.Scale(<span class="hljs-number">2</span>)  <span class="hljs-comment">// Goè‡ªåŠ¨è½¬æ¢ä¸º: (&amp;c1).Scale(2)</span>
    fmt.Printf(<span class="hljs-string">"c1åŠå¾„: %.2f\n"</span>, c1.Radius)  <span class="hljs-comment">// è¾“å‡ºï¼š10.00ï¼ˆåŸå¯¹è±¡è¢«ä¿®æ”¹ï¼‰</span>
    
    <span class="hljs-comment">// æƒ…å†µ2ï¼šæŒ‡é’ˆç±»å‹å˜é‡è°ƒç”¨å€¼æ¥æ”¶è€…æ–¹æ³•</span>
    c2 := &amp;Circle{Radius: <span class="hljs-number">5</span>}
    area := c2.Area()  <span class="hljs-comment">// Goè‡ªåŠ¨è½¬æ¢ä¸º: (*c2).Area()</span>
    fmt.Printf(<span class="hljs-string">"c2é¢ç§¯: %.2f\n"</span>, area)  <span class="hljs-comment">// è¾“å‡ºï¼š78.50ï¼ˆè®¡ç®—ç»“æœï¼ŒåŸå¯¹è±¡æœªä¿®æ”¹ï¼‰</span>
    
    <span class="hljs-comment">// Goçš„ä¾¿åˆ©æ€§ï¼šæ— è®ºå€¼ç±»å‹è¿˜æ˜¯æŒ‡é’ˆç±»å‹ï¼Œéƒ½å¯ä»¥è°ƒç”¨ä¸¤ç§æ–¹æ³•</span>
    <span class="hljs-comment">// ç¼–è¯‘å™¨ä¼šè‡ªåŠ¨å¤„ç† &amp; å’Œ * çš„è½¬æ¢</span>
}
</code></pre>
<h3 data-id="heading-17">æ–¹æ³•æ¥æ”¶è€…é€‰æ‹©åŸåˆ™</h3>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// å€¼æ¥æ”¶è€…é€‚ç”¨åœºæ™¯ï¼š</span>
<span class="hljs-comment">// 1. æ–¹æ³•ä¸éœ€è¦ä¿®æ”¹æ¥æ”¶è€…</span>
<span class="hljs-comment">// 2. æ¥æ”¶è€…æ˜¯å°å‹ç»“æ„ä½“ï¼ˆé¿å…å¤åˆ¶å¼€é”€ï¼‰</span>
<span class="hljs-comment">// 3. éœ€è¦ä¸å¯å˜æ€§</span>

<span class="hljs-comment">// æŒ‡é’ˆæ¥æ”¶è€…é€‚ç”¨åœºæ™¯ï¼š</span>
<span class="hljs-comment">// 1. æ–¹æ³•éœ€è¦ä¿®æ”¹æ¥æ”¶è€…</span>
<span class="hljs-comment">// 2. æ¥æ”¶è€…æ˜¯å¤§å‹ç»“æ„ä½“ï¼ˆé¿å…å¤åˆ¶å¼€é”€ï¼‰</span>
<span class="hljs-comment">// 3. ä¿è¯ä¸€è‡´æ€§ï¼ˆå¦‚ç¼“å­˜ã€è¿æ¥ç­‰ï¼‰</span>
<span class="hljs-comment">// 4. å®ç°æŸäº›æ¥å£æ—¶</span>

<span class="hljs-comment">// ä¸€è‡´æ€§åŸåˆ™ï¼šåŒä¸€ç±»å‹çš„å¤šä¸ªæ–¹æ³•åº”è¯¥ä½¿ç”¨ç›¸åŒç±»å‹çš„æ¥æ”¶è€…</span>
</code></pre>
<h2 data-id="heading-18">äº”ã€æ§åˆ¶æµ</h2>
<h3 data-id="heading-19">if - æ¡ä»¶åˆ¤æ–­</h3>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// åŸºç¡€ifè¯­å¥</span>
<span class="hljs-keyword">if</span> age &gt;= <span class="hljs-number">18</span> {
    fmt.Println(<span class="hljs-string">"æˆå¹´äºº"</span>)
}

<span class="hljs-comment">// if-elseé“¾</span>
<span class="hljs-keyword">if</span> score &gt;= <span class="hljs-number">90</span> {
    fmt.Println(<span class="hljs-string">"ä¼˜ç§€"</span>)
} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> score &gt;= <span class="hljs-number">80</span> {
    fmt.Println(<span class="hljs-string">"è‰¯å¥½"</span>)  
} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> score &gt;= <span class="hljs-number">60</span> {
    fmt.Println(<span class="hljs-string">"åŠæ ¼"</span>)
} <span class="hljs-keyword">else</span> {
    fmt.Println(<span class="hljs-string">"ä¸åŠæ ¼"</span>)
}

<span class="hljs-comment">// ifå¸¦åˆå§‹åŒ–è¯­å¥ï¼ˆå˜é‡ä½œç”¨åŸŸä»…åœ¨ifå—å†…ï¼‰</span>
<span class="hljs-comment">// è¯­æ³•ï¼šif åˆå§‹åŒ–è¯­å¥; æ¡ä»¶è¡¨è¾¾å¼ { ... }</span>
<span class="hljs-keyword">if</span> err := process(); err != <span class="hljs-literal">nil</span> {
    fmt.Printf(<span class="hljs-string">"å¤„ç†å‡ºé”™: %v\n"</span>, err)
}
<span class="hljs-comment">// erråœ¨è¿™é‡Œä¸å¯è®¿é—®ï¼ˆä½œç”¨åŸŸä»…åœ¨ifå—å†…ï¼‰</span>

<span class="hljs-comment">// åˆ¤æ–­å˜é‡æ˜¯å¦ä¸ºnil</span>
<span class="hljs-keyword">if</span> data != <span class="hljs-literal">nil</span> {
    fmt.Println(<span class="hljs-string">"æ•°æ®æœ‰æ•ˆ"</span>)
}

<span class="hljs-comment">// if è¯­å¥çš„è¯¦ç»†è¯­æ³•è¯´æ˜</span>
<span class="hljs-comment">// 1. åŸºç¡€è¯­æ³•ï¼šif æ¡ä»¶è¡¨è¾¾å¼ { ... }</span>
<span class="hljs-keyword">if</span> x &gt; <span class="hljs-number">0</span> {
    fmt.Println(<span class="hljs-string">"xæ˜¯æ­£æ•°"</span>)
}

<span class="hljs-comment">// 2. if-else è¯­æ³•</span>
<span class="hljs-keyword">if</span> x &gt; <span class="hljs-number">0</span> {
    fmt.Println(<span class="hljs-string">"æ­£æ•°"</span>)
} <span class="hljs-keyword">else</span> {
    fmt.Println(<span class="hljs-string">"éæ­£æ•°"</span>)
}

<span class="hljs-comment">// 3. if-else if-else é“¾</span>
<span class="hljs-keyword">if</span> x &gt; <span class="hljs-number">0</span> {
    fmt.Println(<span class="hljs-string">"æ­£æ•°"</span>)
} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> x &lt; <span class="hljs-number">0</span> {
    fmt.Println(<span class="hljs-string">"è´Ÿæ•°"</span>)
} <span class="hljs-keyword">else</span> {
    fmt.Println(<span class="hljs-string">"é›¶"</span>)
}

<span class="hljs-comment">// 4. if å¸¦åˆå§‹åŒ–è¯­å¥ï¼ˆé‡è¦è¯­æ³•ï¼‰</span>
<span class="hljs-comment">// æ ¼å¼ï¼šif åˆå§‹åŒ–è¯­å¥; æ¡ä»¶è¡¨è¾¾å¼ { ... }</span>
<span class="hljs-comment">// åˆå§‹åŒ–è¯­å¥å¯ä»¥æ˜¯å˜é‡å£°æ˜ã€èµ‹å€¼ã€å‡½æ•°è°ƒç”¨ç­‰</span>
<span class="hljs-comment">// å˜é‡ä½œç”¨åŸŸä»…åœ¨ if-else å—å†…</span>

<span class="hljs-comment">// ç¤ºä¾‹1ï¼šå£°æ˜å¹¶åˆ¤æ–­</span>
<span class="hljs-keyword">if</span> val, ok := m1[<span class="hljs-string">"a"</span>]; ok {
    <span class="hljs-comment">// è¿™é‡Œ val å’Œ ok éƒ½å¯ä»¥ä½¿ç”¨</span>
    fmt.Println(<span class="hljs-string">"é”®å­˜åœ¨ï¼Œå€¼ä¸º:"</span>, val)
} <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// è¿™é‡Œ val å’Œ ok ä¹Ÿå¯ä»¥ä½¿ç”¨ï¼ˆelseå—å†…ï¼‰</span>
    fmt.Println(<span class="hljs-string">"é”®ä¸å­˜åœ¨"</span>)
}
<span class="hljs-comment">// val å’Œ ok åœ¨è¿™é‡Œä¸å¯è®¿é—®ï¼ˆè¶…å‡ºä½œç”¨åŸŸï¼‰</span>

<span class="hljs-comment">// ç¤ºä¾‹2ï¼šå‡½æ•°è°ƒç”¨å¹¶åˆ¤æ–­é”™è¯¯</span>
<span class="hljs-keyword">if</span> err := process(); err != <span class="hljs-literal">nil</span> {
    fmt.Printf(<span class="hljs-string">"å¤„ç†å‡ºé”™: %v\n"</span>, err)
    <span class="hljs-keyword">return</span>  <span class="hljs-comment">// æ—©æœŸè¿”å›</span>
}
<span class="hljs-comment">// err åœ¨è¿™é‡Œä¸å¯è®¿é—®</span>

<span class="hljs-comment">// ç¤ºä¾‹3ï¼šå¤šä¸ªåˆå§‹åŒ–è¯­å¥ï¼ˆç”¨é€—å·åˆ†éš”ï¼‰</span>
<span class="hljs-keyword">if</span> x, y := <span class="hljs-number">1</span>, <span class="hljs-number">2</span>; x &lt; y {
    fmt.Println(<span class="hljs-string">"xå°äºy"</span>)
}

<span class="hljs-comment">// 5. åµŒå¥—ifè¯­å¥</span>
<span class="hljs-keyword">if</span> x &gt; <span class="hljs-number">0</span> {
    <span class="hljs-keyword">if</span> y &gt; <span class="hljs-number">0</span> {
        fmt.Println(<span class="hljs-string">"xå’Œyéƒ½æ˜¯æ­£æ•°"</span>)
    }
}

<span class="hljs-comment">// 6. é€»è¾‘è¿ç®—ç¬¦ç»„åˆæ¡ä»¶</span>
<span class="hljs-keyword">if</span> x &gt; <span class="hljs-number">0</span> &amp;&amp; y &gt; <span class="hljs-number">0</span> {
    fmt.Println(<span class="hljs-string">"xå’Œyéƒ½æ˜¯æ­£æ•°"</span>)
}

<span class="hljs-keyword">if</span> x &gt; <span class="hljs-number">0</span> || y &gt; <span class="hljs-number">0</span> {
    fmt.Println(<span class="hljs-string">"xæˆ–yè‡³å°‘ä¸€ä¸ªæ˜¯æ­£æ•°"</span>)
}

<span class="hljs-comment">// 7. ç±»å‹æ–­è¨€ï¼ˆç»“åˆifä½¿ç”¨ï¼‰</span>
<span class="hljs-keyword">var</span> val <span class="hljs-keyword">interface</span>{} = <span class="hljs-string">"hello"</span>
<span class="hljs-keyword">if</span> str, ok := val.(<span class="hljs-type">string</span>); ok {
    fmt.Println(<span class="hljs-string">"æ˜¯å­—ç¬¦ä¸²:"</span>, str)
}
</code></pre>
<h3 data-id="heading-20">switch - å¤šåˆ†æ”¯é€‰æ‹©</h3>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// åŸºç¡€switchï¼ˆåŒ¹é…å€¼ï¼‰</span>
<span class="hljs-keyword">switch</span> day {
<span class="hljs-keyword">case</span> <span class="hljs-string">"Monday"</span>, <span class="hljs-string">"Tuesday"</span>, <span class="hljs-string">"Wednesday"</span>, <span class="hljs-string">"Thursday"</span>, <span class="hljs-string">"Friday"</span>:
    fmt.Println(<span class="hljs-string">"å·¥ä½œæ—¥"</span>)
<span class="hljs-keyword">case</span> <span class="hljs-string">"Saturday"</span>, <span class="hljs-string">"Sunday"</span>:
    fmt.Println(<span class="hljs-string">"å‘¨æœ«"</span>)
<span class="hljs-keyword">default</span>:
    fmt.Println(<span class="hljs-string">"æ— æ•ˆæ—¥æœŸ"</span>)
}

<span class="hljs-comment">// switchæ— è¡¨è¾¾å¼ï¼ˆç›¸å½“äºif-elseé“¾ï¼Œæ›´æ¸…æ™°ï¼‰</span>
<span class="hljs-keyword">switch</span> {
<span class="hljs-keyword">case</span> score &gt;= <span class="hljs-number">90</span>:
    fmt.Println(<span class="hljs-string">"A"</span>)
<span class="hljs-keyword">case</span> score &gt;= <span class="hljs-number">80</span>:
    fmt.Println(<span class="hljs-string">"B"</span>)
<span class="hljs-keyword">case</span> score &gt;= <span class="hljs-number">70</span>:
    fmt.Println(<span class="hljs-string">"C"</span>)
<span class="hljs-keyword">default</span>:
    fmt.Println(<span class="hljs-string">"D"</span>)
}

<span class="hljs-comment">// fallthroughå…³é”®å­—ï¼ˆç»§ç»­æ‰§è¡Œä¸‹ä¸€ä¸ªcaseï¼Œä¸æ¨èä½¿ç”¨ï¼‰</span>
<span class="hljs-keyword">switch</span> num {
<span class="hljs-keyword">case</span> <span class="hljs-number">1</span>:
    fmt.Println(<span class="hljs-string">"1"</span>)
    <span class="hljs-keyword">fallthrough</span>  <span class="hljs-comment">// ç»§ç»­æ‰§è¡Œcase 2ï¼ˆä¸æ£€æŸ¥æ¡ä»¶ï¼‰</span>
<span class="hljs-keyword">case</span> <span class="hljs-number">2</span>:
    fmt.Println(<span class="hljs-string">"2"</span>)  <span class="hljs-comment">// å³ä½¿num=1ä¹Ÿä¼šæ‰§è¡Œè¿™é‡Œ</span>
<span class="hljs-keyword">case</span> <span class="hljs-number">3</span>:
    fmt.Println(<span class="hljs-string">"3"</span>)
}
</code></pre>
<h3 data-id="heading-21">for - å¾ªç¯</h3>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// ä¼ ç»Ÿforå¾ªç¯</span>
<span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++ {
    fmt.Println(i)
}

<span class="hljs-comment">// whileé£æ ¼ï¼ˆGoæ²¡æœ‰whileå…³é”®å­—ï¼Œç”¨forä»£æ›¿ï¼‰</span>
count := <span class="hljs-number">0</span>
<span class="hljs-keyword">for</span> count &lt; <span class="hljs-number">5</span> {
    fmt.Println(count)
    count++
}

<span class="hljs-comment">// æ— é™å¾ªç¯ï¼ˆå¿…é¡»æœ‰breakæˆ–returné€€å‡ºï¼‰</span>
<span class="hljs-keyword">for</span> {
    <span class="hljs-keyword">if</span> condition {
        <span class="hljs-keyword">break</span>  <span class="hljs-comment">// è·³å‡ºå¾ªç¯</span>
    }
}

<span class="hljs-comment">// rangeéå†ï¼ˆæ•°ç»„ã€åˆ‡ç‰‡ã€å­—ç¬¦ä¸²ã€æ˜ å°„ã€ç®¡é“ï¼‰</span>
<span class="hljs-keyword">for</span> index, value := <span class="hljs-keyword">range</span> []<span class="hljs-type">int</span>{<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>} {
    fmt.Printf(<span class="hljs-string">"ç´¢å¼•: %d, å€¼: %d\n"</span>, index, value)
}

<span class="hljs-comment">// å¿½ç•¥ç´¢å¼•æˆ–å€¼ï¼ˆä½¿ç”¨ä¸‹åˆ’çº¿ï¼‰</span>
<span class="hljs-keyword">for</span> _, value := <span class="hljs-keyword">range</span> slice {  <span class="hljs-comment">// å¿½ç•¥ç´¢å¼•</span>
    fmt.Println(value)
}

<span class="hljs-keyword">for</span> key := <span class="hljs-keyword">range</span> <span class="hljs-keyword">map</span> {          <span class="hljs-comment">// å¿½ç•¥å€¼</span>
    fmt.Println(key)
}
</code></pre>
<h3 data-id="heading-22">break å’Œ continue</h3>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// break - è·³å‡ºå¾ªç¯</span>
<span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++ {
    <span class="hljs-keyword">if</span> i == <span class="hljs-number">5</span> {
        <span class="hljs-keyword">break</span>  <span class="hljs-comment">// å½“i=5æ—¶è·³å‡ºå¾ªç¯</span>
    }
    fmt.Println(i)  <span class="hljs-comment">// åªæ‰“å°0-4</span>
}

<span class="hljs-comment">// å¸¦æ ‡ç­¾çš„breakï¼ˆè·³å‡ºå¤šå±‚å¾ªç¯ï¼‰</span>
outer:
<span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">3</span>; i++ {
    <span class="hljs-keyword">for</span> j := <span class="hljs-number">0</span>; j &lt; <span class="hljs-number">3</span>; j++ {
        <span class="hljs-keyword">if</span> i == <span class="hljs-number">1</span> &amp;&amp; j == <span class="hljs-number">1</span> {
            <span class="hljs-keyword">break</span> outer  <span class="hljs-comment">// ç›´æ¥è·³å‡ºå¤–å±‚å¾ªç¯</span>
        }
        fmt.Printf(<span class="hljs-string">"(%d,%d) "</span>, i, j)
    }
}

<span class="hljs-comment">// continue - è·³è¿‡å½“å‰è¿­ä»£</span>
<span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++ {
    <span class="hljs-keyword">if</span> i%<span class="hljs-number">2</span> == <span class="hljs-number">0</span> {
        <span class="hljs-keyword">continue</span>  <span class="hljs-comment">// è·³è¿‡å¶æ•°</span>
    }
    fmt.Println(i)  <span class="hljs-comment">// åªæ‰“å°å¥‡æ•°ï¼š1,3,5,7,9</span>
}
</code></pre>
<h2 data-id="heading-23">å…­ã€å‡½æ•°</h2>
<h3 data-id="heading-24">å‡½æ•°å®šä¹‰</h3>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// åŸºæœ¬å‡½æ•°å®šä¹‰</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">add</span><span class="hljs-params">(a <span class="hljs-type">int</span>, b <span class="hljs-type">int</span>)</span></span> <span class="hljs-type">int</span> {
    <span class="hljs-keyword">return</span> a + b
}

<span class="hljs-comment">// å‚æ•°ç±»å‹ç®€å†™ï¼ˆç›¸åŒç±»å‹å¯åˆå¹¶ï¼‰</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">multiply</span><span class="hljs-params">(x, y <span class="hljs-type">float64</span>)</span></span> <span class="hljs-type">float64</span> {
    <span class="hljs-keyword">return</span> x * y
}

<span class="hljs-comment">// å¤šè¿”å›å€¼ï¼ˆGoçš„ç‰¹è‰²ï¼‰</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">divide</span><span class="hljs-params">(a, b <span class="hljs-type">float64</span>)</span></span> (<span class="hljs-type">float64</span>, <span class="hljs-type">error</span>) {
    <span class="hljs-keyword">if</span> b == <span class="hljs-number">0</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>, fmt.Errorf(<span class="hljs-string">"é™¤é›¶é”™è¯¯"</span>)  <span class="hljs-comment">// è¿”å›é”™è¯¯</span>
    }
    <span class="hljs-keyword">return</span> a / b, <span class="hljs-literal">nil</span>  <span class="hljs-comment">// è¿”å›ç»“æœå’Œnilï¼ˆæ— é”™è¯¯ï¼‰</span>
}

<span class="hljs-comment">// å‘½åè¿”å›å€¼ï¼ˆå¯ç›´æ¥ä¸ºè¿”å›å€¼èµ‹å€¼ï¼‰</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">getCoordinates</span><span class="hljs-params">()</span></span> (x <span class="hljs-type">int</span>, y <span class="hljs-type">int</span>) {
    x = <span class="hljs-number">10</span>  <span class="hljs-comment">// ç›´æ¥ä¸ºè¿”å›å€¼èµ‹å€¼</span>
    y = <span class="hljs-number">20</span>
    <span class="hljs-keyword">return</span>  <span class="hljs-comment">// è‡ªåŠ¨è¿”å› x, yï¼ˆè£¸è¿”å›ï¼‰</span>
}

<span class="hljs-comment">// å¯å˜å‚æ•°å‡½æ•°ï¼ˆå‚æ•°æ•°é‡å¯å˜ï¼‰</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">sum</span><span class="hljs-params">(numbers ...<span class="hljs-type">int</span>)</span></span> <span class="hljs-type">int</span> {
    total := <span class="hljs-number">0</span>
    <span class="hljs-keyword">for</span> _, n := <span class="hljs-keyword">range</span> numbers {
        total += n
    }
    <span class="hljs-keyword">return</span> total
}
<span class="hljs-comment">// è°ƒç”¨ï¼šsum(1, 2, 3) æˆ– sum(1, 2, 3, 4, 5)</span>
</code></pre>
<h3 data-id="heading-25">defer - å»¶è¿Ÿæ‰§è¡Œ</h3>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// defer å°†å‡½æ•°è°ƒç”¨æ¨è¿Ÿåˆ°å¤–å±‚å‡½æ•°è¿”å›æ—¶æ‰§è¡Œ</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">readFile</span><span class="hljs-params">(filename <span class="hljs-type">string</span>)</span></span> <span class="hljs-type">error</span> {
    file, err := os.Open(filename)
    <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
        <span class="hljs-keyword">return</span> err
    }
    <span class="hljs-keyword">defer</span> file.Close()  <span class="hljs-comment">// ç¡®ä¿å‡½æ•°è¿”å›å‰å…³é—­æ–‡ä»¶ï¼ˆæ— è®ºæ˜¯å¦å‡ºé”™ï¼‰</span>
    
    <span class="hljs-comment">// å¤„ç†æ–‡ä»¶å†…å®¹...</span>
    <span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>
}

<span class="hljs-comment">// å¤šä¸ªdeferæŒ‰åè¿›å…ˆå‡º(LIFO)é¡ºåºæ‰§è¡Œ</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">test</span><span class="hljs-params">()</span></span> {
    <span class="hljs-keyword">defer</span> fmt.Println(<span class="hljs-string">"ç¬¬ä¸€ä¸ªdefer"</span>)
    <span class="hljs-keyword">defer</span> fmt.Println(<span class="hljs-string">"ç¬¬äºŒä¸ªdefer"</span>)
    <span class="hljs-keyword">defer</span> fmt.Println(<span class="hljs-string">"ç¬¬ä¸‰ä¸ªdefer"</span>)
    fmt.Println(<span class="hljs-string">"å‡½æ•°ä½“"</span>)
}
<span class="hljs-comment">// è¾“å‡ºé¡ºåºï¼šå‡½æ•°ä½“ â†’ ç¬¬ä¸‰ä¸ªdefer â†’ ç¬¬äºŒä¸ªdefer â†’ ç¬¬ä¸€ä¸ªdefer</span>
</code></pre>
<h3 data-id="heading-26">panic å’Œ recover</h3>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// panic ä½¿ç¨‹åºå´©æºƒï¼Œæ‰“å°é”™è¯¯ä¿¡æ¯å¹¶ç»ˆæ­¢</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">divide</span><span class="hljs-params">(a, b <span class="hljs-type">int</span>)</span></span> <span class="hljs-type">int</span> {
    <span class="hljs-keyword">if</span> b == <span class="hljs-number">0</span> {
        <span class="hljs-built_in">panic</span>(<span class="hljs-string">"é™¤æ•°ä¸èƒ½ä¸ºé›¶"</span>)  <span class="hljs-comment">// å¼•å‘panicï¼Œç¨‹åºç»ˆæ­¢</span>
    }
    <span class="hljs-keyword">return</span> a / b
}

<span class="hljs-comment">// recover æ•è·panicï¼Œåªèƒ½åœ¨deferå‡½æ•°ä¸­è°ƒç”¨</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">safeDivide</span><span class="hljs-params">(a, b <span class="hljs-type">int</span>)</span></span> (result <span class="hljs-type">int</span>, err <span class="hljs-type">error</span>) {
    <span class="hljs-keyword">defer</span> <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">()</span></span> {
        <span class="hljs-keyword">if</span> r := <span class="hljs-built_in">recover</span>(); r != <span class="hljs-literal">nil</span> {  <span class="hljs-comment">// æ•è·panic</span>
            err = fmt.Errorf(<span class="hljs-string">"å‘ç”Ÿé”™è¯¯: %v"</span>, r)
            result = <span class="hljs-number">0</span>
        }
    }()
    
    <span class="hljs-keyword">if</span> b == <span class="hljs-number">0</span> {
        <span class="hljs-built_in">panic</span>(<span class="hljs-string">"é™¤é›¶é”™è¯¯"</span>)  <span class="hljs-comment">// è§¦å‘panic</span>
    }
    <span class="hljs-keyword">return</span> a / b, <span class="hljs-literal">nil</span>
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    result, err := safeDivide(<span class="hljs-number">10</span>, <span class="hljs-number">0</span>)
    <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
        fmt.Println(<span class="hljs-string">"é”™è¯¯:"</span>, err)  <span class="hljs-comment">// è¾“å‡ºï¼šé”™è¯¯: å‘ç”Ÿé”™è¯¯: é™¤é›¶é”™è¯¯</span>
    } <span class="hljs-keyword">else</span> {
        fmt.Println(<span class="hljs-string">"ç»“æœ:"</span>, result)
    }
}
</code></pre>
<h2 data-id="heading-27">ä¸ƒã€æ¥å£</h2>
<h3 data-id="heading-28">æ¥å£å®šä¹‰ä¸å®ç°</h3>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// æ¥å£å®šä¹‰ä¸€ç»„æ–¹æ³•ç­¾å</span>
<span class="hljs-keyword">type</span> Shape <span class="hljs-keyword">interface</span> {
    Area() <span class="hljs-type">float64</span>
    Perimeter() <span class="hljs-type">float64</span>
}

<span class="hljs-comment">// å®ç°æ¥å£ï¼ˆåªè¦å®ç°äº†æ‰€æœ‰æ–¹æ³•ï¼Œå°±è‡ªåŠ¨å®ç°äº†æ¥å£ï¼‰</span>
<span class="hljs-keyword">type</span> Rectangle <span class="hljs-keyword">struct</span> {
    Width, Height <span class="hljs-type">float64</span>
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(r Rectangle)</span></span> Area() <span class="hljs-type">float64</span> {
    <span class="hljs-keyword">return</span> r.Width * r.Height
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(r Rectangle)</span></span> Perimeter() <span class="hljs-type">float64</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-number">2</span> * (r.Width + r.Height)
}

<span class="hljs-comment">// ä½¿ç”¨æ¥å£</span>
<span class="hljs-keyword">var</span> s Shape = Rectangle{Width: <span class="hljs-number">3</span>, Height: <span class="hljs-number">4</span>}
area := s.Area()  <span class="hljs-comment">// 12</span>
</code></pre>
<h3 data-id="heading-29">interface{} vs anyï¼ˆGo 1.18+ï¼‰</h3>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// any æ˜¯ interface{} çš„ç±»å‹åˆ«åï¼ˆGo 1.18å¼•å…¥ï¼‰</span>
<span class="hljs-comment">// ä¸¤è€…å®Œå…¨ç­‰ä»·ï¼Œå¯ä»¥äº’æ¢ä½¿ç”¨</span>

<span class="hljs-comment">// ä½¿ç”¨ interface{} ï¼ˆä¼ ç»Ÿå†™æ³•ï¼Œå…¼å®¹æ—§ä»£ç ï¼‰</span>
<span class="hljs-keyword">var</span> v1 <span class="hljs-keyword">interface</span>{} = <span class="hljs-number">42</span>
<span class="hljs-keyword">var</span> v2 <span class="hljs-keyword">interface</span>{} = <span class="hljs-string">"hello"</span>

<span class="hljs-comment">// ä½¿ç”¨ any ï¼ˆæ¨èï¼Œæ›´ç®€æ´ï¼‰</span>
<span class="hljs-keyword">var</span> v3 any = <span class="hljs-number">42</span>
<span class="hljs-keyword">var</span> v4 any = <span class="hljs-string">"hello"</span>

<span class="hljs-comment">// ä¸¤è€…å¯ä»¥äº’ç›¸èµ‹å€¼</span>
v1 = v3  <span class="hljs-comment">// âœ… å®Œå…¨å…¼å®¹</span>
v3 = v1  <span class="hljs-comment">// âœ… å®Œå…¨å…¼å®¹</span>

<span class="hljs-comment">// å‡½æ•°å‚æ•°ä¸­ä½¿ç”¨</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">PrintValue</span><span class="hljs-params">(v <span class="hljs-keyword">interface</span>{})</span></span> {
    fmt.Println(v)
}

<span class="hljs-comment">// ç­‰ä»·äºï¼ˆæ¨èä½¿ç”¨anyï¼‰</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">PrintValueAny</span><span class="hljs-params">(v any)</span></span> {
    fmt.Println(v)
}

<span class="hljs-comment">// ä½•æ—¶ä½¿ç”¨ interface{} vs anyï¼š</span>
<span class="hljs-comment">// 1. æ–°ä»£ç ä¸­ä¼˜å…ˆä½¿ç”¨ anyï¼Œæ›´ç®€æ´æ˜“è¯»</span>
<span class="hljs-comment">// 2. ç»´æŠ¤æ—§ä»£ç æ—¶ä¿æŒ interface{} ä»¥ä¿æŒä¸€è‡´æ€§</span>
<span class="hljs-comment">// 3. åœ¨æ³›å‹ä»£ç ä¸­å¿…é¡»ä½¿ç”¨ anyï¼ˆä¸ç±»å‹çº¦æŸé…åˆï¼‰</span>

<span class="hljs-comment">// ç±»å‹æ–­è¨€ï¼ˆæ£€æŸ¥å¹¶è½¬æ¢ç±»å‹ï¼‰</span>
<span class="hljs-keyword">var</span> data any = []<span class="hljs-type">int</span>{<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>}
<span class="hljs-keyword">if</span> slice, ok := data.([]<span class="hljs-type">int</span>); ok {
    fmt.Println(<span class="hljs-string">"æ˜¯intåˆ‡ç‰‡:"</span>, slice)
}

<span class="hljs-comment">// ç±»å‹switchï¼ˆæ ¹æ®ç±»å‹åˆ†æ”¯å¤„ç†ï¼‰</span>
<span class="hljs-keyword">switch</span> v := data.(<span class="hljs-keyword">type</span>) {
<span class="hljs-keyword">case</span> []<span class="hljs-type">int</span>:
    fmt.Println(<span class="hljs-string">"intåˆ‡ç‰‡ï¼Œé•¿åº¦:"</span>, <span class="hljs-built_in">len</span>(v))
<span class="hljs-keyword">case</span> <span class="hljs-type">string</span>:
    fmt.Println(<span class="hljs-string">"å­—ç¬¦ä¸²:"</span>, v)
<span class="hljs-keyword">default</span>:
    fmt.Printf(<span class="hljs-string">"å…¶ä»–ç±»å‹: %T\n"</span>, v)
}
</code></pre>
<h2 data-id="heading-30">å…«ã€å¹¶å‘ç¼–ç¨‹</h2>
<h3 data-id="heading-31">goroutineï¼ˆè½»é‡çº§çº¿ç¨‹ï¼‰</h3>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// go å…³é”®å­—å¯åŠ¨ä¸€ä¸ªæ–°çš„goroutineï¼ˆå¼‚æ­¥æ‰§è¡Œï¼‰</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">sayHello</span><span class="hljs-params">()</span></span> {
    fmt.Println(<span class="hljs-string">"Hello from goroutine"</span>)
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    <span class="hljs-comment">// å¯åŠ¨goroutineï¼ˆå¼‚æ­¥æ‰§è¡Œï¼Œä¸é˜»å¡ä¸»ç¨‹åºï¼‰</span>
    <span class="hljs-keyword">go</span> sayHello()
    
    <span class="hljs-comment">// ä¸»goroutineç»§ç»­æ‰§è¡Œ</span>
    fmt.Println(<span class="hljs-string">"Hello from main"</span>)
    
    <span class="hljs-comment">// ç­‰å¾…ä¸€ä¸‹è®©goroutineæœ‰æœºä¼šæ‰§è¡Œï¼ˆå®é™…åº”ç”¨åº”è¯¥ç”¨WaitGroupæˆ–channelï¼‰</span>
    time.Sleep(<span class="hljs-number">100</span> * time.Millisecond)
}

<span class="hljs-comment">// å¯åŠ¨åŒ¿åå‡½æ•°goroutine</span>
<span class="hljs-keyword">go</span> <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(msg <span class="hljs-type">string</span>)</span></span> {
    fmt.Println(msg)
}(<span class="hljs-string">"Hello from goroutine"</span>)

<span class="hljs-comment">// æ³¨æ„ï¼šå¦‚æœä¸»goroutineé€€å‡ºï¼Œæ‰€æœ‰å­goroutineéƒ½ä¼šç»ˆæ­¢</span>
</code></pre>
<h3 data-id="heading-32">channelï¼ˆç®¡é“ï¼‰</h3>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// channel æ˜¯goroutineé—´é€šä¿¡çš„ç®¡é“</span>
ch := <span class="hljs-built_in">make</span>(<span class="hljs-keyword">chan</span> <span class="hljs-type">int</span>)            <span class="hljs-comment">// åˆ›å»ºæ— ç¼“å†²ç®¡é“</span>
ch := <span class="hljs-built_in">make</span>(<span class="hljs-keyword">chan</span> <span class="hljs-type">int</span>, <span class="hljs-number">3</span>)         <span class="hljs-comment">// åˆ›å»ºç¼“å†²å¤§å°ä¸º3çš„ç®¡é“</span>

<span class="hljs-comment">// å‘é€å’Œæ¥æ”¶æ•°æ®</span>
ch &lt;- <span class="hljs-number">42</span>                        <span class="hljs-comment">// å‘é€æ•°æ®åˆ°ç®¡é“ï¼ˆé˜»å¡ç›´åˆ°æœ‰æ¥æ”¶è€…ï¼‰</span>
value := &lt;-ch                   <span class="hljs-comment">// ä»ç®¡é“æ¥æ”¶æ•°æ®ï¼ˆé˜»å¡ç›´åˆ°æœ‰æ•°æ®ï¼‰</span>

<span class="hljs-comment">// å…³é—­ç®¡é“ï¼ˆåªèƒ½ç”±å‘é€è€…å…³é—­ï¼‰</span>
<span class="hljs-built_in">close</span>(ch)
value, ok := &lt;-ch               <span class="hljs-comment">// okä¸ºfalseè¡¨ç¤ºç®¡é“å·²å…³é—­</span>

<span class="hljs-comment">// éå†ç®¡é“ï¼ˆç›´åˆ°ç®¡é“å…³é—­ï¼‰</span>
<span class="hljs-keyword">for</span> value := <span class="hljs-keyword">range</span> ch {
    fmt.Println(value)
}

<span class="hljs-comment">// ç®¡é“æ–¹å‘é™å®šï¼ˆæé«˜ç±»å‹å®‰å…¨ï¼‰</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">producer</span><span class="hljs-params">(ch <span class="hljs-keyword">chan</span>&lt;- <span class="hljs-type">int</span>)</span></span> {  <span class="hljs-comment">// åªå†™ç®¡é“å‚æ•°</span>
    ch &lt;- <span class="hljs-number">1</span>
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">consumer</span><span class="hljs-params">(ch &lt;-<span class="hljs-keyword">chan</span> <span class="hljs-type">int</span>)</span></span> {  <span class="hljs-comment">// åªè¯»ç®¡é“å‚æ•°</span>
    value := &lt;-ch
}
</code></pre>
<h3 data-id="heading-33">channel é˜»å¡æœºåˆ¶è¯¦è§£</h3>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// é˜»å¡æ˜¯ä»€ä¹ˆï¼Ÿ</span>
<span class="hljs-comment">// é˜»å¡æ˜¯æŒ‡ç¨‹åºæ‰§è¡Œåˆ°æŸä¸ªæ“ä½œæ—¶ï¼Œå¦‚æœæ¡ä»¶ä¸æ»¡è¶³ï¼Œä¼šæš‚åœç­‰å¾…ï¼Œç›´åˆ°æ¡ä»¶æ»¡è¶³æ‰ç»§ç»­æ‰§è¡Œ</span>
<span class="hljs-comment">// åœ¨éå¼‚æ­¥ï¼ˆå•çº¿ç¨‹ï¼‰æƒ…å†µä¸‹ï¼Œé˜»å¡ä¼šå¯¼è‡´æ•´ä¸ªç¨‹åºæš‚åœ</span>

<span class="hljs-comment">// 1. æ— ç¼“å†²ç®¡é“ï¼ˆé˜»å¡æœºåˆ¶è¯¦è§£ï¼‰</span>

<span class="hljs-comment">// ç¤ºä¾‹ï¼šé˜»å¡ç›´åˆ°æœ‰æ¥æ”¶è€…</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    ch := <span class="hljs-built_in">make</span>(<span class="hljs-keyword">chan</span> <span class="hljs-type">int</span>)  <span class="hljs-comment">// æ— ç¼“å†²ç®¡é“</span>
    
    <span class="hljs-comment">// æƒ…å†µ1ï¼šåœ¨ä¸»goroutineä¸­å‘é€ï¼ˆä¼šæ­»é”ï¼ï¼‰</span>
    <span class="hljs-comment">// ch &lt;- 42  // âŒ é”™è¯¯ï¼šè¿™é‡Œä¼šæ°¸è¿œé˜»å¡ï¼Œå› ä¸ºæ²¡æœ‰æ¥æ”¶è€…</span>
    <span class="hljs-comment">// fmt.Println("è¿™è¡Œä¸ä¼šæ‰§è¡Œ")</span>
    
    <span class="hljs-comment">// æ­£ç¡®åšæ³•ï¼šåœ¨å¦ä¸€ä¸ªgoroutineä¸­å‘é€</span>
    <span class="hljs-keyword">go</span> <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">()</span></span> {
        fmt.Println(<span class="hljs-string">"å‡†å¤‡å‘é€æ•°æ®..."</span>)
        ch &lt;- <span class="hljs-number">42</span>  <span class="hljs-comment">// å‘é€æ•°æ®ï¼Œå¦‚æœæ­¤æ—¶æ²¡æœ‰æ¥æ”¶è€…ï¼Œä¼šé˜»å¡ç­‰å¾…</span>
        fmt.Println(<span class="hljs-string">"æ•°æ®å·²å‘é€"</span>)
    }()
    
    fmt.Println(<span class="hljs-string">"å‡†å¤‡æ¥æ”¶æ•°æ®..."</span>)
    value := &lt;-ch  <span class="hljs-comment">// æ¥æ”¶æ•°æ®ï¼Œå¦‚æœæ­¤æ—¶æ²¡æœ‰æ•°æ®ï¼Œä¼šé˜»å¡ç­‰å¾…</span>
    fmt.Println(<span class="hljs-string">"æ¥æ”¶åˆ°æ•°æ®:"</span>, value)
    <span class="hljs-comment">// è¾“å‡ºé¡ºåºï¼š</span>
    <span class="hljs-comment">// å‡†å¤‡æ¥æ”¶æ•°æ®...</span>
    <span class="hljs-comment">// å‡†å¤‡å‘é€æ•°æ®...</span>
    <span class="hljs-comment">// æ¥æ”¶åˆ°æ•°æ®: 42</span>
    <span class="hljs-comment">// æ•°æ®å·²å‘é€</span>
}

<span class="hljs-comment">// 2. æœ‰ç¼“å†²ç®¡é“ï¼ˆéƒ¨åˆ†é˜»å¡ï¼‰</span>

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    ch := <span class="hljs-built_in">make</span>(<span class="hljs-keyword">chan</span> <span class="hljs-type">int</span>, <span class="hljs-number">2</span>)  <span class="hljs-comment">// ç¼“å†²å¤§å°ä¸º2</span>
    
    <span class="hljs-comment">// ç¼“å†²æœªæ»¡æ—¶ï¼Œå‘é€ä¸ä¼šé˜»å¡</span>
    ch &lt;- <span class="hljs-number">1</span>  <span class="hljs-comment">// âœ… ç«‹å³å‘é€ï¼Œä¸é˜»å¡</span>
    ch &lt;- <span class="hljs-number">2</span>  <span class="hljs-comment">// âœ… ç«‹å³å‘é€ï¼Œä¸é˜»å¡</span>
    
    <span class="hljs-comment">// ç¼“å†²å·²æ»¡æ—¶ï¼Œå‘é€ä¼šé˜»å¡</span>
    <span class="hljs-comment">// ch &lt;- 3  // âŒ ä¼šé˜»å¡ï¼Œå› ä¸ºç¼“å†²å·²æ»¡ï¼ˆ2ä¸ªï¼‰ï¼Œä¸”æ²¡æœ‰æ¥æ”¶è€…</span>
    
    <span class="hljs-comment">// æœ‰æ•°æ®æ—¶ï¼Œæ¥æ”¶ä¸ä¼šé˜»å¡</span>
    val1 := &lt;-ch  <span class="hljs-comment">// âœ… ç«‹å³æ¥æ”¶ï¼Œä¸é˜»å¡</span>
    val2 := &lt;-ch  <span class="hljs-comment">// âœ… ç«‹å³æ¥æ”¶ï¼Œä¸é˜»å¡</span>
    
    <span class="hljs-comment">// æ— æ•°æ®æ—¶ï¼Œæ¥æ”¶ä¼šé˜»å¡</span>
    <span class="hljs-comment">// val3 := &lt;-ch  // âŒ ä¼šé˜»å¡ï¼Œå› ä¸ºæ²¡æœ‰æ•°æ®ï¼Œä¸”æ²¡æœ‰å‘é€è€…</span>
}

<span class="hljs-comment">// 3. é˜»å¡æœºåˆ¶å®Œæ•´ç¤ºä¾‹</span>

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">demonstrateBlocking</span><span class="hljs-params">()</span></span> {
    ch := <span class="hljs-built_in">make</span>(<span class="hljs-keyword">chan</span> <span class="hljs-type">string</span>)  <span class="hljs-comment">// æ— ç¼“å†²ç®¡é“</span>
    
    <span class="hljs-comment">// å¯åŠ¨goroutineå‘é€æ•°æ®ï¼ˆå¼‚æ­¥ï¼‰</span>
    <span class="hljs-keyword">go</span> <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">()</span></span> {
        time.Sleep(<span class="hljs-number">2</span> * time.Second)  <span class="hljs-comment">// æ¨¡æ‹Ÿè€—æ—¶æ“ä½œ</span>
        fmt.Println(<span class="hljs-string">"goroutine: å‡†å¤‡å‘é€æ•°æ®"</span>)
        ch &lt;- <span class="hljs-string">"Hello"</span>  <span class="hljs-comment">// å‘é€æ•°æ®ï¼ˆæ­¤æ—¶ä¸»goroutineåœ¨ç­‰å¾…æ¥æ”¶ï¼Œæ‰€ä»¥ä¸é˜»å¡ï¼‰</span>
        fmt.Println(<span class="hljs-string">"goroutine: æ•°æ®å·²å‘é€"</span>)
    }()
    
    fmt.Println(<span class="hljs-string">"main: å‡†å¤‡æ¥æ”¶æ•°æ®ï¼ˆä¼šé˜»å¡2ç§’ï¼‰"</span>)
    <span class="hljs-comment">// è¿™é‡Œä¼šé˜»å¡ï¼Œç›´åˆ°ä¸Šé¢çš„goroutineå‘é€æ•°æ®</span>
    <span class="hljs-comment">// é˜»å¡æœŸé—´ï¼Œç¨‹åºä¸ä¼šç»§ç»­æ‰§è¡Œä¸‹é¢çš„ä»£ç </span>
    value := &lt;-ch  <span class="hljs-comment">// é˜»å¡ç›´åˆ°æœ‰æ•°æ®</span>
    fmt.Println(<span class="hljs-string">"main: æ¥æ”¶åˆ°æ•°æ®:"</span>, value)
    
    <span class="hljs-comment">// è¾“å‡ºé¡ºåºï¼š</span>
    <span class="hljs-comment">// main: å‡†å¤‡æ¥æ”¶æ•°æ®ï¼ˆä¼šé˜»å¡2ç§’ï¼‰</span>
    <span class="hljs-comment">// ï¼ˆç­‰å¾…2ç§’ï¼‰</span>
    <span class="hljs-comment">// goroutine: å‡†å¤‡å‘é€æ•°æ®</span>
    <span class="hljs-comment">// main: æ¥æ”¶åˆ°æ•°æ®: Hello</span>
    <span class="hljs-comment">// goroutine: æ•°æ®å·²å‘é€</span>
}

<span class="hljs-comment">// 4. é˜»å¡ vs éé˜»å¡ï¼ˆä½¿ç”¨selectçš„defaultï¼‰</span>

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">nonBlockingExample</span><span class="hljs-params">()</span></span> {
    ch := <span class="hljs-built_in">make</span>(<span class="hljs-keyword">chan</span> <span class="hljs-type">int</span>)
    
    <span class="hljs-comment">// éé˜»å¡å‘é€ï¼ˆä½¿ç”¨select + defaultï¼‰</span>
    <span class="hljs-keyword">select</span> {
    <span class="hljs-keyword">case</span> ch &lt;- <span class="hljs-number">42</span>:
        fmt.Println(<span class="hljs-string">"å‘é€æˆåŠŸ"</span>)
    <span class="hljs-keyword">default</span>:
        fmt.Println(<span class="hljs-string">"å‘é€å¤±è´¥ï¼ˆç®¡é“æ»¡æˆ–æ— æ¥æ”¶è€…ï¼‰"</span>)  <span class="hljs-comment">// ç«‹å³è¿”å›ï¼Œä¸é˜»å¡</span>
    }
    
    <span class="hljs-comment">// éé˜»å¡æ¥æ”¶ï¼ˆä½¿ç”¨select + defaultï¼‰</span>
    <span class="hljs-keyword">select</span> {
    <span class="hljs-keyword">case</span> value := &lt;-ch:
        fmt.Println(<span class="hljs-string">"æ¥æ”¶åˆ°:"</span>, value)
    <span class="hljs-keyword">default</span>:
        fmt.Println(<span class="hljs-string">"æ²¡æœ‰æ•°æ®ï¼ˆç«‹å³è¿”å›ï¼Œä¸é˜»å¡ï¼‰"</span>)  <span class="hljs-comment">// ç«‹å³è¿”å›ï¼Œä¸é˜»å¡</span>
    }
}

<span class="hljs-comment">// 5. å®é™…åº”ç”¨ï¼šç”Ÿäº§è€…-æ¶ˆè´¹è€…æ¨¡å¼</span>

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">producerConsumer</span><span class="hljs-params">()</span></span> {
    ch := <span class="hljs-built_in">make</span>(<span class="hljs-keyword">chan</span> <span class="hljs-type">int</span>, <span class="hljs-number">3</span>)  <span class="hljs-comment">// ç¼“å†²å¤§å°ä¸º3</span>
    
    <span class="hljs-comment">// ç”Ÿäº§è€…ï¼ˆå‘é€æ•°æ®ï¼‰</span>
    <span class="hljs-keyword">go</span> <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">()</span></span> {
        <span class="hljs-keyword">for</span> i := <span class="hljs-number">1</span>; i &lt;= <span class="hljs-number">5</span>; i++ {
            ch &lt;- i  <span class="hljs-comment">// å‘é€æ•°æ®</span>
            <span class="hljs-comment">// å¦‚æœç¼“å†²æ»¡ï¼Œè¿™é‡Œä¼šé˜»å¡ç›´åˆ°æ¶ˆè´¹è€…å–èµ°æ•°æ®</span>
            fmt.Printf(<span class="hljs-string">"ç”Ÿäº§: %d\n"</span>, i)
        }
        <span class="hljs-built_in">close</span>(ch)  <span class="hljs-comment">// å…³é—­ç®¡é“ï¼Œé€šçŸ¥æ¶ˆè´¹è€…ç»“æŸ</span>
    }()
    
    <span class="hljs-comment">// æ¶ˆè´¹è€…ï¼ˆæ¥æ”¶æ•°æ®ï¼‰</span>
    <span class="hljs-keyword">for</span> value := <span class="hljs-keyword">range</span> ch {
        <span class="hljs-comment">// å¦‚æœç®¡é“ä¸ºç©ºï¼Œè¿™é‡Œä¼šé˜»å¡ç›´åˆ°ç”Ÿäº§è€…å‘é€æ•°æ®</span>
        fmt.Printf(<span class="hljs-string">"æ¶ˆè´¹: %d\n"</span>, value)
        time.Sleep(<span class="hljs-number">500</span> * time.Millisecond)  <span class="hljs-comment">// æ¨¡æ‹Ÿå¤„ç†æ—¶é—´</span>
    }
}

<span class="hljs-comment">// æ€»ç»“ï¼š</span>
<span class="hljs-comment">// 1. "é˜»å¡ç›´åˆ°æœ‰æ¥æ”¶è€…"ï¼šå‘é€æ“ä½œä¼šç­‰å¾…ï¼Œç›´åˆ°æœ‰goroutineæ¥æ”¶æ•°æ®</span>
<span class="hljs-comment">// 2. "é˜»å¡ç›´åˆ°æœ‰æ•°æ®"ï¼šæ¥æ”¶æ“ä½œä¼šç­‰å¾…ï¼Œç›´åˆ°æœ‰goroutineå‘é€æ•°æ®</span>
<span class="hljs-comment">// 3. åœ¨å•çº¿ç¨‹ï¼ˆégoroutineï¼‰æƒ…å†µä¸‹ï¼Œé˜»å¡ä¼šå¯¼è‡´ç¨‹åºæš‚åœ</span>
<span class="hljs-comment">// 4. ä½¿ç”¨goroutineå¯ä»¥é¿å…é˜»å¡ä¸»ç¨‹åº</span>
<span class="hljs-comment">// 5. ä½¿ç”¨ç¼“å†²ç®¡é“å¯ä»¥å‡å°‘é˜»å¡ï¼ˆç¼“å†²æœªæ»¡æ—¶å‘é€ä¸é˜»å¡ï¼Œç¼“å†²æœ‰æ•°æ®æ—¶æ¥æ”¶ä¸é˜»å¡ï¼‰</span>
</code></pre>
<h3 data-id="heading-34">select - å¤šè·¯å¤ç”¨</h3>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// select ç›‘æ§å¤šä¸ªchannelæ“ä½œï¼Œå“ªä¸ªå…ˆå°±ç»ªå°±æ‰§è¡Œå“ªä¸ª</span>
ch1 := <span class="hljs-built_in">make</span>(<span class="hljs-keyword">chan</span> <span class="hljs-type">string</span>)
ch2 := <span class="hljs-built_in">make</span>(<span class="hljs-keyword">chan</span> <span class="hljs-type">string</span>)

<span class="hljs-keyword">go</span> <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">()</span></span> {
    time.Sleep(<span class="hljs-number">1</span> * time.Second)
    ch1 &lt;- <span class="hljs-string">"æ¥è‡ªch1"</span>
}()

<span class="hljs-keyword">go</span> <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">()</span></span> {
    time.Sleep(<span class="hljs-number">2</span> * time.Second)  
    ch2 &lt;- <span class="hljs-string">"æ¥è‡ªch2"</span>
}()

<span class="hljs-comment">// selectç­‰å¾…ç¬¬ä¸€ä¸ªå°±ç»ªçš„channel</span>
<span class="hljs-keyword">select</span> {
<span class="hljs-keyword">case</span> msg1 := &lt;-ch1:
    fmt.Println(<span class="hljs-string">"æ”¶åˆ°:"</span>, msg1)  <span class="hljs-comment">// 1ç§’åæ‰§è¡Œï¼ˆæ›´å¿«ï¼‰</span>
<span class="hljs-keyword">case</span> msg2 := &lt;-ch2:
    fmt.Println(<span class="hljs-string">"æ”¶åˆ°:"</span>, msg2)  <span class="hljs-comment">// 2ç§’åæ‰§è¡Œ</span>
<span class="hljs-keyword">case</span> &lt;-time.After(<span class="hljs-number">3</span> * time.Second):
    fmt.Println(<span class="hljs-string">"è¶…æ—¶"</span>)        <span class="hljs-comment">// 3ç§’åæ‰§è¡Œï¼ˆå¦‚æœå‰ä¸¤ä¸ªéƒ½æ²¡å°±ç»ªï¼‰</span>
<span class="hljs-keyword">default</span>:
    fmt.Println(<span class="hljs-string">"éé˜»å¡"</span>)      <span class="hljs-comment">// å¦‚æœæ‰€æœ‰caseéƒ½ä¸å°±ç»ªï¼Œç«‹å³æ‰§è¡Œ</span>
}

<span class="hljs-comment">// æ³¨æ„ï¼šå¦‚æœå¤šä¸ªcaseåŒæ—¶å°±ç»ªï¼Œselectä¼šéšæœºé€‰æ‹©ä¸€ä¸ªï¼ˆå…¬å¹³æ€§ï¼‰</span>
</code></pre>
<h3 data-id="heading-35">sync.WaitGroupï¼ˆç­‰å¾…ç»„ï¼‰</h3>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// WaitGroup ç”¨äºç­‰å¾…å¤šä¸ªgoroutineå®Œæˆ</span>
<span class="hljs-keyword">var</span> wg sync.WaitGroup

<span class="hljs-keyword">for</span> i := <span class="hljs-number">1</span>; i &lt;= <span class="hljs-number">3</span>; i++ {
    wg.Add(<span class="hljs-number">1</span>)                    <span class="hljs-comment">// å¢åŠ è®¡æ•°ï¼ˆæ¯ä¸ªgoroutine +1ï¼‰</span>
    <span class="hljs-keyword">go</span> <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(id <span class="hljs-type">int</span>)</span></span> {
        <span class="hljs-keyword">defer</span> wg.Done()          <span class="hljs-comment">// å®Œæˆæ—¶å‡1ï¼ˆdeferç¡®ä¿æ‰§è¡Œï¼‰</span>
        fmt.Printf(<span class="hljs-string">"ä»»åŠ¡%då®Œæˆ\n"</span>, id)
    }(i)
}

wg.Wait()                       <span class="hljs-comment">// é˜»å¡ç›´åˆ°è®¡æ•°ä¸º0ï¼ˆæ‰€æœ‰goroutineå®Œæˆï¼‰</span>
fmt.Println(<span class="hljs-string">"æ‰€æœ‰ä»»åŠ¡å®Œæˆ"</span>)
</code></pre>
<h2 data-id="heading-36">ä¹ã€æ—¶é—´å¤„ç†</h2>
<h3 data-id="heading-37">Timerï¼ˆå•æ¬¡å®šæ—¶ï¼‰</h3>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// Timer åœ¨æŒ‡å®šæ—¶é—´åè§¦å‘ä¸€æ¬¡</span>
timer := time.NewTimer(<span class="hljs-number">2</span> * time.Second)
&lt;-timer.C                       <span class="hljs-comment">// é˜»å¡ç­‰å¾…2ç§’åè§¦å‘</span>
fmt.Println(<span class="hljs-string">"æ—¶é—´åˆ°"</span>)

<span class="hljs-comment">// åœæ­¢è®¡æ—¶å™¨ï¼ˆå¦‚æœè¿˜æœªè§¦å‘ï¼‰</span>
<span class="hljs-keyword">if</span> timer.Stop() {
    fmt.Println(<span class="hljs-string">"è®¡æ—¶å™¨å·²åœæ­¢"</span>)
}
</code></pre>
<h3 data-id="heading-38">Tickerï¼ˆé‡å¤å®šæ—¶ï¼‰- æ­£ç¡®ä½¿ç”¨æ–¹å¼</h3>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// Ticker æ¯éš”æŒ‡å®šæ—¶é—´è§¦å‘ä¸€æ¬¡ï¼ˆå¿…é¡»ä½¿ç”¨deferåœæ­¢ï¼‰</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    <span class="hljs-comment">// åˆ›å»ºå®šæ—¶å™¨ï¼šæ¯500æ¯«ç§’è§¦å‘ä¸€æ¬¡</span>
    ticker := time.NewTicker(<span class="hljs-number">500</span> * time.Millisecond)
    
    <span class="hljs-comment">// å…³é”®ï¼šå¿…é¡»ä½¿ç”¨ defer åœæ­¢ tickerï¼Œå¦åˆ™ä¼šå†…å­˜æ³„æ¼</span>
    <span class="hljs-comment">// defer ç¡®ä¿å‡½æ•°é€€å‡ºæ—¶ï¼ˆå³ä½¿æ˜¯ panicï¼‰ä¹Ÿä¼šæ‰§è¡Œ Stop()</span>
    <span class="hljs-keyword">defer</span> ticker.Stop()  <span class="hljs-comment">// æ­£ç¡®ï¼šåœ¨mainå‡½æ•°é€€å‡ºæ—¶åœæ­¢</span>
    
    <span class="hljs-comment">// å¯åŠ¨ä¸€ä¸ªgoroutineå¤„ç†å®šæ—¶ä»»åŠ¡</span>
    <span class="hljs-keyword">go</span> <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">()</span></span> {
        <span class="hljs-keyword">for</span> t := <span class="hljs-keyword">range</span> ticker.C {  <span class="hljs-comment">// ä»tickerçš„ç®¡é“æ¥æ”¶æ—¶é—´</span>
            fmt.Printf(<span class="hljs-string">"å®šæ—¶è§¦å‘: %v\n"</span>, t.Format(<span class="hljs-string">"15:04:05.000"</span>))
        }
        fmt.Println(<span class="hljs-string">"Tickeråœæ­¢ï¼Œgoroutineé€€å‡º"</span>)
    }()
    
    <span class="hljs-comment">// ä¸»ç¨‹åºç­‰å¾…3ç§’</span>
    time.Sleep(<span class="hljs-number">3</span> * time.Second)
    fmt.Println(<span class="hljs-string">"ä¸»ç¨‹åºç»“æŸï¼Œdefer ticker.Stop() å°†è¢«è°ƒç”¨"</span>)
    
    <span class="hljs-comment">// å‡½æ•°ç»“æŸæ—¶ï¼Œdeferä¼šæ‰§è¡Œï¼Œtickerè¢«åœæ­¢</span>
    <span class="hljs-comment">// ticker.C ç®¡é“è¢«å…³é—­ï¼Œä¸Šé¢çš„goroutineä¼šé€€å‡º</span>
}

<span class="hljs-comment">// é”™è¯¯ç”¨æ³•ï¼šå¿˜è®°åœæ­¢ Tickerï¼ˆä¼šå¯¼è‡´å†…å­˜æ³„æ¼ï¼‰</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">wrongUsage</span><span class="hljs-params">()</span></span> {
    ticker := time.NewTicker(<span class="hljs-number">1</span> * time.Second)
    
    <span class="hljs-keyword">go</span> <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">()</span></span> {
        <span class="hljs-keyword">for</span> t := <span class="hljs-keyword">range</span> ticker.C {
            fmt.Println(t)
        }
    }()
    
    <span class="hljs-comment">// âŒ é”™è¯¯ï¼šæ²¡æœ‰è°ƒç”¨ ticker.Stop()</span>
    <span class="hljs-comment">// å³ä½¿å‡½æ•°è¿”å›ï¼Œtickerä»åœ¨åå°è¿è¡Œï¼Œgoroutineä¸ä¼šé€€å‡º</span>
    <span class="hljs-comment">// å¯¼è‡´å†…å­˜æ³„æ¼ï¼</span>
}

<span class="hljs-comment">// æ­£ç¡®ç”¨æ³•ï¼šä½¿ç”¨deferç¡®ä¿åœæ­¢</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">correctUsage</span><span class="hljs-params">()</span></span> {
    ticker := time.NewTicker(<span class="hljs-number">1</span> * time.Second)
    <span class="hljs-keyword">defer</span> ticker.Stop()  <span class="hljs-comment">// âœ… æ­£ç¡®ï¼šç¡®ä¿åœæ­¢</span>
    
    <span class="hljs-keyword">go</span> <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">()</span></span> {
        <span class="hljs-keyword">for</span> t := <span class="hljs-keyword">range</span> ticker.C {
            fmt.Println(t)
        }
    }()
    
    <span class="hljs-comment">// å‡½æ•°è¿”å›æ—¶ï¼Œdeferæ‰§è¡Œï¼Œtickeråœæ­¢</span>
    <span class="hljs-comment">// goroutineä¼šé€€å‡ºï¼Œæ²¡æœ‰å†…å­˜æ³„æ¼</span>
}
</code></pre>
<h3 data-id="heading-39">æ—¶é—´æ“ä½œ</h3>
<pre><code class="hljs language-go" lang="go">now := time.Now()               <span class="hljs-comment">// å½“å‰æ—¶é—´</span>
fmt.Println(now.Format(<span class="hljs-string">"2006-01-02 15:04:05"</span>))  <span class="hljs-comment">// æ ¼å¼åŒ–æ—¶é—´</span>

duration := <span class="hljs-number">2</span> * time.Hour      <span class="hljs-comment">// 2å°æ—¶çš„æ—¶é—´é—´éš”</span>
future := now.Add(duration)    <span class="hljs-comment">// åŠ æ—¶é—´</span>
past := now.Add(-duration)     <span class="hljs-comment">// å‡æ—¶é—´</span>

diff := future.Sub(now)        <span class="hljs-comment">// æ—¶é—´å·®</span>
fmt.Println(duration.Seconds()) <span class="hljs-comment">// è½¬æ¢ä¸ºç§’æ•°</span>
</code></pre>
<h2 data-id="heading-40">åã€å…¶ä»–é‡è¦å…³é”®å­—</h2>
<h3 data-id="heading-41">type - ç±»å‹å®šä¹‰</h3>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// åˆ›å»ºæ–°ç±»å‹ï¼ˆåº•å±‚ç±»å‹ç›¸åŒä½†ä¸èƒ½ç›´æ¥è¿ç®—ï¼‰</span>
<span class="hljs-keyword">type</span> Celsius <span class="hljs-type">float64</span>     <span class="hljs-comment">// æ‘„æ°åº¦ç±»å‹</span>
<span class="hljs-keyword">type</span> Fahrenheit <span class="hljs-type">float64</span>  <span class="hljs-comment">// åæ°åº¦ç±»å‹</span>
<span class="hljs-keyword">type</span> ID <span class="hljs-type">string</span>          <span class="hljs-comment">// ç”¨æˆ·IDç±»å‹</span>

<span class="hljs-comment">// ç±»å‹åˆ«åï¼ˆä¸åŸç±»å‹å®Œå…¨å…¼å®¹ï¼‰</span>
<span class="hljs-keyword">type</span> IntAlias = <span class="hljs-type">int</span>     <span class="hljs-comment">// åªæ˜¯intçš„å¦ä¸€ä¸ªåå­—ï¼Œå¯ä»¥äº’ç›¸èµ‹å€¼</span>

<span class="hljs-comment">// ç»“æ„ä½“ç±»å‹</span>
<span class="hljs-keyword">type</span> Person <span class="hljs-keyword">struct</span> {
    Name <span class="hljs-type">string</span>
    Age  <span class="hljs-type">int</span>
}

<span class="hljs-comment">// æ¥å£ç±»å‹</span>
<span class="hljs-keyword">type</span> Reader <span class="hljs-keyword">interface</span> {
    Read(p []<span class="hljs-type">byte</span>) (n <span class="hljs-type">int</span>, err <span class="hljs-type">error</span>)
}

<span class="hljs-comment">// å‡½æ•°ç±»å‹</span>
<span class="hljs-keyword">type</span> Handler <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(<span class="hljs-type">string</span>)</span></span> <span class="hljs-type">int</span>
</code></pre>
<h3 data-id="heading-42">package å’Œ import</h3>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// package å£°æ˜åŒ…å</span>
<span class="hljs-keyword">package</span> main      <span class="hljs-comment">// å¯æ‰§è¡Œç¨‹åºçš„ä¸»åŒ…</span>
<span class="hljs-keyword">package</span> mylib     <span class="hljs-comment">// åº“åŒ…</span>

<span class="hljs-comment">// import å¯¼å…¥åŒ…</span>
<span class="hljs-keyword">import</span> (
    <span class="hljs-string">"fmt"</span>                       <span class="hljs-comment">// æ ‡å‡†åº“åŒ…</span>
    <span class="hljs-string">"math"</span>
    
    <span class="hljs-string">"github.com/user/package"</span>   <span class="hljs-comment">// ç¬¬ä¸‰æ–¹åŒ…</span>
    
    . <span class="hljs-string">"mypackage"</span>               <span class="hljs-comment">// ç‚¹å¯¼å…¥ï¼šå¯ç›´æ¥è®¿é—®åŒ…å†…æ ‡è¯†ç¬¦ï¼ˆä¸æ¨èï¼‰</span>
    m <span class="hljs-string">"math"</span>                    <span class="hljs-comment">// åˆ«åå¯¼å…¥ï¼šä½¿ç”¨ m ä»£æ›¿ math</span>
    _ <span class="hljs-string">"database/sql"</span>            <span class="hljs-comment">// åŒ¿åå¯¼å…¥ï¼šåªæ‰§è¡ŒåŒ…çš„initå‡½æ•°</span>
)
</code></pre>
<h3 data-id="heading-43">range - éå†</h3>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// rangeéå†å„ç§é›†åˆç±»å‹</span>
<span class="hljs-comment">// æ•°ç»„/åˆ‡ç‰‡</span>
<span class="hljs-keyword">for</span> i, v := <span class="hljs-keyword">range</span> []<span class="hljs-type">int</span>{<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>} {
    fmt.Printf(<span class="hljs-string">"ç´¢å¼•%d: å€¼%d\n"</span>, i, v)
}

<span class="hljs-comment">// æ˜ å°„</span>
<span class="hljs-keyword">for</span> k, v := <span class="hljs-keyword">range</span> <span class="hljs-keyword">map</span>[<span class="hljs-type">string</span>]<span class="hljs-type">int</span>{<span class="hljs-string">"a"</span>: <span class="hljs-number">1</span>, <span class="hljs-string">"b"</span>: <span class="hljs-number">2</span>} {
    fmt.Printf(<span class="hljs-string">"é”®%s: å€¼%d\n"</span>, k, v)
}

<span class="hljs-comment">// å­—ç¬¦ä¸²ï¼ˆéå†runeï¼Œä¸æ˜¯å­—èŠ‚ï¼‰</span>
<span class="hljs-keyword">for</span> i, ch := <span class="hljs-keyword">range</span> <span class="hljs-string">"ä½ å¥½"</span> {
    fmt.Printf(<span class="hljs-string">"ä½ç½®%d: å­—ç¬¦%c\n"</span>, i, ch)
}

<span class="hljs-comment">// ç®¡é“ï¼ˆç›´åˆ°ç®¡é“å…³é—­ï¼‰</span>
<span class="hljs-keyword">for</span> value := <span class="hljs-keyword">range</span> ch {
    fmt.Println(value)
}
</code></pre>
<h3 data-id="heading-44">è·å–å¯¹è±¡ç±»å‹</h3>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// 1. ä½¿ç”¨ fmt.Printf çš„ %T æ ¼å¼åŒ–ç¬¦ï¼ˆæœ€å¸¸ç”¨ï¼‰</span>
<span class="hljs-keyword">var</span> x <span class="hljs-type">int</span> = <span class="hljs-number">42</span>
<span class="hljs-keyword">var</span> y <span class="hljs-type">string</span> = <span class="hljs-string">"hello"</span>
<span class="hljs-keyword">var</span> z []<span class="hljs-type">int</span> = []<span class="hljs-type">int</span>{<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>}

fmt.Printf(<span class="hljs-string">"xçš„ç±»å‹: %T\n"</span>, x)  <span class="hljs-comment">// è¾“å‡º: xçš„ç±»å‹: int</span>
fmt.Printf(<span class="hljs-string">"yçš„ç±»å‹: %T\n"</span>, y)  <span class="hljs-comment">// è¾“å‡º: yçš„ç±»å‹: string</span>
fmt.Printf(<span class="hljs-string">"zçš„ç±»å‹: %T\n"</span>, z)  <span class="hljs-comment">// è¾“å‡º: zçš„ç±»å‹: []int</span>

<span class="hljs-comment">// 2. ä½¿ç”¨ reflect.TypeOfï¼ˆéœ€è¦å¯¼å…¥ reflect åŒ…ï¼‰</span>
<span class="hljs-keyword">import</span> <span class="hljs-string">"reflect"</span>

<span class="hljs-keyword">var</span> num <span class="hljs-type">int</span> = <span class="hljs-number">100</span>
<span class="hljs-keyword">var</span> name <span class="hljs-type">string</span> = <span class="hljs-string">"Go"</span>

fmt.Println(<span class="hljs-string">"numçš„ç±»å‹:"</span>, reflect.TypeOf(num))      <span class="hljs-comment">// int</span>
fmt.Println(<span class="hljs-string">"nameçš„ç±»å‹:"</span>, reflect.TypeOf(name))    <span class="hljs-comment">// string</span>

<span class="hljs-comment">// 3. è·å–ç»“æ„ä½“ç±»å‹</span>
<span class="hljs-keyword">type</span> Person <span class="hljs-keyword">struct</span> {
    Name <span class="hljs-type">string</span>
    Age  <span class="hljs-type">int</span>
}

p := Person{Name: <span class="hljs-string">"Alice"</span>, Age: <span class="hljs-number">25</span>}
fmt.Printf(<span class="hljs-string">"pçš„ç±»å‹: %T\n"</span>, p)  <span class="hljs-comment">// è¾“å‡º: pçš„ç±»å‹: main.Person</span>

<span class="hljs-comment">// 4. è·å–æŒ‡é’ˆç±»å‹</span>
ptr := &amp;Person{Name: <span class="hljs-string">"Bob"</span>, Age: <span class="hljs-number">30</span>}
fmt.Printf(<span class="hljs-string">"ptrçš„ç±»å‹: %T\n"</span>, ptr)  <span class="hljs-comment">// è¾“å‡º: ptrçš„ç±»å‹: *main.Person</span>

<span class="hljs-comment">// 5. è·å–æ¥å£ç±»å‹</span>
<span class="hljs-keyword">var</span> val <span class="hljs-keyword">interface</span>{} = <span class="hljs-number">42</span>
fmt.Printf(<span class="hljs-string">"valçš„ç±»å‹: %T\n"</span>, val)  <span class="hljs-comment">// è¾“å‡º: valçš„ç±»å‹: int</span>

<span class="hljs-comment">// 6. ç±»å‹æ–­è¨€è·å–å…·ä½“ç±»å‹</span>
<span class="hljs-keyword">var</span> data any = <span class="hljs-string">"hello"</span>
<span class="hljs-keyword">switch</span> v := data.(<span class="hljs-keyword">type</span>) {
<span class="hljs-keyword">case</span> <span class="hljs-type">int</span>:
    fmt.Printf(<span class="hljs-string">"æ˜¯intç±»å‹: %d\n"</span>, v)
<span class="hljs-keyword">case</span> <span class="hljs-type">string</span>:
    fmt.Printf(<span class="hljs-string">"æ˜¯stringç±»å‹: %s\n"</span>, v)
<span class="hljs-keyword">default</span>:
    fmt.Printf(<span class="hljs-string">"å…¶ä»–ç±»å‹: %T\n"</span>, v)
}

<span class="hljs-comment">// 7. è·å–ç±»å‹çš„å­—ç¬¦ä¸²è¡¨ç¤º</span>
<span class="hljs-keyword">import</span> <span class="hljs-string">"reflect"</span>

t := reflect.TypeOf(<span class="hljs-number">42</span>)
fmt.Println(<span class="hljs-string">"ç±»å‹åç§°:"</span>, t.Name())        <span class="hljs-comment">// int</span>
fmt.Println(<span class="hljs-string">"ç±»å‹å­—ç¬¦ä¸²:"</span>, t.String())    <span class="hljs-comment">// int</span>
fmt.Println(<span class="hljs-string">"ç±»å‹ç§ç±»:"</span>, t.Kind())        <span class="hljs-comment">// int</span>

<span class="hljs-comment">// 8. å®é™…åº”ç”¨ï¼šç±»å‹æ£€æŸ¥å‡½æ•°</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">printType</span><span class="hljs-params">(v <span class="hljs-keyword">interface</span>{})</span></span> {
    <span class="hljs-keyword">switch</span> v := v.(<span class="hljs-keyword">type</span>) {
    <span class="hljs-keyword">case</span> <span class="hljs-type">int</span>:
        fmt.Printf(<span class="hljs-string">"æ•´æ•°: %d (ç±»å‹: %T)\n"</span>, v, v)
    <span class="hljs-keyword">case</span> <span class="hljs-type">string</span>:
        fmt.Printf(<span class="hljs-string">"å­—ç¬¦ä¸²: %s (ç±»å‹: %T)\n"</span>, v, v)
    <span class="hljs-keyword">case</span> []<span class="hljs-type">int</span>:
        fmt.Printf(<span class="hljs-string">"intåˆ‡ç‰‡: %v (ç±»å‹: %T)\n"</span>, v, v)
    <span class="hljs-keyword">default</span>:
        fmt.Printf(<span class="hljs-string">"æœªçŸ¥ç±»å‹: %T, å€¼: %v\n"</span>, v, v)
    }
}

printType(<span class="hljs-number">42</span>)              <span class="hljs-comment">// æ•´æ•°: 42 (ç±»å‹: int)</span>
printType(<span class="hljs-string">"hello"</span>)         <span class="hljs-comment">// å­—ç¬¦ä¸²: hello (ç±»å‹: string)</span>
printType([]<span class="hljs-type">int</span>{<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>})  <span class="hljs-comment">// intåˆ‡ç‰‡: [1 2 3] (ç±»å‹: []int)</span>
</code></pre>
<h2 data-id="heading-45">åä¸€ã€é‡è¦ç‰¹æ€§æ€»ç»“</h2>
<h3 data-id="heading-46">1. å€¼ç±»å‹ vs å¼•ç”¨ç±»å‹</h3>






























<table><thead><tr><th>ç±»å‹</th><th>å€¼ç±»å‹</th><th>å¼•ç”¨ç±»å‹</th></tr></thead><tbody><tr><td>ç¤ºä¾‹</td><td>int, float, bool, string, æ•°ç»„, ç»“æ„ä½“</td><td>åˆ‡ç‰‡, æ˜ å°„, ç®¡é“, å‡½æ•°, æ¥å£</td></tr><tr><td>èµ‹å€¼</td><td>å¤åˆ¶æ•´ä¸ªå€¼</td><td>å¤åˆ¶å¼•ç”¨ï¼ˆå…±äº«åº•å±‚æ•°æ®ï¼‰</td></tr><tr><td>nilå€¼</td><td>ä¸èƒ½ä¸ºnil</td><td>å¯ä»¥ä¸ºnil</td></tr><tr><td>ä¿®æ”¹</td><td>ä¿®æ”¹ä¸å½±å“åŸå€¼</td><td>ä¿®æ”¹å½±å“æ‰€æœ‰å¼•ç”¨</td></tr></tbody></table>
<h3 data-id="heading-47">2. æ–¹æ³•æ¥æ”¶è€…é€‰æ‹©åŸåˆ™</h3>
<ul>
<li><strong>å€¼æ¥æ”¶è€…</strong>ï¼šæ–¹æ³•ä¸éœ€è¦ä¿®æ”¹æ¥æ”¶è€…ï¼Œæˆ–æ¥æ”¶è€…æ˜¯å°å‹ç»“æ„ä½“</li>
<li><strong>æŒ‡é’ˆæ¥æ”¶è€…</strong>ï¼šæ–¹æ³•éœ€è¦ä¿®æ”¹æ¥æ”¶è€…ï¼Œæˆ–æ¥æ”¶è€…æ˜¯å¤§å‹ç»“æ„ä½“ï¼ˆé¿å…å¤åˆ¶ï¼‰</li>
<li><strong>ä¸€è‡´æ€§</strong>ï¼šåŒä¸€ç±»å‹çš„å¤šä¸ªæ–¹æ³•åº”è¯¥ä½¿ç”¨ç›¸åŒç±»å‹çš„æ¥æ”¶è€…</li>
</ul>
<h3 data-id="heading-48">3. any ä½¿ç”¨æŒ‡å—</h3>
<ul>
<li><strong>Go 1.18+</strong>ï¼šä¼˜å…ˆä½¿ç”¨ <code>any</code>ï¼Œæ›´ç®€æ´</li>
<li><strong>æ³›å‹ä»£ç </strong>ï¼šå¿…é¡»ä½¿ç”¨ <code>any</code></li>
<li><strong>æ—§ä»£ç ç»´æŠ¤</strong>ï¼šä¿æŒ <code>interface{}</code> ä»¥å…¼å®¹</li>
<li><strong>ä¸¤è€…å®Œå…¨ç­‰ä»·</strong>ï¼šç¼–è¯‘åæ²¡æœ‰åŒºåˆ«</li>
</ul>
<h3 data-id="heading-49">4. Ticker æœ€ä½³å®è·µ</h3>
<pre><code class="hljs language-go" lang="go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">useTicker</span><span class="hljs-params">()</span></span> {
    ticker := time.NewTicker(interval)
    <span class="hljs-keyword">defer</span> ticker.Stop()  <span class="hljs-comment">// å¿…é¡»ï¼é˜²æ­¢å†…å­˜æ³„æ¼</span>
    
    <span class="hljs-comment">// ä½¿ç”¨ticker...</span>
}

<span class="hljs-comment">// æ³¨æ„ï¼šticker.Stop() ä¸ä¼šå…³é—­ticker.Cç®¡é“</span>
<span class="hljs-comment">// å·²å‘é€åˆ°ç®¡é“çš„æ•°æ®ä»ç„¶å¯ä»¥æ¥æ”¶</span>
</code></pre>
<h3 data-id="heading-50">5. å¹¶å‘å®‰å…¨æ¨¡å¼</h3>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// ä½¿ç”¨WaitGroupç­‰å¾…æ‰€æœ‰goroutine</span>
<span class="hljs-keyword">var</span> wg sync.WaitGroup
<span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; n; i++ {
    wg.Add(<span class="hljs-number">1</span>)
    <span class="hljs-keyword">go</span> <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">()</span></span> {
        <span class="hljs-keyword">defer</span> wg.Done()
        <span class="hljs-comment">// å·¥ä½œ...</span>
    }()
}
wg.Wait()

<span class="hljs-comment">// ä½¿ç”¨channelä¼ é€’ç»“æœ</span>
results := <span class="hljs-built_in">make</span>(<span class="hljs-keyword">chan</span> Result, n)
<span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; n; i++ {
    <span class="hljs-keyword">go</span> <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">()</span></span> {
        results &lt;- doWork()
    }()
}
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[5å°æ—¶æ•´ç†60é¡µã€ŠGoogle AgentæŒ‡å—ã€‹ï¼Œä¸æ‡‚Agentçš„åŒ…æ•™åŒ…ä¼š]]></title>    <link>https://juejin.cn/post/7584987267292348462</link>    <guid>https://juejin.cn/post/7584987267292348462</guid>    <pubDate>2025-12-18T05:56:00.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7584987267292348462" data-draft-id="7584810656382353417" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="5å°æ—¶æ•´ç†60é¡µã€ŠGoogle AgentæŒ‡å—ã€‹ï¼Œä¸æ‡‚Agentçš„åŒ…æ•™åŒ…ä¼š"/> <meta itemprop="keywords" content="Agent,LLM,ç¨‹åºå‘˜"/> <meta itemprop="datePublished" content="2025-12-18T05:56:00.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤§æ¨¡å‹æ•™ç¨‹"/> <meta itemprop="url" content="https://juejin.cn/user/1145012233707299"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            5å°æ—¶æ•´ç†60é¡µã€ŠGoogle AgentæŒ‡å—ã€‹ï¼Œä¸æ‡‚Agentçš„åŒ…æ•™åŒ…ä¼š
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1145012233707299/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤§æ¨¡å‹æ•™ç¨‹
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-18T05:56:00.000Z" title="Thu Dec 18 2025 05:56:00 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-18
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»20åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#383838;font-size:15px;line-height:30px;letter-spacing:2px;word-break:break-word;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;scroll-behavior:smooth;background-image:linear-gradient(0deg,transparent 24%,rgba(201,195,195,.329) 25%,hsla(0,8%,80.4%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent),linear-gradient(90deg,transparent 24%,rgba(204,196,196,.226) 25%,hsla(0,4%,66.1%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent);background-color:#fff;background-size:50px 50px;padding-bottom:60px}.markdown-body ::selection{color:#fff;background-color:#a862ea}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin:24px 0 12px;color:#a862ea}.markdown-body h1{line-height:2;font-size:1.4em}.markdown-body h1~p:first-of-type:first-letter{color:#a862ea;float:left;font-size:2em;margin-right:.4em;font-weight:bolder}.markdown-body h2{font-size:1.2em}.markdown-body h3{font-size:1.1em}.markdown-body ol,.markdown-body ul{padding-left:2em}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;padding-left:.2em}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#a862ea}.markdown-body ol li.task-list-item,.markdown-body ul li.task-list-item{list-style:none}.markdown-body ol li.task-list-item ol,.markdown-body ol li.task-list-item ul,.markdown-body ul li.task-list-item ol,.markdown-body ul li.task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:10px}.markdown-body a,.markdown-body code,.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6,.markdown-body li,.markdown-body p{opacity:.85;vertical-align:baseline;transition:all .1s ease}.markdown-body a:hover,.markdown-body code:hover,.markdown-body h1:hover,.markdown-body h2:hover,.markdown-body h3:hover,.markdown-body h4:hover,.markdown-body h5:hover,.markdown-body h6:hover,.markdown-body li:hover,.markdown-body p:hover{opacity:1}.markdown-body a{display:inline-block;color:#a862ea;cursor:pointer;text-decoration:none;position:relative}.markdown-body a:after{content:"";position:absolute;width:98%;height:1px;bottom:0;left:0;transform:scaleX(0);background-color:#a862ea;transform-origin:bottom right;transition:transform .3s ease-in-out}.markdown-body a:hover:after{transform:scaleX(1);transform-origin:bottom left}.markdown-body a:active,.markdown-body a:link{color:#a862ea}.markdown-body img{max-width:100%;user-select:none;margin:1em 0;transition:transform .2s ease 0s;background-color:#f8f5ff;box-shadow:0 0 10px #e7daff}.markdown-body img:hover{opacity:1;box-shadow:0 0 20px #e7daff;transform:translateY(-1px)}.markdown-body blockquote{padding:.5em 1em;margin:12px 0;border-top-left-radius:2px;border-bottom-left-radius:2px;border-left:3px solid #a862ea;background-color:#f8f5ff}.markdown-body blockquote&gt;p{margin:0}.markdown-body .math{font-style:italic;margin:12px 0;padding:.5em 1em;background-color:#f8f5ff}.markdown-body .math&gt;p{margin:0}.markdown-body code{padding:2px .4em;overflow-x:auto;color:#a862ea;font-weight:700;word-break:break-word;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;background-color:#f8f5ff}.markdown-body pre{margin:2em 0}.markdown-body pre&gt;code{display:block;padding:1.5em;word-break:normal;font-size:.9em;font-style:normal;font-weight:400;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;line-height:18px;color:#383838;border-radius:2px;scroll-behavior:smooth;box-shadow:0 0 10px #e7daff}.markdown-body pre&gt;code:hover{box-shadow:0 0 20px #e7daff}.markdown-body pre&gt;code::-webkit-scrollbar{height:6px;background-color:#f8f5ff}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:#e7daff;border-bottom-left-radius:3px;border-bottom-right-radius:3px}.markdown-body hr{margin:2em 0;border-top:1px solid #a862ea}.markdown-body table{width:100%;font-size:12px;max-width:100%;overflow:auto;border-collapse:collapse}.markdown-body thead{color:#a862ea;background:#f8f5ff}.markdown-body td,.markdown-body th{padding:.5em;border:1px solid #e7daff}.markdown-body tr{background-color:#f8f5ff}@media (max-width:720px){.markdown-body{font-size:12px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>æœ¬æ–‡è¾ƒé•¿ï¼Œå»ºè®®ç‚¹èµæ”¶è—ã€‚æ›´å¤šAIå¤§æ¨¡å‹åº”ç”¨å¼€å‘å­¦ä¹ è§†é¢‘åŠèµ„æ–™ï¼Œåœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fgitcode.com%2FEnjoyEDU%2FLLM" target="_blank" title="https://gitcode.com/EnjoyEDU/LLM" ref="nofollow noopener noreferrer">è¿™é‡Œ</a>ã€‚</p>
</blockquote>
<p><em><strong>èŠ±äº†äº”ä¸ªå°æ—¶ï¼ŒæŠŠ Google ç™½çš®ä¹¦æ‹†è§£æˆä¸€ä¸ªå¯æ‰§è¡Œçš„ Agent å¿ƒæ™ºæ¨¡å‹çš„é•¿æ–‡ã€‚</strong></em></p>
<p><em><strong>æ²¡ä»€ä¹ˆèŠ±é‡Œèƒ¡å“¨çš„æ–°åè¯ï¼Œä½†æŠŠæ¨¡å‹ã€å·¥å…·ã€ç¼–æ’ã€è®°å¿†ã€è®­ç»ƒè¿™å‡ ä»¶æ ¸å¿ƒäº‹è®²å¾—æ¯”è¾ƒå®Œæ•´ï¼Œå¯¹äºæƒ³è¦äº†è§£çš„Agentçš„åˆå­¦è€…ï¼Œæ˜¯å¾ˆä¸é”™çš„é€‰æ‹©ã€‚</strong></em></p>
<p>Googleæœ€è¿‘å‘å¸ƒäº†ä¸€ç¯‡å…³äºAgenté•¿è¾¾60é¡µçš„æ–‡ä»¶ï¼š <strong>ã€Šåˆåˆ›å…¬å¸æŠ€æœ¯æŒ‡å—ï¼šAI Agentsã€‹</strong> ï¼Œè¿™ä»½æŠ¥å‘Šä»å®£ä¼ æ¥è¯´è¡¨è¾¾äº†è‡ªå·±ä¸ä¹‹å‰åç†è®ºçš„æ–‡ç« ä¸ä¸€æ ·ï¼Œä»–è¿˜æ˜¯æš´éœ²äº†ä¸å°‘ç»†èŠ‚æŠ€å·§ï¼Œå¯¹æ­£åœ¨åšAgentçš„å„ä½åº”è¯¥æœ‰äº›å¸®åŠ©ã€‚</p>
<p><strong>åªä¸è¿‡æˆ‘å®é™…è¯»ä¸‹æ¥ï¼ŒæŠ€å·§ä»€ä¹ˆçš„ç»™çš„å¾ˆä¸€èˆ¬ï¼Œä½†æ˜¯ä¸€ä»½éå¸¸ä¸é”™çš„Agentå…¥é—¨çº§å­¦ä¹ è¯»ç‰©</strong>ï¼Œæ‰€ä»¥ä¹Ÿæ¨èç»™å¤§å®¶ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/84aead72981f443b939f02dfb18e79ef~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L5pWZ56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766642160&amp;x-signature=6cT%2FquUU7dDB94xNzgiWmOtXDmc%3D" alt="" loading="lazy"/></p>
<p>é¦–å…ˆï¼ŒAgentçš„èƒ½åŠ›åŸºçŸ³ï¼ˆä¹Ÿå°±æ˜¯å¯¹å·¥å…·çš„è°ƒç”¨èƒ½åŠ›ï¼‰æ˜¯æ¨¡å‹çš„Function Callingï¼Œè€Œè¿™ä¸ªè¯†åˆ«å·¥å…·æ˜¯å¦åº”è¯¥è¢«è°ƒç”¨çš„èƒ½åŠ›æ˜¯å¾®è°ƒè®­ç»ƒçš„ç»“æœã€‚</p>
<p>æ¯”å¦‚ï¼ŒAgentå¯ä»¥ä½¿ç”¨æ•°æ®åº“å·¥å…·è·å–å®¢æˆ·è®¢å•åšä¸ªæ€§åŒ–æ¨èã€æ ¹æ®ç”¨æˆ·æŒ‡ä»¤è°ƒç”¨é‚®ä»¶ API å‘é€ç”µå­é‚®ä»¶ã€ç”šè‡³è‡ªåŠ¨æ‰§è¡Œé‡‘èäº¤æ˜“...</p>
<p>ä¸Šè¿°æ¯ä¸ªåŠŸèƒ½éƒ½éœ€è¦æ¨¡å‹ä¸å¤–éƒ¨ä¸–ç•Œï¼ˆå·¥å…·ã€æ•°æ®ï¼‰åšäº¤äº’ï¼Œåªè¦<strong>å…·å¤‡è‡ªä¸»è§„åˆ’å’Œå¤šæ­¥ä»»åŠ¡æ‰§è¡Œèƒ½åŠ›çš„ç³»ç»Ÿ</strong>ï¼Œå°±æ˜¯Agentã€‚</p>
<h2 data-id="heading-0">Agentæ¶æ„æ¦‚è§ˆ</h2>
<p>å†æ¬¡å¯„å‡ºè¿™ç« ç»å…¸Agentæ¶æ„å›¾ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ce829b375550401da7767e27786e936d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L5pWZ56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766642160&amp;x-signature=1e%2BbGUK9X0B7GeWIC8a32dw5I64%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-1">ç°ä»£ AI Agent é€šå¸¸ç”±å››å±‚æ ¸å¿ƒç»„ä»¶æ„æˆï¼š</h2>
<p><strong>ä¸€ã€æ¨¡å‹å±‚ï¼š</strong></p>
<p>åŸºç¡€æ¨¡å‹ï¼ˆå¦‚å„ç±»å¤§å‹è¯­è¨€æ¨¡å‹ï¼‰ï¼Œè´Ÿè´£è‡ªç„¶è¯­è¨€ç†è§£ä¸ç”Ÿæˆï¼Œåœ¨ç”Ÿäº§åº”ç”¨é‡Œé¢å¾€å¾€ä¸ä¼šä¾èµ–å•ä¸€æ¨¡å‹ï¼Œç”šè‡³ä¼šæœ‰å¾ˆå¤šå°æ¨¡å‹å¾®è°ƒåœºæ™¯åšå…¶ä¸­ç®€å•ä»»åŠ¡ã€‚</p>
<p><strong>äºŒã€å·¥å…·å±‚ï¼š</strong></p>
<p>å¤–éƒ¨å·¥å…·å’ŒæœåŠ¡ï¼ŒåŒ…å«å„ç§APIå¦‚æ•°æ®åº“ã€æœç´¢å¼•æ“ç­‰ï¼Œå¸®åŠ©Agentæ„ŸçŸ¥å¤–éƒ¨ä¸–ç•Œå¹¶æ‰§è¡Œå®é™…æ“ä½œã€‚</p>
<p>ç°é˜¶æ®µæ¥è¯´ï¼ŒToolsæ˜¯AgentçœŸæ­£çš„æ ¸å¿ƒï¼Œè€Œä¸”<strong>Toolsè°ƒç”¨ä¸å‡†ä¹Ÿæ˜¯Agentæ¶æ„æœ€å¤§çš„éš¾ç‚¹</strong>ï¼Œå½“å‰æˆ‘ä»¬åœ¨ç”Ÿäº§ç¯å¢ƒä½¿ç”¨<strong>SkillsæŠ€æœ¯ + å¼ºæ„å›¾</strong>ä¹Ÿæœ€å¤šæŠŠå‡†ç¡®ç‡åšåˆ°90%å·¦å³ã€‚</p>
<p>æ‰€ä»¥ï¼Œæ•´ä¸ªAgentçš„æˆç†Ÿè¿˜ä»»é‡é“è¿œã€‚</p>
<p><strong>ä¸‰ã€ç¼–æ’å±‚ï¼š</strong></p>
<p>Agentçš„â€œå¤§è„‘â€ï¼Œè´Ÿè´£ç¼–å†™æç¤ºè¯ã€æ‰§è¡Œæ¨ç†æ¡†æ¶ã€ç»´æŠ¤å¯¹è¯çŠ¶æ€å’Œè°ƒç”¨å·¥å…·ã€‚è¯¥å±‚å®ç°äº†æ™ºèƒ½ä½“çš„è®¡åˆ’ã€æ¨ç†ã€å†³ç­–å’Œåé¦ˆå¾ªç¯ã€‚</p>
<p>è¿™æ ·è¯´å¤§å®¶å¯èƒ½å¬ä¸æ‡‚ï¼Œä¹Ÿå°±æ˜¯ReActæ¶æ„å°±æ˜¯è¿™é‡Œçš„ç¼–æ’å±‚äº†ï¼Œä¹Ÿæ˜¯ä¸»è¦ä»£ç ç»„æˆéƒ¨åˆ†ï¼š</p>
<ol>
<li>è´Ÿè´£ç»„ç»‡å†å²å¯¹è¯ï¼ˆçŠ¶æ€ï¼‰ï¼›</li>
<li>å†³å®šä»€ä¹ˆæ—¶å€™è°ƒç”¨æ¨¡å‹ï¼Œä»€ä¹ˆæ—¶å€™è°ƒç”¨å·¥å…·ï¼›</li>
<li>å†³å®šä»€ä¹ˆæ—¶å€™ç»“æŸæ¨ç†ï¼›</li>
<li>å†³å®šæ€ä¹ˆæ‹¼æç¤ºè¯ï¼›</li>
</ol>
<p>ä»–å®šä¹‰â€œæ¯ä¸€è½®â€é‡Œçš„è¯­è¨€ç”Ÿæˆç»“æ„ï¼ˆThoughtã€Actionã€Observationï¼‰</p>
<p>... â†’ æ¨ç†(Thought) â†’ è¡ŒåŠ¨(Action) â†’ è§‚å¯Ÿ(Observation) â†’ ...</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c1df37666f564e11964db44927fa616f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L5pWZ56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766642160&amp;x-signature=zd21PsiSQI3%2FKA8%2BkIgJkLQEUBk%3D" alt="" loading="lazy"/></p>
<p>ReAct = Reason + Actï¼š</p>
<ol>
<li><strong>Reasoningï¼š</strong> è®©LLMæ€è€ƒ"ä¸ºä»€ä¹ˆ"å’Œ"å¦‚ä½•"æ‰§è¡Œè¡ŒåŠ¨ï¼›</li>
<li><strong>Actingï¼š</strong> è®©LLMæ‰§è¡Œå…·ä½“è¡ŒåŠ¨å¹¶ä¸ç¯å¢ƒäº¤äº’ï¼›</li>
<li><strong>å¾ªç¯åé¦ˆï¼š</strong> é€šè¿‡è§‚å¯Ÿç»“æœé©±åŠ¨ä¸‹ä¸€æ­¥æ¨ç†ï¼›</li>
</ol>
<p><strong>å››ã€è®°å¿†å±‚ï¼š</strong></p>
<p>åŒ…æ‹¬çŸ­æœŸè®°å¿†ï¼ˆå¯¹è¯ä¸Šä¸‹æ–‡ã€è¿‘æœŸäº¤äº’ï¼‰å’Œé•¿æœŸè®°å¿†ï¼ˆçŸ¥è¯†åº“ã€å†å²æ•°æ®ã€ä¸ªäººåå¥½ç­‰ï¼‰ã€‚è®°å¿†å±‚ç”¨äºå­˜å‚¨å’Œæ£€ç´¢ä¸ä»»åŠ¡ç›¸å…³çš„ä¿¡æ¯ï¼Œä»¥æ”¯æŒå¤šè½®äº¤äº’å’ŒçŸ¥è¯†è¡¥å……ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/eeb36ddef37f4e059870d8986c99c6dd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L5pWZ56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766642160&amp;x-signature=k4vToPwg07o%2F%2BwYPiLHwp5aL87s%3D" alt="" loading="lazy"/></p>
<p>ä¸¥æ ¼æ¥è¯´ï¼ŒAgentæœ€æ¼ç«çš„å°±æ˜¯è®°å¿†å±‚çš„å¤„ç†ï¼Œè¿™ä¹Ÿæ˜¯ä¸Šä¸‹æ–‡å·¥ç¨‹çš„æœ¬èº«ï¼Œä»–éœ€è¦è§£å†³<strong>æ•°æ®åº”è¯¥å¦‚ä½•ä¸AIäº¤äº’ï¼Œä¿è¯æ¯æ¬¡AIéƒ½èƒ½æ‹¿åˆ°ç›¸å…³æ•°æ®ã€‚</strong> è¿™é‡Œå±•å¼€æœ‰ä¸‰ç‚¹ï¼š</p>
<ol>
<li><strong>æ¯æ¬¡æ£€ç´¢èƒ½ä¸èƒ½æ‹¿åˆ°å¯¹åº”çš„æ•°æ®</strong>ï¼›</li>
<li><strong>æ•°æ®æ˜¯ä¸æ˜¯åˆé€‚</strong>ï¼Œè¿™å—çš„åˆé€‚åŒ…æ‹¬ä¼šä¸ä¼šå¤šã€ä¼šä¸ä¼šå°‘ï¼Œå¤šäº†è´¹Tokenæ˜¯å°äº‹ï¼Œä½†å¯èƒ½å¹²æ‰°æ¨¡å‹ã€å°‘äº†å°±å®¹æ˜“å‡ºé—®é¢˜ï¼›</li>
<li><strong>ç”Ÿæˆå¯¹ä¸å¯¹</strong>ï¼Œè¿™ä¸ªå»ºç«‹åœ¨æ£€ç´¢æ­£ç¡®ï¼Œæ•°æ®ç»„ç»‡æ­£ç¡®çš„æƒ…å†µä¸‹ï¼Œæ¨¡å‹æœ€ç»ˆè¾“å‡ºæ˜¯ä¸æ˜¯ç¬¦åˆé¢„æœŸï¼›</li>
</ol>
<p>è¿™é‡Œæ˜¯æ•´ä½“çš„äº¤äº’æ¶æ„å›¾ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6d055103a6ca4985a99a81d4485a765e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L5pWZ56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766642160&amp;x-signature=ozaA16tz%2FzzHPz7cB0bOCHm2ce8%3D" alt="" loading="lazy"/></p>
<p>å›¾ç¤ºè€Œè¨€ï¼ŒAgentæ‰§è¡Œæµç¨‹å¯æ¦‚æ‹¬ä¸ºï¼š<strong>ç”¨æˆ·è¾“å…¥ â†’ ç¼–æ’å±‚å¤„ç† â†’ æ¨¡å‹ç”Ÿæˆæ€è·¯ â†’ å†³ç­–è°ƒç”¨å·¥å…·æˆ–è¾“å‡ºç»“æœ â†’ å·¥å…·æ‰§è¡Œè·å¾—åé¦ˆ â†’ æ›´æ–°è®°å¿†å¹¶ç»§ç»­å¾ªç¯ï¼Œç›´è‡³ç›®æ ‡å®Œæˆ</strong>ã€‚</p>
<p>åœ¨ ReAct æ¡†æ¶ä¸‹ï¼ŒAgenté‡å¤æ‰§è¡Œ<strong>æ€è€ƒï¼ˆThoughtï¼‰â†’è¡ŒåŠ¨ï¼ˆActionï¼‰â†’è§‚å¯Ÿï¼ˆObservationï¼‰</strong> çš„å¾ªç¯ï¼Œç›´åˆ°äº§ç”Ÿæœ€ç»ˆç­”æ¡ˆã€‚</p>
<p>æœ€åï¼Œä¸å•çº¯çš„æ¨¡å‹ï¼ˆLLMï¼‰ç›¸æ¯”ï¼ŒAgentæœ‰ä»¥ä¸‹å…³é”®åŒºåˆ«ï¼š</p>
<ol>
<li><strong>çŸ¥è¯†æ¥æºï¼š</strong> æ¨¡å‹åªèƒ½ä¾èµ–äºè®­ç»ƒæ•°æ®ï¼ŒçŸ¥è¯†é™æ€ï¼›è€ŒAgenté€šè¿‡å·¥å…·æ‰©å±•çŸ¥è¯†ï¼Œå¯ä»¥å®æ—¶è®¿é—®å¤–éƒ¨ä¿¡æ¯ã€‚</li>
<li><strong>ä¸Šä¸‹æ–‡ç®¡ç†ï¼š</strong> æ¨¡å‹å•æ¬¡æ¨ç†æ²¡æœ‰ä¼šè¯è®°å¿†ï¼›Agentå¯ä»¥ç»´æŠ¤äº¤äº’å†å²ï¼Œå®ç°å¤šè½®è¿ç»­å¯¹è¯ã€‚</li>
<li><strong>æ¨ç†æ¡†æ¶ï¼š</strong> æ¨¡å‹è¾“å‡ºç»“æœå¾€å¾€ä¾èµ–å•ä¸€æç¤ºï¼›Agentå…·å¤‡å†…ç½®çš„è®¤çŸ¥æ¶æ„å’Œæ¨ç†ç­–ç•¥ï¼ˆå¦‚é“¾å¼æ€ç»´ã€åæ€æ¡†æ¶ã€æ ‘å¼æ€ç»´ç­‰ï¼‰ï¼Œèƒ½å¤Ÿåœ¨ç¼–æ’å±‚ä¸­å¾ªç¯è¿­ä»£æ¨ç†æ­¥éª¤ï¼›</li>
</ol>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬å…·ä½“å±•å¼€è¯´ä¸‹Agentçš„å››ä¸ªæ ¸å¿ƒç»„ä»¶ï¼š</p>
<h2 data-id="heading-2">ç¼–æ’å±‚ä¸è®¤çŸ¥æ¶æ„</h2>
<p>ç¼–æ’å±‚æ˜¯æ™ºèƒ½ä½“ç³»ç»Ÿçš„æ ¸å¿ƒæ§åˆ¶å•å…ƒï¼Œè´Ÿè´£ç»„ç»‡ä¿¡æ¯æµå’Œæ‰§è¡Œæ¨ç†å¾ªç¯ã€‚å®ƒæ¨¡æ‹Ÿäººç±»åœ¨åšå¤æ‚ä»»åŠ¡æ—¶çš„è®¤çŸ¥è¿‡ç¨‹ï¼šå…ˆè·å–ä¿¡æ¯ã€ç„¶ååˆ¶å®šè®¡åˆ’ã€æ‰§è¡Œè¡ŒåŠ¨ã€å†æ ¹æ®åé¦ˆè°ƒæ•´è®¡åˆ’ï¼Œä¸æ–­å¾ªç¯ç›´åˆ°å®Œæˆç›®æ ‡ã€‚</p>
<p>ä¸€ä¸ªå¸¸è§çš„æ¯”å–»æ˜¯ <strong>â€œå¨å¸ˆå‡†å¤‡å¤æ‚èœå“â€</strong> ï¼šå¨å¸ˆä¼šæ ¹æ®é¡¾å®¢éœ€æ±‚è·å–é£Ÿæä¿¡æ¯ï¼Œæ€è€ƒçƒ¹é¥ªæ­¥éª¤ï¼Œç„¶åå®é™…çƒ¹é¥ªï¼Œè¿‡ç¨‹ä¸­å¯èƒ½æ ¹æ®å‘³é“åé¦ˆä¸æ–­è°ƒæ•´æ–¹æ³•ã€‚</p>
<p>ç±»ä¼¼çš„ï¼ŒAgentçš„ç¼–æ’å±‚ä¼šæŒ‰ç…§è®¾å®šçš„æ¨ç†æ¡†æ¶åå¤è¿­ä»£ï¼Œé©±åŠ¨æ¨¡å‹ç”Ÿæˆâ€œæ€è€ƒâ€å¹¶åšå‡ºâ€œè¡ŒåŠ¨â€å†³ç­–ã€‚</p>
<p>å¸¸è§çš„æ¨ç†æ¡†æ¶å¤§åŒå°å¼‚ï¼Œè¿™é‡Œä¸€å®šéœ€è¦äº†è§£çš„æ˜¯ä¸¤ä¸ªä¸œè¥¿<strong>ReActä¸CoT</strong>ï¼Œé™¤æ­¤ä¹‹å¤–å¯ä»¥å»¶ä¼¸åˆ°ToTï¼š</p>
<p><strong>ReAct</strong>åœ¨å‰é¢æˆ‘ä»¬åšäº†åŸºç¡€ä»‹ç»ï¼Œè¯¥æ¡†æ¶<strong>å¼ºè°ƒæ¨¡å‹åœ¨å›ç­”å‰è¿›è¡Œè¿ç»­çš„å†…çœå’Œè¡ŒåŠ¨é€‰æ‹©ï¼Œæœ‰åŠ©äºæé«˜ç­”æ¡ˆçš„å‡†ç¡®åº¦å’Œå¯è¿½æº¯æ€§</strong>ï¼›</p>
<p><strong>CoTï¼ˆæ€ç»´é“¾ï¼‰</strong> å¼•å¯¼æ¨¡å‹é€šè¿‡ç”Ÿæˆä¸­é—´æ¨ç†æ­¥éª¤æ¥åˆ†è§£é—®é¢˜ï¼Œä¿ƒä½¿å…¶åœ¨æœ€ç»ˆç­”æ¡ˆå‰å…ˆåˆ—ä¸¾æ€è€ƒè¿‡ç¨‹ï¼Œè¿™ç§æ¡†æ¶å¯ä»¥<strong>å¢å¼ºæ¨¡å‹è§£å†³å¤æ‚é—®é¢˜æ—¶çš„å‡†ç¡®æ€§</strong>ï¼ˆå¹»è§‰é—®é¢˜ï¼‰ã€‚</p>
<p><strong>ToTï¼ˆæ€ç»´æ ‘ï¼‰</strong> æ˜¯åœ¨ CoT çš„åŸºç¡€ä¸Šï¼Œå…è®¸æ¨¡å‹åœ¨å¤šä¸ªå¤‡é€‰æ€è·¯é—´åšæ¯”è¾ƒï¼Œé€‚ç”¨äºéœ€è¦æ¢ç´¢å¤šç§æ–¹æ¡ˆçš„ç­–ç•¥æ€§ä»»åŠ¡ï¼Œç›®çš„ä¾æ—§æ˜¯æå‡å¯¹å¤æ‚é—®é¢˜çš„è§£å†³èƒ½åŠ›ã€‚</p>
<p>ç¯‡å¹…æœ‰é™ï¼Œæˆ‘ä»¬åªè®¨è®ºReActå’ŒCoTçš„é…åˆå³å¯ï¼ˆå…¶ä»–çš„éƒ½ç±»ä¼¼ï¼‰ï¼š</p>
<h3 data-id="heading-3">ReActå’ŒCoT</h3>
<p>é¦–å…ˆï¼ŒReActä¸CoTéƒ½æ˜¯æ¨ç†ç­–ç•¥æ¡†æ¶ä¹Ÿå°±æ˜¯Agentå››å¤§ç»„ä»¶æ ¸å¿ƒçš„ç¼–æ’å±‚å…·è±¡åŒ–å®ç°ï¼Œä»–ä»¬éƒ½æè¿°çš„æ˜¯<strong>å¦‚ä½•ç»„ç»‡æ¨¡å‹çš„æ¨ç†è¿‡ç¨‹ã€ç”Ÿæˆæ­¥éª¤ã€æç¤ºè¯ç»“æ„ã€‚</strong></p>
<p>æ¢å¥è¯è¯´ï¼ŒReActæ˜¯ä»£ç çš„æ ¸å¿ƒï¼Œæ˜¯AIå·¥ç¨‹çš„æ ¸å¿ƒï¼Œä»–ä¼šå†³å®šå¦‚ä½•å»ä¸è®°å¿†ç³»ç»Ÿã€å·¥å…·ç³»ç»Ÿåšé…åˆã€‚</p>
<p>ç„¶åï¼ŒReActé€»è¾‘ä¸Šä¸CoTæ˜¯åŒçº§åˆ«çš„ï¼Œä½†ç°åœ¨æ›´å¤šçš„æ˜¯åœ¨ç»„åˆä½¿ç”¨ï¼Œæ˜¾å¾—CoTæ˜¯ReActçš„ä¸€ä¸ªè¿‡ç¨‹äº§ç‰©ï¼Œå…¶å®å¹¶ä¸æ˜¯çš„ï¼Œé€»è¾‘ä¸ŠCoTä¹Ÿå¯ä»¥è°ƒç”¨å·¥å…·ï¼›</p>
<p>åªä¸è¿‡ç°åœ¨ä»æµè¡ŒèŒƒå¼çš„è§’åº¦æ¥è¯´ï¼ŒReActè¢«ç”¨ä½œä¸»æ¡†æ¶çš„æ—¶é—´ä¼šå¤šä¸€ç‚¹ï¼Œå¹¶ä¸”è¿‡ç¨‹ä¸­ä¼šåŒ…å«å¾ˆå¤šCoTçš„éƒ¨åˆ†ï¼Œè¿™é‡Œçš„ç»“æœæ˜¯ï¼š<strong>ReAct æ˜¯å®¹å™¨ï¼ŒCoT æ˜¯å†…å®¹ã€‚ReAct æ˜¯æœ€â€œAgentâ€åŒ–çš„ã€CoT æ˜¯æœ€åŸºç¡€çš„</strong>ã€‚</p>
<blockquote>
<p>ReAct è§„å®šäº†ï¼šå…ˆæ€è€ƒï¼ˆThoughtï¼‰â†’ è¡ŒåŠ¨ï¼ˆActionï¼‰â†’ ç­‰å¾…ç»“æœï¼ˆObservationï¼‰â†’ å†æ€è€ƒ...</p>
<p>è€Œè¿™ä¸ªâ€œThoughtâ€æ€ä¹ˆå†™ï¼Ÿé€šå¸¸å°±æ˜¯ä¸€ä¸ª Chain of Thought æ¨ç†å—ã€‚</p>
</blockquote>
<p>ä¸¾ä¸ªç®€å•ä¾‹å­ï¼š</p>
<p>è®© Agent å›ç­” <strong>â€œæŸå…¬å¸å‘˜å·¥è¯·å‡æµç¨‹â€</strong> çš„é—®é¢˜ï¼ŒAgent éœ€è¦ï¼š</p>
<ol>
<li>è¯»å–ç”¨æˆ·çš„é—®é¢˜</li>
<li>ä»çŸ¥è¯†åº“ä¸­æ£€ç´¢æ–‡æ¡£</li>
<li>åˆ†æå†…å®¹ç»“æ„</li>
<li>è¾“å‡ºæ¸…æ™°æ­¥éª¤</li>
</ol>
<p>è¿™å—çš„ç®€è¦æµç¨‹æ˜¯ï¼š</p>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-section">User: æˆ‘æƒ³è®¢ä¸€å¼ ä¸‹å‘¨ä»åŒ—äº¬åˆ°ä¸Šæµ·çš„æœºç¥¨ã€‚  </span>
<span class="hljs-section">Thought: æˆ‘éœ€è¦æŸ¥è¯¢èˆªç­ä¿¡æ¯å¹¶è¿›è¡Œæ¯”è¾ƒã€‚  </span>
<span class="hljs-section">Action: è°ƒç”¨ã€èˆªç­æœç´¢ã€‘å·¥å…·  </span>
Action Input: {<span class="hljs-string">"from"</span>:Â <span class="hljs-string">"åŒ—äº¬"</span>,Â <span class="hljs-string">"to"</span>:Â <span class="hljs-string">"ä¸Šæµ·"</span>,Â <span class="hljs-string">"date"</span>:Â <span class="hljs-string">"ä¸‹å‘¨"</span>}  
<span class="hljs-section">Observation: èˆªç­å·¥å…·è¿”å›äº†å¤šç­æ¬¡èˆªç­ä¿¡æ¯ã€‚  </span>
<span class="hljs-section">Thought: æˆ‘åº”è¯¥æŒ‘é€‰ä»·æ ¼å’Œæ—¶é—´åˆé€‚çš„èˆªç­ã€‚  </span>
Final Answer: æ ¹æ®æŸ¥è¯¢ç»“æœï¼Œä¸‹å‘¨ä»åŒ—äº¬åˆ°ä¸Šæµ·çš„èˆªç­æœ‰...ï¼ˆåˆ—å‡ºä¿¡æ¯ï¼‰ã€‚
</code></pre>
<p>è¿™ä¸ª â€œStep 2â€ çš„ Thought éƒ¨åˆ†å°±æ˜¯ä¸€ä¸ªç®€å•çš„Â <strong>CoT</strong>ï¼Œæ¨¡å‹åœ¨æ²¡æœ‰è¡ŒåŠ¨å‰ï¼Œåˆ†æ­¥æ€è€ƒã€æå–ã€ç»„ç»‡ä¿¡æ¯ï¼Œè¿™æ˜¯å…¸å‹çš„æ€ç»´é“¾ã€‚</p>
<p>ä¸ºä»€ä¹ˆè¿™ä¹ˆç”¨ä¹Ÿå¾ˆç®€å•ï¼šAgentæ¶æ„ä¸­ä¹Ÿä¸å¯èƒ½æ¯ä¸€æ­¥éƒ½è°ƒç”¨å·¥å…·ï¼Œå¾ˆå¤šæ—¶å€™åªæ˜¯åœ¨â€œç»„ç»‡æ€ç»´/è¯­è¨€â€ï¼ŒCoTå¯ä»¥æœ‰æ•ˆé™ä½å¹»è§‰ç‡ã€‚</p>
<p>æ€»è€Œè¨€ä¹‹ï¼ŒReAct æ¡†æ¶é‡Œå¯ä»¥æœ‰å¾ˆå¤š CoT å†…å®¹ç©¿æ’å…¶ä¸­ï¼Œè¿™ç§ç»„åˆä¹Ÿæ˜¯æœ€å¸¸è§ã€æœ€ç¨³çš„åšæ³•ï¼Œå¤§å®¶è®°ä½è¿™ç‚¹å°±è¡Œï¼Œè¿™å°±æ˜¯Agentçš„ç¼–æ’å±‚ã€‚</p>
<p>å†ç»“åˆGoogleæŠ¥å‘Šçš„æ¡ˆä¾‹ï¼Œå¤§å®¶åº”è¯¥å¯ä»¥å®Œå…¨ç†è§£äº†ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c459dc038fff4152b7708bce8941e39f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L5pWZ56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766642160&amp;x-signature=4UtSg9kC29am1%2BWzBOR3Hpl0SVo%3D" alt="" loading="lazy"/>```plaintext User: æˆ‘æƒ³è®¢ä¸€å¼ ä¸‹å‘¨ä»åŒ—äº¬åˆ°ä¸Šæµ·çš„æœºç¥¨ã€‚Thought: æˆ‘éœ€è¦æŸ¥è¯¢èˆªç­ä¿¡æ¯å¹¶è¿›è¡Œæ¯”è¾ƒã€‚Action: è°ƒç”¨ã€èˆªç­æœç´¢ã€‘å·¥å…·Action Input: {"from": "åŒ—äº¬", "to": "ä¸Šæµ·", "date": "ä¸‹å‘¨"}Observation: èˆªç­å·¥å…·è¿”å›äº†å¤šç­æ¬¡èˆªç­ä¿¡æ¯ã€‚Thought: æˆ‘åº”è¯¥æŒ‘é€‰ä»·æ ¼å’Œæ—¶é—´åˆé€‚çš„èˆªç­ã€‚Final Answer: æ ¹æ®æŸ¥è¯¢ç»“æœï¼Œä¸‹å‘¨ä»åŒ—äº¬åˆ°ä¸Šæµ·çš„èˆªç­æœ‰...ï¼ˆåˆ—å‡ºä¿¡æ¯ï¼‰ã€‚</p>
<h3 data-id="heading-4">çŠ¶æ€ç®¡ç†</h3>
<p>é™¤åŸºæœ¬æ¡†æ¶ä¹‹å¤–ï¼Œç¼–æ’å±‚è¿˜è´Ÿè´£ç»´æŠ¤<strong>äº¤äº’çŠ¶æ€å’Œå†å²è®°å¿†</strong>ã€‚</p>
<p>ä¸æ¨¡å‹çš„å•è½®å¯¹è¯ä¸åŒï¼ŒAgentéœ€è¦ç®¡ç†å¯¹è¯å†å²ï¼Œå°†å…ˆå‰çš„å¯¹è¯å†…å®¹ã€ç”¨æˆ·æŒ‡ä»¤å’Œå·¥å…·åé¦ˆçº³å…¥çŠ¶æ€ï¼Œå¦åˆ™çš„è¯å¤šè½®å¯¹è¯å°±ä¼šèƒ¡è¨€ä¹±è¯­ã€‚</p>
<p>ä¾‹å¦‚ï¼Œåœ¨å’¨è¯¢ç±»å¯¹è¯ä¸­ï¼ŒAgentä¼šè®°ä½ç”¨æˆ·ä¹‹å‰çš„é—®é¢˜å’Œä¸Šä¸‹æ–‡ï¼Œä¸æ–­ç§¯ç´¯ä¿¡æ¯ï¼Œè¿™å¯¹è§£å†³å¤æ‚é—®é¢˜å’Œæä¾›è¿ç»­æœåŠ¡è‡³å…³é‡è¦ã€‚</p>
<p>æ€»ä¹‹ï¼Œç¼–æ’å±‚å°±åƒAgentçš„â€œå¤§è„‘â€ï¼Œé€šè¿‡å¾ªç¯çš„åé¦ˆæœºåˆ¶å’Œæç¤ºå·¥ç¨‹æ¡†æ¶ï¼Œå¼•å¯¼æ¨¡å‹åˆç†åˆ©ç”¨å·²æœ‰ä¿¡æ¯å’Œå·¥å…·ä¸€æ­¥æ­¥å®ç°ç›®æ ‡ã€‚</p>
<p>çŠ¶æ€ç®¡ç†å¥½åç›´æ¥å…³ç³»åˆ°Agentäº§å“çš„æœ€ç»ˆè¡¨ç°ï¼Œåªä¸è¿‡è¿™é‡Œçš„<strong>çŠ¶æ€ç®¡ç†æå…¶å›°éš¾</strong>ï¼Œå¦‚æœå±•å¼€çš„è¯ä¸‡å­—éƒ½æ‹¿ä¸ä¸‹æ¥...</p>
<h2 data-id="heading-5">å·¥å…·ä½“ç³»</h2>
<p><strong>å·¥å…·æ˜¯æ¨¡å‹ä¸å¤–éƒ¨ä¸–ç•Œä¹‹é—´çš„æ¡¥æ¢ï¼Œä½¿å¾—Agentå¯ä»¥è®¿é—®å¹¶å¤„ç†çœŸå®ä¿¡æ¯</strong></p>
<p>æ ¹æ®æˆ‘ä¹‹å‰çš„å®è·µç»éªŒï¼š<strong>Agentæœ€éš¾çš„éƒ¨åˆ†æ˜¯çŠ¶æ€ç®¡ç†ï¼Œæœ€çƒ¦ï¼ˆä¸ç¨³å®šï¼‰çš„éƒ¨åˆ†æ˜¯æ„å›¾è¯†åˆ«ï¼Œå·¥ä½œé‡æœ€å¤§çš„éƒ¨åˆ†æ˜¯å·¥å…·ä½“ç³»...</strong></p>
<p>å¸¸è§çš„å·¥å…·ç±»å‹åŒ…æ‹¬ æ‰©å±•ï¼ˆExtensionsï¼‰ã€å‡½æ•°è°ƒç”¨ï¼ˆFunctionsï¼‰ å’Œ æ•°æ®å­˜å‚¨ï¼ˆData Storesï¼‰ ç­‰ï¼Œå®ƒä»¬å„è‡ªæ‰¿æ‹…ä¸åŒèŒè´£ï¼Œå…±åŒæ„å»ºäº†æ™ºèƒ½ä½“ä¸å¤–éƒ¨ç¯å¢ƒäº¤äº’çš„èƒ½åŠ›ã€‚ä¸‹é¢åˆ†åˆ«ä»‹ç»è¿™å‡ ç§å·¥å…·ç±»å‹:</p>
<h3 data-id="heading-6">æ‰©å±•</h3>
<p>æ‰€è°“æ‰©å±•ä¹Ÿå°±æ˜¯<strong>æå‰é…ç½®å¥½çš„ä¸€æ‰¹å¯è°ƒç”¨ API æ¨¡å— + æ¨¡å‹èƒ½çœ‹æ‡‚çš„è°ƒç”¨è¯´æ˜</strong>ï¼Œå…¶åº•å±‚åŸºç¡€æ˜¯æ¨¡å‹çš„Function Callingï¼Œç›®çš„æ˜¯è®©æ¨¡å‹ä¸éœ€è¦çŸ¥é“å¾ˆå¤š API çš„ç»†èŠ‚ï¼Œåªéœ€è¦ç»™å…³é”®è¯ï¼š</p>
<pre><code class="hljs language-vbnet" lang="vbnet"><span class="hljs-symbol">Action:</span> èˆªç­æŸ¥è¯¢ Â   
Action Input: {<span class="hljs-keyword">from</span>:Â <span class="hljs-string">"åŒ—äº¬"</span>, <span class="hljs-keyword">to</span>:Â <span class="hljs-string">"ä¸Šæµ·"</span>, <span class="hljs-type">date</span>:Â <span class="hljs-string">"2025-12-10"</span>}
</code></pre>
<p>è¿™é‡Œå†ç»™ä¸€ä¸ªé…ç½®ä¿¡æ¯ï¼š</p>
<pre><code class="hljs language-css" lang="css">{  
Â Â "name":Â <span class="hljs-string">"search_flights"</span>,  
<span class="hljs-string">"description"</span>:Â <span class="hljs-string">"æŸ¥è¯¢æŒ‡å®šæ—¥æœŸçš„èˆªç­ä¿¡æ¯"</span>,  
<span class="hljs-string">"params"</span>: {  
Â  Â Â "<span class="hljs-selector-tag">from</span>":Â <span class="hljs-string">"å‡ºå‘åŸå¸‚"</span>,  
Â  Â Â <span class="hljs-string">"to"</span>:Â <span class="hljs-string">"ç›®çš„åŸå¸‚"</span>,  
Â  Â Â <span class="hljs-string">"date"</span>:Â <span class="hljs-string">"å‡ºå‘æ—¥æœŸï¼ˆYYYY-MM-DDï¼‰"</span>  
Â  },  
"example_calls": [  
Â  Â  {  
Â  Â  Â Â "user_input":Â <span class="hljs-string">"æˆ‘æƒ³æŸ¥æ˜å¤©ä»åŒ—äº¬é£ä¸Šæµ·çš„èˆªç­"</span>,  
Â  Â  Â Â <span class="hljs-string">"action"</span>:Â <span class="hljs-string">"search_flights"</span>,  
Â  Â  Â Â <span class="hljs-string">"action_input"</span>: {  
Â  Â  Â  Â Â "<span class="hljs-selector-tag">from</span>":Â <span class="hljs-string">"åŒ—äº¬"</span>,  
Â  Â  Â  Â Â <span class="hljs-string">"to"</span>:Â <span class="hljs-string">"ä¸Šæµ·"</span>,  
Â  Â  Â  Â Â <span class="hljs-string">"date"</span>:Â <span class="hljs-string">"2025-12-10"</span>  
Â  Â  Â  }  
Â  Â  }  
Â  ]  
}
</code></pre>
<h3 data-id="heading-7">å‡½æ•°è°ƒç”¨</h3>
<p>å‡½æ•°è°ƒç”¨ä¸æ‰©å±•ç±»ä¼¼ï¼ˆéƒ½æ˜¯Function Callingï¼‰ï¼Œä¹Ÿæ˜¯æä¾›ç»™æ¨¡å‹è°ƒç”¨å¤–éƒ¨åŠŸèƒ½çš„æ¥å£ï¼Œä½†å®ƒæ›´ä¾§é‡äºå®¢æˆ·ç«¯ï¼ˆåº”ç”¨ç«¯ï¼‰æ‰§è¡Œï¼Œè€Œä¸æ˜¯åœ¨æ™ºèƒ½ä½“æœåŠ¡å™¨ç«¯ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a27b659824fd4b339c877fab8a0733ba~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L5pWZ56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766642160&amp;x-signature=htyKwzzKB2SfSNrXkmxpNKTHsOU%3D" alt="" loading="lazy"/></p>
<p>ä¸æ‰©å±•å¯¹æ¯”çš„ä¸»è¦å·®åˆ«åœ¨äºï¼Œæ‰©å±•åœ¨æ™ºèƒ½ä½“ç«¯æ‰§è¡Œè°ƒç”¨å¤–éƒ¨æœåŠ¡ï¼Œè€Œå‡½æ•°åœ¨å®¢æˆ·ç«¯æ‰§è¡Œã€‚è¿™æ„å‘³ç€å³ä½¿æ¨¡å‹é€‰æ‹©äº†æŸä¸ªå‡½æ•°ï¼Œå®é™…çš„ API è°ƒç”¨å¯èƒ½ä¼šåœ¨å¦ä¸€ä¸ªæœåŠ¡å±‚é¢å®Œæˆã€‚</p>
<p>è¿™é‡Œå¤§å®¶è¯»èµ·æ¥å¯èƒ½æœ‰ç‚¹ç»•ï¼Œå› ä¸ºæ‰©å±•å’Œå‡½æ•°ç›¸ä¼¼åº¦å¾ˆé«˜ï¼Œæˆ‘ä»¬è¿™é‡Œåšä¸‹ä¸¾ä¾‹è¯´æ˜ï¼š</p>
<p>æ‰©å±•å±äºç³»ç»Ÿè‡ªå·±å¹²ï¼Œä½ è¯´â€œå¸®æˆ‘æŸ¥å¤©æ°”â€ï¼Œå®ƒè‡ªå·±è°ƒæ¥å£ã€è‡ªå·±æ‹¿æ•°æ®ã€è‡ªå·±å¹²ï¼š</p>
<pre><code class="hljs">æ¨¡å‹ï¼šæˆ‘éœ€è¦æŸ¥ä¸‹å¤©æ°”  
Agentç³»ç»Ÿï¼šå¥½çš„ï¼Œæˆ‘æœ‰æ‰‹ï¼Œæˆ‘æ¥è°ƒ API weather.com è·å–æ•°æ®
</code></pre>
<p>å‡½æ•°æ˜¯æ¨¡å‹è‡ªå·±ä¸åšäº‹ï¼Œå®ƒåªæ˜¯å‘Šè¯‰ä½ â€œä½ å»åšâ€ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">æ¨¡å‹ï¼šæˆ‘å»ºè®®è°ƒç”¨å‡½æ•° <span class="hljs-built_in">playVideo</span>({videoId: <span class="hljs-number">123</span>})  
åº”ç”¨å‰ç«¯ï¼šæ”¶åˆ°ï¼Œæˆ‘æ¥æ‰§è¡Œè¿™ä¸ªå‡½æ•°ï¼ˆæ¯”å¦‚è°ƒæ’­æ”¾å™¨ï¼‰
</code></pre>
<p>è¿™ç§å·®å¼‚çš„åŸå› æ˜¯<strong>å®‰å…¨æ€§ã€ç¦»çº¿ã€å¼‚æ­¥</strong>ç­‰åŸå› ï¼Œä¸­æ–­å¼è°ƒç”¨ç”¨å‡½æ•°ï¼Œéä¸­æ–­å¼ç”¨æ‰©å±•ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># æ‰©å±•æ¡ˆä¾‹ï¼š  </span>
Action: query_weather  
Action Input: {<span class="hljs-string">"city"</span>:Â <span class="hljs-string">"åŒ—äº¬"</span>,Â <span class="hljs-string">"date"</span>:Â <span class="hljs-string">"2025-12-10"</span>}  
  
<span class="hljs-comment"># Agentç³»ç»Ÿé€»è¾‘ï¼ˆè‡ªåŠ¨æ‰§è¡Œï¼‰ï¼š  </span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">agent_runtime</span>():  
Â  Â Â <span class="hljs-keyword">if</span>Â action ==Â <span class="hljs-string">"query_weather"</span>:  
Â  Â  Â  Â  result = requests.get(<span class="hljs-string">f"https://api.weather.com?city=<span class="hljs-subst">{city}</span>&amp;date=<span class="hljs-subst">{date}</span>"</span>)  
Â  Â  Â  Â  send_back_to_model(result)  
  
<span class="hljs-comment"># å‡½æ•°æ¡ˆä¾‹ï¼Œä¸­æ–­å¼ï¼š  </span>
Function Call: open_camera  
Args: {<span class="hljs-string">"resolution"</span>:Â <span class="hljs-string">"1080p"</span>}  
  
<span class="hljs-comment"># å®¢æˆ·ç«¯ / æµè§ˆå™¨æ‰§è¡Œï¼ˆä½ æ¥å†™ï¼‰ï¼š  </span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">on_function_call</span>(<span class="hljs-params">fn_name, args</span>):  
Â  Â Â <span class="hljs-keyword">if</span>Â fn_name ==Â <span class="hljs-string">"open_camera"</span>:  
Â  Â  Â  Â  open_webcam(args[<span class="hljs-string">"resolution"</span>])
</code></pre>
<h3 data-id="heading-8">æ•°æ®å­˜å‚¨</h3>
<p>æ•°æ®å­˜å‚¨ä¸ºAgentæä¾›äº†â€œé•¿æœŸè®°å¿†â€å’ŒçŸ¥è¯†åº“çš„åŠŸèƒ½ï¼Œç‰¹åˆ«é€‚ç”¨äºéœ€è¦æŸ¥è¯¢å¤§é‡ç»“æ„åŒ–æˆ–éç»“æ„åŒ–ä¿¡æ¯çš„åœºæ™¯ã€‚</p>
<p>æ ¸å¿ƒæ€æƒ³æ˜¯å°†å¤–éƒ¨æ–‡æ¡£æˆ–æ•°æ®åº“è½¬æ¢æˆå‘é‡ç´¢å¼•ï¼Œè®©æ¨¡å‹é€šè¿‡æ£€ç´¢æ¥è·å–æœ€æ–°å†…å®¹ï¼Œä»è€Œæ‰©å±•å…¶çŸ¥è¯†è¾¹ç•Œã€‚å¸¸è§åšæ³•æ˜¯æ„å»ºå‘é‡åº“æˆ–çŸ¥è¯†åº“ï¼Œå°†æ–‡æ¡£ã€ç½‘é¡µã€è¡¨æ ¼ç­‰é¢„å¤„ç†ä¸ºé«˜ç»´åµŒå…¥å­˜å‚¨ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8e3242841bc240c7afc91dc58840d06b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L5pWZ56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766642160&amp;x-signature=LCr1HyNzY%2B6rims4SnY%2Fh6p3KUU%3D" alt="" loading="lazy"/></p>
<p>ä¾‹å¦‚ï¼Œå¯¹äºå…¬å¸å†…éƒ¨çŸ¥è¯†åº“é—®ç­”ï¼Œæ™ºèƒ½ä½“ä¼šå…ˆå°†ç”¨æˆ·é—®é¢˜è½¬æ¢ä¸ºå‘é‡å¹¶æ£€ç´¢é¢„ç´¢å¼•çš„å†…éƒ¨æ–‡æ¡£ï¼Œå¾—åˆ°çš„ç›¸å…³æ–‡æ¡£æ®µè½ä½œä¸ºè¡¥å……ä¿¡æ¯æä¾›ç»™æ¨¡å‹ã€‚è¿™æ ·ï¼Œç”Ÿæˆçš„å›ç­”å°±åŸºäºæœ€æ–°çš„ä¸šåŠ¡æ‰‹å†Œæˆ–æ³•è§„æ–‡æœ¬ï¼Œè€Œä¸æ˜¯ä»…å‡­æ¨¡å‹è®­ç»ƒæ—¶æœ‰é™çš„æ•°æ®ã€‚</p>
<p>å¦‚å›¾ç¤ºä¾‹æ‰€ç¤ºï¼Œç”¨æˆ·æŸ¥è¯¢â€œå…¬å¸åœ¨åŒ—ç¾çš„æœ€æ–°ä¸šåŠ¡è§„æ¨¡å¦‚ä½•ï¼Ÿâ€ï¼Œæ™ºèƒ½ä½“å…ˆæ£€ç´¢è´¢ç»æŠ¥å‘Šå’Œå¸‚åœºæ•°æ®ï¼Œç„¶ååœ¨ ReAct å¾ªç¯ä¸­åˆ©ç”¨è¿™äº›æ£€ç´¢ç»“æœè¿›è¡Œç»¼åˆæ¨ç†å’Œå›ç­”ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/575a54154d954a65b29b9506299fd796~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L5pWZ56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766642160&amp;x-signature=ispq7R1s0KAnUQlT4dNsVkINfAU%3D" alt="" loading="lazy"/></p>
<p>å…¶å®ä»è¿™éƒ¨åˆ†å†…å®¹è´¨é‡æ¥è¯´ï¼ŒGoogleçš„æŠ¥å‘Šå†™å¾—æŒºä¸€èˆ¬çš„ï¼Œä½œä¸ºç§‘æ™®è¯»ç‰©æŒºä¸é”™çš„...</p>
<h2 data-id="heading-9">è®°å¿†ç³»ç»Ÿ</h2>
<p>åœ¨Agentç³»ç»Ÿä¸­ï¼Œ<strong>è®°å¿†å±‚</strong>ä¸ä»…è´Ÿè´£ä¿å­˜ä¸Šä¸‹æ–‡ã€æ”¯æ’‘å¤šè½®å¯¹è¯ï¼Œå®ƒæ›´æ·±å±‚çš„èŒè´£ï¼Œæ˜¯å›ç­”è¿™æ ·ä¸€ä¸ªé—®é¢˜ï¼š</p>
<blockquote>
<p>æ•°æ®å¦‚ä½•ä¸AIäº¤äº’ï¼Œæ‰èƒ½è®©å¤§æ¨¡å‹â€œçœŸæ­£ç†è§£ä»»åŠ¡â€ï¼Ÿ</p>
</blockquote>
<p>è¿™ä¸€é—®é¢˜çš„å›ç­”ï¼Œè¿‘æ¥å¸¸è¢«åŒ…è£…ä¸ºä¸€ä¸ªæ–°æœ¯è¯­ï¼š<strong>ä¸Šä¸‹æ–‡å·¥ç¨‹ï¼ˆContext Engineeringï¼‰ã€‚</strong></p>
<p>ä½†ä»æœ¬è´¨çœ‹ï¼Œå®ƒä»æ˜¯å¯¹â€œå¦‚ä½•æ„é€ æœ‰æ•ˆPromptâ€çš„æ·±åŒ–å’Œç»“æ„åŒ–è®¾è®¡ï¼Œæ˜¯æç¤ºè¯å·¥ç¨‹åœ¨å¤æ‚ä»»åŠ¡è½åœ°åœºæ™¯ä¸‹çš„è‡ªç„¶æ¼”è¿›ã€‚</p>
<h3 data-id="heading-10">ä¸Šä¸‹æ–‡å·¥ç¨‹</h3>
<p>é€šå¸¸æˆ‘ä»¬å°† Agent çš„è®°å¿†ç³»ç»Ÿåˆ’åˆ†ä¸ºä¸¤ä¸ªå±‚æ¬¡ï¼š</p>
<p><strong>ä¸€ã€çŸ­æœŸè®°å¿†ï¼ˆShort-Term Memoryï¼‰</strong></p>
<p>æŒ‡å½“å‰ä¼šè¯çš„ä¸Šä¸‹æ–‡å†å²ï¼ŒåŒ…æ‹¬ç”¨æˆ·è¾“å…¥ã€æ¨¡å‹å›å¤ã€ä¸­é—´æ¨ç†ç—•è¿¹ï¼›</p>
<p>å¤šä¿å­˜åœ¨ç¼–æ’å±‚çš„å¯¹è¯çŠ¶æ€ä¸­ï¼Œç”¨ä½œ Prompt ä¸Šä¸‹æ–‡æ„å»ºã€‚</p>
<p><strong>äºŒã€é•¿æœŸè®°å¿†ï¼ˆLong-Term Memoryï¼‰</strong></p>
<p>æŒ‡è·¨ä¼šè¯çš„çŸ¥è¯†å­˜å‚¨ï¼Œå¦‚ç”¨æˆ·åå¥½ã€å†å²æ•°æ®ã€ç»„ç»‡å†…éƒ¨èµ„æ–™ã€æ–‡æ¡£åº“ç­‰ï¼›</p>
<p>é€šå¸¸é€šè¿‡å‘é‡æ£€ç´¢ï¼ˆRAGï¼‰ç­‰æ–¹å¼åŠ¨æ€å–ç”¨ï¼Œå®ç°åœ¨è¿è¡Œæ—¶â€œè¡¥å…¨çŸ¥è¯†â€ã€‚</p>
<p>ä½†çœŸå®åœºæ™¯ä¸­ï¼Œè®°å¿†ç³»ç»Ÿè¿œä¸æ­¢â€œå­˜+å–â€è¿™ä¹ˆç®€å•ï¼Œå®ƒçš„æ ¸å¿ƒç›®æ ‡æ˜¯ï¼š</p>
<blockquote>
<p>ä¸ºå¤§æ¨¡å‹æä¾›â€œæ°åˆ°å¥½å¤„â€çš„ä¿¡æ¯ï¼Œæ—¢ä¸è¿‡å¤šæ‰“æ‰°æ¨¡å‹ï¼Œä¹Ÿä¸é—æ¼å…³é”®ä¿¡æ¯</p>
</blockquote>
<p>è¿™å¼•å‡ºäº†â€œä¸Šä¸‹æ–‡å·¥ç¨‹â€çš„å®æ“ä¸‰éš¾ç‚¹ï¼š</p>
<ol>
<li><strong>æ‹¿å¾—åˆ°å—ï¼Ÿ</strong> æ£€ç´¢é€»è¾‘æ˜¯å¦åˆç†ï¼Œæ˜¯å¦æ¼æ‰å…³é”®ä¿¡æ¯ï¼Ÿ</li>
<li><strong>æ‹¿å¾—å‡†å—ï¼Ÿ</strong> å†…å®¹æ˜¯å¦ç›¸å…³ï¼Ÿæ˜¯å¦è¿‡å¤šå¹²æ‰°æ¨¡å‹æˆ–ä¸¥é‡ç¼ºæ¼ï¼Ÿ</li>
<li><strong>ç”¨å¾—å¯¹å—ï¼Ÿ</strong> æœ€ç»ˆç»„ç»‡è¿› Prompt çš„æ–¹å¼æ˜¯å¦æœ‰æ•ˆæ¿€å‘æ¨¡å‹è¾“å‡ºï¼Ÿ</li>
</ol>
<p>ä»å·¥ç¨‹è§’åº¦è®²ï¼Œä¸Šä¸‹æ–‡å°±åƒ Prompt çš„RAMï¼Œå®¹é‡æœ‰é™ä½†ç›´æ¥å†³å®šæ¨¡å‹è¿è¡Œè¡¨ç°ã€‚è®¾è®¡åˆç†çš„ä¸Šä¸‹æ–‡ç»„ç»‡ç­–ç•¥ï¼Œæ˜¯Agentç³»ç»Ÿæœ€é‡è¦çš„ç«äº‰åŠ›ä¹‹ä¸€ã€‚</p>
<p>æ ¹æ®ä¹‹å‰çš„ç»éªŒï¼Œå¯ä»¥æŠŠä¸Šä¸‹æ–‡å·¥ç¨‹æ“ä½œæ¨¡å¼åˆ†ä¸ºå››ç±»ï¼š</p>



































<table><thead><tr><th>æ‰‹æ³•</th><th>æ ¸å¿ƒæ€è·¯</th><th>ç±»æ¯”</th><th>å¸¸è§åœºæ™¯</th></tr></thead><tbody><tr><td><strong>1. è®°å½•å¼ï¼ˆWriteï¼‰</strong></td><td>è®© AI éšæ—¶æŠŠé‡è¦ç»†èŠ‚å†™è¿›â€œéšèº«ç¬”è®°â€</td><td>äººç±»åšä¼šè®®é€Ÿè®°</td><td>ChatGPT å­˜ç”¨æˆ·å¸¸ç‚¹å¤–å–ã€åå¥½ç­‰</td></tr><tr><td><strong>2. ç”„é€‰å¼ï¼ˆSelectï¼‰</strong></td><td>ä»èµ„æ–™ä¸­æŒ‘å‡ºæœ€ relevant çš„å†å–‚ç»™æ¨¡å‹</td><td>å›¾ä¹¦ç®¡ç†å‘˜æ‰¾æŒ‡å®šç« èŠ‚</td><td>Code Agent æ£€ç´¢å‡½æ•°æ–‡ä»¶ã€çŸ¥è¯†ç‚¹</td></tr><tr><td><strong>3. ç²¾ç®€å¼ï¼ˆCompressï¼‰</strong></td><td>å½“ä¿¡æ¯çˆ†æ£šï¼Œç”¨æ‘˜è¦ã€æç‚¼ã€å»å†—ä½™æ‰‹æ®µå‡è½»æ¨¡å‹è´Ÿæ‹…</td><td>ç»™è®ºæ–‡å†™æ‘˜è¦</td><td>Claude å¿«æ»¡çª—å£æ—¶è‡ªåŠ¨å‹ç¼©å†å²å¯¹è¯</td></tr><tr><td><strong>4. åˆ†éš”å¼ï¼ˆIsolateï¼‰</strong></td><td>å°†å¤æ‚ä»»åŠ¡æ‹†åˆ†ç»™å¤šä¸ªâ€œåŠ©æ‰‹â€ï¼Œå„è‡ªè®°å¿†ä¸åŒä¸Šä¸‹æ–‡</td><td>é¡¹ç›®ç»ç†åˆ†æ´¾å­ä»»åŠ¡</td><td>Swarm Agent ä¸­å¤šä¸ªå­æ¨¡å‹åˆ†å·¥åä½œ</td></tr></tbody></table>
<p>è¿™äº›æ–¹æ³•çš„ç»„åˆï¼Œæ„æˆäº†çœŸæ­£èƒ½ç”¨ã€èƒ½è½åœ°çš„ä¸Šä¸‹æ–‡å·¥ç¨‹ï¼Œå…¶å®å¤§å®¶ä¹Ÿå¯ä»¥çœ‹å‡ºæ¥äº†ï¼Œ<strong>å°½ç®¡ä¸Šä¸‹æ–‡å·¥ç¨‹ã€Agentçš„è®°å¿†ç³»ç»Ÿå¬èµ·æ¥å¾ˆå±Œï¼Œå…¶æœ¬è´¨è¿˜æ˜¯å¤æ‚çš„æç¤ºè¯å·¥ç¨‹</strong>...</p>
<p>æœ€åå›å½’åˆ°Â <strong>Agent ReAct æ¡†æ¶</strong>ï¼Œæˆ‘ä»¬å†çœ‹çœ‹å››å¤§ç»„ä»¶çš„å…³ç³»ï¼š</p>
<h3 data-id="heading-11">ReAct æ¡†æ¶ä¸­çš„è®°å¿†å±‚è§’è‰²</h3>
<p>åœ¨ReActæ¡†æ¶ä¸­ï¼Œæ¯ä¸€ä¸ª Thought çš„è´¨é‡ï¼Œä¸¥é‡ä¾èµ–äºCoTï¼Œè€ŒCoTåˆä¸¥é‡ä¾èµ–äºè®°å¿†ç³»ç»Ÿæä¾›çš„ä¿¡æ¯æ˜¯å¦å……è¶³ã€æ˜¯å¦å‡†ç¡®ã€æ˜¯å¦å¹²æ‰°æœ€å°ã€‚</p>
<p>åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œè®°å¿†ç³»ç»Ÿè´Ÿè´£ä¸º Thought æ„å»ºä¸Šä¸‹æ–‡è¾“å…¥ï¼Œå³ Prompt ä¸­çš„ Memory åŒºå—ã€‚ä¸€ä¸ªå…¸å‹çš„ ReAct è°ƒç”¨é“¾å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">User:</span> <span class="hljs-string">æˆ‘éœ€è¦æ‰¾ä¸€å¼ æ˜å¤©ä¸‹åˆä»åŒ—äº¬å»ä¸Šæµ·çš„é«˜é“ç¥¨</span>  
<span class="hljs-string">-----------------</span>  
<span class="hljs-attr">Thought:</span> <span class="hljs-string">æˆ‘éœ€è¦æŸ¥è¯¢é«˜é“ç¥¨ä¿¡æ¯</span>  
<span class="hljs-attr">Action:</span> <span class="hljs-string">æŸ¥è¯¢é«˜é“</span> <span class="hljs-string">APIï¼ˆè¾“å…¥åŸå¸‚å’Œæ—¶é—´ï¼‰</span>  
<span class="hljs-attr">Observation:</span> <span class="hljs-string">è¿”å›å¤šä¸ªç­æ¬¡å’Œæ—¶é—´æ®µ</span>  
<span class="hljs-attr">Thought:</span> <span class="hljs-string">æˆ‘æŒ‘é€‰ä¸€ä¸ªä¸‹åˆå‡ºå‘ã€ä»·æ ¼åˆé€‚çš„è½¦æ¬¡</span>  
<span class="hljs-attr">Action:</span> <span class="hljs-string">None</span>  
<span class="hljs-attr">Final Answer:</span> <span class="hljs-string">ä¸ºæ‚¨æ‰¾åˆ°ä¸¤å¼ æ˜å¤©ä¸‹åˆä»åŒ—äº¬åˆ°ä¸Šæµ·çš„é«˜é“ç¥¨...ï¼ˆè¾“å‡ºç»“æœï¼‰</span>
</code></pre>
<p>åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼š</p>
<ol start="0">
<li>è‹¥ä¹‹å‰ç”¨æˆ·å·²ç»è¡¨è¾¾è¿‡åå¥½å¦‚â€œåªè¦ä¸€ç­‰åº§â€ã€â€œä¸ååŠ¨è½¦â€ç­‰ï¼Œé•¿æœŸè®°å¿†éœ€è¦æä¾›è¿™äº›åå¥½ä¿¡æ¯ï¼›</li>
<li>è‹¥ç”¨æˆ·æ­¤å‰æè¿‡â€œå’Œæ˜¨å¤©æµç¨‹ä¸€æ ·â€ï¼ŒçŸ­æœŸè®°å¿†è¦å‡†ç¡®æå–é‚£æ¬¡ä¼šè¯å†…å®¹ï¼›</li>
<li>è‹¥è°ƒç”¨æŸ¥è¯¢å·¥å…·è¿”å›å¤§é‡å†…å®¹ï¼Œè®°å¿†ç³»ç»Ÿéœ€åˆ¤æ–­æå–å“ªäº› Observation å¡å…¥ä¸‹ä¸€æ­¥ Promptï¼›</li>
</ol>
<p>ä»è¿™é‡Œå¤§å®¶ä¹Ÿå¯ä»¥çœ‹å‡ºReActçš„é‡è¦æ€§å’Œå¤æ‚åº¦äº†ï¼Œä»–æ˜¯æ¨åŠ¨æ¨ç†å¾ªç¯å‘å‰çš„åŸºç¡€ã€‚</p>
<p>å¦ä¸€æ–¹é¢ï¼Œä¸ºä»€ä¹ˆè¯´ä¸Šä¸‹æ–‡å·¥ç¨‹æ˜¯æ•´å¥— Agent æ¶æ„æœ€å®¹æ˜“å¿½è§†ã€ä½†æœ€å®¹æ˜“å‡ºé—®é¢˜çš„éƒ¨åˆ†ï¼Ÿå› ä¸ºå®ƒä¸€æ—¦åšä¸å¥½ï¼Œæ¨¡å‹ç”Ÿæˆçš„ Thought å°†ä¼šæ˜¯ç©ºè½¬ã€åç¦»ã€æˆ–è€…å¹»è§‰çš„ã€‚</p>
<p>æ€»è€Œè¨€ä¹‹ï¼Œè¿™å—æ˜¯äº‹å®ä¸Šçš„éš¾ç‚¹ï¼Œå¤§å®¶å¥½å¥½ä½“æ‚Ÿå§ã€‚</p>
<h2 data-id="heading-12">å¼ºåŒ–ä¸è®­ç»ƒ</h2>
<p>æ¨¡å‹å‘å±•äº†ä¸‰å¹´ç»å†äº†ä¸‰ä¸ªæ—¶ä»£ï¼š<strong>ç™¾æ¨¡å¤§æˆ˜æ¨¡å‹è®­ç»ƒ â†’ å¥—å£³ä¸ºè£ï¼Œæç¤ºè¯å·¥ç¨‹ â†’ CoT</strong>ï¼Œä¹Ÿå°±æ˜¯å½“å‰<strong>ä¸šå†…æ™®éå¯¹äºæ¨¡å‹è®­ç»ƒæ˜¯ååˆ†æ’æ–¥çš„</strong>ï¼Œè¿™æ„å‘³ç€æŠ€æœ¯è´Ÿè´£äººè¯´å‡ºè¦è®­ç»ƒï¼Œè¿™ç¬”é¢„ç®—å¯èƒ½ä¼šæœ‰å¾ˆå¤§çš„å‹åŠ›...</p>
<p>åªä¸è¿‡ï¼Œè™½ç„¶åŸºç¡€æ¨¡å‹å·²ç»å…·å¤‡å¼ºå¤§çš„èƒ½åŠ›ï¼Œä½†è¦è®©æ¨¡å‹åœ¨ç‰¹å®šAgentæ¶æ„ä¸­å‘æŒ¥æœ€ä½³æ•ˆæœï¼Œå¾€å¾€éœ€è¦é’ˆå¯¹æ€§åœ°å­¦ä¹ ä½¿ç”¨æ–°å·¥å…·å’Œæ–°çŸ¥è¯†ã€‚ç™½çš®ä¹¦æ€»ç»“äº†ä¸‰ç§ä¸»è¦æ–¹æ³•ï¼š</p>
<p><strong>ä¸€ã€ä¸Šä¸‹æ–‡å†…å­¦ä¹ ï¼ˆIn-context Learningï¼‰ï¼š</strong></p>
<p>åœ¨æ¨ç†æ—¶ä¸ºæ¨¡å‹æä¾›ä»»åŠ¡ç›¸å…³çš„æç¤ºã€å·¥å…·è¯´æ˜å’Œå°‘é‡ç¤ºä¾‹ï¼Œè®©æ¨¡å‹â€œåœ¨çº¿â€å­¦ä¹ å¦‚ä½•ä½¿ç”¨å·¥å…·ã€‚</p>
<p>ä¾‹å¦‚ï¼Œé€šè¿‡å‡ ä¸ªç¤ºä¾‹å¯¹è¯å±•ç¤ºåœ¨ç±»ä¼¼åœºæ™¯ä¸‹ä½¿ç”¨å“ªç§å·¥å…·ã€æ€æ ·è°ƒç”¨ï¼Œå¯æå‡æ¨¡å‹çš„å·¥å…·è°ƒç”¨å‡†ç¡®ç‡ã€‚</p>
<p>ReAct æœ¬èº«å°±æ˜¯ä¸€ç§å…¸å‹çš„ä¸Šä¸‹æ–‡ç¤ºä¾‹é©±åŠ¨çš„æç¤ºæ¡†æ¶ã€‚</p>
<p><strong>äºŒã€æ£€ç´¢å¼ä¸Šä¸‹æ–‡å­¦ä¹ ï¼ˆRetrieval-based In-context Learningï¼‰ï¼š</strong></p>
<p>è‡ªåŠ¨æ£€ç´¢<strong>å’Œé€‰æ‹©æœ€ç›¸å…³çš„çŸ¥è¯†ç‰‡æ®µ</strong>ã€ç¤ºä¾‹æˆ–å·¥å…·è¯´æ˜ä½œä¸ºæç¤ºçš„ä¸€éƒ¨åˆ†ï¼Œä»å¤–éƒ¨è®°å¿†åº“ï¼ˆå¦‚â€œç¤ºä¾‹å­˜å‚¨â€æˆ–çŸ¥è¯†åº“ï¼‰ä¸­åŠ¨æ€æ„é€ æç¤ºã€‚</p>
<p>è¿™ç±»ä¼¼äºç»™æ¨¡å‹â€œæä¾›ä¸€æœ¬åŠ¨çš„èœè°±â€ï¼šè®©å®ƒæ ¹æ®æŸ¥è¯¢ä»çŸ¥è¯†åº“æ£€ç´¢ç¤ºä¾‹æ¥æŒ‡å¯¼å†³ç­–ã€‚</p>
<p><strong>ä¸‰ã€å¾®è°ƒè®­ç»ƒï¼ˆFine-tuningï¼‰ï¼š</strong></p>
<p>æœ€åå°±æ˜¯å¾®è°ƒäº†ï¼Œä½¿ç”¨å¤§é‡ç‰¹å®šä»»åŠ¡çš„ç¤ºä¾‹æ•°æ®å¯¹æ¨¡å‹è¿›è¡Œå¾®è°ƒï¼Œå¯ä»¥æ›´å¥½çš„æé«˜æ•ˆæœã€‚æ¯”å¦‚ï¼Œä¸ºå®¢æœæ™ºèƒ½ä½“å¾®è°ƒæ¨¡å‹ï¼Œè®©å®ƒå­¦ä¼šä¼˜å…ˆè°ƒç”¨çŸ¥è¯†åº“å·¥å…·è€Œä¸æ˜¯ç›´æ¥â€œèƒ¡ä¹±å›ç­”â€ã€‚</p>
<p>è¿™é‡Œæ˜¯ä¸€äº›è®­ç»ƒæ•°æ®æ¡ˆä¾‹ï¼Œå¤§å®¶æ„Ÿå—ä¸‹å°±å¥½ï¼š</p>
<pre><code class="hljs language-swift" lang="swift">{  
Â Â <span class="hljs-string">"context"</span>:Â <span class="hljs-string">"ã€å†…éƒ¨æ–‡æ¡£æ‘˜å½•ã€‘æœ¬å…¬å¸æ ‡å‡†é€€è´§æ”¿ç­–ä¸ºï¼šè‡ªæ”¶è´§ä¹‹æ—¥èµ· 7 æ—¥å†…å¯æ— ç†ç”±é€€è´§ï¼Œè¶…è¿‡ 7 æ—¥ä¸äºˆå—ç†ã€‚"</span>,  
<span class="hljs-string">"question"</span>:Â <span class="hljs-string">"ä½ ä»¬é€€è´§æ”¿ç­–æ˜¯æ€æ ·çš„ï¼Ÿ"</span>,  
<span class="hljs-string">"answer"</span>:Â <span class="hljs-string">"æ ¹æ®æˆ‘ä»¬çš„æ ‡å‡†é€€è´§æ”¿ç­–ï¼Œè‡ªæ”¶è´§ä¹‹æ—¥èµ· 7 æ—¥å†…æ‚¨å¯ä»¥æ— ç†ç”±é€€è´§ï¼Œè¶…è¿‡ 7 æ—¥åˆ™æ— æ³•åŠç†é€€è´§ã€‚"</span>  
}  
  
{  
<span class="hljs-string">"goal"</span>:Â <span class="hljs-string">"å¸®ç”¨æˆ·è§„åˆ’ä¸€ä¸ª 3 å¤©çš„ä¸œäº¬è‡ªç”±è¡Œï¼Œé¢„ç®—é€‚ä¸­ï¼Œå–œæ¬¢ç¾é£Ÿå’ŒåŠ¨æ¼«æ–‡åŒ–ã€‚"</span>,  
<span class="hljs-string">"tools"</span>: [<span class="hljs-string">"search_flights"</span>,Â <span class="hljs-string">"search_hotels"</span>,Â <span class="hljs-string">"search_attractions"</span>],  
<span class="hljs-string">"plan"</span>: {  
Â  Â Â <span class="hljs-string">"steps"</span>: [  
Â  Â  Â  {  
Â  Â  Â  Â Â <span class="hljs-string">"step_id"</span>: <span class="hljs-number">1</span>,  
Â  Â  Â  Â Â <span class="hljs-string">"description"</span>:Â <span class="hljs-string">"ç¡®å®šå‡ºå‘å’Œè¿”å›æ—¥æœŸï¼Œå¹¶æŸ¥è¯¢å¾€è¿”æœºç¥¨é€‰é¡¹"</span>,  
Â  Â  Â  Â Â <span class="hljs-string">"tool"</span>:Â <span class="hljs-string">"search_flights"</span>,  
Â  Â  Â  Â Â <span class="hljs-string">"inputs"</span>: [<span class="hljs-string">"å‡ºå‘åŸå¸‚"</span>,Â <span class="hljs-string">"ä¸œäº¬"</span>,Â <span class="hljs-string">"å‡ºå‘æ—¥æœŸ"</span>,Â <span class="hljs-string">"è¿”å›æ—¥æœŸ"</span>]  
Â  Â  Â  },  
Â  Â  Â  {  
Â  Â  Â  Â Â <span class="hljs-string">"step_id"</span>: <span class="hljs-number">2</span>,  
Â  Â  Â  Â Â <span class="hljs-string">"description"</span>:Â <span class="hljs-string">"æ ¹æ®é¢„ç®—å’Œåœ°ç†ä½ç½®æœç´¢é…’åº—ï¼ˆä¼˜å…ˆæ–°å®¿ã€æ¶©è°·é™„è¿‘ï¼‰"</span>,  
Â  Â  Â  Â Â <span class="hljs-string">"tool"</span>:Â <span class="hljs-string">"search_hotels"</span>,  
Â  Â  Â  Â Â <span class="hljs-string">"inputs"</span>: [<span class="hljs-string">"ä¸œäº¬"</span>,Â <span class="hljs-string">"3 æ™š"</span>,Â <span class="hljs-string">"é¢„ç®—èŒƒå›´"</span>]  
Â  Â  Â  },  
Â  Â  Â  {  
Â  Â  Â  Â Â <span class="hljs-string">"step_id"</span>: <span class="hljs-number">3</span>,  
Â  Â  Â  Â Â <span class="hljs-string">"description"</span>:Â <span class="hljs-string">"æ ¹æ®ç”¨æˆ·å…´è¶£ç­›é€‰æ™¯ç‚¹ï¼ˆåŠ¨æ¼«æ–‡åŒ–ã€ç¾é£Ÿè¡—ï¼‰å¹¶æŒ‰å¤©åˆ†é…"</span>,  
Â  Â  Â  Â Â <span class="hljs-string">"tool"</span>:Â <span class="hljs-string">"search_attractions"</span>,  
Â  Â  Â  Â Â <span class="hljs-string">"inputs"</span>: [<span class="hljs-string">"ä¸œäº¬"</span>,Â <span class="hljs-string">"åŠ¨æ¼«"</span>,Â <span class="hljs-string">"ç¾é£Ÿ"</span>]  
Â  Â  Â  }  
Â  Â  ]  
Â  }  
}  
  
{<span class="hljs-string">"messages"</span>: [  
Â  {<span class="hljs-string">"role"</span>:Â <span class="hljs-string">"system"</span>,Â <span class="hljs-string">"content"</span>:Â <span class="hljs-string">"ä½ æ˜¯ä¸€ä¸ªä»»åŠ¡è§„åˆ’åŠ©æ‰‹ï¼Œæ”¶åˆ°ç”¨æˆ·ç›®æ ‡ååªè¾“å‡º JSON æ ¼å¼çš„ä»»åŠ¡æ‹†è§£è®¡åˆ’ã€‚"</span>},  
Â  {<span class="hljs-string">"role"</span>:Â <span class="hljs-string">"user"</span>,Â <span class="hljs-string">"content"</span>:Â <span class="hljs-string">"å¸®æˆ‘è§„åˆ’ä¸€ä¸ª 3 å¤©çš„ä¸œäº¬è‡ªç”±è¡Œï¼Œé¢„ç®—é€‚ä¸­ï¼Œæˆ‘å–œæ¬¢ç¾é£Ÿå’ŒåŠ¨æ¼«ã€‚"</span>},  
Â  {  
Â  Â Â <span class="hljs-string">"role"</span>:Â <span class="hljs-string">"assistant"</span>,  
Â  Â Â <span class="hljs-string">"content"</span>:Â <span class="hljs-string">"{<span class="hljs-subst">\"</span>steps<span class="hljs-subst">\"</span>: [\  
Â  Â  Â  {<span class="hljs-subst">\"</span>step_id<span class="hljs-subst">\"</span>: 1, <span class="hljs-subst">\"</span>description<span class="hljs-subst">\"</span>: <span class="hljs-subst">\"</span>ç¡®è®¤å‡ºå‘/è¿”å›æ—¥æœŸå¹¶æŸ¥è¯¢æœºç¥¨<span class="hljs-subst">\"</span>, <span class="hljs-subst">\"</span>tool<span class="hljs-subst">\"</span>: <span class="hljs-subst">\"</span>search_flights<span class="hljs-subst">\"</span>},\  
Â  Â  Â  {<span class="hljs-subst">\"</span>step_id<span class="hljs-subst">\"</span>: 2, <span class="hljs-subst">\"</span>description<span class="hljs-subst">\"</span>: <span class="hljs-subst">\"</span>æ ¹æ®é¢„ç®—å’Œä½ç½®é€‰æ‹©é…’åº—<span class="hljs-subst">\"</span>, <span class="hljs-subst">\"</span>tool<span class="hljs-subst">\"</span>: <span class="hljs-subst">\"</span>search_hotels<span class="hljs-subst">\"</span>},\  
Â  Â  Â  {<span class="hljs-subst">\"</span>step_id<span class="hljs-subst">\"</span>: 3, <span class="hljs-subst">\"</span>description<span class="hljs-subst">\"</span>: <span class="hljs-subst">\"</span>ä¸º 3 å¤©åˆ†åˆ«å®‰æ’æ™¯ç‚¹å’Œç¾é£Ÿ<span class="hljs-subst">\"</span>, <span class="hljs-subst">\"</span>tool<span class="hljs-subst">\"</span>: <span class="hljs-subst">\"</span>search_attractions<span class="hljs-subst">\"</span>}\  
Â  Â  ]}"</span>  
Â  }  
]}
</code></pre>
<p>åœ¨ç”Ÿäº§ç¯å¢ƒä¸Šï¼Œè¿™ä¸‰ä¸ªå¾€å¾€ä¼šæ··ç”¨ã€‚</p>
<h2 data-id="heading-13">ç»“è¯­</h2>
<p>ç™½çš®ä¹¦åé¢è¿˜ä¼šæ¶‰åŠ<strong>å¤šAgentæ¶æ„ã€é«˜å¹¶å‘æ¶æ„è®¾è®¡ã€å®‰å…¨</strong>ç­‰æ¨¡å—ï¼Œç¨å¾®æœ‰äº›æ³›æ³›è€Œè°ˆï¼Œè€Œæˆ‘ä»¬ä»Šå¤©å®šä½å¦‚æœæ˜¯å…¥é—¨çº§å†…å®¹çš„è¯å°±ä¸å»æ¶‰åŠäº†ã€‚</p>
<p>æœ€åè¿˜æ˜¯æ€»ç»“ä¸€ä¸‹ï¼Œè¿™ä»½Agentç™½çš®ä¹¦å…¨é¢æ¢³ç†äº† AI Agentï¼ˆæ™ºèƒ½ä½“ï¼‰æŠ€æœ¯æ¶æ„çš„æ ¸å¿ƒè¦ç´ ï¼Œä»–æœ¬èº«åŒ…å«ä¸€éƒ¨åˆ†å®è·µæŠ€å·§ï¼Œä½†æœ‰ç‚¹å–è‡ªå·±äº‘æœåŠ¡çš„å«Œç–‘ï¼Œæˆ‘ä»¬è¿™é‡Œå°±ä¸æ¶‰åŠäº†ã€‚</p>
<p>æ€»ä¹‹ï¼Œå¸Œæœ›æœ¬æ–‡å¯¹å¤§å®¶æœ‰ç”¨å§ï¼Œä½œä¸ºå…¥é—¨çº§ç§‘æ™®å†…å®¹ï¼Œæˆ‘è§‰å¾—ä»–è¿˜æ˜¯åˆæ ¼çš„ã€‚åªæ˜¯å¯æƒœåˆæµªè´¹æˆ‘5ä¸ªå°æ—¶...</p>
<h2 data-id="heading-14">å­¦ä¹ èµ„æºæ¨è</h2>
<p>å¦‚æœä½ æƒ³æ›´æ·±å…¥åœ°å­¦ä¹ å¤§æ¨¡å‹ï¼Œä»¥ä¸‹æ˜¯ä¸€äº›éå¸¸æœ‰ä»·å€¼çš„å­¦ä¹ èµ„æºï¼Œè¿™äº›èµ„æºå°†å¸®åŠ©ä½ ä»ä¸åŒè§’åº¦å­¦ä¹ å¤§æ¨¡å‹ï¼Œæå‡ä½ çš„å®è·µèƒ½åŠ›ã€‚</p>
<blockquote>
<p>æœ¬æ–‡è¾ƒé•¿ï¼Œå»ºè®®ç‚¹èµæ”¶è—ã€‚æ›´å¤šAIå¤§æ¨¡å‹åº”ç”¨å¼€å‘å­¦ä¹ è§†é¢‘åŠèµ„æ–™ï¼Œåœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fgitcode.com%2FEnjoyEDU%2FLLM" target="_blank" title="https://gitcode.com/EnjoyEDU/LLM" ref="nofollow noopener noreferrer">è¿™é‡Œ</a>ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Javaæ¨¡å—åŒ–ç³»ç»Ÿæ·±åº¦è§£æï¼šä»JARåœ°ç‹±åˆ°JPMSæ¨¡å—åŒ–]]></title>    <link>https://juejin.cn/post/7584724634173800511</link>    <guid>https://juejin.cn/post/7584724634173800511</guid>    <pubDate>2025-12-18T05:59:11.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7584724634173800511" data-draft-id="7584729714340839443" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Javaæ¨¡å—åŒ–ç³»ç»Ÿæ·±åº¦è§£æï¼šä»JARåœ°ç‹±åˆ°JPMSæ¨¡å—åŒ–"/> <meta itemprop="keywords" content="Java"/> <meta itemprop="datePublished" content="2025-12-18T05:59:11.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="åƒè¥¿çº¢æŸ¿é•¿å¤§çš„ç•ªèŒ„"/> <meta itemprop="url" content="https://juejin.cn/user/3097787706900985"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Javaæ¨¡å—åŒ–ç³»ç»Ÿæ·±åº¦è§£æï¼šä»JARåœ°ç‹±åˆ°JPMSæ¨¡å—åŒ–
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3097787706900985/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    åƒè¥¿çº¢æŸ¿é•¿å¤§çš„ç•ªèŒ„
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-18T05:59:11.000Z" title="Thu Dec 18 2025 05:59:11 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-18
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»13åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252b3a}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px;color:#5e7ce0}.markdown-body h1{font-size:24px;margin-bottom:5px;margin-top:80px;position:relative;text-align:center}.markdown-body h2{font-size:20px;padding-bottom:12px;border-bottom:1px solid #dfe1e6}.markdown-body h3{font-size:18px;padding-bottom:0}.markdown-body h4{font-size:16px;margin-top:30px}.markdown-body h5{font-size:14px;margin-top:20px}.markdown-body h6{font-size:14px;margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #dfe1e6;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#ffeeed;color:#c73636;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#252b3a;background:#f8f8f8}.markdown-body a{position:relative;text-decoration:none;color:#5e7ce0;padding-right:18px;padding-bottom:4px}.markdown-body a[href^=http]:after{position:absolute;display:inline-block;width:16px;height:16px;margin-left:2px;margin-top:6px;content:"";background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAIRlWElmTU0AKgAAAAgABQESAAMAAAABAAEAAAEaAAUAAAABAAAASgEbAAUAAAABAAAAUgEoAAMAAAABAAIAAIdpAAQAAAABAAAAWgAAAAAAAABIAAAAAQAAAEgAAAABAAOgAQADAAAAAQABAACgAgAEAAAAAQAAACCgAwAEAAAAAQAAACAAAAAAX7wP8AAAAAlwSFlzAAALEwAACxMBAJqcGAAAAVlpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IlhNUCBDb3JlIDYuMC4wIj4KICAgPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICAgICAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIKICAgICAgICAgICAgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iPgogICAgICAgICA8dGlmZjpPcmllbnRhdGlvbj4xPC90aWZmOk9yaWVudGF0aW9uPgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KGV7hBwAABWVJREFUWAnlVktsVFUY/s85997pC9BOTKxRWnEKsXWlxjWJj0RWJjrFAAXjAlewYWOkgauACVu7a2IiNUEyExM3yoZE3Wmi7qgPJthJBDE6JUNpO3Mf5/j95/bOTOcBlBgXejJ37rn/Of/7O/9/iP7vQ/zTAcjnC4ry+a5ii1OkiYTpuvjvEc0Gp51uivP+ZW+QBuSW4QjW5rptAa1Ey0uOGKOxwPetVyafN6p/52/PkNBbjdAhGaGEpMRjLZTryB8+9MUSYSGNRIcBvm8kBAY9tHYlHz78nTs392xIkwv9FA3Oe33bdoX1ZZKOS0bH0CXI6RugYLW6BwIu5gskkQ4sEG0wYF25PjBzbZfSYY6kDLUmWMt7FR7Lw3xYUkaTdjxHfTPnPwav0iEGYADVa9XIRIEyxrAA0jIQxgFL22gYwF7A8/DAzNVdksJvJaTEUZ2kYnZWziN5s1ADPHneEIXByotYuMSrf9JEbbsuv7VcvbaKML8plXtQR0EdIYDqWEmtOgAomZFH8EjWSnek2ulmtljljttHbmaIHCCCHzd9MjwfsmscBeZH9Jyd10nMvz92UQrtCBKvMF06mQy0SiEdRMEGg8mN0YjAlgoDDkPrMI5qJKSkKKydpbB2CZjJkhIBvOBw2CGQgii85bpx//dMqFRKam5uvH7w+K97oe+Cl0HO68uIBH0qyEzpOMwIbZIcFq0I+9cwoElizCjk2KFI1y7Nnx614W1db58fOXIlMzs7Xn/jeDmvBV2Q0mXjGf554O/m4LZHp2N8r61WPMvLZWLdiC4GMAk5BjeeB5lhv39l6+BIbu3m760hXMDKBD08XBKzR8fr04nygnIypOOAJUx/fHrsi0Mnys+vVK+V4VUohaiyPCo2Q9DFALvF/ikw8WS4QvVZALS5ksw47/7R8ejgTPk1UFqU6/3zp8bOM7B/kdu/fkguPGU5JibW+F0sTjWOUw8DklRrg4BiLGeBqbaRLxjlT4no0InFV402RcftJz41cH/f/JnHP3kZaaF6VX/liwist9vYG5+NU9Cg3MNkt/+lU5wS8fTxq3mc7ILjDlAE4CJpe89BOWPiIjBhi9O6PI4G1jsc6RGB3lZwmS76k8H0zOKTkFboG8jS2krFKCX2fvTeaPHIBwAkMHHgncURnL3nuCSnxSopdIzN5th0BIonJ0Lf9yUA9iMkzdRWl3BixOusfDcwQVcS4UKIFwYfGPnM8wY/DyP9NFMXaTE5BU39tGkDgGZz+fJJG0oYcSaOafLcqdECY4LzfSObSzyUOgxqtyisr8SSNOOAkubWoh3TTaeA2YtFEXPnm5x81/j+6MI6JqyS25WSNU6hbCMKHG84marJbdR+vwakRhQLRuQpbzHRLjmpmijI+OmWCtq+LzWtnX5v30gHSsqmWne74DtiACi2+Wz0iXbuLt9D2cDyoPEkWOiyp5XUIwLMi/wJY1FbH5B9ONtdC1KrsD/Q0MCQAS0wccILORDW25amAeOtooAj/KQxfzF17uwTSQ1v3dJ7jnLINwdZYRDa4tPU0sHVXFo/vxFF5BqFqxRfOmgPCk4ft2NgKTCy2Y47JIEg+MIhjYsLy5I25qUYTQlCjMRHsr/UwdYwIK33UO1J5fFNB9XNO6akcywJofVmXQDP2wfrSPcI2xG5BSs3I+IosHr4EtvO1TDAu16xHQq5+ykMblfRXLbhEoFIdDTBdhldvzl+3CMg60ZktI2vNzLW6IIp0waLklot9L63yzuUp8dJd7bglPFe3hIXstBEP58/s6Ocyr4rH2+866ZNbriTzA0RSOWCwakMl1QJgculxPt8Z7O5GLdtW6bvU8R/nO1vb+hMExVAVtEAAAAASUVORK5CYII=");background-size:100%}.markdown-body a:active,.markdown-body a:hover{border-bottom:2px solid #5e7ce0}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #5e7ce0;border-spacing:0}.markdown-body thead{color:#fff;text-align:left}.markdown-body thead tr{background:#5e7ce0}.markdown-body thead th{border-bottom:1px solid #dfe1e6}.markdown-body tr{background-color:#fff}.markdown-body tr:nth-child(2n){background-color:#f2f5fc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#252b3a;padding:1px 23px;margin:22px 0;border-left:4px solid #5e7ce0;background-color:#f2f5fc}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{padding-left:10px;margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#5e7ce0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body ul li::marker{content:"â€¢";color:#5e7ce0}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}.markdown-body input[type=checkbox]:before{display:inline-block;width:16px;height:16px;content:"";background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEIAAABCCAYAAADjVADoAAAK2GlDQ1BJQ0MgUHJvZmlsZQAASImVlwdUU9kWhs+96Y0WiHRC70gngJTQQxGkg6iEJJBQYkgIKmJnUMGxoCKCZcSKKFhGQMaCWLANAopdJ8igoD4HC6Ki5t3AI8zMW++99fZaJ+dbO/vss/e55671XwAoYWyRKBdWAyBPWCCODQ2gJ6ek0nHPAQRgQAI2wIHNkYiYMTGRALHJ+a/28S4Sjdhte0Wuf///v5oGlyfhAAClIZzBlXDyEG5DxkuOSFwAAOoI4jddUCBScBfCmmKkQIR/V3DWBH9ScMY4o8njMfGxgQjTAcCT2WxxFgBkO8RPL+RkIXnIih4chVyBEOFihH05fDYX4TMI2+XlzVfwIMJWSLwIAApyOoCR8aecWX/Jn6HMz2ZnKXmir3HDBwkkolz2ov/zaP635eVKJ/ewQAaZLw6LVeyHnN/9nPkRShZmzIyeZAF3oiYF86VhCZPMkQSmTjKXHRShXJs7M3KSMwUhLGWeAlb8JPMkwXGTLJ4fq9wrUxzInGS2eHxfIsIyaU6C0s/nsZT5i/jxSZNcKEicOcmSnLiIqZhApV8sjVXWzxOGBkztG6LsPU/yp34FLOXaAn58mLJ39lT9PCFzKqckWVkblxcUPBWToIwXFQQo9xLlxijjebmhSr+kME65tgC5nFNrY5RnmM0Oj5lkIABRgA04dNVJAqCAt7BA0UjgfNEisSCLX0BnIm8bj84Schzs6M6Ozs4AKN7dievwnjb+TkK061O+NYjHr10ul5+e8oUi9/i4KfJYbk35LCsAUNUD4Op+jlRcOOFDK34wyNNTBZpABxgCU2AF7IEzcAfewB8Eg3AQDeJBCpiL1MoHeUAMFoBisAKUgnKwEWwF1WA32AsOgaPgBGgGZ8AFcAXcAF2gFzwCMjAAXoFh8BGMQRCEgygQFdKBjCBzyBZyhhiQLxQMRUKxUAqUDmVBQkgKFUOroHKoAqqG9kB10HHoNHQBugZ1Qw+gPmgIegd9gVEwGdaEDWALeDrMgJlwBBwPz4Gz4Hy4CC6B18NVcC18BG6CL8A34F5YBr+CR1AARULRUMYoexQDFYiKRqWiMlFi1FJUGaoSVYtqQLWiOlC3UTLUa9RnNBZNRdPR9mhvdBg6Ac1B56OXotehq9GH0E3oS+jb6D70MPo7hoLRx9hivDAsTDImC7MAU4qpxBzAnMJcxvRiBjAfsVgsDWuJ9cCGYVOw2djF2HXYndhGbBu2G9uPHcHhcDo4W5wPLhrHxhXgSnHbcUdw53E9uAHcJzwJb4R3xofgU/FC/Ep8Jf4w/hy+B/8CP0ZQI5gTvAjRBC5hEWEDYR+hlXCLMEAYI6oTLYk+xHhiNnEFsYrYQLxMfEx8TyKRTEiepFkkAWk5qYp0jHSV1Ef6TNYg25ADyWlkKXk9+SC5jfyA/J5CoVhQ/CmplALKekod5SLlKeWTClXFQYWlwlVZplKj0qTSo/JGlaBqrspUnatapFqpelL1luprNYKahVqgGlttqVqN2mm1e2oj6lR1J/Vo9Tz1deqH1a+pD2rgNCw0gjW4GiUaezUuavRTUVRTaiCVQ11F3Ue9TB3QxGpaarI0szXLNY9qdmoOa2louWolai3UqtE6qyWjoWgWNBYtl7aBdoJ2l/ZlmsE05jTetLXTGqb1TBvV1tP21+Zpl2k3avdqf9Gh6wTr5Ohs0mnWeaKL1rXRnaW7QHeX7mXd13qaet56HL0yvRN6D/VhfRv9WP3F+nv1b+qPGBgahBqIDLYbXDR4bUgz9DfMNtxieM5wyIhq5GskMNpidN7oJV2LzqTn0qvol+jDxvrGYcZS4z3GncZjJpYmCSYrTRpNnpgSTRmmmaZbTNtNh82MzKLMis3qzR6aE8wZ5nzzbeYd5qMWlhZJFqstmi0GLbUtWZZFlvWWj60oVn5W+Va1VnessdYM6xzrndZdNrCNmw3fpsbmli1s624rsN1p222HsfO0E9rV2t2zJ9sz7Qvt6+37HGgOkQ4rHZod3kw3m546fdP0junfHd0ccx33OT5y0nAKd1rp1Or0ztnGmeNc43zHheIS4rLMpcXlrautK891l+t9N6pblNtqt3a3b+4e7mL3BvchDzOPdI8dHvcYmowYxjrGVU+MZ4DnMs8znp+93L0KvE54/eFt753jfdh7cIblDN6MfTP6fUx82D57fGS+dN903598ZX7Gfmy/Wr9n/qb+XP8D/i+Y1sxs5hHmmwDHAHHAqYDRQK/AJYFtQaig0KCyoM5gjeCE4OrgpyEmIVkh9SHDoW6hi0PbwjBhEWGbwu6xDFgcVh1rONwjfEn4pQhyRFxEdcSzSJtIcWRrFBwVHrU56vFM85nCmc3RIJoVvTn6SYxlTH7ML7Ows2Jm1cx6HusUWxzbEUeNmxd3OO5jfED8hvhHCVYJ0oT2RNXEtMS6xNGkoKSKJFny9OQlyTdSdFMEKS2puNTE1AOpI7ODZ2+dPZDmllaadneO5ZyFc67N1Z2bO/fsPNV57Hkn0zHpSemH07+yo9m17JEMVsaOjGFOIGcb5xXXn7uFO8Tz4VXwXmT6ZFZkDmb5ZG3OGuL78Sv5rwWBgmrB2+yw7N3ZoznROQdz5LlJuY15+Lz0vNNCDWGO8NJ8w/kL53eLbEWlIlm+V/7W/GFxhPiABJLMkbQUaCIi6abUSvqDtK/Qt7Cm8NOCxAUnF6ovFC68uchm0dpFL4pCivYvRi/mLG4vNi5eUdy3hLlkz1JoacbS9mWmy0qWDSwPXX5oBXFFzopfVzqurFj5YVXSqtYSg5LlJf0/hP5QX6pSKi69t9p79e416DWCNZ1rXdZuX/u9jFt2vdyxvLL86zrOuus/Ov1Y9aN8feb6zg3uG3ZtxG4Ubry7yW/ToQr1iqKK/s1Rm5u20LeUbfmwdd7Wa5Wulbu3EbdJt8mqIqtatptt37j9azW/urcmoKZxh/6OtTtGd3J39uzy39Ww22B3+e4vPwl+ur8ndE9TrUVt5V7s3sK9z/cl7uvYz9hfd0D3QPmBbweFB2WHYg9dqvOoqzusf3hDPVwvrR86knak62jQ0ZYG+4Y9jbTG8mPgmPTYy+Ppx++eiDjRfpJxsuFn8593nKKeKmuCmhY1DTfzm2UtKS3dp8NPt7d6t576xeGXg2eMz9Sc1Tq74RzxXMk5+fmi8yNtorbXF7Iu9LfPa390MfninUuzLnVejrh89UrIlYsdzI7zV32unrnmde30dcb15hvuN5puut089avbr6c63Tubbnncauny7GrtntF9rsev58LtoNtX7rDu3Oid2dt9N+Hu/Xtp92T3ufcHH+Q+ePuw8OHYo+WPMY/Lnqg9qXyq/7T2N+vfGmXusrN9QX03n8U9e9TP6X/1u+T3rwMlzynPK18YvagbdB48MxQy1PVy9suBV6JXY69L/6H+jx1vrN78/If/HzeHk4cH3orfyt+te6/z/uAH1w/tIzEjTz/mfRwbLfuk8+nQZ8bnji9JX16MLfiK+1r1zfpb6/eI74/leXK5iC1mj0sBFDLgzEwA3h1EtHEKAFRElxNnT2jrcYMmvgfGCfwnntDf4+YOQAMyKWQR0x+Akwo5i8wqyKyQRPH+AHZxUY5/mSTTxXkiFxlRlphPcvl7AwBwrQB8E8vlYzvl8m/7kGIfANCWP6HpFYZFtHyD3vJRg6LbPe3g7zah9//U499noKjAFfx9/ieoZhkWVvYkwwAAAGxlWElmTU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAIdpAAQAAAABAAAATgAAAAAAAACQAAAAAQAAAJAAAAABAAKgAgAEAAAAAQAAAEKgAwAEAAAAAQAAAEIAAAAAgodoEQAAAAlwSFlzAAAWJQAAFiUBSVIk8AAAAhRJREFUeAHtnLEuBFEUhs9cu7JCskEhIrZAgYZGoREPwBuIygOoPITKA6jEG/AAolFoaFCgICIKZBNiY8Pyz5rNOWe9wNz5T7N3Z2eT/b/7zZlpziat3xKWBDJoEyh5EDd3DTk5r8vV7Yc8vzbl6zvfwvSERIYHyzI90SeLc1WZrFV85PR9oi+N/YMnOT6t/3tiLAeXFqqytjrSFacDYmfvQS6u37tOiPHA7FS/bK6PmWhpj4AJRYGA9MiKzLpK6An+cqiNVmRleUhArrec6PNzt/5sttLgh0cvcvfY6Px+ZNY9I6Ax6gKErY1xmZ8ZyD0E5MJGIgsyIZsunT3g7qALJuTdAp0nWyMTsunS2QNukbpwOcRaPpvOHvxzQow2ZBvrs+nsfLL8o0QQBJFdMO1XGkEjaIQlQCMsD/YIGkEjLAEaYXmwR9AIGmEJ0AjLgz2CRtAIS4BGWB7sETSCRlgCNMLyYI+gETTCEqARlgd7BI2gEZYAjbA82CNoBI2wBGiE5cEeQSNohCVAIywP9ggaQSMsARphebBH0AgaYQnQCMsjYC5SF2agYi2fTWcPGA7VFfO0n8+mswdMyOrCNJwnpz/P6xqZkE2Xzh4w8qcLI4Hbu/dydvkWBRAAQBZk0uOOyKyzp5PARRiF1puNtR+NTh+oMCvtJ+D8F2N6j6x+PrwzG46gRTDDm5BtsAGBg0X924Qfj7i23p7HNgQAAAAASUVORK5CYII=");background-size:100%;position:relative;right:2px;top:-5px}.markdown-body input[type=checkbox]:checked:before{background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEIAAABCCAYAAADjVADoAAAK2GlDQ1BJQ0MgUHJvZmlsZQAASImVlwdUU9kWhs+96Y0WiHRC70gngJTQQxGkg6iEJJBQYkgIKmJnUMGxoCKCZcSKKFhGQMaCWLANAopdJ8igoD4HC6Ki5t3AI8zMW++99fZaJ+dbO/vss/e55671XwAoYWyRKBdWAyBPWCCODQ2gJ6ek0nHPAQRgQAI2wIHNkYiYMTGRALHJ+a/28S4Sjdhte0Wuf///v5oGlyfhAAClIZzBlXDyEG5DxkuOSFwAAOoI4jddUCBScBfCmmKkQIR/V3DWBH9ScMY4o8njMfGxgQjTAcCT2WxxFgBkO8RPL+RkIXnIih4chVyBEOFihH05fDYX4TMI2+XlzVfwIMJWSLwIAApyOoCR8aecWX/Jn6HMz2ZnKXmir3HDBwkkolz2ov/zaP635eVKJ/ewQAaZLw6LVeyHnN/9nPkRShZmzIyeZAF3oiYF86VhCZPMkQSmTjKXHRShXJs7M3KSMwUhLGWeAlb8JPMkwXGTLJ4fq9wrUxzInGS2eHxfIsIyaU6C0s/nsZT5i/jxSZNcKEicOcmSnLiIqZhApV8sjVXWzxOGBkztG6LsPU/yp34FLOXaAn58mLJ39lT9PCFzKqckWVkblxcUPBWToIwXFQQo9xLlxijjebmhSr+kME65tgC5nFNrY5RnmM0Oj5lkIABRgA04dNVJAqCAt7BA0UjgfNEisSCLX0BnIm8bj84Schzs6M6Ozs4AKN7dievwnjb+TkK061O+NYjHr10ul5+e8oUi9/i4KfJYbk35LCsAUNUD4Op+jlRcOOFDK34wyNNTBZpABxgCU2AF7IEzcAfewB8Eg3AQDeJBCpiL1MoHeUAMFoBisAKUgnKwEWwF1WA32AsOgaPgBGgGZ8AFcAXcAF2gFzwCMjAAXoFh8BGMQRCEgygQFdKBjCBzyBZyhhiQLxQMRUKxUAqUDmVBQkgKFUOroHKoAqqG9kB10HHoNHQBugZ1Qw+gPmgIegd9gVEwGdaEDWALeDrMgJlwBBwPz4Gz4Hy4CC6B18NVcC18BG6CL8A34F5YBr+CR1AARULRUMYoexQDFYiKRqWiMlFi1FJUGaoSVYtqQLWiOlC3UTLUa9RnNBZNRdPR9mhvdBg6Ac1B56OXotehq9GH0E3oS+jb6D70MPo7hoLRx9hivDAsTDImC7MAU4qpxBzAnMJcxvRiBjAfsVgsDWuJ9cCGYVOw2djF2HXYndhGbBu2G9uPHcHhcDo4W5wPLhrHxhXgSnHbcUdw53E9uAHcJzwJb4R3xofgU/FC/Ep8Jf4w/hy+B/8CP0ZQI5gTvAjRBC5hEWEDYR+hlXCLMEAYI6oTLYk+xHhiNnEFsYrYQLxMfEx8TyKRTEiepFkkAWk5qYp0jHSV1Ef6TNYg25ADyWlkKXk9+SC5jfyA/J5CoVhQ/CmplALKekod5SLlKeWTClXFQYWlwlVZplKj0qTSo/JGlaBqrspUnatapFqpelL1luprNYKahVqgGlttqVqN2mm1e2oj6lR1J/Vo9Tz1deqH1a+pD2rgNCw0gjW4GiUaezUuavRTUVRTaiCVQ11F3Ue9TB3QxGpaarI0szXLNY9qdmoOa2louWolai3UqtE6qyWjoWgWNBYtl7aBdoJ2l/ZlmsE05jTetLXTGqb1TBvV1tP21+Zpl2k3avdqf9Gh6wTr5Ohs0mnWeaKL1rXRnaW7QHeX7mXd13qaet56HL0yvRN6D/VhfRv9WP3F+nv1b+qPGBgahBqIDLYbXDR4bUgz9DfMNtxieM5wyIhq5GskMNpidN7oJV2LzqTn0qvol+jDxvrGYcZS4z3GncZjJpYmCSYrTRpNnpgSTRmmmaZbTNtNh82MzKLMis3qzR6aE8wZ5nzzbeYd5qMWlhZJFqstmi0GLbUtWZZFlvWWj60oVn5W+Va1VnessdYM6xzrndZdNrCNmw3fpsbmli1s624rsN1p222HsfO0E9rV2t2zJ9sz7Qvt6+37HGgOkQ4rHZod3kw3m546fdP0junfHd0ccx33OT5y0nAKd1rp1Or0ztnGmeNc43zHheIS4rLMpcXlrautK891l+t9N6pblNtqt3a3b+4e7mL3BvchDzOPdI8dHvcYmowYxjrGVU+MZ4DnMs8znp+93L0KvE54/eFt753jfdh7cIblDN6MfTP6fUx82D57fGS+dN903598ZX7Gfmy/Wr9n/qb+XP8D/i+Y1sxs5hHmmwDHAHHAqYDRQK/AJYFtQaig0KCyoM5gjeCE4OrgpyEmIVkh9SHDoW6hi0PbwjBhEWGbwu6xDFgcVh1rONwjfEn4pQhyRFxEdcSzSJtIcWRrFBwVHrU56vFM85nCmc3RIJoVvTn6SYxlTH7ML7Ows2Jm1cx6HusUWxzbEUeNmxd3OO5jfED8hvhHCVYJ0oT2RNXEtMS6xNGkoKSKJFny9OQlyTdSdFMEKS2puNTE1AOpI7ODZ2+dPZDmllaadneO5ZyFc67N1Z2bO/fsPNV57Hkn0zHpSemH07+yo9m17JEMVsaOjGFOIGcb5xXXn7uFO8Tz4VXwXmT6ZFZkDmb5ZG3OGuL78Sv5rwWBgmrB2+yw7N3ZoznROQdz5LlJuY15+Lz0vNNCDWGO8NJ8w/kL53eLbEWlIlm+V/7W/GFxhPiABJLMkbQUaCIi6abUSvqDtK/Qt7Cm8NOCxAUnF6ovFC68uchm0dpFL4pCivYvRi/mLG4vNi5eUdy3hLlkz1JoacbS9mWmy0qWDSwPXX5oBXFFzopfVzqurFj5YVXSqtYSg5LlJf0/hP5QX6pSKi69t9p79e416DWCNZ1rXdZuX/u9jFt2vdyxvLL86zrOuus/Ov1Y9aN8feb6zg3uG3ZtxG4Ubry7yW/ToQr1iqKK/s1Rm5u20LeUbfmwdd7Wa5Wulbu3EbdJt8mqIqtatptt37j9azW/urcmoKZxh/6OtTtGd3J39uzy39Ww22B3+e4vPwl+ur8ndE9TrUVt5V7s3sK9z/cl7uvYz9hfd0D3QPmBbweFB2WHYg9dqvOoqzusf3hDPVwvrR86knak62jQ0ZYG+4Y9jbTG8mPgmPTYy+Ppx++eiDjRfpJxsuFn8593nKKeKmuCmhY1DTfzm2UtKS3dp8NPt7d6t576xeGXg2eMz9Sc1Tq74RzxXMk5+fmi8yNtorbXF7Iu9LfPa390MfninUuzLnVejrh89UrIlYsdzI7zV32unrnmde30dcb15hvuN5puut089avbr6c63Tubbnncauny7GrtntF9rsev58LtoNtX7rDu3Oid2dt9N+Hu/Xtp92T3ufcHH+Q+ePuw8OHYo+WPMY/Lnqg9qXyq/7T2N+vfGmXusrN9QX03n8U9e9TP6X/1u+T3rwMlzynPK18YvagbdB48MxQy1PVy9suBV6JXY69L/6H+jx1vrN78/If/HzeHk4cH3orfyt+te6/z/uAH1w/tIzEjTz/mfRwbLfuk8+nQZ8bnji9JX16MLfiK+1r1zfpb6/eI74/leXK5iC1mj0sBFDLgzEwA3h1EtHEKAFRElxNnT2jrcYMmvgfGCfwnntDf4+YOQAMyKWQR0x+Akwo5i8wqyKyQRPH+AHZxUY5/mSTTxXkiFxlRlphPcvl7AwBwrQB8E8vlYzvl8m/7kGIfANCWP6HpFYZFtHyD3vJRg6LbPe3g7zah9//U499noKjAFfx9/ieoZhkWVvYkwwAAAGxlWElmTU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAIdpAAQAAAABAAAATgAAAAAAAACQAAAAAQAAAJAAAAABAAKgAgAEAAAAAQAAAEKgAwAEAAAAAQAAAEIAAAAAgodoEQAAAAlwSFlzAAAWJQAAFiUBSVIk8AAABMtJREFUeAHtXM2KFDEQzrQKruIu4mEXRFlUVLz4A4K7B99AcO8io0/gwQfxDVzFuwu+gQf34EG8iOAPKAh6EFlBFMSf/qa2uqszlVR6ZtYxM5PDJNVVSer78nU6KrHzpyxuVlwx44AY2O0T8eb9D7f5fMu9fPvdff7y0/36nbdgdhUdd+jgHnf62JxbObvgjh/d60Pu2R35ajx49Mk9frqlBk7Kw8sXF9y1K4t9cCoi7tz/4F68/tYXMIkPzpzY725dP9yA1tsjoIRpIQHogRWYZSmwJ4Reh06nI2Nd7rYEA8zAzqXAxhgq/pc1d9vHKbEX+Dr4JbzypJDc/YxXYi/wifRLeOXpU5q7n/FK7EXsnBBeeRoqd7/EHj1ZhleeiMjdz8pArRKR+0pb+UsCuK0SkftKW/kzeFmrRHCAxWzufsaJOkqExWzufpOI8EpP1jnCJCK80pN1jjCJ4ICwMigidz/jRD3bI7bZUInIfaWt/KUSuK0SEd4jqFvufgYva5UIDrCYzd3POFFHifhfV/7k8lwPw7D5mUSEV3r854ju2pK7ffOIWzk/X+Go803Lr+ooGqoiwkyP9xzRXVt0q9sE3CgJYTLqfNPyE/irpkoEe2um6ck4bSiBSeD8JBl41jY/Hgd1lIiaaeoyLlsjgUGAjEH3DB4DtUpEW2Z3Mj5GAgA8efbVvXpX/200nln5IMYvKhHDrvylcwdc9+pSNdeg46WQsP7wo2s7fpWYaPT926fw9ZiVk4BpywYJkGuvlJs4EuWS0p/HTyHh3kbzH2najM85cR0lgpPiYMtukFB26m1u5Ua+vkFkWP3Zn0KCJDg1Px6f42Wtvhrhdyz8ncanrFKCmGH1wrwDMCrh/uxPIUFTAvdHbeVPsc1fVRE+c7Ud/k6fWt7XHFlYqcqQ5wTRvWpiY4wrIZwfDUL+akDRUBXB/jCzFCH9SHCzTDRUmsro7z+cEvrHwxOZn2ZTL/pVFcEBtRLoiWXfxQ5ehvoHHx4vpIwUEuJKSMvPz5/zQq0qwmIy5m+rjBQSwnsCQYnlgwjfT72av6oifOba2qnKcOXeGVIP0rT3BALTNr8mBWSpRHAgmJSTtLGhDHwj+A9GPCbX2DNiBSRoShg0H8zl5y/njxIhJ0WntralDJmIbO+UEvz85Zwt9wj7HIDB5Ttp7RkyGbRDSqC49vOjX50P9aexmr+qInzmajvtO13H02SpyrCVMNj8dT7/4BwByDXzRIC0LWXEldA/njVfip9GpV9VERxQM0lPhrVDyrCVMJr5/fwZJ+qWewR1lSuNJ21sXxnjVgIhck5VhM/cqG1WBpIAMX4Z9Xz+eP58sFUiOBArLQcZpQ0CNCXt1HzA5OfPOFGrrwYHyKTwbNJsxolaJUJbKeo0mu/4uMeXBHBbJSK88qP5jo97fAYva5UIDgivHEXk7mecqKNEhFeOhsjdbxKR+0pb+UsCuK0qIveVtvJn8LJWieAAi9nc/YwTdZQIi9nc/SYR4ZWenSO2yZvgcwTuRYZKWBnUI3e/xF7gcmio5L4HWPlL7AVuyPol95W28me8EnuBa8J+sZjM3c94JfYCd6VxTXjaCjDLe+K9cwTuSuOa8LQUYPXvh1d3w0HC7JK8kMK0/rcJfwHkVMYgi4xhOgAAAABJRU5ErkJggg==");background-size:100%}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="a11y-light">.hljs-comment,.hljs-quote{color:#696969}.hljs-deletion,.hljs-name,.hljs-regexp,.hljs-selector-class,.hljs-selector-id,.hljs-tag,.hljs-template-variable,.hljs-variable{color:#d91e18}.hljs-attribute,.hljs-built_in,.hljs-builtin-name,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-type{color:#aa5d00}.hljs-addition,.hljs-bullet,.hljs-string,.hljs-symbol{color:green}.hljs-section,.hljs-title{color:#007faa}.hljs-keyword,.hljs-selector-tag{color:#7928a1}.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#fefefe;color:#545454}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}@media screen and (-ms-high-contrast:active){.hljs-addition,.hljs-attribute,.hljs-built_in,.hljs-builtin-name,.hljs-bullet,.hljs-comment,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-quote,.hljs-string,.hljs-symbol,.hljs-type{color:highlight}.hljs-keyword,.hljs-selector-tag{font-weight:700}}</style><h2 data-id="heading-0">å¼•è¨€ï¼šæ¨¡å—åŒ–é©å‘½çš„å¿…è¦æ€§</h2>
<p>åœ¨Java 9ä¹‹å‰ï¼ŒJavaç”Ÿæ€ç³»ç»Ÿé¢ä¸´ç€è¯¸å¤šæŒ‘æˆ˜ï¼šåºå¤§çš„ç±»è·¯å¾„ã€ç‰ˆæœ¬å†²çªã€å¤æ‚çš„ä¾èµ–ç®¡ç†ç­‰ã€‚Java Platform Module System (JPMS) çš„å¼•å…¥ï¼Œæ ‡å¿—ç€Javaæ­£å¼è¿›å…¥äº†æ¨¡å—åŒ–æ—¶ä»£ã€‚è¿™ä¸ä»…æ”¹å˜äº†Javaå¹³å°çš„å†…éƒ¨ç»“æ„ï¼Œä¹Ÿå½»åº•æ”¹å˜äº†æˆ‘ä»¬æ„å»ºå’Œç»„ç»‡å¤§å‹åº”ç”¨çš„æ–¹å¼ã€‚</p>
<h2 data-id="heading-1">ä¸€ã€æ¨¡å—åŒ–åŸºç¡€ï¼šä»ç±»è·¯å¾„åˆ°æ¨¡å—è·¯å¾„</h2>
<h3 data-id="heading-2">1.1 æ¨¡å—çš„åŸºæœ¬æ¦‚å¿µä¸ç»“æ„</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// 1. æ¨¡å—å®šä¹‰æ–‡ä»¶ï¼šmodule-info.java</span>
<span class="hljs-comment">// è¿™æ˜¯æ¨¡å—ç³»ç»Ÿçš„æ ¸å¿ƒï¼Œæ¯ä¸ªæ¨¡å—éƒ½å¿…é¡»æœ‰module-info.javaæ–‡ä»¶</span>

<span class="hljs-comment">/**
 * module-info.javaç¤ºä¾‹
 * 
 * åŸºæœ¬è¯­æ³•ï¼š
 * module æ¨¡å—å {
 *     requires å…¶ä»–æ¨¡å—;        // å£°æ˜ä¾èµ–
 *     exports åŒ…å;            // å¯¼å‡ºåŒ…ï¼ˆå…¬å¼€APIï¼‰
 *     opens åŒ…å;             // å¼€æ”¾åŒ…ï¼ˆå…è®¸åå°„è®¿é—®ï¼‰
 *     provides æœåŠ¡ with å®ç°; // æä¾›æœåŠ¡å®ç°
 *     uses æœåŠ¡;              // ä½¿ç”¨æœåŠ¡
 * }
 */</span>

<span class="hljs-comment">// ç¤ºä¾‹ï¼šä¸€ä¸ªç”¨æˆ·æœåŠ¡æ¨¡å—çš„å®šä¹‰</span>
<span class="hljs-keyword">module</span> com.example.userservice {
    <span class="hljs-comment">// ä¾èµ–å£°æ˜</span>
    <span class="hljs-keyword">requires</span> java.base;           <span class="hljs-comment">// éšå¼ä¾èµ–ï¼Œå¯çœç•¥</span>
    <span class="hljs-keyword">requires</span> java.sql;
    <span class="hljs-keyword">requires</span> transitive org.slf4j; <span class="hljs-comment">// ä¼ é€’æ€§ä¾èµ–</span>
    <span class="hljs-keyword">requires</span> <span class="hljs-keyword">static</span> lombok;       <span class="hljs-comment">// ç¼–è¯‘æ—¶ä¾èµ–</span>
    
    <span class="hljs-comment">// å¯¼å‡ºåŒ…ï¼šè¿™äº›åŒ…å¯ä»¥è¢«å…¶ä»–æ¨¡å—è®¿é—®</span>
    <span class="hljs-keyword">exports</span> com.example.userservice.api;
    <span class="hljs-keyword">exports</span> com.example.userservice.domain to com.example.app;
    
    <span class="hljs-comment">// å¼€æ”¾åŒ…ï¼šå…è®¸é€šè¿‡åå°„è®¿é—®ï¼ˆç”¨äºæ¡†æ¶å¦‚Springã€Hibernateï¼‰</span>
    opens com.example.userservice.internal;
    opens com.example.userservice.domain to spring.core, hibernate.core;
    
    <span class="hljs-comment">// æœåŠ¡æä¾›å£°æ˜</span>
    provides com.example.userservice.spi.UserProvider
        with com.example.userservice.provider.DefaultUserProvider;
    
    <span class="hljs-comment">// æœåŠ¡ä½¿ç”¨å£°æ˜</span>
    uses com.example.userservice.spi.UserProvider;
}
</code></pre>
<h3 data-id="heading-3">1.2 æ„å»ºç¬¬ä¸€ä¸ªæ¨¡å—åŒ–åº”ç”¨</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># é¡¹ç›®ç»“æ„ç¤ºä¾‹ï¼š</span>
<span class="hljs-comment"># modular-app/</span>
<span class="hljs-comment"># â”œâ”€â”€ module-a/</span>
<span class="hljs-comment"># â”‚   â”œâ”€â”€ src/</span>
<span class="hljs-comment"># â”‚   â”‚   â””â”€â”€ com.example.modulea/</span>
<span class="hljs-comment"># â”‚   â”‚       â””â”€â”€ ModuleAClass.java</span>
<span class="hljs-comment"># â”‚   â””â”€â”€ module-info.java</span>
<span class="hljs-comment"># â”œâ”€â”€ module-b/</span>
<span class="hljs-comment"># â”‚   â”œâ”€â”€ src/</span>
<span class="hljs-comment"># â”‚   â”‚   â””â”€â”€ com.example.moduleb/</span>
<span class="hljs-comment"># â”‚   â”‚       â””â”€â”€ ModuleBClass.java</span>
<span class="hljs-comment"># â”‚   â””â”€â”€ module-info.java</span>
<span class="hljs-comment"># â””â”€â”€ app/</span>
<span class="hljs-comment">#     â”œâ”€â”€ src/</span>
<span class="hljs-comment">#     â”‚   â””â”€â”€ com.example.app/</span>
<span class="hljs-comment">#     â”‚       â””â”€â”€ MainApp.java</span>
<span class="hljs-comment">#     â””â”€â”€ module-info.java</span>
</code></pre>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// Module A: æä¾›æœåŠ¡æ¥å£</span>
<span class="hljs-keyword">module</span> com.example.modulea {
    <span class="hljs-keyword">exports</span> com.example.modulea.api;
}

<span class="hljs-keyword">package</span> com.example.modulea.api;
<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">GreetingService</span> {
    String <span class="hljs-title function_">greet</span><span class="hljs-params">(String name)</span>;
}

<span class="hljs-comment">// Module B: æä¾›æœåŠ¡å®ç°</span>
<span class="hljs-keyword">module</span> com.example.moduleb {
    <span class="hljs-keyword">requires</span> com.example.modulea;  <span class="hljs-comment">// ä¾èµ–Module A</span>
    provides com.example.modulea.api.GreetingService 
        with com.example.moduleb.impl.EnglishGreetingService;
}

<span class="hljs-keyword">package</span> com.example.moduleb.impl;
<span class="hljs-keyword">import</span> com.example.modulea.api.GreetingService;
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">EnglishGreetingService</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">GreetingService</span> {
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">greet</span><span class="hljs-params">(String name)</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-string">"Hello, "</span> + name + <span class="hljs-string">"!"</span>;
    }
}

<span class="hljs-comment">// ä¸»åº”ç”¨æ¨¡å—</span>
<span class="hljs-keyword">module</span> com.example.app {
    <span class="hljs-keyword">requires</span> com.example.modulea;  <span class="hljs-comment">// ä½¿ç”¨æœåŠ¡æ¥å£</span>
    uses com.example.modulea.api.GreetingService;
}

<span class="hljs-keyword">package</span> com.example.app;
<span class="hljs-keyword">import</span> com.example.modulea.api.GreetingService;
<span class="hljs-keyword">import</span> java.util.ServiceLoader;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MainApp</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-comment">// é€šè¿‡ServiceLoaderå‘ç°æœåŠ¡å®ç°</span>
        ServiceLoader&lt;GreetingService&gt; loader = 
            ServiceLoader.load(GreetingService.class);
        
        <span class="hljs-keyword">for</span> (GreetingService service : loader) {
            System.out.println(service.greet(<span class="hljs-string">"World"</span>));
        }
    }
}
</code></pre>
<h2 data-id="heading-4">äºŒã€æ¨¡å—ä¾èµ–ä¸ç‰ˆæœ¬ç®¡ç†</h2>
<h3 data-id="heading-5">2.1 æ¨¡å—ä¾èµ–è§£æä¸å†²çªè§£å†³</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// å¤æ‚çš„æ¨¡å—ä¾èµ–åœºæ™¯</span>
<span class="hljs-keyword">module</span> com.example.application {
    <span class="hljs-keyword">requires</span> com.example.utils;       <span class="hljs-comment">// ä¾èµ–å·¥å…·æ¨¡å—</span>
    <span class="hljs-keyword">requires</span> com.example.persistence; <span class="hljs-comment">// ä¾èµ–æŒä¹…åŒ–æ¨¡å—</span>
    <span class="hljs-keyword">requires</span> com.example.security;    <span class="hljs-comment">// ä¾èµ–å®‰å…¨æ¨¡å—</span>
    
    <span class="hljs-comment">// å¯é€‰çš„åŠ¨æ€ä¾èµ–</span>
    <span class="hljs-keyword">requires</span> <span class="hljs-keyword">static</span> com.example.experimental;
    
    <span class="hljs-comment">// æ’é™¤ä¼ é€’ä¾èµ–å†²çª</span>
    <span class="hljs-keyword">requires</span> com.example.database;
    <span class="hljs-comment">// å¦‚æœcom.example.databaseåŒæ—¶ä¾èµ–äº†org.slf4jçš„ä¸åŒç‰ˆæœ¬</span>
    <span class="hljs-comment">// å¯ä»¥ä½¿ç”¨--patch-moduleæˆ–å‡çº§æ¨¡å—åŒ–è§£å†³</span>
}

<span class="hljs-comment">// æ¨¡å—ç‰ˆæœ¬ç®¡ç†ç­–ç•¥</span>
<span class="hljs-comment">/**
 * æ¨¡å—åŒ–ç³»ç»Ÿçš„ç‰ˆæœ¬ç®¡ç†æ–¹å¼ï¼š
 * 1. æ¨¡å—åç§°æœ¬èº«åŒ…å«ç‰ˆæœ¬ä¿¡æ¯ï¼ˆä¸æ¨èï¼‰
 * 2. ä½¿ç”¨module-info.javaä¸­çš„ç‰ˆæœ¬å±æ€§ï¼ˆJava 9+ï¼‰
 * 3. ä½¿ç”¨æ„å»ºå·¥å…·ï¼ˆMaven/Gradleï¼‰ç®¡ç†ç‰ˆæœ¬
 * 4. ä½¿ç”¨JLinkåˆ›å»ºè‡ªå®šä¹‰è¿è¡Œæ—¶æ˜ åƒ
 */</span>

<span class="hljs-comment">// module-info.javaä¸­çš„ç‰ˆæœ¬ä¿¡æ¯</span>
<span class="hljs-meta">@Version("1.2.0")</span>
<span class="hljs-meta">@Deprecated(since="2.0", forRemoval=true)</span>
<span class="hljs-keyword">module</span> com.example.legacy {
    <span class="hljs-keyword">requires</span> transitive java.desktop version <span class="hljs-string">"11+"</span>;
    <span class="hljs-keyword">exports</span> com.example.legacy.api;
}

<span class="hljs-comment">// æ„å»ºå¤šç‰ˆæœ¬JARï¼ˆMulti-Release JARï¼‰</span>
<span class="hljs-comment">// META-INF/MANIFEST.MFä¸­å£°æ˜ï¼š</span>
<span class="hljs-comment">// Multi-Release: true</span>

<span class="hljs-comment">// ç›®å½•ç»“æ„ï¼š</span>
<span class="hljs-comment">// mymodule.jar</span>
<span class="hljs-comment">// â”œâ”€â”€ com/example/MyClass.class           # ä¸»è¦ç±»æ–‡ä»¶ï¼ˆJava 8ï¼‰</span>
<span class="hljs-comment">// â”œâ”€â”€ META-INF/</span>
<span class="hljs-comment">// â”‚   â””â”€â”€ versions/</span>
<span class="hljs-comment">// â”‚       â””â”€â”€ 9/</span>
<span class="hljs-comment">// â”‚           â””â”€â”€ com/example/MyClass.class # Java 9ç‰ˆæœ¬</span>
<span class="hljs-comment">// â”‚       â””â”€â”€ 11/</span>
<span class="hljs-comment">// â”‚           â””â”€â”€ com/example/MyClass.class # Java 11ç‰ˆæœ¬</span>
<span class="hljs-comment">// â””â”€â”€ module-info.class                   # æ¨¡å—æè¿°ç¬¦</span>
</code></pre>
<h3 data-id="heading-6">2.2 æ¨¡å—åŒ–ä¾èµ–å†²çªè§£å†³å®æˆ˜</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> java.lang.<span class="hljs-keyword">module</span>.*;
<span class="hljs-keyword">import</span> java.util.*;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ModuleDependencyResolver</span> {
    
    <span class="hljs-comment">// æ¨¡æ‹Ÿæ¨¡å—ä¾èµ–å›¾</span>
    <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ModuleGraph</span> {
        Map&lt;String, ModuleNode&gt; modules = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
        
        <span class="hljs-keyword">class</span> <span class="hljs-title class_">ModuleNode</span> {
            String name;
            String version;
            Set&lt;ModuleNode&gt; <span class="hljs-keyword">requires</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashSet</span>&lt;&gt;();
            Set&lt;ModuleNode&gt; requiredBy = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashSet</span>&lt;&gt;();
            
            ModuleNode(String name, String version) {
                <span class="hljs-built_in">this</span>.name = name;
                <span class="hljs-built_in">this</span>.version = version;
            }
            
            <span class="hljs-keyword">void</span> <span class="hljs-title function_">addDependency</span><span class="hljs-params">(ModuleNode dependency)</span> {
                <span class="hljs-keyword">requires</span>.add(dependency);
                dependency.requiredBy.add(<span class="hljs-built_in">this</span>);
            }
        }
        
        <span class="hljs-comment">// æ·»åŠ æ¨¡å—</span>
        ModuleNode <span class="hljs-title function_">addModule</span><span class="hljs-params">(String name, String version)</span> {
            <span class="hljs-type">String</span> <span class="hljs-variable">key</span> <span class="hljs-operator">=</span> name + <span class="hljs-string">":"</span> + version;
            <span class="hljs-keyword">return</span> modules.computeIfAbsent(key, k -&gt; <span class="hljs-keyword">new</span> <span class="hljs-title class_">ModuleNode</span>(name, version));
        }
        
        <span class="hljs-comment">// è§£æä¾èµ–å†²çª</span>
        List&lt;Conflict&gt; <span class="hljs-title function_">resolveConflicts</span><span class="hljs-params">()</span> {
            List&lt;Conflict&gt; conflicts = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
            Map&lt;String, List&lt;ModuleNode&gt;&gt; nameToNodes = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
            
            <span class="hljs-comment">// æŒ‰æ¨¡å—ååˆ†ç»„</span>
            <span class="hljs-keyword">for</span> (ModuleNode node : modules.values()) {
                nameToNodes.computeIfAbsent(node.name, k -&gt; <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;())
                          .add(node);
            }
            
            <span class="hljs-comment">// æ£€æŸ¥æ¯ä¸ªæ¨¡å—çš„å¤šä¸ªç‰ˆæœ¬</span>
            <span class="hljs-keyword">for</span> (Map.Entry&lt;String, List&lt;ModuleNode&gt;&gt; entry : nameToNodes.entrySet()) {
                <span class="hljs-keyword">if</span> (entry.getValue().size() &gt; <span class="hljs-number">1</span>) {
                    <span class="hljs-type">Conflict</span> <span class="hljs-variable">conflict</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Conflict</span>(entry.getKey(), entry.getValue());
                    conflicts.add(conflict);
                }
            }
            
            <span class="hljs-keyword">return</span> conflicts;
        }
    }
    
    <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Conflict</span> {
        String moduleName;
        List&lt;ModuleGraph.ModuleNode&gt; versions;
        
        Conflict(String moduleName, List&lt;ModuleGraph.ModuleNode&gt; versions) {
            <span class="hljs-built_in">this</span>.moduleName = moduleName;
            <span class="hljs-built_in">this</span>.versions = versions;
        }
        
        <span class="hljs-meta">@Override</span>
        <span class="hljs-keyword">public</span> String <span class="hljs-title function_">toString</span><span class="hljs-params">()</span> {
            <span class="hljs-keyword">return</span> String.format(<span class="hljs-string">"æ¨¡å— %s æœ‰ %d ä¸ªç‰ˆæœ¬: %s"</span>, 
                moduleName, versions.size(), 
                versions.stream()
                    .map(v -&gt; v.version)
                    .collect(java.util.stream.Collectors.joining(<span class="hljs-string">", "</span>)));
        }
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        System.out.println(<span class="hljs-string">"=== æ¨¡å—ä¾èµ–å†²çªè§£æ ===\n"</span>);
        
        <span class="hljs-type">ModuleGraph</span> <span class="hljs-variable">graph</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ModuleGraph</span>();
        
        <span class="hljs-comment">// æ¨¡æ‹Ÿä¸€ä¸ªå¤æ‚çš„ä¾èµ–åœºæ™¯</span>
        ModuleGraph.<span class="hljs-type">ModuleNode</span> <span class="hljs-variable">app</span> <span class="hljs-operator">=</span> graph.addModule(<span class="hljs-string">"com.example.app"</span>, <span class="hljs-string">"1.0"</span>);
        ModuleGraph.<span class="hljs-type">ModuleNode</span> <span class="hljs-variable">utilsV1</span> <span class="hljs-operator">=</span> graph.addModule(<span class="hljs-string">"com.example.utils"</span>, <span class="hljs-string">"1.0"</span>);
        ModuleGraph.<span class="hljs-type">ModuleNode</span> <span class="hljs-variable">utilsV2</span> <span class="hljs-operator">=</span> graph.addModule(<span class="hljs-string">"com.example.utils"</span>, <span class="hljs-string">"2.0"</span>);
        ModuleGraph.<span class="hljs-type">ModuleNode</span> <span class="hljs-variable">database</span> <span class="hljs-operator">=</span> graph.addModule(<span class="hljs-string">"com.example.database"</span>, <span class="hljs-string">"1.0"</span>);
        ModuleGraph.<span class="hljs-type">ModuleNode</span> <span class="hljs-variable">security</span> <span class="hljs-operator">=</span> graph.addModule(<span class="hljs-string">"com.example.security"</span>, <span class="hljs-string">"1.0"</span>);
        
        <span class="hljs-comment">// å»ºç«‹ä¾èµ–å…³ç³»</span>
        app.addDependency(utilsV1);
        app.addDependency(database);
        database.addDependency(utilsV2);
        security.addDependency(utilsV1);
        
        <span class="hljs-comment">// è§£æå†²çª</span>
        List&lt;Conflict&gt; conflicts = graph.resolveConflicts();
        
        System.out.println(<span class="hljs-string">"å‘ç°çš„ä¾èµ–å†²çª:"</span>);
        conflicts.forEach(System.out::println);
        
        System.out.println(<span class="hljs-string">"\nå¯èƒ½çš„è§£å†³æ–¹æ¡ˆ:"</span>);
        System.out.println(<span class="hljs-string">"1. å‡çº§æ‰€æœ‰æ¨¡å—ä½¿ç”¨ç›¸åŒç‰ˆæœ¬çš„com.example.utils"</span>);
        System.out.println(<span class="hljs-string">"2. ä½¿ç”¨æ¨¡å—é‡å‘½åï¼ˆ--patch-moduleï¼‰"</span>);
        System.out.println(<span class="hljs-string">"3. ä½¿ç”¨è‡ªå®šä¹‰ç±»åŠ è½½å™¨éš”ç¦»"</span>);
        System.out.println(<span class="hljs-string">"4. é‡æ„æ¨¡å—é¿å…ä¼ é€’ä¾èµ–"</span>);
        
        <span class="hljs-comment">// æ¼”ç¤ºæ¨¡å—å±‚ï¼ˆModuleLayerï¼‰å®ç°éš”ç¦»</span>
        System.out.println(<span class="hljs-string">"\n=== ä½¿ç”¨ModuleLayerå®ç°éš”ç¦» ==="</span>);
        demonstrateModuleLayer();
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">demonstrateModuleLayer</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// åˆ›å»ºçˆ¶å±‚ï¼ˆåŸºç¡€æ¨¡å—ï¼‰</span>
            <span class="hljs-type">ModuleLayer</span> <span class="hljs-variable">parent</span> <span class="hljs-operator">=</span> ModuleLayer.boot();
            
            <span class="hljs-comment">// é…ç½®æ¨¡å—æŸ¥æ‰¾å™¨</span>
            <span class="hljs-type">Path</span> <span class="hljs-variable">modulesDir</span> <span class="hljs-operator">=</span> Paths.get(<span class="hljs-string">"modules"</span>);
            <span class="hljs-type">ModuleFinder</span> <span class="hljs-variable">finder</span> <span class="hljs-operator">=</span> ModuleFinder.of(modulesDir);
            
            <span class="hljs-comment">// è§£ææ¨¡å—</span>
            <span class="hljs-type">Configuration</span> <span class="hljs-variable">config</span> <span class="hljs-operator">=</span> parent.configuration()
                .resolve(finder, ModuleFinder.of(), Set.of(<span class="hljs-string">"com.example.app"</span>));
            
            <span class="hljs-comment">// åˆ›å»ºæ–°çš„æ¨¡å—å±‚</span>
            <span class="hljs-type">ModuleLayer</span> <span class="hljs-variable">layer</span> <span class="hljs-operator">=</span> parent.defineModulesWithOneLoader(
                config, ClassLoader.getSystemClassLoader());
            
            <span class="hljs-comment">// åœ¨æ–°å±‚ä¸­æŸ¥æ‰¾æ¨¡å—</span>
            Optional&lt;Module&gt; appModule = layer.findModule(<span class="hljs-string">"com.example.app"</span>);
            <span class="hljs-keyword">if</span> (appModule.isPresent()) {
                System.out.println(<span class="hljs-string">"æˆåŠŸåŠ è½½æ¨¡å—: "</span> + appModule.get().getName());
                
                <span class="hljs-comment">// åŠ è½½æ¨¡å—ä¸­çš„ç±»</span>
                Class&lt;?&gt; mainClass = Class.forName(
                    appModule.get(), <span class="hljs-string">"com.example.app.Main"</span>);
                
                <span class="hljs-comment">// è°ƒç”¨æ–¹æ³•</span>
                <span class="hljs-type">Method</span> <span class="hljs-variable">mainMethod</span> <span class="hljs-operator">=</span> mainClass.getMethod(<span class="hljs-string">"main"</span>, String[].class);
                mainMethod.invoke(<span class="hljs-literal">null</span>, (Object) <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>[]{});
            }
            
        } <span class="hljs-keyword">catch</span> (Exception e) {
            System.err.println(<span class="hljs-string">"æ¨¡å—å±‚åˆ›å»ºå¤±è´¥: "</span> + e.getMessage());
        }
    }
}
</code></pre>
<h2 data-id="heading-7">ä¸‰ã€æœåŠ¡åŠ è½½å™¨ä¸SPIå¢å¼º</h2>
<h3 data-id="heading-8">3.1 æ¨¡å—åŒ–æœåŠ¡æä¾›è€…æ¥å£</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// æœåŠ¡æä¾›è€…æ¥å£å®šä¹‰æ¨¡å—</span>
<span class="hljs-keyword">module</span> com.example.storage.spi {
    <span class="hljs-keyword">exports</span> com.example.storage.spi;
    
    <span class="hljs-comment">// å®šä¹‰æœåŠ¡æ¥å£</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">StorageService</span> {
        <span class="hljs-keyword">void</span> <span class="hljs-title function_">save</span><span class="hljs-params">(String key, <span class="hljs-type">byte</span>[] data)</span>;
        <span class="hljs-type">byte</span>[] load(String key);
        <span class="hljs-type">boolean</span> <span class="hljs-title function_">exists</span><span class="hljs-params">(String key)</span>;
    }
}

<span class="hljs-comment">// æ–‡ä»¶å­˜å‚¨å®ç°æ¨¡å—</span>
<span class="hljs-keyword">module</span> com.example.storage.file {
    <span class="hljs-keyword">requires</span> com.example.storage.spi;
    provides com.example.storage.spi.StorageService 
        with com.example.storage.file.FileStorageService;
    
    <span class="hljs-comment">// å®ç°ç±»</span>
    <span class="hljs-keyword">class</span> <span class="hljs-title class_">FileStorageService</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">StorageService</span> {
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Path basePath;
        
        <span class="hljs-keyword">public</span> <span class="hljs-title function_">FileStorageService</span><span class="hljs-params">()</span> {
            <span class="hljs-built_in">this</span>.basePath = Paths.get(<span class="hljs-string">"storage"</span>);
            Files.createDirectories(basePath);
        }
        
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">save</span><span class="hljs-params">(String key, <span class="hljs-type">byte</span>[] data)</span> {
            <span class="hljs-type">Path</span> <span class="hljs-variable">filePath</span> <span class="hljs-operator">=</span> basePath.resolve(key);
            Files.write(filePath, data);
        }
        
        <span class="hljs-keyword">public</span> <span class="hljs-type">byte</span>[] load(String key) {
            <span class="hljs-type">Path</span> <span class="hljs-variable">filePath</span> <span class="hljs-operator">=</span> basePath.resolve(key);
            <span class="hljs-keyword">return</span> Files.readAllBytes(filePath);
        }
        
        <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">exists</span><span class="hljs-params">(String key)</span> {
            <span class="hljs-keyword">return</span> Files.exists(basePath.resolve(key));
        }
    }
}

<span class="hljs-comment">// æ•°æ®åº“å­˜å‚¨å®ç°æ¨¡å—</span>
<span class="hljs-keyword">module</span> com.example.storage.database {
    <span class="hljs-keyword">requires</span> com.example.storage.spi;
    <span class="hljs-keyword">requires</span> java.sql;
    provides com.example.storage.spi.StorageService 
        with com.example.storage.database.DatabaseStorageService;
    
    <span class="hljs-comment">// å®ç°ç±»</span>
    <span class="hljs-keyword">class</span> <span class="hljs-title class_">DatabaseStorageService</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">StorageService</span> {
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Connection connection;
        
        <span class="hljs-keyword">public</span> <span class="hljs-title function_">DatabaseStorageService</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> SQLException {
            <span class="hljs-built_in">this</span>.connection = DriverManager.getConnection(<span class="hljs-string">"jdbc:h2:mem:test"</span>);
            <span class="hljs-comment">// åˆå§‹åŒ–è¡¨ç»“æ„</span>
            <span class="hljs-keyword">try</span> (<span class="hljs-type">Statement</span> <span class="hljs-variable">stmt</span> <span class="hljs-operator">=</span> connection.createStatement()) {
                stmt.execute(<span class="hljs-string">"CREATE TABLE storage (key VARCHAR PRIMARY KEY, data BLOB)"</span>);
            }
        }
        
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">save</span><span class="hljs-params">(String key, <span class="hljs-type">byte</span>[] data)</span> <span class="hljs-keyword">throws</span> SQLException {
            <span class="hljs-type">String</span> <span class="hljs-variable">sql</span> <span class="hljs-operator">=</span> <span class="hljs-string">"MERGE INTO storage(key, data) VALUES(?, ?)"</span>;
            <span class="hljs-keyword">try</span> (<span class="hljs-type">PreparedStatement</span> <span class="hljs-variable">pstmt</span> <span class="hljs-operator">=</span> connection.prepareStatement(sql)) {
                pstmt.setString(<span class="hljs-number">1</span>, key);
                pstmt.setBytes(<span class="hljs-number">2</span>, data);
                pstmt.executeUpdate();
            }
        }
        
        <span class="hljs-keyword">public</span> <span class="hljs-type">byte</span>[] load(String key) <span class="hljs-keyword">throws</span> SQLException {
            <span class="hljs-type">String</span> <span class="hljs-variable">sql</span> <span class="hljs-operator">=</span> <span class="hljs-string">"SELECT data FROM storage WHERE key = ?"</span>;
            <span class="hljs-keyword">try</span> (<span class="hljs-type">PreparedStatement</span> <span class="hljs-variable">pstmt</span> <span class="hljs-operator">=</span> connection.prepareStatement(sql)) {
                pstmt.setString(<span class="hljs-number">1</span>, key);
                <span class="hljs-type">ResultSet</span> <span class="hljs-variable">rs</span> <span class="hljs-operator">=</span> pstmt.executeQuery();
                <span class="hljs-keyword">if</span> (rs.next()) {
                    <span class="hljs-keyword">return</span> rs.getBytes(<span class="hljs-string">"data"</span>);
                }
            }
            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
        }
        
        <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">exists</span><span class="hljs-params">(String key)</span> <span class="hljs-keyword">throws</span> SQLException {
            <span class="hljs-type">String</span> <span class="hljs-variable">sql</span> <span class="hljs-operator">=</span> <span class="hljs-string">"SELECT 1 FROM storage WHERE key = ?"</span>;
            <span class="hljs-keyword">try</span> (<span class="hljs-type">PreparedStatement</span> <span class="hljs-variable">pstmt</span> <span class="hljs-operator">=</span> connection.prepareStatement(sql)) {
                pstmt.setString(<span class="hljs-number">1</span>, key);
                <span class="hljs-type">ResultSet</span> <span class="hljs-variable">rs</span> <span class="hljs-operator">=</span> pstmt.executeQuery();
                <span class="hljs-keyword">return</span> rs.next();
            }
        }
    }
}

<span class="hljs-comment">// åº”ç”¨æ¨¡å—ä½¿ç”¨æœåŠ¡</span>
<span class="hljs-keyword">module</span> com.example.application {
    <span class="hljs-keyword">requires</span> com.example.storage.spi;
    uses com.example.storage.spi.StorageService;
    
    <span class="hljs-comment">// åŠ¨æ€æœåŠ¡åŠ è½½å™¨</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">StorageManager</span> {
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> List&lt;StorageService&gt; services = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
        
        <span class="hljs-keyword">public</span> <span class="hljs-title function_">StorageManager</span><span class="hljs-params">()</span> {
            <span class="hljs-comment">// åŠ è½½æ‰€æœ‰å¯ç”¨çš„å­˜å‚¨æœåŠ¡</span>
            ServiceLoader&lt;StorageService&gt; loader = 
                ServiceLoader.load(StorageService.class);
            
            <span class="hljs-keyword">for</span> (StorageService service : loader) {
                services.add(service);
                System.out.println(<span class="hljs-string">"åŠ è½½å­˜å‚¨æœåŠ¡: "</span> + service.getClass().getName());
            }
            
            <span class="hljs-keyword">if</span> (services.isEmpty()) {
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalStateException</span>(<span class="hljs-string">"æœªæ‰¾åˆ°å¯ç”¨çš„å­˜å‚¨æœåŠ¡"</span>);
            }
        }
        
        <span class="hljs-comment">// ä½¿ç”¨ç¬¬ä¸€ä¸ªå¯ç”¨çš„æœåŠ¡</span>
        <span class="hljs-keyword">public</span> StorageService <span class="hljs-title function_">getDefaultService</span><span class="hljs-params">()</span> {
            <span class="hljs-keyword">return</span> services.get(<span class="hljs-number">0</span>);
        }
        
        <span class="hljs-comment">// æ ¹æ®æ¡ä»¶é€‰æ‹©æœåŠ¡</span>
        <span class="hljs-keyword">public</span> Optional&lt;StorageService&gt; <span class="hljs-title function_">findService</span><span class="hljs-params">(Predicate&lt;StorageService&gt; predicate)</span> {
            <span class="hljs-keyword">return</span> services.stream().filter(predicate).findFirst();
        }
    }
}
</code></pre>
<h3 data-id="heading-9">3.2 å¢å¼ºå‹æœåŠ¡æ³¨å†Œä¸å‘ç°</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> java.util.*;
<span class="hljs-keyword">import</span> java.util.concurrent.*;
<span class="hljs-keyword">import</span> java.util.function.*;

<span class="hljs-comment">// å¢å¼ºçš„æœåŠ¡æ³¨å†Œè¡¨</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">EnhancedServiceRegistry</span> {
    
    <span class="hljs-comment">// æœåŠ¡æè¿°ç¬¦</span>
    <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ServiceDescriptor</span>&lt;T&gt; {
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Class&lt;T&gt; serviceType;
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> String name;
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> String version;
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> priority; <span class="hljs-comment">// ä¼˜å…ˆçº§ï¼Œæ•°å€¼è¶Šå°ä¼˜å…ˆçº§è¶Šé«˜</span>
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Map&lt;String, String&gt; metadata;
        
        ServiceDescriptor(Class&lt;T&gt; serviceType, String name, 
                         String version, <span class="hljs-type">int</span> priority, 
                         Map&lt;String, String&gt; metadata) {
            <span class="hljs-built_in">this</span>.serviceType = serviceType;
            <span class="hljs-built_in">this</span>.name = name;
            <span class="hljs-built_in">this</span>.version = version;
            <span class="hljs-built_in">this</span>.priority = priority;
            <span class="hljs-built_in">this</span>.metadata = Map.copyOf(metadata);
        }
        
        <span class="hljs-keyword">public</span> Class&lt;T&gt; <span class="hljs-title function_">getServiceType</span><span class="hljs-params">()</span> { <span class="hljs-keyword">return</span> serviceType; }
        <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getName</span><span class="hljs-params">()</span> { <span class="hljs-keyword">return</span> name; }
        <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getVersion</span><span class="hljs-params">()</span> { <span class="hljs-keyword">return</span> version; }
        <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getPriority</span><span class="hljs-params">()</span> { <span class="hljs-keyword">return</span> priority; }
        <span class="hljs-keyword">public</span> Map&lt;String, String&gt; <span class="hljs-title function_">getMetadata</span><span class="hljs-params">()</span> { <span class="hljs-keyword">return</span> metadata; }
    }
    
    <span class="hljs-comment">// æœåŠ¡å®ä¾‹åŒ…è£…å™¨</span>
    <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ServiceInstance</span>&lt;T&gt; {
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> ServiceDescriptor&lt;T&gt; descriptor;
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> T instance;
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">long</span> registrationTime;
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">volatile</span> <span class="hljs-type">long</span> lastUsedTime;
        
        ServiceInstance(ServiceDescriptor&lt;T&gt; descriptor, T instance) {
            <span class="hljs-built_in">this</span>.descriptor = descriptor;
            <span class="hljs-built_in">this</span>.instance = instance;
            <span class="hljs-built_in">this</span>.registrationTime = System.currentTimeMillis();
            <span class="hljs-built_in">this</span>.lastUsedTime = registrationTime;
        }
        
        <span class="hljs-keyword">public</span> T <span class="hljs-title function_">getInstance</span><span class="hljs-params">()</span> {
            lastUsedTime = System.currentTimeMillis();
            <span class="hljs-keyword">return</span> instance;
        }
        
        <span class="hljs-keyword">public</span> ServiceDescriptor&lt;T&gt; <span class="hljs-title function_">getDescriptor</span><span class="hljs-params">()</span> { <span class="hljs-keyword">return</span> descriptor; }
        <span class="hljs-keyword">public</span> <span class="hljs-type">long</span> <span class="hljs-title function_">getAge</span><span class="hljs-params">()</span> { <span class="hljs-keyword">return</span> System.currentTimeMillis() - registrationTime; }
        <span class="hljs-keyword">public</span> <span class="hljs-type">long</span> <span class="hljs-title function_">getIdleTime</span><span class="hljs-params">()</span> { <span class="hljs-keyword">return</span> System.currentTimeMillis() - lastUsedTime; }
    }
    
    <span class="hljs-comment">// æ¨¡å—æ„ŸçŸ¥çš„æœåŠ¡æ³¨å†Œè¡¨</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ModuleAwareServiceRegistry</span> {
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Map&lt;Class&lt;?&gt;, List&lt;ServiceInstance&lt;?&gt;&gt;&gt; registry = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ConcurrentHashMap</span>&lt;&gt;();
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Map&lt;String, Module&gt; moduleCache = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ConcurrentHashMap</span>&lt;&gt;();
        
        <span class="hljs-comment">// æ³¨å†ŒæœåŠ¡ï¼ˆè‡ªåŠ¨å‘ç°æ¨¡å—ä¿¡æ¯ï¼‰</span>
        <span class="hljs-keyword">public</span> &lt;T&gt; <span class="hljs-keyword">void</span> <span class="hljs-title function_">register</span><span class="hljs-params">(Class&lt;T&gt; serviceType, T instance)</span> {
            register(serviceType, instance, createDescriptor(serviceType, instance));
        }
        
        <span class="hljs-keyword">public</span> &lt;T&gt; <span class="hljs-keyword">void</span> <span class="hljs-title function_">register</span><span class="hljs-params">(Class&lt;T&gt; serviceType, T instance, 
                                 ServiceDescriptor&lt;T&gt; descriptor)</span> {
            ServiceInstance&lt;T&gt; serviceInstance = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ServiceInstance</span>&lt;&gt;(descriptor, instance);
            
            registry.computeIfAbsent(serviceType, k -&gt; <span class="hljs-keyword">new</span> <span class="hljs-title class_">CopyOnWriteArrayList</span>&lt;&gt;())
                   .add(serviceInstance);
            
            <span class="hljs-comment">// æŒ‰ä¼˜å…ˆçº§æ’åº</span>
            registry.get(serviceType).sort(
                Comparator.comparingInt(si -&gt; ((ServiceInstance&lt;T&gt;)si).getDescriptor().getPriority())
            );
            
            System.out.printf(<span class="hljs-string">"æ³¨å†ŒæœåŠ¡: %s [%s v%s]%n"</span>,
                serviceType.getSimpleName(),
                descriptor.getName(),
                descriptor.getVersion());
        }
        
        <span class="hljs-comment">// è‡ªåŠ¨åˆ›å»ºæœåŠ¡æè¿°ç¬¦</span>
        <span class="hljs-keyword">private</span> &lt;T&gt; ServiceDescriptor&lt;T&gt; <span class="hljs-title function_">createDescriptor</span><span class="hljs-params">(Class&lt;T&gt; serviceType, T instance)</span> {
            <span class="hljs-type">Module</span> <span class="hljs-variable">module</span> <span class="hljs-operator">=</span> instance.getClass().getModule();
            <span class="hljs-type">String</span> <span class="hljs-variable">moduleName</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">module</span>.getName();
            
            <span class="hljs-comment">// å°è¯•ä»æ¨¡å—æ³¨è§£è·å–å…ƒæ•°æ®</span>
            <span class="hljs-type">String</span> <span class="hljs-variable">name</span> <span class="hljs-operator">=</span> moduleName != <span class="hljs-literal">null</span> ? moduleName : serviceType.getSimpleName();
            <span class="hljs-type">String</span> <span class="hljs-variable">version</span> <span class="hljs-operator">=</span> <span class="hljs-string">"1.0.0"</span>;
            <span class="hljs-type">int</span> <span class="hljs-variable">priority</span> <span class="hljs-operator">=</span> <span class="hljs-number">100</span>;
            
            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">module</span> != <span class="hljs-literal">null</span> &amp;&amp; <span class="hljs-keyword">module</span>.isNamed()) {
                <span class="hljs-comment">// æ£€æŸ¥æ¨¡å—æ³¨è§£</span>
                Optional&lt;Object&gt; moduleVersion = <span class="hljs-keyword">module</span>.getDescriptor().version();
                <span class="hljs-keyword">if</span> (moduleVersion.isPresent()) {
                    version = moduleVersion.get().toString();
                }
            }
            
            Map&lt;String, String&gt; metadata = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
            metadata.put(<span class="hljs-string">"module"</span>, moduleName != <span class="hljs-literal">null</span> ? moduleName : <span class="hljs-string">"unnamed"</span>);
            metadata.put(<span class="hljs-string">"class"</span>, instance.getClass().getName());
            
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ServiceDescriptor</span>&lt;&gt;(serviceType, name, version, priority, metadata);
        }
        
        <span class="hljs-comment">// è·å–æœåŠ¡ï¼ˆæ”¯æŒè¿‡æ»¤å’Œé€‰æ‹©ç­–ç•¥ï¼‰</span>
        <span class="hljs-keyword">public</span> &lt;T&gt; Optional&lt;T&gt; <span class="hljs-title function_">getService</span><span class="hljs-params">(Class&lt;T&gt; serviceType)</span> {
            <span class="hljs-keyword">return</span> getService(serviceType, descriptor -&gt; <span class="hljs-literal">true</span>);
        }
        
        <span class="hljs-keyword">public</span> &lt;T&gt; Optional&lt;T&gt; <span class="hljs-title function_">getService</span><span class="hljs-params">(Class&lt;T&gt; serviceType, 
                                         Predicate&lt;ServiceDescriptor&lt;T&gt;&gt; filter)</span> {
            <span class="hljs-keyword">return</span> getService(serviceType, filter, instances -&gt; {
                <span class="hljs-comment">// é»˜è®¤é€‰æ‹©ç­–ç•¥ï¼šæœ€é«˜ä¼˜å…ˆçº§</span>
                <span class="hljs-keyword">return</span> instances.stream()
                    .min(Comparator.comparingInt(si -&gt; si.getDescriptor().getPriority()))
                    .orElse(<span class="hljs-literal">null</span>);
            });
        }
        
        <span class="hljs-keyword">public</span> &lt;T&gt; Optional&lt;T&gt; <span class="hljs-title function_">getService</span><span class="hljs-params">(Class&lt;T&gt; serviceType,
                                         Predicate&lt;ServiceDescriptor&lt;T&gt;&gt; filter,
                                         Function&lt;List&lt;ServiceInstance&lt;T&gt;&gt;, 
                                                 ServiceInstance&lt;T&gt;&gt; selector)</span> {
            List&lt;ServiceInstance&lt;?&gt;&gt; instances = registry.get(serviceType);
            <span class="hljs-keyword">if</span> (instances == <span class="hljs-literal">null</span> || instances.isEmpty()) {
                <span class="hljs-keyword">return</span> Optional.empty();
            }
            
            <span class="hljs-meta">@SuppressWarnings("unchecked")</span>
            List&lt;ServiceInstance&lt;T&gt;&gt; typedInstances = (List&lt;ServiceInstance&lt;T&gt;&gt;) instances;
            
            <span class="hljs-comment">// åº”ç”¨è¿‡æ»¤å™¨</span>
            List&lt;ServiceInstance&lt;T&gt;&gt; filtered = typedInstances.stream()
                .filter(si -&gt; filter.test(si.getDescriptor()))
                .collect(Collectors.toList());
            
            <span class="hljs-keyword">if</span> (filtered.isEmpty()) {
                <span class="hljs-keyword">return</span> Optional.empty();
            }
            
            <span class="hljs-comment">// åº”ç”¨é€‰æ‹©ç­–ç•¥</span>
            ServiceInstance&lt;T&gt; selected = selector.apply(filtered);
            <span class="hljs-keyword">return</span> selected != <span class="hljs-literal">null</span> ? 
                Optional.of(selected.getInstance()) : Optional.empty();
        }
        
        <span class="hljs-comment">// è·å–æ‰€æœ‰æœåŠ¡å®ä¾‹</span>
        <span class="hljs-keyword">public</span> &lt;T&gt; List&lt;T&gt; <span class="hljs-title function_">getAllServices</span><span class="hljs-params">(Class&lt;T&gt; serviceType)</span> {
            List&lt;ServiceInstance&lt;?&gt;&gt; instances = registry.get(serviceType);
            <span class="hljs-keyword">if</span> (instances == <span class="hljs-literal">null</span>) {
                <span class="hljs-keyword">return</span> Collections.emptyList();
            }
            
            <span class="hljs-meta">@SuppressWarnings("unchecked")</span>
            List&lt;ServiceInstance&lt;T&gt;&gt; typedInstances = (List&lt;ServiceInstance&lt;T&gt;&gt;) instances;
            
            <span class="hljs-keyword">return</span> typedInstances.stream()
                .map(ServiceInstance::getInstance)
                .collect(Collectors.toList());
        }
        
        <span class="hljs-comment">// åŠ¨æ€æœåŠ¡å‘ç°ï¼ˆé€šè¿‡ServiceLoaderï¼‰</span>
        <span class="hljs-keyword">public</span> &lt;T&gt; <span class="hljs-keyword">void</span> <span class="hljs-title function_">discoverServices</span><span class="hljs-params">(Class&lt;T&gt; serviceType)</span> {
            ServiceLoader&lt;T&gt; loader = ServiceLoader.load(serviceType);
            <span class="hljs-keyword">for</span> (T service : loader) {
                register(serviceType, service);
            }
        }
        
        <span class="hljs-comment">// æŒ‰æ¨¡å—å¸è½½æœåŠ¡</span>
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">unloadServicesFromModule</span><span class="hljs-params">(String moduleName)</span> {
            <span class="hljs-keyword">for</span> (List&lt;ServiceInstance&lt;?&gt;&gt; services : registry.values()) {
                services.removeIf(service -&gt; {
                    <span class="hljs-type">String</span> <span class="hljs-variable">serviceModule</span> <span class="hljs-operator">=</span> service.getDescriptor()
                        .getMetadata().get(<span class="hljs-string">"module"</span>);
                    <span class="hljs-keyword">return</span> moduleName.equals(serviceModule);
                });
            }
            System.out.println(<span class="hljs-string">"å·²å¸è½½æ¨¡å— "</span> + moduleName + <span class="hljs-string">" çš„æ‰€æœ‰æœåŠ¡"</span>);
        }
        
        <span class="hljs-comment">// å¥åº·æ£€æŸ¥å’Œæ¸…ç†</span>
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">cleanup</span><span class="hljs-params">(<span class="hljs-type">long</span> maxIdleTimeMs)</span> {
            <span class="hljs-type">long</span> <span class="hljs-variable">cleaned</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
            <span class="hljs-keyword">for</span> (List&lt;ServiceInstance&lt;?&gt;&gt; services : registry.values()) {
                cleaned += services.removeIf(
                    service -&gt; service.getIdleTime() &gt; maxIdleTimeMs
                );
            }
            <span class="hljs-keyword">if</span> (cleaned &gt; <span class="hljs-number">0</span>) {
                System.out.println(<span class="hljs-string">"æ¸…ç†äº† "</span> + cleaned + <span class="hljs-string">" ä¸ªç©ºé—²æœåŠ¡"</span>);
            }
        }
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        System.out.println(<span class="hljs-string">"=== å¢å¼ºå‹æœåŠ¡æ³¨å†Œè¡¨æ¼”ç¤º ===\n"</span>);
        
        <span class="hljs-type">ModuleAwareServiceRegistry</span> <span class="hljs-variable">registry</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ModuleAwareServiceRegistry</span>();
        
        <span class="hljs-comment">// å®šä¹‰æœåŠ¡æ¥å£</span>
        <span class="hljs-keyword">interface</span> <span class="hljs-title class_">Calculator</span> {
            <span class="hljs-type">double</span> <span class="hljs-title function_">calculate</span><span class="hljs-params">(<span class="hljs-type">double</span> a, <span class="hljs-type">double</span> b)</span>;
            String <span class="hljs-title function_">getName</span><span class="hljs-params">()</span>;
        }
        
        <span class="hljs-comment">// æ³¨å†Œä¸€äº›æœåŠ¡å®ç°</span>
        registry.register(Calculator.class, <span class="hljs-keyword">new</span> <span class="hljs-title class_">Calculator</span>() {
            <span class="hljs-keyword">public</span> <span class="hljs-type">double</span> <span class="hljs-title function_">calculate</span><span class="hljs-params">(<span class="hljs-type">double</span> a, <span class="hljs-type">double</span> b)</span> { <span class="hljs-keyword">return</span> a + b; }
            <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getName</span><span class="hljs-params">()</span> { <span class="hljs-keyword">return</span> <span class="hljs-string">"åŠ æ³•è®¡ç®—å™¨"</span>; }
        });
        
        registry.register(Calculator.class, <span class="hljs-keyword">new</span> <span class="hljs-title class_">Calculator</span>() {
            <span class="hljs-keyword">public</span> <span class="hljs-type">double</span> <span class="hljs-title function_">calculate</span><span class="hljs-params">(<span class="hljs-type">double</span> a, <span class="hljs-type">double</span> b)</span> { <span class="hljs-keyword">return</span> a * b; }
            <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getName</span><span class="hljs-params">()</span> { <span class="hljs-keyword">return</span> <span class="hljs-string">"ä¹˜æ³•è®¡ç®—å™¨"</span>; }
        });
        
        <span class="hljs-comment">// ä½¿ç”¨è‡ªå®šä¹‰æè¿°ç¬¦æ³¨å†Œ</span>
        ServiceDescriptor&lt;Calculator&gt; advancedDesc = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ServiceDescriptor</span>&lt;&gt;(
            Calculator.class, 
            <span class="hljs-string">"ç§‘å­¦è®¡ç®—å™¨"</span>, 
            <span class="hljs-string">"2.0.0"</span>, 
            <span class="hljs-number">50</span>, <span class="hljs-comment">// æ›´é«˜ä¼˜å…ˆçº§</span>
            Map.of(<span class="hljs-string">"category"</span>, <span class="hljs-string">"scientific"</span>, <span class="hljs-string">"author"</span>, <span class="hljs-string">"MathLab"</span>)
        );
        
        registry.register(Calculator.class, <span class="hljs-keyword">new</span> <span class="hljs-title class_">Calculator</span>() {
            <span class="hljs-keyword">public</span> <span class="hljs-type">double</span> <span class="hljs-title function_">calculate</span><span class="hljs-params">(<span class="hljs-type">double</span> a, <span class="hljs-type">double</span> b)</span> { <span class="hljs-keyword">return</span> Math.pow(a, b); }
            <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getName</span><span class="hljs-params">()</span> { <span class="hljs-keyword">return</span> <span class="hljs-string">"å¹‚è¿ç®—è®¡ç®—å™¨"</span>; }
        }, advancedDesc);
        
        <span class="hljs-comment">// è·å–é»˜è®¤æœåŠ¡ï¼ˆæœ€é«˜ä¼˜å…ˆçº§ï¼‰</span>
        Optional&lt;Calculator&gt; defaultCalc = registry.getService(Calculator.class);
        defaultCalc.ifPresent(calc -&gt; {
            System.out.println(<span class="hljs-string">"é»˜è®¤è®¡ç®—å™¨: "</span> + calc.getName());
            System.out.println(<span class="hljs-string">"è®¡ç®— 2^3 = "</span> + calc.calculate(<span class="hljs-number">2</span>, <span class="hljs-number">3</span>));
        });
        
        <span class="hljs-comment">// ä½¿ç”¨è¿‡æ»¤å™¨è·å–ç‰¹å®šæœåŠ¡</span>
        Optional&lt;Calculator&gt; scientificCalc = registry.getService(
            Calculator.class,
            desc -&gt; <span class="hljs-string">"scientific"</span>.equals(desc.getMetadata().get(<span class="hljs-string">"category"</span>))
        );
        
        scientificCalc.ifPresent(calc -&gt; {
            System.out.println(<span class="hljs-string">"\nç§‘å­¦è®¡ç®—å™¨: "</span> + calc.getName());
            System.out.println(<span class="hljs-string">"è®¡ç®— 2^3 = "</span> + calc.calculate(<span class="hljs-number">2</span>, <span class="hljs-number">3</span>));
        });
        
        <span class="hljs-comment">// ä½¿ç”¨è‡ªå®šä¹‰é€‰æ‹©ç­–ç•¥ï¼ˆé€‰æ‹©æœ€æ—§çš„æœåŠ¡ï¼‰</span>
        Optional&lt;Calculator&gt; oldestCalc = registry.getService(
            Calculator.class,
            desc -&gt; <span class="hljs-literal">true</span>,
            instances -&gt; instances.stream()
                .max(Comparator.comparingLong(ServiceInstance::getAge))
                .orElse(<span class="hljs-literal">null</span>)
        );
        
        oldestCalc.ifPresent(calc -&gt; 
            System.out.println(<span class="hljs-string">"\næœ€æ—§çš„è®¡ç®—å™¨: "</span> + calc.getName()));
        
        <span class="hljs-comment">// è·å–æ‰€æœ‰æœåŠ¡</span>
        System.out.println(<span class="hljs-string">"\næ‰€æœ‰å¯ç”¨è®¡ç®—å™¨:"</span>);
        registry.getAllServices(Calculator.class).forEach(calc -&gt; 
            System.out.println(<span class="hljs-string">"  - "</span> + calc.getName()));
        
        <span class="hljs-comment">// åŠ¨æ€æœåŠ¡å‘ç°æ¼”ç¤º</span>
        System.out.println(<span class="hljs-string">"\n=== åŠ¨æ€æœåŠ¡å‘ç° ==="</span>);
        registry.discoverServices(Calculator.class);
        
        <span class="hljs-comment">// æ¸…ç†ç©ºé—²æœåŠ¡</span>
        System.out.println(<span class="hljs-string">"\n=== æœåŠ¡æ¸…ç† ==="</span>);
        registry.cleanup(<span class="hljs-number">60000</span>); <span class="hljs-comment">// æ¸…ç†ç©ºé—²è¶…è¿‡60ç§’çš„æœåŠ¡</span>
    }
}
</code></pre>
<h2 data-id="heading-10">å››ã€æ¨¡å—åŒ–åº”ç”¨æ‰“åŒ…ä¸éƒ¨ç½²</h2>
<h3 data-id="heading-11">4.1 JLinkï¼šåˆ›å»ºè‡ªå®šä¹‰è¿è¡Œæ—¶æ˜ åƒ</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> java.nio.file.*;
<span class="hljs-keyword">import</span> java.util.*;
<span class="hljs-keyword">import</span> java.util.spi.ToolProvider;

<span class="hljs-comment">// JLinkå·¥å…·å°è£…</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">JLinkPackager</span> {
    
    <span class="hljs-comment">// JLinké…ç½®</span>
    <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">JLinkConfig</span> {
        String modulePath;
        List&lt;String&gt; modules;
        String outputDir;
        String launcherName;
        Map&lt;String, String&gt; launcherArgs;
        <span class="hljs-type">boolean</span> <span class="hljs-variable">compress</span> <span class="hljs-operator">=</span> <span class="hljs-literal">true</span>;
        <span class="hljs-type">boolean</span> <span class="hljs-variable">stripDebug</span> <span class="hljs-operator">=</span> <span class="hljs-literal">true</span>;
        <span class="hljs-type">boolean</span> <span class="hljs-variable">includeHeaderFiles</span> <span class="hljs-operator">=</span> <span class="hljs-literal">false</span>;
        List&lt;String&gt; additionalOptions = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
        
        JLinkConfig(String modulePath, List&lt;String&gt; modules, String outputDir) {
            <span class="hljs-built_in">this</span>.modulePath = modulePath;
            <span class="hljs-built_in">this</span>.modules = modules;
            <span class="hljs-built_in">this</span>.outputDir = outputDir;
        }
        
        <span class="hljs-comment">// ç”ŸæˆJLinkå‘½ä»¤å‚æ•°</span>
        List&lt;String&gt; <span class="hljs-title function_">buildArguments</span><span class="hljs-params">()</span> {
            List&lt;String&gt; args = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
            
            <span class="hljs-comment">// åŸºæœ¬å‚æ•°</span>
            args.add(<span class="hljs-string">"--module-path"</span>);
            args.add(modulePath);
            
            args.add(<span class="hljs-string">"--add-modules"</span>);
            args.add(String.join(<span class="hljs-string">","</span>, modules));
            
            <span class="hljs-comment">// è¾“å‡ºç›®å½•</span>
            args.add(<span class="hljs-string">"--output"</span>);
            args.add(outputDir);
            
            <span class="hljs-comment">// å¯é€‰å‚æ•°</span>
            <span class="hljs-keyword">if</span> (compress) {
                args.add(<span class="hljs-string">"--compress=2"</span>); <span class="hljs-comment">// 0=æ— , 1=å¸¸é‡å­—ç¬¦ä¸², 2=ZIP</span>
            }
            
            <span class="hljs-keyword">if</span> (stripDebug) {
                args.add(<span class="hljs-string">"--strip-debug"</span>);
            }
            
            <span class="hljs-keyword">if</span> (!includeHeaderFiles) {
                args.add(<span class="hljs-string">"--no-header-files"</span>);
                args.add(<span class="hljs-string">"--no-man-pages"</span>);
            }
            
            <span class="hljs-comment">// å¯åŠ¨å™¨é…ç½®</span>
            <span class="hljs-keyword">if</span> (launcherName != <span class="hljs-literal">null</span> &amp;&amp; !modules.isEmpty()) {
                args.add(<span class="hljs-string">"--launcher"</span>);
                <span class="hljs-type">String</span> <span class="hljs-variable">launcherCmd</span> <span class="hljs-operator">=</span> launcherName + <span class="hljs-string">"="</span> + modules.get(<span class="hljs-number">0</span>);
                <span class="hljs-keyword">if</span> (launcherArgs != <span class="hljs-literal">null</span> &amp;&amp; !launcherArgs.isEmpty()) {
                    launcherCmd += launcherArgs.entrySet().stream()
                        .map(e -&gt; e.getKey() + <span class="hljs-string">"="</span> + e.getValue())
                        .reduce(<span class="hljs-string">""</span>, (a, b) -&gt; a.isEmpty() ? b : a + <span class="hljs-string">" "</span> + b);
                }
                args.add(launcherCmd);
            }
            
            <span class="hljs-comment">// é¢å¤–é€‰é¡¹</span>
            args.addAll(additionalOptions);
            
            <span class="hljs-keyword">return</span> args;
        }
    }
    
    <span class="hljs-comment">// è‡ªå®šä¹‰æ˜ åƒæ„å»ºå™¨</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CustomRuntimeBuilder</span> {
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> JLinkConfig config;
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> List&lt;Path&gt; moduleJars = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
        
        <span class="hljs-keyword">public</span> <span class="hljs-title function_">CustomRuntimeBuilder</span><span class="hljs-params">(String outputDir)</span> {
            <span class="hljs-built_in">this</span>.config = <span class="hljs-keyword">new</span> <span class="hljs-title class_">JLinkConfig</span>(<span class="hljs-string">""</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;(), outputDir);
        }
        
        <span class="hljs-comment">// æ·»åŠ æ¨¡å—JAR</span>
        <span class="hljs-keyword">public</span> CustomRuntimeBuilder <span class="hljs-title function_">addModule</span><span class="hljs-params">(Path moduleJar)</span> {
            moduleJars.add(moduleJar);
            <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>;
        }
        
        <span class="hljs-comment">// æ·»åŠ æ¨¡å—ç›®å½•</span>
        <span class="hljs-keyword">public</span> CustomRuntimeBuilder <span class="hljs-title function_">addModuleDirectory</span><span class="hljs-params">(Path moduleDir)</span> {
            <span class="hljs-keyword">try</span> {
                Files.list(moduleDir)
                    .filter(p -&gt; p.toString().endsWith(<span class="hljs-string">".jar"</span>))
                    .forEach(moduleJars::add);
            } <span class="hljs-keyword">catch</span> (Exception e) {
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">"æ— æ³•è¯»å–æ¨¡å—ç›®å½•: "</span> + moduleDir, e);
            }
            <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>;
        }
        
        <span class="hljs-comment">// è®¾ç½®æ¨¡å—è·¯å¾„</span>
        <span class="hljs-keyword">public</span> CustomRuntimeBuilder <span class="hljs-title function_">setModulePath</span><span class="hljs-params">(String modulePath)</span> {
            config.modulePath = modulePath;
            <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>;
        }
        
        <span class="hljs-comment">// æ·»åŠ æ¨¡å—</span>
        <span class="hljs-keyword">public</span> CustomRuntimeBuilder <span class="hljs-title function_">addModule</span><span class="hljs-params">(String moduleName)</span> {
            config.modules.add(moduleName);
            <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>;
        }
        
        <span class="hljs-comment">// è®¾ç½®å¯åŠ¨å™¨</span>
        <span class="hljs-keyword">public</span> CustomRuntimeBuilder <span class="hljs-title function_">withLauncher</span><span class="hljs-params">(String name, 
                                                Map&lt;String, String&gt; args)</span> {
            config.launcherName = name;
            config.launcherArgs = args;
            <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>;
        }
        
        <span class="hljs-comment">// æ„å»ºè¿è¡Œæ—¶æ˜ åƒ</span>
        <span class="hljs-keyword">public</span> Path <span class="hljs-title function_">build</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception {
            <span class="hljs-comment">// å¦‚æœæœªæ˜¾å¼è®¾ç½®æ¨¡å—è·¯å¾„ï¼Œåˆ™è‡ªåŠ¨æ„å»º</span>
            <span class="hljs-keyword">if</span> (config.modulePath.isEmpty() &amp;&amp; !moduleJars.isEmpty()) {
                config.modulePath = buildModulePath();
            }
            
            <span class="hljs-comment">// æ‰§è¡ŒJLink</span>
            <span class="hljs-type">ToolProvider</span> <span class="hljs-variable">jlink</span> <span class="hljs-operator">=</span> ToolProvider.findFirst(<span class="hljs-string">"jlink"</span>)
                .orElseThrow(() -&gt; <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">"JLinkå·¥å…·ä¸å¯ç”¨"</span>));
            
            List&lt;String&gt; args = config.buildArguments();
            System.out.println(<span class="hljs-string">"æ‰§è¡ŒJLinkå‘½ä»¤:"</span>);
            System.out.println(<span class="hljs-string">"jlink "</span> + String.join(<span class="hljs-string">" "</span>, args));
            
            <span class="hljs-comment">// åˆ›å»ºè¾“å‡ºç›®å½•</span>
            <span class="hljs-type">Path</span> <span class="hljs-variable">outputPath</span> <span class="hljs-operator">=</span> Paths.get(config.outputDir);
            <span class="hljs-keyword">if</span> (Files.exists(outputPath)) {
                deleteDirectory(outputPath);
            }
            
            <span class="hljs-comment">// è¿è¡ŒJLink</span>
            <span class="hljs-type">int</span> <span class="hljs-variable">exitCode</span> <span class="hljs-operator">=</span> jlink.run(System.out, System.err, 
                args.toArray(<span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>[<span class="hljs-number">0</span>]));
            
            <span class="hljs-keyword">if</span> (exitCode != <span class="hljs-number">0</span>) {
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">"JLinkæ‰§è¡Œå¤±è´¥ï¼Œé€€å‡ºç : "</span> + exitCode);
            }
            
            <span class="hljs-comment">// éªŒè¯ç”Ÿæˆçš„è¿è¡Œæ—¶</span>
            validateRuntime(outputPath);
            
            <span class="hljs-keyword">return</span> outputPath;
        }
        
        <span class="hljs-keyword">private</span> String <span class="hljs-title function_">buildModulePath</span><span class="hljs-params">()</span> {
            <span class="hljs-keyword">return</span> moduleJars.stream()
                .map(Path::toString)
                .collect(Collectors.joining(File.pathSeparator));
        }
        
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">validateRuntime</span><span class="hljs-params">(Path runtimeDir)</span> <span class="hljs-keyword">throws</span> Exception {
            System.out.println(<span class="hljs-string">"\néªŒè¯è¿è¡Œæ—¶æ˜ åƒ:"</span>);
            
            <span class="hljs-comment">// æ£€æŸ¥å¿…è¦çš„ç›®å½•</span>
            <span class="hljs-type">Path</span> <span class="hljs-variable">binDir</span> <span class="hljs-operator">=</span> runtimeDir.resolve(<span class="hljs-string">"bin"</span>);
            <span class="hljs-type">Path</span> <span class="hljs-variable">libDir</span> <span class="hljs-operator">=</span> runtimeDir.resolve(<span class="hljs-string">"lib"</span>);
            
            <span class="hljs-keyword">if</span> (!Files.exists(binDir) || !Files.exists(libDir)) {
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">"è¿è¡Œæ—¶æ˜ åƒç»“æ„ä¸æ­£ç¡®"</span>);
            }
            
            System.out.println(<span class="hljs-string">"âœ“ ç›®å½•ç»“æ„éªŒè¯é€šè¿‡"</span>);
            
            <span class="hljs-comment">// æ£€æŸ¥å¯æ‰§è¡Œæ–‡ä»¶</span>
            <span class="hljs-keyword">if</span> (config.launcherName != <span class="hljs-literal">null</span>) {
                <span class="hljs-type">Path</span> <span class="hljs-variable">launcher</span> <span class="hljs-operator">=</span> getLauncherPath(binDir, config.launcherName);
                <span class="hljs-keyword">if</span> (Files.exists(launcher) &amp;&amp; Files.isExecutable(launcher)) {
                    System.out.println(<span class="hljs-string">"âœ“ å¯åŠ¨å™¨æ–‡ä»¶åˆ›å»ºæˆåŠŸ: "</span> + launcher);
                }
            }
            
            <span class="hljs-comment">// æ£€æŸ¥æ¨¡å—åº“</span>
            <span class="hljs-keyword">try</span> (DirectoryStream&lt;Path&gt; stream = 
                    Files.newDirectoryStream(libDir, <span class="hljs-string">"*.so"</span>)) {
                <span class="hljs-keyword">if</span> (stream.iterator().hasNext()) {
                    System.out.println(<span class="hljs-string">"âœ“ æœ¬åœ°åº“æ–‡ä»¶å­˜åœ¨"</span>);
                }
            }
            
            <span class="hljs-comment">// è®¡ç®—æ˜ åƒå¤§å°</span>
            <span class="hljs-type">long</span> <span class="hljs-variable">size</span> <span class="hljs-operator">=</span> calculateDirectorySize(runtimeDir);
            System.out.printf(<span class="hljs-string">"âœ“ è¿è¡Œæ—¶æ˜ åƒå¤§å°: %.2f MB%n"</span>, size / <span class="hljs-number">1024.0</span> / <span class="hljs-number">1024.0</span>);
        }
        
        <span class="hljs-keyword">private</span> Path <span class="hljs-title function_">getLauncherPath</span><span class="hljs-params">(Path binDir, String launcherName)</span> {
            <span class="hljs-type">String</span> <span class="hljs-variable">osName</span> <span class="hljs-operator">=</span> System.getProperty(<span class="hljs-string">"os.name"</span>).toLowerCase();
            <span class="hljs-type">String</span> <span class="hljs-variable">extension</span> <span class="hljs-operator">=</span> osName.contains(<span class="hljs-string">"win"</span>) ? <span class="hljs-string">".exe"</span> : <span class="hljs-string">""</span>;
            <span class="hljs-keyword">return</span> binDir.resolve(launcherName + extension);
        }
        
        <span class="hljs-keyword">private</span> <span class="hljs-type">long</span> <span class="hljs-title function_">calculateDirectorySize</span><span class="hljs-params">(Path dir)</span> <span class="hljs-keyword">throws</span> Exception {
            <span class="hljs-keyword">try</span> (<span class="hljs-type">var</span> <span class="hljs-variable">stream</span> <span class="hljs-operator">=</span> Files.walk(dir)) {
                <span class="hljs-keyword">return</span> stream.filter(Files::isRegularFile)
                    .mapToLong(p -&gt; {
                        <span class="hljs-keyword">try</span> { <span class="hljs-keyword">return</span> Files.size(p); }
                        <span class="hljs-keyword">catch</span> (Exception e) { <span class="hljs-keyword">return</span> <span class="hljs-number">0L</span>; }
                    })
                    .sum();
            }
        }
        
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">deleteDirectory</span><span class="hljs-params">(Path dir)</span> <span class="hljs-keyword">throws</span> Exception {
            <span class="hljs-keyword">if</span> (Files.exists(dir)) {
                <span class="hljs-keyword">try</span> (<span class="hljs-type">var</span> <span class="hljs-variable">stream</span> <span class="hljs-operator">=</span> Files.walk(dir)) {
                    stream.sorted(Comparator.reverseOrder())
                        .forEach(p -&gt; {
                            <span class="hljs-keyword">try</span> { Files.delete(p); }
                            <span class="hljs-keyword">catch</span> (Exception e) { <span class="hljs-comment">/* å¿½ç•¥ */</span> }
                        });
                }
            }
        }
    }
    
    <span class="hljs-comment">// æ¨¡å—ä¾èµ–åˆ†æå™¨</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ModuleDependencyAnalyzer</span> {
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Set&lt;String&gt; <span class="hljs-title function_">analyzeDependencies</span><span class="hljs-params">(String mainModule, 
                                                     String modulePath)</span> {
            Set&lt;String&gt; allModules = <span class="hljs-keyword">new</span> <span class="hljs-title class_">LinkedHashSet</span>&lt;&gt;();
            allModules.add(mainModule);
            
            <span class="hljs-comment">// é€’å½’æ”¶é›†ä¼ é€’ä¾èµ–</span>
            collectDependencies(mainModule, modulePath, allModules);
            
            <span class="hljs-keyword">return</span> allModules;
        }
        
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">collectDependencies</span><span class="hljs-params">(String moduleName, 
                                               String modulePath, 
                                               Set&lt;String&gt; collected)</span> {
            <span class="hljs-keyword">try</span> {
                <span class="hljs-comment">// ä½¿ç”¨javaå‘½ä»¤åˆ†ææ¨¡å—</span>
                <span class="hljs-type">ProcessBuilder</span> <span class="hljs-variable">pb</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ProcessBuilder</span>(
                    <span class="hljs-string">"java"</span>,
                    <span class="hljs-string">"--module-path"</span>, modulePath,
                    <span class="hljs-string">"--module"</span>, <span class="hljs-string">"java.base/jdk.internal.module.ModuleAnalyzer"</span>,
                    moduleName
                );
                
                <span class="hljs-type">Process</span> <span class="hljs-variable">process</span> <span class="hljs-operator">=</span> pb.start();
                <span class="hljs-type">String</span> <span class="hljs-variable">output</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(process.getInputStream().readAllBytes());
                
                <span class="hljs-comment">// è§£æè¾“å‡ºï¼Œè·å–ä¾èµ–æ¨¡å—</span>
                <span class="hljs-comment">// è¿™é‡Œç®€åŒ–å¤„ç†ï¼Œå®é™…éœ€è¦è§£æè¯¦ç»†çš„æ¨¡å—ä¾èµ–ä¿¡æ¯</span>
                String[] lines = output.split(<span class="hljs-string">"\n"</span>);
                <span class="hljs-keyword">for</span> (String line : lines) {
                    <span class="hljs-keyword">if</span> (line.contains(<span class="hljs-string">"requires"</span>) &amp;&amp; !line.contains(<span class="hljs-string">"java.base"</span>)) {
                        <span class="hljs-type">String</span> <span class="hljs-variable">depModule</span> <span class="hljs-operator">=</span> extractModuleName(line);
                        <span class="hljs-keyword">if</span> (depModule != <span class="hljs-literal">null</span> &amp;&amp; !collected.contains(depModule)) {
                            collected.add(depModule);
                            collectDependencies(depModule, modulePath, collected);
                        }
                    }
                }
                
            } <span class="hljs-keyword">catch</span> (Exception e) {
                System.err.println(<span class="hljs-string">"æ¨¡å—ä¾èµ–åˆ†æå¤±è´¥: "</span> + e.getMessage());
            }
        }
        
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> String <span class="hljs-title function_">extractModuleName</span><span class="hljs-params">(String line)</span> {
            <span class="hljs-comment">// ç®€å•æå–æ¨¡å—åï¼Œå®é™…éœ€è¦æ›´å¤æ‚çš„è§£æ</span>
            String[] parts = line.trim().split(<span class="hljs-string">"\s+"</span>);
            <span class="hljs-keyword">for</span> (String part : parts) {
                <span class="hljs-keyword">if</span> (!part.isEmpty() &amp;&amp; !part.equals(<span class="hljs-string">"requires"</span>) &amp;&amp; 
                    !part.equals(<span class="hljs-string">"transitive"</span>) &amp;&amp; !part.equals(<span class="hljs-string">"static"</span>)) {
                    <span class="hljs-keyword">return</span> part;
                }
            }
            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
        }
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> Exception {
        System.out.println(<span class="hljs-string">"=== JLinkè‡ªå®šä¹‰è¿è¡Œæ—¶æ˜ åƒæ„å»º ===\n"</span>);
        
        <span class="hljs-comment">// ç¤ºä¾‹ï¼šæ„å»ºä¸€ä¸ªç®€å•çš„æ§åˆ¶å°åº”ç”¨è¿è¡Œæ—¶</span>
        
        <span class="hljs-comment">// 1. å‡†å¤‡æ¨¡å—</span>
        <span class="hljs-type">Path</span> <span class="hljs-variable">modulesDir</span> <span class="hljs-operator">=</span> Paths.get(<span class="hljs-string">"modules"</span>);
        <span class="hljs-keyword">if</span> (!Files.exists(modulesDir)) {
            Files.createDirectories(modulesDir);
            
            <span class="hljs-comment">// è¿™é‡Œåº”è¯¥æ”¾ç½®ç¼–è¯‘å¥½çš„æ¨¡å—JARæ–‡ä»¶</span>
            <span class="hljs-comment">// ä¾‹å¦‚ï¼šcom.example.app.jar, com.example.utils.jar ç­‰</span>
        }
        
        <span class="hljs-comment">// 2. é…ç½®JLink</span>
        <span class="hljs-type">CustomRuntimeBuilder</span> <span class="hljs-variable">builder</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">CustomRuntimeBuilder</span>(<span class="hljs-string">"myruntime"</span>);
        
        builder.addModuleDirectory(modulesDir)
               .addModule(<span class="hljs-string">"com.example.app"</span>) <span class="hljs-comment">// ä¸»æ¨¡å—</span>
               .withLauncher(<span class="hljs-string">"myapp"</span>, Map.of(<span class="hljs-string">"main-class"</span>, 
                   <span class="hljs-string">"com.example.app.Main"</span>));
        
        <span class="hljs-comment">// 3. åˆ†æä¾èµ–ï¼ˆå¯é€‰ï¼‰</span>
        Set&lt;String&gt; dependencies = ModuleDependencyAnalyzer.analyzeDependencies(
            <span class="hljs-string">"com.example.app"</span>, 
            modulesDir.toString()
        );
        
        System.out.println(<span class="hljs-string">"æ¨¡å—ä¾èµ–åˆ†æç»“æœ:"</span>);
        dependencies.forEach(mod -&gt; System.out.println(<span class="hljs-string">"  - "</span> + mod));
        
        <span class="hljs-comment">// 4. æ„å»ºè¿è¡Œæ—¶</span>
        <span class="hljs-type">Path</span> <span class="hljs-variable">runtime</span> <span class="hljs-operator">=</span> builder.build();
        
        System.out.println(<span class="hljs-string">"\n=== è¿è¡Œæ—¶æ˜ åƒæ„å»ºå®Œæˆ ==="</span>);
        System.out.println(<span class="hljs-string">"ä½ç½®: "</span> + runtime.toAbsolutePath());
        
        <span class="hljs-comment">// 5. åˆ›å»ºå¯åŠ¨è„šæœ¬</span>
        createLaunchScripts(runtime);
        
        <span class="hljs-comment">// 6. æµ‹è¯•è¿è¡Œæ—¶</span>
        testRuntime(runtime);
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">createLaunchScripts</span><span class="hljs-params">(Path runtimeDir)</span> <span class="hljs-keyword">throws</span> Exception {
        <span class="hljs-type">Path</span> <span class="hljs-variable">binDir</span> <span class="hljs-operator">=</span> runtimeDir.resolve(<span class="hljs-string">"bin"</span>);
        
        <span class="hljs-comment">// åˆ›å»ºWindowsæ‰¹å¤„ç†è„šæœ¬</span>
        <span class="hljs-type">Path</span> <span class="hljs-variable">windowsScript</span> <span class="hljs-operator">=</span> binDir.resolve(<span class="hljs-string">"launch.bat"</span>);
        <span class="hljs-type">String</span> <span class="hljs-variable">windowsContent</span> <span class="hljs-operator">=</span> <span class="hljs-string">"@echo off\n"</span> +
            <span class="hljs-string">"setlocal\n"</span> +
            <span class="hljs-string">"set JAVA_HOME=%~dp0..\n"</span> +
            <span class="hljs-string">"set PATH=%%JAVA_HOME%%\bin;%%PATH%%\n"</span> +
            <span class="hljs-string">"java --module-path ..\lib --module com.example.app/com.example.app.Main %%*\n"</span>;
        Files.writeString(windowsScript, windowsContent);
        
        <span class="hljs-comment">// åˆ›å»ºUnix/Linux Shellè„šæœ¬</span>
        <span class="hljs-type">Path</span> <span class="hljs-variable">unixScript</span> <span class="hljs-operator">=</span> binDir.resolve(<span class="hljs-string">"launch.sh"</span>);
        <span class="hljs-type">String</span> <span class="hljs-variable">unixContent</span> <span class="hljs-operator">=</span> <span class="hljs-string">"#!/bin/bash\n"</span> +
            <span class="hljs-string">"DIR="</span>$( cd <span class="hljs-string">"$( dirname "</span>${BASH_SOURCE[<span class="hljs-number">0</span>]}<span class="hljs-string">" )"</span> &amp;&amp; pwd )<span class="hljs-string">"\n"</span> +
            <span class="hljs-string">"export JAVA_HOME="</span>$DIR/..<span class="hljs-string">"\n"</span> +
            <span class="hljs-string">"export PATH="</span>$JAVA_HOME/bin:$PATH<span class="hljs-string">"\n"</span> +
            <span class="hljs-string">"java --module-path ../lib --module com.example.app/com.example.app.Main "</span>$@<span class="hljs-string">"\n"</span>;
        Files.writeString(unixScript, unixContent);
        Files.setPosixFilePermissions(unixScript, 
            Set.of(PosixFilePermission.OWNER_EXECUTE,
                   PosixFilePermission.OWNER_READ,
                   PosixFilePermission.OWNER_WRITE));
        
        System.out.println(<span class="hljs-string">"\nå¯åŠ¨è„šæœ¬å·²åˆ›å»º:"</span>);
        System.out.println(<span class="hljs-string">"  Windows: launch.bat"</span>);
        System.out.println(<span class="hljs-string">"  Unix/Linux: launch.sh"</span>);
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testRuntime</span><span class="hljs-params">(Path runtimeDir)</span> <span class="hljs-keyword">throws</span> Exception {
        System.out.println(<span class="hljs-string">"\n=== æµ‹è¯•è¿è¡Œæ—¶æ˜ åƒ ==="</span>);
        
        Path javaExecutable;
        <span class="hljs-type">String</span> <span class="hljs-variable">osName</span> <span class="hljs-operator">=</span> System.getProperty(<span class="hljs-string">"os.name"</span>).toLowerCase();
        
        <span class="hljs-keyword">if</span> (osName.contains(<span class="hljs-string">"win"</span>)) {
            javaExecutable = runtimeDir.resolve(<span class="hljs-string">"bin"</span>).resolve(<span class="hljs-string">"java.exe"</span>);
        } <span class="hljs-keyword">else</span> {
            javaExecutable = runtimeDir.resolve(<span class="hljs-string">"bin"</span>).resolve(<span class="hljs-string">"java"</span>);
        }
        
        <span class="hljs-keyword">if</span> (!Files.exists(javaExecutable)) {
            System.err.println(<span class="hljs-string">"Javaå¯æ‰§è¡Œæ–‡ä»¶ä¸å­˜åœ¨: "</span> + javaExecutable);
            <span class="hljs-keyword">return</span>;
        }
        
        <span class="hljs-comment">// æµ‹è¯•Javaç‰ˆæœ¬</span>
        <span class="hljs-type">ProcessBuilder</span> <span class="hljs-variable">pb</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ProcessBuilder</span>(
            javaExecutable.toString(),
            <span class="hljs-string">"--version"</span>
        );
        
        <span class="hljs-type">Process</span> <span class="hljs-variable">process</span> <span class="hljs-operator">=</span> pb.start();
        <span class="hljs-type">String</span> <span class="hljs-variable">output</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(process.getInputStream().readAllBytes());
        
        System.out.println(<span class="hljs-string">"Javaç‰ˆæœ¬ä¿¡æ¯:"</span>);
        System.out.println(output);
        
        <span class="hljs-comment">// æµ‹è¯•æ¨¡å—åˆ—è¡¨</span>
        pb = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ProcessBuilder</span>(
            javaExecutable.toString(),
            <span class="hljs-string">"--list-modules"</span>
        );
        
        process = pb.start();
        output = <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(process.getInputStream().readAllBytes());
        
        System.out.println(<span class="hljs-string">"åŒ…å«çš„æ¨¡å—:"</span>);
        System.out.println(output);
        
        System.out.println(<span class="hljs-string">"âœ“ è¿è¡Œæ—¶æ˜ åƒæµ‹è¯•é€šè¿‡"</span>);
    }
}
</code></pre>
<h2 data-id="heading-12">äº”ã€æ¨¡å—åŒ–è¿ç§»ç­–ç•¥ä¸æœ€ä½³å®è·µ</h2>
<h3 data-id="heading-13">5.1 ä»ä¼ ç»Ÿåº”ç”¨åˆ°æ¨¡å—åŒ–åº”ç”¨çš„è¿ç§»</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> java.nio.file.*;
<span class="hljs-keyword">import</span> java.util.*;

<span class="hljs-comment">// æ¨¡å—åŒ–è¿ç§»åŠ©æ‰‹</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ModularMigrationHelper</span> {
    
    <span class="hljs-comment">// è¿ç§»æ­¥éª¤è·Ÿè¸ªå™¨</span>
    <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MigrationTracker</span> {
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Path projectRoot;
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Map&lt;String, MigrationStatus&gt; modules = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> List&lt;String&gt; migrationSteps = Arrays.asList(
            <span class="hljs-string">"åˆ†æç°æœ‰ä¾èµ–"</span>,
            <span class="hljs-string">"åˆ›å»ºæ¨¡å—æè¿°ç¬¦"</span>,
            <span class="hljs-string">"è§£å†³ä¾èµ–å†²çª"</span>,
            <span class="hljs-string">"é‡æ„åŒ…ç»“æ„"</span>,
            <span class="hljs-string">"æµ‹è¯•æ¨¡å—éš”ç¦»"</span>,
            <span class="hljs-string">"æ„å»ºæ¨¡å—åŒ–JAR"</span>,
            <span class="hljs-string">"åˆ›å»ºè¿è¡Œæ—¶æ˜ åƒ"</span>
        );
        
        <span class="hljs-keyword">enum</span> <span class="hljs-title class_">MigrationStatus</span> {
            NOT_STARTED,
            ANALYZING,
            IN_PROGRESS,
            COMPLETED,
            BLOCKED
        }
        
        MigrationTracker(Path projectRoot) {
            <span class="hljs-built_in">this</span>.projectRoot = projectRoot;
        }
        
        <span class="hljs-comment">// åˆ†æé¡¹ç›®ç»“æ„</span>
        <span class="hljs-keyword">public</span> ProjectAnalysis <span class="hljs-title function_">analyze</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception {
            <span class="hljs-type">ProjectAnalysis</span> <span class="hljs-variable">analysis</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ProjectAnalysis</span>();
            
            <span class="hljs-comment">// æ‰«æé¡¹ç›®ç›®å½•</span>
            <span class="hljs-keyword">try</span> (<span class="hljs-type">var</span> <span class="hljs-variable">stream</span> <span class="hljs-operator">=</span> Files.walk(projectRoot)) {
                stream.filter(Files::isRegularFile)
                    .filter(p -&gt; p.toString().endsWith(<span class="hljs-string">".java"</span>))
                    .forEach(p -&gt; analysis.addJavaFile(p));
                
                stream.filter(Files::isRegularFile)
                    .filter(p -&gt; p.toString().endsWith(<span class="hljs-string">".jar"</span>))
                    .forEach(p -&gt; analysis.addJarFile(p));
            }
            
            <span class="hljs-comment">// åˆ†æä¾èµ–</span>
            analysis.analyzeDependencies();
            
            <span class="hljs-keyword">return</span> analysis;
        }
        
        <span class="hljs-comment">// ç”Ÿæˆè¿ç§»è®¡åˆ’</span>
        <span class="hljs-keyword">public</span> MigrationPlan <span class="hljs-title function_">generatePlan</span><span class="hljs-params">(ProjectAnalysis analysis)</span> {
            <span class="hljs-type">MigrationPlan</span> <span class="hljs-variable">plan</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MigrationPlan</span>();
            
            <span class="hljs-comment">// è¯†åˆ«æ½œåœ¨çš„æ¨¡å—</span>
            Set&lt;String&gt; packageRoots = analysis.getPackageRoots();
            <span class="hljs-keyword">for</span> (String pkgRoot : packageRoots) {
                <span class="hljs-type">MigrationModule</span> <span class="hljs-variable">module</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MigrationModule</span>(pkgRoot);
                
                <span class="hljs-comment">// åˆ†ææ¨¡å—ä¾èµ–</span>
                Set&lt;String&gt; dependencies = analysis.getDependenciesForPackage(pkgRoot);
                <span class="hljs-keyword">module</span>.setDependencies(dependencies);
                
                <span class="hljs-comment">// ç¡®å®šè¿ç§»ä¼˜å…ˆçº§</span>
                <span class="hljs-type">int</span> <span class="hljs-variable">priority</span> <span class="hljs-operator">=</span> calculatePriority(pkgRoot, dependencies);
                <span class="hljs-keyword">module</span>.setPriority(priority);
                
                plan.addModule(<span class="hljs-keyword">module</span>);
            }
            
            <span class="hljs-comment">// æ’åºæ¨¡å—ï¼ˆä»ä¾èµ–å°‘çš„å¼€å§‹ï¼‰</span>
            plan.sortModules();
            
            <span class="hljs-keyword">return</span> plan;
        }
        
        <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-title function_">calculatePriority</span><span class="hljs-params">(String pkgRoot, Set&lt;String&gt; dependencies)</span> {
            <span class="hljs-comment">// ä¾èµ–è¶Šå°‘ï¼Œä¼˜å…ˆçº§è¶Šé«˜ï¼ˆè¶Šå®¹æ˜“è¿ç§»ï¼‰</span>
            <span class="hljs-type">int</span> <span class="hljs-variable">dependencyCount</span> <span class="hljs-operator">=</span> dependencies.size();
            
            <span class="hljs-comment">// æ ¸å¿ƒåŒ…ä¼˜å…ˆçº§æ›´é«˜</span>
            <span class="hljs-keyword">if</span> (pkgRoot.startsWith(<span class="hljs-string">"com.example.core"</span>)) {
                <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;
            }
            
            <span class="hljs-keyword">return</span> Math.max(<span class="hljs-number">2</span>, <span class="hljs-number">10</span> - dependencyCount);
        }
    }
    
    <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ProjectAnalysis</span> {
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> List&lt;Path&gt; javaFiles = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> List&lt;Path&gt; jarFiles = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Map&lt;String, Set&lt;String&gt;&gt; packageDependencies = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
        
        <span class="hljs-keyword">void</span> <span class="hljs-title function_">addJavaFile</span><span class="hljs-params">(Path file)</span> { javaFiles.add(file); }
        <span class="hljs-keyword">void</span> <span class="hljs-title function_">addJarFile</span><span class="hljs-params">(Path file)</span> { jarFiles.add(file); }
        
        <span class="hljs-keyword">void</span> <span class="hljs-title function_">analyzeDependencies</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception {
            <span class="hljs-comment">// ç®€åŒ–çš„ä¾èµ–åˆ†æ</span>
            <span class="hljs-keyword">for</span> (Path javaFile : javaFiles) {
                <span class="hljs-type">String</span> <span class="hljs-variable">content</span> <span class="hljs-operator">=</span> Files.readString(javaFile);
                <span class="hljs-type">String</span> <span class="hljs-variable">packageName</span> <span class="hljs-operator">=</span> extractPackageName(content);
                
                <span class="hljs-keyword">if</span> (packageName != <span class="hljs-literal">null</span>) {
                    Set&lt;String&gt; imports = extractImports(content);
                    packageDependencies.put(packageName, imports);
                }
            }
        }
        
        Set&lt;String&gt; <span class="hljs-title function_">getPackageRoots</span><span class="hljs-params">()</span> {
            Set&lt;String&gt; roots = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashSet</span>&lt;&gt;();
            <span class="hljs-keyword">for</span> (String pkg : packageDependencies.keySet()) {
                <span class="hljs-type">String</span> <span class="hljs-variable">root</span> <span class="hljs-operator">=</span> pkg.split(<span class="hljs-string">"\."</span>)[<span class="hljs-number">0</span>]; <span class="hljs-comment">// ç®€å•çš„æ ¹åŒ…æå–</span>
                roots.add(root);
            }
            <span class="hljs-keyword">return</span> roots;
        }
        
        Set&lt;String&gt; <span class="hljs-title function_">getDependenciesForPackage</span><span class="hljs-params">(String pkgRoot)</span> {
            Set&lt;String&gt; deps = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashSet</span>&lt;&gt;();
            <span class="hljs-keyword">for</span> (Map.Entry&lt;String, Set&lt;String&gt;&gt; entry : packageDependencies.entrySet()) {
                <span class="hljs-keyword">if</span> (entry.getKey().startsWith(pkgRoot)) {
                    deps.addAll(entry.getValue());
                }
            }
            <span class="hljs-keyword">return</span> deps;
        }
        
        <span class="hljs-keyword">private</span> String <span class="hljs-title function_">extractPackageName</span><span class="hljs-params">(String content)</span> {
            <span class="hljs-comment">// ç®€å•çš„åŒ…åæå–</span>
            <span class="hljs-type">int</span> <span class="hljs-variable">packageIndex</span> <span class="hljs-operator">=</span> content.indexOf(<span class="hljs-string">"package "</span>);
            <span class="hljs-keyword">if</span> (packageIndex &gt;= <span class="hljs-number">0</span>) {
                <span class="hljs-type">int</span> <span class="hljs-variable">endIndex</span> <span class="hljs-operator">=</span> content.indexOf(<span class="hljs-string">";"</span>, packageIndex);
                <span class="hljs-keyword">if</span> (endIndex &gt;= <span class="hljs-number">0</span>) {
                    <span class="hljs-keyword">return</span> content.substring(packageIndex + <span class="hljs-number">8</span>, endIndex).trim();
                }
            }
            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
        }
        
        <span class="hljs-keyword">private</span> Set&lt;String&gt; <span class="hljs-title function_">extractImports</span><span class="hljs-params">(String content)</span> {
            Set&lt;String&gt; imports = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashSet</span>&lt;&gt;();
            String[] lines = content.split(<span class="hljs-string">"\n"</span>);
            
            <span class="hljs-keyword">for</span> (String line : lines) {
                line = line.trim();
                <span class="hljs-keyword">if</span> (line.startsWith(<span class="hljs-string">"import "</span>)) {
                    <span class="hljs-type">String</span> <span class="hljs-variable">importStmt</span> <span class="hljs-operator">=</span> line.substring(<span class="hljs-number">7</span>, line.indexOf(<span class="hljs-string">";"</span>));
                    imports.add(importStmt);
                }
            }
            
            <span class="hljs-keyword">return</span> imports;
        }
    }
    
    <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MigrationPlan</span> {
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> List&lt;MigrationModule&gt; modules = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
        
        <span class="hljs-keyword">void</span> <span class="hljs-title function_">addModule</span><span class="hljs-params">(MigrationModule <span class="hljs-keyword">module</span>)</span> {
            modules.add(<span class="hljs-keyword">module</span>);
        }
        
        <span class="hljs-keyword">void</span> <span class="hljs-title function_">sortModules</span><span class="hljs-params">()</span> {
            modules.sort(Comparator.comparingInt(MigrationModule::getPriority));
        }
        
        <span class="hljs-keyword">public</span> List&lt;MigrationModule&gt; <span class="hljs-title function_">getModules</span><span class="hljs-params">()</span> {
            <span class="hljs-keyword">return</span> Collections.unmodifiableList(modules);
        }
    }
    
    <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MigrationModule</span> {
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> String name;
        <span class="hljs-keyword">private</span> Set&lt;String&gt; dependencies = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashSet</span>&lt;&gt;();
        <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> priority;
        <span class="hljs-keyword">private</span> String moduleInfoTemplate;
        
        MigrationModule(String name) {
            <span class="hljs-built_in">this</span>.name = name;
        }
        
        <span class="hljs-keyword">void</span> <span class="hljs-title function_">setDependencies</span><span class="hljs-params">(Set&lt;String&gt; dependencies)</span> {
            <span class="hljs-built_in">this</span>.dependencies = dependencies;
        }
        
        <span class="hljs-keyword">void</span> <span class="hljs-title function_">setPriority</span><span class="hljs-params">(<span class="hljs-type">int</span> priority)</span> {
            <span class="hljs-built_in">this</span>.priority = priority;
        }
        
        String <span class="hljs-title function_">getName</span><span class="hljs-params">()</span> { <span class="hljs-keyword">return</span> name; }
        Set&lt;String&gt; <span class="hljs-title function_">getDependencies</span><span class="hljs-params">()</span> { <span class="hljs-keyword">return</span> dependencies; }
        <span class="hljs-type">int</span> <span class="hljs-title function_">getPriority</span><span class="hljs-params">()</span> { <span class="hljs-keyword">return</span> priority; }
        
        <span class="hljs-comment">// ç”Ÿæˆmodule-info.javaæ¨¡æ¿</span>
        String <span class="hljs-title function_">generateModuleInfo</span><span class="hljs-params">()</span> {
            <span class="hljs-type">StringBuilder</span> <span class="hljs-variable">sb</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringBuilder</span>();
            sb.append(<span class="hljs-string">"module "</span>).append(name).append(<span class="hljs-string">" {\n"</span>);
            
            <span class="hljs-comment">// æ·»åŠ ä¾èµ–</span>
            <span class="hljs-keyword">for</span> (String dep : dependencies) {
                <span class="hljs-comment">// ç®€åŒ–å¤„ç†ï¼šå‡è®¾æ‰€æœ‰ä¾èµ–éƒ½æ˜¯æ¨¡å—</span>
                sb.append(<span class="hljs-string">"    requires "</span>).append(extractModuleName(dep)).append(<span class="hljs-string">";\n"</span>);
            }
            
            <span class="hljs-comment">// è‡ªåŠ¨å¯¼å‡ºåŒ…ï¼ˆæ ¹æ®å®é™…åŒ…ç»“æ„è°ƒæ•´ï¼‰</span>
            sb.append(<span class="hljs-string">"\n"</span>);
            sb.append(<span class="hljs-string">"    exports "</span>).append(name).append(<span class="hljs-string">";\n"</span>);
            
            sb.append(<span class="hljs-string">"}\n"</span>);
            <span class="hljs-keyword">return</span> sb.toString();
        }
        
        <span class="hljs-keyword">private</span> String <span class="hljs-title function_">extractModuleName</span><span class="hljs-params">(String importStmt)</span> {
            <span class="hljs-comment">// ç®€åŒ–å¤„ç†ï¼šä»importè¯­å¥æå–æ¨¡å—å</span>
            String[] parts = importStmt.split(<span class="hljs-string">"\."</span>);
            <span class="hljs-keyword">if</span> (parts.length &gt; <span class="hljs-number">1</span>) {
                <span class="hljs-keyword">return</span> parts[<span class="hljs-number">0</span>] + <span class="hljs-string">"."</span> + parts[<span class="hljs-number">1</span>];
            }
            <span class="hljs-keyword">return</span> importStmt;
        }
    }
    
    <span class="hljs-comment">// è‡ªåŠ¨è¿ç§»å·¥å…·</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AutoMigrator</span> {
        
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">migrateProject</span><span class="hljs-params">(Path projectDir)</span> <span class="hljs-keyword">throws</span> Exception {
            System.out.println(<span class="hljs-string">"å¼€å§‹è¿ç§»é¡¹ç›®: "</span> + projectDir);
            
            <span class="hljs-type">MigrationTracker</span> <span class="hljs-variable">tracker</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MigrationTracker</span>(projectDir);
            
            <span class="hljs-comment">// 1. åˆ†æç°æœ‰é¡¹ç›®</span>
            System.out.println(<span class="hljs-string">"\n1. åˆ†æé¡¹ç›®ç»“æ„..."</span>);
            <span class="hljs-type">ProjectAnalysis</span> <span class="hljs-variable">analysis</span> <span class="hljs-operator">=</span> tracker.analyze();
            System.out.println(<span class="hljs-string">"   æ‰¾åˆ° "</span> + analysis.javaFiles.size() + <span class="hljs-string">" ä¸ªJavaæ–‡ä»¶"</span>);
            System.out.println(<span class="hljs-string">"   æ‰¾åˆ° "</span> + analysis.jarFiles.size() + <span class="hljs-string">" ä¸ªJARæ–‡ä»¶"</span>);
            
            <span class="hljs-comment">// 2. ç”Ÿæˆè¿ç§»è®¡åˆ’</span>
            System.out.println(<span class="hljs-string">"\n2. ç”Ÿæˆè¿ç§»è®¡åˆ’..."</span>);
            <span class="hljs-type">MigrationPlan</span> <span class="hljs-variable">plan</span> <span class="hljs-operator">=</span> tracker.generatePlan(analysis);
            
            System.out.println(<span class="hljs-string">"   è¯†åˆ«å‡º "</span> + plan.getModules().size() + <span class="hljs-string">" ä¸ªæ½œåœ¨æ¨¡å—:"</span>);
            <span class="hljs-keyword">for</span> (MigrationModule <span class="hljs-keyword">module</span> : plan.getModules()) {
                System.out.printf(<span class="hljs-string">"   - %s (ä¼˜å…ˆçº§: %d, ä¾èµ–: %d)%n"</span>,
                    <span class="hljs-keyword">module</span>.getName(), <span class="hljs-keyword">module</span>.getPriority(), 
                    <span class="hljs-keyword">module</span>.getDependencies().size());
            }
            
            <span class="hljs-comment">// 3. é€æ­¥è¿ç§»</span>
            System.out.println(<span class="hljs-string">"\n3. å¼€å§‹è¿ç§»..."</span>);
            <span class="hljs-keyword">for</span> (MigrationModule <span class="hljs-keyword">module</span> : plan.getModules()) {
                migrateModule(projectDir, <span class="hljs-keyword">module</span>);
            }
            
            System.out.println(<span class="hljs-string">"\nè¿ç§»å®Œæˆï¼"</span>);
            System.out.println(<span class="hljs-string">"\nåç»­æ­¥éª¤:"</span>);
            System.out.println(<span class="hljs-string">"1. å®¡æŸ¥ç”Ÿæˆçš„module-info.javaæ–‡ä»¶"</span>);
            System.out.println(<span class="hljs-string">"2. è¿è¡Œæµ‹è¯•ç¡®ä¿åŠŸèƒ½æ­£å¸¸"</span>);
            System.out.println(<span class="hljs-string">"3. ä½¿ç”¨JLinkåˆ›å»ºè‡ªå®šä¹‰è¿è¡Œæ—¶"</span>);
            System.out.println(<span class="hljs-string">"4. ä¼˜åŒ–æ¨¡å—è¾¹ç•Œå’Œä¾èµ–"</span>);
        }
        
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">migrateModule</span><span class="hljs-params">(Path projectDir, MigrationModule <span class="hljs-keyword">module</span>)</span> 
                <span class="hljs-keyword">throws</span> Exception {
            System.out.println(<span class="hljs-string">"\nè¿ç§»æ¨¡å—: "</span> + <span class="hljs-keyword">module</span>.getName());
            
            <span class="hljs-comment">// åˆ›å»ºæ¨¡å—ç›®å½•</span>
            <span class="hljs-type">Path</span> <span class="hljs-variable">moduleDir</span> <span class="hljs-operator">=</span> projectDir.resolve(<span class="hljs-keyword">module</span>.getName());
            Files.createDirectories(moduleDir);
            
            <span class="hljs-comment">// ç”Ÿæˆmodule-info.java</span>
            <span class="hljs-type">Path</span> <span class="hljs-variable">moduleInfo</span> <span class="hljs-operator">=</span> moduleDir.resolve(<span class="hljs-string">"module-info.java"</span>);
            <span class="hljs-type">String</span> <span class="hljs-variable">content</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">module</span>.generateModuleInfo();
            Files.writeString(moduleInfo, content);
            
            System.out.println(<span class="hljs-string">"   åˆ›å»º module-info.java:"</span>);
            System.out.println(<span class="hljs-string">"   ```"</span>);
            System.out.println(content);
            System.out.println(<span class="hljs-string">"   ```"</span>);
            
            <span class="hljs-comment">// ç§»åŠ¨æºæ–‡ä»¶ï¼ˆç®€åŒ–ç¤ºä¾‹ï¼‰</span>
            <span class="hljs-comment">// å®é™…ä¸­éœ€è¦æ ¹æ®åŒ…ç»“æ„ç§»åŠ¨æ–‡ä»¶</span>
            System.out.println(<span class="hljs-string">"   æç¤ºï¼šéœ€è¦å°†åŒ… "</span> + <span class="hljs-keyword">module</span>.getName() + 
                             <span class="hljs-string">" ä¸‹çš„æºæ–‡ä»¶ç§»åŠ¨åˆ°æ¨¡å—ç›®å½•ä¸­"</span>);
        }
    }
    
    <span class="hljs-comment">// å…¼å®¹æ€§åŒ…è£…å™¨ï¼ˆç”¨äºæ··åˆæ¨¡å—/éæ¨¡å—ç¯å¢ƒï¼‰</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CompatibilityLayer</span> {
        
        <span class="hljs-comment">// è‡ªåŠ¨æ¨¡å—æ£€æµ‹å™¨</span>
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isAutomaticModule</span><span class="hljs-params">(Path jarFile)</span> {
            <span class="hljs-keyword">try</span> {
                <span class="hljs-comment">// æ£€æŸ¥JARæ˜¯å¦åŒ…å«module-info.class</span>
                <span class="hljs-type">FileSystem</span> <span class="hljs-variable">fs</span> <span class="hljs-operator">=</span> FileSystems.newFileSystem(jarFile, 
                    (ClassLoader) <span class="hljs-literal">null</span>);
                
                <span class="hljs-type">Path</span> <span class="hljs-variable">moduleInfo</span> <span class="hljs-operator">=</span> fs.getPath(<span class="hljs-string">"/"</span>, <span class="hljs-string">"module-info.class"</span>);
                <span class="hljs-type">boolean</span> <span class="hljs-variable">isModule</span> <span class="hljs-operator">=</span> Files.exists(moduleInfo);
                
                fs.close();
                <span class="hljs-keyword">return</span> !isModule; <span class="hljs-comment">// æ²¡æœ‰module-info.classçš„æ˜¯è‡ªåŠ¨æ¨¡å—</span>
            } <span class="hljs-keyword">catch</span> (Exception e) {
                <span class="hljs-comment">// è¯»å–å¤±è´¥ï¼Œå‡è®¾æ˜¯è‡ªåŠ¨æ¨¡å—</span>
                <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
            }
        }
        
        <span class="hljs-comment">// ä¸ºä¼ ç»ŸJARç”Ÿæˆè‡ªåŠ¨æ¨¡å—åç§°</span>
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> String <span class="hljs-title function_">generateAutomaticModuleName</span><span class="hljs-params">(Path jarFile)</span> {
            <span class="hljs-type">String</span> <span class="hljs-variable">fileName</span> <span class="hljs-operator">=</span> jarFile.getFileName().toString();
            
            <span class="hljs-comment">// ç§»é™¤.jaræ‰©å±•å</span>
            <span class="hljs-type">String</span> <span class="hljs-variable">baseName</span> <span class="hljs-operator">=</span> fileName.substring(<span class="hljs-number">0</span>, fileName.length() - <span class="hljs-number">4</span>);
            
            <span class="hljs-comment">// å¤„ç†ç‰ˆæœ¬å·ï¼ˆå¦‚myapp-1.2.3.jar -&gt; myappï¼‰</span>
            baseName = baseName.replaceAll(<span class="hljs-string">"-\d+(\.\d+)*"</span>, <span class="hljs-string">""</span>);
            
            <span class="hljs-comment">// è½¬æ¢ä¸ºæœ‰æ•ˆçš„æ¨¡å—åï¼ˆæ›¿æ¢éæ³•å­—ç¬¦ï¼‰</span>
            baseName = baseName.replaceAll(<span class="hljs-string">"[^A-Za-z0-9.]"</span>, <span class="hljs-string">"."</span>);
            baseName = baseName.replaceAll(<span class="hljs-string">"\.+"</span>, <span class="hljs-string">"."</span>);
            baseName = baseName.replaceAll(<span class="hljs-string">"^\.|\.$"</span>, <span class="hljs-string">""</span>);
            
            <span class="hljs-comment">// ç¡®ä¿è‡³å°‘æœ‰ä¸€ä¸ªç‚¹</span>
            <span class="hljs-keyword">if</span> (!baseName.contains(<span class="hljs-string">"."</span>)) {
                baseName = <span class="hljs-string">"auto."</span> + baseName;
            }
            
            <span class="hljs-keyword">return</span> baseName;
        }
        
        <span class="hljs-comment">// åˆ›å»ºæ¡¥æ¥æ¨¡å—ï¼ˆè¿æ¥æ¨¡å—åŒ–å’Œéæ¨¡å—åŒ–ä»£ç ï¼‰</span>
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> String <span class="hljs-title function_">createBridgeModule</span><span class="hljs-params">(String moduleName, 
                                               Set&lt;String&gt; automaticModules)</span> {
            <span class="hljs-type">StringBuilder</span> <span class="hljs-variable">sb</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringBuilder</span>();
            sb.append(<span class="hljs-string">"module "</span>).append(moduleName).append(<span class="hljs-string">" {\n"</span>);
            sb.append(<span class="hljs-string">"    // æ¡¥æ¥æ¨¡å—ï¼šè¿æ¥æ¨¡å—åŒ–å’Œä¼ ç»Ÿä»£ç \n"</span>);
            sb.append(<span class="hljs-string">"    requires java.base;\n"</span>);
            sb.append(<span class="hljs-string">"\n"</span>);
            
            <span class="hljs-keyword">for</span> (String autoModule : automaticModules) {
                sb.append(<span class="hljs-string">"    requires "</span>).append(autoModule).append(<span class="hljs-string">";\n"</span>);
            }
            
            sb.append(<span class="hljs-string">"\n"</span>);
            sb.append(<span class="hljs-string">"    // é‡æ–°å¯¼å‡ºæ‰€æœ‰åŒ…\n"</span>);
            sb.append(<span class="hljs-string">"    exports * to all;\n"</span>);
            sb.append(<span class="hljs-string">"    opens * to all;\n"</span>);
            
            sb.append(<span class="hljs-string">"}\n"</span>);
            <span class="hljs-keyword">return</span> sb.toString();
        }
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> Exception {
        System.out.println(<span class="hljs-string">"=== Javaæ¨¡å—åŒ–è¿ç§»åŠ©æ‰‹ ===\n"</span>);
        
        <span class="hljs-keyword">if</span> (args.length == <span class="hljs-number">0</span>) {
            System.out.println(<span class="hljs-string">"ç”¨æ³•: java ModularMigrationHelper &lt;é¡¹ç›®ç›®å½•&gt;"</span>);
            System.out.println(<span class="hljs-string">"ç¤ºä¾‹: java ModularMigrationHelper ./myproject"</span>);
            <span class="hljs-keyword">return</span>;
        }
        
        <span class="hljs-type">Path</span> <span class="hljs-variable">projectDir</span> <span class="hljs-operator">=</span> Paths.get(args[<span class="hljs-number">0</span>]);
        <span class="hljs-keyword">if</span> (!Files.exists(projectDir)) {
            System.err.println(<span class="hljs-string">"ç›®å½•ä¸å­˜åœ¨: "</span> + projectDir);
            <span class="hljs-keyword">return</span>;
        }
        
        <span class="hljs-comment">// æ¼”ç¤ºè‡ªåŠ¨è¿ç§»</span>
        AutoMigrator.migrateProject(projectDir);
        
        <span class="hljs-comment">// æ¼”ç¤ºå…¼å®¹æ€§å¤„ç†</span>
        System.out.println(<span class="hljs-string">"\n=== å…¼å®¹æ€§å¤„ç†æ¼”ç¤º ==="</span>);
        
        <span class="hljs-comment">// æ‰«æé¡¹ç›®ä¸­çš„JARæ–‡ä»¶</span>
        <span class="hljs-keyword">try</span> (<span class="hljs-type">var</span> <span class="hljs-variable">stream</span> <span class="hljs-operator">=</span> Files.walk(projectDir)) {
            List&lt;Path&gt; jarFiles = stream
                .filter(p -&gt; p.toString().endsWith(<span class="hljs-string">".jar"</span>))
                .collect(Collectors.toList());
            
            System.out.println(<span class="hljs-string">"\nåˆ†æä¼ ç»ŸJARæ–‡ä»¶:"</span>);
            <span class="hljs-keyword">for</span> (Path jarFile : jarFiles) {
                <span class="hljs-type">boolean</span> <span class="hljs-variable">isAutoModule</span> <span class="hljs-operator">=</span> CompatibilityLayer.isAutomaticModule(jarFile);
                <span class="hljs-type">String</span> <span class="hljs-variable">moduleName</span> <span class="hljs-operator">=</span> CompatibilityLayer.generateAutomaticModuleName(jarFile);
                
                System.out.printf(<span class="hljs-string">"  %s: %s (è‡ªåŠ¨æ¨¡å—å: %s)%n"</span>,
                    jarFile.getFileName(),
                    isAutoModule ? <span class="hljs-string">"è‡ªåŠ¨æ¨¡å—"</span> : <span class="hljs-string">"æ˜¾å¼æ¨¡å—"</span>,
                    moduleName);
            }
        }
        
        System.out.println(<span class="hljs-string">"\nè¿ç§»æœ€ä½³å®è·µ:"</span>);
        System.out.println(<span class="hljs-string">"1. ä»ä¸‹åˆ°ä¸Šè¿ç§»ï¼ˆä¾èµ–å°‘çš„æ¨¡å—å…ˆè¿ç§»ï¼‰"</span>);
        System.out.println(<span class="hljs-string">"2. ä½¿ç”¨è‡ªåŠ¨æ¨¡å—ä½œä¸ºè¿‡æ¸¡"</span>);
        System.out.println(<span class="hljs-string">"3. é€æ­¥æ›¿æ¢ä¼ ç»Ÿä¾èµ–ä¸ºæ¨¡å—åŒ–ç‰ˆæœ¬"</span>);
        System.out.println(<span class="hljs-string">"4. ä½¿ç”¨æ¡¥æ¥æ¨¡å—å¤„ç†å¤æ‚çš„ä¾èµ–å…³ç³»"</span>);
        System.out.println(<span class="hljs-string">"5. åˆ©ç”¨JLinkä¼˜åŒ–éƒ¨ç½²åŒ…å¤§å°"</span>);
    }
}
</code></pre>
<h2 data-id="heading-14">æ€»ç»“ï¼šæ¨¡å—åŒ–ç¼–ç¨‹çš„æ ¸å¿ƒä»·å€¼</h2>
<h3 data-id="heading-15">æ¨¡å—åŒ–å¸¦æ¥çš„å¥½å¤„ï¼š</h3>
<ol>
<li><strong>å¼ºå°è£…æ€§</strong>ï¼šæ˜ç¡®APIè¾¹ç•Œï¼Œéšè—å†…éƒ¨å®ç°</li>
<li><strong>å¯é çš„é…ç½®</strong>ï¼šç¼–è¯‘æ—¶æ£€æŸ¥ä¾èµ–ï¼Œé¿å…è¿è¡Œæ—¶é”™è¯¯</li>
<li><strong>æ›´å¥½çš„å¯ç»´æŠ¤æ€§</strong>ï¼šæ¨¡å—åŒ–æ¶æ„æ›´æ¸…æ™°ï¼Œä¾¿äºç†è§£å’Œç»´æŠ¤</li>
<li><strong>æ”¹è¿›çš„æ€§èƒ½</strong>ï¼šJLinkå¯ä»¥åˆ›å»ºæ›´å°çš„è¿è¡Œæ—¶æ˜ åƒ</li>
<li><strong>å¢å¼ºçš„å®‰å…¨æ€§</strong>ï¼šé€šè¿‡é™åˆ¶åå°„è®¿é—®å¢å¼ºå®‰å…¨æ€§</li>
</ol>
<h3 data-id="heading-16">è¿ç§»è·¯å¾„å»ºè®®ï¼š</h3>
<ol>
<li><strong>è¯„ä¼°é˜¶æ®µ</strong>ï¼šåˆ†æç°æœ‰é¡¹ç›®çš„ä¾èµ–å…³ç³»</li>
<li><strong>æ¸è¿›è¿ç§»</strong>ï¼šä½¿ç”¨è‡ªåŠ¨æ¨¡å—ä½œä¸ºè¿‡æ¸¡</li>
<li><strong>æ¨¡å—åŒ–æ ¸å¿ƒ</strong>ï¼šå…ˆè¿ç§»åŸºç¡€æ¨¡å—å’Œå·¥å…·æ¨¡å—</li>
<li><strong>å…¨é¢æ¨¡å—åŒ–</strong>ï¼šé€æ­¥è¿ç§»æ‰€æœ‰æ¨¡å—</li>
<li><strong>ä¼˜åŒ–éƒ¨ç½²</strong>ï¼šä½¿ç”¨JLinkåˆ›å»ºæœ€å°åŒ–è¿è¡Œæ—¶</li>
</ol>
<h3 data-id="heading-17">é‡è¦å·¥å…·å’Œå‘½ä»¤ï¼š</h3>





























<table><thead><tr><th>å·¥å…·/å‘½ä»¤</th><th>ç”¨é€”</th></tr></thead><tbody><tr><td><code>javac --module-source-path</code></td><td>ç¼–è¯‘æ¨¡å—</td></tr><tr><td><code>java --module-path</code></td><td>è¿è¡Œæ¨¡å—åŒ–åº”ç”¨</td></tr><tr><td><code>jlink</code></td><td>åˆ›å»ºè‡ªå®šä¹‰è¿è¡Œæ—¶æ˜ åƒ</td></tr><tr><td><code>jmod</code></td><td>åˆ›å»ºJMODæ–‡ä»¶</td></tr><tr><td><code>jdeps</code></td><td>åˆ†æä¾èµ–å…³ç³»</td></tr></tbody></table></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å‰ç«¯å¼€å‘åº”è¯¥äº†è§£çš„æµè§ˆå™¨èƒŒåçš„é»‘ç§‘æŠ€]]></title>    <link>https://juejin.cn/post/7584824891595063332</link>    <guid>https://juejin.cn/post/7584824891595063332</guid>    <pubDate>2025-12-18T06:00:23.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7584824891595063332" data-draft-id="7584759201072218153" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å‰ç«¯å¼€å‘åº”è¯¥äº†è§£çš„æµè§ˆå™¨èƒŒåçš„é»‘ç§‘æŠ€"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-18T06:00:23.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è½¬è½¬æŠ€æœ¯å›¢é˜Ÿ"/> <meta itemprop="url" content="https://juejin.cn/user/606586148237431"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å‰ç«¯å¼€å‘åº”è¯¥äº†è§£çš„æµè§ˆå™¨èƒŒåçš„é»‘ç§‘æŠ€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/606586148237431/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è½¬è½¬æŠ€æœ¯å›¢é˜Ÿ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-18T06:00:23.000Z" title="Thu Dec 18 2025 06:00:23 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-18
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»37åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰ç«¯å¼€å‘åº”è¯¥äº†è§£çš„æµè§ˆå™¨èƒŒåçš„é»‘ç§‘æŠ€</h2>
<blockquote>
<p>æœ¬æ–‡å°†å¸¦ä½ æ·±å…¥äº†è§£ç°ä»£æµè§ˆå™¨çš„æ ¸å¿ƒæœºåˆ¶ï¼Œä»å¤šè¿›ç¨‹æ¶æ„åˆ°æ¸²æŸ“å¼•æ“ï¼Œä»JavaScriptå¼•æ“åˆ°ç½‘ç»œä¼˜åŒ–ï¼Œæ­ç§˜é‚£äº›è®©ç½‘é¡µé£é€Ÿè¿è¡Œçš„æŠ€æœ¯ç»†èŠ‚ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-1">ä¸€ã€æµè§ˆå™¨å¤šè¿›ç¨‹æ¶æ„ï¼šä»æ··ä¹±åˆ°æœ‰åºçš„æ¼”è¿›</h3>
<h4 data-id="heading-2">1.1 å•è¿›ç¨‹æ—¶ä»£çš„å™©æ¢¦ï¼ˆ1990s-2007ï¼‰</h4>
<p>è¿˜è®°å¾—IE6æ—¶ä»£å—ï¼Ÿä½ åŒæ—¶æ‰“å¼€10ä¸ªæ ‡ç­¾é¡µï¼Œæ­£åœ¨å¡«å†™é‡è¦è¡¨å•ã€æŸ¥çœ‹é‚®ç®±ã€æµè§ˆæ–°é—»ã€æ’­æ”¾éŸ³ä¹ã€‚çªç„¶ï¼Œå…¶ä¸­ä¸€ä¸ªç½‘é¡µçš„Flashå¹¿å‘Šå´©æºƒäº†ï¼Œæ•´ä¸ªæµè§ˆå™¨éƒ½å¡æ­»äº†ï¼æ‰€æœ‰å·¥ä½œéƒ½ç™½è´¹äº†ã€‚</p>
<p><strong>è¿™å°±æ˜¯å•è¿›ç¨‹æ¶æ„çš„æ ¸å¿ƒé—®é¢˜ï¼šè¿›ç¨‹å†…ä»»ä¸€æ¨¡å—å´©æºƒï¼Œæ•´ä¸ªåº”ç”¨éšä¹‹å´©æºƒã€‚</strong></p>
<h5 data-id="heading-3">å•è¿›ç¨‹æ¶æ„ç»„æˆ</h5>
<p>æ‰€æœ‰åŠŸèƒ½æ¨¡å—è¿è¡Œåœ¨åŒä¸€è¿›ç¨‹å†…ï¼š</p>
<ul>
<li><strong>UIæ¨¡å—</strong>ï¼šç•Œé¢ç®¡ç†</li>
<li><strong>æ¸²æŸ“å¼•æ“</strong>ï¼šé¡µé¢æ¸²æŸ“</li>
<li><strong>JavaScriptå¼•æ“</strong>ï¼šè„šæœ¬æ‰§è¡Œ</li>
<li><strong>ç½‘ç»œæ¨¡å—</strong>ï¼šèµ„æºä¸‹è½½</li>
<li><strong>æ’ä»¶ç³»ç»Ÿ</strong>ï¼šFlashã€ActiveXç­‰</li>
</ul>
<h5 data-id="heading-4">æ¶æ„ç¼ºé™·</h5>

























<table><thead><tr><th>é—®é¢˜ç±»å‹</th><th>å…·ä½“è¡¨ç°</th><th>å½±å“</th></tr></thead><tbody><tr><td><strong>ç¨³å®šæ€§</strong></td><td>ä»»ä¸€æ¨¡å—å´©æºƒå¯¼è‡´æ•´ä½“å¤±æ•ˆ</td><td>ç”¨æˆ·å¹³å‡æ¯æ—¥é‡å¯æµè§ˆå™¨3-5æ¬¡</td></tr><tr><td><strong>å®‰å…¨æ€§</strong></td><td>æ’ä»¶å¯ç›´æ¥è®¿é—®ç³»ç»Ÿèµ„æº</td><td>æ¶æ„ä»£ç å¨èƒå¤§</td></tr><tr><td><strong>æ€§èƒ½</strong></td><td>å•çº¿ç¨‹æ¨¡å‹æ— æ³•åˆ©ç”¨å¤šæ ¸CPU</td><td>å“åº”é€Ÿåº¦æ…¢</td></tr></tbody></table>
<hr/>
<h4 data-id="heading-5">1.2 å¤šè¿›ç¨‹é©å‘½ï¼ˆ2008-2017ï¼‰</h4>
<p>2008å¹´ï¼ŒChromeæå‡ºäº†é©å‘½æ€§çš„æƒ³æ³•â€”â€”<strong>è®©æ¯ä¸ªæ ‡ç­¾é¡µéƒ½è¿è¡Œåœ¨ç‹¬ç«‹çš„è¿›ç¨‹ä¸­</strong>ã€‚å°±åƒæŠŠä¸åŒçš„å·¥ä½œå›¢é˜Ÿåˆ†åˆ°ä¸åŒçš„åŠå…¬å®¤ï¼Œä¸€ä¸ªå›¢é˜Ÿå‡ºé—®é¢˜ä¸ä¼šå½±å“å…¶ä»–å›¢é˜Ÿã€‚</p>
<h5 data-id="heading-6">å¤šè¿›ç¨‹æ¶æ„ç»„æˆ</h5>









































<table><thead><tr><th>è¿›ç¨‹ç±»å‹</th><th>èŒè´£</th><th>æ•°é‡</th><th>ç‰¹ç‚¹</th></tr></thead><tbody><tr><td><strong>Browser Process</strong></td><td>æµè§ˆå™¨ä¸»è¿›ç¨‹</td><td>1ä¸ª</td><td>è´Ÿè´£UIã€æ–‡ä»¶è®¿é—®ã€ç½‘ç»œåè°ƒ</td></tr><tr><td><strong>Renderer Process</strong></td><td>æ¸²æŸ“è¿›ç¨‹</td><td>å¤šä¸ª</td><td>æ¯ä¸ªæ ‡ç­¾é¡µä¸€ä¸ªï¼Œè´Ÿè´£é¡µé¢æ¸²æŸ“</td></tr><tr><td><strong>GPU Process</strong></td><td>GPUè¿›ç¨‹</td><td>1ä¸ª</td><td>è´Ÿè´£å›¾å½¢å¤„ç†å’Œ3DåŠ é€Ÿ</td></tr><tr><td><strong>Network Service</strong></td><td>ç½‘ç»œæœåŠ¡è¿›ç¨‹</td><td>1ä¸ª</td><td>ç»Ÿä¸€å¤„ç†æ‰€æœ‰ç½‘ç»œè¯·æ±‚</td></tr><tr><td><strong>Plugin Process</strong></td><td>æ’ä»¶è¿›ç¨‹</td><td>æŒ‰éœ€</td><td>è¿è¡ŒFlashç­‰ç¬¬ä¸‰æ–¹æ’ä»¶</td></tr></tbody></table>
<h5 data-id="heading-7">Browser Processçš„æ ¸å¿ƒçº¿ç¨‹</h5>
<p><strong>Browser Processæ˜¯æµè§ˆå™¨çš„"å¤§è„‘"ï¼ŒåŒ…å«4ä¸ªå…³é”®çº¿ç¨‹ï¼š</strong></p>
<ol>
<li><strong>UI Threadï¼ˆç•Œé¢çº¿ç¨‹ï¼‰</strong>ï¼šç®¡ç†æµè§ˆå™¨ç•Œé¢ã€åœ°å€æ ã€ä¹¦ç­¾ç­‰</li>
<li><strong>IO Threadï¼ˆIOçº¿ç¨‹ï¼‰</strong>ï¼šå¤„ç†IPCæ¶ˆæ¯è·¯ç”±ï¼Œåè°ƒå„è¿›ç¨‹é€šä¿¡</li>
<li><strong>Storage Threadï¼ˆå­˜å‚¨çº¿ç¨‹ï¼‰</strong>ï¼šç®¡ç†Cookieã€LocalStorageç­‰æŒä¹…åŒ–æ•°æ®</li>
<li><strong>Device Threadï¼ˆè®¾å¤‡çº¿ç¨‹ï¼‰</strong>ï¼šè®¿é—®æ‘„åƒå¤´ã€éº¦å…‹é£ç­‰ç¡¬ä»¶è®¾å¤‡</li>
</ol>
<h5 data-id="heading-8">æ¶æ„ä¼˜åŠ¿å¯¹æ¯”</h5>

























<table><thead><tr><th>é—®é¢˜</th><th>å•è¿›ç¨‹æ–¹æ¡ˆ</th><th>å¤šè¿›ç¨‹æ–¹æ¡ˆ</th></tr></thead><tbody><tr><td><strong>ç¨³å®šæ€§</strong></td><td>ä¸€ä¸ªé¡µé¢å´©æºƒï¼Œå…¨éƒ¨å´©æºƒ</td><td>âœ… è¿›ç¨‹éš”ç¦»ï¼Œæ•…éšœä¸æ‰©æ•£</td></tr><tr><td><strong>å®‰å…¨æ€§</strong></td><td>æ¶æ„ä»£ç å¯ç›´æ¥è®¿é—®ç³»ç»Ÿ</td><td>âœ… æ²™ç®±æœºåˆ¶ï¼Œæƒé™å—é™</td></tr><tr><td><strong>æ€§èƒ½</strong></td><td>å•æ ¸CPUï¼Œæ— æ³•å¹¶è¡Œ</td><td>âœ… å¤šæ ¸CPUï¼Œå¹¶è¡Œå¤„ç†</td></tr></tbody></table>
<hr/>
<h4 data-id="heading-9">1.3 æ²™ç®±æœºåˆ¶ï¼šç»ç’ƒæˆ¿é—´é‡Œçš„ä»£ç </h4>
<p>å‡è®¾ä½ è®¿é—®äº†ä¸€ä¸ªæ¶æ„ç½‘ç«™ï¼Œå®ƒçš„JavaScriptä»£ç è¯•å›¾è¯»å–ä½ ç”µè„‘ä¸Šçš„æ–‡ä»¶ã€çªƒå–ä½ çš„å¯†ç ã€‚å¦‚ä½•é˜²èŒƒï¼Ÿ</p>
<p><strong>è§£å†³æ–¹æ¡ˆï¼šæ²™ç®±æœºåˆ¶ï¼ˆSandboxï¼‰</strong></p>
<p>Renderer Processè¿è¡Œåœ¨å—é™çš„æ²™ç®±ç¯å¢ƒä¸­ï¼Œå°±åƒæŠŠæ½œåœ¨å±é™©çš„ä»£ç å…³åœ¨ä¸€ä¸ªç»ç’ƒæˆ¿é—´é‡Œâ€”â€”å®ƒå¯ä»¥è¿è¡Œï¼Œä½†æ— æ³•ç›´æ¥æ¥è§¦å¤–é¢çš„ç³»ç»Ÿèµ„æºã€‚</p>
<h5 data-id="heading-10">ä¸‰å±‚é˜²æŠ¤ä½“ç³»</h5>
<p><strong>ç¬¬ä¸€å±‚ï¼šè¿›ç¨‹éš”ç¦»</strong></p>
<ul>
<li>é˜»æ­¢ï¼šå…¶ä»–è¿›ç¨‹å®‰å…¨ âœ…</li>
<li>çªç ´ï¼šè¿›å…¥ç¬¬äºŒå±‚ â†’</li>
</ul>
<p><strong>ç¬¬äºŒå±‚ï¼šç³»ç»Ÿè°ƒç”¨è¿‡æ»¤</strong></p>
<ul>
<li>é˜»æ­¢ï¼šç³»ç»Ÿè°ƒç”¨è¢«æ‹¦æˆª âœ…</li>
<li>çªç ´ï¼šè¿›å…¥ç¬¬ä¸‰å±‚ â†’</li>
</ul>
<p><strong>ç¬¬ä¸‰å±‚ï¼šæƒé™éªŒè¯</strong></p>
<ul>
<li>é˜»æ­¢ï¼šè®¿é—®è¢«æ‹’ç» âœ…</li>
<li>çªç ´ï¼šæ“ä½œç³»ç»Ÿå±‚é˜²æŠ¤</li>
</ul>
<p><strong>å®‰å…¨æ•ˆæœï¼š</strong></p>
<ul>
<li>ğŸ›¡ï¸ æ— æ³•è¯»å–æœ¬åœ°æ–‡ä»¶</li>
<li>ğŸ›¡ï¸ æ— æ³•è®¿é—®ç³»ç»Ÿæ³¨å†Œè¡¨</li>
<li>ğŸ›¡ï¸ æ— æ³•æ‰§è¡Œç³»ç»Ÿå‘½ä»¤</li>
<li>ğŸ›¡ï¸ éœ€è¦é€šè¿‡Browser Processä»£ç†è®¿é—®èµ„æº</li>
</ul>
<hr/>
<h4 data-id="heading-11">1.4 Site Isolationï¼šåº”å¯¹CPUæ¼æ´çš„ç»ˆæé˜²æŠ¤ï¼ˆ2018è‡³ä»Šï¼‰</h4>
<h5 data-id="heading-12">å±æœºèƒŒæ™¯</h5>
<p>2018å¹´1æœˆï¼Œè®¡ç®—æœºå®‰å…¨ç•Œçˆ†å‡ºæƒŠå¤©æ¼æ´â€”â€”<strong>Spectreå’ŒMeltdown</strong>ã€‚è¿™ä¸¤ä¸ªCPUçº§åˆ«çš„ç¡¬ä»¶æ¼æ´å½±å“äº†å‡ ä¹æ‰€æœ‰ç°ä»£å¤„ç†å™¨ï¼Œæ”»å‡»è€…å¯ä»¥åˆ©ç”¨ä¾§ä¿¡é“æ”»å‡»è¯»å–è¿›ç¨‹å†…å­˜ä¸­çš„æ•æ„Ÿæ•°æ®ã€‚</p>
<p><strong>æµè§ˆå™¨çš„å±æœºï¼š</strong></p>
<ul>
<li>âœ… ä¸åŒæ ‡ç­¾é¡µè¿è¡Œåœ¨ç‹¬ç«‹è¿›ç¨‹ä¸­</li>
<li>âŒ åŒä¸€æ ‡ç­¾é¡µå†…çš„ä¸åŒæ¥æºiframeä»ç„¶å…±äº«ä¸€ä¸ªè¿›ç¨‹</li>
<li>âŒ æ¶æ„iframeå¯èƒ½åˆ©ç”¨Spectreæ¼æ´è¯»å–ä¸»é¡µé¢çš„å†…å­˜æ•°æ®</li>
</ul>
<h5 data-id="heading-13">æ”»å‡»åœºæ™¯ç¤ºä¾‹</h5>
<p><strong>ä¼ ç»Ÿå¤šè¿›ç¨‹æ¶æ„çš„æ¼æ´ï¼š</strong></p>
<ol>
<li>é“¶è¡Œç½‘ç«™ï¼ˆbank.comï¼‰åœ¨Process 1ä¸­å­˜å‚¨ç”¨æˆ·å¯†ç </li>
<li>é¡µé¢å†…åµŒå…¥æ¶æ„å¹¿å‘Šiframeï¼ˆevil.comï¼‰ï¼Œä¹Ÿåœ¨Process 1</li>
<li>æ¶æ„ä»£ç åˆ©ç”¨Spectreæ¼æ´å‘èµ·ä¾§ä¿¡é“æ”»å‡»</li>
<li>æˆåŠŸè¯»å–åŒè¿›ç¨‹å†…å­˜ä¸­çš„å¯†ç æ•°æ® âŒ</li>
</ol>
<p><strong>é—®é¢˜ï¼šåŒè¿›ç¨‹å†…å­˜å­˜åœ¨æ•°æ®æ³„éœ²é£é™©</strong></p>
<h5 data-id="heading-14">Site Isolationè§£å†³æ–¹æ¡ˆ</h5>
<p><strong>æ ¸å¿ƒåŸåˆ™ï¼šä¸åŒæºï¼ˆOriginï¼‰çš„å†…å®¹å¿…é¡»è¿è¡Œåœ¨ç‹¬ç«‹çš„è¿›ç¨‹ä¸­ï¼Œå³ä½¿åœ¨åŒä¸€æ ‡ç­¾é¡µå†…ã€‚</strong></p>
<p><strong>åŒä¸€æ ‡ç­¾é¡µçš„è¿›ç¨‹åˆ†é…ï¼š</strong></p>





























<table><thead><tr><th>æ¡†æ¶</th><th>åŸŸå</th><th>åˆ†é…è¿›ç¨‹</th><th>éš”ç¦»æ•ˆæœ</th></tr></thead><tbody><tr><td>ä¸»æ¡†æ¶</td><td>portal.com</td><td>Process 1</td><td>ç‹¬ç«‹å†…å­˜ç©ºé—´</td></tr><tr><td>iframe 1</td><td>ads.com</td><td>Process 2</td><td>âœ… æ— æ³•è®¿é—®Process 1</td></tr><tr><td>iframe 2</td><td>video.com</td><td>Process 3</td><td>âœ… æ— æ³•è®¿é—®Process 1/2</td></tr></tbody></table>
<p><strong>OOPIFå·¥ä½œæµç¨‹ï¼š</strong></p>
<ol>
<li>é“¶è¡Œç½‘ç«™æ•°æ®å­˜å‚¨åœ¨Process 1å†…å­˜</li>
<li>æ¶æ„iframeåœ¨Process 2ä¸­å°è¯•Spectreæ”»å‡»</li>
<li>åªèƒ½è®¿é—®Process 2çš„å†…å­˜ç©ºé—´</li>
<li><strong>æ”»å‡»å¤±è´¥ï¼è¿›ç¨‹å†…å­˜éš”ç¦»ç”Ÿæ•ˆ</strong> âœ…</li>
</ol>
<h5 data-id="heading-15">çœŸå®æ¡ˆä¾‹ï¼šæŸé“¶è¡Œæ”¯ä»˜é¡µé¢å®‰å…¨åŠ å›º</h5>
<p><strong>èƒŒæ™¯ï¼š</strong></p>
<ul>
<li>é“¶è¡Œåœ¨æ”¯ä»˜é¡µé¢åµŒå…¥ç¬¬ä¸‰æ–¹å¹¿å‘Šiframeä»¥å¢åŠ æ”¶å…¥</li>
<li>å®‰å…¨å›¢é˜Ÿæ‹…å¿ƒå¹¿å‘Šä»£ç å¯èƒ½çªƒå–ç”¨æˆ·æ”¯ä»˜ä¿¡æ¯</li>
</ul>
<p><strong>é—®é¢˜å‘ç°ï¼š</strong></p>
<ul>
<li>è™½ç„¶å¹¿å‘Šiframeå—åŒæºç­–ç•¥é™åˆ¶</li>
<li>ä½†Spectreæ¼æ´å¯èƒ½è®©æ¶æ„ä»£ç é€šè¿‡ä¾§ä¿¡é“æ”»å‡»è¯»å–åŒè¿›ç¨‹å†…å­˜</li>
<li>å¯èƒ½è·å–æ”¯ä»˜è¡¨å•æ•°æ®ï¼ˆå¡å·ã€CVVç­‰æ•æ„Ÿä¿¡æ¯ï¼‰</li>
</ul>
<p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong>
å¯ç”¨Site Isolationï¼Œç¡®ä¿æ”¯ä»˜é¡µé¢ä¸»æ¡†æ¶ä¸å¹¿å‘Šiframeè¿è¡Œåœ¨ç‹¬ç«‹è¿›ç¨‹ä¸­ã€‚</p>
<p><strong>å®æ–½æ•ˆæœï¼š</strong></p>






























<table><thead><tr><th>æŒ‡æ ‡</th><th>ä¼˜åŒ–å‰</th><th>ä¼˜åŒ–å</th></tr></thead><tbody><tr><td>å†…å­˜éš”ç¦»</td><td>âŒ å…±äº«è¿›ç¨‹</td><td>âœ… ç‹¬ç«‹è¿›ç¨‹</td></tr><tr><td>Spectreæ”»å‡»æˆåŠŸç‡</td><td>85%</td><td>0%</td></tr><tr><td>é¡µé¢åŠ è½½æ—¶é—´</td><td>åŸºå‡†</td><td>+12ms</td></tr><tr><td>å†…å­˜å ç”¨</td><td>åŸºå‡†</td><td>+8MB/iframe</td></tr></tbody></table>
<p><strong>å…³é”®é…ç½®ï¼š</strong></p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-comment">&lt;!-- æ”¯ä»˜é¡µé¢è®¾ç½®COOP/COEPå¤´éƒ¨ --&gt;</span>
Cross-Origin-Opener-Policy: same-origin
Cross-Origin-Embedder-Policy: require-corp
</code></pre>
<p><strong>ä¸šåŠ¡ä»·å€¼ï¼š</strong></p>
<ul>
<li>ä¸Šçº¿3ä¸ªæœˆåï¼ŒæˆåŠŸæ‹¦æˆª2æ¬¡çœŸå®çš„ä¾§ä¿¡é“æ”»å‡»å°è¯•</li>
<li>ä¿æŠ¤äº†çº¦50ä¸‡ç”¨æˆ·çš„æ”¯ä»˜å®‰å…¨</li>
</ul>
<h5 data-id="heading-16">æŠ€æœ¯å®ç°ç»†èŠ‚</h5>
<p><strong>1. è¿›ç¨‹åˆ†é…è§„åˆ™</strong></p>
<pre><code class="hljs language-arduino" lang="arduino">ä¸»é¡µé¢ï¼športal.com               â†’ Renderer <span class="hljs-built_in">Process</span> <span class="hljs-number">1</span>
â”œâ”€ iframe: ads.com              â†’ Renderer <span class="hljs-built_in">Process</span> <span class="hljs-number">2</span>ï¼ˆä¸åŒæºï¼Œç‹¬ç«‹è¿›ç¨‹ï¼‰
â””â”€ iframe: portal.com/widget    â†’ Renderer <span class="hljs-built_in">Process</span> <span class="hljs-number">1</span>ï¼ˆåŒæºï¼Œå…±äº«è¿›ç¨‹ï¼‰
</code></pre>
<p><strong>2. å†…å­˜ä»£ä»·ä¸ä¼˜åŒ–</strong></p>























<table><thead><tr><th>æ¨¡å¼</th><th>è¿›ç¨‹æ•°é‡</th><th>å†…å­˜å ç”¨</th><th>å¢é•¿æ¯”ä¾‹</th></tr></thead><tbody><tr><td>å•è¿›ç¨‹æ¨¡å¼</td><td>1ä¸ª</td><td>80MB</td><td>åŸºå‡†</td></tr><tr><td>Site Isolation</td><td>3ä¸ª</td><td>180MB</td><td>+125%</td></tr></tbody></table>
<p><strong>ä¼˜åŒ–ç­–ç•¥ï¼š</strong></p>
<ol>
<li><strong>è¿›ç¨‹å¤ç”¨</strong>ï¼šç›¸åŒSiteçš„iframeå…±äº«è¿›ç¨‹</li>
<li><strong>è¿›ç¨‹é™åˆ¶</strong>ï¼šè®¾ç½®æœ€å¤§è¿›ç¨‹æ•°ï¼ˆå¦‚20ä¸ªï¼‰ï¼Œè¶…å‡ºåå¤ç”¨</li>
<li><strong>ä½ç«¯è®¾å¤‡é™çº§</strong>ï¼šå†…å­˜&lt;2GBçš„è®¾å¤‡ç¦ç”¨Site Isolation</li>
</ol>
<hr/>
<h3 data-id="heading-17">äºŒã€è¿›ç¨‹é—´é€šä¿¡ï¼ˆIPCï¼‰ï¼šè¿›ç¨‹å¦‚ä½•åä½œ</h3>
<h4 data-id="heading-18">2.1 åœºæ™¯ï¼šæ–‡ä»¶ä¸Šä¼ èƒŒåçš„é€šä¿¡</h4>
<p>ä½ åœ¨è½¬è½¬ä¸Šä¼ å•†å“å›¾ç‰‡ï¼Œç‚¹å‡»"é€‰æ‹©æ–‡ä»¶"æŒ‰é’®ï¼Œé€‰ä¸­å›¾ç‰‡åä¸Šä¼ ã€‚çœ‹ä¼¼ç®€å•çš„æ“ä½œï¼ŒèƒŒåéšè—ç€å¤æ‚çš„è¿›ç¨‹é—´é€šä¿¡ã€‚</p>
<p><strong>æŠ€æœ¯çº¦æŸï¼š</strong></p>
<ul>
<li>ç½‘é¡µè¿è¡Œåœ¨Renderer Processï¼ˆæ²™ç®±ç¯å¢ƒï¼‰â†’ ä¸èƒ½ç›´æ¥è®¿é—®æ–‡ä»¶ç³»ç»Ÿ</li>
<li>æ–‡ä»¶è®¿é—®éœ€è¦Browser Processä»£ç†ï¼ˆæ‹¥æœ‰å®Œæ•´ç³»ç»Ÿæƒé™ï¼‰â†’ åªæœ‰å®ƒèƒ½æ‰“å¼€æ–‡ä»¶é€‰æ‹©å™¨</li>
</ul>
<h5 data-id="heading-19">é€šä¿¡æµç¨‹</h5>
<p><strong>æ­¥éª¤1-8çš„å®Œæ•´æµç¨‹ï¼š</strong></p>
<ol>
<li>ç”¨æˆ·ç‚¹å‡»"é€‰æ‹©æ–‡ä»¶"</li>
<li>ç½‘é¡µï¼ˆRenderer Processï¼‰å‘é€IPCæ¶ˆæ¯ï¼šè¯·æ±‚æ–‡ä»¶é€‰æ‹©å™¨</li>
<li>Browser Processæ¥æ”¶æ¶ˆæ¯</li>
<li>Browser Processæ‰“å¼€æ–‡ä»¶å¯¹è¯æ¡†</li>
<li>ç”¨æˆ·é€‰æ‹©æ–‡ä»¶</li>
<li>Browser Processè¯»å–æ–‡ä»¶å†…å®¹</li>
<li>Browser Processé€šè¿‡IPCä¼ é€’æ–‡ä»¶æ•°æ®ç»™Renderer Process</li>
<li>ç½‘é¡µè·å¾—æ–‡ä»¶æ•°æ®ï¼Œå¼€å§‹ä¸Šä¼ </li>
</ol>
<hr/>
<h4 data-id="heading-20">2.2 Mojo IPCæ¡†æ¶ï¼šä¸‰ç§é€šä¿¡æ¨¡å¼</h4>
<p>Chromiumä½¿ç”¨Mojoä½œä¸ºç»Ÿä¸€IPCæ¡†æ¶ï¼Œæä¾›ä¸‰ç§é€šä¿¡æ¨¡å¼ï¼š</p>
<h5 data-id="heading-21">æ¨¡å¼1ï¼šæ¶ˆæ¯ä¼ é€’ï¼ˆå°æ•°æ®é‡ï¼‰</h5>
<p><strong>ç±»æ¯”ï¼š</strong> å°±åƒå¯„ä¿¡ï¼Œä½ æŠŠä¿¡æ¯å†™åœ¨çº¸ä¸Šï¼ˆåºåˆ—åŒ–ï¼‰ï¼Œè£…è¿›ä¿¡å°ï¼Œé€šè¿‡é‚®å±€ï¼ˆç®¡é“ï¼‰å‘é€ï¼Œæ”¶ä»¶äººæ‹†å¼€ä¿¡å°ï¼ˆååºåˆ—åŒ–ï¼‰é˜…è¯»ã€‚</p>
<p><strong>å·¥ä½œæµç¨‹ï¼š</strong></p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-built_in">Process</span> A â†’ åºåˆ—åŒ–æ•°æ® â†’ å†™å…¥Mojo Pipe â†’ ä¼ è¾“ â†’ <span class="hljs-built_in">Process</span> Bæ¥æ”¶ â†’ ååºåˆ—åŒ– â†’ å¤„ç†æ•°æ®
</code></pre>
<p><strong>é€‚ç”¨åœºæ™¯ï¼š</strong></p>
<ul>
<li>âœ… æ§åˆ¶æŒ‡ä»¤ã€é…ç½®ä¿¡æ¯</li>
<li>âœ… å°äº1KBçš„æ•°æ®</li>
<li>âŒ å¤§æ•°æ®é‡ä¼ è¾“ï¼ˆæ•ˆç‡ä½ï¼‰</li>
</ul>
<hr/>
<h5 data-id="heading-22">æ¨¡å¼2ï¼šå…±äº«å†…å­˜ï¼ˆé›¶æ‹·è´ä¼˜åŒ–ï¼‰</h5>
<p><strong>åœºæ™¯ï¼š</strong> ä½ åœ¨Canvasä¸Šç»˜åˆ¶äº†ä¸€å¼ é«˜æ¸…å›¾ç‰‡ï¼ˆ1MBï¼‰ï¼Œéœ€è¦å‘é€ç»™GPU Processè¿›è¡Œæ¸²æŸ“ã€‚å¦‚æœç”¨æ¶ˆæ¯ä¼ é€’ï¼Œæ•°æ®è¦æ‹·è´ä¸¤æ¬¡ï¼Œéå¸¸ä½æ•ˆã€‚</p>
<p><strong>ç±»æ¯”ï¼š</strong> ä¸å…¶æŠŠæ•´æœ¬ä¹¦æ‹·è´ä¸€ä»½ç»™åŒäº‹ï¼Œä¸å¦‚æŠŠä¹¦æ”¾åœ¨å…±äº«çš„ä¹¦æ¶ä¸Šï¼Œå‘Šè¯‰ä»–ä½ç½®å°±è¡Œã€‚</p>
<h5 data-id="heading-23">æ€§èƒ½å¯¹æ¯”ï¼šä¼ è¾“1MBå›¾åƒæ•°æ®</h5>





























<table><thead><tr><th>ä¼ è¾“æ–¹å¼</th><th>æ•°æ®æ‹·è´æ¬¡æ•°</th><th>è€—æ—¶</th><th>å†…å­˜å ç”¨</th></tr></thead><tbody><tr><td><strong>æ¶ˆæ¯ä¼ é€’</strong></td><td>2æ¬¡æ‹·è´</td><td>2ms</td><td>3MBï¼ˆé‡å¤å ç”¨ï¼‰</td></tr><tr><td><strong>å…±äº«å†…å­˜</strong></td><td>0æ¬¡æ‹·è´</td><td>5Î¼s</td><td>1MBï¼ˆå…±äº«ï¼‰</td></tr><tr><td><strong>æ€§èƒ½æå‡</strong></td><td>-</td><td><strong>400å€</strong></td><td><strong>èŠ‚çœ67%</strong></td></tr></tbody></table>
<h5 data-id="heading-24">Canvasæ•°æ®ä¼ è¾“æµç¨‹</h5>
<ol>
<li>Canvas APIï¼ˆRendererï¼‰åˆ›å»ºå…±äº«å†…å­˜åŒºåŸŸ</li>
<li>å°†ä½å›¾æ•°æ®å†™å…¥å…±äº«å†…å­˜</li>
<li>ä¼ é€’å†…å­˜å¥æŸ„ç»™GPU Processï¼ˆ<strong>åªä¼ å¥æŸ„ï¼Œä¸ä¼ æ•°æ®ï¼</strong>ï¼‰</li>
<li>GPU Processæ˜ å°„å…±äº«å†…å­˜</li>
<li>GPU Processç›´æ¥è¯»å–æ•°æ®è¿›è¡Œæ¸²æŸ“</li>
</ol>
<p>âœ¨ <strong>é›¶æ‹·è´ä¼ è¾“ï¼</strong></p>
<hr/>
<h5 data-id="heading-25">æ¨¡å¼3ï¼šå¥æŸ„ä¼ é€’ï¼ˆèµ„æºå¼•ç”¨ï¼‰</h5>
<p><strong>åœºæ™¯ï¼š</strong> ç”¨æˆ·é€‰æ‹©äº†ä¸€ä¸ª2GBçš„è§†é¢‘æ–‡ä»¶ä¸Šä¼ ã€‚å¦‚æœä¼ è¾“æ–‡ä»¶æœ¬èº«ï¼Œä¼šéå¸¸æ…¢ã€‚</p>
<p><strong>ç±»æ¯”ï¼š</strong> ä¸å…¶æŠŠé“¶è¡Œä¿é™©ç®±é‡Œçš„é»„é‡‘æ¬æ¥æ¬å»ï¼Œä¸å¦‚æŠŠä¿é™©ç®±é’¥åŒ™ï¼ˆå¥æŸ„ï¼‰ç»™å¯¹æ–¹ï¼Œè®©ä»–è‡ªå·±å»å–ã€‚</p>
<p><strong>åŸç†ï¼š</strong> ä¼ é€’èµ„æºçš„è®¿é—®å‡­è¯è€Œéèµ„æºæœ¬èº«</p>
<p><strong>æµç¨‹ï¼š</strong></p>
<ol>
<li>Browser Processæ‰“å¼€æ–‡ä»¶ï¼Œè·å¾—æ–‡ä»¶æè¿°ç¬¦FD#42</li>
<li>Browser Processä¼ é€’å¥æŸ„FD#42ç»™Renderer Process</li>
<li>Renderer Processä½¿ç”¨FD#42ç›´æ¥è¯»å–æ–‡ä»¶</li>
<li>æ–‡ä»¶ç³»ç»Ÿè¿”å›æ–‡ä»¶å†…å®¹</li>
</ol>
<hr/>
<h4 data-id="heading-26">2.3 å¦‚ä½•é€‰æ‹©åˆé€‚çš„é€šä¿¡æ¨¡å¼</h4>





































<table><thead><tr><th>é€šä¿¡æ¨¡å¼</th><th>å»¶è¿Ÿ</th><th>é€‚ç”¨æ•°æ®é‡</th><th>å†…å­˜æ‹·è´</th><th>å…¸å‹åœºæ™¯</th><th>ä½¿ç”¨åˆ¤æ–­</th></tr></thead><tbody><tr><td><strong>æ¶ˆæ¯ä¼ é€’</strong></td><td>~50Î¼s</td><td>&lt;1KB</td><td>æ˜¯</td><td>å‘½ä»¤ã€é…ç½®</td><td>å°æ•°æ®ï¼Œä½é¢‘</td></tr><tr><td><strong>å…±äº«å†…å­˜</strong></td><td>~5Î¼s</td><td>&gt;100KB</td><td>å¦</td><td>å›¾åƒã€è§†é¢‘</td><td>å¤§æ•°æ®ï¼Œé«˜é¢‘</td></tr><tr><td><strong>å¥æŸ„ä¼ é€’</strong></td><td>~20Î¼s</td><td>ä¸é™</td><td>å¦</td><td>æ–‡ä»¶ã€Socket</td><td>èµ„æºå¼•ç”¨</td></tr></tbody></table>
<p><strong>é€‰æ‹©å»ºè®®ï¼š</strong></p>
<ul>
<li>ğŸ“ å‘é€ç®€å•æŒ‡ä»¤ â†’ æ¶ˆæ¯ä¼ é€’</li>
<li>ğŸ–¼ï¸ ä¼ è¾“å›¾ç‰‡è§†é¢‘ â†’ å…±äº«å†…å­˜</li>
<li>ğŸ“ è®¿é—®å¤§æ–‡ä»¶ â†’ å¥æŸ„ä¼ é€’</li>
</ul>
<hr/>
<h3 data-id="heading-27">ä¸‰ã€æ¸²æŸ“å¼•æ“ï¼šä»HTMLåˆ°åƒç´ çš„å¥‡å¦™æ—…ç¨‹</h3>
<h4 data-id="heading-28">3.1 å®Œæ•´æ¸²æŸ“æµç¨‹æ¦‚è§ˆ</h4>
<p><strong>é—®é¢˜ï¼š</strong> å½“ä½ åœ¨æµè§ˆå™¨åœ°å€æ è¾“å…¥<code>www.zhuanzhuan.com</code>å¹¶æŒ‰ä¸‹å›è½¦ï¼Œåˆ°é¡µé¢å®Œæ•´æ˜¾ç¤ºï¼Œè¿™æœŸé—´å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ</p>
<p><strong>ç”¨æˆ·è§†è§’ï¼š</strong> è¾“å…¥URLï¼ŒæŒ‰ä¸‹å›è½¦ï¼ŒçŸ­æš‚ç™½å±ï¼Œé¡µé¢å®Œæ•´å‘ˆç°ã€‚æ•´ä¸ªè¿‡ç¨‹çº¦åŠç§’ã€‚</p>
<p><strong>æŠ€æœ¯è§†è§’ï¼š</strong> è¿™åŠç§’å†…ï¼Œå¤šä¸ªè¿›ç¨‹ååŒå·¥ä½œï¼Œå®Œæˆç½‘ç»œä¸‹è½½ã€HTMLè§£æã€CSSè®¡ç®—ã€å¸ƒå±€æ’ç‰ˆã€ç»˜åˆ¶æŒ‡ä»¤ç”Ÿæˆã€GPUåˆæˆç­‰ä¸€ç³»åˆ—å¤æ‚æ“ä½œã€‚</p>
<h5 data-id="heading-29">å®Œæ•´æµç¨‹æ—¶é—´çº¿ï¼ˆæ€»è€—æ—¶çº¦500msï¼‰</h5>
<p><strong>0-200msï¼šç½‘ç»œè¯·æ±‚é˜¶æ®µ</strong></p>
<ul>
<li>Browser Processå‘èµ·HTTPè¯·æ±‚</li>
<li>DNSè§£æ â†’ TCPè¿æ¥ â†’ HTTPè¯·æ±‚/å“åº”</li>
</ul>
<p><strong>200-300msï¼šæ•°æ®ä¸‹è½½</strong></p>
<ul>
<li>Network Serviceä¸‹è½½HTMLæ•°æ®</li>
</ul>
<p><strong>300-500msï¼šæ¸²æŸ“ç®¡çº¿</strong></p>
<ul>
<li>300-350msï¼šParseï¼ˆHTML/CSSè§£æï¼‰</li>
<li>350-370msï¼šStyleï¼ˆæ ·å¼è®¡ç®—ï¼‰</li>
<li>370-400msï¼šLayoutï¼ˆå¸ƒå±€è®¡ç®—ï¼‰</li>
<li>400-430msï¼šPaintï¼ˆç”Ÿæˆç»˜åˆ¶æŒ‡ä»¤ï¼‰</li>
<li>430-480msï¼šCompositeï¼ˆå›¾å±‚åˆæˆï¼‰</li>
</ul>
<p><strong>480-500msï¼šGPUåˆæˆè¾“å‡º</strong></p>
<ul>
<li>Tilingï¼ˆç“¦ç‰‡åˆ’åˆ†ï¼‰</li>
<li>Rasterizationï¼ˆå…‰æ …åŒ–ï¼‰</li>
<li>Compositeï¼ˆåˆæˆï¼‰</li>
</ul>
<p><strong>500msï¼šå±å¹•æ˜¾ç¤º</strong> ğŸ‰</p>
<h5 data-id="heading-30">æ¸²æŸ“ç®¡çº¿å…­å¤§é˜¶æ®µ</h5>






















































<table><thead><tr><th>é˜¶æ®µ</th><th>è¾“å…¥</th><th>è¾“å‡º</th><th>ä¸»è¦å·¥ä½œ</th><th>è§¦å‘æ¡ä»¶</th></tr></thead><tbody><tr><td><strong>Parse</strong></td><td>HTML/CSSæ–‡æœ¬</td><td>DOMæ ‘+CSSOMæ ‘</td><td>è§£ææ–‡æ¡£ç»“æ„</td><td>é¦–æ¬¡åŠ è½½</td></tr><tr><td><strong>Style</strong></td><td>DOM+CSSOM</td><td>Render Tree</td><td>è®¡ç®—æ¯ä¸ªå…ƒç´ çš„æ ·å¼</td><td>CSSå˜åŒ–</td></tr><tr><td><strong>Layout</strong></td><td>Render Tree</td><td>Layout Tree</td><td>è®¡ç®—å…ƒç´ ä½ç½®å’Œå°ºå¯¸</td><td>å‡ ä½•å±æ€§å˜åŒ–</td></tr><tr><td><strong>Paint</strong></td><td>Layout Tree</td><td>Display List</td><td>ç”Ÿæˆç»˜åˆ¶æŒ‡ä»¤</td><td>è§†è§‰å±æ€§å˜åŒ–</td></tr><tr><td><strong>Composite</strong></td><td>Display List</td><td>Layer Tree</td><td>å›¾å±‚åˆ†å±‚å’Œåˆæˆ</td><td>transform/opacityå˜åŒ–</td></tr><tr><td><strong>Display</strong></td><td>Layer Tree</td><td>å±å¹•åƒç´ </td><td>GPUè¾“å‡ºåˆ°å±å¹•</td><td>æ¯ä¸€å¸§</td></tr></tbody></table>
<hr/>
<h4 data-id="heading-31">3.2 Parseé˜¶æ®µï¼šè¾¹ä¸‹è½½è¾¹è§£æçš„æ™ºæ…§</h4>
<p><strong>é—®é¢˜åœºæ™¯ï¼š</strong> ä¸€ä¸ªç”µå•†é¦–é¡µçš„HTMLå¯èƒ½æœ‰500KBï¼Œå¦‚æœç­‰å¾…å…¨éƒ¨ä¸‹è½½å®Œå†è§£æï¼Œç”¨æˆ·ä¼šç›¯ç€ç™½å±ç­‰å¾…å¥½å‡ ç§’ã€‚èƒ½ä¸èƒ½è¾¹ä¸‹è½½è¾¹è§£æï¼Ÿ</p>
<p><strong>ç­”æ¡ˆï¼š</strong> å¯ä»¥ï¼æµè§ˆå™¨é‡‡ç”¨<strong>æµå¼è§£æï¼ˆStreaming Parseï¼‰</strong>ï¼Œæ”¶åˆ°ä¸€å°å—æ•°æ®ï¼ˆé€šå¸¸8KBï¼‰å°±ç«‹å³å¼€å§‹å¤„ç†ã€‚</p>
<h5 data-id="heading-32">é¢„æ‰«æå™¨ï¼ˆPreload Scannerï¼‰æ€§èƒ½ä¼˜åŒ–</h5>
<p><strong>é—®é¢˜ï¼š</strong> HTMLè§£æé‡åˆ°<code>&lt;script&gt;</code>æ ‡ç­¾æ—¶ä¼šé˜»å¡ï¼Œåé¢çš„èµ„æºæ— æ³•æå‰å‘ç°å’Œä¸‹è½½ã€‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong> é¢„æ‰«æå™¨åœ¨ä¸»è§£æå™¨é˜»å¡æ—¶ï¼Œç»§ç»­æ‰«æåç»­HTMLï¼Œæå‰å‘ç°èµ„æºå¼•ç”¨å¹¶è¡Œä¸‹è½½ã€‚</p>
<p><strong>å·¥ä½œæµç¨‹ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-ini" lang="ini">0ms    - ä¸»è§£æå™¨å¼€å§‹å·¥ä½œ
50ms   - é‡åˆ°&lt;script <span class="hljs-attr">src</span>=<span class="hljs-string">"app.js"</span>&gt;ï¼Œä¸»è§£æå™¨æš‚åœ
50ms   - é¢„æ‰«æå™¨æ¿€æ´»ï¼Œæ‰«æåç»­HTML
55ms   - é¢„æ‰«æå™¨å‘ç°&lt;link <span class="hljs-attr">href</span>=<span class="hljs-string">"style.css"</span>&gt;ï¼Œç«‹å³å¼€å§‹ä¸‹è½½
60ms   - é¢„æ‰«æå™¨å‘ç°&lt;img <span class="hljs-attr">src</span>=<span class="hljs-string">"logo.jpg"</span>&gt;ï¼Œç«‹å³å¼€å§‹ä¸‹è½½
200ms  - app.jsä¸‹è½½å®Œæˆï¼Œä¸»è§£æå™¨æ¢å¤
250ms  - style.csså·²å®Œæˆï¼ˆå¹¶è¡Œä¸‹è½½èŠ‚çœæ—¶é—´ï¼‰
500ms  - logo.jpgå·²å®Œæˆï¼ˆå¹¶è¡Œä¸‹è½½èŠ‚çœæ—¶é—´ï¼‰
</code></pre>
<h5 data-id="heading-33">æ€§èƒ½å¯¹æ¯”</h5>























<table><thead><tr><th>åœºæ™¯</th><th>èµ„æºå‘ç°æ–¹å¼</th><th>æ€»è€—æ—¶</th><th>æ€§èƒ½æå‡</th></tr></thead><tbody><tr><td><strong>æ— é¢„æ‰«æå™¨</strong></td><td>ä¸²è¡Œå‘ç°èµ„æº</td><td>1100ms</td><td>åŸºå‡†</td></tr><tr><td><strong>æœ‰é¢„æ‰«æå™¨</strong></td><td>å¹¶è¡Œå‘ç°+ä¸‹è½½</td><td>500ms</td><td><strong>2.2å€</strong></td></tr></tbody></table>
<hr/>
<h4 data-id="heading-34">3.3 Styleé˜¶æ®µï¼šCSSé€‰æ‹©å™¨çš„åŒ¹é…é­”æ³•</h4>
<p><strong>é—®é¢˜åœºæ™¯ï¼š</strong> ä¸€ä¸ªå¤æ‚çš„å•é¡µåº”ç”¨å¯èƒ½æœ‰10,000ä¸ªDOMå…ƒç´ ï¼ŒCSSæ–‡ä»¶é‡Œæœ‰5,000æ¡è§„åˆ™ã€‚æµè§ˆå™¨éœ€è¦åˆ¤æ–­å“ªäº›è§„åˆ™åº”ç”¨åˆ°å“ªäº›å…ƒç´ ï¼Œè¿™æ˜¯ä¸€ä¸ªç»„åˆçˆ†ç‚¸é—®é¢˜ï¼ˆ10,000 Ã— 5,000 = 5åƒä¸‡æ¬¡åˆ¤æ–­ï¼‰ã€‚</p>
<p><strong>æŒ‘æˆ˜ï¼š</strong> å¦‚ä½•åœ¨æ¯«ç§’çº§å®Œæˆè¿™ä¸ªè®¡ç®—ï¼Ÿ</p>
<h5 data-id="heading-35">CSSé€‰æ‹©å™¨ç¤ºä¾‹</h5>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-tag">div</span><span class="hljs-selector-class">.container</span> <span class="hljs-selector-tag">nav</span> <span class="hljs-selector-tag">ul</span> <span class="hljs-selector-tag">li</span> <span class="hljs-selector-tag">a</span><span class="hljs-selector-class">.active</span> { 
  <span class="hljs-attribute">color</span>: red; 
}
</code></pre>
<h5 data-id="heading-36">ä¸ºä»€ä¹ˆè¦ä»å³åˆ°å·¦åŒ¹é…ï¼Ÿ</h5>
<p><strong>æµè§ˆå™¨é‡‡ç”¨ï¼šä»å³åˆ°å·¦åŒ¹é…</strong></p>
<ol>
<li>å®šä½æ‰€æœ‰ <code>a.active</code> å…ƒç´  â†’ ç»“æœï¼š50ä¸ªå…ƒç´ </li>
<li>è¿‡æ»¤çˆ¶å…ƒç´ é<code>li</code>çš„ â†’ æ’é™¤30ä¸ªï¼Œå‰©ä½™20ä¸ª</li>
<li>è¿‡æ»¤æ— <code>ul</code>ç¥–å…ˆçš„ â†’ æ’é™¤10ä¸ªï¼Œå‰©ä½™10ä¸ª</li>
<li>è¿‡æ»¤æ— <code>nav</code>ç¥–å…ˆçš„ â†’ æ’é™¤5ä¸ªï¼Œå‰©ä½™5ä¸ª</li>
<li>è¿‡æ»¤æ— <code>div.container</code>ç¥–å…ˆçš„ â†’ æ’é™¤3ä¸ªï¼Œå‰©ä½™2ä¸ª</li>
</ol>
<p>âœ… <strong>åŒ¹é…å®Œæˆï¼š2ä¸ªå…ƒç´ ï¼ˆæ£€æŸ¥çº¦100ä¸ªå…ƒç´ ï¼‰</strong></p>
<p><strong>å¦‚æœä»å·¦åˆ°å³åŒ¹é…ï¼ˆä½æ•ˆæ–¹æ¡ˆï¼‰ï¼š</strong></p>
<ol>
<li>å®šä½æ‰€æœ‰ <code>div.container</code> â†’ ç»“æœï¼š100ä¸ªå…ƒç´ </li>
<li>éå†è¿™100ä¸ªdivçš„æ‰€æœ‰å­å­™å…ƒç´ æŸ¥æ‰¾<code>nav</code> â†’ å¯èƒ½æ£€æŸ¥10000+ä¸ªèŠ‚ç‚¹</li>
<li>ç»§ç»­æ·±åº¦éå†... â†’ éœ€è¦å¤§é‡å›æº¯</li>
</ol>
<p>âŒ <strong>æ€§èƒ½ä¸¥é‡ä¸‹é™ï¼ˆæ£€æŸ¥çº¦10,000+ä¸ªå…ƒç´ ï¼‰</strong></p>
<h5 data-id="heading-37">æ€§èƒ½æ•°æ®å¯¹æ¯”</h5>























<table><thead><tr><th>åŒ¹é…æ–¹å‘</th><th>å…ƒç´ æ£€æŸ¥é‡</th><th>å¹³å‡è€—æ—¶</th><th>æ€§èƒ½æ¯”</th></tr></thead><tbody><tr><td><strong>ä»å³åˆ°å·¦</strong></td><td>~100ä¸ª</td><td>~1ms</td><td>åŸºå‡†</td></tr><tr><td><strong>ä»å·¦åˆ°å³</strong></td><td>~10,000ä¸ª</td><td>~100ms</td><td><strong>æ…¢100å€</strong></td></tr></tbody></table>
<p><strong>ä¼˜åŒ–å»ºè®®ï¼š</strong></p>
<ul>
<li>âœ… ä½¿ç”¨æ›´å…·ä½“çš„é€‰æ‹©å™¨ï¼ˆå¦‚ç±»é€‰æ‹©å™¨ã€IDé€‰æ‹©å™¨ï¼‰</li>
<li>âœ… é¿å…è¿‡æ·±çš„åµŒå¥—é€‰æ‹©å™¨</li>
<li>âŒ é¿å…é€šé…ç¬¦é€‰æ‹©å™¨ <code>*</code></li>
</ul>
<hr/>
<h4 data-id="heading-38">3.4 Layouté˜¶æ®µï¼šè®¡ç®—å…ƒç´ çš„ä½ç½®å’Œå°ºå¯¸</h4>
<p><strong>åœºæ™¯ï¼š</strong> ä½ æ‰“å¼€ä¸€ä¸ªå“åº”å¼ç½‘é¡µï¼Œæµè§ˆå™¨çª—å£å®½åº¦1920pxã€‚æµè§ˆå™¨éœ€è¦è®¡ç®—æ¯ä¸ªå…ƒç´ çš„ç¡®åˆ‡ä½ç½®å’Œå°ºå¯¸ã€‚</p>
<p><strong>ç¤ºä¾‹è®¡ç®—ï¼š</strong></p>
<ul>
<li>å¯¼èˆªæ å®½åº¦ï¼š100% â†’ 1920px</li>
<li>ä¸»å†…å®¹åŒºï¼š70%å®½åº¦ï¼Œå·¦æµ®åŠ¨ â†’ 1344px</li>
<li>ä¾§è¾¹æ ï¼š30%å®½åº¦ï¼Œå³æµ®åŠ¨ â†’ 576px</li>
</ul>
<h5 data-id="heading-39">Layoutè§¦å‘æœºåˆ¶</h5>





























<table><thead><tr><th>è§¦å‘ç±»å‹</th><th>è§¦å‘åœºæ™¯</th><th>è€—æ—¶</th><th>å½±å“èŒƒå›´</th></tr></thead><tbody><tr><td><strong>Initial Layout</strong></td><td>é¦–æ¬¡åŠ è½½é¡µé¢</td><td>100-500ms</td><td>å…¨å±€</td></tr><tr><td><strong>Incremental Layout</strong></td><td>å±€éƒ¨DOMå˜åŒ–</td><td>1-50ms</td><td>å±€éƒ¨</td></tr><tr><td><strong>Full Layout</strong></td><td>çª—å£è°ƒæ•´å¤§å°</td><td>200-1000ms</td><td>å…¨å±€</td></tr></tbody></table>
<h5 data-id="heading-40">è§¦å‘Layoutçš„CSSå±æ€§</h5>
<p><strong>ç›’æ¨¡å‹ç›¸å…³ï¼š</strong></p>
<ul>
<li><code>width</code>, <code>height</code>, <code>padding</code>, <code>margin</code>, <code>border</code></li>
</ul>
<p><strong>å®šä½ç›¸å…³ï¼š</strong></p>
<ul>
<li><code>position</code>, <code>top</code>, <code>left</code>, <code>bottom</code>, <code>right</code></li>
</ul>
<p><strong>å…¶ä»–ï¼š</strong></p>
<ul>
<li><code>float</code>, <code>clear</code>, <code>display</code>, <code>overflow</code>, <code>font-size</code>, <code>line-height</code></li>
</ul>
<hr/>
<h5 data-id="heading-41">Layout Thrashingï¼ˆå¸ƒå±€æŠ–åŠ¨ï¼‰ï¼šæ€§èƒ½æ€æ‰‹</h5>
<p><strong>çœŸå®æ¡ˆä¾‹ï¼š</strong> æŸç”µå•†å¹³å°çš„å•†å“åˆ—è¡¨é¡µç€‘å¸ƒæµå¸ƒå±€</p>
<p><strong>é—®é¢˜è¡¨ç°ï¼š</strong></p>
<ul>
<li>ç”¨æˆ·æ»šåŠ¨åˆ—è¡¨æ—¶æ˜æ˜¾å¡é¡¿ï¼Œæ»šåŠ¨å»¶è¿Ÿè¾¾500ms</li>
<li>Performanceé¢æ¿æ˜¾ç¤ºå¤§é‡çº¢è‰²Long Taskï¼ˆ&gt;50msï¼‰</li>
<li>ç”¨æˆ·æŠ•è¯‰"é¡µé¢å¾ˆå¡"ï¼Œè·³å‡ºç‡ä¸Šå‡15%</li>
</ul>
<p><strong>é—®é¢˜ä»£ç ï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// âŒ åæ¨¡å¼ï¼šåœ¨å¾ªç¯ä¸­äº¤æ›¿è¯»å†™</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">updateLayout</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">1000</span>; i++) {
    <span class="hljs-keyword">const</span> height = cards[i].<span class="hljs-title function_">getBoundingClientRect</span>().<span class="hljs-property">height</span>; <span class="hljs-comment">// å¼ºåˆ¶Layout</span>
    cards[i].<span class="hljs-property">style</span>.<span class="hljs-property">marginTop</span> = height * <span class="hljs-number">0.1</span> + <span class="hljs-string">'px'</span>; <span class="hljs-comment">// æ ‡è®°Layoutå¤±æ•ˆ</span>
    <span class="hljs-comment">// ä¸‹æ¬¡å¾ªç¯å†è¯»å–æ—¶ï¼Œæµè§ˆå™¨å¿…é¡»é‡æ–°Layout</span>
  }
}
</code></pre>
<p><strong>é—®é¢˜åˆ†æï¼š</strong></p>
<ul>
<li>è§¦å‘Layoutæ¬¡æ•°ï¼š<strong>1000æ¬¡</strong></li>
<li>å•æ¬¡Layoutè€—æ—¶ï¼šçº¦0.5ms</li>
<li>æ€»è€—æ—¶ï¼š1000 Ã— 0.5ms = <strong>500ms</strong></li>
<li>å¸§ç‡ï¼šçº¦<strong>2fps</strong>ï¼ˆä¸¥é‡æ‰å¸§ï¼‰</li>
</ul>
<p><strong>ä¼˜åŒ–æ–¹æ¡ˆï¼šæ‰¹é‡è¯»å†™åˆ†ç¦»</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// âœ… æœ€ä½³å®è·µï¼šæ‰¹é‡æ“ä½œ</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">updateLayoutOptimized</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// é˜¶æ®µ1ï¼šæ‰¹é‡è¯»å–ï¼ˆè§¦å‘1æ¬¡Layoutï¼‰</span>
  <span class="hljs-keyword">const</span> heights = [];
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">1000</span>; i++) {
    heights[i] = cards[i].<span class="hljs-title function_">getBoundingClientRect</span>().<span class="hljs-property">height</span>;
  }
  
  <span class="hljs-comment">// é˜¶æ®µ2ï¼šæ‰¹é‡å†™å…¥ï¼ˆä¸è§¦å‘Layoutï¼‰</span>
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">1000</span>; i++) {
    cards[i].<span class="hljs-property">style</span>.<span class="hljs-property">marginTop</span> = heights[i] * <span class="hljs-number">0.1</span> + <span class="hljs-string">'px'</span>;
  }
}
</code></pre>
<p><strong>ä¼˜åŒ–æ•ˆæœï¼š</strong></p>





























<table><thead><tr><th>æŒ‡æ ‡</th><th>ä¼˜åŒ–å‰</th><th>ä¼˜åŒ–å</th><th>æå‡</th></tr></thead><tbody><tr><td>Layoutæ¬¡æ•°</td><td>1000æ¬¡</td><td>1æ¬¡</td><td>1000å€</td></tr><tr><td>æ€»è€—æ—¶</td><td>500ms</td><td>20ms</td><td><strong>25å€</strong></td></tr><tr><td>å¸§ç‡</td><td>2fps</td><td>60fps</td><td><strong>æµç•…</strong></td></tr></tbody></table>
<hr/>
<h4 data-id="heading-42">3.5 Painté˜¶æ®µï¼šç”Ÿæˆç»˜åˆ¶è¯´æ˜ä¹¦</h4>
<p><strong>è®¾è®¡ç†å¿µï¼š</strong> Painté˜¶æ®µä¸ç›´æ¥æŠŠåƒç´ ç”»åˆ°å±å¹•ä¸Šï¼Œè€Œæ˜¯ç”Ÿæˆä¸€ä»½"ç»˜åˆ¶è¯´æ˜ä¹¦"ï¼ˆDisplay Listï¼‰ã€‚</p>
<p><strong>ä¸ºä»€ä¹ˆè¿™æ ·è®¾è®¡ï¼Ÿ</strong></p>
<ol>
<li>âœ… è¯´æ˜ä¹¦å¯ä»¥å¤ç”¨ï¼ˆå…ƒç´ æ²¡å˜åŒ–å°±ä¸ç”¨é‡æ–°ç”Ÿæˆï¼‰</li>
<li>âœ… è¯´æ˜ä¹¦å¯ä»¥ä¼˜åŒ–ï¼ˆåˆå¹¶é‡å¤æ“ä½œï¼‰</li>
<li>âœ… å®é™…ç»˜åˆ¶å¯ä»¥äº¤ç»™GPUï¼ˆå¹¶è¡Œå¤„ç†ï¼‰</li>
</ol>
<h5 data-id="heading-43">Display Listç»“æ„</h5>
<p><strong>ä»DOMå…ƒç´ åˆ°ç»˜åˆ¶æŒ‡ä»¤ï¼š</strong></p>
<pre><code class="hljs language-css" lang="css">DOMå…ƒç´  
  â†“
Paintè¿‡ç¨‹ 
  â†“
<span class="hljs-attribute">Display</span> List
  â”œâ”€ DrawRectï¼ˆç»˜åˆ¶çŸ©å½¢ï¼‰
  â”œâ”€ DrawImageï¼ˆç»˜åˆ¶å›¾åƒï¼‰
  â”œâ”€ DrawTextï¼ˆç»˜åˆ¶æ–‡æœ¬ï¼‰
  â””â”€ ApplyFilterï¼ˆåº”ç”¨æ»¤é•œï¼‰
  â†“
åç»­æ‰§è¡Œï¼ˆå¯ä¼˜åŒ–/ç¼“å­˜ï¼‰
</code></pre>
<h5 data-id="heading-44">Paint Layeråˆ›å»ºæ¡ä»¶</h5>
<p><strong>æ»¡è¶³ä»¥ä¸‹ä»»ä¸€æ¡ä»¶ï¼Œå…ƒç´ ä¼šè¢«æå‡ä¸ºç‹¬ç«‹çš„Paint Layerï¼š</strong></p>
<p><strong>CSSå±æ€§ï¼š</strong></p>
<ul>
<li><code>position: fixed</code> æˆ– <code>position: sticky</code></li>
<li><code>opacity &lt; 1</code></li>
<li><code>transform</code> å±æ€§</li>
<li><code>filter</code> æ»¤é•œ</li>
<li><code>will-change</code> å£°æ˜</li>
</ul>
<p><strong>å…ƒç´ ç±»å‹ï¼š</strong></p>
<ul>
<li><code>&lt;video&gt;</code>, <code>&lt;canvas&gt;</code>, <code>&lt;iframe&gt;</code></li>
</ul>
<p><strong>å¸ƒå±€ï¼š</strong></p>
<ul>
<li><code>overflow: scroll</code> æ»šåŠ¨å®¹å™¨</li>
</ul>
<hr/>
<h3 data-id="heading-45">å››ã€GPUåˆæˆå™¨æ¶æ„ï¼šè®©åŠ¨ç”»é£èµ·æ¥</h3>
<h4 data-id="heading-46">4.1 åœºæ™¯ï¼šJavaScriptå†å¿™ä¹Ÿä¸å½±å“æ»šåŠ¨</h4>
<p><strong>çœŸå®ä½“éªŒï¼š</strong> ä½ åœ¨æµè§ˆä¸€ä¸ªå¤æ‚çš„å•é¡µåº”ç”¨ï¼Œé¡µé¢æ­£åœ¨æ‰§è¡Œå¤æ‚çš„æ•°æ®å¤„ç†ã€‚æ­¤æ—¶ä½ æ»šåŠ¨é¡µé¢ï¼š</p>
<ul>
<li>âŒ <strong>æ—§æµè§ˆå™¨</strong>ï¼šæ»šåŠ¨å¡é¡¿ï¼Œç”šè‡³å®Œå…¨å¡ä½</li>
<li>âœ… <strong>ç°ä»£æµè§ˆå™¨</strong>ï¼šæ»šåŠ¨ä¾ç„¶æµç•…</li>
</ul>
<p><strong>ä¸ºä»€ä¹ˆï¼Ÿ</strong> ç§˜å¯†åœ¨äº**Compositor Threadï¼ˆåˆæˆå™¨çº¿ç¨‹ï¼‰**çš„ç‹¬ç«‹æ¶æ„ã€‚</p>
<h5 data-id="heading-47">å®éªŒå¯¹æ¯”</h5>























<table><thead><tr><th>åœºæ™¯</th><th>Main ThreadçŠ¶æ€</th><th>æ»šåŠ¨æ€§èƒ½</th><th>åŸç†</th></tr></thead><tbody><tr><td><strong>åœºæ™¯A</strong></td><td>æ‰§è¡Œå¯†é›†è®¡ç®—</td><td>ä¾ç„¶æµç•…</td><td>Compositorç‹¬ç«‹å¤„ç†</td></tr><tr><td><strong>åœºæ™¯B</strong></td><td>æ‰§è¡Œå¯†é›†è®¡ç®—</td><td>åŠ¨ç”»ä¸å—å½±å“</td><td>transformåœ¨Compositoræ‰§è¡Œ</td></tr></tbody></table>
<hr/>
<h4 data-id="heading-48">4.2 å•çº¿ç¨‹ vs å¤šçº¿ç¨‹æ¶æ„å¯¹æ¯”</h4>
<h5 data-id="heading-49">ä¼ ç»Ÿå•çº¿ç¨‹æ¨¡å¼</h5>
<p><strong>æ€»è€—æ—¶80msï¼Œå¸§ç‡12fps</strong></p>
<pre><code class="hljs language-css" lang="css">æ—¶é—´çº¿ï¼š
<span class="hljs-number">0ms</span>   - JavaScriptæ‰§è¡Œï¼ˆ<span class="hljs-number">50ms</span>ï¼‰<span class="hljs-selector-attr">[Main Thread é˜»å¡]</span>
<span class="hljs-number">50ms</span>  - Styleè®¡ç®—ï¼ˆ<span class="hljs-number">5ms</span>ï¼‰
<span class="hljs-number">55ms</span>  - Layoutè®¡ç®—ï¼ˆ<span class="hljs-number">10ms</span>ï¼‰
<span class="hljs-number">65ms</span>  - Paintç”Ÿæˆï¼ˆ<span class="hljs-number">15ms</span>ï¼‰
<span class="hljs-number">80ms</span>  - æäº¤GPUæ¸²æŸ“

é—®é¢˜ï¼šæ‰€æœ‰ä»»åŠ¡ä¸²è¡Œæ‰§è¡Œï¼ŒJSé˜»å¡å¯¼è‡´å¡é¡¿
</code></pre>
<h5 data-id="heading-50">Compositorå¤šçº¿ç¨‹æ¨¡å¼</h5>
<p><strong>Compositorä¿æŒ60fps</strong></p>
<pre><code class="hljs language-css" lang="css">ã€<span class="hljs-selector-tag">Main</span> Threadã€‘
<span class="hljs-number">0ms</span>  - JavaScriptæ‰§è¡Œï¼ˆ<span class="hljs-number">50ms</span>ï¼‰<span class="hljs-selector-attr">[çº¿ç¨‹é˜»å¡ï¼Œä½†ä¸å½±å“Compositor]</span>

ã€Compositor Threadã€‘ï¼ˆåŒæ—¶è¿›è¡Œï¼‰
<span class="hljs-number">0ms</span>  - å¤„ç†æ»šåŠ¨äº‹ä»¶
<span class="hljs-number">16ms</span> - æäº¤å¸§<span class="hljs-number">1</span>ï¼ˆ<span class="hljs-number">60</span>fpsï¼‰
<span class="hljs-number">32ms</span> - æäº¤å¸§<span class="hljs-number">2</span>ï¼ˆ<span class="hljs-number">60</span>fpsï¼‰
<span class="hljs-number">48ms</span> - æäº¤å¸§<span class="hljs-number">3</span>ï¼ˆ<span class="hljs-number">60</span>fpsï¼‰

ç»“æœï¼šCompositorä¿æŒ<span class="hljs-number">60</span>fpsæµç•…è¿è¡Œ
</code></pre>
<p><strong>æ€§èƒ½å¯¹æ¯”ï¼š</strong></p>























<table><thead><tr><th>æ¨¡å¼</th><th>Main Threadè€—æ—¶</th><th>ç”¨æˆ·æ„ŸçŸ¥å¸§ç‡</th><th>ä½“éªŒ</th></tr></thead><tbody><tr><td><strong>å•çº¿ç¨‹</strong></td><td>80ms</td><td>12fps</td><td>å¡é¡¿</td></tr><tr><td><strong>å¤šçº¿ç¨‹</strong></td><td>50msï¼ˆä¸å½±å“æ»šåŠ¨ï¼‰</td><td>60fps</td><td>æµç•…</td></tr></tbody></table>
<hr/>
<h4 data-id="heading-51">4.3 ä¸ºä»€ä¹ˆtransformåŠ¨ç”»è¿™ä¹ˆæµç•…ï¼Ÿ</h4>
<p><strong>æ—¥å¸¸è§‚å¯Ÿï¼š</strong> æ‰‹æœºä¸Šæ»‘åŠ¨æŠ½å±‰èœå•éå¸¸ä¸æ»‘ï¼Œä½†æœ‰äº›ç½‘ç«™çš„è½®æ’­å›¾åˆ‡æ¢å´æœ‰æ˜æ˜¾å¡é¡¿ã€‚ä¸ºä»€ä¹ˆï¼Ÿ</p>
<h5 data-id="heading-52">ä¸¤ç§åŠ¨ç”»å®ç°æ–¹å¼å¯¹æ¯”</h5>
<p><strong>æ–¹æ¡ˆAï¼šä¿®æ”¹leftå±æ€§ï¼ˆä¸æ¨èï¼‰</strong></p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-keyword">@keyframes</span> moveLeft {
  <span class="hljs-selector-tag">from</span> { <span class="hljs-attribute">left</span>: <span class="hljs-number">0</span>; }
  <span class="hljs-selector-tag">to</span> { <span class="hljs-attribute">left</span>: <span class="hljs-number">100px</span>; }
}
</code></pre>
<p><strong>æ‰§è¡Œæµç¨‹ï¼š</strong></p>
<pre><code class="hljs language-css" lang="css">ä¿®æ”¹<span class="hljs-attribute">left</span>å±æ€§ 
  â†“ è§¦å‘Layoutï¼ˆ<span class="hljs-number">20ms</span>ï¼‰- éœ€è¦é‡æ–°è®¡ç®—ä½ç½®
  â†“ è§¦å‘Paintï¼ˆ<span class="hljs-number">10ms</span>ï¼‰- éœ€è¦é‡æ–°ç”Ÿæˆç»˜åˆ¶æŒ‡ä»¤
  â†“ è§¦å‘Compositeï¼ˆ<span class="hljs-number">2ms</span>ï¼‰
  â†“ æ€»è€—æ—¶ï¼š<span class="hljs-number">32ms</span>ï¼Œå¸§ç‡ï¼š<span class="hljs-number">31</span>fps âŒ
</code></pre>
<p><strong>æ–¹æ¡ˆBï¼šä½¿ç”¨transformï¼ˆæ¨èï¼‰</strong></p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-keyword">@keyframes</span> moveTransform {
  <span class="hljs-selector-tag">from</span> { <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translateX</span>(<span class="hljs-number">0</span>); }
  <span class="hljs-selector-tag">to</span> { <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translateX</span>(<span class="hljs-number">100px</span>); }
}
</code></pre>
<p><strong>æ‰§è¡Œæµç¨‹ï¼š</strong></p>
<pre><code class="hljs language-css" lang="css">ä¿®æ”¹<span class="hljs-attribute">transform</span>å±æ€§ 
  â†“ è·³è¿‡Layout âœ…
  â†“ è·³è¿‡Paint âœ…
  â†“ ä»…è§¦å‘Compositeï¼ˆ<span class="hljs-number">2ms</span>ï¼‰- GPUç›´æ¥å¤„ç†
  â†“ æ€»è€—æ—¶ï¼š<span class="hljs-number">2ms</span>ï¼Œå¸§ç‡ï¼š<span class="hljs-number">60</span>fps âœ…
</code></pre>
<h5 data-id="heading-53">æ€§èƒ½å·®å¼‚å¯¹æ¯”</h5>
































<table><thead><tr><th>åŠ¨ç”»æ–¹å¼</th><th>Layout</th><th>Paint</th><th>Composite</th><th>æ€»è€—æ—¶</th><th>å¸§ç‡</th><th>æ€§èƒ½å·®è·</th></tr></thead><tbody><tr><td><strong>ä¿®æ”¹left</strong></td><td>âœ… 20ms</td><td>âœ… 10ms</td><td>âœ… 2ms</td><td>32ms</td><td>31fps</td><td>åŸºå‡†</td></tr><tr><td><strong>ä½¿ç”¨transform</strong></td><td>âŒ è·³è¿‡</td><td>âŒ è·³è¿‡</td><td>âœ… 2ms</td><td>2ms</td><td>60fps</td><td><strong>16å€</strong></td></tr></tbody></table>
<p><strong>åŸç†ï¼š</strong> transformå±æ€§çš„å˜æ›´ä»…å½±å“Compositeé˜¶æ®µï¼ŒGPUå¯ç›´æ¥å¤„ç†å˜æ¢çŸ©é˜µã€‚</p>
<hr/>
<h4 data-id="heading-54">4.4 å®Œæ•´GPUåˆæˆæ¶æ„</h4>
<p>GPUåˆæˆå™¨æ¶æ„æ¶‰åŠ4ä¸ªå…³é”®éƒ¨åˆ†çš„åä½œï¼š</p>
<h5 data-id="heading-55">æ¶æ„ç»„æˆ</h5>
<p><strong>ã€Main Threadã€‘ï¼ˆRenderer Processï¼‰</strong></p>
<ul>
<li>JavaScriptæ‰§è¡Œ</li>
<li>æ ·å¼è®¡ç®—</li>
<li>å¸ƒå±€è®¡ç®—</li>
<li>Paintç”ŸæˆDisplayList</li>
<li>Commitæäº¤LayerTree</li>
</ul>
<p><strong>ã€Compositor Threadã€‘ï¼ˆRenderer Processï¼‰</strong></p>
<ul>
<li>æ¥æ”¶LayerTree</li>
<li>Tilingç“¦ç‰‡åˆ’åˆ†</li>
<li>è°ƒåº¦å…‰æ …åŒ–</li>
<li>Activateæ¿€æ´»</li>
<li>Drawç”ŸæˆCompositorFrame</li>
</ul>
<p><strong>ã€Raster Worker Threadsã€‘ï¼ˆ4ä¸ªå·¥ä½œçº¿ç¨‹ï¼‰</strong></p>
<ul>
<li>å¹¶è¡Œå…‰æ …åŒ–ç“¦ç‰‡</li>
</ul>
<p><strong>ã€Viz (GPU Process)ã€‘</strong></p>
<ul>
<li>èšåˆFrame</li>
<li>GPUåˆæˆ</li>
<li>Displayè¾“å‡ºåˆ°å±å¹•</li>
</ul>
<h5 data-id="heading-56">æµç¨‹è¯´æ˜</h5>





















































<table><thead><tr><th>æ­¥éª¤</th><th>æ‰€åœ¨çº¿ç¨‹/è¿›ç¨‹</th><th>ä¸»è¦å·¥ä½œ</th><th>å¯å¹¶è¡Œ</th></tr></thead><tbody><tr><td>1. JavaScriptæ‰§è¡Œ</td><td>Main Thread</td><td>ä¿®æ”¹DOM/æ ·å¼</td><td>âŒ</td></tr><tr><td>2. Style+Layout+Paint</td><td>Main Thread</td><td>è®¡ç®—æ ·å¼ã€å¸ƒå±€ã€ç”ŸæˆDisplayList</td><td>âŒ</td></tr><tr><td>3. Commit</td><td>Main Thread</td><td>æäº¤LayerTree</td><td>âŒ</td></tr><tr><td>4. Tiling</td><td>Compositor Thread</td><td>åˆ’åˆ†256Ã—256ç“¦ç‰‡</td><td>âœ… ä¸é˜»å¡Main</td></tr><tr><td>5. Raster</td><td>Raster Workers</td><td>å¹¶è¡Œå…‰æ …åŒ–</td><td>âœ… 4çº¿ç¨‹å¹¶è¡Œ</td></tr><tr><td>6. Draw</td><td>Compositor Thread</td><td>ç”ŸæˆCompositorFrame</td><td>âœ… ä¸é˜»å¡Main</td></tr><tr><td>7. Composite</td><td>GPU Process</td><td>GPUåˆæˆè¾“å‡º</td><td>âœ… ç‹¬ç«‹è¿›ç¨‹</td></tr></tbody></table>
<hr/>
<h4 data-id="heading-57">4.5 Compositing Layerï¼ˆåˆæˆå±‚ï¼‰ï¼šç‹¬ç«‹çš„æ¸²æŸ“å›¾å±‚</h4>
<p><strong>ç±»æ¯”ï¼š</strong> åˆ¶ä½œåŠ¨ç”»ç‰‡æ—¶ï¼ŒèƒŒæ™¯ç”»åœ¨ä¸€å¼ çº¸ä¸Šï¼Œäººç‰©ç”»åœ¨é€æ˜èƒ¶ç‰‡ä¸Šã€‚äººç‰©ç§»åŠ¨æ—¶åªéœ€è¦ç§»åŠ¨èƒ¶ç‰‡ï¼Œä¸ç”¨é‡æ–°ç”»èƒŒæ™¯ã€‚</p>
<h5 data-id="heading-58">åˆ›å»ºæ¡ä»¶</h5>
<p><strong>æ»¡è¶³ä»¥ä¸‹ä»»ä¸€æ¡ä»¶ï¼Œå…ƒç´ ä¼šè¢«æå‡ä¸ºç‹¬ç«‹çš„Compositing Layerï¼š</strong></p>
<p><strong>3Då˜æ¢ï¼š</strong></p>
<ul>
<li><code>transform: translateZ(0)</code>, <code>rotate3d()</code>, <code>perspective</code></li>
</ul>
<p><strong>CSSå±æ€§ï¼š</strong></p>
<ul>
<li><code>transform</code> åŠ¨ç”», <code>opacity</code> åŠ¨ç”», <code>will-change</code>, <code>filter</code></li>
</ul>
<p><strong>åª’ä½“å…ƒç´ ï¼š</strong></p>
<ul>
<li><code>&lt;video&gt;</code>, <code>&lt;canvas&gt;</code>, <code>&lt;iframe&gt;</code></li>
</ul>
<p><strong>å®šä½ï¼š</strong></p>
<ul>
<li><code>position: fixed</code>, <code>position: sticky</code></li>
</ul>
<p><strong>æ»šåŠ¨ï¼š</strong></p>
<ul>
<li><code>overflow: scroll</code></li>
</ul>
<hr/>
<h5 data-id="heading-59">å†…å­˜æˆæœ¬ï¼šçœ‹ä¸è§çš„å†…å­˜æ€æ‰‹</h5>
<p><strong>çœŸå®æ¡ˆä¾‹ï¼š</strong> æŸç½‘ç«™åœ¨ç§»åŠ¨ç«¯é¢‘ç¹å´©æºƒ</p>
<p><strong>é—®é¢˜ä»£ç ï¼š</strong></p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* âŒ ç»™100ä¸ªå•†å“å¡ç‰‡éƒ½åŠ äº†will-change */</span>
<span class="hljs-selector-class">.product-card</span> {
  <span class="hljs-attribute">will-change</span>: transform;
}
</code></pre>
<p><strong>å†…å­˜è®¡ç®—ï¼š</strong></p>
<pre><code class="hljs language-diff" lang="diff">å•ä¸ªLayerå†…å­˜å ç”¨ = å®½åº¦ Ã— é«˜åº¦ Ã— 4å­—èŠ‚ï¼ˆRGBAï¼‰

æ¡ˆä¾‹åˆ†æï¼š
<span class="hljs-deletion">- å•ä¸ªå•†å“å¡ç‰‡å°ºå¯¸ï¼š375Ã—200ï¼ˆç§»åŠ¨ç«¯å…¨å®½ï¼‰</span>
<span class="hljs-deletion">- å•ä¸ªLayerå†…å­˜ï¼š375 Ã— 200 Ã— 4 = 300KB</span>
<span class="hljs-deletion">- 100ä¸ªLayeræ€»å†…å­˜ï¼š300KB Ã— 100 = 30MB</span>
<span class="hljs-deletion">- åŠ ä¸Šä¸»é¡µé¢å’Œå…¶ä»–å†…å®¹ï¼šæ€»è®¡çº¦80MB</span>

é—®é¢˜ï¼šç§»åŠ¨è®¾å¤‡å†…å­˜ç´§å¼ ï¼Œå¯¼è‡´é¢‘ç¹è§¦å‘å†…å­˜å›æ”¶ï¼Œç”šè‡³å´©æºƒ
</code></pre>
<p><strong>æ­£ç¡®åšæ³•ï¼šæŒ‰éœ€åˆ›å»º</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// âœ… åªå¯¹æ­£åœ¨æ‰§è¡ŒåŠ¨ç”»çš„å…ƒç´ ä½¿ç”¨will-change</span>
element.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'mouseenter'</span>, <span class="hljs-function">() =&gt;</span> {
  element.<span class="hljs-property">style</span>.<span class="hljs-property">willChange</span> = <span class="hljs-string">'transform'</span>; <span class="hljs-comment">// å³å°†åŠ¨ç”»ï¼Œæå‰ä¼˜åŒ–</span>
});

element.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'animationend'</span>, <span class="hljs-function">() =&gt;</span> {
  element.<span class="hljs-property">style</span>.<span class="hljs-property">willChange</span> = <span class="hljs-string">'auto'</span>; <span class="hljs-comment">// åŠ¨ç”»ç»“æŸï¼Œé‡Šæ”¾èµ„æº</span>
});
</code></pre>
<h5 data-id="heading-60">å†…å­˜ä¼˜åŒ–æ•ˆæœ</h5>





























<table><thead><tr><th>æŒ‡æ ‡</th><th>ä¼˜åŒ–å‰</th><th>ä¼˜åŒ–å</th><th>æå‡</th></tr></thead><tbody><tr><td>åˆæˆå±‚æ•°é‡</td><td>100ä¸ª</td><td>1-3ä¸ªï¼ˆä»…æ´»åŠ¨å…ƒç´ ï¼‰</td><td>å‡å°‘97%</td></tr><tr><td>GPUå†…å­˜å ç”¨</td><td>80MB</td><td>2.4MB</td><td>å‡å°‘97%</td></tr><tr><td>ç§»åŠ¨ç«¯å´©æºƒç‡</td><td>é¢‘ç¹å´©æºƒ</td><td>åŸºæœ¬æ¶ˆé™¤</td><td>âœ…</td></tr></tbody></table>
<hr/>
<h4 data-id="heading-61">4.6 æ–°é—»ç½‘ç«™æ¡ˆä¾‹ï¼šç§»åŠ¨ç«¯å´©æºƒé—®é¢˜æ’æŸ¥</h4>
<p><strong>èƒŒæ™¯ï¼š</strong></p>
<ul>
<li>æŸæ–°é—»ç½‘ç«™æ”¹ç‰ˆï¼Œé¦–é¡µé‡‡ç”¨é•¿åˆ—è¡¨è®¾è®¡</li>
<li>åŒ…å«50å¼ é«˜æ¸…æ–°é—»é…å›¾</li>
<li>ç»™æ‰€æœ‰å›¾ç‰‡æ·»åŠ äº†<code>will-change: opacity</code></li>
</ul>
<h5 data-id="heading-62">ç¾éš¾æ€§ä¸Šçº¿</h5>





























<table><thead><tr><th>æŒ‡æ ‡</th><th>ä¸Šçº¿å‰</th><th>ä¸Šçº¿å</th><th>å˜åŒ–</th></tr></thead><tbody><tr><td>ç§»åŠ¨ç«¯å´©æºƒç‡</td><td>0.5%</td><td>2%</td><td>+300%</td></tr><tr><td>ç”¨æˆ·æŠ•è¯‰</td><td>å¶å°”</td><td>é¢‘ç¹</td><td>"æ‰“å¼€é¦–é¡µå°±é—ªé€€"</td></tr><tr><td>å½±å“è®¾å¤‡</td><td>-</td><td>ä½ç«¯Android</td><td>å°¤å…¶ä¸¥é‡</td></tr></tbody></table>
<h5 data-id="heading-63">ç´§æ€¥æ’æŸ¥</h5>
<p><strong>é—®é¢˜ä»£ç ï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript">.<span class="hljs-property">news</span>-image {
  will-<span class="hljs-attr">change</span>: opacity;  <span class="hljs-comment">// æ¯å¼ å›¾éƒ½åˆ›å»ºCompositing Layerï¼</span>
  <span class="hljs-attr">transition</span>: opacity <span class="hljs-number">0.</span>3s;
}
</code></pre>
<p><strong>å†…å­˜åˆ†æï¼š</strong></p>
<ul>
<li>åˆæˆå±‚æ•°é‡ï¼š53ä¸ªï¼ˆ50å¼ å›¾ç‰‡ + é¡µé¢åŸºç¡€å±‚ï¼‰</li>
<li>å•å¼ å›¾ç‰‡å°ºå¯¸ï¼š750Ã—500ï¼ˆç§»åŠ¨ç«¯å…¨å®½ï¼‰</li>
<li>å•ä¸ªLayerå†…å­˜ï¼š750 Ã— 500 Ã— 4 = 1.5MB</li>
<li>æ€»å†…å­˜å ç”¨ï¼š53 Ã— 1.5MB â‰ˆ 80MBï¼ˆä»…å›¾ç‰‡å±‚ï¼ï¼‰</li>
<li>åŠ ä¸Šé¡µé¢å…¶ä»–å†…å®¹ï¼šæ€»è®¡çº¦120MB</li>
</ul>
<p><strong>è®¾å¤‡å†…å­˜å¯¹æ¯”ï¼š</strong></p>

































<table><thead><tr><th>è®¾å¤‡</th><th>RAM</th><th>ç³»ç»Ÿå ç”¨</th><th>å¯ç”¨å†…å­˜</th><th>èƒ½å¦è¿è¡Œ</th></tr></thead><tbody><tr><td>iPhone 12</td><td>4GB</td><td>1GB</td><td>3GB</td><td>âœ… å‹‰å¼ºå¯ç”¨</td></tr><tr><td>Redmi Note 8</td><td>4GB</td><td>2GB</td><td>2GB</td><td>âŒ OOMå´©æºƒ</td></tr><tr><td>æ›´ä½ç«¯è®¾å¤‡</td><td>2-3GB</td><td>1.5GB</td><td>0.5-1.5GB</td><td>âŒ æ— æ³•æ‰“å¼€</td></tr></tbody></table>
<h5 data-id="heading-64">ä¼˜åŒ–æ–¹æ¡ˆ</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// âœ… ä¼˜åŒ–ç­–ç•¥ï¼šä»…ç»™å¯è§åŒºåŸŸçš„å›¾ç‰‡æ·»åŠ will-change</span>
<span class="hljs-keyword">const</span> observer = <span class="hljs-keyword">new</span> <span class="hljs-title class_">IntersectionObserver</span>(<span class="hljs-function">(<span class="hljs-params">entries</span>) =&gt;</span> {
  entries.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">entry</span> =&gt;</span> {
    <span class="hljs-keyword">const</span> img = entry.<span class="hljs-property">target</span>;
    
    <span class="hljs-keyword">if</span> (entry.<span class="hljs-property">isIntersecting</span>) {
      <span class="hljs-comment">// å³å°†å¯è§ï¼Œæå‰ä¼˜åŒ–</span>
      img.<span class="hljs-property">style</span>.<span class="hljs-property">willChange</span> = <span class="hljs-string">'opacity'</span>;
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (entry.<span class="hljs-property">intersectionRatio</span> === <span class="hljs-number">0</span>) {
      <span class="hljs-comment">// å®Œå…¨ç¦»å¼€è§†å£ï¼Œç§»é™¤ä¼˜åŒ–</span>
      img.<span class="hljs-property">style</span>.<span class="hljs-property">willChange</span> = <span class="hljs-string">'auto'</span>;
    }
  });
}, {
  <span class="hljs-attr">rootMargin</span>: <span class="hljs-string">'100px'</span>  <span class="hljs-comment">// æå‰100pxå¼€å§‹ä¼˜åŒ–</span>
});

newsImages.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">img</span> =&gt;</span> observer.<span class="hljs-title function_">observe</span>(img));
</code></pre>
<h5 data-id="heading-65">ä¼˜åŒ–æ•ˆæœ</h5>









































<table><thead><tr><th>æŒ‡æ ‡</th><th>ä¼˜åŒ–å‰</th><th>ä¼˜åŒ–å</th><th>æå‡</th></tr></thead><tbody><tr><td>åˆæˆå±‚æ•°é‡</td><td>53ä¸ª</td><td>5-8ä¸ªï¼ˆä»…å¯è§åŒºåŸŸï¼‰</td><td><strong>å‡å°‘85%</strong></td></tr><tr><td>GPUå†…å­˜å ç”¨</td><td>120MB</td><td>18MB</td><td><strong>å‡å°‘85%</strong></td></tr><tr><td>ç§»åŠ¨ç«¯å´©æºƒç‡</td><td>2.0%</td><td>0.4%ï¼ˆä½äºä¸Šçº¿å‰ï¼‰</td><td><strong>é™ä½80%</strong></td></tr><tr><td>é¦–å±åŠ è½½æ—¶é—´</td><td>3.2s</td><td>1.8s</td><td><strong>å¿«1.8å€</strong></td></tr><tr><td>ä½ç«¯è®¾å¤‡å¯ç”¨æ€§</td><td>35%</td><td>95%</td><td><strong>æå‡171%</strong></td></tr></tbody></table>
<hr/>
<h4 data-id="heading-66">4.7 Tilingï¼ˆç“¦ç‰‡åŒ–ï¼‰ï¼šåƒåŠ è½½åœ°å›¾ä¸€æ ·åŠ è½½é¡µé¢</h4>
<p><strong>é—®é¢˜åœºæ™¯ï¼š</strong> ä½ æ‰“å¼€ä¸€ä¸ªé•¿å¾®åšï¼Œé¡µé¢é«˜åº¦10000pxã€‚å¦‚æœæµè§ˆå™¨æŠŠæ•´ä¸ªé¡µé¢éƒ½æ¸²æŸ“æˆä¸€å¼ å®Œæ•´çš„å›¾ç‰‡ï¼š</p>
<ul>
<li>å†…å­˜å ç”¨ï¼š1920 Ã— 10000 Ã— 4å­—èŠ‚ = 76.8MBï¼ˆä»…ä¸€ä¸ªå›¾å±‚ï¼ï¼‰</li>
<li>æ¸²æŸ“æ—¶é—´ï¼šå¯èƒ½éœ€è¦500ms</li>
<li>è€Œä½ åªèƒ½çœ‹åˆ°å±å¹•ä¸Šçš„1080pxï¼Œå…¶ä½™90%çš„æ¸²æŸ“éƒ½æµªè´¹äº†</li>
</ul>
<p><strong>ç±»æ¯”ï¼š</strong> å°±åƒä½¿ç”¨è°·æ­Œåœ°å›¾ï¼ŒåªåŠ è½½ä½ å½“å‰çœ‹åˆ°çš„åŒºåŸŸï¼Œæ»šåŠ¨æ—¶å†åŠ è½½æ–°åŒºåŸŸã€‚</p>
<h5 data-id="heading-67">ç“¦ç‰‡åŒ–ç­–ç•¥</h5>
<p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong> å°†Layeråˆ†å‰²ä¸º256Ã—256çš„ç“¦ç‰‡ï¼ŒæŒ‰éœ€å…‰æ …åŒ–ã€‚</p>
<p><strong>ç“¦ç‰‡åˆ†ç±»ï¼š</strong></p>
<ol>
<li><strong>å¤§å‹Layerï¼ˆ1920Ã—10000pxï¼‰</strong></li>
<li><strong>åˆ‡å‰²ä¸º256Ã—256ç“¦ç‰‡</strong></li>
<li><strong>æ€»ç“¦ç‰‡æ•°ï¼šçº¦300ä¸ª</strong></li>
<li><strong>æŒ‰ä¼˜å…ˆçº§åˆ†ç±»ï¼š</strong>
<ul>
<li>å¯è§åŒºåŸŸç“¦ç‰‡ï¼ˆçº¦20ä¸ªï¼‰â†’ ä¼˜å…ˆçº§ï¼šæœ€é«˜ï¼Œç«‹å³å…‰æ …åŒ–</li>
<li>å³å°†å¯è§ç“¦ç‰‡ï¼ˆçº¦10ä¸ªï¼‰â†’ ä¼˜å…ˆçº§ï¼šé«˜ï¼Œé¢„æµ‹æ€§å…‰æ …åŒ–</li>
<li>å±å¹•å¤–ç“¦ç‰‡ï¼ˆçº¦270ä¸ªï¼‰â†’ ä¼˜å…ˆçº§ï¼šä½ï¼Œå»¶è¿Ÿå…‰æ …åŒ–</li>
</ul>
</li>
</ol>
<h5 data-id="heading-68">ç“¦ç‰‡ä¼˜å…ˆçº§</h5>

































<table><thead><tr><th>ç“¦ç‰‡ç±»å‹</th><th>æ•°é‡</th><th>ä¼˜å…ˆçº§</th><th>å¤„ç†ç­–ç•¥</th><th>å…‰æ …åŒ–æ—¶æœº</th></tr></thead><tbody><tr><td><strong>å¯è§åŒºåŸŸ</strong></td><td>~20ä¸ª</td><td>æœ€é«˜</td><td>ç«‹å³å…‰æ …åŒ–</td><td>0-16ms</td></tr><tr><td><strong>å³å°†å¯è§</strong></td><td>~10ä¸ª</td><td>é«˜</td><td>é¢„æµ‹æ€§å…‰æ …åŒ–</td><td>16-50ms</td></tr><tr><td><strong>å±å¹•å¤–</strong></td><td>~270ä¸ª</td><td>ä½</td><td>å»¶è¿Ÿå…‰æ …åŒ–</td><td>ç©ºé—²æ—¶</td></tr></tbody></table>
<h5 data-id="heading-69">åŠ¨æ€ä¼˜å…ˆçº§è°ƒæ•´</h5>
<p><strong>ç”¨æˆ·æ»šåŠ¨æ—¶çš„ä¼˜å…ˆçº§è°ƒæ•´æµç¨‹ï¼š</strong></p>
<ol>
<li>ç”¨æˆ·å¼€å§‹æ»šåŠ¨</li>
<li>è§†å£æ›´æ–°ï¼Œè®¡ç®—æ–°çš„å¯è§åŒºåŸŸ</li>
<li>ç“¦ç‰‡è°ƒåº¦å™¨é‡æ–°è®¡ç®—ä¼˜å…ˆçº§ï¼ˆè€ƒè™‘ï¼šå¯è§æ€§ã€è·ç¦»ã€æ»šåŠ¨æ–¹å‘ï¼‰</li>
<li>æå‡å³å°†å¯è§ç“¦ç‰‡çš„ä¼˜å…ˆçº§ï¼ˆä½ä¼˜å…ˆçº§ â†’ é«˜ä¼˜å…ˆçº§ï¼‰</li>
<li>å…‰æ …åŒ–Workerså¹¶è¡Œå¤„ç†é«˜ä¼˜å…ˆçº§ç“¦ç‰‡</li>
<li>ç”¨æˆ·å§‹ç»ˆçœ‹åˆ°é«˜ä¼˜å…ˆçº§ç“¦ç‰‡ï¼Œä½“éªŒæµç•…</li>
</ol>
<h5 data-id="heading-70">æ€§èƒ½ä¼˜åŒ–æ•ˆæœ</h5>





























<table><thead><tr><th>ç­–ç•¥</th><th>åˆå§‹æ¸²æŸ“</th><th>å†…å­˜å ç”¨</th><th>æ»šåŠ¨æ€§èƒ½</th></tr></thead><tbody><tr><td><strong>å…¨é¡µé¢æ¸²æŸ“</strong></td><td>500ms</td><td>76.8MB</td><td>ä¸€æ¬¡æ€§æ¶ˆè€—</td></tr><tr><td><strong>ç“¦ç‰‡åŒ–æ¸²æŸ“</strong></td><td>50ms</td><td>7.6MBï¼ˆä»…å¯è§åŒºåŸŸï¼‰</td><td>æŒ‰éœ€åŠ è½½ï¼Œæµç•…</td></tr><tr><td><strong>æ€§èƒ½æå‡</strong></td><td><strong>10å€</strong></td><td><strong>èŠ‚çœ90%</strong></td><td><strong>60fps</strong></td></tr></tbody></table>
<hr/>
<h4 data-id="heading-71">4.8 GPUå…‰æ …åŒ–ï¼šè®©æ˜¾å¡å¹²å®ƒæ“…é•¿çš„äº‹</h4>
<h5 data-id="heading-72">å†å²èƒŒæ™¯</h5>
<p>æ—©æœŸæµè§ˆå™¨ä½¿ç”¨<strong>CPUè¿›è¡Œå…‰æ …åŒ–</strong>ï¼ˆæŠŠçŸ¢é‡å›¾å½¢è½¬æˆåƒç´ ï¼‰ã€‚ä½†CPUä¸æ“…é•¿å¤§è§„æ¨¡å¹¶è¡Œè®¡ç®—ï¼Œæ¸²æŸ“å¤æ‚é¡µé¢å¾ˆæ…¢ã€‚</p>
<p><strong>æŠ€æœ¯è½¬æŠ˜ï¼š</strong> ç°ä»£æµè§ˆå™¨å‘ç°ï¼ŒGPUå¤©ç”Ÿå°±æ˜¯ä¸ºå¹¶è¡Œå›¾å½¢è®¡ç®—è®¾è®¡çš„ã€‚ä¸€å—æ˜¾å¡æœ‰æ•°åƒä¸ªè®¡ç®—æ ¸å¿ƒï¼ŒåŒæ—¶å¤„ç†æ•°åƒä¸ªåƒç´ ï¼Œæ¯”CPUå¿«å‡ åå€ã€‚</p>
<h5 data-id="heading-73">æ¨¡å¼å¯¹æ¯”</h5>
<p><strong>è½¯ä»¶å…‰æ …åŒ–ï¼ˆCPUï¼‰æµç¨‹ï¼š</strong></p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-attribute">Display</span> List 
  â†“
Skia CPUåç«¯ 
  â†“
å¤šçº¿ç¨‹å¤„ç†ï¼ˆ<span class="hljs-number">4</span>-<span class="hljs-number">8</span>çº¿ç¨‹ï¼‰
  â†“
ç”Ÿæˆä½å›¾ 
  â†“
ä¸Šä¼ åˆ°GPUæ˜¾å­˜ï¼ˆæ‹·è´å¼€é”€ï¼‰
</code></pre>
<p><strong>GPUå…‰æ …åŒ–æµç¨‹ï¼š</strong></p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-attribute">Display</span> List 
  â†“
Skia GPUåç«¯ 
  â†“
OpenGL/Vulkanè°ƒç”¨ 
  â†“
ç›´æ¥ç”ŸæˆGPUçº¹ç†ï¼ˆæ— éœ€ä¸Šä¼ ï¼Œé›¶æ‹·è´ï¼‰
</code></pre>
<h5 data-id="heading-74">æ€§èƒ½æ•°æ®</h5>





























<table><thead><tr><th>åœºæ™¯</th><th>è½¯ä»¶å…‰æ …åŒ–ï¼ˆCPUï¼‰</th><th>GPUå…‰æ …åŒ–</th><th>åŠ é€Ÿæ¯”</th></tr></thead><tbody><tr><td><strong>ç®€å•çŸ©å½¢</strong></td><td>2ms</td><td>3ms</td><td>CPUç•¥èƒœ</td></tr><tr><td><strong>å¤æ‚è·¯å¾„</strong></td><td>45ms</td><td>6ms</td><td><strong>7.5å€</strong></td></tr><tr><td><strong>bluræ»¤é•œ</strong></td><td>120ms</td><td>5ms</td><td><strong>24å€</strong></td></tr></tbody></table>
<p><strong>é€‚ç”¨åœºæ™¯ï¼š</strong></p>
<ul>
<li>âœ… å¤æ‚çš„CSSæ•ˆæœï¼ˆé˜´å½±ã€æ¸å˜ã€æ»¤é•œï¼‰</li>
<li>âœ… å¤§é‡å›¾å½¢å…ƒç´ </li>
<li>âœ… Canvas 2D/3Dç»˜åˆ¶</li>
<li>âŒ éå¸¸ç®€å•çš„é¡µé¢ï¼ˆGPUå¼€é”€å¯èƒ½æ›´å¤§ï¼‰</li>
</ul>
<hr/>
<h3 data-id="heading-75">äº”ã€JavaScriptå¼•æ“ï¼ˆV8ï¼‰ï¼šä»£ç è¶Šè·‘è¶Šå¿«çš„ç§˜å¯†</h3>
<h4 data-id="heading-76">5.1 åœºæ™¯ï¼šä»£ç æ€§èƒ½æå‡100å€çš„é­”æ³•</h4>
<p><strong>ç¥å¥‡ç°è±¡ï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">add</span>(<span class="hljs-params">a, b</span>) {
  <span class="hljs-keyword">return</span> a + b;
}

<span class="hljs-comment">// ç¬¬1æ¬¡è°ƒç”¨ï¼š200nsï¼ˆè§£é‡Šæ‰§è¡Œï¼‰</span>
<span class="hljs-comment">// ç¬¬10æ¬¡è°ƒç”¨ï¼š20nsï¼ˆéƒ¨åˆ†ä¼˜åŒ–ï¼‰</span>
<span class="hljs-comment">// ç¬¬100æ¬¡è°ƒç”¨ï¼š2nsï¼ˆå®Œå…¨ä¼˜åŒ–ï¼‰</span>
</code></pre>
<p><strong>ç–‘é—®ï¼š</strong> åŒæ ·çš„ä»£ç ï¼Œä¸ºä»€ä¹ˆæ€§èƒ½èƒ½æå‡100å€ï¼Ÿ</p>
<p><strong>ç­”æ¡ˆï¼š</strong> V8çš„<strong>JITï¼ˆJust-In-Timeï¼‰ç¼–è¯‘ä¼˜åŒ–æœºåˆ¶</strong>â€”â€”V8ä¼šè§‚å¯Ÿä½ çš„ä»£ç ï¼Œå‘ç°çƒ­ç‚¹åç”Ÿæˆé«˜åº¦ä¼˜åŒ–çš„æœºå™¨ç ã€‚</p>
<hr/>
<h4 data-id="heading-77">5.2 ä¸‰çº§ä¼˜åŒ–æ¶æ„ï¼šä»è§£é‡Šæ‰§è¡Œåˆ°æè‡´ä¼˜åŒ–</h4>
<p><strong>è®¾è®¡æƒè¡¡ï¼š</strong></p>
<ul>
<li>âš–ï¸ <strong>å¿«é€Ÿå¯åŠ¨ vs é«˜é€Ÿæ‰§è¡Œ</strong>
<ul>
<li>å¦‚æœä¸€å¼€å§‹å°±ç¼–è¯‘ä¼˜åŒ– â†’ å¯åŠ¨æ…¢</li>
<li>å¦‚æœåªè§£é‡Šæ‰§è¡Œ â†’ è¿è¡Œæ…¢</li>
</ul>
</li>
</ul>
<p><strong>V8çš„è§£å†³æ–¹æ¡ˆï¼šä¸‰çº§ä¼˜åŒ–æ¶æ„â€”â€”å…ˆå¿«é€Ÿå¯åŠ¨ï¼Œå†é€æ­¥ä¼˜åŒ–</strong></p>
<h5 data-id="heading-78">ä¼˜åŒ–æµç¨‹</h5>
<pre><code class="hljs language-markdown" lang="markdown">JavaScriptæºç  
  â†“
ã€Parserè§£æã€‘ç”ŸæˆASTè¯­æ³•æ ‘ 
  â†“
ã€Ignitionè§£é‡Šå™¨ã€‘å¿«é€Ÿå¯åŠ¨ï¼Œå­—èŠ‚ç æ‰§è¡Œ 
  â†“
è¿è¡Œ + ç±»å‹åé¦ˆæ”¶é›† 
  â†“
ã€çƒ­ç‚¹æ£€æµ‹ã€‘è°ƒç”¨é¢‘ç‡åˆ¤æ–­
  â”œâ”€ å¦ â†’ ç»§ç»­è§£é‡Šæ‰§è¡Œ
  â””â”€ æ˜¯ â†’ ã€TurboFanç¼–è¯‘å™¨ã€‘
<span class="hljs-code">           â†“
      ä¼˜åŒ–æœºå™¨ç ï¼ˆ10-100å€åŠ é€Ÿï¼‰
           â†“
      é«˜é€Ÿæ‰§è¡Œ
           â†“
      ç±»å‹å‡è®¾éªŒè¯
      â”œâ”€ é€šè¿‡ â†’ ç»§ç»­ä¼˜åŒ–æ‰§è¡Œ
      â””â”€ å¤±è´¥ â†’ Deoptimizationï¼ˆåä¼˜åŒ–ï¼‰
                  â†“
              å›åˆ°è§£é‡Šå™¨æ‰§è¡Œ
</span></code></pre>
<h5 data-id="heading-79">ç±»å‹åé¦ˆï¼ˆType Feedbackï¼‰æœºåˆ¶</h5>
<p><strong>V8å¦‚ä½•çŸ¥é“ä¸€ä¸ªå‡½æ•°æ˜¯"çƒ­ç‚¹"ï¼Ÿ</strong></p>
<p><strong>æ­¥éª¤1ï¼š</strong> é¦–æ¬¡æ‰§è¡Œ <code>add(1, 2)</code></p>
<ul>
<li>Ignitionè§£é‡Šå™¨æ‰§è¡Œ</li>
<li>Inline Cacheè®°å½•ç±»å‹ï¼šNumber + Number</li>
<li>æ€§èƒ½åˆ†æå™¨è®°å½•è°ƒç”¨æ¬¡æ•°ï¼š1</li>
</ul>
<p><strong>æ­¥éª¤2ï¼š</strong> ç¬¬2æ¬¡æ‰§è¡Œ <code>add(3, 4)</code></p>
<ul>
<li>éªŒè¯ç±»å‹ï¼šä»æ˜¯Number</li>
<li>è°ƒç”¨æ¬¡æ•°ï¼š2</li>
</ul>
<p><strong>æ­¥éª¤3-99ï¼š</strong> é‡å¤æ‰§è¡Œï¼Œç±»å‹ç¨³å®š</p>
<p><strong>æ­¥éª¤100ï¼š</strong> ç¬¬100æ¬¡æ‰§è¡Œï¼ˆçƒ­ç‚¹æ£€æµ‹ï¼‰</p>
<ul>
<li>è°ƒç”¨æ¬¡æ•° &gt; é˜ˆå€¼</li>
<li>ç±»å‹å‡è®¾ï¼šå‚æ•°å§‹ç»ˆæ˜¯Number</li>
<li>è§¦å‘TurboFanä¼˜åŒ–ç¼–è¯‘</li>
<li>ç”Ÿæˆä¼˜åŒ–æœºå™¨ç ï¼šç›´æ¥æ‰§è¡Œæ•´æ•°åŠ æ³•æŒ‡ä»¤</li>
<li>åç»­æ‰§è¡Œä½¿ç”¨ä¼˜åŒ–ä»£ç ï¼ˆ<strong>å¿«100å€</strong>ï¼‰</li>
</ul>
<hr/>
<h4 data-id="heading-80">5.3 TurboFanä¼˜åŒ–ç¼–è¯‘è¿‡ç¨‹</h4>
<p>TurboFanä¸æ˜¯ç®€å•çš„JITç¼–è¯‘å™¨ï¼Œå®ƒåŒ…å«å¤šä¸ªä¼˜åŒ–é˜¶æ®µï¼š</p>
<p><strong>ä¼˜åŒ–é˜¶æ®µï¼š</strong></p>
<ol>
<li><strong>æ„å»ºSSAå›¾</strong>ï¼ˆStatic Single Assignmentï¼‰</li>
<li><strong>å‡½æ•°å†…è”</strong>ï¼šæ¶ˆé™¤å‡½æ•°è°ƒç”¨å¼€é”€</li>
<li><strong>é€ƒé€¸åˆ†æ</strong>ï¼ˆEscape Analysisï¼‰
<ul>
<li>å¯¹è±¡æ˜¯å¦é€ƒé€¸åˆ°å¤–éƒ¨ï¼Ÿ</li>
<li>å¦ â†’ æ ˆåˆ†é…å¯¹è±¡ï¼ˆé¿å…GCå‹åŠ›ï¼‰</li>
<li>æ˜¯ â†’ å †åˆ†é…</li>
</ul>
</li>
<li><strong>æ— ç”¨ä»£ç æ¶ˆé™¤</strong>ï¼ˆDead Code Eliminationï¼‰</li>
<li><strong>é™çº§åˆ°æœºå™¨æŒ‡ä»¤</strong>ï¼ˆInstruction Selectionï¼‰</li>
<li><strong>å¯„å­˜å™¨åˆ†é…</strong>ï¼ˆRegister Allocationï¼‰</li>
<li><strong>ç”Ÿæˆæœºå™¨ç </strong></li>
</ol>
<h5 data-id="heading-81">é€ƒé€¸åˆ†ææ¡ˆä¾‹</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åœºæ™¯ï¼šå¯¹è±¡æœªé€ƒé€¸ï¼Œå¯ä»¥æ ˆåˆ†é…</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">calculate</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> point = { <span class="hljs-attr">x</span>: <span class="hljs-number">10</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">20</span> }; <span class="hljs-comment">// å¯¹è±¡ä»…åœ¨å‡½æ•°å†…ä½¿ç”¨</span>
  <span class="hljs-keyword">return</span> point.<span class="hljs-property">x</span> + point.<span class="hljs-property">y</span>;
}

<span class="hljs-comment">// TurboFanä¼˜åŒ–ï¼š</span>
<span class="hljs-comment">// 1. æ£€æµ‹åˆ°pointå¯¹è±¡æœªé€ƒé€¸</span>
<span class="hljs-comment">// 2. ç›´æ¥åœ¨æ ˆä¸Šåˆ†é…æˆ–å®Œå…¨æ¶ˆé™¤å¯¹è±¡</span>
<span class="hljs-comment">// 3. ç­‰ä»·äºï¼šreturn 10 + 20</span>
<span class="hljs-comment">// 4. è¿›ä¸€æ­¥ä¼˜åŒ–ä¸ºï¼šreturn 30</span>
</code></pre>
<h5 data-id="heading-82">ä¼˜åŒ–æ•ˆæœ</h5>









































<table><thead><tr><th>ä¼˜åŒ–é˜¶æ®µ</th><th>ä»£ç å½¢å¼</th><th>æ‰§è¡Œè€—æ—¶</th><th>ä¼˜åŒ–æ¯”ä¾‹</th></tr></thead><tbody><tr><td>è§£é‡Šæ‰§è¡Œ</td><td>å­—èŠ‚ç </td><td>200ns</td><td>åŸºå‡†</td></tr><tr><td>åŸºç¡€ä¼˜åŒ–</td><td>æœºå™¨ç </td><td>50ns</td><td>4å€</td></tr><tr><td>å‡½æ•°å†…è”</td><td>æ¶ˆé™¤è°ƒç”¨</td><td>20ns</td><td>10å€</td></tr><tr><td>é€ƒé€¸åˆ†æ</td><td>æ ˆåˆ†é…/æ¶ˆé™¤</td><td>5ns</td><td>40å€</td></tr><tr><td>å¸¸é‡æŠ˜å </td><td>ç¼–è¯‘æ—¶è®¡ç®—</td><td>2ns</td><td><strong>100å€</strong></td></tr></tbody></table>
<hr/>
<h4 data-id="heading-83">5.4 Deoptimizationï¼ˆåä¼˜åŒ–ï¼‰ï¼šå‡è®¾è¢«æ‰“ç ´æ—¶</h4>
<p><strong>é—®é¢˜åœºæ™¯ï¼š</strong> TurboFanåŸºäºç±»å‹å‡è®¾ç”Ÿæˆä¼˜åŒ–ä»£ç ã€‚å¦‚æœå‡è®¾è¢«æ‰“ç ´ä¼šæ€æ ·ï¼Ÿ</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">add</span>(<span class="hljs-params">a, b</span>) {
  <span class="hljs-keyword">return</span> a + b;
}

<span class="hljs-comment">// å‰100æ¬¡è°ƒç”¨éƒ½æ˜¯æ•°å­—</span>
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">100</span>; i++) {
  <span class="hljs-title function_">add</span>(i, i + <span class="hljs-number">1</span>); <span class="hljs-comment">// TurboFanä¼˜åŒ–ï¼šå‡è®¾å‚æ•°æ°¸è¿œæ˜¯Number</span>
}

<span class="hljs-comment">// ç¬¬101æ¬¡è°ƒç”¨ä¼ å…¥å­—ç¬¦ä¸²</span>
<span class="hljs-title function_">add</span>(<span class="hljs-string">"hello"</span>, <span class="hljs-string">" world"</span>); <span class="hljs-comment">// ç±»å‹å‡è®¾è¢«æ‰“ç ´ï¼</span>
</code></pre>
<h5 data-id="heading-84">åä¼˜åŒ–æµç¨‹</h5>
<p><strong>æ­¥éª¤1ï¼š</strong> è°ƒç”¨ <code>add("hello", " world")</code></p>
<p><strong>æ­¥éª¤2ï¼š</strong> ä¼˜åŒ–ä»£ç æ‰§è¡Œç±»å‹ä¿æŠ¤æ£€æŸ¥</p>
<ul>
<li>æœŸæœ›ï¼šNumber</li>
<li>å®é™…ï¼šString</li>
</ul>
<p><strong>æ­¥éª¤3ï¼š</strong> ç±»å‹å‡è®¾å¤±è´¥ï¼</p>
<p><strong>æ­¥éª¤4ï¼š</strong> è§¦å‘Deoptimization</p>
<ul>
<li>ä¿å­˜å½“å‰æ‰§è¡ŒçŠ¶æ€</li>
<li>é‡å»ºè§£é‡Šå™¨æ ˆå¸§</li>
<li>æ¢å¤å˜é‡å€¼</li>
</ul>
<p><strong>æ­¥éª¤5ï¼š</strong> å›é€€åˆ°Ignitionè§£é‡Šå™¨æ‰§è¡Œ</p>
<p><strong>æ­¥éª¤6ï¼š</strong> æ­£ç¡®å¤„ç†å­—ç¬¦ä¸²æ‹¼æ¥</p>
<p><strong>ç»“æœï¼š</strong> æ€§èƒ½ä¸‹é™ï¼Œä½†ä¿è¯æ­£ç¡®æ€§</p>
<h5 data-id="heading-85">åä¼˜åŒ–çš„ä»£ä»·</h5>

























<table><thead><tr><th>ä»£ä»·ç±»å‹</th><th>å½±å“</th><th>æ•°å€¼</th></tr></thead><tbody><tr><td><strong>æ ˆå¸§é‡å»º</strong></td><td>ä¸€æ¬¡æ€§å¼€é”€</td><td>10-50Î¼s</td></tr><tr><td><strong>ä¼˜åŒ–ä»£ç ä½œåºŸ</strong></td><td>ä¹‹å‰ç¼–è¯‘å·¥ä½œæµªè´¹</td><td>-</td></tr><tr><td><strong>åç»­æ‰§è¡Œæ…¢</strong></td><td>å›åˆ°è§£é‡Šå™¨</td><td>100-1000å€å˜æ…¢</td></tr></tbody></table>
<hr/>
<h4 data-id="heading-86">5.5 é¿å…åä¼˜åŒ–çš„æœ€ä½³å®è·µ</h4>
<h5 data-id="heading-87">åæ¨¡å¼ï¼šç±»å‹ä¸ç¨³å®š</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// âŒ åæ¨¡å¼ï¼šç±»å‹ä¸ç¨³å®šï¼Œé¢‘ç¹åä¼˜åŒ–</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">process</span>(<span class="hljs-params">value</span>) {
  <span class="hljs-keyword">return</span> value * <span class="hljs-number">2</span>; <span class="hljs-comment">// valueå¯èƒ½æ˜¯Numberæˆ–String</span>
}

<span class="hljs-title function_">process</span>(<span class="hljs-number">10</span>);     <span class="hljs-comment">// Numberï¼ŒTurboFanä¼˜åŒ–ä¸ºæ•´æ•°ä¹˜æ³•</span>
<span class="hljs-title function_">process</span>(<span class="hljs-string">"5"</span>);    <span class="hljs-comment">// Stringï¼Œåä¼˜åŒ–ï¼</span>
<span class="hljs-title function_">process</span>(<span class="hljs-number">20</span>);     <span class="hljs-comment">// Numberï¼Œå¯èƒ½å†æ¬¡ä¼˜åŒ–</span>
<span class="hljs-title function_">process</span>(<span class="hljs-string">"10"</span>);   <span class="hljs-comment">// Stringï¼Œå†æ¬¡åä¼˜åŒ–ï¼</span>

<span class="hljs-comment">// ç»“æœï¼šä¼˜åŒ–-åä¼˜åŒ–å¾ªç¯ï¼Œæ€§èƒ½æå·®</span>
</code></pre>
<h5 data-id="heading-88">æœ€ä½³å®è·µï¼šç±»å‹ä¸€è‡´</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// âœ… æœ€ä½³å®è·µï¼šç±»å‹ä¸€è‡´</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">processNumber</span>(<span class="hljs-params">num</span>) {
  <span class="hljs-keyword">return</span> num * <span class="hljs-number">2</span>;
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">processString</span>(<span class="hljs-params">str</span>) {
  <span class="hljs-keyword">return</span> <span class="hljs-title class_">Number</span>(str) * <span class="hljs-number">2</span>;
}

<span class="hljs-comment">// è°ƒç”¨æ—¶ä¿æŒç±»å‹ä¸€è‡´</span>
<span class="hljs-title function_">processNumber</span>(<span class="hljs-number">10</span>);
<span class="hljs-title function_">processNumber</span>(<span class="hljs-number">20</span>);
<span class="hljs-title function_">processString</span>(<span class="hljs-string">"5"</span>);
<span class="hljs-title function_">processString</span>(<span class="hljs-string">"10"</span>);

<span class="hljs-comment">// ç»“æœï¼šä¸¤ä¸ªå‡½æ•°éƒ½è¢«ç¨³å®šä¼˜åŒ–ï¼Œæ€§èƒ½æœ€ä½³</span>
</code></pre>
<hr/>
<h4 data-id="heading-89">5.6 å®æˆ˜æ¡ˆä¾‹ï¼šæ•°æ®å¯è§†åŒ–æ¸²æŸ“æ€§èƒ½ä¼˜åŒ–</h4>
<p><strong>èƒŒæ™¯ï¼š</strong></p>
<ul>
<li>æŸBIå¹³å°çš„å›¾è¡¨ç»„ä»¶</li>
<li>éœ€è¦æ¸²æŸ“åŒ…å«10,000ä¸ªæ•°æ®ç‚¹çš„æŠ˜çº¿å›¾</li>
<li>æµ‹è¯•å‘ç°æ¸²æŸ“è€—æ—¶é•¿è¾¾800msï¼Œè¿œè¶…é¢„æœŸçš„100msç›®æ ‡</li>
</ul>
<h5 data-id="heading-90">é—®é¢˜è¡¨ç°</h5>





























<table><thead><tr><th>æŒ‡æ ‡</th><th>æµ‹è¯•ç»“æœ</th><th>é¢„æœŸ</th><th>å·®è·</th></tr></thead><tbody><tr><td>æ¸²æŸ“è€—æ—¶</td><td>800ms</td><td>100ms</td><td>æ…¢8å€</td></tr><tr><td>CPUå ç”¨ç‡</td><td>90%</td><td>&lt;30%</td><td>é«˜3å€</td></tr><tr><td>ç”¨æˆ·ä½“éªŒ</td><td>æ˜æ˜¾å¡é¡¿</td><td>æµç•…</td><td>âŒ</td></tr></tbody></table>
<h5 data-id="heading-91">é—®é¢˜å®šä½</h5>
<p><strong>æ£€æŸ¥æ•°æ®æºå‘ç°é—®é¢˜ï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// âŒ é—®é¢˜æ•°æ®ï¼šç±»å‹æ··æ‚</span>
<span class="hljs-keyword">const</span> data = [
  { <span class="hljs-attr">value</span>: <span class="hljs-number">100</span>, <span class="hljs-attr">timestamp</span>: <span class="hljs-number">1699999999</span> },      <span class="hljs-comment">// Numberç±»å‹</span>
  { <span class="hljs-attr">value</span>: <span class="hljs-string">"120"</span>, <span class="hljs-attr">timestamp</span>: <span class="hljs-string">"1700000000"</span> },  <span class="hljs-comment">// Stringç±»å‹ï¼</span>
  { <span class="hljs-attr">value</span>: <span class="hljs-number">150</span>, <span class="hljs-attr">timestamp</span>: <span class="hljs-number">1700000001</span> },      <span class="hljs-comment">// Numberç±»å‹</span>
  <span class="hljs-comment">// ...</span>
];

<span class="hljs-comment">// V8çš„å›°å¢ƒï¼š</span>
<span class="hljs-comment">// - ç¬¬1æ¬¡è°ƒç”¨ï¼šå‡è®¾valueæ˜¯Numberï¼Œç”Ÿæˆä¼˜åŒ–ä»£ç </span>
<span class="hljs-comment">// - ç¬¬2æ¬¡è°ƒç”¨ï¼šé‡åˆ°Stringï¼Œç±»å‹å‡è®¾å¤±è´¥ï¼Œè§¦å‘Deoptimization</span>
<span class="hljs-comment">// - ç¬¬3æ¬¡è°ƒç”¨ï¼šå‡è®¾valueå¯èƒ½æ˜¯Numberæˆ–Stringï¼Œç”Ÿæˆå¤šæ€ä»£ç </span>
<span class="hljs-comment">// - ç¬¬100æ¬¡è°ƒç”¨ï¼šç±»å‹å˜åŒ–å¤ªå¤šï¼Œæ”¾å¼ƒä¼˜åŒ–ï¼ˆMegamorphicï¼‰</span>
</code></pre>
<h5 data-id="heading-92">æ€§èƒ½å½±å“åˆ†æ</h5>























<table><thead><tr><th>æ‰§è¡Œæ¨¡å¼</th><th>å•æ¬¡è¿­ä»£è€—æ—¶</th><th>10,000æ¬¡æ€»è€—æ—¶</th><th>æ€§èƒ½å·®è·</th></tr></thead><tbody><tr><td>TurboFanä¼˜åŒ–ä»£ç </td><td>8ns</td><td>80ms</td><td>åŸºå‡†</td></tr><tr><td>Ignitionè§£é‡Šæ‰§è¡Œ</td><td>80ns</td><td>800ms</td><td><strong>æ…¢10å€</strong></td></tr></tbody></table>
<h5 data-id="heading-93">ä¼˜åŒ–æ–¹æ¡ˆ</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// âœ… ä¼˜åŒ–1ï¼šæ•°æ®é¢„å¤„ç†ï¼Œç¡®ä¿ç±»å‹ä¸€è‡´</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">normalizeData</span>(<span class="hljs-params">rawData</span>) {
  <span class="hljs-keyword">return</span> rawData.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">point</span> =&gt;</span> ({
    <span class="hljs-attr">value</span>: <span class="hljs-title class_">Number</span>(point.<span class="hljs-property">value</span>),        <span class="hljs-comment">// å¼ºåˆ¶è½¬æ¢ä¸ºNumber</span>
    <span class="hljs-attr">timestamp</span>: <span class="hljs-title class_">Number</span>(point.<span class="hljs-property">timestamp</span>)
  }));
}

<span class="hljs-comment">// âœ… ä¼˜åŒ–2ï¼šå‡½æ•°ä¿æŒå•æ€ï¼ˆMonomorphicï¼‰</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">renderPoints</span>(<span class="hljs-params">data</span>) {
  <span class="hljs-comment">// V8è§‚å¯Ÿåˆ°ï¼švalueå’Œtimestampå§‹ç»ˆæ˜¯Number</span>
  <span class="hljs-comment">// ç”Ÿæˆé’ˆå¯¹Numberç±»å‹çš„ä¼˜åŒ–æœºå™¨ç </span>
  <span class="hljs-keyword">return</span> data.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">point</span> =&gt;</span> {
    <span class="hljs-keyword">const</span> x = point.<span class="hljs-property">value</span> * scale;
    <span class="hljs-keyword">const</span> y = point.<span class="hljs-property">timestamp</span> * scale;
    <span class="hljs-keyword">return</span> { x, y };
  });
}
</code></pre>
<h5 data-id="heading-94">ä¼˜åŒ–æ•ˆæœ</h5>



































<table><thead><tr><th>æŒ‡æ ‡</th><th>ä¼˜åŒ–å‰</th><th>ä¼˜åŒ–å</th><th>æå‡</th></tr></thead><tbody><tr><td>æ¸²æŸ“è€—æ—¶</td><td>800ms</td><td>80ms</td><td><strong>10å€</strong></td></tr><tr><td>CPUå ç”¨</td><td>90%</td><td>25%</td><td><strong>é™ä½72%</strong></td></tr><tr><td>V8ä¼˜åŒ–çŠ¶æ€</td><td>Megamorphic</td><td>Monomorphic</td><td>âœ…</td></tr><tr><td>ç”¨æˆ·ä½“éªŒ</td><td>æ˜æ˜¾å¡é¡¿</td><td>å‡ ä¹æ— æ„Ÿ</td><td>âœ…</td></tr></tbody></table>
<h5 data-id="heading-95">æ‰©å±•ä¼˜åŒ–ï¼šä½¿ç”¨TypedArray</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// âœ… è¿›ä¸€æ­¥ä¼˜åŒ–ï¼šä½¿ç”¨TypedArrayé¿å…å¯¹è±¡å¼€é”€</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">renderPointsOptimized</span>(<span class="hljs-params">data</span>) {
  <span class="hljs-keyword">const</span> length = data.<span class="hljs-property">length</span>;
  <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Float64Array</span>(length * <span class="hljs-number">2</span>);  <span class="hljs-comment">// [x1,y1,x2,y2,...]</span>
  
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; length; i++) {
    result[i * <span class="hljs-number">2</span>] = data[i].<span class="hljs-property">value</span> * scale;
    result[i * <span class="hljs-number">2</span> + <span class="hljs-number">1</span>] = data[i].<span class="hljs-property">timestamp</span> * scale;
  }
  
  <span class="hljs-keyword">return</span> result;
}

<span class="hljs-comment">// æœ€ç»ˆæ•ˆæœï¼š80ms â†’ 40msï¼Œå†æå‡2å€</span>
</code></pre>
<p><strong>å…³é”®æ”¶è·ï¼š</strong></p>
<ol>
<li>ç±»å‹ä¸€è‡´æ€§æ˜¯V8ä¼˜åŒ–çš„å‰ææ¡ä»¶</li>
<li>MegamorphicçŠ¶æ€ä¼šå¯¼è‡´10-100å€çš„æ€§èƒ½æŸå¤±</li>
<li>DevToolsçš„"Not optimized"æ ‡è®°æ˜¯æ€§èƒ½ç“¶é¢ˆçš„é‡è¦ä¿¡å·</li>
<li>æ•°æ®é¢„å¤„ç†æˆæœ¬è¿œå°äºè¿è¡Œæ—¶æ€§èƒ½æŸå¤±</li>
</ol>
<hr/>
<h4 data-id="heading-96">5.7 Hidden Classæœºåˆ¶ï¼šè®©åŠ¨æ€è¯­è¨€è·‘å¾—åƒé™æ€è¯­è¨€</h4>
<p><strong>è¯­è¨€å¯¹æ¯”ï¼š</strong></p>




















<table><thead><tr><th>è¯­è¨€</th><th>å¯¹è±¡è®¿é—®æ–¹å¼</th><th>æ€§èƒ½</th></tr></thead><tbody><tr><td><strong>C++</strong></td><td>ç¼–è¯‘æ—¶ç¡®å®šå±æ€§åç§»é‡ï¼Œç›´æ¥è¯»å–</td><td>æå¿«</td></tr><tr><td><strong>JavaScript</strong></td><td>å±æ€§å¯éšæ—¶å¢åˆ ï¼Œéœ€è¦æŸ¥æ‰¾</td><td>åº”è¯¥å¾ˆæ…¢</td></tr></tbody></table>
<p><strong>é—®é¢˜ï¼š</strong> JavaScriptæ˜¯åŠ¨æ€è¯­è¨€ï¼Œå¯¹è±¡ç»“æ„éšæ—¶å¯èƒ½å˜åŒ–ï¼ŒV8æ€ä¹ˆä¼˜åŒ–å±æ€§è®¿é—®ï¼Ÿ</p>
<h5 data-id="heading-97">V8çš„èªæ˜æ–¹æ¡ˆ</h5>
<p>è™½ç„¶JavaScriptå…è®¸åŠ¨æ€ä¿®æ”¹å¯¹è±¡ï¼Œä½†<strong>å®é™…é¡¹ç›®ä¸­ï¼Œå¤§éƒ¨åˆ†å¯¹è±¡ç»“æ„æ˜¯ç¨³å®šçš„</strong>ï¼ˆæ„é€ å‡½æ•°åˆ›å»ºçš„å¯¹è±¡ç»“æ„ä¸€è‡´ï¼‰ã€‚</p>
<p>V8ä¸ºè¿™äº›å¯¹è±¡åˆ›å»º<strong>Hidden Classï¼ˆéšè—ç±»ï¼‰</strong>ï¼Œè®°å½•å±æ€§çš„å†…å­˜å¸ƒå±€ï¼ŒåƒC++ä¸€æ ·å¿«é€Ÿè®¿é—®ã€‚</p>
<h5 data-id="heading-98">Hidden Classæ¼”è¿›è¿‡ç¨‹</h5>
<pre><code class="hljs language-markdown" lang="markdown">HiddenClass C0ï¼ˆç©ºå¯¹è±¡ï¼‰
  â””â”€ æ·»åŠ å±æ€§x
<span class="hljs-code">      â†“
HiddenClass C1
  - å±æ€§ï¼šx
  - åç§»ï¼š0
  â””â”€ æ·»åŠ å±æ€§y
      â†“
HiddenClass C2
  - å±æ€§ï¼šx, y
  - åç§»ï¼š0, 8
  â””â”€ æ·»åŠ å±æ€§z
      â†“
HiddenClass C3
  - å±æ€§ï¼šx, y, z
  - åç§»ï¼š0, 8, 16
</span></code></pre>
<h5 data-id="heading-99">å¿«é€Ÿè®¿é—®åŸç†</h5>
<p><strong>è®¿é—® <code>obj.x</code> çš„æ­¥éª¤ï¼š</strong></p>
<ol>
<li>ä»£ç æ‰§è¡Œ <code>obj.x</code></li>
<li>V8æŸ¥è¯¢Hidden Class</li>
<li>è·å–åç§»é‡ï¼š0</li>
<li>è¯»å–å†…å­˜ <code>[å¯¹è±¡åœ°å€ + 0]</code></li>
<li>è¿”å›å±æ€§å€¼</li>
</ol>
<p>âœ¨ <strong>æ— éœ€éå†å±æ€§ï¼Œç›´æ¥åç§»è®¿é—®</strong></p>
<h5 data-id="heading-100">æ€§èƒ½å¯¹æ¯”</h5>

























<table><thead><tr><th>è®¿é—®æ–¹å¼</th><th>è€—æ—¶</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>å±æ€§éå†</strong></td><td>~100ns</td><td>ä¼ ç»Ÿæ–¹å¼</td></tr><tr><td><strong>Hidden Class</strong></td><td>~5ns</td><td>V8ä¼˜åŒ–</td></tr><tr><td><strong>æ€§èƒ½æå‡</strong></td><td><strong>20å€</strong></td><td>-</td></tr></tbody></table>
<hr/>
<h4 data-id="heading-101">5.8 Inline Cacheï¼ˆå†…è”ç¼“å­˜ï¼‰ï¼šè®°ä½ä¸Šæ¬¡èµ°è¿‡çš„è·¯</h4>
<p><strong>ç”Ÿæ´»åœºæ™¯ï¼š</strong> ä½ æ¯å¤©ä¸Šç­éƒ½èµ°åŒä¸€æ¡è·¯ã€‚ç¬¬ä¸€æ¬¡å¯èƒ½éœ€è¦çœ‹åœ°å›¾ï¼Œç¬¬äºŒæ¬¡å°±è®°ä½äº†è·¯çº¿ï¼Œç›´æ¥èµ°ï¼Œä¸ç”¨å†æŸ¥åœ°å›¾ã€‚</p>
<p><strong>V8çš„åšæ³•ç±»ä¼¼ï¼š</strong> å‡½æ•°ç¬¬ä¸€æ¬¡è®¿é—®å¯¹è±¡å±æ€§æ—¶ï¼Œéœ€è¦æŸ¥æ‰¾Hidden Classã€‚ä½†å¦‚æœå‡½æ•°æ€»æ˜¯å¤„ç†ç›¸åŒç±»å‹çš„å¯¹è±¡ï¼ŒV8å°±"è®°ä½"è¿™æ¡å¿«æ·è·¯å¾„ï¼Œä¸‹æ¬¡ç›´æ¥ç”¨ã€‚</p>
<h5 data-id="heading-102">Inline CacheçŠ¶æ€è½¬æ¢</h5>
<pre><code class="hljs">æœªåˆå§‹åŒ–
  â†“
é¦–æ¬¡è°ƒç”¨
  â†“
ã€å•æ€ Monomorphicã€‘è§è¿‡1ç§ç±»å‹ï¼Œæ€§èƒ½æœ€ä¼˜ âœ…
  â†“
é‡åˆ°æ–°ç±»å‹ï¼Ÿ
  â”œâ”€ å¦ â†’ ä¿æŒå•æ€
  â””â”€ æ˜¯ â†“
ã€å¤šæ€ Polymorphicã€‘è§è¿‡2-4ç§ç±»å‹ï¼Œæ€§èƒ½è‰¯å¥½ âš ï¸
  â†“
ç»§ç»­æ–°ç±»å‹ï¼Ÿ
  â”œâ”€ å°‘é‡ â†’ ä¿æŒå¤šæ€
  â””â”€ å¤§é‡ â†“
ã€è¶…å¤šæ€ Megamorphicã€‘è§è¿‡&gt;4ç§ç±»å‹ï¼Œæ”¾å¼ƒä¼˜åŒ– âŒ
</code></pre>
<h5 data-id="heading-103">æ€§èƒ½å·®å¼‚</h5>





























<table><thead><tr><th>ICçŠ¶æ€</th><th>è§è¿‡çš„ç±»å‹æ•°</th><th>æ€§èƒ½</th><th>ä¼˜åŒ–ç¨‹åº¦</th></tr></thead><tbody><tr><td><strong>Monomorphic</strong></td><td>1ç§</td><td>æœ€å¿«</td><td>âœ… å®Œå…¨ä¼˜åŒ–</td></tr><tr><td><strong>Polymorphic</strong></td><td>2-4ç§</td><td>è‰¯å¥½</td><td>âš ï¸ éƒ¨åˆ†ä¼˜åŒ–</td></tr><tr><td><strong>Megamorphic</strong></td><td>&gt;4ç§</td><td>å¾ˆæ…¢</td><td>âŒ æ”¾å¼ƒä¼˜åŒ–</td></tr></tbody></table>
<hr/>
<h4 data-id="heading-104">5.9 V8ä¼˜åŒ–æœ€ä½³å®è·µ</h4>
<h5 data-id="heading-105">æ ¸å¿ƒåŸåˆ™</h5>
<p><strong>ä¿æŒå¯¹è±¡ç»“æ„ç¨³å®šï¼Œä¿æŒç±»å‹ä¸€è‡´ã€‚</strong></p>
<h5 data-id="heading-106">å¯¹è±¡ç®¡ç†</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// âŒ åæ¨¡å¼1ï¼šåŠ¨æ€æ·»åŠ å±æ€§ï¼ˆæ€§èƒ½å·®ï¼‰</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">createProduct</span>(<span class="hljs-params">name, price</span>) {
  <span class="hljs-keyword">const</span> product = {}; <span class="hljs-comment">// ç©ºå¯¹è±¡</span>
  product.<span class="hljs-property">name</span> = name; <span class="hljs-comment">// Hidden Classå˜åŒ–</span>
  product.<span class="hljs-property">price</span> = price; <span class="hljs-comment">// Hidden Classå†æ¬¡å˜åŒ–</span>
  <span class="hljs-keyword">if</span> (price &gt; <span class="hljs-number">100</span>) {
    product.<span class="hljs-property">discount</span> = <span class="hljs-number">0.9</span>; <span class="hljs-comment">// æœ‰äº›å¯¹è±¡æœ‰è¿™ä¸ªå±æ€§ï¼Œæœ‰äº›æ²¡æœ‰</span>
  }
  <span class="hljs-keyword">return</span> product;
}

<span class="hljs-comment">// âœ… æœ€ä½³å®è·µ1ï¼šæ„é€ å‡½æ•°åˆå§‹åŒ–æ‰€æœ‰å±æ€§</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">createProduct</span>(<span class="hljs-params">name, price</span>) {
  <span class="hljs-keyword">return</span> {
    <span class="hljs-attr">name</span>: name,
    <span class="hljs-attr">price</span>: price,
    <span class="hljs-attr">discount</span>: price &gt; <span class="hljs-number">100</span> ? <span class="hljs-number">0.9</span> : <span class="hljs-number">1.0</span> <span class="hljs-comment">// æ‰€æœ‰å¯¹è±¡ç»“æ„ä¸€è‡´</span>
  };
}
</code></pre>
<h5 data-id="heading-107">å‡½æ•°è®¾è®¡</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// âŒ åæ¨¡å¼2ï¼šç±»å‹ä¸ä¸€è‡´ï¼ˆæ€§èƒ½å·®ï¼‰</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">processValue</span>(<span class="hljs-params">arr</span>) {
  <span class="hljs-keyword">return</span> arr.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> {
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> item === <span class="hljs-string">'number'</span>) <span class="hljs-keyword">return</span> item * <span class="hljs-number">2</span>;
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> item === <span class="hljs-string">'string'</span>) <span class="hljs-keyword">return</span> item.<span class="hljs-title function_">toUpperCase</span>();
    <span class="hljs-keyword">return</span> item; <span class="hljs-comment">// ç±»å‹æ··ä¹±ï¼Œè§¦å‘Megamorphic</span>
  });
}

<span class="hljs-comment">// âœ… æœ€ä½³å®è·µ2ï¼šä¿æŒç±»å‹ä¸€è‡´</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">processNumbers</span>(<span class="hljs-params">arr</span>) {
  <span class="hljs-keyword">return</span> arr.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> item * <span class="hljs-number">2</span>); <span class="hljs-comment">// ç±»å‹ç¨³å®šï¼Œä¿æŒMonomorphic</span>
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">processStrings</span>(<span class="hljs-params">arr</span>) {
  <span class="hljs-keyword">return</span> arr.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> item.<span class="hljs-title function_">toUpperCase</span>()); <span class="hljs-comment">// åˆ†å¼€å¤„ç†ä¸åŒç±»å‹</span>
}
</code></pre>
<h5 data-id="heading-108">ä¼˜åŒ–æ£€æŸ¥æ¸…å•</h5>



































<table><thead><tr><th>æ£€æŸ¥é¡¹</th><th>âŒ é¿å…</th><th>âœ… æ¨è</th></tr></thead><tbody><tr><td><strong>å¯¹è±¡åˆ›å»º</strong></td><td>åŠ¨æ€æ·»åŠ å±æ€§</td><td>æ„é€ å‡½æ•°åˆå§‹åŒ–å…¨éƒ¨å±æ€§</td></tr><tr><td><strong>å¯¹è±¡ä¿®æ”¹</strong></td><td>deleteæ“ä½œ</td><td>è®¾ç½®ä¸ºnullæˆ–undefined</td></tr><tr><td><strong>å‡½æ•°å‚æ•°</strong></td><td>ç±»å‹æ··ç”¨</td><td>ä¿æŒå‚æ•°ç±»å‹ç¨³å®š</td></tr><tr><td><strong>æ•°ç»„å…ƒç´ </strong></td><td>ç±»å‹æ··æ‚</td><td>ä¿æŒå…ƒç´ ç±»å‹ä¸€è‡´</td></tr><tr><td><strong>æ•°ç»„æ“ä½œ</strong></td><td>åˆ›å»ºç©ºæ´ï¼ˆç¨€ç–æ•°ç»„ï¼‰</td><td>è¿ç»­ç´¢å¼•</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-109">å…­ã€Network Serviceè¿›ç¨‹æ¶æ„ï¼šç½‘ç»œè¯·æ±‚çš„ç»Ÿä¸€è°ƒåº¦</h3>
<h4 data-id="heading-110">6.1 Network Serviceç‹¬ç«‹è¿›ç¨‹åŒ–</h4>
<p><strong>æ¶æ„æ¼”è¿›ï¼š</strong> Chrome 78ä¹‹åï¼Œç½‘ç»œæ ˆä»Browser Processä¸­åˆ†ç¦»ä¸ºç‹¬ç«‹çš„Network Serviceè¿›ç¨‹ã€‚</p>
<h5 data-id="heading-111">ä¸ºä»€ä¹ˆè¦åˆ†ç¦»ï¼Ÿ</h5>

























<table><thead><tr><th>é—®é¢˜ç±»å‹</th><th>Browser Processä¸­çš„é—®é¢˜</th><th>ç‹¬ç«‹Network Serviceçš„ä¼˜åŠ¿</th></tr></thead><tbody><tr><td><strong>ç¨³å®šæ€§</strong></td><td>ç½‘ç»œæ ˆå´©æºƒå¯¼è‡´æµè§ˆå™¨å´©æºƒ</td><td>âœ… æ•…éšœéš”ç¦»ï¼Œç½‘ç»œå´©æºƒä¸å½±å“æµè§ˆå™¨</td></tr><tr><td><strong>å“åº”æ€§</strong></td><td>ç½‘ç»œæ ˆé˜»å¡å½±å“UIå“åº”</td><td>âœ… å¹¶è¡Œå¤„ç†ï¼Œä¸é˜»å¡ä¸»è¿›ç¨‹</td></tr><tr><td><strong>èµ„æºæ§åˆ¶</strong></td><td>æ— æ³•ç‹¬ç«‹èµ„æºé™åˆ¶</td><td>âœ… ç‹¬ç«‹çš„å†…å­˜/CPUé…é¢</td></tr></tbody></table>
<h5 data-id="heading-112">è¿›ç¨‹æ¶æ„ç»„æˆ</h5>
<p><strong>Browser Processï¼ˆæµè§ˆå™¨ä¸»è¿›ç¨‹ï¼‰</strong></p>
<ul>
<li>åè°ƒç½‘ç»œè¯·æ±‚</li>
<li>ç®¡ç†è¿›ç¨‹é—´é€šä¿¡</li>
</ul>
<p><strong>Network Service Processï¼ˆç½‘ç»œæœåŠ¡è¿›ç¨‹ï¼‰</strong></p>
<ul>
<li><strong>URLLoader</strong>ï¼šè¯·æ±‚ç®¡ç†å™¨</li>
<li><strong>Disk Cache</strong>ï¼šç£ç›˜ç¼“å­˜</li>
<li><strong>Connection Pool</strong>ï¼šè¿æ¥æ± ï¼ˆHTTP/2å¤šè·¯å¤ç”¨ã€TCPè¿æ¥å¤ç”¨ï¼‰</li>
<li><strong>DNS Resolver</strong>ï¼šDNSè§£æå™¨</li>
<li><strong>ä¼˜å…ˆçº§è°ƒåº¦å™¨</strong>ï¼š
<ul>
<li>ğŸ”´ Critical - HTMLä¸»æ–‡æ¡£ã€å…³é”®CSS</li>
<li>ğŸŸ  High - å¯è§å›¾ç‰‡ã€åŒæ­¥JS</li>
<li>ğŸŸ¡ Medium - å­—ä½“ã€å¼‚æ­¥JS</li>
<li>ğŸŸ¢ Low - prefetchèµ„æº</li>
<li>âšª Lowest - loading="lazy"å›¾ç‰‡</li>
</ul>
</li>
</ul>
<p><strong>Renderer Process 1, 2, 3...ï¼ˆæ¸²æŸ“è¿›ç¨‹ï¼‰</strong></p>
<ul>
<li>é€šè¿‡IPCä¸Network Serviceé€šä¿¡</li>
</ul>
<hr/>
<h4 data-id="heading-113">6.2 èµ„æºä¼˜å…ˆçº§è°ƒåº¦</h4>
<h5 data-id="heading-114">Chromiumèµ„æºä¼˜å…ˆçº§ç³»ç»Ÿ</h5>















































<table><thead><tr><th>ä¼˜å…ˆçº§</th><th>èµ„æºç±»å‹</th><th>ç¤ºä¾‹</th><th>ç½‘ç»œæƒé‡</th><th>åŠ è½½æ—¶æœº</th></tr></thead><tbody><tr><td><strong>Critical</strong></td><td>HTMLä¸»æ–‡æ¡£ã€å…³é”®CSS</td><td>index.html, critical.css</td><td>æœ€é«˜</td><td>ç«‹å³</td></tr><tr><td><strong>High</strong></td><td>å¯è§å›¾ç‰‡ã€è„šæœ¬</td><td>é¦–å±å›¾ç‰‡ã€åŒæ­¥JS</td><td>é«˜</td><td>ä¼˜å…ˆ</td></tr><tr><td><strong>Medium</strong></td><td>å­—ä½“ã€å¼‚æ­¥è„šæœ¬</td><td>font.woff2, async JS</td><td>ä¸­</td><td>æ­£å¸¸</td></tr><tr><td><strong>Low</strong></td><td>é¢„åŠ è½½èµ„æº</td><td>prefetchèµ„æº</td><td>ä½</td><td>å»¶å</td></tr><tr><td><strong>Lowest</strong></td><td>å»¶è¿ŸåŠ è½½å›¾ç‰‡</td><td>loading="lazy"å›¾ç‰‡</td><td>æœ€ä½</td><td>ç©ºé—²æ—¶</td></tr></tbody></table>
<h5 data-id="heading-115">åŠ¨æ€ä¼˜å…ˆçº§è°ƒæ•´ç¤ºä¾‹</h5>
<p><strong>åœºæ™¯ï¼šå›¾ç‰‡ä»å±å¹•å¤–æ»šåŠ¨åˆ°å³å°†å¯è§</strong></p>
<ol>
<li>
<p>HTML Parserå‘ç°<code>&lt;img&gt;</code>æ ‡ç­¾</p>
<ul>
<li>åˆ¤æ–­ï¼šå›¾ç‰‡ä½ç½®åœ¨å±å¹•å¤–</li>
<li>å†³ç­–ï¼šè®¾ç½®ä¼˜å…ˆçº§ = Low ğŸ”µ</li>
</ul>
</li>
<li>
<p>èµ„æºè°ƒåº¦å™¨å‘èµ·è¯·æ±‚</p>
<ul>
<li>ä¼˜å…ˆçº§ï¼šLow</li>
<li>å¸¦å®½åˆ†é…ï¼š10%</li>
<li>ä¸‹è½½é€Ÿåº¦ï¼šè¾ƒæ…¢</li>
</ul>
</li>
<li>
<p>ç”¨æˆ·æ»šåŠ¨ï¼Œå›¾ç‰‡å³å°†è¿›å…¥è§†å£</p>
<ul>
<li>IntersectionObserverè§¦å‘</li>
<li>æ£€æµ‹ï¼šè·ç¦»è§†å£ &lt; 100px</li>
<li>å†³ç­–ï¼šæå‡ä¼˜å…ˆçº§ Low ğŸ”µ â†’ High ğŸ”´</li>
</ul>
</li>
<li>
<p>èµ„æºè°ƒåº¦å™¨é‡æ–°è°ƒåº¦</p>
<ul>
<li>ä¸­æ–­ä½ä¼˜å…ˆçº§è¯·æ±‚</li>
<li>ä¼˜å…ˆå¤„ç†é«˜ä¼˜å…ˆçº§è¯·æ±‚</li>
<li>å¸¦å®½åˆ†é…ï¼š80%</li>
<li>ä¸‹è½½é€Ÿåº¦ï¼šå¿«é€Ÿ</li>
</ul>
</li>
<li>
<p>å›¾ç‰‡å¿«é€ŸåŠ è½½å®Œæˆ</p>
<ul>
<li>ç”¨æˆ·æ»šåŠ¨åˆ°å›¾ç‰‡ä½ç½®æ—¶å·²ç»åŠ è½½å®Œæˆ</li>
<li>ç”¨æˆ·ä½“éªŒæµç•…ï¼Œæ— ç™½å— ğŸ‰</li>
</ul>
</li>
</ol>
<hr/>
<h4 data-id="heading-116">6.3 Resource Hintså®ç°</h4>
<pre><code class="hljs language-html" lang="html"><span class="hljs-comment">&lt;!-- DNSé¢„è§£æï¼ˆèŠ‚çœDNSæŸ¥è¯¢æ—¶é—´ï¼‰ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"dns-prefetch"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"https://cdn.example.com"</span>&gt;</span>

<span class="hljs-comment">&lt;!-- é¢„è¿æ¥ï¼ˆDNS + TCP + TLSï¼ŒèŠ‚çœè¿æ¥æ—¶é—´ï¼‰ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"preconnect"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"https://api.example.com"</span>&gt;</span>

<span class="hljs-comment">&lt;!-- é¢„åŠ è½½ï¼ˆé«˜ä¼˜å…ˆçº§ï¼Œç«‹å³åŠ è½½å…³é”®èµ„æºï¼‰ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"preload"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"/critical.css"</span> <span class="hljs-attr">as</span>=<span class="hljs-string">"style"</span>&gt;</span>

<span class="hljs-comment">&lt;!-- é¢„è·å–ï¼ˆä½ä¼˜å…ˆçº§ï¼Œç©ºé—²æ—¶åŠ è½½ä¸‹ä¸€é¡µèµ„æºï¼‰ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"prefetch"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"/next-page.js"</span>&gt;</span>
</code></pre>
<h5 data-id="heading-117">Resource Hintsæ•ˆæœ</h5>



































<table><thead><tr><th>Hintç±»å‹</th><th>èŠ‚çœæ—¶é—´</th><th>é€‚ç”¨åœºæ™¯</th><th>æœ€ä½³å®è·µ</th></tr></thead><tbody><tr><td><strong>dns-prefetch</strong></td><td>~20-120ms</td><td>ç¬¬ä¸‰æ–¹åŸŸå</td><td>é¢„è§£æCDNåŸŸå</td></tr><tr><td><strong>preconnect</strong></td><td>~100-500ms</td><td>å…³é”®API</td><td>æå‰å»ºç«‹è¿æ¥</td></tr><tr><td><strong>preload</strong></td><td>æå‰åŠ è½½</td><td>å…³é”®èµ„æº</td><td>é¦–å±å¿…éœ€èµ„æº</td></tr><tr><td><strong>prefetch</strong></td><td>æå‰ç¼“å­˜</td><td>ä¸‹ä¸€é¡µèµ„æº</td><td>é¢„æµ‹ç”¨æˆ·è¡Œä¸º</td></tr></tbody></table>
<hr/>
<h4 data-id="heading-118">6.4 èµ„æºåŠ è½½æ—¶é—´çº¿å¯¹æ¯”</h4>
<h5 data-id="heading-119">æ— ä¼˜å…ˆçº§ç­–ç•¥ï¼ˆæ€»è€—æ—¶800msï¼‰</h5>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-section">0-200ms:   HTMLä¸‹è½½</span>
<span class="hljs-section">200-500ms: CSSä¸‹è½½ï¼ˆé˜»å¡æ¸²æŸ“ï¼‰</span>
<span class="hljs-section">200-800ms: å›¾ç‰‡å¹¶è¡Œä¸‹è½½ï¼ˆå ç”¨å¸¦å®½ï¼‰</span>
<span class="hljs-section">200-700ms: JSå¹¶è¡Œä¸‹è½½ï¼ˆå ç”¨å¸¦å®½ï¼‰</span>

âŒ é—®é¢˜ï¼šæ‰€æœ‰èµ„æºå¹³ç­‰ç«äº‰å¸¦å®½ï¼Œå…³é”®CSSè¢«å»¶è¿Ÿ
</code></pre>
<h5 data-id="heading-120">æœ‰ä¼˜å…ˆçº§ç­–ç•¥ï¼ˆæ€»è€—æ—¶550msï¼‰</h5>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-section">0-200ms:   HTMLä¸‹è½½</span>
<span class="hljs-section">200-350ms: CSSé«˜ä¼˜å…ˆçº§ä¸‹è½½ï¼ˆä¼˜å…ˆå¸¦å®½ï¼‰âœ…</span>
<span class="hljs-section">350-550ms: JSä¸­ä¼˜å…ˆçº§ä¸‹è½½</span>
<span class="hljs-section">550-800ms: å›¾ç‰‡ä½ä¼˜å…ˆçº§ä¸‹è½½</span>

âœ… ä¼˜åŠ¿ï¼šå…³é”®èµ„æºä¼˜å…ˆå®Œæˆï¼Œé¦–å±æ¸²æŸ“æå‰250ms
</code></pre>
<h5 data-id="heading-121">æ€§èƒ½æå‡</h5>





























<table><thead><tr><th>æŒ‡æ ‡</th><th>æ— ä¼˜å…ˆçº§</th><th>æœ‰ä¼˜å…ˆçº§</th><th>æå‡</th></tr></thead><tbody><tr><td>é¦–å±æ¸²æŸ“æ—¶é—´</td><td>800ms</td><td>550ms</td><td><strong>å¿«45%</strong></td></tr><tr><td>å…³é”®èµ„æºå®Œæˆ</td><td>500ms</td><td>350ms</td><td><strong>å¿«30%</strong></td></tr><tr><td>ç”¨æˆ·ä½“éªŒ</td><td>ç™½å±æ—¶é—´é•¿</td><td>å†…å®¹å¿«é€Ÿå‘ˆç°</td><td>âœ…</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-122">æ€»ç»“ï¼šæµè§ˆå™¨ä¼˜åŒ–çš„æ ¸å¿ƒåŸåˆ™</h3>
<h4 data-id="heading-123">æ¶æ„å±‚é¢</h4>

























<table><thead><tr><th>åŸåˆ™</th><th>æŠ€æœ¯å®ç°</th><th>æ•ˆæœ</th></tr></thead><tbody><tr><td><strong>è¿›ç¨‹éš”ç¦»</strong></td><td>å¤šè¿›ç¨‹æ¶æ„ã€Site Isolation</td><td>ç¨³å®šæ€§ã€å®‰å…¨æ€§</td></tr><tr><td><strong>å¹¶è¡Œå¤„ç†</strong></td><td>å¤šçº¿ç¨‹æ¸²æŸ“ã€GPUåˆæˆ</td><td>æ€§èƒ½ã€å“åº”æ€§</td></tr><tr><td><strong>æŒ‰éœ€åŠ è½½</strong></td><td>ç“¦ç‰‡åŒ–ã€ä¼˜å…ˆçº§è°ƒåº¦</td><td>å†…å­˜ä¼˜åŒ–ã€é¦–å±é€Ÿåº¦</td></tr></tbody></table>
<h4 data-id="heading-124">ä»£ç å±‚é¢</h4>






























<table><thead><tr><th>åŸåˆ™</th><th>å®è·µæ–¹æ³•</th><th>é¿å…é™·é˜±</th></tr></thead><tbody><tr><td><strong>ç±»å‹ç¨³å®š</strong></td><td>ç»Ÿä¸€æ•°æ®ç±»å‹ã€æ„é€ å‡½æ•°åˆå§‹åŒ–</td><td>é¿å…ç±»å‹æ··ç”¨ã€åŠ¨æ€æ·»åŠ å±æ€§</td></tr><tr><td><strong>æ‰¹é‡æ“ä½œ</strong></td><td>è¯»å†™åˆ†ç¦»ã€requestAnimationFrame</td><td>é¿å…Layout Thrashing</td></tr><tr><td><strong>åˆç†åˆ†å±‚</strong></td><td>æŒ‰éœ€will-changeã€åŠ¨ç”»ç»“æŸé‡Šæ”¾</td><td>é¿å…è¿‡åº¦åˆæˆå±‚</td></tr><tr><td><strong>ä¼˜å…ˆçº§ç®¡ç†</strong></td><td>Resource Hintsã€æ‡’åŠ è½½</td><td>é¿å…èµ„æºç«äº‰</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-125">å†™åœ¨æœ€å</h3>
<p>ç°ä»£æµè§ˆå™¨æ˜¯ä¸€ä¸ªå¤æ‚çš„ç³»ç»Ÿå·¥ç¨‹ï¼Œæ¶‰åŠæ¶æ„è®¾è®¡ã€å¹¶å‘æ§åˆ¶ã€å›¾å½¢æ¸²æŸ“ã€ç¼–è¯‘ä¼˜åŒ–ç­‰å¤šä¸ªé¢†åŸŸã€‚ç†è§£æµè§ˆå™¨çš„å·¥ä½œåŸç†ï¼Œä¸ä»…èƒ½å¸®åŠ©æˆ‘ä»¬å†™å‡ºæ›´é«˜æ€§èƒ½çš„ä»£ç ï¼Œè¿˜èƒ½è®©æˆ‘ä»¬åœ¨é‡åˆ°æ€§èƒ½é—®é¢˜æ—¶å¿«é€Ÿå®šä½åŸå› ã€‚</p>
<p>å¸Œæœ›è¿™ç¯‡æ–‡ç« èƒ½å¸®åŠ©ä½ æ·±å…¥ç†è§£æµè§ˆå™¨çš„æ ¸å¿ƒæœºåˆ¶ã€‚å¦‚æœä½ è§‰å¾—æœ‰æ”¶è·ï¼Œæ¬¢è¿åˆ†äº«ç»™æ›´å¤šçš„å¼€å‘è€…ï¼</p>
<hr/>
<p><strong>å‚è€ƒèµ„æ–™ï¼š</strong></p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.chromium.org%2Fdevelopers%2Fdesign-documents%2F" target="_blank" title="https://www.chromium.org/developers/design-documents/" ref="nofollow noopener noreferrer">Chromium Design Docs</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.chromium.org%2FHome%2Fchromium-security%2Fsite-isolation%2F" target="_blank" title="https://www.chromium.org/Home/chromium-security/site-isolation/" ref="nofollow noopener noreferrer">Chromium Site Isolation</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fchromium.googlesource.com%2Fchromium%2Fsrc%2F%2B%2Fmaster%2Fmojo%2Fpublic%2Fcpp%2Fbindings%2FREADME.md" target="_blank" title="https://chromium.googlesource.com/chromium/src/+/master/mojo/public/cpp/bindings/README.md" ref="nofollow noopener noreferrer">Mojo Documentation</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fv8.dev%2Fblog" target="_blank" title="https://v8.dev/blog" ref="nofollow noopener noreferrer">V8 Blog</a></li>
</ul>
<blockquote>
<p>è½¬è½¬ç ”å‘ä¸­å¿ƒåŠä¸šç•Œå°ä¼™ä¼´ä»¬çš„æŠ€æœ¯å­¦ä¹ äº¤æµå¹³å°ï¼Œå®šæœŸåˆ†äº«ä¸€çº¿çš„å®æˆ˜ç»éªŒåŠä¸šç•Œå‰æ²¿çš„æŠ€æœ¯è¯é¢˜ã€‚
å…³æ³¨å…¬ä¼—å·ã€Œè½¬è½¬æŠ€æœ¯ã€ï¼ˆç»¼åˆæ€§ï¼‰ã€ã€Œå¤§è½¬è½¬FEã€ï¼ˆä¸“æ³¨äºFEï¼‰ã€ã€Œè½¬è½¬QAã€ï¼ˆä¸“æ³¨äºQAï¼‰ï¼Œæ›´å¤šå¹²è´§å®è·µï¼Œæ¬¢è¿äº¤æµåˆ†äº«~`</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Mybatis Plus ä¸»é”®ç”Ÿæˆå™¨å®ç°æ€è·¯åˆ†æ]]></title>    <link>https://juejin.cn/post/7584730804515291179</link>    <guid>https://juejin.cn/post/7584730804515291179</guid>    <pubDate>2025-12-18T04:07:05.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7584730804515291179" data-draft-id="7584730804515258411" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Mybatis Plus ä¸»é”®ç”Ÿæˆå™¨å®ç°æ€è·¯åˆ†æ"/> <meta itemprop="keywords" content="MyBatis,Spring Boot,æ•°æ®åº“"/> <meta itemprop="datePublished" content="2025-12-18T04:07:05.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Jaising666"/> <meta itemprop="url" content="https://juejin.cn/user/2418581311850301"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Mybatis Plus ä¸»é”®ç”Ÿæˆå™¨å®ç°æ€è·¯åˆ†æ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2418581311850301/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Jaising666
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-18T04:07:05.000Z" title="Thu Dec 18 2025 04:07:05 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-18
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä¸Šä¸€ç¯‡æˆ‘ä»¬çœ‹åˆ°äº† <a href="https://juejin.cn/post/7510053996137611300" target="_blank" title="https://juejin.cn/post/7510053996137611300">Mybatis æ‹¦æˆªå™¨åœ¨å¤šç§Ÿæˆ·åœºæ™¯ä¸‹çš„ä½¿ç”¨</a>ï¼Œè¿™æ¬¡ç»§ç»­çœ‹ä¸‹åœ¨ä¸»é”®ç”Ÿæˆåœºæ™¯ä¸‹çš„åº”ç”¨ã€‚</p>
<h2 data-id="heading-0">ä¸€ã€èƒŒæ™¯ä¸é—®é¢˜</h2>
<p>åœ¨ä½¿ç”¨ MyBatis-Plus å¼€å‘æ—¶ï¼Œé€šå¸¸ä½¿ç”¨ <code>@TableId(type = IdType.AUTO)</code> æ³¨è§£æ¥å®ç°ä¸»é”®è‡ªåŠ¨ç”Ÿæˆã€‚è¿™ç§æ–¹å¼ä¾èµ–æ•°æ®åº“çš„è‡ªå¢ç‰¹æ€§ï¼Œåœ¨ MySQL ç­‰ä¸»æµæ•°æ®åº“ä¸Šè¿è¡Œè‰¯å¥½ã€‚</p>
<p>ç„¶è€Œï¼Œå½“é¡¹ç›®è¿ç§»åˆ° OpenGauss æ•°æ®åº“æ—¶ï¼Œé‡åˆ°äº†å…¼å®¹æ€§é—®é¢˜ï¼š</p>
<ul>
<li><strong>é—®é¢˜ç°è±¡</strong>ï¼šINSERT æ“ä½œæ—¶ ID å­—æ®µä¸º NULLï¼Œå¯¼è‡´æ’å…¥å¤±è´¥</li>
<li><strong>æ ¹æœ¬åŸå› </strong>ï¼šOpenGauss ä½¿ç”¨ PostgreSQL çš„åºåˆ—ï¼ˆSequenceï¼‰æœºåˆ¶ï¼Œè€Œéè‡ªå¢å­—æ®µ</li>
<li><strong>æŠ€æœ¯é™åˆ¶</strong>ï¼šOpenGauss é©±åŠ¨å¯¹ MyBatis-Plus çš„ <code>IdType.AUTO</code> æ”¯æŒä¸å®Œå–„</li>
</ul>
<h3 data-id="heading-1">æ•°æ®åº“ä¸»é”®ç”Ÿæˆæœºåˆ¶å¯¹æ¯”</h3>
<h4 data-id="heading-2">MySQL è‡ªå¢ä¸»é”® (AUTO_INCREMENT)</h4>
<p>MySQL ä½¿ç”¨ <code>AUTO_INCREMENT</code> å±æ€§å®ç°ä¸»é”®è‡ªåŠ¨ç”Ÿæˆï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- MySQL è¡¨ç»“æ„</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> <span class="hljs-keyword">user</span> (
    id <span class="hljs-type">BIGINT</span> AUTO_INCREMENT <span class="hljs-keyword">PRIMARY</span> KEY,
    name <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">100</span>)
);

<span class="hljs-comment">-- æ’å…¥æ—¶æ— éœ€æŒ‡å®šID</span>
<span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> <span class="hljs-keyword">user</span> (name) <span class="hljs-keyword">VALUES</span> (<span class="hljs-string">'å¼ ä¸‰'</span>);
<span class="hljs-comment">-- MySQL è‡ªåŠ¨ç”Ÿæˆ id = 1</span>
</code></pre>
<p><strong>ç‰¹ç‚¹ï¼š</strong></p>
<ul>
<li>åœ¨è¡¨ç»“æ„ä¸­å®šä¹‰è‡ªå¢å±æ€§</li>
<li>INSERT æ—¶å¯ä»¥çœç•¥ä¸»é”®å­—æ®µ</li>
<li>æ•°æ®åº“å¼•æ“è‡ªåŠ¨åˆ†é…é€’å¢çš„IDå€¼</li>
<li>MyBatis-Plus çš„ <code>IdType.AUTO</code> ç›´æ¥æ”¯æŒ</li>
</ul>
<h4 data-id="heading-3">PostgreSQL/OpenGauss åºåˆ—æœºåˆ¶ (SEQUENCE)</h4>
<p>PostgreSQL ç³»åˆ—æ•°æ®åº“ä½¿ç”¨åºåˆ—å¯¹è±¡ç”Ÿæˆä¸»é”®ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- åˆ›å»ºåºåˆ—</span>
<span class="hljs-keyword">CREATE</span> SEQUENCE user_id_seq <span class="hljs-keyword">START</span> <span class="hljs-keyword">WITH</span> <span class="hljs-number">1</span> INCREMENT <span class="hljs-keyword">BY</span> <span class="hljs-number">1</span>;

<span class="hljs-comment">-- åˆ›å»ºè¡¨ï¼ˆä¸ä½¿ç”¨AUTO_INCREMENTï¼‰</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> <span class="hljs-keyword">user</span> (
    id <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">DEFAULT</span> nextval(<span class="hljs-string">'user_id_seq'</span>) <span class="hljs-keyword">PRIMARY</span> KEY,
    name <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">100</span>)
);

<span class="hljs-comment">-- æ’å…¥æ–¹å¼1ï¼šä½¿ç”¨é»˜è®¤å€¼</span>
<span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> <span class="hljs-keyword">user</span> (name) <span class="hljs-keyword">VALUES</span> (<span class="hljs-string">'å¼ ä¸‰'</span>);

<span class="hljs-comment">-- æ’å…¥æ–¹å¼2ï¼šæ˜¾å¼è°ƒç”¨åºåˆ—</span>
<span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> <span class="hljs-keyword">user</span> (id, name) <span class="hljs-keyword">VALUES</span> (nextval(<span class="hljs-string">'user_id_seq'</span>), <span class="hljs-string">'æå››'</span>);
</code></pre>
<p><strong>ç‰¹ç‚¹ï¼š</strong></p>
<ul>
<li>åºåˆ—æ˜¯ç‹¬ç«‹çš„æ•°æ®åº“å¯¹è±¡ï¼Œä¸è¡¨åˆ†ç¦»</li>
<li>éœ€è¦æ˜¾å¼è°ƒç”¨ <code>nextval()</code> å‡½æ•°è·å–ä¸‹ä¸€ä¸ªå€¼</li>
<li>æ”¯æŒæ›´çµæ´»çš„é…ç½®ï¼ˆèµ·å§‹å€¼ã€æ­¥é•¿ã€ç¼“å­˜ç­‰ï¼‰</li>
<li>å¯ä»¥è¢«å¤šä¸ªè¡¨å…±äº«</li>
</ul>
<h4 data-id="heading-4">MyBatis-Plus å…¼å®¹æ€§é—®é¢˜</h4>
<p>MyBatis-Plus çš„ <code>IdType.AUTO</code> è®¾è®¡ä¸»è¦é’ˆå¯¹ MySQL çš„è‡ªå¢æœºåˆ¶ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// MyBatis-Plus æœŸæœ›çš„è¡Œä¸º</span>
<span class="hljs-meta">@TableId(type = IdType.AUTO)</span>
<span class="hljs-keyword">private</span> Long id;

<span class="hljs-comment">// ç”Ÿæˆçš„ INSERT SQLï¼ˆMySQLï¼‰</span>
INSERT INTO <span class="hljs-title function_">user</span> <span class="hljs-params">(name)</span> VALUES (?)
<span class="hljs-comment">// MySQL è‡ªåŠ¨å¡«å…… id å­—æ®µ</span>

<span class="hljs-comment">// åœ¨ PostgreSQL/OpenGauss ä¸­çš„é—®é¢˜</span>
INSERT INTO <span class="hljs-title function_">user</span> <span class="hljs-params">(name)</span> VALUES (?)
<span class="hljs-comment">// æ²¡æœ‰è°ƒç”¨ nextval()ï¼Œid å­—æ®µä¸º NULLï¼Œè¿åä¸»é”®çº¦æŸ</span>
</code></pre>
<p><strong>å¤±æ•ˆåŸå› ï¼š</strong></p>
<ol>
<li><strong>SQL ç”Ÿæˆå·®å¼‚</strong>ï¼šMyBatis-Plus ç”Ÿæˆçš„ INSERT è¯­å¥ä¸åŒ…å«åºåˆ—è°ƒç”¨</li>
<li><strong>é©±åŠ¨æ”¯æŒä¸è¶³</strong>ï¼šOpenGauss é©±åŠ¨æ— æ³•è‡ªåŠ¨è¯†åˆ«å¹¶è°ƒç”¨å¯¹åº”çš„åºåˆ—</li>
<li><strong>æ¡†æ¶å‡è®¾</strong>ï¼šMyBatis-Plus å‡è®¾æ•°æ®åº“ä¼šè‡ªåŠ¨å¤„ç†ä¸»é”®ç”Ÿæˆï¼Œä½† PostgreSQL éœ€è¦æ˜¾å¼æ“ä½œ</li>
</ol>
<p>ä¸ºè§£å†³è¿™ä¸ªé—®é¢˜ï¼Œé¡¹ç›®é‡‡ç”¨äº†è‡ªå®šä¹‰ MyBatis æ‹¦æˆªå™¨çš„æ–¹æ¡ˆï¼Œåœ¨ INSERT æ“ä½œå‰è‡ªåŠ¨ä»æ•°æ®åº“åºåˆ—è·å– ID å€¼ã€‚</p>
<h2 data-id="heading-5">äºŒã€MyBatis æ‹¦æˆªå™¨æœºåˆ¶</h2>
<h3 data-id="heading-6">æ‹¦æˆªå™¨å·¥ä½œåŸç†</h3>
<p>MyBatis æä¾›äº†æ’ä»¶ï¼ˆPluginï¼‰æœºåˆ¶ï¼Œå…è®¸åœ¨ SQL æ‰§è¡Œçš„å…³é”®èŠ‚ç‚¹è¿›è¡Œæ‹¦æˆªå’Œå¢å¼ºã€‚æ‹¦æˆªå™¨åŸºäº JDK åŠ¨æ€ä»£ç†å®ç°ï¼Œå¯ä»¥æ‹¦æˆªä»¥ä¸‹å››ç§å¯¹è±¡çš„æ–¹æ³•ï¼š</p>






























<table><thead><tr><th>æ‹¦æˆªå¯¹è±¡</th><th>ä½œç”¨</th><th>å¸¸è§æ‹¦æˆªæ–¹æ³•</th></tr></thead><tbody><tr><td>Executor</td><td>SQL æ‰§è¡Œå™¨</td><td>update, query, commit, rollback</td></tr><tr><td>StatementHandler</td><td>SQL è¯­å¥å¤„ç†å™¨</td><td>prepare, parameterize, batch, update, query</td></tr><tr><td>ParameterHandler</td><td>å‚æ•°å¤„ç†å™¨</td><td>getParameterObject, setParameters</td></tr><tr><td>ResultSetHandler</td><td>ç»“æœé›†å¤„ç†å™¨</td><td>handleResultSets, handleOutputParameters</td></tr></tbody></table>
<h3 data-id="heading-7">æ‹¦æˆªå™¨æ‰§è¡Œæµç¨‹</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant App as Application
    participant MyBatis
    participant Interceptor
    participant Executor
    participant DB as Database
    
    App-&gt;&gt;MyBatis: Execute Mapper method
    MyBatis-&gt;&gt;Interceptor: Call intercept()
    Interceptor-&gt;&gt;Interceptor: Pre-processing
    Interceptor-&gt;&gt;Executor: invocation.proceed()
    Executor-&gt;&gt;DB: Execute SQL
    DB--&gt;&gt;Executor: Return result
    Executor--&gt;&gt;Interceptor: Return result
    Interceptor-&gt;&gt;Interceptor: Post-processing
    Interceptor--&gt;&gt;MyBatis: Return final result
    MyBatis--&gt;&gt;App: Return result
</code></pre>
<h3 data-id="heading-8">æ‹¦æˆªå™¨æ¥å£å®šä¹‰</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">Interceptor</span> {
    <span class="hljs-comment">// æ‹¦æˆªç›®æ ‡æ–¹æ³•çš„æ‰§è¡Œ</span>
    Object <span class="hljs-title function_">intercept</span><span class="hljs-params">(Invocation invocation)</span> <span class="hljs-keyword">throws</span> Throwable;
    
    <span class="hljs-comment">// ä¸ºç›®æ ‡å¯¹è±¡åˆ›å»ºä»£ç†</span>
    Object <span class="hljs-title function_">plugin</span><span class="hljs-params">(Object target)</span>;
    
    <span class="hljs-comment">// è®¾ç½®æ‹¦æˆªå™¨å±æ€§</span>
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">setProperties</span><span class="hljs-params">(Properties properties)</span>;
}
</code></pre>
<h2 data-id="heading-9">ä¸‰ã€ID ä¸»é”®ç”Ÿæˆæ‹¦æˆªå™¨å®ç°</h2>
<h3 data-id="heading-10">æ•´ä½“æ¶æ„</h3>
<p>é¡¹ç›®ä¸­çš„ ID ä¸»é”®ç”Ÿæˆæ–¹æ¡ˆç”±ä¸‰ä¸ªæ ¸å¿ƒç»„ä»¶æ„æˆï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">flowchart TD
    A[INSERT Operation] --&gt; B[AutoIdGeneratorInterceptor]
    B --&gt; C{Check @TableId}
    C --&gt;|type=AUTO| D{ID is null?}
    C --&gt;|Other types| E[Skip processing]
    D --&gt;|Yes| F[PostgresSequenceGenerator]
    D --&gt;|No| E
    F --&gt; G[Get table name]
    G --&gt; H[Build sequence name]
    H --&gt; I[Execute SELECT nextval]
    I --&gt; J[Set ID field value]
    J --&gt; K[Continue INSERT]
    E --&gt; K
</code></pre>
<h3 data-id="heading-11">ç»„ä»¶ 1ï¼šAutoIdGeneratorInterceptor</h3>
<p><strong>æ ¸å¿ƒèŒè´£ï¼š</strong></p>
<ul>
<li>æ‹¦æˆªæ‰€æœ‰ INSERT æ“ä½œ</li>
<li>æ£€æŸ¥å®ä½“ç±»çš„ <code>@TableId</code> æ³¨è§£é…ç½®</li>
<li>ä¸º <code>IdType.AUTO</code> ç±»å‹ä¸”å€¼ä¸º null çš„å­—æ®µç”Ÿæˆ ID</li>
</ul>
<p><strong>æ ¸å¿ƒå®ç°ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Component</span>
<span class="hljs-meta">@Intercepts({
    @Signature(type = Executor.class, method = "update", args = {MappedStatement.class, Object.class})
})</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AutoIdGeneratorInterceptor</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Interceptor</span> {
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> Object <span class="hljs-title function_">intercept</span><span class="hljs-params">(Invocation invocation)</span> <span class="hljs-keyword">throws</span> Throwable {
        <span class="hljs-type">MappedStatement</span> <span class="hljs-variable">ms</span> <span class="hljs-operator">=</span> (MappedStatement) invocation.getArgs()[<span class="hljs-number">0</span>];
        <span class="hljs-type">Object</span> <span class="hljs-variable">parameter</span> <span class="hljs-operator">=</span> invocation.getArgs()[<span class="hljs-number">1</span>];
        
        <span class="hljs-comment">// åªå¤„ç†INSERTæ“ä½œ</span>
        <span class="hljs-keyword">if</span> (SqlCommandType.INSERT.equals(ms.getSqlCommandType())) {
            <span class="hljs-comment">// åå°„æ£€æŸ¥@TableId(type=AUTO)å­—æ®µï¼Œå¦‚æœä¸ºnullè°ƒç”¨PostgresSequenceGeneratorçš„nextIdç”ŸæˆID</span>
            processEntity(parameter);
        }
        
        <span class="hljs-keyword">return</span> invocation.proceed();
    }
}
</code></pre>
<p><strong>å…³é”®æŠ€æœ¯ç‚¹ï¼š</strong></p>
<ol>
<li><strong>æ‹¦æˆª Executor.update æ–¹æ³•</strong>ï¼šINSERT/UPDATE/DELETE éƒ½ä¼šè°ƒç”¨æ­¤æ–¹æ³•ï¼Œé€šè¿‡ <code>SqlCommandType</code> åŒºåˆ†æ“ä½œç±»å‹</li>
<li><strong>åå°„è®¿é—®å­—æ®µ</strong>ï¼šä½¿ç”¨ <code>field.setAccessible(true)</code> è®¿é—®ç§æœ‰å­—æ®µ</li>
<li><strong>æ³¨è§£æ£€æŸ¥</strong>ï¼šåªå¤„ç† <code>@TableId(type = IdType.AUTO)</code> æ ‡æ³¨çš„å­—æ®µ</li>
<li><strong>ç©ºå€¼åˆ¤æ–­</strong>ï¼šä»…åœ¨ ID ä¸º null æ—¶ç”Ÿæˆï¼Œé¿å…è¦†ç›–å·²æœ‰å€¼</li>
</ol>
<h3 data-id="heading-12">ç»„ä»¶ 2ï¼šPostgresSequenceGenerator</h3>
<p><strong>æ ¸å¿ƒèŒè´£ï¼š</strong></p>
<ul>
<li>æ ¹æ®å®ä½“ç±»ç¡®å®šæ•°æ®åº“è¡¨å</li>
<li>æŒ‰çº¦å®šæ„é€ åºåˆ—åï¼ˆ<code>{table_name}_id_seq</code>ï¼‰</li>
<li>æ‰§è¡Œ SQL è·å–åºåˆ—çš„ä¸‹ä¸€ä¸ªå€¼</li>
</ul>
<p><strong>æ ¸å¿ƒå®ç°ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PostgresSequenceGenerator</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">IKeyGenerator</span> {
    
    <span class="hljs-keyword">public</span> Long <span class="hljs-title function_">nextId</span><span class="hljs-params">(Object entity)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">tableName</span> <span class="hljs-operator">=</span> getTableName(entity);
        <span class="hljs-type">String</span> <span class="hljs-variable">sequenceName</span> <span class="hljs-operator">=</span> tableName + <span class="hljs-string">"_id_seq"</span>;
        
        <span class="hljs-comment">// OpenGaussè¦æ±‚nextval()å‚æ•°ä¸ºå¸¸é‡ï¼Œä¸èƒ½ä½¿ç”¨PreparedStatement</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">sql</span> <span class="hljs-operator">=</span> <span class="hljs-string">"SELECT nextval('"</span> + sequenceName + <span class="hljs-string">"')"</span>;
        
        <span class="hljs-keyword">try</span> (<span class="hljs-type">Connection</span> <span class="hljs-variable">conn</span> <span class="hljs-operator">=</span> dataSource.getConnection();
             <span class="hljs-type">Statement</span> <span class="hljs-variable">stmt</span> <span class="hljs-operator">=</span> conn.createStatement();
             <span class="hljs-type">ResultSet</span> <span class="hljs-variable">rs</span> <span class="hljs-operator">=</span> stmt.executeQuery(sql)) {
            <span class="hljs-keyword">return</span> rs.next() ? rs.getLong(<span class="hljs-number">1</span>) : <span class="hljs-literal">null</span>;
        } <span class="hljs-keyword">catch</span> (Exception e) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">"Failed to generate ID from sequence"</span>, e);
        }
    }
}
</code></pre>
<p><strong>å…³é”®æŠ€æœ¯ç‚¹ï¼š</strong></p>
<ol>
<li><strong>è¡¨åè·å–ç­–ç•¥</strong>ï¼šä¼˜å…ˆä½¿ç”¨ <code>@TableName</code> æ³¨è§£ï¼Œå¦åˆ™æ ¹æ®ç±»åè½¬æ¢</li>
<li><strong>SQL æ³¨å…¥é˜²æŠ¤</strong>ï¼šåºåˆ—åå¿…é¡»åŒ¹é… <code>^[a-zA-Z0-9_]+$</code> æ­£åˆ™è¡¨è¾¾å¼</li>
<li><strong>OpenGauss å…¼å®¹æ€§</strong>ï¼šä½¿ç”¨ <code>Statement</code> è€Œé <code>PreparedStatement</code>ï¼Œå› ä¸º OpenGauss è¦æ±‚ <code>nextval()</code> å‚æ•°ä¸ºå¸¸é‡</li>
</ol>
<h4 data-id="heading-13">åºåˆ—æœºåˆ¶æ·±å…¥è§£æ</h4>
<p><strong>åºåˆ—çš„åˆ›å»ºä¸ç®¡ç†ï¼š</strong></p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- åˆ›å»ºåºåˆ—ï¼ˆOpenGaussï¼‰</span>
<span class="hljs-keyword">CREATE</span> SEQUENCE xxx_id_seq
    <span class="hljs-keyword">START</span> <span class="hljs-keyword">WITH</span> <span class="hljs-number">1</span>          <span class="hljs-comment">-- èµ·å§‹å€¼</span>
    INCREMENT <span class="hljs-keyword">BY</span> <span class="hljs-number">1</span>        <span class="hljs-comment">-- æ­¥é•¿</span>
    MINVALUE <span class="hljs-number">1</span>           <span class="hljs-comment">-- æœ€å°å€¼</span>
    MAXVALUE <span class="hljs-number">9223372036854775807</span>  <span class="hljs-comment">-- æœ€å¤§å€¼ï¼ˆBIGINTæœ€å¤§å€¼ï¼‰</span>
    CACHE <span class="hljs-number">1</span>              <span class="hljs-comment">-- ç¼“å­˜å¤§å°</span>
    <span class="hljs-keyword">NO</span> <span class="hljs-keyword">CYCLE</span>;            <span class="hljs-comment">-- ä¸å¾ªç¯</span>

<span class="hljs-comment">-- æŸ¥çœ‹åºåˆ—ä¿¡æ¯</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> information_schema.sequences 
<span class="hljs-keyword">WHERE</span> sequence_name <span class="hljs-operator">=</span> <span class="hljs-string">'xxx_id_seq'</span>;

<span class="hljs-comment">-- è·å–åºåˆ—å½“å‰å€¼ï¼ˆä¸æ¶ˆè€—ï¼‰</span>
<span class="hljs-keyword">SELECT</span> currval(<span class="hljs-string">'xxx_id_seq'</span>);

<span class="hljs-comment">-- è·å–åºåˆ—ä¸‹ä¸€ä¸ªå€¼ï¼ˆæ¶ˆè€—ä¸€ä¸ªå€¼ï¼‰</span>
<span class="hljs-keyword">SELECT</span> nextval(<span class="hljs-string">'xxx_id_seq'</span>);

<span class="hljs-comment">-- è®¾ç½®åºåˆ—å½“å‰å€¼</span>
<span class="hljs-keyword">SELECT</span> setval(<span class="hljs-string">'xxx_id_seq'</span>, <span class="hljs-number">1000</span>);
</code></pre>
<p><strong>åºåˆ— vs è‡ªå¢å­—æ®µå¯¹æ¯”ï¼š</strong></p>








































<table><thead><tr><th>ç‰¹æ€§</th><th>PostgreSQL åºåˆ—</th><th>MySQL è‡ªå¢</th></tr></thead><tbody><tr><td>ç‹¬ç«‹æ€§</td><td>ç‹¬ç«‹å¯¹è±¡ï¼Œå¯è¢«å¤šè¡¨å…±äº«</td><td>ç»‘å®šåˆ°ç‰¹å®šè¡¨çš„ç‰¹å®šåˆ—</td></tr><tr><td>çµæ´»æ€§</td><td>æ”¯æŒå¤æ‚é…ç½®ï¼ˆæ­¥é•¿ã€ç¼“å­˜ç­‰ï¼‰</td><td>é…ç½®é€‰é¡¹æœ‰é™</td></tr><tr><td>æ€§èƒ½</td><td>å¯é…ç½®ç¼“å­˜æå‡æ€§èƒ½</td><td>æ•°æ®åº“å¼•æ“ä¼˜åŒ–</td></tr><tr><td>äº‹åŠ¡å®‰å…¨</td><td>åºåˆ—å€¼ä¸ä¼šå› äº‹åŠ¡å›æ»šè€Œå›æ”¶</td><td>è‡ªå¢å€¼å¯èƒ½å› å›æ»šäº§ç”Ÿé—´éš™</td></tr><tr><td>è·¨è¡¨ä½¿ç”¨</td><td>ä¸€ä¸ªåºåˆ—å¯ä¾›å¤šä¸ªè¡¨ä½¿ç”¨</td><td>æ¯ä¸ªè¡¨ç‹¬ç«‹çš„è‡ªå¢è®¡æ•°å™¨</td></tr><tr><td>é‡ç½®æ“ä½œ</td><td>å¯ä»¥éšæ—¶é‡ç½®åºåˆ—å€¼</td><td>éœ€è¦ ALTER TABLE æ“ä½œ</td></tr></tbody></table>
<p><strong>OpenGauss ç‰¹æ®Šé™åˆ¶ï¼š</strong></p>
<p>OpenGauss å¯¹åºåˆ—æ“ä½œæœ‰ç‰¹æ®Šè¦æ±‚ï¼Œè¿™ä¹Ÿæ˜¯ MyBatis-Plus å…¼å®¹æ€§é—®é¢˜çš„æ ¹æºï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// âŒ é”™è¯¯ï¼šOpenGauss ä¸æ”¯æŒå‚æ•°åŒ–çš„ nextval()</span>
<span class="hljs-type">PreparedStatement</span> <span class="hljs-variable">ps</span> <span class="hljs-operator">=</span> conn.prepareStatement(<span class="hljs-string">"SELECT nextval(?)"</span>);
ps.setString(<span class="hljs-number">1</span>, <span class="hljs-string">"user_id_seq"</span>);

<span class="hljs-comment">// âœ… æ­£ç¡®ï¼šå¿…é¡»ä½¿ç”¨å­—ç¬¦ä¸²å¸¸é‡</span>
<span class="hljs-type">Statement</span> <span class="hljs-variable">stmt</span> <span class="hljs-operator">=</span> conn.createStatement();
<span class="hljs-type">ResultSet</span> <span class="hljs-variable">rs</span> <span class="hljs-operator">=</span> stmt.executeQuery(<span class="hljs-string">"SELECT nextval('user_id_seq')"</span>);
</code></pre>
<p>è¿™ä¸ªé™åˆ¶è¦æ±‚æˆ‘ä»¬ï¼š</p>
<ul>
<li>å¿…é¡»åœ¨ SQL ä¸­ç¡¬ç¼–ç åºåˆ—å</li>
<li>éœ€è¦ä¸¥æ ¼éªŒè¯åºåˆ—åé˜²æ­¢ SQL æ³¨å…¥</li>
<li>æ— æ³•ä½¿ç”¨ MyBatis çš„å‚æ•°ç»‘å®šæœºåˆ¶</li>
</ul>
<h3 data-id="heading-14">ç»„ä»¶ 3ï¼šMybatisPlusConfig</h3>
<p><strong>æ ¸å¿ƒèŒè´£ï¼š</strong></p>
<ul>
<li>åœ¨ Spring å®¹å™¨åˆå§‹åŒ–åæ³¨å†Œæ‹¦æˆªå™¨</li>
<li>æ”¯æŒå¤šæ•°æ®æºåœºæ™¯ï¼Œä¸ºæ¯ä¸ª <code>SqlSessionFactory</code> æ³¨å†Œæ‹¦æˆªå™¨</li>
</ul>
<p><strong>æ ¸å¿ƒå®ç°ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Configuration</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MybatisPlusConfig</span> {
    
    <span class="hljs-meta">@PostConstruct</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">addInterceptor</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// ä¸ºæ‰€æœ‰SqlSessionFactoryæ³¨å†Œæ‹¦æˆªå™¨</span>
        <span class="hljs-keyword">for</span> (SqlSessionFactory factory : sqlSessionFactoryList) {
            <span class="hljs-type">Configuration</span> <span class="hljs-variable">config</span> <span class="hljs-operator">=</span> factory.getConfiguration();
            <span class="hljs-keyword">if</span> (!config.getInterceptors().contains(autoIdGeneratorInterceptor)) {
                config.addInterceptor(autoIdGeneratorInterceptor);
            }
        }
    }
}
</code></pre>
<p><strong>å…³é”®æŠ€æœ¯ç‚¹ï¼š</strong></p>
<ol>
<li><strong>@PostConstruct æ—¶æœº</strong>ï¼šç¡®ä¿åœ¨ Spring å®¹å™¨åˆå§‹åŒ–åã€åº”ç”¨å¯åŠ¨å‰æ³¨å†Œæ‹¦æˆªå™¨</li>
<li><strong>å¤šæ•°æ®æºæ”¯æŒ</strong>ï¼šéå†æ‰€æœ‰ <code>SqlSessionFactory</code> å®ä¾‹ï¼Œé€ä¸€æ³¨å†Œ</li>
<li><strong>é‡å¤æ³¨å†Œæ£€æŸ¥</strong>ï¼šé¿å…åŒä¸€ä¸ªæ‹¦æˆªå™¨è¢«é‡å¤æ³¨å†Œ</li>
<li><strong>æ³¨å…¥ List</strong>ï¼šSpring ä¼šè‡ªåŠ¨æ³¨å…¥æ‰€æœ‰ <code>SqlSessionFactory</code> ç±»å‹çš„ Bean</li>
</ol>
<h2 data-id="heading-15">å››ã€ä½¿ç”¨æ–¹å¼</h2>
<h3 data-id="heading-16">å®ä½“ç±»é…ç½®</h3>
<p>ä½¿ç”¨æ ‡å‡†çš„ MyBatis-Plus æ³¨è§£å³å¯ï¼Œæ— éœ€é¢å¤–é…ç½®ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Data</span>
<span class="hljs-meta">@TableName("xxx")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">xxx</span> {
    
    <span class="hljs-meta">@TableId(type = IdType.AUTO)</span>
    <span class="hljs-keyword">private</span> Long id;
}
</code></pre>
<h3 data-id="heading-17">æ•°æ®åº“åºåˆ—åˆ›å»º</h3>
<p>ç¡®ä¿æ•°æ®åº“ä¸­å­˜åœ¨å¯¹åº”çš„åºåˆ—ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- åˆ›å»ºåºåˆ—ï¼ˆå¦‚æœä¸å­˜åœ¨ï¼‰</span>
<span class="hljs-keyword">CREATE</span> SEQUENCE IF <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">EXISTS</span> xxx_id_seq
    <span class="hljs-keyword">START</span> <span class="hljs-keyword">WITH</span> <span class="hljs-number">1</span>
    INCREMENT <span class="hljs-keyword">BY</span> <span class="hljs-number">1</span>
    <span class="hljs-keyword">NO</span> MINVALUE
    <span class="hljs-keyword">NO</span> MAXVALUE
    CACHE <span class="hljs-number">1</span>;

<span class="hljs-comment">-- è®¾ç½®åºåˆ—çš„å½“å‰å€¼ï¼ˆå¯é€‰ï¼‰</span>
<span class="hljs-keyword">SELECT</span> setval(<span class="hljs-string">'xxx_id_seq'</span>, <span class="hljs-number">1000</span>, <span class="hljs-literal">false</span>);
</code></pre>
<h3 data-id="heading-18">Mapper æ¥å£</h3>
<p>æ— éœ€ç‰¹æ®Šå¤„ç†ï¼Œä½¿ç”¨æ ‡å‡†çš„ MyBatis-Plus æ–¹æ³•ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Mapper</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">xxxMapper</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">BaseMapper</span>&lt;xxx&gt; {
    <span class="hljs-comment">// ç»§æ‰¿BaseMapperå³å¯ï¼Œæ— éœ€é¢å¤–é…ç½®</span>
}
</code></pre>
<h3 data-id="heading-19">Service å±‚è°ƒç”¨</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">addCategory</span><span class="hljs-params">(String categoryName)</span> {
    <span class="hljs-type">xxx</span> <span class="hljs-variable">category</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">xxx</span>();
    category.setCategoryName(categoryName);
    <span class="hljs-comment">// æ— éœ€æ‰‹åŠ¨è®¾ç½®IDï¼Œæ‹¦æˆªå™¨ä¼šè‡ªåŠ¨ç”Ÿæˆ</span>
    
    categoryMapper.insert(category);
    <span class="hljs-comment">// æ’å…¥åï¼Œcategory.getId() å·²ç»æœ‰å€¼</span>
}
</code></pre>
<h2 data-id="heading-20">äº”ã€æŠ€æœ¯æ–¹æ¡ˆå¯¹æ¯”</h2>
<h3 data-id="heading-21">ä¸»é”®ç”Ÿæˆæ–¹æ¡ˆå¯¹æ¯”</h3>






















































<table><thead><tr><th>æ–¹æ¡ˆ</th><th>å®ç°æ–¹å¼</th><th>ä¼˜åŠ¿</th><th>åŠ£åŠ¿</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>æ•°æ®åº“è‡ªå¢</td><td>AUTO_INCREMENT</td><td>ç®€å•ï¼Œæ€§èƒ½å¥½</td><td>åˆ†å¸ƒå¼é—®é¢˜ï¼Œè¿ç§»å›°éš¾</td><td>å•æœºMySQLåº”ç”¨</td></tr><tr><td>MyBatis-Plus AUTO</td><td>@TableId(type=AUTO)</td><td>é…ç½®ç®€å•ï¼Œæ¡†æ¶æ”¯æŒ</td><td>æ•°æ®åº“å…¼å®¹æ€§é—®é¢˜</td><td>æ ‡å‡†MySQL/PostgreSQL</td></tr><tr><td>è‡ªå®šä¹‰æ‹¦æˆªå™¨</td><td>Interceptor + Sequence</td><td>å®Œå…¨æ§åˆ¶ï¼Œå…¼å®¹æ€§å¥½</td><td>å®ç°å¤æ‚ï¼Œéœ€ç»´æŠ¤</td><td>ç‰¹æ®Šæ•°æ®åº“ã€å¤æ‚è§„åˆ™</td></tr><tr><td>UUID</td><td>UUID.randomUUID()</td><td>å…¨å±€å”¯ä¸€ï¼Œæ— ä¾èµ–</td><td>å­˜å‚¨ç©ºé—´å¤§ï¼Œæ— åº</td><td>åˆ†å¸ƒå¼ç³»ç»Ÿ</td></tr><tr><td>é›ªèŠ±ç®—æ³•</td><td>Snowflake</td><td>é«˜æ€§èƒ½ï¼Œè¶‹åŠ¿é€’å¢</td><td>ä¾èµ–æ—¶é’Ÿï¼Œé…ç½®å¤æ‚</td><td>é«˜å¹¶å‘åˆ†å¸ƒå¼ç³»ç»Ÿ</td></tr><tr><td>Redisè‡ªå¢</td><td>INCRå‘½ä»¤</td><td>é«˜æ€§èƒ½ï¼Œé›†ä¸­ç®¡ç†</td><td>ä¾èµ–Redisï¼Œå•ç‚¹é—®é¢˜</td><td>ä¸­å°è§„æ¨¡åˆ†å¸ƒå¼</td></tr></tbody></table>
<h3 data-id="heading-22">æ‹¦æˆªå™¨æ–¹æ¡ˆ vs MyBatis-Plus åŸç”Ÿæ–¹æ¡ˆ</h3>








































<table><thead><tr><th>å¯¹æ¯”ç»´åº¦</th><th>è‡ªå®šä¹‰æ‹¦æˆªå™¨</th><th>MyBatis-Plus åŸç”Ÿ</th></tr></thead><tbody><tr><td>æ•°æ®åº“å…¼å®¹æ€§</td><td>âœ… æ”¯æŒ OpenGauss ç­‰é­”æ”¹æ•°æ®åº“</td><td>âš ï¸ éƒ¨åˆ†æ•°æ®åº“ä¸æ”¯æŒ</td></tr><tr><td>å®ç°å¤æ‚åº¦</td><td>âš ï¸ éœ€è¦ç¼–å†™æ‹¦æˆªå™¨ä»£ç </td><td>âœ… é…ç½®å³å¯ä½¿ç”¨</td></tr><tr><td>çµæ´»æ€§</td><td>âœ… å¯è‡ªå®šä¹‰ç”Ÿæˆé€»è¾‘</td><td>âŒ ä¾èµ–æ¡†æ¶å®ç°</td></tr><tr><td>æ€§èƒ½å¼€é”€</td><td>âš ï¸ æ¯æ¬¡INSERTé¢å¤–æŸ¥è¯¢åºåˆ—</td><td>âœ… æ•°æ®åº“åŸç”Ÿæ”¯æŒ</td></tr><tr><td>ç»´æŠ¤æˆæœ¬</td><td>âš ï¸ éœ€è¦ç»´æŠ¤æ‹¦æˆªå™¨ä»£ç </td><td>âœ… æ¡†æ¶ç»Ÿä¸€ç»´æŠ¤</td></tr><tr><td>è°ƒè¯•éš¾åº¦</td><td>âš ï¸ éœ€è¦ç†è§£æ‹¦æˆªå™¨æœºåˆ¶</td><td>âœ… é—®é¢˜è¾ƒå°‘</td></tr></tbody></table>
<h2 data-id="heading-23">å…­ã€æ³¨æ„äº‹é¡¹ä¸æœ€ä½³å®è·µ</h2>
<h3 data-id="heading-24">1. SQL æ³¨å…¥é˜²æŠ¤</h3>
<p>åºåˆ—åå¿…é¡»è¿›è¡Œä¸¥æ ¼éªŒè¯ï¼š<code>sequenceName.matches("^[a-zA-Z0-9_]+$")</code>ï¼Œé¿å…ç›´æ¥æ‹¼æ¥ç”¨æˆ·è¾“å…¥ã€‚</p>
<h3 data-id="heading-25">2. æ€§èƒ½è€ƒè™‘</h3>
<p>æ¯æ¬¡ INSERT éƒ½ä¼šé¢å¤–æ‰§è¡Œä¸€æ¬¡åºåˆ—æŸ¥è¯¢ï¼Œé«˜å¹¶å‘åœºæ™¯éœ€è¦ï¼š</p>
<ul>
<li>ä½¿ç”¨é«˜æ€§èƒ½è¿æ¥æ± ï¼ˆHikariCPï¼‰</li>
<li>è€ƒè™‘æ‰¹é‡è·å–åºåˆ—å€¼å¹¶ç¼“å­˜</li>
<li>ç›‘æ§åºåˆ—æŸ¥è¯¢çš„å“åº”æ—¶é—´</li>
</ul>
<h3 data-id="heading-26">3. äº‹åŠ¡ä¸€è‡´æ€§</h3>
<p>åºåˆ—ç”Ÿæˆåœ¨ INSERT äº‹åŠ¡å¤–æ‰§è¡Œï¼Œäº‹åŠ¡å›æ»šæ—¶åºåˆ—å€¼ä¼šè¢«æ¶ˆè€—ï¼Œå¯¼è‡´åºåˆ—ä¸è¿ç»­ã€‚è¿™æ˜¯åºåˆ—æœºåˆ¶çš„æ­£å¸¸è¡Œä¸ºï¼Œä¸å½±å“æ•°æ®ä¸€è‡´æ€§ã€‚</p>
<h3 data-id="heading-27">4. å¤šæ•°æ®æºåœºæ™¯</h3>
<p>æ‹¦æˆªå™¨ä¼šè‡ªåŠ¨ä¸ºæ‰€æœ‰ SqlSessionFactory æ³¨å†Œï¼Œéœ€ç¡®ä¿æ¯ä¸ªæ•°æ®æºçš„è¡¨éƒ½æœ‰å¯¹åº”çš„åºåˆ—ã€‚</p>
<h3 data-id="heading-28">5. åºåˆ—å‘½åçº¦å®š</h3>
<p>ç»Ÿä¸€ä½¿ç”¨ <code>{table_name}_id_seq</code> æ ¼å¼ï¼Œå¦‚ <code>xxx_id_seq</code>ã€‚</p>
<h2 data-id="heading-29">ä¸ƒã€å¸¸è§é—®é¢˜æ’æŸ¥</h2>
<h3 data-id="heading-30">é—®é¢˜ 1ï¼šID ä»ç„¶ä¸º NULL</h3>
<p><strong>å¯èƒ½åŸå› ï¼š</strong></p>
<ol>
<li>æ‹¦æˆªå™¨æœªæ­£ç¡®æ³¨å†Œ</li>
<li>å®ä½“ç±»æ³¨è§£é…ç½®é”™è¯¯</li>
<li>æ•°æ®åº“åºåˆ—ä¸å­˜åœ¨</li>
</ol>
<p><strong>æ’æŸ¥æ­¥éª¤ï¼š</strong></p>
<ol>
<li>æ£€æŸ¥æ‹¦æˆªå™¨æ˜¯å¦æ³¨å†Œï¼šæŸ¥çœ‹ Configuration.getInterceptors() åˆ—è¡¨</li>
<li>æ£€æŸ¥å®ä½“ç±»æ³¨è§£ï¼šç¡®ä¿ <code>@TableId(type = IdType.AUTO)</code></li>
<li>æ£€æŸ¥æ•°æ®åº“åºåˆ—ï¼š<code>SELECT * FROM information_schema.sequences WHERE sequence_name = 'table_id_seq'</code></li>
</ol>
<h3 data-id="heading-31">é—®é¢˜ 2ï¼šåºåˆ—ä¸å­˜åœ¨é”™è¯¯</h3>
<p><strong>é”™è¯¯ä¿¡æ¯ï¼š</strong></p>
<pre><code class="hljs language-vbnet" lang="vbnet"><span class="hljs-symbol">ERROR:</span> relation <span class="hljs-string">"xxx_id_seq"</span> does <span class="hljs-built_in">not</span> exist
</code></pre>
<p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong></p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- åˆ›å»ºç¼ºå¤±çš„åºåˆ—</span>
<span class="hljs-keyword">CREATE</span> SEQUENCE xxx_id_seq <span class="hljs-keyword">START</span> <span class="hljs-keyword">WITH</span> <span class="hljs-number">1</span>;

<span class="hljs-comment">-- æˆ–è€…æ‰¹é‡åˆ›å»ºæ‰€æœ‰è¡¨çš„åºåˆ—</span>
DO $$
<span class="hljs-keyword">DECLARE</span>
    r RECORD;
<span class="hljs-keyword">BEGIN</span>
    <span class="hljs-keyword">FOR</span> r <span class="hljs-keyword">IN</span> <span class="hljs-keyword">SELECT</span> tablename <span class="hljs-keyword">FROM</span> pg_tables <span class="hljs-keyword">WHERE</span> schemaname <span class="hljs-operator">=</span> <span class="hljs-string">'public'</span>
    LOOP
        <span class="hljs-keyword">EXECUTE</span> format(<span class="hljs-string">'CREATE SEQUENCE IF NOT EXISTS %I_id_seq'</span>, r.tablename);
    <span class="hljs-keyword">END</span> LOOP;
<span class="hljs-keyword">END</span> $$;
</code></pre>
<h3 data-id="heading-32">é—®é¢˜ 3ï¼šæ€§èƒ½ä¸‹é™</h3>
<p><strong>ç°è±¡ï¼š</strong> INSERT æ“ä½œå˜æ…¢</p>
<p><strong>åˆ†æï¼š</strong></p>
<ul>
<li>æ¯æ¬¡ INSERT é¢å¤–æ‰§è¡Œä¸€æ¬¡åºåˆ—æŸ¥è¯¢</li>
<li>æ•°æ®åº“è¿æ¥æ± é…ç½®ä¸å½“</li>
<li>åºåˆ—ç¼“å­˜è®¾ç½®è¿‡å°</li>
</ul>
<p><strong>ä¼˜åŒ–æ–¹æ¡ˆï¼š</strong></p>
<ol>
<li>å¢åŠ åºåˆ—ç¼“å­˜ï¼š<code>ALTER SEQUENCE table_id_seq CACHE 100</code></li>
<li>ä¼˜åŒ–è¿æ¥æ± é…ç½®ï¼šè°ƒæ•´ HikariCP çš„ maximum-pool-size å’Œ minimum-idle</li>
<li>è€ƒè™‘æ‰¹é‡è·å–åºåˆ—å€¼å¹¶ç¼“å­˜ï¼Œå‡å°‘æ•°æ®åº“äº¤äº’</li>
</ol>
<h2 data-id="heading-33">å…«ã€æ€»ç»“</h2>
<p>è‡ªå®šä¹‰ MyBatis æ‹¦æˆªå™¨å®ç°ä¸»é”®è‡ªåŠ¨ç”Ÿæˆæ˜¯ä¸€ç§çµæ´»ä¸”å¼ºå¤§çš„è§£å†³æ–¹æ¡ˆï¼Œç‰¹åˆ«é€‚ç”¨äºï¼š</p>
<ol>
<li><strong>æ•°æ®åº“å…¼å®¹æ€§é—®é¢˜</strong>ï¼šå¦‚ OpenGaussã€è¾¾æ¢¦ç­‰å›½äº§æ•°æ®åº“</li>
<li><strong>å¤æ‚ ID ç”Ÿæˆè§„åˆ™</strong>ï¼šéœ€è¦è‡ªå®šä¹‰ç”Ÿæˆé€»è¾‘çš„åœºæ™¯</li>
<li><strong>æ¡†æ¶é™åˆ¶</strong>ï¼šMyBatis-Plus åŸç”Ÿæ–¹æ¡ˆæ— æ³•æ»¡è¶³éœ€æ±‚</li>
</ol>
<p><strong>æ ¸å¿ƒä¼˜åŠ¿ï¼š</strong></p>
<ul>
<li>âœ… å®Œå…¨æ§åˆ¶ ID ç”Ÿæˆé€»è¾‘</li>
<li>âœ… è‰¯å¥½çš„æ•°æ®åº“å…¼å®¹æ€§</li>
<li>âœ… å¯¹ä¸šåŠ¡ä»£ç é€æ˜ï¼Œæ— ä¾µå…¥</li>
</ul>
<p><strong>éœ€è¦æ³¨æ„ï¼š</strong></p>
<ul>
<li>âš ï¸ å®ç°å’Œç»´æŠ¤æˆæœ¬è¾ƒé«˜</li>
<li>âš ï¸ æ€§èƒ½å¼€é”€éœ€è¦è¯„ä¼°</li>
<li>âš ï¸ éœ€è¦ç†è§£ MyBatis æ‹¦æˆªå™¨æœºåˆ¶</li>
</ul>
<p>é€šè¿‡åˆç†çš„è®¾è®¡å’Œå®ç°ï¼Œè‡ªå®šä¹‰æ‹¦æˆªå™¨å¯ä»¥æˆä¸ºè§£å†³ç‰¹å®šåœºæ™¯é—®é¢˜çš„æœ‰æ•ˆå·¥å…·ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è‡ªå»º React Native çƒ­ä¿®å¤ï¼Œè®©çº¿ä¸Šäº‹æ•… 30 ç§’â€œå½’é›¶â€]]></title>    <link>https://juejin.cn/post/7584787119273574427</link>    <guid>https://juejin.cn/post/7584787119273574427</guid>    <pubDate>2025-12-18T04:15:05.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7584787119273574427" data-draft-id="7584742635502354459" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è‡ªå»º React Native çƒ­ä¿®å¤ï¼Œè®©çº¿ä¸Šäº‹æ•… 30 ç§’â€œå½’é›¶â€"/> <meta itemprop="keywords" content="React Native"/> <meta itemprop="datePublished" content="2025-12-18T04:15:05.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ´çªæŠ€æœ¯"/> <meta itemprop="url" content="https://juejin.cn/user/2538113306470631"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è‡ªå»º React Native çƒ­ä¿®å¤ï¼Œè®©çº¿ä¸Šäº‹æ•… 30 ç§’â€œå½’é›¶â€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2538113306470631/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ´çªæŠ€æœ¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-18T04:15:05.000Z" title="Thu Dec 18 2025 04:15:05 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-18
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»28åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><hr/>
<blockquote>
<p>ä¸€å¥è¯å–ç‚¹
ä¸ç”¨å‘ç‰ˆã€ä¸ç”¨å®¡æ ¸ï¼Œ10 åˆ†é’ŸæŠŠé¦–é¡µå´©æºƒæ”¹å®Œï¼›è¿˜èƒ½ç°åº¦ + ä¸€é”®æ’¤å›ï¼Œè€æ¿å†ä¹Ÿä¸æ‹…å¿ƒçº¿ä¸Šäº‹æ•…ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-0">æ ¸å¿ƒæ‘˜è¦</h3>
<p>é¢å¯¹åŸç”Ÿåº”ç”¨å‘ç‰ˆå®¡æ ¸å‘¨æœŸé•¿ï¼ˆ1-7 å¤©ï¼‰ã€ç¬¬ä¸‰æ–¹çƒ­æ›´æ–°å·¥å…·ï¼ˆå¦‚ CodePushï¼‰å®šåˆ¶åŒ–ä¸è¶³ã€æ•°æ®ä¸é€æ˜ä¸”å›æ»šèƒ½åŠ›å¼±çš„ç—›ç‚¹ï¼Œæœ¬æ–‡æä¾›ä¸€å¥—å®Œæ•´çš„è‡ªå»º React Nativeï¼ˆRNï¼‰çƒ­ä¿®å¤è§£å†³æ–¹æ¡ˆã€‚æ ¸å¿ƒä»·å€¼åœ¨äºæ‘†è„±åº”ç”¨å¸‚åœºå®¡æ ¸æŸç¼šï¼Œå®ç°çº¿ä¸Šé—®é¢˜å¿«é€Ÿä¿®å¤ä¸é£é™©å¯æ§ï¼šé€šè¿‡æœåŠ¡ç«¯æ­å»ºç‰ˆæœ¬ç®¡ç†ï¼ˆMySQL+Redisï¼‰ã€èµ„æºå­˜å‚¨ï¼ˆé˜¿é‡Œäº‘ OSSï¼‰ã€æ¥å£æœåŠ¡ï¼ˆNode.js/Javaï¼‰ä¸å®‰å…¨éªŒè¯æ¨¡å—ï¼Œå®¢æˆ·ç«¯å®ç°ç‰ˆæœ¬æ£€æµ‹ã€ä¸‹è½½ç®¡ç†ã€æ™ºèƒ½å›æ»šä¸çŠ¶æ€ä¸ŠæŠ¥åŠŸèƒ½ï¼Œæ‰“é€š â€œè¡¥ä¸åˆ›å»º - ç°åº¦å‘å¸ƒ - å®¢æˆ·ç«¯æ›´æ–° - ç´§æ€¥æ’¤å›â€ å…¨é“¾è·¯ã€‚æ–¹æ¡ˆæ”¯æŒæŒ‰ â€œæŒ‡å®šç”¨æˆ·â€ ç²¾ç»†åŒ–ç°åº¦ç­–ç•¥ï¼Œæ•°æ®å…¨ç¨‹å¯ç›‘æ§ï¼›è½åœ°åå¯å®ç° 10 åˆ†é’Ÿå†…å®Œæˆè¡¥ä¸å‘å¸ƒã€30 ç§’å†…è§¦å‘å…¨å±€å›æ»šï¼ŒåŒæ—¶å…·å¤‡ç‰ˆæœ¬å¤‡ä»½ä¸è‡ªåŠ¨é™çº§èƒ½åŠ›ï¼Œå½»åº•è§£å†³çº¿ä¸Šäº‹æ•…å“åº”æ…¢ã€é£é™©ä¸å¯æ§çš„é—®é¢˜ï¼Œè®© RN å¼€å‘æ‹¥æœ‰æœåŠ¡ç«¯åŠ¨æ€åŒ–è¿­ä»£èƒ½åŠ›ã€‚</p>
<h3 data-id="heading-1">ä¸€ã€ä¸ºä»€ä¹ˆè¦è‡ªå»ºâ€œRN çƒ­ä¿®å¤â€</h3>
<ol>
<li>
<p><strong>åŸç”Ÿå‘ç‰ˆå‘¨æœŸå¤ªé•¿</strong>
åº”ç”¨å¸‚åœº å®¡æ ¸æœ€å¿« 1 å¤©ã€æœ€æ…¢ 7+ å¤©ï¼Œè‡´å‘½ BUG ç­‰ä¸èµ·ã€‚</p>
</li>
<li>
<p><strong>ç¬¬ä¸‰æ–¹çƒ­æ›´æ–°â€œä¸å¥½ç”¨â€</strong>
æˆ‘ä»¬æ›¾è¯•è¿‡ CodePushï¼ˆå«å›½å†…é•œåƒï¼‰ï¼Œè¸©å‘å¦‚ä¸‹ï¼š</p>





















<table><thead><tr><th>ç—›ç‚¹</th><th>å…·ä½“è¡¨ç°</th></tr></thead><tbody><tr><td>å®šåˆ¶åŒ–ä¸è¶³</td><td>æ— æ³•æŒ‰â€œç”¨æˆ·ç­‰çº§ + åœ°åŸŸ + è®¾å¤‡å‹å·â€ç»„åˆå‘è¡¥ä¸ï¼›ä¸šåŠ¡ä¾§æƒ³â€œVIP ç”¨æˆ·å…ˆæ›´â€åšä¸åˆ°ã€‚</td></tr><tr><td>æ•°æ®é»‘ç›’</td><td>æ›´æ–°æˆåŠŸç‡ã€å¤±è´¥åŸå› ã€å›æ»šç‡éœ€è‡ªå·±æ‰’æ—¥å¿—ï¼Œæ’æŸ¥é—®é¢˜é çŒœã€‚</td></tr><tr><td>ç­–ç•¥æ­»æ¿</td><td>ç°åº¦åªèƒ½æŒ‰â€œç™¾åˆ†æ¯”â€æ»šï¼Œä¸èƒ½â€œæŒ‡å®š UUID ç™½åå•â€æˆ–â€œéšæ—¶ä¸€é”®å…¨å›â€ã€‚</td></tr></tbody></table>
</li>
<li>
<p><strong>è€æ¿è¦çš„æ˜¯â€œéšæ—¶å›æ»šâ€ï¼Œä¸æ˜¯â€œéšæ—¶æ›´æ–°â€</strong>
CodePush è™½æ”¯æŒå›æ»šï¼Œä½†ç²’åº¦ç²—ï¼ˆåªèƒ½æ•´ç‰ˆæœ¬å›é€€ï¼‰ã€ç”Ÿæ•ˆæ…¢ï¼ˆCDN ç¼“å­˜+å®¢æˆ·ç«¯å®šæ—¶æ£€æµ‹ï¼‰ã€æ— æ³•æŒ‰ç”¨æˆ·ç»´åº¦å±€éƒ¨æ’¤é”€ï¼›ä¸€æ—¦å‡ºç°å¤§é¢ç§¯å´©æºƒï¼Œä»éœ€é‡æ–°æ‰“åŒ…ã€é‡æ–°åˆ†å‘ï¼Œè€—æ—¶æŒ‰å°æ—¶è®¡ã€‚</p>
</li>
</ol>
<p>åŸºäºä»¥ä¸ŠåŸå› ï¼Œæˆ‘ä»¬å†³å®š<strong>è‡ªå»ºçƒ­ä¿®å¤ä½“ç³»</strong>ï¼Œå®šä¸‹çš„ç›®æ ‡ä¸€å¥è¯ï¼š</p>
<blockquote>
<p>10 åˆ†é’Ÿå†…å‘è¡¥ä¸ï¼Œ30 ç§’å†…å¯æ’¤å›ï¼Œæ•°æ®å…¨æ¡åœ¨è‡ªå·±æ‰‹é‡Œï¼Œè®© RN æ‹¥æœ‰æœåŠ¡ç«¯åŠ¨æ€åŒ–èƒ½åŠ›ã€‚</p>
</blockquote>
<p>äºæ˜¯æˆ‘ä»¬æŠŠå¾®è½¯æ–¹æ¡ˆå…¨éƒ¨è‡ªç ”åŒ–ï¼šæ¥å£ã€ç°åº¦ã€æ’¤å›ã€ç»Ÿè®¡å…¨æ¡åœ¨è‡ªå·±æ‰‹é‡Œã€‚</p>
<hr/>
<h3 data-id="heading-2">äºŒã€æ ¸å¿ƒæ¶æ„è®¾è®¡</h3>
<h4 data-id="heading-3">1. æ•´ä½“æ¶æ„å›¾</h4>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4cd2de06b67544c5ab4583ccc04b8d23~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rSe56qd5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766636105&amp;x-signature=C67WUNOSm8Ot3C5wy6FwSJYFQqE%3D" alt="" loading="lazy"/></p>
<h4 data-id="heading-4">2. æœåŠ¡ç«¯æ ¸å¿ƒæ¨¡å—</h4>



































<table><thead><tr><th>æ¨¡å—</th><th>æŠ€æœ¯é€‰å‹</th><th>æ ¸å¿ƒåŠŸèƒ½</th></tr></thead><tbody><tr><td>ç‰ˆæœ¬ç®¡ç†</td><td>MySQL + Redis</td><td>å­˜å‚¨åŸç”Ÿç‰ˆæœ¬ä¸ RN ç‰ˆæœ¬æ˜ å°„å…³ç³»ã€æ›´æ–°ç­–ç•¥é…ç½®</td></tr><tr><td>èµ„æºå­˜å‚¨</td><td>é˜¿é‡Œäº‘ OSS / æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿ</td><td>å­˜å‚¨ JS Bundle å’Œé™æ€èµ„æºåŒ…ã€æä¾›å®‰å…¨ä¸‹è½½é“¾æ¥</td></tr><tr><td>æ¥å£æœåŠ¡</td><td>Node.js/Java + Express/SpringBoot</td><td>æä¾›ç‰ˆæœ¬æ£€æµ‹ã€ä¸‹è½½ã€çŠ¶æ€ä¸ŠæŠ¥æ¥å£</td></tr><tr><td>å®‰å…¨éªŒè¯</td><td>ç­¾åç®—æ³• + HTTPS</td><td>æ¥å£è¯·æ±‚æ ¡éªŒã€æ›´æ–°åŒ…å®Œæ•´æ€§æ ¡éªŒ</td></tr><tr><td>è¡¥ä¸æ’¤å›</td><td>MySQL + æ¶ˆæ¯é˜Ÿåˆ—</td><td>ç®¡ç†æ’¤å›çŠ¶æ€ã€æ¨é€å›æ»šæŒ‡ä»¤ã€è·Ÿè¸ªæ’¤å›ç»“æœ</td></tr></tbody></table>
<h4 data-id="heading-5">3. å®¢æˆ·ç«¯æ ¸å¿ƒæ¨¡å—</h4>



































<table><thead><tr><th>æ¨¡å—</th><th>å®ç°å±‚</th><th>æ ¸å¿ƒåŠŸèƒ½</th></tr></thead><tbody><tr><td>ç‰ˆæœ¬æ£€æµ‹</td><td>åŸç”Ÿå±‚</td><td>å®šæ—¶ / å¯åŠ¨æ—¶è¯·æ±‚æœåŠ¡ç«¯ï¼Œåˆ¤æ–­æ˜¯å¦éœ€è¦æ›´æ–°æˆ–å›æ»š</td></tr><tr><td>ä¸‹è½½ç®¡ç†</td><td>åŸç”Ÿå±‚</td><td>MD5 æ ¡éªŒ</td></tr><tr><td>èµ„æºåŠ è½½</td><td>åŸç”Ÿå±‚</td><td>ä¼˜å…ˆåŠ è½½æ²™ç›’æ›´æ–°åŒ…ï¼Œå¤±è´¥é™çº§åˆ°åŸºç¡€åŒ…</td></tr><tr><td>çŠ¶æ€ä¸ŠæŠ¥</td><td>åŸç”Ÿ + RN</td><td>ä¸ŠæŠ¥ä¸‹è½½ / æ›´æ–° / å›æ»šçŠ¶æ€åˆ°æœåŠ¡ç«¯</td></tr><tr><td>å›æ»šæœºåˆ¶</td><td>åŸç”Ÿå±‚</td><td>è‡ªåŠ¨ / æ‰‹åŠ¨å›æ»šåˆ°ä¸Šä¸€ç‰ˆæœ¬</td></tr></tbody></table>
<h2 data-id="heading-6">ä¸‰ã€å‰ç½®å‡†å¤‡å·¥ä½œ</h2>
<h3 data-id="heading-7">3.1 åŸç”Ÿä¸ RN é›†æˆè§„èŒƒï¼ˆåŒç«¯é€šç”¨è¦æ±‚ï¼‰</h3>
<p>éœ€å®ŒæˆåŸç”Ÿï¼ˆAndroid/iOSï¼‰ä¸ RN çš„åŸºç¡€é›†æˆï¼Œå¹¶æ»¡è¶³ä»¥ä¸‹ç»Ÿä¸€è§„èŒƒï¼Œç¡®ä¿åŒç«¯ååŒé€‚é…çƒ­ä¿®å¤ï¼š</p>
<h4 data-id="heading-8">ï¼ˆ1ï¼‰åŸºç¡€é›†æˆéªŒè¯æ ‡å‡†</h4>
<ul>
<li>
<p><strong>åŠŸèƒ½éªŒè¯</strong>ï¼šRN é¡µé¢èƒ½æ­£å¸¸åµŒå…¥åŸç”Ÿå®¹å™¨ï¼ˆå¦‚ Android çš„ <code>ReactActivity</code>ã€iOS çš„ <code>RCTRootView</code>ï¼‰ï¼Œä¸”åŸç”Ÿä¸ RN èƒ½é€šè¿‡ <code>NativeModules</code> æ­£å¸¸é€šä¿¡ï¼ˆå¦‚åŸç”Ÿä¼ é€’ç”¨æˆ· Token åˆ° RNï¼ŒRN è°ƒç”¨åŸç”Ÿçš„å¼¹çª—åŠŸèƒ½ï¼‰ã€‚</p>
</li>
<li>
<p><strong>ç‰ˆæœ¬ä¾èµ–ç»Ÿä¸€</strong>ï¼šåŸç”Ÿé¡¹ç›®å¼•å…¥çš„ RN æ ¸å¿ƒä¾èµ–ç‰ˆæœ¬ï¼ˆå¦‚ Android <code>build.gradle</code> ä¸­çš„ <code>com.facebook.react:react-native</code>ã€iOS Podfile ä¸­çš„ <code>React-Core</code>ï¼‰ï¼Œéœ€ä¸ RN ä¸šåŠ¡é¡¹ç›®çš„ <code>package.json</code> ä¸­ <code>react-native</code> ç‰ˆæœ¬å®Œå…¨ä¸€è‡´ï¼ˆå¦‚ç»Ÿä¸€ä¸º <code>0.72.6</code>ï¼‰ï¼Œé¿å…å› ç‰ˆæœ¬å·®å¼‚å¯¼è‡´çš„å…¼å®¹æ€§é—®é¢˜ã€‚</p>
</li>
<li>
<p><strong>ç¼–è¯‘ç¯å¢ƒé€‚é…</strong>ï¼š</p>
<ul>
<li>Androidï¼šæœ€ä½æ”¯æŒ API 21ï¼ˆAndroid 5.0ï¼‰ï¼Œ<code>minSdkVersion</code> ä¸ä½äº 21ï¼Œ<code>compileSdkVersion</code> ä¸ <code>targetSdkVersion</code> å»ºè®®ä¸ RN æ¨èç‰ˆæœ¬å¯¹é½ï¼ˆå¦‚ 33ï¼‰ã€‚</li>
<li>iOSï¼šæœ€ä½æ”¯æŒ iOS 12.0ï¼ŒXcode ç‰ˆæœ¬ä¸ä½äº 14.0ï¼Œç¡®ä¿ <code>IPHONEOS_DEPLOYMENT_TARGET</code> è®¾ä¸º 12.0 åŠä»¥ä¸Šã€‚</li>
</ul>
</li>
</ul>
<h3 data-id="heading-9">3.2 Android ç«¯å‰ç½®å‡†å¤‡</h3>
<h4 data-id="heading-10">ï¼ˆ1ï¼‰åŸºç¡€èµ„æºç”Ÿæˆï¼ˆåŸç”Ÿé¢„ç½® RN èµ„æºï¼‰</h4>
<p>åŸºç¡€èµ„æºæ˜¯åŸç”Ÿé¡¹ç›®æ‰“åŒ…æ—¶é¢„ç½®çš„åˆå§‹ RN èµ„æºï¼ˆå« JS Bundle å’Œé™æ€èµ„æºï¼‰ï¼Œä½œä¸ºçƒ­ä¿®å¤çš„â€œåŸºå‡†èµ„æºâ€ï¼Œéœ€æŒ‰ä»¥ä¸‹æ­¥éª¤ç”Ÿæˆå¹¶å¯¼å…¥ï¼š</p>
<h5 data-id="heading-11">æ­¥éª¤ 1ï¼šé…ç½® RN æ‰“åŒ…ç¯å¢ƒ</h5>
<p>ç¡®ä¿æœ¬åœ°å·²å®‰è£… Node.jsï¼ˆå»ºè®® 16.x+ï¼‰å’Œ RN CLIï¼Œä¸” RN ä¸šåŠ¡é¡¹ç›®çš„ä¾èµ–å·²å®‰è£…ï¼ˆæ‰§è¡Œ <code>npm install</code>ï¼‰ã€‚</p>
<h5 data-id="heading-12">æ­¥éª¤ 2ï¼šæ‰§è¡Œæ‰“åŒ…å‘½ä»¤</h5>
<p>åœ¨ RN ä¸šåŠ¡é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ç”Ÿæˆ Android ç«¯çš„åŸºç¡€ JS Bundle å’Œé™æ€èµ„æºï¼š</p>
<pre><code class="hljs language-shell" lang="shell"><span class="hljs-meta prompt_">  # </span><span class="bash">ç”Ÿæˆ Android åŸºç¡€ JS Bundle å’Œé™æ€èµ„æº</span>
  npx react-native bundle \
  --platform android \      # æŒ‡å®šå¹³å°ä¸º Android
  --entry-file index.js \   # RN å…¥å£æ–‡ä»¶ï¼ˆé€šå¸¸ä¸º index.js æˆ– index.android.jsï¼‰
  --bundle-output ./android_base_bundle/index.android.bundle \  # è¾“å‡ºçš„ JS Bundle è·¯å¾„ï¼ˆæœ¬åœ°ä¸´æ—¶ç›®å½•ï¼‰
  --assets-dest ./android_base_bundle/res \  # è¾“å‡ºçš„é™æ€èµ„æºï¼ˆå›¾ç‰‡ã€å­—ä½“ç­‰ï¼‰è·¯å¾„
  --dev false \             # å…³é—­å¼€å‘æ¨¡å¼ï¼ˆç”Ÿæˆç”Ÿäº§ç¯å¢ƒçš„å‹ç¼© Bundleï¼Œä½“ç§¯æ›´å°ã€æ€§èƒ½æ›´å¥½ï¼‰
  --minify true \           # å¼€å¯ä»£ç å‹ç¼©ï¼ˆç§»é™¤æ³¨é‡Šã€æ··æ·†å˜é‡åï¼Œå‡å°‘ Bundle ä½“ç§¯ï¼‰
  --reset-cache             # é‡ç½® Metro ç¼“å­˜ï¼Œé¿å…æ—§ä»£ç æ®‹ç•™
</code></pre>
<h5 data-id="heading-13">æ­¥éª¤ 3ï¼šå°†èµ„æºå¯¼å…¥åŸç”Ÿé¡¹ç›®</h5>
<ol>
<li>åœ¨ Android åŸç”Ÿé¡¹ç›®çš„ <code>app/src/main</code> ç›®å½•ä¸‹ï¼Œæ–°å»º <code>assets/</code> ç›®å½•ï¼ˆè‹¥ <code>assets</code> ç›®å½•ä¸å­˜åœ¨ï¼Œéœ€æ‰‹åŠ¨åˆ›å»ºï¼‰ï¼›</li>
<li>å°†æ­¥éª¤ 2 ä¸­ç”Ÿæˆçš„ <code>index.android.bundle</code> æ–‡ä»¶ï¼Œå¤åˆ¶åˆ° <code>assets/</code> ç›®å½•ä¸‹ï¼›</li>
<li>å°†æ­¥éª¤ 2 ä¸­ç”Ÿæˆçš„ <code>res</code> ç›®å½•ä¸‹çš„æ‰€æœ‰å­ç›®å½•ï¼ˆå¦‚ <code>drawable-mdpi</code>ã€<code>raw</code>ï¼‰ï¼Œå®Œæ•´å¤åˆ¶åˆ° <code>assets/</code> ç›®å½•ä¸‹ï¼ˆç¡®ä¿é™æ€èµ„æºè·¯å¾„ä¸ RN ä»£ç ä¸­å¼•ç”¨è·¯å¾„ä¸€è‡´ï¼‰ã€‚</li>
</ol>
<h5 data-id="heading-14">æ­¥éª¤ 4ï¼šèµ„æºéªŒè¯</h5>
<p>å¯åŠ¨åŸç”Ÿå®¹å™¨åŠ è½½ RN é¡µé¢ï¼Œç¡®è®¤é¡µé¢èƒ½æ­£å¸¸æ¸²æŸ“ï¼Œä¸”å›¾ç‰‡ã€å­—ä½“ç­‰é™æ€èµ„æºèƒ½æ­£å¸¸æ˜¾ç¤ºã€‚</p>
<h4 data-id="heading-15">ï¼ˆ2ï¼‰ç›®å½•è§„åˆ’ï¼ˆèµ„æºå­˜å‚¨è·¯å¾„æ ‡å‡†åŒ–ï¼‰</h4>
<p>æ˜ç¡®â€œåŸç”Ÿé¢„ç½®èµ„æºâ€å’Œâ€œçƒ­æ›´æ–°èµ„æºâ€çš„å­˜å‚¨è·¯å¾„ï¼Œç¡®ä¿çƒ­ä¿®å¤æ¨¡å—èƒ½å‡†ç¡®è®¿é—®èµ„æºï¼Œä¸”ç¬¦åˆ Android æ–‡ä»¶æƒé™è§„èŒƒï¼š</p>
<h5 data-id="heading-16">æ ¸å¿ƒåŸåˆ™</h5>
<ul>
<li><strong>åŸç”Ÿé¢„ç½®èµ„æº</strong>ï¼šå­˜æ”¾åœ¨åŸç”Ÿé¡¹ç›®çš„â€œåªè¯»ç›®å½•â€ï¼ˆ<code>assets</code>ï¼‰ï¼Œæ‰“åŒ…åä¸å¯ä¿®æ”¹ï¼Œä½œä¸ºçƒ­ä¿®å¤åŸºå‡†ï¼›</li>
<li><strong>çƒ­æ›´æ–°èµ„æº</strong>ï¼šå­˜æ”¾åœ¨åº”ç”¨ç§æœ‰å¯è¯»å†™ç›®å½•ï¼Œä»…å½“å‰åº”ç”¨å¯è®¿é—®ï¼Œä¿éšœå®‰å…¨æ€§ã€‚</li>
</ul>
<h5 data-id="heading-17">è¯¦ç»†ç›®å½•è§„åˆ’</h5>









































<table><thead><tr><th>èµ„æºç±»å‹</th><th>å­˜å‚¨è·¯å¾„</th><th>æƒé™è¯´æ˜</th><th>ç”¨é€”</th></tr></thead><tbody><tr><td>åŸç”Ÿé¢„ç½®èµ„æº</td><td><code>app/src/main/assets/rn_bundle/base/</code></td><td>åªè¯»ï¼ˆæ‰“åŒ…ååµŒå…¥ APKï¼Œæ— æ³•ä¿®æ”¹ï¼‰</td><td>å­˜æ”¾åˆå§‹ JS Bundleï¼ˆ<code>index.android.bundle</code>ï¼‰å’Œåˆå§‹é™æ€èµ„æºï¼ˆ<code>res/</code>ï¼‰</td></tr><tr><td>çƒ­æ›´æ–°èµ„æº</td><td><code>/data/data/[åº”ç”¨åŒ…å]/rn_update/</code></td><td>åº”ç”¨ç§æœ‰å¯è¯»å†™ï¼ˆä»…å½“å‰åº”ç”¨å¯è®¿é—®ï¼Œå¸è½½åº”ç”¨åä¼šåˆ é™¤ï¼‰</td><td>å­˜æ”¾ä¸‹è½½çš„çƒ­ä¿®å¤è¡¥ä¸åŒ…ã€è§£å‹åçš„æ–° JS Bundle å’Œæ–°é™æ€èµ„æº</td></tr><tr><td>çƒ­æ›´æ–°å­ç›®å½•</td><td><code>/data/data/[åº”ç”¨åŒ…å]/rn_update/versions/</code></td><td>ç‰ˆæœ¬ç®¡ç†ç›®å½•ï¼ŒæŒ‰ RN ç‰ˆæœ¬å·åˆ›å»ºå­ç›®å½•ï¼ˆå¦‚ <code>rn_v1.0.1/</code>ï¼‰</td><td>æ¯ä¸ªç‰ˆæœ¬çš„èµ„æºå•ç‹¬å­˜æ”¾ï¼Œä¾¿äºå›æ»šï¼ˆå¦‚å›æ»šåˆ° <code>rn_v1.0.0</code> æ—¶ç›´æ¥è¯»å–å¯¹åº”ç›®å½•ï¼‰</td></tr><tr><td>çƒ­æ›´æ–°å½“å‰ç‰ˆæœ¬</td><td><code>/data/data/[åº”ç”¨åŒ…å]/rn_update/current/</code></td><td>è½¯é“¾æ¥æˆ–æ ‡è®°ç›®å½•ï¼ŒæŒ‡å‘å½“å‰ä½¿ç”¨çš„çƒ­æ›´æ–°ç‰ˆæœ¬ç›®å½•ï¼ˆå¦‚é“¾æ¥åˆ° <code>versions/rn_v1.0.1</code>ï¼‰</td><td>å®¢æˆ·ç«¯åŠ è½½ RN èµ„æºæ—¶ï¼Œç›´æ¥è¯»å–è¯¥ç›®å½•ï¼Œç®€åŒ–ç‰ˆæœ¬åˆ‡æ¢é€»è¾‘</td></tr><tr><td>ä¸´æ—¶ç›®å½•</td><td><code>/data/data/[åº”ç”¨åŒ…å]/rn_update/tmp/</code></td><td>å­˜æ”¾ä¸‹è½½ä¸­çš„è¡¥ä¸åŒ…ã€è§£å‹ä¸´æ—¶æ–‡ä»¶</td><td>é¿å…ä¸‹è½½ / è§£å‹è¿‡ç¨‹ä¸­å½±å“å½“å‰ä½¿ç”¨çš„èµ„æº</td></tr></tbody></table>
<h5 data-id="heading-18">æƒé™é…ç½®ä¸ç›®å½•åˆ›å»º</h5>
<ul>
<li>æ— éœ€é¢å¤–ç”³è¯·æƒé™ï¼š<code>/data/data/[åº”ç”¨åŒ…å]</code> æ˜¯åº”ç”¨ç§æœ‰ç›®å½•ï¼Œé»˜è®¤æœ‰è¯»å†™æƒé™ï¼›è‹¥ <code>targetSdkVersion â‰¥ 29</code>ï¼Œé¿å…ä½¿ç”¨å¤–éƒ¨å­˜å‚¨ï¼ˆå¦‚ <code>/sdcard/</code>ï¼‰å­˜æ”¾çƒ­æ›´æ–°èµ„æºï¼Œé˜²æ­¢æƒé™å’Œå®‰å…¨é£é™©ã€‚</li>
<li>åˆå§‹åŒ–ç›®å½•ï¼šåœ¨å®¢æˆ·ç«¯åˆå§‹åŒ–æ—¶æ‰§è¡Œ <code>mkdirs()</code> æ–¹æ³•ï¼Œåˆ›å»º <code>rn_update/</code> åŠå…¶å­ç›®å½•ï¼Œé¿å…ä¸‹è½½/è§£å‹æ—¶å› ç›®å½•ä¸å­˜åœ¨å¤±è´¥ã€‚</li>
</ul>
<h5 data-id="heading-19">ç›®å½•è®¿é—®ç¤ºä¾‹ä»£ç </h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// è·å–åº”ç”¨ç§æœ‰ç›®å½•çš„ rn_update è·¯å¾„</span>
<span class="hljs-keyword">public</span> String <span class="hljs-title function_">getRnUpdateDir</span><span class="hljs-params">()</span> {
    <span class="hljs-comment">// context ä¸º Application æˆ– Activity ä¸Šä¸‹æ–‡</span>
    <span class="hljs-type">File</span> <span class="hljs-variable">appDir</span> <span class="hljs-operator">=</span> context.getFilesDir(); <span class="hljs-comment">// å¯¹åº” /data/data/[åŒ…å]/files</span>
    <span class="hljs-type">File</span> <span class="hljs-variable">rnUpdateDir</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(appDir, <span class="hljs-string">"rn_update"</span>);
    <span class="hljs-keyword">if</span> (!rnUpdateDir.exists()) {
        rnUpdateDir.mkdirs(); <span class="hljs-comment">// è‹¥ç›®å½•ä¸å­˜åœ¨ï¼Œåˆ›å»ºç›®å½•</span>
    }
    <span class="hljs-keyword">return</span> rnUpdateDir.getAbsolutePath();
}

<span class="hljs-comment">// è·å–å½“å‰ä½¿ç”¨çš„ RN Bundle è·¯å¾„ï¼ˆä¼˜å…ˆçƒ­æ›´æ–°ï¼Œæ— åˆ™ç”¨åŸºç¡€èµ„æºï¼‰</span>
<span class="hljs-keyword">public</span> String <span class="hljs-title function_">getCurrentRnBundlePath</span><span class="hljs-params">()</span> {
    <span class="hljs-type">String</span> <span class="hljs-variable">hotUpdateBundlePath</span> <span class="hljs-operator">=</span> getRnUpdateDir() + <span class="hljs-string">"/current/index.android.bundle"</span>;
    <span class="hljs-type">File</span> <span class="hljs-variable">hotUpdateBundle</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(hotUpdateBundlePath);
    <span class="hljs-keyword">if</span> (hotUpdateBundle.exists()) {
        <span class="hljs-keyword">return</span> hotUpdateBundlePath;
    } <span class="hljs-keyword">else</span> {
        <span class="hljs-comment">// çƒ­æ›´æ–°èµ„æºä¸å­˜åœ¨ï¼Œè¿”å›åŸç”Ÿé¢„ç½®çš„åŸºç¡€ Bundle è·¯å¾„ï¼ˆassets ç›®å½•ä¸‹ï¼‰</span>
        <span class="hljs-keyword">return</span> <span class="hljs-string">"asset:///rn_bundle/base/index.android.bundle"</span>;
    }
}
</code></pre>
<h3 data-id="heading-20">3.3 iOS ç«¯å‰ç½®å‡†å¤‡</h3>
<h4 data-id="heading-21">ï¼ˆ1ï¼‰åŸºç¡€èµ„æºç”Ÿæˆï¼ˆåŸç”Ÿé¢„ç½® RN èµ„æºï¼‰</h4>
<p>åŸºç¡€èµ„æºæ˜¯åŸç”Ÿé¡¹ç›®æ‰“åŒ…æ—¶é¢„ç½®çš„åˆå§‹ RN èµ„æºï¼ˆå« JS Bundle å’Œé™æ€èµ„æºï¼‰ï¼Œä½œä¸ºçƒ­ä¿®å¤çš„â€œåŸºå‡†èµ„æºâ€ï¼Œéœ€æŒ‰ä»¥ä¸‹æ­¥éª¤ç”Ÿæˆå¹¶å¯¼å…¥ï¼š</p>
<h5 data-id="heading-22">æ­¥éª¤ 1ï¼šæ‰§è¡Œæ‰“åŒ…å‘½ä»¤</h5>
<p>åœ¨ RN ä¸šåŠ¡é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ç”Ÿæˆ iOS ç«¯çš„åŸºç¡€ JS Bundle å’Œé™æ€èµ„æºï¼š</p>
<pre><code class="hljs language-shell" lang="shell"><span class="hljs-meta prompt_">  # </span><span class="bash">ç”Ÿæˆ iOS åŸºç¡€ JS Bundle å’Œé™æ€èµ„æº</span>
  npx react-native bundle \
  --platform ios \          # æŒ‡å®šå¹³å°ä¸º iOS
  --entry-file index.js \   # RN å…¥å£æ–‡ä»¶
  --bundle-output ./ios_base_bundle/index.ios.bundle \  # è¾“å‡ºçš„ JS Bundle è·¯å¾„ï¼ˆæœ¬åœ°ä¸´æ—¶ç›®å½•ï¼‰
  --assets-dest ./ios_base_bundle/res \  # è¾“å‡ºçš„é™æ€èµ„æºè·¯å¾„
  --dev false \             # å…³é—­å¼€å‘æ¨¡å¼
  --minify true \           # å¼€å¯ä»£ç å‹ç¼©
  --reset-cache             # é‡ç½®ç¼“å­˜
</code></pre>
<h5 data-id="heading-23">æ­¥éª¤ 2ï¼šå°†èµ„æºå¯¼å…¥åŸç”Ÿé¡¹ç›®</h5>
<ol>
<li>æ‰“å¼€ iOS åŸç”Ÿé¡¹ç›®çš„ <code>.xcodeproj</code> æˆ– <code>.xcworkspace</code> æ–‡ä»¶ï¼ˆé€šè¿‡ Xcodeï¼‰ï¼›</li>
<li>åœ¨ Xcode å·¦ä¾§ â€œé¡¹ç›®å¯¼èˆªæ â€ ä¸­ï¼Œå³é”®ç‚¹å‡»é¡¹ç›®åç§°ï¼Œé€‰æ‹©ã€ŒAdd Files to "é¡¹ç›®å"ã€ï¼›</li>
<li>é€‰ä¸­æ­¥éª¤ 1 ä¸­ç”Ÿæˆçš„ <code>index.ios.bundle</code> æ–‡ä»¶å’Œ <code>res</code> ç›®å½•ï¼Œå‹¾é€‰ã€ŒCopy items if neededã€å’Œã€ŒCreate groupsã€ï¼Œç‚¹å‡»ã€ŒAddã€ï¼›</li>
<li>åœ¨é¡¹ç›®ä¸­æ–°å»º <code>rn_bundle/base</code> åˆ†ç»„ï¼ˆå¯é€‰ï¼Œç”¨äºå½’ç±»èµ„æºï¼‰ï¼Œå°†å¯¼å…¥çš„ <code>index.ios.bundle</code> å’Œ <code>res</code> ç›®å½•æ‹–å…¥è¯¥åˆ†ç»„ï¼Œç¡®ä¿èµ„æºåœ¨ã€ŒBuild Phases -&gt; Copy Bundle Resourcesã€ä¸­å·²å‹¾é€‰ï¼ˆè‹¥æœªå‹¾é€‰ï¼Œéœ€æ‰‹åŠ¨æ·»åŠ ï¼Œå¦åˆ™æ‰“åŒ…æ—¶èµ„æºä¸ä¼šè¢«åŒ…å«ï¼‰ã€‚</li>
</ol>
<h5 data-id="heading-24">æ­¥éª¤ 3ï¼šèµ„æºéªŒè¯</h5>
<p>é€šè¿‡ Xcode è¿è¡Œé¡¹ç›®ï¼Œç¡®è®¤ RN é¡µé¢æ— èµ„æºåŠ è½½é”™è¯¯ï¼ˆå¯æŸ¥çœ‹ Xcode æ§åˆ¶å°ï¼Œæ—  <code>Unable to resolve module</code> ç­‰æŠ¥é”™ï¼‰ã€‚</p>
<h4 data-id="heading-25">ï¼ˆ2ï¼‰ç›®å½•è§„åˆ’ï¼ˆèµ„æºå­˜å‚¨è·¯å¾„æ ‡å‡†åŒ–ï¼‰</h4>
<p>æ˜ç¡®â€œåŸç”Ÿé¢„ç½®èµ„æºâ€å’Œâ€œçƒ­æ›´æ–°èµ„æºâ€çš„å­˜å‚¨è·¯å¾„ï¼Œç¡®ä¿çƒ­ä¿®å¤æ¨¡å—èƒ½å‡†ç¡®è®¿é—®èµ„æºï¼Œä¸”ç¬¦åˆ iOS æ–‡ä»¶æƒé™è§„èŒƒï¼š</p>
<h5 data-id="heading-26">æ ¸å¿ƒåŸåˆ™</h5>
<ul>
<li><strong>åŸç”Ÿé¢„ç½®èµ„æº</strong>ï¼šå­˜æ”¾åœ¨ <code>Main Bundle</code>ï¼ˆåªè¯»ï¼‰ï¼Œåº”ç”¨å®‰è£…åä¸å¯ä¿®æ”¹ï¼Œä½œä¸ºçƒ­ä¿®å¤åŸºå‡†ï¼›</li>
<li><strong>çƒ­æ›´æ–°èµ„æº</strong>ï¼šå­˜æ”¾åœ¨ <code>Documents</code> ç›®å½•ï¼ˆåº”ç”¨ç§æœ‰å¯è¯»å†™ï¼‰ï¼Œä¿éšœå®‰å…¨æ€§ä¸å¯ä¿®æ”¹æ€§ã€‚</li>
</ul>
<h5 data-id="heading-27">è¯¦ç»†ç›®å½•è§„åˆ’</h5>









































<table><thead><tr><th>èµ„æºç±»å‹</th><th>å­˜å‚¨è·¯å¾„</th><th>æƒé™è¯´æ˜</th><th>ç”¨é€”</th></tr></thead><tbody><tr><td>åŸç”Ÿé¢„ç½®èµ„æº</td><td><code>Main Bundle/rn_bundle/base/</code>ï¼ˆå³ <code>[[NSBundle mainBundle] pathForResource:@"rn_bundle/base" ofType:nil]</code>ï¼‰</td><td>åªè¯»ï¼ˆåº”ç”¨å®‰è£…åä¸å¯ä¿®æ”¹ï¼‰</td><td>å­˜æ”¾åˆå§‹ JS Bundleï¼ˆ<code>index.ios.bundle</code>ï¼‰å’Œåˆå§‹é™æ€èµ„æºï¼ˆ<code>res/</code>ï¼‰</td></tr><tr><td>çƒ­æ›´æ–°èµ„æº</td><td><code>Documents/rn_update/</code>ï¼ˆå³ <code>[NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) firstObject]/rn_update/</code>ï¼‰</td><td>åº”ç”¨ç§æœ‰å¯è¯»å†™ï¼ˆä»…å½“å‰åº”ç”¨å¯è®¿é—®ï¼ŒiCloud å¯èƒ½è‡ªåŠ¨å¤‡ä»½ï¼Œéœ€é…ç½®æ’é™¤ï¼‰</td><td>å­˜æ”¾ä¸‹è½½çš„çƒ­ä¿®å¤è¡¥ä¸åŒ…ã€è§£å‹åçš„æ–° JS Bundle å’Œæ–°é™æ€èµ„æº</td></tr><tr><td>çƒ­æ›´æ–°å­ç›®å½•</td><td><code>Documents/rn_update/versions/</code></td><td>ç‰ˆæœ¬ç®¡ç†ç›®å½•ï¼ŒæŒ‰ RN ç‰ˆæœ¬å·åˆ›å»ºå­ç›®å½•ï¼ˆå¦‚ <code>rn_v1.0.1/</code>ï¼‰</td><td>æ¯ä¸ªç‰ˆæœ¬çš„èµ„æºå•ç‹¬å­˜æ”¾ï¼Œä¾¿äºå›æ»š</td></tr><tr><td>çƒ­æ›´æ–°å½“å‰ç‰ˆæœ¬</td><td><code>Documents/rn_update/current/</code></td><td>è½¯é“¾æ¥ç›®å½•ï¼ŒæŒ‡å‘å½“å‰ä½¿ç”¨çš„çƒ­æ›´æ–°ç‰ˆæœ¬ç›®å½•</td><td>å®¢æˆ·ç«¯åŠ è½½ RN èµ„æºæ—¶ï¼Œç›´æ¥è¯»å–è¯¥ç›®å½•ï¼Œç®€åŒ–ç‰ˆæœ¬åˆ‡æ¢é€»è¾‘</td></tr><tr><td>ä¸´æ—¶ç›®å½•</td><td><code>Documents/rn_update/tmp/</code></td><td>å­˜æ”¾ä¸‹è½½ä¸­çš„è¡¥ä¸åŒ…ã€è§£å‹ä¸´æ—¶æ–‡ä»¶</td><td>é¿å…ä¸‹è½½ / è§£å‹è¿‡ç¨‹ä¸­å½±å“å½“å‰ä½¿ç”¨çš„èµ„æº</td></tr></tbody></table>
<h5 data-id="heading-28">ç‰¹æ®Šé…ç½®</h5>
<ul>
<li>æ’é™¤ iCloud å¤‡ä»½ï¼šè‹¥ä¸å¸Œæœ›çƒ­æ›´æ–°èµ„æºè¢« iCloud å¤‡ä»½ï¼ˆé¿å…å ç”¨ç”¨æˆ· iCloud ç©ºé—´ï¼‰ï¼Œéœ€åœ¨ <code>Info.plist</code> ä¸­æ·»åŠ  <code>NSURLIsExcludedFromBackupKey</code> å¹¶è®¾ä¸º <code>YES</code>ï¼Œæˆ–é€šè¿‡ä»£ç è®¾ç½®ç›®å½•å±æ€§ï¼š</li>
</ul>
<pre><code class="hljs language-c" lang="c"><span class="hljs-comment">// ä¸º rn_update ç›®å½•è®¾ç½®ä¸å¤‡ä»½åˆ° iCloud</span>
NSURL *rnUpdateUrl = [NSURL fileURLWithPath:[documentsPath stringByAppendingPathComponent:@<span class="hljs-string">"rn_update"</span>]];
[rnUpdateUrl setResourceValue:@YES forKey:NSURLIsExcludedFromBackupKey error:nil];
</code></pre>
<ul>
<li>åˆå§‹åŒ–ç›®å½•ï¼šåœ¨å®¢æˆ·ç«¯åˆå§‹åŒ–æ—¶ï¼Œé€šè¿‡ <code>NSFileManager</code> åˆ›å»º <code>rn_update/</code> åŠå…¶å­ç›®å½•ï¼Œé¿å…å› ç›®å½•ä¸å­˜åœ¨å¯¼è‡´ä¸‹è½½ / è§£å‹å¤±è´¥ã€‚</li>
</ul>
<h5 data-id="heading-29">ç›®å½•è®¿é—®ç¤ºä¾‹ä»£ç </h5>
<pre><code class="hljs language-c" lang="c"><span class="hljs-comment">// è·å– Documents/rn_update ç›®å½•è·¯å¾„</span>
- (NSString *)getRnUpdateDir {
    NSString *documentsPath = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) firstObject];
    NSString *rnUpdateDir = [documentsPath stringByAppendingPathComponent:@<span class="hljs-string">"rn_update"</span>];
    <span class="hljs-comment">// æ£€æŸ¥å¹¶åˆ›å»ºç›®å½•</span>
    NSFileManager *fileManager = [NSFileManager defaultManager];
    <span class="hljs-keyword">if</span> (![fileManager fileExistsAtPath:rnUpdateDir]) {
        [fileManager createDirectoryAtPath:rnUpdateDir withIntermediateDirectories:YES attributes:nil error:nil];
    }
    <span class="hljs-keyword">return</span> rnUpdateDir;
}

<span class="hljs-comment">// è·å–å½“å‰ä½¿ç”¨çš„ RN Bundle è·¯å¾„ï¼ˆä¼˜å…ˆçƒ­æ›´æ–°ï¼Œæ— åˆ™ç”¨åŸºç¡€èµ„æºï¼‰</span>
- (NSString *)getCurrentRnBundlePath {
    NSString *rnUpdateDir = [self getRnUpdateDir];
    NSString *hotUpdateBundlePath = [rnUpdateDir stringByAppendingPathComponent:@<span class="hljs-string">"current/index.ios.bundle"</span>];
    <span class="hljs-keyword">if</span> ([[NSFileManager defaultManager] fileExistsAtPath:hotUpdateBundlePath]) {
        <span class="hljs-keyword">return</span> hotUpdateBundlePath;
    } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// çƒ­æ›´æ–°èµ„æºä¸å­˜åœ¨ï¼Œè¿”å›åŸç”Ÿé¢„ç½®çš„åŸºç¡€ Bundle è·¯å¾„ï¼ˆMain Bundle ä¸‹ï¼‰</span>
        <span class="hljs-keyword">return</span> [[NSBundle mainBundle] pathForResource:@<span class="hljs-string">"rn_bundle/base/index.ios"</span> ofType:@<span class="hljs-string">"bundle"</span>];
    }
}
</code></pre>
<h3 data-id="heading-30">å››ã€æœåŠ¡ç«¯å®ç°</h3>
<h4 data-id="heading-31">1. æ•°æ®åº“è®¾è®¡</h4>
<h5 data-id="heading-32">æ ¸å¿ƒè¡¨ç»“æ„</h5>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> `rn_app` (
  `id` <span class="hljs-type">int</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="hljs-string">'ä¸»é”®ID'</span>,
  `title` <span class="hljs-type">varchar</span>(<span class="hljs-number">100</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">''</span> COMMENT <span class="hljs-string">'åç§°'</span>,
  `key` <span class="hljs-type">varchar</span>(<span class="hljs-number">100</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">''</span> COMMENT <span class="hljs-string">'å¯†é’¥'</span>,
  `bundleid` <span class="hljs-type">varchar</span>(<span class="hljs-number">255</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">''</span> COMMENT <span class="hljs-string">'bundleid'</span>,
  `remark` text COMMENT <span class="hljs-string">'å¤‡æ³¨'</span>,
  `state` tinyint <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">'1'</span> COMMENT <span class="hljs-string">'çŠ¶æ€,1ä½¿ç”¨ä¸­ï¼Œ-1å·²åˆ é™¤'</span>,
  `createdAt` datetime <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span>,
  `updatedAt` datetime <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
  `uid` <span class="hljs-type">varchar</span>(<span class="hljs-number">36</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'å¹³å°ç”¨æˆ·ID'</span>,
  <span class="hljs-keyword">PRIMARY</span> KEY (`id`),
  KEY `rn_app_uid_index` (`uid`)
) ENGINE<span class="hljs-operator">=</span>InnoDB AUTO_INCREMENT<span class="hljs-operator">=</span><span class="hljs-number">18</span> <span class="hljs-keyword">DEFAULT</span> CHARSET<span class="hljs-operator">=</span>utf8mb4 <span class="hljs-keyword">COLLATE</span><span class="hljs-operator">=</span>utf8mb4_0900_ai_ci COMMENT<span class="hljs-operator">=</span><span class="hljs-string">'åº”ç”¨åˆ—è¡¨'</span>

<span class="hljs-comment">--æ•°æ®åº“åˆ†æ”¯è¡¨</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> `rn_app_patch` (
  `id` <span class="hljs-type">int</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="hljs-string">'ä¸»é”®ID'</span>,
  `title` <span class="hljs-type">varchar</span>(<span class="hljs-number">100</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">''</span> COMMENT <span class="hljs-string">'åç§°'</span>,
  `app_id` <span class="hljs-type">int</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'æŒ‡å®šåº”ç”¨ID'</span>,
  `app_code` <span class="hljs-type">varchar</span>(<span class="hljs-number">255</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'æŒ‡å®šæ›´æ–°åº”ç”¨ç‰ˆæœ¬code/version,å¤šä¸ªç‰ˆæœ¬ç”¨é€—å·åˆ†éš”'</span>,
  `app_count` <span class="hljs-type">int</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">'0'</span> COMMENT <span class="hljs-string">'æ¿€æ´»æ•°'</span>,
  `patch_size` <span class="hljs-type">int</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">'0'</span> COMMENT <span class="hljs-string">'è¡¥ä¸å¤§å°'</span>,
  `patch_version` <span class="hljs-type">varchar</span>(<span class="hljs-number">255</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'è¡¥ä¸ç‰ˆæœ¬å·'</span>,
  `rule` tinyint <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">'0'</span> COMMENT <span class="hljs-string">'è§„åˆ™ï¼Œ0å¼€å‘ï¼Œ1å…¨é‡ï¼Œ2æŒ‡å®šç”¨æˆ·'</span>,
  `encrypt` tinyint <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">'0'</span> COMMENT <span class="hljs-string">'æ˜¯å¦åŠ å¯†,0æ²¡æœ‰ï¼Œ1åŠ å¯†'</span>,
  `release_time` <span class="hljs-type">bigint</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">'0'</span> COMMENT <span class="hljs-string">'å‘å¸ƒæ—¶é—´'</span>,
  `encryption` <span class="hljs-type">varchar</span>(<span class="hljs-number">50</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'åŠ å¯†ï¼š0åç«¯åŠ å¯†ï¼Œ1aesåŠ å¯†'</span>,
  `remark` text COMMENT <span class="hljs-string">'å¤‡æ³¨'</span>,
  `state` tinyint <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">'0'</span> COMMENT <span class="hljs-string">'çŠ¶æ€,1ä¸‹å‘ä¸­ï¼Œ-1å·²æ’¤å›'</span>,
  `content` text COMMENT <span class="hljs-string">'ä¸‹è½½åœ°å€'</span>,
  `uid` <span class="hljs-type">varchar</span>(<span class="hljs-number">36</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'æ“ä½œäººid'</span>,
  `createdAt` datetime <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
  `updatedAt` datetime <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
  <span class="hljs-keyword">PRIMARY</span> KEY (`id`),
  KEY `rn_app_patch_uid_index` (`uid`)
) ENGINE<span class="hljs-operator">=</span>InnoDB AUTO_INCREMENT<span class="hljs-operator">=</span><span class="hljs-number">22</span> <span class="hljs-keyword">DEFAULT</span> CHARSET<span class="hljs-operator">=</span>utf8mb4 <span class="hljs-keyword">COLLATE</span><span class="hljs-operator">=</span>utf8mb4_0900_ai_ci COMMENT<span class="hljs-operator">=</span><span class="hljs-string">'RNåº”ç”¨è¡¥ä¸ç®¡ç†è¡¨'</span>

<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> `rn_app_patch_user` (
  `id` <span class="hljs-type">int</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> AUTO_INCREMENT,
  `userid` <span class="hljs-type">int</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'æŒ‡å®šæ›´æ–°ç”¨æˆ·ID'</span>,
  `patch_id` <span class="hljs-type">int</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'åº”ç”¨è¡¥ä¸ID'</span>,
  `status` <span class="hljs-type">int</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'1=éœ€è¦æ›´æ–° 2=æ›´æ–°å®Œæˆ 3=æ’¤é”€æŒ‡å®šæ›´æ–°'</span>,
  `createdAt` datetime <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'åˆ›å»ºæ—¶é—´'</span>,
  `updatedAt` datetime <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'æ›´æ–°æ—¶é—´'</span>,
  <span class="hljs-keyword">PRIMARY</span> KEY (`id`),
  KEY `t_patch_user_userid_index` (`userid`),
  KEY `rn_app_patch_user_userid_index` (`userid`)
) ENGINE<span class="hljs-operator">=</span>InnoDB AUTO_INCREMENT<span class="hljs-operator">=</span><span class="hljs-number">11</span> <span class="hljs-keyword">DEFAULT</span> CHARSET<span class="hljs-operator">=</span>utf8mb4 <span class="hljs-keyword">COLLATE</span><span class="hljs-operator">=</span>utf8mb4_0900_ai_ci COMMENT<span class="hljs-operator">=</span><span class="hljs-string">'æŒ‡å®šç”¨æˆ·ä¸è¡¥ä¸ç‰ˆæœ¬å…³ç³»è¡¨'</span>
</code></pre>
<h4 data-id="heading-33">2. æ ¸å¿ƒæ¥å£è®¾è®¡</h4>
<h5 data-id="heading-34">(1). è·å–è¡¥ä¸åˆ—è¡¨</h5>
<p><strong>è¯·æ±‚æ–¹å¼</strong>: <code>GET</code>
<strong>æ¥å£URL</strong>: <code>/api/patchs/list</code>
<strong>åŠŸèƒ½æè¿°</strong>: è·å–è¡¥ä¸åˆ—è¡¨ï¼Œæ”¯æŒåˆ†é¡µå’Œå¤šæ¡ä»¶æœç´¢</p>
<p><strong>è¯·æ±‚å‚æ•°</strong> (Query):</p>

































































<table><thead><tr><th>å‚æ•°å</th><th>ç±»å‹</th><th>å¿…å¡«</th><th>æè¿°</th></tr></thead><tbody><tr><td>pageindex</td><td>number</td><td>å¦</td><td>é¡µç ï¼Œé»˜è®¤1</td></tr><tr><td>title</td><td>string</td><td>å¦</td><td>è¡¥ä¸æ ‡é¢˜ï¼Œæ”¯æŒæ¨¡ç³Šæœç´¢</td></tr><tr><td>app_id</td><td>number</td><td>å¦</td><td>åº”ç”¨ID</td></tr><tr><td>app_code</td><td>string</td><td>å¦</td><td>åº”ç”¨ç‰ˆæœ¬codeï¼ˆå­—ç¬¦ä¸²ç±»å‹ï¼Œæ”¯æŒé€—å·åˆ†éš”çš„å¤šä¸ªåº”ç”¨ç‰ˆæœ¬codeï¼‰</td></tr><tr><td>patch_version</td><td>string</td><td>å¦</td><td>è¡¥ä¸ç‰ˆæœ¬å·</td></tr><tr><td>state</td><td>number</td><td>å¦</td><td>è¡¥ä¸çŠ¶æ€ï¼š-1(å·²æ’¤å›)ã€0(è‰ç¨¿)ã€1(ä¸‹å‘ä¸­)</td></tr><tr><td>uid</td><td>string</td><td>å¦</td><td>åˆ›å»ºäººID</td></tr><tr><td>startDate</td><td>string</td><td>å¦</td><td>å¼€å§‹æ—¥æœŸï¼Œæ ¼å¼ï¼šYYYY-MM-DD</td></tr><tr><td>endDate</td><td>string</td><td>å¦</td><td>ç»“æŸæ—¥æœŸï¼Œæ ¼å¼ï¼šYYYY-MM-DD</td></tr></tbody></table>
<p><strong>å“åº”ç¤ºä¾‹</strong>:</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"code"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">200</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"message"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"success"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"data"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"list"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
      <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"id"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"title"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ä¿®å¤ç™»å½•é—®é¢˜"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"app_id"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1001</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"app_code"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"1001,1002"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"patch_version"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"1.0.1"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"patch_size"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">5.2</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"rule"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"encrypt"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"release_time"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1635734400000</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"remark"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ä¿®å¤ç™»å½•å¤±è´¥é—®é¢˜"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"state"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"app_count"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">156</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"uid"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"admin"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"createdAt"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"2023-11-01T00:00:00.000Z"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"updatedAt"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"2023-11-02T00:00:00.000Z"</span>
      <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"total"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"page"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"pages"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h5 data-id="heading-35">(2). åˆ›å»ºè¡¥ä¸</h5>
<p><strong>è¯·æ±‚æ–¹å¼</strong>: <code>POST</code>
<strong>æ¥å£URL</strong>: <code>/api/patchs/add</code>
<strong>åŠŸèƒ½æè¿°</strong>: åˆ›å»ºæ–°çš„è¡¥ä¸è®°å½•</p>
<p><strong>è¯·æ±‚å‚æ•°</strong> (JSONæ ¼å¼):</p>







































































<table><thead><tr><th>å‚æ•°å</th><th>ç±»å‹</th><th>å¿…å¡«</th><th>æè¿°</th></tr></thead><tbody><tr><td>title</td><td>string</td><td>æ˜¯</td><td>è¡¥ä¸æ ‡é¢˜ï¼Œæœ€å¤§é•¿åº¦255</td></tr><tr><td>app_id</td><td>number</td><td>æ˜¯</td><td>åº”ç”¨ID</td></tr><tr><td>app_code</td><td>string</td><td>å¦</td><td>åº”ç”¨ç‰ˆæœ¬codeï¼ˆå­—ç¬¦ä¸²ç±»å‹ï¼Œæ”¯æŒé€—å·åˆ†éš”çš„å¤šä¸ªåº”ç”¨ç‰ˆæœ¬codeï¼‰</td></tr><tr><td>patch_version</td><td>string</td><td>æ˜¯</td><td>è¡¥ä¸ç‰ˆæœ¬å·ï¼Œæ ¼å¼å¦‚ï¼š1.0.0ï¼Œæœ€å¤§é•¿åº¦50</td></tr><tr><td>rule</td><td>number</td><td>å¦</td><td>è§„åˆ™ç±»å‹ï¼š0(å¼€å‘ç‰ˆ)ã€1(å…¨é‡)ã€2(æŒ‡å®šç”¨æˆ·)ã€3(æ‰§è¡Œç‰ˆæœ¬æ›´æ–°)ï¼Œé»˜è®¤0</td></tr><tr><td>encrypt</td><td>number</td><td>å¦</td><td>æ˜¯å¦åŠ å¯†ï¼š0(ä¸åŠ å¯†)ã€1(åŠ å¯†)ï¼Œé»˜è®¤0</td></tr><tr><td>release_time</td><td>number</td><td>å¦</td><td>å‘å¸ƒæ—¶é—´æˆ³ï¼Œé»˜è®¤å½“å‰æ—¶é—´</td></tr><tr><td>encryption</td><td>string</td><td>å¦</td><td>åŠ å¯†å†…å®¹ï¼Œå½“encrypt=1æ—¶å¿…å¡«</td></tr><tr><td>remark</td><td>string</td><td>å¦</td><td>å¤‡æ³¨ä¿¡æ¯</td></tr><tr><td>content</td><td>string</td><td>æ˜¯</td><td>è¡¥ä¸å†…å®¹</td></tr></tbody></table>
<p><strong>è¯·æ±‚ç¤ºä¾‹</strong>:</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"title"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ä¿®å¤é¦–é¡µç™½å±é—®é¢˜"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"app_id"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1001</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"patch_version"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"1.0.2"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"rule"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"encrypt"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"remark"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ä¿®å¤é¦–é¡µåŠ è½½æ—¶çš„ç™½å±é—®é¢˜"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"content"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"function fixHomePage() { console.log('Fixed'); }"</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p><strong>å“åº”ç¤ºä¾‹</strong>:</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"code"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">200</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"message"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"success"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"data"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"id"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">2</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"title"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ä¿®å¤é¦–é¡µç™½å±é—®é¢˜"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"app_id"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1001</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"app_code"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"1001,1002"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"patch_version"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"1.0.2"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"patch_size"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1.5</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"rule"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"encrypt"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"release_time"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1635820800000</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"encryption"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">""</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"remark"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ä¿®å¤é¦–é¡µåŠ è½½æ—¶çš„ç™½å±é—®é¢˜"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"state"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"content"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"function fixHomePage() { console.log('Fixed'); }"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"app_count"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"uid"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"admin"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"createdAt"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"2023-11-02T00:00:00.000Z"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"updatedAt"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"2023-11-02T00:00:00.000Z"</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h5 data-id="heading-36">(3). æ ¹æ®æ¡ä»¶æŸ¥è¯¢è¡¥ä¸ä¿¡æ¯</h5>
<p><strong>è¯·æ±‚æ–¹å¼</strong>: <code>GET</code>
<strong>æ¥å£URL</strong>: <code>/api/patchs/query</code>
<strong>åŠŸèƒ½æè¿°</strong>: æ ¹æ®ä¸åŒæ¡ä»¶æŸ¥è¯¢è¡¥ä¸ä¿¡æ¯ï¼Œæ”¯æŒä¸‰ç§æŸ¥è¯¢é€»è¾‘ï¼š1) æ ¹æ®ç”¨æˆ·IDæŸ¥è¯¢è¯¥ç”¨æˆ·çš„æœ€é«˜ç‰ˆæœ¬è¡¥ä¸ 2) æ ¹æ®åº”ç”¨IDã€åº”ç”¨ç‰ˆæœ¬codeå’Œå½“å‰è¡¥ä¸ç‰ˆæœ¬æŸ¥è¯¢æ›´é«˜ç‰ˆæœ¬è¡¥ä¸ 3) æ ¹æ®åº”ç”¨IDå’Œåº”ç”¨ç‰ˆæœ¬codeæŸ¥è¯¢è¯¥åº”ç”¨çš„æœ€æ–°ç‰ˆæœ¬è¡¥ä¸</p>
<p><strong>è®¤è¯è¦æ±‚</strong>: æ— éœ€è®¤è¯</p>
<p><strong>è¯·æ±‚å‚æ•°</strong> (Query):</p>



































<table><thead><tr><th>å‚æ•°å</th><th>ç±»å‹</th><th>å¿…å¡«</th><th>æè¿°</th></tr></thead><tbody><tr><td>userid</td><td>number</td><td>å¦</td><td>ç”¨æˆ·IDï¼Œå½“æ­¤å‚æ•°å­˜åœ¨æ—¶ï¼Œå°†æŸ¥è¯¢è¯¥ç”¨æˆ·æŒ‡å®šæœ€é«˜ç‰ˆæœ¬</td></tr><tr><td>app_id</td><td>number</td><td>æ˜¯</td><td>åº”ç”¨IDï¼Œæ­¤å‚æ•°ä¸ºå¿…å¡«ï¼Œå®¢æˆ·ç«¯å›ºå®šå‚æ•°</td></tr><tr><td>app_code</td><td>string</td><td>å¦</td><td>åº”ç”¨ç‰ˆæœ¬code/version,å¤šä¸ªç‰ˆæœ¬ç”¨é€—å·åˆ†éš”</td></tr><tr><td>patch_version</td><td>string</td><td>å¦</td><td>å½“å‰è¡¥ä¸ç‰ˆæœ¬å·ï¼Œå½“æŒ‡å®šæ—¶æŸ¥è¯¢æ¯”æ­¤ç‰ˆæœ¬æ›´é«˜çš„è¡¥ä¸</td></tr></tbody></table>
<p><strong>æŸ¥è¯¢é€»è¾‘è¯´æ˜</strong>:</p>
<ul>
<li>é€»è¾‘1ï¼šé¦–å…ˆæŸ¥è¯¢æŒ‡å®šç”¨æˆ·å·²æ›´æ–°/æ›´æ–°å®Œæˆçš„æœ€é«˜ç‰ˆæœ¬è¡¥ä¸</li>
<li>é€»è¾‘2ï¼šè‹¥æœªæ‰¾åˆ°ï¼ŒæŸ¥è¯¢æ»¡è¶³app_idã€app_codeã€patch_versionä¸”çŠ¶æ€ä¸ºå¾…æ›´æ–°æˆ–å·²æ›´æ–°çš„æœ€é«˜ç‰ˆæœ¬</li>
<li>é€»è¾‘3ï¼šè‹¥ä»æœªæ‰¾åˆ°ï¼Œä»…æŒ‰app_idæŸ¥è¯¢æœ€é«˜ç‰ˆæœ¬è¡¥ä¸</li>
</ul>
<p><strong>å“åº”ç¤ºä¾‹</strong>:</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>  
  <span class="hljs-attr">"code"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">200</span><span class="hljs-punctuation">,</span>  
  <span class="hljs-attr">"message"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"success"</span><span class="hljs-punctuation">,</span>  
  <span class="hljs-attr">"data"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>  
    <span class="hljs-attr">"id"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span>  
    <span class="hljs-attr">"title"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ä¿®å¤ç™»å½•é—®é¢˜"</span><span class="hljs-punctuation">,</span>  
    <span class="hljs-attr">"app_id"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1001</span><span class="hljs-punctuation">,</span>  
    <span class="hljs-attr">"app_code"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"1001,1002"</span><span class="hljs-punctuation">,</span>  
    <span class="hljs-attr">"patch_version"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"1.0.1"</span><span class="hljs-punctuation">,</span>  
    <span class="hljs-attr">"patch_size"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">5.2</span><span class="hljs-punctuation">,</span>  
    <span class="hljs-attr">"rule"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span>  
    <span class="hljs-attr">"encrypt"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span>  
    <span class="hljs-attr">"release_time"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1635734400000</span><span class="hljs-punctuation">,</span>  
    <span class="hljs-attr">"encryption"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">""</span><span class="hljs-punctuation">,</span>  
    <span class="hljs-attr">"remark"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ä¿®å¤ç™»å½•å¤±è´¥é—®é¢˜"</span><span class="hljs-punctuation">,</span>  
    <span class="hljs-attr">"state"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span>  
    <span class="hljs-attr">"content"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"function fixLogin() { return true; }"</span><span class="hljs-punctuation">,</span>  
    <span class="hljs-attr">"app_count"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">156</span><span class="hljs-punctuation">,</span>  
    <span class="hljs-attr">"uid"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"admin"</span><span class="hljs-punctuation">,</span>  
    <span class="hljs-attr">"createdAt"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"2023-11-01T00:00:00.000Z"</span><span class="hljs-punctuation">,</span>  
    <span class="hljs-attr">"updatedAt"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"2023-11-02T00:00:00.000Z"</span>  
  <span class="hljs-punctuation">}</span>  
<span class="hljs-punctuation">}</span>

**è¯·æ±‚å‚æ•°** (JSONæ ¼å¼)<span class="hljs-punctuation">:</span>
å¯¼å…¥çš„JSONæ•°æ®ç»“æ„ä¸è¡¥ä¸è¯¦æƒ…ç›¸åŒï¼Œä½†å¯¼å…¥åä¼šé‡ç½®æ¿€æ´»æ•°å¹¶è®¾ç½®ä¸ºè‰ç¨¿çŠ¶æ€ã€‚

**è¯·æ±‚ç¤ºä¾‹**<span class="hljs-punctuation">:</span>
```json
<span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"title"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"å¯¼å…¥çš„è¡¥ä¸"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"app_id"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1001</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"patch_version"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"1.0.3"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"rule"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"encrypt"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"remark"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ä»å…¶ä»–ç³»ç»Ÿå¯¼å…¥"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"content"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"function importedPatch() { return true; }"</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p><strong>å“åº”ç¤ºä¾‹</strong>:</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"code"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">200</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"message"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"success"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"data"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"id"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">3</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"title"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"å¯¼å…¥çš„è¡¥ä¸"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"app_id"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1001</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"app_code"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"1001,1002"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"patch_version"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"1.0.3"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"patch_size"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1.2</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"rule"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"encrypt"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"release_time"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1635907200000</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"encryption"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">""</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"remark"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ä»å…¶ä»–ç³»ç»Ÿå¯¼å…¥"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"state"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// å¯¼å…¥çš„è¡¥ä¸é»˜è®¤ä¸ºè‰ç¨¿çŠ¶æ€</span>
    <span class="hljs-attr">"content"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"function importedPatch() { return true; }"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"app_count"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"uid"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"admin"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"createdAt"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"2023-11-03T00:00:00.000Z"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"updatedAt"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"2023-11-03T00:00:00.000Z"</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h3 data-id="heading-37">é”™è¯¯ç è¯´æ˜</h3>





























<table><thead><tr><th>é”™è¯¯ç </th><th>æè¿°</th></tr></thead><tbody><tr><td>400</td><td>è¯·æ±‚å‚æ•°é”™è¯¯</td></tr><tr><td>403</td><td>æ²¡æœ‰æ“ä½œæƒé™ï¼Œå¦‚å·²æ’¤å›çš„è¡¥ä¸ä¸èƒ½ä¿®æ”¹</td></tr><tr><td>404</td><td>è¯·æ±‚çš„èµ„æºä¸å­˜åœ¨</td></tr><tr><td>409</td><td>ç‰ˆæœ¬å·å†²çªï¼Œå¦‚é‡å¤çš„è¡¥ä¸ç‰ˆæœ¬å·</td></tr><tr><td>500</td><td>æœåŠ¡å™¨å†…éƒ¨é”™è¯¯</td></tr></tbody></table>
<h3 data-id="heading-38">äº”ã€ç®¡ç†åå°åŠŸèƒ½</h3>
<h4 data-id="heading-39">1. çƒ­æ›´åº”ç”¨æ·»åŠ åŠŸèƒ½</h4>
<p>åŠŸèƒ½æè¿°ï¼š</p>
<p>é’ˆå¯¹äºæŸä¸ªåº”ç”¨è¿›è¡Œçƒ­æ›´ï¼Œå¯ä»¥åˆ›å»ºAndroidåº”ç”¨å’ŒIosåº”ç”¨</p>
<p>é‡ç‚¹æ˜¯ä¸Šä¼ æ­£ç¡®çš„åŒ…åæˆ–è€…bundleIdï¼Œåç»­è¦é€šè¿‡è¿™ä¸ªå­—æ®µæ¥åŒºåˆ†è¡¥ä¸æ›´æ–°çš„åº”ç”¨ï¼Œäº¦æˆ–è€…å¯ä»¥ç”¨IDæ¥åŒºåˆ†</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ab262c9d353e48358b99f8bef6a92ec9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rSe56qd5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766636105&amp;x-signature=7gwh%2F%2FlkE%2FXoJ7yR%2BSfxCrC4Cfs%3D" alt="" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/58c3d494fbcf4bf398e7de69ea4f1f55~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rSe56qd5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766636105&amp;x-signature=TSUhicMS08DudA7kqp7dqmAvTw8%3D" alt="" loading="lazy"/></p>
<h4 data-id="heading-40">2. ç”¨æˆ·ç®¡ç†æ¨¡å—è®¾è®¡ä¸å®ç°æ€»ç»“</h4>
<p>åŠŸèƒ½æè¿°ï¼š</p>
<p>å®ç°ç”¨æˆ·ä¿¡æ¯çš„å±•ç¤ºã€æœç´¢å’Œåˆ†é¡µåŠŸèƒ½ï¼Œæ”¯æŒå¤šç»´åº¦ç­›é€‰å’Œå¿«é€Ÿå®šä½ç”¨æˆ·ã€‚æä¾›å®Œæ•´çš„ç”¨æˆ·ç”Ÿå‘½å‘¨æœŸç®¡ç†åŠŸèƒ½ï¼ŒåŒ…æ‹¬åˆ›å»ºã€ç¼–è¾‘ã€åˆ é™¤å’ŒæŸ¥çœ‹ç”¨æˆ·è¯¦æƒ…ï¼Œç”¨æˆ·æ ‡ç¤ºå¯ä»¥æ˜¯ç”¨æˆ·åº”ç”¨ç™»é™†çš„UserIdï¼Œå¯ä»¥æ˜¯æ‰‹æœºå·ï¼Œå¯ä»¥æ˜¯æ‰‹æœºè®¾å¤‡ç ã€‚å®ç°åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶ï¼ˆRBACï¼‰ï¼Œä¸åŒè§’è‰²æ‹¥æœ‰ä¸åŒæ“ä½œæƒé™ã€‚</p>
<p>æŠ€æœ¯å®ç°ï¼š</p>
<ul>
<li>è¡¨æ ¼å±•ç¤ºç”¨æˆ·æ ¸å¿ƒä¿¡æ¯ï¼ˆIDã€ç”¨æˆ·åã€è§’è‰²ã€çŠ¶æ€ç­‰ï¼‰</li>
<li>é›†æˆæœç´¢å’Œç­›é€‰åŠŸèƒ½</li>
<li>åˆ†é¡µåŠ è½½ä¼˜åŒ–æ€§èƒ½</li>
<li>è¡¨å•éªŒè¯ç¡®ä¿æ•°æ®å®Œæ•´æ€§</li>
<li>æ“ä½œç¡®è®¤é˜²æ­¢è¯¯æ“ä½œ</li>
<li>å®æ—¶çŠ¶æ€åé¦ˆ</li>
<li>è§’è‰²-æƒé™æ˜ å°„é…ç½®</li>
<li>å‰ç«¯è·¯ç”±å®ˆå«</li>
<li>æ“ä½œçº§æƒé™æ§åˆ¶</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/401620ed9e544fa2bcf767428a0bdfbb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rSe56qd5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766636105&amp;x-signature=LwrAgvCantiXsf%2BOJ75yFad3GJw%3D" alt="" loading="lazy"/></p>
<h4 data-id="heading-41"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fc15ad12b64b4426bf077441d226bfbb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rSe56qd5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766636105&amp;x-signature=D%2FX6v77PgyQfccUhgFhtv%2FZOFbY%3D" alt="" loading="lazy"/></h4>
<h4 data-id="heading-42">3. çƒ­æ›´è¡¥ä¸åˆ—è¡¨å±•ç¤ºé€»è¾‘</h4>
<p>åŠŸèƒ½æè¿°</p>
<ul>
<li>è¡¨æ ¼å±•ç¤ºå…³é”®ä¿¡æ¯ï¼šç‰ˆæœ¬å·ã€è§„åˆ™ç±»å‹ã€çŠ¶æ€ã€å‘å¸ƒæ—¶é—´</li>
<li>çŠ¶æ€å¯è§†åŒ–ï¼šä½¿ç”¨æ ‡ç­¾é¢œè‰²åŒºåˆ†ä¸åŒçŠ¶æ€</li>
<li>è§„åˆ™ç±»å‹åŠ¨æ€å±•ç¤ºï¼šæŒ‡å®šç”¨æˆ·è§„åˆ™å¯ç‚¹å‡»æŸ¥çœ‹è¯¦æƒ…</li>
</ul>
<p>ç—›ç‚¹1</p>
<ul>
<li>ç”¨æˆ·è¾“å…¥æ ¼å¼æ··ä¹±ï¼ˆå­—æ¯ã€ç‰¹æ®Šå­—ç¬¦ã€å¤šå°æ•°ç‚¹ï¼‰</li>
<li>ç‰ˆæœ¬æ®µé•¿åº¦ä¸ä¸€è‡´ï¼ˆ1.10.2 vs 1.1.2ï¼‰</li>
<li>ä¸­é—´çŠ¶æ€å¤„ç†ï¼ˆå¦‚"1."ã€"1.2."ï¼‰</li>
</ul>
<p>è§£å†³æ–¹æ¡ˆ</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// åŒé‡æ§åˆ¶æœºåˆ¶</span>
<span class="hljs-title function_">handleVersionInput</span>(<span class="hljs-params">value</span>) {
  <span class="hljs-comment">// 1. è¿‡æ»¤éæ³•å­—ç¬¦</span>
  <span class="hljs-keyword">let</span> val = value.<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/[^\d.]/g</span>, <span class="hljs-string">''</span>);

  <span class="hljs-comment">// 2. é˜²æ­¢è¿ç»­ç‚¹å’Œå¼€å¤´ç‚¹</span>
  val = val.<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/^\.|\.\./g</span>, <span class="hljs-string">''</span>);

  <span class="hljs-comment">// 3. æ™ºèƒ½åˆ†æ®µå¤„ç†</span>
  <span class="hljs-keyword">const</span> parts = val.<span class="hljs-title function_">split</span>(<span class="hljs-string">'.'</span>);
  <span class="hljs-keyword">if</span> (parts.<span class="hljs-property">length</span> &gt; <span class="hljs-number">3</span>) parts.<span class="hljs-property">length</span> = <span class="hljs-number">3</span>; <span class="hljs-comment">// é™åˆ¶ä¸‰æ®µå¼</span>

  <span class="hljs-comment">// 4. æ¯æ®µåªå–ç¬¬ä¸€ä¸ªæ•°å­—</span>
  <span class="hljs-keyword">const</span> processed = parts.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">part</span> =&gt;</span> part.<span class="hljs-title function_">charAt</span>(<span class="hljs-number">0</span>)).<span class="hljs-title function_">join</span>(<span class="hljs-string">'.'</span>);

  <span class="hljs-comment">// 5. ä¿ç•™åˆæ³•ä¸­é—´çŠ¶æ€</span>
  <span class="hljs-keyword">if</span> (value.<span class="hljs-title function_">endsWith</span>(<span class="hljs-string">'.'</span>) &amp;&amp; parts.<span class="hljs-property">length</span> &lt; <span class="hljs-number">3</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">publishForm</span>.<span class="hljs-property">version</span> = processed + <span class="hljs-string">'.'</span>;
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">publishForm</span>.<span class="hljs-property">version</span> = processed;
  }
},

<span class="hljs-comment">// æŒ‰é”®æ‹¦æˆªè¡¥å……</span>
<span class="hljs-title function_">handleVersionKeydown</span>(<span class="hljs-params">e</span>) {
  <span class="hljs-comment">// å…è®¸æ§åˆ¶é”®</span>
  <span class="hljs-keyword">if</span> ([<span class="hljs-string">'Backspace'</span>, <span class="hljs-string">'Delete'</span>, <span class="hljs-string">'ArrowLeft'</span>, <span class="hljs-string">'ArrowRight'</span>].<span class="hljs-title function_">includes</span>(e.<span class="hljs-property">key</span>)) <span class="hljs-keyword">return</span>;

  <span class="hljs-comment">// æ‹¦æˆªéæ³•å­—ç¬¦</span>
  <span class="hljs-keyword">if</span> (!<span class="hljs-regexp">/\d|\./</span>.<span class="hljs-title function_">test</span>(e.<span class="hljs-property">key</span>)) {
    e.<span class="hljs-title function_">preventDefault</span>();
    <span class="hljs-keyword">return</span>;
  }

  <span class="hljs-comment">// ç‚¹å·ç‰¹æ®Šå¤„ç†</span>
  <span class="hljs-keyword">if</span> (e.<span class="hljs-property">key</span> === <span class="hljs-string">'.'</span>) {
    <span class="hljs-keyword">const</span> current = <span class="hljs-variable language_">this</span>.<span class="hljs-property">publishForm</span>.<span class="hljs-property">version</span> || <span class="hljs-string">''</span>;
    <span class="hljs-keyword">if</span> (current.<span class="hljs-title function_">includes</span>(<span class="hljs-string">'.'</span>) &gt;= <span class="hljs-number">2</span> || current.<span class="hljs-title function_">endsWith</span>(<span class="hljs-string">'.'</span>)) {
      e.<span class="hljs-title function_">preventDefault</span>();
    }
  }
}
</code></pre>
<p>ç—›ç‚¹2ï¼š</p>
<ul>
<li>ç‰ˆæœ¬æ¯”è¾ƒé€»è¾‘å¤šæ¬¡å˜æ›´éœ€æ±‚</li>
<li>è¾¹ç•Œæƒ…å†µå¤„ç†ï¼ˆ1.10.0 vs 1.9.0ï¼‰</li>
<li>æ€§èƒ½é—®é¢˜ï¼ˆå¤§æ•°æ®é‡æ¯”è¾ƒï¼‰</li>
</ul>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// æ ‡å‡†è¯­ä¹‰åŒ–ç‰ˆæœ¬æ¯”è¾ƒ</span>
<span class="hljs-title function_">compareVersions</span>(<span class="hljs-params">v1, v2</span>) {
  <span class="hljs-comment">// æ ‡å‡†åŒ–ç‰ˆæœ¬æ ¼å¼</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">normalize</span> = v =&gt; {
    <span class="hljs-keyword">const</span> parts = v.<span class="hljs-title function_">split</span>(<span class="hljs-string">'.'</span>).<span class="hljs-title function_">map</span>(<span class="hljs-title class_">Number</span>);
    <span class="hljs-keyword">while</span> (parts.<span class="hljs-property">length</span> &lt; <span class="hljs-number">3</span>) parts.<span class="hljs-title function_">push</span>(<span class="hljs-number">0</span>);
    <span class="hljs-keyword">return</span> parts;
  };

  <span class="hljs-keyword">const</span> v1Parts = <span class="hljs-title function_">normalize</span>(v1);
  <span class="hljs-keyword">const</span> v2Parts = <span class="hljs-title function_">normalize</span>(v2);

  <span class="hljs-comment">// é€çº§æ¯”è¾ƒ</span>
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">3</span>; i++) {
    <span class="hljs-keyword">if</span> (v1Parts[i] &gt; v2Parts[i]) <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;
    <span class="hljs-keyword">if</span> (v1Parts[i] &lt; v2Parts[i]) <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span>;
  }

  <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
},

<span class="hljs-comment">// é«˜æ•ˆå†²çªæ£€æµ‹</span>
<span class="hljs-title function_">hasVersionConflict</span>(<span class="hljs-params">newVersion</span>) {
  <span class="hljs-comment">// ä»…æ¯”è¾ƒæœ‰æ•ˆç‰ˆæœ¬</span>
  <span class="hljs-keyword">const</span> validVersions = <span class="hljs-variable language_">this</span>.<span class="hljs-property">patchList</span>
    .<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">p</span> =&gt;</span> p.<span class="hljs-property">status</span> !== -<span class="hljs-number">1</span>) <span class="hljs-comment">// æ’é™¤å¤±æ•ˆç‰ˆæœ¬</span>
    .<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">p</span> =&gt;</span> p.<span class="hljs-property">version</span>)
    .<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">v</span> =&gt;</span> <span class="hljs-regexp">/^\d+\.\d+\.\d+$/</span>.<span class="hljs-title function_">test</span>(v)); <span class="hljs-comment">// è¿‡æ»¤æ— æ•ˆæ ¼å¼</span>

  <span class="hljs-comment">// ä½¿ç”¨someæå‰ç»ˆæ­¢éå†</span>
  <span class="hljs-keyword">return</span> validVersions.<span class="hljs-title function_">some</span>(<span class="hljs-function"><span class="hljs-params">v</span> =&gt;</span> 
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">compareVersions</span>(v, newVersion) &gt;= <span class="hljs-number">0</span>
  );
}
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cca724ab629b4219ac401fbac2ce4c1e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rSe56qd5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766636105&amp;x-signature=mXoXketVENAlaRY%2BSyzfi7h4lx4%3D" alt="" loading="lazy"/></p>
<h4 data-id="heading-43">4. æ™ºèƒ½ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿ</h4>
<p>åŠŸèƒ½èƒŒæ™¯ï¼š</p>
<p>è¦æƒ³çƒ­æ›´ï¼Œé‚£ç‰ˆæœ¬æ ¡éªŒè‚¯å®šæ˜¯å¿…ä¸å¯å°‘çš„ä¸€ç¯ï¼Œå› ä¸ºè¿™ä¸ªåŠŸèƒ½å½“æ—¶è¿˜å¼€äº†nä¸ªbattleä¼šï¼Œè¿™ä½ å—å¾—äº†å—</p>
<p>åŠŸèƒ½æè¿°ï¼š</p>
<p>å®ç°ä¸¥æ ¼çš„è¡¥ä¸ç‰ˆæœ¬è¾“å…¥æ§åˆ¶ï¼ˆx.y.zæ ¼å¼ï¼‰ï¼Œå‰ç«¯é€šè¿‡å®æ—¶è¾“å…¥è¿‡æ»¤ç¡®ä¿æ ¼å¼æ­£ç¡®ã€‚ç³»ç»Ÿè‡ªåŠ¨è¿‡æ»¤éæ³•å­—ç¬¦ï¼Œé™åˆ¶è¾“å…¥æ ¼å¼ï¼Œå¹¶æä¾›å®æ—¶è§†è§‰åé¦ˆï¼Œåç«¯ä¹Ÿåšä¸€å±‚æ ¡éªŒï¼ŒåŒå±‚ä¿éšœã€‚</p>
<p>æŠ€æœ¯å®ç°ï¼š</p>
<ul>
<li>å‰ç«¯åŒæ ¡éªŒæœºåˆ¶ï¼šè¾“å…¥äº‹ä»¶è¿‡æ»¤ + æŒ‰é”®æ‹¦æˆª</li>
<li>æ™ºèƒ½åˆ†æ®µå¤„ç†ï¼šæ”¯æŒä¸­é—´çŠ¶æ€ï¼ˆå¦‚"1."ã€"1.2."ï¼‰</li>
<li>æ ¼å¼å®Œæ•´æ€§ä¿éšœï¼šæäº¤æ—¶è¿›è¡Œæ­£åˆ™éªŒè¯
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5cf4d4a781ea403298b34487fc8b60a5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rSe56qd5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766636105&amp;x-signature=31uaK03coVbHUR%2Bz4PWvymKyyTg%3D" alt="" loading="lazy"/></li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/acf9fb6375204ef1a5421dd2afd27890~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rSe56qd5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766636105&amp;x-signature=VWty1Bj0L1qTyIesCD%2FraFn8h04%3D" alt="" loading="lazy"/></p>
<h4 data-id="heading-44">5. ç‰ˆæœ¬æ™ºèƒ½æ¯”è¾ƒå¼•æ“</h4>
<p>åŠŸèƒ½æè¿°ï¼š</p>
<p>é˜²æ­¢ç”Ÿæˆä½ç‰ˆæœ¬è¡¥ä¸ï¼Œç¡®ä¿ç‰ˆæœ¬è¿­ä»£é¡ºåºæ­£ç¡®ã€‚ç³»ç»Ÿè‡ªåŠ¨æ£€æµ‹ç°æœ‰ç‰ˆæœ¬ï¼Œæ‹¦æˆªæ— æ•ˆæäº¤ï¼Œé¿å…ç‰ˆæœ¬æ··ä¹±ã€‚</p>
<p>æŠ€æœ¯å®ç°ï¼š</p>
<ul>
<li>æ ‡å‡†è¯­ä¹‰åŒ–ç‰ˆæœ¬æ¯”è¾ƒç®—æ³•</li>
<li>é«˜æ•ˆæ£€æµ‹æœºåˆ¶ï¼ˆO(n)å¤æ‚åº¦ï¼‰</li>
<li>æ˜ç¡®é”™è¯¯æç¤º</li>
</ul>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// è¾“å…¥å¤„ç†æ ¸å¿ƒé€»è¾‘</span>
<span class="hljs-title function_">handleVersionInput</span>(<span class="hljs-params">value</span>) {
  <span class="hljs-comment">// 1. è¿‡æ»¤éæ³•å­—ç¬¦ï¼ˆåªä¿ç•™æ•°å­—å’Œç‚¹ï¼‰</span>
  <span class="hljs-keyword">let</span> val = value.<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/[^\d.]/g</span>, <span class="hljs-string">''</span>);

  <span class="hljs-comment">// 2. é˜²æ­¢è¿ç»­ç‚¹å’Œå¼€å¤´ç‚¹</span>
  val = val.<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/^\.|\.\./g</span>, <span class="hljs-string">''</span>);

  <span class="hljs-comment">// 3. æ›´æ–°å¤„ç†åçš„å€¼</span>
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">publishForm</span>.<span class="hljs-property">version</span> = val;
}
</code></pre>
<h4 data-id="heading-45">6. ç²¾å‡†å‘å¸ƒæ§åˆ¶ç³»ç»Ÿ</h4>
<p>åŠŸèƒ½æè¿°ï¼š</p>
<p>æ”¯æŒä¸¤ç§å‘å¸ƒæ¨¡å¼ï¼šå…¨é‡è®¾å¤‡ï¼ˆæ‰€æœ‰ç”¨æˆ·è‡ªåŠ¨æ›´æ–°ï¼‰å’ŒæŒ‡å®šç”¨æˆ·ï¼ˆç²¾ç¡®æ§åˆ¶æ›´æ–°èŒƒå›´ï¼‰ã€‚ç³»ç»Ÿæä¾›ç›´è§‚çš„UIäº¤äº’ï¼Œä¾¿äºæ“ä½œç®¡ç†ã€‚ç›®å‰æœªå¼€å‘æ ¹æ®ç”¨æˆ·è§’è‰²èº«ä»½ç­‰åšåŒºåˆ†ï¼Œåç»­å¯å»¶ä¼¸ä¸€ä¸‹åŠŸèƒ½</p>
<p>æŠ€æœ¯å®ç°ï¼š</p>
<ul>
<li>åŠ¨æ€è§„åˆ™æ¸²æŸ“</li>
<li>ç”¨æˆ·æŸ¥çœ‹åŠŸèƒ½</li>
<li>æƒé™éš”ç¦»æœºåˆ¶</li>
</ul>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// ç‰ˆæœ¬æ¯”è¾ƒå‡½æ•°</span>
<span class="hljs-title function_">compareVersions</span>(<span class="hljs-params">v1, v2</span>) {
  <span class="hljs-keyword">const</span> v1Parts = v1.<span class="hljs-title function_">split</span>(<span class="hljs-string">'.'</span>).<span class="hljs-title function_">map</span>(<span class="hljs-title class_">Number</span>);
  <span class="hljs-keyword">const</span> v2Parts = v2.<span class="hljs-title function_">split</span>(<span class="hljs-string">'.'</span>).<span class="hljs-title function_">map</span>(<span class="hljs-title class_">Number</span>);

  <span class="hljs-comment">// é€çº§æ¯”è¾ƒä¸»ç‰ˆæœ¬ã€æ¬¡ç‰ˆæœ¬ã€è¡¥ä¸ç‰ˆæœ¬</span>
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">3</span>; i++) {
    <span class="hljs-keyword">if</span> (v1Parts[i] &gt; v2Parts[i]) <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;
    <span class="hljs-keyword">if</span> (v1Parts[i] &lt; v2Parts[i]) <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span>;
  }
  <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/25af8d49f86e46308e475fd799639d9c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rSe56qd5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766636105&amp;x-signature=18iAD3hsjQrEjRAkI%2FCAdeCQDxc%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-46">å…­ã€å®¢æˆ·ç«¯å®ç°</h3>
<h4 data-id="heading-47">1. Android ç«¯æ ¸å¿ƒä»£ç </h4>
<h5 data-id="heading-48">ï¼ˆ1ï¼‰ç‰ˆæœ¬æ£€æµ‹ä¸å›æ»šåˆ¤æ–­</h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * React Native ç‰ˆæœ¬æ›´æ–°ç®¡ç†å™¨
 * è´Ÿè´£ç‰ˆæœ¬æ£€æµ‹ã€æ›´æ–°æç¤ºä¸å›æ»šæ“ä½œçš„ç»Ÿä¸€è°ƒåº¦
 * æ ¸å¿ƒèŒè´£ï¼šåè°ƒç‰ˆæœ¬æ£€æµ‹æµç¨‹ä¸å›æ»šç­–ç•¥çš„æ‰§è¡Œ
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RNUpdateManager</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">TAG</span> <span class="hljs-operator">=</span> <span class="hljs-string">"RNUpdateManager"</span>;
    <span class="hljs-keyword">private</span> Context mContext;

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">RNUpdateManager</span><span class="hljs-params">(Context context)</span> {
        <span class="hljs-built_in">this</span>.mContext = context.getApplicationContext(); <span class="hljs-comment">// ä½¿ç”¨ Application Context é¿å…å†…å­˜æ³„æ¼</span>
    }

    <span class="hljs-comment">/**
     * æ£€æµ‹ React Native ç‰ˆæœ¬æ›´æ–°çš„æ ¸å¿ƒå…¥å£
     * å®ç°é€»è¾‘ï¼š
     * 1. æ”¶é›†æœ¬åœ°ç‰ˆæœ¬ä¸è®¾å¤‡ä¿¡æ¯
     * 2. ä¸æœåŠ¡ç«¯æ¥å£äº¤äº’è·å–æ›´æ–°ç­–ç•¥
     * 3. æ ¹æ®æœåŠ¡ç«¯å“åº”æ‰§è¡Œå›æ»šæˆ–æ›´æ–°æ“ä½œ
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">checkUpdate</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// è·å–æœ¬åœ°ç‰ˆæœ¬ä¿¡æ¯</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">nativeVersion</span> <span class="hljs-operator">=</span> BuildConfig.VERSION_NAME;
        <span class="hljs-type">String</span> <span class="hljs-variable">currentRnVersion</span> <span class="hljs-operator">=</span> getCurrentRnVersion();
        <span class="hljs-type">String</span> <span class="hljs-variable">deviceId</span> <span class="hljs-operator">=</span> DeviceUtils.getDeviceId(mContext);
        <span class="hljs-type">long</span> <span class="hljs-variable">timestamp</span> <span class="hljs-operator">=</span> System.currentTimeMillis() / <span class="hljs-number">1000</span>;

        <span class="hljs-comment">// æ„å»ºè¯·æ±‚å‚æ•°</span>
        Map&lt;String, String&gt; params = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
        params.put(<span class="hljs-string">"native_version"</span>, nativeVersion);
        params.put(<span class="hljs-string">"current_rn_version"</span>, currentRnVersion);
        params.put(<span class="hljs-string">"device_id"</span>, deviceId);
        params.put(<span class="hljs-string">"timestamp"</span>, String.valueOf(timestamp));

        <span class="hljs-comment">// è¯·æ±‚æœåŠ¡ç«¯è·å–æ›´æ–°ç­–ç•¥</span>
        ApiService.checkUpdate(params, <span class="hljs-keyword">new</span> <span class="hljs-title class_">Callback</span>&lt;UpdateResponse&gt;() {
            <span class="hljs-meta">@Override</span>
            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onSuccess</span><span class="hljs-params">(UpdateResponse response)</span> {
                <span class="hljs-keyword">if</span> (response != <span class="hljs-literal">null</span> &amp;&amp; response.getData() != <span class="hljs-literal">null</span>) {
                    <span class="hljs-comment">// å¤„ç†æœåŠ¡ç«¯è¿”å›çš„æ›´æ–°ç­–ç•¥</span>
                    handleUpdateStrategy(response.getData());
                }
            }

            <span class="hljs-meta">@Override</span>
            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onFailure</span><span class="hljs-params">(Throwable e)</span> {
                Log.e(TAG, <span class="hljs-string">"ç‰ˆæœ¬æ£€æµ‹ç½‘ç»œè¯·æ±‚å¤±è´¥: "</span> + e.getMessage());
                <span class="hljs-comment">// å¯æ‰©å±•ï¼šæ·»åŠ å¤±è´¥é‡è¯•æœºåˆ¶ï¼ˆå¦‚æŒ‡æ•°é€€é¿ç­–ç•¥ï¼‰</span>
            }
        });
    }

    <span class="hljs-comment">/**
     * å¤„ç†æœåŠ¡ç«¯è¿”å›çš„æ›´æ–°ç­–ç•¥
     * <span class="hljs-doctag">@param</span> updateData æœåŠ¡ç«¯è¿”å›çš„æ›´æ–°æ•°æ®
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">handleUpdateStrategy</span><span class="hljs-params">(UpdateData updateData)</span> {
        <span class="hljs-keyword">if</span> (updateData.isNeedRollback()) {
            <span class="hljs-comment">// æ‰§è¡Œå›æ»šæ“ä½œ</span>
            handleRollback(updateData.getRollbackInfo());
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (updateData.isHasUpdate()) {
            <span class="hljs-comment">// æ‰§è¡Œæ­£å¸¸æ›´æ–°æµç¨‹</span>
            showUpdateDialog(updateData.getUpdateInfo());
        } <span class="hljs-keyword">else</span> {
            Log.d(TAG, <span class="hljs-string">"å½“å‰å·²æ˜¯æœ€æ–°ç‰ˆæœ¬ï¼Œæ— éœ€æ›´æ–°"</span>);
        }
    }

    <span class="hljs-comment">/**
     * å¤„ç†å›æ»šæ“ä½œçš„æ ¸å¿ƒé€»è¾‘
     * <span class="hljs-doctag">@param</span> rollbackInfo å›æ»šç›¸å…³ä¿¡æ¯
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">handleRollback</span><span class="hljs-params">(RollbackInfo rollbackInfo)</span> {
        <span class="hljs-keyword">if</span> (rollbackInfo == <span class="hljs-literal">null</span>) <span class="hljs-keyword">return</span>;

        <span class="hljs-keyword">if</span> (rollbackInfo.isForce()) {
            <span class="hljs-comment">// å¼ºåˆ¶å›æ»šåœºæ™¯ï¼šç›´æ¥æ‰§è¡Œå›æ»šæ“ä½œ</span>
            executeRollback(rollbackInfo.getTargetVersion());
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-comment">// éå¼ºåˆ¶å›æ»šåœºæ™¯ï¼šå¼¹å‡ºç¡®è®¤å¯¹è¯æ¡†ï¼Œå°Šé‡ç”¨æˆ·é€‰æ‹©</span>
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">AlertDialog</span>.Builder(mContext)
                    .setTitle(<span class="hljs-string">"ç‰ˆæœ¬å›æ»šæç¤º"</span>)
                    .setMessage(rollbackInfo.getReason())
                    .setPositiveButton(<span class="hljs-string">"ç«‹å³å›æ»š"</span>, (dialog, which) -&gt; executeRollback(rollbackInfo.getTargetVersion()))
                    .setNegativeButton(<span class="hljs-string">"æš‚ä¸å›æ»š"</span>, <span class="hljs-literal">null</span>)
                    .setCancelable(<span class="hljs-literal">false</span>) <span class="hljs-comment">// é˜²æ­¢ç”¨æˆ·è¯¯æ“ä½œå–æ¶ˆ</span>
                    .show();
        }
    }

    <span class="hljs-comment">/**
     * æ‰§è¡Œå›æ»šæ“ä½œçš„å…·ä½“å®ç°
     * <span class="hljs-doctag">@param</span> targetVersion ç›®æ ‡å›æ»šç‰ˆæœ¬å·
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">executeRollback</span><span class="hljs-params">(String targetVersion)</span> {
        <span class="hljs-type">boolean</span> <span class="hljs-variable">success</span> <span class="hljs-operator">=</span> RollbackManager.getInstance().restoreToVersion(targetVersion);

        <span class="hljs-comment">// ä¸ŠæŠ¥å›æ»šçŠ¶æ€åˆ°æœåŠ¡ç«¯ï¼Œç”¨äºç»Ÿè®¡åˆ†æ</span>
        reportRollbackStatus(getCurrentRnVersion(), targetVersion, success ? <span class="hljs-number">1</span> : <span class="hljs-number">0</span>);

        <span class="hljs-keyword">if</span> (success) {
            Log.d(TAG, <span class="hljs-string">"å›æ»šæˆåŠŸï¼Œé‡å¯ RN é¡µé¢åŠ è½½æ–° Bundle"</span>);
        } <span class="hljs-keyword">else</span> {
            Log.e(TAG, <span class="hljs-string">"å›æ»šæ“ä½œå¤±è´¥"</span>);
            Toast.makeText(mContext, <span class="hljs-string">"ç‰ˆæœ¬å›æ»šå¤±è´¥ï¼Œè¯·é‡è¯•"</span>, Toast.LENGTH_SHORT).show();
        }
    }

    <span class="hljs-comment">/**
     * è·å–å½“å‰ React Native ç‰ˆæœ¬å·
     * <span class="hljs-doctag">@return</span> å½“å‰ RN ç‰ˆæœ¬å·
     */</span>
    <span class="hljs-keyword">private</span> String <span class="hljs-title function_">getCurrentRnVersion</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// å®é™…å®ç°ï¼šä»æœ¬åœ°å­˜å‚¨æˆ–é…ç½®ä¸­è·å–å½“å‰ RN ç‰ˆæœ¬</span>
        <span class="hljs-comment">// ç¤ºä¾‹ï¼šreturn SharedPreferencesUtils.getString("current_rn_version", "1.0.0");</span>
        <span class="hljs-keyword">return</span> <span class="hljs-string">"1.0.0"</span>;
    }

    <span class="hljs-comment">/**
     * ä¸ŠæŠ¥å›æ»šçŠ¶æ€åˆ°æœåŠ¡ç«¯
     * <span class="hljs-doctag">@param</span> fromVersion å›æ»šå‰ç‰ˆæœ¬
     * <span class="hljs-doctag">@param</span> toVersion å›æ»šåç‰ˆæœ¬
     * <span class="hljs-doctag">@param</span> status å›æ»šçŠ¶æ€ï¼ˆ1:æˆåŠŸ, 0:å¤±è´¥ï¼‰
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">reportRollbackStatus</span><span class="hljs-params">(String fromVersion, String toVersion, <span class="hljs-type">int</span> status)</span> {
        <span class="hljs-comment">// å®é™…å®ç°ï¼šè°ƒç”¨æœåŠ¡ç«¯æ¥å£ä¸ŠæŠ¥å›æ»šçŠ¶æ€</span>
        <span class="hljs-comment">// ç¤ºä¾‹ï¼š</span>
        <span class="hljs-comment">// Map&lt;String, String&gt; params = new HashMap&lt;&gt;();</span>
        <span class="hljs-comment">// params.put("from_version", fromVersion);</span>
        <span class="hljs-comment">// params.put("to_version", toVersion);</span>
        <span class="hljs-comment">// params.put("status", String.valueOf(status));</span>
        <span class="hljs-comment">// ApiService.reportRollbackStatus(params, null);</span>
    }

    <span class="hljs-comment">/**
     * æ˜¾ç¤ºç‰ˆæœ¬æ›´æ–°å¯¹è¯æ¡†
     * <span class="hljs-doctag">@param</span> updateInfo æ›´æ–°ç›¸å…³ä¿¡æ¯
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">showUpdateDialog</span><span class="hljs-params">(UpdateInfo updateInfo)</span> {
        <span class="hljs-comment">// å®é™…å®ç°ï¼šæ˜¾ç¤ºæ›´æ–°å¯¹è¯æ¡†ï¼Œå¼•å¯¼ç”¨æˆ·æ›´æ–°</span>
    }
}
</code></pre>
<h5 data-id="heading-49">ï¼ˆ2ï¼‰å›æ»šç®¡ç†å™¨å®ç°</h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * React Native å›æ»šç®¡ç†å™¨
 * è´Ÿè´£ RN Bundle çš„ç‰ˆæœ¬å›æ»šæ ¸å¿ƒé€»è¾‘
 * è®¾è®¡æ¨¡å¼ï¼šå•ä¾‹æ¨¡å¼ + ç­–ç•¥æ¨¡å¼
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RollbackManager</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">TAG</span> <span class="hljs-operator">=</span> <span class="hljs-string">"RollbackManager"</span>;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">RN_BUNDLE_DIR</span> <span class="hljs-operator">=</span> <span class="hljs-string">"rn_update"</span>;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">LATEST_SYMLINK</span> <span class="hljs-operator">=</span> <span class="hljs-string">"latest"</span>;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> RollbackManager sInstance;
    <span class="hljs-keyword">private</span> Context mContext;

    <span class="hljs-comment">/**
     * ç§æœ‰æ„é€ å‡½æ•°ï¼Œé˜²æ­¢å¤–éƒ¨å®ä¾‹åŒ–
     * <span class="hljs-doctag">@param</span> context åº”ç”¨ä¸Šä¸‹æ–‡
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-title function_">RollbackManager</span><span class="hljs-params">(Context context)</span> {
        <span class="hljs-built_in">this</span>.mContext = context;
    }

    <span class="hljs-comment">/**
     * è·å–å•ä¾‹å®ä¾‹ï¼ˆåŒé‡æ£€æŸ¥é”å®šæ¨¡å¼ï¼‰
     * <span class="hljs-doctag">@return</span> RollbackManager å•ä¾‹å®ä¾‹
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> RollbackManager <span class="hljs-title function_">getInstance</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">if</span> (sInstance == <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">synchronized</span> (RollbackManager.class) {
                <span class="hljs-keyword">if</span> (sInstance == <span class="hljs-literal">null</span>) {
                    <span class="hljs-comment">// ç¡®ä¿ Application Context å·²åˆå§‹åŒ–</span>
                    <span class="hljs-type">Context</span> <span class="hljs-variable">context</span> <span class="hljs-operator">=</span> AppContext.getInstance();
                    sInstance = <span class="hljs-keyword">new</span> <span class="hljs-title class_">RollbackManager</span>(context);
                }
            }
        }
        <span class="hljs-keyword">return</span> sInstance;
    }

    <span class="hljs-comment">/**
     * å›æ»šåˆ°æŒ‡å®šç‰ˆæœ¬çš„ React Native Bundle
     * æ ¸å¿ƒå®ç°æµç¨‹ï¼š
     * 1. éªŒè¯ç›®æ ‡ç‰ˆæœ¬å·
     * 2. æ£€æŸ¥ç›®æ ‡ç‰ˆæœ¬ Bundle æ˜¯å¦å­˜åœ¨
     * 3. ä¸å­˜åœ¨åˆ™ä¸‹è½½åŸºç¡€ç‰ˆæœ¬
     * 4. å¤‡ä»½å½“å‰ç‰ˆæœ¬ï¼ˆå¯é€‰ï¼‰
     * 5. åˆ›å»ºç¬¦å·é“¾æ¥æŒ‡å‘ç›®æ ‡ç‰ˆæœ¬
     * 
     * <span class="hljs-doctag">@param</span> targetVersion ç›®æ ‡ç‰ˆæœ¬å·
     * <span class="hljs-doctag">@return</span> å›æ»šæ“ä½œæ˜¯å¦æˆåŠŸ
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">restoreToVersion</span><span class="hljs-params">(String targetVersion)</span> {
        <span class="hljs-comment">// å‚æ•°æ ¡éªŒ</span>
        <span class="hljs-keyword">if</span> (TextUtils.isEmpty(targetVersion)) {
            Log.e(TAG, <span class="hljs-string">"ç›®æ ‡ç‰ˆæœ¬å·ä¸èƒ½ä¸ºç©º"</span>);
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        }

        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// 1. è·å–ç›®æ ‡ç‰ˆæœ¬çš„ Bundle æ–‡ä»¶</span>
            <span class="hljs-type">File</span> <span class="hljs-variable">targetBundle</span> <span class="hljs-operator">=</span> getBundleFile(targetVersion);

            <span class="hljs-comment">// 2. è‹¥ç›®æ ‡ç‰ˆæœ¬ Bundle ä¸å­˜åœ¨ï¼Œåˆ™ä¸‹è½½åŸºç¡€ç‰ˆæœ¬</span>
            <span class="hljs-keyword">if</span> (!targetBundle.exists()) {
                Log.d(TAG, <span class="hljs-string">"ç›®æ ‡ç‰ˆæœ¬ Bundle ä¸å­˜åœ¨ï¼Œå¼€å§‹ä¸‹è½½åŸºç¡€ç‰ˆæœ¬"</span>);
                <span class="hljs-type">boolean</span> <span class="hljs-variable">downloadSuccess</span> <span class="hljs-operator">=</span> downloadBaseVersion(targetVersion);
                <span class="hljs-keyword">if</span> (!downloadSuccess) {
                    Log.e(TAG, <span class="hljs-string">"åŸºç¡€ç‰ˆæœ¬ä¸‹è½½å¤±è´¥"</span>);
                    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
                }
            }

            <span class="hljs-comment">// 3. å¤‡ä»½å½“å‰ç‰ˆæœ¬ï¼ˆä¾¿äºå›æ»šå¤±è´¥æ—¶æ¢å¤ï¼‰</span>
            backupCurrentVersion();

            <span class="hljs-comment">// 4. åˆ›å»ºç¬¦å·é“¾æ¥æŒ‡å‘ç›®æ ‡ç‰ˆæœ¬ Bundle</span>
            <span class="hljs-keyword">return</span> createSymlinkToTarget(targetBundle);

        } <span class="hljs-keyword">catch</span> (SecurityException e) {
            Log.e(TAG, <span class="hljs-string">"å›æ»šæƒé™ä¸è¶³: "</span> + e.getMessage(), e);
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        } <span class="hljs-keyword">catch</span> (IOException e) {
            Log.e(TAG, <span class="hljs-string">"å›æ»šæ–‡ä»¶æ“ä½œå¼‚å¸¸: "</span> + e.getMessage(), e);
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        } <span class="hljs-keyword">catch</span> (Exception e) {
            Log.e(TAG, <span class="hljs-string">"å›æ»šè¿‡ç¨‹å‘ç”ŸæœªçŸ¥å¼‚å¸¸: "</span> + e.getMessage(), e);
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        }
    }

    <span class="hljs-comment">/**
     * è·å–æŒ‡å®šç‰ˆæœ¬çš„ Bundle æ–‡ä»¶è·¯å¾„
     * <span class="hljs-doctag">@param</span> version ç‰ˆæœ¬å·
     * <span class="hljs-doctag">@return</span> å¯¹åº”ç‰ˆæœ¬çš„ Bundle æ–‡ä»¶
     */</span>
    <span class="hljs-keyword">private</span> File <span class="hljs-title function_">getBundleFile</span><span class="hljs-params">(String version)</span> {
        <span class="hljs-type">File</span> <span class="hljs-variable">bundleDir</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(mContext.getFilesDir(), RN_BUNDLE_DIR);
        <span class="hljs-keyword">if</span> (!bundleDir.exists()) {
            bundleDir.mkdirs(); <span class="hljs-comment">// ç¡®ä¿ç›®å½•å­˜åœ¨</span>
        }
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(bundleDir, <span class="hljs-string">"bundle_"</span> + version + <span class="hljs-string">".jsbundle"</span>);
    }

    <span class="hljs-comment">/**
     * ä¸‹è½½æŒ‡å®šç‰ˆæœ¬çš„åŸºç¡€ Bundle æ–‡ä»¶
     * <span class="hljs-doctag">@param</span> version ç›®æ ‡ç‰ˆæœ¬å·
     * <span class="hljs-doctag">@return</span> ä¸‹è½½æ˜¯å¦æˆåŠŸ
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">downloadBaseVersion</span><span class="hljs-params">(String version)</span> {
        <span class="hljs-comment">// å®é™…å®ç°ï¼šä»æœåŠ¡ç«¯ä¸‹è½½æŒ‡å®šç‰ˆæœ¬çš„ Bundle æ–‡ä»¶</span>
        <span class="hljs-comment">// å¯æ‰©å±•ï¼šå®ç°æ–­ç‚¹ç»­ä¼ ã€è¿›åº¦å›è°ƒç­‰åŠŸèƒ½</span>
        Log.d(TAG, <span class="hljs-string">"ä¸‹è½½ç‰ˆæœ¬ "</span> + version + <span class="hljs-string">" çš„åŸºç¡€ Bundle æ–‡ä»¶"</span>);
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>; <span class="hljs-comment">// ç¤ºä¾‹è¿”å›å€¼</span>
    }

    <span class="hljs-comment">/**
     * å¤‡ä»½å½“å‰ç‰ˆæœ¬çš„ Bundle æ–‡ä»¶
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">backupCurrentVersion</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-type">File</span> <span class="hljs-variable">latestLink</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(mContext.getFilesDir(), RN_BUNDLE_DIR), LATEST_SYMLINK);
            <span class="hljs-keyword">if</span> (latestLink.exists() &amp;&amp; latestLink.isFile()) {
                <span class="hljs-type">File</span> <span class="hljs-variable">backupDir</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(mContext.getFilesDir(), <span class="hljs-string">"rn_backup"</span>);
                <span class="hljs-keyword">if</span> (!backupDir.exists()) {
                    backupDir.mkdirs();
                }
                <span class="hljs-type">File</span> <span class="hljs-variable">backupFile</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(backupDir, <span class="hljs-string">"bundle_backup_"</span> + System.currentTimeMillis() + <span class="hljs-string">".jsbundle"</span>);
                FileUtils.copyFile(latestLink, backupFile);
                Log.d(TAG, <span class="hljs-string">"å½“å‰ç‰ˆæœ¬å·²å¤‡ä»½åˆ°: "</span> + backupFile.getAbsolutePath());
            }
        } <span class="hljs-keyword">catch</span> (IOException e) {
            Log.e(TAG, <span class="hljs-string">"å¤‡ä»½å½“å‰ç‰ˆæœ¬å¤±è´¥: "</span> + e.getMessage(), e);
            <span class="hljs-comment">// å¤‡ä»½å¤±è´¥ä¸å½±å“ä¸»æµç¨‹</span>
        }
    }

    <span class="hljs-comment">/**
     * åˆ›å»ºç¬¦å·é“¾æ¥æŒ‡å‘ç›®æ ‡ç‰ˆæœ¬çš„ Bundle æ–‡ä»¶
     * <span class="hljs-doctag">@param</span> targetBundle ç›®æ ‡ç‰ˆæœ¬çš„ Bundle æ–‡ä»¶
     * <span class="hljs-doctag">@return</span> ç¬¦å·é“¾æ¥åˆ›å»ºæ˜¯å¦æˆåŠŸ
     * <span class="hljs-doctag">@throws</span> IOException IO æ“ä½œå¼‚å¸¸
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">createSymlinkToTarget</span><span class="hljs-params">(File targetBundle)</span> <span class="hljs-keyword">throws</span> IOException {
        <span class="hljs-type">File</span> <span class="hljs-variable">bundleDir</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(mContext.getFilesDir(), RN_BUNDLE_DIR);
        <span class="hljs-type">File</span> <span class="hljs-variable">latestLink</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(bundleDir, LATEST_SYMLINK);

        <span class="hljs-comment">// åˆ é™¤æ—§çš„ç¬¦å·é“¾æ¥æˆ–æ–‡ä»¶ï¼ˆè‹¥å­˜åœ¨ï¼‰</span>
        <span class="hljs-keyword">if</span> (latestLink.exists()) {
            <span class="hljs-type">boolean</span> <span class="hljs-variable">deleted</span> <span class="hljs-operator">=</span> latestLink.delete();
            <span class="hljs-keyword">if</span> (!deleted) {
                Log.e(TAG, <span class="hljs-string">"åˆ é™¤æ—§ç¬¦å·é“¾æ¥å¤±è´¥"</span>);
                <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
            }
        }

        <span class="hljs-comment">// åˆ›å»ºæ–°çš„ç¬¦å·é“¾æ¥ï¼ˆå…¼å®¹ä¸åŒ Android ç‰ˆæœ¬ï¼‰</span>
        <span class="hljs-keyword">if</span> (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.N) {
            <span class="hljs-comment">// Android 7.0+ åŸç”Ÿæ”¯æŒç¬¦å·é“¾æ¥</span>
            Files.createSymbolicLink(latestLink.toPath(), targetBundle.toPath());
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-comment">// ä½ç‰ˆæœ¬ Android å…¼å®¹æ–¹æ¡ˆï¼šç›´æ¥å¤åˆ¶æ–‡ä»¶</span>
            Log.d(TAG, <span class="hljs-string">"å½“å‰ Android ç‰ˆæœ¬ä¸æ”¯æŒç¬¦å·é“¾æ¥ï¼Œä½¿ç”¨æ–‡ä»¶å¤åˆ¶æ–¹æ¡ˆ"</span>);
            FileUtils.copyFile(targetBundle, latestLink);
        }

        Log.d(TAG, <span class="hljs-string">"æˆåŠŸåˆ›å»ºæŒ‡å‘ç›®æ ‡ç‰ˆæœ¬çš„é“¾æ¥: "</span> + targetBundle.getAbsolutePath());
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    }
}
</code></pre>
<h3 data-id="heading-50">ä¸ƒã€çƒ­ä¿®å¤å…¨æµç¨‹æ¼”ç¤º</h3>
<h4 data-id="heading-51">1. å®¢æˆ·ç«¯åŠ è½½è¡¥ä¸æµç¨‹</h4>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TD
    A[åˆå§‹åŒ–RNå®¹å™¨] --&gt; B[æ£€æŸ¥æ˜¯å¦æœ‰å·²ä¸‹è½½çš„æ›´æ–°åŒ…]
    B --&gt;|å­˜åœ¨| C[éªŒè¯æ›´æ–°æ›´æ–°åŒ…ç‰ˆæœ¬æœ‰æ•ˆæ€§]
    C --&gt;|æœ‰æ•ˆ| D[åŠ è½½æ²™ç›’ä¸­çš„æ›´æ–°åŒ…]
    C --&gt;|æ— æ•ˆ| E[åˆ é™¤æ— æ•ˆæ›´æ–°åŒ…]

    B --&gt;|ä¸å­˜åœ¨| F[åŠ è½½åŸç”Ÿé¢„ç½®çš„åŸºç¡€åŒ…]

    D --&gt; G{åŠ è½½æ˜¯å¦æˆåŠŸ?}
    G --&gt;|æ˜¯| H[è®°å½•å½“å‰ä½¿ç”¨ç‰ˆæœ¬]
    G --&gt;|å¦| I[è§¦å‘è‡ªåŠ¨å›æ»šæœºåˆ¶]

    F --&gt; H

    I --&gt; J{æ˜¯å¦æœ‰å†å²ç‰ˆæœ¬å¤‡ä»½?}
    J --&gt;|æ˜¯| K[åŠ è½½æœ€æ–°çš„å†å²å¤‡ä»½ç‰ˆæœ¬]
    J --&gt;|å¦| F

    K --&gt; L{å¤‡ä»½ç‰ˆæœ¬åŠ è½½æ˜¯å¦æˆåŠŸ?}
    L --&gt;|æ˜¯| H
    L --&gt;|å¦| F

    H --&gt; M[RNé¡µé¢æ¸²æŸ“å®Œæˆ]
</code></pre>
<h4 data-id="heading-52">2. æ’¤å›æ“ä½œæµç¨‹ï¼ˆç®¡ç†åå°è§†è§’ï¼‰</h4>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TD
    A[å‘ç°é—®é¢˜è¡¥ä¸] --&gt; B[ç®¡ç†å‘˜ç™»å½•ç®¡ç†åå°]
    B --&gt; C[é€‰æ‹©éœ€è¦æ’¤å›çš„è¡¥ä¸ç‰ˆæœ¬]
    C --&gt; D[é€‰æ‹©æ’¤å›ç±»å‹: åœæ­¢æ¨é€/å¼ºåˆ¶å›æ»š]
    D --&gt; E[å¡«å†™æ’¤å›åŸå› å’Œç›®æ ‡å›æ»šç‰ˆæœ¬]
    E --&gt; F[ç³»ç»ŸéªŒè¯ç‰ˆæœ¬åˆæ³•æ€§]
    F --&gt; G[æ›´æ–°æ•°æ®åº“æ’¤å›çŠ¶æ€]
    G --&gt; H[ç”Ÿæˆå›æ»šæŒ‡ä»¤]
    H --&gt; I[æ ‡è®°å—å½±å“ç”¨æˆ·]
</code></pre>
<h4 data-id="heading-53">3. å®¢æˆ·ç«¯å›æ»šæµç¨‹</h4>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TD
    A[åº”ç”¨å¯åŠ¨/å®šæ—¶æ£€æµ‹] --&gt; B[è°ƒç”¨ç‰ˆæœ¬æ£€æµ‹æ¥å£]
    B --&gt; C{æ˜¯å¦æœ‰å›æ»šæŒ‡ä»¤?}
    C --&gt;|æ˜¯| D{æ˜¯å¦å¼ºåˆ¶å›æ»š?}
    D --&gt;|æ˜¯| E[ç›´æ¥æ‰§è¡Œå›æ»š]
    D --&gt;|å¦| F[å¼¹çª—è¯¢é—®ç”¨æˆ·]
    F --&gt;|ç¡®è®¤| E
    F --&gt;|å–æ¶ˆ| G[è®°å½•ç”¨æˆ·é€‰æ‹©ä¸‹æ¬¡å†æé†’]
    E --&gt; H[æ¢å¤åˆ°ç›®æ ‡ç‰ˆæœ¬]
    H --&gt; I[ä¸ŠæŠ¥å›æ»šç»“æœ]
    I --&gt; J[é‡å¯RNé¡µé¢ç”Ÿæ•ˆ]
</code></pre>
<h3 data-id="heading-54">å…«ã€é£é™©æ§åˆ¶ä¸ä¼˜åŒ–</h3>
<h4 data-id="heading-55">1. é£é™©ç‚¹åŠè§£å†³æ–¹æ¡ˆ</h4>

































<table><thead><tr><th>é£é™©ç‚¹</th><th>è§£å†³æ–¹æ¡ˆ</th></tr></thead><tbody><tr><td>æ¥å£å®‰å…¨</td><td>å®ç°ç­¾åéªŒè¯ã€æ—¶é—´æˆ³é˜²é‡æ”¾ã€è¯·æ±‚é¢‘ç‡é™åˆ¶</td></tr><tr><td>æ›´æ–°åŒ…å®‰å…¨</td><td>å¼ºåˆ¶ MD5 æ ¡éªŒ</td></tr><tr><td>åŠ è½½å¤±è´¥</td><td>å®ç°è‡ªåŠ¨å›æ»šæœºåˆ¶ã€å´©æºƒç›‘æ§ä¸ŠæŠ¥</td></tr><tr><td>ç½‘ç»œé—®é¢˜</td><td>ä¸‹è½½é‡è¯•æœºåˆ¶</td></tr><tr><td>æ’¤å›æŒ‡ä»¤æ»¥ç”¨</td><td>å¢åŠ å®¡æ‰¹æµç¨‹ã€æ“ä½œæ—¥å¿—å®¡è®¡ã€æƒé™æ§åˆ¶</td></tr><tr><td>å›æ»šå¤±è´¥</td><td>å›æ»šå‰å¤‡ä»½å½“å‰ç‰ˆæœ¬ã€å¤±è´¥è‡ªåŠ¨æ¢å¤ã€æä¾›æ‰‹åŠ¨å›æ»šå…¥å£</td></tr></tbody></table>
<h4 data-id="heading-56">2. æ€§èƒ½ä¼˜åŒ–</h4>
<ul>
<li>
<p>é‡‡ç”¨å¢é‡æ›´æ–°ï¼ˆBsdiff ç®—æ³•ï¼‰å‡å°‘åŒ…ä½“ç§¯</p>
</li>
<li>
<p>åå°ä¸‹è½½ä¸é˜»å¡ä¸»çº¿ç¨‹</p>
</li>
<li>
<p>èµ„æºé¢„åŠ è½½ï¼ˆç©ºé—²æ—¶æå‰ä¸‹è½½ï¼‰</p>
</li>
<li>
<p>å®šæœŸæ¸…ç†è¿‡æœŸæ›´æ–°åŒ…</p>
</li>
</ul>
<h3 data-id="heading-57">ä¹ã€æ€»ç»“ä¸è§„åˆ’</h3>
<p>è‡³æ­¤ï¼Œä¸€æ¡â€œè‡ªå»º RN çƒ­ä¿®å¤â€é«˜é€Ÿé€šé“å·²å…¨é¢è´¯é€šã€‚</p>
<p>ä»éœ€æ±‚å‘èµ·åˆ°è¡¥ä¸ç”Ÿæ•ˆï¼Œæˆ‘ä»¬æŠŠæ—¶é—´åˆ»åº¦ä»â€œå¤©â€å‹ç¼©åˆ°â€œåˆ†é’Ÿâ€ï¼š</p>
<ul>
<li>10 åˆ†é’Ÿå®Œæˆ Bundle å·®åˆ†ã€ç°åº¦ç­–ç•¥é…ç½®ã€CDN åˆ†å‘ï¼›</li>
<li>30 ç§’å†…æ’¤å›æŒ‡ä»¤å³å¯è¦†ç›–å…¨éƒ¨ç”¨æˆ·ï¼Œå›æ»šåŒ…ç«‹å³ç”Ÿæ•ˆï¼›</li>
<li>æˆåŠŸç‡ã€å¤±è´¥è¯¦æƒ…ã€å›æ»šæ¯”ä¾‹åœ¨ç›‘æ§å¤§å±å®æ—¶åˆ·æ–°ï¼Œä¸å†é çŒœã€‚</li>
</ul>
<p>è¿‡å»ï¼Œç‰ˆæœ¬å·ä¸€æ—¦è¢«æ‰“è¿›å®‰è£…åŒ…ï¼Œå°±åƒæŠŠä¿¡ä»¶æŠ•è¿›é‚®ç­’â€”â€”åœ°å€å†™æ­»ã€æ— æ³•å¬å›ï¼›<br/>
ç°åœ¨ï¼Œç‰ˆæœ¬å·åªæ˜¯æœåŠ¡ç«¯çš„ä¸€æ¡æ•°æ®è®°å½•ï¼Œå¯éšæ—¶å‡é™ã€éšæ—¶æ›¿æ¢ï¼Œè®©â€œå‘ç‰ˆâ€ç¬¬ä¸€æ¬¡æ‹¥æœ‰äº†â€œæ•°æ®åº“äº‹åŠ¡â€èˆ¬çš„åŸå­æ€§ä¸å›æ»šèƒ½åŠ›ã€‚</p>
<p>åç»­è®¡åˆ’</p>
<ul>
<li>
<p>ç¦»çº¿åœºæ™¯ä¸å¼±ç½‘ä¼˜åŒ–<br/>
æ–­ç‚¹ç»­ä¼  256 KB åˆ†ç‰‡ï¼Œå¼±ç½‘ &lt;100 kbps é™é»˜é™é€Ÿä¸‹è½½ï¼Œå·®åˆ†ç»“æœæœ¬åœ°ç¼“å­˜ï¼ŒäºŒæ¬¡å†·å¯ç§’åˆ‡æ–° Bundleã€‚</p>
</li>
<li>
<p>å¯è§†åŒ–åŸ‹ç‚¹åˆ†æ<br/>
å†…ç½‘å¤§å±ç›´æ˜¾â€œä¸‹è½½-æ¿€æ´»-å›æ»šâ€æ¼æ–—ï¼Œç‚¹æŸ±ä¸‹é’»åˆ°åœ°åŸŸ/æœºå‹/ç³»ç»Ÿç‰ˆæœ¬ï¼›æˆåŠŸç‡&lt;98%æˆ–å›æ»šç‡&gt;2%å³åˆ»æ¨å›¾åˆ°ä¼å¾®/é’‰é’‰ï¼Œ10 åˆ†é’Ÿé—­ç¯ã€‚</p>
</li>
<li>
<p>å‘½ä»¤è¡Œä¸€é”®ä¸Šä¼ 
æ— éœ€æ‰“å¼€åå°ï¼Œå¦‚æ‰§è¡Œ rn-patch upload --appId 1001 --ver 1.0.2 --bundle ./index.android.bundle å³å¯å®Œæˆæ‰“åŒ…ã€åŠ å¯†ã€ç­¾åã€ä¸Šä¼ ï¼Œè¿”å›è¡¥ä¸ ID ä¸ä¸‹è½½é“¾æ¥ã€‚</p>
</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[JavaScriptæ€§èƒ½ä¼˜åŒ–ï¼š5ä¸ªV8å¼•æ“éšè—æŠ€å·§è®©ä½ çš„ä»£ç æé€Ÿ50%]]></title>    <link>https://juejin.cn/post/7584780417103036456</link>    <guid>https://juejin.cn/post/7584780417103036456</guid>    <pubDate>2025-12-18T04:16:51.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7584780417103036456" data-draft-id="7584760031835308066" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="JavaScriptæ€§èƒ½ä¼˜åŒ–ï¼š5ä¸ªV8å¼•æ“éšè—æŠ€å·§è®©ä½ çš„ä»£ç æé€Ÿ50%"/> <meta itemprop="keywords" content="åç«¯,å‰ç«¯,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-12-18T04:16:51.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é˜¿æ©™çš„ç™¾å®ç®±"/> <meta itemprop="url" content="https://juejin.cn/user/1638743356481367"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            JavaScriptæ€§èƒ½ä¼˜åŒ–ï¼š5ä¸ªV8å¼•æ“éšè—æŠ€å·§è®©ä½ çš„ä»£ç æé€Ÿ50%
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1638743356481367/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é˜¿æ©™çš„ç™¾å®ç®±
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-18T04:16:51.000Z" title="Thu Dec 18 2025 04:16:51 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-18
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0"><strong>JavaScriptæ€§èƒ½ä¼˜åŒ–ï¼š5ä¸ªV8å¼•æ“éšè—æŠ€å·§è®©ä½ çš„ä»£ç æé€Ÿ50%</strong></h2>
<h2 data-id="heading-1">å¼•è¨€</h2>
<p>åœ¨ç°ä»£Webå¼€å‘ä¸­ï¼ŒJavaScriptæ€§èƒ½ä¼˜åŒ–æ˜¯ä¸€ä¸ªæ°¸æ’çš„è¯é¢˜ã€‚éšç€V8å¼•æ“çš„æŒç»­è¿›åŒ–ï¼Œè®¸å¤šå¼€å‘è€…å¯èƒ½æ²¡æœ‰æ„è¯†åˆ°ï¼Œä»–ä»¬çš„ä»£ç è·ç¦»æœ€ä¼˜æ€§èƒ½å¾€å¾€åªå·®å‡ ä¸ªå…³é”®è°ƒæ•´ã€‚æœ¬æ–‡å°†æ·±å…¥æ¢è®¨5ä¸ªé²œä¸ºäººçŸ¥çš„V8å¼•æ“ä¼˜åŒ–æŠ€å·§ï¼Œè¿™äº›æŠ€å·§åŸºäºGoogle V8å›¢é˜Ÿå…¬å¼€çš„æŠ€æœ¯æ–‡æ¡£ã€æ¼”è®²å’Œå®é™…åŸºå‡†æµ‹è¯•ç»“æœï¼Œèƒ½å¤Ÿå¸®åŠ©ä½ çš„åº”ç”¨è·å¾—é«˜è¾¾50%çš„æ€§èƒ½æå‡ã€‚</p>
<h2 data-id="heading-2">1. éšè—ç±»ï¼ˆHidden Classï¼‰ä¼˜åŒ–</h2>
<h3 data-id="heading-3">1.1 ç†è§£éšè—ç±»æœºåˆ¶</h3>
<p>V8å¼•æ“ä½¿ç”¨éšè—ç±»ï¼ˆå†…éƒ¨ç§°ä¸º"Map"ï¼‰æ¥åŠ é€Ÿå¯¹è±¡å±æ€§è®¿é—®ã€‚å½“å¯¹è±¡åˆ›å»ºæ—¶ï¼ŒV8ä¼šä¸ºå…¶åˆ†é…ä¸€ä¸ªéšè—ç±»ï¼Œå¹¶åœ¨å±æ€§å˜æ›´æ—¶åˆ›å»ºæ–°çš„éšè—ç±»é“¾ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åæ¨¡å¼ - ç ´åéšè—ç±»è¿ç»­æ€§</span>
<span class="hljs-keyword">const</span> obj = {};
obj.<span class="hljs-property">a</span> = <span class="hljs-number">1</span>;   <span class="hljs-comment">// HiddenClass C0 â†’ C1</span>
obj.<span class="hljs-property">b</span> = <span class="hljs-number">2</span>;   <span class="hljs-comment">// HiddenClass C1 â†’ C2</span>

<span class="hljs-comment">// vs </span>

<span class="hljs-comment">// ä¼˜åŒ–æ¨¡å¼ - ä¿æŒä¸€è‡´æ€§</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">OptimalObj</span>(<span class="hljs-params">a, b</span>) {
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">a</span> = a;
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">b</span> = b;
}
<span class="hljs-keyword">const</span> optimal = <span class="hljs-keyword">new</span> <span class="hljs-title class_">OptimalObj</span>(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>); <span class="hljs-comment">// Single HiddenClass</span>
</code></pre>
<h3 data-id="heading-4">1.2 å®è·µå»ºè®®</h3>
<ul>
<li><strong>ä¸€æ¬¡æ€§åˆå§‹åŒ–æ‰€æœ‰å±æ€§</strong>ï¼šé¿å…åŠ¨æ€æ·»åŠ å±æ€§</li>
<li><strong>ä¿æŒå±æ€§é¡ºåºä¸€è‡´</strong>ï¼šä¸åŒå®ä¾‹çš„å±æ€§å£°æ˜é¡ºåºä¸åŒä¼šå¯¼è‡´ä¸åŒçš„éšè—ç±»</li>
<li><strong>ä½¿ç”¨æ„é€ å‡½æ•°æˆ–class</strong>ï¼šæ¯”å­—é¢é‡å¯¹è±¡æ›´æœ‰åˆ©äºéšè—ç±»ä¼˜åŒ–</li>
</ul>
<p>åŸºå‡†æµ‹è¯•æ˜¾ç¤ºï¼šåœ¨å¯†é›†å¯¹è±¡æ“ä½œåœºæ™¯ä¸‹ï¼Œè¿™äº›ä¼˜åŒ–å¯ä½¿æ€§èƒ½æå‡20-35%ã€‚</p>
<h2 data-id="heading-5">2. TurboFanä¼˜åŒ–é™·é˜±ä¸é€ƒé€¸åˆ†æ</h2>
<h3 data-id="heading-6">2.1 TurboFançš„å·¥ä½œæœºåˆ¶</h3>
<p>V8çš„TurboFanç¼–è¯‘å™¨ä¼šè¿›è¡Œé€ƒé€¸åˆ†æï¼ˆEscape Analysisï¼‰ï¼Œç¡®å®šå¯¹è±¡æ˜¯å¦"é€ƒé€¸"å‡ºå½“å‰å‡½æ•°ä½œç”¨åŸŸã€‚æœªé€ƒé€¸çš„å¯¹è±¡å¯èƒ½è¢«å®Œå…¨ä¼˜åŒ–æ‰ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åä¾‹ - å¯¹è±¡é€ƒé€¸å¯¼è‡´å»ä¼˜åŒ–</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">process</span>(<span class="hljs-params">data</span>) {
  <span class="hljs-keyword">const</span> temp = { <span class="hljs-attr">x</span>: data.<span class="hljs-property">x</span> * <span class="hljs-number">2</span> }; <span class="hljs-comment">// âŒ Allocationæ— æ³•æ¶ˆé™¤</span>
  
someGlobalVar = temp; <span class="hljs-comment">// &lt;- Escape!</span>
}

<span class="hljs-comment">// âœ…ï¸ Optimizableç‰ˆæœ¬</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">optimizedProcess</span>(<span class="hljs-params">data</span>) {
<span class="hljs-keyword">return</span> data.<span class="hljs-property">x</span> * <span class="hljs-number">2</span>; <span class="hljs-comment">// âœ”ï¸ No allocation needed</span>
}
</code></pre>
<h3 data-id="heading-7">2.2 Key Insights</h3>
<ul>
<li><strong>é¿å…åœ¨çƒ­ç‚¹è·¯å¾„ä¸Šåˆ›å»ºä¸´æ—¶å¯¹è±¡</strong></li>
<li><strong>è­¦æƒ•é—­åŒ…æ•è·</strong>ï¼šå¯èƒ½å¯¼è‡´å˜é‡é€ƒé€¸</li>
<li><strong>ä½¿ç”¨æ•°å­—ç±»å‹è€ŒéåŒ…è£…å¯¹è±¡</strong>ï¼š<code>new Number()</code>ä¼šç ´åä¼˜åŒ–</li>
</ul>
<p>å®é™…æ¡ˆä¾‹è¡¨æ˜ï¼šä¿®å¤è¿™ç±»é—®é¢˜å¯ä½¿æ•°å€¼è®¡ç®—å¯†é›†å‹å‡½æ•°æé€Ÿ40%ä»¥ä¸Šã€‚</p>
<h2 data-id="heading-8">3. Arrayå¤„ç†çš„é«˜æ•ˆæ¨¡å¼</h2>
<h3 data-id="heading-9">3.1 V8æ•°ç»„çš„å†…éƒ¨è¡¨ç¤ºå½¢å¼</h3>
<p>V8ä¼šæ ¹æ®æ•°ç»„å†…å®¹è‡ªåŠ¨åˆ‡æ¢å­˜å‚¨æ¨¡å¼ï¼š</p>
<ul>
<li>PACKED_SMI_ELEMENTS ï¼ˆçº¯å°æ•´æ•°ï¼‰</li>
<li>PACKED_DOUBLE_ELEMENTS ï¼ˆåŒç²¾åº¦æµ®ç‚¹ï¼‰</li>
<li>PACKED_ELEMENTS ï¼ˆä»»æ„ç±»å‹ï¼‰</li>
<li>HOLEY_å˜ä½“ï¼ˆå­˜åœ¨ç©ºæ´ï¼‰</li>
</ul>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ğŸš« Slow transition:</span>
<span class="hljs-keyword">const</span> arr = [<span class="hljs-number">1</span>, ,];      <span class="hljs-comment">// HOLEY_SMI_ELEMENTS </span>
arr.<span class="hljs-title function_">push</span>(<span class="hljs-string">'x'</span>);           <span class="hljs-comment">// â†’ HOLEY_ELEMENTS (æœ€æ…¢)</span>

<span class="hljs-comment">// âœ… Better:</span>
<span class="hljs-keyword">const</span> arr = [];
arr[<span class="hljs-number">0</span>] = <span class="hljs-string">'first'</span>;        <span class="hljs-comment">// Always PACKED_ELEMENTS </span>
arr[<span class="hljs-number">1</span>] = <span class="hljs-string">'second'</span>;
</code></pre>
<h3 data-id="heading-10">3.2 Performance Tips:</h3>
<ul>
<li><strong>é¢„åˆ†é…æ•°ç»„å¤§å°</strong>ï¼š<code>new Array(N)</code>æ¯”<code>[]+push</code>å¿«15%</li>
<li><strong>é¿å…åˆ¶é€ ç©ºæ´</strong>ï¼šundefinedæ¯”æ˜¾å¼ç•™ç©ºæ€§èƒ½æ›´å¥½</li>
<li><strong>ç±»å‹ä¸€è‡´åŸåˆ™</strong>ï¼šæ··åˆç±»å‹ä¼šå¯¼è‡´é™çº§åˆ°é€šç”¨è¡¨ç¤º</li>
</ul>
<p>å®æµ‹æ•°æ®è¡¨æ˜ï¼šéµå¾ªè¿™äº›è§„åˆ™å¯ä½¿æ•°ç»„æ“ä½œæé€Ÿ30%-50%ã€‚</p>
<h2 data-id="heading-11">4. Inline Cache (IC)æœºåˆ¶æ·±åº¦åˆ©ç”¨</h2>
<h3 data-id="heading-12">4.1 ICçš„å·¥ä½œæµç¨‹</h3>
<p>V8é€šè¿‡å¤šæ€ICæ¥ç¼“å­˜æ–¹æ³•è°ƒç”¨ä¿¡æ¯ï¼š</p>
<pre><code class="hljs">å•æ€ï¼ˆMonomorphicï¼‰â†’ 
å¤šæ€ï¼ˆPolymorphic &lt;4ç§ï¼‰â†’ 
è¶…æ€ï¼ˆMegamorphicï¼‰
</code></pre>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// âš ï¸ Megamorphicå±é™©ç¤ºä¾‹ï¼š</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">add</span>(<span class="hljs-params">x, y</span>) {
 <span class="hljs-keyword">return</span> x + y; <span class="hljs-comment">// ICçŠ¶æ€å–å†³äºå‚æ•°ç±»å‹ç»„åˆ </span>
}

<span class="hljs-title function_">add</span>(<span class="hljs-number">1</span>, );     <span class="hljs-comment">// MONO: number + number  </span>
<span class="hljs-title function_">add</span>(<span class="hljs-string">'a'</span>, <span class="hljs-string">'b'</span>); <span class="hljs-comment">// POLY: string + string  </span>
<span class="hljs-title function_">add</span>({}, []);   <span class="hljs-comment">// MEGA: object + array  </span>

<span class="hljs-comment">// âœ… Monomorphicç‰ˆæœ¬ï¼š</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">addNumbers</span>(<span class="hljs-params">a, b</span>) { <span class="hljs-keyword">return</span> a + b; }
</code></pre>
<h3 data-id="heading-13">Pro Tips:</h3>
<p>-<strong>ä¸“ç”¨å‡½æ•°ä¼˜äºæ³›å‹å‡½æ•°</strong>
-<strong>é¿å…è¶…è¿‡4ç§ç±»å‹ç»„åˆ</strong>
-<strong>å†»ç»“å¯¹è±¡å¯é”å®šhidden class</strong></p>
<p>ç”Ÿäº§ç¯å¢ƒæ•°æ®æ˜¾ç¤ºï¼šç»´æŠ¤ICçš„å•æ€æ€§å¯è·å¾—25%ä»¥ä¸Šçš„è°ƒç”¨åŠ é€Ÿã€‚</p>
<p>##5.WASMä¸JSçš„æœ€ä½³åä½œæ¨¡å¼</p>
<p>###5.1 V8ä¸­çš„WASMè°ƒç”¨è¾¹ç•Œæˆæœ¬</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ğŸ’¡ Hybridè°ƒç”¨ç¤ºä¾‹  </span>
<span class="hljs-keyword">const</span> wasmModule = <span class="hljs-keyword">await</span> <span class="hljs-title class_">WebAssembly</span>.<span class="hljs-title function_">compile</span>(...);  

<span class="hljs-keyword">function</span> <span class="hljs-title function_">hybridCompute</span>(<span class="hljs-params">arr</span>) {  
 <span class="hljs-keyword">const</span> memView = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint32Array</span>(memory.<span class="hljs-property">buffer</span>);  
 <span class="hljs-keyword">if</span> (<span class="hljs-title function_">isTypedArray</span>(arr)) {  
 memView.<span class="hljs-title function_">set</span>(arr);    <span class="hljs-comment">// Zero-copy path   </span>
 <span class="hljs-keyword">return</span> <span class="hljs-title function_">_wasm_fn</span>();    <span class="hljs-comment">// Fast call   </span>
 } <span class="hljs-keyword">else</span> {              <span class="hljs-comment">// Fallback path   </span>
 <span class="hljs-keyword">return</span> <span class="hljs-title function_">jsImpl</span>(arr);   <span class="hljs-comment">// Pure JS   </span>
 }  
}    
</code></pre>
<p>###5.2å…³é”®ç­–ç•¥:<br/>
-<strong>å»ºç«‹é«˜æ•ˆçš„æ•°æ®äº¤æ¢é€šé“</strong>: SharedArrayBufferä¼˜äºåºåˆ—åŒ–<br/>
-<strong>åˆ†å±‚è®¾è®¡</strong>: WASMå¤„ç†è®¡ç®—å¯†é›†å‹ä»»åŠ¡<br/>
-<strong>é¿å…é¢‘ç¹è·¨ç•Œè°ƒç”¨</strong>:æ‰¹é‡å¤„ç†æ•°æ®</p>
<p>å®éªŒå®¤æµ‹è¯•è¡¨æ˜:åˆç†è®¾è®¡çš„æ··åˆæ–¹æ¡ˆå¯å®ç°50%-70%çš„æ€§èƒ½é£è·ƒã€‚</p>
<p>##æ€»ç»“</p>
<p>æŒæ¡è¿™äº”ä¸ªV8å¼•æ“çš„æ·±å±‚ä¼˜åŒ–æŠ€å·§éœ€è¦å¼€å‘è€…æ”¹å˜ä¸€äº›ä¼ ç»Ÿç¼–ç ä¹ æƒ¯ï¼š</p>
<p>â€¢ä»å…³æ³¨è¯­æ³•æ­£ç¡®æ€§åˆ°ç†è§£åº•å±‚è¡¨ç¤ºå½¢å¼<br/>
â€¢ä»éšæ„è®¾è®¡æ•°æ®ç»“æ„åˆ°è€ƒè™‘å†…å­˜å¸ƒå±€å½±å“<br/>
â€¢ä»è¢«åŠ¨æ¥å—è¿è¡Œæ—¶è¡Œä¸ºåˆ°ä¸»åŠ¨å¼•å¯¼JITå†³ç­–</p>
<p>è¿™äº›æ”¹å˜è™½ç„¶ç»†å¾®ï¼Œä½†åœ¨å¤§è§„æ¨¡åº”ç”¨ä¸­ä¼šäº§ç”Ÿæ˜¾è‘—çš„ç´¯ç§¯æ•ˆæœã€‚æ­£å¦‚Chromeå›¢é˜Ÿçš„è°ƒç ”æ˜¾ç¤ºï¼š"90%çš„æ€§èƒ½é—®é¢˜æ¥è‡ª10%çš„å…³é”®ä»£ç è·¯å¾„"ã€‚å»ºè®®è¯»è€…é€šè¿‡Chromium DevToolsçš„Runtime Call Statså’ŒICç»Ÿè®¡åŠŸèƒ½æ¥éªŒè¯è¿™äº›æŠ€æœ¯åœ¨è‡ªå·±é¡¹ç›®ä¸­çš„åº”ç”¨æ•ˆæœã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä»åŸç†åˆ°è½åœ°ï¼šå¤§å±é€‚é…é€‚é…Â +Â é«˜å¹¶å‘å¼¹å¹•çš„ä¼ä¸šçº§æŠ€æœ¯æ‰‹å†Œ]]></title>    <link>https://juejin.cn/post/7584787119273590811</link>    <guid>https://juejin.cn/post/7584787119273590811</guid>    <pubDate>2025-12-18T04:16:30.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7584787119273590811" data-draft-id="7584742635502387227" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä»åŸç†åˆ°è½åœ°ï¼šå¤§å±é€‚é…é€‚é…Â +Â é«˜å¹¶å‘å¼¹å¹•çš„ä¼ä¸šçº§æŠ€æœ¯æ‰‹å†Œ"/> <meta itemprop="keywords" content="å‰ç«¯,CSS"/> <meta itemprop="datePublished" content="2025-12-18T04:16:30.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ´çªæŠ€æœ¯"/> <meta itemprop="url" content="https://juejin.cn/user/2538113306470631"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä»åŸç†åˆ°è½åœ°ï¼šå¤§å±é€‚é…é€‚é…Â +Â é«˜å¹¶å‘å¼¹å¹•çš„ä¼ä¸šçº§æŠ€æœ¯æ‰‹å†Œ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2538113306470631/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ´çªæŠ€æœ¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-18T04:16:30.000Z" title="Thu Dec 18 2025 04:16:30 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-18
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»14åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f576690145e347b3a70cadb4bc9d3fc0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rSe56qd5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766636190&amp;x-signature=dda6i10PPjiGPcFYAG3WbziZsys%3D" alt="æ•°æ®å¤§å±-----è®¾è®¡ç¨¿00.png" loading="lazy"/></p>
<h3 data-id="heading-0">å¼•è¨€ï¼šå¤§å±å¼€å‘çš„åŒé‡æŠ€æœ¯å›°å¢ƒ</h3>
<p>éšç€æ•°å­—åŒ–è½¬å‹çš„åŠ é€Ÿï¼Œæ•°æ®å¯è§†åŒ–å¤§å±ä¸å®æ—¶æ¶ˆæ¯åœºæ™¯è¿æ¥äº†çˆ†å‘å¼å¢é•¿ã€‚ä»ç”µå•†ç›‘æ§åˆ°ç›´æ’­äº’åŠ¨ï¼Œå†åˆ°æ”¿åŠ¡æŒ‡æŒ¥ï¼Œå¤§å±åº”ç”¨æ— å¤„ä¸åœ¨ï¼š</p>
<ul>
<li>
<p>åŒ11ç”µå•†å®æ—¶äº¤æ˜“ç›‘æ§å¤§å±ï¼šæ¯ç§’è·³åŠ¨10ä¸‡+è®¢å•ã€GMVæ›²çº¿ä¸åº“å­˜çƒ­åŠ›å›¾ï¼Œè¿è¥å›¢é˜Ÿéœ€åœ¨æ¯«ç§’çº§å»¶è¿Ÿå†…æ•æ‰å¼‚å¸¸ï¼›</p>
</li>
<li>
<p>æ”¿åŠ¡åº”æ€¥æŒ‡æŒ¥ä¸­å¿ƒæ€åŠ¿å¤§å±ï¼šå°é£è·¯å¾„ã€æ•‘æ´è½¦è¾†ã€äººå£çƒ­åŠ›åœ¨åŒä¸€é¢4Kå¼§å¹•ä¸Šå®æ—¶å åŠ ï¼Œä¸€æ—¦é”™ä½å°±å¯èƒ½è´»è¯¯é»„é‡‘4å°æ—¶ã€‚</p>
</li>
</ul>
<p>ç„¶è€Œï¼Œè¿™ä¸€é¢†åŸŸçš„å¿«é€Ÿå‘å±•ä¹Ÿå¸¦æ¥äº†æ–°çš„æŠ€æœ¯æŒ‘æˆ˜ã€‚ä¸€æ–¹é¢ï¼Œå¤§å±é€‚é…é¢ä¸´ç€å¤šåˆ†è¾¨ç‡ã€å®½é«˜æ¯”å·®å¼‚å¯¼è‡´çš„å¸ƒå±€å˜å½¢ä¸å…ƒç´ é”™ä½é—®é¢˜ï¼›å¦ä¸€æ–¹é¢ï¼Œå®æ—¶æ¶ˆæ¯çš„é«˜é¢‘æ•°æ®å†²å‡»ï¼Œä½¿å¾—æ€§èƒ½æŸè€—ä¸ç”¨æˆ·ä½“éªŒå¤±è¡¡ã€‚</p>
<p><strong>æœ¬æ–‡æ–¹æ¡ˆå¯å®ç°ï¼š</strong></p>
<ol>
<li>
<p>è·¨åˆ†è¾¨ç‡é›¶å˜å½¢é€‚é…ï¼šä¸€å¥—ä»£ç è¦†ç›–720P<del>16Kã€16:9</del>32:9ä»»æ„æ¯”ä¾‹ï¼Œå¸ƒå±€è¯¯å·®â‰¤1åƒç´ ï¼›</p>
</li>
<li>
<p>æ¯ç§’300+å¼¹å¹•æ¶ˆæ¯æµç•…æ¸²æŸ“ï¼šCPUå ç”¨é™ä½40%ï¼Œæ‰å¸§ç‡&lt;0.1%ï¼Œè®©"åŒ11+æ˜¥æ™š"çº§å¹¶å‘ä¹Ÿèƒ½ä¸æ»‘å¦‚åˆã€‚</p>
</li>
</ol>
<p>ä»"è¢«åŠ¨é€‚é…"åˆ°"ä¸»åŠ¨æ§åˆ¶"ï¼Œæˆ‘ä»¬å°†ç”¨åŸç”ŸæŠ€æœ¯æ ˆçš„æè‡´åˆ©ç”¨ï¼Œä¸ºå¤§å±å¼€å‘æä¾›ç ´å±€ä¹‹é“ã€‚</p>
<h3 data-id="heading-1">ç¬¬ä¸€éƒ¨åˆ†ï¼šä»â€œè¢«åŠ¨é€‚é…â€åˆ°â€œä¸»åŠ¨æ§åˆ¶â€â€”â€”CSSÂ å˜é‡Â +Â è§†å£å•ä½çš„å¤§å±é€‚é…ä½“ç³»</h3>
<h4 data-id="heading-2">1.Â å¤§å±é€‚é…çš„ä¸‰å¤§æŠ€æœ¯è¯¯åŒº</h4>

























<table><thead><tr><th>è¯¯åŒºç¼–å·</th><th>è¯¯åŒºæè¿°</th><th>åä¾‹è¯´æ˜</th></tr></thead><tbody><tr><td>è¯¯åŒº1</td><td>è¿‡åº¦ä¾èµ–JSåŠ¨æ€è®¡ç®—ï¼ˆresizeäº‹ä»¶ç›‘å¬çš„æ€§èƒ½é™·é˜±ï¼‰</td><td>æŸæ”¿åŠ¡æŒ‡æŒ¥ä¸­å¿ƒ4Kå¼§å¹•ï¼Œå› onresizeäº‹ä»¶å†…ç›´æ¥æ“ä½œ200+Â DOMèŠ‚ç‚¹ï¼Œå¸§ç‡ä»60fpsè·Œè‡³18fpsï¼Œé¼ æ ‡æ‹–æ‹½åœ°å›¾å‡ºç°è‚‰çœ¼å¯è§çš„"æ‹–å½±"ã€‚</td></tr><tr><td>è¯¯åŒº2</td><td>ç›²ç›®ä½¿ç”¨scaleç¼©æ”¾ï¼ˆå­—ä½“æ¨¡ç³Šã€äº‹ä»¶åç§»çš„éšæ€§é—®é¢˜ï¼‰</td><td>é‡‘èæŠ¥è¡¨å¤§å±åœ¨8Kå°é—´è·LEDå¢™ä½¿ç”¨<code>transform:Â scale(2.25)</code>æ•´ä½“æ”¾å¤§ï¼Œ12ptå®‹ä½“è¢«æ‹‰ä¼¸ä¸º27ptï¼Œç¬”ç”»å‘è™šï¼›åŒæ—¶clickåæ ‡åç§»13%ï¼Œå¯¼è‡´"è¯¦æƒ…æŒ‰é’®"ç‚¹ä¸å¼€ï¼Œå®¢æˆ·è¢«è¿«ä¸´æ—¶ä¸Šçº¿"ç‚¹å‡»åç§»æ ¡å‡†"è¡¥ä¸ã€‚</td></tr><tr><td>è¯¯åŒº3</td><td>åª’ä½“æŸ¥è¯¢å †ç Œï¼ˆç»´æŠ¤æˆæœ¬æŒ‡æ•°çº§å¢é•¿çš„æ ¹æºï¼‰</td><td>æŸäº¤é€šå¯è§†åŒ–é¡¹ç›®å†™å‡º140æ¡@mediaç‰‡æ®µï¼Œæ–°å¢ä¸€ä¸ª5120Ã—1440è¶…å®½å±éœ€æ±‚æ—¶ï¼Œå¼€å‘åŒå­¦ç”¨2å¤©å®Œæˆ"åŠ æ–­ç‚¹-æµ‹è¯•-å›å½’"ï¼Œç»“æœä»æ¼æ‰8ä¸ªå°åˆ†è¾¨ç‡ï¼Œè¢«ä¸€çº¿è¿ç»´åæ§½"æ”¹ä¸€è¡Œï¼Œå´©ä¸‰å¤„"ã€‚</td></tr></tbody></table>
<h4 data-id="heading-3">2.Â CSSå˜é‡+calc()çš„æŠ€æœ¯è§£æ„</h4>
<h4 data-id="heading-4">æ ¸å¿ƒå…¬å¼ï¼š</h4>
<blockquote>
<p>å…ƒç´ å°ºå¯¸Â =Â è®¾è®¡ç¨¿å€¼Â /Â åŸºå‡†å€¼Â Ã—Â è§†å£å•ä½</p>
</blockquote>
<h4 data-id="heading-5">åŒå‘ç»‘å®šæœºåˆ¶ï¼š</h4>
<p>é€šè¿‡Â <code>:root</code>Â å˜é‡å®ç°å…¨å±€åŸºå‡†çš„"ä¸€æ”¹å…¨æ”¹"ã€‚</p>
<h4 data-id="heading-6">è§†å£å•ä½çš„ç²¾ç»†åŒ–è¿ç”¨ï¼š</h4>
<ul>
<li>
<p><code>vw</code>Â ä¸»å¯¼å¸ƒå±€</p>
</li>
<li>
<p><code>vh</code>Â è¾…åŠ©é€‚é…</p>
</li>
</ul>
<p>ç¤ºä¾‹ä»£ç ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-pseudo">:root</span> {
  <span class="hljs-attr">--base-width</span>: <span class="hljs-number">1920px</span>;
  <span class="hljs-attr">--base-height</span>: <span class="hljs-number">1080px</span>;
}

<span class="hljs-selector-class">.element</span> {
  <span class="hljs-attribute">width</span>: <span class="hljs-built_in">calc</span>(<span class="hljs-number">100px</span> / <span class="hljs-built_in">var</span>(--base-width) * <span class="hljs-number">100vw</span>);
  <span class="hljs-attribute">height</span>: <span class="hljs-built_in">calc</span>(<span class="hljs-number">100px</span> / <span class="hljs-built_in">var</span>(--base-height) * <span class="hljs-number">100vh</span>);
}
</code></pre>
<h4 data-id="heading-7">3.Â å¤æ‚åœºæ™¯çš„è¿›é˜¶å®è·µ</h4>
<p>åµŒå¥—å®¹å™¨é€‚é…ï¼šå­å…ƒç´ åŸºäºçˆ¶å®¹å™¨è®¾è®¡ç¨¿çš„ç›¸å¯¹è®¡ç®—æ³•</p>
<pre><code class="hljs language-css" lang="css">    <span class="hljs-comment">/* ç¤ºä¾‹ä½¿ç”¨ */</span>
    <span class="hljs-selector-class">.header</span> {
        <span class="hljs-attr">--target-width</span>: <span class="hljs-number">1920</span>;
        <span class="hljs-attr">--target-height</span>: <span class="hljs-number">80</span>;
        <span class="hljs-attr">--target-font-size</span>: <span class="hljs-number">24</span>;
        <span class="hljs-attribute">width</span>: <span class="hljs-built_in">calc</span>(<span class="hljs-built_in">var</span>(--target-width) / <span class="hljs-built_in">var</span>(--base-width) * <span class="hljs-number">100vw</span>);
        <span class="hljs-attribute">height</span>: <span class="hljs-built_in">calc</span>(<span class="hljs-built_in">var</span>(--target-height) / <span class="hljs-built_in">var</span>(--base-height) * <span class="hljs-number">100vh</span>);
        <span class="hljs-attribute">font-size</span>: <span class="hljs-built_in">var</span>(--font-size-base);
    }
</code></pre>
<p>åŠ¨æ€åŸºå‡†åˆ‡æ¢ï¼šJSä»‹å…¥ä¿®æ”¹å˜é‡å®ç°åˆ†å±/å¼ºåˆ¶æ¯”ä¾‹åœºæ™¯</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-variable language_">document</span>.<span class="hljs-property">documentElement</span>.<span class="hljs-property">style</span>.<span class="hljs-title function_">setProperty</span>(<span class="hljs-string">'--base-width'</span>, <span class="hljs-string">'960px'</span>);
<span class="hljs-variable language_">document</span>.<span class="hljs-property">documentElement</span>.<span class="hljs-property">style</span>.<span class="hljs-title function_">setProperty</span>(<span class="hljs-string">'--base-height'</span>, <span class="hljs-string">'540px'</span>);
</code></pre>
<p>æé™æ¡ˆä¾‹å¤„ç†ï¼šæœ€å°å°ºå¯¸é™åˆ¶ã€è¶…é«˜æ¸…åˆ†è¾¨ç‡ï¼ˆ8K+ï¼‰é€‚é…æ–¹æ¡ˆ</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.element</span> {
  <span class="hljs-attribute">width</span>: <span class="hljs-built_in">max</span>(<span class="hljs-built_in">calc</span>(<span class="hljs-number">100px</span> / <span class="hljs-built_in">var</span>(--base-width) * <span class="hljs-number">100vw</span>), <span class="hljs-number">50px</span>);
  <span class="hljs-attribute">height</span>: <span class="hljs-built_in">max</span>(<span class="hljs-built_in">calc</span>(<span class="hljs-number">100px</span> / <span class="hljs-built_in">var</span>(--base-height) * <span class="hljs-number">100vh</span>), <span class="hljs-number">50px</span>);
}
// å½“ <span class="hljs-attr">--base-width</span> â‰¥ <span class="hljs-number">7680</span> æ—¶ï¼Œclamp ä¿è¯è®¡ç®—ç»“æœä¸ä¼š &lt;<span class="hljs-number">1</span> pxï¼Œ
// é¿å…æç«¯ç®—å€¼å¾— <span class="hljs-number">0</span> å¯¼è‡´å¸ƒå±€æ¶ˆå¤±ã€‚
<span class="hljs-selector-class">.element</span> {
  <span class="hljs-attribute">width</span>: <span class="hljs-built_in">clamp</span>(<span class="hljs-built_in">calc</span>(<span class="hljs-number">120px</span> / <span class="hljs-built_in">var</span>(--base-width) * <span class="hljs-number">100vw</span>), <span class="hljs-number">1px</span>, <span class="hljs-number">100vw</span>);
}
</code></pre>
<h4 data-id="heading-8">4.Â æ€§èƒ½å¯¹æ¯”å®éªŒ</h4>
<p>å››ç§æ–¹æ¡ˆï¼ˆåª’ä½“æŸ¥è¯¢/rem/scale/CSSå˜é‡ï¼‰åœ¨1920Ã—1080åˆ°7680Ã—4320åˆ†è¾¨ç‡ä¸‹çš„è¡¨ç°æ•°æ®</p>
<p>é€šè¿‡å¯¹å››ç§é€‚é…æ–¹æ¡ˆçš„æ€§èƒ½å¯¹æ¯”å®éªŒï¼Œå¯ä»¥å¾—å‡ºä»¥ä¸‹ç»“è®ºï¼š</p>


















































<table><thead><tr><th>æ–¹æ¡ˆ</th><th>å¸§ç‡æ³¢åŠ¨(Â±fps)</th><th>é‡æ’æ¬¡æ•°/åˆ†é’Ÿ</th><th>ä»£ç é‡(è¡Œ)</th><th>éœ€æ±‚å˜æ›´è€—æ—¶(h)</th><th>8KÂ é¦–æ¬¡æ¸²æŸ“(ms)</th><th>å›¢é˜Ÿåä½œæ•ˆç‡</th></tr></thead><tbody><tr><td>åª’ä½“æŸ¥è¯¢</td><td>15</td><td>20</td><td>ï½1200</td><td>6.5</td><td>280</td><td>ä½</td></tr><tr><td>rem</td><td>8</td><td>12</td><td>ï½850</td><td>4.2</td><td>220</td><td>ä¸­</td></tr><tr><td>scale</td><td>5</td><td>5</td><td>ï½300</td><td>1.8</td><td>160</td><td>é«˜</td></tr><tr><td>CSSå˜é‡+calc</td><td>3</td><td>3</td><td>ï½320</td><td>1.0</td><td>145</td><td>é«˜</td></tr></tbody></table>
<h3 data-id="heading-9">ç¬¬äºŒéƒ¨åˆ†ï¼šä¼ä¸šçº§å¼¹å¹•ç³»ç»Ÿçš„æ¶æ„è®¾è®¡ä¸æ€§èƒ½ä¼˜åŒ–</h3>
<p>æˆ‘æœ¬æ¬¡åšçš„å¤§å±ï¼Œå¸ƒå±€ä¸ºå·¦ä¸­å³å¸ƒå±€ï¼Œå·¦ä¾§ä¸ºç›´æ’­è§‚çœ‹ï¼Œä¸­é—´ä¸ºå®æ—¶å¤§å•åŒºåŸŸï¼Œå³ä¾§ä¸ºé‚€è¯·æ‹‰æ–°æ’è¡Œæ¦œã€‚ä¸ºäº†æ›´å¥½çš„å’Œç”¨æˆ·åé¦ˆï¼Œæˆ‘ä»¬åœ¨å¤§å±é¡¹ç›®ä¸­è¿˜åŠ å…¥äº†å¼¹å¹•åŠŸèƒ½ã€‚ç”±äºå¤§å±çš„åˆ†è¾¨ç‡é€šå¸¸è¾ƒé«˜ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦è€ƒè™‘åˆ°å¤§å±é¡¹ç›®çš„æ€§èƒ½é—®é¢˜ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8a98d764ec1c426c9b7813c871bc07b1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rSe56qd5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766636190&amp;x-signature=6u70BWnoU0RJgnl1dz%2FBHz53YoI%3D" alt="æ•°æ®å¤§å±.png" loading="lazy"/></p>
<h4 data-id="heading-10">1.Â å¼¹å¹•ç³»ç»Ÿçš„æŠ€æœ¯æŒ‘æˆ˜æ‹†è§£</h4>





















<table><thead><tr><th>æŒ‘æˆ˜</th><th>æè¿°</th></tr></thead><tbody><tr><td>é«˜é¢‘æ¶ˆæ¯å¤„ç†å‹åŠ›</td><td>å³°å€¼120æ¡/ç§’ï¼ŒDOMèŠ‚ç‚¹è¾¾3200ä¸ªï¼Œå†…å­˜ä»48MBæ¶¨è‡³310MBï¼ŒGCå¡é¡¿450ms/æ¬¡</td></tr><tr><td>è§†è§‰ç§©åºç»´æŠ¤éœ€æ±‚</td><td>å¼¹å¹•é‡å ç‡è¾¾32%ï¼Œç”¨æˆ·è¯†åˆ«ç‡é™è‡³38%ï¼ˆçœ¼åŠ¨å®éªŒæ•°æ®ï¼‰</td></tr><tr><td>èµ„æºå ç”¨æ§åˆ¶éš¾é¢˜</td><td>DOMèŠ‚ç‚¹æŒç»­å¢é•¿ï¼Œé•¿æœŸè¿è¡Œåæ€§èƒ½ä¸‹é™ç”šè‡³å´©æºƒ</td></tr></tbody></table>
<h4 data-id="heading-11">2.Â æ ¸å¿ƒæ¨¡å—çš„å®ç°åŸç†</h4>
<p>ç±»å‹ç³»ç»Ÿè®¾è®¡ï¼šåŸºäºTypeScriptçš„æ¶ˆæ¯ç»“æ„ä¸çŠ¶æ€ç®¡ç†ï¼ˆä¸ºä»€ä¹ˆisRemovingæ ‡è®°æ˜¯å¿…è¦çš„ï¼Ÿï¼‰</p>
<pre><code class="hljs language-js" lang="js">interface <span class="hljs-title class_">Message</span> {
  <span class="hljs-attr">id</span>: string;
  <span class="hljs-attr">content</span>: string;
  <span class="hljs-attr">isRemoving</span>: boolean;
}
isRemoving <span class="hljs-comment">// æ ‡è®°ç”¨äºæ ‡è¯†æ¶ˆæ¯æ˜¯å¦æ­£åœ¨ç§»é™¤ï¼Œè¿™å¯¹äºæ¶ˆæ¯çš„ç”Ÿå‘½å‘¨æœŸç®¡ç†éå¸¸é‡è¦ã€‚</span>
</code></pre>
<p>é˜Ÿåˆ—æœºåˆ¶ï¼šåŒé˜Ÿåˆ—ï¼ˆnormal/invitationï¼‰çš„ä¼˜å…ˆçº§è°ƒåº¦ç­–ç•¥</p>
<p>å¼¹å¹•ç³»ç»Ÿé‡‡ç”¨åŒé˜Ÿåˆ—æœºåˆ¶ï¼Œåˆ†ä¸ºæ™®é€šæ¶ˆæ¯é˜Ÿåˆ—å’Œé‚€è¯·æ¶ˆæ¯é˜Ÿåˆ—ã€‚é€šè¿‡ä¼˜å…ˆçº§è°ƒåº¦ç­–ç•¥ï¼Œå¯ä»¥ç¡®ä¿é‡è¦æ¶ˆæ¯ä¼˜å…ˆå±•ç¤ºï¼Œé‡‡ç”¨æŠ¢å å¼ä¼˜å…ˆçº§ï¼š</p>
<ul>
<li>
<p>é‚€è¯·é˜Ÿåˆ—æœ‰æ–°æ¶ˆæ¯æ—¶ï¼Œè‹¥å½“å‰æ™®é€šå¼¹å¹•å·²æ’­æ”¾Â â‰¤50%Â æ—¶é•¿ï¼Œç«‹å³æš‚åœå¹¶æ’å…¥é‚€è¯·æ¶ˆæ¯ï¼›</p>
</li>
<li>
<p>æ™®é€šå¼¹å¹•è¢«æŠ¢å åé‡æ–°å…¥é˜Ÿï¼Œç­‰å¾…ä¸‹ä¸€è½®æ’­æ”¾ã€‚</p>
</li>
</ul>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> <span class="hljs-attr">normalQueue</span>: <span class="hljs-title class_">Message</span>[ ] = [ ];
<span class="hljs-keyword">const</span> <span class="hljs-attr">invitationQueue</span>: <span class="hljs-title class_">Message</span>[ ] = [ ];

<span class="hljs-comment">/* æ’­æ”¾ä¸€æ¡æ¶ˆæ¯ */</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">play</span> = (<span class="hljs-params">m: Message</span>) =&gt; {
  <span class="hljs-title function_">setMsg</span>(m);
  startRef.<span class="hljs-property">current</span> = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();
  <span class="hljs-keyword">const</span> dur = m.<span class="hljs-property">duration</span> ?? <span class="hljs-number">4000</span>;
  timerRef.<span class="hljs-property">current</span> = <span class="hljs-variable language_">window</span>.<span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-title function_">setMsg</span>(<span class="hljs-literal">null</span>);
  }, dur);
};

<span class="hljs-comment">/* æŠ¢å é€»è¾‘ */</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">tryPlay</span> = (<span class="hljs-params">m: Message, isInvite: <span class="hljs-built_in">boolean</span></span>) =&gt; {
    <span class="hljs-keyword">if</span> (!msg) {                 <span class="hljs-comment">// ç©ºé—²ï¼Œç›´æ¥æ’­</span>
      <span class="hljs-title function_">play</span>(m);
      <span class="hljs-keyword">return</span>;
    }
    <span class="hljs-keyword">if</span> (isInvite) {             <span class="hljs-comment">// é‚€è¯·æ¶ˆæ¯</span>
      <span class="hljs-keyword">const</span> played = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>() - startRef.<span class="hljs-property">current</span>;
      <span class="hljs-keyword">const</span> total = msg.<span class="hljs-property">duration</span> ?? <span class="hljs-number">4000</span>;
      <span class="hljs-keyword">if</span> (played / total &lt;= <span class="hljs-number">0.5</span>) {          <span class="hljs-comment">// â‰¤50% æ—¶é•¿</span>
        <span class="hljs-variable language_">window</span>.<span class="hljs-built_in">clearTimeout</span>(timerRef.<span class="hljs-property">current</span>);
        <span class="hljs-title function_">pushNormal</span>(msg);                    <span class="hljs-comment">// è¢«æŠ¢å çš„æ™®é€šå¼¹å¹•é‡æ–°å…¥é˜Ÿ</span>
        <span class="hljs-title function_">play</span>(m);
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-comment">/* è¶…è¿‡ 50%ï¼Œç­‰å½“å‰æ’­å®Œå†æ’­é‚€è¯· */</span>
        <span class="hljs-variable language_">window</span>.<span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">play</span>(m), (total - played));
      }
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-comment">/* æ™®é€šæ¶ˆæ¯ï¼Œç›´æ¥æ’é˜Ÿï¼ˆå¤–éƒ¨å·²ç»æ’å¥½äº†ï¼‰ */</span>
    }
  };

<span class="hljs-keyword">function</span> <span class="hljs-title function_">processQueue</span>(<span class="hljs-params"/>) {
Â Â <span class="hljs-keyword">if</span> (invitationQueue.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span>) {
Â Â Â Â <span class="hljs-title function_">tryPlay</span>(invitationQueue.<span class="hljs-title function_">shift</span>()!, <span class="hljs-literal">true</span>)
Â Â } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (normalQueue.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span>) {
Â Â Â Â <span class="hljs-title function_">tryPlay</span>(normalQueue.<span class="hljs-title function_">shift</span>()!, <span class="hljs-literal">false</span>)
Â Â }
}
</code></pre>
<p>èŠ‚æµä¸é™æµï¼šä»â€œå µâ€åˆ°â€œç–â€çš„æµé‡æ§åˆ¶å“²å­¦ï¼ˆthrottleå‡½æ•°çš„å‚æ•°è°ƒæ ¡é€»è¾‘ï¼‰,throttleÂ é™æµå‡½æ•°Â limitÂ åŠ¨æ€è®¡ç®—,ä¿è¯æ¸²æŸ“çº¿ç¨‹å–˜æ¯ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">/* --------------- åŠ¨æ€ throttle --------------- */</span>
<span class="hljs-keyword">let</span> messageRate = <span class="hljs-number">0</span>;        <span class="hljs-comment">// å®æ—¶æ¡/ç§’</span>
<span class="hljs-keyword">let</span> lastReset = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();
<span class="hljs-keyword">let</span> count = <span class="hljs-number">0</span>;

<span class="hljs-comment">/* ä¸šåŠ¡å±‚æ¯æ¥ä¸€æ¡æ¶ˆæ¯è°ƒç”¨ä¸€æ¬¡å³å¯ */</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">updateMessageRate</span>(<span class="hljs-params"/>) {
  count++;
  <span class="hljs-keyword">const</span> now = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();
  <span class="hljs-keyword">const</span> elapsed = (now - lastReset) / <span class="hljs-number">1000</span>;
  <span class="hljs-keyword">if</span> (elapsed &gt;= <span class="hljs-number">1</span>) {          <span class="hljs-comment">// æ¯ç§’åˆ·æ–°ä¸€æ¬¡</span>
    messageRate = count / elapsed;
    count = <span class="hljs-number">0</span>;
    lastReset = now;
  }
}

<span class="hljs-comment">/* åŠ¨æ€è®¡ç®— limit */</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">getLimit</span> = (<span class="hljs-params"/>) =&gt; <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(<span class="hljs-number">100</span>, <span class="hljs-number">1000</span> - messageRate * <span class="hljs-number">6</span>);

<span class="hljs-comment">/**
 * æ”¯æŒåŠ¨æ€ limit çš„ throttle
 * <span class="hljs-doctag">@param</span> func    çœŸæ­£è¦æ‰§è¡Œçš„å‡½æ•°
 * <span class="hljs-doctag">@param</span> getLim  è¿”å›å½“å‰ limit çš„å‡½æ•°ï¼ˆå¯çœç•¥ï¼Œé»˜è®¤ç”¨å†…ç½® getLimitï¼‰
 */</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> throttle&lt;T <span class="hljs-keyword">extends</span> (...<span class="hljs-attr">args</span>: <span class="hljs-built_in">any</span>[]) =&gt; <span class="hljs-built_in">void</span>&gt;(
  <span class="hljs-attr">func</span>: T,
  <span class="hljs-attr">getLim</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">number</span> = getLimit
): T {
  <span class="hljs-keyword">let</span> lastRan = <span class="hljs-number">0</span>;
  <span class="hljs-keyword">let</span> <span class="hljs-attr">timer</span>: <span class="hljs-title class_">ReturnType</span>&lt;<span class="hljs-keyword">typeof</span> <span class="hljs-built_in">setTimeout</span>&gt; | <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>;

  <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span> (<span class="hljs-params"><span class="hljs-variable language_">this</span>: <span class="hljs-built_in">any</span>, ...args: Parameters&lt;T&gt;</span>) {
    <span class="hljs-keyword">const</span> limit = <span class="hljs-title function_">getLim</span>();          <span class="hljs-comment">// æ¯æ¬¡æ‰§è¡Œå‰é‡æ–°è®¡ç®—</span>
    <span class="hljs-keyword">const</span> now = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();
    <span class="hljs-keyword">const</span> remain = limit - (now - lastRan);

    <span class="hljs-keyword">if</span> (remain &lt;= <span class="hljs-number">0</span>) {
      func.<span class="hljs-title function_">apply</span>(<span class="hljs-variable language_">this</span>, args);
      lastRan = now;
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-keyword">if</span> (timer) <span class="hljs-built_in">clearTimeout</span>(timer);
      timer = <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
        func.<span class="hljs-title function_">apply</span>(<span class="hljs-variable language_">this</span>, args);
        lastRan = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();
      }, remain);
    }
  } <span class="hljs-keyword">as</span> T;
}
</code></pre>
<h4 data-id="heading-12">3.Â æ€§èƒ½ä¼˜åŒ–çš„äº”å¤§ç»´åº¦</h4>
<p>æƒé‡è®¡ç®—æ¨¡å‹ï¼šå¦‚ä½•ç”¨â€œå­˜åœ¨æ—¶é—´+è¶…æ—¶æƒ©ç½šâ€å…¬å¼ç­›é€‰é«˜ä»·å€¼æ¶ˆæ¯</p>
<p>ä¸ºäº†ç­›é€‰é«˜ä»·å€¼æ¶ˆæ¯ï¼Œå¯ä»¥é‡‡ç”¨â€œå­˜åœ¨æ—¶é—´+è¶…æ—¶æƒ©ç½šâ€çš„æƒé‡è®¡ç®—æ¨¡å‹ã€‚é€šè¿‡è¿™ç§æ–¹å¼ï¼Œå¯ä»¥ä¼˜å…ˆå±•ç¤ºé‡è¦æ¶ˆæ¯ã€‚ä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-js" lang="js">Â Â <span class="hljs-keyword">const</span> calculateMessageWeight = (<span class="hljs-attr">message</span>: <span class="hljs-title class_">MessageItem</span>): <span class="hljs-function"><span class="hljs-params">number</span> =&gt;</span> {
Â Â Â Â <span class="hljs-keyword">const</span> now = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();
Â Â Â Â <span class="hljs-keyword">const</span> lifetime = now - message.<span class="hljs-property">timestamp</span>;

Â Â Â Â <span class="hljs-comment">// æƒé‡ = å­˜åœ¨æ—¶é—´(ç§’) + æ˜¯å¦å·²è¶…è¿‡æ˜¾ç¤ºæ—¶é•¿(æ˜¯åˆ™+1000)</span>
Â Â Â Â <span class="hljs-keyword">return</span> (lifetime / <span class="hljs-number">1000</span>) + (lifetime &gt; displayDuration ? <span class="hljs-number">1000</span> : <span class="hljs-number">0</span>);
Â Â };
</code></pre>
<p>åŠ¨ç”»ä¸DOMï¼šsetTimeouté…åˆCSSåŠ¨ç”»çš„å¹³æ»‘ç§»é™¤æ–¹æ¡ˆï¼ˆé¿å…layoutÂ thrashingï¼‰</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// å¹³æ»‘ç§»é™¤å…ƒç´ ï¼ˆå¯å•æ¡ä¹Ÿå¯æ‰¹é‡ï¼‰</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">smoothRemoveElement</span> = (<span class="hljs-params">
  elementId: string | string[], <span class="hljs-comment">// æ”¯æŒå• ID æˆ–æ•°ç»„</span>
  containerRef: React.RefObject&lt;HTMLDivElement&gt;,
  queue: MessageItem[]
</span>) =&gt; {
  <span class="hljs-keyword">const</span> ids = <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">isArray</span>(elementId) ? elementId : [elementId];
  <span class="hljs-keyword">const</span> <span class="hljs-attr">toRemove</span>: <span class="hljs-title class_">HTMLElement</span>[] = [];

  <span class="hljs-comment">/* ---------- 1. æ‰¹é‡è¯» ---------- */</span>
  ids.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">id</span> =&gt;</span> {
    <span class="hljs-keyword">const</span> idx = queue.<span class="hljs-title function_">findIndex</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> item.<span class="hljs-property">id</span> === id);
    <span class="hljs-keyword">if</span> (idx !== -<span class="hljs-number">1</span> &amp;&amp; !queue[idx].<span class="hljs-property">isRemoving</span>) {
      queue[idx] = { ...queue[idx], <span class="hljs-attr">isRemoving</span>: <span class="hljs-literal">true</span> };
    }
    <span class="hljs-keyword">const</span> el = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(id);
    <span class="hljs-keyword">if</span> (el &amp;&amp; containerRef.<span class="hljs-property">current</span>?.<span class="hljs-title function_">contains</span>(el)) {
      <span class="hljs-comment">// å¼ºåˆ¶åŒæ­¥å¸ƒå±€ä»…å‘ç”Ÿåœ¨è¿™é‡Œï¼ˆä¸€æ¬¡ï¼‰</span>
      <span class="hljs-keyword">void</span> el.<span class="hljs-property">offsetTop</span>;
      toRemove.<span class="hljs-title function_">push</span>(el);
    }
  });

  <span class="hljs-comment">/* ---------- 2. æ‰¹é‡å†™ ---------- */</span>
  toRemove.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">el</span> =&gt;</span> el.<span class="hljs-property">classList</span>.<span class="hljs-title function_">add</span>(<span class="hljs-string">'fade-out'</span>));

  <span class="hljs-comment">/* ---------- 3. ä¸‹ä¸€å®ä»»åŠ¡å†ç§»é™¤ ---------- */</span>
  <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">if</span> (!containerRef.<span class="hljs-property">current</span>) <span class="hljs-keyword">return</span>;
    toRemove.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">el</span> =&gt;</span> {
      <span class="hljs-keyword">if</span> (containerRef.<span class="hljs-property">current</span>!.<span class="hljs-title function_">contains</span>(el)) {
        containerRef.<span class="hljs-property">current</span>!.<span class="hljs-title function_">removeChild</span>(el);
      }
      displayedNormalIds.<span class="hljs-property">current</span>.<span class="hljs-title function_">delete</span>(el.<span class="hljs-property">id</span>);
      <span class="hljs-keyword">const</span> idx = queue.<span class="hljs-title function_">findIndex</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> item.<span class="hljs-property">id</span> === el.<span class="hljs-property">id</span>);
      <span class="hljs-keyword">if</span> (idx !== -<span class="hljs-number">1</span>) queue.<span class="hljs-title function_">splice</span>(idx, <span class="hljs-number">1</span>);
    });
    <span class="hljs-title function_">setUpdateTrigger</span>(<span class="hljs-function"><span class="hljs-params">prev</span> =&gt;</span> prev + <span class="hljs-number">1</span>);
  }, <span class="hljs-number">0</span>);   <span class="hljs-comment">// 0 ms å³å¯ï¼Œæ”¾åˆ°ä¸‹ä¸€å®ä»»åŠ¡</span>
};
</code></pre>
<p>å›¾ç‰‡é¢„åŠ è½½ï¼šç¼“å­˜ç­–ç•¥ä¸å¤±è´¥é™çº§çš„ç”¨æˆ·ä½“éªŒä¿éšœ</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> preloadImage = (<span class="hljs-attr">url</span>: string): <span class="hljs-title class_">Promise</span>&lt;boolean&gt; =&gt; {
Â Â Â Â <span class="hljs-comment">// å¦‚æœå·²åŠ è½½è¿‡ï¼Œç›´æ¥è¿”å›æˆåŠŸ</span>
Â Â Â Â <span class="hljs-keyword">if</span> (preloadedImages.<span class="hljs-title function_">has</span>(url)) {
Â Â Â Â Â Â <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>(<span class="hljs-literal">true</span>);
Â Â Â Â }
Â Â Â Â <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
Â Â Â Â Â Â <span class="hljs-keyword">const</span> img = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Image</span>();
Â Â Â Â Â Â <span class="hljs-comment">// å›¾ç‰‡åŠ è½½å®Œæˆ</span>
Â Â Â Â Â Â img.<span class="hljs-property">onload</span> = <span class="hljs-function">() =&gt;</span> {
Â Â Â Â Â Â Â Â preloadedImages.<span class="hljs-title function_">add</span>(url); <span class="hljs-comment">// åŠ å…¥ç¼“å­˜</span>
Â Â Â Â Â Â Â Â <span class="hljs-title function_">resolve</span>(<span class="hljs-literal">true</span>);
Â Â Â Â Â Â };
Â Â Â Â Â Â <span class="hljs-comment">// å›¾ç‰‡åŠ è½½å¤±è´¥</span>
Â Â Â Â Â Â img.<span class="hljs-property">onerror</span> = <span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> {
Â Â Â Â Â Â Â Â <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`å›¾ç‰‡é¢„åŠ è½½å¤±è´¥: <span class="hljs-subst">${url}</span>`</span>, error);
Â Â Â Â Â Â Â Â <span class="hljs-title function_">resolve</span>(<span class="hljs-literal">false</span>);
Â Â Â Â Â Â };
Â Â Â Â Â Â img.<span class="hljs-property">src</span> = url; <span class="hljs-comment">// å¼€å§‹åŠ è½½</span>
Â Â Â Â });
Â Â };
</code></pre>
<p>å†…å­˜ç®¡ç†ï¼šé˜Ÿåˆ—é•¿åº¦é™åˆ¶ä¸DOMèŠ‚ç‚¹å®æ—¶æ¸…ç†çš„è”åŠ¨æœºåˆ¶</p>
<p>ä¸ºäº†æ§åˆ¶å†…å­˜å ç”¨ï¼Œå¼¹å¹•ç³»ç»Ÿé‡‡ç”¨é˜Ÿåˆ—é•¿åº¦é™åˆ¶(æ ¹æ®å±å¹•é«˜åº¦åŠ¨æ€è®¡ç®—)å’ŒDOMèŠ‚ç‚¹å®æ—¶æ¸…ç†çš„è”åŠ¨æœºåˆ¶ã€‚é€šè¿‡è¿™ç§æ–¹å¼ï¼Œå¯ä»¥æœ‰æ•ˆé˜²æ­¢å†…å­˜æ³„æ¼ã€‚ä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">SINGLE_HEIGHT</span> = <span class="hljs-number">40</span>;          <span class="hljs-comment">// é»˜è®¤å•æ¡é«˜åº¦ï¼Œå®é™…ä»¥ CSS ä¸ºå‡†</span>
<span class="hljs-keyword">let</span> maxQueueLength = <span class="hljs-number">100</span>;          <span class="hljs-comment">// å…ˆç»™ä¸€ä¸ªé»˜è®¤å€¼</span>

<span class="hljs-keyword">const</span> <span class="hljs-title function_">calcMaxQueueLength</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">const</span> h = <span class="hljs-variable language_">window</span>.<span class="hljs-property">innerHeight</span> || <span class="hljs-variable language_">document</span>.<span class="hljs-property">documentElement</span>.<span class="hljs-property">clientHeight</span>;
  <span class="hljs-keyword">return</span> <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(<span class="hljs-number">10</span>, <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(h / <span class="hljs-variable constant_">SINGLE_HEIGHT</span> * <span class="hljs-number">2</span>));
};

<span class="hljs-comment">/* åˆå§‹åŒ– + ç›‘å¬ resize */</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">startResizeObserver</span>(<span class="hljs-params"/>) {
  maxQueueLength = <span class="hljs-title function_">calcMaxQueueLength</span>();
  <span class="hljs-keyword">const</span> onResize = <span class="hljs-title function_">throttle</span>(<span class="hljs-function">() =&gt;</span> {
    maxQueueLength = <span class="hljs-title function_">calcMaxQueueLength</span>();
  }, <span class="hljs-number">500</span>);
  <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'resize'</span>, onResize);
  <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">'resize'</span>, onResize);
}

<span class="hljs-comment">/* å¤–éƒ¨ç›´æ¥è¯»å½“å‰ä¸Šé™ */</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">getMaxQueueLength</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> maxQueueLength;
}

<span class="hljs-comment">// -------------------------------------------------------------------------</span>
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">MAX_QUEUE_LENGTH</span> = <span class="hljs-title function_">getMaxQueueLength</span>();
<span class="hljs-comment">// æ·»åŠ æ¶ˆæ¯ï¼ˆå¸¦èŠ‚æµå¤„ç†ï¼‰</span>
<span class="hljs-keyword">const</span> addNormalMessage = <span class="hljs-title function_">useCallback</span>(
<span class="hljs-title function_">throttle</span>(throttleInterval, <span class="hljs-function">(<span class="hljs-params"> orderInfo:AddOrderMessage</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> <span class="hljs-attr">message</span>: <span class="hljs-title class_">NormalMessage</span> = {
    <span class="hljs-attr">id</span>: <span class="hljs-title function_">generateId</span>(<span class="hljs-title class_">BulletType</span>.<span class="hljs-property">NORMAL</span>),
    <span class="hljs-attr">type</span>: <span class="hljs-title class_">BulletType</span>.<span class="hljs-property">NORMAL</span>,
    <span class="hljs-attr">timestamp</span>: <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>(),
    ...orderInfo
  };
  <span class="hljs-comment">// ç¡®ä¿é˜Ÿåˆ—ä¸è¶…è¿‡æœ€å¤§é•¿åº¦</span>
  <span class="hljs-keyword">if</span> (normalQueue.<span class="hljs-property">current</span>.<span class="hljs-property">length</span> &gt;= <span class="hljs-variable constant_">MAX_QUEUE_LENGTH</span>) {
    <span class="hljs-comment">// ç§»é™¤æœ€æ—©çš„æ¶ˆæ¯</span>
    <span class="hljs-keyword">const</span> oldest = normalQueue.<span class="hljs-property">current</span>.<span class="hljs-title function_">shift</span>();
    <span class="hljs-keyword">if</span> (oldest &amp;&amp; !oldest.<span class="hljs-property">isRemoving</span>) {
      <span class="hljs-title function_">smoothRemoveElement</span>(oldest.<span class="hljs-property">id</span>, normalContainerRef, normalQueue.<span class="hljs-property">current</span>);
    }
  }
  normalQueue.<span class="hljs-property">current</span>.<span class="hljs-title function_">push</span>(message);
  <span class="hljs-keyword">if</span> (!normalIsProcessing.<span class="hljs-property">current</span>) {
    <span class="hljs-title function_">processNormalQueue</span>();
  }
}),
[ throttleInterval, processNormalQueue]
);
</code></pre>
<p>å¤–éƒ¨æ¥å£è®¾è®¡ï¼šuseImperativeHandleæš´éœ²çš„å¯æ§æ€§ä¸å°è£…è¾¹ç•Œå¹³è¡¡</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// æä¾›ç»™çˆ¶ç»„ä»¶çš„æ§åˆ¶æ–¹æ³•</span>
Â Â <span class="hljs-title function_">useImperativeHandle</span>(ref, <span class="hljs-function">() =&gt;</span> ({
Â Â Â Â addNormalMessage,
Â Â Â Â addInvitationMessage,
Â Â Â Â clearAll,
Â Â Â Â <span class="hljs-attr">getNormalQueueLength</span>: <span class="hljs-function">() =&gt;</span> normalQueue.<span class="hljs-property">current</span>.<span class="hljs-property">length</span>,
Â Â Â Â <span class="hljs-attr">getInvitationQueueLength</span>: <span class="hljs-function">() =&gt;</span> invitationQueue.<span class="hljs-property">current</span>.<span class="hljs-property">length</span>,
Â Â Â Â <span class="hljs-attr">getNormalDisplayCount</span>: <span class="hljs-function">() =&gt;</span> displayedNormalIds.<span class="hljs-property">current</span>.<span class="hljs-property">size</span>,
Â Â Â Â <span class="hljs-attr">setSoundVolume</span>: <span class="hljs-function">(<span class="hljs-params">volume: number</span>) =&gt;</span> {
Â Â Â Â Â Â soundVolumeRef.<span class="hljs-property">current</span> = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(<span class="hljs-number">0</span>, <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(<span class="hljs-number">1</span>, volume)); <span class="hljs-comment">// é™åˆ¶éŸ³é‡0-1</span>
Â Â Â Â },
Â Â Â Â <span class="hljs-comment">// éŸ³é¢‘ç›¸å…³å¤–éƒ¨æ¥å£</span>
Â Â Â Â initAudio,
Â Â Â Â isAudioInitialized,
Â Â Â Â cleanAudio,
Â Â Â Â openSoundEffectHandle,
Â Â }));
</code></pre>
<h4 data-id="heading-13">4.Â ä¸šåŠ¡åœºæ™¯çš„æ‰©å±•é€‚é…</h4>
<ul>
<li>
<p>ç›´æ’­åœºæ™¯ï¼šæ¶ˆæ¯ä¼˜å…ˆçº§åŠ¨æ€è°ƒæ•´ï¼ˆå¦‚å¤§è®¢å•æ¶ˆæ¯ï¼‰</p>
<p>å†åŸæœ‰çš„æƒé‡å‡½æ•°ä¸­æ–°å¢priorityWeightsä¼˜å…ˆçº§æƒé‡é…ç½®ã€businessBonusesä¸šåŠ¡åœºæ™¯åŠ åˆ†é…ç½®æ¥å®ç°æ¶ˆæ¯ä¼˜å…ˆçº§åŠ¨æ€è°ƒæ•´ã€‚</p>
<p><code>å…¬å¼ï¼šæœ€ç»ˆæƒé‡Â =Â åŸæœ‰æ·˜æ±°æƒé‡Â -Â ä¼˜å…ˆçº§å‡æƒÂ -Â ä¸šåŠ¡åŠ åˆ†</code></p>
</li>
<li>
<p>ä½ç½‘é€Ÿç¯å¢ƒï¼šæ¶ˆæ¯æ›´æ–°ç­–ç•¥</p>
</li>
</ul>
<p>å¼±ç½‘ä¸‹è‡ªåŠ¨å…³é—­éæ ¸å¿ƒåŠŸèƒ½ï¼ˆå¦‚å¼¹å¹•æ¸å˜åŠ¨ç”»ã€å›¾ç‰‡åŠ è½½ï¼‰ï¼Œä»…ä¿ç•™æ–‡æœ¬å¼¹å¹•çš„åŸºç¡€ç§»åŠ¨æ•ˆæœï¼›å½“ç½‘ç»œå»¶è¿Ÿè¶…è¿‡Â 3Â ç§’æ—¶ï¼Œæç¤ºç”¨æˆ·Â â€œå½“å‰ç½‘ç»œä¸ä½³ï¼Œå¼¹å¹•å·²å¼€å¯çœæµæ¨¡å¼â€ã€‚</p>
<h3 data-id="heading-14">ç¬¬ä¸‰éƒ¨åˆ†ï¼šæŠ€æœ¯èåˆä¸å·¥ç¨‹åŒ–å®è·µ</h3>
<h4 data-id="heading-15">1.Â å¤§å±é¡¹ç›®çš„æŠ€æœ¯æ ˆååŒ</h4>
<ul>
<li>CSSå˜é‡ä¸æ•°æ®å¯è§†åŒ–åº“ï¼ˆECharts/Chart.jsï¼‰çš„å“åº”å¼é…ç½®ç»“åˆ</li>
</ul>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> chart = echarts.<span class="hljs-title function_">init</span>(<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'chart'</span>));

chart.<span class="hljs-title function_">setOption</span>({
  <span class="hljs-attr">responsive</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">resize</span>: {
    <span class="hljs-attr">width</span>: <span class="hljs-string">`calc(800px / var(--base-width) * 100vw)`</span>,
    <span class="hljs-attr">height</span>: <span class="hljs-string">`calc(600px / var(--base-height) * 100vh)`</span>
  }
});
</code></pre>
<ul>
<li>
<p>å¼¹å¹•ç³»ç»Ÿä¸WebSocketå®æ—¶é€šä¿¡çš„æ–­çº¿é‡è¿å¤„ç†</p>
<p>æœ¬é¡¹ç›®ä¸­é•¿æ¶ˆæ¯ä½¿ç”¨çš„<code>é˜¿é‡Œäº‘ç›´æ’­æ¶ˆæ¯äº’åŠ¨ç¾¤ç»„</code>ï¼Œè‡ªå¸¦æ–­çº¿é‡è¿æœºåˆ¶ï¼Œå¦‚æœä½ çš„é¡¹ç›®éœ€è¦ï¼Œå¯ä»¥é€šè¿‡å¿ƒè·³æ£€æµ‹ç›‘æ§è¿æ¥çŠ¶æ€ï¼Œå¼‚å¸¸æ—¶è‡ªåŠ¨åˆ‡æ¢å¤‡ç”¨æœåŠ¡åœ°å€ï¼Œä¿éšœæ¶ˆæ¯æ¥æ”¶ä¸ä¸­æ–­ï¼Œå¢åŠ é‡è¯•æ¬¡æ•°ç­‰æ–¹å¼ã€‚</p>
</li>
<li>
<p>å¾®å‰ç«¯æ¶æ„ä¸‹çš„å¤§å±æ¨¡å—é€‚é…æ–¹æ¡ˆ</p>
</li>
</ul>
<p>åœ¨å¾®å‰ç«¯åœºæ™¯ä¸‹ï¼Œå°†å¤§å±é€‚é…æ–¹æ¡ˆå’Œå¼¹å¹•ç³»ç»Ÿå°è£…ä¸º<code>ç‹¬ç«‹æ¨¡å—</code>ï¼Œé€šè¿‡åº”ç”¨é—´é€šä¿¡ä¼ é€’é…ç½®å‚æ•°ï¼Œç¡®ä¿æ¨¡å—åœ¨ä¸åŒä¸»åº”ç”¨ä¸­éƒ½èƒ½æ­£å¸¸é€‚é…ï¼ŒåŒæ—¶é¿å…æ ·å¼æ±¡æŸ“å’Œè„šæœ¬å†²çªã€‚</p>
<h4 data-id="heading-16">2.Â å¯å¤ç”¨ç»„ä»¶çš„è®¾è®¡åŸåˆ™</h4>
<ul>
<li>
<p>é…ç½®åŒ–æ€ç»´è½åœ°ã€‚å°†ç»„ä»¶æ ¸å¿ƒå‚æ•°ï¼ˆå¦‚å¼¹å¹•å±•ç¤ºæ—¶é•¿Â displayDurationã€æ·¡å‡ºæ—¶é•¿Â fadeOutDurationã€é€‚é…åŸºå‡†Â baseSizeÂ ç­‰ï¼‰è®¾è®¡ä¸ºå¯é…ç½®é¡¹ï¼Œé€šè¿‡Â propsÂ ä¼ å…¥ï¼Œé¿å…ç¡¬ç¼–ç ã€‚ä¾‹å¦‚å¼¹å¹•ç»„ä»¶ä½¿ç”¨<code>&lt;DanmuManagerÂ displayDuration={3000}Â fadeOutDuration={500}Â /&gt;</code>å³å¯å¿«é€Ÿè°ƒæ•´åŠŸèƒ½ã€‚</p>
</li>
<li>
<p>è¾¹ç•Œæ¡ä»¶å®¹é”™è®¾è®¡ã€‚é’ˆå¯¹ç©ºæ•°æ®åœºæ™¯ï¼Œå±•ç¤ºå‹å¥½æç¤ºæ–‡æ¡ˆï¼›å¤„ç†è¶…é«˜é¢‘æ¶ˆæ¯æ—¶ï¼Œè‡ªåŠ¨è§¦å‘é™æµæœºåˆ¶ï¼›åº”å¯¹å¼‚å¸¸åˆ†è¾¨ç‡ï¼Œé€šè¿‡<code>clamp()</code>å‡½æ•°é™åˆ¶å¸ƒå±€æé™å€¼ï¼Œç¡®ä¿ç»„ä»¶åœ¨æç«¯åœºæ™¯ä¸‹ä¸å´©æºƒã€ä¸ç•¸å˜ã€‚</p>
</li>
<li>
<p>å…¨æ–¹ä½æµ‹è¯•ç­–ç•¥ã€‚ç¼–å†™å•å…ƒæµ‹è¯•è¦†ç›–æ ¸å¿ƒé€»è¾‘ï¼Œé‡ç‚¹æµ‹è¯•é˜Ÿåˆ—è°ƒåº¦ã€æƒé‡è®¡ç®—ã€é€‚é…å…¬å¼ç­‰å…³é”®æ¨¡å—ï¼›å¼•å…¥è§†è§‰å›å½’æµ‹è¯•å·¥å…·ï¼Œå¯¹æ¯”ä¸åŒåˆ†è¾¨ç‡ä¸‹çš„ç»„ä»¶æ¸²æŸ“æ•ˆæœï¼Œç¡®ä¿é€‚é…æ— åå·®ï¼›è¿›è¡Œæ€§èƒ½å‹åŠ›æµ‹è¯•ï¼Œæ¨¡æ‹Ÿæ¯ç§’Â 1000Â æ¡æ¶ˆæ¯çš„é«˜å¹¶å‘åœºæ™¯ï¼ŒéªŒè¯ç»„ä»¶ç¨³å®šæ€§ã€‚</p>
</li>
</ul>
<h4 data-id="heading-17">3.Â è¡Œä¸šæ¡ˆä¾‹æ·±åº¦è§£æ</h4>
<p>åœ¨æœ€è¿‘çš„åŒ11ç›´æ’­ä¸­ï¼Œå¼¹å¹•ç³»ç»Ÿé€šè¿‡åŒé˜Ÿåˆ—è°ƒåº¦ã€é™æµæœºåˆ¶å’ŒÂ DOMÂ ä¼˜åŒ–ï¼Œå®ç°æ¶ˆæ¯å¤„ç†ä¸å¡é¡¿ï¼›é‡‡ç”¨å›¾ç‰‡é¢„åŠ è½½å’Œå¤±è´¥é™çº§ç­–ç•¥ï¼Œæ¶ˆæ¯å±•ç¤ºæˆåŠŸç‡è¾¾Â 99.8%ï¼›å†…å­˜å ç”¨æ§åˆ¶åœ¨åˆç†èŒƒå›´ï¼Œè¿ç»­è¿è¡ŒÂ 8Â å°æ—¶å†…å­˜å¢é•¿ä¸è¶…è¿‡Â 10%ã€‚</p>
<h3 data-id="heading-18">ç»“è¯­ï¼šæŠ€æœ¯é€‰å‹çš„åº•å±‚é€»è¾‘</h3>
<p>å¤§å±å¼€å‘ä¸å¼¹å¹•ç³»ç»Ÿçš„æŠ€æœ¯å®è·µï¼Œæœ¬è´¨æ˜¯å¯¹åœºæ™¯éœ€æ±‚çš„æ·±åº¦æ‹†è§£ä¸åŸç”ŸæŠ€æœ¯çš„æè‡´è¿ç”¨ã€‚æ²¡æœ‰æ”¾ä¹‹å››æµ·è€Œçš†å‡†çš„Â "é“¶å¼¹"ï¼Œåªæœ‰è´´åˆåœºæ™¯çš„æœ€ä¼˜è§£ã€‚</p>
<p>æœªæ¥æŠ€æœ¯è¶‹åŠ¿å°†æœç€<code>"åŸç”ŸÂ CSSÂ èƒ½åŠ›å¼ºåŒ–Â +Â JSÂ è½»é‡åŒ–"</code>æ–¹å‘å‘å±•ã€‚éšç€Â CSSÂ æ–°ç‰¹æ€§çš„æ™®åŠï¼Œæ›´å¤šé€‚é…éœ€æ±‚å¯é€šè¿‡åŸç”ŸÂ CSSÂ å®ç°ï¼›JSÂ å°†èšç„¦äºé€»è¾‘æ§åˆ¶å’ŒåŠ¨æ€äº¤äº’ï¼Œå‡å°‘ä¸å¿…è¦çš„è®¡ç®—æ¶ˆè€—ã€‚</p>
<p>å¯¹å¼€å‘è€…è€Œè¨€ï¼Œè¿™åœºæŠ€æœ¯æ”»åšçš„æ ¸å¿ƒå¯ç¤ºæ˜¯ï¼šä»<code>"å·¥å…·ä¾èµ–"</code>è½¬å‘<code>"åŸç†æŒæ¡"</code>ã€‚åªæœ‰æ·±å…¥ç†è§£Â CSSÂ è®¡ç®—é€»è¾‘ã€æµè§ˆå™¨æ¸²æŸ“æœºåˆ¶å’Œé«˜å¹¶å‘å¤„ç†åŸç†ï¼Œæ‰èƒ½åœ¨å¤æ‚åœºæ™¯ä¸­çµæ´»åº”å˜ï¼Œæ‰“é€ å‡ºé«˜æ€§èƒ½ã€é«˜å¯ç”¨çš„ä¼ä¸šçº§åº”ç”¨ã€‚</p>
<h2 data-id="heading-19">é™„å½•</h2>
<h3 data-id="heading-20">1.Â CSSÂ å˜é‡Â +Â calcÂ ()Â é€‚é…æ¨¡æ¿ä½¿ç”¨æµç¨‹å›¾</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TD
    A[è®¾è®¡ç¨¿å°ºå¯¸ 1920Ã—1080] --&gt;|Step1| B[åœ¨ :root å†™å…¥åŸºå‡†å˜é‡&lt;br/&gt;--base-width / --base-height]
    B --&gt;|Step2| C[ä¸ºå…ƒç´ å£°æ˜ç›®æ ‡å˜é‡&lt;br/&gt;--target-width:960]
    C --&gt;|Step3| D[ä½¿ç”¨ calc å…¬å¼ä¸€æ¬¡æ€§å®Œæˆ pxâ†’vw/vh æ¢ç®—&lt;br/&gt;â†’æŸ¥çœ‹ä¸‹æ–¹ä»£ç ]
</code></pre>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* ä¸‹æ–¹ä»£ç ç¤ºä¾‹ */</span>
<span class="hljs-attribute">width</span>: <span class="hljs-built_in">calc</span>(<span class="hljs-built_in">var</span>(--target-width) / <span class="hljs-built_in">var</span>(--base-width) * <span class="hljs-number">100vw</span>);
</code></pre>
<h3 data-id="heading-21">2.Â å¼¹å¹•ç®¡ç†å™¨ç»„ä»¶Â APIÂ æ–‡æ¡£ä¸å‚æ•°é…ç½®è¡¨Â·Â å‚æ•°è”åŠ¨è¯´æ˜</h3>





















































<table><thead><tr><th>å‚æ•°å</th><th>ç±»å‹</th><th>é»˜è®¤å€¼</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>displayDuration</td><td>number</td><td>3000</td><td>å¼¹å¹•å±•ç¤ºæ—¶é•¿ï¼ˆæ¯«ç§’ï¼‰</td></tr><tr><td>fadeOutDuration</td><td>number</td><td>500</td><td>å¼¹å¹•æ·¡å‡ºåŠ¨ç”»æ—¶é•¿ï¼ˆæ¯«ç§’ï¼‰</td></tr><tr><td>maxQueueLength</td><td>number</td><td>500</td><td>é˜Ÿåˆ—æœ€å¤§é•¿åº¦</td></tr><tr><td>priorityWeight</td><td>object</td><td>{normal:1,Â invitation:3}</td><td>ä¸åŒç±»å‹æ¶ˆæ¯æƒé‡</td></tr><tr><td>throttleTime</td><td>number</td><td>100</td><td>æ¶ˆæ¯å¤„ç†èŠ‚æµæ—¶é—´ï¼ˆæ¯«ç§’ï¼‰</td></tr><tr><td>onMessageClick</td><td>function</td><td>-</td><td>å¼¹å¹•ç‚¹å‡»å›è°ƒå‡½æ•°</td></tr><tr><td>onQueueFull</td><td>function</td><td>-</td><td>é˜Ÿåˆ—æ»¡æ—¶å›è°ƒå‡½æ•°</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-22">å‚æ•°è”åŠ¨é€ŸæŸ¥è¡¨</h3>



































<table><thead><tr><th>è”åŠ¨åœºæ™¯</th><th>è°ƒæ•´å»ºè®®</th><th>åŸå› è¯´æ˜</th></tr></thead><tbody><tr><td><code>displayDuration</code>Â å‡å°ï¼ˆå¦‚Â 3000Â â†’Â 1500Â msï¼‰</td><td><strong>åŒæ­¥é™ä½</strong>Â <code>**throttleTime**</code>ï¼ˆå¦‚Â 100Â â†’Â 50Â msï¼‰</td><td>é¿å…æ¶ˆæ¯å› åœç•™æ—¶é—´å˜çŸ­è€Œå †ç§¯ï¼Œé™ä½è·³å¸§æ¦‚ç‡</td></tr><tr><td><code>maxQueueLength</code>Â å¢å¤§ï¼ˆå¦‚Â 500Â â†’Â 1000ï¼‰</td><td><strong>å¯é€‚åº¦å¢åŠ </strong>Â <code>**throttleTime**</code>ï¼ˆå¦‚Â 100Â â†’Â 120Â msï¼‰</td><td>é˜Ÿåˆ—å®¹é‡å˜å¤§ï¼Œå•æ¬¡æ‰¹å¤„ç†å¯ç¨å¾®æ”¾å®½ï¼Œå‡å°‘Â CPUÂ æŠ¢å </td></tr><tr><td><code>fadeOutDuration</code>Â å¢å¤§ï¼ˆå¦‚Â 500Â â†’Â 800Â msï¼‰</td><td><strong>åŒæ­¥å¢åŠ </strong>Â <code>**displayDuration**</code>ï¼ˆä¿åº•Â +Î”fadeOutï¼‰</td><td>ä¿è¯æ·¡å‡ºåŠ¨ç”»å®Œæ•´å¯è§ï¼Œé˜²æ­¢è¢«æå‰å¼ºåˆ¶ç§»é™¤</td></tr><tr><td>é«˜é¢‘é‚€è¯·æ¶ˆæ¯ï¼ˆ<code>invitation</code>Â æƒé‡Â 3â†’5ï¼‰</td><td><strong>æé«˜</strong>Â <code>**priorityWeight.invitation**</code>Â å¹¶Â <strong>ç¼©çŸ­</strong>Â <code>**throttleTime**</code></td><td>ä¼˜å…ˆæ’é˜Ÿ+æ›´å¿«å¤„ç†ï¼Œç¡®ä¿é‚€è¯·å¼¹å¹•åŠæ—¶æ›å…‰</td></tr><tr><td>ä½ç«¯æœºåœºæ™¯</td><td><strong>åŒæ—¶é™ä½</strong><br/><code>displayDuration</code>Â &amp;Â <code>maxQueueLength</code>Â &amp;Â <code>throttleTime</code></td><td>ä¸‰ç®¡é½ä¸‹ï¼Œå‡å°‘åŒæ—¶å­˜åœ¨çš„Â DOMÂ èŠ‚ç‚¹æ•°å’Œæ¯å¸§è®¡ç®—é‡</td></tr></tbody></table>
<h3 data-id="heading-23">3.Â æ€§èƒ½æµ‹è¯•å·¥å…·ä¸æŒ‡æ ‡ç›‘æ§æ–¹æ¡ˆ</h3>
<ul>
<li>
<p>æ¸²æŸ“æ€§èƒ½æµ‹è¯•ï¼šä½¿ç”¨<code>ChromeÂ DevTools</code>Â çš„Â <code>Performance</code>Â é¢æ¿ï¼Œå½•åˆ¶ä¸åŒåˆ†è¾¨ç‡ä¸‹çš„é¡µé¢æ¸²æŸ“è¿‡ç¨‹ï¼Œåˆ†æå¸§ç‡ã€é‡æ’é‡ç»˜æ¬¡æ•°ã€ä¸»çº¿ç¨‹è€—æ—¶ã€‚</p>
</li>
<li>
<p>å†…å­˜ç›‘æ§ï¼šé€šè¿‡Â <code>ChromeÂ DevTools</code>Â çš„Â <code>Memory</code>Â é¢æ¿ï¼Œå®šæœŸæ‹æ‘„å †å¿«ç…§ï¼Œç›‘æ§å†…å­˜å ç”¨å˜åŒ–ï¼Œæ’æŸ¥å†…å­˜æ³„æ¼é—®é¢˜ã€‚</p>
</li>
<li>
<p>å¹¶å‘å‹åŠ›æµ‹è¯•ï¼šä½¿ç”¨<code>JMeter</code>æ¨¡æ‹Ÿé«˜å¹¶å‘æ¶ˆæ¯å‘é€ï¼Œæµ‹è¯•å¼¹å¹•ç³»ç»Ÿåœ¨æ¯ç§’Â 100-1000Â æ¡æ¶ˆæ¯åœºæ™¯ä¸‹çš„å¤„ç†èƒ½åŠ›ã€‚</p>
</li>
<li>
<p>çº¿ä¸Šç›‘æ§ï¼šé›†æˆ<code>Sentry</code>ç­‰ç›‘æ§å·¥å…·ï¼Œæ”¶é›†çº¿ä¸Šç¯å¢ƒçš„å¸§ç‡ã€é”™è¯¯ç‡ã€åŠ è½½æ—¶é—´ç­‰æŒ‡æ ‡ï¼Œå®æ—¶å‘Šè­¦å¼‚å¸¸æƒ…å†µã€‚</p>
</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[é‡‘ä»“æ•°æ®åº“(KingbaseES) å¼€å‘å®æˆ˜ï¼šå¸¸è§è¿ç§»æŒ‘æˆ˜ä¸æŠ€æœ¯è§£æ]]></title>    <link>https://juejin.cn/post/7584742635502436379</link>    <guid>https://juejin.cn/post/7584742635502436379</guid>    <pubDate>2025-12-18T04:35:36.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7584742635502436379" data-draft-id="7584787119273672731" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="é‡‘ä»“æ•°æ®åº“(KingbaseES) å¼€å‘å®æˆ˜ï¼šå¸¸è§è¿ç§»æŒ‘æˆ˜ä¸æŠ€æœ¯è§£æ"/> <meta itemprop="keywords" content="æ•°æ®åº“"/> <meta itemprop="datePublished" content="2025-12-18T04:35:36.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å€”å¼ºçš„çŸ³å¤´_"/> <meta itemprop="url" content="https://juejin.cn/user/3168119757484368"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            é‡‘ä»“æ•°æ®åº“(KingbaseES) å¼€å‘å®æˆ˜ï¼šå¸¸è§è¿ç§»æŒ‘æˆ˜ä¸æŠ€æœ¯è§£æ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3168119757484368/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å€”å¼ºçš„çŸ³å¤´_
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-18T04:35:36.000Z" title="Thu Dec 18 2025 04:35:36 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-18
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f9f18ac0e98b4e7b8285175c0965fd48~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YCU5by655qE55-z5aS0Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766637336&amp;x-signature=93MGeFYTYzUfV0Z5XVa44hHYzRw%3D" alt="8ce5353c2dd237e589bb36a08293fa57.jpg" loading="lazy"/></p>
<p>å›½äº§åŒ–æ›¿ä»£æµªæ½®ä¹‹ä¸‹ï¼Œé‡‘ä»“æ•°æ®åº“ï¼ˆå³ KingbaseESï¼Œä¸šå†…åˆå¸¸ç§°ä¹‹ä¸º KESï¼‰æœ‰ç€ä¸€é¡¹ç‹¬é—¨ç»æŠ€ï¼Œé‚£å°±æ˜¯å‡ºè‰²çš„ Oracle å…¼å®¹èƒ½åŠ›å’Œå¼ºå¤§çš„å†…æ ¸å®åŠ›ï¼Œäºæ˜¯å®ƒæ¸æ¸æˆä¸ºè¯¸å¤šä¼ä¸šæ‰§è¡Œæ ¸å¿ƒç³»ç»Ÿè¿ç§»æ—¶çš„ä¼˜å…ˆé€‰æ‹©ã€‚</p>
<p>KES çš„è®¾è®¡æ€è·¯å¾ˆæœ‰è¶£ï¼Œå…¶åº•å±‚ä¾é å…ˆè¿›çš„å¼€æºå†…æ ¸ï¼Œä¸Šæ–¹åˆ™ç´§å¯†å¥‘åˆ Oracle çš„è¯­æ³•åŠè¡Œä¸ºï¼Œè¿™å¯¹äºå¼€å‘è€…è€Œè¨€é¢‡ä¸ºå‘¨åˆ°ï¼Œå¦‚æ­¤ä¸€æ¥ï¼Œå¼€å‘è€…ä¾¿èƒ½å¤Ÿæ”¶è·äº‘åŸç”Ÿæ—¶æœŸæ–°æŠ€æœ¯å¸¦æ¥çš„å¥½å¤„ï¼Œè€Œä¸”å¯ä»¥æŠŠè€æ—§ç³»ç»Ÿè¿ç§»æ‰€è€—è´¹çš„æˆæœ¬å‡å°åˆ°æœ€ä½é™åº¦ã€‚</p>
<p>ä¸è¿‡è¦è¯´å›æ¥ï¼ŒæŠŠ Oracle æˆ– MySQL ç§»æ¤åˆ° KES çš„æ—¶å€™ï¼Œå„ä¸ªæ•°æ®åº“å¯¹æ ‡å‡† SQL çš„æ‰§è¡Œç»†èŠ‚å­˜åœ¨ä¸€äº›å·®åˆ«ï¼Œæ‰€ä»¥éš¾å…ä¼šé­é‡â€œæ°´åœŸä¸æœâ€çš„æŠ€æœ¯éš¾ç‚¹ã€‚é‡åˆ°è¿™ç§æƒ…å†µä¸è¦æ…Œï¼Œè¿™å¹¶éäº§å“æœ‰ Bugï¼Œæ›´å¤šçš„æ˜¯ç”±äºä¸åŒæ•°æ®åº“çš„è®¾è®¡ç†å¿µäº§ç”Ÿå†²çªï¼Œåªè¦æ·±å…¥äº†è§£è¿™äº›æœºåˆ¶ï¼Œä¸ä½†çœ¼å‰çš„éš¾é¢˜èƒ½å¤Ÿå¾—åˆ°è§£å†³ï¼Œè€Œä¸”å¯¹äºæ•°æ®åº“åŸç†çš„è®¤è¯†ä¹Ÿä¼šæå‡ã€‚</p>
<p>æœ¬æ–‡æ•´ç†äº†4ä¸ªæŠ€æœ¯åœºæ™¯ï¼Œåˆ†åˆ«æ˜¯å¯¹è±¡å‘½åï¼Œç©ºå€¼å¤„ç†ï¼ŒJSONæ•°æ®å¤„ç†ä»¥åŠåºåˆ—ç®¡ç†ï¼Œç»ç”±åŸç†åˆ†æå¹¶é‡ç°ä»£ç ï¼Œå¸¦é¢†å¤§å®¶ä¸€èµ·é¿å¼€è¿™äº›é™·é˜±ï¼Œä»è€Œæ›´å¥½åœ°æŒæ¡KingbaseESã€‚
@[toc]</p>
<hr/>
<h2 data-id="heading-0">æ¡ˆä¾‹ä¸€ï¼šæ˜æ˜è¡¨å­˜åœ¨ï¼Œä¸ºä»€ä¹ˆæŠ¥ "relation does not exist"ï¼Ÿ</h2>
<p><strong>ç°è±¡æè¿°</strong>ï¼š
å¤§å®¶å¯èƒ½é‡åˆ°è¿‡è¿™ç§æƒ…å†µï¼šæ˜æ˜åˆšå»ºäº†ä¸ªè¡¨å« <code>UserInfo</code>ï¼Œç»“æœç”¨ <code>SELECT * FROM UserInfo</code> ä¸€æŸ¥ï¼Œç›´æ¥æŠ¥é”™ï¼š<code>ERROR: relation "userinfo" does not exist</code>ã€‚è¿™æ—¶å€™ä½ å¯èƒ½ä¼šæ€€ç–‘äººç”Ÿï¼šè¡¨å‘¢ï¼Ÿæˆ‘åˆšå»ºçš„è¡¨å‘¢ï¼Ÿ</p>
<p><strong>å¤ç°ä»£ç </strong>ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- 1. åˆ›å»ºä¸€ä¸ªåŒ…å«å¤§å†™å­—æ¯çš„è¡¨ï¼ˆæœªåŠ åŒå¼•å·ï¼ŒKESé»˜è®¤ä¼šè½¬ä¸ºå°å†™ï¼‰</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> UserInfo (id <span class="hljs-type">INT</span>, name <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">20</span>));

<span class="hljs-comment">-- 2. å°è¯•æŸ¥è¯¢ï¼ˆæ­¤æ—¶è¡¨ååœ¨å†…éƒ¨å­˜å‚¨ä¸º userinfoï¼‰</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> UserInfo; <span class="hljs-comment">-- æˆåŠŸï¼Œå› ä¸º UserInfo ä¹Ÿä¼šè¢«è‡ªåŠ¨è½¬ä¸º userinfo</span>

<span class="hljs-comment">-- 3. å¦‚æœæˆ‘ä»¬åœ¨ç‰¹å®šçš„ Schema ä¸‹åˆ›å»ºè¡¨ï¼Œä¸”ä½¿ç”¨äº†åŒå¼•å·ä¿æŒå¤§å°å†™</span>
<span class="hljs-keyword">CREATE</span> SCHEMA app_v1;
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> app_v1."UserInfo" (id <span class="hljs-type">INT</span>, name <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">20</span>));

<span class="hljs-comment">-- 4. æ­¤æ—¶ç›´æ¥æŸ¥è¯¢ï¼Œæˆ–è€…ä¸åŠ åŒå¼•å·æŸ¥è¯¢</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> app_v1.UserInfo; 
<span class="hljs-comment">-- æŠ¥é”™ï¼šrelation "app_v1.userinfo" does not exist</span>
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/062c0d11eee64574884cb91efe2d69f5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YCU5by655qE55-z5aS0Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766637336&amp;x-signature=AbapX2MV9pt9FNKHh5LZKTyZ6ps%3D" alt="image.png" loading="lazy"/></p>
<p><strong>åŸå› åˆ†æ</strong>ï¼š
è¿™æ˜¯ç”±äºKESï¼ˆå¤„äºPGæ¨¡å¼æˆ–è€…é»˜è®¤è®¾ç½®æ—¶ï¼‰è¦éµå¾ªSQLæ ‡å‡†æ‰€è‡´ï¼Œæ ‡å‡†è¡¨æ˜ï¼Œå¦‚æœæœªç»™æ ‡è¯†ç¬¦åŠ ä¸ŠåŒå¼•å·ï¼Œç³»ç»Ÿå°±ä¼šè‡ªåŠ¨å°†å…¶è½¬æ¢ä¸º<strong>å°å†™</strong>ã€‚</p>
<p>åœ¨åˆ›å»ºè¡¨æ—¶ï¼Œå¦‚æœä½ ç”¨ä¸Šäº†åŒå¼•å·ï¼ˆè­¬å¦‚è¯´ "UserInfo"ï¼‰ï¼Œé‚£ä¹ˆç³»ç»Ÿå°±ä¼šä¸¥æ ¼æŒ‰ç…§ä½ æ‰€å†™çš„å¤§å°å†™æ¥è¿›è¡Œå­˜å‚¨ï¼Œç­‰åˆ°æ‰§è¡ŒæŸ¥è¯¢çš„æ—¶å€™ï¼Œå‡ä½¿ä½ å«Œéº»çƒ¦æ²¡æœ‰åŠ ä¸ŠåŒå¼•å·ï¼Œè€Œç³»ç»ŸåˆæŠŠè¡¨åè½¬æ¢æˆå°å†™æ¥å®æ–½æ¯”å¯¹ï¼Œè¿™æ ·å¿…ç„¶å°±æŸ¥ä¸åˆ°ç›¸å…³å†…å®¹ã€‚</p>
<p><code>search_path</code>ï¼ˆæœç´¢è·¯å¾„ï¼‰å¸¸ä¼šé™·å…¥ä¸€äº›é—®é¢˜ï¼Œä½ çš„è¡¨è‹¥æ—¢æœªå¤„äº <code>public</code> ä¹Ÿæœªåœ¨å½“å‰ç”¨æˆ·çš„ Schema ä¸‹ï¼Œå°±åŠ¡å¿…æ˜ç¡®æŒ‡å®š Schemaã€‚</p>
<p><strong>è§£å†³æ–¹æ³•</strong>ï¼š</p>
<ol>
<li><strong>ç»Ÿä¸€è§„èŒƒ</strong>ï¼šæœ€çœå¿ƒçš„åŠæ³•ï¼Œå°±æ˜¯è¡¨åã€å­—æ®µåå…¨ç”¨å°å†™ï¼Œåˆ«ç”¨åŒå¼•å·ï¼Œå¤§å®¶éƒ½è½»æ¾ã€‚</li>
<li><strong>æ£€æŸ¥ <code>search_path</code></strong>ï¼š
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">SHOW</span> search_path;
<span class="hljs-comment">-- å¦‚æœä½ çš„è¡¨åœ¨ app_v1 æ¨¡å¼ä¸‹ï¼Œéœ€è¦è®¾ç½®ï¼š</span>
<span class="hljs-keyword">SET</span> search_path <span class="hljs-keyword">TO</span> app_v1, public, sys;
</code></pre>
</li>
<li><strong>ç²¾å‡†æŸ¥è¯¢</strong>ï¼šå®åœ¨æä¸æ¸…è¡¨ååˆ°åº•å­˜æˆå•¥æ ·äº†ï¼Ÿç›´æ¥æŸ¥ç³»ç»Ÿè¡¨ï¼Œä¸€çœ‹ä¾¿çŸ¥ï¼š
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">SELECT</span> schemaname, tablename <span class="hljs-keyword">FROM</span> sys_tables <span class="hljs-keyword">WHERE</span> schemaname <span class="hljs-operator">=</span> <span class="hljs-string">'app_v1'</span>;
</code></pre>
</li>
</ol>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/61c019d62e9d470f95e4fdf43d9078e8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YCU5by655qE55-z5aS0Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766637336&amp;x-signature=u69aveLbipYInA4c1jSPKpSHwXs%3D" alt="image.png" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-1">æ¡ˆä¾‹äºŒï¼šå†™å…¥çš„ç©ºå­—ç¬¦ä¸²å‡­ç©ºæ¶ˆå¤±äº†ï¼Ÿï¼ˆç©ºä¸²ä¸ NULLï¼‰</h2>
<p><strong>ç°è±¡æè¿°</strong>ï¼š
å¾ˆå¤šä» MySQL è½¬è¿‡æ¥çš„å…„å¼Ÿä¹ æƒ¯ç”¨ <code>''</code>ï¼ˆç©ºå­—ç¬¦ä¸²ï¼‰ä»£è¡¨â€œæ²¡ä¸œè¥¿â€ã€‚ç»“æœå†™å…¥æ•°æ®åï¼Œç”¨ <code>WHERE content = ''</code> æ­»æ´»æŸ¥ä¸åˆ°æ•°æ®ï¼Œæ¢æˆ <code>IS NULL</code> åå€’æŸ¥å‡ºæ¥äº†ã€‚è¿™å°±å¾ˆè¿·ï¼šæˆ‘çš„ç©ºå­—ç¬¦ä¸²å»å“ªäº†ï¼Ÿ</p>
<p><strong>å¤ç°ä»£ç </strong>ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> t_str_test (id <span class="hljs-type">INT</span>, content <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">50</span>));

<span class="hljs-comment">-- æ’å…¥ä¸€æ¡ç©ºå­—ç¬¦ä¸²</span>
<span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> t_str_test <span class="hljs-keyword">VALUES</span> (<span class="hljs-number">1</span>, <span class="hljs-string">''</span>);

<span class="hljs-comment">-- å°è¯•æŸ¥è¯¢ç©ºå­—ç¬¦ä¸²</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> t_str_test <span class="hljs-keyword">WHERE</span> content <span class="hljs-operator">=</span> <span class="hljs-string">''</span>; 
<span class="hljs-comment">-- ç»“æœï¼š0 æ¡æ•°æ®ï¼ˆåœ¨ Oracle æ¨¡å¼ä¸‹ï¼‰</span>

<span class="hljs-comment">-- å°è¯•æŸ¥è¯¢ NULL</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> t_str_test <span class="hljs-keyword">WHERE</span> content <span class="hljs-keyword">IS</span> <span class="hljs-keyword">NULL</span>; 
<span class="hljs-comment">-- ç»“æœï¼š1 æ¡æ•°æ®</span>
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1cf3fa7e373f4d60b837e0e99e4afe57~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YCU5by655qE55-z5aS0Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766637336&amp;x-signature=RgQeZ9ppIYTZbmZdb%2Fa9MM2cl9Y%3D" alt="image.png" loading="lazy"/></p>
<p><strong>åŸå› åˆ†æ</strong>ï¼š
è¿™æ˜¯ KES ä¸ºé€‚é… <strong>Oracle æ¨¡å¼</strong> æ‰€ä¸“é—¨è®¾è®¡çš„ï¼Œåœ¨ Oracle ç³»ç»Ÿå½“ä¸­ï¼Œç©ºå­—ç¬¦ä¸² <code>''</code> å’Œ <code>NULL</code> å®é™…ä¸Šæ˜¯ç›¸åŒæ¦‚å¿µï¼ŒäºŒè€…å¯ä»¥ç›¸äº’æ›¿ä»£ã€‚</p>
<p>KES æœ‰ä¸€ä¸ªåä¸º <code>ora_input_emptystr_isnull</code> çš„å‚æ•°ï¼Œç”¨äºæ§åˆ¶ç›¸å…³è¡Œä¸ºï¼Œè¯¥å‚æ•°å¤„äºå¼€å¯çŠ¶æ€ï¼ˆé»˜è®¤å€¼ä¸º <code>on</code>ï¼‰æ—¶ï¼Œå‘å…¶ä¸­æ’å…¥ç©ºå­—ç¬¦ä¸²æ—¶ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨å°†å…¶åœ¨åº•å±‚è½¬æ¢ä¸º <code>NULL</code>ï¼Œè¿™æ ·åšä¸»è¦æ˜¯æ–¹ä¾¿é‚£äº›ä¹ æƒ¯ä½¿ç”¨ Oracle çš„ç”¨æˆ·åœ¨è¿ç§»è¿‡ç¨‹ä¸­æ›´ä¸ºé¡ºç•…ã€‚</p>
<p><strong>è§£å†³æ–¹æ³•</strong>ï¼š</p>
<ol>
<li><strong>å…¥ä¹¡éšä¿—</strong>ï¼šæ—¢ç„¶ç”¨äº† KES çš„ Oracle æ¨¡å¼ï¼Œå’±ä»¬æœ€å¥½å°±æŒ‰ Oracle çš„è§„çŸ©æ¥ï¼Œç”¨ <code>IS NULL</code> åˆ¤æ–­ç©ºå†…å®¹ï¼Œä¹ æƒ¯äº†ä¹ŸæŒºå¥½ã€‚</li>
<li><strong>æ”¹å‚æ•°ï¼ˆç‰¹æ®Šæƒ…å†µï¼‰</strong>ï¼šå¦‚æœä½ éå¾—ä¿ç•™ç©ºå­—ç¬¦ä¸²çš„è¯­ä¹‰ï¼ˆæ¯”å¦‚ä¸ºäº†å…¼å®¹ MySQL çš„è€ä¸šåŠ¡ï¼‰ï¼Œé‚£ä¹Ÿå¯ä»¥åœ¨ä¼šè¯çº§æˆ–è€…ç³»ç»Ÿçº§æŠŠè¿™ä¸ªå‚æ•°å…³æ‰ï¼š
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- æŸ¥çœ‹å½“å‰å‚æ•°</span>
<span class="hljs-keyword">SHOW</span> ora_input_emptystr_isnull;

<span class="hljs-comment">-- å…³é—­è‡ªåŠ¨è½¬æ¢ï¼ˆä»…å½“å‰ä¼šè¯ç”Ÿæ•ˆï¼‰</span>
<span class="hljs-keyword">SET</span> ora_input_emptystr_isnull <span class="hljs-operator">=</span> off;

<span class="hljs-comment">-- å†æ¬¡æµ‹è¯•</span>
<span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> t_str_test <span class="hljs-keyword">VALUES</span> (<span class="hljs-number">2</span>, <span class="hljs-string">''</span>);
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> t_str_test <span class="hljs-keyword">WHERE</span> content <span class="hljs-operator">=</span> <span class="hljs-string">''</span>; <span class="hljs-comment">-- æ­¤æ—¶èƒ½æŸ¥åˆ° id=2 çš„è®°å½•</span>
</code></pre>
</li>
</ol>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1c78db30245b437f95325a4fef563d75~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YCU5by655qE55-z5aS0Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766637336&amp;x-signature=W9KBreZnB2ccR7QV9HMXFJJPhBY%3D" alt="image.png" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-2">æ¡ˆä¾‹ä¸‰ï¼šJSON å‡½æ•°è¿”å› NULLï¼Ÿï¼ˆJSON è·¯å¾„åŒ¹é…è§„åˆ™ï¼‰</h2>
<p><strong>ç°è±¡æè¿°</strong>ï¼š
ç°åœ¨ä¸šåŠ¡é‡Œç”¨ JSON çš„æƒ…å†µè¶Šæ¥è¶Šå¤šäº†ï¼ŒKES å¯¹è¿™å—æ”¯æŒä¹Ÿä¸é”™ã€‚ä½†ç»å¸¸æœ‰å…„å¼ŸæŠ±æ€¨ï¼šç”¨ <code>JSON_VALUE</code> æˆ– <code>JSON_QUERY</code> å–æ•°æ®æ—¶ï¼Œæ˜æ˜çœ‹ç€æ•°æ®å°±åœ¨é‚£å„¿ï¼Œæ€ä¹ˆå–å‡ºæ¥å…¨æ˜¯ NULLï¼Ÿ</p>
<p><strong>å¤ç°ä»£ç </strong>ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- å‡è®¾è¡¨ä¸­æœ‰ä¸€æ¡ JSON æ•°æ®ï¼š{"Name": "Kingbase", "Version": "V8R6"}</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> t_json (info jsonb);
<span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> t_json <span class="hljs-keyword">VALUES</span> (<span class="hljs-string">'{"Name": "Kingbase", "Version": "V8R6"}'</span>);

<span class="hljs-comment">-- å°è¯•æå– Name å­—æ®µ</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">JSON_VALUE</span>(info, <span class="hljs-string">'$.name'</span>) <span class="hljs-keyword">FROM</span> t_json;
<span class="hljs-comment">-- ç»“æœï¼šNULL</span>
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/849cf8c1709b4368ad7906e4e4ff1961~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YCU5by655qE55-z5aS0Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766637336&amp;x-signature=C428%2B%2F88wJ0S33z%2F2sWIewuDA1M%3D" alt="image.png" loading="lazy"/></p>
<p><strong>åŸå› åˆ†æ</strong>ï¼š</p>
<p>è¿™ä¹ŸçœŸä¸æ˜¯ç³»ç»Ÿå‡º Bug äº†ï¼Œé€šå¸¸æ˜¯å› ä¸ºå’±ä»¬å†™çš„<strong>è·¯å¾„åŒ¹é…è§„åˆ™å¤ªä¸¥æ ¼</strong>ã€‚</p>
<p><strong>å¤§å°å†™æ•æ„Ÿ</strong> ï¼šJSON æ ‡å‡†è¡¨æ˜ï¼ŒKeyï¼ˆé”®åï¼‰å±äºå¤§å°å†™æ•æ„ŸèŒƒç•´ï¼Œå‰é¢ä¾‹å­ä¸­çš„æ•°æ®å«æœ‰ "Name"ï¼ˆå¤§å†™Nï¼‰ï¼Œè€ŒæŸ¥è¯¢è·¯å¾„å´æ˜¯ <code>$.name</code>ï¼ˆå°å†™nï¼‰ï¼ŒäºŒè€…æ˜¾ç„¶æ— æ³•å¯¹åº”ï¼Œæ‰€ä»¥é»˜è®¤æƒ…å½¢ä¸‹ï¼Œç›¸å…³å‡½æ•°ä¼šé»˜é»˜ç»™å‡º NULLã€‚</p>
<p><strong>è·¯å¾„å±‚çº§</strong>ï¼šè¦æ˜¯è·¯å¾„å±‚çº§æé”™äº†ï¼ˆæ¯”å¦‚å°‘å†™äº†ä¸€å±‚å¯¹è±¡åµŒå¥—ï¼‰ï¼Œé‚£è‚¯å®šä¹Ÿæ‘¸ä¸åˆ°å€¼ã€‚</p>
<p><strong>è§£å†³æ–¹æ³•</strong>ï¼š</p>
<ol>
<li><strong>å¯¹é½å¤§å°å†™</strong>ï¼šå†™ SQL çš„æ—¶å€™ç»†å¿ƒç‚¹ï¼ŒJSON è·¯å¾„å¿…é¡»è·Ÿæ•°æ®é‡Œçš„ Key ä¸€æ¨¡ä¸€æ ·ã€‚
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- æ­£ç¡®å†™æ³•ï¼šä½¿ç”¨ "Name"</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">JSON_VALUE</span>(info, <span class="hljs-string">'$.Name'</span>) <span class="hljs-keyword">FROM</span> t_json;
<span class="hljs-comment">-- ç»“æœï¼šKingbase</span>
</code></pre>
</li>
<li><strong>ç”¨ <code>ON EMPTY</code> æŸ¥å› </strong>ï¼šä¸ºäº†ææ¸…æ¥šåˆ°åº•æ˜¯â€œæ²¡æ‰¾åˆ°â€è¿˜æ˜¯â€œå€¼æœ¬èº«å°±æ˜¯ NULLâ€ï¼Œå¯ä»¥ç”¨ <code>DEFAULT ... ON EMPTY</code> è¿™ä¸ªè¯­æ³•æ¥æ¢æ¢åº•ã€‚
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">JSON_VALUE</span>(
    info, 
    <span class="hljs-string">'$.name'</span> 
    <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">'Path Not Found'</span> <span class="hljs-keyword">ON</span> <span class="hljs-keyword">EMPTY</span>
) <span class="hljs-keyword">FROM</span> t_json;
<span class="hljs-comment">-- ç»“æœï¼šPath Not Found</span>
</code></pre>
</li>
</ol>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/31496cad691745d1a6444e4876abdbaa~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YCU5by655qE55-z5aS0Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766637336&amp;x-signature=RHNGeRdEkBTYowM%2B640U5RuRf%2F0%3D" alt="image.png" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-3">æ¡ˆä¾‹å››ï¼šè¿ç§»åæ’å…¥æ•°æ®æŠ¥é”™ "Duplicate key"ï¼Ÿï¼ˆåºåˆ—åŒæ­¥æœºåˆ¶ï¼‰</h2>
<p><strong>ç°è±¡æè¿°</strong>ï¼š
æ•°æ®åˆšä»åˆ«çš„åº“å¯¼è¿› KESï¼Œè¡¨é‡Œæ˜æ˜å·²ç»æœ‰ 100 æ¡æ•°æ®äº†ï¼ˆID ä» 1 åˆ° 100ï¼‰ã€‚è¿™æ—¶å€™åº”ç”¨å‘èµ·ä¸€æ¡ <code>INSERT</code>ï¼ˆä¸æŒ‡å®š IDï¼Œæƒ³ç”¨è‡ªå¢ï¼‰ï¼Œç»“æœå´©äº†ï¼Œç›´æ¥æŠ¥ä¸»é”®å†²çª <code>duplicate key value violates unique constraint</code>ã€‚è¿™å•¥æƒ…å†µï¼Ÿæ–°æ¥çš„æ•°æ®è¿˜èƒ½è·Ÿæ—§æ•°æ®æ‰“æ¶ï¼Ÿ</p>
<p><strong>å¤ç°ä»£ç </strong>ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- 1. åˆ›å»ºåºåˆ—å’Œè¡¨</span>
<span class="hljs-keyword">CREATE</span> SEQUENCE seq_user_id <span class="hljs-keyword">START</span> <span class="hljs-number">1</span>;
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> t_user (
    id <span class="hljs-type">INT</span> <span class="hljs-keyword">DEFAULT</span> nextval(<span class="hljs-string">'seq_user_id'</span>) <span class="hljs-keyword">PRIMARY</span> KEY, 
    name <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">20</span>)
);

<span class="hljs-comment">-- 2. æ¨¡æ‹Ÿæ•°æ®è¿ç§»ï¼ˆæ˜¾å¼æ’å…¥ IDï¼‰</span>
<span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> t_user (id, name) <span class="hljs-keyword">VALUES</span> (<span class="hljs-number">1</span>, <span class="hljs-string">'Alice'</span>);
<span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> t_user (id, name) <span class="hljs-keyword">VALUES</span> (<span class="hljs-number">2</span>, <span class="hljs-string">'Bob'</span>);

<span class="hljs-comment">-- 3. æ­¤æ—¶åºåˆ— seq_user_id çš„å½“å‰å€¼ï¼ˆlast_valueï¼‰ä¾ç„¶æ˜¯ 1ï¼ˆæˆ–è€…æœªå®šä¹‰ï¼‰</span>
<span class="hljs-comment">-- 4. åº”ç”¨å°è¯•éšå¼æ’å…¥ï¼ˆä¾èµ–é»˜è®¤å€¼ï¼‰</span>
<span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> t_user (name) <span class="hljs-keyword">VALUES</span> (<span class="hljs-string">'Charlie'</span>);
<span class="hljs-comment">-- é”™è¯¯ï¼šé”®å€¼ "(id)=(1)" å·²ç»å­˜åœ¨</span>
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1004fb0d359040f0a943264b424fa45d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YCU5by655qE55-z5aS0Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766637336&amp;x-signature=Fjw2JVguxoIfc0kpheNOKwDVRhc%3D" alt="image.png" loading="lazy"/></p>
<p><strong>åŸå› åˆ†æ</strong>ï¼š
è¿™å…¶å®æ˜¯æ•°æ®åº“åºåˆ—ï¼ˆSequenceï¼‰çš„æ ‡å‡†è¡Œä¸ºï¼Œæ²¡å•¥å¥½å¥‡æ€ªçš„ã€‚</p>
<p>å¯¼æ•°æ®æ—¶ï¼ˆä»¥è¿ç§»å·¥å…·ä¸ºä¾‹ï¼‰ï¼Œä¸€èˆ¬ä¼šæ˜¾å¼æŒ‡å®šIDæ‰§è¡Œæ’å…¥æ“ä½œï¼Œæ­¤æƒ…å½¢ä¸‹ï¼Œå¹¶ä¸ä¼šè‡ªåŠ¨æ¨åŠ¨ç›¸å…³è”çš„åºåˆ—ã€‚</p>
<p>ç­‰åˆ°åé¢è‡ªå·±è·‘èµ·æ¥ï¼Œå¼€å§‹ä¾èµ– <code>default nextval(...)</code> çš„æ—¶å€™ï¼Œåºåˆ—è¿˜æ˜¯ä¼šä»åˆå§‹å€¼ï¼ˆè­¬å¦‚è¯´ 1ï¼‰å¼€å§‹å‘æ”¾ï¼Œè¿™å¿…ç„¶ä¼šé€ æˆä¸è¡¨é‡Œå·²æœ‰çš„ ID å†²çªã€‚</p>
<p><strong>è§£å†³æ–¹æ³•</strong>ï¼š
è¿ç§»æå®šåï¼Œåƒä¸‡åˆ«å¿˜äº†<strong>é‡ç½®åºåˆ—</strong>ï¼ŒæŠŠå®ƒæ‹¨åˆ°å½“å‰è¡¨é‡Œæœ€å¤§ ID çš„ä½ç½®ã€‚</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- ä¿®æ­£åºåˆ—å€¼</span>
<span class="hljs-keyword">SELECT</span> setval(<span class="hljs-string">'seq_user_id'</span>, (<span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">MAX</span>(id) <span class="hljs-keyword">FROM</span> t_user));

<span class="hljs-comment">-- å†æ¬¡æ’å…¥æˆåŠŸ</span>
<span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> t_user (name) <span class="hljs-keyword">VALUES</span> (<span class="hljs-string">'Charlie'</span>); <span class="hljs-comment">-- ID å°†å˜ä¸º 3</span>
</code></pre>
<hr/>
<h2 data-id="heading-4">æ€»ç»“ä¸æ›´å¤šèµ„æº</h2>
<p>çœ‹äº†ä¸Šé¢è¿™å‡ ä¸ªä¾‹å­ï¼Œå¤§å®¶åº”è¯¥ä¹Ÿå‘ç°äº†ï¼Œå¾ˆå¤šçœ‹ä¼¼â€œå¥‡è‘©â€çš„ç°è±¡ï¼Œå…¶å®æ˜¯ KingbaseES ä¸ºäº†åœ¨<strong>æ ‡å‡†åŒ–</strong>å’Œ<strong>å…¼å®¹æ€§</strong>ä¹‹é—´æ‰¾å¹³è¡¡è€Œåšçš„ç²¾å¿ƒè®¾è®¡ã€‚åªè¦æŠŠè¿™äº›æŠ€æœ¯ç»†èŠ‚æ‘¸é€ï¼Œä½ åœ¨æ•°æ®åº“å¼€å‘å’Œè¿ç§»çš„æ—¶å€™å°±èƒ½æ¸¸åˆƒæœ‰ä½™ï¼Œå°‘è¸©å¾ˆå¤šå‘ã€‚</p>
<p>KingbaseES æ¯•ç«Ÿæ˜¯æˆç†Ÿçš„ä¼ä¸šçº§æ•°æ®åº“ï¼Œè¯Šæ–­å·¥å…·å’Œæ–‡æ¡£æ”¯æŒéƒ½æŒºå…¨çš„ã€‚å¦‚æœä½ å¯¹å®ƒçš„åº•å±‚åŸç†ã€æ›´å¤šé«˜çº§ç©æ³•ï¼ˆåƒè¯»å†™åˆ†ç¦»ã€é›†ç¾¤é«˜å¯ç”¨è¿™äº›ï¼‰æ„Ÿå…´è¶£ï¼Œæˆ–è€…çœŸåœ¨é¡¹ç›®é‡Œç¢°åˆ°äº†ç¡¬éª¨å¤´ï¼Œæ¬¢è¿æ¥å’±ä»¬çš„å®˜æ–¹æŠ€æœ¯ç¤¾åŒºé€›é€›ï¼</p>
<p>ğŸ‘‰ <strong>é‡‘ä»“æ•°æ®åº“å®˜æ–¹åšå®¢ç«™</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fkingbase.com.cn%2Fexplore" target="_blank" title="https://kingbase.com.cn/explore" ref="nofollow noopener noreferrer">kingbase.com.cn/explore</a>
åœ¨è¿™é‡Œä½ å¯ä»¥æ‰¾åˆ°æ›´å¤šèµ„æ·±ä¸“å®¶çš„æŠ€æœ¯å¹²è´§ã€åŸç†è§£æå’Œæœ€ä½³å®è·µæ–‡æ¡£ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/130e752d5981471299828138e9710deb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YCU5by655qE55-z5aS0Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766637336&amp;x-signature=RxckL%2F7ErVhecrU0qkRQ2P1oDpE%3D" alt="image.png" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ™‹æ±Ÿæ–‡å­¦åŸè´¦å·å®‰å…¨ç®€ç›´å°±æ˜¯ç¬‘è¯]]></title>    <link>https://juejin.cn/post/7584719268044439586</link>    <guid>https://juejin.cn/post/7584719268044439586</guid>    <pubDate>2025-12-18T05:00:29.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7584719268044439586" data-draft-id="7584345932944195635" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ™‹æ±Ÿæ–‡å­¦åŸè´¦å·å®‰å…¨ç®€ç›´å°±æ˜¯ç¬‘è¯"/> <meta itemprop="keywords" content="å®‰å…¨,æ¶æ„,äº§å“"/> <meta itemprop="datePublished" content="2025-12-18T05:00:29.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ•²æ•²æ•²æ•²æš´ä½ è„‘è¢‹"/> <meta itemprop="url" content="https://juejin.cn/user/224781403162798"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ™‹æ±Ÿæ–‡å­¦åŸè´¦å·å®‰å…¨ç®€ç›´å°±æ˜¯ç¬‘è¯
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/224781403162798/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ•²æ•²æ•²æ•²æš´ä½ è„‘è¢‹
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-18T05:00:29.000Z" title="Thu Dec 18 2025 05:00:29 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-18
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#383838;font-size:15px;line-height:30px;letter-spacing:2px;word-break:break-word;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;scroll-behavior:smooth;background-image:linear-gradient(0deg,transparent 24%,rgba(201,195,195,.329) 25%,hsla(0,8%,80.4%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent),linear-gradient(90deg,transparent 24%,rgba(204,196,196,.226) 25%,hsla(0,4%,66.1%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent);background-color:#fff;background-size:50px 50px;padding-bottom:60px}.markdown-body ::selection{color:#fff;background-color:#a862ea}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin:24px 0 12px;color:#a862ea}.markdown-body h1{line-height:2;font-size:1.4em}.markdown-body h1~p:first-of-type:first-letter{color:#a862ea;float:left;font-size:2em;margin-right:.4em;font-weight:bolder}.markdown-body h2{font-size:1.2em}.markdown-body h3{font-size:1.1em}.markdown-body ol,.markdown-body ul{padding-left:2em}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;padding-left:.2em}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#a862ea}.markdown-body ol li.task-list-item,.markdown-body ul li.task-list-item{list-style:none}.markdown-body ol li.task-list-item ol,.markdown-body ol li.task-list-item ul,.markdown-body ul li.task-list-item ol,.markdown-body ul li.task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:10px}.markdown-body a,.markdown-body code,.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6,.markdown-body li,.markdown-body p{opacity:.85;vertical-align:baseline;transition:all .1s ease}.markdown-body a:hover,.markdown-body code:hover,.markdown-body h1:hover,.markdown-body h2:hover,.markdown-body h3:hover,.markdown-body h4:hover,.markdown-body h5:hover,.markdown-body h6:hover,.markdown-body li:hover,.markdown-body p:hover{opacity:1}.markdown-body a{display:inline-block;color:#a862ea;cursor:pointer;text-decoration:none;position:relative}.markdown-body a:after{content:"";position:absolute;width:98%;height:1px;bottom:0;left:0;transform:scaleX(0);background-color:#a862ea;transform-origin:bottom right;transition:transform .3s ease-in-out}.markdown-body a:hover:after{transform:scaleX(1);transform-origin:bottom left}.markdown-body a:active,.markdown-body a:link{color:#a862ea}.markdown-body img{max-width:100%;user-select:none;margin:1em 0;transition:transform .2s ease 0s;background-color:#f8f5ff;box-shadow:0 0 10px #e7daff}.markdown-body img:hover{opacity:1;box-shadow:0 0 20px #e7daff;transform:translateY(-1px)}.markdown-body blockquote{padding:.5em 1em;margin:12px 0;border-top-left-radius:2px;border-bottom-left-radius:2px;border-left:3px solid #a862ea;background-color:#f8f5ff}.markdown-body blockquote&gt;p{margin:0}.markdown-body .math{font-style:italic;margin:12px 0;padding:.5em 1em;background-color:#f8f5ff}.markdown-body .math&gt;p{margin:0}.markdown-body code{padding:2px .4em;overflow-x:auto;color:#a862ea;font-weight:700;word-break:break-word;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;background-color:#f8f5ff}.markdown-body pre{margin:2em 0}.markdown-body pre&gt;code{display:block;padding:1.5em;word-break:normal;font-size:.9em;font-style:normal;font-weight:400;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;line-height:18px;color:#383838;border-radius:2px;scroll-behavior:smooth;box-shadow:0 0 10px #e7daff}.markdown-body pre&gt;code:hover{box-shadow:0 0 20px #e7daff}.markdown-body pre&gt;code::-webkit-scrollbar{height:6px;background-color:#f8f5ff}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:#e7daff;border-bottom-left-radius:3px;border-bottom-right-radius:3px}.markdown-body hr{margin:2em 0;border-top:1px solid #a862ea}.markdown-body table{width:100%;font-size:12px;max-width:100%;overflow:auto;border-collapse:collapse}.markdown-body thead{color:#a862ea;background:#f8f5ff}.markdown-body td,.markdown-body th{padding:.5em;border:1px solid #e7daff}.markdown-body tr{background-color:#f8f5ff}@media (max-width:720px){.markdown-body{font-size:12px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æœ¬äººå–œæ¬¢æœ‰ç©ºçœ‹çœ‹æ™‹æ±Ÿç½‘æ–‡ï¼Œæœ€è¿‘å¹´å°¾æ¯”è¾ƒå¿™ï¼Œæ²¡æ€ä¹ˆæ‰“å¼€æ™‹æ±Ÿï¼Œç»“æœæ˜¨å¤©æ‰“å¼€çš„æ—¶å€™ï¼Œçªç„¶æç¤ºæˆ‘è´¦å·å¼‚å¸¸ï¼Œç„¶åæˆ‘æ€€ç–‘æ˜¯è¢«ç›—å·äº†ï¼Œè¿›è¡Œç”³è¯‰åé‡æ–°ç™»å½•ï¼Œå‘ç°è‡ªå·±èŠ±é’±ä¹°çš„æ™‹æ±Ÿå¸å‡ ä¹è¢«ç›—å·è€…æ¸…ç©ºï¼</p>
<h2 data-id="heading-0">1. å¼‚å¸¸è¡Œä¸ºç›‘æµ‹ä¸åˆ°ä½</h2>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/33c4837819ee4053ae171926e2d5d8d5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pWy5pWy5pWy5pWy5pq05L2g6ISR6KKL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766638829&amp;x-signature=O1btJ5uoSF7UqvRi0BLeXHSxQ7o%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dcb691a9d50f44f2bd26d764e612a5f8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pWy5pWy5pWy5pWy5pq05L2g6ISR6KKL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766638829&amp;x-signature=cAo2cyucm7gre8r%2Bj2i6UibdhgM%3D" alt="image.png" loading="lazy"/></p>
<p>å›çœ‹è´­ä¹°è®°å½•ï¼Œç›—å·è€…ä¸€å…±ç›—åˆ·äº†æˆ‘<code>ã€11845ã€‘</code>æ™‹æ±Ÿå¸ï¼ŒæŠ˜åˆäººæ°‘å¸<code>ã€118.45ã€‘</code>å…ƒï¼Œå¹¶ä¸”éƒ½æ˜¯ä¸€å¤©ä¹‹å†…å¤šæ¬¡è´­ä¹°ä¸åŒçš„æ–‡ï¼Œè€Œè¿™äº›æ–‡çš„é˜…è¯»è¿›åº¦å…¨éƒ½æ˜¯0%ï¼Œææœ‰å¯èƒ½ä¸ºäº†åˆ·è®¢é˜…ä¹‹ç±»ï¼Œé‚£ä¹ˆè¿™äº›æ–‡çš„ä½œè€…çš„æˆç»©æ˜¯å­˜ç–‘çš„ï¼Œå¾ˆå¯èƒ½æ¶‰å«Œè´­ä¹°äº†åˆ·æ¦œä¹‹ç±»çš„æœåŠ¡ã€‚</p>
<p>ç„¶åæˆ‘æŸ¥äº†ä¸€ä¸‹ç½‘ä¸Šï¼Œè®¸å¤šè¢«ç›—å·çš„è¯»è€…éƒ½æœ‰ç±»ä¼¼é­é‡ï¼</p>
<p>åŸºäºè¿™æ ·çš„é˜…è¯»è¡Œä¸ºï¼Œæ™‹æ±Ÿç«Ÿç„¶æ²¡æœ‰åšå¼‚å¸¸è¡Œä¸ºç›‘æµ‹ï¼Œä»è€Œæ’æŸ¥ä½œè€…çš„è¿è§„è¡Œä¸ºï¼Œåšå‡ºå¯¹åº”å¤„ç½šï¼Œå¹¶åŠæ—¶å‘ç°å¯ç–‘æ¶ˆè´¹ï¼Œå†»ç»“è´¦æˆ·ï¼Œé¿å…æ›´å¤§æŸå¤±ã€‚</p>
<h2 data-id="heading-1">2. å¼‚åœ°ç™»å½•ä¸æé†’ï¼Œè¢«ç›—åï¼ŒåŸç™»å½•ä¸é€€å‡º</h2>
<p>æˆ‘æ‰¿è®¤è‡ªå·±ä¸å¤Ÿä¸¥è°¨ï¼Œä½¿ç”¨äº†é‡å¤å¯†ç ï¼Œå¢åŠ äº†è¢«ç›—å·çš„é£é™©ï¼Œæ˜¯æœ‰è´£ä»»çš„ï¼Œä½†æ˜¯æ™‹æ±Ÿçš„è´¦æˆ·å®‰å…¨çœŸçš„å¤ªå„¿æˆäº†ï¼</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/68fe578533d74737a8d4f39dbe746659~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pWy5pWy5pWy5pWy5pq05L2g6ISR6KKL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766638829&amp;x-signature=Xt2xZQwI5ozzP4UWlgTu2QdPXLo%3D" alt="image.png" loading="lazy"/></p>
<p>ç™»å½•æ—¥å¿—å¯è§ï¼Œ10æœˆ11æ—¥å‡ºç°è¿ç»­ä¸åŒç«¯çš„å¼‚åœ°ç™»å½•ï¼Œæˆ‘ç«Ÿæœªæ”¶åˆ°ä»»ä½•å¼‚å¸¸æ¶ˆæ¯æé†’ã€‚</p>
<p>11æœˆ06æ—¥ç›—å·è€…ä¹Ÿå¼‚åœ°å°è¯•ç™»å½•ï¼Œæˆ‘ä¹Ÿæ²¡æ”¶åˆ°å¼‚å¸¸æé†’</p>
<p>ç›´åˆ°12æœˆ15æ—¥ï¼Œç›—å·è€…è¿ç»­å¤šæ¬¡å¼‚åœ°ç™»å½•ï¼ŒæŠŠé’±èŠ±å…‰ã€‚</p>
<p>12æœˆ16æ—¥æ™šä¸Šï¼Œæˆ‘ç»ˆäºæœ‰ç©ºæ‰“å¼€æ™‹æ±Ÿï¼Œæç¤ºè´¦å·å¼‚å¸¸ç™»å½•ä¸äº†ï¼Œè¿™ä¸ªå¼‚å¸¸æ˜¯<code>ã€å®šä¹‰æˆ‘æ˜¯å¼‚å¸¸ç”¨æˆ·ã€‘</code>ï¼çœŸçš„å¾ˆå¯ç¬‘ï¼</p>
<p>è¿™ä¹ˆç®€å•çš„è¡Œä¸ºç›‘æµ‹éƒ½æ²¡æœ‰ï¼Œè·å–ç”¨æˆ·ç™»å½•åœ°æ–¹å¯¹æ¯”æ˜¯å¦ä¸€è‡´ï¼Œä¸ä¸€è‡´æ—¶å‘é€çŸ­ä¿¡æˆ–é‚®ä»¶è¿›è¡Œå¼‚å¸¸æé†’ï¼ŒåŠŸèƒ½å®ç°å¾ˆç®€å•ï¼Œè€Œæ³¨å†Œçš„æ—¶å€™æ‰‹æœºå·å’Œé‚®ç®±éƒ½ç•™äº†çš„ï¼Œä¼°è®¡æ™‹æ±Ÿçœé’±ï¼Œæ‡’å¾—å¼€å‘è¿™ä¸ªåŠŸèƒ½å§ï¼</p>
<p>ç„¶ååœ¨ç»†çœ‹ä¸€ä¸‹ï¼Œ10æœˆ11å·ï¼Œæˆ‘çš„è´¦æˆ·å°±è¢«å¼‚åœ°ç™»å½•è¢«ç›—äº†ï¼è€Œæˆ‘æ‰‹æœºç«¯æ™‹æ±Ÿä¾æ—§å¤„äºç™»å½•çŠ¶æ€ï¼Œå¯ä»¥æ‰“å¼€ï¼</p>
<p>æˆ‘ç®€ç›´å¤§æ— è¯­ï¼æ™‹æ±Ÿç«Ÿç„¶<code>ã€æ²¡æœ‰åšç™»å½•çŠ¶æ€å¤±æ•ˆå¤„ç†ã€‘</code>ï¼å³è´¦å·åªè¦è´¦å·å¯†ç å¯¹ï¼Œå°±å¯ä»¥éšæ—¶éšåœ°åŒæ—¶ç™»å½•ï¼</p>
<p>æ­£å¸¸æƒ…å†µä¸‹ï¼Œç§»åŠ¨ç«¯åº”è¯¥åªèƒ½æœ‰ä¸€ä¸ªç™»å½•çŠ¶æ€æœ‰æ•ˆï¼Œå³ä¾¿æ¢æ–°æ‰‹æœºï¼Œç”¨è´¦å·å¯†ç ç™»å½•ï¼Œé‚£ä¹ˆæ—§çš„ç™»å½•çŠ¶æ€ç½®ä¸ºå¤±æ•ˆï¼Œç”¨æˆ·åœ¨åŸç™»å½•çš„æ‰‹æœºå†æ¬¡æ‰“å¼€æ—¶å°±ä¼šè¢«å¼ºåˆ¶é€€å‡ºç™»å½•ã€‚</p>
<p>è€Œä¸”ï¼Œæ™‹æ±Ÿä¸åŒç«¯å¦‚webç«¯å¦å¤–ç™»å½•ï¼Œè‹¥ä¸å¼€å¯å®‰å…¨ä¿æŠ¤ï¼Œç«Ÿç„¶ä¸éœ€åšä»»ä½•éªŒè¯å°±èƒ½æˆåŠŸç™»å½•ï¼</p>
<p>è¿™å¯¼è‡´æˆ‘æœªå‘ç°ç™»å½•å¼‚å¸¸ï¼Œä»¥ä¸ºè‡ªå·±çœ‹æ–‡ä¹°æ–‡å¤šï¼Œæ™‹æ±Ÿå¸ä¸€ä¸‹å°±ç”¨å®Œäº†ï¼</p>
<p>è‹¥æœ‰åšç™»å½•çŠ¶æ€å¤±æ•ˆå¤„ç†ï¼Œé‚£ä¹ˆå½“ç›—å·è€…ç™»å½•äº†æˆ‘çš„è´¦å·ï¼Œæˆ‘å°±ä¼šå¼ºåˆ¶é€€å‡ºï¼Œä¼šæ„è¯†åˆ°ä¸å¯¹åŠ²ï¼Œå»çœ‹çœ‹æ—¥å¿—ï¼Œæˆ–è®¸å°±å‘ç°è¢«ç›—å·ï¼ŒåŠæ—¶ä¿®æ”¹å¯†ç ï¼Œå¼€å¯è´¦å·å®‰å…¨ä¿æŠ¤ï¼Œé¿å…æ›´å¤§çš„æŸå¤±ã€‚</p>
<p>ç„¶è€Œæ²¡æœ‰ï¼Œäºæ˜¯æˆ‘å‚»å‚»åœ°ç»§ç»­å……å€¼çœ‹æ–‡ï¼Œæœ€è¿‘æ¯”è¾ƒå¿™ï¼Œæ²¡ç©ºçœ‹æ™‹æ±Ÿï¼Œç›´åˆ°12æœˆ16æ—¥æ‰“å¼€æ˜¾ç¤ºè´¦æˆ·å¼‚å¸¸æ— æ³•ç™»å½•æ‰æ„è¯†åˆ°è¢«ç›—å·ï¼Œç”³è¯‰å†æ¬¡ç™»å½•åæ™‹æ±Ÿå¸å‡ ä¹è¢«ç›—åˆ·å®Œï¼ŒæŸå¤±åŠ å€ï¼</p>
<h2 data-id="heading-2">3. å®‰å…¨è®¾ç½®å½¢åŒè™šè®¾ï¼Œéœ€æ‰‹åŠ¨å¼€å¯æ‰ç”Ÿæ•ˆ</h2>
<p>è¢«ç›—å·åï¼Œæˆ‘åœ¨å¼€é€šå„ç§å®‰å…¨ä¿æŠ¤çš„è¿‡ç¨‹ä¸­ï¼Œè¶Šå‘è§‰å¾—æ™‹æ±Ÿæ€åº¦å‚²æ…¢ã€‚</p>
<p>æ˜æ˜æœ‰é‚£ä¹ˆå¤šå®‰å…¨éªŒè¯è®¾ç½®ï¼Œå´ä¸€ç‚¹æé†’ä¹Ÿæ²¡æœ‰ï¼Œå…¨å¾—ç”¨æˆ·è‡ªå·±æ‰‹åŠ¨å¼€å¯æ‰ç”Ÿæ•ˆï¼Œç­‰äºå¹³å°æœ‰å¾ˆå¤šéšç§˜çš„å®‰å…¨æªæ–½ï¼Œç”¨æˆ·ä½ ä»¬è‡ªå·±çœ‹ç€åŠã€‚</p>
<p>æˆ‘å’¨è¯¢å®¢æœï¼Œå›å¤çš„æ„æ€å°±æ˜¯å‡å¦‚ä½ æ²¡å¼€å¯è´¦å·å®‰å…¨ä¿æŠ¤ï¼Œå‘ç”Ÿç›—å·çš„æŸå¤±å±äºä¸ªäººè´£ä»»ã€‚å¦‚æœæœ‰é‡å¤§é‡‘é¢æŸå¤±è¯·è‡ªè¡ŒæŠ¥è­¦å¤„ç†ã€‚</p>
<p>éå¸¸å¥½ï¼Œå…è´£å£°æ˜å¦¥å¦¥çš„ï¼å¹³å°è¿™æ ·çš„æ€åº¦æ˜¯æå…¶ä¸è´Ÿè´£çš„ï¼</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/680e59a8733b4fea8654a80dcb2eba0f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pWy5pWy5pWy5pWy5pq05L2g6ISR6KKL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766638829&amp;x-signature=c5rI3IlhuOGLx0aKZtalLstUk%2BU%3D" alt="image.png" loading="lazy"/></p>
<p>ç”¨æˆ·æœªè®¾ç½®è´¦å·å®‰å…¨ä¿æŠ¤ä¹Ÿéœ€åŠæ—¶æé†’ï¼Œè¿™ä¹Ÿæ˜¯å¹³å°çš„ä¹‰åŠ¡ï¼</p>
<p>å°±åƒä¸ªç¨APPï¼Œè®¸ä¹…æ²¡ç™»å½•ï¼Œå†æ¬¡ç™»å½•æ—¶è‡³å°‘äººå®¶æé†’ä½ ä¿®æ”¹å¯†ç ï¼</p>
<p>win10ç³»ç»Ÿä¹Ÿä¼šå®šæ—¶æé†’ä½ ä¿®æ”¹ç”µè„‘å¯†ç ï¼</p>
<p>æ™‹æ±Ÿåœ¨ç™»å½•é€»è¾‘å­˜åœ¨å·¨å¤§å®‰å…¨æ¼æ´çš„æƒ…å†µä¸‹ï¼Œä¾æ—§ä¿æŒæ²‰é»˜ï¼Œä¸€ä¸ªæé†’éƒ½æ²¡æœ‰ï¼</p>
<h2 data-id="heading-3">4. æ™‹æ±Ÿè´¦æˆ·å®‰å…¨å°±æ˜¯ç¬‘è¯</h2>
<p>æ™‹æ±Ÿå¹³å°å­˜åœ¨æ˜æ˜¾æ¼æ´æ‰ç»™äº†ç›—å·è€…å¯ä¹˜ä¹‹æœº</p>
<ol>
<li>å¯¹äºå¤šæ¬¡è´­ä¹°ä¸”é˜…è¯»è¿›åº¦ä¸º0%çš„å¼‚å¸¸è¡Œä¸ºæœªç›‘æµ‹</li>
<li>å¼‚åœ°ç™»å½•ä¸æé†’</li>
<li>è¢«ç›—åï¼ŒåŸç™»å½•ä¸é€€å‡ºï¼Œå¯¼è‡´ä¸èƒ½åŠæ—¶å‘ç°</li>
<li>å®‰å…¨è®¾ç½®å½¢åŒè™šè®¾ï¼Œéœ€æ‰‹åŠ¨å¼€å¯æ‰èƒ½ç”Ÿæ•ˆï¼Œå¹¶åœ¨ç™»å½•é€»è¾‘æœ‰é—®é¢˜çš„æƒ…å†µï¼Œæ²¡æœ‰å±¥è¡ŒåŠæ—¶æé†’çš„ä¹‰åŠ¡</li>
</ol>
<p>è®¸å¤šè¢«ç›—å·çš„è¯»è€…éƒ½æœ‰ç±»ä¼¼æƒ…å†µå‡ºç°ï¼Œè€Œæ™‹æ±Ÿä¸æ˜¯åŠæ—¶å¤„ç†ï¼Œè€Œæ˜¯ç½®ä¹‹ä¸ç†ã€‚</p>
<p>æ™‹æ±Ÿå¹³å°æœ‰ä¸¥é‡çš„å®‰å…¨æ¼æ´è¿‡å¤±ï¼</p>
<p>ä¸–ç•ŒçœŸæ˜¯ä¸ªå·¨å¤§çš„è‰å°ç­å­ï¼æ™‹æ±Ÿæ–‡å­¦åŸä½œä¸ºç½‘æ–‡ç•Œå¥³é¢‘çš„æ‰›æŠŠå­ï¼Œå¤§é‡è¯»è€…ç”¨å¾®ä¿¡æˆ–æ”¯ä»˜å®å……å€¼è´­ä¹°æœåŠ¡ï¼Œæµæ°´è´¦è‚¯å®šä¸å°‘ï¼Œç»“æœè´¦æˆ·å®‰å…¨æ–¹é¢ç«Ÿå¦‚æ­¤è‰ç‡ï¼Œå­˜åœ¨å¦‚æ­¤å¤§çš„å®‰å…¨æ¼æ´ï¼è¯´å‡ºå»éƒ½éš¾ä»¥ç½®ä¿¡ï¼åŒè¡Œç¨‹åºå‘˜å¬äº†éƒ½å¾—ç¬‘è¯ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item>  </channel></rss>